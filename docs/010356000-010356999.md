# StackOverflow 问答 10356000-10356999

# testing - BDD真的适用于UI层吗？

> ID：10356005
> 
> 赞同：24
> 
> 时间：2012-04-27T18:35:09.947
> 
> 标签：testing, bdd

BDD 是一种**“由外而内”的**方法，据我所知，这意味着你从你所知道的开始。你编写你的故事和场景，然后实现最外层的领域对象，在你通过服务层、领域层等的过程中“向内”和“有意识地”发现合作者。对于一个还不存在的合作者，你嘲笑它（或“伪造它”）直到你成功。（我直接从 Dan North 和 Kent Beck 那里窃取了其中的一些术语）。

那么，UI 是如何融入其中的呢？

借用 North 的[一篇博客文章](http://dannorth.net/2011/01/31/whose-domain-is-it-anyway/)，他重写了以下内容：

```
Given an unauthenticated user
When the user tries to navigate to the welcome page
Then they should be redirected to the login page
When the user enters a valid name in the Name field
And the user enters the corresponding password in the Password field
And the user presses the Login button
Then they should be directed to the welcome page 
```

进入这个：

```
Given an unauthenticated user
When the user tries to access a restricted asset
Then they should be directed to a login page
When the user submits valid credentials
Then they should be redirected back to the restricted content 
```

他这样做是为了消除不相关域中的语言，其中之一是 UI（*“名称字段”、“密码字段”、“登录按钮”*）。现在 UI 可以改变并且故事（或者更确切地说，故事的*意图*）不会中断。

因此，当我为这个故事编写实现时，我是否使用 UI？是通过 Selenium 测试启动浏览器并执行“用户提交有效凭据”，还是直接连接到底层实现（例如身份验证服务）更好？顺便说一句，我使用[jBehave](http://jbehave.org/)作为我的 BDD 框架，但它也可以是 Cucumber、rSpec 或其他一些框架。

我倾向于不以自动化方式测试 UI，并且我对 Selenium 等 GUI 自动化工具持谨慎态度，因为我认为测试 (1) 可能过于脆弱并且 (2) 在执行成本最高的地方运行。所以我倾向于手动测试 UI 的美观性和可用性，并将业务逻辑留给更低、更容易自动化的层。（并且可能层不太可能改变。）

但我愿意接受这一点。那么，BDD 是否适用于 UI？

PS。我已经阅读了关于这个主题的所有帖子，但没有一个能真正解决我的问题。 [这个](https://stackoverflow.com/questions/7899731/should-your-bdd-specifications-be-separated-from-your-ui-tests)最接近，但我不是在谈论将 UI 分成一个单独的故事。相反，我说的是出于 BDD 的目的而完全忽略它。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-27T18:44:59.863

大多数使用自动化 BDD 工具的人在 UI 层使用它。我见过一些团队把它带到下一层——控制器或演示者层——因为他们的 UI 变化太频繁了。一个团队从他们面向客户的站点上的 UI 和管理站点上的控制器自动化，因为如果有什么东西坏了，他们可以很容易地修复它。

大多数情况下，BDD 旨在帮助您与利益相关者进行清晰、明确的对话（或帮助您发现仍然存在歧义的地方！）并将语言带入代码中。对话比工具重要得多。

如果您在编写步骤时使用业务使用的语言，并按照 Dan 的建议将它们保持在高水平，那么它们应该不会那么脆弱并且更容易维护。这些场景并不是真正的测试。它们是您将如何使用该系统的示例，您可以在对话中使用它，并且可以将测试作为一个很好的副产品。围绕示例进行对话比自动化更重要，无论您在哪个级别进行。

我想说，如果您的 UI 稳定，请尝试自动化，如果它不适合您，请降低到较低级别或确保您有足够的手动测试。如果您无论如何都在测试美学，这将有所帮助（并且永远不要使用自动化来测试美学！）如果您的 UI 不稳定，请不要自动化它 - 您只是对您知道可能会发生的事情添加承诺变化，在这种情况下，自动化将使其变得更加困难。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-08T21:51:36.223

我自己是 BDD 的新手，但我发现 cuke4ninja 网站可以在这方面提供帮助。他们的建议（我的解释）是您的步骤定义是高级且与 UI 无关的，它调用“工作流”类，该类将“单击此按钮”、“填充此字段”等详细信息分组到捕获的方法中正在测试的工作流，它调用一个“屏幕驱动程序”类来处理该特定屏幕的 UI 自动化。这样，所有 UI 自动化代码都从步骤定义中抽象出来并位于一个位置，如果 UI 发生变化，您只需更改“屏幕驱动程序”中的代码，而不是所有多个测试。[这](http://cuke4ninja.com/chp_three_layers.html)是讨论它的相关页面。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-01-21T08:10:50.997

**BDD 描述了什么？**

在遵循行为驱动开发 (BDD) 的团队中，验收标准（又称规则）应该描述“系统做什么”而不是“系统如何做”。

**那么，在遵循 BDD 的团队中，UI/UX 细节在哪里捕获？**

在使用 BDD 的团队中，用户界面 (UI) 和用户体验 (UX)（按钮、点击、动画等）层详细信息不应作为文本格式的接受标准（又名规则）包含在工单（例如已签发使用软件票务工具，例如 JIRA、GitLab 等）。相反，它们应该包含在设计屏幕中（线框、用户旅程、单个屏幕等）。例如，文本注释可以嵌入带有注释的设计屏幕上，或者只是作为屏幕旁边的注释。

# jquery - jquery lavaLamp 不适用于 Wordpress 单篇文章

> ID：10356008
> 
> 赞同：0
> 
> 时间：2012-04-27T18:35:31.260
> 
> 标签：jquery, wordpress, menu, lavalamp

简短的问题：给定类名，如何使用 JS/jquery 返回 some 中元素的索引？

长问题：我已经解决了这个问题几个小时，但似乎找不到解决方案。我有一个 Wordpress 网站，它使用了一个利用 superfish 和 lavalamp jquery 的主题。lavalamp 适用于类别和页面，但对于单个帖子，lavalamp 会继续转到列表的第一项。

值得注意的是，我已经进行了一些认真的谷歌搜索，但答案要么太旧，要么不适用于我的情况。我有 jQuery 1.7.1、lavaLamp 1.3.3（更新到 1.3.5 会破坏一切）和 superfish 1.4.8。

我已经缩小范围，调用 lavaLamp 插件的脚本没有为单个帖子返回当前类别的正确索引。这是它的样子：

```
var active_subpage = jQuery('ul.sf-menu ul li.current-cat, ul.sf-menu ul li.current_page_item').parents('li.top-level').prevAll().length;
var isHome = <?php if (is_front_page() || is_home()) echo('1'); else echo('0'); ?>; 

if (active_subpage) jQuery('ul.sf-menu').lavaLamp({ startItem: active_subpage });
else if (isHome === 1) jQuery('ul.sf-menu').lavaLamp({ startItem: 0 });
else jQuery('ul.sf-menu').lavaLamp(); 
```

如何修改脚本以使其返回该帖子的“当前猫”的索引？

我已经粘贴了我认为您需要的内容[HERE](http://jsfiddle.net/DsFXs/)。[您可以在这里](http://tambnguyen.com/4281-amazing-promotional-video-arrinera-automotive-pawel-lazniak/)查看现场直播。

非常感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T18:53:20.047

您的 active_subpage 查询仅适用于可从子菜单中选择的元素，第一个选择器似乎不会匹配任何内容，因为它在子菜单中寻找 .current-cat ，而实际上它是顶部菜单。我认为如果您删除active_page 查询的第一个选择器中
的第二个，它将起作用。编辑：我看到了问题，这就是我们正在寻找的问题。这两个查询可能需要分开。或者更改第一个选择器以包含后代 ( ) 以便进行匹配`<ul>`

`li.current-cat``parents('li.top-level')`

`<a>``parents('li.top-level')`

# python - Python：如何在获得第一个 False 后立即链接布尔测试以获取 False

> ID：10356013
> 
> 赞同：0
> 
> 时间：2012-04-27T18:35:49.747
> 
> 标签：python, boolean, short-circuiting, truthtable

在尝试减少嵌套 ifs（以及停止工作的脚本）遇到很多麻烦之后，我意识到我可能对布尔值在 python 中的工作方式和工作方式有错误的想法。

我有这个（工作正常但扭曲）：

```
if (not gotside):
    if (j > 1):
        if (j < a.shape[1] - 1):
            if a[i, j+unit]:
                print "only now I do stuff!" 
```

并尝试了这个（看起来没有按预期工作而变得简单）：

```
if (not gotside) and (j > 1) and (j < a.shape[1] - 1) and a[i, j+unit]:
    print "I'm well tested but not so indented..." 
```

然后我尝试使用“或”而不是“和”，但没有奏效，因为（后来我发现）当你使用`x and y`甚至`x or y`你得到一个`x, y`，而不是一个`True, False`，根据文档。

因此，我不知道如何以一种在`False`第一个测试结果为 False 时整个表达式立即返回的方式一个接一个地进行一些测试（最好在同一行中，使用布尔运算符）。

谢谢阅读！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-27T18:37:48.993

你的例子应该有效。

```
if x and y and z:
    ... 
```

仅当 x、y 和 z 均未计算为 时才应发生`False`，并且在 Python 中`and`为短路，因此`False`一旦一项失败就会返回该值。我们可以很容易地证明这一点：

```
>>> def test(n):
...     print("test", n)
...     return n
... 
>>> test(1) and test(2)
test 1
test 2
2
>>> test(0) and test(2)
test 0
0
>>> test(0) and test(2) and test(3)
test 0
0
>>> test(1) and test(0) and test(3)
test 1
test 0
0 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-27T18:44:43.820

我看到了你的担忧，但请记住，只要`if`Python 中的语句中有内容，它将被隐式转换`bool`为条件。因此，当独立完成时`3 or 2`返回`3`和`3 and 2`返回，说实际上等同于说，因此无论布尔逻辑在其他上下文中返回什么，在条件中使用时您将获得逻辑返回的错误或真值。`2``if 3 or 2``if bool(3 or 2)`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-27T19:09:37.207

是的，我必须同意其他人的说法，即您的示例应该按您的意愿工作。您是对的，它`x or y`返回 x、y 之一，但该对象将能够被评估为 True 或 False。这就是python评估`if`语句的方式。它应该像所写的那样工作，因为您的表达式将按顺序进行评估，并且一旦该行中的任何测试返回为 False（或 0，或`[]`或`{}`等），它将返回 False。如果 python 实际尝试过，您可以通过一个会引发错误的测试来看到这一点。

```
x = 1; y = 2
if x < y and x == y and d['a']: # d doesn't exist
    print 'This will never be printed' 
```

如果您的代码没有按预期工作，请详细说明您期望它做什么以及它实际在做什么。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-27T18:52:16.647

Python（以及大多数其他编程语言）中的布尔值和运算符提供“短路”功能。这意味着，如果第一项或表达式的计算结果为 false，则甚至不计算第二项：

```
>>> False and expensiveFunctionReturningBool()
False 
```

永远不会调用昂贵的函数，因为 Python 解释器在第一项被确定为 False 后立即将表达式评估为 False。这是可行的，因为在布尔逻辑中，如果 and 表达式的一侧为假，则整个表达式根据定义为假

Python 还使用 or 的短路逻辑。在这种情况下，如果第一项被确定为 True，则永远不会评估第二项。

```
>>> True or expensive()
True 
```

因此，布尔表达式可用于折叠嵌套的 if 语句（前提是它们一个接一个地立即声明），如果通过牢记短路逻辑巧妙地使用它们，它们还可以优化条件表达式。

祝你好运！

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-27T19:05:54.800

我对您未包含的代码做了一些假设，并添加了它以使程序运行：

```
gotside = False
j = 2
i = 1
unit = 3

class A:
    def __init__(self):
        self.shape = [1, 4]
    def __getitem__(self, pos):
        return pos

a = A()

if (not gotside):
    if (j > 1):
        if (j < a.shape[1] - 1):
            if a[i, j+unit]:
                print("only now I do stuff!")

if (not gotside) and (j > 1) and (j < a.shape[1] - 1) and a[i, j+unit]:
   print("I'm well tested but not so indented...") 
```

对我来说，这适用于 python 2.5、2.6、2.7 和 3.2：

```
only now I do stuff!
I'm well tested but not so indented... 
```

如果这对你有用，你能检查一下上面的程序吗？如果是这样，您能否提供有关您使用的类的更多信息 - 特别是变量类`a`。

# android - Android在通话期间禁用接近传感器

> ID：10356017
> 
> 赞同：5
> 
> 时间：2012-04-27T18:35:58.673
> 
> 标签：android, phone-call, wakelock, proximity

我有一个应用程序可以拨打电话，然后在通话时切换回我的活动。问题是，如果用户将手放在接近传感器附近，屏幕就会关闭。有没有办法在通话时禁用接近传感器关闭手机？

我试过使用`PROXIMITY_SCREEN_OFF_WAKE_LOCK`and `FULL_WAKE_LOCK`; 我尝试过使用窗口标志`(WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON | WindowManager.LayoutParams.FLAG_SHOW_WHEN_LOCKED | WindowManager.LayoutParams.FLAG_DISMISS_KEYGUARD)`；我试过使用`myView.setKeepScreenOn(true)`. 到目前为止，一切都没有成功。

另外，我有一个监听器`ACTION_SCREEN_OFF`，`ACTION_SCREEN_ON`所以如果用户出于某种原因按下电源按钮，那么它将结束通话。

# html - 如何使用 htaccess 强制 http-NOT https

> ID：10356019
> 
> 赞同：11
> 
> 时间：2012-04-27T18:36:03.863
> 
> 标签：html, wordpress, http, .htaccess, https

我想要强制使用 https 的整个域都有一个目录，即“/docs”。在 /docs 文件夹中，我有以下 htaccess 文件：

```
RewriteEngine On
RewriteCond %{HTTPS} !=on
RewriteRule ^ https://%{HTTP_HOST}%{REQUEST_URI} [L,R=301] 
```

这会强制 https 到 /docs 目录中的所有内容，这就是我想要它做的事情。我遇到的问题是试图强制 REMOVE https 回到我网站的所有其他区域的 http。在站点的根文件夹（正在运行 wordpress）中，我有以下 htaccess 文件：

```
# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule>

# END WordPress

RewriteCond %{HTTPS} on
RewriteCond %{REQUEST_URI} !^/docs/?.*$
RewriteRule ^(.*)$ http://www.mydomain.com/$1 [R=301,L] 
```

不幸的是，这不起作用。我仍然可以通过 https 访问我网站的其他区域。

我需要更改什么才能使其正常工作？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2016-07-31T23:15:46.857

由于接受的答案实际上并没有回答这个问题，我想我会发布我的解决方案。将此添加到您的`.htaccess`文件以强制使用 HTTP 而不是 HTTPS：

```
# BEGIN Force HTTP
RewriteEngine On
RewriteCond %{SERVER_PORT} 443
RewriteRule ^(.*)$ http://yourdomain.com/$1 [R=301,L]
# END Force HTTP 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T06:51:24.193

试试 wordpress 的 Force 非 SSL 插件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-12-06T06:50:14.677

“WordPress Force HTTP”插件是唯一对我有用的东西。它不仅像大多数答案一样将首页的 https 更改为 http，而且还将您网站中所有子目录的 https 更改为 http。

[https://en-au.wordpress.org/plugins/wp-force-http/](https://en-au.wordpress.org/plugins/wp-force-http/)

* * *

## 回答 #4

> 赞同：-17
> 
> 时间：2012-04-27T18:38:11.367

为什么你需要恢复到http？如果您拥有适当的 SSL 证书，您不妨保持访问安全。除非您担心系统上的负载。

我知道这不是在回答问题，但我想强调的是，问题是关于如何做***不好的做法***，这首先不应该做。

# mysql - 部分 MySQL 查询不生效

> ID：10356023
> 
> 赞同：1
> 
> 时间：2012-04-27T18:36:18.170
> 
> 标签：mysql

我编写了一个 python 脚本，一次将学生数据（姓名和班级）添加到一个表中。该表的结构是有一个主键列、一个学生姓名列，然后是每个班级的一个列。该脚本检查它添加的类是否已作为列存在，如果不存在，则创建它。然后它在当前学生的该列下写入“true”。

这是我的问题：从日志文件中，我可以看到每个查询都正确发送到数据库，但有些查询没有显示在表中。当我运行这些查询时：

```
CREATE TABLE Students (idStudents INT NOT NULL, Name VARCHAR(255) NOT NULL, PRIMARY KEY (idStudents)) ENGINE = InnoDB DEFAULT CHARACTER SET = utf8
SET NAMES 'utf8'
INSERT INTO Students (idStudents, Name) VALUES ('1', 'Bror Tao Sjørslev Bojlen')
SELECT column_name FROM information_schema.columns WHERE table_name='Students'
ALTER TABLE Students ADD 3ubmSL5 VARCHAR(20)
UPDATE Students SET 3ubmSL5='true' WHERE idStudents='1'
ALTER TABLE Students ADD 3uchSL3 VARCHAR(20)
UPDATE Students SET 3uchSL3='true' WHERE idStudents='1'
ALTER TABLE Students ADD 3udaBH3 VARCHAR(20)
UPDATE Students SET 3udaBH3='true' WHERE idStudents='1'
ALTER TABLE Students ADD 3uenA1H1 VARCHAR(20)
UPDATE Students SET 3uenA1H1='true' WHERE idStudents='1'
ALTER TABLE Students ADD 3umaHL4 VARCHAR(20)
UPDATE Students SET 3umaHL4='true' WHERE idStudents='1'
ALTER TABLE Students ADD 3uphH2 VARCHAR(20)
UPDATE Students SET 3uphH2='true' WHERE idStudents='1'
ALTER TABLE Students ADD 3uth1 VARCHAR(20)
UPDATE Students SET 3uth1='true' WHERE idStudents='1' 
```

桌子看起来像[这样](http://i.imgur.com/OEzog.png)。

也就是最后的查询

```
UPDATE Students SET 3uth1='true' WHERE idStudents='1' 
```

不通过。

我希望这是有道理的，有人可以对这个问题有所了解——这让我发疯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T18:48:54.563

我怀疑最终声明正在回滚。我猜您的客户正在将语句隐式包装在事务中。我特别看到 Navicat 回滚包含未明确提交的插入或更新的事务，除非它们伴随着另一个语句。这是奇怪的行为，但我已经通过跟踪观察了它。

顺便说一句，你的桌子设计是相当非传统的。学生和班级是不同的实体，不应存储在同一个表中。您在这里至少组合了三个不同的表；这不会很好地扩展。

编辑：

事实上，我在这里发布的第一个问题涉及到这个问题： [Unable to insert record from stored procedure called from web service](https://stackoverflow.com/questions/7745665/unable-to-insert-record-from-stored-procedure-called-from-web-service)

我只是想起来了。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T18:43:34.210

提交数据库更新会不会有问题？我似乎记得我使用过的几个数据库在有明确的 COMMIT 或进行新查询时已经提交了上一个查询的更改，因此在这种情况下，最终更新不会在脚本终止，并且更改将被回滚。

# java - Glassfish中节点之间的聚类和复制

> ID：10356024
> 
> 赞同：1
> 
> 时间：2012-04-27T18:36:20.383
> 
> 标签：java, glassfish-3, cluster-computing

我将 Glassfish 服务器配置为单机集群。将我的网站部署到其中后，Web 浏览器没有从服务器获取数据。

我错过了什么吗？我可以使用这个集群节点复制数据吗？除了 GlassFlish 服务器之外，还有哪些先决条件可以解决我的问题（集群和复制）？

# objective-c - 每当我需要操作我的业务对象时，直接使用核心数据是一种好习惯吗？

> ID：10356025
> 
> 赞同：0
> 
> 时间：2012-04-27T18:36:24.830
> 
> 标签：objective-c, ios, database, cocoa-touch, core-data

例如。如果我有一个使用对象的聊天应用程序：`ChatRoom`和`ChatMessage`. （的两个子类`NSManagedObject`）
在整个应用程序中，我需要：搜索聊天室/添加按摩/创建聊天室和消息/以及任何其他操作。
如果我直接用核心数据做所有事情可以吗？我的意思是每次我需要搜索聊天室或类似的东西时，使用 NSFetchRequest 或 NSFetchedResultsController 来完成。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T19:05:28.190

当然，您可以随时访问数据。另一方面，您应该尽量使用缓存机制。

例如，如果您正在使用您的数据，`UITableView`那么您应该`NSFetchedResultsController`明确地使用它是为`UITableViews`. 来自苹果[文档](http://developer.apple.com/library/ios/#DOCUMENTATION/CoreData/Reference/NSFetchedResultsController_Class/Reference/Reference.html)：`NSFetchedResultsController`

> 它可以选择监视其关联的托管对象上下文中对象的更改，并将结果集的更改报告给其委托（请参阅“控制器的委托”）。它可以选择缓存其计算结果，以便如果随后重新显示相同的数据，则不必重复工作（请参阅“缓存”）。

否则，如果您只是临时需要数据，您当然可以在`NSFetchRequest`每次需要时访问它们，或者如果它们没有更改或者您知道它们的生命周期，则将它们缓存在您的业务对象中。

# javascript - 如何将这两个正则表达式合二为一？

> ID：10356026
> 
> 赞同：3
> 
> 时间：2012-04-27T18:36:46.347
> 
> 标签：javascript, regex

我正在使用 JavaScript 中的正则表达式编写一个基本的词法分析器，我有两个正则表达式（一个用于单引号字符串，一个用于双引号字符串），我希望将它们组合成一个。这是我的两个正则表达式（出于测试目的，我添加了`^`and字符）：`$`

```
var singleQuotedString = /^'(?:[^'\\]|\\'|\\\\|\\\/|\\b|\\f|\\n|\\r|\\t|\\u[0-9A-F]{4})*'$/gi;
var doubleQuotedString = /^"(?:[^"\\]|\\"|\\\\|\\\/|\\b|\\f|\\n|\\r|\\t|\\u[0-9A-F]{4})*"$/gi; 
```

现在我尝试将它们组合成一个正则表达式，如下所示：

```
var string = /^(["'])(?:[^\1\\]|\\\1|\\\\|\\\/|\\b|\\f|\\n|\\r|\\t|\\u[0-9A-F]{4})*\1$/gi; 
```

但是，当我测试输入时`"Hello"World!"`，它返回`true`而不是`false`：

```
alert(string.test('"Hello"World!"')); //should return false as a double quoted string must escape double quote characters 
```

我认为问题`[^\1\\]`在于除了匹配组`\1`（单引号或双引号 - 字符串的分隔符）和`\\`（反斜杠字符）之外的任何字符。

正则表达式正确过滤掉反斜杠并匹配分隔符，但它不会过滤掉字符串中的分隔符。任何帮助将不胜感激。请注意，我参考了 Crockford 的[铁路图](http://json.org/)来编写正则表达式。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-27T19:10:41.317

您不能在字符类中引用匹配组：`(['"])[^\1\\]`。尝试这样的事情：

```
(['"])((?!\1|\\).|\\[bnfrt]|\\u[a-fA-F\d]{4}|\\\1)*\1 
```

*（你需要添加更多的转义，但你明白我的意思......）*

快速解释：

```
(['"])             # match a single or double quote and store it in group 1
(                  # start group 2
  (?!\1|\\).       #   if group 1 or a backslash isn't ahead, match any non-line break char
  |                #   OR
  \\[bnfrt]        #   match an escape sequence
  |                #   OR
  \\u[a-fA-F\d]{4} #   match a Unicode escape
  |                #   OR
  \\\1             #   match an escaped quote
)*                 # close group 2 and repeat it zero or more times
\1                 # match whatever group 1 matched 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T19:25:01.753

这也应该有效（原始正则表达式）。
如果速度是一个因素，这是'展开'方法，据说是这种东西最快的方法。

```
(['"])(?:(?!\\|\1).)*(?:\\(?:[\/bfnrt]|u[0-9A-F]{4}|\1)(?:(?!\\|\1).)*)*/1 
```

展开

```
(['"])            # Capture a quote
(?:
   (?!\\|\1).             # As many non-escape and non-quote chars as possible
)*

(?:                       
    \\                     # escape plus,
    (?:
        [\/bfnrt]          # /,b,f,n,r,t or u[a-9A-f]{4} or captured quote
      | u[0-9A-F]{4}
      | \1
    )
    (?:                
        (?!\\|\1).         # As many non-escape and non-quote chars as possible
    )*
)*

/1                # Captured quote 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T18:45:45.520

好吧，您总是可以通过在较小的正则表达式上使用交替运算符来创建一个更大的正则表达式

```
/(?:single-quoted-regex)|(?:double-quoted-regex)/ 
```

或明确：

```
var string = /(?:^'(?:[^'\\]|\\'|\\\\|\\\/|\\b|\\f|\\n|\\r|\\t|\\u[0-9A-F]{4})*'$)|(?:^"(?:[^"\\]|\\"|\\\\|\\\/|\\b|\\f|\\n|\\r|\\t|\\u[0-9A-F]{4})*"$)/gi; 
```

* * *

最后，如果您想避免代码重复，您可以使用`new Regex`构造函数动态构建此正则表达式。

```
var quoted_string = function(delimiter){
    return ('^' + delimiter + '(?:[^' + delimiter + '\\]|\\' + delimiter + '|\\\\|\\\/|\\b|\\f|\\n|\\r|\\t|\\u[0-9A-F]{4})*' + delimiter + '$').replace(/\\/g, '\\\\');
    //in the general case you could consider using a regex excaping function to avoid backslash hell.
};

var string = new RegExp( '(?:' + quoted_string("'") + ')|(?:' + quoted_string('"') + ')' , 'gi' ); 
```

# javascript - 从 JavaScript 插入 JavaScript 代码

> ID：10356029
> 
> 赞同：1
> 
> 时间：2012-04-27T18:36:55.157
> 
> 标签：javascript, dom

我需要通过类似 jsonp 的方法获取 html 代码，并将其显示在 div 元素上。这适用于简单的 html，如图像、文本等。但是现在代码可以包含 JavaScript 标记，并且需要将其插入到 div 中，但是 javascript 不运行，我用一个例子来恢复它：

```
var div = document.getElementById('mydiv');

div.innerHTML = '<scipt type="text/javascript"> console.log('I run!'); </script>'; 
```

这不起作用，我也探测：

```
var otherdiv = document.createElement('div');

otherdiv.innerHTML = '<scipt type="text/javascript"> console.log('I run!'); </script>';

div.appendChild(otherdiv); 
```

但也不行。

如何将代码插入 JavaScript 运行的地方？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T18:45:15.220

最直接的方法是提取所有的 JavaScript 和`eval`它。

您可以使用正则表达式提取 JavaScript，例如：

```
var match = html.match(new RegExp("<script[^>]*>(.+)</script>"));
console.log(match); 
```

这远不是执行 JavaScript 的最佳方式，非常容易出错并且可能不安全。我强烈建议不要这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T18:41:37.307

您应该使用像 LAB、yep/nope 或[Frame.js](https://github.com/bishopZ/Frame.js)这样的脚本加载器。浏览器有内置限制，脚本加载是在页面上包含脚本的最佳实践。

您还必须转义单引号。

```
console.log(\'I run!\'); 
```

# firefox-addon-sdk - 如何让 crx xpi 生成兼容 Firefox 12.0 的 .xpi

> ID：10356030
> 
> 赞同：1
> 
> 时间：2012-04-27T18:36:58.637
> 
> 标签：firefox-addon-sdk

我有一个 Firefox 插件，我用插件生成器编写的，它在 Firefox 11.0 中工作。我将文件复制到硬盘驱动器上的一组目录中，并使用 Firefox Add-on SDK 1.6.1 的 cfx xpi 生成 .xpi，它在 Firefox 11.0 上运行。我在 Add-on Builder 中编辑了我的 main.js 并下载了 .xpi，它可以在 Firefox 12.0 中运行。我修改了硬盘上的 main.js，运行了 cfx xpi，然后当我尝试加载生成的 .xpi 时，它说它无法安装，因为它与 Firefox 12.0 不兼容。

我怎样才能使这项工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T21:40:06.203

出于某种原因，插件 SDK 1.6 使用以下兼容性设置：

```
<em:minVersion>10.0</em:minVersion>
<em:maxVersion>12.0a2</em:maxVersion> 
```

因此，它默认生成的附加组件仅与 Firefox 12 的 alpha 版本兼容，但与最终版本不兼容。您应该[从文档中获取建议](https://addons.mozilla.org/en-US/developers/docs/sdk/1.6/dev-guide/guides/firefox-compatibility.html)并编辑`python-lib/cuddlefish/app-extension/install.rdf`. `14.*`使用as是有意义的，`maxVersion`因为 addons.mozilla.org 已经[将它列为有效版本](https://addons.mozilla.org/pages/appversions/)。

**更新**：当前版本的附加 SDK 具有更合理的兼容性范围。但是，如果您需要更改它们 - 从 Add-on SDK 1.12 开始，可以在`app-extension/install.rdf`（[当前文档](https://addons.mozilla.org/en-US/developers/docs/sdk/1.12/dev-guide/guides/firefox-compatibility.html)）下找到该文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-30T04:11:19.117

可能为时已晚，但关于生成的 xpi 的 min/maxVersion 和更改它们[的完整文档在这里](https://developer.mozilla.org/en-US/Add-ons/SDK/Guides/Firefox_Compatibility)。

# c# - 使用 SVCUTIL.EXE 为 NOAA Forcast 生成 DataContracts

> ID：10356031
> 
> 赞同：1
> 
> 时间：2012-04-27T18:37:00.870
> 
> 标签：c#, xsd, datacontract, datacontractserializer, svcutil.exe

我正在为 NOAA 预测数据编写一个 API，并且我试图从这样的 XML 文档中获取信息[到](http://forecast.weather.gov/MapClick.php?lat=40.78158&lon=-73.96648&FcstType=dwml)一个反序列化的对象中。我下载了[架构](http://graphical.weather.gov/xml/DWMLgen/schema/DWML.xsd)，它是两个依赖项（[meta_data.xsd](http://graphical.weather.gov/xml/DWMLgen/schema/meta_data.xsd)和[ndfd_data.xsd](http://graphical.weather.gov/xml/DWMLgen/schema/ndfd_data.xsd)）并尝试运行此命令

```
svcutil C:\DWML.xsd /dconly 
```

但它返回

```
Error: Cannot read D:\DWML.xsd.
Cannot load file D:\DWML.xsd as an Assembly. Check the FusionLogs for more information. 
```

有人可以指导我完成为此 xml 文档创建数据合同的步骤吗？

如果有一种更简单的方法可以将此信息转换为不需要数据合同的易于查询的形式，我愿意改变我的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T19:05:11.313

您需要像这样将所有 xsd 文件提供给 SvcUtil

```
svcutil *.xsd /dconly 
```

然而，用 NOAA 模式尝试这个会产生一堆错误，它建议使用`/importXmlTypes`. 但是以下内容也对我不起作用：

```
svcutil *.xsd /dconly /ser:XmlSerializer /importXmlTypes 
```

最后，使用[了 Xsd2Code](http://xsd2code.codeplex.com/releases/view/22222)

```
xsd2Code.exe DWML.xsd 
```

它就像一个魅力。

# interpreter - 解释器语义：阐明解释器所做的步骤

> ID：10356032
> 
> 赞同：1
> 
> 时间：2012-04-27T18:37:04.427
> 
> 标签：interpreter, semantics, bytecode

这个问题是关于定义、语义的。

我理解解释的一般概念，将源代码实时转换为机器代码，或转换为稍后实时“编译”或在运行时之前“编译”的中间缓存等。

源 > 字节码翻译步骤和字节码 > 机器码翻译步骤之间是否存在**语义区别？**人们通常将第一部分称为“解释”，将第二部分称为“编译”。请不要误会，我不是要求在**动态语言**范围之外定义编译。那是另一个话题。

此外，由于大量解释器实现了如此多不同的技术，因此在这两个步骤之间进行语义区分是徒劳的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T18:56:41.320

通常，解释意味着解释器以任意形式（纯源代码、抽象语法树（AST）、字节码……）执行程序。

一些虚拟机大量使用 JIT（即时编译器），将程序的中间表示翻译（编译）为本机机器代码。这绝对是一种汇编形式。

此外，一些 VM 会进行多个编译阶段：首先，将 AST 编译为字节码，然后再将其编译为机器码。

我想说，编译基本上意味着将一个中间表示转换为下一个表示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T19:32:37.563

解释器执行的步骤通常在类似于以下的循环中编程：

```
get next instruction
parse and interpret its components
dispatch its translation 
```

语言的定义和语义仅在解释器中实现，但在其他地方定义。

您的问题的答案在于被解释或编译的语言的形式、操作和公理语义定义。在这两种情况下，无论采用何种实现技术，形式语言定义的语义都必须保留并保持一致，以用于任何解释或编译。

诸如解释器和编译器之类的语言的实现是针对测试套件进行测试的，该测试套件根据其形式语义定义测试该语言中每种语言结构的实现。

语言设计者以符号形式（例如指称语义）生成语言的正式定义。从数学的角度来看，这个定义非常抽象。

编译器或解释器实现者对语言的操作语义定义更感兴趣，这与构建编译器或解释器以在目标机器上运行更直接相关。

语言的用户对语言的公理化定义更感兴趣，它告诉程序员如何使用语言的结构来创建程序。

# entity-framework - 如何在实体框架中编写查询

> ID：10356038
> 
> 赞同：-1
> 
> 时间：2012-04-27T18:37:14.343
> 
> 标签：entity-framework, linq-to-entities, oracle10g, entity

我是实体框架的新手。我有一个需要转换为实体框架的数据库查询。如何将 LinQ 中的查询写入 Enity

有人可以帮我吗？

```
SELECT 
  FLD1, 
  FLD2, 
  SUM(FLD3), 
  (TO_CHAR(FLD4,'MM/DD/YYYY'))
FROM 
  TABLE1
WHERE 
  (FLD2=XXX ) AND  
  (FLD3 BETWEEN TO_DATE(VARDATE,'MMDDYYYY') AND TO_DATE(VARDATE1,'MMDDYYYY'))
GROUP BY 
  FLD1, 
  FLD2, 
  FLD4 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-14T19:16:28.537

嗯...信息是稀疏的，你用很多不同的情况填充它，就像这样。

```
_context.SomeObject
     .Where(x=>x.SomeField == "SomeValue" && x.SomeField > 5 && x.SomeField < 10)
     .Select(x=>new {  x.SomeField1, x.SomeField2, x.SomeField2, SomeField4 = x.SomeChildCollection.Sum(y=>y.SomeChildvalue)
.GroupBy(x=>new {x.SomeField1, x.SomeField2, x.SomeField3})
.ToList() 
```

这将导致一个组，其中键是具有值 SomeField1、SomeField2、SomeField3 的对象，并且该对象将是具有 Select 中的 4 个属性的匿名投影。

在某些关于日期的比较中，您可能需要使用 EntityFunctions。

# javascript - 当 Sharepoint 2010 webpart 处于最小化模式时捕获还原事件

> ID：10356040
> 
> 赞同：0
> 
> 时间：2012-04-27T18:37:23.023
> 
> 标签：javascript, events, sharepoint-2010, web-parts

我有一个处于最小化模式的 SharePoint 2010 Web 部件，我想要的是当我在最小化菜单选项的菜单中单击恢复时，我应该能够捕获该事件。

![在此处输入图像描述](../Images/76165d2e96ae5ad1860a75b30ecada0c.png)

选择此恢复选项后如何获取事件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T19:00:22.217

我找到了我正在寻找的解决方案，同时我发现了一些关于 SharePoint 的东西，我不确定它们是否适用于所有地方，但我发现它们很有趣，可以分享，

1.  单击事件不能附加到菜单项中的动词。
2.  有时我发现我可以使用纯 JavaScript 而不是使用 Jquery 来选择元素 [我仍然很困惑为什么会发生这种情况]。

好吧，这个问题的解决方案很简单，我用鼠标而不是点击，我可以捕捉到它，

```
$('#MSOMenu_Restore').live('mouseup',function(){alert('trexx')}); 
```

谢谢 ，

拉胡尔

# playframework-2.0 - 您如何在 play 2.0 上添加额外的记录器？

> ID：10356043
> 
> 赞同：0
> 
> 时间：2012-04-27T18:37:33.837
> 
> 标签：playframework-2.0

我一直在搜索 play 2.0 的文档，但找不到与添加额外记录器相关的任何内容。

你对如何做到这一点有任何想法吗？

是通过添加额外的 xml（例如 JPA）来完成，还是可以通过创建特定类来完成？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T17:35:39.753

[此处](http://www.playframework.org/documentation/2.0/SettingsLogger)描述了日志的配置。是的，您必须为[logback](http://logback.qos.ch/documentation.html)编写一些 xml 。我希望这能回答你的问题。如果您想更改日志实现，我希望 biesior 是对的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T18:49:17.783

不，您不需要使用 XML。您*只需*`project/Build.scala`在文件 ie中包含 Maven 依赖项。

```
val appDependencies = Seq(
  "log4j" % "log4j" % "1.2.16"
) 
```

然后`play update`在终端中执行命令以从存储库中获取 jar，仅此而已

# cocoa - NSTextView 高亮显示

> ID：10356051
> 
> 赞同：1
> 
> 时间：2012-04-27T18:38:04.973
> 
> 标签：cocoa, nstextview

在我为 Mac OSX 构建的产品中，我需要支持 10.5、10.6 和 10.7。我使用 NSTextView 作为编辑器。我用它来显示文本和图像。我对突出显示有要求。这必须像 MS Word 一样工作。在 MS Word 中，您可以选择一个范围并将其更改为黄色。

我使用 setMarkedTextAttributes: 做了同样的事情，但这不适用于内联图像。所以我尝试使用 LayoutManager 并设置背景颜色，但它似乎也不起作用。

关于突出显示的另一点是切换，所以如果我选择相同范围的文本并再次突出显示它，它应该不会突出显示。所以为此，我将所有 NSRange 存储在一个列表中并检查它是否已突出显示。我觉得我做错了什么。所以我试图获取 NSRect 然后应用颜色可能是？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T18:55:58.680

在 NSAttributedString 中设置该范围的背景颜色：

```
NSMutableAttributedString *mattrstg = [textView textStorage];
[mattrstg addAttribute:NSBackgroundColorAttributeName value:colorHighlighter range:range]; 
```

现有属性将是您对突出显示和未突出显示的内容的记录。所以，要切换你可以做的突出显示

```
[mattrstg enumerateAttribute:NSBackgroundColorAttributeName 
          inRange:rangeToChange 
          options:0 usingBlock:^(id value, NSRange range, BOOL *stop) { 
              if (value) {
                  [mattrstg removeAttribute:NSBackgroundColorAttributeName range:range]; 
              } else {
                  [mattrstg addAttribute:NSBackgroundColorAttributeName value:colorHighlighter range:range]; 
              }
          }]; 
```

# c# - 无法加载文件或程序集“System.EnterpriseServices.Wrapper.dll”

> ID：10356058
> 
> 赞同：2
> 
> 时间：2012-04-27T18:38:12.960
> 
> 标签：c#, asp.net

当我在 Visual Studio 2010 中运行新的 Web 应用程序时，我收到“无法加载文件或程序集 System.EnterpriseServices.Wrapper.dll'”错误消息。

以下是错误消息的完整文本：

> ## “/”应用程序中的服务器错误。
> 
> ### 解析器错误
> 
> **说明：**解析服务此请求所需的资源时出错。请查看以下特定的解析错误详细信息并适当地修改您的源文件。
> 
> **解析器错误消息：** 无法加载文件或程序集“System.EnterpriseServices.Wrapper.dll”或其依赖项之一。试图加载格式不正确的程序。
> 
> **源错误：**
> 
> 第 1 行：<%@ Application Codebehind="Global.asax.cs" Inherits="WebApplication2.Global" Language="C#" %>
> 
> **源文件**：/global.asax**行：** 1

![错误消息的屏幕截图（上面转录）](../Images/ef46c2ea5491b8c503130a10ccf25b64.png)

什么可能导致此错误，我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T18:54:18.503

您的项目包含对文件“System.EnterpriseServices.Wrapper.dll”的损坏引用；您也可以尝试重新安装 .NET Framework。

有关类似类型的问题，请参阅这些链接：[System.EnterpriseServices.Wrapper.dll 错误](https://stackoverflow.com/questions/2890773/system-enterpriseservices-wrapper-dll-error) 和

[http://help.turbolaw.com/entries/361597-error-message-could-not-load-file-or-assembly-system-enterpriseservices-wrapper-dll-when-starting-tu](http://help.turbolaw.com/entries/361597-error-message-could-not-load-file-or-assembly-system-enterpriseservices-wrapper-dll-when-starting-tu)

# c# - C# while 循环关闭表单

> ID：10356059
> 
> 赞同：0
> 
> 时间：2012-04-27T18:38:14.523
> 
> 标签：c#, loops, process

当用户在我的表单中按下关闭按钮时，我正在执行一段通过消息框停止进程（java.exe）的代码。因此，如果您按下“是”按钮，程序将扫描所有正在运行的进程并检查该进程是否正在运行。如果进程没有运行，则终止应用程序。

问题是该消息多次弹出。发生这种情况是因为他不断激活关闭事件，但我不知道如何正确编码。

```
if (_isRunning)
{
    if (MessageBox.Show("Are you sure you want to quit?", "Confirm Quit", MessageBoxButtons.YesNo) ==
        DialogResult.Yes)
    {
        Stop();
        _exited = true;

        foreach (Process x in Process.GetProcesses())
        {
            while (x.Id == _processID)
            {
                Application.Exit();
                e.Cancel = true;
                return;
            }
        }
    }
} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T18:40:27.387

按下后禁用关闭按钮（或整个表单）怎么样？这样，用户就不会看到明显启用的关闭按钮，它没有任何用处。

一般来说，长时间阻止用户输入是个坏主意……如果操作需要超过 1 秒才能完成，则可能值得设置一个进度条。

此外，您对 Application.Exit() 的使用看起来很可疑。你到底想在`foreach`区块中完成什么？

另请参阅[如何在 C# 中正确关闭 winforms 应用程序？](https://stackoverflow.com/questions/2414244/how-do-i-properly-close-a-winforms-application-in-c)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T18:44:07.407

由于您处于消息循环中，因此您可以防止多次调用而无需多线程的麻烦：

```
private bool _isClosing = false;

void Form_Closing(object sender, EventArgs e) {
    if (_isClosing) return;

    _isClosing = true;
   if (_isRunning) {
      // ....Clean up code....
   }
   _isClosing = false;
} 
```

# c# - 拆分二维数组的最有效方法？

> ID：10356060
> 
> 赞同：0
> 
> 时间：2012-04-27T18:38:25.440
> 
> 标签：c#, .net

我正在尝试将文件读入全局数组，遍历数组并将每个字符串标识为相应的数量，然后在它们**自己的组**中找到总和。并将这些组按各自的唯一编号进行划分。

我正在阅读的文本文件：

```
Name,50
Name,40
DifferentName,50
AnotherName,10
Name,60 
```

在逗号处拆分行并使数字对应于它们的特定名称的最简单方法是什么，不知道它们将按哪个顺序排列？

这是我目前使用的代码。虽然现在它只是打开文件对话框，但我把它放在这里作为建设性的参考。

```
 string strFileName;

    private void btnReadInFile_Click(object sender, EventArgs e)
    {
        //select the file
        OpenFileDialog ofdGetFile = new OpenFileDialog();
        if (ofdGetFile.ShowDialog() == DialogResult.Cancel)
        {
            //cancel
            MessageBox.Show("User Canceled");
            return;
        }
        else
        {
            //open the file
            StreamReader myStreamReader;
            strFileName = ofdGetFile.FileName;
            FileStream input = new FileStream(strFileName, FileMode.Open, FileAccess.Read);
            myStreamReader = new StreamReader(input);
            // other
            MessageBox.Show("Reading Complete", "Done!", MessageBoxButtons.OK, MessageBoxIcon.Information);
        }
    }

    private void btnShowGrade_Click(object sender, EventArgs e)
    {
        if (strFileName != null)
        {
            String[][] nameSums = System.IO.File.ReadLines(strFileName)
           .Select(l => l.Split(','))                // split the line
           .GroupBy(arr => arr[0])                   // group by name
           .Select(grp => new String[]{
            grp.Key,
            grp.Sum(arr => int.Parse(arr[1])).ToString()})
           .ToArray();

        }
        else
        {
            MessageBox.Show("You need to read in a file first.");
        }
    }
} 
```

我觉得必须有更好的方法来做到这一点。

到目前为止，非常感谢大家的帮助！我确信这个问题没有得到解决的唯一原因是我缺乏沟通技巧。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T19:13:57.547

**根据您上次的编辑进行编辑**：****

 **> 将每个字符串识别为其对应的数量，然后在它们自己的组中找到总和

目前还不清楚你想要实现什么。您应该已经提供了样本数据的所需结果。我假设金额是数字，组是名称组。

所以对于`Name`-group 它会是`50+40+60=150`, `DifferentName`=`50`和`AnotherName`= `10`?

这将创建一个包含唯一名称及其相应数量的字典：

```
Dictionary<String, int> nameSums = 
      System.IO.File.ReadLines(path)  // read lines from file
     .Select(l => l.Split(','))       // split the line
     .GroupBy(arr => arr[0])          // group by name
     .ToDictionary(grp =>  grp.Key, grp => grp.Sum(arr => int.Parse(arr[1]))); 
```

如果您坚持使用数组方法，则以下创建并初始化一个锯齿状数组（数组数组），名称为第一个元素，总和为第二个：

```
String[][] nameSums = System.IO.File.ReadLines(path)  // read lines from file
            .Select(l => l.Split(','))                // split the line
            .GroupBy(arr => arr[0])                   // group by name
            .Select(grp => new String[]{
                grp.Key,
                grp.Sum(arr => int.Parse(arr[1])).ToString()})
            .ToArray(); 
```

* * *

**第**一种方法：

*“使数字与它们的具体名称相对应”*

所以我假设你想要属于每个数字的名称。如果这是真的 a`Dictionary<String, List<String>>`将是最好的选择：

```
var numNames = System.IO.File.ReadLines(path)
    .Select(l => l.Split(','))
    .GroupBy(arr => arr[1])
    .ToDictionary(grp => grp.Key, grp => grp.Select(arr => arr[0]).ToList()); 
```

1.  这些行从文件中读取为`IEnumerable<String>`
2.  然后每一行用逗号分隔为`String[]`
3.  这些按第二个元素（数字）分组以获得唯一的数字及其名称
4.  结果将用于创建一个`Dictionary`，（现在）唯一的数字是键，名称是值`List<String>`

如果您不熟悉[字典](http://msdn.microsoft.com/en-us/library/xfhwa508.aspx)，通常通过键访问它们，因此如果您想知道该数字的所有名称`"50"`：

```
List<String> names = numNames["50"];
foreach(String name in names)
    Console.Write("name={0}", name); 
```

或者如果你想迭代所有：

```
foreach(var numName in numNames)
    foreach(var name in numName.Value)
        Console.Write("number={0} name={1}", numName.Key, name); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T18:49:31.470

您的任务是 IO 绑定的。更改代码很可能不会获得任何好处。首先，您应该使用分析器来查找应用程序的瓶颈。

如果您有 .Net 4、4.5 或 Silverlight，请使用[ReadLines](http://msdn.microsoft.com/en-us/library/dd383503.aspx)方法。它返回一个表示行集合的迭代器。片段：

```
 List<KeyValuePair<string, double> values = new List<KeyValuePair<string, double>();
        var lines = File.ReadLines(myFile);
        foreach (var line in lines)
        {
            var data = line.Split(',');
            var x = data[0];
            var y = Double.Parse(data[1], CultureInfo.InvariantCulture);
            var pair = new KeyValuePair<string, double>(x, y);
            values .Add(pair);
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T18:40:37.953

```
myArray = File.ReadAllLines(myFileName).Select(l => l.Split(',')).ToArray(); 
```

请注意，这将是一个交错数组，而不是二维数组。要创建一个二维的，您可以使用

```
lines = File.ReadAllLines(myFileName).Select(l => l.Split(',')).ToArray();
myArray = new string[lines.Count(), 2];
for(int i = 0; i < lines.Length; i++)
{
    myArray[i, 0] = lines[i, 0];
    myArray[i, 1] = lines[i, 1];
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-27T18:47:10.580

为什么不使用字典？

所以，

```
Dictionary<string,int> namesAndAges = new Dictionary<string,int>();
String[] line = new String[2];
while(there's still xml to read)
    {
        aLineOfXml = blah; //read a line of xml however you were gonna do it 
        line = aLineOfXml.Split(',');
        namesAndAges.Add(line[0],line[1]);
    } 
```

while 循环中的前两行最好压缩为一行，但为了清楚起见，因为我不想添加任何 xml 解析代码，所以我将其拆分为这样。**

# ios - AVCaptureSession 录制带音频的视频

> ID：10356061
> 
> 赞同：23
> 
> 时间：2012-04-27T18:39:12.300
> 
> 标签：ios, objective-c, audio-recording, avcapturesession, avcapturedevice

我的应用程序设置为使用 AVCaptureSession 从相机录制视频，但是，它没有音频。我需要做什么来录制音频，然后将其添加到文件的 videoOutput 中？这是我录制视频的代码：

```
AVCaptureSession *session = [[AVCaptureSession alloc] init];
[session beginConfiguration];
session.sessionPreset = AVCaptureSessionPresetMedium;

CALayer *viewLayer = self.vImagePreview.layer;
NSLog(@"viewLayer = %@", viewLayer);

AVCaptureVideoPreviewLayer *captureVideoPreviewLayer = [[AVCaptureVideoPreviewLayer alloc] initWithSession:session];
captureVideoPreviewLayer.videoGravity = AVLayerVideoGravityResizeAspectFill;
captureVideoPreviewLayer.frame = self.vImagePreview.bounds;

[self.vImagePreview.layer addSublayer:captureVideoPreviewLayer];

AVCaptureDevice *device = [self frontFacingCameraIfAvailable];

NSError *error = nil;
AVCaptureDeviceInput *input = [AVCaptureDeviceInput deviceInputWithDevice:device error:&error];
if (!input) {
    // Handle the error appropriately.
    NSLog(@"ERROR: trying to open camera: %@", error);
}

NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectoryPath = [paths objectAtIndex:0];

AVCaptureMovieFileOutput *movieFileOutput = [[AVCaptureMovieFileOutput alloc] init];

NSString *archives = [documentsDirectoryPath stringByAppendingPathComponent:@"archives"];
NSString *outputpathofmovie = [[archives stringByAppendingPathComponent:@"Test"] stringByAppendingString:@".mp4"];
NSURL *outputURL = [[NSURL alloc] initFileURLWithPath:outputpathofmovie];

[session addInput:input];
[session addOutput:movieFileOutput];
[session commitConfiguration];
[session startRunning];
[movieFileOutput startRecordingToOutputFileURL:outputURL recordingDelegate:self]; 
```

我为音频添加了另一个输入，但它不适用于后台的 mpmovieplayercontroller。有什么想法可以播放一个视频并同时从相机录制音频和视频吗？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-06-07T14:42:40.773

您尚未包含音频设备：

```
AVCaptureDevice *audioDevice = [AVCaptureDevice defaultDeviceWithMediaType:AVMediaTypeAudio];
AVCaptureDeviceInput * audioInput = [AVCaptureDeviceInput deviceInputWithDevice:audioDevice error:nil];
[session addInput:audioInput] 
```

`beginConfiguration`和之间`commitConfiguration`。它会工作的！

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2016-03-23T04:57:12.810

`beginConfiguration()`在和之间添加以下代码`commitConfiguration()`

```
// Add audio device to the recording

let audioDevice = AVCaptureDevice.defaultDeviceWithMediaType(AVMediaTypeAudio)
do {
    let audioInput = try AVCaptureDeviceInput(device: audioDevice)
    self.captureSession.addInput(audioInput)
} catch {
    print("Unable to add audio device to the recording.")
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-01-23T04:18:25.093

在 swift 5x 中，你可以使用这个：

```
do {
        guard let audioDevice = AVCaptureDevice.default(for: AVMediaType.audio) else {
            print("Default audio device is unavailable.")
            setupResult = .configurationFailed
            session.commitConfiguration()
            return
        }

        // Add audio input
        let audioInput = try AVCaptureDeviceInput(device: audioDevice)
        if session.canAddInput(audioInput) {
            session.addInput(audioInput)
        } else {
            print("Couldn't add audio device input to the session.")
            setupResult = .configurationFailed
            session.commitConfiguration()
            return
        }

    } catch {
        print("Couldn't create Audio device input: \(error)")
        setupResult = .configurationFailed
        session.commitConfiguration()
        return
    } 
```

# ios - 如何处理 iOS SQLite 中的重音字符？

> ID：10356062
> 
> 赞同：12
> 
> 时间：2012-04-27T18:39:19.047
> 
> 标签：ios, sqlite, cultureinfo, diacritics

我需要执行对大小写和重音不敏感的 SELECT 查询。出于演示目的，我创建了一个这样的表：

```
create table table
(
  column text collate nocase
);

insert into table values ('A');
insert into table values ('a');
insert into table values ('Á');
insert into table values ('á');

create index table_cloumn_Index
  on table (column collate nocase); 
```

然后，我在执行以下查询时得到这些结果：

```
SELECT * FROM table WHERE column LIKE 'a';
> A
> a

SELECT * FROM table WHERE column LIKE 'á';
> á

SELECT * FROM table WHERE column LIKE 'Á';
> Á 
```

我该如何解决这个问题，以便以下任何查询的结果都是这样的：

```
> A
> a
> Á
> á 
```

顺便说一句，sqlite 在 iOS 上运行。

提前致谢，

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-27T19:18:54.423

两种基本方法：

1.  您可以在表中创建第二列，其中包含不带国际字符的字符串。此外，在对这个辅助搜索列进行搜索之前，您还应该从正在搜索的字符串中删除国际字符（这样您就可以将非国际与非国际进行比较）。

    这是我用来转换国际字符的例程：

    ```
    NSData *data = [string dataUsingEncoding:NSASCIIStringEncoding allowLossyConversion:YES];
    string = [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding]; 
    ```

    您还可以将重音字符替换为：

    ```
    NSMutableString *mutableString = [string mutableCopy];
    CFStringTransform((__bridge CFMutableStringRef)mutableString, NULL, kCFStringTransformStripCombiningMarks, NO); 
    ```

    顺便说一句，如果您需要对结果进行排序，您也可以在这个辅助搜索字段而不是主字段上进行排序，这也将避免因 SQLite 无法对国际字符进行排序而引起的问题。

2.  您也可以创建自己的“非重音”C 函数（在`@implementation`您的类之外定义此 C 函数）：

    ```
    void unaccented(sqlite3_context *context, int argc, sqlite3_value **argv)
    {
        if (argc != 1 || sqlite3_value_type(argv[0]) != SQLITE_TEXT) {
            sqlite3_result_null(context);
            return;
        }

        @autoreleasepool {
            NSMutableString *string = [NSMutableString stringWithUTF8String:(const char *)sqlite3_value_text(argv[0])];
            CFStringTransform((__bridge CFMutableStringRef)string, NULL, kCFStringTransformStripCombiningMarks, NO);
            sqlite3_result_text(context, [string UTF8String], -1, SQLITE_TRANSIENT);
        }
    } 
    ```

    然后你可以定义一个 SQLite 函数来调用这个 C 函数（在你打开数据库后调用这个方法，直到你关闭那个数据库才有效）：

    ```
    - (void)createUnaccentedFunction
    {
        if (sqlite3_create_function_v2(database, "unaccented", 1, SQLITE_ANY, NULL, &unaccented, NULL, NULL, NULL) != SQLITE_OK)
            NSLog(@"%s: sqlite3_create_function_v2 error: %s", __FUNCTION__, sqlite3_errmsg(database));
    } 
    ```

    完成后，您现在可以`unaccented`在 SQL 中使用这个新函数，例如：

    ```
    if (sqlite3_prepare_v2(database, "select a from table where unaccented(column) like 'a'", -1, &statement, NULL) != SQLITE_OK)
        NSLog(@"%s: insert 1: %s", __FUNCTION__, sqlite3_errmsg(database)); 
    ```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-29T10:21:34.017

您将需要[创建一些用户函数，或者覆盖（即替换）这些](http://www.sqlite.org/c3ref/create_function.html)[`like()`函数](http://www.sqlite.org/lang_corefunc.html#like)的默认实现。原因是`LIKE`sqlite 中的运算符不支持非 ASCII 不区分大小写：

> 默认情况下，SQLite 只理解 ASCII 字符的大写/小写。默认情况下，LIKE 运算符对超出 ASCII 范围的 unicode 字符区分大小写。例如，表达式 'a' LIKE 'A' 为 TRUE，但 'æ' LIKE 'Æ' 为 FALSE。

这是有道理的，否则 sqlite 将需要支持不同的文化，因为情况因人而异。一个例子是土耳其[的首都`i`，它不是`I`带点`İ`的，小写的`I`是无点的`ı`](http://en.wikipedia.org/wiki/Turkish_dotted_and_dotless_I)。将所有这些文化信息嵌入到 sqlite 中将是非常繁重的（即它会增加 sqlite 目标代码）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-01-09T20:14:09.200

这是我对 LIKE 问题的解决方案

```
static void myLow(sqlite3_context *context, int argc, sqlite3_value **argv)
{
    NSString* str = [[NSString alloc] initWithUTF8String:
                            (const char *)sqlite3_value_text(argv[0])];
    const char* s = [[str lowercaseString] UTF8String];
    sqlite3_result_text(context, s, strlen(s), NULL);
    [str release];
}

// call it once after opening db
sqlite3_create_function(_db, "myLow", 1, SQLITE_UTF8,NULL, &myLow, NULL, NULL); 
```

然后代替查询

```
SELECT * FROM table WHERE column LIKE 'a' 
```

你应该使用

```
SELECT * FROM table WHERE myLow(column) LIKE 'a' 
```

# javascript - 当 iframe 不是来自同一个域时，如何强制在父窗口中打开来自 iframe 的链接？

> ID：10356064
> 
> 赞同：0
> 
> 时间：2012-04-27T18:39:19.807
> 
> 标签：javascript, html, iframe, curl

我在另一个网站的页面上有 iframe。但是当我点击 iFrame 中的任何链接时。浏览器将用户移动到该站点。我怎么能限制它？该用户在我的页面内完成冲浪？就像在这里完成一样。 [http://www.hidemyass.com/](http://www.hidemyass.com/)

注意： iframe 和父页面**不是同一个域**。

细节：

假设我有我的网站[http://www.example.com](http://www.example.com)并且在获得凭据后在这里，我想在 iframe 中打开 facebook.com 并且用户浏览 facebook 而无需在单击任何链接时转到 facebook.com。

PS。我以 facebook.com 为例。我问任何网站。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-05-16T07:24:09.493

仅使用 javascript 是不可能做到[http://www.hidemyass.com/](http://www.hidemyass.com/)正在做的事情，因为 javascript 是客户端。该站点可能充当服务器代理......几乎，这意味着它需要服务器端通信（可能）。（可能是他们要钱的原因，因为他们处理流量）您可能需要 AJAX 来执行此操作，这需要服务器能够不受限制地处理和访问其他服务器。任何免费服务器都不会轻易做到这一点，并且通常对他们跟踪通信的服务器有策略。所以你很可能不得不付钱给别人，如果你还没有付钱的话。如果只有你，这很便宜，但流量越多越贵。

也就是说，您可以查看沙盒模式是否适合您。

```
<iframe sandbox><iframe> 
```

要重新启用功能，请将它们添加到沙盒 pramiters

*   （无值） - - - - - - - - - - - - - - -应用所有限制
*   allow-forms - - - - - - - - - - - - - 重新启用表单提交
*   allow-pointer-lock - - - - - - - - - - 重新启用 API
*   allow-popups - - - - - - - - - - - - 重新启用弹出窗口
*   allow-same-origin - - - - - - - - - -允许将 iframe 内容视为来自同一来源
*   allow-scripts - - - - - - - - - - - - 重新启用脚本
*   allow-top-navigation - - - - - - - - 允许 iframe 内容导航其顶级浏览上下文

资料来源：[w3schools](http://www.w3schools.com/tags/att_iframe_sandbox.asp)

```
<iframe sandbox="allow-forms"><iframe> 
```

如果这不满足，请使用`onclick`和`onchange`事件来阻止用户交互。带有可点击元素或移动到其他页面。

```
<iframe onchange="function(){\
  document.getElementsByTagName("iframe"[0].src =\
  "http://facebook.com");\
}"></iframe> 
```

或某种 onclick 阻止默认值。

首先它不安全，所以为什么要停在那里。

访问`iframe.contentDocument`并搜索并删除所有`<a`...`</a>`标签或您想要的标签。您可以查找某种删除子方法来执行此操作。如果你想更精明，你可以比较href，看看它是否属于外国网站。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T18:49:03.197

您可以尝试这篇文章中的代码： [How to add click event to a iframe with JQuery](https://stackoverflow.com/questions/1609741/how-to-add-click-event-to-a-iframe-with-jquery)

我想你可以使用 .live() jquery 函数，但可能你不能:) 我在互联网上浏览这个案例， .live() 不起作用，但 .bind() 必须正常工作:)

# java - 如何在 LpSolve 中将灵敏度设置为“真”

> ID：10356066
> 
> 赞同：0
> 
> 时间：2012-04-27T18:39:33.643
> 
> 标签：java, linear-algebra, lpsolve

我希望在 LpSolve (http://lpsolve.sourceforge.net/5.5/sensitivity.htm) 中启用灵敏度。

文档表明您通过将 -S4 传递给命令行来启用敏感性。在 R 中，您可以在 lpsolve() 函数调用中传递 compute.sens=true。

但是，我使用的是 Java API，我看不到这样的设置选项。

我确实看到了一个 setSense（布尔最大化）函数。是这样吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T21:41:40.827

Hi I am also struggling with LPSolve, but I did find some useful code, that included the code line

```
lp.setSense(true); 
```

`lp` is the name of the var assigned to the *makeLP* command.

I however do not know how to set the degree as stated in the docs...

I hope this answers your question.

# asp.net-mvc-3 - 我需要在 DisplayFor/EditorFor 中使用模型进行数据访问吗？

> ID：10356068
> 
> 赞同：4
> 
> 时间：2012-04-27T18:39:40.177
> 
> 标签：asp.net-mvc-3, html-helper

表达式何时传递给`DisplayFor`并`EditorFor`需要使用模型进行数据访问？

例如，我可能有以下模型

```
class MyModel {
   IList<SubModel> Subs { get; set; }
}
class SubModel {
   string Name { get; set; }
} 
```

然后我可以使用从模型开始的完整路径来编写我的视图数据访问：

```
@Html.DisplayFor(m => m.Subs[i].Name) 
```

或者，我可能在不使用模型的视图中有这样的东西：

```
@foreach (var item in Model.Subs) {
    @Html.DisplayFor(m => item.Name)
} 
```

**但在上面我实际上并没有使用该模型。**这似乎每次我都尝试过，但在什么情况下我可能会遇到问题？

`EditorFor`通常使用 将`Expression`名称/ID 构建到表单元素中。在指定传递给的表达式时不使用模型是否安全`EditorFor`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T08:38:19.567

简短的回答是肯定的——必须有一个模型作为参数传递给 lambda 方法。如果您的 View 没有模型并且您调用 DisplayFor 或 EditorFor，您将看到错误消息“模板只能用于字段访问、属性访问、单维数组索引或单参数自定义索引器表达式。”

因此，您必须有一个模型才能使用 DisplayFor，但实际上您不必使用它。例如，您可以这样做：

```
Html.EditorFor(m => i) 
```

在这种情况下，Html 名称和 id 都将是“i”。

但是有一些注意事项需要注意。您可能希望为 SubModel 创建一个强类型的局部视图，例如，在 Shared/Display Templates 或 Editor Templates 文件夹中。在这种情况下，您可以将 foreach 与 DisplayFor 一起使用。

如果您使用 EditorFor 并且希望发布的字段绑定回模型，则需要使用：

```
for (i = 0; ...) 
```

而不是 foreach，以便您的 Html 表单字段以可绑定的名称结束，例如 Subs[1].Name。如果您使用 foreach，您的所有输入都将具有相同的名称和 ID，例如：

```
id="s_Name" name="s.Name" 
```

而使用 for 循环，您会得到：

```
id="SubModels_0__Name" name="SubModels[0].Name" 
```

for 循环生成合法的 html（唯一 id），并且可以重新绑定到服务器上的列表。

澄清一下：当您使用 EditorFor 或 DisplayFor 时，需要注意两件事。首先，您传入的表达式决定了用于 Html 元素的字段名称。如果表达式与您的模型相关，则名称源自模型，如上例所示。因此，如果我绑定到模型上的子类：

```
Html.DisplayFor(m => m.Submodel.Name) 
```

Html 字段名称将是“Submodel.Name”，它将在回发时重新绑定到相同的层次结构（请注意，您也可以使用重载方法之一自己设置名称）。

第二个方面是您的表达式是类型化的（也就是说，它解析为 CLR 类型或您的自定义类型之一）。为了呈现该类型，MVC 会查找其模型匹配的模板。它使用从当前 View 文件夹开始的路径层次结构查找其模板，然后是 Shared 文件夹，如果找不到自定义模板，它会回退到其内部模板。

所以你需要考虑这两个来实现你想要的渲染和回发绑定。但是，如果您只对显示数据感兴趣，则不必担心 Html 字段名称与您的模型匹配，您可以使用任意名称或根本不使用任何名称，让 MVC 生成它们。但是您也应该知道，Html id 应该是唯一的，并且在上面的 foreach 示例中，您最终可以得到相同的 id。当前的浏览器似乎对此没有问题，但是如果您想使用 Javascript 通过 id 进行选择，那会很有趣。

# ftp - linux mput 命令选项

> ID：10356072
> 
> 赞同：2
> 
> 时间：2012-04-27T18:40:03.880
> 
> 标签：ftp, command-line-interface

我正在通过命令行将文件 ftp 传输到另一台服务器。

要放置多个文件，我需要使用“mput”命令。

```
 #ftp> mput *.php 
```

但是，它不断要求我验证是否要逐个放置每个文件。有没有强制是的选项？如果一个文件已经存在，是否还要强制覆盖远程服务器上预先存在的文件？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-27T18:47:15.660

您可以通过输入“提示”来关闭验证 - 这会打开和关闭提示模式，默认情况下它是打开的。

我*认为*提示关闭它会覆盖具有相同名称的文件，但我不确定。

# javascript - 尝试搜索对象时出现无限循环

> ID：10356073
> 
> 赞同：3
> 
> 时间：2012-04-27T18:40:15.577
> 
> 标签：javascript

我最近看到有人问[这个问题](https://stackoverflow.com/a/10355185/339852)，其中 OP 想要找到对象属性的路径，所以我用伪代码回答了这个问题，说我没有足够的时间来实际编写解决方案。然而，这个问题对我来说太有趣了，以至于我最终还是试图写一个解决方案。到目前为止，这是我想出的：

```
function isEmpty(obj) {
    for (var prop in obj) {
        if (Object.prototype.hasOwnProperty.call(obj, prop)) {
            return false;
        }
    }
    return true;
}

function Node(obj, parent, searchTarget) {
    this.parent = parent;
    this.obj = obj;
    this.searchTarget = searchTarget;

    this.searchNode = function() {
        if(this.obj == this.searchTarget) {

            //return this.reconstructPathRecursive();
        }

        if (!isEmpty(this.obj)) {
            var children = [];

            for (prop in this.obj) {
                if (this.obj.hasOwnProperty(prop)) {
                    children.push(new Node(this.obj[prop], this, searchTarget));
                }
            }

            var path;
            for(var i = 0, len = children.length; i < len; i++) {
                path = children[i].searchNode();
                if(path) return path;
            }
        }
    }

    this.reconstructPathRecursive = function() {
        var path = [this], curObj = this.parent;

        while (curObj != undefined) {
            path.push(curObj);
            curObj = curObj.parent;
            if(curObj == undefined) break;
        }

        return path;
    }

    this.findPath = function() {
        return this.searchNode();
    }
}

var myObj = {
    nullRoot: "gotcha!",
    path1: {
        myFunc: function() {
            alert("Success!");
        }
    }
}

function findFunctionPath(obj, func) {
    return new Node(obj, undefined, func).findPath();
}
var thisFunc = myObj.path1.myFunc;
    console.log("--");

console.log(findFunctionPath(myObj, thisFunc)); 
```

这个想法是我会调用`this.searchNode()`代表每个对象属性的 Node 对象。`searchNode()`将在每个结果属性节点上调用自身，并将当前对象作为`parent`每个子节点上的 传递。如果我找到要搜索的函数，我会调用`reconstructPathRecursive()`，这几乎就是这样做的，使用每个节点上的 parent 属性。

但是，我收到“超出最大调用堆栈大小”。运行此[实时测试](http://jsfiddle.net/HeyJavascript/yc2VN/10/)时出错。我认为这意味着我不小心以某种方式编写了一个无限循环。我的逻辑缺陷在哪里，无限循环又在哪里潜入？`console.log`表明它`searchNode`被一遍又一遍地调用，而我只在对象不为空时调用它，并且我没有在任何地方给对象引用自身（我不认为......），所以我真的有点难住了。

**编辑：**我稍微更新了代码以`isEmpty`从节点函数更改为全局函数，以便我可以`this.obj`在`searchNode()`函数中调用它。以前，它只会在节点上调用它（它总是至少有两个属性，从而导致无限循环），而不是引用的对象。这已修复，但错误仍然存​​在。

**另一个编辑**：发现并更正了另一个错误（见 Satyajit 的回答）。不过，仍然会陷入无限循环。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T20:07:19.560

该属性`nullRoot`是一个字符串，而不是一个 javascript 对象。在其上运行您的`isEmpty`函数将永远不会返回 false 并将其投入无限循环。不过，您将“gotcha”作为其价值几乎是可以预见的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T19:33:47.997

这将失败

```
var arr = [];
arr[0] = arr; 
```

因为它包含自己作为一个孩子。该`Node`函数最终创建了一个无界的节点列表，其中父节点与子节点相同。

要处理循环对象图，您需要跟踪您已经访问过的内容并避免重新访问它。这在 JavaScript 中很困难，因为您没有对象集。

您可以保留您访问过的对象的列表，并检查是否`obj`出现在其中，或者您可以尝试使用特殊的对象属性 ( *breadcrumb* ) 来判断您是否访问过某个对象。如果您没有正确清理或其他人使用该属性，或者其他代码使用 EcmaScript 5 冻结，则面包屑会失败。

* * *

编辑：

当您真正在孩子中找到路径时，您还应该跳出孩子循环。

> ```
> path = children[i].searchNode(); 
> ```

应该

```
 path = children[i].searchNode();
 if (path) { return path; } 
```

* * *

编辑：

正如 Satyajit 指出的那样，`"gotcha"`是一个属性值。

从那时起`"gotcha"[0] === "g"`，`"g"[0] === "g"`您很快就会到达一个周期。

当我做

```
alert("gotcha".hasOwnProperty(0));
for (var k in "gotcha") { alert(k); } 
```

在最近的 Chrome 中，我收到警报“true”、“0”、“1”、...、“5”。

这是现代浏览器的标准行为，如[15.5.5.2](http://es5.github.com/#x15.5.5.2)节所述：

> 字符串对象使用 [[GetOwnProperty]] 内部方法的变体，用于其他原生 ECMAScript 对象 (8.12.1)。这种特殊的内部方法用于添加对与 String 对象的单个字符相对应的命名属性的访问。

由于该部分的第 9 条，这些属性是可枚举的。

# javascript - 要命名的 jQuery 值

> ID：10356075
> 
> 赞同：0
> 
> 时间：2012-04-27T18:40:20.647
> 
> 标签：javascript, jquery

在 jQuery 中，我有一个名为`#selected_studio`. 在那个下拉菜单中，我有一个`<option>`with`value="studio_17`并说`Testing...`如果您查看浏览器中的下拉菜单。无论是否选择，我都想通过知道值来阅读“测试...”文本。我试图写一些 JS，但失败了，不知道应该怎么写。

```
$("#selected_studio option:studio_17").text(); 
```

关于如何做到这一点的任何想法？我认为这是可能的。如果有帮助的话，我正在使用 jQuery 1.7。

完整的 HTML：

```
<select id="selected_studio">
      <option value="me">Kevin</option>
      <option value="studio_17">Testing...</option>
      <option value="null" disabled="disabled">------------------------</option>
      <option value="new_studio">Studio Application</option>
</select> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-27T18:41:43.343

```
$("#selected_studio option[value='studio_17']").text(); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-27T18:41:50.777

试试这个：

```
$("#selected_studio option[value='studio_17']").text(); 
```

这使用[属性等于](http://api.jquery.com/attribute-equals-selector/)选择器。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-27T18:42:03.740

使用属性选择器：

```
$("#selected_studio option[value='studio_17']").text(); 
```

# mysql - MySql - 使用 COALESCE 检索正确的值？

> ID：10356083
> 
> 赞同：1
> 
> 时间：2012-04-27T18:40:53.303
> 
> 标签：mysql, select, join, coalesce

我在这里有一个 sql 小提琴： [http ://www.sqlfiddle.com/#!2/fbd48/1](http://www.sqlfiddle.com/#!2/fbd48/1)

花的颜色应该是红色的，熊的颜色应该是棕色的，但两者都显示为红色。

不确定 COALESCE 是否适合此处，但在此处接受了类似内容的答案： [MySQL - Retrieve row value from different table based on value of row in a table](https://stackoverflow.com/questions/10353813/mysql-retrieve-row-value-from-different-table-depending-on-value-of-row-in-a-t)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T18:46:47.920

```
SELECT mem.member_name, g.*
, coalesce(f.flower_color, b.bear_color) as color
from members mem
inner join general g on mem.member_id = g.member_id
left join flowers f on g.gift_item_id = f.flower_id AND g.gift_item = 'flower'
left join bears b on g.gift_item_id = b.bear_id AND g.gift_item = 'bear'
WHERE g.month='june' 
```

没有办法区分花和熊，所以我在连接中添加了测试。这很臭。您可能会重新考虑您的架构。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T18:44:29.193

如果您使用唯一的礼品项目 ID，它似乎可以工作。

[http://www.sqlfiddle.com/#!2/c02c8/1](http://www.sqlfiddle.com/#!2/c02c8/1)

# windows-phone-7 - 使用 Build Action = Content 读取文件

> ID：10356086
> 
> 赞同：6
> 
> 时间：2012-04-27T18:41:25.887
> 
> 标签：windows-phone-7

我的项目中有一些文件`Build Action`设置为`Content`.

如何获取流来读取这些内容文件？

PS：设置`Build Action`为`Resource`然后通过读取文件`Application.GetResourceStream()`不是一种选择。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-27T20:26:13.753

带有`Build Action`of`Content`的项目包含在包 (.xap) 文件中，可通过`Uri`. 你仍然习惯于`Application.GetResourceStream()`进入溪流

```
var si = Application.GetResourceStream(new Uri("FileName.ext", UriKind.Relative));
using (var sr = new StreamReader(si.Stream))
{
    //blah
} 
```

这在 MSDN 帮助中有很好的记录。[Application.GetResourceStream](http://msdn.microsoft.com/en-us/library/ms596994%28v=vs.95%29.aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-27T21:02:50.787

您可以在我最近发布的 MSDN 代码库中查看[完整示例](http://code.msdn.microsoft.com/Accessing-files-sent-with-4b429e23)，该示例展示了如何使用[Application.GetResourceStream()](http://msdn.microsoft.com/en-us/library/ms596994%28v=vs.95%29.aspx)方法访问与应用程序一起部署的文件。

# php - 如何将 html 实体添加到 RSS 提要

> ID：10356088
> 
> 赞同：0
> 
> 时间：2012-04-27T18:41:39.117
> 
> 标签：php, unicode, rss, html-entities

我在 RSS 中显示的数据上使用 htmlentities，并且我有 unicode 字符，因此它们显示实体，例如[http://feedvalidator.org/](http://feedvalidator.org/)`&Aacute;`等服务显示为无效。

如何将此实体添加到 xml（例如使用命名空间）或者我应该使用不同的函数来转义字符，例如`& < >`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T09:43:02.877

这是在 php 5.3.3 中工作的函数

```
function encode($string) {
    $result = '';
    foreach (str_split(utf8_decode(htmlspecialchars($string))) as $char) {
        $num = ord($char);
        if ($num > 127) {
            $result .= '&#' . $num . ';';
        } else {
            $result .= $char;
        }
    }
    return $result;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T18:43:17.010

用于[`htmlspecialchars`](http://php.net/htmlspecialchars)转义 XML 中具有特殊含义的字符。

对其他字符使用正确的字符编码。

（略读文档`htmlentities`建议`ENT_XML1`如果您不打算使用正确的字符编码，您可以传递并获取与 XML 兼容的数字实体）。

# xslt - 数一数。XSLT 1.0 中的非空节点集

> ID：10356090
> 
> 赞同：1
> 
> 时间：2012-04-27T18:41:46.440
> 
> 标签：xslt, xpath, sharepoint-2010, xslt-1.0

我的 dataview webpart 返回了 24 行。有一个名为 NoExperience 的列，它有一个数字类型。对于某些行，它具有 NoExperience 的值，而某些行不包含 NoExperience 的值。我只需要计算 NoExperience 列中的数字，该数字将指示该列的非空值的总数。Excel 中的 COUNTA 函数排序。

我正在使用 xsl 1.0。

有什么帮助吗？下面是我的代码行。这总是返回 24。NoExperience 列有 10 个非空值。我需要找到那个号码。

```
<xsl:value-of select="count(/dsQueryResponse/Rows/Row/@NoExperience)" /> 
```

在 XPAth builder 中，@NoExperience 的值显示如下：; ; ; ; ; ; 6；6；; 6；; ; ; 6；; 7; 7; ; ; 9; 9; 9; 9;

有 10 个非空值。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-27T18:57:23.920

大概是“空​​”的情况下，`<Row NoExperience="">`而不是属性根本不存在，所以你需要类似的东西

```
<xsl:value-of select="count(/dsQueryResponse/Rows/Row/@NoExperience[string(.)])" /> 
```

作为非空字符串值将充当真正的谓词。

# php - PHP - 自动检测文件何时/是否已更新

> ID：10356092
> 
> 赞同：3
> 
> 时间：2012-04-27T18:41:50.647
> 
> 标签：php

PHP中有没有办法检测文件何时更新和保存？

如果不是，那么“伪造”这个的最佳方法是什么。

即在执行某个操作之前，检查文件的最后保存日期？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T18:44:07.763

您可以使用[`filemtime`](http://php.net/filemtime). 它返回文件的“最后修改”时间戳。（如果您的意思是在文件更改时运行 PHP 脚本，那么仅使用 PHP 是不可能的。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-27T18:45:54.683

PHP 脚本将无法自动检测文件更改，因为必须请求页面。您可以编写一个脚本并运行一个 cron（计划任务）来经常运行。或者像其他人建议的那样使用[filemtime() 。](http://php.net/filemtime)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-27T18:44:01.953

您可以使用[`filemtime()`](http://php.net/manual/en/function.filemtime.php)来找出文件的修改日期。如果我理解你是正确的。

但是，如果您想在文件更改时跟踪文件，您仍然可以使用`filemtime`，但您必须跟踪当前修改日期（例如在数据库或文件中）并根据当前值检查此值。

您可以使用 cronjob 定期运行此 php 脚本。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-27T18:45:20.677

```
<?php
// outputs e.g.  somefile.txt was last modified: December 29 2002 22:16:23.

$filename = 'somefile.txt';
if (file_exists($filename)) {
    echo "$filename was last modified: " . date ("F d Y H:i:s.", filemtime($filename));
}

?> 
```

使用[此函数](http://php.net/manual/en/function.filemtime.php#example-2199)获取文件最后一次修改的时间。您可以使用数据来完成您的任务。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-04-08T16:59:48.093

一种简单的方法是使用 类型的哈希来监视内容更改`crc32`，这具有占用空间非常小的优势。

```
<?php
$hash = hash_file("crc32","watch.txt");
while ($hash === hash_file("crc32","watch.txt")){
  usleep(100000); // 100ms
}
echo "File changed"; 
```

> [https://en.wikipedia.org/wiki/Cyclic_redundancy_check](https://en.wikipedia.org/wiki/Cyclic_redundancy_check)
> 
> **循环**冗余**校验**( CRC ) (...) 进入这些系统的数据块会根据其内容的多项式除法的余数附加一个简短的校验值**。**检索时，**重复计算**，如果检查值不匹配，可以采取纠正措施

[https://www.php.net/manual/en/function.hash-algos.php](https://www.php.net/manual/en/function.hash-algos.php)

# mod-rewrite - mod_rewrite 在重写的 URL 中包含问号

> ID：10356099
> 
> 赞同：1
> 
> 时间：2012-04-27T18:42:21.753
> 
> 标签：mod-rewrite

也许我正在尝试做一些不可能的事情，或者我错过了一些完全明显的事情。

我想要做的是重写以下内容：

```
^/report/user?(.*)$ ./report/user.php?userid=$1 [L,NC] 
```

我已经尝试逃避抛出和内部服务器错误的`?`使用`/\?`。

有什么办法可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T19:25:57.660

也许你可以尝试：

```
RewriteCond     %{QUERY_STRING} ^([0-9]+)$
RewriteRule     ^/report/user$ ./report/user.php?userid=%1 [L,NC] 
```

如果您的用户 ID 是字母数字，则只需将最后一部分更改`RewriteCond`为`([0-9a-zA-Z]+)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T19:06:06.320

好的，a`?`是 1 次或 0 次的正则表达式，所以您要询问是否`r`存在 1 次或 0 次并获取其他所有内容。如果您想将查询字符串捕获到另一个查询中（而不仅仅是传输它），请尝试：

```
RewriteRule ^/?report/user$ /report/user.php?userid=%{QUERY_STRING} [L,NC] 
```

...在本地机器上测试`?a=1&b=2`->`?userid=a=1&b=2`所以可能不是你想要的

不确定查询字符串的结果如何，但它应该传输它。用 flag 试试看它`R`是什么样子的。如果您只是想添加到查询字符串中，您可以尝试：

```
RewriteRule ^/?report/user$ /report/user.php?userid=1 [L,NC,QSA] 
```

.. 在本地机器上测试查询字符串`?a=1&b=2`->`?userid=1&a=1&b=2`

仅更改位置而不更改查询不需要 QSA

```
RewriteRule ^/?report/user$ /report/user.php [L,NC] 
```

.. 在本地机器上测试查询字符串`?a=1&b=2`->`?a=1&b=2`

如果你想要[http://htaccess.madewithlove.be/](http://htaccess.madewithlove.be/)可以在这里测试重写，只要记住它会翻转一次，所以可以测试基本的东西。我不认为`QSA`(query string append) 是在其中编程的，但它仍然是一个不错的工具。

# oracle - 使用 Julian 日期列优化此 SELECT 查询

> ID：10356100
> 
> 赞同：1
> 
> 时间：2012-04-27T18:42:22.320
> 
> 标签：oracle, plsql

下面的这个查询需要很长时间，确切地说是 1693 秒。

```
SELECT MAX(cov_julian(t.tatime)) 
  FROM Table1 t,Table2 a,Table3 c
 WHERE  (t.PERSONID = a.EMPID or t.PERSONID2 = c.Col5) 
   AND cov_julian(tatime) <=sysdate 
```

`cov_julian`是将儒略日期转换为日期的用户定义函数。

如何优化此查询？请帮忙。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T18:46:35.027

如果有索引，`tatime`则将 sysdate 转换为 julian 并直接与`tatime`.

例如

```
SELECT MAX(cov_julian(t.tatime)) 
  FROM Table1 t,Table2 a,Table3 c
 WHERE (t.PERSONID = a.EMPID or t.PERSONID2 = c.Col5) 
   AND tatime <= to_number(to_char(sysdate,'J')); 
```

如果没有并且您必须发出此查询，请在`cov_julian(tatime)`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T20:04:31.143

根据您的`SELECT`条款，您真正关心的唯一列是`tatime`.

如果`tatime`是 上的一列`Table1`，那么我会检查是否存在，而不是加入，`Table2`或`Table3`。

结合Ollie的建议，查询变成

```
SELECT MAX(cov_julian(t.tatime)) 
FROM   table1   t
WHERE  t.tatime <= TO_NUMBER(TO_CHAR(SYSDATE,'J'))
AND   (EXISTS (SELECT NULL
               FROM   table2        a
               WHERE  a.empid = t.personid)
    OR EXISTS (SELECT NULL
               FROM   table3        c
               WHERE  c.col5  = t.personid2))
; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-28T00:46:04.933

尽量减少调用 UDF 的次数。这假设 MAX 可以成功比较 tatime 值：

```
SELECT COV_JULIAN(MAX_TIME) FROM
  (SELECT MAX(t.tatime) AS MAX_TIME 
     FROM Table1 t,
          Table2 a,
          Table3 c 
     WHERE (t.PERSONID = a.EMPID or t.PERSONID2 = c.Col5)  
           AND tatime <= TO_NUMBER(TO_CHAR(sysdate, 'J'))) x 
```

从 SQL 语句调用的 PL/SQL 函数是个坏消息，您绝对希望尽一切可能尽量减少调用它们的次数。更新的版本（10g+）应该比旧版本“更好”，但仍然 - 你*真的*想尽可能少地这样做。

分享和享受。

# ruby-on-rails-3 - 如何防止捆绑器将平台信息添加到 Gemfile.lock

> ID：10356103
> 
> 赞同：3
> 
> 时间：2012-04-27T18:42:41.683
> 
> 标签：ruby-on-rails-3, heroku, bundler, platform

每次我运行`bundle --without=production`bundler 时都会向其中添加平台信息`PLATFORMS x86-mingw32`，`Gemfile.lock`并且在部署到 Heroku 时必须手动删除该信息。如果我不删除它，`Gemfile.lock`则不会添加到存储库并导致错误。

如何防止捆绑器将平台信息添加到`Gemfile.lock`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-06-07T12:55:58.760

我有一个非常相似的问题 -[我可以阻止 Bundler 将 RUBY VERSION 添加到 Gemfile.lock](https://stackoverflow.com/q/36316399/306084) - 结果答案是它无法完成。Bundler[在`to_lock`方法](https://github.com/bundler/bundler/blob/8d7b671909d9b75a9e1e64889f6ba45b302e3940/lib/bundler/definition.rb#L305)中添加此信息，并且没有条件跳过该部分。

似乎可以通过重构`to_lock`来控制实际写入锁定文件的哪些部分，但到目前为止，这还不足以让我做出这样的努力。

# eclipse-plugin - 我在哪里放置我的捆绑包所依赖的捆绑包，以便 Eclipse/Equinox 看到它们？

> ID：10356104
> 
> 赞同：1
> 
> 时间：2012-04-27T18:42:47.517
> 
> 标签：eclipse-plugin, osgi, equinox

我正在尝试使用 eclipse OSGi Framework 运行时配置工具，只有 eclipse 自带的那些 bundle 可用，所以我的 bundle 的依赖无法解决。- 我认为我需要将我依赖的捆绑包放在 eclipse 会知道它们的地方，以便我可以在运行配置中选择它们。

我应该把它们放在哪里？进入eclipse/plugin的目录？有没有更好的办法？人们如何处理这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T00:58:05.480

您需要将捆绑包添加到新的目标平台并使用它来开发和运行。您可以从头开始，也可以从现有的 Eclipse 安装开始。我经常只是创建一个目录并将我想要的捆绑包弹出到其中。您还可以共享 .target 文件 使用目标平台比使用 eclipse 安装更干净、更灵活。

创建目标平台的工具在 Preferences->Plug-in Development->Target Platform 下。

# java - 我无法使用 apache-commons-net TelnetClient 禁用回显选项

> ID：10356105
> 
> 赞同：0
> 
> 时间：2012-04-27T18:42:48.553
> 
> 标签：java, apache-commons, telnet, cisco

我正在使用 apache-commons-net TelnetClient 类作为与 cisco 路由器的 telnet 连接。此代码`EchoOptionHandler(false, false, false, false)`应禁用此连接的回显选项。但它不会禁用！Wireshark 显示路由器发送“将回显”，然后我的 telnet 客户端发送“不回显”，然后路由器发送“不会回显”。这个 telnet 命令应该意味着没有回显，对吧？但是我的客户收到所有发送的命令！这怎么可能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-02-01T14:04:39.307

我使用和工作：

tc = new TelnetClient("unset localecho");

# regex - 为输入验证创建正则表达式

> ID：10356106
> 
> 赞同：1
> 
> 时间：2012-04-27T18:42:51.260
> 
> 标签：regex, xpages

我想进行字段验证以查看该值是否与模式匹配，但无法理解必要的正则表达式。有没有一个工具可以让你输入一个模式并让它告诉你匹配它的正则表达式？或者有人愿意尝试一下这个公式吗？

我需要匹配的模式是（大写字母是文字，'a' 是来自 AZ 或 0-9 的字符，'n' 是来自 0-9 的字符）： Aaaaaannn Tnnnnnnnnnnnnn Snnnnn

幸运的是，这些都位于不同的字段中，但如果有人能告诉我如何在同一字段中验证这些模式中的任何一个，那将会很有帮助。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T18:47:08.263

我没有测试任何这些。

分别地：

```
/\AA[A-Z0-9]{5}\d{3}\z/
/\AT\d{14}\z/
/\AS\d{5}\z/ 
```

一起：

```
/\AA[A-Z0-9]{5}\d{3} T\d{14} S\d{5}\z/ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T20:58:30.057

> 有没有一个工具可以让你输入一个模式并让它告诉你匹配它的正则表达式？

我使用正则表达式好友。它不是免费的，但非常好。将创建所需的源并帮助您构建正则表达式。 [http://www.regexbuddy.com/](http://www.regexbuddy.com/)

免费的在线版本是：

[http://www.regextester.com/](http://www.regextester.com/)

> （大写字母是文字，'a' 是 AZ 或 0-9 的字符，'n' 是 0-9 的字符）：Aaaaaannn Tnnnnnnnnnnnnn Snnnnn

```
A[A-Z,0-9]{5}[0-9]{3} T[0-9]{13} S[0-9]{5} 
```

可能有很多方法可以编写它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-28T02:09:08.940

在 Sourceforge 上，您会发现[The Regulator](http://sourceforge.net/projects/regulator/)这是一个对我有很大帮助的 Windows 应用程序。是的，在查询语言中，Regex 是野兽，仅次于高级 XPath。

# c++ - C++ 构造函数没有返回类型。究竟是为什么？

> ID：10356109
> 
> 赞同：12
> 
> 时间：2012-04-27T18:42:56.517
> 
> 标签：c++, compiler-construction, constructor, return

我已经用谷歌搜索并阅读了很多帖子，但是有很多不同的答案都合乎逻辑，我想知道该主题的专家是否可以揭开这个问题的神秘面纱。

有人说没有返回是因为没有办法返回——语法禁止它——是的，这是有道理的，但我相信所有函数都必须返回一些东西，不是吗？其他人说构造函数会返回新创建的对象本身，这似乎是有道理的，因为在构造函数上使用了赋值运算符。还有一些人有其他有趣的解释。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-27T18:49:12.387

构造函数不像其他函数那样被调用，所以它们不会像其他函数那样返回。`new`它们作为某些构造（强制转换、变量定义、*ctor-initializer-list*、按值传递、按值返回）的副作用执行。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-04-27T18:48:17.357

构造函数没有指定返回类型，因为它是多余的：除了构造函数可能“返回”的类型之外，没有其他类型。我将“return”放在引号中，因为从技术上讲，构造函数不返回任何内容：当在静态上下文中调用它们时，它们会在适当的位置初始化一个实例；当在动态上下文中调用它们时`new`，返回的是操作符，而不是构造函数。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-04-27T18:44:42.870

构造函数就地构造，它不需要返回任何东西。

> 我相信所有功能都必须返回一些东西

`void`?

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-27T20:08:27.697

假设构造函数可以返回一些东西，那么这对以下函数调用有问题的影响：

```
class Object{ 
    public: 
        bool Object(){ ... };   
        ...
}      

SomeFun(Object obj){ ... } 

SomeFun(Object());   
// Ha! SomeFun jokes on an error about a non-Object argument(of type bool), returned  
// by the anonymous temporary Object() 
```

防止构造函数返回，便于使用匿名临时对象以及更多 C++ 特性。如果没有这样的规则，无害的陈述可能会变得模棱两可：

```
Object obj(Object()); 
// How does the variable obj decide which constructor to call,  
// based on its argument type?  
// 
// Does it call: bool Object::Object(Object&) or  
//                    Object::Object(bool)(if it exists)? 
```

构造函数返回值的能力使对象的创建变得复杂——在没有任意返回值的情况下，只有一个明确的类型、类名可以避免此类问题。

读者能否提出更多示例，说明 C++ 习语因缺少此类规则而受到阻碍？

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-04-27T18:47:39.427

~~构造函数缺少返回类型——甚至没有`void`——意味着你不能从你的 C++ 代码中调用构造函数。这就是重点。调用构造函数没有意义。将调用构造函数设为非法可以消除此类用户错误的可能性。~~

**编辑**

barnes 是对的，你不能调用构造函数的最终原因是它们没有名字。（甚至这忽略了您可以通过放置 new 间接调用构造函数。）

再试一次：

您不能从 C++ 代码中调用构造函数，因为构造函数没有名称。使构造函数没有返回类型向程序员强调构造函数是一种与其他函数非常不同的函数。构造函数实际返回的内容（如果它返回任何内容）取决于供应商。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-04-27T18:50:51.157

> 但我相信所有函数都必须返回一些东西，不是吗？

不，从函数返回值是什么意思？好吧，实现的 ABI 将指定对于某些返回类型，函数将设置某些寄存器，或从堆栈指针的某个偏移量处的某些内存为函数“返回”的值。

显然，寄存器和内存在构造函数或 void 函数被调用后存在并包含数据，但语言说这些函数不返回任何内容，因此 ABI 没有指定要查看哪些寄存器或内存以查找返回值。代码不能设置返回值，调用代码可以得到任何返回值。

所以不，函数不必返回任何东西。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-04-28T06:57:46.493

构造函数可能是一个坏名字。它实际上是预构造对象的初始化器。说明这一点的最简单方法是不使用 C++ 构造函数的等效构造的伪示例。

使用构造函数

```
struct X {
    int a;
    X() {
      a = -5;
    }
};

int main() {
    X* x1 = new X(); // X created as a "reference object".
    X  x2;           // X created as a "value object" on the stack.
    return x1->a - x2.a;
} 
```

没有构造函数

```
struct X {
    int a;
    void initialize() {
        a = -5;
    }
    static X* create() {
        X* res = (X*)malloc(sizeof(X));
        res->initialize();
        return res;
    }
};

int main() {
    X* x1 = X::create(); // New constructed heap-allocated X
    X  x2;               // Stack-allocated X
    x2.initialize();     // Manually initialized
    return x1->a - x2.a;
} 
```

现在，如果您想象`X::initialize`在第二个示例中要返回，例如`bool`表示成功或失败，那么您将遇到问题。在`main()`中，粗心的程序员可能会得到一个`X`未正确初始化的结果，从而导致未定义的行为（通常是在生产之前可能无法发现的难以调试的崩溃）。

这是构造函数变得特别的核心原因之一。退出构造函数的唯一两种方法是通过正常完成或通过异常，然后*必须*由调用者处理（或向上传递堆栈）。在任何情况下，您都可以防止以未初始化的对象结束。

作为旁注，未初始化的对象是 C 中错误的更常见原因之一，它没有任何东西可以像这样帮助程序员。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-04-27T21:29:32.120

构造函数隐式返回类本身的实例。如果它被设计为返回某些东西而程序员返回的东西与类本身完全不同，那将是矛盾的。基本上语法会令人困惑。

# wordpress - 带有wordpress的注册表单

> ID：10356110
> 
> 赞同：3
> 
> 时间：2012-04-27T18:42:59.087
> 
> 标签：wordpress, registration, user-registration

我需要一个已定义模板的页面的注册表单。

*   应该只有这个字段：
*   电子邮件
*   密码

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T20:40:23.327

[WP Members](http://wordpress.org/extend/plugins/wp-members/)插件或许可以帮助您。

# crystal-reports - 没有传入参数值时，Crystal Reports 参数显示“全部”？

> ID：10356111
> 
> 赞同：1
> 
> 时间：2012-04-27T18:43:09.177
> 
> 标签：crystal-reports

因此，对于我创建的报告，它们有一组参数，当没有特定值过去时，报告会将其视为您获取所有可能解决方案的数据。

> 例如：您将机器名称作为参数，并且您没有将特定的机器名称传递给参数。然后，您将获得为数据库中所有可能的机器名称返回的数据。我正在谈论的一个例子如下。

![在此处输入图像描述](../Images/63346f9137cfa66b59fea886125cc64a.png)

但是，当我没有在参数字段中输入任何值时，报告中不会显示任何值。我想要的是让它在字段中显示“全部”而不是返回为空白。

所以我的问题是我将如何在报告中红色圆圈的位置显示“全部”，而不是在没有为参数输入值时显示为空白？

非常感谢任何帮助或建议。谢谢你。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-27T20:22:36.733

听起来您已经对记录选择进行了排序。红色圆圈中的四个字段如下所示：

```
if hasvalue({?param}) then
 {?param}
else
 'All'; 
```

如果其中任何一个不是字符串值，您可能需要执行以下操作：

```
if hasvalue({?param}) then
 cStr({?param})
else
 'All'; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T19:19:25.467

可选参数要求您使用该`hasvalue()`函数来检查没有使用值的情况。所以在你的情况下，如果你有

`{table.machine_name} = {?machine_name_param}`

你将不得不使用

```
(not(hasvalue({?machine_name_param})) 
or {table.machine_name} = {?machine_name_param})
```

这基本上就像对任何数据库字段进行空值检查一样。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-08-29T16:33:43.987

Crystal 2008 语法，如果 Parameter 类型为数字语法 ({?P #}= 0 OR {Command.p} = {?P #} )

如果参数是 STRING SYNTAX 类型（不是 HasValue({?D}) OR {Command.d} = {?D}）

# boost - VS2010如何编译Boost 1.39？

> ID：10356112
> 
> 赞同：2
> 
> 时间：2012-04-27T18:43:12.113
> 
> 标签：boost, visual-studio-2010, vc10

我正在尝试将我们的 C++ 项目从 VS2005 升级到 VS2010，到目前为止一切似乎都很好，除了我需要在 VS2010 中重新编译我们的 Boost 库（v1.39）（即使用 vc100 - 我们拥有的版本是 vc80）。我（现阶段）不想升级 Boost，因为我宁愿先完成 VS2005 到 VS2010 的升级，而不同时进行 Boost 升级。

我遇到的问题是 Boost 1.39 带有 bjam，而我们拥有的版本不支持/不了解 msvc10.0。我试过这个：

C:\libs\boost_1_39_0> **bjam 工具集=msvc-10.0 --build-type=完成阶段**

但是，我明白了：

C:/libs/boost_1_39_0/tools/build/v2/tools\msvc.jam:733: 在配置中
***参数错误
* 规则 path.make ( native )
* 调用: ( )
* 缺少参数 native
C:/libs /boost_1_39_0/tools/build/v2/util\path.jam:44：参见规则“make”的定义被称为
C:/libs/boost_1_39_0/tools/build/v2/tools\msvc.jam:184：在配置
C :/libs/boost_1_39_0/tools/build/v2/tools\msvc.jam:137: 在 msvc.init
C:/libs/boost_1_39_0/tools/build/v2/build\toolset.jam:38: 在 toolset.using
C :/libs/boost_1_39_0/tools/build/v2\build-system.jam:465: 在 process-explicit-toolset-requests
C:/libs/boost_1_39_0/tools/build/v2\build-system.jam:545: 在加载
C:\libs\boost_1_39_0\tools\build\v2/kernel\modules.jam:283: 在导入
C:\libs\boost_1_39_0\tools\build\v2\kernel\bootstrap.jam:138: 在 boost-build
C: \libs\boost_1_39_0\boost-build.jam:16: 在模块范围
C:\libs\boost_1_39_0>

当我查看 msvc.jam 时，它似乎不支持 msvc-10.0（这并不奇怪，因为我怀疑 Boost 在 1.39 时 vc10.0 已经发布）。

所以做了一些研究，发现也许我需要b2而不是bjam，但是我对编译Boost的经验很少（之前只是使用预编译的库），所以我想问一下是否有可能得到b2可以工作使用 Boost 1.39？或者是否可以使 bjam 与 vc10.0 一起工作？

本质上，我只需要尽可能简单地用 vc-10.0 (VS2010) 编译 Boost 1.39！我将非常感谢任何能告诉我如何做到这一点的人！

先感谢您........ ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T19:36:57.870

您可以使用更新版本的 bjam 来构建 boost 1.39。

*   下载并解压[当前的 boost 版本](http://sourceforge.net/projects/boost/files/boost/)
*   在 VS10 命令提示符`cd`下到新解压缩的 boost 文件夹的根目录
*   执行`bootstrap.bat`. 这应该建立`bjam.exe`在该文件夹中
*   `cd`到 boost 1.39 的根文件夹并复制`bjam.exe`过来
*   执行你的 bjam 命令：`bjam toolset=msvc-10.0 --build-type=complete stage`

# event-handling - 设计多输入软件

> ID：10356116
> 
> 赞同：2
> 
> 时间：2012-04-27T18:43:33.553
> 
> 标签：event-handling

我正在寻找一种方法来构建我开发的软件的高级结构（对于 Android，但我相信这在这里并不重要）。我的软件由来自传感器的事件、用户交互、远程消息和计时器事件驱动。恐怕它会变得一团糟，我无法监督哪种输入组合可能会导致问题。

状态机会很好，但似乎有太多可能的状态。作为一个新手，我确实在这里和那里实现了设计模式。但我对整体设计感到迷茫。如何为不断流入我的应用程序的所有“事件”提供结构？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T11:41:52.170

“太多状态”的评论只是您自己观察的反映，这是一团糟。

在一个好的设计中，您可以将系统分解为多个独立的有限状态机。20 态系统可能更好地表示为 4 态和 5 态系统。

例如，在您的情况下，您可能能够将所有输入重构为单个输入队列。该队列将有自己的状态（空、部分满、满），与进一步发生的处理无关。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T18:50:28.240

您可能想了解机器人软件如何处理此问题。机器人面临着类似的挑战。

# javascript - javascript中点击事件的事件冒泡或冒泡失败

> ID：10356118
> 
> 赞同：0
> 
> 时间：2012-04-27T18:43:38.297
> 
> 标签：javascript

我的基本问题是我有一个附加到我的容器的单击事件，我试图将该单击事件委托给该容器中的按钮。所有这一切都很简单，我遇到的问题是 webkit 中的 event.target 是点击按钮中的跨度而不是按钮本身。我如何阻止单击事件从向下冒泡到按钮中的跨度。我希望我的目标是按钮。这是一个快速演示，显示问题的问题[小提琴](http://jsfiddle.net/jVeMw/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T18:56:10.100

我不知道在这种情况下是否可以禁用事件冒泡。

然而，在这些情况下，我做了一个倒置的事件冒泡：

```
while(targ != null) {
    if (targ.nodeName.toLowerCase() === 'button') {
        alert(targ.nodeName.toLowerCase());
        break;
    }

    targ = targ.parentElement;
} 
```

**小提琴：http:** [//jsfiddle.net/jVeMw/1/](http://jsfiddle.net/jVeMw/1/)

对性能来说并不完美，但由于您将点击事件限制在`vidCommentBoard`div 上，所以应该不是问题。

# powershell - 从 Powershell 中的 td 标签中提取值

> ID：10356119
> 
> 赞同：1
> 
> 时间：2012-04-27T18:43:54.630
> 
> 标签：powershell

我有一种情况，我必须从网页收集信息。我需要提取 HTML 表的任何封装的 td 标签

在这种特殊情况下，我唯一可用于执行此过程的是 PowerShell。

有没有一种简单的方法可以只使用 PowerShell 来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T21:53:42.863

我认为您必须选择主要选项：

1.  使用正则表达式。
2.  使用 DOM。

以下是您可以同时执行这两项操作的方法：

正则表达式：

```
$data = (new-object System.Net.WebClient).DownloadString('http://www.amazon.com')
[regex]::Matches($data, '<td.*?>(.+)</td>') | % {$_.Captures[0].Groups[1].value} 
```

DOM：

```
$ie = new-object -com InternetExplorer.Application
$ie.Navigate('http://www.amazon.com')
$ie.Document.getElementsByTagName('td') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T20:37:22.763

```
$ie = new-object -com "InternetExplorer.Application"
$ie.navigate("<app url>")
$doc = $ie.Document
$doc.getElementByID("<some id>") 
```

您可以在此处阅读更多信息 - [http://msdn.microsoft.com/en-us/magazine/cc337896.aspx](http://msdn.microsoft.com/en-us/magazine/cc337896.aspx)

希望这可以帮助。

# jquery - 仅在加载 jquery 时运行 document.ready

> ID：10356120
> 
> 赞同：2
> 
> 时间：2012-04-27T18:43:57.220
> 
> 标签：jquery

我在一个全局 JS 文件中有这段代码。

```
$(document).ready(function() {
       DoStuff();
 }); 
```

不幸的是，有些页面包含此文件但不包含 jquery 文件。所以我得到错误：

```
Message: The value of the property '$' is null or undefined, 
not a Function object 
```

`document.ready()`仅在加载 JQuery 文件时如何运行。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-27T18:45:40.337

```
if(window.jQuery) {
    $(document).ready(function() {
        DoStuff();
    });
} 
```

**更新**

检查`window.jQuery`而不是仅仅`jQuery`. 这应该避免“未定义”错误。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-27T18:45:56.370

您将首先测试 jQuery 的存在：

```
 if(jQuery)
 {
     $(document).ready(function() { ... });
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T18:45:37.180

怎么样：

```
 if($){
   // your code here.
 }; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-27T18:45:56.180

好吧，将您的代码包装在里面：

```
if ( $ != undefined && $ != null) {
 //everything here

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-27T18:48:41.803

如果 jQuery 已加载，但您仍然收到该错误，请尝试以下操作：

```
jQuery(function($) {
    $(document).ready(function() {
        DoStuff();
    });
}); 
```

[http://api.jquery.com/jQuery/#jQuery3](http://api.jquery.com/jQuery/#jQuery3)

如果您的意思是“**未**加载”，那么您不能使用“ `ready()`”功能。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-27T18:55:02.893

```
if(jQuery) {  
    $(function() {
        //...
    });
} 
```

或者

```
if(typeof jQuery != 'undefined') {  
    $(function() {
        //...
    });
} 
```

# magento - Magento 是否存在维护良好的流浪厨师食谱？

> ID：10356126
> 
> 赞同：3
> 
> 时间：2012-04-27T18:44:11.520
> 
> 标签：magento, virtualization, virtualbox, vagrant

我正在尝试使用 magento 的虚拟化开发环境启动并运行，但遇到了一些障碍。

我找到了这本 magento 食谱，但目前它抛出了一个错误，我基于 lucid32 框：http: [//community.opscode.com/cookbooks/magento](http://community.opscode.com/cookbooks/magento)

```
[Fri, 27 Apr 2012 19:21:51 +0100] DEBUG: Loading cookbook windows's library file:       /tmp/vagrant-chef-1/chef-solo-1/cookbooks/windows/libraries/ruby_19_patches.rb
[Fri, 27 Apr 2012 19:21:51 +0100] ERROR: Running exception handlers
[Fri, 27 Apr 2012 19:21:51 +0100] ERROR: Exception handlers complete
[Fri, 27 Apr 2012 19:21:51 +0100] DEBUG: Re-raising exception: LoadError - no such file to load -- win32/open3 
```

做了更多的搜索并遇到了这个 - 实际上我认为它使用的是木偶，而不是厨师 - 但我目前没有偏好，特别是如果两者都是免费的。
[https://github.com/tonigrigoriu/magento-cookbooks/blob/master/Vagrantfile](https://github.com/tonigrigoriu/magento-cookbooks/blob/master/Vagrantfile)

我运行它，并遇到以下错误：

```
The following SSH command responded with a non-zero exit status.
Vagrant assumes that this means the command failed!

mount -t vboxsf -o uid=`id -u vagrant`,gid=`id -g vagrant` v-csc-1 /tmp/vagrant-chef-1/chef-solo-1/cookbooks 
```

我确实在注释掉该`config.vm.network("33.33.33.33")`行的 Vagrant 文件中进行了一项更改。

也许我希望这种配置比我应该的要容易一些，特别是考虑到我是开发人员而不是开发人员，但是如果那里有任何厨师/木偶食谱得到相对良好的支持和维护，那就太棒了如果有人能指出我正确的方向。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T00:49:43.363

当您对 vagrant 文件进行更改时，您可能需要在进行更改之前销毁 VM 并重新创建它。否则事情可能会不同步。

```
vagrant destroy
vagrant up 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-11T12:19:02.857

[https://github.com/rjocoleman/vagrant_magento](https://github.com/rjocoleman/vagrant_magento)中有一个 vagrant magento 。它由[https://github.com/rjocoleman/vagrant-magento-mirror](https://github.com/rjocoleman/vagrant-magento-mirror)使用，这是一个由 vagrant_magento 设置的具有 magento 实例的项目。您可以克隆 magento-mirror 并执行`vagrant up`命令

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-21T21:34:32.580

Magento PHP 开发人员指南中提到了 Vagrant/Chef 食谱： [https ://www.packtpub.com/web-development/magento-php-developer%E2%80%99s-guide](https://www.packtpub.com/web-development/magento-php-developer%E2%80%99s-guide)

我怀疑作者将他的存储库移到了这里： [https ://github.com/amacgregor/magento-1.7.0.2](https://github.com/amacgregor/magento-1.7.0.2)

关于您的挂载问题，我怀疑您应该尝试*不要*在 Vagrantfile 中使用仅限主机的 IP 地址，而是尝试将端口转发作为临时修复。

请注意，就厨师食谱和虚拟机而言，我还没有找到*任何*可行的方法，包括来自 hashcorp/atlas 的基本图像。

# c# - 如何将数据行中的所有单元格复制到会话？

> ID：10356128
> 
> 赞同：0
> 
> 时间：2012-04-27T18:44:22.500
> 
> 标签：c#, asp.net, c, ado.net, foreach

```
foreach (has.has_actorRow actorrow in actortable.Rows) { 
                foreach(object actorcell in actorrow){
                //add all to session
                }
            } 
```

给我一个错误“has.has_actorrow”没有方法“getenumerator””

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T18:46:59.900

可能你想做`actorrow.Cells`

```
foreach (has.has_actorRow actorrow in actortable.Rows) { 
                foreach(object actorcell in actorrow.Cells){
                //add all to session
                }
            } 
```

# ember.js - ember-data DS.RESTAdapter 导致 TypeError

> ID：10356129
> 
> 赞同：3
> 
> 时间：2012-04-27T18:44:27.267
> 
> 标签：ember.js, ember-data

我正在使用 ember-data 试用 Ember.js，并定义了以下应用程序：

```
window.App = Ember.Application.create()

App.store = DS.Store.create
    revision: 4
    adapter: DS.RESTAdapter.create { bulkCommit: false }

App.Source = DS.Model.extend
    # options
    primaryKey: '_id'

    # fields
    name: DS.attr 'string'
    raw_text: DS.attr 'string'

App.sourcesController = Ember.ArrayProxy.create
    content: App.store.findAll App.Source

App.ListSourcesView = Ember.View.extend
    templateName: 'app/templates/sources/list'
    sourcesBinding: 'App.sourcesController' 
```

该模板如下所示：

```
<table>
    <thead>
        <tr>
            <th>ID</th>
            <th>Name</th>
        </tr>
    </thead>
    <tbody>
        {{#each sources}}
        {{view App.ShowSourceView sourceBinding="this"}}
        {{/each}}
    </tbody>
</table> 
```

当我尝试`App.ListSourcesView`在我的页面中加载时，我在 ember-data.js 中收到错误消息： `Uncaught TypeError: Cannot read property 'map' of undefined`.

我无法弄清楚我做错了什么，在这种情况下，阅读源代码并没有帮助我的困惑。有没有人经历过这种情况，或者可以告诉我我定义/未正确定义的内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T16:31:58.330

[可能和我在这里](https://stackoverflow.com/a/10741443/85121)遇到的一样。简而言之，ember-data 期望资源列表嵌套在资源名称下，例如，如果你得到 /users/ 那么结果应该是`{ "users": [] }`而不是顶级数组`[]`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T23:37:54.680

你在使用来自 github master 的 ember/ember-data 吗？这是由于过去几个月某些版本的不兼容造成的。一旦我对这两个错误都使用了master，错误就消失了（以及许多其他错误）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T05:50:41.060

```
App.sourcesController = Ember.ArrayProxy.create
     content: []

App.ListSourcesView = Ember.View.extend
     // I don't believe you can use file paths in this way
     // Use a script tag with a  data-template-name as shown in the docs.
     // If you really need them from a file, then you will need to compile the templates
     // Yourself. There's plenty of SO Questions re: this.
     templateName: 'source-list'
     sourcesBinding: 'App.sourcesController'

// Always access ember object properties through the get and set interfaces.
// This will ensure that views get the proper notifications when props change.
App.sourcesController.set("content", App.store.findAll App.Source); 
```

如果这不适合你，请告诉我！

# jquery - css的jquery条件语句？

> ID：10356135
> 
> 赞同：0
> 
> 时间：2012-04-27T18:44:45.153
> 
> 标签：jquery, css, conditional, statements

条件语句似乎对我不起作用。我正在尝试一组堆叠的图像以根据被选择的图像的 zIndex 更改它们的 zIndex。因此，如果我有几个按钮可以将一些图像调到前面：

（假设我们默认从第一张图片开始并选择第二张图片）

```
<script>
$(function() {
    var z = $("#image2").zIndex;  //also tried .css.zIndex;
    $("#button2").click(function() {
        if (z != 999 ) {
            $("#image1").animate({zIndex: 0}, 1, 'linear');
            $("#image2").animate({zIndex: 999}, 1, 'linear'); 
        } else {
        return false;
        };  
    });
});
</script> 
```

问题是，虽然它确实有效，但无论条件是否为真，它都有效，所以如果我选择第二张图像然后再次选择它，它将运行脚本。现在，在您开始想知道为什么这很重要之前，还有更多的事情发生，这会导致视觉错误发生，否则 id 就这样吧，但这就是它的要点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T18:57:56.770

您可以执行以下任一操作：

```
$("#image2")[0].style.zIndex // document.getElementById(image2).style.zIndex 
```

或者

```
$("#image2").css('zIndex'); 
```

您在这里拥有的是一个挂在 jQuery 集合上的原生 JavaScript 属性 getter/setter，而这根本不是它的工作原理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T18:49:56.473

```
if ( $("#image2").css("z-index") <= 999 ){
      $("#image1").animate({zIndex: 0}, 1, 'linear');
      $("#image2").animate({zIndex: 999}, 1, 'linear'); 
} 
```

希望这对你有用..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T19:27:08.697

看看这个，看看这是否适合你？[http://jsfiddle.net/atfZn/5/](http://jsfiddle.net/atfZn/5/)

# java - java.lang.IllegalStateException：密码未初始化

> ID：10356137
> 
> 赞同：4
> 
> 时间：2012-04-27T18:44:57.390
> 
> 标签：java, android

我已经在 Android 应用程序中实现了加密/解密。

我添加了一个 Encryption 类，该类已成为 Singleton 类。

部分代码如下：

```
public class Encryption {

        private SecretKeySpec mKey = null;
        private Cipher mCipher = null;
        private byte[] mKeyBytes = null;
        private AlgorithmParameterSpec mParamSpec = null;
        private static Encryption sInstance;

        public Encryption() {
            byte[] iv = new byte[] { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 };
            mParamSpec = new IvParameterSpec(iv);
            mKeyBytes = getMD5(MD5_KEY.getBytes();
            mKey = new SecretKeySpec(mKeyBytes, AES_TAG);
            try {
                mCipher = Cipher.getInstance(TRANSFORMATION_STR);
            } catch (NoSuchAlgorithmException e) {
            } catch (NoSuchPaddingException e) {
            }
        }

        public static synchronized Encryption getInstance() {
            if (sInstance == null) {
                sInstance = new Encryption();
            }
            return sInstance;
        }

        public String encryptString(String strPwd) {
            String strToEncripted = null;
            strToEncripted = strPwd;
            String result = null;
            byte[] input = null;
            byte[] cipherText = null;
            int ctLength = 0;
            try {
                input = strToEncripted.getBytes(UTF8_STR);
                mCipher.init(Cipher.ENCRYPT_MODE, mKey, mParamSpec);
                cipherText = new byte[mCipher.getOutputSize(input.length)];
                ctLength = mCipher.update(input, 0, input.length, cipherText, 0);
                ctLength += mCipher.doFinal(cipherText, ctLength);
                result = Base64.encodeToString(cipherText, Base64.DEFAULT)
                        .replace(NEWLINE_CHAR, EMPTY_CHAR).trim();
            } catch (InvalidKeyException e) {
            } catch (UnsupportedEncodingException e) {
            } catch (InvalidAlgorithmParameterException e) {
            } catch (ShortBufferException e) {
            } catch (IllegalBlockSizeException e) {
            } catch (BadPaddingException e) {
            } catch (IllegalStateException e) {
            }
            return result;
        }

        public String decryptstring(byte[] encripted) {
            String textDecrypt = "";
            byte[] encriptedByteDecode64 = Base64.decode(encripted, Base64.DEFAULT);
            byte[] plainText = new byte[mCipher.getOutputSize(encriptedByteDecode64.length)];
            int ptLength = 0;
            try {
                mCipher.init(Cipher.DECRYPT_MODE, mKey, mParamSpec);
                ptLength = mCipher.update(encriptedByteDecode64, 0, encriptedByteDecode64.length, plainText, 0);
                ptLength += mCipher.doFinal(plainText, ptLength);
                textDecrypt = (new String(plainText)).trim();
            } catch (InvalidKeyException e) {
            } catch (InvalidAlgorithmParameterException e) {
            } catch (ShortBufferException e) {
            } catch (IllegalBlockSizeException e) {
            } catch (BadPaddingException e) {
            }
            return textDecrypt;
        }

        private String getMD5(String strKey) {
            String key = strKey;
            String result = null;
            try {
                MessageDigest algorithm = MessageDigest.getInstance(MD5_TAG);
                algorithm.reset();
                algorithm.update(key.getBytes(UTF8_STR));
                byte messageDigest[] = algorithm.digest();
                StringBuilder hexString = new StringBuilder();
                for (int count = 0; count < messageDigest.length; count++) {
                    String hexaDecimal = Integer.toHexString(0xFF & messageDigest[count]);
                    while (hexaDecimal.length() < 2)
                        hexaDecimal = new StringBuilder(ZERO_STR).append(hexaDecimal).toString();
                    hexString.append(hexaDecimal);
                }
                result = hexString.toString();
            } catch (NoSuchAlgorithmException e) {
            } catch (UnsupportedEncodingException e) {
            }
            return result;
        }
    } 
```

使用单例实例，实现了字符串的加密和解密，并且它们大部分都在工作。

有时，虽然密码已经初始化，但仍然抛出异常：**`java.lang.IllegalStateException: Cipher not initialized`**

该场景主要是在某个时间间隔（30 分钟）之后执行字符串解密。

会不会是单例实例使用不当造成的？

而不是 Singleton 类，我试图加密字符串，使用 new 运算符创建一个 Encryption 类的实例，但问题是我需要相同的对象进行解密，否则会**`java.lang.IllegalStateException: Cipher not initialized`**被抛出。

欢迎任何建议/提示。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-06-24T08:39:53.877

这个问题肯定会发生在多线程环境中，就像发生在我身上一样。问题是 mCipher.init() 和 mCipher.doFinal() 方法之间的冲突。

以下是 Cipher 类中的相关方法：

```
public final void init(int opmode, Key key, AlgorithmParameterSpec params) throws InvalidKeyException, InvalidAlgorithmParameterException
{
   init(opmode, key, params, JceSecurity.RANDOM);
}

public final void init(int opmode, Key key, AlgorithmParameterSpec params,
                       SecureRandom random)
        throws InvalidKeyException, InvalidAlgorithmParameterException
{
    initialized = false;
    checkOpmode(opmode);

    if (spi != null) {
        checkCryptoPerm(spi, key, params);
        spi.engineInit(opmode, key, params, random);
    } else {
        chooseProvider(I_PARAMSPEC, opmode, key, params, null, random);
    }

    initialized = true;
    this.opmode = opmode;
}

public final int doFinal(byte[] output, int outputOffset)
        throws IllegalBlockSizeException, ShortBufferException,
           BadPaddingException {
    checkCipherState();

    // Input sanity check
    if ((output == null) || (outputOffset < 0)) {
        throw new IllegalArgumentException("Bad arguments");
    }

    chooseFirstProvider();
    return spi.engineDoFinal(null, 0, 0, output, outputOffset);
}

private void checkCipherState() {
    if (!(this instanceof NullCipher)) {
        if (!initialized) {
            throw new IllegalStateException("Cipher not initialized");
        }
        if ((opmode != Cipher.ENCRYPT_MODE) &&
            (opmode != Cipher.DECRYPT_MODE)) {
            throw new IllegalStateException("Cipher not initialized " +
                                            "for encryption/decryption");
        }
    }
} 
```

查看`initialized`变量在多线程环境中的行为，其中两个线程执行 init() 和 doFinal()。返回的异常与未实际初始化的对象无关，而是与`initialized`设置为的变量无关`false`。

我通过同步我的 encryptString() 和 decryptString() 方法解决了我的问题。希望您可以通过密码获得一些见解。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-05-05T22:41:23.710

确保调用`Cipher.getInstance()`加密和解密方法。

```
cipher = Cipher.getInstance(TRANSFORMATION_STR);
cipher.init(Cipher.ENCRYPT_MODE, mKey, mParamSpec);
// encrypt code here 
```

`getInstance()`方法获取当前线程的密码实例以避免竞争条件，例如您刚刚发布的异常。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-06-19T07:03:39.360

在您的`decryptstring`方法中，您调用

```
byte[] plainText = new byte[mCipher.getOutputSize(encriptedByteDecode64.length)]; 
```

打电话前几行

```
mCipher.init(Cipher.DECRYPT_MODE, mKey, mParamSpec); 
```

由于在调用 getOutputSize 时密码尚未初始化，因此会出现异常。重新排序这些行应该可以解决它。（它对我有用。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-18T13:42:14.077

我有同样的问题（`Cipher not initialized`）。我使用的是高加密，对我来说，解决方案是用`jre/lib/security`无限强度版本替换正常的策略罐子。

# ios - IOS推送通知声音不起作用

> ID：10356138
> 
> 赞同：2
> 
> 时间：2012-04-27T18:44:57.763
> 
> 标签：ios, cocoa-touch, ios-simulator, push-notification

我正在以这种方式实施通知：

```
-(void)scheduleLocalNotificationWithDate:(NSDate *)AlarmDate{
    UILocalNotification *Notification = [[UILocalNotification alloc]init];
    Notification.fireDate = AlarmDate;
    Notification.alertBody = @"Time to wake up!";
    Notification.soundName = @"sound.caf";
    [[UIApplication sharedApplication] scheduleLocalNotification:Notification];
} 
```

因此，当通知触发时没有声音。可能是什么问题？

*文件名正确 *声音持续时间：32 秒 *我正在使用 IOS 模拟器 *声音在“支持文件”中，“物理上”也在项目文件夹中 *试图设置绝对路径，但这也没有帮助。

UPD：不是本地的，推送通知。（我的意思是即使你关闭应用程序它也会工作）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T18:48:09.097

本地通知在 iphone 模拟器上效果不佳，您应该在真实设备上尝试它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T23:32:09.800

我很困惑，您说您正在发送推送通知，但您的代码显示了本地通知。

对于推送通知，您的应用程序必须在获取推送通知令牌时指定它需要声音：

```
[[UIApplication sharedApplication] registerForRemoteNotificationTypes:(UIRemoteNotificationTypeAlert|UIRemoteNotificationTypeSound)]; 
```

如果您的应用最初注册通知而没有请求音频通知，您可能必须删除应用并重新安装，然后 iOS 才会注意到您的应用改变了主意。

此外，请确保在“设置”>“通知”>“YOUR_APP”中打开“声音”。

此外，Apple 的[本地和推送通知编程指南](http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/IPhoneOSClientImp/IPhoneOSClientImp.html)说自定义声音的长度可能最多为 30 秒，否则播放默认通知。这适用于推送和本地通知。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-23T20:28:03.330

本地通知适用于模拟器上的声音（我刚刚使用 Xcode 7.1 进行了测试），但是如果剪辑超过 30 秒，声音将不会播放。

# java - 如何使用 Google GSON 将 JSON 数组反序列化为泛型类型的集合？

> ID：10356140
> 
> 赞同：11
> 
> 时间：2012-04-27T18:45:00.290
> 
> 标签：java, generics, gson

我正在编写一些用于从网站检索资源的代码。它看起来像这样：

```
public Collection<Project> getProjects() {
        String json = getJsonData(methods.get(Project.class)); //Gets a json list, ie [1, 2, 3, 4]
        Gson gson = new Gson();
        Type collectionType = new TypeToken<Collection<Project>>() {}.getType();
        return gson.fromJson(json, collectionType);
    } 
```

所以很自然地，我尝试使用 Java 泛型对其进行抽象。

```
/*
     * Deserialize a json list and return a collection of the given type.
     * 
     * Example usage: getData(AccountQuota.class) -> Collection<AccountQuota>
     */
    @SuppressWarnings("unchecked")
    public <T> Collection<T> getData(Class<T> cls) {
        String json = getJsonData(methods.get(cls)); //Gets a json list, ie [1, 2, 3, 4]
        Gson gson = new Gson();
        Type collectionType = new TypeToken<Collection<T>>(){}.getType();
        return (Collection<T>) gson.fromJson(json, collectionType);
} 
```

代码的通用版本虽然不太好用。

```
public void testGetItemFromGetData() throws UserLoginError, ServerLoginError {
            Map<String,String> userData = GobblerAuthenticator.authenticate("foo@example.com", "mypassword");
            String client_key = userData.get("client_key");
            GobblerClient gobblerClient = new GobblerClient(client_key);
            ArrayList<Project> machines = new ArrayList<Project>();
            machines.addAll(gobblerClient.getData(Project.class));
            assertTrue(machines.get(0).getClass() == Project.class);
            Log.i("Machine", gobblerClient.getData(Project.class).toString());
        }

java.lang.ClassCastException: java.util.LinkedHashMap cannot be cast to com.gobbler.synchronization.Machine
at com.gobblertest.GobblerClientTest.testGetItemFromGetData(GobblerClientTest.java:53)
at java.lang.reflect.Method.invokeNative(Native Method)
at android.test.AndroidTestRunner.runTest(AndroidTestRunner.java:169)
at android.test.AndroidTestRunner.runTest(AndroidTestRunner.java:154)
at android.test.InstrumentationTestRunner.onStart(InstrumentationTestRunner.java:545)
at android.app.Instrumentation$InstrumentationThread.run(Instrumentation.java:1551) 
```

有问题的班级：

```
import java.util.Map;

public class Project {
    private int total_bytes_stored;
    private String name;
    private String user_data_guid;
    private int seqnum;
    private String guid;
    private Map current_checkpoint;
    private Map<String, String> upload_folder;
    // TODO: schema_version
    private boolean deleted;
    // TODO: download_folders

    public Project() {} // No args constructor used for GSON
} 
```

我不太熟悉 Java 泛型或 GSON 内部的所有细节，而且我的搜索并没有提供特别丰富的信息。这里有很多关于 SO 的问题，但大多数都指的是实现方法，比如我原来的方法。GSON[文档](https://sites.google.com/site/gson/gson-user-guide#TOC-Serializing-and-Deserializing-Generic-Types)似乎没有涵盖这种特殊情况。再说一遍，如何使用 Google GSON 将 JSON 数组反序列化为泛型类型的集合？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-09-25T04:23:33.443

我想你可以！[来自 Gson 用户指南](https://sites.google.com/site/gson/gson-user-guide#TOC-Serializing-and-Deserializing-Generic-Types)：

> 您可以通过为泛型类型指定正确的参数化类型来解决此问题。您可以使用 TypeToken 类来做到这一点。

这意味着您理论上可以像这样包装您的地图：

```
Type t = new TypeToken<Map<String,Machine>>() {}.getType();
Map<String,Machine> map = (Map<String,Machine>) new Gson().fromJson("json", t); 
```

或者（在我的情况下）我必须像这样包装一个列表：

```
Type t = new TypeToken<List<SearchResult>>() {}.getType();
List<SearchResult> list = (List<SearchResult>) new Gson().fromJson("json", t);

for (SearchResult r : list) {
  System.out.println(r);
} 
```

（我得到了异常*"java.lang.ClassCastException: com.google.gson.internal.StringMap cannot be cast to my.SearchResult"*。）

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-28T02:00:01.087

可悲的是，你不能。泛型类型已被编译器删除，Gson 无法知道您拥有哪些类型或它们的字段是什么。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-07T04:46:50.723

我使用 JsonReader 来反序列化 json 字符串，如下所示。

```
public class JSONReader<T> {

    .....

    private Class<T> persistentClass;

    public Class<T> getPersistentClass() {
        if (persistentClass == null) {
            this.persistentClass = (Class<T>) ((ParameterizedType) getClass().getGenericSuperclass()).getActualTypeArguments()[0];
        }
        return persistentClass;
    }

    public List<T> read(Reader reader) throws IOException {
        JsonReader jsonReader = new JsonReader(reader);
        List<T> objs = new ArrayList<T>();
        jsonReader.beginArray();      
        while (jsonReader.hasNext()) {
            T obj = (new Gson()).fromJson(jsonReader, getPersistentClass());
            if (logger.isFine()) {
                logger.fine(obj.toString());
            }
            objs.add(obj);
        }
        jsonReader.endArray();
        jsonReader.close();
        return objs;
    }

    .....
} 
```

您可以使用以下语句调用上述方法（将 Json 字符串转换为 StringReader，并将 StringReader 对象传递给方法）：

```
public class Test extends JSONReader<MyClass> {

    .....

    public List<MyClass> parse(String jsonString) throws IOException {
        StringReader strReader = new StringReader(jsonString);
        List<MyClass> objs = read(strReader);
        return objs;
    }

    .....
} 
```

希望可以工作！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-07-29T13:44:11.730

我能想到的 Java 中最通用的类​​型是`Map<String, Object>`表示 JSON 对象和`List<Map<String, Object>>`表示 JSON 对象数组的类型。

使用 GSON 库（我在撰写本文时使用的是 2.2.4 版）解析这个非常简单：

```
import com.google.gson.Gson;

import java.util.List;
import java.util.Map;

public class Test {
    public static void main(String[] args) {
        String json = "{\"name\":\"a name\"}";
        Gson GSON = new Gson();
        Map<String, Object> parsed = GSON.fromJson(json, Map.class);
        System.out.println(parsed.get("name"));

        String jsonList = "[{\"name\":\"a name\"}, {\"name\":\"a name2\"}]";
        List<Map<String, Object>> parsedList = GSON.fromJson(jsonList, List.class);
        for (Map<String, Object> parsedItem : parsedList) {
            System.out.println(parsedItem.get("name"));
        }
    }
} 
```

# ruby-on-rails-3 - bootstrap-sass 表 - 如何生成跨越整个表宽度的单行以在表为空时显示消息（以及列标题）

> ID：10356143
> 
> 赞同：0
> 
> 时间：2012-04-27T18:45:06.430
> 
> 标签：ruby-on-rails-3, twitter-bootstrap, sass

我有一个使用支持的 htlm 和 css 元素生成并转换为看起来像引导样式的表。

我在我的代码（Rails 3.2.3）中包含了除非命令，用于在数据存在时显示表行，但在没有数据时以我希望的单行（跨越所有列）显示消息。

目前它显示但不是单行。

我尝试在表格中使用 span 和 colspan 但无法让它看起来“干净”

这是空桌子

![图 1：当前显示的表格（空）](../Images/1b29f007db0d9c42b0a48f8b851a967e.png)

这是带有数据的表格

![图 2：有 1 条记录的表](../Images/d3ae9d687c67763e99e8a35f2684a15d.png)

这是用于生成表格的代码。

```
<div class="page-header">
  <div class="span10">
    <h1>Listing people</h1>
    <div class="contextual">
      <%= link_to(new_person_path, class: "btn btn-success") do %>
        New Person <i class="icon-plus icon-white"></i>
      <% end %>
    </div>
  </div>

<table class="table table-striped table-bordered table-condensed">
<thead>
  <tr>
    <th></th>
    <th colspan="1">Full Name</th>
    <th colspan="1">DOB</th>
    <th colspan="1">Sex</th>
    <th colspan="1">Address</th>
    <th>Actions</th>
  </tr>
</thead>
<tbody
  <tr>
  <% unless @people.empty? %>
    <% @people.each do |person| %>
      <td><%= person.id %></td>
      <td><%= link_to person.full_name, person %></td>
      <td><%= person.dob %></td>
      <td><%= person.gender_to_s %></td>
      <td>
        <% person.addresses.each do |f| %>
          <%= f.full_address %>
        <% end %>
      </td>
      <td><%#= link_to 'Edit', edit_person_path(person) %> 
        <%= link_to(edit_person_path(person), class: "btn btn-small") do %>
          Edit <i class="icon-edit icon-white"></i>
        <% end %>

        <!-- This currently works but smells -->
        <%= link_to(person, class: "btn btn-small btn-danger", confirm: t_deletion_confirm(person, person.full_name), method: :delete, :title => t('EHM-G.destroy')) do %>
          Destroy <i class="icon-trash icon-white"></i>
        <% end %>
      </td>
    <% end %>
  <tr>
  <% else %>
    <td>Move along nothing to see here<td>
  <% end %>
</tr>
</tbody>                                        
</table>

<br />

<%#= link_to 'New Person', new_person_path %>
<%= link_to(new_person_path, class: "btn btn-success") do %>
  New Person <i class="icon-plus icon-white"></i>
<% end %>
</div> 
```

那么我如何获得消息“沿着这里看不到任何东西”（感谢 Github）以“跨越”行的整个宽度并使现有标题看起来很漂亮？

谢谢

PS 这些按钮是灰色的，因为脚手架.css.scss 似乎覆盖了 bootstrap-sass。删除脚手架文件后，它将恢复为正常服务。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T19:29:45.707

使用差异。例如，[http://sourceforge.net/projects/kdiff3/files/kdiff3/0.9.97/](http://sourceforge.net/projects/kdiff3/files/kdiff3/0.9.97/)

![差异](../Images/e1ea47e10cb3ee5a664bd9bce6ba30c1.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T12:13:20.273

从来没有弄清楚，但是代码中的某处有问题（可能是隐藏的数字，或流氓空间），因为重新编码已经纠正了它。

这是代码现在的样子。有谁知道一个简单的方法来找出是什么原因造成的？

```
 <div class="page-header">
    <h1>Listing people</h1>

  <div class="contextual">
    <%= link_to(new_person_path, class: "btn btn-success") do %>
      New Person <i class="icon-plus icon-white"></i>
    <% end %>
  </div>
</div>

<table class="table table-striped table-bordered table-condensed">
<thead>
<tr>
  <th colspan="1"></th>
  <th colspan="1">Full Name</th>
  <th colspan="1">DOB</th>
  <th colspan="1">Sex</th>
  <th colspan="1">Address</th>
  <th colspan="1">Actions</th>
</tr>
</thead>
<tbody>
  <% unless @people.empty? %>
    <% @people.each do |person| %>
      <tr>
        <td></td>
        <td><%= link_to person.full_name, person %></td>
        <td><%= person.dob %></td>
        <td><%= person.gender_to_s %></td>
        <td>
          <% person.addresses.each do |address| %>
            <%= address.full_address %>
          <% end %>
        </td>          
        <td>
          <%#= link_to 'Edit', edit_person_path(person) %> 
          <%= link_to(edit_person_path(person), class: "btn btn-small") do %>
            Edit <i class="icon-edit icon-white"></i>
          <% end %>

          <!-- This currently works but smells -->
          <%= link_to(person, class: "btn btn-small btn-danger", confirm: t_deletion_confirm(person, person.full_name), method: :delete, :title => t('EHM-G.destroy')) do %>
            Destroy <i class="icon-trash icon-white"></i>
          <% end %>

          <%#= icon_delete_link_to(person, people_path, person.full_name) %>
        </td>
      </tr>
    <% end %>
  <% else %>
    <tr>
      <td colspan="0">Nothing to see here move along please</td>
    </tr>
  <% end %>
  </tbody>
</table>
</div> 
```

![在此处输入图像描述](../Images/0a92cb909f656b1915e7679622356e99.png)

虽然我昨天看不到这个——“以木换树综合症！” 我希望这可能对其他人有所帮助。

对于我自己的学习，找出导致它的最佳方法是什么？对我来说，代码看起来仍然一样

# java - 这两种方式创建对象有什么区别

> ID：10356145
> 
> 赞同：0
> 
> 时间：2012-04-27T18:45:20.383
> 
> 标签：java

创建像这样的对象有什么区别

```
OverFlow a = new OverFlow();

OverFlow a; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T18:47:11.617

在第二种情况下，不创建任何对象。`a`变量保持未初始化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T18:48:46.493

这

```
OverFlow a 
```

bit 在这两种情况下具有相同的含义：它创建一个名为的变量，该变量存储对类（或子类）`a`实例的引用。`OverFlow`

在第一种情况下，创建了一个新对象，并将引用初始化为指向该对象。

在第二种情况下，引用未初始化并保持不变`null`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T19:03:54.277

```
OverFlow a; 
```

等于

```
OverFlow a = null; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-27T18:47:20.890

```
new OverFlow(); 
```

确实创建了一个 OverFlow 类的实例，而

```
OverFlow a; 
```

只是一个声明。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-27T18:47:52.437

在第一个中，“a”具有新构造的溢出对象的值。

在第二个中，它是空的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-27T18:48:32.183

当您创建一个对象而不将其定义为新对象时，它将不会被初始化（也不会调用构造函数。）。您应该只使用第二个版本在 try-catch-block 中创建对象。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-27T18:49:06.607

`OverFlow a;`不创建对象（即您可以使用的实例）。它只定义`a`具有类型的变量，`OverFlow`但它将被分配给`null`. 如果您尝试使用它，您将因此得到 NullPointerException。根据您的编译器，它也很可能会给您一个“未初始化”变量警告。

`OverFlow a = new OverFlow();`做同样的事情，除了它创建一个可以使用的实际对象（非空）。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-04-27T19:03:28.933

基本上，

```
OverFlow a; 
```

告诉编译器，“最终会有一个类型溢出的变量，所以要做好准备。”

```
OverFlow a = new Overflow(); 
```

实际上分配了存储变量所需的内存并为其调用构造函数

# grails - 如何在 Mixin 中访问 GrailsApplication？

> ID：10356148
> 
> 赞同：0
> 
> 时间：2012-04-27T18:45:30.123
> 
> 标签：grails, controller, mixins

我正在创建一个 mixin 以添加到具有一些基本实用功能的控制器中。我想在 mixin 中执行的功能之一是使用`g.message`taglib 将错误解析为其字符串。不幸的是，我似乎无法`GrailsApplication`在我的静态 mixin 方法中访问 。

我将如何从我的 mixin 访问 Grails 标签库，或者是否有更好的方法来实现我正在做的事情——在所有控制器之间共享公共代码？

这是我正在运行的代码。我认为问题是如何在静态方法中访问 Grails 标签库：

```
 static def preparePostResponse(domainInstance) {

                    def grailsApplication = new User().domainClass.grailsApplication

                    def postResponse = new AjaxPostResponse(domainObject: domainInstance)

                    if (domainInstance.hasErrors()) {
                        g.eachError(bean: domainInstance) {
                            postResponse.errors."${it.field}" = g.message(error: it)
                        }
                        postResponse.success = false
                        postResponse.message = "There was an error"
                    }
                    else {
                        postResponse.success = true
                        postResponse.message = "Success"
                    }
                    return postResponse
                } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T20:07:53.647

您可以`grailsApplication`使用多种技术之一从应用程序中的任何位置进行访问。已`GrailsApplicationHolder`弃用，但 Burt Beckwith[在此博客文章中提供了一些解决方案](http://burtbeckwith.com/blog/?p=993)。

可能最简单的方法是将其从现有域中拉出，如下所示：

```
class MyMixin {
    static myMethod() {
        def grailsApplication = new MyDomainClass().domainClass.grailsApplication
        // use it like normal here
    }
} 
```

[他有另一种方法在 BootStrap 中使用 metaClass](https://stackoverflow.com/questions/6976983/getting-grails-2-0-0m1-config-info-in-domain-object-and-static-scope)设置变量。

* * *

[或者，您可以使用这篇博](http://burtbeckwith.com/blog/?p=1017)文中涉及更多但（我认为）更好的技术来创建一个专用类来访问应用程序。如果您要在多个地方使用它，这很好。我在我的应用程序中创建了一个专用`AppCtx`类，它具有用于`grailsApplication`,`config`等的吸气剂。这样写会更简洁：

```
def foo = AppCtx.grailsApplication... 
```

# c# - 需要帮助为 SQL Server CE 数据库创建“另存为”方法

> ID：10356149
> 
> 赞同：0
> 
> 时间：2012-04-27T18:45:32.370
> 
> 标签：c#, sql, entity-framework, sql-server-ce

我有一个数据库，并且我很容易实现了 Save & Load 方法，但是在尝试使用 C# 创建 Save As 方法时遇到了一些麻烦。当我尝试以这种方式保存更改时，它不会创建新文件，它只是不做任何事情，或者它会覆盖我的原始文件，即使我已经给它起了一个新名称。

总而言之，我想打开一个 .sdf 文件，对其进行一些更改，然后用新名称保存它。我怎么做？

我猜我正在努力让它变得更容易——我对数据库编程相当陌生，所以任何提示都会受到赞赏。

谢谢！

这是我的另存为方法：

```
public static bool SaveDataAs(string fileName)
{
   thisdb.dbFileName = Path.GetFileName(fileName);
   thisdb.dbFilePath = Path.GetDirectoryName(fileName);

   thisdb.connect();
   thisdb.SaveChanges();

   return true;
} 
```

这是我的连接方法：

```
public void connect()
{
   string dbConnection = "Data Source=" + dbFilePath + "\\" + dbFileName;

   if (!Directory.Exists(dbFilePath)) { 
      Directory.CreateDirectory(dbFilePath); 
   }

   string dbProvider = "System.Data.SqlServerCe.4.0";

   Database.DefaultConnectionFactory =
            new System.Data.Entity.Infrastructure.SqlCeConnectionFactory(
                                     dbProvider, dbFilePath, dbConnection);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T10:38:27.857

您混合了两种截然不同的职责：保存数据和文件管理。我将开始将两者分开。

让有一个组件来管理数据库文件并知道它们的位置。让另一个组件，您的数据访问层 (DAL)，将数据保存到它从文件管理器接收的数据库文件中。代码可能如下所示：

```
public Repository GetRepository(string fileName)
{
   var man = new DbFileManager();
   string dbFilePath = man.GetFile(fileName);

   return new Repository(dbFilePath); // TODO: Check dbFilePath
} 
```

DbFileManager 知道原始数据库文件并负责将副本复制到所需位置。它返回一个与新文件通信的存储库。

存储库接收新位置的名称，构建连接字符串并使用它初始化上下文。然后，您可以在存储库上调用任意数量的读取和保存操作。

我不确定这是否满足您的要求。如果您还想修改原始文件，您可以在完成更新后让文件管理器用副本覆盖它。这样，万一出现错误，总会有一个原始文件可以返回。

# java - URL 路由 - URL 末尾缺少斜杠会导致 404 错误

> ID：10356153
> 
> 赞同：0
> 
> 时间：2012-04-27T18:45:44.117
> 
> 标签：java, spring, spring-mvc

我有一个部署在上面的 webapp（基于 Spring MVC）`/mobile`（详情如下）。问题是：

当我去`http://localhost:8080/mobile/`or`http://localhost:8080/mobile/index`时，一切正常。

但是当我去`http://localhost:8080/mobile`（注意最后缺少的斜线）时，我得到一个 404 错误。为什么会这样（以及如何修复它）？

网页.xml：

```
<servlet>
  <servlet-name>mobileServlet</servlet-name>
  <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
  <init-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>/WEB-INF/spring/mobile-servlet-context.xml</param-value>
  </init-param>
  <load-on-startup>1</load-on-startup>
</servlet>
<servlet-mapping>
  <servlet-name>mobileServlet</servlet-name>
  <url-pattern>/mobile/*</url-pattern>
</servlet-mapping> 
```

控制器：

```
@Controller
public class MobileAppController {
  @RequestMapping({"", "/", "/index"})
  public String index() {
    return "/mobile/index";
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T06:57:49.737

他已经**`/mobile/*`**在 url 模式标签中给出了。

如果他提供，`localhost:8080/mobile`那么他将无法访问，因为它们没有匹配的 url。

尝试通过提供**`/mobile*`**url 模式.. 我认为它会起作用。

# c# - 邮编压缩

> ID：10356160
> 
> 赞同：0
> 
> 时间：2012-04-27T18:45:55.587
> 
> 标签：c#, compression, zip

我有：

```
public static void compress(string fileName)
    {
        using (FileStream inFile = File.OpenRead(Directory.GetCurrentDirectory() + "\\" + subFolder + "\\" + fileName))
        {
            string newFileName = fileName.Remove(fileName.Length - 3) + "zip";
            using (FileStream outFile = File.Create(Directory.GetCurrentDirectory() + "\\" + subFolder + "\\" + newFileName))
            {
                using (GZipStream Compress = new GZipStream(outFile, CompressionMode.Compress))
                {
                    inFile.CopyTo(Compress);
                }
            }
        }
    } 
```

文件名例如 data.txt。压缩工作正常，但是当我查看压缩文件时，有一个名为“data”的文件。“txt”扩展名在哪里。文件名仍应具有名称“data.txt”。

我错过了什么或做错了什么？

问候卡兹克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T21:12:52.180

当您使用 压缩数据时`GZipStream`，您提供的*是字节流*，而不是文件 -`GZipStream`实例不知道流是来自网络、内存还是来自文件，因此无法将文件名嵌入到档案。

但是，所有文件的内容都正确保存在存档中。您可以使用 7zip 将它们解压缩到一个新文件中（默认情况下，给定一个标记名称，例如`data`），重新命名您的文件，您将拥有与您开始使用的文件相同的文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T18:49:51.763

您可能想使用[Path.GetFileNameWithoutExtension](http://msdn.microsoft.com/en-us/library/system.io.path.getfilenamewithoutextension.aspx)然后附加 gz 扩展名。

# c++ - 避免使用 git 和 make 重新编译

> ID：10356165
> 
> 赞同：25
> 
> 时间：2012-04-27T18:45:59.410
> 
> 标签：c++, c, git, makefile, git-pull

我在 git 中有两个开发分支，我经常需要在两者之间进行更改。然而，真正令人沮丧的是，每次我在 git 中更改分支时，整个项目都会重新构建，因为某些文件的文件系统时间戳会发生变化。

Ofc，makefile 被配置为将项目构建到两个不同的构建目录中。

有没有办法解决？编译是一个非常漫长和耗时的过程...

编辑：- 这是对该问题的更详细的解释......假设我有一个头文件 Basic.h 包含在许多其他文件中。Basic.h 在分支 1 和分支 2 之间是不同的。

现在假设我已将分支 1 编译为 build_branch1，将分支 2 编译为 build_branch2。假设我目前已签出分支 2。现在我签出分支 1 并更改 File1.cpp 并重新编译。理想情况下，因为自从我上次编译后只有 File1.cpp 发生了变化，所以这是唯一应该重新编译的文件。

但是，由于 Basic.h 由于结帐而更改了时间戳，因此包含 Basic.h 的所有文件都将重新编译。我想避免这种情况。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-27T18:52:46.263

Git 仅更改在分支之间更新的文件。但是，如果您的编译器在任何单个文件被更改的情况下进行完全重建，您始终可以克隆并将不同的分支检出到不同的目录中。这就像：

```
/your-repo-name.branch1
/your-repo-name.branch2 
```

这需要额外的磁盘空间，但比在一个巨大的 repo 中切换不同的分支要方便得多。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-04-27T23:43:51.187

另一个部分答案：编译器缓存。

当您切换回原始分支并重建时，虽然依赖项说`Basic.h`必须重建大量依赖的文件，但可以从编译器缓存中提取目标文件。

`ccache`( [http://ccache.samba.org/](http://ccache.samba.org/) ) 仍然需要做一些相当昂贵的工作（处理预处理的翻译单元，因为整个翻译单元都使用哈希键）但它比编译便宜得多。

In some cases `ccache` can eliminate a compile in the face of a change that does not affect it, like some whitespace changes. For instance if you change a comment in a dependent file (header or source), that does not invalidate the cached object file.

So it can help even if you do a `git pull` and pick up a new change to `Basic.h` you haven't seen before.

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-27T18:53:20.947

如果您知道哪些文件实际上需要编译，并手动进行编译，[GNU Make](http://www.gnu.org/software/make/manual/make.html#Avoiding-Compilation)（至少，我不知道其他实现）为您提供了一个标志：`-t`，它基本上运行在您的 Makefile 上并更改时间戳而不是运行命令。

在使用此标志之前，您仍然需要更新需要更新的文件*，*否则您最终会得到合法过期但*看起来*已更新的目标文件。有关详细信息，请参阅链接的文档。

您可能也会对该`-o`选项感兴趣，具体取决于您切换分支时的更改量。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-27T21:55:50.803

如果`Basic.h`分支之间实际上存在差异，那么唯一的解决方法是将其分解为具有更细粒度依赖关系的较小文件，以便在更改时重建更少的内容。

但是假设`Basic.h`在分支之间实际上是完全相同的，只是`git`改变了它的时间戳。这是一个错误的触发器，就像 do 一样`touch Basic.h`，它揭示了基于时间戳的构建系统的局限性。理想情况下，我们希望构建系统在内容更改时重建，而不是在时间戳更改时重建。使用时间戳是因为它们是检测内容更改的廉价替代品。更好的方法是让构建系统保留所有文件的哈希值并检测实际修改，而不考虑时间戳。这也解决了诸如“检测到时钟偏差；您的构建可能不完整”之类的问题。

你不会从 Make 中得到这种构建系统。但是您可能可以针对某些文件处理它的某些方面。例如，您可以编写 Make 规则，使您的目标文件不直接依赖于，`Basic.h`而是依赖于`Basic.h.sha`，这是一个标记文件。现在，里面有什么`Basic.h.sha`？此文件包含 SHA256 哈希`Basic.h`。

每次运行 Make 时，Makefile 中的逻辑都会计算哈希`Basic.h`并将其与存储在`Basic.h.sha`. 如果它们不同，则`Basic.h.sha`用新的哈希覆盖。因此，它的时间戳被碰撞，触发重建。

```
BASIC_H_SHA := $(shell sha256sum Basic.h)
BASIC_H_SHA_OLD := $(shell cat Basic.h.sha)

ifneq ($(BASIC_H_SHA),$(BASIC_H_SHA_OLD))
$(info Basic.h has changed!)
DUMMY := $(shell echo "$(BASIC_H_SHA)" > Basic.h.sha)
endif 
```

我已经按照这些思路实现了逻辑，以使模块依赖于它们各自的`CFLAGS`. 基本上，我们可以将*任何内容*的更改转换为时间戳文件，该文件控制构建的内容。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-04-27T18:54:44.243

没有很好的方法可以保留时间戳并且不会在您的构建环境中遇到麻烦。使用 git clone / git checkout branchB 创建第二个工作目录，用于构建和使用分支 B。不要同时构建你的 Makefile，让每个都构建到自己的构建目录中。

# java - 如何知道一个日期是否在其他日期的同一天内

> ID：10356168
> 
> 赞同：3
> 
> 时间：2012-04-27T18:46:14.550
> 
> 标签：java, android

如果我在 Java (Android) 中有两个日期（Date1 和 Date2），我怎么知道 Date2 是否在 Date1 的同一天内？（注意：如果 Date2-Date1 < 24 小时，则不是）。一些例子（假设同年同月）

```
 Date1: day=14 hour=00:00           Date2: day=14 hour=00:00    --> Result TRUE
 Date1: day=13 hour=23:59           Date2: day=14 hour=00:00    --> Result FALSE
 Date1: day=14 hour=05:00           Date2: day=14 hour=00:00    --> Result TRUE
 Date1: day=14 hour=00:00           Date2: day=15 hour=00:00    --> Result FALSE 
```

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-27T19:01:08.353

你为什么不使用`DateUtils`？

您可以直接调用 isSameDay 等方法

```
if (DateUtils.isSameDay(date1, date2)) {
    System.out.println("Same Date");
} else if (date1.before(date2)) {
    System.out.println("date1 before date2");
} else {
    System.out.println("date1 after date2");
} 
```

检查[Apache DateUtils](https://commons.apache.org/proper/commons-lang/javadocs/api-2.6/org/apache/commons/lang/time/DateUtils.html)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-27T18:53:00.223

我从[Java 复制了这个：比较两个日期以查看它们是否在同一天](https://stackoverflow.com/questions/2517709/java-comparing-two-dates-to-see-if-they-are-in-the-same-day)

```
Calendar cal1 = Calendar.getInstance();
Calendar cal2 = Calendar.getInstance();
cal1.setTime(date1);
cal2.setTime(date2);
boolean sameDay = cal1.get(Calendar.YEAR) == cal2.get(Calendar.YEAR) &&
                  cal1.get(Calendar.DAY_OF_YEAR) == cal2.get(Calendar.DAY_OF_YEAR); 
```

# sql - 在 LINQ to SQL 设计器中手动创建关联

> ID：10356172
> 
> 赞同：0
> 
> 时间：2012-04-27T18:46:26.810
> 
> 标签：sql, linq, orm

我只能访问我正在处理的 SQL 数据库中的 VIEWS。在 LINQ to SQL 设计器界面中，我从数据库中删除了两个视图。这两个视图是由数据库所有者从同一个基础表中创建的。两个视图都包含表中的主键。但是，这两个视图之间的关联不会自动创建。如何手动创建在视图中使用公共 pk 的关联？我记得我曾经可以将一个类的 pk 拖放到另一个类的 pk 上以创建关联，但现在不能了。我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T18:57:18.403

一种方法是在 DBML 设计器中，在空白处单击鼠标右键。将弹出一个菜单。选择添加，然后从那里选择关联。然后将为您显示配置关联的对话框。

# c# - 如何将视图对象发送到 WPF MVVM 中的 ViewModel？

> ID：10356173
> 
> 赞同：0
> 
> 时间：2012-04-27T18:46:29.577
> 
> 标签：c#, wpf, mvvm, view, viewmodel

我想将我的视图对象发送到我的 ViewModel，我该如何在 WPF MVVM 中做到这一点。

笔记：

实际上我想要做的是..我有一个我没有关注 MVVM 的 MainWindow，这个 MainWindow 有一个 Canvas，我在其中放置了我的所有视图，这些视图是 UserControls。现在，从一个名为 Stock 的特定视图中，我想在一个按钮上的 Canvas 子项上添加一个 UserControl“另一个视图” 从 Stock 视图单击

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-27T18:49:07.083

视图模型中的视图引用通常会在创建视图时分配。

# android - Android 自定义首选项更改覆盖

> ID：10356175
> 
> 赞同：3
> 
> 时间：2012-04-27T18:46:33.203
> 
> 标签：android, preference

我的自定义偏好类有助于颜色选择。
自定义首选项调用 GridView Intent 它包含 9 种颜色。
但是我的自定义类无法刷新用户在 gridview 上选择的颜色

当我完成首选项意图，然后重新启动首选项时，
颜色会在我选择时显示我。

`onBindView()`方法，我过头了。这是完美的。
**但我不知道我必须重写什么方法来刷新颜色。**

![在此处输入图像描述](../Images/de3608534288b733f943d989c0232c44.png)

```
public class ConfigImage extends Preference
{
    Context mContext;

    public ConfigImage(Context context, AttributeSet attrs)
    {
        this(context, attrs, 0);
        this.mContext = context;
    }

    public ConfigImage(Context context, AttributeSet attrs, int defStyle)
    {
        super(context, attrs, defStyle);
        this.mContext = context;
        setLayoutResource(R.layout.preference_image);
    }

    @Override
    public void onBindView(View view)
    {
        super.onBindView(view);
        ImageView imageView = (ImageView) view.findViewById(R.id.preference_image_iv_color);
        if (imageView != null)
        {
            SharedPreferences sharedPref = PreferenceManager.getDefaultSharedPreferences(mContext);
            int colorIndex = sharedPref.getInt("setting_color_default", 3);
            imageView.setBackgroundColor(Color.parseColor(ColorStorage.colors[colorIndex]));
        }
    }
} 
```

.

```
 <PreferenceCategory
    android:key="setting_color_info"
    android:title="색상" >

    <com.pack.ConfigImage
        android:id="@+id/setting_color_default"
        android:key="setting_color_default"
        android:selectable="true"
        android:summary="Choose default color"
        android:title="Default Color"
        settings:background="#FFFFFFFF" />
</PreferenceCategory> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T09:08:43.113

假设您的问题没有收到共享偏好更改的通知，那么您应该订阅它的更改，例如

```
registerOnSharedPreferenceChangeListener(this); 
```

# javascript - 从内部函数访问变量

> ID：10356192
> 
> 赞同：0
> 
> 时间：2012-04-27T18:47:30.217
> 
> 标签：javascript

```
 var urihost;
var result =  page.evaluate(function () {
        ............
        "set urihost value from here"
        ............
}); 
```

如何从内部函数访问 urihost，使其全局化也不起作用

小提琴：http: [//jsfiddle.net/KGLzj/](http://jsfiddle.net/KGLzj/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T18:55:36.090

它应该可以正常工作，但我看到您有一些看起来像回调函数的东西。分配结果后可能`urihost`还没有值 - 因为尚未调用回调函数，并且`urihost`尚未分配值。

您可以发布更多代码吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T18:58:08.333

我可能误解了你的问题...

但是您的代码应该按原样工作，请参阅**[this fiddle](http://jsfiddle.net/dPXjn/)**

```
// Setup page object:
var page = {
    evaluate: function(func) {
        // Don't forget to call the function...
        func();
    }
};

// The variable you want to change:
var urihost = 1;

// Execute now...
var result = page.evaluate(function () {
    urihost = 2;
});

// The alerted result will be 2
alert(urihost);​ 
```

# c# - C# formclosure 事件和循环

> ID：10356194
> 
> 赞同：1
> 
> 时间：2012-04-27T18:47:38.573
> 
> 标签：c#, loops

如果我必须再声明一点，请告诉我，这里有点晚了。

我有一个小问题，这段代码一直在循环:(...

我有这个

```
if (MessageBox.Show("Are you sure you want to quit?", "Confirm Quit", MessageBoxButtons.YesNo) == DialogResult.Yes)
{
    Stop();
    _exited = true;

    foreach (Process x in Process.GetProcesses())
    {
        while (x.Id == _processID)
        {
            Application.Exit();
            e.Cancel = true;
            return;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T18:51:46.460

### 描述

它不断循环，因为您`Application.Exit()`在此方法内部调用。我不知道你想做什么，但我想你想问用户他是否真的想关闭应用程序。如果您设置`e.Cancel = true`它意味着您取消事件，所以在您的情况下，您取消以关闭应用程序。

因此，如果您询问“确定要退出”并且用户选择“否”，则您应该设置`e.Cancel = true`，如果没有，则什么也不做，因为默认`e.Cancel`值为`false`.

### 样本

```
// create a list of process
private List<Process> processes = new List<Process>();

// if you start a process
Process myProcess = //;
processes.Add(myProcess);

// on closing
private void Form1_FormClosing(object sender, FormClosingEventArgs e)
{
    var isAProcessRunning = processes.Where(p => p.HasExited == false);

    if (isAProcessRunning.Any()) 
    {
      // some process is already running, ask the user 

        if (MessageBox.Show("Are you sure you want to quit?", "Confirm Quit", MessageBoxButtons.YesNo) ==
        DialogResult.No)
        {
            e.Cancel = true;
        }
     }
  } 
```

### 更多信息

*   [MSDN - Form.FormClosing 事件](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.formclosing.aspx)

# c++ - 编译Qt时出错：nmake fatal error U1077

> ID：10356198
> 
> 赞同：9
> 
> 时间：2012-04-27T18:47:46.477
> 
> 标签：c++, visual-studio-2010, qt, compiler-errors, nmake

我正在尝试编译 Qt 4.7.4，但我总是收到此错误：

```
mt.exe: general error c101008d: Failed to write the updated manifest to the resource of file "release\tutorial5.exe". The system cannot find the file specified. 
NMAKE : fatal error U1077: '"C:\Program Files(x86)\Microsoft SDKs\Windows\v7.0A\bin\mt.exe"' : return code '0x1f'
Stop.
NMAKE : fatal error U1077: '"C:\Program Files(x86)\Microsoft Visual Studio 10.0\VC\BIN\nmake.exe"' : return code '0x2'
Stop. 
NMAKE : fatal error U1077: 'cd' : return code '0x2'
Stop.
NMAKE : fatal error U1077: 'cd' : return code '0x2'
Stop. 
NMAKE : fatal error U1077: 'cd' : return code '0x2'
Stop. 
```

使用 Visual Studio 命令提示符，我执行了以下命令：

```
configure -debug-and-release -opensource -platform win32-msvc2010
nmake 
```

我能做些什么来解决这个错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T00:05:37.303

所以显然 tutorial5.exe 无法正确或完全构建，并且永远不会创建 exe。Mt.exe 是一个用于[生成签名文件和目录](http://msdn.microsoft.com/en-us/library/windows/desktop/aa375649%28v=vs.85%29.aspx)的 Windows 后期构建工具。它返回错误，因为它找不到文件。

您的问题的解决方案包括从您的构建中排除演示和教程，或者在教程 5 的源代码中查找错误，以便正确构建。或者您甚至可以在其中放置一个虚拟版本的tutorial5.exe，看看这是否是唯一出现的错误。

很可能源代码中的错误与 Windows 中 Qt 的默认编译器工具 (MingW) 和 msvs2010 编译器之间的差异以及它们尝试处理某些 Windows 特定代码的方式有关。

## 构建 Qt 时如何排除示例

其他在线有类似项目的人已经使用标志“sub-src”从 nmake 构建调用中排除了这些示例。

*   [使用 msvs2010 制作 4.7.2 时出错](http://www.qtcentre.org/threads/40726-Error-nmaking-4-7-2-with-msvs2010)

*   [如何在没有示例和演示的情况下构建 Qt 4.3.4](http://git.net/ml/lib.qt.general/2008-03/msg00668.html)

## 什么是tutorial5.exe

这是 Qt 的默认构建中的位置`release/tutorial5.exe`：

```
C:\QtSDK\Examples\4.7\qtestlib\tutorial5 
```

它在文档中：[Qt 4.8: Chapter 5: Writing a Benchmark](http://doc.qt.io/qt-4.8/qt-qtestlib-tutorial5-example.html)

您可能应该向 Qt 项目提交描述问题的票证：[bugreports.qt.io](https://bugreports.qt.io)

祝你好运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-04T10:04:02.670

在 Windows 7 64 位上使用 Qt 4.8.1、Creator 2.7.1、MSVC2010 Express 的 Qt 控制台应用程序出现类似错误：

```
"mt.exe : general error c101008d: Failed to write the updated manifest to the resource of file ... " 
```

然后还有一些东西

```
The process cannot access the file because it is being used by another process. 
```

但是，应用程序已构建，然后可以从 Creator 中“运行”。该错误也发生在“构建”而不是“运行”中。我最初认为这可能是一个时间问题，例如创建者太快地启动外壳来运行程序。删除文件后它可以正常工作（没有错误）。

也许我的 GIT（或 TortoiseGIT）正在访问该文件，尽管我看不到这些进程。

编辑：也可能是病毒扫描程序检查正在写入的文件。编辑2：确认：暂时禁用扫描程序可以解决问题

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-01-20T03:54:53.177

尝试以管理员身份运行 Microsoft Visual Studio 命令提示符。当您转到魅力面板并搜索 MSVS 提示符时，右键单击并以管理员身份运行。

# python - 简单的python正则表达式

> ID：10356200
> 
> 赞同：-1
> 
> 时间：2012-04-27T18:47:59.363
> 
> 标签：python, regex

我正在努力寻找一个简单的 python 正则表达式，这意味着：

几个空格（/n /t /r）后跟至少一个除空格以外的字符（a-zA-Z0-9，每个运算符等），然后是几个空格。也不必有任何空格。因此，例如 "c" 、 "\nc" 、 "c\t" 是正确的，但 \n 不是。到目前为止，我有 stg 喜欢：

```
 re.compile('\s*\S+\s*') 
```

但我不确定它是否完全正确..是吗？

谢谢您的回答 ：-）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T18:51:18.993

这是正确的：

```
>>> re.search('\s*\S+\s*', '   foo   ').group(0)
'   foo   '
>>> re.search('\s*\S+\s*', 'foo   ').group(0)
'foo   '
>>> re.search('\s*\S+\s*', 'foo').group(0)
'foo' 
```

请记住，Python 有一个解释器。它非常棒，所以使用它！

# vb.net - 为每个实例打开一个新的 WebBrowser 会话，VB

> ID：10356201
> 
> 赞同：1
> 
> 时间：2012-04-27T18:48:08.620
> 
> 标签：vb.net, session, browser

我用VB做了一个小程序。它打开一个网络浏览器，我试图让它**不**继承其他人的会话。这样，例如，我可以在我启动的每个程序中导航到不同的 Facebook 帐户。任何建议表示赞赏。

# c# - 根据当前系统文化从字符串值构建 DateTime

> ID：10356204
> 
> 赞同：0
> 
> 时间：2012-04-27T18:48:13.093
> 
> 标签：c#, .net

我需要的是使用字符串变量来构建基于当前系统文化的 DateTime。

[一些例子说手动做](http://www.csharp-examples.net/string-format-datetime/)

```
// date separator in german culture is "." (so "/" changes to ".")
String.Format("{0:d/M/yyyy HH:mm:ss}", dt); // "9/3/2008 16:05:07" - english (en-US)
String.Format("{0:d/M/yyyy HH:mm:ss}", dt); // "9.3.2008 16:05:07" - german (de-DE) 
```

但是有没有办法自动做到这一点？

这段代码正确吗？

```
DateTime dateValue;
CultureInfo culture = CultureInfo.CurrentCulture;
DateTimeStyles styles = DateTimeStyles.None;
string strDateTime = string.Format("{0}/{1}/{2} {3}:{4}:{5}", systemTime.month, systemTime.day, systemTime.year, systemTime.hour, systemTime.minute, systemTime.second);
DateTime.TryParse(strDateTime, culture, styles, out dateValue); 
```

* * *

仅针对需要它的人，我将所有方法放在这里：

```
 DateTime dateValue;

        // Method 1
        //CultureInfo culture = CultureInfo.CurrentCulture;
        //DateTimeStyles styles = DateTimeStyles.None;
        //string strDateTime = string.Format("{0}/{1}/{2} {3}:{4}:{5}", systemTime.month, systemTime.day, systemTime.year, systemTime.hour, systemTime.minute, systemTime.second);
        //DateTime.TryParse(strDateTime, culture, styles, out dateValue);

        // Method 2
        //DateTime d = new DateTime(systemTime.year, systemTime.month, systemTime.day, systemTime.hour, systemTime.minute, systemTime.second);
        //dateValue = DateTime.Parse(d.ToString("G"));

        // Method 3 http://msdn.microsoft.com/en-us/library/ch92fbc1.aspx The string s is parsed using formatting information in the current DateTimeFormatInfo object, which is supplied implicitly by the current thread culture.
        DateTime d = new DateTime(systemTime.year, systemTime.month, systemTime.day, systemTime.hour, systemTime.minute, systemTime.second);
        DateTime.TryParse(d.ToString(), out dateValue); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T18:52:40.677

您可以通过[将`"G"`格式](http://msdn.microsoft.com/en-us/library/az4se3k1.aspx)传递给自动使用当前文化`ToString`：

```
string result = dt.ToString("G"); // 9/3/2008 4:05:07 PM for en-US 
```

[这是一个演示。](http://ideone.com/6LYLp)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T18:58:23.993

当您使用`DateTime.TryParse(string, out DateTime result)`它时，它会自动使用当前的文化。请参阅此处的备注部分：http: [//msdn.microsoft.com/en-us/library/ch92fbc1.aspx](http://msdn.microsoft.com/en-us/library/ch92fbc1.aspx)

# ruby-on-rails - 用于 HTTP 请求的标头值的文本编码是什么？

> ID：10356216
> 
> 赞同：2
> 
> 时间：2012-04-27T18:48:55.990
> 
> 标签：ruby-on-rails, ruby, http, encoding, ruby-1.8

我有一个 Ruby on Rails 应用程序，它是 Java 和 .Net 应用程序的服务器。我有一个自定义标头用于发送一些数据，但是当这些数据到达 Ruby on Rails 应用程序时，Rails 将值读取为 UTF-8，然后说该值**不是**有效的 UTF-8 字符串。

例如，如果我发送**JÜRGENELITE-HP** 我会得到：

```
#<ActiveRecord::StatementInvalid: PGError: ERROR:  invalid byte sequence for encoding "UTF8": 0xdc52
: SELECT * FROM "replicas" WHERE ("replicas"."identification" = 'J?RGENELITE-HP') AND ("replicas".user_id = 121)  LIMIT 1> 
```

Java HTTP Client 库清楚地在控制台中正确打印数据：

```
DEBUG [main] (DefaultClientConnection.java:268) - >> POST /ze/api/files.json HTTP/1.1
DEBUG [main] (DefaultClientConnection.java:271) - >> X-Replica: JÜRGENELITE-HP
DEBUG [main] (DefaultClientConnection.java:271) - >> Authorization: Basic bWxpbmhhcmVzOjEyMzQ1Njc4

DEBUG [main] (DefaultClientConnection.java:271) - >> Content-Length: 0
DEBUG [main] (DefaultClientConnection.java:271) - >> Host: localhost:3000
DEBUG [main] (DefaultClientConnection.java:271) - >> Connection: Keep-Alive
DEBUG [main] (DefaultClientConnection.java:271) - >> User-Agent: Apache-HttpClient/4.1.2 (java 1.5) 
```

但是当它到达 Rails 时它会中断。HTTP 使用什么编码来编码标头值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T19:42:35.083

**美国ASCII**

如果您查看[RFC2616](http://www.ietf.org/rfc/rfc2616.txt)的第 2.2 节：

> 2.2 基本规则
> 
> 在本规范中使用以下规则来
> 描述基本的解析结构。US-ASCII 编码字符集
> 由 ANSI X3.4-1986 [21] 定义。
> 
> ```
>  OCTET          = <any 8-bit sequence of data>
>    CHAR           = <any US-ASCII character (octets 0 - 127)>
>    UPALPHA        = <any US-ASCII uppercase letter "A".."Z">
>    LOALPHA        = <any US-ASCII lowercase letter "a".."z">
>    ALPHA          = UPALPHA | LOALPHA
>    DIGIT          = <any US-ASCII digit "0".."9">
>    CTL            = <any US-ASCII control character
>                     (octets 0 - 31) and DEL (127)>
>    CR             = <US-ASCII CR, carriage return (13)>
>    LF             = <US-ASCII LF, linefeed (10)>
>    SP             = <US-ASCII SP, space (32)>
>    HT             = <US-ASCII HT, horizontal-tab (9)>
>    <">            = <US-ASCII double-quote mark (34)> 
> ```

本节的其余部分包含有关协议头和其他元素的更具体信息。

你必须绕着规范跳很多，才能找到所有正确的 BNF 定义。不过，第 4.2 节包含标题的定义：

> ```
>  message-header = field-name ":" [ field-value ]
>    field-name     = token
>    field-value    = *( field-content | LWS )
>    field-content  = <the OCTETs making up the field-value
>                     and consisting of either *TEXT or combinations
>                     of token, separators, and quoted-string> 
> ```

`TEXT`在第 2.2 节中定义：

> ```
>  TEXT           = <any OCTET except CTLs,
>                     but including LWS> 
> ```

# lucene - 带有 lucene 的自定义荧光笔

> ID：10356217
> 
> 赞同：1
> 
> 时间：2012-04-27T18:48:56.547
> 
> 标签：lucene

默认情况下，lucene 荧光笔使用粗体标签突出显示搜索字符串。我可以提供自己的突出显示方案，使用其他颜色进行突出显示吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T19:08:32.177

如果您只使用常规，则可以使用您想要的任何 pre 和 post 标签`Highlighter`将其构造传递：`SimpleHTMLFormatter`

```
new Highlighter(fragmentScorer, new SimpleHTMLFormatter("<span>", "</span>")); 
```

当然，还有其他格式化程序，例如`GradientFormatter`，将根据分数确定的最小和最大颜色突出显示术语，您可以通过构造函数设置所有这些。`SpanGradientFormatter`也做类似的事情。

# c# - 关于 c# webrequest 和网站阻止我

> ID：10356221
> 
> 赞同：0
> 
> 时间：2012-04-27T18:49:09.017
> 
> 标签：c#, http, web, httpwebrequest, block

所以我制作了 ac# 程序，它每 0.5 秒发送一次（当我知道它卡住了我的互联网时，现在将它改为每 30 秒）向网站发送一个请求（以获取其 html）。

现在，即使在我关闭应用程序后，网站也没有加载，它说该网站花了很多时间来响应......（所有浏览器），如果我的朋友尝试进入，它并不是说网站消失了，它可以工作甚至通过我电脑上的代理。他会以某种方式阻止我提出太多要求吗？我怎样才能再次输入？

谢谢，丹

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T18:51:52.430

是的。如果不让所有者解除对您的阻止或更改您的 IP 地址（使用代理时会发生这种情况），则无法解决问题。

您现在已经吸取了教训，不要对其他人的网站这样做。他们生气并阻止你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T18:52:02.743

> 现在，即使在我关闭应用程序后，网站也没有加载，它说该网站花了很多时间来响应......（所有浏览器），如果我的朋友尝试进入，它并不是说网站消失了，它可以工作甚至通过我电脑上的代理。他会以某种方式阻止我提出太多要求吗？

好吧，是的，您的代码基本上模拟了[拒绝服务攻击](http://en.wikipedia.org/wiki/Denial-of-service_attack)- 任何体面的提供商迟早会阻止您。

# node.js - 渲染 ejs 模板

> ID：10356224
> 
> 赞同：7
> 
> 时间：2012-04-27T18:49:24.820
> 
> 标签：node.js, ejs

我在 nodejs 中有以下代码（我读取 temp.ejs 文件并将内容作为 ejsHtml 作为字符串获取）：

```
var html = EJS.render(ejsHtml, { A: '<div>smth</div>' } ); 
```

在 temp.ejs 中：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
    "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
    <title></title>
</head>
<body>
      <%= A %>
</body>
</html> 
```

输出：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
    "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
    <title></title>
</head>
<body>
      &lt;div&gt; smth &lt;/div&gt;
</body>
</html> 
```

请告诉我如何获取 Html 而不是那个

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-04-28T01:14:21.703

要输出**转义**的 html，请执行以下操作：

```
<%= code %> 
```

要输出未**转义**的 html，您将使用以下内容

```
<%- code %> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-06-25T13:03:41.717

我用下划线来帮助我。只有`<%=`或`<%-`没有工作。

```
<%- _.unescape( data.textWithHtml ) %> 
```

# osgi - 使用 DS 的 OSGi 中的动态目标查询

> ID：10356226
> 
> 赞同：6
> 
> 时间：2012-04-27T18:49:27.887
> 
> 标签：osgi

当我在 DS 中使用引用时，我可以指定一个目标，让我可以缩小我想要的服务实例的范围。问题是所有示例都显示了必须在代码时完成的静态查询。有没有办法进行动态查询（也许从配置管理中提取一个属性）？

如果 DS 不支持这个，是否有另一个 OSGi 依赖注入框架（蓝图、iPojo 等）支持这个？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-27T19:36:46.487

您始终可以使用引用的目标属性来执行第一级过滤器。如果您的绑定方法具有签名

```
void <method-name>(<parameter-type>, Map); 
```

然后，您可以在包含服务属性的地图上运行任何动态过滤器。如果过滤器不匹配，您可以忽略该组件（暂时。）

在替代方案中，由于组件的配置可以包含引用的目标过滤器，因此您可以修改组件的配置以更改目标过滤器。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-30T02:58:30.183

我使用以下技巧。如果您在服务引用上指定“target”属性但将其值保留为*空字符串*，则在运行时将使用具有相同名称但后缀为“.target”的组件属性。

在下面的示例中，我通过我的 Karaf 容器中的 .cfg 文件动态选择我的 JDBC 源。“datasourcefactory.target”属性会自动注入到“datasourcefactory”引用的“target”属性中。

警告：我实际上不知道这个技巧是官方支持还是只是 Felix SCR 功能。我一直想在规范中查找它，看看是否提到它... +1 任何澄清其合法性的评论！

```
 @Component(
            name = "...",
            specVersion = "1.1",
            policy = ConfigurationPolicy.REQUIRE,
            metatype = true
    )
    @Property(name = "dataSourceFactory.target",
            value = "",
            label = "dataSourceFactory target",
            description = "An OSGi service filter to select the data source provider. "+
                    "For example: '(&(osgi.jdbc.driver.name=derby)(objectClass=org.osgi.service.jdbc.DataSourceFactory))' where 'derby' is the important bit and the rest is boilerplate. "+
                    "See DataSourceFactory.OSGI_JDBC_DRIVER_(NAME,CLASS,VERSION)."
    )
    @Reference(
            name = "dataSourceFactory",
            referenceInterface = org.osgi.service.jdbc.DataSourceFactory.class,
            cardinality = ReferenceCardinality.MANDATORY_UNARY,
            target = "", // must be overwritten by configuration property named "dataSourceFactory.target"
            bind = "bindDataSourceFactory",
            unbind = "unbindDataSourceFactory"
    ) 
```

# php - mysql 用 LIKE 和 LIMIT 逐一查询字符串单词的结果

> ID：10356228
> 
> 赞同：1
> 
> 时间：2012-04-27T18:49:35.040
> 
> 标签：php, mysql

正如我们所知，MySQL 可以通过 LIKE 和 LIMIT 获得结果，但我的问题是我们如何在数据库中逐个搜索字符串的某些单词并显示结果而不重复？

我的方法是，例如，当用户搜索“a book for php and mysql”时，我们在 For 循环中发送查询，逐字发送到 DB：

```
SELECT * FROM table WHERE title LIKE %i% LIMIT 5 
```

但是这段代码只显示重复的结果，实际上对于每个单词它显示 5 个结果，然后为另一个单词显示另外 5 个结果，并且...我需要一个一个地搜索 db 单词，但最后只显示 5 个匹配结果而不重复！对不起我糟糕的英语:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T19:37:22.500

我一直在阅读评论和你的问题，我认为你需要一点 PHP 来准备你的 MySql 语句，以及一个 Mysql 查询来获取限制在前 5 个没有重复项的匹配结果？

*如果是这样！！*

**PHP**

```
<?php
  $searchFieldData = $_POST['search'];
  $searchArr = explode(" ", $searchFieldData);

  $sqlWhere = '';
  $count = count($searchArr);
  foreach ($searchArr as $or) {
    $sqlWhere.= " title LIKE '%".$or."%' ";
    if ($count>1) $sqlWhere.= " OR ";
    $count--;
  }

  $query = "SELECT col1, col2, ... FROM table WHERE ".$sqlWhere." LIMIT 5";
?> 
```

**上面的代码将返回搜索词：** “超级超级查询爬虫”

*SELECT col1, col2, ... FROM table WHERE title LIKE '%super%' OR title LIKE '%hyper%' OR title LIKE '%query%' OR title LIKE '%crawler%' LIMIT 5*

* * *

**现在为 MYSQL 魔法**

如果您不想要任何重复的结果，只需使用：*GROUP BY 'title'*

您的最终查询将是：

```
$query = "SELECT col1, col2, ... FROM table WHERE ".$sqlWhere." GROUP BY 'title' LIMIT 5"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T18:53:11.607

我想你想要这样的东西：

```
SELECT col1, col2, ...
FROM table
WHERE title LIKE '%a%' OR title LIKE '%b%' OR title LIKE '%c%'
LIMIT 5 
```

笔记：

*   `LIKE '%xxx%'`对于大型数据集，使用速度很慢。考虑改用索引全文搜索。
*   搜索“a”或“the”之类的词可能会给出很多无用的匹配项。考虑使用停用词列表或其他方法来提高匹配的相关性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T20:00:36.277

您想仅通过 MySQL 来实现吗？我用**PHP**展示了一个：

```
$result = array();
$excludeIds = array(); //store recored id already got
$words = explode(" ", $_POST['input']);
foreach($words as $word) {

  //if there is no 'id' column, use another one instead
  $condForNoDup = ($excludeIds) ?
    "AND id NOT IN (".implode(',', $excludeIds).")" : "";

  $word = '%'.mysql_real_escape_string($word).'%';
  $sql = "SELECT * FROM table
          WHERE title LIKE '{$word}' {$condForNoDup}
          LIMIT 5";

  //executeQuery() returns array which has 'id' as key
  if($_result = executeQuery($sql)) {
    $excludeIds = array_merge($excludeIds, array_keys($result));
    $result = array_merge($result, $_result);
  }
}
print_r($result); 
```

尴尬...我也想知道只有 MySQL 的聪明答案:)

# facebook - 如何在 Facebook API 中检索用户新收到的评论？

> ID：10356229
> 
> 赞同：0
> 
> 时间：2012-04-27T18:49:41.600
> 
> 标签：facebook, facebook-graph-api, facebook-fql

我的应用程序需要监控朋友对用户的评论。我需要检索用户的新评论。我阅读了 Graph API 和 FQL 文档以及一些搜索（包括这个问题[Can the facebook API fetch only NEW comments?](https://stackoverflow.com/questions/5712377/can-the-facebook-api-fetch-only-new-comments),but)仍然不知道如何实现这一点。

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T07:21:32.780

在不知道帖子 ID 的情况下，您无法检索其他用户对当前用户帖子的评论列表。因此，除非您知道这些帖子是什么，否则您不能请求“将其他用户对 Peter 的帖子发表的所有评论给我”。这是因为 FQL[注释表](https://developers.facebook.com/docs/reference/fql/comment/)中的“fromid”字段不可索引。

我不知道这是否与您的应用相关，但您*可以*这样做：检索在当前用户墙上发表评论的人的姓名和 ID。也就是说，请求“给我所有在彼得墙上发表评论的人的姓名，并将这些评论也显示给我”。

FQL 调用是

```
SELECT post_id, message, actor_id FROM stream WHERE source_id = me() AND type=56 
```

在哪里

```
"message" is the comment
"actor_id" is who posted it
"type=56" means only include posts on wall from another user. 
```

查看 FQL[流](https://developers.facebook.com/docs/reference/fql/stream/)表。

由于您说您的应用需要*监控*评论，因此您需要投票 Facebook，或订阅[实时更新](https://developers.facebook.com/docs/reference/api/realtime/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T19:24:26.047

我想出了如何编写 FQL 以获得我想要的信息。

```
SELECT comments,post_id,source_id ,created_time,message,action_links,attachment,permalink,description,type FROM stream WHERE source_id = me() AND comments.count>0 AND actor_id=me() 
```

感谢 Gunnar Karlsson 我从用户流中获得评论，并检查每个流是否有评论并检查评论是否记录在数据库中。

# gimp - gimp 是否允许您设置指导方针？

> ID：10356232
> 
> 赞同：0
> 
> 时间：2012-04-27T18:50:03.680
> 
> 标签：gimp

我想开始开发画布 html5 游戏，但我需要制作 Sprites。我需要一个程序来放置引导线并读取坐标。Gimp会裁员吗？如果不是，我的选择是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T18:57:49.847

*Gimp 允许您在Image > Guides*下按百分比或像素设置参考线。

AFAIK，当前像素坐标显示在绘图窗口的左下角。

我以前用 Gimp 来绘制像素艺术，效果很好，我认为它可以很好地用于 sprite 工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T19:08:11.770

我已经使用 GIMP 和 Photoshop Elements 来使用图层上的指南和网格来创建精灵。两者都有效，我更喜欢 Photoshop Elements，但这是一个非常私人的问题。我尝试了一些“精灵构建”软件包，最后发现它们并没有太大帮助，但 YMMV 对此没有太大帮助。

诀窍是要有一个良好的工作流程。我从单个图像中的动画关键帧开始，然后移动到一个精灵表，我将在其中设置指南并捕捉到精灵大小值并根据需要放置它们。我还保留了背景图层以标记对齐方式，因为当您为游戏拼合图像时，您始终可以将它们关闭。

设置好网格后，您可以制作每个关键帧的平面副本，将它们捕捉到一个帧上，然后处理每个连续的动画。一定要清楚地命名你的图层，并在相关的地方进行分组，这样工作空间就不会失控。

这不是唯一的方法，它取决于你追求的风格。您几乎可以使用任何东西（甚至是 MSPaint！），但如果您花时间设置环境并充分利用图层来排列所有内容，那么 GIMP 和 Photoshop Elements 都绰绰有余。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-05-22T17:50:00.280

老实说，我更喜欢 Corel Draw 来完成类似的工作，因为您不仅可以通过 x,y 坐标设置参考线，还可以以相同的方式移动形状。另外，它都是矢量，所以你可以制作你喜欢的任何尺寸的像素艺术。

# python - 如何检查 blobstore 文件是否可读

> ID：10356233
> 
> 赞同：0
> 
> 时间：2012-04-27T18:50:04.277
> 
> 标签：python, google-app-engine, blobstore

如何检查[用于写入的 blobstore 文件是否](https://developers.google.com/appengine/docs/python/blobstore/overview?hl=pl#Writing_Files_to_the_Blobstore)已完成并准备好读取？

我是要尝试打开文件并捕获`FinalizationError`，尝试`get_blob_key`还是有`files.is_readable(blobstore_file_name)`方法？

更新：

我似乎写了一个令人困惑的问题，所以我会画一张背景图片。

我正在使用具有多个后台任务的[文件 api生成文件。](https://developers.google.com/appengine/docs/python/blobstore/overview?hl=pl#Writing_Files_to_the_Blobstore)该文件在最终确定之前是不可读的。

我想显示正在生成的文件列表，并在它们准备好时显示每个文件的下载链接。

将布尔属性“finalized”添加到引用这些文件的实体只是为了表明后台进程已经完成，听起来很傻。

在其他情况下，我想检查文件的状态，而不是中继自己为每个最终文件存储一个指标。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T20:38:11.563

实际上，`FinalizationError`只能在调用时抛出，所以很可能你在尝试文件`finalize()`时无法得到它。`open()`

完成文件编写后，您可以调用`finalize()`或使用`close(finalize=True)`：

```
with files.open(file_name, 'a') as f:
    f.write(file_data)
    f.close(finalize=True) 
```

之后您的文件应该可供阅读。

如果您在使用这种方法时遇到任何问题，请告诉我们。

# html - 如何让 emacs 仅在打开 php/html 文件时才加载 nXhtml 并防止它在启动时加载

> ID：10356238
> 
> 赞同：3
> 
> 时间：2012-04-27T18:50:19.953
> 
> 标签：html, emacs, nxhtml

因此，为了优化 emacs 启动时间，我更喜欢将所有 mod 封装在一个 hook 或一个 eval-after-load 中。所以我想出了python、cpp和latex，但我被nXhtml困住了。我尝试了以下方法：

```
(eval-after-load "HTML-mode"
'(progn
(load-file "~/.emacs.d/plugins/nxhtml/autostart.el")
)) 
```

这根本不起作用。

编码 ：

```
(add-hook 'html-mode-hook (lambda()
(progn
  (load-file "~/.emacs.d/plugins/nxhtml/autostart.el")
))) 
```

加载 nXhtml 的某些部分，但 nXhtml 模式未打开（仅 SGML 和 AC），因此在我的 php 源代码中范围的颜色没有不同，或者自动完成/括号完成不起作用。

它正常工作的唯一方法是让它在启动时加载。

查看跟踪，在启动期间加载 nxhtml 时，它说：

> “majmodpri-apply-priorities running ...（完成）”

但是，当负载由 html-mode-hook 或 eval-after-load 封装时，跟踪会显示：

> “majmodpri-apply-priorities running ... MU:majmodpri-check 更改 majmodpri-apply-priorities: buffer=index.php, html-mode,nil => sgml-mode,nil majmodpri-apply-priorities running ... (完毕）”

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T22:28:28.877

我认为 nXhtml 的自动启动文件（这就是您要加载的所有文件）被设计为相当小，因此您可能无法在不限制其某些功能的情况下进一步减少它？

实际需要多长时间？看起来应该记录了“Nxml/Nxhtml Autostart.el 在 %.1f 秒内加载”消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T19:07:24.383

Infact`html-mode`在 sgml-mode.el 文件中定义。

所以你`eval-after-load`应该如下

```
(eval-after-load "sgml-mode" (lambda ()
;;;  code to load your nxhtml
                               )) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-28T06:21:34.600

在编写 ROR 应用程序时，我还使用 nxhtml-mode 来编辑 erb 文档。看看我的配置，可能对你有帮助。

```
(autoload 'eruby-nxhtml-mumamo-mode "autostart.el" "Edit erb document." t)
(add-to-list 'auto-mode-alist '("\\.erb" . eruby-nxhtml-mumamo-mode)) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-18T17:08:12.087

我只是结合了 OP 代码，它对我有用：

```
(add-hook 'html-mode-hook (lambda()
(progn
  (load-file "~/.emacs.d/vendor/~nxhtml/nxhtml/main/autostart.el")
))) 
```

# c# - Windows 桌面 ScreenMarker

> ID：10356244
> 
> 赞同：1
> 
> 时间：2012-04-27T18:50:39.563
> 
> 标签：c#, java, c++, .net, windows

我想制作一个工具，使用户能够与 Windows 进行交互，让用户能够在任何窗口上进行书写、制作形状、截取区域截图、擦除等，同时能够与如果激活了选择工具，则显示相同的窗口。

你会推荐我使用什么语言？我正在考虑将 JAVA 与 JNI 或 .NET 与 c# 或 c++ 一起使用。解决这个问题的最简单方法是什么？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T18:55:36.397

为了便于编码，我建议使用带有 C# 的 .NET。

Win32 图形系统中有很多钩子可以在 .NET API 中使用。当然，它只能在 Windows 操作系统上运行，但看起来你可以接受。

# python - 在全屏模式下强制设置 wx.Python 中的分辨率

> ID：10356245
> 
> 赞同：0
> 
> 时间：2012-04-27T18:50:47.190
> 
> 标签：python, wxpython

我正在 wx.Python 中制作一个设置为全屏的程序，但我有一个关于屏幕分辨率的未解决问题。

我知道如何检测窗口的大小，并按比例设置项目的位置。我的程序目前正在这样做。

但是，无论显示分辨率如何，是否可以强制全屏以我选择的固定分辨率显示？（如果是这样，我可以制作一个宽屏和一个全屏布局来覆盖所有人。）

我一直在寻找解决方案，但找不到线索！也许在 wx.Python 中根本不可能。但如果没有，谁能指出我正确的方向？

感谢您的时间！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T20:30:23.120

我认为你的提议是不可能的。如果显示器的分辨率设置为 1900x1600，并且您将应用设置为以 800x600 运行，则应用将不会全屏显示。您不能全屏并且低于显示器的分辨率。而且我认为，如果您希望您的应用程序可用，您的应用程序不能大于显示器的最大分辨率。

你可以设置框架的大小吗？当然可以。当您实例化框架时，您会这样做。能不能全屏？是的。框架对象有一个名为 ShowFullScreen() 的方法就是为了这个目的。您也可以使用样式标志对其进行一些修改。另请参阅[http://wiki.wxpython.org/Using%20Frame.ShowFullScreen](http://wiki.wxpython.org/Using%20Frame.ShowFullScreen)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T22:16:24.357

实际上，您可以强制使用特定的视频模式/分辨率。根据您的显示器/驱动程序，结果（在 LCD 屏幕上）可能会放大以填充显示器或显示在屏幕的子矩形中（例如信箱）。但是，这实际上可能不是您想要的，除非您需要特定的输出分辨率——例如，用于视频捕获或输出到特定设备。执行此操作的 wxPython 代码类似于：

```
display = wx.Display(0)  # if you have multiple monitors, use its index
desired_mode = wx.VideoMode(width, height, color_depth)
supported_modes = display.GetModels(desired_mode)
if len(supported_modes) > 0:
    display.ChangeMode(supported_modes[0]) # just use the first match for now 
```

# xpages - 如何为 xpages 应用程序正确保留外部数据库连接对象（外部数据库服务器 = MongoDB、OrientDB、Apache SOLR）

> ID：10356246
> 
> 赞同：1
> 
> 时间：2012-04-27T18:50:47.710
> 
> 标签：xpages

请帮助我详细说明如何正确保持外部数据库连接对象（外部数据库服务器 = MongoDB、OrientDB、Apache SOLR）。对于我们的 xPages 应用程序，我们无法正确解析其相当笼统的概念。当像数据库一样连接到外部服务时，您必须在应用程序启动/首次使用时创建连接对象，并在应用程序生命周期内保持共享（出于性能原因，使用一些池机制）（我的意思是单例模式）。事情来了，我不确定。在类似 servlet 的环境中，通常使用 servlet 侦听器事件来正确连接和断开数据库。但是如何在 xPages 环境中做到这一点？ApplicationScope 似乎很合适，但我找不到如何附加应用程序生命周期以正确断开与外部数据库的连接的方法。

根据 JSF 文档，托管 bean 应该支持托管 bean LifeCycle 注释 @PostConstruct 和 @PreDestroy 可以很好地解决这个问题。但它在 xPages 中不起作用......请参阅下面的故事。它已报告给 IBM 并被接受为将来要修复但尚未修复的错误。...您是否有任何提示如何正确操作，如何连接和断开分机。在应用程序重新启动、自动卸载等情况下可以正常工作的数据库？

[http://www-10.lotus.com/ldd/xpagesforum.nsf/topicThread.xsp?documentId=131569D202C110E185257958005B0A7B&action=openDocument](http://www-10.lotus.com/ldd/xpagesforum.nsf/topicThread.xsp?documentId=131569D202C110E185257958005B0A7B&action=openDocument)

谢谢你，大卫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T02:51:15.753

@PostConstruct 和 @PreDestroy 不是 JSF1.2 的一部分。也许你应该看看 ExtLib 中当前的 JDBC 连接器是如何实现的，并为其他类型的 DB 使用相同的逻辑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T12:50:53.750

我刚刚找到了这里描述的解决方案[http://hasselba.ch/blog/?p=740](http://hasselba.ch/blog/?p=740) ...

# matlab - 在霍夫变换后检测相交线

> ID：10356249
> 
> 赞同：3
> 
> 时间：2012-04-27T18:50:51.310
> 
> 标签：matlab, hough-transform, line-intersection, parametric-equations

在 Matlab 中使用霍夫变换，检测到一些线条。使用这些线的端点我已经绘制了它们。当我拥有所有变量时，我无法理解如何找到相交线。

```
Line7
Point1 [50,66]
Point2 [11,106]
theta,rho [45,81]

Line9
Point1 [19,83]
Point2 [53,79]
theta,rho [82,84] 
```

由于参数方程如下

```
 rho = xCos(theta) + ySin(theta) 
```

我不确定如何解决这个问题。有了所有这些信息，必须有一种快速的方法来查找线是否相交，如果相交，点也一样。

非常感谢任何指导。

```
function FindHoughLines(I,filename)
[H,T,R] = hough(I);
rotI = imrotate(I,0,'crop');
imshow(H,[],'XData',T,'YData',R,...
            'InitialMagnification','fit');
xlabel('\theta'), ylabel('\rho');
axis on, axis normal, hold on;
P  = houghpeaks(H,10,'threshold',ceil(0.1*max(H(:))));
x = T(P(:,2)); y = R(P(:,1));
 plot(x,y,'s','color','white');
% Find lines and plot them
lines = houghlines(I,T,R,P,'FillGap',5,'MinLength',7);
 figure, imshow(rotI), hold on
max_len = 0;
for k = 1:length(lines)
    if(isField(lines,'point1') ~= 0)               
   xy = [lines(k).point1; lines(k).point2];
    plot(xy(:,1),xy(:,2),'LineWidth',2,'Color','green');

   % Plot beginnings and ends of lines
   plot(xy(1,1),xy(1,2),'x','LineWidth',2,'Color','yellow');
   plot(xy(2,1),xy(2,2),'x','LineWidth',2,'Color','red');
   text(xy(1,1),xy(1,2),[ num2str(k)],'HorizontalAlignment','center','BackgroundColor',[.7 .9 .7]);
   % Determine the endpoints of the longest line segment
   len = norm(lines(k).point1 - lines(k).point2);
   if ( len > max_len)
      max_len = len;
      xy_long = xy;
   end
    end
end 
```

![线条](../Images/261442c341c5d1ffd136de76e7375c53.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T19:13:13.773

想到的最直接的方法是将所有检测到的线转换为笛卡尔坐标，使用

```
y = -ctg(theta) + r/sin(theta) 
```

然后使用标准检测程序，例如 [http://en.wikipedia.org/wiki/Bentley–Ottmann_algorithm](http://en.wikipedia.org/wiki/Bentley%E2%80%93Ottmann_algorithm)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T19:04:43.873

你想要*线*或*线段*的交叉点吗？例如，假设您的一条线段具有端点 (1,0) 和 (2,0)，而另一条线段具有端点 (0,1) 和 (0,2)；您是否要计算（0,0）处的交叉点？

您是否需要有效地处理线数众多的情况并找到它们的所有交点，或者考虑所有线对并逐个检查它们是否可以？

最简单的情况是只考虑线对是否可以，并且线（与线段相反）交叉点是否足够好。然后对于每对线，您只需求解两个联立线性方程：aX+bY=c，dX+eY=f。这是非常标准的做法；它相当于反转一个 2x2 矩阵。

如果您需要注意交叉点何时实际上不在给定的线段内，这里有几种方法。(1) 首先是上述交叉点，然后检查它是否位于每个给定段内。您可以通过选择一个坐标（例如 x 坐标）并查看它是否位于两个端点的 x 坐标之间来做到这一点。当然，您不能将 x 坐标用于垂直线，也不应将其用于近乎垂直的线；最好选择系数较大的坐标。(2) 将线参数化写为 (x,y)=(x1,y1)+t(dx1,dx1) 和 (x,y)=(x2,y2)+u(dx2,dy2)；现在代替 x,y 的联立方程你有 t,u 的联立方程；解决这些问题并检查 0 <= t,u <= 1。

如果你需要在有很多行时有效地应对，有这方面的算法；谷歌“线扫描”找到一个很容易理解的标准。

# ios - [NSFetchedResultsController performFetch] 中的错误

> ID：10356250
> 
> 赞同：1
> 
> 时间：2012-04-27T18:50:55.943
> 
> 标签：ios, core-data, nsfetchedresultscontroller

调用 [self.fetchedResultsController performFetch] 时出现以下错误。

*** 由于未捕获的异常 'NSInvalidArgumentException' 导致应用程序终止，原因：'*** -[NSFileManager fileSystemRepresentationWithPath:]：/Users/ivanevf/Library/Application Support/iPhone Simulator/5.1/Applications/0EF75071-5C99-4181-8D4D- 的转换失败4437351EC1F4/Library/Caches/.CoreDataCaches/SectionInfoCaches/0

这是初始化控制器后我在控制器上进行的第一次调用。初始化如下所示：

```
- (NSFetchedResultsController *)fetchedResultsController
{
   if (_fetchedResultsController != nil) {
      return _fetchedResultsController;
 }

// Create and configure a fetch request with the Book entity.
NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
NSEntityDescription *entity = [NSEntityDescription entityForName:@"Conversation" inManagedObjectContext:self.objectContext];
[fetchRequest setEntity:entity];

// Create the sort descriptors array.
NSSortDescriptor *msgAgeDescriptor = [[NSSortDescriptor alloc] initWithKey:@"message" ascending:NO comparator:^NSComparisonResult(id obj1, id obj2) {
  // some code
}];
NSArray *sortDescriptors = [[NSArray alloc] initWithObjects:msgAgeDescriptor, nil];

[fetchRequest setPredicate:[self fetchPredicate]];
[fetchRequest setSortDescriptors:sortDescriptors];
NSString *cacheName = [NSString stringWithFormat:@"%d%Conversation%d", self.viewType, self.location.bid];
// Create and initialize the fetch results controller.
_fetchedResultsController = [[NSFetchedResultsController alloc] initWithFetchRequest:fetchRequest managedObjectContext:self.objectContext sectionNameKeyPath:nil cacheName:cacheName];
_fetchedResultsController.delegate = self;

return _fetchedResultsController;
} 
```

知道这里发生了什么吗？谢谢！

ps 我尝试了一些随机的事情：1.从模拟器中删除应用程序目录。(/Users/ivanevf/Library/Application Support/iPhone Simulator/5.1/Applications/0EF75071-5C99-4181-8D4D-4437351EC1F4) 2.注释掉setPredicate,setSortDescriptors行方法调用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T20:13:38.900

看起来你在`cacheName`. 尝试：

```
NSString *cacheName = [NSString stringWithFormat:@"%dConversation%d",
                                                 self.viewType,
                                                 self.location.bid]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T03:18:54.583

我试试这个， NSString *cacheName = [NSString stringWithFormat:@"%d%Conversation%d", 1, 2]; 它抛出：1onversation9283099

这是一个普通的字符串，没什么奇怪的。

# objective-c - 更改传递给函数的 NSString 的值

> ID：10356251
> 
> 赞同：0
> 
> 时间：2012-04-27T18:50:56.140
> 
> 标签：objective-c, cocoa-touch, variables

我已经设置好声音并且播放正常，但我想根据`NSString`. 这是我的代码：

```
- (void) playSound {
    CFBundleRef mainBundle = CFBundleGetMainBundle();
    CFURLRef soundFileURLRef;
    soundFileURLRef =CFBundleCopyResourceURL(mainBundle, (CFStringRef) @"glass", CFSTR ("wav"), NULL);
UInt32 soundID;
    AudioServicesCreateSystemSoundID(soundFileURLRef, &soundID);
    AudioServicesPlaySystemSound(soundID);
} 
```

我想`@"glass"`成为来自其他地方的字符串的值，它的定义如下`NSString *sound = @"newSound";`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T19:26:43.377

我会这样做：

将此添加到您的头文件中：

```
typedef enum {
    GlassSound,
    NewSound,
} SoundEffect; 
```

将此添加到实现块中

```
- (void)playSound:(SoundEffect)soundEffect {
    NSString *sound = nil;
    switch (soundEffect) {
        case Glass:
            sound = @"glass.wav";
            break;
        case newSound:
            sound = @"newSound.wav";
            break;
        default:
            break;
    }

    if (sound != nil) {
        CFBundleRef mainBundle = CFBundleGetMainBundle();
        CFURLRef soundFileURLRef;
        soundFileURLRef =CFBundleCopyResourceURL(mainBundle, (CFStringRef) sound, NULL);
        UInt32 soundID;
        AudioServicesCreateSystemSoundID(soundFileURLRef, &soundID);
        AudioServicesPlaySystemSound(soundID);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T19:13:32.930

怎么样：

```
- (void) playSound:(NSString *)soundFile {
    CFBundleRef mainBundle = CFBundleGetMainBundle();
    CFURLRef soundFileURLRef;
    soundFileURLRef =CFBundleCopyResourceURL(mainBundle, (CFStringRef) soundFile, CFSTR ("wav"), NULL);
    UInt32 soundID;
    AudioServicesCreateSystemSoundID(soundFileURLRef, &soundID);
    AudioServicesPlaySystemSound(soundID);
} 
```

有许多不同的方法可以做到这一点。您甚至可以将“.wav”作为传入的 soundFile 字符串的一部分，以防您想控制是否打开 .wav 或 .mp3 等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T19:15:58.247

你不能像这样定义方法吗？

```
- (void) playSound:(NSString *)soundName {
    CFBundleRef mainBundle = CFBundleGetMainBundle();
    CFURLRef soundFileURLRef;
    soundFileURLRef =CFBundleCopyResourceURL(mainBundle, (CFStringRef) soundName, CFSTR ("wav"), NULL);
UInt32 soundID;
    AudioServicesCreateSystemSoundID(soundFileURLRef, &soundID);
    AudioServicesPlaySystemSound(soundID);
} 
```

然后调用它来播放不同的声音，例如：-

[soundPlayer playSound:@"glass"];

[soundPlayer playSound:@"newSound"];

# asp.net-mvc - System.Web.Optimization 与 Microsoft.Web.Optimization

> ID：10356253
> 
> 赞同：8
> 
> 时间：2012-04-27T18:51:17.940
> 
> 标签：asp.net-mvc

这些名称空间以某种方式相互关联，但我不明白其中的区别以及何时需要其中一个？！

谁能向我解释一下？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-27T19:12:52.587

Microsoft.Web.Optimization 命名空间已在 Microsoft.Web.Optimization 包的 1.0.0-beta 版本中替换为 System.Web.Optimization。System.Web.Optimization 命名空间将包含在 System.Web.dll 中，用于 .NET 4.5 Framework 版本（根据[预览](http://msdn.microsoft.com/en-us/library/system.web.optimization%28v=vs.110%29.aspx)文档）。

# lotus-notes - Domino 文件上传控件可以将其附件放在特定字段中吗？

> ID：10356255
> 
> 赞同：2
> 
> 时间：2012-04-27T18:51:24.687
> 
> 标签：lotus-notes, lotus-domino, attachment

我有一个经典的 Domino 应用程序（不是 XPages...呃！），它需要有几个文件上传控件，每个控件对应一个特定的字段。如果我使用文件上传控件#1 上传文件，它应该进入（例如）RFS_1，如果我使用控制#2，它应该进入（例如）RFS_2。

由于 Domino 只是将所有文件附加到文档中，因此我看不出有什么明显的方法可以将它们分别放在各自的字段中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T19:21:23.393

不幸的是，没有简单的方法。不过，这里有一些代码可以帮助您在 WebQuerySave 事件期间将文件移动到富文本项：

[http://www.breakpar.com/bkp/home.nsf/0/87256B280015193F87256BC80071114F](http://www.breakingpar.com/bkp/home.nsf/0/87256B280015193F87256BC80071114F)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T08:46:11.253

除了 wqs 中用于移动文件的代码之外，您还可以添加一些额外的字段来控制每个附件的去向。我们之前做的是..

*   在表单上有一些上传控件
*   每个上传控件都有一个富文本字段来保存附件
*   每个上传控件的表单上有一个“type=hidden”字段
*   在上传控件的 onchange 事件中有一些 javascript 将所选文件的文件名写入相应的隐藏文本字段

然后在 wqs 代理中，您可以遍历隐藏字段，在 doc 上找到那些文件附件并将它们写入相应的富文本字段

如果你想让我添加更多细节，请大声喊叫

# backbone.js - 骨干初始化：函数（选项）在 V9 中不起作用

> ID：10356256
> 
> 赞同：10
> 
> 时间：2012-04-27T18:51:24.573
> 
> 标签：backbone.js

我只是将我工作的站点从 Backbone.js 0.5.3 升级到 Backbone.js 0.9.2 当我这样做时，我在我的模型初始化方法中使用的选项参数得到一个未定义的。从 V.5 到 V.9 的变化

初始化：函数（选项）{ `enter code here` }

好的，这是我的模型结构。在 0.5.3 中一切正常，但是当我使用 0.9.2 选项时不再起作用。

```
this.myModel = Backbone.Model.extend({

        defaults: function() {
            return {
                maxDays: 7,
                index: 0

            };
        },

        initialize: function( options ) {

        }

})

this.model = new myModel(); 
```

在 0.5.3 版本中，选项将显示在默认对象中设置的所有属性。但在 0.9.2 版中，这不再有效，它返回未定义。由于客户敏感，我无法发布链接。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-27T18:57:41.313

我相信从 0.5 到 0.9 的初始化签名保持不变。但是，只有将选项传递给构造函数才能获得传入的选项。查看[Backbone.Model 的注释源](http://documentcloud.github.com/backbone/docs/backbone.html)。每当您实例化一个新模型实例时，构造函数都会执行以下操作：

```
this.initialize.apply(this, arguments); 
```

所以你传递给构造函数的任何东西都会未经修改地传递给初始化。因此，在您的代码中查看您正在实例化新模型实例但未传递 2 个参数（属性和选项）的情况。

根据您的代码示例，您现在需要定义`initialize`为采用 2 个参数：`attributes`并且`options`在创建模型时，如果您只想传递选项，请执行以下操作：

```
var model = new Model(null, options); 
```

或者

```
var model = new Model({}, options); 
```

我认为破坏您的代码的具体更改是从 0.5.3 中使用显式参数调用初始化到使用 0.9.3 中的应用和参数，如下所示：

```
 this.initialize.apply(this, arguments); 
```

因此，在 0.9 中，您可以通过 访问您的默认值`this.attributes`，但它们不会作为函数参数出现，除非它们作为构造函数的参数出现。

```
var MyModel = Backbone.Model.extend({
    defaults: {x: 42, y: 43},
    initialize: function(attributes, options) {
        console.log(arguments, attributes, this.attributes);}
});
var m = new MyModel(); 
```

这将记录`[], undefined, Object`，因为参数是空的，属性是未定义的，因为没有任何东西传递给构造函数，但是已经设置了默认值`this.attributes`并且可以使用。

# java - 如何将 org.w3c.dom.Document 对象转换为字符串？

> ID：10356258
> 
> 赞同：97
> 
> 时间：2012-04-27T18:51:31.473
> 
> 标签：java, xml, document

我想将 org.w3c.dom.Document 对象转换为字符串。我正在使用 Java 6，并且愿意使用任何（完全免费的）能够胜任任务的技术。我尝试了这个线程的解决方案——[有没有比这段代码更优雅的方式将 XML 文档转换为 Java 中的字符串？](https://stackoverflow.com/questions/315517/is-there-a-more-elegant-way-to-convert-an-xml-document-to-a-string-in-java-than), 他们在哪里

```
DOMImplementationLS domImplementation = (DOMImplementationLS) doc.getImplementation();
LSSerializer lsSerializer = domImplementation.createLSSerializer();
String html = lsSerializer.writeToString(doc); 
```

但是遇到了以下可怕的异常……</p>

```
org.w3c.dom.DOMException: DOM method not supported
    at org.w3c.tidy.DOMDocumentImpl.getImplementation(DOMDocumentImpl.java:129)
    at com.myco.myproj.cleaners.JTidyCleaner.outputDocAsString(JTidyCleaner.java:74)
    at com.myco.myproj.cleaners.JTidyCleaner.parse(JTidyCleaner.java:63)
    at com.myco.myproj.util.NetUtilities.getUrlAsDocument(NetUtilities.java:51)
    at com.myco.myproj.parsers.AbstractHTMLParser.getEventFromElement(AbstractHTMLParser.java:131)
    at com.myco.myproj.parsers.AbstractHTMLParser.parsePage(AbstractHTMLParser.java:100)
    at com.myco.myproj.parsers.AbstractHTMLParser.getEvents(AbstractHTMLParser.java:63)
    at com.myco.myproj.domain.EventFeed.refresh(EventFeed.java:87)
    at com.myco.myproj.domain.EventFeed.getEvents(EventFeed.java:72)
    at com.myco.myproj.parsers.impl.ChicagoCouncilGlobalAffairsParserTest.testParser(ChicagoCouncilGlobalAffairsParserTest.java:21)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:44)
    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:41)
    at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)
    at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)
    at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:74)
    at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:83)
    at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:72)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:231)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:193)
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:52)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:191)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:42)
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184)
    at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
    at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:71)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:236)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:174)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197) 
```

* * *

## 回答 #1

> 赞同：96
> 
> 时间：2012-04-27T18:56:25.087

使用类似的东西

```
import java.io.*;
import javax.xml.transform.*;
import javax.xml.transform.dom.*;
import javax.xml.transform.stream.*;

//method to convert Document to String
public String getStringFromDocument(Document doc)
{
    try
    {
       DOMSource domSource = new DOMSource(doc);
       StringWriter writer = new StringWriter();
       StreamResult result = new StreamResult(writer);
       TransformerFactory tf = TransformerFactory.newInstance();
       Transformer transformer = tf.newTransformer();
       transformer.transform(domSource, result);
       return writer.toString();
    }
    catch(TransformerException ex)
    {
       ex.printStackTrace();
       return null;
    }
} 
```

* * *

## 回答 #2

> 赞同：92
> 
> 时间：2012-04-27T18:56:34.943

如果你可以进行改造，你可以试试这个。

```
DocumentBuilderFactory domFact = DocumentBuilderFactory.newInstance();
DocumentBuilder builder = domFact.newDocumentBuilder();
Document doc = builder.parse(st);
DOMSource domSource = new DOMSource(doc);
StringWriter writer = new StringWriter();
StreamResult result = new StreamResult(writer);
TransformerFactory tf = TransformerFactory.newInstance();
Transformer transformer = tf.newTransformer();
transformer.transform(domSource, result);
System.out.println("XML IN String format is: \n" + writer.toString()); 
```

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2018-08-01T09:26:35.037

这对我有用，如[本页所述](http://www.java2s.com/Tutorials/Java/XML_HTML_How_to/DOM/Convert_DOM_Document_to_String.htm)：

```
TransformerFactory tf = TransformerFactory.newInstance();
Transformer trans = tf.newTransformer();
StringWriter sw = new StringWriter();
trans.transform(new DOMSource(document), new StreamResult(sw));
return sw.toString(); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-07-06T17:32:58.200

基于 Zaz 答案的 Scala 版本。

```
 case class DocumentEx(document: Document) {
    def toXmlString(pretty: Boolean = false):Try[String] = {
      getStringFromDocument(document, pretty)
    }
  }

  implicit def documentToDocumentEx(document: Document):DocumentEx = {
    DocumentEx(document)
  }

  def getStringFromDocument(doc: Document, pretty:Boolean): Try[String] = {
    try
    {
      val domSource= new DOMSource(doc)
      val writer = new StringWriter()
      val result = new StreamResult(writer)
      val tf = TransformerFactory.newInstance()
      val transformer = tf.newTransformer()
      if (pretty)
        transformer.setOutputProperty(OutputKeys.INDENT, "yes")
      transformer.transform(domSource, result)
      Success(writer.toString);
    }
    catch {
      case ex: TransformerException =>
        Failure(ex)
    }
  } 
```

有了它，您可以执行`doc.toXmlString()`或调用该`getStringFromDocument(doc)`函数。

# html - 在基于 div 的表中对齐不均匀的行

> ID：10356263
> 
> 赞同：0
> 
> 时间：2012-04-27T18:51:56.637
> 
> 标签：html, css, image

我有一个用 div 构建的表格，它使用图像作为单元格数据。如果我有丢失的图像，我想基本上将行中的其他图像居中：

所有图片：

```
xxxxx
xxxxx 
```

缺少图像（第二行 2 个）：

```
xxxxx
 xxx 
```

目前，我只能让结果左对齐：

```
xxxxx
xxx 
```

CSS：

```
.table
{
    margin-top:5px;
    margin-left:15px;
    margin-right:15px;
    display:  table;
    width:auto;
    border-spacing:0px;
}

.row
{
   display:table-row;
   width:auto;
   margin-left:auto;
   margin-right:auto;
}

.cell
{
    float:left;
    display:table-column;
    width:auto;
} 
```

我尝试了行的左/右自动边距，但没有骰子。有什么建议么？

**编辑**

```
 <div class="table">
         <div class="row">
            #if ($has1)
                <div class="cell"><a href="#1"><img src="1.jpg" width="138"/></a></div>
            #end
            #if ($has2)
                <div class="cell"><a href="2"><img src="2.jpg" width="138"/></a></div>
            #end
            #if ($has3)
                <div class="cell"><a href="#3"><img src="3.jpg" width="138"/></a></div>
            #end

        </div>
         <div class="row">
            #if ($has4)
                <div class="cell"><a href="#4"><img src="4.jpg" width="138"/></a></div>
            #end
            #if ($has5)
                <div class="cell"><a href="5"><img src="5.jpg" width="138"/></a></div>
            #end
            #if ($has6)
                <div class="cell"><a href="#6"><img src="6.jpg" width="138"/></a></div>
            #end

        </div>
  </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T20:00:56.883

好的，试试这个：

```
.table
{
    margin-top:5px;
    margin-left:15px;
    margin-right:15px;
    display:  table;
    width:auto;
    border-spacing:0px;
}

.row
{
   display:table-row;
   width:auto;
   margin-left:auto;
   margin-right:auto;
   text-align:center;
}

.cell
{
    /*display:table-column;*/
    display:inline-block;
    width:auto;
}​ 
```

示例：http: [//jsfiddle.net/JARQs/](http://jsfiddle.net/JARQs/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T20:22:53.427

尝试这个：

```
.row
{
   display:table;
   width:auto;
   margin-left:auto;
   margin-right:auto;
   text-align:center;
} 
```

您还可以使用带有 display:table css 和 mantain original .row css 类的容器

# regex - 使用正则表达式获取用户名

> ID：10356264
> 
> 赞同：1
> 
> 时间：2012-04-27T18:52:00.130
> 
> 标签：regex, postgresql

如何使用 RE 获取用户名？例如：

```
User: john_smith

User john_smith

User   john_smith 
```

我需要抓住 john_smith 我试过这个`[ \t]+(User)?[: \t]*([.]+)` 但不能让它工作。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T18:54:09.820

尝试这样的事情：

```
/User:?\s*(\S+)/ 
```

在 postrgres 中，它会是这样的：

```
substring('User: john_smith' from 'User:?\s*(\S+)') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T18:54:54.030

尝试不带前导`[ \t]+`，这意味着“至少一个”。或者使用`[ \t]*`这意味着“尽可能多，也许为零”。

“用户”这个词看起来不是可选的，所以继续`User[: \t]*`。点是一个小丑，匹配每个角色。

因此，将其包含在一个组中是没有意义的。该组的其余部分变得毫无意义，并且没有添加任何内容。因此，组中的点表示字面点。只使用点代替：`(.+)`

```
 [ \t]*User[: \t]*(.+) 
```

# clearcase - 在基本清晰的情况下交付到主要分支

> ID：10356266
> 
> 赞同：1
> 
> 时间：2012-04-27T18:52:02.933
> 
> 标签：clearcase

在 UCM 明确的情况下，当开发人员签入他的开发流中的代码时，他会进行“交付”操作，从而使更改在集成流中可用。

在基本明确的情况下，在开发人员签入代码后，他如何使其在主分支中可用？我知道他可以使用合并管理器合并它，但是有默认的方法吗？合并管理器是一个手动过程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T19:10:33.687

一方面，交付也是一个手动过程。
什么是“自动”是开发人员从子 Stream 合并到的 Stream。
默认情况下，它是父流，如果开发者流是直接子流，它恰好是“集成”流。
请参阅“ [ClearCase 中的集成流与集成视图](https://stackoverflow.com/questions/9880031/integration-stream-vs-integration-view-in-clearcase/9880266#9880266)”。

现在没有简单的方法可以在一个分支（由 Base ClearCase 视图使用）和另一个分支（包括那个`/main`）之间建立清晰的关系。
这就是 UCM 存在的原因：围绕 SCM 流程引入一些最佳实践，例如**[合并工作流](https://stackoverflow.com/questions/216212/how-do-you-maintain-development-code-and-production-code#216228)**（从哪里合并到哪里？）。
这就是为什么从“子分支”合并的官方方式仍然存在[`findmerge`，如文档中所述](http://publib.boulder.ibm.com/infocenter/cchelp/v7r0m0/index.jsp?topic=/com.ibm.rational.clearcase.hlp.doc/cc_main/to_merge_all_branch.htm)。

![合并支行](../Images/a32f1c35f4583927c64f368d6c0ff013.png)

# javascript - 关闭fancybox时如何启用onclick

> ID：10356269
> 
> 赞同：0
> 
> 时间：2012-04-27T18:52:20.617
> 
> 标签：javascript, html, video, fancybox

```
<video controls="controls" width="640" preload="none" poster="{_file.F_FILE_THUMB_IMAGE}" id="{_file.U_PLAYER_ID}" onclick="this.play();this.onclick=null;" /> 
```

打开fancybox时，我正在尝试使用上述内容播放视频。目前它这样做但是当我关闭fancybox然后重新打开它时，由于 this.onclick=null; 视频不会再次播放 部分

没有 this.onclick=null;，每次我点击正在播放的视频时，onclick 都会干扰它，例如。单击暂停按钮时，视频不会暂停。

我需要 onclick="this.play(); 以便视频在 Android 设备上播放。否则当fancybox 弹出时它根本拒绝播放视频。

视频标签中的自动播放不是一个选项，因为所有视频都隐藏在 div 中，并且页面上有多个视频，所以它所做的只是让它们在页面加载时全部播放。

我被困住了，需要一些帮助，有人知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T18:57:50.883

创建fancybox 时，您应该添加一个带有重置onclick 事件功能的onClosed 事件处理程序。

```
$("#exemple").fancybox({
    'onClosed' : function() {
        $("#example").attr('onclick',"this.play();this.onclick=null;");
    } 
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T18:55:00.713

尝试改变

```
onclick="this.play();this.onclick=null;" 
```

到

```
onclick="this.play();this.onclick=null;"  
//OR
onclick="this.play(); return false;" 
```

# asp.net-mvc - 尝试创建视图模型设计模式来填充 DropdownList

> ID：10356273
> 
> 赞同：0
> 
> 时间：2012-04-27T18:52:26.397
> 
> 标签：asp.net-mvc, asp.net-mvc-3

我很难弄清楚如何做到这一点。那里的例子并没有帮助我理解我需要什么。

**查看模型**

```
public class ViewModelAddUser 
{
    StudentSchedulingDBContext ssDB = new StudentSchedulingDBContext();

    public User User { get; private set; }
    public SelectList Departments { get; private set; }

    public ViewModelAddUser()
    {
        // Not Sure what to put here
    }

} 
```

**表的 DBContext（只是为了在代码中显示表结构）**

```
public class Department
{
    public int DepartmentID { get; set; }
    public string DepartmentName { get; set; }
} 
```

**控制器**

```
public ActionResult AddUser()
    {

        return View(new ViewModelAddUser());

    } 
```

我不太确定如何形成其余部分。我一直在尝试 nerddinner 和其他问题，但我没有让这个工作。

***更新***

```
**View Model:**

public class ViewModelAddUser 
{
    public IEnumerable<SelectListItem> Departments { get; set; }
} 
```

**控制器：**

```
public ActionResult AddUser()
    {
        ViewModelAddUser model = new ViewModelAddUser()
        {
            Departments = db.Departments.Select(department => new SelectListItem {
                Value = department.DepartmentID.ToString(),
                Text = department.DepartmentName
            })
        };
        return View(model);  
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T21:26:44.537

视图模型应该只包含将在视图中使用的元素。那不应该包括您的数据库上下文。同样，确保您在视图模型中提到的用户类是用于创建用户的视图模型，而不是您的用户域模型。

我认为您的视图模型应该看起来像：

```
public class ViewModelAddUser 
{
    public UserViewModel User { get; set; } //depending on what your doing a string containing UserId might suffice here
    public IEnumerable<SelectListItem> Departments { get; set; }
    public string DepartmentId { get; set; } // this will be the department set by drop down list
} 
```

创建下拉列表：

```
StudentSchedulingDBContext ssDB = new StudentSchedulingDBContext(); //I'm assuming this can be queried to get your departments.
ViewModelAddUser model = new ViewModelAddUser()
{
    Departments = ssDB.Departments.Select(department => new SelectListItem {
         Value = department.departmentID,
         Text = department.departmentName
    }),
    User = //set user here if necessary
}

return View(model); 
```

调用下拉列表：

```
@Html.DropDownListFor(m => m.DepartmentId, Model.Departments); 
```

另请查看 Austin 提供的链接，Darin 对该问题的回答可能会对您有所帮助。

# android - 在单实例模式下获得额外功能

> ID：10356277
> 
> 赞同：0
> 
> 时间：2012-04-27T18:52:54.817
> 
> 标签：android

我想在通知中添加一些带有 putextras(,) 的附加信息，但我的活动处于**单实例**模式，而在 OnResume 中我无法获得任何附加信息。我怎么解决这个问题 ？

```
intent.putExtra("keyboard", false);

//

if (getIntent().hasExtra("keyboard")) {

            if (getIntent().getBooleanExtra("keyboard", true) == false) {
                _HideKeyaboard();

            }
        } 
```

我在 get extras 上收到 null 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T19:27:24.940

我认为您需要为 Activity 实现[onNewintent()](http://developer.android.com/reference/android/app/Activity.html#onNewIntent%28android.content.Intent%29)方法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T20:13:38.557

onsaveinstancestate 你可以保存你的数据。onrestoreinstancestate 你可以检索。这些总是在活动暂停或恢复时调用。

```
 @Override
    public void onSaveInstanceState(Bundle savedInstanceState) {
      savedInstanceState.putExtra("keyboard", false);
      super.onSaveInstanceState(savedInstanceState);
    }

   @Override
    public void onRestoreInstanceState(Bundle outbundle) {
      outbundle.getBooleanExtra("keyboard", true);
      super.onSaveInstanceState(outbundle);
    } 
```

# .net - 将 System.Web.Mvc 添加到 \bin 会使 MVC 3 应用程序抛出 403.14 Forbidden

> ID：10356280
> 
> 赞同：0
> 
> 时间：2012-04-27T18:53:05.867
> 
> 标签：.net, asp.net-mvc-3, iis, asp.net-4.0

所以我正在尝试将 MVC 3 应用程序部署到 Web 服务器。如果我没有在 \bin 目录中包含 System.Web.Mvc dll，我会收到配置错误，说它找不到程序集 System.Web.Mvc，这是意料之中的。但是，一旦我添加了程序集，就会出现 403.14 Forbidden 错误。我已经尝试了从在服务器上安装 MVC 3 到运行命令的所有方法：`C:\Windows\Microsoft.NET\Framework\v4.0.30319\aspnet_regiis -ir`

应用程序池设置为 Asp.net v4.0 集成管道。超级沮丧，所以任何其他想法都会有所帮助。我已经阅读了所有关于 SO 的帖子，但无济于事。

服务器是 Windows 2008 Enterprise 32 位。.NET 4 已安装。

**更新**：我发现服务器上禁用了 IIS 的某些角色服务。即HTTPRedirection和静态内容压缩。安装这两个服务允许 Web 应用程序运行，但安装实际上失败并说它需要重新启动才能撤消更改。重启后，应用程序显然停止工作。至少我知道现在的问题是什么。我将禁用服务器上的一些服务并尝试再次安装角色服务。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T16:33:53.937

**解决了！** 希望这对其他人有帮助。Web 服务器上未安装 IIS 角色服务。该测试服务器应该与我们的开发服务器完全一样设置，但事实并非如此。无论如何，`HTTP Redirection`并`Static Content Compression`没有安装......在其他一些服务中。当我尝试安装它们时，我收到一个安装错误，需要重新启动才能回滚更改。我不得不卸载`Windows Process Activation Service`并重新安装`IIS`。那时，我安装了 ASP.NET MVC 3 并运行：`C:\Windows\Microsoft.NET\Framework\v4.0.30319\aspnet_regiis -ir`现在一切正常。

# windows - 正确的 Windows API 以查找 CurrentControlSet\Control\MediaProperties？

> ID：10356284
> 
> 赞同：4
> 
> 时间：2012-04-27T18:53:27.900
> 
> 标签：windows, directx, joystick, winmm, setupapi

我希望支持自定义操纵杆设备，但由于项目要求，我不能再使用 DirectInput API。我已经转而使用“经典”的 Windows 多媒体 API（例如**joyGetDevCaps**和 family），并且除了一个例外，它都能正常工作。

DirectInput DeviceInstance 有两个字段，**InstanceName**和**ProductName**，它们返回正确的“自定义”设备名称。

对应的**joyGetDevCaps**产品名称字段 szPname 返回一个通用的“Microsoft PC 游戏杆驱动程序”。

在安装了设备的系统上搜索注册表时，我发现此节点中有一个 REG_SZ **OEMName条目，其中包含我想要的字符串：**

HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\MediaProperties\PrivateProperties\Joystick\OEM\VID_07C0&PID_1128

JOYCAPS 中返回两个字段，wMid（制造商 ID）和 wPid（产品 ID），它们映射到键名中的两个十六进制值：wMid = 0x07c0，wPid = 0x1128。

此外，我可以在 GUID_DEVINTERFACE_HID 上使用 SetupDiEnumDeviceInfo API 并找到匹配的控制器（尽管此步骤可能不是必需的）：

HID\VID_07C0&PID_1128&REV_1032，HID兼容游戏控制器

问题：是否有用于枚举我应该使用的 MediaProperties\PrivateProperties 的 API，或者使用此信息并直接查询注册表是否“安全”？如果有 API，请用参考和/或示例代码回答！我找不到任何相关的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-08T12:00:25.557

您应该使用 szRegName 值来获取以下键：（在这种情况下，szRegName 是“DINPUT.DLL”）：

```
HKCU\System\CurrentControlSet\Control\MediaResources\Joystick\DINPUT.DLL\CurrentJoystickSettings 
```

它包含诸如“Joystick1OEMName”之类的值，其中将包含诸如“VID_07C0&PID_1128”之类的字符串，可用于在 PrivateProperties 下查找适当的键。

一些示例代码可以在这里找到： [https ://github.com/google/liquidfun/blob/master/freeglut/src/mswin/fg_joystick_mswin.c](https://github.com/google/liquidfun/blob/master/freeglut/src/mswin/fg_joystick_mswin.c)

# javascript - 当手指在屏幕上而不抬起时，javascript动画在ios safari webkit浏览器中停止

> ID：10356285
> 
> 赞同：6
> 
> 时间：2012-04-27T18:53:29.377
> 
> 标签：javascript, ios, animation, webview, touch

我有一个 webview，它正在应用程序中显示，页面上有一个动画，一个数字计时器，我在其中显示每个数字的图像，例如 00:39、29:39 等

它是动画在页面内的javascript中使用setInterval问题是当我将手指放在屏幕上时，即没有抬起手指的触摸浏览器停止，这意味着动画不再动画，它停在我手指触摸的地方屏幕，我抬起手指后它会继续动画

我怎样才能解决这个问题？我听说我可以使用防止默认方法，但那不会忽略我在页面上的所有事件吗？

基本上除了我网页中的计时器之外，我还有一些用户可以与之交互的东西，所以它正在寻找点击事件等。

所以我当然也想保留它，请帮忙

这发生在 ios 设备上...如果我在桌面浏览器中运行，一切似乎都很好..不会停止被观察

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T22:54:20.370

仅适用于以后遇到此问题的任何人： **滚动时动画总是在 Web 浏览器中停止**，这是您的 Web 视图通过手指触摸所预期的。*这也将发生在桌面浏览器上*。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T20:24:07.290

如果您按任何地方或只按柜台，它会停止吗？尝试防止点击计数器元素。例如..

```
$('#counter-container').click(function()
{
  e.preventDefault();

  return false;
}); 
```

**编辑：**显然这不是一个不常见的问题。当 iphone 需要更多 CPU/内存资源时，它将停止执行 javascript。研究使用 setInterval（以给定的时间间隔执行 javascript，直到调用 clearInterval()）来检测动画是否未成功完成。
**相关问题：**
[用户交互有时会搞砸 UIWebView 中的 jQuery ajax 请求](https://stackoverflow.com/questions/4691812/user-interaction-sometimes-screws-up-jquery-ajax-requests-in-uiwebview)
[AJAX 不断寻找服务器更新？Javascript](https://stackoverflow.com/questions/1289489/ajax-constantly-look-for-server-update-javascript)
[https://discussions.apple.com/thread/2723866?start=0&tstart=0](https://discussions.apple.com/thread/2723866?start=0&tstart=0)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T16:57:41.750

发现了问题所在。它与 ajax 请求或 cpu 无关，这是因为引入了微小的滚动。显然，如果您正在滚动或要滚动，所有动画都将停止。

# mysql - 在我的 sql 表中计算不同的状态

> ID：10356293
> 
> 赞同：1
> 
> 时间：2012-04-27T18:54:22.907
> 
> 标签：mysql

我有一个包含以下字段的表：

```
Date    
EmpId   
TimeIn  
TimeOut 
Status 
```

它是一个考勤表。基本上我需要计算工资单（我在另一个表中有工资和扣除额）。通过计算每个员工在特定范围内或整个上个月的每种类型的状态。

我需要以下格式的输出：

```
EmpID|Days Present|Days Late|Days Absent| After TimeIn A| After TimeIn B| 
```

状态字段包含员工的状态，即。出席，迟到，缺席，特定日期取决于时间等。

我就是不能破解这个。任何帮助将非常感激。谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-27T19:00:37.267

由于您没有指定如何`Status`枚举列，因此我做了一些假设。显然，您需要在每个 CASE 语句中替换正确的值。

```
SELECT EmpId,
       SUM(CASE WHEN Status = 'Present' THEN 1 ELSE 0 END) AS `Days Present`,
       SUM(CASE WHEN Status = 'Late' THEN 1 ELSE 0 END) AS `Days Late`,
       SUM(CASE WHEN Status = 'Absent' THEN 1 ELSE 0 END) AS `Days Absent`,
       SUM(CASE WHEN Status = 'After A' THEN 1 ELSE 0 END) AS `After Timein A`,
       SUM(CASE WHEN Status = 'After B' THEN 1 ELSE 0 END) AS `After Timein B`
    FROM Attendance
    WHERE Date >= {Your Start Date}
        AND Date <= {Your End Date}
    GROUP BY EmpId 
```

# javascript - 需要 jQuery 的书签不起作用

> ID：10356294
> 
> 赞同：0
> 
> 时间：2012-04-27T18:54:25.450
> 
> 标签：javascript, jquery, bookmarklet, color-picker

我正在尝试基于[jQuery Color Picker Plugin](http://www.eyecon.ro/colorpicker/)创建一个书签。如果我在页面标题中包含 JavaScript 文件（[示例](http://forwardbeats.com/sandbox/bookmarklet_working.html)），一切正常，但如果我将脚本从小书签附加到页面，颜色选择器永远不会被初始化（[示例](http://forwardbeats.com/sandbox/bookmarklet.html)）。为了清楚起见，我尽可能地简化了 js。

这是书签代码：

```
javascript:(function()%20{_my_script=document.createElement('script');_my_script.type='text/javascript';_my_script.src='http://forwardbeats.com/sandbox/colorpicker.js';document.getElementsByTagName('head')[0].appendChild(_my_script);})(); 
```

该脚本被很好地附加到页面并且似乎正在运行，但选择器从未被初始化。关于可能出现问题的任何想法？

**注意：**我通常也会首先测试 jQuery，但对于这个例子，我假设它已经在页面上。

**编辑：**我发现并解决了这个问题。我将在下面发布我的答案，希望我可以帮助任何有类似情况的人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T22:45:26.637

问题根本不在书签中，而是我包含的 js 文件中。由于某种原因，代码在包含在页面中时运行良好，但在被小书签附加时却不行。

我注意到，在使用小书签时，脚本试图在注册之前调用颜色选择器初始化函数。为了解决这个问题，我所要做的就是改变我打电话`colorPickerInit()`的地方。之前，我在调用它，之后`eye()`它负责调用注册在`colorPickerInit()`. 通过在`colorPickerInit()`内部移动，`eye()`现在一切正常！

# c# - 像java一样将double转换为int

> ID：10356295
> 
> 赞同：0
> 
> 时间：2012-04-27T18:54:37.987
> 
> 标签：c#

我需要一些帮助，在 java 中将一个大的 double 转换为 int：

```
(int)System.currentTimeMillis(); //result -186983989 (java) 
```

结果总是返回 int32.minvalue，但我需要与 java 相同的结果。但在 C# 中：

```
DateTime Jan1st1970 = new DateTime(1970, 1, 1, 0, 0, 0, DateTimeKind.Utc);
TimeSpan span = DateTime.UtcNow - Jan1st1970;
Int32 resultado = (int)span.TotalMilliseconds; //result is always -2147483648 and i need same as java 
```

在此先感谢，可以看到这张图片[https://public.blu.livefilestore.com/y1pwU6fnT0v663NPqa7cSwwU9MSFQeO1TjdOdip1GFn8Eqg0Fgo_rsA3ER2jw5RDpXGOa1WiMc_PFIzzjxkqWe9zQ/wtf.png?psid=1](https://public.blu.livefilestore.com/y1pwU6fnT0v663NPqa7cSwwU9MSFQeO1TjdOdip1GFn8Eqg0Fgo_rsA3ER2jw5RDpXGOa1WiMc_PFIzzjxkqWe9zQ/wtf.png?psid=1)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T18:56:27.460

An`int`的范围为 -2,147,483,648 到 2,147,483,647。结果比这要大得多。您将需要具有更大范围的更大数据类型。尝试`long`代替`int`.

```
long resultado = (long)span.TotalMilliseconds; 
```

结果：

```
resultado   1335553169530   long 
```

# css - 动态高度后浮动

> ID：10356296
> 
> 赞同：0
> 
> 时间：2012-04-27T18:54:40.670
> 
> 标签：css, css-float

我有一个宽度为 100% 的 JQuery 图像推子；和高度：自动；

这太棒了，因为它也适用于 iPhone。

现在我希望内容在我的 JQuery 滑块之后“浮动”，但我确实遇到了问题，因为我使用自动高度来获得正确的比例，以及 100% 宽的图像。

我试过：溢出：隐藏，自动和清除：两者；width: 100% on the following element，我也尝试过浮动两个元素，但如果没有定义的高度，它将无法工作。如果我定义一个高度，它可以工作..但是，我希望高度是动态的..

这可以用 CSS 完成，还是我需要使用 JS？

这是网站：www.magento-design.dk（它是一个 Joomla，有基础）。我希望基础演示内容在 JQuery 滑块之后浮动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T19:02:05.417

我建议将高度设置为某个值，然后在内部内容发生变化时通过 JavaScript 更改它。auto 的 CSS 高度没有设置像素值，因此您需要通过 JavaScript 定义一个。

将您的高度更改设置为 JavaScript 中的一个函数，您可以在 $(document).ready() 以及您的内容更改调用中调用该函数。

**编辑1：**

我将使用以下代码来实现您想要做的事情......

```
jQuery(document).ready({
    set_img_height();
});

jQuery("#contentDIV").load("data.html", function() {
    set_img_height();
});

function set_img_height() {
    var height = jQuery('#slideshow').height();
    jQuery('.imagefade').css('height', height);
} 
```

当然，在不更具体地知道你在寻找什么的情况下写这篇文章对我来说有点困难。但基本思路如下：

1.  您创建一个函数，该函数将获取幻灯片的高度，并使用“imagefade”类使其成为所有元素的高度
2.  接下来在文档就绪函数中调用这个函数（当 PHP 被处理并且 HTML 被完全加载时）
3.  最后，使用回调函数再次调用此函数并加载信息。我不知道你是如何加载内容的，但我基本上假设你正在将一个文件“data.html”加载到一个 id 为“contentDIV”的 div 中，完成之后......它调用定义的 set_img_height 函数在它下面。

此代码可能不是为您复制和粘贴材料，但基于您自己没有提供任何实际代码，这是我能做的最好的。希望这至少会为您指明正确的方向！

# c++ - 是否可以将 cout 或 fout 传递给函数？

> ID：10356300
> 
> 赞同：24
> 
> 时间：2012-04-27T18:54:59.600
> 
> 标签：c++, fstream, ofstream

我正在尝试找到一种将 fout 或 cout 传递给函数的方法。我意识到有一些逻辑上简单的方法来处理这个问题，比如将 ifs 放在任何输出数据的函数中，甚至只是双向编写函数。然而，这似乎是原始和低效的。我不相信这段代码会起作用，我把它放在这里是为了确保很容易看到我“想要”做什么。请注意，我正在学习使用 c++ 的算法设计课程，我绝不是经验丰富的 c++ 程序员。我的课程仅限于使用您看到的标题。

```
#include <iostream>
#include <iomanip>
#include <fstream>

using namespace std;
void helloWorld(char);
ofstream fout;

int main()
{
    fout.open("coutfout.dat");
    helloWorld(c);
    helloWorld(f);

    return 0;
}
void helloWorld(char x)
{
    xout << "Hello World";
    return;
} 
```

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-04-27T18:58:08.273

这些都继承自`ostream`所以试试这个：

```
void sayHello(ostream& stream)
{
    stream << "Hello World";
    return;
} 
```

然后主要是传入对象（cout 或其他），它应该可以正常工作。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-04-27T18:58:06.740

是的。让你的功能是

```
sayhello(std::ostream &os); 
```

然后，在函数中，您可以使用`os`.`xout`

（顺便说一句，`using namespace std`转储整个 std 命名空间，不推荐。`using std::cout`不过，A 之类的也可以。）

# android - 表格布局内的滚动视图？

> ID：10356302
> 
> 赞同：0
> 
> 时间：2012-04-27T18:55:02.073
> 
> 标签：android, scrollview, tablelayout

我想在这个表中设置一个滚动视图。请问我该怎么做？

```
<TableLayout
    android:id="@+id/lunchtableviewing"
    android:layout_width="194dp"
    android:layout_column="0"
    android:layout_columnSpan="4"
    android:layout_row="7" >
</TableLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T19:00:56.430

AFAIK，ScrollView 内的 TableLayout 可能为：

```
<ScrollView 
android:layout_width="match_parent"
android:layout_height="wrap_content">
<LinearLayout 
android:layout_width="match_parent"
android:layout_height="wrap_content">
<TableLayout
    android:id="@+id/lunchtableviewing"
    android:layout_width="194dp"
    android:layout_column="0"
    android:layout_columnSpan="4"
    android:layout_row="7" >
</TableLayout>
</LinearLayout>
</ScrollView> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T19:01:59.700

这是如何

```
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="match_parent"
  android:layout_height="match_parent">

<TableLayout
android:id="@+id/lunchtableviewing"
android:layout_width="194dp"
android:layout_column="0"
android:layout_columnSpan="4"
android:layout_row="7" >
</TableLayout>
</ScrollView> 
```

# javascript - Javascript 按钮 OnClick 找不到我想要的方法

> ID：10356306
> 
> 赞同：0
> 
> 时间：2012-04-27T18:55:19.877
> 
> 标签：javascript, onclick

我有这个代码

```
<title>Welcome</title>
<head>
<script type="text/javascript">
var id = "...";
var sessionCount = 0;
var sessionText=[];
var dumper=[];

function a()
{
var i = 0;
var processor = setInterval("refresh()", 500);
}
function refresh()
{   
    sessioncount();
    readsessions();
    htmlize();
    newsession();
    send("some awesome test");
}
function sessioncount()
{
    xmlhttp = new XMLHttpRequest();
    xmlhttp.open("POST","count", false);
    xmlhttp.setRequestHeader("Content-type","application/x-www-form-urlencoded");
    xmlhttp.send("id="+id); 
    sessionCount = parseInt(xmlhttp.responseText);
}
function readsessions()
{
    sessionText = new Array(sessionCount);
    for(var i = 0; i < sessionCount; i++)
    {
        xmlhttp = new XMLHttpRequest();
        xmlhttp.open("POST","read?i="+i, false);
        xmlhttp.setRequestHeader("Content-type","application/x-www-form-urlencoded");
        xmlhttp.send("id="+id); 
        sessionText[i] = xmlhttp.ResponseText;
    }
}
function newsession()
{
        xmlhttp = new XMLHttpRequest();
        xmlhttp.open("POST","new", false);.
        xmlhttp.setRequestHeader("Content-type","application/x-www-form-urlencoded");
        xmlhttp.send("id="+id);
}
function send(msg)
{
        xmlhttp = new XMLHttpRequest();
        xmlhttp.open("POST","write", false);.
        xmlhttp.setRequestHeader("Content-type","application/x-www-form-urlencoded");
        xmlhttp.send("msg="+msg+"&id="+id);
}
function htmlize()
{
    while(sessionCount > dumper.Length)
        dumper.push("");
    for(var i = 0; i < sessoinCount; i++)
    {   
    dumper[i] += sessionText[i];
    alert(dumper[i]);
    }
}

</script>
</head>
<body bgcolor="black">
<font color="white">

<FORM>
<INPUT TYPE="button" VALUE="GO" onclick="a()">
</FORM> 
```

但是当我点击按钮时，什么也没有发生，Chrome 开发者工具说“a”没有定义。我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T18:57:59.973

你在这里有一个语法错误：

```
xmlhttp.open("POST","write", false);. // <-- that dot should not be there 
```

因此`a`是未定义的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T19:00:12.390

删除之后的句点：xmlhttp.open("POST","write", false);。xmlhttp.open("POST","new", false);.

# css - div 列高

> ID：10356310
> 
> 赞同：-1
> 
> 时间：2012-04-27T18:55:46.910
> 
> 标签：css, html

如何使 bbb + ccc 的列与 aaa、ddd 列的高度相同？

```
<html><body>
<div style="width:500px;height:500px;background-color:yellow">
 <div style="float:left;height:100%;background-color:green;">
  aaa
 </div>
 <div style="float:left;height:100%;background-color:#ff00ff">
  <div style='background-color:cyan;height:25px;'>
   bbb
  </div>
  <div style="background-color:gray;height:100%;">
   ccc
  </div>
 </div>
ddd
</div>
</body></html> 
```

[http://jsfiddle.net/WD94e/](http://jsfiddle.net/WD94e/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T19:14:38.290

如果不使用表格，您想要做的事情在 CSS 中并不完全可行。您可以做的下一个最好的事情是制作一个“人造专栏”。

[http://jsfiddle.net/3wXv2/](http://jsfiddle.net/3wXv2/)

更新了 HTML（取出内联 CSS 并添加了简单的类名）

```
<div class="wrap d">
    <div class="a">aaa</div>
    <div class="bc">
        <div class="b">bbb</div>
        <div class="c">ccc</div>
    </div>
    ddd
</div> 
```

CSS

```
.wrap{
    width:500px;
    height:500px;
    background-color:yellow;
}
.a{
    float:left;
    height:100%;
    background-color:green;
}
/* This is a "Faux Column" */
.bc{
    float:left;
    height:100%;
    /*background-color:#ff00ff;*/
    /* This is the faux column, make it the same as "DIV.c" */
    background-color:gray; 
}
.b{
    background-color:cyan;
    height:25px;
}
.c{
    background-color:gray;
    /*height:100%; /* Don't Do this.  Need to "faux column" this */
} 
```

这里的“技巧”是容器“列”（包含堆叠 div .b 和 .c 的 Div.bc）的行为类似于“人造列”，它基本上有点欺骗人们认为“C”的背景实际上正在扩展，但事实并非如此。

您可以从这个优秀的资源中了解 Faux Columns：

[http://www.alistapart.com/articles/fauxcolumns/](http://www.alistapart.com/articles/fauxcolumns/)

“身高：100%；”的问题 是这个声明*不是*说“拉伸到列的剩余高度”。

它的意思是“让我的身高等于我父母身高的 100%！”。

这意味着，它查看父容器（在本例中为 .bc）并将其高度 = 设置为该高度。如果您查看您的 CSS，它会显示 .bc 的高度为 100%，这也是同样的事情。它使它的 height = .wrap 设置为 500px。

所以...列“.c”设置为 500px，而不是“500px - 列中的任何其他内容”，因为 CSS 不能按照它的规则那样工作。

当然，如果您碰巧在“div.c”中有高于剩余列高的内容，这可能会中断。

我希望这会有所帮助。

干杯!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T19:11:48.507

请参阅此更新的小提琴：http: [//jsfiddle.net/WD94e/1/](http://jsfiddle.net/WD94e/1/)。

您只需更改“bbb”和“ccc”列的高度，使它们的总和达到 100%：

```
<div style="background-color:cyan;height:5%;">
    bbb
</div>
<div style="background-color:gray;height:95%;">
    ccc
</div> 
```

# node.js - Nodejs Express 隐式中间件应用于所有路由？

> ID：10356311
> 
> 赞同：4
> 
> 时间：2012-04-27T18:55:51.200
> 
> 标签：node.js, express

我想知道 Express 是否会让我创建一个默认调用的路由中间件，而无需我明确地将它放在 app.get() arg 列表中？

// NodeJS 新手

```
var data = { title: 'blah' };

// So I want to include this in every route
function a(){
  return function(req, res){
    req.data = data;
  };
};

app.get('/', function(req, res) {
  res.render('index', { title: req.data.title });
}; 
```

我知道我可以通过路由`app.set('data', data)`访问它。`req.app.settings.data`这可能会满足我上面的简单示例。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-27T18:59:06.917

```
function a(req, res, next){
  req.data = data;
  // Update: based on latest version of express, better use this
  res.locals.data = data;
  next();
};

app.get('/*', a); 
```

请参阅[Express 文档中的示例，中间件部分](https://expressjs.com/en/guide/using-middleware.html)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-10T14:42:50.603

您可以创建一种默认方式来调用您创建的每个视图，而无需为每个新条目显式创建新路由。查看以下示例：

```
app.get('/:viewname', function(req, res) {
    res.render(req.params.viewname, { viewname : req.params.viewname});
}); 
```

我希望你在期待。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-10T13:38:16.003

你也可以这样做：

```
function my_middleware(req, res, next){
   req.data = data;

   if (something(res)) redirect('http://google.com'); // no access to your site
   next(); // go to routes

};

app.configure(function() {
   ...
   app.use(express.cookieParser('secret'));
   app.use(express.session());
   app.use(my_middleware);
   app.use(app.router);
   ...
} 
```

在这种情况下，当 cookie 和会话已经可用但还没有处理任何路由时，会调用 my_middleware。或者，如果出于某种原因需要，您甚至可以在会话之前进行。

# java - 使用 Spring MVC 从存储库中检索 XML 元数据

> ID：10356312
> 
> 赞同：1
> 
> 时间：2012-04-27T18:55:54.747
> 
> 标签：java, spring-mvc

大家好，我现在尝试 7 天从网络上的存储库中检索数据。特别是我尝试从这里检索作者列表（其 URL：http://www.../base/author）：

```
 <authors xmlns="http:www.../base" xmlns:atom="http://www.w3.org/2005/atom">
  <author> 
      <atom:link rel="author" type="application/xml" href="http://www.../base/author/1"/>
  </author>
  <author>
      <atom:link rel="author" type="application/xml" href="http://www.../base/author/2"/>
  </author>
  <author>
      <atom:link rel="author" type="application/xml" href="http://www.../base/author/3"/>           
  </author>
</authors> 
```

每个作者分别从这里：

```
<author xmlns="http://http:www.../base" xmlns:atom="http://www.w3.org/2005/atom">
   <name>S. Crocker</name>
   <address>None</address>
   <affiliation></affiliation>
   <email>None</email>
</author> 
```

我的模型类是：

```
 import javax.xml.bind.annotation.XmlRootElement;

   @XmlRootElement(name="author")
   public class Author {

private Long id;
private String name;
private String address;
private String affiliation;
    private String email;

public Long getId() {
    return id;
}
public void setId(Long id) {
    this.id = id;
}
public String getName() {
    return name;
}
public void setFirstName(String name) {
    this.name = name;
}
public String getAddress() {
    return address;
}
public void setAddress(String address) {
    this.address = address;
}
public String getAffiliation() {
    return affiliation;
}
public void setAffiliation(String affiliation) {
    this.affiliation = affiliation;
}
public String getEmail() {
    return email;
}
public void setEmail(String email) {
    this.email = email;
}

} 
```

和：

```
 import java.util.List;

  import javax.xml.bind.annotation.XmlRootElement;

   @XmlRootElement(name="authors")
   public class AuthorList {

private List<Author> data;

public List<Author> getData() {
    return data;
}

public void setData(List<Author> data) {
    this.data = data;
} 
```

}

控制器：

```
 public class Controller {

 protected static Logger logger = Logger.getLogger("controller");

 private RestTemplate restTemplate = new RestTemplate();

/**
 * Retrieves all records from the REST provider
 * and displays the records in a JSP page
 */
@RequestMapping(value = "/authors", method = RequestMethod.GET)//getall
public String getAll(Model model) {

    // Prepare acceptable media type
    List<MediaType> acceptableMediaTypes = new ArrayList<MediaType>();
    acceptableMediaTypes.add(MediaType.APPLICATION_XML);

    // Prepare header
    HttpHeaders headers = new HttpHeaders();
    headers.setAccept(acceptableMediaTypes);
    HttpEntity<Author> entity = new HttpEntity<Author>(headers);

    // Send the request as GET
    try {
        ResponseEntity<AuthorList> result = restTemplate.exchange("href="http://www.../base/author/", 
                        HttpMethod.GET, entity, AuthorList.class);
        // Add to model
        model.addAttribute("authors", result.getBody().getData());

    } catch (Exception e) {
    }

    // This will resolve to /WEB-INF/jsp/personspage.jsp
    return "personspage";
}

/**
 * Retrieves a single record from the REST provider
 * and displays the result in a JSP page
 */
@RequestMapping(value = "/author", method = RequestMethod.GET)
public String getPerson(@RequestParam("id") Long id, Model model) {

    // Prepare acceptable media type
    List<MediaType> acceptableMediaTypes = new ArrayList<MediaType>();
    acceptableMediaTypes.add(MediaType.APPLICATION_XML);

    // Prepare header
    HttpHeaders headers = new HttpHeaders();
    headers.setAccept(acceptableMediaTypes);
    HttpEntity<Author> entity = new HttpEntity<Author>(headers);

    // Send the request as GET
    try {
        ResponseEntity<Author> result = restTemplate.exchange("href="http://www.../base/author/{id}",
                            HttpMethod.GET, entity, Author.class, id);
        // Add to model
        model.addAttribute("author", result.getBody());

    } catch (Exception e) {
    }

    // This will resolve to /WEB-INF/jsp/getpage.jsp
    return "getpage";
}

} 
```

最后是两个视图之一，getpage：

```
 <%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>
  <%@page contentType="text/html" pageEncoding="UTF-8"%>
   <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
    "http://www.w3.org/TR/html4/loose.dtd">

  <html>
  <head>
 <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
 <title>Insert title here</title>
 </head>
 <body>
 <h1>Get Author</h1>

 <c:if test="${empty author}">
 No records found!
 </c:if>

 <c:if test="${!empty author}">
<table style="border: 1px solid #333">
    <tr>
    <td style="width: 100px">Id</td>
    <td>${author.id}</td>
    </tr>

    <tr>
    <td>Name</td>
    <td>${author.name}</td>
    </tr>

    <tr>
    <td>Address</td>
    <td>${author.address}</td>
    </tr>

    <tr>
    <td>Affiliation</td>
    <td>${author.affiliation}</td>
    </tr>

            <tr>
    <td>Email</td>
    <td>${author.email}</td>
    </tr>
</table>
</c:if> 
```

现在，当我刚刚运行程序时，我会看到一个视图，上面写着：

没有找到记录！

当我给出以下 URL 时： [http://localhost:8080/Client_for_rest/author?id=1](http://localhost:8080/Client_for_rest/author?id=1)

我应该从存储库、名称电子邮件等接收数据，但我会收到：请求的资源 () 不可用。我不明白有什么问题，URL 接收数据之间的映射？有什么提议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T22:46:00.920

关于您的第一个问题，看起来 JAXB 注释不正确，作者 xml 元素未映射到您的 AuthorList 类，并且作者中的内部元素作者未映射到 Author 类，并且没有考虑命名空间。

我认为对 JAXB 注释的一些快速修复可能是：您可以定义几个类： AtomLink: @XmlAccessorType(XmlAccessType.FIELD)

```
public class Atomlink {
    @XmlAttribute
    private String rel;
    @XmlAttribute
    private String type;
    @XmlAttribute
    private String href;
    ....... 
```

AuthorMeta，表示作者中的作者标签：

```
@XmlAccessorType(XmlAccessType.FIELD)
public class AuthorMeta {

    @XmlElement(name="link", namespace="http://www.w3.org/2005/atom")
    private Atomlink link;

    public Atomlink getLink() {
        return link;
    }

    public void setLink(Atomlink link) {
        this.link = link;
    }
} 
```

最后是您已经拥有的 AuthorList，但带有命名空间：

```
@XmlRootElement(name = "authors", namespace="http:www.../base")
@XmlAccessorType(XmlAccessType.FIELD)
public class AuthorList {

    private List<AuthorMeta> author;

    public List<AuthorMeta> getAuthor() {
        return author;
    }

    public void setAuthor(List<AuthorMeta> data) {
        this.author = data;
    }
} 
```

这应该解决您无法干净绑定的第一个问题。

您必须按照相同的方式为作者的结果定义绑定：

```
@XmlRootElement(name = "author", namespace="http://http:www.../base")
@XmlAccessorType(XmlAccessType.FIELD)
public class Author {
    private String name;
    private String address;
    private String affiliation;
    private String email; 
```

现在关于找不到资源的第二个问题..映射看起来不错，最好将日志级别设置为跟踪并查看发生了什么。

# html - 平板电脑和手机文本链接

> ID：10356314
> 
> 赞同：0
> 
> 时间：2012-04-27T18:56:03.980
> 
> 标签：html, css, mobile, hyperlink, phone-number

我的网站 HTML 包含一个电话号码作为文本。因此，iPad 平板电脑将其解释为电话 - 并将其转换为带下划线的蓝色链接。

是否可以将电话号码格式化为不同的样式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T19:13:19.820

您可以通过将以下内容添加到页面来关闭电话号码检测：

```
<meta name="format-detection" content="telephone=no"> 
```

来源：[Apple URL Scheme 参考：电话链接](http://developer.apple.com/library/ios/#featuredarticles/iPhoneURLScheme_Reference/Articles/PhoneLinks.html)

一定要考虑其他设备和操作系统。例如，要在 BlackBerry 上禁用此功能，需要执行以下操作：

```
<meta http-equiv="x-rim-auto-match" content="none"> 
```

资料来源：[黑莓：链接行为](http://docs.blackberry.com/en/developers/deliverables/11844/Feature_link_behaviour_438487_11.jsp)

# java - Netbeans 可以构建和运行 java 可执行文件；但是在 Netbeans 之外执行应用程序时它不会运行

> ID：10356315
> 
> 赞同：1
> 
> 时间：2012-04-27T18:56:06.393
> 
> 标签：java, ubuntu, executable-jar, unsupported-class-version

我不知道是什么导致了这种情况发生。是不是因为我在 Netbeans 中构建错误。我可以在 Netbeans 中构建并运行它。但是当我通过单击它来执行 Jar 时——什么都没有发生。所以我通过执行以下命令从终端运行它：

```
java -jar 'path to jar' 
```

然后它在下面给出这个堆栈跟踪并带有错误消息：

```
Exception in thread "main" java.lang.UnsupportedClassVersionError: Security/TabbedWindow : Unsupported major.minor version 51.0
    at java.lang.ClassLoader.defineClass1(Native Method)
    at java.lang.ClassLoader.defineClass(ClassLoader.java:634)
    at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142)
    at java.net.URLClassLoader.defineClass(URLClassLoader.java:277)
    at java.net.URLClassLoader.access$000(URLClassLoader.java:73)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:212)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:205)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:321)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:294)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:266)
Could not find the main class: Security.TabbedWindow. Program will exit. 
```

在我看来，它找不到包 Security。但是我使用我最喜欢的存档管理器打开 Jar 文件，并且包 Security 似乎在那里，并且包括 Window 类文件在内的所有类文件都在那里。罐子是顺便签名的，但我认为这不是导致问题的原因。最奇怪的是几天前我能够运行罐子。但我确实将 Ubuntu 11.10 升级到了 12.04 LTS。这可能是 Open JDK 7 的问题吗？欢迎提供任何提示、答案和有用的建议。

**我的环境变量**

```
SSH_AGENT_PID=6618
GPG_AGENT_INFO=/tmp/keyring-5PyJ0L/gpg:0:1
TERM=xterm
SHELL=/bin/bash
XDG_SESSION_COOKIE=064a9b6c2b6d727a2883e8c500000097-1335551143.550894-1714410992
GNOME_KEYRING_CONTROL=/tmp/keyring-5PyJ0L
GTK_MODULES=canberra-gtk-module:canberra-gtk-module
USER=danny
LD_LIBRARY_PATH=/usr/lib/local
LS_COLORS=rs=0:di=01;34:ln=01;36:mh=00:pi=40;33:so=01;35:do=01;35:bd=40;33;01:cd=40;33;01:or=40;31;01:su=37;41:sg=30;43:ca=30;41:tw=30;42:ow=34;42:st=37;44:ex=01;32:*.tar=01;31:*.tgz=01;31:*.arj=01;31:*.taz=01;31:*.lzh=01;31:*.lzma=01;31:*.tlz=01;31:*.txz=01;31:*.zip=01;31:*.z=01;31:*.Z=01;31:*.dz=01;31:*.gz=01;31:*.lz=01;31:*.xz=01;31:*.bz2=01;31:*.bz=01;31:*.tbz=01;31:*.tbz2=01;31:*.tz=01;31:*.deb=01;31:*.rpm=01;31:*.jar=01;31:*.war=01;31:*.ear=01;31:*.sar=01;31:*.rar=01;31:*.ace=01;31:*.zoo=01;31:*.cpio=01;31:*.7z=01;31:*.rz=01;31:*.jpg=01;35:*.jpeg=01;35:*.gif=01;35:*.bmp=01;35:*.pbm=01;35:*.pgm=01;35:*.ppm=01;35:*.tga=01;35:*.xbm=01;35:*.xpm=01;35:*.tif=01;35:*.tiff=01;35:*.png=01;35:*.svg=01;35:*.svgz=01;35:*.mng=01;35:*.pcx=01;35:*.mov=01;35:*.mpg=01;35:*.mpeg=01;35:*.m2v=01;35:*.mkv=01;35:*.webm=01;35:*.ogm=01;35:*.mp4=01;35:*.m4v=01;35:*.mp4v=01;35:*.vob=01;35:*.qt=01;35:*.nuv=01;35:*.wmv=01;35:*.asf=01;35:*.rm=01;35:*.rmvb=01;35:*.flc=01;35:*.avi=01;35:*.fli=01;35:*.flv=01;35:*.gl=01;35:*.dl=01;35:*.xcf=01;35:*.xwd=01;35:*.yuv=01;35:*.cgm=01;35:*.emf=01;35:*.axv=01;35:*.anx=01;35:*.ogv=01;35:*.ogx=01;35:*.aac=00;36:*.au=00;36:*.flac=00;36:*.mid=00;36:*.midi=00;36:*.mka=00;36:*.mp3=00;36:*.mpc=00;36:*.ogg=00;36:*.ra=00;36:*.wav=00;36:*.axa=00;36:*.oga=00;36:*.spx=00;36:*.xspf=00;36:
DESKTOP_AUTOSTART_ID=1091386b79c06bc640133555114419341300000065810001
XDG_SESSION_PATH=/org/freedesktop/DisplayManager/Session1
XDG_SEAT_PATH=/org/freedesktop/DisplayManager/Seat0
SSH_AUTH_SOCK=/tmp/keyring-5PyJ0L/ssh
SESSION_MANAGER=local/ubuntu:@/tmp/.ICE-unix/6581,unix/ubuntu:/tmp/.ICE-unix/6581
DEFAULTS_PATH=/usr/share/gconf/ubuntu.default.path
XDG_CONFIG_DIRS=/etc/xdg/xdg-ubuntu:/etc/xdg
PATH=/usr/lib/lightdm/lightdm:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games
DESKTOP_SESSION=ubuntu
PWD=/home/danny
GNOME_KEYRING_PID=6570
LANG=en_US.UTF-8
MANDATORY_PATH=/usr/share/gconf/ubuntu.mandatory.path
UBUNTU_MENUPROXY=libappmenu.so
COMPIZ_CONFIG_PROFILE=ubuntu
GDMSESSION=ubuntu
HOME=/home/danny
SHLVL=1
GNOME_DESKTOP_SESSION_ID=this-is-deprecated
LOGNAME=danny
XDG_DATA_DIRS=/usr/share/ubuntu:/usr/share/gnome:/usr/local/share/:/usr/share/
DBUS_SESSION_BUS_ADDRESS=unix:abstract=/tmp/dbus-MrwQLH1prr,guid=547b4d3e0ff3a1907c709b97000013f5
LESSOPEN=| /usr/bin/lesspipe %s
DISPLAY=:0
XDG_CURRENT_DESKTOP=Unity
LESSCLOSE=/usr/bin/lesspipe %s %s
XAUTHORITY=/home/danny/.Xauthority
_=/usr/bin/printenv 
```

**另一个更新**

不，我从 JDK 6 更改了目标并执行了 jar，它什么也不做，从终端运行它给出了 HeadLess 异常。它在 Netbeans 中仍然运行良好。

```
Exception in thread "AWT-EventQueue-0" java.awt.HeadlessException
    at java.awt.GraphicsEnvironment.checkHeadless(GraphicsEnvironment.java:173)
    at java.awt.Window.<init>(Window.java:476)
    at java.awt.Frame.<init>(Frame.java:419)
    at java.awt.Frame.<init>(Frame.java:384)
    at javax.swing.JFrame.<init>(JFrame.java:174)
    at HomeSecurity.Window.<init>(Window.java:36)
    at HomeSecurity.Window$15.run(Window.java:564)
    at java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:226)
    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:647)
    at java.awt.EventQueue.access$000(EventQueue.java:96)
    at java.awt.EventQueue$1.run(EventQueue.java:608)
    at java.awt.EventQueue$1.run(EventQueue.java:606)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.AccessControlContext$1.doIntersectionPrivilege(AccessControlContext.java:105)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:617)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:275)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:200)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:190)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:185)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:177)
    at java.awt.EventDispatchThread.run(EventDispatchThread.java:138) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T18:59:03.897

您的类编译版本与运行 java 版本的类不同。检查代码运行的 JAVA_HOME 并确保它与您的 netbeans Java_HOME 版本相同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T19:23:34.563

```
Unsupported major.minor version 51.0 
```

这些类是使用没有[交叉编译选项](http://docs.oracle.com/javase/7/docs/technotes/tools/solaris/javac.html#crosscomp-options)的 1.7 SDK 创建的。使用交叉编译选项选项为应用程序的最低目标版本编译代码。

# android - 在一个对象上使用 setTag 两次？

> ID：10356321
> 
> 赞同：0
> 
> 时间：2012-04-27T18:56:23.013
> 
> 标签：android, android-layout, onclick, android-ui

我在 buttonView 上有一个 onClickListener。buttonView 需要检测单选组中选择了哪个单选按钮。但是 buttonView 的 setTag 已经被 onClickListener 需要访问的 JSON 对象占用（通过 v.getTag = new JSONOBject）。那么，buttonView 可以有两 (2) 个标签吗？我看到有两种方法， setTag(Object ojb); 和 setTag(key, object);

我可以利用它来发挥我的优势吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T19:00:49.427

> buttonView 需要检测单选组中选择了哪个单选按钮。

它可以通过调用`RadioGroup`.

> 那么，buttonView 可以有两 (2) 个标签吗？

创建一个标记对象，该对象包含其他两个对象。

> 我看到有两种方法， setTag(Object ojb); 和 setTag(key, object); 我可以利用它来发挥我的优势吗？

这两个参数`setTag()`确实适用于操作系统和库。不鼓励应用程序开发人员使用它。此外，如上所述，您不需要它。

# c# - 我如何判断一个 int[] 是否还没有分配任何东西？

> ID：10356327
> 
> 赞同：1
> 
> 时间：2012-04-27T18:56:42.327
> 
> 标签：c#, arrays, null, arraylist

如果我有这个：

```
int[] lstAFewInts = new int[NUMBER_OF_STARS_IN_THE_MILKY_WAY]; 
```

...如果方法尚未分配任何值，我想退出该方法，我该如何测试？是吗：

```
if (lstAFewInts[0] == null) 
```

...或者？？？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-27T19:45:43.537

我的建议：**提高抽象级别。**

```
class LazyArray<T>
{
    private T[] array;
    private int size;
    public LazyArray(int size) { this.size = size; }
    public bool IsInitialized { get { return this.array != null; } }
    public T this[int x] 
    { 
        get 
        { 
            return this.array == null ? default(T) : this.array[x];
        }
        set
        {
            if (this.array == null) this.array = new T[size];
            this.array[x] = value;
        }
    }
} 
```

你就完成了：你有一个任意大小的数组，你知道它是否已经被使用过：

```
void M()
{
    var myArray = new LazyArray<int>(whatever);
    while(whatever)
    {
        if (whatever) myArray[whatever] = whatever;
    }
    if (myArray.IsInitialized) 
        whatever;
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-27T18:59:45.667

```
default(T)  // i.e., default(int) 
```

将为您提供给定类型的默认值，在您的情况下，`int`. 但是，作为`int`值类型，无法区分默认值 0 和分配的值 0。

你确定你会以最好的方式去做吗？像 a`Dictionary<something, int>`这样的东西会让你更好地了解是否已经分配了某些东西，因为如果没有分配，则密钥将不存在。这当然假设您有唯一的键可以使用，但从常量的名称来看，星号的名称可能是一个很好的键。

还...

```
int[] lstAFewInts = new int[NUMBER_OF_STARS_IN_THE_MILKY_WAY]; 
```

我们银河系中的恒星数量估计约为 1000 亿颗。这大约是您分配的 400GB。我看到你在不久的将来内存不足:)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-27T19:03:42.950

如果您不能依赖值 0 来指定空元素，并且可以更改现有定义，则可以使用可为空的整数数组 - `int?[]`：

```
int?[] lstAFewInts = new int?[NUMBER_OF_STARS_IN_THE_MILKY_WAY]; 
```

现在所有值都将被`null`分配一个数字 - 任何数字：

```
bool atLeastOneAssigned = lstAFewInts.Any(i => i.HasValue); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-27T19:00:13.237

数组被初始化为其默认类型。由于 int 是一个值类型，这意味着它被初始化为 int 的默认值，即 0。无法知道这是由某人分配的还是它的初始值。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-27T19:02:06.447

```
if (lstAFewInts.All(i => i == 0))
{
    // No value, except possibly 0, has been assigned.  
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-27T19:04:45.930

您可以改用可为空的 int 。

```
int?[] lstAFewInts = new int?[NUMBER_OF_STARS_IN_THE_MILKY_WAY]; 
```

然后

```
lstAFewInts[0].HasValue; // false 
```

当然，如果您有一个循环，您可以检查每个索引以查看它是否被分配。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-27T19:13:49.497

数组将为其类型初始化为 null，但是没有 NULL int 之类的东西！所以我认为所有的值都会被初始化为 0。您可以检查第一个值是否为 0，但这并不理想，因为 0 可能是您想要使用的值。

如果可能的话，我会重新考虑它并声明数组（在初始化为任何大小之前它将为 NULL）并且只有在向它添加值时才会初始化。然后你可以检查：

```
if (lstAFewInts) 
```

返回 NULL；

# html - mailto链接多个正文行

> ID：10356329
> 
> 赞同：129
> 
> 时间：2012-04-27T18:56:48.110
> 
> 标签：html, outlook, mailto

无法让多行在 mailto 链接中正常工作

就我而言，我正在使用 Outlook 默认邮件阅读器对其进行测试。

以下内容放在锚href中：

`mailto:email@address.com?&subject=test&body=type%20your&body=message%20here`

电子邮件正文中仅显示“此处的消息”。（无论我使用的是 chrome 还是 IE）

想法？

* * *

## 回答 #1

> 赞同：226
> 
> 时间：2012-04-27T19:04:37.537

您可以使用[URL 编码](https://en.wikipedia.org/wiki/Percent-encoding)将换行符编码为`%0A`.

`mailto:email@address.com?subject=test&body=type%20your%0Amessage%20here`

尽管上述方法在许多情况下似乎都有效，但用户 olibre[指出](https://stackoverflow.com/a/27447222/834528)管理 mailto URI 方案的 RFC 指定`%0D%0A`应该使用 (回车 + 换行) 而不是`%0A`(换行)。另请参阅：[换行表示](https://en.wikipedia.org/wiki/Newline#Representations)。

* * *

## 回答 #2

> 赞同：45
> 
> 时间：2014-12-12T15:49:23.540

1.  **`body`**在`mailto`字符串中**使用单个****参数**
2.  **`%0D%0A`用作换行符**

[`mailto`URI 方案](https://en.wikipedia.org/wiki/Mailto)由[RFC2368](https://www.rfc-editor.org/rfc/rfc2368) （1998年7 月）和[RFC6068](https://www.rfc-editor.org/rfc/rfc6068)（2010 年 10 月）指定。以下是最后一个 RFC[第 5 节](https://www.rfc-editor.org/rfc/rfc6068#section-5)
的摘录：

> [...] 消息正文中的换行符必须用`"%0D%0A"`.
> 即使正文中没有尾随，实现也可以在消息正文中添加最后一个换行符`"%0D%0A"`[...]

另请参阅[第 6 节](https://www.rfc-editor.org/rfc/rfc6068#section-6.1)中来自同一 RFC 的示例：

```
<mailto:infobot@example.com?body=send%20current-issue%0D%0Asend%20index> 
```

上述`mailto`主体对应于：

```
send current-issue
send index 
```

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2013-10-04T11:41:54.817

要获得身体线条，请使用 escape()

```
body_line =  escape("\n"); 
```

所以

```
href = "mailto:me@my.com?body=hello,"+body_line+"I like this."; 
```

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2014-10-03T16:59:56.827

这就是我所做的，只需添加`\n`和使用`encodeURIComponent`

例子

```
var emailBody = "1st line.\n 2nd line \n 3rd line";

emailBody = encodeURIComponent(emailBody);

href = "mailto:me@somesite.com?body=" + emailBody; 
```

检查[encodeURIComponent](https://stackoverflow.com/questions/53273283/react-conditional-rendering-inside-component-return-function)文档

# javascript - 使用 JavaScript 打开 2 个网站

> ID：10356331
> 
> 赞同：0
> 
> 时间：2012-04-27T18:56:49.407
> 
> 标签：javascript, redirect, dom-events, javascript-framework

我想制作一个脚本，无论您用鼠标单击该网站的哪个位置，都可以在新选项卡中打开一个链接，每 10 个概率选择一次。

这是我到目前为止所拥有的

```
<a href="newwindow.html" target="_blank">New Window</A>
<a href="http://www.example.org" onclick="window.open('http://www.google.com','newwin');">click me</a>

<script type="text/javascript">
var random=Math.floor(Math.random()*11);
alert(random);
window.open("http://www.google.com","windowName");
</script> 
```

我在想一个不可见的 div，当你点击它时它就会消失。

此外，当用户打开该链接后，我必须让他不会第二次打开它，所以我必须进行会话。这一步是可选的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T19:06:16.390

```
<script type="text/javascript">
    document.body.onclick = function () {
        var rand = Math.floor(Math.random()*10);    // 0-9 randomly
        if (rand === 0) {
            window.open("http://www.google.com","_tab");
        }
    }
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T19:01:48.847

就这个怎么样？

```
<script type="text/javascript">
    document.body.onclick = function () {
        var rand = Math.floor(Math.random()*10);    // 0-9 randomly
        if (rand === 0) {
            alert("1 in 10 chance!");
        }
    }
</script> 
```

​</p>

# xcode - 类似 Xcode 的导航窗格/抽屉

> ID：10356333
> 
> 赞同：1
> 
> 时间：2012-04-27T18:57:03.783
> 
> 标签：xcode, menu, floating, sliding, drawer

我想知道 Apple 用什么来开发 XCode 的 GUI 本身中的滑动抽屉菜单。例如，可以切换调试、导航和实用程序区域。

例如.. [https://developer.apple.com/library/mac/#documentation/ToolsLanguages/Conceptual/Xcode4UserGuide/Introduction/Introduction.html](https://developer.apple.com/library/mac/#documentation/ToolsLanguages/Conceptual/Xcode4UserGuide/Introduction/Introduction.html)

当然，我可以轻松地在代码中调整视图的大小和移动视图以创建（昂贵的）显示/隐藏动画，我只是想知道是否有人知道模仿此显示/隐藏功能的现有可可库项目。像 iPad 的 SplitViewController 一样，具有隐藏其中一个视图的能力。我的目标应用程序适用于 OS X。非常感谢。

具有解决方案的类似主题，但不确定他们是否在谈论相同的概念： [如何在 xcode iphone 中创建滑动菜单，就像主 android 菜单滑动菜单一样？](https://stackoverflow.com/questions/6872407/how-do-i-create-a-sliding-menu-in-xcode-iphone-like-the-main-android-menu-slidin)

PS我也会对浮动/可停靠菜单（例如，photoshop，visual studio）感到兴奋

# java - 使用 Java 的时间差异 - 从午夜之前到午夜之后

> ID：10356339
> 
> 赞同：-1
> 
> 时间：2012-04-27T18:57:33.037
> 
> 标签：java, time

我正在开发一个程序，该程序将返回两个时间点之间经过的时间差（多少小时，分钟）。我还需要能够计算时间，如果时间是晚上 11:00 到凌晨 3:00。我将如何执行此操作，以及计算从上午 8:00 到下午 5:00 的时间？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T19:00:52.733

```
public static void main(String[] av) {
    /** The date at the end of the last century */
    Date d1 = new GregorianCalendar(2000, 11, 31, 23, 59).getTime();

    /** Today's date */
    Date today = new Date();

    // Get msec from each, and subtract.
    long diff = today.getTime() - d1.getTime();

    System.out.println("The 21st century (up to " + today + ") is "
        + (diff / (1000 * 60 * 60 * 24)) + " days old.");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-12-10T19:09:57.520

如果有人正在寻找解决方案，您可以这样[做](https://stackoverflow.com/a/49792561/6031927)

```
String time = "22:00-01:05";
String[] parts = time.split("-");

LocalTime start = LocalTime.parse(parts[0]);
LocalTime end = LocalTime.parse(parts[1]);
if (start.isBefore(end)) { // normal case
    System.out.println(Duration.between(start, end));
} else { // 24 - duration between end and start, note how end and start switched places
    System.out.println(Duration.ofHours(24).minus(Duration.between(end, start)));
} 
```

# php - 在 PHP 中定义的计算机中启动会话

> ID：10356341
> 
> 赞同：0
> 
> 时间：2012-04-27T18:57:36.777
> 
> 标签：php, session, unique, defined

我是这个论坛的新手，但我每次有问题时都​​会使用它。

我需要使用 PHP 在定义的计算机中启动会话，我认为使用的方法是从计算机（Windows、Mac、Linux 或 Android）获取唯一的序列号，但我找不到获得唯一的方法任何设备的 SN（最好是主板 SN 或 Bios）都可以使用 PHP 或 JS。

获得该 SN，我可以将其保存在数据库中，以便每次有人开始会话时进行比较。

你有更好的主意吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T19:36:01.930

如上面的评论所示，

我不相信它实际上可以识别任何计算机，如果它没有以正确的方式合作。

如果您想将计算机彼此区分开来，您需要一些信息，一些可比较的差异。但是，来自用户的所有内容都可以由用户修改，因此您不能依赖它。

如果希望从服务器接收响应，IP 地址不能随机更改为任何值，但可以使用代理服务器。您也不能使用任何标题或任何类型的浏览器数据，因为第一个更熟练的用户可以在几秒钟内更改它——想想 netcat。

# qt - QMetaObject::invokeMethod 在...时不起作用

> ID：10356343
> 
> 赞同：4
> 
> 时间：2012-04-27T18:57:48.657
> 
> 标签：qt, static-members

...从静态类和非主线程调用。简而言之，我有一个类“sapp”，它有另一个静态类“tobj”作为静态成员。为了避免静态订单初始化失败，tobj 在 sapp 的方法中声明，该方法又返回 tobj 实例的指针。我的问题是， tobj 有一个应该在构造函数中启动的计时器，并且 tobj 可能由非主线程创建。QTimer 不能由主线程以外的线程启动（或者我猜是没有事件循环的线程）。出于这个原因，我通过 QMetaObject::invokeMethod + Qt::QueuedConnection 调用 QTimer::start 以避免线程问题，但是它不起作用，QTimer::start 永远不会被调用。我调查了一下这个问题，看起来，QTimer::start 没有被调用，因为 QTimer' s parent（在这种情况下为 tobj）被声明为静态的。如果我将 tobj 声明为非静态成员，则一切正常。

我不太了解 Qt 的内部结构，这可能是一个错误还是我做错了什么？

这是代码：

```
class tobj : public QObject
{
    Q_OBJECT

    QTimer timer;
private slots:
        void timeout();

public:
    tobj();
};

class sapp : public QObject
{
    Q_OBJECT

public:
    static tobj* f();
};

void tobj::timeout()
{
    qDebug() << "hi";
}

tobj::tobj()
{
    connect(&timer, SIGNAL(timeout()), this, SLOT(timeout()));
    timer.setInterval(500);
    qDebug() << QMetaObject::invokeMethod(&timer, "start", Qt::QueuedConnection); // returns true, but never invoked.
}

tobj* sapp::f()
{
    static tobj ff;
    return &ff;
} 
```

这是测试项目的链接，包含 1 个标头和 1 个 cpp 文件[http://dl.dropbox.com/u/3055964/untitled.zip](http://dl.dropbox.com/u/3055964/untitled.zip)

我正在 Qt 4.8.0 和 MSVC 2010 上进行测试。

非常感谢，非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-04T12:21:28.850

我觉得你做得过火了。Qt 的美妙之处在于您尝试做的事情非常容易。

您似乎认为 a`QTimer`会以某种方式神奇地中断您正在运行的线程以执行回调。在 Qt 中从来没有这种情况。在 Qt 中，所有事件和信号都被传递到线程中运行的事件循环，并且该事件循环将它们分派给 QObjects。因此，在一个线程中，由于 Qt 的事件和信号/槽框架，不存在并发风险。此外，只要您依赖 Qt 的信号槽和事件机制在线程之间进行通信，您就不需要使用任何其他访问控制原语，因为在每个线程中，事情都是序列化的。

因此，您的问题是您永远不会在线程中运行事件循环，因此永远不会拾取超时事件并将其分派到您已连接到`timeout()`信号的插槽。

A`QTimer`可以在任何线程中创建和启动，只要您启动它的线程是计时器所在的线程`QObject`。QObjects 属于您在其中创建它们的线程，除非您使用`QObject::moveToThread(QThread*)`.

`invokeMethod`完全没有必要使用来启动计时器。毕竟，你是从它所在的同一个线程启动计时器。顾名思义，排队的信号槽连接会将信号排入队列。具体来说，当您发出信号时，a`QMetaCallEvent`将排队等待接收器插槽所在的 QObject。一个事件循环必须在槽对象的线程中运行以获取它并执行调用。您永远不会在线程中调用任何东西来清空该队列，因此没有什么可以调用您的`timeout()`插槽。

至于静态成员初始化惨败，您可以自由地 `main()`在主线程中的 QObject 中或内部构建整个 T 对象，然后将其移动到新线程——这就是不使用 QtConcurrent 时的做法. 使用 QtConcurrent 时，您的可运行函数可以构造和破坏任意数量的 QObject。

要修复您的代码，lambda 应该旋转一个事件循环，因此：

```
[] () {
    sapp s;
    s.f();
    QEventLoop l;
    l.exec();
} 
```

下面我附上一个 SSCCE 示例，说明如何在 Qt 中惯用地完成它。如果不想使用 QtConcurrent，那么会有两个变化：你想`qApp->exit()`在你`exit()`线程的事件循环之后立即执行——否则，`a.exec()`永远不会退出（它怎么知道？）。您还想`wait()`在退出`main()`函数之前在线程上 - 破坏`QThreads`仍在运行的线程是不好的风格。

这些`exit()`函数仅表示事件循环完成，将它们视为设置标志，而不是真正自行退出任何东西——因此它们与 C 风格的 API 不同`exit()s`。

请注意，a本身`QTimer`就是一个`QObject`。出于性能原因，如果计时器经常触发，则使用 a 会便宜得多，它`QBasicTimer`是由`QObject::startTimer()`. 然后你会重新实现`QObject::timerEvent()`. 这样可以避免信号槽调用的开销。根据经验，直接（非排队）信号槽调用的成本大约相当于将两个 1000 个字符的 QString 连接在一起的成本。请参阅[我的基准](https://stackoverflow.com/questions/10838013/large-use-of-signals-and-slots-does-affect-application-performance/10839370#10839370)。

旁注：如果您要发布简短的示例，直接发布整个代码可能会更容易，这样它就不会在未来丢失——只要它们都在一个文件中。将 100 行示例代码散布在三个文件中会适得其反。见下文，关键是`#include "filename.moc"`在末尾`filename.cpp`。它还有助于一次定义和声明方法，Java 风格。一切都是为了保持简短易懂。毕竟，这是一个例子。

```
//main.cpp
#include <QtCore/QTimer>
#include <QtCore/QDebug>
#include <QtCore>
#include <QtCore/QCoreApplication>

class Class : public QObject
{
    Q_OBJECT
    QTimer timer;
    int n;
private slots:
    void timeout() {
        qDebug() << "hi";
        if (! --n) {
            QThread::currentThread()->exit();
        }
    }
public:
    Class() : n(5) {
        connect(&timer, SIGNAL(timeout()), SLOT(timeout()));
        timer.start(500);
    }
};

void fun()
{
    Class c;
    QEventLoop loop;
    loop.exec();
    qApp->exit();
}

int main(int argc, char *argv[])
{
    QCoreApplication a(argc, argv);
    QtConcurrent::run(&fun);
    return a.exec();
}

#include "main.moc" 
```

# apache-flex - 通过将字符串转换为类来推送视图？

> ID：10356345
> 
> 赞同：1
> 
> 时间：2012-04-27T18:57:50.007
> 
> 标签：apache-flex, mobile, flex4, flash-builder

我目前正在使用 Flashbuilder 4.6 创建移动应用程序，我希望根据用户选择的菜单项将用户推送到视图。下面的代码显示了我如何尝试将选定列表项中的字符串转换为类对象，然后将其传递给 pushView 的参数：

```
<fx:Script>
    <![CDATA[
        import mx.collections.*;            
        import spark.components.SplitViewNavigator;
        import spark.components.ViewNavigator;
        import spark.events.IndexChangeEvent;
        import spark.events.ViewNavigatorEvent;
        import spark.managers.PersistenceManager;
        import spark.skins.mobile.SplitViewNavigatorSkin;

        public var menuAC:ArrayCollection;          
        public var j_array:Array = [{label:"Home", data:"NLView"}, 
            {label:"All Jobs", data:"JList"}, 
            {label:"Company Profiles", data:"SView"}, 
            {label:"Search By Sector", data:"JView"}];

        protected function list_changeHandler(event:IndexChangeEvent):void
        {
            var selectedItem:String = new String(list.selectedItem.data);
            //trace("Selected Item = " + selectedItem);
            var splitNavigator:SplitViewNavigator = navigator.parentNavigator as SplitViewNavigator;
            var detailNavigator:ViewNavigator = splitNavigator.getViewNavigatorAt(0) as ViewNavigator;
            splitNavigator.hideViewNavigatorPopUp();

            if(list.selectedItem.data == "NewListView")
            {
                var myClass:Class = getDefinitionByName(selectedItem) as Class;                 
                trace("View Class = " + myClass);
                detailNavigator.pushView(myClass);
            }
            else if(list.selectedItem.data)
            {

            }

        }

        protected function view1_viewActivateHandler(event:ViewNavigatorEvent):void
        {

            if(data.view == "JSFilt")
            {
                menuAC = new ArrayCollection(j_array);  
            }

            list.dataProvider = menuAC;
            // TODO Auto-generated method stub
            var splitNavigator:SplitViewNavigator = navigator.parentNavigator as SplitViewNavigator;
            var detailNavigator:ViewNavigator = splitNavigator.getViewNavigatorAt(1) as ViewNavigator;
            splitNavigator.hideViewNavigatorPopUp();
        }

    ]]>
</fx:Script>
<fx:Declarations>
    <!-- Place non-visual elements (e.g., services, value objects) here -->
</fx:Declarations>

<s:BitmapImage width="100%" height="100%" source="@Embed('assets/images/sidebg.png')" fillMode="repeat"/>
<s:BitmapImage horizontalCenter="0" top="5" width="175" height="130" source="@Embed('assets/images/G_S_Logo_170x130.png')"/>

<s:List id="list" left="0" right="0"
        color="0xFFFFFF" contentBackgroundColor="0x101010"
        fontSize="20" width="280"
        alternatingItemColors="[0x202020,0x2a2a2a]"
        top="140" horizontalCenter="0" bottom="200"
        downColor="0x70B2EE"
        selectionColor="0x70B2EE"
        change="list_changeHandler(event)"> 
    <s:itemRenderer>
        <fx:Component>
            <s:IconItemRenderer messageStyleName="myFontStyle" fontSize="22" height="70" 
                                labelField="label"
                                messageField="" 
                                />
        </fx:Component>
    </s:itemRenderer>       
</s:List> 
```

我也尝试过使用以下命令，但也没有用：

```
var viewClass:Class = Class(getDefinitionByName(getQualifiedClassName(selectedItem))); 
```

有没有人知道如何查看列表中选择的值，然后使用该字符串名称将应用程序推送到视图，因为 pushView 方法不接受字符串？

* * *

感谢您的建议，我喜欢将类添加到数组然后将其传递给 pushView 的想法。我过去曾尝试过，但它没有用，所以我用下面的代码尝试了你的方法：

```
public var jobs_array:Array = [{label:"Home", data:"NewListView", class:NewListView},
                {label:"All", data:"JList"}, 
                {label:"C Prof's", data:"SView"}, 
                {label:"S By S", data:"JSView"}]; 
```

如您所见，我已尝试实施您在第一行建议的内容，但出现以下错误：

```
1084: Syntax error: expecting colon before rightbrace.
1084: Syntax error: expecting identifier before class.
1084: Syntax error: expecting identifier before rightbrace. 
```

这必须是一个简单的语法，但我看不到，有人可以帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T06:46:15.287

```
var imageClass:Class=getDefinitionByName("com.robaldred.composers."+imgclass) as Class; 
```

请像这样添加包名称：`com.robaldred.composers.`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T10:31:44.533

是的..这是使用字符串 var str:String="roof"; 绑定 spark viewstack slelected child 的答案。viewstack.selectedChild=NavigatorContent(viewstack.getChildByName(str));

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-28T17:31:53.497

为什么不直接在数据中放一个对 Class 本身的引用，不用担心使用 String 来表示它。

您的数据项将如下所示：

```
var data:Array = [
{ label: "Item 1", class: ClassToUseForItem1 },
{ label: "Item 2", class: ClassToUseForItem2 },
{ label: "Item 3", class: ClassToUseForItem3 } ]; 
```

现在你可以做`pushView(list.selectedItem.class)`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-27T19:15:37.510

`getDefinitionByName(selectedItem)`几乎是你想要的，但不完全是。看，`selectedItem`是您数组中的项目之一，例如`{label:"All Jobs", data:"JList"}`，不仅仅是`"JList"`.

`getDefinitionByName(getQualifiedClassName(selectedItem))`绝对不是您想要的，因为`getQualifiedClassName`将返回`selectedItem`. 在这种情况下，那将是`Object`. 然后`getDefinitionByName`将返回 Object 类。

* * *

`getDefinitionByName(selectedItem.data)`应该适合你。例如，`selectedItem.data`应该是，然后应该返回 JList 类对象。`JList``getDefinitionByName`

# clojure - 在传递非原始对象数组时避免反射

> ID：10356349
> 
> 赞同：1
> 
> 时间：2012-04-27T18:58:02.037
> 
> 标签：clojure

我`com.rabbitmq.client.ConnectionFactory.newConnection(Address[])`从 Clojure 1.4.0 调用，如下所示：

```
(defn connect [#^ConnectionFactory factory, addrs]
  (.newConnection factory (into-array Address addrs))) 
```

该调用有效，但会引发反射警告：

```
call to newConnection can't be resolved. 
```

回顾`ConnectionFactory`类，显然有一种形式只接受一个类型的参数`com.rabbitmq.client.Address[]`，这正是`(into-array Address ())`返回的内容：

```
com.mefesto.wabbitmq=> (pprint (filter #(.. (.toString %)
                                            (contains "newConnection"))
                               (seq (.getDeclaredMethods
                                     ConnectionFactory))))
(#<Method public com.rabbitmq.client.Connection
    com.rabbitmq.client.ConnectionFactory.newConnection(
      com.rabbitmq.client.Address[])
    throws java.io.IOException>
 #<Method public com.rabbitmq.client.Connection
    com.rabbitmq.client.ConnectionFactory.newConnection(
      java.util.concurrent.ExecutorService,
      com.rabbitmq.client.Address[])
    throws java.io.IOException>
 #<Method public com.rabbitmq.client.Connection
    com.rabbitmq.client.ConnectionFactory.newConnection()
    throws java.io.IOException>
 #<Method public com.rabbitmq.client.Connection
    com.rabbitmq.client.ConnectionFactory.newConnection(
      java.util.concurrent.ExecutorService)
    throws java.io.IOException>)

com.mefesto.wabbitmq=> (into-array Address ())
#<Address[] [Lcom.rabbitmq.client.Address;@953235f> 
```

我需要做些什么来避免在这里反射？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T21:00:45.667

不幸的是，高阶函数总是使用 Object 作为它们的参数类型，并且编译器还没有在调用 HOF 中遵循类型提示。这基本上是因为它编译了匿名函数

```
#(.. (.toString %) (contains "newConnection")) 
```

在它知道如何使用它之前。这很可能很快就会改善。

如果您可以解决以下问题，您也许可以解决此问题`filter`

# java - 过滤涉及安全约束的请求

> ID：10356361
> 
> 赞同：0
> 
> 时间：2012-04-27T18:58:53.517
> 
> 标签：java, ajax, authentication, servlet-filters, security-constraint

我有一个 Java Web 应用程序，它使用安全约束来锁定对资源的访问。当 Ajax 请求需要身份验证时，我试图操纵 HTTP 401 响应，因此我创建了一个过滤器，用于观察响应中的 HTTP 状态并在需要时进行相应的修改。

问题是，似乎如果需要身份验证，过滤器直到 401 被发送到浏览器之后才会被调用。似乎安全约束在请求处理链中的过滤器之前。我的过滤器的 url 模式比任何安全约束都更通用。平台是 WebSphere。

我看不到 Servlet 2.5 规范中指定了安全约束和过滤器的优先级。我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T19:42:38.063

首先，如果未指定，则表示将其保留为容器的实现细节。
所以你应该`WebSphere`具体研究一下。
我认为同样的情况也会发生`Tomcat`，因为安全约束（如果我没记错的话）是通过实现的`Valves`，因此会在请求链中的应用程序代码之前。
从我的角度来看，这是有道理的，因为如果您将保护分配给您的容器，那么如果请求到达您的过滤器，那么它应该已经通过了您的容器的身份验证机制（我的观点是过滤器是您的资源的一部分）。
在Tomcat中，您可以通过替换来解决您的`Filter`问题`Valve`

# jquery - jQuery 从列表中选择

> ID：10356366
> 
> 赞同：1
> 
> 时间：2012-04-27T18:59:13.873
> 
> 标签：jquery

我有以下列表：

```
<select id="id1">
    <option value="">Firstone</option>
    <option value="1">Secondone</option>
    <option value="2">Thirdone</option>
</select> 
```

我执行以下操作以从列表中选择“Secondone”：

```
$("#id1").val("1").attr('selected', 'selected'); 
```

这似乎没有选择它。

**如何从列表中选择“第二个”？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T19:00:20.590

要设置列表的选定值，您只需要使用`val()` `function`，无需设置选定的属性。

例子：

[jsFiddle](http://jsfiddle.net/wWEQU/)

```
$('#id1').val('1'); 
```

如果您试图从字面上获取当前选择的元素，您可以这样做：

```
var selectedElement = $("#id1").find(":selected"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T19:21:43.327

我相信这就是你想要的：`$("#id1 option[value='1']").attr('selected', 'selected');`

# javascript - Jquery从许多中删除类，将类添加到一个

> ID：10356369
> 
> 赞同：5
> 
> 时间：2012-04-27T18:59:20.513
> 
> 标签：javascript, jquery, optimization, addclass, removeclass

我发现自己做的一个常见操作如下：

```
<ul>
    <li>One</li>
    <li class="current">Two</li>
    <li>Three</li>
</ul>

var $allLi = $('li');

$allLi.click(function(){
    $allLi.removeClass('current');
    $(this).addClass('current');
}); 
```

有没有办法通过结合$allLi和$(this)并使用toggleClass来压缩它？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-27T19:08:26.800

乔纳森的解决方案应该可以正常工作，但我想提出一个不同的解决方案。

与其取消设置所有元素然后选择当前元素，不如只跟踪*当前*元素并仅对其执行操作？

```
<ul>
    <li>One</li>
    <li class="current">Two</li>
    <li>Three</li>
</ul>

<script type="text/javascript">
    (function () {
        var current = $("li.current");
        $("li").click(function () {
            current.removeClass("current");
            current = $(this);
            current.addClass("current");
        });
    }());
</script> 
```

它*“更长”*但也更有效。

我的解决方案旨在让所有状态都在 JavaScript 中，而不是部分在 DOM 中。`toggleClass`绕过这个原则。与其说是“嘿，看起来这是一种非常长且超级复杂的做简单事情的方式”，那么它背后有一个想法。如果您的应用程序状态变得比仅选择一个元素更复杂，如果您尝试将该状态填充到 DOM 中，您将遇到问题。DOM 只是一个“视图”，将您的状态保存在“模型”（JS 代码）中。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-27T19:02:11.307

我相信您可以添加它，并将其从兄弟姐妹中删除：

```
$("li").on("click", function(){
  $(this)
    .addClass("current")
    .siblings()
      .removeClass("current");
}); 
```

演示：http: [//jsbin.com/owivih/edit#javascript,html,live](http://jsbin.com/owivih/edit#javascript,html,live)

# javascript - 将 JSON 对象字符串数组转换为 JS 对象数组

> ID：10356370
> 
> 赞同：21
> 
> 时间：2012-04-27T18:59:22.203
> 
> 标签：javascript, jquery, json

我想将 JSON 字符串数组转换为 JSON 对象数组，而无需遍历每个项目并使用 JSON.parse 对其进行解析。

例子：

```
var s=[
  '{"Select":"11", "PhotoCount":"12"}',
  '{"Select":"21", "PhotoCount":"22"}',
  '{"Select":"31", "PhotoCount":"32"}']; 
```

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-04-27T19:01:36.823

如果你有一个 JSON 对象的 JS 数组：

```
var s=['{"Select":"11","PhotoCount":"12"}','{"Select":"21","PhotoCount":"22"}']; 
```

你想要一个对象数组：

```
// JavaScript array of JavaScript objects
var objs = s.map(JSON.parse);

// ...or for older browsers
var objs=[];
for (var i=s.length;i--;) objs[i]=JSON.parse(s[i]);

// ...or for maximum speed:
var objs = JSON.parse('['+s.join(',')+']'); 
```

*请参阅浏览器比较[的速度测试](http://jsperf.com/json-parse-array-of-objects)。*

* * *

如果您有一个表示对象数组的 JSON 字符串：

```
var s='[{"Select":"11","PhotoCount":"12"},{"Select":"21","PhotoCount":"22"}]'; 
```

你想要一个对象数组：

```
// JavaScript array of JavaScript objects
var objs = JSON.parse(s); 
```

* * *

如果你有一个对象数组：

```
// A JavaScript array of JavaScript objects
var s = [{"Select":"11", "PhotoCount":"12"},{"Select":"21", "PhotoCount":"22"}]; 
```

…并且你想要它的 JSON 表示，然后：

```
// JSON string representing an array of objects
var json = JSON.stringify(s); 
```

…或者如果你想要一个 JSON 字符串的 JavaScript 数组，那么：

```
// JavaScript array of strings (that are each a JSON object)
var jsons = s.map(JSON.stringify);

// ...or for older browsers
var jsons=[];
for (var i=s.length;i--;) jsons[i]=JSON.stringify(s[i]); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-27T19:01:09.037

```
var json = jQuery.parseJSON(s); //If you have jQuery. 
```

由于评论看起来很混乱，请在将这些方括号括在引号内之后使用 parse 函数。

```
var s=['{"Select":"11","PhotoCount":"12"}','{"Select":"21","PhotoCount":"22"}']; 
```

把上面的代码改成

```
var s='[{"Select":"11","PhotoCount":"12"},{"Select":"21","PhotoCount":"22"}]'; 
```

例如：

```
$(document).ready(function() {
    var s= '[{"Select":"11","PhotoCount":"12"},{"Select":"21","PhotoCount":"22"}]';

    s = jQuery.parseJSON(s);

    alert( s[0]["Select"] );
}); 
```

然后使用解析函数。它肯定会奏效。

编辑：非常抱歉我给出了错误的函数名。它是 jQuery.parseJSON

[jQuery](http://code.jquery.com/jquery-1.7.2.min.js)

[json api](http://api.jquery.com/jQuery.parseJSON/)

**编辑（2020 年 4 月 30 日）：**

编辑，因为我对此答案表示赞成。有一个浏览器原生函数可以代替 JQuery（对于非 JQuery 用户），`JSON.parse("<json string here>")`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T19:03:06.710

如果你真的有：

```
var s = ['{"Select":"11", "PhotoCount":"12"}','{"Select":"21", "PhotoCount":"22"}']; 
```

然后简单地说：

```
var objs = $.map(s, $.parseJSON); 
```

[这是一个演示。](http://jsfiddle.net/minitech/q9Htt/)

# ajax - 内容类型 text/json 是否具有安全隐患？

> ID：10356373
> 
> 赞同：1
> 
> 时间：2012-04-27T18:59:51.877
> 
> 标签：ajax, json, http, xss, content-type

我应该改用 text/plain 吗？或者当涉及到跨站点安全性时，text/json 实际上是否会变得相同。

无论哪种方式，内容都是有效的 JSON，我只是想确保我对 Content-Type 标头是正确的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T19:21:48.947

没有影响为请求回答选择 mime 类型的安全考虑。请注意，JSON 的正确 mime 类型是 application/json。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T05:09:18.800

是的，存在安全隐患。浏览器——尤其是 IE——通常会第二次猜测内容类型。原因是一段时间前，服务器以相同的内容类型交付所有内容，因此浏览器必须进行猜测才能正确显示内容。Text/plain 因内容嗅探（第二次猜测）而臭名昭著。如果您的 json 在某些值中包含 html，那么如果您直接在浏览器中打开该 url，浏览器可能会确定它的 HTML 并呈现它。这可能导致 XSS。

# git - 如何在树中查看变更集的日志？

> ID：10356375
> 
> 赞同：0
> 
> 时间：2012-04-27T19:00:00.387
> 
> 标签：git

我想在创建变更集时查看它的 git 日志。说我有

```
$ git log --oneline
123456 most recent stuff
243456 slightly older
153456 a while ago
123354 jeez I forgot about this
888234 is this even the same project?
123999 initial commit 
```

我想记住“天哪，我忘了这个”提交做了什么。我相信我能做到

```
$ git diff 888234..123354 
```

看到变化。这真的是唯一的方法吗？它看起来很笨重，因为它迫使我查找两个 SHA，而不仅仅是我感兴趣的一个。

有没有办法简洁地做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T19:02:32.477

试试`git show 123354`这就是你要找的吗？

# c# - 如何在 .NET 3.5 中正确模拟

> ID：10356377
> 
> 赞同：2
> 
> 时间：2012-04-27T19:00:11.080
> 
> 标签：c#, .net-3.5, mocking, covariance, contravariance

这必须是微不足道的，但是对于 TDD 来说还是很新的，我想不出正确的方法来做到这一点。

假设我们有一个 WinForms 应用程序，作为其启动过程的一部分，它在给定文件夹中查找 DLL 以动态填充其主菜单栏。

这些 DLL 只是插件：它们都实现了一个接口，并且它们都将显示为菜单项。真的就这么简单。

我们将每个 DLL 称为`Module`.

现在，我想“嘿，史蒂夫，你将不得不模拟这些`Module`对象。让我们定义一个名为 的接口`IModule`，并让`Module`类实现它。这样你就可以随意模拟它们了”。

所以，让我写几行代码，特别是`IModule`和`Module`（我是在没有编译器支持的情况下直接写的，所以它可能无法编译）：

```
<!-- language: c# -->

public interface IModule {
    string Id { get; }
    string DisplayName { get; }
}

public class Module : IModule {
    public string Id { get; }
    public string DisplayName { get; }
    public string Path { get; private set; }

    public Module(FileInfo path) {
        Path = path.FullName;
    }
} 
```

而且，当我们这样做的时候，让我们实现将执行实际加载的类：

```
public class ModuleLoader {
    IEnumerable<DirectoryInfo> SearchPaths;

    public ModuleLoader(IEnumerable<DirectoryInfo> searchPaths) {
        SearchPaths = searchPaths;
    }

    public IEnumerable<IModule> LoadModules() {
        var modules = SearchPaths
            .Where(dir => dir.Exists)
            .SelectMany(dir => dir.GetFiles("*.dll").Select(dll => new Module(dll)));
        return modules;
    }

} 
```

问题来了：`LoadModules()`不会编译，因为——据我所知——差异问题。

错误信息如下：

> 无法将类型 System.Collections.Generic.IEnumerable<Module> 隐式转换为 System.Collections.Generic.IEnumerable<IModule>

这与[这个](https://stackoverflow.com/questions/2640738/c-sharp-cannot-implicitly-convert-type-listproduct-to-listiproduct)问题相同。

现在，一定有一些琐碎的事情让我无法理解。据我所知，`LoadModules()`退货`IEnumerable<IModule>`是一件好事™。将返回类型更改`IEnumerable<Module>`为当然会使代码编译，但它只会将问题转移到单元测试。

我有点困惑，也许我做错了（如果是这种情况，我很抱歉）。

那么，你会怎么做呢？我如何制作可`Module`模拟的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T19:19:20.553

您应该替换`var`为`IEnumerable<IModule>`并替换`new Module(dll)`为`(IModule) (new Module(dll))`

# python - 使用cleaned_data时的“TypeError：字符串索引必须是整数”

> ID：10356383
> 
> 赞同：1
> 
> 时间：2012-04-27T19:00:42.803
> 
> 标签：python, django, cleaned-data

错误发生在这里：

```
if request.method == 'POST':
        form = RegisterForm(request.POST)
        if form.is_valid():
            clean = form.cleaned_data

            username = clean['username']
            email = clean['email']
            password = clean['password']
            new_user = User.objects.create_user(username, email, password)
            new_user.save()
            new_account = Account(user=new_user, email=email)
            new_account.save() 
```

在线`username = clean['username']`上。我已经能够在其他地方成功使用这条确切的线路而没有问题。为什么现在是个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T19:07:46.897

您可能从表单的`clean()`方法中返回了错误的内容 - 您应该返回完整的`self.cleaned_data`字典。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T19:02:23.100

显然`cleaned_data`是给你一个字符串，而不是字典。

由于字符串只能按数字索引，因此会出现此错误。

尝试打印该值以查看发生了什么。

# c++ - 循环替换模板

> ID：10356384
> 
> 赞同：4
> 
> 时间：2012-04-27T19:00:45.410
> 
> 标签：c++, templates, recursion

我正在研究循环潜在的多维数组的东西，并且遇到了一些模板问题。这是我正在尝试做的事情的想法：

```
template<std::size_t D = 3>
class Deriv {
public:
    typedef typename boost::array<double, D> results_t;

    template<typename Iterator>
    results_t operator()(Iterator& objIterator)
    {
        double u;
        double um1;

        results_t derivs;

        for(results_t::index i = 0; i < D; ++i) {
           u = *objIterator;
           um1 = *(objIterator.left<i>(1));
           derivs[i] = u-um1;
        }
     }
   };
}; 
```

因此，它看起来有点令人困惑，但它使用了一个自定义迭代器，该迭代器具有一个`left`和`right`模板方法，其中模板参数是要向左或向右移动的维度，参数是偏移量。例如，如果`objIterator`指向`array[i][j][k]`，则`objIterator.left<0>(1)`返回指向 的迭代器`array[i-1][j][k]`。

显然我发布的内容不起作用，因为`i`不是编译时间，不能用作`left`. 我觉得递归可以在这里以某种方式通过替换 for 循环来实现这一点，但我不知道如何。

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T19:21:37.590

这是另一种方法：

```
template<std::size_t D = 3>
struct Deriv
{
    typedef typename boost::array<double, D> results_t;

private:
    template<std::size_t I>
    struct apply
    {
        template<typename Iterator>
        static void impl(results_t& derivs, Iterator& iter)
        {
            derivs[I] = *iter - *iter.template left<I>(1);
            apply<I + 1>::impl(derivs, iter);
        }
    };

    template<>
    struct apply<D>
    {
        template<typename Iterator>
        static void impl(results_t&, Iterator&) { }
    };

public:
    template<typename Iterator>
    results_t operator ()(Iterator& iter) const
    {
        results_t derivs;
        apply<0>::impl(derivs, iter);
        return derivs;
    }
}; 
```

我已经使用 VC++ 2010 进行了测试，但我怀疑它可能无法在更符合标准的编译器上编译。`D-1`如果您可以从through倒计时`0`而不是从`0`through倒计时`D-1`，那么以下应该没问题：

```
namespace detail
{
    template<std::size_t I>
    struct apply
    {
        template<typename ResultsT, typename Iterator>
        static void impl(ResultsT& derivs, Iterator& iter)
        {
            derivs[I] = *iter - *iter.template left<I>(1);
            apply<I - 1>::impl(derivs, iter);
        }
    };

    template<>
    struct apply<0>
    {
        template<typename ResultsT, typename Iterator>
        static void impl(ResultsT& derivs, Iterator& iter)
        {
            derivs[0] = *iter - *iter.template left<0>(1);
        }
    };
}

template<std::size_t D = 3>
struct Deriv
{
    typedef typename boost::array<double, D> results_t;

public:
    template<typename Iterator>
    results_t operator ()(Iterator& iter) const
    {
        results_t derivs;
        detail::apply<D - 1>::impl(derivs, iter);
        return derivs;
    }
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T19:16:12.067

我没有方便的 C++ 编译器，但这应该可以解决您的问题：

```
template<typename Iterator, int dimNo>
void processDim(results_t & derivs, Iterator& objIterator) {
    if(dimNo==-1) return;
    double u;
    double um1;
    u = *objIterator;
    um1 = *(objIterator.left<dimNo>(1));
    derivs[dimNo] = u-um1;

    processDim<Iterator,dimNo!=D?dimNo+1:-1>(derivs, objIterator);
}

template<typename Iterator>
results_t operator()(Iterator& objIterator)
{

    results_t derivs;
    processDim<Iterator, 0> (derivs,objIterator);
    return derivs;
} 
```

您的代码中也有一个隐藏的笑脸！

顺便说一句，如果您能够修改`Iterator`即将到来的类型，那么如果它是模板参数的唯一原因首先是为了性能，您可以让它接收维度作为常规参数（而不是模板参数）。我相信编译器会发现它可以简单地展开循环。这样，您就不需要任何丑陋的递归模板。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T19:22:33.653

总体思路，按照您认为合适的方式对其进行修改。

```
// recursive
template<typename Iterator, int I>
void apply(Iterator& objIterator, results_t &derivs, mpl::int_<I>) {
       u = *objIterator;
       um1 = *(objIterator.left<I>(1));
       derivs[I] = u-um1;
       apply(objIterator, derivs, mpl::int_<I-1>());
 }
// terminate
template<typename Iterator>
void apply(Iterator& objIterator, results_t &derivs, mpl::int_<-1>) {} 
```

也看看[http://www.boost.org/doc/libs/1_45_0/libs/mpl/doc/refmanual/for-each.html](http://www.boost.org/doc/libs/1_45_0/libs/mpl/doc/refmanual/for-each.html)

# reporting-services - 插入新的子组或将顺序更改为父子列表

> ID：10356390
> 
> 赞同：1
> 
> 时间：2012-04-27T19:01:06.603
> 
> 标签：reporting-services, ssrs-grouping

我想插入新的子组或将顺序更改为父子组列表。这是可行的吗？我可以在列表底部添加一个孩子。但我不知道如何移动行。

团体：

```
 Center
  Category
    Rollup3MgrLn 
      Rollup4MgrLn 
         Rollup5 
```

我将 Rollup3MgrLn 作为父级添加到 Rollup4MgrLn，并且 tablix SSRS 为新的 Rollup3MgrLn 组添加一列。然后我在 Rollup4MgrLn 上方插入一行并将 Rollup3MgrLn 移动到 Rollup4MgrLn 上方的单元格中，然后删除新创建的列。但是 Rollup4MgrLn 和 Rollup3MgrLn 组具有 tablix 区域。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T13:16:17.410

不，您不能简单地通过选择“上移”或“下移”来更改分组的顺序。您可以做的是编辑两个组并更改它们的分组表达式：

![在此处输入图像描述](../Images/69b77fe6d5b0673cc374ba225f6e5a87.png)

# c - dll 中控制台 i/o 的最佳选择

> ID：10356394
> 
> 赞同：1
> 
> 时间：2012-04-27T19:01:13.187
> 
> 标签：c, windows, dll, console, printf

我有一个基于 C 的程序（使用 VS2010 的 64 位多线程控制台应用程序），现在必须将其转换为 dll。从未使用过 dll，我试图找出从控制台获取数据的最佳方法。i/o 并不复杂：获取一个字符串，打印一个字符串：

```
while (1)
{
    printf(" Enter next data _ ");
    char input[500];
    gets(input);
    if (input[0] == '!')
       break;
    doSomething(input);
} 
```

似乎有几个选项，例如，allocConsole、popen、getStdOut 等我已经开始探索，但在我深入这片森林之前，有没有更简单、更直接的方法？如果我从一个小型 Windows 应用程序（而不是控制台应用程序）调用 DLL，整个事情会更容易吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T04:07:10.487

事实证明，当 exe 和 dll 都是控制台应用程序时， dll*将写入标准输出......*

# asp.net - Asp.net 复选框列表随机呈现跨度

> ID：10356395
> 
> 赞同：2
> 
> 时间：2012-04-27T19:01:18.100
> 
> 标签：asp.net, webforms, checkboxlist

我正在使用带有 RepeatLayout="UnorderedList" 的 asp.net asp:CheckBoxList

它始终将输出呈现为（为简洁起见，缺少一些值）

```
<ul class="checkbox unstyled">
  <li><input type="checkbox" value="17"><label>Label Name</label></li>              
</ul> 
```

但突然之间，我将一个跨度渲染到列表中

```
<ul class="checkbox unstyled">
  <li><span alt="17"><input type="checkbox" value="17"><label>Label Name</label></span></li>                
</ul> 
```

由以下代码生成

```
<div class="control-group" >                
  <label class="control-label" id="Label2">Available Mailing Lists</label>
    <div class="controls">            
      <asp:CheckBoxList id="chklSubs" runat="server" RepeatLayout="UnorderedList" CssClass="checkbox unstyled"></asp:CheckBoxList>
    </div>
</div> 
```

它弄乱了我的 CSS 并使列表中断。为什么我会得到这个跨度，我该如何摆脱它？

旁注我正在使用 twitter bootstrap 进行样式设置。

全输出

```
<ul id="ContentPlaceHolderDefault_override_innerPageOverRide_BoilerplateMainContentPlaceHolder_ctl00_SignUpCtl_4_chklSubs" class="checkbox unstyled">
  <li><span alt="7"><input id="ContentPlaceHolderDefault_override_innerPageOverRide_BoilerplateMainContentPlaceHolder_ctl00_SignUpCtl_4_chklSubs_0" type="checkbox" name="ctl00$ctl00$ctl00$ContentPlaceHolderDefault$override$innerPageOverRide$BoilerplateMainContentPlaceHolder$ctl00$SignUpCtl_4$chklSubs$0" value="7"><label for="ContentPlaceHolderDefault_override_innerPageOverRide_BoilerplateMainContentPlaceHolder_ctl00_SignUpCtl_4_chklSubs_0">Energy Express Newsletter</label></span></li>
</ul> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T08:09:18.337

如果您在控件上放置任何 CssClass 或其他属性，复选框将嵌套到一个跨度中。例如，如果您在代码中禁用复选框控件，则会在 span-tag 上设置“禁用”属性。我注意到它是因为 jQuery 无法使用输入选择器删除此属性（仅在 IE 中不起作用）。

这在所有普通浏览器中都有效，所以试试这个：

```
$("div#" + value + " input:checked").removeAttr('disabled'); 
```

你必须添加它才能让它在 IE 中工作：

```
$("div#" + value + " span").removeAttr('disabled'); 
```

看看这里： [C# asp.net: How to remove span tag from WebControl when rendering](https://stackoverflow.com/questions/2173331/c-sharp-asp-net-how-to-remove-span-tag-from-webcontrol-when-rendered)

# .htaccess - htaccess 仅将特定文件夹重定向到具有相同特定文件夹的另一个域，Magento 无法正常工作

> ID：10356405
> 
> 赞同：0
> 
> 时间：2012-04-27T19:02:06.993
> 
> 标签：.htaccess, url, magento, redirect

我正在尝试将 domain-1.org/store/* 重定向到 domain1.org/store/*

*   *=store/ 之后的任何内容都应添加到 URL 重定向的末尾。

这是我写的 htaccess 规则：

Options +FollowSymlinks -MultiViews
RewriteEngine on

RewriteCond %{HTTP_HOST} ^(?:www.)?domain-1.org$ [NC]
RewriteRule ^store-([a-z0-9-]+)/?$ [http://www.domain1.org/商店](http://www.domain1.org/store)$1/ [R=301,L]

这行不通。它只是将所有内容重定向到根 /store/ 文件夹。

在 Magento 代码中的某个地方（或在我们的服务器上，但我非常怀疑它，因为它不在 httpd.conf 或 custom_vhosts.conf 中）有一个全面重定向，将 domain-1.org/store/* 重定向到 domain1.org /store root 而不是相对相同的路径。

这些是它导致的问题：

我试图在服务器根目录和根 magento 文件夹中的 .htaccess 中强制重定向，没有应用任何规则。我已经阅读并尝试了许多不同的 HTACCESS 规则，但它们似乎都不起作用。

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T19:30:05.550

我相信这里的问题是你试图匹配 www 和没有 www 但你使用的是条件组。我认为这可以通过使用正则表达式将组作为可选来轻松实现。试试这个：

```
RewriteCond %{HTTP_HOST} ^(www\.)?domain-1.org$ [NC]
RewriteRule ^store-([a-z0-9-]+)/?$ http://www.domain1.org/store$1/ [R=301,L] 
```

# iphone - 接收订阅状态时 XMPPUserMemoryStorageObject 类出现问题

> ID：10356410
> 
> 赞同：0
> 
> 时间：2012-04-27T19:02:30.110
> 
> 标签：iphone, ios, xmpp, xmppframework

我正在开发一个 iOS 聊天应用程序并使用这个[XMPP 框架](https://github.com/robbiehanson/XMPPFramework)

我实现了**XMPPRoster**元素以及**XMPPRosterMemoryStorage**类来向其他用户发送订阅请求。

应用委托上的实现是这样的：

```
XMPPRosterMemoryStorage *rosterMemoryStorage = [[XMPPRosterMemoryStorage alloc] init];
xmppRoster = [[XMPPRoster alloc] initWithRosterStorage:rosterMemoryStorage];
[xmppRoster addDelegate:self delegateQueue:dispatch_queue_create("com.app.xmpproster", NULL)]; 
```

当我收到来自另一方的订阅元素存在时，问题就出现了。应用程序崩溃，这是由于**XMPPUserMemoryStorageObject**类中的一个名为**updateWithItem**的方法所致。

github中为此打开了一个[问题](https://github.com/robbiehanson/XMPPFramework/issues/14)，但修复并没有解决我的问题。

我会很感激帮助。谢谢。

# javascript - 在数组中定义间隔

> ID：10356419
> 
> 赞同：1
> 
> 时间：2012-04-27T19:03:25.510
> 
> 标签：javascript, jquery

我有一个具有多个相等值的数组

[1,1,1,1,2,3,4,5,5,5,5,1,1,1,1,2,2,2,2,4,5,5,5,9,9 ,9.9]

我想要一种通过分隔相等值来获取新数组的方法。

例如，新数组的值将是 [1,1,1,1] [5,5,5,5] [1,1,1,1] [2,2,2,2] [5,5, 5] [9,9,9,9]

对于那些新数组，我必须在项目更改时找到索引。

这是我迄今为止尝试过的

```
indices = []; // fill with information when items in array change
arreglo = [1,1,1,1,2,3,4,5,5,5,5,1,1,1,1,2,2,2,2,4,5,5,5,9,9,9.9];
for ( u=0; u <= arreglo.length; u++){
            if ( arreglo[u] !=  arreglo[u + 1])
            indices.push(u);
            } 
```

这个想法是找到最大数组的索引，然后在其中循环以创建新数组。

使用循环我会从 0 到索引 [0]，然后从索引 [0] 到索引 [1] 等等。

它不能正常工作，有问题。有没有有效的方法来做到这一点？

更新：这不是家庭作业，它是为客户准备的网站。我在[需要想法之前提出了一个问题：Selecting rows in table](https://stackoverflow.com/questions/10323931/need-ideas-selecting-rows-in-table) but could not make it with mysql 所以我决定使用 jQuery

{ 这是我正在使用的真实代码[http://jsfiddle.net/U58jh/](http://jsfiddle.net/U58jh/)

在 jsfiddle 示例中，这很好用，但在使用来自 php 生成的页面的不同数据时并不总是如此。

脚本必须找到最后一个日期 (fecha) 与最后一个百分比 (Porcentaje final) 相等。}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T19:07:04.400

一个解法 ：

```
//the result array, holding other arrays
var array_map = {};

var arreglo = [1,1,1,1,2,3,4,5,5,5,5,1,1,1,1,2,2,2,2,4,5,5,5,9,9,9.9];

for ( u=0; u <= arreglo.length; u++){

        //grab a number from the input array
        var item = arreglo[u];

        //get an object from array_map
        var indices = array_map[item];

        //if the object does not exist ...
        if (!indices) {
            indices = []; // ... create it ^^ ....
            array_map[item] = indices; //... and store it in the result.
        }

        //push the number into the object
        indices.push(item);
}

console.log(array_map); 
```

你有一个错误： u 在你的循环中让你迭代索引，而不是值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T19:08:43.557

至于指数：

```
var prev = false,
    indeces = [];

for(var i=0; i<arreglo.length; i++){
    if(arreglo[i] !== prev){
        prev = arreglo[i];
        indices.push(i);
    }
} 
```

...但是，这不会创建您单独的数组（但我也没有看到您正在尝试在代码中这样做）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T19:45:47.173

```
indices = []; // fill with information when items in array change
arreglo = [1,1,1,1,2,3,4,5,5,5,5,1,1,1,1,2,2,2,2,4,5,5,5,9,9,9,9];

array[0]=[]

for(var i = 0 ; i < arreglo.length ; i++ ){
 var value = arreglo[i]
 if (typeof(array[value]) == "undefined"){
  array[0].push(array[value])
  array[value]=[array[value]]
 }else{
  array[value].push(array[value])
 }
} 
```

这将为您提供包含“桶”的哈希位置列表。array[0] 是您可以迭代的位置列表，然后在每个位置都有您的值桶..so

```
array[0][0] == 1
array[1] = [1,1,1,1,1,1,1,1]
array[0][1] == 2
array[2] = [2,2,2,2,2,2] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-27T20:56:15.900

我认为在以前的版本中缺少某种数组。所以我的版本在下面。

此外，我想尽可能减少 IF 条件。

```
var arreglo = [1, 1, 1, 1, 2, 3, 4, 5, 5, 5, 5, 1, 1, 1, 1, 2, 2, 2, 2, 4, 5, 5, 5, 9, 9, 9.9];
// First of all sort the array
arreglo.sort();
var outPutArray = [];
var arrLength = arreglo.length;
var tmpArray = []

for (var i = 1; i <= arrLength; i++) {
var tmpValue = arreglo[i];
var previousValue  =arreglo[i-1];

tmpArray.push(previousValue)

if (tmpValue != previousValue) {
        outPutArray.push(tmpArray);

        // The values are differents, so empty temp array
        tmpArray = [];
    }
} 
```

# python - 格式化嵌套列表/元组

> ID：10356424
> 
> 赞同：0
> 
> 时间：2012-04-27T19:03:55.883
> 
> 标签：python, formatting

我有一个来自某个函数的输出（很长！），它看起来是这样的：

```
[[(0.0, 1.0, 2.0), (1.0, 2.0, 0.0), (2.0, 1.0, 0.0)], [(1.6324986294474886e-06, 1.000000272083105, 1.9999992744450537), (1.0, 1.9999985559929883, 9.626713411705526e-07), (1.9999957124111243, 1.000000714598146, 9.527975279416402e-07)], ......................, [(0.00016488526381860965, 1.0000274825531668, 1.9999267116402146), (0.9999999810184469, 1.9998541492231847, 9.723903843230245e-05), (1.9995669148822666, 1.000072183688789, 9.62532545797885e-05)]] 
```

我不喜欢输出的结构，但是在返回它的函数中使用它非常方便。

但我需要将输出格式化为这样：

```
0.0 1.0 2.0 A
1.0 2.0 0.0 B
2.0 1.0 0.0 C
1.6324986294474886e-06 1.000000272083105 1.9999992744450537 A
1.0 1.9999985559929883 9.626713411705526e-07    B
1.9999957124111243 1.000000714598146 9.527975279416402e-07  C 
```

我有这个代码：

```
obj = 'A', 'B', 'C'
for n in results():    
    for z in range(len(results()[0])):
        k = n[z], obj[z]
        print '\t'.join(map(str, k)) 
```

（'results'是函数名，返回大列表）

它给了我这个：

```
(0.0, 1.0, 2.0) A
(1.0, 2.0, 0.0) B
(2.0, 1.0, 0.0) C
(1.6324986294474886e-06, 1.000000272083105, 1.9999992744450537) A
(1.0, 1.9999985559929883, 9.626713411705526e-07)    B
(1.9999957124111243, 1.000000714598146, 9.527975279416402e-07)  C 
```

我可以得到这个，如果我没有在这段代码的行尾添加字母（A、B 或 C），那么，我想，也许可以以不同的方式添加它？

无论如何，希望能得到您的帮助！提前致谢！

一个意想不到的问题......我真的想将输出写入一个 .csv 文件，所以我使用而不是 print （现在我选择了使用列表并附加字母的选项，因为它对我来说更清楚）

```
with open('table.csv', 'wb') as f:
     writer = csv.writer(f)
    for n in results():    
        for z in range(len(res[0])):
            k = list(n[z])
            k.append(obj[z])
            writer.writerows ('\t'.join(map(str, k))) 
```

它实际上并不能正常工作，我只得到这个：

```
0 
. 
0 
1 
. 
0 
2 
. 
0 
A
.
.
. 
```

为什么我得到如此奇怪的格式，但不是我得到的打印？这对我来说是相当震惊的......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-27T19:24:54.343

如果它总是长度为 3，你应该查看`itertools`模块。就像是：

```
import itertools
for num, letter in itertools.izip(itertools.chain.from_iterable(bigList), itertools.cycle('ABC')):
    print '%f\t%s' % (num, letter) 
```

另外，我希望您实际上没有使用`for z in range(len(results()[0])):`，因为这将重新运行 results 函数，重新计算整个列表。仅供参考。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T19:14:44.890

完整的程序：

```
def results():
    return [[(0.0, 1.0, 2.0), (1.0, 2.0, 0.0), (2.0, 1.0, 0.0)], 
            [(1.6324986294474886e-06, 1.000000272083105, 1.9999992744450537),
             (1.0, 1.9999985559929883, 9.626713411705526e-07), 
             (1.9999957124111243, 1.000000714598146, 9.527975279416402e-07)], 
            [(0.00016488526381860965, 1.0000274825531668, 1.9999267116402146),
             (0.9999999810184469, 1.9998541492231847, 9.723903843230245e-05),
             (1.9995669148822666, 1.000072183688789, 9.62532545797885e-05)]]

obj = 'A', 'B', 'C'
for n in results():    
    for z in range(len(results()[0])):
        k = list(n[z])
        k.append(obj[z])
        print(','.join(map(str, k))) 
```

输出：

```
0.0,1.0,2.0,A
1.0,2.0,0.0,B
2.0,1.0,0.0,C
1.63249862945e-06,1.00000027208,1.99999927445,A
1.0,1.99999855599,9.62671341171e-07,B
1.99999571241,1.0000007146,9.52797527942e-07,C
0.000164885263819,1.00002748255,1.99992671164,A
0.999999981018,1.99985414922,9.72390384323e-05,B
1.99956691488,1.00007218369,9.62532545798e-05,C 
```

使用 python 2.5、2.6、2.7 和 3.2 对此进行了检查。

实现将字母添加到列表中。（需要列表构造函数，因为元组是常量，不能更改。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T19:16:23.053

将 map 调用中对 str 的调用替换为调用 wee 函数：

```
def foo(lst):
    return ' '.join(map(str,lst))

obj = 'A', 'B', 'C'
for n in results():    
    for z in range(len(results()[0])):
        k = n[z], obj[z]
        print '\t'.join(map(foo, k)) 
```

# javascript - 右键单击 swf 时选项菜单关闭

> ID：10356426
> 
> 赞同：0
> 
> 时间：2012-04-27T19:03:58.590
> 
> 标签：javascript, jquery, flash

我在页面上嵌入的 swf 对象上的点击事件遇到了一些问题。

- 当我单击一个热点时，什么也没有发生。

- 当我右键单击时，选项菜单会出现在我的鼠标实际位置之外。

有没有人有任何想法？这仅在 Firefox 12 中发生。

这是问题的一个示例（在排行榜上）： [http ://cache.boston.com/images/ads/testpages/wbmason042012_clst_PUSHDOWN.html](http://cache.boston.com/images/ads/testpages/wbmason042012_clst_PUSHDOWN.html)

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T20:31:45.803

我没有看到任何排行榜，但我可以肯定地说这个页面充满了 Flash 错误。看起来它正在尝试对机器进行一些直接寻址？

```
Error #2044: Unhandled AsyncErrorEvent:. text=Error #2095: flash.net.NetStream was unable to invoke callback onXMPData. error=ReferenceError: Error #1069: Property onXMPData not found on flyover.as$0.CustomClient and there is no default value.
at flyover/connectStream()[C:\Users\dwallace\Documents\HTML5Launchers\flyover\flyover.as:169]
at flyover/netStatusHandler()[C:\Users\dwallace\Documents\HTML5Launchers\flyover\flyover.as:141]
at flash.net::NetConnection/connect()
at flyover()[C:\Users\dwallace\Documents\HTML5Launchers\flyover\flyover.as:129] 
```

# ruby-on-rails - Rails Paperclip：不存储上传的文件

> ID：10356429
> 
> 赞同：0
> 
> 时间：2012-04-27T19:04:05.243
> 
> 标签：ruby-on-rails, paperclip

我有一个用例，其中用户上传了一个 CSV 文件，我只对提取的值感兴趣，但我仍然使用回形针来方便模型方向。

有没有办法告诉回形针不要存储附件？

我试过使用：

```
def before_save
 self.csv_attachment = nil
end 
```

但是文件仍然被存储。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T20:40:17.023

在保存模型之前，将属性设为 nil。

```
def create
  @user = User.new( params[:user] )
  @user.image = nil
  @user.save
end 
```

# python - 替换因重复转义的字符的最 Pythonic 方式是什么？

> ID：10356433
> 
> 赞同：1
> 
> 时间：2012-04-27T19:04:39.137
> 
> 标签：python, replace

我正在寻找以下不言自明的代码的pythonic和有效的替代品：

```
term = "< << >" # turn this into "( < )"
term.replace("<<", "#~").replace(">>", "~#").replace(">", ")").replace("<", "(").replace("#~", "<").replace("~#", ">") 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T19:29:43.453

使用正则表达式：

```
import re
d = {'<': '(', '>': ')'}
replaceFunc = lambda m: m.group('a') or d[m.group('b')]
pattern = r"((?P<a><|>)(?P=a)|(?P<b><|>))"
term = "< << >"

replaced = re.sub(pattern, replaceFunc, term) #returns "( < )" 
```

**根据 Niklas B 的建议进行**编辑。****

 **上面的正则表达式等价于匹配：

```
("<<" OR ">>") OR ("<" OR ">")

(?P<a><|>) #tells the re to match either "<" or ">", place the result in group 'a'
(?P=a) #tells the re to match one more of whatever was matched in the group 'a'
(?P<b><|>) #tells the re to match a sing "<" or ">" and place it in group 'b' 
```

实际上，lambda 函数`replaceFunc`只是重复这个匹配序列，但返回相关的替换字符。

这`re`匹配“最大组优先”，因此`"<<< >"`将转换为`"<( )"`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T21:20:00.323

这是比我的第一个答案更短的方法。它拆分双重字符序列上的输入以删除它们，然后将这些段与替换的单个字符再次连接起来。和以前一样，它使用字典来指定应该进行的替换。

```
def convert(s, replacements):
    for before, after in replacements.items():
        s = before.join([segment.replace(before, after) for segment in s.split(before + before)])
    return s

>>> convert('< << >', {'<': '(', '>': ')'})
'( < )' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T19:16:40.850

我将所有替换术语放在一个列表中，然后迭代并替换：

```
CHARS = [
  ('<<', '#~'),
  ('>>', '~#'),
  ...
]

for replace in CHARS:
   term = term.replace(*replace) 
```

不确定它是否是最pythonic，但似乎很清楚。您甚至可以考虑接收字符列表的 forloop。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-27T19:57:41.750

我不确定这是 Pythonic，但它可以工作并且非常灵活。

```
def convert(s, replacements):
    pending_char = None
    result = []
    for c in s:
        if c in replacements:
            if c == pending_char:
                result.append(c)
                pending_char = None
            else:
                pending_char = c
        else:
            if pending_char:
                result.append(replacements[pending_char])
                pending_char = None
            result.append(c)
    if pending_char:
        result.append(replacements[pending_char])
    return ''.join(result)

>>> convert('< << >', {'<': '(', '>': ')'})
'( < )' 
```**

# jquery - 将全局绝对位置设置为 div

> ID：10356441
> 
> 赞同：1
> 
> 时间：2012-04-27T19:05:10.157
> 
> 标签：jquery, html, css, position, css-position

我正在使用 jquery 获取元素的位置，`.offset()`然后将 div 设置为`position:absolute;`并设置它`left`，并`top`根据我从中获得的信息`offset()`。

只要所有元素的父元素都是静态定位的，这就会起作用，因为`position:absolute`定义为

> “该元素相对于其第一个定位（非静态）祖先元素定位”

所以现在我有两种选择来解决这个问题：

1.  以某种方式强制元素相对于文档定位。我在 css 规范中看不到任何允许我这样做的东西。（如我错了请纠正我）。
2.  不要使用`offset()`，而是使用一个函数来获取元素相对于其第一个定位的祖先元素的位置。（我没有看到任何执行此操作的 jQuery 函数。有`position()`但是相对于元素的父级获取它）。

我该如何做这两个选项中的任何一个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T13:07:09.757

添加评论作为答案，以便您接受：

删除节点并将其重新附加到正文，使其相对于文档。不理想，但它可以让你正确定位它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T19:20:11.283

您实际上可以只设置左/上，因为它会覆盖该描述。如果你只是让它“绝对”，它会按照描述定位自己：相对于它之前的第一个静态元素。如果您设置左/上，它应该正确定位自己。

唯一不正确的情况是父元素具有相对定位。那你有点搞砸了：/

# sql-server - 我的存储过程有什么问题

> ID：10356451
> 
> 赞同：0
> 
> 时间：2012-04-27T19:06:02.647
> 
> 标签：sql-server, stored-procedures

我必须使用动态 SQL 解决方案创建存储过程，因为我需要包含几个嵌套 if 条件。在查询分析器中运行代码时收到以下错误。

```
Msg 156, Level 15, State 1, Line 13
Incorrect syntax near the keyword 'Procedure'. 
```

我试图创建的过程如下：

```
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF EXISTS (SELECT * FROM sys.objects 
WHERE object_id = OBJECT_ID(N'[dbo].[sp_Payments]') 
AND type in (N'P', N'PC'))
Drop procedure sp_Payments
BEGIN
DECLARE @SQL varchar(max),
    @categoryID smallint,
    @startDate datetime,
    @stopDate datetime,
    @debtCode tinyint,
    @izEscrow tinyint

Create Procedure sp_Payments
    (@categoryID smallint,
    @startDate datetime,
    @stopDate datetime,
    @debtCode tinyint,
    @izEscrow tinyint
    )
AS
BEGIN
Declare @Payments table( 
        paydate datetime, 
        principaldue float, 
        interestdue float, 
        debtid int, 
        debtname varchar(50), 
        debtnumber varchar(10), 
        fsrc varchar(40), 
        category varchar(40), 
        PayMonth tinyint,
        PayYear int
)
SET @SQL = '
insert into @Payments 
        select dtl.paydate, 
            dtl.principaldue, 
            dtl.interestdue, 
            dtl.debtid, 
            dmf.debtname, 
            dmf.debtnumber, 
            fsrc.fsrc, 
            app.category, 
            month(dtl.paydate) as PayMonth,
            case
                when month(PayDate) <= 6 then year(PayDate)
                else year(PayDate)+1  
            end "PayYear"
             from debtdetail dtl 
            inner join masterfile dmf 
            on dtl.debtid = dmf.debtid
            inner join categories app
            on dmf.categoryid = app.categoryid
            left outer join fsrc 
            on dmf.fsrcid = fsrc.fsrcid
            left outer join debtissues di
            on dmf.issueid = di.issueid
              where dtl.debtid in 
            (select debtid from masterfile
                where categoryid = @categoryID '

        IF @debtCode > 0    
            SET @SQL = @SQL + '
                AND codeid = @debtCode 
                '
            SET @SQL = @SQL + '
                ) 
                AND di.iscontingent = 0 
                '
            IF @stopDate = '' 
                SET @SQL = @SQL + '
                    and dtl.paydate >= @startDate 
                '
            ELSE 
                SET @SQL = @SQL + '
                    and dtl.paydate between  
                    @startDate AND @stopDate
                '
            IF @izEscrow = 0
                SET @SQL = @SQL + '
                    and dtl.isescrow = 0
                '
            SET @SQL = @SQL + '
            and (principaldue + interestdue) > 0 and dtl.active = 1
                    order by dtl.Paydate, dmf.DebtNumber '
EXEC @SQL
END

    SELECT * from @Payments

RETURN

END 
```

任何帮助，将不胜感激。提前致谢

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-04-27T19:12:11.333

摆脱动态 sql，并执行以下操作：

```
AND (@debtCode = 0 OR codeId = @debtCode)
... and so on 
```

# java - 测试指标和字符

> ID：10356456
> 
> 赞同：0
> 
> 时间：2012-04-27T19:06:19.600
> 
> 标签：java

```
char val;
int idx = 1;
do {
    if (PasswordGenerator.matchCharAt (val, idx))
        System.out.println("The Password is " + password);
    idx++;
} while (idx < 127 ); 
```

我想测试字符参数是否与指定索引处的密码字符匹配。可能有很多事情是错误的，因为我已经搞砸了 2 个小时。

然后我需要将它们与 stringbuilder 一起附加（我不担心）并将字符显示到屏幕上（我也不担心）。

我不知道如何循环它们以检查 0-127 的 ascii 字母。所以我需要帮助来解决这个问题。

[这是](http://www.technology.heartland.edu/faculty/todds/csci130/assignments/A5_password/doc/index.html)PasswordGenerator 的文档。

我正在尝试让密码在我的密码中显示随机字母（几乎或至少我认为）。这就是我为获取密码长度所做的事情......

```
int length=0;
int MaxNumber=100;
StringBuilder password = new StringBuilder();

do {
    if (PasswordGenerator.matchLength (length))
        System.out.println("The length of the character is " + length);
    length++;                     // length is randomly picked
} while (length < MaxNumber );   // or <100 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T19:15:30.350

char 是一种原始类型 - 您可以像任何数字一样对其进行迭代。例如：

```
for (char c = Character.MIN_VALUE; c < Character.MAX_VALUE; c++) {
  // do stuff
} 
```

在您的情况下，您可能会将值限制在 0 到 127 之间，具体取决于您给出的任何内容，但 char 实际上是一种数字类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T19:55:36.803

听起来您需要将程序构造为嵌套在另一个循环中的循环。外部循环变量是要查找的下一个字符的索引。然后内部循环在该位置搜索与密码字符匹配的字符。由于您不知道密码的实际长度，因此您需要在找到`n`^(th)字符*并* `n`匹配密码长度后终止外循环。

像这样的东西可能是你需要的：

```
PasswordGenerator password = ...
OUTER:
for (int len = 0; !password.matchLength(len); ) {
    for (char c = 0; c < 128; ++c) {
        if (password.matchCharAt(c, len)) {
            // found the match at index len -- record it
            ++len;
            continue OUTER; // exit the inner loop
    }
    // no match at all found for index len --
    // exit with failure
}
// exit with success 
```

通常我不喜欢使用语句标签，但这似乎是一个使用标签的自然场所。但是，您可以通过使用额外的标志变量或其他东西来摆脱它。

# c# - 多个文件，同名

> ID：10356458
> 
> 赞同：2
> 
> 时间：2012-04-27T19:06:35.080
> 
> 标签：c#, scripting, copy

我正在尝试保存一些都具有相同名称的文件。我想做一些名字做这样的事情：file.extension file[1].extension file[2].extension 我试过这个[http://www.naspinski.net/post/Saving-multiple-files- of-the-same-name.aspx](http://www.naspinski.net/post/Saving-multiple-files-of-the-same-name.aspx)但它对我不起作用。

这是一些要查看的代码（不是全部，只是相关部分），

```
 {
            string thepathoflife = Path.GetFullPath(file);
            //CreatetheFolder(file)
            string filetocopy = file;
            object bob = file.Clone();
            string bobby = bob.ToString();
            string location = file;
            bool b = false;
            string extension = Path.GetExtension(file);
            string thenameofdoom = Path.GetFileNameWithoutExtension(file);
            string filename = Path.GetFileName(file);
            ////bobby.Move(@"\\TEST12CVG\Public\Posts\Temporaryjunk" + filename);
            // string oldlocation = filename+extension;

            if (extension == ".pst" ||
              extension == ".tec" ||
              extension == ".pas" ||
              extension == ".snc" ||
              extension == ".cst" ||
              extension == ".xml")
            {
                b = true;
            }

            if (thenameofdoom == "Plasma" ||
              thenameofdoom == "Oxygas" ||
              thenameofdoom == "plasma" ||
              thenameofdoom == "oxygas" ||
              thenameofdoom == "Oxyfuel" ||
              thenameofdoom == "oxyfuel")
            {
                b = false;
            }

            if (b == true)
            // System.IO.File.WriteAllText(newlocation, bobby);
            {
                //string rootpath = (@"\\sigmatek.net\Documents\Customers\A");
                var findLevel = 6;
                var path = @thepathoflife;
                var levels = path.Split(Path.DirectorySeparatorChar);
                var second = levels.Length > findLevel ? levels[findLevel] : null;

                Directory.CreateDirectory(@"\\TEST12CVG\Public\Posts\Test\" + thenameofdoom);
                string newlocation = (@"\\TEST12CVG\Public\Posts\Test\" + thenameofdoom);
                string newPath = System.IO.Path.Combine(newlocation, second);
                System.IO.Directory.CreateDirectory(newPath);
                string newlocationb = Path.GetFullPath(newPath);

                    string newb = System.IO.Path.Combine(newlocationb, filename);

                        while (File.Exists(newb))
                            {
                               int number = 1;
                               bool found = false;
                               do
                               {
                                   string candidate = newb.Replace(extension, "[" + number++ + "]"+ extension);
                                   if (!File.Exists(candidate)) found = true;

                                {
                                    File.Copy(thepathoflife, candidate);
                              }
                                   // Candidate has a valid file name

                               }
                               }
                    //File.Move(@"\\TEST12CVG\Public\Posts\Test\", @"\\TEST12CVG\Public\Posts\Test\" + thenameofdoom + second);
                    System.Console.WriteLine("Success: " + filename + "--" + thepathoflife);
                    b = false; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T19:10:53.393

这不是我的想法。此外，如果“.extension”出现在文件名中的某个位置而不是末尾，这会中断（因此使您的字符串处理比示例代码更智能）。如果需要，您可以使用`Path.GetExtension(path)`

```
if (File.Exists(fn))
{
   int number = 1;
   bool found = false;
   do
   {
       string candidate = fn.Replace(".extension", "[" + number++ + "].extension");
       if (!File.Exists(candidate)) found = true;
   }
   // Candidate has a valid file name
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T23:29:42.500

插入“ *sPathAndFileName* ”并使用输出的“ *sSaveName* ”来保存您的文件。
您将看到友好的递增文件名，例如：Test.txt、Text[1].txt、Test[2].txt 等...

```
 int index = 0;
    string sSaveName = Path.GetDirectoryName(sPathAndFileName) + @"\"
                     + Path.GetFileNameWithoutExtension(sPathAndFileName)
                     + Path.GetExtension(sPathAndFileName);
    while (File.Exists(sSaveName) == true)
    {
        sSaveName = Path.GetDirectoryName(sPathAndFileName) + @"\"
                  + Path.GetFileNameWithoutExtension(sPathAndFileName)
                  + "[" + (++index).ToString() + "]"
                  + Path.GetExtension(sPathAndFileName);
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-06-24T09:16:36.450

尝试这个。简单得多。

```
string filename = "C:\bla.txt";
string filenameNoPath = Path.GetFileNameWithoutExtension(filename);
string temppath = Path.GetDirectoryName(filename);
string extension = Path.GetExtension(filename);

if (!File.Exists(path))
{
     File.WriteAllBytes(filename, file);
}
else
{
     do
     {
           counter++; // we're here, so lets count files with same name
           string path = temppath + "\\" + filenameNoPath + "(" + counter.ToString() + ")" + extension;
     } while (File.Exists(path));

     File.WriteAllBytes(path, file);
 } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-27T19:11:43.150

可能您需要使用 `Path.GetExtension(string path)`来获取文件的扩展名，然后只需剪切文件名，在其上附加迭代编号并再次扩展。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-27T19:11:57.947

您不能将具有相同名称和扩展名的文件放在同一个文件夹中，因此您有如下选项：

*   将它们全部放在具有有意义名称的单独目录中（即使文件具有相同的名称，内容*也应该*是不同的）

*   在前面使用日期时间戳，例如在每个文件前面使用 YYYYMMDD（但它违反了“相同文件名”规则）

*   同样可以应用于扩展

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-27T19:12:49.903

我不禁觉得这些年来我这样做了太多次。:)

尝试以下方式：

```
 List<string> filesToSave = new List<string>();
        var fileName = "myfile.ext";
        var baseName = Path.GetFileNameWithoutExtension(fileName);
        var extension = Path.GetExtension(fileName);

        int counter = 1;
        foreach (var fileToSave in filesToSave)
        {
            var tempFileName = fileName;
            while (File.Exists(tempFileName))
            {
                tempFileName = string.Format("{0}{1}.{2}", baseName, counter, extension);
                counter++
            }

            File.WriteAllText(tempFileName, fileToSave);
        } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-27T19:17:29.773

这是一个如何帮助自己的示例：

```
 string[] files = { "file.txt", "file.txt", "file.txt" };
        for(int i=0;i<files.Length;i++)
        {
            string fileName = Path.GetFileNameWithoutExtension(files[i]);
            string extension = Path.GetExtension(files[i]);
            fileName = fileName + (i + 1);
            //if you would like to aqdd square brackets, you can change upper line to:
            fileName = string.Format("{0}{1}{2}{3}", fileName, "[", (i + 1), "]");
            files[i] = String.Concat(fileName, extension);
        } 
```

如果您在 FileInfo 数组中有文件，您也可以这样做。

# facebook-graph-api - 如何从 facebook graph api 获取朋友签到的实时更新？

> ID：10356460
> 
> 赞同：1
> 
> 时间：2012-04-27T19:06:45.747
> 
> 标签：facebook-graph-api, checkin

是否可以从 Facebook 的图形 API 获取用户朋友签到的实时更新？

我知道您可以按需获取朋友签到，并且可以实时获取用户签到，那么朋友签到实时怎么样？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T09:29:13.740

您可以使用订阅从 facebook graph api 获取实时更新

```
https://graph.facebook.com/<APP_ID>/subscriptions?object=check_in&callback_url=<ur url> 
```

. 详情请参考以下链接

[http://vikasrao.wordpress.com/2011/07/05/subscribing-to-facebook-graph-apis-real-time-updates-using-curl/](http://vikasrao.wordpress.com/2011/07/05/subscribing-to-facebook-graph-apis-real-time-updates-using-curl/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-25T22:48:37.463

您无法获取用户朋友签到的 RTU。只是用户的签到，即使如此，您也必须在订阅中启用“提要”，而不是“签到”。当前是一个文档错误。

# c++ - 如何将 remove_if 与 ! 函数的（非函数的）

> ID：10356462
> 
> 赞同：2
> 
> 时间：2012-04-27T19:07:10.213
> 
> 标签：c++, string, algorithm

基本上，我正在尝试这样做：

word.resize(remove_if(word.begin(), word.end(), not1(isalpha())) - word.begin());

我知道你只需声明自己的函数并传递它的丑陋解决方法。但是有没有办法让这个工作？我收到消息“函数调用中的参数太少”，isalpha 函数下方有一条红线。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-27T19:13:38.820

在 C++03 中，您通常会使用以下内容：

```
std::not1(std::ptr_fun(isalpha)) 
```

在 C++11 中，您更经常使用 lambda：

```
word.resize(
   remove_if(word.begin(), word.end(), 
             [](char ch){return !isalpha(ch);}) -word.begin()); 
```

编辑：您可能还想阅读昨天在 Code Review 上提出的[类似问题](https://codereview.stackexchange.com/questions/11203/most-efficient-way-in-c-to-strip-strings)。它并不完全相同，但足够相似，可能会引起人们的兴趣（它不是询问`!isalpha`，而是询问从字符串中删除非字母字符）。

Edit2：做一个快速测试，这似乎工作：

```
#include <algorithm>
#include <string>
#include <iostream>
#include <iterator>
#include <ctype.h>

template <class T>
T gen_random(size_t len) {
    T x;
    x.reserve(len);

    std::generate_n(std::back_inserter(x), len, rand);
    return x;
}

template <class Container>
void test2(Container &input) {
    input.resize(
        std::remove_if(input.begin(), input.end(), 
        [](char ch){return !isalpha(ch);}) -input.begin());
}

int main(){

    std::string input(gen_random<std::string>(100));
    std::cout << "Input: \n" << input << "\n\n";

    input.resize(
        std::remove_if(input.begin(), input.end(), 
        [](char ch){return !isalpha(ch);}) -input.begin());

    std::cout << "Result: " << input << "\n";

    return 0;
} 
```

至少当我运行它时，我得到：

```
Input:
ë♠╖G▐│↕M╚C╗ïª▼♥Z}       8%▼]╘╦ⁿû⌡E;‼
∟█«2 ÜPε@x6²↕I2÷₧}I▄¡O¶≥D@f╨k─0╖2;í"÷"æ¥

Result: lRIGMCZEPxIIODfk 
```

从外观上看，我生成的随机输入至少包含一个回车，因此输入中的前几个字符在输出中不可见。我检查了从“G”开始的一对，然后检查了最后一对，但一切似乎都很好。

# c# - 实体框架和 Cast<>

> ID：10356463
> 
> 赞同：1
> 
> 时间：2012-04-27T19:07:14.750
> 
> 标签：c#, linq, entity-framework

[我有这门课（你可以在这里](https://github.com/bmckenzie/projects/blob/development/Projects.DataAccess.Sql/Repositories/Base/BaseRepository.cs)看到它的全部内容）......

```
internal class BaseRepository<I, C> : IRepository<I>
    where I : class, IBaseObject
    where C : BaseObject
{
    private Context _context;

    public IEnumerable<I> FindBy(Expression<Func<I, bool>> predicate)
    {
        return _context.Set<C>().ToList().Cast<I>().AsQueryable().Where(predicate);
    }

    // other methods.
} 
```

我该如何工作，这样我就不必调用`.ToList()`我认为会导致 EF 返回所有内容的调用`.Set<C>()`

不使用它`.ToList()`会`.AsQueryable()`导致错误：

System.NotSupportedException：无法将类型“Sln.DAL.Sql.Entities.Project”转换为类型“Sln.DAL.Entities.IProject”。LINQ to Entities 仅支持转换 EDM 基元或枚举类型。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T19:09:28.003

如果我们添加一个约束

```
internal class BaseRepository<I, C> : IRepository<I>
    where I : class, IBaseObject
    where C : BaseObject, I 
```

那么我们可以使用

```
_context.Set<C>().Where(predicate).AsEnumerable(); 
```

# delphi - Datasnap：会话销毁事件

> ID：10356470
> 
> 赞同：0
> 
> 时间：2012-04-27T19:08:12.283
> 
> 标签：delphi, events, session, datasnap

在我的应用程序中，每当用户登录时，他都会被添加到存储有关已登录用户的数据的表中，但我没有实施任何措施来将这些用户从我的表中删除。当他注销或以任何其他方式失去他的会话时，我需要从我的表中删除该用户。是否有“SessionDestroy”事件或类似的事件，允许我在销毁的会话上实现某些东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T20:18:41.727

您可以将“会话事件”（使用匿名方法）添加到会话管理器。自 2009 年以来，我猜（但在 XE 上测试过）。适用于 REST 会话等。示例代码：

```
 TDSSessionManager.Instance.AddSessionEvent(
procedure (Sender: TObject; const EventType: TDSSessionEventType;
  const session: TDSSession)
begin
  case EventType of
    SessionCreate :
    begin
      session.UserRoles.Add('guest'); // guest role is fixed
      ...
    end;
    SessionClose:
    begin
      FreeAndNil(some_more_data);
    end;
  end;
end); 
```

# c - C 命令行界面 - BASH 中的历史功能

> ID：10356471
> 
> 赞同：1
> 
> 时间：2012-04-27T19:08:25.153
> 
> 标签：c, linux, bash, shell, command-line

再会，

我正在编写一个简单的 CLI（命令行界面）应用程序，它提供了一个简单的提示，可以接受来自用户的字符串、验证它们并根据输入执行某些操作。非常坦率的。

我正在寻找一个独立于平台的、非 GPL/LGPL 手段（或者，至少适用于 POSIX 兼容操作系统的东西，如 Linux、BSD 等），所以我可以使用向上/向下箭头键来回滚动在我的 CLI 应用程序中以前键入的命令的历史记录中，并让它们出现在输入行中。

目标是有效地模仿 BASH 和大多数其他 shell 中的历史特性。我只想使用向上/向下键并检测到它们。我假设我需要为此使用中断或一些专门的库；不过，我真的很想用标准的 ANSI C 来做这件事，并且必须完全避免任何第三方库。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-27T19:11:06.267

如果你坚持自己做，那我们只能说“自己做”；它不是非常复杂，但也不是早上的工作。

您应该非常认真地考虑使用其他人（包括）使用的[GNU 。`readline`](http://www.gnu.org/s/readline/)`bash`它做了所有这一切，而且做得很好。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-27T19:20:11.710

您可以使用 readline，或者您可以采取简单的方法，并且什么也不做。当你运行你的程序时，通过 rlwrap 调用它，你就可以免费获得历史编辑。换句话说，而不是：

```
$ mytool 
```

你只是跑

```
$ rlwrap mytool 
```

rlwrap 是 readline 的包装器，它允许您在不做任何工作的情况下获得 readline 的好处。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-27T19:14:18.553

您可以使用 bash 使用的[readline](http://cnswww.cns.cwru.edu/php/chet/readline/rltop.html)库。请注意，这是 GPL，因此您的代码必须是内部代码或 GPL。有 BSD 许可的 libedit，功能较少

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-27T19:18:26.730

正如其他答案所述，您确实应该使用 readline。否则，您将不得不使用缓冲区，并将标准输入文件描述符与`read()`. 您将需要设置包含您的历史记录的数据结构和/或文件。此外，您可以使用`execvp()`和/或`system()`调度命令。

# c# - 如何使用 c# 中的 foreach 循环复制带有键和值的数组？

> ID：10356481
> 
> 赞同：-2
> 
> 时间：2012-04-27T19:09:32.277
> 
> 标签：c#, asp.net, arrays, session, loops

在 php 中，我 cna 使用 foreach $key->$value 但在 c sharp 中我找不到类似的解决方案，我有数据值，我想将它们保存到会话中，它们的键将是列名。所以我尝试将数据行复制到会话，会话将通过循环从数据行的列名中获取键名。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T19:15:03.663

我认为您需要迭代`DataTable`：

```
foreach(DataColumn c in row.Table.Columns) {
    string key = c.ColumnName;
    string value = row[key];

    // Copy into session here
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T19:12:30.677

如果是字典，您可以使用：

```
foreach (var item in dict) {
  var key = item.Key;
  var value = item.Value;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T19:13:27.417

如果您正在寻找支持键和值且可在 ForEach 循环中枚举的 C# 数据类型，请查看 Dictionary 类。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-04-03T07:22:52.090

将此 PHP 代码转换为 ASP：

```
$handle = fopen("log.txt", "a");

foreach($_GET as $variable => $value) {

fwrite($handle, $variable);

fwrite($handle, "=");

fwrite($handle, $value);

fwrite($handle, "\r\n");

} 
```

# postgresql - 如何添加“删除级联”约束？

> ID：10356484
> 
> 赞同：212
> 
> 时间：2012-04-27T19:09:47.080
> 
> 标签：postgresql, constraints, cascade, cascading-deletes, postgresql-8.4

在 PostgreSQL 8 中，是否可以添加`ON DELETE CASCADES`到下表中的两个外键而不删除后者？

```
# \d scores
        Table "public.scores"
 Column  |         Type          | Modifiers
---------+-----------------------+-----------
 id      | character varying(32) |
 gid     | integer               |
 money   | integer               | not null
 quit    | boolean               |
 last_ip | inet                  |
Foreign-key constraints:
   "scores_gid_fkey" FOREIGN KEY (gid) REFERENCES games(gid)
   "scores_id_fkey" FOREIGN KEY (id) REFERENCES users(id) 
```

两个引用的表格都在下面 - 这里：

```
# \d games
                                     Table "public.games"
  Column  |            Type             |                        Modifiers
----------+-----------------------------+----------------------------------------------------------
 gid      | integer                     | not null default nextval('games_gid_seq'::regclass)
 rounds   | integer                     | not null
 finished | timestamp without time zone | default now()
Indexes:
    "games_pkey" PRIMARY KEY, btree (gid)
Referenced by:
    TABLE "scores" CONSTRAINT "scores_gid_fkey" FOREIGN KEY (gid) REFERENCES games(gid) 
```

和这里：

```
# \d users
                Table "public.users"
   Column   |            Type             |   Modifiers
------------+-----------------------------+---------------
 id         | character varying(32)       | not null
 first_name | character varying(64)       |
 last_name  | character varying(64)       |
 female     | boolean                     |
 avatar     | character varying(128)      |
 city       | character varying(64)       |
 login      | timestamp without time zone | default now()
 last_ip    | inet                        |
 logout     | timestamp without time zone |
 vip        | timestamp without time zone |
 mail       | character varying(254)      |
Indexes:
    "users_pkey" PRIMARY KEY, btree (id)
Referenced by:
    TABLE "cards" CONSTRAINT "cards_id_fkey" FOREIGN KEY (id) REFERENCES users(id)
    TABLE "catch" CONSTRAINT "catch_id_fkey" FOREIGN KEY (id) REFERENCES users(id)
    TABLE "chat" CONSTRAINT "chat_id_fkey" FOREIGN KEY (id) REFERENCES users(id)
    TABLE "game" CONSTRAINT "game_id_fkey" FOREIGN KEY (id) REFERENCES users(id)
    TABLE "hand" CONSTRAINT "hand_id_fkey" FOREIGN KEY (id) REFERENCES users(id)
    TABLE "luck" CONSTRAINT "luck_id_fkey" FOREIGN KEY (id) REFERENCES users(id)
    TABLE "match" CONSTRAINT "match_id_fkey" FOREIGN KEY (id) REFERENCES users(id)
    TABLE "misere" CONSTRAINT "misere_id_fkey" FOREIGN KEY (id) REFERENCES users(id)
    TABLE "money" CONSTRAINT "money_id_fkey" FOREIGN KEY (id) REFERENCES users(id)
    TABLE "pass" CONSTRAINT "pass_id_fkey" FOREIGN KEY (id) REFERENCES users(id)
    TABLE "payment" CONSTRAINT "payment_id_fkey" FOREIGN KEY (id) REFERENCES users(id)
    TABLE "rep" CONSTRAINT "rep_author_fkey" FOREIGN KEY (author) REFERENCES users(id)
    TABLE "rep" CONSTRAINT "rep_id_fkey" FOREIGN KEY (id) REFERENCES users(id)
    TABLE "scores" CONSTRAINT "scores_id_fkey" FOREIGN KEY (id) REFERENCES users(id)
    TABLE "status" CONSTRAINT "status_id_fkey" FOREIGN KEY (id) REFERENCES users(id) 
```

而且我想知道在前一张表中添加 2 个索引是否有意义？

**更新：**谢谢，而且我在邮件列表中得到了建议，我可以在 1 条语句中管理它，因此无需明确启动交易：

```
ALTER TABLE public.scores
DROP CONSTRAINT scores_gid_fkey,
ADD CONSTRAINT scores_gid_fkey
   FOREIGN KEY (gid)
   REFERENCES games(gid)
   ON DELETE CASCADE; 
```

* * *

## 回答 #1

> 赞同：282
> 
> 时间：2012-04-27T19:29:45.747

我很确定您不能简单地添加`on delete cascade`到现有的外键约束。您必须先删除约束，然后添加正确的版本。在标准 SQL 中，我相信最简单的方法是

*   开始交易，
*   删除外键，
*   添加外键`on delete cascade`, 最后
*   提交事务

对要更改的每个外键重复此操作。

但是 PostgreSQL 有一个非标准扩展，允许您在单个 SQL 语句中使用多个约束子句。例如

```
alter table public.scores
drop constraint scores_gid_fkey,
add constraint scores_gid_fkey
   foreign key (gid)
   references games(gid)
   on delete cascade; 
```

如果您不知道要删除的外键约束的名称，您可以在 pgAdminIII 中查找它（只需单击表名并查看 DDL，或者展开层次结构直到看到“约束”），或者您可以[查询信息架构](http://www.postgresql.org/docs/8.4/static/infoschema-key-column-usage.html)。

```
select *
from information_schema.key_column_usage
where position_in_unique_constraint is not null 
```

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2018-11-08T19:20:18.423

根据@Mike Sherrill Cat Recall 的回答，这对我有用：

```
ALTER TABLE "Children"
DROP CONSTRAINT "Children_parentId_fkey",
ADD CONSTRAINT "Children_parentId_fkey"
  FOREIGN KEY ("parentId")
  REFERENCES "Parent"(id)
  ON DELETE CASCADE; 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2015-10-03T09:10:54.160

用法：

```
select replace_foreign_key('user_rates_posts', 'post_id', 'ON DELETE CASCADE'); 
```

功能：

```
CREATE OR REPLACE FUNCTION 
    replace_foreign_key(f_table VARCHAR, f_column VARCHAR, new_options VARCHAR) 
RETURNS VARCHAR
AS $$
DECLARE constraint_name varchar;
DECLARE reftable varchar;
DECLARE refcolumn varchar;
BEGIN

SELECT tc.constraint_name, ccu.table_name AS foreign_table_name, ccu.column_name AS foreign_column_name 
FROM 
    information_schema.table_constraints AS tc 
    JOIN information_schema.key_column_usage AS kcu
      ON tc.constraint_name = kcu.constraint_name
    JOIN information_schema.constraint_column_usage AS ccu
      ON ccu.constraint_name = tc.constraint_name
WHERE constraint_type = 'FOREIGN KEY' 
   AND tc.table_name= f_table AND kcu.column_name= f_column
INTO constraint_name, reftable, refcolumn;

EXECUTE 'alter table ' || f_table || ' drop constraint ' || constraint_name || 
', ADD CONSTRAINT ' || constraint_name || ' FOREIGN KEY (' || f_column || ') ' ||
' REFERENCES ' || reftable || '(' || refcolumn || ') ' || new_options || ';';

RETURN 'Constraint replaced: ' || constraint_name || ' (' || f_table || '.' || f_column ||
 ' -> ' || reftable || '.' || refcolumn || '); New options: ' || new_options;

END;
$$ LANGUAGE plpgsql; 
```

注意：这个函数**不会复制**初始外键的属性。它只需要外部表名/列名，删除当前键并**替换**为新键。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-09-17T10:35:24.017

多列约束的解决方案：

```
SELECT
    'ALTER TABLE myschema.' || cl.relname ||
    ' DROP CONSTRAINT ' || con.conname || ',' ||
    ' ADD CONSTRAINT ' || con.conname || ' ' || pg_get_constraintdef(con.oid) || ' ON DELETE CASCADE;'
FROM pg_constraint con, pg_class cl 
WHERE con.contype = 'f' AND con.connamespace = 'myschema'::regnamespace::oid AND con.conrelid = cl.oid 
```

# c++ - 递归显示节点的二叉搜索树

> ID：10356489
> 
> 赞同：-1
> 
> 时间：2012-04-27T19:10:25.933
> 
> 标签：c++, search, recursion, tree

我的显示函数处理二叉搜索树时遇到问题。我遇到的主要问题是让 count 变量在递归函数中正确递增，以便我可以按升序对节点进行编号。

将计数作为全局变量工作吗？

这是该函数的代码：

（p 指向树的根，count 初始设置为 1）

```
void displayAscend(nodePtr p, int count)
   {
      if (p->left != NULL)
         displayAscend(p->left, count);

      cout << count << ". " << p->acctNum << endl;
      count++;

      if (p->right != NULL)
         displayAscend(p->right, count);
   } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T19:13:58.657

通过引用 int& 传递计数。

```
void displayAscend(nodePtr p, int& count) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T19:12:49.763

改变

```
displayAscend(p->left, count); 
```

到

```
displayAscend(p->left, count+1); 
```

与包含`p->right`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-27T19:16:05.983

我怀疑你想要这样的东西：

```
size_t displayAscend(nodePtr p, int count)
{
   size_t additional_count = 0;
   if (p->left != NULL)
      additional_count += displayAscend(p->left, count + additional_count);

   cout << count + additional_count << ". " << p->acctNum << endl;
   additional_count++;

   if (p->right != NULL)
      additional_count += displayAscend(p->right, count + additional_count);

   return additional_count;
} 
```

如果您愿意，可以使用`int`代替。`size_t`

原因是每个递归调用都必须向其调用者返回一个计数，否则调用者无法知道递归调用计数了多少。当然，最外面的调用者如果不感兴趣，可以丢弃计数。

正如另一个答案所观察到的，通过引用传递是另一种方式，尽管不是我喜欢的方式。（我个人更喜欢使用显式指针来实现*该策略。）*

你问制作`count`一个全局变量是否可行。答案是，是的，它*适用*于你有限练习的有限目的，但它代表了糟糕的编程实践。毕竟，如果你有几棵树，每棵树都有自己的数量呢？

*更新：* 感谢@JerryCoffin 指出我的代码中的前一个错误。我已经在上面修复了。更重要的是，我已经用以下方法对其进行了测试：

```
#include <vector>
#include <iostream>
using std::cout;
using std::endl;

struct node {
   node *left;
   node *right;
   int acctNum;
};

typedef node *nodePtr;

size_t displayAscend(nodePtr p, int count)
{
   size_t additional_count = 0;
   if (p->left != NULL)
      additional_count += displayAscend(p->left, count + additional_count);

   cout << count + additional_count << ". " << p->acctNum << endl;
   additional_count++;

   if (p->right != NULL)
      additional_count += displayAscend(p->right, count + additional_count);

   return additional_count;
}

int main() {
   node head;
   node n1;
   node n2;
   node n11;
   node n21;
   node n22;
   head.left  = &n1;
   head.right = &n2;
   n1  .left  = &n11;
   n1  .right = 0;
   n2  .left  = &n21;
   n2  .right = &n22;
   n11 .left  = 0;
   n11 .right = 0;
   n21 .left  = 0;
   n21 .right = 0;
   n22 .left  = 0;
   n22 .right = 0;
   n11 .acctNum = 100;
   n1  .acctNum = 202;
   head.acctNum = 300;
   n21 .acctNum = 400;
   n2  .acctNum = 500;
   n22 .acctNum = 600;
   displayAscend(&head, 0);
} 
```

输出是

```
0\. 100
1\. 202
2\. 300
3\. 400
4\. 500
5\. 600 
```

所以，它有效。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-27T19:17:59.317

您必须通过引用传递计数变量。

```
void displayAscend(nodePtr p, int & count)
   {
      if (p->left != NULL)
         displayAscend(p->left, count);

      cout << count << ". " << p->acctNum << endl;
      count++;

      if (p->right != NULL)
         displayAscend(p->right, count);
   } 
```

# django - 为不同的用户隐藏 Django 管理站点中的某些字段

> ID：10356491
> 
> 赞同：3
> 
> 时间：2012-04-27T19:10:39.493
> 
> 标签：django, django-models, django-admin, django-admin-filters

我有一个需要向更多管理员开放的管理站点。

目前我的模型看起来像

```
class YouTube(models.Model):
    name =  models.CharField(max_length=100)
    credit_card_number = models.CharField(max_length=100) 
```

管理站点框架中有没有办法让它只有超级用户才能看到信用卡号？在管理站点框架中，我只能看到添加、编辑、删除的能力。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T19:16:17.890

创建方法**YouTube.get_cc_root_only**，您将在其中检查用户是否为 root，并在 YouTubeAdmin 类（**list_display**）中使用它

**更新：**

```
class XyzAdmin(admin.ModelAdmin):
    def get_cc_root_only(self, obj):
        if self.username == "admin":
            return "CC"
        return "XXX"

    def changelist_view(self, request, extra_context = None):
        self.username = request.user.username
        return super(XyzAdmin,self).changelist_view(request, extra_context = extra_context)

    list_display = ("name", "get_cc_root_only") 
```

# dependency-injection - 将 DI 容器注入（几乎）每个类是一种反模式吗？

> ID：10356497
> 
> 赞同：2
> 
> 时间：2012-04-27T19:11:10.570
> 
> 标签：dependency-injection

最近我发现自己不太关心定义类的依赖关系并将它们传递给构造函数，但我总是传递 DI 容器并将其保存在私有属性中。这样我的类就不会有非常明确的依赖关系，当我需要它时，我会从容器中获取所有东西。

虽然不知何故我对这个解决方案有不好的感觉（除了访问容器造成的开销），但我真的想不出太多的缺点。也许对依赖项的定义松散会降低类的可移植性，或者在重构时我会感到惊讶......？

你怎么看待这件事？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-27T19:12:27.463

绝对错误。不要将 DI 容器放入对象中；他们不需要知道或关心他们正在被注射。这不符合“不要给我们打电话；我们会打电话给你”。

反过来说：整个应用程序都知道 DI 引擎，但随后它会从中获取所需的 bean。

我想您可能会争辩说，注释会改变一些关系，因为现在 bean*确实*知道它们连接在一起的事实。但是当配置被外部化为 XML 时，bean 确实不知道 DI。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-27T20:19:36.777

这是一种反模式，我敢打赌你还没有为你的代码编写测试，这真的很糟糕。

当您开始编写测试时，您会发现您正在编写不可测试的代码，并且您是：

*   使用服务定位器反模式

*   你违反了得墨忒耳法则

*   您没有遵循单一职责原则

*   您正在隐藏您的对象真正的依赖关系（不使用依赖注入模式）

*   在任何应用程序中，您都没有真正分离两大堆对象：

    *   业务对象：职责是业务逻辑、领域抽象
    *   连接和构建对象：职责是构建对象图

在您想为组件编写单元测试的那一天，您会后悔这个决定，您将要么重构代码，要么编写集成测试，而不是简单的单元测试（创建一个测试容器并将模拟注入这个容器）。

我的建议是阅读本指南以编写可测试的代码：（这是在谷歌努力工作的人使用的指南）

[http://misko.hevery.com/code-reviewers-guide/](http://misko.hevery.com/code-reviewers-guide/)

如果您愿意，可以从 Misko Hevery 的这些关于测试心理学和干净代码谈话的视频开始：

[http://www.youtube.com/watch?v=wEhu57pih5w&feature=player_embedded](http://www.youtube.com/watch?v=wEhu57pih5w&feature=player_embedded)

[http://www.youtube.com/watch?v=RlfLCWKxHJ0&feature=player_embedded](http://www.youtube.com/watch?v=RlfLCWKxHJ0&feature=player_embedded)

[http://www.youtube.com/watch?v=-FRm3VPhseI&feature=player_embedded](http://www.youtube.com/watch?v=-FRm3VPhseI&feature=player_embedded)

# php - 插入其他更新

> ID：10356503
> 
> 赞同：0
> 
> 时间：2012-04-27T19:11:43.737
> 
> 标签：php, mysql

如果它们是特定 user_ID 的行，我希望表单更新，但如果不是则插入。我曾尝试使用 insert... 进行重复键更新，但失败得很惨，所以这是我的下一次尝试。user_ID 不是唯一索引，但我的表中的“ID”是并且是一个自动增量字段。User_ID 只是会话所基于的索引。这是我现在一直在使用的代码：

```
if (empty($err)) {

        $thesis_Name = mysql_real_escape_string($_POST['thesis_Name']);
        $abstract = mysql_real_escape_string($_POST['abstract']);

$query="UPDATE thesis SET (`thesis_Name`='$thesis_Name',
`abstract`='$abstract') WHERE id='$_SESSION[user_id]'
IF ROW_COUNT()=0
REPLACE INTO  thesis (theis_Name,abstract)VALUES ('$thesis_Name', '$abstract')
";

mysql_query($query) or die();
// query is ok?

if (mysql_query($the_query, $link) ){

 // redirect to user profile
   header('Location: myaccount.php?id=' . $user_id);
   } 
```

在按下提交的那一刻，我得到一个空白页。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T19:14:49.303

您是否尝试过“REPLACE INTO ...”而不是“INSERT INTO ...”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T19:14:49.933

[`REPLACE`](http://dev.mysql.com/doc/refman/5.0/en/replace.html)是你想要的。您将需要定义一个`UNIQUE KEY`on `id`（如果它不是一个`PRIMARY KEY`唯一的定义）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T19:17:17.077

替换为答案。如果您仍希望使用您的代码，则您的查询中缺少分号：

```
$query="UPDATE thesis SET (`thesis_Name`='$thesis_Name',
`abstract`='$abstract') WHERE id='$_SESSION[user_id]';
IF ROW_COUNT()=0
INSERT INTO  thesis (theis_Name,abstract)VALUES ($thesis_Name, $abstract)
"; 
```

# node.js - 使用Node.js，每秒多次写入文件的最佳方法是什么

> ID：10356505
> 
> 赞同：1
> 
> 时间：2012-04-27T19:11:56.237
> 
> 标签：node.js, filesystems, fs

我是 Node.js 的新手。我的文件系统上有一个文件，用于控制硬件上的某种输出。文件内容可以是 0 到 100 之间的整数。

我想以固定的延迟（比如每 100 毫秒）写入这个文件。所以我写了这段代码：

```
var duty_percentfile = fs.openSync("/sys/class/pwm/ehrpwm.1:0/duty_percent", "w");

var fade = function(){
    fs.writeSync(duty_percentfile, i, null);
    i = i + 5;
}

setInterval(fade, 100); 
```

**首先，这是最好的方法吗？**

其次，我收到了这个错误，因为它完成了这项工作：

```
fs.js:321

return binding.write(fd, buffer, offset, length, position);
                 ^
Error: EINVAL, invalid argument
    at Object.writeSync (fs.js:321:18)
    at Timer.<anonymous> (/var/lib/cloud9/myApps/test.js:22:8)
    at Timer.ontimeout (timers.js:223:14) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T18:19:43.020

我在这里找到了答案： [https ://github.com/isaacs/node-graceful-fs/issues/6](https://github.com/isaacs/node-graceful-fs/issues/6)

这是一个已知问题，大约 22 天前在节点 0.6.15 中修复。我猜是时候升级了！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T23:47:49.597

而不是`null`你应该指定`0`一个位置（如果这是你想要的）。你`i`也没有初始化，也不会增加。

试试这个：

```
var duty_percentfile = fs.openSync("/sys/class/pwm/ehrpwm.1:0/duty_percent", "w")
  , value = 0 // or whatever your initial value is
;

setInterval(function(){
  fs.writeSync(duty_percentfile, value, 0);
  value += 5;
}, 100); 
```

# iphone - 将音频与视频合并

> ID：10356508
> 
> 赞同：3
> 
> 时间：2012-04-27T19:12:11.897
> 
> 标签：iphone, objective-c

我正在尝试将音频文件与视频文件合并。这是我的努力：

```
AVURLAsset* audioAsset = [[AVURLAsset alloc]initWithURL:audioUrl options:nil];
AVURLAsset* videoAsset = [[AVURLAsset alloc]initWithURL:videoUrl options:nil];

AVMutableComposition* mixComposition = [AVMutableComposition composition];

AVMutableCompositionTrack *compositionCommentaryTrack = [mixComposition addMutableTrackWithMediaType:AVMediaTypeAudio 
                                                                                    preferredTrackID:kCMPersistentTrackID_Invalid];
[compositionCommentaryTrack insertTimeRange:CMTimeRangeMake(kCMTimeZero, audioAsset.duration) 
                                    ofTrack:[[audioAsset tracksWithMediaType:AVMediaTypeAudio] objectAtIndex:0] 
                                     atTime:kCMTimeZero error:nil];

AVMutableCompositionTrack *compositionVideoTrack = [mixComposition addMutableTrackWithMediaType:AVMediaTypeVideo 
                                                                                    preferredTrackID:kCMPersistentTrackID_Invalid];
[compositionVideoTrack insertTimeRange:CMTimeRangeMake(kCMTimeZero, videoAsset.duration) 
                               ofTrack:[[videoAsset tracksWithMediaType:AVMediaTypeVideo] objectAtIndex:0] 
                                atTime:kCMTimeZero error:nil];

AVAssetExportSession* _assetExport = [[AVAssetExportSession alloc] initWithAsset:mixComposition 
                                                                      presetName:AVAssetExportPresetHighestQuality];   

NSString* videoName = @"export.mov";

NSString *exportPath = [NSTemporaryDirectory() stringByAppendingPathComponent:videoName];
NSURL    *exportUrl = [NSURL fileURLWithPath:exportPath];

if ([[NSFileManager defaultManager] fileExistsAtPath:exportPath]) 
{
    [[NSFileManager defaultManager] removeItemAtPath:exportPath error:nil];
}

_assetExport.outputFileType = @"com.apple.quicktime-movie";
_assetExport.outputURL = exportUrl;
_assetExport.shouldOptimizeForNetworkUse = YES;

[_assetExport exportAsynchronouslyWithCompletionHandler:
 ^(void ) {      
            // your completion code here
     }       
 }
 ]; 
```

一切似乎都工作正常，但我不知道为什么这段代码不起作用！我也获得了音频和视频的资产。但我无法创建导出会话。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T19:17:23.327

尝试使用`AVAssetExportPresetPassthrough`

还要检查您是否能够使用完成代码获得错误

```
 [_assetExport exportAsynchronouslyWithCompletionHandler:
     ^(void ) { 
         switch (_assetExport.status) 
         {
             case AVAssetExportSessionStatusFailed:
             {
                 NSLog (@"FAIL %@",_assetExport.error);
                 break;
             }
             case AVAssetExportSessionStatusCompleted: 
             {
                 break;
             }
             case AVAssetExportSessionStatusCancelled: 
             {
                 NSLog (@"CANCELED");
                 break;
             }
         }
         NSLog(@"Export Status %d-- %@", _assetExport.status, _assetExport.outputURL);
        }
     ]; 
```

# security - 如何修复被黑的 OpenX 服务器？

> ID：10356519
> 
> 赞同：2
> 
> 时间：2012-04-27T19:13:21.680
> 
> 标签：security, openx

我的一个客户的 OpenX 广告服务器被黑了。

这就是问题所在，垂直堆栈中有 4 个广告，第 3 个被劫持并替换为不同的广告，即天空广告。

我尝试搜索整个数据库，包括各种字符串的所有前置和附加字段，甚至是可以识别黑客来源的最小字符串。我已经对整个广告服务器目录，甚至整个网站、每种文件类型、所有内容进行了 grep 搜索。

我什至无法升级广告服务器，它似乎无法解决问题，我已经尝试过，并且做这样的事情真的很尴尬，通过 RDP 远程完成。

这是截图，

![](../Images/fa82f645c5b9767f72924e528941a170.png)

另外，[这里是](http://auctionnews.co.uk)网站。

如果有人不介意看一下，如果您看到右侧栏中的“天空”，或者任何与尺寸、边框格式不完全匹配的动画广告，那就是被黑广告。如果它在几次刷新后消失，您需要删除 cookie，它应该会重新出现。

如果有人有任何其他想法，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T10:20:29.317

事实证明，这是广告客户配置深处的设置，在以前的版本中默认未选中，此版本默认选中。如果每次点击的费用较高，该复选框会用 openx 市场广告替换您自己的广告。我们已取消选中该框，它已修复。

# firefox - 如何阻止萤火虫打破脚本中的错误？

> ID：10356526
> 
> 赞同：4
> 
> 时间：2012-04-27T19:13:44.780
> 
> 标签：firefox, firebug

我有firebug 1.9.1，我注意到当有页面有脚本错误时，它会转到该行。就像我在那条线上有一个断点，但我没有。

我该如何阻止这个。我不介意萤火虫标志上它有一个错误计数，但我发现它太烦人了，它正在打开萤火虫向我展示它停止的行。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-11-01T11:44:19.230

每个人都在想“但是脚本面板中的暂停按钮***没有***按下！它没有闪烁！按下它会打开它，再次按下它会关闭它没有任何区别！”...

...检查**控制台面板中****的*另一个***暂停按钮。*（如果这也关闭了，请检查 HTML 下的第三个暂停按钮，'Break on mutate'，或在 Net 下，'Break on XHR'）*

这有点棘手，因为如果按下控制台暂停按钮，错误会将您带到脚本面板进行调试，*而不是*在控制台面板中显示错误消息......所以您必须检查您所在面板的状态*没有*被...

控制台面板暂停按钮是`Break on all errors`: 而脚本面板按钮仅在下一个错误时中断。很容易忘记您已打开`Break on all errors`，然后不会注意到它仍然打开，因为您专注于您没想到会被带到的面板上。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-29T19:31:15.580

在每个 Firebug 选项卡中，都有一个“暂停”按钮。如果按下暂停按钮，错误控制台将因此中断。只需松开该按钮即可。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-10-01T16:22:37.023

对我来说，Firebug 在每个正在加载的脚本上随机中断 - 解决方案是转到脚本选项卡 -> 断点选项卡（右侧），然后删除那里的所有断点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-25T15:29:29.710

我遇到这个问题已经有一段时间了，一直禁用“脚本”选项卡，这真的很烦人！我试图单击暂停按钮，使其闪烁并刷新，同样的问题。然后，单击使其不闪烁和刷新，同样的问题。我刚才点击了暂停按钮（所以它在闪烁），然后取消点击它所以它不闪烁，然后刷新页面，它似乎已经修复了它。因脚本错误而中断的同一页面不再因错误而中断。

# jquery - 传递索引值以用作 jquery 中的选择器

> ID：10356528
> 
> 赞同：1
> 
> 时间：2012-04-27T19:13:48.373
> 
> 标签：jquery, css-selectors

截至 4/28 的修订版。我一定有一些选择错误。

更新的 jsFiddle 在这里：http: [//jsfiddle.net/thumbslinger/UwFRm/44/](http://jsfiddle.net/thumbslinger/UwFRm/44/)

应该发生的是，当单击“.正确”答案时，相应的“rightAnwer”应该变得可见。这是小提琴中不起作用的片段：

```
$('.correct').click(function(){
     var findMe = $(this).parent().parent().index();
    $('.answer').eq(findMe).show();
     }); 
```

正在显示正确的“答案”，但是，我只想显示具有“.rightAnswer”类的 div，它是“答案”的孩子。

/////////// 下面是原始帖子 ///////////////////

杀了我。注意：我问过类似的问题，但现在的问题是传递值与获取值。我想知道使用 eq() 是否是 w/show/hide 的问题。

这将返回我需要的值：

```
var findMe = $(this).parent().parent().index(); 
```

现在我正在尝试将该值用作另一个元素的选择的一部分：

```
$('.correct').click(function(){
   var findMe = $(this).parent().parent().index();

   $('#fullSongs_Container .answer:eq(findMe)').show();
     }); 
```

我试过了： $('#fullSongs_Container .answer').eq(findMe).show();

所以，当在不同的容器中选择另一个 div 时，我想使用第一行的相同索引值作为过滤器。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T19:16:15.203

更改您的代码

```
$('#fullSongs_Container .answer:eq(findMe)').show(); 
```

至

```
$('#fullSongs_Container .answer:eq(' + findMe + ')').show(); 
```

如果你不明白我做了什么。在您现有的代码中，“findMe”只是一个字符串而不是变量。在修改后的代码中，findMe 被视为一个变量，它的值将在那里被替换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T19:48:05.070

想出来以备将来参考。我的选择器关闭了。在嵌套模式中：

```
<div class="question">
  <div class="rightAnswer"></div>
  <div class="wrongAnswer"></div>
</div>

$('.answer .rightAnswer').eq(findMe).show(); 
```

是我需要的。

虽然 jquery 在选择方面是从右到左读取的，但这让我很失望，因为我认为 eq() 和 show() 是从右到左操作的一部分，而不是只考虑选择然后操作采取。

这里的每个人可能都知道，但现在我明白了。

# javascript - 本地/离线网站“站点”的全文搜索

> ID：10356532
> 
> 赞同：4
> 
> 时间：2012-04-27T19:13:57.167
> 
> 标签：javascript, solr, lucene, full-text-search

> **可能重复：**
> [通过 javascript 对 CD-Rom 上的静态 HTML 文件进行全文搜索](https://stackoverflow.com/questions/1357173/full-text-search-for-static-html-files-on-cd-rom-via-javascript)

我正在开始开发一个应用程序，该应用程序在本地创建一堆 HTML 文件，然后可以在系统（包括移动设备）上的任何 Web 浏览器中浏览它们被复制到的位置。HTML 文件具有许多交互功能，因此它本质上是一个离线网络应用程序。我的问题是，对这些 HTML 文件实施全文搜索的最佳方法是什么？基本上，应用程序应该索引它生成的 HTML 文件，但我们希望能够制作 HTML 文件*和生成的索引*可下载并可供用户离线浏览和搜索。在不编写实际应用程序来管理它的情况下，最好的方法是什么？例如，我已经使用 Solr 实现了它以进行演示/概念验证，并且效果很好……但当然，这需要对服务器进行 HTTP POST 和 GET 请求以进行索引和查询。因此，由于索引实际上只是文件，我想知道是否有一种方法可以在 HTML 文件中仅使用 Javascript 来离线查询它们（并且无需为 Solr 启动本地 Web 服务器），也许使用 Lucene 而不是 Solr？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T09:59:53.607

感谢您向我介绍了一些完全用 Javascript 编写的文本搜索解决方案！我想查看文本搜索的代码。

*   [http://karussell.wordpress.com/2010/11/01/full-text-search-in-100-javascript-the-future-of-javascript-is-bright/](http://karussell.wordpress.com/2010/11/01/full-text-search-in-100-javascript-the-future-of-javascript-is-bright/)

*   [http://dev.theladders.com/archives/2006/11/introducing_javascript_fulltex_1.html](http://dev.theladders.com/archives/2006/11/introducing_javascript_fulltex_1.html)

* * *

Lucene 是用 Java 编写的，它需要一个 Java（技术上是 JVM）进程才能访问。

PS1：如果您正在滚动自己的简单文本搜索，[JS 中的词干分析器](http://qaa.ath.cx/porter_js_demo.html)将使其更有用。

```
original: run running cat cats love loving crap crapping
stemmed: run run cat cat love love crap crap 
```

PS2：您也可以运行另一个“Ngram-ized”索引进行拼写检查。

* * *

# iphone - 在 Iphone 中测试

> ID：10356540
> 
> 赞同：1
> 
> 时间：2012-04-27T19:14:32.767
> 
> 标签：iphone

SenTestingKit 和 OCUnit 是相同的还是两种不同的测试方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T19:18:11.147

> OCUnit是一个测试框架...... OCUnit的特点包括： SenTestingKit，一个帮助你编写测试用例的框架......

所以 SenTestingKit 是 OCUnit 的一个组件（部分）。

来源：[http ://www.sente.ch/software/ocunit/](http://www.sente.ch/software/ocunit/)

# jquery - 如何重构 jquery 函数以将选择器和元素 id 作为参数传递给函数

> ID：10356543
> 
> 赞同：0
> 
> 时间：2012-04-27T19:14:42.010
> 
> 标签：jquery, jquery-selectors

我有 jquery 函数，它根据它们所在的 div 元素控制表单中的哪些复选框被选中。 var selectedObj = true; //位于 document.ready()

```
$('#selectAllEntities').click(function (event) {
    if (selectedObj == true) {
        $('#selectAllEntities').text('Unselect All');
        $(':checkbox', '#myentities').each(function () {
            this.checked = true;
        });
        selectedObj = false;
    }
    else {
        $('#selectAllEntities').text('Select All');
        $(':checkbox', '#myentities').each(function () {
            this.checked = false;
        });
        selectedObj = true;
    }
}); 
```

选择器和 div 元素 (#myentities) 是函数中唯一会改变的两个元素，我真的很想把这个因素考虑出来，这样我就可以重用这个函数，而不是每次都重写它。

我被卡住的地方是将选择器作为参数传递。由于 styl 的 css 继承，我不能将该类用作选择器

```
<div id="myentities" class="rm_RoleColumn">
                <p>
                    Select the entities that this role can view</p>
                <a id="selectAllEntities" class="am_Button floatLeft">Select All</a>
                <hr class="hrNoColor" />
                <div>
                    <asp:Panel ID="pnl_EntityList" runat="server" />
                </div>
            </div> 
```

面板是复选框出现的地方。我在服务器端生成它们并将它们呈现给 Web 控件。

我一直盯着这个太久了，所以任何关于如何重构这个函数或其他方式来看待这个的建议将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T19:51:02.490

看一下这个。我刚刚添加了类并使用了单个函数，并为按钮 ID 和输入类传递了 2 个参数。要循环通过夫妇对象，您需要使用类，因此您不需要将这些类带到您的 css 文件中，只需将它们用作目标值。这样，您可以随时调用它。[http://jsfiddle.net/hz4nN/1/](http://jsfiddle.net/hz4nN/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T19:18:21.660

使用`.on`or`.bind`和 data 参数。

```
$(myelelement).on("myevent",{someselector: "#foobar",someid:587},function (e) {
    alert(e.data.someid);
}); 
```

# c++ - 是否可以获得指向纯虚函数定义的指针？

> ID：10356549
> 
> 赞同：2
> 
> 时间：2012-04-27T19:14:58.637
> 
> 标签：c++, virtual-functions, member-function-pointers, pure-virtual

> **可能重复：**
> [使用函数指针调用虚成员函数的基类定义](https://stackoverflow.com/questions/1207106/calling-base-class-definition-of-virtual-member-function-with-function-pointer)

给定以下层次结构：

```
struct Base
{
  virtual void f() = 0;
};

void Base::f()
{
  cout << "Base::f\n";
}

struct Derived : Base
{
  void f()
  {
    cout << "Derived::f\n";
  }
}; 
```

我们可以强制调用`Base::f`像这样：

```
Derived d;

d.Base::f(); 
```

或者：

```
Base * b = &d;

b->Base::f(); 
```

那里没有惊喜。但是有没有可能得到一个`Base::f`可以调用的成员函数指针呢？

```
void (Base::*bf)() = &Base::f;

for_each( b, b+1, mem_fn( bf ) ); // calls Derived::f 
```

（为了记录，我实际上不需要这样做。我只是好奇。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T19:59:40.063

正如詹姆斯麦克内利斯评论的那样，简短的回答就是“不”。

更长的答案是，“如果你愿意接受一些*正式*的UB，那么”：

```
#include <iostream>
#include <algorithm>    // for_each
#include <functional>      // mem_fn
using namespace std;

struct Base
{
  virtual void f() = 0;
};

void Base::f()
{
  cout << "Base::f\n";
}

struct Derived : Base
{
  void f()
  {
    cout << "Derived::f\n";
  }
};

int main()
{
    struct DirtyHack: Base
    {
        void baseF() { Base::f(); }
    };

    Derived d;
    void (Base::*bf)() = static_cast< void(Base::*)() >( &DirtyHack::baseF );
    Base* b = &d;

    (b->*bf)();
    for_each( b, b+1, mem_fn( bf ) ); // calls Base::f
} 
```

我不会这样做，但是，我通常不会使用原始成员函数指针（绑定的指针是另一回事，例如对于 GUI 事件）。

Note that if you control the `Base` class, then you can just factor out the functionality that you want to be accessible non-overridden.

# r - 如何将大数据集分为两个，第一个具有定义的列号，第二个不在 R 中的第一个数据集中

> ID：10356552
> 
> 赞同：2
> 
> 时间：2012-04-27T19:15:09.387
> 
> 标签：r, dataset, split

以下是数据集，我需要制作两个。

```
ID <- 1:4
pos <- c(0, 245, 567, 871)
A1 <- c("A/B", "A/A", "B/B", "A/A")
B1 <- c("B/B", "C/C", "C/B", "D/A")
C1 <- c("B/B", "C/C", "-/-", "D/A")
mydf2 <- data.frame (ID, A1, B1, C1, pos) 
```

我有兴趣在一个数据集中有 2:4 列

```
mydf3 <- mydf2[,2:4] 
```

现在我想要不同数据框中的其余变量。

```
mydf4 <-  mydf2[, names(mydf2) != names(mydf3)] 
```

我错过了一些明显的东西吗？

```
Warning message:
In names(mydf2) != names(mydf3) :
  longer object length is not a multiple of shorter object length 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T19:17:33.500

你想要：

```
mydf4 <- mydf2[, ! names(mydf2) %in% names(mydf3)] 
```

您收到了您所做的错误消息，因为该`!=`运算符对其两个向量参数进行了元素比较。当向量具有不同的长度时，它会回收较短的向量以将其填充到较长向量的长度。你传递了长度为 3 和 5 的向量，因为这两个数字都不是另一个数字的除数，所以它暗示你可能实际上并不想要这种回收行为，并警告你它在做什么。（比较`2:4 != 1:6`to的结果，`2:4 != 1:5`看看调试起来可能更加令人费解。）

# c# - 下拉大小设置不采取

> ID：10356553
> 
> 赞同：4
> 
> 时间：2012-04-27T19:15:22.440
> 
> 标签：c#, .net, winforms, drop-down-menu

使用以下代码......

```
ToolStripControlHost treeViewHost;
    ToolStripDropDown dropDown;
    public MyTreeViewCombo()
    {
        TreeView treeView = new TreeView();
        treeView.BorderStyle = BorderStyle.None;
        treeViewHost = new ToolStripControlHost(treeView);
        // create drop down and add it
        dropDown = new ToolStripDropDown();
        dropDown.Items.Add(treeViewHost);
    }
    public TreeView TreeView
    {
        get { return treeViewHost.Control as TreeView; }
    }
    private void ShowDropDown()
    {
        if (dropDown != null)
        {
            dropDown.Height = DropDownHeight;
            dropDown.Width = DropDownWidth;
            treeViewHost.Width = DropDownWidth;
            treeViewHost.Height = DropDownHeight;
            dropDown.Show(this, 0, this.Height);
        }
    }
    [...] 
```

无论 dropDownHeight 设置为什么，它都只会显示一个小的下拉列表（高度不会改变）。

任何想法为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T19:32:22.243

检查是否有其他属性阻止它。也许[AutoSize](http://msdn.microsoft.com/en-us/library/system.windows.forms.toolstripdropdown.autosize.aspx)属性设置为`true`.

# c++ - 是否有用于 C++ 快速修复的 MessageCodeGenerator？

> ID：10356560
> 
> 赞同：3
> 
> 时间：2012-04-27T19:16:07.683
> 
> 标签：c++, quickfix

在 quickfixJ 中，有一种方法可以通过使用自定义数据字典并运行其 MessageCodeGenerator 任务来自动生成自定义消息和自定义字段对象。

[http://www.quickfixj.org/quickfixj/usermanual/1.5.1/usage/codegen.html](http://www.quickfixj.org/quickfixj/usermanual/1.5.1/usage/codegen.html)

我现在必须将原始快速修复 (C++) 用于我正在处理的一个新项目，我想知道 C++ 是否存在类似的东西。

作为替代方案（如果什么都不存在），是否有人尝试使用基于 Java 的 MessageCodeGenerator 并修改默认的 java xslt 模板以仅输出 c++ 文件？

此外，如果我以完全错误的方式处理这整件事，请随时指出使用 C++ 快速修复的正确方法，因为他们的网站对自定义示例有点“轻”（只有字段的宏定义..我对消息一无所知）

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T11:12:48.730

QuickFIX 预先生成消息并将它们包含在分发中。因此，代码生成不是构建过程的一部分。`spec`但是，您可以使用子目录中的脚本重新生成代码。生成器是使用 XSLT、shell 脚本和 Ruby 代码的组合实现的。

跑

`ruby Generate.rb`

生成消息和域代码，然后

`generate_c++.sh`或者`generate_c++.bat`

生成 MessageCracker 类。

根据修改后的 FIX*.xml 文件重新生成代码后，运行顶级 Makefile 以重建库。

# charts - Javafx 2 用手绘调整图表大小

> ID：10356561
> 
> 赞同：2
> 
> 时间：2012-04-27T19:16:08.977
> 
> 标签：charts, plot, javafx-2

我有一个代码可以在 JavaFX 2.0 中的 XYChart 上徒手绘制我​​在调整图表大小时遇到​​问题。当我调整大小时，我遇到了徒手绘制的翻译问题

当我调整新绘图的大小时，最初出现的比例失调，但经过一点“图表移动”后，它会自行修复。

我该如何改进它？

我的代码是：

```
package testjavafxapplication;

import javafx.application.Application;
import javafx.beans.value.ChangeListener;
import javafx.beans.value.ObservableValue;
import javafx.collections.ObservableList;
import javafx.event.EventHandler;
import javafx.geometry.Bounds;
import javafx.scene.chart.CategoryAxis;
import javafx.scene.chart.NumberAxis;
import javafx.scene.chart.XYChart;
import javafx.stage.Stage;
import javafx.scene.Scene;
import javafx.scene.chart.LineChart;
import javafx.scene.input.MouseEvent;
import javafx.scene.layout.BorderPane;
import javafx.scene.paint.Color;
import javafx.scene.shape.LineTo;
import javafx.scene.shape.MoveTo;
import javafx.scene.shape.Path;
import javafx.scene.transform.Scale;
import javafx.scene.transform.Transform;
import javafx.scene.transform.Translate;

public class FreehandResize extends Application {

 private CategoryAxis xAxis = new CategoryAxis();
 private NumberAxis yAxis = new NumberAxis(0.53000, 0.53910, 0.0001);
 private LineChart<String, Number> lineChart = new LineChart<String, Number>       (xAxis, yAxis);
 private Path path;
 private double initialWidth;
 private double initialheight;
 private Translate translate = new Translate(0, 0);
 private Scale scale = new Scale(1, 1);
 private ChangeListener<Number> changeListener = new ChangeListener<Number>() {

    @Override
public void changed(ObservableValue<? extends Number> observable, Number oldValue, Number newValue) {
  Bounds y_axisBounds = yAxis.getBoundsInLocal();
  double xOffset = y_axisBounds.getMaxX();

  translate.setX(xOffset);

  Bounds chartBounds = lineChart.getBoundsInLocal();
  scale.setX((chartBounds.getWidth() - xOffset) / initialWidth);
  scale.setY((chartBounds.getHeight() - xAxis.getBoundsInLocal().getHeight()) / initialheight);
    }
  };
private EventHandler<MouseEvent> mouseHandler = new EventHandler<MouseEvent>() {

@Override
public void handle(MouseEvent mouseEvent) {

  double targetX = (mouseEvent.getX() - translate.getX()) / scale.getX();
  double targetY = mouseEvent.getY() / scale.getY();

  if (mouseEvent.getEventType() == MouseEvent.MOUSE_PRESSED) {
    path.getElements().add(new MoveTo(targetX, targetY));
  } else if (mouseEvent.getEventType() == MouseEvent.MOUSE_DRAGGED) {
    path.getElements().add(new LineTo(targetX, targetY));
  }
}

 };

   @Override
   public void start(Stage stage) {
   stage.setTitle("Resize line plot");

   yAxis.setTickLabelFormatter(new NumberAxis.DefaultFormatter(yAxis) {

  @Override
  public String toString(Number object) {
    return String.format("%6.4f", object);
  }
});

lineChart.setCreateSymbols(false);
lineChart.setAlternativeRowFillVisible(false);

XYChart.Series series1 = new XYChart.Series();
series1.getData().add(new XYChart.Data("Jan", 0.53185));
series1.getData().add(new XYChart.Data("Feb", 0.532235));
series1.getData().add(new XYChart.Data("Mar", 0.53234));
series1.getData().add(new XYChart.Data("Apr", 0.538765));
series1.getData().add(new XYChart.Data("May", 0.53442));
series1.getData().add(new XYChart.Data("Jun", 0.534658));
series1.getData().add(new XYChart.Data("Jul", 0.53023));
series1.getData().add(new XYChart.Data("Aug", 0.53001));
series1.getData().add(new XYChart.Data("Sep", 0.53589));
series1.getData().add(new XYChart.Data("Oct", 0.53476));
series1.getData().add(new XYChart.Data("Nov", 0.530123));
series1.getData().add(new XYChart.Data("Dec", 0.53035));
lineChart.getData().addAll(series1);

BorderPane pane = new BorderPane();
pane.setCenter(lineChart);

Scene scene = new Scene(pane, 800, 600);
stage.setScene(scene);

path = new Path();
path.setStrokeWidth(2);
path.setStroke(Color.CHOCOLATE);

ObservableList<Transform> transforms = path.getTransforms();
transforms.add(0, translate);
transforms.add(1, scale);

scene.setOnMouseClicked(mouseHandler);
scene.setOnMouseDragged(mouseHandler);
scene.setOnMouseEntered(mouseHandler);
scene.setOnMouseExited(mouseHandler);
scene.setOnMouseMoved(mouseHandler);
scene.setOnMousePressed(mouseHandler);
scene.setOnMouseReleased(mouseHandler);

pane.getChildren().add(path);

scene.widthProperty().addListener(changeListener);
scene.heightProperty().addListener(changeListener);

stage.show();
Bounds axisBounds = yAxis.getBoundsInLocal();
double xOffset = axisBounds.getMaxX();
translate.setX(xOffset);

Bounds chartBounds = lineChart.getBoundsInLocal();
initialWidth = chartBounds.getWidth() - xOffset;
initialheight = chartBounds.getHeight() - xAxis.getBoundsInLocal().getHeight();
 }

   public static void main(String[] args) {
    launch(args);

   }
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T16:31:27.000

看来您的坐标是基于错误的锚点。您需要找到一个包含图形本身的节点，并且仅使用该节点的坐标，而不是轴或场景。

我什至建议将所有鼠标事件添加到该节点而不是场景，以避免过度的坐标转换。

另一个建议是使用[ScenicView](https://stackoverflow.com/questions/10453855/javafx-2-chart-and-freehand-zoom)工具来调查您的应用程序并查看哪些节点具有哪些坐标并验证您的数学。

# php - 更新 AJAX 返回表单

> ID：10356563
> 
> 赞同：0
> 
> 时间：2012-04-27T19:16:14.207
> 
> 标签：php, jquery, mysql, ajax

在我的网站上，我有一个表格，用户可以填写该表格以更新数据库中的记录，表格如下...

```
 <form class='bill-upd'>
             <input type='hidden' value='".$info['rand']."' name='rand2' id='rand2'>
             <input type='hidden' value='".$info['id']."' name='billid' id='billid'>
            Total <input type='text' id='total' name='total' title='".$info['bill']."' class='defaultText' /><br />
            Bill name<input type='text' id='bill-name' name='bill-name' title='".$info['bill_name']."' class='defaultText' /><br />
           bill descriptiion <input type='text' id='bill-description' name='bill-description' title='".$info['bill_description']."' class='defaultText'  /><br />
            category   <select id='bill-category' name='bill-category'>
                <option value='Household Bills'>Household Bills</option>
                <option value='Social Activities'>Social Activities</option>
            </select>
        <input type='button' value='Save' class='bill-upd-submit' />
        </form> 
```

然后我使用 AJAX 将此数据发送到我的表并相应地更新记录，***这工作正常***。

AJAX

```
 $(".bill-upd-submit").click(function() {
          var elem = $(this);
         $.post("update_bill.php", elem.parent(".bill-upd").serialize(), function(data) {
         // fade new data in
         elem.closest('li').html(data);
        });

    }); 
```

PHP

```
 $uid = $_SESSION['oauth_id'];
   $id = mysql_real_escape_string($_POST['billid']);       
   $bill = mysql_real_escape_string($_POST['total']);
   $billname = mysql_real_escape_string($_POST['bill-name']);
   $billdescription = mysql_real_escape_string($_POST['bill-description']);
   $billcolour  = mysql_real_escape_string($_POST['bill-category']);
   $rand = mysql_real_escape_string($_POST['rand2']);

        #update Record
       $query = mysql_query("UPDATE `outgoings` SET id = '$id', user_id = '$uid', bill = '$bill', bill_name = '$billname', bill_description = '$billdescription', bill_colour = '$billcolour', rand = '$rand' WHERE user_id = '$uid' AND rand = '$rand' ") or die(mysql_error());

         Print "<span class='cost'>&pound;".$bill . "</span> ";
         Print "<h4 class='bill-name'>".$billname . "</h4> ";
         Print "<p class='bill-details'><span class='bill-category'>".$billdescription . "</span> "; 
         Print "<span class='bill-description'>". $billcolour . "</span></p>"; 
     echo "<a href='#' class='edit-bill'>edit</a> 

         <form class='bill-upd show'>
            <input type='hidden' value='".$rand."' name='rand2' id='rand2'>
            <input type='hidden' value='".$billname."' name='billid' id='billid''>
            Total <input type='text' title='".$bill."' id='total' name='total' value='".$bill."'/><br />
            Bill name<input type='text' id='bill-name' name='bill-name' value='".$billname."'/><br />
           bill descriptiion <input type='text' id='bill-description' name='bill-description' value='".$billdescription."'/><br />
            bill colour<input type='text' id='bill-colour' name='bill-colour'value='".$billcolour."'/>
          <input type='button' value='Save' class='bill-upd-submit' />
        </form>   

         <form class='delete-bill'>
             <input type='hidden' value='".$rand."' name='rand2' id='rand2'>

        <input type='button' value='delete' class='delete' />
        </form>   

         "; 
```

一旦更新了我的 Ajax，然后返回所有布局的数据，只是这一次，如果我填写表格，它不会更新我的表格，如果我刷新我的页面，我可以填写它并且它可以工作，但是有没有人知道我可能做错了什么？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T19:24:24.820

因为您正在动态加载内容，所以您的初始绑定将不起作用。用于`jQuery on`这样的绑定。

```
$(function(){
    $(document).on("click",".bill-upd-submit").click(function(e) {
        e.preventDefault();
        var elem = $(this);
        $.post("update_bill.php", elem.parent(".bill-upd").serialize(), function(data){
           elem.closest('li').html(data);
        });    
     });
 }); 
```

jQuery`on`适用于当前和未来的元素（通过 ajax 左右加载）。

[http://api.jquery.com/on/](http://api.jquery.com/on/)

jQuery on 从 1.7+ 开始可用。因此，如果您使用的是之前的版本，请考虑`live`

# iphone - 石英 iPhone drawRect 未调用

> ID：10356569
> 
> 赞同：0
> 
> 时间：2012-04-27T19:16:34.177
> 
> 标签：iphone, quartz-graphics, drawrect

我正在继承 UIView 并通过详细视图控制器调用它。当我加载它时，它以正确的尺寸和位置显示，但它只是一个黑色方块......当我将 UIView 放入带有类的界面构建器时，它就可以工作。我不认为 draw rect 被称为。这是我的代码：

```
- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        // Initialization code
        [self setNeedsDisplay];
    }
    return self;
}

- (void)drawRect:(CGRect)rect
{
    // Drawing code

    CGContextRef context = UIGraphicsGetCurrentContext();
    CGContextSetRGBFillColor(context, 255.0, 255.0, 0, 1);
    CGContextStrokeRect(context, CGRectMake(0, 0, 50, 50));
} 
```

我这样称呼它：

```
 GameBox *boxy = [[GameBox alloc] initWithFrame:CGRectMake(50, 50, 50, 50)];
    [self.view addSubview: boxy]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T19:25:40.617

您正在设置填充颜色，但您正在抚摸一个矩形。您需要设置描边颜色：`CGContextSetRGBStrokeColor`

# javascript - 如何将 SlickGrid 与 Meteor.js 反应式集合集成？

> ID：10356573
> 
> 赞同：8
> 
> 时间：2012-04-27T19:16:47.360
> 
> 标签：javascript, meteor, slickgrid, minimongo

SlickGrid 专注于显示来自表或数组的数据，这很棒。Meteor 专注于处理数据，但使用 Minimongo。SlickGrid 如何与 Minimonogo 集合集成并保留其快速显示和大数据处理能力？

我目前的做法感觉不对，而且有些丑陋。我有一个单独的 SlickGrid 数组，并编写了一些胶水代码来处理更新事件：

*   排序：由 Meteor 处理，触发完全刷新（重新设置数据）
*   添加/更新/删除：找出索引并使其无效
*   过滤：由 Meteor 处理，触发完全刷新（重新设置数据）

我如何将 Meteor 数据光标直接绑定到 SlickGrid 并仅使用一些胶水代码处理事件？或者可以使用 Slick.dataview 吗？目标是处理单元级别的更新。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-12-12T12:12:31.077

使用 Slick.Dataview 只会复制集合的某些功能（排序、过滤、CRUD..），但您应该检查它以了解它如何与 Slick.Grid 交互。

如果您查看 Slick.Grid 代码，您会发现它只使用了 Dataview *.getLength()*、*.getItem()*和*.getItemMetadata()*三个函数，最后一个不是强制实现的。所以 Slick.Grid 基本上是“视图”组件，只读取“数据”（Dataview），但“控制器”在哪里？

好吧，您将实际实现它，您可以在“ [SlickGrid 示例 4](http://mleibman.github.io/SlickGrid/examples/example4-model.html) ”中找到一个示例。

该示例最重要的部分在此代码段中：

```
 // wire up model events to drive the grid
  dataView.onRowCountChanged.subscribe(function (e, args) {
    grid.updateRowCount();
    grid.render();
  });

  dataView.onRowsChanged.subscribe(function (e, args) {
    grid.invalidateRows(args.rows);
    grid.render();
  }); 
```

这 2 个事件（onRowCountChanged、onRowsChanged）将在您添加、删除、更新 Dataview 中的行并使用您将该信息传递给 Grid 的函数时触发。

所以基本的想法是对你的 Mongo.Collection 做同样的事情，据我所知 Mongo.Cursor 有 *.observeChanges()*有点类似于*.onRowsChanged*

在文档末尾的源代码中签出 SlickGrid API。

要有效地处理您的 Grid 更新，请尝试使用不同的失效方法*.invalidate(All)Row(s)()*以及*.updateRow()*和*.updateCell()*以获得更精确的控制。

这些主要是处理视图更新的方法：

```
 "render": render,
  "invalidate": invalidate,
  "invalidateRow": invalidateRow,
  "invalidateRows": invalidateRows,
  "invalidateAllRows": invalidateAllRows,
  "updateCell": updateCell,
  "updateRow": updateRow,
  "getViewport": getVisibleRange,
  "getRenderedRange": getRenderedRange,
  "resizeCanvas": resizeCanvas,
  "updateRowCount": updateRowCount,
  "scrollRowIntoView": scrollRowIntoView,
  "scrollRowToTop": scrollRowToTop,
  "scrollCellIntoView": scrollCellIntoView,
  "getCanvasNode": getCanvasNode,
  "focus": setFocus, 
```

如果您需要用户与您的 Grid 交互，请订阅事件并相应地更新您的集合。

```
 "onScroll": new Slick.Event(),
  "onSort": new Slick.Event(),
  "onHeaderMouseEnter": new Slick.Event(),
  "onHeaderMouseLeave": new Slick.Event(),
  "onHeaderContextMenu": new Slick.Event(),
  "onHeaderClick": new Slick.Event(),
  "onMouseEnter": new Slick.Event(),
  "onMouseLeave": new Slick.Event(),
  "onClick": new Slick.Event(),
  "onDblClick": new Slick.Event(),
  "onContextMenu": new Slick.Event(),
  "onKeyDown": new Slick.Event(),
  "onAddNewRow": new Slick.Event(),
  "onValidationError": new Slick.Event(),
  "onViewportChanged": new Slick.Event(),
  "onColumnsReordered": new Slick.Event(),
  "onColumnsResized": new Slick.Event(),
  "onCellChange": new Slick.Event(),
  "onActiveCellChanged": new Slick.Event(),
  "onActiveCellPositionChanged": new Slick.Event(),
  "onDragInit": new Slick.Event(),
  "onDragStart": new Slick.Event(),
  "onDrag": new Slick.Event(),
  "onDragEnd": new Slick.Event(),
  "onSelectedRowsChanged": new Slick.Event(), 
```

# prolog - Prolog“无关”变量

> ID：10356574
> 
> 赞同：0
> 
> 时间：2012-04-27T19:16:55.550
> 
> 标签：prolog

在prolog中，有没有办法让变量成为_的实例？我正在制作一个数独求解器，我用数字（给定的数字）或 -'s，（未给出的数字）表示读入的谜题。所以，我将整个拼图读入一个列表列表，现在我想将该列表传递给一个函数，我需要将“-”作为_传递。当我读取输入以将输入存储为_时，有什么方法吗？比如说..

```
get_next(X) :-
  repeat,
  get_char(Y),
  (Y = '\n' -> fail
   ;
   Y = '-' -> X = _
   ;
   X = Y
  ). 
```

像这样的东西？我想也许通过 a`'_'`会做到这一点，但当然，`'_' \= _`......任何帮助将不胜感激。Prolog对我来说很陌生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T19:35:47.467

当 Y='-' 时不要将 X 与 Y 绑定。这将使 X 未实例化（前提是它首先未实例化）：

```
get_next(X) :-
  repeat,
  get_char(Y),
  (Y = '\n' -> fail
   ;
   Y \= '-' -> X = Y  ; true
  ). 
```

# python - 使用 django-facebook 连接 DjangoApp 时出现 db_type() 错误

> ID：10356581
> 
> 赞同：0
> 
> 时间：2012-04-27T19:17:40.773
> 
> 标签：python, django, facebook, sqlite

我正在使用 django-1.4 ， sqlite3 ， django-facebookconnect

按照 Wiki 中的说明进行设置。“python manage.py syncdb”抛出错误。

```
`Creating tables ...
Creating table auth_permission
Creating table auth_group_permissions
Creating table auth_group
Creating table auth_user_user_permissions
Creating table auth_user_groups
Creating table auth_user
Creating table django_content_type
Creating table django_session
Creating table django_site
Creating table blog_post
Creating table blog_comment
Creating table django_admin_log
Traceback (most recent call last):
  File "manage.py", line 10, in 
    execute_from_command_line(sys.argv)
  File "/usr/local/lib/python2.7/dist-packages/django/core/management/**init**.py", line 443, in execute_from_command_line
    utility.execute()
  File "/usr/local/lib/python2.7/dist-packages/django/core/management/**init**.py", line 382, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File "/usr/local/lib/python2.7/dist-packages/django/core/management/base.py", line 196, in run_from_argv
    self.execute(*args, **options.**dict**)
  File "/usr/local/lib/python2.7/dist-packages/django/core/management/base.py", line 232, in execute
    output = self.handle(*args, **options)
  File "/usr/local/lib/python2.7/dist-packages/django/core/management/base.py", line 371, in handle
    return self.handle_noargs(**options)
  File "/usr/local/lib/python2.7/dist-packages/django/core/management/commands/syncdb.py", line 91, in handle_noargs
    sql, references = connection.creation.sql_create_model(model, self.style, seen_models)
  File "/usr/local/lib/python2.7/dist-packages/django/db/backends/creation.py", line 44, in sql_create_model
    col_type = f.db_type(connection=self.connection)
TypeError: db_type() got an unexpected keyword argument 'connection'` 
```

`有什么解决办法吗？？`

 `* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T17:52:30.400

您应该改用`django-facebook`它，它可以做到这一点，并且得到积极支持:)`

# php - 如何修复“未定义的偏移量”错误

> ID：10356586
> 
> 赞同：1
> 
> 时间：2012-04-27T19:18:11.460
> 
> 标签：php, arrays

我正在尝试使用具有随机生成数字的数组创建一个简单的平均计算器。我认为代码非常可靠，但我收到了这个错误：

```
Notice: Undefined offset: 10 in ../average/averageresults.php on line 31 
```

第 31 行：

```
for ($i=0; $i<=10; $i++)   {   echo $array[$i]."<br />";   } 
```

其余代码如下：

```
<?php
$array = array();

    $array[]=rand(1, 99);
    $array[]=rand(1, 99);
    $array[]=rand(1, 99);
    $array[]=rand(1, 99);
    $array[]=rand(1, 99);
    $array[]=rand(1, 99);
    $array[]=rand(1, 99);
    $array[]=rand(1, 99);
    $array[]=rand(1, 99);
    $array[]=rand(1, 99);

$i=0;
$sum = array_sum($array);
$count = count($array);
$avg = $sum/$count;

for ($i=0; $i<=10; $i++)
  {
  echo $array[$i]."<br />";
  }
echo "The average of these numbers is: ".$avg;

 ?> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-27T19:19:53.677

你“减 1”。该数组有 10 个元素，0、1、2、3、4、5、6、7、8 和 9。没有 10。

将您的 for 循环更改为：

`for ($i=0; $i<10; $i++)`“小于”而不是“小于或等于”

# android - OnActivityResults 到另一个意图

> ID：10356588
> 
> 赞同：0
> 
> 时间：2012-04-27T19:18:13.453
> 
> 标签：android, image, android-intent, send, android-activity

我已经使用了开关，因此选择按钮2时应用程序允许用户从SD卡中选择图像。

在 OnActivityResult 我得到图像 uri，然后我想得到这个 URI 文件路径并在具有 Action_send 函数的同一活动中的按钮 1 上使用它。

```
public void onClick(View v) {
            // TODO Auto-generated method stub
            switch (v.getId()){
            case R.id.button1:

                Intent i = new Intent(Intent.ACTION_SEND);
                Uri blah = Uri.parse(selectedImagePath);
                i.setType("image/*");     
                i.putExtra(Intent.EXTRA_STREAM, blah);  
                startActivity(Intent.createChooser(i, "title")); // TODO Auto-generated method stub
                break;
            case R.id.button2:
                Intent intent = new Intent(Intent.ACTION_PICK, android.provider.MediaStore.Images.Media.EXTERNAL_CONTENT_URI);
                startActivityForResult(intent, PICK_FROM_FILE);
                break;
        }
    }

protected void onActivityResult(int requestCode, int resultCode, Intent data)
{
    super.onActivityResult(requestCode, resultCode, data);
    if (resultCode == RESULT_OK){
        if(requestCode == PICK_FROM_FILE){
            imageUri = data.getData();
            //gotimage.setImageURI(selectedImageUri);
            selectedImagePath = getPath(imageUri);
    }
} 
```

}

```
private String getPath(Uri selectedImageUri) {
    // TODO Auto-generated method stub
    String[] projection = { MediaStore.Images.Media.DATA };
    Cursor cursor = managedQuery(imageUri, projection, null, null, null);
    int column_index = cursor.getColumnIndexOrThrow(MediaStore.Images.Media.DATA);
    cursor.moveToFirst();
    return cursor.getString(column_index);
} 
```

}

我在另一个问题上看到了这些家伙的代码，我看到那个家伙说要使用文件路径，如何使用 action_send 函数来完成？

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T19:26:19.773

您可以从 uri 获取文件路径

```
public void getRealPathFromURI(Uri contentUri) {
        String[] proj = { MediaStore.Images.Media.DATA };
        Cursor cursor = managedQuery(contentUri, proj, null, null, null);
        int column_index = cursor.getColumnIndexOrThrow(MediaStore.Images.Media.DATA);
        cursor.moveToFirst();
       String filepath= cursor.getString(column_index);
    } 
```

在类级别变量中保护此值，然后在 button1 上单击将字符串传递给此方法

```
public void shareThisFile(String path){

    Intent sharingIntent = new Intent(Intent.ACTION_SEND);
    Uri screenshotUri = Uri.parse(path);

    sharingIntent.setType("image/png");
    sharingIntent.putExtra(Intent.EXTRA_STREAM, path);
    startActivity(Intent.createChooser(sharingIntent, "Share image using"));
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T19:35:55.850

您可以将文件路径获取为：

```
 public static Uri imgui;

    case R.id.button2:
        Intent choosePictureIntent = new Intent(Intent.ACTION_PICK,  
android.provider.MediaStore.Images.Media.EXTERNAL_CONTENT_URI);  
         startActivityForResult(choosePictureIntent, 0); 
    startActivityForResult(choosePictureIntent , 4);
    break;

     @Override  
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {  
    if (resultCode == RESULT_OK) {  
         imgui = data.getData();  
    }  
}

    button1.setOnClickListener(new OnClickListener() {  
    @Override  
     public void onClick(View v) {  
    Intent sharingIntent = new Intent(Intent.ACTION_SEND);
    sharingIntent.setType("image/png");
    sharingIntent.putExtra(Intent.EXTRA_STREAM, imgui);
    startActivity(Intent.createChooser(sharingIntent, "Share image using"));

     }  
    }); 
```

# mysql - 从 mysql 中的函数调用 RAND() 返回相同的值：

> ID：10356592
> 
> 赞同：1
> 
> 时间：2012-04-27T19:18:32.413
> 
> 标签：mysql, random

作为查询，每次执行都会返回不同的值：

```
SELECT FLOOR(200000000000 + (RAND() * 100000000000)) 
```

编写一个功能相同的函数（从存储过程中调用）：

```
DROP FUNCTION if exists setRandomNumber//
CREATE FUNCTION setRandomNumber()
RETURNS INT
BEGIN

 DECLARE rand INT DEFAULT 0;

 SELECT FLOOR(200000000000 + (RAND() * 100000000000)) INTO rand;

RETURN rand;
END// 
```

总是产生相同的数字：

```
SELECT setRandomNumber(); 
```

产量：

setRandomNumber() 2147483647

setRandomNumber() 2147483647

setRandomNumber() 2147483647

setRandomNumber() 2147483647

等等。

这是一个错误吗？如何在函数或存储过程中迭代设置多个随机数？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-27T19:20:36.600

您正在最大化整数的限制 - 200000000000 太大了

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-01-25T13:44:55.650

您必须使用 BIGINT 而不是 INT 来返回值

# objective-c - 如何在 UILabel 中插入数组

> ID：10356597
> 
> 赞同：-2
> 
> 时间：2012-04-27T19:19:03.847
> 
> 标签：objective-c, arrays, uilabel

我正在制作一个游戏应用程序，一般的想法是，当你在车上点击时，你会得到 10 分，我有一个标签，必须显示所获得的分数......而且我也有分数数组。但我不知道如何连接它们，我应该使用 IBAction 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T20:08:56.080

您不能将数组插入标签。标签保存文本（NSString 值）。

您想在标签中添加什么，总分？（这将是您的点数组中的值的总和？）

如果是这样，您需要将代码添加到增加用户分数的方法中，以同时更新分数标签。

你可能有这样的代码：

```
- (void) addPointsToScore: (NSInteger) pointsToAdd;
{
  totalScore += pointsToAdd;
  scoreLabel.text = [NSString stringWithFormat: @"%d", totalPoints];
} 
```

该代码不处理数组，因为您没有明确说明数组的含义。它只是将分数添加到分数实例变量 (totalScore) 中，然后使用新的分数值更新 scoreLabel 标签，并转换为字符串。

这有帮助吗？

# c# - 使用 MVC 更新 SQL Server 数据库中的值

> ID：10356598
> 
> 赞同：0
> 
> 时间：2012-04-27T19:19:06.150
> 
> 标签：c#, sql-server, model-view-controller

我们对数据库中的日期有一个非常愚蠢的数据要求。月、日、年、分和小时存储在单独的列中。显然，这对于查询日期范围并不理想，尤其是使用实体框架。

我们决定只创建一个名为的新列，它是一个带有相关日期信息`combinedDate`的 SQL 。`smalldatetime`在尝试更新我们的数据库时，我们的应用程序只是冻结并且从未完成更新。我们的测试数据库只有 8400 行，所以这绝对不是什么大问题。

我们应该为此使用存储过程吗？实现这一目标的最佳方法是什么？

对于数据库中的每个新条目，我们都必须对我们的日期数据执行此操作。这些条目可能一次出现 8400 行。

列格式：

*   `Year int`= 12
*   `Month int`= 4
*   `Day int`= 27
*   `Hour int`= 12
*   `Min int`= 0

新栏目：`smalldatetime`

*   `combinedDate = '2012-04-27 12:00:00 PM'`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T19:34:52.603

我同意计算列是最好的方法。

也许你应该考虑一个不同的角度；而不是计算日期时间，而是通过计算年/月/日/小时/分钟

```
Year as (DATEPART('yyyy', Time)) persisted not null,
Month as (DATEPART('m', Time)) persisted not null,
Day as (DATEPART('d', Time)) persisted not null,
Hour as (DATEPART('hh', Time)) persisted not null,
Min as (DATEPART('mi', Time)) persisted not null,
Time datetime not null 
```

[链接到 DATEPART 文档](http://msdn.microsoft.com/en-us/library/ms174420.aspx)

这样，您将在更新时间列时自动验证其他字段。

免责声明：在撰写本文时，我不确定 DATEPART 是否可以确定使用持久化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T19:22:41.537

为什么不使用[计算列](http://www.mssqltips.com/sqlservertip/1682/using-computed-columns-in-sql-server-with-persisted-values/)？这样您就可以确保您的年、月、日、小时、分钟和日期时间字段是同步的（如果您必须保留第一个）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T20:55:53.260

正如其他人提到的，创建计算列将是更好的选择。完全避免这种方法会更好。但是，如果无法避免这种方法，这里是您可以使用的计算列表达式。在输出部分中，您可以注意到，月份和分钟中的无效值实际上加起来以显示将来的正确日期

*计算列表达式*：

```
(dateadd(year, (100) + [year],
    dateadd(month, [month] - (1),
        dateadd(day, [day] - (1),
            dateadd(hour, [hour],
                dateadd(minute, [min], (0))
                )
            )
        )
    )
) 
```

*示例脚本*：

```
CREATE TABLE dbo.myTable
(
        [year]  int NOT NULL
    ,   [month] int NOT NULL
    ,   [day]   int NOT NULL
    ,   [hour]  int NOT NULL
    ,   [min]   int NOT NULL
    ,   [smalldatetime]  AS (dateadd(year,(100)+[year],dateadd(month,[month]-(1),dateadd(day,[day]-(1),dateadd(hour,[hour],dateadd(minute,[min],(0))))))) PERSISTED
);

INSERT INTO dbo.myTable ([year], [month], [day], [hour], [min]) VALUES
    (12, 4, 27, 17, 34),
    (12, 6, 12, 4, 8),
    (11, 32, 12, 54, 87);

SELECT  [year]
    ,   [month]
    ,   [day]
    ,   [hour] 
    ,   [min] 
    ,   [smalldatetime] 
FROM    dbo.myTable; 
```

*样本输出*：

```
year month day hour min smalldatetime
---- ----- --- ---- --- -----------------------
12    4     27  17  34  2012-04-27 17:34:00.000
12    6    -12   4   8  2012-05-19 04:08:00.000
11    32    12  54  87  2013-08-14 07:27:00.000 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-27T19:23:54.993

与其尝试从`C#`侧面进行更新，不如只指定一个[`computed column`](http://msdn.microsoft.com/en-us/library/ms191250.aspx)for `combinedDate`。看一下[`DATETIMEFROMPARTS`](http://msdn.microsoft.com/en-us/library/hh213233.aspx)内置函数，可能有用

**编辑**

正如评论中指出的那样，`DATETIMEFROMPARTS`仅在 SQL Server 2012 中可用，这是从部件`y`, `m`,获取 DATETIME 的另一种方法`d`（假设为整数）：

```
CAST(CAST(y AS varchar) + '-' + CAST(m AS varchar) + '-' + CAST(d AS varchar) AS DATETIME) 
```

# c# - DataGrid 选择缺失项

> ID：10356599
> 
> 赞同：0
> 
> 时间：2012-04-27T19:19:15.343
> 
> 标签：c#, wpf, datagrid, virtualization

我有一个打开虚拟化的 DataGrid。我将 DataGrid 中的单元格的 IsSelected 属性绑定到我的模型。绑定在大多数情况下都有效（这意味着如果我单击屏幕上当前显示的单元格，它可以正常工作）。但是，如果我在有很多行时使用“全选”按钮或使用键盘（CTRL+SHIFT+Down）......它似乎会丢失一些数据。IsSelected 属性不会被设置。

我的直觉告诉我这是虚拟化的问题，但我不能关闭虚拟化，因为它太慢了。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T20:31:01.653

你是对的，因为它不起作用的原因是虚拟化。

要使其工作，您将不得不使用[DataGrid.SelectedCellsChanged](http://msdn.microsoft.com/en-us/library/system.windows.controls.datagrid.selectedcellschanged.aspx)事件手动同步[DataGrid.SelectedCells](http://msdn.microsoft.com/en-us/library/system.windows.controls.datagrid.selectedcells.aspx)和选定单元模型的集合。

# c++ - 适用于 C 或 C++ 的 Google Drive API

> ID：10356605
> 
> 赞同：15
> 
> 时间：2012-04-27T19:19:49.147
> 
> 标签：c++, c, google-drive-api

Google Drive 是否有 C 或 C++ API？

我查看了 Google API 开发人员网站，但在那里我只能找到 Java、PHP、Ruby、Python 和 C# 的 API。

我想开发一个简单的 C/C++ 命令行二进制文件来将本地文件夹同步到远程文件夹。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-28T16:08:13.863

目前，没有官方的 C 或 C++ 库。这是一个非常感激的贡献，所以如果你接受它，请告诉我们。

[例如](https://github.com/jcline/fuse-google-drive)，有一些用法可能会帮助您。

# eclipse - 带有 tomcat v5.5.30 的 servlet

> ID：10356607
> 
> 赞同：1
> 
> 时间：2012-04-27T19:19:54.657
> 
> 标签：eclipse, servlets

我创建了一个简单的动态 web 项目，并将所有必需的条目放在 web.xml 和 index.html 中，并将一个 servlet 类文件放在 WEB-INF/classes 文件夹中，当我尝试运行应用程序时，服务器没有启动并显示错误弹出显示“服务器 tomcat v5.5 无法在 45 秒内启动，如果服务器需要更多时间，请尝试在服务器编辑器中增加超时时间”。我在 localhost 和 eclipse-helios 上使用 Tomcat v5.5 服务器. 也许这是一个愚蠢的问题，但我不是无法运行我的应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T22:04:20.803

如果您尝试从 eclipse 运行 tomcat，这就是您可以增加服务器超时的方法。

单击窗口->显示视图->服务器，然后双击您的服务器并单击超时。

顺便说一句，你为什么把 servlet 放在 classes 文件夹中？通常，您将源代码（任何 java 类）放在 src 文件夹中并设置构建路径（右键单击项目-> java 构建路径-> 源代码），以便编译 b eclipses 的输出进入 classes 或 bin 文件夹。

# xslt - 如何在 JBoss AS 7.0.2 托管服务器中将 org.apache.xalan.xsltc.trax.SmartTransformerFactoryImpl 设置为转换器

> ID：10356611
> 
> 赞同：0
> 
> 时间：2012-04-27T19:20:14.310
> 
> 标签：xslt, jboss7.x, transformer

在域模式下使用 JBoss AS 7.0.2 时，我在将*org.apache.xalan.xsltc.trax.SmartTransformerFactoryImpl*设置为*javax.xml.transform.TransformerFactory时遇到问题。*如果我将以下属性放在standalone.xml 中，一切正常，但如果我在host.xml（或domain.xml）中的服务器中添加相同的属性，则服务器将无法启动。

```
<property name="javax.xml.transform.TransformerFactory" value="org.apache.xalan.xsltc.trax.SmartTransformerFactoryImpl"/> 
```

我在我的部署中有 xalan 库，但我什至尝试将它作为一个全局模块。没有任何效果。我在控制台中注意到以下错误：

```
[Server:server-one] Exception in thread "main" javax.xml.transform.TransformerFactoryConfigurationError: Provider org.apache.xalan.xsltc.trax.SmartTransformerFactoryImpl not found
[Server:server-one]     at javax.xml.transform.TransformerFactory.newInstance(TransformerFactory.java:108)
[Server:server-one]     at __redirected.__TransformerFactory.<clinit>(__TransformerFactory.java:66)
[Server:server-one]     at __redirected.__JAXPRedirected.initAll(__JAXPRedirected.java:82)
[Server:server-one]     at org.jboss.modules.Module$1.run(Module.java:88)
[Server:server-one]     at org.jboss.modules.Module$1.run(Module.java:75)
[Server:server-one]     at java.security.AccessController.doPrivileged(Native Method)
[Server:server-one]     at org.jboss.modules.Module.<clinit>(Module.java:75)
[Server:server-one]     at org.jboss.modules.Main.main(Main.java:257) 
```

如果我只是删除该属性，则服务器可以正常工作。

我还可以做些什么？？

我正在使用 JBoss AS 7.0.2 Final。

[JBoss 社区中相同问题的链接](https://community.jboss.org/message/732756)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T10:06:14.923

您必须将依赖项添加到 MANIFEST 文件中。
例如，使用 SmartTransformerFactoryImpl 类的 JAR 模块应该在 MANIFEST 文件中有以下行：

```
Dependencies: org.apache.xalan 
```

如果您使用的是 maven，则可以通过将以下配置添加到 maven JAR 插件来配置它以在打包时添加此行：

```
<configuration>
    <archive>
        <manifestEntries>
            <Dependencies>org.apache.xalan</Dependencies>
        </manifestEntries>
    </archive>
</configuration> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T17:40:34.413

我的猜测是 xalan 被放置在 JBoss 内的某个地方，并且在早期启动阶段还没有加载。

可能的解决方案：

*   推迟系统属性分配
*   将 xalan 显式放置在 jvm 类路径上，以便在早期启动时加载它

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-16T21:20:31.213

在使用 apache2 和 tomcat7 从旧的（Lenny）Debian 版本迁移 webapp 到 Debian Jessie 的过程中，我遇到了同样的问题。由于[Direct Web Remoting: TransformerFactoryConfigurationError](http://directwebremoting.org/dwr2/other/fixes.html) ，我找到了解决方案的开始。

我通过将 xalan.jar和 xsltc.jar**一起**移动到 CATALINA_HOME/lib 来完全解决它，在我的配置中是 /usr/share/tomcat7/lib。xalan.jar “单独”是不够的；它必须与 xsltc.jar“同步”，因为在 xalan.jar \org\apache\xalan\xsltc 是空的，而 xsltc.jar 有 \org\apache\xalan\xsltc\trax 并且你有 TransformerFactoryImpl 类。我在这个问题上受苦了一段时间，所以我希望分享我的经验可能对某人有所帮助。

# css - 如何使 jqgrid 显示与另一个 jqgrid 或只是一个 div 相邻？

> ID：10356612
> 
> 赞同：0
> 
> 时间：2012-04-27T19:20:16.667
> 
> 标签：css, jqgrid, inline

在包含网格的 2 个 div 上使用 css display inline 不起作用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T19:25:51.513

为您的 div 指定宽度，并根据您的要求使用“float：left”或“right”。不要对 div 使用“内联”

例如 CSS：

```
div {
 width: 100px;
 float: left;
} 
```

# mysql - 交叉表连接错误

> ID：10356617
> 
> 赞同：1
> 
> 时间：2012-04-27T19:21:04.183
> 
> 标签：mysql, join

不幸的是，我不知道问题是什么？

```
UPDATE catalog_product_entity_varchar SET value = '{somevalue}'

    FROM cataloginventory_stock_item AS csi
    JOIN catalog_product_entity AS cpe ON cpe.entity_id = csi.product_id
    JOIN catalog_product_entity_varchar AS cpev ON cpev.entity_id = cpe.entity_id

WHERE attribute_id = '1691' AND sku = '605284470695'; 
```

**错误**

```
Error Code: 1064\. You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'FROM cataloginventory_stock_item AS csi      JOIN catalog_pr' at line 3 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T19:23:34.860

该`SET`子句应位于表引用之后：

```
UPDATE
  cataloginventory_stock_item AS csi
  JOIN catalog_product_entity AS cpe ON cpe.entity_id = csi.product_id
  JOIN catalog_product_entity_varchar AS cpev ON cpev.entity_id = cpe.entity_id
SET cpev.value = '{somevalue}'
WHERE attribute_id = '1691' AND sku = '605284470695'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T19:23:15.277

你不能这样做`UPDATE ... FROM`。那是完全无效的语法。也许你在想`INSERT INTO ... SELECT FROM`？

# php - php多项选择测验创建者

> ID：10356623
> 
> 赞同：-1
> 
> 时间：2012-04-27T19:21:49.177
> 
> 标签：php, mysql

这是场景，

在我们的在线教育公司，我们正在创建一个在线测验。管理员输入

*   问题
*   1 个正确答案
*   4个错误答案

使用 PHP 表单进入 mysql 数据库。

这是桌子的样子

![在此处输入图像描述](../Images/00f5a11d87c0506188e4229569b13dc6.png)

现在我想做两件事：

1.  制作一个 PHP 页面，从表格中检索 10 个随机问题/答案，并将其显示在带有单选按钮的 PHP 页面上，供用户检查正确答案。

    可以使用以下方法显示检索到的信息吗？

    `echo "<td>" . $row['question'] . "</td>";
    echo "<td>" . $row['c_answer'] . "</td>";
    echo "<td>" . $row['w_answer1'] . "</td>";
    echo "<td>" . $row['w_answer2'] . "</td>";
    echo "<td>" . $row['w_answer3'] . "</td>";
    echo "<td>" . $row['w_answer4'] . "</td>";`

2.  创建第二个 PHP 页面，该页面检查用户提交的答案以及存储在数据库中的正确结果，脚本检查并创建记分卡。

我该如何去做这两个任务？

所有输入表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T19:45:44.037

这是经典的 HTML 表单。你有这样的表格：

```
<?php
    $row = mysql_fetch_array(mysql_queryy('select * yourtable order by rand() limit 1'),MYSQL_ASSOC);
    $question = $row['question'];
    unset($row['question']);
    shuffle($row);
?>
<form method="post" action="other_script.php?q=<?php echo $question; ?>">
    <p><?php echo $question; ?></p>
    <?php
        foreach ($row as $key => $value) {
            echo "<input type='radio' name='answer'>".$value."</input>
            ";
        }
    ?>
    <input type="submit">Submit</input>
</form> 
```

然后您的`other_script.php`页面将如下所示：

```
<?php
    $ans = mysql_result(mysql_query('select c_answer from yourtable where question = "'.url_decode($_GET['q']).'"'),0);
    if ($_POST['answer'] == $ans){
        echo "You got it right!";
    }else{
        echo "You got it wrong!";
    }
?> 
```

# entity-framework - 多对多关系 EF

> ID：10356624
> 
> 赞同：0
> 
> 时间：2012-04-27T19:21:49.277
> 
> 标签：entity-framework, code-first

我有两个实体对象：

```
 public class Contact
    {
        public int ContactID { get; set; }
        public string FirstName { get; set; }
        public string LastName { get; set; }
        public string Email { get; set; }

        public ICollection<Friend> Friends { get; set; }

    } 
```

和朋友：

```
public class Friend
{
    [Key, Column(Order = 1)]
    public int ContactId1 { get; set; }
    [Key, Column(Order = 1)]
    public int ContactId2 { get; set; }
    public DateTime DateCreated { get; set; }
} 
```

其中ContactId1 映射回一个ContactID，而ContactId2 映射回另一个ContactId。

如何确保生成正确的关系？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T20:12:10.383

您需要扩展您的`Friend`课程：

```
public class Friend
{
    [Key, Column(Order = 0), ForeignKey("Contact1")]
    public int ContactId1 { get; set; }
    public Contact Contact1 { get; set; }

    [Key, Column(Order = 1), ForeignKey("Contact2")]
    public int ContactId2 { get; set; }
    public Contact Contact2 { get; set; }

    public DateTime DateCreated { get; set; }
} 
```

`Friends`并在集合中添加一个属性`Contact`：

```
[InverseProperty("Contact1")]
public ICollection<Friend> Friends { get; set; } 
```

（您也可以使用 Fluent API 代替注解。）

结果是两个一对多的关系（您不能将此模型映射为多对多）。第一个在`Contact.Friends`和之间`Friend.Contact1`，第二个`Friend.Contact2`作为一个端点。端点 in`Friend`未在模型中公开。

然后，您可以查询例如在今天之前创建的给定联系人的所有朋友联系人：

```
DateTime today = DateTime.Now.Date;
IEnumerable<Contact> friendContacts = context.Contacts
    .Where(c => c.ContactId == givenId)
    .Select(c => c.Friends
        .Where(f => f.DateCreated < today)
        .Select(f => f.Contact2))
    .SingleOrDefault(); 
```

**伊特**

上面的映射不起作用，因为`Friend`与`Contact`. 默认情况下，对于所需的一对多关系，EF 将启用级联删除，这在两个关系中是不允许的。我们需要使用 Fluent API 重写映射以禁用级联删除，因为数据注释无法做到这一点：

```
public class Contact
{
    public int ContactID { get; set; }
    public string FirstName { get; set; }
    public string LastName { get; set; }
    public string Email { get; set; }

    public ICollection<Friend> Friends { get; set; }
}

public class Friend
{
    public int ContactID1 { get; set; }
    public Contact Contact1 { get; set; }

    public int ContactID2 { get; set; }
    public Contact Contact2 { get; set; }

    public DateTime DateCreated { get; set; }
} 
```

`OnModelCreating`然后在您的派生上下文中覆盖：

```
protected override void OnModelCreating(DbModelBuilder modelBuilder)
{
    modelBuilder.Entity<Friend>()
        .HasKey(f => new { f.ContactID1, f.ContactID2 });

    modelBuilder.Entity<Friend>()
        .HasRequired(f => f.Contact1)
        .WithMany(c => c.Friends)
        .HasForeignKey(f => f.ContactID1);

    modelBuilder.Entity<Friend>()
        .HasRequired(f => f.Contact2)
        .WithMany()
        .HasForeignKey(f => f.ContactID2)
        .WillCascadeOnDelete(false);  // <- Important
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T19:26:46.880

我想你想要两排朋友在联系时推荐两个，对吧？如果是，您需要两个创建朋友的实例。默认情况下，Entity Framework Code First 确实通过您的属性名称识别键关系。因此，在您的 Friend 类中，该属性应命名为 ContactId，因为实体名称为 Contact。

```
public class Contact
{
    public int ContactID { get; set; }
    public string FirstName { get; set; }
    public string LastName { get; set; }
    public string Email { get; set; }

    public ICollection<Friend> Friends { get; set; }

}

public class Friend
{
    public int ContactId { get; set; }
    public DateTime DateCreated { get; set; }
} 
```

# 编辑

如果你想让一个朋友有很多联系，你需要一个关系表。

```
public class Contact
{
    public int ContactID { get; set; }
    public string FirstName { get; set; }
    public string LastName { get; set; }
    public string Email { get; set; }

    public ICollection<Friend> Friends { get; set; }

}

public class Friend
{
    public int FriendId { get; set; }
    public DateTime DateCreated { get; set; }
}

public class FriendContactRel 
{
    [Key, Column(Order = 0)]
    public int ContactID { get; set; }
    [Key, Column(Order = 1)]
    public int FriendId { get; set; }
} 
```

# ruby-on-rails - Rails 选择整数字段

> ID：10356625
> 
> 赞同：1
> 
> 时间：2012-04-27T19:22:02.560
> 
> 标签：ruby-on-rails, ruby-on-rails-3.1

当我发布产品时，我输入了产品的数量，那么如何在产品页面上使用 select helper 获得这个数量？

```
<%= form_for(@product) do |f| %>
  <%= f.label :quantity %>
  <%= f.number_field :quantity %>
  <%= f.submit %>
<% end %> 
```

所以我阅读了[API 文档](http://api.rubyonrails.org/classes/ActionView/Helpers/FormOptionsHelper.html)，我能得到的最接近的是：

```
<%= select_tag "Quantity", options_from_collection_for_select(@product, 'id', 'quantity') %> 
```

# c - C 类型命名约定，_t 或 ALLCAPS

> ID：10356626
> 
> 赞同：9
> 
> 时间：2012-04-27T19:22:03.457
> 
> 标签：c, types, naming-conventions

我一直想知道是否有任何命名约定，例如何时将 ALLCAPS 用于类型以及何时附加`_t`（以及何时不使用任何东西？）。我知道过去 K&R 发布了有关如何使用 C 的各种文档，但我找不到任何关于此的内容。

在 C 标准库类型中，`_t`似乎占主导地位

```
time_t
clock_t
uint32_t
size_t
sig_atomic_t
... 
```

, 而不是`FILE`,`va_list`或`struct tm`. 这实际上有规则还是完全任意的？微软总是在他们的 Windows API 中使用 ALLCAPS 中的类型名，坦率地说，这至少看起来比 C 库更一致......

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-27T19:31:00.993

实际上根据 POSIX 标准，所有以 _t 结尾的类型名称都是保留的，定义[如下](http://www.gnu.org/software/libc/manual/html_node/Reserved-Names.html)：

> 以 '_t' 结尾的名称保留给其他类型名称。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-27T22:23:48.673

我会努力尽量减少您对`typedef`. 对结构使用`struct`关键字，并且仅在以下情况下使用 typedef配置（例如，如果您希望能够选择`float`或`double`）。

在任何情况下，不要使用 ALL CAPS，因为它非常丑陋，也不要使用`_t`，因为它是 POSIX 保留的。如果您适当地为类型名称添加前缀，那可能并不重要，但`_t`最后只是不必要的丑陋和无缘无故的不可移植性。只需像这样为它们添加前缀就可以了：（您的库/模块的名称在`foo_scalar`哪里）。`foo`

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-27T19:25:46.220

这完全是任意的——不同的库编写者/标准使用不同的约定（或根本没有约定）。只需为您的代码选择一个并保持一致。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-27T19:31:44.957

没有任何类型，因为您提到的类型可能是多年来从跨标准（例如 POSIX）和不同的主要实现中积累起来的。一个例子是`xstr`，`assert`两者都是小写的宏。但是，请确保您已阅读[C-FAQ 12.9](http://c-faq.com/decl/namespace.html)，您应该一切顺利。

您可能还想查看标准中有关保留标识符的部分。这是我的 N1570 副本所说的：

> **7.1.3 保留标识符**
> 
> 1 每个标头声明或定义其相关子条款中列出的所有标识符，并可选地声明或定义其相关未来库方向子条款中列出的标识符和标识符，这些标识符始终保留用于任何用途或用作文件范围标识符。— 以下划线和大写字母或另一个下划线开头的所有标识符始终保留用于任何用途。— 所有以下划线开头的标识符始终保留用作普通和标记名称空间中具有文件范围的标识符。
> 
> — 如果包含任何相关的标题，则保留以下任何子条款（包括未来的库方向）中的每个宏名称以供指定使用；除非另有明确说明（见 7.1.4）。
> 
> — 以下任何子条款（包括未来的库方向）和 errno 中的所有具有外部链接的标识符始终保留用作具有外部链接的标识符。184）
> 
> — 在以下任何子条款（包括未来的库方向）中列出的每个具有文件范围的标识符都保留用作宏名称和在同一名称空间中作为具有文件范围的标识符，如果包括其任何关联的头文件。
> 
> 2 没有保留其他标识符。如果程序在保留标识符的上下文中声明或定义标识符（7.1.4 允许的除外），或将保留标识符定义为宏名称，则行为未定义。
> 
> 3 如果程序删除（使用#undef）上面列出的第一组标识符的任何宏定义，则行为未定义。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-27T19:26:22.793

最常见的约定是对宏使用全部大写（仅）（无论它是否恰好是一种类型）。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-27T19:54:12.533

ALL CAPS 最常用于常量和/或宏。除了在 Windows API 中，我还没有在其他任何地方遇到过它，因此不推荐它。

uint8_t 等是一种非常常见的命名类型的方式，正如我们从标准中看到的那样。另一种常见的方式是`This`只使用首字母大写。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-04-27T20:41:47.037

ALLCAPS 通常（不普遍）用于宏，根据我的经验，很少用于类型定义。我见过的类型名称最常见的约定是LeadingUpperMixedCase 或_t 后缀（其他人指出这可能会导致与POSIX 冲突）

# c# - 日期时间转换 - 服务器

> ID：10356627
> 
> 赞同：0
> 
> 时间：2012-04-27T19:22:16.993
> 
> 标签：c#, asp.net, .net

我已将我的 DateOfBirth 属性声明为字符串，并在将其传递给数据库之前将其解析为 DateTime，因为 DateOfBirth 列在那里是 DateTime 格式。

在我的本地系统中，转换工作正常，但在将应用程序托管到服务器后，DateTime 转换显示错误，如“字符串未被识别为有效的 DateTime”。

我试过了

```
 <system.web>
  <globalization culture="en-gb"/>
  <!-- ... -->
</system.web> 
```

和

```
DateTime.Parse(DateOfBirth, new CultureInfo("en-GB")) 
```

没用，这是什么问题，谁能帮帮我...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T20:26:25.563

我的猜测是，根据文化，您传递的日期无效。一般来说，英国日期是先写日期，然后写月份。您将在 1988 年 4 月 13 日通过，解析到第 13 个月的第 4 天。13是几月？我不知道，.Net 运行时也不知道。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T19:24:23.313

您需要对其进行转换，例如：

```
var sqlDate = myDateTime.ToString("yyyy-MM-dd HH:mm:ss"); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-27T22:28:33.200

我有同样的问题，我将 web.config 文件中的文化信息更改为：

```
<globalization culture="en-gb" uiCulture="auto"/> 
```

或者

尝试将您的字符串解析为：

```
DateTime dob = DateTime.ParseExact(DateOfBirth, "dd/MM/yyyy", 
CultureInfo.InvariantCulture); 
```

希望能帮助到你... ：）

# vba - 使用 Microsoft Word 导入样式

> ID：10356628
> 
> 赞同：2
> 
> 时间：2012-04-27T19:22:17.147
> 
> 标签：vba, ms-word

我有一个宏可以在给定文件夹中的所有文件中运行。我的`Normal.dotm`全局模板具有宏使用的 3 种字体样式，但是宏停止，因为它反复找不到宏调用的样式。最简单的方法是创建一个宏（或添加到我的当前），它会自动将这 3 种样式从全局模板导入到活动文档中。

这是我到目前为止所拥有的：

```
Application.OrganizerCopy Source:= _
    "C:\Users\Inu\AppData\Roaming\Microsoft\Templates\Normal.dotm", _
    Destination:= _
    ActiveDocument _
    , Name:="DO_NOT_TRANSLATE", Object:=wdOrganizerObjectStyles
Application.OrganizerCopy Source:= _
    "C:\Users\Inu\AppData\Roaming\Microsoft\Templates\Normal.dotm", _
    Destination:= _
    ActiveDocument _
    , Name:="tw4winExternal", Object:=wdOrganizerObjectStyles
Application.OrganizerCopy Source:= _
    "C:\Users\Inu\AppData\Roaming\Microsoft\Templates\Normal.dotm", _
    Destination:= _
    ActiveDocument _
    , Name:="tw4winInternal", Object:=wdOrganizerObjectStyles 
```

有什么帮助吗？我有大约一百个需要格式化的文件，所以单独导入是不可能的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T09:23:22.560

如果您准备了具有所需样式的模板，则可以使用以下命令将它们全部复制：

```
ActiveDocument.CopyStylesFromTemplate("C:\Temp\FullPathToTemplate.dotx") 
```

还是您已经以其他方式解决了它？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-04T20:10:36.747

原始代码的问题在于 Destination 参数`Application.OrganizerCopy`需要是一个字符串——目标文档的完整路径。我已经测试了以下代码，发现它可以工作（Word 2013）：

```
Sub test_style_copy()

Dim B_failed As Boolean

    Call add_style_from_Normal(ActiveDocument, "Orcamento", B_failed)

End Sub

' -------------------------------------------------------------------------------------

Sub add_style_from_Normal(destination_document As Word.Document, _
    style_name As String, B_fail As Boolean)

'  Adds the style "style_name" from the Normal template to the styles available
'  in the document <destination_document>

Dim B_Normal As Boolean
Dim copy_style As Variant
Dim normal_template As Word.Document

    B_fail = False

'  test if style "style_name" is already present in <destination_document>

    If style_exists(destination_document, style_name) Then Exit Sub

'  open the Normal template as a document, and test if style "style_name" is
'  present in Normal template

    Set normal_template = Application.NormalTemplate.OpenAsDocument
    B_Normal = style_exists(normal_template, style_name)
    normal_template.Close
    Set normal_template = Nothing

'  Style "style_name" not in Normal template, exit:

    If Not B_Normal Then
        MsgBox "Cannot copy style """ & style_name & """ from Normal.dotm to " & _
            vbCr & destination_document.Name & " :" & vbCr & vbCr & _
            "Style """ & style_name & """ does not exist in Normal.dotm", vbCritical
        B_fail = True
        Exit Sub
    End If

'  copy style "style_name" from Normal template to <destination_document>

    With Application
        .OrganizerCopy Source:=.NormalTemplate.FullName, _
            Destination:=destination_document.FullName, _
            Name:=style_name, Object:=wdOrganizerObjectStyles
    End With

'  check that style successfully copied:

    B_fail = Not style_exists(destination_document, style_name)
    If B_fail Then MsgBox "Copy of style " & style_name & " to " & _
        destination_document.Name & " failed", vbCritical

End Sub

' -------------------------------------------------------------------------------------

Function style_exists(test_document As Word.Document, style_name As String) As Boolean

'  style_exists = TRUE      Style "style_name" exists in document <test_document>
'               = FALSE     absent

    style_exists = False
    On Error Resume Next
    style_exists = test_document.Styles(style_name).NameLocal = style_name

End Function 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-11-09T07:15:12.937

为什么不将样式从 复制`Normal.dotm`到您的文件中。

流程如下：

> 1.  打开样式窗口 9Alt + Ctrl + Shift + S)。
>     
>     
> 2.  选择“管理样式”（在窗口底部，左起第三个图标）。
>     
>     
> 3.  选择导入/导出。
>     
>     
> 4.  将您`Normal.dotm`的加载到窗口的左侧。
>     
>     
> 5.  将您的加载`SomeDoc.dotm`到窗口的右侧。
>     
>     
> 6.  从左侧窗口（在）中选择`Styles`要复制的内容。`Normal.dotm`
>     
>     
> 7.  选择`Copy`。

这些`Styles`现在已被导入到您的文档中。确保将文档保存为启用宏的模板`.dotm`。

在此之后应该不是问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-09T02:04:32.047

我不知道您是否对上述解决方案感到满意，但由于该问题仍被列为“未回答”，因此我在此处使用了一些简化的代码来解决此问题：

```
Sub Test()
    Const C_St1 = "style-1"
    Const C_St2 = "style-2"
    Const C_St3 = "style-3"

    A_Styles = Array(C_St1, C_St2, C_St3)
    Call VerifyExistenceOfStyles(A_Styles, V_Errors)
    Debug.Print V_Errors
End Sub

Sub VerifyExistenceOfStyles(A_Styles, Optional V_Errors)
    On Error Resume Next
    For Each V_Style In A_Styles
        If V_Style = "" Then
            'do nothing
        Else
            Err.Clear
            tmp = ActiveDocument.Styles(V_Style).Font.Size 'checking whether style exists
            V_ErrNumber = Err.Number
            If V_ErrNumber = 5941 Then Call AddMissingStyleFromTemplate(V_Style, V_Error) Else V_Error = ""
        End If
        V_Errors = V_Errors & IIf(V_Error = "", "", V_Error & vbCr)
    Next
    On Error GoTo 0
End Sub

Sub AddMissingStyleFromTemplate(V_Style, Optional V_Error)
    V_Template = ActiveDocument.AttachedTemplate.Path & Application.PathSeparator & ActiveDocument.AttachedTemplate.Name
    V_File = ActiveDocument.FullName

    On Error Resume Next
    Application.OrganizerCopy _
      Source:=V_Template, _
      Destination:=V_File, _
      Name:=V_Style, _
      Object:=wdOrganizerObjectStyles
    If Err.Number = 0 Then  'no error, style found in template
        V_Error = ""
    ElseIf Err.Number = 5608 Then 'is no style name
        V_Error = "|" & V_Style & "| is no valid style name, neither in the document nor in the template!"
    Else
        V_Error = "|" & V_Style & "| produces the unidentified error " & Err.Number
    End If
End Sub 
```

# sql-server - 在一列中输出两个二进制属性

> ID：10356630
> 
> 赞同：0
> 
> 时间：2012-04-27T19:22:21.577
> 
> 标签：sql-server, tsql

我有一个包含`bit`数据类型列表的表。如果其中两个属性，我们将调用它们`attrib1`并且`attrib2`BOTH = 1，我希望查询中的单个列输出为 1。

如果它们都是 0，我想将第一个结果集合并到第二个结果集，如果两个属性都为 0，则输出单个列和 0

所以

```
SELECT attrib1, attrib2  
FROM myTable
WHERE (attrib1 = 1) AND (attrib2 = 1) 
```

仅当情况为真时，我才需要该语句在带有“1”的列中输出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T20:05:24.880

您需要`Bitwise Exclusive OR (^)`在*WHERE*子句中添加一个，以便只选择其中两列`attrib1`或`attrib2`具有*0*或*1*的行。在 中，如果两列都有**1**`SELECT` ，则需要使用`Bitwise And (&)`来显示*1* ；如果两列都有*0* ，则需要使用显示**0**。

 *****脚本：

```
CREATE TABLE dbo.myTable
(
        id      int NOT NULL IDENTITY
    ,   attrib1 bit NOT NULL
    ,   attrib2 bit NOT NULL
);

INSERT INTO dbo.myTable (attrib1, attrib2) VALUES
    (1, 1),
    (0, 1),
    (1, 0),
    (0, 0);

SELECT  id
    ,   attrib1 & attrib2 AS attrib1_2
FROM    dbo.myTable
WHERE   (attrib1 ^ attrib2 = 0); 
```

结果将是：

```
id   attrib1_2
--   ---------
1       1
4       0 
```*****

# c# - “连接已打开（状态 = 打开）”

> ID：10356632
> 
> 赞同：1
> 
> 时间：2012-04-27T19:22:34.003
> 
> 标签：c#, ado.net, sql-server-ce

我是 C# 开发的新手，在尝试创建一个简单的应用程序时，我遇到了一个问题。我正在尝试根据第一个 ComboBox 的 SelectedIndexChanged 属性填充 ComboBox。Visual Studio 在第二个 cn.Open（在私有 void cboCities_SelectedIndexChanged 中）声明连接已经打开。但是，从我的代码中我相信我已经关闭了它？我做错了什么？任何和所有的帮助都非常感谢。谢谢！

```
public partial class Form1 : Form
{
    private SqlCeConnection cn = new SqlCeConnection(@"Data Source = \Program Files\ParkSurvey\ParkSurvey.sdf; Persist Security Info = False; Password = *");

    public Form1()
    {
        InitializeComponent();
    }

    private void Form1_Load(object sender, EventArgs e)
    {
        cn.Open();
        SqlCeCommand command = cn.CreateCommand();
        command.CommandText = "SELECT Name FROM Cities ORDER BY Name ASC";
        SqlCeDataAdapter da = new SqlCeDataAdapter(command);
        DataSet ds = new DataSet();
        da.Fill(ds);
        cn.Close();
        cboCities.ValueMember = "CityId";
        cboCities.DisplayMember = "Name";
        cboCities.DataSource = ds.Tables[0];
        cboCities.SelectedIndex = -1;

    }

    private void cboCities_SelectedIndexChanged(object sender, EventArgs e)
    {
        if (cboCities.SelectedIndex > -1)
        {
            cn.Open();
            string Cities = cboCities.SelectedValue.ToString();
            SqlCeCommand command = cn.CreateCommand();
            command.CommandText = "SELECT Name FROM Parks WHERE CityId ='" + Cities + "'";
            SqlCeDataAdapter da = new SqlCeDataAdapter(command);
            DataSet ds = new DataSet();
            da.Fill(ds);
            if (cn.State == ConnectionState.Open)
            cn.Close();
            cboParks.ValueMember = "ParkId";
            cboParks.DisplayMember = "Name";
            cboParks.DataSource = ds.Tables[0];
            cboParks.SelectedIndex = -1;

        }
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T19:41:24.097

您应该更改代码以在每个方法中声明一个新连接并将其包装在 using 语句中。然后它会自动关闭并处理。

# c# - 在网格中显示数据

> ID：10356635
> 
> 赞同：0
> 
> 时间：2012-04-27T19:23:07.340
> 
> 标签：c#, datagridview, vb6, grid

我是 C# 新手，过去曾在 VB6 中编写过不少代码。

我想要一些关于在 C# Windows 窗体程序的网格中显示来自 SQL 数据库的数据的建议。我已经看到很多方法可以做到这一点，但我不想学习过时的方法，所以想知道是否有人可以提供帮助。

当我使用 VB6 时，我喜欢这样做的方式是：

MS Access DB -> ODBC -> ADOConnection -> RecordSet -> MSFlexGrid

我在 C# 中看到过 DataGridView，但不认为这是我更喜欢的方法。这似乎在设计时链接到数据源，而 VB6 中的 MSFlexGrid 在运行时以编程方式填充。（如果我弄错了，我深表歉意）。

基本上，这个查询的完美答案是链接到：

1.  一个简单的数据访问教程。
2.  在网格中显示信息的所有方法的汇总。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T19:26:27.520

使用连接和数据适配器类来填充 DataTable。然后只需使用网格的 DataSource 属性将其绑定到网格。创建数据适配器的新实例时，在括号中定义 sql 查询（select from ）。它应该看起来很简单

```
DataTable table = new DataTable("myTable");
using(OdbcConnection conn = new OdbcConnection("specfiy_conn_string"))
{
    using(OdbcDataAdapter da = new OdbcDataAdapter(@"SELECT * FROM MyTable", conn))
        da.Fill(table);
}
dataGridView1.DataSource = table.DefaultView; //binding table to dgv 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T19:32:50.293

数据源“可以”在设计时链接。或者您可以在运行时以编程方式执行此操作。网上有很多这方面的教程。向人们提出问题以向您发送教程链接只会承认您知道您可以自己搜索它们。

# sql-server - 提高 'foreign_key=x' 查询的数据库性能

> ID：10356638
> 
> 赞同：0
> 
> 时间：2012-04-27T19:23:11.873
> 
> 标签：sql-server, performance, sql-server-2008, foreign-keys, sql-server-express

我在 ms-sql-server express 2008 中有一个数据库，可以从同一台 PC 使用 linq-to-sql 访问该数据库。（并发访问不多，但查询复杂）

它有几个表，每个表都可以变得很大，以至于查询、删除、更新和插入的性能变得太慢。

有一个主表*项目*，几乎所有其他表都有

*   与项目的直接 1-n 关系
*   或与与项目具有 1-n 关系的表的 1-n 关系，
*   或与这些表之一的 1-n 关系，依此类推。

选择、删除、更新和插入始终在单个项目上操作。我从不需要跨不同项目更新条目或从 2 个项目中选择匹配项目等。

有什么方法可以利用这个事实来提高数据库的性能？

在适用的情况下，我已经在外键 project_ID 上有一个非聚集索引。

还有什么我可以做的吗？如果它可用于 sql-express，分区会对我有帮助吗？

* * *

编辑：

慢查询示例（解释，大多数是 linq-to-sql 查询，对于一些删除，我直接执行 sql）：

```
 delete from items 
  where items.projectID=X 
  AND (items.prop1=a OR items.prop2=b OR items.prop3=c)
  (deletes a few 1000 items, fast when database is empty, slow when lots of other projects exist)

  select top 1 itemprops 
  from itemprops 
  inner join items on items.id = itemprops.itemid 
  inner join project on item.projectid=project.id 
  inner join modes on itemprops.modeId = mode.id
  where item.name = X and project.id = Y and mode.name = z
  (find a certain itemprop corresponding to an item and a mode)

  select top 1 * from foo where projectID=x and name=Y and type=z
  (nonclustered index on projectID + name + type exists) 
```

我所有查询之间的共同点是：它们都`where projectID=XY`在某个地方

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T00:09:29.147

对于第一条语句 (delete)，您可以创建一个新的非聚集索引，其中包括两个连接字段：

```
CREATE NONCLUSTERED INDEX <MeaningfulIndexName>
ON Items (ProjectID)
INCLUDE (Prop1, Prop2, Prop3) 
```

最后一个 SELECT 查询也是如此。优化器应该意识到这个索引会产生更好的计划并使用它 - 检查查询计划，如果没有，请查看索引提示。您也可以删除 OR 并只执行三个单独的删除查询。

在最后两个中，确保使用 ORDER BY 子句，以便查询知道您想要什么 TOP。中间一个是困难的：缺少对所有内容的索引（再次检查查询计划），您可能想看看是否可以避免加入该“名称”字段并尝试使用 ID。我知道这并不总是可能的，但 SQL 更擅长比较数字而不是字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T20:49:18.053

我对数据库中索引或各种设置的所有尝试都没有显着提高性能。

这最终对我有用：

* * *

对于这种类型的查询：

```
 delete from items 
 where items.projectID=X 
 AND (items.prop1=a OR items.prop2=b OR items.prop3=c) 
```

我没有批量删除符合条件的所有项目，而是找到了一种明显更快的方法，使用`ON DELETE CASCADE`

1.  创建一个新的虚拟项目
2.  更新所有应该删除的项目： `update items set items.projectID=DummyProjectID where items.projectID=X AND (items.prop1=a OR items.prop2=b OR items.prop3=c)`
3.  删除虚拟项目。由于启用了级联删除，这也删除了项目。

由于某种原因，这比简单地删除项目要快得多。创建新项目和更新几 1000 个项目几乎是立即发生的，删除项目比直接删除项目至少快 10 倍。

* * *

对于这些类型的查询：

```
 select top 1 itemprops ... 
```

一次将项目的所有 itemprops 加载到字典中，然后回答来自该本地缓存的所有查询，速度要快得多。它不是很优雅，我必须记住在每次更改后更新缓存，但它确实有效。

# c# - c# 中 typedef 或子类化字符串的替代方法

> ID：10356642
> 
> 赞同：17
> 
> 时间：2012-04-27T19:23:20.907
> 
> 标签：c#, syntax, typedef

**情况**

我的课程在内部处理许多不同类型的文件路径：一些是本地的，一些是远程的；有的相对，有的绝对。

过去的情况是，它的许多方法将它们作为 s 相互传递`string`，但是很难准确地跟踪每种方法所期望的路径类型。

**所需的修复**

所以我们本质上想要`typedef`四种不同的类型`string`：`RemoteRelative`、、、`LocalRelative`和。这样，静态类型检查器可以帮助开发人员确保他们提供和期望s 具有正确的语义。`RemoteAbsolute``LocalAbsolute``string`

不幸的`string`是`sealed`，在 BCL 中，所以我们不能用简单的继承来做到这一点。而且没有 simple `typedef`，所以我们也不能那样做。

**实际修复**

我最终创建了四个不同的简单类，每个类都包含一个`readonly string`.

```
public struct LocalAbsolutePath {
    public readonly string path;
    public LocalAbsolutePath(string path) {
        this.path = path;
    }
} 
```

这主要是可行的，但最终会增加一些不受欢迎的冗长。

**问题**：我是否忽略了任何自然适合简单 C# 语法的替代方案？

就像我上面提到的，C 风格`typedef string LocalAbsolutePath;`甚至 F# 风格`type LocalAbsolutePath = string`将是我的梦想。但即使是从自定义类的方向迈出的一步也会很棒。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-27T19:29:59.613

你的解决方案很好。你可以通过添加类型转换来对抗额外的冗长`string`，让你可以`LocalAbsolutePath`在任何地方使用`string`。

```
public struct LocalAbsolutePath { // Making it a class would be OK too
    private readonly string path; // <<=== It is now private
    public LocalAbsolutePath(string path) {
        this.path = path;
    }
    public static implicit operator string(LocalAbsolutePath p) {
        return p.path;
    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-27T19:31:30.160

您应该做的是保持当前为路径类型创建四个不同类的方法（甚至让它们继承相同的基类），以便您可以限制方法只接收这四个`Path`对象之一。

虽然我不觉得这`var myPath = new LocalAbsolutePath("path")`真的比 更冗长`var myPath = "path"`，因为它缺乏简洁性，它弥补了明确性，但如果你真的想要，你可以在你的类和字符串之间实现隐式转换运算符，并拥有这个工作：

```
 public static implicit operator LocalAbsolutePath(string path)
 {
     return new LocalAbsolutePath(path);
 } 
```

现在你可以这样做：

```
LocalAbsolutePath myPath = "Path String"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-11-24T01:04:24.620

我创建了一个名为[LikeType](https://github.com/mattklein999/LikeType)`typedef`的 NuGet 包，它在 C# 类中提供类似行为。

这是你将如何使用它：

```
class CustomerId : LikeType<string>
{
    public CustomerId(string id) : base(id) { }
} 
```

以下是该类型的行为方式：

```
void ShowTypeBehavior()
{
    var customerId = new CustomerId("cust-001"); // create instance with given backing value
    string custIdValue = customerId; // implicit cast from class to backing type, sets 'custIdValue' to "cust-001"

    var otherCustomerId = new CustomerId("cust-002");
    var areEqual = customerId == otherCustomerId; // false
    var areNotEqual = customerId != otherCustomerId; // true
    var areEqualUsingMethod = customerId.Equals(otherCustomerId); // false

    var customerIdCopy = new CustomerId("cust-001"); // create separate instance with same backing value
    var isCopyEqual = customerId == customerIdCopy; // true. Instances are considered equal if their backing values are equal.
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-09T14:03:43.227

由于我在我正在从事的项目中设定了相同的目标，并且我从这里的答案中受益匪浅，我想我会分享我最终得到的解决方案。处理 null，尤其是在单元测试断言中，几乎让我发疯。以下当然会失败：

```
string someStringVar = null;
MyStringType myStringType = new MyStringType(someStringVar);
MyStringType myStringTypeNull = null;
Assert.AreEqual(myStringType, myStringTypeNull); 
```

使用静态 Parse() 代替公共构造函数更令人满意，因为它让我返回 null。这通过：

```
string someStringVar = null;
MyStringType myStringType = MyStringType.Parse(someStringVar);
MyStringType myStringTypeNull = null;
Assert.AreEqual(myStringType, myStringTypeNull); 
```

此外，我不希望从字符串隐式转换为 MyStringType - 在我看来，这首先消除了一些有意识的编码器好处。允许从字符串进行隐式转换意味着调用带有 MyStringType 参数的方法将接受字符串，而我不希望这样，因为带有大量字符串参数的方法很容易出错。隐式完成的反向转换对我来说更有意义。

最后，我认为这是一个易于重用的泛型的理想案例。

无论如何，这就是我最终得到的结果：

```
public class StringType<T> where T:class
{
    private readonly string _str;

    protected StringType(string str)
    {
        _str = str;
    }

    public static implicit operator string(StringType<T> obj)
    {
        return obj == null ? null : obj._str;
    }

    public override string ToString()
    {
        return _str;
    }

    public override int GetHashCode()
    {
        return _str.GetHashCode();
    }
}

public class MyStringType : StringType<MyStringType>
{
    protected MyStringType(string str) : base(str) { }

    public static MyStringType Parse(object obj)
    {
        var str = obj is string ? (string)obj : (obj == null ? null : obj.ToString());
        return str == null ? null : new MyStringType(str);
    }
} 
```

当然欢迎评论/改进/简化！

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-04-27T19:48:37.727

也许我在这里叫错了树，但`typedef`据我所知，它在 C# 中被实现为类型别名。设置类型别名就像这样简单：

```
using LocalAbsolutePath = System.String; 
```

然后您可以开始使用`LocalAbsolutePath`作为有效类型。或多或少是这样的：

```
LocalAbsolutePath thisPath = "c:\\thisPath"; 
```

根据您的帖子，我感觉这就是您要找的东西。希望我是对的……！

# java - Java 使用 JDialog 关闭另一个窗口

> ID：10356646
> 
> 赞同：0
> 
> 时间：2012-04-27T19:23:41.960
> 
> 标签：java, swing, jdialog

我目前正在开发一个带有“开始屏幕”框架的 java 游戏。在开始屏幕中，我有一个名为 buttonLogin 的按钮。按下 buttonLogin 后，会弹出一个由 LoginDialog 类启动的登录对话框，要求您输入用户名和密码。在对话框中有两个按钮，登录和取消。按下登录后，我的游戏将打开，但开始屏幕仍然可见。

我的问题是我不知道如何在 LoginDialog 类的 actionPerformed 方法中编写代码来关闭现有的 StartScreen 窗口。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T06:14:46.437

如果 currFrame 是您的开始屏幕框架。newFrame 是您要打开的框架（在您的情况下为游戏窗口。）然后设置类似这样的内容....

```
currFrame.setVisible(false); // hide visibility.
ABCD newframe = new ABCD();  // load new frame named ABCD
newFrame.setVisible(true);   // make it visible. 
```

希望它能消除你的疑问。

# android - 异步填充后如何刷新ListView

> ID：10356653
> 
> 赞同：0
> 
> 时间：2012-04-27T19:24:12.957
> 
> 标签：android, listview, android-asynctask

我在函数 in 中设置了返回`ArrayList`包含 ListView 数据的`doInBackground`函数`AsyncTask`，并`notifyDataSetCahnged()`在 onPostExecute() 中 设置了

但是尽管arraylist中有数据，但daat不会反映在listview上？为什么 ？

## 代码：

```
public class E0XMLParsing_RSSExampleActivity extends Activity {

    ListView lvFeeds;
    FeedsAdapter feedsAdapter;
    ArrayList<Feed> listOfFeeds;
    ProgressDialog progress;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        listOfFeeds = new ArrayList<Feed>();
        lvFeeds = (ListView) findViewById(R.id.listFeeds);
        feedsAdapter = new FeedsAdapter(getApplicationContext(), R.layout.row, listOfFeeds);
        String url = "http://www.aljazeera.com/Services/Rss/?PostingId=200772215035764169";
        progress = ProgressDialog.show(this, "Aljazeera RSS", 
                                    "Please wait while downloading the RSS feeds ...");
        new DownloadRSS().execute(url);
    }

    private class DownloadRSS extends AsyncTask<String,Integer,ArrayList<Feed>>{

        @Override
        protected ArrayList<Feed> doInBackground(String... urls) {
            XMLParser parser = new XMLParser();

            return parser.getFeedsList(urls[0]);
        }

        protected void onPostExecute(ArrayList<Feed> listOfFeeds2){
            progress.dismiss();
            listOfFeeds = listOfFeeds2;
            feedsAdapter.notifyDataSetChanged();
        }

    } 
```

饲料适配器

```
public class FeedsAdapter extends ArrayAdapter<Feed>{

    public ArrayList<Feed> listOfFeeds= null;
    Context context;
    public FeedsAdapter(Context context,int textViewResourceId,ArrayList<Feed> feeds) {
        super(context,textViewResourceId,feeds);
        this.listOfFeeds = feeds;
        this.context = context;
    }

    @Override
    public View getView(int position, View view,ViewGroup parent){
        View v= view;
        if (v!=null){
            LayoutInflater inflater = (LayoutInflater)context.getSystemService(context.LAYOUT_INFLATER_SERVICE);
            v = inflater.inflate(R.layout.row,null);
            Feed f = listOfFeeds.get(position);

            TextView lblTitle = (TextView) v.findViewById(R.id.lblTitle);
            TextView lblDescription = (TextView) v.findViewById(R.id.lblDescription);
            TextView lblDate = (TextView) v.findViewById(R.id.lblDate);

            lblTitle.setText(f.title);
            lblDescription.setText(f.description);
            lblDate.setText(f.date);
        }

        return v;
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T19:49:45.867

当您调用`listOfFeeds = listOfFeeds2;`它时，它将新对象引用设置为您的对象**listOfFeeds**并使在适配器上调用**notifyDataSetChanged无用。**为了解决这个问题，您可以在**onPostExecute**中做两件事。

第一的：

```
listOfFeeds.clear();
listOfFeeds.addAll(listOfFeeds2);
feedsAdapter.notifyDataSetChanged(); 
```

**在这种方法中，您正在清除**listOfFeeds**并从第二个对象推送项目，从而导致不更改适配器的数据对象引用。所以你需要调用 notifyDataSetChanged 来更新列表*

第二：

```
feedsAdapter = new FeedsAdapter(getApplicationContext(),
       R.layout.row, listOfFeeds);
listOfFeeds.setAdapter(feedsAdapter); 
```

**在这种方法中，您只需设置新的适配器。所以你不需要在这里调用 notifyDataSetChanged*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T19:56:40.550

我不确定这是否能回答你的问题，但为了更新你的 ListView，首先你必须更新适配器，然后在 ListView 设置适配器，最后再次绘制 ListView

```
ArrayAdapter<String> myAdapter = new ArrayAdapter<String>(this, R.layout.simple_list_item_1, myNewStringArray);
myListView.setAdapter(myAdapter);
myListView.invalidate() //if you perform the re-draw in UI thread
// OR myListView.postInvalidate() if you perform the re-draw in non-UI thread 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-27T19:34:11.900

在`onPostExecute()`中，将所有数据放入一个`runOnUiThread()`调用中：

```
runonuithread () {
    feedsAdapter.notifyDataSetChanged();
} 
```

# sql - 逻辑搜索字段数据库选择问题

> ID：10356654
> 
> 赞同：1
> 
> 时间：2012-04-27T19:24:14.953
> 
> 标签：sql, postgresql, node.js, search

这是一个有点复杂但简单的问题。我正在创建一个允许存储在对象上的小型应用程序，该对象具有标题、描述、标签和子对象。主题包含评论。什么是使用搜索字段在这些对象中查找任何匹配项的理想方式。

例如对象 1 {id:1, title:test, description:fun, tags:[{games, Toys}]} 子对象 1 {lid:1, comment:'this is fun and fast'}

说我搜索：乐趣快。或者我搜索：测试

我希望其中任何一个返回相同的对象。

我知道我将不得不用空格或逗号分解变量并创建一个数组，但是我应该如何构造 sql。

我不是想创建一个复杂的页面排名算法，如果我必须限制按标题或标签或描述进行搜索，我会这样做。

注意：这是一个简单的应用程序，我只是在寻找选项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T19:51:19.577

我知道的最简单的方法是使用 PostgreSQL trigram 搜索。假设你有一个这样的表：

```
CREATE TABLE t (id int NOT NULL PRIMARY KEY, value text);
INSERT INTO t VALUES (1, '{id:1, title:test, description:fun, tags:[{games, toys}]} subobject 1 {lid:1, comment:''this is fun and fast''}'); 
```

您可以使用以下方法准备搜索：

```
CREATE EXTENSION pg_trgm;
CREATE INDEX t_trgm ON t USING gin (value gin_trgm_ops);
SELECT set_limit(0.05); 
```

您只需为每个数据库安装一次扩展。您可以使用 GiST 或 GIN 索引；只需使用相应的操作集。GiST 通常更新速度更快；GIN 通常搜索速度更快——因此最佳选择取决于工作量。我将连接的相似性限制设置为 5%，因为您似乎对字符串的一小部分匹配感到满意。根据需要进行调整。请记住，此限制是基于会话的，因此您需要在使用 % 运算符之前在连接上设置它。

完成该设置后，以下是搜索：

```
SELECT * FROM t WHERE value % 'test';
SELECT * FROM t WHERE value % 'fun fast'; 
```

没有比这更简单的了。

虽然当表中只有一行时它甚至可能不会*使用*索引，但我们发现在我们的生产数据库中有数百万行要搜索，相似性搜索通常会在几十毫秒内运行。

[http://www.postgresql.org/docs/current/interactive/pgtrgm.html](http://www.postgresql.org/docs/current/interactive/pgtrgm.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T19:34:51.470

最简单的方法是将您的字段组合成一个 JSON 对象，并将其放在 MongoDB 或另一个 JSON 数据库中

# html - xslt 文本禁用输出转义

> ID：10356660
> 
> 赞同：0
> 
> 时间：2012-04-27T19:24:32.433
> 
> 标签：html, xml, xslt, cdata

使用 XSL 从 XML 创建 HTML 页面 我想知道如何在生成的 HTML 页面中编写注释。

到目前为止，这是我的 XSL：

```
<?xml version="1.0" encoding="US-ASCII" ?>
  <xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
  <xsl:output method="html" omit-xml-declaration="no" indent="yes" />
      <xsl:text disable-output-escaping="yes">
        <![CDATA[<!--comment-->]]>
      </xsl:text>
</xsl:stylesheet> 
```

它不起作用，它给出了下一个错误：

```
Warning: XSLTProcessor::importStylesheet(): compilation error: file mydirectoy/Myxsl.xsl line 4 element text 
```

我怎样才能使这项工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T19:36:35.350

像这样做：

```
...
<xsl:comment>comment</xsl:comment>
... 
```

你不会把它包装成`xsl:text`or `CDATA`。`xsl:comment`将在结果树中创建一个注释节点。这是规范的链接：http: [//www.w3.org/TR/xslt#section-Creating-Comments](http://www.w3.org/TR/xslt#section-Creating-Comments)

# php - 读取包含 pdf 文档数据的 CSV 文件并将信息存储在 MYSQL 数据库中

> ID：10356663
> 
> 赞同：0
> 
> 时间：2012-04-27T19:25:16.653
> 
> 标签：php, mysql, csv, repository, document

我的 CSV 文件有如下数据——

```
文件名、标题、文档类型
“abc.pdf”，“DesignDocument1”，“设计”
"125_df.pdf","testingDocument","Test"
"abc4.pdf","","设计"

```

我想在 PHP 中：---

1.  逐行读取CSV数据并将它们存储在数据库中
2.  为每个文件生成唯一的文件名并将它们存储在特定文件夹中

我正在寻找表格输出，例如-

```
fileID 文件名、标题、文档类型
00001 abc.pdf DesignDocument1 设计
00002 125_df.pdf testingDecument 测试
00003 abc4.pdf 设计

```

我将不胜感激任何建议/程序来有效地完成它们

我为我糟糕的英语道歉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T19:28:14.103

使用加载数据文件：

```
LOAD DATA INFILE 'yourfilename.txt' INTO TABLE yourtablename (col1,col2,...); 
```

在 PHP 中，您将运行类似于以下的查询：

```
mysql_query("LOAD DATA INFILE 'yourfilename.txt' INTO TABLE `yourtablename` FIELDS TERMINATED BY ',' LINES TERMINATED BY '\n';",$con) 
```

# c# - 正确使用析构函数c#

> ID：10356669
> 
> 赞同：3
> 
> 时间：2012-04-27T19:25:43.377
> 
> 标签：c#, destructor, dispose

所以我一直在考虑为我编写的类实现析构函数，但我不确定如何真正释放内存，或者这是否将由垃圾收集处理。

```
class AutomatedTest
{
   public bool testComplete = false;
   public bool testStopRequest = false;

   public List<Command> commandList = new List<Command>();

   private bool loggingEnabled = false;
   ...

   public AutomatedTest(TestList testToCreate)
   {
       // Create a list of Command objects and add them to the list
   }
} 
```

类的使用方式：

```
for(int numTests = 0; numTests < 20; numTests++)
{
    AutomatedTest test1 = new AutomatedTest(TestList._1DayTest);
    RunAutoTest(test1);

    AutomatedTest test2 = new AutomatedTest(TestList._2DayTest);
    RunAutoTest(test2);

    AutomatedTest test3 = new AutomatedTest(TestList._3DayTest);
    RunAutoTest(test3);

    AutomatedTest test4 = new AutomatedTest(TestList._4DayTest);
    RunAutoTest(test4);
} 
```

因此创建并运行了 4 个对象，并执行了 20 次。
我的问题是我应该如何正确处置/销毁这些对象？我不想假设这些是垃圾收集的，但我是实施析构函数的新手。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T19:28:32.787

只要您不使用任何实现 IDisposable 的对象，您就不必手动处置或销毁。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T19:28:50.993

您将无法控制这些对象何时被垃圾收集。正如[Henk Holterman](https://stackoverflow.com/a/10356704/452274)提到的，您可能需要考虑实现 IDisposable，或使用 IDisposable 模式。如果您不需要这样做，我不会担心使用`.Dispose()`或终结器，`~AutomatedTest()`

假设这些测试方法可能需要一段时间，你可以说`test1 = null;`在你用完之后让 .NET 知道这个对象引用不再使用，否则一旦它超出范围，GC 就会清理。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T19:57:28.927

当你的对象被垃圾回收时，一个类的析构函数被调用。在像 c# 这样的托管编程语言中，您无法控制垃圾收集器何时运行并执行您的析构函数。当 CLR（公共语言运行时）发现该对象不再在程序中被引用或使用时，垃圾收集由它负责。在您的示例中，考虑代码

```
AutomatedTest test1 = new AutomatedTest(TestList._1DayTest);
RunAutoTest(test1); 
```

执行 RunAutoTest(test1) 后，“test1”引用变量不再使用，可用于垃圾回收。但是，实际的垃圾收集过程可能不会立即运行，并且您无法确保它在特定时间运行。如果在您的 AutomatedTest 类中您正在使用诸如打开 FileStream 等资源，则在使用完该类的对象后，您需要释放这些资源。这可以通过让您的类以下列方式实现 IDisposable 接口来完成

```
class AutomatedTest:IDisposable
    {
        public void Dispose()
        {
            //free up any resources
        }
    } 
```

一旦你的类实现了 IDisposable，你可以通过将它的创建包装在一个“使用”块中来使用它

```
 for (int numTests = 0; numTests < 20; numTests++)
        {
            using (AutomatedTest test1 = new AutomatedTest(TestList._1DayTest))
            {
                RunAutoTest(test1);
            }
            //as soon as code exits the 'using' block the dispose method on test1 would be called
            //this is something you cannot guarantee when implementing a destructor

            using (AutomatedTest test2 = new AutomatedTest(TestList._2DayTest))
            {
                RunAutoTest(test2);
            }
            //dispose on test2 will be called here

            ///rest of code
        } 
```

仅供参考，可以使用 ~ 在 C# 中实现析构函数。实现 IDisposable 的方法优于创建析构函数

```
 class AutomatedTest
    {

        ~AutomatedTest()
        {
            //code will run only on garbage collection
        }
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-27T19:28:49.967

您最好的选择是[此处](http://www.codeproject.com/Articles/15360/Implementing-IDisposable-and-the-Dispose-Pattern-P)详述的 IDisposable 模式。但正如其他人指出的那样，只有当您的对象持有一些昂贵的资源（如文件句柄、流、DB 对象等）时，这才是必要的。其他一切都将由 GC 收集。相信它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-27T19:29:20.683

我相信对此的公平规则是“如果您的任何对象处理非托管资源或实现 IDisposable，则需要处置它们。” 我在您发布的代码中没有看到任何不受管理的内容，因此您可能无需担心。但是，显然有些代码我们看不到，所以我不能确定。

请阅读此[MSDN 文章](http://msdn.microsoft.com/en-us/library/b1yfkh5e%28v=vs.100%29.aspx)以获取有关正确处理的说明。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-27T19:29:20.933

在对象被垃圾回收之前， “析构函数”或`Finalizer`通常称为的“析构函数”不会被调用。

因此，如果您有需要释放的资源，最好实施`IDisposable`.

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-27T19:29:53.763

处理昂贵对象的处置的方法之一是实现 IDisposable 接口并实现 Dispose 和 Finalize 方法。当您的类依赖于非托管代码并负责清理它们时，这是推荐的模式。更多细节[在这里](http://msdn.microsoft.com/en-us/library/b1yfkh5e%28v=vs.100%29.aspx)

# iphone - 从 UIScrollView 和 UITableViewController 中的 URL 延迟加载图像

> ID：10356673
> 
> 赞同：0
> 
> 时间：2012-04-27T19:25:56.423
> 
> 标签：iphone

我想在我的项目中从 UIScrollView 中的 url 延迟加载图像，我搜索了堆栈溢出，但无法搜索合适的示例，所以请帮助不要标记为重复，我该如何实现？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T20:20:45.330

我正在使用 Verkoey 的开源[Nimbus](https://github.com/jverkoey/nimbus)框架中的 NINetworkImageView 类。简单，易于编码，缓存图像，因此您可以在没有网络 IO 的情况下再次获取它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T20:26:31.757

我强烈推荐[SDWebImage](https://github.com/rs/SDWebImage)开源库。

它提供：

*   一个 UIImageView 类别，为 Cocoa Touch 框架添加 web 图像和缓存管理
*   一个异步图片下载器
*   具有自动缓存过期处理的异步内存 + 磁盘映像缓存

它非常强大，但设置起来又快又容易。

# jquery - Jquery Mobile ListView 设计

> ID：10356681
> 
> 赞同：0
> 
> 时间：2012-04-27T19:26:30.217
> 
> 标签：jquery, jquery-mobile

我写了一个简单的 listView 这是结果：![在此处输入图像描述](../Images/7d58bda46d4b8b522e7b5359c1b65614.png)

但它看起来不正确。这是我想要的结果，例如： ![在此处输入图像描述](../Images/7df1ccf63feb79253e01d8f5f36e3cd2.png)

这是我的代码：html：

```
<div data-role="page" id="home">

    <div data-role="header">
        <h1>Players</h1>
    </div>

    <div data-role="content">
        <ul data-role="listview" id="artiste"></ul>    
    </div>

</div> 
```

js+jquery：

```
function querySuccess(tx, results){
    var len = results.rows.length;
    var dataset= results.rows;

    $("#artiste").empty();

    for (var i = 0; i < len; i++){
        item = dataset.item(i);

        $("#artiste").append( "<li data-theme='c' data-name='"+item['firstName']+"'><a  rel='external' href='game.html'><img src='images/avatar.jpg'><h3>"+item['firstName']+"</h3></a></li>" );

    } 

    $('#artiste').children('li').on('click', function (){
        alert('Selected Name=' + $(this).attr('data-name'));
    });  

} 
```

我不明白为什么我得到这个结果有什么想法吗？

先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T23:55:45.233

这是对发生的事情的简要说明。JQM 基本上是在添加列表视图项之前对内容进行样式设置。您已告诉 JQM 刷新您刚刚添加内容的小部件。将项目附加到列表视图后，您必须`listview('refresh');`在 for 循环完成后运行所以在您的情况下运行：

```
$("#artiste").listview('refresh'); 
```

# windows - 系统准备服务器后 Git 远程无法工作

> ID：10356691
> 
> 赞同：2
> 
> 时间：2012-04-27T19:27:19.293
> 
> 标签：windows, ssh, gitolite, openssh

所以，长话短说，我不小心对我的开发服务器进行了 sysprep，而不是我正在处理的 vm（我知道，打开了太多 rdp 窗口并且由于新生儿而剥夺了睡眠）。

开发服务器工作正常，我将机器名称改回原来的名称并重新分配了旧的 IP 地址。服务器上的其他一切似乎都可以正常工作，但我无法再远程连接到 git。我认为它与 gitolite 或 ssh 相关。

git clone 给我：连接被 192.168.10.20 关闭致命：远程端意外挂断

这是我从 ssh -v 得到的

```
OpenSSH_4.6p1, OpenSSL 0.9.8e 23 Feb 2007
debug1: Connecting to myserver [<serveripaddress>] port 22.
debug1: Connection established.
debug1: identity file /c/Users/me/.ssh/identity type -1
debug1: identity file /c/Users/me/.ssh/id_rsa type 1
debug1: identity file /c/Users/me/.ssh/id_dsa type -1
debug1: Remote protocol version 2.0, remote software version OpenSSH_5.8
debug1: match: OpenSSH_5.8 pat OpenSSH*
debug1: Enabling compatibility mode for protocol 2.0
debug1: Local version string SSH-2.0-OpenSSH_4.6
debug1: SSH2_MSG_KEXINIT sent
debug1: SSH2_MSG_KEXINIT received
debug1: kex: server->client aes128-cbc hmac-md5 none
debug1: kex: client->server aes128-cbc hmac-md5 none
debug1: SSH2_MSG_KEX_DH_GEX_REQUEST(1024<1024<8192) sent
debug1: expecting SSH2_MSG_KEX_DH_GEX_GROUP
debug1: SSH2_MSG_KEX_DH_GEX_INIT sent
debug1: expecting SSH2_MSG_KEX_DH_GEX_REPLY
debug1: Host 'myserver' is known and matches the RSA host key.
debug1: Found key in /c/Users/me/.ssh/known_hosts:3
debug1: ssh_rsa_verify: signature correct
debug1: SSH2_MSG_NEWKEYS sent
debug1: expecting SSH2_MSG_NEWKEYS
debug1: SSH2_MSG_NEWKEYS received
debug1: SSH2_MSG_SERVICE_REQUEST sent
debug1: SSH2_MSG_SERVICE_ACCEPT received
debug1: Authentications that can continue: publickey,password,keyboard-interactive
debug1: Next authentication method: publickey
debug1: Trying private key: /c/Users/me/.ssh/identity
debug1: Offering public key: /c/Users/me/.ssh/id_rsa
Connection closed by <serveripaddress> 
```

任何如何解决这个问题的想法都非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T11:23:07.610

有点像“ [Re: sshd: PID xxxx: fatal: initgroups: myid: Invalid argument.](http://www.mail-archive.com/cygwin@cygwin.com/msg82987.html) ”，问题在于用户`/etc/passwd`的`/etc/group`SID 错误（这里是 ' `git`'）

[OP Ian1971](https://stackoverflow.com/users/53970/ian1971)评论：

> 问题是**sysprep 创建了新的机器 id**，所以我所有的本地 Windows sid 在`/etc/passwd`和`/etc/group`.

# python - 只有每 5 个形状有效读取 shapefile

> ID：10356693
> 
> 赞同：0
> 
> 时间：2012-04-27T19:27:37.453
> 
> 标签：python, shapefile

我在佛罗里达州有一个干洗设施的 shapefile。我正在使用 shapefile.py 在 Python 中读取文件。我的问题是，虽然文件中的第一个形状看起来是正确的，但之后只有每 5 个形状是正确的。连续提取了四个形状，类型代码无效（应该在 0 到 31 之间）并且没有点信息。以下是部分结果：

```
Site Name (.record[1])               .shapeType  .points
------------------------------------ ----------- --------------------
Granda Dry Cleaners                  21          [[783897.335, 215901.765]]
Scotch Dry Cleaners                  1093131927  []
J C Cleaners                         -1191051264 []
Royal Palm Cleaners                  -1606317767 []
Moorings Plaza Dry Cleaners          1091081765  []
Classic Touch Cleaners               21          [[778662.429, 221265.968]]
The Drycleaner                       1093095627  []
Randolphs Alterations & Dry Cleaner  -1140719616 []
Pelican French Cleaners              1580547967  []
Town & Country Cleaners              1091080779  []
Discount Dryclean Outlet             21          [[768035.181, 188652.929]]
The Drycleaner Cleaners              1093104359  []
Sample Cleaners                      -1090387968 []
Parisian Cleaners                    -1468878813 []
Roberts Cleaners & Tailors           1091022843  [] 
```

（注意：我稍微降低了点的精度以使它们适合一条线）。

在我看来，该模式是常规的——一个“有效”记录后跟四个具有无效 shapeType 常量且没有点的记录。

我是 shapefile 处理的新手。这些结果是否表明我可能做错了什么？

**更新**

下面的代码演示了这个问题（它打印了上面描述的 shapeType 和 points 列）：

```
from shapefile import Reader)
rdr = Reader('drycleaner_list')
for s in rdr.shapes():
   print s.shapeType, s.points 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T21:36:38.587

首先，您需要确定问题是否出在 shapefile 上。尝试使用真正的 GIS 工具（例如 QuantumGIS）加载文件。一旦您确定您的 SHP 文件是正确的，请发布您的代码，以便我们了解您如何使用 shapefile.py。我的猜测是 SHP 文件在某些​​方面不正确，而 Quantum GIS 将修复它或告诉你什么是错的。奖励：QuantumGIS 将 python 作为插件开发工具嵌入。

**编辑：** 我从佛罗里达 DEP 下载了文件 dryclean_apr12.shp。根据dbf数据，有1423条记录。当我使用你的代码片段时，我得到了 1423 个 shapetype=1 的形状，这表明每个形状都是一个点。

因此您的代码是正确的，问题必须与文件有关。

我在您的示例数据中注意到 shapetype 是 21 或 PointM 定义为

职位 字段 值 类型 编号 顺序

```
Byte 0 Shape Type 21 Integer 1 Little
Byte 4 X X Double 1 Little
Byte 12 Y Y Double 1 Little
Byte 20 M M Double 1 Little 
```

一个点被定义为

```
Position Field Value Type Number Order
Byte 0 Shape Type 1 Integer 1 Little
Byte 4 X X Double 1 Little
Byte 12 Y Y Double 1 Little 
```

Shapefile 已损坏或 shapefile.py 中存在错误。

带有 PointM 的 Shapefile 的布局为

```
IDDD
IDDD
IDDD
IDDD
IDDD
IDDD 
```

如果 Shapefile 将其读取为点 (IDD)

然后文件被读取为

```
IDD      Rec 1 Read OK
did      Rec 2 Error on Type
ddi      Rec 3 error on Type
ddd      Rec 4 error on Type
IDD      Rec 5 Read OK 
```

# spring - SpringSource Tool Suite 无法导入 spring 库类

> ID：10356702
> 
> 赞同：0
> 
> 时间：2012-04-27T19:28:35.950
> 
> 标签：spring, sts-springsourcetoolsuite

我刚刚学习 Spring 并在我安装的 STS 上试用[了示例 Hello World 应用程序。](http://www.vaannila.com/spring/spring-ide-1.html)

但是，没有一个导入工作。我试过多次安装，没有任何变化。我是否需要执行任何安装后或项目后创建步骤才能做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T20:32:20.967

这是一个非常古老的教程。我建议尝试更现代的教程，比如这里的教程。

[http://blog.springsource.org/2012/04/09/create-spring-integration-projects-using-sts/](http://blog.springsource.org/2012/04/09/create-spring-integration-projects-using-sts/)

本教程描述了如何创建稍微复杂的项目，但它使用最新的 STS，这应该适合您。

# c++ - 如何实现基于关系矩阵的逻辑

> ID：10356708
> 
> 赞同：1
> 
> 时间：2012-04-27T19:28:54.647
> 
> 标签：c++, logic, relationship

考虑到我有一个对称的关系矩阵，类似于：![](../Images/e32d8464831ca8927637714a25eef72d.png)

除了每个“结果”都是一小段代码。

我的场景：我有一堆`Entity`相互“碰撞”的物体。每个实体都有一个`CollisionType`值（枚举）。在设计中，存在一个关系矩阵，它描述了当不同的 CollisionType 相互相遇时实体的行为。

我想知道：我将如何以一种易于添加新 CollisionTypes 的干净且高性能的方式表示关系，并在其之上实现逻辑？在我看来，它看起来像是一个 2D Switch 语句。

示例（差）解决方案：

```
void CollideEntities( Entity e1, Entity e2 ) {
    CollisionType t1 = e1.GetCollisionType();
    CollisionType t2 = e2.GetCollisionType();

    // perform basic logic based on t1 & t2
    if ( (t1 == COL_SOLID && t2 == COL_SQUISHY) || (t1 == COL_SQUISHY && t2 == COL_SOLID) ) {
        // do stuff..
    } else if ( (t1 == COL_SOLID && t2 == COL_DAMAGE) || (t1 == COL_DAMAGE && t2 == COL_SOLID) ) {
        // do other stuff..
    } // and so on...

} 
```

许多潜在的解决方案对我来说是显而易见的，但没有一个让我觉得特别干净、高效或易于添加新类型......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T19:33:38.157

我不会那样做的。我有一个 Map ，其中的键将查找包含所需行为的 Command 对象。

另一种可能性是访问者模式（又名“双重调度”）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T19:59:59.600

试试这个：

```
#include <vector>
#include <iostream>

class Symmetric_matrix {
  private:
    size_t size1;
    // The next should be <bool> rather than <int>,
    // but the writer's compiler objects.
    std::vector<int> outcomes;
  public:
    size_t size() const { return size1; }
    int &operator()(const size_t i, const size_t j) {
        const size_t a = i <= j ? i : j;
        const size_t b = i <= j ? j : i;
        return outcomes[(b*(b-1))/2 + a];
    }
    Symmetric_matrix(const size_t size0)
      : size1(size0), outcomes((size()*(size()-1))/2, false) {}
};

// Here is a test driver.
int main() {
    Symmetric_matrix sm(5);
    sm(0, 1) = true;
    sm(0, 3) = true;
    sm(1, 3) = true;
    sm(2, 3) = true;
    sm(3, 4) = true;
    std::cout << "buyer-approver      : " << sm(0, 2) << "\n";
    std::cout << "approver-buyer      : " << sm(2, 0) << "\n";
    std::cout << "approver-requisition: " << sm(2, 3) << "\n";
    std::cout << "requisition-approver: " << sm(3, 2) << "\n";
    return 0;
} 
```

你的问题很有趣。正如您所观察到的，只需要存储矩阵的上三角形或下三角形，而不需要同时存储两者。

但`(b*(b-1))/2`你问这是怎么回事？答案：它来自一个奇怪的算术事实，即 0 + 1 + 2 + ... + (b-1) == (b*(b-1))/2（试试看）。

当然，我的示例代码可以进行一些改进。一方面，由于某种原因（需要建议），我的代码在使用 a 时失败`std::vector<bool>`，所以我使用 a`std::vector<int>`作为解决方法。另一方面，它不包括对案件的适当处理`i == j`。然而，它所做的是传达基本技术。您可以自行决定填写详细信息。

（*更新：*后来我想到了为什么`std::vector<bool>`失败。它失败是因为`std::vector<bool>`实现为位数组，而单个位不能是*左值*，因为它没有自己的地址。通过巧妙的编码，通过`operator()()`返回一个某些特殊定义类型的操纵器，可以在不改变 的情况下解决问题，但如果我们想要使用`main()`它，定义和使用`set()`成员函数可能是最简单的。）`<bool>`

# sockets - 安装 Lua 套接字库

> ID：10356709
> 
> 赞同：11
> 
> 时间：2012-04-27T19:28:57.360
> 
> 标签：sockets, lua, luasocket

要么我太累了，要么我瞎了。我想用 Lua 学习网络，因此我必须安装`socket`lib，所以我可以轻松地要求它，但我不知道我应该“要求”哪些文件。该示例说：

```
local socket = require("socket") 
```

但正如我所说，我不知道我应该包含哪些文件，如果我使用`socket.lua`它不起作用并且我得到：`No files found`.

我从这里得到了库：[Lua socket download](http://files.luaforge.net/releases/luasocket/luasocket/luasocket-2.0.2)

或者，还有另一种安装套接字库的方法吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-27T22:52:47.323

当您使用 Lua 加载模块时，`require`使用包路径来确定在哪里查找模块。查看 Lua 手册的[模块](http://www.lua.org/manual/5.3/manual.html#6.3)部分。具体来说，关于`package.path`和的部分`package.cpath`。

> package.path：require 用于搜索 Lua 加载器（.lua 模块）
> 的路径 package.cpath：require 用于搜索 C 加载器（.so/.dll 模块）的路径

您可以检查当前路径是什么：

```
print(package.path..'\n'..package.cpath) 
```

如果您将 LuaSocket 安装到当前包路径中的某个位置，Lua 应该能够找到并加载它。

或者，您可以在调用之前修改包路径`require`。例如，如果您为项目创建一个文件夹并将 LuaSocket 库提取到`libs`项目文件夹中的一个子文件夹中：

```
Project
|
> libs
     |
     > lua
         |
         > socket         
     > socket
     > mime 
```

您可以在套接字库之前设置相对于您的项目的包路径（在 Linux 上替代`require`） ：`/?.dll``/?.so`

```
package.path = package.path..';./libs/lua/?.lua'
package.cpath = package.cpath..';./libs/socket/?.dll;./libs/mime/?.dll'
local socket = require 'socket' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-12-03T16:39:58.060

在你的 linux 系统上使用这个命令：

```
#luarocks install luasocket 
```

使用下一个命令查看路径 CONFIGURATION

```
#luarocks 
```

您需要使用默认的 linux 帐户（请参阅：CONFIGURATION）：

```
$lua 
> socket = require ("socket") 
```

或使用这个：

```
> socket = require 'socket' 
```

# javascript - KineticJS strokeWidth 为 1 会导致模糊的半透明线而不是锐利的 1 像素线

> ID：10356710
> 
> 赞同：5
> 
> 时间：2012-04-27T19:28:58.783
> 
> 标签：javascript, kineticjs

我浏览了互联网，一无所获，我查看了其他 KineticJS 示例，这些示例在其矩形上使用 1 的 strokeWidth 并且它们似乎都有一条半透明的 2 像素线，而不是一条清晰的 1 像素不透明黑线.

现在，我猜测由于谷歌没有任何解决方案非常简单或不可能，但是..你知道我如何使用 KineticJS 获得一个 px 边框吗？

```
$(window).load(function(){
    var stage = new Kinetic.Stage({container: "kineticdiv", width: 700, height: 400});
    var layer = new Kinetic.Layer();

    var rect = new Kinetic.Rect({
        x: stage.attrs.width/2, y: stage.attrs.height/2,
        width: 100, height: 100,
        fill: "#eee", stroke: "black", strokeWidth: 1
    });

    layer.add(rect);
    stage.add(layer);
}); 
```

![图。1](../Images/d07d6ce3f820578f5fba45124c7304db.png)

有人有什么想法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-27T19:34:28.297

当您从 (x,y1) 到 (x,y2) 画一条线时（比如说；水平线也是如此），您需要担心 x 是否“在像素的中间”。如果线是“像素之间”，那么它将是一个一半，另一个一半。结果会看起来很模糊（基本上是抗锯齿）。

图形系统根据坐标是用于角还是中心而有所不同，但您可以通过一些试验来解决问题 - 您只需在坐标上添加半个像素宽度并重试。

对于 html5 画布 (0,0) 是左上角，所以如果你没有变换我猜左上角像素中心在 (0.5, 0.5)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-01-30T08:19:20.437

另一种方法：如果您使用整数作为坐标和正交 1px 权重线，那么您可以将整个舞台移动 [0.5, 0.5] 并且您不必在每个坐标上添加半个像素，然后您可以使用整数与您的整个舞台一样的坐标将向右移动一半像素，向下移动相同。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-13T22:38:15.503

有一种很酷的方法可以准确地得到你想要的：将两个相似的形状分组。较低级别的像素比顶部的像素大一像素。用您想要的边框颜色填充底部的颜色（在您的情况下：黑色）。对我来说很好，并且具有 CSS 的精度和质量

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-06-13T02:35:21.083

使用 Kinetic 解决此问题的最简单方法是使用偏移属性。因此，与其移动您正在绘制的内容的各个坐标，不如将您的整个线条/形状/组/图层/舞台偏移这么多，理论上可以以最小的麻烦将它放在您想要的位置：

```
var rect = new Kinetic.Rect({
    x: stage.attrs.width/2, y: stage.attrs.height/2,
    width: 100, height: 100,
    fill: "#eee", stroke: "black", strokeWidth: 1,
    offsetX: 0.5,
    offsetY: 0.5
}); 
```

或者，一次获得一大堆东西：

```
var layer = new Kinetic.Layer({
    offsetX: 0.5,
    offsetY: 0.5
}); 
```

也就是说，并非所有物品都能从这个技巧中受益。事实上，有些人变得更加模糊。因此，请确保在最原子级别应用偏移，以避免污染无法从中受益的形状。

# sql - SQL Report Builder 需要永远使用空报告

> ID：10356711
> 
> 赞同：1
> 
> 时间：2012-04-27T19:29:01.447
> 
> 标签：sql, sql-server-2008, reporting-services

我注意到，当我运行一个只包含执行时间字段的报表时，只要我有一个来自 sql 的大型嵌入式数据集，报表就会花费很长时间加载。为什么是这样？该报告甚至没有从数据集中寻找任何数据，那么它在做什么呢？加载时间显然与数据集中的数据量成正比。有没有更好的方法来创建数据集？SQL Report Builder 看起来很不可用，因为我的一些数据集包含数百万条记录。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T22:01:27.753

报告生成涉及三个阶段：

*   数据检索
*   加工
*   渲染

这些阶段按顺序运行，因此在数据检索阶段，Reporting Services 不知道数据将如何在报表中使用，因此它将对报表中的所有数据集执行查询。然后，处理阶段获取数据集查询的结果并将报表结构（例如表和分组）应用于数据。

这就是为什么即使报表只包含执行时间字段，报表也会执行数据集查询的原因，也是确保数据集只返回报表所需数据的重要原因。最大限度地减少数据检索量对于良好的报告性能很重要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T10:02:51.480

您确定您的报告中没有任何 tablix 吗？tablix 有一个 dataset 属性，例如，如果您将该属性设置为 dataset1 运行报表，SSRS 将在 dataset1 上执行查询

# c++ - mkdir Windows 与 Linux

> ID：10356712
> 
> 赞同：16
> 
> 时间：2012-04-27T19:29:03.493
> 
> 标签：c++, windows, linux, mkdir

我在将 Linux 工具移植到 Windows 时遇到问题。我在 Windows 系统上使用 MinGW。我有一个处理所有输入/输出的类，其中是这一行：

```
mkdir(strPath.c_str(), 0777); // works on Linux but not on Windows and when it is changed to
_mkdir(strPath.c_str()); // it works on Windows but not on Linux 
```

任何想法我可以做什么，以便它在两个系统上都可以工作？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-04-27T19:34:24.580

```
#if defined(_WIN32)
_mkdir(strPath.c_str());
#else 
mkdir(strPath.c_str(), 0777); // notice that 777 is different than 0777
#endif 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-27T19:34:33.443

您应该能够使用条件编译来使用适用于您正在编译的操作系统的版本。

另外，您真的确定要将标志设置为 777（如在大范围内，请在此处存放您的病毒）？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T19:35:31.930

您可以使用一些预处理器指令有条件地编译，您可以在此处找到一个非常完整的列表：[C/C++ 编译器预定义宏](https://sourceforge.net/p/predef/wiki/Compilers/)

```
#if defined(_WIN32)
    _mkdir(strPath.c_str());
#elif defined(__linux__)
    mkdir(strPath.c_str(), 0777);
// #else more?
#endif 
```

# android - 自从更新到冰淇淋三明治后，MediaMetadataRetriever 几乎停止工作

> ID：10356713
> 
> 赞同：2
> 
> 时间：2012-04-27T19:29:10.777
> 
> 标签：android, android-4.0-ice-cream-sandwich, multimedia

自从我将 Galaxy S2 升级到 Android 4 后，我的音频播放器应用程序出现了一些奇怪的问题。由于升级后 MediaMetadataRetriever 除了音轨号和嵌入的图片外，没有输出太多信息。没有标题，没有艺术家，几乎什么都没有。

我目前不知所措，因为 Android 4.0.3 模拟器没有同样的问题，问题变得更糟了。

谷歌搜索并没有多大帮助，尽管我很难想象我会是唯一一个遇到这种问题的人。我妻子的 SGS2 显示同样的问题，所以我不认为这是仅限于我的手机的一些奇怪问题。有谁知道这是否可能是仅限于 SGS2 的 ICS 的问题？还有其他人在 ICS 上遇到过 MediaMetadataRetriever 的问题吗？而且，我想最重要的是，有人对此有解决方案吗？

如果您想检查我的应用程序在您的手机上是否存在该问题，您可以在[http://www.sourceforge.net/projects/andrstoryteller获取代码或 APK](http://www.sourceforge.net/projects/andrstoryteller)

任何关于我如何能够追查问题的一般性建议也会有所帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T19:39:14.220

我将在有时间的时候测试您的示例应用程序，但与此同时，您可能还想考虑除 MediaMetadataRetriever 之外的另一种解决方案，因为它限制了您的 API 兼容性并且（显然）并不总是有效。我的项目[ServeStream](http://sourceforge.net/projects/servestream/)使用 Apache Tika 的精简版本来检索元数据。您可能想在自己的项目中考虑这种方法。这是 Tika jar 的 URL 和进行解析的类：

[http://servestream.svn.sourceforge.net/viewvc/servestream/trunk/lib/tika-app-1.0.jar?view=log](http://servestream.svn.sourceforge.net/viewvc/servestream/trunk/lib/tika-app-1.0.jar?view=log) [http://servestream.svn.sourceforge.net/viewvc/servestream/trunk/src /net/sourceforge/servestream/utils/MetadataRetriever.java?revision=1033&view=markup](http://servestream.svn.sourceforge.net/viewvc/servestream/trunk/src/net/sourceforge/servestream/utils/MetadataRetriever.java?revision=1033&view=markup)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-25T10:52:15.590

我在 ICS 上注意到了同样的问题（在 Galaxy SII 和 Galaxy Tab II 上都运行 ICS 4.0.3）。这似乎只影响 mp3。

我猜威廉建议的解决方案之一是使用外部库，但我也更喜欢使用 android 提供的而不是外部库。

困扰我的是，除了这个之外，我找不到其他报告相同问题的帖子。虽然，我不认为我做错了：

我尝试了两种解决方案：

```
MediaMetadataRetriever mmdr = new MediaMetadataRetriever();
mmdr.setDataSource(path);
String title = mmdr.extractMetadata(MediaMetadataRetriever.METADATA_KEY_TITLE); 
```

和

```
File file = new File(path);
FileInputStream inputStream;
inputStream = new FileInputStream(file);
mmdr = new MediaMetadataRetriever();
mmdr.setDataSource(inputStream.getFD());
inputStream.close();
String title = mmdr.extractMetadata(MediaMetadataRetriever.METADATA_KEY_TITLE); 
```

MediaMetadataRetriever.extractMetadata(MediaMetadataRetriever.METADATA_KEY_TITLE) 总是返回 null。

路径是正确的，并且 mp3 文件确实有 ID3 标记以及标题和所有内容。

除了使用外部库之外，我想到的一个解决方案是在文件路径上查询 MediaStore：

```
Cursor c = mContext.getContentResolver().query(MediaStore.Audio.Media.EXTERNAL_CONTENT_URI, new String[] {MediaStore.MediaColumns.TITLE},
                            MediaStore.MediaColumns.DATA + "=?",
                            new String[] { path }, null);

String title;
if(c!=null && c.moveToFirst())
 title = c.getString(c.getColumnIndex(MediaStore.MediaColumns.TITLE))
} 
```

如果 MediaScanner 扫描了它（它应该有），信息应该在那里。这也应该适用于 10 之前的 API 级别。

基本上，我在我的项目中所做的如下：如果 SDK 版本 < 10 或文件扩展名是 mp3 并且 SDK 版本是 15，我查询 MediaStore，否则我使用 MediaMetaDataRetriever。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T15:43:58.473

稍微更新一下情况。我刚刚在手机上放了几个 Ogg/Vorbis 文件，它可以正确读取标签。将不得不使用更多文件进行测试，但也许这只停止了对 MP3 文件的工作。如果我能让更多的人使用 ICS 电话来测试这个，那就太酷了。无论如何，我目前正在寻找另一种获取此信息的方法，因此我可能不会再使用 MediaMetadataRetriever 了。

# c# - Word 模板 - 部分 - 将这些部分带入 WinForms 应用程序

> ID：10356715
> 
> 赞同：0
> 
> 时间：2012-04-27T19:29:15.303
> 
> 标签：c#, ms-word

我对 Word 模板并不十分熟悉，但我想知道是否有一种方法可以从 Word 模板中命名您的部分...

例如：

*   A节
*   B节
*   C节
*   D节
*   E节

在这些部分中的每个部分中都会有文本。

在 Win Form 应用程序中，我想在控件中显示这些部分名称，用户可以在其中选择一个或多个这些部分，然后自动创建一个新的 Word 文档。

这可能吗？如果是这样，我要研究什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T19:38:44.173

您可以获得 Word 模板中的部分列表，
但这些部分没有名称。
您只能使用索引从他们的集合中提取它们。

假设您有一个名为 wDoc 的活动文档，您可以以这种方式循环每个部分

```
using Microsoft.Office.Interop.Word;
...

foreach (Section section in wDoc.Sections) 
{
  ....
} 
```

看[MSDN上的Section Interface](http://msdn.microsoft.com/en-us/library/ms264604.aspx)

# grails - Grails Log4J File appender不写入文件

> ID：10356721
> 
> 赞同：3
> 
> 时间：2012-04-27T19:29:52.370
> 
> 标签：grails, log4j

我似乎无法让 log4j 文件附加程序写入 grails 应用程序中的文件。该文件正在我期望的目录中创建，在调试模式下运行时，我可以看到正在调用 log 方法，但文件中仍然没有结果。附加代码和日志代码如下。我已经使我的 log4j 配置尽可能简单，以根除任何复杂的问题。想法？

```
abstract class BaseJob {

abstract def executeTask()
def execute() {
    beginTask()
    executeTask()
    endTask()
}
def beginTask()
{
    log.error("Started task: " + this.class)
}
def endTask()
{
    log.error("Finished task: " + this.class)
}
}

log4j = {
// Example of changing the log pattern for the default console
// appender:
//
appenders {
    //console name:'stdout', layout:pattern(conversionPattern: '%c{2} %m%n')
    file name:'myLogger', file:"all.log", immediateFlush:'true', threshold:org.apache.log4j.Level.DEBUG

}

debug 'grails.app' 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-15T08:26:22.217

根据文档[http://grails.org/doc/2.1.0/guide/conf.html#logging](http://grails.org/doc/2.1.0/guide/conf.html#logging) 你必须使用：

```
debug myLogger: 'grails.app' 
```

或用于多个记录器

```
debug myLogger: ['grails.app', 'org.apache'] 
```

适用于 grails 2.0.4

# xml - XSD 对特定类型的同级元素属性的唯一约束

> ID：10356723
> 
> 赞同：11
> 
> 时间：2012-04-27T19:29:57.047
> 
> 标签：xml, xpath, xsd, unique

我有一个结构为 Q&A 的 XML 文档，其格式如下（为清晰起见进行了编辑）：

```
<question>
    <answer id="1">
        <question>
            <answer id="1"/>
            <answer id="2"/>
            <answer id="3"/>
        </question>
    </answer>
    <answer id="2">
        <question>
            <answer id="1"/>
            <answer id="2"/>
        </question>
    </answer>
</question> 
```

我的 XSD 看起来像这样：

```
<xs:element name="question">
     <xs:complexType>
        <xs:sequence>
            <xs:element name="answer" type="answerType" minOccurs="2" maxOccurs="unbounded">
            </xs:element>
        </xs:sequence>
    </xs:complexType>
    <xs:unique name="AnswerIdUnique">
        <xs:selector xpath="./*" />
        <xs:field xpath="@id" />
    </xs:unique>
</xs:element>

<xs:complexType name="answerType">
    <xs:sequence>
        <xs:element ref="question" minOccurs="0" maxOccurs="1" />
    </xs:sequence>
    <xs:attribute name="id" type="xs:token" use="required" />
</xs:complexType> 
```

当然，它比您在上面看到的要多，但这说明了我的问题。我需要元素的`id`属性`answer`在兄弟姐妹中是唯一的。上面定义的 XSD 强制`id`同级元素之间属性的唯一性，但它不区分元素类型。我在唯一约束中尝试了各种选择器和字段，但没有找到有效的组合。有什么建议么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-27T21:28:57.997

只需将选择器更改为`<xs:selector xpath="answer"/>`即可。一般来说`.//*`，如果只是出于性能原因，最好避免使用 XPath。

这是您提供的 XML 示例的 XML 架构，我认为它正在按照您想要的方式工作：

```
<?xml version="1.0" encoding="utf-8" ?>
<xs:schema elementFormDefault="qualified" xmlns:xs="http://www.w3.org/2001/XMLSchema">
    <xs:element name="question" type="questionType">
        <xs:unique name="AnswerIdUnique">
            <xs:selector xpath="answer"/>
            <xs:field xpath="@id"/>
        </xs:unique>
    </xs:element>
    <xs:complexType name="questionType">
        <xs:sequence>
            <xs:element name="answer" type="answerType" minOccurs="2" maxOccurs="unbounded"/>
        </xs:sequence>
    </xs:complexType>
    <xs:complexType name="answerType">
        <xs:sequence>
            <xs:element ref="question" minOccurs="0" maxOccurs="1"/>
        </xs:sequence>
        <xs:attribute name="id" type="xs:token" use="required"/>
    </xs:complexType>
</xs:schema> 
```

您发布的 XML 与上述验证良好；复制任何同级答案的 id 都会产生验证错误。例如，以下 XML：

```
<question> 
    <answer id="1"> 
        <question> 
            <answer id="1"/> 
            <answer id="2"/> 
            <answer id="1"/> 
        </question> 
    </answer> 
    <answer id="1"> 
        <question> 
            <answer id="1"/> 
            <answer id="2"/> 
        </question> 
    </answer> 
</question> 
```

验证后（在 QTAssistant 中，应该类似于 Visual Studio 中的消息，因为它基于相同的技术），这些是错误：

```
Error occurred while loading [], line 6 position 5
There is a duplicate key sequence '1' for the 'AnswerIdUnique' key or unique identity constraint.
Error occurred while loading [], line 9 position 3
There is a duplicate key sequence '1' for the 'AnswerIdUnique' key or unique identity constraint.
Document1.xml is invalid. 
```

下面是 Visual Studio 2010 的屏幕截图，显示了针对我发布的 XSD 的上述 XML 验证；虽然这些问题被无意中报告为警告，但它们仍然被报告。

![VS2010 显示唯一约束错误](../Images/e648553c1bad149f1f973ec907aed4bc.png)

我随机选择了一个在线验证器 ( [http://xsdvalidation.utilities-online.info/](http://xsdvalidation.utilities-online.info/) ) 并验证了我发布的相同 XML 和 XSD；错误报告为：

`org.xml.sax.SAXParseException: Duplicate unique value [1] declared for identity constraint of element "question".org.xml.sax.SAXParseException: Duplicate unique value [1] declared for identity constraint of element "question".`

您必须注意的一件事是，当您有 XSD 的目标命名空间时；在这种情况下，需要为所有涉及的命名空间定义一个别名，并在您的选择器中使用它们。

更新：以及带有命名空间的 XSD：

```
<?xml version="1.0" encoding="utf-8"?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:tns="http://localhost" xmlns="http://localhost" targetNamespace="http://localhost" elementFormDefault="qualified" attributeFormDefault="unqualified">
    <xs:element name="question" type="questionType">
        <xs:unique name="AnswerIdUnique">
            <xs:selector xpath="tns:answer"/>
            <xs:field xpath="@id"/>
        </xs:unique>
    </xs:element>
    <xs:complexType name="questionType">
        <xs:sequence>
            <xs:element name="answer" type="answerType" minOccurs="2" maxOccurs="unbounded"/>
        </xs:sequence>
    </xs:complexType>
    <xs:complexType name="answerType">
        <xs:sequence>
            <xs:element ref="question" minOccurs="0" maxOccurs="1"/>
        </xs:sequence>
        <xs:attribute name="id" type="xs:token" use="required"/>
    </xs:complexType>
</xs:schema> 
```

请注意前缀的引入`tns`和在选择器中的使用。

# java - JDesktopPane 在 linux 上的窗口底部有一个工具栏

> ID：10356725
> 
> 赞同：0
> 
> 时间：2012-04-27T19:29:59.887
> 
> 标签：java, swing, jinternalframe, jdesktoppane

我有一个添加 JInternalFrames 的 JDesktopPane。在 Linux (ubuntu) 和 Mac os 上，所有显示的内部框架都出现在左下角的任务栏/工具栏中，每个内部框架的名称作为标签。此工具栏未显示在 Windows 上，这是我所期望的行为。

![在此处输入图像描述](../Images/459aa10803913205e808b6b06ea1e19d.png)

有人知道如何停用此工具栏吗？

我这样设置内部框架：

```
frame.setResizable(false);
frame.setClosable(false);
frame.setMaximizable(false);
frame.setIconifiable(false); 
```

并将它们添加到`JLayeredPane.PALETTE_LAYER`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T16:40:38.397

尝试这个：

```
UIManager.put("DesktopPaneUI","javax.swing.plaf.basic.BasicDesktopPaneUI"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T07:07:16.737

`removeAll()`创建 JDesktopPanes 后试一试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-28T06:15:19.440

尝试添加：

```
frame.setIcon ( false ); 
```

这将强制显示框架。

在 Ubuntu/Mac 上，这些框架可能会默认图标化，这就是它们出现在 JDesktopPane 角落的原因。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-12T12:56:05.667

这在我的情况下有效：

```
UIManager.put("InternalFrame.useTaskBar", Boolean.FALSE); 
```

它应该比替换整个 UI 类“侵入性更小”，如果您更改为不显示工具栏的外观，则应该简单地忽略该属性

# python - Python：非常简单的 strptime() 调用会引发错误

> ID：10356727
> 
> 赞同：2
> 
> 时间：2012-04-27T19:30:05.410
> 
> 标签：python, macos, datetime, python-2.7

一些非常简单的代码会导致一个神秘的错误，而谷歌什么也没给我……

代码：

```
import sys
import datetime

for line in sys.stdin:
    date = datetime.datetime.strptime(line, '%Y%m%dT%H%M%S')
    print date 
```

标准输入的前几行输入：

```
20101119T141500
20101119T164500
20110310T081500
20110310T113000
20100218T113000
... 
```

错误：

```
Traceback (most recent call last):
  File "time.py", line 5, in <module>
    date = datetime.datetime.strptime(line, '%Y%m%dT%H%M%S')
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/_strptime.py", line 13, in <module>
    import time
  File "<path>", line 5, in <module>
    date = datetime.datetime.strptime(line, '%Y%m%dT%H%M%S')
AttributeError: _strptime 
```

平台：Mac OS X 10.7.3，Python 2.7.1

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-27T19:36:01.390

您将脚本称为“time.py”，从而隐藏了`time`模块。不要那样做。

# android - android.widget.TableRow 不能转换为 android.widget.TextView

> ID：10356729
> 
> 赞同：0
> 
> 时间：2012-04-27T19:30:13.427
> 
> 标签：android, casting

在我的代码中，我收到以下错误：

`android.widget.TableRow cannot be cast to android.widget.TextView`

错误日志跳转到代码中的以下行：

```
mDateDisplay = (TextView) findViewById(R.id.datumGesetztText); 
```

这是什么意思？！

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T19:44:08.337

从错误消息中可以明显看出，“R.id.datumGesetztText”是表格行而不是 textView。确保 ...view.xml 为该字段定义了正确的类型。

# image-processing - 哪个小波用于 Jpeg2000 图像压缩？

> ID：10356732
> 
> 赞同：0
> 
> 时间：2012-04-27T19:30:32.590
> 
> 标签：image-processing, image-compression, jpeg2000, wavelet

哪个小波用于 Jpeg2000 图像压缩？

我正在阅读关于小波变换的书，以了解小波如何用于图像压缩，但是书中提到了很多类型的小波，我很困惑哪一种用于 Jpeg2000 压缩？

这些是我在书中找到的类型。

双正交小波、Shannon 或“Sinc”小波、Haar 小波（最短）、Coiflets 小波。

PS：我对图像压缩一无所知，只是从这个项目开始。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T19:37:04.443

根据关于 JPEG 2000 的 Wikipedia 文章，使用了两种不同的 Cohen-Daubechies-Feauveau 小波：用于无损压缩的 CDF 5/3 小波和用于有损压缩的 CDF 9/7 小波。（这两种都是双正交的。）见这里：[http](http://en.wikipedia.org/wiki/Cohen-Daubechies-Feauveau_wavelet) ://en.wikipedia.org/wiki/Cohen-Daubechies-Feauveau_wavelet 。

# android - getCheckedRadioButtonId() 返回无用的 int？

> ID：10356733
> 
> 赞同：14
> 
> 时间：2012-04-27T19:30:33.817
> 
> 标签：android, android-layout, onclick

我有一个按钮的 onClickListener 需要检测用户单击按钮时选择了哪个单选按钮。目前，您在 onClickListener 中看到的 Log.v 没有返回无用的信息：

这是点击提交三次，每次选择不同的收音机：

> 04-27 19:24:42.417: V/提交(1564): 1094168584
> 
> 04-27 19:24:45.048: V/提交(1564): 1094167752
> 
> 04-27 19:24:47.348: V/提交(1564): 1094211304

所以，我需要知道实际选择了哪个单选按钮 - 有没有办法获取单选按钮的对象？我希望能够从 XML 中获取它的 id# 以及它的当前文本。

以下是相关代码：

```
public void buildQuestions(JSONObject question) throws JSONException {

    radioGroup = (RadioGroup) questionBox.findViewById(R.id.responseRadioGroup);

    Button chartsButton = (Button) questionBox.findViewById(R.id.chartsButton);
    chartsButton.setTag(question);
    Button submitButton = (Button) questionBox.findViewById(R.id.submitButton);

    chartsButton.setOnClickListener(chartsListener);
    submitButton.setOnClickListener(submitListener);

    TagObj tagObj = new TagObj(question, radioGroup);
    submitButton.setTag(tagObj);

}

public OnClickListener submitListener = new OnClickListener() {
    public void onClick(View v) {
        userFunctions = new UserFunctions();
        if (userFunctions.isUserLoggedIn(activity)) {
            TagObj tagObject = (TagObj) v.getTag();
            RadioGroup radioGroup = tagObject.getRadioGroup();
            JSONObject question = tagObject.getQuestion();

            Log.v("submit", Integer.toString(radioGroup.getCheckedRadioButtonId()));
            SubmitTask submitTask = new SubmitTask((Polling) activity, question);
            submitTask.execute();

        }
    }   
}; 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-04-27T19:37:56.083

`getCheckedRadioButtonId()`返回在`id`中检查的`RadioButton`（或者`-1`如果没有`RadioButtons`检查）`Radiogroup`。如果您在布局中为 id 设置不同的 id，`RadioButons`那么您将尝试将这些 id 与方法的返回相匹配，以查看检查了哪一个：

```
//field in the class
private static final int RB1_ID = 1000;//first radio button id
private static final int RB2_ID = 1001;//second radio button id
private static final int RB3_ID = 1002;//third radio button id

//create the RadioButton
RadioButton rb1 = new RadioButton(this);
//set an id
rb1.setId(RB1_ID);

    int btn = radioGroup.getCheckedRadioButtonId();
    switch (btn) {
    case RB1_ID:
        // the first RadioButton is checked.
    break;
        //other checks for the other RadioButtons ids from the RadioGroup
    case -1:
        // no RadioButton is checked inthe Radiogroup
    break;
    } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-27T19:38:25.943

存储检查的 ID，然后使用函数 radioButton.getID() 使用 switch 语句或 if-else 链将其与每个按钮进行比较

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-03-06T18:49:57.793

我在`RadioGroup`xml中设置初始选中的单选按钮

```
 <RadioGroup
          android:id="@+id/rgCustomized"
          android:layout_width="wrap_content"
          android:layout_height="wrap_content"
          android:layout_marginStart="32dp"
          android:layout_marginTop="8dp"
          android:checkedButton="@+id/rbNotCustomized"
          android:orientation="horizontal">

          <RadioButton
              android:id="@+id/rbCustomized"
              android:layout_width="wrap_content"
              android:layout_height="wrap_content"
              android:layout_marginEnd="50dp"
              android:text="@string/yes" />

          <RadioButton
              android:id="@+id/rbNotCustomized"
              android:layout_width="wrap_content"
              android:layout_height="wrap_content"
              android:text="@string/no" />

 </RadioGroup> 
```

我确定像这样选择了哪个radioButton

```
rgCustomized.checkedRadioButtonId==rbCustomized.id 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-10-30T04:38:27.117

`radioGroup.getCheckedRadioButtonId()`我认为如果要将其存储到数据库中或使用它，则依赖于返回的内容不是一个好习惯。

**因为：**

*   `getCheckedRadioButtonId()`每个值都会不断变化`RadioButton`，如果有两个相似的值（同一层次结构中的两个视图），Android 将选择第一个。除非您使用方法提供了唯一的 Ids`generateViewId()`并将其设置为使用`setId()`.
*   `getCheckedRadioButtonId()`将返回未知值。

**所以**

打开`radioGroup.getCheckedRadioButtonId()`并为每个选择实现自定义值，然后使用该自定义值，而不是 View Id。

## 使用来自选定单选按钮的值的示例：

```
int selected = -1;
switch (radioGroup.getCheckedRadioButtonId()) {
    case R.id.one_radioButton:
        selected = 0;
        break;
    case R.id.two_radioButton:
        selected = 1;
        break;
    case R.id.three_radioButton:
        selected = 2;
        break;
}
    // return a custom value you specific
    Log.d(TAG, "selectedBox: " + selectedBox);   

    // return a random unknown number value
    Log.d(TAG, "radioGroup.getCheckedRadioButtonId(): " + radioGroup.getCheckedRadioButtonId()); 
```

## 将选定的 RadioButton 填充到 UI 的示例：

```
 switch (selected) {
        case 0:
            oneRadioButton.setChecked(true);
            break;
        case 1:
            twoRadioButton.setChecked(true);
            break;
        case 2:
            threeRadioButton.setChecked(true);
            break;
    } 
```

# watir - 在 Watir 中，如何从部分文本中获取全文？

> ID：10356734
> 
> 赞同：4
> 
> 时间：2012-04-27T19:30:37.440
> 
> 标签：watir, watir-webdriver

我有一部分 HTML 看起来类似于：

```
<table><tbody><tr>
<td><div> Text Goes Here </div></td>
<td> ... rest of table 
```

没有 ID、没有标题、没有任何类型的描述符来轻松识别包含文本的 div。

当页面上发生错误时，错误会被插入到“Text Goes Here”所在的位置（除非发生错误，否则不存在任何文本）。每个错误都包含“有效”一词。示例：“表单必须包含有效名称”或“选择的日期范围无效”

我目前的 Watir 代码如下所示：

```
if browser.frame(:index => 0).text.includes? "valid"
  msg = # need to get full text of message
  return msg
else
  return true
end 
```

有没有办法在这种情况下获得全文？基本上：返回包含文本“有效”的元素的全文？

使用：Watir 2.0.4，Webdriver 0.4.1

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T07:12:01.727

鉴于您提供的结构，由于 div 经常使用，我倾向于使用正则表达式查找表格单元格，正如 Dave 在他的回答中所示。除非您有很多嵌套表，否则更有可能只返回您想要的文本。

此外，如果“有效”可能出现在其他地方，那么您可能需要提供稍大的文本样本来查找

. 浏览器(:cell => /valid/).text

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T20:33:58.080

尝试这个

```
return browser.div(:text => /valid/).text 
```

或者

```
return browser.table.div(:text => /valid/).text 
```

如果没有找到有效的，它应该返回零。

# c++ - 当前向声明不够时，如何避免“'标识符'使用未定义的类/结构/联合'名称'”错误？

> ID：10356737
> 
> 赞同：8
> 
> 时间：2012-04-27T17:44:12.723
> 
> 标签：c++

根据[http://msdn.microsoft.com/en-us/library/9ekhdcxs(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/9ekhdcxs(v=vs.80).aspx)，

> 如果您尝试在其前向声明仅在范围内的类型的堆栈上声明对象，也会发生 C2079。
> 
> ```
> class A;
> 
> class B {
>     A a;   // C2079
> };
> 
> class A {}; 
> ```
> 
> 可能的解决方案：
> 
> ```
> class A;
> 
> class C {};
> 
> class B {
>    A * a;
>    C c;
> };
> class A {}; 
> ```

我的问题是当我遇到以下情况时如何消除此错误：

```
class A;  // Object

class B   // Container
{
   public:
     typedef int SomeTypedef;
   private:
     A a;   // C2079
};

class A {
   void Foo(B::SomeTypedef);
}; 
```

我不能在声明B之前声明A，因为A需要使用B的typedef，并且因为这个错误我不能在A之前声明B。

一种可能的解决方案是使用指向 A 的指针而不是堆栈变量，但我不想要指针（在这种情况下）。

另一种解决方案是不使用 typedef，或者不将其放在类 B 中。但是如果它属于 B 并且我不想污染我的项目的命名空间，因为 B::SomeTypedef 是比 SomeTypedef 更合适的名称怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T17:56:55.733

您的设计是有问题的，尽管嵌套类可能是您想要的：

```
class B {
   public:
     typedef int SomeTypedef;
   private:
     class A {
       void Foo(SomeTypedef);
     };
     A a;
}; 
```

如果没有，这也可以通过 CRTP 代码中常见的另一个类来解决。

```
template<typename T>
struct foo;

class A;
class B;

template<>
struct foo<B> {
  typedef int SomeTypedef;
};

class A {
   void Foo(foo<B>::SomeTypedef);
};

class B : foo<B> {
   private:
     A a;
}; 
```

或者您可以使用另一个命名空间。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-27T18:41:49.133

另一种方法是使用中间类，加上指针，它更长，但是，它可以工作：

这是头文件，（是的，我知道，“*.hpp”扩展名不是标准的）：

* * *

## ForwardClassExample.hpp

```
class ForwardClass {
public:
  virtual void DoSomething();
};

class ContainerClass {
   ForwardClass* Item;

   /* constructor */ ContainerClass();
   /* destructor */ ~ContainerClass();
};

class RealClass: ForwardClass {
  /* override */ virtual void DoSomething();
}; 
```

* * *

这是正文文件：

* * *

## ForwardClassExample.cpp

```
/* constructor */ ContainerClass::ContainerClass()
{
  // create reference to forwaded class item
  this.Item = new RealClass();
}

/* destructor */ ContainerClass::~ContainerClass()
{
  // deletereference to forwaded class item
  free this.Item();
}

void ForwardClass::DoSomething()
{
  // ...
}

void RealClass::DoSomething()
{
  // ...
} 
```

* * *

笔记：

我建议习惯于将指针应用于变量，而不是直接字段，它可能在开始时看起来更困难，但最终允许做更多的事情。

它还使您准备好使用“引用”，以防有一天您必须使用其他编程语言。

干杯。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T21:07:40.400

在您的设计需要的地方引入 typedef，然后将其导出到对您的用户最有意义的地方。

```
class A
{
public:
   typedef int SomeTypedef;
   void Foo(SomeTypedef);
};

class B
{
public:
   typedef A::SomeTypedef SomeTypedef;
private:
   A a;
}; 
```

# php - 如果有重定向，Google bot 是否会抓取整个网站

> ID：10356749
> 
> 赞同：0
> 
> 时间：2012-04-27T19:31:36.273
> 
> 标签：php, seo

我有一个网站在三页浏览后将用户重定向到登录页面。google bot 是否能够查看我的所有页面，或者它也会被重定向。如果是这样，我该如何解决这个问题。

我在关于 googlebot 的问题中找到了这个答案，

```
if((!$user->uid) || (!strpos($_SERVER['HTTP_USER_AGENT'],"Googlebot"))  ||      (!strpos($_SERVER['HTTP_USER_AGENT'],"MSNBOT")) ){
//  redirect
else{
// don't redirect
} 
```

这行得通吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T19:34:07.943

1.  不要为搜索引擎提供不同的内容，然后再为您的用户提供服务。这被称为伪装，是被禁止的好方法。

2.  您应该使用“[免费首页](https://webmasters.stackexchange.com/questions/3863/how-does-experts-exchange-get-away-with-tricking-google-users)”。这是 Experts Exchange 等网站用来让 Google 抓取其受限内容的工具。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T19:40:14.757

Google Bot 被重定向，它会将重定向页面中的内容提取到其数据库中，就像原始 URL 一样。

# java - 从 Emma 代码覆盖率报告中过滤 junit 测试类

> ID：10356750
> 
> 赞同：2
> 
> 时间：2012-04-27T19:31:37.390
> 
> 标签：java, ant, code-coverage, emma

我有一个项目，我有 emma 代码覆盖脚本（使用 ant）正确构建和生成测试。

我有两个包 com.myproject.abc test.com.myproject.abc

所有的 junit 测试都在 test.com.mywebsite.abc 包中。我的目标是不在报告中包含 test.com.myproject.abc 包（coverage.xml）。我已阅读有关覆盖过滤器的 emma 文档并查看了其他几个示例，但如果不将 junit 测试包含在仪器中，则无法使其正常工作。

如果我在检测目标中包含过滤器......它不会检测用于 junit 测试的 junit 类。结果是 classNotFoundException。

这是我的代码。

```
<target name="emma-instrument" depends="clean" description="instruments the code">   
        <emma enabled="true">  
            <instr instrpath="${classes}" destdir="${emma.instr.dir}"  
                metadatafile="${emma.coverage.dir}/coverage.emma" merge="true" >
                <filter excludes="test.com.myproject.abc"/> 
            </instr>
         </emma>

    </target> 
```

当检测发生时，它将所有检测类移动到 emma/instrumentation - 它包含在类路径中。

```
<target name="test" depends="test_preconditions" description="run junit tests">  
        <junit fork="yes" printsummary="yes" haltonfailure="yes">  
            <classpath refid="test.classpath" />  
            <formatter type="plain" usefile="false" />  
            <batchtest>  
                <fileset dir="${classes}">
                    <include name="**/*Test*"/>

                </fileset>
            </batchtest>  
            <jvmarg value="-Demma.coverage.out.file=${emma.coverage.dir}/coverage.emma" />  
            <jvmarg value="-Demma.coverage.out.merge=true" />  
            <jvmarg value="-XX:-UseSplitVerifier"/>
        </junit>  
    </target> 
```

所以重复一遍 - 是否可以从 Emma Coverage 报告中排除 JUNIT 测试？我需要改变什么？提前致谢。

我正在使用 emma 2.1（代码覆盖率）、java 和 ant。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T18:34:39.817

您可以像这样使用[JaCoCo](http://www.eclemma.org/jacoco/)库：

```
<target name="test" depends="test_preconditions" description="run junit tests">  
    <mkdir dir="${test.data.dir}" />

    <!-- Run all tests -->
    <jacoco:coverage destfile="${test.data.dir}/jacoco.exec">
        <junit fork="yes" printsummary="yes" haltonfailure="yes">  
            <classpath refid="test.classpath" />  
            <formatter type="plain" usefile="false" />  
            <batchtest>  
                <fileset dir="${classes}">
                    <include name="**/*Test*"/>

                </fileset>
            </batchtest>  
        </junit>  
    </jacoco:coverage>

    <!-- Generate Code Coverage report
        See: http://www.eclemma.org/jacoco/trunk/doc/ant.html -->
    <jacoco:report>
        <executiondata>
            <file file="${test.data.dir}/jacoco.exec" />
        </executiondata>

        <structure name="AntTestReporting">
            <classfiles>
                <fileset dir="${build.dir}">
                    <include name="**/*.class" />
                    <!-- Exclude classes necessary for testing only from the code coverage report-->
                    <exclude name="**/*Test*.class" />
                    <!-- Exclude inner classes -->
                    <exclude name="**/*$*.class" />
                </fileset>
            </classfiles>
        </structure>

        <html destdir="${coverage.reports.dir}" />
    </jacoco:report>
</target> 
```

[你可以在这里](http://itaffinity.wordpress.com/2012/06/05/generating-and-customizing-junit-and-code-coverage-reports-with-ant/)找到更多信息。

# ios - 从 TableViewCell 上的 UITextField 获取文本

> ID：10356758
> 
> 赞同：1
> 
> 时间：2012-04-27T19:32:35.423
> 
> 标签：ios, xcode, uitextfield, uitableview

我有一个 UITableViewController 原型单元格包含 UITextFields。为了配置这些自定义单元格，我创建了一个 UITableViewCell 子类。我已通过 outlet 将 textField 连接到单元格子类`(nonatomic, weak)`。

在这个子类上，我创建了一个协议，UITableViewController 是它的委托，这样每当这些文本字段发生变化时，TableViewController 就会知道它。基本上我希望这可以保存 NSUserDefaults 上的值

此外，为了从这些文本字段中动态获取值，我可以这样做：

```
((TextFieldCell*)[self.tableView cellForRowAtIndexPath:[NSIndexPath indexPathForRow:2 inSection:0]]).textField.text 
```

大多数时候它工作正常。但是，当 textField 因为滚动而位于视图之外时，我从 textField.text 获得的值是（null）。一旦它再次出现在视野中，一切都会恢复正常。

我试图将出口从弱改为强，但无济于事。

我想我可以在类上定义一些私有的 NSString，并在调用委托协议时填写它们。问题是我想让我的代码尽可能通用，尽可能降低对私有变量的需求，主要是为了简化单元生成代码。

当它们在视图之外时，还有其他方法可以获取文本字段的值吗？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T19:50:37.920

但是你知道 UITableView 只保留可见矩形的单元格吗？当一个单元格离开屏幕，而另一个单元格需要一个新单元格来移动到可见区域时，旧单元格将被重新用于新内容。

因此，表格视图的每一行都没有一个单元格。如果您的表格包含大量数据，则行数远多于单元格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T19:55:13.607

正如 Thyraz 所说，UITableView 只保留可见矩形的单元格——以及允许滚动的合理缓冲区。这就是“重用标识符”如此重要的原因，它们指示哪些单元格可用于哪些表格（当您需要担心多个表格时至关重要）。不幸的是，这本身并不能回答您的问题。

存储这些 textView 内容的责任不在 UITableView 的肩上。通过数据源委托协议提供该数据是*您的*工作，因此您应该查询数据源以获取该信息。

编辑：这意味着是的，您应该将此数据存储在其他地方，通常以包含表视图的视图控制器类的属性的形式。我建议为此目的使用 NSArray ，但你也可以通过 dicts 甚至在*最后*的手段来做到这一点（这在理论上你可以做到这一点，但这是一个非常糟糕的想法） ，一系列属性。就个人而言，我几乎总是使用 NSArrays，因为它们的结构适合问题，但理论上你可以用其他方式来做。（我只使用过一次基于 dict 的结构，那是我的数据以递归结构嵌套在自身内部的情况）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T20:02:56.270

UITableViewController 一旦离开屏幕就不会保留单元格。您可以使用以下模式来获取以前使用的模式作为内存管理优化，但是您必须假设单元格每次出现在屏幕上时都需要重置它们的值（即使出队），因为不能保证什么值将是。

```
-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier1 = @"Cell1";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier2];
    if( cell == nil ) {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleValue1 reuseIdentifier:CellIdentifier1] autorelease];
        cell2.accessoryType = UITableViewCellAccessoryDisclosureIndicator;
        cell2.editingAccessoryType = UITableViewCellAccessoryNone;
    }   
    switch( indexPath.section ) {
        case first_Section:
            if( row == 0 ) {
                cell1.textLabel.text = @"Some Text";
                cell1.accessoryView = [self myCustomViewControl];
                cell = cell1;
            }
            ... etc
    }
} 
```

# ios - 追踪内存不足警告的根本原因

> ID：10356761
> 
> 赞同：3
> 
> 时间：2012-04-27T19:32:56.097
> 
> 标签：ios, memory-leaks, analytics, instruments

在 Instruments 中运行我的应用程序时，我看到很多内存不足警告。总内存分配不超过 5.02 MB。可能是什么原因？我也检查了泄漏仪器。在那里我看到了泄漏，但由于一些框架类。没有一个是因为我的项目课程。如何追根溯源？

请参阅泄漏和分配工具的附加快照：

![在此处输入图像描述](../Images/aa6d9236f375e7fca1c38b98025b5f3f.png)

![在此处输入图像描述](../Images/4b9e7bfd9aa029ff7bbc46c624449f57.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T19:45:35.070

当后台应用程序（邮件、消息、音乐播放器等）需要足够多的内存时，某些 iOS 设备上的某些操作系统版本会向前台应用程序发送内存警告。这与您的应用程序使用的内存量无关。如果您的应用程序没有使用大量内存（远低于 10MB），它通常可以忽略这些内存警告，因为操作系统通常会杀死使用比您的应用程序而不是您的应用程序更多内存的后台应用程序（但不能保证，无论您的应用程序是否释放内存！）。

如果您想在测试时避免所有这些内存警告，请将设备置于飞行模式并在运行应用程序之前强制退出多任务栏中的所有后台感知应用程序。

# jquery - 过滤自定义选择器是否大于 jQuery 中的数字

> ID：10356765
> 
> 赞同：2
> 
> 时间：2012-04-27T19:33:20.087
> 
> 标签：jquery

快给你一个。我查看了 jQuery.com 中的选择器，但找不到通过大于数字的选择器进行过滤的方法？我想做这个：

```
$("[level>'4']").hide(); 
```

我的 html 看起来像这样：

```
<div id="1" level="4">Test</div> 
```

如何使用该语法或类似语法隐藏所有大于 4 的 div？4

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-27T19:35:26.493

试试下面，

```
$("[level]").filter(function () {
   return parseInt($(this).attr('level'), 10) > 4;
}).hide(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-27T19:36:36.970

```
$('div').filter(function(){
  return parseInt($(this).attr('level')) > 4);
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T07:10:14.397

我也需要这个特殊的功能，检查是在选择器中完成的，而不是作为另一个嵌入式函数。也许我做的比我需要的要多，但这意味着我现在可以使用 Selector 使用 Isotope 过滤基于日期的内容，而不必在每个过滤器调用中编写内容。

我写的东西使用了 jQuery 的伪选择器。

```
// Hides elements with the attribute "index" that is greater than 4
$(':attrGT("index",4)').hide();

// Filter elements using Isotope with the attribute "data-starttime" that is less than or equal to 1234567890
$container.isotope({
    filter: ':attrLTEq("data-starttime",1234567890)'
}); 
```

这是版本 1 的初始代码（我根本没有进行任何广泛的测试，但到目前为止它对我有用）：

```
(function ($) {
    // Single function to do all the heavy lifting
    function attrGTLTSelector(mode, obj, meta) {
        var args,
            objAttr,
            checkAttr,
            output = false;

        if (typeof meta === 'object') {
            args = meta;
        } else {
            if (meta.match(',')) {
                args = meta.split(/["'\s]*,["'\s]*/);
            } else {
                args = [meta];
            }
        }

        objAttr = parseInt($(obj).attr(args[0]), 10);
        checkAttr = parseInt(args[1], 10);

        switch (mode) {
        case 'lt':
            if (objAttr<checkAttr) output = true;
            break;
        case 'lte':
            if (objAttr<=checkAttr) output = true;
            break;
        case 'gt':
            if (objAttr>checkAttr) output = true;
            break;
        case 'gte':
            if (objAttr>=checkAttr) output = true;
            break;
        }

        if (window.console) if (console.log) console.log('attrGTLTSelector', objAttr, mode, checkAttr, output);

        return output;
    }

    // Add custom pseudo selectors to jQuery
    $.expr[':'].attrLT = function(obj, index, meta, stack){
        return attrGTLTSelector('lt', obj, meta[3]);
    };
    $.expr[':'].attrGT = function(obj, index, meta, stack){
        return attrGTLTSelector('gt', obj, meta[3]);
    };
    $.expr[':'].attrLTEq = function(obj, index, meta, stack){
        return attrGTLTSelector('lte', obj, meta[3]);
    };
    $.expr[':'].attrGTEq = function(obj, index, meta, stack){
        return attrGTLTSelector('gte', obj, meta[3]);
    };
}(jQuery)); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-27T19:36:40.313

只需这样做：

```
$('[level]')​.each(function(){
var $this=$(ths);
var level = parseInt($this.attr('level'), 10);
if (level>4) $this.hide();
});​ 
```

# html - 水平菜单中的分割线

> ID：10356769
> 
> 赞同：2
> 
> 时间：2012-04-27T19:33:46.127
> 
> 标签：html, css, menu

我有这个菜单-

```
<div ><ul id="menu">
        <li class="one"><a href="http://www.domain.com">Dashboard</a></li>
        <li class="two"><a href="<?php echo bp_loggedin_user_domain() ?>">Profile</a></li>
        <li class="three"><a href="<?php echo bp_loggedin_user_domain() ?>messages">Messages</a></li>
        <li class="four"><a href="<?php echo bp_loggedin_user_domain() ?>friends">Friends</a></li>
        <li><?php bp_adminbar_notifications_menu() ?>
        <ul>
        <li> </li>
        </ul>
        </li>
    </ul> 
```

无论如何我可以在项目之间添加垂直分界线吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T19:35:53.960

您可以使用`:after`来放置它们：

```
#menu > li:after {
  content: '|' /* or url('divider.png'); */
}
#menu > li:last-child:after {
  content: none;
} 
```

我怀疑这可能是你所追求的。但请注意，您的浏览器支持将在一定程度上仅限于更现代的浏览器。幸运的是，降级非常优雅，不会在旧浏览器上中断。

演示： http: [//jsbin.com/avarih/edit#html,live](http://jsbin.com/awarih/edit#html,live)
演示（带图片）：http: [//jsbin.com/avarih/2/edit#html,live](http://jsbin.com/awarih/2/edit#html,live)

# java - Regular expression to extract date format e.g Wednesday, April 25 2012

> ID：10356772
> 
> 赞同：-1
> 
> 时间：2012-04-27T19:33:54.130
> 
> 标签：java, regex

Could you please help with a RE that will extract Date in HTML stream. e.g needed date is `Wednesday, April 25 2012`

Thanks

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T19:40:35.640

```
(Sunday|Monday|Tuesday|Wednesday|Thursday|Friday|Saturday),?\s+(January|February|March|April|May|June|July|August|September|October|November|December)\s+[0-3]?[0-9],?\s+[0-2][0-9][0-9][0-9] 
```

But note that it will also find invalid dates, like ones with `February 31`.

# ruby - 如何从 Ruby 访问 SQL Server 2008

> ID：10356783
> 
> 赞同：1
> 
> 时间：2012-04-27T19:34:37.710
> 
> 标签：ruby

我正在使用 WATIR 和 Ruby 1.9.3 来测试 Web 应用程序，我需要连接到 Microsoft SQL Server Management Studio 2008（Windows 7 64 位）。我已经安装了“DBI 和 DBD-ODBC”gem。我还安装了 ODBC 数据源，我将其命名为“BUILD”。我正在执行后续步骤，但不幸的是我收到了一条语法错误消息。这是我尝试过的：

```
require 'dbi'
conn = DBI.connect('DBI:ODBC:BUILD', 'username', 'password')conn.connected? 
```

* * *

这给了我这个错误信息：

```
SyntaxError: (irb):2: syntax error, unexpected tIDENTIFIER, expecting $end
...'username', 'password')conn.connected?
...                           ^
    from C:/Ruby193/bin/irb:12:in `<main>' 
```

* * *

老实说，我不知道我做错了什么。我在网上搜索了一个解决方案，但显然我找不到任何可以帮助我的答案。我会感谢你的帮助谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T20:03:50.467

我认为您在这部分有语法错误：

`conn = DBI.connect('DBI:ODBC:BUILD', 'username', 'password')`**康恩**`.connected?`

尝试运行它：

```
conn = DBI.connect('DBI:ODBC:BUILD', 'username', 'password') #==> sets up the connection

conn.connected?  #==>  true if it is working 
```

您有一个方法调用，紧接着是一个变量，这就是为什么您的编译器抱怨您在`conn`再次调用之前从未结束该方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T20:39:28.380

为了轻松访问 SQL Server，您应该查看 TinyTds [https://github.com/rails-sqlserver/tiny_tds](https://github.com/rails-sqlserver/tiny_tds)

# c++ - Opengl：视口、裁剪、矩阵模式混淆

> ID：10356784
> 
> 赞同：1
> 
> 时间：2012-04-27T19:34:41.633
> 
> 标签：c++, opengl, graphics

我一直在学习计算机图形学，我对视口、gluortho 的作用以及何时使用 GL_MatrixMode 和 GL_Projection 感到非常困惑。这是我编写的让我感到困惑的示例代码。

```
void init()
{
    glClearColor(1.0,1.0,1.0,1.0);//Background Color of Viewport
    glMatrixMode(GL_PROJECTION);
    glLoadIdentity();
    glOrtho(-200,200,-200,200,-50,50);
    glMatrixMode(GL_MODELVIEW);
}

void wheel()
{
    glClear(GL_COLOR_BUFFER_BIT);
    glColor3f(1,0.2,0.2);   
    glLoadIdentity();
    glViewport(0,0,200,200);
    glutSolidCube(100); 
    glFlush();
}
void main(int argc,char** argv)
{
    glutInit(&argc,argv);
    glutInitWindowSize(400,400);
    glutInitWindowPosition(400,400);//Position from the top left corner
    glutCreateWindow("Car");
    init();

    glutDisplayFunc(wheel);//Shape to draw
    glutMainLoop();
} 
```

当我将 Cube 的大小更改为 200 时，它消失了，为什么？那是因为它比 z 剪辑大吗？当我删除 glMatrixMode(GL_MODELVIEW) 时，立方体消失了，为什么？如果我在显示功能结束时不刷新，立方体也会消失，为什么？当我使视口变小时，对象变小是否意味着对象坐标是相对于视口而不是世界坐标？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T22:16:55.660

当您将立方体大小更改为 200 时，它的面会超出您在`glOrtho`调用中设置为 -50 和 50 的近剪裁平面和远剪裁平面。从技术上讲，您将看到立方体的内部，但远立方体的一侧也在远剪裁平面之外，因此您看不到它的背面。

删除将矩阵模式设置为 GL_MODELVIEW 的调用意味着您的`glLoadIdentity`调用在固定功能投影矩阵上运行（我很确定），因此立方体直接转换为标准化设备坐标，并且它再次延伸到所有剪切平面之外.

最后，`glViewport`定义您应该渲染到的缓冲区的大小，因此通常与您的屏幕大小相匹配。使其更小有效地使您的屏幕尺寸更小，但不会改变实际的 GLUT 窗口大小。用数学术语来说，它改变了片段从标准化设备坐标投影到屏幕坐标的方式。

# spring - maven + surefire-plugin 和 Spring @Autowired 的问题

> ID：10356785
> 
> 赞同：0
> 
> 时间：2012-04-27T19:34:44.100
> 
> 标签：spring, maven-3, junit4, maven-surefire-plugin

我一直在努力让 Spring`@Autowired`在 Maven 测试中工作。当我在 IntellJ 中运行 JUnit 测试（没有尝试 Eclipse）时，它可以工作。但是当我运行 mvn clean install 时，JUnit 测试失败并出现以下错误

> testApp（com.sample.spring.AppTest）：创建名为“com.sample.spring.AppTest”的bean时出错：自动装配依赖项的注入失败；嵌套异常是 org.springframework.beans.factory.BeanCreationException：无法自动装配字段：com.sample.spring.AppB com.sample.spring.AppTest.appB；嵌套异常是 org.springframework.beans.factory.NoSuchBeanDefinitionException：没有为依赖项找到类型为 [com.sample.spring.AppB] 的匹配 bean：预计至少有 1 个 bean 有资格作为此依赖项的自动装配候选者。依赖注解：{@org.springframework.beans.factory.annotation.Autowired(required=true)}

我创建了一个自包含的示例项目，该项目始终表现出这种行为。我正在使用 Spring 3.1.1。我确信有人遇到了同样的问题并破解了它。寻找有关此问题的一些指示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T12:53:13.820

这是构建路径问题：

在 Eclipse 中工作，我将您的 ContextConfiguration 更改为：

```
@ContextConfiguration(locations = "classpath:applicationContext.xml") 
```

它与标准 eclipse runner 和 maven（maven 测试或 maven 安装）一起运行。

确保你有：

> 源/主/java
> 
> src/test/java 和
> 
> 源/测试/资源

在构建路径中声明为源文件夹

# android - 对行为不端的应用程序进行故障排除的困难

> ID：10356789
> 
> 赞同：1
> 
> 时间：2012-04-27T19:35:02.883
> 
> 标签：android

我们使用 PhoneGap 部署了一个简单的应用程序，目标是 Android 2.2 API 8 及更高版本。在各种 android 模拟器上，我已经设置它可以工作，并且在办公室的所有设备上它都可以工作....除了一个，然后去想它是办公室里吱吱作响的轮子。已经产生了足够多的噪音，以至于我现在的任务是只花时间在一台设备上。我已经设置了一个尽可能靠近它的模拟器。该设备是运行 2.3.4 的摩托罗拉 Droid2 Global。马上知道我无法将模拟器设置为 2.3.4，只有 2.3.3。我知道 2.3.4 只是一个服务补丁，但我试图尽可能地模仿它。

它表现出的行为是，在这台设备上打开时，它会无限期地挂起，并带有白色模态屏幕和旋转动画。当然，我无法在开发中发生这种行为。此外，一切都是自包含的，因此不涉及 Web 服务等。所以我需要关于如何调试的建议。

我目前的想法......可能不是一个好的想法是退回到 80 年代并在每一行重要的代码之后放置一个消息框显示并将 .apk 推送到她的设备上。

此外，由于这发生在应用程序的负载非常大的时候，这里的代码是……一行。

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    //setContentView(R.layout.main);
    //super.load( "file:///android_asset/www/index.html");
    super.loadUrl("file:///android_asset/www/index.html");
} 
```

任何想法都非常感谢。JB

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T21:27:38.870

与实际解决方案相比，这更像是一条解决方案，但无论如何：

在您的 javascript 中获取一些日志并将其连接到 logcat 日志；还可以登录您调用或添加到 phonegap 库的任何 java 函数。运行 logcat 并查看您从各个级别收到的消息。产生怀疑并为他们设置日志陷阱。

# sql-server - DBX 将 SQL 错误截断为 256 个字符

> ID：10356792
> 
> 赞同：1
> 
> 时间：2012-04-27T19:35:28.217
> 
> 标签：sql-server, delphi, error-handling, datasnap, truncated

我在 Windows Server 2008 R2 上使用 Delphi-XE2 Enterprise、SQLServer 2008 R2。当引发 SQL 错误时，DataSnap 服务器会捕获它并将其返回给客户端应用程序。这一切都有效，除了它被截断为 256 个字符的错误消息。

引发错误时 DataSnap 服务器的堆栈跟踪显示，当使用该`[file:Data.DBXDynalink]TDBXMethodTable.RaiseError()`方法通过 DBX 框架检索 SQL DB 错误时，SQL 错误消息被截断。**RaiseError()**方法中的以下代码行将**MessageLength**设置为 256，即使错误消息更长。因此返回给客户端的错误消息永远不会超过 256 个字符。

```
Status := FDBXBase_GetErrorMessageLength(DBXHandle, DBXResult, MessageLength); 
```

**FDBXBase_GetErrorMessageLength**是**TDBXCommon_GetErrorMessageLength**类型，定义为：

```
TDBXCommon_GetErrorMessageLength = function(Handle: TDBXCommonHandle; LastErrorCode: TDBXErrorCode; out ErrorLen: TInt32): TDBXErrorCode; stdcall; 
```

有没有办法增加缓冲区大小以允许将更多的数据库错误发送到客户端（例如，512 个字符），或者这只是 DBX 框架的限制？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T15:48:57.377

@Sertac 发现了一个与 Carlos 非常相似的问题，即驱动程序截断错误消息。Carlos 发现更改 midas.dll 以增加错误缓冲区大小可以解决他的问题。我确定解决方案对于我的问题是相同的。

感谢@Sertac 提供指向 Carlos 问题的链接：

[协调错误：有人遇到过截断错误消息的问题吗？](https://stackoverflow.com/questions/8701752)

# html - 无法减小 Chrome 中可调整大小的文本区域的大小

> ID：10356797
> 
> 赞同：5
> 
> 时间：2012-04-27T19:35:51.873
> 
> 标签：html, google-chrome

我有一个文本区域：

```
<textarea cols="1" rows="1" style="width:500px; height:200px;"></textarea> 
```

出于某种原因，在 Chrome 中使用鼠标光标调整大小时，我无法将其缩小，但在 Fifefox 中它可以正常工作。我错过了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-02-22T13:56:35.560

您没有做错任何事情，您的代码是正确的，但是您在 Chrome 中遇到了一个错误： [https ://code.google.com/p/chromium/issues/detail?id=94583](https://code.google.com/p/chromium/issues/detail?id=94583)

它将您的 css 高度值视为最小高度值，这是一个至少存在 2 年的错误

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T20:00:32.793

尝试这个

```
<textarea cols="1" rows="1" style="width:auto; min-width:300px; height:200px; resize:both;"></textarea> 
```

我认为在 chrome 中我们不能减少宽度，如果它设置。

# jboss - HornetQ 消费者在 N 小时后停止接收消息

> ID：10356805
> 
> 赞同：1
> 
> 时间：2012-04-27T19:36:15.520
> 
> 标签：jboss, jms, hornetq

我正在使用独立运行的 HornetQ(v2.2.13) 消费者来读取 JBOSS 服务器发布的持久主题（7.1.1 最终版）。一切顺利几个小时（2-6 之间），然后消费者停止接收来自主题的消息。从服务器上的日志文件中，我看到数据不断从管道中抽出，但消费者日志文件表明客户端停止读取数据。我从客户端推断出它最后一次从主题中读取消息的时间是 12:00:00，而服务器日志说它最后一次向主题推送消息的时间是 14:00:00。

我尝试过调整 HornetQ 的配置，但它似乎并没有持续持续的时间。

我用来与主题交流的代码如下。

```
private TransportConfiguration getTC(String hostname) {
        Map<String,Object> params = new HashMap<String, Object>();
        params.put(TransportConstants.HOST_PROP_NAME, hostname);
        params.put(TransportConstants.PORT_PROP_NAME, 5445);
        TransportConfiguration tc = new TransportConfiguration(NettyConnectorFactory.class.getName(), params);
        return tc;

    }

    private Topic createDestination(String destinationName) {
        Topic topic = new HornetQTopic(destinationName);
        return topic;

    }

    private HornetQConnectionFactory createCF(TransportConfiguration tc) {
        HornetQConnectionFactory cf = HornetQJMSClient.createConnectionFactoryWithoutHA(JMSFactoryType .CF, tc);
        return cf == null ? null : cf;

    } 
```

创建会话并启动它的代码片段：

```
TransportConfiguration tc = this.getTC(this.hostname);
        HornetQConnectionFactory cf = this.createCF(tc);
        cf.setRetryInterval(4000);
        cf.setReconnectAttempts(10);
        cf.setConfirmationWindowSize(1000000);

        Destination destination = this.createDestination(this.topicName);
        logger.info("Starting Topic Connection");
        try {
            this.connection = cf.createConnection();

            connection.start();
            this.session = connection.createSession(transactional, ackMode);
            MessageConsumer consumer = session.createConsumer(destination);
            consumer.setMessageListener(this);

            logger.info("Started topic connection");
        } catch (Exception ex) {
            ex.printStackTrace();
            logger.error("EXCEPTION!");
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T19:48:59.433

您不会在服务器端获得任何有关服务器断开连接的日志。

您是否尝试过使用 client-failure-check-period 和其他 ping 参数？

虚拟机设置呢？

您如何确认消息？我看到您将其创建为事务。您确定在收到消息时提交 TX 吗？

# html - 为主添加阴影 在wordpress中

> ID：10356806
> 
> 赞同：0
> 
> 时间：2012-04-27T19:36:17.750
> 
> 标签：html, css, wordpress

尝试在主体周围添加阴影，`<div>`并在其底部添加圆形边框。我已经在 style.css 中添加了带有样式的类。但是我进入firebug找到`div`控制“内容”的内容，它在下面`<div id="main">`，我如何在html代码中添加额外的类？

我知道页脚和页眉只是 footer.php 但我如何进入其他 div？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T20:07:50.573

嗯，不确定你想控制什么 div。Wordpress 有很多内容被分成不同的 php 文件。比如`sidebar.php`或者`footer.php`你提到的。它还会根据您使用的主题而变化。

通常我在 html 中编辑的一般方法是`<divs>`我自己没有编码的好 ole 查找和替换。使用 firebug 或 Chrome 开发工具找到您的 div 的确切名称，然后使用 style.css 或元素样式中的硬编码编辑您喜欢的 div。

就阴影而言...为了方便复制和粘贴以及自定义.. 试试这样的[http://www.css3maker.com/](http://www.css3maker.com/)

例如...

```
-moz-box-shadow: 0px 0px 11px #000000;
-webkit-box-shadow: 0px 0px 11px #000000;
box-shadow: 0px 0px 11px #000000; 
```

# regex - 如何从文件中删除包含任何一个字符串数组的行？

> ID：10356808
> 
> 赞同：0
> 
> 时间：2012-04-27T19:36:27.297
> 
> 标签：regex, sed, awk

我有一个像这样的文件：

```
<string name="app_name">多系统启动免费版</string>
<string name="newitem">新建</string>
<string name="edit">编辑</string>
<string name="edits">编辑\u0020</string>
<string name="details">详情</string>
<string name="resize">改变大小</string>
<string name="seticon">设置图标</string>
<string name="delete">"删除 \u0020"</string>
<string name="reset">恢复出厂设置</string>
<string name="setdefault">设为默认</string>
<string name="description">多系统启动免费版</string>
<string name="nodata">没有发现虚拟系统镜像!!!</string> 
```

我想从中删除包含`reset newitem details`的行。如何制作脚本以自动删除这些？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T20:04:40.193

也许

```
grep -vf <(printf "%s\n" reset newitem details) filename 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T20:14:55.230

如前所述，最简单的是`grep -v -e reset -e newitem -e details`。但是为了好玩，这里是 sed：

```
sed '/reset/d;/newitem/d;/details/d'
sed '/reset\|newitem\|details/d' 
```

和 awk：

```
awk '!/reset|newitem|details/'
awk '!/reset/ && !/newitem/ && !/details/'
awk '/reset/ || /newitem/ || /details/ { next } 1' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T19:42:02.027

如果要删除字符串中出现“reset”、“newitem”或“details”*的*行，可以轻松地将一些`grep -v`语句链接在一起：

```
prompt:~/> cat file.txt | grep -v reset | grep -v newitem | grep -v details
<string name="app_name">多系统启动免费版</string>
<string name="edit">编辑</string>
<string name="edits">编辑\u0020</string>
<string name="resize">改变大小</string>
<string name="seticon">设置图标</string>
<string name="delete">"删除 \u0020"</string>
<string name="setdefault">设为默认</string>
<string name="description">多系统启动免费版</string>
<string name="nodata">没有发现虚拟系统镜像!!!</string> 
```

`-v`搜索与grep 通常返回的内容相反的内容*。*对于像这样的简单案例，我认为这种方法比 sed 或 awk 更容易。

# javascript - process.getuid() 在 Windows 上不起作用

> ID：10356814
> 
> 赞同：7
> 
> 时间：2012-04-27T19:36:41.347
> 
> 标签：javascript, node.js

我创建了一个只包含一行代码的脚本：

```
console.log('userid: ' + process.getuid()); 
```

当我使用命令运行脚本`node filename.js`时，出现以下错误：

```
node.js:201
throw e; // process.nextTick error, or 'error' event on first tick  
^  
TypeError: Object #<EventEmitter> has no method 'getuid'  
at Object.<anonymous> (c:\PROGRA~1\nodejs\node_modules\mrt\p.js:1:96)  
at Module._compile (module.js:441:26)  
at Object..js (module.js:459:10)  
at Module.load (module.js:348:31)  
at Function._load (module.js:308:12)  
at Array.0 (module.js:479:10)  
at EventEmitter._tickCallback (node.js:192:40) 
```

我在 Windows 上运行 node.js。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-02-14T11:43:12.477

我知道的老问题，但我想我会整理一下，以防其他人正在搜索。

只需检查[文档](http://nodejs.org/api/process.html#process_process_getuid "文档")，似乎：

> 注意：此功能仅适用于 POSIX 平台（即非 Windows）

干杯

约翰

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-15T15:21:27.303

由于我在更新 npm@2.12.0 时遇到问题，因此这里有让我解决问题的命令：

```
npm uninstall -g npm
npm install -g npm@2.12.1 
```

之后检查您的版本：

```
npm -v 
```

那么应该是2.12.1。之后我可以正常运行我的安装/更新命令。

资料来源：见github 下的[Idez](https://github.com/npm/npm/issues/8737#issuecomment-116274426)评论。

# objective-c - 在 Cocoa 的不同类中设置变量

> ID：10356822
> 
> 赞同：0
> 
> 时间：2012-04-27T19:37:08.783
> 
> 标签：objective-c, cocoa, class, nsstring

我正在尝试学习如何使用一个主要数据类为不同的类设置变量。

这是我想做的事情的图表以及我的项目中的代码： ![在此处输入图像描述](../Images/9899079343d47f83876e8130350dcdae.png)

A类

```
#import <Foundation/Foundation.h>

@interface ClassA : NSObject {
    NSString *stringA;
    NSString *stringB;
}

@property (nonatomic, copy) NSString *stringA;
@property (nonatomic, copy) NSString *stringB;

@property (weak) IBOutlet NSTextField *textA;
@property (weak) IBOutlet NSTextField *textB;

- (IBAction)displayStrings:(id)sender;

@end

#import "ClassA.h"

@implementation ClassA

@synthesize stringA, stringB, textA, textB;

- (IBAction)displayStrings:(id)sender {
    [textA setStringValue:stringA];
    [textB setStringValue:stringB];
}

@end 
```

X 级

```
#import <Foundation/Foundation.h>

@interface ClassX : NSObject {
    NSMutableString *stringX;
}

- (void)theVariables:(id)sender;

@end

#import "ClassX.h"
#import "ClassA.h"

@implementation ClassX

- (void)awakeFromNib {
    [self theVariables:self];
}

- (void)theVariables:(id)sender {
    stringX = [[NSMutableString alloc] init];

    ClassA *clssA = [[ClassA alloc] init];

    [stringX setString:@"stringX for stringA"];
    [clssA setStringA:stringX];

    [stringX setString:@"stringX for stringB"];
    [clssA setStringB:stringX];
}

@end 
```

代码中没有显示错误，但是当我运行程序时，我收到一个关于“无效参数不满足：aString”的错误。看起来 IBOutlet 的 setStringValue 不起作用。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T20:12:01.383

我没有看到您提到的错误，但据我从您的代码中可以看出，主要问题是这一行：

```
ClassA *clssA = [[ClassA alloc] init]; 
```

您的 xib 中必须有一个实例，该实例`ClassA`连接到文本字段和按钮。xib 中的那个对象是一个真实的对象，如果您只是`ClassA`在代码中的某个位置创建另一个实例，那么您将拥有一个完全不同的对象，它与您的 xib 中的对象没有任何联系。

您需要确保/更改两件事。`ClassX`首先，您的 xib 中需要有一个 的实例。其次，`ClassX`需要一个`ClassA`实例的出口：

```
@class ClassA;    // Declare ClassA so you can use it below

@interface ClassX : NSObject

@property (weak) IBOutlet ClassA * theClassAInstance;

- (void)theVariables:(id)sender;

@end 
```

然后应该在 xib 文件中连接。然后，在 中`theVariables:`，您只需使用该插座，而不是创建一个新实例`ClassA`：`[[self theClassAInstance] setStringA:@"stringX for stringA"];`

* * *

风格三点：

首先，您应该`#import <Cocoa/Cocoa.h>`在任何接触 GUI 的类中导入 Cocoa.h：而不是 Foundation.h（`ClassA`在本例中）。`NSTextField`这就是定义类似的东西的地方。无论如何它都可以工作，因为 Cocoa.h 是通过您的 .pch 文件导入的，但最好是明确的。

其次，创建一个可变字符串并将其值更改为两个不同的文字字符串并没有多大意义。只需直接使用文字：`[clssA setStringA:@"stringX for stringA"];`

第三，您不需要单独声明实例变量；`@synthesize`为您创建它们，现在推荐的做法是*不*声明它们：

```
@interface ClassA : NSObject

@property (nonatomic, copy) NSString *stringA;
@property (nonatomic, copy) NSString *stringB;

@property (weak) IBOutlet NSTextField *textA;
@property (weak) IBOutlet NSTextField *textB;

- (IBAction)displayStrings:(id)sender;

@end 
```

最后（四点！），您应该真正通过属性访问`stringA`和`stringB`in的值`ClassA`：`[textA setStringValue:[self stringA]];`

# silverlight-4.0 - HtmlPage.Window.Navigate 在 IE 中有效，但在 Chrome 中无效

> ID：10356827
> 
> 赞同：4
> 
> 时间：2012-04-27T19:37:48.773
> 
> 标签：silverlight-4.0, navigation, window, uri

我有一个非常简单的silverlight 界面，上面有一堆链接。有点像老式的 html 区域地图，其中不同的部分将您带到内部网络上的不同位置。

我正在开发框中的 IE 中测试我的页面，并成功使用重定向页面

```
HtmlPage.Window.Navigate(New Uri("http://mytestbox02/")) 
```

我将源代码的副本带到我的笔记本电脑上，其中 VS2010 的默认浏览器恰好是 Chrome，令我惊讶的是，我的链接不起作用。有时我看到它重定向，但它破坏了 uri，它最终以**mytestbox02/**的形式出现，因此它除了 404 之外什么都没有，因为它缺少 http:// 前缀。有时我会遇到异常。该异常的详细信息是

```
System.InvalidOperationException was caught
  Message=SetProperty failed.
  StackTrace:
       at System.Windows.Browser.ScriptObject.SetProperty(String name, Object value)
       at System.Windows.Browser.ScriptObject.GetObjectForSafari(IntPtr identity, IntPtr handle, Type type, Boolean releaseReferenceOnDispose)
       at System.Windows.Browser.ScriptObject.GetObject(IntPtr handle, Type type, Boolean ownsHandle, Boolean releaseReferenceOnDispose)
       at System.Windows.Hosting.ScriptingInterface.GetScriptParamValue(ScriptParam scriptParam)
       at System.Windows.Hosting.ScriptingInterface.ConvertFromScriptParamAndDispose(ScriptParam scriptParam)
       at System.Windows.Browser.ScriptObject.TryInvoke(String name, Object[] args, Exception& error)
       at System.Windows.Browser.ScriptObject.Invoke(String name, Object[] args)
       at System.Windows.Browser.HtmlWindow.Navigate(Uri navigateToUri, String target, String targetFeatures)
       at System.Windows.Browser.HtmlWindow.Navigate(Uri navigateToUri)
       at popupwindow.MainPage.ChildWindow_Closed(Object sender, EventArgs e)
  InnerException: 
```

开发盒和我的笔记本电脑上都有 Silverlight 4.1.10111.0。

任何线索这里发生了什么？我不能完全确定我的客户会使用 IE，所以我希望能解决这个问题。或者除了window.navigate之外我可以使用的更交叉兼容的东西？虽然我还没有找到任何东西..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T21:52:00.920

看来这实际上可能是 Chrome 的问题 - 我只是花了一天时间自己解决它。

[http://forums.silverlight.net/t/213769.aspx/1](http://forums.silverlight.net/t/213769.aspx/1)

[http://stulic.blogspot.com/2009/08/javascript-locationhref-vs-silverlight.html](http://stulic.blogspot.com/2009/08/javascript-locationhref-vs-silverlight.html)

您可能需要使用某种 javascript。

```
HtmlPage.Window.Eval("window.location.href = '<something>';");
//or
HtmlPage.Window.Eval("window.location.reload();"); 
```

# php - 在 php 中使用 SimpleXml 将附加数据添加到元素中并保存

> ID：10356831
> 
> 赞同：0
> 
> 时间：2012-04-27T19:38:06.907
> 
> 标签：php, xml, regex, simplexml

我正在使用 simplexml 通过 php 以 XML 的形式加载 API URL。在`ProductDescription`元素中，它包含我想在保修部分附加的 html。我想`<li>Valid in US</li>`在`ProductDescription`LAST`</ul>`标记之前添加元素：

```
 <xmldata>
      <Products>
        <ProductCode>ACODE</ProductCode>
        <ProductID>1234</ProductID>
        <ProductName>PRODUCTTITLE</ProductName>
        <ProductDescription>
           <h1>Stuff</h1><p>description</p><hr /><strong>Features &amp; Benefits</strong>
           <ul><li>feat</li><li>feat</li><li>feat</li></ul><hr /><strong>Specifications</strong><ul><li>spec</li><li>spec</li><li>spec</li></ul> <hr /><strong>Warranty Information for a certain product</strong>
           <ul><li>3 Years Parts</li><li>3 Years Labor</li></ul><div> <a href="/ahref" target="_blank">See more products from MFG </a></div>
        </ProductDescription>
        <ProductManufacturer>MFG</ProductManufacturer>
      </Products>
    </xmldata> 
```

现在我所能做的就是从 ProductDescription 中获取裸代码，我需要知道一种在发布或显示之前将该标签添加`list`到最后一个标签末尾的方法。`ul`这是我的部分 php：

```
 foreach( $xml as $NEW_XML ) 
        {          
            $code = $NEW_XML->ProductCode;
            $name = $NEW_XML->ProductName;
            $desc = $NEW_XML->ProductDescription; 
            $mfg = $NEW_XML->ProductManufacturer;
echo "<textarea rows='13' cols='64' name='DESC' />" . $desc. "</textarea>"; } 
```

我希望我不必使用 REGex，因为它可能会很痛苦（除非有人知道一种方法）。我最初的想法是将它放入 a`<textarea>`并简单地将其发布回 xml，但如果有一种方法可以直接保存为 .xml 会更有效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T19:58:17.303

如果`ul`s 的数量已知，则可以添加如下信息：

```
$NEW_XML->ProductDescription->ul[2]->addChild('li', 'Valid in US'); 
```

这假设`$NEW_XML`指向`Products`-Element。要*始终*获得最后一个`ul`，您必须先计算它们：

```
$desc = $NEW_XML->ProductDescription;
$count = count($desc->ul);
$desc->ul[$count - 1]->addChild('li', 'Valid in US'); 
```

然后你可以只输出或保存`$xml->asXML()`。

**更新**：

这是我使用的完整代码，根据我上次评论的假设进行了更新，也许这会有所帮助：

```
<?php
$xmldata = <<<ENDXML
<xmldata>
      <Products>
        <Product>
            <ProductCode>ACODE</ProductCode>
            <ProductID>1234</ProductID>
            <ProductName>PRODUCTTITLE</ProductName>
            <ProductDescription>
               <h1>Stuff</h1><p>description</p><hr /><strong>Features &amp; Benefits</strong>
               <ul><li>feat</li><li>feat</li><li>feat</li></ul><hr />    <strong>Specifications</strong><ul><li>spec</li><li>spec</li><li>spec</li></ul> <hr /><strong>Warranty Information for a certain product</strong>
               <ul><li>3 Years Parts</li><li>3 Years Labor</li></ul><div> <a href="/ahref" target="_blank">See more products from MFG </a></div>
            </ProductDescription>
            <ProductManufacturer>MFG</ProductManufacturer>
        </Product>
        <Product>
            <ProductCode>ANOTHERCODE</ProductCode>
            <ProductID>98765</ProductID>
            <ProductName>PRODUCTTITLE 2</ProductName>
            <ProductDescription>
               <h1>Stuff</h1><p>description</p><hr /><strong>Features &amp; Benefits</strong>
               <ul><li>feat</li><li>feat</li><li>feat</li></ul><hr /> <strong>Specifications</strong><ul><li>spec</li><li>spec</li><li>spec</li></ul> <hr /> <strong>Warranty Information for a certain product</strong>
               <ul><li>3 Years Parts</li><li>3 Years Labor</li></ul><div> <a href="/ahref" target="_blank">See more products from MFG </a></div>
            </ProductDescription>
            <ProductManufacturer>MFG</ProductManufacturer>
        </Product>
    </Products>
</xmldata>
ENDXML;

$xml = simplexml_load_string($xmldata);

foreach ($xml->Products->Product as $product) {
    $description = $product->ProductDescription;
    $count = count($description->ul);
    $description->ul[$count-1]->addChild('li', 'Valid in US');
}

echo $xml->asXML(); 
```

# php - CakePHP：模块化使用组件的控制器动作以在外壳中使用

> ID：10356832
> 
> 赞同：1
> 
> 时间：2012-04-27T19:38:22.927
> 
> 标签：php, shell, cakephp

我有一个 shell 脚本，我想发送与控制器中相同的电子邮件。控制器动作使用`SwiftMailer`组件。但是，Shell 不能调用控制器操作，所以我正在寻找一种方法来模块化这个电子邮件发送代码，以便我的**shell**和我的**控制器***都*可以使用它。

 *****理想情况下*，我会将这个发送电子邮件的代码放在 中`afterSave`，但再一次，组件不能在模型中使用。

有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T21:39:33.170

好吧，这可能不是最好的主意，但你确实说过“有**什么**想法吗？” :)

可能最合理的做法是将邮件发送代码提取到一个单独的库中（在[Lib 文件夹](http://book.cakephp.org/2.0/en/getting-started/cakephp-folder-structure.html#the-app-folder)中），然后更改您的组件和外壳以使用它。

您的代码是否可能是真正的问题，我想只有您可以回答。如果你不知道，你只需要尝试。

无论如何，祝你好运！****

# xml - 删除 XSL 中不匹配的父元素

> ID：10356834
> 
> 赞同：0
> 
> 时间：2012-04-27T19:38:28.800
> 
> 标签：xml, xslt, xpath, wix, xslt-1.0

*   我需要删除所有`Component`元素及其对应的`ComponentRef`元素，其中`Component`子元素`File`属性`Source`不是`dll`文件？
*   我有`Source`字符串值的评估函数，即对于包含`{substring(wix:File/@Source, string-length(wix:File/@Source) - 2)}='dll'`的值返回 true`Source``dll`
*   但是我不知道如何使用该函数删除最后两个`Component`元素（及其子元素）以及相应的最后两个`ComponentRef`元素（按属性映射`Id`）？

### 源 XML

```
<?xml version="1.0" encoding="utf-8"?>
<Wix xmlns="http://schemas.microsoft.com/wix/2006/wi">
    <Fragment>
        <DirectoryRef Id="TARGETFOLDER">
            <Component Id="cmpA733DB49D89AC9CEA2EDFAAEE51992E7" Guid="{F3412A8F-5718-45AB-9E6F-7B802BCC0EED}">
                <File Source="$(var.WixSlave.TargetDir)\protobuf-net.dll" Id="fil910D6DB28382BAB5A9DF0ACBD5095ADE" KeyPath="yes" />
            </Component>
            <Component Id="cmpF1D751B9621E283AD7BDAA8BC6997338" Guid="{20C09DBB-C8D6-43CF-A9D6-C823850F86F6}">
                <File Source="$(var.WixSlave.TargetDir)\client.wyc" Id="fil7454A527FA7C3918A537EB96235C9F5F" KeyPath="yes"  />
            </Component>
            <Component Id="cmp8CDA926DD93F7CEFBF8FFF444D5828F4" Guid="{2243D9D8-C172-4FFE-AEBE-43659294E55D}">
                <File Source="$(var.WixSlave.TargetDir)\protobuf-net.pdb" Id="fil3EA19C07C51C4E31D37065B3A8620713" KeyPath="yes"  />
            </Component>
        </DirectoryRef>
    </Fragment>
    <Fragment>
        <ComponentGroup Id="Dlls">
            <ComponentRef Id="cmpA733DB49D89AC9CEA2EDFAAEE51992E7" />
            <ComponentRef Id="cmpF1D751B9621E283AD7BDAA8BC6997338" />
            <ComponentRef Id="cmp8CDA926DD93F7CEFBF8FFF444D5828F4" />
        </ComponentGroup>
    </Fragment>
</Wix> 
```

### 功能失调的 XSLT 存根

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns="http://schemas.microsoft.com/wix/2006/wi" xmlns:wix="http://schemas.microsoft.com/wix/2006/wi" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:template match="node()|@*">
        <xsl:copy>
            <xsl:apply-templates select="node()|@*"/>
        </xsl:copy>
    </xsl:template>
    <xsl:template match="wix:File[{substring(wix:File/@Source, string-length(wix:File/@Source) - 2)}!='dll']"/>
</xsl:stylesheet> 
```

*   这个 XSLT 在很多方面都不起作用，首先是第二个`match`抱怨，我不确定表达式有什么问题..

*   即使这样有效，您将如何`DirectoryRef`在删除不匹配`Component`和子`File`元素的同时始终保留？

*   完全删除相应的`ComponentRef`元素？

### 所需的 XML 输出

```
<?xml version="1.0" encoding="utf-8"?>
<Wix xmlns="http://schemas.microsoft.com/wix/2006/wi">
    <Fragment>
        <DirectoryRef Id="TARGETFOLDER">
            <Component Id="cmpA733DB49D89AC9CEA2EDFAAEE51992E7" Guid="{F3412A8F-5718-45AB-9E6F-7B802BCC0EED}">
                <File Source="$(var.WixSlave.TargetDir)\protobuf-net.dll" Id="fil910D6DB28382BAB5A9DF0ACBD5095ADE" KeyPath="yes" />
            </Component>
        </DirectoryRef>
    </Fragment>
    <Fragment>
        <ComponentGroup Id="Dlls">
            <ComponentRef Id="cmpA733DB49D89AC9CEA2EDFAAEE51992E7" />
        </ComponentGroup>
    </Fragment>
</Wix> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T19:57:23.200

以下是我将如何去做：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns="http://schemas.microsoft.com/wix/2006/wi" xmlns:wix="http://schemas.microsoft.com/wix/2006/wi" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

    <xsl:key name="component-id" match="//wix:Component[substring(wix:File/@Source, string-length(wix:File/@Source) - 2) != 'dll']" use="@Id"/>

    <xsl:template match="node()|@*">
        <xsl:copy>
            <xsl:apply-templates select="node()|@*"/>
        </xsl:copy>
    </xsl:template>

    <xsl:template match="wix:Component[@Id = key('component-id', @Id)/@Id]"/>

    <xsl:template match="wix:ComponentRef[@Id = key('component-id', @Id)/@Id]"/>
</xsl:stylesheet> 
```

这个想法很简单。告诉 XSLT 处理器构建我们想要删除的那些组件节点的索引，然后`xsl:copy`使用匹配的模板抑制它们。

# jquery - Jquery选择一个复选框时选择所有复选框

> ID：10356836
> 
> 赞同：0
> 
> 时间：2012-04-27T19:38:39.983
> 
> 标签：jquery

我有一系列从 smarty 模板构建的复选框。选择具有WTOPS值的特定复选框时，我希望此操作选择div中的所有其他复选框。这是我下面的代码，它不起作用

这是我的jQuery：

```
$("input[name=levelCheck]").change(function () {
if ($("input[name=levelCheck]:checked").val() == 'WTOPS') {
$("input[type='checkbox']").attr('checked', true);  
}
}); 
```

这是HTML：

```
<div id="Women">
<label> <input type="checkbox" name="level_desc[]" id="levelCheck" value="WOPEN"> Open </label>
<label> <input type="checkbox" name="level_desc[]" id="levelCheck" value="WPREPOPT"> Prep Opt </label>
<label> <input type="checkbox" name="level_desc[]" id="levelCheck" value="WTOPS"> TOPS </label>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T19:44:13.290

下面的脚本应该可以解决您拥有的标记，

[**演示**](http://jsfiddle.net/skram/5gbvU/1/)

```
$(function() {
    $("input[name=level_desc\\[\\]]").change(function() {        
        if ($("input[name=level_desc\\[\\]]:checked").val() == 'WTOPS') {
            $("input[type='checkbox']").attr('checked', true);
        }
    });
}); 
```

正如迈克尔指出的那样，使用引号看起来更好，

```
$(function() {
    $("input[name='level_desc[]']").change(function() {        
        if ($("input[name='level_desc[]']:checked").val() == 'WTOPS') {
            $("input[type='checkbox']").attr('checked', true);
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T19:45:16.023

尝试定位特定的复选框 - 无需全部观看。

```
$("input[value=WTOPS]:not(:checked)").change(function () {
    $("input[type='checkbox']").attr('checked', 'checked');  
}); 
```

这专门针对未选中和更改时的 WTOPS 复选框。然后它会触发所有要检查的复选框。该问题没有谈到在未选中 WTOPS 框时将所有选项更改为未选中，但这是一种方法：

```
$("input[value=WTOPS]").change(function () {
    $("input[type='checkbox']").attr('checked', $("input[value=WTOPS]").val());  
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T19:43:35.180

你`$("input[name=levelCheck]:checked")`应该是`$("input#levelCheck:checked")`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-27T19:44:19.390

试试这个：

```
$("input#levelCheck").change(function () {
if ($("input#levelCheck:checked").val() == 'WTOPS') {
$("input[type='checkbox']").attr('checked', true);  
}
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-27T19:45:29.237

当您使用属性值选择器时，您应该将值用引号括起来 -

```
$("input[name='levelCheck']:checked"); 
```

注意包裹值的引号`name='levelCheck'`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-27T19:46:47.083

您多次使用 ID 属性，并且需要将名称用单引号括起来。

HTML

```
<div id="Women">
<label> <input type="checkbox" name="level_desc[]" id="levelCheck1" value="WOPEN"> Open </label>
<label> <input type="checkbox" name="level_desc[]" id="levelCheck2" value="WPREPOPT"> Prep Opt </label>
<label> <input type="checkbox" name="level_desc[]" id="levelCheck3" value="WTOPS"> TOPS </label>
</div>​ 
```

JS

```
$("input[name='level_desc[]']").change(function () {
     if ($("input[name='level_desc[]']:checked").val() == 'WTOPS') {
         $("input[name='level_desc[]']").attr('checked', true);  
     }
}); 
```

演示
[http://jsfiddle.net/ScMsX/](http://jsfiddle.net/ScMsX/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-27T19:47:31.527

试试这个

```
$("input[type='checkbox']").change(function () {
    console.log($(this));
if ($(this).val() == 'WTOPS') {
$("input[type='checkbox']").attr('checked', true);  
}
}); 
```

检查这里[http://jsfiddle.net/khqPj/](http://jsfiddle.net/khqPj/)

# javascript - 如何集成 Meteor 和 Ext.js？

> ID：10356838
> 
> 赞同：11
> 
> 时间：2012-04-27T19:38:45.727
> 
> 标签：流星, extjs, javascript, extjs, meteor

我试图找出将[流星](/questions/tagged/meteor "显示标记为“流星”的问题")和[extjs](/questions/tagged/extjs "显示标记为“extjs”的问题")结合在一起的最优雅的方式。

显然 Ext 有自己的 Ext.data.Store 和 Proxies 来处理 REST 后端。Meteor 有一个发布/订阅模型，可以自动推送更新。

我的第一个想法是编写一个自定义的“MeteorProxy”并在那里处理所有更新事件。我不确定这在过滤或排序数据方面是否明智。理想情况下，过滤应该在 Meteor 端进行，因为理想情况下数据排序/过滤器应该持续到数据的其他（非扩展）视图。

使用 MemoryProxy + 一些胶水代码会是更好的选择吗？

还是 ExtJS 5 有更新的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-01-31T08:56:21.163

已经两年了。您还在专门研究 ExtJS，还是对 ExtJS 替代品持开放态度？

如果是后者，请查看我的[Meteor + Webix 集成](https://github.com/dandv/meteor-webix)。Webix 是一个[类似于 ExtJS 的 UI 小部件库](https://stackoverflow.com/questions/200284/what-are-alternatives-to-extjs)，但更精简、移动友好且速度更快。

# vim - 如何改进此 vim 映射以格式化/对齐相似的行

> ID：10356839
> 
> 赞同：2
> 
> 时间：2012-04-27T19:39:04.007
> 
> 标签：vim

最近我需要一种更快的方法来根据通用字符（通常`=`）格式化相似的代码行。例如，我想格式化这个：

```
myVar = getMyVar();
myLongerVar = getMyLongerVar();
myYetLongerVar = getMyYetLongerVar(); 
```

进入那个：

```
myVar          = getMyVar();
myLongerVar    = getMyLongerVar();
myYetLongerVar = getMyYetLongerVar(); 
```

然后我写了以下映射：

```
" query used to find the common character. In this case i'm setting it to "find the ="
let g:defformatquery = "f="

" set current line as having the longer size till the common character
nnoremap <Leader>gm 0
            \:execute "normal " . g:defformatquery<CR>
            \:let b:epos = getpos(".")[2]<CR>

" format current line according to the position acquired above
nnoremap <Leader>g= 0
            \:execute "normal " . g:defformatquery<CR>hvgeld
            \:execute "normal " . (b:epos - getpos(".")[2]) . "i "<CR> 
```

要使用它们，我必须执行这些步骤（假设`,`是我的`<Leader>`）：

1.  将光标定位在`=`符号前面较长文本的行中（提供的示例中的第三行，`myYetLongerVar`）
2.  按：`,gm`
3.  对于我要格式化的每一行，将光标放在那里并按`,g=`

虽然这可行，但过程有点慢。我想创建一个可以一次格式化整个选定区域的函数。然后我可以为该功能创建一张地图。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T19:47:51.680

你应该试试[Align 插件](http://www.vim.org/scripts/script.php?script_id=294)。

例如，要根据符号对齐一些选定的行（用`v`或选择`CTRL-v`）`=`，您只需键入：

```
:Align = 
```

或者从第 34 行到第 39 行对齐：

```
:34,39Align = 
```

# eclipse - 在 Eclipse 中为 Mac OS X 上的 JDK7u4 设置什么 JRE 主页？

> ID：10356841
> 
> 赞同：7
> 
> 时间：2012-04-27T19:39:26.033
> 
> 标签：eclipse, macos, java, java-7

我为 Mac OS X 下载了 JDK7u4，并安装了它。现在我想设置 Eclipse 来使用这个 JDK。JRE home 应该设置在`Preferences > Java > Installed JREs`什么位置？我将它安装在默认位置。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-27T21:27:29.740

请参阅[Oracles 的 JDK 发行说明](http://www.oracle.com/technetwork/java/javase/downloads/jdk-for-mac-readme-1564562.html#eclipse)

> 在“JRE Home：”字段中，输入“/Library/Java/JavaVirtualMachines/1.7.0.jdk/Contents/Home”

请注意，您必须输入它，因为打开的对话框会在“/Library/Java/JavaVirtualMachines/1.7.0.jdk/”找到一个 OSX 包，并且不会浏览它

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T19:46:51.190

看到这个了吗？ [http://code.google.com/p/openjdk-osx-build/wiki/EclipseWithOpenJDK](http://code.google.com/p/openjdk-osx-build/wiki/EclipseWithOpenJDK)

主目录为：/Library/Java/JavaVirtualMachines/1.7.0.jdk/Contents/Home/

# c - CUDA 代码的数据采集部分意外输出“0”

> ID：10356842
> 
> 赞同：0
> 
> 时间：2012-04-27T19:39:27.857
> 
> 标签：c, cuda, statistics, simulation

**编辑**
在最初发布的代码片段（见下文）中，我没有正确发送`struct`到`device`，这已得到修复，但结果仍然相同。在我的完整代码中，这个错误不存在。（在我最初的帖子中，该命令有两个错误 - 一个，结构是从 复制的`HostToDevice`，但实际上是颠倒的，并且副本的大小也错误。道歉；两个错误都已修复，但重新编译的代码仍然显示下面描述的零现象，我的完整代码也是如此。）

**编辑 2**
在我对代码的去私有化重写的匆忙中，我犯了几个错误，[dalekchef](https://stackoverflow.com/users/865792/dalekchef)好心地向我指出（设备的副本是`struct`在设备上分配之前执行的，在我重写的代码和设备中`cudaMalloc`调用没有与`sizeof(...)`数组元素的类型相乘。我添加了这些修复，重新编译和重新测试，但它没有解决问题。还仔细检查了我的原始代码 - 它没有那些错误。再次道歉，对于困惑。

我正在尝试从大型模拟程序中转储统计数据。下面显示了一个类似的精简代码。两种代码都表现出相同的问题——它们在应该输出平均值时输出零。

```
#include "stdio.h"

struct __align__(8) DynamicVals 
{ 
   double a;
   double b;
   int n1;
   int n2;
   int perDump;
};

__device__ int *dev_arrN1, *dev_arrN2;
__device__ double *dev_arrA, *dev_arrB;
__device__ DynamicVals *dev_myVals;
__device__ int stepsA, stepsB;
__device__ double sumA, sumB;
__device__ int stepsN1, stepsN2;
__device__ int sumN1, sumN2;

__global__ void TEST
(int step, double dev_arrA[], double dev_arrB[],
 int dev_arrN1[], int dev_arrN2[],DynamicVals *dev_myVals)
{
   if (step % dev_myVals->perDump)
   {
      dev_arrN1[step/dev_myVals->perDump] = 0;
      dev_arrN2[step/dev_myVals->perDump] = 0;
      dev_arrA[step/dev_myVals->perDump] = 0.0;
      dev_arrB[step/dev_myVals->perDump] = 0.0;
      stepsA = 0;
      stepsB = 0;
      stepsN1 = 0;
      stepsN2 = 0;
      sumA = 0.0;
      sumB = 0.0;
      sumN1 = 0;
      sumN2 = 0;
   }

   sumA += dev_myVals->a;
   sumB += dev_myVals->b;
   sumN1 += dev_myVals->n1;
   sumN2 += dev_myVals->n2;
   stepsA++;
   stepsB++;
   stepsN1++;
   stepsN2++;

   if ( sumA > 100000000 )
   {
      dev_arrA[step/dev_myVals->perDump] +=
     sumA / stepsA;
      sumA = 0.0;
      stepsA = 0;
   }
   if ( sumB > 100000000 )
   {
      dev_arrB[step/dev_myVals->perDump] +=
     sumB / stepsB;
      sumB = 0.0;
      stepsB = 0;
   }
   if ( sumN1 > 1000000 )
   {
      dev_arrN1[step/dev_myVals->perDump] +=
     sumN1 / stepsN1;
      sumN1 = 0;
      stepsN1 = 0;
   }
   if ( sumN2 > 1000000 )
   {
      dev_arrN2[step/dev_myVals->perDump] +=
     sumN2 / stepsN2;
      sumN2 = 0;
      stepsN2 = 0;
   }

   if ((step+1) % dev_myVals->perDump)
   {
      dev_arrA[step/dev_myVals->perDump] +=
     sumA / stepsA;
      dev_arrB[step/dev_myVals->perDump] +=
     sumB / stepsB;
      dev_arrN1[step/dev_myVals->perDump] +=
     sumN1 / stepsN1;
      dev_arrN2[step/dev_myVals->perDump] +=
     sumN2 / stepsN2;
   }
}

int main() 
{
   const int TOTAL_STEPS = 10000000;
   DynamicVals vals;
   int *arrN1, *arrN2;
   double *arrA, *arrB;
   int statCnt;

   vals.perDump = TOTAL_STEPS/10;
   statCnt = TOTAL_STEPS/vals.perDump+1;
   vals.a = 30000.0;
   vals.b = 60000.0;
   vals.n1 = 10000;
   vals.n2 = 20000;

   cudaMalloc( (void**)&dev_arrA, statCnt*sizeof(double) );
   cudaMalloc( (void**)&dev_arrB, statCnt*sizeof(double) );
   cudaMalloc( (void**)&dev_arrN1, statCnt*sizeof(int) );
   cudaMalloc( (void**)&dev_arrN2, statCnt*sizeof(int) );
   cudaMalloc( (void**)&dev_myVals, sizeof(DynamicVals));
   cudaMemcpy(dev_myVals, &vals, sizeof(DynamicVals), 
          cudaMemcpyHostToDevice);

   arrA = (double *)malloc(statCnt * sizeof(double));
   arrB = (double *)malloc(statCnt * sizeof(double));
   arrN1 = (int *)malloc(statCnt * sizeof(int));
   arrN2 = (int *)malloc(statCnt * sizeof(int));

   for (int i=0; i< TOTAL_STEPS; i++)
      TEST<<<1,1>>>(i, dev_arrA,dev_arrB,dev_arrN1,dev_arrN2,dev_myVals);

   cudaMemcpy(arrA,dev_arrA,statCnt * sizeof(double),cudaMemcpyDeviceToHost);
   cudaMemcpy(arrB,dev_arrB,statCnt * sizeof(double),cudaMemcpyDeviceToHost);
   cudaMemcpy(arrN1,dev_arrN1,statCnt * sizeof(int),cudaMemcpyDeviceToHost);
   cudaMemcpy(arrN2,dev_arrN2,statCnt * sizeof(int),cudaMemcpyDeviceToHost);

   for (int i=0; i< statCnt; i++)
   {
      printf("Step: %d   ; A=%g  B=%g  N1=%d  N2=%d\n",
         i*vals.perDump,
         arrA[i], arrB[i], arrN1[i], arrN2[i]);
   }
} 
```

输出：

```
Step: 0   ; A=0  B=0  N1=0  N2=0
Step: 1000000   ; A=0  B=0  N1=0  N2=0
Step: 2000000   ; A=0  B=0  N1=0  N2=0
Step: 3000000   ; A=0  B=0  N1=0  N2=0
Step: 4000000   ; A=0  B=0  N1=0  N2=0
Step: 5000000   ; A=0  B=0  N1=0  N2=0
Step: 6000000   ; A=0  B=0  N1=0  N2=0
Step: 7000000   ; A=0  B=0  N1=0  N2=0
Step: 8000000   ; A=0  B=0  N1=0  N2=0
Step: 9000000   ; A=0  B=0  N1=0  N2=0
Step: 10000000   ; A=0  B=0  N1=0  N2=0 
```

现在，如果我要使用一小段时间进行转储，或者如果我的 #s 更小，我可以直接使用

1.  添加
2.  除以期间和期间结束

...算法，但我使用临时总和，否则我`int`会溢出（`double`不会溢出，但我担心它会失去精度）。

如果我对较小的值使用上述直接算法，我会得到正确的非零值，但第二次我使用中间值（例如`stepsA`、`sumA`等），值会变为零。我知道我在这里做一些愚蠢的事情......我错过了什么？

**注意：**
A.) 是的，我知道上面形式的代码不是并行的，并且本身不保证并行化。它是较长代码的一小部分统计信息收集部分的一部分。在该代码中，它被封装在线程索引特定的条件逻辑中以防止冲突（使其并行）并用作模拟程序的数据收集（保证并行化）。希望您能理解上述代码的来源，并避免对其缺乏线程安全性的讽刺评论。（此免责声明是根据过去的经验添加的，这些人不理解我发布的是摘录，而不是完整的代码，尽管我以不那么明确的术语写作。）

B.) 是的，我知道变量的名称不明确。这就是我想说的。我正在处理的代码是专有的，尽管它最终将是开源的。我之所以写这个，是因为我过去曾发布过类似的匿名代码，并且收到了关于我的命名约定的粗鲁评论。

C.) 是的，我已经多次阅读[CUDA 手册](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=3&ved=0CEoQFjAC&url=http://developer.download.nvidia.com/compute/DevZone/docs/html/C/doc/CUDA_C_Programming_Guide.pdf&ei=2veaT4C3MY3ggge94YSeDw&usg=AFQjCNHmEWQGwgVWa-5p7E0de38eFrEsPQ&sig2=reqbEyqoxc_FvVQm6ClI0A)，尽管我确实犯了错误，并且我承认有些功能我不理解。我在这里没有使用共享内存，但我在我的完整代码中使用了共享内存（当然）。

D.) 是的，上面的代码确实代表了与我的非工作代码的数据转储部分完全相同的功能，删除了与此特定问题无关的逻辑，并带有线程安全条件。变量名称已更改，但从算法上讲，它应该保持不变，并且通过完全相同的非工作输出（零）来验证。

E.) 我确实意识到`struct`上述代码段中的“动态”具有非动态值。我将结构命名为，因为在完整代码中，它`struct`包含模拟数据，并且是动态的。精简代码中的静态性质不应该使统计信息收集代码失败，它只是意味着每个转储的平均值应该是恒定的（并且非零）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T20:06:24.647

有几件事：

在为它调用 cudaMalloc 之前，您似乎在为 dev_MyVals 调用 cudaMemcpy。这不是应该的样子。

另外：当您进行 cudaMalloc 调用时，您不会乘以 sizeof int。

你真的应该检查你所有的 CUDA 调用 cudaMalloc/cudaMemcpy 是否有错误代码。它们都应该返回错误或 CUDA_SUCCESS。我相信 CUDA 示例都展示了如何做到这一点。

此外，为了将来参考永远不要在 CUDA 中使用模运算符，它非常慢。只需谷歌搜索“Modulo CUDA”即可获得一些替代方案。

让我知道它是怎么回事，这可能需要几次迭代才能修复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T08:03:09.863

我在这里看到的最大问题是范围之一。这段代码的编写方式使我得出结论，您可能不了解 C++ 中的变量作用域一般是如何工作的，尤其是设备和主机代码作用域在 CUDA 中是如何工作的。几点观察：

1.  当您在代码中执行此类操作时：

    ```
    ``__device__` double *dev_arrA, *dev_arrB;
    `__global__` void TEST(int step, double dev_arrA[], double dev_arrB[], ....)`
    ```

    `你有一个变量范围问题。`dev_arrA`在编译单元范围和函数范围都声明。这两个声明不引用同一个变量——函数单元范围声明（在内核中）优先于内核中的编译单元范围声明。您修改该变量，您正在修改内核范围声明，而不是`__device__`变量。这可能导致各种微妙和未明确的行为。最好避免*在*多个范围内声明相同的变量。`

`*   当您使用说明符声明变量时`__device__`，它旨在*专门用作设备上下文符号*，并且只能在设备代码中直接使用。所以是这样的：

    ```
    ``__device__` double *dev_arrA;
    int main()
    {
    ....
    cudaMalloc( (void**)&dev_arrA, statCnt*sizeof(double) );
    ....
    }`
    ```

    `是非法的。您不能像`cudaMalloc`直接在`__device__`变量上那样调用 API 函数。即使它会编译（因为主机和设备代码的 CUDA 编译轨迹中涉及黑客），但这样做是不正确的。在上面的例子`dev_arrA`中是一个设备符号。您可以通过 API 符号操作调用与它进行交互，但这在技术上是合法的。在您的代码中，旨在保存设备指针并作为内核参数（如`dev_arrA`）传递的变量应在`main()`范围内声明，并按值传递给内核。`` 

 `它是上述两件事的结合，可能会导致您的问题。

但困难在于您选择发布大约 150 行代码（其中很多是多余的）作为重现案例。我怀疑是否有人足够关心您的问题，以至于无法用细齿梳子检查那么多代码并查明确切的问题所在。此外，你习惯在你的问题中进行这些讨厌的“顶级编辑”，很快就会将可能合理编写的起点变成难以理解的伪变更日志，这些变更日志非常难以理解，而且不太可能对任何人有帮助。此外，温和的被动攻击性注释部分没有真正的目的——它没有为问题增加任何价值。

因此，我将为您提供您发布的代码的一个大大简化的版本，我认为它包含您正在尝试做的所有基本工作。我把它作为“读者练习”，把它变成你想要做的任何事情。

```
#include "stdio.h"

typedef float Real;
struct __align__(8) DynamicVals 
{ 
    Real a;
    int n1;
    int perDump;
};

__device__ int stepsA;
__device__ Real sumA;
__device__ int stepsN1;
__device__ int sumN1;

__global__ void TEST
(int step, Real dev_arrA[], int dev_arrN1[], DynamicVals *dev_myVals)
{
    if (step % dev_myVals->perDump)
    {
        dev_arrN1[step/dev_myVals->perDump] = 0;
        dev_arrA[step/dev_myVals->perDump] = 0.0;
        stepsA = 0;
        stepsN1 = 0;
        sumA = 0.0;
        sumN1 = 0;
    }

    sumA += dev_myVals->a;
    sumN1 += dev_myVals->n1;
    stepsA++;
    stepsN1++;

    dev_arrA[step/dev_myVals->perDump] += sumA / stepsA;
    dev_arrN1[step/dev_myVals->perDump] += sumN1 / stepsN1;
}

inline void gpuAssert(cudaError_t code, char *file, int line, 
                 bool abort=true)
{
   if (code != cudaSuccess) 
   {
      fprintf(stderr,"GPUassert: %s %s %d\n", cudaGetErrorString(code),
          file, line);
      if (abort) exit(code);
   }
}

#define gpuErrchk(ans) { gpuAssert((ans), __FILE__, __LINE__); }

int main() 
{
    const int TOTAL_STEPS = 1000;
    DynamicVals vals;
    int *arrN1;
    Real *arrA;
    int statCnt;

    vals.perDump = TOTAL_STEPS/10;
    statCnt = TOTAL_STEPS/vals.perDump;
    vals.a = 30000.0;
    vals.n1 = 10000;

    Real *dev_arrA;
    int *dev_arrN1;
    DynamicVals *dev_myVals;

    gpuErrchk( cudaMalloc( (void**)&dev_arrA, statCnt*sizeof(Real)) );
    gpuErrchk( cudaMalloc( (void**)&dev_arrN1, statCnt*sizeof(int)) );
    gpuErrchk( cudaMalloc( (void**)&dev_myVals, sizeof(DynamicVals)) );
    gpuErrchk( cudaMemcpy(dev_myVals, &vals, sizeof(DynamicVals), 
                cudaMemcpyHostToDevice) );

    arrA = (Real *)malloc(statCnt * sizeof(Real));
    arrN1 = (int *)malloc(statCnt * sizeof(int));

    for (int i=0; i< TOTAL_STEPS; i++) {
        TEST<<<1,1>>>(i, dev_arrA,dev_arrN1,dev_myVals);
        gpuErrchk( cudaPeekAtLastError() );
    }

    gpuErrchk( cudaMemcpy(arrA,dev_arrA,statCnt * sizeof(Real),
                cudaMemcpyDeviceToHost) );
    gpuErrchk( cudaMemcpy(arrN1,dev_arrN1,statCnt * sizeof(int),
                cudaMemcpyDeviceToHost) );

    for (int i=0; i< statCnt; i++)
    {
        printf("Step: %d   ; A=%g N1=%d\n",
                i*vals.perDump, arrA[i], arrN1[i] );
    }
} 
````

# php - 在定义时为属性设置别名

> ID：10356843
> 
> 赞同：2
> 
> 时间：2012-04-27T19:39:35.000
> 
> 标签：php, alias, instance-variables

以下代码在 PHP 5.3 中无效

```
class DatabaseConfiguration {

    public $development = array("user" => "dev");

    public $production = array("user" => "prod");

    public $default =& $this->development;

} 
```

似乎`$default`只能用编译时常量初始化。它在任何 php 文档中都有说明吗？`$default`不依赖构造函数可以这样初始化吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T19:42:07.607

从[PHP 文档](http://www.php.net/manual/en/language.oop5.properties.php)：

> 这个声明可能包括一个初始化，但是这个初始化必须是一个**常量值**——也就是说，它必须能够在编译时被评估，并且不能依赖于运行时信息才能被评估。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-11-08T13:02:41.567

您可以考虑使用一种方法来返回别名属性值……</p>

```
class DatabaseConfiguration
{    public $development = array("user" => "dev");

     public $production = array("user" => "prod");

     // Method to define $this->default property as an alias of $this->development
     private function default(){return $this->development;}

     public function __get($name)
     {    if(property_exists($this,$name)){return $this->$name;}
          if(method_exists($this,$name)){return $this->$name();}
          throw new ErrorException('This property does not exist',42,E_USER_WARNING);
     }
} 
```

# android - Facebook 在不打开对话框的情况下在墙上发布消息

> ID：10356846
> 
> 赞同：1
> 
> 时间：2012-04-27T19:40:06.083
> 
> 标签：android, facebook

我想在这条线上的墙上贴一条消息： ***mFacebook.dialog(FacebookActivity.this, "post", new SampleDialogListener());***

但我想在不打开对话框的情况下发布一条消息我试过这个但得到错误，上面写着 mFacebook.request 参数不匹配

***response = mFacebook.request("me/feed", parameters, "POST");***

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T21:35:24.667

要在没有对话框的情况下发布到墙上，您必须使用 graph-api。在目标的 userId 上/与目标的 userId 上执行提要发布。要执行 Post，您必须需要用户的 publish_stream 权限。权限请求返回的 accessToken 必须是后置参数之一。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T13:27:00.543

```
String response = mFacebook.request(Id+"/feed",bundle,HTTP_METHOD_POST); 
```

但是你必须在调用这个方法之前检查登录。因为它不能检查登录。登录代码，它是单点登录。

```
mFacebook.authorize(this, PERMISSIONS, Facebook.FORCE_DIALOG_AUTH, new ABCDialogListener()); 
```

和代码来检查会话是否有效

mFacebook.isSessionValid() 方法

# c# - CustomLineCap FillPath 而不是 StrokePath？

> ID：10356847
> 
> 赞同：0
> 
> 时间：2012-04-27T19:40:13.333
> 
> 标签：c#, drawing2d

我正在尝试为 Paint.Net 编写插件，但为了获得支持，我目前正在使用 C# 在 Visual Studio 2010 中编写代码。我想要实现的是制作曲线并为其制作自定义线帽。我通过编写以下代码实现了主要功能；

```
SolidBrush myBrushColor1 = new SolidBrush(Amount4);
Pen myPen = new Pen(myBrushColor1, Amount7);
System.Drawing.Point[] pts = { new System.Drawing.Point(0,0), new System.Drawing.Point(0,3), new System.Drawing.Point(3, 0)};
System.Drawing.Drawing2D.GraphicsPath path = new System.Drawing.Drawing2D.GraphicsPath();
path.AddPolygon(pts);
System.Drawing.Drawing2D.CustomLineCap lineCap = new System.Drawing.Drawing2D.CustomLineCap(null, path);

Rectangle arcRect = new Rectangle(0,0,100,100);
g.DrawArc(myPen, arcRect , -90, 90); 
```

这正是我想要实现的，但我想填充作为 CustomEndCap 创建的多边形。现在它被绘制为轮廓。我用谷歌搜索了它，发现我必须更改`CustomLineCap(null, path);` 为`CustomLineCap(path, null);`

我更改了代码并将路径提供为 fillpath 并将 null 作为 strokepath 但它开始给出异常“创建表单时发生错误。有关详细信息，请参阅 Exception.InnerException。错误是：未实现”。

我需要在这里做什么？

# java - Java 在共享位置打开文件

> ID：10356849
> 
> 赞同：1
> 
> 时间：2012-04-27T19:40:23.710
> 
> 标签：java, file-io, applet

我想做这样的事情：

文件根 = new File("C:/file.txt");

但是在本地网络上共享的文件夹上。那么假设文件位于 192.168.1.28 上，如何使用上述命令制作它？

接下来不工作：

`File root = new File("//192.168.1.2/file.txt");`

`File root = new File("\\\\192.168.1.2/file.txt");`

`File root = new File("\\192.168.1.2/file.txt");`

`File root = new File("file:\\192.168.1.2/file.txt");`

`File root = new File("file://192.168.1.2/file.txt");`

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T19:44:42.287

我认为这是可能的。但是，您需要首先使用例如 Samba 挂载共享 - 更多信息在这里 - [java 从网络设备读取文件](https://stackoverflow.com/questions/1682194/java-read-file-from-network-device)

希望能帮助到你

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T19:47:54.463

您可以使用[Apache Commons VFS](http://commons.apache.org/vfs/)。它是一个库，允许您在各种文件系统上操作文件，其中一个非常适合您的需要是 CIFS 文件系统：

> 提供对 CIFS 服务器（例如 Samba 服务器或 Windows 共享）上文件的访问。
> 
> URI 格式
> 
> smb://[ 用户名[: 密码]@] 主机名[: 端口][ 绝对路径]
> 
> 例子
> 
> ```
> smb://somehost/home 
> ```

CIFS 文件系统的提供程序仍在开发中，但您可以尝试一下。我已经使用该库通过 http 和 ftp 协议提供对文件的透明访问。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T19:43:49.560

单独的 Java 不支持网络文件共享，因为您提供的代码正在尝试这样做。

但是如果你使用像[Samba](http://jcifs.samba.org/)这样的库，那么你可以。但这与您显示的代码不同。

[java从网络设备读取文件](https://stackoverflow.com/questions/1682194/java-read-file-from-network-device)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-27T19:46:14.147

Java 只是不支持网络文件共享

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-05-28T18:58:21.383

使用 Java 1.8，您可以使用 Java 访问共享位置上的文件。假设您要访问共享位置上名为 (Sample.xls) 的 .xls 文件。

```
String location = "\\\your.shared.location.company.com\\folder1\\folder2\\";
String fileName = "Sample.xls";
FileInputStream fis = new FileInputStream(location + fileName); 
```

# jquery - Jquery为每个最接近，计算和替换值

> ID：10356851
> 
> 赞同：1
> 
> 时间：2012-04-27T19:40:48.543
> 
> 标签：jquery

我在尝试替换计算值时遇到了一些麻烦。在此函数中，我们尝试使用隐藏文本框的值计算折扣并将原始价格替换为新的折扣值。我可以获得折扣和价值，但它不会将价值替换到 div 中。我认为我的“最接近”不起作用...任何想法我在这里做错了什么。

```
$(document).ready(function() {
    $("#cal_discount").click(function() {

        $(".price_val").each(function() {
            var Percent = $('#percent_dis').val();
            var price = $(this).val();
            var existing = $(this).closest('.existing_price');
            var new_price = (price - (price * (Percent / 100)));
            var formatted = new_price.toFixed(2);
            existing.text(formatted);
        });
    });
});

<div class="existing_price" style="float:left">22</div>
<input  type="hidden"  class="price_val" value="22" />

<input name="percent_dis" type="text" id="percent_dis" size="3" /> %      <img src="admin/images/btn/cal_discount.png" width="97" height="17" style="float:left; margin-right:10px; margin-top:5px; cursor:pointer" id="cal_discount" /> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T19:45:39.740

问题在于`</div>`22之后的不应该在那里..

`.closest()`向上 DOM 层次结构.. 向上意味着祖先......

所以它寻找与选择器匹配的第一个祖先..

因为`.price_val`它不在里面`.existing_price`它不会找到它..

将您的代码更改为

```
<div class="existing_price" style="float:left">
  <span class="value">22</span>
  <input  type="hidden"  class="price_val" value="22" />
</div> 
```

和js

```
 $(".price_val").each(function() {
        var Percent = $('#percent_dis').val();
        var price = $(this).val();
        var existing = $(this).siblings('.value');
        var new_price = (price - (price * (Percent / 100)));
        var formatted = new_price.toFixed(2);
        existing.text(formatted);
    }); 
```

会解决这个问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T19:47:27.767

您需要的`.prev`不是最接近的，即如果 prev 元素始终是`div.existing_price`

尝试

```
var existing = $(this).prev(); //should return div for your existing markup 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T19:47:52.163

Closest 仅在元素是后代而不是兄弟元素时才有效 - 请`prev`改用。

# javascript - 使用 Json.Net 将 javascript 关联数组反序列化为 C# 字典

> ID：10356853
> 
> 赞同：2
> 
> 时间：2012-04-27T19:41:01.043
> 
> 标签：javascript, .net, json, serialization, json.net

我曾经`JSON.stringify()`在 cookie 中存储一个带有布尔值的整数键的 javascript 关联数组，例如`var arr = {}; arr[9000001] = True;`。我可以在服务器上看到以下格式的字符串值：`%7B%229000001%22%3Atrue%2C%229000003%22%3Atrue%2C%229000006%22%3Atrue%2C%229000009%22%3Atrue%7D`其中第一个数字是 9000001，第二个是 9000003，依此类推。

我想使用[Json.Net](http://json.codeplex.com/)反序列化成一个`Dictionary<long,bool>`或类似的。我尝试以下

```
var result = JsonConvert.DeserializeObject<Dictionary<string, string>>(cookieValue); 
```

但得到以下异常

```
{"Unexpected character encountered while parsing value: %. Path '', line 0, position 0."} 
```

我猜在这种情况下无法进行反序列化？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T19:57:45.900

Frits van Campen 找到了丢失的部分。我编写了以下扩展方法，可以轻松地在 C# 中检索 cookie 值。同时设置`urlDecode`和`fromJson`，`true`对象将被成功反序列化。

```
/// <summary>
/// retrieve object from cookie
/// </summary>
/// <typeparam name="T">type of object</typeparam>
/// <param name="controller"></param>
/// <param name="cookieName">name of cookie</param>
/// <param name="urlDecode">true to enable url decoding of the string</param>
/// <param name="fromJson">true if the string in cookie is Json stringified</param>
/// <returns>object in the cookie, or default value of T if object does not exist</returns>
public static T GetFromCookie<T>(this Controller controller, string cookieName, 
                                 bool urlDecode = true, bool fromJson = false)
{
    var cookie = controller.HttpContext.Request.Cookies[cookieName];
    if (cookie == null) return default(T);
    var value = cookie.Value;

    if (urlDecode)
        value = Uri.UnescapeDataString(value);

    T result;
    if (fromJson)
        result = JsonConvert.DeserializeObject<T>(value);
    else
        result = (T)Convert.ChangeType(value, typeof(T));

    return result;
} 
```

# java - Eclipse 找不到/加载主类

> ID：10356854
> 
> 赞同：32
> 
> 时间：2012-04-27T19:41:20.617
> 
> 标签：java, eclipse

我的 Eclipse (Indigo) 运行良好。我创建了一个简单的类`Hello`。它被放置在`cont`文件夹中的包中`ch13`。但是，当我尝试从 Eclipse 运行它时，我会从 Java Virtual Machine Launcher 获取信息：

```
Could not find the main class: cont.Hello. 
```

我试图从这个包中运行其他类，它们运行得很好（那是以前存在的类）。然而，我在这个包中创建的任何新类都有这些问题。实际上，我在 Eclipse 中创建的任何新类都会遇到这个问题。我决定从命令行检查它是如何工作的。似乎问题仍然存在 - 我得到同样的错误。我检查了路径，它`C:\Program Files\Java\jdk1.7.0_02\bin`是正确的（注意其他类都可以从 Eclipse 运行）。我尝试运行，`java -cp . Hello`并产生了一些以`java.lang.NoClassDefFoundError: Hello (wrong name: cont/Hello)`. 代码本身很简单：

```
package cont;

public class Hello {
    public static void main(String[] args){
        System.out.println("Hello");
    }

} 
```

如何修复它以便我的类仍然在 Eclipse 下运行？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-09-13T05:13:09.500

`.metadata`已损坏。

脚步：

**警告：删除 .metadata 将删除所有 Eclipse 配置、插件、项目设置。在尝试此操作之前进行备份！**

1.  停止 eclipse，删除工作区中的 .metadata 并重新启动 eclipse

2.  导入项目

3.  再次运行

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-04-27T20:37:41.887

*   ### 删除运行配置

    **有时我在eclipse**的一些预发布版本中也有类似的问题。为了修复错误，我删除了**Run Configuration**。您可以在菜单**Run**，**Run Configurations** ...中找到它

    然后我用`Alt`++启动应用`Shift`程序`X`，然后`J`. 如果这不起作用，`Ctrl`+ `F11`。

*   ### 删除`.metadata`目录

    另一方面，您当前工作区的配置设置可能已损坏。这些设置位于`.metadata`当前工作区^(**1**)的目录中。在这种情况下，除了删除目录之外别无选择：

    1.  关闭**日食**。
    2.  删除`.metadata`目录。
    3.  开始**日食**。
    4.  导入项目。
    5.  再次运行项目。

* * *

*笔记*

1.  您将看到该目录的**文件**>**切换工作区**>**其他...**

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2014-01-09T05:58:10.070

我已经通过以下方式解决了这个问题：

转到运行配置（右键单击 Java 文件->运行->运行配置）。

转到 ClassPath 选项卡：单击高级 -> 添加文件夹 -> 添加 bin 目录（其中包含 Java 源代码的类文件）

重新运行代码，现在它会解决问题。它对我有用

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2018-07-15T16:51:31.433

**注意：**这在过去很有效，我收到了很多赞成票。也许这不再是一个解决方案 - 但它曾经是 - 正如 eclipse 版本所指出的那样。

* * *

# 问题

这也可能是由 Java 构建路径问题引起的。

就我而言，我有一个错误：

### `A cycle was detected in the build path of project {project}. The cycle consists of projects {x, y, z}.`

当您在要运行的项目的构建路径中包含其他项目时，可能会发生这种情况。实际上，所有项目都将无法运行并出现错误 `Could not find the main class: Example.class`

* * *

# 解决方案

### 打开

### `Windows`-> `Preferences`-> `Java`-> `Compiler`-> `Building`->`Build Path Problems`

### **取消**选中**`Abort build when build path errors occur`切换**

 **如果您最终遇到我想象的其他构建路径错误，这似乎是一罐蠕虫。所以**谨慎使用**。

* * *

*   *注意：这仅在您有“循环错误”时才有效。此错误消息可在“标记”选项卡中找到*

[我在这里](https://stackoverflow.com/questions/1084866/a-cycle-was-detected-in-the-build-path-of-project-xxx-build-path-problem)找到了解决方案

* * *

*信息*

*   Java 1.8.0_152
*   Eclipse Photon（2018 年 6 月）

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-09-09T15:35:39.820

你必须在你的类中有 main 函数。喜欢

```
public class MyDataBase {

    public static void main(String args[]) {

    }
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-08-22T08:14:35.827

重命名主类就足够了（也是最简单的）：
- 转到您的班级并将光标设置为您的班级名称；
- ALT + Shift + R 并重命名类（如果没有自动完成，则构建）；
- 你现在应该可以运行它了；
- 如果需要，将课程重命名为旧名称；

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-12-07T16:46:45.750

我在 Maven 项目中遇到了同样的问题。在项目中创建 src/test/java 文件夹后，错误消失了。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-05-13T09:38:37.697

另一个提示：我以错误的顺序初始化静态字段 - 令人惊讶的是它没有提出问题（NullPointerException？），而是 Eclipse 准确地抱怨了 OP 发布的消息。更正静态初始化顺序使类可以运行。例子：

```
private static ScriptEngineManager factory = null;
private static ScriptEngine engine = null;
static {
    engine = factory.getEngineByName("JavaScript");
    // factory is supposed to initialize FIRST
    factory = new ScriptEngineManager();
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-10-29T14:48:14.950

我通过关闭项目、将其从 Eclipse 中删除然后再次导入来解决了这个错误。

可能比重做整个工作区设置要简单一些。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-01-31T15:11:01.187

升级到 Eclipse 2019-12 版本后，我遇到了这个问题。不知何故，启动 JVM 的命令行太长了，我不得不在运行配置中启用 jar-classpath 选项（右键单击文件 -> 运行方式 -> 运行配置）。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-09-05T08:10:09.913

我发现解决这个问题的方法是重命名项目。如果你给它起一个带有奇怪字符的名字（在我的例子中是:)，它会很难找到你的班级。我不知道这条规则是否适用于数字，但请尝试重命名项目或创建一个新项目并复制文件。不带任何数字或特殊字符的名称。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2020-10-09T10:05:22.143

我阅读了很多博客并尝试了很多技巧，但我的问题没有解决。我能够运行代码但无法生成 jar 文件。:( 伤心..

但是我尝试了一些可能非常愚蠢但对我有用的东西，并在跟踪中购买了 eclipse。我所做的是..只是从类中删除了主要方法。保存了它。撤消以将主要课程带回来。多田...问题已解决...只想说，让您的日食保持在“自动构建”模式。

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2014-03-07T14:33:28.810

在 lib 目录中可以有 2 个 groovy-xxx-all.jar 文件。这使得应用程序没有运行

* * *

## 回答 #14

> 赞同：-1
> 
> 时间：2012-04-27T19:43:25.520

将文件移动到名为 cont 的子目录中

* * *

## 回答 #15

> 赞同：-1
> 
> 时间：2014-04-26T20:20:43.770

我有同样的问题，这是我的解决方案：

1.  我手动删除了项目的bin文件夹
2.  然后我刷新了重新编译整个项目的项目并创建了一个包含所有 .class 文件的新 bin

我这样做是因为当我执行 Clean(project->clean) 时，我的 .class 文件没有被删除。上述解决方案对我有用，希望对其他人有用。

* * *

## 回答 #16

> 赞同：-1
> 
> 时间：2013-02-28T17:14:41.583

Eclipse 的标准故障排除步骤应包括在某些时候删除和重新导入项目，当我处理此错误时，这些步骤已经奏效。

* * *

## 回答 #17

> 赞同：-1
> 
> 时间：2015-04-09T14:58:53.040

如果您使用的是预定义的运行配置，请转到类路径并尝试“恢复默认条目”。这将为该配置重新配置类路径。

* * *

## 回答 #18

> 赞同：-1
> 
> 时间：2014-02-25T02:34:43.557

我通过这样做解决了我的问题：

*   将整个主要课程（CTRL X）从课程中删除（仅几秒钟），
*   保存类文件 (CTRL S)
*   将主要的背面完全粘贴在同一位置（CTRL V）

奇怪的是，它在那之后又开始工作了。

* * *

## 回答 #19

> 赞同：-1
> 
> 时间：2014-08-26T18:54:36.073

我有同样的问题。我用以下命令 Maven 解决了：

mvn eclipse:eclipse -Dwtpversion=2.0

PS：我的项目是WTP插件

* * *

## 回答 #20

> 赞同：-1
> 
> 时间：2017-07-18T03:23:50.007

这最终对我有用：运行-> 运行配置-> 删除运行配置关闭 ECLIPSE 重新打开 ECLIPSE 再次创建运行配置。

塔达啊！！有用**

# drupal - 如何处理大量相互关联的数据

> ID：10356862
> 
> 赞同：3
> 
> 时间：2012-04-27T19:42:23.790
> 
> 标签：drupal, drupal-7

目前我在 MySQL 中有一个数据库结构，其中有几十个表，其中有各种外键链接。所有数据都在我要加载的文件中，所以我希望我可以将设计移植到与 Drupal 7 一起使用的存储系统，因为我可以简单地设置一些东西（使用 Feeds 模块？）以 Drupal 7 喜欢的方式获取我的数据。这样做的最终目的是进行大量人工人工修改，将表中的条目与关系链接在一起，并可能修改一些看起来错误的字段数据。所以整个目标是在 Drupal 7 中创建用于查看和编辑（特别是添加）关系的人机界面。问题是，存储数据的正确方法是什么，所以我必须根据需要编写尽可能少的模块代码？

在我看来，我会选择 3 个模块之一来完成这项任务：

*   关系
*   实体参考
*   数据

关系和实体引用将允许我将所有数据存储在 Drupal 7 中的节点（实体？）中，因此 Drupal 将拥有处理所有内容的“本地支持”。但是，我预计会有数以亿计到数十亿个节点，每个节点与其他节点的关系可能高达约 3 个。当使用 View 等引用外部数据（并且可能从该引用中获取引用的数据等）时，关系或实体引用如何有效地处理这个问题？他们是否可以支持具有空引用的节点，因为在用户可以设置它们之前，许多节点都是空的（所以我需要一种方法来查找具有特定空引用的节点）？

数据是另一种可能性，但它处于 alpha 阶段，我想知道它的稳定性和效率。在我看来，将我的所有数据存储在外部 MySQL 数据库中而不是 Drupal 节点中，这也违背了使用 Drupal 的全部目的。我对此的感觉正确吗？

我很难确定管理内容所需的内容，考虑到 Drupal 7 是一个 CMS，这似乎很奇怪。我必须在这里遗漏一些东西，但我不确定它是什么。什么是最成熟的模块（s？）用于处理/与大量相互关联的数据进行交互并能够通过并让用户主要设置和管理“表”之间的链接（即“外键”） ”，也许还有现场数据审查和修订？有没有足够的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T11:51:46.447

> 关系和实体引用将允许我将所有数据存储在 Drupal 7 中的节点（实体？）中，因此 Drupal 将拥有处理所有内容的“本地支持”。但是，我预计会有数以亿计到数十亿个节点，每个节点与其他节点的关系可能高达约 3 个。当使用 View 等引用外部数据（并且可能从该引用中获取引用的数据等）时，关系或实体引用如何有效地处理这个问题？

如果您需要显示数据，其他模型将无济于事。您可能需要一些分页或为您的查询提供最大递归深度以仅加载您感兴趣的实体。我想使用已经支持的东西将为您节省大量工作。

没有基准，您几乎找不到瓶颈。所以走最简单的方法，似乎是实体引用并根据需要进行优化。您可以创建一些测试数据以尽早发现限制。但是肯定会有办法在以后优化请求。

# c# - 带有投影比较器的 LINQ OrderBy 匿名对象

> ID：10356864
> 
> 赞同：8
> 
> 时间：2012-04-27T19:42:37.037
> 
> 标签：c#, linq, icomparer

我一直在尝试`OrderBy`使用 LINQ 语句来处理匿名对象，但现在失败了。

我已经检查了这些：
[匿名 IComparer 实现](https://stackoverflow.com/questions/5288963/anonymous-icomparer-implementation)
[C# linq sort - 实例化 IComparer 的快速方法](https://stackoverflow.com/questions/1381564/c-sharp-linq-sort-quick-way-of-instantiating-icomparer)
[如何在 C# 中按特定字段对对象数组进行排序？](https://stackoverflow.com/questions/1301822/how-to-sort-an-array-of-object-by-a-specific-field-in-c/1302185#1302185)

我花了几个小时尝试不同的方法，但一定有我遗漏的东西。

假设有以下课程：

```
public class Product
{
   public int Id {get; set;}
   public string Name {get; set;}
   public int Popularity {get; set;}
   public decimal Price {get; set;}
} 
```

并且`products`是这些对象的列表。

如何完成此 LINQ 语句，以便它与匿名对象一起使用？
需要明确的是，我知道我可以以不同的方式做到这一点，但我非常有兴趣学习如何使这个特定的例子工作。

```
var sortedProducts = products
                       .OrderBy(p => 
                              new {p.Popularity, p.Price}, 
                              [IComparer magic goes here]); 
```

似乎应该可以实现`ProjectionComparer`：
[http ://code.google.com/p/edulinq/source/browse/src/Edulinq/ProjectionComparer.cs?r=0c583631b709679831c99df2646fc9adb781b2be](http://code.google.com/p/edulinq/source/browse/src/Edulinq/ProjectionComparer.cs?r=0c583631b709679831c99df2646fc9adb781b2be)

任何想法如何做到这一点？

更新：

我对此进行了快速性能测试 - 匿名比较器解决方案与标准 orderby.thenby 解决方案似乎匿名解决方案相当慢，这可能是我们可能已经预料到的。

```
 numProd  | Anon    | chained orderby clauses
         10 000   | 47 ms   | 31 ms
         100 000  | 468 ms  | 234 ms
         1 000 000| 5818 ms | 2387 ms
         5 000 000| 29547 ms| 12105 ms 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-27T19:59:23.153

您可以创建一个`IComparer<T>`使用您为比较提供的委托的实现，并使用类型推断对其进行实例化（类似于“通过示例进行转换”）：

```
static class AnonymousComparer
{
    public static IComparer<T> GetComparer<T>(T example, Comparison<T> comparison)
    {
        return new ComparerImpl<T>(comparison);
    }
    private class ComparerImpl<T> : IComparer<T>
    {
        private readonly Comparison<T> _comparison;
        public ComparerImpl(Comparison<T> comparison) { _comparison = comparison; }
        public int Compare(T x, T y) { return _comparison.Invoke(x, y); }
    }
} 
```

并这样使用它：

```
var comparer = AnonymousComparer.GetComparer(
    new { Popularity = 0, Price = 0m },
    (a, b) => //comparison logic goes here
    );

var sortedProducts = products
    .OrderBy(p =>
        new { p.Popularity, p.Price },
        comparer); 
```

编辑：我刚刚查看了您链接到的投影比较器页面。使用这种方法，您不需要类型推断的“示例”参数。然而，该方法仍然需要进行调整，以采用委托而不是接口。这里是：

```
//adapted from http://code.google.com/p/edulinq/source/browse/src/Edulinq/ProjectionComparer.cs?r=0c583631b709679831c99df2646fc9adb781b2be
static class AnonymousProjectionComparer
{
    private class ProjectionComparer<TElement, TKey> : IComparer<TElement>
    {
        private readonly Func<TElement, TKey> keySelector;
        private readonly Comparison<TKey> comparison;

        internal ProjectionComparer(Func<TElement, TKey> keySelector, Comparison<TKey> comparison)
        {
            this.keySelector = keySelector;
            this.comparison = comparison ?? Comparer<TKey>.Default.Compare;
        }

        public int Compare(TElement x, TElement y)
        {
            TKey keyX = keySelector(x);
            TKey keyY = keySelector(y);
            return comparison.Invoke(keyX, keyY);
        }
    }

    public static IComparer<TElement> GetComparer<TElement, TKey>(Func<TElement, TKey> keySelector, Comparison<TKey> comparison)
    {
        return new ProjectionComparer<TElement, TKey>(keySelector, comparison);
    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-27T19:53:30.553

你真的不需要匿名对象来通过populartiy降序然后价格来订购这些对象，你可以结合使用OrerBy和ThenBy，比如：

```
var sortedProducts = products.OrderByDescending(p => p.Popularity)
    .ThenBy(p => p.Price); 
```

要`IComparer<T>`对匿名类型执行操作，最好使用工厂从委托构造一个并使用类型推断（在没有推断的情况下指定匿名类型很痛苦！）。

您可能想衡量纯粹为排序而创建匿名对象的性能影响，但 Phoogs 的回答提供了一种使用`Comparison<T>`委托`IComparer<T>`即时构建的好方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T19:54:22.207

不完全是一个答案......但评论太长了：很难创建明智的通用比较器。

虽然通过单个属性对对象建立了良好的比较关系，但对于多个甚至两个属性则没有这样的事情。即，当您尝试在平面上对点进行排序时，这是一个非常常见的问题：只有 2 个值 (x,y) 但没有办法说 (x1,y1) < (x2,y2) 所以每个人都同意它。

在大多数情况下，您最终会说按属性 1 排序，而不是按属性 2，... 或将所有属性映射到单个值（即通过简单地将所有属性相乘）。这些方法很容易表达，不需要 LINQ 中的通用比较器：

*   使用链式 OrderBy(attr1).OrderBy(attr2).... 按属性排序
*   按指标 OrderBy(attr1 * attr2) （或对象上的任何其他[指标）排序](http://en.wikipedia.org/wiki/Metric_%28mathematics%29)

# android - ADT 更新后无法构建 Eclipse 库项目

> ID：10356866
> 
> 赞同：0
> 
> 时间：2012-04-27T19:42:39.407
> 
> 标签：android

我有一个在 Eclipse 下为 Android 开发的主项目（mainapp）。它使用 facebook-android-sdk 库 (fblib)，这是一个单独的 Eclipse 项目，其项目属性被选中为“库”。在 mainapp 的项目属性 > android 部分下，我将 fblib 添加为库。一切正常。

我需要创建一个新版本的 mainapp，它使用不同的数据库文件（assets 子目录）。为此，我创建了一个新的 Eclipse 项目（newapp）并将 mainapp 设置为项目属性 > android 下的库。

在最新的 ADT 更新之前一切正常。我在尝试构建/运行 newapp 时遇到错误（转换为 Dalvik 格式失败，错误 1）。如果我转到 mainapp 并从项目属性 > android 中取消选中“库”，我可以将 mainapp 构建为常规应用程序，它似乎工作得很好。

我在项目目录中搜索了多个 jar 文件，将 proguard 更新为 4.8beta，删除/添加 jar 到构建路径，删除导出，添加导出，删除依赖项，添加“lib”目录，清理，重新启动，重新启动等等其他任何谷歌都会出现，但无济于事。

使用 ADT 16 一切正常，所以我在这里真的很困惑。是否已将库项目添加到还包含库项目的应用程序中以某种方式被弃用？我似乎无法让这个工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T19:44:44.307

新的 ADT 让您将其称为“libs”而不是 lib。重命名您的目录，看看是否可以修复它

参考：[http ://code.google.com/p/android/issues/detail?can=2&start=0&num=100&q=&colspec=ID%20Type%20Status%20Owner%20Summary%20Stars&groupby=&sort=&id=27490](http://code.google.com/p/android/issues/detail?can=2&start=0&num=100&q=&colspec=ID%20Type%20Status%20Owner%20Summary%20Stars&groupby=&sort=&id=27490)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T19:46:49.093

我也注意到在我自己的项目中，在 Java Build Path > Order and Export 下，有时我需要进入并确保我所有的链接源都选中了它们的框。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-03T15:25:47.437

我有类似的问题。问题是由于引入了“Gradle”的不同构建系统。

解决方法：强行打开Android SDK Manager，并更新安装 1.Android SDK Build Tools 第17版 2.Android SDK平台工具第17版 3.Android SDK工具第17版

在所有库项目中，不要忘记启用“Android Private Libraries”属性-> 排序和导出中的复选框。

谢谢。

# c# - WPF 按代码编辑模板列

> ID：10356868
> 
> 赞同：0
> 
> 时间：2012-04-27T19:42:49.577
> 
> 标签：c#, wpf, wpfdatagrid

我正在尝试通过代码编辑模板化 DataGrid 列内的 StackPanel 的内容。不幸的是，我无法从代码中找到 StackPanel。有人可以帮我吗？

这是我的数据模板：

```
<UserControl.Resources>
    <DataTemplate x:Key="ReservationContainerTemplate">
        <StackPanel Orientation="Horizontal" Background="Black" />
    </DataTemplate>
</UserControl.Resources> 
```

这就是我创建此列的方式：

```
var colReservations = new DataGridTemplateColumn();

colReservations.Header = "Nordplatz";

DataTemplate dt = null;
dt = dataGrid1.FindResource("ReservationContainerTemplate") as DataTemplate;

colReservations.CellTemplate = dt;
dataGrid1.Columns.Add(colReservations); 
```

我需要做的是，在 DataTemplate 中写入这个 StackPanel。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T20:49:26.757

我能够通过以下代码获取对象：

```
 DataRowView n = (DataRowView)dataGrid1.Items[i];
        //var m = dataGrid1.SelectedItem.Cells[0].Text;

        DataTemplate Template = dataGrid1.FindResource("ReservationContainerTemplate") as DataTemplate;
        StackPanel stp = Template.LoadContent() as StackPanel; 
```

太好了，我有我的对象，但我该如何修改它？在这种情况下，我只有一个对象的副本，更改不会反映到原始对象。

有人有想法吗？

# css - 在 CSS 中，如何使彩色背景至少为页面宽度的 50%，最多为 90%，并尽可能宽？

> ID：10356869
> 
> 赞同：0
> 
> 时间：2012-04-27T19:42:54.103
> 
> 标签：css, background, styles, width

在 CSS 中，如何使彩色背景至少为页面宽度的 50%，最多为 90%，并尽可能宽？

```
<pre><code> .....................
adsfdasgsfdgsfdgfsdgdsfg
adgsfdgfsdgsfd
</code></pre> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T19:46:45.297

您可能想尝试[max-width](http://www.w3schools.com/cssref/pr_dim_max-width.asp)和[min-width](http://www.w3schools.com/cssref/pr_dim_max-width.asp)。

因此，您可以将 min-width 设置为 50%，将 max-width 设置为 90%。

这样，您的元素将始终介于 50% 到 90% 之间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T19:52:06.547

## HTML

```
<pre class="somebackground"><code>...</code></pre> 
```

## CSS

```
<style type="text/css">
.somebackground {
 background:red;
 display:inline-block; /* Changes block elements to only be 50% */
 min-width:50%;
 max-width:90%;
}
</style> 
```

请参阅[jsFiddle 演示](http://jsfiddle.net/DvdQ9/)。

# python - 我应该如何在 Python 应用程序中存储 API 密钥？

> ID：10356870
> 
> 赞同：8
> 
> 时间：2012-04-27T19:42:56.920
> 
> 标签：python, api, dropbox-api, api-key

就我而言，我使用的是 Dropbox API。目前我将密钥和秘密存储在 JSON 文件中，以便我可以 gitignore 并将其保留在 Github 存储库之外，但从安全角度来看，显然这并不比将其包含在代码中更好。之前有很多关于保护/混淆 Python 的问题（通常是出于商业原因），答案总是“不要，Python 不是为了那个”。

因此，我不是在寻找一种保护代码的方法，而只是在寻找一种解决方案，让我可以在不泄露我的 API 详细信息的情况下分发我的应用程序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T21:03:06.323

纯文本。如果代码被分发，任何混淆尝试都是徒劳的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T10:21:06.193

根据您的情况，有两种方法：

如果您正在为最终用户开发 Web 应用程序，只需以您的 API 密钥不会泄露的方式托管它。因此，将其 gitignored 保存在单独的文件中并仅将其上传到您的服务器应该没问题（只要您的服务器没有违规）。任何混淆都不会增加任何实际好处，只会给人一种虚假的安全感。

如果您正在为开发人员开发框架/库或为最终用户开发客户端应用程序，请让他们自己生成 API 密钥。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-28T03:40:11.213

不知道这在您的情况下是否可行。但是您可以通过您托管的代理访问 API。

来自 Python APP 的请求转到代理，代理向 Dropbox API 发出请求并将响应返回给 Python 应用。这样，您的 api 密钥将位于您托管的代理上。可以通过您喜欢的任何方式控制对代理的访问。（例如用户名和密码）

# gwt - 在选项卡控件下的工具条上包含一个按钮

> ID：10356872
> 
> 赞同：0
> 
> 时间：2012-04-27T19:43:07.747
> 
> 标签：gwt, smartgwt

当我在选项卡控件中分配工具条上的按钮时，应用程序只是待机并且不会响应。这是我的代码：

```
 ToolStrip toolStrip_3 = new ToolStrip();
    toolStrip_3.setWidth100();
    toolStrip_3.setHeight("20px");
    toolStrip_3.setReverseOrder(true);

    ToolStripButton button = new ToolStripButton(CONSTANTS.notesAddButton_title());
    toolStrip_3.addButton(button);
    conflictLayout.addMember(toolStrip_3); 
```

当我注释掉这一行时：

```
//conflictLayout.addMember(toolStrip_3); 
```

该应用程序没有问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T12:20:55.530

尝试使用：

```
toolStrip_3.setHeight(20); 
```

代替 ：

```
toolStrip_3.setHeight("20px"); 
```

# jquery - Fancybox 和其他 JQuery 之间的冲突

> ID：10356879
> 
> 赞同：0
> 
> 时间：2012-04-27T19:43:38.650
> 
> 标签：jquery, slider, fancybox

我正在使用 3 个不同的 JQuery 插件来构建网站。

*   [http://web-kreation.com/demos/Sliding_login_panel_jquery/](http://web-kreation.com/demos/Sliding_login_panel_jquery/)
*   [http://www.thewebsqueeze.com/web-design-tutorials/create-a-horizo​​ntal-scrolling-website.html](http://www.thewebsqueeze.com/web-design-tutorials/create-a-horizontal-scrolling-website.html)
*   链接3：http://fancyapps.com/fancybox/

但是，有一个小问题。前 2 个插件很好地协同工作，但是当我插入 Fancybox 时，其中一个插件（主要是 Fancybox，但有时是滑动登录）将被禁用，并且其行为就像没有 JQuery 时一样。

```
<!-- PNG FIX for IE6 -->
<!-- http://24ways.org/2007/supersleight-transparent-png-in-ie6 -->
<!--[if lte IE 6]>
    <script type="text/javascript" src="js/pngfix/supersleight-min.js"></script>
<![endif]--> 
<script type='text/javascript' src='http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js'></script>
<script src="js/jquery.localscroll-min.js" type="text/javascript"></script>
<script src="js/jquery.scrollTo-min.js" type="text/javascript"></script>
<script type="text/javascript" src="js/jquery.fancybox.js?v=2.0.6"></script>
<script type="text/javascript" src="js/jquery.mousewheel-3.0.6.pack.js"></script>

<script type="text/javascript">
$(document).ready(function () {

    $.localScroll.defaults.axis = 'x';
    $.localScroll();

    // Expand Panel
    $("#open").click(function(){
        $("div#panel").slideDown("slow");

    }); 

    // Collapse Panel
    $("#close").click(function(){
        $("div#panel").slideUp("slow"); 
    });     

    // Switch buttons from "Log In | Register" to "Close Panel" on click
    $("#toggle a").click(function () {
        $("#toggle a").toggle();
    });

    $("a.fancybox").fancybox();
});
</script> 
```

这是链接：

```
<a class="fancybox" href="http://www.google.nl?id=<? echo $selectusers2['UID'] ?>" title="<? echo $selectusers2['test']." ".$selectusers2['test']." ".$selectusers2['test']; ?>"><? echo abbreviation($selectusers2['test']." ".$selectusers2['test']." ".$selectusers2['test'],17,'...'); ?></a><br /> 
```

我希望有人会知道为什么这些是冲突的并喜欢解决它:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T05:36:17.953

Fancybox v2.x 需要 jQuery v1.6 或更高版本。升级你的 jQuery 版本

你可以用这个调用最新版本的jQuery

```
<script src="http://code.jquery.com/jquery-latest.js"></script> 
```

# ios - xcodebuild，缺少 iOS 模拟器 sdk

> ID：10356880
> 
> 赞同：7
> 
> 时间：2012-04-27T19:43:46.723
> 
> 标签：ios, xcode, xcodebuild

我正在自动化 iOS 项目的构建过程。一切都很好......但现在我必须支持 iOS 4，我安装的是 iOS 模拟器 4.3（Xcode：首选项 > 下载 > 组件）。

在 xcode 中，我有以下选项：

*   iOS 设备
*   iPad模拟器5.0
*   iPad模拟器5.1
*   iPhone模拟器5.0
*   iPhone模拟器5.1

**没有**4.3

从命令行

```
$ xcodebuild -showsdks
Mac OS X SDKs:
    Mac OS X 10.6                   -sdk macosx10.6
    Mac OS X 10.7                   -sdk macosx10.7

iOS SDKs:
    iOS 5.0                         -sdk iphoneos5.0

iOS Simulator SDKs:
    Simulator - iOS 5.0             -sdk iphonesimulator5.0 
```

**没有**4.3

问题：

1.  4.3模拟器安装在哪里？
2.  对于 4.3 模拟器，应该将什么 sdk 值传递给 xcodebuild？

多谢你们。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-27T20:15:08.090

模拟器 SDK 位于`/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs`

您可以使用以下`xcodebuild`( `/Applications/Xcode.app/Contents/Developer/usr/bin/xcodebuild`) 命令：

```
xcodebuild -target $target -sdk $sdk -configuration $configuration 
```

where`$target`是项目中指定的目标名称，`$sdk`可以从用于查看可用 SDK ( `iphoneos5.0`, `iphonesimulator5.0`) 的命令的输出中获取，并且`$configuration`可以是`AdHoc`，`AppStore`或者您在项目中设置的任何其他名称。

对于缺少的 SDK 问题，您可以检查项目状态，`Xcode : Preferences > Downloads > Components`并检查SDK 位置是否存在`Installed`该文件夹。`iPhoneSimulator4.3.sdk`如果有但仍未显示为已安装，您可以考虑删除并重新安装它或完全重新安装 Xcode。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T06:44:04.587

如果你有 iOS Lion。请按照以下步骤操作

转到应用程序（右键单击 Xcode 图标）

```
/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/ Developer/Applications/iPhone Simulator.app 
```

在那里你会找到 iOS 模拟器应用程序。

# android - 列表视图内的按钮点击监听器

> ID：10356886
> 
> 赞同：-3
> 
> 时间：2012-04-27T19:44:24.210
> 
> 标签：android

嗨，当我尝试添加 oncicklistener 时，我有包含 textview 和 edittext 和按钮的列表视图，`null pointer exception`任何人都可以帮助我解决这个问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T19:59:03.970

如果您覆盖`ArrayAdapter`，您可以使用`getView()`设置`onClick`每个列表元素按钮的侦听器：

```
class Arraybtton extends ArrayAdapter<RowItem>
{
    @Override
    public android.view.View getView(int position, android.view.View convertView, android.view.ViewGroup parent)
    {
        View elem;
        Button btn;

        if (convertView == null)
        {
            elem = getLayoutInflater().inflate(R.layout.listview_elem, parent, false);
        }
        else
        {
            elem = convertView;
        }

        RowItem itm = getItem(position);
        btn = (Button) elem.findViewById(R.id.button);
        btn.setOnClickListener(new OnClickListener()
        {
            public void onClick(View arg0)
            {
                // TODO Auto-generated method stub
            }
        })

        return elem;
    }
};
}
} 
```

# c# - 如何使用 System.Linq.Expressions.Expression 根据子级进行过滤？

> ID：10356889
> 
> 赞同：12
> 
> 时间：2012-04-27T19:44:43.320
> 
> 标签：c#, .net, linq-to-sql, expression

我有一个过滤器，可用于多种方法：

```
Expression<Func<Child, bool>> filter = child => child.Status == 1; 
```

（实际上比这更复杂）

我必须做以下事情

```
return db.Parents.Where(parent => parent.Status == 1 &&
                                  parent.Child.Status == 1); 
```

其中条件与上述过滤器中的条件相同。

我想在这种方法中重用过滤器。但我不知道怎么做。我试过

```
return db.Parents.Where(parent => parent.Status == 1 &&
                                  filter(parent.Child)); 
```

但表达式不能用作方法

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T18:11:21.890

如果你想组合表达式并且仍然能够使用 linq-to-sql，你可能想看看[LinqKit](http://www.albahari.com/nutshell/predicatebuilder.aspx)。它会进入您的表达式，并在 sql 转换之前用其内容替换所有函数调用。

这样你就可以直接使用

```
return db.Parents
       .AsExpandable()
       .Where(parent => parent.Status == 1 && filter(parent.Child)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T19:51:06.057

你可以试试这个：

```
var compiledFilter = filter.Compile();
foreach (var parent in db.Parents.Where(parent => parent.Status == 1))
    if (compiledFilter(parent.Child))
        yield return parent; 
```

它需要你拉所有的父母，但与@HugoRune 的解决方案不同，它不需要父母：孩子的 1:1 关系。

由于涉及的类型不同，我认为这对您的情况没有用，但以防万一，这里有一个如何组合`Expression`s 的示例：[如何将 LINQ 表达式组合成一个？](https://stackoverflow.com/questions/1922497/how-do-i-combine-linq-expressions-into-one)

编辑：我之前曾建议使用`Compile()`，但这不适用于 LINQ-to-SQL。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T20:01:45.523

好吧，如果父母和孩子之间存在 1:1 的关系（不太可能，但该示例似乎暗示了这一点），那么您可以这样做：

```
 return db.Parents
  .Where(parent => parent.Status == 1)
  .Select(parent => parent.Child)
  .Where(filter)
  .Select(child=> child.Parent); 
```

否则会很难。

您可以使用[动态 linq](http://weblogs.asp.net/scottgu/archive/2008/01/07/dynamic-linq-part-1-using-the-linq-dynamic-query-library.aspx)来做到这一点，但这可能是矫枉过正。

您可以[手动生成表达式树](http://msdn.microsoft.com/en-us/library/bb882637.aspx)，但这也很复杂。我自己没有尝试过。

作为最后的手段，您当然可以始终调用`yourQuery.AsEnumerable()`，这将导致 linq-to-sql 将您的查询转换为 sql 并在客户端执行其余工作；然后你可以 .compile() 你的表达式。但是，您会失去 linq-to-sql 的性能优势（并且 compile() 本身非常慢；无论何时执行，它都会调用 JIT 编译器）：

```
 return db.Parents
  .Where(parent => parent.Status == 1)
  .AsEnumerable()
  .Where(parent  => filter.Compile().Invoke(parent.Child)) 
```

就我个人而言，我只定义了两次表达式，一次用于子项，一次用于父子项：

```
 Expression<Func<Child, bool>> filterChild = child => child.Status == 1;
   Expression<Func<Parent, bool>> filterParent = parent => parent.Child.Status == 1; 
```

可能不是最优雅的，但可能比其他解决方案更容易维护

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-27T20:29:24.350

想出这个，检查这是否适合你

```
public interface IStatus { public int Status { get; set; } }
public class Child : IStatus { }
public class Parent : IStatus
{public Child Child { get; set; }  }

Func<IStatus, bool> filter = (x) => x.Status == 1;
var list = Parents.Where(parent => filter(parent) && filter(parent.Child)); 
```

希望这可以帮助！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-09T14:30:47.223

您可以将表达式用作函数吗？

代替：

```
Expression<Func<Child, bool>> filter = child => child.Status == 1; 
```

以这种方式使用与泛型函数相同的表达式：

```
Func<Child, bool> filter = child => child.Status == 1; 
```

然后，您将能够以与尝试使用表达式相同的方式使用该函数：

```
return db.Parents.Where(parent => parent.Status == 1 &&
                                  filter(parent.Child)); 
```

**编辑：**我误解了这个问题。这是一个糟糕的答案。6 年多过去了，我仍然收到评论说这不起作用。从卫生的角度来看，我不确定是否最好删除答案，或者添加此编辑并让答案作为绝对不起作用的示例。我愿意就此提出建议。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-02-19T04:23:43.933

不需要外部库或使用表达式树。相反，编写您的 lambda 函数以使用查询链接并利用 LINQ 的延迟执行。

代替：

`Expression<Func<Child, bool>> filter = child => child.Status == 1;`

将其重写为：

`Func<IQueryable<Parent>, IQueryable<Parent>> applyFilterOnParent = query => query.Where(parent => parent.Child.Status == 1);`

`Func<IQueryable<Child>, IQueryable<Child>> applyFilterOnChild = query => query.Where(child => child.Status == 1);`

现在，而不是：

`return db.Parents.Where(parent => parent.Status == 1 && filter(parent.Child));`

你可以写：

`var query = db.Parents.AsQueryable(); query = applyFilterOnParent(query); return query.Where(parent => parent.Status == 1);`

您可以在其他 LINQ 查询中重复使用 applyFilter 函数。当您想将 lambda 函数与 LINQ-to-SQL 一起使用时，此技术非常有效，因为 LINQ 不会将 lambda 函数转换为 SQL。

# bash - 孩子继承的 Bash 环境变量没有“导出”

> ID：10356891
> 
> 赞同：1
> 
> 时间：2012-04-27T19:44:52.580
> 
> 标签：bash, environment-variables

我在 ~/bin/ 中有以下脚本，以便覆盖默认命令`gnome-terminal`：

```
#!/usr/bin/env bash
XDG_CONFIG_HOME=~/.config/darkthemesettings /usr/bin/gnome-terminal 
```

我试图使该`XDG_CONFIG_HOME`变量仅被 gnome-terminal 看到，但在出现的终端中，如果我运行任何其他程序，该变量也会在该程序中设置。`echo $XDG_CONFIG_HOME`从终端运行会给出 /home//.config/darkthemesettings

我知道，如果一个人在不使用的情况下设置了一个环境变量`export`，那么该变量只能在设置它的脚本中使用，而不是在任何子进程中。我不正确吗？我怎样才能在这里实现我想要的？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-09-25T14:03:22.063

You can use `env` to unset the variable for the command run inside the terminal, like this:

```
XDG_CONFIG_HOME=~/.config/darkthemesettings gnome-terminal -x env -u XDG_CONFIG_HOME bash 
```

The assignment `XDG_CONFIG_HOME=~/.config/darkthemesettings` before the command `gnome-terminal` sets the variable for the terminal. The terminal will run the arguments after the `-x` option as shell command. That shell command `bash` is prefixed by `env -u XDG_CONFIG_HOME` which unsets the variable in the environment for running `bash`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T20:08:01.063

你的理解是不正确的。没有`export`它们就是 bash 变量。`export`将它们“提升”为环境变量。

在运行 shell 之前，您需要让 gnome-terminal 运行一个取消设置变量的脚本。

# asp.net - Boo Interpreter Speed - Web 应用程序

> ID：10356893
> 
> 赞同：0
> 
> 时间：2012-04-27T19:45:04.517
> 
> 标签：asp.net, boo

我尝试寻找类似的问题，但找不到。

我有一个面向业务的 ASPNET1.1 Web 应用程序。并且有许多规则在应用程序中被硬编码。

我想开始使用 Boo 作为一种脚本语言，开发人员可以使用它在那里编写一些逻辑（不是最终用户）。

每当 BL 发生更改时，我只需更新“脚本文件”，部署到服务器就可以了。无需编译。这个很重要。

所以我有两个问题：

1.  似乎只有 CS-Script 和 Boo 支持 NET1.1，我不喜欢 CSScript，因为它需要每个脚本都有一个 exe 或一个已编译的 dll。Boo是正确的选择吗？我想使用 JINT (NET2.0+) 或 LUA（找不到导入 C# 的方法）。
2.  执行 Boo 的速度有多快？我不想编译它（我知道这很快，因为它将是一种静态语言）。我只想使用 Boo 解释器 Eval 函数。

顺便说一句，我要执行的业务逻辑很简单。它应该只是这样的：

```
function(a, b)
{
return a["Type"] == b["Type"];
} 
```

其中 a 和 b 只是 Hashtables 或 DataRow。所以我实际上并不需要系统导入和所有这些。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T19:05:53.413

我放弃了 Boo，因为即使我只想使用 Eval 方法，Boo 也会自动编译表达式并将生成的 Assembly 加载到 AppDomain 中。

由于我在 ASPNET1.1 和一个大型 Web 应用程序（数以千计的用户）中运行，因此效率不高也不快。

即使我创建了一个内部 AppDomain 并在其中运行脚本以便恢复内存。

如果我在同一个 AppDomain 中运行，内存将被吃掉和吃掉，因为这些新程序集将被加载并且永远不会被卸载。

所以我猜从里卡多在一些论坛上的回复来看，Boo 语言从来没有被设计为 CLR 语言的意图，但它击败了围绕 Boo 的整个“脚本”光环。

**这对 Boo 来说是一个很大的嘘声 :(**

我刚刚测试了 LuaInterface 1.3.0（最后一个支持 NET1.1），它的占用空间为零。没有创建任何程序集，并且总体上更好（更像javascript，没有足迹等）。

我只希望 1.3.0 版本足够稳定。在不久的将来，我无法将我的应用程序升级到 NET2.0。

重要更新：LuaInterface 和 luanet 有很多内存泄漏！！！！相反，我通过使用 DllImport 并使用以下文件作为基础直接链接到 lua52.dll： [https ://simpleot.googlecode.com/svn-history/r32/SimpleOT/trunk/SimpleOT/Scripting/Lua.cs](https://simpleot.googlecode.com/svn-history/r32/SimpleOT/trunk/SimpleOT/Scripting/Lua.cs)

我使用 lua52 是因为它支持 VC++2003。

# ios - 使用视网膜显示器运行模拟器时，场景似乎显示四倍大

> ID：10356894
> 
> 赞同：1
> 
> 时间：2012-04-27T19:45:07.527
> 
> 标签：ios, cocos2d-iphone, retina-display

我正在 iphone 模拟器中测试我的应用程序 为了测试视网膜显示，我将硬件设置为 iphone(retina) 不幸的是，整个场景似乎被缩放到正常大小的四倍！我唯一看到的是整个场景的左下角。该应用程序，因为它超出了屏幕的范围，所以在 iphone 屏幕上仅显示为四分之一。我正在使用 Cocos2d。这是什么原因？我还在应用程序委托中启用了视网膜显示。任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T20:41:07.687

模拟器增加到正常大小的四倍（每个轴上两倍），因为默认情况下它使用像素的 1:1 映射。

换句话说，一个屏幕像素 = 一个设备像素。所以当你使用 Retina 显示器时，视网膜密度翻倍，你需要四倍的空间来显示设备屏幕。

编辑：

针对更新后的问题，您可以使用“比例”功能。窗口->比例->50%（或命令+3）。

# iphone - 点的可访问性元素

> ID：10356895
> 
> 赞同：0
> 
> 时间：2012-04-27T19:45:10.247
> 
> 标签：iphone, accessibility

尝试根据窗口内的 CGPoint 来确定命中了什么（如果有）可访问性元素。这可能吗？可访问性元素命中测试的排序...应该返回任何可访问性元素命中（包括系统创建）。似乎必须有办法做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T19:59:55.617

我最好的答案是：将所有可访问性元素添加到数组中。在您的 touchesEnded 方法中，枚举数组并检查是否有任何元素被触摸。一种方法是检查元素的boundingBox 是否包含CGPoint。然后你可以写一堆代码来响应那个触摸！希望这有帮助！^_^

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T13:22:28.150

两种可能的方法来做到这一点。**第一个**，您创建一个类别`UIView`（新文件，类别，将其命名为“tapped”，“UIView”的子类）并将以下代码放入其中：

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {
    [super touchesBegan:touches withEvent:event];
    NSLog(@"%@", self);
} 
```

到目前为止，此代码将适用于所有`UIView`s，但不适用于其自身的所有子类。所以你需要创建更多的子类（例如`UIControl`，，`UIWindow`等）。在那些子类中你不需要`NSLog()`任何东西，只需调用：

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {
    [super touchesBegan:touches withEvent:event];
} 
```

因为所有这些子类都会调用超类，它们最终会调用`NSLog()`of `UIView`。缺点是您必须为所有情况创建大量子类。例如，您需要`UIView`for `UIControl`，然后`UIControl`for`UIButton`等等。

.

**另一种方式**并不完全符合您的要求，但更容易。只需递归调用子视图。

```
- (void)logView:(UIView*)v index:(int)i
{
    NSMutableString *str = [NSMutableString string];
    for (int u = 0; u<i; u++) { [str appendString:@"| "]; }
    [str appendFormat:@"<%@ %p frame:%@>", v.class, v, NSStringFromCGRect(v.frame)];
    // of course you can change it to display your accessibility hint/label
    printf("%s\n", [str UTF8String]);

    for (UIView *vv in v.subviews) { [self logView:vv index:i+1]; }
} 
```

你调用这个方法一次：

```
[self logView:self.view index:0]; 
```

…它会自动创建一个树作为输出：

```
<UITextField 0x6b30010 frame:{{20, 13}, {280, 31}}>
| <UITextFieldRoundedRectBackgroundView 0x6b31e00 frame:{{0, 0}, {280, 31}}>
| | <UIImageView 0x6b31fe0 frame:{{0, 0}, {0, 0}}>
| | <UIImageView 0x6b32070 frame:{{0, 0}, {0, 0}}>
| | <UIImageView 0x6b320e0 frame:{{0, 0}, {0, 0}}> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T20:15:44.297

我担心为了实现你想要的，你必须基本上重新实现例如浏览器如何在 DOM 中的事件处理中执行捕获阶段：

*   从最通用的元素开始——在任何基于 UIKit 的应用程序中，这将是应用程序的`keyWindow`或（如果您的应用程序是多屏的）屏幕的最前面的窗口，您必须通过`windowLevel`等等来弄清楚。
*   检查有问题的对象是否是可访问性容器，以及
    *   如果是这样，递归到那个，要求适当的东西。
    *   如果不是，请检查它是否是可访问性元素，并且
        *   如果不是保释。
        *   如果是，请检查其可访问性框架是否包含有问题的点。
        *   现在，如果*发生*这种情况，恭喜：您已成功找到有问题的元素，因此您应该返回它。
        *   如果不是这样，保释。

到目前为止，我们已经处理了可访问性元素和容器内元素的情况。

还有一种情况需要介绍，即可访问性容器，它们本身就是可访问性元素：
我们有一个容器，它没有为所讨论的点生成元素。

如果它是一个可访问性元素，检查它的框架是否包含该点，并且 - 如果是，则返回`self`， - 如果不是，则保释。

我所说的保释总是意味着零回报。

现在抓住所有这些逻辑，将其转换为代码，并将其放入`NSObject`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-04T20:52:40.780

目前，似乎没有办法使用最新的 API 来做到这一点。

# iphone - 将 AdWhirl 视图添加到 tabBarController

> ID：10356899
> 
> 赞同：1
> 
> 时间：2012-04-27T19:45:31.707
> 
> 标签：iphone, ios, adwhirl, tabbarcontroller

我正在尝试将 Adwhirl 视图添加到当前 iOS 应用程序的顶部。该应用程序由五个不同的视图组成，它们都在一个 TabBarController 的控制之下。任何人都可以写一个简短的教程来显示实现这一目标所需的代码吗？我已经查看并尝试了很多解决方案，但没有一个能够使其发挥作用。

以下是我目前对该问题的尝试，我没有收到错误，但我在屏幕上看不到任何不同。提前致谢。

```
@implementation idoubs2AppDelegate

@synthesize window;
@synthesize tabBarController;
@synthesize contactsViewController;
@synthesize messagesViewController;
@synthesize adwhirlview = adview;

static UIBackgroundTaskIdentifier sBackgroundTask = UIBackgroundTaskInvalid;
static dispatch_block_t sExpirationHandler = nil;

#pragma mark -
#pragma mark Application lifecycle

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions { 

AdWhirlView *adView = [AdWhirlView requestAdWhirlViewWithDelegate:self];
[self.tabBarController.view addSubview:adView];
adView.center = CGPointMake(160, 342);
[self.tabBarController.view bringSubviewToFront:adView];
}

- (NSString *)adWhirlApplicationKey {
// return your SDK key  
return kSampleAppKey;

}
- (UIViewController *)viewControllerForPresentingModalView {

//return UIWindow.viewController;
return [(idoubs2AppDelegate *)[[UIApplication sharedApplication] delegate]     tabBarController];

}
- (void)adWhirlDidReceiveAd:(AdWhirlView *)adWhirlView {

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T20:08:04.457

您可能不应该将子视图添加到普通的 UITabBar，如果您需要自定义标签栏的布局，您可能想看看这里的一些替换：http: [//cocoacontrols.com/](http://cocoacontrols.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T17:10:16.293

我认为与其将子视图添加到 UITabBar，您可能会考虑制作类似于单例的东西，然后您可以将其添加到您包含`GADBannerView`的每个 o中。`ViewControllers``UITabBarController`

所以你可以很容易地设置一个单例（这里有另一个 StackOverflow 问题[，](https://stackoverflow.com/questions/9699518/admod-single-instance-in-all-viewcontrollers/9705835#9705835)它讨论了如何为 AdMob 广告执行此操作并使其与 AdWhirl 一起工作应该是微不足道的）。

然后只需`ViewControllers`在您的操作中添加一些`UITabBarController`内容，例如：

```
 UIViewController *viewController1 = [[[FirstViewController alloc]
                                        initWithNibName:@"FirstViewController"
                                        bundle:nil]
                                       autorelease];
  UIViewController *viewController2 = [[[SecondViewController alloc]
                                        initWithNibName:@"SecondViewController"
                                        bundle:nil]
                                       autorelease];

  self.tabBarController = [[[UITabBarController alloc] init] autorelease];
  self.tabBarController.viewControllers = [NSArray arrayWithObjects:
                                           viewController1,
                                           viewController2,
                                           nil]; 
```

# java - Eclipse 在 processWorkerExit 上中断

> ID：10356905
> 
> 赞同：16
> 
> 时间：2012-04-27T19:45:43.620
> 
> 标签：java, debugging, tomcat, thread-safety, breakpoints

在处理了几个请求后，我的 Eclipse 开始使用 processWorkerExit() 方法。

根据这个[链接](https://stackoverflow.com/questions/7451862/openjdk-breaks-on-processworkerexit-with-no-breakpoint)，我知道如何抑制 Eclipse 的中断，但是有什么原因导致代码在这条线上中断。在这种情况下会出现内存泄漏吗？

Tomcat 7.0.27
Eclipse 3.7.2
JDK 7.0.02

![在此处输入图像描述](../Images/fd19f9570f3892b58d8f262ab4caa4bc.png)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2015-03-25T11:26:27.290

答案在这里：[OpenJDK 在 processWorkerExit 上中断，没有断点](https://stackoverflow.com/questions/7451862/openjdk-breaks-on-processworkerexit-with-no-breakpoint)

> 默认情况下，在 Eclipse 的调试模式下，会检查未捕获异常的中断。由于您在此处没有 catch 方法，因此可能会引发未捕获的异常，并且调试器会在引发异常之前立即为您中断。您可以在 Java->Debug 下的首选项中将其关闭。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T02:18:21.483

调试器在该行停止的原因是因为`try{}`块内的代码引发了异常，并且该特定代码行是引发异常后的下一个可执行代码行。您几乎可以肯定在控制台窗口中看到该异常的堆栈跟踪，因为默认情况下，冒泡的未捕获异常`Thread.run()`将被发送到`stderr`.

至于您关于是否可能存在内存泄漏的问题（或者更有可能是Java，资源泄漏）：答案是肯定的，**可能**存在。但是该代码中没有任何内容表明**存在**. 如果有这样的泄漏，那几乎肯定是因为内部有不正确的异常处理。`task`实现中存在不正确的异常处理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-28T06:02:31.373

我有同样的问题。如果您没有记录异常，它会在您的 try/catch 子句中中断。尝试像这样向 LogCat 插入断点或输出：

```
try
{
   //HERE I'VE PUT ALL THE FUNCTIONS THAT WORK FOR ME
   Log.e("tag", "Sth passed!");
}
catch (Exception e)
{
   //The task failed
   Log.e("tag", e.getMessage());           
} 
```

如果您没有 try/catch 块，请将其放在上面的代码中。在 LogCat 中，您可以看到在异常之前运行的最后一行代码，它将帮助您在代码中找到错误，如下所示：

08-28 05:49:52.321: E/SQLiteDatabase(834): 在 java.lang.Thread.run(Thread.java:841)

# javascript - 当检测到运动/运动/活动时显示元素，即使用javascript

> ID：10356910
> 
> 赞同：1
> 
> 时间：2012-04-27T19:45:58.510
> 
> 标签：javascript, android-activity, detection

这是我关于stackoverflow的第一个问题，希望有人可以帮助回答我的问题。

这是我的问题：当检测到运动/运动/活动时（即使用 jQuery/MooTools 的 Javascript），我如何显示或隐藏 div，或要求任何操作。

我知道这是可能的，因为 gmail 会利用它，例如，当您长时间不活动时，您的状态将显示为不活动。当您将鼠标移到 gmail 页面的主体上时，状态将从非活动变为在线。

所以希望有人能认出满足我需求的脚本。

在此先感谢， Leo Behrutt

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T19:47:39.590

将侦听器附加到`document.body.onmousemove`. 我正在使用类似的东西并取得了巨大的成功。

```
document.body.onmousemove = function () {
    console.log("hey, you moved!");
} 
```

当然，如果你继续移动，这将继续触发，所以也许你想要一个宽限期？

```
(function () {
    var in_grace = false; timout_set = false, grace = 5 * 1000; // 5 seconds
    document.onmousemove = function () {
        if (false === in_grace) {
            in_grace = true;
            timout_set = false;
            console.log("hey, you moved!");    // <-- your code here
        } else if (false === timout_set) {
            timout_set = true;
            setTimeout(function () {
                in_grace = false;
            }, grace);  // set in_grace to false after grace seconds
        }
    }
}()); 
```

这应该最多每 5 秒触发一次事件。

# c# - 应用程序_在网络花园环境中启动

> ID：10356912
> 
> 赞同：1
> 
> 时间：2012-04-27T19:46:03.693
> 
> 标签：c#, asp.net, iis-7.5, asp.net-4.0

在 IIS 7.5 下运行，我有一个网络花园。IIS重启后，是只调用`Application_Start`一次还是每个网园实例调用一次？我想要确凿的证据。

另外，据我了解，每个网络花园实例都是一个精确的克隆。这意味着如果我在一个实例中向 HttpContext.Cache 添加某些内容，则在另一个实例中它可能对 HttpContext.Cache 不可用，对吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T19:48:49.520

据我所知，每个网络花园实例都是完全属于自己的过程。这意味着缓存不共享，Application_Start 不共享，等等。假装它运行在完全不同的服务器上，您应该很好地了解究竟会发生什么/不会发生什么。

# visual-c++ - VC++ 迁移问题

> ID：10356913
> 
> 赞同：0
> 
> 时间：2012-04-27T19:46:05.163
> 
> 标签：visual-c++

我有一个使用 MS VC++ 7.1 版创建的 VC++ 项目。我需要迁移到 Visual Studio 2010。转换成功，但是，当我尝试构建应用程序时，出现以下错误：

> 错误 1 ​​错误 MSB6006：“cmd.exe”以代码 9009 退出。C:\Program Files (x86)\MSBuild\Microsoft.Cpp\v4.0\Microsoft.CppCommon.targets 151 6 cipher
> 
> 错误 2 错误 MSB6006：“cmd.exe”以代码 9009 退出。C:\Program Files (x86)\MSBuild\Microsoft.Cpp\v4.0\Microsoft.CppCommon.targets 151 6 mpi
> 
> 错误 136 错误 LNK1104: 无法打开文件 '..\bin\util.lib' C:\Source\gnupg-1.2.6\scripts\conf-w32brg\ks_ldap\LINK gpgkeys_ldap
> 
> 错误 138 错误 LNK1104: 无法打开文件 '..\bin\util.lib' C:\Source\gnupg-1.2.6\scripts\conf-w32brg\ks_hkp\LINK gpgkeys_hkp
> 
> 错误 618 错误 LNK1104: 无法打开文件 '..\bin\cipher.lib' C:\Source\gnupg-1.2.6\scripts\conf-w32brg\gnupg\LINK gnupg

你能告诉我在这里可以做什么吗？谢谢。

# jquery - 加载新图像后的JQuery动画div

> ID：10356914
> 
> 赞同：0
> 
> 时间：2012-04-27T19:46:05.460
> 
> 标签：jquery, jquery-animate

我已经找出了大部分代码，但是有些东西（我知道的很小）正在躲避我：

我正在将较大的图像加载到 div 中并调整该 div 的大小以匹配新的较大图像尺寸。div 在单击缩略图时淡入，在单击时淡出，并在单击新缩略图时更改为新的调整大小的内容（稍后我将添加前进和后退按钮。）

一切正常，除了 div 调整大小时的动画。我在我的代码中看不到错误。有什么帮助吗？

HTML 代码：

```
<div id="wrapper">
<div id="small"><img src="images/small/001.jpg" width="100" height="125"><img     src="images/small/002.jpg" width="100" height="125"></div>
<div id="large"><img src="" /></div> 
```

查询：

```
$(document).ready(function(){
    $('#small img').click(function() {
        var image = $(this);
        var src = image.attr('src');
        src = src.split('/');
        var filename = src[src.length-1];
        var image_folder = 'images/large/';
        var large_image = $('#large img');
        large_image.attr('src', image_folder + filename);
        new_height = $('#large img').height+"px";
        new_width = $('#large img').width+"px";
        $('#large').html('');
        $('#large').append(large_image);
        if( $('#large').is(":visible") ) {
            $('#large').animate({
                "height":new_height,
                "width":new_width
            }, {duration: 1000})
        } else {
            $('#large').css('visibility','visible').hide();
            $('#large').fadeIn(1000);
        }   
    });
    $('#large').click(function(){
        $('#large').fadeOut(1000);
        //$('#large').hide();
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T19:59:56.417

我注意到您使用了 width 和 height 而不是 width() 和 height() 所以试一试看看是否有帮助。使用这个。

```
new_height = $('#large img').height()+"px";
new_width = $('#large img').width()+"px"; 
```

编辑： - - - - - - - -

我不确定你想应用什么样的效果，但我使用了 jQuery UI 并想出了这个[http://jsfiddle.net/v3YkY/](http://jsfiddle.net/v3YkY/)。如果您决定使用它，请不要忘记将 jQuery UI CSS 添加到您的页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T19:54:26.447

不确定这是否是您的问题......但这行代码自相矛盾 -

```
$('#large').css('visibility','visible').hide(); 
```

您将`visibility`css 参数设置为`visible`然后立即隐藏该元素。

您可以简单地使用`.show()`and`.hide()`函数而无需处理`.css('visibility','visible')`. 该`:visible`属性由 jQuery 已知的其他属性暗示 -`display`例如。

`.animate()`调用该函数后，您也缺少分号。现在可能不是问题，但是当您开始在不同的浏览器上测试它时肯定会出现。 [没有提到任何名字...]

# ios - CocoaLibSpotify 在登录期间将离线可用曲目重置为 SP_TRACK_OFFLINE_WAITING

> ID：10356916
> 
> 赞同：0
> 
> 时间：2012-04-27T19:46:14.257
> 
> 标签：ios, spotify

尝试保存播放列表以供离线使用时，我遇到了 CocoaLibSpotify 问题。

所以我安装了我的应用程序，第一次登录，选择一个播放列表并将其设置为离线使用，它的offlineStatus立即更改为SP_PLAYLIST_OFFLINE_STATUS_DOWNLOADING，播放列表中的所有曲目的offlineStatus都更改为SP_TRACK_OFFLINE_WAITING，他们开始一次下载一个最终他们的离线状态更改为 SP_TRACK_OFFLINE_DONE。我关掉了我的wifi，我可以离线播放下载的曲目。

当我关闭应用程序并再次登录时，之前离线可用的曲目现在的离线状态更改为 SP_TRACK_OFFLINE_WAITING 并且无法再离线播放。CocoaLibSpotify 将下载的播放列表存储在 NSCachesDirectory 中，如果我检查该文件夹，我发现内容没有更改并且曲目数据仍然存在。

另一个奇怪的事情是，我认为即使在在线模式下，如果离线可用，CocoaLibSpotify 也会播放从设备下载的曲目。如果我打开 wifi 并开始播放这些以前下载的 SP_TRACK_OFFLINE_WAITING 曲目，然后快速关闭 wifi，它仍然会继续播放整个曲目。

因此，从外观上看，我假设曲目仍处于脱机状态，但由于某种原因，它们的脱机状态在登录时会出现错误的状态。会话由于其脱机状态而拒绝开始播放曲目。

但是，我怎样才能避免曲目的 offlineStatus 重置，或者至少在我知道曲目已下载时纠正问题。我尝试手动将 offlineStatus 设置为 SP_TRACK_OFFLINE_DONE ，但这没有用。我希望有人可以对此有所了解。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T21:18:46.673

手动设置该属性不会影响您的 UI 以外的任何内容。

有几件事需要检查：

*   当您退出应用程序时，请确保您注销 ( `[SPSession -logOut]`) 并等到注销完成后再让应用程序死掉，否则您可能会得到一个损坏的缓存。

*   When you log back in again, are you using CocoaLibSpotify's saved credentials or manually entering your password again? If it's the latter, it won't work since the library can't contact the Spotify service to verify the credentials. Using CocoaLibSpotify's built-in credential saving doesn't have this problem.

# asp.net - 设置一个 使用 MasterPage

> ID：10356919
> 
> 赞同：1
> 
> 时间：2012-04-27T19:46:23.203
> 
> 标签：asp.net, master-pages

下面的代码位于我的 MasterPage 下。一旦单击其中一个选项卡，例如“联系我们”，我想将*li 类*设置为活动状态。我无法弄清楚如何做到这一点。任何帮助都会很棒。

```
<div id="navcontainer">
    <div class="section-wrapper">
        <ul class="links">      
            <li class="">                
                <a href="">Our Company</a>
            </li>       
            <li class="">               
                    <a href="Contact%20Us/Default.aspx">Contact Us</a>
            </li>       
            <li class="">                
                    <a href="">Tab 3</a>
            </li>       
            <li class="">                
                    <a href="">Tab 4</a>
            </li>   
            <li class="">                
                    <a href="">Tab 5</a>
            </li>               
        </ul>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T19:50:07.910

你可以用 jQuery 来做，像这样：

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script> 

<script>
$("li").click(function(){
    alert("this is the message");
    if ($("li").hasClass('active')) {
        $("li").removeClass('active');
    }
    $(this).addClass('active');
});
</script> 
```

[这是您的代码示例。](http://jsfiddle.net/YjwqN/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T20:22:08.123

在页面上有一个具有默认值的公共属性，并使用此属性在您的页面中设置 CSS。

默认.aspx.cs

```
public partial class Default : System.Web.UI.Page
{
    public string ActiveTab = "contact";

    public void Page_Load(object sender, EventArgs e)
    {

    }
} 
```

默认.aspx

```
<ul class="links">      
    <li class="">                
        <a href="">Our Company</a>
    </li>       
    <li class="<% if (ActiveTab=="contact") { %>active<% } %>">
            <a href="Contact%20Us/Default.aspx">Contact Us</a>
    </li>       
    <li class="">                
            <a href="">Tab 3</a>
    </li>       
    <li class="">                
            <a href="">Tab 4</a>
    </li>   
    <li class="">                
            <a href="">Tab 5</a>
    </li>               
</ul> 
```

一旦设置了 li 的 css，使用 CSS 将其直观地表示为活动的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-30T21:34:07.007

```
 HtmlGenericControl tabContact = Master.FindControl("liContact") as HtmlGenericControl;
        tabContact.Attributes.Add("class", "active");
        Master.FindControl("liContact").Controls.Add(new LiteralControl("<span></span>")); 
```

# php - PHP 在 WordPress 中无法正常工作

> ID：10356921
> 
> 赞同：1
> 
> 时间：2012-04-27T19:46:31.340
> 
> 标签：php, html, wordpress

我制作了一个普通的 PHP 小部件以显示在 WordPress 侧边栏上。我已经成功地让小部件发布了我希望在连续页面上填写的数据。但是，它应该在哪里不会填写，而是`"<?php echo $_GET["`在 text box 之后填写 then `" />"`。我希望第一次提交的电子邮件将填写在下一页的表格中。我的注册表单的代码是一个更大的小部件的一部分，如下所示：

```
<p class="form-email'.$errorVar.'">
      <label for="email">'. __('E-mail', 'profilebuilder') .$errorMark.'</label>
      <input class="text-input" name="email" type="text" id="email" value="<?php echo $_GET["email"]; ?>" /> 
</p><!-- .form-email -->'; 
```

这是该页面的链接：http: [//universityoutfitters.com/testphp/](http://universityoutfitters.com/testphp/) - 小部件位于左下侧面板。

附加信息：小部件的代码如下：

```
<form action="http://universityoutfitters.com/sign-up/" method="post">
    Please submit your email address
    Email: <input type="text" name="email" />
<input type="submit" />
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T21:01:36.337

这一行应该是：

```
<label for="email"><?php echo __('E-mail', 'profilebuilder') $errorMark ;?></label> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T21:09:25.683

正如上面所说的，你必须用 PHP 标签正确地包装它

```
<?php
echo '<p class="form-email'.$errorVar.'">
      <label for="email">'. __('E-mail', 'profilebuilder') .$errorMark.'</label>
      <input class="text-input" name="email" type="text" id="email" value="'.$_GET["email"].'" /> 
</p><!-- .form-email -->';
?> 
```

# grails - 带有接口属性的 Grails FindBy*

> ID：10356922
> 
> 赞同：0
> 
> 时间：2012-04-27T19:46:38.157
> 
> 标签：grails, grails-orm, findby

我有一个像

```
class Account {

    BigDecimal balance = 0
    SortedSet transactions

    AccountOwner owner

    static constraints = {
    }

    static hasMany = [transactions:Transaction]
} 
```

当我尝试像这样查询帐户时

```
def account = Account.findByOwner(user) 
```

我收到这个错误

```
| Failure:  testSave(br.com.fisgo.financial.AccountControllerTests)
|  org.springframework.dao.InvalidDataAccessResourceUsageException: Cannot query [br.com.fisgo.financial.Account] on non-existent property: owner
    at org.grails.datastore.mapping.simple.query.SimpleMapQuery.getValidProperty(SimpleMapQuery.groovy:706)
    at org.grails.datastore.mapping.simple.query.SimpleMapQuery.executeSubQueryInternal(SimpleMapQuery.groovy:644)
    at org.grails.datastore.mapping.simple.query.SimpleMapQuery.executeSubQuery(SimpleMapQuery.groovy:630)
    at org.grails.datastore.mapping.simple.query.SimpleMapQuery.executeQuery(SimpleMapQuery.groovy:63)
    at org.grails.datastore.mapping.query.Query.list(Query.java:486)
    at org.grails.datastore.gorm.finders.AbstractFindByFinder.invokeQuery(AbstractFindByFinder.java:34)
    at org.grails.datastore.gorm.finders.AbstractFindByFinder$1.doInSession(AbstractFindByFinder.java:26)
    at org.grails.datastore.mapping.core.DatastoreUtils.execute(DatastoreUtils.java:301)
    at org.grails.datastore.gorm.finders.AbstractFinder.execute(AbstractFinder.java:40)
    at org.grails.datastore.gorm.finders.AbstractFindByFinder.doInvokeInternal(AbstractFindByFinder.java:24)
    at org.grails.datastore.gorm.finders.DynamicFinder.invoke(DynamicFinder.java:151)
    at org.grails.datastore.gorm.finders.DynamicFinder.invoke(DynamicFinder.java:352)
    at org.grails.datastore.gorm.GormStaticApi.methodMissing(GormStaticApi.groovy:108)
    at br.com.fisgo.financial.AccountController.buyLead(AccountController.groovy:17)
    at br.com.fisgo.financial.AccountControllerTests.testSave(AccountControllerTests.groovy:92)
| Completed 1 unit test, 1 failed in 5414ms
| Tests FAILED  - view reports in target\test-reports 
```

使用这个界面

```
package br.com.fisgo.financial;

public interface AccountOwner {

} 
```

我正在使用模拟对象进行测试

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T21:59:27.543

由于 findBy* 由 GORM 处理，而 GORM 不处理接口，我认为它不会起作用。你能让 AccountOwner 成为一个抽象类吗？

# sql - 如何从查询与结果集中取回单个值

> ID：10356923
> 
> 赞同：5
> 
> 时间：2012-04-27T19:46:39.533
> 
> 标签：sql, oracle, jsp, resultset

我有一个针对 Oracle 数据库运行 select 语句的 JSP 文件。

我见过的所有示例都使用以下内容：

```
Statement st=connection.createStatement();
ResultSet rs=st.executeQuery("Select * from data");
 while(rs.next(){
String name=rs.getString("name");
String add=rs.getString("address");
out.println(name+" "+add);
 } 
```

我永远不会有超过一行返回是否有替代 ResultSet 和 while 循环来获取我返回的单行数据？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-27T20:07:14.790

我已经使用类似的东西来验证用户登录。

```
 String sql = "SELECT * FROM login WHERE username=? AND password=?";
    try {
          PreparedStatement statement;
          statement = connection.prepareStatement(sql);

          statement.setString(1, "hardik"); // set input parameter 1
          statement.setString(2, "welcome"); // set input parameter 2
        ResultSet rs = statement.executeQuery();
        if(rs.next()){
            // fetch data from resultset
        }
    }catch(SQLException sqle){
        sqle.printStackTrace();
    } 
```

# php - 在 CD/DVD 上带有 MySQL 数据的 PHP 项目

> ID：10356931
> 
> 赞同：2
> 
> 时间：2012-04-27T19:47:07.860
> 
> 标签：php, mysql, cd, dvd

无论如何存在，如何将带有 MySQL 数据库的 PHP 项目放在具有完整功能的 CD/DVD 上？我的客户希望将他的演示文稿放在 CD 上，并且这张 CD 会送给他的客户。

想法是，这些客户只需将 CD 放入他们的 PC 并在他们的计算机上运行完整的 Web 演示文稿......

那是科幻小说还是存在任何方式来做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T19:51:29.270

CD/DVD 必须有可用的 Apache/MySQL/PHP - 您正在寻找的是一个可以从 DVD 运行的“便携式网络服务器”。前段时间我使用了一个叫做 The Uniform Server 的东西并取得了相当大的成功。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-27T19:52:36.157

好吧，我能看到的唯一解决方案是不使用服务器端语言（因为这里没有服务器），而只使用 HTML+CSS+JavaScript 来制作演示文稿，使用 HTML 对内容进行硬编码，并且不要t 使用数据库。

将所有内容刻录在 CD 上（在根文件夹中有 index.html 页面），当从浏览器运行时，它应该可以工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T19:57:28.457

由于这些天大多数人都可以访问互联网，我会制作一个 index.html 文件，其中包含对在线常规网页的元刷新。您甚至可以创建一个启动该文件的 autorun.inf，但请注意，如今大多数计算机都禁用了自动运行功能。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-27T20:08:07.757

您可以结帐[Server2Go](http://www.server2go-web.de/)。我只是通过谷歌搜索找到的，所以我不能说它的效果如何，但它似乎拥有你想要的一切。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-27T20:35:12.493

您可以创建一个完整的实时 Linux 环境，他们可以从 CD 启动。看看[Knoppix](http://www.knoppix.com/)。他们的 wiki 包含有关安装操作系统、自定义操作系统和重新创建磁盘映像的说明。

另一种选择可能是使用[VMWare ThinApp](http://www.vmware.com/products/thinapp/overview.html)来虚拟化整个应用程序包（MySQL 服务器、应用程序服务器等）。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-06-09T05:59:59.820

在您的客户端计算机上设置服务器、php 插件和 mysql。服务器应该指向 cdrom 作为根目录。然后将所有网络文件复制到 DVD 上。不要忘记在客户端计算机上创建数据库。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-06-30T12:09:54.437

我刚刚尝试了 SourceForge 网站上的[CDsite](http://cdsite.sourceforge.net/%20CDsite)。对于我的类似要求，它派上用场了。但是，请注意，仅适用于 Windows XP。EXE 文件无法在 Windows 7 中运行。

# delphi - IndyHandle 到 TIDPEERTHREAD

> ID：10356935
> 
> 赞同：1
> 
> 时间：2012-04-27T19:47:24.270
> 
> 标签：delphi, delphi-7, indy, indy-9

我将 Indy9 与 Delphi7 一起使用。我想将 Longword (Athread.Handle) 转换回 TIDPEERTHREAD 指针。有没有办法我可以做到这一点？或者有没有其他方法可以“存储”指向长字的指针？

先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T20:07:56.197

`TIdPeerThread`是`TThread`后代。它的`Handle`属性包含来自`CreateThread()`. 无法将`Handle`值直接转换为`TIdPeerThread`对象指针。您将不得不：

1）将`TIdPeerThread`对象指针本身存储在`LongWord`而不是`TIdPeerThread.Handle`值中，然后在需要时将其转换回：

```
var
  LW: LongWord;
  Peer: TIdPeerThread;

Peer := ...;
LW := LongWord(Peer);
...
Peer := TIdPeerThread(LW); 
```

2) 将`TIdPeerThead.Handle`值存储在 中`LongWord`，然后在需要时遍历`TIdTCPServer.Threads`列表寻找`TIdPeerThread`具有匹配值的对象：

```
var
  LW: LongWord;
  Peer: TIdPeerThread;
  List: TList;
  I: Integer;

Peer := ...;
LW := LongWord(Peer.Handle);
...
Peer := nil; 
List := IdTCPServer1.Threads.LockList;
try
  for I := 0 to List.Count-1 do
  begin
    if LongWord(TIdPeerThread(List[I]).Handle) = LW then
    begin
      Peer := TIdPeerThread(List[I]);
      Break;
    end;
  end;
finally
  IdTCPServer1.Threads.UnlockList;
end; 
```

# javascript - openlayers 向量和字符串

> ID：10356937
> 
> 赞同：0
> 
> 时间：2012-04-27T19:47:28.373
> 
> 标签：javascript, openlayers

我有一个点数组，我将其更改为 LineStrings - > 它看起来像曲线，我希望我的标记（矢量）以正确的角度沿着这条路径（在曲线上旋转）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T19:57:40.360

您必须计算 2 点之间的角度（在线串上的标记前后）：p1，p2：

```
var dx = p2.x-p1.x;
var dy = p2.y-p1.y;
var angle = Math.atan2(dx,dy);
var degrees = 360-(angle*180/Math.PI)-90; 
```

然后使用“度”参数进行旋转：http: [//openlayers.org/dev/examples/styles-rotation.html](http://openlayers.org/dev/examples/styles-rotation.html)

# javascript - 从 .NET 框架 3.5 升级到 4.0 后，下拉列表上没有浏览器回发

> ID：10356946
> 
> 赞同：2
> 
> 时间：2012-04-27T19:47:59.320
> 
> 标签：javascript, .net, events, frameworks

我在 Visual Studio 项目（.NET 框架 3.5）中有一个简单的 ASP.NET 下拉列表控件，一旦所选索引更改并成功回发到服务器，它就会触发回发。采用相同的简单 ASP.NET 下拉列表控件并将 Visual Studio 项目升级到 .NET Framework 4.0 不会导致回发。以下是页面上的标记示例（页面仅包含一个下拉列表）

```
<body>
  <form id="form1" runat="server" >
    <asp:DropDownList ID="ddlTest" OnSelectedIndexChanged="ddlTestIndexChanged" runat="server"
     AutoPostBack="true" />
 </form> 
</body> 
```

在后面的代码中......

```
public void Page_Load(object sender, EventArgs e)
        {
            if (!Page.IsPostBack)
            {
                var list = new List<string>();
                list.Add("Hello");
                list.Add("World");
                ddlTest.DataSource = list;
                ddlTest.DataBind();
            } 
        }
        protected void ddlTestIndexChanged(object sender, EventArgs e)
        {  
            //selected index changed...success
        } 
```

当项目在 .NET Framework 3.5 上运行时，使用 FireBug 在浏览器中查看呈现的 html 会显示以下 html

```
<body>
 <form name="form1" method="post" action="Default.aspx" id="form1">
 <div>
 <input type="hidden" name="__EVENTTARGET" id="__EVENTTARGET" value="">
 <input type="hidden" name="__EVENTARGUMENT" id="__EVENTARGUMENT" value="">
 <input type="hidden" name="__LASTFOCUS" id="__LASTFOCUS" value="">
 <input type="hidden" name="__VIEWSTATE" id="__VIEWSTATE" value="has a value">
</div>
 <script type="text/javascript"> //<![CDATA[ var theForm = document.forms['form1']; 
    if (!theForm) { theForm = document.form1; } function __doPostBack(eventTarget, eventArgument)
     { if (!theForm.onsubmit || (theForm.onsubmit() != false)) 
    { theForm.__EVENTTARGET.value = eventTarget; theForm.__EVENTARGUMENT.value = eventArgument; 
    theForm.submit(); } } //]]> </script>
 <div>
 <input type="hidden" name="__EVENTVALIDATION" id="__EVENTVALIDATION" value="Has a value">
</div>
 <select name="ddlTest" onchange="javascript:setTimeout('__doPostBack(\'ddlTest\',\'\')', 0)" id="ddlTest">
 <option value="Hello">Hello</option>
 <option selected="selected" value="World">World</option>
</select>
</form>
</body> 
```

并在 .NET 框架 4.0 上运行同一个项目时查看呈现的 html

```
<body>
 <form name="form1" method="post" action="/Default.aspx" id="form1">
 <input type="hidden" name="__VIEWSTATE" id="__VIEWSTATE" value="has a value">
 <input type="hidden" name="__EVENTVALIDATION" id="__EVENTVALIDATION" value="has a value">
 <select name="ddlTest" id="ddlTest">
 <option selected="selected" value="Hello">Hello</option>
 <option value="World">World</option>
</select>
</form>
</body> 
```

通过比较两个片段中的 html 代码，可以看出后一个片段缺少下拉列表中的“onchange”事件以及用于回发的 javascript 本身。我的 web.config 包含以下内容以实现向后兼容性，但这也不起作用。

```
<pages controlRenderingCompatibilityVersion="3.5" clientIDMode="AutoID"/> 
```

我还尝试在标记中添加缺少的 Javascript——没有用。此外，尝试从后面的代码中添加 onchange 事件 + javascript，但这也不起作用

环境：

*   基于 Adob​​e AIR 3.2 的浏览器（无法访问浏览器代码）
*   Windows 7 – 64 位机器
*   视觉工作室 2010
*   C＃

我知道这个问题在大多数浏览器上都不是问题，但是作为工作项目的一部分，这需要使用基于 Adob​​e AIR 3.2 的浏览器。非常感谢任何帮助，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T19:58:59.943

我在本地计算机上复制了您的 ASPX 和 ASPX.cs，它在 .NET 框架 4.0 上运行良好。我可以看到下拉菜单有 onchange 事件。

```
<select id="ddlTest" onchange="javascript:setTimeout('__doPostBack(\'ddlTest\',\'\')', 0)" name="ddlTest">
    <option value="Hello" selected="selected">Hello</option>
    <option value="World">World</option>

</select> 
```

检查您的 web.config 并查看 targetFramework 是什么：

```
<configuration>
    <system.web>
        <compilation debug="true" targetFramework="4.0" />
    </system.web>

</configuration> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T01:15:40.620

解决方案是在我的网站项目中添加一个“App_Browsers”文件夹。然后添加一个“AdobeAir.Browser”文件。这是一个包含我的自定义浏览器属性的 xml 文件。请参阅[http://msdn.microsoft.com/en-us/library/ms228122.aspx](http://msdn.microsoft.com/en-us/library/ms228122.aspx)了解更多信息。

位于 C:\Windows\Microsoft.NET\Framework64\v4.0.30319\Config\Browsers 的 .NET 框架 4 浏览器定义文件与位于 C:\Windows\Microsoft.NET\Framework64\v2.0.50727 的文件相比稍微轻了一点\CONFIG\Browsers 因此我的自定义浏览器在 .NET 框架 4 上运行

# jsf-2 - 如何为 JSR 303 bean 验证提供翻译的自定义错误消息？

> ID：10356949
> 
> 赞同：4
> 
> 时间：2012-04-27T19:48:18.430
> 
> 标签：jsf-2, bean-validation

[我的问题与bean 验证的自定义验证消息](https://stackoverflow.com/questions/8048710/custom-validation-message-for-bean-validation)基本相同 。但是，我无法解决问题。

豆类：

```
public class PersonalInfoBean {
    @Size(min=5, max=55, message="{invalid_name}")
    String name;
    ...
} 
```

我在 Eclipse 项目的 src 文件夹中的一个包中创建了 Messages.properties。

```
invalid_name=Please enter a valid name 
```

我在 faces-config.xml 中注册了文件：

```
<application>
    <message-bundle>com.webage.survey.Messages</message-bundle>
</application> 
```

facelet 文件有：

```
<h:inputText value="#{personalInfo.name}" id="name"/> <h:message for="name" style="color: red" /><br/> 
```

当我提交表单时，我只看到 {invalid_name} 作为错误消息，而不是“请输入有效名称”。

我使用 JBoss 6 和 WebSphere 8 对此进行了测试，结果相同。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T19:52:19.643

您正在混合[JSR 303 Bean 验证框架](http://jcp.org/aboutJava/communityprocess/edr/jsr303/index.html)和 JSF 内置验证。JSR 303 Bean Validation 框架不是 JSF 框架的一部分。它是一个完全独立的验证框架，JSF 恰好有集成支持。

您需要在不同的属性文件中指定 JSR 303 Bean 验证消息，而不是使用 的*确切*文件名`ValidationMessages.properties`，可以使用`ValidationMessages_xx_XX.properties`文件进行本地化。这些文件必须放在类路径的根目录中。

您无需在`faces-config.xml`. `<message-bundle>`仅用于 JSF 内置转换器和验证器，例如, `required="true"`,`<f:validateRegex>`等`<f:convertDateTime>`。

# java - 使用数组来提高递归二项分布算法的执行时间？

> ID：10356951
> 
> 赞同：4
> 
> 时间：2012-04-27T19:48:48.223
> 
> 标签：java, arrays, algorithm, math

作为一名初级程序员，我最近购买了 Robert Sedgewick/Kevin Wayne 所著的《Algorithms - Forth Edition》一书，我非常感谢每章末尾的练习。但是，有一个练习（看起来很简单）让我发疯，因为我找不到解决方案。

您必须采用这种递归算法来计算在 n 次试验中恰好获得 k 次成功的概率，其中 p 是一个事件的成功概率。给出的算法基于递归二项分布公式。

```
public static double binomial(int n, int k, double p) {
    if (n == 0 && k == 0)
        return 1.0;
    else if (n < 0 || k < 0)
        return 0.0;
    return (1 - p) * binomial(n - 1, k, p) + p * binomial(n - 1, k - 1, p);
} 
```

本练习的目标是通过将计算值保存在数组中来使该算法更快。我已经通过使用另一种获取二项式分布 [p(x) = nCr * p^k * (1 - p)^(n - k)] 的方法使该算法变得更快，该方法使用迭代方法来查找阶乘。但是，我不明白在这种情况下如何使用数组来提高执行时间。

任何帮助将不胜感激！

...在有人问之前，这不是作业！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-27T19:55:04.547

这本书试图教你一种特殊的编程技术，称为[*记忆*](http://en.wikipedia.org/wiki/Memoization)化，一种更广泛的技术，称为[*动态编程*](http://en.wikipedia.org/wiki/Dynamic_programming)。当然，在现实生活中知道一个封闭形式的解决方案要好得多，但不是在解决这个练习的背景下。

无论如何，这个想法是传递一个二维数组作为你的第四个参数，最初用 s 填充它，并在计算任何东西之前检查数组中`NaN`的给定组合是否有解决方案。如果有，请退还；如果没有，则递归计算，存储在数组中，然后才返回它。`n``k`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-27T20:01:27.113

这里的递归算法最终会一遍又一遍地调用特定条件。例如：

```
3, 3
  2, 3
    1, 3
      0, 3
      0, 2
    1, 2
      0, 2
      0, 1
  2, 2
    1, 2
      0, 2
      0, 1
    1, 1
      0, 1
      0, 0 
```

例如，通过记住 (1, 2) 的值，并在再次使用这些参数调用时立即返回该值，可以提高效率。使用番石榴`Table`，这看起来像：

```
public static double binomial(int n, int k, double p, Table<Integer, Integer, Double> memo) {
    if(memo.contains(n, k))
        return memo.get(n, k);

    double result;
    if (n == 0 && k == 0)
        result = 1.0;
    else if (n < 0 || k < 0)
        result = 0.0;
    else 
        result = (1 - p) * binomial(n - 1, k, p) + p * binomial(n - 1, k - 1, p);

    memo.put(n, k, result);
    return result;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-03-30T06:34:30.623

有点晚了，但对于那些正在寻找完整解决方案的人来说，下面是我的。首先，我建议其他人阅读此处给出的答案：[https](https://stackoverflow.com/a/6165124/4636721) ://stackoverflow.com/a/6165124/4636721以了解动态编程、记忆和制表的含义

无论如何，关于我的解决方案，所以基本上我们有给定的方法：

```
// Not efficient at all
private static double binomial(int N, int k, double p)
{
    if (N == 0 && k == 0)
    {
        return 1.0;
    }
    else if ((N < 0) || (k < 0))
    {
        return 0.0;
    }
    else
    {
        return (1.0 - p) * binomial(N - 1, k, p) + p * binomial(N - 1, k - 1, p);
    }
} 
```

是的，这真的很慢......递归调用的数量有点大（大约〜N ^ 2）

是的，您可以使用基本上就像其他人已经说明的那样基本上缓存先前计算的值的记忆方法。对于某些人来说，记忆意味着保持递归策略并检查我们需要的值是否已计算，如果没有程序必须计算并缓存它，它真的很容易实现：

```
private static double binomialTopDown(int N, int k, double p)
{
    double[][] cache = new double[N + 1][k + 1];

    for (int i = 0; i < (N + 1); i++)
    {
         Arrays.fill(cache[i], Double.NaN);
    }

    return binomialTopDown(N, k, p, cache);
}

// More efficient
private static double binomialTopDown(int N, int k, double p, double[][] cache)
{
    if ((N == 0) && (k == 0))
    {
        return 1.0;
    }
    else if ((N < 0) || (k < 0))
    {
        return 0.0;
    }
    else if (Double.isNaN(cache[N][k]))
    {
        cache[N][k] = (1.0 - p) * binomialTopDown(N - 1, k, p, cache) + p * binomialTopDown(N - 1, k - 1, p, cache);
    }

    return cache[N][k];
} 
```

诀窍实际上是使用自下而上的方法（也称为制表法）以更有效的方式对计算进行排序。这通常是通过使用上述算法的迭代版本来实现的。

```
// Much more efficient
private static double binomialBottomUp(int N, int k, double p)
{
    /*
    double[][] cache = new double[N + 1][k + 1];

    cache[0][0] = 1.0;

    for (int i = 1; i <= N; i++)
    {
        cache[i][0] = Math.pow(1.0 - p, i);

        for (int j = 1; j <= k; j++)
        {
            cache[i][j] =  p * cache[i - 1][j - 1] + (1.0 - p) * cache[i - 1][j];
        }
    }

    return cache[N][k];
    */

    // Optimization using less memory, swapping two arrays
    double[][] cache = new double[2][k + 1];
    double[] previous = cache[0];
    double[] current = cache[1];
    double[] temp;

    previous[0] = 1.0;

    for (int i = 1; i <= N; i++)
    {
        current[0] = Math.pow(1.0 - p, i);

        for (int j = 1; j <= k; j++)
        {
            current[j] =  p * previous[j - 1] + (1.0 - p) * previous[j];
        }

        temp = current;
        current = previous;
        previous = temp;
    }

    return previous[k];
} 
```

这是使用自下而上方法的动态编程最有效的方法。

希望这可以帮助。

# ios - 这是创建自定义 UIView 的方式吗？

> ID：10356955
> 
> 赞同：0
> 
> 时间：2012-04-27T19:49:12.187
> 
> 标签：ios, xcode, custom-controls, calayer

我对 UIView 进行了子类化，因此可以将多个相同类型的视图添加到我的项目中。视图基本上是一个有半径的矩形，左边是一张图片，右边是一段文字。现在不要误会我的意思，下面的代码是有效的，但我总是问自己“是这样吗，还是我真的弄错了”。

1）我正在将 CALayers 与 UILabels 混合，可以吗？

2) setUpView 是按照它的方式完成的。

3）如果没问题，让 imageLayer 响应触摸事件的最佳选择是什么？

4）我也可以问一个附带问题吗？作为一个在商店里只有一个基本应用程序的兼职初学者，我有点挑剔。我的意思是，我是否应该让它工作并继续努力！你怎么看？

```
@synthesize dateLabel = _dateLabel;
@synthesize nameLabel = _nameLabel;
@synthesize photo = _photo;
@synthesize roundRect= _roundRect;
@synthesize imageLayer = _imageLayer;

-(void)setUpView
{

    //create the white rectangle
        self.roundRect.frame = CGRectMake(0.0, 0.0, self.frame.size.width, self.frame.size.height);
    self.roundRect.cornerRadius = 15.0;
    self.roundRect.backgroundColor = [UIColor clearColor].CGColor;
    self.roundRect.borderColor = [UIColor whiteColor].CGColor;
    self.roundRect.borderWidth = 2.0;
    self.roundRect.masksToBounds = YES;

   //create the photo 
   CGImageRef image = [self.photo CGImage];
    self.imageLayer.frame = CGRectMake(0.0, 0.0, self.roundRect.frame.size.width*0.48, self.roundRect.frame.size.height);
    self.imageLayer.borderColor = [UIColor whiteColor].CGColor;
    self.imageLayer.borderWidth = 2.0;
    self.imageLayer.masksToBounds = YES;
   [self.imageLayer setContents:(__bridge id)image];
   [self.imageLayer setContentsGravity:kCAGravityResizeAspectFill];
    [self.imageLayer setContentsRect:CGRectMake(0.0,0.0,1.1,1.0)];

    //create label
    self.nameLabel.frame = CGRectMake(self.imageLayer.frame.size.width+5, self.roundRect.frame.size.height*0.05, self.roundRect.frame.size.width*0.48,self.roundRect.frame.size.height*0.35);
    self.nameLabel.backgroundColor = [UIColor clearColor];
    self.nameLabel.textAlignment = UITextAlignmentCenter;
    self.nameLabel.baselineAdjustment = UIBaselineAdjustmentAlignCenters;
    self.nameLabel.textColor = [UIColor whiteColor];
    self.nameLabel.adjustsFontSizeToFitWidth =YES;

    self.nameLabel.font = [UIFont fontWithName:@"Gill Sans" size:50.0];

    [self.roundRect addSublayer:self.imageLayer];
    [self.layer addSublayer:self.roundRect];
    [self addSubview:self.nameLabel];

}

-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{

}

-(void)setPhoto:(UIImage *)photo
{
    _photo = photo;

    [self setUpView];

}

-(void)setNameLabel:(UILabel *)nameLabel
{
    _nameLabel = nameLabel;

    [self setUpView];

}

- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        self.roundRect = [[CALayer alloc]init];
        self.imageLayer = [[CALayer alloc]init];
        self.nameLabel = [[UILabel alloc]init];

    [self setUpView];
    }
    return self;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T20:15:39.807

您可以使用 Interface Builder 使这更容易。我会创建一个 XIB，并将 UIView 设置为我想要的大小。然后添加一个标签（nameLabel）并按照您的喜好进行配置。您可以使用 QuartzCore 图层cornerRadius 来设置圆角。然后您可以在 XIB 中使用您的子类并将其设置为 UIView 的类类型。不是文件所有者，而是视图。然后，您可以将您的标签链接为插座，而无需手动创建它。您可以删除上面的一些代码，并且仍然具有您的功能和外观。我已经学会了尽可能让 Interface Builder 完成工作。

希望这可以帮助。

# android - 来自服务提供商（电信网络）的弹出消息导致活动暂停

> ID：10356959
> 
> 赞同：0
> 
> 时间：2012-04-27T19:49:44.020
> 
> 标签：android, android-activity, android-alertdialog, onpause, service-provider

我发现来自我的服务提供商（电信网络）的弹出消息导致我的应用程序活动暂停。有什么办法可以阻止这些暂停我的活动？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T20:25:22.523

我不确定您是否可以做很多事情来阻止服务提供商的弹出窗口。

不过，处理这种情况的最简单方法是将倒数计时器或铃声播放器切换到后台[服务](http://developer.android.com/reference/android/app/Service.html)。

现在发生的情况是，当这些弹出窗口发生时，您的服务会暂时失去焦点，并在弹出窗口关闭时重新获得焦点。在服务中实现你的计时器和东西将防止这种情况发生。

**编辑：**

最好的方法是，使用所有按钮根据需要编写整个布局。在活动的点击中，您可以调用任何您想要的意图。同时，您可以将`countdowntimer`和`ringtoneplayer`设为 中的`static`对象`service`。

因此，在活动中，当您按下开始按钮时，您只需编写 service.countdowntimer.start() ，它将从活动中启动 cdt，停止时间和铃声播放器也是如此。您只是将铃声播放器和 cdt 转移到后台并在另一个扩展服务的类中实现它。休息几乎一切都保持不变。你甚至不需要任何类型的听众。

# underscore.js - Underscore.js 中带有模板的 if 语句问题

> ID：10356964
> 
> 赞同：1
> 
> 时间：2012-04-27T19:50:05.840
> 
> 标签：underscore.js

这是我的模板：

```
<script type="text/html" id="template_medassign">        
    <div class=" <%= pocket.get('spanTag') %>" >
        <a data-toggle="modal" href="#windowTitleDialog" class="thumbnail">                
            <% if ( <%= pocket.get('drugDoseDisplayName') %>.length < 0   ) { %>
                <label ><%= pocket.get('drugDoseDisplayName') %></label>
            <% } else { %>
                ...else block
            <% } %>
        </a>
    </div>
</script> 
```

我正在`pocket`从主模板传递对象数据，并且能够检索数据`spanTag`和`drugDoseDisplayName`属性。但是，如果我在 if 语句中尝试使用，我会从 underscore.js 收到错误，并显示“Microsoft JScript 运行时错误：预期的')'”

我也尝试了其他方式，通过在模型中维护另一个带有 bool 标志的道具，但没有运气。请提出解决方案。

```
<% if ( <%= pocket.get('isMedAsiigned') %>   ) { %>
<% if ( %> <%= pocket.get('isMedAsiigned') %> <%  ) { %> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T20:16:37.167

您正在尝试嵌套模板标签：

```
<% if ( <%= pocket.get('drugDoseDisplayName') %>.length < 0   ) { %>
        ^^^                                   ^^ 
```

并且在`_.template`将模板编译为 JavaScript 函数时会产生无效的 JavaScript。一旦你进入里面`<% ... %>`，你就已经在 J​​avaScript 中了，来自[精美的手册](http://documentcloud.github.com/underscore/#template)：

> [...] 以及执行任意 JavaScript 代码，使用 <% ... %>

无需嵌套模板标签，您可以这样做：

```
<% if ( pocket.get('drugDoseDisplayName').length < 0 ) { %> 
```

# mysql - MySQL 触发器“更新列”语法

> ID：10356967
> 
> 赞同：16
> 
> 时间：2012-04-27T19:50:37.297
> 
> 标签：mysql, syntax, triggers, sql-update

我们可以在更新特定列时使用 MySQL 触发器，它会更新同一表中的另一列（同一行）

```
create trigger my_trigger
BEFORE UPDATE OF col1, col2 ON TABLE_NAME
for each row
set NEW.col3 =  NEW.col3 +1; 
```

我尝试使用上面的代码`UPDATE OF col1, col2`。它在 MySQL 中不起作用。什么是正确的语法，有人可以指点我一些例子。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-04-27T20:22:43.083

您不能指定触发器仅在特定列的更新时运行（`UPDATE`影响整个记录），但您可以测试触发器中哪些列已更新：

```
DELIMITER ;;

CREATE TRIGGER my_trigger BEFORE UPDATE ON TABLE_NAME FOR EACH ROW
IF NOT (NEW.col1 <=> OLD.col1 AND NEW.col2 <=> OLD.col2) THEN
  SET NEW.col3 = NEW.col3 + 1;
END IF;;

DELIMITER ; 
```

# javascript - JS 正则表达式语法

> ID：10356973
> 
> 赞同：-4
> 
> 时间：2012-04-27T19:51:09.200
> 
> 标签：javascript, regex

我想在 JavaScript 中做一个正则表达式模式，它只允许一个带有数字的字符串和这个符号：()+ 和一个空格。长度为 5-16 个字符。

请注意：字符串中字符的顺序并不重要。

什么是正确的模式？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T19:53:28.293

这个怎么样：

```
/^[0-9 ()+]{5,16}$/ 
```

自己构建它很容易。) 首先，当你施加严格的限制时，你应该检查整个字符串，所以正则表达式应该被包装到`/^...$/`.

其次，如果你只需要一些特定的字符，你应该使用字符类：将它们全部写成 [...] 形式。在您的情况下，您可以使用快捷方式：替换`/^[0123456789 ()+]$/`为 just `/^[0-9 ()+]$/`。

最后，用 {$min, $max} 形式陈述一些定量限制：在你的情况下，这将是`{5,16}`. 把它和你到目前为止得到的东西混合在一起——瞧！你解决了任务。)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T19:53:54.667

```
if( myText.match(/\A[0-9 ()+]{5,16}\Z/) ) {
    // Yay!
} 
```

虽然正确指出我缺少锚字符，但使用 ^$ 只会匹配字符串的*行*，因此，“823479898237\n328742987”会匹配，尽管太长了。

# sql - sql查询..困惑

> ID：10356975
> 
> 赞同：1
> 
> 时间：2012-04-27T19:51:14.793
> 
> 标签：sql

我是新手，我不知道该怎么做..有人可以帮助我吗？

鉴于下表...

**部**

```
DEPT_ID     NAME 
1   HR 
2   Technical 
3   Marketing 
4   Sales 
```

**员工**

```
ID  NAME    DEPT_ID     SALARY  MANAGER_ID 
1   Alex    2   2000    
2   Sally   1   2000    
3   Amit    2   1500    1 
4   Jason   1   1500    1 
...     ...     ...     ...     ... 
```

使用前面的`DEPARTMENT`和`EMPLOYEE`表，编写一个 SQL 查询来打印在每个部门工作的员工人数。输出应如下所示：

```
NAME    COUNT 
HR  2 
Technical   2 
Marketing   0 
Sales   0 
```

请注意，并非所有部门都已配备人员，因此某些部门可能没有任何员工。我们仍然希望这些部门以零计数出现在结果中。

使用`EMPLOYEE`之前的表，编写一个 SQL 查询来打印出在每个经理手下工作的员工数量。输出应如下所示：

```
NAME    COUNT 
Alex    2 
Sally   0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T19:58:23.593

您需要加入表格，按部门分组，并计算每个部门的行数。
[试试这个链接](http://www.google.com/?q=sql%20join%20group%20count)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-18T07:35:43.200

解决第一部分问题：

```
select d.NAME, count(e.NAME)
from EMPLOYEE as e
right join DEPARTMENT as d
on e.DEPT_ID = d.DEPT_ID
group by d.DEPT_ID 
```

问题第二部分的解决方案（我不确定这个是否正确）：

```
select NAME, count(NAME)
from EMPLOYEE 
group by MANAGER_ID 
```

请检查 sqlfiddle：[http ://sqlfiddle.com/#!2/5e802/13](http://sqlfiddle.com/#!2/5e802/13)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-24T12:25:40.067

试试这个它可以帮助你：

一个）

```
 select d.Name as DepartmentName, count(e.id) as EmployeeCount from employee as e, department as d where e.DEPT_ID = d.DEPT_ID group by d.Name; 
```

b)

```
select a.name as Manager_Name,Count(a.name) as EmployeeCount from employee a, employee b where a.id=b.MANAGER_ID  group by a.name; 
```

# asp.net - ASP.NET 4 和 ASP.NET 4.5 中的数据集

> ID：10356976
> 
> 赞同：0
> 
> 时间：2012-04-27T19:51:19.067
> 
> 标签：asp.net, sql

ASP.NET 4 和 ASP.NET 4.5 中数据集的用途是什么？是什么使它成为比使用 DataReader / GridView 组合更好的选择？

我的兴趣只在于 DataSet、何时使用、为什么以及如何使用它。

我正在寻找充分解释的原因之一是因为 Microsoft 在其认证要求中仍然需要了解 DataSet（请参阅[使用 Microsoft .NET Framework 4 访问数据](http://www.microsoft.com/learning/en/us/exam.aspx?ID=70-516&locale=en-us#tab2)）。

我不确定，但似乎他们并没有像许多文章所暗示的那样放弃 ASP.NET 4 中的 DataSet，但如果我的假设不正确，请纠正我。您显然需要指出微软实际上说我们应该只在极少数情况下使用 DataSet / ASP.NET 的地方。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T19:58:01.427

我在 MCTS: ADO.NET 3.5 考试中做了数据集。基本上，他们解释说使用 DataTables 和 DataSets 很有用，因为您可以独立使用它们而无需与数据库的持续连接。

您可以通过数据库填充它们，然后在内存中使用它们。它们是“*主动断开的对象*”。在内存中使用它们之后，您可以将它们与您所做的任何更改一起保存回数据库。

典型的用例是，您从数据库中读取数据并填充数据集/数据表。然后将其绑定到 GridView 并让用户添加/编辑/删除它，然后将更改传播回数据库。

**编辑：有关数据集优缺点的真正平衡解释，请参阅[http://msdn.microsoft.com/en-us/magazine/cc163751.aspx](http://msdn.microsoft.com/en-us/magazine/cc163751.aspx)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T20:01:10.020

我停止使用数据集，因为它们在 Web 服务器和其他断开连接的环境中不是很有用（如果数据集不能直接链接到数据库）。

如果它是认证的一部分并且您需要认证（为什么？）而不是您需要学习......

我认为您最好将时间花在 Entity Framework 作为 ORM 工具上......

数据集对于在客户端-服务器连接的应用程序中进行快速开发很有用。简单的 CRUD 操作等。

# c - 在隐式函数声明的情况下默认参数提升

> ID：10356978
> 
> 赞同：0
> 
> 时间：2012-04-27T19:51:21.943
> 
> 标签：c, function, declaration, c89

我试图搜索旧问题，但我没有解决我的问题。

我试图解释我的怀疑；假设工作在c89模式下，如果在函数调用之前没有函数的原型，则有函数的隐式声明，函数的类型是`int`，参数通过Default Argument Promotions进行转换：

> char 或 short int 类型的对象（无论是否有符号）被提升为 int 或 unsigned int，视情况而定；并且 float 类型的对象被提升为 double 类型。

所以，如果我写这样的代码，我同意它必须工作：

```
int main(void){
    char a;
    short b,c;
    f(a,b,c);
    return 0;
}

int f(int a,int b,int c){
    return 1;
} 
```

这里也是：

```
int main(void){
    float a;
    short b,c;
    f(a,b,c);
    return 0;
}

int f(double a,int b,int c){
    return 1;
} 
```

但我不明白为什么以下两种情况有效

```
/*a)*/
int main(void){
    short a,b;
    float c;
    f(a,b,c);
    return 0;
}

int f(long a,long b,long c){
    return 1;
}

/*b)*/

int main(void){
    long a,b,c;
    f(a,b,c);
    return 0;
}

int f(int a,double b,double c){
    return 1;
} 
```

在 a) 的情况下：a 和 b 被提升为 int，c 被提升为两倍，然后呢？

在 b) 的情况下：这里没有 DAP 会发生什么？

所以问题是：当 DAP 之后或不执行 DAP 时，参数的类型与参数的类型不同，在隐式函数声明的情况下应用什么规则？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T20:13:52.407

在这两种情况下，都没有规则。这两个程序都表现出未定义的行为。

具体来说，在程序 b 中，DAP 不适用，因为传递给的值`f`是 type `long`。只有`char`,`short`和`float`被提升。

要查看*可能*`a`发生的情况，请为`b`和`c`in赋予值`main`并尝试打印它们（[程序 a](http://ideone.com/MCoUw)，[程序 b](http://ideone.com/xtf06)）。

# logging - Nuget 是否在安装包时创建错误日志文件？

> ID：10356981
> 
> 赞同：11
> 
> 时间：2012-04-27T19:51:34.900
> 
> 标签：logging, nuget, nuget-package

我有一个正在尝试安装的本地 Nuget 包。一切运行良好，我看不到任何具体错误，但大约 1/2 的安装需要完成的任务似乎没有发生或做任何事情。

我有 NuGet 包资源管理器，如果我知道从哪里开始，我可以修复安装。NuGet 在安装时是否会在某个地方创建错误日志文件，我在哪里可以找到它？

谢谢您的帮助。道格

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T21:15:04.673

使用`Package Manager Console`执行安装步骤。那里提供了日志输出。

`Package source`如果您从本地软件包安装，请确保选择您的。

下面失败的 nuspec 项目的示例输出：

```
PM> Install-Package MyTestPackage
Successfully installed 'MyTestPackage 0.0.1.4'.
Successfully added 'MyTestPackage 0.0.1.4' to Test_Project.
Missing expression after unary operator '!'.
PM> 
```

下面带有详细日志记录的示例输出：

```
PM> Install-Package ClearlyDoesNotExistYet -Verbose
  GET https://www.nuget.org/api/v2/FindPackagesById()?id='ClearlyDoesNotExistYet'
  OK https://www.nuget.org/api/v2/FindPackagesById()?id='ClearlyDoesNotExistYet' 220ms
Install-Package : Unable to find package 'ClearlyDoesNotExistYet' 
```

# c - c中链表的反向打印

> ID：10356982
> 
> 赞同：0
> 
> 时间：2012-04-27T19:51:40.660
> 
> 标签：c, linked-list

我正在尝试打印反向链接列表。但我只得到一个值。我哪里错了？请耐心等待，因为我是 C 新手。

```
#include<stdio.h>
#include<stdlib.h>

struct itemlist {
    int value;
    struct itemlist *next;
};

typedef struct itemlist item;

int main(void) {
    itemlist *curr,*head,*tail;

    head=NULL;
    tail=NULL;

    for (int i = 1; i < 10; i++) {
        curr=(itemlist *)malloc(sizeof(itemlist));
        curr->value=i;
        curr->next=tail;
        tail=curr;
        if (!head)
            head=curr;
    }

    curr=head;

    while (curr) {
        printf("Curr value is:%d\n",curr->value);
        curr=curr->next;
    }

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T19:58:21.380

似乎您应该从尾部而不是头部开始打印列表。

改变

```
curr=head; 
```

和

```
curr = tail; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T19:58:56.477

更改`curr=head`为`curr=tail`

下面是一个简单的例子，说明了一个双向链表，它可以帮助你理解链表

```
#include<stdio.h>
#include<stdlib.h>

typedef struct
{
        int value;
        struct itemlist *next;
        struct itemlist *prev;
}itemlist;

void forward(itemlist *head)
{
    itemlist *curr = head;
    while(curr)
    {
        printf("Curr value is: %d\n", curr->value);
        curr = curr->next;
    }
}

void backward(itemlist *tail)
{
    itemlist *curr = tail;
    while(curr)
    {
        printf("Curr value is: %d\n", curr->value);
        curr = curr->prev;
    }
}

int main(void)
{
        itemlist *curr,*head,*tail;

        head=NULL;
        tail=NULL;

        for(int i=1;i<10;i++)
        {
                curr=(itemlist *)malloc(sizeof(itemlist));
                curr->value=i;
                curr->next = NULL;
                if(tail)
                {
                    curr->prev = tail;
                    tail->next = curr;
                }
                tail=curr;
                if(!head)
                    head=curr;
        }

        printf("Forwards\n");
        forward(head);
        printf("Backwards\n");
        backward(tail);

        return 0;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T20:12:07.093

此代码打印 1 到 9

```
#include<stdio.h>
#include<stdlib.h>

struct itemlist
{
        int value;
        struct itemlist *next;
};

typedef struct itemlist item;

int main(void)
{
        itemlist *curr,*head,*prev;

        head=NULL;
        curr=NULL;
        prev=NULL;

        for(int i=1;i<10;i++)
        {
                curr = new itemlist;
                curr->value = i;
                curr->next = NULL;

                if (head == NULL)
                   head = curr;
                if(prev != NULL)
                   prev->next = curr;

                prev = curr;
        }

        curr=head;

        while(curr)
        {
                printf("Curr value is:%d\n",curr->value);
                curr=curr->next;
        }
        return 0;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-11-26T01:18:32.487

你根本不需要尾巴，只需要一个递归函数。该函数在 . 之前单独指向 next `printf`。

```
void print_reverse(Itemlist *it){
    if(it !=NULL){
        print_reverse(it->next);
        printf("Current value is:%d\n",it->value);
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-27T19:55:28.927

当您退出循环时，您的`head`（仅更新一次并且在添加第一个元素时）指向最后一个元素。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-27T19:57:38.383

问题是，在第一次迭代中，当您分配当前项目的下一个元素时：

```
curr->next=tail; 
```

tail 的值为 NULL，因此列表的头部无法到达其余部分

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-27T19:59:34.010

你混在一起了`head`：`tail`

第一个节点（节点 0）：

```
Value = 1
next = tail = NULL;
tail = Node 0
head = Node 0 
```

第二个节点（节点 1）：

```
Value = 2
next = tail = Node 0 
tail = Node 1 
head = Node 0 
```

现在你有

`Node 1`-> `Node 0`->`NULL` 和`head`=`Node 0`和`tail`=`Node 1`

因此，当您打印时，您从节点 0 开始（“头部”，但实际上是尾部）打印第一个节点然后结束

您必须将 head 和 tail 切换为正确的名称或开始打印`tail`

编辑：既然你说你想要它们，你可以这样做：

```
int main(void)
{
   itemlist *curr,*head,*tail;

   head=NULL;
   tail=NULL;

   for(int i=1;i<10;i++)
   {
       curr=(itemlist *)malloc(sizeof(itemlist));
       curr->value=i;
       curr->next = NULL;

       //if there is something in the list add the current node after it              
       if(tail) 
          tail->next = curr;

       //Update the tails so it's pointing to the current last node         
       tail = curr;

       //Set the head ONCE
       //this will happened the first time when if(tail) fails
       if(!head)
         head=curr;
  }

  //start at the head
  curr=head;

  while(curr)
  {
       printf("Curr value is:%d\n",curr->value);
       curr=curr->next;
  }
  return 0;
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-04-27T20:06:38.250

至少据我了解，您的计划是以相反的顺序创建一个链表，然后打印出它的内容。如果是这样，你可能想要这样的东西：

```
#include <stdlib.h>
#include <stdio.h>

struct itemlist {
    int value;
    struct itemlist *next;
};

int main() { 

    struct itemlist *head = NULL;
    struct itemlist *pos;
    int i;

    for (i=0; i<10; i++) {
        struct itemlist *node = malloc(sizeof(*node));
        node->value = i;
        node->next = head;
        head = node;
    }

    for (pos=head; NULL != pos; pos = pos->next)
        printf("%d\n", pos->value);
    return 0;
} 
```

请注意，您不需要指向“尾部”的指针。基本思想非常简单：从`head`一个空列表（即空指针）开始。通过将每个新节点的`next`指针设置为列表的当前开头，然后将列表的开头设置为指向新节点，将每个新节点插入到列表的开头。

# image - 服务器端的图像缓存

> ID：10356983
> 
> 赞同：0
> 
> 时间：2012-04-27T19:51:58.800
> 
> 标签：image, caching, server-side

对于在 java/spring 中创建的产品目录 Web 应用程序，它从第三方 Web 服务获取产品图像，在服务器端缓存图像的好策略是什么？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T20:04:46.737

让您的站点创建指向本地托管页面的 IMG 引用。此页面将执行以下操作：

```
if (the requested image does not exist in the local cache) {
    go to the third party site and save it to the local cache
}
serve the image from the local cache 
```

根据第三方站点上图像可能更改的频率，您可能需要添加一个定期删除超过 X 天的图像的 cron 作业。

# jsf - 复合组件和 ID

> ID：10356993
> 
> 赞同：9
> 
> 时间：2012-04-27T19:52:24.560
> 
> 标签：jsf, jsf-2, composite-component

我想在我的 JSF 复合组件中实现一些 javas 脚本，但是我的 id 有问题。我的java脚本：

```
document.getElementById("myForm:customerId") 
```

不起作用，因为 id 错误。我有 JSF 复合组件：

```
<composite:implementation>
    <div id="element_customer">
        <h2 class="element_title">Customer</h2>
        <h:form id="myForm">
            <h:inputText id="customerId" value="#{cc.attrs.customerId}"/>
        </h:form>
    </div>
</composite:implementation> 
```

和 HTML 输出是：

```
<div id="element_customer">
    <h2 class="element_title">Customer</h2>
    <form id="j_idt44:myForm" name="j_idt44:myForm" method="post" ... >
        <input type="hidden" name="j_idt44:myForm" value="j_idt44:myForm" />
        <input id="j_idt44:myForm:customerId" ... name="j_idt44:myForm:customerId" />
    </form>
 </div> 
```

为什么在 HTML 输出中使用“j_idt44”？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-27T20:00:08.820

复合组件是,等[`NamingContainer`](http://docs.oracle.com/javaee/6/api/javax/faces/component/NamingContainer.html)组件。这允许您在同一个视图中拥有多个组件，而不会出现 ID 冲突。`<h:form>``<h:dataTable>`

您还需要给复合组件一个固定的 ID。例如

```
<my:composite id="someId" /> 
```

我还建议使用`<div id="#{cc.id}">`而不是`<div id="element_customer">`. 然后它会变成`someId`上面的例子。

* * *

**与具体问题无关**，这并不完全是复合组件的正确目的。复合组件的意图是与`<h:inputText>`等相同。您似乎更想要一个标记文件或者可能是一个包含文件。另请参阅[何时使用 <ui:include>、标记文件、复合组件和/或自定义组件？](https://stackoverflow.com/questions/6822000/when-to-use-uiinclude-tag-files-composite-components-and-or-custom-componen)