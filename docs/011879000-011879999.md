# StackOverflow 问答 11879000-11879999

# php - 如何从目录中的文件夹中选择图像？

> ID：11879003
> 
> 赞同：-4
> 
> 时间：2012-08-09T07:55:02.007
> 
> 标签：php

我正在使用类似于 [http://tympanus.net/codrops/2010/05/23/fresh-sliding-thumbnails-gallery-with-jquery-php](http://tympanus.net/codrops/2010/05/23/fresh-sliding-thumbnails-gallery-with-jquery-php)的幻灯片，我希望显示文件夹的每个图像而不是下拉正如我试图学习 PHP .....请帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T08:08:48.907

首先：这是一个非常具体的问题。贴出你的代码？你尝试了什么？

但是：关于您的标题`"How to select images from a folder?"`，请从这里开始：

```
<?php

$directory = '.'; // your directory

$files  = scandir( $directory );
$images = array();

foreach( $files as $file )
{
    $attributes = getimagesize( $file );
    if( $attributes )
    {
        array_push( $images, $file );
    }
}

// An array with your images
print_r( $images ); 
```

# c# - 在 VSTO 加载时保留剪贴板

> ID：11879011
> 
> 赞同：6
> 
> 时间：2012-08-09T07:55:35.787
> 
> 标签：c#, excel, vsto, clipboard

我编写了一个小型应用程序来测试 Excel VSTO 的功能。但是，我遇到了一个问题。

当我启动 Excel 时，我的剪贴板被清除。我已经通过 Google 追踪到这是插件（特别是 COM 插件）的问题，如果未正确初始化，则会自动清除剪贴板。对我来说不幸的是，我不知道如何在 VSTO 中保存剪贴板，而 Google 也没有多大帮助。我不会调用任何明显会清除剪贴板的函数。ThisAddin 函数中唯一的东西是一个 if/else 块，它从一些属性中读取并设置一些标志。

我已经考虑过将剪贴板上的数据复制到某个对象然后只是替换它的想法，但这看起来很hacky并且可能行不通。

谁能解释一下我的 VSTO 如何/为什么在 Excel 启动时清除剪贴板以及如何补救？

编辑：

在稍微深入一点之后，我认为它是我的个人测试插件是错误的。我发现它要么是 Team Add-In，要么是 Adob​​e Contribute。鉴于 Adob​​e 在这些方面的记录，我会继续说它可能是贡献加载项。感谢大家的回复。这将教我使用 Excel 的非香草安装进行 VSTO 练习。

**我将保留此主题，以便更多人可以为 VSTO Excel 加载项（或办公套件的任何加载项）在启动时清除剪贴板的可能原因做出贡献。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T13:52:49.350

最好识别正在破坏剪贴板并将其删除的插件。

如果这不是一个选项，请查看 Chris 链接中的一些答案。我之前已经使用 Win32 API 完成了这项工作。我认为列出的答案中缺少的是对 OpenClipboard（[http://msdn.microsoft.com/en-us/library/windows/desktop/ms649048%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms649048%28v=vs.85%29.aspx)）和 CloseClipboard 的调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-26T14:53:07.107

COM 插件 Adob​​e PDF Maker，蓝牙模块在 Excel 启动时清除剪贴板。禁用它以停止此行为。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T13:20:56.703

当存在复杂的数据类型时，尝试备份/恢复剪贴板是愚蠢的。您将生成不需要的剪贴板事件。在这里查看我之前的答案： [https ://stackoverflow.com/a/2579846/289135](https://stackoverflow.com/a/2579846/289135)

# python - String.maketrans 用于英语和波斯语数字

> ID：11879025
> 
> 赞同：21
> 
> 时间：2012-08-09T07:56:56.950
> 
> 标签：python, python-2.7, python-unicode

我有这样的功能：

```
persian_numbers = '۱۲۳۴۵۶۷۸۹۰'
english_numbers = '1234567890'
arabic_numbers  = '١٢٣٤٥٦٧٨٩٠'

english_trans   = string.maketrans(english_numbers, persian_numbers)
arabic_trans    = string.maketrans(arabic_numbers, persian_numbers)

text.translate(english_trans)
text.translate(arabic_trans) 
```

我希望它将所有阿拉伯语和英语数字翻译成波斯语。但是 Python 说：

```
english_translate = string.maketrans(english_numbers, persian_numbers)
ValueError: maketrans arguments must have same length 
```

我尝试使用 Unicode 对字符串进行编码，`utf-8`但我总是遇到一些错误！有时问题是阿拉伯字符串！您知道这项工作的更好解决方案吗？

### 编辑：

问题似乎是 ASCII 中的 Unicode 字符长度。像“۱”这样的阿拉伯数字是两个字符——我用`ord()`. 长度问题从这里开始:-(

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2018-04-25T13:47:41.927

请参阅将所有字符串转换为 UTF8 的[unidecode](https://pypi.python.org/pypi/Unidecode)库。在以不同语言输入数字时非常有用。

在 Python 2 中：

```
>>> from unidecode import unidecode
>>> a = unidecode(u"۰۱۲۳۴۵۶۷۸۹")
>>> a
'0123456789'
>>> unidecode(a)
'0123456789' 
```

在 Python 3 中：

```
>>> from unidecode import unidecode
>>> a = unidecode("۰۱۲۳۴۵۶۷۸۹")
>>> a
'0123456789'
>>> unidecode(a)
'0123456789' 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-08-09T12:04:40.457

Unicode 对象可以将这些数字（阿拉伯文和波斯文）解释为实际数字 - 无需使用字符替换来翻译它们。

**编辑 -** 我想出了一种使用 Python2 正则表达式进行替换的方法：

```
# coding: utf-8

import re

# Attention: while the characters for the strings bellow are 
# dislplayed indentically, inside they are represented
# by distinct unicode codepoints

persian_numbers = u'۱۲۳۴۵۶۷۸۹۰'
arabic_numbers  = u'١٢٣٤٥٦٧٨٩٠'
english_numbers = u'1234567890'

persian_regexp = u"(%s)" %  u"|".join(persian_numbers)
arabic_regexp = u"(%s)" % u"|".join(arabic_numbers)

def _sub(match_object, digits):
    return english_numbers[digits.find(match_object.group(0))]

def _sub_arabic(match_object):
    return _sub(match_object, arabic_numbers)

def _sub_persian(match_object):
    return _sub(match_object, persian_numbers)

def replace_arabic(text):
    return re.sub(arabic_regexp, _sub_arabic, text)

def replace_persian(text):
    return re.sub(arabic_regexp, _sub_persian, text) 
```

尝试“text”参数本身必须是 unicode。

（也可以通过使用 lambdas 并将一些表达式组合在一行中来缩短此代码，但这样做没有意义，但会失去可读性）

它应该对你有用，但请阅读我发布的原始答案

**——原始答案**

因此，如果您将变量实例化为 unicode（在引号字符前添加 u），则它们在 Python 中可以正确理解：

```
>>> persian_numbers = u'۱۲۳۴۵۶۷۸۹۰'
>>> english_numbers = u'1234567890'
>>> arabic_numbers  = u'١٢٣٤٥٦٧٨٩٠'
>>> 
>>> print int(persian_numbers)
1234567890
>>> print int(english_numbers)
1234567890
>>> print int(arabic_numbers)
1234567890
>>> persian_numbers.isdigit()
True
>>> 
```

顺便说一句，unicode 对象不存在“maketrans”方法（在 Python2 中 - 请参阅注释）。

了解有关 unicode 的基础知识非常重要——对于每个人来说，即使是只编写英语程序的人，他们认为他们永远不会处理 26 个拉丁字母中的任何字符。在编写将处理不同字符的代码时，这一点至关重要 - 如果您不知道自己在做什么，除非偶然，否则该程序可能无法运行。

一篇非常好的文章是[http://www.joelonsoftware.com/articles/Unicode.html](http://www.joelonsoftware.com/articles/Unicode.html) - 请立即阅读。你可以记住，在阅读它时，Python 允许使用 unicode 对象的“encode”方法将 unicode 字符转换为任何“物理”编码的字符串。

```
>>> arabic_numbers  = u'١٢٣٤٥٦٧٨٩٠'
>>> len(arabic_numbers)
10
>>> enc_arabic = arabic_numbers.encode("utf-8")
>>> print enc_arabic
١٢٣٤٥٦٧٨٩٠
>>> len(enc_arabic)
20
>>> int(enc_arabic)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ValueError: invalid literal for int() with base 10: '\xd9\xa1\xd9\xa2\xd9\xa3\xd9\xa4\xd9\xa5\xd9\xa6\xd9\xa7\xd9\xa8\xd9\xa9\xd9\xa0' 
```

因此，字符在编码时失去了作为“单个实体”和数字的意义——编码对象（Python 2.x 中的 str 类型）只是一个字节串——但在将这些字符发送到程序的任何输出时仍然需要它- 无论是控制台、GUI 窗口、数据库、html 代码等...

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2019-06-12T20:38:44.687

您可以使用[persiantools](https://pypi.org/project/persiantools/)包：

例子：

```
>>> from persiantools import digits

>>> digits.en_to_fa("0987654321")
'۰۹۸۷۶۵۴۳۲۱'

>>> digits.ar_to_fa("٠٩٨٧٦٥٤٣٢١")   # or digits.ar_to_fa(u"٠٩٨٧٦٥٤٣٢١")
'۰۹۸۷۶۵۴۳۲۱' 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2020-03-12T08:05:47.107

`unidecode`将所有字符从波斯语转换为英语，如果您只想更改数字，请遵循以下命令：

在 python3 中，您可以使用此代码将任何波斯|阿拉伯数字转换为英文数字，​​同时保持其他字符不变：

```
intab='۱۲۳۴۵۶۷۸۹۰١٢٣٤٥٦٧٨٩٠'
outtab='12345678901234567890'
translation_table = str.maketrans(intab, outtab)
output_text = input_text.translate(translation_table) 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-09T07:58:58.583

使用 Unicode 字符串：

```
persian_numbers = u'۱۲۳۴۵۶۷۸۹۰'
english_numbers = u'1234567890'
arabic_numbers  = u'١٢٣٤٥٦٧٨٩٠' 
```

并确保你的 Python 文件的编码是正确的。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2021-08-25T11:47:19.263

```
def persian_number(persiannumber):

    number={
        '0':'۰',
        '1':'۱',
        '2':'۲',
        '3':'۳',
        '4':'۴',
        '5':'۵',
        '6':'۶',
        '7':'۷',
        '8':'۸',
        '9':'۹',
   }

    for i,j in number.items():
        persiannumber=time2str.replace(i,j)

    return time2str 
```

persiannumber 必须是字符串

# prepared-statement - Oracle - PreparedStatement 命令未正确结束

> ID：11879027
> 
> 赞同：0
> 
> 时间：2012-08-09T07:57:06.580
> 
> 标签：prepared-statement, apostrophe

我正在使用`Oracle 11g`，当我尝试使用 来创建 select 语句时`apostrophe`，出现以下错误。

准备好的语句应该处理撇号还是我应该这样做？有没有办法在执行之前查看查询（`with true values instead of '?') ?`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T11:22:42.050

您在表名 ( `T`) 和`WHERE`. 因此，被执行的 SQL 看起来像这样`SELECT * FROM TABLE TWHERE T.COL1 = '<somevalue>' AND T.COL2 = '<somevalue>' AND T.COL3 = '<somevalue>'`——注意**TWHERE**。

# php - 如何防止直接访问脚本

> ID：11879030
> 
> 赞同：-3
> 
> 时间：2012-08-09T07:57:20.740
> 
> 标签：php, javascript

我有一个从 html 标签调用的 php 脚本，如

```
<script src="js/myscript.php"> </script> 
```

请帮我找到一个 php 函数来检测这个脚本是直接调用还是从我网站的脚本标签调用。

我希望防止有人将链接粘贴到地址栏并获取 myscript.php 的内容，如

```
http://www.mysite.com/js/myscript.php 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T07:59:49.963

除了检查 $_SERVER['HTTP_REFERER'] 之外，您在这里无能为力，这绝不是一种安全的方法。几乎不可能按照您的要求去做，因为有一些简单的方法可以解决这个问题。

你最好的办法是混淆代码，如果他们加载 URL，这将使它更难阅读，但同样，也有解决这个问题的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T07:58:54.760

如果您使用的是 javascript，则不能阻止每个人都可以看到它。你不能指望浏览器能够做脚本告诉它做什么而不告诉它做什么:)

您的文件 ext 是 PHP，但它位于 js 文件夹中。如果输出只有 JS，你无法阻止人们以任何真正可靠的方式查看它。

# c++ - 虚拟表上的 C++ 虚拟析构函数和类的类型信息

> ID：11879035
> 
> 赞同：1
> 
> 时间：2012-08-09T07:57:56.570
> 
> 标签：c++, oop

我总是对 c++ 虚拟表的内存布局感到困惑。这是我用来研究它的示例代码：

```
#include <cstdio>
#include <iostream>
using namespace std;
class Point
{
public:
    Point()
    {
        cout<<"Point constructor"<<endl;
    }

    virtual void func_hs()
    {
        cout<<"Point::func_hs"<<endl;
        printf("the address of this --func_hs:%p\n",&Point::func_hs);
    }
    virtual void  func_zzy()
    {
        cout<<"Point::func_zzy"<<endl;
        printf("the address of this --func_zzy:%p\n",&Point::func_zzy);
    }

    void printVt()
    {
        printf("the address of object,this:%p\nthe address of vt:%p\n",
               this,(void*)*(int*)this);
    }
    void callVtFuncs(int num=2)
    {   
        typedef void (*Funp)(void);

        for(int i=0;i<num;i++)
        {
            Funp funp=(Funp)*((int*)*(int*)this+i);
            printf("%p\n",((int*)*(int*)this+i));
            printf("Point::callVtFuncs=>address of this fun:%p\n",funp);
            if(i==2||i==3)
            {
                continue;
            }
            funp();
        }
    }

    void printVirtualFunAddress()
    {
        cout<<endl<<endl;
        printf("func_hs:%p\nfunc_zzy:%p\n",&Point::func_hs,&Point::func_zzy);
    }
    virtual ~Point()
    {
        cout<<"Point destructor"<<endl;
    }
    virtual void  func_zzzy()
    {
        cout<<"Point::func_zzzy"<<endl;
        printf("the address of this --func_zzzy:%p\n",&Point::func_zzzy);
    }
protected:
    float x,y,z;
};

int main(int argc, char *argv[])
{
    Point point;
    point.printVt();
    point.callVtFuncs(5);
    point.printVirtualFunAddress();
    return 0;
} 
```

我在课堂上放了4个虚函数，并打印出地址信息。这是输出：

```
Point constructor
the address of object,this:0xbffff620
the address of vt:0x8048db8

0x8048db8
Point::callVtFuncs=>address of this fun:0x8048914
Point::func_hs
the address of this --func_hs:0x1
0x8048dbc
Point::callVtFuncs=>address of this fun:0x8048966
Point::func_zzy
the address of this --func_zzy:0x5
0x8048dc0
Point::callVtFuncs=>address of this fun:0x8048b0a
0x8048dc4
Point::callVtFuncs=>address of this fun:0x8048b56
0x8048dc8
Point::callVtFuncs=>address of this fun:0x8048b74
Point::func_zzzy
the address of this --func_zzzy:0x11

func_hs:0x1
func_zzy:(nil)
func_zzzy:0x5
Point destructor 
```

我完全不明白为什么最后一个输出是 'funz_zzy:(nil)' 和 'funz_zzy:0x5' 但上面是 0x5 和 0x11。

这是一些调试信息：（linux 32bit）

```
(gdb) x/16a 0x8048da8
0x8048da8:  0xa7025 0x0 0x0 0x8048dd4 <_ZTI5Point>
0x8048db8 <_ZTV5Point+8>:   0x8048914 <Point::func_hs()>    0x8048966 <Point::func_zzy()>   0x8048b0a <Point::~Point()> 0x8048b56 <Point::~Point()>
0x8048dc8 <_ZTV5Point+24>:  0x8048b74 <Point::func_zzzy()>  0x696f5035  0x746e  0x804a248 <_ZTVN10__cxxabiv117__class_type_infoE@@CXXABI_1.3+8>
0x8048dd8 <_ZTI5Point+4>:   0x8048dcc <_ZTS5Point>  0x3b031b01  0x80    0xf 
```

我不明白为什么有两个 Point::~Point()？0x804a248 处的信息是否代表类的类型信息？

其他一些信息：

```
(gdb) x/1a 0x8048dd4
0x8048dd4 <_ZTI5Point>: 0x804a248 <_ZTVN10__cxxabiv117__class_type_infoE@@CXXABI_1.3+8> 
```

0x8048dd4 是做什么用的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T09:00:23.023

首先，当然：你所做的是完全未定义的行为，理论上任何事情都可能发生。但我怀疑您知道这一点，并且正在“试验”以了解编译器会做什么。当然，在实践中，无论你看到什么都将非常依赖于编译器——我猜你在 Intel 上使用 g++，因为我知道的其他编译器的输出与你看到的有很大不同。

至于为什么最后的输出很奇怪：你还有另一个未定义的行为。您正在输出 using `"%p"`，这意味着您需要传递 a `void*`，或者您有未定义的行为。在实践中，它很可能也表示指向非成员函数的指针（Posix 或多或少需要它工作），但指向成员函数的指针完全不同。通常，指向成员函数的指针（如`&Point::func_hs`) 将对应于某种结构，带有某种附加信息来指示函数是否是虚拟的，以及 vtable 中的索引（如果函数是虚拟的）或函数的物理地址。通常（但同样，这取决于实现），指向成员函数的指针的大小将大于指向非成员的指针（或指向静态成员的指针）的大小。

如果您的目标是了解布局，我会将实际内存转储为十六进制，使用`sizeof(&Point::func_hs)`等。例如：

```
template <typename T>
class DumpAsUInt
{
    T const& myValue;
public:
    DumpAsUInt( T const& value ) : myValue( value ) {}
    friend std::ostream& operator<<( std::ostream& dest, DumpAsUInt const& obj )
    {
        unsigned const* p = (unsigned const*)( &obj.myValue );
        for ( int i = 0; i != sizeof(T) / sizeof(unsigned); ++ i ) {
            if ( i != 0 ) {
                dest << ' ';
            }
            dest << p[i];
        }
        return dest;
    }
};

template <typename T>
DumpAsUInt<T>
dumpAsUInt( T const& value )
{
    return DumpAsUInt<T>( value );
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T08:57:28.040

> 我完全不明白为什么最后一个输出是 'funz_zzy:(nil)' 和 'funz_zzy:0x5' 但上面是 0x5 和 0x11。

这是因为在一种情况下您使用`printf()`多个参数，而在其他情况下只使用一个。由于指向成员的指针似乎是 8 字节长度类型，因此您会得到这个额外的零。试试这个代码：

```
printf("sizeof func:%u\n",sizeof(&main));
printf("sizeof memfunc:%u\n",sizeof(&Point::printVirtualFunAddress));
printf("sizeof virtmemfunc:%u\n",sizeof(&Point::func_zzzy)); 
```

对我来说它打印

```
sizeof func:4
sizeof memfunc:8
sizeof virtmemfunc:8 
```

> 我不明白为什么有两个 Point::~Point()？

看起来这与它是虚拟的有关。如果删除`virtual`关键字，则只会生成一个析构函数。第二个与第一个相同，但它额外调用`free()`了一些数据的函数。我没弄清楚这是干什么用的。

> 0x804a248 处的信息是否代表类的类型信息？

这应该是你得到的结构`typeid(Point)`。

# javascript - 如何在没有冲突的情况下将 JQuery 包含在 javascript 文件中

> ID：11879037
> 
> 赞同：7
> 
> 时间：2012-08-09T07:58:08.930
> 
> 标签：javascript, jquery, google-analytics

> **可能重复：**
> [如果 jQuery 尚不存在，则使用 JavaScript 动态包含 jQuery](https://stackoverflow.com/questions/1973647/dynamically-including-jquery-using-javascript-if-its-not-already-present)

我正在制作一个类似于谷歌分析的网站，因为我让我的用户在他们的网站上粘贴了一些 javascript 代码。我的问题是如何设法在我的 javascript 代码片段中包含 JQuery？

我已经知道如何使用 js 包含文件：[如何在另一个 JavaScript 文件中包含一个 JavaScript 文件？](https://stackoverflow.com/questions/950087/include-javascript-file-inside-javascript-file)

但是我如何确保没有 JQuery 冲突呢？

任何在生成嵌入式 javascript 代码方面提出良好做法的人的金星：)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T08:22:26.577

简短的回答是：你没有。

您不应该将框架强加给您的用户。谷歌不使用分析来做这件事，你也不应该这样做。仅使用基本的 java 脚本功能并从头开始编写或从其他项目中复制您需要的内容（只要许可证允许）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T08:01:20.810

始终测试您包含的任何内容是否尚未定义：

```
if(typeof jQuery === "undefined") {
   // include jQuery
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T08:12:28.613

我会建议使用 jQuery 无冲突功能。

[http://uzbekjon.hubpages.com/hub/How-to-use-jQuery_noConflict](http://uzbekjon.hubpages.com/hub/How-to-use-jQuery_noConflict)

希望，它会有所帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T08:27:02.570

如果不与用户脚本发生冲突，就无法做到这一点。

阅读此讨论以了解如何在没有 jQuery 的情况下编写代码：**[是否有一种简单的方法可以将 jquery 代码转换为 javascript？](https://stackoverflow.com/questions/978799/is-there-an-easy-way-to-convert-jquery-code-to-javascript)**

# typo3 - 使用直接邮件获取时事通讯页面时，typo3temp 的许可是否会影响？

> ID：11879046
> 
> 赞同：1
> 
> 时间：2012-08-09T07:58:41.547
> 
> 标签：typo3, newsletter

当我试图在 TYPO3 后端的直接邮件文件夹下获取页面时，它会出现以下错误

无法获取纯文本内容。无法获取 HTML 内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T09:28:43.877

如果您缺少**包含静态**部分的模板，大多数情况下都会出现此错误。

以管理员权限登录到您的 TYPO3 后端。接下来转到您的例如根模板。选择“包含”-选项卡并确保包含下一个“包含静态”：

```
Direct Mail Content Boundaries (direct_mail)
Direct Mail Plaintext (direct_mail) 
```

希望这可以帮助你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T19:40:35.103

如果您是 linux ，请尝试将您的服务器 ip 和域添加到`/etc/hosts`文件中……如果您在 windows 中，则将`\System32\drivers\etc`.

可以在此处找到详细说明：

[http://devbackyard.blogspot.pt/2012/10/direct-mail-typo3-content-could-not-be.html](http://devbackyard.blogspot.pt/2012/10/direct-mail-typo3-content-could-not-be.html)

# json - 经典asp中的查询字符串到json

> ID：11879049
> 
> 赞同：2
> 
> 时间：2012-08-09T07:58:54.883
> 
> 标签：json, asp-classic, query-string

我是 Classic ASP 的初学者，这是我在 stackoverflow 中的第一个问题......我需要转换一个查询字符串，在 json 中使用随机数量的参数：

```
param1=hi&param2=hello&param3=byebye....  paramN=gudnight 
```

在这样的事情中：

```
{"param1":"hi","param2":"hello","param3":"byebye"...,"paramN":"gudnight"} 
```

有什么东西可以在asp中自动执行吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T08:37:03.907

有可能的。您需要设置所有这些参数 Dictionary，然后使用 JavaScriptSerializer 对其进行序列化。例子：

```
public string ConvertParametersToJson(Dictionary<string, string> queryParameters)
{
   var dic = Request.QueryString.AllKeys.ToDictionary<string, string, object>(key => key, key => Request.QueryString[key]);
   var serializer = new JavaScriptSerializer { MaxJsonLength = int.MaxValue };
   var json = serializer.Serialize(dic);
   return json;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T21:20:19.480

干得好。

```
<script language="javascript" runat="server" src="http://www.JSON.org/json2.js"></script>

<%
    DIM jsonQueryString
    SET jsonQueryString = JSON.parse("{}")

    For Each item In Request.QueryString
        DIM key : key = Request.QueryString.Key(item)
        DIM val : val = Request.QueryString(key)(1)
        jsonQueryString.set key, val
    Next

    Response.Write JSON.stringify(jsonQueryString)
%> 
```

更新：包含的 json2.js 文件是一个 json 解析器类，但它不再位于该位置。我们下载了它的副本，该副本位于我们的服务器上，我们目前正在使用。您可以在以下网址找到它的最新副本 - [https://github.com/douglascrockford/JSON-js](https://github.com/douglascrockford/JSON-js)。

因此，如果我使用以下网址访问我的测试页面 -

```
http://localhost:8080/tests/ws/parsequerytojson.asp?a=1&b=2&c=3 
```

我得到以下 JSON 格式的响应 -

```
{
    a: "1",
    b: "2",
    c: "3"
} 
```

# iphone - UINavigationController 导航

> ID：11879050
> 
> 赞同：0
> 
> 时间：2012-08-09T07:58:55.860
> 
> 标签：iphone, objective-c, ios

我使用 UINavigation 控制器并有一个问题。有没有办法从**第三视图**切换到**第一视图**？我创建新对象`FirstView *controller; [self.navigationcontroller pushViewController:controller animated:YES];`的方法不适合我（丢失从父视图传输到第一个视图的数据）。

![输入图片描述rtrt](../Images/415fe6bd8830a1b7934338eb56614c33.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T08:07:08.830

假设您知道要返回的视图控制器并将其存储在`returnToViewController`：

```
[self.navigationController popToViewController:retunToViewContoller animated:YES]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T08:16:27.847

试试这个 。它会起作用的。

您可以获取数组中的所有视图控制器并弹出到特定的视图控制器。此代码将弹出到您的 FirstView 控制器。

```
NSArray *array = [self.navigationController viewControllers];

[self.navigationController popToViewController:[array objectAtIndex:1] animated:YES]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T08:03:02.963

您可以使用：

```
[[self navigationController] popViewControllerAnimated:YES]; 
```

返回一个视图控制器；或者：

```
[self.navigationController popToRootViewControllerAnimated:YES]; 
```

回到层次结构中的第一个视图控制器。

# macros - 两个坐标之间的行驶距离

> ID：11879053
> 
> 赞同：1
> 
> 时间：2012-08-09T07:59:08.830
> 
> 标签：macros, coordinates, driving-distance

我有一长串 excel 格式的位置列表，我需要使用 lat&long 计算这些位置之间的行驶距离。有没有我可以使用的宏。干杯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2018-10-07T07:25:41.333

from :[链接](https://www.mrexcel.com/forum/excel-questions/202255-calculating-distance-between-two-latitude-longitude-points.html) 太简单了

```
Miles:
=ACOS(COS(RADIANS(90-Lat1)) * COS(RADIANS(90-Lat2)) + SIN(RADIANS(90-Lat1)) * 
SIN(RADIANS(90-Lat2)) * COS(RADIANS(Long1-Long2))) * 3959

Kilometers:
=ACOS(COS(RADIANS(90-Lat1)) * COS(RADIANS(90-Lat2)) + SIN(RADIANS(90-Lat1)) * 
SIN(RADIANS(90-Lat2)) * COS(RADIANS(Long1-Long2))) * 6371 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T08:13:02.987

这是我发现在宏中执行此操作的[链接，希望对您有所帮助](http://www.contextures.com/excellatitudelongitude.html)

# linux - Bash 脚本返回域而不是 URL

> ID：11879057
> 
> 赞同：1
> 
> 时间：2012-08-09T07:59:25.313
> 
> 标签：linux, bash, awk

我有这个 bash 脚本，我编写它来分析任何给定网页的 html。它实际上应该做的是返回该页面上的域。目前它返回该网页上的 URL 数量。

```
#!/bin/sh

echo "Enter a url eg www.bbc.com:"
read url
content=$(wget "$url" -q -O -)
echo "Enter file name to store URL output"
read file
echo $content > $file
echo "Enter file name to store filtered links:"
read links
found=$(cat $file | grep -o -E 'href="([^"#]+)"' | cut -d '"' -f2 | sort | uniq | awk   '/http/' > $links)
output=$(egrep -o '^http://[^/]+/' $links | sort | uniq -c > out)
cat out 
```

我怎样才能让它返回域而不是 URL。根据我的编程知识，我知道它应该从右侧进行解析，但我是 bash 脚本的新手。有人可以帮帮我吗。这就是我所到之处。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T08:35:37.743

**编辑 2：** 请注意，您可能希望根据`sed`您的需要调整表达式中的搜索模式。此解决方案仅考虑`http[s]?://`-protocol 和`www.`-servers...

**编辑：**
如果你想要计数和域：

```
lynx -dump -listonly http://zelleke.com | \
  sed -n '4,$ s@^.*http[s]?://\([^/]*\).*$@\1@p' | \
   sort | \
     uniq -c | \
       sed 's/www.//' 
```

给

```
2 wordpress.org
10 zelleke.com 
```

**原答案：**

您可能希望`lynx`用于从 URL 中提取链接

```
lynx -dump -listonly http://zelleke.com 
```

给

```
# blank line at the top of the output
References

   1\. http://www.zelleke.com/feed/
   2\. http://www.zelleke.com/comments/feed/
   3\. http://www.zelleke.com/
   4\. http://www.zelleke.com/#content
   5\. http://www.zelleke.com/#secondary
   6\. http://www.zelleke.com/
   7\. http://www.zelleke.com/wp-login.php
   8\. http://www.zelleke.com/feed/
   9\. http://www.zelleke.com/comments/feed/
  10\. http://wordpress.org/
  11\. http://www.zelleke.com/
  12\. http://wordpress.org/ 
```

根据此输出，您可以通过以下方式获得所需的结果：

```
lynx -dump -listonly http://zelleke.com | \
  sed -n '4,$ s@^.*http://\([^/]*\).*$@\1@p' | \
   sort -u | \
     sed 's/www.//' 
```

给

```
wordpress.org
zelleke.com 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T08:08:09.433

我知道在 awk 中有更好的方法来执行此操作，但您可以使用 sed 执行此操作，方法是将其附加到您的后面`awk '/http/'`：

```
| sed -e 's;https\?://;;' | sed -e 's;/.*$;;' 
```

然后你想把你的 sort 和 uniq 移到最后。

这样整行将如下所示：

```
found=$(cat $file | grep -o -E 'href="([^"#]+)"' | cut -d '"' -f2 | awk   '/http/' | sed -e 's;https\?://;;' | sed -e 's;/.*$;;' | sort | uniq -c > out) 
```

你可以摆脱这一行：

```
output=$(egrep -o '^http://[^/]+/' $links | sort | uniq -c > out) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T08:33:52.960

你可能对它感兴趣：

[https://www.rfc-editor.org/rfc/rfc3986#appendix-B](https://www.rfc-editor.org/rfc/rfc3986#appendix-B)

解释使用正则表达式解析 uri 的方法。

**所以你可以用这种方式从左边**解析一个uri ，并提取包含域和子域名的“权限”。

```
sed -r 's_^([^:/?#]+:)?(//([^/?#]*))?.*_\3_g';
grep -Eo '[^\.]+\.[^\.]+$' # pipe with first line, give what you need 
```

这很有趣：

[http://www.scribd.com/doc/78502575/124/Extracting-the-Host-from-a-URL](http://www.scribd.com/doc/78502575/124/Extracting-the-Host-from-a-URL)

假设 url 总是以这种方式开始

```
https?://(www\.)? 
```

真的很危险。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T08:11:48.220

您可以使用 sed 从 url 中删除路径：

```
sed s@http://@@; s@/.*@@ 
```

我也想告诉你，这两行是错误的：

```
found=$(cat $file | grep -o -E 'href="([^"#]+)"' | cut -d '"' -f2 | sort | uniq | awk   '/http/' > $links)
output=$(egrep -o '^http://[^/]+/' $links | sort | uniq -c > out) 
```

您必须进行重定向 ( `> out`) 或命令替换`$()`，但不能同时进行两件事。因为在这种情况下变量将为空。

这部分

```
content=$(wget "$url" -q -O -)
echo $content > $file 
```

这样写也更好：

```
wget "$url" -q -O - > $file 
```

# javascript - window.onbeforeunload 在 IE8 中未触发（在 Firefox、Chrome 和 Safari 中运行良好）

> ID：11879065
> 
> 赞同：0
> 
> 时间：2012-08-09T07:59:57.567
> 
> 标签：javascript, internet-explorer-8

所以我一直在疯狂地试图弄清楚为什么以下内容没有在 IE 8 中启动，而是在“big 3”、Firefox、Chrome 和 Safari 中工作

（从 Javascript 函数内部）

```
var popupWindow=window.open(document.location.href+kugiri+"popup_flg=1", 'mypopup','width=640,height=480');

popupWindow.onbeforeunload = function() {
    changeVideoPlayback(true);
    if(someFalseVal)
        return "oy";
    else
        return ;
}; 
```

（请注意，大部分代码只是让 IE 工作的绝望尝试，我真的只想要

```
 changeVideoPlayback(true); 
```

部分开火。我做错了什么让IE在窗口关闭时拒绝执行onunload？

我还应该补充一点，我也尝试过 onunload，没有骰子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T04:53:24.567

安装“onbeforeunload”使用“onunload”。

# html - ul 宽度不是我设置的宽度

> ID：11879069
> 
> 赞同：-3
> 
> 时间：2012-08-09T08:00:22.443
> 
> 标签：html, css, listitem

设置此行时：

```
<ul style="width:100px; height:100px; background-color:green">
    <li style="width:100px; height:100px; border:1px solid blue"> 1 </li>
</ul> 
```

我的 ul 比我的 100px 设置宽得多。

任何想法为什么它会忽略我的设置？如何设置**li**和**ul**具有相同的宽度（没有额外的缩进）？

**更新：人们，由于拼写错误（在样式属性上），您太急于投票给我，您忘记了这里的主要问题，即 ul 宽度问题**

好的，我解决了，只需要添加：

```
 <ul style="....;padding:0"> ... </ul> 
```

谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T08:02:26.167

```
<ul style="width:100px; height:100px; background-color:green;">
    <li style="width:100px; height:100px; border:1px solid blue;">1 </li>
</ul> 
```

用这个重放你的代码。您正在使用，在宽度：100px 之后，它应该是；:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T08:04:01.850

你应该使用；在您使用的任何地方，在宽度和高度之间......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T08:04:08.817

是的，在宽度和高度之间使用逗号

用。。。来代替 ：

> 样式=“宽度：100px；高度：100px；

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-09T08:07:22.923

嘿，现在你的**代码是错误的**

现在删除来和

**代替** `backgroung-color`

**进入**

```
background-color 
```

现在finel代码是

```
<ul style="width:100px; height:100px; background-color:green;">
    <li style="width:100px; height:100px; border:1px solid blue"> 1 </li>
</ul> 
```

**[现场演示](http://tinkerbin.com/IYxEFnFb)**

# wix - 无法使 WiX 功能操作状态正常工作

> ID：11879071
> 
> 赞同：2
> 
> 时间：2012-08-09T08:00:22.520
> 
> 标签：wix, wix3.6

所以我有简单的条件属性集：

```
<SetProperty Id="STOP_CHROME" Action="Set" Value="1" After="CostFinalize">
  <![CDATA[(&FEAT_Chrome_Hpr=3)]]>
</SetProperty> 
```

关于它的奇怪之处在于，尽管有日志，但始终设置属性，例如：

```
MSI (s) (70:28) [14:39:33:398]: Feature: FEAT_Chrome_Hpr; Installed: Absent;   Request: Null;   Action: Null 
```

我假设我的 SetProperty 操作顺序可能是错误的，但是我不确定哪一个是正确的。但是 AFAIK`After="CostFinalize"`对我的情况是正确的（在选择了功能之后）。

**更新**。找不到我的问题的解决方案。我建议您不要添加新答案，因为我现在无法真正测试它。版主可以完全删除这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T15:34:13.957

我认为您应该尝试在 CostFinalize 之前安排它。这是因为[SetProperty](http://wix.sourceforge.net/manual-wix3/wix_xsd_setproperty.htm)元素创建了一个 Type 51 自定义操作。仅当在 CostFinalize 之前调度时， [Type 51](http://msdn.microsoft.com/en-us/library/windows/desktop/aa368237%28v=vs.85%29.aspx)自定义操作才可用于影响组件或功能条件中使用的属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T03:22:35.833

找不到我的问题的解决方案。另外，我建议您不要添加新答案，因为我现在无法真正测试它。版主可以完全删除这个问题。

# android - 在我们的android应用程序中搜索列表？

> ID：11879078
> 
> 赞同：0
> 
> 时间：2012-08-09T08:01:10.877
> 
> 标签：android, listview, search, textwatcher

嗨，在我的应用程序中有一个列表视图和一个搜索部分。我需要做的是，当我在搜索部分中搜索一个单词时，它应该根据我搜索的单词整理出相应的列表视图。我得到了一个代码排序名称，但我真正的问题是如果我需要搜索一个单词，例如我需要搜索

> 拉姆兹超级

这是我当前代码中的单个名称，我需要以正确的顺序从 R 然后 A 等搜索以整理名称。但我需要的是，如果我从**Super**开始搜索，我需要显示名称**Ramz super** in listview.how 我该怎么做我当前的搜索代码如下所示

```
 search_sort.addTextChangedListener(new TextWatcher() {
        public void afterTextChanged(Editable s) {
            // Abstract Method of TextWatcher Interface.
        }

        public void beforeTextChanged(CharSequence s, int start, int count,
                int after) {
            // Abstract Method of TextWatcher Interface.
        }

        public void onTextChanged(CharSequence s, int start, int before,
                int count) {
            textlength = search_sort.getText().length();
            array_sort.clear();
            contactnumber_sort.clear();
            for (int i = 0; i < contactname.size(); i++) {
                if (textlength <= contactname.get(i).length()) {
                    if (search_sort.getText()
                            .toString()
                            .equalsIgnoreCase(
                                    (String) contactname.get(i).subSequence(
                                            0, textlength))) {
                        array_sort.add(contactname.get(i));
                        contactnumber_sort.add(contactnumber.get(i));
                    }
                }
            }
            System.out.println(array_sort);

            myadp = new myAdapter(MobiMailActivity.this, array_sort, contactnumber_sort);
            contactlist.setAdapter(myadp);
        }
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T08:22:54.977

尝试使用`contains()`而不是`equalsIgnoreCase()`.Where `datasetList`is object of my custom `ArrayList<ContactList>`。

```
 public void onTextChanged(CharSequence s, int start, int before, int count) {
        // TODO Auto-generated method stub
        String getSearchString = search.getText().toString();

        if(datasetList != null && datasetList.size() > 0)
        {
            sortedList = new ArrayList<ContactDataSet>(); //new List sorted list 

            for (int i = 0; i < datasetList.size(); i++) {

                if (datasetList.get(i).getName().contains(getSearchString)) {
                    sortedList.add(datasetList.get(i));

                }
            }
        }           
        adapter.setnewList(sortedList);
        lView.setAdapter(adapter);

    } 
```

试试这个，让我知道。它对我有用。希望这对你有帮助

# vb.net - UI Designer 不在解决方案资源管理器中且无法获取该工具

> ID：11879080
> 
> 赞同：-1
> 
> 时间：2012-08-09T08:01:14.720
> 
> 标签：vb.net, visual-studio-2010, user-interface

首先，我正在 VB.NET 中开发一个应用程序，直到昨天一切都很好。我保存了项目并关闭了它，现在当我开始处理该应用程序时，我发现无法打开该应用程序的 UI 区域。我能够看到它背后的代码，即在`dashboard.Designer.vb`但不是 UI。我可以在使用`F5`. 可能的原因是什么，我该如何解决。

* * *

其次，我试图为这个工具搜索很多，但找不到任何东西，如果有人能告诉我这是什么工具或任何类似的工具，那将有很大的帮助。

![这是该工具的屏幕截图，我在其中解释了功能](../Images/f235f10461d84a3311d30c3d31aca599.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T09:49:26.853

找了很久才找到答案：-

我们需要做的只是在空白`dashboard.vb`文件中添加以下代码

```
Public Class dashboard

End Class 
```

这将取回表格。

@Code Gray 回答了第二个问题 1\. [Outlook 类似于侧边栏并在 Outlook](https://stackoverflow.com/questions/5945837/outlook-like-sidebar-and-display-in-outlook) 2中显示[。 .NET 应用程序的 Outlook 导航栏控件](https://stackoverflow.com/questions/654536/outlook-navigation-bar-control-for-net-application)

# c++ - 打印偶数

> ID：11879083
> 
> 赞同：0
> 
> 时间：2012-08-09T08:01:30.517
> 
> 标签：c++

我只是想在这里请求你的帮助。我是 C++ 编程的新手。如何打印出 100 - 200 范围内的偶数。我试着写了一些代码，但没有成功。这是我的代码。我希望，这里有人可以帮助我。会非常感激。谢谢。

```
include <stdio.h>

void main()
{
    int i;
    for (i= 100; i<= 200; i += 2){
        print i;
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T08:05:25.310

嗯，很简单：

```
#include <iostream> // This is the C++ I/O header, has basic functions like output an input.

int main(){ // the main function is generally an int, not a void.
   for(int i = 100; i <= 200; i+=2){ // for loop to advance by 2.
       std::cout << i << std::endl; // print out the number and go to next line, std:: is a prefix used for functions in the std namespace.
   } // End for loop
   return 0; // Return int function
} // Close the int function, end of program 
```

您使用的是 C 库，而不是 C++ 库，也没有`print`在 C++ 中调用的函数，也没有`C`. 也没有 void main 功能，请`int main()`改用。最后，您需要`std::`在名称空间中设置它们`cout`，`endl`因为它们位于`std`名称空间中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T08:17:32.423

使用以下代码：

```
#include <iostream>

int main()
{
    int i;
    for (i= 100; i<= 200; i += 2){
        std::cout << i << std::endl;
    }
    return 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T08:09:23.973

您的代码看起来不错....仅需要更改打印部分

```
 #include <stdio.h>
  int main()
  {
    for (int i= 100; i<= 200; i += 2){
      printf("%d",i);
    }
    return 0;
  } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-06T00:35:21.917

这可能会有所帮助！

```
 #include <iostream>
using namespace std;
int main()
{
    for (int count = 100; count <= 200; count += 2)
    {
        cout << count << ", ";
    }
    cout << endl;
    return 0;

} 
```

# asp.net - .NET 处理程序的枚举（ASP.NET 漏洞）

> ID：11879084
> 
> 赞同：1
> 
> 时间：2012-08-09T08:01:32.203
> 
> 标签：asp.net, security, windows-firewall, urlscan

基于安全审计，我正在处理审计结果，最终我与一个项目堆叠在一起：
124242：Microsoft .NET 处理程序枚举
风险 1：Web 服务
可以获得远程 ASP.NET Web 服务器支持的处理程序列表。
解决方案：
无
参考资料： http:
[//support.microsoft.com/kb/815145](http://support.microsoft.com/kb/815145)
来源 ：
Tenable：2009-12-04

我在 Windows 2008 R2 服务器上运行 ASP.NET 2.0 应用程序，但我没有安装 ISA 服务器。

我觉得我需要在Windows防火墙或URLScan中配置一些规则，但我不明白具体是哪一个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T11:43:51.790

使用此页面[http://www.iis.net/ConfigReference/system.webServer/handlers](http://www.iis.net/ConfigReference/system.webServer/handlers)我们发现可以更改访问策略。

所以选择一个你喜欢的并使用命令字符串应用：

%systemroot%\system32\inetsrv\Appcmd set config "instancename/files" /section:handlers /accessPolicy:NoRemoteRead /commit:apphost

放置您的实例名称而不是“实例名称”。

希望这可以帮助。

祝你好运。

# bash - 将 stderr 重定向到控制台和文件

> ID：11879085
> 
> 赞同：2
> 
> 时间：2012-08-09T08:01:34.977
> 
> 标签：bash, shell, stderr

如何将 bash 脚本的 sdterr 重定向到控制台和文件？我在用：

```
exec 2>> myfile 
```

将其记录到 myfile。如何将其扩展为也登录到控制台？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T08:13:46.207

例如：

```
exec 2>&1 | tee myfile 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T08:26:33.383

或者你可以使用`tail -f`

```
$ touch myfile
$ tail -f myfile &
$ command 2>myfile 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T08:14:49.307

尝试在后台通过另一个命令（如 cat）打开该文件。

```
exec 2>> myfile
cat myfile & >&2
CAT_PID=$!
... # your script
kill $CAT_PID 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T08:24:29.920

你可以创建一个fifo

```
$ mknod mypipe p 
```

让 tee 从 fifo 读取。它写入标准输出和您指定的文件

```
$ tee myfile <mypipe &
[1] 17121 
```

现在运行命令并将 stderr 传输到 fifo

```
$ ls kkk 2>mypipe 
ls: cannot access kkk: No such file or directory
[1]+  Done                    tee myfile < mypipe 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-09T14:06:59.103

您可以将输出重定向到一个进程并`tee`在该进程中使用：

```
#!/usr/bin/env bash

exec 2> >( tee -a err.log )

echo bla >&2 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-06-22T22:36:56.227

[基于@mpapis 回答的](https://stackoverflow.com/a/11885285/2566213)纯 Bash 解决方案：

```
exec 2> >( while read -r line; do printf '%s\n' "${line}" >&2; printf '%s\n' "${line}" >> err.log; done ) 
```

并扩展：

```
exec 2> >(
    while read -r line; do
      printf '%s\n' "${line}" >&2
      printf '%s\n' "${line}" >> err.log
    done
  ) 
```

# android - Titanium appcelerotor中原生android组件的自定义

> ID：11879091
> 
> 赞同：1
> 
> 时间：2012-08-09T08:02:01.167
> 
> 标签：android, titanium, appcelerator, titanium-mobile, appcelerator-mobile

我是经验丰富的 android 开发人员，但在 Titanium appcelerator 中是新手。我想使用 Titanium Appcelerator 开发一个 android 应用程序。我的问题如下。

1.  我们可以自定义原生的android组件（如RelativeLayout、Button等）吗？例如，我想通过扩展 ListView 类来开发一些自定义视图，例如 pull-to-refreshlistview，或者我想要通过扩展 ImageView 类来创建自己的自定义 ImageView 是否可以使用 appcelerator 平台？
2.  我可以使用 appcelerator 平台创建自己的媒体播放器/视频播放器吗？

如果我可以通过扩展它们来利用原生 android 组件（如视图）。那么任何演示/示例都将受到高度赞赏。

**注意 :: 我正在使用 Titanium Studio IDE 来开发我的 Android 应用程序。**

谢谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T10:48:52.540

是的，你可以做上述所有事情。由于 appcelerator 为您提供了几个 API，您可以在其中实现所需的功能。您可以创建一个视图并将其布局设置为相对等。

您也可以在 android 中创建下拉刷新功能。这是链接[拉到刷新-Android](https://gist.github.com/903895)

是的，您可以使用 Appcelerator 创建自己的媒体播放器。我做到了。

要查看示例，请下载钛工作室并下载示例应用程序 - 厨房水槽。在这个示例应用程序中，您可以看到 Appcelerator 可以做的所有很酷的事情。

您可以从 Titanium 工作室下载示例应用程序，也可以参考[KitchenSink的此链接](https://github.com/appcelerator/KitchenSink/)

希望有帮助。:)

# c# - 使用 Regex 和 C# 拆分字符串并添加到列表

> ID：11879092
> 
> 赞同：2
> 
> 时间：2012-08-09T08:02:01.050
> 
> 标签：c#, regex, string

我有一个字符串，其中单词的数量可能会有所不同。喜欢：

```
string a_string = " one two three four five six seven etc etc etc "; 
```

如何将字符串拆分为每个 5 个单词，并将每个单词添加到列表中，使其成为字符串列表（每个字符串包含 5 个单词）。我认为列表会更好，因为字符串中的单词数量可能会有所不同，因此列表可以相应地增长或缩小。

我尝试使用正则表达式通过以下代码行获取前 5 个单词：

`Regex.Match(rawMessage, @"(\w+\s+){5}").ToString().Trim();`

但有点不确定如何进一步进行并动态且稳健地添加到列表中。我想 Regex 可以进一步提供帮助，或者一些很棒的字符串/列表函数？你能指导我一下吗？

最终，我希望 list[0] 包含“一二三四五”，而 list[1] 包含“六七等”，依此类推。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T08:06:39.047

```
var listOfWords = Regex.Matches(a_string, @"(\w+\s+){1,5}")
     .Cast<Match>()
     .Select(i => i.Value.Trim())
     .ToList(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T08:06:15.690

拆分单词不需要正则表达式，字符串提供了这种能力：

```
var list = str.Split(' ').ToList(); 
```

`ToList()`是一种 LINQ 扩展方法，用于将`IEnumerable<T>`对象转换为列表（`Split()`方法返回字符串数组）。

要按 5 个单词对列表进行分组，请使用以下代码片段：

```
var res = list
    .Select((s, i) => new { Str = s, Index = i })
    .GroupBy(p => p.Index/5)
    .Select(g => string.Join(" ", g.Select(v => v.Str))); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T08:05:49.177

你可以使用简单的

```
a_string.Split(' '); 
```

然后循环遍历结果数组并根据需要填充列表，例如

```
int numOfWords = 0;
int currentPosition = 0;
foreach (var str in a_string.Split(' '))
{
   if (numOfWords == 5)
   {
     numOfWords = 0;
     currentPosition++;
   }
   list[currentPosition] += str;
   numOfWords++;
} 
```

# java - 使用 POSIX 消息队列运行 JNA 示例

> ID：11879101
> 
> 赞同：1
> 
> 时间：2012-08-09T08:02:52.310
> 
> 标签：java, ipc, jna

我需要通过 POSIX 消息队列通信 Java 应用程序和 C 进程，我想使用 JNA 来完成。

经过一些研究、阅读和您的帮助，我从一个尝试创建消息队列的简单 Java 应用程序开始。

```
/** Simple example of JNA interface mapping and usage. */
public class HelloJNAWorld {

    // This is the standard, stable way of mapping, which supports extensive
    // customization and mapping of Java to native types.

     public interface IPCLibrary extends Library {
        IPCLibrary INSTANCE = (IPCLibrary)
                Native.loadLibrary("c",IPCLibrary.class);

        int msgget(NativeLong key, int msgflg);

    }

    public static void main(String[] args) {

        int id = IPCLibrary.INSTANCE.msgget(new NativeLong(12500), 0600|1);

        if(id<0){
                System.out.println("Error creating message queue. Id:"+id);
                System.out.println(Native.getLastError());
        }else{
                System.out.println("Message queue id:" + idCola);
        }

    }
} 
```

我认为`msgctl`这是最简单的映射方法，因为它只是`int msgget(key_t key, int msgflag);`. 我假设我可以映射`key_t`为 a`NativeLong`但`msget`返回 -1。所以我检查了一下`lastError`，返回的值为2，根据errno代码，这意味着“没有这样的文件或目录”。

你能帮我解决这个问题吗？也许`key_`t 应该以另一种方式映射？也许我需要更多的图书馆或类似的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-17T08:35:56.683

由于没有人回答这个问题，有些人可能需要我那些日子需要的帮助，所以我在这里发布我的测试类代码。:-)

```
import com.sun.jna.Library;
import com.sun.jna.Native;
import com.sun.jna.NativeLong;
import com.sun.jna.Platform;
import com.sun.jna.Structure;

/** Simple example of JNA interface mapping and usage. */
public class HelloJNAWorld {

    // This is the standard, stable way of mapping, which supports extensive
    // customization and mapping of Java to native types.

    public interface CLibrary extends Library {
        CLibrary INSTANCE = (CLibrary)
        Native.loadLibrary((Platform.isWindows() ? "msvcrt" : "c"),CLibrary.class);

        void printf(String format, Object... args);

    }

    public interface IPCLibrary extends Library {
        IPCLibrary INSTANCE = (IPCLibrary)           
        Native.loadLibrary("c",IPCLibrary.class);

        class WaitQueue extends Structure{

        }

        // mapping msqid_ds structure
        class MsqidDs extends Structure{
            long msg_stime;       /* last msgsnd time */
            long msg_rtime;       /* last msgrcv time */
            long msg_ctime;       /* last change time */
            short msg_cbytes;
            short msg_qnum;
            short msg_qbytes;      /* max number of bytes on queue */
            short msg_lspid;       /* pid of last msgsnd */
            short msg_lrpid;       /* last receive pid */
        }

        // END mapping msqid_ds structure

        class MsgBuf extends Structure{
            NativeLong mtype; /* type of message */
            byte mtext[] = new byte[1];
        }

        class MyMsgBuf extends MsgBuf{
            public NativeLong messageKind;
            public byte[] contenido = new byte[1024];
        }

        // Initialize queue, or if it exists, get it            
        int msgget(NativeLong key, int msgflg);
        // Send messages to queue
        // int msgsnd(int msqid, struct msgbuf *ptrkey, int length, int flag);
        int msgsnd(int msqid, MsgBuf ptrkey, int msgsz, int msgflg);
        // Receive messages from queue
        // int msgrcv(int msqid, struct msgbuf *ptrkey, int length, long msgtype, int flag);
        int msgrcv(int msqid, MsgBuf ptrkey, int length, long msgtype, int flag);            

    }

    public static void main(String[] args) {

        int idCola = IPCLibrary.INSTANCE.msgget(new NativeLong(12500), 0);            

        if(idCola<0){
            System.out.println("The queue can't be created. IdCola:"+idCola);           
            System.out.println("Error msgget: " + Native.getLastError());
        }else{
            System.out.println("Queue with id:" + idCola + "has been recovered");           
            // Send message
            IPCLibrary.MyMsgBuf mensaje = new IPCLibrary.MyMsgBuf();
            mensaje.tipoMensaje = new NativeLong(1);
            mensaje.contenido = "Sending message".getBytes();
            int devSend = IPCLibrary.INSTANCE.msgsnd(idCola, mensaje, mensaje.contenido.length, 1);
            if(devSend != 0){
                System.out.println("Send response: "+devSend);
                System.out.println("Error value: " + Native.getLastError());
            }
        }

        // Receiving message
        IPCLibrary.MyMsgBuf mensajeRecibido =  new IPCLibrary.MyMsgBuf();        
        int bytesRecibidos = IPCLibrary.INSTANCE.msgrcv(idCola, mensajeRecibido, mensajeRecibido.contenido.length, 1234, 0);
        if(bytesRecibidos > 0){
            System.out.println("C message has been received: " + new String(mensajeRecibido.contenido));
        }else{
            System.out.println("msgrcv error: " + Native.getLastError());
        }

        // Send closing message
        IPCLibrary.MyMsgBuf mensajeCierre = new IPCLibrary.MyMsgBuf();
        mensajeCierre.tipoMensaje = new NativeLong(2);
        mensajeCierre.contenido = "Closing queue".getBytes();
        int devSend = IPCLibrary.INSTANCE.msgsnd(idCola, mensajeCierre, mensajeCierre.contenido.length, 1);
        if(devSend != 0){
            System.out.println("Send response: "+devSend);
            System.out.println("Error value: " + Native.getLastError());
        }            

    }
} 
```

我真的希望这可以帮助别人。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-03T01:02:55.367

我清理了你的代码并让它运行。你需要两个任务。一发一收。只需将上一篇文章中的 main() 替换为下面的 main()。它对我有用。感谢您发布您的努力让我开始。另请参阅 kirk.c 和 spock.c 以获得良好的 c 示例[http://beej.us/guide/bgipc/output/html/multipage/mq.html](http://beej.us/guide/bgipc/output/html/multipage/mq.html)

```
 public static void main(String[] args) {
   double SLEEP_MINUTES = 0.1;
   int IPC_CREAT = 01000;  // starts with 0 so its octal or 512 
   int IPC_EXCL  = 02000;
   int IPC_NOWAIT  = 04000;
   int MSG_EXCEPT = 020000;
   int MSG_NOERROR =  010000;  // truncate the message if its to big     
   int msgflg_msgrcv = MSG_NOERROR; //  truncate the message if its to big
   int msgflg_msgget = 0666 | IPC_CREAT;
   int msgflg_msgsnd = 0;
   int msgtype_msgrcv = 0; // read them all
   NativeLong msgtype_msgsnd = new NativeLong(1); // just needs to be a positive number
   NativeLong msgkey = new NativeLong(12500);  

    int msqid = IPCLibrary.INSTANCE.msgget(msgkey, msgflg_msgget);            

    if(msqid<0)
    {
        System.out.println("The queue can't be created. msqid:"+msqid);           
        System.out.println("Error msgget: " + Native.getLastError());
        System.exit(0);
    }

    System.out.println("Queue with id:" + msqid + "has been found or created");  
    for(int i=0;i<100;i++)
    {
        // Send message
        IPCLibrary.MyMsgBuf message = new IPCLibrary.MyMsgBuf();
        message.messagetype = msgtype_msgsnd;
        message.content = ("Sending message"+i+'\0').getBytes();           // add 1 for the '\0'
        int devSend = IPCLibrary.INSTANCE.msgsnd(msqid, message, message.content.length+1,
                msgflg_msgsnd);
        if(devSend != 0)
        {
            System.out.println("Send response: "+devSend);
            System.out.println("Error value: " + Native.getLastError());
            System.exit(0);
        }
        System.out.println("Sent "+i);            
        try
        {
            Thread.sleep((long)(SLEEP_MINUTES*60.0*1000.0)); 
        }
        catch (InterruptedException e) 
        {
            System.out.println("InterruptedException while writing");
            System.out.println(e.getMessage());                 
        }

    }

}

     public static void main(String[] args) {
// found these in /usr/include/bits/*.h
int IPC_CREAT = 01000;  // remember if it starts with a '0' its octal or 512 
int IPC_EXCL  = 02000;
int IPC_NOWAIT  = 04000;
int MSG_EXCEPT = 020000;
int MSG_NOERROR =  010000;  // truncate the message if its to big     

int msgflg_msgrcv = MSG_NOERROR; //  truncate the message if its to big
int msgflg_msgget = 0666 | IPC_CREAT; // create the queue if its not there , let everybody read and write
int msgtype_msgrcv = 0; // read them all
NativeLong msgtype_msgsnd = new NativeLong(1); // just needs to be a positive number
NativeLong msgkey = new NativeLong(12500);  

    int msqid = IPCLibrary.INSTANCE.msgget(msgkey, msgflg_msgget);            
    if(msqid<0)
    {
        System.out.println("The queue can't be created. msqid:"+msqid);           
        System.out.println("Error msgget: " + Native.getLastError());
        System.exit(0);
    }

    System.out.println("Queue with id:" + msqid + "has been found or was created");  
    for(int i=0;i<100;i++)
    {
        IPCLibrary.MyMsgBuf message =  new IPCLibrary.MyMsgBuf();        
        int ret = IPCLibrary.INSTANCE.msgrcv(msqid, message, message.content.length,
                msgtype_msgrcv,msgflg_msgrcv);
        if(ret > 0)
        {
            System.out.println("message has been received: " + ret);
            System.out.println(new String(message.content));
        }
        else
        {
            System.out.println("msgrcv error: " + Native.getLastError());
        }
    }

   }
 } 
```

# php - php按多类别和一一过滤

> ID：11879102
> 
> 赞同：0
> 
> 时间：2012-08-09T08:02:53.953
> 
> 标签：php, mysql

我正在尝试使用 php 中的搜索框，我的 html 表单有三个选项，如下所示

1.  目的
2.  类型
3.  地点

我想如果用户选择目的数据按目的过滤，如果类型然后按类型过滤，如果位置然后按位置过滤，如果他选择所有类别，那么它会像位置类型中的目的一样过滤，如果不匹配显示（找不到结果！）

我使用了这些 php 查询但未能获得

```
$res="SELECT * FROM test WHERE purpose like %$_Post['purpose']% AND type like %$_Post['type']% AND location like %$_Post['location']%";

while ($row = mysql_fetch_array($res))
{

    echo $row['purpose']."</br>";

    echo $row['type']."<br>";

    echo $row['location'];
    } 
```

但是此查询不会一一过滤它显示如果我使用 OR 而不是 AND 然后混合结果是否全部选中但我希望在位置类型中输入目的

如果未找到，则显示未找到结果

请写完整的查询

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T08:15:40.933

1.  你的参数没有转义，这很危险
2.  不是，情况很重要`$_POST`。`$_Post`

你需要确保你的代码是安全的，千万不要在没有转义的情况下使用值。

```
$purpose  = mysqli_real_escape_string($dbc, $_POST['purpose' ]);
$type     = mysqli_real_escape_string($dbc, $_POST['type'    ]);
$location = mysqli_real_escape_string($dbc, $_POST['location']); 
```

编辑：删除了我的查询，因为@Martin's 是正确的，这个不是。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T08:15:43.137

```
$dbc = mysqli_connect('host', 'user', 'password', 'database') or die('Error connecting to MySQL server');

if (isset($_POST['purpose'])) $where.= " AND purpose LIKE %". mysqli_real_escape_string($dbc, $_POST['purpose'])."%";
if (isset($_POST['type'])) $where.= " AND type LIKE %". mysqli_real_escape_string($dbc, $_POST['type'])."%";
if (isset($_POST['location'])) $where.= " AND location LIKE %". mysqli_real_escape_string($dbc, $_POST['location'])."%";

$res="SELECT * FROM test
      WHERE 1=1 
      ". ($where? $where: "");

while ($row = mysql_fetch_array($res)) {
    echo $row['purpose']."</br>";
    echo $row['type']."<br>";
    echo $row['location'];
} 
```

# android - 启动虚拟键盘

> ID：11879103
> 
> 赞同：1
> 
> 时间：2012-08-09T08:02:55.297
> 
> 标签：android, android-virtual-keyboard

我遇到了显示虚拟键盘的情况

1）设置监听器时：

```
rssURLTV = (TextView) findViewById(R.id.rssURL);

        rssURLTV.setOnClickListener(new View.OnClickListener() {

            // @Override
            public void onClick(View v) {

                feedUrl = (String) rssURLTV.getText().toString();

                Intent intent = new Intent("urss.database_table");
                startActivity(intent);

            }
        }); 
```

2) 活动开始....

**对于这些情况，我不想显示虚拟键盘**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T03:12:13.623

你可以试试把

```
<activity android:name=".Main"
          android:label="@string/app_name"
          android:windowSoftInputMode="stateHidden"
          > 
```

在 android 清单中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T08:07:29.277

试试这个在当前活动中隐藏虚拟键盘：

```
getWindow().setSoftInputMode(
WindowManager.LayoutParams.SOFT_INPUT_STATE_ALWAYS_HIDDEN); 
```

# ruby-on-rails - 在 RoR 应用程序中使用 RSpec 进行测试 - 未初始化的常量

> ID：11879107
> 
> 赞同：5
> 
> 时间：2012-08-09T08:03:07.870
> 
> 标签：ruby-on-rails, rspec

我正在尝试通过 RSpec 测试我的 Rails 3.2.3 应用程序。它已安装（我已经测试了另一个应用程序并且运行良好）但它在 Gemfile 中不存在。这是代码`spec/application_controller_spec.rb`

```
 require "rspec"
    require_relative "../app/controllers/application_controller"

    describe ApplicationController do
      it "current_cart does something" do
        #app_controller  = ApplicationController.new
        pending
      end
    end 
```

以下命令返回错误：

```
alex@ubuntu:~/RubymineProjects/psg$ rspec spec
/home/alex/RubymineProjects/psg/app/controllers/application_controller.rb:1:in `<top (required)>': uninitialized constant ActionController (NameError)
    from /home/alex/RubymineProjects/psg/spec/application_controller_spec.rb:2:in `require_relative'
    from /home/alex/RubymineProjects/psg/spec/application_controller_spec.rb:2:in `<top (required)>'
    from /home/alex/.rvm/gems/ruby-1.9.3-p194/gems/rspec-core-2.11.1/lib/rspec/core/configuration.rb:780:in `load'
    from /home/alex/.rvm/gems/ruby-1.9.3-p194/gems/rspec-core-2.11.1/lib/rspec/core/configuration.rb:780:in `block in load_spec_files'
    from /home/alex/.rvm/gems/ruby-1.9.3-p194/gems/rspec-core-2.11.1/lib/rspec/core/configuration.rb:780:in `map'
    from /home/alex/.rvm/gems/ruby-1.9.3-p194/gems/rspec-core-2.11.1/lib/rspec/core/configuration.rb:780:in `load_spec_files'
    from /home/alex/.rvm/gems/ruby-1.9.3-p194/gems/rspec-core-2.11.1/lib/rspec/core/command_line.rb:22:in `run'
    from /home/alex/.rvm/gems/ruby-1.9.3-p194/gems/rspec-core-2.11.1/lib/rspec/core/runner.rb:69:in `run'
    from /home/alex/.rvm/gems/ruby-1.9.3-p194/gems/rspec-core-2.11.1/lib/rspec/core/runner.rb:8:in `block in autorun' 
```

文件 ApplicationController.rb

```
 class ApplicationController < ActionController::Base
   def some_action
     #............
   end 
```

结尾

即使我`gem 'rspec'`在 Gemfile 中添加它也不会改变任何东西，错误仍然存​​在。

有什么想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-08-11T14:39:08.760

在我的情况下，我需要添加`rails_helper`到规范文件或`.rspec`文件中。

```
require 'spec_helper'
require 'rails_helper'

describe SomeController do
end 
```

* * *

```
# Or in the .rspec file:
--color
--require spec_helper
--require rails_helper 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-09T08:51:59.617

这个 require_relative 在那里做什么？我使用 rspec 并且不需要这个。实际上，我的规范文件中唯一的要求是：

```
require 'spec_helper' 
```

（至少在大多数情况下，有一些文件需要特殊的东西，比如“authlogic/test_case”）

我的 rspec 的 Gemfile 条目如下所示：

```
group :development do
  gem 'rspec-rails'
end

group :test do
  gem 'rspec-rails'
  gem 'spork', '0.9.0.rc8'
end 
```

当然，如果您不使用 spork，您将不需要它，但也许“rspec-rails”而不是“rspec”可能是您的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-17T09:13:08.900

我遇到了同样的问题，解决的方法是确保规范文件的名称与控制器文件的名称完全相同。所以没有controller_name_controller_spec.rb，只有controller_name_controller.rb。

# c# - 如何使用 WCHAR* out 参数从 C# 调用 C 函数？

> ID：11879108
> 
> 赞同：6
> 
> 时间：2012-08-09T08:03:14.247
> 
> 标签：c#, c, interop, marshalling

我在编组方面遇到了一些问题，我自己无法弄清楚。我已经搜索了这个主题，但还没有任何运气，所以基本上我试图从我的托管 C# 应用程序中调用一个非托管 C 函数。C 函数的签名如下所示：

```
long MyFunction(WCHAR* upn, long upnSize, WCHAR* guid, long* guidSize); 
```

我没有访问 .dll 文件，我只知道该函数正在被公开使用并且我知道该函数应该做什么，但我不知道里面发生了什么，所以该函数接收一个 WCHAR* upn 持有一个 UserPricipalName 和一个 long 与提供的 UPN 的长度。还传递了一个 WCHAR 指针，函数在其中写回与传递的 UPN 关联的相应 GUID。guidSize 指针提供指针的大小，如果它太小，则写入的 GUID 未完全写入。如果一切顺利，该函数应该返回 0（从 c# 调用时它从未发生过）

现在我调用和调用这个函数的努力看起来像这样：

```
[DllImport(@"MyDll.dll", EntryPoint = "MyFunction", CallingConvention = CallingConvention.Cdecl, CharSet = CharSet.Unicode)]
public static extern long MyFunction(IntPtr upnPtr, long upnSize, [Out, MarshalAsAttribute(UnmanagedType.LPWStr) ] StringBuilder guidPtr, IntPtr guidSizePtr);

//my attempt to call the Dll's exposed function
string upn = foo@bar.com;
long upnSize = upn.Length;
IntPtr upnPtr = Marshal.StringToHGlobalUni(upn);

IntPtr guidSizePtr = Marshal.AllocHGlobal(sizeof(long));
Marshal.WriteInt32(GuidSizePtr, 128);
var guidSB = new StringBuilder(128);

result = MyFunction(upnPtr, upnSize, guidSB, guidSizePtr); 
```

结果，我收到了 AccessViolationException。我已经尝试了许多变体来调用该函数，但我从来没有设法接收到 0 作为返回值，我也无法像我应该做的那样读出 GUID。

对此的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-09T08:31:36.160

将函数声明为：

```
 [DllImport(@"MyDll.dll", EntryPoint = "MyFunction", CallingConvention = CallingConvention.Cdecl, CharSet = CharSet.Unicode)]
    public static extern int MyFunction([MarshalAsAttribute(UnmanagedType.LPWStr)] string upnPtr, int upnSize, [MarshalAsAttribute(UnmanagedType.LPWStr)] StringBuilder guidPtr, ref int guidSizePtr); 
```

如下调用它：

```
 string upn = "foo@bar.com";
        var guidSB = new StringBuilder(128);
        int guidSizePtr =guidSB.Capacity;
        MyFunction(upn, upn.Length, guidSB, ref guidSizePtr); 
```

**请注意，C++ 中的 long 是 32 位的，因此您应该在 C# 代码中将所有此类实例定义为 int。**

# php - MySQL 查询无法正常工作

> ID：11879112
> 
> 赞同：1
> 
> 时间：2012-08-09T08:03:42.013
> 
> 标签：php, mysql, sql, select

错误在哪里？

谢谢！

```
SELECT Table.id,
       Table.name,
   Table.kommentar,
   Table.pictureurl

   WHERE Table.news_id = 5, //without this line the query works!

   COUNT( Table1.comment_id ) AS numComments
   FROM DATABASE.news_comments          AS Table
   LEFT JOIN DATABASE.news_comments_comments AS Table1
   ON Table1.comment_id = Table.id

   GROUP BY Table.id
   ORDER BY Table.id DESC LIMIT 0,50 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T08:05:04.420

`WHERE`子句应该在`FROM`子句之后

```
SELECT `Table`.id,
       `Table`.name,
       `Table`.kommentar,
       `Table`.pictureurl,
       COUNT( Table1.comment_id ) AS numComments
FROM   DATABASE.news_comments          AS `Table`
          LEFT JOIN DATABASE.news_comments_comments AS Table1
             ON Table1.comment_id = `Table`.id
WHERE `Table`.news_id = 5    // <=== HERE
GROUP BY `Table`.id
ORDER BY `Table`.id DESC LIMIT 0,50 
```

还有一件事，你的别名`Table`应该用反引号转义，因为它是**[MySQL 中的保留关键字](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T08:05:14.963

```
SELECT Table.id,
       Table.name,
   Table.kommentar,
   Table.pictureurl,   
   COUNT( Table1.comment_id ) AS numComments
   FROM DATABASE.news_comments  AS Table
   LEFT JOIN DATABASE.news_comments_comments AS Table1
   ON Table1.comment_id = Table.id

WHERE Table.news_id = 5   //===> where should be here

   GROUP BY Table.id
   ORDER BY Table.id DESC LIMIT 0,50 
```

# sql - 寻找下一个空闲时间段

> ID：11879113
> 
> 赞同：2
> 
> 时间：2012-08-09T08:03:44.547
> 
> 标签：sql, hibernate, hql

我有一个数据库表（Hibernate conf 全部完成），

```
 ResourceRequest( resource, startTime, endTime, status ) 
```

在 startTime 和 endTime 之间，资源被占用。

**问题陈述：** 对于*inStartTime*和*inEndTime*的输入，如果下一个可用插槽已被给定插槽占用，我必须找到它。必须为此编写一个休眠查询。

**我能想到的一个快速解决方案是：** 将给定资源的资源请求查询到一个集合中，然后对其进行操作以获取下一个可用插槽。

但我想把它作为我最后的手段。任何帮助表示赞赏。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T07:12:21.853

在 sql

```
SELECT * FROM slots s1 WHERE
    s1.endTime > :inStartTime AND
    not exists (SELECT 1 FROM slots s2 WHERE s2.startTime > s1.endTime AND s2.startTime < DateAdd(s1.endTime, :inEndMinusInStart))
ORDER BY
    s1.startTime

// and criteria to tweak

DetachedCriteria subquery = DetachedCriteria.for(Slot.class)
    .add(<filter on resource>)
    .add(Restrictions.propertyGt("startTime", "s1.endTime"));
    .add(Restrictions.propertylt("startTime", Projections.sqlFunction("dateadd", Projections.property("s1.endTime"), inStartTime - inEndTime, Hibernate.dateTime));

session.createCriteria(Slot.class, "s1")
    .add(<filter on resource>)
    .add(Restrictions.gt(endTime, inStartTime))
    .add(Subqueries.notExists(subquery)) 
```

希望能帮助到你

# ruby-on-rails - 如何在 ruby 中使用电子表格 gem 正确检索日期

> ID：11879118
> 
> 赞同：0
> 
> 时间：2012-08-09T08:04:02.217
> 
> 标签：ruby-on-rails, spreadsheet

电子表格中的日期列格式为`'mm/dd/yyyy'` 但是当我通过电子表格阅读上述列时，格式与上述格式不同。

我的代码如下：

```
require 'spreadsheet'

Spreadsheet.client_encoding = 'UTF-8'
book = Spreadsheet.open params[:excel_file]
sheet1 = book.worksheet 0
sheet1.each do |row|
  row.set_format 1, Spreadsheet::Format.new(:number_format => 'MM/DD/YYYY')
  h = Hash.new
  h["name"] = row[0]
  h["date"] = row[1]
  ......
end 
```

目前 h["date"] 没有正确检索。那么我应该如何使用我的原始格式正确检索日期列。谁能帮我解决这个问题！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T08:21:17.120

`row[1].date`或者`row[1].datetime`会给你正确的价值。我想您可以在将其写入 excel 时设置格式，而不是相反。

**更新**
我以为您只需要将您的 excel 日期翻译为红宝石日期。
这应该可以解决问题：
`excel_date = row[1].date`
`ruby_date = excel_date.strftime('%m/%d/%Y')`

# android - 如何将 Android 应用程序与笔记本电脑上的 IIS 服务器连接起来

> ID：11879124
> 
> 赞同：0
> 
> 时间：2012-08-09T08:04:21.407
> 
> 标签：android, wcf, web-services, rest, iis

我开发了一个使用 C# Web 服务的 android 应用程序。我已经使用 IIS 服务器发布了 Web 服务。现在我想将我的应用程序安装到 Android 设备并将其连接到在 IIS 服务器上运行的 WCF REST 服务。

我应该采取哪些步骤来实现这一目标？

到目前为止，我已经使用了下面提到的方法。但是有一些错误:(帮我修复它们！

```
 public String ServiceCallMethod()
    {
    //int x1 = 262, x2 = 525, y1 = 100, y2 = 390;

    String url =     "http://192.168.43.73:85/PathService/PathService.svc/FindPath/"+x1+","+y1+"/"+x2+","+y2+"";

        HttpClient httpclient = new DefaultHttpClient();

        // Prepare a request object
        HttpGet httpget = new HttpGet(url); 

        // Execute the request
        HttpResponse response;
        try {
            response = httpclient.execute(httpget);
            // Examine the response status
            Log.i("Praeda",response.getStatusLine().toString());

            // Get hold of the response entity
            HttpEntity entity = response.getEntity();
            // If the response does not enclose an entity, there is no need
            // to worry about connection release

            if (entity != null) {

                // A Simple JSON Response Read
                InputStream instream = entity.getContent();
                String result= convertStreamToString(instream); // returns error when i debug :(its supposed to return an point array list like this..
    //Response - {"FindPathResult":[{"x":262,"y":165},{"x":346,"y":165},{"x":420,"y":165},{"x":473,"y":165},{"x":473,"y":240},{"x":473,"y":277},{"x":473,"y":320},{"x":473,"y":390},{"x":525,"y":390}]}

    //Instead it returns this
    //<?xml version="1.0" encoding="utf-8"?>
   // <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0     //Transitional//EN""http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
   // <html xmlns="http://www.w3.org/1999/xhtml">
   // <head>
   // <title>Request Error</title>
   // <style>BODY { color: #000000; background-color: white; font-family: Verdana; margin-left: 0px;  margin-top: 0px; } #content { margin-left: 30px; font-size: .70em; padding-bottom: 2em; } A:link { color: #336699; font-weight: bold; text-decoration: underline; } A:visited { color: #6699cc; font-weight: bold; text-decoration: underline; } A:active { color: #336699; font-weight: bold; text-decoration: underline; } .heading1 { background-color: #003366; border-bottom: #336699 6px solid; color: #ffffff; font-family: Tahoma; font-size: 26px; font-weight: normal;margin: 0em 0em 10px -20px; padding-bottom: 8px; padding-left: 30px;padding-top: 16px;} pre { font-size:small; background-color: #e5e5cc; padding: 5px; font-family: Courier New; margin-top: 0px; border: 1px #f0f0e0 solid; white-space: pre-wrap; white-space: -pre-wrap; word-wrap: break-word; } table { border-collapse: collapse; border-spacing: 0px; font-family: Verdana;} table th { border-right: 2px white solid; border-bottom: 2px white solid; font-weight: bold; background-color: #cecf9c;} table td { border-right: 2px white solid; border-bottom: 2px white solid; background-color: #e5e5cc;}</style>
   //</head>
   //<body>
   //<div id="content">
   //<p class="heading1">Request Error</p>
   //<p>The server encountered an error processing the request. See server logs for more details.</p>
    //</div>
    //</body>
    //</html>
    // ----------------------------------------------------------------------------

                Log.i("Praeda",result);

                // A Simple JSONObject Creation
                JSONObject json=new JSONObject(result);
                Log.i("Praeda","<jsonobject>\n"+json.toString()+"\n</jsonobject>");

                // A Simple JSONObject Parsing
                JSONArray nameArray=json.names();
                JSONArray valArray=json.toJSONArray(nameArray);
                for(int i=0;i<valArray.length();i++)
                {
                    Log.i("Praeda","<jsonname"+i+">\n"+nameArray.getString(i)+"\n</jsonname"+i+">\n"
                            +"<jsonvalue"+i+">\n"+valArray.getString(i)+"\n</jsonvalue"+i+">");
                    Log.i("TEST","JSONArray Recieved");
                }

                // A Simple JSONObject Value Pushing
                json.put("sample key", "sample value");
                Log.i("Praeda","<jsonobject>\n"+json.toString()+"\n</jsonobject>");

                // Closing the input stream will trigger connection release

                instream.close();  

              //I want to assign the result to one of my String arrays(this_results) -------------       

              this_result = result;

              //-----------------------------------------------------
              System.out.println(" End of ServiceCallMethod() ");
                return result;

            }

        } catch (ClientProtocolException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (JSONException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        return null;
    }
    private static String convertStreamToString(InputStream is) {
        /*
         * To convert the InputStream to String we use the BufferedReader.readLine()
         * method. We iterate until the BufferedReader return null which means
         * there's no more data to read. Each line will appended to a StringBuilder
         * and returned as String.
         */
        BufferedReader reader = new BufferedReader(new InputStreamReader(is));
        StringBuilder sb = new StringBuilder();

        String line = null;
        try {
            while ((line = reader.readLine()) != null) {
                sb.append(line + "\n");
            }
        } catch (IOException e) {
            e.printStackTrace();
        } finally {
            try {
                is.close();
            } catch (IOException e) {
                e.printStackTrace();
            }
        }
        return sb.toString();
    } 
```

这是我的 WCF Rest Get 方法

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Runtime.Serialization;
using System.ServiceModel;
using System.Text;
using testServer;

namespace IGTSMPathService
{
// NOTE: You can use the "Rename" command on the "Refactor" menu to change the class name     "PathService" in code, svc and config file together.
public class PathService : IPathService
{
    //GET Method 
    //http://localhost:50837/PathService.svc/FindPath/262,100/525,390
    //Response - {"FindPathResult":[{"x":262,"y":165},{"x":346,"y":165},{"x":420,"y":165},  {"x":473,"y":165},{"x":473,"y":240},{"x":473,"y":277},{"x":473,"y":320},{"x":473,"y":390},{"x":525,"y":390}]}

    public System.Drawing.Point[] FindPath(string cLocation, string destination)
    {
        System.Drawing.Point[] list;
        Location loc = new Location(cLocation);
        System.Drawing.Point cur, des;
        cur = new System.Drawing.Point(Int32.Parse(cLocation.Split(',')[0].Trim()),    Int32.Parse(cLocation.Split(',')[1].Trim()));
        des = new System.Drawing.Point(Int32.Parse(destination.Split(',')[0].Trim()),   Int32.Parse(destination.Split(',')[1].Trim()));
        list = loc.findPoint(cur, des);

        return list;
    }
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T08:10:55.627

为您的服务方法使用包装器，如下所示：对于 POST：

```
[OperationContract]
[WebInvoke(BodyStyle = WebMessageBodyStyle.WrappedRequest,
   ResponseFormat = WebMessageFormat.Json,
   Method = "POST",
   UriTemplate = "login")] 
```

忘记：

```
[OperationContract]
[WebInvoke(BodyStyle = WebMessageBodyStyle.Bare,
   ResponseFormat = WebMessageFormat.Json,
   Method = "GET",
   UriTemplate = "users/{userId}")] 
```

在您的 android 应用程序中使用任何使用 web 服务的示例，但使用 IIS 服务器的 ip（确保 IIS 服务器可通过设备的 wi-fi 访问）

# javascript - 有没有办法在javascript中格式化字符串？

> ID：11879126
> 
> 赞同：0
> 
> 时间：2012-08-09T08:04:25.557
> 
> 标签：javascript

好吧，在 python 或 java 中，或者......我们这样做：（python 版本）

```
tmp = "how%s" %("isit") 
```

现在 tmp 看起来像“howisit”。
javascript中是否有类似的东西？（而不是 sprintf ）

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T08:10:18.627

不是内置的，但您可以通过扩展 String 原型来制作自己的模板：

```
String.prototype.template = String.prototype.template ||
   function(){
    var args = arguments;
    function replacer(a){
        return args[Number(a.slice(1))-1] || a;
    }
    return this.replace(/(\$)?\d+/gm,replacer)
   };
// usages
'How$1'.template('isit'); //=> Howisit
var greet = new Date('2012/08/08 08:00') < new Date 
             ? ['where','yesterday'] : ['are','today'];
'How $1 you $2?'.template(greet[0],greet[1]); // How where you yesterday? 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T08:08:28.810

不，javascript 中没有内置字符串格式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T08:10:09.543

不，没有。您可以进行字符串连接。

```
var tmp = 'how' + 'isit'; 
```

或者`replace`在其他情况下。这是一个愚蠢的例子，但你明白了：

```
var tmp = 'how{0}'.replace('{0}', 'isit'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T08:20:49.000

没有内置函数，但是您可以很容易地自己构建一个。该`replace`函数可以接受函数参数，是这项工作的完美解决方案。虽然要小心大字符串和复杂的表达式，因为这可能会很快变慢。

```
var formatString = function(str) {
    // get all the arguments after the first
    var replaceWith = Array.prototype.slice.call(arguments, 1);
    // simple replacer based on String, Number
    str.replace(/%\w/g, function() {
        return replaceWith.shift();
    });
};

var newString = formatString("how %s %s?", "is", "it"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-09T08:31:03.807

我认为您可以使用这些（简单的）片段；

```
function formatString(s, v) {
  var s = (''+ s), ms = s.match(/(%s)/g), m, i = 0;
  if (!ms) return s;
  while(m = ms.shift()) {
     s = s.replace(/(%s)/, v[i]);
     i++;
  }
  return s;
}

var s = formatString("How%s", ["isit"]); 
```

或者;

```
String.prototype.format = function() {
    var s = (""+ this), ms = s.match(/(%s)/g) || [], m, v = arguments, i = 0;
    while(m = ms.shift()) {
        s = s.replace(/(%s)/, v[i++]);
    }
    return s;
}

var s = "id:%s, name:%s".format(1,"Kerem");
console.log(s); 
```

# java - Hibernate：在同一列中映射两个属性

> ID：11879128
> 
> 赞同：0
> 
> 时间：2012-08-09T08:04:34.447
> 
> 标签：java, hibernate, mapping

在休眠中是否可以使用同一类的 2 个属性映射同一列，并有可能在查询中引用这两个属性？听起来毫无意义，但我必须做的事情是值得的。在下面的示例中，我可以标记第二个 getter @Transient 以保留第二个 getter，但我会在查询中丢失别名，所以我想保留“myPropertyAliasOne”和“myPropertyAliasTwo”。

```
@Entity
public MyEntity {

   private String myProperty;

   @Column(name="ACTUAL_VALUE")
   public String getMyPropertyAliasOne(){
        return myProperty;
   }

   @Transient
   public String getMyPropertyAliasTwo(){
        return myProperty;
   }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T08:27:33.337

如果您想将一列映射到两个属性，为什么不只映射其中一个并将另一个设置为第一个的值。

```
@Entity
public MyEntity {

   @Column(name="ACTUAL_VALUE")
   private String myProperty1;
   private String myProperty2;

   public void setMyPropert1(String str){
       myProperty1 = str;
       myProperty2 = str;
   }
   public void setMyPropert2(String str){
       myProperty1 = str;
       myProperty2 = str;
   }
   public void setMyPropert2(){
       myProperty2 = myProperty1;
   }
   @Transient
   public String getMyPropertyAliasOne(){
        return myProperty1;
   }

   public String getMyPropertyAliasTwo(){
        return myProperty2;
   }
} 
```

在这种情况下，您手动使这些属性始终相同。（*但我不明白，为什么这种冗余有用？*）

# video - 我需要服务器端视频流吗？

> ID：11879134
> 
> 赞同：3
> 
> 时间：2012-08-09T08:05:08.970
> 
> 标签：video, video-streaming, html5-video

我们正在实施一个网站，人们可以在其中观看托管在我们的服务器和 Amazon S3 上的视频。

我们将使用一个支持 HTML5 视频的出色的基于 jquery 的播放器——因为第一个版本针对的是 iOS Safari——我们还没有决定哪一个。

无论如何，我的问题是：我需要服务器端视频流解决方案吗？或者如果我只是将 2GB 视频指定为 HTML5 视频标签的参数，它会在下载时播放吗？

另外，如果我需要流媒体解决方案，您有什么建议？ffmpeg？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T21:56:42.417

对于这种类型的视频，您不需要流媒体服务器（如在 Flash Media Server 中）。HTML5 浏览器可以在仅下载一部分视频文件时开始播放视频，甚至可以进行范围请求，以便您可以在视频中跳转到尚未下载的点。

# .net - Visual Studio + TortoiseSVN 够用吗？还是我也应该使用 AnkhSVN 插件？

> ID：11879135
> 
> 赞同：6
> 
> 时间：2012-08-09T08:05:11.940
> 
> 标签：.net, visual-studio-2010, svn, ankhsvn

我正在使用 Visual Studio 2010。我认为对于 SVN，我可以使用 TortoiseSVN，我只是将我的 VS 项目文件夹添加到存储库并完成。也许我可以使用[tortoiseSVN 插件](http://vstortoise.codeplex.com/)，但它仍然是一个测试版和旧版本。

其他人在谈论 AnkhSVN + TortoiseSVN。我真的需要结合这两个工具吗？我只是问，在我从这里开始一些 SVN 之前，我想知道最聪明的方法是什么。有什么建议么？谢谢！

编辑：好的，我真的不明白。如果您告诉我我应该同时使用两者 - 如果我想提交新内容，我该怎么办？我先用 Ankh 然后用 TortoiseSVN 提交？一切都会正常工作而不会出错？好吧，我只是困惑，因为我从来没有使用过 svn（特别是同时使用 2 个）。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-09T08:09:19.967

TortoiseSVN 和 AnkhSVN 可以很好地共存，只要您保持两者都相当最新（意味着 AnkhSVN 和 TortoiseSVN 中的 Apache Subversion 版本应该相同）。

使用 AnkhSVN 很方便，因为您可以直接在 Visual Studio 中执行许多 SVN 操作，而无需切换到 TortoiseSVN，您将在解决方案资源管理器中看到文件的状态。

TortoiseSVN 在某些方面做得更好（例如解决冲突），因此在这种情况下使用它是件好事。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-09T08:10:45.877

两个都。

Ankh 可以更轻松地确保您不会添加类而忘记将其添加到存储库（例如）。

Tortoise 更擅长解决复杂的提交问题，例如移动和删除的组合。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-09T08:26:39.807

当使用 Subversion 作为在 Visual Studio 中开发的项目的版本控制并仅使用独立客户端（例如 TortoiseSVN 或仅命令行）时，您可能会遇到以下问题：

*   您必须从 Visual Studio 切换到独立客户端才能执行重命名/删除/添加等操作。也就是说，您必须手动将对项目所做的更改反映到 Subversion，

*   在 Visual Studio 中看不到对项目所做的更改，

*   您必须手动忽略临时文件（不应该版本化的文件）。

等等等等

AnkhSVN 将 Apache Subversion 集成到 Visual Studio 中。例如，它将在解决方案资源管理器中向您显示文件的状态，反映您对 Subversion 所做的更改等。

但是我个人使用[VisualSVN](http://www.visualsvn.com/visualsvn/)并认为它的集成比 AnkhSVN 好得多。例如，AnkhSVN 不会在解决方案资源管理器中显示 C++ 过滤器的状态，但 VisualSVN 会显示。恕我直言，VisualSVN 比 AnkhSVN 更容易、更直观。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-09T08:11:47.207

两个都。我发现使用 AnkhSVN 在从 Visual Studio 中移动/重命名文件时也有帮助。

# ajax - 何时使用 valueChangeListener 或 f:ajax 监听器？

> ID：11879138
> 
> 赞同：90
> 
> 时间：2012-08-09T08:05:17.083
> 
> 标签：ajax, jsf, jsf-2, listener, valuechangelistener

以下两段代码在`listener`放置方面有什么区别？

```
<h:selectOneMenu ...>
    <f:selectItems ... />
    <f:ajax listener="#{bean.listener}" />
</h:selectOneMenu> 
```

和

```
<h:selectOneMenu ... valueChangeListener="#{bean.listener}">
    <f:selectItems ... />
</h:selectOneMenu> 
```

* * *

## 回答 #1

> 赞同：187
> 
> 时间：2012-08-09T12:02:13.010

**只有在提交表单并且**提交的值与初始值不`valueChangeListener`同时才会调用。因此，*仅*在触发HTML DOM事件时不会调用它。如果您想在 HTML DOM事件期间提交表单，那么您需要在输入组件中添加另一个不带侦听器（！）的表单。它将导致仅处理当前组件的表单提交（如 中）。***`change``change``<f:ajax/>``execute="@this"`***

 ***```
<h:selectOneMenu value="#{bean.value}" valueChangeListener="#{bean.changeListener}">
    <f:selectItems ... />
    <f:ajax />
</h:selectOneMenu> 
```

* * *

当使用`<f:ajax listener>`代替时`valueChangeListener`，默认情况下它会在 HTML DOM`change`事件期间执行。在`UICommand`表示复选框或单选按钮的组件和输入组件内部，默认情况`click`下仅在 HTML DOM 事件期间执行。

```
<h:selectOneMenu value="#{bean.value}">
    <f:selectItems ... />
    <f:ajax listener="#{bean.ajaxListener}" />
</h:selectOneMenu> 
```

* * *

另一个主要区别是该`valueChangeListener`方法是在`PROCESS_VALIDATIONS`阶段结束时调用的。此时，模型中尚未更新提交的值。所以你不能通过访问绑定到输入组件的 bean 属性来获得它`value`。你需要得到它`ValueChangeEvent#getNewValue()`。顺便说一下，旧值也可以通过`ValueChangeEvent#getOldValue()`.

```
public void changeListener(ValueChangeEvent event) {
    Object oldValue = event.getOldValue();
    Object newValue = event.getNewValue();
    // ...
} 
```

* * *

该`<f:ajax listener>`方法在`INVOKE_APPLICATION`阶段期间被调用。那时，提交的值已经在模型中更新。您可以通过直接访问绑定到输入组件的`value`.

```
private Object value; // +getter+setter.

public void ajaxListener(AjaxBehaviorEvent event) {
    System.out.println(value); // Look, (new) value is already set.
} 
```

* * *

此外，如果您需要根据提交的值更新*另一个*属性，那么在您使用时它将失败，`valueChangeListener`因为更新的属性*可以*`UPDATE_MODEL_VALUES`在后续阶段被提交的值覆盖。这正是您在旧的 JSF 1.x 应用程序/教程/资源中看到`valueChangeListener`这种结构中的 a 被结合使用`immediate="true"`并`FacesContext#renderResponse()`防止这种情况发生的原因。毕竟，使用`valueChangeListener`来执行业务操作实际上一直是一种破解/解决方法。

总结：`valueChangeListener`仅当您需要拦截实际值更改本身时才使用。即，您实际上对旧值和新值都感兴趣（例如记录它们）*。*

```
public void changeListener(ValueChangeEvent event) {
    changeLogger.log(event.getOldValue(), event.getNewValue());
} 
```

`<f:ajax listener>`仅当您需要对新更改的值执行业务操作时才使用。即，您实际上*只*对新值感兴趣（例如填充第二个下拉列表）。

```
public void ajaxListener(AjaxBehaviorEvent event) {
    selectItemsOfSecondDropdown = populateItBasedOn(selectedValueOfFirstDropdown);
} 
```

如果您在执行业务操作时实际上也对旧值感兴趣，则回退到`valueChangeListener`，但将其排队到`INVOKE_APPLICATION`阶段。

```
public void changeListener(ValueChangeEvent event) {
    if (event.getPhaseId() != PhaseId.INVOKE_APPLICATION) {
        event.setPhaseId(PhaseId.INVOKE_APPLICATION);
        event.queue();
        return;
    }

    Object oldValue = event.getOldValue();
    Object newValue = event.getNewValue();
    System.out.println(newValue.equals(value)); // true
    // ...
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-09T08:20:14.903

对于第一个片段（ajax 侦听器属性）：

ajax 标记的“listener”属性是每次在客户端发生 ajax 函数时在服务器端调用的方法。例如，您可以使用此属性来指定每次用户按下键时调用的服务器端函数

但第二个片段（valueChangeListener）：

ValueChangeListener 只会在表单提交时调用，而不是在输入的值更改时调用

*您可能想查看这个[方便的答案](https://stackoverflow.com/a/4802483/1019741)***

# wordpress - 使用 RCurl 登录 WordPress

> ID：11879142
> 
> 赞同：3
> 
> 时间：2012-08-09T08:05:23.787
> 
> 标签：wordpress, r, http, curl, rcurl

我想使用 R 的 RCurl 包登录 WordPress 网站以安装 WordPress 插件（可能在 WordPress 的某些选项页面上使用 postForm）。由于该网站受密码保护，我请求您帮助我验证我的 R 会话。

我发现以下三个链接相关，但不知道如何将它们用于 WordPress：

*   [使用 RCurl 登录 mediawiki](https://stackoverflow.com/questions/6370357/login-to-mediawiki-using-rcurl)
*   [使用 HttpWebRequest 登录 Wordpress](https://stackoverflow.com/questions/3599982/login-wordpress-using-httpwebrequest)
*   [http://r.789695.n4.nabble.com/RCurl-HTTP-Post-td3311942.html](http://r.789695.n4.nabble.com/RCurl-HTTP-Post-td3311942.html)

有什么建议么？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T14:51:36.583

我已经使用 REDCap 处理了类似的事情 - 可能对你也有用。这个简短的示例展示了我如何使用 REDCap API 来获取数据。

```
library(RCurl)
out <- postForm("https://redcap.url.org/redcap/api/",
                 token="INSERT TOKEN HERE",
                 content="record",
                 type="flat",
                 format="csv",
                 .opts=curlOptions(ssl.verifypeer=FALSE))
write(out,file="C:/wherever/out.csv") 
```

请注意，这不会对 SSL 进行正确检查——我在以后的版本中对此进行了改进。更冗长的解释在我的 Google+ 个人资料中：https: [//plus.google.com/106259574970597769926/posts/U3fVCTV4EdQ](https://plus.google.com/106259574970597769926/posts/U3fVCTV4EdQ)

看起来您可以通过传递正确的参数来使用 cURL 登录 Wordpress，如下所述： [http ://w4dev.com/wp/login-into-wp-using-curl/](http://w4dev.com/wp/login-into-wp-using-curl/)

看起来有问题的 URL`http://localhost/wordpress/wp-login.php`和重要的参数可以在上面的页面中找到。基本上，您需要定义用户、他们的密码以及之后您希望将他们重定向到站点的位置。这些是该 PHP 示例中描述参数的方式

```
"log=". $login_user .
"&pwd=" . $login_pass .
"&wp-submit=Log%20In&redirect_to=" . $visit_url; 
```

基本上，它只是构造一个要发布的字符串，它看起来像：

```
http://yourwordpress.fake/wp-login.php?log=trehman&pwd=abc123456&wp-submit=Log%20In&redirect_to=http://yourwordpress.fake/pageyouwant 
```

因此，您可以将上面的 postForm 更改为具有不同的 URL 和参数，它应该让您获得身份验证，然后将您重定向到您想要的页面。我不是这里的专家，但我很确定您可以重定向到另一个带有参数的长 URL，这样您就可以“提交”表单或类似的东西。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-09T21:03:03.807

您可以使用该`XMLRPC`包访问 wordpress

```
library(XMLRPC)
service <- "http://myblog.wordpress.com/xmlrpc.php"
xml.rpc(service, "wp.getUsersBlogs", "my@email", "secretpassword", .convert = TRUE) 
```

此 API 支持的功能[在此处](http://codex.wordpress.org/XML-RPC_WordPress_API)记录。使用`wp.uploadFile`它可能可以将照片加载到服务器中。

# php - 关联数组 - 动态创建 (CodeIgniter)

> ID：11879146
> 
> 赞同：2
> 
> 时间：2012-08-09T08:05:46.930
> 
> 标签：php, arrays, codeigniter

我在 Code Igniter 中有表单，我想使用 helper `form_dropdown()`。为了做到这一点，我必须准备这样的关联数组：

```
$options = array(
              'small'  => 'Samsung',
              'med'    => 'Apple',
              'large'   => 'HTC',
              'xlarge' => 'Nokia',
            ); 
```

但是在这个视图中，这些数据是从控制器传输的，当然这些数据是从模型中获取的。

```
 $this->db->select('id');
        $query  = $this->db->get('ci_table1');

    if ($query->num_rows() > 0 )
    {
        foreach ($query->result() as $row) 
        {
           $data[] = $row; 
        };
    };

    $id_data['id'] = $data;

    $this->load->view('update_record_view', $id_data); 
```

所以，从侧面看，我有`foreach`-loop：

```
 foreach ($id as $row) 
          {
             // this I want to construct associative array
          } 
```

问题如下：如何在我的情况下动态创建关联数组？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T08:20:50.553

我不明白你的代码。但也许这就是你要找的。

```
 $this->db->select('id');
    $id_data['id'] = $this->db->get('ci_table1')->result_array(); 
    $this->load->view('update_record_view', $id_data); 
```

和：

```
 $options = array();
    foreach ($id as $row) 
    {
        // this I want to construct associative array
        $options[ $row['id'] ] = ...;
    } 
```

# .net - Word Addin 中的 AxAcroPDFLib.AxAcroPDF（32 位和 64 位）

> ID：11879150
> 
> 赞同：1
> 
> 时间：2012-08-09T08:06:08.720
> 
> 标签：.net, pdf, ms-word, activex, axacropdf

我正在尝试让活动 x 控件（adobe acrobat - AxAcroPDFLib.AxAcroPDF）在我的 word 2010 插件中工作。当我使用目标平台 x32 构建插件时，它可以工作。问题是我也需要它作为 x64 插件，否则它将无法与 64 位字一起使用。

使用目标平台（任何或 x64）：未注册类（HRESULT 异常：0x80040154 (REGDB_E_CLASSNOTREG)）

是否有可能让 AxAcroPDF（32 位）在使用目标平台（任何或 x64）构建的应用程序中工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T11:12:58.137

您坚持使用 32 位/x86 控件，因此您的插件需要是 32 位/x86 才能使用该控件，因此 Word 也需要是 32 位/x86 才能加载插件，微软[在此处推荐](http://technet.microsoft.com/en-us/library/ee681792.aspx)：

> 如果您组织中的用户依赖于现有的 Office 扩展，例如**ActiveX 控件**、第三方加载项、基于以前版本的 Office 构建的内部解决方案或直接与 Office 交互的 32 位版本的程序，**我们建议**您在运行 32 位和 64 位支持的 Windows 操作系统的计算机上**安装 32 位 (x86) Office 2010 （默认安装）。**

# c# - 将xml文件翻译成文本

> ID：11879153
> 
> 赞同：1
> 
> 时间：2012-08-09T08:06:11.477
> 
> 标签：c#, asp.net

在这个网络应用程序中，我想向移动网络发送一条短信。这是我的 aspx.cs 文件代码：

```
protected void buttonSendOnClick(object sender, EventArgs e)
{
    //are required fields filled in:
    if (textboxRecipient.Text == "")
    {
         textboxError.Text += "Recipient(s) field must not be empty!\n";
         textboxError.Visible = true;
         return;
    }
        //we creating the necessary URL string:
    string ozSURL = "http://127.0.0.1"; //where Ozeki NG SMS Gateway is running
    string ozSPort = "9501"; //port number where Ozeki NG SMS Gateway is listening
    string ozUser = HttpUtility.UrlEncode("admin"); //username for successful login
    string ozPassw = HttpUtility.UrlEncode("abc123"); //user's password
    string ozMessageType = "SMS:TEXT"; //type of message
    string ozRecipients = HttpUtility.UrlEncode( textboxRecipient.Text); //who will        

 //get the message
    string ozMessageData = HttpUtility.UrlEncode(textboxMessage.Text); //body of  
 //message

     string createdURL = ozSURL + ":" + ozSPort + "/httpapi" +
          "?action=sendMessage" +
            "&username=" + ozUser +
            "&password=" + ozPassw +
            "&messageType=" + ozMessageType +
            "&recipient=" + ozRecipients +
            "&messageData=" + ozMessageData;

   try
   {
            //Create the request and send data to Ozeki NG SMS Gateway Server by HTTP 
connection
            HttpWebRequest myReq = (HttpWebRequest)WebRequest.Create(createdURL);

            //Get response from Ozeki NG SMS Gateway Server and read the answer
            HttpWebResponse myResp = (HttpWebResponse)myReq.GetResponse();
            System.IO.StreamReader respStreamReader = new 
 System.IO.StreamReader(myResp.GetResponseStream());
            string responseString = respStreamReader.ReadToEnd();
            respStreamReader.Close();
            myResp.Close();

            //inform the user
            string result = Regex.Replace(responseString, @"<[^>]*>", string.Empty);
            textboxError.Text = Server.HtmlEncode( result);
            textboxError.Visible = true;
        }
        catch (Exception)
        {
            //if sending request or getting response is not successful Ozeki NG SMS                 
  Gateway Server may do not run
            textboxError.Text = "Ozeki NG SMS Gateway Server is not running!";
            textboxError.Visible = true;
        }

    } 
```

运行后，我得到了像这样的**xml doc文本**

```
<Responses>
<Response0>
    <Action>sendMessage</Action>
    <Data>
        <AcceptReport>
            <StatusCode>0</StatusCode>
            <StatusText>Message accepted for delivery</StatusText>
            <MessageID>89c8011c-e291-44c3-ac72-cd35c76cb29d</MessageID>
            <Recipient>+85568922903</Recipient>
        </AcceptReport>
    </Data>
</Response0>
</Responses> 
```

但我希望它显示为

消息接受传递消息 ID：IEUHSHIL 收件人：+441234567

那么我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T08:16:43.973

关于评论中建议的方法之一，使用类似这样的方法；

```
 XmlDocument doc = new XmlDocument();
        doc.LoadXml(load your xml document or string here);
        XmlNodeList xnList = doc.SelectNodes("Response0/Data/AcceptReport");
        foreach (XmlNode xn in xnList)
                            {
                                string status = xn["StatusTest"].InnerText;
                                string messageID = xn["MessageID"].InnerText;
                                string recipient = xn["Recipient"].InnerText;
                            }
        string finalString = string.Format("{0} Message ID: {1} Recipient {2}", status, messageID, recipient); 
```

这将根据您加载到其中的文档或字符串创建一个 XML 文档。XmlNodeList 允许您基本上挑选出您想要的任何 XmlElements，在这种情况下，您可以按照您请求的格式使用节点信息格式化一个字符串

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T08:29:05.470

`XmlDocument`将类与 XPath 一起使用怎么样？

客户端代码：

```
XmlDocument xmlDocument = new XmlDocument();
xmlDocument.Load(...);  // Load from file, stream, etc.
string status = GetDeliveryStatus(xmlDocument); 
```

XML文档处理：

```
private static string GetDeliveryStatus(XmlDocument xmlDocument)
{
    XmlNode reportNode = xmlDocument.SelectSingleNode("/Responses/Response0/Data/AcceptReport");
    if (reportNode == null)
        throw new ArgumentException("AcceptReport node is absent", xmlDocument);

    var messageIDNode = reportNode["MessageID"];
    if (messageIDNode == null)
        throw new ArgumentException("MessageID node is absent", xmlDocument);
    var messageID = messageIDNode.InnerText;

    var recipientNode = reportNode["Recipient"];
    if (recipientNode == null)
        throw new ArgumentException("Recipient node is absent", xmlDocument);
    var recipient = recipientNode.InnerText;

    var result = string.Format("Message accepted for delivery Message ID: {0} Recipient: {1}", messageID, recipient);
    return result;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T08:21:48.307

尝试这样的事情

```
 string stext = @"<Responses>
    <Response0>
     <Action>sendMessage</Action>
       <Data>
        <AcceptReport>
         <StatusCode>0</StatusCode>
         <StatusText>Message accepted for delivery</StatusText>
         <MessageID>89c8011c-e291-44c3-ac72-cd35c76cb29d</MessageID>
         <Recipient>+85568922903</Recipient>
       </AcceptReport>
      </Data>
    </Response0>
   </Responses>";
       XElement xm = XElement.Parse(stext);
       string sout="";
       sout = xm.Descendants("StatusText").First().Value + " Message ID:" + xm.Descendants("MessageID").First().Value + " Recipient:" + xm.Descendants("Recipient").First().Value; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T10:10:57.863

使用 XSLT。原因是它可以很容易地将转换存储在文件中。这意味着如果消息格式发生变化，很容易更新您的转换以应对。

添加一个功能，如

```
public void XslTransformer(string source, string stylesheet, string output)
{
    XslTransform xslt = new XslTransform();
    xslt.Load(stylesheet);
    xslt.Transform(source, output);                
} 
```

并调用它，传递您的 XML 和如下转换：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<!-- Edited by XMLSpy® -->
<xsl:stylesheet version="1.0"
xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:template match="/">
<html>
Message accepted for delivery
    <table border="0">
      <tr>
        <td>Message ID:</td>
        <td><xsl:value-of select="Responses/Response0/Data/AcceptReport/MessageID"/></td>
        <td>Recipient:</td>
        <td><xsl:value-of select="Responses/Response0/Data/AcceptReport/Recipient"/></td>
        <td>StatusCode:</td>
        <td><xsl:value-of select="Responses/Response0/Data/AcceptReport/MessageID"/></td>
      </tr>
    </table>
</html>
</xsl:template>
</xsl:stylesheet> 
```

根据需要更改此格式。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-09T08:29:26.423

你得到了一个 json 结果：

您将其转换为字符串，然后用空格替换大括号，这就是您得到 xml 的原因。

重新检查这些行：

```
 //inform the user
            string result = Regex.Replace(responseString, @"<[^>]*>", string.Empty);
            textboxError.Text = Server.HtmlEncode( result); 
```

检查 ResponseString 并从中提取所需的数据。

有用的链接： [阅读 HttpwebResponse json 响应，C#](https://stackoverflow.com/questions/5493949/reading-httpwebresponse-json-response-c-sharp) ，[如何拆分 json 格式字符串以便反序列化为 .net 对象？](https://stackoverflow.com/questions/9197963/how-to-split-json-format-string-in-order-to-deserialize-is-into-net-object)

# html - Bootstrap CSS 和其他 CSS/HTML 组件包

> ID：11879163
> 
> 赞同：2
> 
> 时间：2012-08-09T08:06:49.167
> 
> 标签：html, css, twitter-bootstrap, kickstrap

我刚刚开始将 Bootstrap 用于一个项目 /w ASP.NET MVC，很喜欢它！惊人！我很失望没有更多可用的组件，例如您可以放入的示例布局组件。（IE 列表、细节、框、框中的排版变体）各种各样的东西，甚至可以加快开发速度更多的。

是否有 Bootstrap 提供的其他插件或任何其他可用的 CSS/HTML 组件库可以帮助我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T08:17:08.897

请尝试[Kickstrap](http://ajkochanowicz.github.com/Kickstrap/)。这是**Twitter 的 Bootstrap**的完整版本，包含主题、增强功能和其他好东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T14:12:16.193

以下链接指向 Bootstrap HTML Helpers。它们在组件方面没有添加太多新内容，但它们确实使代码更清晰并加快了开发速度：

[http://www.codeproject.com/Articles/507569/Bootstrap-HTML-Helpers](http://www.codeproject.com/Articles/507569/Bootstrap-HTML-Helpers)

希望这可以帮助。

# php - 预加载图像 PHP 并在 JS 中等待直到完成

> ID：11879165
> 
> 赞同：0
> 
> 时间：2012-08-09T08:07:05.863
> 
> 标签：php, javascript, image, time

我需要 JS 中的图像预加载器。图像由 PHP 脚本获取（以避免向用户打开文件结构）并设置为 img 标签的属性。预加载后，我们等待绑定为事件侦听器的事件被触发（有点像幻灯片）。

```
var preloadImage = $('<img />').attr('src', 'getimage.php');
preloadImage.onLoad = function() {console.log('finished')} 
```

问题是，onLoad 当然不起作用，因为它处理的是 JS 中正在处理的图像，而在这种情况下，我们正在等待 PHP 完成获取图像。php脚本是这样的

```
<?php
header("Content-type: image/png");
readfile('image.png');
?> 
```

任何人都知道在这种情况下我如何让 JS 等到 php 完成加载？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T09:50:04.917

正如 DaveRandom 在上面的讨论中完美地回答了这个问题，这里是最终代码。preloadImage 是一个 jQuery 对象，这意味着需要传递 .load() 函数。

```
var preloadImage = $('<img />').attr('src', 'getimage.php').load(function() {console.log('finished')}) 
```

# java - 带约束的图中两个坐标点之间的最短路径数

> ID：11879166
> 
> 赞同：0
> 
> 时间：2012-08-09T08:07:07.900
> 
> 标签：java, algorithm

我得到了几个坐标点：

1.  资源`(0,0)`

2.  目的地`(m,n)`

3.  一组坐标点`S = {(x,y)`，使得`0 < x < m`和`0 < y < n}`

目标是找出 和 之间的最短路径的数量，`(0,0)`使得`(m,n)`集合中的任何点`S`都不会在这些路径中遇到。我如何找到它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T09:16:47.517

在这里，您有一个 C# 解决方案，但可以轻松转换为 Java。希望你会发现它很有用。

```
using System;
using System.Collections.Generic;
using System.Drawing;

namespace Game
{
    class Program
    {
        /// <summary>
        /// Find a matrix with all possible optimum paths from point A to point B
        /// </summary>
        /// <param name="rows">Rows of the matrix</param>
        /// <param name="cols">Cols of the matrix</param>
        /// <param name="points">Obstacles location</param>
        /// <param name="moves">Allowed moves</param>
        /// <param name="matrix">Resulting matrix</param>
        /// <param name="A">Starting point</param>
        /// <param name="B">Ending point</param>
        private static void FindMatrix(int rows, int cols, List<Point> points, List<Point> moves, out List<List<int>> matrix, out Point A, out Point B)
        {
            matrix = new List<List<int>>();
            A = new Point(-1, -1);
            B = new Point(-1, -1);
            //Init values of the matrix
            for (int row = 0; row <= rows; row++)
            {
                matrix.Add(new List<int>());
                for (int col = 0; col <= cols; col++)
                    matrix[matrix.Count - 1].Add(0);
            }
            var index = 0;
            while ((index < points.Count) && (points[index].Y >= 0) && (points[index].Y <= rows) && (points[index].X >= 0) && (points[index].X <= cols))
            {
                matrix[points[index].Y][points[index].X] = -1;
                index++;
            }
            if ((index == points.Count) && (matrix[0][0] == 0) && (matrix[rows][cols] == 0))
            {
                A.X = 0;
                A.Y = 0;
                B.X = cols;
                B.Y = rows;
            }
            if ((A.X >= 0) && (A.Y >= 0) && (B.X >= 0) && (B.Y >= 0)) //To check if points A and B exist in the board
            {
                var pairs = new List<Point>[2] { new List<Point>(), new List<Point>() };
                int level = 0;
                index = 0;
                pairs[index].Add(A);
                while ((pairs[index].Count > 0) && (pairs[index][pairs[index].Count - 1] != B))
                {
                    pairs[Math.Abs(1 - index)].Clear();
                    level++;
                    foreach (var pair in pairs[index])
                        foreach (var move in moves) //Test all possible moves
                            if ((pair.Y + move.Y >= 0) && (pair.Y + move.Y < matrix.Count) && (pair.X + move.X >= 0) && (pair.X + move.X < matrix[pair.Y + move.Y].Count) && (matrix[pair.Y + move.Y][pair.X + move.X] == 0)) //Inside the boundaries? Not visited before?
                            {
                                pairs[Math.Abs(1 - index)].Add(new Point(pair.X + move.X, pair.Y + move.Y));
                                matrix[pair.Y + move.Y][pair.X + move.X] = level;
                            }
                    index = Math.Abs(1 - index);
                }
                matrix[A.Y][A.X] = 0;
            }
        }

        /// <summary>
        /// Finds all possible optimum paths from point A to point B in a matix with obstacles
        /// </summary>
        /// <param name="matrix">Matrix with obstacles</param>
        /// <param name="moves">Allowed moves</param>
        /// <param name="A">Starting point</param>
        /// <param name="B">Ending point</param>
        /// <param name="result">Resulting optimum paths</param>
        /// <param name="list">Temporary single optimum path</param>
        private static void WalkMatrix(List<List<int>> matrix, List<Point> moves, Point A, Point B, ref List<List<Point>> result, ref List<Point> list)
        {
            if ((list.Count > 0) && (list[list.Count - 1] == B)) //Stop condition
            {
                result.Add(new List<Point>(list));
            }
            else
            {
                foreach (var move in moves)
                    if ((A.Y + move.Y >= 0) && (A.Y + move.Y < matrix.Count) && (A.X + move.X >= 0) && (A.X + move.X < matrix[A.Y + move.Y].Count) && (matrix[A.Y + move.Y][A.X + move.X] == matrix[A.Y][A.X] + 1)) //Inside the boundaries? Next step?
                    {
                        list.Add(new Point(A.X + move.X, A.Y + move.Y)); //Store temporary cell
                        WalkMatrix(matrix, moves, list[list.Count - 1], B, ref result, ref list);
                        list.RemoveAt(list.Count - 1); //Clean temporary cell
                    }
            }
        }

        public static List<List<Point>> FindPaths(int rows, int cols, List<Point> points)
        {
            var result = new List<List<Point>>();
            var moves = new List<Point> { new Point(1, 0), new Point(0, 1), new Point(-1, 0), new Point(0, -1) }; //Right, Down, Left, Up (clockwise)
            List<List<int>> matrix; //Matrix temporary representation to store all possible optimum paths
            Point A; //Starting point
            Point B; //Ending point
            FindMatrix(rows, cols, points, moves, out matrix, out A, out B);
            if ((A.X >= 0) && (A.Y >= 0) && (B.X >= 0) && (B.Y >= 0)) //To check if points A and B exist
            {
                List<Point> list = new List<Point>();
                list.Add(A);
                WalkMatrix(matrix, moves, A, B, ref result, ref list);
            }
            return result;
        }

        static void Main(string[] args)
        {
            var points = new List<Point>
            {
                new Point(3, 2),
                new Point(4, 2),
                new Point(5, 2),
                new Point(3, 3),
                new Point(4, 3),
                new Point(5, 3),
                new Point(3, 4),
                new Point(4, 4),
                new Point(5, 4)
            };
            List<List<Point>> paths = FindPaths(5, 10, points); //path.Count store the quantity of optimum paths
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T10:09:21.773

我认为这是一个完整的解决方案，但您可能想对其进行测试并将其转换为 java。

基本思想是先搜索网格。在网格中的每个点上，到达该点的方式的数量等于在距离该点的距离内靠近该点的方式的数量减一。

```
n, m = 10, 15 #10 by 15 grid say

s = set([(1, 1), (2, 2), (9, 14)])

grid = []
ways = []
for i in range(n + 1):
    grid.append([None]*(m + 1))
    ways.append([0]*(m + 1))

start = (0, 0)
end = (n, m)

grid[0][0] = 0
ways[0][0] = 1

fringe = [start]
distance = 0
new_fringe = []
while True:
    for node in new_fringe:
        i, j = node
        deltas = [(-1, 0), (1, 0), (0, 1), (0, -1)] #directions to travel
        for di, dj in deltas:
            i2, j2 = i + di, j + dj
            if 0 <= i2 <= n and 0 <= j2 <= m and grid[i2][j2] == distance - 1:
                ways[i][j] += ways[i2][j2]

    new_fringe = []
    for node in fringe:
        i, j = node
        deltas = [(-1, 0), (1, 0), (0, 1), (0, -1)] #directions to travel
        for di, dj in deltas:
            i2, j2 = i + di, j + dj
            if 0 <= i2 <= n and 0 <= j2 <= m and (i2, j2) not in s and grid[i2][j2] is None:
                grid[i2][j2] = distance + 1
                new_fringe.append((i2, j2))
    if not new_fringe: #no new nodes
        break
    fringe = new_fringe
    distance += 1

for row in grid:
    print row
"""[[0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15],
    [1, None, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16],
    [2, 3, None, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17],
    [3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18],
    [4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19],
    [5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20],
    [6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21],
    [7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22],
    [8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23],
    [9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, None, 24],
    [10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25]]"""

for row in ways:
    print row

"""[1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1]
[1, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14]
[1, 1, 0, 2, 5, 9, 14, 20, 27, 35, 44, 54, 65, 77, 90, 104]
[1, 2, 2, 4, 9, 18, 32, 52, 79, 114, 158, 212, 277, 354, 444, 548]
[1, 3, 5, 9, 18, 36, 68, 120, 199, 313, 471, 683, 960, 1314, 1758, 2306]
[1, 4, 9, 18, 36, 72, 140, 260, 459, 772, 1243, 1926, 2886, 4200, 5958, 8264]
[1, 5, 14, 32, 68, 140, 280, 540, 999, 1771, 3014, 4940, 7826, 12026, 17984, 26248]
[1, 6, 20, 52, 120, 260, 540, 1080, 2079, 3850, 6864, 11804, 19630, 31656, 49640, 75888]
[1, 7, 27, 79, 199, 459, 999, 2079, 4158, 8008, 14872, 26676, 46306, 77962, 127602, 203490]
[1, 8, 35, 114, 313, 772, 1771, 3850, 8008, 16016, 30888, 57564, 103870, 181832, 0, 203490]
[1, 9, 44, 158, 471, 1243, 3014, 6864, 14872, 30888, 61776, 119340, 223210, 405042, 405042, 608532]""" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T08:55:41.040

这可以使用动态规划来解决。

首先，使用广度优先搜索找到每个节点到原点的距离。

那么通过距离到原点`F`的点的最短路径的数量就是所有距离为的相邻点的总和。`(x,y)``d``F(x1,y1)``(x1, y1)``(x,y)``d-1`

换句话说，`F(x,y) = Sum F(all neighboring points with distance-to-origin of d-1)`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T08:25:37.393

如果只允许整数坐标，它可以简单地简化为图形问题。

这可能是每场比赛的完成方式。该图看起来像一个矩形，源在一个角，目标在对面，节点由垂直或水平边连接。（部分节点已被删除，设置为 S）。

现在，这里的最短路径是拐角之间的 Dyck 路径的子集，因此加泰罗尼亚数字是一个上限。[http://mathworld.wolfram.com/DyckPath.html](http://mathworld.wolfram.com/DyckPath.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-09T08:24:59.103

我假设您正在谈论在 (x,y) 中定义的点网格。并且您要计算最短路径集的两点之间是多个障碍之一

因此，让我们将问题分成两个 1- 找到一组从 A 点到 B 点的最短路径 2- 确保在这些路径的每条路径上，没有一个属于 S 的点在路径上

为了解决这个问题，有很多算法，我想到的第一个是强化学习这是[这个链接](http://www.ise.pw.edu.pl/~cichosz/rl-java/)中的一个可视化示例 你可以使用这个库或自己实现它。它相当容易

两种算法都可以在网格中实现，您将一些点标记为障碍物，即您的点集 S，并且在检测路径时，集 S 的点将避开。

希望这可以帮助

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-08-09T08:10:13.480

尝试查看 Dijkstra 的算法： [http ://en.wikipedia.org/wiki/Dijkstra%27s%5Falgorithm](http://en.wikipedia.org/wiki/Dijkstra%27s%5Falgorithm)

# php - PHP - 从字符串中查找 URL 根的最佳方法？

> ID：11879174
> 
> 赞同：2
> 
> 时间：2012-08-09T08:07:21.947
> 
> 标签：php, regex, url, xpath

我使用 PHP。

**我有一个看起来像这样的 URL**

[http://www.mydomain.com/mydir/mydir2/?something=hello](http://www.mydomain.com/mydir/mydir2/?something=hello)

**我要这个：**

[http://www.mydomain.com](http://www.mydomain.com)

**我是这样做的，但感觉是错误的做法**

又长又丑。

```
$url = 'http://www.mydomain.com/mydir/mydir2/?something=hello';
$root_url_a = explode('/', $url);
$root_url = $root_url_a[0] . '//' .  $root_url_a[2];
$root_url_clean = $root_url_a[2]; 
```

**建议**

*   正则表达式？
*   Xpath？
*   一些对我来说未知的 PHP 函数？

最短最正确的做法将得到我的投票。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T08:14:50.457

好的，这是一个例子：

```
$url = parse_url('http://www.mydomain.com/mydir/mydir2/?something=hello');

echo $url->scheme.'://'.$url->host; 
```

是沿着正确的路线。

虽然从技术上讲这甚至是不正确的，因为取决于你是否发送一个方案来获取一个 url`parse_url`实际上可以改变它分配变量的方式，所以我写道：

```
function return_url($url){
    $parsed_url = parse_url($url);

    if(!$parsed_url){
        return false;
    }

    if(isset($parsed_url['scheme'])){
        if(!isset($parsed_url['host'])){
            return false;
        }else{
            return $parsed_url['scheme'].'://'.$parsed_url['host'];
        }
    }

    if(isset($parsed_url['path'])){
        return 'http://'.$parsed_url['path'];
    }
    return false;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T08:16:49.243

我会这样做：

```
$url = "http://www.mydomain.com/mydir/mydir2/?something=hello";
echo parse_url($url, PHP_URL_HOST);

// Would echo:
http://www.mydomain.com 
```

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2012-08-09T08:11:47.570

我会说 RTM ;)

[http://php.net/manual/en/function.parse-url.php](http://php.net/manual/en/function.parse-url.php)

```
<?php
$url = 'http://username:password@hostname/path?arg=value#anchor';

print_r(parse_url($url));

echo parse_url($url, PHP_URL_HOST);
?> 
```

# php - jquery在网页上进行幻灯片放映的最简单方法

> ID：11879175
> 
> 赞同：0
> 
> 时间：2012-08-09T08:07:22.517
> 
> 标签：php, jquery, css

大家好，我正在用 php 开发网站，我试图用 css3 html5 来展示，但有些功能很难做到，所以我进入 jquery 和 javascript，它看起来很简单，但我需要开发很快。所以有人可以帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T08:11:44.530

最好的方法是使用 JQuery 上可用的众多插件之一。

[http://slidesjs.com/](http://slidesjs.com/)是一个很好的起点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T08:29:31.420

我个人推荐你**[相机幻灯片](http://www.pixedelic.com/plugins/camera/)**（我用这个），它是一个免费的 jQuery 幻灯片插件。

你也可以浏览**[37 个新鲜的 jQuery 图像、内容滑块和幻灯片](http://www.smashingapps.com/2012/05/22/37-fresh-jquery-image-content-sliders-and-slideshows.html)**并从中挑选一个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T08:13:28.227

Malsup 的循环插件是我遇到的最简单的插件。您提供图像 url，它会简单地以不同的效果循环它们。

[http://jquery.malsup.com/cycle/](http://jquery.malsup.com/cycle/)

# jquery - 边距底部不使用脚本

> ID：11879176
> 
> 赞同：1
> 
> 时间：2012-08-09T08:07:22.983
> 
> 标签：jquery, html, css

首先你会[在这里找到我的网站。](http://cargocollective.com/btatest)

我有 div：

```
<div class="home" style="background-image: url(http://payload51.cargocollective.com/1/7/237315/3336908/HomeImage_o.jpg); background-attachment: fixed; height: 660px; width: 100%; opacity: 1; background-position-y: 0px; background-position-x: center; background-repeat: no-repeat no-repeat; background-size: 100%;"> 
</div> 
```

还有一些与该 div 相关的 CSS：

```
div.home {
    width: 100%;
    margin-bottom: 30px;
    min-width: 100%; height: auto;
} 
```

正如你所看到的，有一个`margin-bottom`但由于某种原因，棕色菜单和它下面的文本是：

1.  当浏览器失去宽度时，距离图像太远。
2.  两者都不响应浏览器，当浏览器变小时，文本会移得更远。

这是一个[jsfiddle，](http://jsfiddle.net/MichaelT/xQQrg/)如果这有点偏离，请道歉 - 仍然掌握 Jsfiddle。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T08:17:05.913

这个怎么样：[更新了 jFiddle](http://jsfiddle.net/xQQrg/1/)，基本上我将背景图像添加为 DIV 容器的子 IMG 以便填充。然后，您可以控制此 DIV 的大小以使其具有所需的外观。

我不认为我完全理解你的追求，所以如果这是朝着错误的方向道歉。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T08:25:18.250

它与边距底部无关。div 设置为 660px 高度。如果浏览器窗口对于背景图像不够宽，它将相应地缩放，保持纵横比。这看起来好像边距变宽了，但实际上它是显示为空的 div 的一部分。我不完全确定你想要做什么，但一个想法可能是动态调整 div 的高度。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T08:25:56.143

我认为问题在于它`content_container`比菜单更宽。如果您在页面上更改此行：

```
<div id="content_container" style="width: 816px;"> 
```

对此：

```
<div id="content_container" style="width: 720px;"> 
```

...效果更好

# solr - 通过 solr 模式文件进行数据转换

> ID：11879178
> 
> 赞同：0
> 
> 时间：2012-08-09T08:07:32.663
> 
> 标签：solr

我想知道是否可以使用 solr 模式文件来实现以下目标？

我有一个正在导入的多值字段，其中包含如下数据

*   产品
*   产品/电脑
*   产品/电脑/笔记本电脑
*   产品/电脑/笔记本电脑/网络摄像头

现在，我想做的是在导入时在每个值的开头添加一个值，例如深度指示器....

*   C0/产品
*   C1/产品/电脑
*   C2/产品/计算机/笔记本电脑
*   C3/产品/计算机/笔记本电脑/网络摄像头

任何人都知道这是否可能，或者我最好在导入之前在我的数据源上进行转换？

提前感谢任何帮助或指点将不胜感激:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T10:13:10.233

我想您可以使用[ScriptTransformer](http://wiki.apache.org/solr/DataImportHandler#ScriptTransformer)来实现这一点，方法是计算分隔符 (/) 的数量并将 CNumber 附加到值中。

但是，如果您正在预处理数据以对其进行索引，那么我会在那里进行，如果您避免 ScriptTransformer 索引会更快并且您会少一些麻烦。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T20:02:17.857

如果您在 Solr 4 上，另一种方法是在进行标记之前使用 ScriptUpdateProcessor 修改数据。 [http://wiki.apache.org/solr/ScriptUpdateProcessor](http://wiki.apache.org/solr/ScriptUpdateProcessor)

使用 ScriptUpdateProcessor，您不必编写 Java，您可以使用 JavaScript 或其他脚本语言，如 Python 或 Ruby。

# ruby-on-rails-3 - Rails 上的 Sublime Text 2

> ID：11879179
> 
> 赞同：1
> 
> 时间：2012-08-09T08:07:36.677
> 
> 标签：ruby-on-rails-3, vim, sublimetext2

我正在测试 sublime text 2，我对一些功能印象深刻，但我找不到从模型切换到控制器、从控制器操作切换到视图等的 Vim ":R" 选项。

让我知道在崇高是否有这个选项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T00:40:20.537

[SublimeText2RailsRelatedFiles](https://github.com/luqman/SublimeText2RailsRelatedFiles)是最接近模仿 rails.vim`gf`行为的 ST2 插件。

文档摘录：

> 这里我在查看models下的“page.rb”文件时按下了快捷键：
> 
> ![导航示例](../Images/b0b87978ba86b0a45370eb55fc7367e0.png)

# iphone - InAppSettingsKit ARC 替代方案

> ID：11879188
> 
> 赞同：0
> 
> 时间：2012-08-09T08:08:30.440
> 
> 标签：iphone, ios, xcode, cocoa

您好，是否有支持 ARC 的 InAPPSettingsKit 的更简单替代方案。

我只需要它的功能的 20%，所以更简单的东西就可以完成这项工作。或者，如果您可以向我指出一个教程，我可以在其中进行自己的设置（使用表格视图），那将会很棒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T09:52:03.217

InAppSettingsKit 可以随心所欲地简单或复杂，如果您不需要额外的功能，只需使用标准控件和简单的 settings.bundle/plist 配置即可。

至于 ARC，可以使用 Github 的 ARC 分支之一，例如[tibr](https://github.com/tibr/InAppSettingsKit)或[Club15CC](https://github.com/Club15CC/InAppSettingsKit/tree/15CC-ARC-Version)。
或者转到项目 >> 目标 >> 构建阶段并选择所有 InAppSettings 文件并添加行 -fno-objc-arc。此标志将告诉编译器编译这些文件以实现非 ARC 兼容性（[source](https://github.com/futuretap/InAppSettingsKit/issues/92)）。

# c++ - .rc 文件中 TEXTINCLUDE 部分的重复

> ID：11879194
> 
> 赞同：6
> 
> 时间：2012-08-09T08:09:02.797
> 
> 标签：c++, visual-studio, winapi, resource-file

在我的 .rc 文件中，我发现 3 TEXTINCLUDE 部分重复了两次，但内容不同。当我打开“资源包含”时，只显示前 3 个部分的包含。很久以前我已经调整了 .rc，所以它可能是剩下的。

我可以安全地删除后 3 个部分吗？

我从我的 .rc 文件中粘贴了这个，你可以看到 TEXTINCLUDE 部分是如何重复的（即“3 TEXTINCLUDE”后面跟着“1 TEXTINCLUDE”。

```
1 TEXTINCLUDE 
BEGIN
    "resource.h\0"
END

2 TEXTINCLUDE 
BEGIN
    "#include ""afxres.h""\r\n"
    "#include ""res/Pngs.h""\r\n"
    "#include ""res/PngsNag.h""\0"
END

3 TEXTINCLUDE 
BEGIN
    "#include ""afxres.rc""      // Standard components\r\n"
    "#include ""res/MyProject.rc2""\r\n"
    "#include ""res/Pngs.rc2""\r\n"
    "#include ""res/PngsNag.rc2""\0"
END

1 TEXTINCLUDE 
BEGIN
    "resource.h\0"
END

2 TEXTINCLUDE 
BEGIN
    "#include ""afxres.h""\r\n"
    "\0"
END

3 TEXTINCLUDE 
BEGIN
    "#define _AFX_NO_SPLITTER_RESOURCES\r\n"
    "#define _AFX_NO_OLE_RESOURCES\r\n"
    "#define _AFX_NO_TRACKER_RESOURCES\r\n"
    "#define _AFX_NO_PROPERTY_RESOURCES\r\n"
    "\r\n"
    "#if !defined(AFX_RESOURCE_DLL) || defined(AFX_TARG_ENU)\r\n"
    "#ifdef _WIN32\r\n"
    "LANGUAGE 9, 1\r\n"
    "#pragma code_page(1252)\r\n"
    "#endif //_WIN32\r\n"
    "#include ""res\\MyProject.rc2""  // non-Microsoft Visual C++ edited resources\r\n"
    "#include ""afxres.rc""         // Standard components\r\n"
    "#endif\r\n"
    "\0"
END 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-09T18:40:03.997

这是由 Visual Studio 中内置的图形资源编辑器生成的垃圾。它在运行时没有任何影响，它只是为编辑器保存状态。当您弄乱编辑器时，您将面临破坏编辑器的严重风险。如果您*从不*使用资源编辑器并始终使用文本编辑器管理资源，那也没关系。

[这篇MSDN 文章](https://msdn.microsoft.com/en-us/library/6t3612sk(v=vs.140).aspx)中有一些背景信息：

> 下面介绍 Visual C++ 如何在 .RC 文件中维护此信息。您不需要这些信息来使用 Visual C++，但它可以增强您的理解，以便您可以更自信地使用 Set Includes 功能。
> 
> 上述三种类型的 Set Includes 信息中的每一种都以两种形式存储在 .RC 文件中：(1) 作为 #include 或其他可由资源编译器解释的指令，以及 (2) 作为仅可由 Visual C++ 解释的特殊 TEXTINCLUDE 资源。
> 
> TEXTINCLUDE 资源的目的是在 Visual C++ 的 Set Includes 对话框中以易于呈现的形式安全地存储 Set Include 信息。TEXTINCLUDE 是 Visual C++ 定义的资源类型。Visual C++ 识别三个特定的 TEXTINCLUDE 资源，它们的资源标识号为 1、2 和 3：

```
TEXTINCLUDE resource ID     Type of Set Includes information
        1                   Symbol Header File
        2                   Read-Only Symbol Directives
        3                   Compile-Time Directives 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T17:41:39.520

只需要一组`TEXTINCLUDE`'。你只需要决定哪一套更适合你。

# eclipse - 在 Eclipse 中调试 Errai 应用程序的问题

> ID：11879196
> 
> 赞同：0
> 
> 时间：2012-08-09T08:09:07.587
> 
> 标签：eclipse, errai

在 Eclipse 中调试 Errai 应用程序时，出现以下错误。

```
 [WARN] failed com.google.gwt.dev.shell.jetty.JettyLauncher$WebAppContextWithReload@1575d48{/,/home/matthew/git/PressGangCCMSUI/src/main/webapp}: java.lang.ClassFormatError: Absent Code attribute in method that is not native or abstract in class file javax/faces/context/FacesContext
   [WARN] failed RequestLogHandler@ad4bb0: java.lang.ClassFormatError: Absent Code attribute in method that is not native or abstract in class file javax/faces/context/FacesContext
   [WARN] Error starting handlers
java.lang.ClassFormatError: Absent Code attribute in method that is not native or abstract in class file javax/faces/context/FacesContext 
```

有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T08:09:07.587

事实证明，问题是因为 Eclipse 使用本地 Maven 项目作为依赖项，而不是本地 repo 缓存中的 JAR 文件。一旦我关闭了我的 Errai 应用程序所依赖的项目，Eclipse 就会恢复使用本地 repo 缓存中的 JAR，我可以再次启动调试器。

# windows - XP中文件和打印机共享的注册表项

> ID：11879204
> 
> 赞同：-1
> 
> 时间：2012-08-09T08:09:43.640
> 
> 标签：windows, windows-xp, system-administration, server-administration

我想要 XP 操作系统存储文件和打印机共享的注册表项的位置。

谢谢你，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T15:13:45.690

看起来像是`HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\LanmanServer`隐藏共享的地方。
不幸的是，我只有 XP 在工作，我没有权限进一步研究

# python - python - 记录标准输出，但在每个条目上获得第二个空白行

> ID：11879206
> 
> 赞同：5
> 
> 时间：2012-08-09T08:09:46.290
> 
> 标签：python, logging, stdout, stderr

我在 Linux Ubuntu 12.04 系统上。我一直在使用此代码将所有 stdout 和 stderr + INFO 级别的附加日志记录到文件中。

```
class LogFile(object):
    def __init__(self, name=None):
        self.logger = logging.getLogger(name)

    def write(self, msg, level=logging.INFO):
        self.logger.log(level, msg)

    def flush(self):
        for handler in self.logger.handlers:
            handler.flush()

logging.basicConfig(level=logging.INFO, 
                    format='%(asctime)s %(name)-12s %(levelname)-8s %(message)s',
                    datefmt='%m-%d-%y %H:%M:%S',
                    filename='logging.log')
sys.stdout = LogFile('stdout')
sys.stderr = LogFile('stderr') 
```

出于某种原因，每当我得到一个条目时，它总是后跟一个空行，这是我的日志的一个小输出：

```
08-09-12 09:52:54 stdout       INFO     CheckCon: Checking Portal access.
08-09-12 09:52:54 stdout       INFO     

08-09-12 09:52:54 stdout       INFO     CheckCon: Portal ping successful.
08-09-12 09:52:54 stdout       INFO     

08-09-12 09:53:08 stderr       INFO     Bottle server starting up (using PasteServer())...

08-09-12 09:53:08 stderr       INFO     Listening on http://0.0.0.0:8654/

08-09-12 09:53:08 stderr       INFO     Hit Ctrl-C to quit.

08-09-12 09:53:08 stdout       INFO     URI: Generated https://*****
08-09-12 09:53:08 stdout       INFO     

08-09-12 09:53:08 stdout       INFO     CheckCon: Checking Portal access.
08-09-12 09:53:08 stdout       INFO     

08-09-12 09:53:08 stdout       INFO     serving on 0.0.0.0:8654 view at http://127.0.0.1:8654
08-09-12 09:53:08 stdout       INFO     

08-09-12 09:53:08 stdout       INFO     CheckCon: Google ping successful.
08-09-12 09:53:08 stdout       INFO 
```

这就是它在文件中的样子，有一个空的 stdout 行，然后是一个完整的空行。如果您注意到瓶子服务器的输出似乎没有空行，但每行之间仍然有一个空行。

任何人都知道是什么原因造成的，或者我该如何预防？

编辑：

根据我已将所有打印更改为 logging.info 的建议，我仍然遇到瓶和粘贴服务器正在执行常规打印的问题：\

所以我的日志现在修改了格式`format='%(asctime)s %(levelname)-4s: %(message)s'`：

```
08-09-12 12:44:40 INFO: URI: Generated https://****
08-09-12 12:44:40 INFO: CheckCon: Checking Portal access.
08-09-12 12:44:40 INFO: serving on 0.0.0.0:9002 view at http://127.0.0.1:9002
08-09-12 12:44:40 INFO: 

08-09-12 12:44:40 INFO: CheckCon: Google ping successful.
08-09-12 12:44:40 INFO: FullW: opening url: ****
08-09-12 12:44:40 INFO: FullW: showing.
08-09-12 12:44:40 INFO: LOOP: starting. 
```

据我所知，额外的空行也是因为空的信息行，所以现在越来越近了..

编辑以澄清输出：有趣的一点：

```
+++08-09-12 13:01:04 stdout       INFO     serving on 0.0.0.0:9002 view at     http://127.0.0.1:9002+++
+++08-09-12 13:01:04 stdout       INFO     
+++ 
```

最终编辑：

更改了我的写入以检查味精的长度是否低于 2 个字符，并且消除了空白行.. 仍然不能 100% 确定原因。

```
def write(self, msg, level=logging.INFO):
    if len(msg) < 2:
        pass
    else:
        self.logger.log(level, msg) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T08:25:13.253

这是由于`print`工作方式的原因。

我已经修改了您的示例，以便`print (level, msg)`在`write()`方法中有一个。

它向我展示了以下内容：

```
>>> x=LogFile("foo")
>>> print >>x, "123\n321\n444", "321", "222",
(20, '123\n321\n444')
(20, ' ')
(20, '321')
(20, ' ')
(20, '222')
>>> print >>x, "123\n321\n444", "321", "222"
(20, ' ')
(20, '123\n321\n444')
(20, ' ')
(20, '321')
(20, ' ')
(20, '222')
(20, '\n') 
```

如果每个呼叫都被转移到一个`logger`呼叫中，您将获得每个呼叫的条目。

为了解决这个问题，您可以实现一种仅需要`logger.log()`完整行和关闭时的缓冲。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T08:29:46.767

我能想到的是，由于您覆盖了 sys.stdout，因此写入日志记录行的实际命令将附加一个换行符：`sys.stdout.write("log text\n")`. 日志记录模块/方法本身会附加一个换行符，所以你会得到两个换行符。

但是，这应该只显示一个完全空行，而不是一个空行`<date> <name> <level>`。这可能是由`sys.stdout.write("\n")`其他地方的单个语句引起的。

我能想到的最简单的防止这种情况的方法是从 中删除换行符`msg`，并检查 message 是否为空。不是最漂亮的，但如果可行，则换行可能是原因，您可以从那里开始工作：

```
def write(self, msg, level=logging.INFO):
    msg = msg.rstrip("\n")
    if msg:
        self.logger.log(level, msg) 
```

# objective-c - 图像的 iOS 点击高亮部分

> ID：11879215
> 
> 赞同：0
> 
> 时间：2012-08-09T08:10:40.447
> 
> 标签：objective-c, ios, uiimage, uitapgesturerecognizer

我有一张图片，我想拥有它，所以当我点击图片的某个部分时，只有该部分会突出显示。目前为了测试这一点，我已经设置了一个应用程序并在背面放置了一个图像视图。我刚刚创建了一个图像并在上面写了 1,2,3 和 4。然后我使用 UIView 在图像中绘制水平和垂直线

我已经设置了一个点击手势监听器，它会打印出我点击了哪个部分。下面的代码

```
- (void)handleSingleTap:(UITapGestureRecognizer *)recognizer
{
    // Get the location of the touch
    CGPoint touchPoint = [recognizer locationOfTouch:0 inView:[self view]];

    if(touchPoint.x > 10 && touchPoint.x < 160)
    {

        if(touchPoint.y > 30 && touchPoint.y < 220)
        {
            NSLog(@"Button 1");

        }else if(touchPoint.y > 220 && touchPoint.y < 430){
            NSLog(@"Button 3");
        }

    }else if(touchPoint.x > 160 && touchPoint.x < 310)

    {
        if(touchPoint.y > 220 && touchPoint.y < 430)
        {
           NSLog(@"Button 4");
        }else if(touchPoint.y > 30 && touchPoint.y < 220){
            NSLog(@"Button 2");
        }

    }

   //For debugging
   // NSLog(@"x = %f y = %f", touchPoint.x, touchPoint.y);
} 
```

现在我想要发生的是，当我单击特定部分时，我只想突出显示图像的那一部分。这可能吗？目前我正在使用的解决方法是在网格顶部添加 4 个按钮，这些按钮在正常状态下是隐藏的，并为它们提供一个像这样突出显示状态的图像

```
[button setBackgroundImage:[UIImage imageNamed:@"highlightImage.png"] forState:UIControlStateHighlighted]; 
```

并将 alpha 设置为 0.5 或附近的某个值，因此看起来该部分正在突出显示。如果这是唯一可以做到的方法，那么只需留下一个答案，我会接受它，但如果有可用的解决方案，我更喜欢更具体的解决方案！提前致谢

创建的图像示例 ![在此处输入图像描述](../Images/c2cfad75bb1c71f7d47379a18fa922b6.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T08:15:46.500

看起来是正确的方法。

也许您应该在代码中使用较少的硬编码数字并在更通用的级别上实现此功能（例如，使用`frame`图像视图或按钮的属性）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T08:15:56.823

我相信，您可以免费获得这种行为，方法是向上提升层次结构并改用 UIControl。将其子类化并修改其突出显示行为。

# sql - 在 Oracle SQL 中显示表的所有约束的名称

> ID：11879217
> 
> 赞同：128
> 
> 时间：2012-08-09T08:10:44.083
> 
> 标签：sql, oracle, oracle11g, constraints

我为在 Oracle SQL 中创建的多个表的每个约束定义了一个名称。

问题是要删除特定表的列的约束，我需要知道我为每个约束提供的名称，我已经忘记了。

如何列出我为表的每一列指定的所有约束名称？

是否有任何 SQL 语句可以这样做？

* * *

## 回答 #1

> 赞同：179
> 
> 时间：2012-08-09T09:21:42.033

您需要查询[数据字典](http://docs.oracle.com/cd/B28359_01/server.111/b28318/datadict.htm)，特别是`USER_CONS_COLUMNS`查看表列和相应约束的视图：

```
SELECT *
  FROM user_cons_columns
 WHERE table_name = '<your table name>'; 
```

仅供参考，除非您专门使用小写名称（使用双引号）创建表，否则表名称将默认为大写，因此请确保在您的查询中如此。

如果您希望查看有关约束本身的更多信息，请查询`USER_CONSTRAINTS`视图：

```
SELECT *
  FROM user_constraints
 WHERE table_name = '<your table name>'
   AND constraint_name = '<your constraint name>'; 
```

如果表保存在不是您的默认架构的架构中，那么您可能需要将视图替换为：

```
all_cons_columns 
```

和

```
all_constraints 
```

添加到 where 子句：

```
 AND owner = '<schema owner of the table>' 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-08-09T08:15:48.263

```
SELECT * FROM USER_CONSTRAINTS 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2014-04-02T12:46:07.107

也许这可以帮助：

```
SELECT constraint_name, constraint_type, column_name
from user_constraints natural join user_cons_columns
where table_name = "my_table_name"; 
```

干杯

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2014-01-07T11:46:42.487

```
select constraint_name,constraint_type 
from user_constraints
where table_name = 'YOUR TABLE NAME'; 
```

注意：表名应该大写。

如果您不知道表的名称，

```
select constraint_name,constraint_type,table_name 
from user_constraints; 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2019-08-29T08:29:28.413

企业数据库通常有多个用户，而我并不喜欢正确的用户：

```
SELECT * FROM ALL_CONSTRAINTS WHERE table_name = 'YOUR TABLE NAME' ; 
```

从[Oracle 文档中挑选](https://docs.oracle.com/cd/B19306_01/server.102/b14237/statviews_1037.htm)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-10-02T22:13:48.370

使用以下两个命令之一。一切都必须大写。表名必须用引号引起来：

```
--SEE THE CONSTRAINTS ON A TABLE
SELECT COLUMN_NAME, CONSTRAINT_NAME FROM USER_CONS_COLUMNS WHERE TABLE_NAME = 'TBL_CUSTOMER';

--OR FOR LESS DETAIL
SELECT CONSTRAINT_NAME FROM USER_CONSTRAINTS WHERE TABLE_NAME = 'TBL_CUSTOMER'; 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2021-11-29T15:09:43.857

在 MySQL 中一个简单的方法是 -

```
SHOW INDEXES IN <table-name>; 
```

它显示了约束的键名

# asp.net - ASP.NET MVC 实体框架如何构造这段代码

> ID：11879219
> 
> 赞同：0
> 
> 时间：2012-08-09T08:10:47.030
> 
> 标签：asp.net, asp.net-mvc, entity-framework-4

我有几个结构：用户、项目、收藏项。

用户有很多项目，并且可以有很多 faourite 项目（仅链接到项目）。

我已经决定要么创建一个模型：“FavouriteItem”并为用户提供这些列表，或者将最喜欢的项目 ID 存储在用户表的列中。即 favourite_items：“1,2,5,9”。

如果用户群增长，后者似乎会快很多，但是我不得不拆分字符串、创建数组等，这有点痛苦。

在这里推荐的选择是什么？我已经完成了较早的选项，并且喜欢它的灵活性/易用性，但有点担心它的可扩展性。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T08:13:04.773

User、Item、UserItem 怎么样（链接表有一个 IsFavouriteItem 位字段。所以 UserId、ItemId、IsFavouriteItem 作为列）？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T08:16:11.083

最佳选择在某种程度上取决于您将在应用程序中体验到的查询模式。我将假设项目特定于用户，而不是在用户之间共享。根据您所说的，我会采用如下结构：

```
public class User
{
    public IList<Item> Items { get; set; }
    public IEnumerable<Item> FavoriteItems
    {
        get
        {
            return from i in Items where i.IsFavorite select i;
        }
    }
}

public class Item
{
    public bool IsFavorite { get; set; }
} 
```

如果每个用户的项目列表不是很大，即使您有很多用户和很多项目，这也会很好地工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T08:17:07.807

就速度而言，如果您希望表存储大量数据，则将其存储`FavouriteItems`在表中可能会更有效。`User`但是，如果您想要一个干净、结构化的数据库，那么我会引入一个`UserItems`带有`Favourite`列的外键表，例如

```
UserItems
---------        
UserId           
ItemId
Favourite 
```

如果您开始遇到瓶颈，您始终可以优化您的查询。

# opera - Opera中的边界错误内的边界半径

> ID：11879221
> 
> 赞同：1
> 
> 时间：2012-08-09T08:10:54.590
> 
> 标签：opera, css

我在显示具有顶部/底部边框和边框半径的块时遇到问题。不知道为什么边界内会出现内半径。请看下面的屏幕截图和代码。

[http://img703.imageshack.us/img703/3074/scrren1.jpg](http://img703.imageshack.us/img703/3074/scrren1.jpg)

```
<section id="block">
   <div class="block-header"><h1>Block</h1></div>
</section>
#block {width:1000px; height:329px; position:relative; border-radius:4px 4px 4px 4px; -webkit-border-radius:4px 4px 4px 4px;}  
#block .block-header { position:absolute; right:0px; top: 0; border-top:10px solid #81a32b; width:500px; border-radius:0px 4px 0px 0px; -webkit-border-radius:0px 4px 0px 0px; } 
```

你知道这个问题的任何解决方案吗？

[jsfiddle](http://jsfiddle.net/325nH/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T09:09:10.990

在 Opera 中，高度与您要达到的四舍五入直接相关

CSS

```
border-top:10px solid #81a32b; 
border-radius:0px 10px 0px 0px; 
```

小提琴-> [http://jsfiddle.net/325nH/2/](http://jsfiddle.net/325nH/2/)

您已声明：

```
border-top:10px solid #81a32b; 
border-radius:0px 4px 0px 0px; 
```

所以你是 6px 短，被 Opera 用空白填充

# java - 获取arraylist中的最后一个元素

> ID：11879228
> 
> 赞同：6
> 
> 时间：2012-08-09T08:11:28.357
> 
> 标签：java, random, arraylist

在下面的代码中，它只调用一个元素一次。当所有内容都被删除并且只剩下一个元素时，如何让它打印出“这是数组列表中的最后一个元素”。

```
ArrayList<String> Responselist = new ArrayList<String>();
Responselist.add(CommentResponse());
Responselist.add(TriviaResponse());
Responselist.add(CriticResponse());
String[] SelectRand = new String [3];

for (int i = 0; i < SelectRand.length; ++i)
{
    int rnd = (int) (Math.random() * Responselist.size());
    SelectRand[i] = Responselist.get(rnd);
    Responselist.remove(rnd);
}

for (String x : SelectRand)
{
    if (!(Responselist.isEmpty()))
    {
        System.out.println(x);
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-09T08:16:25.663

您可以控制数组列表的大小，id est

```
if (arraylist.size()==1){
    System.out.println("this is the last element in the arraylist");
} 
```

如果你想打印最后一个元素，你可以访问它（索引=0，如果它只是一个元素）

```
arraylist.get(arraylist.size()-1); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T08:17:36.980

您可以使用以下 if-construct 解决此问题

```
if(responseList.size() == 1)
{
System.out.println("this is the last element in the arraylist")
} 
```

您应该以小写字母开头变量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T08:16:12.600

我猜应该这样做：

```
if (list.size() == 1) {
  System.out.println(list.get(list.size() - 1)) // or just .get(0) of course...
} else {
  System.out.println("List is empty or bigger than one")
} 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-08-09T09:37:30.563

尝试并坚持 Java 中的约定

代替

```
ArrayList<String> Responselist = new ArrayList<String>(); 
```

然后编码到接口而不是具体类。

```
List<String> Responselist = new ArrayList<String>(); 
```

标准的java变量也是驼峰式的，所以它会是

```
List<String> responselist = new ArrayList<String>(); 
```

我认为其他答案足以回答您的原始查询。

# matlab - matlab中设置代理

> ID：11879230
> 
> 赞同：0
> 
> 时间：2012-08-09T08:11:38.933
> 
> 标签：matlab, proxy

我想在 matlab 中设置代理服务器设置。我知道我的代理配置 URL 已放入我的 mozilla firefox 的自动代理配置 URL（工作正常），但 Matlab 要求代理主机和端口。
我怎样才能找到那个？我只知道代理配置 URL。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T09:56:03.273

您无法像在 Firefox 中那样配置如此复杂的情况。

将浏览器指向配置 URL。它应该显示一些文本。选择“描述”您想要实现最佳连接的一行。通常在结尾处有一个声明`RETURN "PROXY ....";`- 这是*默认设置*，因此您很可能想要这个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-12-06T09:32:32.590

根据[这篇](https://nl.mathworks.com/matlabcentral/answers/99719-how-can-i-configure-my-proxy-server-settings-within-matlab)文章，在 MATLAB 中，您可以按如下方式设置代理：

```
1) Launch MATLAB
2) Select the "Home" tab
3) Select "Preferences"
4) Select "Web"
5) Check the box labeled "Use a proxy server to connect to the Internet"
6) Fill in your proxy information
7) If authentication is necessary, check the box labeled "Use a proxy with authentication" and fill in the appropriate information
8) Use the "Test connection" button to verify that the information entered was correct
NOTE: Only R2008b and newer has the ability to test the proxy connection and enter authentication information. 
```

# c# - 在 MediaPlayerLauncher 的媒体完成后恢复 spotify/radio - WP7

> ID：11879231
> 
> 赞同：3
> 
> 时间：2012-08-09T08:11:42.390
> 
> 标签：c#, windows-phone-7, media-player, radio, spotify

这个问题与我提出的另一个问题有关： [WP7 上的 MediaPlayerLauncher - 如何恢复以前播放的媒体？](https://stackoverflow.com/questions/11864557/mediaplayerlauncher-on-wp7-how-to-resume-previously-playing-media/11865530#11865530)

快速概览：用户可以在我的 WP7 应用中查看电影预告片，使用`MediaPlayerLauncher`.

当我的预告片完成后，我可以恢复“正常音乐”，就像你在我的另一个问题中看到的那样。但是，无论是广播还是 spotify-music 都不会恢复。在电影预告片完成后导航到 Spotify 应用程序时，正在播放的歌曲的暂停图标处于活动状态（例如，它看起来正在播放），但计时器已停止。点击暂停图标没有任何效果（它根本不会切换到播放图标）。要重新开始听，我必须选择一首不同的歌曲。

1.  在预告片完成或用户退出之后，我是否必须恢复广播/spotify-music，才能让我的应用在 Windows Phone Marketplace 中被接受？

2.  独立于＃1的答案是什么，如果可能的话，我想知道如何实现这一点

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T11:57:27.207

附加认证指南中的第 6.5 节（6.5.1 和 6.5.3）给出了答案： http: [//msdn.microsoft.com/en-us/library/windowsphone/develop/hh184838](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh184838(v=vs.92) (v=vs.92 )。

通常，如果音乐已经在播放（6.5.1），您必须明确要求播放媒体。但是，有一个例外适用于“非交互式全动态视频”（6.5.3），另外要求是，您必须在之后恢复音乐。

这里有几个链接可能有助于在视频播放后恢复原始音乐：[http ://www.governor.co.uk/news-plus-views/2011/2/16/resuming-background-music-in -wp7-applications](http://www.governor.co.uk/news-plus-views/2011/2/16/resuming-background-music-in-wp7-applications)和[http://gdwp7dev.wordpress.com/2010/10/19/resume-the-users-music-after-mediaplay/](http://gdwp7dev.wordpress.com/2010/10/19/resume-the-users-music-after-mediaplay/)

# php - 一个永远无效的表单 - Symfony2

> ID：11879241
> 
> 赞同：1
> 
> 时间：2012-08-09T08:12:21.367
> 
> 标签：php, symfony

我有一个类 Products 用于表单和数据库 - 它有 3 个日期字段与此或类似：

```
/**
 * @ORM\Column(name="`date`", type="date")
 * @Assert\NotBlank()
 * @Assert\Type("\Date")
 */ 
```

它还有3-4个其他字段，其中只有`NotBlank()`一个，一个没有任何约束，一个用于保存产品类别的字段（类别是数据库中的另一个类和表）。它看起来像这样：

```
/**
 * @ORM\ManyToOne(targetEntity="Categories")
 * @ORM\JoinColumn(name="categories_id", referencedColumnName="id")
 **/
private $categories; 
```

这是我的功能：

```
public function addAction($id, Request $request)
{
    $em = $this->getDoctrine()->getEntityManager(); 
    $products = new Products();
    $products_form = $this->createForm(new ProductsType(), $products);  
    $category = $em->getRepository('AcmeMyBundle:Categories')->find($id);

    if($request->getMethod() == 'POST')
    {
        $products_form->bindRequest($request);

        if($products_form->isValid()) 
        {
            $products->setDomains($category); 
            $em->persist($products);
            $em->flush();
        } 
```

最后它重定向。问题是，即使我在表单中添加正确的值，它也会说它是无效的。要添加日期，只需在表单中写入类似“2012-08-09”的字符串。

当我评论

```
if($products_form->isValid()) 
```

一切正常。

有什么建议么？请帮忙！

**编辑：**

这是产品类：

```
/**
 * @ORM\Entity
 * @ORM\Table(name="products")
 */
class Products
{
/**
 * @ORM\Id
 * @ORM\Column(type="integer")
 * @ORM\GeneratedValue(strategy="AUTO")
 */
protected $id;

/**
 * @ORM\ManyToOne(targetEntity="Categories")
 * @ORM\JoinColumn(name="categories_id", referencedColumnName="id")
 **/
private $categories;

/**
 * @ORM\Column(name="`date`", type="date")
 * @Assert\NotBlank()
 * @Assert\Type("\Date")
 */
protected $date;

/**
 * @ORM\Column(name="`from`", type="date")
 * @Assert\NotBlank()
 * @Assert\Type("\Date")   
 */
protected $from;

/**
 * @ORM\Column(name="`to`", type="date")
 * @Assert\NotBlank()
 * @Assert\Type("\Date")
 */
protected $to;

/**
 * @ORM\Column(type="decimal", scale=2)
 * @Assert\NotBlank()
 */
protected $price;

/**
 * @ORM\Column(type="string", length=5)
 * @Assert\NotBlank()
 */
protected $currency;

/**
 * @ORM\Column(type="string", length=50)
 * @Assert\NotBlank()
 */
protected $paymentid;

/**
 * @ORM\Column(type="string", length=100, nullable=true)
 */
protected $notes; 
```

在这里我创建了表单：

```
class ProductsType extends AbstractType
{
public function buildForm(FormBuilder $builder, array $options)
{
    $builder->add('date', 'date', array(
        'widget' => 'single_text', 
        'format' => 'yyyy-MM-dd'));

    $builder->add('from', 'date', array(
        'widget' => 'single_text', 
        'format' => 'yyyy-MM-dd'));

    $builder->add('to', 'date', array(
        'widget' => 'single_text', 
        'format' => 'yyyy-MM-dd'));

    $builder->add('price', 'text');

    $builder->add('currency', 'choice', array(
        'choices' => array(
            'empty_value'=>'--- Choose ---', 'USD'=>'USD', 'HKD'=>'HKD', 'EUR'=>'EUR', 'BGN'=>'BGN')));

    $builder->add('paymentid', 'text');

    $builder->add('notes', 'text', array(
        'required'  => false));
}

public function getName()
{
    return 'payments';
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T08:49:36.380

我认为在您的表格中，请确保存在 csrf 令牌。

在标签内的表单小部件下方添加以下代码。

```
{{ form_widget(form._token) }} 
```

希望这对您有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T08:15:44.080

不确定这是否是问题，但您有错字：

```
$productss_form->bindRequest($request); 
```

应该

```
$products_form->bindRequest($request); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T08:37:38.920

没有看到表单代码，我可以说：

*   那`@Assert\Type("\Date")`应该是`@Assert\Date`
*   确保在您的班级中设置了该`data_class`选项`ProductsType`

# eclipse - “忽略潜在匹配”的含义

> ID：11879247
> 
> 赞同：7
> 
> 时间：2012-08-09T08:12:56.847
> 
> 标签：eclipse, preferences

在*Window > Preferences > General > Search*下，有选项*Ignore potential matches*

它有什么作用？无论我是否激活它，我都看不出有什么不同。

它是只对 Java 开发有意义的选项吗（我从不这样做，但我确实使用 Eclipse 在 C、Python 和 PHP 中开发）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T08:32:10.500

有关示例，请参见[错误 127442](https://bugs.eclipse.org/bugs/show_bug.cgi?id=127442)：根据您搜索的内容（类、方法……），搜索引擎可以找到*可以*匹配的实例（但不能确定）。

这些实例被标记为“ **`POTENTIAL_MATCH`**”：

> 具有不同数量参数的方法不是潜在的匹配项。

（见[错误 97322](https://bugs.eclipse.org/bugs/show_bug.cgi?id=97322)）

> **潜在匹配是解析失败的匹配**（例如，方法绑定为空）。
> 如果用户搜索“ `foo(String)`”（没有限定`String`），那么“ `foo(java.lang.String)`”和“ `foo(p.String)`”都是完全匹配的。
> 
> 对于`.class`文件案例，我认为我们只能在缺少类型案例的情况下进行潜在匹配（请参阅[错误 196200](https://bugs.eclipse.org/bugs/show_bug.cgi?id=196200)），即如果 .class 文件已编译并且它引用的某些类型丢失了。

* * *

[在错误 382778](https://bugs.eclipse.org/bugs/show_bug.cgi?format=multiple&id=382778)中发现了一个当前的潜在匹配不当行为示例：

> 我有一个公共静态无效方法`printIt(String name)`。
> 当我打开它的调用层次结构时，一些调用者丢失了。
> 
> 我猜调用者丢失了，因为 java 搜索将它们标记为潜在而不是完全匹配的`printIt(String)`参考。
> 以下代码*有时被*标记为潜在的，*有时*被标记为准确的：

```
// Listing 1
PublicInterface2 impl2 = new Impl2("Name Broken");
Static.printIt(impl2.getName()); 
```

> 当搜索结果被标记为潜在时，调用者会从`printIt()`调用层次结构中丢失。

```
PublicInterface2 is an empty public interface which extends PackageInterface2Getters.
PackageInterface2Getters is an empty default-scoped interface which extends PackageInterface1Getters.
PackageInterface1Getters is a default-scoped interface which declares String getName(). 
```

> 所以`impl2.getName()`上面返回一个`String`.
> 
> 报告了一些问题，我猜这些问题会使匹配被标记为潜在：

```
...
Filename : \D:\workspace\eclipse\_runtimes\jdt\call-hierarchy-bug\src\main\PublicInterface2.java
COMPILED type(s)    
2 PROBLEM(s) detected 
     - Pb(2) PackageInterface1Getters cannot be resolved to a type
     - Pb(327) The hierarchy of the type PublicInterface2 is inconsistent 
```

结果是：

> The compiler asks the "`NameEnvironment`" to get the type information of any dependent type.
> Search has it's own `NameEnvironment` implementation in `JavaSearchNameEnvironment` and it is not looking for secondary types.
> This is bad and it is surprising that we haven't run into this problem until now.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-26T22:46:54.043

In Eclipse Luna (Service Release 1 (4.4.1)) I searched just for references to this Java method:

```
merge(DashboardConfigurationModel template, DashboardModel custom) 
```

It returns two references. One of these calls to the `merge()` method passes in a `DashboardConfigurationModel` and a `DashboardModel`, as befits the method signature. This is a match all right!

The other reference to a `merge()` method passes in a `String` and a `Map`. It is marked in Eclipse as a "potential match" but in my mind, since the argument types don't match, this has zero potential to be a match.

I then checked *Ignore potential matches*, did the search again, and this noise went away.

# iis - powershell Get-ChildItem iis:\sites | Export_CliXml sites.xml 不会产生与字符串输出相同的结果

> ID：11879252
> 
> 赞同：0
> 
> 时间：2012-08-09T08:13:10.137
> 
> 标签：iis, powershell, get-childitem

短的：

```
Get-ChildItem IIS:\Sites
Get-ChildItem IIS:\Sites | Get-CliXml sites.xml 
```

以字符串形式返回一件事，以 xml 形式返回另一件事。为什么？

* * *

更长：
当我跑步时

```
Get-ChildItem IIS:\Sites 
```

我得到了一些东西

```
Name             ID    State    Phys...
Default Web Site 1     Started  C:\i...
MyTestSite       2     Started  C:\i... 
```

但是当我像这样将它通过管道传输到 Export-CliXml 时：

```
Get-ChildItem IIS:\Sites | Get-CliXml sites.xml 
```

我对其中的“默认网站”或“MyTestSite”一无所知。=> 字符串和 xml 没有任何共同之处。

当我对 Get-Process 做同样的事情时

```
Get-Process | Export-CliXml processes.xml 
```

我可以在输出文件中找到我的进程。=> 字符串中的内容可以在 xml 中找到。

为什么 Get-Process 输出与文本和 xml 大致相同，
而 Get-ChildItems IIS:\Sites 一个文本和其他内容作为 xml？
我误解了什么？

我想一个问题可能是我从 Get-ChildItem iis:\sites 得到一个异常，但仍然生成输出。xml输出似乎也不错。

* * *

更新：
当我这样做时

```
Get-ChildItem IIS:\Sites | select Name,ID,State,PhysicalPath | Get-CliXml sites.xml 
```

我得到了我正在寻找的价值观。

当我添加绑定时

```
Get-ChildItem IIS:\Sites | select Name,ID,State,PhysicalPath,Bindings | Get-CliXml sites.xml 
```

只有 2 个站点被迭代，我收到一条错误消息。xml无论如何都很好。（我相信代码中有一些构造良好的try-catch）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T12:52:13.890

有人可以确认或否认

```
get-childitem iis:\sites 
```

返回一个包含很多对象（不是字符串和整数）的对象，
并且当它被传送到

```
export-clixml 
```

该代码将对每个属性执行 ToString 并为它们返回类型名称。

如果是上述情况（可能是），解决方案是

```
Get-ChildItem IIS:\Sites | select Name,ID,State,PhysicalPath | Get-CliXml sites.xml 
```

但不适用于像 Binding 这样的复杂属性。

# networking - 创建主服务器 - 端口转发问题

> ID：11879256
> 
> 赞同：0
> 
> 时间：2012-08-09T08:13:28.950
> 
> 标签：networking, webserver, router, portforwarding, dyndns

因此，我正在尝试设置可从 Internet 访问的家庭服务器。我已经在 ASP 中创建了我的网站并配置了我的 IIS。它在我的本地计算机上运行良好，本地网络上的其他计算机可以访问它。我想让它在线，以便可以从其他地方访问它。我在 DynDns 上创建了一个帐户，并将其配置为将请求重定向到我的 Internet IP。然后，我将路由器配置为将端口 80 上的所有传入请求转发到我的本地 IP 地址，我的网站在该地址上运行。但是，当我转到我的 DynDns 地址时，它会将我重定向到路由器的主页。我已经禁用了我的防火墙（我知道，这不是一个好主意，它只是为了测试目的）但仍然没有成功。有谁知道可能出了什么问题？如果有帮助，我有一个 SMCWBR14S-N4。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T08:18:32.727

我听说有些路由器为那里的配置页面保留了端口 80。我认为那里的一般工作是在 8080 等非标准端口上运行您的网络服务器，但我对此没有很多经验，所以它可能完全是另外一回事。:)

更新：对于任何未来的读者，请始终记住在服务器所在网络之外的计算机上测试您的外部地址和端口转发。

# c# - 双倍的蒙面文本框？

> ID：11879257
> 
> 赞同：3
> 
> 时间：2012-08-09T08:13:39.103
> 
> 标签：c#, winforms, maskedtextbox

我有一个蒙面文本框，我希望它能够接受双精度值。小数点之前/之后可以容纳的字符数量不应该有任何种类的限制。

我意识到还有其他方法可以做到这一点，例如覆盖键输入事件或使用数字向上向下，但我只是问是否可以使用掩码。

我试过 9999999999.99999999 - 但它给了我很多问题 - 例如：

1 2 3 4 。6 被接受为输入（包括空格），我无法删除 . 我想要的任何地方。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-01-05T02:52:49.690

这是一个简单的解决方案。没有必要戴口罩。通常，掩码并不是所有应用程序的答案。我写了最初的解决方案。如果你想要它，你可以把它和面具结合起来。

```
Public Class Form1
Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
    AddHandlerTextBoxDouble(TextBox1)
End Sub

Public Sub AddHandlerTextBoxDouble(ByVal TextBoxMe As Object)
    Dim TextBox As New TextBox
    TextBox = CType(TextBoxMe, TextBox)
    AddHandler TextBox.KeyPress, AddressOf TextBox_KeyPress
    AddHandler TextBox.TextChanged, AddressOf TextBox_TextChanged
End Sub

Private Sub TextBox_KeyPress(ByVal sender As Object, ByVal e As System.Windows.Forms.KeyPressEventArgs)
    ValidatingNumber(e, sender)
End Sub

Public Sub TextBox_TextChanged(ByVal sender As Object, ByVal e As System.EventArgs)
    Dim TextBox As New TextBox
    TextBox = CType(sender, TextBox)
    If Not IsNumeric(TextBox.Text) And TextBox.Text <> "." Then
        TextBox.Text = ""
    End If
End Sub

Public Sub ValidatingNumber(ByVal e As Object, ByVal control As Object)
    Try
        If CType(control, TextBox).Text.IndexOf(".") > -1 And e.KeyChar = "." Then
            e.KeyChar = ""
        End If
        If (Asc(e.KeyChar) < 58 And Asc(e.KeyChar) > 47) Or e.KeyChar = vbBack Or e.KeyChar = "." Then
            e.KeyChar = e.KeyChar
        Else
            e.KeyChar = ""
            Try
                CType(e, System.Windows.Forms.KeyPressEventArgs).Handled = True
            Catch ex As Exception
            End Try
        End If
    Catch ex As Exception
        MsgBox("ValidatingNumber")
    End Try

End Sub

End Class 
```

# php - 在所有操作完成工作后出现错误 [nusoap,wsdl,php]

> ID：11879260
> 
> 赞同：1
> 
> 时间：2012-08-09T08:14:13.530
> 
> 标签：php, asp.net, wsdl, nusoap

当我的用户从 asp.net 与我连接 nusaop 和 wsdl 时，他们可以完成操作，但最终在所有工作成功完成后，他们会收到此错误：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/"
xmlns:xsd="http://www.w3.org/2001/XMLSchema"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
xmlns:SOAP-ENC="http://schemas.xmlsoap.org/soap/encoding/">
  <SOAP-ENV:Body>
    <ns1:enqueueResponse xmlns:ns1="http://localhost/enqueue/index.php">
      <return xsi:type="xsd:string">20</return>
    </ns1:enqueueResponse>
  </SOAP-ENV:Body>
</SOAP-ENV:Envelope>
--. 
```

# php - 一次生成多个优惠券代码；用逗号分隔

> ID：11879261
> 
> 赞同：-1
> 
> 时间：2012-08-09T08:14:19.090
> 
> 标签：php, random

我发现这篇[Stack Overflow 帖子](https://stackoverflow.com/questions/3521621/php-code-for-generating-decent-looking-coupon-codes-mix-of-alphabets-and-number)解释了如何生成随机优惠券代码。

我正在研究使用该代码并一次生成多张优惠券（例如 50 张），同时用逗号分隔它们。

输出将是：COUPON-HMECN、COUPON-UYSNC 等。

下面的代码和[可用的键盘示例](http://codepad.org/rcrucYyi)。

```
 $chars = "0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ";
      $res = "COUPON-";

      for ($i = 0; $i < 5; $i++) {
          $res .= $chars[mt_rand(0, strlen($chars)-1)];     
      }

      echo $res . ","; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T08:18:48.307

```
$chars = "0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ";
$numCodesToGenerate = 5;

for ($n = 0; $n < $numCodesToGenerate; $n++)
{
    $res = "COUPON-";

    for ($i = 0; $i < 5; $i++) {
      $res .= $chars[mt_rand(0, strlen($chars)-1)];     
    }

    echo $res . ","; 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T08:23:32.440

这是一个更简洁（更快）的版本，可以满足您的需要：

```
function MakeCouponCode() {
  $res = "COUPON-";
  for($i = 0; $i < 5; ++$i)
    $res .= chr(mt_rand(0, 1) == 0 ? mt_rand(65, 90) : mt_rand(48, 57));
  return $res;
}

$coupons = array();
for($i = 0; $i < 5; ++$i)
  $coupons[] = MakeCouponCode();

echo implode(', ', $coupons); 
```

输出：

```
COUPON-D707Y, COUPON-4B37E, COUPON-3O397, COUPON-M799X, COUPON-24Q36 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T08:26:08.813

为什么不使用[uniqid()](http://php.net/manual/en/function.uniqid.php)？

```
$coupon_str = '';
$seperator = '';

for($i = 0; $i < 50; $i++) {
    $coupon_str .= $seperator . uniqid('COUPON-');

    $seperator = ',';
}

echo $coupon_str; 
```

输出：

```
COUPON-502373ac95dd2,COUPON-502373ac95de8,COUPON-502373ac95ded,.... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-27T07:34:28.523

您可以使用优惠券代码生成器 PHP 类文件来生成 N 数量的优惠券及其可定制的，具有添加自己的前缀和后缀的自己的掩码的各种选项。优惠券代码以逗号分隔。[简单的 PHP 优惠券代码生成器](https://github.com/joashp/simple-php-coupon-code-generator)

例子： `coupon::generate(8); // J5BST6NQ`

# knockout-mapping-plugin - 取消映射视图模型（ko.mapping.toJSON），第一项仅存在

> ID：11879262
> 
> 赞同：1
> 
> 时间：2012-08-09T08:14:24.177
> 
> 标签：knockout-mapping-plugin

我正在传递以下 C# AjaxViewModel 模型：

```
namespace Db.ViewModels
{
    public class DbAjaxViewModel
    {
        public DbAjaxViewModel() {
            Products = new List<DbProductViewModel>();
        }

        public List<DbProductViewModel> Products { get; set; }
    }

    public class DbProductViewModel
    {
        public string Id { get; set; }
        public string Name { get; set; }
        public string Description { get; set; }
        public string Price { get; set; }
        public string CategoryId { get; set; }
    }
} 
```

..使用以下代码：

```
[HttpGet]
public ActionResult GetProductsAjax() {
    var viewModel = _service.GetAllProductsAjaxViewModel();

    return new JsonResult { Data = viewModel, JsonRequestBehavior = JsonRequestBehavior.AllowGet };
} 
```

然后我做ko映射：

```
function callBack(result) {
    sprAdmin.product.viewModel = ko.mapping.fromJS(result);
    ko.applyBindings(sprAdmin.product.viewModel, $("adminProductWrap")[0]);
}

$.ajax({
    type: "GET",
    url: url,
    success: callBack
}); 
```

而且效果很好。我有这个函数可以向我的 viewModel 添加一个空项目：

```
addProduct: function () {
    function product() {
        this.Id = ko.observable("-1");
        this.CategoryId = ko.observable("0");
        this.Name = ko.observable("");
        this.Description = ko.observable("");
        this.Price = ko.observable("0");
    }

    debug.debug("adding new product");
    sprAdmin.product.viewModel.Products.push(new product());

    var debugArray = sprAdmin.product.viewModel.Products(),
        debugData = debugArray[debugArray.length - 1];

    debug.debug("id: " + debugData.Id() + ", name: " + debugData.Name() + ", description: " + debugData.Description() + ", price: " + debugData.Price() + ", categoryId: " + debugData.CategoryId());
} 
```

如您所见，debug.debug 检索 Products() 数组的最后一项并显示其内容，这也很有效。

但。

当我将**多个**项目添加到一个空数组并执行 var data = ko.mapping.toJSON(viewModel); debug.debug("ajax 提交数据：" + data);

它显示了转换为 JSON 的未映射 viewModel 的内容，如下所示：

```
{"Products":[{"Id":"1","CategoryId":"0","Name":"name","Description":"desc","Price":"0"},{}]} 
```

Products 数组的第二项（如果存在，则更进一步）绝对为空。它始终仅适用于第一项。

请帮忙。

===

解决方案：

首先有必要声明一个 observableArray：

```
viewModel: {
    Products: ko.observableArray([])
} 
```

然后像这样映射：

```
sprAdmin.product.viewModel.Products(ko.mapping.fromJS(result.Products)()); 
```

# python - 如何将复数从 python numpy 传递给 c（目前正在尝试使用 SWIG）

> ID：11879268
> 
> 赞同：3
> 
> 时间：2012-08-09T08:15:23.737
> 
> 标签：python, c, numpy, swig

我想用复杂的编号输入和python调用c编写的函数。我尝试使用 SWIG 生成包装器 - 但它似乎失败了。我认为我需要制定在 numpy.i 中使用的正确“宏” - 但不确定它是什么 - 任何人都有这方面的经验 - 或者我可以通过其他方式解决这个问题？

numpy.i 在底部显示了这一点 - 尽管它已被注释掉。我尝试使用这些宏 - 但它们失败了，SWIG 抱怨我尝试的以下宏扩展的语法错误：

```
%numpy_typemaps(complex float, NPY_CFLOAT , int)
%numpy_typemaps(complex double, NPY_CDOUBLE, int)
%numpy_typemaps(complex long double, NPY_CLONGDOUBLE, int) 
```

这些是我的文件：

复数.c

```
# include <math.h>
# include <complex.h>

double complex returnX(double complex X) 
/*
    fresnel reflection coefficient rs
*/
{
    return X;
} 
```

复数.i：

```
%{
#define SWIG_FILE_WITH_INIT
%}
%include "numpy.i"
%init %{
import_array();
%}

%module ComplexNumbers

%inline %{
extern double complex returnX(double complex X);
%} 
```

Python：

```
#!/usr/bin/env python

"""
setup.py file for ComplexNumbers
"""

from distutils.core import setup
from distutils.extension import Extension

import numpy

ComplexNumbers_module = Extension('_ComplexNumbers',
                           sources=['ComplexNumbers_wrap.c', 
                                    'ComplexNumbers.c'],
                           include_dirs=[numpy.get_include()]
                           )

setup (name = 'ComplexNumbers',
       version = '1.0',
       author      = "JP Hadden jp.hadden@bristol.ac.uk",
       description = """Spectral Interfereometry functions""",
       ext_modules = [ComplexNumbers_module],
       py_modules = ["ComplexNumbers"],
       ) 
```

编译器的错误输出

```
C:\MinGW32-xy\bin\gcc.exe -mno-cygwin -mdll -O -Wall -IC:\Python27\lib\site-pack
ages\numpy\core\include -IC:\Python27\include -IC:\Python27\PC -c ComplexNumbers
_wrap.c -o build\temp.win32-2.7\Release\complexnumbers_wrap.o
ComplexNumbers_wrap.c:2975:23: error: expected '=', ',', ';', 'asm' or '__attrib
ute__' before 'returnX'
ComplexNumbers_wrap.c: In function '_wrap_returnX':
ComplexNumbers_wrap.c:2982:18: error: expected '=', ',', ';', 'asm' or '__attrib
ute__' before 'arg1'
ComplexNumbers_wrap.c:2982:18: error: 'arg1' undeclared (first use in this funct
ion)
ComplexNumbers_wrap.c:2982:18: note: each undeclared identifier is reported only
 once for each function it appears in
ComplexNumbers_wrap.c:2986:18: error: expected '=', ',', ';', 'asm' or '__attrib
ute__' before 'result'
ComplexNumbers_wrap.c:2986:18: error: 'result' undeclared (first use in this fun
ction)
ComplexNumbers_wrap.c:2997:24: error: expected ')' before 'complex'
ComplexNumbers_wrap.c:2997:24: error: pointer value used where a floating point
value was expected
ComplexNumbers_wrap.c:2997:14: error: invalid type argument of unary '*' (have '
double')
ComplexNumbers_wrap.c:3000:20: error: expected ')' before 'complex'
ComplexNumbers_wrap.c:3000:20: warning: implicit declaration of function 'return
X'
ComplexNumbers_wrap.c:3001:15: error: expected ')' before 'complex'
ComplexNumbers_wrap.c:3001:15: error: expected ')' before 'complex'
ComplexNumbers_wrap.c:3001:15: error: expected ')' before 'complex'
ComplexNumbers_wrap.c:3001:15: error: pointer value used where a floating point
value was expected
ComplexNumbers_wrap.c:3001:15: error: expected ')' before 'complex'
ComplexNumbers_wrap.c:3001:15: error: incompatible type for argument 1 of 'memcp
y'
c:\mingw32-xy\bin\../lib/gcc/mingw32/4.5.2/../../../../include/string.h:38:40: n
ote: expected 'void *' but argument is of type 'double'
error: command 'gcc' failed with exit status 1 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T09:43:46.223

我不确定这如何与 Numpy 交互，但 SWIG 肯定包括对 C99 复杂类型的支持。我可以通过以下示例验证这一点：

```
%module test
%{
#include <complex.h>
%}

%include <complex.i>

%inline %{
  double complex test(double complex X) {
    return X;
  }
%} 
```

这使用 SWIG complex.i 接口。

（请注意，这里`%inline`用于在一个地方声明、定义和包装所有内容 - 便于测试，但对于我倾向于使用的“真实”代码`%include`）。

我编译了这个（在Linux上）：

```
swig -Wall -python test.i 
gcc -std=c99 -Wall -Wextra test_wrap.c -I/usr/include/python2.7 -shared -o _test.so 
```

只有一个警告就可以很好地构建。一旦完成，我就可以这样做：

```
LD_LIBRARY_PATH=.  python                       
Python 2.7.3 (default, Aug  1 2012, 05:16:07) 
[GCC 4.6.3] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> import test
>>> test.test(complex(0,1))
1j
>>> test.test(complex(0,2))
2j
>>> test.test(complex(1,2))
(1+2j)
>>> 
```

这似乎是接受并返回本机 Python 复杂类型。

我还能够编译以下界面：

```
%{
#define SWIG_FILE_WITH_INIT
#include <complex.h>
%}
%include <complex.i>
%include <numpy.i>
%init %{
import_array();
%}

%numpy_typemaps(complex float, NPY_CFLOAT , int)
%numpy_typemaps(complex double, NPY_CDOUBLE, int)
%numpy_typemaps(complex long double, NPY_CLONGDOUBLE, int)

%module test

%inline %{
  double complex test(double complex X) {
    return X;
  }
%} 
```

添加`%include <complex.i>`和`-std=c99`添加到编译器标志。我认为您可以使用[这些选项](http://docs.python.org/install/#tweaking-compiler-linker-flags)让 distutils 为您设置。

# c# - 为活动创建课程？

> ID：11879269
> 
> 赞同：0
> 
> 时间：2012-08-09T08:15:31.030
> 
> 标签：c#, events

我正在尝试了解事件，并且我的任务是创建从 EventArgs 派生的 EventArgs 信息类。我不确定这意味着什么以及我应该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T08:22:44.697

事件参数用于传递有关已触发事件的附加信息，例如已更改的值或项目的 ID。事件处理程序的签名包含 a`sender`和`EventArgs`。

由于`EventArgs`非常空，您通常实现自己的类：

```
public event EventHandler<FooEventArgs> Foo; // produces handler(object sender, FooEventArgs e)

public sealed class FooEventArgs : EventArgs
{
    public FooEventArgs(int bar)
    {
        this.Bar = bar;
    }

    public int Bar { get; private set; }
} 
```

这只是一个普通的子类，就像您在其他任何地方创建的一样。如果您不需要传递更多信息，请使用`EventArgs.Empty`（静态字段）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T08:19:18.470

尝试这个

```
public class EventArgsInfo : EventArgs
{
  public string MyCustomProperty { get;set; }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T08:20:52.987

`EventArgs`表示带有给事件的参数的类型（因此得名）。

标准 EventArgs 类型包含最少的信息（甚至可能没有）。最佳实践是创建您自己的继承（对于您创建的每个自定义事件）并根据您对特定事件的需要扩展参数。

有关详细信息，请查看有关 EventArgs 类的[MSDN 文档。](http://msdn.microsoft.com/en-us/library/system.eventargs.aspx)它包含一个很好的示例，说明如何`EventArgs`创建和使用自定义类。

# android - 使用 Intent android 在类中执行自定义方法

> ID：11879270
> 
> 赞同：0
> 
> 时间：2012-08-09T08:15:37.993
> 
> 标签：android, service, android-intent, callback

我想在一个可以在 Intent 中传递的类中调用自定义方法。在 Intent 的接收方，我想调用该类的自定义方法。假设我有一个类扩展了 ResultReceiver 这两个方法

```
class MyClass extends ResultReceiver {

    public doBefore(){ //custom method
        Log.d("sdf","before");
    }

    public doAfter(){  // custom method
        Log.d("sdf","After");
    }

    @Override
    public void onReceiveResult(final int resultCode,   final Bundle resultData) {

    }
} 
```

我想将 Intent 中的 MyClass 传递给另一个 Activity 或 Service。所以假设我将 MyClass 传递给服务

```
MyClass mcl = new MyClass()
final Intent intent = new Intent(mContext, MyService.class);
intent.putExtra(INTENT_EXTRA_RECEIVER, mcl); 
```

在 MyService 类中，我在 onHandleIntent() 方法中获得了意图。

MyService 类中的方法

```
@Override
protected void onHandleIntent(Intent intent) {
    MyClass eval = (MyClass) intent.getParcelableExtra(INTENT_EXTRA_RECEIVER);
    eval.doBefore(); // Is this possible??
    eval.doAfter(); 
    sendSuccess(intent, null);
} 
```

现在我想在“MyClass”类中执行这两个方法。最后调用“MyClass”中的 onReceiveResult() 但我无法调用我的自定义方法。我不想开始活动或服务。我想执行我的自定义方法。

无论如何我可以从服务或活动中调用我的自定义方法，比如 ResultReceiver 的 onReceiveResult()。？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T08:26:28.053

我不确定我是否正确理解了您的问题，因为您尝试通过意图调用进行访问似乎令人困惑。难道不能像下面这样简单地做吗？

```
mcl.doBefore(); 
```

# sql - 子查询之间的 SQL

> ID：11879272
> 
> 赞同：4
> 
> 时间：2012-08-09T08:15:39.723
> 
> 标签：sql, subquery

我想知道如何运行一个返回事件的 SQL 查询，该事件的时间在有效段中。

例如，我有两张桌子，

**事件**

```
event_id event_time
0        134
1        434
2        4300 
```

**分割**

```
segment_type segment_start_time segment_end_time
data1         100                130
data1         200                500
data1         700                8000
veto1         400                440
data2         150                450
data2         4000               5000
veto2         175                200 
```

我想要一个可以返回的查询

```
event_id event_time
1        434
2        4300 
```

我在想类似的东西

```
SELECT * 
FROM event
WHERE 
    event.event_time > (SELECT segment.segment_start_time FROM segment)
    AND 
    event.event_time < (SELECT segment.segment_end_time FROM segment) 
```

但这只是什么都不返回。我究竟做错了什么？

我想做的下一步是找到事件时间；

在“数据”段开始时间和结束时间之间，而不是在“否决”段开始时间和结束时间之间

最后，我实际上有两种类型的数据段和否决段。我想返回有时间的事件；

在“data1”段开始时间和结束时间之间和

在“data2”段开始时间和结束时间之间和

不在“veto1”段开始时间和结束时间之间，并且

不在“veto2”段开始时间和结束时间之间

所以从我上面的示例表中，我想要的输出是

```
event_id event_time
2        4300 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-09T08:23:35.980

我将假设您通常在事件表中的条目比在段表中的条目更多。

这允许伪代码“对于每个段，检查哪些事件是有效的”。这允许在事件表上进行范围搜索。

```
SELECT
  event.event_id, event.event_time
FROM
  segment
INNER JOIN
  event
    ON  event.event_time >= segment.segment_start_time
    AND event.event_time <  segment.segment_end_time
GROUP BY
  event.event_id, event.event_time 
```

只有当不同的条目可以重叠`GROUP BY`时才需要。`segment`

另一种方法是使用伪代码“对于每个事件，检查是否有任何片段与其重叠”。

但是，这样做将不允许范围搜索*（请参阅我对@MarkByers 回答的评论）*。

**编辑**以下编辑问题...

据我了解这些更改，只有在以下情况下才应返回事件...

*   事件时间*至少在*（一个 data1 段和一个 data2 段）内
*   事件时间不在（任何 veto1 段或任何 veto2 段）

```
SELECT
  event.event_id, event.event_time
FROM
  segment
INNER JOIN
  event
    ON  event.event_time >= segment.segment_start_time
    AND event.event_time <  segment.segment_end_time
GROUP BY
  event.event_id, event.event_time
HAVING
      0 = SUM(CASE WHEN segment_type = 'veto1' THEN 1 ELSE 0 END)
  AND 0 = SUM(CASE WHEN segment_type = 'veto2' THEN 1 ELSE 0 END)
  AND 1 = SUM(CASE WHEN segment_type = 'data1' THEN 1 ELSE 0 END)
  AND 1 = SUM(CASE WHEN segment_type = 'data2' THEN 1 ELSE 0 END) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T08:18:33.790

使用`WHERE EXISTS`或加入。

```
SELECT event_id, event_time
FROM event
WHERE EXISTS
(
   SELECT *
   FROM segment
   WHERE event.event_time BETWEEN segment_start_time AND segment_end_time
) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T08:58:47.163

如果段不重叠，您也可以使用它（如果您的 DBMS 已实现语法，则使用`TOP` 或或任何专有语法）：`LIMIT``OFFSET / FETCH`

```
SELECT
    event_id, event_time
FROM
    event AS e
WHERE 
    event_time <
    ( SELECT 
          s.segment_end_time
      FROM 
          segment AS s
      WHERE
          s.segment_start_time <= e.event_time
      ORDER BY 
          s.segment_start_time DESC
        OFFSET 1 ROWS
        FETCH NEXT 1 ROWS ONLY
    ) ; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T14:00:28.197

我认为这是我正在寻找的查询，但我不是 100% 确定。

```
SELECT *
FROM event
WHERE EXISTS
(
   SELECT *
   FROM segment
   WHERE (event.time BETWEEN segment.start_time AND segment.end_time
                     AND segment.type IN ("data1", "data2"))
) AND EXISTS
(
   SELECT *
   FROM segment
   WHERE (event.time NOT BETWEEN segment.start_time AND segment.end_time 
                     AND segment.type ("veto1", "veto2"))
) 
```

# vb.net - 网页浏览器控制页面加载或刷新

> ID：11879276
> 
> 赞同：0
> 
> 时间：2012-08-09T08:15:45.977
> 
> 标签：vb.net, webbrowser-control

我的 Vb.net winform 上有一个 WebBrowser 控件。现在我需要找到一种方法来检测页面是否重新加载或刷新。

类似于`WebBrowser1_DocumentCompleted`。

**示例：** `WebBrowser1_DocumentOnLoad` ,**或** `WebBrowser1_DocumentOnRefreshed`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T08:21:14.163

```
dim wb as new webbrowser
wb.navigate(url)
do while wb.ReadyState <>  WebBrowserReadyState.Complete
application.doevents()
loop

wb.refresh()

do while wb.ReadyState <>  WebBrowserReadyState.Complete
application.doevents()
loop

msgbox("refreshed") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T13:14:41.203

您需要拦截 BeforeNavigate2 事件，如果它指向与 WB 控件中当前加载的完全相同的 URL（BN2 事件提供 URL 参数供您读取和测试，以及您的 WB.LocationURL 或 WB.Document .URL 可以告诉您 WB 控件的当前 URL，以便您与之进行比较。

因此，当您拦截 BeforeNavigate2 事件时，您可以在那里进行比较，也可以在 DocumentComplete 期间进行比较，无论您喜欢什么。不幸的是（我知道）没有 OnRefresh 事件，所以试试我的方法，让我知道你是如何相处的，如果你需要任何进一步的帮助。

干杯。

# magento-1.4 - Magento - 不发送任何电子邮件

> ID：11879283
> 
> 赞同：0
> 
> 时间：2012-08-09T08:16:11.353
> 
> 标签：magento-1.4, magento-1.5, magento-1.6, magento

我在发送邮件时遇到问题：magento 不发送任何邮件，我正在尝试使用 sendfriend 功能（我已经扩展了该 Sendfriend 模块的 ProductController），但问题在于任何电子邮件（我试过进行注册或更改密码，但未发送电子邮件）。后端设置似乎没问题：

```
System->Configuration->system->Mail sending settings->disable Email Communications->No;

System->Configuration->system->Mail sending settings->Host ->locahost; 
```

在另一个本地 magento 安装上使用相同的设置，系统可以正确发送电子邮件。我可以检查什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T10:54:41.660

你不需要做任何编码的事情。它已经在 Magento 中可用。您只需要从后端启用**电子邮件给朋友的选项。**希望这对您有所帮助。

# html - 出于搜索引擎优化的原因，在 div 中使用 alt 标签？

> ID：11879285
> 
> 赞同：4
> 
> 时间：2012-08-09T08:16:12.053
> 
> 标签：html, css, seo

目前我在css中使用div和'background-image'来放入我的图像。但是，我如何利用这些来发挥我在 SEO 方面的优势？我曾经在我的 SEO 策略中经常使用 alt-tags。你如何用div做到这一点。还是您建议只在相关部分使用 img src ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T08:18:54.610

> 目前我在css中使用div和'background-image'来放入我的图像。

对背景图像执行此操作。不要对内容图像这样做。

> 但是，我如何利用这些来发挥我在 SEO 方面的优势？

为人们编写（可访问的）内容。相信搜索引擎会找到它。

> 我曾经在我的 SEO 策略中经常使用 alt-tags。

希望它们是[好的替代文本](http://www.alanflavell.org.uk/alt/alt-text.html)（希望您的意思是*属性*，而不是标签）。

> 还是你们建议只在相关部分使用 img src ？

内容图像应使用`<img>`元素。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T08:19:38.120

这取决于上下文。

如果您的图像是背景图像（如平铺背景，或属于背景的某种形式的图像），那么它应该是背景图像，理论上不需要替代文本。

如果您的图像是内容图像，那么出于可访问性和 SEO 目的，这应该是一个`img`元素。

关于“img vs background-image”的使用，StackOverflow 上已经有一个非常受欢迎的问题，可以在这里找到：

[何时使用 IMG 与 CSS 背景图像？](https://stackoverflow.com/questions/492809/when-to-use-img-vs-css-background-image)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T08:19:03.860

如果图像只是出于设计原因，请通过 css 的背景图像添加它，并且不需要 seo 的 alt。但是当图片对网站内容很重要时，您应该将其插入到 html 中，然后使用`<img src="" alt="" />`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-09T18:43:56.413

任何不遵循[HTML 规范](http://www.w3.org/TR/html401/struct/global.html#h-7.5.4)的东西都是一个坏主意。从技术上讲，您可以改用标题标签，但请不要。

过度优化 SEO 总是一个坏主意。

# git - 导出带有版本历史记录的 git

> ID：11879287
> 
> 赞同：35
> 
> 时间：2012-08-09T08:16:18.090
> 
> 标签：git

我需要导出一个 git 存储库内容并将其导入目标存储库。我知道有两种选择，但它们不能解决我的问题

a）将源存储库添加为远程并合并到目标。我不能使用它，因为两个存储库不在同一个网络上

b) 使用 git archive 并将内容复制到目标。在这个 git 存档中，修订信息丢失了。

我需要一些可以与版本历史记录一起存档的东西，并使我能够合并到目标中。如何才能做到这一点？

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2012-08-10T06:35:30.393

`git bundle`正是为此目的而提供的。

**例子：**

1.  完整地捆绑您的源存储库

    `git bundle create my_repo.bundle --all`

2.  将“my_repo.bundle”带到您的目标位置

3.  从您的目标，加载您的源提交对象

    `git bundle unbundle my_repo.bundle`

    ...从那时起，您可以将所需的源提交合并/rebase/cherry-pick 到您的目标存储库中，以满足您的心愿。

    否则，拉动的效果是一样的：

    `git pull my_repo.bundle`

与克隆相比，捆绑包更容易传输，因为它们更小，因为您的文件不是处于签出状态。

使用捆绑包的其他原因：

*   与使用`clone --bare`（不签出您的文件）不同，捆绑包被创建并打包为单个文件，因此您不需要额外的压缩/压缩包。

*   您也可以简单地对您的源存储库（或只是 .git 目录）进行 tar 压缩，但您将携带在 .git/ 下建立的所有多余缓存和垃圾。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T09:57:44.687

Git 将存储库克隆到 U 盘、笔记本电脑或其他一些数据传输介质上。将其连接到另一台机器，将媒体添加为远程并从那里拉/合并更改......

存储库中的任何克隆实际上都包含所有历史记录，因此问题实际上是如何将克隆克隆到另一台机器上。

另见：[这个问题](https://stackoverflow.com/questions/11792303/utilizing-git-for-multiple-development-places/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T08:20:34.710

您想为当前存储库创建一个分支。如果我做对了，请告诉我：您希望克隆特定的 git 存储库。处理克隆然后将更改合并到原始存储库中？

这是我创建存储库的一个分支，然后从原始源中提取更改以进行提交更改。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T09:43:54.050

您只需压缩完整的存储库文件夹，然后将其复制到目标工作站（通过 USB 棒等），然后将该本地存储库添加为远程存储库。然后你可以获取和合并。

# c# - 在 DefaultSelenium 中使用名称/类型属性查找元素

> ID：11879291
> 
> 赞同：0
> 
> 时间：2012-08-09T08:16:31.403
> 
> 标签：c#, selenium, attributes, click, submit

我想使用 DefaultSelenium 单击提交按钮。有没有办法使用名称或类型来查找元素？

前任：

```
<input type="submit" name="xyz:j_id123" value="Next" class="btnSubmit" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T08:26:08.420

我使用 XPATH 选择器解决了如下问题：

```
 Selenium.Click("//div/input[@class='btnSubmit']"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T08:43:37.553

你也可以使用

```
//input[@name='xyz:j_id123']
//input[@value='Next']
//input[@name='name_attribute' and @value='value_attribute'] 
```

# c++ - CString 到 TCHAR

> ID：11879292
> 
> 赞同：1
> 
> 时间：2012-08-09T08:16:40.583
> 
> 标签：c++, cstring, tchar

很长一段时间后，今天我看到了这种转换：

```
void SomeFunction( LPCTSTR szText ) ...

CString str;
str.Format( "A Simple Sentence" );
SomeFunction( LPCTSTR( str ) ); 
```

它编译好。关于这种转换的任何解释？

看起来大部分都可以，因为我不需要`GetBuffer`稍后使用和释放它，也不需要创建`new` `LPTSTR`带有字符串长度的a。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T08:23:31.543

是的，这没关系，因为`CString`有转换运算符到`LPCTSTR`. [参考运营商](http://msdn.microsoft.com/en-us/library/tk1z2hd9)

[微软](http://msdn.microsoft.com/en-us/library/awkwbzyc.aspx#_core_using_cstring_as_a_c.2d.style_null.2d.terminated_string)

**C++ 编译器自动应用为将 CString 转换为 LPCTSTR 的 CString 类定义的转换函数。**

因此，您不需要使用显式转换为`LPCTSTR`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T08:23:02.560

是的，这没关系。根据[文档](http://msdn.microsoft.com/en-us/library/aa300569%28VS.60%29.aspx)，您只需要确保在返回指针期间不要修改字符串，您的代码运行良好。

这基本上`CString`相当于`std::string::c_str()`.

通常，尽管您不需要像代码那样显式使用强制转换。我认为您需要这样做的唯一原因是，如果您要转换为另一种类型，例如 if`SomeFunction`定义为

```
void SomeFunction(const std::basic_string<TCHAR>& str); 
```

在这种情况下，没有从`CString`to的隐式转换，`std::basic_string<TCHAR>`因此您需要`LPCTSTR`用作中间人。

# android - 无法使用我的 jjil 代码

> ID：11879298
> 
> 赞同：0
> 
> 时间：2012-08-09T08:17:07.740
> 
> 标签：android, image, image-processing

嗨，我和 jjil 库一起工作。我没有使用jiil jar文件我添加了源代码。程序没有错误。但是当我添加推送代码eclipse添加尝试catch blog.然后程序运行但我在模拟器上看不到图像。我的代码在这里

```
 public void onCreate(Bundle savedInstanceState) {
   super.onCreate(savedInstanceState);
   setContentView(R.layout.main);

   bmp = BitmapFactory.decodeResource(getResources(), R.drawable.test);
   int with=bmp.getWidth();
   int height=bmp.getHeight();
   RgbImage rgb=new RgbImage(with,height);
   bmp.getPixels(rgb.getData(), 0, with, 0, 0, with, height);       
   Sequence seq=new Sequence();
   seq.add(new Rgb3x3Average());  
   try {
     seq.push((RgbImage) rgb.clone());
   } catch (Throwable e) {            
     throw new IllegalStateException(e);                       
   }
   try {
     rgb=(RgbImage) seq.getFront();
   } catch (Throwable e) {            
     throw new IllegalStateException(e);       
   }
 }
 } 
```

还有我的 logcat 错误：

```
Log cat hatası : 08-09 07:57:14.061: W/ResourceType(63): Resources don't contain package for resource number 0x7f020030 
```

但 R.java 不包含`0x7f020030` 代码

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T04:17:09.097

你应该使用：

```
 RgbImageAndroid.toRgbImage(bm) 
```

这是完整的代码

```
 Bitmap bm = BitmapFactory.decodeResource(getResources(), R.drawable.star);
    int width = bm.getWidth();
    int height = bm.getHeight();

    RgbImage jjImage = RgbImageAndroid.toRgbImage(bm);

    Sequence seq = new Sequence();
    seq.add(new Rgb3x3Average());

    RgbImage jjImageResult = null;
    try {
        seq.push(jjImage.clone());
        jjImageResult = (RgbImage) seq.getFront();
    } catch (Error e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    int[] jjpixel = jjImageResult.getData();

    Bitmap bm2 = bm.copy(bm.getConfig(), true);
    bm2.setPixels(jjpixel, 0, width, 0, 0, width, height); 
```

# ant - CruiseControl.net ndk-build 在没有 Cygwin 的 Windows 64 位上

> ID：11879300
> 
> 赞同：0
> 
> 时间：2012-08-09T08:17:08.683
> 
> 标签：ant, android-ndk, java-native-interface, cruisecontrol.net

最新的 Android NDK（版本 8）允许在`ndk-build`不安装额外*cygwin*的情况下调用。

我的问题是：**我可以将它插入 CruiseControl.Net 进行定期原生构建吗？**

我假设我很可能需要使用*Ant*作为构建方法，然后将其添加到*ccnet*服务器配置中。

所以问题是：

*   如何`ndk-build.cmd`从*Ant*命令调用

*   如何配置`build.xml`文件？我尝试了几种方法，但都失败了。如果可能的话，你能给我一些线索吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T19:10:30.723

在 Windows 上使用 CC.net 尝试直接从 build.xml 调用“ndk-build.cmd”时，我遇到了同样的问题（CreateProcess 失败等）。我想出了如何让它发挥作用，所以我觉得有必要分享我的解决方案。

首先，创建一个 1 行 Windows 命令文件，如下所示（我将其命名为“ndkwrapper.cmd”）：

```
sh ndkwrap.sh %1 %2 %3 
```

接下来，创建一个简单的 bash shell 脚本，如下所示（名为“ndkwrap.sh”）：

```
#!/usr/bin/sh
# Wrapper around ndk-build script for Windows
#

NDK_PROJECT_PATH=/cygdrive/c/workspace/agnc_android
export NDK_PROJECT_PATH
/cygdrive/c/Android/android-ndk-r8b/ndk-build $1 $2 $3 
```

当然，您的确切路径（对于您的工作区和 NDK 目录）可能会有所不同，但请特别注意，“/cygdrive/c”指的是“C:”。

在您创建上面的脚本之后，这里的一个非常重要的步骤是**将行尾从 Windows 转换为 UNIX**。您可以使用免费提供的名为“dos2unix.exe”的实用程序来执行此操作。我不记得我从哪里得到它，但它是移植到 Windows 的 GNU/Linux 工具的一些开源包的一部分。（谷歌在“Windows 的 UNIX 文件实用程序”上。）如果你不转换行尾，那么 sh 或 bash 将无法读取脚本，你会得到关于 "\r" 的各种错误......

因此，例如，要调用“ndk-build.cmd clean”的等效项，您需要键入“ndkwrapper.cmd clean”来删除与NDK 相关的中间和输出构建文件，为完整的NDK 构建做准备。

在 Windows 上 CC.net 的 build.xml 文件中，您可以调用 NDK 生成文件，如下所示：

```
<tasks>
  <exec>
    <executable>cmd.exe</executable>
    <baseDirectory>C:\Android</baseDirectory>
    <buildArgs>/C ndkwrapper.cmd clean</buildArgs>
  </exec> 
```

希望这可以帮助！

本

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T13:44:14.697

我也观察到将 ndk-build 作为 CCNET 任务运行的问题。我花了一段时间，但最后我注意到，你必须提供`HOST_OS`ndk `HOST_ARCH`-build 参数才能让它运行。

```
<exec>
  <executable>cmd</executable>          
  <buildArgs>/C ndk-build HOST_OS=windows HOST_ARCH=x86 -B NDK_PROJECT_PATH=[PROJECT] APP_BUILD_SCRIPT=[ANDROIDMKFILE] NDK_APPLICATION_MK=[APPLICATIONMKFILE] NDK_LOG=1</buildArgs>
  <buildTimeoutSeconds>120</buildTimeoutSeconds>
</exec> 
```

希望它可以帮助任何人节省时间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T09:28:15.693

好的，我取得了一些进展，我能够通过 ant 或 nant 构建 jni 代码，但在这两种情况下，将其插入 cc.net 服务器配置都会出现 strane 错误：

但现在 CC.net 给了我奇怪的错误：

```
 <builderror>
      <type>NAnt.Core.BuildException</type>
      <message><![CDATA[External Program Failed: G:\\android-ndk-r8b\\ndk-build.cmd (return code was 2)]]></message>
      <location>
        <filename>G:/MYPath/project.build</filename>
        <linenumber>7</linenumber>
        <columnnumber>4</columnnumber>
      </location>
      <stacktrace><![CDATA[   at NAnt.Core.Tasks.ExternalProgramBase.ExecuteTask()
   at NAnt.Core.Tasks.ExecTask.ExecuteTask()
   at NAnt.Core.Task.Execute()
   at NAnt.Core.Target.Execute()
   at NAnt.Core.Project.Execute(String targetName, Boolean forceDependencies)
   at NAnt.Core.Project.Execute()
   at NAnt.Core.Project.Run()]]></stacktrace>
    </builderror>
  </failure>
  <duration>296.40000000000003</duration>
</buildresults>Buildfile: file:///G:/MYPath/project.build
Target framework: Microsoft .NET Framework 4.0
Target(s) specified: build 
```

干净的：

```
 [echo] Starting Android ndk CLEAN ...
 [exec] Android NDK: Unable to determine HOST_OS from uname -s:     
 [exec] Android NDK: Please define HOST_OS in your environment.    
 [exec] process_begin: CreateProcess(NULL, uname -s, ...) failed.
 [exec] G:/android-ndk-r8b/build/core/init.mk:131: *** Android NDK: Aborting.    .  Stop. 
```

构建失败 - 0 个非致命错误，2 个警告

我在 cc.net 配置中的项目：

```
<project>
    <name>MY_PROJECT_NAME</name> 
    <workingDirectory>PATH_TO_MY_PROJECT</workingDirectory>
    <tasks>
        <nant>
            <executable>G:\nant-0.92\bin\Nant.exe</executable>
            <baseDirectory>PATH_TO_MY_PROJECT</baseDirectory>
            <buildFile>MYPROJECTNAME.build</buildFile>
            <buildArgs>build</buildArgs> 
            <buildTimeoutSeconds>1200</buildTimeoutSeconds>
        </nant>
    </tasks>
</project> 
```

还有我的 NAnt 构建文件：

```
<project name="my name" default="build" basedir=".">
    <description>My project Build Files.</description>
    <target name="clean" description="remove all generated files">
        <echo message="Starting Android ndk CLEAN ..."/>
        <exec program="G:\\android-ndk-r8b\\ndk-build.cmd" failonerror="true"
            basedir="MY PROJECT PATH">
            <arg value="clean" />
        </exec>
        <echo message="Android ndk CLEAN done."/>
    </target>
    <target name="build" description="remove all generated files"  depends="clean">
        <echo message="Starting Android ndk BUILD ..."/>
        <exec program="G:/android-ndk-r8b/ndk-build.cmd" failonerror="true" />
        <echo message="Android ndk BUILD done."/>
    </target>
</project> 
```

正如我所说，我可以为我的项目运行 Nant.exe，它可以正确清理和构建。看起来 cc.net 尝试运行另一个用于 linux 的 ndk-build 推荐，并且缺少一些命令作为 uname。你知道 cI 可能做错了什么吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-27T20:35:56.100

最初的问题是询问蚂蚁构建。这个答案与 CC.NET 中的一个问题有关，ant 和 gradle 构建将以同样的方式受到影响。

我们正在使用 gradle 并且通过一些自定义 gradle 任务，也可以通过调用 ndk-build.cmd（从其中没有空格的路径）来编译项目的本机代码。

正确准备好 gradle 文件后，shell 启动的 gradle 构建将起作用，但 cc.net 启动的构建将失败。

我们的 CC.NET 任务定义如下：

```
<exec executable=".\gradlew.bat">
    <baseDirectory>$(projSrcDir)</baseDirectory>
    <buildArgs>clean assemblePlayRelease assembleProRelease</buildArgs>
    <buildTimeoutSeconds>900</buildTimeoutSeconds>
</exec> 
```

该问题与导致 shell 变量名称为小写的 CC.NET 错误有关。Windows shell 脚本不关心 shell 变量名的大小写，但是因为 NDK 启动了使变量大小写成为问题。作为构建过程一部分的 init.mk make 文件依赖于 shell 变量名称来识别主机操作系统类型。特别是 shell 变量 OS。通常 OS 值是这样定义的：

```
OS=Windows_NT 
```

但是当变量从 CC.NET 传递给 gradle 时，它​​会变成这样：

```
os=Windows_NT 
```

这会导致 init.mk 中的检测机制失败并尝试执行 unix 检测序列并查找 Windows 上不存在的 Unix uname 实用程序，从而导致：

```
Android NDK: Unable to determine HOST_OS from uname -s:
Android NDK: Please define HOST_OS in your environment.
make.exe: Entering directory `D:/CC.NET/svncheckout/pes/src/project/src/main/jni'
make.exe: Leaving directory `D:/CC.NET/svncheckout/pes/src/project/src/main/jni' 
```

最终：

```
process_begin: CreateProcess(NULL, uname -s, ...) failed.
c:/ndk/build/core/init.mk:160: *** Android NDK: Aborting.    .  Stop.
FAILURE: Build failed with an exception. 
```

解决方法不太理想，但可以完成工作。我们的想法是编辑 ndk-build.cmd 并仅在我们从 CC.NET 构建时更改传递变量的大小写。

只需在 ndk-build.cmd 中的 @echo off 行之后插入此代码：

```
IF DEFINED ccnetproject (
  ECHO Applying Environment variable hack for CC.NET.
  SET OS2=%os%
  SET OS=
  REM SET PATH=%path%
  SET TEMP2=%temp%
  SET TEMP=
)

IF DEFINED ccnetproject (
  SET OS=%OS2%
  SET OS2=
  SET TEMP=%TEMP2%
  SET TEMP2=
) 
```

该脚本首先对小写 OS 和 TEMP 变量中的值进行临时复制。接下来，它通过清除它们的值来取消定义它们。最后完成了相反的操作。

需要两个步骤，因为只是说

```
SET OS=%os% 
```

由于脚本不区分大小写，因此没有多大作用。它首先定位 OS 变量，找到一个小写版本并将自己的值赋回给自己。

这是在 CC.NET v1.6.7981.1、gradle v1.1.0 和 Android NDK v10（64 位）上测试的。

# image - 扫描 (2D) 图形的区域

> ID：11879301
> 
> 赞同：0
> 
> 时间：2012-08-09T08:17:13.393
> 
> 标签：image, photoshop, pixels, area, scanning

假设我有 100 张单色 A4 纸，它们被切割成不同的形状和图形（2D），扫描，保存为图像文件，然后需要按区域升序排序。

有没有一种有效的方法来找到图形的区域并排列它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T08:36:43.190

如果所有图片的尺寸相同并且所有形状的颜色相同（如果我没有误解您的问题，那就是这种情况），您可以计算平均颜色值。

计算出的颜色越接近图形的颜色，图像上的形状就越大。

一些代码：

```
private Color GetAverageImageColor(Image img)
    {
        double[] rgb = new double[3];
        Color col;
        Bitmap bmp = new Bitmap(img);

        for(int y = 0; y < bmp.Size.Height; y++)
        {
            for(int x = 0; x < bmp.Size.Width; x++)
            {
                col = bmp.GetPixel(x, y);
                rgb[0] += col.R;
                rgb[1] += col.G;
                rgb[2] += col.B;
            }
        }

        for (int i = 0; i < 3; i++)
        {
            rgb[i] /= (bmp.Size.Height * bmp.Size.Width);
            rgb[i] = Math.Round(rgb[i]);
        }

        return Color.FromArgb((int) rgb[0], (int) rgb[1], (int) rgb[2]);
    } 
```

# java - 在 TLD 函数中使用类型参数

> ID：11879304
> 
> 赞同：0
> 
> 时间：2012-08-09T08:17:22.363
> 
> 标签：java, tld

我想使用一个简单实现的 tld 函数， MyAccessManager 是一个抽象类，并且有 2 个孩子以不同的方式覆盖一个函数：

```
public static <T extends MyAccessManager> boolean isAllowed(T accessMan, MyTypeEnum otherUsersEnum){
    // trivial implementation
} 
```

我也在我的 tld 定义文件 (*.tld) 中定义了上述方法。

我有 2 个类扩展了我的 MyAccessManager 并且我正在通过 EL 使用函数，例如：

```
<input name="foo" type="hidden" value="${mytaglib:isAllowed(param1, param2)}"/> 
```

我将正确的参数（即子类实例作为 param1）传递给我的 tld 函数，但 webapp 抛出以下异常：

org.apache.jasper.JasperException: PWC6300: 在 TLD 中的方法签名中为函数 mytaglib:isAllowed 指定的类 T 找不到。吨

我的 tld 文件：

```
<function>
      <description>Processes users access to specific resources</description>
      <name>isAllowed</name>
      <function-class>com.myproj.MyUtil</function-class>
      <function-signature>boolean isAllowed(T,com.myproj.MyTypeEnum)</function-signature>
</function> 
```

TLD 不支持 java 的类型参数吗？或者，有没有办法实现这样的功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T09:11:21.550

I don't understand why do you need `T` at all.

It's a typical case of polymorphism, you don't need type parameters and other generic stuff here:

```
public static boolean isAllowed(MyAccessManager accessMan, MyTypeEnum otherUsersEnum){ ... } 
```

.

```
<function-signature>boolean isAllowed(MyAccessManager,com.myproj.MyTypeEnum)</function-signature> 
```

# iphone - UITableViewCell 内的 UIScrollView 与 iPad 上的水平分页

> ID：11879310
> 
> 赞同：0
> 
> 时间：2012-08-09T08:17:40.057
> 
> 标签：iphone, objective-c, ios, ipad, uiscrollview

**我正在尝试使用自定义单元格制作表格视图。每个单元格里面都有 uiscrollview 和页面控件.. 我该怎么做？任何的想法 ？** 提前谢谢。该视频可能会有所帮助[按这里](http://www.youtube.com/watch?v=a6PQojyecKM)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T08:26:24.277

在您的 tableViewCell.contentView 上放置一个 UIScrollView 并启用分页。

# android - PagerAdapter 起始位置

> ID：11879315
> 
> 赞同：77
> 
> 时间：2012-08-09T08:17:58.737
> 
> 标签：android, android-viewpager, swipe

我正在使用以下示例来暗示我的 viewPager： [http ://code.google.com/p/viewpagerexample/issues/list](http://code.google.com/p/viewpagerexample/issues/list)

这个例子的问题是我不知道如何设置我的起始位置，默认起始位置是 0。基本上我无法控制它的左侧或右侧是否有可用的视图。

有没有办法控制中心的查看当前位置？有更好的方法吗？能不能做成圆形？

* * *

## 回答 #1

> 赞同：174
> 
> 时间：2012-08-09T10:00:17.893

我找到了一种设置它的位置的方法，这是在课堂之外完成的：

```
 awesomePager = (ViewPager) findViewById(R.id.awesomepager);
 awesomePager.setAdapter(awesomeAdapter);
 awesomePager.setCurrentItem(CurrentPosition); 
```

并且可以通过计算我想要放入其中的项目数量来限制它

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-12-10T13:13:06.433

我注意到，如果您使用具有 FragmentStatePagerAdapter 的 ViewPager 重新创建 Activity（方向更改），则适配器将重用它的 Fragments。阻止它的方法是：

```
@Override
public void onSaveInstanceState(Bundle savedInstanceState) {
    if (viewPager != null) {
        // before screen rotation it's better to detach pagerAdapter from the ViewPager, so
        // pagerAdapter can remove all old fragments, so they're not reused after rotation.
        viewPager.setAdapter(null);
    }
    super.onSaveInstanceState(savedInstanceState);
} 
```

但是在 Activity 重新创建之后 ViewPager 总是先打开第 0 页并 setCurrentItem(CurrentPosition); 不起作用。修复延迟后更改页面的问题：

```
new Handler().postDelayed(new Runnable() {
    @Override
    public void run() {
        viewPager.setCurrentItem(newPosition);
    }
}, 100); 
```

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2015-03-11T14:33:07.017

从最后一个片段开始，我这样做了：

```
PagerAdapter pagerAdapter = new PagerAdapter();
viewPager.setAdapter(pagerAdapter);
viewPager.setCurrentItem(pagerAdapter.getCount() - 1); 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2013-11-25T22:19:41.287

我遇到了一个问题，如果我在设置适配器之前设置当前项目，我得到的第一个项目将始终是位置 0 的项目。

确保你这样做：

```
awesomePager.setAdapter(awesomeAdapter);
awesomePager.setCurrentItem(CurrentPosition); 
```

并不是：

```
awesomePager.setCurrentItem(CurrentPosition);
awesomePager.setAdapter(awesomeAdapter); 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2015-11-03T07:09:25.200

我有一个大小超过 1000 的数组，在动态查看器中，我面临左滑卡在 firstload 上。下面的代码解决了这个问题并导致平滑滚动：

```
@Override
onResume(){
   super.onResume();
   viewPager.setCurrentItem(newPosition);
} 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2014-11-28T21:46:31.453

我正在使用 3 个片段，在启动我的应用程序时，默认情况下会显示第二个（**中间）片段。**只是我正在使用 onResume 功能，一切都很好。

```
@Override
protected void onResume() {
    super.onResume();
    m_viewPager.setCurrentItem(1);
} 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2019-10-05T01:15:25.333

使用`viewPager.setCurrentItem(newPosition);`向用户显示从起始页到 的过渡`newPosition`，以防止这种情况发生并`newPosition`直接显示它，就好像它是起点一样，我`false`在第二个参数中添加了如下内容：

```
int newPosition = pages.size()-1; // Get last page position

viewPager.setCurrentItem(newPosition, false); // 2nd parameter (false) stands for "smoothScroll" 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2015-11-11T10:05:09.827

我遇到了同样的问题。当我初始化 ViewPager 时，指示器位置为 0。这可能取决于 Pager 内容的计算量。我使用 ViewTreeObserver 如下所示。

```
mGlobalLayoutListener = new ViewTreeObserver.OnGlobalLayoutListener() {
    @Override
    public void onGlobalLayout() {
        mViewPager.setCurrentItem(newPosition);
        removeOnGlobalLayoutListener(mSlidingTabLayout.getViewTreeObserver(), mGlobalLayoutListener);
    }
};
mSlidingLayout.getViewTreeObserver().addOnGlobalLayoutListener(mGlobalLayoutListener); 
```

和，

```
private void removeOnGlobalLayoutListener(ViewTreeObserver observer, ViewTreeObserver.OnGlobalLayoutListener listener) {
       if (observer == null) return;
       if (Build.VERSION.SDK_INT < Build.VERSION_CODES.JELLY_BEAN) {
               observer.removeGlobalOnLayoutListener(listener);
       } else {
               observer.removeOnGlobalLayoutListener(listener);
       }
} 
```

这样一来，也再也不用为延迟的时间设置而烦恼了。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2014-09-02T10:39:16.183

```
@Override
public Object instantiateItem(ViewGroup container, int position) {
    View currentPage = null;
    switch(position){
        case 0:
            currentPage = LayoutInflater.from(context).inflate(R.layout.page0, null)    
            break;
        case 1:
            currentPage = LayoutInflater.from(context).inflate(R.layout.page1, null)    
            ///////////// This page will be default ////////////////////
            ((ViewPager)container).setCurrentItem(position);
            ////////////////////////////////////////////////////////////
            break;
        case 2:
            currentPage = LayoutInflater.from(context).inflate(R.layout.page2, null)    
            break;
    return currentPage;
} 
```

# asp.net-mvc - 如何访问整个模型客户端

> ID：11879317
> 
> 赞同：1
> 
> 时间：2012-08-09T08:18:04.720
> 
> 标签：asp.net-mvc, knockout.js

我有以下代码。

索引.cshtml：

```
@using System.Web.Script.Serialization
@model MvcApplication3.Models.Person

<script src="../../Scripts/knockout-2.1.0.js" type="text/javascript"></script>

<!-- This is a *view* - HTML markup that defines the appearance of your UI -->
<p>First name: <input data-bind="value: firstName" /></p>
@*<p>Last name: <input data-bind="value: lastName" /></p>*@

<script type="text/javascript">
    var initialData = @Html.Raw(
        new JavaScriptSerializer().Serialize(Model.FirstName));

    alert(initialData);

    // The *viewmodel* - JavaScript that defines data and behavior of the UI
    function AppViewModel() {
        this.firstName = ko.observable(initialData);
        // this.lastName = ko.observable("Bertington");
    }

    // Activates knockout.js
    ko.applyBindings(new AppViewModel());
</script> 
```

家庭控制器：

```
public class HomeController : Controller
{
    public ActionResult Index()
    {
        var people = new PeopleEntities();

        var person = people.People.First();

        return View(person);
    }
} 
```

基本上，它的作用是从数据库中加载一个人，并使用敲除为名字创建一个可编辑的字段并将其加载`FirstName`到其中。

这工作正常，但是，我也想加载`LastName`. 我不确定如何执行此操作，因为我只是在序列化名字。我在想我想序列化整个模型，但不确定如何访问每个名称。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T08:28:57.770

将[`JavaScriptSerializer`](http://msdn.microsoft.com/en-us/library/bb292287.aspx)对象转换为 JSON 字符串。如果您序列化整个模型，则可以像在 C# 中使用更具体的点表示法`initialData.FirstName`和`initialData.LastName`.

这是有效的，因为`initialData`它包含一个从序列化程序获得的 JSON 字符串初始化的 javascript 对象。如果模型只包含名字和姓氏属性，这将是序列化程序生成的字符串：

```
{"FirstName":"John","LastName":"Doe"} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T22:53:54.440

这是我的做法：

```
var initialData = @(new MvcHtmlString(Model.ToJson()));

var viewModel = new AppViewModel(ko.toJS(initialData));

function AppViewModel(m) {
    this.firstName = ko.observable(m.FirstName);
    this.lastName = ko.observable(m.LastName);
}

$(function () {
    ko.applyBindings(viewModel, document.body);
} 
```

Model 上的 .ToJson() 方法是扩展方法：

```
public static class HtmlHelperExtensions
{
    public static string ToJson(this object item)
    {
        return Newtonsoft.Json.JsonConvert.SerializeObject(item);
    }
} 
```

您可以看到我使用了[Newtonsoft.Json](http://json.codeplex.com/)转换器，但您也可以使用 JavaScriptSerializer。

# c# - 使用实体框架插入时避免不必要的插入子类

> ID：11879321
> 
> 赞同：0
> 
> 时间：2012-08-09T08:18:21.590
> 
> 标签：c#, entity-framework, entity-framework-4, automapper, automapping

我有这个对象：

```
public class Person
{
    public string FirstName { get; set; }
    public string LastName { get; set; }
    public Address Address { get; set; }
}

public class Address
{
    public string Street { get; set; }
    public Locality Locality { get; set; }
}

public class Locality
{
    public string City { get; set; }
    public string ZipCode { get; set; }
} 
```

在实体框架模型中，我有这个`PERSON, ADDRESS, LOCALITY`

我正在这样做：

```
Mapper.CreateMap<Person, PERSON>();
Mapper.CreateMap<Address, ADDRESS>();
    .ForMember(x => x.Locality, opt => opt.Ignore()) 
```

当我尝试`Person`在数据库中插入一个新的时，我看到使用探查器（实体框架探查器）在 Locality 表上也有一个插入。我只想插入一个用户，就是这样。

任何的想法 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T08:54:48.320

您需要在新设置`State`上设置。`Locality``Person``EntityState.Unchanged`

```
 context.ObjectStateManager
     .ChangeObjectState
     (newPerson.Locality, System.Data.EntityState.Unchanged); 
```

# java - 如何在 java 程序中返回 unix 服务器上的文件内容

> ID：11879327
> 
> 赞同：0
> 
> 时间：2012-08-09T08:18:37.487
> 
> 标签：java, unix, process, runtime

我有以下问题。我在 unix 服务器上有一个名为 password.txt 的 txt 文件。我在同一台服务器上有一个 java 类。我必须使用这个 Java 类读取 password.txt 的内容。但是，Unix 在 root 用户下运行，并且 root 用户没有适当的权限直接读取这个 password.txt 文件。因此，我介绍了一个脚本和另一个为我读取 password.txt 的 java 类。

基本上，我使用 Process 和 Runtime.exec() 从 java 类调用脚本。该脚本调用另一个可以读取 password.txt 文件内容的 java 类。但是如何将内容返回给调用脚本的 java 类呢？有人建议将 password.txt 的内容分配给一个环境变量，并在我的 java 类中读取该环境变量。我该如何准确地实现这一点。另外，这是一个好的解决方案吗？我对 UNIX 和脚本非常陌生。请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T08:26:37.023

我承认我对你的 Java 和脚本层次结构有点困惑（我认为你不能直接通过 读取文件`FileReader`）。也许您只需要一个 Java 类和一个脚本（适当的许可 - 像[这样](https://stackoverflow.com/questions/6905697/how-to-run-script-as-another-user-without-password)还是[这样](http://www.tuxation.com/setuid-on-shell-scripts.html)？）。

> 但是如何将内容返回给调用脚本的 java 类呢？

您不能使用环境变量，因为这些变量仅适用于进程及其子进程。如果您在子进程中更改它，您将不会在父进程中看到更改。

我会让您的阅读课将读取的数据写入标准输出（通过简单的`System.out.println()`）。您应该能够从您通过启动的进程中读取输入流`Process.exec()`。[来自Process.getInputStream()](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Process.html#getInputStream%28%29)的文档：

> 获取子流程的输入流。流从这个 Process 对象表示的进程的标准输出流中获取数据。

有几个问题。从衍生的进程中读取数据。有关更多详细信息，请参阅[此答案](https://stackoverflow.com/a/882795/12960)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T08:28:33.100

您可以让脚本将内容文件写入其标准输出。该脚本可能只是[cat](https://en.wikipedia.org/wiki/Cat_%28Unix%29)与[su](https://en.wikipedia.org/wiki/Su_%28Unix%29)或[sudo](https://en.wikipedia.org/wiki/Sudo_%28Unix%29)结合以获得适当的权限。然后，您可以通过在用于启动脚本的对象上调用[getInputStream()](http://docs.oracle.com/javase/6/docs/api/java/lang/Process.html#getInputStream%28%29)来读取数据。`Process`

# c# - 实体框架按孙实体过滤

> ID：11879337
> 
> 赞同：4
> 
> 时间：2012-08-09T08:19:27.010
> 
> 标签：c#, entity-framework, linq-to-entities

如果我有以下表格：
`Parent`: has `ParentId`
`Child`: has`ChildId`和`ParentId`
`Grandchild`: has `GrandchildId`, `ChildId`and`Quantity`

检索有孙子数量大于 10 的父母列表的最佳方法是什么（例如）？

我玩了 linq to entity，生成了类似的东西：

```
context.Parent.Includes("Children").Include("GrandChildren").Where( ... ) 
```

但不确定语法，我想知道性能 - 包含加载所有对象吗？实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-09T08:26:08.840

试试这个：

```
var query = context.Parents
                   .Where(p => p.Children.Any(
                          c => c.GrandChildren.Any(g => g.Quantity > 10)); 
```

`Include`确实会加载与加载的父母相关的所有子实体和孙实体。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-09T08:30:01.040

这种方法的性能很差......

```
context.Parent.Includes("Children").Include("Children.GrandChildren").Where( ... ) 
```

如果您稍后需要孩子和孙辈，或者可能根本不需要它们，请尝试稍后加载它们：

```
if (!parent1.ChildrenReference.IsLoaded)    
     parent1.ChildrenReference.Load(); 
```

# javascript - 分配 Enter Keypress 的更整洁的方式

> ID：11879339
> 
> 赞同：2
> 
> 时间：2012-08-09T08:19:34.243
> 
> 标签：javascript, jquery

```
function onLoad() {
    eworkData.FieldByName('SearchReference').HTMLfield.onkeydown=function(evt)
    {
        var keyCode = evt ? (evt.which ? evt.which : evt.keyCode) : event.keyCode;
        if( keyCode == 13 )
        {
            eworkData.FieldByName('cmdSearch').HTMLfield.onfocus();
            eworkData.FieldByName('cmdSearch').HTMLfield.onclick();
        }
    };
    eworkData.FieldByName('SearchFirstName').HTMLfield.onkeydown=function(evt)
    {
        var keyCode = evt ? (evt.which ? evt.which : evt.keyCode) : event.keyCode;
        if( keyCode == 13 )
        {
            eworkData.FieldByName('cmdSearch').HTMLfield.onfocus();
            eworkData.FieldByName('cmdSearch').HTMLfield.onclick();
        }
    };
    // more controls
} 
```

有没有更整洁的方法来做到这一点？更小的紧凑代码？我认为在 jQuery 中我可以做到

```
$("SearchReference, SearchFirstName").onkeydown(function() ....) 
```

但是，jQuery 不是我的选择:o(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T08:28:48.823

```
var theElement = document.getElementById("YOUR_ELEMENT");
theElement.addEventListener("keypress", function(e) {
    switch(e.keyCode) {
        case "13":
           //keycode 13 pressed...
           break;
    }
}); 
```

或 jQuery：

```
$("YOUR_ELEMENT").live("keypress", function(e) {
   switch(e.keyCode) {

   }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T08:30:15.627

尝试：

```
function onLoad() {
    var fields = ["SearchReference", "SearchFirstName"];
    for(var i = 0; i < fields.length; i++) {
        eworkData.FieldByName( fields[i] ).HTMLfield.onkeydown=function(evt) {
            var keyCode = evt.keyCode;
            if( keyCode == 13 ) {
                eworkData.FieldByName('cmdSearch').HTMLfield.onfocus();
                eworkData.FieldByName('cmdSearch').HTMLfield.onclick();
            }
        };
    }
} 
```

# java - 在 Google 地图上显示当前位置附近的多个位置

> ID：11879341
> 
> 赞同：0
> 
> 时间：2012-08-09T08:19:43.690
> 
> 标签：java, android, google-maps, android-mapview

下面是我的课程，它在谷歌地图上的当前位置绘制图像。我需要在谷歌地图上再画两个位置。假设 A 点有这些值——

```
lat1: 37.33774833333334 
long1: -121.88670166666667 
```

B点有这些价值观——

```
lat2: 37.336453 
long2: -121.884985 
```

我需要用图像在谷歌地图上绘制 A 点和 B 点。我的可绘制文件夹中已经有这两个点的图像。

```
public class MainActivity extends MapActivity {    
    public static final String TAG = "GoogleMapsActivity";
    private MapView mapView;
    private LocationManager locationManager;
    Geocoder geocoder;
    Location location;
    LocationListener locationListener;
    CountDownTimer locationtimer;
    MapController mapController;
    MapOverlay mapOverlay = new MapOverlay();

 // Point A
   private Double lat1 = 37.33774833333334; 
   private Double long1 = -121.88670166666667 ;

// Point B              
   private Double lat2 = 37.336453;
   private Double long2 = -121.884985;

    /** Called when the activity is first created. */
    @Override
    protected void onCreate(Bundle icicle) {
        try {       
            super.onCreate(icicle);
            setContentView(R.layout.activity_main);
            initComponents();
            mapView.setBuiltInZoomControls(true);
            mapView.setSatellite(false);
            mapController = mapView.getController();
            mapController.setZoom(15);
            locationManager = (LocationManager) getSystemService(LOCATION_SERVICE);
            if (locationManager == null) {
                Toast.makeText(getApplicationContext(),
                        "Location Manager Not Available", Toast.LENGTH_SHORT)
                        .show();
                return;
            }
            location = locationManager
            .getLastKnownLocation(LocationManager.GPS_PROVIDER);
            if (location == null)
                location = locationManager
                .getLastKnownLocation(LocationManager.NETWORK_PROVIDER);
            if (location != null) {
                double lat = location.getLatitude();
                double lng = location.getLongitude();
                Toast.makeText(getApplicationContext(),
                        "Location Are" + lat + ":" + lng, Toast.LENGTH_SHORT)
                        .show();
                GeoPoint point = new GeoPoint((int) (lat * 1E6), (int) (lng * 1E6));
                mapController.animateTo(point, new Message());
                mapOverlay.setPointToDraw(point);
                List<Overlay> listOfOverlays = mapView.getOverlays();
                listOfOverlays.clear();
                listOfOverlays.add(mapOverlay);
            }
            locationListener = new LocationListener() {
                @Override
                public void onStatusChanged(String arg0, int arg1, Bundle arg2) {
                }

                @Override
                public void onProviderEnabled(String arg0) {
                }

                @Override
                public void onProviderDisabled(String arg0) {
                }

                @Override
                public void onLocationChanged(Location l) {
                    location = l;
                    locationManager.removeUpdates(this);
                    if (l.getLatitude() == 0 || l.getLongitude() == 0) {
                    } else {
                        double lat = l.getLatitude();
                        double lng = l.getLongitude();
                        Toast.makeText(getApplicationContext(),
                                "Location Are" + lat + ":" + lng,
                                Toast.LENGTH_SHORT).show();
                    }
                }
            };
            if (locationManager.isProviderEnabled(LocationManager.GPS_PROVIDER))
                locationManager.requestLocationUpdates(
                        LocationManager.GPS_PROVIDER, 1000, 10f, locationListener);
            if (locationManager.isProviderEnabled(LocationManager.NETWORK_PROVIDER)){
                locationManager.requestLocationUpdates(
                    LocationManager.NETWORK_PROVIDER, 1000, 10f, locationListener);
            }
            locationtimer = new CountDownTimer(30000, 5000) {
                @Override
                public void onTick(long millisUntilFinished) {
                    if (location != null)
                        locationtimer.cancel();
                }

                @Override
                public void onFinish() {
                    if (location == null) {
                    }
                }
            };
            locationtimer.start();          

        }
        catch(Exception e) {
            System.out.println(e);
        }
    }

    public MapView getMapView() {
        return this.mapView;
    }

    private void initComponents() {
        mapView = (MapView) findViewById(R.id.mapView);
    }

    @Override
    protected boolean isRouteDisplayed() {
        return false;
    } 
```

下面的类是上面的延续。在下面的课程中，我在谷歌地图上显示了我当前的位置。所以我认为我需要在这个类中进行更改，以便在谷歌地图上也显示这两个点。

```
 class MapOverlay extends Overlay {
        private GeoPoint pointToDraw;

        public void setPointToDraw(GeoPoint point) {
            pointToDraw = point;
        }

        public GeoPoint getPointToDraw() {
            return pointToDraw;
        }

        @Override
        public boolean draw(Canvas canvas, MapView mapView, boolean shadow,
                long when) {
            super.draw(canvas, mapView, shadow);

            Point screenPts = new Point();
            mapView.getProjection().toPixels(pointToDraw, screenPts);

            Bitmap bmp = BitmapFactory.decodeResource(getResources(),
                    R.drawable.current_user);
            canvas.drawBitmap(bmp, screenPts.x, screenPts.y - 24, null);
            return true;
        }
    }

} 
```

任何想法都将不胜感激，我怎样才能在谷歌地图上显示两个点 A 和点 B。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T17:36:06.320

使用以下代码绘制点 A 和点 B，但在添加此代码之前，请查看此链接并创建 HelloItemizedOverlay 类：[https ://developers.google.com/maps/documentation/android/hello-mapview](https://developers.google.com/maps/documentation/android/hello-mapview)

```
HelloItemizedOverlay iOverlay1 = new ItemizedOverlay(R.drawable.pointAimage, MainActivity.this);
HelloItemizedOverlay iOverlay2 = new ItemizedOverlay(R.drawable.pointBimage, MainActivity.this);
GeoPoint pointA = new GeoPoint(37337748, -12188670);
GeoPoint pointB = new GeoPoint(37336453, -12188498);
OverlayItem overlayItemA = new OverlayItem(pointA, "Title", "Body");
OverlayItem overlayItemB = new OverlayItem(pointB, "Title", "Body");
iOverlay1.addOverlay(overlayItemA);
iOverlay2.addOverlay(overlayItemB); 
```

# c# - 仅使用数据集更新数据库不插入更新

> ID：11879342
> 
> 赞同：1
> 
> 时间：2012-08-09T08:20:07.073
> 
> 标签：c#, asp.net, sql-server

我在 asp.net 中有一个网格视图，我填充如下：

```
 sda1 = new SqlDataAdapter("select * from tran_dtls where tc='" + tcdropDown.SelectedValue + "'and doc_no='" + DocNoTxt.Text + "'", con);
     build = new SqlCommandBuilder(sda1);
     sda1.Fill(ds);                      //ds is a data set
     GridView1.DataSource = ds;
     GridView1.DataBind(); 
```

我通过将 ds 传递给一个新的数据表来更新网格视图，在数据表中添加一个新行，然后再次将数据表绑定到网格：

```
 dt = (DataTable)ViewState["myViewState"];
              dt = ds.Tables[0];
              dr = dt.NewRow();
              dr["TC"] = Session["TC"];
              dr["sr_no"] = Session["i"].ToString(); //I have more fields but for simplicity only displaying few
              dt.Rows.Add(dr);
              dt.AcceptChanges();
              ViewState["myViewState"] = dt;

              Session["gridRow"] = dt; 
```

现在一切都很顺利，但是当我尝试更新数据库时（在数据集中插入新条目后）它不起作用，保存按钮代码如下：

```
 protected void onSaveClick(object sender, EventArgs e)
    {

        dt = (DataTable)Session["gridRow"];// I am passing the data table in a session    as I am entering the new entry from a pop up window
        dt.GetChanges(DataRowState.Modified);

        sda1.Fill(dt);

        sda1.Update(dt);   
    } 
```

有趣的是，当我在 dt 中编辑现有条目时，它会编辑（经典 sql 更新），但它从不插入任何添加到数据表中的新条目，甚至不会抛出错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T08:27:48.543

这条线

```
dt.AcceptChanges(); 
```

将数据表中的所有行标记为未更改。

你打电话时

```
dt.GetChanges(DataRowState.Modified); 
```

你只得到在 AcceptChanges() 之后修改的行

此外，要获取添加到数据库中的行，正确的语句将是

```
dt.GetChanges(DataRowState.Added); 
```

但是，正如我所说，由于 AcceptChanges() 调用，这不会返回任何内容。
您应该删除 AcceptChanges() 语句。
另外，我认为您不需要在保存按钮的逻辑中调用它

```
sda1.Fill(dt); 
```

# c# - asp 标签的字符限制最多 1000 个字符

> ID：11879353
> 
> 赞同：1
> 
> 时间：2012-08-09T08:21:13.197
> 
> 标签：c#, asp.net

我想将我的标签限制为最多 1000 个字符。如何做到这一点？请帮忙...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T08:23:45.933

无法限制标签的长度，但由于标签没有用户输入，您可以限制分配给它的字符串属性。

```
string s = "long string...";
if (s.length > 1000){
   s = s.SubString(0, 1000);
}
lblMyLabel.Text = s; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-09T08:28:55.673

Tyr 这段代码：

```
 string str = "Characters...";
 if(str.length > 1000)
 {
    str = str.SubString(0, 1000);
 }
 lbl.Text = str; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-09T08:33:15.983

正如@Curt 已经提到的那样，标签上没有直接的用户交互（例如在文本框上），因此您应该限制服务器上的字符串长度。

作为已经给出的答案的额外信息，这是我使用的代码......

```
public string FormatText(string text, int len, string suffix)
{
    if (len != -1 && text.Length > len)
    {
        int pos = text.LastIndexOfAny(" ,.".ToCharArray(), len);
        if (pos == -1)
            pos = len;
        text = text.Substring(0, pos) + suffix;
    }
    return text;
} 
```

然后你可以调用类似...

```
lblMyLabel.Text = FormatText(myText, 1000, "...") 
```

这样做是阻止单词在中间被砍断，希望能防止不幸的情况。例如，文本可能包含`he is an assistant`它产生的恰好 1000 个字符`he is an ass`。我的代码将输出`he is an...`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-09T08:27:54.127

标签不是输入，但如果您知道它超出了限制，您可以将长度减少到 1000 个字符。

```
const int limit = 1000;
label.Text = label.Text.Length>limit ? label.Text.SubString(0,limit) : label.Text; 
```

假设您的标签称为*标签*

# unity3d - 如何在弹出式窗口中统一显示旋转对象

> ID：11879358
> 
> 赞同：1
> 
> 时间：2012-08-09T08:21:47.307
> 
> 标签：unity3d, uipopover

我需要在我的统一项目中显示，当我单击 GUI.button 时，会打开一个类似窗口的弹出窗口，并显示一个 3D 自定义对象在某个时间间隔内自动旋转。而且我还需要知道是否可以在主场景内的窗口中显示另一个场景（旋转对象），或者我们需要其他东西来创建像弹出框这样的视图？如果可能的话，请提供任何帮助..Thanx..!!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T13:31:44.403

您需要在场景中放置另一台摄像机，并将其放在屏幕的一部分上，以设置 rect 变量。

您也可以通过代码打开/关闭它。

构建远离原始场景的弹出场景，以便主摄像机不包含它或（高级）配置剔除蒙版以过滤渲染对象。

# c++ - c++ 每个实例对象具有特定功能的结构（或类）

> ID：11879363
> 
> 赞同：1
> 
> 时间：2012-08-09T08:22:10.753
> 
> 标签：c++, callback, function-pointers

我需要实现一个结构（或类），其中每个实例都有一个指向特定函数的“指针”。这可能吗？

像这样的东西：

```
struct constrain{

  string                              name;
  int                            direction;
  double evaluate (vector <double> &x_var);
}; 
```

其中*评估*“指向”特定函数，因此当我创建*约束对象时，我可以告诉对象方法**评估*应该指向哪个函数以及何时使用它（例如，我的*约束*对象将包含在 std::矢量）我可以调用特定的函数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T08:28:53.587

考虑使用`std::function`：

```
struct Foo
{
    std::function<double (std::vector<double>)> func;
}; 
```

最好`vector`按照pmr的建议通过引用。这是完整的示例：

```
#include <iostream>
#include <vector>
#include <functional>

struct Foo
{
    std::function<double (const std::vector<double> &)> func;
};

static double calc(const std::vector<double> &params)
{
    return 10.0;
}

int main()
{
    Foo f;
    f.func = calc;

    std::vector<double> v;
    std::cout << f.func(v) << std::endl;

    return 0;
} 
```

如果您的`STL`实现没有`std::function`考虑使用`boost::function`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T08:26:01.680

是的，这是可能的。你需要稍微改变你的定义：

```
struct constrain{

  string                              name;
  int                            direction;
  double  (*evaluate)(vector <double> x_var);
}; 
```

但是，这有点 C-ish 方法。由于您使用的是 c++，因此您可以使用函数对象（带有重载的对象`operator()`）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T08:26:28.470

创建构造函数，其中参数之一是函数指针：

```
constraint::constraint (double (*pFn)(vector <double> x_var))
{
    this->evaluate = pFn
} 
```

在标题中也正确：

```
double  (*evaluate) (vector <double> x_var); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T08:28:19.410

可以使用指向函数或仿函数的指针（例如来自 boost）。

尝试这样的事情：

```
struct constrain{
  string                              name;
  int                            direction;
  double  (*evaluate) (vector <double> &x_var);
}; 
```

或者

```
struct constrain{
  string                              name;
  int                            direction;
  boost::function<double(vector &<double>)> evaluate;
}; 
```

请注意，这不会有任何指向调用它的“对象”的指针，因此您必须添加适当的参数（为了方便起见，可能还需要 typedef ）：

```
struct constrain{
  typedef double  (*callback_t) (constrain *obj, vector <double> &x_var);
  string                              name;
  int                            direction;
  callback_t evaluate_f;

  // helper function
  double evaluate(vector <double> &x_var) {
    return evaluate_f(this, x_var);
  }
}; 
```

检查[http://ideone.com/VlAvD](http://ideone.com/VlAvD)的使用情况。

`boost::function`如果使用and `boost::bind`（`std::*`如果您使用带有 C++11 的编译器，则使用等价物）可能会简单得多：http: [//ideone.com/wF8Bz](http://ideone.com/wF8Bz)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-09T08:29:13.683

是的，我们确实有指向函数的指针一旦你创建了这样一个指针，你就可以**用函数的地址来实例化它**。

例子

```
void my_int_func(int x)
{
    printf( "%d\n", x );
}

int main()
{
    void (*foo)(int); // this is a pointer to a function
    foo = &my_int_func;

    return 0;
} 
```

同样，您可以将结构成员指针用作指向函数的指针

# android - 由于 Proxy-GCM，本地服务器无法向 Android 应用程序发送消息

> ID：11879364
> 
> 赞同：0
> 
> 时间：2012-08-09T08:22:10.730
> 
> 标签：android, proxy, google-cloud-messaging

我尝试从[http://developer.android.com/guide/google/gcm/gs.html实现 GCM](http://developer.android.com/guide/google/gcm/gs.html)

我无法向应用程序发送消息。我将 System.setProperty... 添加到 servlet 和 http.proxyHost=proxy.company.com http.proxyPort=8080 到 catalina.properties 从此页面[Google 云消息传递 GCM 通过代理](https://stackoverflow.com/questions/11444372/google-cloud-messaging-gcm-through-proxy)

Servlet: Sender sender = new Sender(myApiKey);

```
 Message message = new Message.Builder()
                .collapseKey("1")
                .timeToLive(3)
                .delayWhileIdle(true)
                .addData("message", "message is created at builder")
                .build();

                System.setProperty("http.proxyHost", "10.200.125.200");  
                System.setProperty("http.proxyPort", "8080"); 

                Result result = sender.send(message, reGid, 5);
                System.out.println("result of message is "+ result); 
```

GCMIntentService.java：

```
@Override
protected void onMessage(Context arg0, Intent arg1) {
Log.i(TAG, "new message= ");
Toast.makeText(this, arg1.getStringExtra("message"), Toast.LENGTH_SHORT).show();
} 
```

sender.send 不起作用，我认为代理会阻止它。安慰：

```
 A?u 09, 2012 10:55:44 AM org.apache.catalina.core.StandardWrapperValve invoke SEVERE:  Servlet.service() for servlet [servCloud] in context with path [/servletCloud] threw   exception
java.net.ConnectException: Connection timed out: connect
at java.net.DualStackPlainSocketImpl.connect0(Native Method)
at     java.net.DualStackPlainSocketImpl.socketConnect(DualStackPlainSocketImpl.java:69)
at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:339)
at    java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:200)
at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:182)
at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:157)
at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:391)
at java.net.Socket.connect(Socket.java:579)
at sun.security.ssl.SSLSocketImpl.connect(SSLSocketImpl.java:612)
at sun.security.ssl.BaseSSLSocketImpl.connect(BaseSSLSocketImpl.java:160)
at sun.net.NetworkClient.doConnect(NetworkClient.java:180)
at sun.net.www.http.HttpClient.openServer(HttpClient.java:378)
at sun.net.www.http.HttpClient.openServer(HttpClient.java:473)
at sun.net.www.protocol.https.HttpsClient.<init>(HttpsClient.java:270)
at sun.net.www.protocol.https.HttpsClient.New(HttpsClient.java:327)
at sun.net.www.protocol.https.AbstractDelegateHttpsURLConnection.getNewHttpClient(AbstractDelegateHttpsURLConnection.java:199)
at sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java:950)
at sun.net.www.protocol.https.AbstractDelegateHttpsURLConnection.connect(AbstractDelegateHttpsURLConnection.java:177)
at sun.net.www.protocol.http.HttpURLConnection.getOutputStream(HttpURLConnection.java:1090)
at sun.net.www.protocol.https.HttpsURLConnectionImpl.getOutputStream(HttpsURLConnectionImpl.java:250)
at com.google.android.gcm.server.Sender.post(Sender.java:476)
at com.google.android.gcm.server.Sender.post(Sender.java:455)
at com.google.android.gcm.server.Sender.sendNoRetry(Sender.java:170)
at com.google.android.gcm.server.Sender.send(Sender.java:121)
at servCloud.doGet(servCloud.java:85)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1001)
at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:585)
at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310)
at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
at java.lang.Thread.run(Thread.java:722) 
```

我如何设置 sender.send 或通过代理？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T14:17:44.290

GCM 端点服务器使用 HTTPS。您可以尝试以下系统属性：

```
System.setProperty("https.proxyHost", "10.200.125.200");  
System.setProperty("https.proxyPort", "8080"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-19T09:54:49.310

我遇到了同样的问题，这里提到的 System.setProperty 没有帮助。

我在下面创建了类并重构了代码以使用 ProxySender 而不是 Sender 类，它最终可以工作。

```
import java.io.IOException;
import java.net.HttpURLConnection;
import java.net.InetSocketAddress;
import java.net.Proxy;
import java.net.URL;

import com.google.android.gcm.server.Sender;

public class ProxySender extends Sender {

    public ProxySender(String key) {
        super(key);
        // TODO Auto-generated constructor stub
    }

    @Override
    protected HttpURLConnection getConnection(String url) throws IOException {

        Proxy proxy = new Proxy(Proxy.Type.HTTP, new InetSocketAddress("1.2.3.4.", 8080));

        HttpURLConnection conn = (HttpURLConnection) new URL(url).openConnection(proxy);

        return conn;

    }
} 
```

记得修改代理服务器和端口。

# python - Windows上Pyserial的非阻塞/忙等待使用：如何实时监控多个串口？

> ID：11879366
> 
> 赞同：2
> 
> 时间：2012-08-09T08:22:14.873
> 
> 标签：python, windows, serial-port, nonblocking, pyserial

我有一个硬件测试设置，其中多达 255 个节点通过 USB 连接的虚拟 COM 端口向我的 Windows 系统发送跟踪消息。实际上，我使用了一个小的 Python 脚本，它在所有打开的串行端口上运行一个轮询循环，并执行一个零超时的 readline。读取的行与添加的 COM 端口源和时间戳一起打印到控制台。这几乎是实时的。但是您可以想象，CPU 使用率非常高。因此，我一直在寻找一种无需轮询即可并行实时监控所有 COM 端口的方法。

[PySerial doc](http://pyserial.sourceforge.net/pyserial_api.html) *(look for `nonblocking()`)*说有类似选择界面的 POSIX，但仅在 UNIX 操作系统下。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T09:11:02.097

我会看看扭曲的，它可能会奏效。它有一个由反应器运行的串行端口监视器。（扭曲是异步的）。

我有一个小型 Web 服务器监控并与 JeeNode（arduino 克隆）通信，接收数据馈送以及将数据发送到远程无线节点。你可以在这里看到这段代码的早期剪辑[https://bitbucket.org/zutesmog/securitynode/src/93e29a7f3e26/SecurityConsole/secweb.py](https://bitbucket.org/zutesmog/securitynode/src/93e29a7f3e26/SecurityConsole/secweb.py)（它有点hacky，但你会明白的。）

然而，这并没有处理任何接近相同流量或端口数量的地方，但它不是轮询，所以我不确定它是否会扩展，但它当然值得一试。

# java - 与 Hadoop MapReduce 的成对比较

> ID：11879369
> 
> 赞同：1
> 
> 时间：2012-08-09T08:22:26.730
> 
> 标签：java, hadoop, mapreduce, amazon-emr

我有一个大文本文件（5 GB），每行一个字符串。我需要使用专有算法将每一行与其他每一行进行比较。我是 MapReduce 的新手，但有 Java 经验。给我带来麻烦的问题是创建单独的地图输入。文档似乎是在假设每一行不依赖于任何其他行的情况下编写的。这样做的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T10:25:03.377

以下是一些关于使用 Hadoop 进行连接的有趣论文：

[http://www.inf.ed.ac.uk/publications/thesis/online/IM100859.pdf](http://www.inf.ed.ac.uk/publications/thesis/online/IM100859.pdf) http://www.inf.ed.ac.uk/publications/thesis/online/IM090720.pdf [http:// pages.cs.wisc.edu/~jignesh/publ/hadoopjoin.pdf](http://pages.cs.wisc.edu/~jignesh/publ/hadoopjoin.pdf)

我认为您还应该研究 Hadoop mapred join 框架：

[http://hadoop.apache.org/common/docs/r0.20.0/api/org/apache/hadoop/mapred/join/package-summary.html](http://hadoop.apache.org/common/docs/r0.20.0/api/org/apache/hadoop/mapred/join/package-summary.html)

# jquery - jQuery下拉问题

> ID：11879373
> 
> 赞同：0
> 
> 时间：2012-08-09T08:22:47.533
> 
> 标签：jquery, html, css, class, drop-down-menu

我有一个下拉菜单；当我单击要显示子菜单的项目时，当我在另一个菜单上单击或模糊时，它应该通过删除下拉类来删除上一个子菜单。但它不起作用。

**jQuery**

```
$('.menu_item > li ').click(function(){
    $('.menu_item .drop-down').removeClass();
    $(this).find('span').addClass('drop-down');
});

$('.menu_item .drop-down').blur(function(){
    $('.menu_item .drop-down').removeClass();
    return false;
}); 
```

**HTML**

```
<nav id="menu_wrap" class="container">
    <a href="index.php" class="logo"></a>
    <a href="#" id="select_menu" class="active" onclick="open_menu()">Menu</a>
    <ul class="menu_item">
        <li><input type="text" placeholder="Search in here" class="search"></li>
        <li><a href="#">Top Lists</a></li>
        <li><a href="#">Shops</a></li>
        <li><a href="#">Products</a>
            <span>
            <a href="#">Products</a>
            <a href="#">Products</a>
            <a href="#">Products</a>
            <a href="#">Products</a>
            </span>
        </li>
        <li><a href="Signup.php">Create Account</a></li>
        <li><a href="Login.php">Log in</a></li>
    </ul>
</nav> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T09:48:13.560

我确定必须有一种更清洁的方法来执行此操作，但这适用于您描述的场景

```
$(document).ready(function() {

    $(document).click(function(e) {
        var $target = $(e.target);
        $('.menu_item .drop-down').removeClass();
        if ($target.parents().is('.menu_item > li')) {
            $target.parent().find('span').addClass('drop-down');
            if ($target.parent().is('span')) {
                $target.parent().addClass('drop-down');
            }
        }
    });

});​ 
```

和完整性的[小提琴](http://jsfiddle.net/chrismoutray/CZ4Fn/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T10:39:22.777

试试这个

[看演示](http://codebins.com/bin/4ldqp8n)

```
 $('.menu_item li').click(function() {
     $('.menu_item .drop-down').removeClass();
     $(this).find('span').addClass('drop-down');

 });

 $('.menu_item li').mouseleave(function() {
     if ($(this).find('span').length > 0) {
         $(this).find('span').removeClass('drop-down');
     }
 }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T09:26:54.437

如果我说得对，这可能是解决方案：

```
$('.menu_item > li ').click(function(){
    $('ul.menu_item li span').removeClass('drop-down');
    $(this).find('span').addClass('drop-down');
});

$('.menu_item .drop-down').blur(function(){
    $('ul.menu_item li span').removeClass('drop-down');
    return false;
}); 
```

`drop-down`这会从`span`您的班级中删除所有班级`menu_item`。

如果您`drop-down`只需要关闭前一个，则需要通过适当的选择器来选择它，从`$(this)`.

编辑：

现在我知道你在做什么了！您需要选择要关闭下拉菜单（部分，div）的所有元素，除了您希望`drop-down`添加类的元素（在您的情况下：）`$('.menu_item > li')`。为此，添加另一个 jQuery click 函数并相应地更改选择器：

```
$('div').not('.menu_item li').click(function(){
        $('.menu_item .drop-down').removeClass('drop-down');
}); 
```

# wcf - 如果我没有“如何诊断 WCF 请求错误” " 我的 Web.Config 中的节点？

> ID：11879374
> 
> 赞同：4
> 
> 时间：2012-08-09T08:22:51.093
> 
> 标签：wcf, web-config

在测试 WCF Web 服务时看到可怕的**请求错误页面？**

![在此处输入图像描述](../Images/c4ffaac73752dc9a64de852163c0b519.png)

好吧，不用担心，因为这个 StackOverflow 答案向您展示了如何打开详细的错误显示：[WCF 数据服务 - 如何诊断请求错误？](https://stackoverflow.com/a/2313046/180430)

但是……等等*，*我们没有一个看起来像那样的 Web.Config。

我们的只有一个`system.serviceModel`，就是这样。

```
<system.serviceModel>
    <serviceHostingEnvironment aspNetCompatibilityEnabled="true"></serviceHostingEnvironment>
    <standardEndpoints>
        <webHttpEndpoint>
            <standardEndpoint name="" helpEnabled="true" automaticFormatSelectionEnabled="true"></standardEndpoint>
        </webHttpEndpoint>
    </standardEndpoints>
</system.serviceModel> 
```

*如果*我们选择它并简单地添加以下内容：

```
<behaviors>
    <serviceBehaviors>
        <behavior name="DataServiceBehavior">
            <serviceDebug includeExceptionDetailInFaults="true"/>
        </behavior>
    </serviceBehaviors>
</behaviors> 
```

到最后，男孩是不是很不高兴：

![在此处输入图像描述](../Images/515f64304220d8035b56f54d90f3dece.png)

## 更新/编辑

根据@burning_LEGION 和@Chris 的回答和评论（见下文），我现在有一个如下`Web.Config`所示的内容：

```
 <system.serviceModel>
    <serviceHostingEnvironment aspNetCompatibilityEnabled="true"></serviceHostingEnvironment>
      <standardEndpoints>
    <webHttpEndpoint>
          <standardEndpoint name="" helpEnabled="true" automaticFormatSelectionEnabled="true" behaviorConfiguration="DataServiceBehavior"></standardEndpoint>
    </webHttpEndpoint>
      </standardEndpoints>

      <behaviors>
    <serviceBehaviors>
      <behavior name="DataServiceBehavior">
        <serviceDebug includeExceptionDetailInFaults="true"/>
      </behavior>
    </serviceBehaviors>
      </behaviors>
  </system.serviceModel> 
```

但我收到服务器错误：

> 解析器错误消息：无法识别的属性“behaviorConfiguration”。请注意，属性名称区分大小写。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T09:35:41.763

感谢 Chris 和burning_Legion 指路。这是`system.serviceModel`我最终得到的结果，它成功地显示了错误详细信息。

这是每个@burning_LEGION 的回答，但在行为上没有 name 属性：

```
 <system.serviceModel>
    <serviceHostingEnvironment aspNetCompatibilityEnabled="true"></serviceHostingEnvironment>
      <standardEndpoints>
    <webHttpEndpoint>
          <standardEndpoint name="" helpEnabled="true" automaticFormatSelectionEnabled="true"></standardEndpoint>
    </webHttpEndpoint>
      </standardEndpoints>

    <behaviors>
      <serviceBehaviors>
        <behavior>
          <serviceMetadata httpGetEnabled="true"/>
          <serviceDebug includeExceptionDetailInFaults="true" />
        </behavior>
      </serviceBehaviors>
    </behaviors>

  </system.serviceModel> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-09T08:25:03.820

`behaviors`必须在标签中`system.serviceModel`

```
<system.serviceModel>
    <serviceHostingEnvironment aspNetCompatibilityEnabled="true"></serviceHostingEnvironment>
    <standardEndpoints>
        <webHttpEndpoint>
            <standardEndpoint name="" helpEnabled="true" automaticFormatSelectionEnabled="true"></standardEndpoint>
        </webHttpEndpoint>
    </standardEndpoints>   
    <behaviors>
       <serviceBehaviors>
           <behavior name="DataServiceBehavior">
              <serviceDebug includeExceptionDetailInFaults="true"/>
           </behavior>
       </serviceBehaviors>
    </behaviors> 
</system.serviceModel> 
```

# git - 使用 git 删除本地分支上的文件

> ID：11879376
> 
> 赞同：2
> 
> 时间：2012-08-09T08:22:55.577
> 
> 标签：git, branch

我对一些已经存在的文件进行了一些更改。然后我在其中添加了一个新文件

```
git add newfilename 
```

我还没有提交，现在我想删除这个新文件。我无法进行重置，因为它也会重置我不想要的所有其他文件更改。

我尝试`git checkout newfilename`了通常的猜测`delete`，`rm`但也没有帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T08:36:18.797

`git reset newfilename`将从索引中删除它，然后您可以照常删除它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T08:24:11.377

试一试

```
git rm --cached newfilename 
```

至少将其从索引中删除。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-20T10:00:22.533

您可以使用以下命令从分支中删除文件：

`$git rm file_name`

# apache-flex - Flex：无法以编程方式设置 headerRenderer

> ID：11879380
> 
> 赞同：1
> 
> 时间：2012-08-09T08:23:18.247
> 
> 标签：apache-flex, dynamic, datagrid, renderer, flex-spark

我需要以编程方式为我的 spark 数据网格设置 headerRenderer，因为我需要为其分配一些属性（开始和结束时间）。此数据是从数据库中获取的，并且需要在加载后分配给此 headerrenderer。

虽然以编程方式设置我的 itemRenderer 没有问题，但我发现无法为 headerRenderer 做同样的事情。

这是一段简化的代码：

主要的

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
               xmlns:s="library://ns.adobe.com/flex/spark" 
               xmlns:mx="library://ns.adobe.com/flex/mx" minWidth="955" minHeight="600">
    <fx:Script>
        <![CDATA[           
            protected function button1_clickHandler(event:MouseEvent):void
            {
                customHeaderColumn.headerRenderer = new ClassFactory(myHeaderRenderer); 
                customHeaderColumn.itemRenderer = new ClassFactory(myItemRenderer);
            }

        ]]>
    </fx:Script>
    <s:layout>
        <s:VerticalLayout />
    </s:layout>
    <s:DataGrid width="100%">
        <s:dataProvider>
            <s:ArrayList>
                <fx:Object name="record"/>
            </s:ArrayList>
        </s:dataProvider>
        <s:columns>
            <s:ArrayList>
                <s:GridColumn id="customHeaderColumn" headerText="Column 1"/>
            </s:ArrayList>
        </s:columns>
    </s:DataGrid>
    <s:Button label="change" click="button1_clickHandler(event)"/>
</s:Application> 
```

我的项目渲染器

```
<?xml version="1.0" encoding="utf-8"?>
<s:GridItemRenderer xmlns:fx="http://ns.adobe.com/mxml/2009" 
                    xmlns:s="library://ns.adobe.com/flex/spark" 
                    xmlns:mx="library://ns.adobe.com/flex/mx" clipAndEnableScrolling="true">
    <s:Label top="9" left="7" text="item"/>
</s:GridItemRenderer> 
```

myHeaderRenderer

```
<?xml version="1.0" encoding="utf-8"?>
<s:GridItemRenderer xmlns:fx="http://ns.adobe.com/mxml/2009" 
                    xmlns:s="library://ns.adobe.com/flex/spark" 
                    xmlns:mx="library://ns.adobe.com/flex/mx" clipAndEnableScrolling="true">
    <s:Label top="9" left="7" text="header"/>
</s:GridItemRenderer> 
```

单击按钮时，您可以看到 itemRenderer 发生变化，但是 headerRenderer 保持不变。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T13:08:52.157

看起来你可以通过执行来强制它：

```
myDataGrid.columnHeaderGroup.layout.clearVirtualLayoutCache(); 
```

我从 DataGrid.as set columns 方法中复制了这一行：

```
public function set columns(value:IList):void
{
    if (setGridProperty("columns", value))
    {
        if (columnHeaderGroup)
        {
            columnHeaderGroup.layout.clearVirtualLayoutCache();
            columnHeaderGroup.invalidateSize();
            columnHeaderGroup.invalidateDisplayList();
        }

        dispatchChangeEvent("columnsChanged");
    }
} 
```

# python - 循环列表时的累积加法

> ID：11879390
> 
> 赞同：2
> 
> 时间：2012-08-09T08:23:59.237
> 
> 标签：python, list, for-loop, cumulative-sum

我有一个很大的列表，其中的摘录如下：

```
power = [
    ['1234-43211', [5, 6, -4, 11, 22]], 
    ['1234-783411', [43, -5, 0, 0, -1]], 
    ['1234-537611', [3, 0, -5, -6, 0]], 
    ['1567-345411', [4, 6, 8, 3, 3]], 
    ['1567-998711', [1, 2, 1, -4, 5]]
] 
```

字符串中的第一个数字是重要的数字，也是我希望将我的添加分开的数字。即我只想累积添加每个站点内的值（并返回每个奇异的累积添加），从不添加来自两个不同站点的值。

我的目标是遍历这个列表并累积添加一个站的 int 值，返回每个添加，然后在列表中检测到下一个站时重新开始。

期望的结果：

```
new = [
    [48, 1, -4, 11, -21], 
    [ 51, 1, -9, 5, -21], '### End of '1234' ### '
    [5,  8, 9, -1, 8], '### End of 1567 ###'
] or something similar to this 
```

我尝试了以下方法：

```
for i in range(len(power)-1):
    front_num_1 = power[i][0].split('-')[0]
    front_num_2 = power[i+1][0].split('-')[0]
    station = '%s' % (front_num_1)
    j = power[i][1]
    k = power[i+1][1]

    if front_num_1 == front_num_2:
        print [k + j for k, j in zip(j, k)]

    elif front_num_1 != front_num_2:
        print  '#####################################

    else:
        print 'END' 
```

然而，这种添加不是累积的，因此没有用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T09:16:31.250

```
from itertools import groupby, islice

def accumulate(iterable): # in py 3 use itertools.accumulate
    ''' Simplified version of accumulate from python 3'''
    it = iter(iterable)
    total = next(it)
    yield total
    for element in it:
        total += element
        yield total

power = [
    ['1234-4321-1', [5, 6, -4, 11, 22]],
    ['1234-7834-1', [43, -5, 0, 0, -1]],
    ['1234-5376-1', [3, 0, -5, -6, 0]],
    ['1567-3454-1', [4, 6, 8, 3, 3]],
    ['1567-9987-1-', [1, 2, 1, -4, 5]]
]

groups = ((k, (nums for station, nums in g))
          for k, g in
          groupby(power, lambda x: x[0].partition('-')[0]))

new = [(station, zip(*(islice(accumulate(col), 1, None) for col in zip(*nums))))
        for station, nums in groups]

print new    

print dict(new) # or as a dictionary which is unordered 
```

**输出**

```
[('1234', [(48, 1, -4, 11, 21), (51, 1, -9, 5, 21)]), ('1567', [(5, 8, 9, -1, 8)])]
{'1234': [(48, 1, -4, 11, 21), (51, 1, -9, 5, 21)], '1567': [(5, 8, 9, -1, 8)]} 
```

**这是如何工作的：**

首先，列表根据使用的电台进行分组`itertools.groupby`。

例如。

```
nums = [[5, 6, -4, 11, 22], 
        [43, -5, 0, 0, -1], 
        [3, 0, -5, -6, 0]] 
```

是第一组。如您所见，它是矩阵的形式。

[`zip(*nums)`](https://stackoverflow.com/questions/4937491/matrix-transpose-in-python)使用参数解包转置矩阵。它调用

```
zip([5, 6, -4, 11, 22], [43, -5, 0, 0, -1], [3, 0, -5, -6, 0]) 
```

创建列表：

```
cols = [(5, 43, 3), (6, -5, 0), (-4, 0, -5), (11, 0, -6), (22, -1, 0)] 
```

然后在每一列上调用累积，如下所示：

```
>>> [list(accumulate(col)) for col in cols]
[[5, 48, 51], [6, 1, 1], [-4, -4, -9], [11, 11, 5], [22, 21, 21]] 
```

正如你所看到的，这里每个列表中的第一个元素不是必需的，因此`islice`用于从索引中获取元素，`1`直到 end( `None`)。看起来是这样的：

```
>>> [list(islice(accumulate(col), 1, None)) for col in cols]
[[48, 51], [1, 1], [-4, -9], [11, 5], [21, 21]] 
```

现在我们只需要将其转回即可。

```
>>> zip(*(islice(accumulate(col), 1, None) for col in cols))
[(48, 1, -4, 11, 21), (51, 1, -9, 5, 21)] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T08:49:59.440

如果您将问题分解成更小的部分，将会有所帮助。我似乎理解您想要 1）根据某些标准拆分列表，然后 2）获取每个子列表的累积总和（将每个元素视为向量）。

例如：

```
stationList = [
 ['1234-4321-1', [5, 6, -4, 11, 22]], 
 ['1234-7834-1', [43, -5, 0, 0, -1]], 
 ['1234-5376-1', [3, 0, -5, -6, 0]], 
 ['1567-3454-1', [4, 6, 8, 3, 3]], 
 ['1567-9987-1-', [1, 2, 1, -4, 5]]
] 
```

变成：

```
{'1234-4321-1': [
    <5, 6, -4, 11, 22>, 
    <5, 6, -4, 11, 22> + <43, -5, 0, 0, -1>,
    <5, 6, -4, 11, 22> + <43, -5, 0, 0, -1> + <3, 0, -5, -6, 0>
 ], 
 '1567-3454-1': [
    <4, 6, 8, 3, 3>, 
    <4, 6, 8, 3, 3> + <1, 2, 1, -4, 5>
 ]
} 
```

（我`<...>`用来表示一个假设的`Vector`对象，或者仅仅将列表视为一个向量。）

* * *

**解决方案**

```
from itertools import * 
```

1) 要根据某些标准拆分列表，请[在此处使用 itertools.groupby: 文档](http://docs.python.org/library/itertools.html#itertools.groupby)。或者写一个生成器函数。

```
getStation = lambda x: x[0].split('-')[0]
def groupby_station(inputList):
    return groupby(inputList, key=getStation) 
```

2) 累积和可以写成生成函数。您可以使用`numpy`，也可以自己编写。

```
def listAdd(*lists):
    """
        listAdd([1,2,3], [10,20,30]) -> [11,22,33]
        listAdd([1,2,3], []) -> [1,2,3]
    """
    return [sum(xs) for xs in zip_longest(*lists, fillvalue=0)]

def cumSum(lists):
    """
        cumSum([1,2],[10,20],[100,200]) -> ([1,2],[11,22],[111,222])
    """
    total = []
    for list in lists:
        total = listAdd(total, list)
        yield total 
```

现在只需将两者结合起来：

```
{key:cumSum(*lists) for key,lists in groupby_station(inputList)} 
```

请注意，我对累积和的定义与您的略有不同；您可以修改`cumSum`函数以匹配您的定义。

# android - 应用程序意外停止

> ID：11879394
> 
> 赞同：0
> 
> 时间：2012-08-09T08:24:12.563
> 
> 标签：android, android-emulator

当用户单击按钮时，我正在尝试制作一个播放随机声音的简单应用程序。该应用程序启动时没有问题，它会在崩溃之前播放随机数量的声音。我找不到任何类似的问题/问题，这就是我发布这个的原因。

这是我的日志：

```
08-09 10:10:16.706: D/dalvikvm(265): GC freed 571 objects / 49008 bytes in 128ms
08-09 10:10:18.896: W/MediaPlayer(265): info/warning (1, 44)
08-09 10:10:19.036: I/MediaPlayer(265): Info (1,44)
08-09 10:10:19.036: W/MediaPlayer(265): info/warning (1, 44)
08-09 10:10:19.036: I/MediaPlayer(265): Info (1,44)
08-09 10:10:19.236: W/MediaPlayer(265): info/warning (1, 44)
08-09 10:10:19.336: I/MediaPlayer(265): Info (1,44)
08-09 10:10:19.346: W/MediaPlayer(265): info/warning (1, 44)
08-09 10:10:19.346: I/MediaPlayer(265): Info (1,44)
08-09 10:10:19.746: W/MediaPlayer(265): info/warning (1, 44)
08-09 10:10:19.856: I/MediaPlayer(265): Info (1,44)
08-09 10:10:20.016: W/MediaPlayer(265): info/warning (1, 44)
08-09 10:10:20.166: I/MediaPlayer(265): Info (1,44)
08-09 10:10:20.166: W/MediaPlayer(265): info/warning (1, 44)
08-09 10:10:20.166: I/MediaPlayer(265): Info (1,44)
08-09 10:10:20.396: W/MediaPlayer(265): info/warning (1, 44)
08-09 10:10:20.556: I/MediaPlayer(265): Info (1,44)
08-09 10:10:20.566: W/MediaPlayer(265): info/warning (1, 44)
08-09 10:10:20.566: I/MediaPlayer(265): Info (1,44)
08-09 10:10:20.766: W/MediaPlayer(265): info/warning (1, 44)
08-09 10:10:20.907: I/MediaPlayer(265): Info (1,44)
08-09 10:10:20.907: W/MediaPlayer(265): info/warning (1, 44)
08-09 10:10:20.916: I/MediaPlayer(265): Info (1,44)
08-09 10:10:21.116: W/MediaPlayer(265): info/warning (1, 44)
08-09 10:10:21.236: I/MediaPlayer(265): Info (1,44)
08-09 10:10:21.246: W/MediaPlayer(265): info/warning (1, 44)
08-09 10:10:21.246: I/MediaPlayer(265): Info (1,44)
08-09 10:10:21.406: W/MediaPlayer(265): info/warning (1, 26)
08-09 10:10:21.427: E/MediaPlayer(265): error (1, -17)
08-09 10:10:21.447: D/MediaPlayer(265): create failed:
08-09 10:10:21.447: D/MediaPlayer(265): java.io.IOException: Prepare failed.: status=0x1
08-09 10:10:21.447: D/MediaPlayer(265):     at android.media.MediaPlayer.prepare(Native  Method)
08-09 10:10:21.447: D/MediaPlayer(265):     at     android.media.MediaPlayer.create(MediaPlayer.java:644)
08-09 10:10:21.447: D/MediaPlayer(265):     at  com.moer.playsound.MainActivity$1.onClick(MainActivity.java:40)
08-09 10:10:21.447: D/MediaPlayer(265):     at  android.view.View.performClick(View.java:2364)
08-09 10:10:21.447: D/MediaPlayer(265):     at android.view.View.onTouchEvent(View.java:4179)
08-09 10:10:21.447: D/MediaPlayer(265):     at android.widget.TextView.onTouchEvent(TextView.java:6541)
08-09 10:10:21.447: D/MediaPlayer(265):     at android.view.View.dispatchTouchEvent(View.java:3709)
08-09 10:10:21.447: D/MediaPlayer(265):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
08-09 10:10:21.447: D/MediaPlayer(265):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
08-09 10:10:21.447: D/MediaPlayer(265):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
08-09 10:10:21.447: D/MediaPlayer(265):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
08-09 10:10:21.447: D/MediaPlayer(265):     at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchTouchEvent(PhoneWindow.j ava:1659)
08-09 10:10:21.447: D/MediaPlayer(265):     at com.android.internal.policy.impl.PhoneWindow.superDispatchTouchEvent(PhoneWindow.java:1107)
08-09 10:10:21.447: D/MediaPlayer(265):     at android.app.Activity.dispatchTouchEvent(Activity.java:2061)
08-09 10:10:21.447: D/MediaPlayer(265):     at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:1 643)
08-09 10:10:21.447: D/MediaPlayer(265):     at android.view.ViewRoot.handleMessage(ViewRoot.java:1691)
08-09 10:10:21.447: D/MediaPlayer(265):     at android.os.Handler.dispatchMessage(Handler.java:99)
08-09 10:10:21.447: D/MediaPlayer(265):     at android.os.Looper.loop(Looper.java:123)
08-09 10:10:21.447: D/MediaPlayer(265):     at android.app.ActivityThread.main(ActivityThread.java:4363)
08-09 10:10:21.447: D/MediaPlayer(265):     at java.lang.reflect.Method.invokeNative(Native Method)
08-09 10:10:21.447: D/MediaPlayer(265):     at java.lang.reflect.Method.invoke(Method.java:521)
08-09 10:10:21.447: D/MediaPlayer(265):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
08-09 10:10:21.447: D/MediaPlayer(265):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
08-09 10:10:21.447: D/MediaPlayer(265):     at dalvik.system.NativeStart.main(Native Method)
08-09 10:10:21.466: D/AndroidRuntime(265): Shutting down VM
08-09 10:10:21.466: W/dalvikvm(265): threadid=3: thread exiting with uncaught exception (group=0x4001b188)
08-09 10:10:21.476: E/AndroidRuntime(265): Uncaught handler: thread main exiting due to uncaught exception
08-09 10:10:21.496: E/AndroidRuntime(265): java.lang.NullPointerException
08-09 10:10:21.496: E/AndroidRuntime(265):  at com.moer.playsound.MainActivity$1.onClick(MainActivity.java:41)
08-09 10:10:21.496: E/AndroidRuntime(265):  at android.view.View.performClick(View.java:2364)
08-09 10:10:21.496: E/AndroidRuntime(265):  at android.view.View.onTouchEvent(View.java:4179)
08-09 10:10:21.496: E/AndroidRuntime(265):  at android.widget.TextView.onTouchEvent(TextView.java:6541)
08-09 10:10:21.496: E/AndroidRuntime(265):  at android.view.View.dispatchTouchEvent(View.java:3709)
08-09 10:10:21.496: E/AndroidRuntime(265):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
08-09 10:10:21.496: E/AndroidRuntime(265):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
08-09 10:10:21.496: E/AndroidRuntime(265):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
08-09 10:10:21.496: E/AndroidRuntime(265):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
08-09 10:10:21.496: E/AndroidRuntime(265):  at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchTouchEvent(PhoneWindow.java:1659)
08-09 10:10:21.496: E/AndroidRuntime(265):  at com.android.internal.policy.impl.PhoneWindow.superDispatchTouchEvent(PhoneWindow.java:1107)
08-09 10:10:21.496: E/AndroidRuntime(265):  at android.app.Activity.dispatchTouchEvent(Activity.java:2061)
08-09 10:10:21.496: E/AndroidRuntime(265):  at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:1643)
08-09 10:10:21.496: E/AndroidRuntime(265):  at android.view.ViewRoot.handleMessage(ViewRoot.java:1691)
08-09 10:10:21.496: E/AndroidRuntime(265):  at android.os.Handler.dispatchMessage(Handler.java:99)
08-09 10:10:21.496: E/AndroidRuntime(265):  at android.os.Looper.loop(Looper.java:123)
08-09 10:10:21.496: E/AndroidRuntime(265):  at android.app.ActivityThread.main(ActivityThread.java:4363)
08-09 10:10:21.496: E/AndroidRuntime(265):  at java.lang.reflect.Method.invokeNative(Native Method)
08-09 10:10:21.496: E/AndroidRuntime(265):  at java.lang.reflect.Method.invoke(Method.java:521)
08-09 10:10:21.496: E/AndroidRuntime(265):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
08-09 10:10:21.496: E/AndroidRuntime(265):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
08-09 10:10:21.496: E/AndroidRuntime(265):  at dalvik.system.NativeStart.main(Native Method)
08-09 10:10:21.516: I/dalvikvm(265): threadid=7: reacting to signal 3
08-09 10:10:21.726: I/dalvikvm(265): Wrote stack trace to '/data/anr/traces.txt'
08-09 10:10:34.156: I/Process(265): Sending signal. PID: 265 SIG: 9 
```

这是代码：

```
package com.moer.playsound;

import android.media.MediaPlayer;
import android.os.Bundle;
import android.app.Activity;
import android.view.View;
import android.widget.Button;
import java.util.Random;
import android.view.KeyEvent;
import android.view.View.OnClickListener;

public class MainActivity extends Activity {

private final int NUM_SOUND_FILES = 8;

private int mfile[] = new int[NUM_SOUND_FILES];
private Random rnd = new Random();
private MediaPlayer mp;

@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.activity_main);        

mfile[0] = R.raw.sound1;  
mfile[1] = R.raw.sound2;  
mfile[2] = R.raw.sound3;
mfile[3] = R.raw.sound4;
mfile[4] = R.raw.sound5;
mfile[5] = R.raw.sound6;
mfile[6] = R.raw.sound7;
mfile[7] = R.raw.sound8;

Button button1 = (Button) findViewById(R.id.button1);
  button1.setOnClickListener(new OnClickListener() {
  public void onClick(View v) {
     mp = MediaPlayer.create(MainActivity.this, mfile[rnd.nextInt(NUM_SOUND_FILES)]);
     mp.seekTo(0);
     mp.start(); 
   }});

} 
@Override
public boolean onKeyDown(int keyCode, KeyEvent event)  {
    if (keyCode == KeyEvent.KEYCODE_BACK) {
        finish();
 return true;
  }
return false;
}
} 
```

我尝试改用 wav 格式并减少使用的文件数量，但它没有做任何事情。我是新来的，所以任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T08:57:44.260

嗨试试这个，

```
import java.util.Random;

import android.app.Activity;
import android.media.MediaPlayer;
import android.os.Bundle;
import android.util.Log;
import android.view.KeyEvent;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.Toast;

public class MainActivity extends Activity {

    private static final int[] SOUNDS = new int[] { R.raw.sound1, R.raw.sound2,
            R.raw.sound3, R.raw.sound4, R.raw.sound5, R.raw.sound6,
            R.raw.sound7, R.raw.sound8 };

    // private int mfile[] = new int[NUM_SOUND_FILES];
    private Random rnd = new Random();
    private MediaPlayer mp;
    int flag = 0;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        Button button1 = (Button) findViewById(R.id.button1);
        button1.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {

                if (flag == 0) {
                    Log.v("Flag Values is", flag + "");
                    audioPlaying();
                } else {
                    Toast.makeText(getApplicationContext(),
                            "player is currently Playing", Toast.LENGTH_LONG)
                            .show();
                    mp.stop();
                    mp.release();
                    flag = 0;
                    audioPlaying();
                }

            }
        });
        // Button button2 = (Button) findViewById(R.id.button2);
        // button2.setOnClickListener(new OnClickListener() {
        // public void onClick(View v) {
        //
        // mp.stop();
        // mp.release();
        //
        // }
        // });
    }

    protected void audioPlaying() {
        // TODO Auto-generated method stub
        int sndToPlay = rnd.nextInt(SOUNDS.length);
        mp = MediaPlayer.create(MainActivity.this, SOUNDS[sndToPlay]);
        mp.seekTo(0);
        mp.start();
        flag++;
    }

    @Override
    public boolean onKeyDown(int keyCode, KeyEvent event) {
        if (keyCode == KeyEvent.KEYCODE_BACK) {

            finish();
            return true;
        }
        return false;
    }

    @Override
    protected void onStop() {
        super.onStop();
        // deallocate all memory
        if (mp != null) {
            if (mp.isPlaying()) {
                mp.stop();
            }
            mp.release();
            mp = null;
        }
    }
} 
```

# perl - 使用 DBIx::Class 中的占位符排序

> ID：11879398
> 
> 赞同：3
> 
> 时间：2012-08-09T08:24:29.787
> 
> 标签：perl, dbix-class

`ORDER BY myfunction(col, ?, ?) DESC`使用绑定值生成订单的正确方法是`DBIx::Class`什么？

目前我为此使用文字 SQL，但出于多种原因，这并不是最佳选择。

```
$rs->search(undef, { order_by => \"myfunction(col, $v1, $v2) DESC" }); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T10:25:24.000

像这样的东西：

```
$rs->search(
    undef,
    {
        '+columns' => [{
            'res' => {
                'func' => ['me.col', \['?' => $val1], \['?' => $val2]],
                '-as'  => 'res',
            },
        }],
        'order_by' => {'-desc' => 'res'},
    }
); 
```

将生成（对于 MySQL & `($val1, $val2) = qw(val1 val2)`）：

```
SELECT `me`.`id`, ..., FUNC( `me`.`col`, ?, ? ) AS `res`
    FROM `table` `me`
    ORDER BY `res` DESC:
'val1',
'val2' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T19:07:42.807

我确实设法`DBIx::Class`生成正确的`ORDER BY`. 这是代码：

```
$rs->search(undef, {
    order_by => \[
        'myfunction(mycol, ?, ?) DESC', map [dummy => $_], $v1, $v2
    ]
}); 
```

# javascript - 图像滑块中的分页问题

> ID：11879410
> 
> 赞同：0
> 
> 时间：2012-08-09T08:25:10.623
> 
> 标签：javascript, jquery, image, slider

最后我结束了这个。但是有一个小问题没有得到如何解决它。这是到目前为止我尝试过的链接

[http://jsfiddle.net/QNZDX/4/](http://jsfiddle.net/QNZDX/4/)

我的 Xml 中有许多图像，因此将显示黄色的小正方形。

如果当时我的 XML 仅包含一张图像，则不应显示小黄色正方形，并且图像和文本的淡入、淡出效果也必须禁用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T08:44:21.487

如果我理解正确，您只需要使用您的`maximages`变量来构建构建黄色正方形和之前`fadeIn`和`fadeOut`效果的条件。

检查这个：http: [//jsfiddle.net/xDfDv/](http://jsfiddle.net/xDfDv/)

# java - BlackBerry Messenger 集成：生产环境的 UUID

> ID：11879413
> 
> 赞同：1
> 
> 时间：2012-08-09T08:25:21.527
> 
> 标签：java, blackberry, appworld, bb-messenger

我一直在阅读 BBM SDK 示例和开发指南。对于使用 BBM 平台服务的应用程序，它应该首先注册（这是对 RIM 服务器的调用以请求访问）：

[BBMPlatformManager.register(BBMPlatformApplication)](http://www.blackberry.com/developers/docs/bbm/1.3.0api/net/rim/blackberry/api/bbm/platform/BBMPlatformManager.html#register%28net.rim.blackberry.api.bbm.platform.BBMPlatformApplication%29)

的实例[`BBMPlatformApplication`](http://www.blackberry.com/developers/docs/bbm/1.3.0api/net/rim/blackberry/api/bbm/platform/BBMPlatformApplication.html)作为参数传递。在示例中，创建了一个实例，将 UUID 字符串参数传递给构造函数：

```
 /**
     * An UUID is used to uniquely identify the application in the test environment
     * before the application is available in AppWorld. If the application exists in
     * AppWorld, the UUID will not be used to identify the application.
     *
     * To run this app, you should generate a different UUID, because there is a
     * limit to the number of users who can share the same UUID.
     * Search for "UUID Generator" on the web for instructions to generate a UUID.
     *
     * For instance, browse to:
     *     http://www.uuidgenerator.com/
     * and copy a UUID in the 8-4-4-4-12 format on the left side of the page.
     */
    private static final String UUID = "";

    /**
     * BBMPlatformApplication serves to provide certain properties of the application
     * to the BBM Social Platform. It is used as a parameter inBBMPlatformManager.register().
     *
     * If your application wants to be invoked in a non-default way, e.g. when
     * you have multiple entry points, you need to subclass from BBMPlatformApplication
     * and override certain methods.
     */
    private final BBMPlatformApplication _bbmApp = new BBMPlatformApplication(UUID); 
```

阅读评论，似乎只有在为“测试环境”编译时才需要 UUID（我猜这意味着并发用户数量有限）。但是，它没有解释如何为将要在 App World 中发布的应用程序实例化该类。

在[在线开发指南示例](http://docs.blackberry.com/en/developers/deliverables/36637/Register_your_app_with_the_BBM_Platform_1387557_11.jsp#CS_Registering_your_app_with_the_BBM_platform_1478521_11)中，`BBMPlatformApplication`被扩展，并再次在构造函数中将 UUID 传递给 super：

```
private class MyBBMAppPlugin extends BBMPlatformApplication
{
    public MyBBMAppPlugin()
    {
        super( "Insert your UUID here" );
    }
} 
```

App World 环境是否需要 UUID？如果有，提交应用后如何获取？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T10:13:53.863

UUID 用于唯一标识测试/预生产环境中的应用程序。将应用程序上传到 BlackBerry App World 后，将不再使用它。更改 UUID 可以让您在彼此隔离的情况下执行应用程序测试。

此信息来自[http://devblog.blackberry.com/2012/05/bbm-uuid/](http://devblog.blackberry.com/2012/05/bbm-uuid/)

# django - django中漂亮和seo友好的网址

> ID：11879416
> 
> 赞同：12
> 
> 时间：2012-08-09T08:25:35.363
> 
> 标签：django, url, seo

我目前正在写一个网络博客，学习 django。我需要一个视图来显示单个博客文章，我的第一次尝试是为它创建一个 url，如下所示：

```
myblog.com/blog/view/1 
```

这使用 blog-id 来识别指定的 blog-post。

现在，如果您查看许多博客/网站，您会发现它们在 url 中使用博客文章的标题，这是因为这对搜索引擎更友好，因此更容易找到。这可能看起来像这样。

```
myblog.com/blog/view/a-python-backup-script 
```

我如何在 django 中实现这个？

额外问题：很多网站还包括帖子的月份和年份。我想这也与搜索引擎优化有关，但这到底有什么用呢？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-08-09T08:38:56.697

在您的 Blog 模型中添加一个 slug 字段。

```
from django.template.defaultfilters import slugify

Class Blog(models.Model):
    title = models.CharField(max_length=40)
    slug = models.SlugField(_('slug'), max_length=60, blank=True)

    #Then override models save method:
    def save(self, *args, **kwargs):
        if not self.id:
            #Only set the slug when the object is created.
            self.slug = slugify(self.title) #Or whatever you want the slug to use
        super(Blog, self).save(*args, **kwargs) 
```

在你的 urls.py

```
(r'^blog/view/(?P<slug>[-\w]+)/$', 'app.views.blog_view'), 
```

在views.py

```
def blog_view(request, slug):
    blog = Blog.objects.get(slug=slug)
    #Then do whatever you want 
```

编辑：我在 save 方法中添加了一个检查，因为您希望在创建对象时创建 slug。它不应该每次都保存。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-09T08:35:42.023

确保您的模型实际上有一个 slug 字段：

```
class BlogPost(models.Model):
    slug = models.SlugField(unique=True) 
```

并且您有一个看法：

```
from django.shortcuts import get_object_or_404
def blog_detail(request, slug):
    ...
    post = get_object_or_404(BlogPost, slug=slug)
    ...
    render(request, "blog/blog_post.detail.html", { 'blog_post' : post }) 
```

然后在你的 urls.py 中，你可以指定一个 slug：

```
url(r'^(?P<slug>[-w]+)/$', 'blog.views.blog_detail', {}, name="blog_detail"), 
```

第一个参数是一个正则表达式，当匹配时，将运行视图`blog_detail` 视图并将匹配的`slug`组从正则表达式传递给 w 视图（依次渲染并返回一个模板）

关于你的最后一点：我发现除了在 SEO 方面可能是积极的之外，在 url 中包含日期让我更容易一目了然地查看博客文章是否是新的。此外，在 Django 中，很容易将此方法与[基于日期的通用视图](https://docs.djangoproject.com/en/1.2/ref/generic-views/#date-based-generic-views)一起使用，这将减少您需要编写的样板视图代码的数量。这将是一个例子：

```
url(r'(?P<year>d{4})/(?P<month>[a-z]{3})/(?P<day>w{1,2})/(?P<slug>[-w]+)/$', 
        'django.views.generic.date_based.object_detail', 
        { template_name = "blog/detail.html", ... }, 
        name="blog_detail"), 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-09T08:57:30.783

或者，如果您使用基于类的视图，您可以做的最基本的事情是：

```
from django.views.generic import DetailView
from models import Blog

class BlogView(DetailView):
    model = Blog
    template_name = "blog/blog_detail.html" 
```

然后，网址看起来像这样：

```
from views import BlogView

url(r'^(?P<slug>[-w]+)/$', BlogView._as_view(), name="blog_detail"), 
```

请注意，Django 的通用 DetailView 需要 pk 或 slug。因此，在这种情况下，使用 slug 与使用 pk 没有什么不同。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-03-09T19:04:31.480

这种类似的方法与我们使用数字 id 归档的 url 向后兼容。

在 models.py 中添加一个**slug 字段**和一个**保存定义：**

```
from django.template.defaultfilters import slugify

slug = models.SlugField(default='no-slug', max_length=60, blank=True)

def save(self, *args, **kwargs):
    #save a slug if there is no slug or when it's 'no-slug' (the default slug)
    if not self.slug or self.slug == 'no-slug':
        self.slug = slugify(self.name)
    super(Project, self).save(*args, **kwargs) 
```

在 urls.py 中添加第二个**url 模式：**

```
#original:
url(r'^(?P<id>\d+)/$', 'project.views.view', name='view_url'),
#new pattern added under original:
url(r'^(?P<id>\d+)-(?P<slug>[-\w\d]+)/$', 'project.views.view', name='view_url'), 
```

在 views.py 中**让 slug 通过**：

```
def view(request, mid=None, slug=None): 
```

**然后，使用此 URL**模式所需要做的就是编辑 models.py：

```
def get_absolute_url(self):
    return reverse('view_url', args=[self.id, self.slug]) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-10-15T14:49:52.343

[django-autoslug 非常](http://pythonhosted.org//django-autoslug/fields.html)适合这个目的，并且有很多有用的选项。

# flash-media-server - 在 FMS 上使用 getTimer() 时出错

> ID：11879419
> 
> 赞同：0
> 
> 时间：2012-08-09T08:25:50.547
> 
> 标签：flash-media-server

在 FMS 上使用 getTimer() 时出现错误“未找到此类方法”。我想知道，因为它也存在于 AS1.0 中。关于如何使用此功能的任何提示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T15:46:55.593

服务器端 Actionscript 中不存在此功能，您必须像这样创建自己的：

[Javascript 相当于 flash.utils.getTimer？](https://stackoverflow.com/questions/8551788/javascript-equiv-to-flash-utils-gettimer)

干杯

塔马斯

# iphone - 如何在 iphone sdk 中使用 MKMapView 将地图缩放离开限制在城市级别

> ID：11879428
> 
> 赞同：2
> 
> 时间：2012-08-09T08:26:09.003
> 
> 标签：iphone, ios5, mkmapview, cllocationmanager, mapkit

任何人都可以帮忙，我们如何将地图视图缩放级别限制为城市离开（用户在缩放地图视图时无需进入街道级别）..

这是以下代码 m 用于设置缩放级别...

```
- (void) setMapRegionForMinLat:(double)minLatitude minLong:(double)minLongitude maxLat:(double)maxLatitude maxLong:(double)maxLongitude
{

MKCoordinateRegion region;
region.center.latitude = (minLatitude + maxLatitude) / 2;
region.center.longitude = (minLongitude + maxLongitude) / 2;
region.span.latitudeDelta = (maxLatitude - minLatitude);
region.span.longitudeDelta = (maxLongitude - minLongitude);

if (region.span.latitudeDelta < 0.059863)
    region.span.latitudeDelta = 0.059863;

if (region.span.longitudeDelta < 0.059863)
    region.span.longitudeDelta = 0.059863;

  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T08:38:10.147

您可以手动拦截来自具有 pinchRecognisers 的图层的触摸，然后如果捏不会将其缩小得太远，您会将其传递到 mapp 视图。但是，您需要计算出每个捏大小的地图缩小了多远，但您可能会使用 NSLogs 进行仔细测试。

编辑 - 您当前的代码有什么问题？

# azure - SQL数据库中克服并发操作限制的方法（azure）

> ID：11879431
> 
> 赞同：2
> 
> 时间：2012-08-09T08:26:25.230
> 
> 标签：azure, azure-sql-database, federation

我的应用程序使用的是 Windows azure 和 SQL 数据库（Azure）。在不久的将来，我们的 SQL 数据库的流量将接近 50,000 个事务/分钟。我正在使用 5GB 的 Web 数据库。
现在 SQL 数据库中每个分区有 400 个并发操作的限制：[参考](http://social.technet.microsoft.com/wiki/contents/articles/1541.windows-azure-sql-database-connection-management-en-us.aspx#Limits_Table)

有哪些可能的方法来克服这个限制？目前我能想到的最好的解决方案是联邦。还有哪些其他方式？哪一个是最好的？
**编辑：**事务将只写。我们每 5 秒从客户端系统收集性能数据，这些数据被发送到我们的 REST API，最终将数据插入 SQL 数据库。所以没有 UI 和缓存是不可能的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T08:49:09.143

[在 Windows Azure SQL 数据库](http://msdn.microsoft.com/en-us/library/windowsazure/hh597452.aspx)中使用联合是一种选择。但我更喜欢将繁重的工作卸载到不同的数据存储，如表存储、Blob 或队列，因为它们是为处理繁重的负载而构建的，并且它们更容易分区。将此与良好的缓存相结合，您可能会轻松克服此限制。

想象一下，您的网站在您的主页上有前 10 种产品列表，并且您每天有 100,000 名访问者。一种选择是每次都查询 SQL Azure，但这可能会导致 SQL Azure 负载过重。但是您可以让工作进程每 24 小时运行一次并计算当时排名前 10 的产品，并将它们保存在表存储中（您可以在该表中创建一些分区，其中包含每个国家、每个类别的前 10 个产品，. ..)。您可以将其视为预先生成的视图。每次您想要显示前 10 名产品时，您都会从可扩展性更好的表存储（表中的特定分区）中查询项目。在那里添加一些 ASP.NET 缓存，您将拥有一个非常可靠的系统。

那就是读取数据。但我想你也会期待一些用户输入，用户可以在其中创建订单、发送消息……再说一次，如果你期望负载很重，SQL Azure 可能不是直接与之交互的最佳选择（见限制）。在前端和后端之间使用队列可能是更好的解决方案。

当您的用户下订单时，您可以将消息写入队列（存储队列或服务总线队列）。工作人员将接收此消息，并在表格中为该订单创建一条记录，其中包含时间、产品数量，甚至可能是您将在用户订单屏幕中显示的状态（如处理中）。完成此操作后，您就有了完成订单所需的所有时间，完成后您将最终结果保存在 SQL Azure 中（并更新表存储中的订单记录）。将最终结果保存在 SQL Azure 中仍然可以使用报告等...

这将对您的应用程序产生很大影响。另一种解决方案是自己在虚拟机中托管 SQL Server，但请注意，这仍在 CTP 中：[Provisioning a SQL Server Virtual Machine on Windows Azure](http://www.windowsazure.com/en-us/manage/windows/common-tasks/install-sql-server/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T13:28:14.647

联邦当然是一种选择，因为它是一个无共享的基础设施。但是，您可能需要首先思考为什么需要如此大量的交易。您的事务将主要是读取还是写入操作？你有中间层吗？可用于写入和读取操作的技术不同。当您有一个中间层时，您可以使用以下一些技术来帮助您最大限度地减少 SQL 数据库实例上的每秒事务数：

*   缓存（如 Sandrino 所述）
*   基于集合的事务
*   最终一致性

当您的系统在读取场景（或非规范化）中尝试向消费者提供数据时，缓存非常重要。除了说您有严重的利弊需要考虑之外，我不会扩展缓存，例如数据新鲜度和跨节点的同步问题。下面的其他两种技术用于写入。

基于集合的事务在数据库系统中绝对是至关重要的。例如，如果您的系统每秒插入大量记录，您可以将插入请求放入队列中，然后在单独的线程上处理队列，然后将十或二十个请求汇集到单个数据库调用中。这需要对数据库进行异步处理和基于集合的操作。但归根结底，对记录进行分组处理是 SQL 数据库成功的关键之一。如果不是为了实现类似的模式，我们现在正在设计一个每秒可以处理超过 500 个事务的系统。

最终一致性是另一个重要的概念，我之前在基于集合的方法中提到过它。最终一致性意味着数据库现在可能不包含所有记录，并且可能需要一些时间才能使所有记录可用。但最终，记录会成功。我上面提供的示例（带有队列）实现了基于集合的操作和最终一致性模式。

# configuration - Mac 上的 Riak 3 节点集群启动（同一台机器）

> ID：11879442
> 
> 赞同：1
> 
> 时间：2012-08-09T08:26:52.317
> 
> 标签：configuration, cluster-computing, startup, riak

我正在尝试通过[http://wiki.basho.com/Basic-Cluster-Setup.html在一台机器（Mac OS X Mountain Lion）上为 Riak 启动一个 3 节点集群](http://wiki.basho.com/Basic-Cluster-Setup.html)

我下载并扩展了 Riak 1.2 的 tarball（无需构建源代码，扩展不错且干净）。然后我能够让单个节点运行没有问题，没有特殊配置。我的 Erlang 版本是 R15B05，如果你好奇的话，但我认为这与它无关，因为 1.2 完全支持这个版本。

然后我递归地复制了 riak-1.2.0 目录（扩展的 tarball 文件）三次，以创建顶级目录 riak1、riak2 和 riak3。然后我继续从链接中进行建议的更改，将端口号更改为每个实例的唯一端口号。但是，当我从链接更改 vm.args 部分（节点名称从 riak@127.0.0.1 到 riak1@127.0.0.1 等）时，我在 error.log 文件中收到以下错误：

2012-08-09 01:21:04.288 [错误] <0.161.0> gen_server riak_core_capability 因原因终止：没有函数子句匹配 orddict:fetch('riak1@127.0.0.1', [{'riak@127.0.0.1', [{{riak_core,staged_joins},[true,false]},{{riak_core,vnode_routing},[proxy,legacy]},...]}]) 第 72 行

将 vm.args（-name 参数）中的节点重命名为 riak 而不是 riak[new_number] 时，一切正常。但是，如链接中所述，节点需要具有不同的名称才能相互协作。如错误日志所示，自定义名称时似乎名称与其他名称不匹配？是否有其他一些我没有看到必须更改的配置参数？我在 app.config 中尝试了“raw_name”，但这没有任何区别。我很感激我能得到的任何帮助。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-11T14:56:44.837

我必须执行以下操作：

./riak1/bin/riak-admin reip riak@127.0.0.1 riak1@127.0.0.1

./riak2/bin/riak-admin reip riak@127.0.0.1 riak2@127.0.0.1

./riak3/bin/riak-admin reip riak@127.0.0.1 riak3@127.0.0.1

./riak4/bin/riak-admin reip riak@127.0.0.1 riak4@127.0.0.1

# php - 使用 usort 根据特定条件对多维数组进行排序

> ID：11879443
> 
> 赞同：3
> 
> 时间：2012-08-09T08:26:51.647
> 
> 标签：php, arrays, usort

[这个问题是'This question' 的](https://stackoverflow.com/questions/11825097/possible-ways-to-sort-records-which-uses-non-english-fonts)后续问题。codeigniter 代码将数据库记录集返回为以下数组。

```
Array
(
    [0] => stdClass Object
    (
        [user_id] => NLK32439
        [first_name] => sdn
        [last_name] => hf]zL
        [email_address] => user1@hotmail.com
        [mobile_number] => 9841349349
        [description] => g]kfn
        [date_joined] => 09-AUG-12
        [status] => 1
        [username] => user1
        [userpassword] => 691f9298642af07c2d6ea8fef56074201e077b34
    )

    [1] => stdClass Object
    (
        [user_id] => NLK94358
        [first_name] => alag
        [last_name] => k|wfg
        [email_address] => user2@gmail.com
        [mobile_number] => 823472384723
        [description] => g]kfn
        [date_joined] => 09-AUG-12
        [status] => 1
        [username] => user2
        [userpassword] => 691f9298642af07c2d6ea8fef56074201e077b34
    )

    [2] => stdClass Object
    (
        [user_id] => NLK32437
        [first_name] => ;lag
        [last_name] => %]qL
        [email_address] => user3@msn.com
        [mobile_number] => 9851112412
        [description] => g]kfn
        [date_joined] => 08-AUG-12
        [status] => 1
        [username] => user3
        [userpassword] => 691f9298642af07c2d6ea8fef56074201e077b34
    )

    [3] => stdClass Object
    (
        [user_id] => NLK32435
        [first_name] => clgn
        [last_name] => zdf{
        [email_address] => user4@msn.com
        [mobile_number] => 984134354
        [description] => g]kfn
        [date_joined] => 08-AUG-12
        [status] => 1
        [username] => user4
        [userpassword] => 0e025eade868b4b481f41ff7449bc1967261e170
    )

) 
```

我要做的就是根据特定条件按“first_name”对数组进行排序。到目前为止，我的 php 代码是-

```
<?php
usort($array, function ($a, $b) {
    static $order = array('c', 's','a',';', 'L');
    return array_search($a->first_name, $order) - array_search($b->first_name, $order);
});
?> 
```

我的意图是对数组进行排序，以便以'c'开头的first_name排在第一位，'s'排在第二位，'a'排在第三位，';' 排在第四位。

但是上面的代码没有按预期工作。它按顺序返回记录：

```
's','a',';','c' 
```

它应该按顺序返回

```
'c', 's','a',';' 
```

我正在使用自定义 Devnagari 字体，因此键盘中的每个 albhabet 代表 devnagari 中的某些字符。所以在devnagari中，c是第一位的，s是第二位的，以此类推。

任何帮助将不胜感激。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T09:49:22.127

这是因为使用 array_search 只会在字符串完全匹配数组中的某个字符串时返回。

```
$array = array('a','b','c');
var_dump(array_search('blue',$array))
// This will output
bool(false) 
```

所以，如果你愿意，你可以试试这个：

```
<?php
usort($array, function ($a, $b) {
static $order = array('c', 's','a',';', 'L');
return array_search(substr($a->first_name,0,1), $order) - array_search(substr($b->first_name,0,1), $order);
});
?> 
```

希望这可以帮助。

更新：对于您的评论问题，我有一个想法。请看一下。

```
usort($array, function($a, $b) {
    //example for the orders
    static $orders = array (';l', 'c', 's', 'a', ';', 'L');

    //variables to count the point for $a and $b (it is equal at first)
    $pointA = 1;
    $pointB = 1;

    //also variables to mark if $a or $b are matched on one of the orders
    $isFoundA = false;
    $isFoundB = false;

    //iterate foreach orders
    $i = 0; //this is something to add to the point, the more earlier the first_name found in the order, the less point will be added
    foreach ($orders as $order) {
        //if $a->first_name is still not found in orders and it has been just founded 
        if (!$isFoundA && strpos($a->first_name,$order) === 0) {
            $pointA += $i;
            $isFoundA = true; //we don't need to check this again since we had found it
        }
        //if $b->first_name is still not found in orders and it has been just founded 
        if (!isFoundB && strpos($b->first_name,$order) === 0) {
            $pointB += $i;
            $isFoundB = true; //the same as above, we don't need to check it again
        }
        $i++;
    }
    //after iterate in orders, we check the points for $a and $b
    if ($pointA == $pointB) return 0;
    else return ($pointA < $pointB) ? -1 : 1;
}); 
```

现在该命令对字符没有限制。您可以指定类似`static $orders = array('abc','a',';');`或`static $orders = array('abcdef', 'b', 'z', ';', 'c[');`请让我知道它是否适用于您。

# c# - 从 Outlook.MailItem 获取发件人活动目录用户主体

> ID：11879445
> 
> 赞同：3
> 
> 时间：2012-08-09T08:26:54.660
> 
> 标签：c#, active-directory, outlook-addin, outlook-2007

我正在为 Outlook 2007 开发一个 Outlook 插件。简而言之：当用户打开电子邮件时，我需要获取电子邮件发件人的活动目录用户主体对象。

**我想要达到的目标：**

1.  获取此电子邮件的发件人
2.  获取此发件人背后对应的活动目录帐号
3.  获取此广告帐户的特定属性（“physicalDeliveryOfficeName”）

我可以处理第 1 步和第 3 步，但我不知道如何获取交换用户帐户和活动目录帐户之间的链接

**我试过的**

```
string senderDisplayName = mailItem.SenderName; 
```

由于重复，无法通过显示名称查找用户

```
string senderDistinguishedName = mailItem.SenderEmailAddress; 
```

这将返回类似“O=Company/OU=Some_OU/CN=RECIPIENTS/CN=USERNAME”的内容，我可以提取此字符串的用户名，但此“用户名”是用户邮箱的用户名或类似名称。它并不总是与活动目录用户名匹配。

有没有办法让活动目录用户在发件人对象后面？

**环境**

*   展望 2007 / C# .NET 4
*   交换 2010
*   活动目录

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T12:53:47.570

下面描述的技术假定**Exchange 邮箱别名**与您的**AD 帐户 ID**匹配。

首先，您需要[`Recipient`](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.outlook.recipient_members.aspx)从 Exchange 地址创建一个，将 解析`Recipient`为一个[`ExchangeUser`](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.outlook.exchangeuser_members.aspx)，然后集成[`PrincipalContext`](http://msdn.microsoft.com/en-us/library/system.directoryservices.accountmanagement.principalcontext.aspx)以通过帐户 ID 搜索 AD。找到后[`UserPrincipal`](http://msdn.microsoft.com/en-us/library/system.directoryservices.accountmanagement.userprincipal.aspx)，您可以查询[`DirectoryEntry`](http://msdn.microsoft.com/en-us/library/system.directoryservices.directoryentry.aspx)自定义 AD 属性。

```
string deliveryOffice = string.Empty;
Outlook.Recipient recipient = mailItem.Application.Session.CreateRecipient(mailItem.SenderEmailAddress);
if (recipient != null && recipient.Resolve() && recipient.AddressEntry != null) 
{
    Outlook.ExchangeUser exUser = recipient.AddressEntry.GetExchangeUser();
    if (exUser != null && !string.IsNullOrEmpty(exUser.Alias))
    {
        using (PrincipalContext pc = new PrincipalContext(ContextType.Domain))
        {
            UserPrincipal up = UserPrincipal.FindByIdentity(pc, exUser.Alias); 
            if (up != null)
            {
                DirectoryEntry directoryEntry = up.GetUnderlyingObject() as DirectoryEntry;
                if (directoryEntry.Properties.Contains("physicalDeliveryOfficeName"))
                    deliveryOffice = directoryEntry.Properties["physicalDeliveryOfficeName"].Value.ToString();
            }
        }
    }
} 
```

***注意*****：**对于 AD 集成，您需要参考`System.DirectoryServices`和`System.DirectoryServices.AccountManagement`。

# emacs - 通过 cedet 导航上的路径配置

> ID：11879449
> 
> 赞同：2
> 
> 时间：2012-08-09T08:27:14.810
> 
> 标签：emacs, cedet

我想使用 cedet 在我的程序中导航。我使用**semantic-ia-fast-jump**跳转到声明，并使用**semantic-analyze-proto-impl-toggle**跳转到实现。我发现这两个命令需要同一目录中的文件。所以我需要将所有目录添加到搜索路径中。我指的是网上的一个人。代码如下：

```
(setq semanticdb-project-roots (list (expand-file-name "~/")))    
(defconst cedet-user-include-dirs    
  (list "~/samuel/project/modules/MManage/inc"    
        "~/samuel/project/modules/MManage/src"    
        ...
   ))    
(require 'semantic-c nil 'noerror)    
(let ((include-dirs cedet-user-include-dirs))    
  (mapc (lambda (dir)    
         (semantic-add-system-include dir 'c++-mode)    
         (semantic-add-system-include dir 'c-mode))    
          include-dirs)) 
```

我有几个模块，所以我需要添加很多目录。它不方便，也不便携。我认为这一定是配置它的好方法。

PS：参考 [http://alexott.net/en/writings/emacs-devenv/EmacsCedet.html#sec6](http://alexott.net/en/writings/emacs-devenv/EmacsCedet.html#sec6)
我的设置如下

```
 (ede-cpp-root-project "library_samuel"
:name "library_samuel project"
:file (expand-file-name "~/samuel/project_self/library_samuel/CMakeLists.txt")
:include-path '("/common/include"  "/modules/MManage/inc" "/modules/ImageProcess/inc" )
:spp-table '(("BUILD_APP" . ""))) 
```

**semantic-ia-fast-jump**可以正常工作，但**semantic-analyze-proto-impl-toggle**不能正常工作。似乎头文件和源文件必须在同一目录中。如何解决这个问题呢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T13:29:54.090

最好设置项目（例如，查看[我关于 CEDET 的文章](http://alexott.net/en/writings/emacs-devenv/EmacsCedet.html#sec6)）。`include-path`在项目内部，您可以使用指令引用相对路径

# session - 如何知道您的会话已过期 Jira Rest Api

> ID：11879450
> 
> 赞同：2
> 
> 时间：2012-08-09T08:27:15.293
> 
> 标签：session, rest, cookies, jira

我的项目正在使用 Jira Rest Api。

我目前正在存储从登录请求中获得的 cookie，并在所有其他请求中使用该 cookie。

我不确定如何处理过期的 cookie ( `Session Timeout`)，如果我在请求中使用的 cookie 已过期，我是否会从服务器获得一些回报？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T06:38:36.130

我的 Jira 实例中没有启用 REST，但我可以告诉您其他 API 返回超时错误。我不得不说超时发生在很长一段时间后（也不确定它的定义时间和位置）。

要准确查看使用 REST API 时错误的样子，您可以按照以下步骤操作：

1.  使用 REST API 连接您的 Jira 实例并进行身份验证。
2.  运行查询以确保您已连接，例如使用[http://example.com:8080/jira/rest/api/2/resolution](http://docs.atlassian.com/jira/REST/latest/#id70310)。只要确保你得到答案。然后，`sleep`在您的脚本中进行定义，使其在一两分钟内不会做任何事情。
3.  登录到您的 Jira 服务器并重新启动 Jira。
4.  睡眠结束并且 Jira 启动后，运行与之前相同的查询。该命令将失败，您将收到超时异常。

例如，使用 XML-RPC API 我得到以下错误：

> java.lang.Exception：com.atlassian.jira.rpc.exception.RemoteAuthenticationException：用户尚未通过身份验证，或会话超时。

如果您尝试此操作，请返回并发布您的发现，以便其他人也可以从中受益。

# c# - C# MVC3 模型无效

> ID：11879451
> 
> 赞同：0
> 
> 时间：2012-08-09T08:27:16.397
> 
> 标签：c#, asp.net-mvc, razor, model

我目前在模型中遇到错误，说它无法从字符串转换为模型。一旦我尝试添加一个新的数据库表条目，就会发生这种情况。我正在使用 SQL Server，而对于前端，我正在使用 c# mvc3 razor view。

模型：

```
 namespace NBProfiler.Model
{
    using System;
    using System.Collections.Generic;

    public partial class PersonContempancy
    {
        public int Id { get; set; }
        public int PersonId { get; set; }
        public Nullable<System.DateTime> AttainedDate { get; set; }
        public int FrameworkId { get; set; }
        public int ContempancyCategoryId { get; set; }
        public int ContempancyId { get; set; }
        public int ContempancyLevelId { get; set; }
        public int FrameworkLevelId { get; set; }

        public virtual Contempancy Contempancy { get; set; }
        public virtual ContempancyCategory ContempancyCategory { get; set; }
        public virtual FrameworkLevel FrameworkLevel { get; set; }
        public virtual Framework Framework { get; set; }
        public virtual Person Person { get; set; }
        public virtual ContempancyLevel ContempancyLevel { get; set; }
    }
} 
```

控制器：

```
public ActionResult Create()
    {

       ViewBag.Contepancies = db.Contempancies.ToList();
       ViewBag.ContempancyCategory = db.ContempancyCategories.ToList();
       ViewBag.ContempancyLevel = db.ContempancyLevels.ToList();
       ViewBag.FrameworkLevel = db.FrameworkLevels.ToList() ;
       ViewBag.Person = db.People.ToList();
       ViewBag.Framework = db.Frameworks.ToList();

        return View();
    } 

    //
    // POST: /Mapping/Create

    [HttpPost]
    public ActionResult Create(PersonContempancy personcontempancy)
    {

        if (ModelState.IsValid)
        {
            db.PersonContempancies.Add(personcontempancy);
            db.SaveChanges();

            return RedirectToAction("Index");  
        }

        ViewBag.Contepancies = db.Contempancies.ToList();
        ViewBag.ContempancyCategory = db.ContempancyCategories.ToList();
        ViewBag.ContempancyLevel = db.ContempancyLevels.ToList();
        ViewBag.FrameworkLevel = db.FrameworkLevels.ToList();
        ViewBag.Person = db.People.ToList();
        ViewBag.Framework = db.Frameworks.ToList();

        return View(personcontempancy);
    } 
```

最后查看：（我已经从视图中删除了其他项目，因为它们都是相同的代码，所以为了缩短它在这里我删除了它）

```
 @model NBProfiler.Model.PersonContempancy

@{
    ViewBag.Title = "Create";
}

<h2>Map Skill to Person</h2>

<script src="../../Scripts/jquery-1.5.1.min.js" type="text/javascript"></script>
 <link href="../../Content/themes/start/jquery-ui-1.8.22.custom.css" rel="stylesheet"
        type="text/css" />
<script src="../../Scripts/jquery-ui-1.8.11.min.js" type="text/javascript"></script>   

@using (Html.BeginForm()) { 

    @Html.ValidationSummary(true)
    <fieldset>
        <legend>PersonContempancy</legend>

        <div class="editor-label">
           Name:
        </div>
        <div class="editor-field">

            Html.DropDownListFor(m => m.Person, new SelectList(ViewBag.Person as System.Collections.IEnumerable, "PersonId", "PersonName"), "Choose Name")

        </div>

        @*<div class="editor-field">*@
        <div class="editor-label">
                @*@Html.LabelFor(m => m.ContempancyCategory)*@
            </div>
        <div class="editor-field">
            @Html.DropDownListFor(m => m.ContempancyCategory, new   SelectList(ViewBag.ContempancyCategory as System.Collections.IEnumerable, "ContempancyCategoryId", "ContempancyCategoryName"),"Select", new {id = "category" })

        <p>
            <input name="submit" type="submit" value="Map Skill" />
        </p>
    </fieldset>
}

<div>
    @Html.ActionLink("Show Table", "Index")
</div>

<script type="text/javascript">
      $(document).ready(function () {
      $("#category").change(function () {
      var idCat = $(this).val();
      $.getJSON("/Mapping/contempancies", { CategoryID: idCat },
      function (MyData) {
      var select = $("#contempancy");
      select.empty();
      $.each(MyData,function(index, itemData) {
      select.append($('<option/>', {
      value: itemData.Value,
      text: itemData.Text
      }));
      });
      });
      });
});
</script> 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T08:47:56.107

看起来问题是您将*视图*模型视为*实体*模型，这绝不是一个好主意。

当向/从视图传递数据时，您应该有一个显式的视图模型，并且只传递您的视图需要的数据。此外，您将数据层与视图耦合，这违背了 MVC 的目的！

在您的示例中，如果`PersonContempancy`确实是一个视图模型（而不是实体），那么您应该使用它来创建一个映射它需要的数据的新实体，[AutoMapper](https://github.com/AutoMapper/AutoMapper)是一个非常漂亮的库。

```
public class PersonContempancyViewModel
{
    // update with properties the view needs
}

[HttpPost] 
public ActionResult Create(PersonContempancyViewModel viewModel) 
{ 
    if (ModelState.IsValid) 
    {
        var entity = new PersonContempancyEntity();
        // map properties from view model to entity
        // entity.FrameworkId = viewModel.FrameworkId etc..
        db.PersonContempancies.Add(entity);  
        db.SaveChanges(); 

        return RedirectToAction("Index");   
    }

    ...
} 
```

# asp.net - 单击浏览器后退按钮时页面不一样

> ID：11879454
> 
> 赞同：0
> 
> 时间：2012-08-09T08:27:27.873
> 
> 标签：asp.net, caching, browser, browser-cache

我的`default.aspx`页面中有一个gridview 控件，在这个控件的page_load 中，我填充了这个gridview。

```
 protected void Page_Load(object sender, EventArgs e)
    {
        grd_UserOrderList.DataSource = UserOrderListData.GetOrderList();
        grd_UserOrderList.DataBind();
    } 
```

发生的情况是，当我进入`default.aspx`页面时，我在 gridview 中看到 4 个项目，我输入其中一个项目，然后单击浏览器的后退按钮，我看到 2 个项目。我检查了 page_load 函数，单击后退按钮时它不会被触发。当我单击刷新时，再次有 4 个项目。在我的计算机上工作时我遇到了这个问题，但是当我将我的项目发布到服务器时，我没有遇到同样的问题。可能是什么**原因**？我不是在寻找像禁用缓存这样的临时修复。我使用 ie9 作为浏览器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T08:40:36.017

尝试这个。 [通过后退按钮调用时如何刷新页面](http://www.mrc-productivity.com/techblog/?p=1235)

或者你可以试试这个。

我们可以禁用页面缓存。那么如果我们在浏览器中点击返回按钮，页面会重新执行page_load事件来刷新页面。

代码如下所示。

```
protected void Page_Load(object sender, EventArgs e)
        {
            if (!IsPostBack)
            {
                Response.Buffer = true;
                Response.CacheControl = "no-cache";
                Response.AddHeader("Pragma", "no-cache");
                Response.Expires = -1441;
            }
            Response.Write(DateTime.Now.ToString());
        } 
```

这也可能对您有所帮助。

```
<script language="JavaScript">

  javascript:window.history.forward(1);

</script> 
```

# perl - 由于某种原因，无法在 Carp::croak() 中禁用堆栈跟踪

> ID：11879457
> 
> 赞同：5
> 
> 时间：2012-08-09T08:27:40.183
> 
> 标签：perl

根据 Carp 模块文档，除非评估为真，`croak()`否则不应产生任何堆栈跟踪。`$Carp::Verbose`但出于某种原因，`croak()`总是表现得像`confess()`在我的环境中一样，即总是打印堆栈跟踪，即使它不应该..

这是一个测试脚本：

```
#!/usr/bin/perl

use Modern::Perl;
use Carp;

sub func
{
    say "Carp::Verbose = $Carp::Verbose";
    croak "There should be no stack trace after this message!";
}

sub main
{
    func();
}

main; 
```

这是它在我的系统上产生的结果：

```
$ ./croak
Carp::Verbose = 0
There should be no stack trace after this message! at ./croak line 8
    main::func() called at ./croak line 13
    main::main() called at ./croak line 16 
```

也许有人遇到过这个问题或对根本原因有任何线索？

以下是有关我的环境的一些信息：

```
Ubuntu 12.04 LTS
Linux 3.2.0-27-generic x86_64
perl 5, version 14, subversion 2 (v5.14.2) built for x86_64-linux-gnu-thread-multi 
```

我在我的 SL6 系统上也遇到了同样的错误行为：

```
Scientific Linux SL release 6.3 (Carbon)
kernel-2.6.32-279.1.1.el6.x86_64
perl, v5.10.1 (*) built for x86_64-linux-thread-multi 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T16:04:26.873

`Carp`用于错误消息的堆栈跟踪帧的规则之一是：

> 1.  从包到自身的任何调用都是安全的。

由于您的代码不使用除 之外的任何包`main`，并且由于另一个规则是`Carp`包本身是安全的，`Carp`因此无法决定将哪一行代码用于其错误消息，因此它会踢出并打印出整个堆栈跟踪。

哦，它实际上在`Carp`perldoc 中：

> 他们所做的是在调用堆栈中搜索一个函数调用堆栈，在那里他们没有被告知不应该有错误。**如果每个调用都标记为安全，它们会放弃并提供完整的堆栈回溯。**

函数中的这一行`Carp::short_error_loc`是你的确凿证据：

```
return 0 unless defined($caller);    # What happened? 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-09T11:16:31.593

一半的答案：这与代码都在同一个包中有关。如果您从不同的包调用入口点，则`croak`可以按预期工作。

# javascript - 表单验证失败但仍然提交

> ID：11879459
> 
> 赞同：1
> 
> 时间：2012-08-09T08:27:51.670
> 
> 标签：javascript, jquery, webforms, validation

我有以下JS代码：

```
function checkFull(id) {
    var input = $('#' + id).val();  
    if (input == "") {
        return false;   
    }
    else {
        return true;
    }
}

function checkSame(id1,id2) {
    var input1 = $('#' + id1).val();    
    var input2 = $('#' + id2).val();
    if (input1 == input2) {
        return true;
    }
    else {
        return false;
    }
}
function showErrors() {
    if (!checkFull('username')) {
        $('#userfield').show(); 
    }
    else {
        $('#userfield').hide(); 
    }

    if (!checkFull('email')) {
        $('#notsame').show();   
    }
    else {
        $('#notsame').hide();   
    }

    if (!checkFull('confemail')) {
        $('#notsame2').show();  
    }
    else {
        $('#notsame2').hide();  
    }

    if (!checkFull('espncode')) {
        $('#nocode').show();    
    }
    else {
        $('#nocode').hide();    
    }

    if (notSame('email','confemail')) {
        $('#notsame2').show();
        $('#notsame').show();   
    }
    else {
        $('#notsame2').hide();  
        $('#notsame').hide();
    }
}
function valform() {
    showErrors();
    if (checkFull('username') && checkFull('email') && checkFull('confemail') && checkSame('email','confemail') && checkFull('espncode')) {
        form.submit();
        alert('success');
    }
    else {

        return false;
    }
} 
```

以及以下形式：

```
<form method="post" action="forms/post.asp" onsubmit="valform();return false">
            <strong>Poker Username</strong> <span id="userfield" style="display:none;color:#F00">*</span><br />
            <input type="text" name="username" id="username" style="width:230px;" />
            <br /><br />
            <div class="vert">
                <strong>Email Address</strong> <span id="notsame" style="display:none;color:#F00">*</span><br />
                <input type="text" name="email" id="email" style="width:230px;" />
            </div>
            <div class="vert2">
                <strong>Confirm Email Address</strong> <span id="notsame2" style="display:none;color:#F00">*</span><br />
                <input type="text" name="confemail" id="confemail" style="width:230px;" />
            </div>
            <div style="clear:both;"></div>
            <div class="espn">
                <div class="txt"><strong>Enter the ESPN special code</strong></div>
                <input type="text" name="espncode" id="espncode" style="width:230px;" />
            </div>
            <div id="nocode" style="display:none">
                You need to enter the code above
            </div>
            <div class="tc">
                <input type="checkbox" id="agree" name="agree" /> <strong>You agree to the terms and conditions of this sweepstake. Only one entry per person per sweepstake period. Any additional entries will be disqualified.</strong>
            </div>
            <br />
            <div class="submit">
                <input type="image" src="submit_BTN.png" />
            </div>
        </form> 
```

即使我将表格留空，当我按下提交时，它也会通过。这是为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T08:34:22.707

您需要从`submit`处理程序内的验证函数返回值：

```
onsubmit="valform();return false" 
```

应该：

```
onsubmit="return valform();" 
```

每当`valform`返回 false 这将阻止表单提交。

顺便说一句，函数`form.submit()`内部的调用`valform`没有意义。如果函数不返回 false，它将被提交。

```
if (/*validity checks pass*/) {
    alert('success');
}
else {
    return false;
} 
```

[但是，用这个小提琴](http://jsfiddle.net/UZ8HE/)浏览你的代码我注意到有一个错误：

> ReferenceError：找不到变量：notSame

如果您修复函数的名称，它将起作用。您应该使用可用的开发人员工具来调试此类小错误。Firefox 有 Firebug，Chrome/Safari 内置了一个网络检查器。Opera 也有 Dragonfly。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T08:41:49.247

可能的原因：

*   `onsubmit="valform();return false"``onsubmit="valform();"`在表格中更改为。

尝试如果仍然不起作用然后告诉。

# php - MySQL 前一周

> ID：11879462
> 
> 赞同：0
> 
> 时间：2012-08-09T08:27:59.950
> 
> 标签：php, mysql

我想检索上周和 15 周前的数据。

**注意：**仅 15 周前的同一工作日，并非其间的所有数据。例如，我想要 15 周前的每个星期四的数据。

这是我的 MySQL 表的简化，具有所需的结果。

```
Station | Type |     Date    |   Value
5          2     2012-08-02     3
5          2     2012-07-26     5
5          2     2012-07-19     1 
```

我今天这样做的方式是通过 PHP：

```
$dates = "(";
for($j=1; $j<=15; $j++) { // 15 weeks back, same weekday
$dates .= "'" . date("Y-m-d", strtotime("-{$j} week")) . "', ";
 } 
```

`blabla`然后我使用“SELECT * FROM WHERE IN $dates”将其附加到 MySQL 查询中`date`，但这不是一个好的解决方案。那么如何使用纯 MYSQL 选择 15 周前的日期？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T08:37:36.933

尝试：

```
select col1, col2 
from blabla 
where date BETWEEN DATE_SUB(now(),INTERVAL 1 week) 
AND DATE_SUB(now(),INTERVAL 15 week) 
AND DAYOFWEEK(`date`) = 5 
```

这将为您提供上周和 14 周前的数据。

这 (DATEPART(date,@dtDate) = 5) 只会在星期四返回。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T08:30:29.433

```
select col1, col2 from blabla where date>=DATE_SUB(now(),INTERVAL 15 week) 
```

编辑我假设您只需要与日期相同的星期几的数据 - 试试这个：

```
select
    a.col1,
    a.col2
from
    blabla a
        join blabla b
            on weekday(a.date)=weekday(b.date)
where
    a.date>=date_sub(now(), interval 15 week)
    and b.date>=date_sub(now(), interval 15 week) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T08:31:01.740

在 mysql 中使用日期字段。[http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T08:58:13.333

```
SELECT * 
FROM foo 
WHERE `date` BETWEEN DATE_SUB(NOW(),INTERVAL 1 week) AND DATE_SUB(NOW(),INTERVAL 15 week)
AND DAYOFWEEK(`date`) = DAYOFWEEK(NOW()); 
```

更多信息[在这里](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_dayofweek)。

# powershell - 使用 Powershell 在 SSRS 2008 中上传许多报告 RDL 时出错

> ID：11879465
> 
> 赞同：1
> 
> 时间：2012-08-09T08:28:06.243
> 
> 标签：powershell, reporting-services, ssrs-2008, out-of-memory

我有 Windows 2008 Server 64 位，Sql Server Reporting Services 2008 R2。我使用 ReportService web 服务上传 RDLs 文件。我使用脚本 ps1 Powershell 上传报告，例如：

[http://randypaulo.wordpress.com/2012/02/21/how-to-install-deploy-ssrs-rdl-using-powershell/](http://randypaulo.wordpress.com/2012/02/21/how-to-install-deploy-ssrs-rdl-using-powershell/)

上传报告时出现错误。前 5 个 rdls 上传正确，但下一个错误。 **REP_ACCESO_AIRNET04_R_09、REP_ACCESO_AIRNET04_R_10、REP_ACCESO_AIRNET04_R_11**，`REP_ACCESO_AIRNET04_R_12`正确上传。

`REP_ACCESO_AIRNET04_R_13`不是，然后我得到错误。

如果使用 3-4 报告 rdl，没问题。但是使用更多的 rdls 文件，我得到了错误。

我检查 SQL Server Reporting Services 并且它正在运行

我在 powershell 中遇到几个错误，使用我的脚本 ps1 安装 - 在 SSRS 中上传报告 rdls：

```
Exception of type 'System.OutOfMemoryException' was thrown.

Failed. The error was: 'Error al procesar los datos de un comando remoto. Mensa
je de error: <f:WSManFault xmlns:f="http://schemas.microsoft.com/wbem/wsman/1/w
smanfault" Code="3762507597" Machine="DESCASRPSW01"><f:Message><f:ProviderFault
 provider="microsoft.powershell" path="C:\Windows\system32\pwrshplugin.dll"></f
:ProviderFault></f:Message></f:WSManFault> Para obtener m s informaci¢n, consul
te el tema de la Ayuda about_Remote_Troubleshooting.'.

Failed. The error was: 'Error al procesar los datos de un comando remoto. Mensa
je de error: The WSMan provider host process did not return a proper response. 
 A provider in the host process may have behaved improperly. Para obtener m s i
nformaci¢n, consulte el tema de la Ayuda about_Remote_Troubleshooting.'. 
```

并登录 c:\Program Files\Microsoft SQL Server\MSRS10_50.REPORTING\Reporting Services\LogFiles

> library!ReportServer_0-107!1118!08/09/2012-08:46:59:: 调用 SetItemDataSourcesAction(/Reale/REP_ACCESSO_AIRNET04_R_12)。
> 
> webserver!ReportServer_0-107!7fc!08/09/2012-08:47:11:: i INFO: 报告 Web 服务器停止 appdomainmanager!DefaultDomain!14c!08/09/2012-08:47:16:: i INFO: Appdomain:152 ReportServer_REPORTING_0-107-129889682211300455 未注册。

我激活了 VERBOSE 日志，这条消息对我来说是关键：

*   ReportServer_REPORTING_0-1-129889760220267707 即将卸载。
*   ShutDownMessage：关键目录的更改通知。bin dir 更改或目录重命名
*   HostingEnvironment 启动关闭
*   关键目录的更改通知。
*   信息：报告 Web 服务器已停止
*   ReportServer_REPORTING_0-1-129889760220267707 未注册。

管道=0x0000000000F1FA30，id=13907115651467581232，connid=13907115650930710318 ...

runningrequests!ReportServer_0-1!123c!08/09/2012-11:06:57:: v VERBOSE: User map'DESCASRPSW01\instalador [http://descasrpsw01/ReportServer_REPORTING/ReportService2005.asmx?WSDL](http://descasrpsw01/ReportServer_REPORTING/ReportService2005.asmx?WSDL) 1'

rshost!rshost!123c!08/09/2012-11:06:57:: v 详细：HttpPipelineCallback::EndOfRequest()：继续管道 = 0x0000000000F1FA30。

rshost!rshost!e3c!08/09/2012-11:06:57:: v 详细：HttpPipeline::DisconnectCallback：释放管道 = 0x0000000000F1FA30。

rshost!rshost!fbc!08/09/2012-11:06:57:: v 详细：ThreadContinuePipeline：处理管道上的请求=0x0000000000F1FA30，状态=2，IOError=0，节点=0。

rshost!rshost!fbc!08/09/2012-11:06:57:: v 详细：状态机已断开管道=0x0000000000F1FA30，状态=4 ...

rshost!rshost!fbc!08/09/2012-11:06:57:: v 详细：HttpPipeline::DoStateDisconnected：释放管道 = 0x0000000000F1FA30。

rshost!rshost!fbc!08/09/2012-11:06:57:: v 详细：HttpPipeline::ReleaseOnce：释放管道 = 0x0000000000F1FA30。

rshost!rshost!fbc!08/09/2012-11:06:57:: v 详细：销毁管道=0x0000000000F1FA30，回调=0x0000000000F1C660 ...

appdomainmanager!ReportServer_0-1!13e4!08/09/2012-11:07:03:: v VERBOSE: Appdomain:3 ReportServer_REPORTING_0-1-129889760220267707 即将卸载。

ShutDownMessage：关键目录的更改通知。

bin dir 更改或目录重命名

HostingEnvironment 启动关闭

关键目录的更改通知。

bin dir 更改或目录重命名

关键目录的更改通知。

bin dir 更改或目录重命名

关键目录的更改通知。

bin dir 更改或目录重命名

webserver!ReportServer_0-1!13e4!08/09/2012-11:07:03:: i INFO: 报告 Web 服务器已停止

appdomainmanager!DefaultDomain!b30!08/09/2012-11:07:08:: i INFO: Appdomain:3 ReportServer_REPORTING_0-1-129889760220267707 未注册。

rshost!rshost!b30!08/09/2012-11:07:08::i INFO：应用程序域类型 ReportServer 统计信息：创建：1，卸载：1，失败：

**更新**：问题是使用 PSRemoting 和 Get-Content 获取 RDL 文件的字节。没有 PSRemoting 的相同脚本 ps1 是正确的。

对于某些 RDL 文件，使用 psremoting 时出现错误。

```
#Load the RDL Binary 
[Byte[]]$rptContent = Get-Content $rptReference -Encoding byte 
```

解决方案：使用**[System.IO.File]::ReadAllBytes($sourceFile)**

参考：

[http://www.vistax64.com/powershell/203663-get-content-encoding-byte-problem-v1-v2-ctp3.html](http://www.vistax64.com/powershell/203663-get-content-encoding-byte-problem-v1-v2-ctp3.html)

加载二进制文件时，Get-Content 非常占用内存且效率低下。每个字节都被包装到 PSObject 中。我建议使用 .Net 函数（.Net v4 有 File.ReadAllBytes 方法） – @user1578107

[Powershell FTP 发送大文件 System.OutOfMemoryException](https://stackoverflow.com/questions/5030483/powershell-ftp-send-large-file-system-outofmemoryexception)

“我自己遇到了类似的问题，RAM 使用量达到 GB 上传 3MB 文件时，我发现替换：”

```
 $content = gc -en byte $sourceFile 
```

和：

```
 $content = [System.IO.File]::ReadAllBytes($sourceFile) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T00:58:44.837

这不是由某人重命名文件或文件夹引起的。

主要问题是您的脚本导致`System.OutOfMemoryException`

尝试分批上传报告或在尝试上传之间插入等待。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T07:10:15.853

使用**[System.IO.File]::ReadAllBytes($sourceFile)**

参考：

> 加载二进制文件时，Get-Content 非常占用内存且效率低下。每个字节都被包装到 PSObject 中。我建议使用 .Net 函数（.Net v4 有 File.ReadAllBytes 方法） – @user1578107

[http://www.vistax64.com/powershell/203663-get-content-encoding-byte-problem-v1-v2-ctp3.html](http://www.vistax64.com/powershell/203663-get-content-encoding-byte-problem-v1-v2-ctp3.html)

“我自己遇到了类似的问题，RAM 使用量达到 GB 上传 3MB 文件时，我发现替换：”

```
 $content = gc -en byte $sourceFile 
```

和：

```
 $content = [System.IO.File]::ReadAllBytes($sourceFile) 
```

# regex - 正则表达式中的匹配范围

> ID：11879472
> 
> 赞同：3
> 
> 时间：2012-08-09T08:28:34.483
> 
> 标签：regex

我知道在正则表达式中，可以通过花括号将所需的匹配数指定为 {min,max}

我正在阅读这篇文章：http: [//msdn.microsoft.com/en-us/library/ms537509%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/ms537509%28v=vs.85%29.aspx)

并且无法理解 {1,} 或 {0,} 等的含义。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T08:29:55.940

这是正则表达式中的无穷大

`{0,}`=`*`是平均值`{0,infinity}`

`{1,}`=`+`是平均值`{1,infinity}`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T08:30:07.117

这意味着没有上限，而是下限。例如

见：[http ://regexr.com?31piu](http://regexr.com?31piu)

`\d{3,}`

将匹配 1 的所有序列，其中有超过 3 个连续 1，无论是四个 1，还是十个 1

**1111** ---- **1111111111** ---- *11* -- *1* ---- **11111111111111111111** -- **111**

同样的方法，

{1,} 表示 1 个或多个实例，即`+` 通配符

{0,} 表示 0 个或多个实例，即`*`通配符

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T08:33:29.593

{n,} where n >= 0 ：“重复前一个项目至少 n 次。贪婪，所以在尝试与前一个项目较少匹配的排列之前，将匹配尽可能多的项目，直到前一个项目的位置只匹配 n 次。”

参考[这个正则表达式参考](http://www.regular-expressions.info/reference.html/)，里面有很多方便的例子：

# r - 使用 toLatex() 或 xtable() 将 mlogit 汇总结果导出到 Latex

> ID：11879473
> 
> 赞同：2
> 
> 时间：2012-08-09T08:28:38.447
> 
> 标签：r, xtable

我正在尝试将[mlogit()](http://cran.r-project.org/web/packages/mlogit/index.html)结果导出到乳胶表中，但我的尝试都没有成功！

1）首先我尝试使用包[xtable()](http://cran.r-project.org/web/packages/xtable/index.html)：

```
> library(xtable)
> s<-summary(mx1)
> tab<-xtable(s, caption= "RPL results")
Errore in UseMethod("xtable") : 
no applicable method for 'xtable' applied to an object of class "c('summary.mlogit', 'mlogit')" 
```

2) 然后我尝试使用 memsic() 包中的 toLatex()：

```
> library("memisc")
> s<-summary(mx1)
> toLatex(mtable(s))
Errore in UseMethod("getSummary") : 
no applicable method for 'getSummary' applied to an object of class "c('summary.mlogit', 'mlogit')" 
```

任何想法？似乎 mlogit() 缺少 getSummary() 方法

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T09:10:06.160

正如@JakobR 所说`xtable`，不知道如何处理类对象`mlogit`或`summary.mlogit`. 但是由于`xtable`依赖`S3`OOP 系统很容易添加这样的方法（例如`xtable.summary.lm`用作模板）

```
require(mlogit)
require(xtable)

### from help page
data(Fishing)
Fish <- mlogit.data(Fishing, varying = c(2:9), shape = "wide", choice = "mode")
modelsum <- summary(mlogit(mode ~ price + catch, data = Fish))
modelsum$CoefTable

##                     Estimate Std. Error  t-value   Pr(>|t|)
## boat:(intercept)     0.87137  0.1140428   7.6408 2.1538e-14
## charter:(intercept)  1.49889  0.1329328  11.2755 0.0000e+00
## pier:(intercept)     0.30706  0.1145738   2.6800 7.3627e-03
## price               -0.02479  0.0017044 -14.5444 0.0000e+00
## catch                0.37717  0.1099707   3.4297 6.0420e-04 
```

现在我们可以编写自己的方法：

```
## check the class first
class(modelsum)
[1] "summary.mlogit" "mlogit" 

### write a method from summary.mlogit
xtable.summary.mlogit <- function (x, caption = NULL, label = NULL, align = NULL, digits = NULL, 
    display = NULL, ...) 
{
    x <- data.frame(x$CoefTable, check.names = FALSE)
    class(x) <- c("xtable", "data.frame")
    caption(x) <- caption
    label(x) <- label
    align(x) <- switch(1 + is.null(align), align, c("r", "r", 
        "r", "r", "r"))
    digits(x) <- switch(1 + is.null(digits), digits, c(0, 4, 
        4, 2, 4))
    display(x) <- switch(1 + is.null(display), display, c("s", 
        "f", "f", "f", "f"))
    return(x)
} 
```

让我们做一个简单的测试

```
xtable(modelsum, digits = 2)

## % latex table generated in R 2.15.1 by xtable 1.7-0 package
## % Thu Aug  9 09:09:26 2012
## \begin{table}[ht]
## \begin{center}
## \begin{tabular}{rrrrr}
##   \hline
##  & Estimate & Std. Error & t-value & Pr($>$$|$t$|$) \\ 
##   \hline
## boat:(intercept) & 0.87 & 0.11 & 7.64 & 0.00 \\ 
##   charter:(intercept) & 1.50 & 0.13 & 11.28 & 0.00 \\ 
##   pier:(intercept) & 0.31 & 0.11 & 2.68 & 0.01 \\ 
##   price & -0.02 & 0.00 & -14.54 & 0.00 \\ 
##   catch & 0.38 & 0.11 & 3.43 & 0.00 \\ 
##    \hline
## \end{tabular}
## \end{center}
## \end{table} 
```

小编辑，因为 OP 要求重要星星支持（我知道[该`asterisk`功能看起来不优雅](https://stackoverflow.com/questions/11878386/what-exactly-is-elegant-code-in-r)）

```
## function to add star...

asterisk <- function(y) ifelse(y < 0.001, "***", 
                            ifelse(y < 0.01, "**" ,
                               ifelse(y < 0.05, "*",
                                  ifelse(y < 0.1, ".", ""))))

DF <- read.table(text = capture.output(data.frame(modelsum$CoefTable)))
DF$V6 <- asterisk(DF[,4])

names(DF) <- c(colnames(modelsum$CoefTable), " ")
xtable(DF)

## % latex table generated in R 2.15.1 by xtable 1.7-0 package
## % Thu Aug  9 11:46:31 2012
## \begin{table}[ht]
## \begin{center}
## \begin{tabular}{rrrrrl}
##   \hline
##  & Estimate & Std. Error & t-value & Pr($>$$|$t$|$) &   \\ 
##   \hline
## boat:(intercept) & 0.87 & 0.11 & 7.64 & 0.00 & *** \\ 
##   charter:(intercept) & 1.50 & 0.13 & 11.28 & 0.00 & *** \\ 
##   pier:(intercept) & 0.31 & 0.11 & 2.68 & 0.01 & ** \\ 
##   price & -0.02 & 0.00 & -14.54 & 0.00 & *** \\ 
##   catch & 0.38 & 0.11 & 3.43 & 0.00 & *** \\ 
##    \hline
## \end{tabular}
## \end{center}
## \end{table} 
```

受此[线程启发的解决方案](https://stat.ethz.ch/pipermail/r-help/2008-July/166696.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-09T08:42:05.107

问题是，`xtable`现在不知道如何处理类似的事情，`summary.mlogit` 但是您可以使用例如提取系数表，`s$CoefTable`因此`xtable(s$CoefTable)`可以工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T11:56:37.537

如果您只使用包中的函数，您也可以在不编写函数的情况下获得一个漂亮的汇总`latex`表`Hmisc`。尝试

```
library(Hmisc)
latex(modelsum$CoefTable, digits=3) # using @dickoa's example 
```

如您所见，这为您提供了类似于使用@dickoa 的解决方案获得的东西。

```
# With caption
latex(modelsum$CoefTable, digits=3, 
      caption='A mlogit summary table') 
```

您可以阅读帮助文件，从中可以获得很多选项（`?latex`）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T10:56:33.493

关于 memisc 包的 mtable() 函数，一种解决方案是编写一个自定义 getSummary 方法，如此处建议的函数 lme4()：[https ://stat.ethz.ch/pipermail/r-sig-mixed-models /2009q1/002058.html](https://stat.ethz.ch/pipermail/r-sig-mixed-models/2009q1/002058.html)

```
library(lme4)
library(memisc)

### create three models
fm1 <- lmer(Reaction ~ 1 + (Days|Subject), sleepstudy)
fm1.1 <- lmer(Reaction ~ Days + (Days|Subject), sleepstudy)
fm1.2 <- lmer(Reaction ~ as.factor(Days) + (Days|Subject), sleepstudy)

### note: need to run the code below fro setCoefTemplate and
### getSummary.lmer first

mtable("Model 1"=fm1, "Model 2"=fm1.1, "Model 3"=fm1.2,
                coef.style = "est.ci", # using "homegrown" est.ci, specified above
                summary.stats=c("AIC","BIC"),
                getSummary = "getSummary.lmer")#,

setCoefTemplate(
  est.ci=c(
    est = "($est:#)($p:*)",
    ci = "[($lwr:#),($upr:#)]"))

getSummary.lmer <- function (obj, alpha = 0.05, ...)
{
     require(lme4)
     smry <- summary(obj)
     #N <- if (length(weights(obj))) ### NOTE: how to deal with groups/samp size?
     #    sum(weights(obj))
     #else sum(smry$df[1:2])
     coef <- smry at coefs
     lower <- qnorm(p = alpha/2, mean = coef[, 1], sd = coef[,2])
     upper <- qnorm(p = 1 - alpha/2, mean = coef[, 1], sd = coef[,2])
     if (ncol(smry at coefs) == 3) {
        p <- (1 - pnorm(smry at coefs[,3]))*2 # NOTE: no p-values for lmer() due to
                                              # unclear dfs; calculate p-values based on z
        coef <- cbind(coef, p, lower, upper)
        } else {
                coef <- cbind(coef, lower, upper) # glmer will have 4 columns with p-values
                }
     colnames(coef) <- c("est", "se", "stat", "p", "lwr", "upr")
     #phi <- smry$dispersion
     #LR <- smry$null.deviance - smry$deviance
     #df <- smry$df.null - smry$df.residual
     ll <- smry at AICtab[3][,1]
     deviance <- smry at AICtab[4][,1]
     #if (df > 0) {
     #    p <- pchisq(LR, df, lower.tail = FALSE)
     #    L0.pwr <- exp(-smry$null.deviance/N)
     #    McFadden <- 1 - smry$deviance/smry$null.deviance
     #    Cox.Snell <- 1 - exp(-LR/N)
     #    Nagelkerke <- Cox.Snell/(1 - L0.pwr)
     #}
     #else {
     #    LR <- NA
     #    df <- NA
     #    p <- NA
     #    McFadden <- NA
     #    Cox.Snell <- NA
     #    Nagelkerke <- NA
     #}
     AIC <- smry at AICtab[1][,1] # NOTE: these are both data.frames? not sure why...
     BIC <- smry at AICtab[2][,1]
     ### NOTE: don't see a similar slot for "xlevels" to get levels of
     ###        factor variables used as predictors; for time being, force
     ###        user to specify explicitly; nope that didn't work...
     #if (fac != NULL) {
     #  n <- length(fac)
     #  xlevels <- vector(n, mode = "list")
     #  for (i in 1:n) {
     #      xlevels[i] <- levels(obj at frame[,fac[i]])
     #      }
     #  }
     #sumstat <- c(phi = phi, LR = LR, df = df, p = p, logLik = ll,
     #    deviance = deviance, McFadden = McFadden, Cox.Snell = Cox.Snell,
     #    Nagelkerke = Nagelkerke, AIC = AIC, BIC = BIC, N = N)
     sumstat <- c(logLik = ll, deviance = deviance, AIC = AIC, BIC = BIC)
     list(coef = coef, sumstat = sumstat,
         contrasts = attr(model.matrix(obj), "contrasts"),
         xlevels = NULL, call = obj at call)
} 
```

# glassfish - Glassfish、Apache (AJP) 和 Internet Explorer

> ID：11879479
> 
> 赞同：0
> 
> 时间：2012-08-09T08:28:58.357
> 
> 标签：glassfish, ajp

我们有一个 Glassfish 应用程序在端口 8080 上运行。

该应用程序位于使用 AJP 配置的 Apache httpd 服务器后面：

```
ProxyRequests Off
<Proxy *>
    AddDefaultCharset Off
    Order deny,allow
    Allow from all
</Proxy>

<Location />
    ProxyPass        ajp://example.org:8009/
    ProxyPassReverse ajp://example.org:8009/
</Location> 
```

使用 Safari、Firefox 或 Opera 时一切正常。如果我们在某个地方使用 IE，a`2000`会在输出`2000\n`之前添加：我们会在 HTML 页面的开头得到 a。

```
2000
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head>
[...] 
```

然后，这会削弱页面。

如果我们直接连接到端口 8080 上的 Glassfish，一切都很好。

**编辑**：

根据[http://java.net/jira/browse/GLASSFISH-18341](http://java.net/jira/browse/GLASSFISH-18341)，默认 Apache 设置应更新为

```
BrowserMatch ".*MSIE [2-5]\..*" \ 
nokeepalive ssl-unclean-shutdown \ 
downgrade-1.0 force-response-1.0 
```

因为 IE >= 6.0 不需要降级。

问题依然存在

有什么提示吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T11:33:38.280

```
BrowserMatch ".*MSIE [2-5]\..*" \ 
nokeepalive ssl-unclean-shutdown \ 
downgrade-1.0 force-response-1.0 
```

确实是正确答案！小心扫描您的 httpd.conf 文件以获取更多信息

```
SetEnvIf User-Agent ".*MSIE.*" \ 
nokeepalive ssl-unclean-shutdown \ 
downgrade-1.0 force-response-1.0 
```

可能存在（并且应该进行调整）

# sublimetext2 - 我可以为崇高的片段添加日期时间吗？

> ID：11879481
> 
> 赞同：28
> 
> 时间：2012-08-09T08:29:11.743
> 
> 标签：sublimetext2

我想创建一个将添加文件注释的片段，但我希望该片段自动创建 DateTime。一个崇高的片段可以做到这一点吗？

```
<snippet>
    <content><![CDATA[
/**
 * Author:      $1
 * DateTime:    $2
 * Description: $3
 */

]]></content>
    <!-- Optional: Set a tabTrigger to define how to trigger the snippet -->
    <tabTrigger>/header</tabTrigger>
    <!-- Optional: Set a scope to limit where the snippet will trigger -->
    <scope>source.css,source.js,source.php</scope>
</snippet> 
```

* * *

## 回答 #1

> 赞同：101
> 
> 时间：2012-12-14T16:40:23.173

工具 > 新插件

粘贴这个：

```
import datetime, getpass
import sublime, sublime_plugin
class AddDateCommand(sublime_plugin.TextCommand):
    def run(self, edit):
        self.view.run_command("insert_snippet", { "contents": "%s" %  datetime.date.today().strftime("%d %B %Y (%A)") } )

class AddTimeCommand(sublime_plugin.TextCommand):
    def run(self, edit):
        self.view.run_command("insert_snippet", { "contents": "%s" %  datetime.datetime.now().strftime("%H:%M") } ) 
```

将其保存为 ~/Library/Application Support/Sublime Text 2/Packages/User/add_date.py

然后，在 Preferences > Key Bindings - User 中，添加：

```
{"keys": ["ctrl+shift+,"], "command": "add_date" },
{"keys": ["ctrl+shift+."], "command": "add_time" }, 
```

`strftime` [您可以根据自己的喜好](http://docs.python.org/2/library/time.html#time.strftime)自定义传递给的参数。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-01-28T17:34:17.557

Nachocab，这是一个很好的答案——对我帮助很大。我为自己创建了一个稍微不同的版本

**~/Library/Application Support/Sublime Text 2/Packages/User/datetimestamp.py：**

```
import datetime, getpass
import sublime, sublime_plugin

class AddDateTimeStampCommand(sublime_plugin.TextCommand):
    def run(self, edit):
        self.view.run_command("insert_snippet", { "contents": "%s" %  datetime.datetime.now().strftime("%Y-%m-%d %H:%M:%S") } )

class AddDateStampCommand(sublime_plugin.TextCommand):
    def run(self, edit):
        self.view.run_command("insert_snippet", { "contents": "%s" %  datetime.datetime.now().strftime("%Y-%m-%d") } )

class AddTimeStampCommand(sublime_plugin.TextCommand):
    def run(self, edit):
        self.view.run_command("insert_snippet", { "contents": "%s" %  datetime.datetime.now().strftime("%H:%M:%S") } ) 
```

**首选项 > 键绑定 - 用户：**

```
{"keys": ["super+alt+ctrl+d"], "command": "add_date_time_stamp" },
{"keys": ["super+alt+d"], "command": "add_date_stamp" },
{"keys": ["super+alt+t"], "command": "add_time_stamp" } 
```

如果没有您的帮助，我将无法做到这一点！我在谷歌上搜索了大约一个小时，终于被你的回答所感动！非常感谢！

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-08-15T18:33:37.233

您可能需要检查 InsertDate 包：[https ://github.com/FichteFoll/InsertDate](https://github.com/FichteFoll/InsertDate)

在自述文件中，您可以找到如何使用[宏将时间戳插入片段](https://github.com/FichteFoll/InsertDate#snippet-macros)的示例。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2019-06-15T15:25:15.940

我只是通过一个简单的插件和元数据文件（.tmPreference 文件）来实现这个功能（在**sublime3**上），但我不知道这是否有效。有办法，

**1\. 创建一个 .tmPreference 文件，将一些你想使用的变量放在片段中。** 有一个例子，你可以把内容保存在*Packages* /User/Default.tmPreference

```
<plist version="1.0">
<dict>
    <key>name</key>
    <string>Global</string>
    <key>scope</key>
    <string />
    <key>settings</key>
    <dict>
        <key>shellVariables</key>
        <array>
            <dict>
                <key>name</key>
                <string>TM_YEAR</string>
                <key>value</key>
                <string>2019</string>
            </dict>
            <dict>
                <key>name</key>
                <string>TM_DATE</string>
                <key>value</key>
                <string>2019-06-15</string>
            </dict>
            <dict>
                <key>name</key>
                <string>TM_TIME</string>
                <key>value</key>
                <string>22:51:16</string>
            </dict>
        </array>
    </dict>
</dict>
</plist> 
```

**2\. 创建一个插件，插件加载时会更新.tmPreference 文件中的shell 变量。**

```
import sublime, sublime_plugin
import time
from xml.etree import ElementTree as ET

# everytime when plugin loaded, it will update the .tmPreferences file.
def plugin_loaded():
    # res = sublime.load_resource('Packages/User/Default.tmPreferences')
    # root = ET.fromstring(res)
    meta_info = sublime.packages_path() + '\\User\\Default.tmPreferences'
    tree = ET.parse(meta_info)
    eles = tree.getroot().find('dict').find('dict').find('array').findall('dict')

    y = time.strftime("%Y", time.localtime())
    d = time.strftime("%Y-%m-%d", time.localtime())
    t = time.strftime("%H:%M:%S", time.localtime())

    for ele in eles:
        kvs = ele.getchildren()
        if kvs[1].text == 'TM_YEAR':
            if kvs[3].text != y:
                kvs[3].text = y
                continue
        elif kvs[1].text == 'TM_DATE':
            if kvs[3].text != d:
                kvs[3].text = d
                continue
        elif kvs[1].text == 'TM_TIME':
            if kvs[3].text != t:
                kvs[3].text = t
                continue

    tree.write(meta_info) 
```

**3\. 使用您在 .tmPreference 文件中定义的 shell 变量。**

```
<snippet>
    <content><![CDATA[
/**
  ******************************************************************************
  * \brief      ${1:}
  * \file       $TM_FILENAME
  * \date       $TM_DATE
  * \details    
  ******************************************************************************
  */

${0:}

/****************************** Copy right $TM_YEAR *******************************/
        ]]></content>
    <!-- Optional: Tab trigger to activate the snippet -->
    <tabTrigger>cfc</tabTrigger>
    <!-- Optional: Scope the tab trigger will be active in -->
    <scope>source.c, source.c++</scope>
    <!-- Optional: Description to show in the menu -->
    <description>c file comment</description>
</snippet> 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-07T13:17:25.447

您可以使用 Sublime Text 2 的[SMART Snippets](https://github.com/BoundInCode/SMART-Snippets)插件。

> 借助 SMART Snippets，您现在可以使用 Python 动态创建片段

[我对另一个问题](https://stackoverflow.com/questions/12768169/get-todays-date-from-sublime-2/12768450#12768450)做了一些研究，我很确定这个插件可以解决你的问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-10-08T16:22:04.623

它在[https://github.com/ngocjr7/sublime-snippet-timestamp中解决了](https://github.com/ngocjr7/sublime-snippet-timestamp)

将所有文件复制到 sublime text 的 Packages/User 目录。

根据需要配置 sublime-snippet 文件（cpp_template.sublime-snippet 用于 c++ 和 py_template.sublime-snippet 用于 python）

现在您可以创建一个简单的代码段，并且每次按 command + s 时都会更新日期。command + s 还有保存文件的功能。

解释

因为片段不支持动态变量，所以我使用 Default.tmPreferences 中定义的静态变量 DATE 并在我们想要创建片段时更新此变量。

我使用插件（命令）updatetm 来更新 Default.tmPreferences 中的 DATE。

我希望日期和时间自动更新或至少是被动更新。所以我为keystrockes command + s添加了一个名为updatetm command的函数。为此，我使用另一个插件是 chain.py 来调用键盘映射上的多个命令（updatetm 命令和默认命令（保存）。在 Default (OSX).sublime-snippet 文件中定义的键盘映射。

* * *

## 回答 #7

> 赞同：-4
> 
> 时间：2012-08-10T00:02:52.287

[官方 ST 论坛上的](https://sublimetext.com/forum/viewtopic.php?f=3&t=7577)这篇文章回答了您的问题并提供了一个接近的选择。

总之，不，您目前不能从 ST 片段插入日期时间。

# silverlight - 使用 Silverlight 授权管理对单个控件的访问

> ID：11879483
> 
> 赞同：0
> 
> 时间：2012-08-09T08:29:26.020
> 
> 标签：silverlight, autoresize, restrictions

我正在使用 Silverlight 制作应用程序。

我必须限制某些用户对某些控件的访问。

示例：user1 不能使用删除按钮...

有没有框架或可以帮助我的东西？如果我使用会话会有所帮助吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T23:49:41.943

我找到了一个可以做我想做的事情的工具。它被称为**视觉卫士**。这是一个非常好的和强大的工具。

在[文档中](http://www.visual-guard.com/download/GS_VG8_PB_US.pdf)

> Visual Guard 旨在尽可能多地自动化功能，以便管理 PowerBuilder 应用程序中的安全性。这是在几个级别上执行的：
> 
> 管理特定于 PowerBuilder Visual Guard 的操作可管理关键 PowerBuilder 对象属性的修改： • 启用/禁用控件（按钮、图形、列表框等）。）。• 使控件（按钮、图形、列表框等）可见/不可见。• 启用/禁用菜单项。• 使菜单项及其工具栏图标可见/不可见。• 隐藏/显示数据窗口列。• 启用/禁用数据窗口列 • 更改数据窗口 sql 语句的 WHERE 子句。• 过滤数据窗口中显示的行。• 修改文本控件（列名、上下文帮助等） • 修改数据窗口元素的属性（数据输入限制、更改列的验证消息或验证规则等）。
> 
> 管理特定于您的类库的操作
> 
> 数据驱动的安全

还有更多

我希望它会帮助某人

# jquery - 触发（创建）后未显示 Jquery Mobile 动态列表？

> ID：11879486
> 
> 赞同：0
> 
> 时间：2012-08-09T08:29:27.187
> 
> 标签：jquery, json, mobile

我希望有人可以帮助我解决我的问题，因为我还没有找到有类似问题的人......我有以下代码位于我的移动应用程序的第二页。第二页使用第一页的链接打开，第二页将 2 个 JSON 字符串加载到列表视图和字段集中。

我的问题是，在第一次加载页面时，动态 html 没有注入到适当的区域，但是如果我刷新页面，则 html/data 会被注入。

我错过了什么？我应该尝试使用不同的方法（例如页面加载等）加载数据吗？

```
<script src="/js/json.js" type="text/javascript"></script>
<script type="text/javascript" language="javascript"> 
    $(document).bind("pageinit", function(){
        //stop orientation changes!!!
        $.mobile.orientationChangeEnabled = false;          
        //populate drug classes list
        $.each(jQuery.parseJSON(jsonDrugClasses), function(i,v){
            $("#DrugClassesList").append("<li><a href='drugclass.html' rel='" + v["ClassID"] + "' title='"+v["ClassName"]+"'>" + v["ClassName"] + "</a></li>").trigger("create");
        }); 
        $("#DrugClassesList").trigger("create");
        $("#DrugClassesList").listview("refresh"); /* required to apply styling */

        //checkbox list dynamicly generated 
        DrugsSorted = $(jQuery.parseJSON(jsonDrugs)).sort(sortDrugName);
        $("#DrugsCBList").append('<fieldset data-role="controlgroup" data-theme="e" id="cbFieldSet">');
        $.each(DrugsSorted, function(k,v){
            $("#cbFieldSet").append('<input type="checkbox" name="'+v["DrugID"]+'" id="'+v["DrugID"]+'" value="'+v["DrugID"]+'"/><label for="'+v["DrugID"]+'">'+v["DrugName"]+'</label>');
        });
        $("#DrugsCBList").append('</fieldset>');
        $("#DrugsCBList").trigger("create");

    });
</script>
 <script src="/jquery-mobile/jquery.mobile-1.1.1.min.js" type="text/javascript"></script>
<link rel="stylesheet" href="css/reset.css" type="text/css" />
<link href="jquery-mobile/jquery.mobile-1.1.1.css" rel="stylesheet" type="text/css" />
<link href="jquery-mobile/jquery.mobile.structure-1.1.1.min.css" rel="stylesheet" type="text/css"/>    
<link rel="stylesheet" type="text/css" href="css/ddi.css">

<!-- Collapseable menus -->
<div data-role="collapsible-set" data-theme="c" data-content-theme="e" data-split-icon="arrow-r" data-iconpos="right">
  <div data-role="collapsible">
    <h3>Drug Classes</h3>
    <p style="padding:0px; margin:0px;">
    <div data-role="fieldcontain">
      <ol data-role="listview" data-inset="true" data-theme="e" id="DrugClassesList">
        <!-- Data loaded dynamically -->
      </ol>
    </div>
    </p>
  </div>
  <div data-role="collapsible">
    <h3>Drugs</h3>
    <p style="padding:0px; margin:0px;">
    <div data-role="fieldcontain">
      <div id="DrugsCBList"><!-- drugs loaded into here --></div>
    </div>
    </p>
  </div>
</div>
</body 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T09:29:16.737

如果是我，我不会使用 pageinit 事件。

```
$("link of the second page").click(function(){
 window.location.hash="#second_page_id";  

 //put your initialization code here.

 setTimeout(function () {
    $("#listviewid").listview("refresh");  
 }, 0);  
}); 
```

# css - 如何创建一个包含两个 div 并自动拉伸的 div

> ID：11879492
> 
> 赞同：0
> 
> 时间：2012-08-09T08:29:57.070
> 
> 标签：css

大家好，我正在尝试创建两个 div。一个 div 具有不同的样式，如下所示

```
#subpage_left
{
    width:167px;
    border:solid 2px red;
    background-image:url(../../images2/images/altsayfa_menu_bg.jpg); 
    background-repeat: repeat;

    float:left;
} 
```

第二个显示来自我的数据的文本

```
#subpage_right
{
    width:700px;
    background-color:White;
    border:solid 2px red;
    font-family: 'Museo300Regular';

    float:left;

} 
```

我想将这些 div 并排放置，但我的数据来自“subpage_right”div，所以这个 div 按文本长度拉伸，而“subpage_left”div 没有拉伸我的意思是这些 div 的高度与您看到的图像不同

![在此处输入图像描述](../Images/39c9f7e12bf84eca4e9d8ee1683e777d.png)

所以我需要一个像包装器这样的css来自动拉伸这些div，但我该怎么做呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T08:32:14.190

为此，您可以为此**显示：table**属性。像这样写：

```
#subpage_left,#subpage_right{
 display:table-cell;
} 
```

检查更多[http://jsfiddle.net/9Eytv/](http://jsfiddle.net/9Eytv/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T09:21:32.753

这就是我要做的：

```
#maincont
{
position:relative;
width: 867px; 
height: auto;}

#subpage_left
{
width:167px;
border:solid 2px red;
background-image:url(../../images2/images/altsayfa_menu_bg.jpg); 
background-repeat: repeat;
float:left;
}

#subpage_right
{
width:700px;
background-color:White;
border:solid 2px red;
font-family: 'Museo300Regular'; /* Use some standard font Like Arial */
float:left;
}
.clear
{
clear:both;
} 
```

和 div 的

```
<div id="maincont">
<div id="subpage_left"></div>
<div id="subpage_right"></div>
<div class="clear"></div>
</div> 
```

希望这对你有用:)

# php - Yii with() 方法

> ID：11879496
> 
> 赞同：1
> 
> 时间：2012-08-09T08:30:05.767
> 
> 标签：php, yii

我在 Yii 中得到了这段代码：

```
 $comment = Comment::model()->with(array('issue'=> array(
               'condition'=>'project_id = 1')))->findAll(array( 
                      'order' => 't.create_time DESC', 'limit' => 2, )); 
```

当我将“'limit'=>2”更改为“'limit'=>null”时，它通过了。

据我了解，如果我更改了这些值，等效查询将更改为：

```
SELECT tbl_comment . * , tbl_issue . *    FROM tbl_comment
LEFT JOIN tbl_issue ON tbl_issue.id = tbl_comment.issue_id WHERE tbl_issue.project_id = 1
LIMIT null 
```

我在 mysql 命令行上尝试过，上面的查询没有通过 mysql，但是当我在 Yii 中使用上面的 CODE 时它确实通过了。

那么，你能告诉我为什么会发生这种冲突吗？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T10:37:55.253

当您执行 mysql 时，他们在 limit 中使用 null 作为“limit null”是没有意义的。所以当你设置

```
"limit"=>null 
```

在条件下，Yii 不将其包含在查询中，并且查询执行无限制。

请在运行时文件夹中有一个 at logs，mysql 查询记录在那里。在 application.log 文件中查找日志。

如果您的 mysql 查询没有记录在那里，那么更改您的配置文件 main.php 如下

```
// db configuration
'db'=>array(
  'connectionString'=>...
    'enableParamLogging'=>true,
    'enableProfiling'=>true,
),

// log configuration
'log'=>array(
            'class'=>'CLogRouter',
            'routes'=>array(
                array(
                    'class'=>'CFileLogRoute',
                    'levels'=>'error, warning, trace, info, profile, packages.solr.ASolrConnection',
                ),
                // uncomment the following to show log messages on web pages
                 /*
                array(
                    'class'=>'CWebLogRoute',
                ),
                 */

            ),
        ), 
```

现在您的查询将记录在那里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T08:51:16.210

尝试在 Comment 模型中创建一个新的关系，如下所示：

```
class Comment extends CActiveRecord
{
    ......

    public function relations()
    {
        return array(
            'issues'=>array(self::HAS_ONE, 'Issue', 'issue_id'),
        );
    }
} 
```

并这样称呼它：

```
 $comment = Comment::model()->with('issues'); 
```

无论如何，您的表格结构看起来有点奇怪：评论只有一个问题吗？

# asp.net - 如何将页面访问仅限于本地主机？

> ID：11879500
> 
> 赞同：10
> 
> 时间：2012-08-09T08:30:15.017
> 
> 标签：asp.net, security, localhost

asp.net 中有没有办法限制仅从本地主机访问网页？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-10T11:20:41.080

```
 if (!HttpContext.Current.Request.IsLocal)
     { 
       Response.Status = "403 Forbidden";
       Response.End();
     } 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-09T14:39:31.097

如果您想为“网页”执行此操作，那么我会使用 IsLocal，但如果您想要一个子目录解决方案，我会使用 Url Rewrite 2。http [://www.microsoft.com/web/gallery/install。 aspx?appid=urlrewrite2](http://www.microsoft.com/web/gallery/install.aspx?appid=urlrewrite2)。如果您还没有安装它，请去获取它，因为它非常有用。我相信它将成为 IIS8 的标准。

然后将其添加到您的 web.config 下`<system.webServer/>`

```
<rewrite>
 <rules>
    <!-- if this rule matches stopProcessing any further rules -->
    <rule name="Block Remote Access to Admin" stopProcessing="true" patternSyntax="ECMAScript" enabled="true">
      <!-- specify secure folder matching trailing / or $ == end of string-->
      <match url="projects(/|$)" ignoreCase="true" />
      <conditions logicalGrouping="MatchAll">
        <!-- Allow local host -->
        <add input="{REMOTE_ADDR}" pattern="localhost" ignoreCase="true" negate="true" />
        <add input="{REMOTE_ADDR}" pattern="127.0.0.1" negate="true" />
        <add input="{REMOTE_ADDR}" pattern="::1" negate="true" />
      </conditions>
      <!-- by default, deny all requests. Options here are "AbortRequest" (drop connection), "Redirect" to a 403 page, "CustomResponse", etc.  -->
      <action type="CustomResponse" statusCode="403" statusDescription="Forbidden" statusReason="Access to this URL is restricted"/>
      <!-- or send the caller to an error page, home page etc
           <action type="Redirect" url="/public/forbidden.htm" redirectType="Temporary" />
      -->
    </rule>
  </rules>
</rewrite> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T13:26:36.417

这可能是一个解决方案：

```
protected void Page_Load(object sender, EventArgs e)
{
    string localhost = Request.Url.Authority;
    if (localhost.IndexOf("localhost") != 0)
        Response.Redirect("defalut.aspx");
} 
```

# operating-system - 为自己的智能手机使用自行开发的 Bada 应用程序

> ID：11879508
> 
> 赞同：0
> 
> 时间：2012-08-09T08:30:41.163
> 
> 标签：operating-system, licensing, smartphone, signing, bada

你好 Stackoverflow 社区。

我正在研究最常见的智能手机操作系统以及开发 .

目前，我在获取有关 Bada OS 的所需信息时遇到了一些麻烦。

情况：

假设我有 10 部 Bada 智能手机并为它们开发了一个应用程序。是否可以直接在手机上安装（如 Android 中的 apk 文件）？如果是，是否有任何限制，例如开发人员签名（36 个月许可证/对系统资源的访问受限等）？

如果这是不可能的：

这意味着只能通过三星商店进行安装，对吗？我在这个网站上找到了一些关于这种方式的信息：http: [//developer.bada.com/support-publish](http://developer.bada.com/support-publish)。有人提到了认证过程。是否会收取任何费用（例如在 symbian 中）？

我已经用各种关键字使用了很多谷歌。也许我只是错过了正确的搜索词。

如果有人为我得到了一些答案，那就太好了（最好的情况是有资源确认这些陈述）

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T11:29:05.470

好的，经过几天的寻找答案，这是我的最终总结：

**第一种方式：**

*   您必须在 developer.bada.com 创建一个帐户
*   其次，您必须将您的应用程序上传到您的帐户并在那里生成一个清单文件
*   最后你可以在（最多 5 个）设备上下载它（如果你需要更多，你必须生成一个新的 Manifest => 重复这个过程）
*   它们对应用程序没有限制（您可以一直使用它而没有功能限制，例如无法访问网络）
*   他们不收取此过程的费用（注册/上传/下载等）

这种方式只是一个简短的总结。您还必须使用 Peyman Irani 注意到的“测试套件”。
（[http://developer.bada.com/article/Using-the-bada-Test-Kit](http://developer.bada.com/article/Using-the-bada-Test-Kit)）

**第二种方式：**

*   [在http://seller.samsungapps.com/main/sellerMain.as](http://seller.samsungapps.com/main/sellerMain.as)创建一个帐户
*   将应用程序上传到卖家网站。
*   现在您可以将该应用程序下载到所有 bada 设备
*   没有任何费用（！据我所知，未经测试！）
*   应用程序上传后，所有其他人都可以使用（因此这可能不是用于私人用途的应用程序的最佳解决方案）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T23:40:18.290

bada SDK 中的应用程序开发过程有两个用于测试应用程序的标准选项。第一个是模拟器，第二个是 Target-device，比如你的 wave 设备，但现在我要告诉你如何[使用 bada 测试工具包](http://developer.bada.com/article/Using-the-bada-Test-Kit/ "指导")。

在 bada OS 中，除非您在项目资源管理器右键单击弹出菜单中使用欺骗或 bada IDE 'Run as Target-release command'，否则您无法将任何应用程序包直接移动到手机存储中，但您仍然可以只测试一个应用程序 ID 所以您可以只测试一个版本的应用程序。那么如果你想测试你的应用程序的早期版本呢？答案是本文“bada 测试套件”的主题。

简而言之，步骤是，您通过三星 bada 开发者网站“developer.bada.com”（简称开发者网站）签署您开发的应用程序包，然后将其下载到您的手机。

在此过程中您需要付费，您应该将[TestKit应用程序](http://www.samsungapps.com/topApps/topAppsDetail.as?productId=G00001930369 "测试套件应用程序")安装到您的手机中，然后在开发者网站中使用TestKit提供的设备ID注册您的bada设备信息。

请记住，您开发的应用程序应该在开发人员站点的“我的应用程序”菜单中进行预配置，然后您应该下载 manifest.xml 文件并将其导入到您的项目中，然后再构建包，从现在开始，请检查以下步骤：制作测试套件项目“developer.bada.com/apis/myapp/testKit.do”。

PS：抱歉两个断开的链接，因为我是新来的，我可以在我的答案中发送 2 个链接。

# jquery - 响应式网站上的 Jquery 切换

> ID：11879509
> 
> 赞同：0
> 
> 时间：2012-08-09T08:30:44.677
> 
> 标签：jquery, responsive-design

我正在一个响应式网站上工作，我有一个包含类别的菜单。随着较小设备的视口缩小，类别框被隐藏，并且出现一个按钮，有人可以单击并使用 jquery 它切换类别导航。问题是，如果您在切换导航后重新调整屏幕大小，当您返回更大的视口时，它不会正确重新显示。我不确定如何解决这个问题，或者是否有更好的解决方法。

我在这里有一个例子：http: [//jsfiddle.net/kZ3kW/](http://jsfiddle.net/kZ3kW/)

帮助表示感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T09:16:02.477

问题是 jQuery.slideToggle() 将内联样式“显示”切换为“无”或“阻止”并且它一直保持在那里。因此，当您在移动视图中关闭菜单时，内联的“显示：无”将保留并覆盖所有 CSS 属性。

解决方案是不使用内联样式属性，而是使用 css 类。向您的 slideToggle() 添加回调，这将删除内联样式属性并添加类“打开”。之后将此添加到您的CSS：

```
.cat-tbl.open {
    display: block;   
} 
```

它会起作用。[在这里](http://jsfiddle.net/kZ3kW/43/)检查。

# php - 表单元素装饰器

> ID：11879514
> 
> 赞同：0
> 
> 时间：2012-08-09T08:31:03.723
> 
> 标签：php, zend-framework, zend-form, zend-decorators

我一直在尝试使用 Zend_Form 和装饰器创建自定义表单，所需的 html 格式如下：

```
<form enctype="application/x-www-form-urlencoded" method="post" action="">
    <div class="login_bx">
        <div id="txtAccount-label" class="txt_field">
            <label for="txtAccount" class="required">Account ID:</label>
        </div>
        <div class="inp_field">
            <input type="text" name="txtAccount" id="txtAccount" value="" style="width:250px">
        </div>
    </div>
</form> 
```

Zend_Form 类的内容如下：

```
$account    =   new Zend_Form_Element_Text('txtAccount');
        $account    ->  setLabel('Account ID:')
                    ->  setAttrib('style','width:250px')
                    ->  setRequired(true)
                    ->  addValidator('NotEmpty', true);

        $this->setDecorators(array(
            'FormElements',
            array(
                'HtmlTag', 
                array(
                    'tag'   =>  'div',
                    'class' =>  'login_bx',
                )
            ),
            'Form',
            array('FormErrors', array(
                'placement'                 =>  'prepend', 
                'markupElementLabelEnd'     =>  '</strong>', 
                'markupElementLabelStart'   =>  '<strong>', 
                'markupListStart'           =>  '<div class="errors_list" id="msg">', 
                'markupListEnd'             =>  '</div>', 
                'markupListItemStart'       =>  '<div class="error_item">', 
                'markupListItemEnd'         =>  '</div>'
            ))
        ));

        $this->addElements(array($account));

        $this->setElementDecorators(array(
            'ViewHelper',
            //'Errors',
            array(array(
                'data' => 'HtmlTag'
                ), array(
                    'tag'   =>  'div',
                    'class' =>  'inp_field'
                )
            ),
            array('Label', array(
                'tag'   =>  'div',
                'class' =>  'txt_field'
            ))
        )); 
```

当前呈现的html如下：

```
<form enctype="application/x-www-form-urlencoded" method="post" action="">
    <div class="login_bx">
        <div id="txtAccount-label">
            <label for="txtAccount" class="txt_field required">Account ID:</label>
        </div>
        <div class="inp_field">
            <input type="text" name="txtAccount" id="txtAccount" value="" style="width:250px">
        </div>
    </div>
</form> 
```

我不知道如何将类添加到包装标签的 DIV

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T12:09:48.167

代替

```
array('Label', array(
                'tag'   =>  'div',
                'class' =>  'txt_field'
            )) 
```

**采用**

```
array('Label', array(
                'tag'   =>  'div',
                'tagClass' =>  'txt_field'
            )) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T12:37:52.077

试试这个

```
$name = new Zend_From_Element_Text("txtName");
$name->setOptions(array('class'=>'css class name')); 
```

[http://forums.zend.com/viewtopic.php?f=69&t=1367](http://forums.zend.com/viewtopic.php?f=69&t=1367)

或这个

[如何为 zend 表单元素的标签和错误添加特殊类？](https://stackoverflow.com/questions/2595000/how-to-add-special-class-for-labels-and-errors-on-zend-form-elements)

# sql - 在 informix 存储过程参数中使用通配符

> ID：11879516
> 
> 赞同：1
> 
> 时间：2012-08-09T08:31:16.907
> 
> 标签：sql, informix

我在下面有一个 ibm informix 存储过程。我可以通过调用 squirrel 来获得这个过程的结果。问题来了，结果可能是巨大的，可能包含不必要的 20 多列和 100 行。因此，我需要使用输入参数（在过程中调用地址参数）而不是下面的第一个 NULL 参数，该参数必须包含通配符，如“052%”到特定结果。当我尝试使用通配符时，它确实返回空结果。

以空值调用

```
CALL sp_ccdr('2012-08-07 00:00:00.000', 
        '2012-08-08 00:00:00.000',  
        '0', NULL, NULL,NULL, NULL, NULL, NULL,
         NULL, '0','0',NULL,NULL,'f') 
```

使用通配符调用

```
CALL sp_ccdr('2012-08-07 00:00:00.000', 
        '2012-08-08 00:00:00.000',  
        '0', "052%", NULL,NULL, NULL, NULL, NULL,
         NULL, '0','0',NULL,NULL,'f') 
```

以及如何从结果集中选择一些列？

```
select col1 from (CALL sp_ccdr('2012-08-07 00:00:00.000', 
        '2012-08-08 00:00:00.000',  
        '0', "052%", NULL,NULL, NULL, NULL, NULL,
         NULL, '0','0',NULL,NULL,'f')) 
```

这没用。我收到语法错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T21:25:20.153

通常，Informix 不支持 CALL。某些 API 可能会为您将 CALL 转换为 EXECUTE PROCEDURE，但这不是您在上一个示例中需要做的。

```
SELECT col1
  FROM TABLE(MULTISET(sp_ccdr('2012-08-07 00:00:00.000', '2012-08-08 00:00:00.000',  
                              '0', "052%", NULL, NULL, NULL, NULL, NULL,
                              NULL, '0', '0', NULL, NULL, 'f'))); 
```

这至少有一个工作的机会；我没有通过 DBMS 运行语法，因此其中可能存在错误。

# asp.net - 有人可以澄清一下使用 Sharp Lite 的 Automapper 的用法吗？(Asp.Net MV3)

> ID：11879518
> 
> 赞同：0
> 
> 时间：2012-08-09T08:31:25.693
> 
> 标签：asp.net, asp.net-mvc-3, automapper

我正在尝试创建一个简单的电子商务应用程序。产品必须有品牌和至少一个类别。我一直在使用（相当多）Sharp Lite 示例 MyStore 和 Cats - 所以如果你熟悉这些，你应该希望能理解流程。我正在尝试在 ProductController 中创建 Create 操作。

1) 在 ProductController 中，我注入了我的产品存储库和我的产品服务。

2) 在创建操作中，我调用 productService.CreateProductViewModel()

3) 在 CreateProductViewModel 中，我创建了一个新的 ProductFormDto，它具有我的 ViewModel 需要的所有属性（名称、产品代码等） - 以及 Category 和 Brands 的 IEnumerables。

```
 public CreateProductViewModel()
    {
        ProductFormDto = new ProductFormDto();
    }

    public ProductFormDto ProductFormDto { get; set; }
    public IEnumerable<ProductCategory> Categories { get; set; }
    public IEnumerable<Brand> Brands { get; set; }

} 
```

我认为这将是一个相当复杂的视图。

我的问题是，使用 Sharp Lite 是否需要使用 automapper 来映射我的 ViewModel，如下所示：

```
 public void Map()
    {
        Mapper.CreateMap<Product, ProductFormDto>();
    } 
```

我将它作为 ServiceLayerMappings.cs 放置在任务（服务）层中

如果是这样，我将把我见过的额外映射代码放在哪里，在大多数示例中，它放在控制器中？

我将如何/在何处/何时首次调用此 ServiceLayerMappings？

ServiceLayerMappings 是否会将我所有 ViewModel 的所有映射都放在我的 Tasks 层根目录的单个文件中？

任何形式的指导都将不胜感激，因为此时我有点摸不着头脑！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T10:51:56.770

啊，我想我有。在 MyStore 示例中有 CudTasks 文件，以下方法是其中的一部分：

```
 /// <summary>
    /// Udpates an entitry from the DB with new information from the form.  This example 
    /// manually copies the data but you could use a more sophisticated mechanism, like AutoMapper
    /// </summary>
    protected override void TransferFormValuesTo(ProductCategory toUpdate, ProductCategory fromForm) {
        toUpdate.Name = fromForm.Name;
        toUpdate.Parent = fromForm.Parent;
    } 
```

# javascript - 通过 HTML5/JS/PhoneGap 使用带小数点的数字键盘

> ID：11879519
> 
> 赞同：4
> 
> 时间：2012-08-09T08:31:29.077
> 
> 标签：javascript, objective-c, html, cordova

我认为这里已经提出了类似的问题，但接受的解决方案是标准的 HTML5 输入类型声明。请允许我解释一下：

我想使用 iPhone 数字键盘，您可以使用 input type="number" 触发它，但该键盘上会出现一个星号。现在，我不认为这可以通过 PhoneGap 实现，但绝对可以通过 iOS 通过 UIKeyboardTypeDecimalPad 实现，但是当我正在构建混合应用程序时，我无法访问本机代码，这就是我的问题所在。是否根本无法通过 Javascript/PhoneGap 适配器编辑键盘？我不会太惊讶，但我希望尽可能接近确认这一点。

我知道一种半屋替代方案，即：

```
<input type="number" name="n" /> 
```

这将显示数字以及一些字符。唯一的问题是我真的很喜欢数字很大，因为它极大地改善了用户的体验。欢迎对此提出任何想法，因为我这几天一直在摸不着头脑！

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T08:38:42.487

Apple 有一个很棒的文档：[iPhone 上 Safari 的用户体验编码操作指南](http://developer.apple.com/library/safari/codinghowtos/mobile/userExperience/_index.html#//apple_ref/doc/uid/DTS40008248-CH1-DontLinkElementID_14)。

> 要显示数字键盘，请将模式属性的值设置为“[0-9] *”或“\d* ”。

这导致：

```
<input type="text" name="n" pattern="[0-9]*" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T03:23:03.667

我一直在研究这个问题，我得出的结论是目前还不可能，我希望 phonegap 团队尽快实施。您可以实现[这个](http://keith-wood.name/keypad.html)jquery 键盘，但我还没有尝试过，因为它在移动应用程序中看起来不合适

# xml - XSLT - 从具有匹配名称 id 的前一项中查找元素值 - 使用条件？

> ID：11879521
> 
> 赞同：0
> 
> 时间：2012-08-09T08:31:33.737
> 
> 标签：xml, xslt, filemaker

我有一个如下所示的 XML。

我正在尝试使用每个 Image 节点属性中的所有值填充文件制作者记录。

但是请注意，在呈现的 XML 中，如果多次使用 Image 节点（由其文件 id 定义），则不存在其后续子元素。

我有下面的当前示例 xsl，它基本上可以正常工作，但我想在样式表中添加一个条件评估，上面写着：用英语：如果 'key' 元素不存在，则查找第一个前面的匹配项并使用这些值元素。这同样适用于“字符串”和“卷轴”元素。

结果将用所有相关数据填充每个记录列，而不是现在有时只是此类重复文件的部分数据。

为我糟糕的描述道歉。

任何帮助将不胜感激。

XML:

```
<?xml version="1.0"?>
<xmeml>
<boxset>
<stream>
    <track>
        <image>
            <start>0</start>
            <end>90</end>
            <file id="abcde">
                <key>95</key>
                <string>1023</string>
                <time>
                    <reel>142</reel>
                </time>
            </file>
        </image>
        <image>
            <start>90</start>
            <end>120</end>
            <file id="bcdef">
                <key>55</key>
                <string>1023</string>
                <time>
                    <reel>64</reel>
                </time>
            </file>
        </image>
    </track>
    <track>
        <image>
            <start>120</start>
            <end>130</end>
            <file id="abcde"/>
        </image>
        <image>
            <start>130</start>
            <end>180</end>
            <file id="cdefg">
                <key>92</key>
                <string>1023</string>
                <time>
                    <reel>194</reel>
                </time>
            </file>
        </image>    
    </track>
</stream>
</boxset>
</xmeml> 
```

XSLT：

```
<?xml version='1.0' encoding='UTF-8' ?>
<xsl:stylesheet version='1.0' xmlns:xsl='http://www.w3.org/1999/XSL/Transform'>
<xsl:template match='/'>
<FMPXMLRESULT xmlns="http://www.filemaker.com/fmpxmlresult">
<ERRORCODE>0</ERRORCODE>
<PRODUCT BUILD="11/13/2002" NAME="Filemaker Pro" VERSION="6.0V4"/>
<DATABASE DATEFORMAT="d/M/yyyy" LAYOUT="" NAME="combotest.fp7" RECORDS="" TIMEFORMAT="h:mm:ss a"/>
<METADATA>

<FIELD EMPTYOK="YES" MAXREPEAT="1" NAME="start" TYPE="NUMBER"/>
<FIELD EMPTYOK="YES" MAXREPEAT="1" NAME="end" TYPE="NUMBER"/>
<FIELD EMPTYOK="YES" MAXREPEAT="1" NAME="fileID" TYPE="TEXT"/>

<FIELD EMPTYOK="YES" MAXREPEAT="1" NAME="key" TYPE="NUMBER"/>
<FIELD EMPTYOK="YES" MAXREPEAT="1" NAME="string" TYPE="NUMBER"/>
<FIELD EMPTYOK="YES" MAXREPEAT="1" NAME="reel" TYPE="NUMBER"/>
</METADATA>
<xsl:for-each select=" //image ">

<RESULTSET FOUND="">

<ROW MODID="" RECORDID="">

<COL><DATA><xsl:value-of select="./start" /></DATA></COL>
<COL><DATA><xsl:value-of select="./end" /></DATA></COL>
<COL><DATA><xsl:value-of select="./file/@id" /></DATA></COL>

<COL><DATA><xsl:value-of select="./file/key" /></DATA></COL>
<COL><DATA><xsl:value-of select="./file/string" /></DATA></COL>
<COL><DATA><xsl:value-of select="./file/time/reel" /></DATA></COL>

</ROW>

</xsl:for-each>

</RESULTSET></FMPXMLRESULT>
</xsl:template>
</xsl:stylesheet> 
```

如果要填充 XML，他们希望看到它看起来像这样。

理想的 XML：

```
<?xml version="1.0"?>
<xmeml>
<boxset>
<stream>
    <track>
        <image>
            <start>0</start>
            <end>90</end>
            <file id="abcde">
                <key>95</key>
                <string>1023</string>
                <time>
                    <reel>142</reel>
                </time>
            </file>
        </image>
        <image>
            <start>90</start>
            <end>120</end>
            <file id="bcdef">
                <key>55</key>
                <string>1023</string>
                <time>
                    <reel>64</reel>
                </time>
            </file>
        </image>
    </track>
    <track>
        <image>
            <start>120</start>
            <end>130</end>
<!-- ideal data for repeated file "abcde" -->
            <file id="abcde">
                <key>95</key>
                <string>1023</string>
                <time>
                    <reel>142</reel>
                </time>
            </file>
<!-- end ideal repeated data -->
        </image>
        <image>
            <start>130</start>
            <end>180</end>
            <file id="cdefg">
                <key>92</key>
                <string>1023</string>
                <time>
                    <reel>194</reel>
                </time>
            </file>
        </image>    
    </track>
</stream>
</boxset>
</xmeml> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T09:58:47.043

您需要定义一个 XSLT 键以通过其 ID 查找文件定义：

```
<xsl:key name="file" match="file[*]" use="@id" /> 
```

这里的`[*]`谓词确保只有`file`具有至少一个子元素的 s 才会被它们的 id 索引。由于每个文件只有一个这样的定义，这正是我们所需要的。然后您使用该`key()`函数找到定义：

```
...
<COL><DATA><xsl:value-of select="./end" /></DATA></COL>
<xsl:variable name="file" select="key('file', file/@id)" />
<COL><DATA><xsl:value-of select="$file/@id" /></DATA></COL>
<COL><DATA><xsl:value-of select="$file/key" /></DATA></COL>
<COL><DATA><xsl:value-of select="$file/string" /></DATA></COL>
<COL><DATA><xsl:value-of select="$file/time/reel" /></DATA></COL>
... 
```

XSLT`key`被添加到样式表的顶层（即在`xsl:template`、`xsl:output`等之间）。

# ruby-on-rails - Cucumber 测试以确保将错误消息附加到特定的表单字段

> ID：11879525
> 
> 赞同：0
> 
> 时间：2012-08-09T08:31:45.407
> 
> 标签：ruby-on-rails, cucumber

使用 Devise 和 Cucumber，对于用户尝试在没有密码的情况下注册的情况，我有以下代码：

```
Then /^I should see a missing password message$/ do
  page.should have_content "Password can't be blank"
end 
```

在表单顶部显示错误时这很好，但我现在已切换到内联消息，这意味着属性名称不再在其关联的错误消息中引用，因此我需要将我的代码更改为：

```
Then /^I should see a missing password message$/ do
  page.should have_content "can't be blank"
end 
```

现在我的功能通过了，但我对这个解决方案并不是 100% 满意。如果我还可以测试此消息是否附加到空的密码字段，而不仅仅是位于页面上的某个位置，我会感觉更好。我想知道是否有办法说这样的话：

```
Then /^I should see a missing password message$/ do
  password_field.should have_content "can't be blank"
end 
```

我对黄瓜很陌生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T08:37:06.460

查看 capybara 文档中的查找和范围界定：[https ://github.com/jnicklas/capybara/#finding](https://github.com/jnicklas/capybara/#finding)

```
find('#password').should have_content("can't be blank") 
```

# junit - 如何在gradle的测试任务中指定@category？

> ID：11879527
> 
> 赞同：10
> 
> 时间：2012-08-09T08:32:01.667
> 
> 标签：junit, gradle

我想了解是否可以在 gradle 测试任务中指定 @category。因此，[我可以分别运行集成 junit 和普通 junit 测试](http://weblogs.java.net/blog/johnsmart/archive/2010/04/25/grouping-tests-using-junit-categories-0)。

我知道目前[在 gradle 中没有对 @category 的明确支持，](http://issues.gradle.org/browse/GRADLE-2111)我正在寻找解决此限制的方法。

直接的方法是为不同的测试类别定义测试套件，例如，[如何在 JUnit 4 中运行属于某个类别的所有测试](https://stackoverflow.com/questions/2176570/how-to-run-all-tests-belonging-to-a-certain-category-in-junit-4)。我更愿意在我的 gradle 脚本中指定 @category。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2014-11-13T17:39:58.670

对包含或排除类别的支持已包含在 gradle 中：

```
test {
  useJUnit {
    includeCategories 'org.gradle.junit.CategoryA'
    excludeCategories 'org.gradle.junit.CategoryB'
  }
} 
```

完整文档： [https ://docs.gradle.org/current/userguide/java_testing.html#test_grouping](https://docs.gradle.org/current/userguide/java_testing.html#test_grouping)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T16:18:19.660

我认为除了实现该功能或使用测试套件之外没有其他解决方案。随时在以下位置提交功能请求：[http ://forums.gradle.org](http://forums.gradle.org)

# c# - 如何使用“无论用户是否登录都运行”以编程方式运行任务计划

> ID：11879536
> 
> 赞同：-3
> 
> 时间：2012-08-09T08:32:49.237
> 
> 标签：c#

我用 c# 编写了一个代码，以编程方式安排所有必需字段（频率、重复、每月或每周等）的任务。使用“用户登录时运行”选项可以正常工作。

但是我需要我的代码来安排“无论用户是否登录都运行”下的任务。请给我一个解决方案。我使用了以下代码。

```
private void btn_Build_Click(object sender, EventArgs e)
    {

     //   string xmlOutput = txt_DestinationPath.Text + "\\" + txtTaskName.Text + ".xml";
        string xmlOutput = "d:\\BuildSchedule.xml";
        using (XmlWriter writer = XmlTextWriter.Create(xmlOutput))
        {
            string frequency = "Once";
            string sourceControl="";
            int recur = 1 ;
            if (txtRecur.Text != string.Empty) 
              recur = Convert.ToInt32(txtRecur.Text);

            string selectedDays="";
            string allDays = "mon";
            string selectedMonths = "";
            string allMonths = "JAN,FEB,MAR,APR,MAY,JUN,JUL,AUG,SEP,OCT,NOV,DEC";

            if (radio_TFS.Checked == true)
                sourceControl = "TFS";
            else if (radio_VSS.Checked == true)
                sourceControl = "VSS";

            writer.WriteStartDocument();
            writer.WriteStartElement("ConfigurationSettings");
            writer.WriteStartElement("Credentials");
            writer.WriteElementString("URI",txtURI.Text.ToString());
            writer.WriteElementString("UserName","");
            writer.WriteElementString("Password", "");
            writer.WriteElementString("SourceControl", sourceControl);
            writer.WriteElementString("TaskName", "buildSchedule");
            writer.WriteEndElement();
            writer.WriteStartElement("Schedule");
            if (radioDaily.Checked == true)
                frequency = "Daily";
            else if (radioWeekly.Checked == true)
            {
                frequency = "Weekly";
               foreach (string row in listDays.CheckedItems)
                    selectedDays = selectedDays + row + ",";
               if (selectedDays != string.Empty)
                   selectedDays = selectedDays.Remove(selectedDays.Length - 1, 1);
               else
                   selectedDays = allDays;

            }
            else if (radioMonthly.Checked == true)
            {
                frequency = "Monthly";
                selectedMonths = string.Empty;
                foreach (string row in listMonths.CheckedItems)
                    selectedMonths = selectedMonths + row + ",";
                if (selectedMonths != string.Empty)
                    selectedMonths = selectedMonths.Remove(selectedMonths.Length - 1, 1);
                else
                    selectedMonths = allMonths;

            }

            writer.WriteElementString("Frequency", frequency);

            writer.WriteElementString("Recur", recur.ToString());
            writer.WriteElementString("SelectedDays", selectedDays.ToString());
            writer.WriteElementString("SelectedMonths", selectedMonths.ToString());

            writer.WriteElementString("Date", Convert.ToString(dtpDate.Value.Date.ToString("MM/dd/yyyy")));
            writer.WriteElementString("Time", Convert.ToString(dtpTime.Value.ToString("HH:mm:ss")));
            writer.WriteEndElement();
            writer.WriteStartElement("PathAndFiles");
            writer.WriteElementString("ServerPath", txtServerPath.Text);
            writer.WriteElementString("SolutionFilePath", txtSolutionPath.Text);
            writer.WriteElementString("DestinationFilePath", txt_DestinationPath.Text);
            writer.WriteEndElement();
            writer.WriteEndElement();
        }

        schedule1(xmlOutput);

    }

    void schedule1(string xmlPath)
    {

        XmlDocument doc = new XmlDocument();
        doc.Load(xmlPath);
        root = doc.DocumentElement;
        string TaskName = root.GetElementsByTagName("TaskName")[0].InnerText;
        string  frequency = root.GetElementsByTagName("Frequency")[0].InnerText;
        string sb = root.GetElementsByTagName("Date")[0].InnerText + " " + root.GetElementsByTagName("Time")[0].InnerText;
        // func(TaskName);
        using (TaskService ts = new TaskService())
        {
            string[] path1 = Environment.CurrentDirectory.Split('\\');
            int count1 = path1.Length;
            count1 = count1 - 3;
            string path = "";
            for (int index = 0; index < count1; index++)
                path = path + path1[index] + "\\";

            path = path + "DownloadAndBuild\\bin\\Debug\\DownloadAndBuild.exe";
            if(frequency=="Once")
            {
                ////Task t = ts.AddTask(taskName,
                ////                    new TimeTrigger() { StartBoundary = Convert.ToDateTime(sb) + TimeSpan.FromSeconds(2), Enabled = true },
                ////                    //new ExecAction(@"D:\TTS-mapped\BuildAutomation\DownloadAndBuild\bin\Debug\DownloadAndBuild.exe", null, null));
                ////                    new ExecAction(@pathExe, null, null));

                Task t = ts.AddTask(TaskName, new TimeTrigger() { StartBoundary = Convert.ToDateTime(sb) + TimeSpan.FromSeconds(2), Enabled = true },
                              new ExecAction(path, null, null), null, null, TaskLogonType.InteractiveToken);

            }
            else if (frequency == "Daily") 
            {
                ////if (txtRecur.Text != "")
                ////{
                ////    Task t = ts.AddTask(taskName,
                ////        new DailyTrigger() { StartBoundary = Convert.ToDateTime(sb) + TimeSpan.FromSeconds(2), Enabled = true, DaysInterval = Convert.ToInt16(txtRecur.Text) },
                ////        //new ExecAction(@"D:\TTS-mapped\BuildAutomation\DownloadAndBuild\bin\Debug\DownloadAndBuild.exe",null,null));//C:\Users\rukmanipriya_s\Desktop\TFS_18thJuly\TFS\DownloadAndBuild\bin\Debug
                ////        new ExecAction(@pathExe, null, null));

                ////}
                ////else
                ////{
                ////    Task t = ts.AddTask(taskName,
                ////        new DailyTrigger() { StartBoundary = Convert.ToDateTime(sb) + TimeSpan.FromSeconds(2), Enabled = true },
                ////        //new ExecAction(@"D:\TTS-mapped\BuildAutomation\DownloadAndBuild\bin\Debug\DownloadAndBuild.exe",null,null));//C:\Users\rukmanipriya_s\Desktop\TFS_18thJuly\TFS\DownloadAndBuild\bin\Debug
                ////        new ExecAction(@pathExe, null, null));

                ////}

                //if (txtRecur.Text != "")
                //{

                //    Task t = ts.AddTask(taskName, new DailyTrigger(1) { StartBoundary = Convert.ToDateTime(sb) + TimeSpan.FromSeconds(2), Enabled = true, DaysInterval = Convert.ToInt16(txtRecur.Text) }, new ExecAction(path, null, null), null, null, TaskLogonType.InteractiveToken);
                //}
                //else
                //{
                //    Task t = ts.AddTask(taskName, new DailyTrigger(1) { StartBoundary = Convert.ToDateTime(sb) + TimeSpan.FromSeconds(2), Enabled = true}, new ExecAction(path, null, null), null, null, TaskLogonType.InteractiveToken);
                //}

                Task t = ts.AddTask(TaskName, new DailyTrigger(1) { StartBoundary = Convert.ToDateTime(sb) + TimeSpan.FromSeconds(2), Enabled = true, DaysInterval = Convert.ToInt16(root.GetElementsByTagName("Recur")[0].InnerText) }, new ExecAction(path, null, null), null, null, TaskLogonType.InteractiveToken);

            }
            else if (frequency == "Weekly")
            {
                DaysOfTheWeek dw = DaysOfTheWeek.Sunday - 1;
                string[] str = root.GetElementsByTagName("SelectedDays")[0].InnerText.Split(',');
                int count = str.Length;

                for (int i = 0; i < count; i++)
                {
                    if (str[i] == "mon")
                        dw = dw | DaysOfTheWeek.Monday;
                    else if (str[i] == "tue")
                        dw = dw | DaysOfTheWeek.Tuesday;
                    else if (str[i] == "wed")
                        dw = dw | DaysOfTheWeek.Wednesday;
                    else if (str[i] == "thu")
                        dw = dw | DaysOfTheWeek.Thursday;
                    else if (str[i] == "fri")
                        dw = dw | DaysOfTheWeek.Friday;
                    else if (str[i] == "sat")
                        dw = dw | DaysOfTheWeek.Saturday;
                    else
                        dw = dw | DaysOfTheWeek.Sunday;
                }
               // Task t = ts.AddTask(taskName,
               //new WeeklyTrigger() { StartBoundary = Convert.ToDateTime(sb) + TimeSpan.FromSeconds(2), Enabled = true, DaysOfWeek = dw, WeeksInterval = Convert.ToInt16(root.GetElementsByTagName("Recur")[0].InnerText) },
               ////new ExecAction(@"D:\TTS-mapped\BuildAutomation\DownloadAndBuild\bin\Debug\DownloadAndBuild.exe", null, null));
               //new ExecAction(@pathExe, null, null));
                Task t = ts.AddTask(TaskName, new WeeklyTrigger(DaysOfTheWeek.Sunday, 1) { StartBoundary = Convert.ToDateTime(sb) + TimeSpan.FromSeconds(2), Enabled = true, DaysOfWeek = dw, WeeksInterval = Convert.ToInt16(root.GetElementsByTagName("Recur")[0].InnerText) }, new ExecAction(path, null, null), null, null, TaskLogonType.InteractiveToken);

            }
            else if(frequency == "Monthly")
            {
                MonthsOfTheYear dw = MonthsOfTheYear.January - 1;
                string[] str = root.GetElementsByTagName("SelectedMonths")[0].InnerText.Split(',');
                int count = str.Length;

                for (int i = 0; i < count; i++)
                {
                    if (str[i] == "JAN")
                        dw = dw | MonthsOfTheYear.January;
                    else if (str[i] == "FEB")
                        dw = dw | MonthsOfTheYear.February;
                    else if (str[i] == "MAR")
                        dw = dw | MonthsOfTheYear.March;
                    else if (str[i] == "APR")
                        dw = dw | MonthsOfTheYear.April;
                    else if (str[i] == "MAY")
                        dw = dw | MonthsOfTheYear.May;
                    else if (str[i] == "JUN")
                        dw = dw | MonthsOfTheYear.June;
                    else if (str[i] == "JUL")
                        dw = dw | MonthsOfTheYear.July;
                    else if (str[i] == "AUG")
                        dw = dw | MonthsOfTheYear.August;
                    else if (str[i] == "SEP")
                        dw = dw | MonthsOfTheYear.September;
                    else if (str[i] == "OCT")
                        dw = dw | MonthsOfTheYear.October;
                    else if (str[i] == "NOV")
                        dw = dw | MonthsOfTheYear.November;
                    else
                        dw = dw | MonthsOfTheYear.December;
                }
                //Task t = ts.AddTask(taskName,
                //    new MonthlyTrigger { StartBoundary = Convert.ToDateTime(sb) + TimeSpan.FromSeconds(2), Enabled = true, MonthsOfYear = dw },
                //    //new ExecAction(@"D:\TTS-mapped\BuildAutomation\DownloadAndBuild\bin\Debug\DownloadAndBuild.exe", null, null));
                //    new ExecAction(@pathExe, null, null));

                Task t = ts.AddTask(TaskName, new MonthlyTrigger(1, MonthsOfTheYear.AllMonths) { StartBoundary = Convert.ToDateTime(sb) + TimeSpan.FromSeconds(2), Enabled = true, MonthsOfYear = dw }, new ExecAction(path, null, null), null, null, TaskLogonType.InteractiveToken);

            }

        }
    }
    void schedule(string xmlPath)
    {
         XmlDocument doc = new XmlDocument();
         doc.Load(xmlPath);
        root = doc.DocumentElement;

        string frequency;
        string command;
        string date;
        int recur;
        string time;
        string selectedDays;
        string selectedMonths;
        string taskName;

        time = root.GetElementsByTagName("Time")[0].InnerText;
        date = root.GetElementsByTagName("Date")[0].InnerText;                                 
        frequency = root.GetElementsByTagName("Frequency")[0].InnerText;
        recur = Convert.ToInt32(root.GetElementsByTagName("Recur")[0].InnerText);
        selectedDays = root.GetElementsByTagName("SelectedDays")[0].InnerText;
        selectedMonths = root.GetElementsByTagName("SelectedMonths")[0].InnerText;
        taskName = root.GetElementsByTagName("TaskName")[0].InnerText;

        command = "SCHTASKS /Create /SC once /TN varun12 /ST 14:06:00 /SD 08/01/2012 /TR DownloadAndBuild.exe";
        int exit = FetchProjects.ExecuteCommand(command, 111110);
        if(frequency == "once")
              command = "SCHTASKS /Create /SC " + frequency + " /TN "+taskName+" /ST " + time + " /SD " + date+ " /TR D:\\demoBuild.bat";
          else if (frequency == "weekly" && selectedDays != string.Empty)
            command = "SCHTASKS /Create /SC " + frequency + " /MO " + recur + " /D " + selectedDays + " /TN " + taskName + " /ST " + time + " /SD " + date + " /TR D:\\demoBuild.bat";
        else if (frequency == "weekly" && selectedDays == string.Empty)
            command = "SCHTASKS /Create /SC " + frequency + " /MO " + recur + " /D *" + " /TN " + taskName + " /ST " + time + " /SD " + date + " /TR D:\\demoBuild.bat";
        else if(frequency == "monthly" && selectedMonths != string.Empty)
            command = "SCHTASKS /Create /SC " + frequency + " /M " + selectedMonths + " /TN " + taskName + " /ST " + time + " /SD " + date + " /TR D:\\demoBuild.bat";
        else if (frequency == "monthly" && selectedMonths == string.Empty)
            command = "SCHTASKS /Create /SC " + frequency + " /M *" + " /TN " + taskName + " /ST " + time + " /SD " + date + " /TR D:\\demoBuild.bat";
        else
            command = "SCHTASKS /Create /SC " + frequency + " /MO " + recur + " /TN " + taskName + " /ST " + time + " /SD " + date + " /TR D:\\demoBuild.bat";

        // command = "SCHTASKS /Create /SC once /TN varun /ST 18:47:00 /SD 07/26/2012 /TR D:\\demoBuild.bat";

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T08:51:41.177

WMI 是一种以编程方式创建新计划项目的更好方法，并且更加灵活。

看看[WMI 任务：计划任务](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394601%28v=vs.85%29.aspx "WMI 任务：计划任务")，[Win32_ScheduledJob 类](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394399%28v=vs.85%29.aspx "Win32_ScheduledJob 类")，如果您以前没有使用过它 - [WMI .Net 概述](http://msdn.microsoft.com/en-us/library/bb404655.aspx "WMI .Net 概述")

# ruby-on-rails - 我可以通过 RoR3 中的回调保存与我所在的 AR 对象不同的 AR 对象吗？

> ID：11879538
> 
> 赞同：0
> 
> 时间：2012-08-09T08:33:01.770
> 
> 标签：ruby-on-rails, database, ruby-on-rails-3, activerecord, callback

我的数据库中有 2 个表。`users`和`trackers`。

正如您所期望的，每个`Tracker`都有一个`user_id`与表格相关的内容。`users`

这个应用程序的上下文是它是基于团队的时间跟踪解决方案的一部分。作为其中的一部分，我需要按用户迄今为止跟踪的总时间对用户进行排序，并在屏幕上显示该总时间。

所以我认为，每当`Tracker`保存 a 时，我都会触发一个`before_save`回调，该回调从对象中获取`start_time`和值，并简单地以秒为单位获取跟踪器的时间。结果保存到. 这部分有效，我可以在数据库中看到计算值。`end_time``Tracker``(end_time - start_time).to_i``Tracker.tracked_time`

我现在需要保存每个用户的所有`Tracker`实例`tracked_time`值的总结果，然后我想将此值存储到那里`users`的列中的表中，`tracked_time`以便我可以将其从数据库中拉出以对结果进行排序（想想：大多数活跃用户、最不活跃用户、前 10 名）。

但是，当我尝试调用它时，`before_save :calculate_tracked_time, if: :finished?, unless: :admin?`我只会得到一个`ActiveRecord::RecordNotSaved`错误。

似乎我无法`User`在模块内保存模型的值`Tracker`......但我不知道为什么或如何做我需要的事情。

任何关于如何使这项工作（或更好地工作）的想法将不胜感激。

哦，模型`:tracked_time`上`User`的 列在 中，`attr_accessible`因此可以写入。

下面是模型，如果需要`Tracker`我也可以发布模型。`User`

```
class Tracker < ActiveRecord::Base
  attr_accessible :running, :start_time, :end_time, :tracked_time, :intention, :achievement
  belongs_to :user

  before_save :calculate_tracked_time, if: :finished?, unless: :admin?

  validates :user_id,   presence: true
  validates :intention, presence: true,
                        length: { minimum: 5 }

  default_scope order: 'trackers.created_at DESC'

  private

    def finished?
      # Only save the total amount of time elapsed if we have
      # a start_time AND end_time for this object.
      !self.end_time.nil?
    end

    def admin?
      # Don't calculate totals for the admin user.
      User.find_by_id( self.user_id ).admin?
    end

    def calculate_tracked_time

      # write the tracker's tracked time value in seconds
      self.tracked_time = ( self.end_time - self.start_time ).to_i

      # update the user's tracked time total
      user = User.find_by_id( self.user_id )
      # calculate time from all trackers this user has
      total_time = 0
      user.trackers.each { |t| total_time += t.tracked_time }
      # this log correctly prints the correct figures.
      p "Total Time for user (#{self.user_id}): #{total_time}"
      # store it to the user's :tracked_time db column
      user.tracked_time = total_time
      # save !!! Errors out.
      user.save
    end

end 
```

谢谢阅读。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T09:00:43.137

尝试使用 update_column，而不是更新字段并调用 save：

```
user.update_column(:tracked_time, total_time) 
```

update_column 不调用任何回调（或验证，因此您需要小心）。当您已经在回调中时，回调可能会阻止保存。

# c# - 如何将非托管图像转换为托管位图图像？

> ID：11879544
> 
> 赞同：0
> 
> 时间：2012-08-09T08:33:28.737
> 
> 标签：c#, image-processing, aforge

嗨，我需要将非托管图像转换为需要在图片框上显示的托管位图图像，但我似乎抛出了一个异常，说“对象引用未设置为对象的实例”。有人对此有想法吗？我已经评论了引发异常的行。

```
for (int i = 0; i < characters.Length; i++)
                    {
                        area = characters[i].Area;
                        UnmanagedImage numer = characters[i].Image;
                        System.Drawing.Image plateImage = numer.ToManagedImage();//Exception
                        numberplate = new Bitmap(new Bitmap(plateImage));
                        pictureBox2.Image = numberplate;
                        pictureBox2.Refresh();                            
                    } 
```

我正在使用带有 C# 的 Aforge.net 框架

**更新**

```
for (int i = 0; i < characters.Length; i++)
                    {
                        area = characters[i].Area;
                        Bitmap numer = characters[i].Image.ToManagedImage();
                        //System.Drawing.Image plateImage = numer.ToManagedImage();
                        //numberplate = new Bitmap(new Bitmap(plateImage));
                        pictureBox2.Image = numberplate;
                        pictureBox2.Refresh();                            
                    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T15:51:58.227

我在 Aforge.Net 论坛上找到了这段代码，它似乎有效。

```
 BlobCounterBase bc = new BlobCounter();
                    bc.FilterBlobs = true;
                    bc.MinHeight = 5;
                    bc.MinWidth = 5;

                    bc.ProcessImage(numberplate);
                    Blob[] blobs = bc.GetObjectsInformation();
                    MessageBox.Show(bc.ObjectsCount.ToString());
                    for (int i = 0, n = blobs.Length; i < n; i++)
                    {
                        if (blobs.Length > 0)
                        {

                            bc.ExtractBlobsImage(numberplate, blobs[i], true);

                            Bitmap copy = blobs[i].Image.ToManagedImage();
                            pictureBox2.Image = numberplate;
                            pictureBox2.Refresh();
                        }
                    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T08:37:18.150

```
Bitmap managedImage = numer.ToManagedImage( ); 
```

# asp.net - Webforms 4 url 路由多重匹配

> ID：11879546
> 
> 赞同：0
> 
> 时间：2012-08-09T08:33:35.937
> 
> 标签：asp.net, url, url-rewriting, asp.net-4.0, webforms-routing

我有一个 webforms 4 项目，我使用 url 路由

在某些情况下，给定的路由会匹配多个模式。

似乎路由机制以特定顺序尝试每个模式，并在第一个匹配时停止。（如果我错了，请纠正我）。如果所选模式的资源（主要是 aspx 文件）不存在，则会出现 404 错误（资源不存在）。

下一个匹配模式映射到现有资源，但该机制不会尝试这样做。

示例（使用类似于 MVC 的命名约定）

```
routes.MapPageRoute("Action", "{controler}/{action}/{*pathInfo}", "~/Views/{controler}/{action}.aspx");
routes.MapPageRoute("Overview", "{controler}/{*pathInfo}", "~/Views/{controler}/Overview.aspx"); 
```

所以文件系统上有一个/Views/Patient/Overview.aspx 和一个/Views/Patient/Search.aspx。

路由“ **/Patient** ”将匹配第二个模式并映射到“ **/Views/Patient/Overview.aspx** ”

路由“ **/Patient/Search** ”将匹配第一个模式并映射到“ **/Views/Patient/Search.aspx** ”

路由“ **/Patient/Search/SomePathInfo** ”将匹配第一个模式并映射到“ **/Views/Patient/Search.aspx** ”（将 url 的“SomePathInfo”部分视为 {*panthinfo} 部分）

现在，问题是路线“ **/Patient/SomePathInfo** ”匹配这两种模式。第一个将“SomePathInfo”视为 {action} 部分（搜索不存在的“ **/Views/Patient/SomePathInfo.aspx ”）。**第二个将“SomePathInfo”视为 {*pathInfo} 部分并映射到现有的“ **/Views/Patient/Overview.aspx** ”。

虽然该机制尝试第一个，但它找不到 SomePathInfo.aspx 文件，并引发 404 错误。

我的问题是“**有没有办法指导机制尝试每种模式，直到找到现有资源？** *（或者，更一般地说，直到满足某些条件？[这里：resource.exists]* ”！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T10:21:56.353

A workaround to my problem described above is to use routing constraints and define a limited set of available values for the {action} placeholder. The same applies to the {controller} placeholder etc.

So i define a constraint to accept only actions in the list: "index", "details", "add", "edit", "select" etc, and controllers in the list "home", "patient", "incident" etc;

```
routes.MapPageRoute("Action", "{controler}/{action}/{*queryValues}", "~/Views/{controler}/{action}.aspx", true,
            new RouteValueDictionary { // Default values
                { "controller", "home"},
                { "action", "index"} },
            new RouteValueDictionary { // constraints
                { "controller", "home|patient|incident"},
                { "action", "index|details|add|delete|edit|select"} }); 
```

That way, when I enter something like "patient/somequery", the "somequery" string does not satisfy the constraint of this mapping, so the mechanism continoues to the next one and treats the "somequery" part as the {*queryvalues} and not the {action}.

But the question still holds:

"**Is there a way to direct the mechanism to try each pattern until it finds an existing resource?** *(or, more general, until some condition is satisfied? [here: resource.exists]*"

# usability - 寻找允许从集合中选择 N 个元素并定义默认值的 UI 元素示例

> ID：11879547
> 
> 赞同：0
> 
> 时间：2012-08-09T08:33:42.263
> 
> 标签：usability

想象一下，我的应用程序有一个支持的语言列表。我正在寻找一个 UI 元素，它允许选择支持的语言的子集并将其中一种语言设为默认语言。

起初，我想使用一个包含两个复选框列的列表，但是当她在“默认”列中激活一个时，用户会感到惊讶，因为这将取消选择当前默认值。我可以使用单选按钮，但这也感觉很笨重（而且浪费了屏幕空间）。

下一个想法是有两个列表，一个包含可用语言，一个包含活动语言。但是在这种情况下，用户将如何选择默认值呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T10:38:21.077

我们当前的解决方案适用于两个列表：

```
 Active                 Available

 * English              Italian
 French        <=>      Greek
 German 
```

您可以在列表之间拖放元素以激活或不激活语言。左列表的第一个元素是“默认”。在 UI 中，我们赋予它一种特殊的风格，让用户可以很容易地识别出“这种语言很特别”。工具提示（和文档）显示“这是默认语言”。

要选择不同的默认语言，只需将左侧的一个元素拖到列表顶部即可。

# javascript - EXTJS4 中的链接组合框

> ID：11879550
> 
> 赞同：0
> 
> 时间：2012-08-09T08:34:04.173
> 
> 标签：javascript, extjs, combobox, extjs4.1

我正在尝试使用 EXTjs4 创建一个链接的组合框，我正在考虑使用静态数组数据源。我查看了 sencha 网站上的示例，但找不到任何示例。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T14:55:39.273

我过去做过类似的事情。我有两个组合框 - 一个显示员工（valueField：EmployeeID），另一个显示经理（valueField：EmployeeID）。当用户选择员工时，另一个组合框会自动显示该员工的经理。这是我使用的：

```
var EmployeesComboBox = Ext.create('Ext.form.ComboBox', {
    listeners:{
         'select': function(cbo, records) {
              // set the value of the other combo box to the selected employee ID
              Ext.getCmp('id_of_2nd_combo_box').setValue(records[0].data.EmployeeID);
          }
    }
}); 
```

# ios - 在 UILabel 类型的对象上找不到属性 frameOrigin

> ID：11879552
> 
> 赞同：0
> 
> 时间：2012-08-09T08:34:10.883
> 
> 标签：ios

我是 ios 编程的新手，所以这可能是一种常见的技术误用。

在我的视图控制器中，我使用以下代码：

```
[timeLabel setTextColor:textColor];
[timeLabel setText:[NSDateFormatter localizedStringFromDate:_reservation.date dateStyle:NSDateFormatterNoStyle timeStyle:NSDateFormatterShortStyle]];
[timeLabel sizeToFit];
[timeLabel setFrameOrigin:CGPointMake(61, 23)]; 
```

其中 timeLabel 在头文件中声明为

```
 UILabel *timeLabel; 
```

连同其他常量（textColor 等）

我收到以下错误：

```
Property frameOrigin not found on object of type UILabel 
```

我错过了什么？我是否需要在每个标签上附加另一个框架（我将在表格单元格内的 UIButton 视图中使用标签和象形图）。

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T08:40:08.000

你可以这样做：

```
[timeLabel setFrame:CGRectMake(61,23,timeLabel.frame.size.width,timeLabel.frame.size.height)]; 
```

或者

```
CGRect frame=timeLabel.frame;
frame.origin=CGPointMake(61,23);
timeLabel.frame=frame; 
```

# plugins - 为 Protégé 运行 NavigOwl 插件

> ID：11879553
> 
> 赞同：1
> 
> 时间：2012-08-09T08:34:14.777
> 
> 标签：plugins, ontology, protege

我正在做一个语义网络项目，我正在寻找现实生活中的本体来测试几个应用程序和算法。我正在寻找的是不同的尺寸和结构，这将使我能够对公司的解决方案进行基准测试，最好不是自制的模型，而是实际使用的东西。不幸的是，使用 OntoGraf 查看整个本体有点麻烦。

我发现了一个名为 NavigOwl 的 Protégé 插件，它似乎非常适合同时查看整个本体并判断其一般复杂性和结构的任务。问题是，我无法让它工作。

[我从这里](http://klatif.seecs.nust.edu.pk/navigowl/downloads.html)下载插件并按照说明进行操作。

*   我将 jar 放在`plugin`我的 Protégé 安装目录中。
*   我打开 protege 并加载一个本体
*   我去`Window>Tabs`选择`NavigOwl`
*   出现一个 NavigOwl 选项卡，但它只包含类层次结构视图，而窗口的其余部分是灰色的。它只是空白，如下所示：

![Protégé 中的空白 NavigOwl 选项卡](../Images/e77865e876b591f5190a60d9ab922195.png)

单击层次视图中的任何类都不会更改任何内容。

我搜索了一个解决方案，并设法[在 nabble.com 上](http://protege-ontology-editor-knowledge-acquisition-system.136.n4.nabble.com/A-quick-question-about-Views-td3742373.html)找到了这个帖子。海报说他解决了这个问题，但他不知道如何解决。将选项卡重置为默认状态是隐含的解决方案之一，但它对我不起作用。关闭和重新打开选项卡以及 Protégé 本身不会改变任何内容。

你遇到过问题吗？可能是什么原因？

我在 Windows 7 家庭高级版 x64 上使用 Protégé 4.1.0 Build 239 和捆绑的 JRE (1.5.0)。

我已经尝试过[这里提供的 JAR（Protégé 4.1 的 NavigOwl 插件）](http://klatif.seecs.nust.edu.pk/navigowl/downloads.html)和斯坦福大学 Protégé wiki 中提到的 JAR [（版本 1.1.0）](http://protegewiki.stanford.edu/wiki/NavigOWL_1.1.0)，但情况仍然存在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-16T15:00:15.767

我遇到了同样的问题，但是当我升级 JDK 时它开始工作。虽然我不建议升级是解决方案，但它现在正在工作。 ![navigOWL 使用最新 Protégé 4.3 的屏幕截图](../Images/807408f6922c8b2bfcb26852d1b57028.png)

# javascript - 使用 knockout.js 进行流畅导航

> ID：11879559
> 
> 赞同：2
> 
> 时间：2012-08-09T08:34:37.417
> 
> 标签：javascript, knockout.js

我有一个带有三个子页面的单页应用程序。

网址结构为：

```
/page  (sub-page-0)

/page#sub-page-1

/page#sub-page-2 
```

视图模型是：

```
function ViewModel(activePage){
   var self=this;

   self.activePage=ko.observable(activePage);
   self.changePage=function (newPage){
       self.activePage(newPage);
       //change url
   });
} 
```

当用户输入 url 时，我想在 javascript 中获取 # 部分并使用此参数构造 ViewModel。

当用户单击页面中的链接时，我想更改 URL 并加载该子页面。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T13:34:24.053

您可以使用堆栈溢出问题中的一种解决方案：[如何在 JavaScript 中获取查询字符串值？](https://stackoverflow.com/questions/901115/get-query-string-values-in-javascript)

但是，我强烈建议您考虑使用客户端路由库。淘汰赛主页有一个使用[sammyjs的](http://sammyjs.org/ "SammyJS")[示例](http://learn.knockoutjs.com/#/?tutorial=webmail "例子")，但还有许多其他有趣的解决方案（包括[knockback](http://kmalakoff.github.com/knockback/%20KnockBackJS)，它结合了bonejs 和 knockoutjs）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-09T13:32:14.013

Knockout 本身不支持导航。但是您可以使用第三方框架。[http://learn.knockoutjs.com/](http://learn.knockoutjs.com/)上的淘汰赛中有一个名为“单页应用程序”的教程，它展示了如何使用 sammy.js 做到这一点。

# jquery - 使用 Google 和 Microsoft CDN 获取 jquery 文件参考

> ID：11879562
> 
> 赞同：0
> 
> 时间：2012-08-09T08:34:54.407
> 
> 标签：jquery

我已使用 Google CDN 为我的应用程序引用 jquery 文件。

```
<script type="text/javascript" language="Javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.min.js"></script> 
```

上述的使用对我提高应用程序的性能有很大帮助。CDN 引用的主要优点如下所述：

浏览器的行为是，每当它加载任何网页时，它都会将用于该页面的相关文件（例如 Javascript 文件、CSS 文件和图像）保存到其缓存（也称为历史记录）中。当用户下次浏览任何网页时，浏览器只加载那些新的或修改过的文件，并且在浏览器缓存或历史记录中不可用。通过这种方式，浏览器可以提高其性能并加载页面。

但由于缓存是按域进行的，在这种情况下如何管理 Javascript 文件、CSS 文件和图像。如果最终用户跨域浏览会不会是一个问题。

谁能帮助我了解有关上述问题的更多详细信息。

谢谢和问候， 桑托什·库马尔·帕特罗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T08:41:22.637

它只会使用给定的 URL 缓存它们，任何从相同 url 请求相同文件的页面都可以使用它，即使跨不同域 - 谷歌几年前做了一件大事，将 JQuery 包含在他们的主搜索页面中，在与他们要求其他 CDN 用户执行此操作的方式完全相同，因此绝大多数人已经拥有了他们的 CDN 版本的 JQuery。

如果您想开始使用 CDN，还需要考虑“与协议无关的 url”——让浏览器根据当前页面的协议选择正确的协议（https 或 http），这样您就可以避免“此页面上的某些项目是不安全”的错误。

[URI 以两个斜杠开头……它们的行为如何？](https://stackoverflow.com/questions/4071117/uri-starting-with-two-slashes-how-do-they-behave)

# javascript - 用循环填充选择

> ID：11879566
> 
> 赞同：0
> 
> 时间：2012-08-09T08:35:14.837
> 
> 标签：javascript, jquery

我想在选择更改时重新填充选择框。

到目前为止我做了什么（不起作用）：

```
$('select#mnt').change(function(){

     var month = $(this).val();
     var days = new Date(year, month, 0).getDate();
     var toMonth = <?php echo $tomon; ?>;
     var toDay = <?php echo $today; ?>;
     var result='';

     if (month!=toMonth) {

        for(var i=1; i<=days;i++){

            result += '<option>'+i+'</option>';

        }

        $('select#days').empty().html(result);
     }

  }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T12:53:46.103

您的`year`代码片段中不存在 var：

```
var days = new Date(year, month, 0).getDate(); 
```

它应该是这样的：

```
var year=2011;//or $('input#year').val();
var days = new Date(year, month, 0).getDate(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T08:54:19.763

`year`您在该函数中没有变量。你在其他地方创建它吗？

这是一个工作示例，有一些更改： [DEMO](http://jsfiddle.net/SbF3k/25/)

```
$('select#mnt').change(function(){

 var month = $(this).val();
 var days = new Date(2012, month, 0).getDate();
 var toMonth = 5;
 var toDay = 4;
 var result='';

 if (month!=toMonth) {

    for(var i=1; i<=days;i++){

        result += '<option>'+i+'</option>';
    }

    $('select#days').empty().html(result);
 }
}); 
```

# css - 禁用 div 内容错误

> ID：11879568
> 
> 赞同：0
> 
> 时间：2012-08-09T08:35:16.927
> 
> 标签：css, html, selection

我可以使用这个禁用我的 div 的内容

```
<div style='-webkit-touch-callout: none;
-webkit-user-select: none;
-khtml-user-select: none;
-moz-user-select: none;
-ms-user-select: none;
user-select: none;
' onselectstart='return false;'> 
```

我的 div 中有两个内容，第一个是

```
<input> 
```

另一个是

```
<textarea> 
```

当我拖动鼠标时，两者都无法选择。但是当我右键单击+全选时。我可以选择文本框的内容，但不能选择输入框。

注意：我正在为我的文本区域使用 openWYSIWYG 编辑器，我也尝试将透明 div 放在顶部，但得到了相同的结果。

问题是，我怎样才能完全禁用选择？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T08:46:53.230

CSS 属性没有标准行为`user-select`。因此，在 Safari 中，“全选”选项或仅选择周围元素仍会选择中间的内容——正如您所经历的那样。

以下是更多信息：“ [css-tricks.com: User-Select](http://css-tricks.com/almanac/properties/u/user-select/) ”

请注意，此 CSS 不会阻止用户查看页面源并从那里复制内容。正如克里斯所说，更多的是为了不意外选择内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T08:39:42.583

禁用表单元素的正确方法是`disabled="disabled"`在 JavaScript 的帮助下设置它的标志。这种方法效果很好。

您**不能**为元素添加此属性，但您可以通过将所选文本的颜色设置为与使用 CSS 代码`div`的背景相同的颜色来模拟禁用元素的行为，例如`div`

```
::selection {
background: #xxxxxx;
}
::-moz-selection {
background: #xxxxxx;
} 
```

哪里`#xxxxxx`是`background-color`div 元素。

# sql - 替换查询符号

> ID：11879570
> 
> 赞同：0
> 
> 时间：2012-08-09T08:35:21.863
> 
> 标签：sql

我的表中有 +chr(39)+ 我想用 ' 替换它

示例：l+chr(39)+essai 替换为 l'essai

我的查询：`UPDATE dbo.Articles SET resume REPLACE(resume,'+chr(39)+',''')`

但是'''出现错误，怎么了？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T08:36:18.673

最后你需要另一个报价

```
UPDATE dbo.Articles SET resume = REPLACE(resume,'+chr(39)+','''') 
```

如果添加 WHERE 子句，可能会更集中

```
WHERE resume like '%+chr(39)+%' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T08:39:38.013

我假设您在这里使用 SQL Server。

' 用于转义特殊字符。你需要一个双 ''（所以你的总数变成 ''''）才能使用实际的字符串 '。

# android - 一堆关于 View id 的问题

> ID：11879571
> 
> 赞同：2
> 
> 时间：2012-08-09T08:35:23.390
> 
> 标签：android, view

我想问很多关于整个 id 系统如何在 android 中工作的问题。我查阅了 View 文档，但描述太浅了，不符合我的口味。

1.  有没有一种模式，IDE（Eclipse/Netbeans）在我使用时如何生成 id `android:id="@+id/..."`？还是完全随机的？

2.  如果我以编程方式设置 id，那么 Context 类`findViewById()`函数会找到它吗？

3.  如果上一个问题的答案是肯定的，那么如果我想创建大量视图，但我希望它们具有不同的 id 以供以后识别，那么哪个更好用？（要回答这个问题，知道前两个的答案真的很有用）

    例如在最大可能范围内生成随机 id：

    ```
    Random random = new Random();
    for(int i=0; i<100; i++)
    {
        View view = new View(someContext);
        view.setId(random.nextInt(Integer.MAX_VALUE));
    } 
    ```

    或者按某种顺序设置 id，例如：

    ```
    final int addToId = 5670;
    for(int i=0; i<100; i++)
    {
        View view = new View(someContext);
        view.setId(i+addToId);
    } 
    ```

4.  我还想知道，当您使用 LayoutInflater 例如为`ListView`列表中的每个项目使用预定义的 xml 布局填充时会发生什么。然后，您可以`getView()`通过`findViewById()`. 所以我假设，您的列表项中所有相同的视图都具有相同的 ID。如果是这样，那么使用该`tag` 属性来区分膨胀布局中的项目是一个好习惯吗？

**对这些问题的任何明确解释将不胜感激！**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T09:25:01.503

1.  @+id/.... 创建一个存在于应用程序命名空间中的 id 值。将此与 @android:id/.... 进行对比，后者位于 android 命名空间中。

2.  当您在代码中设置 id 并将视图元素添加到布局时，它将可以通过代码访问。您将无法从 xml 中引用它

3.  不确定你想使用随机生成你的 id 吗？认为顺序会更好，但即便如此，随机 id 的意义何在？你怎么知道你指的是哪个视图？

4.  绝对使用标签选项，并希望使用 ViewHolder 模式来实现更平滑的列表滚动。如果您需要访问它，您可以将 id 添加到视图持有者类，但无论如何它都可以通过用于填充列表的数据集获得。快速搜索将为您提供大量示例。

# ssh - 冲泡安装 sshfs

> ID：11879578
> 
> 赞同：4
> 
> 时间：2012-08-09T08:35:51.263
> 
> 标签：ssh, homebrew, sshfs

我正在尝试`sshfs`使用自制软件安装。关于如何排除故障的任何想法？

```
~/Desktop> brew install sshfs
==> Installing sshfs dependency: fuse4x
==> Downloading https://github.com/fuse4x/fuse/tarball/fuse4x_0_9_1
Already downloaded: /Library/Caches/Homebrew/fuse4x-0.9.1.tgz
==> autoreconf --force --install
aclocal: error: aclocal: file '/usr/local/share/aclocal/mysql.m4' does not exist
autoreconf: aclocal failed with exit status: 1
==> Build Environment
HOMEBREW_VERSION: 0.9.2
HEAD: e3d609903576d1902240532b27b8e136d93af42b
CPU: 8-core 64-bit ivybridge
OS X: 10.7.4-x86_64
Xcode: 4.3.3
CLT: 1.0.0.9000000000.1.1249367152
X11: 2.6.4 @ /usr/X11
CC: /usr/bin/clang
CXX: /usr/bin/clang++ => /usr/bin/clang
LD: /usr/bin/clang
CFLAGS: -Os -w -pipe -march=native -Qunused-arguments -mmacosx-version-min=10.7 -arch i386 -arch x86_64
CXXFLAGS: -Os -w -pipe -march=native -Qunused-arguments -mmacosx-version-min=10.7 -arch i386 -arch x86_64
CPPFLAGS: -I/usr/local/Cellar/gettext/0.18.1.1/include -I/usr/local/Cellar/libtool/2.4.2/include -I/usr/local/Cellar/automake/1.12.2/include -I/usr/local/Cellar/autoconf/2.69/include -isystem /usr/local/include
LDFLAGS: -L/usr/local/Cellar/gettext/0.18.1.1/lib -L/usr/local/Cellar/libtool/2.4.2/lib -L/usr/local/Cellar/automake/1.12.2/lib -L/usr/local/Cellar/autoconf/2.69/lib -L/usr/local/lib -arch i386 -arch x86_64
MACOSX_DEPLOYMENT_TARGET: 10.7
MAKEFLAGS: -j8
Error: Failed executing: autoreconf --force --install (fuse4x.rb:18)
These existing issues may help you:
    https://github.com/mxcl/homebrew/issues/12266
    https://github.com/mxcl/homebrew/issues/13647
Otherwise, this may help you fix or report the issue:
    https://github.com/mxcl/homebrew/wiki/bug-fixing-checklist
~/Desktop> sudo brew install sshfs
Password:
Cowardly refusing to `sudo brew install' 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T15:40:50.093

它为您提供了两个与您收到的错误相关的现有问题的链接。您应该访问这些链接，看看它们是否可以帮助您解决问题：

*   [https://github.com/mxcl/homebrew/issues/12266](https://github.com/mxcl/homebrew/issues/12266)
*   [https://github.com/mxcl/homebrew/issues/13647](https://github.com/mxcl/homebrew/issues/13647)

通过自制软件安装东西时，您不应该使用 sudo。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-08T21:37:13.860

我遇到了完全相同的问题，并按照此处的建议首先运行 brew update 来解决它： [https ://github.com/mxcl/homebrew/wiki/bug-fixing-checklist](https://github.com/mxcl/homebrew/wiki/bug-fixing-checklist)

# xcode - 使用仪器在 iPhone 上测量从代码执行到蓝牙低功耗传输的时间

> ID：11879579
> 
> 赞同：0
> 
> 时间：2012-08-09T08:35:53.970
> 
> 标签：xcode, instruments, bluetooth-lowenergy

我需要测量在我的代码执行传输调用之前需要多长时间，直到实际数据包通过空中发送。这是否可以使用 XCode 开发人员工具“Instruments”或者最好在我的代码中的某个地方查找时间戳？

非常感谢所有帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T22:10:33.673

我使用数据包分析器通过无线方式调试跟踪 (http://www.fte.com/)。但这是一个非常昂贵的工具。

否则，您将无法获得精确的测量结果。你不知道，硬件会造成什么延迟。

虽然看看会很有趣。设置标签的连接间隔，然后检查您获得的增量是否与您设置的增量相似。

# c# - CanExecute() 中的错误 - 如何摆脱对话框？

> ID：11879586
> 
> 赞同：1
> 
> 时间：2012-08-09T08:36:17.853
> 
> 标签：c#, wpf, exception-handling, canexecute

我正在尝试处理对话框中的异常，以便如果发生任何异常，对话框将关闭并且应用程序不会崩溃。如您所见，我使用了一个简单的 try-catch 块：

```
IDialogView dialog = null;
try
{
    if (_dialogViewModel == null)
    {
        dialog = ViewFactory.SomeDialog();
        _dialogViewModel = new DialogViewModel(dialog);
        _dialogViewModel.LoadData();
    }
    _dialogViewModel.ShowDialog();
}
catch (Exception ex)
{
    if (dialog != null)
        dialog.Close();
    _dialogViewModel = null;
    MessageBox.Show("Sorry, there was an error in the dialog.", "Error",
                    MessageBoxButton.OK, MessageBoxImage.Error);
    return;
} 
```

`CanExecute()`当按钮的事件处理程序中发生错误时，就会出现问题。错误被成功捕获，但是当我向`MessageBox`用户显示时，`CanExecute()`再次执行，因此错误再次发生。最后导致应用程序崩溃。

我搜索了一些信息，据说是为了确保`CanExecute()`事件处理程序中没有异常。但是这样的事情可能发生在其他地方，这就是为什么我想简单地捕获对​​话框入口点中的所有异常而不使用每个方法。

所以，我的问题是：如何销毁对话框，以便在异常捕获后不再显示？`Close()`没有用，因为在关闭之前它仍然调用`CanExecute()`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T08:52:36.017

正如您在 google 上发现的那样，您应该确保`CanExecute`处理程序 a) 轻量级并且 b) 从不抛出异常。您遇到的主要原因是：a`CanExecute`将由框架自动重复运行。它会在焦点发生变化、输入事件、数据绑定发生变化以及响应您几乎无法控制的许多其他原因时运行。

问题是：您*确实*有错误，并且该错误*反复*发生。这意味着您可以在崩溃或重复显示对话框之间进行选择。或者，您可以对错误采取一些措施。

你的答案：*修复错误。*

（您的处理程序对于您的其他错误很好。把它留在那里。但是这个特定的错误，您需要立即修复。）

# git - shell 脚本的版本控制

> ID：11879587
> 
> 赞同：5
> 
> 时间：2012-08-09T08:36:23.440
> 
> 标签：git, svn, shell, unix, version-control

我们有一个（TAP）环境，其中有很多在 Solaris 上运行的 shell 脚本。目前，只有生产和验收环境真正被使用，因为跟踪我们所做的所有更改太复杂了。

因此，我正在考虑引入版本控制，但我真的不知道如何实现这一点。

我最初考虑将 SVN 与 Trac 一起使用，并为整个环境创建一个存储库。将主干用于生产环境，并为测试和验收环境创建分支。

我们将在测试分支中进行开发，在验收分支中对其进行测试，并最终将其与生产的主干合并。

在做了一些研究之后，我发现 Git 可能更适合与 Redmine 结合使用。而且我不知道分支/合并方法......

有人介意与我分享他们的想法吗？我真的很想就如何处理这个问题提供一些意见和提示。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T10:09:43.250

是的，使用版本控制。但是，不要在 SO 上问这样一个开放式问题，而是尝试使用 google。

SVN 是一个不错的选择，许多人说它在概念上比 git 更简单，所以至少一开始就这样做。一旦您有了将数据存储在中央存储库中的想法，您就可以了解接下来的步骤。从简单地将脚本存储在存储库中以保留历史备份开始，一旦掌握了这一点，您就可以考虑在一台机器上开发脚本并使用 SCM 在服务器上签出。一旦您对基本工作流程感到满意，可以稍后进行分支和合并。

您可以将 Trac 或 Redmine 与 SVN 一起使用，它们都是非常好的错误跟踪、项目管理工具。只需使用您喜欢的外观即可。

[SVN 红皮书](http://svnbook.red-bean.com/)是开始的地方，它会告诉你初学者的[用法](http://svnbook.red-bean.com/en/1.7/svn.basic.version-control-basics.html)。

# service - Castle Windsor：ResolveAll 不返回带有构造函数参数的服务

> ID：11879588
> 
> 赞同：0
> 
> 时间：2012-08-09T08:36:23.407
> 
> 标签：service, constructor, castle-windsor

我有一个接口和两个实现它的类。其中之一在其构造函数中有一个参数。我已在我的 app.config 中将它们都注册为服务。不幸的是，我无法在我的代码中解决这两个问题：没有返回带有构造函数的类。

例如：

```
interface ITest
{
}

class Test : ITest
{
    private string a;

    public Test(string a)        
    {
        this.a = a;
    }
}

class Test2 : ITest
{
} 
```

这是我的配置：

```
<castle>
    <components>
        <component id="Test" type="XYZ.Test, XYZ" service="XYZ.ITest, XYZ"/>                
        <component id="Test2" type="XYZ.Test2, XYZ" service="XYZ.ITest, XYZ"/>
    </components>
</castle> 
```

以下是我尝试在代码中获取服务的方法：

```
ITest[] resolveAll = container.ResolveAll<ITest>(new {a ="aText" }); 
```

数组“resolveAll”只包含“Test2”，但没有“Test”的踪迹。我该怎么做才能获得这两个课程？

我注意到，如果我用 id "Test" 解决：

```
object resolve = container.Resolve("Test", new { sessionId = "sessionId" }); 
```

我获得了我的“测试”课程。

我究竟做错了什么 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T12:42:04.017

实际上，我在旧版的温莎城堡上。在上一个版本（3.1）上，这有效。

# java - 如何从 Java 中的 .Net 服务读取生成的 XML

> ID：11879589
> 
> 赞同：0
> 
> 时间：2012-08-09T08:36:29.563
> 
> 标签：java, android, xml

抱歉这个愚蠢的问题，但这是在android中的第三周我创建了一个连接到MS SQL Server的应用程序并使用.Net Web服务获取数据并使用“REST”在Android中读取XML结果，它生成的字符串包含以下XML数据 ：

```
<DataSet xmlns="http://tempuri.org/">
  <xs:schema xmlns="" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:msdata="urn:schemas-microsoft-com:xml-msdata" id="NewDataSet">
    <xs:element name="NewDataSet" msdata:IsDataSet="true" msdata:UseCurrentLocale="true">
      <xs:complexType>
        <xs:choice minOccurs="0" maxOccurs="unbounded">
          <xs:element name="Members">
            <xs:complexType>
              <xs:sequence>
                <xs:element name="ID" type="xs:int" minOccurs="0"/>
                <xs:element name="First_x0020_Name" type="xs:string" minOccurs="0"/>
                <xs:element name="Last_x0020_Name" type="xs:string" minOccurs="0"/>
                <xs:element name="Email_x0020_Address" type="xs:string" minOccurs="0"/>
              </xs:sequence>
            </xs:complexType>
          </xs:element>
        </xs:choice>
      </xs:complexType>
    </xs:element>
  </xs:schema>
  <diffgr:diffgram xmlns:msdata="urn:schemas-microsoft-com:xml-msdata" xmlns:diffgr="urn:schemas-microsoft-com:xml-diffgram-v1">
    <NewDataSet xmlns="">
      <Members diffgr:id="Members1" msdata:rowOrder="0">
        <ID>4</ID>
        <First_x0020_Name>Jane</First_x0020_Name>
        <Last_x0020_Name>Doe</Last_x0020_Name>
        <Email_x0020_Address>janedoe@yahoo.com</Email_x0020_Address>
      </Members>
      <Members diffgr:id="Members2" msdata:rowOrder="1">
        <ID>3</ID>
        <First_x0020_Name>Bob</First_x0020_Name>
        <Last_x0020_Name>Jones</Last_x0020_Name>
        <Email_x0020_Address>bob@yahoo.com</Email_x0020_Address>
      </Members>
    </NewDataSet>
  </diffgr:diffgram>
</DataSet> 
```

我的问题是如何获取此字符串并以漂亮的格式显示 XML 中的数据？！再次抱歉这个愚蠢的问题，但我做了很多研究，他们都调用文件或 URI 或 URL

我的想法是获取字符串并创建具有成员对象的类并返回此对象的数组列表并将其显示在界面中，但我真的不知道如何

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T09:10:11.100

您可以解析 XML 字符串，使用 StringReader：

```
DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
DocumentBuilder db = dbf.newDocumentBuilder();
InputSource is = new InputSource();
is.setCharacterStream(new StringReader(yourXMLString));

Document doc = db.parse(is);
NodeList nodes = doc.getElementsByTagName("first-node"); 
```

然后继续常规的 XML 解析，有很多例子。您可以以任何您喜欢的方式处理结果、显示它们、返回数组中的元素和值等。

# mysql - 使用 count() 分组

> ID：11879592
> 
> 赞同：1
> 
> 时间：2012-08-09T08:36:57.800
> 
> 标签：mysql, sql

我的表格内容：

```
id  aid
----------
1   1
2   2
3   2
4   4
5   4 
```

我的 sql：从表中选择计数（*），其中援助（1,2,3,4）按援助分组

结果：

```
count(*)
----------
1
2
2 
```

我想要结果：

```
count(*)
----------
1
2
0
2 
```

当援助为 1、2、3、4 时，我想要一个计数结果。我应该使用什么sql？感谢帮助。（我用的是 MySQL）</p>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T08:47:06.453

```
-- your data
DECLARE @Data TABLE (Id int, Aid int)
INSERT INTO @Data VALUES
(1,1),
(2,2),
(3,2),
(4,4),
(5,4);

DECLARE @Relevant TABLE (Id int )
INSERT INTO @Relevant VALUES (1),(2),(3),(4);

-- the query
SELECT Relevant.Id, COUNT(Data.Aid)
FROM @Data Data
RIGHT JOIN @Relevant Relevant ON Data.Aid = Relevant.Id
GROUP BY Data.Aid, Relevant.Id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T09:01:16.597

Hope this helps

```
 SELECT COLUMN_VALUE, COUNT(BT.AID)
  FROM SO_BUFFER_TABLE_15 BT, TABLE(SYS.DBMS_DEBUG_VC2COLl(1, 2, 3, 4))
 WHERE BT.AID(+) = COLUMN_VALUE
 GROUP BY COLUMN_VALUE
 ORDER BY COLUMN_VALUE 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T08:46:47.373

是时候发表一个明显的声明了： - 数据不能“神奇地出现”，它需要存在于某个地方才能出现在输出中。

这与您对 for 计数的愿望`0`有关`aid = 3`。因为没有带 的记录`aid = 3`，所以无法统计。它是不存在的数据，因此永远不会出现在输出中。所以我们需要强迫它存在。

如果您有一个列出所有`aid`实体的表，那么使用`LEFT JOIN`...

```
SELECT
  aid.id,
  COUNT(yourDataTable.aid) AS data_count
FROM
  aid
LEFT JOIN
  yourDataTable
    ON aid.id = yourDataTable.aid
WHERE
  aid.id IN (1,2,3,4)
GROUP BY
  aid.id 
```

*（`COUNT(yourDataTable.aid)`不计算字段所在的记录**。**`NULL`所以`3`现在存在，并且`COUNT()`可以返回`0`。）*

# php - PHP中的数字转换

> ID：11879595
> 
> 赞同：0
> 
> 时间：2012-08-09T08:37:12.073
> 
> 标签：php

我正在创建一个用户必须输入多个数字的网站。
这些数字必须经过验证（对于非法字符等）并转换为以下格式：

```
1234.56 
```

我的问题是如何转换（由于不同的国家符号）十进制/千分隔符的不同组合：

```
1234,56 / 1.234,56 / 1234.56 / 1,234.56 
```

预期结果应始终为：`1234.56`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T08:44:59.210

如果您总是有 2 位小数（至于价格左右），您可以只取最后一个点或逗号，在该位置拆分输入字符串并从第一个删除所有非数字字符（和 . 在您的情况下）部分。

如果你不能保证有两位小数，你需要通过检查，如果最后一个分隔符后面有 3 个数字（来决定是否有小数位）变得棘手。

由于显然您需要支持更多的国家/地区，因此通用解决方案可能是最佳选择。也许有一些 Javascript 也可以解决问题（在提交表单之前转换数字）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T08:45:02.320

您可以使用 zend 框架组件： Zend_Locale_Format::getNumber() 函数。[http://framework.zend.com/manual/en/zend.locale.parsing.html](http://framework.zend.com/manual/en/zend.locale.parsing.html)

# javascript - 谷歌地图 - 从谷歌地图获取省份轮廓

> ID：11879596
> 
> 赞同：0
> 
> 时间：2012-08-09T08:37:13.017
> 
> 标签：javascript, google-maps, google-maps-api-3

在谷歌地图中搜索省份时，它会勾勒出地图的轮廓并在省份上添加一个图标。

您如何从 google 获得它而不必逐点绘制它？如果它显示在他们的地图上，我确定它是可用的。

这是一个例子：

[南非西开普](https://maps.google.co.za/maps?hl=en&q=Western%20cape&ie=UTF-8&hq=&hnear=0x1dcc5d887a698df3:0xe98e798f2136a28b,Western%20Cape&gl=za&ei=e3YjUKK2FcH-iwLUqoCACw&ved=0CD0Q8gEwBw)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T09:34:29.050

我不认为它可以通过 API 直接获得，超出了您可以通过[**样式向导实现的功能**](http://gmaps-samples-v3.googlecode.com/svn/trunk/styledmaps/wizard/index.html)

要自己实现它，您需要为感兴趣的区域找到一个 shapefile，将其存储在启用空间的数据库中（如 PostgreSQL/PostGIS），然后加载相关的多边形，您可以自由地对其进行样式设置。[**或者，您可以像这样**](http://maps.forum.nu/v3/gm_customTiles.html)创建一个自定义切片图层（选中“密度”框），或者您可以使用融合表加载它（不是一个完全简单的过程）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T10:23:25.430

看到这个[类似的问题（对国家做同样的事情）](https://stackoverflow.com/questions/11831968/google-maps-single-country-boundary)

答案可以应用于一个省而不是一个国家。

[这](http://www.geocodezip.com/v3_FusionTables_SouthAfrica_styles.html)是我能想到的最接近这种风格的地方。

# ios - 防止在 iOS 上缓冲 HTTP 流

> ID：11879599
> 
> 赞同：0
> 
> 时间：2012-08-09T08:37:34.390
> 
> 标签：ios, http, http-headers, comet, umts

我正在使用长寿命 HTTP 请求实现 HTTP 服务器，以将实时信息流式传输到浏览器。我在大多数情况下都可以正常工作。但是在尝试从通过 UMTS 连接的 iPad 访问该页面时，我仍然看到一个问题。

似乎正在进行一些缓冲。我只能在发送超过 2 KB 后才能看到更新。下一次更新需要另外 2 KB 才能显示。等等。请注意，当 iPad 通过 WiFi 连接时，不会发生这种情况。

我可以想象必须设置一些 HTTP 标头值以防止缓冲。我已经尝试了以下标题，但没有任何效果。

```
X-NoBuffering: 1
X-NoCompression: 1
Pragma: no-cache
Cache-Control: no-cache
Cache-Control: no-store
Cache-Control: must-revalidate
Cache-Control: private 
```

将每个更新扩展到至少 2 KB 的替代方案当然是可能的。但在其他所有情况下似乎都没有必要。

# c++builder - 如何使用 indy TidSNMP 组件获取陷阱

> ID：11879604
> 
> 赞同：0
> 
> 时间：2012-08-09T08:37:43.947
> 
> 标签：c++builder, snmp, indy, snmp-trap

我正在使用带有 Indy 10.5.7 的 c++builderXE，并且我正在尝试从另一个代理 snmp 接收陷阱。

我没有描述如何执行接收陷阱的程序的信息。

您可以在下面找到我现在尝试使用的代码片段。

ReceiveTrap() 方法总是返回 0，这意味着没有接收到数据。

我用几年前使用备用 API 制作的另一个程序测试了 PC 配置，并且收到了陷阱，所以我不认为这应该是配置问题。

您对下面的例程中的帽子有什么建议吗？

```
void __fastcall TForm1::LabelReceiveTrapClick(TObject * Sender)
{
    static bool status = false;
    int ists;
    String Fun           = "[SimpleReceiveTrap] ";
    TSNMPInfo * infoSnmp = 0;

    try
    {
        status = !status;

        if (status)
        {
            std::auto_ptr< TIdSNMP >clientSnmp(new TIdSNMP(NULL));
            clientSnmp->Community      = "public";
            clientSnmp->ReceiveTimeout = 1000;
            clientSnmp->Binding->Port  = 162;
            while (status)
            {
                Application->ProcessMessages();
                ists = clientSnmp->ReceiveTrap();
                Mylog(L"%s ReceiveTrap status = [%d]", Fun.c_str(), ists);
                if (ists > 0)
                {
                    infoSnmp = clientSnmp->Trap;
                }
            }
        }
    }
    catch (Exception & ex)
    {
        Mylog(L"%s ERROR", Fun.c_str(), ex.Message.c_str());
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T04:39:55.110

这不是设置用于接收陷阱的侦听端口的正确方法。读取该属性会使用和`Binding`属性分配套接字并将其绑定到本地 IP/端口。绑定后，您无法更改该套接字的本地，因此您对该属性的分配实际上是无操作的。`TIdSNMP::BoundIP``TIdSNMP::BoundPort``Port``Binding->Port`

就此而言，无论如何您都在尝试操作错误的套接字。`Binding`套接字用于向远程 SNMP 系统发送查询 。`TIdSNMP`使用单独的套接字接收陷阱。 `TIdSNMP`具有`TrapPort`用于指定该套接字的侦听端口的单独属性。当`Binding`被访问时，陷阱套接字被分配并绑定到`Binding->IP`和`TIdSNMP::TrapPort`。该`TrapPort`属性默认为 162。

```
std::auto_ptr< TIdSNMP >clientSnmp(new TIdSNMP(NULL));
clientSnmp->Community = "public";
clientSnmp->ReceiveTimeout = 1000;
clientSnmp->TrapPort = 162; // <--
...
ists = clientSnmp->ReceiveTrap(); 
```

查看 Indy 的更新日志，自 10.5.7 发布以来，监听套接字发生了一些与陷阱相关的更改，因此您可能需要升级到更新的 Indy 版本才能修复错误。或者您可以下载最新版本，然后直接添加`IdSNMP.pas`到您的项目中，至少。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T07:48:08.233

仅使用 Indi 组件我无法读取陷阱 rev 2c 但我找到了一个使用 TWSocket 和 TSNMPInfo 的解决方案，它似乎运作良好

下面是我使用的代码：

**为了获取数据，我使用了 FPiette 组件套件的 TWSocket：**

```
void __fastcall TForm1::LabelStartServerTracSnmpClick(TObject * Sender)
{
    String Fun = "[LabelStartServerTracSnmp] ";
    try
    {
        if (WSocket1->State == wsClosed)
        {
            WSocket1->Proto = "udp";
            WSocket1->Addr  = "0.0.0.0";
            WSocket1->Port  = 162;
            WSocket1->Listen();
        }
        else
        {
            WSocket1->Close();
        }
    }
    catch (Exception & ex)
    {
        Mylog(L"%s ERROR: [%s]", Fun.c_str(), ex.Message.c_str());
    }
} 
```

**为了分析收到的数据，我使用 Indy**

```
void __fastcall TForm1::WSocket1DataAvailable(TObject * Sender, WORD ErrCode)
{
    char buffer[1024];
    int len, cnt, srcLen;
    TSockAddrIn srcSocket;
    String rcvmsg, remHost, s1, s2, Fun = "[WSocket1DataAvailable] ";
    TIdSNMP * clientSnmp = NULL;
    TSNMPInfo * infoSnmp = NULL;
    try
    {
        srcLen = sizeof(srcSocket);
        len    = WSocket1->ReceiveFrom(buffer, sizeof(buffer), srcSocket, srcLen);
        if (len >= 0)
        {
            buffer[len] = 0;
            rcvmsg      = String(buffer, len);

            __try
            {
                clientSnmp = new TIdSNMP(NULL);
                infoSnmp   = new TSNMPInfo(clientSnmp);
                infoSnmp->DecodeBuf(rcvmsg);
                cnt = infoSnmp->ValueCount;
                if (cnt > 0)
                {
                    // ---------------------------------------------------
                    for (int idx = 0; idx < cnt; ++idx)
                    {
                        s1 = infoSnmp->ValueOID[idx];
                        s2 = infoSnmp->Value[idx];
                        Mylog(L"[%s] Trap : [%s] => [%s]", s1.c_str(), s2.c_str());
                    }
                }
            }
            __finally
            {
                if (infoSnmp)
                {
                    delete infoSnmp;
                    infoSnmp = 0;
                }
                if (clientSnmp)
                {
                    delete clientSnmp;
                    clientSnmp = 0;
                }
            }
        }
    }
    catch (Exception & ex)
    {
        Mylog(L"%s ERROR", Fun.c_str(), ex.Message.c_str());
    }

} 
```

# sap-iq - 智商合并不起作用

> ID：11879605
> 
> 赞同：1
> 
> 时间：2012-08-09T08:37:45.857
> 
> 标签：sap-iq

我正在使用这样的东西：

```
select @x=coalesce(@x,'')+col1 from testdatatable 
```

这在 SQL Server 2008 上完美运行，但对于 IQ 却失败了：

> SELECT 返回多于一行

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T15:50:16.623

我们需要更多关于您的目标的信息。

您的选择语句是否返回多行？如果是这样，IQ 会尝试设置单个（varchar？）变量@x，具有许多值……这是不可能的。看起来合并对我来说不是你的问题。

如果您尝试从 testdatatable 中取回单行，并将该单行的 col1 与 @x 连接，为什么不

```
select
  @x = isnull(@x, '') + col1
from testdatatable
where (clause to get single row) 
```

# gwt - 如何为在 GWT 中使用 ClientBundle 访问的图像设置元素 ID？

> ID：11879606
> 
> 赞同：0
> 
> 时间：2012-08-09T08:37:45.710
> 
> 标签：gwt, gwt2, clientbundle

在 GWT 中，我需要为将使用 ClientBundle 访问的图像设置元素 ID。

例如。`@Source("logo.png")`

```
 ImageResource logo(); 
```

而不是 Image 我调用这个 logo()。但我想为 logo.png 设置元素 ID。

是否可以？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T08:49:00.610

```
Resources resources = GWT.create(Resources.class);
Image img = new Image(resources.logo());
img.getElement().setID("ID"); 
```

是你想要的吗？

# opencv - 图像预处理 tesseract

> ID：11879608
> 
> 赞同：1
> 
> 时间：2012-08-09T08:37:54.390
> 
> 标签：opencv, preprocessor, ocr, tesseract

我正在为我关于数字图像处理的期末考试做名片扫描仪，我想问你我必须如何预处理名片的照片，以便 tesseract 可以识别文本。我尝试了很多东西，比如腐蚀、膨胀、阈值化，但我不能得到一个好的结果......你能帮我吗？

谢谢

马可

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T10:03:14.220

如果您关心的只是文本识别而不是预处理，请考虑使用[ScanTailor](http://scantailor.sourceforge.net/)。它是一个优秀的预处理工具，并且是开源的。

如果你想自己实现预处理，你可能想看看[这篇论文](http://www.vincent-net.com/luc/papers/10wiley_morpho_DIAapps.pdf)——尤其是歪斜校正和背景估计。这里描述的算法的结果很好。ScanTailor 使用其中的一些。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-04-11T09:28:39.583

我会推荐开源 C++ 图像处理库 OpenCV 与开源免费光学字符识别 (OCR) 库 tesseract 的组合。由于您的问题信息不是很具体，我可以一般地回答您的问题 OCR 中的主要程序是：

1.  对图像进行某种预处理
2.  文本检测以获取您的 ROI（感兴趣区域，包含您的文本的区域）
3.  字符检测（获取纯文本图像并将其用作 tesseract 的输入

关于 tesseract 的几句话：图书馆有很多在线可用的信息。它是一个用于谷歌图书 OCR 目的的谷歌开源库。还可以处理图像中的布局分析，但在这方面并不完美，因此自己进行预处理并仅将 tesseract 用于真实字符识别部分可以带来更好的结果。如果您仍有疑问，或者我误解了您的问题，请随时提问。

# php - 不同环境的不同security.yml文件

> ID：11879609
> 
> 赞同：11
> 
> 时间：2012-08-09T08:37:57.873
> 
> 标签：php, symfony

我无法找到一种方法来`security.yml`包含根据 Symfony2 的环境而包含的不同文件。例如，我想为我的验收测试提供一个内存用户提供程序，因为我真的不需要在这里测试我的实体和东西，我只想对我的视图进行验收测试。

但是，事实证明，这并不是一件容易的事。我`security.yml`从我的包含中删除`config.yml`，将其重命名为`security_prod.yml`并创建了一个`security_test.yml`包含`in_memory`用户提供程序的内容。然后我分别在我的生产和测试配置中包含`security_prod.yml`和。`security_test.yml`

然而它似乎根本不起作用：

```
$ SYMFONY_ENV=test app/console cache:clear                                                      

  [Symfony\Component\Config\Definition\Exception\InvalidConfigurationException]                                                           
  You are not allowed to define new elements for path "security.providers". Please define all elements for this path in one config file.  

$ SYMFONY_ENV=prod app/console cache:clear                                                      

  [Symfony\Component\Config\Definition\Exception\ForbiddenOverwriteException]                                                                         
  Configuration path "security.access_control" cannot be overwritten. You have to define all options for this path, and any of its sub-paths in one   
  configuration section. 
```

在我看来，`security.yml`文件名是硬编码的（这对 Symfony 来说太奇怪了），但事实并非如此。

所以问题是：如何`security.yml`使用 Symfony 获得多个 s？什么可能导致这种行为？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2017-01-12T08:47:37.877

给正在寻找它的人的说明（不要红色评论）：

1.  为不同的环境创建不同`config`的文件：`config_test.yml`, `config_dev.yml`,`config_prod.yml`
2.  创建不同的`security`文件：`security_test.yml`, `security_dev.yml`,`security_prod.yml`
3.  `security_test.yml`其他环境的导入 `config_test.yml`等等。示例`config_test.yml`：

    ```
    imports:
      - { resource: security_test.yml } 
    ```

4.  确保您`security_*.yml`只包含一次（基本上作者犯了这个错误）

# vbscript - QTP：检查字符串数组是否包含值

> ID：11879612
> 
> 赞同：6
> 
> 时间：2012-08-09T08:38:12.467
> 
> 标签：vbscript, automated-tests, qtp

我无法让我的测试用例正确运行。

问题出在下面的代码中，确切地说是第一个 if 语句。QTP 抱怨需要一个对象

```
For j=Lbound(options) to Ubound(options)
    If options(j).Contains(choice) Then
        MsgBox("Found " & FindThisString & " at index " & _
        options.IndexOf(choice))
    Else
        MsgBox "String not found!"
    End If
Next 
```

当我检查数组时，我可以看到它已正确填充，并且 'j' 也是正确的字符串。对此问题的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-09T11:35:06.653

VBScript 中的字符串不是对象，因为它们没有成员函数。应该使用该[`InStr`](http://www.w3schools.com/vbscript/func_instr.asp)函数来搜索子字符串。

```
For j=Lbound(options) to Ubound(options)
    If InStr(options(j), choice) <> 0 Then
        MsgBox("Found " & choice & " at index " & j
    Else
        MsgBox "String not found!"
    End If
Next 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2014-09-03T04:09:14.187

检查字符串数组是否包含值的一种简洁方法是结合[Filter](http://msdn.microsoft.com/en-us/library/e5s17ck1(v=vs.84).aspx)和[UBound](http://msdn.microsoft.com/en-us/library/fhx59d0t(v=vs.84).aspx)函数：

```
If Ubound(Filter(options, choice)) > -1 Then
    MsgBox "Found"
Else
    MsgBox "Not found!"
End If 
```

缺点：你没有找到元素所在的索引

优点：它很简单，您可以使用通常的包含和比较参数来指定匹配条件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-21T13:58:58.083

```
Function CompareStrings ( arrayItems , choice )
For i=Lbound(arrayItems) to Ubound(arrayItems)

' 0 - for binary comparison "Case sensitive
' 1 - for text compare not case sensitive
If StrComp(arrayItems(i), choice , 0) = 0 Then

MsgBox("Found " & choice & " at index " & i

Else

MsgBox "String not found!"

End If

Next

End Function 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-01-21T13:05:04.377

嗨，如果您检查数组中的确切字符串而不是子字符串，请使用 StrComb，因为如果使用 InStr，那么如果 array = "apple1" 、 "apple2" 、 "apple3" 、 "apple" 和choice = "apple" 那么所有将返回 pass for每个数组项。

```
Function CompareStrings ( arrayItems , choice )

For i=Lbound(arrayItems) to Ubound(arrayItems)

    ' 1 - for binary comparison "Case sensitive
    ' 0 - not case sensitive
    If StrComp(arrayItems(i), choice , 1) = 0 Then

    CompareStrings = True
    MsgBox("Found " & choice & " at index " & i

    Else

    CompareStrings = False
    MsgBox "String not found!"

    End If

Next

End Function 
```

# c++ - C++ Minecraft2D 块类型？

> ID：11879614
> 
> 赞同：0
> 
> 时间：2012-08-09T08:38:18.877
> 
> 标签：c++, enums

我正在用 Java 开发 Minecraft2D 类型的游戏，我决定用 C++ 创建相同的游戏以增强我的 C++ 能力。但我有一个问题。我在 Java 中有一个 BlockType 枚举，其中包含该 BlockType 的图像位置和硬度（挖掘它需要多长时间）。我发现 C++ 中的枚举与 Java 中的不同。如何在 C++ 中实现它？

块类型.java：

```
public enum BlockType {
    STONE("res/blocks/stone.png",3),
    COAL("res/blocks/coal.png", 2),
    AIR("res/blocks/air.png",0),
    GRASS("res/blocks/grass.png",1),
    DIRT("res/blocks/dirt.png",1),
    DIAMOND("res/blocks/diamond.png",5),
    REDSTONE("res/blocks/redstone.png",3),
    COBBLE("res/blocks/cobble.png",3),
    BRICK("res/blocks/brick.png",4),
    IRON("res/blocks/iron.png",4),
    GOLD("res/blocks/gold.png",5);
    public final String location;
    public final int hardness;
    BlockType(String location, int hardness){
    this.location = location;
    this.hardness = hardness;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T09:03:44.870

我会选择类似于 SingerOfTheFall 的答案：

```
enum blocks
{
    STONE,
    COAL,
    GOLD
};

struct BlockType {
    BlockType(std::string loc, int h): location(loc), hardness(h) {}
    std::string location;
    int hardness;
};

BlockType blockTypes[] = {
  BlockType("res/blocks/stone.png", 3), // STONE
  BlockType("res/blocks/coal.png", 2), // COAL
  BlockType("res/blocks/gold.png", 5) // GOLD
};

// use:
cout << "Location: " << blockTypes[STONE].location << endl; 
```

`std::map`是一个很好的容器，但是每次需要获取值时它都会使用二进制搜索。索引将从 0 到 n，因此您可以改用数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T08:46:13.417

一种可能性是使用 a [`std::map`](http://en.cppreference.com/w/cpp/container/map)，由一个`enum`值作为键，并且值为[`std::pair<sd::string, int>`](http://en.cppreference.com/w/cpp/utility/pair)：

```
#include <string>
#include <map>
#include <utility>

enum BlockType
{
    STONE,
    COAL,
    GOLD
};

std::map<BlockType, std::pair<std::string, int>> BlockTypes;

BlockTypes[STONE] = std::make_pair(std::string("res/blocks/stone.png"), 3);
BlockTypes[COAL]  = std::make_pair(std::string("res/blocks/coal.png"),  2);
BlockTypes[GOLD]  = std::make_pair(std::string("res/blocks/gold.png"),  5); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T08:55:20.730

为什么使用和`std::map`使用数组？（可以在编译时初始化）

```
using namespace std;

struct BlockType {
    enum {
       STONE = 0,
       COAL,
       LAST
    };
    BlockType(string location, int hardness) : location(location), hardness(hardness) {}
    const string location;
    const int hardness;
    static const BlockType Blocks[LAST];
};

const BlockType BlockType::Blocks[] = {
    BlockType("res/blocks/stone.png", 3),
    BlockType("res/blocks/coal.png", 2)
};

int main() {
    cout << BlockType::Blocks[BlockType::STONE].location << `\n`;
    return 0;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T08:57:16.207

我会在这里结合两个答案并映射`enum`到块`struct`

```
struct Block
{
  block(path, str) : strength(str), path(path) {}
  int str;
  std::string path;
};

enum BlockType
{
  STONE,
  COAL,
  ETC
}

std::map<BlockType, Block> blocks;
blocks[STONE] = Block("c:/block/bla.png", 1);
blocks[STONE].str; // 1
blocks[STONE].path; // "c:/block/bla.png" 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-09T08:45:23.287

C++ 枚举确实以另一种方式工作。

```
enum eMyEnum
{
    ONE = 15,
    TWO = 22
}; 
```

几乎可以从它们那里得到，基本上它们只允许您为 INT 值创建“名称”。

对于您的情况，我将为块名称创建一个枚举：

```
enum blocks
{
    STONE,
    SAND,
    <...>
}; 
```

然后制作地图：

```
< blocks, pair< string, int > >
    ^       ^     ^      ^
    |       |     |      |
    |       |     |     hardness
    |       |    path to picture
    |       |      
    |      the block's attributes: the picture path and hardness
    |
  the block type from the enum (e.g. SAND) 
```

或者只是制作一个结构来保存三个值：

```
struct block
{
    string type;//or int, or your enum type, depending on how do you want to store it.
    string picture;
    int hardness;
} 
```

# javascript - ReferenceError：未定义块

> ID：11879617
> 
> 赞同：1
> 
> 时间：2012-08-09T08:38:29.697
> 
> 标签：javascript

以下代码尝试将一些代码注入 iFrame（与页面位于同一服务器上）。我收到**ReferenceError: chunks is not defined**错误。有人可以帮我弄清楚为什么吗？我已经在这个问题上禁止了一天。

```
<iframe id="preview-iframe"></iframe>

<script language="JavaScript" type="text/javascript">
var chunks;
chunks += "<span class=\"bold";
chunks += "\">Hello World!</";
chunks += "span>";
document.getElementById("preview-iframe").src="javascript:void(document.write(chunks))";
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T08:46:53.863

```
<iframe id="prev-frame"></iframe>

<script language="JavaScript" type="text/javascript">
    var chunks = '';
    chunks += "<span class=\"bold";
    chunks += "\">Hello World!</";
    chunks += "span>";
    document.getElementById("prev-frame").src="javascript:void(document.write('" + chunks + "'))";
</script> 
```

您需要连接，`'" + chunks + "'`以便它不会被逐字解释。另外，`iframe`是一个保留字，所以我重命名`id`了框架上的。

:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T08:48:54.847

```
document.getElementById("preview-iframe").contentWindow.document.write(chunks);​ 
```

应该管用。正如 Rob W 所说，iframe 与您的页面不共享相同的范围。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T08:41:32.167

问题是 iFrame 的范围与原始文档不同，这可能会有所帮助：[将 javascript 值传入 iframe 标记](https://stackoverflow.com/questions/2625615/passing-in-javascript-values-into-iframe-tag)

当你声明它时，我还会将块设置为空字符串......

```
var chunks = ""; 
```

# java - Java 性能 Windows 与 Linux

> ID：11879618
> 
> 赞同：8
> 
> 时间：2012-08-09T08:38:31.683
> 
> 标签：java, windows, linux, performance

我开发了一个通常在 Linux 上运行的 Java 应用程序。这是一个带有 Swing 的 POJO 应用程序。性能相当不错。

现在我尝试在具有 2Gb RAM 的 Windows XP 上运行它，在一台具有相似或更高效能的机器上运行它，但性能要差得多。我观察到它使用 100% CPU。

例如：

*   一个创建非常繁重的窗口的进程，包含许多组件：Linux 5 秒，Windows 12。
*   使用繁重查询访问 PostgreSQL 数据库的进程（服务器和 JDBC 驱动程序相同）：23 秒 Linux，Windows 43。

    我还尝试了具有类似功能的虚拟化 Windows 机器，结果明显更好！

    正常吗？我可以分配哪些参数来提高性能？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T08:48:36.257

除非您在同一台机器上比较 Linux 和 Windows XP，否则很难说有什么区别。可能是因为 CPU 更快，但 GFX 卡和磁盘子系统更慢。

Java 将所有这些 IO 和 GFX 活动传递给底层操作系统，您唯一可以做的不同就是减少工作或提高工作效率。这可能会使两个系统都更快，因为您可以调整的操作系统并不特别。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T09:26:32.100

尝试运行 Java Visual VM（作为 JDK 的一部分分发）：附加到您的应用程序，然后使用 CPU Profiler 来准确确定所有 CPU 时间的去向。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T13:07:58.993

JRE 部分的行为可能存在细微差别（想到 Swing），JRE 对不良做法的反应非常无情（例如从 Swing 中的错误线程执行操作）。

由于您没有任何线索，我会尝试在两种环境中分析相同的用例，看看是否有任何显着差异出现在花费时间的地方。这有望揭示一个提示。

编辑：并确保您不要在刹车的情况下运行 Windows（又名防病毒和其他可能会破坏系统性能的“有用”软件）。

# jquery - 使用 .net 中的 fb 按钮获取身份验证令牌

> ID：11879621
> 
> 赞同：0
> 
> 时间：2012-08-09T08:38:40.847
> 
> 标签：jquery, c#-4.0, facebook-graph-api

我正在使用 facebook 应用程序是否有任何方法可以通过使用 Facebook 登录按钮获取用户身份验证令牌我尝试了许多来自 Google 的示例但没有成功。请为我提供一个包含所有必需代码的解决方案。基本上我想允许用户在那里填写 facebook 的 uname 和 pwd 并将那里的身份验证令牌保存在我将来用来获取用户信息的 db 中。

这是示例但不起作用

```
<script src="http://code.jquery.com/jquery-latest.js"></script>
<script src="http://connect.facebook.net/en_US/all.js" type="text/javascript" charset="utf-8"></script> 
```

```
<body>
<p>
    <input type="email" id="email" placeholder="email" />
</p>
<p>
    <input type="password" id="password" placeholder="password" />
</p>
<p>
    <input type="button" onclick="" value="Authorize in Facebook using hidden iframe!"
        id="iLogin" />
</p>
<iframe id="fbFrame" src="about:blank;" border="0"></iframe>
<p style="color: green; font-size: 30px;" id="fbtoken">
</p>
<p style="color: green; font-size: 30px;" id="fbuid">
</p>
<script>

    var my_client_id = "my_client_id",

        my_redirect_uri = "http://www.facebook.com/connect/login_success.html",

        my_type = "user_agent",
        my_display = "popup"
    authorize_url = "https://graph.facebook.com/oauth/authorize?"

    authorize_url += "client_id=" + my_client_id
    authorize_url += "&redirect_uri=" + my_redirect_uri,
    authorize_url += "&type=" + my_type,
    authorize_url += "&display=" + my_display,
    authorize_url += "&scope=offline_access"

    setIFrameUrl = function () {
        $("#fbFrame").attr("src", authorize_url);
    }

    getToken = function () {
        debugger;
        var loc = document.getElementById("fbFrame").contentWindow.location.href
        if (/access_token/.test(loc)) {
            var fbToken = loc.match(/access_token=(.*)$/)[1]
            var fbId = loc.match(/-(\d*)%/)[1]
            $("#fbtoken").html("Facebook access token: " + fbToken);
            $("#fbuid").html("Facebook user id: " + fbId);
        } else {
            var grantAccessButton = $("#fbFrame").contents().find("input[name=grant_clicked]");
            if (grantAccessButton) { // if app asks for permissions, grant 'em
                grantAccessButton.click();
            }
            setTimeout(getToken, 1000)
        }
    }

    doTheLogin = function () {
        var emailInput = $("#fbFrame").contents().find("input[name=email]");
        var passInput = $("#fbFrame").contents().find("input[name=pass]");
        var loginButton = $("#fbFrame").contents().find("input[name=login]");
        emailInput.val($("#email").val());
        passInput.val($("#password").val());
        loginButton.click();
    }

    $(document).ready(function () {
        setIFrameUrl();
        $("#iLogin").click(function () {
            console.log("iLogin clicked!")
            debugger;
            doTheLogin();
        })
        getToken();
    })
</script> 
```

现在我使用了以下代码

[Facebook 登录 JS - FB.Event.subscribe('auth.login') 无需点击登录按钮即可触发](https://stackoverflow.com/questions/9110519/facebook-login-js-fb-event-subscribeauth-login-triggers-without-login-butt)

但仍然无法获取 accessToken 有一个名为 Facebook_login() 的函数将获取 Tocken 但它从未调用过我需要做任何其他更改还是我做错了实现。我使用代码作为

```
<script>

    window.fbAsyncInit = function () {
        FB.init({
            appId: 'appId',
            status: false,
            cookie: true,
            xfbml: true
        });
    };

    (function (d) {
        var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
        if (d.getElementById(id)) { return; }
        js = d.createElement('script'); js.id = id; js.async = true;
        js.src = "//connect.facebook.net/en_US/all.js";
        ref.parentNode.insertBefore(js, ref);
    } (document));

    function Facebook_login() {
        FB.getLoginStatus(function (response) {
            if (response.status === 'connected') {
                var uid = response.authResponse.userID;
                var accessToken = response.authResponse.accessToken;
                alert(accessToken);
            }
        });
    }
</script>
<div class="fb-login-button" onlogin="Facebook_login()" autologoutlink="true" scope="publish_stream,offline_access,manage_pages,user_groups">
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T11:19:44.587

> 我尝试了很多谷歌的例子，但没有成功

您不应该通过尝试一些您在 Google 上搜索到的晦涩示例来开始使用 API，而应该阅读官方文档。你展示的代码在很多地方看起来很奇怪，在某些地方甚至是完全错误的——我什至不打算详细说明。

我的建议：首先使用 JavaScript SDK 方法[FB.login](https://developers.facebook.com/docs/reference/javascript/FB.login/)让用户登录；之后，使用[FB.api](https://developers.facebook.com/docs/reference/javascript/FB.api/)请求您需要的信息。

*（如果你对如何使用 JavaScript 的基本知识还知之甚少——那么请事先阅读一些关于这方面的教程。）*

# android - 通话期间录音机静音

> ID：11879625
> 
> 赞同：0
> 
> 时间：2012-08-09T08:39:06.613
> 
> 标签：android, audio-recording, samsung-mobile, android-mediarecorder

我的应用程序以 amr 格式录制音频。它在某些设备上运行良好，但在其他设备上却无法在通话期间录制音频。从录制的文件中，您可以清楚地看出录制正常，并且您听到所有声音，直到电话开始响铃并且从那里音频静音。

这是在运行 ICS 4.0.4 的三星 GT-I9000 上观察到的，而在我的 htc 上它运行良好。

这是我设置录音机的方法：

```
mRecorder = new MediaRecorder();
mRecorder.setAudioSource(MediaRecorder.AudioSource.MIC);
mRecorder.setOutputFormat(MediaRecorder.OutputFormat.RAW_AMR);
final String path = getRecordingAbsPath();
mRecorder.setOutputFile(path);
mRecorder.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_NB);
mRecorder.prepare();
mRecorder.start(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T11:09:20.027

正如迈克尔指出的那样，这似乎是一个硬件限制。

# django - python 2.7+安装中的Django配置

> ID：11879628
> 
> 赞同：0
> 
> 时间：2012-08-09T08:39:10.407
> 
> 标签：django, installation, python-2.7

我做了至少2个小时的护目镜。我确实正确地阅读了 Django 和安装指南的文档，但仍然没有成功在我的系统中配置 Django。我需要帮助

我有 windows-07、python 2.7 并想在我的系统中配置 Django 1.4.1。

**我做了什么直到时间？**

1.安装成功python 2.7

通过检查版本

```
import sys
print sys.version 
```

2.现在，下载并解压Django（官方版本1.4.1）并将这个目录放在我的C盘（文件夹python 27所在的位置）

我确实通过 cmd 运行了 Django 的 setup.py 但仍然没有成功。谁能给我建议我在这里做错了什么？欢迎任何帮助，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T10:19:21.097

对于windows-7，django的正式版......你在cmd中试过这个命令吗！

在 django 目录 -> python setup.py install

# .net - 在处理跨 AppDomain 调用时替代 Remoting

> ID：11879632
> 
> 赞同：0
> 
> 时间：2012-08-09T08:39:21.097
> 
> 标签：.net, reflection, remoting, appdomain

我有一个 .NET 类库，我需要将其加载到一个单独的域并从中执行一些代码。现在我正在使用 AppDomain.CreateInstanceFrom 来创建一个远程对象并使用一些接口解包它。但我有什么选择？远程处理是一种过时的技术。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T09:01:25.553

Remoting is fine for cross-AppDomain, but the other approach is to pretend they are different processes on the same machine, or different machines.

For example, you could use a basic socket-server between the two, or something like WCF or Service Stack operating on a named-pipe (or similar). Or flat files in a known location and polling. Or a database table as a queue. Or a dedicated messaging stack - anything from MSMQ to redis pub/sub. Or a http server (`HttpListener` maybe) and client (`WebClient` maybe). Go wild.

Personally, I'd be tempted to stick with remoting if it works, though. Note I only say this **between app-domains**, in the way laid out in your post - I wouldn't personally use remoting between processes/machines.

# android - 谷歌分析页面标题设置

> ID：11879633
> 
> 赞同：1
> 
> 时间：2012-08-09T08:39:32.610
> 
> 标签：android

现在`tracker.trackPageView(trackable.getSceneTitle());`所做的只是填充第一个“活动页面”列，但我最好同时使用“活动页面”和“页面标题”列。是否可以使用 GA 框架设置页面标题？

谢谢。

# java - 如何将对象从一张地图放到另一张地图？

> ID：11879637
> 
> 赞同：0
> 
> 时间：2012-08-09T08:39:36.840
> 
> 标签：java, generics, casting

我有一个`Map`这样的：

```
Map<String,GridCell> cellsMap 
```

我将它传递给一个方法，该方法的返回应该包含一个`Map`（比如说`answerMap`），它包含`cellsMap`map的所有条目以及一个包含 a作为 key 和 a作为 value**的额外条目。**就像是 ：`String``String`

```
 Map<String,Object> answerMap  = new ConcurrentHashMap<String,Object>();
    //answer should first contain all the map entries of cellsMap and then add an extra entry like the following
    answer.put(getId(), getSelectionValue()); // getSelectionValue() returns a String that contains coordinates of the selected cells.
     return answerMap; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T08:41:42.100

您是否考虑过[Map.putAll()](http://docs.oracle.com/javase/6/docs/api/java/util/Map.html#putAll%28java.util.Map%29)方法？

例如

```
answerMap.putAll(cellsMap); 
```

顺便说一句，我认为这不是一个好的对象模型。我认为您最好创建一个包含原始地图（可能是副本）和`String`/`String`对的附加字段的新类。

否则，您会将不同类型的对象扔到同一张地图中，当您稍后提取该信息时，这将使生活变得复杂。每次通过密钥提取时，您都必须检查返回的对象的类型。请注意，`ConcurrentHashMaps`不要维护插入顺序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T08:45:39.730

使用 clone() 方法。

```
HashMap answerMap = (HashMap)cellsMap.clone(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T10:33:08.260

Map 接口有 putall() 方法，它在 Map 中添加另一个对象的所有值。

# http - 为什么文件上传示例使用名称“qqfile”？

> ID：11879638
> 
> 赞同：6
> 
> 时间：2012-08-09T08:39:38.790
> 
> 标签：http, file-upload, httpwebrequest

我注意到似乎有这种不成文的约定，当将文件发布到服务器以在请求“qqfile”中调用文件时。谷歌搜索我似乎找不到任何关于为什么选择“qqfile”的解释。

为什么使用这个名字是否有一些历史原因？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T08:52:39.870

因为流行的 AJAX 文件上传组件之一使用了命名空间`qq`和参数`qqfile`。使用命名空间前缀`file`可能是为了避免与表单中的其他参数发生冲突。我不知道为什么作者更喜欢`qq`作为他的组件的命名空间，因为它既不像文件上传也不像他的网站 valums.com。他本可以想要一些`$`不与现有流行图书馆冲突的简短的东西。

[https://github.com/valums/file-uploader](https://github.com/valums/file-uploader)

# android - AudioRecord 无法在 2.3 上保存文件

> ID：11879642
> 
> 赞同：0
> 
> 时间：2012-08-09T08:39:51.033
> 
> 标签：android, audio

我的项目开发平台是google API7。它可以运行以下2.2版本的设备，但是当我安装在2.3以上版本上时，我的文件无法保存在SD卡中

这是我的代码

```
class ButtonListener implements OnClickListener
{
    public void onClick(View v)
    {
        if (v == startButton) 
        {
        setTitle("Start Recording and transmitting the file");  
        bar.setMax(second);
        updateBarHandler.post(updateThread);
        startButton.setVisibility(View.GONE);
        exitButton.setVisibility(View.GONE);
        stopButton.setVisibility(View.GONE);

        }

        if (v == stopButton)                
        {
            setTitle("Stop");
            handler.removeCallbacks(updateThread);  
            recorderInstance.setRecording(false);
            recorderInstance = null;
            startButton.setVisibility(View.VISIBLE);
            exitButton.setVisibility(View.VISIBLE);
        }

        if (v == exitButton) 
        {
            Intent intent = new Intent();
            intent.setClass(MyRecorder.this, User.class);
            startActivity(intent);
            MyRecorder.this.finish();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T08:54:47.837

试试这个代码来录制音频。

```
File sampleDir = Environment.getExternalStorageDirectory();
try {
audiofile = File.createTempFile("Recording", ".3gp", sampleDir);
recorder = new MediaRecorder();
recorder.setAudioSource(MediaRecorder.AudioSource.MIC);
recorder.setOutputFormat(MediaRecorder.OutputFormat.THREE_GPP);
recorder.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_NB);
    recorder.setOutputFile(audiofile.getAbsolutePath());
    recorder.prepare();
recorder.start();  
    }
    catch (IOException e)
   {
   Log.e(TAG, "sdcard access error");
   return;
} 
```

您可以使用以下代码将此音频保存在 SD 卡中。

```
audioFileName=input.getText().toString();
current = System.currentTimeMillis();
String artist = "" + getResources().getText(R.string.artistName);
ContentValues values = new ContentValues();
values.put(MediaStore.MediaColumns.DATA, audiofile.getAbsolutePath());
values.put(MediaStore.MediaColumns.TITLE, audioFileName);
values.put(MediaStore.Audio.Media.DATE_ADDED,  current );
values.put(MediaStore.MediaColumns.MIME_TYPE, "audio/3gpp");
values.put(MediaStore.Audio.Media.ARTIST, artist);              
values.put(MediaStore.Audio.Media.DATA, audiofile.getAbsolutePath());
ConntentResolver contentResolver = getContentResolver();
Uri base = MediaStore.Audio.Media.EXTERNAL_CONTENT_URI;
Uri newUri1 = contentResolver.insert(base, values); 
```

# iphone - 在其大小更改后计算插入的 CGRect 的新原点

> ID：11879643
> 
> 赞同：0
> 
> 时间：2012-08-09T08:39:51.223
> 
> 标签：iphone, ios, cocoa-touch, math, geometry

我有一个`CGRect A`并且`CGRect B`在其中`B`居中`A`（a`CGRect`包含矩形的 x 和 y 原点以及高度和宽度大小）。如果我将 的宽度和高度增加`A`某个比例，并将宽度和高度增加`B`相同的比例，将 x 原点`B`和 y 原点乘以`B`相同比例（分别为宽度和高度），将保持`B`在中心，`A`因为两者都以新的比例增长？我已经在几个不同的场景中对此进行了测试并且它有效，但只是想验证它是否适用于所有情况，因为我的数学并不那么敏锐。

另外，想知道是否有一种方法可以简单地将 a 的所有值乘以`CGRect`这个比例，而无需手动进行（在文档中找不到）。

更新：实际上，这行不通……试图想出一种方法，使我能够在两者的大小成比例增加后正确地将视图定位在另一个视图中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T09:26:25.973

是的，您提出的建议有效，但前提是外部的原点`CGRect`是 0,0 或者您也将其原点乘以因子。如果你不这样做，内部矩形将移动到右下角。

如果您同时使用多个原点和大小，会发生以下情况：

![在 CGRect 中居中 CGRect](../Images/4a934ff3e96871bb03c2b9902f09f2c9.png)

如果您不乘以外部矩形的原点，则会发生这种情况：

![在此处输入图像描述](../Images/e4f63c0fde76471a5ab772739fe8bf88.png)

从您的问题来看，您要达到的目标并不完全清楚。如果您想放大一个`CGRect`并（重新）居中另一个，请使用以下功能：

```
//  center a CGRect in another one
static inline CGRect ALRectCenterInRect(CGRect outerRect, CGRect innerRect)
{
    return CGRectMake(CGRectGetMidX(outerRect)-innerRect.size.width/2, CGRectGetMidY(outerRect)-innerRect.size.height/2, innerRect.size.width, innerRect.size.height);
}

//  multiply each value of a CGRect with factor
//      combine with CGRectIntegral() to prevent fractions (and the resulting aliasing)
static inline CGRect ALRectMultiply(CGRect rect, CGFloat factor)
{
    return CGRectMake(rect.origin.x*factor, rect.origin.y*factor, rect.size.width*factor, rect.size.height*factor);
} 
```

如何使用它们：

```
CGRect centeredInnerRect = ALRectCenterInRect(outerRect, innerRect);

CGRect multipliedRect = ALRectMultiply(someRect, 1.5); 
```

但是，在处理`CGRect`s 时，通常是关于`UIView`s。如果您想将 a`UIView`在其超级视图中居中，请执行以下操作：

```
someSubview.center = CGPointMake(CGRectGetMidX(someSuperview.bounds), CGRectGetMidY(someSuperview.bounds)); 
```

如果内部视图与外部视图具有相同的超级视图，您可以简单地执行此操作以使其在外部视图中居中：

```
innerView.center = outerView.center; 
```

# asp.net-mvc - 为什么返回动作不起作用？

> ID：11879644
> 
> 赞同：1
> 
> 时间：2012-08-09T08:39:51.500
> 
> 标签：asp.net-mvc, asp.net-mvc-3

我有以下代码

```
 public ActionResult Index()
    {
        ViewData.Model = new Model();
        return Action1();
    }

    public ActionResult Action1()
    {
        return View();
    } 
```

当我调用 index 动作时，它会调用 action1 方法，然后再次调用 index 动作。任何人都知道为什么会这样？

我知道我们可以使用 RedirectToAction("Action1") 来解决这个问题，但我只是好奇这种行为背后的原因。多谢了。

温迪

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T08:47:09.613

它不会`Index`再次调用该操作。因为你第一次调用的动作是`Index`方法`View()`会返回对应的视图`Index`。这就是为什么您会看到`Index`.

# oracle - 删除Oracle表的大量行

> ID：11879651
> 
> 赞同：0
> 
> 时间：2012-08-09T08:40:20.410
> 
> 标签：oracle, oracle10g

我有一个来自公司的数据表，它是 250Gb，有 35 列。我需要删除大约 215Gb 的数据，这显然是要从表中删除的大量行。该表**没有**主键。

**从该表中删除数据的最快方法是**什么？Oracle 中是否有任何工具可用于如此大的删除过程？

请建议我使用 Oracle 最快的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T09:09:01.327

正如在上面的答案中所说，最好将要保留的行移动到单独的表中并截断表，因为有一个东西叫做`HIGH WATERMARK`. 更多细节可以在这里找到[http://sysdba.wordpress.com/2006/04/28/how-to-adjust-the-high-watermark-in-oracle-10g-alter-table-shrink/](http://sysdba.wordpress.com/2006/04/28/how-to-adjust-the-high-watermark-in-oracle-10g-alter-table-shrink/)。删除操作将压倒您`UNDO TABLESPACE`的调用。

我相信这个`recovery model`术语相当适用于 mssql :)。

* * *

希望它能澄清这个问题。

谢谢。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T08:52:04.983

你知道哪些记录需要保留吗？您将如何识别每条记录？

一个解决方案可能是将要保留的记录移动到临时数据库，然后截断大表。之后，将保留的记录移回。

请注意，事务日志文件可能因此变得非常大（但取决于您的恢复模式）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T14:51:44.220

很久以前我们也遇到过类似的问题。有一个包含 10 亿行的表，但必须根据某些规则删除很大一部分数据。我们通过编写一个 Pro*C 作业来解决这个问题，以提取我们想要保留的数据并应用规则，然后将要保留的数据 sprintf 保存到 csv 文件中。

然后创建一个 sqlldr 控制文件以使用直接路径上传数据（这不会创建撤消/重做（但如果您需要恢复表，则在您进行下一次备份之前，您将拥有 CSV 文件）。

序列是

*   运行 Pro*C 创建 CSV 数据文件
*   为索引生成 DDL
*   删除索引
*   使用 CSV 文件运行 sql*load
*   使用并行提示重新创建索引
*   使用 degree(8) 分析表格

并行量取决于数据库服务器的 CPU 和内存——我们有 16 个 CPU 和一些 RAM 可以使用，所以这不是问题。

正确数据的提取是其中最长的部分。经过几次试运行后，SQL Loader 能够在一小时内加载完整的 10 亿行（即 10 亿或 10 亿行）。

# c++ - UIView animateWithDuration:animations:completion: 块不会出现在 .mm 文件中

> ID：11879656
> 
> 赞同：2
> 
> 时间：2012-08-09T08:40:55.747
> 
> 标签：c++, objective-c, ios, xcode4

我在 .mm 文件中有以下代码：

```
[UIView animateWithDuration:0.3 animations:^{
    self.titleLabel.alpha = 0.0;
} completion:^(BOOL finished) {    //<<compiler complains here
    self.titleLabel.alpha = 1.0;
}]; 
```

但我得到编译器错误：

> 无法使用“void (^)(int)”类型的右值初始化“void (^)(BOOL)”类型的参数

在上面提到的那条线上。该代码在普通的 .m 文件中很好。我做错了什么，还是编译器有问题？

更新：标题导入是：

```
#import <UIKit/UIKit.h> 
```

和 .mm 进口（审查）：

```
#import "XXSelectViewController.h"
#import "XXViewController.h"
#import "AboutViewController.h"
#import "HighScoresViewController.h"
#import "GameModel.h" 
```

更新2：另外，我在这一行收到警告：

```
- (void)viewDidDisappear:(BOOL)animated 
```

警告：

> 'viewDidDisappear:' 实现中的参数类型冲突：'BOOL' (aka 'signed char') vs 'int'

我们在这个项目中使用了 PowerVR 工具，在 PVRShell.h 和 PVRTResourceFile.h 中有以下几行：

```
typedef bool (*PFNReleaseFileFunc)(void* handle);

typedef bool (*PFNReleaseFileFunc)(void* handle); 
```

我不知道这是否与这些问题有关...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T10:26:12.617

事实证明，错误的原因是因为这条线，深埋在 PVR 工具中：

```
#define BOOL int 
```

所以有一个宏遍历所有代码，替换`BOOL`为`int`. 不理想！我认为它导致问题的原因是因为这些工具是作为文件夹添加的，而不是作为嵌入式 .xcodeproj ......所以我们可能需要重新导入它。学过的知识！

奇怪的是，如果我注释掉那一行，代码仍然有效；）但谁知道能坚持多久！

# google-apps-script - google.script.run 的服务器响应处理程序

> ID：11879657
> 
> 赞同：5
> 
> 时间：2012-08-09T08:40:58.507
> 
> 标签：google-apps-script

如何使用 google.script.run 为同一服务器调用指定成功和失败处理程序？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-09T08:48:20.867

下面的代码应该做你需要的

```
google.script.run.withFailureHandler(myFailureHandler).withSuccessHandler(handler1); 
```

它[记录](https://developers.google.com/apps-script/guides/html/communication#script_runners)在`Success and Failure Handlers`段落中。正文以

> 您可以使用 withSuccessHandler、withFailureHandler 和 withUserObject 的任意组合。

# stored-procedures - Interbase 6 和存储过程数组参数

> ID：11879659
> 
> 赞同：1
> 
> 时间：2012-08-09T08:41:06.720
> 
> 标签：stored-procedures, parameters, interbase

Interbase 6 数据库是否支持将数组参数传递给存储过程？如果是，那么声明此类变量并在程序主体中使用它的语法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T15:21:54.977

看起来即使是当前版本的 IB 也不支持数组参数。

该文档包含一个在存储过程中处理数组数据以将其展平的示例，然后将多个展平记录从存储过程中传递出来。当然，您也可以在 IB 6 中完成所有这些操作。

此示例在 XE 的数据定义手册中。请参阅使用存储过程。

有关此主题的[Interbase 文档](http://docs.embarcadero.com/products/interbase/IB2009/IB2009_DataDef.pdf)可能很有用。

# java - 如何创建具有 1 GB 堆的可执行 jar 文件

> ID：11879661
> 
> 赞同：1
> 
> 时间：2012-08-09T08:41:24.793
> 
> 标签：java, jar, executable

我创建了一个类，它提供一个包含系统性能的文本文件作为输出。我想将它作为**可执行**Jar 运行。但是当我运行 Jar 时，我想将堆增加到 1 GB。

如果我们运行这个程序，我可以这样运行：

```
java -Xms1200m  -Xmx1300m Sample 
```

但是如何使用**可执行**的Jar 来增加堆空间呢？当我单击 jar 时，它必须以 1 GB 的堆空间执行。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-09T08:43:32.210

```
 java -Xms1200m -Xmx1300m -jar FILENAME.jar 
```

在 jar 文件或清单中的某处定义它是不可能的：

[我可以设置从 jar 文件运行的 Java 最大堆大小吗？](https://stackoverflow.com/questions/1018217/can-i-set-java-max-heap-size-for-running-from-a-jar-file)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T09:19:55.490

如前所述：不幸的是，这是不可能的（不创建包装器，无论是快捷方式/脚本/可执行文件......）。

如果您只在 Windows 上运行，我可以推荐[Launch4J](http://launch4j.sourceforge.net/)创建一个可执行包装器，该包装器可以在执行时应用这些设置：

将其包装在可执行文件中还有其他好处：

*   如果没有找到合适的Java版本，会提示用户下载
*   Windows 7 开始菜单将正确对待它（安装后将其突出显示为新应用程序）
*   Windows 防火墙会正确对待它

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-07-22T09:56:08.437

```
<launch4jConfig>
  <dontWrapJar>false</dontWrapJar>
  <headerType>gui</headerType>
  <jar>PATH_OF_YOUR_JAR</jar>
  <outfile>PATH_OF_YOUR_EXE</outfile>
  <errTitle></errTitle>
  <cmdLine>-log_file=logs\\hp</cmdLine>
  <chdir></chdir>
  <priority>normal</priority>
  <downloadUrl>http://java.com/download</downloadUrl>
  <supportUrl></supportUrl>
  <customProcName>true</customProcName>
  <stayAlive>false</stayAlive>
  <manifest></manifest>
  <icon>PATH_OF_THE_ICON</icon>
  <singleInstance>
    <mutexName>APPLICATION_NAME</mutexName>
    <windowTitle></windowTitle>
  </singleInstance>
  <jre>
    <path>jre-w32\</path>
    <minVersion></minVersion>
    <maxVersion></maxVersion>
    <jdkPreference>preferJre</jdkPreference>
    <initialHeapSize>512</initialHeapSize>  
    <maxHeapSize>1024</maxHeapSize>
  </jre>
</launch4jConfig> 
```

它是一个launch4j 配置文件，在这里您可以根据需要指定堆大小。

# captcha - 无法使用战斧库中的验证码

> ID：11879668
> 
> 赞同：0
> 
> 时间：2012-08-09T08:42:08.407
> 
> 标签：captcha, jsf-1.2, tomahawk

我正在尝试使用 tomahawk 中的验证码组件，`<t:captcha>`. 每次页面加载时，都会出现以下错误：

> *com.sun.facelets.tag.TagException: /tiles/competitionSite.xhtml @112,46 标签库支持命名空间： [http](http://myfaces.apache.org/tomahawk) ://myfaces.apache.org/tomahawk ，但没有为名称定义标签：验证码*

我认为图书馆有问题。我检查了 tomahawk JAR，`<t:captcha>`应该在 Tomahawk 1.1.7 或更高版本中得到支持。我使用了多个版本（例如 1.1.13），但`<t:captcha>`从来没有工作过。所有其他标签`<t:inputText>`都可以正常工作。我还导入了`batik-awt-util-1.6-1.jar`, 因为这是验证码所必需的。

也许我的其他库有问题？我不能轻易交换它们，因为有很多依赖项。以下是它们的列表：

*   `batik-awt-util-1.6-1.jar`
*   commons-beanutils-1.7.0.jar
*   commons-codec-1.3.jar
*   commons-collections-3.1.jar
*   commons-digester-1.6.jar
*   commons-el-1.0.jar
*   commons-lang-2.1.jar
*   commons-validator-2.1.jar
*   el-ri.jar
*   jakarta-oro.jar
*   jboss-serialization.jar
*   jsf-facelets-1.1.12.jar
*   jstl-1.1.0.jar
*   myfaces-api-1.1.5.jar
*   myfaces-impl-1.1.5.jar
*   org.springframework.web-3.0.5.jar
*   richfaces-api-3.1.6.GA.jar
*   richfaces-impl-3.1.6.GA.jar
*   richfaces-ui-3.1.6.GA.jar
*   `tomahawk-1.1.13.jar`
*   urlrewrite-2.6.0.jar

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T10:02:11.540

我刚刚发现了错误。在我们的 CMS 中，`tomahawk.taglib.xml`文件不会从包含的 JAR 中动态部署。我只需要像这样创建一个新条目：

```
 <tag>
    <tag-name>captcha</tag-name>
    <component>
      <component-type>org.apache.myfaces.CAPTCHA</component-type>
      <renderer-type>org.apache.myfaces.CAPTCHA</renderer-type>
    </component>
  </tag> 
```

现在我使用`<t:captcha>`tomahawk-1.1.7.jar 和 batik-awt-util-1.6-1.jar。

# ios - 如何在 deleteRowsAtIndexPaths 中捕捉动画结尾

> ID：11879669
> 
> 赞同：10
> 
> 时间：2012-08-09T08:42:18.287
> 
> 标签：ios, uitableview, animation

我想知道是否有可能捕捉到 deleteRowsAtIndexPaths 期间触发的动画是否结束？我想要做的是从 UITableView 中删除一些所有行，除了我点击的行。接下来我想在同一个 UITableView 中插入几行。这两个操作都在单独的 beginUpdate/endUpdate 块中执行。问题是在删除动画结束之前，插入动画开始了，我希望它一个接一个地被触发，因为插入的行来自外部 web 服务。

我正在考虑将插入和删除方法（在 UITableView 子类中）包装在可以用自定义动画替换标准动画并在第一个结束时使用objective-c块一个接一个地触发的方法中，但这似乎是不可能的，或者我可以不要这样做。

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-26T23:16:17.367

我相信将您的表格更新包装在`animateWithDuration`其中会起作用：

```
[UIView animateWithDuration:0.0 animations:^{
    [coursesTable beginUpdates];
    …
    [coursesTable endUpdates];
} completion:^(BOOL finished) {
    // Code to run when table updates are complete.
}]; 
```

我在 Stack Overflow 上发现的其他方法对我不起作用。

我曾经使用过这种技术并对其进行了足够的测试，以验证在我调用表的 endUpdates 方法之后调用了完成块，并且调用它的时间似乎合理，但是我重写了我的代码，所以我不再需要它了在我完全验证动画实际上已经完成之前。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-09-27T09:26:09.373

从 iOS 11 到更高版本：

```
[tblProducts performBatchUpdates:^{
        [self->tblProducts deleteRowsAtIndexPaths:@[self.animDeleteIndex] withRowAnimation:UITableViewRowAnimationFade];
    } completion:^(BOOL finished) {
        [self->tblProducts reloadData];
}]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-13T10:05:17.847

用于`CATransaction`捕捉任何动画的完成

```
CATransaction.begin()
CATransaction.setCompletionBlock({
     // completion
})
// do your animation here
CATransaction.commit() 
```

# javascript - 使用 javascript 访问动态表行的值

> ID：11879672
> 
> 赞同：1
> 
> 时间：2012-08-09T08:42:28.513
> 
> 标签：javascript, html

我正在编写一个 js 代码，用于创建每行 3 列的动态表，即。

1.  文本框1 | 文本框2 | 文本框3
2.  文本框1 | 文本框2 | 文本框3 ..

我要做的是获取 textbox1 和 textbox2 的值，并在文本框 3 中显示这些值的乘法结果。

但我的脚本不起作用..请提出补救措施或更好的方法来做到这一点......

代码 ：

```
function addRowToTable() {
  var tbl = document.getElementById('tblSample');
  var lastRow = tbl.rows.length;

  // if there's no header row in the table, then iteration = lastRow + 1
  var iteration = lastRow;
  var row = tbl.insertRow(lastRow);

  // left cell
  var cellLeft = row.insertCell(0);
  var textNode = document.createTextNode(iteration);
  cellLeft.appendChild(textNode);

  var cellRight = row.insertCell(1);
  var el = document.createElement('input');
  el.setAttribute('type', 'text');
  el.setAttribute('id', 'f1' + iteration);
  el.setAttribute('size', '22');
  cellRight.appendChild(el);

  var cellRight = row.insertCell(1);
  var el = document.createElement('input');
  el.setAttribute('type', 'text');
  el.setAttribute('id', 'f2' + iteration);
  el.setAttribute('size', '20');
  cellRight.appendChild(el);

  var cellRight = row.insertCell(1);
  var el = document.createElement('input');
  el.setAttribute('type', 'text');
  el.setAttribute('id', 'f3' + iteration);
  el.setAttribute('size', '20');
  cellRight.appendChild(el);
}

function removeRowFromTable() {
  var tbl = document.getElementById('tblSample');
  var lastRow = tbl.rows.length;
  if (lastRow > 2) tbl.deleteRow(lastRow - 1);
}

function store3() {
  var tbl = document.getElementById('tblSample');
  var rowIterator = tbl.rows.length;
  var z = document.getElementById("f3");
  z.value = (document.getElementById("f1").value) * (document.getElementById("f2").value) * 1;
} 
```

表格是这样的：

```
<form action="tableaddrow_nw.html" method="get">
<input type="button" value="Add Position" onclick="addRowToTable();" />
<input type="button" value="Remove Position" onclick="removeRowFromTable();" />
<table border="1" id="tblSample">
<tr>
<td><input type="text" name="f1" id="f1" size="20" onkeyup="store3()"/></td>
<td><input type="text" name="f2" id="f2" size="20" onkeyup="store3()"/></td>
<td><input type="text" name="f3" id="f3" size="20" /></td>
</tr>
</table>
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T09:05:55.343

我修改了你的代码，当你添加新行时它应该成倍增加，

这是[工作演示](http://jsfiddle.net/GDQgB/1/)

**HTML**

```
<form action="tableaddrow_nw.html" method="get">
<input type="button" value="Add Position" onclick="addRowToTable();" />
<input type="button" value="Remove Position" onclick="removeRowFromTable();" />
<table border="1" id="tblSample">
    <tr>
        <td><input type="text" name="f1" id="f1" size="20" onkeyup="store3('f1','f2', 'f3')"/></td>
        <td><input type="text" name="f2" id="f2" size="20" onkeyup="store3('f1','f2', 'f3')"/></td>
        <td><input type="text" name="f3" id="f3" size="20" /></td>
    </tr>
</table> 
```

**脚本：**

```
function addRowToTable()
{

var tbl = document.getElementById('tblSample');
var lastRow = tbl.rows.length;
// if there's no header row in the table, then iteration = lastRow + 1
var iteration = lastRow;
var row = tbl.insertRow(lastRow);
// left cell
var cellLeft = row.insertCell(0);
var textNode = document.createTextNode(iteration);
cellLeft.appendChild(textNode);
var cellRight = row.insertCell(1);
var el = document.createElement('input');
el.setAttribute('type', 'text');
el.setAttribute('id', 'f1' + iteration);
el.setAttribute('size', '22');
el.onkeyup = function(){store3('f3' + iteration,'f2' + iteration, 'f1' + iteration)}
cellRight.appendChild(el);
var cellRight = row.insertCell(1);
var el = document.createElement('input');
el.setAttribute('type', 'text');
el.setAttribute('id', 'f2' + iteration);
el.setAttribute('size', '20');
el.onkeyup = function(){store3('f3' + iteration,'f2' + iteration, 'f1' + iteration)}
cellRight.appendChild(el);
var cellRight = row.insertCell(1);
var el = document.createElement('input');
el.setAttribute('type', 'text');
el.setAttribute('id', 'f3' + iteration);
el.setAttribute('size', '20');
el.onkeyup = function(){store3('f3' + iteration,'f2' + iteration, 'f1' + iteration)}
cellRight.appendChild(el);
}

function removeRowFromTable()
{

var tbl = document.getElementById('tblSample');
var lastRow = tbl.rows.length;
if (lastRow > 2) tbl.deleteRow(lastRow - 1);
}

function store3(t1, t2, t3)
{

var tbl = document.getElementById('tblSample');
var rowIterator = tbl.rows.length;
var z=document.getElementById(t3);
z.value=(document.getElementById(t1).value)*(document.getElementById(t2).value)*1;

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T08:54:49.213

您的 JavaScript 代码引用了硬编码的元素 ID，因此它永远不会与任何其他 ID 一起使用。
我建议您对现有行使用与在脚本中创建的行相同的命名约定。还要为每一行提供一个 id 并将该 id 传递给您的 store3() 函数[您应该真正将其称为 calculateSum() 或类似的名称，最好使用有意义的名称] - 然后您可以制定动态从 id 传递给函数的每个字段的 ids。

# android - 小部件中的图像未出现在设备上，但在模拟器上工作正常。怎么修？

> ID：11879676
> 
> 赞同：0
> 
> 时间：2012-08-09T08:42:53.687
> 
> 标签：android, android-emulator, android-imageview

我制作了一个小部件，它从内部存储中读取图像并将其显示在 ImageView 中。它在模拟器（Android 2.3.3。API 级别 10）上运行良好，但是当我在我的设备（Droid Razr Android 2.3.6）上运行它时，它不显示图像。小部件在屏幕上，但它只是空白。小部件的其他部分工作正常，如配置活动等。只有图像没有出现。有什么问题？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T09:10:58.400

对于可能出现的问题，我有两个建议：

*   您的文件可能不在您设备上指定的位置
*   您可能没有该文件的读取权限；尝试`chmod a+r yourfile`在 adb shell 中发出

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T22:27:32.850

好的，我修好了。在我存储和从内部存储器读取图像的存储类中，有一个函数将**文件名**作为参数。现在这个**文件名将**在最后一次调用来存储它时使用。相反，我写了**"fileName"**。所以存储中只有一个名为**fileName**的文件。这导致使用实际文件名从存储读取时出现问题。

# asp.net-mvc - 如何使用敲除将数据发送回 MVC 中的控制器

> ID：11879679
> 
> 赞同：1
> 
> 时间：2012-08-09T08:43:01.930
> 
> 标签：asp.net-mvc, knockout.js

我有以下代码：

索引.cshtml：

```
@using System.Web.Script.Serialization
@model MvcApplication3.Models.Person

<script src="../../Scripts/knockout-2.1.0.js" type="text/javascript"></script>

    <!-- This is a *view* - HTML markup that defines the appearance of your UI -->

<p>First name: <input data-bind="value: firstName" /></p>
<p>Last name: <input data-bind="value: lastName" /></p>

<script type="text/javascript">

    var initialData = @Html.Raw(new JavaScriptSerializer().Serialize(Model));

    // This is a simple *viewmodel* - JavaScript that defines the data and behavior of your UI
    function AppViewModel() {
        this.firstName = ko.observable(initialData.FirstName);
        this.lastName = ko.observable(initialData.LastName);

    }

    // Activates knockout.js
    ko.applyBindings(new AppViewModel());

</script> 
```

家庭控制器：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Mvc;
using MvcApplication3.Models;

namespace MvcApplication3.Controllers
{
    public class HomeController : Controller
    {
        public ActionResult Index()
        {
            var people = new PeopleEntities();

            var person = people.People.First();

            return View(person);
        }

        [HttpPost]
        public ActionResult Index(Person person)
        {
            //Save it

            return View();
        }
    }
} 
```

基本上，它的作用是从数据库中加载一个人，并使用敲除为名字和姓氏创建可编辑字段。它将值加载到字段中

这工作正常。

但是我不确定如何将更改发布回控制器进行保存。它们必须被反序列化并放回模型中，然后再发回。不知道该怎么做。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-09T09:25:24.437

您可以使用敲除功能`postJson`。将以下 Save 方法添加到您的视图模型：

```
function AppViewModel() {
    self = this;

    self.firstName = ko.observable(initialData.FirstName);
    self.lastName = ko.observable(initialData.LastName);

    self.Save = function(){
        var jsonData = ko.toJSON(self);
        ko.utils.postJson(location.href, {person: jsonData});
    };
} 
```

您也可以在视图中添加按钮：

```
<button data-bind="click: Save" ></button> 
```

# android - Android 小部件希望限制在小屏幕市场中显示

> ID：11879681
> 
> 赞同：0
> 
> 时间：2012-08-09T08:43:05.643
> 
> 标签：android

我开发了一个全屏大小的小部件，我只想将它安装在大屏幕设备中。它甚至不应该在小屏幕市场上展示。任何人都知道如何限制我的小部件不在小屏幕市场中显示。欢迎提出建议。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T09:02:13.660

利用

```
<supports-screens
    android:anyDensity="true"
    android:largeScreens="true"
    android:normalScreens="false"
    android:smallScreens="false"
    android:xlargeScreens="true" /> 
```

在 Android 清单文件中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T09:05:41.743

看看[这个](http://developer.android.com/guide/topics/manifest/supports-screens-element.html)。这是限制应用配置的官方 Google Play 方式。

# c# - C# 类型转换/Linq

> ID：11879684
> 
> 赞同：0
> 
> 时间：2012-08-09T08:43:24.937
> 
> 标签：c#, linq, shared

我们目前有几个基础数据库表，例如`Events`、`Shop` `Products`、 内容页面等。每个都有共享属性，例如具有名称、站点前端的详细信息页面、缩略图 url、活动标志等。

我试图找出创建可用于一般传递这些对象的共享属性类的最有效方法。一个例子可能是搜索结果页面。可以针对最初实际上跨多个表的数据集合的名称进行搜索。

由于所有这些类都源自`LINQ`类，我正在努力使用继承，并且我不想开始编辑数据上下文设计器以满足我的需要。

目前我的每个部分类都`LINQ classes`包含一个 SharedObject 方法：

```
 public partial class Event
    {
        public SharedObject SharedObject
        {
           get
           {
            return new SharedObject(this);
           }
        }
     ... 
```

对事件、商店产品等重复此操作。共享对象类包含以下内容：

```
public class SharedObject
{
public string Reference { get; set; }
public string Name { get; set; }
public string ImageURL { get; set; }
public bool IsVisible { get; set; }
public bool IsAdminVisible { get; set; }
public string FrontEndDetailsURL { get; set; }
public string AdminDetailsURL { get; set; }
public object OriginalObject { get; set; }
public string ObjectDescription { get; set; }

public SharedObject(object originalObject)
{
    if (originalObject.GetType() == typeof(Event))
    {
        Event eventx = (Event)originalObject;

        Reference = eventx.Reference;
        Name = eventx.Name;
        ImageURL = eventx.ImageURL;
        IsVisible = eventx.IsActive && !Event.IsArchived;
        IsAdminVisible = !eventx.IsArchived;
        FrontEndDetailsURL = eventx.DetailsURL;
        AdminDetailsURL = eventx.AdminDetailsURL;
        OriginalObject = originalObject;
        ObjectDescription = "Event";
    }
    .... 
```

这听起来像一个合适的解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T08:51:36.513

我认为传递共享对象的最有效方法是使用“责任链模式”[责任链](http://www.dofactory.com/Patterns/PatternChain.aspx)

对于继承 LINQ，您可以考虑使用 IQueryable<T>。我希望它可以帮助你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T08:52:09.190

考虑使用接口。这要灵活得多。

```
public interface ISharedObject
{
   string Reference { get; set; }
   string Name { get; set; }
   string ImageURL { get; set; }
   bool IsVisible { get; set; }
   bool IsAdminVisible { get; set; }
   string FrontEndDetailsURL { get; set; }
   string AdminDetailsURL { get; set; }
   object OriginalObject { get; set; }
   string ObjectDescription { get; set; }
}

public partial class Event : ISharedObject
{} 
```

# iphone - 如何在 iOS 技术中创建我们自己的增强现实标记？

> ID：11879686
> 
> 赞同：3
> 
> 时间：2012-08-09T08:43:24.847
> 
> 标签：iphone, ios, ios5, augmented-reality, marker

我是 AR 技术的新手，我研究并了解到 AR 可用于标记检测技术。

我发现了一些带有 vuforia、string、ARKit 等的示例代码。

但是他们如何检测我还无法获取的特定标记。

所以我的主要问题是：

*   如何创建我们自己的标记（适用于 iOS）（示例代码/链接会有所帮助）？
*   如何使用相机检测那个特定的标记来放置我们的 AR 对象？

如果您需要更多详细信息，请告诉我。

欢迎任何帮助/信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T09:07:18.540

Did you see this one?

[Augmented reality on the iPhone using NyARToolkit](http://www.morethantechnical.com/2009/07/01/augmented-reality-on-the-iphone-using-nyartoolkit-w-code/)

Also I found some sample code here: [https://github.com/kamend/iPhone-Stuff](https://github.com/kamend/iPhone-Stuff)

# iphone - 自动翻页功能（页面视图控制器）

> ID：11879690
> 
> 赞同：1
> 
> 时间：2012-08-09T08:43:36.157
> 
> 标签：iphone, objective-c, xcode

我目前正在做一个应用程序，它使用页面视图控制器一一（连续）显示推文。我按照教程[here](http://www.techotopia.com/index.php/An_Example_iOS_5_iPhone_UIPageViewController_Application)。

这是一个关于如何在没有故事板的情况下实现页面视图控制器的教程。

我想在不点击 iPhone 屏幕的情况下自动翻页，我还没有找到任何实现此类功能的教程。这有可能吗？

请告诉我问题是否构造不当，以便我可以对其进行编辑。我在这里很新。

# wkhtmltopdf - wkhtml 库不接受 url 中的第二个参数？

> ID：11879696
> 
> 赞同：4
> 
> 时间：2012-08-09T08:44:01.803
> 
> 标签：wkhtmltopdf

我正在使用 wkhtml 库生成 html 到 pdf，但它不接受 url 中的第二个参数？

```
exec('C://"Program Files"//wkhtmltopdf.exe ' . 'http://localhost/test.php?a=351&b=2' . ' ' . $file_name . ''); 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T13:50:04.707

尝试将命令设置为变量，回显它并直接在可执行文件上尝试，而不是从 PHP 中尝试。这可能会给你一个可读的错误。

另外，尝试将网址放在引号中，我刚刚尝试了以下命令，效果很好

```
wkhtmltopdf.exe "https://www.google.com/search?hl=fi&safe=off&biw=1195&bih=732&site=imghp&tbm=isch&sa=1&q=test&oq=test" test.pdf 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-08-19T06:22:26.127

我建议使用[escapeshellarg()](http://fi2.php.net/manual/en/function.escapeshellarg.php)（转义 & 导致问题是 shell 命令的保留字符）

```
$print_url = escapeshellarg("http"//site.com/print_page.php?arg1=$arg1&arg2=$arg2"); 
```

然后：

```
$print = exec("/usr/bin/wkhtmltopdf -T 0 -B 0 -L 0 -R 0  $print_url  $path/$file 2>&1"); 
```

# android - 从android中的图库中选择大图像后禁用自动旋转

> ID：11879697
> 
> 赞同：1
> 
> 时间：2012-08-09T08:44:01.353
> 
> 标签：android, bitmap

当我从图库中选择图像并将其缩放以适合视图时，有时图像显示会自动旋转 -90 度。这很奇怪。而且我注意到它仅在所选图像太大时发生。代码或 android 可能有什么问题？

我使用了以下代码 -

```
public class MainActivity extends Activity {

TextView textTargetUri;
ImageView targetImage;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    Button buttonLoadImage = (Button)findViewById(R.id.loadimage);
    textTargetUri = (TextView)findViewById(R.id.targeturi);
    targetImage = (ImageView)findViewById(R.id.targetimage);

    buttonLoadImage.setOnClickListener(new Button.OnClickListener(){

        @Override
        public void onClick(View arg0) {
            // TODO Auto-generated method stub
            Intent intent = new Intent(Intent.ACTION_PICK,
                    android.provider.MediaStore.Images.Media.EXTERNAL_CONTENT_URI);
            startActivityForResult(intent, 0);
        }});

}

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    // TODO Auto-generated method stub
    super.onActivityResult(requestCode, resultCode, data);

    if (resultCode == RESULT_OK){
        Uri targetUri = data.getData();
        textTargetUri.setText(targetUri.toString());

        Toast.makeText(getApplicationContext(), 
                "ImageView: " + targetImage.getWidth() + " x " + targetImage.getHeight(), 
                Toast.LENGTH_LONG).show();

        Bitmap bitmap;
        bitmap = decodeSampledBitmapFromUri(
                targetUri,
                targetImage.getWidth(), targetImage.getHeight());

        if(bitmap == null){
            Toast.makeText(getApplicationContext(), "the image data could not be decoded", Toast.LENGTH_LONG).show();

        }else{
            Toast.makeText(getApplicationContext(), 
                    "Decoded Bitmap: " + bitmap.getWidth() + " x " + bitmap.getHeight(), 
                    Toast.LENGTH_LONG).show();
            targetImage.setImageBitmap(bitmap);
        }   
    }
}

/*
 *  How to "Loading Large Bitmaps Efficiently"?
 *  Refer: http://developer.android.com/training/displaying-bitmaps/load-bitmap.html
 */

public Bitmap decodeSampledBitmapFromUri(Uri uri, int reqWidth, int reqHeight) {

    Bitmap bm = null;

    try{
        // First decode with inJustDecodeBounds=true to check dimensions
        final BitmapFactory.Options options = new BitmapFactory.Options();
        options.inJustDecodeBounds = true;
        BitmapFactory.decodeStream(getContentResolver().openInputStream(uri), null, options);

       //  Calculate inSampleSize
        options.inSampleSize = calculateInSampleSize(options, reqWidth, reqHeight);

        options.inJustDecodeBounds = false;
        bm = BitmapFactory.decodeStream(getContentResolver().openInputStream(uri), null, options);

    } catch (FileNotFoundException e) {
        e.printStackTrace();
        Toast.makeText(getApplicationContext(), e.toString(), Toast.LENGTH_LONG).show();
    }

    return bm;
}

public int calculateInSampleSize(
        BitmapFactory.Options options, int reqWidth, int reqHeight) {
    // Raw height and width of image
    final int height = options.outHeight;
    final int width = options.outWidth;
    int inSampleSize = 1;

    if (height > reqHeight || width > reqWidth) {
        if (width > height) {
            inSampleSize = Math.round((float)height / (float)reqHeight);    
        } else {
            inSampleSize = Math.round((float)width / (float)reqWidth);  
        }   
    }
    return inSampleSize;    
} 
```

}

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<TextView
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="@string/hello_world" />

<Button
    android:id="@+id/loadimage"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="Load Image" />

<TextView
    android:id="@+id/targeturi"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" />

<ImageView
    android:id="@+id/targetimage"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:scaleType="centerCrop" /> 
```

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.example.androidselectimage"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="15" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity android:screenOrientation="portrait"
        android:name=".MainActivity"
        android:label="@string/title_activity_main" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T09:20:48.533

消除

```
m.postRotate(90); 
```

从你的代码和改变

```
options.inSampleSize = 2; 
```

代替

```
options.inSampleSize = calculateInSampleSize(options, reqWidth, reqHeight); 
```

并删除

```
android:scaleType="centerCrop" 
```

从图像视图也希望帮助

# iphone - 从底部加载导航 ViewController

> ID：11879699
> 
> 赞同：2
> 
> 时间：2012-08-09T08:44:07.547
> 
> 标签：iphone, ios, cocoa-touch, uiviewcontroller, uinavigationcontroller

我有四个 ViewControllers ，其中 ViewControllers 使用`UINavigationController`. 我能够一个一个地切换到每个 ViewController。

问题是，由于我使用的是 NavigationController，所有 ViewController 都是从左侧或右侧加载的。但我想从底部加载 ViewController。我知道我可以用来`presentModalViewController`从底部展示 ViewController。但它不等同于导航控制器，因为从第 4 个 ViewController，如果我按下一个按钮，我需要来到第 1 个 ViewController。

如何从 NavigationController 的底部呈现 ViewController ？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-09T09:05:42.413

尝试这个：

```
CATransition *animation = [CATransition animation]; 
[animation setDuration:2]; 
[animation setType:kCATransitionPush]; 
[animation setSubtype:kCATransitionFromTop]; 
[animation setTimingFunction:[CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseInEaseOut]]; 
SecondView *sObj=[[SecondView alloc] initWithNibName:@"SecondView" bundle:nil];
[self.navigationController pushViewController:sObj animated:YES];
[[sObj.view layer] addAnimation:animation forKey:@"SwitchToView1"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T09:47:18.553

使用这个可能会帮助你

```
[UIView beginAnimations:@"Hide Me" context:nil];
[UIView setAnimationCurve:UIViewAnimationCurveEaseInOut];
[UIView setAnimationDuration:kAnimationDur];
subScroll.frame = CGRectMake(0,ksubScrollHideY,ksubScrollW,ksubScrollH);
clickPic.frame = CGRectMake(kButtonX,kButtonHiddenY,kButtonW,kButtonH);
[UIView setAnimationDelegate:self];
[UIView commitAnimations]; 
```

快乐编码:)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-08-09T08:47:05.563

创建 viewController 后，而不是：

```
[self.navigationController pushViewController:blablabla animated:YES]; 
```

做：

```
[self presentModalViewController:blablabla animated:YES]; 
```

它将来自底部。

要回去，只需说：

```
[self dismissViewControllerAnimated:YES]; 
```

# c# - 资源泄漏和内存泄漏与性能的关系

> ID：11879701
> 
> 赞同：2
> 
> 时间：2012-08-09T08:44:15.157
> 
> 标签：c#, java, performance, resources

对于资源泄漏，我指的是 Streams、StreamWriter（我想他们正在使用文件描述符）、句柄（GDI 或用户也可以使用图形字体）。很快，所有可关闭对象都可以算作资源！如果应用程序中有一些资源泄漏。假设一些 InputStreams 没有关闭，它们是否也存在潜在的内存泄漏，因为垃圾收集器不会将它们从内存中删除？

另一个问题：资源泄漏会影响性能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T09:18:47.863

> 如果应用程序中有一些资源泄漏。假设一些 InputStreams 没有关闭，它们是否也存在潜在的内存泄漏，因为垃圾收集器不会将它们从内存中删除？

无论资源是否关闭，GC 都会清理它们。如果不关闭，则唯一无法清理的资源是线程。

当 Stream 在没有关闭的情况下被丢弃时，它会被集合上的终结器关闭。这有两个问题

*   确切地何时甚至即使这种情况发生在不可预知的情况下，这意味着文件可能不会被刷新或文件上保留锁定以防止其被删除。
*   终结器是单线程，关闭资源可能需要一些时间。如果你有足够的这些，终结器将跟不上，你会得到一个 OutOfMemoryError，因为你有大量的资源等待清理。

完成资源后清理资源总是更好。

> 另一个问题：资源泄漏会影响性能吗？

他们可以，这取决于泄漏了多少。如果你没有太多的想法，你必须假设它是一个问题，除非你确信它不是。例如，一个程序可能每天泄漏一个 24 字节的对象，或者它可能每秒泄漏 100 MB。并非所有泄漏都是相同的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T09:12:42.813

这取决于你所说的性能。我假设您说的是整体性能，这意味着内存消耗、速度等都很重要。

这也取决于所使用的资源。一些资源（例如文件句柄）在进程退出时被恢复，所以泄漏只会在执行时出现问题。即使在您的应用程序执行之后，其他（如服务器或数据库连接）可能仍然存在泄漏。其他（如互斥锁等）应尽快释放。

现在，后果取决于资源。如果资源是同一进程中的本机对象，那么泄漏它可能会泄漏相关的内存。如果资源是您锁定但未能解锁的互斥锁，那么您可能即将死锁您的应用程序。如果资源是一个连接，即使您停止使用它，服务器也会保持该连接打开。如果资源是一个文件，它可能会阻止其他应用程序（甚至您自己的应用程序）再次访问它。

最后，虽然某些资源可能会泄露，但其他资源不应该泄露。就我而言，不应该泄露任何资源，但是 YMMV。

因此，您应该养成始终正确释放您获取的资源（内存、文件、连接、互斥锁等）的习惯，无论该资源的感知重要性如何。这样做会训练你正确的编码模式（和思维方式）。

如果您想探索这些概念，[RAII](https://en.wikipedia.org/wiki/Resource_Acquisition_Is_Initialization)和[异常安全是您要搜索的关键字。](https://en.wikipedia.org/wiki/Exception_safety#Exception_safety)

对于 C#，将需要[Dispose 模式](http://msdn.microsoft.com/en-us/library/b1yfkh5e.aspx)（IDisposable 接口和终结器）和`using`关键字。另一种解决方案是使用/的`finally`类来释放您的资源，但这很难正确维护。`try``finally`

在 Java 中，您需要 Java 7 (IIRC)，并使用 AutoCloseable 接口和“ [try-with-resources](http://docs.oracle.com/javase/tutorial/essential/exceptions/tryResourceClose.html) ”语句。与在 C# 中一样，您可以使用/`finally`类来释放资源，但问题相同。`try``finally`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T08:48:25.687

`Memory leak`，顾名思义是一个无用的内存，但仍分配在您的进程空间中。考虑到`CLR`32 位机器上的进程可能有大约 1.2GB 的内存，我会说在您的应用程序中出现内存泄漏是*非常危险的。*

自然，*一切都*取决于您的应用程序有多大、关键任务和其他因素。但是，无论如何，*总是*尽量避免它们，特别是如果你已经知道它们存在，特别是如果你已经知道它们在哪里。

**编辑**

资源泄漏实际上是同一个故事。资源分配内存，因此根据定义，它的泄漏会造成内存泄漏。

希望这可以帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T09:07:28.840

Leak can occur when you keep a rooted reference to an unused object. The GC is unable to collect it as it is still reachable. Pay special attention to your static instances and event handlers attached to static events.

When you leave a disposable object undiposed, in most case it will defer the release of unmanaged resources and may cause bug (Stream not flushed, ...). When releasing memory, the garbage collector calls a [Finalizer](http://msdn.microsoft.com/library/system.object.finalize.aspx) on objects containing unmanaged resources. This is more expensive than a staight call to Dispose that will lessen GC's job. It is unpredictable, the finalizer may be called really lately. So if you do not call Dispose it can lead to temporary resource starvation (no remaining file handle, ...).

So there is no memory leak for not calling Dispose on this Stream but you shouldn't rely on Finalization as it is costly and unpredictable. Moreover Dispose can do more than releasing resources, it can also properly clear a managed object (flush buffered stream, ...).

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-09T08:48:18.300

是的，内存泄漏意味着应用程序需要更频繁地运行垃圾收集器，并且每次运行时能够恢复更少的内存。当内存耗尽时，应用程序将崩溃。

文件未关闭将导致应用程序在达到最大打开文件数时无法执行与文件或套接字相关的任何操作，这通常会使应用程序无法使用。

# objective-c - didSelectRowAtIndexPath 任意调用

> ID：11879705
> 
> 赞同：0
> 
> 时间：2012-08-09T08:44:48.340
> 
> 标签：objective-c, ios, uitableview

我有一个包含 UITableView 的 UIViewController。一切就绪：数据源、委托、连接 IB 中的所有内容。didSelectRowAtIndexPath 并非一直被调用。我没有可以覆盖我触摸的行的透明视图或按钮。任何想法为什么会发生这种情况？

在 didSelect 中没有花哨的东西：

```
-(void)tableView:(UITableView *)tableView didDeselectRowAtIndexPath:(NSIndexPath *)indexPath {
    NSLog(@"IT WORKS");
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T09:41:27.610

我找到了！您使用了 did* *De* *selectRowAtIndexPath 而不是 didSelectRowAtIndexPath。

# javascript - jQuery弹出窗口中的javascript

> ID：11879711
> 
> 赞同：0
> 
> 时间：2012-08-09T08:45:15.623
> 
> 标签：javascript

我试图在 jquery html 弹出窗口中传递一个参数。但我无法这样做。下面是我的代码。

```
var emailid =result.rows[0].emailid;
        var html =                     '<input type="button" class="closebtn" value="close"/>' 
                                           + 'Firstname  :'+result.rows[0].firstname+'<br/>'
                                           + 'Lastname   :'+result.rows[0].lastname+'<br/>'
                                           + 'Emailid    :'+result.rows[0].emailid+'<br/>'
                                           +'<input type="button"  value="Approve"                        
    onClick="approve('emailid');"/>;

  JAVASCRIPT is
             function approve(id){   
              var email=id;    
              alert(email);  
          } 
```

1.  它说在我的变量 html 中丢失了一些东西。我试着像这样传递

    ```
     `onClick="approve(emailid);".` 
    ```

    即使它不起作用。你能指出我在做什么错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T08:58:13.240

尝试这个：

```
var html =  '<input type="button" class="closebtn" value="close"/>' 
             + 'Firstname  :'+result.rows[0].firstname+'<br/>'
             + 'Lastname   :'+result.rows[0].lastname+'<br/>'
             + 'Emailid    :'+result.rows[0].emailid+'<br/>'
             +'<input type="button"  value="Approve" onClick="approve(\'emailid\');"/>'; 
```

问题是引号内有引号。你需要用反斜杠转义它们。

编辑。或者...您可能的意思是：

```
var html =  '<input type="button" class="closebtn" value="close"/>' 
             + 'Firstname  :'+result.rows[0].firstname+'<br/>'
             + 'Lastname   :'+result.rows[0].lastname+'<br/>'
             + 'Emailid    :'+result.rows[0].emailid+'<br/>'
             +'<input type="button"  value="Approve" onClick="approve(\'' + emailid + '\');"/>'; 
```

这是一个快速而肮脏的演示：http: [//jsfiddle.net/SwhWx/3/](http://jsfiddle.net/SwhWx/3/)

# c# - 以编程方式签入 TFS 中的选定文件

> ID：11879717
> 
> 赞同：2
> 
> 时间：2012-08-09T08:45:31.553
> 
> 标签：c#, .net, tfs, checkin

我想将文件签入到 TFS，但不是所有待处理的更改。

```
PendingChange[] changes = workspace.GetPendingChanges();
workspace.CheckIn(changes, ""); 
```

通过这种方式，我检查了我所有的文件。但我只想签入具有特定文件名的选定文件。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T09:18:25.167

尝试`changes`根据`PendingChange.FileName`或其他属性过滤列表。然后`Workspace.CheckIn`使用过滤的更改列表调用。

# c++ - 使数据输入字段记住它们的值从一个运行到下一个

> ID：11879729
> 
> 赞同：0
> 
> 时间：2012-08-09T08:46:20.267
> 
> 标签：c++, mfc

我正在编写一个 C++ MFC 程序，我看到程序可以记住从一个程序运行到下一个程序的某些字段的最后输入值。我可以通过将其保存到文件并加载然后重新填充来做到这一点，但是是否有另一种更快的方法来做到这一点，因为我想我记得在某处读过这些值可以存储在注册表中？如果有人有例子或个人经历，我会很感兴趣。

谢谢，詹姆斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T08:51:34.390

这完全取决于您想要记住什么样的价值观。如果是配置数据，您可以使用`config`文件。如果是小型应用程序数据，您可以使用专有格式的平面文件。如果数据量很大，您可以使用`SQL Server`.

通常有关于使用[ini 文件与注册表](http://www.codinghorror.com/blog/2007/08/was-the-windows-registry-a-good-idea.html)的争论。

您要考虑的其他事情是数据是否将在网络上使用。是否需要加密。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T10:18:33.497

有很多选择

我个人不喜欢注册表，更喜欢让我的程序可移植。所以我现在能想到的是1-ini文件

2- 属性文件

3- SQL 服务器

4-您也可以通过网络服务器同步用户设置，但正如@Jeeva 提到的，有安全方面的考虑

干杯

# java - Collections 实用程序类中排序函数的实现比较

> ID：11879730
> 
> 赞同：2
> 
> 时间：2012-08-09T08:46:25.010
> 
> 标签：java, generics

我对 Java 中的泛型使用很陌生。

遇到以下功能在`Collections.java`课堂上进行排序

```
// Sorting based on Comparable
public static <T extends Comparable<? super T>> void sort(List<T> list) {
    Object[] a = list.toArray();
    Arrays.sort(a);
    ListIterator<T> i = list.listIterator();
    for (int j=0; j<a.length; j++) {
        i.next();
        i.set((T)a[j]);
    }
}

// Sorting based on Comparator
public static <T> void sort(List<T> list, Comparator<? super T> c) {
    Object[] a = list.toArray();
    Arrays.sort(a, (Comparator)c);
    ListIterator i = list.listIterator();
    for (int j=0; j<a.length; j++) {
        i.next();
        i.set(a[j]);
    }
} 
```

我想了解的是：

1.  为什么`ListIterator`在基于的排序函数中参数化`Comparable`以及为什么在基于的排序函数中使用*raw* ？`ListIterator``Comparator`

2.  在`for`循环中，为什​​么在基于的排序函数中需要类型转换（to `T`）`Comparable`以及为什么在`for`基于的排序函数的循环中不需要类型转换`Comparator`？

我觉得以下代码对于基于比较器的排序功能具有更多的类型安全性：

```
public static <T> void Sort(List<T> list, Comparator<? super T> c) {
        Object[] a = list.toArray();
        Arrays.sort(a, (Comparator)c);
        ListIterator<T> i = list.listIterator();
        for (int j=0; j<a.length; j++) {
            i.next();
            i.set((T)a[j]);
        }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T08:51:37.003

> 为什么在基于 Comparator 的排序函数中使用原始 ListIterator。

您不能创建类型数组，`? super T[]`因此它会从那里创建`Object[]`并使用原始类型。

> 在 for 循环中，为什​​么在基于 Comparable 的排序函数中需要类型转换（到 T）以及为什么在基于 Comparator 的排序函数的 for 循环中不需要转换

在第一种情况下，你有`ListIterator<T>`which can only `set(T)`，在第二种情况下，你有`ListIterator`which 可以设置任何对象。

# c# - C#中相同长度的输出加密和解密

> ID：11879736
> 
> 赞同：2
> 
> 时间：2012-08-09T08:47:00.423
> 
> 标签：c#, .net, algorithm, encryption

> **可能重复：**
> [如何加密字符串并获得等长的加密字符串？](https://stackoverflow.com/questions/985830/how-do-i-encrypt-a-string-and-get-a-equal-length-encrypted-string)

我是加密和解密的新手。我有一个长度为 24 个字符的字符串。我需要加密和解密这个词。加密可能不太安全，但我需要加密字的长度应与输入字符串（24 个字符）相同。我通过网络搜索并找到了一些示例加密算法（**AES，MD5**）。但是加密的单词比输入字符串太长。这是我们将与客户共享的产品密钥，因此不需要强加密。如果您共享示例代码，这将很有用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T09:08:32.193

使用[Vernam 密码](http://en.wikipedia.org/wiki/Gilbert_Vernam#The_Vernam_cipher)。对于具有真正随机生成的密钥的单个字符串，它在理论上是牢不可破的。如果您开始对多个字符串使用相同的密钥，则会显着降低其安全性，但显然您并不是在寻找最大的安全性。如果是，您必须能够为每个加密密码提供不同的随机密钥。

虽然你可以在网上找到很多示例代码，但我认为你自己实现它是一个很好的做法。这很简单。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T09:07:55.903

您正在寻找的似乎是[Format-preserving encryption](http://en.wikipedia.org/wiki/Format-preserving_encryption)，我认为.NET 中没有任何实现（我当然没有使用过）。您可能需要为此考虑一个自定义算法。你说不需要强加密，但你显然需要算法不明显。不幸的是，实际上有数百种方法可以做到这一点，所以这取决于哪一种适合你。

[这似乎是加密算法的好帖子](http://www.codeproject.com/Articles/63432/Classical-Encryption-Techniques)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T12:06:58.190

要使密文与明文长度相同，请使用流密码。这可以是 CTR 模式下的块密码，例如 AES-CTR，也可以是专用的流密码，例如 Rabbit 或 RC4。

请注意，您**不能**为流密码重复使用密钥，否则攻击者可能会破解加密。使用相同密钥的两个密文可以完全消除密钥，只留下两个明文。

如果您只有一个 24 字节字要加密，那么这不是问题。如果您需要加密多个数据，那么密钥管理就变得很重要。

# java - 使用 StratifiedRemoveFolds 示例在 weka 中创建训练和测试集

> ID：11879737
> 
> 赞同：4
> 
> 时间：2012-08-09T08:47:02.203
> 
> 标签：java, machine-learning, classification, weka

我正在尝试从命令行使用**weka**运行一些分类。在此链接[weka-Primer-commandline](http://weka.wikispaces.com/Primer)中，有以下用于创建测试和训练集的示例：

```
java weka.filters.supervised.instance.StratifiedRemoveFolds -i data/soybean.arff -o soybean-train.arff \
-c last -N 4 -F 1 -V

java weka.filters.supervised.instance.StratifiedRemoveFolds -i data/soybean.arff -o soybean-test.arff \
-c last -N 4 -F 1 
```

这段代码是否应该将 3/4 的数据用于训练，1/4 用于测试集？在我看来，整个数据中只有一个折叠（从最后一个，因为 -V）将被分配用于训练，只有 1 折叠用于测试。我对吗？我需要 3/4 数据用于训练，1/4 用于测试。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-09T13:06:20.547

文档中的代码是正确的，将 3/4 的数据放在训练集中，1/4 放在测试集中。这些选项的含义如下：

*   `-N`：应该有4个折叠，意思是数据被分成4个相等的不重叠的部分
*   `-F`：应选择这些部分/折叠中的第一个
*   `-V`: 反转选择

因此，创建训练集的第一行代码如下：

*   创建4个折叠
*   选择第一个折叠并取其结果的倒数，从而选择剩余的 3 折叠，即数据的 3/4

只需选择第一折，即数据的 1/4，即可轻松创建测试。

# backbone.js - 具有动态视图的主干

> ID：11879743
> 
> 赞同：3
> 
> 时间：2012-08-09T08:47:36.930
> 
> 标签：backbone.js, backbone-views

我正在尝试在骨干 js 中实现这样的目标

```
var AppRouter = Backbone.Router.extend({
    routes: {
        // MVC like route
        ':controller': 'defaultRoute',
        // MVC like route
        ':controller/:action': 'defaultRoute',
        // MVC like route
        ':controller/:action/:id': 'defaultRoute',
        // MVC like route
        ':controller/:action/*id': 'defaultRoute'
    },
    defaultRoute: function (controller, action, id) {
        // render view here or 
        // call another specific route regarding to controller parameter
    }
});

var appRouter = new AppRouter;
Backbone.history.start(); 
```

因此，当 url 为：**something.com/#home/index** defaultRoute 函数将获取参数**controller="home"**和**action="index"**。我现在想知道如何在文件夹“controller/home/index”中找到视图（Backbone.View）并动态实例化（和渲染）。还想知道是否更好的方法是为每个“控制器”使用 Backbone.Router（我使用的名称是“控制器”，但它实际上是“路由器”）。

有任何想法吗？

**更新可能的解决方案！**

我结束了这个

```
 // Filename: router.js
define([
  'jquery',
  'underscore',
  'backbone'
], function ($, _, Backbone) {
    var AppRouter = Backbone.Router.extend({
        routes: {
            // MVC like route
            ':controller': 'defaultRoute',
            // MVC like route
            ':controller/:action': 'defaultRoute',
            // MVC like route
            ':controller/:action/:id': 'defaultRoute',
            // MVC like route
            ':controller/:action/*id': 'defaultRoute'
        },
        defaultRoute: function (controllerName, actionName, id) {
            controllerName = controllerName || Config.Defaults.Controller;
            actionName = actionName || Config.Defaults.Action;
            require(["controllers/" + controllerName], function (ctl) {
                var code = "ctl." + actionName + "();";
                eval(code);
            });
        }
    });

     var appRouter = new AppRouter;
        Backbone.history.start();
}); 
```

样品控制器是这个

```
define([
  'jquery',
  'underscore',
  'backbone'
], function ($, _, Backbone) {
    return {
        index: function () {
            console.log("Action: Index");
        },
        about: function () {
            console.log("Action: About");
        }
    };
}); 
```

它适用于此示例。现在尝试解决参数绑定等问题。需要更多测试。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T07:50:08.680

目前我仍在调查，但这是我目前正在使用的代码：

```
 // Filename: router.js
define([
  'jquery',
  'underscore',
  'backbone'
], function ($, _, Backbone) {
    var AppRouter = Backbone.Router.extend({
        routes: {
            // MVC like route
            ':controller': 'defaultRoute',
            // MVC like route
            ':controller/:action': 'defaultRoute',
            // MVC like route
            ':controller/:action/:id': 'defaultRoute',
            // MVC like route
            ':controller/:action/*id': 'defaultRoute'
        },
        defaultRoute: function (controllerName, actionName, id) {
            controllerName = controllerName || Config.Defaults.Controller;
            actionName = actionName || Config.Defaults.Action;
            require(["controllers/" + controllerName], function (ctl) {
                var code = "ctl." + actionName + "();";
                eval(code);
            });
        }
    });

     var appRouter = new AppRouter;
        Backbone.history.start();
}); 
```

所以“控制器”看起来像

```
 // Filename: controllers/home.js
define([
      'jquery',
      'underscore',
      'backbone',
    ], function ($, _, Backbone) {
        return {
            index: function () {
                require(['views/home/index'], function (view) {
                    view.render();
                });
            },
            about: function () {
                require(['views/home/about'], function (view) {
                    view.render();
                });
            }
        };
    }); 
```

接下来是创建典型的主干[视图](http://backbonejs.org/#View)。

当我测试传递参数并做一些更复杂的测试时，我会发布更多内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T10:58:59.603

JS*客户端动态依赖加载*，我想这还是我们的梦想。

您可以使用[动态脚本加载](http://unixpapa.com/js/dyna.html)等非常棘手的技术，但即使一开始看起来很容易，它也会成为一场噩梦（迟早）。

如果您需要这样的技术，请确保它值得，您应该重新考虑一下。

关于是否将一个路由器用于整个应用程序，或者通过控制器/模块或任何我已经[说过我的观点的](https://stackoverflow.com/questions/11797168/how-to-handle-page-reloads)东西将它分隔在几个路由器中。

# powershell - 使用 powershell 从另一个程序填充对话框

> ID：11879744
> 
> 赞同：1
> 
> 时间：2012-08-09T08:47:37.437
> 
> 标签：powershell, automation

我正在编写一个脚本来卸载和重新安装一个软件。

令人讨厌的是，您必须在卸载过程中输入密码。（即卸载程序弹出框，用户输入密码继续）

我希望能够检测到对话框，并自动输入密码——这样用户就不必做任何事情。我似乎记得有一种方法可以做到这一点，但不知道如何。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T11:47:57.013

弄清楚了：

```
$app = get-process | where {$_.mainwindowtitle -match "Admin Password"} 

$processID = 0

foreach ($a in $app) {

        if ($a.id -gt $processID)
         {
        $processID = $a.id
    }

}

start-sleep -Milliseconds 500

[Microsoft.VisualBasic.Interaction]::AppActivate($processID)
[System.Windows.Forms.SendKeys]::SendWait("mypassword{ENTER}") 
```

在我的演示应用程序中工作得很好。问题是我尝试向其发送密码的应用程序受到 SendKeys 的保护。

哦。回到绘图板...

# iphone - 一种隐藏键盘的实用方法

> ID：11879745
> 
> 赞同：3
> 
> 时间：2012-08-09T08:47:38.447
> 
> 标签：iphone, objective-c, ios, keyboard

在我的项目中，我有几个页面，其中包含许多 UITextField-s。所以我认为创建一个名为 hideKeyboard 的实用方法会更好，它在任何情况下都可以使用。这是我的解决方案，但实际上这段代码中的某些内容感觉不对。有没有更好的解决方案？

```
+(void) hideKeyBoard {
    UITextField* t = [[UITextField alloc] initWithFrame:CGRectNull];
    [[UIApplication sharedApplication].keyWindow addSubview:t];
    [t becomeFirstResponder];
    [t resignFirstResponder];
    [t removeFromSuperview];
} 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-09T08:55:57.463

一个非常简单的解决方案是使用[此处所述的响应者链](http://overooped.com/post/28510603744/i-had-completely-forgotten-about-nil-targeted)

```
[[UIApplication sharedApplication] sendAction:@selector(resignFirstResponder) 
                                           to:nil 
                                         from:nil
                                     forEvent:nil]; 
```

通过向它发送动作，`nil`它会被发送到响应者链中，当然第一个有机会响应的对象是`firstResponder`

**旁注** 我看到这篇文章的唯一原因是因为每周通讯[iOSDevWeekly](http://iosdevweekly.com/)，这绝对值得订阅

## 编辑

我想蛮力的做法是

```
[[[UIApplication sharedApplication] keyWindow] endEditing:YES]; 
```

# jquery - Jquery 从 XML 文件加载图像集

> ID：11879747
> 
> 赞同：1
> 
> 时间：2012-08-09T08:47:43.130
> 
> 标签：jquery, xml, image, flash, prettyphoto

嗨，我有一个这样的脚本：

```
jQuery(window).ready(function($) {
    $.fn.prettyPhoto();
    $.get("xml/kategoria1.xml",{},function(xml){
    $('image',xml).each(function(i) {
        lightbox = $(this).find("lightbox").text();
      openLightbox(lightbox)
    });
});
});

function openLightbox(path) {
    $.prettyPhoto.open(path); 
```

它只从 xml 打开一个图像，我想从 xml 打开所有图像，称为灯箱。

这是我的 XML 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<images>

<image source="Zdjecia/Galeria/Kategoria1/Miniaturki/image1.jpg" lightbox="Zdjecia/Galeria/Kategoria1/Duze/image1.jpg">
<lightbox>Zdjecia/Galeria/Kategoria1/Duze/image1.jpg</lightbox>

</image>

<image source="Zdjecia/Galeria/Kategoria1/Miniaturki/image2.jpg" lightbox="Zdjecia/Galeria/Kategoria1/Duze/image2.jpg">
<lightbox>Zdjecia/Galeria/Kategoria1/Duze/image2.jpg</lightbox>

</image>

<image source="Zdjecia/Galeria/Kategoria1/Miniaturki/image3.jpg" lightbox="Zdjecia/Galeria/Kategoria1/Duze/image3.jpg">
<lightbox>Zdjecia/Galeria/Kategoria1/Duze/image3.jpg</lightbox>
</image>

</images> 
```

请寻求帮助。

问候克里斯蒂安

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T09:08:07.200

问题是在您的代码中，您将为每个图像打开一个灯箱。

您应该做的是创建一个包含所有图像的数组，然后将其传递给灯箱。

而不是这个：

```
$('image',xml).each(function(i) {
        lightbox = $(this).find("lightbox").text();
      openLightbox(lightbox)
    }); 
```

做这个：

```
images = new Array();
$('image',xml).each(function(i) {
      image = $(this).find("lightbox").text();
      images.push(image);
    });
openLightbox(images) 
```

# php - 同步背景和标题的旋转

> ID：11879748
> 
> 赞同：1
> 
> 时间：2012-08-09T08:47:45.533
> 
> 标签：php, javascript, html, css, rotation

我在一页上有一个背景和一个标题。每次访问页面时，我都需要它们旋转。我发现了大量的图像旋转脚本，你只是引用脚本，就好像它是 css 中的图像，但我找不到一个我也可以为每个图像调用标题的脚本。有谁知道可以帮助我的任何事情？（停止从内到外学习 PHP）

例如

```
<html>

 <head>

  <title>Page Title</title>

  <style>

   body {
     background: url('this-image-needs-to-change.jpeg');
   }

  </style>

 </head>

 <body>

  <h1>At The Same Time As This Header</h1>

 </body>

</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T09:11:15.763

Randomizing using PHP is easy, just do:

```
 <?php
     $bgs    = array("bg1.jpg","bg2.jpg","bg3.jpg");
     $titles = array("Title1", "Title2", "Title3");

     $currentIdx = array_rand($bgs);
 ?>

 <style>

 body {
   background: url('<?php echo $bgs[$currentIdx]; ?>');
 }

 </style>
<body>
    <h1><?php echo $titles[$currentIdx];?></h1>
 </body> 
```

Should do the job.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T09:07:25.800

Do you want the image to change every time a specific user visits a page, or everytime any user visits a page?

E.g. person 1 views page 3 times and sees images 1, 2 + 3\. Person 2 comes along, does he see image 1 or 4?

If the specific user, you will want to store a cookie that keeps track of what image count they are on. Then on index.php: Check if cookie exists, if so, add 1 to it and save it, then get the image corresponding to that number and output it. If not, set the cookie, and get the image. There are a few different ways you could grab some text relating to the image. You could use a database, a notepad file or even hard code the text into the webpage. Gonna have to clarify on that for more specific help I fear

If you want the image to change for every user, you will need to have a database as you will have to store some information on your side. I can't really see why you would want to do this so won't bother explaining it.

# java - 如何在检票口中创建微调器

> ID：11879749
> 
> 赞同：0
> 
> 时间：2012-08-09T08:47:49.540
> 
> 标签：java, wicket

我正在寻找 wicket 中的微调器，它应该与 java swing 中的 JSpinner 类似。我找到了课程：[http](http://www.jarvana.com/jarvana/view/org/wicketstuff/minis/1.4.9/minis-1.4.9-javadoc.jar!/org/wicketstuff/minis/spinner/Spinner.html) ://www.jarvana.com/jarvana/view/org/wicketstuff/minis/1.4.9/minis-1.4.9-javadoc.jar!/org/wicketstuff/minis/spinner/Spinner.html在 wicket minis 的东西中，但我没有找到任何文档如何在 html 代码中使用它。我尝试在我的 Maven 中添加迷你示例但没有成功：

```
 <dependency>
        <groupId>org.wicketstuff</groupId>
        <artifactId>minis-examples</artifactId>
        <version>1.4.9.2</version>
    </dependency> 
```

还有`Missing artifact org.wicketstuff:minis-examples:jar:1.4.9.2:compile` 其他有良好文档的类在哪里微调？

更新：

我尝试这样的事情：

```
TextField<Integer> text = new TextField<Integer>("skupina");
Spinner spinner = new Spinner() {

    private static final long serialVersionUID = 1L;

    @Override
    protected void configure(Properties p) {
        p.put("min", 1);
        super.configure(p);
    }
};
text.add(spinner);
add(text); 
```

但我不知道错误在哪里，因为我没有找到任何例子。Thuis 抛出异常：

java.lang.NoSuchMethodError: org.apache.wicket.Component.getResponse()Lorg/apache/wicket/Response；在 org.wicketstuff.minis.spinner.Spinner.beforeRender(Spinner.java:152) 在 org.apache.wicket.Component.notifyBehaviorsComponentBeforeRender(Component.java:3486) 在 org.apache.wicket.Component.internalRender(Component.java :2368) 在 org.apache.wicket.Component.render(Component.java:2297)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T09:09:34.820

类定义的`Spinner`不是组件，而是组件的行为。

如[wicketstuff-minis Javadoc中所述](http://www.jarvana.com/jarvana/view/org/wicketstuff/minis/1.4.9/minis-1.4.9-javadoc.jar!/org/wicketstuff/minis/spinner/Spinner.html#configure%28java.util.Properties%29)

> 此行为用于增强 a[`TextField`](http://wicket.apache.org/apidocs/1.4/org/apache/wicket/markup/html/form/TextField.html)的旋转能力。对于 Spinner 的自定义，请查看该[`configure(Properties)`](http://www.jarvana.com/jarvana/view/org/wicketstuff/minis/1.4.9/minis-1.4.9-javadoc.jar!/org/wicketstuff/minis/spinner/Spinner.html#configure%28java.util.Properties%29)方法。

我从未使用过它，但看起来，您只需要实例化一个*普通*的wicket `TextField`， a 并为其[添加正确配置的微调器行为](http://wicket.apache.org/apidocs/1.4/org/apache/wicket/Component.html#add%28org.apache.wicket.behavior.IBehavior...%29)。

# ios - 表格视图控制器中的子菜单

> ID：11879754
> 
> 赞同：0
> 
> 时间：2012-08-09T08:48:04.923
> 
> 标签：ios, ios5

我正在为 iOS 创建我的第一个应用程序，我需要一个子菜单来显示特定日期的数据，就像 TextHog 应用程序[http://itunes.apple.com/us/app/texthog的最后一张图片一样/id343405995?mt=8](http://itunes.apple.com/us/app/texthog/id343405995?mt=8)。导航控制器下的菜单，您可以在其中切换月份。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T09:17:04.300

使用 UISegmentedControl 使它看起来像 TextHog。您可以在 tableviewCell 内部和外部使用它。这个问题可能会有所帮助。[如何将 UISegmentedControl 与 UITableView 一起使用](https://stackoverflow.com/questions/6110292/how-to-use-uisegmentedcontrol-with-uitableview)

# iphone - 移除表格视图的最外层边框

> ID：11879755
> 
> 赞同：0
> 
> 时间：2012-08-09T08:48:09.057
> 
> 标签：iphone, objective-c, xcode, ios5

我是 iPhone 开发的新手。我想知道，是否可以删除表格视图的外边框，但我不想删除分隔表格视图单元格的线。如果我将 tableview 分隔符属性设置为 none，它会删除 tableview 的外边框并用线分隔单元格。我只想删除外边框而不删除单元格分隔符。有什么办法吗？

谢谢，拉吉

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T08:51:15.227

您必须设置页眉和/或页脚视图以删除顶部和底部的那些讨厌的线条，但保留单元格分隔符。

我这样做：

```
UIView *v = [[UIView alloc] initWithFrame:CGRectZero];
v.backgroundColor = [UIColor clearColor];
[self.myTableView setTableHeaderView:v];
[self.myTableView setTableFooterView:v];
[v release]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T08:51:17.650

将分隔符属性设置为 none。它将完全删除边框。

现在，继承一个 tableViewCell 并覆盖 drwaRect 方法。这里写一个逻辑来在单元格的底部画一条线。

# html - 仅排除一个元素的 CSS 属性

> ID：11879756
> 
> 赞同：2
> 
> 时间：2012-08-09T08:48:12.607
> 
> 标签：html, css

我有一个带有默认 CSS 文件的页面。在此页面中，我有：

```
<ul>
  <li>A1</li>
  <li>A2</li>
</ul>
<br> 

<ul>
  <li>B1</li>
  <li>B2</li>
</ul>
<br> 

<ul>
  <li>C1</li>
  <li>C2</li>
</ul>  
<br> 
```

我可以查看默认 CSS，但无法修改

```
ul {
  paddind-left:15px;
} 
```

我想要做的是从默认 css 中只排除 B1 和 B2 。A 和 C 仍应具有默认属性，但 B1 和 B2 应具有`PADDING-LEFT:0PX;`.

我用过`(cssreset-min.css)`，但所有的css都被淘汰了。有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T08:50:44.300

给父 ul 一个新类：

```
<ul>
  <li>A1</li>
  <li>A2</li>
</ul>
<ul class="newClass">
  <li>B1</li>
  <li>B2</li>
</ul>
<ul>
  <li>C1</li>
  <li>C2</li>
</ul> 
```

然后做：

```
ul.newClass {
  paddind-left:0px;
} 
```

这将适用于所有浏览器。如果您对此不关心，请使用@Andy 回答。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T09:03:25.323

这是另一个不更改 HTML 的解决方案：

```
ul:not(:nth-child(3)) {
  padding-left:15px;
} 
```

**[例子](http://jsfiddle.net/qgpZu/)**

这可能不适用于所有浏览器，您需要为此更改 HTML 并使用@Alex Thomas 提供的答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T08:52:32.603

如果您想申请这 3 个命名列表..只需使用具有不同 ID 的 B1、B2 的 div ....但是如果您想申请一个巨大的列表，那就很难了

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T08:50:01.377

如果我理解正确，`ul li:nth-child(3), ul li:nth-child(4) { padding-left: 0; }`应该工作

nth-child 选择器针对特定的孩子，在本例中是第 3 个和第 4 个

编辑：看到您的编辑后，您需要做的新代码是：（我将使用#container 作为包含 div 的名称，无论是什么）

`#container ul:nth-child(2) li { padding-left: 0; }`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-09T08:58:20.493

你可以尝试这样的事情：

[http://jsfiddle.net/4X62Y/](http://jsfiddle.net/4X62Y/)

# php - 使用 PHP 邮件功能时邮件未在 Outlook 中显示图像

> ID：11879762
> 
> 赞同：0
> 
> 时间：2012-08-09T08:48:33.580
> 
> 标签：php

当我使用 PHP 的函数发送电子邮件时`mail`，它适用于 Yahoo 和 GMail 帐户，但在 Outlook 2007 中，邮件中使用的图像和背景图像未显示。

我怎样才能使它也适用于 Outlook？

我的代码：

```
<?php

// multiple recipients (note the commas)
$to = "zohaib@sikone.com, ";

// subject
$subject = "Eid Card";

// compose message
$message = '
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Fillon soutient à fond le retour d\'un Grand Prix de France</title>
</head>
<body>
   <p>Le Premier ministre François Fillon, passionné d\'automobile et pilote à ses heures, a apporté un soutien appuyé au retour d\'un Grand Prix de France au calendrier 2013 de la Formule 1, en faisant un passage-éclair vendredi sur le circuit Paul Ricard dans le Var.</p>
      <img src="http://marvelconcepts.net/email%20of%20eidcard/01.jpg" width="500" height="498">
      <div style=" background-image:url(http://marvelconcepts.net/email%20of%20eidcard/01.jpg); width:100px; height:200px; font-size:16px;">
   <p>Le Premier ministre François Fillon, passionné d\'automobile et pilote à ses heures, a apporté un soutien appuyé au retour d\'un Grand Prix de France au calendrier 2013 de la Formule 1, en faisant un passage-éclair vendredi sur le circuit Paul Ricard dans le Var.</p> </div>
</body>
</html>
';

// To send HTML mail, the Content-type header must be set
$headers  = "From: Eid Card<info@izhar.com>\r\n";
$headers .= "Reply-To: info@izhar.com\r\n";
$headers .= "Return-Path: info@eizhar.com\r\n";
$headers .= "X-Mailer: Drupal\n";
$headers .= 'MIME-Version: 1.0' . "\n";
$headers .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n"; 
// send email
mail($to, $subject, $message, $headers);
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T09:00:40.707

the outlook email client does not support background images in html formatted email. there's quite a bit of other html and css it and other email clients don't support as well. The best list of support is this one [CSS Support The Ultimate Guide](http://www.campaignmonitor.com/css/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T08:50:29.807

始终在 Outlook 中显示图像：

[http://www.howtogeek.com/howto/27045/beginner-make-outlook-always-display-images-in-email-from-specific-senders/](http://www.howtogeek.com/howto/27045/beginner-make-outlook-always-display-images-in-email-from-specific-senders/)

# c# - 一些ASIN可以通过amazon.com找到但不能通过API找到

> ID：11879773
> 
> 赞同：0
> 
> 时间：2012-08-09T08:49:10.843
> 
> 标签：c#, amazon-web-services, amazon

我在使用亚马逊产品广告 api 时遇到问题。如果我去 Amazon.com 并在搜索中输入，可以找到一些 ASIN，但无法通过 API 调用找到。有谁知道这背后是否有任何原因？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T06:23:00.090

对我来说工作得很好。

您可以尝试使用带有以下参数的 ItemLookup 操作吗？

*   商品编号：B005GRDLNU
*   响应组：小

# android - 如何在没有新意图的情况下清除活动堆栈

> ID：11879774
> 
> 赞同：3
> 
> 时间：2012-08-09T08:49:10.940
> 
> 标签：android, twitter4j

让我用细节来澄清这个问题。我`twitter4j`在我的应用程序中使用。它运行良好，您知道`Intent.ACTION_VIEW`正在回调`onNewIntent`Activity 中的方法。

我很满意这样的回调：

```
protected void onNewIntent(Intent intent) {
    super.onNewIntent(intent);
    final Uri uri = intent.getData();
    if (uri != null && uri.getScheme().equals(Constants.OAUTH_CALLBACK_SCHEME)) {
        Log.d("TAG", "Twitter callback -> New Intent");
        SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(this);
        new RetrieveAccessTokenTask(this,consumer, provider, prefs). execute(uri);
    }
} 
```

一切都很好，直到我按下后退按钮。当我按下活动返回包含授权页面的网页。

有什么办法可以清除 Activity 堆栈 onNewIntent？我不想将相同的 Intent 称为重新启动，并且不确定是否有任何不同的出路。

**更新**：我这样调用身份验证页面：

```
Intent intent = new Intent(Intent.ACTION_VIEW, Uri.parse(url)).setFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP | Intent.FLAG_ACTIVITY_NO_HISTORY | Intent.FLAG_FROM_BACKGROUND); 
```

你能给点建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T09:11:06.830

您还没有包含在浏览器中打开身份验证页面的代码。调用浏览器视图时设置了哪些标志？我认为这就是你的问题所在。

您是否使用类似...

```
Intent webIntent = new Intent(Intent.ACTION_VIEW,
                Uri.parse(token.getAuthorizationURL()));
webIntent.setFlags(Intent.FLAG_ACTIVITY_NO_HISTORY); 
```

# php - 如何对数组值求和？

> ID：11879775
> 
> 赞同：0
> 
> 时间：2012-08-09T08:49:13.400
> 
> 标签：php, arrays

为了清楚起见，这是输入的数据：

数组（[0] => 数组（[SiteID] => 147 [Amount] => 500.00 [TransactionType] => D）

```
[1] => Array
    (
        [SiteID] => 145
        [Amount] => 500.00
        [TransactionType] => D
    )

[2] => Array
    (
        [SiteID] => 145
        [Amount] => 500.00
        [TransactionType] => D
    )

[3] => Array
    (
        [SiteID] => 147
        [Amount] => 500.00
        [TransactionType] => D
    )

[4] => Array
    (
        [SiteID] => 146
        [Amount] => 500.00
        [TransactionType] => D
    )
[5] => Array
    (
        [SiteID] => 146
        [Amount] => 500.00
        [TransactionType] => D
    )
[6] => Array
    (
        [SiteID] => 145
        [Amount] => 500.00
        [TransactionType] => W
    )

[7] => Array
    (
        [SiteID] => 145
        [Amount] => 500.00
        [TransactionType] => W
    )

[8] => Array
    (
        [SiteID] => 146
        [Amount] => 330.00
        [TransactionType] => W
    )

[9] => Array
    (
        [SiteID] => 146
        [Amount] => 500.00
        [TransactionType] => W
    )

[10] => Array
    (
        [SiteID] => 3
        [Amount] => 500.00
        [TransactionType] => D
    ) 
```

我需要获得相同 SiteID 的所有事务的总和，它是 TransactionType。例如：

D - 存款，W - 赎回，R - 重新加载

结果：`array ([147]=>array([Deposit] => 1000, [Reload]=>3000, [Redemption]=>2000))`

注意：147 是 SiteID。

我需要计算相同 SiteID 的所有交易的存款、重新加载、赎回。

如果 SiteID 存在不止一次，只需添加每个周期的存款、重新加载和赎回。:)

请回复。谢谢并以正确的方式指导我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T08:54:56.717

尝试这个

```
<?php
$array=array ("SiteID"=>array("Deposit" => 1000, "Reload"=>3000, "Redemption"=>2000));
$val=0;
foreach($array["SiteID"] as $key=>$value){
$val=$val+$value;
}
echo $val;
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T08:55:15.157

```
$values = array(
    'Deposit' => 0,
    'Reload'       => 0,
    'Redemption' => 0
);
foreach ($array as $item) {
    $values[$item['SiteID']] += array_sum($item['SiteID']);
}
print_r($values); 
```

# ms-access - VBA 将最后修改的 csv 文件导入访问

> ID：11879776
> 
> 赞同：0
> 
> 时间：2012-08-09T08:49:15.843
> 
> 标签：ms-access, vba, opencsv, last-modified

我需要帮助在访问中打开最后修改的 csv。CSV 文件位于某个文件夹 FF 中。我在下面有一些代码，但错误是在将选择的 csv 文件导入访问中 任何人都可以用这一行想到： DoCmd.TransferText acImportDelim, "", "Tablename", "Availability", True, ""

```
Private Sub Import_Click()

Dim myDir As String, fn As String, a(), n As Long, Availability As String
Dim myDate As Date, temp As Date

myDir = "C:\Documents and Settings\FF"
fn = Dir(myDir & "\*.csv")

Do While fn <> ""
    temp = CreateObject("Scripting.FileSystemObject").GetFile(myDir & "\" & fn).DateLastModified
    If myDate = 0 Then
        myDate = temp: Availability = myDir & "\" & fn
    Else
        If myDate < temp Then myDate = temp: Availability = myDir & "\" & fn
    End If
    fn = Dir
Loop
If Len(Availability) Then
      If vbYes = MsgBox("Opening Availability File  Name : " & Availability & vbLf & _
    "Last modified on : " & myDate, vbYesNo) Then

       DoCmd.TransferText acImportDelim, "", "Tablename", "Availability", True, ""
    End If
End If 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T09:59:40.953

您不应该在变量周围加上引号，这会使它们成为字符串：

```
DoCmd.TransferText acImportDelim, "", "Tablename", Availability, True, "" 
```

您正在导入最旧的文件，因为您说`myDate < temp`

我会一直使用 FileSystemObject。

# c# - 自定义控件 WinForm 的 C# 自定义事件

> ID：11879782
> 
> 赞同：0
> 
> 时间：2012-08-09T08:49:54.523
> 
> 标签：c#

我已经搜索过这个，有几个答案，但我不知道该怎么做。

我有一个带有文本框和列表视图的自定义控件。当用户开始在文本框上键入时，列表视图会填充所有可能与键入的文本匹配的内容。（它是用户的搜索框）。用户正在输入客户姓名以查找客户。

我想要做的是，当用户输入客户并选择客户时，我需要将客户名称从自定义控件的文本框中传递到我的主项目。

To do this , I think, I need a custom event, when a customer is selected , it raises an event to let the main application know.

我该怎么做，提前谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T08:58:00.993

你需要做三件事。

1.在您的自定义控件中定义事件（目前，没有添加特殊的事件参数）。

```
public event EventHandler CustomerSelected { get; set; }
private void OnCustomerSelected() {
    var customerSelected = CustomerSelected;
    if (customerSelected != null) {
        customerSelected(this, EventArgs.Empty);
    }
} 
```

2\. 必要时触发事件。您可以通过在选择客户时调用 OnCustomerSelected 方法在自定义控件中执行此操作。

3.在主窗体中处理事件。你可以通过这样的方式来做到这一点（我使用了一个 lambda，你也可以定义一个事件处理程序方法，无论你喜欢什么）。

```
this.customerControl1.CustomerSelected += (s,e) => {
    // This runs when a customer is selected.
}; 
```

# php - 使用条件重构循环

> ID：11879783
> 
> 赞同：0
> 
> 时间：2012-08-09T08:49:55.843
> 
> 标签：php

给定一个循环，向数组中的所有订阅发送电子邮件

```
foreach($subscriptions as $s){
    if(!$s->send_email()){

    }
} 
```

如果所有模型都已成功邮寄或如果其中一个模型未能邮寄则显示错误，那么触发回调的最干净的方法是什么。将所有错误消息保存到循环结束并将它们作为一个整体打印，或者以错误中断循环是常见的吗？

我将它与保存项目 (/projects/1) 的 JSON REST API 结合使用，该项目又向所有用户发送电子邮件。

我现在使用的方法感觉很脏，有很多嵌套的 if else，在不同的地方发送 3 个不同的响应

```
if($project->save()){
    $subscriptions = Subscription::model()->findAllByAttributes(array('planning_id' => $planning->id));
    foreach($subscriptions as $s){
        if(!$s->send_email()){
            $errors[] = "failed to send email. Subscription ". $s->id;
        }
     }
     if(count($errors) > 0){
          //send json api response with error response
     } else {
         //send json api success response
    }
} else {
    //send json api response with project error response
} 
```

我想知道关于这个的约定是什么

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T10:43:37.913

它有点混乱——它在“保存”功能中结合了多个关注点——任何阅读代码的人都需要了解“保存”的含义，我们如何遍历联系人等。

我将它重构如下：

```
if($project->save()){
    $subscriptions = Subscription::model()->findAllByAttributes(array('planning_id' => $planning->id));
     $errors = sendMailToSubscribers($subscriptions);

     $response = determineResponse($errors);
     // send JSON API response

} else {
    //send json api response with project error response
}

function sendMailToSubscribers($subscriptions){
  foreach($subscriptions as $s){
        if(!$s->send_email()){
            $errors[] = "failed to send email. Subscription ". $s->id;
        }
     }
   return $errors;
  }
function determineResponse($errors){
        if(count($errors) > 0){
          //return json api response with error response
     } else {
         //return json api success response
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T08:58:33.483

您可以使用 while 逻辑，以便故障一直持续到块的末尾。

```
while(1) {
  if ($project->save()) {
    foreach($subscripts as $s)
      if (!$s->send_email())
        $errors[] = "failed to send email. Subscription ". $s->id;
  } else
    $errors[] = 'failed to save the project';

  if (empty($errors)) {
    //send success here
    break;
  }

  //send your errors here
  break;
} 
```

# python - Python MySQLdb从列表字典更新表

> ID：11879784
> 
> 赞同：1
> 
> 时间：2012-08-09T08:49:56.017
> 
> 标签：python, dictionary, mysql-python

我正在尝试使用 MySQLdb 包通过 Python 更新 MySQL 表。

我想用具有这种格式的字典中的数据更新某个表：

```
muts={'YES': [rice,bread,pasta]
       'NO': [sweets,fat,milk,choco]} 
```

我需要 mysql 表上的行，其列`food`值对应于列表中的每个条目（上面字典的值），另一个名为的列`accept`将使用其相应的键进行更新；'是还是不是'。

到目前为止，当我想使用单个列表更新表中的条目时，我使用执行以下操作：

```
food=[sweets,fat,milk,choco]
sql = "UPDATE test2 g SET accept='NO' WHERE g.food IN (%s)"
to_add = ', '.join(list(map(lambda x: '%s', any_list)))
sql = sql % to_add
cursor.execute(sql, any_list) 
```

但是现在我想同时更新字典中的键值；我迷路了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T09:20:09.860

用两个 %s 定义 sql 并在字典中循环查找 to_add 行，因此放置`k`和`to_add`：

```
>>> muts={'YES': ['rice','bread','pasta'],
...        'NO': ['sweets', 'fat', 'milk', 'choco']}
>>> muts
{'YES': ['rice', 'bread', 'pasta'], 'NO': ['sweets', 'fat', 'milk', 'choco']}
>>> sql = "UPDATE test2 g SET accept='%s' WHERE g.food IN (%s)"
>>> for k in muts:
...     to_add = ', '.join(muts[k])
...     ex_sql = sql % (k, to_add)
...     print ex_sql
...     # cursor.execute(ex_sql) here
... 
UPDATE test2 g SET accept='YES' WHERE g.food IN (rice, bread, pasta)
UPDATE test2 g SET accept='NO' WHERE g.food IN (sweets, fat, milk, choco)
>>> 
```

你可以把它放在一个函数中并将它传递给'any_list'。除非 execute 需要一个语句列表，否则您不能`.execute( , any_list)`在一行中使用。

顺便说一句，***连接线实际上应该是：***

```
to_add = "'%s'" % "', '".join(muts[k]) 
```

这样你就可以得到`'`每种食物类型的引号：

```
... # that gives...
UPDATE test2 g SET accept='YES' WHERE g.food IN ('rice', 'bread', 'pasta')
UPDATE test2 g SET accept='NO' WHERE g.food IN ('sweets', 'fat', 'milk', 'choco') 
```

您可能还想使用`?`占位符语法而不是`%s`避免 sql 注入攻击。

# ruby-on-rails - 使用 Capistrano gem 在 VPS 上部署

> ID：11879785
> 
> 赞同：1
> 
> 时间：2012-08-09T08:49:56.900
> 
> 标签：ruby-on-rails, capistrano, vps, rvm-capistrano

我正在尝试使用 capistrano gem 在 VPS 上部署 Rails 应用程序。我想将它从我的本地机器部署到 VPS。我没有使用 Github 或 SVN 之类的任何存储库。

所以，我已经安装了 capistrano gem 并运行了“bundle”。并添加了以下几行：

头文件

```
$:.unshift(File.expand_path('./lib', ENV['rvm_path']))
require "rvm/capistrano"
set :rvm_ruby_string, 'ruby-1.9.3-p194@gemset' 
```

部署.rb

```
set :user, 'deploy'
set :application, "my_app"

set :scm, :none
set :deploy_via, :copy
set :deploy_to, "/home/#{user}/#{application}"
set :use_sudo, false

default_run_options[:pty] = true
ssh_options[:forward_agent] = true

role :web, '1.2.3.4'
role :app, '1.2.3.4'
role :db,  '1.2.3.4', :primary => true

namespace :deploy do
  task :start do ; end
  task :stop do ; end
  task :restart, :roles => :app, :except => { :no_release => true } do
    run "#{try_sudo} touch #{File.join(current_path,'tmp','restart.txt')}"
  end
end 
```

但是，在本地运行 'cap deploy:setup' 后，出现以下错误：

```
RVM - Capistrano integration was extracted to a separate gem, install: `gem install rvm-capistrano` and remove the `$LOAD_PATH.unshift` line, note also the 'set :rvm_type, :user' is now the default (instead of :system). (RuntimeError) 
```

我不确定是否应该使用 rvm-capistrano gem。我是部署方面的新手，详细或分步说明真的很有帮助。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T23:09:11.820

好像需要添加

宝石“rvm/capistrano”

到您的 Gemfile，然后删除 unshift 行（注释掉）

# c# - c# asp.net repeater - 根据条件创建按钮

> ID：11879789
> 
> 赞同：4
> 
> 时间：2012-08-09T08:50:01.910
> 
> 标签：c#, asp.net, asprepeater

基本上我想做的是有一个按钮，该按钮只为在单独的表中标记为发送的条目创建。因此，例如，如果我编辑一条记录，我标记另一个表，并希望通过下面的中继器在该记录旁边显示一个发送按钮 - 这可能吗？我可以通过调用例如不确定的方法来进行检查吗:(

```
<asp:Repeater ID="DepartmentsList" runat="server">
            <HeaderTemplate>
               <table id="grouptable" class="table table-bordered table-striped"> 
                <thead>
                        <tr>
                        <th>Send</th>
                        <th>ID</th>
                        <th>Name</th>
                        <th>Last Modified</th>
                        <th>Actions</th>
                    </tr>
                    </thead>
                    <tbody>
            </HeaderTemplate>
            <ItemTemplate>
                        <tr>
                        <td>
                        <input type="checkbox" name="sendSelect[]" value="<%# Eval("Dept_ID") %>"</input></td>
                        <td><%# Eval("Dept_ID") %></td>
                        <td><a href="<%# Eval("gURL") %>"><%# Eval("DESC") %></a> </td>
                        <td><%# Eval("CHG_DATE") %></td>
                        <td><a class="btn btn-info" href="<%# Eval("gURL") %>"><i class="icon-pencil icon-white"></i> Edit</a><asp:Button ID="Button1" runat="server" Text="Send" /></td>
                        </tr>
            </ItemTemplate>
            <FooterTemplate>
                        </tbody>
                </table>
            </FooterTemplate>
            </asp:Repeater> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T08:57:45.120

您可以使用[DepartmentsList_OnItemDataBound](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.repeater.onitemdatabound.aspx)事件检查并检查绑定到转发器的当前数据记录。它为您提供了动态更改转发器项目中绑定和创建的内容所需的所有功能。

# java - Java表索引存储在堆中？

> ID：11879796
> 
> 赞同：1
> 
> 时间：2012-08-09T08:50:58.680
> 
> 标签：java, indexing, store

我创建了一个自定义表，而不是从 JTable 扩展，并且我有大量数据，大约 4.000.000 个字符串数据（10% uniq 字符串）。现在我创建和索引它看起来像这样：

我为每一列创建和索引。当用户使用我的表的实时搜索功能时，我使用树集来合并数据。

指数：

表示列的 ArrayList：
第 1 列 | 第 2 栏 | 第 3 栏 | 第 4 列
arraylist 中的每个元素都包含一个表示索引的 HasMap：
键 -> 数据字符串
值 -> 值表示 TreeSet 中哪些行包含此索引

例子：

```
Name Column:
Emma 
John
Doe
Emma
Walker
Emma
Doe

HashMap(Emma) -> 0, 3, 5 
```

```
private void buildIndex()
    {
        if (monitorModel.getMessageIndex() == null)
        {
            ArrayList<HashMap<String, TreeSet<Integer>>> messageIndex = new ArrayList<>(filterableColumn.length);
            for (int i = filterableColumn.length; i >= 0; i--)
            {
                HashMap<String, TreeSet<Integer>> hash = new HashMap<>();
                messageIndex.add(hash);
            }
            // create index for every column
            for (int i = monitorModel.getParser().getMyMessages().getMessages().size() - 1; i >= 0; --i)
            {
                TreeSet<Integer> tempList;

                for (int j = 0; j < filterableColumn.length; j++)
                {
                    String value  = StringPool.getString(getValueAt(i, j).toString());
                    if (!messageIndex.get(j).containsKey(value))
                    {
                        tempList = new TreeSet<>();
                        messageIndex.get(j).put(value, tempList);
                    }
                    else
                    {
                        tempList = messageIndex.get(j).get(value);
                    }

                    tempList.add(i);
                }
            }
            monitorModel.setMessageIndex(messageIndex);
        }
    } 
```

此解决方案使用 500MB 堆大小，这是不可能的，我如何优化此代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T08:54:53.103

> 500MB 堆大小，这是不可能的

如果你有 40 亿个字符串，我严重怀疑它只使用那么多。我怀疑您的应用程序在那时停止。

如果您有“4.000.000.000 字符串数据”，那么每个字符串将使用大约 100 个字节来存储在集合中（假设字符串很短）

这意味着您需要 400 GB 的内存。使这更有效和可行的唯一方法是使用内存映射文件。通过这种方式，您可以相当轻松地保存这么多数据。

另一方面，如果您的意思是 400 万，而不是 40 亿，那么 500 MB 的大小是相当合理的。鉴于这些天 500 MB 的成本约为 10 美元，我不会担心。

# javascript - android上的javascript触发事件选择文本

> ID：11879801
> 
> 赞同：3
> 
> 时间：2012-08-09T08:51:15.733
> 
> 标签：javascript, android, html, touch

当用户在 android 触摸设备中选择文本时，我需要触发事件。在网络浏览器中，可以通过检查每个鼠标向上事件是否 window.getselection 为空来触发事件。触摸选择文本事件未触发。

```
document.addEventListener('touchend', function(event)
{
    if( window.getSelection){
        t = window.getSelection().toString();
        alert(t);
    }
}); 
```

我在 touchend 事件中尝试过。但是当用户选择文本事件时不会触发。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-28T18:29:43.357

为什么不尝试使用[.change()](http://api.jquery.com/change/)函数的 jQuery 解决方案？首先，在包含的 JavaScript 文件声明的正上方添加 jQuery 库，然后在文档中获得 jQuery 功能。接下来阅读 .change() 并尝试以下操作：

```
 $('#touchend').change(function(){
      if(your condition){var $t = window.getSelection().toString();}
  }); 
```

或您想要在函数中使用的任何 JavaScript 代码。jQuery 只是一个 JavaScript 库，因此您可以在 JavaScript 中自由地使用它。这是一个游戏规则改变者！

# php - eZpdf pdf 下载失败 2 次 3 次，相同的数据，相同的 pdf，但下载时停止

> ID：11879808
> 
> 赞同：0
> 
> 时间：2012-08-09T08:51:42.827
> 
> 标签：php, pdf, pdf-generation

我有一个 eZpdf 康乃馨正在运行，它会生成 pdf 证书，然后将其推送到浏览器进行下载。这些工作大约为三分之一，但每隔一次它构建pdf，显示下载框以保存文件，出现在我的下载管理器中，然后在最终失败之前停止。

我认为这可能是一个 php 内存问题或超时问题，但很奇怪，它会为完全相同的数据集工作一次然后失败。

这基本上就是我所拥有的

```
set_time_limit(1800);        
$pdfPassword = 'asdasda';
    //choose bg image based on choice
    switch($_POST['certificateType']){
        case 1:
            $pdf = new backgroundPDF('a4', 'portrait', 'image', array('img' => BASEURL.'/common/pdf/images/uno.png'));  
        break;
        case 2:
            $pdf = new backgroundPDF('a4', 'portrait', 'image', array('img' => BASEURL.'/common/pdf/images/dos.png'));
        break;
        case 3:
            $pdf = new backgroundPDF('a4', 'portrait', 'image', array('img' => BASEURL.'/common/pdf/images/tres.png'));
        break;
    }
    $pdf->ezSetMargins(50,70,50,50);

    $pdf->selectFont(BASEURL.'/common/pdf/fonts/Helvetica.afm');
    $pdf->setColor(0/255,0/255,0/255);

    //build strings
    $commDate = friendlyDateOnly($info['Commisioned_Date_DT']);

    //get logo
    if($supplier['logo'] != ''){
        $logo = BASEURL.'/uploads/logos/'.$supplier['logo'];
    }else{
        $logo = BASEURL.'/uploads/logos/SSAIB.png';
    }

            /* THIS IS FOR CERTIFICATE 1 */
            //certificate info
            $pdf->addText(144,692,14,$info['Scope_CH']);
            $pdf->addText(144,663,14,$info['Certificate_Number']);

            //customer info
            $pdf->addText(225,591,9,$info['Customer_Name']);
            $pdf->addText(225,571,9,$info['Address_1_VC']);
            $pdf->addText(225,559,9,$info['Address_2_VC']);
            $pdf->addText(225,547,9,$info['Address_2a_VC']);
            $pdf->addText(225,535,9,$info['Address_3_VC']);
            $pdf->addText(225,516,9,$info['Telephone_Number_VC']);
            $pdf->addText(225,493,9,$info['Installers_Reference_VC']);
            $pdf->addText(225,472,9,$commDate);
            //$pdf->ezText($address, 9, 225,527);

            //system info
            $pdf->addText(225,404,9,$info['Extended_Grade']);
            $pdf->addText(225,383,9,$info['Extended_Notification_Option']);
            if($info['Extended_ARC'] != ''){
                $pdf->addText(225,362,9,$info['Extended_ARC']);
            }
            $pdf->addText(225,339,9,$info['Installed_To_Standards_VC']);

            //Installers info
            $pdf->addText(215,300,10,$_SESSION['user']['Trading_Name_VC']);
            $pdf->addText(215,285,9,$supplier['Address_1']);
            $pdf->addText(215,273,9,$supplier['Address_2']);
            $pdf->addText(215,261,9,$supplier['Town']);
            $pdf->addText(215,249,9,$supplier['County']);
            $pdf->addText(215,237,9,$supplier['Post_Code']);
            $pdf->addText(215,223,9,"Tel: ".$supplier['Telephone']);
            $pdf->addText(120,176,9,friendlyDateOnly($info['Issue_Date']));

            //add logo
            if(strstr($logo, '.png')){
                $pdf->addPngFromFile($logo,430,740,90,90);
            }else{
                $pdf->addJpegFromFile($logo,430,740,90,90);
            }

    $pdf->setEncryption('',$pdfPassword,array('print'));

    #create the pdf and stream it to the page
    $pdf->ezStream(); 
```

当下载最终超时时，我收到以下错误消息

```
/Users/matt/Downloads/saz3CwFa.pdf.part could not be saved, because the source file could not be read. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T11:36:27.423

我有一个巨大的错误日志，只是清空了重新启动服务器，看起来还可以。虽然会监控

# c# - NAudio 中的静音功能 (waveOut)

> ID：11879812
> 
> 赞同：0
> 
> 时间：2012-08-09T08:52:13.177
> 
> 标签：c#, naudio

如何静音`WaveOut`？我知道我可以将当​​前音量保存到变量，然后设置`Volume`为`0f`. 要取消静音，我只是读取了保存的变量。但是在 Windows 音量控制面板中，它不显示“静音图标”。有什么方法可以使输出静音，只是告诉正在使用的系统`WaveOut`？子问题：`DirectSoundOut`使用 DirectX，`AsioOut`使用 Asio 驱动程序，使用`WaveOut`什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T16:07:11.317

您不会看到静音图标，因为它不会为所有应用程序静音您的声卡，仅针对`WaveOut`您正在使用的实例。这是因为 NAudio 将句柄传递给[waveOutSetVolume](http://msdn.microsoft.com/en-us/library/aa908146.aspx)，而不是设备标识符。您可以`WaveInterop.waveOutSetVolume`使用设备标识符直接调用。

# c# - 在 MonoTouch 中的文件上设置数据保护标志的简单方法？

> ID：11879813
> 
> 赞同：2
> 
> 时间：2012-08-09T08:52:14.897
> 
> 标签：c#, xamarin.ios, data-protection

目前我正在使用一种方法来设置数据保护属性，这对我来说看起来很尴尬。我想知道是否有更直接的方法，而不是处理`NSString`, 和`NSMutableDictionary`? 这就是我目前正在使用的（我知道它可以通过“ `using`”语句进行优化，但这不是我在这里所追求的）：

```
public static void SetDataProtectionFor ( string sFileToProtect )
        {
            NSError oError = null;
            NSMutableDictionary oDic = null;

            try
            {

                oDic = new NSMutableDictionary ();
                oDic.Add ( new NSString ("NSFileProtectionKey"), new NSString ("NSFileProtectionComplete") );

                NSFileManager.DefaultManager.SetAttributes ( oDic, sFileToProtect, out oError );
                if ( oError != null )
                {
                    throw new DataProtectionGoneMissingException ();
                }
            }
            catch ( Exception ex )
            {
                throw new DataProtectionGoneMissingException ();
            }
            finally
            {
                if ( oDic != null )
                {
                    oDic.Dispose ();
                    oDic = null;
                }

            }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T08:59:34.880

您可以使用`SetObject`而不是`Add`使用`NSMutableDictionary`来避免必须创建新`NSString`的，但它并没有真正对您已经拥有的东西*产生*太大影响，例如

```
var oDic = new NSMutableDictionary ();
oDic.SetObject ("NSFileProtectionComplete", "NSFileProtectionKey"); 
```

据我所知，这是设置文件属性的唯一方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T15:07:14.903

现在 ？不多。这就是 Objective-C 的方式，MonoTouch（生成的）绑定允许您遵循相同的模式。

您可以避免创建`NSString`和使用 MonoTouch 提供的那些，例如 '`NSFileManager.FileProtectionComplete`和`NSFileManager.FileProtectionKey`. 这将避免`NSString`多次创建两个实例（如果您的方法被多次调用，MonoTouch 版本将被延迟创建和缓存）并消除拼写错误的可能性。

因此，使用 C#3 语法将变为：

```
NSMutableDictionary oDic = new NSMutableDictionary () {
    { NSFileManager.FileProtectionKey, NSFileManager.FileProtectionComplete }
}; 
```

此外，我们**尝试**提供更多 C#-ish API 来完成与`NSDictionary`. OTOH，因为有很多 API`NSDictionary`用于选项，我们只有（到目前为止）最*常见*的选项。

*注意：当您发现 API 可能更好的情况时，请随时提交增强[错误报告](http://bugzilla.xamarin.com)*

例如，基于类似的案例（之前完成的），理想情况下应该/应该是这样的：

```
var attr = new NSFileManagerAttribute ();
attr.ProtectionKey = NSFileManager.ProtectionComplete; // enum version
NSFileManager.DefaultManager.SetFileAttribute (sFileToProtect, attr); 
```

它不会节省很多代码行（至少对于单个值），但它会使源代码看起来更好（IMO）并且更易于使用代码完成并避免拼写错误（超过字符串）。

# asp.net - UpdatePanel 中下拉列表的 SelectedIndexChanged 事件后页面不呈现

> ID：11879816
> 
> 赞同：0
> 
> 时间：2012-08-09T08:52:18.007
> 
> 标签：asp.net, updatepanel, aspwizard

我有一个下拉列表（带有静态列表项）。在此下拉列表的 SelectedIndexChanged 事件中，我要检查三种情况：

1）如果值为'A'，我需要绑定另一个下拉列表。2）如果值为'B'，我需要隐藏在另一个下拉列表上方，而不是显示任何内容，即最终隐藏那个特定的div。3）如果值是“C”，我需要隐藏在 div 上方，并显示一个文本框来代替它。

现在，为了防止每次更改下拉列表中的值时页面回发，我在这里使用 UpdatePanel 控件。

我尝试对这两个下拉列表使用单个更新面板，每个下拉列表使用两个单独的 udpatePanel。

使用两个单独的 updatePanel，我可以成功调用该下拉列表的“SelectedIndexChanged”事件，但是一旦调用该事件，该代码中所做的更改就不会反映在页面上。

即，如果我在选择的值为“B”时隐藏了一个 div，它仍然会显示给我，或者在任何一种情况下，如果它是“A”并且我绑定了另一个下拉列表，它甚至不会呈现。

而且，如果我重新加载该页面，则会反映之前的更改。有人可以告诉我这里有什么问题吗？

另外，请注意，我希望能够以编程方式回发页面，因为这是我试图阻止的。

另外，我想在这里通知我在 asp.net 向导控件的 WizrdStep 中使用所有这些东西。

将不胜感激任何帮助。

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T10:03:24.960

问题不是因为更新面板或下拉列表。

问题在于我的页面的呈现方式。

我已经为我的应用程序使用了 url 重写，并且我尝试使用我的自定义表单标签而不是内置的 Html 表单标签来呈现这个页面。

这就是更新面板无法正常工作的原因。

我现在使用普通的 Html 表单标签让它工作，同时我正在尝试使用我的自定义表单标签来处理这个更新面板标签。

如果我解决了，我将提交解决方案。

谢谢。

# android - 让android设备galaxy S2像模拟器一样工作

> ID：11879817
> 
> 赞同：0
> 
> 时间：2012-08-09T08:52:22.267
> 
> 标签：android, web-services, android-emulator, galaxy

我想在 android 设备上测试我的应用程序，我有一个本地 web 服务 (ASP.net)，它托管在我的本地笔记本电脑中，当我插入我的设备时，应用程序可以在其中运行，但它无法从我的本地 web 服务接收数据，如何像在模拟器中一样将数据发送到设备 PS：该应用程序在模拟器中正常工作。谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T09:01:52.680

The emulator uses your laptop's network interfaces, hence it can access webservice directly. Your device needs to connect to your laptop via its own connectivity options (celluar network, WiFi, possibly bluetooth).

I have a few ideas how to get there:

*   If you have got a WiFi router and both your laptop and phone connect to it - that's pretty straightforward: just expose webservice to address that can be seen within network and use it on your phone.
*   If you've got an external IP - just use that address when phone is connected to network.
*   Set up a WiFi access point on your laptop and connect your device with it

    Check these URLs how to set up a hosted network (hotspot) on Windows 7:

    [Hosted network documentation in MSDN](http://msdn.microsoft.com/en-us/library/windows/desktop/dd815243%28v=vs.85%29.aspx "Hosted network in MSDN")

    [Hosted network tutorial](http://www.wi-fiplanet.com/tutorials/article.php/3849841/How-to-Create-Wireless-Hosted-Networks-in-Windows-7.htm)

*   You might try Bluetooth and PAN.

# jenkins-plugins - Jenkins testlink插件致命：验证开发人员密钥时出错：无法解析服务器的响应：prolog中不允许内容

> ID：11879818
> 
> 赞同：0
> 
> 时间：2012-08-09T08:52:22.013
> 
> 标签：jenkins-plugins

> br.eti.kinoshita.testlinkjavaapi.util.TestLinkAPIException：验证开发人员密钥时出错：
> 
> > 无法解析服务器的响应：prolog 中不允许有内容。在 br.eti.kinoshita.testlinkjavaapi.MiscService.checkDevKey(MiscService.java:66) 在 br.eti.kinoshita.testlinkjavaapi.TestLinkAPI.(TestLinkAPI.java:162) 在 hudson.plugins.testlink.TestLinkBuilder.getTestLinkSite(TestLinkBuilder. java:241) 在 hudson.plugins.testlink.TestLinkBuilder.perform(TestLinkBuilder.java:134) 在 hudson.tasks.BuildStepMonitor$1.perform(BuildStepMonitor.java:19) 在 hudson.model.AbstractBuild$AbstractBuildExecution.perform(AbstractBuild. java:717) at hudson.model.Build$BuildExecution.build(Build.java:199) at hudson.model.Build$BuildExecution.doRun(Build.java:160) at hudson.model.AbstractBuild$AbstractBuildExecution.run(AbstractBuild .java:499) 在 hudson.model.Run。在 hudson.model.ResourceController.execute(ResourceController.java:88) 在 hudson.model.FreeStyleBuild.run(FreeStyleBuild.java:46) 在 hudson.model.Executor.run(Executor.java) 执行(Run.java:1488) ：236）原因：org.apache.xmlrpc.client.XmlRpcClientException：无法解析服务器的响应：序言中不允许内容。在 org.apache.xmlrpc.client.XmlRpcStreamTransport.readResponse(XmlRpcStreamTransport.java:188) 在 org.apache.xmlrpc.client.XmlRpcStreamTransport.sendRequest(XmlRpcStreamTransport.java:156) 在 org.apache.xmlrpc.client.XmlRpcHttpTransport.sendRequest (XmlRpcHttpTransport.java:143) 在 org.apache.xmlrpc.client.XmlRpcSunHttpTransport.sendRequest(XmlRpcSunHttpTransport.java:69) 在 org.apache.xmlrpc.client.XmlRpcClientWorker。在 org.apache.xmlrpc.client.XmlRpcClient.execute(XmlRpcClient.java:158) 在 org.apache.xmlrpcClient.execute(XmlRpcClient.java:167) 在 org.apache.xmlrpc.client.XmlRpcClient.execute(XmlRpcClient.java:167) 执行(XmlRpcClientWorker.java:56) .xmlrpc.client.XmlRpcClient.execute(XmlRpcClient.java:147) 在 br.eti.kinoshita.testlinkjavaapi.BaseService.executeXmlRpcCall(BaseService.java:90) 在 br.eti.kinoshita.testlinkjavaapi.MiscService.checkDevKey(MiscService.java :62) ... 12 更多原因：org.xml.sax.SAXParseException; 行号：1；列号：1；序言中不能有内容。在 br.eti.kinoshita.testlinkjavaapi.MiscService.checkDevKey(MiscService.java:62) 处执行 (XmlRpcClient.java:147) 在 br.eti.kinoshita.testlinkjavaapi.BaseService.executeXmlRpcCall(BaseService.java:90) ... 12更多原因：org.xml.sax.SAXParseException；行号：1；列号：1；序言中不能有内容。在 br.eti.kinoshita.testlinkjavaapi.MiscService.checkDevKey(MiscService.java:62) 处执行 (XmlRpcClient.java:147) 在 br.eti.kinoshita.testlinkjavaapi.BaseService.executeXmlRpcCall(BaseService.java:90) ... 12更多原因：org.xml.sax.SAXParseException；行号：1；列号：1；序言中不能有内容。

# javascript - 使用 jquery 还原函数

> ID：11879822
> 
> 赞同：0
> 
> 时间：2012-08-09T08:52:35.967
> 
> 标签：javascript, jquery, css, revert

我有一个小问题。有没有可能用jquery恢复功能？我有一些点击功能，中间有动作。我可以在点击之前将此元素恢复为条件吗？谢谢 4 帮助。

```
$('.bottom_panel_button_02').click(function(){
    $('#recipe_panel').css('opacity','1');
    $('.default_clock, .info_top_panel .random_title, .bottom_panel_button_06').css('display','none');
    $('.bottom_main_panel_button').css('background','url("img/ap_bottom_panel_button_white.png") center bottom no-repeat')
    setTimeout(function(){
        $('.arrow_up, .arrow_down').fadeIn(300);
    },500);
    $('.main_content, .oven_panel').fadeOut(200);
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T09:08:02.730

不，没有内置方法可以使用 jQuery 恢复大量 DOM 操作/动画。您必须编写 2 个相互镜像的函数并编写相关的代码：

```
function action(){
    $('#recipe_panel').css('opacity','1');
    $('.default_clock, .info_top_panel .random_title, .bottom_panel_button_06').css('display','none');
    $('.bottom_main_panel_button').css('background','url("img/ap_bottom_panel_button_white.png") center bottom no-repeat')
    setTimeout(function(){
        $('.arrow_up, .arrow_down').fadeIn(300);
    },500);
    $('.main_content, .oven_panel').fadeOut(200);    
}

function revert(){
    $('#recipe_panel').css('opacity','0');
    $('.default_clock, .info_top_panel .random_title, .bottom_panel_button_06').css('display','block');
    $('.bottom_main_panel_button').css('background','')
    setTimeout(function(){
        $('.arrow_up, .arrow_down').fadeOut(300);
    },500);
    $('.main_content, .oven_panel').fadeIn(200);    
}

$('.bottom_panel_button_02').click(action);
$('.someOtherButton').click(revert); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T08:59:31.307

You could do something like this using [custom attributes](http://api.jquery.com/attr/):

```
$(document).ready(function() {
    $('.bottom_panel_button_02').attr("clicked", "false");

    $('.bottom_panel_button_02').click(function() {
        var clicked = $(this).attr("clicked");

        if (clicked == "false") {
            // do your click function

            $(this).attr("clicked", "true");
        } else {
            // do your revert function

            $(this).attr("clicked", "false");
        }
    });
}); 
```

Alternatively you could have a global variable / hidden input element that is set, instead of using attributes. You could also .addClass and .removeClass depending on the clicked state of the element and have your states in these CSS classes.

# android - 当我在 listView 中使用 edittext 时，我无法单击自定义 listView 项目？

> ID：11879826
> 
> 赞同：-1
> 
> 时间：2012-08-09T08:52:59.360
> 
> 标签：android

如果我更改`EditText`字段`android:focusable=false`，则`clickable`工作正常，但我无法修改`EditText`值。但如果我改变`focusable=true`，可点击不起作用，但我可以改变`EditText`值。我们的要求是能够修改`EditText`列表中的值和可点击。

提前致谢。

```
 public class TicketActivity extends Activity{
TextView t1;
TextView t2;
ListView l1;
TextView t6;
   public void onCreate(Bundle savedInstanceState){
super.onCreate(savedInstanceState);
setContentView(R.layout.ticket);
t1=(TextView)findViewById(R.id.textView3);
t2=(TextView)findViewById(R.id.textView5);
l1=(ListView)findViewById(R.id.listView1);

   //Get the Table no Value From Edit Text

  Intent i1=getIntent();
Bundle b=i1.getExtras();
int num=b.getInt("Table No:");
    String pno=Integer.toString(num);
    t1.setText(pno);

        //Get The Guest Value From Edit Text

    Intent i2=getIntent();
    Bundle b1=i2.getExtras();
    int num1=b1.getInt("Guest:");
    String pno1=Integer.toString(num1);
    t2.setText(pno1);

  // List<String> st=GlobalClass.myval;

   //ArrayAdapter<String> ada = new ArrayAdapter<String>( this, android.R.layout.simple_list_item_1,st);

   l1.setAdapter(new EfficientAdapter(TicketActivity.this));

   l1.setOnItemClickListener(new OnItemClickListener(){
   public void onItemClick(AdapterView<?> parent,View view,int position,long id){

  Toast.makeText(getApplicationContext(), "Selected:",Toast.LENGTH_SHORT).show();

    }
     });

       // l1.setOnFocusChangeListener(new OnFocusChangeListener() {
     //  public void onFocusChange(View v, boolean hasFocus) {
   //       int index= (int) ((ListView)v).getSelectedItemId();   Log.i("index",""+index);

 //   }
//});
     } 
         private static class EfficientAdapter extends BaseAdapter{
    private LayoutInflater mInflater;

    public EfficientAdapter(Context context){
        mInflater=LayoutInflater.from(context);

    // implementation of EfficientAdapter   
    }
    public int getCount() {

        return GlobalClass.myval.size();//<GlobalClass.myvals.size()?GlobalClass.myval.size():GlobalClass.myvals.size();

    }
    public Object getItem(int position) {

        return position;
    }
    public long getItemId(int position) {

        return position ;
    }
    public View getView(int position, View convertView, ViewGroup parent) {
        ViewHolder holder;
        String[] stockArr = new String[GlobalClass.myval.size()];
        stockArr = GlobalClass.myval.toArray(stockArr);
        String[] stockArr1=new String[GlobalClass.myvals.size()];
        stockArr1=GlobalClass.myvals.toArray(stockArr1);
    if(convertView==null){
            convertView=mInflater.inflate(R.layout.list_ticket, null);

            holder=new ViewHolder();
            holder.Text1=(EditText) convertView.findViewById(R.id.editText1);
            holder.Text2=(TextView) convertView.findViewById(R.id.textView2);
            holder.Text3=(TextView) convertView.findViewById(R.id.textView3);

            convertView.setTag(holder);
        }
        else{
              holder=(ViewHolder)convertView.getTag();
            }
           holder.Text1.setText("1");
            holder.Text2.setText(stockArr[position]);
            holder.Text3.setText(stockArr1[position]);
            return convertView;

     }

    }
    static class ViewHolder{
        EditText Text1;
        TextView Text2;
        TextView Text3;

    }

   } 
```

list_ticket.xml：

```
 <?xml version="1.0" encoding="UTF-8"?>
       <LinearLayout 
     android:orientation="horizontal"
     android:layout_height="match_parent"
     android:layout_width="match_parent"
     xmlns:android="http://schemas.android.com/apk/res/android">
     <EditText
    android:id="@+id/editText1"
    android:layout_width="40dp"
    android:layout_height="wrap_content"
    android:inputType="number" 
    android:ems="10"
    android:focusable="false"
    android:focusableInTouchMode="true">

    </EditText>

  <TextView
      android:layout_height="wrap_content"
      android:layout_width="130dp" 
      android:id="@+id/textView2" 
      android:gravity="right"/>

    <TextView 
      android:layout_height="wrap_content"
      android:layout_width="70dp"
      android:id="@+id/textView3" 
      android:gravity="right"/> 
     </LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T09:03:17.740

我认为您所遇到的是您的 EditText 字段覆盖行选择的情况。如果您发布您所拥有的代码，它将更好地了解问题所在。

你的 EditText 填满了行吗？如果是这样，则该字段是被单击的字段，而不是该行。尝试使 EditText 字段更小，然后您应该能够在 EditText 字段之外单击，这将确认这是您的问题。

**更新** 当您单击 EditText 字段时，设备假定您要编辑此文本。当您单击其他文本字段时，您单击会被解雇吗？你真的需要一个列表项中的 EditText 字段吗？

# nhibernate - LINQ to NHibernate - .GroupBy().Skip().Take() 导致异常

> ID：11879828
> 
> 赞同：3
> 
> 时间：2012-08-09T08:53:32.853
> 
> 标签：nhibernate, linq-to-nhibernate

NHibernate 版本 3.3.1.4000

询问：

```
IQueryable<Activity> activities = _repository.GetList<Activity>();

IQueryable<ActivityStatistic> statistics = activities
    .GroupBy(activity => activity.ActivityLicense.SerialNumber)
    .Select(grouping => new ActivityStatistic
        {
            ActivityCount = grouping.Count(),
            LicenseCode = grouping.Key              
        })
    .OrderBy(stat => stat.LicenseCode);

List<ActivityStatistic> result = statistics
    .Skip(request.StartIndex)
    .Take(request.Count)
    .ToList(); 
```

如果我评论 Skip/Take 代码，它可以正常工作。在 OrderBy 使用 LINQ to NHibernate 之后，如何在不调用 ToList() 的情况下使其协同工作？

提前致谢。

**更新：**

例外：

```
The method or operation is not implemented.

 at NHibernate.Linq.GroupBy.AggregatingGroupByRewriter.FlattenSubQuery(SubQueryExpression subQueryExpression, QueryModel queryModel)
   at NHibernate.Linq.GroupBy.AggregatingGroupByRewriter.ReWrite(QueryModel queryModel)
   at NHibernate.Linq.Visitors.QueryModelVisitor.GenerateHqlQuery(QueryModel queryModel, VisitorParameters parameters, Boolean root)
   at NHibernate.Linq.NhLinqExpression.Translate(ISessionFactoryImplementor sessionFactory)
   at NHibernate.Hql.Ast.ANTLR.ASTQueryTranslatorFactory.CreateQueryTranslators(String queryIdentifier, IQueryExpression queryExpression, String collectionRole, Boolean shallow, IDictionary`2 filters, ISessionFactoryImplementor factory)
   at NHibernate.Engine.Query.QueryPlanCache.GetHQLQueryPlan(IQueryExpression queryExpression, Boolean shallow, IDictionary`2 enabledFilters)
   at NHibernate.Impl.AbstractSessionImpl.GetHQLQueryPlan(IQueryExpression queryExpression, Boolean shallow)
   at NHibernate.Impl.AbstractSessionImpl.CreateQuery(IQueryExpression queryExpression)
   at NHibernate.Linq.DefaultQueryProvider.PrepareQuery(Expression expression, IQuery& query, NhLinqExpression& nhQuery)
   at NHibernate.Linq.DefaultQueryProvider.Execute(Expression expression)
   at NHibernate.Linq.DefaultQueryProvider.Execute[TResult](Expression expression)
   at Remotion.Linq.QueryableBase`1.GetEnumerator()
   at System.Collections.Generic.List`1..ctor(IEnumerable`1 collection)
   at System.Linq.Enumerable.ToList[TSource](IEnumerable`1 source)
   at MBP.AuthorizationService.Logic.LicenseService.GetActivityStatistic(CommonRequest request, Int32& recordsCount) in D:\Projects\MBP.Launcher\MBP.AuthorizationService.Logic\LicenseService.cs:line 201 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T19:53:56.780

Michael Petito 回答了这个问题：

> 这也是我刚刚遇到的一个已知问题：nhibernate.jira.com/browse/NH-2566 – Michael Petito 8 月 22 日 19:56

等待新版本...

# android - 如何从一些现有的 RSS 提要创建一个新的和过滤的 RSS 提要

> ID：11879831
> 
> 赞同：0
> 
> 时间：2012-08-09T08:53:48.307
> 
> 标签：android, rss

我正在创建一个从 rss 提要中获取信息的 android 应用程序...直到现在我可以成功解析单个 rss 提要...并显示我需要的任何内容。

我想解析多个 RSS 提要并根据这些站点上给出的标签对其进行过滤……大多数 RSS 将是 feedburner RSS。

有没有办法结合许多 rss 提要根据标签、关键字等过滤它......并创建单个 rss 提要

```
public class BaseFeedParser {
    static String feedUrlString = "http://feeds.dzone.com/dzone/frontpage";

        // names of the XML tags
        static final String RSS = "rss";
        static final String CHANNEL = "channel";
        static final String ITEM = "item";

        static final String PUB_DATE = "pubDate";
        static final String DESCRIPTION = "description";
        static final String LINK = "link";
        static final String TITLE = "title";

        private final URL feedUrl;

        protected BaseFeedParser(){
            try {
                this.feedUrl = new URL(feedUrlString);
            } catch (MalformedURLException e) {
                throw new RuntimeException(e);
            }
        }

        protected InputStream getInputStream() {
            try {
                return feedUrl.openConnection().getInputStream();
            } catch (IOException e) {
                throw new RuntimeException(e);
            }
        }

        public List<Message> parse() {
            final Message currentMessage = new Message();
            RootElement root = new RootElement(RSS);
            final List<Message> messages = new ArrayList<Message>();
            Element itemlist = root.getChild(CHANNEL);
            Element item = itemlist.getChild(ITEM);
            item.setEndElementListener(new EndElementListener(){
                public void end() {
                    messages.add(currentMessage.copy());
                }
            });
            item.getChild(TITLE).setEndTextElementListener(new EndTextElementListener(){
                public void end(String body) {
                    currentMessage.setTitle(body);
                }
            });
            item.getChild(LINK).setEndTextElementListener(new EndTextElementListener(){
                public void end(String body) {
                    currentMessage.setLink(body);
                }
            });
            item.getChild(DESCRIPTION).setEndTextElementListener(new EndTextElementListener(){
                public void end(String body) {
                    currentMessage.setDescription(body);
                }
            });
            item.getChild(PUB_DATE).setEndTextElementListener(new EndTextElementListener(){
                public void end(String body) {
                    currentMessage.setDate(body);
                }
            });
            try {
                Xml.parse(this.getInputStream(), Xml.Encoding.UTF_8, root.getContentHandler());
            } catch (Exception e) {
                throw new RuntimeException(e);
            }
            return messages;
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T02:26:03.560

# c# - 使用 iTextSharp 在创建的 PDF 中不显示任何内容？

> ID：11879833
> 
> 赞同：0
> 
> 时间：2012-08-09T08:53:51.240
> 
> 标签：c#, asp.net, pdf, itextsharp

我正在尝试使用 iTextSharp lib 将我的 HTML 页面导出为 PDF。首先，我试图打印我的 Aspx 页面中的表格。PDF 已成功创建，但 PDF 中没有任何内容。我正在使用下面的代码：

```
protected void btnExportToPdf_Click(object sender, EventArgs e)
    {

        btnExportToPdf.Visible = false;

        Response.ContentType = "application/pdf";
        Response.AddHeader("content-disposition", "attachment;filename=TestPage.pdf");
        Response.Cache.SetCacheability(HttpCacheability.NoCache);
        StringWriter sw = new StringWriter();
        HtmlTextWriter hw = new HtmlTextWriter(sw);

        exportTable.RenderControl(hw);

        //this.Page.RenderControl(hw);

        StringReader sr = new StringReader(sw.ToString());
        Document pdfDoc = new Document(PageSize.A4, 10f, 10f, 100f, 0f);
        HTMLWorker htmlparser = new HTMLWorker(pdfDoc);
        PdfWriter.GetInstance(pdfDoc, Response.OutputStream);
        pdfDoc.Open();
        htmlparser.Parse(sr);
        pdfDoc.Close();
        Response.Write(pdfDoc);
        Response.End(); } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T20:09:42.127

现在我不是太老练，但对我来说，问题看起来像你从来没有真正将字符串写入文件。我看到您初始化了几个不同的字符串对象，并且看到您将 HTML 添加到其中，但我从未看到您实际将它们写入 PDF。这是我将HTML解析为PDF的常用过程，也许你可以看看它，看看你缺少什么。

```
System.Text.StringBuilder store = new System.Text.StringBuilder();
string line;

     while ((line = htmlReader.ReadLine()) != null)
     {
       store.Append(line + Environment.NewLine);
     }

string html = store.ToString();
FileStream stream = new FileStream(newFileName, FileMode.Create, FileAccess.Write);
Document document = new Document(PageSize.LETTER, 15, 15, 35, 25);
PdfWriter writer = PdfWriter.GetInstance(document, stream);
document.Open();
System.Collections.Generic.List<IElement> htmlarraylist = new List<IElement>(HTMLWorker.ParseToList(new StringReader(html), new StyleSheet()));

     foreach (IElement element in htmlarraylist)
     {
        document.Add(element);
     }

document.Close(); 
```

至少我突然想到了这一点，事实上你看起来并没有真正将生成的文本写入 PDF。我希望这有帮助。

# python - 了解 Python 继承和初始化

> ID：11879834
> 
> 赞同：0
> 
> 时间：2012-08-09T08:53:51.673
> 
> 标签：python, inheritance, initialization

> **可能的重复：**
> [Python 中的“Least Astonishment”：可变默认参数](https://stackoverflow.com/questions/1132941/least-astonishment-in-python-the-mutable-default-argument)

在 Python 2.7 中，考虑我有以下代码：

```
class Base(object):
    # Variant 1
    def __init__(self, records=[]):
        self._records = records

    # Variant 2
    # def __init__(self, records=[]):
    #     self._records = []
    #     if records:
    #         self._records = records

    def append(self, value):
        self._records.append(value)

class ChildA(Base):
    pass

class ChildB(Base):
    pass

a = ChildA()
b = ChildB()
a.append(100)
b.append(200)

print a._records
print b._records 
```

如果我使用变体 1 来初始化我的基类，self._records 的行为就像一个类变量。使用变体 1 执行代码来初始化我的基类，我得到输出：

```
[100, 200]
[100, 200] 
```

使用变体 2 来初始化我的基类，self._records 的行为就像一个实例变量（如预期的那样）。使用变体 2 执行代码来初始化我的基类，我得到输出：

```
[100]
[200] 
```

这两种变体有什么区别？为什么变体 1 的工作方式与变体 2 不同？非常感谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T09:09:06.637

它与继承、类或实例变量无关。考虑下一个代码：

```
>>> def f(a=[]):
...     a.append(1)
...     print a
...
>>> f.func_defaults
([],)
>>> f()
[1]
>>> f()
[1, 1]
>>> f.func_defaults
([1, 1],) 
```

函数参数的默认值仅被评估并存储在函数对象中。每次`f`调用它都使用相同的列表。就像你的情况一样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T08:58:51.307

您的默认参数是`[]`，这是 Python 的常见缺陷。在[教程](http://docs.python.org/tutorial/controlflow.html)中查看更多信息：

> 重要警告：默认值仅评估一次。当默认值是可变对象（例如列表、字典或大多数类的实例）时，这会有所不同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T11:53:02.327

正如其他人所说 - 这与使用空列表作为默认值有关，而不是与类继承行为有关。

正确的做法是：

```
class Base(object):
    # Variant 1
    def __init__(self, records=None):
        if records is None:
            records = []
        self._records = records 
```

因此，确保每次实例化 Base 类时都会创建一个新的列表实例。你把它放在你的代码中的方式是，当你的类主体被 Python 解析时，一个列表对象被实例化——并且每次运行该方法时，一个实例`list`被用作默认参数。`__init__`由于对象持有引用并更改相同的列表，因此更改在共享`Base`该类的所有其他对象中可见。

# css - Firefox 没有抗锯齿缩放背景 svg

> ID：11879836
> 
> 赞同：8
> 
> 时间：2012-08-09T08:53:54.147
> 
> 标签：css, firefox, svg, background-image

我正在开发一种响应式设计，该设计需要标题图形随视口的宽度缩放。我已经去了一个 svg 认为这会很好地扩展。（我在整个站点中测试了对 svg 的支持，并用 svg 替换了 gif）。在 Firefox（Windows 7 上的 13.0）中，它不会对小尺寸进行抗锯齿处理。有时它在某些尺寸上看起来不错，如果我修复尺寸，它会这样做，但我想避免这样做。Chrome 和 Safari 对图像进行抗锯齿处理，看起来不错。

我正在将它设置`background-size: 100% 100%`为缩放到容器，我也尝试过类似`cover`的东西，但似乎没有什么区别。

我也尝试过添加`image-rendering: optimizeQuality;`，但这似乎没有帮助。

我在[http://axminster.digital.linneydesign.com/svg/](http://axminster.digital.linneydesign.com/svg/)上设置了一个测试页面- 顶部是背景图片，下面是完全相同的文件，但直接添加到 html 中作为`img`. 将浏览器缩小到小尺寸，您会看到顶部的像素化，但底部的像素将保持平滑。

关于如何在不固定其尺寸的情况下平滑此背景图像的任何想法？

谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-09T10:41:55.460

将 svg 文件 (sophie-conran.svg) 中的外部`<svg>`元素的宽度和高度设为 100%。

发生的情况是 svg 图像在您给它的宽度和高度上被光栅化，即 1000 像素 x 350 像素，然后该位图被转换为所需的大小。如果您设置宽度和高度百分比，则以最终大小创建位图，并且没有位图缩放。

更新：

不过，这对于 Firefox 24 及更高版本都没有实际意义，你可以做你喜欢做的事，它总是能正常工作，即没有像素化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-06-20T22:34:54.960

解决方案是将 SVG 作为标签，而不是作为外部文件。Firefox 将正确应用抗锯齿。

# ruby - 如何获得冷冻红宝石

> ID：11879837
> 
> 赞同：0
> 
> 时间：2012-08-09T08:53:56.313
> 
> 标签：ruby, rubygems

我正在研究一个小型 Rub​​y 项目，并且在一个类中我需要一个 gem。现在，由于项目必须是可移植的，我决定冻结 gem，所以我已经解压了它。我的项目现在看起来像

```
/
  /lib
    xml_generator.rb
  /vendor
    /gems
      /dbf-1.7.3 
```

如何在 xml_generator 中指定使用本地位于 vendor/gems/dbf-1.7.3 的 dbf-1.7.3？

我尝试了几种解决方案，最后一个是

gem "dbf", :path => "../vendor/gems/dbf-1.7.3" 需要 'dbf'

但似乎它不起作用。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T09:00:02.780

I think you just have to specify the exact version if dbf is installed on your system:

```
require 'rubygems'
gem 'dbf', '= 1.7.3' 
```

If not you can try to require all the Ruby files under dbf-1.7.3:

```
Dir['./../vendor/gems/dbf-1.7.3/*.rb'].each{ |f| require f } 
```

# ruby-on-rails - 访问由另一个应用程序创建和使用的现有数据库

> ID：11879838
> 
> 赞同：0
> 
> 时间：2012-08-09T08:53:56.300
> 
> 标签：ruby-on-rails, database, activerecord

我有一个 Rails 应用程序，它应该访问其他一些数据库以进行只读。这些数据库是由其他应用程序创建和使用的，我只需要阅读。

连接到这些数据库不是问题，但我不想手动为这些数据库中的每个表创建模型，因为有数百个表。是否有使用 Rails 访问外部数据库的最佳实践？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T09:29:38.750

是的，我们可以在 Rails 应用程序中访问外国数据库

签出此链接

[http://www.paultastic.com/showpage/Grabbing-Data-From-Foreign-Database-Using-Rails](http://www.paultastic.com/showpage/Grabbing-Data-From-Foreign-Database-Using-Rails)

# html - 有谁知道如何使用 HTML5 在 Spring MVC 框架中上传文件？

> ID：11879842
> 
> 赞同：-1
> 
> 时间：2012-08-09T08:54:23.757
> 
> 标签：html, spring, spring-mvc

好吧，我不知道如何通过 html5 页面上传文件，我也不知道如何使用 Spring MVC 来做到这一点。我只是想知道，请求与 Html（不是 html5）中的请求相同吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T09:31:51.643

检查这些教程，我为你谷歌。

[http://www.ioncannon.net/programming/975/spring-3-file-upload-example/](http://www.ioncannon.net/programming/975/spring-3-file-upload-example/)

[http://www.mkyong.com/spring-mvc/spring-mvc-file-upload-example/](http://www.mkyong.com/spring-mvc/spring-mvc-file-upload-example/)

# java - 在oracle中将资源加载到java

> ID：11879845
> 
> 赞同：1
> 
> 时间：2012-08-09T08:54:33.757
> 
> 标签：java, oracle, resources, load

我已将 log4j.jar 和属性文件作为 Java 资源加载到 Oracle 中。我在 Oracle 中的 java 类声明了用于 Java 存储过程的方法。当我运行 java 方法时，它无法定位\加载使用的资源（属性文件）你能告诉我为什么它不能以及如何解决这个问题吗？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T13:30:46.133

解决如下似乎 oracle 仅支持 getResource() 或 getResourceAsString() 用于沿独立 java 一直使用 PropertyConfigurator.configureAndWatch() 的资源加载。将资源定位器和属性配置方法替换为 URL 绑定解决了我的问题。谢谢。

# c# - 开发 .Net 应用程序并嵌入 CD

> ID：11879852
> 
> 赞同：0
> 
> 时间：2012-08-09T08:54:52.487
> 
> 标签：c#, sql, deployment

我有一个应用程序（独立应用程序），它基本上使用 UI 读写数据。我必须将它嵌入 CD 并使其自动运行。

但我有一些困惑，同样需要你的帮助

1.  是选择 Windows 还是 .Net 的 Web 应用程序？
2.  哪种数据存储机制更可取？
3.  如何处理 DB 部分，因为应用程序将是 CD 如何写入数据。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T08:59:02.350

1.  您不能从 CD 运行 Web 应用程序。您可能想要使用 Windows 应用程序。
2.  您似乎在假设一个数据库，所以我猜您的存储机制是使用数据库。查看您需要存储的数据以及您需要如何使用它，并据此做出决定。
3.  您不能写入 CD。您需要写入已知位置（例如`AppData`文件夹）或要求用户在您的应用程序中指定一个位置。

还值得注意的是：您不能再自动运行应用程序（从 Windows 7 开始，我相信已向后移植到 Vista）。您可以做的最好的事情是让自动运行对话框包含一个运行应用程序的*选项。*

# pdf - 是否有任何允许自动（或手动）添加 http 文件源的文件 pdf 版本？

> ID：11879859
> 
> 赞同：4
> 
> 时间：2012-08-09T08:55:03.743
> 
> 标签：pdf, usability

是否有任何允许自动（或手动）添加 http 文档源的 pdf 版本？

从用户端看这个问题的场景是这样的：

1.  我在网上找到了 pdf 格式的 disire 文档。
2.  我保存它。
3.  几个月后我打开这个文档，我希望找到我找到它的网页。

最好有该文件的某个地址，当然可以手动将其写入 soe 文本文件中，但通常在复制 + 粘贴 pdf 文档标题时会出现问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T13:41:08.983

如果您可以在将 PDF 文件发送到浏览器之前对其进行修改，那么您可以在几个地方放置文档来源的 URL：

1.  [您可以使用“逻辑结构”树中的节点（ PDF 参考文档](http://wwwimages.adobe.com/www.adobe.com/content/dam/Adobe/en/devnet/pdf/pdfs/PDF32000_2008.pdf)的第 14 章第 7 部分）。此树将显示在 Acrobat Reader 的“模型树”选项卡中。
2.  您可以将超链接注释添加到每个页面的顶部或底部，或者第一页，或者在您可以在文件开头或结尾添加的新页面中。我个人认为这是最好的方法，因为链接可以点击。
3.  您可以在触发链接到源 URL 的 GoTo 操作的页面上添加按钮字段。操作在第 12 章 - PDF 参考文档的交互功能中进行了说明。
4.  您可以添加指向链接到源 URL 的命名目标的书签（大纲）。命名目的地也在第 12 章中进行了说明。这种方法也可以一键使用，如果我们不使用它可以隐藏书签选项卡。
5.  [正如@Bobrovsky 所说](https://stackoverflow.com/a/11884388/501196)，您可以将其添加为 Document 属性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T13:19:30.700

PDF 允许您向文档信息字典添加自定义值（请参阅 PDF 参考中的 14.3.3，“文档信息字典”）。你可以把你的 URL 放在那里。Adobe Reader 将在“高级”选项卡的“文档属性”对话框中显示自定义值。

从 PDF 1.4（Acrobat 5x 及更高版本）开始，您可以将 URL 添加到从文档目录引用的 XMP 元数据流（请参阅 PDF 参考中的 14.3 元数据）。如果您将它们放在自定义方案中，Adobe Reader 也会显示元数据属性。

Acrobat Professional 可用于添加自定义值或 XMP 元数据。几乎任何可以打开和保存 PDF 的 PDF 库也可以用于该任务。

*我认为 PDF 文档中*没有其他地方可以用来存储信息。

[PDF 参考](http://wwwimages.adobe.com/www.adobe.com/content/dam/Adobe/en/devnet/pdf/pdfs/PDF32000_2008.pdf)

# c++ - 使用 ctypes 函数调用从 python 传递变量参数到 C++ 函数

> ID：11879860
> 
> 赞同：1
> 
> 时间：2012-08-09T08:55:11.940
> 
> 标签：c++, python, linux, python-2.7, ctypes

当我`ctypes`从 HTML/JS->python in pyramid f/w -->C++ 向函数传递变量参数时遇到问题

例如，我的 HTTP GET 调用如下：

> 类型：“GET”，异步：false，url：“/web/NewModel/getValues?count=2¶meters=Param1,Param2”，成功：function(data){ alert(data.GetValue)

Python基础代码：

```
def get_Multiple_Xpaths(request):
    count = int(request.params['count'])
    requests=[]
    requests = request.params['parameters'].split(',')
    print 'count:%s' % (count)
    data=wrapperClass.getMultipleValues(count , *requests)
    print 'Final Data:%s' % (data)
    return {'Get':data} 
```

Python 和 C++ 之间的 I/F Python：

```
from ctypes import *
so = cdll.LoadLibrary(***)
funcHandle = so.CallC++Function
funcHandle.restype = c_char_p
def getMultipleValues(cls, count, *args):
        print 'count:%s' % (count)
        print 'Length of tuple:%s' %str(len(args))
        for a in args:
            print 'Wrapper Param:%s' % (a)
        value=funcHandle(count, "Find" , *args) -->C++ debug prints parameters as empty. I tried to use str(*args) but it works only if `*args` actually has 1 argument. For multiple, it throws a type error.

        print 'Wrapper Value:%s' % (value)  ---->Returns Empty
        return value 
```

问题似乎是当我`*args`在 2 个 Python 函数之间传递时，它得到的值很好*（当我在 getMultipleValues 函数中打印值时它打印得很好）*。但是`funcHandle`，我使用的调用，C++ 没有得到任何`*args`正在传递的值。

如果我用 运行测试程序`funcHandle(count, "Find" , "parameter1" , "parameter2")`，它会得到很好的值。

请告诉我我在这里做错了什么。我的要求是传递具有可变数量参数的函数，如前一行所述，以便 C++ 函数可以访问和处理它需要的任何内容。

# python - nltk 贝叶斯分类器再训练

> ID：11879864
> 
> 赞同：0
> 
> 时间：2012-08-09T08:55:35.530
> 
> 标签：python, nltk

我尝试训练 nltk 贝叶斯分类器。以后可以重新训练分类器（添加更多训练数据并仅在其上训练）还是我必须一次训练分类器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T14:10:31.213

可以在添加更多数据时重新训练分类器（称为“在线”朴素贝叶斯分类器）。我不确定是否有任何标准的 python ML 库可以做到这一点。但我找到了一个 - [http://pypi.python.org/pypi/Divmod%20Reverend](http://pypi.python.org/pypi/Divmod%20Reverend)

尝试;

```
pip install Reverend 
```

# java - 为什么我的子类构造函数没有被调用？

> ID：11879865
> 
> 赞同：0
> 
> 时间：2012-08-09T08:55:37.570
> 
> 标签：java, inheritance, constructor

我有这个继承结构：

```
public abstract class Mom {
    int dummy;
    Mom() {
        dummy = 0;
    }
    Mom(int d) {
        this();
        dummy = d;
    }
}
public class Kid extends Mom {
    String foo;
    Kid() {
        super();
        foo = "";
    }
    Kid(int d) {
        super(d);
    }
}
// ...
Kid kiddo = new Kid(10);
// kiddo.foo == null ! 
```

我的无参数构造函数`Kid`永远不会被调用！这是我的预期：

1.  `new Kid(10)`→`Kid#Kid(int)`
2.  `super(d)`→`Mom#Mom(int)`
3.  `this()`→ `Kid#Kid()`// 哇！！
4.  `super()`→`Mom#Mom()`

是否可以从`Mom`调用`Kid`的无参数构造函数？
我想它不是，我将添加一个抽象方法[1] `init()`，`Mom`它将调用并且`Kid`s*必须*覆盖。
但我只是想知道确切的原因，如果可能的话，例子证明为什么想要调用子类的构造函数是一个坏主意（即使子类的构造函数*确实*调用了`super()`）。

```
// in Mom:
protected abstract void init();
public Mom() {
    dummy = 0;
    init();
}

// in Kid:
@Override
protected abstract void init() {
    foo = "";
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-09T08:58:37.657

我会安排这些的方式，所以你不需要调用每个构造函数。

```
public abstract class Parent {
    final int dummy;

    Parent () {
        this(0);
    }
    Parent (int d) {
        dummy = d;
    }
}

public class Kid extends Parent {
    final String foo = "";

    Kid() {
    }

    Kid(int d) {
        super(d);
    }
} 
```

使用`final`确保每个字段都设置一次。

* * *

从构造函数调用任何可覆盖的方法被认为是不好的做法，因此使构造函数可覆盖是一个坏主意。

* * *

`this()`调用*同一类*的构造函数，因为构造函数不遵循继承（静态方法也不遵循）

```
new Kid(10) --> Kid#Kid(int)
super(d) --> Mom#Mom(int)
this() --> Mom#Mom() 
```

构造函数会这样做，否则您将面临多次调用同一个构造函数的危险，并且无法保证最终方法只设置一次。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T09:21:57.353

来自[JLS §8.8.7.1](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.8.7.1)（我强调）：

> *   备用构造函数调用以关键字`this`开头（可能以显式类型参数开头）。**它们用于调用同一类的备用构造函数。**
>     
>     
> *   超类构造函数调用以关键字`super`（可能以显式类型参数开头）或 Primary 表达式开头。**它们用于调用直接超类的构造函数。**

因此，this-constructor-invocation 总是引用同一个类，而不是子类。

虽然可以在构造函数中调用虚方法，但这是不安全的并且被认为是不好的做法，因为它可能导致这些方法使用部分初始化的对象实例。

对于您的问题，有几种可能的解决方案：

1.  在声明时初始化成员*foo*，即`foo = "";`. 这也称为*字段初始值设定项*
2.  使用[实例初始化器](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.6)：`{ foo = ""; }`。请注意，如果您的类中需要，您可以拥有多个实例初始化程序。
3.  咬紧牙关，在所有构造函数中重复初始化

根据[JLS §12.5](http://docs.oracle.com/javase/specs/jls/se7/html/jls-12.html#jls-12.5)，(1) 和 (2) 中的初始化*总是*在构造函数本身被调用之前执行，因此您有一个定义良好的对象初始化，而无需诉诸有问题的模式。

如果一个成员被多次初始化，那么最后一次初始化获胜：

> 4) 执行该类的实例初始化器和实例变量初始化器，将实例变量初始化器的值分配给相应的实例变量，按照它们在源代码中以文本形式出现的从左到右的顺序。

如果在构造函数中也初始化了相同的字段，则构造函数获胜。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T09:01:25.787

您应该有 Kid 类的这些构造函数：

```
Kid(int i) {
  super(i);
  whatever();
}

Kid () {
  this( DEFAULT_VALUE);
} 
```

这样所有对父构造函数的调用都是通过子类的完全限定构造函数进行的。并且对于你的类的所有构造函数都有一个默认行为，它不会被绕过，就像你当前的代码一样。

# image - Convert SVG to JPEG with Imagemagick, missing external raster graphics

> ID：11879867
> 
> 赞同：8
> 
> 时间：2012-08-09T08:55:44.293
> 
> 标签：image, svg, imagemagick

I would like to convert a simple svg graphic to a jpeg one. Here is the svg source code:

```
<svg style="overflow: hidden; position: relative;" 
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" 
  width="300" version="1.1" height="200">
     <image x="10" y="10" width="276" height="110" 
     xlink:href="http://images.google.com/intl/de_ALL/images/logos/images_logo_lg.gif"
     stroke-width="1"></image>
  <rect x="0" y="150" height="10" width="300" style="fill: #000000"/>
</svg> 
```

If i do the conversion on my windows XP mashine with ImageMagick 6.7.8 all is working fine.

```
convert test.svg test.jpg 
```

![Conversion with windows](../Images/242f1c2a60ff30ff6f6d02665450556c.png)

If i do the same conversion on my linux server (Debian 6.0 ImageMagick 6.6.0) get only the black line.

![Conversion on linux server](../Images/342bbce602f7424696ffcaa03cd8a912.png)

I tried to upgrade to the latest Imagemagick version on my linux mashine but i get no newer version from the repository.

But i'm not sure if the use of external images is a feature from the newer version, or if it is a configuration issue.

Thanks for any suggestions!

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-28T12:41:09.790

You might want to check your version with

convert --version

the following version happily does the intended conversion:

```
Version: ImageMagick 6.7.7-0 2012-05-27 Q16 http://www.imagemagick.org
Copyright: Copyright (C) 1999-2012 ImageMagick Studio LLC
Features:  OpenCL 
```

It is available in the current macports port.

This version:

```
Version: ImageMagick 6.6.9-7 2012-04-30 Q16 http://www.imagemagick.org
Copyright: Copyright (C) 1999-2011 ImageMagick Studio LLC
Features: OpenMP 
```

In Ubuntu 12.04 LTS did not work ...

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-07-31T14:04:45.337

@Wolfgang

I have almost the same verison of imagemagick as yours. (The release is not the same, but I don't think that will cause problem)

```
$ convert --version
Version: ImageMagick 6.6.9-7 2014-03-06 Q16 http://www.imagemagick.org
Copyright: Copyright (C) 1999-2011 ImageMagick Studio LLC
Features: OpenMP 
```

And my system is :

```
Distributor ID: Ubuntu
Description:    Ubuntu-Secure-Remix 12.04.1 LTS 31.08.2012
Release:    12.04
Codename:   precise 
```

I have tested in my system, it works well the command.

Or it exist another command :

```
rsvg-convert 
```

It could be installed by type (in Ubuntu) :

```
apt-get install librsvg2-bin 
```

And to convert a SVG to PNG, the command is :

```
rsvg-convert your_file.svg > your_file.png 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-11T21:00:28.107

If there is no newer version in the Debian repository, your options are:

1.  Compile it yourself from the [**ImageMagick source code**](http://www.imagemagick.org/script/download.php). Instructions are [**here**](http://www.imagemagick.org/script/install-source.php#unix).

2.  Install a [**pre-compiled non-Debian binary**](http://www.imagemagick.org/download/binaries/) package (.tar.gz).

3.  Use Google and search for the official Debian Squeeze (a.k.a. 6.0) 'backport' repository. If you are lucky, there may be a newer ImageMagick available.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-06-08T20:53:04.437

You may also try [Apache Batik SVG Rasterizer](https://xmlgraphics.apache.org/batik/tools/rasterizer.html)

```
java -jar batik-rasterizer.jar samples/batikFX.svg 
```

It does fetch external images.

# asp.net-mvc - 返回 DbQuery 以查看需要 IEnumerable

> ID：11879870
> 
> 赞同：0
> 
> 时间：2012-08-09T08:56:02.423
> 
> 标签：asp.net-mvc, entity-framework-4

**问题：**

> 异常详细信息：System.InvalidOperationException：传入字典的模型项的类型为“System.Data.Entity.Infrastructure.DbQuery`1[System.Int32]”，但此字典需要“migros.Models”类型的模型项。状态'。

**我正在尝试做的事情**

我需要将以下 linq 查询的结果传递给视图。

```
using (var db = new migros_mockEntities1())
        {
            var listOfIdeas = (from x in db.States select x.ID); 

            return View(listOfIdeas);
        } 
```

视图需要`IEnumerable`，但似乎我无法将 linq 查询的结果转换为`IEnumerable`. 我正在使用实体框架数据库第一种方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T09:03:21.210

问题是您试图从 using 块中返回 ObjectQuery。尝试物化你的对象集

```
var listOfIdeas = (from x in db.States select x.ID).ToList(); 
```

另外，不要忘记，处理上下文可能很棘手。在您的情况下`var listOfIdeas = (from x in db.States select x.ID)`只是一个查询，仅当您开始迭代它时才会运行。因此，如果 context 已经被处理，你会得到一个异常，尝试使用`listOfIdeas`.

# r - 如何对 data.frames 列表进行索引（子集）

> ID：11879873
> 
> 赞同：3
> 
> 时间：2012-08-09T08:56:21.017
> 
> 标签：r, list, dataframe, lapply

我得到了几个 data.frames 的列表，我想从每个 data.frames 中删除前 2 列。我是按如下方式进行的，但觉得这可能更 R-ish。

```
data(mtcars)
data(iris)
myList <- list(A = mtcars, B = iris)
# helper function
removeCols <- function(df,vec) {
res <- df[,-vec]
}
lapply(myList,removeCols,1:2) 
```

显然这可以完成工作，但对我来说，我似乎在这里错过了一些东西（例如在 lapply 中使用运算符，因为它在技术上也是一个函数）。但是，这种方法的主要缺点是您需要一个小辅助函数来处理您想要对该列表的所有元素执行的每个小任务。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-09T09:03:50.397

您的代码是非常好的 R。但是您有两种选择：

1.  使用匿名函数 - 这是一个通用的解决方案
2.  使用`[`运算符 - 特定于这种情况

您的原件：

```
xx <- lapply(myList,removeCols,1:2) 
```

匿名函数：

```
yy <- lapply(myList, function(df, vec){df[,-vec]}, 1:2) 
```

使用`[`运算符：

```
zz <- lapply(myList, "[", -(1:2)) 
```

这些产生相同的结果

```
identical(xx, yy)
[1] TRUE

identical(xx, zz)
[1] TRUE 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-09T09:03:42.490

目前我唯一能想象到的 R-ish 就是让它更短并摆脱辅助功能。

```
data(mtcars)
data(iris)
myList <- list(A = mtcars, B = iris)
lapply(myList,function(x) x[,-(1:2)]) 
```

如果您要求直接修改某些内容：

```
myList[[1]][,-(1:2)] 
```

但是由于列表是一个非常开放的结构，对其内容没有要求，因此您不能对其内容进行索引，因为它们可能确实不同。但是，如果您的两个数据集具有相同的维度 (nxm)，那么您可以将它们组合成一个 3d 数组，所有已知的索引技巧都可以在该数组上工作。

# javascript - 谷歌距离矩阵 API 没有输出

> ID：11879874
> 
> 赞同：0
> 
> 时间：2012-08-09T08:56:32.740
> 
> 标签：javascript, google-maps-api-3

我正在尝试使用距离矩阵 API 来计算两个地方之间的距离。因为这是我第一次尝试使用这个 API，所以我随便复制了我在[Google 文档页面](http://bit.ly/RCwQ7z)上找到的代码 并粘贴到我的页面上。但是，我看不到任何类型的输出，也不知道为什么。这是[我的页面](http://www.angtrim.com/test/vediamo.html)

这是来源：

```
<!DOCTYPE html> 
<html> 
<meta http-equiv="Content-Type" content="text/html;charset=UTF-8">

<!-- Google Api -->
<script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?key=AIzaSyDDMkiaVfr1y0QCsx_qUsJKIBAWpkyXZrY&sensor=false">
</script>

<script type="text/javascript">
var origin1 = new google.maps.LatLng(55.930385, -3.118425);
var origin2 = "Greenwich, England";
var destinationA = "Stockholm, Sweden";
var destinationB = new google.maps.LatLng(50.087692, 14.421150);

var service = new google.maps.DistanceMatrixService();
service.getDistanceMatrix(
  {
    origins: [origin1, origin2],
    destinations: [destinationA, destinationB],
    travelMode: google.maps.TravelMode.DRIVING,
    avoidHighways: false,
    avoidTolls: false
  }, callback);

function callback(response, status) {
  if (status == google.maps.DistanceMatrixStatus.OK) 
  {
    var origins = response.originAddresses;
    var destinations = response.destinationAddresses;
    document.writeln(response.originAddresses[1]);    
  }

  else {
    document.writeln("error");

       }
  }  

</script>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T09:09:22.377

好的，所以我不知道为什么这不起作用。首先，我推荐你使用**jQuery**。你可以在[这里找到它。](http://jquery.com/)

首先，将您的代码包装在一个`$(document).ready()`函数中，以便*在页面准备好时*执行它，

```
$(document).ready(function() {
  // Everything in your original script block
  var origin1 = new google.maps.LatLng(55.930385, -3.118425);
  // etc etc      
}); 
```

其次，当您知道要写入的位置时，写入文档会容易**得多**。制作一个`div`将保存您的位置数据的文件。

```
<body>
<div id="location"/>
</body> 
```

第三，当您从 Google 获得您的位置时，更改您的文本`div`以匹配：

```
$("#location").text(response.originAddresses[1]); 
```

在没有 jQuery 的情况下处理文档是一场噩梦，我强烈推荐使用这个库。

# facebook - 如何更改只有管理员被 Facebook 转换为企业帐户的应用程序设置

> ID：11879876
> 
> 赞同：3
> 
> 时间：2012-08-09T08:56:43.867
> 
> 标签：facebook, facebook-apps

几年前，我们创建并部署了两个 Facebook 应用程序。几个月前，Facebook 将与这些应用关联的帐户重新归类为“企业”而非“个人”。一旦发生这种情况，我们就无法访问我们的应用程序。任何访问应用程序开发者 URL 的尝试都会立即将我们重定向回我们的基本 Facebook 墙。

现在，我们收到来自 Facebook 的电子邮件警告，称我们的应用程序需要更新隐私政策，如果我们不更新，则“将采取行动”。由于我们无法访问应用程序，我们显然无法修改隐私政策。

我们怎样才能纠正这个问题？我们需要更改应用设置和/或向应用添加新管理员。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T16:48:56.070

您可以通过 API 编辑应用设置：

有关更多详细信息，请参阅[https://developers.facebook.com/docs/reference/api/application/](https://developers.facebook.com/docs/reference/api/application/)

可以使用其中一位管理员的用户访问令牌直接通过 API 更改大多数应用程序的设置。

您可以通过 API 添加其他管理员 - 获取当前是应用管理员的企业帐户的访问令牌，然后使用访问令牌添加其他管理员

首先检查您要添加的用户是否是成为应用管理员的有效用户（即有手机号码或信用卡存档 - 您可以通过让用户自己创建应用来检查），然后：

POST 到`https://graph.facebook.com/[APP ID HERE]/roles?access_toke=<ACCESS TOKEN>`参数：

*   `user`- 要添加的用户的用户 ID
*   `role`- 将它们添加到的角色，有效选项是“管理员”、“开发人员”、“测试人员”或“洞察用户”

# android - Android全屏动画，最好的方法是什么？

> ID：11879877
> 
> 赞同：3
> 
> 时间：2012-08-09T08:56:57.697
> 
> 标签：android

想问在android上播放全屏动画的最佳方式是什么，比如几百帧？

我认为它太短了，无法将其放入电影中并弄乱videoview。所以我想也许只是将每一帧渲染为一个单独的 PNG 文件，并让 imageView 通过计时器更改其图片，你怎么看？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T09:07:30.617

我认为您可以使用 30 帧/秒将是高效且对您非常有用的

# java - 对象从 Hibernate 获取错误的时间戳保存到数据库

> ID：11879880
> 
> 赞同：8
> 
> 时间：2012-08-09T08:57:15.790
> 
> 标签：java, spring, hibernate, datetime

我是 Hibernate 的新手，正在开发一个使用它的 Web 项目。

我有一个名为 area 的对象，它有一个 date object( `java.sql.Timestamp`) 属性 modifiedDate。当我创建一个新对象时，modifieDate 为空，然后将其发送到`getHibernateTemplate().saveOrUpdate(area);`我自己的扩展类中，`org.springframework.orm.hibernate3.support.HibernateDaoSupport`并使用当前时间戳设置并保存在数据库中。在数据库中，它保存为`datetime`.

我的问题是大多数情况下，对象的更新日期与保存在数据库中的日期相比相差 1 毫秒，如果在不重新加载页面的情况下尝试更新任何内容，则会导致此异常：

```
an org.hibernate.StaleObjectStateException: Row was updated or deleted by another transaction (or unsaved-value mapping was incorrect) 
```

随后从数据库中获取对象时，正确的日期没有问题，只是在创建时它得到了错误的值。

有没有办法在 SaveOrUpdate 获得正确的 modifiedDate？

如果需要映射使用`<timestamp name="modifiedDate" column="ModifiedDate"/>`并且所有测试都在本地主机上运行，​​所有测试都在同一台机器上运行。

我已经有一个解决方法，通过`getHibernateTemplate().refresh(area);`在 saveOrUpdate 之后立即调用我得到正确的时间戳，但我仍然想知道是否有办法在 saveOrUpdate 获得正确的 modifiedDate。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-18T16:12:10.210

我的理论：

发生的情况是，您在数据库端使用的数据类型比在 Java 端更不精确，因此在生成特定于 DB 的 SQL 期间，持久保存到数据库的值正在失去精度（或以某种方式舍入，见下文） . 以下是如何确定的：

1.  请记住，Hibernate 通过生成在数据库中执行的 SQL 语句来工作。为了诊断这样的 Hibernate 映射问题，您需要查看正在执行的 SQL 以便准确了解发生了什么。

2.  打开 Hibernate 的[“显示 SQL”](http://docs.jboss.org/hibernate/orm/4.1/manual/en-US/html/ch03.html#configuration-logging)设置。这将导致 Hibernate 转储数据库上正在执行的原始 SQL。

3.  检查测试中的日志。它将有助于`toString`在您的类上实现并记录值以与 SQL hibernate 为`INSERT`. SQL 语句中的值是否与 Java 时间戳字段的值匹配？

您应该检查数据库`DATETIME`类型的精度设置。例如，在 SQL Server 上，`DATETIME`实现[毫秒舍入](http://msdn.microsoft.com/en-us/library/ms187819)（请参阅“准确性”字段），这实际上会导致毫秒值的精度损失。您将需要更改列映射到的 Java 类型或更改数据库中列的类型，具体取决于您的精度需求。

# eclipse - apache-cxf dosgi restful service as eclipse 插件怪异

> ID：11879886
> 
> 赞同：0
> 
> 时间：2012-08-09T08:57:32.327
> 
> 标签：eclipse, rest, eclipse-plugin, cxf

我正在使用 REST 接口公开在一个 OSGi 包中生成的一些数据，以便之后任何人都可以使用典型的 http 请求来使用它。为此，我使用了 apache-cxf、JAX-RS 和 Jetty 的组合（主要用于测试目的）。

我的整个应用程序以两种方式分发：

*   核心：将一组最小捆绑包作为 OSGi 框架运行。
*   完整：Core + 加上一组在 Eclipse 中使用的插件，以图形方式，就是这样说的。

在核心启动配置中，我可以毫无问题地完成这项工作，请查看清单：

```
Require-Bundle: cxf-dosgi-ri-singlebundle-distribution;bundle-version="1.3.1",org.eclipse.core.runtime, org.eclipse.osgi.services;bundle-version="3.3.0", org.mortbay.jetty.server;bundle-version="6.1.23", org.mortbay.jetty.util;bundle-version="6.1.23" 
```

当我尝试启动完整发行版时，码头服务器似乎没有启动，因此 RESTful 服务无法正常工作。完整的发行版附带了更多的插件，主要与向导、透视图等有关。这个问题的根源在某种程度上与 cxf-dosgi-ri-singlebundle-distribution 捆绑包有关，并且可以通过“强制”这个捆绑包的自动启动为真，而不是默认值来解决（查看下图）：

![在此处输入图像描述](../Images/bcb6ffa6d047e52f3143ca6ba18b44ca.png)

虽然这没关系，但我的问题是……为什么会这样？其次，也是最重要的一点，我通过更新站点分发完整版本，因此用户可以下载它，打开透视图并开始使用它，也就是说，这会影响最终分发吗？有没有办法可以控制更新站点中 apache-cxf 包的 auto-start=true ？

希望我能把自己说清楚...

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T09:13:52.893

我不喜欢回答我自己的问题，但是因为我没有得到任何反馈，也许其他人也有同样的问题……就这样吧

我决定通过不使用 apache-cxf 来更改我的 restful 包的整个设计，因为它真的不需要。我需要做的就是嵌入式 Jetty 服务器和用于处理 HttpRequests 和 HttpResponses 的 javax。因此，我摆脱了对第三方库的依赖，同时利用了启动问题。

从 Ecipe 中的这些官方网站获得想法：

[在 Equinox 中嵌入 HTTP 服务器](http://www.eclipse.org/equinox/server/http_in_equinox.php)

[编写基于捆绑的服务器应用程序](http://www.eclipse.org/equinox/server/http_writing_application.php)

此外，还可以在此处找到更多动手教程：

[OSGi 作为 Web 服务器应用程序](http://bryanhunt.wordpress.com/2010/05/14/osgi-as-a-web-application-server/)

[扩展 Eclipse：显示捆绑存档中的 HTML 内容](http://www.pushing-pixels.org/2008/11/11/extending-eclipse-displaying-html-content-from-a-bundled-archive.html)

特别感谢两位作者的启迪:)。

# mysql - 如何从同一列中获取多个最大记录？

> ID：11879887
> 
> 赞同：0
> 
> 时间：2012-08-09T08:57:34.147
> 
> 标签：mysql, group-by, subquery, fetch

我正在使用 mysql 数据库。

sbs=> 从 docbodyversion 中选择 *；

```
 bodyid | internaldocid | versionid
--------+---------------+-----------
   1121 |          1245 |         1
   1122 |          1245 |         2
   1124 |          1246 |         1
   1125 |          1246 |         2
   1126 |          1246 |         3 
```

我想写一个这样的查询，这样 o/p 就会像这样：

```
 bodyid | internaldocid | versionid
--------+---------------+-----------
   1122 |          1245 |         2
   1126 |          1246 |         3 
```

所以我只想要每条记录的最大版本号....

有人可以指导我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T09:07:00.883

try this:

```
select d.*
from docbodyversion d
join
    (select internaldocid,MAX(versionid) as versionid
     from docbodyversion
     group by internaldocid)a
on a.versionid=d.versionid
and a.internaldocid=d.internaldocid 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T09:04:59.620

尝试：

```
SELECT MAX(bodyId) AS BodyID,internaldocid, MAX(versionid) AS VersionID 
FROM docbodyversion GROUP BY internaldocid 
```

[看这个小提琴](http://www.sqlfiddle.com/#!2/7a157/1)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T09:08:10.453

希望这可以帮助

```
 SELECT DISTINCT BT.BODY_ID, A.INTERNAL_DOC_ID, A.VERSION_ID
  FROM SO_BUFFER_TABLE_16 BT,
       (SELECT DISTINCT BT.INTERNAL_DOC_ID, MAX(BT.VERSION_ID) VERSION_ID
          FROM SO_BUFFER_TABLE_16 BT
         GROUP BY BT.INTERNAL_DOC_ID) A
 WHERE BT.VERSION_ID = A.VERSION_ID
   AND BT.INTERNAL_DOC_ID = A.INTERNAL_DOC_ID 
```

# git - gerrit+apache2 无法退出

> ID：11879891
> 
> 赞同：8
> 
> 时间：2012-08-09T08:57:47.450
> 
> 标签：git, apache2, gerrit

我可以登录 gerrit 服务器并查看代码。但是当我点击退出时，点击右上角的退出链接无法退出，它将返回代码审查仪表板页面

下面是我的httpd.conf和gerrit.config，请帮帮我！！！咳咳……

```
<VirtualHost *>  
  ServerName localhost 
  ProxyRequests Off  
  ProxyVia Off  
  ProxyPreserveHost On  

  <Proxy *>  
        Order deny,allow  
        Allow from all  
  </Proxy>  

  <Location /login/>  
     AuthType Basic  
     AuthName "Gerrit Code Review"  
     AuthBasicProvider file  
     AuthUserFile /home/kk/gerrit/server/etc/passwords  
     Require valid-user  
  </Location>  

  ProxyPass / http://10.10.68.224:9091/
  ProxyPassReverse / http://10.10.68.224:9091/
</VirtualHost> 
```

gerrit.config

```
[gerrit]
    basePath = git
    canonicalWebUrl = http://10.10.68.224:9091/
[database]
    type = H2
    database = db/ReviewDB

[auth]
    type = HTTP
[sendemail]
    smtpServer = localhost
[container]
    user = kk
    javaHome = /usr/lib/jvm/java-6-sun-1.6.0.26/jre
[sshd]
    listenAddress = *:29418
[httpd]  
        listenUrl = proxy-http://10.10.68.224:9091/  
[cache]
    directory = cache 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-09T11:39:50.913

我用了一个不好的方法来修复它。我在 auth 部分添加以下内容。

```
logoutUrl = http://aa:aa@10.10.68.224 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-09T09:07:42.043

You are using HTTP Basic authentication. There is no way to tell a browser to quit sending basic authentication credentials (other than closing the browser).

The following question and answers provide some additional information: [How to logout user for basic HTTP authentication](https://stackoverflow.com/questions/4154187/how-to-logout-user-for-basic-http-authentication)

# android - android BroadCastReceiver 在活动中不起作用

> ID：11879893
> 
> 赞同：0
> 
> 时间：2012-08-09T08:57:54.810
> 
> 标签：android, sms, broadcastreceiver

我想开发一个短信通知器。问题是当收到短信时，活动中的文本框只需更改为“收到短信”文本。SMS 发送成功，但 BroadCastReceiver 无法正常工作，请帮助。

我的代码：

```
package com.shahid.todolist;

import android.os.Bundle;
import android.app.Activity;
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.telephony.SmsManager;
import android.telephony.SmsMessage;
import android.view.Menu;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;

public class MainActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        /*
         * SmsManager smsManager = SmsManager.getDefault();
         * 
         * String sendTo = "03129912287"; String myMessage =
         * "Android supports programmatic SMS messaging!";
         * smsManager.sendTextMessage(sendTo, null, myMessage, null, null);
         */

        final EditText phoneNo = (EditText) findViewById(R.id.phoneNo);
        final TextView display = (TextView) findViewById(R.id.txtDisplay);
        Button buttonOne = (Button) findViewById(R.id.button1);
        buttonOne.setOnClickListener(new Button.OnClickListener() {
            public void onClick(View v) {
                SmsManager smsManager = SmsManager.getDefault();
                display.setText("Sending SMS...");
                String sendTo = phoneNo.getText().toString();
                String myMessage = "This is Shahid from Android";
                smsManager.sendTextMessage(sendTo, null, myMessage, null, null);
            }
        });

        // ---
        final BroadcastReceiver receiver = new BroadcastReceiver() {

            private static final String queryString = "@echo ";
            private static final String SMS_RECEIVED = "android.provider.Telephony.SMS_RECEIVED";

            @Override
            public void onReceive(Context context, Intent _intent) {
                if (_intent.getAction().equals(SMS_RECEIVED)) {
                    display.setText("SMS Received");
                }
            }
        };
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T09:02:38.737

您必须在您的活动中注册您的广播。

```
@Override
    protected void onResume() {
        IntentFilter filter = new IntentFilter();
        filter.addAction(BroadcastReceiver.SMS_RECEIVED);  // Provide you intent filter for message received.
        registerReceiver(receiver, filter);

        super.onResume();
    }

    @Override
    protected void onPause() {
        unregisterReceiver(receiver);
        super.onPause();
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T09:23:26.453

使用此代码：

```
buttonOne.setOnClickListener(new Button.OnClickListener() {
            public void onClick(View v) {

                display.setText("Sending SMS...");
                String sendTo = phoneNo.getText().toString();
                String myMessage = "This is Shahid from Android";
               sendSMS(sendTo , myMessage );
            }
        });

private void sendSMS(String phoneNumber, String message)
    {        
        String SENT = "SMS_SENT";
        String DELIVERED = "SMS_DELIVERED";

        PendingIntent sentPI = PendingIntent.getBroadcast(this, 0,
            new Intent(SENT), 0);

        PendingIntent deliveredPI = PendingIntent.getBroadcast(this, 0,
            new Intent(DELIVERED), 0);

        //---when the SMS has been sent---
        registerReceiver(new BroadcastReceiver(){
            public void onReceive(Context arg0, Intent arg1) {
                switch (getResultCode())
                {
                    case Activity.RESULT_OK:
                        Toast.makeText(getBaseContext(), "SMS sent", 
                                Toast.LENGTH_SHORT).show();
                        break;
                    case SmsManager.RESULT_ERROR_GENERIC_FAILURE:
                        Toast.makeText(getBaseContext(), "Generic failure", 
                                Toast.LENGTH_SHORT).show();
                        break;
                    case SmsManager.RESULT_ERROR_NO_SERVICE:
                        Toast.makeText(getBaseContext(), "No service", 
                                Toast.LENGTH_SHORT).show();
                        break;
                    case SmsManager.RESULT_ERROR_NULL_PDU:
                        Toast.makeText(getBaseContext(), "Null PDU", 
                                Toast.LENGTH_SHORT).show();
                        break;
                    case SmsManager.RESULT_ERROR_RADIO_OFF:
                        Toast.makeText(getBaseContext(), "Radio off", 
                                Toast.LENGTH_SHORT).show();
                        break;
                }
            }
        }, new IntentFilter(SENT));

        //---when the SMS has been delivered---
        registerReceiver(new BroadcastReceiver(){
            @Override
            public void onReceive(Context arg0, Intent arg1) {
                switch (getResultCode())
                {
                    case Activity.RESULT_OK:
                        Toast.makeText(getBaseContext(), "SMS delivered", 
                                Toast.LENGTH_SHORT).show();
                       display.setText("SMS Received");

                        break;
                    case Activity.RESULT_CANCELED:
                        Toast.makeText(getBaseContext(), "SMS not delivered", 
                                Toast.LENGTH_SHORT).show();

                        break;                        
                }
            }
        }, new IntentFilter(DELIVERED));        

        SmsManager sms = SmsManager.getDefault();
        sms.sendTextMessage(phoneNumber, null, message, sentPI, deliveredPI);        
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-27T04:07:54.773

如果这对某人有帮助，就我而言，问题是我在文本中使用了特殊字符，如括号。一旦我删除了这些字符，它就开始工作了

# svn - 使用符号链接在主干和分支之间切换

> ID：11879897
> 
> 赞同：3
> 
> 时间：2012-08-09T08:58:09.090
> 
> 标签：svn, lamp, symlink

[（这个问题为我赢得了SuperUser](https://superuser.com/questions/442983/switching-between-trunk-and-branch-with-symbolic-links)的风滚草徽章，但我被建议在这里尝试）

我正在我的 LAMP 开发服务器上的一个主要分支上工作，但我经常需要对主干进行次要但紧急的更新。

*   我想对我所在的任何工作副本使用相同的本地 url（不想要多个站点 - 懒惰、书签、维护。）
*   我不想在分支中提交未完成的工作，以便我可以切换到主干五分钟。
*   我正在使用颠覆，所以我没有 git stash 的等价物。

我正在尝试从符号链接 (foo) 为我的本地站点提供服务，然后我可以将其重写为指向分支或主干。这使我可以前后切换而不必担心未提交的更改，这意味着我可以使用相同的书签、路径别名等

```
# svn working copies for trunk and branch
/sites/footrunk/
/sites/foobranch/
/sites/foo -> foobranch  #symbolic link

# eg to switch to trunk
cd /sites;
ln -s footrunk foo_tmp && mv -fT foo_tmp foo
cd -; 
sudo service apache2 restart 
```

我的问题是 apache 偶尔会在切换后立即感到困惑，并且似乎保留了空的、旧的或重复的（无法在 php 中重新声明类错误？）版本的文件。重新启动 apache 似乎可以解决所有问题，但我的脑海中响起了警钟。

这是对符号链接的合理使用，还是我只是为将来解决问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T12:04:39.503

我广泛使用符号链接来获取公共库。共享库发生变化，很酷，每个项目都获得了最新的代码。我以这种方式管理了许多项目，这似乎完全合理。

直到我意识到符号链接库中存在严重问题。好吧，更改每个人都受益的源代码。20 hudson 构建之后，你开始想，啊，是的，这不是一个好主意，如果 4 年前的项目使用符号链接失败了怎么办......

我们删除了代码中的依赖项，为什么我们的部署环境不...

全心全意，不，从长远来看，使用符号链接并不是一个好主意，是的，应该响起警钟。

有哪些替代方案？

仍然使用符号链接，我将为每个唯一项目分支链接库并引用它们。这仍然意味着链接库，并且当您在分支和主干之间切换时也会产生令人头疼的问题。到了我刚刚完全删除符号链接的地步。

我现在有两种方法，第一种是我为该库创建一个 Eclipse 库项目并从我的其他项目中引用它。另一种是我创建一个 Jar 或 Swc(flash lib) 并将它们直接作为我的项目中的依赖项导入。如果项目的源代码发生更改，那么我可以更新项目或重新导入基于 hudson 构建的库。

我的场景不使用 Appache，所以我没有任何帮助，但通常使用符号链接，特别是在 SVN 中，应该远离项目工作。

此外，我相信对符号链接的更改不是版本化的。它们是静态的，您无法跟踪对它们的更改。（如果我在那一点上错了，请纠正我）。如果我是正确的，他们也不会在不同的存储库之间旅行或工作。

**编辑 2**

根据评论，也许这可能会有所帮助，当我想从 apache 为项目的主干和分支提供服务时，我将使用 apache 别名。当然你可能有 uri 问题，所以它可能不起作用，但它是一个尝试的替代方案。这又完全取决于您的设置（我猜我错过了一些关于符号链接如何为您工作的东西）。

```
>touch /etc/apache2/other/emiles.conf
>pico /etc/apache2/other/emiles.conf 
```

..添加以下内容。

```
Alias /fooBranch "/Users/emile/fooBranch"
Alias /fooTrunk "/Users/emile/fooTrunk"

<Directory "/Users/emile/fooBranch">
    Options +Indexes +MultiViews +FollowSymLinks
    AllowOverride All
    Order allow,deny
    Allow from all
</Directory>
#copy above with "/Users/emile/fooTrunk" 
```

重新启动appache，然后访问两者

```
http://localhost/fooBranch
or 
http://localhost/fooTrunk 
```

您甚至可以将 localhost 设置为仅引用 fooTrunk，或者使用不同的端口、虚拟主机（我不太熟悉）。

# security - Azure：CloudQueue 和安全性，将访问密钥放入 CloudQueueMessage

> ID：11879901
> 
> 赞同：0
> 
> 时间：2012-08-09T08:58:26.820
> 
> 标签：security, azure, azure-storage, azure-queues, access-keys

为了给我的（工人）角色提供一些工作，我将 - 放入队列 - 一条消息，如：
“ *connectionString inputContainerName outputContainerName WorkToDo* ”

connectionString 是一个天蓝色的连接字符串：
“DefaultEndpointsProtocol=https;AccountName=my_name;AccountKey=my_key”

它是一个本地应用程序，可将此消息放在 Azure 上的 CloudQueue 上。
在 Azure 中的 Workers Roles 读取此 CloudQueue 之后。

这是个好主意吗 ？
这种方式安全吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T09:23:36.660

如果您使用 HTTPS 将消息发送到队列，这是安全的。如果您有主要或次要访问密钥，您只能读取队列，因此使用 HTTPS 读取也是安全的。

但是为什么要在队列消息中发送访问密钥呢？您没有发送帐户名称，因此这已经是一个问题。但是您的工作人员需要一个帐户名 + 密钥才能从队列中读取，那么为什么不让他们也直接从容器中读取呢？即使您使用不同的存储帐户，也可以将该信息保存在 ServiceConfiguration.cscfg 中的不同设置中

# java - 不同字符的字符串拆分

> ID：11879911
> 
> 赞同：0
> 
> 时间：2012-08-09T08:58:59.667
> 
> 标签：java, string, split

我认为这是一个奇怪的问题。所以这是我的分裂：

```
String s = "asd#asd";
String[] raw1 = s.split("#"); // this has size of two raw[0] = raw[1] = "asd" 
```

然而，

```
String s = "asd$asd";
String[] raw2 = s.split("$"); // this has size of ONE 
```

raw2 未拆分。有谁知道为什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T09:00:35.867

因为`split()`需要一个正则*表达式*，并`$`表示行尾。如果您需要拆分实际上是正则表达式元字符的字符，则需要对其进行转义。

有关正则表达式元字符，请参见[模式](http://docs.oracle.com/javase/6/docs/api/java/util/regex/Pattern.html)。

您可能会发现[StringTokenizer](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/StringTokenizer.html)更适合您的需求。这将获取您应该拆分的字符*列表*，并且不会将它们解释为正则表达式元字符。然而，它使用起来有点冗长和笨拙。正如 Nandkumar 在下面指出的那样，最新的文档指出在新代码中不鼓励这样做。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-09T09:00:14.653

你必须逃避它：

```
String s = "asd$asd";
String[] raw2 = s.split("\\$"); // this has size of TWO 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-09T09:01:03.187

因为`split()`采用正则表达式并`$`匹配行尾。

你必须逃避它：

```
s.split("\\$"); 
```

有关正则表达式的更多信息，请参阅[模式文档](http://docs.oracle.com/javase/6/docs/api/java/util/regex/Pattern.html)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-09T09:00:26.897

你需要转义特殊字符，让它

```
s.split("\\$"); 
```

# javascript - Knockout JS 模板在编辑时使 UI “闪烁”

> ID：11879914
> 
> 赞同：0
> 
> 时间：2012-08-09T08:59:07.320
> 
> 标签：javascript, templates, knockout.js, conditional

我在使用 Knockout JS 时遇到了一个大问题。在我的视图模型中，我有一个名为 Method 的字段，它实际上是另一个视图模型。

这个视图模型可以是三种不同的事物之一（它被映射到域模型中的多态对象）。为了解决这个问题，我使用模板来检查在域模型中选择了哪种类型的方法，然后显示为该类型绑定数据的模板。

检查方法类型的函数如下所示：

```
this.getTemplate = function (data) {
        var method = data.original.get_Method();
        if (method instanceof MyProj.MethodA)
            return "methodA";
        else if (method instanceof MyProj.MethodB)
            return "methodB";
        else if (method instanceof MyProj.MethodC)
            return "methodC";
    } 
```

我绑定模板的标记如下所示：

```
<div data-bind="template: {name: getTemplate($data), data: $data.Method}"></div> 
```

这实际上非常有效，当我通过 UI 中的下拉菜单更改方法类型时，域模型会更新并显示正确的模板。然而，我的问题来了。每个模板都包含许多特定于每种方法类型的不同字段。每当我更改其中一个模板显示的视图模型中的一个值时，UI 都会闪烁，我认为这是因为模板再次被选中。这很烦人，看起来非常糟糕。

关于如何解决这个问题的任何想法？任何帮助将不胜感激！

提前致谢

/比约恩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T11:12:00.603

您是否在 getTemplate 函数中使用了任何 observable。更新该 observable 的值会使模板重新渲染并获得 Flash 效果。

查看此[链接](http://knockoutjs.com/documentation/template-binding.html)部分：“*注 5：动态选择使用哪个模板*”。

# c# - 自定义 ZedGraph LineItem 的符号类型

> ID：11879915
> 
> 赞同：2
> 
> 时间：2012-08-09T08:59:14.610
> 
> 标签：c#, .net, zedgraph

我绘制这样的图表

```
LineItem lineItem = new LineItem("label", pointList, Color.Black, SymbolType.Triangle);
lineItem.Line.IsVisible = _graphLineVisible;
zgc.GraphPane.CurveList.Add(lineItem); 
```

我注意到 SymbolType 有一个名为 的枚举元素`UserDefined`，有没有办法使用它以及如何使用？

理想情况下，我希望能够实现自己的 Symbol 并使用它来绘制 LineItem，这可能吗？我该如何继续这样做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T11:41:33.090

以下是如何根据先前发布的答案创建自定义向下箭头符号的详细说明：

```
var curve = zgc.GraphPane.AddCurve(null, new[] { 2.1, 2.6, 2.8 }, new[] { 1.8, 1.3, 1.1 }, Color.Blue);

curve.Symbol = new Symbol(SymbolType.UserDefined, Color.Red);
curve.Symbol.UserSymbol = new GraphicsPath(
    new[]
        {
            new PointF(-0.6f, -0.6f), new PointF(-0.6f, 0.6f), new PointF(-1.0f, 0.6f), new PointF(0f, 1.6f), 
            new PointF(1.0f, 0.6f), new PointF(0.6f, 0.6f), new PointF(0.6f, -0.6f),
            new PointF(-0.6f, -0.6f)
        },
    new[]
        {
            (byte)PathPointType.Start, (byte)PathPointType.Line, (byte)PathPointType.Line,
            (byte)PathPointType.Line, (byte)PathPointType.Line, (byte)PathPointType.Line,
            (byte)PathPointType.Line, (byte)PathPointType.Line
        }); 
```

运行此代码将产生以下输出：

![带有用户定义的向下箭头符号的图形](../Images/cc442652763a4ebb82b380ac63ff4ed0.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T10:45:27.720

我想出了如何将自定义符号与 LineItem 一起使用，这是如何：

```
Symbol symbol = new Symbol();
symbol.UserSymbol = GetGraphicsPath();
symbol.Size = 5f;

LineItem lineItem = new LineItem("label", pointList, Color.Black, SymbolType.None);     
lineItem.Line.IsVisible = _graphLineVisible; 
lineItem.Symbol = symbol;
zgc.GraphPane.CurveList.Add(lineItem); 
```

其中 GetGraphicsPath() 返回一个自定义的 GraphicsPath 对象，该对象本质上是使用 GraphicsPath.AddLine 方法或任何其他方法创建的，具体取决于您想要的符号类型。

# objective-c - 如何以编程方式将 iPad 应用程序锁定到一个应用程序中？

> ID：11879916
> 
> 赞同：3
> 
> 时间：2012-08-09T08:59:15.270
> 
> 标签：objective-c, ios, ipad

我们正在做一个产品展示 iPad 应用程序，不希望客户能够按主页按钮退出应用程序。我们计划只使用 UIGesture 让管理员用户退出。如何在不安装任何第三方应用程序或配置文件的情况下以编程方式将 iPad 应用程序锁定到一个应用程序中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T09:03:48.563

在 iOS 6 Beta 2 中添加了一个名为 Guided Access 的功能，请参阅[http://www.idownloadblog.com/2012/06/26/ios-6-guided-access/](http://www.idownloadblog.com/2012/06/26/ios-6-guided-access/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T09:14:17.603

*   安装 iPhone 配置实用程序：http: [//support.apple.com/kb/DL1465 ?viewlocale=en_US&locale=en_US](http://support.apple.com/kb/DL1465?viewlocale=en_US&locale=en_US)
*   将属性设置`.mobileconfig`为`SBStoreDemoAppLock``true`
*   在设备上安装移动配置。

移动配置的安装可以使用 iPCU 应用程序或通过在设备上使用 Safari 打开文件来完成。

现在设备处于信息亭模式并且主页按钮被禁用。

删除`.mobileconfig`文件（再次使用 iPCU 应用程序）并重新启动设备以重新启用主页按钮。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T09:12:48.377

我相信这个问题的常见解决方案是覆盖主页和电源按钮的案例。在实践中，您需要一些相当坚固的东西来防止 iPad 被盗，并且在提供电源的同时巧妙地覆盖对底座连接器的访问。

一个快速的谷歌搜索`iPad kiosk case`出现了很多选项。在商店和贸易展览中使用 iPad 作为 PoS 展示非常受欢迎。

# asp.net-mvc - 从 HTML 按钮调用操作

> ID：11879917
> 
> 赞同：0
> 
> 时间：2012-08-09T08:59:28.613
> 
> 标签：asp.net-mvc

我是 MVC 新手，我有多个按钮。每个按钮都会调用自己的动作。如何将操作分配给特定按钮。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T09:05:12.060

如果您正在使用多个提交按钮，这里有一些适合您的东西，

下面是一个带有两个提交按钮的表单。请注意，这两个提交按钮具有相同的名称，即“submitButton”</p>

```
@Html.BeginForm("MyAction", "MyController"){
<input type="submit" name="submitButton" value="Button1" />
<input type="submit" name="submitButton" value="Button2" />
<input type="submit" name="submitButton" value="Button3" />
<input type="submit" name="submitButton" value="Button4" />
} 
```

现在转到控制器，Action 接受一个名为 string stringButton 的输入参数，其余的非常不言自明。

```
public ActionResult MyAction(string submitButton) {
    switch(submitButton) {
        case "Button1":
           // do something here
        case "Button2":
           // do some other thing here
        case "Button3":
           // do some other thing here 33
        case "Button4":
           // do some other thing here 44
        default:
            // add some other behaviour here
    }
...
} 
```

希望这对你有帮助！

[资源](http://yassershaikh.com/how-to-handle-two-submit-buttons-in-html-beginform-in-mvc-3-razor/)

# windows - Getting HTTPS to Work with WCF and a Windows Service

> ID：11879920
> 
> 赞同：0
> 
> 时间：2012-08-09T08:59:35.033
> 
> 标签：windows, wcf, service, https, servicehost

I tried updating the App.config files for the client and service for the MS sample applications in WF_WCF_Samples\WCF\Basic\Services\Hosting\WindowsService\CS\WindowsService.sln so that secure bindings were used but when the client makes the call to the service method an exception is thrown

"An error occurred while making the HTTP request to https:// .... /servicemodelsamples/service. This could be due to the fact that the server certificate is not configured properly with HTTP.SYS in the HTTPS case. This could also be caused by a mismatch of the security binding between the client and the server."

Inner exception "The underlying connection was closed: An unexpected error occurred on a send"

As far as I can see both the server and client configs match and use Transport security mode and the mex endpoint now uses mexHttpsBinding rather than mexHttpBinding with the service behaviour appropriately enabled.

Can someone tell me what is missing or incorrect as I have tried numerous tweaks with no success?

Thanks

The server and client configs are

```
 <?xml version="1.0"?>
<!--Copyright (c) Microsoft Corporation.  All Rights Reserved.-->
<configuration>

  <system.serviceModel>

    <services>
      <service name="Microsoft.Samples.WindowsService.WcfCalculatorService">
        <host>
          <baseAddresses>
            <add baseAddress="https://localhost:8000/ServiceModelSamples/service"/>
          </baseAddresses>
        </host>
        <!-- This endpoint is exposed at the base address provided by host: https://localhost:8000/ServiceModelSamples/service -->
        <endpoint address="" binding="basicHttpBinding" bindingConfiguration="https" contract="Microsoft.Samples.WindowsService.ICalculator"/>
        <!-- The mex endpoint is exposed at https://localhost:8000/ServiceModelSamples/service/mex -->
        <endpoint address="mex" binding="mexHttpsBinding" contract="IMetadataExchange"/>
      </service>
    </services>

    <bindings>
      <basicHttpBinding>
        <!-- Configure BasicHttp binding with Transport security mode and clientCredentialType as None -->
        <binding name="https">
          <security mode="Transport">
            <transport clientCredentialType="None"/>
          </security>
        </binding>
      </basicHttpBinding>
    </bindings>

    <!-- For debugging purposes set the includeExceptionDetailInFaults attribute to true -->
    <behaviors>
      <serviceBehaviors>
        <behavior>
          <serviceMetadata httpsGetEnabled="true"/>
          <serviceDebug includeExceptionDetailInFaults="true"/>
        </behavior>
      </serviceBehaviors>
    </behaviors>

  </system.serviceModel>
</configuration> 
```

and

```
 <?xml version="1.0"?>
<!--Copyright (c) Microsoft Corporation.  All Rights Reserved.-->
<configuration>
  <system.serviceModel>

    <client>
      <endpoint name="" address="https://localhost:8000/servicemodelsamples/service" binding="basicHttpBinding" bindingConfiguration="Binding1" contract="Microsoft.Samples.WindowsService.ICalculator"/>
    </client>

    <bindings>
      <basicHttpBinding>
        <!-- Configure BasicHttp binding with Transport security mode and clientCredentialType as None -->
        <binding name="Binding1">
          <security mode="Transport">
            <transport clientCredentialType="None"/>
          </security>
        </binding>
      </basicHttpBinding>
    </bindings>

  </system.serviceModel>

<startup><supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.0"/></startup></configuration> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T09:01:23.307

mex cant be https

`<endpoint address="mex" binding="mexHttpsBinding" contract="IMetadataExchange"/>`

change to

`<endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange"/>`

# asp.net-mvc - PagedList in MVC3 with IQueryable

> ID：11879921
> 
> 赞同：1
> 
> 时间：2012-08-09T08:59:37.460
> 
> 标签：asp.net-mvc, asp.net-mvc-3, pagedlist

I can't understand what i'm doing wrong. Every time I'm getting this error:

The entity or complex type 'BusinessLogic.CompanyWithDivisionCount' cannot be constructed in a LINQ to Entities query.

I need to get info from 'Company' table and divisions count of each company from 'Division' table, and then make PagedList. Here is my 'Company' table:

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.ComponentModel.DataAnnotations;

using BusinessLogic.Services;
using BusinessLogic.Models.ValidationAttributes;

namespace BusinessLogic.Models
{
    public class Company
    {
        public Company()
        {
            Country = "US";
            Status = true;
        }

        public int Id { get; set; }

        [Required]
        [UniqueCompanyName]
        public string Name { get; set; }

        public string Street { get; set; }
        public string City { get; set; }
        public string State { get; set; }
        public int Zip { get; set; }
        public string Country { get; set; }

        public string ContactInfo { get; set; }

        [Required]
        public DateTime EffectiveDate { get; set; }
        public DateTime TerminationDate { get; set; }

        public bool Status { get; set; }

        [Required]
        public string URL { get; set; }
        public string EAP { get; set; }

        public string EAPCredentials { get; set; }

        public string BrandingColors { get; set; }

        public string Comments { get; set; }
    }
} 
```

Here is my domain model:

```
public class Company
{
    public Company()
    {
        Country = "US";
        Status = true;
    }

    public int Id { get; set; }

    [Required]
    [UniqueCompanyName]
    public string Name { get; set; }

    public string Street { get; set; }
    public string City { get; set; }
    public string State { get; set; }
    public int Zip { get; set; }
    public string Country { get; set; }

    public string ContactInfo { get; set; }

    [Required]
    public DateTime EffectiveDate { get; set; }
    public DateTime TerminationDate { get; set; }

    public bool Status { get; set; }

    [Required]
    public string URL { get; set; }
    public string EAP { get; set; }

    public string EAPCredentials { get; set; }

    public string BrandingColors { get; set; }

    public string Comments { get; set; }
}

public class CompanyWithDivisionCount: Company // I'm using this
{
    public int DivisionCount { get; set; }
} 
```

Here is my controller:

```
public ActionResult CompaniesList(int? page)
{
    var pageNumber = page ?? 1;

    var companies = companyService.GetCompaniesWithDivisionsCount2();

    var model = companies.ToPagedList(pageNumber, PageSize);

    return View(model);
} 
```

And here is my service part:

```
public IQueryable<CompanyWithDivisionCount> GetCompaniesWithDivisionsCount2()
{
    return (from c in dataContext.Companies.AsQueryable()
            select new CompanyWithDivisionCount
            {
                Id = c.Id,
                Name = c.Name,
                Status = c.Status,
                EffectiveDate = c.EffectiveDate,
                URL = c.URL,
                EAP = c.EAP,
                EAPCredentials = c.EAPCredentials,
                Comments = c.Comments,
                DivisionCount = (int)dataContext.Divisions.Where(b => b.CompanyName == c.Name).Count()
            });
} 
```

}

Thanks for help!!!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T12:03:45.707

PagedList 的创建者在这里。这与 PagedList 无关，而是实体框架问题（我不是实体框架方面的专家，因此无法帮助您）。要确认这是真的，请按照以下几行编写单元测试：

```
[Test]
public void ShouldNotThrowAnException()
{
    //arrange
    var companies = companyService.GetCompaniesWithDivisionsCount2();

    //act
    var result = companies.ToList();

    //assert
    //if this line is reached, we win! no exception on call to .ToList()
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T09:33:54.503

如果可能，我会考虑更改您的数据模型，而不是通过名称字符串将公司与部门相关联，而是使用两个对象之间正确维护的外键关系（部门应包含 CompanyID 外键）。这有很多好处（包括性能和数据完整性），并且如果您需要对您的应用程序进行进一步更改（或者如果任何公司决定重新命名它的名称），几乎肯定会让您的生活更轻松。

如果您创建正确的外键关系，那么您的域模型可能看起来像

```
public class Company
{
    ...

    public virtual ICollection<Division> Divisions{ get; set; }

    public int DivisionCount
    {
         get 
         {
              return this.Divisions.Count()
         }
    }

    ...
} 
```

# java - How to reuse/extend closed java webapp (.ear)?

> ID：11879926
> 
> 赞同：0
> 
> 时间：2012-08-09T09:00:09.880
> 
> 标签：java, web-services, glassfish-3, ear

I've got webapp project written in java (.ear). It is running under glassfish-3 server. I really have to extend its functonality. but there is no way to change even a line of it. Is it possible to wrap that webapp or anything else (it has no API, only html for user)? I know it's very generic, but i cannot provide a code or other useful things.

A similar situation to mine would be (expect my case needs much SECURITY because of sensitive data)... Let's have a blog application (this would be the java closed webapp), which allows everything You expect from an blog app, BUT one instance handles one user. You would like to allow new user to create blog (new instances of blog app?). The instances should be isolated each other.. but it's simple to achieve. Different instance different db and so on..

I do not expect solution (because of my generic description) but direction where to go. I'm java novice, but i can read and reason so.. :)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T09:10:45.863

.ear 只是一个压缩文件，请参阅文档[http://en.wikipedia.org/wiki/EAR_(file_format](http://en.wikipedia.org/wiki/EAR_(file_format) )。您可以随时解压缩并获取所有文件。JSP 和配置文件可以更改，但不能更改 java 类（除非您反编译它们）。

这不是一个完整的解决方案，但希望能在某个方向暗示......

# signalr - SignalR Disconections

> ID：11879927
> 
> 赞同：2
> 
> 时间：2012-08-09T09:00:12.147
> 
> 标签：signalr, signalr-hub

I am using Signalr in an application I'm writing and storing all the user connections in a concurrent dictionary

```
ConcurrentDictionary<string, User> _users = new ConcurrentDictionary<string, User>(); 
```

e.g. [https://github.com/SignalR/SignalR/blob/master/samples/SignalR.Hosting.AspNet.Samples/Hubs/ShapeShare/ShapeShare.cs](https://github.com/SignalR/SignalR/blob/master/samples/SignalR.Hosting.AspNet.Samples/Hubs/ShapeShare/ShapeShare.cs)

I have implemented the IDisconnect interface on my Hub and I'm removing users from the dictionary when they disconnect

I am wondering how reliable the Disconnect method really is? Does it capture all the different ways that a user could diconnect? I dont want the dictionary to grow and grow indefinitely

I was thinking of maybe having a timer to periodically traverse the dictionary and remove users who havent had any recent activity

Is this necessary? Can I rely on the disconnect method?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T10:36:47.253

查看[https://github.com/SignalR/SignalR/wiki/Configuring-SignalR](https://github.com/SignalR/SignalR/wiki/Configuring-SignalR)，有以下设置：

DisconnectTimeout KeepAlive 和 Heatbeat 间隔

这些都可以用来帮助维护您的字典。

根据我的经验，正常断开连接似乎在 signalR 上运行良好（win-apps 仍然存在问题），如果它在几分钟内不正常断开连接，则连接将超时，并且断开连接方法将触发并将其从字典中删除，就像 Drew 说的那样。

您可以创建一个向所有客户端发送消息并记录返回的连接 ID 的方法，然后删除任何旧的条目，但实际上断开方法确实可以工作/自行解决，如果您真的这样做，我只会实现心跳间隔需要密切关注连接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T16:41:32.413

如果它没有触发，那就是一个错误，您应该[向 GitHub 上的 SignalR 项目报告问题](https://github.com/SignalR/SignalR/issues)。[这是目前断开连接的未解决问题列表](https://github.com/SignalR/SignalR/issues/search?q=disconnect&state=open&assignee=)。

请注意差异。运输有差异。断开检测逻辑等，根据用户使用的传输方式，您将看到差异。Disconnect 何时触发的模式，但它最终*应该*为所有传输触发。

# php - how to hide if empty when the content type field number of values is unlimited

> ID：11879929
> 
> 赞同：0
> 
> 时间：2012-08-09T09:00:17.000
> 
> 标签：php, open-source, drupal-6, drupal-views

i am having problems hiding the label of the field in views if the field is empty when it accepts unlimited number of values. any idea how to resolve this? i tried this

```
 function alter_form_preprocess_views_view_fields(&$vars) {
   // Remove labels if value is empty.
   foreach ($vars['fields'] as $id => $field) {
     if (!$field->content) {
       unset($vars['fields'][$id]);
     }
   }
 } 
```

it didn't work

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T09:26:18.757

我所做的是为每个字段创建一个新字段作为标记，如果它没有任何值，我想隐藏它的标签，并为每个标记字段创建一个 tpl 文件并执行此操作：

```
<?php
    if(!empty($row->{node_data_field_d_a_name_field_d_a_name_value}[0]['value'])){
        print $output;
    }
?> 
```

从技术上讲，它不是一个标签，但就像它一样工作，它解决了我的问题。

注意：我从每个字段中删除了标记和具有值的字段，这样我就不会为同一字段设置多个标签。

# c# - 如何通过 Agility 将 Html 解析为 C# 中的字符串？

> ID：11879939
> 
> 赞同：0
> 
> 时间：2012-08-09T09:00:45.720
> 
> 标签：c#, html, parsing, html-agility-pack

任何人都可以帮助将带有敏捷包的 Html 解析为单个字符串吗？

我正在尝试解析类似于以下格式的 Html，

```
<blockquote>\n
    <p>Here is the first collection:<\/p>\n 
        <ol>\n 
            <li>List1<\/li>\n 
            <li>List2<\/li>\n 
            <li>List3<\/li>\n 
        <\/ol>\n 
    <p>Here is the second collection:<\/p>\n 
        <ol>\n 
            <li>List1<\/li>\n 
            <li>List2<\/li>\n 
        <\/ol>\n 
<\/blockquote> 
```

我尝试使用以下方法来获取“p”和“li”和“blockquote”。但是，方法 .Descendants 为“p”、“li”和“blockquote”创建了单独的集合，但我需要将单个元素按顺序放置并将它们存储在单个字符串中。

```
 IEnumerable<HtmlNode> h3Tags = document.DocumentNode.Descendants("p"); foreach (var h3tag in h3Tags) {} 
```

例如，我想要我的字符串存储，“这是第一个集合：List1 List2 List3 这是第二个集合 List1 List2”。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T09:06:38.153

使用*blockquote*节点的*InnerText*属性。那应该以预期的顺序返回字符串。

 *做类似的事情

```
var blockQuoteNode = document.DocumentNode.Descendants("blockquote").First(); // or do a document.DocumentNode.SelectSingleNode(//put the exact xpath value of the blockquote element here...)
var stringsYouNeed = blockQuoteNode.InnerText; 
```*

# mysql - Which NoSql to Use for storing billions of Integer pair data?

> ID：11879940
> 
> 赞同：3
> 
> 时间：2012-08-09T09:00:55.490
> 
> 标签：mysql, nosql

Right now I have table in Mysql with 3 columns.

```
DocId             Int
Match_DocId       Int
Percentage Match  Int 
```

I am storing *document id* along with its near duplicate *document id* and *percentage* which indicate how closely two documents match.

So if one document has 100 near duplicates, we have 100 rows for that particular document.

Right now, this table has more than 1 billion records for total of 14 millions documents. I am expecting total documents to go upto 30 millions. That means my table which stores near duplicate information will have more than 5 billions rows, may be more than that. (Near duplicate data grows exponentially compare to total document set)

Here are few issues that I have:

1.  Getting all there records in mysql table is taking lot of time.
2.  Query takes lot of time as well.

Here are few queries that I run:

*   Check if particular document has any near duplicate. (this is relatively fast, but still slow)

*   Check for given set of documents, how many near duplicates are there in each percentage range (Percentage range is 86-90, 91-95 , 96-100)?

    This query takes lot of time. Most of the time it fails. I am going group by on percentage column.

**Can this be managed with any available NoSql solution?**

I am skeptical for SQL query support for NoSql solutions as I need group by support while querying data.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T10:16:44.353

### MySQL

您可以尝试使用当前的 MySql 解决方案进行分片，即将您的大型数据库拆分为较小的独特数据库。这样做的问题是您一次只能使用一个分片，这会很快。如果您计划跨多个分片使用查询，那么它会非常缓慢。

### NoSql

[Apache Hadoop](https://hadoop.apache.org/)堆栈值得一看。有几个系统允许您执行稍微不同的查询。一个好处是它们都倾向于在彼此之间进行良好的互操作。

> 检查特定文档是否有任何近乎重复的内容。（这相对较快，但仍然很慢）

[HBase](https://hbase.apache.org/)可以为大表完成这项工作。

> 检查给定的一组文件，在每个百分比范围内有多少接近重复的文件？（百分比范围为 86-90、91-95、96-100）

这应该非常适合[Map-Reduce](https://hadoop.apache.org/mapreduce/)

* * *

还有许多其他解决方案，请参阅[此链接](http://nosql-database.org/)以获取其他 NoSql 数据库的列表和简要说明。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T09:25:15.347

[我们对Redis](http://redis.io)有很好的经验。它很快，可以根据您的需要变得可靠。其他选项可能是[CouchDB](http://couchdb.apache.org/)或[Cassandra](http://cassandra.apache.org/)。

# pci-dss - Pci- dss section 10

> ID：11879945
> 
> 赞同：-1
> 
> 时间：2012-08-09T09:01:07.683
> 
> 标签：pci-dss, pci-compliance

There are plenty of log reporting tool but I am having trouble on choosing. Can anyone advice me a tool for audit-log monitoring?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T22:39:00.850

这是对哪种工具最好没有正确答案的问题之一——您应该使用适合您组织的任何工具。

有大量商业和开源工具可用于满足 PCI 日志记录要求。话虽如此，我最近查看的开源工具并未涵盖基本版本中的所有 PCI 要求，因此请确保您了解这一点。商业工具也是如此，有些人会将满足 PCI 视为仅在其更高层产品中可用的功能。

要查看的关键要求是：

*   收集日志的选项（推/拉/代理等）
*   存储选项 - 您需要至少 3 个月的在线可用时间和一年的可用时间
*   审查功能 - 每天查看日志是不切实际的，那么您可以设置哪些警报以使其自动化？
*   日志保护 - 需要某种完整性监控（要求 10.5.5）以确保日志不会在不知不觉中被更改

如果您的日志记录工具自动反馈到您的事件响应流程中，您的 QSA 很可能会给您额外的奖励分数 - 如果它增加了他们对您的流程的信心，这是值得的！

# eclipse-plugin - Project/Package Explorer like plug-in in RCP

> ID：11879955
> 
> 赞同：0
> 
> 时间：2012-08-09T09:01:43.120
> 
> 标签：eclipse-plugin, eclipse-rcp, explorer

I've been researching online on how to create my own project explorer using Eclipse RCP and SWT and was wondering if there is an existing plug-in available?

I tried copying the example from a book about adding org.eclipse.jdt.ui.PackageExplorer but it doesn't exist in my list of packages so I tried searching for similar errors online and this is what I found: [https://bugs.eclipse.org/bugs/show_bug.cgi?id=351875](https://bugs.eclipse.org/bugs/show_bug.cgi?id=351875)

Any suggestions?

part of the code: (plugin.xml)

```
<perspectiveExtension
        targetID="SampleTwo.perspective">
     <view 
           id="SampleTwo.view"
           minimized="false"
           ratio="0.5"
           relationship="left"
           relative="org.eclipse.jdt.ui.PackageExplorer">
     </view>
     <view
           id="org.eclipse.jdt.ui.PackageExplorer"
           minimized="false"
           ratio="0.5"
           relationship="right"
           relative="SampleTwo.view">
     </view>
  </perspectiveExtension> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T11:46:11.007

这将帮助你[http://scribledideas.blogspot.com/](http://scribbledideas.blogspot.com/)

# apache - How to add custom jar in Apache Ivy

> ID：11879959
> 
> 赞同：2
> 
> 时间：2012-08-09T09:01:56.827
> 
> 标签：apache, maven, ant, ivy

Our application has a custom jar trades.jar and I want to upload it to local Apache Ivy repository. How should I do it.

I know in maven it can be done using command 'mvn deploy:deploy'

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T20:44:30.103

有关常春藤发布示例，请参见：

*   [使用常春藤的问题：发布任务](https://stackoverflow.com/questions/8304562/issues-using-ivypublish-task/8317109#8317109)

如果您想使用命令行解决方案：

*   [本地存储库的好常春藤教程？](https://stackoverflow.com/questions/1200762/good-ivy-tutorial-for-local-repository/2279596#2279596)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T12:17:56.820

与 ant/ivy 非常相似，您正在寻找[ivy:publish](http://ant.apache.org/ivy/history/2.2.0/use/publish.html)

# oop - 以一致和精确的方式命名类方法

> ID：11879960
> 
> 赞同：1
> 
> 时间：2012-08-09T09:02:00.713
> 
> 标签：oop, matlab

我在 matlab 中编写了一个简单的标签管理器类，我正在努力（或者可能是过度思考 ;-) 适当地命名我的类方法。该类称为`tag_manager`. 这是我关于清晰的 API 和实现的问题：

*   要添加标签，我应该调用该方法`add`还是`add_tag`？删除也是如此。
*   要重命名标签，我应该调用该方法`rename_tag`还是`rename`？

我总是想添加`_tag`后缀，以便清楚方法的作用。

*   `nbr_tags`是一个计数器，用于跟踪当前存储的标签数量。我有时需要访问这个数字，所以我没有通过标签列表计算条目数，而是想通过类方法返回这个值。是`return_nbr_tags`要走的路，还是可以更简洁地命名？
*   很多时候，我需要知道标签的索引，这反过来又被用来在其他矩阵中查找一些元素。为了防止代码过长，我把这个方法简单地`inx()`称为`return_tag_index`. 我知道今天我确实知道`inx()`代表什么，但两周后我可能会记不住。那么命名这些方法的最佳方式是什么？

这是类定义：

```
properties (SetAccess = private, GetAccess = public)
    tag_names = {}; % store the tags
    tag_rel_indx = []; % the relative tag index
    tag_abs_indx = []; % the absolute tag index
end

properties (SetAccess = private, GetAccess = public, Hidden = true)
    nbr_tags = 0;
    abs_tag_counter = 0;
end

methods
    % add single tag to list. should be 'add' or 'add_tag'?
    function obj = add_tag(obj, name)
    end

    % remove single tag from list
    function obj = remove_tag(obj, name)
    end

    % short-cut for 'return_tag_index'
    function indx = inx(obj, name)
        indx = return_tag_index(obj, name);
    end

    % rename tag
    function obj = rename_tag(obj, old_name, new_name)
    end

    % re-order tags by name
    function obj = reorder_by_name(obj)
    end

    % return number of tags stored in tagmanager
    function nbr_tags = return_nbr_tags(obj)
        nbr_tags = obj.nbr_tags;
    end

end 
```

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T11:54:40.520

在我看来，并且之前不得不使用其他人的代码，我发现当方法/函数名称清晰且具有描述性时非常有帮助。我宁愿有人对他们的函数名称冗长，但同时你又不想对它过于冗长。

例如，您的标签数量返回功能。我个人会这样命名`GetNumberOfTags`。对于我用来设置特定值的函数，我使用`SetParticularValue`.

不过，我确实远离下划线。这可能只是我从工作中的编码实践中养成的习惯。

要记住的最重要的事情是在整个课堂上保持一致。如果函数不完全清楚，不要忘记提供有用的注释 =P 当你必须返回并重新编写某人的代码并且关于正在使用的变量和函数的内容的信息真的很脏时，这太可怕了真的是为了做;)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T12:27:43.257

在使用高度明确的函数名称（这对理解代码非常有帮助）和创建易于开发和使用的代码之间总是需要权衡取舍。如果您需要为方法创建快捷方式名称，这表明您已经向显式函数名称迈进了一步。

在您的情况下，由于您正在创建标签管理器，所以我会`tag`从方法中删除，而是开始将标签管理器类实例化为 的约定`tags = tagManager;`，这样添加标签的方法就可以写成`tags.add(...)`或`add(tags,...)`。但是，当您添加标签以外的其他内容时，添加更明确的方法名称会有所帮助，例如`tags.addGroup`. 然后你的索引方法就变成`index(tags,name)`了，在我看来，它既简短又清晰。

PS：为什么要有`returnNumberOfTags`方法？您可以从属性中读取，并在必要时添加 set/get 方法。

# asp.net-mvc - ASP.NET MVC 打开一个 .xls 文件

> ID：11879965
> 
> 赞同：1
> 
> 时间：2012-08-09T09:02:17.767
> 
> 标签：asp.net-mvc

我必须从我页面的表格中显示的数据创建一个 .xls 文件。当用户单击“导出”按钮时会发生这种情况。我有以下代码，它创建得很好。现在，我想在同一次点击中打开这个文件。我应该如何打开它让用户看到它？

```
 string filePath = "C:/Upload/Stats_" + viewModel.SelectedTest.ToString() + ".xls";
            //write the header
            using (var pw = new StreamWriter(filePath, true))
            {
                pw.WriteLine(String.Format("{0}\t{1}\t{2}\t{3}\t{4}\t{5}\t{6}\t{7}\t{8}\t{9}", "Month", "Total Users", "K",
                                           "T", "G", "Detail", "GS",
                                           "BI", "GHF","A"));

                //write to the file

                for (int i = 0; i < 12; i++)
                {
                    pw.WriteLine(
                        String.Format("{0}\t{1}\t{2}\t{3}\t{4}\t{5}\t{6}\t{7}\t{8}\t{9}", viewModel.Months[i],
                                      viewModel.M[i], viewModel.MKau[i],
                                      viewModel.MTech[i], viewModel.MGew[i],
                                      viewModel.MDet[i], viewModel.MGes[i],
                        viewModel.MBea[i], viewModel.MGesHf[i],viewModel.MAug[i]));
                    pw.Flush();
                }

                pw.Close();
            } 
```

在这里我想打开它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T10:20:43.593

I had the same 'requirement' to be able to export to xls, and instead I gave the client an export to csv, which will open in excel if you are on a machine with excel installed but is also available to other systems. I achieved it like this.

Create an extension method that supports .AsCsv, which was taken largely from [Mike Hadlow's](http://mikehadlow.blogspot.com/2008/06/linq-to-csv.html) implementation

```
public static class EnumerableExtensions
{
    public static string AsCsv<T>(this IEnumerable<T> items) where T : class
    {
        var csvBuilder = new StringBuilder();
        var properties = typeof(T).GetProperties();
        foreach (T item in items)
        {
            string line = string.Join(",", properties.Select(p => p.GetValue(item, null).ToCsvValue()).ToArray());
            csvBuilder.AppendLine(line);
        }

        return csvBuilder.ToString();
    }

    private static string ToCsvValue<T>(this T item)
    {
        if (item is string)
        {
            return string.Format("\"{0}\"", item.ToString().Replace("\"", "\\\""));
        }

        double dummy;
        if (double.TryParse(item.ToString(), out dummy))
        {
            return string.Format("{0}", item.ToString());
        }

        return string.Format("\"{0}\"", item.ToString());
    }

} 
```

Then you would need set your controller method to return a `FileContentResult` and have some logic like this within the controller method:

```
var outputModel = viewModel.ToList().Select(model => new
{
                Months = model.Months
                M = model.M[i],
                MKau= model.MKau,
                MTech = model.MTech,
                MGew = model.MGew,
                MDet = model.MDet,
                MGes = model.MGes,
                MBea= model.MBea,
                MGesHf= model.MGesHf
});

string csv = "\"Month\",\"Total Users\",\"K\",\"T\",\"G\",\"Detail\",\"GS\",\"BI\",\"GHF\",\"A\"" 
                        + System.Environment.NewLine
                        + outputModel.AsCsv();
string fileName = "Stats_" + viewModel.SelectedTest.ToString() + ".csv"

return this.File(new System.Text.UTF8Encoding().GetBytes(csv), "text/csv", fileName); 
```

# android - invalidateOptionsMenu 不会从片段中调用

> ID：11879966
> 
> 赞同：11
> 
> 时间：2012-08-09T09:02:23.753
> 
> 标签：android, android-actionbar

我有一个片段需要构建自己的操作栏：

```
public class CalendarFragment extends Fragment {

public CalendarFragment() {
}

@Override
public void onActivityCreated(Bundle savedInstanceState) {
    super.onActivityCreated(savedInstanceState);
    getActivity().supportInvalidateOptionsMenu();
    setHasOptionsMenu(true);
}

@Override
public void onCreateOptionsMenu(Menu menu, MenuInflater inflater) {
    inflater.inflate(R.menu.calendar_menu1, menu);
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    return super.onOptionsItemSelected(item);
}

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    TextView textView = new TextView(getActivity());
    textView.setGravity(Gravity.CENTER);
    textView.setText("Calendar Fragment");
    return textView;
} 
```

}

问题是它没有使用 calendar_menu1 中的项目创建新菜单，而只是将其中的项目添加到旧菜单中，好像 invalidateOptionsMenu 不起作用（我也尝试过 getActivity().invalidateOptionsMenu()）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-10-03T07:09:25.190

您必须调用 onCreate()：

```
setHasOptionsMenu(true); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-11T14:36:58.953

这是正常的，查看[MenuInflater](http://developer.android.com/reference/android/view/MenuInflater.html#inflate%28int,%20android.view.Menu%29)的 javadoc ，“*项目和子菜单将添加到此菜单*”：

```
public void inflate (int menuRes, Menu menu) 
Inflate a menu hierarchy from the specified XML resource. Throws InflateException if there is an error.

Parameters
menuRes  Resource ID for an XML layout resource to load (e.g., R.menu.main_activity) 
menu  The Menu to inflate into. The items and submenus will be added to this Menu. 
```

您之前是否尝试过调用`menu.clear()`来扩充您的片段菜单？

```
@Override
public void onCreateOptionsMenu(Menu menu, MenuInflater inflater) {
    menu.clear();
    inflater.inflate(R.menu.calendar_menu1, menu);
} 
```

# c# - 将基于回调的异步方法转换为等待任务的最佳方法

> ID：11879967
> 
> 赞同：88
> 
> 时间：2012-08-09T09:02:27.003
> 
> 标签：c#, asynchronous, task-parallel-library, c#-5.0

将使用回调的“经典”异步方法转换/包装为返回（等待）任务的东西的最佳方法是什么？

例如，给定以下方法：

```
public void GetStringFromUrl(string url, Action<string> onCompleted); 
```

我知道将其包装到返回任务的方法中的唯一方法是：

```
public Task<string> GetStringFromUrl(string url)
{
     var t = new TaskCompletionSource<string>();

     GetStringFromUrl(url, s => t.TrySetResult(s));

     return t.Task;
} 
```

这是实现这一目标的唯一方法吗？

有没有办法在任务本身中包装对 GetStringFromUrl(url,callback) 的调用（即调用本身将在任务内部运行而不是同步运行）

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-08-09T12:23:25.850

您的代码简短，可读且高效，因此我不明白您为什么要寻找替代方案，但我想不出任何东西。我认为你的方法是合理的。

我也不确定为什么您认为原始版本中的同步部分是可以的，但您想在`Task`基于 - 的版本中避免它。如果您认为同步部分可能需要太长时间，请为该方法的两个版本修复它。

但是，如果您只想在版本中异步运行它（即在 上`ThreadPool`）`Task`，您可以使用[`Task.Run()`](http://msdn.microsoft.com/en-us/library/hh194918%28v=vs.110%29)：

```
public Task<string> GetStringFromUrl(string url)
{
    return Task.Run(() =>
    {
        var t = new TaskCompletionSource<string>();

        GetStringFromUrl(url, s => t.TrySetResult(s));

        return t.Task;
    });
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-09T22:20:48.123

假设回调只处理成功的情况，您假设的实现对此非常好。如果在 GetStringFromUrl 实现的异步基础中发生异常，当前会发生什么？他们没有真正的方法将其传播到 Action 回调......他们是否只是吞下它并返回 null 或其他东西？

我唯一推荐的是遵循使用 XXXAsync 后缀命名此类异步方法的新约定。

# c# - DockLeft 自定义大小

> ID：11879968
> 
> 赞同：6
> 
> 时间：2012-08-09T09:02:31.310
> 
> 标签：c#, .net, dockpanel-suite

我正在尝试将 DocContent DockLeft 设置为自定义大小，但它不起作用。谁能建议如何做到这一点？
我正在测试这段代码，但它最终以默认宽度 404 而不是我设置的 700 结束。

```
dockPanelMain.SuspendLayout(true);
DockContent myContent = new MenuForm();
myContent.ShowHint = WeifenLuo.WinFormsUI.Docking.DockState.DockLeft;
myContent.Show(dockPanelMain);
dockPanelMain.DockWindows[WeifenLuo.WinFormsUI.Docking.DockState.DockLeft].Width = 700;
dockPanelMain.ResumeLayout(true, true); 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-03-28T07:54:41.570

**DockLeftPortion** 左侧停靠窗口的大小。值 < 1 以指定部分的大小；value > 1 以像素为单位指定大小。

# php - 加入MYSQL和PHP

> ID：11879969
> 
> 赞同：0
> 
> 时间：2012-08-09T09:02:35.630
> 
> 标签：php, mysql, sql

我想从三个表中获取数据`Products`，`Attributes`并且`features` 一个产品可能具有多个功能和属性

我正在使用查询

```
select * 
from products p, features f, attributes a 
where p.id =1 and p.id = f.id and p.id = a.id 
```

我想知道查询是否正常？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T09:05:49.877

这是内连接，如果你也想得到没有特征或属性的产品，你需要使用`LEFT JOIN`. 并且您需要使用外键进行连接，例如`p.feature_id`和`p.attribute_id`。

```
SELECT * 
FROM products p
LEFT JOIN features f ON p.feature_id = f.id
LEFT JOIN attributes a ON p.attribute_id = a.id
WHERE p.id = 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T09:06:01.713

您可能希望通过将连接编写为 ANSI 来使其更易于阅读（我知道，提示 ANSI 与旧语法注释:)）

```
select 
    * 
from 
    products p
        left join features f
            on p.id=f.id
        left join attributes a
            on p.id=a.id 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T09:09:43.983

您正在使用`ANSI SQL-89`语法。但我会建议使用`ANSI SQL-92`语法。示例如下：

```
SELECT * 
FROM products p 
         INNER JOIN features f 
                ON p.id = f.id 
         INNER JOIN attributes a 
                ON p.id = a.id
where p.id =1 
```

这样，您必须明确定义它们的关系（*子句`ON`）*以避免语法错误。语法容易出错，`ANSI SQL-89`您可能不会注意到它，因为它不会产生错误。例子

```
SELECT * 
FROM products p, features f, attributes a
where p.id =1 
```

如果不定义关系字段，它仍然会执行，但会给你无效的结果。从`INNER JOIN`, 现在`CROSS JOIN`

***附加信息***

        **[在这里阅读一些东西](https://stackoverflow.com/questions/11768587/on-is-part-of-syntax/11768715#11768715)**
        **[MySQL JOIN 教程](http://mysqljoin.com/)**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T09:05:35.473

不完全是，你的价值观颠倒了

```
SELECT * FROM
  products   p,
  features   f,
  attributes a
WHERE
  p.id = 1    AND
  f.id = p.id AND
  a.id = p.id 
```

但是，它不会满足您的要求，最好在这里执行三个查询 IMO。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-09T09:15:36.813

对于必须获取所有三个表的数据的此类要求，您应该使用内连接。例如：

```
SELECT p.prduct_id,p.product_name,a.attribute,f.feature
      FROM product AS p
      INNER JOIN attribute AS a ON ( p.product_id = a.attribute_id ) 
      INNER JOIN feature AS f ON ( a.id = f.feature_id ) 
```

像上面的查询一样，您应该在父表产品的属性和特征表中有外键。

# java - Flyway - oracle PL/SQL 过程迁移

> ID：11879973
> 
> 赞同：1
> 
> 时间：2012-08-09T09:02:51.123
> 
> 标签：java, oracle, flyway

在不重复代码的情况下，更新 schema_version 表并在 flyway 中执行修改后的 PL/SQL 包/过程的更好方法是什么？

我的示例需要为每个 PL/SQL 代码修改创建一个类文件

```
public class V2_1__update_scripts extends AbstractMigration {
    // update package and procedures
} 
```

AbstractMigration 类执行**db/update**文件夹中的文件：

```
public abstract class AbstractMigration implements SpringJdbcMigration {
    private static final Logger log = LoggerFactory.getLogger(AbstractMigration.class);

    @Override
    public void migrate(JdbcTemplate jdbcTemplate) throws Exception {
        Resource packageFolder = new ClassPathResource("db/update");
        Collection<File> files = FileUtils.listFiles(packageFolder.getFile(), new String[]{"sql"}, true);
        for (File file : files ) {
            log.info("Executing [{}]", file.getAbsolutePath());
            String fileContents = FileUtils.readFileToString(file);
            jdbcTemplate.execute(fileContents);
        }
    }
} 
```

有没有更好的方法来执行 PL/SQL 代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-01T20:26:11.553

I wonder if it's better to duplicate the code into the standard migrations folder. It seems like with the given example you wouldn't then be able to migrate up to version N of the db, as some prior version would execute all the current version of the pl/sql. I'd be interested to see if you settled on a solution for this.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T08:31:07.290

没有您错过的内置支持或其他命令。

在我的脑海中，我会考虑您在此处介绍的方式或使用生成器在 SCM 提交后生成新的迁移 sql 文件。

让我们看看其他人是否找到了更好的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-10-20T19:51:48.217

撰写本文时的 Flyway 版本 (v4.2.0) 支持专为此类情况设计的可重复脚本的概念。基本上，任何具有“创建或替换”语义的脚本都是候选脚本。

只需将您的脚本命名为`R__mypackage_body.sql`或您希望可重复脚本的任何前缀。有关更多信息，请参阅[基于 Sql 的迁移](https://flywaydb.org/documentation/migration/sql)和可[重复迁移](https://flywaydb.org/documentation/migration/repeatable)。

# jquery - jQuery中的表格行切换

> ID：11879980
> 
> 赞同：1
> 
> 时间：2012-08-09T09:03:10.447
> 
> 标签：jquery

我已经被这个问题困扰了一段时间了。我知道要使表格行顺利动画，您需要`div`s. 我遇到了这个解决方案，我可以隐藏`tablerow`我想要的，但我不能让它再次出现。

我需要一些 if 解决方案或一些切换解决方案。

HTML：

```
<table>
    <tbody>
        <tr>
            <td class="clickme">
                Sample text
            </td>
            <td class="clickme">$10</td>
            <td class="clickme">$100</td>
            <td class="clickme">$0</td>
        </tr>
        <tr class="hideme">
            <td colspan="4">
                <div>
                    Sample text, sample text, sample text, sample text, sample text, sample text
                </div>
            </td>
        </tr>
        <tr>
            <td class="clickme">
                Sample text
            </td>
            <td class="clickme">$10</td>
            <td class="clickme">$100</td>
            <td class="clickme">$0</td>
        </tr>
        <tr class="hideme">
            <td colspan="4">
                <div>
                    Sample text, sample text, sample text, sample text, sample text, sample text
                </div>
            </td>
        </tr>
        <tr>
            <td class="clickme">
                Sample text
            </td>
            <td class="clickme">$10</td>
            <td class="clickme">$100</td>
            <td class="clickme">$0</td>
        </tr>
        <tr class="hideme">
            <td colspan="4">
                <div>
                    Sample text, sample text, sample text, sample text, sample text, sample text
                </div>
            </td>
        </tr>
        <tr>
            <td class="clickme">
                Sample text
            </td>
            <td class="clickme">$10</td>
            <td class="clickme">$100</td>
            <td class="clickme">$0</td>
        </tr>
        <tr class="hideme">
            <td colspan="4">
                <div>
                    Sample text, sample text, sample text, sample text, sample text, sample text
                </div>
            </td>
        </tr>
    </tbody>
</table> 
```

查询：

```
$('.hideme').find('div').hide();
$('.clickme').click(function() {
    $(this).parent().next('.hideme').find('div').slideToggle(500);
    return false;        
}); 
```

* * *

正确的标记和 Jquery 已更新。最终的 JSFiddle：http: [//jsfiddle.net/NVx4S/21/](http://jsfiddle.net/NVx4S/21/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T17:58:41.020

```
<table>
    <tbody>
        <tr>
            <td id="content-1" class="clickme">
                Sample text
                <!-- <a href="#content-1" class="clickme">Sample text</a> -->
            </td>
            <td>$10</td>
            <td>$100</td>
            <td>$0</td>
        </tr>
        <tr>
           <td colspan="4">
               <div id="slide-content-1">
                  Sample text, sample text, sample text, sample text, sample text, sample text
               </div>
           </td>
        </tr>
    </tbody>
</table>​ 
```

* * *

```
 $('.clickme').click(function() {
        //$(this.hash).slideToggle(500);
        $('#slide-'+this.id).slideToggle(500);
        return false;        
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T13:38:58.517

我稍微编辑了你的 JSFiddle。它对你有帮助吗？

[http://jsfiddle.net/NVx4S/7/](http://jsfiddle.net/NVx4S/7/)

# jquery - jquery validate插件高亮错误

> ID：11879981
> 
> 赞同：0
> 
> 时间：2012-08-09T09:03:13.603
> 
> 标签：jquery, jquery-plugins

我在一个 td 中有两个文本框（td 是父级）。我的验证亮点是：

```
 unhighlight: function(element) {
  $(element).parent().removeClass('error'); 
```

我的CSS是：

```
.error {background-color:#F00;} 
```

两者都必须不为空。

当两者都无效时， td 元素变为红色。但是当一个有效而另一个无效时，td 变为白色。

我该如何解决这个问题，以便如果至少一个文本框无效，则整个 td 元素都会突出显示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T09:55:13.043

在删除“错误”类之前，您必须验证其他文本框（元素）。假设您的文本框是一个输入，一个测试兄弟元素内是否有文本的小示例将如下所示：

 `````
unhighlight: function(element) {
    if ($(element).siblings('input').val() != '') {
        $(element).parent().removeClass('error');
    }
} 
`````

# javascript - Highcharts 无法正常工作

> ID：11879986
> 
> 赞同：0
> 
> 时间：2012-08-09T09:03:32.833
> 
> 标签：javascript, highcharts

好的，

所以我有这个图表 [http://jsfiddle.net/7bftp/](http://jsfiddle.net/7bftp/)

我将左 Y 图例最大值设置为 100，但显示为 150：/

![我需要最多达到 100](../Images/3aa0daf3251b23499533502ba3ca02b6.png)

它必须是 100，因为它代表 %。

第二个问题，为什么我上面没有条的总和？2323+125 应该给我 2448 以上的第一个酒吧

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T09:22:47.890

您还必须调整其他 y 轴的最大值

[http://jsfiddle.net/diode/7bftp/1/](http://jsfiddle.net/diode/7bftp/1/)

```
...
...
yAxis: [{
        min: 0,
        max: 4000,
...
...
...
        {
        min: 0,
        max: 100,
... 
```

...

# html - 如何调试tabindex

> ID：11879995
> 
> 赞同：18
> 
> 时间：2012-08-09T09:03:56.047
> 
> 标签：html, debugging, tabindex

Web 浏览器是否有任何工具或插件来调试`tabindex`功能？似乎`tabindex`属性是正确的，但它的行为不像预期的那样。还是我做错了什么？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2017-06-16T11:01:44.640

您可以在 Chrome、Firefox 和 IE 中使用开发人员工具，方法是按下`F12`并导航到控制台选项卡，然后插入以下内容：

`document.addEventListener('keyup', function() {console.log(document.activeElement)})`

现在，当您浏览可聚焦项目时，如果您有一组，`activeElement`包括它的`tabindex`，将被打印到控制台。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-08-09T09:09:37.807

如果您使用 FireFox，请获取[Webdeveloper 工具栏](https://addons.mozilla.org/en-US/firefox/addon/web-developer/)。您可以显示选项卡索引，这可以帮助您调试。

在这里可以找到该选项：

![在此处输入图像描述](../Images/13c84b37b4e6c98b3f3a5e92990014a6.png)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-10-28T10:52:50.423

在 Chrome 中，您可以右键单击元素并从上下文菜单中选择“检查”。然后切换到控制台并输入`$0.tabIndex`.

解释：$0 - $4 是指您检查过的最后 4 个元素。`tabIndex`是 DOM API 的标准属性`HTMLEelement`。

请参阅[https://developers.google.com/web/tools/chrome-devtools/console/command-line-reference](https://developers.google.com/web/tools/chrome-devtools/console/command-line-reference)

# matlab - 以特定频率分析时间序列

> ID：11879996
> 
> 赞同：0
> 
> 时间：2012-08-09T09:04:02.503
> 
> 标签：matlab, signal-processing

我有一个很长的水温数据集：

```
t = 1/24:1/24:365;
y = 1 + (30-1).*rand(1,length(t));
plot(t,y) 
```

该系列延续一年，每天的测量次数为 24 次（即每小时一次）。我希望水温遵循昼夜模式（即有 24 小时的周期），因此我想评估 24 小时循环在一年中的变化情况。有没有一种方法可以在分析信号时只查看特定频率？如果是这样，我想绘制一个图表，显示数据中的 24 小时周期性如何在一年中变化（例如，显示它是否在夏天更大而在冬天更少）。我怎么能这样做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T09:37:58.830

您可以使用`reshape`将数据转换为`24x365`矩阵。在新矩阵中，每一列是一天，每一行是一天中的某个时间。

```
temperature=reshape(y,24,365);
time=(1:size(temperature,1))-1;
day=(1:size(temperature,2))-1;
[day,time]=meshgrid(day,time);

surf(time,day,temperature) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T10:05:56.980

*   我的第一个想法是傅立叶变换。这会给你一个频谱。在*高频*（> 1 / d）下，您将拥有一天的模式，在低频下，模式会持续更长的时间。（见低通和高通滤波器）

*   您还可以进行频率/时间可视化，以显示频率在一年内的变化。

*   更多的工作 - 但您可以编写一个简单的模型并为其创建一个卡尔曼滤波器。

# php - 从 jquery 对话框中传递数据并在同一对话框中返回结果

> ID：11879999
> 
> 赞同：0
> 
> 时间：2012-08-09T09:04:25.303
> 
> 标签：php, jquery, sql, login

我正在尝试建立员工休息日志。基本上，我想要一个 jquery 弹出登录表单，其中将验证凭据。如果成功通过身份验证，弹出窗口将关闭并将日期时间放在员工单击的单元格上。输入后，单元格将不可编辑。我的 html 表如下所示。

```
          午餐休息休息..等等
人A XXX
人B XXX

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T02:39:12.280

使用 Jquery，您可以使用 open() 创建一个弹出窗口。

创建一个带有单选按钮的表单，用于中断、中断等，并将显示设置为无。Jquery 的 open() 函数将使其弹出。

```
<form style="display:none" id="break_popup">
    Break in<input type"radio" name="breakin"/>
    <!-- The rest of your form -->
</form> 
```

然后在 javascript 代码中，你可以这样调用它：`$("#break_popup").open();`