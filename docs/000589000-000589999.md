# StackOverflow 问答 000589000-000589999

# java - 将 Subversion 代码签出到 Eclipse 后，如何构建它？

> ID：589021
> 
> 赞同：0
> 
> 时间：2009-02-26T03:50:28.207
> 
> 标签：java, eclipse, svn, subclipse

这个问题困扰了我一段时间...

许多像 Sourceforge 这样的网站使用 SVN 或 Subversion 来管理他们的代码。我在 C++ 中编译 SVN 代码几乎没有问题，但是说到 Java，我的 IDE 让我很头疼。

我已经为 Eclipse 的 SVN 支持安装了 Subclipse，它可以工作。我可以将任何代码签出到我的工作区。现在 Subclipse 将把整个东西放到一个无法编译的特殊项目中。所以我在谷歌上搜索了一些东西，然后我想出了修改 eclipse XML 文件以指定“性质”为 Java 项目。

好的，现在它是一个 Java 项目。假设我有一个文件夹结构，例如：

```
\src
\data
\graphics 
```

我收到 800 个编译器错误，抱怨包名`org.company.SomePackage`不是`src.org.company.SomePackage`.

然后我要做的是创建名为 src、数据、图形等的*包，而不仅仅是文件夹。*我将文件夹中的所有内容剪切并粘贴到包中，*最后*我可以编译它。

有什么更好的方法来做到这一点？

编辑：我只能将任何 SVN 作为 SVN 项目签出，并且在 Eclipse 中无法将其更改为 Java 项目。我如何首先将 SVN 作为 java 项目签出？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-02-26T04:02:26.307

> 我收到 800 个编译器错误，抱怨包名称是 org.company.SomePackage 而不是 src.org.company.SomePackage。

右键单击项目 -> 属性 -> Java 构建路径 -> 源选项卡 -> 添加“src”作为源文件夹并删除任何其他文件夹。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-07T22:22:35.900

它认为您的源存储在根文件夹中。您需要向项目指定 /src 是源文件夹。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T13:22:26.357

通常，当我们有一个包含 Java 代码的 Eclipse 项目时——但我们在创建或签出该项目时没有将其设置为 Java 项目时，我们会感到震惊。并且 Eclipse 不允许更改 Gui 中的项目类型。所以我们需要添加java性质如下。1\. 关闭您的项目。2\. 使用默认编辑器打开名为 .project 的项目文件（位于相应项目的根目录中）。搜索

```
< natures>
< /natures> 
```

并将其更改为如下

```
< natures>
<nature>org.eclipse.jdt.core.javanature</nature>
< /natures> 
```

保存更改的文件。3\. 再次打开项目——现在它应该变成了一个 java 项目。

然后按照 Kevin 的解释执行以下操作 在项目资源管理器窗口上 -> 右键单击​​特定项目 -> 属性 -> Java 构建路径 -> 源选项卡 -> 将“src”添加为源文件夹并删除任何其他文件夹。对我来说，当我进入“Source Tab”时——已经添加了“src”文件夹，但它并没有给我想要的结果（即我仍然没有在项目浏览器窗口中看到 .java 文件）。所以我删除了“源”选项卡中已经添加的“src”文件，然后再次添加它们。然后一切正常。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2009-02-26T04:04:11.887

您必须配置正确的源路径。一些开源项目通过检查它们的 .project 和 .classpath 文件以及它们的其余文件来自动执行此操作。对于其他人，您将遇到您遇到的问题。您需要设置类路径，以便 Java 编译器知道在哪里可以找到源代码。您右键单击项目并选择属性并配置任意类路径，但 Kevin 给出的答案对于初学者来说更容易。

# tdd - 您应该在多大程度上应用 TDD？

> ID：589035
> 
> 赞同：8
> 
> 时间：2009-02-26T03:54:55.137
> 
> 标签：tdd

我看到了 TDD 的好处，我正在努力学习如何理解它。我还在阅读有关 DDD 的更多信息，并希望开始将它们都应用到我的软件项目中。

我已经购买了一些“动手”编程书籍（“动手”是指那些用真实解决方案而不是小片段讨论现实世界应用程序的书），我注意到它们通常开始定义“基础设施”以传统的代码优先方式应用程序层，而不是使用 TDD；这两本书都不遗余力地讨论了 TDD 有多好以及案例研究将如何利用它。

例如在其中一本书**ASP.NET 3.5 Social Networking**中，整个第二章都开发了一个 Logging 包装器类、一个电子邮件包装器类、Cache 和 Session 包装器类（以及它们相关的接口），所有这些都没有涉及单个单元测试。另一本书，**.NET Domain Driven Design with C#: Problem, Design, Solution**做了类似的事情，并且在触及“真实”代码之前先创建了一个基类和存储库框架代码。

我知道您应该测试域类的实际逻辑和功能。我曾认为“不测试管道”代码仅适用于您未编写的代码（例如内置的 .NET 类），但我正在阅读的内容似乎表明/建议您只应测试代码这实际上与您的应用程序有关，而不是您为提供基础而编写的管道。

这是应用 TDD 的可接受方式吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-02-26T04:05:59.980

学习 TDD 时，应用一切。之后，应用你需要的东西。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-02-26T04:07:28.710

如果您是从头开始编写管道，那么您应该围绕它进行测试。如果您只是使用一些接口和类来抽象出您的 linq2sql 调用，那么，不，我不一定会围绕它进行单元测试。

引用比我聪明的人的话：

> 我对 TDD 不感兴趣。我认为这是一门值得遵循的学科。我不会先写所有的测试。其中一些只是在代码之后编写更方便。甚至有些代码我根本不编写测试，因为它不值得。但这些是规则的例外。我写的绝大多数代码，我先写测试。
> 
> -鲍勃·马丁叔叔来自： http: [//www.infoq.com/news/2009/02/spolsky-vs-uncle-bob](http://www.infoq.com/news/2009/02/spolsky-vs-uncle-bob)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-02-26T09:43:10.167

这可能取决于您计划如何构建项目的其他因素。

如果您遵循其他敏捷实践，例如小型迭代和交付，那么您一开始不会有太多架构或基础设施，因为在实施和交付时您将没有时间进行大量开发前几个功能。无论如何，当您真的不知道代码需要什么时，为什么还要花时间在大设计上呢？

因此，您将首先构建代码并经过多次迭代。测试覆盖意味着您可以重构以改进您的设计，这（理论上）允许为应用程序随时出现正确的基础设施。[Ron Jeffries 在这里很好地解释了它](http://xprogramming.com/blog/2009/02/06/why-is-refactoring-a-must/)。如果没有测试，您可能会遇到需要停下来弄清楚结构应该是什么的地步，这将花费一些时间，这些时间可以更好地用于构建有用的功能，并且您将不得不反正最后测试。

如果您 100% 确定您可以在编写任何代码之前正确地设计出设计，那么您可以选择这样做。不过，请确保在项目中留出足够的时间进行测试。我认为每个人都应该通过“传统的”瀑布流程以及只是潜入和编码来构建至少一项重要的工作，以便获得一些将敏捷实践置于上下文中的经验。否则你就有可能在不知道“为什么”的情况下知道“什么”，这使得课程更难学习。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-02-27T22:45:38.093

**如果你测试一些代码，而不测试其他代码，哪个代码会有错误？**

提示：这是未经测试的代码。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-02-26T04:03:05.057

我不是这里的专家。

但是，如果您正在开发管道组件，则应该对其进行测试。
如果我理解正确，使用 TDD、针对接口编写的代码并且在没有管道组件的情况下，人们使用 Mock 对象。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-02-26T04:04:06.973

我在[另一个问题中详细讨论了这个问题](https://stackoverflow.com/questions/513778/what-do-you-think-of-junit-style-unit-testing-do-you-favor-behaviour-driven-test/513807#513807)。基本上，使用 TDD 和模拟以及所有这些东西的目的是培养更多的信心。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-02-26T04:10:53.430

TDD 应该应用于您开发的任何代码。使用 TDD 时，您不需要测试所有内容——即，目标不是 100% 的覆盖率——但覆盖率应该比您开发的代码高。例如，您不需要在 C# 中测试自动 gettor/settors —— 您可以相信该语言会在那里完成它的工作。但是，如果有疑问，请先编写测试。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-02-27T22:33:46.610

一定要先编写代码来获得平台经验——只要你确定可以处理该平台上的大多数任务，就勇敢地扔掉它。我刚刚使用我已经启动的一个小型 Java 程序完成了这项工作。
既然我已经获得了一些经验，我可以看到我必须做些什么才能获得非常高的线路覆盖率，因为我开始编写测试优先，甚至是大部分管道。

# java - 将 test.includes 传递到 intellij idea 测试运行器参数中

> ID：589039
> 
> 赞同：3
> 
> 时间：2009-02-26T03:56:28.300
> 
> 标签：java, unit-testing, intellij-idea

例如，在蚂蚁中，我会使用类似的东西

文件集 dir="src/tests" 包括="${test.includes}" excludes="${test.excludes}"/>

在junit任务中。Intellij 的 Run Configurations 中有一个 Test Runner Parameters 字段，但我似乎无法找到如何传递此类信息。

基本用例：我有必须扩展 TestCase 的抽象测试，但正在由 intellij 的测试运行程序运行（并且失败并显示“未找到测试......”）。

如果有人知道该怎么做..会很好:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-14T00:00:00.780

恐怕答案是——不能这样。查看[IntelliJ Jira](http://www.jetbrains.net/jira/browse/IDEADEV-30260)。

# delphi - TFrame继承重构

> ID：589040
> 
> 赞同：4
> 
> 时间：2009-02-26T03:56:45.460
> 
> 标签：delphi, inheritance, refactoring, custom-component, tframe

我的另一个 TFrame IDE 注册组件问题。感谢所有的帮助，各位程序员。:)

[在这里](https://stackoverflow.com/questions/382562/delphi-visual-component-moving-away-from-tframe-base/382607#382607 "较早的 TFrame 问题/评论")玩 Darrian 的 TFrame 继承建议：

**规格：**

基本上，我有一个已注册到 IDE 的基于 TFrame 的组件，它运行良好。我现在正在开发一些“姐妹”组件，它们将共享大量现有组件的非可视功能和属性。因此，将其中的大部分内容移至新旧组件都可以继承的父/超类是有道理的。

以这种方式“重构” TFrame 继承的最佳方法是什么？（这也可能适用于 TForm 类的后代，不确定）。有哪些注意事项和注意事项？

**例子：**

例如，我尝试创建一个没有任何内容的新 TFrame，然后调用该框架 TMyBaseFrame。然后修改了我现有组件的类定义（我们称之为 TMyFrameTreeView）以继承自该组件而不是 TFrame。

它编译得很好，但是当我尝试将它放在表单上时，我得到“找不到 ClientHeight”（或“找不到 ClientHeight 属性”），并且它不会放在表单上。从相关的 DFM 中删除 ClientHeight 和 ClientWidth 造成了严重破坏，并且最终在调整大小时被替换。我注意到后代类中的 ExplicitHeight 和 ExplicitWidth ，并且我认为这与继承值的属性值覆盖有关，但不确定。通过 New -> Inherited Items 重新创建一个全新的框架，然后复制所有内容，也没有产生很好的结果。

**最后说明**

我意识到这可能会很快变得一团糟，流式传输 DFM 文件和多代后代等......这也是我要求整体“需要注意的事项”概念方面的部分原因，但也给出了具体的现实世界中*更简单*的问题版本（在我看来，这应该是可行的）。

我已经创建了一个小测试包来破解学习尝试，并且正在学习很多东西，但它进展缓慢，并且您的德尔福“绝地大师”的任何指导/见解将非常感激。:)

**稍后回复更新：**

下面的两个答案都很有帮助。同样，创建一个与普通 TFrame 没有任何变化的“基本框架类”，然后在添加任何属性、方法等之前从它继承，似乎可以极大地稳定继承流。不知道为什么，但到目前为止。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-02-26T05:03:21.807

除了更改基类`TMyFrameTreeView`以`TMyBaseFrame`将 dfm 文件中的第一个单词更改为`TMyFrameTreeView`from`object`到`inherited`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-02-26T08:26:01.787

> 我现在正在开发一些“姐妹”组件，它们将共享大量现有组件的非可视功能和属性。因此，将其中的大部分内容移至新旧组件都可以继承的父/超类是有道理的。
> 
> 以这种方式“重构” TFrame 继承的最佳方法是什么？

您上面的文字的症结可能是“组件的**非视觉**功能”。因此，在这种情况下，恕我直言，最好将可视层和非可视层分开。

所以，也许最好使用装饰器：

```
TMySharedEngine = class(Whatever)
property LinkedFrame: TFrame;
property P1;
property P2;
...
procedure Proc1;
procedure Proc2;
... //etc.
end; 
```

并在您的“姐妹”框架中使用它的实例：

```
var
TMyFrame1 = class(TFrame)
...
FDecorator: TMySharedEngine;
  ...
  public
  property MySharedPart: TMySharedEngine read FDecorator;
  constructor Create(AOwner: TComponent); override;
  ...
end;

constructor TMyFrame1.(AOwner: TComponent); override;
begin
  inherited;
  FDecorator:=TMySharedEngine.Create; //ok, ok do not forget to Free it .Destroy
  FDecorator.LinkedFrame:=Self;
  ...
end; 
```

OTOH，如果您想使用您的方法，您可以使用 Visual Form Inheritance（如 Darian 建议的那样）或（更灵活）您可以手动完成：使用 IDE 创建以下框架：TBaseFrame、TChildFrame1、TChildFrame2 ... 等. 现在继续 TChildFrame1 的单元并手动将其类定义从 TChildFrame1 = class(TFrame) 更改为 TChildFrame1 = class(TBaseFrame)。编译。它应该工作。建议您在执行此技巧时将 TBaseFrame 设为空，以避免可能的小怪癖（功能冲突等）

HTH。

# performance - 如果表有很多记录（400K）与空表相比，插入速度要慢 4 倍

> ID：589043
> 
> 赞同：2
> 
> 时间：2009-02-26T03:58:40.260
> 
> 标签：performance, oracle, insert, oracle10g

（数据库：Oracle 10G R2）

向表中插入 100,000 条记录需要 1 分钟。但是如果表已经包含一些记录（400K），那么需要4分12秒；CPU-wait 也跳了起来，“Free Buffer Waits”变得非常高（来自 dbconsole）。

你知道这里发生了什么吗？这是因为频繁的表范围吗？这些表的范围大小为 1,048,576 字节。我有一种感觉 DB 正在尝试扩展表存储。

我真的很困惑。所以任何帮助都会很棒！

* * *

这是插入语句：

```
开始
  for i in 1 .. 100000 循环
    插入客户
                （id、企业名称、地址 1、
                 地址2，城市，
                 邮编，州，国家，传真，
                 电话、电子邮件
                )
         值（customer_seq.nextval，dbms_random.string（'A'，20），dbms_random.string（'A'，20），
                 dbms_random.string ('A', 20), dbms_random.string ('A', 20),
                 trunc (dbms_random.value (10000, 99999)), 'CA', 'US', '798-779-7987',
                 '798-779-7987', 'asdfasf@asfasf.com'
                );
  结束循环；
结尾;

```

* * *

这里[的 dstat](http://dag.wieers.com/home-made/dstat/)输出（CPU、IO、MEMORY、NET）为：

1.  空表插入： http: [//pastebin.com/f40f50dbb](http://pastebin.com/f40f50dbb)
2.  包含 400K 记录的表：http: [//pastebin.com/f48d8ebc7](http://pastebin.com/f48d8ebc7)

* * *

输出自`v$buffer_pool_statistics`

```
编号：3
名称：默认
块大小：8192
SET_MSIZE：4446
CNUM_REPL：4446
CNUM_WRITE：0
CNUM_SET：4446
BUF_GOT：1407656
SUM_WRITE：1244533
总和扫描：0
FREE_BUFFER_WAIT：93314
WRITE_COMPLETE_WAIT：832
BUFFER_BUSY_WAIT：788
FREE_BUFFER_INSPECTED：2141883
DIRTY_BUFFERS_INSPECTED：1030570
DB_BLOCK_CHANGE：44445969
DB_BLOCK_GETS：44866836
一致获取：8195371
PHYSICAL_READS：930646
PHYSICAL_WRITES：1244533

```

* * *

**更新**

我从该表中删除了索引，即使将 100K 插入 600K 记录表（在没有 CPU 等待的情况下花费了 47 秒 - 请参阅 dstat 输出[http://pastebin.com/fbaccb10](http://pastebin.com/fbaccb10)）时，性能也大大提高。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-02-26T04:02:49.020

不确定这在 Oracle 中是否相同，但在 SQL Server 中，我首先要检查的是表上有多少索引。如果它很多，那么数据库必须在插入记录时做很多工作来重新索引表。重新索引 500k 行比重新索引 100k 行更困难。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-26T05:40:12.390

索引是某种形式的树，这意味着插入记录的时间将是 O(log n)，其中 n 是树的大小（≈标准唯一索引的行数）。

正如您已经发现的那样，插入它们的最快方法是在插入期间删除/禁用索引并在之后重新创建它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-26T12:21:43.873

即使有索引，插入 100,000 条记录的 4 分钟对我来说似乎也是个问题。

如果这个数据库有 I/O 问题，你还没有修复它们，它们会再次出现。我建议您找出根本原因。

如果您发布索引 DDL，我会安排时间进行比较。

* * *

我在 id 和 business_name 上添加了索引。在一个循环中进行 10 次迭代，每 100,000 行的平均时间为 25 秒。这是在我的家用 PC/服务器上，都在一个磁盘上运行。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-01T19:25:10.227

另一个提高性能的技巧是在序列（customer_seq）上打开或设置更高的缓存。这将允许 oracle 将序列分配到内存中，而不是为每个插入命中对象。

不过要小心这个。在某些情况下，这将导致您的序列在值之间存在间隙。

此处的更多信息： [Oracle/PLSQL：序列（自动编号）](http://www.techonthenet.com/oracle/sequences.php)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-02-26T04:01:47.600

表中的条目越多，排序插入的时间就越长。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-02-28T04:10:53.087

你不说哪些列被索引。如果您在传真、电话或电子邮件上有索引，那么您将有很多重复项（即每一行）。Oracle '假装' 有非唯一索引。实际上，每个索引条目都是唯一的，实际表行的 rowid 是决定因素。rowid 由文件/块/记录组成。

有可能，一旦您达到一定数量的记录，新的记录就会获得 rowid，这意味着必须将其放入现有索引的中间，并进行大量的索引重写。

如果您提供完整的表和索引创建语句，其他人将能够重现经验，这将允许更多基于证据的响应。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2009-02-26T04:01:53.280

我认为这与扩展文件的内部结构以及为添加的信息建立数据库索引有关 - 我相信数据库以非线性方式排列数据，这有助于加快对选择的数据检索

# c# - 在 XML 文档中设置属性

> ID：589048
> 
> 赞同：1
> 
> 时间：2009-02-26T04:00:34.250
> 
> 标签：c#, xml

我正在编写我的第一个 C# 程序。这是我正在尝试做的事情：

*   打开一个 XML 文档
*   导航到 XML 树的一部分并选择类型的所有子元素`<myType>`
*   对于每个`<myType>`元素，更改一个属性（因此`<myType id="oldValue">`会变成`<myType id="newValue">`
*   将此修改后的 XML 文档写入文件。

我找到了`XmlDocument.SelectNodes`将 XPath 表达式作为参数的方法。但是，它返回一个`XmlNodeList`. 我读了一点关于 XML 节点和 XML 元素之间的区别，这似乎解释了为什么没有`XmlNode.SetAttribute`方法。但是有没有一种方法可以使用我的 XPath 表达式来检索`XmlElement`对象列表，以便我可以遍历这个列表并`id`为每个对象设置属性？

（如果有其他更简单的方法，请告诉我。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-02-26T04:05:38.933

简单地说 - 它不知道您是否正在阅读元素或属性。很可能，您所需要的只是一个演员表：

```
foreach(XmlElement el in doc.SelectNodes(...)) {
    el.SetAttribute(...);
} 
```

SelectNodes 返回一个 XmlNodeList，但上面将每个都视为一个 XmlElement。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-26T04:18:25.270

我是 System.Xml.Linq.XDocument 及其提供的功能的忠实粉丝。

```
XDocument xDoc = XDocument.Load("FILENAME.xml");

// assuming you types is the parent and mytype is a bunch of nodes underneath
IEnumerable<XElement> elements = xdoc.Element("types").Elements("myType");

foreach (XElement type in elements)
{
    // option 1
    type.Attribute("id").Value = NEWVALUE;
    // option 2
    type.SetAttributeValue("id", NEWVALUE);
} 
```

选项 1 或 2 有效，但我更喜欢 2，因为如果该属性不存在，则会创建它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-26T04:09:25.510

我坐在我的 Mac 前，所以没有 .NET 适合我...

但是，我认为您可以通过显式转换将 XmlNode 转换为 XmlElement。

您应该能够将 XmlElement 转换为 XmlNode，然后使用 XmlNode.ChildNodes 之类的东西获取它的子节点。

# java - Does Java 64 bit perform better than the 32-bit version?

> ID：589057
> 
> 赞同：16
> 
> 时间：2009-02-26T04:03:40.483
> 
> 标签：java, 64-bit, 32-bit

I noticed [Sun](http://en.wikipedia.org/wiki/Sun_Microsystems) is providing a 64-bit version of Java. Does it perform better than the 32-bit version?

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2009-02-26T13:04:06.283

Almost always 64 bits will be slower.

To quote Sun from the [HotSpot FAQ](http://java.sun.com/docs/hotspot/HotSpotFAQ.html#64bit_performance):

> The performance difference comparing an application running on a 64-bit platform versus a 32-bit platform on SPARC is on the order of 10-20% degradation when you move to a 64-bit VM. On AMD64 and EM64T platforms this difference ranges from 0-15% depending on the amount of pointer accessing your application performs.

There are more details at the link.

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2009-02-26T04:09:57.520

Define your workload and what "perform" means to you.

This is sort of a running annoyance to me, as a performance geek of long standing. Whether or not a particular change "performs better" or not is dependent, first and foremost, on the workload, ie, what you're asking the program to do.

64 bit Java will often perform better on things with heavy computation loads. Java programs, classically, have heavy I/O loads and heavy network loads; 64 bit vs 32 bit may not matter, but operating systems usually do.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-02-26T20:01:41.570

64-bit perform better if you need much more than 1.2 GB. On some platforms you can get up to 3 GB but if you want 4 - 384 GB for example, 64-bit is your only option.

I believe Azul supports a 384 GB JVM, does anyone know if you can go higher?

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-06-28T16:07:51.197

I know that this question is quite old and the voted answers were probably correct at the time when they were written. But living in 2018 now, things have changed.

I just had an issue with a Java client application running on Win 10 64Bit on a Java 8 32Bit JVM. It was reading **174 MB** of data from an `HttpsURLConnection`'s `InputStream` **in 26s** which is awfully slow. The server and network were proven not to be the cause of this.

Thinking "Hey, there cannot be a huge difference between 32Bit and 64Bit JRE" it took some time until I tried having the very same code executed by a 64Bit JVM. Fortunately, in the end I did it: It was reading the very same **174MB in 5s**!

I don't know if I could make it even faster, but the key take-away is this:

*   jre1.8.0_172 32Bit : 6.692MB/s
*   jre1.8.0_172 64Bit : 34.8MB/s

for the **very same** jar file being executed on Windows 10 64Bit.

I have no idea what could be the reason for this, but I can answer this question by "Yes, 64Bit Java is better than 32Bit Java". See also the numbers in [the answer of my question](https://stackoverflow.com/a/51101403/9883438) regarding this issue.

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-02-26T12:26:57.560

On most CPU architecures 32-bits is faster than 64-bit, all else being equal. 64-bit pointers require twice as much bandwidth to transfer as 32-bits. However, the x64 instruction set architecture adds a bit of sanity over x86, so it ends up being faster. The amount of handling of long types is usually small.

Of course it also depends upon the implementation of Java. As well as the compiler, you might find differences in the implementation; for instance, NIO assumes 64-bit pointers. Also note that Sun previously only shipped the faster server [HotSpot](https://en.wikipedia.org/wiki/HotSpot) implementation for x64\. This meant that if you specified `-d64`, you would also switch from client to server HotSpot, IIRC.

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-02-26T12:45:53.350

Some improvements: operations with doubles on 64 bits compute equally fast as floats on 32 bits, as well as operations on long at 64 bit compared to int.

So if you are running code with tons of longs you might see a real improvement.

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-10-17T06:38:36.493

My experience differs from the other answers.

**Java 64bit may be faster than 32bit**. At least with my tests it always was! The pointer argument is not valid when less than 4GB are used because then the 64bit-VM will also use short pointers internally. You get however the faster instruction set of the 64bit CPUs!

I tested this with Windows 7 and JDE1.8.0_144, but maybe the real reason are different internal JVM setting. When you use the 64-bit JVM it starts in "server" mode, while the 32-bit VM starts in "client" mode.

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2009-02-26T04:10:25.583

Yes, especially if your code is built to target a 64 bit platform.

# opengl - 如何在opengl中启用垂直同步？

> ID：589064
> 
> 赞同：43
> 
> 时间：2009-02-26T04:07:14.017
> 
> 标签：opengl, vsync, vertical-sync

如何启用垂直同步？

是不是很简单`glEnable(GL_VSYNC)`？（尽管在 glEnable 接受的选项中没有 GL_VSYNC 或类似的东西）。

或者在opengl中没有标准的方法来做到这一点？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2009-02-26T05:33:28.753

在 Windows 上有 OpenGL 扩展方法`wglSwapIntervalEXT`。来自 b2b3 [http://www.gamedev.net/community/forums/topic.asp?topic_id=360862](http://www.gamedev.net/community/forums/topic.asp?topic_id=360862)的帖子：

> 如果您在 Windows 上工作，则必须使用扩展才能使用 `wglSwapIntervalExt`功能。它在 wgext.h 中定义。您还需要下载 glext.h 文件。在 wgext 文件中声明了 Windows 特定扩展的所有入口点。所有这些函数都以前缀 wgl 开头。要获取有关所有已发布扩展的更多信息，您可以查看 OpenGL 扩展注册表。
> 
> `wglSwapIntervalEXT`来自`WGL_EXT_swap_control`扩展。它允许您在每次缓冲区交换之前指定最小帧数。通常它用于垂直同步（如果将交换间隔设置为 1）。有关整个扩展的更多信息可以在这里找到。在使用这个函数之前，你需要查询你的卡是否支持`WGL_EXT_swap_control`，然后使用函数获取指向该函数的指针`wglGetProcAddress`。
> 
> 要测试对给定扩展的支持，您可以使用如下函数：

```
#include <windows.h>
#include "wglext.h"

bool WGLExtensionSupported(const char *extension_name)
{
    // this is pointer to function which returns pointer to string with list of all wgl extensions
    PFNWGLGETEXTENSIONSSTRINGEXTPROC _wglGetExtensionsStringEXT = NULL;

    // determine pointer to wglGetExtensionsStringEXT function
    _wglGetExtensionsStringEXT = (PFNWGLGETEXTENSIONSSTRINGEXTPROC) wglGetProcAddress("wglGetExtensionsStringEXT");

    if (strstr(_wglGetExtensionsStringEXT(), extension_name) == NULL)
    {
        // string was not found
        return false;
    }

    // extension is supported
    return true;
} 
```

> 要初始化函数指针，您需要：

```
PFNWGLSWAPINTERVALEXTPROC       wglSwapIntervalEXT = NULL;
PFNWGLGETSWAPINTERVALEXTPROC    wglGetSwapIntervalEXT = NULL;

if (WGLExtensionSupported("WGL_EXT_swap_control"))
{
    // Extension is supported, init pointers.
    wglSwapIntervalEXT = (PFNWGLSWAPINTERVALEXTPROC) wglGetProcAddress("wglSwapIntervalEXT");

    // this is another function from WGL_EXT_swap_control extension
    wglGetSwapIntervalEXT = (PFNWGLGETSWAPINTERVALEXTPROC) wglGetProcAddress("wglGetSwapIntervalEXT");
} 
```

> 然后，您可以将这些指针用作任何其他函数指针。要启用 vync 你可以调用`wglSwapIntervalEXT(1)`，禁用它你调用`wglSwapIntervalEXT(0)`。
> 
> 要获取当前交换间隔，您需要调用`wglGetSwapIntervalEXT()`.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-08-12T09:43:06.560

**WGL**案例在[eugensk00 的答案](https://stackoverflow.com/a/589232/673852)中进行了描述。

对于**CGL** (MacOSX)，请参阅另一个 SO question 的[答案。](https://stackoverflow.com/a/10881400/673852)

对于**EGL**，有[eglSwapInterval()](https://www.khronos.org/registry/egl/sdk/docs/man/html/eglSwapInterval.xhtml)函数，但显然（参见[this](https://stackoverflow.com/questions/11971947/xlib-egl-how-to-get-vsync-swapinterval-on-eglswapbuffers)和[this](https://community.arm.com/thread/4815)）它不能保证无撕裂的结果——只能等待给定的时间段（可能只是由于驱动程序损坏）。

对于**GLX**（带有 X11 等的 Linux），至少有 3 个类似的扩展，具有不同程度的功能。OpenGL wiki 当前只列出了一个，Mesa <= 10.5.9（可能更高）不支持。这是从功能最完整的扩展（在 OpenGL wiki 中列出）到最少的列表：

1.  [GLX_EXT_swap_control](https://www.opengl.org/registry/specs/EXT/swap_control.txt)

    *   设置每个可绘制每个显示的交换间隔：`glXSwapIntervalEXT(dpy, drawable, interval)`

    *   获取当前交换间隔：`glXQueryDrawable(dpy, drawable, GLX_SWAP_INTERVAL_EXT, &interval)`

    *   获取最大交换间隔：`glXQueryDrawable(dpy, drawable, GLX_MAX_SWAP_INTERVAL_EXT, &maxInterval)`

    *   禁用垂直同步：设置`interval`为 0

2.  [GLX_MESA_swap_control](https://www.khronos.org/registry/OpenGL/extensions/MESA/GLX_MESA_swap_control.txt)

    *   设置每个上下文的交换间隔：`glXSwapIntervalMESA(interval)`

    *   获取当前交换间隔：`glXGetSwapIntervalMESA()`

    *   获取最大交换间隔：*不支持*

    *   禁用垂直同步：设置`interval`为 0

3.  [GLX_SGI_swap_control](https://www.khronos.org/registry/OpenGL/extensions/SGI/GLX_SGI_swap_control.txt)

    *   设置交换间隔：`glXSwapIntervalSGI(interval)`。

    *   获取当前交换间隔：*不支持*

    *   获取最大交换间隔：*不支持*

    *   禁用垂直同步：*不支持*（`interval==0`错误）

对于自适应 Vsync，请参阅[OpenGL wiki](https://www.opengl.org/wiki/Swap_Interval#Adaptive_Vsync)。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2019-03-22T23:52:51.637

```
((BOOL(WINAPI*)(int))wglGetProcAddress("wglSwapIntervalEXT"))(1); 
```

[https://www.khronos.org/opengl/wiki/Swap_Interval](https://www.khronos.org/opengl/wiki/Swap_Interval)

> “wglSwapIntervalEXT(1) 用于启用 vsync；wglSwapIntervalEXT(0) 用于禁用 vsync。”
> 
> “交换间隔 1 告诉 GPU 在交换前后缓冲区之前等待一个 v-blank。交换间隔 0 指定 GPU 永远不应等待 v-blank”

* * *

或者：（wgl 函数类型定义在`#include <GL/wglext.h>`）

```
((PFNWGLSWAPINTERVALEXTPROC)wglGetProcAddress("wglSwapIntervalEXT"))(1); 
```

```
PFNWGLSWAPINTERVALEXTPROC wglSwapIntervalEXT = (PFNWGLSWAPINTERVALEXTPROC)wglGetProcAddress("wglSwapIntervalEXT");
wglSwapIntervalEXT(1); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-01-30T09:12:40.313

对于[eugensk 的答案](https://stackoverflow.com/a/589232/3322435)中描述的 WGL 案例。

如果遇到 nullptr 错误，请确保您`wglGetProcAddress`在 OpenGL 上下文中运行 { } 部分代码。

即在代码{ `glfwMakeContextCurrent(window);`}之后。

[在这里](https://stackoverflow.com/a/21771738)查看答案。

# c# - 使用 StreamReader 时如何指定从何处开始读取文件？

> ID：589067
> 
> 赞同：0
> 
> 时间：2009-02-26T04:09:00.970
> 
> 标签：c#, streamreader

使用 StreamReader 时如何指定从何处开始读取文件？

我创建了一个流读取器对象，以及一个文件流对象。创建两个对象后，我将如何控制我希望 StreamReader 从文件开始读取的位置？

假设文件的内容如下，

```
// song list.
// junk info.
1\. Song Name
2\. Song Name
3\. Song Name
4\. Song Name
5\. Song Name
6\. Song Name 
```

我将如何控制流阅读器从 #2 中读取？另外，我怎么能控制在哪里停止读取类似的定界符，如＃5？

编辑：通过分隔符，我的意思是一种让 StreamReader 从 ('2.') 开始读取的方法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-26T04:11:36.673

如果文件包含新的行分隔符，您可以使用[ReadLine](http://msdn.microsoft.com/en-us/library/system.io.streamreader.readline.aspx)一次读取一行。

因此，要从第 2 行开始阅读，您将阅读第一行并丢弃，然后再阅读直到第 5 行的行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-26T04:13:29.260

您是否正在尝试将文件反序列化为某个内存对象？如果是这样，您可能希望简单地以 using`ReadLine`或类似的方式解析整个文件，存储每一行​​，然后通过数据结构（例如`KeyValuePair<int, string>`.

更新：好的...有了新信息，我认为您有两个选择。如果您一直在阅读直到找到匹配项，您可以`Peek()`, 检查该字符是否是您要查找的字符，然后`Read()`. 或者，如果您正在寻找一个固定的位置，您可以简单地`Read()`使用那么多字符并丢弃返回值。

如果您正在寻找复杂的分隔符，您可以将整行甚至整个文件读入内存并使用[正则表达式](http://msdn.microsoft.com/en-us/library/30wbz966.aspx)。

希望有帮助...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-26T04:13:07.107

那么如果内容只是这样的纯文本，您应该使用 StreamReader 的 ReadLine 方法。

[http://msdn.microsoft.com/en-us/library/system.io.streamreader.readline.aspx](http://msdn.microsoft.com/en-us/library/system.io.streamreader.readline.aspx)

-Oisin

# c++ - 什么时候通过引用传递不是一个好主意？

> ID：589076
> 
> 赞同：5
> 
> 时间：2009-02-26T04:13:20.210
> 
> 标签：c++, memory-management

这是一个我从来没有真正理解过的内存分配问题。

```
无效释放猴子鱼（）  
{  
    MonkeyFish * monkey_fish = new MonkeyFish();
    std::string localname = "万达";  
    猴子鱼->setName（本地名称）；  
    猴子鱼->去（）；  
}  

```

在上面的代码中，我在堆上创建了一个 MonkeyFish 对象，为它分配了一个名称，然后将它释放到世界上。假设已分配内存的所有权已转移给 MonkeyFish 对象本身 - 只有 MonkeyFish 自己会决定何时死亡并删除自己。

现在，当我在 MonkeyFish 类中定义“名称”数据成员时，我可以选择以下之一：

```
标准::字符串名称；
标准：：字符串和名称；

```

当我在 MonkeyFish 类中定义 setName() 函数的原型时，我可以选择以下选项之一：

```
void setName( const std::string & parameter_name );
void setName( const std::string parameter_name );

```

我希望能够最小化字符串副本。事实上，如果可以的话，我想完全消除它们。所以，看来我应该通过引用传递参数......对吗？

让我烦恼的是，一旦 unleashMonkeyFish() 函数完成，我的 localname 变量似乎将超出范围。这是否意味着我被迫通过副本传递参数？或者我可以通过引用传递它并以某种方式“摆脱它”吗？

基本上，我想避免这些情况：

1.  我不想设置 MonkeyFish 的名称，只是在 unleashMonkeyFish() 函数终止时让 localname 字符串的内存消失。（这似乎会很糟糕。）
2.  如果可以的话，我不想复制字符串。
3.  我不希望新的本地名称

我应该使用什么原型和数据成员组合？

**澄清**：建议使用 static 关键字的几个答案，以确保在 unleashMonkeyFish() 结束时不会自动取消分配内存。由于此应用程序的最终目标是释放 N MonkeyFish（所有这些都必须具有唯一的名称），因此这不是一个可行的选择。（是的，MonkeyFish - 作为善变的生物 - 经常改变他们的名字，有时在一天内几次。）

**编辑**：Greg Hewgil 指出将 name 变量存储为引用是非法的，因为它没有在构造函数中设置。我将问题中的错误保持原样，因为我认为我的错误（以及 Greg 的更正）可能对第一次看到这个问题的人有用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-02-26T04:37:12.010

一种方法是让你的字符串

```
std::string name; 
```

作为对象的数据成员。然后，在 unleashMonkeyFish 函数中像您一样创建一个字符串，并像您展示的那样*通过引用传递它*

```
void setName( const std::string & parameter_name ) {
    name = parameter_name;
} 
```

它会做你想做的事——创建一个副本以将字符串复制到你的数据成员中。如果您分配另一个字符串，则不必在内部重新分配新缓冲区。可能，分配一个新字符串只是复制几个字节。std::string 具有保留字节的能力。所以你可以调用“name.reserve(25);” 在你的构造函数中，如果你分配更小的东西，它可能不会重新分配。（我已经完成了测试，如果您从另一个 std::string 分配，看起来 GCC 总是重新分配，但如果您从 c-string 分配则不会。[他们说](http://gcc.gnu.org/onlinedocs/libstdc++/manual/bk01pt05ch13s05.html)他们有一个写时复制字符串，这可以解释行为）。

您在 unleashMonkeyFish 函数中创建的字符串将自动释放其分配的资源。这是这些对象的关键特征——它们管理自己的东西。类有一个析构函数，一旦对象死亡，它们就可以使用它来释放分配的资源，std::string 也有。在我看来，你不应该担心函数中的 std::string 是本地的。无论如何，它很可能不会对您的表现造成任何明显影响。一些 std::string 实现（msvc++ afaik）有一个小缓冲区优化：对于一些小的限制，它们将字符保留在嵌入式缓冲区中，而不是从堆中分配。

**编辑**：

事实证明，对于具有高效`swap`实现（恒定时间）的类，有一种更好的方法可以做到这一点：

```
void setName(std::string parameter_name) {
    name.swap(parameter_name);
} 
```

这样做更好的原因是，现在调用者知道参数正在被复制。编译器现在可以轻松应用返回值优化和类似优化。例如，考虑这种情况

```
obj.setName("Mr. " + things.getName()); 
```

如果你有`setName`一个引用，那么在参数中创建的临时对象将绑定到该引用，并且在`setName`其中将被复制，并且在它返回后，临时对象将被销毁 - 无论如何这都是一次性产品。这只是次优的，因为可以使用临时对象本身，而不是其副本。让参数不是引用将使调用者看到参数无论如何都被复制了，并使优化器的工作更加容易 - 因为它不必内联调用来查看参数是否被复制。

如需进一步解释，请阅读优秀文章[`BoostCon09/Rvalue-References`](https://www.boostpro.com/trac/wiki/BoostCon09/RValue101)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-02-26T04:37:09.060

如果您使用以下方法声明：

```
void setName( const std::string & parameter_name ); 
```

那么你也可以使用成员声明：

```
std::string name; 
```

和`setName`正文中的任务：

```
name = parameter_name; 
```

您不能将该`name`成员声明为引用，因为您*必须*在对象构造函数中初始化引用成员（这意味着您无法在 中设置它`setName`）。

最后，您的`std::string`实现可能无论如何都使用引用计数字符串，因此在分配中不会复制实际的字符串数据。如果您非常关心性能，最好熟悉您正在使用的 STL 实现。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-02-26T04:35:49.830

只是为了澄清术语，您已经从堆（使用 new）和堆栈上的 localname 创建了 MonkeyFish。

好的，因此存储对对象的引用是完全合法的，但显然您必须了解该对象的范围。通过引用传递字符串要容易得多，然后复制到类成员变量。除非字符串非常大，或者您执行此操作很多（我的意思是很多很多），否则真的没有必要担心。

你能澄清一下为什么你不想复制字符串吗？

**编辑**

另一种方法是创建一个 MonkeyName 对象池。每个 MonkeyName 都存储一个指向字符串的指针。然后通过从池中请求一个新的 MonkeyName 来获取一个新的 MonkeyName（在内部字符串 * 上设置名称）。现在通过引用将其传递到类中并执行直接指针交换。当然，传入的 MonkayName 对象发生了变化，但是如果它直接回到池中，那将没有什么区别。当您从池中获取 MonkeyName 时，唯一的开销是名称的实际设置。

...希望这是有道理的:)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-02-26T04:38:21.413

这正是引用计数要解决的问题。您可以使用 Boost shared_ptr<> 以某种方式引用字符串对象，使其至少与指向它的每个指针一样长。

不过，就我个人而言，我从不相信它，我更愿意明确说明我所有对象的分配和寿命。litb 的解决方案更可取。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-02-26T05:03:17.080

当编译器看到...

```
std::string localname = "Wanda"; 
```

...它将（除非优化魔法）发出 0x57 0x61 0x6E 0x64 0x61 0x00 [Wanda with the null terminator] 并将其存储在代码的静态部分中的某个位置。然后它将调用 std::string(const char *) 并将该地址传递给它。由于构造函数的作者无法知道所提供的 const char * 的生命周期，因此他/她必须进行复制。在 MonkeyFish::setName(const std::string &) 中，编译器将看到 std::string::operator=(const std::string &)，并且，如果您的 std::string 是使用 copy-on- 实现的编写语义，编译器将发出代码以增加引用计数但不复制。

因此，您将支付一份副本。你甚至需要一个吗？你知道在编译时 MonkeyFish 的名字是什么吗？MonkeyFish 是否曾经将它们的名称更改为在编译时不知道的名称？如果在编译时知道 MonkeyFish 的所有可能名称，则可以通过使用字符串文字的静态表并将 MonkeyFish 的数据成员实现为 const char * 来避免所有复制。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-02-26T10:05:32.283

作为一个简单的经验法则，将数据作为副本存储在类中，并通过（const）引用传递和返回数据，尽可能使用引用计数指针。

我不太关心复制几个 1000 字节的字符串数据，直到分析器说这是一个巨大的成本。OTOH 我确实关心保存几十 MB 数据的数据结构不会被复制。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2009-06-23T14:30:54.370

在您的示例代码中，是的，您必须至少复制一次字符串。最干净的解决方案是像这样定义您的对象：

```
class MonkeyFish {
public:
  void setName( const std::string & parameter_name ) { name = parameter_name; }

private:
  std::string name;
}; 
```

这将传递对本地字符串的引用，该字符串被复制到对象内的永久字符串中。任何涉及零复制的解决方案都非常脆弱，因为您必须小心您传递的字符串在对象被删除之前一直保持活动状态。除非绝对必要，否则最好不要去那里，而且字符串副本也不会那么昂贵——只有在必要时才担心。:-)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-02-26T04:18:33.303

您可以将 unleashMonkeyFish 中的字符串设为静态，但我认为这没有任何帮助（并且可能非常糟糕，具体取决于实现方式）。

我已经从高级语言（如 C#、Java）“向下”移动并且最近遇到了同样的问题。我认为通常唯一的选择是复制字符串。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2009-02-26T04:32:11.227

如果您使用临时变量来分配名称（如示例代码中所示），您最终必须将字符串复制到您的 MonkeyFish 对象，以避免临时字符串对象在您的范围内结束。

正如 Andrew Flanagan 所提到的，您可以通过使用局部静态变量或常量来避免字符串复制。

假设这不是一个选项，您至少可以将字符串副本的数量减少到恰好一个。将字符串作为引用指针传递给 setName()，然后在 setName() 函数内部执行复制。这样，您可以确保复制只执行一次。

# css - 基于 CSS 的菜单是否只是切换显示 none/block 和 z-index？

> ID：589080
> 
> 赞同：3
> 
> 时间：2009-02-26T04:13:49.897
> 
> 标签：css, menu

只是想了解如何使下拉菜单起作用（它们背后的理论）。

据我所见，它只是使用CSS`display: none`和.`block``z-index`

附加事件`mouseover`并`mouseout`切换 CSS 类。

基本上是这样吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-02-26T04:17:33.867

还有另一种方法，您可以根据父元素的悬停样式赋予菜单项可见性，例如。

```
li ul {display: none;}  
li:hover > ul {display: block;} 
```

这意味着您可以简单地使用

```
<ul id="menu">
    <li>
        some item
        <ul><li>sub item</li></ul>
    </li>
    <li>
        some other item
    </li>
<ul> 
```

显然，您需要添加更多样式和类等，以防止它应用于所有列表，但这是 css 菜单背后的一般概念。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-26T04:16:39.767

CSS 菜单还可以利用锚标记上的 :hover 属性，它的工作方式与 mouseover/mouseout 事件相同。

编辑：我可能应该说 :hover 属性并不总是必须在锚标记上，但它是使用最广泛的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-26T04:58:02.413

菜单栏是水平`<ul>`的`<li>`，每个下拉菜单都有一个

下拉菜单是垂直的`<ul>`

需要特殊的 .css 内容：

*   用于`<li>`使用“列表样式：无”来摆脱子弹等

*   使用`<li>`“显示：内联；” 用于水平布局而不是默认垂直

*   对于实际可点击菜单项的`<a>`内部`<li>`，使用“padding: 10px 20px;” （或其他尺寸）以制作更大的鼠标目标区域

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-02-26T18:37:13.177

它可能有助于了解整体情况，以了解为什么 onmouse(out|over) 事件和/或悬停类仅适用于具有子项的菜单项而不是常规菜单项。那是因为它们虽然在视觉上远离其父级，但在语义上仍留在其父级内部。因此，当您的鼠标从父菜单项移到其子菜单项时，仍会认为父菜单项将鼠标悬停在其上。

# sql-server - Delphi 2007 Pro - 连接 SQL Server 的最佳方式

> ID：589083
> 
> 赞同：3
> 
> 时间：2009-02-26T04:15:30.360
> 
> 标签：sql-server, delphi, components

我通常在我的大部分工作中使用以 Delphi 为目标的数据库（最近通常是 NexusDB），但仍然对通过 ADO 连接（和发布）到 MS Access 的速度非常缓慢有不好的记忆。我有一个可能需要针对 MS SQL Server 的新项目。对于 D2007 Pro，连接 MS SQL Server 的最佳方式是什么？（第三方组件 = 很好，如果这是最好的路线）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-02-26T04:52:01.863

TADOConnection 真的没那么糟糕。Access 从未打算成为生产 RDBMS。ADO 在 SQL Server 上的工作速度比在 Access 上快得多。请参阅[http://support.microsoft.com/kb/225048](http://support.microsoft.com/kb/225048)了解其中的一些原因。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2010-02-18T20:12:29.183

AnyDAC提供了[出色](http://www.da-soft.com/anydac/)的功能集和性能，简化了数据库应用程序的开发。AnyDAC 支持 MS SQL Server、MS Access 等等。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-02-26T04:36:49.187

DevArt / Corelab的[UniDac](http://www.devart.com/unidac/)组件是您的最佳选择 它提供快速的性能，您可以与许多不同的数据库通信

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-02-26T06:54:23.163

我一直推荐 DevArt db 组件的性能和可靠性。

您可以选择[SDAC](http://www.devart.com/sdac)（用于直接访问 sql server）或[UniDac](http://www.devart.com/unidac)（直接访问 Sql server、Oracle、MySql、PostgreSql 和 Interbase/firebird）

如果您不需要访问 sql server 特定功能的高级组件，如 TMSChangeNotification、TMSTransaction 或 TMSServiceBroker，那么您可以使用[UniDac](http://www.devart.com/unidac)，这样您的应用程序将被设计为与多个数据库一起使用。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-02-26T08:21:02.113

Devart 提供用于访问 SQL Server 数据库的[组件](http://www.devart.com/sdac/)和[dbExpress 驱动程序。](http://www.devart.com/dbx/)也有支持其他数据库的[UniDAC 。](http://www.devart.com/unidac/)

Da-soft [AnyDac](http://www.da-soft.com/anydac/)支持 SQL Server 和其他数据库。

Bob Swart 在 Lulu 上发布了[Delphi for Win32 VCL Database Development](http://www.lulu.com/content/1165954)，如果您需要任何帮助。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2010-02-19T04:30:49.980

从 Delphi 7 开始，我使用 ADO 连接到 Sql Server，它一直运行良好

# php - 数据库以对象或数组的形式返回记录？

> ID：589084
> 
> 赞同：1
> 
> 时间：2009-02-26T04:15:59.953
> 
> 标签：php, mysql, pdo

哪个是更好的选择？我注意到 PDO 让您以数组或对象的形式返回。在使用旧函数 (mysql_fetch_assoc()) 时，我总是使用数组，但我刚刚为 PDO 对象编写了一个包装类，我很好奇哪个更好。

我想一个对象会更严格......您可以更改/添加到返回的数组，这可能会意外混淆您的结果（如果您忘记添加/更改了键/值）。

数组中返回的记录是否更像是一种老式的方式，我应该采用对象，出于什么原因？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-02-26T04:19:46.483

来自 php.net：

mysql_fetch_object() 与 mysql_fetch_array() 类似，但有一个区别——返回的是对象，而不是数组。间接地，这意味着您只能通过字段名称访问数据，而不是通过它们的偏移量（数字是非法的属性名称）。

[性能注意事项](http://us.php.net/manual/en/function.mysql-fetch-object.php)：速度方面，该函数与 mysql_fetch_array() 相同，并且几乎与 mysql_fetch_row() 一样快（差异不大）。

# sharepoint - 如何限制在文档库列表定义上维护的主要版本的数量？

> ID：589086
> 
> 赞同：2
> 
> 时间：2009-02-26T04:17:00.560
> 
> 标签：sharepoint, sharepoint-2007

我这里有2个问题，

*场景：* 我创建了一个具有我自己的列表定义的文档库，具有默认的文档库设置。使用我的定义创建了相当多的文档库。现在我想更改版本设置以将主要版本的数量限制为 5。

我遇到了架构文件的“MajorVersionLimit”列表元素属性，不幸的是，这仅适用于内容迁移架构。它对我不起作用。

*问题 1：* **是否有任何简单的机制可以在我的网站集中启用此类设置？**

我知道我可以编写一段 .NET 代码来改变这一点。问题 2： **如果我这样做，它会破坏列表定义吗？**

提前致谢。〜尤瓦

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-02-26T07:39:09.670

我不知道如何通过配置文件设置这些值，但它们暴露在 SPList 对象上。所以诀窍是找到一种方法来捕获从模板创建新列表的时间，然后适当地设置字段（[SPList.MajorVersionLimit](http://msdn.microsoft.com/enus/library/microsoft.sharepoint.splist.majorversionlimit.aspx)和[SPList.appropriately](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.splist.majorwithminorversionslimit.aspx)）。

我还没有尝试过，但这是我要开始的地方。

1.  在[ListTemplate 元素](http://msdn.microsoft.com/en-us/library/ms462947.aspx)配置文件中，将“NewPage”属性设置为当用户单击 UI 中的“创建”按钮时应显示的 aspx 页面。
2.  在该页面的代码中，手动创建列表（使用 OM）并设置属性。

可能有更好的方法，但我没有看到。祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-26T19:00:36.707

In my opinion the easiest way to modify existing webs is to write a small PowerShell script setting the spWeb.MajorVersionLimit, some thing like this:

```
#Set up connection

[System.Reflection.Assembly]::LoadWithPartialName("Microsoft.SharePoint")
$spSite = new-object Microsoft.SharePoint.SPSite($siteurl) 

for($i=0; $i -lt $spSite.AllWebs.Count;$i++)

{

    $spWeb = $spSite.AllWebs[$i]
    for($j=0; $j -lt $spWeb.Lists.Count;$j++)
    {
        $aList = $spWeb.Lists[$j]
        if( $aList.Title -ceq "dokumenter") # case sensitive
        {
            if( $aList.EnableVersioning -eq $false)
            {
                $aList.EnableVersioning = $true
                $aList.MajorVersionLimit = 5;
                $aList.Update()
            }
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-26T10:46:39.890

**MajorVersionLimit**参数确实适用于**schema.xml**。**只要记住每次编辑此文档库中的文件时**都要检查创建版本吗？选项。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2010-07-26T14:36:02.440

这实际上不是真的，您可以通过 Scheme.xml 设置 MajorVersionLimit（作为 List 元素属性），它对我来说效果很好。智能感知不支持这些属性。

Doug “bobthebuilder” McCusker 博客 ( [http://suguk.org/blogs/sharepointhack/archive/2008/01/14/7809.aspx](http://suguk.org/blogs/sharepointhack/archive/2008/01/14/7809.aspx) )中描述了该解决方案

# python - Python 持久化 Popen

> ID：589093
> 
> 赞同：3
> 
> 时间：2009-02-26T04:19:43.220
> 
> 标签：python, subprocess, popen

有没有办法在 Popen 的同一个“会话”中进行多次通话？例如，我可以通过它拨打电话，然后再拨打另一个电话，而不必将命令连接成一个长字符串吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-02-26T05:59:09.707

当您使用 popen 时，您不是在“打电话”，而是在运行一个可执行文件并通过 stdin、stdout 和 stderr 与它交谈。如果可执行文件有某种方式来完成工作的“会话”（例如，通过从标准输入读取行），那么，是的，你可以做到。否则，您将需要执行多次。

subprocess.Popen （大部分）只是 execvp(3) 的包装器

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-26T06:09:06.517

假设您希望能够运行 shell 并向其发送多个命令（并读取它们的输出），您似乎可以执行以下操作：

```
from subprocess import *
p = Popen(['/bin/sh'], shell=False, stdin=PIPE, stdout=PIPE, stderr=PIPE) 
```

之后，例如：

```
>>> p.stdin.write("cat /etc/motd\n")
>>> p.stdout.readline()
'Welcome to dev-linux.mongo.com.\n' 
```

（当然，您也应该检查`stderr`，否则要求`Popen`将其与 合并`stdout`）。上面的一个主要**问题**是`stdin`and`stdout`管道处于阻塞模式，因此很容易“卡住”，永远等待 shell 的输出。虽然我还没有尝试过，但 ActiveState 网站上有一个[配方](http://code.activestate.com/recipes/440554/)显示了如何解决这个问题。

**更新**：在查看了相关的问题/答案之后，看起来使用 Python 的内置`select`模块来查看是否有要读取的数据可能更简单`stdout`（当然，您也应该对 执行相同的操作`stderr`），例如：

```
>>> select.select([p.stdout], [], [], 0)
([<open file '<fdopen>', mode 'rb' at 0x10341690>], [], []) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-26T04:24:14.240

> 例如，我可以通过它拨打电话，然后再拨打另一个电话，而不必将命令连接成一个长字符串吗？

听起来你正在使用 shell=True。不要，除非你需要。而是使用 shell=False （默认值）并传入命令/参数列表。

> 有没有办法在 Popen 的同一个“会话”中进行多次通话？例如，我可以通过它拨打电话，然后再拨打另一个电话，而不必将命令连接成一个长字符串吗？

有什么理由不能只创建两个 Popen 实例并根据需要在每个实例上等待/通信？如果我理解正确的话，这是正常的做法。

# c# - 在 C# 中解析 SQL 代码

> ID：589096
> 
> 赞同：76
> 
> 时间：2009-02-26T04:20:04.330
> 
> 标签：c#, sql

我想使用 C# 解析 SQL 代码。

具体来说，是否有任何免费可用的解析器可以解析 SQL 代码并从中生成树或任何其他结构？它还应该为嵌套结构生成适当的树。

它还应该返回这棵树的节点代表哪种语句。

例如，如果节点包含一个循环条件，那么它应该返回这是一个节点的“循环类型”。

或者有什么方法可以解析 C# 中的代码并生成我想要的类型的树？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-02-22T15:34:37.517

特别是对于 Transact-SQL (Microsoft SQL Server)，您可以使用*Microsoft.SqlServer.Management.SqlParser.dll*中可用[的`Microsoft.SqlServer.Management.SqlParser.Parser`命名空间](https://msdn.microsoft.com/en-us/library/microsoft.sqlserver.management.sqlparser.parser.aspx)，这是一个包含在 SQL Server 中并且可以自由分发的程序集。

 *这是将 T-SQL 作为字符串解析为标记序列的示例方法：

```
IEnumerable<TokenInfo> ParseSql(string sql)
{
    ParseOptions parseOptions = new ParseOptions();
    Scanner scanner = new Scanner(parseOptions);

    int state = 0,
        start,
        end,
        lastTokenEnd = -1,
        token;

    bool isPairMatch, isExecAutoParamHelp;

    List<TokenInfo> tokens = new List<TokenInfo>();

    scanner.SetSource(sql, 0);

    while ((token = scanner.GetNext(ref state, out start, out end, out isPairMatch, out isExecAutoParamHelp)) != (int)Tokens.EOF)
    {
        TokenInfo tokenInfo =
            new TokenInfo()
            {
                Start = start,
                End = end,
                IsPairMatch = isPairMatch,
                IsExecAutoParamHelp = isExecAutoParamHelp,
                Sql = sql.Substring(start, end - start + 1),
                Token = (Tokens)token,
            };

        tokens.Add(tokenInfo);

        lastTokenEnd = end;
    }

    return tokens;
} 
```

请注意，`TokenInfo`该类只是一个具有上述属性的简单类。

`Tokens`是这个枚举：

*   [令牌枚举 (Microsoft.SqlServer.Management.SqlParser.Parser)](https://msdn.microsoft.com/en-us/library/microsoft.sqlserver.management.sqlparser.parser.tokens.aspx)

并包括常数，如`TOKEN_BEGIN`, `TOKEN_COMMIT`,`TOKEN_EXISTS`等。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2011-10-25T18:25:12.167

Scott Hanselman 最近[介绍](http://www.hanselman.com/blog/TheWeeklySourceCode59AnOpenSourceTreasureIronyNETLanguageImplementationKit.aspx)了[Irony 项目](http://irony.codeplex.com/)，其中包括一个示例 SQL 解析器。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2009-02-26T04:43:54.880

[警告：自 2021 年起，答案可能不再适用]

使用 Microsoft[实体框架](http://en.wikipedia.org/wiki/ADO.NET_Entity_Framework)(EF)。

它有一个构建表达式树的“Entity SQL”解析器，

```
using System.Data.EntityClient;
...
EntityConnection conn = new EntityConnection(myContext.Connection.ConnectionString);
conn.Open();
EntityCommand cmd = conn.CreateCommand();
cmd.CommandText = @"Select t.MyValue From MyEntities.MyTable As t";
var queryExpression = cmd.Expression;
....
conn.Close(); 
```

或者类似的东西，在 MSDN 上查看。

这一切都在鲍尔默斯打勾:-)

The Code Project 中也有一个*[SQL Parser](http://www.codeproject.com/KB/dotnet/SQL_parser.aspx)*。

祝你好运。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2010-03-09T13:15:21.863

您可以看看一个商业组件：[http](http://www.sqlparser.com) ://www.sqlparser.com 上的通用 sql 解析器。 它支持 Oracle、T-SQL、DB2 和 MySQL 的 SQL 语法。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2009-02-26T05:25:22.597

试试[ANTLR——](http://antlr.org)那里有一堆 SQL 语法。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2009-04-30T02:10:01.713

VSTS 2008 Database Edition GDR 包括处理 SQL 解析和脚本生成的程序集，您可以从项目中引用这些程序集。Database Edition 使用解析器解析脚本文件以表示数据库的内存模型，然后使用脚本生成器从模型生成 SQL 脚本。我认为您的项目中只需要拥有和引用两个程序集。如果您没有数据库版本，您可以安装试用版来获取程序集，或者可能有另一种方法来获得它们而无需安装数据库版本。查看以下链接。 [数据老兄：获得皇冠上的珠宝](http://blogs.msdn.com/gertd/archive/2008/08/21/getting-to-the-crown-jewels.aspx)。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2009-03-01T05:01:54.623

试试[GOLD Parser](http://goldparser.org/)，它是一个功能强大且易于学习的 BNF 引擎。您可以搜索已经创建的语法以获得所需的内容（即：[SQL ANSI 89 Grammar](http://goldparser.org/grammars/files/sql-ansi-89.zip)）。

我开始将它用于 HQL 解析（NHibernate 查询语言，与 SQL 非常相似），非常棒。

更新：现在 NH 开发团队已经使用 ANTLR 完成了 HQL 解析（这更难使用，但更强大的 AFAIK）。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2010-11-03T08:39:14.033

正如 Diego 所建议的那样，语法是通往恕我直言的道路。我之前尝试过 Coco/r，但是对于复杂的 SQL 来说太简单了。有[许多语法](http://www.antlr.org/grammar/list)准备好的[ANTLR](http://en.wikipedia.org/wiki/ANTLR)。

甚至有人尝试构建 SQL 引擎，检查代码是否有适合您的*[内容 SharpHSQL - 用 C# 编写的 SQL 引擎](http://www.codeproject.com/KB/database/sharphsql.aspx)*。

# c# - 使用字节数组的一部分

> ID：589099
> 
> 赞同：17
> 
> 时间：2009-02-26T04:22:14.293
> 
> 标签：c#, types

如果我创建了一个字节数组 byte[] binBuffer = new byte[256] 并且我填充了数组的 100 个字节，如果我只想将这 100 个字节传递给其他方法，是否可以在不创建的情况下做到这一点一个 100 字节的新字节数组，从旧数组复制到新数组，然后传递新数组？是否有某种方式我可以通过前 100 个字节。我的应用程序特别适用于将数组传递给存储过程。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2009-02-26T04:37:06.253

使用缓冲区时一个非常常见的模式是：

```
Foo(byte[] data, int offset, int count) {...} 
```

图案。但是，您不能将其与`SqlCommand`/ 参数一起使用，因为当您分配给参数时，它会消耗整个缓冲区。您将需要一个新数组：

```
byte[] second = new byte[100];
Buffer.BlockCopy(first, firstOffset, second, 0, 100);
param.Value = second; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-02-26T04:25:58.870

如果你可以使用 linq：

```
SomeMethod(binBuffer.Take(100)); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-02-26T04:39:52.253

最简洁的答案是不。您所做的任何事情（除了将数组本身作为参数传递）都会创建一个新数组并复制其中的前 100 个字节。

但是，既然您不是按值传递数组，而是传递对它的引用，那么如果数组是 256 字节还是 100 字节，为什么对您很重要？你不会浪费更多的内存。但是，您可能需要告诉该方法要使用多少该数组，因为 Length 方法将返回完整长度。

**编辑：**我刚刚意识到你想将数组传递给存储过程。这将复制整个数组。您必须仅使用要传递的元素制作副本。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-02-26T04:27:28.350

如果您使用的是 .net 3.5，则可以使用 Take() 扩展方法并执行以下操作：

```
class Program
{
    static void Main(string[] args)
    {
        byte[] b = new byte[1000];

        dowork(b.Take(10).ToArray());

    }

    public static void dowork(byte[] b)
    {
        // do some work
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-02-26T04:35:47.910

将数组传递给方法时，实际上只传递了对它的引用，因为数组实际上是引用类型。你基本上有一个指向数组的指针，然后方括号中的偏移量只是告诉你距离开始有多少“槽”。因此，唯一真正的方法是将两个参数传递给您的方法。一个是实际数组，第二个是最大数量，直到您需要去的地方，在您的情况下它将是 100。在这种方法中，您只需遍历数组直到达到最大数量。

# php - 将用户添加到 cPanel 中的邮件列表的 PHP 脚本？

> ID：589101
> 
> 赞同：0
> 
> 时间：2009-02-26T04:23:33.820
> 
> 标签：php, mailing-list

我的 cPanel 中有一个邮件列表。当用户注册时，我想将他自动添加到我的邮件列表中。我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-22T13:10:08.597

据我所知，cPanel 使用[Mailman](http://www.gnu.org/software/mailman/index.html)作为邮件列表。这意味着您可能可以执行以下操作将电子邮件添加到邮件列表：

```
shell_exec("echo user@example.com | /var/lib/mailman/bin/add_members -r - LISTNAME"); 
```

其中 LISTNAME 是邮件列表的名称。根据您的系统，Mailman 脚本的路径可能不是 /var/lib/mailman/bin/。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-26T04:48:37.990

这完全取决于您使用的邮件列表。我不太熟悉 cPanel 用于列表的内容。

过去，我使用 cUrl 通过对 cPanel 适当部分中特定构造的 url 的请求来添加数据库和用户。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-14T02:58:10.100

我见过的 cPanel 实例使用 Mailman。

有一个 PEAR 包为 Mailman 提供 PHP API：http: [//pear.php.net/manual/en/package.webservices.services-mailman.php](http://pear.php.net/manual/en/package.webservices.services-mailman.php)

# python - 用于 Pylons Web 应用程序的最小 Linux？

> ID：589115
> 
> 赞同：2
> 
> 时间：2009-02-26T04:33:49.227
> 
> 标签：python, linux, pylons

我将构建一个基于 Pylons 的 Web 应用程序。为此，我想构建一个最小的 Linux 平台，然后我将在其上安装必要的包，例如 Python 和 Pylons，以及其他必要的依赖项。保持它最小化的另一个原因是因为这台机器将是虚拟的，可能通过 KVM，并且最终将在某些云环境中复制。

你会用什么来做到这一点？我正在考虑使用 Fedora 10 的 AOS iso，但很想了解我的所有选择。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-02-26T04:37:24.240

我真的很喜欢[JeOS](http://www.ubuntu.com/products/whatisubuntu/serveredition/jeos) “Just enough OS”，它是 Ubuntu 服务器版的最小发行版。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-26T10:38:51.953

如果您希望能够删除所有杂乱无章的内容，但仍然使用“主流”发行版而不是针对小型设备的精简版，请查看 Slackware。您可以愉快地删除像 sysvinit、cron 等低级别的东西，而不会陷入依赖地狱。其中没有任何内容依赖于 Perl 或 Python，因此您可以轻松删除它们（并安装您的应用程序喜欢使用的任何 Python 版本）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-21T22:30:24.550

> 为此，我想构建一个最小的 Linux 平台......

那么为什么不尝试使用 ArchLinux www.archlinux.org 呢？

您也可以在其中使用带有 Pylons 的 virtualenv。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-02-26T08:25:41.227

debootstrap 是你的朋友。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-02-26T08:28:15.480

该死的小Linux？松弛？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-02-26T08:43:21.467

如果您想认真对待虚拟设备的想法，请查看新发布的**[VMware Studio](http://www.vmware.com/appliances/learn/vmware_studio.html)**。它是专为精简系统而构建的（目前仅适用于 Linux），因此它仅提供足够的基础来运行您的应用程序。

[VMware 正在通过推动开放虚拟设备格式 ( OVF](http://www.vmware.com/appliances/learn/ovf.html) ) 来（更多地）开放，因此，在未来的某个时候，您可能也可以在其他虚拟化平台上运行结果。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-02-26T08:44:15.207

[Debootstrap](http://www.debian-administration.org/articles/426)，或使用[kickstart](http://www.redhat.com/docs/manuals/linux/RHL-7.3-Manual/custom-guide/ch-kickstart2.html)绑定您的 FC 域。但是，存在其他捆绑基于 RPM 的发行版的方法，例如 Steve Kemp替换 rpmstrap的[冲洗实用程序。](http://rinse.repository.steve.org.uk/)

或者，您可以在[入狱](http://jailtime.org)时抓住一些东西作为基地。

如果失败，请从源代码下载您需要的所有内容，使用 /mydist 前缀（包括 libc 等）构建/安装它，并通过[chroot](http://en.wikipedia.org/wiki/Chroot)对其进行测试。

多年来我一直在为 Xen 构建模板 .. 它实际上变成了一个非常有趣的爱好 :)

# sql - 在 SQL 中是否可以从子查询中的记录列表中匹配 LIKE？

> ID：589116
> 
> 赞同：2
> 
> 时间：2009-02-26T04:33:56.073
> 
> 标签：sql, postgresql, sql-like

使用这些表作为示例：

**代码变化**：

```
CODE
-----------
ABC_012
DEF_024
JKLX048 
```

**注册代码**：

```
CODE       AMOUNT
--------   ------
ABCM012         5
ABCK012        25
JKLM048        16 
```

当 CODE 与*CodeVariations*表的**任何**行中的模式匹配时，是否可以编写查询来检索*RegisteredCodes中的所有行？*也就是说，任何与 LIKE 模式匹配的行，或***`'ABC_012'``'DEF_024'``'JKLX048'`***

 ***结果应该是：

```
CODE       AMOUNT
--------   ------
ABCM012         5
ABCK012        25 
```

我正在使用 PostgreSQL，但如果可以通过对 PostgreSQL 或任何其他数据库的简单查询来了解是否可以做到这一点，将会很有趣。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-02-26T04:56:39.950

这能满足您的需要吗？

```
select distinct RC.* from RegisteredCodes RC, CodeVariations CV
where RC.CODE LIKE CV.CODE; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-26T05:00:25.450

这是你要找的：

```
SELCET * FROM RegisteredCodes RC WHERE RC.Code IN (SELECT CODE FROM CodeVariations WHERE CODE LIKE ('ABC%') AND CODE LIKE ('%012') 
```

这将获取所有以 'ABC' 开头并以 '012' 结尾的记录，以及类似 'DEF' 和 'JKL' 的记录。
或者

你在寻找这样的东西[吗](http://msdn.microsoft.com/en-us/magazine/cc163473.aspx)？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-26T05:14:13.370

在 Oracle 和 PostgreSQL 中，您可以将单个字符通配符“_”用于单个字符。

```
select RC.* from RegisteredCodes RC, CodeVariations CV
where RC.CODE LIKE 'ABC_012'; 
```

使用子字符串

```
select RC.* from RegisteredCodes RC, CodeVariations CV
where RC.CODE LIKE substring(CV.Code,1,3)||'_'||substring(CV.Code,5) ; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-07-24T16:55:59.513

```
select * from CAT_ITEM where DESCRICAO LIKE '%TUBO%%PVC%%DNR%' 
```

所有喜欢的列表都在一个字符串中。

# javascript - jQuery 和附加大量 HTML

> ID：589120
> 
> 赞同：7
> 
> 时间：2009-02-26T04:35:56.660
> 
> 标签：javascript, jquery, ajax, dhtml

我发现如果使用得当，使用 jQuery 创建 HTML 客户端可以极大地提高性能。我使用 AJAX 返回 JSON 来检索动态内容，然后构建相关的 HTML 并使用 jQuery 插入它。当我第一次使用这种技术时，我发现 IE 的 JavaScript 中的字符串连接器执行得非常慢，因此构建一个超过 50 行左右的动态表执行得非常糟糕。

```
var shtml = '<table>';
for (var i = 0; i < 100; i++) {
  shtml += '<tr><td>A bunch of content</td></tr>';
}
shtml += '</table>';
$('#myTable').append(shtml); 
```

然后我发现了一种字符串连接技术，它改变了一切。不使用 sting`+=`运算符，而是使用数组进行连接；

```
var shtml = ['<table>'];
for (var i = 0; i < 100; i++) { 
  shtml.push('<tr><td>A bunch of content</td></tr>');
}
shtml.push('</table>');
$('#myTable').append(shtml.join('')); 
```

我发现性能显着提高。然而，现在，在我开始看到浏览器本身很难同时动态插入如此多的内容之前，有大约 100 行的上限。有没有人有任何指针或技术可用于帮助我实现大型动态 HTML 集的下一个性能提升？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-02-27T22:24:27.333

由于它的 $.trim 函数，jQuery 和向 DOM 插入大量 html 存在性能问题。

有时我发现普通的旧 dom 脚本比使用 jquery 快得多。尝试类似的东西

```
document.getElementById('id').innerHTML = myarray.join('') 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-02-26T15:46:29.437

请注意，速度瓶颈通常不是创建 DOM，而是*插入*DOM。在具有复杂样式表的 IE 上以及当新内容包含多层嵌套标签时尤其如此。

见：[http ://bitkickers.blogspot.com/2008/12/ajax-grid-performance-in-ie.html](http://bitkickers.blogspot.com/2008/12/ajax-grid-performance-in-ie.html)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-02-26T05:10:45.423

您是否考虑过使用模板库？ [例如， PURE](http://beebole.com/pure/)具有非常好的性能（尝试 500 行示例）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-02-26T15:52:59.343

尝试克隆 DOM 本身的一部分，而不是动态生成它（即附加实际的 DOMElement，这样就不必创建它们）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2011-03-22T14:32:30.843

我认为您可以将 html 拆分为许多部分并一一附加。

`$("table tr:last").after('<tr>...</tr>');`

就像 googleDocs 中的文档行

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-02-26T20:00:14.990

Chase 是对的，无论您通过 JavaScript 生成 HTML 的速度有多快，DOM 插入都会杀死您。将任何编程语言与 DOM 联系起来，它会很慢。

我唯一的建议是对表格进行分页，这样你就不会一次加载这么多，或者根本不使用 AJAX。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-03-13T04:28:52.407

在我的情况下，document.getElementById('id').innerHTML = myarray.join('') 也是一个杀手，因为数组有 10 个 HTMl 字符串。连接会创建一个很大的长字符串，并且 nnerHTML 性能在 IE 7 上在 100 毫秒到 1200 毫秒之间显着变化。

有什么线索吗？

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-02-26T05:17:04.300

我昨天在添加大量 html 时乱七八糟。我认为在服务器端渲染和插入是要走的路，我也可以补充一点，在我的测试中，不使用 jquery 的速度要快 50-100 毫秒，这里是：

[http://programmingdrunk.com/playground](http://programmingdrunk.com/playground)

您需要启用 firebug 控制台才能查看速度结果

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2009-02-26T04:48:35.850

如果您在服务器端生成 HTML，然后使用 Ajax 检索 html 并将其附加到您的 DOM，您可能会获得更好的性能。（我假设您无论如何都使用 Ajax 从服务器获取所有数据。）

# java - j2me“回合制”游戏的 Gameloop

> ID：589141
> 
> 赞同：6
> 
> 时间：2009-02-26T04:45:33.177
> 
> 标签：java, java-me, midp, lcdui

编辑：这对我来说更有意义，因为我已经远离了代码，感谢您的帮助。

前几天通过 Coding Horror 发现堆栈溢出，看起来很棒。图我会向社区询问我目前正在尝试解决的问题。

我正在为 midp 2.0 手机开发一个使用 j2me 的 roguelike 游戏。该项目仍处于开发的基本阶段，因为我正在弄清楚它将如何工作。我目前坚持的部分与线程有关。

该游戏有一个自定义`HaxCanvas`类，它扩展了 GameCanvas 并实现了可运行。它的 run 方法调用 repaint() 然后休眠 50 毫秒，导致帧速率为 20 FPS。这使我可以编写游戏的其余部分，而不必到处重新绘制，并且应该使动画和效果在以后更容易完成。（至少在理论上）。

游戏流程由 GameManager 类控制，该类循环遍历地图上的所有 NPC，轮流进行，直到轮到玩家。在这一点上，我需要获得输入以允许玩家四处移动和/或攻击东西。我最初是在调用`gameManager.runUntilHeroTurn()`我`keyPressed`的`HaxCanvas`. 然而，在阅读了 j2me 系统线程之后，我意识到将一个有可能在回调中运行一段时间的方法是一个坏主意。但是我必须使用 keyPressed 进行输入处理，因为我需要访问数字键，并且`getKeyStates()`不支持这个。

到目前为止，我试图将我的游戏循环放在它自己的线程中已经导致了灾难。游戏运行了几轮后，出现了一个没有堆栈跟踪的奇怪“未捕获的 ArrayIndexOutOfBoundsException”。

所以我想我的问题是这样的：

对于 j2me 中的“回合制”游戏，实现游戏循环的最佳方式是什么，仅在轮到玩家时才允许输入处理？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-02-26T05:44:01.927

虽然不是 j2me，但您应该捕获用户输入，但一般策略是将输入排队，直到处理输入为止。

```
input ---> queue <---> Manager(loop) 
```

这样，您甚至可以为调试目的编写脚本输入。

所以你不需要一个新线程。每次用户按键时，您将它们存储在缓冲区中，然后在必要时处理缓冲区的内容。如果玩家缓冲区没有输入，经理应该跳过所有游戏，做动画然后重新开始（因为游戏不是动作游戏）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-02-26T14:48:42.897

我会避免游戏逻辑的线程化，因为 J2ME 线程化当然取决于制造商，在共享有限资源方面做得不好。当线程执行繁重的处理时，您经常会看到暂停。我只会推荐用于加载或网络连接功能的线程，因为在这种情况下，您只会向用户提供基本的“正在加载...”反馈。

为了处理这个问题，我不会有子循环在一帧中更新每个 AI。我会在运行函数中执行以下操作：

```
public void run() {
    while(true) {
        // Update the Game
        if(gameManager.isUsersTurn()) {
            // Collect User Input
            // Process User Input
            // Update User's State
        }
        else {
            // Update the active NPC based on their current state
            gameManager.updateCurrentNPC();
        }

        // Do your drawing
    }
} 
```

您希望避免在一帧中更新所有内容，因为 1）更新可能很慢，导致用户无法立即获得视觉反馈 2）您无法在每个 NPC 做出动作时为其设置动画。通过此设置，您可以拥有 NPC 状态、NPC_DECIDE_MOVE 和 NPC_ANIMATING，这将允许您进一步控制 NPC 正在做什么。NPC_ANIMATING 基本上会将游戏置于等待动画发生的状态，避免任何进一步的处理，直到动画完成。然后它可以移动到下一个NPC的回合。

另外，我只需要一个 gameManager.update() 和 gameManager.paint(g)（paint 将从paint 中调用）来处理所有事情并保持 run 方法的精简。

最后，您是否研究过flushGraphics()？使用 GameCanvas，您通常会创建一个 Graphics 对象，将所有内容绘制到该对象上，然后调用 flushGraphics()，然后等待。您提到的方法是处理 Canvas 类的方法。只是想我会提到这一点并发布一个链接： [Game Canvas Basics](http://developers.sun.com/mobility/midp/ttips/gamecanvas/index.html)

# c++ - 基本像素/细胞计数算法

> ID：589144
> 
> 赞同：3
> 
> 时间：2009-02-26T04:47:50.283
> 
> 标签：c++, algorithm, ocr, counting

晚安 ：）

我目前正在使用 DevIL 库，它允许我加载图像并检查每个像素的 RGB 值。作为一个个人学习项目，我正在尝试为我在 Photoshop 中制作的几张图像编写一个非常基本的 OCR 系统。

我成功地消除了图像中的所有扭曲，留下了文字和数字。我目前不是在寻找从输入中学习的高级神经网络。我想开始相对容易，所以我开始识别单个字符并计算这些字符中的像素。

我有两个问题：

*   识别单个字符。
*   最重要的是：我需要一种算法来计算连接像素（相同颜色），而不计算我之前计算过的像素。我没有数学背景，所以这对我来说是最大的问题。

感谢您对此事的任何帮助，谢谢。

编辑：

我已将此问题标记为 C++，因为这是我目前使用的。但是，其他语言的伪代码或易于阅读的代码也可以。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-02-26T04:56:26.597

只要您将图像过滤为简单的黑白位图，洪水填充算法就可以计算包含的像素[。](http://en.wikipedia.org/wiki/Flood_fill)

话虽如此，您可以通过将每个字符与您的集合中每个字符的一组标准图像进行比较，测量相似度，然后选择得分最高的字符来执行字符识别。

请查看[此问题](https://stackoverflow.com/questions/25977/how-can-i-measure-the-similarity-between-two-images)以获取更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-26T04:54:53.183

不确定这是否有帮助，但有一个名为[gocr](http://jocr.sourceforge.net/)的 GPL OCR 库。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-26T04:58:17.043

抱歉，如果这离题太远了，但恕我直言，[Vigra](http://kogs-www.informatik.uni-hamburg.de/~koethe/vigra/)（不是另一个！）是一个比 DevIL 更好的 C++ 图像处理库。

# java - 这种神秘的色彩方法有什么作用？它返回什么？

> ID：589145
> 
> 赞同：1
> 
> 时间：2009-02-26T04:47:53.607
> 
> 标签：java, colors, puzzle

也许我喝了太多咖啡，也许我工作太久了，无论如何，我对这种方法的作用感到茫然，或者更确切地说，为什么以及如何做到这一点，任何人都可以对我有所了解? 下一个颜色是什么？

```
public Color nextColor() {
   int max = 0, min = 1000000000, cr = 0, cg = 0, cb = 0;
   for (int r = 0; r < 256; r += 4) {
      for (int g = 0; g < 256; g += 4) {
         for (int b = 0; b < 256; b += 4) {
            if (r + g + b < 256 || r + g + b > 512) {
               continue;
            }
            min = 1000000000;
            for (Color c : colorTable) {
               int dred   = r - c.getRed();
               int dgreen = g - c.getGreen();
               int dblue  = b - c.getBlue();
               int dif = dred * dred + dgreen * dgreen + dblue * dblue;
               if (min > dif) {
                  min = dif;
               }
            }
            if (max < min) {
               max = min;
               cr  = r;
               cg  = g;
               cb  = b;
            }
         }
      }
   }

   return new Color(cr, cg, cb, 0x90);
} 
```

* * *

更新

感谢大家的回复。查看程序中方法的上下文很明显，他们的意图确实是返回一个新颜色，该颜色与现有颜色集“最远”。

感谢 Sparr 对这个问题提出[后续建议，我一定会根据您的建议重写上述内容。](https://stackoverflow.com/questions/592310/finding-the-farthest-point-in-one-set-from-another-set)

我对 RGB 色标不是很精通。知道上述方法的意图是检索“免费”吗？颜色与现有的一组颜色相比，在我们如何感知颜色的意义上，[1中提供的解决方案实际上是互补的吗？](https://stackoverflow.com/questions/592310/finding-the-farthest-point-in-one-set-from-another-set)有没有一种更简单的方法来选择一种可以补充集合的颜色，或者 RGB 分量的数值分析实际上是否会产生适当的颜色？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-02-26T04:54:56.460

看起来你有一个颜色表，它是一个存储颜色列表。

然后你就有了这个奇怪的硬编码色彩空间

> 颜色的分量是 4 的倍数，“不太亮”但“也不太暗”。

此功能似乎为您提供了与您的颜色表“对比”最佳的颜色。

当我说对比度时，这是通过使用 2 范数从颜色表中选择尽可能远的颜色来定义的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-26T05:00:44.060

给定一个名为 colorTable 的全局 Color 对象数组，此函数将从以下颜色空间中找到与该数组中的每个颜色最近*的颜色，然后是最远的颜色之一：

红色、绿色、蓝色分量为 4 的倍数 Red+Green+Blue 介于 256 和 512 之间

*：“最接近”定义为每个颜色分量的最小差平方和。

正如 Paul 所确定的那样，这似乎是一种看似合理的方法，如果实施效率极低，那么天真的方法可以找到与 colorTable 的内容提供高对比度的单一颜色。只需通过一次 colorTable 和更多的数学运算就可以找到相同的结果，而不是通过 colorTable 大约 500 万次，并且有更好的方法来找到提供更高平均对比度的不同颜色。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-26T05:12:35.763

它试图给你另一种颜色

a) 对数据集进行伪彩色编码。

b) 在图上画另一条线。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-02-28T03:19:10.057

考虑由 colorTable 中的点定义的伪实体在其内部有一个大的“空心”的情况，以便 nextColor 选择该空心中心的点作为 nextColor。根据您对 colorTable 的了解，这种情况可能非常罕见。如果预测它足够罕见，并且您愿意在这些情况下接受不是最优的（假设我们将 nextColor 的输出设为最优）解决方案，那么就会出现显着的优化。

在除上述情况之外的所有情况下，nextColor 选择的颜色将位于最小凸包表面的某个位置，该最小凸包包含由循环定义的 1/64 密集颜色空间中的所有点。在该表面上生成点列表在计算上比生成所有点列表的简单循环稍微复杂一些，但它会将您的搜索空间减少大约 25 倍。

在绝大多数情况下，简化搜索的结果将是该凸包的一个角上的一个点。只考虑那些可以将您的搜索空间减少到一个微不足道的列表（24 个候选人，如果我的心理几何学对我有用的话），可以简单地提前存储。

如果从中选择的 nextColor 与您的 colorTable“太接近”，那么您可以返回运行原始类型的搜索，以希望找到上述那种“空心”。该搜索的密度可以根据第一遍的接近程度进行调整，并从那里缩小范围。也就是说，如果超快速搜索在 colorTable 中找到距离其最近邻居 8 个单位的 nextColor，那么要做得更好，您必须在 colorTable 中找到至少 16 个单位的空心。以 8 的步长运行原始搜索并存储任何距离超过 4 个单位的候选对象（空心不太可能与您的搜索网格对齐），然后在每个候选对象上以更高密度的半径 12 搜索为中心。

我突然想到，您的搜索空间的 1/64 密集性质（所有 4 的倍数）可能是原作者为了加快搜索速度而设立的。鉴于这些改进，您消除了这种妥协。

所有这些都假定您想要坚持改进这种寻找对比色的幼稚方法。当然有更好的方法，给定相等或更多（colorTable 中的哪些颜色在您的使用中最普遍？哪些颜色对人眼看起来更具对比度？）信息。

# bash - Bash 脚本 cd 到路径名中带有空格的目录

> ID：589149
> 
> 赞同：112
> 
> 时间：2009-02-26T04:50:42.087
> 
> 标签：bash, escaping

我在 macOS X 上使用 Bash，我想创建一个简单的可执行脚本文件，该文件在运行时会更改为另一个目录。但是，该目录的路径中有空格。你到底是怎么做到的？这就是我所拥有的...

文件名：`cdcode`

文件内容：

```
cd ~/My Code 
```

现在授予，这不是一个长路径名，但我的实际路径名是五个目录深，其中四个目录在路径中有空格。

顺便说一句，我已经尝试过`cd "~/My Code"`，`cd "~/My\ Code"`但这些都不起作用。

* * *

## 回答 #1

> 赞同：94
> 
> 时间：2009-02-26T05:23:12.740

当您双引号路径时，您将停止波浪号扩展。所以有几种方法可以做到这一点：

```
cd ~/"My Code"
cd ~/'My Code' 
```

这里没有引用波浪号，所以波浪号扩展仍然会运行。

```
cd "$HOME/My Code" 
```

您可以在双引号字符串中扩展环境变量；这基本上就是波浪号扩展正在做的事情

```
cd ~/My\ Code 
```

您还可以使用反斜杠转义特殊字符（例如空格）。

* * *

## 回答 #2

> 赞同：48
> 
> 时间：2010-06-13T15:52:57.967

我在[此页面](http://www.askdavetaylor.com/can_my_path_include_directory_names_with_spaces.html)上找到了以下解决方案：

```
x="test\ me"  
eval cd $x 
```

`\`双引号文本常量和`eval`之前的组合`cd`使它像魅力一样工作！

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2017-12-03T10:43:58.627

在解决了同样的问题之后，我尝试了两种不同的解决方案：

## 1.`""`在变量中使用双引号 ( )。

最简单的方法只是双引号你的变量在前面的答案中指出：

```
cd "$yourPathWithBlankSpace" 
```

## 2\. 利用`eval`.

根据this answer [Unix command to escape spaces](https://stackoverflow.com/questions/12806987/unix-command-to-escape-spaces)你可以去掉空格然后使用`eval`，像这样：

```
yourPathEscaped=$(printf %q "$yourPathWithBlankSpace")
eval cd $yourPathEscaped 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2009-02-26T04:55:00.813

```
cd ~/My\ Code 
```

似乎对我有用...如果删除引号但保留斜杠不起作用，您可以发布一些示例代码吗？

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2009-02-26T05:22:44.943

您可以使用以下任何一种：

```
cd ~/"My Code"
cd ~/M"y Code"
cd ~/My" Code" 
```

您不能使用：

```
cd ~"/My Code" 
```

第一个有效，因为 shell 将 ~/ 扩展为 $HOME/，然后在没有双引号的情况下添加 My Code。第二个失败，因为没有一个名为 ' `"`' （双引号）的用户`~"`可以映射到。

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2020-07-08T20:19:14.963

这将做到：

```
cd ~/My\ Code 
```

我不得不使用它来处理存储在 iCloud Drive 中的文件。您不想使用双引号 (")，因为它必须是绝对路径。换句话说，您不能将双引号与波浪号 (~) 结合使用。

例如，我不得不将它用于最近的一个项目：

```
cd ~/Library/Mobile\ Documents/com~apple~CloudDocs/Documents/Documents\ -\ My\ iMac/Project 
```

我希望这会有所帮助。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2009-02-26T04:57:52.863

一个反斜杠对我有用：

```
ry4an@ry4an-mini:~$ mkdir "My Code"

ry4an@ry4an-mini:~$ vi todir.sh

ry4an@ry4an-mini:~$ . todir.sh 

ry4an@ry4an-mini:My Code$ cat ../todir.sh 
#!/bin/sh
cd ~/My\ Code 
```

您确定问题不在于您的外壳脚本正在更改其子外壳中的目录，但是完成后您又回到了主外壳（和原始目录）中？我通过使用避免了这种情况。在当前 shell 中运行脚本，尽管大多数人会为此使用别名。这些空间可能是一条红鲱鱼。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2015-06-10T06:06:25.603

避免在脚本中使用 ~；改用 $HOME 。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2009-02-26T05:02:12.963

在 Linux 下工作时，下面的语法是正确的：

`cd ~/My\ Code`

但是，当您执行文件时，请使用以下语法：

`$ . cdcode`

（只是 '.' 而不是 './'）

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2014-05-15T15:31:08.733

使用双引号

```
go () 
{ 
    cd "$*"
} 
```

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2017-04-28T10:04:52.373

这样做的非常简单的方法是 -

```
 $ cd My\ Folder 
```

在 bash 中，运行 DIR 命令，在结果中您会看到在它们之间有空格的文件夹或路径名称已写入结果中，如下所示 -

```
$dir
My\ Folder
New\ Folder 
```

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2018-05-24T01:37:05.787

使用单引号，例如：

```
myPath=~/'my dir'

cd $myPath 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2010-05-13T09:20:19.030

I had a similar problem now were I was using a bash script to dump some data. I ended up creating a symbolic link in the script folder with out any spaces in it. I then pointed my script to the symbolic link and that works fine.

To create your link. ln -s [TARGET DIRECTORY OR FILE] ./[SHORTCUT]

Mau or may not be of use.

* * *

## 回答 #14

> 赞同：-1
> 
> 时间：2022-01-05T11:28:53.040

我阅读了所有这些内容，但它们似乎不适用于 macOS Monterey。然后我将标题从更改`#!/bin/sh`为`#!/bin/zsh`，这似乎起到了作用。

# asp.net-mvc - “部署” ASP.NET MVC 项目的命令行

> ID：589152
> 
> 赞同：3
> 
> 时间：2009-02-26T04:51:50.553
> 
> 标签：asp.net-mvc, visual-studio-2008, deployment, build-process

我正在使用 Visual Studio Team Suites 开发一个 ASP.NET MVC 项目。我可以使用 IS 中的“部署”项将 Web 应用程序部署到我的开发机器。是否有命令行工具来执行此任务？我要做的是设置一个持续集成服务器（使用 TeamCity Pro），这样每当我签入新代码时，我都会得到一个新版本，部署到远程 IIS 服务器，然后在测试服务器上运行测试。

谢谢，-易

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-02-26T05:36:15.003

看起来微软有这样的部署工具。我自己从来没有用过。

[Scott Hanselman 在这里](http://www.hanselman.com/blog/MSDeployNewIISWebDeploymentTool.aspx)写过博客

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-02-26T17:09:21.123

MSDeploy，Microsoft 即将推出的命令行部署工具（将集成到 VS2010 中）目前在 Beta2 中可用。

信息： [http ://learn.iis.net/page.aspx/346/web-deployment-tool/](http://learn.iis.net/page.aspx/346/web-deployment-tool/)

下载（x86）： [http ://www.iis.net/downloads/default.aspx?tabid=34&g=6&i=1602](http://www.iis.net/downloads/default.aspx?tabid=34&g=6&i=1602)

下载（x64）： [http ://www.iis.net/downloads/default.aspx?tabid=34&g=6&i=1603](http://www.iis.net/downloads/default.aspx?tabid=34&g=6&i=1603)

此外，如果您可以从 CI 服务器访问要部署到的服务器，并且不需要从 GAC 安装/删除内容或调整 IIS 元数据库，那么普通的旧[robocopy](http://en.wikipedia.org/wiki/Robocopy)是一个不错的选择。

# c# - 调试/单步执行一些 java 代码的步骤？

> ID：589169
> 
> 赞同：1
> 
> 时间：2009-02-26T04:59:48.227
> 
> 标签：c#, java

是的，这是一个非常愚蠢的问题。我是一名 .NET 开发人员，我需要通过一些 java 代码来查看*到底*发生了什么，这样我就可以将一些 java 移植到一些 c# 中。到目前为止，我不需要这样做......直到现在。

所以..我对Java调试的*了解绝对为零。*所以有人可以用金发女郎解释我如何调试下面的java程序，特别是......下面的这一行/方法

[=>压缩](http://www.julienlecomte.net/yuicompressor/yuicompressor-2.4.2.zip "YUI 压缩器 2.4.2")代码源，在此处找到。
=> 代码行：`\src\com\yahoo\platform\yui\compressor\JavaScriptCompressor.java` :: line 550 ...`buildSymbolTree();`

现在，更让我尴尬的是，我不知道我需要下载什么程序，我需要执行哪些步骤来添加这个 java 项目、添加断点、启动调试器等。

如果有人可以提供一些步骤来执行此操作，我将不胜感激。

哦..这将全部安装在运行 Windows XP 的虚拟 PC 上。这个虚拟电脑上唯一安装的东西（目前）是windows xp和java运行时（jre-6u12 ....）

谢谢！

## 步骤（将在更多信息出现时更新）

1.  [从这里](http://www.netbeans.org/)获取/安装 NetBeans Ide 。（用于调试 java 的程序）。
2.  （如何打开现有项目？）
3.  （如何打断点？）
4.  （如何开始调试..包括定义要在文件中读取的命令行参数？）
5.  （如何制作手表？）

## 维基模式

*   将此设为 wiki，以便其他人可以编辑/更新步骤。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-02-26T05:02:20.450

拿起[netbeans](http://www.netbeans.org/)或[Eclipse](http://www.eclipse.org/)；它们是带有不错调试器的不错的 IDE。如果你像我一样是个老屁，你也可以使用 jdb，它附带了其余的 java 东西。这是一个命令行工具，在概念上类似于 dbx 和 gdb。

好的，看起来可能需要更多细节。

您将需要一个 Java 环境。如果你抓住其中任何一个 IDE，你就可以选择一个。但是，您可以访问[http://java.sun.com](http://java.sun.com)并为您的环境下载 JDK。您需要 JDK，而不是 JRE（Java 运行时环境），因为您需要编译器和工具。

另一个很好的资源是[Java Tutorial](http://java.sun.com/docs/books/tutorial/)，它将引导您了解设置 aqnd 这样的基础知识（如果您想更深入地了解它，还可以教您该语言。）

一个警告：C# 几乎但不完全不同于 Java，但它隐藏在非常相似的语法下。在你的翻译中要小心，你得到的 Java 意味着你认为它的意思。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-26T08:36:25.350

您应该能够从 VS 转移您的调试技能，因为跨 netbeans 和 eclipse 的调试器非常相似。分配断点非常相似，我几乎可以肯定相同的热键用于单步执行代码。以下是一些不错的教程，可能对您有用。

[Eclipse 调试教程](http://eclipsetutorial.sourceforge.net/debugger.html) [NetBeans 调试](http://www.netbeans.org/kb/55/using-netbeans/debug.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-26T05:24:03.380

我已经很长时间没有使用它了......但它是一个独立的调试器：[http ://code.google.com/p/jswat/](http://code.google.com/p/jswat/)

我自己使用 Netbeans。对于您想要做的事情，如果您尝试 Netbeans 从现有源创建一个新的 Java 项目并从那里开始。

如果您使用过 Visual Studio 调试器，那么 Netbeans、Eclipse、JSwat 等应该很容易理解。

# c# - 动画完成或取消时，如何将动画的最终值设置为属性？

> ID：589170
> 
> 赞同：2
> 
> 时间：2009-02-26T04:59:58.617
> 
> 标签：c#, wpf, animation, dependency-properties

我尝试将 DependencyProperty 从一个值动画到目标值（在代码中），当动画完成（**或被取消**）时，将*最终*值设置为属性。最终值将是动画结束时的 To 值或取消动画时的*当前*计算值（由动画）。

默认情况下，动画没有这种行为，即使动画已经完成，它也不会改变实际值。

### 一次失败的尝试

前段时间我写了这个辅助方法来实现上述行为：

```
static void AnimateWithAutoRemoveAnimationAndSetFinalValue(IAnimatable element,
    DependencyProperty property,
    AnimationTimeline animation)
{
    var obj = element as DependencyObject;
    if (obj == null)
        throw new ArgumentException("element must be of type DependencyObject");
    EventHandler handler = null;
    handler = (sender, e) =>
    {
        var finalValue = obj.GetValue(property);
        //remove the animation
        element.BeginAnimation(property, null);
        //reset the final value
        obj.SetValue(property, finalValue);

        animation.Completed -= handler;

    };

    animation.Completed += handler;

    element.BeginAnimation(property, animation);
} 
```

**不幸的是，如果调用 BeginAnimation(property,null) 的人删除了动画，则 Completed 事件似乎不会触发**，因此在取消动画时我无法正确设置最终值。更糟糕的是我也无法删除事件处理程序......

有人知道如何以干净的方式做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-27T00:22:22.177

看起来您正试图在动画结束后开始动画之前将值设置回初始值。如果您停止动画（或动画时间线结束时），这实际上会自动发生。在 WPF 中，动画可以看作是属性当前值之上的值叠加。停止或删除动画将删除覆盖，并且先前的值现在将再次开始显示。原始值没有丢失，只是暂时被遮蔽了。

通常，将属性显式设置回其先前值是不好的做法，因为如果最初未在对象上本地设置该值，则会产生内存开销。此外，这可能会在以后引入微妙的问题。例如，如果旧值是从样式派生的，则如果样式更改，属性将不再更改。

如果您仍然觉得必须提取当前值并稍后恢复它，请使用 ReadLocalValue() 而不是 GetValue()。如果该值未在本地设置，这将返回 DependencyProperty.UnsetValue。然后，您可以根据属性最初是否具有本地值，有条件地调用 ClearValue() 或 SetValue()。

# c# - 在 WPF 中运行时渲染图像

> ID：589173
> 
> 赞同：7
> 
> 时间：2009-02-26T05:00:51.720
> 
> 标签：c#, wpf, image

我已经发布了几个与我遇到的这个问题相关的问题，我开始相信这是不可能的。这是背后的故事。

我有一个 ASP.NET 应用程序，我想从中生成一个 .png 图像。此 .png 图像需要从 XAML 或 WPF 可视树构造。因此，我必须在 STA 线程中生成 .png 图像。一切正常，直到我的 XAML/WPF 可视树包含一个图像（如在 System.Windows.Controls.Image 中）。我的 .png 文件生成正确，但 Image 元素不显示引用的图片。引用的图片位于远程 URL。不会引发任何错误或异常。

如何从包含 System.Windows.Controls.Image 元素的某些 XAML/WPF 可视化树创建 .png 图像？生成的 .png 必须包含 Image 元素中引用的图片。我以多种方式尝试了以下代码：

```
string address = "http://imgtops.sourceforge.net/bakeoff/o-png24.png";

WebClient webClient = new WebClient();
byte[] imageContent = webClient.DownloadData(address);

Image image = new Image();
using (MemoryStream memoryStream = new MemoryStream(imageContent))
{
  BitmapImage imageSource = new BitmapImage();
  imageSource.BeginInit();
  imageSource.StreamSource = memoryStream;
  imageSource.EndInit();
  image.Source = imageSource;
}

// Set the size
image.Height = 200;
image.Width = 300;

// Position the Image within a Canvas
image.SetValue(Canvas.TopProperty, 1.0);
image.SetValue(Canvas.LeftProperty, 1.0);

Canvas canvas = new Canvas();
canvas.Height = 200;
canvas.Width = 300;
canvas.Background = new SolidColorBrush(Colors.Purple);
canvas.Children.Add(image);

// Create the area
Size availableSize = new Size(300, 200);
frameworkElement.Measure(availableSize);
frameworkElement.Arrange(new Rect(availableSize));

// Convert the WPF representation to a PNG file            
BitmapSource bitmap = RenderToBitmap(frameworkElement);
PngBitmapEncoder encoder = new PngBitmapEncoder();
encoder.Frames.Add(BitmapFrame.Create(bitmap));

// Generate the .png
FileStream fileStream = new FileStream(filename, FileMode.Create);
encoder.Save(fileStream);

public BitmapSource RenderToBitmap(FrameworkElement target)
{
  int actualWidth = 300;
  int actualHeight = 200;

  Rect boundary = VisualTreeHelper.GetDescendantBounds(target);
  RenderTargetBitmap renderBitmap = new RenderTargetBitmap(actualWidth, actualHeight, 96, 96, PixelFormats.Pbgra32);

  DrawingVisual drawingVisual = new DrawingVisual();
  using (DrawingContext context = drawingVisual.RenderOpen())
  {
    VisualBrush visualBrush = new VisualBrush(target);
    context.DrawRectangle(visualBrush, null, new Rect(new Point(), boundary.Size));
  }

  renderBitmap.Render(drawingVisual);
  return renderBitmap;
} 
```

感谢您的帮助。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2009-02-26T06:23:35.513

您正在正确渲染输出位图，它只是您搞砸的输入位图:)。

BitmapImage 需要访问 StreamSource 属性，直到它触发 DownloadCompleted 事件，但是`Dispose()`MemoryStream 的“使用”块在它有机会之前！您可以简单地从 using 块中解开 MemoryStream 并让 GC 处理它（如果这样做，我建议将 BitmapImage.CacheOption 设置为 BitmapCacheOption.None，因此它直接使用流，而不是副本），但我会使用 UriSource 属性并在渲染前等待 DownloadComplete 事件。

# coding-style - 如何重构快速发展的代码？

> ID：589175
> 
> 赞同：6
> 
> 时间：2009-02-26T05:02:20.140
> 
> 标签：coding-style, refactoring, code-duplication

我有一些研究代码是真正的老鼠窝，到处都是重复的代码，显然需要重构。然而，代码库正在演变，因为我提出了新的主题变体并将它们融入代码库。我推迟重构这么久的原因是因为我觉得我花了几天时间提出好的抽象，看看什么样的设计模式适合哪里等等，我想尝试一些新的不可预见的想法使我的抽象完全不充分。换句话说，由于代码的发展速度，我真的不知道抽象线属于哪里，即使不乏（近似）重复，而且代码的一般混乱使得向其中添加东西成为现实痛。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-02-26T05:07:19.520

不要花这么长时间重构！

当您要对一段代码进行更改时，请考虑重构它以使更改更容易。

进行更改后，再次重构以清除该更改造成的损害。

在这两种情况下，将重构缩小并快速完成，然后继续。

您不必始终保持代码的原始状态，但请记住，如果您有良好的代码可以工作（当然，如果您有良好的单元测试），那么**快速运行会更容易。**

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-02-26T09:45:24.453

测试驱动开发：

红色，绿色，重构。冲洗，重复。

由于它是每个周期中的步骤之一，您会注意到通常会发生很多次要的重构。这就是它应该的方式。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-02-26T10:15:56.313

你的情况我很熟悉。在进行调查性编码时，您通常不知道“正确”的抽象是什么，并且正如您所说，它会随着每个新想法而改变。
其他海报建议：

*   持续的小重构，有助于避免陷入鼠窝的境地
*   测试驱动开发，这有助于找到好的、可重用的抽象。重要的是要注意，TDD 与其说是测试，不如说是做好的设计！

但是，对于调查研究代码还有另一种策略：原型。这似乎是你目前正在做的事情：尽快编码来证明一个概念。这没有什么问题，但原型应该*总是*被扔掉。调整它，直到您拥有所有必要的输入和知识，然后**丢弃****代码** 并重新开始 TDD 和持续重构，以及所有其他“正确地做事”策略。

 **不要保留任何代码。不要复制粘贴任何东西。不要回头提及它。用你的新知识重新开始。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-02-26T23:41:59.853

一次清理一点代码。总是当你接触一个班级时，尽量让班级保持在你接触之前的清洁状态（[“童子军规则”](http://www.informit.com/articles/article.aspx?p=1235624&seqNum=6)）。重构最好在非常小的步骤中完成，但非常频繁。

像重命名一些变量、拆分方法等只需要几秒钟或几分钟。大型重构，例如拆分或加入类，可能需要一两个小时（并且您以小步骤进行，以便所有测试至少每五分钟通过一次 - 否则您已进入[重构地狱](http://c2.com/cgi/wiki?RefactoringHell)，您应该恢复到最后一次已知的工作状态）。如果你需要几天或几周的时间来重构某些东西，那么它就不再是“重构”了——它更像是重写。

关于这个主题的一篇文章：http: [//blog.objectmentor.com/articles/2007/07/20/whats-your-unit-of-measure](http://blog.objectmentor.com/articles/2007/07/20/whats-your-unit-of-measure)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-02-26T06:17:19.163

至少把它放在像 Git 这样的分布式 SCM 中，这样当你破坏某些重构时，你可以分时地倒转时间以找到更改之前的提交，并且能够处理更改并将它们提交到分支中而不会干扰其他工作.

Gits 分支合并非常适合这样的事情，如果 2 个人并行进行了不兼容的更改，您将很容易知道，而不必担心其余代码。

由于上述原因，我还将在存储库中创建一个单独的分支，*仅*用于重构代码，并定期更新。这样，其他人不仅不会干扰您的进度，而且他们可以密切关注并查看最终会影响主分支的更改，以便他们可以先发制人地围绕这些更改进行编码。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-02-26T09:22:47.487

如果你已经知道哪里有重复，你不需要几天的时间来重构它。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-02-26T23:27:25.320

有时重写是唯一的选择。情况似乎如此。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-08-23T06:02:56.380

CloneDR在大型源系统[中](http://www.semanticdesigns.com/Products/Clone)查找重复的代码，包括精确的副本和接近未命中的代码，由语言语法参数化。它支持 Java、C#、COBOL、C++、PHP 和许多其他语言。

当它显示一组找到的克隆的参数化抽象时，它本质上是建议*您*重构代码并实现该抽象（作为方法、函数、类......）。

因此，运行 CloneDR 会获得要添加到代码中的潜在抽象列表，并通过调用抽象来替换克隆实例，从而重构代码，从而（在某种程度上）清理它。

更值得注意的是，当它显示在调用抽象所需的每个克隆站点上使用的参数绑定时，它通常显示一个错误的克隆实例，当绑定的参数在概念上不一致时很容易识别。如果参数绑定到名为 YYYY-MM-DD 的变量，其中一个是 YY-MM-DD，则“它的 4 位数年份”参数类型看起来违反了，在这种情况下，Y2K 修复已损坏。因此检查克隆绑定经常会发现错误。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-12-28T23:39:11.450

这是科学计算中非常普遍的问题。减少代码大小和复杂性的一些最有效的想法需要利用假设，而科学要求您不断改变这些假设。

您所能做的就是尝试随时重构您的代码，并且尽量不要将自己写进任何角落。还要与了解不弄乱的价值的好人一起工作。

# iphone - 如何在 UIWebView 中增加字体大小

> ID：589177
> 
> 赞同：38
> 
> 时间：2009-02-26T05:02:31.747
> 
> 标签：iphone, objective-c, cocoa-touch, uiwebview

如何增加或减少 UIWebview 字体大小，不使用 scalePageToFit:NO;

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2009-11-24T14:07:52.290

我有 2 个按钮 - A- 和 A+

```
@interface
NSUInteger textFontSize;

- (IBAction)changeTextFontSize:(id)sender
{
    switch ([sender tag]) {
        case 1: // A-
            textFontSize = (textFontSize > 50) ? textFontSize -5 : textFontSize;
            break;
        case 2: // A+
            textFontSize = (textFontSize < 160) ? textFontSize +5 : textFontSize;
            break;
    }

    NSString *jsString = [[NSString alloc] initWithFormat:@"document.getElementsByTagName('body')[0].style.webkitTextSizeAdjust= '%d%%'", 
                          textFontSize];
    [web stringByEvaluatingJavaScriptFromString:jsString];
    [jsString release];
} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-07-10T13:14:44.003

```
- (void)webViewDidFinishLoad:(UIWebView *)webView
{
    NSString *fontSize=@"143";
    NSString *jsString = [[NSString alloc]      initWithFormat:@"document.getElementsByTagName('body')[0].style.webkitTextSizeAdjust= '%d%%'",[fontSize intValue]];
    [myWebview stringByEvaluatingJavaScriptFromString:jsString];

} 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2009-02-26T06:08:28.843

目前没有公开的方式来直接操作 UIWebView 中的 DOM，也没有任何方便的方法来处理诸如字体大小之类的事情。我建议归档[Radars](http://bugreporter.apple.com/)。

话说回来。您可以像任何其他网页一样通过更改 CSS 来修改字体大小。如果这是不可能的（您不控制内容），您可以编写一个小的 javascript 函数来更改页面 DOM 中的 CSS 属性，并通过调用执行它：

```
- (NSString *)stringByEvaluatingJavaScriptFromString:(NSString *)script; 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-08-27T11:40:41.717

**斯威夫特 3**

```
public func webViewDidFinishLoad(_ webView: UIWebView) {        
    let textSize: Int = 300
    webView.stringByEvaluatingJavaScript(from: "document.getElementsByTagName('body')[0].style.webkitTextSizeAdjust= '\(textSize)%%'")
} 
```

**老斯威夫特**：

```
func webViewDidFinishLoad(webView: UIWebView) {
    let textSize: Int = 300

    webView.stringByEvaluatingJavaScriptFromString("document.getElementsByTagName('body')[0].style.webkitTextSizeAdjust= '\(textSize)%%'")
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-01-27T19:43:36.207

**斯威夫特 5 更新。** 这是来自@BLCs 建议的更新答案。

还修复了他的字符串中的双 %% 。

```
func webView(_ webView: WKWebView, didFinish navigation: WKNavigation!) {
    let textSize = 300
    let javascript = "document.getElementsByTagName('body')[0].style.webkitTextSizeAdjust= '\(textSize)%'"
    webView.evaluateJavaScript(javascript) { (response, error) in
        print()
    }
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-06-19T10:35:26.510

试试下面的代码：

```
NSString *setTextSizeRule = [NSString stringWithFormat:@"addCSSRule('body', '-webkit-text-size-adjust: %d%%;')",currentTextSize];
[_webview stringByEvaluatingJavaScriptFromString:setTextSizeRule]; 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-08-25T22:42:03.090

这是我在 UIWebView 中更改字体大小和颜色的方法：

```
 NSString *myString=@"Hello World!";
 int textFontSize=2;
 NSString *myHTML=[NSString stringWithFormat: @"<html><body><script>var str = '%@'; document.write(str.fontsize(%d).fontcolor('green'));</script></body></html>",myString,textFontSize];    
 [myWebView loadHTMLString:myHTML baseURL:nil]; 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2014-05-22T12:32:34.530

### ****试试这个简单的方法****

```
`- (void)webViewDidFinishLoad:(UIWebView *)webView
{
    int fontValue = 150;
    NSString *webviewFontSize = [NSString stringWithFormat:@"addCSSRule('body', '-webkit-text-size-adjust: %d%%;')",fontValue];
    [your_webview stringByEvaluatingJavaScriptFromString:webviewFontSize];
}` 
```

 *** * *

## 回答 #9

> 赞同：1
> 
> 时间：2017-04-12T22:12:06.407

在我的情况下，我使用 UISlider 作为字体大小，可以是任何浮点值

```
func webViewDidFinishLoad(_ webView: UIWebView) {

    if let fontSize: Float = (self.fontSizeSlider?.value) {
        webView.stringByEvaluatingJavaScript(from: "document.getElementsByTagName('body')[0].style.webkitTextSizeAdjust= '\(fontSize)%%'")
        print(fontSize)
    }

} 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2019-03-05T10:19:46.650

**在 SWIFT 中——**

```
let fontSize = 20
let fontSetting = "<span style=\"font-size: \(fontSize)\"</span>"
webView.loadHTMLString( fontSetting + myHTMLString, baseURL: nil) 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-01-27T06:26:17.030

通过在方法中将获取的 html 字符串中出现的字体大小更改为所需的字体大小（本示例中为 40）来更改获取的 HTML 数据的字体大小。

```
strHtml = [self htmlEntityDecode:strHtml];//parsing the html string

-(NSString *)htmlEntityDecode:(NSString *)string
{    
string = [string stringByReplacingOccurrencesOfString:@"14px;"   withString:@"40"];
string = [string stringByReplacingOccurrencesOfString:@"15px;"   withString:@"40"];
string = [string stringByReplacingOccurrencesOfString:@"16px;"   withString:@"40"];
string = [string stringByReplacingOccurrencesOfString:@"17px;"   withString:@"40"];
string = [string stringByReplacingOccurrencesOfString:@"18px;"   withString:@"40"];
string = [string stringByReplacingOccurrencesOfString:@"19px;"   withString:@"40"];
string = [string stringByReplacingOccurrencesOfString:@"20px;"   withString:@"40"];

 return string;
} 
```

所以html字符串：span style='font-size: 20px; 变为：span style='font-size: 40

注意：更改其他匹配项，例如 gt;、apos; 也可以将所需的字符串加载到您的 Webview 中。

# aop - 有没有人使用过 AOP 来检测循环引用？

> ID：589182
> 
> 赞同：0
> 
> 时间：2009-02-26T05:07:33.293
> 
> 标签：aop, circular-reference

我不知道，这样你就可以抛出一个 CircularReferenceException？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-09-24T02:05:51.070

您可能可以使用 cflow 标记该调用中使用的每个方法，然后将调用的方法存储在方面的静态列表中，以确定您是否再次调用相同的方法，并且根据您调用它的频率，您可以抛出你的异常。

我从来没有尝试过这样做，这只是一个猜测，但它应该可以工作。

[http://www.eclipse.org/aspectj/doc/released/progguide/language-joinPoints.html](http://www.eclipse.org/aspectj/doc/released/progguide/language-joinPoints.html)

# wireshark - 有哪些好的 Wireshark 教程？

> ID：589185
> 
> 赞同：19
> 
> 时间：2009-02-26T05:08:12.357
> 
> 标签：wireshark

我现在正在尝试了解如何使用 Wireshark，但刚开始阅读[官方手册时一点也不好玩。](http://www.wireshark.org/docs/wsug_html_chunked/index.html)它太详细了，由于信息超载，细节让我头疼:)

还有哪些更具指导性的教程？

谢谢！

**编辑：** WireShark 是一个网络数据包嗅探器，它对于调试网络应用程序非常有用。我正在开发网络应用程序，并计划将其用作调试工具，以使我作为程序员的工作更快乐。我想这是与编程相关的，例如询问有关 gbd、valgrind 或 mdb、dtrace、prstat、cat、visual studio 或 eclipse 的教程。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-02-26T05:36:59.213

我不一定会从 Wireshark 本身的教程开始。首先阅读 Wireshark 手册有点像阅读 Visual Studio 的帮助指南。如果您已经了解如何完成编程的基础知识，那么 IDE 自然会很有意义。

如果你在谷歌上找到一些关于以太网的一般教程（数据包的结构、TCP 和 UDP 数据如何从 A 点到 B 点等），那么 Wireshark 提供的信息自然会有意义。

要获得额外的奖励点，请查看 Cisco 的 OSI 模型 - 如果您能理解其中的每一层，那么您将对 Wireshark 告诉您的内容有深刻的理解。

如果您只想快速入门：[http ://www.youtube.com/watch?v=0bazkLeY6b4](http://www.youtube.com/watch?v=0bazkLeY6b4)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-21T00:48:02.840

这些应该这样做：

[Wireshark & Ethereal Network Protocol Analyzer Toolkit（Jay Beale 的开源安全）](https://rads.stackoverflow.com/amzn/click/com/1597490733)

[实用数据包分析：使用 Wireshark 解决现实世界的网络问题](https://rads.stackoverflow.com/amzn/click/com/1593271492)

# c# - 如何创建动态水晶报表

> ID：589189
> 
> 赞同：1
> 
> 时间：2009-02-26T05:11:11.787
> 
> 标签：c#, asp.net, crystal-reports, report

我们能够在网格视图中动态显示数据。我们让用户从 153 个表中选择一个表，在选择任何表时，我们能够生成一个包含所选表字段的复选框列表，并允许用户选择他选择的字段。按下显示数据按钮我们能够在网格视图中显示相应的数据。现在我的问题是如何使用 asp.net c# 在水晶报表中显示这些数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-18T14:10:50.677

If you are loading a dataset with the data you can set the crystal report datasource to the dataset.

```
cvwMain.ReportSource = New CustomersBasic() 
```

Example from [http://msdn.microsoft.com/en-us/magazine/cc301570.aspx](http://msdn.microsoft.com/en-us/magazine/cc301570.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-11T06:35:43.343

要生成 Dynamic Crystal 报告，请点击以下链接

[http://csharp.net-informations.com/crystal-reports/csharp-dynamic-crystal-reports.htm](http://csharp.net-informations.com/crystal-reports/csharp-dynamic-crystal-reports.htm)

[http://www.aspsnippets.com/Articles/Create-Crystal-Report-with-dynamic-columns-in-ASPNet-using-C-and-VBNet.aspx](http://www.aspsnippets.com/Articles/Create-Crystal-Report-with-dynamic-columns-in-ASPNet-using-C-and-VBNet.aspx)

# c# - C# 多连接与数据集

> ID：589197
> 
> 赞同：3
> 
> 时间：2009-02-26T05:14:22.060
> 
> 标签：c#, database

我使用 C# 和 SQL Server 2005，我需要关于如何填充我的对象的建议。

我有一个包含客户对象集合的客户集合。每个客户对象都包含一个 Orders 集合，其中包含一个订单集合。

我在我的客户集合上使用公共 Fetch() 方法来填充客户及其订单。

每个连接只能打开一个 DataReader，对吧。所以这意味着我需要一个连接来连接“SELECT * 客户”阅读器，而当我遍历客户阅读器时，我需要另一个连接来连接每个“SELECT * Orders WHERE CustomerId_fk = @Id”。

我的问题：您会建议我使用上述方式还是仅使用普通数据集？

编辑

我有 'SELECT * Customers WHERE Id = @Id' 而不是 'SELECT * Customers'。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-02-26T05:17:54.627

实际上，您的断言（“每个连接只能打开一个 DataReader”）是不正确的；您可以通过调整连接字符串来[启用 MARS （多个活动结果集），然后完成工作；](http://msdn.microsoft.com/en-us/library/h32h3abf(VS.80).aspx)当然，除了你仍然会有很多往返（n+1）。

我也不认为直接的选择是数据集。就个人而言，我会使用两个结果网格（来自单个查询或 2 个查询）并将它们在调用者处缝合在一起。

或者，使用带有`LoadWith<Customer>(c=>c.Orders);`( `DataLoadOptions`) 的 LINQ-to-SQL 之类的东西。即使没有`LoadWith`，它也会自动执行相同的 n+1 行为，只需为每个加载集合`Customer`（导航属性默认为延迟加载）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-02-26T05:23:26.063

我可能会使用 SqlDataAdapter 一次性查询到数据集。像这样的东西：

```
SqlDataAdapter adapter = new SqlDataAdapter("SELECT * FROM CUSTOMERS WHERE CustomerId = @id; SELECT * FROM ORDERS WHERE CustomerId = @id",connection);
adapter.Fill(dataSet); 
```

然后，我会使用这样的东西来建立关系：

```
dataSet.Relations.Add(new DataRelation("relationName", dataSet.Tables[0].Columns["CustomerId"], dataSet.Tables[1].Columns["CustomerId"]); 
```

这样，您只打开一个连接，查询所有数据，然后在内存中建立关系。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-26T07:31:19.923

我将扩展 Marcs 的答案。DataReader 可以同时读取多个结果集。因此，您可以执行以下操作：

```
string sql = "SELECT * FROM Customers; SELECT * FROM Orders;";
using (SqlCommand cmd = new SqlCommand(sql, connection))
using (SqlDataReader rd = cmd.ExecuteReader())
{

  while (rd.Read())
  {
    // Read customers
  }

  if (rd.NextResult())  // Change result set to Orders
  {
    while(rd.Read())
    {
      // Read orders
    }

  }
} 
```

您当然只会获取所需的数据，但您明白了。这允许您使用一个命令获取两个结果集。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-02-26T07:00:46.360

该死！我只是咬我的手并使用两个连接。

不过记得关闭它们和数据阅读器。

我不知道为什么，我就是不能让自己在任何地方使用 DataSet ......！

# c++ - 有什么理由不使用 Boost::shared_ptrs？

> ID：589208
> 
> 赞同：2
> 
> 时间：2009-02-26T05:21:14.197
> 
> 标签：c++, memory-management

我已经问了几个关于内存管理的问题（[这里](http://stackoverflow.com/questions/580053/when-should-i-use-a-vector-of-objects-instead-of-a-vector-of-pointers)和[这里](http://stackoverflow.com/questions/589076/when-is-it-not-a-good-idea-to-pass-by-reference)），并且总是有人建议我使用 boost::shared_ptrs。

鉴于它们看起来很有用，我正在认真考虑切换我的整个应用程序以使用 boost::shared_ptrs。

然而，在我双脚跳进去做这件事之前，我想问一下——有没有人对 boost::shared_ptrs 有任何不好的经历？使用它们是否有一些我需要注意的陷阱？

现在，它们似乎好得令人难以置信——自动处理我的大部分垃圾收集问题。有什么缺点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-02-26T05:32:35.683

缺点是它们不是免费的。您尤其不应该使用`shared_ptr`/ `shared_array`when `scoped_ptr`/ `scoped_array`（或普通的旧堆栈分配）。如果有的话，您需要手动中断循环`weak_ptr`。您链接到的向量问题是我可能会达到的一种情况 a `shared_ptr`，第二个问题我不会。不复制是一种过早的优化，特别是如果字符串类已经为你做了。如果字符串类是引用计数的，它也将能够正确地实现 COW，而这实际上是用该方法无法完成的`shared_ptr<string>`。随意使用`shared_ptr`也会引入与外部库/api 的“界面摩擦”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-02-26T05:27:58.113

在 C++ 中提升共享指针或任何其他内存管理技术都不是灵丹妙药。仔细编码是无可替代的。如果您深入使用 boost::shared_ptr，请注意对象所有权并避免循环引用。您将需要显式中断循环或在必要时使用 boost::weak_ptr。

还要小心，从分配实例的那一刻起，始终对实例使用 boost::shared_ptr。这样你就可以确定你不会有悬空的引用。确保这一点的一种方法是使用工厂方法，在 shared_ptr 中返回新创建的对象。

```
typedef boost::shared_ptr<Widget> WidgetPtr;
WidgetPtr myWidget = Widget::Create(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-05T22:11:40.110

我经常使用 shared_ptr。

由于 Shared_ptr 是按值复制的，因此您可能会产生复制指针值和引用计数的成本，但是如果使用 boost::intrusive_ptr，则必须将引用计数添加到您的类中，并且上面没有额外的开销使用原始指针的方法。

但是，根据我的经验，在超过 99% 的情况下，在整个代码中复制 boost::shared_ptr 实例的开销是微不足道的。通常，正如 CAR Hoare 所指出的，过早的优化是没有意义的——大多数情况下，其他代码将使用比复制小对象的时间更多的时间。你的旅费可能会改变。如果分析显示复制是一个问题，您可以切换到侵入式指针。

如上所述，必须使用weak_ptr 来打破循环，否则会出现内存泄漏。这将发生在诸如某些图之类的数据结构中，但是，例如，如果您正在制作一个叶子永远不会向后指向的树结构，您可以将 shared_pointers 用于树的节点而不会出现任何问题。

正确使用 shared_ptr 可以极大地简化代码，使其更易于阅读和维护。在许多情况下，使用它们是正确的选择。

当然，如前所述，在某些情况下，使用 scoped_ptr（或 scoped_array）是正确的选择。如果指针未被共享，请不要使用共享指针！

最后，最新的 C++ 标准提供了 std::tr1::shared_ptr 模板，它现在在大多数平台上，虽然我认为 tr1 没有侵入式指针类型（或者更确切地说，可能有，但我有我自己没听说过）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-02-26T05:27:42.730

动态内存开销（即额外分配）加上与引用计数智能指针相关的所有开销。

# monitor - 健康发展的显示器尺寸、类型和亮度

> ID：589223
> 
> 赞同：7
> 
> 时间：2009-02-26T05:27:45.350
> 
> 标签：monitor

如果你每天盯着显示器看代码 8-12 小时，我有几个问题要问那些可能已经研究过健康因素或尝试过一些选择的人。

1.  为了方便起见，显示器可以“太大”吗？
2.  是否有一种特定类型的显示技术可以减少眼睛疲劳？
3.  相对于您的环境，您的显示器应该有多亮？在较暗的环境中拥有明亮的环境和明亮的显示器是否会减少疲劳？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-02-26T13:33:05.950

如果你担心眼睛疲劳，别忘了低科技的解决方案：每 30 分钟，向后靠，闭上眼睛，休息 10 秒。或者，如果你不想看起来像在打盹，凝视窗外或房间对面。无论您是盯着显示器、书还是乐谱，都应该这样做。一次盯着*任何东西*看几个小时会让你的眼睛疲劳。

我使用[免费的计时器程序](http://www.xnotestopwatch.com/)来告诉我 30 分钟到了。每当我忘记这样做时，我的眼睛总是在一天结束时感到发痒和疲倦。

我知道这不能回答您提出的确切问题，但我认为您在错误的地方寻找解决方案。与其投资新显示器，不如定期休息一下。那里。我刚给你省了几百块钱。

编辑：已请求参考，所以在这里。[这里](http://www.workpace.com/MOREBREAKSRESEARCH)有一篇关于微中断价值的不错的科学文章，[这里](http://www.sciencedirect.com/science?_ob=ArticleURL&_udi=B6V1W-42MW5CH-3&_coverDate=06%2F30%2F2001&_alid=157349720&_rdoc=1&_fmt=&_orig=search&_qd=1&_cdi=5685&_sort=d&view=c&_acct=C000050221&_version=1&_urlVersion=0&_userid=10&md5=7e434b02fd7e93f8141bf68874d2615f)有一篇文献综述。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-02-26T09:11:11.990

我一直使用显示器尺寸（分辨率）和桌面尺寸之间的类比 - 更大的屏幕，更多的空间来展开和工作。

比物理尺寸更重要的是你如何设置它——大多数人的显示器设置**得太**亮了*。*

 **我通常从最大对比度和最小亮度开始，然后从那里开始工作。屏幕上的黑色应该是真正的黑色，而不是深灰色；屏幕上的白色不应比旁边的一张纸亮。

也就是说，我确实有很好的屏幕。工作时，双 22" 1680x1050 LCD；在家时，双 19" 1200x1024 CRT；我的笔记本电脑是 1920x1200 17"。我试用了一个 24" LCD - 非常好，没有双显示器设置那么宽。

*3 月 1 日更新*：`rtpearson`定期远离显示器的建议是很好的建议。

（几年前）有人告诉我，定期改变焦距对你的眼睛很重要。

如果你有一个靠窗的座位，那么在你认为是实现这一点的好方法的同时向外面看一眼。向同一楼层的同事*“发送电子邮件”也会有所帮助。*使用计时器（[例如我写的这个](http://www.nichesoftware.co.nz/oosalarm)）来提醒你休息和休息你的眼睛也很有用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-26T09:16:49.107

我不确定这是否重要。我曾在投资银行工作，那里通常使用多个高分辨率屏幕，目前我正在家里开发一台 9 年前的索尼笔记本电脑，屏幕分辨率为 1024 x 768。在那些非常不同的环境中，我没有注意到我的工作效率或眼睛疲劳有任何差异。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-02-26T09:21:15.273

在亮度方面，对我有用的是调整显示器的亮度以匹配房间内的环境光。目前我正在运行 24 英寸三星 Syncmaster，我不得不说，我认为将其置于最亮的环境会危害健康。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-02-28T01:02:37.797

有很多网站可以帮助您校准显示器亮度/对比度。这只是一个[http://www.displaycalibration.com/brightness_contrast.html](http://www.displaycalibration.com/brightness_contrast.html)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-02-26T05:35:12.790

我家里有一台 24 英寸的戴尔，但我怀疑很多公司会考虑将其用于开发机器。

1680 x 1050 分辨率的 22 英寸宽屏不错，而且这些显示器的价格现在相对便宜。

目前我正在使用 17" 1280 x 1024，因为我要开发的笔记本电脑只有一个微不足道的 1280 x 800 屏幕，这对于编码几乎没有用处。

IMO 2 x 17" 或 19"，或 1 x 22" 或更大。

注意：大多数便宜的 LCD 的颜色都很糟糕，例如 SO 上的橙色，看起来是淡黄色，这是我能得到的最好的。戴尔的价格是便宜的 24 英寸的 5 倍，没有这些问题，但你要为此付出代价：（（我仍然认为这是一项非常好的投资）！

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-02-26T06:02:30.150

24 英寸对我来说是最小的，而 1680x1050 的点对于有效编码来说太少了。我更喜欢 1920 x 1200 或更好的双显示器。我*真的很*想要一对 30 英寸的三星，但我需要变得更富有。亮度和所有其他东西从来没有对我产生太大影响..因为无论如何我总是在晚上编码，这不是什么大问题

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-03-02T04:20:04.653

如果您使用 CRT 屏幕，请确保将刷新率设置得又高又好。85Hz 是一个不错的值。Windows 上 60Hz 的默认速率太低。闪烁让我感到恶心。由于高“持久性”，LCD屏幕上的刷新率并不重要。

大多数人不知道这一点，并将屏幕保持在 60Hz。然而，奇怪的是，从个人经验来看，如果你直接告诉他们“你的刷新率是错误的”，他们中的许多人会为他们的刷新率辩护！——他们甚至可能不知道它是什么。人们很奇怪。我很高兴 LCD 正在取代 CRT。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-04-08T13:53:43.457

首先，是的，屏幕尺寸有限制。我认为显示器最好不要大于 30 英寸。这也是大多数品牌只发布屏幕尺寸为 19 到 27 英寸的显示器的原因。尽管您也可以找到屏幕尺寸为 100 英寸的显示器，但这并不常见。我猜制造商做了研究并找出了最可接受的屏幕尺寸范围。其次，已经有一些技术。例如，BenQ 有一项名为 Flicker-free 的技术。“无闪烁技术可消除所有亮度级别的闪烁，并有效减少眼睛疲劳。” 还有其他规格。我还听说一些实验室正在研究电子墨水显示器。第三，很难给出准确的亮度数量。这取决于环境光。另一方面，有些人对亮度敏感，有些人则不敏感。最好尝试不同的价值观，找到适合自己的最佳方式。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-10-29T22:14:51.033

`f.lux`如果您在明亮的背景下编码，该应用程序可以在晚上提供真正的帮助。它可以减少屏幕中的蓝色，从而减少眼睛疲劳。将设置更改为 1 小时而不是默认的 20 秒，您甚至不会注意到它。

![在此处输入图像描述](https://i.stack.imgur.com/3yOls.png)

## [https://justgetflux.com/](https://justgetflux.com/)

# flash - 将影片加载到创建的影片剪辑中 - 目标消失（？）

> ID：589226
> 
> 赞同：0
> 
> 时间：2009-02-26T05:29:53.770
> 
> 标签：flash, actionscript, actionscript-2

我觉得我之前已经做了一百万次就好了，但在这种情况下它只是失败了：

我正在创建一个影片剪辑并将一个外部 swf 文件加载到其中，如下所示：

```
large_poem_clip_display = preview_clip._parent.attachMovie ("cyber poem display window" , "cyber_display" , preview_clip._parent.getNextHighestDepth() );
large_poem_clip_display.load_here.createEmptyMovieClip("inside",1);
large_poem_clip_display.load_here.inside.loadMovie( "path/to/swf" ) ; 
```

所有涉及的影片剪辑似乎都存在 - 它们跟踪合理的值，但是当我尝试 loadMovie 时，出现以下错误：

```
Target not found: Target="/cyber_display/load_here/inside" Base="_level0.cyber_display.load_here.inside" 
```

我目前只是在转圈，有人知道在哪里看吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-02-27T06:40:50.440

我不确定我是否完全理解您的代码，但您的第一行代码似乎是问题所在。您将 large_poem_clip_display 声明为变量；您不能将 attachMovie 方法用作变量值。

我建议先做你的attachmovie。然后在单独的一行中，将 large_poem_clip_display 设置为刚刚附加的新电影的实例名称。

就像是：

```
preview_clip.attachMovie ("cyber poem display window" , "cyber_display" , preview_clip.getNextHighestDepth() );
large_poem_clip_display = preview_clip.cyber_display; 
```

希望这可以帮助你。

# php - 使用 PHP 发送带有 WSDL Soap 请求的 Soap 标头

> ID：589228
> 
> 赞同：4
> 
> 时间：2009-02-26T05:31:31.443
> 
> 标签：php, asp.net, web-services, soap

我对 SOAP 非常陌生，我正在尝试在 PHP 中实现一个使用 ASP.NET Web 服务的快速测试客户端。Web 服务依赖于包含授权参数的 Soap Header。

使用 WSDL 时是否可以将 auth 标头与soap请求一起发送？

我的代码：

# php

```
$service = new SoapClient("http://localhost:16840/CTI.ConfigStack.WS/ATeamService.asmx?WSDL");
$service->AddPendingUsers($users, 3); // Example 
```

# 网络服务

```
[SoapHeader("AuthorisationHeader")]
[WebMethod]
public void AddPendingUsers(List<PendingUser> users, int templateUserId)
{
    ateamService.AddPendingUsers(users, templateUserId, AuthorisationHeader.UserId);
} 
```

在这种情况下如何传递 auth 标头？还是我需要做一个低杠杆 __soapCall() 来传递标题？另外，我是否在 PHP 中调用了正确的肥皂调用？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-02-26T09:05:09.730

您应该能够创建一个标头，然后将其添加到客户端，以便为所有后续请求发送它。您可能需要更改命名空间参数。

```
$service = new SoapClient("http://localhost:16840/CTI.ConfigStack.WS/ATeamService.asmx?WSDL");
//                        Namespace               Header Name          value   must-understand
$header = new SoapHeader('http://tempuri.org/', 'AuthorisationHeader', $value, false);
$service->__setSoapHeaders(array($header));   

$service->AddPendingUsers($users, 3); // Example 
```

更多信息[在这里](http://uk.php.net/manual/en/soapheader.construct.php)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-02-26T09:09:59.513

```
$client = new SoapClient(PassportWebService);
$apiauth =array('userName'=>HeaderName,'password'=>HeaderPassport,'ip'=>$onlineip);

$authvalues = new SoapVar($apiauth, SOAP_ENC_OBJECT,'ReqHeader',"SoapBaseNameSpace");
$header =  new SoapHeader("SoapBaseNameSpace","ReqHeader", $authvalues, true);
$client->__setSoapHeaders(array($header)); 
```

# c# - 截取带有工具提示和光标可见的屏幕截图

> ID：589230
> 
> 赞同：-5
> 
> 时间：2009-02-26T05:33:12.047
> 
> 标签：c#, cursor, tooltip, screenshot

这是我用来截屏的代码：

```
[DllImport("gdi32.dll",EntryPoint="DeleteDC")]
public static extern IntPtr DeleteDC(IntPtr hDc);

[DllImport("gdi32.dll",EntryPoint="DeleteObject")]
public static extern IntPtr DeleteObject(IntPtr hDc);

[DllImport("gdi32.dll",EntryPoint="BitBlt")]
public static extern bool BitBlt(IntPtr hdcDest,int xDest,
    int yDest,int wDest,int hDest,IntPtr hdcSource,
    int xSrc,int ySrc,int RasterOp);

[DllImport ("gdi32.dll",EntryPoint="CreateCompatibleBitmap")]
public static extern IntPtr CreateCompatibleBitmap(IntPtr hdc,
    int nWidth, int nHeight);

[DllImport ("gdi32.dll",EntryPoint="CreateCompatibleDC")]
public static extern IntPtr CreateCompatibleDC(IntPtr hdc);

[DllImport ("gdi32.dll",EntryPoint="SelectObject")]
public static extern IntPtr SelectObject(IntPtr hdc,IntPtr bmp);

[DllImport("user32.dll", EntryPoint="GetDesktopWindow")]
public static extern IntPtr GetDesktopWindow();

[DllImport("user32.dll",EntryPoint="GetDC")]
public static extern IntPtr GetDC(IntPtr ptr);

[DllImport("user32.dll",EntryPoint="GetSystemMetrics")]
public static extern int GetSystemMetrics(int abc);

[DllImport("user32.dll",EntryPoint="GetWindowDC")]
public static extern IntPtr GetWindowDC(Int32 ptr);

[DllImport("user32.dll",EntryPoint="ReleaseDC")]
public static extern IntPtr ReleaseDC(IntPtr hWnd,IntPtr hDc);

public static Bitmap GetDesktopImage()
{
    //In size variable we shall keep the size of the screen.
    SIZE size;          

    //Variable to keep the handle to bitmap.
    IntPtr hBitmap;

    //Here we get the handle to the desktop device context.
    IntPtr  hDC = GetDC(GetDesktopWindow());

    //Here we make a compatible device context in memory for screen
    //device context.
    IntPtr hMemDC = CreateCompatibleDC(hDC);

    //We pass SM_CXSCREEN constant to GetSystemMetrics to get the
    //X coordinates of the screen.
    size.cx = GetSystemMetrics(SM_CXSCREEN);

    //We pass SM_CYSCREEN constant to GetSystemMetrics to get the
    //Y coordinates of the screen.
    size.cy = GetSystemMetrics(SM_CYSCREEN);

    //We create a compatible bitmap of the screen size and using
    //the screen device context.
    hBitmap = CreateCompatibleBitmap
        (hDC, size.cx, size.cy);

    //As hBitmap is IntPtr, we cannot check it against null.
    //For this purpose, IntPtr.Zero is used.
    if (hBitmap!=IntPtr.Zero)
    {
        //Here we select the compatible bitmap in the memeory device
        //context and keep the refrence to the old bitmap.
        IntPtr hOld = (IntPtr)SelectObject
            (hMemDC, hBitmap);
        //We copy the Bitmap to the memory device context.
        BitBlt(hMemDC, 0, 0,size.cx,size.cy, hDC,0, 0,SRCCOPY);
        //We select the old bitmap back to the memory device context.
        SelectObject(hMemDC, hOld);
        //We delete the memory device context.
        DeleteDC(hMemDC);
        //We release the screen device context.
        ReleaseDC(GetDesktopWindow(), hDC);
        //Image is created by Image bitmap handle and stored in
        //local variable.

        Bitmap bmp = System.Drawing.Image.FromHbitmap(hBitmap); 
        //Release the memory to avoid memory leaks.
        DeleteObject(hBitmap);
        //This statement runs the garbage collector manually.
        GC.Collect();
        //Return the bitmap 
        return bmp;
    }
    //If hBitmap is null, retun null.
    return null;
} 
```

它确实捕获了屏幕截图，但我想截取带有可见工具提示的屏幕截图。我必须添加什么才能在工具提示和光标可见的情况下截屏？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-02-26T05:52:20.893

[如http://blog.falafel.com/2008/08/12/CaptureScreenShotsWithToolTipsAndPopupsUsingVistaSnippingTool.aspx](http://blog.falafel.com/2008/08/12/CaptureScreenShotsWithToolTipsAndPopupsUsingVistaSnippingTool.aspx)中给出的，Vista 有一个截图工具可以轻松做到这一点。

还有一个通过 Silverlight 的应用程序：http: [//blogs.msdn.com/swick/archive/2007/12/18/snipping-pictures-with-silverlight.aspx](http://blogs.msdn.com/swick/archive/2007/12/18/snipping-pictures-with-silverlight.aspx)

我不知道截图工具是否有源代码。您可以尝试拍摄视频，然后对视频的一部分进行快照，如此处[所示](http://www.codeproject.com/KB/audio-video/CaptureScreenAsVideo.aspx)。

# java - 延迟批处理文件的运行

> ID：589231
> 
> 赞同：0
> 
> 时间：2009-02-26T05:33:22.547
> 
> 标签：java

我以前问过这个问题。我有以下要求。

1.  运行批处理文件。
2.  给一些时间来运行批处理文件。3.关闭批处理文件

我有以下不符合要求的代码。请告诉我哪里出错了

```
 Runtime rt = Runtime.getRuntime();
        Process pr = rt.exec(command);
       //pr.exitValue();
        //wait(10000);
        pr.waitFor();
        pr.destroy(); 
```

我使用了不起作用的waitFor。执行批处理文件后如何延迟约 15 分钟

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-26T06:04:30.427

如果没有线程从批处理中读取 stdIO，批处理可能会阻塞。即使您不感兴趣，您仍然需要阅读并丢弃它。然后你的等待有更好的工作变化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-26T05:41:23.010

一个建议：获取输出和错误流并查看它们打印出来的内容。您可能会看到批处理文件发生错误，导致它比您预期的更快返回。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-26T05:41:53.773

我不确定你想要什么，但是

线程.sleep(900000);

你可以等15分钟。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-27T21:32:55.847

您的问题没有提到延迟 Java。您暗示延迟应该在Java程序执行后的批处理文件中。因此，您可以将其配置为任意时间。这是一个 20 秒的示例：

```
@ECHO off
REM.-- End of application
:: do something here
GOTO :END
:: you could put functions here
:END
FOR /l %%a in (20,-1,1) do (TITLE %title% -- closing in %%as&ping -n 2 -w 1 127.0.0.1>NUL)
TITLE Press any key to close the application&ECHO.&GOTO:EOF
PAUSE>nul 
```

# unit-testing - 单元测试自定义 StyleCop 规则

> ID：589235
> 
> 赞同：3
> 
> 时间：2009-02-26T05:35:37.190
> 
> 标签：unit-testing, stylecop

我想知道对自定义 SytleCop 规则进行单元测试的最佳方法是什么。我读过[这个](http://sergeyshishkin.spaces.live.com/blog/cns!9F19E53BA9C1D63F!232.entry)，但希望有更好的解决方案。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2010-09-03T13:05:52.807

[CodePlex](http://stylecopcontrib.codeplex.com/)有一个名为 StyleCop Contrib 的项目，他们在其中对自定义规则进行了单元测试。

# jquery - jQuery 如何在 ajax 回调后重新绑定此事件？

> ID：589238
> 
> 赞同：3
> 
> 时间：2009-02-26T05:36:41.803
> 
> 标签：jquery

我试图通过操作 jQuery 选择器自己创建一个文本编辑。但是，在第一个 ajax 回调之后，相同输入文本的其他回调不再起作用......

```
function editaVal(celDiv, id)
    {
        var novoConteudo = $("<input type='text' id='novoCont" + id + "' value='" + $(celDiv).html() + "' />");
        $(celDiv).dblclick(function()
        {
            $(this).html(novoConteudo);
        });

        $(novoConteudo).blur(function()
        {
            $(novoConteudo).parents("tr").removeClass('trSelected');
            $.ajax({
                type: 'POST',
                url: '/SuperAdmin/SalvaValor/?busca=' + $(novoConteudo).val() + '&codValor=' + id,
                beforeSend: function()
                {
                    $(celDiv).html($("#loading").show());
                },
                success: function()
                {
                    $(celDiv).html($("#loading").hide());
                    $(celDiv).html(novoConteudo.val());
                }
            });
        });
    } 
```

我的问题是：我怎样才能重新绑定这个？？？重新绑定模糊事件...当我模糊输入文本时，第二个 ajax 回调没有任何反应。

谢谢！！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-02-26T05:41:44.850

您可以使用[jQuery.live](http://docs.jquery.com/Events/live)（jQuery 1.3+）。它将处理程序绑定到所有当前 **和未来**匹配元素的事件。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-02-26T06:09:56.110

您正在将`"onblur"`处理程序附加到在 ajax 更新后被清除的元素。如果您希望事件持续存在，只需*在创建它时绑定它*（即在 上`dblclick`）：

```
function editaVal(celDiv, id)
{
    $(celDiv).dblclick(function()
    {
        var text = $(this).html();
        var novoConteudo = $('<input type="text" />')
            .appendTo($(this).empty())
            .attr('id', 'novoCont' + id)
            .val(text)
            .blur(function()
            {
                $(this).parents("tr").removeClass('trSelected');
                $.ajax({
                    type: 'POST',
                    url: '/SuperAdmin/SalvaValor/?busca=' + $(this).val() + '&codValor=' + id,
                    beforeSend: function()
                    {
                        $(celDiv).html($("#loading").show());
                    },
                    success: function()
                    {
                        $(celDiv).html($("#loading").hide());
                        $(celDiv).html(novoConteudo.val());
                    }
                });
            });
    });
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-02-26T05:56:44.160

如果您创建一个单独的函数来设置页面或重新绑定控件，然后在 Ajax 调用成功时调用该函数，这可能会起作用。

编辑
试试这个...

```
success: function()                
{                    
     $(celDiv).html($("#loading").hide());                    
     $(celDiv).html(novoConteudo.val());     
     ConfigMyInputs();           
}

function ConfigMyInputs()
{
     //foreach item
     //configure double click
     //configure blur
}

function MakeMyAjaxCall() {
    //AJAX CODE HERE
} 
```

# objective-c - 如何分配动态类型对象

> ID：589240
> 
> 赞同：7
> 
> 时间：2009-02-26T05:37:48.213
> 
> 标签：objective-c, dynamic, allocation

我在 Objective-c 中看到了很多关于动态类型的讨论。但我还没有看到任何我认为应该是的例子。

假设我有一个通用函数，它应该处理两个对象（一个被分配，另一个被释放）并且调用对象将它自己附加到新分配的对象。两者都继承自 class0

如果您认为它会解释某些内容，请随意解释它！

如果在运行时选择类，我如何处理参数列表（？现在是一个占位符）我如何分配一个直到运行时才定义类的对象？

```
-(void) juggle:(?*)objclass1:(?*)objclass2{

? temp = [? alloc] init];
objclass1 = temp;
[temp release];

[objclass2.view removefromsuperview];
[self.handle insertsubview:objclass1.view];

} 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2009-02-26T06:02:49.777

我不知道您那里的代码要做什么，它在语法上无效，并且操纵视图与您的问题无关。无论如何，如果你真的不知道你通常使用“id”的类型，它是类型转换为代码生成的“void *”。它具有假定接收任何消息的特殊属性，因此它不会针对未知消息触发编译器警告。

为了实例化一个类，您只需要为其持有“类”对象。在 Objective C 中，一个类的所有实例都引用一个 Class 对象（遗留运行时中的 isa 指针），它也响应方法。换句话说，在下面的代码中：

```
NSArray *myObject = [[NSArray alloc] init]; 
```

NSArray 实际上是一个对象。所以这将生成等效的代码结果：

```
Class myClass = [NSArray class];
NSArray *myObject = [[myClass alloc] init]; 
```

甚至

```
Class myClass = NSClassFromString(@"NSArray");
NSArray *myObject = [[myClass alloc] init]; 
```

它使用函数 NSClassFromString 进入运行时并找到一个具有您传入的名称的类。

如果使用类 getter，所有对象都会返回它们的类，因此要实例化与现有对象具有相同类的对象，如下所示：

```
- (void) leakObjectWithSameClassAs:(id)object {
    [[[object class] alloc] init];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-26T06:37:53.640

这就是我现在拥有的

```
- (void)flipfromv1tov2:(UIViewController*)v1:(NSString*)nib1:(UIViewController*)v2{

    if(v1 == nil)
    {
        UIViewController *newview = [[[v1 class] alloc] initWithNibName:nib1 bundle:nil];
        v1 = newview;
        [newview release];
    }
    [v2.view removeFromSuperview];
    [self.view insertSubview:v1.view atIndex:0];    
} 
```

我还不能验证它，因为我有一个链接问题......我将此函数添加到我的根控制器，但由于某种原因，我收到一个警告，该函数是隐式声明的。并且构建失败，因为函数调用永远不会链接到任何东西

# linq-to-sql - TreeView，Linq-To-SQL 递归数据填充

> ID：589243
> 
> 赞同：3
> 
> 时间：2009-02-26T05:39:30.847
> 
> 标签：linq-to-sql, treeview, hierarchy

我有一个 IEnumerable(of Employee) 与自身的 ParentID/ChildID 关系，我可以将其数据绑定到 TreeView 并完美地填充层次结构。但是，我希望能够手动循环遍历所有记录并以编程方式创建所有节点，以便我可以根据给定项目/无的数据更改每个节点的属性。

有没有解释如何做到这一点的教程？我见过很多使用数据集和数据表的，但没有一个显示如何在 Linq to SQL (IEnumerable) 中做到这一点

更新：

这是我过去使用 DataSet 的方法 - 我似乎无法找到如何使用 IEnumerable 来做同样的事情。

```
Private Sub GenerateTreeView()
        Dim ds As New DataSet()

        Dim tasktree As New Task(_taskID)

        Dim dt As DataTable = tasktree.GetTaskTree()

        ds.Tables.Add(dt)

        ds.Relations.Add("NodeRelation", dt.Columns("TaskID"), dt.Columns("ParentID"))

        Dim dbRow As DataRow
        For Each dbRow In dt.Rows
            If dbRow("TaskID") = _taskID Then
                Dim node As RadTreeNode = CreateNode(dbRow("Subject").ToString(), False, dbRow("TaskID").ToString())
                RadTree1.Nodes.Add(node)
                RecursivelyPopulate(dbRow, node)
            End If
        Next dbRow
    End Sub 

    Private Sub RecursivelyPopulate(ByVal dbRow As DataRow, ByVal node As RadTreeNode)
        Dim childRow As DataRow
        Dim StrikeThrough As String = ""
        Dim ExpandNode As Boolean = True
        For Each childRow In dbRow.GetChildRows("NodeRelation")
            Select Case childRow("StatusTypeID")
                Case 2
                    StrikeThrough = "ActiveTask"
                Case 3
                    StrikeThrough = "CompletedTask"
                    ExpandNode = False
                Case 4, 5
                    StrikeThrough = "ClosedTask"
                    ExpandNode = False
                Case Else
                    StrikeThrough = "InactiveTask"
                    ExpandNode = False
            End Select
            Dim childNode As RadTreeNode = CreateNode("<span class=""" & StrikeThrough & """><a href=""Task.aspx?taskid=" & childRow("TaskID").ToString() & """>" & childRow("Subject").ToString() & "</a></span>", ExpandNode, childRow("TaskID").ToString())
            node.Nodes.Add(childNode)
            RecursivelyPopulate(childRow, childNode)
            ExpandNode = True
        Next childRow
    End Sub

    Private Function CreateNode(ByVal [text] As String, ByVal expanded As Boolean, ByVal id As String) As RadTreeNode
        Dim node As New RadTreeNode([text])
        node.Expanded = expanded

        Return node
    End Function 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-02-26T07:07:53.520

如果您只需要一种枚举树的方法，您可以将其实现为生成器，它可能看起来很奇怪，您可能最好使用用户定义的枚举器，但它本质上是相同的。

```
public interface IGetChildItems<TEntity>
{
    IEnumerable<TEntity> GetChildItems();
}

public static IEnumerable<TEntity> Flatten<TEntity>(TEntity root)
    where TEntity : IGetChildItems<TEntity>
{
    var stack = new Stack<TEntity>();
    stack.Push(root);
    while (stack.Count > 0)
    {
        var item = stack.Pop();
        foreach (var child in item.GetChildItems())
        {
            stack.Push(child);
        }
        yield return item;
    }
} 
```

TEntity : IGetChildItems 的类型约束只是表示您需要抽象如何下降层次结构。没有上面的代码就无法编译。

这将以广度优先的方式枚举树，它将首先产生父元素，然后是子元素，然后是这些子元素的子元素。您可以轻松自定义上述代码以实现不同的行为。

### 编辑：

yield return 告诉编译器它应该返回一个值然后继续。yield 是一个上下文关键字，它只允许在迭代语句中使用。生成器是编写 IEnumerable 数据源的一种简单方法。编译器将从这段代码构建一个状态机并创建一个可枚举的匿名类。显然 VB.NET 中不存在 yield 关键字。但是您仍然可以编写一个执行此操作的类。

```
Imports System
Imports System.Collections
Imports System.Collections.Generic

Public Class HierarchyEnumerator(Of TEntity As IGetChildItems(Of TEntity))
    Implements IEnumerator(Of TEntity), IDisposable, IEnumerator

    Public Sub New(ByVal root As TEntity)
        Me.stack = New Stack(Of TEntity)
        Me.stack.Push(root)
    End Sub

    Public Sub Dispose()
    End Sub

    Public Function MoveNext() As Boolean
        Do While (Me.stack.Count > 0)
            Dim item As TEntity = Me.stack.Pop
            Dim child As TEntity
            For Each child In item.GetChildItems
                Me.stack.Push(child)
            Next
            Me.current = item
            Return True
        Loop
        Return False
    End Function

    Public Sub Reset()
        Throw New NotSupportedException
    End Sub

    Public ReadOnly Property Current() As TEntity
        Get
            Return Me.current
        End Get
    End Property

    Private ReadOnly Property System.Collections.IEnumerator.Current As Object
        Get
            Return Me.Current
        End Get
    End Property

    Private current As TEntity
    Private stack As Stack(Of TEntity)
End Class 
```

# makefile - 如何在 Makefile 中自动创建（和删除）临时目录？

> ID：589252
> 
> 赞同：19
> 
> 时间：2009-02-26T05:44:26.280
> 
> 标签：makefile, temporary-files

是否可以`make`在执行第一个目标之前创建一个临时目录？也许使用一些黑客，一些额外的目标等？

Makefile 中的所有命令都可以将自动创建的目录引用为`$TMPDIR`，并且该目录将在`make`命令结束时自动删除。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2009-02-26T05:50:03.567

至少使用 GNU make，

```
TMPDIR := $(shell mktemp -d) 
```

将为您提供临时目录。最后我想不出一个好方法来清理它，除了`rmdir "$(TMPDIR)"`作为`all`目标的一部分。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2016-10-18T23:58:20.403

这些先前的答案要么不起作用，要么看起来过于复杂。这是我能够弄清楚的一个更直接的示例：

```
PACKAGE := "audit"
all:
    $(eval TMP := $(shell mktemp -d))
    @mkdir $(TMP)/$(PACKAGE)
    rm -rf $(TMP) 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-01-30T16:10:29.797

有关技巧，请参阅[从 makefile](https://stackoverflow.com/questions/1400057/getting-the-name-of-the-makefile-from-the-makefile/1400184#1400184)中获取makefile 的名称`$(self)`

```
ifeq ($(tmpdir),)

location = $(CURDIR)/$(word $(words $(MAKEFILE_LIST)),$(MAKEFILE_LIST))
self := $(location)

%:
    @tmpdir=`mktemp --tmpdir -d`; \
    trap 'rm -rf "$$tmpdir"' EXIT; \
    $(MAKE) -f $(self) --no-print-directory tmpdir=$$tmpdir $@

else
# [your real Makefile]
%:
    @echo Running target $@ with $(tmpdir)
endif 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2009-02-26T05:51:22.533

我似乎记得能够递归调用 make ，类似于：

```
all:
    -mkdir $(TEMPDIR)
    $(MAKE) $(MLAGS) old_all
    -rm -rf $(TEMPDIR)

old_all: ... rest of stuff. 
```

我在子目录中做了类似的技巧：

```
all:
    @for i in $(SUBDIRS); do \
        echo "make all in $$i..."; \
        (cd $$i; $(MAKE) $(MLAGS) all); \
    done 
```

刚刚检查过，这工作正常：

```
$ cat Makefile
all:
    -mkdir tempdir
    -echo hello >tempdir/hello
    -echo goodbye >tempdir/goodbye
    $(MAKE) $(MFLAGS) old_all
    -rm -rf tempdir

old_all:
    ls -al tempdir

$ make all
mkdir tempdir
echo hello >tempdir/hello
echo goodbye >tempdir/goodbye
make  old_all
make[1]: Entering directory '/home/pax'
ls -al tempdir
total 2
drwxr-xr-x+ 2 allachan None 0 Feb 26 15:00 .
drwxrwxrwx+ 4 allachan None 0 Feb 26 15:00 ..
-rw-r--r--  1 allachan None 8 Feb 26 15:00 goodbye
-rw-r--r--  1 allachan None 6 Feb 26 15:00 hello
make[1]: Leaving directory '/home/pax'
rm -rf tempdir

$ ls -al tempdir
ls: cannot access tempdir: No such file or directory 
```

# oracle - PL/SQL：从游标中获取 2 个或更多连接表的最佳实践？

> ID：589253
> 
> 赞同：2
> 
> 时间：2009-02-26T05:44:51.130
> 
> 标签：oracle, plsql, cursor, record

我听说使用 %ROWTYPE 属性在 PL/SQL 中定义记录是一个好习惯。这可以节省输入并允许您的包在添加或删除列时继续运行。（如我错了请纠正我！）

但是，当我从涉及连接的游标中提取数据时，我发现我必须提取到一个程序员定义的记录中，该记录包括一个（可能很长）由连接返回的每一列的手写列表。

所以我的问题是：是否有可能获取嵌套记录，或者获取记录列表，或者做*一些事情*来避免这种丑陋的混乱？我尝试过的所有操作都会导致记录与游标返回的内容不匹配的错误。

使用游标返回连接结果对我来说似乎是一个常见的用例，奇怪的是在搜索中没有出现与此相关的任何内容。

谢谢你。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-02-26T05:49:32.430

您可以使用 cursor%rowtype。

样本：

```
declare
cursor c_c is
select emp.*, dept.* -- use aliasses if columns have same name
from emp
,    dept; -- for sample no join condition

r_c c_c%rowtype; 

begin
  for r_c in c_c loop -- with for loop even the definition of r_c is not needed.
  ...
  end loop;
end;
/ 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-02-26T13:59:55.947

为什么还要打扰游标声明？

这是等价的。

```
begin
  for r_c in (select emp.*, dept.* from emp, dept) loop
  ...
  end loop;
end; 
```

我在您的评论中看到您提到了这一点。但我看到显式游标语法被大量使用，我认为展示出来很重要。

# c# - 将 Redemption (Outlook) 与登录用户以外的用户一起使用 - 并出现错误

> ID：589254
> 
> 赞同：2
> 
> 时间：2009-02-26T05:45:50.910
> 
> 标签：c#, outlook, outlook-2003, outlook-redemption

我正在使用 Redemption dll ( [http://www.dimastr.com/redemption/](http://www.dimastr.com/redemption/) )，并且我创建了一个可以访问我的邮箱的 exe。

我在我的用户名下在 Windows 调度程序中运行 exe，它工作正常，我收到一封电子邮件发送给我（见下面的代码）。

当我将调度程序中的 runas 用户名更改为其他人并尝试访问他们的邮箱配置文件时，我收到错误消息。System.IO.FileLoadException

```
static void Main(string[] args)
{

    System.Diagnostics.Debugger.Break();

    object oItems;

    //string outLookUser = "My Profile Name";
    string outLookUser = "Other User Profile Name";

    string ToEmailAddress = "abc.email@xyz.com";
    string FromEmailAddress = "abc.email@xyz.com";
    string outLookServer = "exchangeServer.com";

    string sMessageBody =
        "\n outLookUser: " + outLookUser +
        "\n outLookServer: " + outLookServer +
        "\n\n";

    RDOSession Session = null;

    try
    {
        rdoDefaultFolders olFolderInbox = rdoDefaultFolders.olFolderInbox;

        Session = new RDOSession();
        RDOFolder objFolder;

        Session.LogonExchangeMailbox(outLookUser, outLookServer);

        int mailboxCount = Session.Stores.Count;
        string defaultStore = Session.Stores.DefaultStore.Name;

        sMessageBody +=
        "\n mailboxCount: " + mailboxCount.ToString() +
        "\n defaultStore: " + defaultStore +
        "\n\n";

        //RDOStore rmpMetering = Session.Stores.GetSharedMailbox("Name of another mailbox");
        //objFolder = rmpMetering.GetDefaultFolder(olFolderInbox);

        objFolder = Session.GetDefaultFolder(olFolderInbox);

        oItems = objFolder.Items;
        int totalcount = objFolder.Items.Count;
        if (totalcount > 10) totalcount = 10;

        for (int loopcounter = 1; loopcounter < totalcount; loopcounter++)
        {
            RDOMail oItem = objFolder.Items[loopcounter];

            string attachmentName = string.Empty;
            foreach (RDOAttachment attachment in oItem.Attachments)
            {
                attachmentName += attachment.FileName + " ";

                if (attachmentName.Trim() == "Data.csv")
                {
                    attachment.SaveAsFile(@"C:\datafiles\" + attachmentName.Trim());

                    foreach (RDOFolder archiveFolder in objFolder.Folders)
                    {
                        if (archiveFolder.Name == "DataFileArchive")
                        {
                            oItem.MarkRead(true);
                            oItem.Move(archiveFolder);
                        }
                    }
                }
            }

            sMessageBody += oItem.Subject + " " + attachmentName + "\n";
            if ((oItem.UnRead))
            {
                //Do whatever you need this for                    
                //sMessageBody = oItem.Body;
                //oItem.MarkRead(true);
            }
        }

        System.Web.Mail.SmtpMail.Send(ToEmailAddress,FromEmailAddress
            , "Data File Processing-" + DateTime.Now.ToString()
            ,"" + sMessageBody);

    }
    catch (Exception ex)
    {
        Session = null;

        System.Web.Mail.SmtpMail.Send(ToEmailAddress, FromEmailAddress, "Error", sMessageBody + " " + ex.Message);

    }
    finally
    {
        if ((Session != null))
        {
            if (Session.LoggedOn)
            {
                Session.Logoff();
            }
        }
    }

} 
```

当我尝试在我登录的另一台机器上运行相同的 exe 时，我收到此错误，

```
Unhandled Exception: System.IO.FileNotFoundException: Could not load file or ass
embly 'Interop.Redemption, Version=4.7.0.0, Culture=neutral, PublicKeyToken=null
' or one of its dependencies. The system cannot find the file specified.
File name: 'Interop.Redemption, Version=4.7.0.0, Culture=neutral, PublicKeyToken
=null'
   at RPMDataFileProcessing.Program.Main(String[] args) 
```

有没有人对我做错了什么有任何想法，可以以这种方式使用救赎吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-17T01:13:59.653

我最终通过确保您登录的用户对您要查看的邮箱具有“完整邮箱权限”来完成这项工作。

# c# - 如何让我的 Windows 窗体应用程序捕捉到屏幕边缘？

> ID：589268
> 
> 赞同：22
> 
> 时间：2009-02-26T05:53:12.060
> 
> 标签：c#, windows, winforms, .net-2.0

那里的任何人都知道如何使您的 .net windows 窗体应用程序像 Winamp 一样具有粘性/活泼，因此它可以捕捉到屏幕的边缘？

目标框架是使用 VS08 用 C# 编写的 .NET 2.0 Windows 窗体。我希望将此功能添加到自定义用户控件中，但我认为更多的人会受益于为应用程序及其主窗体描述它。

谢谢你。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2009-02-26T18:07:33.870

这工作得很好，适用于多台显示器，观察任务栏：

```
 public partial class Form1 : Form {
    public Form1() {
      InitializeComponent();
    }
    private const int SnapDist = 100;
    private bool DoSnap(int pos, int edge) {
      int delta = pos - edge;
      return delta > 0 && delta <= SnapDist;
    }
    protected override void  OnResizeEnd(EventArgs e) {
      base.OnResizeEnd(e);
      Screen scn = Screen.FromPoint(this.Location);
      if (DoSnap(this.Left, scn.WorkingArea.Left)) this.Left= scn.WorkingArea.Left;
      if (DoSnap(this.Top, scn.WorkingArea.Top)) this.Top = scn.WorkingArea.Top;
      if (DoSnap(scn.WorkingArea.Right, this.Right)) this.Left = scn.WorkingArea.Right - this.Width;
      if (DoSnap(scn.WorkingArea.Bottom, this.Bottom)) this.Top = scn.WorkingArea.Bottom - this.Height;
    }
  } 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2016-07-27T06:24:03.617

接受的答案仅在完成拖动后捕捉窗口，而我希望表单在拖动时连续捕捉到屏幕边缘。这是我的解决方案，大致基于[Paint.NET 源代码](https://github.com/rivy/OpenPDN/blob/cca476b0df2a2f70996e6b9486ec45327631568c/src/FloatingToolForm.cs)：

```
using System;
using System.ComponentModel;
using System.Drawing;
using System.Runtime.InteropServices;
using System.Windows.Forms;

namespace Whatever
{
    /// <summary>
    /// Managed equivalent of the Win32 <code>RECT</code> structure.
    /// </summary>
    [StructLayout(LayoutKind.Sequential)]
    public struct LtrbRectangle
    {
        public int Left;
        public int Top;
        public int Right;
        public int Bottom;

        public LtrbRectangle(int left, int top, int right, int bottom)
        {
            Left = left;
            Top = top;
            Right = right;
            Bottom = bottom;
        }

        public Rectangle ToRectangle()
        {
            return Rectangle.FromLTRB(Left, Top, Right, Bottom);
        }

        public static LtrbRectangle FromRectangle(Rectangle rect)
        {
            return new LtrbRectangle(rect.X, rect.Y, rect.X + rect.Width, rect.Y + rect.Height);
        }

        public override string ToString()
        {
            return "{Left=" + Left + ",Top=" + Top + ",Right=" + Right + ",Bottom=" + Bottom + "}";
        }
    }

    /// <summary>
    /// A form that "snaps" to screen edges when moving.
    /// </summary>
    public class AnchoredForm : Form
    {
        private const int WmEnterSizeMove = 0x0231;
        private const int WmMoving = 0x0216;
        private const int WmSize = 0x0005;

        private SnapLocation _snapAnchor;
        private int _dragOffsetX;
        private int _dragOffsetY;

        /// <summary>
        /// Flags specifying which edges to anchor the form at.
        /// </summary>
        [Flags]
        public enum SnapLocation
        {
            None = 0,
            Left = 1 << 0,
            Top = 1 << 1,
            Right = 1 << 2,
            Bottom = 1 << 3,
            All = Left | Top | Right | Bottom
        }

        /// <summary>
        /// How far from the screen edge to anchor the form.
        /// </summary>
        [Browsable(true)]
        [DefaultValue(10)]
        [Description("The distance from the screen edge to anchor the form.")]
        public virtual int AnchorDistance { get; set; } = 10;

        /// <summary>
        /// Gets or sets how close the form must be to the
        /// anchor point to snap to it. A higher value gives
        /// a more noticable "snap" effect.
        /// </summary>
        [Browsable(true)]
        [DefaultValue(20)]
        [Description("The maximum form snapping distance.")]
        public virtual int SnapDistance { get; set; } = 20;

        /// <summary>
        /// Re-snaps the control to its current anchor points.
        /// This can be useful for re-positioning the form after
        /// the screen resolution changes.
        /// </summary>
        public void ReSnap()
        {
            SnapTo(_snapAnchor);
        }

        /// <summary>
        /// Forces the control to snap to the specified edges.
        /// </summary>
        /// <param name="anchor">The screen edges to snap to.</param>
        public void SnapTo(SnapLocation anchor)
        {
            Screen currentScreen = Screen.FromPoint(Location);
            Rectangle workingArea = currentScreen.WorkingArea;
            if ((anchor & SnapLocation.Left) != 0)
            {
                Left = workingArea.Left + AnchorDistance;
            }
            else if ((anchor & SnapLocation.Right) != 0)
            {
                Left = workingArea.Right - AnchorDistance - Width;
            }
            if ((anchor & SnapLocation.Top) != 0)
            {
                Top = workingArea.Top + AnchorDistance;
            }
            else if ((anchor & SnapLocation.Bottom) != 0)
            {
                Top = workingArea.Bottom - AnchorDistance - Height;
            }
            _snapAnchor = anchor;
        }

        private bool InSnapRange(int a, int b)
        {
            return Math.Abs(a - b) < SnapDistance;
        }

        private SnapLocation FindSnap(ref Rectangle effectiveBounds)
        {
            Screen currentScreen = Screen.FromPoint(effectiveBounds.Location);
            Rectangle workingArea = currentScreen.WorkingArea;
            SnapLocation anchor = SnapLocation.None;
            if (InSnapRange(effectiveBounds.Left, workingArea.Left + AnchorDistance))
            {
                effectiveBounds.X = workingArea.Left + AnchorDistance;
                anchor |= SnapLocation.Left;
            }
            else if (InSnapRange(effectiveBounds.Right, workingArea.Right - AnchorDistance))
            {
                effectiveBounds.X = workingArea.Right - AnchorDistance - effectiveBounds.Width;
                anchor |= SnapLocation.Right;
            }
            if (InSnapRange(effectiveBounds.Top, workingArea.Top + AnchorDistance))
            {
                effectiveBounds.Y = workingArea.Top + AnchorDistance;
                anchor |= SnapLocation.Top;
            }
            else if (InSnapRange(effectiveBounds.Bottom, workingArea.Bottom - AnchorDistance))
            {
                effectiveBounds.Y = workingArea.Bottom - AnchorDistance - effectiveBounds.Height;
                anchor |= SnapLocation.Bottom;
            }
            return anchor;
        }

        protected override void WndProc(ref Message m)
        {
            switch (m.Msg)
            {
                case WmEnterSizeMove:
                case WmSize:
                    // Need to handle window size changed as well when
                    // un-maximizing the form by dragging the title bar.
                    _dragOffsetX = Cursor.Position.X - Left;
                    _dragOffsetY = Cursor.Position.Y - Top;
                    break;
                case WmMoving:
                    LtrbRectangle boundsLtrb = Marshal.PtrToStructure<LtrbRectangle>(m.LParam);
                    Rectangle bounds = boundsLtrb.ToRectangle();
                    // This is where the window _would_ be located if snapping
                    // had not occurred. This prevents the cursor from sliding
                    // off the title bar if the snap distance is too large.
                    Rectangle effectiveBounds = new Rectangle(
                        Cursor.Position.X - _dragOffsetX,
                        Cursor.Position.Y - _dragOffsetY,
                        bounds.Width,
                        bounds.Height);
                    _snapAnchor = FindSnap(ref effectiveBounds);
                    LtrbRectangle newLtrb = LtrbRectangle.FromRectangle(effectiveBounds);
                    Marshal.StructureToPtr(newLtrb, m.LParam, false);
                    m.Result = new IntPtr(1);
                    break;
            }
            base.WndProc(ref m);
        }
    }
} 
```

这就是它的样子：

[![截屏](https://i.stack.imgur.com/2BPFH.gif)](https://i.stack.imgur.com/2BPFH.gif)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-02-26T05:58:27.197

只需检索您所在显示器的当前像素高度/宽度...

[如何确定当前光标位置的活动监视器](https://stackoverflow.com/questions/229528/how-to-determine-active-monitor-of-the-current-cursor-location/229651)

...并处理表单的位置更改/移动事件。当您进入时，例如边缘（主窗体的 Location.Left + 窗体宽度）或高度（主窗体的 Location.Top + 窗体高度）的 25 像素左右，然后继续设置 .Left 和 .Top 属性以便您的应用程序“停靠”在角落。

**编辑：**另一个注意事项 - 当您实际执行“捕捉”时，您可能还希望将光标位置移动相对距离，使其保持在窗口栏上的同一点上。否则，当 MouseMove 和表单位置更改事件相互对抗时，您的表单可能会在光标位置和您的“快速”功能之间变成一个巨大的乒乓球。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2011-05-13T17:08:31.430

我不知道您是否找到了解决方案，但我为此创建了一个小组件：[http](http://www.formsnapper.net) ://www.formsnapper.net - 它跨越了进程边界！

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2017-04-16T12:29:11.947

[https://github.com/stax76/staxrip](https://github.com/stax76/staxrip)

```
Protected Overrides Sub WndProc(ByRef m As Message)
    Snap(m)
    MyBase.WndProc(m)
End Sub

Private IsResizing As Boolean

Sub Snap(ByRef m As Message)
    Select Case m.Msg
        Case &H214 'WM_SIZING
            IsResizing = True
        Case &H232 'WM_EXITSIZEMOVE
            IsResizing = False
        Case &H46 'WM_WINDOWPOSCHANGING
            If Not IsResizing Then Snap(m.LParam)
    End Select
End Sub

Sub Snap(handle As IntPtr)
    Dim workingArea = Screen.FromControl(Me).WorkingArea
    Dim newPos = DirectCast(Marshal.PtrToStructure(handle, GetType(WindowPos)), WindowPos)
    Dim snapMargin = Control.DefaultFont.Height
    Dim border As Integer
    If OSVersion.Current >= OSVersion.Windows8 Then border = (Width - ClientSize.Width) \ 2 - 1

    If newPos.Y <> 0 Then
        If Math.Abs(newPos.Y - workingArea.Y) < snapMargin AndAlso Top > newPos.Y Then
            newPos.Y = workingArea.Y
        ElseIf Math.Abs(newPos.Y + Height - (workingArea.Bottom + border)) < snapMargin AndAlso Top < newPos.Y Then
            newPos.Y = (workingArea.Bottom + border) - Height
        End If
    End If

    If newPos.X <> 0 Then
        If Math.Abs(newPos.X - (workingArea.X - border)) < snapMargin AndAlso Left > newPos.X Then
            newPos.X = workingArea.X - border
        ElseIf Math.Abs(newPos.X + Width - (workingArea.Right + border)) < snapMargin AndAlso Left < newPos.X Then
            newPos.X = (workingArea.Right + border) - Width
        End If
    End If

    Marshal.StructureToPtr(newPos, handle, True)
End Sub 
```

# c# - C#中的只读文本框

> ID：589273
> 
> 赞同：7
> 
> 时间：2009-02-26T05:54:14.210
> 
> 标签：c#, textbox

在[C#](http://en.wikipedia.org/wiki/C_Sharp_%28programming_language%29)中，我正在为带有两个文本框的 LAN Messenger 创建一个表单窗口。我需要创建一个只读的特定文本框，但提交给它的任何文本都显示为灰色，这是不可取的。有什么方法可以预防吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2009-02-26T07:18:34.197

我会使用文本框并将 ReadOnly 设置为 true，将 ForeColor 设置为 Color.Black，并将 BackColor 设置为 Color.White。这样您仍然可以选择文本并使用 Ctrl-C 复制它。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-02-26T06:00:47.627

您可以将其替换为标签或 KeyPress 事件中的文本框，设置为 true：

```
void  textBox1_KeyPress(object sender, KeyPressEventArgs e)
{
    e.Handled = true;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-02-26T06:12:08.350

您可以通过设置**Textbox** *ForeColor*属性来设置文本的颜色。

例如：

myTextBox.ForeColor = 颜色.黑色

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-05T23:07:05.293

In order to keep the textbox white (or Window) when it's read-only, you must explicitly set the BackColor property to Window. To do this, you must first set the BackColor to some other value, then back to Window. The backcolor property should become bold indicating it is no longer the default value.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-02-26T06:00:38.597

灰色表示文本框的只读状态。它是对不需要输入文本即可发现文本框实际上已禁用的用户的视觉指示。

如果您只需要只读行为，则最好使用 Label 代替。

# bash - 如何在 Makefile 目标中使用 Bash 语法？

> ID：589276
> 
> 赞同：245
> 
> 时间：2009-02-26T05:56:16.140
> 
> 标签：bash, shell, makefile

我经常发现[Bash](http://en.wikipedia.org/wiki/Bash_%28Unix_shell%29)语法非常有用，例如`diff <(sort file1) <(sort file2)`.

是否可以在 Makefile 中使用此类 Bash 命令？我在想这样的事情：

```
file-differences:
    diff <(sort file1) <(sort file2) > $@ 
```

在我的 GNU Make 3.80 中，这将给出一个错误，因为它使用`shell`而不是`bash`执行命令。

* * *

## 回答 #1

> 赞同：452
> 
> 时间：2009-02-26T06:04:21.723

从 GNU Make 文档中，

```
5.3.1 Choosing the Shell
------------------------

The program used as the shell is taken from the variable `SHELL'.  If
this variable is not set in your makefile, the program `/bin/sh' is
used as the shell. 
```

所以放在`SHELL := /bin/bash`你的makefile的顶部，你应该很高兴。

顺便说一句：您也可以为一个目标执行此操作，至少对于 GNU Make。每个目标都可以有自己的变量赋值，如下所示：

```
all: a b

a:
    @echo "a is $$0"

b: SHELL:=/bin/bash   # HERE: this is setting the shell for b only
b:
    @echo "b is $$0" 
```

那将打印：

```
a is /bin/sh
b is /bin/bash 
```

有关更多详细信息，请参阅文档中的“目标特定变量值”。该行可以放在 Makefile 中的任何位置，它不必紧挨在目标之前。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2009-02-26T06:03:31.617

您可以`bash`直接调用，使用`-c`标志：

```
bash -c "diff <(sort file1) <(sort file2) > $@" 
```

当然，您可能无法重定向到变量 $@，但是当我尝试这样做时，我收到了`-bash: $@: ambiguous redirect`一条错误消息，因此您可能想在深入了解之前先调查一下（尽管我使用 bash 3.2.something，所以也许你的工作方式不同）。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-02-26T06:11:42.780

您可以直接在 Makefile 中调用 bash 而不是使用默认 shell：

```
bash -c "ls -al" 
```

代替：

```
ls -al 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-11-19T12:34:25.943

如果可移植性很重要，您可能不想依赖 Makefile 中的特定外壳。并非所有环境都有 bash 可用。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2019-09-09T12:33:29.657

一种可行的方法是将它放在目标的第一行：

```
your-target: $(eval SHELL:=/bin/bash)
    @echo "here shell is $$0" 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-02-14T16:24:11.147

有一种方法可以做到这一点，而无需将您的 SHELL 变量显式设置为指向 bash。如果您有许多 makefile，这会很有用，因为 SHELL 不会被后续的 makefile 继承或取自环境。您还需要确保编译您的代码的任何人都以这种方式配置他们的系统。

如果您运行`sudo dpkg-reconfigure dash`并对提示回答“否”，您的系统将不会使用 dash 作为默认 shell。然后它将指向 bash（至少在 Ubuntu 中）。请注意，使用破折号作为系统外壳会更有效。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-09-12T02:40:58.177

这不是问题的直接答案，[makeit](https://github.com/ilya-bystrov/makeit)是有限的 Makefile 替换用 bash 语法，在某些情况下它可能很有用*（我是作者）*

*   规则可以定义为 bash 函数
*   自动完成功能

基本思想是`while`在脚本末尾有循环：

```
while [ $# != 0 ]; do
  if [ "$(type -t $1)" == 'function' ]; then
    $1 
  else
    exit 1
  fi 
  shift
done 
```

[https://asciinema.org/a/435159](https://asciinema.org/a/435159)

![](https://asciinema.org/a/Nvx7QOvUyMnZc8MVfKk2xETnj.svg)

# python - 内爆列表以在 python MySQLDB IN 子句中使用

> ID：589284
> 
> 赞同：108
> 
> 时间：2009-02-26T05:59:25.993
> 
> 标签：python, mysql

我知道如何将列表映射到字符串：

```
foostring = ",".join( map(str, list_of_ids) ) 
```

而且我知道我可以使用以下内容将该字符串放入 IN 子句中：

```
cursor.execute("DELETE FROM foo.bar WHERE baz IN ('%s')" % (foostring)) 
```

我需要的是使用 MySQLDB 安全地完成同样的事情（避免 SQL 注入）。在上面的示例中，因为 foostring 没有作为参数传递给执行，所以它很容易受到攻击。我还必须在 mysql 库之外引用和转义。

（有一个[相关的 SO question](https://stackoverflow.com/questions/315672/automagically-expanding-a-python-list-with-formatted-output)，但那里列出的答案要么不适用于 MySQLDB，要么容易受到 SQL 注入的攻击。）

* * *

## 回答 #1

> 赞同：201
> 
> 时间：2009-02-26T06:46:38.907

直接使用`list_of_ids`：

```
format_strings = ','.join(['%s'] * len(list_of_ids))
cursor.execute("DELETE FROM foo.bar WHERE baz IN (%s)" % format_strings,
                tuple(list_of_ids)) 
```

这样就避免了自己引用，也避免了各种sql注入。

请注意，数据（`list_of_ids`）作为参数（不在查询文本中）直接进入 mysql 的驱动程序，因此没有注入。您可以在字符串中保留任何您想要的字符，无需删除或引用字符。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2019-11-01T06:45:58.807

虽然这个问题已经很老了，但我认为最好留下回复，以防其他人正在寻找我想要的东西

当我们有很多参数或者我们想使用命名参数时，接受的答案会变得混乱

经过一些试验

```
ids = [5, 3, ...]  # list of ids
cursor.execute('''
SELECT 
...
WHERE
  id IN %(ids)s
  AND created_at > %(start_dt)s
''', {
  'ids': tuple(ids), 'start_dt': '2019-10-31 00:00:00'
}) 
```

经测试`python2.7`，`pymysql==0.7.11`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2021-06-06T06:54:10.073

正如 Rubms 在对 markk 的回答的评论中指出的那样，这似乎仍然是 2021 年 Python3 的一个问题。

在mysql连接器包的“cursor.py”中的方法“_process_params_dict”中添加大约9行代码来处理元组为我解决了这个问题：

```
def _process_params_dict(self, params):
    """Process query parameters given as dictionary"""
    try:
        to_mysql = self._connection.converter.to_mysql
        escape = self._connection.converter.escape
        quote = self._connection.converter.quote
        res = {}
        for key, value in list(params.items()):
            if type(value) is tuple: ### BEGIN MY ADDITIONS
                res[key.encode()] = b''
                for subvalue in value:
                    conv = subvalue
                    conv = to_mysql(conv)
                    conv = escape(conv)
                    conv = quote(conv)
                    res[key.encode()] = res[key.encode()] + b',' + conv if len(res[key.encode()]) else conv
            else: ### END MY ADDITIONS
                conv = value
                conv = to_mysql(conv)
                conv = escape(conv)
                conv = quote(conv)
                res[key.encode()] = conv
    except Exception as err:
        raise errors.ProgrammingError(
            "Failed processing pyformat-parameters; %s" % err)
    else:
        return res 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2018-12-29T08:59:44.687

如果您使用`Django 2.0 or 2.1`and `Python 3.6`，这是正确的方法：

```
from django.db import connection
RESULT_COLS = ['col1', 'col2', 'col3']
RESULT_COLS_STR = ', '.join(['a.'+'`'+i+'`' for i in RESULT_COLS])
QUERY_INDEX = RESULT_COLS[0]

TABLE_NAME = 'test'
search_value = ['ab', 'cd', 'ef']  # <-- a list
query = (
    f'SELECT DISTINCT {RESULT_COLS_STR} FROM {TABLE_NAME} a '
    f'WHERE a.`{RESULT_COLS[0]}` IN %s '
    f'ORDER BY a.`{RESULT_COLS[0]}`;'
)  # <- 'SELECT DISTINCT a.`col1`, a.`col2`, a.`col3` FROM test a WHERE a.`col1` IN %s ORDER BY a.`col1`;'
with connection.cursor() as cursor:
    cursor.execute(query, params=[search_value])  # params is a list with a list as its element 
```

参考：[https ://stackoverflow.com/a/23891759/2803344](https://stackoverflow.com/a/23891759/2803344) [https://docs.djangoproject.com/en/2.1/topics/db/sql/#passing-parameters-into-raw](https://docs.djangoproject.com/en/2.1/topics/db/sql/#passing-parameters-into-raw)

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2014-09-05T01:01:05.810

```
list_of_ids = [ 1, 2, 3]
query = "select * from table where x in %s" % str(tuple(list_of_ids))
print query 
```

如果您不想关心必须传递参数以完成查询字符串的方法并且只想调用`cursror.execute(query)`.

另一种方法可能是：

```
"select * from table where x in (%s)" % ', '.join(str(id) for id in list_of_ids) 
```

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2019-12-30T20:12:29.927

另一个使用列表理解的简单解决方案：

```
# creating a new list of strings and convert to tuple
sql_list = tuple([ key.encode("UTF-8") for key in list_of_ids ])

# replace "{}" with "('id1','id2',...'idlast')"
cursor.execute("DELETE FROM foo.bar WHERE baz IN {}".format(sql_list)) 
```

* * *

## 回答 #7

> 赞同：-3
> 
> 时间：2020-05-13T17:28:52.967

虽然这个问题很老了。如果它可以帮助某人，我正在分享我的解决方案。

`list_to_check = ['A', 'B'] cursor.execute("DELETE FROM foo.bar WHERE baz IN ({})".format(str(list_to_check)[1:-1])`

经测试`Python=3.6`

* * *

## 回答 #8

> 赞同：-8
> 
> 时间：2017-11-20T08:49:05.570

很简单：只需使用以下格式

rules_id = ["9","10"]

sql1 = "SELECT * FROM admission_rules_staff WHERE id in("+", ".join(map(str, rules_id))+")"

**", ".join(map(str, rules_id))**

# c# - 当用户在asp.net c#中注销时如何禁用浏览器中的后退按钮

> ID：589285
> 
> 赞同：10
> 
> 时间：2009-02-26T05:59:27.257
> 
> 标签：c#, asp.net

我们的问题是我们能够在注销时清除会话。

但是，如果用户单击后退按钮，则他/她可以浏览所有先前的屏幕。

但优点是，只需单击任何此类以前的冲浪页面，即可将用户带回登录页面，我们已经做到了。但我们的要求是不允许用户浏览之前的浏览页面。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-02-26T06:03:42.880

您需要强制缓存过期才能使其正常工作。我正在为您寻找代码示例。

**编辑**
为你找到了这个，它已经在这里解决了。

```
Page.Response.Cache.SetCacheability(HttpCacheability.NoCache) 
```

[这里...](https://stackoverflow.com/questions/533867/whats-the-best-method-for-forcing-cache-expiration-in-asp-net/534296#534296)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2011-03-25T08:23:07.117

在页面加载事件的*母版页*中编写此代码

```
Response.Cache.SetCacheability(HttpCacheability.NoCache);
Response.Cache.SetExpires(DateTime.UtcNow.AddHours(-1));
Response.Cache.SetNoStore(); 
```

并在头部的*登录页面*中编写此代码

```
<script type="text/javascript">
window.history.forward(-1);
</script> 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2009-02-26T06:09:20.587

您不能“禁用”后退按钮。我见过许多“技巧”可以清除过去的历史记录，但这些都是不可靠的，它们在浏览器之间不起作用，甚至在浏览器版本之间都不起作用。

正如其他人所说，正确的方法是使缓存无效，以及服务器端验证如果他们尝试重新发送数据则会话不再有效。此外，Response.Redirect 比回发更好，因为这会导致获取而不是发布。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-02-26T06:06:00.253

对于 ASP.NET 页面，您可以使用[Response.CacheControl](http://msdn.microsoft.com/en-us/library/ms524721.aspx)来控制页面在用户缓存中的存储方式。其他 Web 开发语言将使用类似的东西。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-02-26T06:03:04.207

您可以采用 Outlook Web Access 样式，只需让 JavaScript 关闭当前窗口/选项卡。

此外，您可以确保您的“注销”页面是回发。这将迫使大多数浏览器中的后退按钮上的用户重试回发，此时您可以检测到他们不再登录并可以将他们重定向回登录页面。

**编辑：**其他人提到了 Response.Redirect。您实际上可以使您的“注销”链接转到执行重定向的页面，并始终重定向到第二个“登录页面”。如果用户点击“返回”，他们将再次登陆重定向并将他们放回他们开始的地方。

没有办法阻止浏览器历史记录，因此一起使用几种方法并且不要计划用户“不倒退”以确保您的应用程序安全性非常重要。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-02-26T11:04:57.193

相同问题/答案的早期变体：

> [有没有办法在一个人注销但点击“返回”按钮后阻止页面呈现](https://stackoverflow.com/questions/64059/is-there-a-way-to-keep-a-page-from-rendering-once-a-person-has-logged-out-but-hit)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2011-04-12T18:37:59.500

这是我在[编码解决方案上找到的解决方案](http://innovationplanet.wordpress.com/coding-solutions/)

在母版页中

```
 protected void Page_Load(object sender, EventArgs e)
    {
        Response.ClearHeaders();
        Response.AppendHeader("Cache-Control", "no-cache"); //HTTP 1.1
        Response.AppendHeader("Cache-Control", "private"); // HTTP 1.1
        Response.AppendHeader("Cache-Control", "no-store"); // HTTP 1.1
        Response.AppendHeader("Cache-Control", "must-revalidate"); // HTTP 1.1
        Response.AppendHeader("Cache-Control", "max-stale=0"); // HTTP 1.1
        Response.AppendHeader("Cache-Control", "post-check=0"); // HTTP 1.1
        Response.AppendHeader("Cache-Control", "pre-check=0"); // HTTP 1.1
        Response.AppendHeader("Pragma", "no-cache"); // HTTP 1.1
        Response.AppendHeader("Keep-Alive", "timeout=3, max=993"); // HTTP 1.1
        Response.AppendHeader("Expires", "Mon, 26 Jul 1997 05:00:00 GMT"); // HTTP 1.1
    } 
```

控制登录状态

```
 protected void LoginStatusUser_LoggedOut(object sender, EventArgs e)
    {
        Session.Abandon();
        FormsAuthentication.SignOut();
    } 
```

# wpf - WPF 和 LINQ to Entity 绑定到新添加的记录

> ID：589292
> 
> 赞同：0
> 
> 时间：2009-02-26T06:02:21.260
> 
> 标签：wpf, linq

我正在学习 LINQ to Entities 和 WPF，所以如果我弄错了一些术语，请原谅我。我有一个包含客户的模型，我希望用户一次能够批量输入多达 20 个客户（这将由数据输入人员从纸质列表中完成，所以我想避免输入一个并保存一个）。

我计划在我的模型中添加 20 个新客户端，并绑定一个数据网格/列表框。

在 LINQ 中，如何选择新添加的记录到模型中？我可以依赖某些字段为空白，但有更好的方法吗？或者，还有另一种方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-02-26T06:27:15.100

```
DataContext db; // ...
db.GetChangeSet(); 
```

更改集将包含新插入、更新和删除操作的列表。如果您在任何 SubmitChanges 之前访问它，您应该能够得到您想要的。但是 LINQ 确实以事务方式插入预制件，那么您想在这里实现什么？

# apache-flex - 处理 AIR 应用程序中的应用程序退出事件

> ID：589304
> 
> 赞同：3
> 
> 时间：2009-02-26T06:05:10.597
> 
> 标签：apache-flex, air

我有一个定义了以下 EXIT 处理程序的 AIR 应用程序：

```
 NativeApplication.nativeApplication.addEventListener(Event.EXITING, applicationExitHandler); 
```

`applicationExitHandler`通过 HttpService 发出异步注销请求。由于这是异步的，看起来应用程序的 exit() 方法在实际发出注销请求之前返回。

如何确保在 exit() 返回之前完成请求？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-02-26T07:10:12.063

覆盖默认行为。取消此活动。然后调用服务。将请求处理程序/故障处理程序添加到您的服务。完成时调用结果或故障处理程序。这是您可以安全退出应用程序的时间（当然，如果注销失败，您可能需要额外的处理）。从[文档](http://livedocs.adobe.com/flash/9.0/ActionScriptLangRefV3/flash/desktop/NativeApplication.html#event:exiting)：

> **exiting** 当应用程序退出序列启动时调度。
> 
> exiting 事件在操作系统发起应用程序退出时调度；例如，当用户在 Mac OS X 上发出 Cmd-Q 键序列时，或者当 NativeApplication 对象的 autoExit 属性为 true 并且最后一个应用程序窗口关闭时。取消此事件可防止应用程序退出。
> 
> 注意：调用 NativeApplication exit() 方法不会导致退出事件被调度。要警告即将退出的组件，请在调用 exit() 之前调度退出事件 Event.EXITING 常量定义退出事件对象的 type 属性的值。

# iphone - 如何在 iPhone 上的 TableView 中的行右侧添加图像？

> ID：589308
> 
> 赞同：3
> 
> 时间：2009-02-26T06:08:24.427
> 
> 标签：iphone, image, uitableview

我想在 iPhone 上的 TableView 中每一行的右侧添加一个箭头。任何想法如何做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-02-26T06:28:37.670

您的意思是许多应用程序都有的默认箭头（V 形）？

```
UITableViewCell *myCell = ...; //GET a cell from somewhere.
myCell.accessoryType = UITableViewCellAccessoryDisclosureIndicator; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-26T06:28:17.470

我刚刚解决了：

```
-(UITableViewCellAccessoryType)tableView:(UITableView *)tableView 
        accessoryTypeForRowWithIndexPath:(NSIndexPath *)indexPath
{
    return UITableViewCellAccessoryDetailDisclosureButton;
}

-(void)tableView:(UITableView *)tableView 
accessoryButtonTappedForRowWithIndexPath:(NSIndexPath *)indexPath
{
    //add action here
} 
```

每行右侧将显示一个蓝色箭头。

# sifr - fitExactly 不能在 r-436 中工作

> ID：589311
> 
> 赞同：0
> 
> 时间：2009-02-26T06:08:54.270
> 
> 标签：sifr

我最近刚从419升级到436，发现fitExactly已经没有效果了。

你可以在这里看到一个例子：

[(配419)](http://alexgreendesign.com/2008/12/high-contrast-stylesheets/) [(配436)](http://alexgreendesign.com/2008/12/high-contrast-stylesheets/?sifr-436)

javascript 配置位于页面头部。

我检查了两者之间的版本，它使用的最新版本是 419。

我可以在 Javascript 配置中调整宽度，但是在我使用它的 dropcap 的一侧会留下一个间隙，而且我将它与自动应用 sifr 的 Wordpress 主题集成在一起（其他比示例中的那个），这意味着每个都不能通过改变宽度或字体大小来调整。

我更喜欢使用 436，特别是因为页面移位较少，所以，有补救措施吗？

谢谢你的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-03-01T11:40:07.227

如果您比较两页上 Flash 影片的宽度和高度，您会发现它是相同的。换句话说，看起来 fitExactly 工作正常。我不知道为什么 Flash 会剪切呈现的文本。

只是为了测试一下，你能不能打开 r436 JavaScript 文件，搜索“419”并替换为“436”，然后使用 r419 Flash 电影？也许这提供了进一步的线索。

# php - PHP HTTP_POST_VARS 问题

> ID：589314
> 
> 赞同：5
> 
> 时间：2009-02-26T06:09:34.283
> 
> 标签：php, paypal, paypal-ipn, http-post-vars

开始：我是一名 C++ 开发人员，热衷于制作 PHP 脚本（用于 paypal IPN）。

我对他缺乏来自贝宝和其他地方的良好工作样本感到非常沮丧。

最新的问题是我似乎没有得到任何我认为应该得到的 $HTTP_POST_VARS 项目。

一些在线搜索似乎表明这已被弃用或可配置等。

我不知道我的主机使用的是什么版本的 PHP。

很明显，要么我的测试应用程序没有正确发布，要么脚本不工作。

所以：2个问题： - 有没有人有任何工作IPN脚本的链接？- $HTTP_POST_VARS 的废话是什么？

编辑

谢谢大家。我会尝试这些建议，并希望尽快发布我的成功故事。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-02-26T06:17:56.947

`phpinfo();`您可以通过在 PHP 脚本块中输入来检查您使用的 PHP 版本，`<?php ?>`并查看它的输出（或简单地 echo `PHP_VERSION`）。

`$HTTP_POST_VARS`是旧的做事方式。您可以使用`$_POST['post-var']`. 要检查所有已发布的内容，请使用`print_r($_POST)`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-26T06:15:26.390

首先要尝试将 $HTTP_POST_VARS 更改为 $_POST。那是新机制，并且在某个版本或另一个 $HTTP_POST_VARS 不再是超全局之后。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-26T06:33:31.323

正如 chaos 已经写的那样，只需使用`$_POST`数组而不是`$HTTP_POST_VAR`.
我想提两件事：
1.`var_dump(somevar)` [函数](http://php.net/manual/en/function.var-dump.php)在 php 中非常有用。它显示有关`somevar`. 如果您不确定某个变量或数组是如何构成的，或者什么是结构化的，请使用此函数。所以这个调用`var_dump($_POST);`会显示所有当前的 POST 参数。
2.如果您对主机使用的版本和扩展感兴趣，该`phpinfo()` [功能会很有帮助。](http://php.net/manual/en/function.phpinfo.php)只需在`<?php phpinfo(); ?>`其中创建一个文件并使用浏览器导航到该文件。由于安全漏洞，不要忘记在此之后将其删除。

# c# - 在 C# 中扩展 [^,]+, 正则表达式

> ID：589323
> 
> 赞同：2
> 
> 时间：2009-02-26T06:12:01.267
> 
> 标签：c#, regex, csv

### 复制

> [c#中变量声明和初始化的正则表达式](https://stackoverflow.com/questions/585853/regex-for-variable-declaration-and-initialization-in-c)

我正在寻找一个正则表达式来解析 CSV 值，我遇到了这个正则表达式

```
[^,]+ 
```

通过在每次出现“，”时拆分单词来完成我的工作。我想知道的是说我有字符串

> value_name v1,v2,v3,v4,...

现在我想要一个正则表达式来找到我的单词 v1,v2,v3,v4..

我试过->

```
^value_name\s+([^,]+)* 
```

但这对我不起作用。你能告诉我我做错了什么吗？我记得从事正则表达式及其状态机实现的工作。它不是以同样的方式工作。

如果字符串以 Value_name 开头，后跟一个或多个空格。转到下一个状态。在那个州读一个单词，直到出现“，”。然后再做一次！每个单词都会被分组！

我理解错了吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-02-26T07:03:14.123

您可以使用类似于建议的正则表达式：

```
(?:^value_name\s+)?([^,]+)(?:\s*,\s*)? 
```

*   第一组是非捕获的，将匹配行的开头和`value_name`.
    为了确保 Regex 在所有匹配项中仍然有效，我们使用`'?'`修改后的组（意思*是最多匹配一次*）使该组成为可选。

*   第二组正在捕获并将匹配您的`vXX`数据。

*   第三组是非捕获的，将匹配`,`, 以及它之前和之后的任何空格。同样，我们使用修饰符
    使其成为可选，否则最后一组将不匹配，除非我们以 final 结束字符串。`'?'``'vXX'``','`

在您的试验中，正则表达式不会匹配多次：您必须记住，如果您希望正则表达式匹配字符串中的多次出现，则整个正则表达式需要匹配字符串中的*每一次出现*，因此您必须构建您的正则表达式不仅匹配字符串的开头`'value_name'`，还匹配`'vXX'`其中的每一个出现。

在 C# 中，您可以使用如下代码列出所有匹配项和组：

```
Regex r = new Regex(@"(?:^value_name\s+)?([^,]+)(?:\s*,\s*)?");
Match m = r.Match(subjectString);
while (m.Success) {
    for (int i = 1; i < m.Groups.Count; i++) {
        Group g = m.Groups[i];
        if (g.Success) {
            // matched text: g.Value
            // match start: g.Index
            // match length: g.Length
        } 
    }
    m = m.NextMatch();
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-02-26T06:22:22.803

我希望它只会在组中获得 v1，因为第一个逗号是“阻止”它获取其余字段。您如何处理这将取决于您在正则表达式上使用的方法，但进行两次传递可能是有意义的，首先获取以逗号分隔的所有字段，然后将其分解为空格。也许`^value_name\s+(?:([^,]+),?)*`相反。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-02-26T06:41:39.213

哦，是的，列表....

`/(?:^value_name\s+|,\s*)([^,]+)/g`理论上会抓住它们，但是您必须`RegExp.exec()`循环使用才能获得捕获，而不是整个匹配。

我希望在 JS 中进行预赛 :(。

否则，请遵循 Logan 的想法：`/^value_name\s+([^,]+(?:,\s*[^,]+)*)$/`后跟 .split(/,\s*/);

# textbox - 只读文本框

> ID：589329
> 
> 赞同：-2
> 
> 时间：2009-02-26T06:14:39.373
> 
> 标签：textbox

我为局域网信使创建的表单窗口（聊天窗口）类似于 google talk 中带有两个文本框的窗口。我需要做的是当我单击提交按钮时将在下部文本框（textbox2）中键入的字符传输到上部文本框（textbox1，它是只读的）而不显示 textbox1 是只读的，因为字符显示为灰色.如果可能的话，请帮助代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-26T06:16:33.223

为此使用标签而不是文本框。如果它唯一做的是显示字符而不是直接编辑，那么您将不会失去任何功能并且文本不会变灰...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-26T06:27:17.410

如果您要使用 Texbox，请将其设置为 Locked。这不应该使字符变灰。否则，在 KeyDown/KeyUp 事件中，将 e.Handled 属性设置为 true（这将告诉框您要自己处理输入并且不希望消息被过滤掉）。

那应该为你做。

# visual-studio - Visual Studio 中的慢速调试问题

> ID：589338
> 
> 赞同：89
> 
> 时间：2009-02-26T06:17:06.200
> 
> 标签：visual-studio, debugging, visual-studio-2008, performance

在我的 Visual Studio 实例中，即使我只是在 C# 控制台应用程序中编写了一行 return，在按下`F5`执行实际代码后我也需要一分钟（我的意思是在单个 return 语句之后停止所需的时间按下`F5`——我在`main`函数的返回语句上设置了一个断点）。怎么了？有检查清单吗？

我正在使用 Visual Studio 2008 VSTS 版本并在 Windows Server 2003 x64 上进行调试。

* * *

## 回答 #1

> 赞同：152
> 
> 时间：2009-02-26T14:46:48.877

您可能需要删除所有断点——请注意，您需要单击“删除所有断点”按钮（或使用`Ctrl`++ `Shift`）`F9`，而**不是**一一删除。如果 Visual Studio 破坏了您的解决方案设置，则后者将不起作用。您可能需要先添加一个断点才能使其正常工作（聪明，嗯？）。

如果最坏的情况发生，您可能需要删除您的`.suo`文件并让 Visual Studio 从头开始​​一个新文件。但是请注意，您将丢失您的个人解决方案配置设置（仅适用于此解决方案，而不适用于任何其他解决方案）。但是，您可能希望暂时移动/重命名文件，直到确定这是否是问题所在；这样，您始终可以将其移回。我看到一些在线资源也建议删除（移动/重命名）`.ncb`文件。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2009-02-26T06:26:13.650

我以前见过这个。尝试删除**所有**断点，然后设置所需的断点。打`F5`。现在是不是更快了？

我刚刚注意到您提到了设置 .NET 源代码调试功能。尝试禁用它。您与 Microsoft 源服务器的网络连接可能很慢。*还要在菜单Tools* → *Options* → *Debugging* → *Symbols*中禁用任何符号服务器连接。

*还可以尝试在菜单Tools* → *Options* → *Debugging* → *General*中禁用“启用属性评估和其他隐式函数调用” 。

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2011-05-19T08:21:27.427

或者删除可以在解决方案 (.sln) 文件旁边找到的 .suo 文件。这解决了我在调试会话需要很长时间才能启动和停止时遇到的问题。

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2013-03-05T20:38:27.607

我有这个问题。在尝试了所有列出的建议并删除了所有 Visual Studio 扩展之后，我们终于发现以某种方式启用了 IntelliTrace。禁用它可以解决所有问题。

*[如何：启用和禁用 IntelliTrace](https://docs.microsoft.com/en-us/previous-versions/visualstudio/visual-studio-2010/dd264948(v=vs.100))*

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2009-02-26T06:25:22.297

你设置了很多断点吗？这些确实会减慢启动时间。每次将新模块加载到进程地址空间时，都需要检查它们是否有效。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2009-03-07T03:40:13.257

转到菜单*工具*→*选项*→*调试器*→*符号*并检查您是否设置了公共符号或[UNC](http://en.wikipedia.org/wiki/Path_%28computing%29#Uniform_Naming_Convention)网络路径。还要检查菜单工具* →*选项*→*调试器*→*常规*，看看您是否设置了源服务器。

所有这些都会影响基于网速慢或服务器不可用的调试。5 分钟的等待时间是网络超时。

如果选项中未设置任何内容，请检查您是否设置了 _NT_SYMBOL_PATH 环境变量。

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2012-07-16T09:00:22.070

我的同事有一个响应非常缓慢的 Visual Studio，在调试时执行一个步骤实际上需要几分钟时间。

根本原因原来是一个**反病毒程序**(Threatfire) 在 Visual Studio 运行时发疯了。杀死它的进程立即修复了一切。

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2014-06-05T08:39:14.273

在我的情况下，将调试符号*“自动加载符号”*选项从“所有模块”更改为“仅指定模块”解决了这个问题。您可以从菜单*Tools* → *Options* → *Debugging* → *Symbols*更改此选项。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2013-01-20T22:04:11.383

不同的原因加上...**如何找到问题**

对我来说，这是选项**ShowOtherThreadIpMarkers**。值 1 会使 Visual Studio (2010) 慢得无法忍受（每个调试步骤需要 3-5 秒。值为 0 时，它又快了。

那个选项是什么？我不知道。我无法通过 Visual Studio 用户界面找到它。我在那里取消了所有可能的调试选项，但没有任何效果。

所以我去了*导入/导出*设置并加载了我之前保存的旧设置，直到 Visual Studio 再次快速运行，然后比较了 vssettings 文件......等等。

我想说明的是，如果您在调试模式下加载设置并在断点处停止，它们会立即生效。**您不必停止调试器并重新启动。**

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2009-02-26T06:29:32.490

来自 Travis 链接的 ScottGu 的博客：“我最近听说的另一个性能问题是一些人报告说在使用 Google 工具栏加载项时遇到的问题。由于某种原因，这有时会在附加 Visual 时导致长时间延迟Studio 调试器到浏览器。如果您发现 Web 应用程序加载延迟很长，并且安装了 Google 工具栏（或其他工具栏），您可能需要尝试卸载它们，看看这是否是问题的原因。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2012-08-15T02:40:23.273

对我来说，在调试器下运行比在没有调试的情况下运行慢大约 10 倍。

在尝试了这里建议的每个解决方案之后，我检查了每个调试器设置并启用/禁用，看看它是否有所作为。

对我来说，事实证明，在调试设置中禁用**Suppress JIT optimization on module load***极大地*改善了事情。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2009-02-26T06:45:07.583

确保您没有任何过时的网络映射到不再存在的服务器（网络超时会杀死您）。[或者使用进程监视器](http://technet.microsoft.com/en-us/sysinternals/bb896645.aspx)之类的东西来查看网络（或其他文件错误）是否似乎阻塞了很长时间。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2009-02-26T06:48:09.510

您是否使用symbolServer 来下载Windows DLL 文件的符号？

如果是这样，请禁用它，因为它可能需要一些时间，但我不希望这会导致基本控制台应用程序出现长时间延迟。

菜单*工具*→*选项*→*调试*→*符号*。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2010-06-11T05:01:19.100

我知道这是一个古老的话题，但它的价值......

我发现如果长时间打开单独的 Internet Explorer 窗口，开始调试可能需要一分钟。关闭所有 Internet Explorer 窗口并立即开始调试。

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2012-03-28T16:53:02.720

就我而言，谷歌工具栏正在减慢我的调试速度。

gplus_notifications_gadget.html 一直在不断地重载调试器。我想保留 Google 工具栏，因为我经常使用它，所以我只是禁用了 G+ 通知按钮（个人资料按钮旁边的小按钮）。现在很幸福。

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2013-04-15T13:29:51.873

我在 Visual Studio 2010 中遇到了同样的问题，单步执行代码非常慢（在 3 到 10 秒之间）。但是，上述设置修改都没有奏效。

我最终找到了最终解决方案，该解决方案适用于上述所有帖子问题：重置所有设置，如此[处](http://blogs.msdn.com/b/zainnab/archive/2010/07/16/reset-all-your-development-settings-vstipenv0023.aspx)所述（基本上是菜单 *工具*→*导入和导出设置*，*重置所有设置*，将现有设置保存到文件中（用于恢复））。

您可能首先要保存设置的特定部分。例如，我首先保存了我的颜色主题（类似 Solarized），然后在全局重置后恢复它。

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2013-04-17T09:54:38.153

对我来说，杀死性能的设置（Windows 8 甚至挂起，除了鼠标移动）是在菜单*Options* → *Debugging* → *General中**取消选中* *“当一个进程中断时中断所有进程”*。

 **** * *

## 回答 #18

> 赞同：1
> 
> 时间：2014-08-29T22:16:34.347

只是导致 Visual Studio 调试体验缓慢的另一个原因......

很久以前，我能够[`FusionLog`](http://www.hanselman.com/blog/BackToBasicsUsingFusionLogViewerToDebugObscureLoaderErrors.aspx)查看导致程序集绑定问题的原因。

确保在使用后禁用它。为什么？因为它在启用时会将大量日志记录数据写入磁盘。

这是`FusionLog`Window 注册表 ( `regedit.exe`) 上的键：

```
HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Fusion 
```

将`ForceLog`和值从 1（启用）更改`LogImmersive`为`LogResourseBindings`0（禁用）。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2010-08-24T04:53:02.100

我也有这个问题，但在我的情况下它与断点无关。这是我在任务窗口中添加的代码快捷方式：

[http://www.customsoftwareframeworks.com/blog/longwaittimetoinsertoraddalineoftextbuginvisualstudio--tasklistwindow--onlywhenaddingandremovelines](http://www.customsoftwareframeworks.com/blog/longwaittimetoinsertoraddalineoftextbuginvisualstudio--tasklistwindow--onlywhenaddingandremovelines)

我敢肯定还有其他方法可以让您看到这样的问题，但是某处有一个错误导致我遇到了这个问题......删除我的所有选项可以解决这个问题，但这是我不想做。所以，我调试了它并在我的博客中写了它……你的问题听起来像我的。

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2010-11-03T21:42:35.893

对我有用的是确保没有条件断点。除此之外，我通过简单地重新启动 Visual Studio 并且一次只打开一个 Visual Studio 实例成功地修复了缓慢的调试。

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2010-11-29T19:00:12.760

我有一个类似的问题，其他指导似乎都没有帮助。我已经重新启动无济于事。我删除了所有断点，删除了 .suo 文件，检查了没有从外部源加载符号，并检查了应用程序中不存在不可用的路径。

然后，我想清理解决方案。我在输出窗口中注意到 C# IntelliSense 在清理时报告了一个问题：

> 从“{B0C3592F-F0D1-4B79-BE20-3AD610B07C23}”读取元数据时出现问题（“系统找不到指定的文件。”）。在重新加载解决方案之前，IntelliSense 可能无法正常工作。

在这种情况下，一旦您真正发现错误消息，它就会准确地告诉您如何解决它。（错误文本做得很好，可发现性做得很差！）我卸载了解决方案的项目，然后重新加载了它们。然后我能够成功运行*clean solution*。它起作用了，调试器也起作用了。

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2011-06-27T19:25:03.933

关闭“自动”窗口为我在 Visual Studio 2008 中改进了大型原生 C++ 解决方案的调试。

隐藏它是行不通的。它需要关闭。

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2014-01-13T17:05:46.627

正如其他一些评论和答案所说的那样，我经历了同样的减速和与网络断开连接为我解决了这个问题（但当然这不是一个理想的解决方法）。

对于我来说，这个简单的更改修复了我的解决方案：在调试选项卡上的项目属性中，我禁用*了“启用 Visual Studio 托管进程”*（我正在运行 Visual Studio 2010）。

* * *

## 回答 #24

> 赞同：-9
> 
> 时间：2009-02-26T06:26:29.517

获得更多内存和更快的高清。[更多细节在这里](http://weblogs.asp.net/scottgu/archive/2007/11/01/tip-trick-hard-drive-speed-and-visual-studio-performance.aspx)。

# java - 有没有一种方法类可以扩展 httpservlet 和线程

> ID：589351
> 
> 赞同：-1
> 
> 时间：2009-02-26T06:24:43.687
> 
> 标签：java

我需要一个我在标题中提到的问题的答案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-02-26T06:27:40.747

不可以。一个 Java 类只能有一个超类。

你为什么要这样做？您可以扩展 HttpServlet 并实现 Runnable。然后您可以调用`new Thread(this)`- 尽管坦率地说，我还是建议将 servlet 和可运行方面分开。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-02-26T06:27:08.080

不，没有办法从 Java 中的两个类进行扩展。如果你愿意，你可以让你的 servlet 类实现 java.lang.Runnable 接口。但是，如果您更好地向我们解释了易实际想要实现的目标，我们可以为您提供更好的帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-26T06:37:03.673

查看 javax.servlet.ServletContextListener 以在 Web 应用程序中实现线程。在 servlet 中启动线程通常是个坏主意 - 侦听器确保您只有一个线程并且它在应用程序启动时启动。它还允许您在应用程序停止时优雅地停止线程（即当 servlet 上下文被破坏时）。您可以使用线程监视器模式向线程发送通知以启动/暂停/停止处理等。此模式中的方法是 Thread.notify() 和 Thread.wait()。您可以在 contextInitialized() 方法中创建线程

# java - 使用 java 代码获取 ResultSet 的大小（以字节为单位）

> ID：589367
> 
> 赞同：0
> 
> 时间：2009-02-26T06:29:16.903
> 
> 标签：java, jdbc, resultset

如何在 java 代码中获取给定 ResultSet 的大小（以字节为单位）。有什么直接的方法可以查到吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-26T17:12:56.187

嗯，我什至不确定是否有明确的答案。ResultSet 只是数据库概念的抽象（通常它包装了一个 DB 游标）。尺寸应该是多少？上次查询获取的数据总量？您想要通过网络发送的字节数吗？存储结果所需的内存量？

我认为您应该退后一步，告诉我们您的基本要求是什么。那么你实际上可能会得到一个答案:-)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-26T08:00:09.603

您将需要使用网络堆栈监控工具来拦截和记录您的应用程序和数据库之间发送和接收的网络数据包。

# apache - 如何将不同的子域请求重定向到不同的端口

> ID：589368
> 
> 赞同：17
> 
> 时间：2009-02-26T06:29:30.617
> 
> 标签：apache

我有两个应用程序，一个是`www.myexample.com`，另一个是`blog.myexample.com`. 我正在使用 PHP 和 Apache。

现在，我想让`www.myexample.com`我的机器的 82`blog.myexample.com`端口和同一台机器的 83 端口运行。如何配置 apache 和/或 PHP 脚本，以便正确处理请求的请求？

**编辑：感谢所有回复的人，但我担心我的问题不清楚——我的错！**

**我真正想要的是模拟 www.myexample.com 和 blog.myexample.com 位于不同机器上的条件。因此，当请求进入时，网关服务器（也托管 www.myexample.com 的服务器）将检查这是对 www.myexample.com 还是对 blog.myexample.com 的请求，并进行必要的重新路由。**

这该怎么做？谢谢。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2009-02-26T07:12:35.193

我假设您有自己的理由希望这两个站点 (`www`和`blog`) 在不同的端口上运行 - 并且在不同的进程中运行。如果这不是您想要的，例如您不想拥有两个不同的进程，那么拥有不同的端口可能也不是您想要的：使用`VirtualHost`，在端口上的同一个 apache+php 实例中共同托管两个域80\. *否则，请继续阅读。*

假设您有两个 apache+php 进程分别在 localhost:82 和 localhost:83 上侦听，请调出第三个 apache-only 进程作为反向代理。使用两个虚拟主机定义，让反向代理 apache 实例侦听来自 Internet 的端口 80 上的请求。第一个虚拟主机定义`www`将请求转发到 localhost:82，而第二个虚拟主机定义`blog`将请求转发到 locahost:83，例如：

```
NameVirtualHost *:80

# www
<VirtualHost *:80>
  ServerName www.myexample.com
  ProxyPass               /       http://localhost:82/
  ProxyPassReverse        /       http://localhost:82/
</VirtualHost>

# blog
<VirtualHost *:80>
  ServerName blog.myexample.com
  ProxyPass               /       http://localhost:83/
  ProxyPassReverse        /       http://localhost:83/
</VirtualHost> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-02-26T07:19:30.980

我对这类事情使用代理。

在我的示例中，我在端口 80 上运行 apache 1.3，但我需要 svn 存储库才能在 apache 2.2 上运行，并且我不想每次都在域末尾键入 :82。所以我在 apache 1.3（端口 80）上做了代理重定向：

```
<VirtualHost *:80>
  ServerName svn.mydomain.com
  ServerAlias svn
  ServerAdmin my@email.com

  <IfModule mod_proxy.c>
    ProxyPass / http://svn:82/
  </IfModule>
</VirtualHost> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-01-18T09:33:29.563

在终端上运行以下行（正确指定您的域和子域名）

```
sudo nano /etc/apache2/sites-available/subdomain.domain.com.conf 
```

粘贴以下代码并根据您的要求进行更改

```
<VirtualHost *:80>
        ServerAdmin admin@domain.com
        ServerName subdomain.domain.com
        ServerAlias subdomain.domain.com
        ProxyRequests Off

        #ProxyPass / http://localhost:8080/
        <Location />
                ProxyPreserveHost On
                ProxyPass http://domain.com:8080/
                ProxyPassReverse http://domain.com:8080/
        </Location>
     # Uncomment the line below if your site uses SSL.
     #SSLProxyEngine On
</VirtualHost> 
```

在终端上运行以下行（正确指定您的域和子域名）

```
sudo a2enmod proxy
sudo a2enmod proxy_http
sudo a2enmod subdomain.domain.com.conf
sudo service apache2 restart 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-02-26T06:41:53.630

从我的帽子顶部：

```
Listen 82
Listen 83
NameVirtualHost 1.2.3.4 # Use your server's IP here

<VirtualHost www.myexample.com:82>
# Configure www.myexample.com here
</VirtualHost>

<VirtualHost blog.myexample.com:83>
# Configure blog.myexample.com here
</VirtualHost> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-04T15:17:01.620

一个更完整的答案是做这样的事情，它允许你设置一个代理网关，这是上面松散描述的。

服务器名称本地主机

```
<Proxy *>
    Order deny,allow
    Allow from localhost
</Proxy>

ProxyRequests           Off
ProxyPreserveHost       On      

ProxyPass               /       http://localhost:10081/
ProxyPassReverse        /       http://localhost:10081/
ProxyPassReverseCookiePath /    http://localhost:10081/ 
```

# mysql - 如何在不使用子查询的情况下修复这个 mysql 查询？

> ID：589370
> 
> 赞同：0
> 
> 时间：2009-02-26T06:30:07.870
> 
> 标签：mysql

我有 3 张桌子。出于本示例的目的，我将尽可能简化它。

第一个表包含电影 ID 和名称，第二个表包含流派 ID 和流派名称（动作、戏剧等）。第三个表存储与每部电影相关的流派 ID，因为有些电影不止一个。它有 2 列，genre_id 和 movie_id。童话般简单的东西。我试图输出电影列表，以及与每部电影相关的类型列表。

```
 SELECT *
        FROM movies
        LEFT JOIN gen_pairs
        ON movies.mov_id = gen_pairs.gen_movieid
        LEFT JOIN categories
        ON gen_pairs.gen_catid = categories.cat_id 
    GROUP BY mov_id 
```

这显然会输出每部电影的单一类型，即使它在 gen_pairs 表中有多个类型。如何在不为每个项目运行子查询的情况下为每部电影显示一个以逗号分隔的流派列表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-26T06:47:10.467

您的选择应该构建笛卡尔积，因此您将获得类似的输出

```
MovieA   GenreA
MovieA   GenreB
MovieB   GenreA
... 
```

但听起来你想要这个：

```
MovieA   GenreA, GenreB
MovieB   GenreA
... 
```

MySQL 有一个 GROUP_CONCAT 函数来做你想做的事：

```
SELECT m.mov_id, GROUP_CONCAT(c.name)
       FROM movies m
  LEFT JOIN gen_pairs gp ON (m.mov_id = gp.gen_movieid)
  LEFT JOIN categories c ON (gp.gen_catid = c.cat_id)
  GROUP BY m.mov_id 
```

注意 GROUP_CONCAT 和 GROUP BY。

# asp.net - 如何在 ASP.NET Web 窗体中使用依赖注入

> ID：589374
> 
> 赞同：33
> 
> 时间：2009-02-26T06:31:15.027
> 
> 标签：asp.net, dependency-injection, inversion-of-control, webforms

我正在尝试找出一种将依赖注入与 ASP.NET Web 窗体控件一起使用的方法。

我有很多控件可以直接创建存储库，并使用它们来访问和绑定数据等。

我正在寻找一种模式，我可以将存储库传递给外部控件（IoC），因此我的控件仍然不知道存储库是如何构建的以及它们来自哪里等。

我不希望我的控件依赖于 IoC 容器，因此我只想能够使用构造函数或属性注入来构造控件。

（更复杂的是，这些控件是由 CMS 在运行时构建并放置在页面上的！）

有什么想法吗？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2010-10-03T10:10:52.867

**2019 年更新**：随着 Web 表单 4.7.2 的引入，现在可以更好地支持 DI。这使以下内容无效。请参阅：[在 .NET 4.7.2 中的 WebForms 中连接 Simple Injector](https://stackoverflow.com/questions/50632627/wiring-up-simple-injector-in-webforms-in-net-4-7-2/50641383#50641383)

`PageHandlerFactory`您可以通过用自定义替换默认值来使用自动构造函数注入。这样，您可以使用重载的构造函数来加载依赖项。您的页面可能如下所示：

```
public partial class HomePage : System.Web.UI.Page
{
    private readonly IDependency dependency;

    public HomePage(IDependency dependency)
    {
        this.dependency = dependency;
    }

    // Do note this protected ctor. You need it for this to work.
    protected HomePage () { }
} 
```

`PageHandlerFactory`可以在 web.config 中配置该自定义，如下所示：

```
<?xml version="1.0"?>
<configuration>
  <system.web>
    <httpHandlers>
      <add verb="*" path="*.aspx"
        type="YourApp.CustomPageHandlerFactory, YourApp"/>
    </httpHandlers>
  </system.web>
</configuration> 
```

你`CustomPageHandlerFactory`可以看起来像这样：

```
public class CustomPageHandlerFactory : PageHandlerFactory
{
    private static object GetInstance(Type type)
    {
        // TODO: Get instance using your favorite DI library.
        // for instance using the Common Service Locator:
        return Microsoft.Practices.ServiceLocation
            .ServiceLocator.Current.GetInstance(type);
    }

    public override IHttpHandler GetHandler(HttpContext cxt, 
        string type, string vPath, string path)
    {
        var page = base.GetHandler(cxt, type, vPath, path);

        if (page != null)
        {
            // Magic happens here ;-)
            InjectDependencies(page);
        }

        return page;
    }

    private static void InjectDependencies(object page)
    {
        Type pageType = page.GetType().BaseType;

        var ctor = GetInjectableCtor(pageType);

        if (ctor != null)
        {
            object[] arguments = (
                from parameter in ctor.GetParameters()
                select GetInstance(parameter.ParameterType)
                .ToArray();

            ctor.Invoke(page, arguments);
        }
    }

    private static ConstructorInfo GetInjectableCtor(
        Type type)
    {
        var overloadedPublicConstructors = (
            from constructor in type.GetConstructors()
            where constructor.GetParameters().Length > 0
            select constructor).ToArray();

        if (overloadedPublicConstructors.Length == 0)
        {
            return null;
        }

        if (overloadedPublicConstructors.Length == 1)
        {
            return overloadedPublicConstructors[0];
        }

        throw new Exception(string.Format(
            "The type {0} has multiple public " +
            "ctors and can't be initialized.", type));
    }
} 
```

**不利的一面是，这仅在您以完全信任的方式运行时才有效。**[你可以在这里](http://www.cuttingedge.it/blogs/steven/pivot/entry.php?id=81)阅读更多关于它的信息。但请注意，在部分信任的情况下开发 ASP.NET 应用程序[似乎是一个失败的原因](https://stackoverflow.com/questions/16849801/is-trying-to-develop-for-medium-trust-a-lost-cause)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2010-04-18T04:05:25.720

[Autofac](https://autofac.readthedocs.io/en/latest/integration/aspnet.html)在 ASP.NET WebForms 中支持相当隐蔽的依赖注入。我的理解是它只是使用 http 模块连接到 ASP.NET 页面生命周期并进行属性注入。唯一的问题是，对于控件，我认为直到Init 事件**之后才会发生这种情况。**

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2018-07-25T10:17:18.193

从 .NET 4.7.2（[新增](https://docs.microsoft.com/en-us/dotnet/framework/whats-new/#aspnet)功能）开始，开发人员现在可以轻松地在 WebForms 应用程序中使用依赖注入。使用 UnityAdapter，您可以通过 4 个简单的步骤将其添加到现有的 WebForms 应用程序中。[请参阅此](https://blogs.msdn.microsoft.com/webdev/2018/06/05/use-dependency-injection-in-webforms-application/)博客。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-02-26T07:07:53.443

最好的方法是为控件创建一个基类，例如：

```
public class PartialView : UserControl
{
    protected override void OnInit(System.EventArgs e)
    {
        ObjectFactory.BuildUp(this);
        base.OnInit(e);
    }
} 
```

这将注入从该基类继承的任何控件（使用结构映射）。将其与基于属性的配置相结合，您将能够拥有如下控件：

```
public partial class AdminHeader : PartialView
{
   IMyRepository Repository{get;set;}
} 
```

**更新1：**如果你不能让控件继承，也许CMS在创建控件后有一个钩子，你可以在那里调用BuildUp。此外，如果 CMS 允许您挂钩某些东西来获取实例，您可以使用基于构造函数的注入，但我更喜欢 BuildUp 在这种特定情况下，因为 asp.net 没有针对此的挂钩。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-02-26T23:18:44.933

您还可以在 Application_Start global.asax 事件中创建一些单例实例，并将它们用作公共静态只读属性。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-03-27T22:17:03.153

这是我最近用来避免与管道挂钩的一个解决方案（我发现这让以后看我的代码的每个人都感到困惑，但是是的，我也看到了它的好处）：

```
public static class TemplateControlExtensions
{
    static readonly PerRequestObjectManager perRequestObjectManager = new PerRequestObjectManager();

    private static WIIIPDataContext GetDataContext(this TemplateControl templateControl)
    {
        var dataContext = (WIIIPDataContext) perRequestObjectManager.GetValue("DataContext");

        if (dataContext == null) 
        {
           dataContext = new WIIIPDataContext();
           perRequestObjectManager.SetValue("DataContext", dataContext);   
        }

        return dataContext;
    }

    public static IMailer GetMailer(this TemplateControl templateControl)
    {
        return (IMailer)IoC.Container.Resolve(typeof(IMailer));
    }

    public static T Query<T>(this TemplateControl templateControl, Query<T> query)
    {
        query.DataContext = GetDataContext(templateControl);
        return query.GetQuery();
    }

    public static void ExecuteCommand(this TemplateControl templateControl, Command command)
    {
        command.DataContext = GetDataContext(templateControl);
        command.Execute();
    }

    private class PerRequestObjectManager
    {
        public object GetValue(string key)
        {
            if (HttpContext.Current != null && HttpContext.Current.Items.Contains(key))
                return HttpContext.Current.Items[key];
            else
                return null;
        }

        public void SetValue(string key, object newValue)
        {
            if (HttpContext.Current != null)
                HttpContext.Current.Items[key] = newValue;
        }
    }
} 
```

这展示了如何非常轻松地创建自己的生命周期管理器，以及如何根据需要连接到 IoC 容器。哦，我还使用了一种不相关的查询/命令结构，但更多关于其背后的推理可以在这里找到：

[限制你的抽象：重构以减少抽象](http://ayende.com/blog/154209/limit-your-abstractions-refactoring-toward-reduced-abstractions)

# ios - In iOS, how would you programmatically pass a username / password to a secure site

> ID：589377
> 
> 赞同：3
> 
> 时间：2009-02-26T06:33:37.987
> 
> 标签：ios

How can you, in iOS, programmatically access a password protected site that has been protected by .htaccess or access control.

Using NSURLRequest, you can make a GET request from a URL. But if the URL is protected how would you send the username password pair. Also, what if it's encrypted with standard MD5 encryption.

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-02-26T06:37:10.677

Add something like this to your HTTPConnectionDelegate:

```
-(void)connection:(NSURLConnection *)aConnection didReceiveAuthenticationChallenge:(NSURLAuthenticationChallenge *)challenge {
        if ([challenge previousFailureCount] == 0) {
                NSURLCredential *newCredential;
                newCredential = [NSURLCredential credentialWithUser:username password:password persistence:NSURLCredentialPersistenceNone];
                [[challenge sender] useCredential:newCredential forAuthenticationChallenge:challenge];
        } else {
                [[challenge sender] cancelAuthenticationChallenge:challenge];
        }
} 
```

# reporting-services - 是否可以自行安装 SSRS 报表管理器？

> ID：589382
> 
> 赞同：2
> 
> 时间：2009-02-26T06:36:25.263
> 
> 标签：reporting-services, reportmanager

我被要求研究编写一个安装程序，它只会在机器上自行设置 Reporting Service 的 Report Manager。

这可能吗？我的网络搜索没有给我一个好的答案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-02-27T06:22:03.497

好的，我找到了答案：

[http://msdn.microsoft.com/en-us/library/aa179337(SQL.80).aspx](http://msdn.microsoft.com/en-us/library/aa179337(SQL.80).aspx)

如果您仔细阅读“ADDLOCAL”位，您会看到您可以只安装报告管理器。需要这样的东西：

```
setup.exe /ADDLOCAL="RS_Manager" 
```

# windows - 使用免费工具开发基于 Windows 的轻量级（无运行时）GUI 应用程序

> ID：589387
> 
> 赞同：22
> 
> 时间：2009-02-26T06:38:16.617
> 
> 标签：windows, user-interface, desktop-application, portability

有谁知道支持在 Windows 平台上开发 GUI 应用程序的免费工具（语言、环境）？

我希望能够创建一个不依赖于任何外部运行时或库的单个可执行文件。

我希望能够以与 SysInternals 的 Process Explorer 或 Autoruns 非常相似的方式运行此 EXE。换句话说; 一个没有安装程序的便携式应用程序。

此应用程序还必须提供相当丰富的窗口（控件、小部件等）用户界面，并且应该在 Windows 2000、XP、Vista 和更高版本上运行。

我知道 C/C++，但我正在寻找一种为 GUI 开发提供更具体和更快的支持的环境/语言。此外，德尔福需要花钱。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-02-26T06:44:33.310

对于快速原型设计，[**Autoit**](http://www.autoitscript.com/autoit3/index.shtml)是一个可行的选择（但它是一种脚本语言）。

![http://www.autoitscript.com/images/gui_eg1.png](https://i.stack.imgur.com/G0cmW.png)

结合[**Scite**](http://www.autoitscript.com/autoit3/scite/)作为编辑器和[autoit to exe 功能](http://www.autoitscript.com/forum/index.php?showtopic=81842)（Scite 中的**AutoIt3.exe和实际生成 exe 的**[**Autoit3Wrapper.exe**](http://www.autoitscript.com/autoit3/scite/docs/AutoIt3Wrapper.htm)），您拥有完整的 GUI 开发环境。

* * *

[AutohotKey](http://www.autohotkey.com/)是一种替代方案，但基于旧的 AutoitV2。

不过，您可以从 Autoit 执行 AutohotKey 脚本；）

```
Run("c:\Program Files\Autohotkey\Autohotkey.exe c:\scripts\devicesset.ahk") 
```

* * *

虽然本机不支持交互式调试*，*但它们是（2008 年，但在 2014 年：是？）**[几个调试工具](http://www.autoitscript.com/forum/index.php?showtopic=55548&st=0&p=421272&#entry421272)**来促进调试过程。（从这[张票](http://www.autoitscript.com/trac/autoit/ticket/264)）

![http://www.autoitscript.com/forum/uploads/monthly_01_2008/post-3602-1199735240.png](https://i.stack.imgur.com/VAXTL.png)

2014 年更新：可能不支持“AutoEditDebugger”：

> 编辑 2009 年 10 月：注意此脚本自 2008 年以来一直没有维护。由于编辑器的一些问题，它在 Vista 中崩溃。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-02-26T06:53:35.113

Delphi 绝对是一个不错的选择。有一个名为[Turbo Delphi](http://turboexplorer.com/delphi)**的免费版本**。可用的版本已经有几年的历史了，所以很遗憾他们还没有发布新东西的 Turbo 版本。

也有完整的 RAD Studio[试用版，但我认为这不是您想要的。](http://cc.codegear.com/free/delphi)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-02-26T07:08:28.887

您可以免费获得[Turbo Delphi 和 Turbo C++ Builder 资源](http://www.turboexplorer.com/downloads)管理器版本，您可以使用它们开发本机应用程序，您只能拥有 .exe 文件，而不依赖于任何 Windows 版本（win98 到 win7），它们都包含超过200 个组件，您可以使用更多（没有安装到 IDE 的唯一限制），您可以使用它们开发免费和商业软件。

Delphi 是最RAD（快速应用程序开发）IDE，您可以使用它以非常简单和高效的方式生成Windows 应用程序，与C++ 的速度相比，您可以快速开发应用程序并具有更快的执行时间。

使用基于[FreePascal编译器的](http://www.freepascal.org/)[Lazarus IDE](http://www.lazarus.freepascal.org/)的另一种选择，因此您可以让您的应用程序在 windows/linux/MacOS/Unix 等平台上运行。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-02-26T07:15:23.283

[视觉 C++ 速成](http://www.microsoft.com/express/vc/)+ [WTL](http://wtl.sourceforge.net/)。两者都是免费的。WTL 是一个比较好的(1) 窗口库。但是，没有向导，您必须对 Win32 窗口系统有很好的了解。

您还可以使用[Visual C# Express](http://www.microsoft.com/express/vcsharp/)和[Mono](http://www.mono-project.com/)来构建 WinForms 应用程序。虽然最终结果在技术上不是一个独立的可执行文件并且需要一个框架，但 Mono dll 可以与您的 exe (2) 一起分发，因此您只需一个文件夹即可进行 xcopy 部署。（而且我认为在安装了 .Net 的 Windows 上，您的 exe 将自动在 .Net 上运行）

*   (1) 我被 WPF 宠坏了。:-)
*   (2) 阅读内胎。不过，我还没有亲自尝试过。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2009-02-26T07:51:50.403

鉴于您关于 C++ 的声明，也许不是一个选项，但如果您正在开发一个开源/免费应用程序，那么[Qt](http://www.qtsoftware.com/downloads/opensource/appdev)是一个非常好的带有设计器的 GUI 工具包。

此外，[wxWidgets](http://www.wxwidgets.org)是一个非常实用的工具包，它允许您部署单个 exe，尽管最好的 GUI 设计器不是免费的。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-02-26T07:07:03.647

也许[D](http://en.wikipedia.org/wiki/D_(programming_language))是一个选项？我的一个朋友在[这里](http://www.galador.net/codeblog/post/2008/09/24/Checking-out-D.aspx)写了一个关于 D 的 GUI 设计器的博客，我相信生成的可执行文件没有依赖关系。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-02-26T13:25:28.590

只需将 VS.NET 与 C 和 Win32 api 一起使用。

当然不需要运行时，因为 CRT 是本机的。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-01-15T12:26:38.853

您应该使用纯 C 语言中的 Digital Mars C/C++ 并使用 WIN32 API 的 GDI32 函数进行编程（只需 #include ）。不要忘记将二进制对象可执行文件与 gdi32.lib 链接。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-02-26T06:40:59.013

查看 Microsoft 的开发人员工具的[Express 版本](http://www.microsoft.com/Express/)。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-02-26T06:50:49.753

如果您正在做非常简单的应用程序，AutoIt 可能是一个选项，因为它不需要运行时文件，而且它的可执行文件甚至可以在 WinPE 上运行。虽然它有点原始，但并不完全是面向对象的。它的工作方式有点像旧的 VB。然而，它是免费且易于学习的，除了 NSIS（NullSoft 安装系统）之类的东西之外，没有很多免费的、独立的 GUI 创建者。

# c++ - 在 C/C++ 中声明和使用 FILE * 指针的正确方法是什么？

> ID：589389
> 
> 赞同：8
> 
> 时间：2009-02-26T06:40:08.517
> 
> 标签：c++, c, file

在 C/C++ 中声明和使用 FILE * 指针的正确方法是什么？应该声明为全局的还是局部的？有人可以举一个很好的例子吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2009-02-26T06:45:19.800

无论是本地的还是全球的，都无关紧要。文件指针的范围与它的用途无关。

一般来说，尽可能避免使用全局变量是个好主意。

这是一个示例，显示如何从 to`input.txt`复制`output.txt`：

```
#include <stdio.h>
int main(void) {
    FILE *fin, *fout; int c;

    // Open both files, fail fast if either no good.

    if ((fin = fopen("input.txt", "r")) == NULL) {
        fprintf(stderr, "Cannot read from input.txt");
        return 1;
    }

    if ((fout = fopen("output.txt", "w")) == NULL) {
        fprintf(stderr, "Cannot write to output.txt");
        fclose(fin);
        return 1;
    }

    // Transfer character by character.

    while ((c = fgetc(fin)) >= 0) {
        fputc (c, fout);
    }

    // Close both files and exit.

    fclose(fin);
    fclose(fout);

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-02-26T06:47:11.323

它只是一个普通的指针，和其他指针一样。

```
FILE *CreateLogFile() 
{
    return fopen("logfile.txt","w"); // allocates a FILE object and returns a pointer to it
}

void UsefulFunction()
{
   FILE *pLog = CreateLogFile(); // it's safe to return a pointer from a func
   int resultsOfWork = DoSomeWork();
   fprintf( pLog, "Work did %d\n", resultsOfWork );  // you can pass it to other functions
   fclose( pLog ); // just be sure to clean it up when you are done with fclose()
   pLog = NULL;    // and it's a good idea to overwrite the pointer afterwards
                   // so it's obvious you deleted what it points to
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-26T06:45:40.860

这是谷歌上关于“file io in c”的第一次点击

[http://www.cs.bu.edu/teaching/c/file-io/intro/](http://www.cs.bu.edu/teaching/c/file-io/intro/)

这是来自 gamedev 的第三次点击，更多的是 C++ 倾斜

[http://www.gamedev.net/reference/articles/article1127.asp](http://www.gamedev.net/reference/articles/article1127.asp)

您在需要它的范围内声明指针。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-02-26T06:47:54.630

```
int main(void)
{
  char c;
  FILE *read;
  read = fopen("myfile", "r"); // opens "myfile" for reading
  if(read == NULL)
  {
    perror("Error: could not open \"myfile\" for reading.\n");
    exit(1);
  }
  c = fgetc(read);
  fclose(read);
  printf("The first character of myfile is %c.\n", c);
  return 0;
} 
```

如果您愿意，您完全可以声明全局文件句柄，就像任何其他变量一样，但可能不推荐这样做。

这是C方式。C++ 可以使用它，但我认为有一种对 C++ 更友好的方式。请注意，当问题标记为 C/C++ 时，我讨厌它，因为 C 和 C++*不是*同一种语言，而且工作方式*也不*一样。C++ 有很多不同的方法来做 C 没有的事情，在 C++ 的上下文中它们可能更容易做，但不是有效的 C。所以虽然这适用于任何一种语言，但它不是你的如果您主要使用 C++，则需要。

编辑：添加了一些错误检查。始终在代码中使用错误检查。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-02-26T07:49:15.153

首先，请记住文件指针（和相关的分配结构）基于较低级别的 open() read() write() 调用。关联的文件描述符（由 fileno(file_pointer) 获得是最不有趣的东西，但您可能想用它来观察您的范围。

如果您要在模块中将文件指针声明为全局文件，通常最好将其保持为静态（包含在该模块/目标文件中）。有时这比将它存储在从函数传递到函数的结构中要容易一些，如果您需要匆忙编写一些东西。

例如，（坏）

```
#include <stdio.h>
#include ...

#define MY_LOG_FILE "file.txt"

FILE *logfile 
```

更好的做法是：

```
#include <stdio.h>

#define MY_LOG_FILE "file.txt"

static FILE *logfile;

int main(void)
{ 
```

除非，您需要几个模块才能访问该指针，在这种情况下，您最好将它放在一个可以传递的结构中。

如果仅在一个模块中需要它，请考虑在 main() 中声明它并让其他函数接受文件指针作为参数。因此，除非您的模块中的函数有太多参数，以至于另一个参数无法忍受......（通常）没有理由全局声明文件指针。

一些日志库会这样做，我不关心......尤其是在处理可重入函数时。没关系 C 的单一命名空间 :)

# php - PHP 的 <> 操作符

> ID：589391
> 
> 赞同：2
> 
> 时间：2009-02-26T06:40:28.937
> 
> 标签：php, operators

运算符的确切含义是什么`<>`？

它与`!=`（不等于）相同吗？

### 示例代码

```
$foo = 'text';

if ($foo <> 'photo') {
    echo 'foo';
}
else {
    echo 'bar';
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-02-26T06:50:46.493

正如 NikiC 所指出的， <> 和 != 是相同的并且具有相同的优先级。我之前的回答是基于文档中似乎存在的错误，该错误现已更正。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-02-26T06:44:23.280

那是正确的。它在语言之间非常普遍。我通常在我的[SQL Server](http://en.wikipedia.org/wiki/Microsoft_SQL_Server)查询/存储过程中使用该方法。

[PHP：比较运算符](http://us2.php.net/manual/en/language.operators.comparison.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-26T06:42:37.403

是的，它与`!=`（参见[手册](http://php.net/manual/en/language.operators.comparison.php)）相同。

# iphone - 如何在 iPhone 上连接两个字符串？

> ID：589395
> 
> 赞同：13
> 
> 时间：2009-02-26T06:41:31.587
> 
> 标签：iphone, string

如何将字符串“Hello”和字符串“World”连接到“HelloWorld”？看起来“+”不起作用。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2009-02-26T06:44:27.647

```
NSString *string = [NSString stringWithFormat:@"%@%@", @"Hello", @"World"];
NSLog(@"%@", string); 
```

这应该可以解决问题，尽管我确信有更好的方法可以做到这一点，只是内存不足。我还必须说这是*未经测试*的，所以请原谅我。最好的办法是找到 NSString 的 stringWithFormat 文档。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2009-02-26T07:29:33.903

怎么样：

```
NSString *hello = @"Hello";
NSString *world = @"World";
NSString *helloWorld = [hello stringByAppendingString:world]; 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2009-02-26T14:03:02.040

如果您有两个文字字符串，您可以简单地编写代码：

```
NSString * myString = @"Hello" @"World"; 
```

这是一种在代码中分解长字符串的有用技术。

但是，这不适用于字符串变量，您希望使用 stringWithFormat: 或 stringByAppendingString:，如其他响应中所述。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2009-03-18T18:14:38.263

总是有 NSMutableString ..

```
NSMutableString *myString = [NSMutableString stringWithString:@"Hello"];
[myString appendString: @"World"]; 
```

笔记：

```
NSMutableString *myString = @"Hello"; // won't work, literal strings aren't mutable 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2011-11-03T07:32:26.167

```
t3.text=[t1.text stringByAppendingString:t2.text]; 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2010-06-12T17:08:04.603

比尔，我喜欢你的简单解决方案，我想指出你也可以消除两个 NSString 之间的空间：

```
NSString * myString = @"Hello"@"World"; 
```

# java - 在 Java 中启动计时器

> ID：589399
> 
> 赞同：0
> 
> 时间：2009-02-26T06:43:02.393
> 
> 标签：java, timer

我希望在 5 分钟后执行特定的代码。我怎样才能使用 Java 做到这一点？

```
 out.println("<HTML>");
        out.println("<head>");
        //out.println("<frame>");
        out.println("<frameset rows=\"80%, *\" frameborder=\"0\" border=\"0\" framespacing=\"0\">");
       out.println("<frame src=\"DataCenterImage.html\" target=\"DisplayFrame\">"); 
       //out.println("Hai");
        out.println("<frame src= \"unlock.html\" target=\"DisplayFrame\">"); 
        out.println("</frameset>");
        out.println("</head>");
        out.println("</HTML>"); 
```

我希望在 15 分钟后执行上述操作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-02-26T06:56:49.803

在 Java 1.5 及更高版本中，您可以使用该`java.util.concurrent`包

```
ScheduledExecutorService scheduler = Executors.newSingleThreadedScheduledExecutor();
ScheduledFuture<?> f = scheduler.schedule(new Runnable() {
    public void run() {
        //Code to be executed here
    }
}, 15L, TimeUnit.MINUTES); 
```

您可以这样取消执行：

```
f.cancel(false); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-26T06:58:34.337

[Quartz](http://www.quartz-scheduler.org/ "石英")框架也可能对您有所帮助。

从他们的网站：

> Quartz 是一个功能齐全的开源作业调度系统，可以与几乎任何 J2EE 或 J2SE 应用程序集成或一起使用——从最小的独立应用程序到最大的电子商务系统。Quartz 可用于创建简单或复杂的调度，以执行数十、数百甚至数万个作业；任务被定义为标准 Java 组件或 EJB 的作业。Quartz Scheduler 包括许多企业级功能，例如 JTA 事务和集群。

我在不同类型的应用程序中经常使用它来调度，并且对此非常满意。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-26T06:52:32.183

你可以使用：

```
Thread.sleep(900000);
execute code... 
```

sleep() 方法需要毫秒作为参数，因此你的 15 分钟是一个巨大的数字。

# python - Python - 如何检查文件是否被另一个应用程序使用？

> ID：589407
> 
> 赞同：9
> 
> 时间：2009-02-26T06:44:48.240
> 
> 标签：python, windows, unix, logging, file-io

我想打开一个由另一个应用程序定期写入的文件。此应用程序无法修改。因此，我只想在知道该文件未被其他应用程序写入时才打开该文件。

有没有一种pythonic方法可以做到这一点？否则，我如何在 Unix 和 Windows 中实现这一点？

**编辑**：我会尝试澄清。*有没有办法检查当前文件是否已被另一个应用程序打开？*

我想从这个问题开始。那些其他应用程序读/写现在是否无关紧要。

我意识到它可能依赖于操作系统，所以现在这可能与 python 无关。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-02-26T06:55:28.387

您的 python 脚本是否希望打开文件进行写入或读取？遗留应用程序是在写入之间打开和关闭文件，还是保持打开状态？

了解遗留应用程序在做什么以及您的 python 脚本试图实现什么是非常重要的。

这一功能领域高度依赖于操作系统，不幸的是，您无法控制遗留应用程序这一事实只会让事情变得更加困难。是否有 python 或非 python 的方式来做到这一点可能是你最不关心的问题 - 难题将是你想要实现的目标是否可能。

* * *

**更新**

好的，所以（从您的评论中）知道：

> 旧版应用程序每 X 分钟打开和关闭文件，但我不想假设在 t = t_0 + n*X + eps 它已经关闭了文件。

然后改变问题的参数。它实际上可以在给定一些假设的情况下以独立于操作系统的方式完成，或者作为依赖于操作系统和独立于操作系统的技术的组合来完成。:)

1.  **独立于操作系统的方式**：如果可以安全地假设遗留应用程序最多保持文件打开某个已知时间量，例如`T`几秒钟（例如打开文件，执行一次写入，然后关闭文件），然后重新打开每秒或多或少`X`，其中`X`大于 2* `T`。
    *   `stat`文件
    *   减去文件的修改时间`now()`，得到`D`
    *   if `T`<= `D`<`X`然后打开文件并用它做你需要的
    *   *这对您的应用程序来说可能足够安全*。安全性随着`T`/`X`减少而增加。在 *nix 上，您可能必须仔细检查`/etc/ntpd.conf`正确的时间步长与转换配置（参见 tinker）。对于 Windows，请参阅[MSDN](http://support.microsoft.com/kb/223184)
2.  **Windows**：除了（或替代）上述独立于操作系统的方法之外，您可以尝试使用以下任一方法：
    *   共享（锁定）：假设遗留程序也以共享模式打开文件（通常是 Windows 应用程序中的默认设置）；此外，如果您的应用程序在旧应用程序尝试相同（竞争条件）时获取锁，则旧应用程序将失败。
        *   这是极具侵入性且容易出错的。除非新应用程序和旧应用程序都需要同步访问以写入同一文件，并且您愿意处理旧应用程序被拒绝打开文件的可能性，否则不要使用此方法。
    *   [使用与ProcessExplorer](http://technet.microsoft.com/en-us/sysinternals/bb896653.aspx)相同的技术（相当于 *nix's `lsof`） 尝试找出遗留应用程序中打开了哪些文件
        *   你比独立于操作系统的技术更容易受到竞争条件的影响
3.  **Linux/等。**：除了（或替代）上述独立于操作系统的方法之外，您可以尝试使用与某些系统相同的技术，或者在某些系统上，只需检查符号链接指向 `lsof`哪个文件`/proc/<pid>/fd/<fdes>`
    *   你比独立于操作系统的技术更容易受到竞争条件的影响
    *   遗留应用程序不太可能使用锁定，但如果是，锁定不是一个真正的选择，除非遗留应用程序可以优雅地处理锁定的文件（通过阻塞，而不是失败 - 并且如果您自己的应用程序可以保证文件不会保持锁定状态，从而在更长时间内阻塞旧应用程序。）

* * *

**更新 2**

如果支持“检查遗留应用程序是否打开文件”（容易出现竞争条件的侵入性方法），那么您可以通过以下方式解决所述竞争条件：

1.  检查遗留应用程序是否打开了文件（a la`lsof`或`ProcessExplorer`）
2.  暂停遗留应用程序进程
3.  重复第 1 步中的检查以确认旧版应用程序在第 1 步和第 2 步之间没有打开文件；如果是，则延迟并在步骤 1 重新开始，否则继续执行步骤 4
4.  在文件上开展业务 - 理想情况下，只需将其重命名以进行后续独立处理，以使遗留应用程序暂停最少的时间
5.  恢复旧的申请流程

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-26T06:56:59.270

Unix 默认没有文件锁定。我对 Unix 环境的最佳建议是查看 lsof 命令的源代码。它对哪个进程打开了哪些文件有深入的了解。您可以将其用作解决方案的基础。这是[lsof 的 Ubuntu 源代码。](https://launchpad.net/ubuntu/+source/lsof)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-26T19:50:29.177

我做的一件事是让 python 临时重命名文件。如果我们能够重命名它，那么没有其他进程正在使用它。我只在 Windows 上测试过这个。

# iphone - 检查 sqlite 查询结果

> ID：589417
> 
> 赞同：1
> 
> 时间：2009-02-26T06:46:48.750
> 
> 标签：iphone, sqlite

在停止循环遍历结果之前，如何检查 sqlite 查询是否返回了任何内容。

```
//see if there are results and do something if not
while(sqlite3_step(selectstmt) == SQLITE_ROW) 
{ /*process on reults */} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-02-26T06:56:10.740

我想我在你的问题中遗漏了一些东西，如果它返回 SQLITE_ROW 那么它有一行可供阅读。

该 API 位于[http://www.sqlite.org/capi3ref.html#sqlite3_step](http://www.sqlite.org/capi3ref.html#sqlite3_step)

您可以通过列函数访问该数据：

[http://www.sqlite.org/capi3ref.html#sqlite3_column_blob](http://www.sqlite.org/capi3ref.html#sqlite3_column_blob)

所以你基本上是在做正确的事情，而 sqlite3_step 返回 SQLITE_ROW 你仍然有数据可以访问。

// 澄清

SQLite 使用 sqlite3_step 一次获取并为您提供一行，调用它不会检索整个结果集。因此，在调用 step 之前，您不会知道是否要获取数据。

当我在嵌入式设备上工作时，我不得不经常使用 SQLite，但总是通过一个不错的 DAL。我不是它的 API 的忠实粉丝，但我猜它是轻量级的。

# svn - Wiki 优于 CMS 的优点/缺点（反之亦然）

> ID：589419
> 
> 赞同：5
> 
> 时间：2009-02-26T06:47:02.150
> 
> 标签：svn, content-management-system, wiki, documents

您如何存储贵公司积累的内部知识？会议记录、软件规范、计划、关于其他组织的说明、讨论和存储文件、议程......

我们参与软件开发，但这不是我们的主要关注点。因此，我们的 wiki/CMS 需要能够轻松链接到 SVN 和 Trac 票证中的文件。我们正在使用 Trac Wiki atm，但它的功能不足：重组繁琐，没有“这里有什么链接”，没有文档修订。

那么：我们应该使用 CMS 还是 wiki？照我看来：

> Wiki 的优点：易于有机增长，动态创建新页面，擅长链接。
> 
> 缺点：不支持结构/层次结构，因此您需要花费大量精力来创建和维护导航框。没有每页/区域权限模型。没有“工作流程”支持。一般附着力较差。

还是很多人同时使用？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-02-26T07:28:25.577

回答您的问题：CMS 还是 Wiki？**您绝对应该使用 wiki**而不是 CMS，因为根据我的经验：

1.  wiki 是关于*协作*而不是*广播*
2.  wiki 允许*任何人编辑*
3.  wiki 具有*修订历史记录*
4.  wiki 允许*每个主题*（wiki 页面）附加附件，并保留这些附件的修订历史

根据我的经验，CMS 本质上是相反的，更适合非技术人员维护公共网站。

**哪个维基？**我总是推荐[Foswiki.org](http://foswiki.org)（前 TWiki），因为它具有出色的编辑/链接/修订/访问功能，但我不知道它是否可以与您的其他系统很好地交互。[WikiMatrix.org](http://wikimatrix.org)是一个很好的起点。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2010-11-22T18:58:47.997

我同意维基的答案。这是关于协作，而不仅仅是存储内容。我们公司将[MindTouch](http://www.mindtouch.com)用于我们的 Intranet 取得了巨大的成功。我们存储从面向外部的产品文档到午餐订单的所有内容。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-02-26T06:59:56.753

您只是在使用“错误”的 Wiki 引擎。见[维基矩阵](http://www.wikimatrix.org/)。

至于集成，如果不是开箱即用，所有成熟的 Wiki 引擎都允许创建扩展。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-02-26T07:03:03.173

[DokuWiki](http://www.dokuwiki.org/)具有结构/层次结构支持（命名空间）以及这些命名空间的可定制权限。附件工作没有问题。

我们正在成功使用它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-02-26T07:11:23.027

我们使用[pbwiki](http://pbwiki.com/)。这是一个很好的托管解决方案。但是对于 svn 访问和错误跟踪，我们使用 trac 并从 wiki 链接到 trac 页面。

pbwiki的优点：可以设置每页访问权限，总体组织更容易，支持任务分配模板，时间跟踪等。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-02-26T07:21:43.597

可能两者都不是，如果你想管理文件，你需要一个文件管理系统

您甚至可能需要某种自定义 Intranet - 不一定是一些巨大的共享点庞然大物，只是根据您的需求量身定制的东西。

做一些适当的分析，或者找人为你做......从一组两个预定选项中选择一个解决方案，有两段规范，是......不是最好的方法。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-02-26T07:04:33.030

> 共享点。

我没有费心给出更全面的答案，因为我知道我会被否决……每个人都讨厌 MS，对吧？如果您有一台 Windows Server 2003 计算机，那么您已经拥有它，因为 SharePoint Services 3.0 包含在许可证中。

那么，根据我的经验...

> 会议记录

SPS 为此提供了特定功能；您可以创建一个会议工作区网站... [http://office.microsoft.com/en-au/sharepointtechnology/HA100656201033.aspx?pid=CH100649471033](http://office.microsoft.com/en-au/sharepointtechnology/HA100656201033.aspx?pid=CH100649471033)

> 软件规范、计划、关于其他组织的注释、讨论和存储的文档、议程......

免费提供 40 种不同的应用程序模板，您可以将其中任意数量用于这些目的... [http://technet.microsoft.com/en-au/windowsserver/sharepoint/bb407286.aspx](http://technet.microsoft.com/en-au/windowsserver/sharepoint/bb407286.aspx)

一些可能对你有帮助的具体是......

错误数据库、联系人管理、IT 团队工作区、变更请求管理、知识库、项目跟踪工作区、预算和跟踪多个项目、文档库和审查、帮助台、讨论数据库、产品和营销需求计划、征求建议书、团队合作站点、考勤卡管理、缺勤请求和假期计划管理

> 轻松链接到 SVN 和 Trac 票证中的文件。

我对这些一无所知，抱歉。链接就是链接，对吧？

> Wiki 的优点：易于有机增长，动态创建新页面，擅长链接。

SharePoint 有一个内置的 Wiki 模板……它是您可以开箱即用创建的网站类型之一。

> 缺点：不支持结构/层次结构

内置于 SharePoint

> 没有每页/区域权限模型。

完全细化的权限模型内置于 SharePoint

> 没有“工作流程”支持。

基本工作流内置于 SharePoint

> 一般附着力较差。

SharePoint 中内置了出色的附件支持，包括版本控制、签入/签出等。

> 托本布| 您绝对应该使用 wiki 而不是 CMS，因为根据我的经验：

1.  wiki 是关于协作而不是广播

SharePoint 是关于协作的。

2.  wiki 允许任何人编辑

如果你愿意，SharePoint 也一样，只要你先给他们一个帐户。

3.  wiki 具有修订历史记录

SharePoint 也是如此。

4.  wiki 允许每个主题（wiki 页面）附加附件，并保留这些附件的修订历史

SharePoint 也是如此。

无论如何，祝你好运！

胡说八道。

# java - 我可以使用 JNDI 访问文件/它们的内容吗？

> ID：589427
> 
> 赞同：1
> 
> 时间：2009-02-26T06:48:58.790
> 
> 标签：java, filesystems, jndi

可以在 Java servlet 中使用 JNDI 来访问本地机器或远程机器上的文件系统吗？

我能够用它绑定本地目录/文件，但无法找到一种机制（如果存在）来读取/修改文件的内容。

这些文件是简单的文本文件。

请告诉我是否可能，以及如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-26T07:45:41.010

顾名思义，JNDI 为 Java 应用程序提供对目录和命名服务的访问。它的目标是从目录中检索资源名称。Java 应用程序通常使用 JNDI 来查找 JDBC 数据源、邮件会话以及对用户进行身份验证和授权。我想你可以在目录中存储一个自定义对象，但这不是推荐的方式。

对于本地文件，您可以添加带有文件名称和路径的字符串资源，使用 JNDI 检索它并使用标准方式读取/写入它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-26T07:02:35.530

JNDI 是一个**API**（即一个*接口*）——实现可能在它们允许您做的事情上有所不同。我认为*通常*JNDI 实现是用于资源分配和发现，而不是用于此目的。

# java - 了解Java中的每个循环

> ID：589433
> 
> 赞同：14
> 
> 时间：2009-02-26T06:52:20.873
> 
> 标签：java, foreach

下面的代码没有达到我的预期。此代码执行后，每个字符串都为空。

```
String[] currentState = new String[answer.length()];
for(String x : currentState)
{
    x = "_";
} 
```

下面的代码符合我的预期。currentState 中的每个字符串现在都是“_”

```
String[] currentState = new String[answer.length()];
for (int i = 0; i < currentState.length; i++) {
    currentState[i] = "_";
} 
```

有人可以解释为什么第一种情况不起作用吗？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2009-02-26T06:57:56.353

通过设计，每个变量“x”（在这种情况下）并不意味着被分配给。我很惊讶它甚至编译得很好。

```
String[] currentState = new String[answer.length()]; 
for (String x : currentState) { 
    x = "_"; // x is not a reference to some element of currentState 
} 
```

以下代码可能会显示您实际上正在做什么。请注意，这不是枚举的工作方式，但它举例说明了为什么您不能分配“x”。它是位置“i”的元素的副本。（编辑：请注意元素是引用类型，因此它是该引用的副本，分配给该副本不会更新相同的内存位置，即位置“i”处的元素）

```
String[] currentState = new String[answer.length()]; 
for (int i = 0; i < answer.length(); i++) { 
    String x = currentState[i];
    x = "_";
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-02-26T07:05:38.830

原始代码：

```
String currentState = new String[answer.length()];

for(String x : currentState) 
{ 
    x = "_"; 
} 
```

重写代码：

```
String currentState = new String[answer.length()];

for(int i = 0; i < currentState.length; i++) 
{ 
    String x;

    x = currentState[i];
    x = "_"; 
} 
```

我将如何编写代码：

```
String currentState = new String[answer.length()];

for(final String x : currentState) 
{ 
    x = "_";   // compiler error
} 
```

用错误重写代码：

```
String currentState = new String[answer.length()];

for(int i = 0; i < currentState.length; i++) 
{ 
    final String x;

    x = currentState[i];
    x = "_";   // compiler error
} 
```

当你做这样的事情时，使变量最终突出显示（这是一个常见的初学者错误）。尝试使您的所有变量成为最终变量（实例、类、参数、catch 中的异常等......） - 只有在您确实必须更改它们时才使它们成为非最终变量。您应该会发现 90%-95% 的变量是最终变量（初学者在开始执行此操作时会得到 20%-50%）。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-02-26T06:59:54.117

因为`x`是引用（或*引用类型的变量*）。第一段代码所做的就是将引用重新指向一个新值。例如

```
String y = "Jim";
String x = y;
y = "Bob";
System.out.println(x); //prints Jim
System.out.println(y); //prints Bob 
```

您将引用重新分配`y`给“Bob”这一事实不会影响引用`x`的分配对象。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2009-02-26T08:35:53.950

您可以将数组转换为 List，然后像这样迭代：

```
String[] currentState = new String[answer.length()];
List<String> list = Arrays.asList(currentState);
for(String string : list) {
   x = "_";     
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2009-05-28T01:45:58.497

Object x[]={1,"ram",30000f,35,"account"}; for(Object i:x) System.out.println(i); for each is used for sequential access

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2015-10-12T18:34:25.727

for each 循环意味着：

```
List suits = ...;
List ranks = ...;
List sortedDeck = new ArrayList();
for (Suit suit : suits){
    for (Rank rank : ranks)
        sortedDeck.add(new Card(suit, rank));
} 
```

所以考虑上面你可以这样做：

```
String[] currentState = new String[answer.length()];
List<String> buffList = new ArrayList<>();
for (String x : currentState){
        x = "_";
        buffList.add(x);
        // buffList.add(x = "_" ); will be work too
}
currentState = buffList.toArray(currentState); 
```

# asp.net - 如何在网站中提供多种搜索功能？

> ID：589438
> 
> 赞同：1
> 
> 时间：2009-02-26T06:54:37.733
> 
> 标签：asp.net, logic, business-logic

我正在开发一个 Web 应用程序，其中我具有以下类型的搜索功能；

*   **普通搜索**：用户将在其中输入搜索关键字以搜索记录。
*   **流行：**这不是一种搜索，它会显示网站上的流行记录，就像 digg 和其他社交书签网站一样。
*   **最近：**在此我在我的网站中显示最近添加的记录。
*   **城市搜索：**在这里，我向用户显示城市名称，例如“德里”、“孟买”等，当用户单击此链接时，将显示该特定城市的所有记录。
*   **标签搜索：**与城市搜索相同，我有标签链接，当用户单击标签时，所有标有该标签的记录都将显示给用户。
*   **字母搜索：**与城市和标签相同，此功能还具有诸如“A”、“B”、....等字母的链接，当用户单击任何字母链接时，所有以该特定字母开头的记录都将显示给用户

现在，我的问题是我必须向用户提供上面列出的搜索，但我无法决定我将使用一个页面 (result.aspx) 来显示所有搜索记录，我将使用查询字符串，用户正在使用哪个搜索以及我必须向用户显示哪些数据。例如，假设我正在搜索 city、delhi 和 tag delhi-hotels，那么两者的 url 将是：

**对于城市：** www.example.com/result.aspx ?search_type=city&city_name=delhi

**对于标签：** www.example.com/result.aspx ?search_type=tag&tag_name=delhi-hotels

**对于普通搜索：** www.example.com/result.aspx ?search_type=normal&q=delhi+hotels+and+bar&filter=hotlsOnly

现在，我觉得使用单个页面进行所有搜索的想法很混乱。所以我想到了一些更干净的想法，它对所有类型的搜索使用单独的页面作为

**对于城市：** www.example.com/city.aspx ?name=delhi

**对于标签：** www.example.com/tag.aspx ?name=delhi-hotels

**对于普通搜索：** www.example.com/result.aspx ?q=delhi+hotels+and+bar&filter=hotlsOnly

**最近：** www.example.com/recent.aspx

**对于流行：** www.example.com/popular.aspx

我的新想法更清晰，它明确地告诉用户哪个页面是做什么的，它也让他知道他现在在哪里，他现在看到了什么记录。但是这个新想法有一个问题，如果我必须更改搜索结果显示中的任何内容，那么我必须在所有页面中一一进行更改，我认为这个问题的解决方案也是，即在转发器下使用用户控制控件，我将把我的所有值一一传递给用户控件，以便为每条记录呈现 HTML。

新的想法一切都很好，但我仍然无法决定我必须去哪一个，谁能告诉我你对这个问题的想法。

我想实现一个易于维护、SEO 友好（为我的网站提供良好排名）、用户友好（易于使用和用户理解）的想法

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-02-26T10:59:21.297

在 SEO 方面要提一件事：

由于许多“结果”页面将链接到相同的内容，因此为这些页面显示*具有不同的 URL 有几个优点：

1.  如果您在网站上似乎有重复的内容，或者如果有几乎无限的列表的可能性，一些搜索引擎会被交叉。
2.  分析交通流量。

因此，以第 1 点为例，您会注意到 SO 有多种查找问题的方法，包括：

1.  在主页上
2.  通过/问题
3.  通过/标签
4.  通过/未回答
5.  通过 /feeds
6.  通过/搜索

如果您查看 SO 的 robots.txt，您会发现不允许蜘蛛访问（除其他外）：

```
Disallow: /tags
Disallow: /unanswered
Disallow: /search
Disallow: /feeds
Disallow: /questions/tagged 
```

所以搜索引擎应该只找到**一条**到达内容的路径，而不是三四条。

让他们都通过同一个页面不允许你像这样过滤。理想情况下，您希望搜索引擎为城市和标签列表编制索引，但您只需要它为实际详细信息编制一次索引 - 例如从 A 到 Z 列表。

对于第 2 点，在分析您的网站流量时，如果 URL 有意义并且结果没有隐藏在表单标题中，那么查看人们如何使用您的网站会容易得多 - 许多体面的统计数据包允许您报告在查询字符串值上，或者如果你有“好”的网址，这更容易。如果您对此感兴趣，拥有此类信息也将使销售广告变得更容易。

最后，正如我在对其他回复的评论中提到的那样，用户可能希望为特定搜索添加书签 - 将查询以一种或另一种方式（查询字符串或重写的 url）烘焙到 URL 中是允许此操作的 simiplist 方式。

*我说“出现”是因为正如其他人所指出的那样，URL 重写可以实现这一点，而实际上服务器上没有不同的页面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-26T07:19:11.170

有几个问题需要解决才能正确回答您的问题：

1.  在能够处理数据之前，您不一定需要重定向到结果页面。包含提交时搜索接口的页面或控件可以处理提交的搜索参数（和搜索类型）并启动对提供搜索结果的数据库或中间 Web 服务的调用。然后，您可以使用单个结果页面来显示检索到的数据。

2.  如果您必须通过查询字符串将提交的搜索参数传递给结果页面，那么您最好使用单个结果页面来解析这些参数并有条件地显示结果。

3.  大多数用户不依赖浏览器地址栏中的 url/querystring 信息来识别他们在网站中的当前位置。您应该有一些更具视觉指示性的东西（例如面包屑控件或标题标签）来指示当前位置。此外，正如您所提到的，可维护性问题在这里非常重要。

我绝对不会推荐第二种选择（对每种搜索使用单独的结果页面）。如果您关心 SEO，请使用 URL 重写来构建 URL“slugs”以创建更直观的路径。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-26T07:02:58.477

我会坚持原来的 result.aspx 结果页面。从用户的角度来看，我的理由是实际的 URL 本身传达的信息很少。您最好在页面上创建视觉提示，说明“使用标签 Z 在类别 Y 中搜索 X”之类的内容。

至于编码和维护，因为除了类别之外的所有内容都非常相似，因此明智的做法是将其保存在一个紧凑的小包中。正如你提出的第二个想法那样打破它只会使不需要复杂的事情复杂化。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-02-26T07:12:06.880

抛弃查询字符串并使用 URL 重写来处理您的“部分”。从书签/用户可读性的角度来看，更好的 SEO 和更清晰。

> 城市：www.example.com/city/delhi/
> 
> 标签：www.example.com/tag/delhi-hotels/
> 
> 最近：www.example.com/recent/
> 
> 流行：www.example.com/popular/

常规搜索可以去 www.example.com/search.aspx 什么的。

# vba - 是否可以为 Outlook 开发像 Gtalk 这样的聊天插件？

> ID：589439
> 
> 赞同：2
> 
> 时间：2009-02-26T06:55:14.987
> 
> 标签：vba, vb.net, outlook, vsto, outlook-addin

我的公司使用 Outlook 作为电子邮件客户端，我们登录到 Exchange 服务器。出地址簿（不是个人联系人）将所有用户连接到我们公司的网络。

我们公司没有 IM ;-( .. 我正在考虑开发像 Gmail 的 Gtalk 这样的 Outlook 插件。这可能（技术上）吗？或者有多难？我能否获得所有用户的列表（来自通讯簿) 谁打开了他们的 Outlook 以便我可以在在线列表中显示他们？我可以在没有 DB 的情况下执行此操作（只需将消息发送给收件人并显示）吗？

Outlook 开发对我来说是新的，这个[问题](https://stackoverflow.com/questions/371739/how-to-develop-an-outlook-mail-plugin)中的链接对我没有多大帮助（非常令人困惑）。我从哪里可以获得一些基本教程？

编辑：我在 Outlook 中使用过 VBA。因此，如果上述可以使用 VBA 实现，那就太好了；-) 这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-02-26T07:13:06.767

VBA 是一种构建 Office 插件的旧方法，此后已被更直接的 VB/C# 模块编码方法所取代。Office 2003 中的 VBA 插件在 Office 2007 中*应该*可以正常工作，但如果您正在查看 Office 2007 + 1，则不再是建议的方法。

如果您使用的是 Visual Studio 2005，请在 MSDN 上查找有关 Visual Studio Tools for Office (VSTO) Second Edition 加载项的信息。如果您使用的是 Visual Studio 2008，则默认情况下 VSTO 包应随附专业版（或更高版本）。它将包含用于为 Office 套件构建附加组件的所有模板。顺着这个编码插件的新方向，一切皆有可能。

我个人从未尝试过制作任何类型的服务器/客户端解决方案，因此我在这方面没有帮助，但我想我会将这些信息放在那里供您在制定聊天解决方案的规划阶段考虑.

请注意，非个人 (Exchange) 通讯簿也称为全局地址列表 (GAL)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2011-11-21T17:54:44.637

Outlook 2010 包括即时消息：

[将即时消息服务与 Outlook 结合使用](http://office.microsoft.com/en-us/outlook-help/use-instant-messaging-services-with-outlook-HP010355052.aspx)

> Microsoft Outlook 可与多种即时消息服务一起使用。您可以判断您的联系人是否可以进行实时在线聊天、音频和视频会议或文件共享。
> 
> 备注 对于您已将其即时消息电子邮件地址添加到您的即时消息联系人列表的任何人，都可以使用在线状态。此外，无论他们是否在您的即时消息联系人列表中，都会为使用 Microsoft Office Communicator 的人显示在线状态。

# jquery - 滚动后将元素定位在屏幕中间

> ID：589441
> 
> 赞同：3
> 
> 时间：2009-02-26T06:55:29.180
> 
> 标签：jquery, css, positioning

我的页面是屏幕高度的 2 倍（大小取决于页面上的其他项目）。无论滚动位置如何，我都想在屏幕中间显示一个绝对定位的 SPAN。

我在按钮单击时应用以下样式，但是如果我一直向下滚动，该元素会显示在页面的最顶部，因为它从整个页面顶部开始计算 50%。

```
.Centered {
    width: 100%;
    position: absolute;
    top: 50%;
    left: 45%;
} 
```

如何在单击按钮时根据滚动药水将元素定位在页面中间？

谢谢你。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2009-02-26T07:23:03.110

你确定你不想要[固定定位](http://www.w3schools.com/Css/pr_class_position.asp)吗？

绝对定位将项目定位在页面的上下文中，因此它将随着页面上下滚动。固定定位将项目定位在视口的上下文中，因此它不会随页面移动。相反，无论您如何滚动，它都会保持在相同的位置。

```
.Centered
{
  width:100%;
  position:fixed;
  top:50%;
  left:45%;
} 
```

[此页面上](http://www.w3.org/Style/Examples/007/menus)的菜单是固定定位的一个很好的例子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-26T07:00:15.847

```
.Centered 
{
    position:absolute;   
    width:100%;
    top:50%;
    left:50%;
    margin-height: -200px;
    max-height: 400px;
} 
```

这样，技巧就变成了为最大高度找到合适的值。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2009-02-26T07:37:37.443

尝试使用[jQuery Center 插件](http://plugins.jquery.com/project/elementcenter)。

# c# - 如何使用 .NET 从 SSRS 报告中获取数据源信息

> ID：589451
> 
> 赞同：5
> 
> 时间：2009-02-26T06:59:22.637
> 
> 标签：c#, .net, sql-server, reporting-services

我目前正在制作一个 ASP.Net 和 C# 页面，这是一些报告的前端。

我还想从与报告相同的数据源运行一些查询（每个报告仅使用 1 个数据源）。

是否可以使用 ReportingService2005 或 ReportExecutionService 成员从报表中提取数据源连接信息，以便在 SqlConnection 中重用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-02-26T13:59:27.087

您可以使用 ReportingService2005 API 来获取特定报告使用的数据源。

您需要报告的完整路径（我假设您有），然后使用它来查询报告服务的数据源（[API](http://msdn.microsoft.com/en-us/library/microsoft.wssux.reportingserviceswebservice.rsmanagementservice2005.reportingservice2005.getitemdatasources(SQL.90).aspx)）。

```
// rs = ReportingService2005 that you need to set up.

DataSource ds;
DataSources dataSources = rs.GetItemDataSources(item);

// item is a string containing the full path to the report.

dataSources = rs.GetItemDataSources(item);
ds = dataSources[0]; 
```

上面代码中的 ds 是[DataSourceDefinition](http://msdn.microsoft.com/en-us/library/microsoft.wssux.reportingserviceswebservice.rsmanagementservice2005.datasourcedefinition.connectstring(SQL.90).aspx)或 [DataSourceReference](http://msdn.microsoft.com/en-us/library/microsoft.wssux.reportingserviceswebservice.rsmanagementservice2005.datasourcereference(SQL.90).aspx)。如果它是一个定义，您可以将其转换为该类型，然后使用以下代码获取连接字符串。

```
DataSourceDefinition dsd = ds as DataSourceDefinition();
if(dsd == null)
    throw new Exception();

String connectionString = dsd.ConnectString; 
```

如果它是数据源引用，您需要查看[API](http://msdn.microsoft.com/en-us/library/ms159728(SQL.90).aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-27T16:20:33.383

希望这会有所帮助。它将列出所有属性，但特别是它会拉出连接字符串：

```
using System;
using GetPropertiesSample.ReportService2010; //This is the WebService Proxy
using System.Diagnostics;
using System.Reflection;
using System.Web.Services.Protocols;
using System.IO;

namespace GetPropertiesSample
{
class Program
{
    static void Main(string[] args)
    {
        Get_Properties_of_DataSource_given_The_Path_and_Name_of_the_Report();
    }

    private static void Get_Properties_of_DataSource_given_The_Path_and_Name_of_the_Report()
    {
        try
        {

            // Create a Web service proxy object and set credentials
            ReportingService2010 rs = new ReportingService2010();
            rs.Credentials = System.Net.CredentialCache.DefaultCredentials;
            string reportPathAndName = "/0_Contacts/209_Employee_Telephone_List_Printable";

            DataSource[] dataSources = rs.GetItemDataSources(reportPathAndName);

            DataSource ds = dataSources[0];
            string dsName = ds.Name;
            Debug.Print("----------------------------------------------------");
            Debug.Print("Data Source Name: " + dsName);
            Debug.Print("----------------------------------------------------");
            DataSourceDefinition dsd = (DataSourceDefinition)ds.Item;
            if (dsd != null)
            {
                //Here is one property
                string connectionString = dsd.ConnectString;  // <======   HERE is the Connection Strin
                //Use Reflection to get all the properties :    using System.Reflection;
                var typeDSD = typeof(DataSourceDefinition);
                var properties = typeDSD.GetProperties();
                foreach (PropertyInfo p in properties)
                {
                    Debug.Print("----------------------------------------------------");
                    Debug.Print(p.Name + ": " + p.GetValue(dsd, null));
                }
            }

        }
        catch (SoapException e)
        {
            Debug.Print("==============================");
            Debug.Print(e.Detail.OuterXml);
            Debug.Print("==============================");
        }
        catch (Exception e)
        {
            Debug.Print("==============================");
            Debug.Print(e.Message);
            Debug.Print(e.InnerException.ToString());
            Debug.Print(e.ToString());
            Debug.Print("==============================");
        }
    }
 } 
```

# django - Django：如何重定向到外部 URL？

> ID：589458
> 
> 赞同：1
> 
> 时间：2009-02-26T07:02:28.680
> 
> 标签：django, http, url, redirect, http-headers

[Django 1.0.2]

我有一个这样的视图：

```
(r'^redirect/(?P<object_id>\d+)/(?P<url>.*)/$',
    'django.views.generic.simple.redirect_to',
    {'content_type': SiteType}, 'clickout'), 
```

当我得到以下 URL 时，本地开发服务器和远程 mod_wsgi 服务器上会发生两件不同的事情：

```
# GET
"/redirect/2/http://www.example.com//"

# Remote server ends up (note the missing slash in the end)
"http://mydomain.com/example.com"

# Development server works as expected
"http://www.example.com/" 
```

我检查了 HTTP 标头，它确实尝试了错误的 URL：

```
"""HTTP/1.x 301 MOVED PERMANENTLY

Date: Thu, 26 Feb 2009 06:58:35 GMT

Server: Apache/2.0.52 (Red Hat) mod_wsgi/2.0 Python/2.5

Etag: "d41d8cd98f00b204e9800998ecf8427e"

Location: http://mydomain.com/example.com
Content-Type: text/html; charset=utf-8

Vary: User-Agent,Accept-Encoding

Content-Encoding: gzip

Content-Length: 20 
```

"""

可能是什么问题呢？如何重定向到外部 URL？

## 编辑

在 URL 中嵌入 URL 似乎不是一个好主意。apache 和 mod_wsgi 都在折叠双斜杠。（[这里有解释](http://groups.google.com/group/django-users/msg/76718270ffed9696?pli=1)）

但是将目标 URL 作为参数提供正常工作：

```
"/redirect/2/?url=http://www.example.com/" 
```

非常感谢来自[Webfaction](http://www.webfaction.com/)支持的 Sean F 帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-02-27T10:36:19.173

你是如何运行 mod_wsgi 服务器的？我希望因为您直接通过 Django 运行本地服务器，所以不会发生 url 重写。在远程服务器上，url 被重写以删除双斜杠，然后再将其传递给您的 django 应用程序。

# javascript - 使用 AJAX/JSON 提供静态 HTML 和生成内容有什么好处？

> ID：589462
> 
> 赞同：6
> 
> 时间：2009-02-26T07:03:05.590
> 
> 标签：javascript, json, separation-of-concerns, web-architecture, static-html

[http://blog.urbantastic.com/post/81336210/tech-tuesday-the-fiddly-bits](http://blog.urbantastic.com/post/81336210/tech-tuesday-the-fiddly-bits)

Urbantastic 的 Heath 描述了他的 HTML 生成系统：

> Urbantastic 中的所有 HTML 都是完全静态的。所有动态数据都通过 AJAX 以 JSON 格式发送，然后使用 Javascript 与 HTML 结合。换句话说，Urbantastic 的服务器软件专门生产和消费 JSON。HTML、CSS、Javascript 和图像都通过不同的服务（普通 Nginx 服务器）发送。

我认为这是一个有趣的模型，因为它在物理上将表示与数据分开。我不是架构专家，但似乎效率和稳定性会有所提高。

但是，以下问题与我有关：

* * *

*   [主观] Clojure 非常强大；Javascript 不是。在为另一个目标创建的语言上编写所有内容生成会产生一些痛苦（想象用 CSS 编写 Javascript 类型的代码）。除非他有一个用于生成 Javascript 的宏系统，否则 Heath 可能会在 JavaScript 和 Clojure 之间不断切换。他还会有很多JS代码；可能比 Clojure 更多。在切换到基于 LISP 的语言时，这在功能、快速开发、简洁性以及我们正在考虑的所有方面可能并不好。

*   [性能] 我对此不确定，但在用户机器上渲染所有内容可能会滞后。

*   [可访问性] 如果您禁用了 JS，则根本无法使用站点。

*   [accessibility#2] 我怀疑大量使用 JavaScript 填充的动态数据会产生跨浏览器问题。

任何人都可以发表评论吗？我有兴趣阅读您对这种架构的意见。

参考：

1.  [链接](http://news.ycombinator.com/item?id=494147)到关于 HN 的讨论。
2.  [链接](http://www.reddit.com/r/programming/comments/806xt/why_urbantastic_chose_clojure_couchdb/)到 /r/programming 的讨论。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-02-26T07:09:25.187

“Urbantastic 中的所有 HTML 都是完全静态的。所有动态数据都通过 AJAX 以 JSON 格式发送，然后使用 Javascript 与 HTML 结合。”

我认为这是 RIA 的标准模型。这里的重点词似乎是“全部”。因为很多网站很多动态内容还不是通过Ajax获取的，只有关键特性是。

如果您没有包含大量元素的大型网页，我认为渲染问题不会成为主要瓶颈。

JS 可访问性确实是个问题。但是，想要体验 AJAX 的用户必须启用 JS。您是否对有多少用户没有启用它进行过调查？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-02-26T08:51:01.820

优点是，您可以通过 CDN（如 Akamai）提供 99%（按重量计）的内容，甚至可以将其放在外部存储上（例如 S3）。仅提供 JSON 服务几乎不可能让网站受到攻击。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-26T07:24:13.887

当 AJAX 开始大受欢迎时，在 2005 年末，我编写了一个客户端模板引擎，并且基本上将我的博客模板变成了完全成熟的 AJAX 体验。

问题是，模板的东西，它真的很容易实现，它消除了很多繁重的工作。

这是它是如何完成的。

```
<div id="blogger-post-template">
<h1><span id="blogger-post-header"/></h1>
<p><span id="blogger-post-body"/><p>
<div> 
```

然后在 JavaScript 中：

```
var response = // <- AJAX response
var container = document.getElementById("blogger-post-template");
if (!template) { // template context
    template = container.cloneNode(true); // deep clone
}
// clear container
while(container.firstChild) 
    container.removeChild(template.firstChild);

container.appendChild(instantiate(template, response)); 
```

实例化函数对模板进行深度克隆，然后在克隆中搜索标识符以替换为响应中找到的数据。最终结果是一个填充的 DOM 树，它最初是在 HTML 中定义的。如果我有多个结果，我只需遍历上面的代码。

# windows - 在 Linux/Mac/Windows 中使用“抽屉”构建应用程序

> ID：589476
> 
> 赞同：1
> 
> 时间：2009-02-26T07:10:44.247
> 
> 标签：windows, linux, user-interface, macos

我想构建一个带有“抽屉”GUI元素的应用程序，就像它在Mac OS X中到处都是。

在 Linux/Windows 中可以这样做吗？是否可以跨平台构建它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-28T17:55:27.207

我认为您必须在 Linux/Windows 中滚动自己的抽屉。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-01T00:50:36.273

我喜欢 OS X 抽屉，但它们的使用频率几乎没有以前那么频繁了。我目前使用的唯一使用它们的应用程序是 OmniWeb 和 TextMate。

我认为不值得尝试为 Windows 或 Linux 重新创建该 UI 功能。除了工作量太大之外，您的用户可能会觉得它很刺耳。

一般来说，标准侧边栏应该支持您可能使用抽屉的任何内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-01T06:51:37.997

你们都说抽屉“不再”在使用，这并没有真正的帮助。无论如何，我认为它非常适合 TextMate，没有人抱怨它:-)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-01T11:19:42.000

KDE 似乎具有[KDevelop](http://www.kdevelop.org/graphics/screenshots/3.4/qmreload.png)和其他一些应用程序（Kate，编辑器，也使用它们）中看到的类似抽屉的功能，但我从未尝试在我编写的任何东西中使用它们，所以不知道如何写它们。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-02-28T10:45:41.030

我没有经常使用 Osx，但不能只是一个普通的侧边栏来完成这项工作吗？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-02-28T16:09:12.610

Mac 上不再真正使用抽屉。我只知道少数仍在使用它们，其中大多数是较旧的应用程序。大多数人已将侧边栏以可折叠的拆分视图移动到应用程序中。

# java - fo：数据单元溢出

> ID：589486
> 
> 赞同：3
> 
> 时间：2009-02-26T07:17:09.863
> 
> 标签：java, xslt, pdf-generation, xsl-fo

我正在使用 XSLT -> FO 来生成 PDF。

当列中的文本超出列的大小并且文本中没有空格时 - 文本会延伸到下一个单元格或表格之外。

我希望文本被占用在同一个单元格中。

提前感谢，Swetha

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-02-26T08:11:12.150

您可以通过插入零宽度空格字符（U+200B，HTML 实体 ​）将文本拆分为单词，然后在这些位置会出现换行符：

```
<xsl:template name="split_value">
    <xsl:param name="value"/>
    <xsl:param name="max_length"/>
    <xsl:variable name="ret">
        <xsl:value-of select="substring($value, 1, $max_length)"/>
        <xsl:if test="string-length($value) &gt; $max_length">
            <xsl:value-of select="'&#x200b;'"/>
            <xsl:call-template name="split_value">
                <xsl:with-param
                    name="value"
                    select="substring($value, $max_length + 1)"
                />
                <xsl:with-param
                    name="max_length"
                    select="$max_length"
                />
            </xsl:call-template>
        </xsl:if>
    </xsl:variable>
    <xsl:value-of select="$ret"/>
</xsl:template> 
```

**注意：您可能希望增强模板，以便它仅拆分 $max_length 连续字符之间没有空格的文本片段。**

* * *

这是一个测试用例。

输入 XML：

```
<data>0123456789</data> 
```

样式表（生成 HTML）：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    exclude-result-prefixes="xsl"
>
<xsl:template match="/">
    <html>
        <body
            style="font-family: Arial; font-size: 12pt; font-weight: normal"
        >
            <table width="4cm">
            <xsl:for-each select="/data">
                <tr><td>
                <xsl:call-template name="split_value">
                    <xsl:with-param
                        name="value"
                        select="text()"
                    />
                    <xsl:with-param
                        name="max_length"
                        select="number(4)"
                    />
                </xsl:call-template>
                </td>
                </tr>
            </xsl:for-each>
            </table>
        </body>
    </html>
</xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-26T07:55:26.387

如果可能的话，截断多余的字母。使用 xslt 的 length() 和 substring() 函数。如果您截断它，您还可以提供工具提示或其他内容以显示整个文本

# winforms - MVP/MVC 与 Winform 应用程序的传统 n 层方法

> ID：589488
> 
> 赞同：1
> 
> 时间：2009-02-26T07:18:09.487
> 
> 标签：winforms, model-view-controller, n-tier-architecture

我们有一大套应用程序，大多数是 C# 1.1，但至少有 10 个主要的应用程序是 VB6。我们正在进行一个将 VB6 应用程序升级到 .NET 3.5 的项目。

所有 c# 1.1 应用程序都是使用传统的 n 层方法编写的。UI 层实际上没有任何架构/分离。大多数代码只是响应事件并从那里开始。我想说的是，从可维护性的角度来看，它非常好，并且很容易遵循代码并加快新应用程序的速度。

当我们移植 VB6 应用程序时，最初的想法是我们应该坚持现有的模式（例如 n-Tier）。

我想知道，是否值得打破模式并使用 MVP/MVC 模式做 VB6 应用程序？MVC/MVP winform 应用程序真的更容易维护吗？我在一个基于 MVC 的项目上工作，并没有觉得它更容易维护，但这只是一个项目。

有哪些经验和建议？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-02-26T07:28:43.300

伙计，如果有什么东西适合你，你们会觉得很舒服，而且你的团队也符合规范。为什么你需要改变？

MVC/MVP 听起来不错……那我为什么还要自己做 n-Tier 呢？

我认为在您将资源投入到这种新的编程方式的实际开发中之前......您应该考虑它是否适合您的团队。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-02-26T07:46:41.960

如果您要移植 VB6 应用程序而不是完全重写，我建议您专注于您的 Pri 1 目标 - 尽快进入 .Net 世界。这样做会给您的组织带来很多好处。

到达那里后，您可以评估投资重新架构这些应用程序是否对您有利。

如果您要进行完全重写，我会建议您尝试使用 MVP/MVVM 模式的 WPF 应用程序。WPF 将为您提供更好的视觉效果。MVP/MVVM 模式将为您提供所有层的单元可测试性，包括视觉。我还假设这些应用程序是相关的，因此您可能能够实际重用您的模型和视图。（虽然，我可能在这里错了）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-26T07:21:15.203

它移动了你可能仍然在 UI 上的一层薄薄的代码。我说很薄，因为根据您的描述，您可能在其他地方有很多代码。这为您提供了对这一薄层代码进行单元测试的能力。

**更新 1：**我不建议在升级时重新架构，额外的努力最好花在获得自动化测试（单元/集成/系统）上 - 因为无论如何您都必须测试升级工作。一旦测试到位，您就可以对应用程序进行渐进式更改，并且可以轻松地通过测试来支持更改。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-05T13:51:25.213

MVC 尤其不排除 n 层架构。

我们还有 ASP.NET 1.1 业务应用程序，我觉得维护它真是一场噩梦。当事件处理程序随心所欲地做任何事情时，可能会调整其他控件，可能会调用业务逻辑中的某些内容，可能会直接与数据库对话，这只是偶然的软件工作。

如果使用正确，使用 MVC，您可以看到数据从数据库流向 UI 和向后流动的方式。如果您遇到意外行为，则可以更轻松地跟踪错误。

至少，我自己的小项目是这样的。

我将再次强调一点：无论您使用什么模式，都要坚持清晰的 n 层架构。2-Tier 或 3-Tier，只是不要把所有东西都弄成一个相互关联的大球。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-05T14:19:52.507

“改变——我们从事的活动是为了暗示进步。” - 呆伯特

不过说真的，仅仅将您的开发环境和部署平台升级到 .NET 3.51 本身就是一大步。我建议在重新设计应用程序之前可能应该先进行安全审查和代码演练。

MVC 和 MVVM 是极好的范例，特别是在可测试性方面。不要忘记它们，但也许您应该在全面采用之前考虑一个试点项目？

# html - 如何从 DIV 创建三角形

> ID：589501
> 
> 赞同：0
> 
> 时间：2009-02-26T07:24:33.260
> 
> 标签：html

我有一个`div`HTML 格式，其中写有一些文本。是通过设置其,坐标和和来创建
的。 我想画一个三角形叠加，这样我的内容就不会丢失。 我无法更改坐标，因为我的其他人的定位是基于此的。 使用 multiple 的方法生成一个 Triangle似乎也不可行，因为我不确定我会在哪里写我的文字......`div``X``Y``height``width`
`div`
`X``Y``div``div`
`div``div`

有人可以建议我如何做到这一点..？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2011-12-02T21:12:47.690

你可以用图像来做到这一点，但更有趣的方法是弄乱 div 的边框来制作一个三角形。

```
.triangle {
     font-size: 0px; 
     line-height: 0%; 
     width: 0px;
     border-bottom: 20px solid #000;
     border-left: 10px solid #000;
     border-right: 10px solid #000;
} 
```

[这是如何工作的在这里](http://www.howtocreate.co.uk/tutorials/css/slopes)更清楚地解释了

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-19T17:20:43.847

使用此代码开发三角形：

**CSS**

```
.triangle {
    width:0; 
    border-bottom:120px solid red; 
    border-left:60px solid white; 
    border-right:60px solid white;
} 
```

**HTML**

```
<div class="triangle"></div> 
```

# vb.net - 如何在 VB.NET 中卸载所有打开的表单？

> ID：589503
> 
> 赞同：3
> 
> 时间：2009-02-26T07:24:59.220
> 
> 标签：vb.net, winforms, visual-studio-2008, vb6, vb6-migration

在将 VB6 代码转换为 VB.NET 的过程中，我需要替换以下旨在关闭应用程序中剩余的所有打开表单的代码。

```
'close all sub forms
For i = My.Application.OpenForms.Count - 1 To 1 Step -1
    'UPGRADE_ISSUE: Unload Forms() was not upgraded. Click for more: 'ms-help://MS.VSCC.v90/dv_commoner/local/redirect.htm?keyword="875EBAD7-D704-4539-9969-BC7DBDAA62A2"'
    Unload(My.Application.OpenForms(i))
Next i 
```

我已经用（如*TFM*`Unload`所示）替换了该函数，但编译器抱怨它不是.`Close`*`OpenForms``My.Application`*

 *我在哪里可以访问打开的表格？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-02-26T07:35:33.237

该`OpenForms`属性返回一个`FormCollection`. 您可以遍历集合以处理所有表单。

```
For each f as Form in My.Application.OpenForms
 f.Close()
Next 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-02-26T07:42:08.163

我发现了这个解决方案，

```
'close all sub forms
For i = System.Windows.Forms.Application.OpenForms.Count - 1 To 1 Step -1
    Dim form As Form = System.Windows.Forms.Application.OpenForms(i)
    form.Close()
Next i 
```

...看起来不错（如果不是冗长的话），我将能够在编译其他所有内容后立即对其进行测试..

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-02-26T07:33:59.743

Application.Exit 几乎会做同样的事情。

因为我想如果所有表格都关闭了，你还是想关闭应用程序。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-26T05:15:44.237

My.Application.OpenForms 需要 VB.Net 应用程序才能使用应用程序框架（请参阅项目属性、应用程序、启用应用程序框架）。

如果您不使用应用程序框架，则可以改用 Application.OpenForms（来自 System.Windows.Forms 命名空间）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-02-26T07:32:38.157

看看[`Application.Windows`](http://msdn.microsoft.com/en-us/library/system.windows.application.windows.aspx)物业。

# powershell - 如果 PowerShell 中的 Get-ChildItem 语句有什么问题？

> ID：589515
> 
> 赞同：0
> 
> 时间：2009-02-26T07:29:20.380
> 
> 标签：powershell

我无法让以下 PowerShell 语句正常工作。目标是获取文件`..\archive`夹中按最旧到最年轻排序的文件夹列表。

我想将数量等于或少于 的文件夹复制`$ClosedJobssize`到`..\Archive`文件`..\movetotape`夹。这样 ..\Archive 文件夹的大小在硬盘驱动器上永远不会改变。

```
get-childitem -path "\\srv02\d$\Prepress\Archive" | sort-object -property

@{Expression={$_.CreationTime};Ascending=$false} | % { if (((get-childitem -path

"\\srv02\d$\prepress\archive" -recurse -force | measure-object -Property Length -Sum).Sum + $_.Length)

-lt $closedjobssize ) { move-item -destination "\\srv02\d$\prepress\archive\MoveToTape\" }} 
```

我可能做错了什么？我没有收到任何错误。当我执行它时，它只是坐着挂起。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-26T11:13:53.960

尝试这个。这是一个长单行（删除`-whatIf`以执行移动）：

```
dir "\\srv02\d$\Prepress\Archive" | sort CreationTime -desc | where { $_.psiscontainer -AND (dir $_.fullname -recurse -force | measure-object -Property Length -Sum).Sum -lt $closedjobssize} | Move-Item -dest "\\srv02\d$\prepress\archive\MoveToTape\" -whatIf 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-27T05:38:07.173

我不太确定我是否理解。但我认为您想将文件夹移入`\archive`以`\archive\movetotape`填满，`\movetotape`直到它`$ClosedJobsSize`的大小或更小。正确的？

有几件事：您将 中所有内容的大小相加`\archive`，因此您的比较结果永远不会改变。其次，检查的文件夹之一是`MoveToTape`它本身，这可能会导致您将其移动到自身中（这应该给出一个例外）。

鉴于此，我认为这段代码可以工作，但我还没有测试过。

```
## Get all the directories in \arcive that need to be moved
$Directories = Get-ChildItem "\\srv02\d$\Prepress\Archive" |
    Where-Object {$_.PSIsContainer -and ($_.Name -ne "MoveToTape")} | Sort-Object CreationTime -Descending
foreach ($Directory in $Directories)
{
    $SumOfMoveToTape = (Get-ChildItem "\\srv02\d$\prepress\archive\MoveToTape\" -Recurse | Measure-Object -Property Length -Sum).Sum
    $SumOfItem = (Get-ChildItem $_.FullName -Recurse | Measure-Object -Property Length -Sum).Sum
    if(($SumOfMoveToTape + $SumOfItem) -lt $ClosedJobsSize)
    {
        ## If we can fit on MoveToTape, then move this directory
        Move-Item -Destination "\\srv02\d$\prepress\archive\MoveToTape\"
    }
    ## If you want to keep folders in order (and not try to squeze whatever onto the tape
    ## then put an 'else {break}' here
} 
```

# jquery - 将数据从 jquery ajax 请求传递到 wcf 服务失败反序列化？

> ID：589520
> 
> 赞同：23
> 
> 时间：2009-02-26T07:30:20.767
> 
> 标签：jquery, wcf, json

我使用以下代码调用 wcf 服务。如果我调用一个不带参数但返回一个字符串的（测试）方法，它工作正常。如果我在我的方法中添加一个参数，我会得到一个奇怪的错误：

> {"ExceptionDetail":{"HelpLink":null,"InnerException":null,"Message":"令牌 '\"' 是预期的，但在 System.Xml.XmlExceptionHelper 中找到了 '''。","StackTrace":" .ThrowXmlException（XmlDictionaryReader 阅读器，字符串 res，String arg1，String arg2，String arg3）\u000d\u000a 在 System.Xml.XmlExceptionHelper.ThrowTokenExpected（XmlDictionaryReader 阅读器，预期字符串，找到字符）\u000d\u000a 在 System.Runtime.Serialization .Json.XmlJsonReader.ParseStartElement()\u000d\u000a 在 System.Runtime.Serialization.Json.XmlJsonReader.Read()\u000d\u000a 在 System.ServiceModel.Dispatcher.DataContractJsonSerializerOperationFormatter.DeserializeBodyCore(XmlDictionaryReader reader, Object[] parameters, Boolean isRequest)\u000d\u000a 在 System.ServiceModel.Dispatcher。DataContractJsonSerializerOperationFormatter.DeserializeBody(XmlDictionaryReader reader, MessageVersion version, String action, MessageDescription messageDescription, Object[] parameters, Boolean isRequest)\u000d\u000a at System.ServiceModel.Dispatcher.OperationFormatter.DeserializeBodyContents(Message message, Object[] parameters, Boolean isRequest) \u000d\u000a 在 System.ServiceModel.Dispatcher.OperationFormatter.DeserializeRequest（消息消息，Object[] 参数）\u000d\u000a 在 System.ServiceModel.Dispatcher.DemultiplexingDispatchMessageFormatter.DeserializeRequest（消息消息，Object[] 参数）\u000d\u000a在 System.ServiceModel.Dispatcher.UriTemplateDispatchFormatter.DeserializeRequest（消息消息，对象 [] 参数）\u000d\u000a 在 System.ServiceModel.Dispatcher.CompositeDispatchFormatter.DeserializeRequest（消息消息，Object[] 参数）\u000d\u000a 在 System.ServiceModel.Dispatcher.DispatchOperationRuntime.DeserializeInputs(MessageRpc& rpc)\u000d\u000a 在 System.ServiceModel.Dispatcher.DispatchOperationRuntime.InvokeBegin(MessageRpc& rpc)\u000d\u000a 在 System.ServiceModel。 Dispatcher.ImmutableDispatchRuntime.ProcessMessage5(MessageRpc& rpc)\u000d\u000a at System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage4(MessageRpc& rpc)\u000d\u000a at System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage3(MessageRpc& rpc)\u000d\u000a at System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage2(MessageRpc& rpc)\u000d\u000a 在 System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage1(MessageRpc& rpc)\u000d\u000a 在 System.ServiceModel.Dispatcher.MessageRpc。Process(Boolean isOperationContextSet)","Type":"System.Xml.XmlException"},"ExceptionType":"System.Xml.XmlException","Message":"令牌 '\"' 是预期的，但找到了 ''' .","StackTrace":" 在 System.Xml.XmlExceptionHelper.ThrowXmlException（XmlDictionaryReader 阅读器，字符串 res，String arg1，String arg2，String arg3）\u000d\u000a 在 System.Xml.XmlExceptionHelper.ThrowTokenExpected（XmlDictionaryReader 阅读器，预期字符串, Char found)\u000d\u000a at System.Runtime.Serialization.Json.XmlJsonReader.ParseStartElement()\u000d\u000a at System.Runtime.Serialization.Json.XmlJsonReader.Read()\u000d\u000a at System.ServiceModel.Dispatcher .DataContractJsonSerializerOperationFormatter.DeserializeBodyCore(XmlDictionaryReader reader, Object[] 参数,Boolean isRequest)\u000d\u000a at System.ServiceModel.Dispatcher.DataContractJsonSerializerOperationFormatter.DeserializeBody(XmlDictionaryReader reader, MessageVersion version, String action, MessageDescription messageDescription, Object[] parameters, Boolean isRequest)\u000d\u000a at System.ServiceModel.Dispatcher.OperationFormatter .DeserializeBodyContents（消息消息，Object[] 参数，布尔 isRequest）\u000d\u000a 在 System.ServiceModel.Dispatcher.OperationFormatter.DeserializeRequest（消息消息，Object[] 参数）\u000d\u000a 在 System.ServiceModel.Dispatcher.DemultiplexingDispatchMessageFormatter。 DeserializeRequest（消息消息，Object[] 参数）\u000d\u000a 在 System.ServiceModel.Dispatcher.UriTemplateDispatchFormatter.DeserializeRequest（消息消息，Object[] 参数）\u000d\u000a 在 System.ServiceModel。Dispatcher.CompositeDispatchFormatter.DeserializeRequest(Message message, Object[] parameters)\u000d\u000a at System.ServiceModel.Dispatcher.DispatchOperationRuntime.DeserializeInputs(MessageRpc& rpc)\u000d\u000a at System.ServiceModel.Dispatcher.DispatchOperationRuntime.InvokeBegin(MessageRpc& rpc) \u000d\u000a 在 System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage5(MessageRpc& rpc)\u000d\u000a 在 System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage4(MessageRpc& rpc)\u000d\u000a 在 System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage3 (MessageRpc& rpc)\u000d\u000a 在 System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage2(MessageRpc& rpc)\u000d\u000a 在 System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage1(MessageRpc&rpc)\u000d\u000a 在 System.ServiceModel.Dispatcher.MessageRpc.Process(Boolean isOperationContextSet)"}

我的 jquery 看起来像这样，但我尝试将我作为字符串序列化 json（如您所见）发送的实际数据更改为具有相同悲伤结果的纯 json 对象。

```
$.ajax({
    type: "POST",
    contentType: "application/json; charset=utf-8",
    url: "ajax/Statistics.svc/Get7DaysStatistics",
    dataType: "json",
    data: "{'customerId': '2'}",
    timeout: 10000,
    success: function(obj) { updateStatistics(obj.d); },
    error: function(xhr) {
        if (xhr.responseText)          
            $("body").html(xhr.responseText);
        else
            alert('unknown error');
        return;
    }
}); 
```

wcf 服务如下所示：

```
 [SuppressMessage("Microsoft.Performance", "CA1822:MarkMembersAsStatic"), OperationContract]
    public string Get7DaysStatistics(string customerId)
    {
        Debug.WriteLine(customerId);
        return "Test done";
    } 
```

它被放置在具有以下属性的类中：

```
[ServiceContract(Namespace = "")]
[AspNetCompatibilityRequirements(RequirementsMode = AspNetCompatibilityRequirementsMode.Allowed)] 
```

我不会在 web.config 中列出配置以保持这条长消息“简短”，但如果有人认为他们可以使用它，我可以发布它 - 我只是想强调我可以调用一个方法并获得一个结果 - 字符串甚至是我可以读取的 json 对象，只要我不将任何数据传递给 wcf 服务。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2009-02-26T08:01:42.783

在您发送到服务的 JSON 中使用双引号而不是单引号。也就是说，改变：

```
data: "{'customerId': '2'}", 
```

到

```
data: '{"customerId": "2"}', 
```

我已经在本地对此进行了测试，这解决了问题。

顺便说一句，我使用一种在使用内置 ASP.NET 工具以外的库调用 ASMX 和 WCF 服务时经常使用的方法对此进行了调试。[我使用由asp:ScriptReference](http://msdn.microsoft.com/en-us/library/system.web.ui.scriptreference.aspx)创建的客户端代理调用服务，然后使用 HTTP 嗅探器（例如[HttpFox](http://code.google.com/p/httpfox/) for FireFox）检查发送到服务器的请求，并将请求与[jQuery](http://jquery.com/)发送的请求进行比较。然后您通常可以快速查看请求的不同之处（因此可能是错误的）。在这种情况下，很明显发送的 POST 数据存在差异。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2010-11-09T14:41:32.030

我只认为发布对于用户名和密码登录功能是必不可少的，所以这就是我对发送到 Web 服务的 JSon 参数进行编码的方式......

这是Web服务合同..

```
 [ServiceContract]
    public interface ILogonService
    {
    [OperationContract]
    [WebInvoke(
      Method = "POST",
      BodyStyle = WebMessageBodyStyle.WrappedRequest,
      ResponseFormat = WebMessageFormat.Json
    )]
    string Logon(string un, string pw);
    } 
```

这是JQuery（注意使用“和'很重要！）

```
$.ajax({
  type: 'POST',
  url: "/LogonService.svc/Logon",
  data: '{ "un": "' + $('#un').val() + '", "pw": "' + $('#pw').val() + '"}',
  contentType: "application/json; charset=utf-8",
  dataType: "json",
  success: function (data) {    
  }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2010-10-20T17:50:26.853

我在 jscript 中做了一个函数，解决了通过 POST 将数据发送到 WCF 服务的问题...按照代码...

函数格式JsonDataToWCFPost(d){

```
var t = {};
var a = '{';
for (var j = 0; j < d.length; j++) {
    var x = d[j];
    for (var i in x) {
        if (x.hasOwnProperty(i)) {
            var c = j + 1 == d.length ? '}' : ',';
            a += ('"' + i + '":"' + x[i] + '"' + c);
        }
    }
}

return a; 
```

}

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-02-26T07:44:10.187

我认为在您的操作中您需要此属性：

```
[WebInvoke(Method="POST",
           BodyStyle=WebMessageBodyStyle.Wrapped,
           ResponseFormat=WebMessageFormat.Json
)] 
```

有关详细信息，请参阅[对 WCF REST 服务的 jQuery AJAX 调用](http://www.west-wind.com/weblog/posts/324917.aspx)。

# delphi - Delphi IDE 将 TFrame 视为表单

> ID：589523
> 
> 赞同：6
> 
> 时间：2009-02-26T07:31:37.223
> 
> 标签：delphi, inheritance, ide, tframe

每隔一段时间，当我调整我的 TFrame 类（添加属性、方法等）时，IDE 就会感到困惑并表现得好像它认为框架是一个表单，包含标题/标题、边框等。然而，很明显该类被声明为 TFrame 后代。关于导致这种情况的原因，如何预防以及如何解决的任何想法？

我正在使用 Delphi 2007 Pro。另请注意（如果重要的话），TFrame 后代通常通过设计时包在 IDE 中注册（即在调色板上）。

* * *

后来：附加“细节”：我目前遇到这个问题的框架在视觉上是一个非常基本的 TFrame（从全新的 TFrame 改变的只是大小和背景颜色）。

这是它的类声明：

```
TBasePanel = class(TFrame)
  private
    FPanelManager: TPanelManager;
    procedure SetPanelManager(const Value: TPanelManager);
  protected
    procedure Connect; virtual; abstract;
    procedure Disconnect; virtual; abstract;
    procedure Refresh; virtual;
    procedure Requery; virtual; abstract;
  published
    property PanelManager: TPanelManager read FPanelManager write
        SetPanelManager; 
```

这个框架被用作许多其他框架的基类。我通常直接从它所属的 BPL 项目编辑它（因为所有这些框架都安装到调色板），而不是作为 EXE 项目的一部分，打开相关的表单等。

此外，在“工具”->“选项”中选中“嵌入式设计器”。

我也将所有 DFM 文件保存为文本而不是二进制文件（如果这很重要的话）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-02-26T08:31:49.700

我遇到了同样的问题。以下步骤为我们解决了问题，它也可能对您有用：

1.  在 IDE 中：关闭所有使用框架的表单
2.  打开框架，以文本形式查看 (*.dfm)
3.  dfm 可能以对象 MyFrame: TMyFrameClass 开头
4.  将此更改为继承的 MyFrame： TMyFrameClass

我不知道是什么导致了问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-26T08:10:36.600

也许您没有选中“嵌入式设计器”复选框？（工具 | 选项 | 环境选项 | VCL 设计器）。然后，实际上，您的框架*在设计时*显示为一种形式（带有标题、边框等）。您有问题的 TFrame 后代的具体代码或有关您的案例的更多详细信息也会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-26T07:52:01.353

据我所知，编辑框架时，您必须在编辑器中打开表单和框架。否则可能会出现更新问题。虽然我没见过这个。

但是我很久以前就放弃了框架，因为我发现它们不太可靠。

现在我只将它们用于原型设计，创建自定义组件（派生自带有适当控件的面板）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-02-26T08:54:03.437

[您可能必须将自定义模块注册到 IDE](https://stackoverflow.com/questions/289672/showing-tframe-descendants-additional-properties-on-the-object-inspector) 但除非它们位于祖先类中，否则您的附加属性将无法正常工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-12-19T12:59:56.143

我在使用 TFrame 时遇到了很多问题，最终找到了解决我所有问题的解决方法：我以视觉方式创建和设计框架，但只能通过手动编码来使用它们。

作为一个副作用，我的应用程序变得更小，因为更少的 dfm-s。

# c++ - 公共和私有变量的命名约定？

> ID：589535
> 
> 赞同：10
> 
> 时间：2009-02-26T07:40:52.833
> 
> 标签：c++

将 m_varname 用作 public 并且将 _variable 用作 private 的同一类是错误的

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-02-26T07:45:39.467

一些担忧：

*   为什么你有公共变量？

*   以 _ 和 __ 开头的标识符是为系统库保留的。在实践中，这通常并不重要，但很高兴意识到这一点。

话虽如此，创建命名约定并没有错，无论它看起来如何。只要保持一致。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-02-26T08:03:08.037

C++ 和 Java 也是如此：您不需要任何匈牙利符号，也不需要任何前缀/后缀。你有关键字“这个”！

```
class MyClass {
    private:
        int value;

    public:
        MyClass(int value) {
            this->value = value;
        }
} 
```

当然，在这个简单的示例中，您可以（应该！）使用构造函数初始化列表；）

因此，使用任何笨拙的符号只是利用语言的可能性。当您知道成员变量的名称时 - 您知道它是完美的。为什么要用“_”混淆它？

至于公私成员同名：这绝对是错误的想法！为什么在同一个类中需要两件东西来表示相同的东西？将其设为私有，完美命名并将 getter 和 setter 公开。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-02-26T19:43:25.390

您不应使用以下划线开头或包含双下划线的名称。这些名称是为编译器和实现保留的。除了该限制之外，您还可以使用您和您的团队喜欢的任何命名约定。就个人而言，我讨厌任何形式的“匈牙利”符号，也不喜欢 m_something 符号。如果我需要更改变量的类型，我真的很困扰，我需要在它出现的任何地方更新它的名称。这是一个令人头疼的维护问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-02-26T07:44:45.820

就命名约定而言，每个人都有自己的偏好。我想说更多的人会同意在一个类中没有任何公共变量。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-02-26T07:43:21.640

假设您正在使用 C++，我的答案是否定的。这是完全合理的，但你真的应该遵守这个约定。

但是，诸如 C# 之类的静态类型语言假定此类命名约定有些多余。

我个人认为这很丑陋，但在 C++ 中变量来自何处并不明显，因此糖化可能会有所帮助。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-03-04T06:13:41.110

那里有许多 C++ 约定。关键是找到一个和/或适应一个。坚持下去，并保持一致。如果您在某个地方工作，请尽量遵守规定的许多约定。那里有很多，每个都有很好的论据，但它们可能相互矛盾（联合攻击战斗机、贝尔实验室、Mozilla 等）

如果项目的不同部分之间有不同的约定，至少要使每个文件内部保持一致，.cpp 和.h 文件应该相互一致。

我发现能够理解不同约定编写的代码会更好，这样您就可以轻松更快地适应新的工作环境

# php - 如何在 Flash 中显示 PHP/HTML 页面

> ID：589546
> 
> 赞同：0
> 
> 时间：2009-02-26T07:46:51.647
> 
> 标签：php, flash, actionscript-2

我有一个 PHP 脚本，它解析一个 rss 提要并输出前 2 个新闻项目。我想在独立的 flash exe 中显示这两个新闻项目。

最好的方法是什么。

谢谢

维纳亚克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-02-26T08:45:00.463

使用[ExternalInterface](http://livedocs.adobe.com/flash/8/main/wwhelp/wwhimpl/common/html/wwhelp.htm?context=LiveDocs_Parts&file=00002200.html)并将 rss 信息传递给 flash 应用程序。或者，使用[HTTPService](http://livedocs.adobe.com/flex/3/langref/mx/rpc/http/HTTPService.html)。[此处](http://livedocs.adobe.com/flex/3/html/help.html?content=data_access_2.html)给出的如何使用 PHP 的示例。使用 HTTPService 示例在 flex 中的 RSS 阅读[器](http://amrkamel.wordpress.com/2008/02/16/flex-rss-reader-in-less-that-20-lines-of-code/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-26T08:39:50.367

我在 Flash 方面没有太多经验，但我会创建一个 XML 文件（使用 php）来保存前 2 个新闻项目，并使您的 Flash 应用程序读取这个 xml 文件。这是一个 google searc 页面，它将为您提供有关[如何使用 flash 读取 XML 的](http://www.google.co.uk/search?q=read+xml+using+flash&ie=utf-8&oe=utf-8&aq=t&rls=org.mozilla:en-GB:official&client=firefox-a)链接。

# unit-testing - 一个好的单元测试应该有什么属性？

> ID：589547
> 
> 赞同：3
> 
> 时间：2009-02-26T07:47:25.280
> 
> 标签：unit-testing, attributes

单元测试应该

*   产生确定性结果
*   独立
*   有效
*   ...

测试还应具备哪些其他特征？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-02-26T08:02:36.760

啊。我最喜欢的主题:-) 从哪里开始...

根据 Gerard Meszaros 的 xUnit 测试模式（关于单元测试的书）

*   测试应该降低风险，而不是引入风险。
*   测试应该易于运行。
*   随着系统围绕它们发展，测试应该易于维护

一些使这更容易的事情：

*   测试应该只因为一个原因而失败。（测试应该只测试一件事，例如避免多个断言。）
*   由于这个原因，应该只有一个测试失败。（这使您的测试库可维护）
*   最小化测试依赖（不依赖于数据库、文件、用户界面等）

其他要看的东西：

**命名**
有一个描述性的名称。测试名称应该读起来像规范。如果你的名字太长，你可能测试太多了。

**结构**
使用 AAA 结构。这是模拟框架的新时尚，但我认为这是一种像这样构建所有测试的好方法。

安排你的上下文
Act，做需要测试的事情
Assert，断言你要检查 的事情

我通常将我的测试分成三个代码块。了解这种模式可以使测试更具可读性。

**Mocks vs. Stubs**
使用模拟框架时，总是尝试在使用模拟之前使用存根和基于状态的测试。

存根是代表您尝试测试的对象的依赖项的对象。您可以将行为编程到它们中，并且可以在您的测试中调用它们。模拟通过让您断言它们是否被调用以及如何调用来扩展这一点。模拟非常强大，但它可以让您测试实现而不是代码的前置条件和后置条件。这往往会使测试更加脆弱。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-02-26T07:53:36.500

实用程序员的回答：好的测试应该是 A-TRIP

*   自动的
*   彻底
*   可重复
*   独立的
*   专业的

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-26T07:53:01.447

*   不访问外部资源
*   可读

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-02-26T08:01:38.447

*   **自动化：运行测试（** [CI](http://martinfowler.com/articles/continuousIntegration.html) ）不需要人工干预。
*   **完整**：他们必须覆盖尽可能多的代码（[代码覆盖率](http://en.wikipedia.org/wiki/Code_coverage)）。
*   **可重用**：无需创建只会执行一次的测试。
*   **独立**：独立执行测试不应影响另一个测试的性能。
*   **专业**：测试应该被视为与代码相同的价值，相同的专业性，文档等。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-02-26T08:14:00.477

我没有看到其他人提到的一个是**small**。单元测试应该测试一件特定的事情，仅此而已。我试图通过将它们重构为自己的方法来实现只有一个断言并最大限度地减少设置代码的数量。我还将创建自己的自定义断言。一个不错的小型单元测试 IMO 大约 10 行或更少。当测试很小时，很容易快速了解测试要做什么。从长远来看，大型测试最终无法维护。

当然，小并不是我唯一的目标……它只是我在单元测试中看重的东西之一。:-)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-02-26T08:08:00.740

要记住的另一个因素是运行时间。如果测试运行时间过长，很可能会被跳过。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-02-26T08:08:07.603

1.  必须是全自动的。
2.  不得假设任何先决条件（已安装产品 X、文件和 Y 位置等）。
3.  *就运行*脚本而言，必须是个人独立 的。然而，结果只能由学科专家进行分析。
4.  必须在每个 beta 版本上运行。
5.  必须出示可核实的报告。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-02-26T08:08:24.810

单元测试应该很快：数百个测试应该能够在几秒钟内运行。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-02-26T11:55:24.903

如果满足以下条件，则测试不是单元测试：

*   它与数据库对话
*   它通过网络进行通信
*   它涉及文件系统
*   它不能与您的任何其他单元测试同时运行
*   你必须对你的环境做一些特殊的事情（比如编辑配置文件）来运行它。

做这些事情的测试还不错。它们通常值得编写，并且可以在单元测试工具中编写。但是，能够将它们与真正的单元测试分开是很重要的，这样我们就可以保留一组测试，以便在我们进行更改时可以快速运行。

来源：[一套单元测试规则](http://www.artima.com/forums/flat.jsp?forum=106&thread=126923)

# php - php == vs === 运算符

> ID：589549
> 
> 赞同：87
> 
> 时间：2009-02-26T07:48:06.607
> 
> 标签：php, comparison, operators, equality

php.ini 中 == 和 === 有什么区别？我不确定何时使用两者。

*更新说明：*为了显示在 StackOverflow 搜索中，== 和 === 之间的区别与 != 和 !== 之间的区别相同。

# sql - 在一个字段中组合分组值的简单方法是什么？

> ID：589554
> 
> 赞同：1
> 
> 时间：2009-02-26T07:51:11.497
> 
> 标签：sql, oracle, plsql

我是说：

```
Table PHONE_CODES:

ID CODE_NAME PHONE_CODE 
1   USA         8101
2   USA         8102
3   PERU        8103
4   PERU_MOB    81031
5   PERU_MOB    81032 
```

我想通过 select 得到这样的东西：

```
CODE_NAME   ZONE_CODES
USA          8101; 8102;
PERU         8103
PERU_MOB     81031; 81032; 
```

我可以通过下面的函数得到它，但也许有更好的方法：

```
select distinct(CODE_NAME) as CODE_NAME, get_code_names_by_ZONE(CODE_NAME) as ZONE_CODES from PHONE_CODES; 
```

功能：

```
create or replace function get_code_names_by_ZONE
(
    ZONE_CODE_NAME in varchar2
)
return varchar2
as
    codes_list varchar2(4000);
    cursor cur_codes_list is
        select p.PHONE_CODE
        from PHONE_CODES p
        where p.CODE_NAME = ZONE_CODE_NAME;
begin

    for codes_list_rec in cur_codes_list
    LOOP
        -- dbms_output.put_line('PHONE_CODE:[' || codes_list_rec.PHONE_CODE || ']');
        codes_list := codes_list || codes_list_rec.PHONE_CODE || '; ';
    end loop;

    return codes_list;

    EXCEPTION 
        when NO_DATA_FOUND then
            return 'notfound';
        WHEN others then
            dbms_output.put_line('Error code:' || SQLCODE || ' msg:' || SQLERRM);
            return null;
end get_code_names_by_ZONE;
/ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-26T07:55:36.900

一个函数将是我实现你想要的东西的首选方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-26T07:59:42.960

Tim Hall 对Oracle 中可用 的各种[字符串聚合技术](http://www.oracle-base.com/articles/10g/StringAggregationTechniques.php)进行了精彩的讨论。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-26T13:12:15.483

如果您使用的是 11g，请查看 SQL 的新 PIVOT 扩展 - 最好的文档看起来在数据仓库指南部分。但是，我相信“... for in ...”子句的目标不能是子查询，而必须是硬编码的值列表。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-02-27T04:13:46.317

很好的链接贾斯汀。蒂姆霍尔很棒。我听从了他的建议，这里是：

```
 1  SELECT CODE_NAME,
  2     LTRIM(MAX(SYS_CONNECT_BY_PATH(PHONE_CODES,';'))
  3     KEEP (DENSE_RANK LAST ORDER BY curr),';') AS PHONE_CODES
  4  FROM   (SELECT CODE_NAME,
  5         PHONE_CODES,
  6         ROW_NUMBER() OVER (PARTITION BY CODE_NAME ORDER BY PHONE_CODES) AS curr,
  7         ROW_NUMBER() OVER (PARTITION BY CODE_NAME ORDER BY PHONE_CODES) -1 AS prev
  8      FROM   a)
  9  GROUP BY CODE_NAME
 10  CONNECT BY prev = PRIOR curr AND CODE_NAME = PRIOR CODE_NAME
 11* START WITH curr = 1
SQL> /

CODE_NAME  PHONE_CODES
---------- --------------------------------------------------
PERU       8103
PERU_MOB   81031;81032
USA    8101;8102 
```

dbBradley - 我认为 Pivot 扩展在这里不起作用。Pivot 扩展需要使用聚合（sum、count、...）。

# cloud - SQL 数据服务 - 查询空值

> ID：589559
> 
> 赞同：0
> 
> 时间：2009-02-26T07:52:40.060
> 
> 标签：cloud, ssds, sql-data-services, sql-server-data-services

（这与 Microsoft 的 SitkaSoapService 有关，在[https://database.windows.net/soap/v1/](https://database.windows.net/soap/v1/)的服务参考中）

我正在使用 SitkaSoapServiceClient 通过 SOAP 访问我的 SQL 数据服务数据库。

我可以通过在字符串中传递 linq 语句来查询数据，例如：

```
Scope scope = new Scope();
scope.AuthorityId = authorityId;
scope.ContainerId = containerId;

using (SitkaSoapServiceClient proxy = GetProxy())
    return proxy.Query(scope, "from e in entities where e[\"FirstName\"] == \"Bob\" select e"); 
```

但是，我不知道如何查询空属性值（即查找没有该属性的实体）。

我希望能够说：

```
return proxy.Query(scope, "from e in entities where e[\"FirstName\"] == null select e"); 
```

...但这会抛出一个`FaultException<>`，说“找不到名称'null'”

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-09-11T12:57:32.297

您可以像这样检查 not null ：

```
where e["FirstName"] >= "" 
```

所以空检查变为：

```
where !(e["FirstName"] >= "") 
```

有点讨厌，但它有效。也许有更好的方法，但我找不到......

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2009-02-26T22:33:13.263

我不熟悉您正在尝试的服务，但 T-SQL 需要类似的东西：

```
return proxy.Query(scope, "from e in entities where e[\"FirstName\"] IS null select e"); 
```

# java - 将 Spring 集成测试放在不同的类和包中

> ID：589563
> 
> 赞同：2
> 
> 时间：2009-02-26T07:53:42.553
> 
> 标签：java, spring, junit, spring-test

我正在使用 AbstractTransactionalSpringContextTests 运行 spring 集成测试。spring 上下文只加载一次，然后运行所有测试。如果我希望我的测试在许多类和包中，我该怎么做。

当然，对于我的所有测试（在所有类和包中），spring 上下文应该只加载一次，而不是每个类或包一次。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-26T14:28:49.280

作为[`AbstractSingleSpringContextTests`](http://static.springframework.org/spring/docs/2.5.x/api/org/springframework/test/AbstractSingleSpringContextTests.html)（的超类之一`AbstractTransactionalSpringContextTests`）状态的 Javadocs：

> 此类将基于上下文键缓存上下文：通常是描述构成上下文的 Spring 资源描述符的配置位置字符串数组。除非 setDirty() 方法被测试调用，否则上下文不会被重新加载，即使跨该测试的不同子类也是如此。如果您的上下文构建速度很慢，这尤其有用，例如，如果您使用 Hibernate 并且加载映射所花费的时间是一个问题。

您的上下文被缓存，因此在同一类加载器中运行的所有其他测试（即 - 在同一测试运行期间运行的所有其他测试）将使用缓存的上下文。您不需要做任何额外的设置 - 应该已经为您完成了。如果您对此不确定，或者希望排除故障，只需打开 org.springframework 的日志记录，您应该会看到很多有用的日志记录，关于何时加载上下文、哪个文件、如何加载；等等

# .net - 使用 All 运算符

> ID：589570
> 
> 赞同：1
> 
> 时间：2009-02-26T07:56:51.373
> 
> 标签：.net, linq

我希望看到一个在 LINQ 中使用父子关系时充分利用 ALL 运算符的示例。你能给我看一个吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-26T08:04:06.100

All() 扩展方法检查所有项目的谓词；例如，在执行时：

```
if(order.Lines.All(l=>l.IsClosed)) order.Close(); 
```

（检查所有行是否已关闭，如果是，则关闭订单）

在查询中：

```
var qry = from order in ctx.Orders
         where order.CustomerId = id
         select new {
            order.OrderId,
            IsShipped = order.Lines.All(l => l.IsShipped)
         }; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-26T08:04:56.300

这里有许多 LINQ 示例：http: [//msdn.microsoft.com/en-us/vcsharp/aa336746.aspx](http://msdn.microsoft.com/en-us/vcsharp/aa336746.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-26T08:03:23.543

如果您想了解父母是否所有的孩子都活跃。

```
from p in MyContext.Parents
select new
{
   p,
   ChildrensActive = p.Childrens.All(c=> c.IsActive)
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-02-26T19:44:37.070

```
IEnumerable<CD> goodCDs = CDs
  .Where(cd => cd.Songs.All(song => song.Rating > 6)) 
```

# c++ - C++ 标准规定 int、long 类型的大小是多少？

> ID：589575
> 
> 赞同：727
> 
> 时间：2009-02-26T07:59:23.367
> 
> 标签：c++, c++-faq

我正在寻找有关基本 C++ 类型大小的详细信息。我知道这取决于架构（16 位、32 位、64 位）和编译器。

但是 C++ 有什么标准吗？

我在 32 位架构上使用 Visual Studio 2008。这是我得到的：

```
char  : 1 byte
short : 2 bytes
int   : 4 bytes
long  : 4 bytes
float : 4 bytes
double: 8 bytes 
```

我试图在不同的架构和编译器下找到可靠的信息，说明`char`, `short`, `int`, `long`, `double`, `float`（以及我没有想到的其他类型）的大小。

* * *

## 回答 #1

> 赞同：715
> 
> 时间：2009-02-26T08:47:43.623

C++ 标准没有以字节为单位指定整数类型的大小，但它指定了它们必须能够保持的最小范围。您可以从所需范围推断出最小大小。您可以从中推断出最小大小（以字节为单位）以及[定义字节中位数](https://stackoverflow.com/questions/437470/type-to-use-to-represent-a-byte-in-ansi-c89-90-c/437640#437640)`CHAR_BIT`的宏的值。除了最不起眼的平台之外，它是 8 个，而且不能少于 8 个。

另一个限制`char`是它的大小始终为 1 个字节或`CHAR_BIT`位（因此得名）。这在标准中明确说明。

C 标准是 C++ 标准的*规范性参考*，因此即使它没有明确说明这些要求，C++ 也需要[C 标准](http://www.open-std.org/JTC1/SC22/WG14/www/docs/n1256.pdf)（第 22 页）要求的最小范围，这与来自数据类型范围的那些相同[MSDN](http://msdn.microsoft.com/en-us/library/s3f49ktz.aspx)：

1.  `signed char`：-127 到 127（注意，不是 -128 到 127；这适用于 1 的补码和符号和幅度平台）
2.  `unsigned char`: 0 到 255
3.  “plain” ：与or`char`相同的范围，[实现定义](https://stackoverflow.com/q/2397984)`signed char``unsigned char`
4.  `signed short`: -32767 至 32767
5.  `unsigned short`: 0 到 65535
6.  `signed int`: -32767 至 32767
7.  `unsigned int`: 0 到 65535
8.  `signed long`：-2147483647 至 2147483647
9.  `unsigned long`: 0 到 4294967295
10.  `signed long long`: -9223372036854775807 至 9223372036854775807
11.  `unsigned long long`: 0 到 18446744073709551615

C++（或 C）实现可以将类型的大小（以字节为单位）定义`sizeof(type)`为任何值，只要

1.  该表达式`sizeof(type) * CHAR_BIT`计算为足够高以包含所需范围的位数，并且
2.  类型的排序仍然有效（例如`sizeof(int) <= sizeof(long)`）。

综上所述，我们保证：

*   `char`, `signed char`, 和`unsigned char`至少为 8 位
*   `signed short`, `unsigned short`, `signed int`, 和`unsigned int`至少为 16 位
*   `signed long`并且`unsigned long`至少为 32 位
*   `signed long long`并且`unsigned long long`至少为 64 位

不保证`float`或的大小至少提供与.`double``double``float`

实际特定于实现的范围可以`<limits.h>`在 C 或`<climits>`C++ 中的 header 中找到（或者更好的是，`std::numeric_limits`在`<limits>`header 中模板化）。

例如，您将通过以下方式找到 的最大范围`int`：

**C：**

```
#include <limits.h>
const int min_int = INT_MIN;
const int max_int = INT_MAX; 
```

**C++**：

```
#include <limits>
const int min_int = std::numeric_limits<int>::min();
const int max_int = std::numeric_limits<int>::max(); 
```

* * *

## 回答 #2

> 赞同：268
> 
> 时间：2009-02-26T08:47:59.490

对于 32 位系统，“事实上的”标准是 ILP32——也就是说`int`，`long`和指针都是 32 位的量。

对于 64 位系统，主要的 Unix“事实上的”标准是 LP64——`long`指针是 64 位的（但是`int`是 32 位的）。Windows 64 位标准是 LLP64 —`long long`指针是 64 位（但`long`和`int`都是 32 位）。

曾经，一些 Unix 系统使用 ILP64 组织。

这些事实上的标准都没有被 C 标准 (ISO/IEC 9899:1999) 立法，但都被它所允许。

而且，根据定义，`sizeof(char)`是`1`，尽管在 Perl 配置脚本中进行了测试。

请注意，有些机器（Crays）`CHAR_BIT`比 8 大得多。这意味着 IIRC`sizeof(int)`也是 1，因为两者`char`都是`int`32 位的。

* * *

## 回答 #3

> 赞同：90
> 
> 时间：2009-02-26T08:02:56.633

在实践中没有这样的事情。通常，您可以期望`std::size_t`在当前架构上表示无符号本机整数大小。即 16 位、32 位或 64 位，但并非总是如此，正如对此答案的评论中所指出的那样。

就所有其他内置类型而言，它实际上取决于编译器。以下是从最新 C++ 标准的当前工作草案中摘录的两段：

> 有五种标准有符号整数类型：signed char、short int、int、long int 和 long long int。在此列表中，每种类型提供的存储空间至少与列表中它前面的类型一样多。
> 
> 对于每一种标准的有符号整数类型，都存在对应的（但不同的）标准无符号整数类型：unsigned char、unsigned short int、unsigned int、unsigned long int 和 unsigned long long int，每一种都占用相同数量的存储和具有相同的对齐要求。

如果你愿意，你可以静态地（编译时）断言这些基本类型的大小。如果 sizeof 假设发生变化，它将提醒人们考虑移植您的代码。

* * *

## 回答 #4

> 赞同：84
> 
> 时间：2009-03-30T14:49:54.030

有标准。

C90 标准要求

```
sizeof(short) <= sizeof(int) <= sizeof(long) 
```

C99 标准要求

```
sizeof(short) <= sizeof(int) <= sizeof(long) <= sizeof(long long) 
```

[这是C99的规格](http://www.open-std.org/JTC1/SC22/WG14/www/docs/n1256.pdf)。第 22 页详细介绍了不同整数类型的大小。

以下是 Windows 平台的 int 类型大小（位）：

```
Type           C99 Minimum     Windows 32bit
char           8               8
short          16              16
int            16              32
long           32              32
long long      64              64 
```

如果您关心可移植性，或者您希望类型的名称反映大小，您可以查看 header `<inttypes.h>`，其中可以使用以下宏：

```
int8_t
int16_t
int32_t
int64_t 
```

`int8_t`保证为8位，`int16_t`保证为16位等。

* * *

## 回答 #5

> 赞同：39
> 
> 时间：2009-02-26T08:18:12.260

如果您需要固定大小的类型，请使用[stdint.h](http://en.wikipedia.org/wiki/Stdint.h)中定义的 uint32_t（无符号整数 32 位）等类型。它们在[C99](https://en.wikipedia.org/wiki/C99)中指定。

* * *

## 回答 #6

> 赞同：36
> 
> 时间：2009-02-26T19:32:40.530

更新：C++11 将 TR1 中的类型正式引入标准：

*   长长整数
*   unsigned long long int

以及来自的“大小”类型`<cstdint>`

*   int8_t
*   int16_t
*   int32_t
*   int64_t
*   （和未签名的同行）。

此外，您还可以获得：

*   int_least8_t
*   int_least16_t
*   int_least32_t
*   int_least64_t
*   加上未签名的同行。

这些类型表示具有至少指定位数的最小整数类型。同样，有至少指定位数的“最快”整数类型：

*   int_fast8_t
*   int_fast16_t
*   int_fast32_t
*   int_fast64_t
*   加上未签名的版本。

“快速”的含义（如果有的话）取决于实施。对于所有目的，它也不必是最快的。

* * *

## 回答 #7

> 赞同：18
> 
> 时间：2010-09-01T13:41:13.873

[C++ 标准](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2005/n1905.pdf)是这样说的：

3.9.1，§2：

> 有五种有符号整数类型：“signed char”、“short int”、“int”、“long int”和“long long int”。在此列表中，每种类型提供的存储空间至少与列表中它前面的类型一样多。普通整数具有执行环境架构所建议的自然大小（44）；提供其他有符号整数类型以满足特殊需要。
> 
> (44) 即**大到足以包含 INT_MIN 和 INT_MAX 范围内的任何值，如 header 中所定义 `<climits>`**。

结论：这取决于您正在处理的架构。任何其他假设都是错误的。

* * *

## 回答 #8

> 赞同：12
> 
> 时间：2009-02-26T08:07:09.040

不，没有字体大小的标准。标准只要求：

```
sizeof(short int) <= sizeof(int) <= sizeof(long int) 
```

如果您想要固定大小的变量，您可以做的最好的事情是使用这样的宏：

```
#ifdef SYSTEM_X
  #define WORD int
#else
  #define WORD long int
#endif 
```

然后你可以使用 WORD 来定义你的变量。不是我喜欢这种方式，而是**最便携**的方式。

* * *

## 回答 #9

> 赞同：10
> 
> 时间：2009-02-26T08:49:36.147

对于浮点数，[有一个标准（IEEE754）](http://en.wikipedia.org/wiki/IEEE_754)：浮点数是 32 位，双精度数是 64。这是硬件标准，而不是 C++ 标准，因此编译器理论上可以将浮点数和双精度数定义为其他大小，但实际上我'从未见过使用任何不同的架构。

* * *

## 回答 #10

> 赞同：10
> 
> 时间：2012-07-14T16:01:46.560

我们可以为类型定义同义词，这样我们就可以创建自己的“标准”。

在 sizeof(int) == 4 的机器上，我们可以定义：

```
typedef int int32;

int32 i;
int32 j;
... 
```

因此，当我们将代码转移到实际上 long int 的大小为 4 的另一台机器上时，我们可以重新定义 int 的单次出现。

```
typedef long int int32;

int32 i;
int32 j;
... 
```

* * *

## 回答 #11

> 赞同：7
> 
> 时间：2009-02-26T08:06:35.843

有一个标准，它在各种标准文件（ISO、ANSI 等）中都有规定。

维基百科有一个很棒的页面，解释了各种类型和它们可以存储的最大值： [计算机科学中的整数。](http://en.wikipedia.org/wiki/Integer_(computer_science))

然而，即使使用标准 C++ 编译器，您也可以使用以下代码片段相对轻松地找到：

```
#include <iostream>
#include <limits>

int main() {
    // Change the template parameter to the various different types.
    std::cout << std::numeric_limits<int>::max() << std::endl;
} 
```

可以在[Roguewave找到](http://www2.roguewave.com/support/docs/sourcepro/edition9/html/stdlibref/numeric-limits.html)[std::numeric_limits](http://www2.roguewave.com/support/docs/sourcepro/edition9/html/stdlibref/numeric-limits.html)的文档。它包括大量其他命令，您可以调用它来找出各种限制。这可以与任何传达大小的任意类型一起使用，例如 std::streamsize。

约翰的答案包含最好的描述，因为这些是保证成立的。无论您在哪个平台上，还有另一个很好的页面，其中详细介绍了每种类型必须包含多少位：[int types](http://home.att.net/~jackklein/c/inttypes.html)，在标准中定义。

我希望这有帮助！

* * *

## 回答 #12

> 赞同：6
> 
> 时间：2013-08-08T23:47:45.473

当涉及到不同架构和不同编译器的内置类型时，只需使用编译器在您的架构上运行以下代码以查看它的输出。下面显示了我的[Ubuntu 13.04](http://en.wikipedia.org/wiki/List_of_Ubuntu_releases#Ubuntu_13.04_.28Raring_Ringtail.29) (Raring Ringtail) 64 位 g++4.7.3 输出。另请注意以下回答的内容，这就是输出如此排序的原因：

“有五种标准有符号整数类型：signed char、short int、int、long int 和 long long int。在此列表中，每种类型提供的存储空间至少与列表中它前面的类型一样多。”

```
#include <iostream>

int main ( int argc, char * argv[] )
{
  std::cout<< "size of char: " << sizeof (char) << std::endl;
  std::cout<< "size of short: " << sizeof (short) << std::endl;
  std::cout<< "size of int: " << sizeof (int) << std::endl;
  std::cout<< "size of long: " << sizeof (long) << std::endl;
  std::cout<< "size of long long: " << sizeof (long long) << std::endl;

  std::cout<< "size of float: " << sizeof (float) << std::endl;
  std::cout<< "size of double: " << sizeof (double) << std::endl;

  std::cout<< "size of pointer: " << sizeof (int *) << std::endl;
}

size of char: 1
size of short: 2
size of int: 4
size of long: 8
size of long long: 8
size of float: 4
size of double: 8
size of pointer: 8 
```

* * *

## 回答 #13

> 赞同：5
> 
> 时间：2011-06-14T06:19:18.543

您可以使用：

```
cout << "size of datatype = " << sizeof(datatype) << endl; 
```

`datatype = int`等`long int`。您将能够看到您键入的任何数据类型的大小。

* * *

## 回答 #14

> 赞同：5
> 
> 时间：2009-02-26T20:31:18.487

1）文章“ [64位程序开发中被遗忘的问题](http://www.viva64.com/art-1-2-16511733.html)”中的表N1

2）“[数据模型](http://www.viva64.com/terminology/Data_model.html)”

* * *

## 回答 #15

> 赞同：3
> 
> 时间：2009-02-26T08:01:31.893

如前所述，大小应反映当前架构。`limits.h`如果你想看看你当前的编译器是如何处理事情的，你可以去看看。

* * *

## 回答 #16

> 赞同：2
> 
> 时间：2013-05-27T07:04:36.367

正如其他人所回答的那样，“标准”都将大部分细节保留为“实现定义”，并且仅声明“char”类型至少为“char_bis”宽，并且“char <= short <= int <= long < = long long”（float 和 double 与 IEEE 浮点标准非常一致，long double 通常与 double 相同——但在更多当前实现上可能更大）。

没有非常具体和精确的值的部分原因是因为像 C/C++ 这样的语言被设计为可移植到大量硬件平台——包括“char”字长可能为 4 位的计算机系统或 7 位，甚至是普通家庭计算机用户所接触的“8-/16-/32-/64 位”计算机之外的某个值。（这里的字长意味着系统正常运行的位宽——同样，它并不总是像家庭计算机用户所期望的那样总是 8 位。）

如果您确实需要特定位数的对象（在表示整数值的一系列位的意义上），大多数编译器都有一些指定方法；但它通常不可移植，即使在 ame 公司制造的编译器之间，但针对不同平台也是如此。一些标准和实践（尤其是 limits.h 等）非常普遍，以至于大多数编译器都支持确定特定值范围的最佳拟合类型，但不支持确定使用的位数。（也就是说，如果您知道您需要保存 0 到 127 之间的值，您可以确定您的编译器支持 8 位的“int8”类型，它足以容纳所需的全部范围，但不像"int7" 类型，它与 7 位完全匹配。）

注意：许多 Un*x 源代码包使用“./configure”脚本，该脚本将探测编译器/系统的功能并输出合适的 Makefile 和 config.h。您可能会检查其中一些脚本以了解它们如何工作以及它们如何探测编译器/系统功能，并遵循它们的引导。

* * *

## 回答 #17

> 赞同：2
> 
> 时间：2012-10-26T17:43:10.087

如果您对纯 C++ 解决方案感兴趣，我使用模板和仅 C++ 标准代码在编译时根据其位大小定义类型。这使得解决方案可以跨编译器移植。

背后的想法非常简单：创建一个包含类型 char、int、short、long、long long（有符号和无符号版本）的列表，然后扫描列表并使用 numeric_limits 模板选择具有给定大小的类型。

包括这个头你有 8 种类型 stdtype::int8、stdtype::int16、stdtype::int32、stdtype::int64、stdtype::uint8、stdtype::uint16、stdtype::uint32、stdtype::uint64。

如果某些类型无法表示，它将被评估为 stdtype::null_type 也在该标头中声明。

以下代码不提供任何保证，请仔细检查。
我也是元编程的新手，请随意编辑和更正此代码。
用 DevC++ 测试（所以 gcc 版本大约是 3.5）

```
#include <limits>

namespace stdtype
{
    using namespace std;

    /*
     * THIS IS THE CLASS USED TO SEMANTICALLY SPECIFY A NULL TYPE.
     * YOU CAN USE WHATEVER YOU WANT AND EVEN DRIVE A COMPILE ERROR IF IT IS 
     * DECLARED/USED.
     *
     * PLEASE NOTE that C++ std define sizeof of an empty class to be 1.
     */
    class null_type{};

    /*
     *  Template for creating lists of types
     *
     *  T is type to hold
     *  S is the next type_list<T,S> type
     *
     *  Example:
     *   Creating a list with type int and char: 
     *      typedef type_list<int, type_list<char> > test;
     *      test::value         //int
     *      test::next::value   //char
     */
    template <typename T, typename S> struct type_list
    {
        typedef T value;
        typedef S next;         

    };

    /*
     * Declaration of template struct for selecting a type from the list
     */
    template <typename list, int b, int ctl> struct select_type;

    /*
     * Find a type with specified "b" bit in list "list"
     *
     * 
     */
    template <typename list, int b> struct find_type
    {   
        private:
            //Handy name for the type at the head of the list
            typedef typename list::value cur_type;

            //Number of bits of the type at the head
            //CHANGE THIS (compile time) exp TO USE ANOTHER TYPE LEN COMPUTING
            enum {cur_type_bits = numeric_limits<cur_type>::digits};

        public:
            //Select the type at the head if b == cur_type_bits else
            //select_type call find_type with list::next
            typedef  typename select_type<list, b, cur_type_bits>::type type;
    };

    /*
     * This is the specialization for empty list, return the null_type
     * OVVERRIDE this struct to ADD CUSTOM BEHAVIOR for the TYPE NOT FOUND case
     * (ie search for type with 17 bits on common archs)
     */
    template <int b> struct find_type<null_type, b>
    {   
        typedef null_type type;

    };

    /*
     * Primary template for selecting the type at the head of the list if
     * it matches the requested bits (b == ctl)
     *
     * If b == ctl the partial specified templated is evaluated so here we have
     * b != ctl. We call find_type on the next element of the list
     */
    template <typename list, int b, int ctl> struct select_type
    {   
            typedef  typename find_type<typename list::next, b>::type type; 
    };

    /*
     * This partial specified templated is used to select top type of a list
     * it is called by find_type with the list of value (consumed at each call)
     * the bits requested (b) and the current type (top type) length in bits
     *
     * We specialice the b == ctl case
     */
    template <typename list, int b> struct select_type<list, b, b>
    {
            typedef typename list::value type;
    };

    /*
     * These are the types list, to avoid possible ambiguity (some weird archs)
     * we kept signed and unsigned separated
     */

    #define UNSIGNED_TYPES type_list<unsigned char,         \
        type_list<unsigned short,                           \
        type_list<unsigned int,                             \
        type_list<unsigned long,                            \
        type_list<unsigned long long, null_type> > > > >

    #define SIGNED_TYPES type_list<signed char,         \
        type_list<signed short,                         \
        type_list<signed int,                           \
        type_list<signed long,                          \
        type_list<signed long long, null_type> > > > >

    /*
     * These are acutally typedef used in programs.
     * 
     * Nomenclature is [u]intN where u if present means unsigned, N is the 
     * number of bits in the integer
     *
     * find_type is used simply by giving first a type_list then the number of 
     * bits to search for.
     *
     * NB. Each type in the type list must had specified the template 
     * numeric_limits as it is used to compute the type len in (binary) digit.
     */
    typedef find_type<UNSIGNED_TYPES, 8>::type  uint8;
    typedef find_type<UNSIGNED_TYPES, 16>::type uint16;
    typedef find_type<UNSIGNED_TYPES, 32>::type uint32;
    typedef find_type<UNSIGNED_TYPES, 64>::type uint64;

    typedef find_type<SIGNED_TYPES, 7>::type    int8;
    typedef find_type<SIGNED_TYPES, 15>::type   int16;
    typedef find_type<SIGNED_TYPES, 31>::type   int32;
    typedef find_type<SIGNED_TYPES, 63>::type   int64;

} 
```

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2015-07-01T13:56:32.647

我注意到这里的所有其他答案几乎都集中在整数类型上，而提问者还询问了浮点数。

我不认为 C++ 标准需要它，但现在最常见平台的编译器通常遵循 IEEE754 标准的浮点数。该标准指定了四种类型的二进制浮点（以及一些 BCD 格式，我从未见过 C++ 编译器支持这些格式）：

*   半精度 (binary16) - 11 位有效数，指数范围 -14 到 15
*   单精度 (binary32) - 24 位有效数，指数范围 -126 到 127
*   双精度 (binary64) - 53 位有效数，指数范围 -1022 到 1023
*   四倍精度 (binary128) - 113 位有效数，指数范围 -16382 到 16383

那么，它如何映射到 C++ 类型呢？一般`float`采用单精度；因此，`sizeof(float) = 4`. 然后`double`使用双精度（我相信这是名称的来源`double`），并且`long double`可能是双精度或四精度（在我的系统上是四精度，但在 32 位系统上可能是双精度）。我不知道任何提供半精度浮点的编译器。

总而言之，这是通常的：

*   `sizeof(float)`= 4
*   `sizeof(double)`= 8
*   `sizeof(long double)`= 8 或 16

* * *

## 回答 #19

> 赞同：-1
> 
> 时间：2009-02-26T08:06:08.467

正如您所提到的 - 它在很大程度上取决于编译器和平台。为此，请检查 ANSI 标准，[http://home.att.net/~jackklein/c/inttypes.html](http://home.att.net/~jackklein/c/inttypes.html)

这是 Microsoft 编译器的一个：*[数据类型范围](http://msdn.microsoft.com/en-us/library/s3f49ktz(vs.71).aspx)*。

* * *

## 回答 #20

> 赞同：-1
> 
> 时间：2015-02-23T19:05:49.933

来自 Alex B C++ 标准没有以字节为单位指定整数类型的大小，但它指定了它们必须能够保持的最小范围。您可以从所需范围推断出最小大小。您可以从中推断出以字节为单位的最小大小以及定义字节中位数的 CHAR_BIT 宏的值（除了最晦涩的平台，它是 8，并且不能小于 8）。

char 的另一个约束是它的大小始终为 1 个字节，或 CHAR_BIT 位（因此得名）。

标准要求的最小范围（第 22 页）为：

和 MSDN 上的数据类型范围：

有符号字符：-127 到 127（注意，不是 -128 到 127；这适用于 1 的补码平台） 无符号字符：0 到 255 “普通”字符：-127 到 127 或 0 到 255（取决于默认的字符符号） short: -32767 to 32767 unsigned short: 0 to 65535 signed int: -32767 to 32767 unsigned int: 0 to 65535 signed long: -2147483647 to 2147483647 unsigned long: 0 to 4294967295 signed long long: -9223372036854775807 to 9223372036854775807 unsigned long long: 0 到 18446744073709551615 C++（或 C）实现可以将类型的大小（以字节 sizeof(type) 为单位）定义为任何值，只要

表达式 sizeof(type) * CHAR_BIT 计算为足以包含所需范围的位数，并且类型的排序仍然有效（例如 sizeof(int) <= sizeof(long)）。实际特定于实现的范围可以在 C 或 C++ 中的 header 中找到（或者更好的是，在 header 中模板化 std::numeric_limits ）。

例如，您将通过以下方式找到 int 的最大范围：

C：

```
#include <limits.h>
const int min_int = INT_MIN;
const int max_int = INT_MAX; 
```

C++：

```
#include <limits>
const int min_int = std::numeric_limits<int>::min();
const int max_int = std::numeric_limits<int>::max(); 
```

这是正确的，但是，您说的也是正确的： char : 1 byte short : 2 bytes int : 4 bytes long : 4 bytes float : 4 bytes double : 8 bytes

因为 32 位架构仍然是默认和最常用的，并且自 32 位之前的内存可用较少的日子以来，它们一直保持这些标准大小，并且为了向后兼容性和标准化，它保持不变。甚至 64 位系统也倾向于使用这些并进行扩展/修改。请参考此以获取更多信息：

[http://en.cppreference.com/w/cpp/language/types](http://en.cppreference.com/w/cpp/language/types)

* * *

## 回答 #21

> 赞同：-1
> 
> 时间：2014-01-02T18:25:25.897

```
unsigned char bits = sizeof(X) << 3; 
```

`X`a `char`,`int`等在哪里`long`。将为您提供`X`以位为单位的大小。

* * *

## 回答 #22

> 赞同：-3
> 
> 时间：2009-03-09T10:22:30.310

[您可以使用OpenGL](http://en.wikipedia.org/wiki/OpenGL)、[Qt](https://en.wikipedia.org/wiki/Qt_%28software%29)等库提供的变量。

比如Qt[提供了](http://doc.trolltech.com/4.5/qtglobal.html)qint8（保证Qt支持的所有平台都是8位的）、qint16、qint32、qint64、quint8、quint16、quint32、quint64等。

* * *

## 回答 #23

> 赞同：-10
> 
> 时间：2015-02-07T23:27:31.683

在 64 位机器上：

```
int: 4
long: 8
long long: 8
void*: 8
size_t: 8 
```

* * *

## 回答 #24

> 赞同：-12
> 
> 时间：2011-09-15T23:18:37.010

根据大小，有四种类型的整数：

*   短整数：2字节
*   长整数：4 字节
*   long long 整数：8 字节
*   整数：取决于编译器（16 位、32 位或 64 位）

# .net - 项目不包含名为“Debug|x64”的配置

> ID：589577
> 
> 赞同：2
> 
> 时间：2009-02-26T07:59:51.553
> 
> 标签：.net, visual-studio-2008, msbuild, 64-bit, vcbuild

我正在尝试使用 x64 的构建配置平台构建 C++ 项目。它在运行 64 位 Windows Server 2008 的新机器上。当我在 VS 中打开构建配置管理器时，我无法选择或创建 x64 平台并且项目被跳过。当我尝试使用 MSBuild 构建它时，我收到错误：VCBLD0004: Project 'MyProject' does not contain a configuration called 'Debug|x64'

项目在另一台机器上构建良好，但不是在新机器上，所以我想我在安装中遗漏了一些东西。任何想法要寻找什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-03-01T08:06:21.467

顺便说一句，问题是 VS（以及 x64 编译器和工具）是在 SDK 之后安装的。必须卸载并重新安装 SDK，然后对其进行修复，然后一切正常。您可以尝试这里提到的修复：http: [//cygon.nuclex.org/2008/04/06/visual-studio-2008-professional-no-x64/](http://cygon.nuclex.org/2008/04/06/visual-studio-2008-professional-no-x64/)

# jquery - 使用 jQuery 会使我的网站加载速度变慢吗？

> ID：589584
> 
> 赞同：3
> 
> 时间：2009-02-26T08:01:54.450
> 
> 标签：jquery, jsp

我打算在我的新网站中使用 jQuery。

我对 jQuery 有一些疑问：

1.  如果我在我的网站中使用 jQuery，页面加载会比普通的 js 慢。
2.  我们的项目是一个社交网站。jQuery 适合吗？

请给我你的建议。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-02-26T08:09:38.380

缩小的 jQuery 大约为 19 KB。如果您链接到 Google-JS，您可以放心，如果他们是 Google 用户（谁不是？），他们不必一次又一次地从您的网站下载 JS

jQuery 适用于任何需要 Javascript 的地方。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-02-26T08:03:12.280

1.  不会比普通js慢。在某些情况下，它会更快。
2.  是的。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-02-26T08:14:48.977

1.  由于用户需要下载 jQuery js 文件，因此会有一些开销。但是，此文件压缩到大约 20K（gzip 压缩），因此影响很小。

2.  jQuery 适用于任何类型的网站。

还有一点：使用像 jQuery 这样可靠的 javascript 库将大大减少开发客户端行为所需的时间。jQuery 为 IE、Firefox 和 Safari 之间的不兼容和怪癖带来了很多麻烦。我绝对推荐使用它。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-02-26T08:05:06.317

如果您担心站点的加载时间，可以使用内容分发网络来加载 jQuery。

我向您推荐[Google AJAX Libs CDN](http://code.google.com/apis/ajaxlibs/)，它被很多很多网站使用。

如果您正在寻找网站的高性能优化，请尝试[YSlow](http://developer.yahoo.com/yslow/)，它会分析您的页面，并告诉您采取哪些措施来减少页面加载时间。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-18T01:20:10.310

明智地使用 jquery / 其他脚本。

只需在该页面上加载您需要的插件，如果可能的话，压缩 jquery 及其插件 (gzip)，以便您的页面加载速度更快。

注意错误，当他们遇到错误时使用javascript，所有页面也会出错:(

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-03-18T01:27:41.023

如果您不使用 jQuery，那么您很可能会编写与代码行一样多的原始 javascript 支持。另外，您将竭尽全力解决 jQuery 相对透明和轻松地为您处理的所有跨浏览器特性。

您的社交网络平台的一些候选框架，例如 - 例如 Drupal - 无论如何都将 jQuery 包含在其核心发行版中......

# iphone - 如何从任何地方对 applicationWillResignActive 做出反应？

> ID：589598
> 
> 赞同：34
> 
> 时间：2009-02-26T08:06:42.537
> 
> 标签：iphone

在您的 iphone 应用程序的任何位置订阅诸如 applicationWillResignActive 之类的事件的代码是什么？

[更新]

让我重新表述我的问题。我不想在我的应用程序委托中对此做出响应，而是从另一个类中收听此事件。这是可能的还是我需要将事件从应用程序委托传递给相关的类？

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2009-10-06T02:45:46.487

看起来您正在寻找此代码。

```
- (void) applicationWillResign {
    NSLog(@"About to lose focus");
}

- (void) myMethod { 
    [[NSNotificationCenter defaultCenter]
        addObserver:self
        selector:@selector(applicationWillResign)
        name:UIApplicationWillResignActiveNotification 
        object:NULL];
} 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2009-03-02T01:37:43.187

查看您正在谈论的方法的文档：

**applicationWillResignActive：**

告诉代理应用程序将变为非活动状态。此方法是可选的。

```
- (void)applicationWillResignActive:(UIApplication *)application 
```

[...]

讨论

[...]

就在它变为非活动状态之前，应用程序还会发布一个**UIApplicationWillResignActiveNotification**。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-02-26T14:01:05.820

在您的应用程序委托中实现以下方法：

```
-(void)applicationWillResignActive:(UIApplication *)application 
```

这允许您在应用程序变为非活动状态时做出反应 - 在这种情况下，它正在执行但不分派传入事件。例如，当弹出覆盖窗口或设备被锁定时，就会发生这种情况。

就在它变为非活动状态之前，应用程序还会发布一个 UIApplicationWillResignActiveNotification。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-02-26T08:22:09.207

您的主题和问题提出的问题略有不同。

您的应用程序将自动收到 applicationWillResignActive 以及 applicationWillTerminate。无需订阅，只需在您的应用中实现该功能即可。

至于如何响应，这取决于应用程序。虽然您可以选择什么都不做，但推荐的行为是您停止或减慢任何非关键功能。例如，如果您是游戏，您将停止更新显示和/或暂停游戏。

# bytearray - 如何将字节数组转换为字符串？

> ID：589600
> 
> 赞同：1
> 
> 时间：2009-02-26T08:07:48.400
> 
> 标签：bytearray, structure

我的结构如下：

结构数据{int no; 字符串名称；int id};

我正在将此结构转换为字节数组。我需要将其转换回结构格式。为此，我需要将第一个成员转换为整数和字符串。如何将字节数组转换为结构？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-26T08:11:59.387

那么答案实际上取决于您如何将结构转换为字节数组。理论上，您将需要以相反的顺序执行相同的步骤！

例如，如果您将结构序列化为：

*   前 4 个字节 = 否
*   第二个 4 字节 = id
*   剩余字节 = 名称中字符的字节流

然后要将字节数组转换回结构，您只需要定义该结构类型的变量并为成员分配从字节数组转换而来的值！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-26T08:14:07.917

查看[`BitConverter`](http://msdn.microsoft.com/en-us/library/system.bitconverter.aspx)课程。这是一个[如何将字节数组转换为 int](http://msdn.microsoft.com/en-us/library/bb384066.aspx)的示例。

因为字符串转换`BitConverter`并不是真正有用的（正如 Marc 在他的评论中提到的那样），即使它具有 ToChar() 方法。您可以使用[`ASCIIEncoding`](http://msdn.microsoft.com/en-us/library/system.text.asciiencoding.aspx),[`UTF8Encoding`](http://msdn.microsoft.com/en-us/library/system.text.utf8encoding.aspx)或命名空间中的任何其他 XxxEncoding 类[`System.Text`](http://msdn.microsoft.com/en-us/library/system.text.aspx)。

请注意，这是 .Net 特定的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-26T08:15:39.393

请注意，许多平台都包含用于此目的的工具；虽然您*可以*编写自定义 [反] 序列化代码，但它很快就会变得乏味。

例如，google 的[协议缓冲区](http://code.google.com/p/protobuf/)是一种与语言无关的*机制，用于描述有线格式。如果您手动完成所有操作，您可以在技术上获得更好（更小）的序列化，但这将是更多的工作......

*= c++, java, etc in the google repo - plus [lots more](http://code.google.com/p/protobuf/wiki/OtherLanguages) by the community

# php - 弹出数组的第一个元素而不是最后一个元素（反转 array_pop）？

> ID：589601
> 
> 赞同：37
> 
> 时间：2009-02-26T08:07:58.790
> 
> 标签：php, arrays

是否有一个 PHP 函数可以“弹出”数组的第一个元素？
`array_pop()`弹出最后一个元素，但我想弹出第一个元素。

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2009-02-26T08:10:13.307

您正在寻找 array_shift()。

[PHP数组移位](http://www.php.net/manual/en/function.array-shift.php)

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2010-01-30T00:27:56.393

**快速备忘**单如果您不熟悉术语，这里是替代术语的快速翻译，可能更容易记住：

```
* array_unshift()  -  (aka Prepend ;; InsertBefore ;; InsertAtBegin )     
* array_shift()    -  (aka UnPrepend ;; RemoveBefore  ;; RemoveFromBegin )

* array_push()     -  (aka Append ;; InsertAfter ;; InsertAtEnd )     
* array_pop()      -  (aka UnAppend ;; RemoveAfter ;; RemoveFromEnd ) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-04-27T15:44:07.057

虽然`array_shift()`绝对是您问题的答案，但值得一提的是，在处理大型阵列时，这可能是一个不必要的缓慢过程。（或多次迭代）

检索到第一个元素后，`array_shift()`重新索引数组中的所有数字键，以便以前 at的元素`[1]`变为，而 at`[0]`的元素`[10000]`变为`[9999]`。

数组越大，要重新索引的键就越多。如果您在大型数组上进行迭代，调用`array_shift`多次迭代，性能损失可能会增加。

基准测试表明，对于大型数组，颠倒数组顺序并从末尾弹出元素通常更便宜。

```
 $array = array_reverse($array);
    $value = array_pop($array); 
```

`array_pop()`显然不需要重新索引，因为它从末尾开始，并`array_reverse()`通过简单地从后到前复制传递给它的数组来返回一个新数组。`array_reverse($array, true)`可用于`key => value`在需要时保留对。

[EDIT] I should mention, the downside to the reverse-pop method is memory consumption, where `array_reverse()` generates a new array, while `array_shift()` works in place. Thus takes longer.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-06-04T10:35:36.693

对我来说 array_slice() 工作正常，说：

```
$arr = array(1,2,3,4,5,6);
//array_slice($array,offset); where $array is the array to be sliced, and   offset is the number of array elements to be sliced
$arr2 = array_slice($arr,3);//or
$arr2 = array_slice($arr,-3);//or
$arr2 = array_slice($arr,-3,3);//return 4,5 and 6 in a new array
$arr2 = array_slice($arr,0,4);//returns 1,2,3 and 4 in a new array 
```

# java - 如何改进我的junit测试

> ID：589603
> 
> 赞同：10
> 
> 时间：2009-02-26T08:08:05.763
> 
> 标签：java, unit-testing, spring, junit

是的，我的 junit 测试看起来很长：

*   我创建了 4 个用户
*   我删除了 1 个用户
*   我尝试使用已删除的用户登录并确保它失败
*   我使用剩下的 3 个用户之一登录并验证我可以登录
*   我从一个用户向另一个用户发送消息，并验证它是否出现在发件人的发件箱和收件人的收件箱中。
*   我删除消息
*   ...
*   ...

**优点**：测试非常有效（非常擅长检测错误）并且非常稳定，因为它们只使用API​​，如果我重构代码，那么测试也会被重构。由于我不使用诸如在给定状态下保存和重新加载数据库之类的“肮脏技巧”，因此我的测试忽略了架构更改和实现更改。

**缺点**：测试变得难以维护，测试中的任何更改都会影响其他测试。测试运行 8-9 分钟，这对于持续集成非常有用，但对开发人员来说有点令人沮丧。测试不能单独运行，你能做的最好的就是在你感兴趣的测试运行后停止——但你绝对必须运行之前的所有测试。

你将如何改进我的测试？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-02-26T08:15:00.927

首先，了解您拥有的测试是集成测试（可能会访问外部系统并涉及广泛的类）。单元测试应该更加具体，这对已经构建的系统来说是一个挑战。实现这一目标的主要问题通常是代码的结构方式：

即类与外部系统（或其他类）紧密耦合。为了能够做到这一点，您需要以这样一种方式构建类，即您实际上可以避免在单元测试期间触及外部系统。

**更新 1：**阅读以下内容，并考虑生成的设计将允许您在不访问文件/数据库的情况下实际测试加密逻辑 - [http://www.lostechies.com/blogs/gabrielschenker/archive/2009/01/30/ the-dependency-inversion-principle.aspx](http://www.lostechies.com/blogs/gabrielschenker/archive/2009/01/30/the-dependency-inversion-principle.aspx)（不是在 java 中，但很好地说明了这个问题）......还请注意，您可以为读者/作者进行真正集中的集成测试，而不必一起测试。

我建议：

*   逐渐在您的系统上包含真正的单元测试。您可以在进行更改和开发新功能时执行此操作，并进行适当的重构。
*   在执行上述操作时，在适当的情况下包括重点集成测试。确保您能够运行与集成测试分开的单元测试。
*   考虑到您的测试接近于测试整个系统，因此与自动化验收测试的不同之处仅在于它们在 API 的边界上运行。鉴于此，请考虑与 API 对产品的重要性相关的因素（例如是否将在外部使用），以及您是否有良好的自动化验收测试覆盖率。这可以帮助您了解在您的系统上安装这些的价值是什么，以及为什么它们自然需要这么长时间。决定您是在接口级别上作为一个整体测试系统，还是同时在接口+api 级别上进行测试。

**更新 2：**基于其他答案，我想澄清一些关于做 TDD 的事情。假设您必须检查某些给定的逻辑是否发送电子邮件，将信息记录在文件中，将数据保存在数据库中，并调用 Web 服务（我知道不是一下子，但您开始为每一个添加测试） . 在您不想触及外部系统的每个测试中，您真正想要测试的是逻辑是否会调用您期望它执行的那些系统。因此，当您编写一个测试来检查创建用户时是否发送了电子邮件时，您要测试的是逻辑是否调用了执行该操作的依赖项。请注意，您可以编写这些测试和相关逻辑，而无需实际实现发送电子邮件的代码（然后必须访问外部系统以了解发送的内容......）。这将帮助您专注于手头的任务并帮助您获得一个解耦的系统。它还将使测试发送到这些系统的内容变得简单。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-03-01T15:12:50.943

现在你正在用一种方法测试很多东西（违反了每个测试一个断言）。这是一件坏事，因为当任何这些事情发生变化时，整个测试都会失败。这导致无法立即明确测试失败的原因以及需要修复的内容。此外，当您有意更改系统的行为时，您需要更改更多测试以对应更改的行为（即测试是脆弱的）。

要了解哪种测试好，请阅读有关 BDD 的更多信息：http: [//dannorth.net/introducing-bdd](http://dannorth.net/introducing-bdd) [http://techblog.daveastels.com/2005/07/05/a-new-look- at-test-driven-development/](http://techblog.daveastels.com/2005/07/05/a-new-look-at-test-driven-development/) [http://jonkruger.com/blog/2008/07/25/why-behavior-driven-development-is-good/](http://jonkruger.com/blog/2008/07/25/why-behavior-driven-development-is-good/)

为了改进您提到的测试，我会将其拆分为以下三个具有这些上下文和测试方法名称的测试类：

*创建用户帐户*

*   在创建用户之前
    *   用户不存在
*   创建用户时
    *   用户存在
*   删除用户时
    *   该用户不再存在

*在登录*

*   当用户存在时
    *   用户可以使用正确的密码登录
    *   用户无法使用错误的密码登录
*   当用户不存在时
    *   用户无法登录

*发送消息*

*   当用户发送消息时
    *   邮件出现在发件人的发件箱中
    *   邮件出现在收件人的收件箱中
    *   该消息不会出现在任何其他消息框中
*   删除消息时
    *   该消息不再存在

您还需要提高测试的速度。你应该有一个覆盖率很高的单元测试套件，它可以在几秒钟内运行。如果运行测试的时间超过 10-20 秒，那么每次更改后你都会犹豫是否运行它们，并且你会失去运行测试给你的一些快速反馈。[（如果它与数据库对话，则不是单元测试，而是系统或集成测试，它们有其用途，但速度不够快，无法持续执行。）您需要通过模拟](http://martinfowler.com/articles/mocksArentStubs.html)来打破被测类的依赖关系[或存根](http://martinfowler.com/articles/mocksArentStubs.html)他们。同样从您的描述来看，您的测试似乎不是孤立的，而是测试取决于先前测试引起的副作用 - 这是一个禁忌。好的测试是[第一位](http://blog.objectmentor.com/articles/2007/08/02/which-came-first)的。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-03-03T06:24:53.800

理想情况下，单元测试应该是独立的，并且能够以任何顺序运行。所以，我建议你：

*   将您的测试分解为独立的
*   考虑使用内存数据库作为测试的后端
*   考虑将每个测试或套件包装在最后回滚的事务中
*   分析单元测试以查看时间在哪里，并专注于那个

如果创建几个用户并发送一些消息需要 8 分钟，则性能问题可能不在测试中，而这可能是系统本身性能问题的症状 - 只有您的分析器才能确定！

[警告：我不认为这些测试是“集成测试”，尽管我可能是少数；我认为这些类型的测试是*功能的单元测试*，a la TDD]

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-02-26T08:31:10.480

减少测试之间的依赖关系。这可以通过使用 Mocks 来完成。[Martin Fowler 在Mocks are not stubs](http://www.martinfowler.com/articles/mocksArentStubs.html)中谈到了这一点，特别是为什么模拟减少了测试之间的依赖关系。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-03-05T23:53:43.903

您可以使用[JExample](http://smallwiki.unibe.ch/jexample)，它是 JUnit 的扩展，它允许测试方法具有可被其他测试重用的返回值。JExample 测试与 Eclipse 中的普通 JUnit 插件一起运行，并且还与普通 JUnit 测试一起工作。因此迁移应该没有问题。JExample 使用如下

```
@RunWith(JExample.class)
public class MyTest {

    @Test
    public Object a() { 
        return new Object();
    }

    @Test
    @Given("#a")
    public Object b(Object object) { 
        // do something with object
        return object; 
    }

    @Test
    @Given("#b")
    public void c(Object object) { 
        // do some more things with object
    }

} 
```

免责声明，我是 JExample 开发人员之一。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-02-26T10:52:30.390

如果您使用[TestNG](http://testng.org/doc/)，您可以通过多种方式对测试进行注释。例如，您可以将上面的测试注释为*long-running*。然后您可以配置您的自动构建/持续集成服务器来运行这些，但标准的“交互式”开发人员构建不会（除非他们明确选择）。

这种方法依赖于开发人员定期检查您的持续构建，以便测试运行！

有些测试不可避免地需要很长时间才能运行。此线程中的评论重新。表现都是有效的。但是，如果您的测试*确实*需要很长时间，实用的解决方案是运行它们，但不要让它们耗时的性质影响到开发人员避免运行它们的程度。

注意：您可以通过（例如）以不同的方式命名测试并让您的连续构建运行特定的测试类子集，从而对 JUnit 做类似的事情。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-03-01T16:12:12.047

通过测试你描述的故事，你有非常脆弱的测试。如果只有一小部分功能发生变化，您的整个测试可能会一团糟。然后，您可能会更改所有受该更改影响的测试。

实际上，您所描述的测试更像是功能测试或组件测试，而不是单元测试。因此，您正在使用单元测试框架（junit）进行非单元测试。在我看来，使用单元测试框架进行非单元测试并没有错，**如果（且仅当）**你知道它。

所以有以下选择：

*   **像其他用户已经建议的那样，**选择另一个更好地支持“讲故事”式测试的测试框架。**您必须评估并找到合适的测试框架。**

***   **让你的测试更像“单元测试”。**因此，您将需要分解您的测试，并可能更改您当前的生产代码。为什么？因为单元测试旨在测试小代码单元（单元测试纯粹主义者建议一次只测试一个类）。通过这样做，您的单元测试变得更加独立。如果你改变一个类的行为，你只需要改变相对少量的单元测试代码。这使您的单元测试更加健壮。在这个过程中，您可能会看到您当前的代码不能很好地支持单元测试——主要是因为类之间的依赖关系。这就是您还需要修改生产代码的原因。** 

 **如果您在一个项目中并且时间不多了，那么这两个选项可能对您没有任何帮助。然后你将不得不忍受这些测试，但你可以尝试减轻你的痛苦：

*   **删除测试中的代码重复**：就像在生产代码中一样，消除代码重复并将代码放入辅助方法或辅助类中。如果有什么变化，您可能只需要更改辅助方法或类。这样，您将收敛到下一个建议。

*   **为您的测试添加另一层间接：**生成在更高抽象级别上运行的辅助方法和辅助类。它们应该充当您的测试的 API。这些助手称您为生产代码。你的故事测试应该只调用那些助手。如果发生变化，您只需更改 API 中的一处即可，无需触及所有测试。

您的 API 的示例签名：

```
createUserAndDelete(string[] usersForCreation, string[] userForDeletion);
logonWithUser(string user);
sendAndCheckMessageBoxes(string fromUser, string toUser); 
```

对于一般单元测试，我建议查看[Gerard Meszaros 的 XUnit 测试模式](http://xunitpatterns.com/)。

要在生产测试中打破依赖关系，请查看[Michael Feathers 的有效使用遗留代码](https://rads.stackoverflow.com/amzn/click/com/0131177052)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-02-26T08:46:25.500

除了以上，再找一本关于TDD的好书（我可以推荐《Java Developers的TDD和验收TDD》）。即使它会从 TDD 的角度来看，也有很多关于编写正确类型的单元测试的有用信息。

找一个在该领域有很多知识的人，并用他们来弄清楚如何改进你的测试。

加入邮件列表提出问题并阅读通过的流量。yahoo 上的 JUnit 列表（类似于 groups.yahoo.com/junit）。JUnit 世界中的一些推动者和震动者都在该列表中并积极参与。

获取单元测试的黄金法则列表，并将它们粘贴在您（和其他人）的隔间墙上，例如：

*   你永远不能访问外部系统
*   你应该只测试被测代码
*   您一次只能测试一件事等。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-02-26T08:55:03.980

由于其他人都在谈论结构，我会选择不同的观点。这听起来像是一个很好的机会来分析代码以查找瓶颈并通过代码覆盖率运行它以查看您是否缺少任何东西（考虑到运行它所花费的时间，结果可能很有趣）。

我个人使用 Netbeans 分析器，但在其他 IDE 中也有一些，也有独立的。

对于代码覆盖率，我使用[Cobertura](http://cobertura.sourceforge.net/)，但[EMMA](http://emma.sourceforge.net/)也有效（EMMA 有一个 Cobertura 没有的烦恼……我忘记了它是什么，它可能不再是问题了）。这两个是免费的，也有付费的，很好。

# mysql - 改善这个缓慢的 mysql 查询的技巧？

> ID：589607
> 
> 赞同：4
> 
> 时间：2009-02-26T08:10:00.970
> 
> 标签：mysql, performance, subquery, cbo

我使用的查询通常在一秒钟内执行，但有时需要 10-40 秒才能完成。我实际上并不完全清楚子查询是如何工作的，我只知道它可以工作，因为它为每个 faverprofileid 提供了 15 行。

我正在记录慢速查询，它告诉我检查了 5823244 行，这很奇怪，因为在所涉及的任何表中都没有接近那么多行（收藏夹表最多有 50,000 行）。

谁能给我一些指示？这是子查询的问题并且需要使用文件排序吗？

编辑：运行解释表明用户表没有使用索引（即使 id 是主键）。在额外下它说：使用临时；使用文件排序。

```
SELECT F.id,F.created,U.username,U.fullname,U.id,I.*   
FROM favorites AS F  
INNER JOIN users AS U ON F.faver_profile_id = U.id  
INNER JOIN items AS I ON F.notice_id = I.id  
WHERE faver_profile_id IN (360,379,95,315,278,1)  
AND F.removed = 0  
AND I.removed = 0   
AND F.collection_id is null   
AND I.nudity = 0  
AND (SELECT COUNT(*) FROM favorites WHERE faver_profile_id = F.faver_profile_id  
AND created > F.created AND removed = 0 AND collection_id is null) < 15 
ORDER BY F.faver_profile_id, F.created DESC; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-02-26T08:17:21.077

检查的行数表示很大，因为许多行已被检查过一次以上。 **你得到这个是因为一个不正确的优化查询计划**，当应该执行索引查找时导致表扫描。在这种情况下，检查的行数是指数级的，即与一个以上表格中的总行数的乘积相当的数量级。

*   确保您已在三个表上**运行[ANALYZE TABLE 。](http://dev.mysql.com/doc/refman/5.1/en/analyze-table.html)**
*   阅读[如何避免表扫描](http://dev.mysql.com/doc/refman/5.1/en/how-to-avoid-table-scan.html)，识别并创建任何缺失的索引
*   重新运行 ANALYZE 并重新解释您的查询
    *   检查的行数必须急剧下降
    *   如果没有，**请发布完整的解释计划**
*   使用[查询提示](http://dev.mysql.com/doc/refman/5.1/en/index-hints.html)强制使用索引（要查看表的索引名称，请使用[SHOW INDEX](http://dev.mysql.com/doc/refman/5.1/en/show-index.html)）：

> `SELECT F.id,F.created,U.username,U.fullname,U.id,I.*`
> `FROM favorites AS F` **`FORCE INDEX (faver_profile_id_key)`**
> `INNER JOIN users AS U` **`FORCE INDEX FOR JOIN (PRIMARY)`** `ON F.faver_profile_id = U.id`
> `INNER JOIN items AS I` **`FORCE INDEX FOR JOIN (PRIMARY)`** `ON F.notice_id = I.id`
> `WHERE faver_profile_id IN (360,379,95,315,278,1)`
> `AND F.removed = 0`
> `AND I.removed = 0`
> `AND F.collection_id is null`
> `AND I.nudity = 0`
> `AND (SELECT COUNT(*) FROM favorites` **`FORCE INDEX (faver_profile_id_key)`** `WHERE faver_profile_id = F.faver_profile_id`
> `AND created > F.created AND removed = 0 AND collection_id is null) < 15`
> `ORDER BY F.faver_profile_id, F.created DESC;`

您也可以更改您的查询以使用`GROUP BY faver_profile_id`/`HAVING count > 15`而不是嵌套`SELECT COUNT(*)`子查询，如`vartec`. 如果您的原始查询和`vartec`' 查询的性能应该是相当的，如果两者都得到适当的优化，例如使用提示（您的查询将使用嵌套索引查找，而`vartec`' 的查询将使用基于哈希的策略。）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-02-26T08:21:26.247

我认为应该更快`GROUP BY`。`HAVING`那是你要的吗？

```
SELECT F.id,F.created,U.username,U.fullname,U.id, I.field1, I.field2, count(*) as CNT
FROM favorites AS F  
INNER JOIN users AS U ON F.faver_profile_id = U.id  
INNER JOIN items AS I ON F.notice_id = I.id  
WHERE faver_profile_id IN (360,379,95,315,278,1)  
AND F.removed = 0  
AND I.removed = 0   
AND F.collection_id is null   
AND I.nudity = 0  
GROUP BY F.id,F.created,U.username,U.fullname,U.id,I.field1, I.field2
HAVING CNT < 15
ORDER BY F.faver_profile_id, F.created DESC; 
```

不知道*`items`*你需要哪些字段，所以我放了占位符。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-02-26T08:27:16.573

我建议您使用[Mysql Explain Query](http://dev.mysql.com/doc/refman/5.0/en/explain.html)来查看您的 mysql 服务器如何处理查询。我敢打赌，你的索引不是最优的，但解释应该比我的赌注做得更好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-02-26T08:42:44.383

您可以对每个 id 执行循环并使用 limit 而不是 count(*) 子查询：

```
foreach $id in [123,456,789]:
    SELECT
     F.id,
     F.created,
     U.username,
     U.fullname,
     U.id,
     I.*
    FROM
     favorites AS F INNER JOIN
     users AS U ON F.faver_profile_id = U.id INNER JOIN
     items AS I ON F.notice_id = I.id
    WHERE
     F.faver_profile_id = {$id} AND
     I.removed = 0 AND
     I.nudity = 0 AND
     F.removed = 0 AND
     F.collection_id is null
    ORDER BY
     F.faver_profile_id,
     F.created DESC
    LIMIT
     15; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-02-26T09:44:53.067

我假设该查询的结果旨在显示为分页列表。在这种情况下，也许您可​​以考虑执行一个更简单的“未连接查询”，并对每一行执行第二次查询，以仅读取显示的 15、20 或 30 个元素。JOIN 不是一个繁重的操作吗？这将简化查询，并且当连接表增长时它不会变慢。

如果我错了，请告诉我。

# windows - 我应该使用哪种视频和音频格式/编解码器？

> ID：589614
> 
> 赞同：1
> 
> 时间：2009-02-26T08:12:27.140
> 
> 标签：windows, video, encoding, video-capture, codec

环境：Windows XP/Vista、VS2008、C#/.NET 2.0、[VideoGrabber](http://www.datastead.com)。

大家好，

我正在编写一个应用程序来捕获相机输入并将它们编码成电影文件（包括声音）。

我的客户建议我使用 DivX 编解码器对电影进行编码。但默认情况下它没有安装，也不能再分发：用户必须自己下载、安装**和配置**它。

默认 Windows (XP+) 安装中是否有可用于编码视频和声音的编解码器？它必须支持压缩。理想情况下，我应该能够以编程方式设置基本配置。

注意：我阅读[了这个问题](https://stackoverflow.com/questions/305773)，但它实际上并没有满足我的需求。

TIA,

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-26T08:56:12.480

> 默认 Windows (XP+) 安装中是否有可用于编码视频和声音的编解码器？

您可以期待的最好的结果是 WMV2 (WMV v8)。您可以[使用 qasf.dll](http://msdn.microsoft.com/en-us/library/aa384809(VS.85).aspx)对其进行编码。

您在 XP 中为 AVI 获得的编解码器都是“多媒体 PC”早期的可悲努力：像 Cinepak 和 RLE 之类的东西，它们对现代全彩色/分辨率视频的使用为零，以及 Intel 4:2:0，它只是色度子采样，而不是真正的实际视频压缩。

如果你需要比这更好的，你将不得不开始嵌入你自己的编解码器，例如。来自[ffmpeg](http://ffmpeg.org/)。

> 但默认情况下它没有安装，也不能再分发：用户必须自己下载、安装和配置它。

反正这样最好。将编解码器静默安装到系统上是相当反社会的，因为它们之间经常发生冲突，您最终可能会弄乱其他 DirectShow 应用程序。例如，（至少）有三种不同的常见 DirectShow 编解码器可以处理“DivX”（实际上只不过是 AVI 容器中的 MPEG-4 Advanced Simple Profile 视频和 MP3 音频）：DivX、Xvid 和 ffdshow。安装多个可能是错误的秘诀。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-26T08:24:09.750

不确定这对您有多大用处，但我最近才试图回答这个问题。[本文](http://opencv.willowgarage.com/wiki/VideoCodecs)建议所有平台都支持 DIB、I420 或 IYUV……至少在 OpenCV 中。我在 I420 上遇到的麻烦最少。

# wpf - 在 ASP.NET Web 应用程序中添加 XAML 文件

> ID：589615
> 
> 赞同：0
> 
> 时间：2009-02-26T08:12:33.287
> 
> 标签：wpf, xaml

如何将 XAML 文件添加到 ASP.NET 网页？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-26T08:22:18.333

使用 Silverlight 控件：-

```
<object type="application/x-silverlight" width="100%" height="100%" id="slc">
    <param name="source" value="/myfolder/myfile.xaml"/>
 </object> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-26T08:20:30.333

取决于您要对该 XAML 文件执行的操作。:-)

如果您想将它与 Silverlight 一起使用，您需要[学习如何编写 SL 应用程序](http://silverlight.net/GetStarted/)。

如果您想从 XAML 生成静态图片以发送到客户端，可以查看[此博客文章](http://blog.galasoft.ch/archive/2008/10/10/converting-and-customizing-xaml-to-png-with-server-side-wpf.aspx)。

# ssl - ROOT CA 如何验证签名？

> ID：589622
> 
> 赞同：37
> 
> 时间：2009-02-26T08:15:43.327
> 
> 标签：ssl, ca

假设使用 https 时，浏览器向服务器发出请求，服务器返回其证书，包括公钥和 CA 签名。

此时，浏览器会要求其 CA 验证给定的公钥是否真的属于服务器？

浏览器上的 Root 证书如何完成此验证？

举个例子：假设serverX从CA“rootCA”获得了一个证书。浏览器在本地存储了 rootCA 的副本。当浏览器 ping serverX 并使用其公钥+签名进行回复时。现在根 CA 将使用它的私钥来解密签名并确保它真的是 serverX？

它是如何工作的？

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2009-02-26T11:33:53.553

您的服务器创建一个密钥对，由一个私钥和一个公钥组成。当然，服务器从不提供私钥，但每个人都可以获得公钥的副本。公钥嵌入在证书容器格式 (X.509) 中。该容器包含与封装密钥相关的元信息，例如服务器的 IP 地址或域名、该服务器的所有者、电子邮件联系地址、密钥的创建时间、有效期、有效期它可能用于的目的以及许多其他可能的值。

整个容器由受信任的证书颁发机构 (= CA) 签名。CA 也有一个私钥/公钥对。您给他们您的证书，他们验证容器中的信息是否正确（例如，联系信息是否正确，该证书是否真的属于该服务器），最后用他们的私钥对其进行签名。CA 的公钥需要安装在用户系统上。大多数知名 CA 证书已包含在您喜欢的操作系统或浏览器的默认安装中。

现在，当用户连接到您的服务器时，您的服务器使用私钥对一些随机数据进行签名，将签名数据与其证书（= 公钥 + 元信息）打包在一起，并将所有内容发送给客户端。客户可以用这些信息做什么？

首先，它可以使用刚刚发送的证书中的公钥来验证签名数据。由于只有私钥的所有者才能正确签署数据，公钥才能正确验证签名，所以它会知道无论是谁签署了这条数据，这个人也拥有该数据的私钥。收到公钥。

但是，是什么阻止了黑客拦截数据包，用他自己使用不同证书签名的数据替换签名数据，并用他自己的证书替换证书？答案是什么都没有。

这就是为什么在验证签名数据之后（或在验证之前），客户端验证接收到的证书是否具有有效的 CA 签名。使用已安装的公共 CA 密钥，它验证接收到的公共密钥是否已由已知且希望受信任的 CA 签名。默认情况下，未签名的证书不受信任。用户必须在其浏览器中明确信任该证书。

最后，它检查证书本身中的信息。IP 地址或域名是否真的与客户端当前正在与之通信的服务器的 IP 地址或域名匹配？如果没有，那就有问题了！

人们可能会想：是什么阻止了黑客仅仅创建他自己的密钥对并将您的域名或 IP 地址放入他的证书中，然后由 CA 签名？简单的回答：如果他这样做，没有 CA 会签署他的证书。要获得 CA 签名，您必须证明您确实是该 IP 地址或域名的所有者。黑客不是所有者，因此他无法证明这一点，因此他不会得到签名。

但是，如果黑客注册了他自己的域，为此创建了一个证书，并由 CA 签名呢？这行得通，他会得到 CA 签名，毕竟这是他的域。但是，他不能使用它来入侵您的连接。如果他使用这个证书，浏览器将立即看到签名的公钥是针对域 example.net 的，但它当前正在与 example.com 通信，而不是同一个域，因此又出现了问题。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2009-02-26T08:28:09.897

服务器证书使用 CA 的私钥签名。浏览器使用 CA 的公钥来验证签名。浏览器和 CA 之间没有直接通信。

重要的一点是浏览器附带公共 CA 密钥。所以浏览器事先知道它可以信任的所有 CA。

如果您不理解这一点，请查看非对称密码学和数字签名的基础知识。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-02-26T08:26:47.323

证书基于使用 RSA 等非对称加密。您有两个密钥，通常称为私钥和公钥。*你用私钥加密*的东西只能用公钥解密。（实际上，反之亦然。）

您可以将证书视为护照或驾驶执照：它是一种证书，上面写着“这就是我；您可以信任它，因为它是由您信任的人（例如威瑞信）提供给我的。” 这是通过“签名”完成的，可以使用证书颁发机构的公钥来计算。如果数据是 CA 最初获得的数据，您可以验证证书。

证书包含有关证书所有者的识别信息。当您收到它时，您使用您从受信任的机构知道的密钥组合来确认您收到的证书是有效的，因此您可以推断您信任颁发证书的人。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-02-26T08:19:03.380

您的浏览器不会要求 CA 进行验证，而是在本地存储根证书的副本，并且它将使用标准加密程序来验证证书是否确实有效。

这就是为什么当您自签名证书时，您的证书无效，即使技术上需要 CA，您当然可以将自签名 CA 复制到您的计算机，从那时起它就会信任您的自签名证书。

CACert.org 也有同样的问题，它有有效的证书，但由于浏览器的列表中没有根证书，因此它们的证书会生成警告，直到用户下载根 CA 并将它们添加到浏览器中。

# language-agnostic - 派开发人员参加为期 3 天的 Microsoft Learning Gateway 研讨会是否有用？

> ID：589623
> 
> 赞同：2
> 
> 时间：2009-02-26T08:16:35.617
> 
> 标签：language-agnostic

到目前为止，我的公司非常基于 LAMP，我的管理层决定派一名硬件人员和一名开发人员到这个 MLG 研讨会。根据我在网上查到的情况，主要是 MS 试图捆绑他们的很多东西并试图将其卖给我们以解决我们的问题。再加上我们现在使用的大部分都是开源技术，LAMP，购买了 3rd 方库。

所以我觉得这更像是管理方面的事情，而不是开发人员应该参加的事情。大家有参加过吗？还是就开发人员的需求而言，这是浪费时间。如果不是，那么我可能会和我的团队负责人交谈，他比我更喜欢管理：P

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-02-26T08:30:00.407

自己去那里。如果你派经理去那里，MS 可以成功地向他们推销东西，然后你将被迫使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-26T08:26:28.480

...我很困惑，当您是开源 LAMP 商店时，为什么你们中的任何人都会费心参加这个活动。是否考虑换机？？

# internet-explorer - IE 使用 mshtmled.dll。但是什么是 mshtmled.dll？

> ID：589631
> 
> 赞同：2
> 
> 时间：2009-02-26T08:22:00.737
> 
> 标签：internet-explorer, dll

我有一个网络应用程序，它不时让 IE 处于挂起状态，其中 IE 使用 100% 的 CPU。唯一的出路是终止IE进程。

当我查看挂在 iexplore.exe 中的线程的堆栈跟踪时，我看到堆栈遍历 mshtmled.dll。我习惯于在这些堆栈跟踪中看到 mshtml.dll，但不是 mshtmled.dll。

被调用的方法让你认为页面上有一个编辑器（如`CSelectionManager::SetEditContext`or `CSelectionManager::EnsureEditContextClick`），但我没有在页面上使用 HTML 编辑器（如 YUI RTE 的 FCK 编辑器）。

所以我真的很想知道： IE 是如何使用 mshtmled.dll 的？

## 试图禁用 mshtmled.dll

@VonC 在评论中建议我通过管理加载项对话框禁用 mshtmled.dll，您可以从 Internet 选项的程序选项卡中获得该对话框。禁用该dll并重新启动IE后，我可以看到它被报告为禁用：

[替代文字 http://img.skitch.com/20090226-c9e9ygek8i6a7di3jija2x317k.png](http://img.skitch.com/20090226-c9e9ygek8i6a7di3jija2x317k.png)

在此之后，我仍然能够重现该问题，并且我确实看到（喘气！）mshtmled.dll 正在挂起线程的堆栈跟踪中使用：

[替代文字 http://img.skitch.com/20090226-m3167dxb8iaax3wgy22eatruyp.png](http://img.skitch.com/20090226-m3167dxb8iaax3wgy22eatruyp.png)

## 微软修补程序

Microsoft[为 mshtmled.dll](http://support.microsoft.com/KB/896156)提供了一个修补程序，用于解决与我所看到的问题非常相似的问题。但是这个修补程序很可能安装在我们可以重现问题的机器上，因为我们有 SP3。在我看来，我在这里遇到的问题与已解决的问题具有相似的性质。我只是在这里提到这一点，以防有人发现这很有用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-02-26T08:52:53.830

就像这个[线程建议](http://social.msdn.microsoft.com/forums/en-US/iewebdevelopment/thread/26c80a7d-c24d-479d-95a9-59ff964b8778/)一样，您可以使用像[**fiddlertool**](http://www.fiddlertool.com/fiddler/)这样的工具来分析您的 HTML 流量并检查是什么触发了这个挂起状态。

由于 mshtmled.dll 处理网页中的 HTML 编辑，因此此 HTML 流量中的某些内容必须触发 mshtmled 调用。

* * *

正如 Alessandro 在评论中提到的，有一个 JavaScript 处于活动状态，并且由于 mshtmled.dll 与“DOM 元素操作”相关，可能是 JavaScript 确实触发了这些 mshtmled 调用。
免责声明：“DOM 操作”并不是它的主要功能，因为 mshtmled.dll 被描述为[初始 Front Page](http://www.auditmypc.com/process/mshtmled.asp)分发的一部分。可能它是一个**可以被停用的 IE 模块，作为一个名为“HtmlDlgSafeHelper”类的组件 ActiveX。**

![管理加载项](https://i.stack.imgur.com/lQQDF.jpg)

选择“管理加载项 - 无需许可即可运行的加载项”，您应该会在“文件”列中看到 mshtmled.dll。

可能是某些 JavaScript 请求了该对象，例如：

```
var a = new ActiveXObject('HtmlDlgSafeHelper.HtmlDlgSafeHelper');
a.fonts = ...; 
```

# boost - 提升版本号

> ID：589646
> 
> 赞同：1
> 
> 时间：2009-02-26T08:28:17.430
> 
> 标签：boost

我不明白为什么 Boost 库的版本号只会增加 1/100（例如 1.33、1.34 等），即使主要包含内容就像巨大的库一样。这背后有什么强大的动机吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-26T08:32:32.567

它在[Boost Faq](http://www.boost.org/users/faq.html)中说：

> Boost 版本号是什么意思？该方案是 xyz，其中 x 仅在大量更改时递增，例如许多库的重组，y 在添加新库时递增，z 在维护版本时递增。如果左侧的值发生变化，则 y 和 z 将重置为 0。

# html - 超快速的屏幕抓取技术？

> ID：589649
> 
> 赞同：12
> 
> 时间：2009-02-26T08:30:18.143
> 
> 标签：html, screen-scraping

我经常发现自己需要为内部目的进行一些简单的屏幕抓取（即我使用的第三方服务仅通过 HTML 发布报告）。我现在至少有两三个案例。我可以使用 apache httpclient 并创建所有必要的屏幕抓取代码，但这需要一段时间。这是我通常的过程：

1.  在网站上打开 Charles Proxy，看看发生了什么。
2.  开始使用Apache HttpClient写一些java代码，处理cookies，多个请求
3.  使用 Jericho HTML 来处理 HTML 的解析。

我希望我可以快速“记录我的会话”，然后参数化因会话而异的内容。想象一下，只是使用 Charles 来获取所有请求 HTTP，然后参数化相关的查询字符串或发布参数。瞧，我有一个可重用的 http 脚本。

有什么可以做到这一点的吗？我记得当我曾经在一家大公司工作时，曾经使用过 Mercury Interactive 的一个名为 Load Runner 的工具，它本质上是一种很好的方法来记录 http 会话并使其可重用（用于测试目的）。不幸的是，该工具非常昂贵。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-02-26T11:40:47.513

[HtmlUnit](http://htmlunit.sourceforge.net/)是用 Java 编写的可编写脚本的无头浏览器。我们将它用于一些故障严重、复杂的网页，它通常做得很好。

为了进一步简化事情，您可以在 Jython 中运行它。由此产生的程序读起来更像是一个人如何使用浏览器的抄本，而不是努力工作。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-02-26T11:37:13.483

你没有提到你想用这个做什么；如果让 Web 浏览器重复您的操作是一种可接受的解决方案，则一种解决方案是使用 Selenium 等工具简单地为您的 Web 浏览器“编写脚本”。您可以使用[Selenium IDE](http://seleniumhq.org/projects/ide/)记录您所做的事情，然后更改参数。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-02-26T11:46:06.317

> 我希望我可以快速“记录我的会话”，然后参数化因会话而异的内容。

如果你有 Visual Studio 测试版，它的 web 测试功能就是这样做的。如果您不使用 VS 或想要一个独立工具，我在[OpenSpan](http://www.openspan.com)方面取得了巨大成功。它不仅仅是网络，它还包含 Windows 应用程序和 Java！

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-04-16T20:25:04.113

Selenium 将是我的第一选择，因为 IDE 通过为您“录制”会话，让您可以轻松地做很多事情。但是，如果您对它提供的内容不满意，您也可以使用名为[Beautiful Soup](http://www.crummy.com/software/BeautifulSoup/)的 Python 模块以编程方式浏览网站。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-04-22T12:24:54.543

Python 和 Perl 都有一个名为 Mechanize 的模块（WWW::Mechanize for perl），它可以*轻松*地以编程方式执行浏览器行为（填写表单、处理 cookie 等）。

因此，Python + BeautifulSoup（出色的 html/xml 解析器）+ mechanize（浏览器功能）= 超级简单/快速的爬虫

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-04-20T18:43:53.853

使用 FireFox，应该可以通过其对插件和增强功能的强大支持来实现大部分功能，但这并不意味着运行“无头”，而是真正的脚本浏览器。另外，我似乎记得曾经读过谷歌的 chrome 浏览器使用类似的技术来进行自动回归测试。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-04-20T15:02:04.543

Internet Explorer 支持浏览器帮助程序对象 (BHO)。他们可以访问 IE 的 HWND（窗口句柄）并且很容易从那里刮取像素。COM 接口还允许您访问 HTTP 请求，您可以通过以下`IWebBrowser2`方式取回已解析的 HTML 文档`IWebBrowser2::Document = IHTMLDocument / IHTMLDocument2 /IHTMLDocument3`

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-04-21T03:52:03.147

我不能亲自担保，但有一个免费的 firefox 插件：DejaClick 我前几天安装了它，并用它做了一些补救性的录制、播放和脚本编辑活动。它在没有太多学习曲线的情况下将它们拉下来。如果您的最终目标是在 Web 浏览器中显示某些内容，那么它就足够了。

它们提供网络交易监控服务，这意味着您可以导出脚本以供其他用途，但它们可能过于专有而无法在您的网络浏览器/他们的付费服务之外使用。

[http://www.dejaclick.com/](http://www.dejaclick.com/)

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2009-04-18T22:03:10.490

我使用 DomInspector 手动检查感兴趣的站点以对其结构进行参数化。然后是简单的 Apache HttpClient 和使用这个参数化结构的手工解析器。基本上，我可以通过稍微调整参数自动从任何站点提取任何信息。它类似于 SAX 解析器的工作方式，您只需要告诉它您想要开始获取数据的标签序列。例如，谷歌有非常标准的搜索结果格式。所以，你只需运行到第三次出现的“tab”并开始从第一个“div”到结尾“/div”获取文本

# mysql - 在 MySQL 中将 2 小时添加到当前时间？

> ID：589652
> 
> 赞同：200
> 
> 时间：2009-02-26T08:31:43.663
> 
> 标签：mysql

MySQL 中这个查询的有效语法是什么？

```
SELECT * FROM courses WHERE (now() + 2 hours) > start_time 
```

*注意：start_time 是课程表的一个字段*

* * *

## 回答 #1

> 赞同：366
> 
> 时间：2009-02-26T08:41:57.180

```
SELECT * 
FROM courses 
WHERE DATE_ADD(NOW(), INTERVAL 2 HOUR) > start_time 
```

有关其他日期/时间操作，请参阅[日期和时间函数](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html)。

* * *

## 回答 #2

> 赞同：49
> 
> 时间：2009-02-26T08:34:16.590

您需要[DATE_SUB()](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_date-sub)或[DATE_ADD()](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_date-add)

* * *

## 回答 #3

> 赞同：32
> 
> 时间：2011-10-11T12:51:52.317

```
SELECT * FROM courses WHERE (NOW() + INTERVAL 2 HOUR) > start_time 
```

* * *

## 回答 #4

> 赞同：28
> 
> 时间：2009-02-26T08:35:26.790

DATE_ADD [()](http://dev.mysql.com/doc/refman/4.1/en/date-and-time-functions.html#function_date-add)函数可以解决问题。（如果您至少运行v4.1.1 ，您也可以使用[ADDTIME()函数。）](http://dev.mysql.com/doc/refman/4.1/en/date-and-time-functions.html#function_addtime)

对于您的查询，这将是：

```
SELECT * 
FROM courses 
WHERE DATE_ADD(now(), INTERVAL 2 HOUR) > start_time 
```

或者，

```
SELECT * 
FROM courses 
WHERE ADDTIME(now(), '02:00:00') > start_time 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-08-12T10:17:40.860

这也将起作用

```
SELECT NAME 
FROM GEO_LOCATION
WHERE MODIFY_ON BETWEEN SYSDATE() - INTERVAL 2 HOUR AND SYSDATE() 
```

# assembly - 在 gdb 中切换到汇编

> ID：589653
> 
> 赞同：38
> 
> 时间：2009-02-26T08:31:48.200
> 
> 标签：assembly, gdb

在 gdb 中调试 C 或 C++ 程序时，有什么方法可以切换到汇编？（假设所有源文件及其对应的汇编文件都可用）

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2010-01-06T19:15:40.030

您可以在 gdb 中切换到 asm 布局：

```
(gdb) layout asm 
```

请参阅[此处](http://sourceware.org/gdb/current/onlinedocs/gdb/TUI-Commands.html#TUI-Commands)了解更多信息。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2009-02-26T08:39:49.867

有一种方法可以反汇编一个函数或一段代码，这就是你所追求的吗？

执行此操作的命令将是`disassemble <function name>`或内存位置。

这是你指的吗？

```
(gdb) help disassemble
Disassemble a specified section of memory.
Default is the function surrounding the pc of the selected frame.
With a single argument, the function surrounding that address is dumped.
Two arguments are taken as a range of memory to dump. 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2009-10-28T20:07:24.123

在新的 gdb 版本 7.0 中，该`disassemble`命令可以采用一个新参数`/m`，使其发出混合的源代码和反汇编。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-02-26T08:45:42.427

使用 disas 命令可能会做你想做的事。

根据内部帮助，disas 命令执行以下操作：

```
Disassemble a specified section of memory.
Default is the function surrounding the pc of the selected frame.
With a single argument, the function surrounding that address is dumped.
Two arguments are taken as a range of memory to dump. 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-15T14:17:49.370

在 cgdb 的 googlegroup [https://groups.google.com/forum/?hl=de&fromgroups=#!topic/cgdb-users/E-jZCJiBAQQ中也提出了这个问题](https://groups.google.com/forum/?hl=de&fromgroups=#!topic/cgdb-users/E-jZCJiBAQQ)

虽然布局 asm 不起作用，但还没有答案

编辑：他们最近发布并告诉它是一个尚未实现的功能。（检查上面的链接）

# objective-c - 将 NSString 转换为 char 问题

> ID：589662
> 
> 赞同：9
> 
> 时间：2009-02-26T08:38:06.017
> 
> 标签：objective-c, iphone

我想将我的 NSString 转换为常量字符，代码如下所示：

```
NSString *date = @"12/9/2009";
char datechar = [date UTF8String]

NSLog(@"%@",datechar); 
```

但是它返回警告赋值从没有强制转换的指针中生成整数并且无法正确打印字符，有人可以告诉我问题是什么

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2009-02-26T08:43:21.373

尝试更多类似的东西：

```
NSString* date = @"12/9/2009";
char* datechar = [date UTF8String];
NSLog(@"%s", datechar); 
```

您需要使用 char* 而不是 char，并且必须使用 %s 而不是 %@ 打印 C 字符串（%@ 仅适用于 Objective-c id 类型）。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-02-26T08:44:04.227

我想你想使用：

```
const char *datechar = [date UTF8String]; 
```

（注意那里的*）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-09-18T10:19:33.160

您的代码有两个问题：

1) "char datechar..." 是一个单字符，它只能保存一个字符/字节，并且不会保存您从日期/字符串对象生成的整个数组。因此，您的行应该在变量前面有一个 (*) 来存储多个字符，而不仅仅是一个字符。

2) 在上述修复之后，您仍然会收到关于 (char *) 与 (const char *) 的警告，因此，您需要“强制转换”，因为它们在技术上是相同的结果。更改以下行：

`char datechar = [date UTF8String];`

进入

`char *datechar = (char *)[date UTF8String];`

注意 = 符号后的 (char *)，告诉编译器该表达式将返回一个 (char *) 而不是它的默认值 (const char *)。

我知道您之前已经标记了答案，但是我想我可以帮助解释这些问题以及如何更详细地解决问题。

我希望这有帮助。

亲切的问候海德

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-02-26T08:43:00.110

我会在 char 和 datechar 之间添加一个 *（以及一个 %s 而不是 %@）：

```
NSString *date=@"12/9/2009"; char * datechar=[date UTF8String];
NSLog(@"%s",datechar); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-09-23T11:00:59.127

`NSString`我为转换为`char`用于此功能而苦苦挣扎了很长时间

```
-(void)gpSendDTMF:(char) digit callID: (int)cid; 
```

我已经尝试了这个问题的每一个答案/谷歌搜索的很多东西，但它对我不起作用。

最后我得到了解决方案。

* * *

**解决方案：**

```
NSString *digit = @"5";

char dtmf;

char buf[2];

sprintf(buf, "%d", [digit integerValue]);

dtmf = buf[0]; 
```

# biztalk - Biztalk：消息可以选择要处理的编排吗？

> ID：589663
> 
> 赞同：1
> 
> 时间：2009-02-26T08:38:08.793
> 
> 标签：biztalk

消息能否在他想要处理的编排的“旧”或“最新”版本之间进行选择？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-02-26T14:41:25.787

如果您在谈论 GAC 中的 DLL 版本，我认为这是不可能的。但是，如果您维护两个单独的编排，则可以使用提升的属性将消息路由到适当的编排。如果它比这更复杂，您可以为消息类型设置一个接收编排，它可以根据您可以编码到其中的任何标准调用适当的编排。这仍然是决定他们要运行哪些消息的发送端口组。另一种方法是动态发送端口。这确实使您可以自由地将消息的方向移动到编排/应用程序本身。

Microsoft ESB 2.0 指南对行程有一些广泛的想法，据我了解，这是包含特定处理步骤的消息的概念。我还在消化这个，但它可能是值得一看的。

# rad - RAD 网络服务生成器和 *_Deser.java、*_Ser.java

> ID：589664
> 
> 赞同：1
> 
> 时间：2009-02-26T08:38:15.363
> 
> 标签：rad

当我在 RAD 中从我的 DAO 生成 web 服务时，它会创建一个 Helper.java、Deser.java 和 Ser.java 类。然后，当我将此代码放入我的 CVS(Clearcase) 时，我注意到这些文件在调用我的服务时被劫持。

有没有办法避免使用这些生成的类？谢谢

我拥有的服务方法返回自定义对象数组。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-29T15:36:23.093

通常，这些文件不应添加到源代码管理中，因为它们是在运行时生成的。应该添加到源的唯一文件是输入/输出/代理/soap 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T01:11:07.170

你问是否有办法避免它们。是的。停止使用 JAX-RPC 并改用 JAX-WS 2.0。

# regex - 每隔一秒匹配一次

> ID：589667
> 
> 赞同：57
> 
> 时间：2009-02-26T08:41:29.397
> 
> 标签：regex

有没有办法指定一个正则表达式来匹配字符串中每第二次出现的模式？

例子

*   搜索反对字符串**abcdabcd**应该在位置 5 找到一个匹配**项**
***   针对字符串**abcdabcd**搜索**ab**应该在位置 5 找到一个匹配项***   针对字符串**abcdabcd**搜索**dab**应该找不到任何事件***   搜索反对字符串**aaaa应该****在**位置 2 和 4 找到两个匹配项******

 ******* * *

## 回答 #1

> 赞同：70
> 
> 时间：2009-02-26T08:51:33.473

使用分组。

```
foo.*?(foo) 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2009-02-26T08:51:02.850

假设你想要的模式是 abc+d。您想匹配字符串中此模式的第二次出现。

您将构建以下正则表达式：

```
abc+d.*?(abc+d) 
```

这将匹配以下形式的字符串： `<your-pattern>...<your-pattern>`。因为我们使用了不情愿的限定符 *? 我们很安全，两者之间不会有另一场比赛。使用几乎所有正则表达式实现都提供的匹配器组，然后您将检索括号组中的字符串，这是您想要的。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-02-26T08:50:29.840

会像

```
(pattern.*?(pattern))* 
```

为你工作？

编辑：

这样做的问题是它使用了非贪婪运算符`*?`，这可能需要沿着字符串进行大量回溯，而不是只查看每个字母一次。这对您意味着，对于较大的差距，这可能会很慢。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2009-02-26T10:06:06.663

如果您使用的是 C#，您可以一次获取所有匹配项（即 use `Regex.Matches()`，它返回 a `MatchCollection`，然后检查项目的索引：`index % 2 != 0`）。

如果您想找到替换它的事件，请使用`Regex.Replace()`使用 a的重载之一`MatchEvaluator`（例如`Regex.Replace(String, String, MatchEvaluator)`。这是代码：

```
using System;
using System.Collections.Generic;
using System.Text;
using System.Text.RegularExpressions;

namespace ConsoleApplication1
{
    class Program
    {
        static void Main(string[] args)
        {
            string input = "abcdabcd";

            // Replace *second* a with m

            string replacedString = Regex.Replace(
                input,
                "a",
                new SecondOccuranceFinder("m").MatchEvaluator);

            Console.WriteLine(replacedString);
            Console.Read();

        }

        class SecondOccuranceFinder
        {
            public SecondOccuranceFinder(string replaceWith)
            {
                _replaceWith = replaceWith;
                _matchEvaluator = new MatchEvaluator(IsSecondOccurance);
            }

            private string _replaceWith;

            private MatchEvaluator _matchEvaluator;
            public MatchEvaluator MatchEvaluator
            {
                get
                {
                    return _matchEvaluator;
                }
            }

            private int _matchIndex;
            public string IsSecondOccurance(Match m)
            {
                _matchIndex++;
                if (_matchIndex % 2 == 0)
                    return _replaceWith;
                else
                    return m.Value;
            }
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-02-26T13:17:20.217

反向引用可以在这里找到有趣的解决方案。这个正则表达式：

```
([a-z]+).*(\1) 
```

将找到最长的重复序列。

这将找到重复的 3 个字母序列：

```
([a-z]{3}).*(\1) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-02-26T08:53:19.633

没有这样做的“直接”方式，但您可以指定模式两次：`a[^a]*a`匹配第二个“a”。

另一种方法是使用您的编程语言（perl？C#？...）来匹配第一个出现然后是第二个。

**编辑**：我已经看到其他使用“非贪婪”运算符的响应，这可能是一个好方法，假设你的正则表达式库中有它们！

# dns - 如何将不同的子域请求重定向到不同的服务器

> ID：589669
> 
> 赞同：2
> 
> 时间：2009-02-26T08:42:36.163
> 
> 标签：dns, cross-domain, apache-config

在我的域下，其中一个子域必须定向到托管相关应用程序的一台服务器，其余子域必须定向到托管相关应用程序的另一台服务器。

因此，对 url 的任何请求都`appa.example.com\*`必须定向到一个服务器，对 url 的任何请求都`appb.example.com\*`必须定向到另一台服务器。

现在的问题是如何在两台服务器上配置 Apache 配置——也许使用像 ProxyPass 或 ProxyPassReverse 这样的配置，以便它们所有传入的请求都可以正确地定向到正确的服务器？

**编辑以使问题更清楚。**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-02-26T08:48:30.110

将 URL 链接到 IP（服务器）的位置是 DNS。

例如，如果服务器 A 位于 1.2.3.4，服务器 B 位于 5.6.7.8，则将 appa.example.com 链接到 1.2.3.4，将 appb.example.com 链接到 5.6.7.8。

但是，如果两台服务器都在防火墙后面（使用单个外部 IP 地址），则您必须执行一些技巧。（您可能正在寻找这些技巧）。

看看[An Introduction to Redirecting URLs on an Apache Server](http://www.webmasterworld.com/forum92/82.htm)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-07-24T03:33:37.683

我为我的工作场所（大学）做了同样的事情。我们的主要网站托管在其他地方，但该网站的一部分（学生注册系统）托管在现场。

我所做的是创建一个权威**(A)** DNS 记录 (reg.domain.com) 并使其指向我们现场服务器的**IP**。那成功了！

这是来自我的域 CP 的相同屏幕截图（由于明显的原因，域和 IP 被屏蔽）... [alt text http://img443.imageshack.us/img443/5069/stiuaregrecord.jpg](http://img443.imageshack.us/img443/5069/stiuaregrecord.jpg)

它本质上与您尝试做的事情相同。试一试，看看:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T14:50:03.617

在预期子域的父域的 DNS 记录/管理器中：

*   将子域名指向要成为主机服务器的IP地址，然后...

... 然后 ...

在主机服务器 DNS 和/或服务器软件配置中：将子域定向到网站应用程序。您可以通过以下方式之一实现这一点： -

*   手动编辑 DNS 记录，
*   停放子域并将其指向网站文档根文件夹，或
*   添加域和子域（域将永远不会被使用，因为它没有指向适用的服务器）。将它们都指向您现在子域（如果有这样的词）网站应用程序的文档根目录

# sqlite - 不同机器上的应用程序访问时的 SQLite 同步

> ID：589675
> 
> 赞同：3
> 
> 时间：2009-02-26T08:43:38.173
> 
> 标签：sqlite, synchronization, locking

我想知道 SQLite 如何实现它。它基于文件锁定吗？当然，并不是每个访问它的用户都锁定了整个数据库。那将是非常低效的。它是基于多个文件还是仅基于一个大文件？

如果有人能简要概述一下 sqlite 是如何完成同步和锁定的，或者，当然，提供一个链接，那就太好了。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-02-26T08:52:55.607

查看[SQL Lite 常见问题解答](http://www.sqlite.org/faq.html#q5)和[关于锁定的内容。](http://www.sqlite.org/lockingv3.html)希望这可以帮助。

# .net - Invoke for GUI 操作需要哪些语言/平台？

> ID：589680
> 
> 赞同：0
> 
> 时间：2009-02-26T08:45:22.100
> 
> 标签：.net, multithreading, user-interface, invoke

我知道在 .NET 中，需要使用 Control.Invoke(delegate) 对控件执行操作。这让我想知道在哪些环境中实际上需要调用。据我所知，在 Visual Basic 和 Pascal 等旧版本中不需要它。特别是 Java（可能与版本有关？）和“旧式”Windows GUI 编程（手动读取消息队列）的状态如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-26T08:55:25.557

你误会了。Control.Invoke 不需要对控件执行操作。

Control.Invoke 是帮助跨线程边界编组代码的有用工具，但它不是唯一的方法。当你在后台线程中做一些工作时，你会看到这个最常用的。

当您从必须更新 Windowed 控件（即具有 Windows 窗口句柄并通过消息泵处理消息的控件）的后台线程调用代码、更改其属性或对控件进行一些其他操作时，您必须传递控制权到 MessagePump 线程，而 Control.Invoke 是实现这一点的有用方法。

在Windows 下运行的*所有*程序中，您不能调用在后台线程上更新控件的函数。一些语言可能会在后台处理这个细节，但我不知道有什么能做的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-26T08:57:22.307

在大多数语言中，调用 GUI 操作是必要的。在 Java 中有[SwingUtilities.invokeLater](http://java.sun.com/j2se/1.4.2/docs/api/javax/swing/SwingUtilities.html#invokeLater(java.lang.Runnable))。实际上，如果使用多个线程，则在任何环境中都需要这样的方法。原因是主 UI 线程运行了一个事件通知机制。能够与此机制交互的第二个线程需要以某种方式与之同步。

这些调用方法实际上是为开发人员提供便利。在不存在的平台中，这并不意味着允许从不同的线程访问 UI 项。这可能只是意味着开发人员应该实现一个自定义机制（发送事件）来这样做。UI 代码很少是线程安全的。我使用过许多平台和技术，并且始终遵循这条规则：仅从单个线程触摸 UI。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-26T09:09:16.940

Invoke 只是 Win32 API PostMessage 的包装器。只有拥有窗口的线程才被允许访问该窗口。这是可以追溯到 Windows 单线程时的遗留问题。这意味着无论您使用什么（VB6、Delphi、.NET 或其他），PostMessage 都是在 Windows 上访问真实窗口的正确方法，但是不同的编程语言提供了包装器，使我们的生活更轻松。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-02-26T08:54:57.133

实际上，不。仅当您的 GUI 运行超过 1 个线程时才需要它。对于 WinForm（和 WPF）应用程序，GUI 在单线程 STA 线程上运行（这可以追溯到 COM，不要问我为什么会这样，因为我真的不知道）。

如果您尝试从不同的线程调用在 STA 线程上创建的对象，则会进行检查以确保引发异常。WPF 也是如此，但 WPF 使它更加优雅。

无论如何，您实际上可以检查何时需要调用，因为有一个属性。建议使用此模式来帮助处理 WinForm 应用程序中的多个线程。

```
public void MyTextSetMethod(string text)
{
    if(control.InvokeRequired)
    {
        control.Invoke(new Action<string>(MyTextSetMethod), text);
    }
    else
    {
        control.Text = text;
    }
} 
```

上面的代码提供了一个全方位的方法来设置 Text 属性，您可以根据自己的需要进行调整。

# apache-flex - 使用 AS3 读取简单的 INI 文件

> ID：589688
> 
> 赞同：6
> 
> 时间：2009-02-26T08:49:04.603
> 
> 标签：apache-flex, actionscript-3, actionscript, flex3

我应该使用什么 AS3 类将简单的属性/ini 文件读入内存，以便为项目轻松配置一些设置，例如颜色。

格式可以是

```
key=value <newline> 
```

我喜欢用这种 API 来访问它：trace ( Settings.get("key") )

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-02-26T09:01:50.720

在 AS3 中没有内置的方法来执行此操作，但我们支持在 Spring ActionScript 中加载和解析属性文件。

以下是来源的直接链接：

*   [特性](https://fisheye.springframework.org/browse/~raw,r=184/se-springactionscript-as/spring-actionscript/trunk/core/src/main/actionscript/org/springextensions/actionscript/collections/Properties.as)
*   [PropertiesParser](https://fisheye.springframework.org/browse/~raw,r=163/se-springactionscript-as/spring-actionscript/trunk/core/src/main/actionscript/org/springextensions/actionscript/collections/PropertiesParser.as)（在 Properties 内部使用）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-02-26T10:08:48.610

我可以自由选择你的格式 XML 在 actionscript3 中很容易处理，对于超级简单的配置文件可能并不完美，但是一旦你进入它就**非常**容易处理。

这个页面看起来有一个合理的概述：[http ://dispatchevent.org/roger/as3-e4x-rundown/](http://dispatchevent.org/roger/as3-e4x-rundown/)

# vim - 如何在 GNU Emacs 中模拟 Vim 的 * 搜索？

> ID：589691
> 
> 赞同：33
> 
> 时间：2009-02-26T08:49:36.257
> 
> 标签：vim, emacs, elisp, dot-emacs

在 Vim 中，正常模式下的 * 键搜索光标下的单词。在 GNU Emacs 中，最接近的原生等价物是：

```
C-s C-w 
```

但这不完全一样。它打开增量搜索迷你缓冲区并从当前缓冲区中的光标复制到单词的末尾。在 Vim 中，您会搜索整个单词，即使您在按 * 时位于单词的中间。

我已经做了一些 elisp 来做类似的事情：

```
(defun find-word-under-cursor (arg)
  (interactive "p")
  (if (looking-at "\\<") () (re-search-backward "\\<" (point-min)))
  (isearch-forward)) 
```

在启动 isearch 之前，它会倒退到单词的开头。我已经将它绑定到 C-+，它很容易在我的键盘上键入并且类似于 *，所以当我键入`C-+ C-w`它时，它会从单词的开头复制到搜索迷你缓冲区。

然而，这仍然不完美。理想情况下，它会正则表达式搜索`"\<" word "\>"`不显示部分匹配（搜索单词“bar”不应该匹配“foobar”，只匹配“bar”）。我尝试使用 search-forward-regexp 和 concat'ing \<> 但这不会包含在文件中，不会突出显示匹配项并且通常很蹩脚。isearch-* 函数似乎是最好的选择，但这些函数在编写脚本时表现不佳。

有任何想法吗？任何人都可以对 elisp 提供任何改进吗？还是有其他我忽略的方法？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2009-02-26T15:07:01.857

根据您对我的第一个答案的反馈，这个怎么样：

```
(defun my-isearch-word-at-point ()
  (interactive)
  (call-interactively 'isearch-forward-regexp))

(defun my-isearch-yank-word-hook ()
  (when (equal this-command 'my-isearch-word-at-point)
    (let ((string (concat "\\<"
                          (buffer-substring-no-properties
                           (progn (skip-syntax-backward "w_") (point))
                           (progn (skip-syntax-forward "w_") (point)))
                          "\\>")))
      (if (and isearch-case-fold-search
               (eq 'not-yanks search-upper-case))
          (setq string (downcase string)))
      (setq isearch-string string
            isearch-message
            (concat isearch-message
                    (mapconcat 'isearch-text-char-description
                               string ""))
            isearch-yank-flag t)
      (isearch-search-and-update))))

(add-hook 'isearch-mode-hook 'my-isearch-yank-word-hook) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2011-06-11T05:55:23.010

[高亮符号](http://nschum.de/src/emacs/highlight-symbol/)emacs 扩展提供了这个功能。特别是，推荐的`.emacsrc`设置：

```
(require 'highlight-symbol)

(global-set-key [(control f3)] 'highlight-symbol-at-point)
(global-set-key [f3] 'highlight-symbol-next)
(global-set-key [(shift f3)] 'highlight-symbol-prev) 
```

允许跳到当前点的下一个符号 (F3)、跳到上一个符号 (Shift+F3) 或突出显示与光标下的符号匹配的符号 (Ctrl+F3)。如果您的光标位于单词中间，这些命令将继续执行正确的操作。

与 vim 的超级明星不同，高亮符号和符号之间的跳转绑定了两个不同的命令。我个人不介意这种分离，但如果你想精确匹配 vim 的行为，你可以将这两个命令绑定在同一个击键下。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-02-26T12:41:43.530

有很多方法可以做到这一点：

[http://www.emacswiki.org/emacs/SearchAtPoint](http://www.emacswiki.org/emacs/SearchAtPoint)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-09-02T19:19:07.090

scottfrazer 的答案对我来说效果很好，除了以 '_' 结尾的单词（或者可能是其他非单词字符？）。我发现轻符号模式的代码根据 emacs 的版本对单词边界使用了不同的正则表达式，这对我来说是固定的。这是修改后的代码：

```
(defconst my-isearch-rx-start
  (if (< emacs-major-version 22)
      "\\<"
    "\\_<")
  "Start-of-symbol regular expression marker.")

(defconst my-isearch-rx-end
  (if (< emacs-major-version 22)
      "\\>"
    "\\_>")
  "End-of-symbol regular expression marker.")

(defun my-isearch-word-at-point ()
  (interactive)
  (call-interactively 'isearch-forward-regexp))

(defun my-isearch-yank-word-hook ()
  (when (equal this-command 'my-isearch-word-at-point)
    (let ((string (concat my-isearch-rx-start
                          (buffer-substring-no-properties
                           (progn (skip-syntax-backward "w_") (point))
                           (progn (skip-syntax-forward "w_") (point)))
                          my-isearch-rx-end)))
      (if (and isearch-case-fold-search
               (eq 'not-yanks search-upper-case))
          (setq string (downcase string)))
      (setq isearch-string string
            isearch-message
            (concat isearch-message
                    (mapconcat 'isearch-text-char-description
                               string ""))
            isearch-yank-flag t)
      (isearch-search-and-update))))

(add-hook 'isearch-mode-hook 'my-isearch-yank-word-hook) 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2010-05-11T18:49:57.453

内置命令 Mb Cs Cw 怎么样（单词开头，搜索，单词搜索）

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-11-05T09:02:59.957

[Mastering Emacs](http://www.masteringemacs.org/articles/2013/10/31/smart-scan-jump-symbols-buffer/)博客的Mickey重新引入了一个很酷的“ [Smart Scan](https://github.com/mickeynp/smart-scan/blob/master/smartscan.el) ”库，它提供了全局绑定`M-n`和`M-p`用于在缓冲区中的光标下导航符号。不影响搜索寄存器，因此它不是原样的`*`替代品，而是导航问题的聪明且可用的替代品。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-02-26T09:14:03.013

我还没有尝试过，但是这里有一些代码[叫做](http://www.emacswiki.org/emacs/GrepMode#toc13)Grep-O-Matic。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-02-26T09:30:17.313

有了这个，您应该能够在 isearch 模式下执行 C-*。

```
（定义键 isearch-mode-map [?\C-*] 'kmk-isearch-yank-thing）

(defun kmk-isearch-yank-thing ()
  “将下一件事从缓冲区拉到搜索字符串中。”
  （交互的）
  (let ((string (regexp-quote (thing-at-point 'word))))
    (setq isearch-string
      （连接 isearch 字符串“\\”）
      isearch 消息
      （连接 isearch 消息
          (mapconcat 'isearch-text-char-description
                 细绳 ””））
      ;; 不要在反向搜索中移动光标。
      isearch-yank-flag t))
  (setq isearch-regexp t isearch-word nil isearch-success t isearch-adjusted t)
  (isearch-搜索和更新))

```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2010-01-24T21:59:32.710

```
;这是我的版本：模拟 Visual Studio/Windows 键绑定
; C-F3 - 开始搜索该点的单词
; F3 向前搜索，Shift F3 向后搜索

(setq my-search-wrap nil)

(defun my-search-func (dir)
  （交互的）
  (let* ((text (car search-ring)) newpoint)
        （当我的搜索换行  
             (goto-char (if (= dir 1) (point-min) (point-max)))
             (setq my-search-wrap nil))
        (setq newpoint (search-forward text nil t dir))
        （如果新点
          (set-mark (if (= dir 1) (- newpoint (length text))
                         (+ newpoint (长度文本))))
          （消息“搜索失败：%s”文本）（叮）
          (setq my-search-wrap 文本))))

(defun my-search-fwd () (交互式) (my-search-func 1))
(defun my-search-bwd () (交互式) (my-search-func -1))

(defun yank-thing-into-search ()
   （交互的）
   （让（（文本（如果标记激活
          （缓冲区子字符串无属性（区域开始）（区域结束））
                 （或（当前词）“”））））
     (when (> (length text) 0) (isearch-update-ring text) (setq my-search-wrap nil)
            （我的搜索转发））））
(global-set-key (kbd "") 'my-search-fwd) ; Visual Studio 之类的搜索键
(global-set-key (kbd "") 'my-search-bwd)
(global-set-key (kbd "") 'yank-thing-into-search)

```

# asp.net - 多列数据表计算函数

> ID：589694
> 
> 赞同：0
> 
> 时间：2009-02-26T08:50:24.973
> 
> 标签：asp.net, datatable

我想计算数据表中每列的非空值数量。我可以遍历列并在每列上使用计算函数，但我想知道是否有更有效的方法来做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-26T08:53:19.257

您可以添加一个带有检查其余列是否为空的表达式的列，请参阅[http://msdn.microsoft.com/en-us/library/system.data.datacolumn.expression(VS.80).aspx](http://msdn.microsoft.com/en-us/library/system.data.datacolumn.expression(VS.80).aspx) 然后您可以在该列上计算。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-26T09:03:19.327

我认为 Compute 功能在这种情况下非常合适。您可以使用类似于以下的代码：

```
For Each col as DataColumn in myTable
  Dim aggExpr as string = string.format("Count{0}", col.ColumnName)
  Dim filterExpr as string = string.format("{0} IS NULL", col.ColumnName)
  Dim myCount as integer = CInt(myTable.Compute(aggExpr, filterExpr))
  Console.WriteLine(myCount)
Next 
```

*（在这里输入，注意语法）*

请注意，我说的是“类似于以下内容”。请添加适当的错误/空值检查。

# javascript - 如何正确处理 Firefox 中的左右单击

> ID：589698
> 
> 赞同：3
> 
> 时间：2009-02-26T08:51:20.777
> 
> 标签：javascript, jquery, firefox, click, right-click

我正在开发一个网络应用程序，我希望在其中对元素进行不同的操作，无论我是左键还是右键单击它。

所以我首先添加了一个函数来`click`使用 jQuery 处理事件，然后添加了第二个函数来处理`oncontextmenu`我的元素的属性。

这在 Chrome 和 IE 中运行良好，但在 Firefox 中会导致问题：当我右键单击一个元素时，我处理左键单击的函数被意外调用，*然后*我处理右键单击的函数被调用。

如何让Firefox在我右键单击时不调用左键功能？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-02-26T09:09:36.347

是的，浏览器传统上将右键单击发送到 onclick 处理程序，其中[event.which](http://docs.sun.com/source/816-6408-10/event.htm#1200787)属性设置为 3 而不是 1。IE 使用 oncontextmenu 代替，然后 Firefox 除了通常的 onclick 之外还选择了 oncontextmenu。为了满足浏览器的需求，您必须同时捕获这两个事件——或者找到一个可以为您完成这件事的插件。

请注意，即使解决了这个问题，您仍然不能保证获得右键单击事件或能够禁用标准上下文菜单。由于许多网页滥用了该功能，它在许多浏览器中被禁用，有时默认禁用（例如在 Opera 中）。如果您的应用程序提供右键单击操作，请始终确保有另一种方式来启动它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-26T11:24:56.693

我的问题来自这样一个事实，一方面我使用了非常棒的 jQuery`live`函数，另一方面我使用`click`了`oncontextmenu`属性。（使用`onclick`and`oncontextmenu`不是问题）。

我刚刚通过捕获事件而不是在is`$.live("click"...)`时触发其余事件来修改我的函数。`e.which``3`

问题解决了！

# iphone - 在横向模式下使用 Interface Builder 进行编程

> ID：589711
> 
> 赞同：3
> 
> 时间：2009-02-26T08:55:34.150
> 
> 标签：iphone, xcode, cocoa-touch, interface-builder

我想在横向模式下使用 Interface Builder 设计一个应用程序。我不知道如何设置适合横向模式的控件。我只知道我正在使用 self.transform 旋转我的 UIView。我是新来的。所以任何人都可以帮助我。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-02-26T18:43:49.197

不确定这是否回答了您的问题，但您可以通过单击右上角的箭头旋转 IB 中的视图以横向显示

查看图片 [IB 景观](http://www.quicksnapper.com/nduplessis/image/untitled-0000)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-01-26T00:37:17.747

我意识到这有点旧，但在 Xcode4+ 中我看不到任何旋转箭头。因此，请打开您的 .xib > 转到模拟指标 > 方向 > 横向。像这样：

![在此处输入图像描述](https://i.stack.imgur.com/NAHsL.png)

如果您看不到 Simulated Metrics 选项，请确保在对象层次结构中选择了您的视图：

![在此处输入图像描述](https://i.stack.imgur.com/CyDma.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-26T10:24:43.483

简短的回答是（据我所知）目前没有简单的方法可以做到这一点：

[处理 IB 中横向/纵向差异的最佳方法是什么？](https://stackoverflow.com/questions/185463/whats-the-best-way-to-handle-landscape-portrait-differences-in-ib)

# visual-sourcesafe - 用于练习的 Visual Sourcesafe 服务器

> ID：589715
> 
> 赞同：3
> 
> 时间：2009-02-26T08:57:01.527
> 
> 标签：visual-sourcesafe

我是否有一个 Visual SourceSafe 服务器在某个地方运行，我可以连接到该服务器进行练习？在购买 VSS 服务器之前，我有几件事想测试，但我不想下载整个应用程序进行测试。

最好的祝福

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-02-26T08:59:21.660

简短的回答：节省您的时间，不要购买。使用 SVN、git，或者如果您都喜欢 ms 解决方案，则使用 Team Foundation Server。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-02-26T09:17:46.610

有很多人喜欢讨厌 VSS，老实说，我不能责怪他们（很多）。VSS 以不稳定、易损坏和特殊而著称。在某些情况下，这种声誉是当之无愧的，在其他情况下，这是管理不当、行政管理不当或工作选择不当的情况。

VSS 不是适合所有人的工具，但对于很多人来说它是一个足够的工具，并且它与 Visual Studio 的集成非常好。

如今的 VSS 相当稳定，但您不想在不稳定的网络上使用它（除非您使用基于 HTTP 的服务器方法），因为它会损坏文件。它应该只在可靠的现场网络中使用基于文件的版本控制。如果你要做任何异地矿石分布式开发，那么你需要使用HTTP模型，或者选择不同的产品。

VSS 有一些怪癖。分支并不像大多数人想要的那样工作。这不一定是 VSS 的错，因为它的设计目的与当时的其他版本控制略有不同（请记住，它是 20 年前的产品）。选择它的人，期望它的工作方式与它的设计不同，因为他们选择了错误的工具来完成这项工作。

我已经在怪物大小的存储库中成功使用了 VSS。关键之一是您需要定期对其运行分析和修复工具，以防止潜在问题成为破坏性问题。

您也不想在任何需要安全性的情况下使用 VSS，因为 VSS 的安全性是基于应用程序的。由于您需要直接的文件读/写访问权限，因此任何人都可以进入文件并根据需要手动摆弄它们。同样，如果您使用的是 HTTP 服务器组件，情况会有所不同。（不管怎样，这和那个时代的很多版本控制类似，比如RCS和SCCS，所以不是没听说过）

现在，说了这么多，回答你的问题，如果你有对 VSS 的下载访问权限（例如通过 MSDN），只需下载它.. 它不是那么大。它只有 100MB。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2010-04-15T16:01:41.257

如果您必须实施源代码控制系统。从 SVN 或 Git 开始，放下手。看看 VisualSvn 服务器与 AnkhSvn 和 TortoiseSvn 的客户端工具。它们都是免费的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-02-26T09:02:59.250

试试 Accurev (www.accurev.com) 或 Perforce (www.perforce.com) 或 PlasticSCM (www.plasticscm.com)

# javascript - 在javascript中输入空格时如何更改文本的颜色

> ID：589717
> 
> 赞同：0
> 
> 时间：2009-02-26T08:57:27.547
> 
> 标签：javascript

我正在做拼写检查应用程序。我想在输入空格后更改文本的颜色。我听错了这个词。现在我想如何更改文本框中该文本的颜色。使用 JavaScript。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-02-26T09:02:01.093

JavaScript 可以很容易地修改 CSS。请检查我的示例：

```
<input type="text" value="123" id="text1"/>
<script type="text/javascript">
document.getElementById("text1").style.color = "green";
</script> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-02-26T09:19:42.517

或者使用一些库，如 JQuery。使用 JQuery，很简单。

有

```
<input name="my-text" type="text" id="my-text"> 
```

捕捉按键按下事件

```
$("input#my-text").keydown(function(event)
{
   switch (event.keyCode) {
      // space
      case 32: $(this).css("color","#f00"); //or set any other property
         break;
   }
} 
```

如果要突出显示单个单词，则需要将其包装到 span 中并仅为该元素更改属性。

是的，要突出显示一个单词，您需要使用段落。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-26T09:11:09.213

我认为您不能仅更改**textarea**中单词的颜色。

但是，如果您只想在文本输入中更改文本的颜色，那么 rea_andrew 概述的方法就足够了。做一个

```
document.getElementById("textboxid").style.color = "green"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-02-26T13:25:22.160

您基本上需要做同样的事情 TinyMCE 和朋友在 textarea 之上构建更丰富的编辑器。使用预制库为您执行此操作要好得多。它比仅仅改变颜色要复杂得多，因为你需要在它下面构建一个完整的编辑器。

# java - 将 Java 枚举序列化为 XML 的最佳实践是什么？

> ID：589732
> 
> 赞同：3
> 
> 时间：2009-02-26T09:05:01.600
> 
> 标签：java, xml, serialization, enums, persistence

嗨，我有一个 Java 枚举，我想从 XML 来回序列化一个包含枚举值的变量以实现持久性。我的枚举是这样定义的......

```
public enum e_Type
{
    e_Unknown,
    e_Categoric,
    e_Numeric
} 
```

我的变量是这样声明的......

```
private e_Type type; 
```

我希望它进入这样的 XML 标记...

```
<type>value</type> 
```

在 XML 中持久化枚举值的最佳实践是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-02-26T11:00:56.283

查看 JAXB 注释，它们是 JDK 的一部分：

```
public static void main(String[] args) throws Exception {
    JAXBContext context = JAXBContext.newInstance(Foo.class);
    StringWriter sw = new StringWriter();
    context.createMarshaller().marshal(new Foo(), sw);
    System.out.println(sw);
}

@XmlRootElement
public static class Foo {
    @XmlElement
    private e_Type type = e_Type.e_Unknown;
}

@XmlEnum
public enum e_Type {
    e_Unknown,
    e_Categoric,
    e_Numeric
} 
```

您可以进一步自定义输出，例如，如果您希望外部 XML 表示不同于内部 java 枚举项名称：

```
@XmlEnumValue("UNKNOWN")
e_Unknown 
```

顺便说一句：对 java 类/枚举使用大写名称是一个非常严格的约定

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-02-26T10:26:54.900

在收到关于 3rd 方库的回复后，我决定自己修复它，并认为我会发布我的解决方案，以防其他人需要看到它。我刚刚在枚举中添加了两个静态方法，它们负责来回发送到 XML 的内容......

```
public enum e_Type
{
    e_Unknown,
    e_Categoric,
    e_Numeric;
    public static e_Type type(String token)
    {
        return e_Type.valueOf(token);
    }
    public static String token(e_Type t)
    {
        return t.name();
    }
} 
```

这对我来说是一个好方法，因为这意味着我可以在序列化/反序列化期间使用 type() 和 token() 方法调用我的 getter 和 setter。我已将此扩展到我的所有枚举中。

我在使用 3rd 方库时遇到了两个主要问题：

1.  膨胀。这对我的小坚果来说是个大锤
2.  依赖。添加一个新的 3rd 方库意味着我必须通过许可和法律检查以及 ESCROW 等。对于 8 行代码来说真的不值得。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-02-26T09:08:29.097

尝试使用 XStream，它是一个将对象从 xml 转换为 xml 的库，并且也支持枚举。

```
String xml = xstream.toXML(enumObject); 
```

[http://x-stream.github.io/converters.html](http://x-stream.github.io/converters.html)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-02-26T09:25:01.147

另一个框架是类似于 C# XML 序列化的[简单 XML 序列化。](http://simple.sourceforge.net)它可以处理任何对象图，包括那些包含枚举的对象图。

```
Serializer serializer = new Persister();

persister.write(myObject, myOutput); 
```

枚举的序列化使用最终的 name() 方法，因此它们总是可以从 XML 中恢复。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2010-01-20T21:28:52.307

我喜欢第一种方法。对于这样一个简单的任务，不需要包含第三方库。但是，使序列化值 == 枚举常量字面量（即“e_Unknown”、“e_Categoric”、“e_Numeric”）意味着如果开发人员重命名变量名称，它会使存储的值不可读。例如，您将 e_Unknown 保存在 XML 中，稍后将常量重命名为 UNKNOWN（为了命名）。然后您将无法检索旧值。

另一种方法是为每个枚举分配一个业务值，并将业务值存储在数据库中，这样常量名称的重命名/重构就不会破坏旧的存储值。如果您需要更多说明，我已经在博客中讨论过这个问题：[3 methods to serialize Java Enums](http://www.vineetmanohar.com/2010/01/11/3-ways-to-serialize-java-enums/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-02-26T20:05:09.313

我会第二次投票给 JAXB 2，XStream 也不错。就其价值而言，Simple 看起来很像 XStream。另请注意，注释的使用是可选的——在大多数情况下，它可以找出自动使用的字段和/或方法。而且您根本不需要使用 XML 模式（如果您愿意，可以）：许多网站声称您这样做，但这是错误的（即使是简单页面也声称类似这样）。

至于外部依赖关系：如果您在 JDK 1.6 上运行，它会附带 JAXB 的捆绑实现（不仅仅是 API！）。虽然 JDK 可以避免它的臃肿（因为不是每个人都需要它，所以那些需要它的人可以只是 d/l 它 IMO），如果您确实需要它，那就太好了。并且实现非常好，非常快（仅原始 XML 解析或写入速度的 50-70%）。

# c# - 用 LINQ 查询替换 foreach

> ID：589737
> 
> 赞同：3
> 
> 时间：2009-02-26T09:09:03.633
> 
> 标签：c#, .net, linq

我的一种方法中有以下代码：

```
foreach (var s in vars)
{
    foreach (var type in statusList)
    {
        if (type.Id == s)
        {
            Add(new NameValuePair(type.Id, type.Text));
            break;
        }
    }
} 
```

这对我来说似乎有点无效，我想知道是否有办法用 LINQ 查询替换至少一个 foreaches。有什么建议么？

**编辑：** vars 是一个字符串数组，Add 方法将一个项目添加到 CSLA NameValueList。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-02-26T09:19:38.990

基本上：

```
var types =
    from s in vars
    let type = (
        from tp in statusList
        where tp.Id == s ).FirstOrDefault()
    where type != null
    select new NameValuePair(type.Id, type.Text) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-02-26T09:20:56.023

编辑：我**之前****没有注意到`break;`**

如果具有相关 ID 的类型可能不止一种，那么您需要`FirstOrDefault`按照[Keith 的回答](https://stackoverflow.com/questions/589737/replacing-foreach-with-linq-query/589770#589770)或下面我的第二个代码示例使用。

编辑：删除“multi-from”版本，因为假设相等/哈希码适用于任何类型，它不必要地低效`type.Id`。

不过，连接可能更合适：

```
var query = from s in vars
            join type in statusList on s equals type.Id
            select new NameValuePair(type.Id, type.Text);

foreach (var pair in query)
{
    Add(pair);
} 
```

您可能想要创建一个`AddRange`方法，`IEnumerable<NameValuePair>`此时您可以调用`AddRange(query)`.

或者，您可以使用 LookUp。此版本确保每个“s”仅添加一种类型。

```
var lookup = types.ToLookup(type => type.Id);
foreach (var s in vars)
{
    var types = lookup[s];
    if (types != null)
    {
        var type = types.First(); // Guaranteed to be at least one entry
        Add(new NameValuePair(type.Id, type.Text));
    }
} 
```

这样做的好处是它基本上只遍历类型列表一次来构建字典。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-02-26T09:13:55.417

像这样的东西：

```
foreach(var s in vars) {
    var type = statusList.FirstOrDefault(t => t.Id == s);
    if (type != null)
        Add(new NameValuePair(type.Id, type.Text));
} 
```

或者，如果 vars 支持`ForEach`方法，这也可以（但我建议不要使用 overLINQifying）：

```
vars.ForEach(s => {
    var type = statusList.FirstOrDefault(t => t.Id == s);
    if (type != null)
       Add(new NameValuePair(type.Id, type.Text));
}); 
```

我假设`type`是引用类型的一个实例。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-02-26T09:21:08.333

如果您的 Add 方法正在构建一个列表，您也可以尝试：

```
IEnumarable<NamedValuePair> result = statusList.Where(type => type.Id == s).Select(new NameValuePair(type => type.Id, type.Text)); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-02-26T09:20:13.217

[Bart de Smet](http://bartdesmet.net/blogs/bart/archive/2008/02/26/the-missing-operator-foreach.aspx)实现了 IEnumerable 的扩展 ForEach。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-02-26T13:50:13.367

我没有看到群组加入的答案，所以这里有一个：

```
var result = vars
  .GroupJoin
  (
    statusList,
    s => s,
    type => type.Id,
    (s, g) => g.Any() ? g.First() : null
  )
  .Where(type => type != null)
  .Select(type => new NameValuePair(type.Id, type.Text)); 
```

# sql - 显示相册中的图像

> ID：589745
> 
> 赞同：1
> 
> 时间：2009-02-26T09:11:03.957
> 
> 标签：sql

我有一个网站，用户可以在其中创建相册，然后将图像添加到这些相册中。然后，我在页面上有一个部分，显示用户添加的所有图像。你可以在这里看到它：[http ://www.mojvideo.com/slike](http://www.mojvideo.com/slike)

问题是我们有一些用户一次上传了很多（20 到 100 张之间）图像，他们在前几页有点“垃圾邮件”（特别是因为有些图像几乎相同）。我现在正在努力寻找一种更好的方式来显示这些图像，以便显示来自更多用户的内容。我的数据库结构如下所示：

照片专辑：id | 标题 | 用户身份

foto_images: id | foto_albums_id（参考图片所在的专辑）| 用户 ID | 标题

（user_id 在 foto_images 中重复的原因是我有一个未存储在数据库中的“特殊”个人相册，因此如果用户将图像上传到该相册，则 foto_albums_id 的值为 0，只是想我会提到这一点以避免任何混淆）

我正在寻找想法和一些帮助实施它们......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-26T09:17:14.427

为什么不把图片随机化？

[警告糟糕的表现！]像[ORDER BY RAND()](http://dev.mysql.com/doc/refman/5.1/de/mathematical-functions.html)之类的东西？[/WARNING]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-26T09:27:04.857

可怕的`is_private`专栏:)

我不知道是否有一种有效的方法可以在不向架构中添加一些额外列的情况下完成您正在寻找的事情。您可以为每个图像分配一个随机数，然后按此排序（比 快`ORDER BY RAND()`，因为它不是每次都计算的）。您可以添加一个上传时间戳，然后按（比如说）排序`seconds * 60 + hours`；虽然这看起来很奇怪，但它应该防止相同上传图像的聚类（假设解析图像至少需要 0.5 秒，考虑到当前的上传速度和图像文件大小，这是一个有点合理的假设）。您可以反转索引列（如字符串反转）并按此排序。

这些都没有从根本上改变这个概念，但是为了让它们快速工作，你需要改变你的模式。

您是否考虑过修改您的演示文稿？也许是用户最近（最高 id？）图像的样本，然后是必要的“阅读更多信息”。就像是：

```
[img_1/kyle] [img_2/kyle] [img_3/kyle] “查看所有凯尔的 50 像素”
[img_1/jan] [img_1/soulmerge] [img_2/soulmerge] [img_1/jason]
[img_2/jason] [img_3/jason] “查看 Jason 的所有 72 像素”

```

只是一个想法。

**编辑：**根据您的评论，如果您想按专辑显示最新的，那么它高度依赖于数据库；我认为有些数据库使这变得容易，但 MySQL 绝对不会。这是实现此目的的方法示例（在 MySQL 5.0+ 中）：

```
SELECT
  i.id,
  i.user_id,
  i.title
FROM
  foto_images i,
  (
    SELECT
      foto_albums_id,
      MAX(id) AS image_id
    FROM foto_images
    WHERE foto_albums_id <> 0
    GROUP BY foto_albums_id
  ) tmp
WHERE
  i.foto_albums_id <> 0
  AND i.foto_albums_id = t.foto_albums_id
  AND (
    SELECT COUNT(*)
    FROM foto_image
    WHERE
      foto_albums_id = i.foto_albums_id
      AND id BETWEEN i.id AND t.image_id
  ) < @NUMBER_OF_PREVIEW_IMAGES_TO_SELECT
ORDER BY i.id; 
```

请注意，在某种程度上取决于您的索引和数据量，此查询可能非常低效。可能考虑将信息入库？`display_on_main_page`在上传终止时定义的额外列？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-26T14:24:44.717

我认为你需要澄清你的问题是什么，以及你希望完成什么，因为到目前为止所有的回应都是不可接受的。

你到底想发生什么？

现在到底发生了什么？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-02-26T09:19:31.533

问题只在首页吗？您可以在该页面上仅显示每个用户的最新几张图像，然后在他们的个人页面上使用`select top(x)`并显示所有用户图像吗？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-02-26T09:53:12.903

如果您确实想显示按上传时间排序的*所有*图像，并且不希望单个用户的图像在单个页面中占用太多空间，则需要限制允许他们上传的图像数量。当用户在过去 24 小时内已经上传了 X 张图片时，只需禁用上传链接（如果用户试图绕过该规则，还会显示“您在过去 24 小时内已经上传了 X 张图片”的警告）

# html - DIV 在表格单元格中拉伸到 100% 的高度

> ID：589754
> 
> 赞同：18
> 
> 时间：2009-02-26T09:14:59.970
> 
> 标签：html, css

我有以下布局：

4 个圆角背景和其中的两个面板（左面板和右面板）。

目前我实现的布局如下：

包含 9 个单元格的表格：

```
左上角 | | 右上角
                   |左格右格|
左下角| | 右下角

```

代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<body>
    <table id="content" width="100%" border="0" cellspacing="0" cellpadding="0">
        <tr>
            <td>
                <img src="corner1.jpg" /></td>
            <td>
            </td>
            <td>
                <img src="corner2.jpg" /></td>
        </tr>
        <tr>
            <td>
                &nbsp;</td>
            <td valign="top" height="100%">
                <div id="menu" style="float: left; width: 235px; height: 445px; background-color: #660000">
                    Menu
                </div>
                <div id="mainContent" style="float: left; margin-left: 10px; height: 100%; background-color: #888888">
                    Main Content
                </div>
            </td>
            <td>
            </td>
        </tr>
        <tr>
            <td>
                <img src="corner3.jpg" /></td>
            <td>
            </td>
            <td>
                <img src="corner4.jpg" /></td>
        </tr>
    </table>
</body>
</html> 
```

我想问的是如何将右 div 的高度拉伸到**100%**，使其等于 td 的高度（左 div 的高度会根据用户的操作而增加）。

我尝试了很多方法，但仍然无法弄清楚。将 div 的高度设置为**100%**不起作用。

我应该怎么做才能实现这一目标？不使用表？

PS：

代码已更改。您可以将代码粘贴到记事本中并在**IE**中进行测试。

再次编辑代码以添加**DOCTYPE**。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-02-26T10:17:19.353

鉴于您已经有了用于布局的表格，因此我不会真正费心尝试以*“正确”*的方式进行操作。

只需使用另一张桌子。
CSS

```
 <style type="text/css" media="screen">
        #menu {
            width:235px;
            height:445px;
            background-color:#660000

        }
        #mainContent {

            height:100%;
            width:auto;
            background-color:#888888
        }
        #container {
            width:100%;
        }
    </style> 
```

HTML

```
<table id="content" width="100%" border="0" cellspacing="0" cellpadding="0">
<tr>
    <td><img src="corner1.jpg"/></td>
    <td>&nbsp;</td>
    <td><img src="corner2.jpg"/></td>
</tr>
<tr>
    <td>&nbsp;</td>
    <td valign="top" style="padding:0px;">
        <table id="container" border="0" cellspacing="0" cellpadding="0">

            <tr>
                <td id="menu"><div>Menu</div></td>
                <td style="width:10px"></td>
                <td id="mainContent"><div>Main Content</div></td>

            </tr>
        </table>
    </td>
    <td>&nbsp;</td>
</tr>
<tr>
    <td><img src="corner3.jpg"/></td>
    <td>&nbsp;</td>
    <td><img src="corner4.jpg"/></td>
</tr>
</table> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-26T09:39:44.217

也许你可以在右边的 div 中添加一个 min-height 等于左边的高度值......它也许可以达到你想要的效果......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-26T09:47:41.983

您可以将 div 的位置设置为绝对位置，但当然您必须绝对定位它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2010-10-08T07:36:18.533

或者只使用跨度怎么样？

例如。

```
<table width="100%">
    <tr>
        <td style="height:540px; width:100%; background-color:green;">
           my name is earl!
        </td>
    </tr>

    <tr>
        <td style="height:540px; width:100%; background-color:yellow;">
            <span style="height:100%; display:inline-block; width: 100%; background-color:blue;">
                blinkers on!
            </span>
        </td>
    </tr>
</table> 
```

不要太担心表格元素中的 100%，而是看跨度。
跨度：

```
 <span style="height:100%; display:inline-block; width: 100%; background-color:blue;">
            blinkers on!
        </span> 
```

看到“显示：内联块”了吗？现在这是重要的部分..
我希望这会有所帮助..

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-02-26T09:58:19.523

我已经使用 jquery 和 animate 调用来设置 div 的高度，但您可以将动画速度设置为 0。

下面的示例是一些用于快速玩弄 2,3,5... 块设计的模型。Jquery animate 调用用于调整主要内容、侧边栏等的 div 的高度......但这可能有点超出您的要求。

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="Mock_2_ColGoldenRatio.aspx.cs" Inherits="ia._HtmlMocks.Mock_2_ColGoldenRatio" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" >
<head runat="server">
    <title></title>

    <style type="text/css" >

/*normalise*/
html, body, div, span, applet, object, iframe, h1, h2, h3, h4, h5, h6, p, blockquote, pre, a, abbr, acronym, address, big, cite, code, del, dfn, em, font, img, ins, kbd, q, s, samp, small, strike, strong, sub, sup, tt, var, b, u, i, center, dl, dt, dd, ol, ul, li, fieldset, form, label, legend, table, caption, tbody, tfoot, thead, tr, th, td {
margin:0;
padding:0;
font-size:100%;
font-style:normal ;
font-weight:normal;
border-collapse:collapse ;
border-spacing:0;
border:0;
border-width: 0px ;
text-align:left;
}
q:before,q:after
{
    content:'';
}

/*center everything using html container*/
html{
text-align: center ; 
}

/* wash with olive ; make body width max 976 px ; no margin ; relative position so other elements within */
body
{
background-color:Olive; 
width:976px; 
margin:0 auto ; 
text-align: left ; 
position: relative  ;
}

#HeaderEnc
{
background-color : Maroon ; 
}

#SearchEnc{
background-color: red ;
border-width: 0px ;
}

#MainBlogNav{
background-color:Yellow  ;
}

/* postion relative to normal flow */
#ContentEnc{
background-color: Teal  ;  
position: relative  ;
}

    #ContentSideBarA
    {
    position: absolute ; 
    background-color: #AAA ; 
    left: 62% ; 
    width: 38% ; 
    }

    #ContentMainEnc{
    position: absolute ; 
    background-color: #888; 
    left: 0% ; 
    width: 62% ; 
    }

    #ContentSideBarB{
    position:absolute ; 
    background-color : #AAA ; 
    left: 0% ; 
    width: 0px ; 
    }

    #FooterEnc{
    position: absolute ; 
    background-color: blue ; 
    left: 0 ; 
    width: 100% ; 
    }
</style>
</head>
<body>
    <div id="HeaderEnc">
    The quick brown fo jumped over the lazy dog. 
    <br />
    HeaderEnc
        <div id="SearchEnc">SearchEnc</div>        
        <div id="MainBlogNav">MainBlogNav</div>        
    </div> 

    <div id="ContentEnc">
        <div id="ContentMainEnc"><i>ContentMainEnc</i> : 
            <% Response.Write( GetContentBig()) ; %>
        </div> 

        <div id="ContentSideBarA"><i>ContentSideBarA</i> 
            <% Response.Write( GetContentSmall()) ; %>
        </div> 

        <div id="ContentSideBarB"><i>ContentSideBarB</i>
            <% /*Response.Write( GetContentMedium()) ;*/ %>
        </div>

        <i>ContentEnc-Start</i>
        <br />
        <br />
        <br />
        <br />
        <i>ContentEnc-Start</i>
    </div>
    <div id="FooterEnc" >FooterEnc</div> 

</body>
</html>

<script src="../../Scripts/jquery-1.3/jquery-1.3.1.js" type="text/javascript"></script>
<script  src="../../Scripts/plugins/dimensions_1.2/jquery.dimensions.js" type="text/javascript" ></script>
<!--<script  src="../../Scripts/Common/IaCommon.js" type="text/javascript" ></script>-->

<script  type="text/javascript" >

    /*
    * ia.common 0.1.0 
    *
    */

    var ia = {}
    ia: "0.1.0";

    // gets max settings from set of elements
    var getBoundaries = function(elements) {
        var maxHeight = 0;
        var maxTop = 0;
        var itemSelector = '';
        var itemHeight = 0;
        var itemPosition = {};
        var itemTop = 0;

        for (i = 0; i < elements.length; i++) {
            itemSelector = elements[i]
            itemHeight = $(itemSelector).height();
            itemPosition = $(itemSelector).position();
            itemTop = itemPosition.top;
            maxHeight = itemHeight > maxHeight ? itemHeight : maxHeight;
            maxTop = itemTop > maxTop ? itemTop : maxTop;
        }
        return { 'maxHeight': maxHeight, 'maxTop': maxTop };
    }

    // Rets truthy  ; used by property get/set public fns
    var SetIfOk = function(val) { return val; }

    // IaPage class
    var IaPage = function(objSpec) {
        // override default page object with defaults from caller
        var that = $.extend({
            'speedFooterAnimate': 3000
            , 'speedContentAnimate': 1000
        }, objSpec || {});

        // fn to move footer, ... to correct position : inmann clearing
        that.arrangePageStructure = function() {
            boundaries = getBoundaries(this.ContentElements);
            $(this.FooterEncSelector[0]).animate({ 'top': boundaries.maxTop + boundaries.maxHeight }, this.speedContentAnimate);
            $(this.ContentEncSelector[0]).animate({ 'height': boundaries.maxHeight }, this.speedFooterAnimate);
        };
        // Ret
        return that;
    }

    var iaPage = IaPage(
    {
        'ContentEncSelector': ['#ContentEnc']
        , 'FooterEncSelector': ['#FooterEnc']
        , 'ContentElements': ['#ContentEnc', '#ContentSideBarA', '#ContentMainEnc', '#ContentSideBarB']
    }
    );

    $(function() {
        iaPage.arrangePageStructure();
    }
    );

</script> 
```

# silverlight - VS2008 中损坏的 Silverlight 设计-Surface

> ID：589756
> 
> 赞同：0
> 
> 时间：2009-02-26T09:15:38.940
> 
> 标签：silverlight, namespaces, app.xaml, design-surface

在 VisualStudio 2008 中，设计界面只是空的，因为我将此样式添加到 App.xaml：

```
 <Style x:Key="RightAlignedCell" TargetType="data:DataGridCell">
        <Style.Setters>
            <Setter Property="HorizontalContentAlignment" Value="Right" />
        </Style.Setters>
    </Style> 
```

并在顶部添加此必需的命名空间以使*数据：*可解析

```
xmlns:data="clr-namespace:System.Windows.Controls;assembly=System.Windows.Controls.Data" 
```

运行 Silverlight 应用程序时，一切正常。然而，设计表面是空的，我在编辑 xaml 时出现了这个错误：

> 属性值数据无效：属性 TargetType 的 DataGridCell

如前所述，这个错误只是在设计时发生的。编译工作完美。我在做什么错，为什么设计者不能正确解析这个命名空间？

**更新：**此外，当我将样式从 App.xaml 移动到 Page.xaml 时，设计师再次工作。有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-02-26T09:23:53.037

你试过这个吗？

```
<Style x:Key="RightAlignedCell" TargetType="{x:Type data:DataGridCell}">
    <Style.Setters>
        <Setter Property="HorizontalContentAlignment" Value="Right" />
    </Style.Setters>
</Style> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-01T09:41:59.397

将 xmlns 声明移动到资源字典。像这样： `<ResourceDictionary xmlns:myconverters="clr-namespace:MyCustomConverters;assembly=MyCustomConverters"> ... </ResourceDictionary>`

示例可以在这里找到：blog.andrew-veresov.com/post/Silverlight-20-usage-of-the-converters-from-external-assembly-in-appxaml.aspx

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-25T12:46:16.567

根据 MS silverlight FAQ，这似乎是一个已知错误，无法修复。

# iphone - 在 Xcode 中添加新模板

> ID：589757
> 
> 赞同：12
> 
> 时间：2009-02-26T09:16:14.413
> 
> 标签：iphone, xcode, templates, add

如何在 Xcode 中为 iPhone 应用程序开发添加新模板？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-02-26T11:34:39.713

对于一些建议，我建议查看相关问题的答案：[Change templates in Xcode](https://stackoverflow.com/questions/33720/change-templates-in-xcode)。

特别是，如果您希望在升级 Xcode 时不丢失您的修改，请将您的模板放在. `~/Library/Developer/Shared/Xcode`，而不是`/Developer`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-02-26T20:41:29.790

*从我对[这个](https://stackoverflow.com/questions/33720/change-templates-in-xcode)问题的回答：*

XCode 将模板文件用于文件和项目模板，并在创建时在两者中进行变量扩展。

XCode 3.0-3.1 模板可以在 [Dev Installation]/Library/Xcode/ 中找到，可能是/Developer/Library/XCode。如果您想修改这些模板或添加您自己的模板，请使用以下目录来保存新的/修改后的模板，这样它们就不会被未来的开发者工具升级所清除：

*   文件模板：~/Library/Developer/Shared/Xcode/File Templates/
*   目标模板：~/Library/Developer/Shared/Xcode/Target Templates/
*   项目模板：~/Library/Developer/Shared/Xcode/Project Templates/

我认为您也可以将 /Library/Developer/Shared/Xcode/[File|Target|Project] Templates/ 目录用于所有用户共享的模板。

关于编写文件模板的一个很好的教程在[这里](http://www.macresearch.org/custom_xcode_templates)[MacResearch.org]。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2011-10-11T21:16:01.377

您可以通过更改开发人员文件夹的内容来制作模板。我自己已经这样做了。假设您正在制作一个 html 模板： 第 1 步。转到：/Developer/Library/Xcode/Templates/file templates/resource 第 2 步。在那里创建一个名为 HTML File.xctemplate 的文件夹。步骤 3\. 复制 RTF 文件夹的内容 步骤 4\. 将内容粘贴到您的 html 文件夹中。步骤 5\. 更改 rtf 扩展名

```
___FILEBASENAME___.rtf(in your html folder) to .html 
```

步骤 6\. 将 plist 文件更改为：

```
Key                       |         Type   |     Value
DefaultCompletionName            String          File
Description                      String         An empty Hyper Text Markup language (HTML) file.
Kind                             String         Xcode.IDEKit.TextSubstitutionFileTemplateKind
MainTemplateFile                 String         ___FILEBASENAME___.html
Name                             String         Hyper Text Markup Language file
Summary                          String         An empty Hyper Text Markup Language (HTML) file 
```

步骤 7\. 现在，当你添加一个新文件时，如果你去资源，你会发现一个 html 模板。PS您只需要将html文本替换为您的选择，例如ruby。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2011-10-11T21:48:01.387

XCode 4 改变了模板的工作方式以及模板的去向，因此请小心遵循说明，除非它们引用 XCode 4。您可以在我的 XCode4 自定义存储库中找到一些模板示例以及它们去向的路径：

[https://github.com/KiGi/XCode4Customization](https://github.com/KiGi/XCode4Customization)

系统模板所在的路径是：

**/Developer/Platforms/iPhoneOS.platform/Developer/Library/Xcode/Templates/文件模板**

不要更改这些，在您自己的库目录中复制和修改：

**~/Library/Developer/Xcode/UserData/文件模板**

这些路径也在 github 上的“WhereToPlaceFiles”RTF 文件中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2010-09-19T01:48:07.090

[我在这里](http://www.codeproject.com/KB/iPhone/CreatingXcodeProject.aspx)写了一篇关于如何从现有项目创建新 Xcode 模板的文章。

它涵盖：

*   指定您的项目文件是相对于项目路径
*   使用命令行搜索/替换和小提琴文件权限
*   从目标成员中排除 info.plist
*   给你的模板一个图标

它不包括放置模板的位置。该信息包含在其他答案中。

# c# - 如何检查来自异步 Web 服务调用的错误

> ID：589762
> 
> 赞同：4
> 
> 时间：2009-02-26T09:17:38.653
> 
> 标签：c#, web-services, asynchronous, error-handling

我正在开发 ASP.Net asmx Web 服务。而在客户端，如果对服务器的请求返回 Http 错误代码，如 http 500，我怎么能从 Web 服务客户端知道（我通过添加 Web 引用使用自动生成的客户端代理）？

提前谢谢，乔治

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-26T09:59:29.583

George，由于您使用的是异步 WS 调用，因此您必须在回调方法中实现异常处理。例如：以下是我为演示异步委托而开发的示例代码。

```
public class TransformDelegateWithCallBack
{
    /// <summary>
    /// Delegate which points to AdapterTransform.ApplyFullMemoryTransformations()
    /// </summary>
    /// <param name="filename">Transformation file name</param>
    /// <param name="rawXml">Raw Xml data to be processed</param>
    /// <param name="count">Variable used to keep a track of no of async delegates</param>
    /// <returns>Transformed XML string</returns>
    public delegate string DelegateApplyTransformations(string filename, string rawXml, int count);

    public ArrayList resultArray;

    //// Declare async delegate and result
    DelegateApplyTransformations delegateApplyTransformation;
    IAsyncResult result;

    /// <summary>
    /// Constructor to initialize the async delegates, results and handles to the no of tabs in excel
    /// </summary>
    public TransformDelegateWithCallBack()
    {
        resultArray = ArrayList.Synchronized(new ArrayList());
    }

    /// <summary>
    /// Invoke the async delegates with callback model
    /// </summary>
    /// <param name="filename">Transformation file name</param>
    /// <param name="rawXml">Raw Xml data to be processed</param>
    /// <param name="count">Variable used to keep a track of no of async delegates</param>
    public void CallDelegates(string fileName, string rawXml, int count)
    {
        try
        {
            AdapterTransform adapterTrans = new AdapterTransform();
            // In the below stmt, adapterTrans.ApplyFullMemoryTransformations is the web method being called
            delegateApplyTransformation = new DelegateApplyTransformations(adapterTrans.ApplyFullMemoryTransformations);
            // The below stmt places an async call to the web method
            // Since it is an async operation control flows immediately to the next line eventually coming out of the current method. Hence exceptions in the web service if any will NOT be caught here.
            // CallBackMethod() is the method that will be called automatically after the async operation is done
            // result is an IAsyncResult which will be used in the CallBackMethod to refer to this delegate
            // result gets passed to the CallBackMethod 
            result = delegateApplyTransformation.BeginInvoke(fileName, rawXml, count, new AsyncCallback(CallBackMethod), null);
        }
        catch (CustomException ce)
        {
            throw ce;
        }
    }

    /// <summary>
    /// Callback method for async delegate
    /// </summary>
    /// <param name="o">By default o will always have the corresponding AsyncResult</param>
    public void CallBackMethod(object o)
    {

        try
        {
            AsyncResult asyncResult = (AsyncResult)o;
            // Now when you do an EndInvoke, if the web service has thrown any exceptions, they will be caught
            // resultString is the value the web method has returned. (Return parameter of the web method)
            string resultString = ((DelegateApplyTransformations)asyncResult.AsyncDelegate).EndInvoke((IAsyncResult)asyncResult);

            lock (this.resultArray.SyncRoot)
            {
                this.resultArray.Add(resultString);
            }
        }
        catch (Exception ex)
        {
            // Handle ex
        }
    }

} 
```

如果您的 WS 调用引发异常，则只有在您对 AsynResult 执行 EndInvoke 时才会捕获它。如果您使用的是异步 WS 调用的触发和忘记机制，您将不会调用 EndInvoke，因此将丢失异常。因此，当您需要捕获异常时，请始终使用回调机制希望这会有所帮助:)

如果您还有任何疑问，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-26T09:23:22.913

您可以为您的 Web 服务设置跟踪，下面是 MSDN 中的操作方法：

[http://msdn.microsoft.com/en-us/library/bb885203.aspx](http://msdn.microsoft.com/en-us/library/bb885203.aspx)

如果您也可以访问服务器，您可以设置 HealthMonitoring 例如，它将记录服务器端发生的任何错误，例如您发布 500 内部服务器错误。

健康监测 - [http://msdn.microsoft.com/en-us/library/ms998306.aspx](http://msdn.microsoft.com/en-us/library/ms998306.aspx)

如果您可以远程或登录到服务器，您还可以使用非常有用的事件查看器。

希望这可以帮助：

安德鲁

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-26T09:24:29.323

您可以从 e.Response.GetResponseStream() 获取信息。如前所述，您可能需要查看服务器端以获得更完整的信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-02-26T09:27:07.100

这是一个经常遇到的问题，因为 Web 服务往往只会在遇到未处理的异常时向您发送 HTTP 500（内部服务器错误）消息。我使用了很久以前发现的一个技巧。基本上，您需要使用 StreamReader 深入研究 WebException 以确定异常的根本原因。

**示例代码：（**抱歉，手头没有任何 C# 代码。请使用转换器）

```
Try
  'Hit the webservice.
Catch ex As WebException
  Dim r As HttpWebResponse = CType(ex.Response(), HttpWebResponse)
  Using sr As StreamReader = New StreamReader(r.GetResponseStream())
    Dim err As String = sr.ReadToEnd()
    'Log the error contained in the "err" variable.
  End Using
  Return Nothing
Finally
  'Clean up  
End Try 
```

可以使用我强烈推荐的[DeveloperFusion 转换器进行转换。](http://www.developerfusion.com/tools/convert/vb-to-csharp/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-02-26T09:36:19.543

请参阅上一个问题[easy-way-to-catch-all-unhandled-exceptions-in-c-net](https://stackoverflow.com/questions/295731/easy-way-to-catch-all-unhandled-exceptions-in-c-net)。

对于在 IIS 下运行的 Web 服务，您似乎需要通过实现 UnhandledExceptionModule 来捕获所有线程中的异常。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-02-27T01:45:57.140

假设您有 Visual Studio 导入 web 服务并且您使用 Microsoft Web Services Enhancement 3.0 库，它可能看起来像这样：

```
 private void DoWebService()
 {
      try
      {
           MyWebService.MyWebserviceWSE WSE = new MyWebService.MyWebserviceWSE.MyWebserviceWSE();

           WSE.DoSomethingCompleted += new MyWebService.DoSomethingCompletedEventHandler(WSE_DoSomethingCompleted);

           WSE.DoSomethingAsync(/* pass arguments to webservice */);            
      }
      catch (Exception ex)
      {
           // Handle errors
      }
 }

 private void WSE_DoSomethingCompleted(object o, MyWebService.DoSomethingCompletedEventArgs args)
 {
      if (args.Error != null)
      {
           // The following gets the error and shows it in a msg box
           StringBuilder sb = new StringBuilder();

           sb.AppendLine(args.Error.ToString());

           if (args.Error.InnerException != null)
           {
               sb.AppendLine(args.Error.ToString());
           }

           MessageBox.Show(sb.ToString());
      }
      else
      {
           // Do something with the results
      }
 } 
```

任何错误都将在“MyWebService.DoSomethingCompletedEventArgs”对象中返回。

# user-interface - 如何在 MatLab 中并行运行两个 GUI？

> ID：589764
> 
> 赞同：1
> 
> 时间：2009-02-26T09:18:25.063
> 
> 标签：user-interface, matlab

我正在使用 MatLab，我有两个 GUI。当我单击一个 GUI 中的按钮时，将调用第二个 GUI，并且两个 GUI 都可以并行工作。如果有人知道这个问题的答案，请回复我。

我有两个 GUI 表单。在第一个中，我将一条线旋转一圈（通过使用极坐标函数。这是为了我的雷达模拟目的）。在那个 GUI 中，我只有一个按钮。当我按下它时（通过使用for循环和暂停功能。实际上它是一个模拟，有点像在圆圈中旋转）

圆圈旋转，直到我在同一个 GUI 中按下另一个按钮。我还有一个按钮。如果我按下它，它会激活另一个 GUI 进行相同的旋转，但不是整个圆圈，圆圈的某些部分（扇区）。所以在这里我需要圆形和扇区旋转中的线条。但实际上，当我从圆形 GUI 的按钮调用扇区 GUI（第 2 个 GUI）时会发生什么，即线在圆形停止中旋转，并且在扇区旋转完成后控制权交给扇区。圆圈出现在扇区 GUI 中。

如果有人知道如何并行执行这两个 GUI，请回答我。如果这仍然太模糊，请告诉我，我会解释更多。

我的代码如下：

```
function twoguis
%Initializations: 
 hFigure2 = []; 
 hAxes2 = [];  
 %Make figure 1:
 hFigure1 = figure('Position',[50 200 300 300]);
 hAxes1 = axes('Parent',hFigure1,'Position',[0.1 0.2 0.8 0.7]); 
 hButton = uicontrol('Style','pushbutton',...              
                     'Position',[10 10 100 20],...       
                     'String','New Window',...  
                     'Callback',@button);
 % Start a loop that continuously changes the color of
 %   the axes at 1 second intervals: 
 while true,  % You will have to press Ctrl-c to stop!  
   newColor = rand(1,3); 
   set(hAxes1,'Color',newColor);
  if ishandle(hAxes2),
     set(hAxes2,'Color',newColor);
  end
    drawnow;
    pause(1); 
  end
 function button(source,event)  
   % Check if Figure 2 has already been made: 
  if ishandle(hFigure2), 
    return;    
  end
   % If it isn't made, make Figure 2:
   hFigure2 = figure('Position',[350 200 300 300]);
    hAxes2 = axes('Parent',hFigure2,'Position',[0.1 0.2 0.8 0.7]);  
    for xc=0:.05:6.28;
    polar([0,xc],[0,10]);
    pause(.1);
    end
   end 
 end 
```

谁能建议我如何连续更改颜色并以两个数字连续旋转极坐标函数中的线？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-02-26T18:35:53.897

我制作了一个视频，介绍了如何让两个或多个 GUI 共享数据并协同工作。简短的回答是使用 SETAPPDATA 和 GETAPPDATA 在 GUI 之间共享数据。长答案在这里：

[http://blogs.mathworks.com/videos/2005/10/03/guide-video-part-two/](http://blogs.mathworks.com/videos/2005/10/03/guide-video-part-two/)

我的 GUI 视频集可以在这里找到：

[http://blogs.mathworks.com/videos/category/gui-or-guide/](http://blogs.mathworks.com/videos/category/gui-or-guide/)

-道格

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-02-26T15:08:23.910

**编辑：**我知道您想要如何在 GUIDE 中执行此操作的答案，但也许您会发现这个非 GUIDE、嵌套函数的答案很有帮助......

以下代码创建一个带有极坐标图和 2 个按钮的雷达 GUI 窗口。“开始”按钮将开始逆时针旋转线条，然后该按钮将变成“停止”按钮（如果再次按下它将停止旋转线条）。第二个按钮启动扇区 GUI。该图有一个极坐标图，其线将旋转穿过极坐标图的一部分，在雷达 GUI 线当前位置两侧的 45 度范围内。扇区 GUI 中还有另一个“开始”/“停止”按钮来控制动画。当扇区 GUI 打开时，雷达 GUI 不会设置动画。一旦扇区 GUI 关闭，雷达 GUI 可以再次旋转。您一次只能打开 1 个扇区 GUI。

```
function radar_gui

  % Initializations:

  radarAngle = 0;      % Current angle of radar GUI
  sectorAngle = 0;     % Current Angle of sector GUI
  radarStep = pi/90;   % Angle increment (radians) per 0.1 s
  sectorWidth = pi/2;  % Angle (radians) swept by sector GUI
  hSectorFigure = [];
  hSectorAxes = [];
  hSectorLine = [];
  hButton2 = [];

  % Make radar figure:

  hRadarFigure = figure('Position',[50 200 300 300],...
                        'DeleteFcn',@delete_timer);
  hRadarAxes = axes('Parent',hRadarFigure,...
                    'Position',[0.1 0.2 0.8 0.7]);
  hRadarLine = polar(hRadarAxes,[0 radarAngle],[0 1]);
  hButton1 = uicontrol('Style','pushbutton',...
                       'Parent',hRadarFigure,...
                       'Position',[10 10 60 20],...
                       'String','Start',...
                       'Callback',@toggle_radar);
  uicontrol('Style','pushbutton','Parent',hRadarFigure,...
            'Position',[190 10 100 20],...
            'String','Show Sector',...
            'Callback',@open_sector);

  % Create a timer that spins the radar lines:

  spinTimer = timer('TimerFcn',@radar_timer,...
                    'ExecutionMode','fixedRate',...
                    'Period',0.1,...
                    'TasksToExecute',inf);

%~~~Begin nested functions~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

  function open_sector(source,event)
    if ishandle(hSectorFigure),
      return;
    end
    sectorAngle = radarAngle;
    hSectorFigure = figure('Position',[350 200 300 300]);
    hSectorAxes = axes('Parent',hSectorFigure,...
                       'Position',[0.1 0.2 0.8 0.7]);
    hButton2 = uicontrol('Style','pushbutton',...
                         'Parent',hSectorFigure,...
                         'Position',[10 10 60 20],...
                         'String',get(hButton1,'String'),...
                         'Callback',@toggle_radar);
    hSectorLine = polar(hSectorAxes,[0 sectorAngle],[0 1]);
    drawnow;
  end

  function toggle_radar(source,event)
    if strcmp(get(source,'String'),'Start'),
      set(hButton1,'String','Stop');
      if ishandle(hButton2),
        set(hButton2,'String','Stop');
      end
      start(spinTimer);
    else
      set(hButton1,'String','Start');
      if ishandle(hButton2),
        set(hButton2,'String','Start');
      end
      stop(spinTimer);
    end
    drawnow;
  end

  function radar_timer(source,event)
    if ishandle(hSectorLine),
      sectorAngle = sectorAngle+radarStep;
      if (sectorAngle >= radarAngle+sectorWidth/2),
        sectorAngle = radarAngle-sectorWidth/2;
      end
      set(hSectorLine,'XData',[0 cos(sectorAngle)],...
                      'YData',[0 sin(sectorAngle)]);
    else
      radarAngle = radarAngle+radarStep;
      if (radarAngle >= 2*pi),
        radarAngle = radarAngle-2*pi;
      end
      set(hRadarLine,'XData',[0 cos(radarAngle)],...
                     'YData',[0 sin(radarAngle)]);
    end
    drawnow;
  end

  function delete_timer(source,event)
    stop(spinTimer);
    delete(spinTimer);
    if ishandle(hSectorFigure),
      delete(hSectorFigure);
    end
  end

%~~~End nested functions~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

end 
```

如果要调整扇区 GUI 的旋转速度或扫描角度，可以在函数开头调整“radarStep”和“sectorWidth”变量的值。希望这可以帮助！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-06T01:28:18.590

问题是 MATLAB M 代码解释器基本上是单线程的。因此，当函数“按钮”被调用时，它会控制解释器并且在完成扫描之前不会将其返回。我建议研究使用 MATLAB 计时器类。这给人一种多线程的“感觉”，尽管从技术上讲，当调用计时器回调时，它也会阻止其他 M 代码运行。这是您的原始代码的修改形式，显示了我在说什么：

```
function twoguis
%Initializations: 
    hFigure2 = []; 
    hAxes2 = [];  
    %Make figure 1:
    hFigure1 = figure('Position',[50 200 300 300]);
    hAxes1 = axes('Parent',hFigure1,'Position',[0.1 0.2 0.8 0.7]); 
    hButton = uicontrol('Style','pushbutton',...              
                        'Position',[10 10 100 20],...       
                        'String','New Window',...  
                        'Callback',@button);
    % Start a loop that continuously changes the color of
    %   the axes at 1 second intervals: 
    while true,  % You will have to press Ctrl-c to stop!  
        newColor = rand(1,3); 
        set(hAxes1,'Color',newColor);
        if ishandle(hAxes2),
            set(hAxes2,'Color',newColor);
        end
        drawnow;
        pause(1); 
    end

    function button(source,event)  
    % Check if Figure 2 has already been made: 
        if ishandle(hFigure2), 
            return;    
        end
        % If it isn't made, make Figure 2:
        hFigure2 = figure('Position',[350 200 300 300]);
        hAxes2 = axes('Parent',hFigure2,'Position',[0.1 0.2 0.8 0.7]);  
        tmr = timer('TimerFcn',@spin, 'executionmode','fixedrate','period',.1);
        start(tmr)

        function spin(obj, event)
            polar(hAxes2,[0,get(obj, 'TasksExecuted')*0.05],[0,10]);
        end
    end 
end 
```

# delphi - 用于 Delphi 开发的最佳 VM，带有并行端口

> ID：589765
> 
> 赞同：7
> 
> 时间：2009-02-26T09:18:41.460
> 
> 标签：delphi, serial-port, hardware, virtualization, parallel-port

我看到许多人正在使用虚拟机进行 S/W 开发（不仅仅是 Delphi）来托管 IDE 和所有必需的文件。我已经使用 Microsoft Virtual PC 来调试我在各种操作系统上的应用程序问题，但在虚拟机“外部”几乎没有访问权限。我的应用程序使用 USB、串行和 - 关键 - 直接 I/O 写入硬件（通过 I/O 权限驱动程序）。我想让虚拟机看到所有这些（当然，一次只能运行一个虚拟机）。这可能吗？Virtual PC 与 VMWare 是否有偏好？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-02-26T10:25:02.080

我还没有尝试过使用并行端口，但是 VMWare Workstation 6（在真正的 XP Pro 主机上运行 Windows XP Pro）让我可以很好地与串行端口通信。我在机器中有一个 2 端口串行通信卡，并且 VMWare 被配置为将端口控制权交给来宾机器。（这是用于支票扫描设备）。

我还没有使用 USB 版本的支票扫描仪进行此操作，但是我在 PC 上使用 VMWare Workstation（以及在 Mac 上使用 VMWare Fusion）的经验表明这也可以使用 - 它非常适合让您访问如果您一开始不小心配置虚拟机软件，请连接到底层设备。

我很想看看你得到了什么其他的回应。:-)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-02-26T10:33:38.813

我目前正在使用~~Sun~~ [Oracle VirtualBox](https://www.virtualbox.org/)，您可以在其中安装几乎所有操作系统。
USB 支持：（完整/过滤）USB / USB2 (EHCI) 控制器
串行端口：2* Com1-4 / 用户定义（设置自己的 IRQ 和 I/O 端口。
模式：主机管道/设备/断开连接。可以创建管道并指定路径
CD/DVD：带 Pass Through（尚无音频写入）
您还可以启用 3D 加速。

它还支持带有嵌套分页/PAE/NX 的 IO APIC/ACPI/VT-x/AMD-V

（必须查找其中一些缩写才能知道它们的含义。）

编辑：
我没有将上述任何功能用于开发目的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-02-26T17:13:16.140

我有使用 Virtual PC 和 VMWare Workstation 的经验。虽然 Virtual PC 在管理操作系统方面做得很好，但它不会像 VMWare Workstation 那样暴露 USB 或并行端口。好消息是 VMWare 有一个转换器，您可以使用该转换器将 Virtual PC VM 转换为他们可以使用的东西，并且您可以在进行切换之前使用免费的 VMWare Player 进行测试。遗憾的是，迁移是一种单向路径，因此请在进行转换之前备份您的 Virtual PC VM。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-02-26T20:01:06.563

我使用 VMWare Workstation 6 来调试我们的 EPOS 软件，该软件使用连接到我机器中的串行 PCI 卡的热敏收据打印机。我可以将串口重定向到一个文件，看看我是否发送了正确的命令。

您应该能够以相同的方式从 VM 访问主机计算机的并行端口。

[VMWare Workstation 6 手册](http://www.vmware.com/pdf/ws65_manual.pdf)的第 313 页解释了如何将并行端口添加到 VM。

# http - 从浏览器的性能角度来看，压缩 http 响应是否值得？

> ID：589774
> 
> 赞同：2
> 
> 时间：2009-02-26T09:20:34.573
> 
> 标签：http, optimization

浏览器可能更接近于 CPU 约束而不是网络约束，对吧？我们有一个非常繁重的 ajax 应用程序，所以从浏览器（而不是服务器）的角度来看，也许最好不要使用压缩。

你觉得怎么样

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-02-26T09:27:11.330

这完全取决于浏览器和设备。在*家里*的普通笔记本电脑或台式机上，我希望网络成为限制因素。在一个连接良好的办公室，如果有任何真正的瓶颈，它*可能*是 CPU。

然后你有上网本，可能超过 3G，然后是手机......

就我个人而言，我会选择压缩——我认为这更有可能是一场胜利而不是一个瓶颈。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-02-26T09:31:02.833

我的客户往往是共享互联网连接的小型办公室，带宽是主要考虑因素。我们的应用程序提供了相当大的页面，因此压缩产生了巨大的差异。

取决于带宽、用户数量、页面大小。

压缩和解压缩非常优化，您可以控制压缩级别。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-26T09:25:35.857

好吧，与网络速度相比，通常 cpu 周期非常便宜。除非您尝试解压缩 MB 的数据，否则解压缩不会占用太多 CPU 周期。

但我想这最终取决于将要使用该网站的人。如果您确定它们具有非常快的 Internet 连接，那么也许您不必使用压缩。另一方面，您始终可以确定他们拥有相当不错的 CPU。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-02-26T09:35:36.037

*不*使用压缩的最常见原因是它放在服务器上的 CPU 负载（对于动态页面）。通常这是更大的问题，所以我假设普通台式 PC 上的 CPU 负载可以忽略不计（除非你想使用 bz2）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-02-26T09:50:10.167

如果压缩给服务器带来了沉重的负载和/或压缩率很差（例如，20K 的页面被压缩到 19K），那么我会考虑将其关闭。除非您的用户与服务器有非常快速、低延迟的连接，否则浏览器几乎肯定是网络绑定的。

我还会考虑 HTTP 缓存技术——它们非常有效，使用 AJAX 更是如此。这可以节省服务器和客户端的带宽和 CPU 周期 - 无需重新请求、重新生成、重新传输、重新解析和重新保存您已有的内容。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-02-26T10:03:04.240

请参阅[Yahoo 加快网页速度的最佳实践](http://developer.yahoo.com/performance/index.html)。特别是[*Gzip Components*](http://developer.yahoo.com/performance/rules.html#gzip)结论：

> Gzip 压缩尽可能多的文件类型是减轻页面重量和加速用户体验的简单方法。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-02-26T11:16:31.097

与压缩相比，解压缩是一个非常快的过程。即使是性能较弱的 CPU（如移动设备中的 CPU）也几乎可以在短时间内有效地解压缩 GZIP（ZIP、Deflate 等）。压缩数据是一项艰巨的工作。通过使用压缩，您正在增加服务器负载......并且增加的程度并不总是可以忽略不计。通常是在服务器端的带宽使用和 CPU 使用之间进行权衡。对于客户端来说，它通常没有太大的作用，除非互联网访问很慢（例如手机连接）。但是，只有 text/html/css/js 可以被有效压缩，您在网页上找到的大多数其他数据（例如大量图像）根本无法压缩；所以如果我们谈论的页面有 8 kb 的网页数据并且页面本身加载了 200+ kb 的图像数据，

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-02-26T11:35:02.707

浏览器下载的任何脚本或内容只需要在下载时解压缩，从那时起它就已经处于解压缩形式（唯一的例外是，如果您对 HTTP 标头做一些奇怪的事情，例如 Cache-Control: no -店铺）。

它会比下载速度更快地解压——瓶颈不太可能是解压。

即使是稍旧的慢速计算机也可能以每秒 50 MB 以上的速度解压缩 GZIP，这需要至少 410Mbps（即 410,000kbps）的网络速度才能达到饱和。

我会更担心像 IE6（SP2 之前）这样的错误浏览器，它们要求压缩内容，但在某些情况下无法处理，比如压缩 CSS 时。

# visual-sourcesafe - Visual SourceSafe 支持分布式软件开发

> ID：589775
> 
> 赞同：2
> 
> 时间：2009-02-26T09:20:42.170
> 
> 标签：visual-sourcesafe, distributed

我在分布式软件开发环境中工作。当前使用的 SCM 工具是 Visual SourceSafe 2005 Client/Server。我们正在尝试制定策略以最大限度地减少代码中断。我们可以使用 VSS 的哪些功能在分布式环境中实现更安全的 SCM？

有关此主题的 Internet 参考资料有什么建议吗？

最好的祝福

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-26T09:26:44.700

VSS 有两种结帐“模式”。一个锁定文件，另一个在签入时合并。锁定是防止中断的最简单方法，但可能会导致生产力下降，因为其他人必须等待签入才能处理代码。

不过，我不确定您所说的“休息”是什么意思。你的意思是合并冲突？

你的意思是链接断开？你的意思是人们可以获得被破坏的代码吗？

如果您的意思是人们正在获取损坏的代码，VSS 没有事务处理和原子提交系统，因此有时拉取可以在更改中间拉取文件，但老实说，我只遇到过几次.

我不会将 VSS 用于分布式开发环境。可以将它用于一些主要工作在现场完成的异地开发，但如果您的主要工作是分布式的，我会选择更面向客户端-服务器的事务提交和更改集。

更新：是的，VSS 具有自动合并功能，但是如果两个人编辑同一个文件，并且这些更改重叠，则需要人工干预才能合并这些更改。VSS 会弹出一个窗口，让您选择要合并的内容。这对任何产品都是一样的。

顺便说一句，ClearCase贵*得离谱*……在许多情况下超过 10 万美元。

此外，VSS 的分支与 ClearCase 或许多其他产品有很大不同，并且没有像您所指的那样的推广模式。您必须签入文件，然后合并分支以将它们放入分支的较早部分。

在我看来，您想以 VSS 不适合的方式使用版本控制。我也不推荐 Subversion（很多人都喜欢。它是一个很棒的工具，但它不像 VSS 那样用户友好），因为它确实有一些学习曲线，而且它的 GUI 工具不像其他产品那么直观。

您可能会考虑[SourceGear Vault](http://www.sourcegear.com/vault/)。这是一款好产品，易于使用，并以合理的价格提供您可能正在寻找的稳健性和功能。他们也有一个评估版本，可以导入 SourceSafe 数据库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-04T15:07:01.687

另一个可能的选择是 SCM Anywhere Hosted： [http ://www.scmsoftwareconfigurationmanagement.com/](http://www.scmsoftwareconfigurationmanagement.com/)

它为您的分布式团队提供集成的版本控制、问题跟踪和构建自动化。

Kevin Gao（SCM Anywhere 架构师）

MCSD、MCDBA

www.kevingao.net

# algorithm - 人工智能搜索

> ID：589781
> 
> 赞同：1
> 
> 时间：2009-02-26T09:21:50.360
> 
> 标签：algorithm, search, mathematical-optimization

大家。我正在研究一个大学时间表计划项目。主要是我在使用禁忌搜索，但我想问：

在一般搜索中，您可以探索当前状态的所有邻居，然后根据适应度或评估函数获取最佳状态，但是在这样的项目中，生成所有邻居会降低性能，那么有什么方法可以让我绕过这样的问题？例如，我是否可以只为一个州生成孩子，然后在搜索过程中为所有其他州从这一代中受益？

请，如果有人有此类算法方面的专家，请告诉我，因为我在此类问题上一直在努力。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-26T10:03:09.933

shoosh 评论的附录：您在寻找[修剪](http://en.wikipedia.org/wiki/Pruning_(algorithm))吗？存在许多这样的策略，包括[这个](http://en.wikipedia.org/wiki/Alpha-beta_pruning)。请记住，一种尺寸并不适合所有人。因此，您可能必须设计一个启发式来满足您的需求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-26T09:32:47.493

我不是专家，但通常不难考虑对此类计算进行优化。
这实际上取决于您使用的适应度函数。通常，知道一个节点的适应度，你可以推断出孩子的适应度范围，甚至是从最坏到最好的情况。
使用一个足够简单的函数，您实际上可以计算孩子的适应度，即使没有显式生成它们，然后只在值得时才生成它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-28T15:13:03.087

对先前评论的补充：修剪也可以在多个级别进行，具体取决于您的性能和内存限制。例如：

1.  将初始状态放入优先级队列。

2.  直到终止（例如队列为空，找到足够的解决方案，时间限制到期，...），重复以下操作：

    2.1。从队列中取出最上面的条目。

    2.2\. 生成它的孩子（如果可能，使用估计器首先获得最高价值的孩子）。

    2.3\. 生成每个孩子后，将其放入优先级队列。一旦队列达到大小限制（您可能通过反复试验凭经验确定），每次插入队列时都应该删除队列中的最低值元素。

显然，拥有良好的估计/评估功能对于完成这项工作很重要。可以调整您的队列评估函数以将“生成”考虑在内（例如，对更接近初始状态、在较浅深度的状态给予加权奖励）以调整其在深度偏好和广度偏好之间的偏差。

# c# - c#pictureBox矩阵

> ID：589782
> 
> 赞同：1
> 
> 时间：2009-02-26T09:22:31.107
> 
> 标签：c#, windows-mobile, pointers

我正在为 Windows Mobile 开发一款益智游戏。目的是将一幅图像分割成九个部分并重新排列得到原始图像。这些分割图像放在图片框上，这些图片框重新分布在 3X3 单元的矩阵中。

用户移动这些单元格以将它们排列在正确的位置（这是一个益智游戏！）。

我需要一些东西来访问这些图片框并知道它们在矩阵中的位置。假设我需要更新第 1 行第 2 列的图像（这只是一个示例）。

在 C++ 中，我使用指针来引用对象，但我不知道如何使用 C# 来实现。

有什么建议吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-02-26T09:42:54.460

只需使用包含对 PictureBox 的引用的对象创建矩阵。

```
MyObject[,] layout = new MyObject[3,3];

public class MyObject
{
        #region attributes        
        private PictureBox pictureBox;
        #endregion

        public MyObject(PictureBox pictureBox)
        {
            this.pictureBox = pictureBox;
        }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-26T09:28:31.077

```
//This is a reference object
MyCustomObject o1 = new MyCustomObject(imageUrl, row, col); 
```

因此，从我的示例中，我正在创建一个自定义对象，该对象包含图像的 url 以及行和列引用。

然后我可以打电话：

```
int row = o1.Row;
int col = o1.Col;
string imageUrl = o1.ImageUrl; 
```

然后，您可以按照自己的意愿使用。

希望这可以帮助：

安德鲁

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-26T09:42:45.067

一种可能的方法是构建一个拼图类，该类将保存对图像的引用，它是当前位置和目标位置。

```
public class PuzzlePeice

{
public Bitmap Image {get; }
puliic Point Position {get; set; }
public Point TargetPosition {get; };

} 
```

然后假设 peice 是上述类的一个实例，移动一个 peice 看起来像这样：

```
peice.Postion = new Point(x,y); 
```

TargetPosition 指示 peice 在矩阵中的位置以形成正确的图像，该值当然来自您获得拼图信息的任何数据源，并且可以在构造函数中设置

希望这可以帮助

# select - 使用 select() 时无法捕获 SIGINT 信号

> ID：589783
> 
> 赞同：2
> 
> 时间：2009-02-26T09:22:39.810
> 
> 标签：select, signals

我已经为 SIGINT 定义了我自己的信号处理程序。但是我的信号处理程序没有被调用信号处理程序只是终止程序。但是在按 ctrl+c 时，程序并没有退出。请帮忙...

这就是代码的样子..

```
sa.sa_handler = handle_termsig;
sa.sa_flags = 0;
sigemptyset(&sa.sa_mask);
sigaction(SIGINT, &sa, 0);
sigaction(SIGTERM, &sa, 0);
sigemptyset(&g_termsigs);
sigaddset(&g_termsigs, SIGINT);
sigaddset(&g_termsigs, SIGTERM);

sigprocmask(SIG_BLOCK, &g_termsigs, 0);
if (select (fdmax+1, &rd, &wr, NULL, &time) < 0)
{
  exit();
}
sigprocmask(SIG_UNBLOCK, &g_termsigs, &savemask); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-02-26T10:46:49.453

由于 SIGINT 在您调用 select 时被阻塞，因此它不会被传递并且`select()`不会被中断。如果您的处理程序只是调用`exit()`并且即使在您的代码调用 select 时您也想要这个，最好的解决方案是不理会信号掩码。如果您出于某种原因不希望在调用时调用您的普通处理程序，则`select()`可以使用该[`pselect()`](http://linux.die.net/man/2/pselect "选择（）")函数。

编辑：

## 什么时候发出信号

如果信号已启用（即未阻塞）并且进程正在运行，则立即。

如果启用了信号并且进程在可中断的睡眠中睡眠（这意味着 top/ps 输出中的 state==S），则系统调用被中断（例如，通过将 EINTR 返回给调用者）并执行信号处理程序。

如果信号被阻塞，它会等待一旦被解除阻塞就被传递。系统调用不会被阻塞信号打断。

在您的示例中，这意味着`select()`正在等待输入；当输入可用时，它返回，信号处理程序被启用（在对 sigprocmask 的第二次调用中）并调用处理程序。

这是它在 strace 中的样子：

```
Process 22393 attached - interrupt to quit
19:31:05.844940 select(1, [0], NULL, NULL, NULL) = 1 (in [0])
19:31:12.131431 rt_sigprocmask(SIG_UNBLOCK, [INT TERM], [INT TERM], 8) = 0
19:31:12.131560 --- SIGINT (Interrupt) @ 0 (0) ---
19:31:12.131730 fstat64(1, {st_mode=S_IFCHR|0620, st_rdev=makedev(136, 1), ...}) = 0
19:31:12.131871 mmap2(NULL, 4096, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0xb7ffb000
19:31:12.132027 write(1, "signal..."..., 9) = 9
19:31:12.132148 exit_group(1)           = ?
Process 22393 detached 
```

## 如何启用信号

要始终启用信号处理程序，只需`sigprocmask()`从代码中删除对的调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-26T11:01:57.450

你明确地阻止`SIGINT`了`select`通话，所以它当然不起作用。

你想做什么？

# c - ps 命令的 C 代码

> ID：589796
> 
> 赞同：0
> 
> 时间：2009-02-26T09:25:04.407
> 
> 标签：c, linux

你能帮忙用C语言开发Linux的ps命令吗？

或者有什么可以帮助我的参考网站吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-02-26T09:34:32.187

[http://procps.sourceforge.net/](http://procps.sourceforge.net/)有 Linux 系统上使用的 ps 版本的源代码。检查它可能对您有用。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-02-26T09:34:53.010

它有助于查看这些程序完成的系统调用序列。用来`strace`做那个。我认为`ps`所做的是爬行`/proc`，收集所有流程及其信息。

看看[procps](http://procps.sourceforge.net/)的网站，下载它的代码，看看他们是怎么做的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-02-26T09:33:34.277

您是否没有查看源代码以了解其实现方式？我不能希望在一个 SO 问题中解释 /proc 中所有内容的格式 .. 所以非常建议研究存在的内容。

这看起来非常像家庭作业。[在这里](http://procps.sourceforge.net/download.html)找到代码，研究它..然后随时提出问题:)

如果你要重新做，请让论点有意义：

```
********* simple selection *********  ********* selection by list *********
-A all processes                      -C by command name
-N negate selection                   -G by real group ID (supports names)
-a all w/ tty except session leaders  -U by real user ID (supports names)
-d all except session leaders         -g by session OR by effective group name
-e all processes                      -p by process ID T  all processes on this terminal     -s processes in the sessions given a  all w/ tty, including other users
-t by tty g  OBSOLETE -- DO NOT USE    -u by effective user ID (supports names) r  only running processes
 U  processes for specified users x  processes w/o controlling ttys     t  by tty
*********** output format **********  *********** long options ***********
-o,o user-defined  -f full            --Group --User --pid --cols --ppid
-j,j job control   s  signal          --group --user --sid --rows --info
-O,O preloaded -o  v  virtual memory  --cumulative --format --deselect
-l,l long          u  user-oriented   --sort --tty --forest --version
-F   extra full    X  registers       --heading --no-heading --context
                    ********* misc options *********
-V,V  show version      L  list format codes  f  ASCII art forest
-m,m,-L,-T,H  threads   S  children in sum    -y change -l format
-M,Z  security data     c  true command name  -c scheduling class
-w,w  wide output       n  numeric WCHAN,UID  -H process hierarchy 
```

是的，我们需要这些选择......而不是面对文字[愤怒的水果沙拉](http://catb.org/jargon/html/A/angry-fruit-salad.html):)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-02-26T09:34:41.030

您可以解析`/proc`文件系统以找出正在运行的进程列表。

查看[procps](http://procps.sourceforge.net/)的代码。这应该让您对如何执行此操作有所了解。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-02-26T11:10:49.303

由于 ps 检索信息的方式没有遵循任何标准（实际上它对每个操作系统系列都采用不同的方式）并且这种方式会随着每个新操作系统中的每个新版本而改变......如果你需要ps 提供的信息，您应该考虑实际上只调用 ps 并解析其输出。是的，我知道以这种方式工作看起来很丑陋而且不专业，但它对于许多应用程序来说非常可爱，它实际上是跨平台的，而且 ps 的输出格式将来不太可能发生变化（什么会破坏你的解析器) 而不是 ps 检索其信息的方式可能会改变。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-02-26T09:32:40.100

调查 linux **/proc**文件系统。[这里](http://www.linuxjournal.com/article/8381)有关于这个主题的好文章。

# java - 在java中关闭批处理文件的命令

> ID：589799
> 
> 赞同：1
> 
> 时间：2009-02-26T09:26:08.180
> 
> 标签：java

```
Runtime rt = Runtime.getRuntime();
Process pr = rt.exec(command); 
```

我正在通过上面的 java 行运行批处理文件。命令提示符将打开。我需要使用 java 代码关闭命令提示符

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-02-26T09:31:40.430

```
rt.exec("taskkill /IM cmd.exe"); 
```

或者当您运行批处理文件时

```
rt.exec("cmd /C batchfile.bat"); 
```

第二种选择在您的情况下更好。代码更少，批处理完成后命令提示符退出。第一个选项只是杀死 cmd.exe open 的一个实例（您可能打开了多个实例）。

确保它已完成运行：

```
pr.waitFor(); 
```

-约翰

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-02-16T09:41:52.330

只需使用新行更新您的批处理 (.bat) 文件，然后输入新行“exit”（不带引号）。干杯

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-26T09:28:45.723

```
pr.destroy(); 
```

# wpf - 如何将 List 集合绑定到 WPF 中的 TabControl 标头？

> ID：589802
> 
> 赞同：23
> 
> 时间：2009-02-26T09:26:45.747
> 
> 标签：wpf, data-binding, tabcontrol

我可以将数据输入到我的 TabControl 中，但标题周围有框架，我不能从一个选项卡到另一个选项卡。

我在这个 TabControl 上的 XAML 绑定语法做错了什么？

XAML：

```
<StackPanel>
    <TabControl x:Name="TheTabControl">
        <TabControl.ItemTemplate>
            <DataTemplate>
                <TabItem Header="{Binding LastName}">
                    <StackPanel Margin="10" Orientation="Horizontal">
                        <TextBlock Text="{Binding FirstName}"/>
                        <TextBlock Text=" "/>
                        <TextBlock Text="{Binding LastName}"/>
                    </StackPanel>
                </TabItem>
            </DataTemplate>                
        </TabControl.ItemTemplate>
    </TabControl>

    <TabControl>
        <TabItem Header="Tab1">
            <TextBlock Text="This is a test of tab 1"/>
        </TabItem>
        <TabItem Header="Tab2">
            <TextBlock Text="This is a test of tab 2"/>
        </TabItem>
    </TabControl>

</StackPanel> 
```

后面的代码：

```
public partial class Window1 : Window
{
    public Window1()
    {
        InitializeComponent();

        //create all
        List<Customer> customers = new List<Customer>();
        customers.Add(new Customer { FirstName = "Jim", LastName = "Smith", NumberOfContracts = 23 });
        customers.Add(new Customer { FirstName = "Jane", LastName = "Smith", NumberOfContracts = 23 });
        customers.Add(new Customer { FirstName = "John", LastName = "Tester", NumberOfContracts = 23 });

        //show
        TheListBox.ItemsSource = customers;

    }
}

public class Customer
{
    public string FirstName { get; set; }
    public string LastName { get; set; }
    public int NumberOfContracts { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2010-07-07T16:07:44.790

这是我会做什么

```
public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();
    }

    private void Window_Loaded(object sender, RoutedEventArgs e)
    {
        //create all 
        var customers = new List<Customer>{
            new Customer {FirstName = "Jim", LastName = "Smith", NumberOfContracts = 23},
            new Customer {FirstName = "Jane", LastName = "Smith", NumberOfContracts = 23},
            new Customer {FirstName = "John", LastName = "Tester", NumberOfContracts = 23}};

        //show 
        TheTabControl.ItemsSource = customers;
        TheTabControl.SelectedIndex = 0;
    }

public class Customer
{
    public string FirstName { get; set; }
    public string LastName { get; set; }
    public int NumberOfContracts { get; set; }
} 
```

在 XAML 方面

```
<TabControl x:Name="TheTabControl">            
    <TabControl.ItemTemplate>
        <DataTemplate>                    
            <TextBlock>                            
                <TextBlock Text="{Binding FirstName}"/> <TextBlock Text="{Binding LastName}"/>
            </TextBlock>                        
        </DataTemplate>
    </TabControl.ItemTemplate>
    <TabControl.ContentTemplate>
        <DataTemplate>
            <TextBlock>                            
                This is <TextBlock Text="{Binding FirstName}"/> <TextBlock Text="{Binding LastName}"/>
            </TextBlock>
        </DataTemplate>
    </TabControl.ContentTemplate>
</TabControl> 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-02-26T09:33:28.677

只需将您的列表绑定到您的 TabControl 作为 ItemsSource，例如

```
<TabControl ItemsSource="{Binding Customers}"/> 
```

这将为您提供客户中每个对象的选项卡。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-02-26T14:37:02.770

你的答案可以在这里找到。

[http://www.codeplex.com/smartclient/Thread/View.aspx?ThreadId=31821](http://www.codeplex.com/smartclient/Thread/View.aspx?ThreadId=31821)

注意他是如何设置 ContentTemplate 和 ItemTemplate 的……你几乎拥有它！

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2010-01-27T14:53:11.070

我在这里找到了解决方案：

[http://social.msdn.microsoft.com/forums/en-US/wpf/thread/956eaba3-53bd-4683-b3dd-28b20e4b7526/](http://social.msdn.microsoft.com/forums/en-US/wpf/thread/956eaba3-53bd-4683-b3dd-28b20e4b7526/)

它对我有用。

# visual-c++ - 延迟后关闭对话框

> ID：589806
> 
> 赞同：1
> 
> 时间：2009-02-26T09:28:09.487
> 
> 标签：visual-c++, dialog

在对话框上调用 DoModal() 并调用延迟函数之后。你如何关闭对话框。

m_dlg.DoModal();
睡眠（1000）；
.
.
.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-26T09:33:42.453

模态对话框是模态的，当你进入 DoModal 时它们会显示，而当 DoModal 离开时它们会隐藏。在您调用 Sleep(1000) 之前，您的对话框已经关闭；

为此，您应该使用非模态对话框。

m_dlg.ShowWindow(SW_SHOW); 睡眠（1000）；m_dlg.ShowWindow(SW_HIDE);

# javascript - 从另一个函数调用 jQuery 的 DOM 就绪函数

> ID：589828
> 
> 赞同：1
> 
> 时间：2009-02-26T09:36:46.453
> 
> 标签：javascript, jquery

是否可以从另一个 Javascript 函数中调用 jQuery 的`$(document).ready`函数？我有一个按钮，单击该按钮时应调用 jQuery DOM 就绪函数。这可能吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-02-26T09:41:49.017

如果您从另一个 javascript 函数调用它，请删除该`$(document).ready`部分

```
function f1(){
 $('#idhere').something;
} 
```

或者如果您只想在文档准备好时调用函数，请将函数调用放在里面`$(document).ready`

```
$(document).ready(function(){
 function f1(){
  //do something here
 }
}); 
```

但是您没有在这里利用 jquery 的全部功能。如果要将 onclick 事件与元素相关联，可以这样做：

```
<button id='button1'></button> 
```

在js文件中：

```
$('#button1').click(function(){
 //do the onclick sequence here
}); 
```

# count - SAS Web Report Studio - 如何计算交叉表中的不同值

> ID：589829
> 
> 赞同：1
> 
> 时间：2009-02-26T09:36:47.703
> 
> 标签：count, aggregate, sas

在 SAS Web Report Studio 3.1 中，我需要计算所选维度的不同出现次数并将结果显示在交叉表中。根据 SAS 支持网站，交叉表不支持此聚合函数，但也许有解决方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-08-05T17:08:53.433

解决方案：只需在 info map 中创建一个新的度量变量。用于制作此变量的表达式应类似于 N ( Distinct <>) 创建 WRS 时，只需将此字段与其他列一起拖放即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-28T13:23:27.063

我不认为有一个简单的方法可以做到这一点。Web Report Studio 只是不支持“计数不同的度量”。我参加了一个 SAS 会议，他们演示了 SAS 9.2 套件中包含的 4.2（？），而且似乎也没有任何实质性功能。只是一堆界面改进。

在我的公司，我们使用了位于 SAS 之上的第 3 方产品 Futrix，它基本上是 Web 报表工作室的更高级版本。它内置了不同的度量值。基本上，就功能而言，Futrix 比 SAS Web Report Studio 领先数年。当然，它不是免费软件，所以我不知道这会有多大帮助。

底线：如果您想实施任何类型的严肃的基于 Web 的报告，请不要使用 SAS Web Report studio。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-01-26T14:54:36.463

要添加非重复计数，您需要在与可用层次结构相关的多维数据集中创建一个新度量。

请记住，当您向上和向下钻取时，向下钻取的总和将大于以下级别的总和。这正确地遵循了不同的定义，但通常被误解。

这个问题的前两个答案是错误的，请忽略它们。

# c# - 在同一组中获取匹配的值，RegEx C#

> ID：589831
> 
> 赞同：0
> 
> 时间：2009-02-26T09:37:26.483
> 
> 标签：c#, regex

我有一个字符串：

> type_name "abc" < text1 > text2 >>
> "ab123" < text3

现在我想提取所有以“<”或“>”开头的字母数字单词

所以我写道：

```
[<>]\s*(?'name'\w+) 
```

我得到了匹配项，（例如上面我得到了 3 个匹配项，每个匹配项都有一个名为 name 的组），并且在 name 中我可以访问值 text1、text2 和 text3。但我希望他们进入同一组但不同的捕获，这样我就可以写类似的东西

```
foreach(Capture C in Match.Groups["name"]) 
```

我之所以需要它，是因为我设计解析器来处理正则表达式的方式，它期望同一组中的不同值但捕获不同。你能帮我把它们放在一起吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-02-26T13:10:07.020

您并不真的希望它们出现在同一场比赛中，因为您必须在其余输入中考虑您不想要的东西，而且速度会更慢。你最好做这样的事情：

```
Regex re = new Regex(@"[<>]\s*(?<name>\w+)");
MatchCollection matches = re.Matches("type_name \"abc\" < text1 > text2 >  \"ab123\" < text3");            
foreach (Match m in matches)
{
   string name = m.Groups["name"].Value;
} 
```

# python - 如何在 Python 中查找相对 URL 并将其转换为绝对 URL

> ID：589833
> 
> 赞同：2
> 
> 时间：2009-02-26T09:37:39.620
> 
> 标签：python, regex

我从网页（[http://www.opensolaris.org/os/community/on/flag-days/all/](http://www.opensolaris.org/os/community/on/flag-days/all/)）中提取了一些代码，如下所示，

```
<tr class="build">
  <th colspan="0">Build 110</th>
</tr>
<tr class="arccase project flagday">
  <td>Feb-25</td>
  <td></td>
  <td></td>
  <td></td>
  <td>
    <a href="../pages/2009022501/">Flag Day and Heads Up: Power Aware Dispatcher and Deep C-States</a><br />
    cpupm keyword mode extensions - <a href="/os/community/arc/caselog/2008/777/">PSARC/2008/777</a><br />
    CPU Deep Idle Keyword - <a href="/os/community/arc/caselog/2008/663/">PSARC/2008/663</a><br />
  </td>
</tr> 
```

并且里面有一些相对的url路径，现在我想用正则表达式搜索它并用绝对url路径替换它们。因为我知道 urljoin 可以做这样的替换工作，

```
>>> urljoin("http://www.opensolaris.org/os/community/on/flag-days/all/",
...         "/os/community/arc/caselog/2008/777/")
'http://www.opensolaris.org/os/community/arc/caselog/2008/777/' 
```

现在我想知道如何使用正则表达式搜索它们，最后将代码转换为，

```
<tr class="build">
  <th colspan="0">Build 110</th>
</tr>
<tr class="arccase project flagday">
  <td>Feb-25</td>
  <td></td>
  <td></td>
  <td></td>
  <td>
    <a href="http://www.opensolaris.org/os/community/on/flag-days/all//pages/2009022501/">Flag Day and Heads Up: Power Aware Dispatcher and Deep C-States</a><br />
    cpupm keyword mode extensions - <a href="http://www.opensolaris.org/os/community/arc/caselog/2008/777/">PSARC/2008/777</a><br />
    CPU Deep Idle Keyword - <a href="http://www.opensolaris.org/os/community/arc/caselog/2008/663/">PSARC/2008/663</a><br />
  </td>
</tr> 
```

我对正则表达式的了解太差了，以至于我想知道该怎么做。谢谢

**我已经用美汤完成了工作，哈哈~谢谢大家！**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-02-26T09:42:12.837

我不确定您要实现什么，但[在 HTML 中使用 BASE 标记](http://www.w3schools.com/TAGS/tag_base.asp)可能会为您完成此技巧，而无需在处理时使用正则表达式。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-02-26T10:16:50.180

首先，我建议使用 HTML 解析器，例如[BeautifulSoup](http://www.crummy.com/software/BeautifulSoup/)。HTML 不是正则语言，因此不能仅通过正则表达式完全解析。虽然可以解析部分 HTML。

如果你不想使用完整的 HTML 解析器，你可以使用类似这样的东西来近似工作：

```
import re, urlparse

find_re = re.compile(r'\bhref\s*=\s*("[^"]*"|\'[^\']*\'|[^"\'<>=\s]+)')

def fix_urls(document, base_url):
    ret = []
    last_end = 0
    for match in find_re.finditer(document):
        url = match.group(1)
        if url[0] in "\"'":
            url = url.strip(url[0])
        parsed = urlparse.urlparse(url)
        if parsed.scheme == parsed.netloc == '': #relative to domain
            url = urlparse.urljoin(base_url, url)
            ret.append(document[last_end:match.start(1)])
            ret.append('"%s"' % (url,))
            last_end = match.end(1)
    ret.append(document[last_end:])
    return ''.join(ret) 
```

例子：

```
>>> document = '''<tr class="build"><th colspan="0">Build 110</th></tr> <tr class="arccase project flagday"><td>Feb-25</td><td></td><td></td><td></td><td><a href="../pages/2009022501/">Flag Day and Heads Up: Power Aware Dispatcher and Deep C-States</a><br />cpupm keyword mode extensions - <a href="/os/community/arc/caselog/2008/777/">PSARC/2008/777</a><br /> CPU Deep Idle Keyword - <a href="/os/community/arc/caselog/2008/663/">PSARC/2008/663</a><br /></td></tr>'''
>>> fix_urls(document,"http://www.opensolaris.org/os/community/on/flag-days/all/")
'<tr class="build"><th colspan="0">Build 110</th></tr> <tr class="arccase project flagday"><td>Feb-25</td><td></td><td></td><td></td><td><a href="http://www.opensolaris.org/os/community/on/flag-days/pages/2009022501/">Flag Day and Heads Up: Power Aware Dispatcher and Deep C-States</a><br />cpupm keyword mode extensions - <a href="http://www.opensolaris.org/os/community/arc/caselog/2008/777/">PSARC/2008/777</a><br /> CPU Deep Idle Keyword - <a href="http://www.opensolaris.org/os/community/arc/caselog/2008/663/">PSARC/2008/663</a><br /></td></tr>'
>>> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-02-26T10:00:31.920

不要使用正则表达式来解析 HTML。为此使用真正的解析器。例如[BeautifulSoup](http://www.crummy.com/software/BeautifulSoup/)。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2010-11-20T09:50:00.713

这并不优雅，但可以完成工作：

```
import re
from urlparse import urljoin
relative_urls_re = re.compile('(<\s*a[^>]+href\s*=\s*["\']?)(?!http)([^"\'>]+)', re.IGNORECASE)
relative_urls_re.sub(lambda m: m.group(1) + urljoin(base_url, m.group(2)), html) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-02-26T09:48:14.743

这样的事情应该这样做：

```
"(?:[^/:"]+|/(?!/))(?:/[^/"]+)*" 
```

# ssl - 我的 SSL 证书应该使用什么 RSA 密钥长度？

> ID：589834
> 
> 赞同：101
> 
> 时间：2009-02-26T09:37:43.707
> 
> 标签：ssl, cryptography, rsa, ssl-certificate, csr

我正在创建 CSR，我想知道哪个长度可以说是我的 RSA 密钥的最佳长度。

当然，384可能太弱了，16384可能太慢了。

**根据证书的生命周期，是否就应该使用的密钥长度达成共识？**

编辑：像大多数人一样，我希望我的钥匙相当强大。我不担心 NSA 可能会在 2019 年破坏我的密钥。我只想知道当一个人计划开展正常业务（例如电子商务网站）时，最佳实践是什么

* * *

## 回答 #1

> 赞同：115
> 
> 时间：2009-02-26T09:43:39.167

**截至 2020 年，RSA 密钥应为 2048 位。**

## 1024 位

*   1024 位 RSA 证书已过时且不被浏览器接受。
*   [Firefox](https://blog.mozilla.org/security/2014/09/08/phasing-out-certificates-with-1024-bit-rsa-keys/)于 2014 年停止接受 1024 位 RSA 证书。
*   证书颁发机构在 2014 年或之前停止提供 1024 位 RSA 证书。请参阅[GlobalSign](https://www.globalsign.com/en/ssl-information-center/1024-bit-public-and-private-keys)或[Comodo](https://www.comodo.com/e-commerce/ssl-certificates/upgrade-ssl-certificate-to-2048-bit-before-31-december.php)通知。
*   1024 位密钥已被弃用，因为它们可能在一个小型数据中心（可能在几个月内有数千个 CPU 或数百个 GPU）的情况下被破解。它可能看起来很多，但任何大型组织或政府都可以做到。

## 2048 位

*   **2048 位 RSA 证书是当前使用的公认标准。**
*   由 CA 提供并由软件使用的默认基线。
*   最终也会被破解。不知道什么时候，但可能需要几十年。
*   将大小翻倍需要更多数量级的计算能力才能破解。请参阅问题[RSA 2048 与 1024 相比强多少](https://crypto.stackexchange.com/questions/8971/how-much-stronger-is-rsa-2048-compared-to-rsa-1024)。

## 4096 位

*   下一步是 4096 位 RSA 证书
*   广泛可用和支持。所有主要 CA 都可以提供 2048 位和 4096 位 RSA，包括[let's encrypt](https://letsencrypt.org/fr/docs/integration-guide/)。
*   计算成本与密钥大小不是线性的。4096 的速度没有 2048 的两倍，处理速度可能慢 10 倍。**不要盲目地将证书升级到 4096 位而不考虑性能影响**。
*   “网络”主要保留在 2048 位证书上，因为它无法承受 4096 位的硬件成本。考虑像谷歌、CloudFlare、NetFlix 等拥有巨大流量和硬件占用的大型参与者。

## 3072 位

*   3072 位不是一回事。直接跳转到 4096 位。
*   完全可以进行 3072 位加密，只是没有软件真正实现、支持和正式宣传它。
*   从历史上看，大约在 2010 年至 2015 年，曾尝试针对 4096 的额外计算成本并不理想的用例推出 3072。它消失了，但仍有一些旧文章传播（更快）3072 的优点。

## 额外的

*   RSA 于 1977 年首次公开描述，近 50 年后它仍然很强大。只需增加位数以跟上更快的计算机。
*   还有另一种基于椭圆曲线的公钥密码学方法，参见 ECDSA (1992)。
*   用户的能力和攻击者的能力之间存在巨大的脱节。Web 服务器或移动客户端具有一个（低功耗）CPU。攻击者可以拥有一个完整的数据中心，作为参考，一个新建的 AWS 数据中心托管了大约 60 000 台服务器。
*   令人难以置信的是，单个移动设备可以在几秒钟内计算出一些数学……数百万台计算机一生都无法梦想猜测。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2009-02-27T19:11:16.220

由于许多客户要求遵守 NIST 加密标准，我使用 NIST 特别出版物 800-57，[*密钥管理建议第 1 部分，*](https://nvlpubs.nist.gov/nistpubs/SpecialPublications/NIST.SP.800-57pt1r5.pdf) §5.6 中的指南。我们的大多数应用程序都非常适合 112“位”安全性，因此这对应于对称密码的三重 DES（或高达 128 位 AES 的小凸起）和 RSA 的 2048 位密钥。粗略的等价物见表 2。

无论是否有效，能够将他们推荐给 NIST 出版物有助于客户更好地了解安全性（如果他们愿意询问的话）。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-01-21T08:45:45.667

证书颁发机构不会签署大小小于 2048 位的 csr，因此您应该将 csr 生成为 2048 位。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-06-22T18:14:56.913

今年 8 月，Microsoft 将向 Server 2003/2008、Win7 等部署补丁程序。这将需要使用至少 1024 位的 RSA 密钥。所以你不妨开始制定你的“最低限度”标准。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2014-07-22T09:52:54.030

对于网站上使用的 SSL 证书，请务必注意来自 Thawte.com 网站（截至 2014-07-22）的此文本：

> [证书颁发机构/浏览器 (CA/B) 论坛](https://www.cabforum.org/Baseline_Requirements_V1.pdf)制定的行业标准要求 2014 年 1 月 1 日之后颁发的证书必须至少为 2048 位密钥长度。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2017-02-06T10:08:38.853

我需要创建几个新的 SSL 证书，但对上面的答案不满意，因为它们看起来模糊或过时，所以我做了一些挖掘。最重要的是，选择的答案是正确的使用**“2048-bit keys...long is meaningless”**。

将位长增加到 4096 会为您的服务器增加[潜在的有意义的负载](https://certsimple.com/blog/measuring-ssl-rsa-keys)（取决于您现有的负载），同时基本上提供[微不足道的安全升级](https://www.yubico.com/2015/02/big-debate-2048-4096-yubicos-stand/)

如果您需要比 2048 位更长的密钥，则不需要更长的位长，则需要一种新算法

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-03-31T19:33:31.350

我认为 4096 适合 RSA

检查[此链接](http://www.magazin.sslmarket.de/inpage/google-chrome-und-sha-1-zertifikate-ende-der-sha-1-signatur/)

SHA-1 签名的终结并不是什么新鲜事，但谷歌加快了 chrome 的进程。在接下来的几周内，您应该检查他们的 SSL 证书。

[这可能会有所帮助](https://www.sslmarket.de/ssl/geotrust-true-businessid-ev/)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-02-04T12:48:49.913

ENISA 推荐 15360 位。查看 PDF（第 35 页）

[http://www.enisa.europa.eu/activities/identity-and-trust/library/deliverables/algorithms-key-sizes-and-parameters-report/at_download/fullReport](http://www.enisa.europa.eu/activities/identity-and-trust/library/deliverables/algorithms-key-sizes-and-parameters-report/at_download/fullReport)

# c++ - 关于 OpenGL 的问题以及将 C 转换为 C++ 的过程

> ID：589836
> 
> 赞同：1
> 
> 时间：2009-02-26T09:38:27.027
> 
> 标签：c++, opengl

好的。所以我想用一个用c++写的文件。我在c中运行代码并且绝对没有问题。

由于我不懂c，所以我用了一些转换软件，但效果不佳（猜测编码格式不是它需要的样式）。我决定自己尝试一下，看起来我所要做的就是将一些 malloc 语句更改为新语句并用 delete 替换 free。所以我运行了这个程序，看起来大部分功能都可以正常工作，但是这个给我带来了麻烦。

当我尝试更新新图像的显示时（我正在读取 tiff 图像数据并将其显示在屏幕上），我在这些特定语句中遇到了问题：

```
glutReshapeWindow(ImageWidth,ImageLength);
glClear(GL_COLOR_BUFFER_BIT);//these
glRasterPos2i(0, 0);//three
glDrawPixels(ImageWidth, ImageLength, GL_RGB,
     GL_UNSIGNED_BYTE, ImageData);//statements are the ones giving me the error 
```

我在代码块中包含了第一条语句，以表明它不会立即破坏任何类型的 OpenGl 调用。

我不断收到错误

```
Cannot access memory at address 0xfbad248c
Cannot access memory at address 0xfbad248c
Cannot access memory at address 0xaabbeeaa 
```

我知道这可能有点模糊，但是这个错误的一些常见来源可能是什么？它在 c 中工作，在快速切换到 c++ 时可能导致此错误？

谢谢，如果您需要更多信息，请告诉我。

* * *

好吧，所以我并没有真正使用我相信的标准 OpenGL 库（这是一个类，我是由一位教师提供的库文件）。我有代码

```
#include <GL/glut.h> 
```

作为我的#include。这些库与 c 文件中的库完全相同，因为我只是将它们复制并粘贴到我的 c++ 项目中。（我还在另一个 c++ 项目中以有限的方式与他们合作过）。以防万一，我检查了我的文件系统中的文件“OPENGL32.DLL”和“GLU32.DLL”，但没有找到它们。

我可能应该包括这些额外的细节：

在调用实际输入循环之前，在程序开始时调用 init() 方法：

```
void
init(void)
{
   glClearColor (0.0, 0.0, 0.0, 0.0);
   glShadeModel(GL_FLAT);
   makeCheckImage();
   glPixelStorei(GL_UNPACK_ALIGNMENT, 1);
} 
```

此方法似乎工作正常（在此函数调用后不久创建了一个简单的棋盘模式）。我不确定这些属于哪种 OpenGL 文件（“OPENGL32.DLL”或“GLU32.DLL”），但希望这可以稍微缩小问题范围。

至于 ImageData 行，我不相信 ImageData 对象已损坏或类似的东西，因为您所说的某些原因以及我发布的第一个代码块中的代码（错误的来源) 位于 else 块中：

```
if (ImageData == NULL) {/*code*/}
else{/*this is where the error code is*/} 
```

如果您认为有帮助，我可以在 makefile 上发布信息（如果不是，只是不想将这个线程与这些东西混淆）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-02-26T10:30:29.010

我不知道您对 C 和 C++ 之间的差异有多少经验，所以我不想光顾您，但值得一试：

你用过吗

```
unsigned char* data = new unsigned char[size]; //correct
//....
delete[] data; 
```

（数组分配）或

```
unsigned char* data new unsigned char(size); //wrong
//....
delete data; 
```

（分配一个具有值大小的字符）

为您的图像数据？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-26T09:45:31.143

第一个不出错的语句是来自 GLU32.DLL 的命令，其他应该是 OPENGL32.DLL 命令。检查您是否正确链接了库并尝试复制程序目录中的 DLL。

最后一行也可能是您的 ImageData 的一些错误，但是由于您说它在 C 中工作并且您只用 new/delete 替换了 malloc/free，所以那里不太可能有问题，无论如何您也应该检查一下。一种可能是在不涉及 OpenGL 调用的情况下读取整个 ImageData 数组。顺便说一句，我希望 ImageLength 不是完整图像文件的长度，而是图像的高度。

编辑：好的，所以它似乎有点不同。您发布的 init 函数似乎可以访问其他 gl... 函数，因此您的库以某种方式工作。顺便说一句，有趣的是您找不到 DLL。它们通常存储在 Windows\System32 路径中。

“if (ImageData == NULL)”是第一步，但您也应该尝试读取所有 ImageWidth*ImageLength 条目以进行调试，也许您分配了错误的字节数。

崩溃的另一个原因可能是您使用的头文件不是最新的，并且与您的调用或 DLL 不兼容。

如果所有这些都不能解决您的问题，那么发布 makefile 确实很有用。

# java - 如何处理 servlet 中的浏览器关闭事件

> ID：589838
> 
> 赞同：0
> 
> 时间：2009-02-26T09:38:52.300
> 
> 标签：java

我的 Web 应用程序中有 html 页面。该页面由客户端锁定并由同一客户端解锁。如果客户端忘记解锁或关闭浏览器，按页面上的返回键，页面的其他链接将一直锁定，无法解锁。如果他忘记解锁，我需要在上述情况下解锁页面谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-26T09:44:53.940

指定锁的超时时间。由于 http 是无状态的，因此您无法以“正常方式”观察客户端。

**编辑**：我会通过设置/观察一些布尔标志来为每个客户端/锁定服务器端的协议活动。A`TimerTask`定期观察标志，将标志设置为`false`if it's`true`并杀死锁 if it's `false`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-27T05:36:16.850

我建议您考虑一种更适合您环境的操作特性的设计。

考虑一种乐观锁定形式，而不是在单独的事务中锁定和解锁（这就是您现在所拥有的） - 基本上，允许任何人访问数据，但如果他们在另一个用户提交修改后提交修改相同的数据，拒绝并让用户有机会再次进行更改。

让用户/客户端显式锁定和解锁很容易编码，但很难使用（我们都关心用户的体验！） Cheerio。

# apache-flex - Flex/AS3 拖放 - 自定义拖放反馈

> ID：589840
> 
> 赞同：1
> 
> 时间：2009-02-26T09:39:45.027
> 
> 标签：apache-flex, actionscript-3, drag-and-drop

我正在使用一个`HorizontalList`组件来显示图像列表，您可以从另一个组件中拖动图像加入列表，这一切都很好。

如果我这样做，`list.showDropFeedback(event)`我会在图像顶部看到一个难看的黑条`HorizontalList`- 我真正想要的是图像左/右的一条线，新的实际上将坐在那里。

我想我需要定义一个自定义 DropFeedback 来覆盖默认值。有谁知道是否有办法实现这一目标？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-23T09:23:09.293

Yuo 可以通过重写 showDropFeedback() 方法来解决它。我的代码如下：

```
 import mx.controls.HorizontalList;
import mx.controls.listClasses.IListItemRenderer;
import mx.core.mx_internal;
import mx.events.DragEvent;

use namespace mx_internal;

public class HList extends HorizontalList
{
    public function HList()
    {
        super();                        
    }   

        override public function showDropFeedback(event:DragEvent):void
        {

           super.showDropFeedback(event);

            dropIndicator.setActualSize(rowHeight - 4, 4);
            DisplayObject(dropIndicator).rotation = 90;

        }

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-12T11:52:11.643

我最终通过在我的应用程序样式中添加以下内容来解决这个问题..

```
HorizontalList {
 dropIndicatorSkin: ClassReference("com.package.HorizontalListDropIndicator");
} 
```

并创建我的自定义皮肤..

```
package com.package {

 import flash.display.Graphics;
 import mx.skins.ProgrammaticSkin;

 public class HorizontalListDropIndicator extends ProgrammaticSkin {

  public function HorizontalListDropIndicator() {
   super();
  }

  override protected function updateDisplayList(w:Number, h:Number):void {  
   super.updateDisplayList(w, h);

   var g:Graphics = graphics;

   g.clear();
   g.lineStyle(2, 0xFF0000);

   g.moveTo(0, 0);
   g.lineTo(0, 250);

  }
 }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-19T18:55:05.070

看起来这是 Flex 框架中的一个错误：

`Flex Builder 3/sdks/3.3.0/frameworks/projects/framework/src/mx/controls/HorizontalList.as`（第 95-105 行）

```
public function HorizontalList()
{
    super();

    _horizontalScrollPolicy = ScrollPolicy.AUTO;
    _verticalScrollPolicy = ScrollPolicy.OFF;

    direction = TileBaseDirection.VERTICAL;
    maxRows = 1;
    defaultRowCount = 1;
} 
```

请注意，**Horizo​​ntalList**的构造函数将方向值初始化为**Vertical**。

一种快速简便的解决方法是`direction="horizontal"`在 MXML 中简单地指定：

```
<mx:HorizontalList id="fooLst" direction="horizontal" dataProvider="{foo}" /> 
```

如果此错误尚未修复（并等待下一个版本），我会感到惊讶，但我会检查[Flex SDK 错误数据库](http://bugs.adobe.com/jira/browse/SDK)并提交报告，如果它没有记录在案。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-02-26T17:41:50.610

有一个名为 dropIndicatorSkin 的样式属性，它控制当您在基于列表的组件上拖动时显示的线条的外观。来自 adobe 文档：

> **下降指示器皮肤**
> 
> 用于指示可以将拖动项目放置在何处的外观。当 ListBase 派生组件是拖放操作中的潜在放置目标时，对该`showDropFeedback()`方法的调用会生成此类的一个实例，并将其`itemRenderer`放置在项目上方一个像素处，如果发生放置，则掉落物品之后的物品。默认值为`mx.controls.listClasses.ListDropIndicator`。

所有功能都内置在 Horizo​​ntalList 中以执行您的要求，但 Horizo​​ntalList 中似乎存在一个错误，它没有将其方向属性设置为水平。

您需要做的就是将 direction="horizo​​ntal" 放在 mxml 声明中，它会将 dropIndicatorSkin 旋转 90 度并将其放置在项目之间而不是它们之上：

```
<mx:HorizontalList ... direction="horizontal" ... /> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-02-27T11:35:31.497

谢谢，这似乎按预期旋转了 dropIndicator，但会产生其他非常意外的行为。列表上的水平滚动条突然消失，将一个项目拖到列表上使其直接跳到最后......感觉就像我快到了，但不完全！

我的 AS3 代码....

```
// in constructor... (extends HorizontalList)
this.direction = "horizontal";

this.addEventListener(DragEvent.DRAG_ENTER, onDragEnter);
this.addEventListener(DragEvent.DRAG_OVER, onDragOver);
this.addEventListener(DragEvent.DRAG_EXIT, onDragExit);
this.addEventListener(DragEvent.DRAG_DROP, onDragDrop);

private function onDragEnter(event:DragEvent):void {
    event.preventDefault();
    if (event.dragSource.hasFormat("treeItems") || event.dragSource.hasFormat("items")) {
        DragManager.acceptDragDrop(event.target as UIComponent);
    }
    this.showDropFeedback(event);
}

public function onDragOver(event:DragEvent):void {
    event.preventDefault();
    this.showDropFeedback(event);
}

public function onDragExit(event:DragEvent):void {
    event.preventDefault();
    this.showDropFeedback(event);
}

private function onDragDrop(event:DragEvent):void {
    event.preventDefault();
    this.hideDropFeedback(event);
    //....
} 
```

# linux - 新贵调用脚本（用于插入的 USB 驱动器）

> ID：589841
> 
> 赞同：8
> 
> 时间：2009-02-26T09:40:49.953
> 
> 标签：linux, bash, detect, usb-drive, upstart

我知道 Ubuntu（和 Fedora）使用[Upstart](http://upstart.ubuntu.com/)而不是经典的 System V init 守护进程（SysVinit）。

我想知道如何检测何时插入 USB 驱动器、挂载它并将一些文件复制到其中。我希望 Upstart 为此调用我自己的脚本。

如果可能的话，我希望 Upstart 为*特定*的USB 驱动器调用脚本，这样我就可以获得每个 USB 驱动器的正常功能，除了我的“即时备份”USB 驱动器。

如果 Upstart 可以将 USB 驱动器标识字符串作为参数发送到我的脚本，我想这将是理想的解决方案，因为我可以在脚本中包含 id 字符串，并且可能使脚本处理两个 USB 驱动器而无需变化很大。

顺便说一句，你知道除了 Upstart 之外的任何其他系统，它以一种很好的方式处理 USB 驱动器、网络安装的文件系统等？（因为[SysVinit 似乎不是](http://www.linux.com/feature/125977)。）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-02-27T13:45:36.253

`upstart`似乎没有开箱即用的“usb device plugged in”信号。到目前为止，重点一直是做与 init 几乎完全相同的事情，并且“很酷的广告功能”是在未来。

[来自 Fedora wiki](http://fedoraproject.org/wiki/Features/Upstart#Benefit_to_Fedora)：“......现在让 Upstart 本身就位，即使它现在只能像 SysV 那样运行，也将使我们能够开始向这个模型的平稳过渡。”

幸运的是，您可以通过让 udev 运行脚本来发送您的自定义 upstart 信号来自己实现未来，以便 upstart 可以调用您的备份脚本。您也可以让 udev 直接调用您的备份脚本。

`udev`已经有一种简单的方法来在设备插入和拔出时运行脚本。请参阅[使用 udev 规则重命名您的 USB 硬盘驱动器的设备名称](http://web.archive.org/web/20090210121543/http://linuxconfig.org/Override_/_rename_your_usb_hard_drive%27s_device_name_with_udev_rules)。在我的系统上，我必须使用`udevadm monitor --env`而不是教程的`udevmonitor --env`. 遵循本教程后，您将创建另一个像这样的 udev 规则：

```
echo 'SUBSYSTEM=="block", ID_SERIAL_SHORT=="101A9041C67D182E", \
NAME="myusbdrive", \
RUN+="/my/backup/script $env{NAME}"' > /etc/udev/rules.d/S96-mydrive.rules 
```

替换`ID_SERIAL_SHORT`为您的设备的实际 ID，以及`$env{NAME}`您的脚本查找备份设备所需的任何 udev 环境变量。您可能需要将脚本置于后台以避免阻塞 udev。

如果你想使用 upstart，你可以让你的 udev 规则运行`/sbin/initctl emit back-it-up VARIABLE=$env{VARIABLE} ...`，然后写一个以`/etc/event.d`行开头的脚本`start on back-it-up`。

另请参阅[如何在 Python 中侦听 Linux 中的“插入 USB 设备”事件？](https://stackoverflow.com/questions/469243/how-can-i-listen-for-usb-device-inserted-events-in-linux-in-python)有关对[DBus](http://www.freedesktop.org/wiki/Software/dbus)执行相同操作的提示。如果您想让登录的用户运行用户模式“监视备份驱动器”守护程序，DBus 可能会更方便。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2010-08-18T17:44:31.440

在 Ubuntu 9.10 和更新版本中，Upstart 通过该`upstart-udev-bridge`服务具有一些 udev 功能。

```
#thumbdrive_special.conf
start on block-device-added

task

script
   if [ `blkid $DEV` -eq "YOUR-THUMBDRIVES-UUID" ]; then
      /home/you/bin/thumbdrive_special $DEV
   fi
end script 
```

我喜欢新贵的简单和优雅。但是，如果不太优雅，DBus 解决方案可能会更好。使用 DBus 解决方案，您可以向用户弹出通知并提供简单的用户控制。

# asp.net - 我可以从我的 ASP.NET 应用程序以编程方式将 IP 地址添加到 IIS7 中的动态 IP 限制扩展吗？

> ID：589851
> 
> 赞同：7
> 
> 时间：2009-02-26T09:44:00.913
> 
> 标签：asp.net, iis, iis-7

我正在创建一个基于论坛的网站，并希望阻止发布垃圾邮件或滥用行为的成员。我正在考虑使用 HTTPModule 来执行此操作，但我遇到了 IIS7 的动态 IP 限制扩展。我想知道是否可以将 IP 从我的应用程序动态添加到扩展程序？

此外，如果您有该扩展的经验，这将是很棒的。我特别 有兴趣知道它是否会影响高流量网站的性能。

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-08-16T08:01:14.840

我也对这个感兴趣。

起初，我使用 IIS7 中的 UI 将 IP 地址列入黑名单。

![在此处输入图像描述](https://i.stack.imgur.com/dc700.png)

我确实看过上面提到的 Rick Strahl 链接，但在这里找到了一个很好的资源：

[http://www.iis.net/configreference/system.webserver/security/ipsecurity/add](http://www.iis.net/configreference/system.webserver/security/ipsecurity/add)

该页面上的代码示例向您展示了如何使用 C# 执行操作。这是该网站的片段

```
using System;
using System.Text;
using Microsoft.Web.Administration;

internal static class Sample
{
   private static void Main()
   {
      using (ServerManager serverManager = new ServerManager())
      {
         Configuration config = serverManager.GetApplicationHostConfiguration();
         ConfigurationSection ipSecuritySection = config.GetSection("system.webServer/security/ipSecurity", "Default Web Site");
         ConfigurationElementCollection ipSecurityCollection = ipSecuritySection.GetCollection();

         ConfigurationElement addElement = ipSecurityCollection.CreateElement("add");
         addElement["ipAddress"] = @"192.168.100.1";
         addElement["allowed"] = false;
         ipSecurityCollection.Add(addElement);

         ConfigurationElement addElement1 = ipSecurityCollection.CreateElement("add");
         addElement1["ipAddress"] = @"169.254.0.0";
         addElement1["subnetMask"] = @"255.255.0.0";
         addElement1["allowed"] = false;
         ipSecurityCollection.Add(addElement1);

         serverManager.CommitChanges();
      }
   }
} 
```

要获取 Microsoft.Web.Administration 包，请在 Visual Studio 中转到工具 -> Nuget 包管理器 -> 包管理器控制台。

然后输入：

```
Install-Package Microsoft.Web.Administration 
```

执行相同任务的另一种方法是使用命令行和 appcmd 命令。

下面的命令做同样的事情：

```
appcmd.exe set config "Default Web Site/SSM" -section:system.webServer/security/ipSecurity /+"[ipAddress='192.168.100.1',allowed='False']" /commit:apphost 
```

并且可以使用以下代码从代码中调用：

```
string website = "Default Web Site/SSM";
string ipAddress = "192.168.100.1";
string allowDeny = "False";

string cmd = string.Format("%systemroot%\\system32\\inetsrv\\appcmd.exe set config \"{0}\" -section:system.webServer/security/ipSecurity /+\"[ipAddress='{1}',allowed='{2}']\" /commit:apphost", website, ipAddress, allowDeny);
Process.Start(cmd); 
```

上面的命令有效，但事实证明，如果你从 C# 调用它，它会抱怨说“系统找不到指定的文件异常”。要解决这个问题，您必须提供管理员用户名/密码。

这是功能：

```
void BlacklistIP(string ipAddress)
{
    string website = "Default Web Site/SSM";
    string allowDeny = "False";
    string domain = "";

    string args = string.Format(" set config \"{0}\" -section:system.webServer/security/ipSecurity /+\"[ipAddress='{1}',allowed='{2}']\" /commit:apphost", website, ipAddress, allowDeny);

    System.Security.SecureString password = new System.Security.SecureString();
    password.AppendChar('y');
    password.AppendChar('o');
    password.AppendChar('u');
    password.AppendChar('r');
    password.AppendChar('p');
    password.AppendChar('a');
    password.AppendChar('s');
    password.AppendChar('s');
    password.AppendChar('w');
    password.AppendChar('o');
    password.AppendChar('r');
    password.AppendChar('d');

    Process.Start(@"C:\windows\System32\inetsrv\appcmd.exe", args, "Administrator", password, domain);
} 
```

瞧！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-03-02T07:30:01.297

看起来 Rick Strahl 使用 IIS API 实现了这一点，请参见下面的链接：

[http://www.west-wind.com/WebLog/posts/59731.aspx](http://www.west-wind.com/WebLog/posts/59731.aspx)

安德鲁

# c# - 从 HTML 导出为 PDF (C#)

> ID：589852
> 
> 赞同：11
> 
> 时间：2009-02-26T09:44:34.080
> 
> 标签：c#, asp.net, html, export

> **可能重复：**
> [在 .NET 中将 HTML 转换为 PDF](https://stackoverflow.com/questions/564650/convert-html-to-pdf-in-net)

在我们的应用程序中，我们将 html 文档作为报告和导出。但是现在我们的客户想要一个按钮来将该文档保存在他们的 PC 上。问题是文档包含图像。您可以使用以下代码创建一个word文档：

```
private void WriteWordDoc(string docName)
{
    Response.Buffer = true;
    Response.ContentType = "application/msword";
    Response.AddHeader("content-disposition", String.Format("attachment;filename={0}.doc", docName.Replace(" ", "_")));
    Response.Charset = "utf-8";
} 
```

但问题是图像只是链接，因此没有嵌入到 word 文档中。

因此，我正在寻找替代 PDF 似乎是一个不错的选择，有人知道 C# 的优秀 pdf 编写器吗？一个有一些很好的参考资料并且已经过正确测试的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-02-26T09:55:01.230

我会选择在服务器上创建一个 PDF 文件。有许多产品可以这样做，但您应该研究最适合您的情况的产品，考虑以下几点：

*   创建 PDF 所需的计算机资源。如果它是一个复杂的文档，它可能会花费太长时间或者减慢对其他用户的响应。
*   需要相同功能的并发用户数
*   成本（有免费的解决方案以及重量级的商业产品）。

我不会依赖 Word 格式，因为 PDF 会为您提供更多保证，确保它在未来可以阅读。

此外，将硬链接嵌入图像的选项对我来说似乎不是一个好主意。如果用户想要打开文档而服务器无法访问怎么办？

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-02-26T09:57:33.440

你有一个更大的问题......保存生成的文件是浏览器的特权。浏览器如何处理任何特定的文件流，即使您设置了内容类型，也完全取决于浏览器。您最好的选择可能是使用 ABCpdf 之类的东西将 HTML/图像转换为 PDF。我在他们的软件上很幸运，他们得到了不错的支持。当然，这是您必须安装的第三方工具。如果不这样做，您的下一个最佳选择可能是使用图像和其他文件（CSS、javascript？）创建 HTML 的 zip……但这需要相当多的后端逻辑。

某些浏览器内置了此功能。您可以要求您的用户使用它。:)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2010-06-16T18:48:30.457

开源pdf流生成.net程序集：http: [//sourceforge.net/projects/itextsharp/](http://sourceforge.net/projects/itextsharp/)

一旦掌握了窍门，您将永远不会使用任何 3rd 方#%$^# 或阻塞您的服务器执行 IO 并再次占用临时文件的空间。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-02-26T09:47:59.220

您必须将图像提供到 Internet 上某个可用位置的绝对链接。

将文档加载到 Word 中后，将“HTML”文档另存为 MSWord 文档，应该包含图像（或者可能是一个选项？）。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-11-11T01:11:00.723

[ExpertPDF](http://www.html-to-pdf.net/)在将 HTML 转换为 PDF（包括图像）方面做得不错。在内部，它使用 IE 的托管副本在转换 HTML 之前呈现 HTML，这意味着该组件不适用于 Linux 上的 Mono，这意味着 IE 的怪癖是您的 PDF 的怪癖。也就是说，它在呈现适度复杂的布局方面做得很好，您可以使用 CSS page-break-before 等来控制分页。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2011-01-19T01:38:30.290

我喜欢[DocRaptor.com](http://docraptor.com)创建 pdf。这是一个适用于任何语言的 Web 应用程序，它使用 Prince XML，因此结果质量很高。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-02-26T09:55:45.067

我遇到[了同样的问题](https://stackoverflow.com/questions/362381/how-can-i-embed-images-in-an-asp-net-generated-word-file)，但没有解决它，因为我们决定导出“无图像”文档，因为它首先没有任何图像。

然而，当我搜索问题时，我遇到了[这篇文章](https://stackoverflow.com/questions/362381/how-can-i-embed-images-in-an-asp-net-generated-word-file)，关于如何使用 XSLT 导出文档。我还没有找到时间来研究它，但也许你可以尝试一下

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-02-26T10:13:46.520

MS 有一个新的页面描述格式“XPS”，可以简单地从 WPF 编程模型生成，无论是在服务器上还是在客户端上。有一个 XPS 阅读器应用程序，如 PDF 阅读器，允许用户查看和打印 XPS 文档。有一个简单的 API 可以生成 XPS 文档。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-08-06T08:22:41.067

试用**PDF Duo .Net**组件，将 HTML 转换为 PDF 到/从字符串 | 文件 | 网址 | 溪流。它是一个小型但非常有效的库，您可以在 ASP.NET 应用程序中使用它。

[在其页面上找到 ASP.NET C# 示例。](http://www.duodimension.com/html_pdf_asp.net/component_html_pdf.aspx)

# java - 非瞬态类成员的 Java PMD 警告

> ID：589855
> 
> 赞同：36
> 
> 时间：2009-02-26T09:45:10.600
> 
> 标签：java, coding-style, javabeans, pmd

在线的：

```
private boolean someFlag; 
```

我收到以下 PMD 警告：

> 找到非瞬态、非静态成员。请标记为瞬态或提供访问器。

有人可以解释为什么会出现此警告及其含义吗？（我知道如何解决它，我不明白它为什么在那里......）

我也在许多其他成员声明中得到了这个......

* * *

**编辑：**我的课程*绝对*不是 bean，也不是可序列化的......

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-02-26T10:09:08.250

我假设您的类是根据定义实现的 bean `Serializable`。瞬态变量将从序列化过程中排除。如果您对 bean 进行序列化然后反序列化，则该值实际上将具有默认值。

PMD 假设您在这里处理的是可序列化的 bean。对于一个 bean，它应该有所有成员变量的 getter/setter。由于您省略了这些，因此您暗示您的成员变量不是 bean 的一部分 ....因此不需要序列化。如果是这种情况，您应该将其从序列化中排除。您可以通过将变量标记为“瞬态”来执行此操作。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-02-26T22:27:21.140

现在我懂了。

添加此定义后：

```
private boolean someFlag; 
```

...很清楚这里会发生什么：

此错误消息确实引用了访问模式。PMD 声明 bean 引用的类也必须遵循 bean 模式。

最有可能支持属性样式的访问，例如`MyBean.referredClass.someFlag`将被翻译为`someObject.getReferredClass().getSomeFlag()`

PMD 它期望有一个`isSomeFlag/getSomeFlag`and`setSomeFlag`方法可以用来访问它的值，而不是直接访问它。

```
Found non-transient, non-static member. Please mark as transient **or provide accessors**. 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-02-26T09:59:07.663

[查看这里](http://pmd.sourceforge.net/rules/javabeans.html)发生的规则

> ### BeanMembersShouldSerialize
> 
> 如果一个类是 bean，或者被 bean 直接或间接引用，则它需要是可序列化的。成员变量需要在类中标记为瞬态、静态或具有访问器方法。将变量标记为瞬态是最安全和最简单的修改。访问器方法应该遵循 Java 命名约定，即如果你有一个变量 foo，你应该提供 getFoo 和 setFoo 方法。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-02-26T09:58:34.857

瞬态用作 jvm 序列化的提示，在将类写入流/到磁盘时应该忽略它。因此，如果您的实例被恢复并成为内存中的对象，则该字段将为空。

静态成员的问题是，一次只有一个在内存中。所以它并不完全清楚反序列化时应该发生什么。应该保留旧值吗？还是缓存版本覆盖旧版本？

你应该做什么：根本不要在 Serializable 类中使用静态字段。将它移到其他地方，或者更好的是，根本不要使用静态成员/单例。它们引入了一个全局状态，这可能会导致许多问题和糟糕的 OO 设计。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-03-04T17:24:51.147

您可以通过 2 种方式解决此问题：

1.  为成员添加 getter 和 setter 方法。
2.  使用构造函数添加 final 以设置成员的值。

# c# - 双淘汰赛的数据结构

> ID：589858
> 
> 赞同：9
> 
> 时间：2009-02-26T09:46:32.640
> 
> 标签：c#, data-structures, mvvm, tdd, tournament

我正在转换我的 Tournament Organizer 软件，该软件允许创建和操作双淘汰赛，以使用 MVVM 设计模式，以便可以更轻松地对其进行测试。在这样做的过程中，我将“模型”与直接操纵括号结构的 UI 中的一些代码分开。

这将是我为处理锦标赛而编写的第三次迭代软件。第一个是用 PHP 编写的，并将数据存储在数据库中。第二个版本是我做的WPF版本，它把数据存储在内存中，然后序列化成一个XML文件。然而，在这两个版本中，我觉得在实现的某些方面并不干净，并且似乎违反了 DRY 法则。

**如果你从头开始创建一个数据结构来处理双重消除括号，你会怎么做？**

请注意，它不需要能够通过算法自动生成括号（从预先制作的 4/8/16/32 人的双重淘汰加载是我现在的做法），只是主要用例设置比赛的获胜者并通过括号“推进”他们。

编辑：为了清楚起见，数据结构需要处理双淘汰赛，因此潜在地，一场比赛的获胜者可能最终与另一场比赛的失败者竞争。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-02-26T21:52:12.397

所以，在终点，你有 64 支球队。所以有一个集合，不知何故，有 64 个团队。

但它们是配对的，每对都有一个赢家。在中间括号中，获胜者实际上是从括号中出现的，所以我认为您的括号对象实际上看起来像：

```
public class Bracket
{
    Team winner;  //if this is null or whatever, then we don't have a winner yet
    Bracket topBracket;  
    Bracket bottomBracket;
} 
```

...并且当您实例化您的结束时，您只需将两个子括号保留为空，只有一个获胜者。

为了处理双重淘汰，有第二个括号，它是一个失败者括号。如果您可以自动处理将失败者添加到此括号中会很好（设计一个以 32 开头的括号，将其降为 16，从获胜者括号第 2 轮中添加 16 个失败者等），但这就是全部实现。数据结构不需要改变来适应它，你只需要更多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T01:33:47.290

我对此的解决方案是拥有两组数据结构。一个用于支架部分，一个用于座椅。

```
class Match
{
    string Id;
    MatchSeat red;
    MatchSeat blue;
    MatchSeat winner;
    MatchSeat loser;
}

class MatchSeat
{
    string Id;
    Entry Entry;
} 
```

然后为了设置它，我制作了一些辅助函数来获取括号信息并构建结构。

```
{ "1", "seed1", "seed4", "W1", "L1" },
{ "2", "seed2", "seed3", "W2", "L2" },
{ "3", "W1", "W2", "W3", "L3" },
{ "4", "L1", "L2", "W4", "L4" },
{ "5", "W4", "L3", "W5", "L5" },
{ "F", "W3", "W5", "WF", "WF" } 
```

然后，当种子和赢家/输家填写完毕后，该值仅设置在一个位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-26T21:00:23.393

第一轮从叶节点开始然后向上移动的完整二叉树怎么样？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-10-06T19:17:06.827

我刚刚在我正在回答的另一个问题的侧栏中注意到这个问题，并认为我会插话：

我正在开发一个功能齐全的锦标赛 API，并且我正在开源它。

它还没有创建双淘汰赛，但最近对单淘汰赛的数据结构进行了修改，以支持双淘汰赛树结构。

[http://tournaments.codeplex.com/](http://tournaments.codeplex.com/)

# eclipse - Mylyn 在重新启动时丢失任务上下文

> ID：589865
> 
> 赞同：3
> 
> 时间：2009-02-26T09:48:31.607
> 
> 标签：eclipse, mylyn

当我重新启动 Eclipse 时，我的 Mylyn 任务被存储，但它们的上下文是空的。
我正在使用本地存储库，并且希望在重新打开 Eclipse 时返回任务的上下文。

我正在使用 Eclipse 3.4.0 和 Mylyn 3.0.4。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-26T18:45:30.160

这是你看到的错误吗？[211168](https://bugs.eclipse.org/bugs/show_bug.cgi?id=211168)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-26T09:53:10.330

您使用的是什么 Eclipse 和 Mylyn 版本？

这是一个与此问题相关的[**错误**](https://bugs.eclipse.org/bugs/show_bug.cgi?id=232664)，据说已修复，但仅在 Mylyn 2.3 中（在 eclipse3.4 中）

* * *

**[根据Mylyn 常见问题解答](http://wiki.eclipse.org/index.php/Mylyn/FAQ#Why_am_I_missing_elements_when_I_retrieve_someone_else.E2.80.99s_context.3F)**，不要忘记：

> 为了识别项目中的元素，Mylyn 依赖于项目名称在工作空间中保持一致。
> 如果创建上下文的工作区中的项目名称与其在工作区中的名称不同，则任务上下文将不会显示该项目中的元素（[错误 164058](https://bugs.eclipse.org/bugs/show_bug.cgi?id=164058)）。
> 另一种可能丢失上下文的情况是元素在工作区之外更改名称（[错误 164243](https://bugs.eclipse.org/bugs/show_bug.cgi?id=164243)）。

（不完全是你的问题，但仍然需要检查）

# java - 我应该使用 Java 日期和时间类还是使用像 Joda Time 这样的第 3 方库？

> ID：589870
> 
> 赞同：147
> 
> 时间：2009-02-26T09:51:53.533
> 
> 标签：java, date, time, jodatime

我正在创建一个基于 Web 的系统，该系统将在世界各地的国家/地区使用。必须存储的一类数据是日期和时间。

[与Joda time](http://www.joda.org/joda-time/)等 3rd 方库相比，使用 Java 日期和时间类的优缺点是什么？我想这些第三方库的存在是有充分理由的，但我自己从来没有真正比较过它们。

* * *

## 回答 #1

> 赞同：197
> 
> 时间：2009-02-26T10:16:57.450

编辑：现在 Java 8 已经发布，如果你可以使用它，那就这样做吧！`java.time`在我看来，它甚至比 Joda Time 更干净。但是，如果您在 Java-8 之前遇到问题，请继续阅读...

Max 询问了使用 Joda 的利弊……

优点：

*   它工作，非常好。我强烈怀疑 Joda 中的错误比标准 Java 库要少得多。由于设计原因，Java 库中的一些错误很难（如果不是不可能的话）修复。
*   它旨在鼓励您以正确的方式思考日期/时间处理 - 将“本地时间”的概念（例如“无论我在哪里，早上 7 点叫醒我”）和即时时间（“我正在打电话给 Ja​​mes太平洋标准时间下午 3 点；他所在的位置可能不是下午 3 点，但它是同一时刻”）
*   我相信它可以更容易地更新时区数据库，它*确实*会相对频繁地更改
*   它有一个很好的不变性故事，这使IME 的生活变得更加轻松*。*
*   从不变性开始，所有格式化程序都是线程安全的，这很棒，因为您几乎*总是*希望通过应用程序重用单个格式化程序
*   您将在学习`java.time`Java 8 方面占得先机，因为它们至少有些相似

缺点：

*   这是另一个需要学习的 API（尽管文档非常好）
*   这是另一个构建和部署的库
*   当您使用 Java 8 时，仍有一些工作需要迁移您的技能
*   我过去没有`DateTimeZoneBuilder`有效地使用。这是一个*非常*罕见的用例。

为了响应 oxbow_lakes 有效构建自己的小型 API 的想法，以下是我对为什么这是一个坏主意的看法：

*   这是工作。为什么已经为你完成了工作？
*   你团队的新人更可能熟悉 Joda，而不是你自己开发的 API
*   除了最简单的用途之外，你很可能会弄错......即使你最初*认为*你只需要简单的功能，这些东西也会变得越来越复杂，一次一点点。日期和时间操作*很难*正确完成。此外，内置的 Java API 很难正确*使用*- 只需查看日历 API 的日期/时间算法如何工作的规则即可。在这些之上构建任何东西都是一个坏主意，而不是从使用精心设计的库开始。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2009-02-26T09:54:57.580

好吧，除非您打算等待 Java 8，希望他们能够实现[更好的 API](https://jcp.org/en/jsr/detail?id=310)来操作日期和时间，否则请使用[Joda-Time](http://www.joda.org/joda-time/)。它可以节省时间并避免许多麻烦。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2009-02-26T10:03:47.623

答案是：*这取决于*

JODA（和 JSR-310）是一个功能齐全的日期/时间库，包括支持与多个日历系统一起使用。

就我个人而言，就我所需要的复杂性而言，我发现 JODA 走得太远了。标准 java`Date`和`Calendar`类中的 2 个主要（恕我直言）错误是：

1.  它们是可变的
2.  他们将即时年月日的概念混为一谈

`YearMonthDay`尽管 JODA 解决了这些问题，但您会发现为和滚动您自己的类非常容易`Instant`，它们都使用底层的 java 类进行实际的“日历”计算。然后，您不必熟悉超过 100 个类的 API、不同的格式/解析机制等。

当然，如果您确实需要不同年表的完整表示（例如希伯来语）或希望能够定义自己的虚构日历系统（例如，对于您正在编写的游戏），那么也许 JODA 或 JRS-310 适合您。如果没有，那么我建议您自己滚动可能是要走的路。

JSR-310 规范负责人是第一位编写 JODA 的 Stephen Colebourne，因此在逻辑上将*取代*JODA。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2009-02-26T11:31:05.073

这完全取决于您对日期的处理。如果您只是简单地保留它们，Java 内置的 Dates 可能会满足您的所有需求。但是，如果您正在进行大量的时间日期操作，那么使用 Joda 可能会更好。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2014-06-10T11:13:51.510

您应该使用 Joda-Time 库，因为：

1.  Joda-Time 支持[ISO 8601 标准](http://en.wikipedia.org/wiki/ISO_8601)，这是一种标准的
    日期表示方式。
2.  在 Joda-Time 中添加和减去日/月/年比 java.util.date 更容易。
3.  在 Joda-Time 中，按给定日期进行初始化要容易得多。
4.  Joda-Time 也支持时区。
5.  Joda-Time 有更好的内置解析。像“2014-02-31”这样的错误日期会作为错误抛出：`Exception in thread "main" org.joda.time.IllegalFieldValueException: Cannot parse "2014-02-31": Value 31 for dayOfMonth must be in the range [1,28].`

您可能会喜欢此页面以获取更多详细信息： [http ://swcodes.blogspot.com/](http://swcodes.blogspot.com/)

# c# - 观看上传文件夹的最佳实践？

> ID：589871
> 
> 赞同：10
> 
> 时间：2009-02-26T09:52:07.040
> 
> 标签：c#, multithreading

好的，我手上有一个有趣的问题。这里有一点背景：

我正在编写一个媒体库服务实现，它将为前端 Flash 播放器提供 URL。客户端希望能够通过将带有一些元数据的文件上传到 FTP 文件夹来将内容推送到服务中——我可以控制元数据模式。监视此文件夹的服务将拾取任何新文件，将它们复制到“内容”文件夹，然后将元数据和 URL 推送到内容服务中的内容并进入数据库。

内容服务没有问题，完成。看一个FTP文件夹是。

我当前的实现使用带有 xml 文件过滤器的 FileSystemWatcher 对象。

每个内容项目可能有一个以上的文件，例如高、中、低质量的视频。

为了简洁起见，我计划通过流程或工具强制将内容组织到自己的文件夹中，但这并不是真正的问题。

xml 文件看起来有点像这样：

```
<media>
  <meta type="video">
    <name>The Name Displayed</name>
    <heading>The title of the video</heading>
    <description>
        A lengthy description about the video..
    </description>
    <length>00:00:19</length>
</meta>
<files>
    <video file="somevideo.flv" quality="low"/>
    <video file="somevideo.flv" quality="medium"/>
    <video file="somevideo.flv" quality="high"/>
</files>
 </media> 
```

因此，当创建新文件时，FileSystemWatcher.Created 事件会触发。我有一个单独的线程运行来处理与主服务进程共享队列的内容（不要担心它使用的是生产者消费者模式，详见此处：http: [//msdn.microsoft.com/en-us/图书馆/yy12yx1f.aspx](http://msdn.microsoft.com/en-us/library/yy12yx1f.aspx)）。

这一切都很好，但现在我遇到了左右和中间的边缘情况！

我已经考虑到视频将需要更长的时间才能上传，因此处理器将尝试获得排他锁，如果失败，它将将该项目移到队列的后面并移至下一个项目。

*   如果服务崩溃或那里已经有文件会发生什么？所以我写了一个方法来排队一个现有的文件。
*   如果在排队现有文件时上传文件怎么办？希望它能处理这个问题吗？我是否应该定期重新扫描目录以查看是否遗漏了什么？

任何人都可以为这种情况推荐最佳实践吗？filesystemwatcher 是一个好主意，还是该服务应该定期扫描文件夹？

编辑：只是为了给你一些规模的想法。我们说的是总共 1000 件物品中的 10 件。可能是大块上传的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-02-26T09:57:02.537

FileSystemWatcher 是一种获取文件丢失早期可见性的实用方法，但有很多边缘情况可能导致错过事件。您仍然需要定期扫描才能确定。

避免尽可能多的互斥问题；客户端可以上传为 foo.xml.upload，然后重命名为 foo.xml 吗？这样可以避免长时间锁定文件...（您只需忽略 .upload 文件）。

另外：注意“不是在这里发明的”......有许多现有的实用程序可以监视文件夹；BizTalk 用于（一个矫枉过正的）示例。我不是说“不要自己做”，但至少要考虑预制选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-26T10:21:10.233

监视文件*创建*时的一个常见陷阱是，您可能会在上传完成之前收到您的事件，因此您最终会处理一个不完整的文件。

当然你可以检查一下，因为不完整文件的 xml 格式不会很好。但更好的解决方案 IMO 是让上传者写入临时文件，并在上传完成后将文件重命名为 *.xml。

至于 FileSystemWatcher 本身，嗯......当它用于网络共享时，我开始不信任它（`delete`事件从未被触发）。所以我编写了自己的“观察者”，它与 FSW 具有类似的界面，但只是轮询目录以进行文件创建/删除/更改。不如 FSW 优雅，但更可靠。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-26T10:04:09.197

您可能希望运行一个网络服务，上传者可以在上传完成时 ping 通。只需一个 url 就可以了，例如“ [http://www.bigtimecompany.com/ftpuploadcomplete.php](http://www.bigtimecompany.com/ftpuploadcomplete.php) ”，它在被调用时会启动任何检查 ftp 文件夹的程序。

# .net - 在 WPF 中，x:Name 和 Name 属性有什么区别？

> ID：589874
> 
> 赞同：634
> 
> 时间：2009-02-26T09:53:21.610
> 
> 标签：.net, wpf, xaml, name-attribute

`Name`有时，和属性似乎`x:Name`可以互换。

那么，它们之间的明确区别是什么，什么时候最好使用一种而不是另一种呢？

以错误的方式使用它们是否会对性能或内存产生影响？

* * *

## 回答 #1

> 赞同：510
> 
> 时间：2009-02-27T00:52:49.170

XAML 中确实只有一个名称，`x:Name`. 框架（如 WPF）可以选择将其属性之一映射到 XAML `x:Name`，方法是使用`RuntimeNamePropertyAttribute`类上的 将类属性之一指定为映射到 XAML 的 x:Name 属性。

这样做的原因是允许在运行时已经具有“名称”概念的框架，例如 WPF。例如，在 WPF 中，`FrameworkElement`引入了 Name 属性。

通常，类不需要存储名称`x:Name`即可使用。XAML 的所有`x:Name`手段都是生成一个字段以将值存储在类后面的代码中。运行时对该映射的作用取决于框架。

那么，为什么有两种方法可以做同样的事情呢？简单的答案是因为有两个概念映射到一个属性。WPF 希望在运行时保留元素的名称（可通过 Bind 等使用），并且 XAML 需要知道您希望哪些元素可以被类后面的代码中的字段访问。WPF 通过将 Name 属性标记为 x:Name 的别名，将这两者联系在一起。

未来，XAML 将有更多使用 x:Name 的用途，例如允许您通过按名称引用其他对象来设置属性，但在 3.5 及之前的版本中，它仅用于创建字段。

是否应该使用其中一个实际上是一个风格问题，而不是技术问题。我会把它留给其他人推荐。

另见[AutomationProperties.Name VS x:Name](https://stackoverflow.com/questions/4605777/automationproperties-name-vs-xname)，AutomationProperties.Name 由辅助工具和一些测试工具使用。

* * *

## 回答 #2

> 赞同：102
> 
> 时间：2009-07-14T23:34:04.000

它们不是同一件事。

`x:Name`是一个 xaml 概念，主要用于引用元素。当您为元素提供 x:Name xaml 属性时，“指定`x:Name`的成为在处理 xaml 时在基础代码中创建的字段的名称，并且该字段包含对该对象的引用。” ( [MSDN](https://docs.microsoft.com/en-us/dotnet/framework/xaml-services/x-name-directive) ) 因此，它是设计器生成的字段，默认情况下具有内部访问权限。

`Name`是 a 的现有字符串属性，`FrameworkElement`以 xaml 属性的形式列为任何其他 wpf 元素属性。

因此，这也意味着`x:Name`可以在更广泛的对象上使用。这是一种使 xaml 中的任何内容都可以通过给定名称引用的技术。

* * *

## 回答 #3

> 赞同：46
> 
> 时间：2009-02-26T10:36:02.990

x:Name 和 Name 引用不同的命名空间。

**x:name**是对 Xaml 文件顶部默认定义的 x 命名空间的引用。

```
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" 
```

只是说**Name**使用下面的默认命名空间。

```
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" 
```

**x:Name**是说使用具有**x**别名的命名空间。x 是默认值，大多数人都会保留它，但您可以将其更改为您喜欢的任何内容

```
xmlns:foo="http://schemas.microsoft.com/winfx/2006/xaml" 
```

所以你的参考是**foo:name**

[在 WPF 中定义和使用命名空间](http://windowsclient.net/learn/video.aspx?v=31429)

* * *

好的，让我们换一种方式来看。假设您将一个按钮拖放到您的 Xaml 页面上。您可以参考这两种方式**x:name**和**name**。所有*xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"* **和** *xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"*都是对多个命名空间的引用. 由于**xaml**拥有**Control**命名空间（不是 100%），并且**演示文稿**拥有**FrameworkElement**并且**Button 类**具有以下继承模式：

```
Button : ButtonBase
ButtonBase : ContentControl, ICommandSource
ContentControl : Control, IAddChild
Control : FrameworkElement
FrameworkElement : UIElement, IFrameworkInputElement, 
                    IInputElement, ISupportInitialize, IHaveResources 
```

因此，正如人们所期望的那样，从 FrameworkElement 继承的任何东西都可以访问其所有公共属性。因此，对于 Button，它从 FrameworkElement 获取其 Name 属性，位于层次结构树的最顶端。 **因此**，您可以说**x:Name**或**Name**，它们都将从 FrameworkElement 访问 getter/setter。

[MSDN 参考](http://msdn.microsoft.com/en-us/library/ms747086.aspx)

WPF 定义了 XAML 处理器使用的 CLR 属性，以便将多个 CLR 命名空间映射到单个 XML 命名空间。XmlnsDefinitionAttribute属性放置在生成程序集的源代码中的程序集级别**。**WPF 程序集源代码使用此属性将各种常用命名空间（例如 System.Windows 和 System.Windows.Controls）映射到[http://schemas.microsoft.com/winfx/2006/xaml/presentation](http://schemas.microsoft.com/winfx/2006/xaml/presentation)命名空间。

所以程序集属性看起来像：

PresentationFramework.dll - XmlnsDefinitionAttribute：

```
[assembly: XmlnsDefinition("http://schemas.microsoft.com/winfx/2006/xaml/presentation", "System.Windows")]

[assembly: XmlnsDefinition("http://schemas.microsoft.com/winfx/2006/xaml/presentation", "System.Windows.Data")]

[assembly: XmlnsDefinition("http://schemas.microsoft.com/winfx/2006/xaml/presentation", "System.Windows.Navigation")]

[assembly: XmlnsDefinition("http://schemas.microsoft.com/winfx/2006/xaml/presentation", "System.Windows.Shapes")]

[assembly: XmlnsDefinition("http://schemas.microsoft.com/winfx/2006/xaml/presentation", "System.Windows.Documents")]

[assembly: XmlnsDefinition("http://schemas.microsoft.com/winfx/2006/xaml/presentation", "System.Windows.Controls")] 
```

* * *

## 回答 #4

> 赞同：28
> 
> 时间：2009-02-26T10:03:51.210

它们都是一样的，很多框架元素自己都暴露了一个 name 属性，但对于那些不这样做的人，你可以使用 x:name - 我通常只坚持使用 x:name 因为它适用于所有东西。

控件可以根据需要将名称自身公开为依赖属性（因为它们需要在内部使用该依赖属性），也可以选择不这样做。

[此处](http://msdn.microsoft.com/en-us/library/ms752290.aspx)和[此处](http://msdn.microsoft.com/en-us/library/system.windows.frameworkelement.name.aspx)的 msdn 中的更多详细信息：

> 一些 WPF 框架级应用程序可能能够避免使用任何 x:Name 属性，因为在 WPF 命名空间中为几个重要的基类（例如 FrameworkElement/FrameworkContentElement）指定的 Name 依赖项属性满足了同样的目的。仍然有一些常见的 XAML 和框架方案需要对没有 Name 属性的元素进行代码访问，尤其是在某些动画和情节提要支持类中。例如，如果您打算从代码中引用它们，则应在 XAML 中创建的时间线和转换上指定 x:Name。
> 
> 如果 Name 可用作类的属性，则 Name 和 x:Name 可以作为属性互换使用，但如果在同一元素上同时指定两者，则会导致错误。

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2011-01-13T18:57:33.587

如果您有自定义控件，X:Name 可能会导致内存问题。它将为 NameScope 条目保留一个内存位置。

我说除非必须，否则永远不要使用 x:Name。

* * *

## 回答 #6

> 赞同：11
> 
> 时间：2013-08-27T17:12:05.670

**姓名**：

1.  只能用于 FrameworkElement 和 FrameworkContentElement 的后代；
2.  可以通过 SetValue() 和类似属性的代码隐藏设置。

**x：姓名**：

1.  可用于几乎所有 XAML 元素；
2.  不能通过 SetValue() 从代码隐藏设置；它只能使用对象的属性语法来设置，因为它是一个指令。

在 XAML 中对一个 FrameworkElement 或 FrameworkContentElement 使用这两个指令将导致异常：如果 XAML 是标记编译的，则异常将在标记编译时发生，否则在加载时发生。

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2013-01-17T18:03:57.747

唯一的区别是，如果您将用户控件用于同一程序集中的控件，则名称将无法识别您的控件，并且您将收到错误“使用 x:Name 用于同一程序集中的控件”。所以 x:Name 是 WPF 中命名控件的 WPF 版本。名称仅用作 Winform Legacy。他们想要区分 WPF 和 winforms 中控件的命名，因为他们使用 Xaml 中的属性来识别来自其​​他程序集的控件，他们使用 x: 表示控件名称。

请记住，不要仅仅为了保留它而为控件命名，因为它作为空白驻留在内存中，它会警告您名称已应用于控件但从未使用过。

* * *

## 回答 #8

> 赞同：7
> 
> 时间：2015-01-20T13:04:52.340

`x:Name`意思是：在后面的代码中创建一个字段来保存对这个对象的引用。

`Name`意思是：设置这个对象的名称属性。

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2009-02-26T09:56:56.313

我总是使用 x:Name 变体。我不知道这是否会影响任何性能，我只是发现它更容易，原因如下。如果您有自己的用户控件驻留在另一个程序集中，那么“名称”属性并不总是足够的。这使得粘贴 x:Name 属性变得更容易。

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2009-02-26T11:35:07.090

它不是 WPF 项，而是标准 XML 项，[BtBh](https://stackoverflow.com/users/6088/btbh)已正确回答，x 指的是默认命名空间。在 XML 中，当您不使用命名空间作为元素/属性的前缀时，它假定您需要默认命名空间。所以打字`Name`只是`x:Name`. 有关 XML 命名空间的更多详细信息，请参见[链接文本](http://www.w3schools.com/XML/xml_namespaces.asp)

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2015-04-29T15:47:29.303

指定的**x:Name**成为在处理 XAML 时在基础代码中创建的字段的名称，并且该字段包含对对象的引用。在 Silverlight 中，使用托管 API 创建此字段的过程由 MSBuild 目标步骤执行，这些步骤还负责连接 XAML 文件的部分类及其代码隐藏。此行为不一定是指定的 XAML 语言；这是 Silverlight在其编程和应用程序模型中使用**x:Name的特定实现。**

**[在 MSDN 上阅读更多...](https://msdn.microsoft.com/en-us/library/cc189028(VS.95).aspx)**

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2015-08-24T01:36:31.103

当您在 XAML 中声明 Button 元素时，您指的是在 Windows 运行时中定义的称为 Button 的类。

Button 有许多属性，例如背景、文本、边距、......以及一个名为 Name 的属性。

现在，当您在 XAML 中声明一个 Button 时，就像创建一个碰巧有一个名为 Name 的属性的匿名对象。

通常，您不能引用匿名对象，但在 WPF 框架中，XAML 处理器允许您通过为 Name 属性提供的任何值来引用该对象。

到现在为止还挺好。

创建对象的另一种方法是创建命名对象而不是匿名对象。在这种情况下，XAML 命名空间有一个名为 Name 的对象的属性（并且因为它在 XAML 命名空间中，因此有 X:），您可以设置该属性，以便您可以识别您的对象并引用它。

结论：

Name 是特定对象的属性，但 X:Name 是该对象的一个​​属性（有一个定义通用对象的类）。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2013-11-15T05:49:48.593

答案之一是 x:name 将在不同的程序语言（例如 c#）中使用，而 name 将用于框架。老实说，这就是我听起来的样子。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2020-06-25T11:37:18.090

`Name`也可以使用带有内部文本的属性元素语法来设置，但这并不常见。相反，`x:Name`不能在`XAML`属性元素语法中设置，也不能在使用`SetValue`;的代码中设置。它只能使用对象的属性语法来设置，因为它是一个**指令**。
If`Name`可作为类的属性使用，`Name`并且`x:Name`可以作为属性*互换*使用，但如果在同一元素上同时指定两者，则会导致解析异常。如果 XAML 是标记编译的，则异常将在标记编译时发生，否则在加载时发生。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2018-06-15T11:40:35.270

我的研究是`x:Name`全局*变量*。但是，`Name`作为*局部*变量。这是否意味着 x:Name 您可以在 XAML 文件中的任何位置调用它，但 Name 不是。
例子：

```
<StackPanel>
<TextBlock Text="{Binding Path=Content, ElementName=btn}" />
<Button Content="Example" Name="btn" />
</StackPanel>
<TextBlock Text="{Binding Path=Content, ElementName=btn}" /> 
```

您不能使用 Name 的`Binding`属性`Content`为`Button`“btn”，因为它在外部`StackPanel`

# php - 如何配置 jEdit 以选择 $ 以及变量名

> ID：589889
> 
> 赞同：2
> 
> 时间：2009-02-26T10:00:15.663
> 
> 标签：php, jedit

在 php 模式下选择“单词”时，如何设置 jEdit 以将美元符号作为变量名的一部分？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-02-26T10:37:59.660

在 jEdit 4.3pre14 中，从实用程序菜单中打开全局选项。从树中选择 Editing 并将 $ 添加到 Extra Word Characters 并应用更改。您可以将此更改应用于所有编辑模式，也可以仅应用于 php.ini。

# .net - .NET 中的有向图或无向图布局有哪些可用选项？

> ID：589900
> 
> 赞同：32
> 
> 时间：2009-02-26T10:04:17.433
> 
> 标签：.net, rendering, graph-theory, directed-graph, graph-layout

*这里的图表*是指类似于这些图像的东西：

![](https://upload.wikimedia.org/wikipedia/commons/thumb/e/e4/Directed_graph_with_back_edge.svg/298px-Directed_graph_with_back_edge.svg.png) ![](https://upload.wikimedia.org/wikipedia/commons/thumb/d/dc/Directed_cycle.svg/200px-Directed_cycle.svg.png) ![](https://upload.wikimedia.org/wikipedia/commons/thumb/b/bc/UnitedStatesGraphViz.svg/250px-UnitedStatesGraphViz.svg.png)

理想的解决方案是：

*   仅使用托管代码
*   允许输出到位图图像
*   允许输出到 WPF 元素
*   包括某种交互式表面，用于显示支持缩放、平移和重组节点的图形

我也有兴趣了解可能用作此类工作起点的项目。如果它需要一些发展来实现我想要的，那么我准备好解决它。这个目标中最复杂的部分似乎是在合理的时间范围内获得图形布局。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-04-27T03:19:05.627

[Graph#](http://graphsharp.codeplex.com/)也是另一种选择。我没有亲自使用它，但我一直想四处看看它。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-02-26T10:09:58.277

Microsoft Research 为 .NET 提供了一个名为 MSAGL（Automatic Graph Layout，以前称为 GLEE）的工具。

MSAGL 可在此处获得：[http ://research.microsoft.com/en-us/downloads/f1303e46-965f-401a-87c3-34e1331d32c5/default.aspx](http://research.microsoft.com/en-us/downloads/f1303e46-965f-401a-87c3-34e1331d32c5/default.aspx)

免责声明：我没有使用该工具，所以我不知道它是否适合您（我也不知道许可条件，似乎仅适用于非商业应用程序）。但至少它看起来很有趣。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2009-05-19T07:50:06.103

我在 NDepend 团队工作，我确认：我们在 2008 年 9 月从 GraphViz 切换到**MsAgl**，而且 MsAgl 许可证确实允许商业使用。这里有一些[集成在 NDepend 中的 MsAgl 图](http://www.ndepend.com/Doc_VS_Arch.aspx)的示例图片（一切都是交互式的，节点是可移动的/可选择的/可移动的/可点击的，边缘是可编辑的/可选择的/可移动的/可点击的，布局是可缩放的，而且，虽然它可以更干净MsAgl API 足够干净，可以使用）：

![在此处输入图像描述](https://i.stack.imgur.com/xbZlK.png) ![在此处输入图像描述](https://i.stack.imgur.com/pKOMk.png) ![在此处输入图像描述](https://i.stack.imgur.com/JVIbC.png)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-02-26T17:02:41.000

在我看来，Graphviz 今天仍然是最好的图形库之一。但是，将其集成到 .Net 是一件痛苦的事情。

可以调用命令行工具根据图形输入生成形状输出，然后读取输出并将元素放置在自定义控件上，该控件显示 graphviz 计算的任何形状。它非常 hacky，但这是我们团队几年前发现的将 graphviz 与 .Net 集成的最佳方式。

今天可能存在更好的解决方案；那时的 GLEE 还很成熟，从那时起我还没有看到微软取得的进展。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-06-02T02:56:01.023

我使用了 NodeXL，[http://www.codeplex.com/NodeXL](http://www.codeplex.com/NodeXL)，它是一个 .Net 3.5 库（也是一个 Excel 插件）。NodeXl 由 Microsoft Research 开发，非常简洁：它具有可视化算法和一些指标，但仍处于早期开发阶段。如果您是一位经验丰富的 .Net 开发人员，那么我肯定会看看它。

但是，如果您了解 Python，那么我肯定会推荐 Networkx 及其表亲 pygraphviz，它是 Graphviz 的接口。我已经使用了这两种方法，并且我使用 Python / Networkx 的效率比使用 NodeXL 时要高得多。

GLEE 是 Microsoft 的封闭源代码库，您只能在非商业软件中免费使用，而 NodeXL 是 Microsoft 的开源方式，但您可以在您开发的产品中免费使用它。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2011-08-31T11:08:58.950

只是为了使选项列表完整：[Graphviz4Net](http://graphviz4net.codeplex.com/)是 Coincoin 在他的回答中建议的开源实现。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-02-26T12:19:56.470

[Mindscape](http://mindscape.co.nz)的男孩们有这样的工具

具有想象力的名称[WPF Flow Diagrams](http://www.mindscape.co.nz/products/wpfflowdiagrams/default.aspx)

另外，查看 Vertigo 的[Family.Show](http://www.vertigo.com/FamilyShow.aspx)演示项目，它有一个简单的形式

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-04-27T02:43:22.203

使用[QuickGraph](http://quickgraph.codeplex.com/)为[GraphViz](http://graphviz.org/)输出点文件。我在最近的一个项目中这样做了，它似乎工作得很好。[在此处查找](http://www.codeproject.com/KB/WPF/Dot2Wpf.aspx)用于解析 .plain 文件的示例代码，或使用我的项目[在此处](http://www.jamiepenney.co.nz/2009/02/viewing-dependencies-between-projects.html)作为仅输出 .png 图像的参考。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2009-05-18T05:46:28.143

我用过 MsAgl，它非常好。它还具有 WinForms 和 WPF 的查看器，这对您可能很重要，也可能不重要。不必使用查看器，因为它们与图形布局引擎的耦合非常松散。

它不支持 Graphviz 所做的一切（特别是在某些形状类型方面）。此外，文档可能会更好，但如果不是有史以来最完善的 MS 产品，它也相当可靠。

它确实勾选了您作为要求提到的所有项目，尽管“查看器上”的重新组织仅支持拖动移动节点、重新路由边缘和重新定位标签。该图不会通过重新定位任何其他项目来响应这些元素的移动。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2013-10-19T17:41:09.220

我已经使用了这个[http://www.codeproject.com/Articles/484616/MVVM-Diagram-Designer](http://www.codeproject.com/Articles/484616/MVVM-Diagram-Designer)它是一个开源的，非常易于使用。代码解释得很好。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-02-26T10:13:49.830

它不是 .NET，但一个经常被引用的用于渲染图形的工具包是 AT&T [Graphviz](http://www.graphviz.org/)。我自己只使用过独立的应用程序，但源代码可以在类似于开源许可证的情况下获得。

Graphviz 被流行的代码文档工具[doxygen](http://www.doxygen.org/)用于自动为其生成的文档绘制各种图表。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2009-04-27T02:32:01.840

我一直在玩 GLEE/MSAGL，实际布局本身足以满足我的需要，但是我希望能够更好地控制节点内部的实际内容，而不仅仅是像现在这样的单个值。

例如，我希望在单击节点中的扩展器之前隐藏“详细信息”，或者双击节点或用鼠标悬停。

假设 GLEE 无法做到这一点，现在是否有任何可用的纯 .NET 解决方案可以做到这一点？

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2009-02-26T15:31:22.997

去年夏天，当我做一些涉及图表的工作时，我发现不太昂贵的最佳选择是在 SVG 中手动完成，即从一堆字符串中写出一个 SVG 文件，然后使用 Inkscape 将其渲染为图像。

这不是一个快速简单的解决方案，但它确实允许近乎无限的定制，因此如果您必须组织图表或基于连接等进行空间组织，这可能会很好。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2009-05-18T05:32:31.713

[Northwoods在其](http://www.northwoods.com)[GoLayout](http://northwoods.com/go/dotnet-features-layout.htm)产品中提供了纯 .NET 解决方案。它们提供树、力导向和分层有向图（这不是 Sujiyama 效应，但对于许多数据集（如果不是大多数数据集）来说并不算太远）。1790 美元/座，价格昂贵。还有一些限制：最重要的是，它们的实现是为“人类可读”图设计的。我已经给它提供了超过 5,000 个节点的数据集并且没有任何问题，但我也可以生成少于 500 个节点的数据集，这会导致它出现堆栈溢出（递归太深）。根据您的域，它可能（或可能不）非常适合。如果您需要处理任何数据集的通用布局包，我建议使用 GraphViz 而不是 Northwoods。

我还没有使用过他们的任何 WPF 功能，但我知道他们拥有这些功能。我在 WinForms 领域使用他们的东西已经有一段时间了。

# php - 可以用 ASP 调用 PHP 肥皂吗？

> ID：589901
> 
> 赞同：2
> 
> 时间：2009-02-26T10:04:33.797
> 
> 标签：php, web-services, soap, asp-classic

我的客户有一个 PHP Web 服务，他们希望我使用它。它是基于 PHP 的，而我的*网站*是基于 ASP 的。

ASP 代码如下所示：

```
Dim soapclient

WSDL_URL = "http://xxx.xxxx.xx/index.php?Action=service"

set soapclient = Server.CreateObject("MSSOAP.SoapClient30")

soapclient.ClientProperty("ServerHTTPRequest") = True 
```

错误继续下一步

> soapclient.mssoapinit WSDL_URL ' 错误在这里

ASP 是否能够调用基于 PHP 的肥皂服务？

或者

我应该调整什么？

非常感谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-02-26T10:22:19.653

Web 服务和 SOAP 的全部意义在于，服务以什么语言实现以及在什么硬件和操作系统上运行*都无关紧要。*

Web 服务中存在错误，或者（更有可能）您以错误的方式调用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-26T10:10:49.900

我不知道 ASP，我知道 PHP，但您应该可以从任何其他语言访问 PHP Web 服务，因为通信格式是 XML。两个应用程序都将使用第三种中间语言进行通信：XML。一切都应该没问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-26T10:59:49.250

我们找到解决这个问题的方法不是使用“MSSOAP.SoapClient30”来询问Web服务，而是使用“Msxml2.ServerXMLHTTP.4.0”。

示例代码如下：

网址=“ [http://xxx.xxx.xx/xxx.php](http://xxx.xxx.xx/xxx.php) ”

SoapRequest="<?xml 版本="&CHR(34)&"1.0"&CHR(34)&" 编码="&CHR(34)&"utf-8"&CHR(34)&"?>" "<soap:信封xmlns:xsi="&CHR(34)&" [http://www.w3.org/2001/XMLSchema-instance](http://www.w3.org/2001/XMLSchema-instance) "&CHR(34)&" xmlns:xsd="&CHR(34)&" [http://www. w3.org/2001/XMLSchema](http://www.w3.org/2001/XMLSchema) "&CHR(34)&" xmlns:soap="&CHR(34)&" [http://schemas.xmlsoap.org/soap/envelope/](http://schemas.xmlsoap.org/soap/envelope/) "&CHR(34)&"><soap:正文><getList></getList></soap:Body></soap:Envelope>"

设置 xmlhttp = server.CreateObject("Msxml2.ServerXMLHTTP.4.0")

xmlhttp.Open "POST",url,false

xmlhttp.setRequestHeader "Content-Type", "text/xml;charset=utf-8"

xmlhttp.setRequestHeader "内容长度",LEN(SoapRequest)

xmlhttp.Send(SoapRequest)

Response.Write xmlhttp.responseText

设置 xmlhttp = 无

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-02-26T12:55:03.903

对于初学者，您应该删除“on error resume next”，以便您可以查看（并发布）您遇到的错误。

# iphone - 如何在 iPhone 上使用 HTTP 通信？

> ID：589902
> 
> 赞同：0
> 
> 时间：2009-02-26T10:05:18.197
> 
> 标签：iphone, httpwebrequest, communication

我想使用 HTTP 连接到服务器，向它发送一个字符串并从服务器接收响应字符串。关于如何通过 url 连接到服务器、发送和接收消息的任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-02-26T10:21:09.513

```
// create the request
NSURLRequest *theRequest=[NSURLRequest requestWithURL:[NSURL URLWithString:@"http://www.apple.com/"]
                        cachePolicy:NSURLRequestUseProtocolCachePolicy
                    timeoutInterval:60.0];
// create the connection with the request
// and start loading the data
NSURLConnection *theConnection=[[NSURLConnection alloc] initWithRequest:theRequest delegate:self];
if (theConnection) {
    // Create the NSMutableData that will hold
    // the received data
    // receivedData is declared as a method instance elsewhere
    receivedData=[[NSMutableData data] retain];
} else {
    // inform the user that the download could not be made
} 
```

[请参阅此资源](http://developer.apple.com/documentation/Cocoa/Conceptual/URLLoadingSystem/Tasks/UsingNSURLConnection.html#//apple_ref/doc/uid/20001836-BAJEAIEE)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-02-26T13:53:19.363

我建议使用来自 All-Seeing Interactive 的优秀 ASIHTTPRequest 源：http: [//allseeing-i.com/ASIHTTPRequest](http://allseeing-i.com/ASIHTTPRequest)。我正在这样做，还有几个已发布的 iPhone 应用程序也是如此，因此您可以确定代码非常可靠。

这是 CFNetwork API 的包装器，它使与 Web 服务器通信的一些更繁琐的方面变得更容易。它是用 Objective-C 编写的，适用于 Mac OS X 和 iPhone 应用程序。

它适用于执行基本的 HTTP 请求并与基于 REST 的服务（GET / POST / PUT / DELETE）进行交互。ASIFormDataRequest 子类使使用 multipart/form-data 提交 POST 数据和文件变得容易。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-26T10:17:45.840

[`NSMutableURLRequest`](http://developer.apple.com/iphone/library/documentation/Cocoa/Reference/Foundation/Classes/NSMutableURLRequest_Class/Reference/Reference.html#//apple_ref/occ/cl/NSMutableURLRequest)您可以使用和类连接到服务器、发送字符串并接收响应[`NSURLConnection`](http://developer.apple.com/iphone/library/documentation/Cocoa/Reference/Foundation/Classes/NSURLConnection_Class/Reference/Reference.html)。一个很好的起点是[URL 加载系统简介](http://developer.apple.com/iphone/library/documentation/Cocoa/Conceptual/URLLoadingSystem/URLLoadingSystem.html)。

# macos - 相当于 Mac 上的可双击 .sh 和 .bat？

> ID：589905
> 
> 赞同：25
> 
> 时间：2009-02-26T10:06:34.060
> 
> 标签：macos, installation, executable

我正在分发一个 Java 程序，我希望在其中运行一个可双击的文件

```
java -cp MyProgram.jar;MyLib.jar my.program.Main 
```

在 Windows 上，我只是分发一个 .bat 文件，对于 *nix 一个可执行的 .sh 文件。问题是，双击 .sh 文件只会在 Mac 上的文本编辑器中打开它。我应该为 Mac 做什么？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2009-02-26T10:10:16.420

在 mac 上，有一个特定的扩展名可以通过双击来执行 shell 脚本：这是`.command`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-02-26T20:38:42.027

对于 Mac 上的 Java 应用程序，您确实应该使用 Apple 的 Jar Bundler（在 Developer Tools/Applications/Utilities 文件夹中；实际上是 /usr/share/java/Tools/Jar Bundler 的符号链接）。它可以让您制作一个合适的 OS X 可双击应用程序，包括设置偏好设置，例如使用 Mac 工具栏、JVM 版本、图形系统、OS X 应用程序元数据和类路径/资源。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-02-26T10:09:29.637

您可以使用 .sh（Shell 脚本），毕竟 MacOSX 是 Unix！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-11-12T11:18:44.380

关于使用 Jar Bundler 工具的答案是正确的，但是如果您想使用 .sh 文件，请确保使用 CHMOD 将 unix 权限正确设置为 755 之类的内容，并确保第一行包含安装的 shell 的路径默认在 Mac OS X 上。还要注意，即使设置了 +x 位，它仍可能会询问用户是否要打开它或运行它。

# .net - 如何从 Linq 2 SQL 转移到 Linq 2 实体？

> ID：589906
> 
> 赞同：43
> 
> 时间：2009-02-26T10:06:57.957
> 
> 标签：.net, linq-to-sql, linq-to-entities

我想为想要从 linq2sql 迁移到 linq2entities 和 ADO.net 实体框架（此处称为 L2E）的人提供参考。**我不想讨论这两个哪个更好。我只想为想要从一个过渡到另一个的人创建一个这两者之间的差异列表。**

基本的东西很简单：删除 linq2sql 数据类，添加 ado.net 模型（从数据库创建）。将“实体”重命名为前数据上下文的名称。

* * *

现在，差异。例如，**要在 L2S 中持久（保存）更改，**我会使用：

```
using (MyDataClassesDataContext mydc = new MyDataClassesDataContext())
{
  // change data
  mydc.SubmitChanges();
} 
```

在 L2E 中，这必须更改为：

```
using (MyDataClassesDataContext mydc = new MyDataClassesDataContext())
{
  // change data
  mydc.SaveChanges();
} 
```

* * *

第二个示例，**要在 L2S 中插入一条新记录，**您将使用：

```
using (MyDataClassesDataContext mydc = new MyDataClassesDataContext())
{
  MyTable myRow = new MyTable();
  mydc.MyTable.InsertOnSubmit(myRow);
  mydc.SubmitChanges();
} 
```

在 L2E 中，这必须更改为：

```
using (MyDataClassesDataContext mydc = new MyDataClassesDataContext())
{
  MyTable myRow = new MyTable(); // or = MyTable.CreateMyTable(...);
  mydc.AddToMyTable(myRow);
  mydc.SaveChanges();
} 
```

* * *

对于其他代码片段，我将跳过 using (...) 部分和 SubmitChanges/SaveChanges，因为它每次都是相同的。
**将更改的对象附加到 L2S 中的数据上下文/模型**（使用时间戳）：

```
mydc.MyTable.Attach(myRow); 
```

在 L2E 中：

```
// you can use either
mydc.Attach(myRow);
// or (have not tested this)
mydc.AttachTo("MyTable", myRow); 
```

* * *

将**更改的对象附加到 L2S 中的数据上下文/模型（使用原始对象）**：

```
mydc.MyTable.Attach(myRow, myOriginalRow); 
```

在 L2E 中（[MSDN - 将更改应用到分离的对象](http://msdn.microsoft.com/en-us/library/bb896248.aspx)）：

```
mydc.Attach(myOriginalRow);
mydc.ApplyPropertyChanges(myOriginalRow.EntityKey.EntitySetName, myRow); 
```

* * *

要**删除 L2S 中的记录**：

```
mydc.MyTable.DeleteOnSubmit(myRow); 
```

在 L2E 中：

```
mydc.DeleteObject(myRow); 
```

* * *

要**在 L2S 中显示创建的用于调试的 SQL 命令**：

```
mydc.Log = Console.Out;
// before mydc.SubmitChanges(); 
```

在[L2E 中，您可以显示查询的 SQL](https://stackoverflow.com/questions/137712/sql-tracing-linq-to-entities)（感谢 TFD）：

```
using System.Data.Objects;
...
var sqlQuery = query as ObjectQuery;
var sqlTrace = sqlQuery.ToTraceString(); 
```

遗憾的是，我发现无法输出为调用 SaveChanges() 生成的 SQL - 为此您需要使用[SQL 分析器](http://sqlprofiler.googlepages.com/)。

* * *

如果不存在 L2S ，**则从方案创建数据库**：

```
if (!mydc.DatabaseExists())
  mydc.CreateDatabase(); 
```

在 L2E 中：

```
// according to TFD there are no DDL commands in L2E 
```

* * *

要**对 L2S 中的数据库执行 SQL 命令**：

```
mydc.ExecuteCommand("ALTER TABLE dbo.MyTable ADD CONSTRAINT DF_MyTable_ID DEFAULT (newid()) FOR MyTableID"); 
```

在 L2E 中：

要在 EF 中对数据库执行 eSQL 命令（请注意，eSQL 尚不支持 DDL 或 DML（更改、插入、更新、删除）命令）：

```
using System.Data.EntityClient;
...
EntityConnection conn = this.Connection as EntityConnection;
using (EntityCommand cmd = conn.CreateCommand())
{
  conn.Open();
  cmd.CommandText = @"Select t.MyValue From MyEntities.MyTable As t";
  var result = cmd.ExecuteReader(System.Data.CommandBehavior.SequentialAccess);
  result.Read();
  var myValue = result.GetValue(0);
  ...
  conn.Close();
} 
```

命令文本在 Entity SQL 中，与 T-SQL 不是 100% 相同。
（感谢 TFD）

如果您在同一连接上需要 DDL/DML 命令，您可能需要自己创建数据库连接，使用您自制的 db 连接连接 EF，然后将此连接用于您的 DML 命令。不好看，自己看吧：

```
MetadataWorkspace workspace = new MetadataWorkspace(new string[] { "res://*/" }, new Assembly[] { Assembly.GetExecutingAssembly() });
using (SqlConnection sqlConnection = new SqlConnection("Data Source=salsa;Initial Catalog=SamAlyza;Integrated Security=True"))
using (EntityConnection econ = new EntityConnection(workspace, sqlConnection))
using (AlyzaDataClassesDataContext adc = new AlyzaDataClassesDataContext(econ))
{
   // now you can use the SqlConnection like always
} 
```

* * *

要为[**新创建的 L2S-Class 提供默认值，请**](https://stackoverflow.com/questions/82409/is-there-a-way-to-override-the-empty-constructor-in-a-class-generated-by-linqtosq)覆盖部分方法 OnCreated：

```
partial void OnCreated()
{
  Name = "";
} 
```

在 L2E 中，您可以为表类创建一个默认构造函数：

```
partial class MyTable
{
  public MyTable()
  {
    Name = "";
  }
} 
```

* * *

以下示例是关于两个表之间的 1:n 关系。我在这里用 SQL 定义表，所以你知道我在写什么：

```
CREATE TABLE dbo.[MyTable]
(
 [MyTableID] uniqueidentifier NOT NULL ROWGUIDCOL CONSTRAINT [PK_MyTable] PRIMARY KEY,
 [Name] nvarchar(100) NOT NULL,
)  ON [PRIMARY]

ALTER TABLE dbo.[MyTable] ADD CONSTRAINT [DF_MyTable_ID] DEFAULT (newid()) FOR [MyTableID]

CREATE TABLE dbo.[MySubTable]
(
 [MySubTableID] uniqueidentifier NOT NULL ROWGUIDCOL CONSTRAINT [PK_MySubTable] PRIMARY KEY,
 [MyTableID] uniqueidentifier NULL,
 [Subname] decimal(18,2) NOT NULL,
)  ON [PRIMARY]

ALTER TABLE dbo.[MySubTable] ADD CONSTRAINT [DF_MySubTable_ID] DEFAULT (newid()) FOR [MySubTableID]

ALTER TABLE dbo.[MySubTable] ADD CONSTRAINT [FK_MySubTable_MyTable] FOREIGN KEY
(
 [MyTableID]
) REFERENCES dbo.[MyTable]
(
 [MyTableID]
) ON DELETE CASCADE 
```

* * *

**在 L2S 中使用相应的 MySubTable 将记录插入到 MyTable**中：

```
 MyTable myRow = new MyTable();
  myRow.MySubTable.Add(new MySubTable());
  mydc.MyTable.InsertOnSubmit(myRow); 
```

L2E 中非常相似：

```
 MyTable myRow = new MyTable();
  myRow.MySubTable.Add(new MySubTable());
  mydc.AddToSaLyWebsites(test); 
```

* * *

在 L2S**中搜索 subtable**，您可以使用：

```
from u in adc.MySubTable 
where u.MyTableID == _searchForTableID && u.Name == _searchForName 
select u 
```

在 L2E 中，您无法访问关系列：

```
from u in adc.MySubTable 
where u.MyTable.MyTableID == _searchForTableID && u.Name == _searchForName 
select u 
```

（当然你也可以使用）

```
from u in _searchForTable.MySubTable
where u.Name == _searchForName
select u 
```

（奇怪的旁注：_searchForTable 不需要附加到 EF 才能工作。）

* * *

**杂项说明：**

在 L2S 中，我可以在 LINQ 中使用其他函数。如果我在 L2E 中使用自定义函数，我会得到 NotSupportedException。所以，而不是

```
from t in mydc.MyTable 
where t.Date >= _searchForDate && t.Date <= _searchForDate.AddHours(2) 
select t; 
```

在 L2E 中需要使用

```
DateTime endDate = _searchForDate.AddHours(2);
from t in mydc.MyTable 
where t.Date >= _searchForDate && t.Date <= endDate 
select t; 
```

* * *

虽然 L2S 可以从数据库中读取自动生成的值，例如自动生成的 ID，但在 L2E 中，这似乎只能使用 sql 类型标识。

（当我偶然发现它们或有人在答案中添加它们时，我将在这篇文章中收集更多差异）

一些链接，可能有帮助：
- [Transact-SQL 和 Entity-SQL 之间的区别](http://msdn.microsoft.com/en-us/library/bb738573.aspx)
- [NET - ADO.NET Entity Framework 和 LINQ to Entities](http://www.scip.be/index.php?Page=ArticlesNET16#Dump)
- [Mike Taulty 关于 Disconnected LINQ to Entities（适用于 L2E 的 beta 2）](http://mtaulty.com/CommunityServer/blogs/mike_taultys_blog/archive/2007/09/19/9825.aspx)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-02-26T12:50:45.163

显示创建的用于在 EF 中调试的 SQL 命令

```
using System.Data.Objects;
...
var sqlQuery = query as ObjectQuery<T>;
var sqlTrace = sqlQuery.ToTraceString(); 
```

AFAIK 没有创建数据库或执行任何类型的 DDL 工作的命令。这是“Entity SQL”语言的设计限制

EDMX 设计表面将映射您当前的数据库模式，而不是相反

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-03-01T04:17:33.247

在 EF 中对数据库执行 SQL 命令

```
using System.Data.EntityClient;
...
EntityConnection conn = new EntityConnection(myContext.Connection.ConnectionString);
conn.Open();
EntityCommand cmd = conn.CreateCommand();
cmd.CommandText = @"Select t.MyValue From MyEntities.MyTable As t";
var result = cmd.ExecuteReader(System.Data.CommandBehavior.SequentialAccess);
result.Read();
var myValue = result.GetValue(0);
...
conn.Close(); 
```

命令文本在 Entity SQL 中，与 T-SQL 不是 100% 相同

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-24T20:59:01.800

在 L2S 中，您可以只使用函数调用之类的存储过程。在 EF 中，SP 必须返回一个实体。如果您的 SP 仅返回完整实体的子集，这可能会导致问题

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-01T04:34:09.043

从 EF 中的插入中获取新的标识值

```
Create Table dbo.MyItem (
    Id int indentity(1, 1) Primary Key,
    Value varchar(100)
)

var newItem = new MyItem() { Value = "Hello" };
context.AddToMyItem(newItem);
context.SaveChanges(true);
var theNewIdentityValue = newItem.Id; 
```

EF 的人只是把这件事做得很简单，做得很好:-)

# c# - SharpDevelop，如何添加数据源？

> ID：589914
> 
> 赞同：2
> 
> 时间：2009-02-26T10:09:52.083
> 
> 标签：c#, sharpdevelop

我正在尝试用 C# 完成家庭作业课程。我应该将数据源添加到 Datagrid 视图控件。但是，在通用任务菜单下的 Sharp Develop 中，数据源对话框无法添加数据源。

这显然与 VS 的工作方式不同。有人可以帮我弄清楚如何在 SharpDevelop 中做到这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-02-26T10:45:08.320

您可以使用显式绑定以编程方式添加数据源。例如，在`FormLoad`事件期间（引入显式 BindingSource）：

```
 private System.Windows.Forms.DataGridView dataGridView1;
    private System.Windows.Forms.BindingSource bindingSource1;
    private System.Data.DataSet dataSet1;
    private System.Windows.Forms.Label label1;
//...
    private void Form1_Load(object sender, EventArgs e)
    {
        this.dataSet1.ReadXml("x2.xml");
        this.label1.Text = dataSet1.Tables[0].TableName;
        this.bindingSource1.DataSource = dataSet1.Tables[0];
        this.dataGridView1.DataSource = bindingSource1;
    } 
```

# java - Java 是否通过引用传递？

> ID：589919
> 
> 赞同：10
> 
> 时间：2009-02-26T10:11:00.647
> 
> 标签：java, pass-by-reference

Java真的支持引用传递吗？

如果没有，为什么我们要使用 == 运算符来查找具有相同引用的两个对象？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2009-02-26T10:14:54.070

Java 使用按值传递，而不是按引用传递...

但是，对于非原始类型，值是引用的值。

所以 == 比较对象的引用值。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-02-27T13:20:13.443

区别在于“通过****引用”和“通过****引用”。您有时还会看到“call-by-...”和“pass-by-...”可以互换使用。为简单起见，我将坚持使用“pass-by-...”。

1.  在学术的、老式的、与 FORTRAN 相关的、comp-sci 术语中，*按引用传递*意味着被调用的代码可以访问（引用）调用者传递的变量。赋值给被调用代码中的形参实际上是对调用者的变量进行赋值。区别在于（除其他外）*传递值*，它为被调用代码提供调用者已知的数据（无论是什么）的副本。

2.  在当代与 Java 相关的 OO 世界中，对对象的“引用”意味着能够访问对象本身。这与“有一个指针”不同，以强调（除其他外）一个人不对引用进行“指针算术”。（实际上，这种意义上的“引用”不一定是实际的类似指针的内存地址。）

Java 通过值传递参数（在第一种意义上），但对于对象参数，值是一个引用（在第二种意义上）。这是一些依赖于差异的代码。

```
// called
public void munge(List<String> a0, List<String> a1) {
    List<String> foo = new List<String>(); foo.add("everybody");
    a0.set(0, "Goodbye");
    a1 = foo;
}

// caller
...
List<String> l0 = new List<String>(); l0.add("Hello");
List<String> l1 = new List<String>(); l1.add("world");
munge(l0, l1);
... 
```

从 调用返回后`munge`，调用者的第一个列表`l0`将包含`"Goodbye"`. 对该列表的引用被传递给`munge`，它在该被引用对象上调用了一个变异方法。（换句话说，`a0`收到的值的*副本*`l0`，它是对已修改的字符串列表的*引用。）*

但是，在从`munge`调用者的第二个列表返回时，`l1`仍然包含，`"world"`因为没有在传递的对象引用上调用任何方法（ 的值`l1`，*按值传递*给`munge`）。相反，参数变量`a1`被设置为一个新值（本地对象引用也保存在 中`foo`）。

***如果***Java 使用了传递引用，那么在返回时，`l1`将包含`"everybody"`，因为`a1`会引用**变量** `l1`而不是简单地初始化为其值的副本。因此，对的分配`a1`也将是对的分配`l1`。

在[另一个问题](https://stackoverflow.com/questions/498747/java-pass-by-value-reference-variables/498895#498895)中讨论了同样的问题，用 ASCII-art 来说明这种情况。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-02-26T10:16:50.150

Java*不*使用按引用传递，而是按值传递。原始值参数被**复制**到堆栈中，以及指向对象的指针。

`==`运算符应该用于比较原始值和比较对象引用。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-02-27T12:05:50.643

简短的回答是否定的。在Java 中只有值传递，当您使用对象（例如`Object obj = new Object();`）时，您正在使用对象引用。哪个按值传递。

详见：[Java中的参数传递](http://www.yoda.arachsys.com/java/passing.html)

# variables - 在 C# 和 VB 中声明时变量的默认值？

> ID：589920
> 
> 赞同：25
> 
> 时间：2009-02-26T10:11:47.900
> 
> 标签：variables, default, declaration

谁能告诉我在 C# 和 vb 中声明时变量的默认值是什么？

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2009-02-26T10:16:26.517

在 c# 中，您可以使用 default 关键字来确定默认值。

例如：

```
默认（布尔）
默认（整数）
默认（整数？）

```

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2009-02-26T10:50:49.537

你的意思是一个（方法）变量吗？或字段（在实例或类型上）？

对于方法级变量（至少在 C# 中）它是无关紧要的，因为“明确赋值”意味着您*必须*先给它一个值才能读取它。

字段默认为按位零状态：

*   对于表示 null 的引用类型（包括字符串）
*   for `Nullable<T>`( `int?`etc) 这意味着 null
*   对于表示 0 的数字
*   对于表示 0 的枚举，**即使没有定义 0 值枚举**
*   对于意味着假的布尔值
*   对于 DateTime，这意味着与 MinValue 相同
*   对于其他结构，您必须检查他们的文档，但这将是一个（希望是明智的）“零/空”值

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2009-02-26T10:55:45.657

这可以在 MSDN 中找到：

Visual Basic .NET 定义了以下基本类型：

整数值类型 Byte（1 字节无符号整数）、Short（2 字节有符号整数）、Integer（4 字节有符号整数）和 Long（8 字节有符号整数）。这些类型分别映射到 System.Byte、System.Int16、System.Int32 和 System.Int64。**整数类型的默认值等价于文字 0。**

浮点值类型 Single（4 字节浮点）和 Double（8 字节浮点）。这些类型分别映射到 System.Single 和 System.Double。**浮点类型的默认值等价于文字 0。**

Decimal 类型（16 字节十进制值），映射到 System.Decimal。十进制的默认值相当于文字 0D。

布尔值类型，表示真值，通常是关系或逻辑运算的结果。文字是 System.Boolean 类型。**Boolean 类型的默认值等价于文字 False。**

Date 值类型，表示日期和/或时间并映射到 System.DateTime。**Date 类型的默认值等价于文字 # 01/01/0001 12:00:00AM #。**

Char 值类型，表示单个 Unicode 字符并映射到 System.Char。**Char 类型的默认值等价于常量表达式 ChrW(0)。**

String 引用类型，它表示一系列 Unicode 字符并映射到 System.String。**String 类型的默认值为空引用。**

[http://msdn.microsoft.com/en-us/library/aa711900.aspx](http://msdn.microsoft.com/en-us/library/aa711900.aspx)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2010-06-17T13:27:40.230

C# 语言规范规定，对于**值类型**，默认值与默认构造函数分配的值相同，对于**引用类型**，默认值为 null：

所以值类型的默认构造函数值是：

> 对于所有简单类型，默认值是由全零位模式产生的值：
> 
> *   对于 sbyte、byte、short、ushort、int、uint、long 和 ulong，默认值为 0。
>     
>     
> *   对于 char，默认值为 '\x0000'。对于浮点数，默认
>     值为 0.0f。
>     
>     
> *   对于双精度，默认值为 0.0d。对于十进制，默认值为 0.0m。对于 bool，默认值为 false。
>     
>     
> *   对于 enum-typeE，默认值为 0。
>     
>     
> *   对于结构类型，默认值是通过将所有值类型字段设置为其默认值并将所有引用类型字段设置为空而产生的值。

[http://msdn.microsoft.com/en-us/library/aa691142(v=VS.71).aspx](http://msdn.microsoft.com/en-us/library/aa691142(v=VS.71).aspx)

字符串不是值类型。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2009-02-26T10:46:34.650

取决于变量的类型。如果类型可以为空，那么它的默认值为空。可为 Null 的类型都将以 null 开头。

*   复杂类型 (String, StringBuilder) = null
*   数值类型（int、decimal、double、byte）= 0
*   布尔 = 假
*   DateTime = DateTime.MinValue (01/01/0001 00:00:00)

您可以使用以下方法设置初始值：

> 字符串 s1 = "测试";
> 
> Dim s1 As String = "test"

# c# - VBA 和 C# 中的记录集

> ID：589923
> 
> 赞同：1
> 
> 时间：2009-02-26T10:12:32.250
> 
> 标签：c#, vba

考虑到这段代码

```
 Dim cn As New ADODB.Connection, cn2 As New ADODB.Connection
                        Dim rs As ADODB.Recordset
                        Dim connString As String
                        Dim SelectFieldName

                        Set cn = CurrentProject.Connection
                        SelectFieldName = astrFields(intIx)
                        Set rs = cn.OpenSchema(adSchemaColumns, _
                        Array(Empty, Empty, Empty, SelectFieldName))

strsql = select field from rs!tablename 
```

现在我明白这将通过获取字段所在的表名在 VBA 中工作。

我只是想知道这段代码的 C# 等价物是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-02T06:00:28.843

```
Using System.Data.SqlClient;

//////now use following codes to retrieve data//////
String ConStr = "Data Source=localhost;Initial Catalog=Database Name;Integrated Security=True";
        SqlConnection sqlcnn;
        SqlCommand sqlcmd;
        SqlDataReader sqldr;
        string plssql;
plssql = "select field from table_name where condition";
        sqlcnn = new SqlConnection(ConStr);
        sqlcnn.Open();
        sqlcmd = new SqlCommand(plssql, sqlcnn);
        sqldr = sqlcmd.ExecuteReader();
String val=sqldr["field name"].ToString();
sqlcmd.Close();
sqlcnn.Close(); 
```

克里斯
------
将您的 Excel 电子表格转换为在线计算器。
[http://www.spreadsheetconverter.com](http://www.spreadsheetconverter.com)

# mysql - MySQL：将具有相同列数据的所有行导出到同一个文件中

> ID：589924
> 
> 赞同：1
> 
> 时间：2009-02-26T10:13:10.610
> 
> 标签：mysql

假设您有一个包含数千行和 3 列的大表，看起来像这样：

```
Name               City               Birthyear

Egon Spengler       New York           1957  
Mac Taylor          New York           1955  
Sarah Connor        Los Angeles        1959  
Jean-Luc Picard     La Barre           2305  
Ellen Ripley        Nostromo           2092  
James T. Kirk       Riverside          2233  
Henry Jones         Chicago            1899  
Jason Bourne        Paris              1971
```

...... 等等。是否可以按城市将人员分类到单独的文件中？例如，如果表中有 100 个或更多城市，是否有一个查询会创建 100 个或更多包含人名和出生年份的文件？对于少数城市，可以使用

-e "从城市 = 纽约的表中选择姓名、出生年份" > NewYork.csv

对于表中的每个城市，依此类推。但是，如果您有数百个城市，手动执行它并不好玩。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-26T17:11:01.510

来自生病和错误的部门（可能包含语法错误，这只是为了让您了解扭曲的可能性）：

```
SELECT concat("SELECT name, birthyear from table where city = '", 
                           city,
                          "' into outfile '",
                          city,"';") 
   FROM table 
```

把它放在query1.sql中，然后：

```
mysql < query1.sql > query2.sql
mysql < query2.sql 
```

编写一个动态生成查询的查询，然后针对数据库执行生成的查询。这绝对属于“快速而肮脏”的类别。

另请注意，查询在 MySQL 服务器上执行，这可能与执行 MySQL 客户端的位置不同。如果是这样，您将需要一些方法来获取结果文件。如果您没有对服务器的 shell 访问权限，这可能是个问题，除非存在服务器可以写入的网络文件系统，您可以从另一台主机读取该系统。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-26T10:16:30.900

我认为您最好的选择是编写一个小脚本，在每一列上执行 SELECT DISTINCT 并使用结果来编写您建议的形式的查询。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-26T10:44:50.910

您还可以将“按城市从表中选择名称，出生年份”放入 csv 中，然后使用一个小脚本（Perl 或其他东西）来拆分城市列中名称更改的文件。无论如何，如果没有一些外部脚本，可能是不可能的。

# c# - WCF 缓存策略 - 包括依赖项

> ID：589925
> 
> 赞同：1
> 
> 时间：2009-02-26T10:13:32.777
> 
> 标签：c#, asp.net, wcf

我想问问人们对将缓存引入WCF的方法和策略的看法。特别是我最感兴趣的是注入 SQL Cache Dependencies。将 Web 应用程序复制到多个应用程序服务器后，我希望有效地同步缓存。

我目前正在查看 WCF Rest Starter Kit，它为 OperationContracts 引入了一个不错的 WebCache 属性，您可以在其中添加 SqlCacheDependancies。

我只是对其他人在解决这个问题方面采取或经验感兴趣并且会很高兴。

亲切的问候，

安德鲁

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-27T02:21:05.540

不确定您要解决哪个问题，但您提到了跨多个服务器的缓存一致性。之前运行过 SqlCacheDependency 配置，这是我的看法。

与 WebCache 属性合并的 SqlCacheDependency 与自 .Net 2.0 以来可用的缓存依赖项实现相同。总的来说，我发现 SqlCacheDependency 的聚合配置/操作/监控很繁琐。该设计对于单个缓存是可以接受的，但对于多个系统是可以接受的——不，谢谢。

我喜欢关注点分离。当使用多个服务器时，我发现分布式缓存层比 SqlCacheDependency 操作更容易管理。有大量可用的开源和商业分布式缓存提供程序。我发现 Memcache 是最有效且运行良好的。

# sockets - 套接字编程：如何处理带外数据

> ID：589928
> 
> 赞同：25
> 
> 时间：2009-02-26T10:14:01.357
> 
> 标签：sockets, out-of-band

我刚刚查看了[维基百科关于带外数据的条目，](http://en.wikipedia.org/wiki/Out-of-band#Computing)据我了解，OOB 数据以某种方式被标记为更重要并被视为普通数据，但以单独的流传输，这让我深感困惑。

实际的问题是（除了“有人可以解释什么是 OOB 数据吗？”）：

我正在编写一个使用套接字并需要使用[select()](http://linux.die.net/man/2/select)的 unix 应用程序，并且想知道如何处理 exceptfds 参数？我是否需要将所有套接字放入此参数并对此类事件做出反应？还是我只是忽略它们？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2009-02-26T15:48:36.153

我知道您已经决定不需要处理 OOB 数据，但是如果您**确实**关心 OOB，请记住以下几点...

*   IPv4 并没有*真正*在单独的通道上或以不同的优先级发送 OOB 数据。它只是数据包上的一个标志。
*   OOB 数据极其有限——1 个字节！
*   OOB 数据可以内联或单独接收，具体取决于套接字选项
*   即使下一次读取不包含 OOB 数据，也可能会发生“异常”信号 OOB 数据（发送方的网络堆栈可能会标记任何已排队的数据，因此对方会尽快知道存在 OOB）。这通常通过进入“排水”循环来处理，在该循环中丢弃数据，直到实际的 OOB 数据可用。

如果这看起来有点令人困惑和毫无价值，那是因为它主要是。使用 OOB有充分*的*理由，但这种情况很少见。一个示例是 FTP，其中用户可能正在进行大量传输，但决定中止。中止作为 OOB 数据发送。那时，服务器和客户端只是吃掉任何进一步的“正常”数据，以耗尽仍在传输中的任何东西。如果中止是与数据一起处理的，那么所有未完成的流量都必须被处理，只是被转储。

很高兴知道 OOB 的存在以及它的工作原理，以防万一您确实需要它。但是除非你只是好奇，否则不要费心从里到外学习它。你可能*永远不会*使用它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-02-26T11:09:25.717

我想我在[这个页面](https://web.archive.org/web/20090228185102/http://docs.hp.com/en/B2355-90136/ch03s07.html)上找到了答案。简而言之：

如果我不*发送*任何 OOB 数据，我不需要在接收端处理 OOB 数据。我原以为 OOB 数据可以由发件人的操作系统生成。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-26T11:30:57.553

即使您*正在*发送它，您也不需要在接收端处理它 - OOB 数据在所有情况下都会被透明地忽略，除非您主动接收它。

# c# - 是否可以使用查询参数填充IN关键字

> ID：589931
> 
> 赞同：4
> 
> 时间：2009-02-26T10:14:43.803
> 
> 标签：c#, .net, sql-server-2005, ado.net

想象一个以 GUID 作为主键的表。我想根据它们的主键选择其中一些行。我想使用如下查询：

```
SELECT * FROM mytable WHERE id IN ('firstguidhere','secondguidhere'); 
```

我正在使用 ADO.NET 来查询数据库，所以我想使用参数化查询而不是动态 sql，这显然可以工作，但我想保留参数化查询的好处（安全性、转义等......） .

是否可以使用 sql 参数填充 IN 子句的集合？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-02-26T10:24:27.353

您可以将 GUID 列表作为逗号分隔的字符串参数传递，并使用表值 UDF 将它们拆分为要在您的`IN`子句中使用的表：

```
SELECT *
FROM my_table
WHERE id IN (SELECT id FROM dbo.SplitCSVToTable(@MyCSVParam)) 
```

Erland Sommarskog 有一篇[有趣的文章](http://www.sommarskog.se/arrays-in-sql-2005.html)，其中包含如何使用 UDF 将逗号分隔的字符串拆分为表的示例。

（出于性能原因，您应该确保您的 UDF 是内联表值的，而不是多语句。）

# c# - ASP.NET MVC RC（刷新）中的 Html.DropDownList 未预选项目

> ID：589935
> 
> 赞同：5
> 
> 时间：2009-02-26T10:16:28.433
> 
> 标签：c#, .net, asp.net-mvc

在我的控制器中，我有以下内容：

```
ViewData["myList"] = 
   new SelectList(itemRepository.GetAll(), "Id", "Name", currentItem.Id); 
```

在我看来，我有：

```
<%= Html.DropDownList("myItem", (SelectList)ViewData["myList"])%> 
```

呈现的下拉列表*应该*预先选择 Id 为 currentItem.Id 的项目，但事实并非如此。未选择任何内容，因此默认为第一个。

这在我更新到 RC/RC(refresh) 之前有效。有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-02-26T16:24:07.847

如果您将 ViewData 中键的名称与视图上的表单字段的名称相匹配，则 HtmlHelpers 旨在基于该键隐式地从 ViewData 中提取。我建议将您的视图代码更改为：

```
<%= Html.DropDownList("myList") %> 
```

HtmlHelpers 似乎在以这种方式使用它们时效果最好（尽管这并不总是可能的）。

**更新：**

为了扩展这似乎有效而其他方法无效的原因，我深入研究了 SelectExtensions.cs 的代码......

无论您如何调用 DropDownList，私有方法 SelectInternal 最终都会呈现实际的 HTML。SelectInternal 的签名如下所示：

```
SelectInternal( string optionLabel, string name, IEnumerable<SelectListItem> selectList, bool usedViewData, bool allowMultiple, IDictionary<string,object> htmlAttributes ) 
```

这是 DropDownList 的两种用法所采用的路径：

**下拉列表（“我的列表”）**

```
DropDownList( string name ) ->
SelectInternal( null, name, htmlHelper.GetSelectData(name), true, false, null ) 
```

**DropDownList **("myItem",(SelectList)ViewData["myList"])****

 **```
List( string name, IEnumerable<SelectListItem> selectList ) ->
DropDownList( name, selectList, null /* object, htmlAttributes */ ) ->
DropDownList( name, selectList, new RouteValueDictionary(htmlAttributes) ) ->
SelectInternal( null, name, selectList, false, false, htmlAttributes ) 
```

所以归根结底，两条路径之间的区别在于，有效的方式将*true*传递给 SelectInternal 的**usedViewData**参数，而无效的方式传递*false*。

在我看来，当**usedViewData**为*false*时，SelectInternal 内部某处可能存在错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-26T12:26:49.370

**以下对我有用（使用 MVC RC Refresh）**

在视图中：

```
<%= Html.DropDownList("NAME_OF_ITEM_ID_PROPERTY", (SelectList)ViewData["myList"]) %> 
```

因此，对于您的示例，这可能是：

```
<%= Html.DropDownList("Id", (SelectList)ViewData["myList"]) %> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-07-13T11:48:46.830

我只是制作了自己的下拉助手。也许没有内置的那么有效，但它确实有效。

# c# - 使 xml 更具可读性

> ID：589943
> 
> 赞同：5
> 
> 时间：2009-02-26T10:17:57.307
> 
> 标签：c#, .net, xml, vb.net, text-formatting

有什么方法可以在 .net 中获取 xml 字符串并使其更易于阅读？我的意思是我可以转换这个：

```
<element1><element2>some data</element2></element1> 
```

对此：

```
<element1>
    <element2>
        some data
    </element2>
</element1> 
```

有没有内置的类？由于 sql server 2005 似乎删除了 xml 上的所有格式以节省空间或某些东西......

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2009-02-26T10:21:35.287

如果您使用的是 .NET 3.5，则可以将其加载为 an `XDocument`，然后只需调用 ToString() 即可适当缩进。例如：

```
using System;
using System.Xml.Linq;

public class Test
{
    static void Main()
    {
        string xml = "<element1><element2>some data</element2></element1>";

        XDocument doc = XDocument.Parse(xml);
        xml = doc.ToString();
        Console.WriteLine(xml);
    }
} 
```

结果：

```
<element1>
  <element2>some data</element2>
</element1> 
```

如果您将其写入文件或其他流，那么`XDocument.Save`（默认情况下）也会缩进它。

（我相信`XElement`具有所有相同的功能，如果你真的不需要`XDocument`。）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-02-26T10:20:10.140

如何将 XML 保存/写回文件？

您可以创建一个 XmlWriter 并向其传递一个 XmlWriterSettings 实例，在其中将 Indent 属性设置为 true：

```
XmlWriterSettings settings = new XmlWriterSettings();
settings.Indent = true;

XmlWriter writer = XmlWriter.Create (outputStream, settings); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-26T10:32:52.607

您可以将字符串加载到 XDocument 对象中并再次将其保存到字符串中：

```
XDocument doc = XDocument.Load(new StringReader(xmlString));
StringWriter writer = new StringWriter();
doc.Save(writer);
string readable = writer.ToString(); 
```

这将为您提供以这种方式格式化的 xml：

```
<?xml version="1.0" encoding="utf-16"?>
<element1>
    <element2>some data</element2>
</element1> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-02-26T10:22:15.893

看一下

```
XmlWriterSettings 
```

[http://msdn.microsoft.com/en-us/library/system.xml.xmlwritersettings.aspx](http://msdn.microsoft.com/en-us/library/system.xml.xmlwritersettings.aspx)

你可以定义 Indent 和 IndentChars

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-01-16T19:47:15.957

首先，您已经标记了 C# 和 VB.NET。所以我的答案是对他们两个。

您可以定义获取 XML 字符串作为字符串类型参数的函数。

比方说；

您创建了一个函数：

[VB]

```
Private Function PrettyXML(XMLString As String) As String    
      Dim sw As New StringWriter()
      Dim xw As New XMLWriter(sw)
      xw.Formatiing = Formatting.Indented
      xw.Indentation = 4

      Dim doc As New XMLDocument
      doc.LoadXML(XMLString)
      doc.Save(xw)
      Return sw.ToString()    
End Function 
```

然后你可以简单地调用这个函数：

```
Dim myXML As String = "<element1><element2>some data</element2></element1>"
Dim myPrettyXML As String
myPrettyXML = PrettyXML(myPrettyXML) 
```

[C＃]

```
Private String PrettyXML(string XMLString)
   {
      StringWriter sw = new StringWriter();
      XMLTextWriter xw = new XmlTextWriter(sw);
      xw.Formatiing = Formatting.Indented;
      xw.Indentation = 4;
      XmlDocument doc = new XmlDocument();
      doc.Save(xm);
      return sw.ToString();
   } 
```

然后你可以简单地调用这个函数：

```
string myXML =   "<element1><element2>some data</element2></element1>";
string myPrettyXML = "";
myPrettyXML = PrettyXML(myPrettyXML); 
```

注意：我没有尝试过 C# 版本，但它应该可以工作。

希望这可以帮助..

# sql-server - SQL Server 对象组织

> ID：589944
> 
> 赞同：1
> 
> 时间：2009-02-26T10:18:01.083
> 
> 标签：sql-server, sql-server-2005, sql-server-2008, ssms

我不确定这是否有效，但是我对 SQL Server 有一个错误，那就是我无法将对象组​​织到一组对象中。

想象一下，我正在一个大型数据库中处理一个新的工作部分，我可能有 15 个我将经常使用的对象。我想要做的是将它们“收藏”到一个文件夹中，这样我就不必遍历数据库中的所有对象。

我知道我可以按模式组织对象，但是这些对象不一定是特定于模式的，它们跨越边界。

有没有人遇到过将对象组织到收藏夹组中的方法？我知道 SQL Server Projects 组织脚本，但我看不到它们可以组织表？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-02-26T11:16:28.540

您无法使用本机工具 (SQL Server Management Studio) 做到这一点，但有一种解决方法：使用这 15 个表创建一个新的空数据库 - 只是架构，而不是数据。然后，当您编写 T-SQL 代码时，您可以快速地将元素从这些表中拖放到您的代码中。

缺点是在真实数据库中所做的更改不会反映在您的工作数据库中，但您可以使用脚本自动执行此操作，以提取您需要的对象并在您的工作数据库中重新创建它们。您可以随意运行它（例如每 X 小时，或作为本地开发服务器启动时运行的 SQL 代理作业）而不会丢失数据，因为您不会修改“收藏夹”数据库中的结构.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T00:53:12.043

我知道我真的迟到了，但问题出现在“相关”下的右侧，我很好奇去看。

Management Studio 有一个免费的插件，它似乎完全符合您的要求：

[http://www.sqltreeo.com/wp/dowload-free-ssms-add-in-to-create-own-folder-for-database-objects/](http://www.sqltreeo.com/wp/dowload-free-ssms-add-in-to-create-own-folder-for-database-objects/)

还有一个 65 美元的商业插件，您可能也想尝试一下。我也没有尝试过，所以我不确定它们的效果如何，或者付费版本比免费插件（如果有的话）提供什么。

[http://www.skilledsoftware.com/](http://www.skilledsoftware.com/)

也可以为这个 Connect 项目投票并添加描述您的业务用例的评论。虽然您可能会发现它因无法修复而关闭令人沮丧，但这不一定是永久性决定：

[http://connect.microsoft.com/SQLServer/feedback/details/209340](http://connect.microsoft.com/SQLServer/feedback/details/209340)

# sharepoint-2007 - 完成 MOSS 2007 迁移

> ID：589946
> 
> 赞同：0
> 
> 时间：2009-02-26T10:19:32.763
> 
> 标签：sharepoint-2007, migration, backup, restore

目前的情况是我们有一个共享点服务器，它最初是作为试点，但现在实际上作为生产环境运行。sharepoint 运行的服务器是一台不符合标准要求的旧机器，所以我想将当前环境移动到闪亮的新服务器上。

我对迁移 MOSS 服务、数据库、内容和其他东西感到很不满，但老实说，我有点迷失在信息的海洋中，我找不到正确的方法来做到这一点，我尝试安装 MOSS 2007 在新服务器上作为全新安装，在新服务器上恢复了数据库，在新服务器上恢复了我用 Sharepoint 中央管理制作的备份，唉，我没有工作:-( 很多“找不到这个"和"找不到那个"错误...

应该可以抓取所有数据/站点/子站点/数据库/内容/文档以及其他所有内容并将其恢复到新服务器，对吗？

无论如何，我希望获得一些分步信息...... :-)

问候 Erik404

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-26T14:49:24.347

我想我找到了一种完全迁移的方法......

在新服务器 (Server_B) 上安装新版本的 MOSS 2007。在 Server_A 上安装您拥有的功能和解决方案。然后使用可以从 CodePlex 免费下载的 SPContentDeploymentWizard 导出所有站点内容并将其导入 Server_B。还备份功能所需的自定义数据库并在 Server_B 上创建这些数据库。

我现在确实有一个几乎完全相等的服务器正在运行，时不时会弹出一些时髦的错误，所以我认为这不是最好的方法......

另外，自定义开发的 webpart 需要手动部署到新服务器上，我没有找到迁移这些的方法

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-13T04:12:19.690

你在正确的轨道上。CodePlex 解决方案只是您必须通过 stsadm 在命令行中执行的操作的向导 GUI。

本质上你：

1.  使用旧服务器上的所有补丁、Service Pack 等构建新服务器。
2.  您将需要在 cmd 行运行命令来扫描和解决服务器 A 上数据库中的任何孤立站点（命令让我不以为然，但您可以在 TechNet 中找到它 - 我认为它是修复数据库 - 类似的东西）
3.  限制对服务器 A 的访问 - 这样您就不会在迁移期间更改用户。
4.  准备要迁移的数据库 - 另一个 stsadm 命令 - stsadm -o preparetomove
5.  从服务器 A 中分离数据库。 -o deletedatabase 的可怕命令 - 它删除引用但不删除实际数据库（但仍然！）
6.  将数据库附加到服务器 B

在这一点上你应该很好。

正如您所发现的 - 您无法迁移自定义代码、webpart 等。这些需要重新安装。真正推荐自定义解决方案/功能的原因之一。

此外 - 需要重新创建搜索数据库、索引等。你不能把那些拿过来。但这相当简单 - 当你考虑它时，它是有道理的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T21:55:47.613

如果需要，请使用这些脚本。

[http://globaldeploymentmoss2007.blogspot.ca/](http://globaldeploymentmoss2007.blogspot.ca/)

# asp.net - 如何在 ASP.NET 中将 css 'ids' 与服务器控件结合使用？

> ID：589952
> 
> 赞同：0
> 
> 时间：2009-02-26T10:22:04.800
> 
> 标签：asp.net, css

我的设计师创建了一个大量使用 id 的样式表。例子：

```
<div id="globalheader">
<ul id="globalnav">.... 
```

CSS：

```
#globalheader { width: 715px; height: 100px; margin: 18px auto; position: absolute; top: 0; left: 20; z-index: 9998; }
#globalheader #globalnav { margin: 0; padding: 0; }
#globalheader #globalnav li { display: inline; } 
```

一旦我将其中一个 div 元素更改为“runat=server”，这将不再正确显示，因为这将导致 ClientID 更改。我该如何解决这个问题？

-Edoode

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-02-26T10:37:30.210

这是一个我认为没有生成后解决方法无法解决的问题，其中一些是......

*   将类属性添加到 html 元素并将样式声明更改为 .globalheader
*   将 html 元素保持原样并在样式表中进行查找和替换（新的 id 名称应具有一致的前缀，例如 #ctl00_globalheader）

# javascript - 绘图应用程序缩放概念

> ID：589955
> 
> 赞同：2
> 
> 时间：2009-02-26T10:22:51.133
> 
> 标签：javascript, drawing, canvas, zooming

我正在画布上构建一个应用程序，它由一个简单的 DOM 组成，每次鼠标移动都会重绘（是的，这是必要的），对于性能问题，并不是每个部分都只重绘需要的部分。

该应用程序运行良好，但我想添加缩放功能，我看到它的方式，它可以通过三种不同的方式完成：

1 - 每次用户放大或缩小时，每个 DOM 元素都会重新计算（位置和大小） - 它可能存在精度问题并且它不是一个很好的抽象

2 - 画布具有分辨率属性（即，当用户缩小分辨率时，分辨率可能从 1 变为 .75） - 每次重绘时都需要进行计算

3 - 使用内置的 translate() 和 scale() 方法 - 可能是最优雅和最快的解决方案，但是它根本不直观，可能很难理解我或其他人稍后是如何完成的（这些方法适用于整个画布，首先您将在画布上进行翻译和缩放，然后您绘制的所有内容都会“神奇地”翻译和缩放）

哪一个是最好的，或者还有其他我没有想到的可能性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-26T13:22:57.957

我会使用内置的 translate()/scale() 方法。如果您担心任何这些方法的性能和质量，您应该尝试以一种可以将其换成其他选项进行比较的方式进行操作，如果结果最终让您担心的话。

# asp.net - ASP.NET Session ID 可以同时在两台机器上相同吗？

> ID：589956
> 
> 赞同：1
> 
> 时间：2009-02-26T10:23:53.313
> 
> 标签：asp.net, session, session-state

我有一个 ASP.NET 应用程序，它使用 Session.SessionID 来防止多个用户同时查看相同的数据。

我有一个表，其中包含一组需要处理的图像（存储在 BLOB 中）。应该只有一个用户能够同时查看相同的图像。为了实现这一点，当用户检索每条记录时，记录会使用 Session.SessionID 进行更新。此更新发生在 ReaderWriterLock 内。

我已经进行了测试以确保 ReaderWriterLock 正常工作，并且可以确认只有一个会话可以一次执行该块内的代码。

我目前的理论是两个不同的用户同时获得相同的 SessionID。此应用程序的用户可以查看他们已锁定的记录或任何未锁定的图像。

我已经修改了应用程序以在每个页面的页脚中显示 SessionID，以便如果问题再次发生，我可以检查 SessionID 值。

我在网上看到一些文章暗示 SessionID 不是唯一的，也有人说 SessionID 是唯一的。我知道 SessionID 不是永远唯一的，但是 SessionID 值对于活动会话可以被认为是唯一的吗？

[这个论坛描述了一个类似的问题](http://forums.asp.net/p/413704/416543.aspx)

我还阅读了一些建议，即应该将 Guid 存储在 Session 对象中并用作唯一 ID 而不是 Session ID。

感谢您到目前为止的回复。这是基于迄今为止的答案的澄清：

“永远锁定” - 我们通过 5 分钟的锁定超时来防止这种情况。在用户锁定图像之前，在 ReaderWriterLock 内部，我们会“清理”旧锁（解锁锁定超过 5 分钟的图像），查询以获取最旧的解锁图像，并使用更新语句“锁定”该图像图像到当前会话。

问题的一个可能原因是，如果一个用户“锁定”了一张图像，但随后离开 PC 短暂休息。如果他们在 5 分钟内什么都不做，则屏幕上的图像将被解锁并可能被另一个用户打开。我在报告问题时提到了这种情况，我确信用户一直在持续工作。

“不同的窗口/选项卡” - 我实际上并没有亲眼看到错误，但报告问题的人告诉我，这是两台不同的 PC 和登录用户的两个不同用户名。

希望现在我在页面上显示会话 ID，下次发生这种情况时，我将能够肯定地说两台机器上的会话 ID 是否相同，或者是否是其他问题。此问题在测试阶段从未发生过，因此它似乎是大量并发用户的症状。

感谢您到目前为止的回复，随着更多信息的到来，我会更新这个问题。

似乎用户没有给我完整的故事。根据接受的答案，在我们的案例中，会话 ID 是唯一的。两个用户能够同时看到相同的图像，因为用户 1 在 5 分钟的“废弃图像”解锁过程中处于空闲状态。已提高“废弃图像”超时以匹配会话超时以避免此问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-02-26T12:05:24.333

就 ASP.NET 分配的每个用户而言，会话 ID 是唯一的，尽管这并不能保证防止恶意用户（用户可以手动复制他们分配的 ID 并将其提供给其他人）。

您可能在这里看到的是来自同一用户的多个选项卡或窗口，因为用户一次发出多个请求是完全有效的。

为了做你想做的事，我不得不问 - 你怎么知道用户何时*停止*查看图像，所以你可以解锁它。如果我查看图像，然后只是关闭浏览器而不是转到另一个页面/图像，它是否仍然锁定到我的（永远丢失的）会话 ID？

如果您使用某种结帐方案 - 用户必须有意签出并签入图像，那么您可能应该为该结帐使用唯一编号（新 Guid），而不是整个用户。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-02-26T13:09:28.363

红旗这里的人。

是的，您可以，但绝对必要的是，您不能或至少使将来尽可能难以重复使用它们。

这取决于您的服务器端应用程序处理会话 ID 和维护状态的程度。您应该（实际上必须）考虑限制 session_ID 的生命周期，以及如何处理身份验证/授权状态。

我在一家排名前 10 的投资银行的关键交易平台上看到，您可以在其中动态捕获会话 ID（包含授权权限）并重新使用它们（通过 ParosProxy.org 的 Paros 等工具）以执行数百万美元代表他人进行交易。在当前的气候下——这是一个问题吗？;-) 抱歉——尽管我很想给这些小丑点名和羞辱，但我不会。

这种情况的可能性有多大？您可以在交换网络上捕获会话 ID 吗？当然，在本地 VLAN 中使用黑客工具 CAIN 并利用 ARP 中毒是可以的。

在编写不佳的服务器端应用程序中，您还可以预测会话 ID。检查工具 WebScarab（在任何 Pen Testers 军械库中）。这将检测 ID 的随机性。在具有另一个关键应用程序的同一家银行，您可以生成自己的会话 ID 来访问和交易应用程序。他们的重点是低延迟（这对业务至关重要）而不是安全性。

可以在 Owasp.org 找到介绍

诺莉·邓恩

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-26T10:53:23.713

此链接表示会话 ID 是唯一的 - [http://support.microsoft.com/kb/899918](http://support.microsoft.com/kb/899918)

会话 ID 是唯一的，因为在任何给定时间只有 1 个会话将拥有该 ID。

如果不是这样，我想会有很多人大声喊叫。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-02-26T11:39:35.473

会话 ID 几乎肯定对用户来说是唯一的。今天，几个用户共享一个 SessionID 的故障模式非常非常罕见。但是，用户可以做几件事来创建您所看到的效果。

例如，用户可以在她的浏览器中打开多个选项卡。这些选项卡都将共享相同的会话 ID。因此，如果她在这些浏览器选项卡之间来回切换，它可能会产生您所看到的效果。

另一个问题是用户经常双击按钮和链接。这意味着处理请求可能会使用相同的会话 ID 发出两次。我会先检查这种可能性。

# windows - 在 Windows 上使用 Boost 和 Cygwin

> ID：589957
> 
> 赞同：8
> 
> 时间：2009-02-26T10:23:54.627
> 
> 标签：windows, boost, cygwin

对于比我更高级的用户来说，这应该是一个简单的问题。:-) 如何在 Windows 上使用带有 cygwin 的 boost 库？

我正在使用 cygwin 在 winxp 机器上使用 g++ 进行编程。我需要修改二阶 Bessel 函数，所以我下载了最新版本的 boost 库并将其安装在 'c:\cygwin\lib\boost_1_38_0\' 文件夹中。

我正在尝试从他们网站的“入门”部分运行“example.cpp”程序：http: [//www.boost.org/doc/libs/1_35_0/more/getting_started/unix-variants.html](http://www.boost.org/doc/libs/1_35_0/more/getting_started/unix-variants.html)

我正在使用简单的 Bash shell 命令行从创建示例文件的目录编译：'g++ -Wall example.cpp'

我不断收到消息：“boost/lambda/lambda.hpp：没有这样的文件或目录”

我在命令行中尝试了所有可能的 -L、-l、-I 选项组合以包含目录，但无济于事。还尝试在我的 Windows 系统的 PATH 行中添加文件夹。

如何链接到 /boost 目录和所有子目录？头文件“lambda.hpp”正在调用子目录中的其他头文件。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-02-26T11:12:44.057

您可能还不太熟悉 C++？看来您混淆了术语。

C++ 程序的构建分为两个步骤：编译和链接。在第一步中，每个源文件（通常称为 .cpp）都是单独处理的。每个 .cpp 文件通常使用多个头文件，因此编译器首先插入这些头文件 - 从字面上看。这就是为什么它被称为#include。

在第二步中，链接器将所有已编译的 .cpp 文件放在一起并构建您的最终程序。其中一些已编译的 .cpp 可能以前捆绑在一起，其中捆绑称为库。

Boost 是头文件和 .cpp 文件的集合。因此，编译器和链接器都可能需要查找 Boost 目录。从您的错误消息中，很明显编译器步骤是问题所在。链接器不再需要标头。

编译器会看到`#include <boost/lambda/lambda.hpp>`指令。这意味着它需要知道第一级`boost`目录的位置。我猜此时路径会是`/lib/boost_ 1_ 38_0/include`（总是有`find / -name lambda.hpp`霰弹枪方法）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-02-26T11:19:29.343

如果你不完全喜欢 cygwin，你应该看看[http://nuwen.net/mingw.html](http://nuwen.net/mingw.html)，它为你提供了完整的 MinGW C++ 安装，并为你设置了所有库（如 Boost）。

**编辑：**我应该明确指出，除了 Cygwin 之外，您还可以使用这个 MinGW 安装，而不是作为替代品。只需确保 MinGW bin 目录出现在您的 PATH 中 Cygwin 之前。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-02-26T12:59:09.730

我认为你需要`-I /lib/boost_1_38_0`- 尽管这是一个非常不寻常的地方。你必须让我们知道你是如何安装它的，你是把它解压到你说的位置，还是你运行了makefile？我假设由于您提供了 Windows 路径，因此您没有在 cygwin 中安装它——您可能应该这样做。unix 入门指南中的说明应该会有所帮助 - 尽管不要下载预构建的`bjam`- 它需要使用 cygwin 构建。

但是，如果您对 cygwin（或一般的 unix）不是很熟悉，我认为您可能会发现使用本机 windows 工具更容易——就像在[Neil Butterworth 的回答](https://stackoverflow.com/questions/589957/using-boost-with-cygwin-on-windows/590121#590121)中一样。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-02-27T06:46:59.083

谢谢大家的信息，这是一个很好的介绍使用 cygwin 库。丹尼尔是对的。虽然任何变化都会产生错误，但以下行（使用 caps i）可以解决问题：

g++ -Wall -I /cygdrive/c/cygwin/lib/boost_1_38_0/example.cpp -o 示例

我也会在接下来的几天里检查 MinGW。

ps 我只是在那个文件夹中下载并解压缩了boost，但由于我只使用头文件，我可能不需要用cygwin编译。【cygwin自带的boost版本是1.33，好像没有贝塞尔函数。】

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-07-30T08:35:50.003

这是在 win7 cygwin64 g++ 5.4 和 2017-7 的 boost-1.64.7z 上。谷歌没有显示任何有用的结果来开始在 Windows 上提升（提升过时了吗？）。

通过实验，我设法编译并运行了一个 boost graph 示例程序，如下所示：

```
 :: g++ 5.4 in c:\cygwin64
  :: 7z extract boost download in c:\tools\boost\boost164
  > set BOOST_ROOT=c:\tools\boost\boost164
  > setx BOOST_ROOT  c:\tools\boost\boost164 -m
  > cd %BOOST_ROOT%
  > bootstrap.sh gcc  (the bat files doesn't work)
  > b2.exe
     ...failed updating 58 targets...
    ...skipped 18 targets...

    ...updated 1123 targets... 

  :: Lots of example here (not ranked highly by google)
  > mklink /D eg %BOOST_ROOT%/libs/graph/example

  :: Compiled and run [maxflow code using boost library][1] 
  :: http://vision.csd.uwo.ca/code
  > unzip ; vi Makefile
     CPPFLAGS = -I %BOOST_ROOT%/ 
     LDFLAGS = -L%BOOST_ROOT%/stage/lib 
  > make
  > set PATH=%PATH%;%BOOST_ROOT%/stage/lib
  > maxflow.exe 
    Flow = 6 
```

# ssas - 总结 SSAS 中的 4 个措施

> ID：589958
> 
> 赞同：0
> 
> 时间：2009-02-26T10:24:17.150
> 
> 标签：ssas

我想总结 SSAS 中的 4 个度量，并将总数除以 1 个度量，我的代码如下。

```
=Sum((Fields!Unique_Visits.Value)+Sum(Fields!Ask_the_Expert.Value)
+Sum(Fields!SSMembers.Value)+Sum(Fields!Poll_Members.Value))/
Sum(Fields!EnrolledMembers.Value) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-05T01:34:15.243

如果您的度量被定义为使用 SUM 聚合函数（这是默认值），那么 Analysis Services 将为您进行求和，您只需将度量相加并进行除法

([措施].[唯一访问次数] + [措施].[询问专家] + [措施].[SSMembers] + [措施].[Poll_Members]) / [措施].[注册会员]

# php - 解析格式化文本并提取两个值

> ID：589964
> 
> 赞同：2
> 
> 时间：2009-02-26T10:25:21.033
> 
> 标签：php, arrays, regex, file, text-extraction

如何在 PHP 中使用正则表达式从这种字符串中获取百分比和文件大小？

问题是我使用这样的函数得到这个字符串`print_r()`：

```
while(!feof($handle))
{
    $progress = fread($handle, 8192);
    print_r($progress); 
} 
```

上面的输出是这样的：

```
[download] 28.8% of 1.51M at 171.30k/s ETA 00:06 
```

我确定我需要使用类似`preg_match()`但不确定如何对数组执行此操作以及如何引用字符串。正则表达式需要放在循环内。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-02-26T10:40:24.477

试试这个：

```
foreach ($progress as $str) {
    if (preg_match_all('/\[download] (\d+\.\d)% of (\d+\.\d+\w)/', $str, $matches)) {
        var_dump($matches);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-26T10:40:06.707

```
$string = '[download] 28.8% of 1.51M at 171.30k/s ETA 00:06
           [download] 41.8% of 1.51M at 178.19k/s ETA 00:05';

// $string = file_get_contents($file_path);

$pattern = '/(?<percent>[0-9]{1,2}\.[0-9]{1,2})% of (?<filesize>.+) at/';
preg_match_all($pattern, $string, $matches);

print_r($matches); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T15:42:20.370

您也可以只使用：

```
$parts = explode(' ', trim($progress));
$progressPercentage = floatval($parts[1]); 
```

它可能比正则表达式更快，并且更易于阅读。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-03-10T12:53:52.230

因为您的字符串是可预测的格式，并且重点是提取而不是验证，所以我同意@gitaarik 的观点，因为这`explode()`可能是合适的。

在空格上拆分字符串，在获得所有所需元素后，再向爆炸限制添加一个元素，以便将所有“剩菜”放入最后一个元素中。

使用[数组解构语法](https://stitcher.io/blog/array-destructuring-with-list-in-php)，您可以只声明您打算使用的变量。

好处将是代码性能、可读性，并且不需要正则表达式知识。

代码：（[演示](https://3v4l.org/JNlFA)）

```
$string = '[download] 28.8% of 1.51M at 171.30k/s ETA 00:06';
// splits: 0--------| 1---| 2| 3---| 4--------------------| 
[, $percent, , $size, ] = explode(' ', $string, 5);
var_export(['percent' => $percent, 'size' => $size]); 
```

输出：

```
array (
  'percent' => '28.8%',
  'size' => '1.51M',
) 
```

# assembly - 等效指令数

> ID：589966
> 
> 赞同：2
> 
> 时间：2009-02-26T10:26:39.470
> 
> 标签：assembly, equivalent, instructions

我有一个问题（就像我一样）......

但是......如果我有一个用 C 或 C++ 或任何你想要的代码编写的选择算法......修复了一个编译器，我可以确定指令的数量，但这些指令彼此不同：x ADD，y MUL，z MOV , f FADD, t FMUL (F 代表 FLOATING)...是否有一种方法或等式或其他东西允许以“等效指令”的数量编写指令数量来比较不同的算法？你们中是否有人使用这种类型的指标？是垃圾吗？

谢谢

马可

第 2 部分：我知道它通常依赖于 uP 和架构。我的问题是：确定在不同软核架构上实现的不同算法的执行时间。在 y 轴上我必须写下时间，在 x 轴上，指令的数量和图形的点由架构类型参数化（请原谅我的英语）。但是在 x-axix 上，我认为最好使用类似“等效指令”的数量......

这是一个垃圾的想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-02-26T10:31:52.937

你不太明白这个问题。执行速度不仅取决于指令，还取决于指令间的依赖性。微处理器可以同时执行多条指令，因为这些指令不相互依赖。一次执行多条指令的能力因处理器系列而异。这就是为什么这个任务真的是特定于硬件的，它不能一劳永逸地解决。

您所能做的就是绘制指令和处理器周期的执行时间线。处理器周期可以是 y 轴，指令可以是 x 轴。您将在预测缓存命中和未命中时遇到问题，并且许多指令的执行时间会因缓存命中/未命中而有很大差异。准备好花大量时间阅读处理器手册。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-02-26T10:29:58.933

它必须考虑流水线和各种其他复杂性，其中许多会因处理器而异。换句话说，即使可行，我也看不出它特别有用。

还有一些算法无法告诉你的事情，比如会有多少缓存未命中等——这些可能比原始指令计数重要得多*。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-26T10:52:29.987

这不是垃圾，只是模糊。从算法到源代码再到对象代码再到核心......有很多细节需要确定，每个细节都可能对性能产生重大影响。

看看 Hennessey & Patterson 的“计算机体系结构，一种定量方法”

# vb.net - 在测试夹具设置中运行时生成相同的随机数

> ID：589967
> 
> 赞同：0
> 
> 时间：2009-02-26T10:26:43.777
> 
> 标签：vb.net, nunit

我试图在使用 NUnit 进行测试期间生成一个随机数，但它一直在生成相同的数字。为此，我正在使用以下功能。

```
dim dCount As Integer = Math.Floor((High - Low + 1) * Rnd() + Low)
dim divName As String = "abc" & dCount 
```

知道为什么要这样做吗？

问候，

山姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-26T10:32:26.867

大概您正在快速连续执行许多测试。我不确切知道`Rnd()`在 VB 中做了什么，但听起来它有典型的“每次调用新 RNG”问题。

创建一个实例`Random`并重复使用它。请注意，您的数学可以用一个简单的替换：

```
dim dCount as Integer = myRandom.Next(Low, High+1) 
```

一个警告 -`Random`不是线程安全的。如果您需要从不同的线程生成随机数，请[使用锁定或线程静态](http://blogs.msdn.com/pfxteam/archive/2009/02/19/9434171.aspx)。

另一方面：使用随机数会使您的单元测试具有不确定性。你确定你必须吗？有时它是合适的，但不经常是 IME。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-27T14:21:46.247

```
Dim dCount As Integer = between(low, high)
Dim divName As String = "abc" & dCount

Dim myRandom As New Random
Private Function between(ByVal low As Integer, ByVal high As Integer) As Integer
    between = myRandom.Next(low, high + 1)
End Function 
```

# sql-server - Sharepoint 和 SQL Server 端点

> ID：589969
> 
> 赞同：0
> 
> 时间：2009-02-26T10:29:31.663
> 
> 标签：sql-server, web-services, sharepoint, stored-procedures, endpoints

我在 MS SQL Server 2005 上创建了一个指向我的*Active Directory的***LinkedServer**。没什么太花哨的。具有分配给**CONNECTAS**属性的*ReadOnlyAdmin*帐户的简单**LinkedServer 。**

 ******然后我创建了一些存储过程来从 LinkedServer 检索一些数据。再次没有什么太花哨的。只需几个简单的*LDAP*查询。

然后我创建了一个*SQL 端点*来将这些存储过程公开为 Web 服务。使用 Visual Studio 2008，一切都很好。它找到端点，获取可用方法的列表并顺利运行。凉爽的。

但是*Sharpeoint Add Web Service*不知何故不起作用！它发现*WSDL*文件没有问题。检索所有函数和参数的列表，但只是不运行它们！有什么建议或我应该从哪里开始检查？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-03-02T21:28:36.913

不确定这是否有帮助，但根据我的经验，如果 SQL Server 和 SharePoint 服务器不同，则无法从 SharePoint 站点访问 sql 端点。

# c# - 自定义消息格式的反序列化/解析

> ID：589974
> 
> 赞同：1
> 
> 时间：2009-02-26T10:30:55.637
> 
> 标签：c#, parsing, serialization

我目前正在研究编写与 BNF 语法类似的自定义消息格式的快速反序列化/解析。可能涉及 50 个不同的对象。对象的语法包含一个递归定义，这对我来说是目前最大的问题。您是否知道任何好的示例，或者您是否会使用正则表达式编写自己的词法分析器并使用 FIFO 队列来解析它们以获取嵌入式消息？在 Perl 中，我目前正在将消息转换为 JSON 消息并使用通用解析器，但我不确定这在 C# 上是否有意义。消息如下所示：“{key1=value1|key2={key3=value3}}”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-02-26T10:34:39.200

以下 URL 显示了 Scott Gu 和 .NET 3.5 框架在 C# 中对 JSON 进行序列化/反序列化的示例：

[http://weblogs.asp.net/scottgu/archive/2007/10/01/tip-trick-building-a-tojson-extension-method-using-net-3-5.aspx](http://weblogs.asp.net/scottgu/archive/2007/10/01/tip-trick-building-a-tojson-extension-method-using-net-3-5.aspx)

在摘要之前，您会发现这句话：

> 注意：除了 JavaScriptSerializer 类之外，.NET 3.5 现在还包括一个新的 System.Runtime.Serialization.DataContractJsonSerializer 类，可用于 JSON 序列化/反序列化。

希望这可以帮助：

安德鲁

# .net - 如何命名在存储过程中返回的数据集表？

> ID：589976
> 
> 赞同：41
> 
> 时间：2009-02-26T10:32:00.813
> 
> 标签：.net, sql, sql-server, dataset

我有以下存储过程

```
Create procedure psfoo ()
AS
select * from tbA
select * from tbB 
```

然后我以这种方式访问​​数据：

```
 Sql Command mySqlCommand = new SqlCommand("psfoo" , DbConnection)
     DataSet ds = new DataSet();
     mySqlCommand.CommandType = CommandType.StoredProcedure;
     SqlDataAdapter mySqlDataAdapter = new SqlDataAdapter();
     mySqlDataAdapter.SelectCommand = mySqlCommand;
     mySqlDataAdapter.Fill(ds); 
```

现在，当我想访问我的表时，我必须这样做：

```
 DataTable datatableA = ds.Tables[0];
     DataTable datatableB = ds.Tables[1]; 
```

dataset Tables 属性也通过字符串（而不是 int）获得了访问器。

**是否可以在 SQL 代码中指定表的名称，以便我可以改为这样写：**

```
 DataTable datatableA = ds.Tables["NametbA"];
     DataTable datatableB = ds.Tables["NametbB"]; 
```

我正在使用 SQL Server 2008，如果这有所作为的话。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2009-02-26T10:35:59.340

据我所知，从存储过程中，你不能这样做。但是，您可以在检索到 DataSet 后设置名称，然后从那时起使用它们。

```
ds.Tables[0].TableName = "NametbA"; 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-11-02T09:45:42.883

存储过程：

```
 select 'tbA','tbB','tbC' 
    select * from tbA
    select * from tbB
    select * from tbC 
```

前端：

```
 int i = 1;
       foreach (string tablename in dsEmailData.Tables[0].Rows[0][0].ToString().Split(','))
       {
           dsEmailData.Tables[i++].TableName = tablename;
       } 
```

希望这可以帮助

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2009-02-26T10:36:15.610

填充数据集后有什么原因不能手动命名它们吗？

```
mySqlDataAdapter.Fill(ds);
ds.Tables[0].TableName = "NametbA";
ds.Tables[1].TableName = "NametbB"; 
```

我不知道如何命名作为存储过程的多个结果集的一部分返回的 DataTables，但是如果您知道存储过程返回的内容，那么手动命名它们应该可以正常工作。

**编辑**

知道您可以控制存储过程，一种替代方法可能是向结果集中添加一个表示表名的列。然后，您可能可以执行以下操作：

```
foreach (DataTable table in ds.Tables)
{
    table.TableName = table.Rows[0]["TableName"].ToString();
} 
```

但是，这依赖于从实际包含行的存储过程返回的结果集。如果它们不包含行，那么您必须将其包装在“if”语句中，并且并非每个表都会获得名称。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2011-05-31T14:56:31.573

好主意，最好你的过程返回三个结果集而不是添加表名

```
firs trow of each table
select 'tbA' FirstTableName,'tbB' SecondTableName
select * from tbA
select * from tbB 
```

每次执行过程时，表 [0] 都会有一行继续选择表名

另一个想法可以将表名作为过程的输出参数传递

```
Create procedure psfoo (@tb1 varchar(50) output,@tb2 varchar(50) output)
AS
set @tb1='tbA'
set @tb2 'tbB'
select * from tbA
select * from tbB 
```

如果此方法限制您并且选择是可变的，您可以创建这样的过程

```
Create procedure psfoo ()
    AS
    select * from tbA
    select * from tbB
return 'tbA,tbB' 
```

并通过将过程 retrun 值拆分为 string[] 您可以按顺序获取表的名称

```
returnvalue=@returnvaluefromSp.split(new char[]{','});
string tablenam1=returnvalue[0];
string tablenam2=returnvalue[1]; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-22T15:07:23.970

我有一个存储过程，可以访问我企业中的所有数据并返回多个结果集。在每个结果集之前使用名称进行选择对我来说更有意义。像这样：

```
SELECT 'Customers' AS TableName
SELECT ID, Name FROM dbo.Customer
SELECT 'Orders' AS TableName
SELECT ID, Created FROM dbo.[Order] 
```

然后，当我遍历 MyDataSet.Tables 时，我只有一个循环和直截了当的查找逻辑。没有要跟上的主元数据表。这甚至在没有返回表的情况下也有效。如果不返回表数据，则不返回匹配的元数据，这对我来说很有意义。

```
For Each DataTable As DataTable In MyDataSet.Tables
  MyDataSet.Tables(MyDataSet.Tables.IndexOf(DataTable) + 1).TableName = DataTable.Rows(0)("TableName")
Next 
```

如果我想向元数据表添加更多列，我可以。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-01-08T12:28:56.780

为了给数据集中的所有表命名，我们需要在 SP 或 T-Sql 的最后再编写一个选择查询。

```
 lsqry = New System.Text.StringBuilder
lsqry.AppendLine("select * from Bill_main")
lsqry.AppendLine("select * from serviceonly")
lsqry.AppendLine("select * from PendingService")
lsqry.AppendLine("select * from T_servicebillhd")
lsqry.AppendLine("select 'Bill_Main','serviceonly','PendingService','T_servicebillhd'")

Using con As New SqlConnection(lsConnection)
    Try
        con.Open()
        Using cmd As SqlCommand = con.CreateCommand
            With cmd
                .CommandText = lsqry.ToString
                .CommandType = CommandType.Text
            End With
            Using da As New SqlDataAdapter(cmd)
                da.Fill(DS)
            End Using
        End Using

        For li As Integer = 0 To DS.Tables.Count - 2
            DS.Tables(li).TableName = DS.Tables(DS.Tables.Count - 1).Rows(0).Item(li)
        Next
    Catch ex As Exception

    End Try
End Using 
```

在上面的示例中，我使用的是 t-sql 语句而不是 SP。我在其中写了 4 个选择查询，最后一个是这些表的表名。并获取包含表名称的最后一个表，并使用 TableName 属性将其分配给表。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2010-04-11T10:29:24.270

这对我有用，但需要一些额外的工作来获得预期的表名：

```
 Dim tableCount As Integer = 3
    Dim tables(tableCount) As DataTable
    tables(0) = (New DataTable("Employee"))
    tables(1) = (New DataTable("Manager"))
    tables(2) = (New DataTable("Department"))
    dsUControlData.Tables.Add(tables(0))
    dsUControlData.Tables.Add(tables(1))
    dsUControlData.Tables.Add(tables(2))

    'Fill required tables
    da.Fill(0, 0, tables)

    Return dsUControlData 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-12-29T01:46:35.810

我知道这是一个非常古老的帖子，但要回答......是的，这是可能的。只需`"TableName"`在 dataadapter`Fill`调用中添加..

```
MyDataAdapter.Fill(ds, "TableName"); 
```

我是一个 C# 人，但你明白了。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-03-21T11:21:41.857

你可以返回一个额外的结果集来命名表，如下所示：

```
SELECT 'firstTableName' AS tbl
UNION
SELECT 'secondTableName' AS tbl
UNION
... 
```

如果这是第一个结果集，您可以使用它来命名后续结果集。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-05-07T13:54:28.500

我知道这是一个老问题，但我今天正在考虑做同样的事情，所以我不只是循环遍历结果数据集的索引。因为如果存储过程按照选择的顺序更改，.net 代码就会被炸毁。

我想出了用表名向结果集中添加一列并使用 case 语句查看表中是否存在该列的解决方案。但似乎我在移动代码。刚刚使 SQL 静态化。另外，如果您在不同的表中有一个名称相同的列怎么办。瘸...

```
myDS.Tables(i).Columns.Contains("TableName") 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-08-05T14:38:16.987

我知道这是旧帖子，但是当我的存储过程返回多个数据集时，我也遇到了类似的情况，我不确定根据满足的条件将返回多少个数据集。

因此，我实现了如下排序以按特定顺序获取返回数据集，这样我也可以根据代码端提供的条件在 C# 代码上管理每个数据集。

```
if (dsop != null && dsop.ReturnDataSet != null && dsop.ReturnDataSet.Tables.Count > 0)
{
            foreach (DataTable dt in dsop.ReturnDataSet.Tables)
            {
                if (dt.Rows.Count > 0 && dt.Columns.Count > 1)
                {
                    foreach (DataRow dr in dt.Rows)
                    {            //Alarm table[0]
                        if (dt.TableName == "Table")
                        {
                            OperatorHistory operatorReportEntity = new peratorHistory
                            {                                   
                            };
                            reportdata.Add(operatorReportEntity);
                        }
                        //ARC table[2], DW table[3], GT table[4]
                        else if (dt.TableName == "Table2" || dt.TableName == "Table3" || dt.TableName == "Table4")
                        {
                            OperatorHistory operatorReportEntity = new peratorHistory
                            {                                   
                            };
                            reportdata.Add(operatorReportEntity);
                        }
                   }    
               }           
             }  
  }

--table[0]
if(LEN(@ADEventIdsForAlarms ) > 1)
select * from (
---my query logic here
) as TBL_ADEventIdsForAlarms
else
select 'TBL_ADEventIdsForAlarms'

--table[1]
--/* Just Message  */ UNION ALL
if(LEN(@ADEventIdsForOPR ) > 1)
---my query logic here
) as TBL_ADEventIdsForOPR
else
select 'TBL_ADEventIdsForOPR'

--table[2]
if(LEN(@ADEventIdsForARC) > 1)
select * from (
---my query logic here
) as TBL_ADEventIdsForARC
else
select 'TBL_ADEventIdsForARC' 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2016-10-24T14:48:53.383

Try this

```
YourDataAdapter.Fill(ds, "Table"); 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2016-07-29T08:19:02.323

你可以试试这个：

在您的程序中添加以下行

```
Select 'TableName1','TableName2'; 
```

使用 C#：

```
for (var i=0;i<ds.Tables[0].Columns.Count;i++)
 {
    ds.Tables[i + 1].TableName = ds.Tables[0].Columns[i].ColumnName;

  } 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2017-11-21T10:05:13.250

应该使用 select into "yourtablename" from originaltable，这只是一个例子，找到 select into 语句的正确语法。

这是满足您要求的正确方法。谢谢你。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2018-02-28T15:28:06.183

这个问题是老问题了，但是，它在谷歌搜索的顶部，呵呵。也许它会帮助某人......

答案是肯定的，可以在代码中指定表的名称，这样就可以通过名称访问DataSet中的DataTable。

首先，我必须解释一下 TableMapping 是如何工作的。如果我们不使用 SqlDataAdapter 指定 TableMappings（SqlDataAdapter 将填充我们的 DataSet），那么默认情况下第一个表将命名为“Table”，第二个将命名为“Table1”，第三个将命名为“Table2”等。

因此，当我们想在 DataSet 中命名 DataTable 时，我们可以这样使用它：

```
//...

System.Data.DataSet myDataSet = new System.Data.DataSet();

using (System.Data.SqlClient.SqlDataAdapter dbAdapter = new System.Data.SqlClient.SqlDataAdapter(dbCommand))
{
    dbAdapter.TableMappings.Add("Table", "MyFirstTitleForTableOne");
    dbAdapter.TableMappings.Add("Table1", "MyFirstTitleForTableTwo");
    dbAdapter.TableMappings.Add("Table2", "MyFirstTitleForTableThree");
    dbAdapter.TableMappings.Add("Table3", "MyFirstTitleForTableFour");
        //...

    dbAdapter.Fill(myDataSet);
}

//... 
```

而且，现在我们可以通过标题访问 DataTable：

```
System.Data.DataTable firstTable = myDataSet.Tables["MyFirstTitleForTableOne"];
System.Data.DataTable secondTable = myDataSet.Tables["MyFirstTitleForTableTwo"]; 
```

抱歉，但我没有编写将检查 null (myDataSet) 或将其设置在 try/catch 块中的代码，因为我认为这与这个问题无关。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2017-05-31T03:59:33.747

尝试这个。在 MS SQL 2008 R2 中，我总是使用它。

```
mySqlDataAdapter.Fill(ds,"NameTableA"); 
```

* * *

## 回答 #17

> 赞同：-1
> 
> 时间：2015-06-12T05:38:24.647

可能这可能是解决方法

```
 Create procedure psfoo ()
 AS
 select * ,'tbA' as TableName from tbA
 select * ,'tbB' as TableName from tbB 
```

然后在 C# 代码中

```
 foreach (DataTable dt in ds.Tables)
        {
            if (dt.Rows[0]["TableName"].ToString().Contains("tbA"))
            {

            }
            else if (dt.Rows[0]["TableName"].ToString().Contains("tbB"))
            {

            }
        } 
```

# wcf - 挂钩到 WCF 操作

> ID：589979
> 
> 赞同：0
> 
> 时间：2009-02-26T10:32:34.433
> 
> 标签：wcf

我需要挂钩到 WCF 操作过程以在每次操作之前和之后执行一些代码。

一些上下文：

*   我已经有一个自定义的 servicehost、servicehostfactory 和 servicebehavior
*   我所有的服务都基于一个通用的基类

我一直在窥探，我认为使用 IParameterInspector 将是最好的选择，但我不完全确定我需要执行的代码与参数无关......

有什么线索吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-02-26T10:41:32.353

IParameterInspector 不是一个糟糕的选择。

您是否需要知道正在发生哪个操作/会话/端点，或者您只是为所有操作安装相同的逻辑？是否需要修改 Message 对象？（这些考虑可能会改变您对扩展点的选择。）

是否需要修改线程本地存储？如果是这样，更喜欢 ICallContextInitializer。

# c++ - 向量、结构和 std::find

> ID：589985
> 
> 赞同：37
> 
> 时间：2009-02-26T10:34:09.220
> 
> 标签：c++, data-structures, find, vector

又是我的向量。我希望我不会太烦人。我有一个这样的结构：

```
struct monster 
{
    DWORD id;
    int x;
    int y;
    int distance;
    int HP;
}; 
```

所以我创建了一个向量：

```
std::vector<monster> monsters; 
```

但是现在我不知道如何通过向量进行搜索。我想在向量中找到怪物的 ID。

```
DWORD monster = 0xFFFAAA;
it = std::find(bot.monsters.begin(), bot.monsters.end(), currentMonster); 
```

但显然它不起作用。我只想遍历结构的 .id 元素，但我不知道该怎么做。非常感谢您的帮助。谢谢 ！

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2009-02-26T10:41:54.927

[`std::find_if`](http://en.cppreference.com/w/cpp/algorithm/find)：

```
it = std::find_if(bot.monsters.begin(), bot.monsters.end(), 
        boost::bind(&monster::id, _1) == currentMonster); 
```

或者，如果您没有 boost，请编写您自己的函数对象。看起来像这样

```
struct find_id : std::unary_function<monster, bool> {
    DWORD id;
    find_id(DWORD id):id(id) { }
    bool operator()(monster const& m) const {
        return m.id == id;
    }
};

it = std::find_if(bot.monsters.begin(), bot.monsters.end(), 
         find_id(currentMonster)); 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2010-01-08T22:03:09.287

怎么样：

```
std::find_if(monsters.begin(), 
             monsters.end(), 
             [&cm = currentMonster]
             (const monster& m) -> bool { return cm == m; }); 
```

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2009-02-26T10:40:38.877

您需要编写自己的搜索谓词：

```
struct find_monster
{
    DWORD id;
    find_monster(DWORD id) : id(id) {}
    bool operator () ( const monster& m ) const
    {
        return m.id == id;
    }
};

it = std::find_if( monsters.begin(), monsters.end(), find_monster(monsterID)); 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2009-02-26T10:43:35.547

看一下`std::find`模板，特别是第三个参数：

```
template<class InputIterator, class EqualityComparable>
InputIterator find(InputIterator first, InputIterator last,
               const EqualityComparable& value); 
```

这个 EqualityComparable 是什么？再次从文档中：

```
A type is EqualityComparable if objects of that type can be 
compared for equality using operator==, and if operator== is 
an equivalence relation. 
```

现在，你的怪物类型需要定义这样一个操作符。如果您不这样做，编译器会为您生成一个（以及默认 ctor 和 dtor），它会执行一种`memcmp`在您的情况下不起作用的事情。因此，`std::find`首先要使用定义一个比较器函数/函子，该算法可以使用它来匹配您`currentMonster`的内容，例如：

```
 struct monster {
  // members
  bool operator==(const monster& l, const monster& r) const
  {
     return l.id == r.id;
  }
 }; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2010-01-08T22:07:35.207

或将怪物放在地图而不是矢量中

或者如果它们必须在向量中，则创建索引映射，即 ID 映射到向量索引

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-01-07T10:53:24.890

这是一个基于 Johannes Schaub (boost version) 答案的完整示例。

```
#include <algorithm>
#include <boost/bind.hpp>

struct monster 
{
    DWORD id;
    int x;
    int y;
    int distance;
    int HP;
};

int main ()
{
    std::vector<monster> monsters;

    monster newMonster;
    newMonster.id    = 1;
    newMonster.x     = 10;
    monsters.push_back ( newMonster );

    newMonster.id    = 2;
    newMonster.x     = 20;
    monsters.push_back ( newMonster );

    newMonster.id    = 2;
    newMonster.x     = 30;
    monsters.push_back ( newMonster );

    DWORD monsterId = 2;

    std::vector< monster >::iterator it = std::find_if ( monsters.begin (), monsters.end (), 
        boost::bind ( &monster::id, _1 ) == monsterId );

    return 0;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-09-18T08:07:09.130

您可以编写如下函数：

```
monster* findMonster(DWORD currentMonster) {
    for (auto it = bot.monsters.begin(); it != bot.monsters.end(); it++) {
        if (it->id == currentMonster) {
            return &(*it);
        }
    }
    return NULL;
} 
```

如果在向量中找到存储节点，则返回指向存储节点的指针，否则返回 NULL。

请注意，这`return it;`不会直接工作。

# winapi - 如何以编程方式中止 Windows (XP|Vista) 中的关机？

> ID：589986
> 
> 赞同：9
> 
> 时间：2009-02-26T10:34:21.573
> 
> 标签：winapi, shutdown, system-shutdown

我希望能够 1\. 从我的应用程序中检测（并且，如果需要 2\. 中止）操作系统关闭，最好使用 Windows API。

我知道可以使用命令手动中止关机`shutdown -a`在最坏的情况下，我可以 ShellExecute 这个，但我想知道是否有更好的方法来以编程方式防止关机。

也许以编程方式通知操作系统即将关闭就足够了 - 如何做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-02-26T10:46:32.370

来自[MSDN](http://msdn.microsoft.com/en-us/library/aa376890(VS.85).aspx)：

> 当`WM_QUERYENDSESSION`用户选择结束会话或应用程序调用系统关闭函数之一时发送消息。如果任何应用程序返回零，则会话不会结束。`WM_QUERYENDSESSION`一旦一个应用程序返回零，系统就会停止发送消息。

因此，我的应用程序的 WindowProc 现在处理`WM_QUERYENDSESSION`消息并返回`0`.

没想到这么简单；作为奖励，它也适用于 Windows 2000。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2010-03-31T11:20:06.850

关于“简单地”返回 0 以阻止关闭，如果您想以正确的方式进行操作，它并不那么简单。尤其是在 Vista 上。例如，还请阅读[http://msdn.microsoft.com/en-us/library/ms700677(VS.85).aspx](http://msdn.microsoft.com/en-us/library/ms700677(VS.85).aspx)

# project-management - 作为 Web 开发人员/经理，您发现 XMPP 有哪些用途可以帮助您？

> ID：589995
> 
> 赞同：3
> 
> 时间：2009-02-26T10:37:05.110
> 
> 标签：project-management, xmpp

为了明确我的问题：

最近我正在试验 XMPP——我已经建立了自己的 XMPP 服务器，并试图弄清楚它在我们的开发过程中可能有什么用途。除了显而易见的事情（我们将其用于 IM-ing 并为我们的团队建立了一个群聊室），我们将其用作我们的问题跟踪系统和持续集成系统的通知平台。

我已经考虑过其他一些可能的用途，例如监控我们的服务器状态（通过存在层）、应用程序异常通知（通过 PubSub）等。

我的总体想法是为我们的开发过程构建某种统一的支持系统，该系统将通过常规 IM 客户端进行通信（不过，PubSub 支持会很棒）并使我们的流程更加透明和响应更快。

你有没有想过这样的事情？或者您是否为此目的使用了完全不同的东西？我只是在重新发明轮子吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-26T12:34:02.783

通过纯 PubSub 或 PEP（PubSub 子集）推送到订阅 IM 客户端的网站通知（很可能通过发布到 Atom 提要的更改）将成为一个大型应用程序，在普通企业即时消息传递之外。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-26T13:40:20.457

我写了一个机器人，它知道如何与我们的票务系统（我们的 Trac 网站）对话。用户可以要求查看当前 sprint 的工单，分配给他们的工单，他们可以通过工单“grep”，获取当前的里程碑信息并更新工单字段（workleft、状态、所有者或附加评论）。这在一些开发人员中很受欢迎——让人们保持更新他们的票是一件好事。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-07-10T21:42:31.793

IMified (imified.com) 是构建您正在谈论的应用程序的一种非常好的方式。

# asp.net - ELMAH 日志的单独查看器应用程序

> ID：589996
> 
> 赞同：13
> 
> 时间：2009-02-26T10:37:06.137
> 
> 标签：asp.net, elmah

我们在我们的 ASP.NET 应用程序中使用 ELMAH 记录错误。我们使用 SQL Server 错误日志记录。由于应用程序中的安全性和配置限制，我们希望将日志查看器 UI (Elmah.ErrorLogPageFactory) 放在一个单独的 Web 应用程序中，连接到同一个数据库。

但是，ELMAH 会过滤应用程序名称上的错误，因此只需部署一个单独的应用程序，您还会获得一个单独的日志。有没有办法将 ELMAH 配置为独立的日志查看器，即显示来自不同应用程序的日志消息？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2009-05-17T14:10:24.793

您可以像这样覆盖配置中的应用程序名称...

```
<elmah>
  <errorLog type="..." applicationName="YourApplicationName" />
</elmah> 
```

您可以只为查看器应用程序提供要监视的应用程序的现有名称，也可以在两个配置文件中指定相同的自定义名称。

# ironpython - 在 IronPython 中访问嵌入式资源

> ID：589999
> 
> 赞同：1
> 
> 时间：2009-02-26T10:37:59.070
> 
> 标签：ironpython, icons, ironpython-studio

我正在 IronPython Studio 中开发一个 Windows 窗体应用程序。我想为我的项目选择一个图标，但是这两个都失败了：1-表单属性窗口->图标（选择一个 *.ico 文件）发生编译时错误并且与 IronPython.targets 文件有关

> “IronPythonCompilerTask”任务意外失败。System.ArgumentNullException：值不能为空。

2- 我将 *.ico 文件添加到项目（项目 -> 添加 -> 现有项目）并在其属性中，将“构建操作”更改为“嵌入式资源”，现在我无法使用 System.Reflection.Assembly 访问这个资源我的代码：

> self.Icon = Icon(Assembly.GetExecutingAssembly().GetManifestResourceStream('IronPythonWinApp.myIcon.ico'))

在运行时它会抛出一个异常：

> 动态程序集中支持被调用的成员

有谁知道将图标添加到 IronPython WinForms 的更好（最佳？）方法？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-06-21T03:04:05.063

IronPython 是一种动态脚本语言；它在运行时从脚本文件本身进行解释，而不是编译成程序集。由于没有已编译的程序集，因此您不能拥有嵌入式资源。以下是在 IronPython 中向表单添加图标的两种方法：

首先，您可以将图标作为松散文件包含在 python 脚本旁边。然后，您可以通过将图标文件名传递给 System.Drawing.Icon 构造函数来创建图标对象。这是此场景的一个示例，其中主要的 python 脚本和图标部署在同一目录中。该脚本使用[此处](https://stackoverflow.com/questions/606561/how-to-get-filename-of-the-main-module-in-python)找到的解决方案来查找目录。

```
import clr
clr.AddReference('System.Drawing')
clr.AddReference('System.Windows.Forms')

import os
import __main__
from System.Drawing import Icon
from System.Windows.Forms import Form

scriptDirectory = os.path.dirname(__main__.__file__)
iconFilename = os.path.join(scriptDirectory, 'test.ico')
icon = Icon(iconFilename)

form = Form()
form.Icon = icon
form.ShowDialog() 
```

或者，您可以加载一个图标，该图标作为嵌入资源包含在用 C# 编写的 .NET 程序集中，例如。

```
import clr
clr.AddReference('System.Drawing')
clr.AddReference('System.Windows.Forms')

from System.Drawing import Icon
from System.Reflection import Assembly
from System.Windows.Forms import Form

assembly = Assembly.LoadFile('C:\\code\\IconAssembly.dll')
stream = assembly.GetManifestResourceStream('IconAssembly.Resources.test.ico')
icon = Icon(stream)

form = Form()
form.Icon = icon
form.ShowDialog() 
```******************************