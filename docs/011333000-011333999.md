# StackOverflow 问答 11333000-11333999

# android - 如何获取不同国家的国债报价？

> ID：11333006
> 
> 赞同：0
> 
> 时间：2012-07-04T16:55:24.793
> 
> 标签：android, finance, quote, bloomberg

我想困难的部分是来源。你知道任何网页或服务可以让我获得最重要国家的债券价格吗？

我知道在彭博社可以做到这一点。但是我可以在 Android 应用程序中显示从那里获得的数据吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T17:31:36.727

[FRED](http://research.stlouisfed.org/fred2/)包含“来自 41 个来源的 45,000 个经济时间序列”，包括来自多个国家的债券。报告的价差很可能是“期末”（例如日、月、季度等）值，而不是可交易的报价。如果您正在寻找实时、可交易的报价，您将很难找到免费和可再分发的数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T22:19:31.753

正如 RYogi 所暗示的那样，对于大多数提要（无论是彭博社还是其他提要），除非您有特殊的再分发协议 (= $$$)，否则您不得再分发您获得的数据。

# javascript - 使 HTML 表单元素出现（jQuery 或 JS）

> ID：11333008
> 
> 赞同：0
> 
> 时间：2012-07-04T16:55:33.580
> 
> 标签：javascript, jquery, html

我想知道是否存在执行以下操作的 jQuery 或 JS 库：

根据用户在 A01 中输入的内容，检查该值，如果该值等于“x”，则使 A01_1 可见。如果没有，什么也不做。

```
<form id="survey">
    <fieldset>
            <label for="A01">A01</label>
            <input type="number" name="A01" id="A01" min="0" max="5" >

            <label for="A01_1">A01_1</label>
            <input type="text" name="A01_1" id="A01_1" > 
```

我想我正在寻找某种内联验证功能，如果它与特定输入匹配，它将使另一个元素可见。我需要在许多不同的地方应用它，所以我想让它成为一个可重用的函数。

我的 JS 技能有限，因此非常感谢任何帮助（从哪里开始等）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T16:59:39.910

```
$('input[name=A01]').on('keyup', function() {

   var val = $.trim( this.value ),
       x = 'your_custom_value',
       id = this.id,
       target = $('label[for='+ id +'_1], input[name='+ id +'_1]');

   target.hide();

   if( val == x) {
     target.show();
   }
}); 
```

为了重用，您可以更改标记，例如：

```
<form id="survey">
    <fieldset>
            <label for="A01">A01</label>
            <input type="number" name="A01" id="A01" min="0" max="5" class="myinput">

            <label for="A01_1">A01_1</label>
            <input type="text" name="A01_1" id="A01_1" >

            <label for="A02">A02</label>
            <input type="number" name="A02" id="A02" min="0" max="5" class="myinput">

            <label for="A02_1">A02_1</label>
            <input type="text" name="A02_1" id="A02_1" >
     </fieldset>
</form> 
```

并像这样改变***jQuery***：

```
$('input.myinput').on('keyup', function() {

   var val = $.trim( this.value ),
       x = 'your_custom_value',
       id = this.id,
       target = $('label[for^='+ id +'_], input[name='+ id +'_]');

   target.hide();

   if( val == x) {
     target.show();
   }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T17:02:36.840

```
<script type="text/javascript">
function checkField(field) 
{
    if(field.value == 'VALUE')
        document.getElementById('A01_1').style.display = 'true';
}
</script>

<input type="number" name="A01" id="A01" min="0" max="5" onchange="checkField(this)"> 
```

然后将样式 display:none 应用于要隐藏的元素

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T17:31:08.397

试试这个：

HTML：

```
<form id="survey">
    <fieldset>
            <label for="A01">A01</label>
            <input data-relation="a01check" type="number" class="checkerinput" name="A01" id="A01" min="0" max="5" >

            <label class="noshow a01check" for="A01_1">A01_1</label>
            <input class="noshow a01check" type="text" name="A01_1" id="A01_1" >
    </fieldset>
</form> 
```

JS：

```
(function(undefined) {

    var equalCheck = 3, $form = $('#survey');

    $form.find('input.checkerinput').bind('keyup change', function(event) {

        var value = parseInt($(this).val(), 10);
        if (!isNaN(value) && value == equalCheck){
            var relation = $(this).data('relation');
            if (relation != undefined) {
                $form.find('.' + relation).removeClass('noshow');
            }
        }
    });

})();​
    ​ 
```

CSS：

```
.noshow{
    display:none;
}​ 
```

[例子](http://jsfiddle.net/adescalzo/VFDYG/)

# python - Try statement not catching copy error python

> ID：11333015
> 
> 赞同：1
> 
> 时间：2012-07-04T16:56:11.893
> 
> 标签：python

I'm a beginner python programmer using it for simple admin tasks.

I have written a small log moving code (as I have a system that generates alot of log files that get moved from the server to storage).

I am getting a permissions error on a file on the remote path has permission denied when trying to copy so have wrapped this in a try: statement to try and by pass the error but the script is still ending... line 32 is shutil.copy2 (location,copylocation).

Base path is a local directory and log dir is a UNC path (which is appended with the folder set). Folders are mirrored across both file systems earlier in the script. (so should always exist).

Other try's such as around the os.remove work OK.

If anyone could point me in the general direction would be appreciated.

```
Traceback (most recent call last):
  File "C:\Program Files (x86)\Log Mover\log_mover.py", line 32,
  shutil.copy2 (location,copylocation)
  File "C:\Python27\lib\shutil.py", line 127, in copy2
  copyfile(src, dst)
  File "C:\Python27\lib\shutil.py", line 82, in copyfile
    with open(dst, 'wb') as fdst:
  IOError: [Errno 13] Permission denied: '\\\\XXXX\\d$\\logs\\
  logs/XXX\\XXX - 2012-07-03 21-49.XXXX'
  ☀could not delete:C:/logs/XX\XXX\XXX 2012-07-04 08-00-42.txt
  Traceback (most recent call last):

for root, dirs, files in os.walk(basepath):
   for filenames in files:
        location = os.path.join(root, filenames)
        try:
            datemod = time.strftime("%Y%m%d%H",time.localtime(os.path.getmtime(location)))
        except OSError:
            print "count not get mod time:"+location
        if datemod != currtime:
            drive,path = os.path.splitdrive(location)
            copylocation = str(logdir)+str(path)
            try:
                shutil.copy2 (location,copylocation)
            except OSError:
                print "could not copy"
            pass

            if os.path.getsize(location) == os.path.getsize(copylocation):
                try:
                    os.remove(location)
                    print "Deleted"+location
                except OSError:
                    print "could not delete:"+location
                pass
            else:
                print "sizes dont match" 
```

Thanks

Kenny

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T17:00:04.280

You're trying to catch OSError, while you get IOError.

Add this:

```
except (OSError, IOError):
    #some code 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T16:59:46.337

`shutil.copy2` throws an `IOError`, but you're catching `OSError`s, so therefore it just bubbles past, uncaught.

# php - 更改时间戳中的时间值

> ID：11333017
> 
> 赞同：0
> 
> 时间：2012-07-04T16:56:13.643
> 
> 标签：php, timestamp, strtotime

我正在尝试使用新值更新时间戳的时间（小时和分钟），但由于某些原因它返回 -19 小时，这是为什么呢？我做错了吗？

```
$hour_created = $_REQUEST['hour_created'];     // ex.: 13
$minute_created = $_REQUEST['minute_created']; // ex.: 00

$updated_timestamp = strtotime("$hour_created:$minute_created", $_REQUEST['_timestamp']); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T17:16:53.527

采用：

```
$updated_timestamp = strtotime(date("d/m/y", $_REQUEST['_timestamp'])." $hour_created:$minute_created"); 
```

如果这不起作用，您的服务器可能需要反向日期顺序（美国）：

```
$updated_timestamp = strtotime(date("m/d/y", $_REQUEST['_timestamp'])." $hour_created:$minute_created"); 
```

如果要替换小时和分钟并留下日期。

**编辑：**对不起，我的错误，现在修正。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T10:15:49.237

在同事的帮助下，我最终做到了：

```
$day_value = 60 * 60 * 24;
$offset    = intval($_REQUEST['_offset']) * 60;

// Article creation date
$time_created = ($_REQUEST['hour_created'] * 60 * 60) + ($_REQUEST['minute_created'] * 60);
$date_created = substr($_REQUEST['_timestamp'], 0, -3) - $offset;
$date_created = floor($date_created / $day_value) * $day_value + $time_created + $offset; 
```

偏移量是 javascript 函数`new Date().getTimezoneOffset();` 的结果：时间戳是`$.datepicker({altFormat: '@'});`

# objective-c - 自动释放，没有到位池 - 只是泄漏

> ID：11333019
> 
> 赞同：0
> 
> 时间：2012-07-04T16:56:24.067
> 
> 标签：objective-c, ios, xcode, autorelease

我目前收到错误：

```
2000-01-03 06:51:27.-641 mytestapp[470:5c03
] *** __NSAutoreleaseNoPool(): Object 0x15a5a0 
of class __NSArrayM >autoreleased with no pool in place - just leaking 
```

从对其他 stackoverflow 链接的调查来看，当人们没有在线程选择器之前创建自动释放池并在之后将其排出时，似乎会发生此问题。

但是，我试图适应这一点，但仍然很难过。我在[pastebin](http://pastebin.com/91Y9GLwu)上有代码。如果有人可以提供帮助，将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T00:12:16.840

“在线程选择器之前创建一个自动释放池并在之后将其排出”什么？你在哪里听过这个？

你一定是理解错了。您不会在原始线程上放置一个自动释放池——那是没用的。您应该将它放在新线程中，围绕将在线程中执行的所有代码。在您的情况下，这意味着在块内部 - 在块体的开头创建它，并在块体的末尾排出它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T17:04:29.147

您需要在 main.m 中放置一个自动释放池，否则任何尝试接收自动释放消息的对象都将“只是泄漏”而没有适当的池。不幸的是，该可变数组可能是一个框架对象，因此您的池无法修复它。

# sitecore - sitecore，安装包并发布标准值/模板更改

> ID：11333020
> 
> 赞同：0
> 
> 时间：2012-07-04T16:56:24.377
> 
> 标签：sitecore, sitecore6

我正在尝试将一些具有标准值的模板更改作为不同环境中包的一部分发布。安装并发布后，更改不会显示。我已经重置了 IIS 并手动清除了缓存以确保也是如此。我基本上必须手动向模板添加一个新字段，然后对其应用标准值才能显示出来。对如何安装/发布此类更改有限制吗？也许我需要遵循一些顺序，例如安装模板，然后应用标准值？无论如何，我意识到没有大量的信息，也许我们的 sitecore 实现是问题所在，但我一直在努力解决这个问题已经足够长的时间了，值得在这里试一试。

谢谢，罗伯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T05:18:04.227

我将假设 techphoria 问题的答案是肯定的。这是下一步：

您确定要编辑相同的模板吗？即，您是否检查过这些项目的 Sitecore ID 是否相同？并且 __Standard Values 项目 ID 在两个环境中也相同？过去，我使用包安装程序无意中在单个模板上创建了两个 __Standard Values 项。

进一步的问题：您是否更改了任何字段共享/版本化标志？如果是这样，使用包来移动这些模板更改存在一个已知问题。简而言之，它不起作用......我相信这个错误已修复，但肯定存在于 6.2 中，甚至可能存在于 6.3.1 中。

更多问题......你所说的“应用标准值”是什么意思？听起来您正在更新的模板应该已经有一个 __Standard Values 项目？那么究竟有哪些变化没有出现呢？您根本没有看到新领域吗？您没有看到标准值中的新字段吗？或者您没有在使用模板的项目中看到新的标准值？您确定有问题的目标项目以前没有在字段中保存过值吗？一旦发生这种情况，除非您手动重置它，否则它将不会获得标准值......即使您将值清空。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T22:43:27.940

除了新字段和标准值之外，您的包是否包含模板本身？如果您最近添加了 __Standard 值项，则模板本身也会更新，并引用其标准值。

# android - 为平板电脑设计应用程序以支持不同的屏幕尺寸。

> ID：11333022
> 
> 赞同：1
> 
> 时间：2012-07-04T16:56:29.970
> 
> 标签：android, android-layout, android-screen-support

我正在为 android 平板电脑开发企业应用程序，并且我将方向限制为横向。由于不同平板设备的屏幕尺寸不同（7" 或 10"），设计布局以支持所有平板设备的最佳实践是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T17:03:35.023

使用相同的布局但不同的尺寸。例子：

```
res/values-sw600dp/dimensions.xml   // For 7” tablets (600dp wide and bigger)
res/values-sw720dp/dimensions.xml   // For 10” tablets (720dp wide and bigger) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-04T17:05:35.807

这部分文档与您的要求非常相关：http: [//developer.android.com/guide/practices/screens_support.html#DeclaringTabletLayouts](http://developer.android.com/guide/practices/screens_support.html#DeclaringTabletLayouts)

关键思想是为不同的屏幕配置加载不同的布局文件。

还要确保不要使用 AbsoluteLayout，因为它在调整大小时存在问题。

通过 dpi 而不是像素定义指标。当屏幕尺寸变大时，它有助于避免丢失分辨率。

除此之外，所有重要的事情都在文档中。

# javascript - 我不能在 javascript 生成的输入文本框中使用退格键

> ID：11333024
> 
> 赞同：0
> 
> 时间：2012-07-04T16:56:31.787
> 
> 标签：javascript, html, forms, input

我制作了一个 javascript 生成的表单，可以生成按钮和 1 `input type='text`。但是，为了删除您输入的内容，您需要突出显示文本并在其上输入，而不是简单的 BACKSPACE 键。这是我的一些代码：

```
var imTime=document.createElement('button');
var imDaTime=document.createElement('input');
imTime.setAttribute('onclick','xSetDaTime();');
imDaTime.setAttribute('type','text');
imDaTime.setAttribute('id','daT');
imTime.innerHTML='Set time (in seconds) : ';
document.body.insertBefore(imDaTime,document.body.firstChild);
document.body.insertBefore(imTime,document.body.firstChild);
function xSetDaTime() {
    lingDRILL.startTime=(new Date()).getTime()-((document.getElementById('daT').value)*1000);
}
window.scrollTo(0, 0); 
```

一切正常，除了退格/删除键。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T17:14:46.973

没关系，我发现它为什么不起作用。该脚本应该用于注入网站以使其更加用户友好。然而，事实证明，他们关闭了使用退格的功能。我改用了不同的输入。

# wpf - How to access a control from a ContextMenu menuitem via the visual tree?

> ID：11333028
> 
> 赞同：5
> 
> 时间：2012-07-04T16:56:47.780
> 
> 标签：wpf, xaml, binding, contextmenu, relativesource

This seems to be a pretty popular topic, but...

I have the following XAML:

```
<internal:MyCommandObject x:Name="CommandModel"/>

<Button DockPanel.Dock="Bottom" Command="{Binding DoAction, ElementName=CommandModel}">
    <Button.ContextMenu>
        <ContextMenu DataContext="{Binding PlacementTarget, RelativeSource={RelativeSource Self}}">
            <MenuItem Command="{Binding DoAction, ElementName=CommandModel}"/>
        </ContextMenu>
    </Button.ContextMenu>
    Click Me
</Button> 
```

Now, `MyCommandObject` is a control which exposes dynamic commands from its `DataContext`. You know what's coming next. :)

Basically, the button command works perfectly - when I click it, the `DoAction` command on the `MyCommandObject` gets executed perfectly. However, the command in the menuitem doesn't get executed. I've tried various tricks such as setting the context menu `datacontext` to be the `placementTarget` so it can traverse the visual tree of the controls and so on, but nothing's doing.

What particular alignment of `RelativeSource` and `CommandTarget` runes do I need to get this to work?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T06:45:00.800

This is happening because `DataContext="{Binding PlacementTarget,...` binding would set the button as MenuItems `DataContext` but that won't add the `ContextMenu` to the VisualTree of your window and that's why `ElementName` binding's won't work. A simple workaround to use `ElementName` bindings is to add this in your Window/UserControl's code-behind:

```
NameScope.SetNameScope(contextMenuName, NameScope.GetNameScope(this)); 
```

Another solution is to do this -

```
<ContextMenu DataContext="{Binding PlacementTarget, RelativeSource={RelativeSource Self}}">   
    <MenuItem Command="{Binding DataContext.DoAction}"/>   
</ContextMenu> 
```

`DataContext="{Binding PlacementTarget,...` will set the Button(Placementtarget) as the DataContext of your ContextMenu, so you can use Button's DataContext to bind command.

**Update:**

You can try and use the [`NameScope.NameScope` Attached Property](http://msdn.microsoft.com/en-us/library/ms601183.aspx) to set NameScope in XAML but I am not sure how you will get the NameScope of parent window without code!

You will have to do something similar to following article by Josh Smith, he provides a way to do this in XAML; but that too involves code (more then that single line of code) -

[Enable ElementName Bindings with ElementSpy](http://joshsmithonwpf.wordpress.com/2008/07/22/enable-elementname-bindings-with-elementspy/)

Any specific reason to not use this single line of code?

# oracle - 如何从 R 连接到 Oracle 11g，ODBC 不起作用...（我有 uid、sid、host、pwd）

> ID：11333033
> 
> 赞同：0
> 
> 时间：2012-07-04T16:57:42.517
> 
> 标签：oracle, r

我正在使用 Oracle SQL 开发人员做一些工作：将数据提取到 CSV 文件，然后分析 R 中的数据。我想自动化这个，使用 R 进行查询和分析。我使用 R 连接到其他数据库：SQL server、MySQL、Postgres，但我发现将它连接到 Oracle 有很多复杂性。

所以，我想在 Windows 中从 R 连接到 Oracle 11g 数据库。我尝试了 RODBC，但首先我必须按照以下说明设置 ODBC：

[如何在 R 中连接到 Oracle 数据库？](https://stackoverflow.com/questions/5479795/how-do-i-connect-to-an-oracle-database-in-r)

DBA 给我以下信息：用户 ID、密码、主机、端口和 SID

在“Oracle ODBC 驱动程序配置”窗口中，我编写以下内容：

```
Data Source Name: SID
Description: Oracle ODBC
TNS Service Name: host:port/SID
UserID: UserId 
```

但我收到此错误：

```
 Unable to connect
    SQLState = S1000
    [Oracle]{ODBC][Ora]ORA-12514: TSN:listener does not currently know of service   
    requested in connect descriptor 
```

所以，我的问题是：如何从 R 连接到 Oracle？还有其他方法吗？我做错了什么？

提前致谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T13:37:01.993

我在工作中经常使用 RODBC 连接到 Oracle。使用 Windows，我在从 R 中连接之前设置了与 DB 的 ODBC 连接。这允许您首先检查您的连接。

一切就绪后，我使用如下命令连接：

```
ch <- odbcConnect("SAVED_ODBC_NAME_HERE", "USER", "PWD") 
```

这将创建一个到 Oracle 数据库的通道。

希望有帮助

# html - 将图像大小调整为框架的高度

> ID：11333034
> 
> 赞同：0
> 
> 时间：2012-07-04T16:57:55.407
> 
> 标签：html

我正在创建一个底部有一个框架的网站，比如说 10% 的屏幕。我想在那个框架的左边放一个标志，到目前为止一切都很好，但是。

我希望你记住框架是所有屏幕的百分比，然后我想调整徽标图像的大小以适应框架的高度，无论屏幕有多大或多小（以及框架）。

我只花了 4 个小时搜索和测试，但没有成功:(

这可能吗？如何 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T17:05:15.910

添加这些样式。

```
 #yourframe{width:10%; height:20%;}//Your frame
   #yourimage{width:100%; height:100%;}//Your Image 
```

# google-app-engine - 什么属性 str 或 int 将在 Google App Engine（包括索引）中占据较少的位置

> ID：11333036
> 
> 赞同：0
> 
> 时间：2012-07-04T16:58:02.560
> 
> 标签：google-app-engine, google-cloud-datastore

我想以列表的形式构建具有属性的模型。

```
class Data(db.Model):
    listOfIntergers = db.ListProperty(int)
    listOfStrings = db.ListProperty(str) 
```

在这两个列表中，我都希望将值列表保留在 <0, 255> 范围内。

什么**属性类型会占用更少的空间**，包括数据存储中的索引 listOfIntergers 或 listOfStrings？

考虑 str 可以是字符或编码的十六进制值，即 0 = 0, 255 = ff。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T21:33:11.980

当心！首先，整数使用可变长度编码进行编码，因此并非所有 int64 值都占用 8 个字节——小的值占用 1-2 个字节。但是，列表属性的表示会重复列表中每个值的属性名称。我使用 NDB 重写了您的示例（因为用于从中获取编码的 protobuf 的 API 更容易记住）并发现以下内容：

```
>>> from ndb import *
>>> class Data(Model):
...   listOfIntegers = IntegerProperty(repeated=True)
...   listOfStrings = StringProperty(repeated=True)
... 
>>> len(Data()._to_pb().Encode())
20
>>> len(Data(listOfIntegers=[0]*100)._to_pb().Encode())
2420
>>> len(Data(listOfIntegers=[255]*100)._to_pb().Encode())
2520
>>> len(Data(listOfStrings=['\x00']*100)._to_pb().Encode())
2420 
```

但请注意其欺骗性：100 个值为 0 的整数每个值占用 24 个字节（其中大部分是属性名称“listOfIntegers”），但 100 个值为 255 的整数每个值占用 25 个字节！这就是适合您的可变长度编码。100 个字符串值 '\x00' 每个值也占用 24 个字节——但请注意，'listOfStrings' 比 'listOfIntegers' 短一个字符，因此 1 字节字符串占用的字节数比整数 0 多 1 个字节，数量相同空间为整数 255。

除非您确实需要对该字段进行索引，否则正确的解决方案可能是声明一个 BlobProperty（不是列表/重复属性）并存储由所需字节数组成的单个字符串。

```
>>> class Data(Model):
...  b = BlobProperty()
... 
>>> d = Data(b=''.join(map(chr, range(100))))
>>> len(d._to_pb().Encode())
133
>>> 
```

对于相同数量的信息，这几乎是紧凑的 20 倍！（诚​​然，您可以通过使用更短的属性名称来降低列表属性版本，但它仍然会更长。）

# php - if else 语句未按预期工作

> ID：11333037
> 
> 赞同：0
> 
> 时间：2012-07-04T16:58:02.563
> 
> 标签：php, if-statement

我试图过滤各种自行车女士、男士、儿童。我写了一个函数，将我们的一串数字排序为所选类型的自行车。

```
function: bicycle($stringnumbers, $sortbicycle) 
```

脚本：

```
 function bicycle($stringnumbers, $sortbicycle){
    $bicycle = explode(',', $bicyclenumbers);
    foreach($bicycle as $bicycle1)
    {
       $sql2 = "SELECT * FROM `bicycle` WHERE `bicyclenumber` LIKE '".$bicycle1."' LIMIT 0, 30 ";
       $number = mysql_query($sql2)or die(mysql_error());
       while ($bicycleinfo = mysql_fetch_array($number)) 
       {
          $number1 = $bicycleinfo['sortbicycle'];
          if($sortbicycle == "kid") 
          {
             if($number1 == "boy")
             {
                $totaal .= "J " . $bicycle1 . ",";
             }
             elseif($number1 == "girl")
             {
                $totaal .= "M " . $bicycle1 . ",";
             }      
          }
          elseif($sortbicycle == "kids") 
          {
             if ($number1 == "boy")
             {
                $totaal .= $bicycle1 . ",";
             }
             elseif($number1 == "girl")
             {
                $totaal .= $bicycle1 . ",";
             }      
          }
          elseif($number1 == $sortbicycle)
          {
             $totaal .= $bicycle1 . ",";
          }
       }
    }

    if($totaal > "1")
    {
       $amount1 = $total;
    }
    else
    {
       $amount1 = ""; 
    }

 return $amount1;   
 } 
```

但由于某种原因，这部分：

```
 if ($number1 == "boy")
    {
       $totaal .= "J " . $bicycle1 . ",";
    }
    elseif ($number1 == "girl")
    {
       $totaal .= "M " . $bicycle1 . ",";
    }               
 }
 elseif ($sortbicycle == "kids") 
 {
    if ($number1 == "boy")
    {
       $totaal .= $bicycle1 . ",";
    }
    elseif ($number1 == "girl")
    {
       $totaal .= $bicycle1 . ",";
    }           
 } 
```

没有按应有的方式工作，第一部分“孩子”部分有效，但是当我删除

```
$totaal .= "J " . $bicycle1 . ","; 
```

至

```
$totaal .= $bicycle1 . ","; 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T18:00:17.803

我也注意到了这一点：

```
function bicycle($stringnumbers, $sortbicycle){
$bicycle = explode(',', $bicyclenumbers); 
```

在您的函数中，输入是 $stringnumbers 但您不在代码中的任何地方使用它。相反，您使用 $bicylenumbers，不应该是 $stringnumbers 吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T17:04:41.377

一个观察结果是，您同时引用了`$totaal`and `$total`，并且您返回`$amount1`的结果绝不会受到 的影响`$totaal`。除非`$totaal`是全局变量，否则不会使用。

# delphi - Chau Chee Yang 的 dbExpress 和 XE2 Enterprise dbExpress for Firebird 的兼容性如何？

> ID：11333038
> 
> 赞同：5
> 
> 时间：2012-07-04T16:58:05.607
> 
> 标签：delphi, delphi-2010, firebird, dbexpress

我使用的是 Delphi 2010 Professional，它没有附带用于 Firebird 的 dbExpress 驱动程序。[如果我开始使用Chau Chee Yang 编写](https://sites.google.com/site/dbxfirebird/)的 Firebird dbExpress 驱动程序，然后升级到 XE？企业版（Firebird dbExpress 驱动程序附带）代码可以正常工作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T08:04:17.677

它在 34 版本变更日志中列出了对 delphi XE2 的支持

> “支持德尔福XE2”

所以它应该也可以工作，你可以在 dbxfirebird 组上询问更多信息[https://groups.google.com/forum/?fromgroups#!forum/dbxfirebird](https://groups.google.com/forum/?fromgroups#!forum/dbxfirebird)

# sql-server - TSQL - 具有复合键的 MERGE 语句

> ID：11333041
> 
> 赞同：11
> 
> 时间：2012-07-04T16:58:27.713
> 
> 标签：sql-server, tsql, sql-server-2012

我有相同结构的表 OrderLines(OrderID int, LineIndex int, ) 和表值参数，为一个订单定义了新的订单行。

所以如果我有以下 OrderLines

```
1000   1   bread
1000   2   milk
1001   1   oil
1001   2   yogurt
1002   1   beef
1002   2   pork 
```

和下面的TVP

```
1001   1   yogurt 
```

我想获得以下 OrderLines

```
1000   1   bread
1000   2   milk
1001   1   yogurt
1002   1   beef
1002   2   pork 
```

即只为一个订单触摸行。

所以我这样写了我的查询

```
MERGE
    [OrderLines] AS [Target]
USING
(
    SELECT
        [OrderID], [LineIndex], [Data]
    FROM
        @OrderLines
)
AS [Source] ([OrderID], [LineIndex], [Data])
ON ([Target].[OrderID] = [Source].[OrderID]) AND ([Target].[LineIndex] = [Source].[LineIndex])
WHEN MATCHED THEN
    UPDATE
    SET
        [Target].[Data] = [Source].[Data]
WHEN NOT MATCHED BY TARGET THEN
    INSERT
        ([OrderID], [LineIndex], [Data])
    VALUES
        ([Source].[OrderID], [Source].[LineIndex], [Source].[Data])
WHEN NOT MATCHED BY SOURCE THEN
    DELETE; 
```

它会删除其他订单的所有其他（未提及）OrderLines。

我试过了

```
WHEN NOT MATCHED BY SOURCE AND ([Target].[OrderID] = [Source].[OrderID]) THEN 
```

但出现语法错误。

我应该如何重写我的查询？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-05T07:08:50.350

只需使用的相关子集`OrderLines`作为目标：

```
**WITH AffectedOrderLines AS (
    SELECT *
    FROM OrderLines
    WHERE OrderID IN (SELECT OrderID FROM @OrderLines)
)**
MERGE
    **AffectedOrderLines** AS [Target]
USING
(
    SELECT
        [OrderID], [LineIndex], [Data]
    FROM
        @OrderLines
)
AS [Source] ([OrderID], [LineIndex], [Data])
ON ([Target].[OrderID] = [Source].[OrderID]) AND ([Target].[LineIndex] = [Source].[LineIndex])
WHEN MATCHED THEN
    UPDATE
    SET
        [Target].[Data] = [Source].[Data]
WHEN NOT MATCHED BY TARGET THEN
    INSERT
        ([OrderID], [LineIndex], [Data])
    VALUES
        ([Source].[OrderID], [Source].[LineIndex], [Source].[Data])
WHEN NOT MATCHED BY SOURCE THEN
    DELETE; 
```

这是一个要测试[的 SQL Fiddle 。](http://www.sqlfiddle.com/#!18/60609/19)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T17:36:46.910

对于初学者，只能在`WHEN NOT MATCHED BY SOURCE`附加合并条件中使用目标表中的列（它在[MSDN](http://technet.microsoft.com/en-us/library/bb510625.aspx)上）。

而且我认为您丢失目标表中的所有额外条目是正常的，因为它们与源中的任何内容都不匹配。

`WHEN NOT MATCHED BY SOURCE`您应该通过首先删除子句然后分别删除额外/不需要的行来重写您的查询。

然后，您需要通过添加以下内容来获取在目标表中更新或插入的所有条目：

```
DECLARE @OutputTable table( OrderId INT, OrderLine INT);

...Your entire MERGE
WHEN NOT MATCHED BY TARGET THEN
    INSERT
        ([OrderID], [LineIndex], [Data])
    VALUES
        ([Source].[OrderID], [Source].[LineIndex], [Source].[Data])
OUTPUT INSERTED.OrderId, INSERTED.LineIndex INTO @OutputTable 
```

现在，`@OutputTable`您拥有所有已更新或输入到目标表中的键（注意`OUTPUT`子句）。

您现在只需要查看目标表中的哪些行（仅与 中的键匹配）`@OrderLines`不在`@OutputTable' and delete them (so they haven't been updated nor inserted by the`MERGE` 语句中）：

```
DELETE A
FROM [OrderLines] AS A
INNER JOIN @OrderLines AS B
 ON B.OrderId = A.OrderId AND B.LineIndex = A.LineIndex
LEFT OUTER JOIN @OutputTable AS C
 ON C.OrderId = A.OrderId AND C.OrderLine = A.LineIndex
WHERE C.OrderId IS NULL AND C.OrderLine IS NULL 
```

您在这里所做的（认为是正确的）实际上是您首先要删除的内容。内连接将结果集过滤为`@OrderLines`（因此只有具有这些键的行），左连接与 where 子句一起进行反半连接，以获取目标表中不受`MERGE`语句影响的行（插入或更新）**但仍有**源表 ( `@OrderLines`) 中的键。

应该是对的......在你测试后告诉我。

如果您决定采用这种方法，您可能希望将所有这些 ( `MERGE`+ ) 包装在事务中。`DELETE`

# wpf - WPF ParallelTimeline 的 WinRT 等效项是什么？

> ID：11333045
> 
> 赞同：0
> 
> 时间：2012-07-04T16:58:54.590
> 
> 标签：wpf, windows-runtime, winrt-xaml

我正在将一些 WPF 代码移植到 WinRT。该代码使用 System.Windows.Media.Animation.ParallelTimeline 来同步两个动画。我没有看到相应的 Windows.UI.Xaml.Media.Animation.ParallelTimeline 类和 Ctrl + 。什么也没找到。有谁知道如何在 WinRT 中实现类似的结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T07:24:33.823

如果我的评论回答了您的问题 - 那么答案是将这两个动画添加到情节提要中。

# php - PHP如何使用标点符号验证数字

> ID：11333055
> 
> 赞同：0
> 
> 时间：2012-07-04T16:59:45.870
> 
> 标签：php, preg-match

我想验证电话号码输入。电话号码应该是数字和一些标点符号的组合，例如 -,+ ,( 和 )。

输入没有特定的格式，可以是

*   014-455464564
*   +6054-4554
*   (+60)-4554

我怎样才能在 preg_match 中做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T17:12:00.107

我猜这个是根据你的例子工作的。

```
$pattern = '/^[0-9_\-\+\(\)\ ]+$/';

    $val = '014-455464564';
    if (preg_match($pattern, $val))
        echo $val.' TRUE<br />';
    else
        echo $val.' FALSE<br />';

    $val = '+6054-4554';
    if (preg_match($pattern, $val))
        echo $val.' TRUE<br />';
    else
        echo $val.' FALSE<br />';

    $val = '(+60)-4554';
    if (preg_match($pattern, $val))
        echo $val.' TRUE<br />';
    else
        echo $val.' FALSE<br />';

    $val = '(+60)-4554-sss';
    if (preg_match($pattern, $val))
        echo $val.' TRUE<br />';
    else
        echo $val.' FALSE<br />';

    $val = '(+60)-4 554';
    if (preg_match($pattern, $val))
        echo $val.' TRUE<br />';
    else
        echo $val.' FALSE<br />'; 
```

您也可能需要检查[http://regexlib.com](http://regexlib.com)

# haskell - 为什么在 Haskell 中显式推导 Show/Read？

> ID：11333060
> 
> 赞同：3
> 
> 时间：2012-07-04T17:00:06.540
> 
> 标签：haskell, derived-types

我们不能为每种类型都做`read someValue :: someDataType`or ，因为必须写在声明中。除了错误之外，是否存在我们不希望我们的类型可序列化的情况？为什么 Show 与 Read 分开？有没有一种情况，除了错误，我们只想显示一些数据而不读取它？如果没有，为什么没有单一的数据类型？`show someValue``deriving (Show, Read)``data``Serializable`

刚才，我正在使用[Gloss 库](http://hackage.haskell.org/packages/archive/gloss/1.7.4.1/doc/html/Graphics-Gloss-Interface-Pure-Game.html#t%3aKey)[的`Key`](http://hackage.haskell.org/packages/archive/gloss/1.7.4.1/doc/html/Graphics-Gloss-Interface-Pure-Game.html#t%3aKey)数据类型，它派生`Show`而不是`Read`，我不明白。很遗憾，因为我想把控件的配置放在一个文件中然后读取它，这样玩家就可以更改控件并拥有自己的配置。我必须为 Key、SpecialKey 和 MouseButton 做包装，这没什么大不了的，但没用。

```
data Key' = Char' Char | SpecialKey' SpecialKey | MouseButton' MouseButton
    deriving (Eq, Ord, Show, Read)
convertKey x = case x of
    Char' c -> Char c
    SpecialKey' sk -> SpecialKey sk
    MouseButton' mb -> MouseButton mb 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-04T17:39:14.077

首先，不是所有的数据类型都可以显示，例如不能显示函数，所以不是所有的数据类型都可以显示（也不能读取）。最初的 Haskell 定义规定，如果没有给出派生子句，那么将派生尽可能多的派生类。这使得很难知道实际派生了哪些类，因此更改了 Haskell 定义以强制显式派生子句。

其次，在最初的 Haskell 定义中，`show`和`read`函数在`Text`类中捆绑在一起。`Show`当您导出and时这不是什么大问题`Read`，但是当您手动编写它们时会很痛苦。你经常想定义一个特殊的`show`函数，但现在你不得不写一个`read`函数，所以最好把它们分开。就我个人而言，我几乎总是派生出`Show`，但几乎从来没有`Read`。

和`Show`类`Read`并不是真的用于序列化，而是用于简单的输入和输出。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-07-04T17:29:47.717

**为什么显示与阅读分开**

我不知道这最初是为什么，但觉得它应该持续存在，因为可以显示一些（很少）类型，或者显示占位符字符串，但不能读回。函数是典型的例子。

另一种思考方式：将事物放在单独的类中很容易，但很难在一个类中处理在相同上下文中并不总是有意义的太多函数。许多人认为`Num`课堂是这个问题的一个典型例子。

**我如何`read`键入和其他类型不在`Read`**

第一步：发送一个补丁添加`Read`到派生实例集。第二步：通过使用独立派生来解决：

```
{-# LANGUAGE StandaloneDeriving #-}
deriving instance Show Key 
```

第三步：使用 CPP 使您的代码与任一版本的代码库一起工作，无论是 Ben 将在某一天发布的带有 Read 实例的 Gloss 库，还是没有的版本。

**为什么没有`Serializable`课？**

对于初学者，有[一个 Serialize 类](http://hackage.haskell.org/packages/archive/cereal/0.3.5.2/doc/html/Data-Serialize.html)。此外，文本是序列化事物的一种可怕方式。也许您想要一个更惰性的序列化类，在这种情况下您应该看到[Binary 类](http://hackage.haskell.org/packages/archive/binary/0.5.1.0/doc/html/Data-Binary.html)。如果您关心性能，那么您可能会喜欢[blaze-builder](http://hackage.haskell.org/package/blaze-builder)，尽管老实说我从未使用过它。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-07-04T17:56:00.903

并非每种类型都是可序列化的。如何在 和 之间建立同`String -> String`构`String`？如果你给我`Read`和`Show`实例`String -> String`，我可以找到一个不可序列化的函数，如下所示：

```
evil :: String -> String
evil s = map succ (read s s ++ " evil") 
```

认为

```
read (show evil) = evil 
```

我们得到

```
evil (show evil)
  = map succ (read (show evil) (show evil) ++ " evil")
  = map succ (evil (show evil) ++ " evil")
  = map succ (evil (show evil)) ++ "!fwjm" 
```

所以如果`evil (show evil)`定义了，那么它的第一个字符`c`满足`c = succ c`，这是不可能的。

一般来说，函数不能被序列化。有时，我们编写打包函数的数据类型，因此也不是每个数据类型都是可序列化的。例如，

```
data Psychiatrist
  = Listen (String -> Psychiatrist)
  | Charge Int 
```

有时，即使对于这些类型，您可能会选择提供`Read`（缺少某些情况）和`Show`（例如，使用占位符或函数列表）的部分实现，但是没有规范的方法来选择它们或您期望两者的原因.

正如其他人所提到的，严重的序列化是`Serialize`. 我倾向于使用`Show`和`Read`用于诊断目的，尤其是在 ghci 中进行尝试。为此目的，`Show`它更有用，因为 ghci 有一个*Haskell*解析器来进行读取。

# python - python有没有类似Java的JPS的工具

> ID：11333061
> 
> 赞同：2
> 
> 时间：2012-07-04T17:00:36.030
> 
> 标签：python, process

Python 是否有一个工具来列出类似于 Java 的 jps (http://docs.oracle.com/javase/6/docs/technotes/tools/share/jps.html) 的 python 进程？

**编辑：**

获取 python 进程的 pid 相对容易（ps -A | grep python）。我真正在寻找的是一种查询当前正在运行的 python 进程并找出它最初执行的 python 文件的方法。

从 JPS 文档中，“jps 将列出每个 Java 应用程序的 lvmid，后跟应用程序的类名或 jar 文件名的缩写形式。” 基本上，有没有一种简单的方法可以查询一堆 python 进程并找出 JPS 对 JVM 的有用信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T17:10:18.687

不，每个 Python 脚本都有自己独立的解释器，因此没有方便的方法列出所有 Python 进程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T17:39:30.043

要列出所有正在运行的`'python'`进程，您可以使用[`psutil`](http://code.google.com/p/psutil/)模块：

```
import psutil

lst = [p for p in psutil.process_iter() if p.name == 'python'] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-14T12:40:25.527

我发现获取所需信息的最佳方法是使用`ps -x`，它提供了所有正在运行的进程的原始命令行参数。

# joomla - Joomla 2.5 - 自定义注册字段不记得值

> ID：11333068
> 
> 赞同：0
> 
> 时间：2012-07-04T17:01:16.547
> 
> 标签：joomla, joomla2.5

[我使用在http://library.logicsistemi.it/images/joomla/plg_user_testprofile.zip](http://library.logicsistemi.it/images/joomla/plg_user_testprofile.zip)找到的自定义配置文件插件

我创建了几个字段，可选的和必需的，它们都有效。但是有一个小问题。

当我在该自定义字段中输入一些值并提交表单时，可能会发生某些字段未通过验证（这很好）。但是输入的值被清除，我必须从一开始就填写所有字段。

*   演示：http: [//goo.gl/eH1G2](http://goo.gl/eH1G2)
*   在名为“用户注册”的“图例”下输入一些（不是全部）数据
*   在名为 Company 的“图例”下输入一些（不是全部）数据
*   资讯
*   按注册按钮
*   将弹出错误消息。-
*   在用户注册中输入的数据将被保存
*   在公司信息（自定义字段）中输入的数据将不会被保存。
*   如果输入了所有必填字段，表单将向数据库提交数据（没关系）。

我希望保存公司信息中的数据，这样用户就不必重新输入。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T08:05:41.690

您演示中的问题出在您使用的模板上。

由于某种原因，它给出了 Javascript 错误。这些错误会阻止 Javascript 客户端验证，并且您的表单提交时包含无效数据。

如果您只需要服务器端验证，您可以通过从用户状态加载发布的信息来修改插件中的 onContentPrepareData 函数。为此，当“合并配置文件数据”下未设置 user_id 时，您必须执行不同的操作。评论。

我想下周我会在[http://library.logicsistemi.it](http://library.logicsistemi.it)上写一篇新教程来解释这一点。现在尝试修复您的 Javascript 代码。

问候

# maven - 一个已经创建的 maven 项目：在哪里可以找到它的 artifactId 和 groupId

> ID：11333069
> 
> 赞同：0
> 
> 时间：2012-07-04T17:01:17.637
> 
> 标签：maven, m2eclipse

我有一个现成的 maven 项目，我想知道它的 artifactId 和 groupId 你知道怎么做吗？

提前谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T17:48:30.360

它位于项目根目录的 pom.xml 中，靠近文件顶部：

```
<modelVersion>4.0.0</modelVersion>
<groupId>HERE</groupId>
<artifactId>AND HERE</artifactId>
<packaging>war</packaging>
<version>1.0</version> 
```

# android - “IsoDep.get(tag)”在调试时返回 null

> ID：11333074
> 
> 赞同：3
> 
> 时间：2012-07-04T17:01:53.407
> 
> 标签：android, mobile, nfc

谁能告诉我这个功能背后的“科学”

```
 `IsoDep.get(tag)` 
```

因为它返回**null**甚至标签被正确读取。我在 Eclipse 中运行 android 应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T10:30:38.353

执行以下程序。

1) 获取 NFC 技术标签，即使用 tag.getTechList() 方法并不难找到。

2）假设设备仅支持一种技术标签，如 NfcF

3）然后使用 android 类的 NfcF 如下所示

```
 NfcF mifare = NfcF.get(tag);
        try {
            mifare.connect();
            if(mifare.isConnected()){
                byte[] historicalData=mifare.getManufacturer();
                return new String(historicalData, Charset.forName("US-ASCII"));
            }

        } catch (IOException e) {
            Log.e("Deepak", "IOException while writing MifareUltralight message...", e);
        } 
```

希望它会帮助你。:)

享受编码...

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-05T00:56:48.323

如果您查看[文档](http://developer.android.com/reference/android/nfc/tech/IsoDep.html#get%28android.nfc.Tag%29)：

*   如果在 getTechList() 中未枚举 IsoDep，则返回 null。这表明标签不支持 ISO-DEP。

您正在读取的 NFC 标签似乎不支持 IsoDep。

要找出支持的内容，请使用此方法。

```
private static String debugTag(Tag tag)
{
    String str = "=== DEBUG TAG ===";
    for (String techListItem : tag.getTechList())
    {
        str += "\n" + techListItem;
    }

    return str;
} 
```

# sql - SQL 仅从 varchar 中获取数值

> ID：11333078
> 
> 赞同：16
> 
> 时间：2012-07-04T17:02:17.083
> 
> 标签：sql, sql-server, sql-server-2008, tsql

假设我有如下几个字段：

```
abd738927
jaksm234234
hfk342
ndma0834
jon99322 
```

类型：varchar。

如何仅从中获取数值来显示：

```
738927
234234
342
0834
99322 
```

尝试过子字符串，但是数据的长度不同，并且由于无法转换，演员也不起作用，有什么想法吗？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-07-04T17:11:33.133

这是 PATINDEX 的示例：

```
select SUBSTRING(fieldName, PATINDEX('%[0-9]%', fieldName), LEN(fieldName)) 
```

这假设 (1) 字段将有一个数字，(2) 数字全部组合在一起，并且 (3) 数字后面没有任何后续字符。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-04T18:06:37.967

仅提取数字（不使用 while 循环）并检查每个字符以查看它是否为数字并提取它

```
 Declare @s varchar(100),@result varchar(100)
    set @s='as4khd0939sdf78' 
    set @result=''

    select
        @result=@result+
                case when number like '[0-9]' then number else '' end from 
        (
             select substring(@s,number,1) as number from 
            (
                select number from master..spt_values 
                where type='p' and number between 1 and len(@s)
            ) as t
        ) as t 
    select @result as only_numbers 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-04T17:13:49.247

```
DECLARE @NonNumeric varchar(1000) = 'RGI000Testing1000'
DECLARE @Index int  
SET @Index = 0  
while 1=1  
begin  
    set @Index = patindex('%[^0-9]%',@NonNumeric)  
    if @Index <> 0  
    begin  
        SET @NonNumeric = replace(@NonNumeric,substring(@NonNumeric,@Index, 1), '')  
    end  
    else    
        break;   
end     
select @NonNumeric -- 0001000 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-04T17:09:50.983

我认为你想要 VBA 的`Val()`功能。很容易完成`IsNumeric()`

```
create function Val 
(
    @text nvarchar(40)
) 
returns float
as begin
    -- emulate vba's val() function
    declare @result float 
    declare @tmp varchar(40)

    set @tmp = @text
    while isnumeric(@tmp) = 0 and len(@tmp)>0 begin
        set @tmp=left(@tmp,len(@tmp)-1)
    end
    set @result = cast(@tmp as float)

    return @result
end 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-04-07T18:52:17.177

好吧，如果您不想创建函数，则可以这样：

```
cast(replace(replace(replace(replace(replace(replace(replace(replace(replace(replace(
replace(replace(replace(replace(replace(replace(replace(replace(replace(replace(
replace(replace(replace(replace(replace(replace(replace(replace(replace(YOUR_COLUMN
,'A',''),'B',''),'C',''),'D',''),'E',''),'F',''),'G',''),'H',''),'I',''),'J','')
,'K',''),'L',''),'M',''),'N',''),'O',''),'P',''),'Q',''),'R',''),'S',''),'T','')
,'U',''),'V',''),'W',''),'X',''),'Y',''),'Z',''),'$',''),',',''),' ','') as float) 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-12-20T12:13:16.490

[输入表](https://i.stack.imgur.com/LYEHe.png)

如果您在图像中有上述数据，请使用以下查询

```
select field_3 from table where PATINDEX('%[ ~`!@#$%^&*_()=+\|{};",<>/?a-z]%', field_3)=0 
```

结果将如下所示

[结果表](https://i.stack.imgur.com/DfFSP.png)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-07-05T11:03:29.607

```
select substring(
                'jaksm234234',
                patindex('%[0-9]%','jaksm234234'),
                LEN('jaksm234234')-patindex('%[0-9]%','jaksm234234')+2
                ) 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2018-03-17T14:47:49.980

仅从字符串中提取数字。返回一个包含所有数字的字符串。示例：this1is2one345long6789number 将返回 123456789

```
CREATE FUNCTION [dbo].[GetOnlyNumbers] (@Temp VARCHAR(1000)) 
```

`RETURNS VARCHAR (1000) AS BEGIN`

```
 DECLARE @KeepValues AS VARCHAR(50)
    SET @KeepValues = '%[^0-9]%'
    WHILE PATINDEX(@KeepValues, @Temp) > 0
        SET @Temp = STUFF(@Temp, PATINDEX(@KeepValues, @Temp), 1, '')

    RETURN @Temp
END 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-12-10T04:16:21.230

具有 patindex 的反向字符串的权利也适用于那些

```
SELECT [Column], 
  CAST(RIGHT([Column], PATINDEX('%[0-9][^0-9]%', REVERSE([Column])+' ')) AS INT) as [Num]
FROM (VALUES 
('abd738927'),
('jaksm234234'),
('hfk342'),
('ndma0834'),
('jon99322'),
) val([Column]) 
```

| 柱子 | 编号 |
| --- | --- |
| abd738927 | 738927 |
| jaksm234234 | 234234 |
| HFK342 | 342 |
| ndma0834 | 834 |
| 乔恩99322 | 99322 |

# jakarta-ee - EJB 是包级别、类级别还是方法级别的机制

> ID：11333095
> 
> 赞同：0
> 
> 时间：2012-07-04T17:04:01.593
> 
> 标签：jakarta-ee, architecture, ejb-3.0

当我在这里说“EJB”时，我指的是 EJB 3.x！

我是 EJB 的新手，想知道如何最好地将我的所有业务逻辑映射到不同的 bean。在一个极端情况下，您可以 KISS 并且只拥有一个单一的 EJB，它具有处理 100% 应用程序业务逻辑的无数方法。在另一个极端，您可以将业务逻辑划分到函数级别 ( `List<User> getUsersFromMars()`)，并拥有由 1 个包、1 个类和 1 个方法组成的无数 EJB：

```
Extreme #1:
    my-ejb.jar/
        com.me.myorg.MonolithicBean
            List<User> getUsersFromMars();
            List<User> getUsersFromVenus();
            //... a bazillion methods

Extreme #2:
    my-mars-ejb.jar/
        com.me.myorg.MarsBean
            List<User> getUsersFromMars();
    my-venus-ejb.jar/
        com.me.myorg.VenusBean
            List<User> getUsersFromVenus();
    //... a bazillion EJBs with 1-and-only-1 method each 
```

显然，我认为最佳实践规定了这两个极端之间的某种中间策略。所以我问，Java/Oracle 对将应用程序的业务逻辑分解为 bean 有什么看法，以及如何在正确的级别（EJB、包、类或方法）将它们模块化，以便可重用、可扩展和安全？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T17:36:50.073

我认为这个问题并不是真正针对 EJB，而是更多关于 OO 设计，甚至是通用设计。

一个经常出现的模式是您可以将业务逻辑拆分为 DAO 和服务。DAO 处理与单个（域）实体相关的所有操作，例如客户。它仅与数据源（通常是数据库）交互，并具有保存、更新、删除等方法，还有 getBySomething 方法。此类 DAO 通常可以有 1 到 15 种方法，具体取决于您的特定业务案例。

然后，根据经验，您的服务与多个实体交互和/或与其他系统（如 JMS 队列、邮件系统、Web 服务等）交互并执行验证/提供安全性。这些构成您的业务逻辑的动词，并且通常集中在特定的业务概念周围，例如购买。因此，您可以有一个假设的 PurchaseService，其方法包括 purchaseGood、purchaseOffer、calculateReduction。同样，这将有 1 到 15 或 20 种方法之间的任何地方。

# php - php shell exec wget不在后台运行

> ID：11333096
> 
> 赞同：4
> 
> 时间：2012-07-04T17:04:12.060
> 
> 标签：php, shell, exec, wget

我想按如下方式运行 wget

```
shell_exec('wget "'http://somedomain.com/somefile.mp4'"');
sleep(20);
continue my code... 
```

我想要的是让 PHP 等待 shell_exec wget 文件下载完成，然后再继续执行其余代码。我不想等待设定的秒数。

我该怎么做，因为当我运行 shell_exec wget 时，文件将开始下载并在后台运行，PHP 将继续。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T17:21:38.747

您的网址是否包含 & 字符？如果是这样，您的 wget 可能会进入后台，并且 shell_exec() 可能会立即返回。

例如，如果 $url 是“http://www.example.com/?foo=1&bar=2”，您需要确保在命令行中传递它时是单引号：

```
shell_exec("wget '$url'"); 
```

否则，shell 会误解 &。

一般来说，转义命令行参数是一个好主意。最全面的方法是使用 escapeshellarg()：

```
shell_exec("wget ".escapeshellarg($url)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T17:11:59.160

shell_exec 确实等待命令完成 - 所以你根本不需要 sleep 命令：

```
<?php
shell_exec("sleep 10");
?>

# time php c.php
   10.14s real     0.05s user     0.07s system 
```

我认为您的问题可能是这一行的引号：

```
shell_exec('wget "'http://somedomain.com/somefile.mp4'"'); 
```

它应该是

```
shell_exec("wget 'http://somedomain.com/somefile.mp4'"); 
```

# c# - Cake php 类似于 ASP.net Mvc 的 ACL

> ID：11333098
> 
> 赞同：0
> 
> 时间：2012-07-04T17:04:30.487
> 
> 标签：c#, asp.net-mvc, cakephp, acl

我正在寻找基于 ACL 的安全性。我发现 Cake php 的 ACL 非常适合我的项目。有谁知道 asp.net mvc 的任何类似框架。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T21:48:06.753

Cake PHP ACL 系统看起来相当强大。但是，我不知道 ASP.Net MVC 有开箱即用的分层系统。

控制对资源（例如控制器）的访问的标准方法是通过[Roll Based Security](http://msdn.microsoft.com/en-us/library/52kd59t0%28v=vs.90%29.aspx)。

您可以随时检查当前用户是否处于给定角色，例如

```
bool isInSomeRole = HttpContext.Current.User.IsInRole("SomeRole"); 
```

[AuthorizeAttribute](http://msdn.microsoft.com/en-us/library/system.web.mvc.authorizeattribute.aspx)简化了对控制器操作的此类检查：

```
[Authorize(Roles = "Customer")]
public ActionResult Index()
{
    ViewBag.Message = "Dashboard";

    return View();
} 
```

最后，如果你想彻底了解 MVC 安全性，这里有一篇必读的文章

[http://blogs.msdn.com/b/rickandy/archive/2012/03/23/securing-your-asp-net-mvc-4-app-and-the-new-allowanonymous-attribute.aspx](http://blogs.msdn.com/b/rickandy/archive/2012/03/23/securing-your-asp-net-mvc-4-app-and-the-new-allowanonymous-attribute.aspx)

# android - 我是否需要在 Android 中明确完成一个活动？

> ID：11333099
> 
> 赞同：1
> 
> 时间：2012-07-04T17:04:31.857
> 
> 标签：android, android-activity, activity-finish

当我开始一项新活动时，我需要明确完成当前活动还是 android 会处理这个？

这是我在活动 A 中为启动活动 B 所写的内容：

```
Intent intent = new Intent(this, BActivity.class);
startActivity(intent); 
```

我应该在上述两行之后调用下一行来结束 A 吗？

```
this.finish() 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-04T17:06:03.977

一般来说，不，你不应该。

不同之处在于，如果您在活动 A 中调用完成，当用户在活动 B 中时，如果他们按下后退按钮，他们将返回到他们在打开应用程序之前所做的任何事情。如果您不在活动 A 中调用完成，他们将返回活动 A

如果你**调用**完成：

```
Activity A -> Activity B -> [user press back] -> Homescreen (or whatever activity is on the stack below activity A) 
```

如果您**不**调用完成：

```
Activity A -> Activity B -> [user press back] -> Activity A 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T17:09:02.653

不，这不是强制性的。

```
finish() 
```

完成方法声明**“当您的活动完成并应该关闭时调用它。ActivityResult 会传播回通过 onActivityResult() 启动您的人。”**

参考链接>>[链接](http://developer.android.com/reference/android/app/Activity.html#finish%28%29)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-04T17:09:02.923

```
 explicitly finish the current activity or does android take care this ? 
```

这取决于您的要求，如果您想要活动 A 同时返回活动 B 仍然存在，因此您无需调用完成，但如果您在返回活动 B 时不想要活动 A，那么您应该调用完成 ....

# php - PDO 和 CodeIgniter - 安全吗？

> ID：11333102
> 
> 赞同：3
> 
> 时间：2012-07-04T17:04:46.267
> 
> 标签：php, mysql, database, codeigniter, pdo

我以前没有任何 PDO 经验，所以我的问题可能听起来太简单了。
我听说 PDO 在安全性方面比 mysql/mysqli 好几次，而且由于 Codeigniter 支持 PDO 驱动程序，我决定在我的新项目中进行更改。

但正如我所知，Codeingiter 不使用准备好的语句，并且（我认为）它错过了使用 PDO 的意义，这是正确的，并且它不安全吗？
所以我的问题是：使用带有codeigniter的PDO驱动程序被认为是不安全的吗？
而且，这是否意味着我必须自己照顾基本的安全？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T06:58:31.423

所有查询调用都在简化函数中转义`$this->db`，例如`delete()`和`get_where()`。这增加了一些自动化的安全性。

如果写得太草率，您可以授予用户访问权限以编辑其他用户的内容。因此，完全安全没有神奇的解决方案。您越详细，您的代码就越适合您。

如果您需要自定义查询，您可以这样做：

```
$int_user_id = 1;

$this->db->query("
SELECT *
FROM users
WHERE id = ?
", array($int_user_id)); 
```

**注意：**要实现`IN ()`and `LIKE`，您需要相应地转义，而不是通过`array()`and插入`?`。

[**查询（）**](http://codeigniter.com/user_guide/database/results.html)
[**转义（）**](http://codeigniter.com/user_guide/database/queries.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T09:50:22.110

```
 1\. Database Support 
```

PDO 相对于 MySQL 的核心优势在于其对数据库驱动程序的支持。PDO 支持许多不同的驱动程序，如 CUBRID、MS SQL Server、Firebird/Interbase、IBM、MySQL 等。

```
 2\. Security 
```

这两个库都提供 SQL 注入安全性，只要开发人员按照预期的方式使用它们。建议将准备好的语句与绑定查询一起使用。

```
 3\. Speed 
```

虽然 PDO 和 MySQL 都非常快，但 MySQL 在基准测试中的执行速度却微不足道——非准备语句约为 2.5%，准备语句约为 6.5%。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-04T17:09:10.000

据我所知（CodeIgniter newbie ;)）它使用 ActiveRecords 很好地处理了安全问题。我不知道它是否使用 PDO，但它非常易于使用，查询看起来非常干净，并且具有查询缓存。

# ios - 收到内存警告和内存泄漏

> ID：11333103
> 
> 赞同：0
> 
> 时间：2012-07-04T17:04:49.597
> 
> 标签：ios, iboutlet, uipageviewcontroller, didreceivememorywarning

我正在使用 ARC（自动引用计数）。

如果我将`IBOutlets`in 设置为 nil`viewDidDisappear`可以`viewDidUnload`吗？

比如这些：

```
[self setTheImage:nil];
[self setBTNplay:nil];
[self setBTNstop:nil]; 
```

我正在编写一个基于导航的应用程序，其中包括`pageViewController`，我在 Instruments 中测试了我的应用程序以查看内存泄漏，并且我不断**收到内存警告**消息。我什至在`viewDidUnload`方法中放了一个日志代码。但是当我弹出时它似乎没有被调用`rootViewController`！

还有一件事：如果每个页面都有一个 audioPlayer，我应该在哪里将 a 设置`@property (nonatomic, strong) AVAudioPlayer *audioPlayer;`为 nil？

或者我如何将它设置为弱而不是强？因为它在此代码行中给了我一个“警告”：

```
_audioPlayer = [[AVAudioPlayer alloc] initWithContentsOfURL:poemURL error:nil]; 
```

它说：**将保留对象分配给弱变量**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T19:58:36.537

您不需要在`viewDidUnload`. 确保您使用的是弱属性而不是强属性或为`IBOutlet`s 赋值。收到内存警告并不一定意味着您正在泄漏。收到内存警告意味着您的应用程序消耗了太多内存。运行 Instruments 并使用您的应用程序使用多少内存来编辑您的问题。

您正在使用的事实`AVAudioPlayer`让我觉得您可能正在将一些大量的音频文件拉入内存。

顺便说一句，`initWithContentsOfURL:error:`因为你阻塞了主线程，你会被 App Store 拒绝。尝试在仅启用蜂窝网络的 iPhone 上测试您的应用程序，然后进入您办公室/房屋中互联网连接不良的部分。还可以尝试将手机切换到飞行模式。您的应用程序无疑会在连接失败之前冻结很长时间，或者它会简单地崩溃。

相反，您应该使用盛大的中央调度或通过`NSURLConnection`块或委托方法下载它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T19:59:15.267

首先，不要将您的属性设置为零，`viewDidDisappear`因为您的视图仍在加载。您必须始终将它们设置为 nil in `viewDidUnload`。它在内存不足的情况下被调用，在这里你必须清理所有破坏系统内存的东西。

Apple的UIViewController[参考](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIViewController_Class/Reference/Reference.html)`viewDidUnload`

> 当内存不足的情况发生并且不需要当前视图控制器的视图时，系统可能会选择从内存中删除这些视图。此方法在视图控制器的视图被释放后调用，这是您执行任何最终清理的机会。

二、看看这个教程，[ARC解释的很好](http://www.raywenderlich.com/5677/beginning-arc-in-ios-5-part-1)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T01:37:14.147

您是`[[NSNotificationCenter defaultCenter] removeObserver:self];`从您的视图控制器子类之一调用吗？如果是这样，那就可以解释为什么您没有调用 viewDidUnload 。

如果这是问题所在，您应该在需要时将自己从特定通知中删除，而不是如上所述的所有通知。（不过，可以从 dealloc 调用`removeObserver:self`。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-31T00:19:49.117

> 如果我在 viewDidDisappear 中将 IBOutlets 设置为 nil 而不是 viewDidUnload 可以吗？

这种说法有很多错误之处。

首先，您不要将 IBOutlets 设置为 nil `viewDidDisappear`。`viewDidDisappear`当视图“消失”时被调用（例如，当它在标签栏控制器中时，你切换到另一个标签；或者它在导航控制器上，你在它上面推了一些东西）；然后视图可以再次“出现”而无需再次加载。如果您将 IBOutlets 设置为 nil，则在您出现时它们将不会再次设置。（它们仅在加载视图时设置。）

其次，如果你有泄漏，并且将东西设置为 nil “修复它”，这意味着你没有释放实例变量。您必须始终释放`dealloc`.

> 我什至在 viewDidUnload 方法中放了一个日志代码。但是当我什至弹出到 rootViewController 时，它似乎没有被调用！

是的，`viewDidUnload`仅在内存不足的情况下调用。在大多数情况下通常不会调用它。如果您依赖它被调用，那么您使用了错误的方法。

# java - 我的 Android 日志文件中的这些问号是什么？

> ID：11333104
> 
> 赞同：1
> 
> 时间：2012-07-04T17:04:52.980
> 
> 标签：java, android, eclipse

有人可以告诉我这是什么意思：

```
07-04 09:54:38.048: I/DetailActivity(15496): Title that is set : ��Le 
```

我从我正在编写的 android 应用程序的日志文件中得到了这个。这是在一个字符串变量中，数据来自一个 Parcable 方法，我用来将数据从一个活动传递到另一个活动。如果您需要代码，请告诉我，但我希望有人能解释它们是什么而不是 w

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T17:11:19.517

看起来像一个字符编码问题。这两个字符由您的应用程序中的一系列位（可能是 UTF-8）表示，这些位不会转换为 ASCII。

阅读 Joel on Software[关于该主题的博文](http://www.joelonsoftware.com/articles/Unicode.html)。

# python - Python 2.5 和 sqlite3：DLL 加载失败

> ID：11333107
> 
> 赞同：2
> 
> 时间：2012-07-04T17:05:02.327
> 
> 标签：python, sqlite, python-2.5

当我输入

```
import sqlite3 
```

在 Python 2.5 解释器 (C:\Python25\Python) 中，我收到以下错误：

```
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "C:\QGIS\python\sqlite3\__init__.py", line 24, in <module>
    from dbapi2 import *
  File "C:\QGIS\python\sqlite3\dbapi2.py", line 27, in <module>
    from _sqlite3 import *
ImportError: DLL load failed: Specified module not found. 
```

出现一个带有“sqlite3.dll not found”消息的消息框（原始德语消息：“Das Programm kann nicht gestartet werden, da sqlite3.dll auf dem Computer fehlt. Installieren Sie das Programm erneut, um das Problem zu beheben.”） .

根据[文档](http://docs.python.org/library/sqlite3.html)，sqlite3 包含在 Python 2.5 中（我不需要单独安装）。

另外，当我查看目录 C:\Python25\DLLs 时，我发现 sqlite3.dll 在那里。

我能做些什么来解决这个问题？

请注意，我的机器上有 3 个不同版本的 Python。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T17:21:31.400

从 PYTHONPATH 环境变量中删除 C:\QGIS\python 解决了这个问题。

前：

```
C:\Program Files\OpenLibraries\python;C:\opus\src;C:\PopGen;C:\QGIS\python;
C:\Python25\Lib\site-packages\django 
```

后：

```
C:\Program Files\OpenLibraries\python;C:\opus\src;C:\PopGen;
C:\Python25\Lib\site-packages\django 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-09-07T21:58:51.463

也可以从官[网](https://www.sqlite.org/download.html)下载SQLite3 DDL文件，然后将文件保存在以下位置

C:\Users\RamWill\AppData\Local\Programs\Python\Python37\DLLs

我使用python 3.7

# python - 如何将行号从 Python 回溯发送到 vim？

> ID：11333112
> 
> 赞同：12
> 
> 时间：2012-07-04T17:05:36.200
> 
> 标签：python, vim, tabs, line-numbers, traceback

我可以解析出 Python 回溯文件的路径，然后我可以使用`-p`命令行将它们发送到 Vim，以便每个选项卡打开一个文件。所以我最终得到一个命令，例如

```
vim -p main.py module.py another.py 
```

这会在新选项卡中打开每个文件，但我希望它们在新选项卡**中以正确的行号**打开。所以我尝试了类似的变化

```
vim -p main.py +10 module.py +20 another.py +30 
```

但我似乎无法让 Vim 尊重我在命令行中发送的行号——它总是只取最后一个行号并将其应用于第一个选项卡。所以这个例子让我在`main.py`第 30 行。尝试像

```
vim -p main.py+10 module.py+20 another.py+30
vim -p main.py\ +10 "module.py +20" another.py@30 
```

一切都以错误的文件名结束。

Python、Bash 命令行、Vim 脚本或 Vim-Python 级别的答案都将受到欢迎。或者，确实，完全不同的方法

（回溯可能来自任何地方，不一定由我控制。今天让我开始的只是服务器日志中的一组行。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T23:01:43.010

试试 vim 插件: [`file_line`](https://github.com/bogado/file-line):

```
vim -p new main.py:10 module.py:20 another.py:30 
```

*已知问题：第一个文件名不应包含 lineno。*（我试图弄清楚为什么......）

# ios - 关于在 iPhone 中的常量之间使用逻辑 && 的警告

> ID：11333113
> 
> 赞同：0
> 
> 时间：2012-07-04T17:05:40.770
> 
> 标签：ios, objective-c, iphone, xcode, warnings

我使用此代码比较两个字符串：

```
NSComparisonResult result = [cellTitle compare:searchText options:(NSCaseInsensitiveSearch && NSLiteralSearch)]; 
```

但是 xcode 显示有关使用逻辑 && 的警告，并提供使用按位 &，按位 & 比较不会返回正确的结果。

我该如何解决？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-04T17:07:05.183

您正在尝试组合位掩码的两个部分。您可以使用按位 OR 或 XOR 运算符，或为此添加`|`-`^`或`+`。规范是`|`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T02:46:33.187

你应该这样做：

```
 NSComparisonResult result = [cellTitle compare:searchText 
                            options:(NSCaseInsensitiveSearch | NSLiteralSearch)]; 
```

这些标志是只有一组 1 的二进制数。因此，当您执行逻辑 | 时，您会得到两者的“混合”（例如：1000 | 0100 => 1100），这样您就可以将多个标志设置为选项。

# java - Java - 使用 SSL/TLSv1 登录网站并检索数据

> ID：11333116
> 
> 赞同：3
> 
> 时间：2012-07-04T17:05:51.343
> 
> 标签：java, ssl, web

总是检查您的银行帐户网站以获取新的月度报表是很乏味的。（它们通过网络界面以 pdf 格式提供）。

所以，我想写一个客户端登录到[这个网站](http://www.vrbank-hof.de/)并为我获取 pdf。

虽然我了解 TCP、HTTP 等，但我对 SSL 和 HTTP 基本身份验证之外的加密还是很陌生。

什么是正确的方法和/或我怎样才能让它发挥作用？

问候，乔纳斯·格罗格

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T17:37:09.477

您无需了解 SSL/TLS 的工作原理。您可以使用 SSLSocket 为您加密和解密数据：

[http://docs.oracle.com/javase/7/docs/api/javax/net/ssl/SSLSocket.html](http://docs.oracle.com/javase/7/docs/api/javax/net/ssl/SSLSocket.html)

您可能想改为检查 Apache HTTPClient 项目：

[http://hc.apache.org/httpcomponents-client-ga/](http://hc.apache.org/httpcomponents-client-ga/)

因为它已经实现了 HTTP/HTTPS 协议，包括代理和 cookie 等。

# .htaccess - htaccess 和 301 重定向

> ID：11333117
> 
> 赞同：1
> 
> 时间：2012-07-04T17:05:51.793
> 
> 标签：.htaccess

我想重定向

```
http://old.clients.domain.com 
```

至

```
http://clients.domain.com 
```

在 htaccess 文件中，我写了一个永久重定向

```
Redirect 301 / http://clients.domain.com 
```

当我输入 old.clients.domain.com 时，它会在地址栏中将地址更改为 clients.domain.com，但它没有给我页面，而是在 Firefox 中给了我这个：

```
The page isn't redirecting properly

Firefox has detected that the server is redirecting the request for this address in a way that will never complete. 
```

我做错了什么？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T15:48:14.447

这是什么？难怪使用此处示例的任何人都会遇到内部服务器错误！*=old.clients.domain.com*无效。

代替

```
Rewritecond %{HTTP_HOST} =old.clients.domain.com 
```

利用

```
Rewritecond %{HTTP_HOST} (www\.)?old.clients.domain\.com 
```

所以正确代码的一个例子是

```
RewriteEngine On
RewriteBase /

Rewritecond %{HTTP_HOST} (www\.)?old.clients.domain\.com
RewriteRule ^.*$ http://new.clients.domain.com/$0 [R=301,L] 
```

这将在将根域重定向到插件域时起作用，并防止诸如“Firefox 检测到服务器正在以永远不会完成的方式重定向该地址的请求”之类的错误

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T22:12:10.810

如果它们指向同一个根目录，那么最简单的方法是在根 .htaccess 文件中使用条件重写语句：

```
RewriteEngine On
RewriteBase   /

Rewritecond   %{HTTP_HOST} =old.clients.domain.com
RewriteRule   ^.*$         http://clients.domain.com/$0   [R=301,L] 
```

您需要防护来防止`clients.domain.com`大多数浏览器（例如 Ff）将作为无限重定向拾取的有效请求的重新重定向。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T17:10:54.557

我认为它还为[http://clients.domain.com/返回 301](http://clients.domain.com/)

您必须只为[http://old.clients.domain.com/的目录放置 .htaccess 文件](http://old.clients.domain.com/)

# actionscript-3 - AS3 添加和删除对象，是个好主意吗？

> ID：11333118
> 
> 赞同：1
> 
> 时间：2012-07-04T17:05:55.587
> 
> 标签：actionscript-3

在 AS3 中，我通过扩展 sprite 的类创建了许多扑克牌。

然后我在整个游戏中添加和删除这些内容。

我想知道，这是正确的方法吗？不断添加和删除对象是否需要大量处理器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T17:13:20.220

我想当您说“添加和删除对象”时，您的意思是在舞台上添加和删除。

一遍又一遍地创建和销毁对象比在舞台上添加和删除对象要占用更多的处理器资源。所以我会说你是安全的。

但是，添加和删除舞台的另一种方法是更改`visible`​​精灵的属性。这甚至更少的处理器密集型，可能是适合您的解决方案。请注意，当一个对象不可见时，它仍然存在。它只是没有显示。在 StackOverflow 上看到这个问题：[DisplayObject 的可见属性](https://stackoverflow.com/questions/1684549/visible-property-of-displayobject)

# iphone - 内存查询：将对象添加到数组后释放对象

> ID：11333121
> 
> 赞同：0
> 
> 时间：2012-07-04T17:06:16.817
> 
> 标签：iphone, objective-c

在以下代码片段中：

```
NSMutableArray *tmpItemsArray =[[[NSMutableArray alloc] init] autorelease];

while (sqlite3_step(fetch_statement)==SQLITE_ROW){

    int pk =    sqlite3_column_int(fetch_statement,0);  

    Item_A *itemA = [[Item_A alloc] getItemA:pk fromDatabase:db];

    // calculate and set a property of itemA
    [itemA setValue:xValue forkey:xKey];

    // insert into array
    [tmpItemsArray addObject:itemA];
    [itemA release];
}
sqlite3_reset(fetch_statement);

// for each ItemA in array      
    // update itemA in database
for (Item_A *eachItemA in tmpItemsArray) {
    [eachItemA updateItemAInDatabase:db];
} 
```

当我使用 addObject: 方法将对象添加到 tmpItemsArray 时，itemA 指向的内存地址处的对象被添加到数组中。换句话说，tmpItemsArray 中的对象指向的内存地址与 ItemA 指向的内存地址相同。

现在当 [itemA release] 被执行时，释放内存 -

tmpItemsArray 会有指向无效内存的对象吗

或者

[itemA release] 是否仅释放 itemA 对此内存的持有（以某种方式）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T17:14:40.000

不，当`[itemA release]`被调用时，计数器递减并且仅当计数器达到零时才释放内存。每次有人声称拥有该对象的所有权时（例如当输入一个数组时），计数器就会增加。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T17:15:23.417

`release`实际上不会导致内存被释放。相反，它会减少一个计数，该计数表示代码的某些部分保留了对象的次数。分配对象的行为相当于一种保留，而将其添加到数组中则是另一种。您的`release`平衡，`alloc`并且在这一点上，数组的保留阻止它被释放。

当数组消失时，除非发生其他事件，否则它将释放其内容。由于它是一个自动释放的数组，这很可能发生在程序事件循环的下一次迭代中。

# c# - 如何将参数传递给 LIMIT ？我可以将所有查询输出保存在一个字符串中吗？

> ID：11333124
> 
> 赞同：0
> 
> 时间：2012-07-04T17:06:37.927
> 
> 标签：c#, mysql, sql, serial-port

我有2个问题，有点相关：

1).如何将参数的值传递给限制？可能吗 ？

我试过这个：

```
log.CommandText = "SELECT * from log order by date desc limit ?param1"; 
```

但它不起作用，因为参数传递如下：“2”。

解决了：

```
log.CommandText = String.Format("SELECT * from log order by date desc limit {0}, yourIntNumber) 
```

2）。我可以将上述查询的输出保存在 C# 中的一个变量中吗？我尝试过这样的事情..但日志不包含所有内容..

```
 while (Reader.Read())
                {
                    for (int i = 0; i < Convert.ToInt16(lognr); i++)
                    {

                        logs = logs + (Reader.GetValue(i).ToString());  
                    }

                } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T17:32:00.513

对于您的第一个问题：-

您可以使用 Top 关键字，例如：- 对于 MSSQL (Microsoft SQL)

```
Select TOP 3 * From Table_name 
```

对于 MYSQL

```
Select * From Table_name LIMIT 3 
```

以上将返回前 3 行。

对于你的第二个问题，

```
while (Reader.Read())
 {
      for (int i = 0; i < Convert.ToInt16(lognr); i++)
       {

        logs = logs + (Reader.GetValue(i).ToString());  
        }

   }
} 
```

此代码正在检查条件 Convert.ToInt16(lognr) ，这就是它没有返回所有内容的原因。

希望以上信息对您有所帮助:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T18:49:02.177

1).如何将参数的值传递给限制？可能吗 ？

我试过这个：

```
log.CommandText = "SELECT * from log order by date desc limit ?param1"; 
```

但它不起作用，因为参数传递如下：“2”。

解决了：

```
log.CommandText = String.Format("SELECT * from log order by date desc limit {0}, yourIntNumber) 
```

2）。我可以将上述查询的输出保存在 C# 中的一个变量中吗？我尝试过这样的事情..但日志不包含所有内容..

```
 while (Reader.Read())
        {
            for (int i = 0; i < Convert.ToInt16(lognr); i++)
            {

                logs = logs + (Reader.GetValue(i).ToString());  
            }

        } 
```

解决了：

```
log.CommandText = String.Format("SELECT * from log order by date desc limit {0}", lognr);  //the output has 3 columns and several rows.
Reader = log.ExecuteReader();
int i = 0;
while (Reader.Read())
{
logs = logs + "\r\n" + Reader.GetValue(0).ToString() + " " + Reader.GetValue(1).ToString() + " "+ " " + Reader.GetValue(2).ToString();
i++;
} 
```

# struts2 - Struts2 验证不起作用

> ID：11333133
> 
> 赞同：0
> 
> 时间：2012-07-04T17:07:30.207
> 
> 标签：struts2

我正在尝试使用 Struts2 验证器工具验证表单，但它似乎不起作用，因为显然，xml 验证器从未得到确认。

这是我的代码：

struts.xml：

```
<interceptors>
    <interceptor name="login_interceptor" class="org.apache.struts.gesprod.produccion.BLLogin">
    </interceptor>
    <interceptor-stack name="login_stack">
        <interceptor-ref name="login_interceptor" />
        <interceptor-ref name="defaultStack" />
    </interceptor-stack>
</interceptors>

<default-interceptor-ref name="login_stack"></default-interceptor-ref>

<global-results>
    <result name="input">/errores/error_input.jsp</result>
    <result name="error_sql">/errores/error_sql.jsp</result>
    <result name="no_logged">/login.jsp</result>
</global-results>
...
<action name="login" class="org.apache.struts.gesprod.produccion.BLUsuario" method="loginUsuario">
    <result name="success" type="redirect">/welcome.jsp</result>
    <result name="incorrecto_login">/login.jsp</result>
    <result name="input">/login.jsp</result>
</action> 
```

登录.jsp：

```
<div id="login">
    <s:fielderror />
    <s:form id="login_form" action="login" validate="true">
        <s:hidden name="intento_log" value="true" />
        <s:textfield name="usuario.username_usuario" label="Usuario"/>
        <s:password name="usuario.password_usuario" label="Password"/>
        <s:submit value="Ingresar"/>
    </s:form>
</div> 
```

和 xml 验证器，与 Action 类放在同一个包中。

BLUsuario-login-validation.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE validators PUBLIC 
    "-//OpenSymphony Group//XWork Validator 1.0.2//EN" 
    "http://www.opensymphony.com/xwork/xwork-validator-1.0.2.dtd">
<validators>
    <field name="usuario.username_usuario">
        <field-validator type="requiredstring">
            <message>Show error!</message>
        </field-validator>
    </field>
</validators> 
```

有人可以帮助并注意我的代码是否有问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T18:09:52.493

我认为问题出在 xml 验证器的名称上。您必须使用 重命名验证器`login-validation.xml`。您可以放入 xml 验证器文件的名称是：

> 可以指定验证规则：
> 
> **每个 Action 类：**在名为 ActionName-validation.xml 的文件中
> 
> **每个操作别名：**在名为 ActionName-alias-validation.xml 的文件中
> 
> **Action类实现的继承层次和接口：** XWork向上搜索action的继承树，找到对Action的父类和实现的接口的默认验证

你可以在这里看到更多：http: [//struts.apache.org/2.0.12/docs/validation.html#Validation-DefiningValidationRules](http://struts.apache.org/2.0.12/docs/validation.html#Validation-DefiningValidationRules)

PD：您说“*即使字段错误，也永远不会返回“输入”结果*”。如果有任何字段错误，则返回输入结果（除非您指定其他内容）。

# f# - F#中度量单位的分数幂

> ID：11333135
> 
> 赞同：9
> 
> 时间：2012-07-04T17:08:10.327
> 
> 标签：f#, units-of-measurement

是不是这样说：**F# 中没有分数功率单位**

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-04T22:55:17.980

除了已经说过的内容之外，有关（不仅仅是）F# 度量单位的信息的最佳资源是[Andrew Kennedy 的博士论文](http://www.cl.cam.ac.uk/techreports/UCAM-CL-TR-391.pdf)，他实际设计了 F# 单位。他提到了分数单位：

> 最重要的决定是是否允许维度的分数指数。反对它们的论点是哲学上的：具有诸如 M ^(1/2)维数的量在物理上没有意义，如果出现这种情况，它会建议修改基本维数集，而不是重新评估积分指数。赞成的论点是务实的：有时更容易编写程序代码来临时创建一个维数具有小数指数的值。本论文以前一种观点为准，不考虑分数指数。但是，大多数理论都适用。任何潜在的差异都会在出现时突出显示。

我认为这本质上是 F# 没有分数单位的原因，因为 F# 的设计非常接近 Andrew Kennedy 的工作，以确保它是合理的。

**更新：**在 F# 4.0 中，已[实现对分数指数的支持](https://github.com/Microsoft/visualfsharp/commit/af6fe4eb400bbd00ce29771873659b1829eee52d)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-22T16:09:57.383

具有分数指数的单位很常见，它们并没有什么特别之处。可能技术界的每个人都遇到过电压噪声密度，它是按每平方 (Hz) 测量的。这在物理上很有意义，噪声功率与带宽成正比，噪声电压是功率的平方，这里没有奇怪的数学。

每次遇到分数幂指数时都创建一个新的基本单位不是正确的方法。

这些单位不是 SI 单位，它们的使用破坏了库的兼容性。如果你将 sqrtHz 定义为一个新单位，而我定义了 rootHz，我们的代码就不能一起工作。无论如何，我需要引入相当多的基本单位才能拥有一套完整的 Hz^-2、Hz^3、Hz^-5，... 顺便说一句，仅仅提供有理指数似乎是更好的选择。Boost.units 就是这样做的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-04T18:50:24.233

没有字面上`fractional power`的度量单位无论如何都不会打折 F# 单位设施，因为它允许`fractional exponent`以相反的方式呈现看似单位关系，而将最小分数作为基本维度：

```
let takeSqrt (x: float<_>) = sqrt(x) 
```

已经推断出这种方式的签名，`float<'u ^ 2> -> float<'u>`避免引入想象中的“自然分数” `float<'u> -> float<'u^1/2>`。

```
let moreComplicated (x: float<_>) (y: float<_>) =
    sqrt(x*x + y*y*y) 
```

已推断出 的签名`float<'u ^ 3> -> float<'u ^ 2> -> float<'u ^ 3>`，其中所有单位度量转换相对于某些派生的隐式基本维度保持有效`float<'u>`。

事实上，下面的这段代码

```
[<Measure>]type m
let c = sqrt(1.0<m>) 
```

甚至没有与诊断一起编译`The unit of measure 'm' does not match the unit of measure ''u ^ 2'`可以被认为是责备或祝福，但清楚地表明单位测量检查已经到位。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-09T01:16:51.143

**编辑**：在阅读了 OP 的评论和 Andrew Kennedy 的论文中的例外之后，@nicolas 似乎是正确的——F# 不支持带小数指数的度量单位。

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2016-11-18T04:44:38.753

答案不应该像说，是的，赫兹以 s^-2 测量，与 s^(1/2) 相同吗？你去吧。另外，我喜欢使用 的哲学思想，比如 m^(1/2) 如果它出现在计算中，也许有一天会理解该单位在字面意义上的含义。

# c# - 目录不存在 - 参数名称：directoryVirtualPath

> ID：11333137
> 
> 赞同：10
> 
> 时间：2012-07-04T17:08:38.677
> 
> 标签：c#, asp.net-mvc, iis, stack-trace, visual-studio-2012

我正在使用 Visual Studio Express 2012 RC。

*   如果创建一个空白的“hello world MVC 4.5 项目”
*   我将它降级到 4.0，因此它与我的主机兼容 (Arvixe)
*   我将它发布给主机。

然后我收到此错误消息，我可以在网上找到有关它的任何信息。

```
Server Error in '/' Application.

Directory does not exist.
Parameter name: directoryVirtualPath

Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. 

Exception Details: System.ArgumentException: Directory does not exist.
Parameter name: directoryVirtualPath

Source Error: 

An unhandled exception was generated during the execution of the current web request. Information regarding the origin and location of the exception can be identified using the exception stack trace below.

Stack Trace: 

[ArgumentException: Directory does not exist.
Parameter name: directoryVirtualPath]
   System.Web.Optimization.Bundle.IncludeDirectory(String directoryVirtualPath, String searchPattern, Boolean searchSubdirectories) +357
   System.Web.Optimization.Bundle.Include(String[] virtualPaths) +287
   IconBench.BundleConfig.RegisterBundles(BundleCollection bundles) +75
   IconBench.MvcApplication.Application_Start() +128

[HttpException (0x80004005): Directory does not exist.
Parameter name: directoryVirtualPath]
   System.Web.HttpApplicationFactory.EnsureAppStartCalledForIntegratedMode(HttpContext context, HttpApplication app) +9160125
   System.Web.HttpApplication.RegisterEventSubscriptionsWithIIS(IntPtr appContext, HttpContext context, MethodInfo[] handlers) +131
   System.Web.HttpApplication.InitSpecial(HttpApplicationState state, MethodInfo[] handlers, IntPtr appContext, HttpContext context) +194
   System.Web.HttpApplicationFactory.GetSpecialApplicationInstance(IntPtr appContext, HttpContext context) +339
   System.Web.Hosting.PipelineRuntime.InitializeApplication(IntPtr appContext) +253

[HttpException (0x80004005): Directory does not exist.
Parameter name: directoryVirtualPath]
   System.Web.HttpRuntime.FirstRequestInit(HttpContext context) +9079228
   System.Web.HttpRuntime.EnsureFirstRequestInit(HttpContext context) +97
   System.Web.HttpRuntime.ProcessRequestNotificationPrivate(IIS7WorkerRequest wr, HttpContext context) +256

Version Information: Microsoft .NET Framework Version:4.0.30319; ASP.NET Version:4.0.30319.237 
```

这是什么意思 ？

**按要求编码^^**

```
public class HomeController : Controller
{
    public ActionResult Index()
    {
        return Content("Hello world");
    }
} 
```

那是我添加的唯一代码。

**application_start 代码**

```
public class MvcApplication : System.Web.HttpApplication
{
    protected void Application_Start()
    {
        AreaRegistration.RegisterAllAreas();

        FilterConfig.RegisterGlobalFilters(GlobalFilters.Filters);
        RouteConfig.RegisterRoutes(RouteTable.Routes);
        BundleConfig.RegisterBundles(BundleTable.Bundles);
    }
} 
```

**路由配置**

```
public class RouteConfig
{
    public static void RegisterRoutes(RouteCollection routes)
    {
        routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

        routes.MapHttpRoute(
            name: "DefaultApi",
            routeTemplate: "api/{controller}/{id}",
            defaults: new { id = RouteParameter.Optional }
        );

        routes.MapRoute(
            name: "Default",
            url: "{controller}/{action}/{id}",
            defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional }
        );
    }
} 
```

**过滤器配置**

```
public class FilterConfig
{
    public static void RegisterGlobalFilters(GlobalFilterCollection filters)
    {
        filters.Add(new HandleErrorAttribute());
    }
} 
```

**捆绑配置**

```
 public class BundleConfig
{
    public static void RegisterBundles(BundleCollection bundles)
    {
        bundles.Add(new ScriptBundle("~/bundles/jquery").Include(
                    "~/Scripts/jquery-1.*"));

        bundles.Add(new ScriptBundle("~/bundles/jqueryui").Include(
                    "~/Scripts/jquery-ui*"));

        bundles.Add(new ScriptBundle("~/bundles/jqueryval").Include(
                    "~/Scripts/jquery.unobtrusive*",
                    "~/Scripts/jquery.validate*"));

        bundles.Add(new ScriptBundle("~/bundles/modernizr").Include(
                    "~/Scripts/modernizr-*"));

        bundles.Add(new StyleBundle("~/Content/css").Include("~/Content/site.css"));

        bundles.Add(new StyleBundle("~/Content/themes/base/css").Include(
                    "~/Content/themes/base/jquery.ui.core.css",
                    "~/Content/themes/base/jquery.ui.resizable.css",
                    "~/Content/themes/base/jquery.ui.selectable.css",
                    "~/Content/themes/base/jquery.ui.accordion.css",
                    "~/Content/themes/base/jquery.ui.autocomplete.css",
                    "~/Content/themes/base/jquery.ui.button.css",
                    "~/Content/themes/base/jquery.ui.dialog.css",
                    "~/Content/themes/base/jquery.ui.slider.css",
                    "~/Content/themes/base/jquery.ui.tabs.css",
                    "~/Content/themes/base/jquery.ui.datepicker.css",
                    "~/Content/themes/base/jquery.ui.progressbar.css",
                    "~/Content/themes/base/jquery.ui.theme.css"));
    }
} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-04T17:25:38.273

似乎此错误源于“未在应用程序目录中包含所需文件”或将代码上传到未配置为虚拟目录的目录中，甚至是不正确的目录中。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-12-31T19:51:07.113

这篇文章类似于[目录不存在。参数名称：directoryVirtualPath](https://stackoverflow.com/questions/11317384/directory-does-not-exist-parameter-name-directoryvirtualpath)

答案帮助我调试。显然，目标服务器上缺少文件夹。我的应用程序在本地运行良好，但是当我发布时，几个`script`子目录没有发布。当我手动对它们进行 FTP 上传时，该应用程序运行良好！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-02-03T02:57:21.423

在此处扩展信息。

我经常像这样将所有文件捆绑在一个文件夹中：`"~/Content/js/angular/modules/*.js",` 只要文件夹存在，它就可以很好地工作。

问题是，如果发布时该文件夹为空，则不会发布，并会导致上述异常。所以现在我要么放一个empty.txt，要么手动添加文件夹，如果我想让它们暂时保持空白。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-25T13:50:35.760

检查 bin 文件夹中是否有 dll 以及 GAC 中是否存在 dll

从 GAC 中删除 dll

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-01-27T03:24:12.447

就我而言，这是我忘记上传到服务器的“内容”文件夹

* * *

## 回答 #6

> 赞同：-4
> 
> 时间：2014-11-24T11:10:15.537

创建目录“/Content/themes/base”

# c++ - 返回对私有成员的引用的公共类成员或方法？

> ID：11333138
> 
> 赞同：2
> 
> 时间：2012-07-04T17:08:45.697
> 
> 标签：c++

公共类成员有什么区别

```
class data
{
public:

    std::list<data> list_of_data;
}; 
```

以及返回私有成员作为参考的方法？

```
class data
{
public:

   std::list<data>& get_data()
   { return list_of_data; }

private:

    std::list<data> list_of_data;
}; 
```

哪一个更好？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T17:30:44.673

这种形式的问题没有多大意义。如果您公开广播在第二种情况下`list_of_data`确实是成员的事实`data`（即使它是私有的），那么实际上没有区别。

但这不是我们拥有私人成员的目的。在典型的 C++ 设计中，在您的第二个变体中，不允许外部代码使用任何关于`data`. 外部代码唯一知道的是公共`get_data()`成员。实际数据在哪里`get_data()`- 局外人不知道也不关心。

在这种情况下，差异变得非常明显。

*   `list_of_data`在第一种情况下，您暴露了作为 class 成员实际存在的事实`data`。例如，它立即意味着生命周期与相应实例`list_of_data`的生命周期相同。`data`这也意味着不同的`data`实例有不同的`list_of_data`成员。

*   在第二种情况下，您不会暴露任何类似的东西。外部代码不知道实际`std::list<data>`对象的位置以及它的生命周期。外部代码不知道 的不同实例是否`data`会从其`get_data()`成员返回不同的引用。为了得到这些问题的答案，外部用户必须注意代码的预期设计，而不是通过阅读代码来得出结论。这是一件好事。

这就是我们经常使用访问器函数（甚至是返回引用的函数）而不是公开暴露数据成员的全部原因。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T17:29:59.347

第二种方法几乎总是更可取。它增加了一点额外的抽象，足以让它非常有用。

例如，使用第二种方法，您可以将您的成员变量移动到您的类中的任何其他组合，并且仍然保持接口。您甚至可以将其移至 PIMPL 并放弃包含`<list>`. 或者，您可以将功能设为虚拟并将成员移动到其他位置。它基本上使所有使用你的类的代码更能抵抗改变，这总是好的。

在其最基本的形式中，该函数通常甚至是内联的，从而在运行时使抽象自由。

现在唯一不是真正免费的方面是程序员时间，如果您认为省去编写函数更具成本效益，那就这样吧。但是，您可能应该使用其中一种“哑”聚合类型，例如`tuple<>`或`pair<>`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T17:10:22.717

如果它不是结构（即只有没有任何逻辑的数据） - 成员必须是私有的。例如，阅读 Herb Sutter 进行解释。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-04T17:11:41.667

这两种方法都是不好的封装，因为它们可以修改对象，甚至用新对象替换它。相反，使用`get`按值或`const`引用返回对象的方法：

```
const MyClass &getObj() { .... } 
```

使返回的对象不能被修改。

***编辑*** 如果您仍然想修改返回的对象，那么只需通过引用返回它。在我看来，这至少比`public field`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-04T18:09:56.580

让我给你推荐几篇文章：

[gotw #70 - 封装](http://www.gotw.ca/gotw/070.htm)处理关于数据成员是公共的、受保护的、私有的问题。

[gotw #76：访问权限的使用和滥用](http://www.gotw.ca/gotw/076.htm)

After reading Herb Sutter's [Exceptional C++ style](http://www.amazon.de/dp/0201760428/ref=asc_df_02017604288608375?smid=A3JWKAKR8XB7XF&tag=googledeprodu-21&linkCode=asn&creative=22494&creativeASIN=0201760428) which contains several gotw articles (including the ones above), I definitely vote for your 2nd example: private members, public access methods.

# css - 页面在 IE9 中无法正确显示

> ID：11333140
> 
> 赞同：1
> 
> 时间：2012-07-04T17:09:01.997
> 
> 标签：css, html, twitter-bootstrap, internet-explorer-9, bootswatch

我正在使用带有 html5 样板的 bootswatch 主题的引导程序来创建页面。虽然它在 Chrome 和 Firefox 中正确显示，但在 IE9 和 IE8 模式下无法正确显示。但是，当我将 IE9 设置为使用兼容模式时，它可以正常工作。问题是在没有兼容模式的 IE9 中，页面不对齐并停留在左侧。想知道我哪里出错了。提前致谢！

```
<!doctype html>
<!-- paulirish.com/2008/conditional-stylesheets-vs-css-hacks-answer-neither/ -->
<!--[if lt IE 7]> <html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if IE 7]>    <html class="no-js lt-ie9 lt-ie8" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js lt-ie9" lang="en"> <![endif]-->
<!-- Consider adding a manifest.appcache: h5bp.com/d/Offline -->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"> <!--<![endif]-->
<head>
  <meta charset="utf-8">

  <!-- Use the .htaccess and remove these lines to avoid edge case issues.
       More info: h5bp.com/i/378 -->
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title></title>
  <meta name="description" content="">
  <!-- Mobile viewport optimized: h5bp.com/viewport -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1, user-scalable=no">
  <!-- Place favicon.ico and apple-touch-icon.png in the root directory: mathiasbynens.be/notes/touch-icons -->
  <link rel="stylesheet" href="css/bootstrap.css">
  <!-- More ideas for your head here: h5bp.com/d/head-Tips -->

  <!-- For the sticky footer -->
    <!--[if !IE 7]><style type="text/css">#sf-wrapper {display:table;height:100%}</style><![endif]-->
  <style>
      #content-main {
        padding-top:63px;
       }

      #form-language {
        margin-top: 15px;
      }
  </style>
  <!-- All JavaScript at the bottom, except this Modernizr build.
       Modernizr enables HTML5 elements & feature detects for optimal performance.
       Create your own custom Modernizr build: www.modernizr.com/download/ -->
  <script src="extras/h5bp/js/libs/modernizr-2.5.3.min.js"></script>
</head> 
```

代码在这里：http: [//jsfiddle.net/WWphP/](http://jsfiddle.net/WWphP/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T17:28:36.617

```
<!--[if !IE 7]><style type="text/css">#sf-wrapper {display:table;height:100%}</style><![endif]--> 
```

上面的代码是你的问题，基本上你说如果不是 IE7 使用这个也包括 IE9 的代码。您的 #sf-wrapper 元素设置为 display: table; 这使得它的宽度与里面的内容一样宽（940px），只需**将 #sf-wrapper 设置为 width:100%**它将居中。

# mysql - 为什么当字段用引号标记时，MySQL 可以正确排序但 SQLite 不能正确排序？

> ID：11333145
> 
> 赞同：1
> 
> 时间：2012-07-04T17:09:18.757
> 
> 标签：mysql, sqlite

在下面的 SQL 语句中，SQLite 正确排序但 MySQL 没有：

![在此处输入图像描述](../Images/f212cac54e0087040584b5c4b5784ee2.png)

但是，如果我不在字段名称周围包含引号，它可以正常工作：

![在此处输入图像描述](../Images/2b0e3ec0c481ad08e19e4d8441c213b4.png)

**如果字段用引号定义，谁能解释 MySQL 而不是 SQLite 不能正确排序的行为？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T17:13:25.550

`"TotalOrders"`（带双引号）是一个常量字符串 - 按它排序不会做任何事情......本质上你会得到未排序的行序列，这似乎是正确排序的。

你要

```
ORDER BY `TotalOrders` 
```

带反引号。这是列标识符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T22:21:28.817

除了欧根的回答：

值得注意的是，这种行为取决于 MySQL 的配置。

所描述的行为仅显示 MySQL 是否保留在默认 - 非标准兼容配置中。

如果将其配置为在“ANSI 模式”下运行，则双引号不用于字符串文字，而是用于标识符（几乎与所有其他 DBMS 一样）。

该问题的另一个解决方案是通过将 SQL_MODE 更改为“ANSI”来使 MySQL 符合 SQL 标准。

然后标准兼容的单引号用于文字，双引号用于标识符。

# thunderbird-addon - 将工具栏按钮添加到 Thunderbird 撰写消息窗口

> ID：11333148
> 
> 赞同：2
> 
> 时间：2012-07-04T17:09:35.413
> 
> 标签：thunderbird-addon

任何人都幸运地将自定义工具栏按钮添加到 Thunderbird 的 Compose 窗口，或者知道一个示例插件可以做到这一点？我是 Thunderbird 开发的新手，没有任何运气让[https://developer.mozilla.org/en/Custom_Toolbar_Button](https://developer.mozilla.org/en/Custom_Toolbar_Button)为 Compose 窗口工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T05:10:46.207

乔纳森先生指出的是一个很好的提示，并且该特定扩展确实有一个您正在寻找的示例。

打开您自己的`chrome manifest`文件并确保您的代码告诉 Thunderbird 您自己的哪些 xul 文件与它自己的 xul 文件“对齐”。在这些示例中，我们将假设您的 xul 文件已命名`overlay.xul`，并且它具有工具栏中按钮的代码，以及您想要在消息撰写窗口中执行的任何操作。

如果您发现您的按钮不会显示在“自定义工具栏”对话框中，那是因为 xul 在您的`chrome manifest`.

**确保在您的 chrome.manifest 中这样做：**

```
#THIS will use your xul file for the message-composing window
overlay chrome://messenger/content/messengercompose/messengercompose.xul chrome://youraddon/content/overlay.xul

#If you want a button, too, make sure this is in your file, too.
overlay chrome://global/content/customizeToolbar.xul chrome://youraddon/content/overlay.xul 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T21:10:13.723

您应该查看执行（成功）类似任务的插件代码，例如[https://addons.mozilla.org/en-US/thunderbird/addon/latex-it/](https://addons.mozilla.org/en-US/thunderbird/addon/latex-it/)。特别是查看 chrome.manifest 文件以及 overlay.css 和 overlay.xul 文件。

请记住，默认情况下工具栏按钮不会出现，您首先必须右键单击工具栏，然后点击“自定义”。

# url - 缺少 Aptana 3 更新网址列表

> ID：11333149
> 
> 赞同：0
> 
> 时间：2012-07-04T17:09:35.573
> 
> 标签：url, aptana, aptana3

我有适用于 Linux 64 位的独立 Aptana 3.1.3。

我想更新到 3.2.0，但我的偏好中没有更新网址。

我使用谷歌，但我只找到了 Eclipse 插件的更新网址。

有人可以向我发布更新 aptana 的 url。

谢谢塞博尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T17:42:49.347

名称：Aptana Studio 3 发布更新位置：http: [//download.aptana.com/studio3-rcp/plugin/update/](http://download.aptana.com/studio3-rcp/plugin/update/)

# twitter-bootstrap - Twitter bootstrap - 如何删除子类中的渐变混合

> ID：11333150
> 
> 赞同：17
> 
> 时间：2012-07-04T17:09:36.883
> 
> 标签：twitter-bootstrap, less, css

我想在我的自定义主题中对 .navbar-inner 进行子类化，但我想不出一种非黑客的方式来禁用渐变（除了将两种渐变颜色设置为看起来很脏的相同颜色）。知道如何在 less 中覆盖（禁用）子类中的 mixin 吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-04T20:28:13.613

这就是您需要在 css 中实现以覆盖禁用渐变。

**CSS：**

```
.navbar-inner {
  background-color: #2c2c2c; 
  background-image: none;
  background-image: none;
  background-image: none;
  background-image: none;
  background-image: none;
  background-image: none;
  background-repeat: no-repeat;
  filter: none;
} 
```

`background-image: none;`必须多次使用才能覆盖所有供应商前缀。

![去除渐变](../Images/8d9b0f51042cf036a60ab39be60094e4.png)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-21T15:52:30.643

对于 SASS 代码：我添加了 background-color:transparent 并将其移至 mixin

```
@mixin override_gradient_vertical() {
  background-color:transparent;
  background-image: none;
  background-image: none;
  background-image: none;
  background-image: none;
  background-image: none;
  background-image: none;
  background-repeat: no-repeat;
  filter: none;
} 
```

现在你可以使用

```
@include override_gradient_vertical(); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-07-16T01:38:13.247

感谢您的解决方案。只是分享我在阅读答案后的想法：

这是我用来删除简单渐变的 SCSS：

```
@mixin remove_gradient($color:transparent) {
    background-color:$color;
    background-image: none;
    background-repeat: no-repeat;
    filter: none;
} 
```

请注意，您可以将颜色传递给 mixin（在我的情况下需要）：

```
@include remove_gradient(white); 
```

或者让它默认为透明：

```
@include remove_gradient(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-03-04T09:49:28.160

渐变由 bootstrap_theme 文件添加。

我真的不喜欢没有这么多背景图像的想法。所以我的解决方案是，如果您使用的是 SASS 或 LESS 版本的引导程序，只需通过 _theme.scss 中最初存在的以下行覆盖渐变

从

```
.navbar-default {
  @include gradient-vertical($start-color: lighten($navbar-default-bg, 10%), $end-color: $navbar-default-bg);
  @include reset-filter(); // Remove gradient in IE<10 to fix bug where dropdowns don't get triggered
  border-radius: $navbar-border-radius;
  $shadow: inset 0 1px 0 rgba(255,255,255,.15), 0 1px 5px rgba(0,0,0,.075);
  @include box-shadow($shadow);

  .navbar-nav > .active > a {
    @include gradient-vertical($start-color: darken($navbar-default-bg, 5%), $end-color: darken($navbar-default-bg, 2%));
    @include box-shadow(inset 0 3px 9px rgba(0,0,0,.075));
  }
} 
```

至

```
.navbar-default {
  @include gradient-vertical($start-color: $navbar-default-bg, $end-color: $navbar-default-bg);
  @include reset-filter(); // Remove gradient in IE<10 to fix bug where dropdowns don't get triggered

  $shadow: inset 0 0px 0 rgba(255,255,255,.15), 0 0px 0px rgba(0,0,0,.075);
  @include box-shadow($shadow);

  .navbar-nav > .active > a {
    @include gradient-vertical($start-color: $navbar-default-bg, $end-color: $navbar-default-bg);
    @include box-shadow(inset 0 0px 0px rgba(0,0,0,.075));
  }
} 
```

如您所见，起点和终点是相同的值，因此我们永远不会看到渐变效果。简单而干净。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-02-11T02:25:35.937

因为它的价值在于**较少的实现**。引导文件 mixin.less

```
#gradient{
    .remove(@color: transparent) {
        background-color:@color;
        background-image: none;
        background-repeat: no-repeat;
        filter: none;
    }
} 
```

# html - dl 项目的分组

> ID：11333153
> 
> 赞同：2
> 
> 时间：2012-07-04T17:10:14.307
> 
> 标签：html, css, layout

假设你有这个定义列表（“集合”的数量并不重要，只是有多个）。

```
<dl>
  <dt>Authors
  <dd>John
  <dd>Luke

  <dt>Editor
  <dd>Frank
</dl> 
```

我想让这些定义水平。这样你就会得到这样的东西：

```
Authors    Editor
John       Frank
Luke 
```

如果你调整浏览器的大小使其太窄，它会像这样换行：

```
Authors
John
Luke

Editor
Frank 
```

有没有办法以一种好的方式做到这一点？

如果我理解正确，dl 中唯一合法的元素是 dt 和 dd 项，所以我不能将它们包装在 div 元素或类似的东西中。我可以将它们拆分为单独的 dl 列表，但这也不正确，因为它确实应该是一个列表。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T21:26:30.683

没有有效的标签可以将一对 dt 和 dd 标签包装在一起。为 XHTML 2.0 提出了一个`di`元素，但 XHTML 2.0 从未成功。

由于每个项目都有一对内部标签，因此它不像 a `ul`，其中每个`li`标签都可以充当每个列表项内容的内部包装器（在这种情况下充当每个列的包装器）。

基本上，对每一列使用 a`dl`或 a `ul`。语义标记很不错，但没有`di`, 单个标​​记`dl`就不能很好地适应这种类型的布局。

**编辑：**

正如@biziclop 所提到的，一旦[CSS3 多列布局](http://www.w3.org/TR/css3-multicol/)被标准化和[支持](http://caniuse.com/#search=multiple%20column)，就有可能在正确的位置打破列（除了布局方面的选项有限）。最终，代码将如下所示：

```
dl {column-width:100px; column-fill:auto;}
dt {break-before:always;} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T19:41:54.850

我使用一组无序列表解决了这个问题：请在此处查看： [//jsfiddle.net/radialglo/pXLB4/](http://jsfiddle.net/radialglo/pXLB4/)请注意，不需要设置宽度，但出于演示目的，我设置了足够大的宽度，所以它将被推到下一行。拖动小提琴上的 html 视口。

```
<div>
    <ul>Authors
        <li>John</li>
        <li>Luke</li>
    </ul>
    <ul>
    <li>Editor</li>
    <li>Frank</li>
    </ul>
</div>​ 
```

这个造型：

```
div ul{
    float: left;
    list-style: none;
    width: 100px;
    margin-bottom: 1em;
}​ 
```

如果你坚持使用你的语义，我不确定一个可行的解决方案。这是因为每个定义术语及其定义并没有真正以易于样式化的方式**分组？**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T19:44:12.180

让我们来玩一下 css3 不太支持的多列特性：

缺点：

*   需要固定高度
*   不会换行（除非您编写一些媒体查询）

[http://jsfiddle.net/rCQbP/5/](http://jsfiddle.net/rCQbP/5/)

```
dl {
    -webkit-column-width: 100px;
       -moz-column-width: 100px;
            column-width: 100px;
    /* fixed height MUST be used */
    height: 200px;
}

dt ~ dt {
    /* simulate column-break-before: always; */
    margin-top: 1000px;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-05T14:28:57.660

可以使用一些绝对定位和第 n 个类型的选择器（旧浏览器无法识别 - 糟糕！ - 但媒体查询也不是，所以应该降级）：演示：http: [//jsfiddle.net/PrJWJ/6/](http://jsfiddle.net/PrJWJ/6/)

```
dt,dd{margin:0;}

@media (min-width:20em) /* 10em per column */
{
    /* Enable positioning*/
    dl{position:relative;}
    dt,dd{position:absolute;}

    dt{top:0;} /* All terms at the top */
    dd{top:1.3em;}  /* 1st dd under a term at 1.3em (factoring in line spacing) */
    dd+dd{top:2.6em;} /* 2nd dd under a term */

    /* 1st column */
    dt:nth-of-type(1),
    dt:nth-of-type(1)~dd
    {left:0;}

    /* 2nd column */
    dt:nth-of-type(2),
    dt:nth-of-type(2)~dd
    {left:10em;}
}

@media (max-width:19.99em)
{
    /* Space before a new term */
    dd+dt{margin-top:1em;}
} 
```

但是，您需要根据您的最大可能行数和列数来扩展它。

# html - 如何在一个div中垂直对齐一个div？

> ID：11333160
> 
> 赞同：0
> 
> 时间：2012-07-04T17:10:39.533
> 
> 标签：html, css, vertical-alignment

`margin: 0 auto;`只要它们都具有除 以外的宽度属性，就可以在另一个 div 元素中水平对齐 div 元素`auto`，但这不适用于垂直对齐。

**如何在另一个 div 中垂直对齐一个 div？**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-04T17:10:41.670

基于不同的想法，有许多不同的方法。鉴于元素具有固定的高度（以 px、% 或你有什么表示），到目前为止我找到的最佳解决方案是基于以下原则：

给父 div`position: relative;`和子 div `position: absolute;`，以使子绝对相对于父定位。

对于孩子，设置`top`、`bottom`和to 。鉴于孩子也有一个固定的并且小于父母的大小，这将使浏览器陷入不可能的境地。`left``right``0``width``height`

`margin: auto;`作为浏览器的救世主，在孩子身上。浏览器现在可以在所有边上添加足够的边距以让子元素保持其大小，但仍然填充整个父元素，如`top`,`bottom`和`left`设置`right`为`0`。

**太棒了！**元素在父元素中垂直和水平对齐。

**标记**

```
<div class="parent">
    <div class="child"></div>
</div> 
```

**CSS**

```
​.parent {
    width: 200px;
    height: 200px;
    position: relative;
}

.child {
    position: absolute;
    top: 0;
    bottom: 0;
    left: 0;
    right: 0;
    margin: auto;
    width: 100px;
    height: 100px;
} 
```

**一个工作示例**

[http://jsfiddle.net/sg3Gw/](http://jsfiddle.net/sg3Gw/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T17:15:47.747

我发现最容易使用`display:table-cell; vertical-align:middle;`的是[jsfiddle](http://jsfiddle.net/PyNxc/)

```
<style>
.a {
    border:1px solid red;
    width:400px;
    height:300px;
    display:table-cell;
    vertical-align:middle;
}
</style>
<div class="a">
    <div>CENTERED</div>
</div>
​ 
```

# ios - iOS UIpageviewcontroller 作为 uisplitviewcontroller 中的详细信息。忽略后摇手势

> ID：11333162
> 
> 赞同：0
> 
> 时间：2012-07-04T17:10:47.303
> 
> 标签：ios, uisplitviewcontroller, uipageviewcontroller

我正在尝试在 UISplitViewController 的详细信息窗格中实现 UIPageViewController - 允许在日记中分页，例如带有事件的日期表，同时仍然在主视图中显示菜单项表。

一切正常，但前一天的滑动手势被忽略。

如果我将其更改为模态序列，则没有问题。

我认为问题是由于使用 instanceViewControllerWithIdentifier 呈现数据视图控制器：

```
SessionDataViewController *dataViewController = [storyboard instantiateViewControllerWithIdentifier:@"SessionDataViewController"];    
dataViewController.dataObject = [self.pageData objectAtIndex:index];
return dataViewController; 
```

任何关于如何让 DataViewController 以与在模式视图中相同的方式在详细信息窗格中接受页面返回滑动手势的建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T17:55:51.020

这个问题听起来像是由 UISplitViewController 引起的。它有一个手势识别器，用于显示和隐藏 masterViewController，从而阻止 UIPageViewController 获取它。您只需要使用以下行禁用 UISplitViewController 上的手势识别器。

`[splitViewController setPresentsWithGesture:NO];`

# c# - 具有 2 个实现相同接口的类的 IOC/DI

> ID：11333164
> 
> 赞同：11
> 
> 时间：2012-07-04T17:10:56.087
> 
> 标签：c#, .net, design-patterns, dependency-injection, inversion-of-control

我对实现相同接口和依赖注入的 2 个类的场景感到困惑。

```
public interface ISomething
{
  void DoSomething();
}

public class SomethingA : ISomething
{
  public void DoSomething()
  {

  }
}

public class SomethingAB : ISomething
{
  public void DoSomething()
  {

  }
}

public class Different
{
  private ISomething ThisSomething;

  public Different(ISomething Something)
  {  
    ThisSomething = Something;
  }
} 
```

我看到网上的例子说这是有效的，但你一次只能使用一个类。因此，如果应用程序在 SiteA 运行，您告诉 IOC 使用 SomethingA，但如果它在 SiteB 运行，您告诉它使用 SomethingAB。

因此，拥有一个具有 2 个实现 1 个接口的类的应用程序并尝试使用这两个类是否被认为是不好的做法？如果不是，您如何告诉国际奥委会在相关情况下使用哪个类？

**更新：为了更好地解释它，我将使用 Ninject 的示例：**

```
public class Samurai 
{
    private IWeapon Weapon;

    public Samurai(IWeapon weapon) 
    {
        this.Weapon = weapon;
    }
}

public class Sword : IWeapon
{
...
}

public class Gun : IWeapon
{
...
}

public class WarriorModule : NinjectModule
{
    public override void Load() 
    {
        this.Bind<IWeapon>().To<Sword>();
        this.Bind<IWeapon>().To<Gun>();  //Just an example
    }
} 
```

所以现在你有 2 个使用 IWeapon 的类。根据您的应用程序中的某些内容或上下文，您希望武士有时拥有一把剑或在其他地方拥有一把枪。你如何做到这一点？你如何处理那种“如果”的情况？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-04T17:29:41.600

在一般情况下，我认为这不是一个不好的做法。在某些情况下，您可能需要在同一应用程序中对同一接口进行不同的实现，并根据上下文使用一种或另一种实现

至于如何配置您的 DI 以启用此方案，当然，这将取决于您的 DI :-) 有些可能不支持，有些可能不支持，有些可能部分支持，等等。

例如，使用[Ninject](http://www.ninject.org/)，您可以拥有以下类：

```
public interface ISomething
{
}

public class SomethingA : ISomething
{
}

public class SomethingB : ISomething
{
}

public class Foo
{
    public Foo(ISomething something)
    {
        Console.WriteLine(something);
    }
}

public class Bar
{
    public Bar(ISomething something)
    {
        Console.WriteLine(something);
    }
} 
```

然后在配置内核时使用命名绑定：

```
// We create the kernel that will be used to provide instances when required
var kernel = new StandardKernel();

// Declare 2 named implementations of the same interface
kernel.Bind<ISomething>().To<SomethingA>().Named("somethingA");
kernel.Bind<ISomething>().To<SomethingB>().Named("somethingB");

// inject SomethingA into Foo's constructor
kernel.Bind<Foo>().ToSelf().WithConstructorArgument(
    "something", ctx => ctx.Kernel.Get<ISomething>("somethingA")
);

// inject SomethingB into Bar's constructor
kernel.Bind<Bar>().ToSelf().WithConstructorArgument(
    "something", ctx => ctx.Kernel.Get<ISomething>("somethingB")
); 
```

现在，当您请求它的一个实例时`Foo`，它将注入`SomethingA`它的构造函数，而当您请求它的一个实例时`Bar`，它将注入`SomethingB`它：

```
var foo = kernel.Get<Foo>();
var bar = kernel.Get<Bar>(); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-04T17:18:38.353

在这种情况下，我与 Unity 和 spring 一起工作，我认为兴趣在于包之间的弱耦合，即类，更改服务或入口点的能力是 ioc 的结果。

ioc 为服务的使用提供了灵活性，或者从服务实现相同接口时开始，

如果使用服务 A 服务 B 和服务在服务包 A 中，而包 B 在 B 中。包 A 对包 b 没有引用，但服务 A 对包含接口的包有引用。因此，我们得出结论，包 A 和包 b 之间存在弱耦合。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-04T17:30:54.677

将多个实现映射到同一个接口并不是很糟糕的做法，但这不是最常见的使用模式。

您没有指定特定的 DI 工具，但如果您使用 Unity，则可以使用命名实例执行此操作。请参见此处：[Unity - 如何为同一类型使用多个映射并注入到对象中](https://stackoverflow.com/questions/5440888/unity-how-to-use-multiple-mappings-for-the-same-type-and-inject-into-an-object)

# java - 无法在 JAXB 生成的模型中对空值调用“get”

> ID：11333165
> 
> 赞同：0
> 
> 时间：2012-07-04T17:11:00.960
> 
> 标签：java, xml, jaxb, xml-parsing, nullpointerexception

**我对 JAXB 不太熟悉，但这是我所拥有的上下文，请阅读所有内容以了解。**

**1.**我正在执行以下操作以使用此 XML 中的 JAXB 获取值...

**XML 文档片段（原始）：**

```
 <Request deploymentMode="production">
        <OrderRequest>
             <OrderRequestHeader orderID="12345" orderDate="2012-07-04" type="new">
                 <Total>
                     <Money currency="USD">200.0</Money>
                 </Total>
                 <ShipTo>
                     <Address>
                         <Name xml:lang="">Test</Name>
                         <PostalAddress name="default">
                             <DeliverTo/>
                             <Street>Value 1</Street>
                             <City>Value 2</City>
                             <State>Value 3</State>
                             <PostalCode>302010</PostalCode>
                             <Country isoCountryCode="US">USA</Country>
                         </PostalAddress>
                     </Address>
                 </ShipTo> 
```

因此，我想要的值是`State`from `PostalAddress`，我使用以下代码：

```
String state = xml.getRequest().getOrderRequest().getOrderRequestHeader().getShipTo().getAddress().getPostalAddress().getState();
//This will return "Value 3" 
```

一切都很好。

**2.**问题从这里开始，我会做和上面一样的事情，但是现在使用这个XML......

**XML 文档片段（其他）：**

```
 <Request deploymentMode="production">
        <OrderRequest>
             <OrderRequestHeader orderID="12345" orderDate="2012-07-04" type="new">
                 <Total>
                     <Money currency="USD">200.0</Money>
                 </Total>
                 <ShipTo>
                     <Address>
                         <Name xml:lang="">Test</Name>
                     </Address>
                 </ShipTo> 
```

好吧，我知道该值不存在，但我不想对我的代码进行任何更改并仍在使用它：

```
String state = xml.getRequest().getOrderRequest().getOrderRequestHeader().getShipTo().getAddress().getPostalAddress().getState(); 
```

上面的代码将产生一个`NullPointerException`并停止该过程。我需要的是不要停止该过程，因为这不是我从 XML 中提取的唯一值（这只是我正在处理的一个示例）。所以，如果找不到该值，那么我希望我的`state`变量是`null`自动的。

***问：**如果找不到值，有没有办法不产生异常并使我的字符串变量`state`？`null`*

* * *

**PS。**一个可能的解决方案可能是做这样的事情：

```
//Fill the entity
PostalAddressType p = xml.getRequest().getOrderRequest().getOrderRequestHeader().getShipTo().getAddress().getPostalAddress();
//Variable for state
String state = null;
//Evaluate if it is null or not
if(p != null)
    //Capture the value if not null
    state = p.getState(); 
```

*但我不喜欢为`if`我的 XML 的每个实体做一个声明。正如我所说，我希望在不修改代码的情况下实现自动化，我不知道是否有一些 JAXB 配置或为此做些什么。*

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T21:05:05.613

[**JAXB (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)是用于将对象与 XML 相互转换的 Java 标准。有多种开源实现。JAXB 使用的对象是 POJO（普通的旧 Java 对象）。这些类中没有任何类型的 XML 逻辑。由于 JAXB 旨在与现有类一起使用，因此可能会制定一些逻辑来支持您的用例。下面是几个选项。

**选项 #1 - 延迟加载 PostalAddress 属性（不推荐）**

***地址***

您可以向该方法添加逻辑以`getPostalAddress()`实例化`PostalAddress`if 属性的实例`null`。

```
package forum11333165;

import javax.xml.bind.annotation.*;

@XmlRootElement(name="Address")
public class Address {

    private String name;
    private PostalAddress postalAddress;

    @XmlElement(name="Name")
    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    @XmlElement(name="PostalAddress")
    public PostalAddress getPostalAddress() {
        if(null == postalAddress) {
            postalAddress = new PostalAddress();
        }
        return postalAddress;
    }

    public void setPostalAddress(PostalAddress postalAddress) {
        this.postalAddress = postalAddress;
    }

} 
```

***邮寄地址***

```
package forum11333165;

import javax.xml.bind.annotation.XmlElement;

public class PostalAddress {

    private String state;

    @XmlElement(name="State")
    public String getState() {
        return state;
    }

    public void setState(String state) {
        this.state = state;
    }

} 
```

***演示***

下面的演示代码演示了您将能够

```
package forum11333165;

import java.io.StringReader;
import javax.xml.bind.*;

public class Demo {

    public static void main(String[] args) throws Exception {
        JAXBContext jc = JAXBContext.newInstance(Address.class);

        StringReader xml = new StringReader("<Address><Name>Test</Name></Address>");
        Unmarshaller unmarshaller = jc.createUnmarshaller();
        Address address = (Address) unmarshaller.unmarshal(xml);

        System.out.println(address.getPostalAddress().getState());

        Marshaller marshaller = jc.createMarshaller();
        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        marshaller.marshal(address, System.out);
    }

} 
```

***输出***

下面是运行演示代码的输出。如您所见，我们得到了`null`我们正在寻找的值，但输出包含一个额外的`PostalAddress`方法。

```
null
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<Address>
    <Name>Test</Name>
    <PostalAddress/>
</Address> 
```

**选项 #2 - 如果属性为 Null，则返回一个新实例（不推荐）**

***地址***

```
package forum11333165;

import javax.xml.bind.annotation.*;

@XmlRootElement(name="Address")
@XmlAccessorType(XmlAccessType.FIELD)
public class Address {

    @XmlElement(name="Name")
    private String name;

    @XmlElement(name="PostalAddress")
    private PostalAddress postalAddress;

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public PostalAddress getPostalAddress() {
        if(null == postalAddress) {
            return new PostalAddress();
        }
        return postalAddress;
    }

    public void setPostalAddress(PostalAddress postalAddress) {
        this.postalAddress = postalAddress;
    }

} 
```

***输出***

我们可以使用与上一个选项相同的演示代码来生成新的输出。get 仍然有效，我们没有得到额外的`PostalAddress`方法。不利的一面是我们认为我们设置的状态没有被捕获。

```
null
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<Address>
    <Name>Test</Name>
</Address> 
```

**选项 #3 - 在调用 Get On 之前检查值不为空**

这个选项需要做更多的工作，但最终会使您的应用程序更易于维护。

# haskell - Yampa 中反应（感觉）功能的时差

> ID：11333166
> 
> 赞同：7
> 
> 时间：2012-07-04T17:11:09.270
> 
> 标签：haskell, functional-programming, reactive-programming, yampa

我目前正在学习 Haskell 和 Yampa，并且对反应函数有疑问。

```
reactimate :: IO a -- init
      -> (Bool -> IO (DTime, Maybe a)) -- sense
      -> (Bool -> b -> IO Bool) -- actuate
          -> SF a b -- signal function
      -> IO () 
```

正如您在类型签名中看到的，感知函数的部分输出是函数的当前调用和上一次调用之间的时间差。在我看到的例子中，这个时间差是“手动”计算的，使用 IORef 来保持前一次调用的值。

您必须使用外部状态来跟踪时间差，这似乎很奇怪，为什么不在 reactimate 函数中进行此计算？IORef 是处理它的好方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T15:26:06.103

我认为 reactimate 不计算时间增量本身的原因是这会硬编码一个特定的时间概念。想象一下，您想模拟十年或类似的投资组合风险，您的时间增量分辨率应该是一天。话虽这么说，我同意 Ioref 的东西看起来有点 hacky，尽管我在我的代码中使用了相同的技术。

# java - Java读取httprequest流来处理json是乱码

> ID：11333168
> 
> 赞同：1
> 
> 时间：2012-07-04T17:11:20.690
> 
> 标签：java, json, json-simple

```
JSONObject obj = new JSONObject();

br = new BufferedReader(new InputStreamReader(conn.getInputStream()));
obj.put("auth key", br.readLine());

System.out.println(obj.toString());

br.close();

return "test"; 
```

我在使用此代码时遇到的问题是，在通过谷歌阅读后输出的 json 起初是乱码`"{"auth key":"ï»¿"}"`，我认为这是因为它是用 gzip 压缩的，但是在使用 fiddler 检查标头后没有内容编码。

任何关于此事的想法都会很好，非常感谢

# c++ - 错误：_BLOCK_TYPE_IS_VALID

> ID：11333171
> 
> 赞同：0
> 
> 时间：2012-07-04T17:11:38.127
> 
> 标签：c++

在执行下面的代码时出现错误：_BLOCK_TYPE_IS_VALID。我认为这与将另一个对象添加到向量有一些共同点，但我不知道我在哪里犯了错误。我不添加类代码，因为该程序的先前版本是在没有使用矢量的情况下编写的，并且运行良好。如果有必要，我可以将变量名称翻译成英文或解释使用哪个变量。

```
#include "stdafx.h"
#include "CStop.h"
int _tmain(int argc, _TCHAR* argv[])
{
vector<CStop>Stops;

string* array= NULL;
string name,text;
int length,time,howMany,n;

cout<<"How many stops? "<<endl;
cin>>n;

for(int i = 0; i < n; i++)
{
    cout<<"Type name, length , time, how many stops"<<endl;
    cin>>name>>length>>time>>howMany;
    if(howMany> 0)
    {
        cout<<"Type stops names"<<endl;
        array= new string[howMany];
        for(int i = 0; i<howMany;i++)
        {
            cin>>text;
            array[i] = text;
        }
    }
    CStops temp(name, length,time,howMany,array);
    Stops.push_back(temp);

    if(howMany> 0) delete[] array;
}

for(int i=0;i<Stops.size();i++)
{
    cout<<Stops[i].Info()<<endl;
}
return 0;
} 
```

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T19:57:58.557

我解决了我重写类代码的问题。我在课堂上添加了对向量的支持。我仍然不知道为什么当类在数组上运行时我得到这个奇怪的错误但是当它不是一切正常时。如果有人能告诉我这个错误的含义以及如何避免它，我将不胜感激。

# asp.net-mvc-3 - 实体框架——加载时过滤数据

> ID：11333181
> 
> 赞同：0
> 
> 时间：2012-07-04T17:12:41.290
> 
> 标签：asp.net-mvc-3, entity-framework-4.1

我正在构建一个带有表单身份验证和单个分层实体的 MVC3 应用程序。该实体有一个 Region 对象作为“根”以及其他几个对象。它看起来像：

区域->语言->objectA->objectB 区域-
>应用程序->…。

每个用户（管理员除外）都与单个区域相关联。我想根据用户的区域限制加载到实体的数据。我对EF不太熟悉。这是合适的还是有更好的方法？我将如何实施最佳方法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T17:18:20.443

您当然可以过滤通过实体框架返回的数据。代码看起来像这样：

```
using (MyContext ctx = new MyContext())
{
    var filtered = (from r in ctx.Regions where SOME_CONDITIONS select r);
    // Do stuff with filtered (which is an IEnumerable<Region>)
} 
```

请注意，您可能需要用于`Include`加载相关对象，例如

```
ctx.Regions.Include("Language").Include("Application") 
```

请参阅[http://msdn.microsoft.com/en-us/library/bb896272.aspx](http://msdn.microsoft.com/en-us/library/bb896272.aspx)

# wordpress - 联系表格 7 - 在电子邮件发送上添加自定义功能

> ID：11333183
> 
> 赞同：9
> 
> 时间：2012-07-04T17:13:00.483
> 
> 标签：wordpress, contact-form-7

只是玩弄`Wordpress / Contact Form 7`。

是否可以在成功的电子邮件发送事件中添加自定义 javascript 函数？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-07-04T17:19:27.747

在联系表单配置页面底部的附加设置中写入：

```
on_sent_ok: "some js code here" 
```

更新：您可以使用它来调用这样的函数：

```
on_sent_ok: "your_function();" 
```

或者写一些代码（这个重定向到感谢页面）：

```
on_sent_ok: "document.location='/thank-you-page/';" 
```

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2015-03-03T21:59:45.833

Contact Form 7 会发出许多 Javascript 事件，这些事件会冒泡到文档对象。在 4.1 版中，它们可以在 contact-form-7/includes/js/scripts.js 中找到。如果您使用的是 jQuery，您可以像这样访问这些事件：

```
$(document).on('spam.wpcf7', function () {
    console.log('submit.wpcf7 was triggered!');
});

$(document).on('invalid.wpcf7', function () {
    console.log('invalid.wpcf7 was triggered!');
});

$(document).on('mailsent.wpcf7', function () {
    console.log('mailsent.wpcf7 was triggered!');
});

$(document).on('mailfailed.wpcf7', function () {
    console.log('mailfailed.wpcf7 was triggered!');
}); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-08-17T14:18:33.787

试试这个：

```
$( document ).ajaxComplete(function( event,request, settings ) {
   if($('.sent').length > 0){
       console.log('sent');
   }else{
       console.log('didnt sent');
   }

}); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-06-10T10:30:51.617

**示例 1：**

```
on_sent_ok: "location = 'http://mysite.com/thanks/';" 
```

**示例 2：** 在表单脚本中：

```
<div id="hidecform">
<p>You name<br />
    [text* your-name] </p>
...
</div> 
```

然后在“其他设置”下的管理页面底部放置以下内容：

```
on_sent_ok: "document.getElementById('hidecform').style.display = 'none';" 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-10-23T14:03:12.520

请注意，不推荐使用 on_sent_ok 。

联系表格 7 现在使用事件侦听器，如下所示；

```
<script type="text/javascript">
  document.addEventListener( 'wpcf7mailsent', function( event ) {
      if ( '11875' == event.detail.contactFormId ) { // if you want to identify the form
       // do something
      }
  }, true );
</script> 
```

然后将其添加到 wp_footer 操作中。

像这样;

```
add_action( 'wp_footer', 'wp1568dd4_wpcf7_on_sent' );

function wp1568dd4_wpcf7_on_sent() { 
  // the script above
} 
```

# mysql - mysql中的存储过程语法有错误

> ID：11333186
> 
> 赞同：0
> 
> 时间：2012-07-04T17:13:21.903
> 
> 标签：mysql

我的存储过程如下所示，

```
select T.TranNo,(Select Accountname from Accountable where AccountCode =T.tranAccountCode) particulars,TransactionType = case T.cate
when 'f' then 'Cash Voucher'
when 'h' then 'cash receipt'
when 'n' then 'cash receipt'
when 'o' then 'cash sale'
else 'unknowen'
end,
case when (T.TranAmount<0) then (T.TransAmount)*(-1)
End AS Credit,
case when (T.TranAmount>0) then (T.TransAmount)
end as Debit
from TranTable T where (T.TransAccountCode='1234') and (T.cate='k') 
```

语法到底是什么……？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T17:24:48.257

我将 移至`TransactionType =` 案例陈述的末尾。

```
select T.TranNo,(Select Accountname from Accountable where AccountCode =T.tranAccountCode) particulars, 
  case T.cate
    when 'f' then 'Cash Voucher'
    when 'h' then 'cash receipt'
    when 'n' then 'cash receipt'
    when 'o' then 'cash sale'
    else 'unknowen'
  end as TransactionType,
  case 
   when (T.TranAmount<0) then (T.TransAmount)*(-1)
  End AS Credit,
  case when (T.TranAmount>0) then (T.TransAmount)
  end as Debit
from TranTable T where (T.TransAccountCode='1234') and (T.cate='k') 
```

# trigger.io - 什么时候会触发初始的 connectionStateChange？

> ID：11333192
> 
> 赞同：1
> 
> 时间：2012-07-04T17:14:03.290
> 
> 标签：trigger.io, forge

从[文档](http://docs.trigger.io/en/v1.3/modules/event.html#connectionstatechange-addlistener)：

> connectionStateChange.addListener
> 
> 一旦我们确定连接状态，该事件也将在应用启动期间触发一次。

我遇到了一个问题，在某些情况下，侦听器绑定得太晚并且错过了连接状态更改事件的初始触发。

我可以在什么特定时间点开始期待事件被触发？我应该从什么时候开始收听以确保不会错过？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T08:46:23.173

如果将绑定代码放在任何回调之外，则应始终在初始触发器之前绑定到事件：

```
// OK
forge.event.connectionStateChange.addListener(function () { ... });

$(function () {
  // not necessarily OK
  forge.event.connectionStateChange.addListener(function () { ... });
}); 
```

我也为我们创建了一个故事来立即解雇迟到的听众，以避免这个问题。

# php - Gd 库图像样式 imagettftext

> ID：11333196
> 
> 赞同：0
> 
> 时间：2012-07-04T17:14:16.660
> 
> 标签：php, gd

如何制作像这样的图像？我只是想学习如何使用 GD 库获得这样的输出，谢谢你们的帮助..

![在此处输入图像描述](../Images/05bbe42f3db46f945afdf2c70329a077.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T17:22:10.810

这是一个例子：

```
header('Content-Type: image/png'); // setting the content-type

$file   = "yourimage.png";
$image  = imagecreatefrompng($file); // creating the image
$font   = "YourFont.ttf";
$size   = 15; //pixels
$color  = imagecolorallocate($image, 255, 255, 255); //white color
$text   = "Your text here"

imagettftext($image, 15, 0, 20, 40, $color, $font, $code); // adding the text

imagepng($image); // outputting the image 
```

更多见[`imagettftext()`](http://php.net/manual/en/function.imagettftext.php)。

**编辑**：使用多个示例`imagettftext()`：

```
header('Content-Type: image/png'); // setting the content-type

$file   = "yourimage.png";
$image  = imagecreatefrompng($file); // creating the image
$font   = "YourFont.ttf";
$size   = 15; //pixels
$color  = imagecolorallocate($image, 255, 255, 255); //white color
$text       = "Your text here"

imagettftext($image, 15, 0, 20, 40, $color, $font, $code); // adding the text

$text = "Text 2";
imagettftext($image, 15, 0, 25, 45, $color, $font, $code); // adding the text

$text = "Text 3";
imagettftext($image, 15, 0, 30, 50, $color, $font, $code); // adding the text

imagepng($image); // outputting the image 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T17:22:55.840

这是你的代码，你可以很容易地在谷歌上找到它。

```
<?php
    header ("Content-type: image/png");
    $string = "your text"; // Change this text
    $font = 4; // try changing this as well
    $width = imagefontwidth($font) * strlen($string) ;
    $height = imagefontheight($font) ;
    $im = imagecreatefrompng("/path/to/yourimagefile");
    $x = imagesx($im) - $width ;
    $y = imagesy($im) - $height;
    $backgroundColor = imagecolorallocate ($im, 255, 255, 255);
    $textColor = imagecolorallocate ($im, 0, 0,0);
    imagestring ($im, $font, $x, $y,  $string, $textColor);
    imagepng($im);
?> 
```

# django - django 的注释字段存储在模型实例上的什么位置？

> ID：11333197
> 
> 赞同：3
> 
> 时间：2012-07-04T17:14:19.463
> 
> 标签：django, django-models, django-aggregation

我正在这样做：

```
p = MyModel.objects.filter(user__username="me").annotate(friend_count=Count(friends)) 
```

当我看：

```
p[0]._meta.get_all_field_names() 
```

它返回模型上定义的所有内容，但不返回带注释的字段“friend_count”

有没有可以用来查看特定模型实例的所有带注释字段的函数？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2018-03-23T09:56:22.823

用这个：

```
p.query.annotations.keys() 
```

它将给出所有注释字段的列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T18:10:11.603

注释只是存储为普通实例属性（就像 ORM 字段 FWIW 的值一样）。您可以使用`dir(my_model_instance)`查看所有属性（类和实例）名称，或`my_model_instance.__dict__.keys()`仅查看普通实例属性。

# java - Java归档文件结构规范在哪里？

> ID：11333208
> 
> 赞同：7
> 
> 时间：2012-07-04T17:15:44.057
> 
> 标签：java, oracle, jakarta-ee, war, ear

我完全迷惑了，我不能（很容易！）找到 Oracle**最新**的 JAR、WAR 和 EAR 文件结构参考规范。我的意思是：

罐子

*   JAR 的文件结构
*   内容和结构`MANIFEST-INF`
*   最新版本的架构`MANIFEST.MF`

战争

*   WAR 的文件结构
*   内容和结构`MANIFEST-INF`
*   内容和结构`WEB-INF`
*   最新版本`web.xml`或任何其他配置文件的架构

耳朵

*   EAR 的文件结构
*   最新版本`application.xml`和任何其他配置文件的架构

我不仅找不到任何这些项目，我什至在 Oracle 站点 (docs.oracle.*) 上都找不到标题为“WAR 文件规范”、“EAR 文件规范”或类似内容的内容。我在这里完全错过了什么吗？

我找到的搜索结果是针对**servlet**规范和*旧*版本的 servlet（2.2 等）。

**我正在寻找确切的 URL，这些 URL 可以*准确地*告诉我我需要如何根据*最新*规范来构建和配置我的 JAR、WAR 和 EAR。**提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-04T17:18:53.727

[打包应用程序 - Java EE 6 教程](http://docs.oracle.com/javaee/6/tutorial/doc/bnaby.html)是您想要的吗？

**更新**

我通常不愿发布从 Wikipedia 页面找到的链接，但其中一些看起来像最新的规范 (Java 6) 并且非常详细。

*   [罐](http://en.wikipedia.org/wiki/JAR_%28file_format%29)
    *   [概述](http://docs.oracle.com/javase/6/docs/technotes/guides/jar/jar.html)
    *   [文件规范](http://docs.oracle.com/javase/6/docs/technotes/guides/jar/index.html)
*   [战争](http://en.wikipedia.org/wiki/WAR_%28Sun_file_format%29)
    *   [Servlet 2.5 WAR 模式](http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd)
*   [耳朵](http://en.wikipedia.org/wiki/EAR_%28file_format%29)
    *   [包装应用](http://docs.oracle.com/javaee/6/tutorial/doc/bnaby.html)（同上）

[Java EE : XML Schemas for Java EE Deployment Descriptors](http://java.sun.com/xml/ns/javaee/)标记为 2009 年 12 月 10 日，但声明它是最新版本。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-06T22:30:34.640

（我假设您的意思是 META-INF 而不是 MANIFEST-INF ...）

*   罐子：

    最新的是 Java7，请参阅[http://docs.oracle.com/javase/7/docs/technotes/guides/jar/jar.html](http://docs.oracle.com/javase/7/docs/technotes/guides/jar/jar.html)了解上面列出的所有三个：

    *   META-INF的内容和结构：http: [//docs.oracle.com/javase/7/docs/technotes/guides/jar/jar.html#The_META-INF_directory](http://docs.oracle.com/javase/7/docs/technotes/guides/jar/jar.html#The_META-INF_directory)
    *   JAR 的文件结构：http: [//docs.oracle.com/javase/7/docs/technotes/guides/jar/jar.html#Intro](http://docs.oracle.com/javase/7/docs/technotes/guides/jar/jar.html#Intro)
    *   最新版本 MANIFEST.MF 的架构：http: [//docs.oracle.com/javase/7/docs/technotes/guides/jar/jar.html#Section-Specification](http://docs.oracle.com/javase/7/docs/technotes/guides/jar/jar.html#Section-Specification)

*   战争

    *   结构和内容见：http: [//download.oracle.com/otndocs/jcp/servlet-2.4-fr-spec-oth-JSpec/](http://download.oracle.com/otndocs/jcp/servlet-2.4-fr-spec-oth-JSpec/)
    *   web.xml 的架构：http: [//java.sun.com/xml/ns/javaee/web-app_3_0.xsd](http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd)

*   耳朵
    *   结构和内容是上面的联合，部署规范见：http: [//jcp.org/en/jsr/detail ?id=088](http://jcp.org/en/jsr/detail?id=088)
    *   application.xml 的架构：http: [//java.sun.com/xml/ns/javaee/application_6.xsd](http://java.sun.com/xml/ns/javaee/application_6.xsd)

所有这些规范都非常“规范化”，即分布和引用各种其他来源。由于 Oracle 接管了 Sun，所有链接都处于与所有其他 Oracle 文档相同的糟糕状态：-/

希望有帮助。

# iphone - 如何让 UITextView 仅在充满文本时滚动

> ID：11333212
> 
> 赞同：5
> 
> 时间：2012-07-04T17:15:57.207
> 
> 标签：iphone, objective-c, ios, xcode, textview

我有这个`UITextView`很好用，除了，我不能让里面的文本`UITextView`只有在 ' 的大小几乎满了之后才开始滚动`UITextView`， UITextView 有 4 行高，但是一旦我到达第 2 行，第 1 行就是向上推，我不希望视图开始滚动，直到我到达 5 行。`scrollingEnabled = NO`让它根本不滚动，所以这不起作用。

```
UITextView *barf_ = [[UITextView alloc] initWithFrame:CGRectMake(20.0, 310.0, 155, 50)];

barf_.contentInset = UIEdgeInsetsMake(0, 0, 0, 0);

//[barf_ scrollRangeToVisible:NSMakeRange([barf_.text length], 0)];

barf_.layer.cornerRadius = 3.0f;

barf_.layer.borderWidth = 0.5f;

barf_.font = [UIFont fontWithName:@"Helvetica" size:13]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T17:46:55.210

加载 UITextView 时，将 scrollEnabled 设置为 NO。然后将文本视图的委托设置为`self`或其他对象并实现 UITextViewDelegate 方法

```
- (void)textViewDidChange:(UITextView *)textView 
```

每当用户对视图内的文本进行更改时，都会调用此方法。在这个方法中，你需要弄清楚你的文本有多大，以及它是否超出了文本视图的范围。如果是这样，您启用滚动。使用此方法：

```
- (CGSize)sizeWithFont:(UIFont *)font constrainedToSize:(CGSize)size lineBreakMode:(UILineBreakMode)lineBreakMode 
```

这是 NSString 上的 UIKit 类别方法。它返回一个 CGSize，它将告诉您调用它的任何文本字符串的高度。在你的情况下，它会像

```
CGSize textSize = [textView.text sizeWithFont:textView.font
                            constrainedToSize:CGSizeMake(textView.frame.size.width, MAXFLOAT)
                                lineBreakMode:UILineBreakModeWordWrap];
if (textSize.height > textView.frame.size.height) {
    textView.scrollEnabled = YES;
} else {
    textView.scrollEnabled = NO;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T03:13:44.187

我找到了答案，正如其他有类似问题的人提到的那样，使用小的 textView，**它会自动在底部添加 32 填充。**

一个简单的解决方法是添加`YourTextView.contentInset = UIEdgeInsetsMake(0, 0, 0, 0);`内部`shouldChangeTextInRange`方法，这解决了我的问题！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-10-15T14:12:01.973

设置`contentInset`可能有助于文本在`UITextView`. 但是，它无助于解决`UITextView`尽管没有更多文本可查看但启用滚动的问题。

同样，诸如此类的方法`sizeWithFont`也有局限性。正如 Mike Weller 的优秀博客系列[iOS Development: You're Doing It Wrong](http://doing-it-wrong.mikeweller.com)中所解释的，对于 a应该有`NSString`多大，并不是一个好对象。`UIView`许多`UIView`子类（例如`UILabel`、`UIButton`等）都有插图和其他在调整大小时必须考虑的因素。`UITextLabel`也不例外。

Mike Weller 关于这个主题的具体条目是：

[你做错了#2：使用 -[NSString sizeWithFont:...] 调整标签大小](http://doing-it-wrong.mikeweller.com/2012/07/youre-doing-it-wrong-2-sizing-labels.html)

iOS 7 向我们承诺了更复杂的文本处理`UITextView`，例如`textContainerInset`. 但在此期间该怎么办？

好吧，首先我们知道这`UITextView`是`UIScrollView`. 因此，如果`contentSize`大于视图的`bounds`属性，则滚动视图将滚动以便我们可以看到更多内容，这是一个黄金法则。

再次检查也`contentSize`不起作用`bounds`，因为我们知道它`UIScrollView`已经在根据文本计算它是否应该滚动，它给了我们错误的答案。

这就是任意调整值来救援的地方！对我来说，这个值是`17.f`. 对你来说——取决于你的字体——它可能会有所不同。然后我们控制并决定是否应该允许滚动视图滚动：

```
static const CGFloat kArbritaryHeight = 17.f;
CGFloat adjustedContentHeight = myTextView.contentSize.height - kArbritaryHeight;
CGFloat boundsHeight = CGRectGetHeight(myTextView.bounds);
BOOL tooMuchContent = adjustedContentHeight > boundsHeight;

if (tooMuchContent)
{
    myTextView.scrollEnabled = YES;
}
else
{
    myTextView.scrollEnabled = NO;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-04T17:43:32.577

您可以使用该`sizeWithFont:constrainedToSize:lineBreakMode:`方法检查您的字符串是否会实际呈现大于您的文本视图，并查看是否需要启用滚动。但是，您必须在设置滚动视图中的文本时调用它。

前任：

```
CGSize barfStringSize = [barfString sizeWithFont:[barf_ font] 
                               constrainedToSize:CGSizeMake(barf_.bounds.size.width, MAXFLOAT) 
                                   lineBreakMode:UILineBreakModeWordWrap]
[barf_ setScrollEnabled:barfStringSize.height > barf_.bounds.size.height] 
```

# android - Android RelativeLayout 奇怪的行为

> ID：11333214
> 
> 赞同：1
> 
> 时间：2012-07-04T17:16:13.447
> 
> 标签：android, android-relativelayout

我正在学习相对布局并编写了一个小测试布局来模拟登录页面：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
            android:layout_height="match_parent"
            android:layout_width="match_parent">
    <TextView android:id="@+id/labelUsername"
          android:layout_height="wrap_content"
          android:layout_width="wrap_content"
          android:text="username:"
          android:layout_centerVertical="true"/>
    <EditText android:id="@+id/txtUsername"
          android:layout_height="wrap_content"
          android:layout_width="wrap_content"
          android:hint="input username here"
          android:layout_toRightOf="@id/labelUsername"
          android:layout_alignBaseline="@id/labelUsername"/>
    <TextView android:id="@+id/labelPassword"
          android:layout_height="wrap_content"
          android:layout_width="wrap_content"
          android:text="password:"
          android:layout_below="@id/txtUsername"
          android:layout_alignParentLeft="true"/>
    <EditText android:id="@+id/txtPassword"
          android:layout_height="wrap_content"
          android:layout_width="wrap_content"
          android:hint="input password here"
          android:layout_below="@id/txtUsername"
          android:layout_alignLeft="@id/txtUsername"
          android:layout_alignBaseline="@id/labelPassword"/>
</RelativeLayout> 
```

我想要的是把and放在`Username Label`and`Textfield`之上。但是结果被还原了，密码在上面！`Password Label``TextField`

我认为问题在于 中的“android:layout_below”属性`labelPassword`，如果我将其设置为 below `labelUsername`，它可以工作，但是因为`textfield`比标签大得多，所以`textfields`在这种情况下两者都是重叠的。所以我试着做`labelPassword`下面的`txtUsername`，但它表现得很奇怪，我不明白。

顺便说一句，当我使用相对布局构建布局时有什么指导方针吗？

我应该先放什么？

最后我应该放什么？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T17:51:01.820

要回答您的具体问题，这是因为`android:layout_centerVertical="true"`您将规则应用于 labelUsername。

当您引用的元素居中时，相对位置似乎效果不佳。在这种情况下，它也没有任何意义，因为您可能希望整个表单居中，而不仅仅是用户名字段，然后将密码放在下面。

您可以将元素放在包含元素（另一个相对布局、线性布局或表格布局等）中并将该元素居中。这样可行。或者要将所有内容居中，您可以添加`android:gravity="center"`到包含布局。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T18:09:43.133

I think what you are trying to achieve here is trying to get both the username and password fields vertically centered, and the password field below the username field. The error in your layout is that you only tell the username textview and edittext to center vertically, and relative layout centeres the layouts after having arranged them. So your username field is centered, while the password is left on top.

What you should do is tell the parent(`RelativeLayout`) to vertically center all its child elements.

For that simply remove this attribute from the "username" `TextView` element :

```
android:layout_centerVertical="true" 
```

And add this attribute to your `RelativeLayout` element:

```
android:gravity="center_vertical" //tells RelativeLayout to vertically center all child elements 
```

In this case i would recommend using a `LinearLayout` but you can continue using `RelativeLayout` for now. Hope it helps!

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-04T17:24:46.390

当您浏览不同的布局时，您会发现如果您习惯于通过 CSS 定位事物，则相对布局感觉最“自然”，例如（使用绝对或相对位置）您在此处描述的情况需要线性或表格布局。表格布局可能是任何“形式”相关的最佳选择。您的表格元素（列）应该有一个 layout_span 属性，该属性详细说明要跨越多少列（它类似于 HTML 中的 colspan）。

我不确定上面的 RelativeLayout 到底出了什么问题，而且我确信通过充分的试验和错误，你可以让它大致完成你想要的，但我强烈建议你使用正确的工具来完成这项工作.

LinearLayout 也是一个很棒的工具（你应该记住它可以无限嵌套）。给你的 Layout 一个 weightSum ，然后每个项目可以有一个 layout_weight （它们应该加起来就是总和），而它们的 layout_width 应该是 0dp （它不直观，但这就是它的工作原理）。这也是让事情放在他们应该在的地方的好方法。

最后，RelativeLayout 中正确顺序的答案是，项目是从下到上按 Z 顺序排列的，因此项目在兄弟顺序中出现的越晚，其 Z 顺序就越高。否则，它们的顺序无关紧要。

# sql - ORDER BY 在 SQL Server 中找到 WHERE LIKE 子句的位置？

> ID：11333215
> 
> 赞同：0
> 
> 时间：2012-07-04T17:16:20.637
> 
> 标签：sql, sql-server, sorting

我有以下 SQL Server 查询：

```
SELECT area 
FROM places 
WHERE REPLACE(area,'-',' ') LIKE REPLACE('%moreto%','-',' ') 
```

这将返回以下结果：

```
Moreton Pinkney, Northamptonshire
South Moreton, Oxfordshire
North Moreton, Oxfordshire
Moreton, Merseyside
Moreton-in-Marsh, Gloucestershire
Moreton Jeffries, Herefordshire
Moreton on Lugg, Herefordshire
Maids' Moreton, Buckinghamshire
Moreton Corbet, Shropshire
Moretonhampstead, Devon 
```

有什么方法可以根据找到的 LIKE 短语的位置对结果进行排序？例如，如果某人正在输入“moreto”，那么他们很可能是从开头而不是中间输入单词。

此外，在任何人提到之前 - 我确实意识到我可以通过删除第一个通配符 (%) 来实现这些结果，但只是想知道是否还有另一种不需要的方法。

非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T17:20:01.677

这应该可以解决问题

```
order by PATINDEX ( '%moreto%' , area ) 
```

[http://msdn.microsoft.com/en-us/library/ms188395.aspx](http://msdn.microsoft.com/en-us/library/ms188395.aspx)

# php - PHP - 我如何替换这个单例？- 自定义 DBAL

> ID：11333217
> 
> 赞同：1
> 
> 时间：2012-07-04T17:16:36.753
> 
> 标签：php, design-patterns, pdo, singleton, dbal

我对设计模式的概念相当陌生，我正在考虑使用依赖注入和多态（因为每个都适用）——但我有很多单例，虽然它们中的大多数可以很容易地改变，但我的 DBAL 不能。

DBAL 创建与数据库的连接的原因是——设置它自己的 PDO 对象。如果我将新的 DBAL 传递给每个需要它的类（很多），我将获得多个不必要的数据库连接。

类是这样的

```
class DB {
    /**
     * Hold the PDO object
     * @var PDO
     */
    private $_db;

    /**
     * Hold the last error messages
     * @var string
     */
    private $_error_message = NULL;

    /**
     * Hold the last error code
     * @var int
     */
    private $_error_code = NULL;

    /**
     * Connects to the database server and selects a database
     *
     * @param string $user MySQL database user
     * @param string $password MySQL database password
     * @param string $name MySQL database name
     * @param string $host MySQL database host
     * @return bool
     */
    public function connect( $user, $password, $name, $host ) {
        // Connect
        try {
            $this->_db = new PDO( "mysql:host=$host;dbname=$name", $user, $password );
        } catch ( PDOException $e ) {
            $this->_error_message = $e->getMessage();
            $this->_error_code = $e->getCode();
            return false;
        }

        return true;
    }

    // ...
}
?> 
```

会有很多类继承这个类——处理这个的最好方法是什么？（我是设计模式的新手）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T18:02:30.820

另一种方法是使用注册表：

```
$db = new DB($host, $user, $pass);
Config::set('db', $db);

// Inside other classes
Config::get($this, 'db'); 
// Passes $this so the config can override the DB for different classes 
```

这里的问题是你最终得到一个`Config`单例。

要真正进行 DI，您基本上需要将对象传递给其他所有对象。

```
$db = new DB($host, $user, $pass);
$user = new User($db);
// Or with a DI container
$c = new Pimple();
$c['db'] = function() {
    return new DB($host, $user, $pass);
}; 
```

但是问问自己为什么不想使用单例。

如果它看起来像单例，闻起来像单例，并且您像使用单例一样使用它，那么单例模式可能最适合这项工作。

[http://pimple.sensiolabs.org/](http://pimple.sensiolabs.org/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T17:23:49.923

添加到类：

```
private function __construct($user, $password, $name, $host ){
  connect( $user, $password, $name, $host );
}

public static function getInstance(){
    if(self::$_db == NULL) self::$_db = new DB;
    return self::$_db;
} 
```

并更改以下内容：

```
// change $_db to be static!
private static $_db = NULL; 
```

# java - 选择使用 XPath 并考虑命名空间和前缀

> ID：11333218
> 
> 赞同：0
> 
> 时间：2012-07-04T17:16:43.193
> 
> 标签：java, xpath

如何在不考虑命名空间和前缀的情况下使用 XPath 选择 XML

试过了

```
/*:OrderPerson/OrderUser/ 
```

但返回错误

```
org.jdom.JDOMException: Invalid XPath expression: .... 
Unexpected ':' 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T19:38:05.800

你可以试试这个表达

```
/*[local-name()='OrderPerson']/OrderUser/ 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-04T18:27:05.100

您的 xpath 查询没有有效的语法尝试使用 /OrderPerson/OrderUser/*

# css - CSS3 过渡：它可以在屏幕上移动东西吗？

> ID：11333220
> 
> 赞同：0
> 
> 时间：2012-07-04T17:17:04.633
> 
> 标签：css

即使不是所有浏览器都支持，是否可以使用 CSS3 过渡效果在屏幕上垂直或水平移动一条线？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T17:20:36.417

我猜你的意思是CSS3。下面是一个使用动画而不是过渡的示例。

如果是，则使用 CSS3 `transform`&`rotate`以及`animation`（最好使用@keyframes）

看看这个小提琴：http: [//jsfiddle.net/gopi1410/eHZKQ/7/](http://jsfiddle.net/gopi1410/eHZKQ/7/)

# php - SQL 查询 ALL in One - 避免查询次数

> ID：11333221
> 
> 赞同：1
> 
> 时间：2012-07-04T17:17:08.877
> 
> 标签：php, mysql

我一直在尝试根据不同月份的年龄差异生成报告，目前我知道的解决方案是为每个月和每个年龄差异分别进行单独的 sql 查询，从而为每个月创建 4 个不同的 sql 查询。请让我知道是否可以为每个月创建一个 sql 查询，例如

如果我想为 40 岁以上、50-60 岁、60-70 岁和 80 岁以上的年龄差异生成 JAN 报告

我怎样才能把它放在一个 sql 查询中并从中获得四种不同的结果

类似的东西（只是一个想法）

```
Select count(Above 40),count(In Between 50 - 60),count (In B/W 60-70), count(above 80) from users 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T17:29:04.220

我将 IF() 和 SUM() 一起使用，如下所示：

```
SELECT SUM(IF(age >= 40,1,0))               AS older40, 
       SUM(IF(age >= 50 and age <= 60,1,0)) AS between50and60
       SUM(IF(age >= 60 and age <= 70,1,0)) AS between60and70
       SUM(IF(age >= 80,1,0))               AS over80

FROM TABLE 
```

[IF(expr1,expr2,expr3)](http://dev.mysql.com/doc/refman/5.0/en/control-flow-functions.html#function_if)参考MySQL的解释，但基本上expr1是条件，expr2是条件为真时的值，expr3是else。对这些使用 1 和 0 允许 SUM() 对记录进行计数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T17:27:42.767

尝试类似的东西

```
Select Range,Count(*) From
(Select 
Case 
When (Age >= 40 and Age < 50) Then 'Above40'
When (Age >= 50 and Age < 60) Then 'Between 50 - 60'
When (Age >= 60 and Age < 70) Then 'In B/W 60-70'
When (Age > 80) Then 'Above 80'
else 'Not Counted'
end as Range
From Users) as Ranges
Group By Range 
```

猜测守卫，因为您似乎有许多间隙和重叠。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T17:41:22.183

```
select *
from (
(select COUNT(Age) as `c1`, '40-50' AS 'freq' from `Users` WHERE Age BETWEEN 40 AND 50)
UNION ALL
(select COUNT(Age)  as `c2`, '50-60' AS 'freq' from `Users` WHERE Age BETWEEN 50 AND 60)
UNION ALL
(select COUNT(Age)  as `c2`, '60-70' AS 'freq' from `Users` WHERE Age BETWEEN 60 AND 70)
) as aliasquery ; 
```

# xpages - 访问复合数据客户端

> ID：11333223
> 
> 赞同：0
> 
> 时间：2012-07-04T17:17:20.103
> 
> 标签：xpages

我有一个自定义控件，它定义了一个我需要在客户端脚本中访问的属性。

有没有一种简单的方法来访问compositeData 客户端？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T06:48:38.587

正如您自己的评论中所述，您可以使用脚本块生成一段脚本。另一种方法是使用值为#{compositeData.yourpropertyname} 的xp:inputHidden。使用 scriptblock 方法时，请注意生成的代码还会生成一个您可以识别的唯一 var 名称。

这是为了防止同一个自定义控件的多个实例覆盖同一个 javascript 变量。

# java - 基地址默认为 localhost

> ID：11333227
> 
> 赞同：1
> 
> 时间：2012-07-04T17:17:33.010
> 
> 标签：java, playframework, playframework-1.x

我正在尝试使用 @@ 操作来使用相应的控制器检索页面的地址：

```
href="@@{Application.validateEmail(userSession.email,userSession.validationKey)}" 
```

好吧，我确实得到了正确的地址，但是基地址始终是 localhost:9000。我试图将此行添加到我的 application.conf 中`%my-dev-mode.application.baseUrl=http://<my_address>`，但没有任何改变。

有谁知道为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T17:28:27.287

在 Play 1.2.4 中（我仍然相信这是真的），Play 从请求标头中获取了基本 URL。例如，如果您使用`http://127.0.0.1:9000/someroute`而不是访问您的操作，`http://localhost:9000/someroute`您应该在使用 @@ 时在生成的 URL 中获得 127.0.0.1。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T07:34:51.240

你开始你的应用程序`--%my-dev-mode`吗？没有钥匙能用吗？

# iphone - UISearchBarDisplayController 不显示键盘

> ID：11333228
> 
> 赞同：0
> 
> 时间：2012-07-04T17:17:45.660
> 
> 标签：iphone, ios, ios5, uisearchbardisplaycontrol

我做了类似的文本字段搜索。

我首先在其中创建文本字段并添加新的 UISearchViewController

现在我已经设置

```
- (void)textFieldDidBeginEditing:(UITextField *)textField
{
        [textField resignFirstResponder];
    self.searchDisplayController.searchBar.hidden = FALSE;
    [self.searchDisplayController.searchBar becomeFirstResponder];
    [self.searchDisplayController setActive:YES animated:NO];
} 
```

但我只看到没有键盘的搜索显示控制器和黑色背景

当我直接在搜索栏中按下时，它会显示键盘

从上述方法中，我应该如何在 UISearchBarController 中显示键盘

编辑

请从这里下载我的代码[http://sourceforge.net/projects/locationdemo/files/LocationDemo.zip/download](http://sourceforge.net/projects/locationdemo/files/LocationDemo.zip/download)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T16:26:31.830

终于有了我的答案，想和大家分享

```
- (void)textFieldDidBeginEditing:(UITextField *)textField
{
        [textField resignFirstResponder];
        NSTimer *theTimer = [NSTimer scheduledTimerWithTimeInterval:1 target:self selector:@selector(keyboardWasShown:) userInfo:nil repeats:NO];
}

- (void)keyboardWasShown:(NSNotification *)notification
{
    [self.searchDisplayController.searchBar becomeFirstResponder];
    self.searchDisplayController.searchBar.hidden = FALSE;
    CGSize keyboardSize = [[[notification userInfo] objectForKey:UIKeyboardFrameBeginUserInfoKey] CGRectValue].size;
    CGRect aRect = self.view.frame;
    aRect.size.height -= keyboardSize.height;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T17:37:57.920

这条线会产生问题：

```
[textField resignFirstResponder]; 
```

为什么会在那里。如果要显示键盘。此时您不应该调用它。那将关闭或隐藏键盘？

那么你在哪里调用 [textField becomeFirstResponder] ？

您也可以使用这个 UISearchBar，而不是尝试自己编写。

# php - 如何从任何地方运行作曲家？

> ID：11333230
> 
> 赞同：85
> 
> 时间：2012-07-04T17:17:53.853
> 
> 标签：php, composer-php

我刚刚在我的`/usr/bin`文件夹中安装了作曲家，所以当我从那个文件夹运行时，`php composer.phar`我会得到有关作曲家的帮助信息。但是，当我尝试从其他文件夹运行相同的文件时，我得到`Could not open input file: composer.phar`.

如何`php composer.phar`从任何地方拨打电话都没有问题？

* * *

## 回答 #1

> 赞同：118
> 
> 时间：2013-05-18T18:49:47.310

您可以进行[全局安装](https://github.com/composer/composer#global-installation-of-composer-manual)（[存档指南](https://web.archive.org/web/20131106081341/http://getcomposer.org/doc/00-intro.md#globally)）：

> *由于 Composer 使用当前工作目录，因此可以以系统范围的方式安装它。*
> 
> 1.  *更改为路径中的目录，例如* **`cd /usr/local/bin`**
> 2.  *获取作曲家* **`curl -sS https://getcomposer.org/installer | php`**
> 3.  *使 phar 可执行* **`chmod a+x composer.phar`**
> 4.  *切换到项目目录* **`cd /path/to/my/project`**
> 5.  *像往常一样使用 Composer* **`composer.phar install`**
> 6.  *或者，您可以将其重命名* *为**使其更容易***`composer.phar`** ***`composer`***

 ****更新**：有时你不能或不想下载`/usr/local/bin`（有些遇到用户权限问题或访问受限），在这种情况下，你可以试试这个

1.  打开终端
2.  `curl -sS http://getcomposer.org/installer | php -- --filename=composer`
3.  `chmod a+x composer`
4.  `sudo mv composer /usr/local/bin/composer`

**更新 2**：对于 Windows 10 和 PHP 7，我推荐[本教程](https://www.jeffgeerling.com/blog/2018/installing-php-7-and-composer-on-windows-10)（[存档](https://web.archive.org/web/20201130201057/https://www.jeffgeerling.com/blog/2018/installing-php-7-and-composer-on-windows-10)）。就个人而言，我在 PHP 7.3 VC15 x64 Non Thread Safe 版本之前[为 Visual Studio 2017 x64 安装了 Visual C++ Redistributable （在](https://aka.ms/vs/15/release/VC_redist.x64.exe)[PHP for Windows](https://windows.php.net/download/)页面，侧面菜单中检查这两个版本）。仔细阅读，也许 enable-extensions 部分可能会有所不同（`extension=curl`而不是`extension=php_curl.dll`）。像魅力一样工作，祝你好运！

* * *

## 回答 #2

> 赞同：60
> 
> 时间：2012-07-04T17:34:38.473

composer.phar 可以自己运行，不需要在它前面加上`php`. 这应该可以解决您的问题（在 bash 的 $PATH 和 php 的 include_path 不同）。

* * *

## 回答 #3

> 赞同：29
> 
> 时间：2015-03-18T07:58:26.450

# 如何通过终端从任何地方（在 MacOS X 上）运行 Composer

**背景：**

实际上，在 getComposer 网站上，它明确指出，使用以下 curl 命令安装 Composer，

```
curl -sS https://getcomposer.org/installer |php 
```

它肯定会做它打算做的事情。然后它说将**composer.phar**移动到目录**/usr/local/bin/composer**然后 composer 将在全球范围内可用，通过在终端中使用以下命令行！

```
mv composer.phar /usr/local/bin/composer 
```

**问题：**

所以导致我转向谷歌的问题是当我在 Mac OS X 终端中执行上述行时，它说，权限被拒绝。如下所示：

```
mv: rename composer.phar to /usr/local/bin/composer: Permission denied 
```

**回答：**

以下[链接](https://stackoverflow.com/a/14484786/1752988)使我像魅力一样找到了解决方案，对此我深表感谢。我刚刚错过的是上述“移动”命令行之前的**sudo命令。**现在我的移动命令如下：

```
sudo mv composer.phar /usr/local/bin/composer
Password: 
```

它直接提示您进行身份验证并查看您是否被授权。因此，如果您输入有效的密码，那么移动将完成，您可以使用以下行检查是否全局安装了 composer。

```
composer about 
```

我希望这个答案可以帮助您拓宽视野并最终解决您的问题。

干杯!

* * *

## 回答 #4

> 赞同：21
> 
> 时间：2015-04-30T05:11:09.570

首先安装作曲家[安装文档](https://getcomposer.org/doc/00-intro.md#globally)中提到的作曲家。我只是在这里添加以供参考。

`curl -sS https://getcomposer.org/installer | php`

然后将文件移动到“/usr/local/bin”。

`sudo mv composer.phar /usr/local/bin/composer`

尝试运行`composer -V`。如果您得到类似`Composer version`版本号的输出，则成功安装了作曲家。

如果您得到任何类似的输出，请`composer: command not found`使用以下命令为作曲家创建别名。所以它将在全球范围内执行。

**`alias composer='/usr/local/bin/composer'`**

现在，如果您运行`composer -V`意味着您将获得输出，`Composer Version`其后跟版本号。

希望这会对某人有所帮助。

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2017-02-11T11:55:08.687

只需将其移动到`/usr/local/bin`文件夹并删除扩展名

```
sudo mv composer.phar /usr/local/bin/composer 
```

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2015-10-05T08:45:19.390

只需运行此命令即可全局安装 composer

```
curl -sS https://getcomposer.org/installer | sudo php -- --install-dir=/usr/local/bin --filename=composer 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2017-01-12T08:44:28.657

对于 MAC 和 LINUX，请使用以下过程：

将 composer.phar 所在的目录添加到您的 PATH 中：

```
export PATH=$PATH:/yourdirectory 
```

然后将 composer.phar 重命名为 composer：

```
mv composer.phar composer 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2015-03-10T08:33:20.123

您可以进行简单的全局安装以从任何地方运行它

```
curl -sS https://getcomposer.org/installer | php
mv composer.phar /usr/local/bin/composer 
```

[https://getcomposer.org/doc/00-intro.md#globally](https://getcomposer.org/doc/00-intro.md#globally)网站推荐这种方式。在 Ubuntu 14.04 上运行良好没问题。这样你就不需要做一个例子`php compomser.phar show`，你只需`composer show`在你正在使用的任何目录中做。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2013-06-07T05:08:56.777

要从其他位置运行它，您可以使用程序附带的 composer 程序。它基本上是一个 bash 脚本。如果您没有它，您只需将以下代码复制到文本文件中即可创建一个

```
#!/bin/sh

dir=$(d=$(dirname "$0"); cd "$d" && pwd)

if command -v 'cygpath' >/dev/null 2>&1; then
  dir=$(cygpath -m $dir);
fi

dir=$(echo $dir | sed 's/ /\ /g')
php "${dir}/composer.phar" $* 
```

然后将文件保存在您的 bin 文件夹中，并将其命名为 composer，不带任何文件扩展名。然后将 bin 文件夹添加到您的环境变量 f

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-10-04T12:01:06.417

其中一些可能是由于您的服务器正在运行的操作系统。我最近迁移到了一个运行 Ubuntu 的新托管环境。将此别名添加`alias composer="/path/to/your/composer"`到 .bashrc 或 .bash_aliases 最初不起作用，原因有两个：

服务器默认运行的是 csh，而不是 bash。要检查这是否是您的问题，请运行`echo $0`. 如果返回的是`-csh`您想要将其更改为 bash，**因为 Composer 运行的某些进程将使用 csh/tcsh 失败**。

要更改它，首先通过运行检查 bash 在您的服务器上是否可用`cat /etc/shells`。如果在返回的列表中看到`bin/bash`，则可以通过运行将默认值更改为 bash `chsh -s /bin/csh`。

现在，此时，您应该能够运行 Composer，但通常，在 Ubuntu 上，您必须在每个会话中通过运行`source ~/.bashrc`或获取 Bash 脚本来加载脚本`source ~/.bash_profile`。这是因为，在大多数情况下，Ubuntu 不会加载您的 Bash 脚本，因为它`.profile`作为默认脚本加载。

要在您打开会话时加载 Bash 脚本，请尝试将其添加到您的 .profile 中（如果您的 Bash 脚本是 .bashrc - 如果是 .bash_profile 或其他，请相应地修改）：

```
if [ -n "$BASH_VERSION" ]; then
    # include .bashrc if it exists
    if [ -f "$HOME/.bashrc" ]; then
        . "$HOME/.bashrc"
    fi
fi 
```

要进行测试，请关闭会话并重新加载。如果它工作正常，运行`composer -v`或`which composer`应该按预期运行。**

# java - spring mvc hibernate 事务管理的正确方法

> ID：11333236
> 
> 赞同：2
> 
> 时间：2012-07-04T17:18:53.737
> 
> 标签：java, hibernate, spring-mvc

也许标题有点误导，但我想向您请教一条建议。

现在假设我已经为我的 spring mvc 应用程序配置了休眠和事务。部分配置如下所示：

```
 <bean id="dataSource" class="com.mchange.v2.c3p0.ComboPooledDataSource" destroy-method="close">
    <property name="driverClass" value="oracle.jdbc.OracleDriver"/>
    <property name="jdbcUrl" value="jdbc:oracle:thin:@127.0.0.1:1521:orcl"/>
    <property name="user" value="xxx"/>
    <property name="password" value="xxx"/>
    <property name="maxPoolSize" value="10"/>
    <property name="maxStatements" value="0"/>
    <property name="minPoolSize" value="5"/>
</bean>
<!-- Session Factory Declaration -->
<bean id="sessionFactory" class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
    <property name="dataSource" ref="dataSource"/>
    <property name="configLocation" value="classpath:hibernate.cfg.xml"/>
    <property name="packagesToScan" value="com.execon.models"/>
</bean>

<!-- Enable the configuration of transactional behavior based on annotations -->
<tx:annotation-driven transaction-manager="txManager"/>

<!-- Transaction Manager is defined -->
<bean id="txManager" class="org.springframework.orm.hibernate4.HibernateTransactionManager">
    <property name="sessionFactory" ref="sessionFactory"/>
</bean> 
```

所以基本上我现在需要做的，只是`@Autowired`我的 sessinFactory 到将管理数据库访问权限的类？

一个简单的示例，虽然它带有`@Controller`，但我将其移至`@Service`：

```
@Resource(name = "sessionFactory")
private SessionFactory sessionFactory;

@RequestMapping(value = "/")
public String getMainPage( Model model )
{
    Session session = sessionFactory.getCurrentSession();
    session.beginTransaction();
    Query query = session.createQuery( "from Period" );
    List<Period> list = query.list();
    System.out.println( list );
    session.getTransaction().commit();
    return "MainPage";
} 
```

如您所见，我只是想将映射类的标准控制台列表放入。它工作得很好，但我需要一条建议如何在更大的项目中进行管理。我应该有一些 util 类来获取会话并开始事务吗？或者我应该使用一些模板来管理它？只是我不想写这个：

```
 Session session = sessionFactory.getCurrentSession();
    session.beginTransaction();
    //
    //...
    //
    session.getTransaction().commit(); 
```

在我需要连接到数据库的每个地方。也许我错过了一些东西，或者完全错了？任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T17:26:56.267

您缺少的是 spring 事务注释。

```
@RequestMapping(value = "/")
@Transactional
public String getMainPage( Model model )
{
    Session session = SessionFactoryUtils.openSession(sessionFactory);
    Query query = session.createQuery( "from Period" );
    List<Period> list = query.list();
    System.out.println( list );
    return "MainPage";
} 
```

显然，正如您所指出的，正常的事情是分离出数据库的东西。

在您的上下文文件中，您将需要：

```
<tx:annotation-driven transaction-manager="txManager" /> 
```

请注意，在此特定示例中，您需要将其放入`XXX-servlet.xml`上下文文件中，因为这是配置控制器的内容。

spring 和 hibernate 的总体思路是使用 spring 进行事务和连接管理。注册器使用`SessionFactoryUtil`hibernate Session 作为事务资源绑定到当前线程。

# playframework - 玩！和模型验证

> ID：11333239
> 
> 赞同：2
> 
> 时间：2012-07-04T17:19:00.110
> 
> 标签：playframework

我一直在使用 play 1.2.5rc4 开发一个应用程序，我发现了 Play 的一个有趣行为。看下面的代码：

```
User user = new User(some attributes...);
boolean userSaved = user.validateAndSave(); 
```

在调用新用户期间，我使用 validation.addError() 方法添加了一个验证错误。然后我希望在 validateAndSave() 期间它返回 false，因为验证已经包含一个错误。但事实并非如此。我想知道这是错误还是功能。我的意思是，当这种行为有用时，谁能想到一些用例？

另一个问题是，为什么 validateAndSave() 不是默认的 save() 方法？我希望如果我调用 user.save() 它不会保存违反约束的用户，但显然它确实如此（我有一个示例，违反 @Unique 约束的用户被插入到数据库中）。知道为什么这很有用吗？让方法 save() 表现为 validateAndSave() 和方法，例如 saveWithoutValidation() 不是更好吗？我可以看到导致很多问题的方法的当前命名。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T17:33:15.363

Validate and save 不查看现有的验证对象，而是验证您要求验证的特定对象。

您的第二个问题是因为您可能有一些验证，这是特定于您的一种屏幕设计的，但也许在管理屏幕上，您希望有不同的业务规则。强制对象始终正确是对开发人员的限制，不应由框架强制。

# excel - 读取区域设置

> ID：11333240
> 
> 赞同：0
> 
> 时间：2012-07-04T17:19:06.717
> 
> 标签：excel, axapta, dynamics-ax-2009, regional-settings

将某些数据导出到 Excel 工作簿时，我正在为某些字段设置自定义数字格式。

问题是实际的格式字符串取决于语言环境，例如英语的“0.00”和斯洛文尼亚语的“0,00”。

有没有办法从区域设置中读取小数分隔符？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T19:58:07.737

```
public static str currencyDecimalSeparator()
{
    System.Threading.Thread               t = System.Threading.Thread::get_CurrentThread();
    System.Globalization.CultureInfo      ci = t.get_CurrentCulture();
    System.Globalization.NumberFormatInfo ni;
    str                                   delimiter;

    ci.ClearCachedData();
    ni = ci.get_NumberFormat();

    delimiter = ni.get_CurrencyDecimalSeparator();

    return delimiter;
} 
```

# javascript - Javascript：检查 A 是否等于 B 或 C 的最优雅的方法是什么？

> ID：11333246
> 
> 赞同：3
> 
> 时间：2012-07-04T17:19:40.507
> 
> 标签：javascript, evaluation

我需要评估一个变量并检查它是否等于其他两个变量之一。

我这样做： `if (a == b || a == c) { }`

我觉得必须有一种更好的方法来以这种方式评估变量。在那儿？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T17:21:22.140

如果您只是将一个值与其他 2 个值进行比较，这是最有效和最优雅的解决方案。无需改变任何东西！

如果您想查看一个变量是否等于更大的其他变量集合中的任何一个，您可以执行以下操作：

```
if(([b,c,d,e,f].indexOf(a) !== -1) {
  // "a" is equal to either b, c, d, e, or f
} 
```

该`indexOf`方法在旧版浏览器中可能不可用，因此请务必检查一下！在旧版浏览器中，您可以使用编写自己的方法来搜索数组或利用任何流行的通用库......大多数都会有这个功能。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-11-02T08:26:59.547

您也可以使用[`Array.prototype.includes`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/includes)（ES7）。

```
if ([b, c, d, e].includes(a)) {
  // do stuff
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-04T17:24:59.897

..如果你有很多变量要比较，你可能会使用这个：

```
if ([a,b,c,d,e,f,g,h].indexOf(yourValue) >= 0) 
```

* * *

还有另一种方法，如果你愿意多打字：

```
if (yourValue in {a:0,b:0, c:0, ... }) 
```

或者您可能有一个返回数组对象版本的函数：

```
var wrap = function(){
    var obj = {};
    for (var i=0; i<arguments.length; i++)
        obj[arguments[i]]=0;
    return obj;
}; 
```

接着：

```
if (yourValue in wrap(a,b,c,d,e,f,g)) 
```

* * *

如果你对 jQuery 没问题，你可以使用[jQuery 的方式](http://api.jquery.com/jQuery.inArray/)：

```
$.inArray(yourValue, [a,b,c,d,e,f]) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-04T17:24:07.380

我认为您上面的内容是最直接的选择。

此外，在 JavaScript 中有不同种类的相等运算符。如果两个操作数相等，`==`则等于运算符返回布尔值 true。JavaScript 将尝试将不同的数据类型转换为相同的类型以进行比较。该`===`运算符是严格相等运算符，仅当两个操作数相等且类型相同时才返回布尔值 true。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-04T17:27:12.983

```
var values = [b,c,d,e,f];

for (var i=0,n=values.length; i<n; i++){
   if (values[i] == a){
       // ...
       break;
   }
} 
```

# javascript - MongoDB shell：从控制台读取一行

> ID：11333248
> 
> 赞同：9
> 
> 时间：2012-07-04T17:19:51.287
> 
> 标签：javascript, shell, mongodb, stdin, readline

有没有办法从 Mongo shell 中读取一行？`readline()`没有定义，也没有`system.stdin`。

我需要在交互模式下执行此操作，而不是向 MongoDB shell 执行的脚本提供输入。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-08T23:58:18.843

根据@Stennie 的评论，目前这是不可能的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-06-25T06:25:05.187

正式地，这在 Mongo shell 中是不可能的。

非正式地，是的，这是可能的。您可以使用一个小技巧来读取用户输入。

Mongo shell 在许多未记录的函数中，包含一个名为的函数`passwordPrompt`，可用于读取用户输入。

只是，您必须注意此 hack 的一些限制。

1.  该函数一旦被调用，就会将字符串打印`Enter password:`到控制台，并且无法更改此提示。由于此函数是原生的（非 js），因此无法重新定义它以删除提示。
2.  此函数不会在您键入时显示您键入的内容（这是有道理的，因为 mongo shell 在内部使用它来输入用户密码）。您将不得不盲目地输入您的输入。

但是，如果您不介意每次您希望获得用户输入时出现“输入密码：”提示，并且看不到您输入的内容，那么这应该可以工作。

这是一个例子。您可以在交互模式下运行它或将其写入 .js 文件中：

```
user_input = passwordPrompt();
print("user inputed: " + user_input); 
```

如果你运行它并输入“hacknation”，它的输出将是：

```
Enter password:

user inputed: hack nation 
```

此外，Mongo shell 允许您从 shell 本身运行操作系统命令，这允许您使用非 mongo 和非 javascript 实用程序处理用户输入。例如，我为 mongo shell 创建了程序，它使用 windows powershell 和 .net 框架来制作图形用户界面并使用 gui 与用户交互，并将用户输入返回给 Mongo shell。我更喜欢这个`passwordPrompt`。

Mongo shell 中有很多未记录的函数可以用来做一些更高级的事情，例如获取用户输入、文件系统 I/O 函数等。

# html - 如何在更大的div中并排制作两个inser svg元素

> ID：11333251
> 
> 赞同：1
> 
> 时间：2012-07-04T17:20:01.340
> 
> 标签：html, svg

大家好，我正在研究 html 和 javascript。我要问一个非常基本的问题。我写了一个简单的代码尝试了不同的东西。但无法让它发挥作用。我想要做的是我有一个具有两个内部 div 的 div。两个内部 div 内部都有一个等于 div 大小的 svg 元素。我希望两个内部 div 并排。但我的 div 不相等Ist div 大，第二个宽度小。

```
<html>
<head></head>
<body>
 <div position:relative; width = "100%"; height = "400px" float:left>
  <div width = "1000px" height = "400px"; float:left>
    <svg width = "1000px" height = "400px"> 
    </svg>
  </div >
  <div width = "300px" height = "400px"float:left>
    <svg width = "300px" height = "400px"> 
    </svg>
  </div>
 </div>
</body>
</html> 
```

我怎样才能做到这一点。 **我也应该用 div 和 svg 写高度和宽度，还是只用一个就可以了**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T17:24:42.940

如果您希望 的`divs`宽度相等，则需要将它们的`width`值设置为相等。有两种方法可以做到这一点。首先，您可以手动设置宽度：

```
<html>
<head></head>
<body>
 <div position:relative; width = "100%" height = "400px">
  <div width = "1000px" height = "400px" style="float:left">
    <svg width = "1000px" height = "400px"> 
    </svg>
  </div >
  <div width = "1000px" height = "400px" style="float:right">
    <svg width = "1000px" height = "400px"> 
    </svg>
  </div>
 </div>
</body>
</html> 
```

或者，您可以只使用百分比：

```
<html>
<head></head>
<body>
 <div position:relative; width = "100%"; height = "400px">
  <div width = "50%" height = "400px" style="float:left">
    <svg width = "100%" height = "400px"> 
    </svg>
  </div >
  <div width = "50%" height = "400px" style="float:right">
    <svg width = "100%" height = "400px"> 
    </svg>
  </div>
 </div>
</body>
</html> 
```

在这两种情况下，如果您希望 div 并排，则一个必须是`float:right`，另一个是`float:left`. 还有其他方法可以做到这一点，但`floats`很简单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T15:42:41.613

You can add float inside svg tag

```
<html>
<head></head>
<body>
 <div>
  <div>
    <svg width = "1000px" height = "400px" style="float:right"> 
    </svg>
  </div >
  <div>
    <svg width = "300px" height = "400px" style="float:right"> 
    </svg>
  </div>
 </div>
</body>
</html> 
```

[Read more here](http://edutechwiki.unige.ch/en/Using_SVG_with_HTML5_tutorial "Creating text that floats around SVG images")

# java - 您是在主类还是在适当的关系类中创建所有对象引用？

> ID：11333253
> 
> 赞同：0
> 
> 时间：2012-07-04T17:20:21.480
> 
> 标签：java, oop, object, class-design

我有我的主类**PayUnit**，我在其中创建我的主要对象引用，例如**touchScreen**、**scale**和**barcodeReader**因为这些是`has-a`我的**PayUnit**的关系。这台机器也是`has-a` **billDispenser**但**billDispenser实际上是与****currencyDispener**的“is-a”关系。我仍然在主类中创建**billDispenser**和**currencyDispenser对象引用，还是在****PayUnit中创建****currencyDispenser**引用，然后在**currencyDispenser中创建****billDispenser********班级？******

 ******我希望这是有道理的。OOP在这方面的标准是什么？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T17:28:31.673

根据您的描述，似乎没有必要同时引用`billDispenser`和`currencyDispenser`in `PayUnit`（因为它们不是单独的实体，其中一个是另一个的实现）。一种常见的做法是定义一个协议（Java 中的接口或抽象类）来描述模块的 API（在您的情况下，`currencyDispenser`），然后在某处有一个工厂方法提供符合该接口的实现（`billDispenser`在您的案子）。我希望这回答了你的问题。******

# ruby - 执行“cd”时的“__rvm_do_with_env_before”和“__rvm_after_cd”

> ID：11333255
> 
> 赞同：18
> 
> 时间：2012-07-04T17:20:42.783
> 
> 标签：ruby, shell, terminal, rvm

我最近卸载了 RVM（我认为主要是）。当我`cd`在终端中“”时，我得到：

```
Adams-MacBook-Pro% cd
__rvm_do_with_env_before:source:5: no such file or directory: /Users/adam/.rvm/scripts/initialize
__rvm_after_cd:source:5: no such file or directory: /Users/adam/.rvm/scripts/hook 
```

我该如何解决？我猜这是因为我没有完全卸载 RVM。完成后我还有哪些步骤要做`rvm implode`

谢谢

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-07-04T23:04:22.647

重新打开终端就足够了，在极少数情况下需要重新登录/重新启动。

# python - 使用 django 在服务器上没有输出

> ID：11333261
> 
> 赞同：0
> 
> 时间：2012-07-04T17:21:30.117
> 
> 标签：python, django, linux, ubuntu-10.04

我的views.py 文件代码：

```
#!/usr/bin/python 

from django.template import loader, RequestContext
from django.http import HttpResponse
#from skey import find_root_tags, count, sorting_list
from search.models import Keywords
from django.shortcuts import render_to_response as rr

def front_page(request):

    if request.method == 'POST' :
        from skey import find_root_tags, count, sorting_list
        str1 = request.POST['word'] 
        fo = open("/home/pooja/Desktop/xml.txt","r")

        for i in range(count.__len__()):

            file = fo.readline()
            file = file.rstrip('\n')
            find_root_tags(file,str1,i) 

            list.append((file,count[i]))

        sorting_list(list)

        for name, count1 in list:
            s = Keywords(file_name=name,frequency_count=count1)
            s.save()

            fo.close()

        list1 = Keywords.objects.all()
        t = loader.get_template('search/results.html')
        c = Context({'list1':list1,})

        return HttpResponse(t.render(c))

    else :  
        str1 = ''
        list = []
        template = loader.get_template('search/front_page.html')
        c = RequestContext(request)
        response = template.render(c)
        return HttpResponse(response) 

 <body BGCOLOR = #9ACD32">
<ul> 
{ % for l in list1 %}
        <li> {{l.file_name}}, {{l.frquency_count}}</li>
{ % endfor %}
</ul>

</body> 
```

在服务器上运行我的应用程序时，它会询问我这个词并重定向到 results.html 并给出以下输出：

```
{ % for l in list1 %}

- List item,

{ % endfor %} 
```

为什么会发生这种情况，我在哪里弄错了？而值存储在表中，我通过管理页面检查了它，那么为什么会显示？请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T17:53:29.513

```
{ % for l in list1 %} 
```

应该

```
{% for l in list1 %} 
```

和

```
{ % endfor %} 
```

应该

```
{% endfor %} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T17:54:17.097

永远不要在'{'和'%'之间加空格

# inheritance - JDO 的继承

> ID：11333266
> 
> 赞同：0
> 
> 时间：2012-07-04T17:21:45.843
> 
> 标签：inheritance, netbeans, jdo, datanucleus

我正在尝试在 JDO 上编写一个简单的继承（NetBeans，而不是 Eclipse。而不是 GAE）。这很简单：

```
@PersistenceCapable
@Inheritance(strategy=InheritanceStrategy.NEW_TABLE)
public class TestModel1 {

} 
```

和

```
@PersistenceCapable
@Inheritance(strategy=InheritanceStrategy.NEW_TABLE)
public class TestModel2 extends TestModel1 {

} 
```

但是当我尝试构建它时出现以下错误

```
type com.ncr.model.QTestModel1 does not take parameters
public class QTestModel2 extends com.ncr.model.QTestModel1<TestModel2> implements PersistableExpression<TestModel2>

com.ncr.model.QTestModel2 is not abstract and does not override abstract method jdoVersion() in org.datanucleus.query.typesafe.PersistableExpression
public class QTestModel2 extends com.ncr.model.QTestModel1<TestModel2> implements PersistableExpression<TestModel2> 
```

我一直在这上面花了几个小时，在谷歌和以前都没有答案。请帮忙>.<

编辑：

这是我的 QClass 结果

```
public class QTestModel1 extends org.datanucleus.jdo.query.PersistableExpressionImpl<TestModel1> implements PersistableExpression<TestModel1>
{
    public static final QTestModel1 jdoCandidate = candidate("this");

    // not important
} 
```

和

```
public class QTestModel2 extends com.ncr.model.QTestModel1<TestModel2> implements PersistableExpression<TestModel2>
{
    public static final QTestModel2 jdoCandidate = candidate("this");

    // not important
} 
```

它在这里失败：

```
public class QTestModel2 extends com.ncr.model.QTestModel1<TestModel2> implements PersistableExpression<TestModel2> 
```

我不知道 Netbeans 是如何生成扩展 QTestModel1 的 QTestModel2 从而导致编译错误的。而且我不确定手动更改是否会解决任何问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T18:53:37.757

首先，您忽略了提及您正在使用 DataNucleus Typesafe API（可能是因为 JDO 还没有包含该 API）。

其次，DataNucleus SVN 的测试具有类型安全类的继承并且没有问题。因此，建议您通过查看那些 QTestModel1/QTestModel2 类**的（生成的）源代码来调试您的问题。**

# shell - 如何在 Mac OS X 上更改 Apache httpd.conf 文件？

> ID：11333267
> 
> 赞同：3
> 
> 时间：2012-07-04T17:21:55.927
> 
> 标签：shell, vim, cgi, apache

我在运行 OS X 的 MacBook 上试图自学如何编写 CGI 脚本，但我被困在第一步，更改`httpd.conf`文件。我正在按照以下说明操作：[http](http://www.cgi101.com/book/connect/mac.html) ://www.cgi101.com/book/connect/mac.html ，我正在尝试`httpd.conf`使用终端命令更改文件`sudo vim /etc/apache2/httpd.conf`。但是，当我准备尝试保存文件时，它说它是只读的。我遵循的说明说我应该取消注释该行`AddHandler cgi-script .cgi`但是，如果我无法保存文件，我应该怎么做？

我对 CGI 脚本、Apache 和终端非常陌生。

编辑：命令的输出：`ls -l /etc/apache2/httpd.conf`是：

```
-r--r--r--  1 root  wheel  24330 Jul 11  2011 /etc/apache2/httpd.conf 
```

编辑：当我尝试保存它时说`add ! to override`. 当我使用命令执行此操作时，`:!x`它会退出但会产生错误`launch_msg("CheckIn") IPC failure: Operation not permitted`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T17:35:52.893

要保存只读文件，请`!`在 Vim 命令之后添加，而不是之前。如果你在之后添加它，那么它会尝试运行 shell 命令（不是 Vim 命令）。在这种情况下，您正在运行名为 的 shell 命令`x`，该命令会打印您提到的消息。您需要`:x!`保存并关闭或`:w!`仅保存文件。

# android - Android gcm 示例提供注册：http 错误 400

> ID：11333271
> 
> 赞同：1
> 
> 时间：2012-07-04T17:22:13.067
> 
> 标签：android, android-c2dm, google-cloud-messaging

我按照[http://developer.android.com/guide/google/gcm/gs.html](http://developer.android.com/guide/google/gcm/gs.html)中给出的步骤进行操作，每次尝试从我的设备注册时都会出现以下错误（在 froyo 上运行）

> 07-04 22:48:31.178：D/C2DMRegistrar(3880)：[C2DMRegistrar.66] 注册：http 错误 400

对于**senderId**，我尝试过使用**projectID**（根据 Google）、电子邮件 ID 和 API 密钥，但没有一个有效。

我有安卓市场并在设备上登录了谷歌帐户。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-04T18:34:49.820

**响应 400 ：**仅适用于 JSON 请求。表示请求无法解析为 JSON，或者它包含无效字段（例如，在需要数字的地方传递字符串）。响应中描述了确切的失败原因，并且应该在重试请求之前解决问题。

您可以参考[**`this document`**](http://developer.android.com/guide/google/gcm/gcm.html)来自请求的所有可用响应。

# jquery - 基于选择的 Django 模板/ChoiceField 显示字段

> ID：11333272
> 
> 赞同：0
> 
> 时间：2012-07-04T17:22:14.177
> 
> 标签：jquery, django, django-forms, django-templates, choicefield

我目前正在 Django 中制作一个呈现一些表单的模板。我有多个配置文件模型，它们根据用户的用户类型保存特定数据。例如，我有一个包含公司名称的公司资料和一个包含个人电话号码的客户资料。我有一个 ChoiceField 用于确定填写表单的用户类型，并根据用户选择的内容显示一组特定字段。当用户做出选择时，我正在使用 JQuery 使特定的隐藏字段可见。

我遇到的问题是其他模型需要一些未显示的字段。因此，假设公司资料需要公司名称，而客户资料需要个人电话号码。如果用户选择公司作为他们的类型，我的模板将返回个人电话号码字段的错误并且不提交。有没有办法使用 Django、JQuery 或其他方法根据用户选择禁用、删除或忽略不必要的字段？

*这是我目前隐藏信息的方式：*

```
<script type="text/javascript">
$(document).ready(function() {
$("#id_user_type").change(function(){
    $(".user-type-wrapper").slideUp('500');
    $("#user-type-"+$(this).val()).slideDown('500');
});});
</script> 
```

*该脚本正在影响我模板的这一部分：*

```
 ...
 <div class="field">
     {{ form.user_type.errors }}
     <label for="id_user_type">User Type:</label>
     {{ form.user_type }}
 </div>

 <!-- Company Specific Form Content -->
 <div class="user-type-wrapper" id="user-type-CO" style="display: none;">
      <div class="field">
          {{ form.company_name.errors }}
          <label for="id_company_name">Company Name:</label>
          {{ form.company_name }}
      </div>
 </div>
 <!-- End Company Specific Form Content -->

 <!-- Customer Specific Form Content -->
 <div class="user-type-wrapper" id="user-type-CU">
      <div class="field">
          {{ form.phone_number.errors }}
          <label for="id_phone_number">Phone Number:</label>
          {{ form.phone_number }}
      </div>
 </div>
 <!-- End Customer Specific Form Content -->
 ... 
```

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T00:39:14.473

## 执行

经过一番搜索，我能够想出一个解决方案。我将 Dajax 添加到我的实现中，以根据用户选择的用户类型重新加载带有必填字段的页面。这使我能够消除不需要完成的字段，并且仍然对已完成的字段执行验证。

## 延伸阅读

为了帮助遇到类似问题的其他人，我建议查看[Dajax Project](http://www.dajaxproject.com/)，尤其是[Pagination Example](http://www.dajaxproject.com/pagination/)。我只是按照教程遇到了一些问题，但是如果您访问[Dajax Github Repo](https://github.com/jorgebastida/django-dajax)，您​​应该能够通过它。

## 需要注意的问题

*   如果您使用的是 JQuery UI，请确保加载 Dajax 的 JQuery 版本而不是 Prototype 版本。加载 Prototype 将导致 JQuery 在加载 Dajax 链接的页面上不起作用。有关参考，请参阅位于[https://github.com/jorgebastida/django-dajax/issues/37](https://github.com/jorgebastida/django-dajax/issues/37)的导入代码。*   如果您使用的是 JQuery，请确保在标题中包含以下内容：

```
<script src="https://github.com/cowboy/jquery-misc/blob/master/jquery.ba-serializeobject.js" type="text/javascript" charset="utf-8"></script> 
```

*如果您搜索它，它会在文档中列出，但很容易忽略*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T18:10:31.253

为每种类型的配置文件制作不同的模型。在模板中获取所有表单。最后，使用 jquery 来决定应该看到哪一个。

# asp.net-mvc-3 - HTML Helpers 和隐藏的 asp .net mvc 3

> ID：11333273
> 
> 赞同：1
> 
> 时间：2012-07-04T17:22:24.857
> 
> 标签：asp.net-mvc-3, html-helper, html.hiddenfor

我正在创建一个简单的博客应用程序。我必须在博客文章中添加评论。我的代码中有一行如下所示：

```
<input type="hidden" name="Comment.BlogID" value="@Model.Blog.BlogID" /> 
```

基本上，我将 Comment.BlogID 设置为 Model.Blog.BlogID

有没有办法使用 HTML.Hiddenfor 来做到这一点。

我尝试了下面的代码，但这不起作用。

```
@Html.HiddenFor(model => model.Comment.BlogID, new { value = @Model.Blog.BlogID }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T17:28:38.847

如果可能，您必须在控制器中将该视图的模型中的值设置为实际的 BlogId。如果那是不可能的，您将无法更改稍后在 Html.HiddenFor 帮助器中使用的值。你可以试试

```
@{ Model.Comment.BlogId = Model.Blog.BlogId; } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T09:43:15.510

```
@Html.Hidden(model.Comment.BlogID, @Model.Blog.BlogID); 
```

# objective-c - 尝试使用 oauth 和 gdata 目标 c api 列出谷歌文档

> ID：11333274
> 
> 赞同：3
> 
> 时间：2012-07-04T17:22:29.873
> 
> 标签：objective-c, xcode, oauth-2.0, gdata

我正在尝试使用 oauth 2.0 协议连接谷歌文档。我认为连接正常，因为我获得了访问令牌。之后我想列出文件。我将objective-c api的gdata添加到我的项目中，并按照示例进行操作，但没有得到任何文档。我只是想阅读第一个文档的标题并显示它，但一定有问题，或者我可能遗漏了一些东西。有什么帮助吗？谢谢。这是代码：

视图控制器.m

```
@implementation ViewController

@synthesize accessToken;
@synthesize mDocListFeed;
@synthesize mDoclistFetchTicket;

static NSString *const kMyClientID = @"199740745364-22lugf8undgv0rc0ucbfpgsn3v90lfsd.apps.googleusercontent.com";
static NSString *const kMyClientSecret = @"dPFs5D66kLyQIgUNL6igKUoX";
static NSString *const kKeychainItemName = @"casa";

- (GDataServiceGoogleDocs *)docsService {

  static GDataServiceGoogleDocs* service = nil;

  if (!service) {
    service = [[GDataServiceGoogleDocs alloc] init];

    [service setShouldCacheResponseData:YES];
    [service setServiceShouldFollowNextLinks:YES];
    [service setIsServiceRetryEnabled:YES];
}

return service;

}

- (void) mifetch {

    GDataServiceGoogleDocs *service = [self docsService];

    GDataServiceTicket *ticket;

    NSURL *feedURL = [GDataServiceGoogleDocs docsFeedURL];

   ticket = [service fetchFeedWithURL:feedURL
                 delegate:self
        didFinishSelector:@selector(ticket:finishedWithFeed:error:)];

    mDoclistFetchTicket = ticket;

}

- (void) ticket: (GDataServiceTicket *) ticket
        finishedWithFeed: (GDataFeedDocList *) feed
            error: (NSError *) error {

mDocListFeed = feed;

GDataEntryDocBase *doc = [[mDocListFeed entries] objectAtIndex:0];

NSString *ttitle = [[doc title] stringValue];
UIAlertView *alertView = [ [UIAlertView alloc] initWithTitle:@"primer doc"
                                  message:[NSString stringWithFormat:@"titulo: %@", ttitle]
                                                    delegate:self
                                           cancelButtonTitle:@"Dismiss"
                                           otherButtonTitles:nil];

[alertView show];

}

- (void)authorize {

  NSString *scope = @"https://spreadsheets.google.com/feeds";

// scope for Google+ API

GTMOAuth2ViewControllerTouch *windowController = [[GTMOAuth2ViewControllerTouch alloc]      initWithScope:scope
                                                                                            clientID:kMyClientID
                                                                                        clientSecret:kMyClientSecret
                                                                                    keychainItemName:kKeychainItemName
                                                                                            delegate:self
                                                    finishedSelector:@selector(viewController:finishedWithAuth:error:)];

[[self navigationController] pushViewController:windowController animated:YES];
}

- (IBAction)autenticarse 
{
[self authorize];
}

- (IBAction)listar
{

[self mifetch];
}

- (void)viewController:(GTMOAuth2ViewControllerTouch *)viewController
  finishedWithAuth:(GTMOAuth2Authentication *)auth
             error:(NSError *)error
{

if (error != nil)
{
    // Authentication failed
    UIAlertView *alertView = [ [UIAlertView alloc] initWithTitle:@"Authorization Failed"
                                                         message:[error localizedDescription]
                                                        delegate:self
                                               cancelButtonTitle:@"Dismiss"
                                               otherButtonTitles:nil];
    [alertView show];
}
else
{
    //si error==nil en el callback, entonces la peticion fue autorizada
    // Authentication succeeded

    // Assign the access token to the instance property for later use
    self.accessToken = auth.accessToken;

    // Display the access token to the user
    UIAlertView *alertView = [ [UIAlertView alloc] initWithTitle:@"Authorization Succeeded"
   message:[NSString stringWithFormat:@"Access Token: %@ code:%@", auth.accessToken, auth.code]
                                                        delegate:self
                                               cancelButtonTitle:@"Dismiss"
                                               otherButtonTitles:nil];
    [alertView show];
    [[self docsService] setAuthorizer:auth];

}
}

// table view data source methods

//The first thing we have to do is, tell the table view how many rows it should expect and this is done in tableView:numberOfRowsInSection. 

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {

if (tableView == tablalistar) {
    return [[mDocListFeed entries] count];
}

return 0;

}

//Now that the table view knows how many rows to display, we need to display the actual text which goes in a table view cell. The table view is made of table rows and rows contains table cell. This is done in tableView:cellForRowAtIndexPath which is called n number of times, where n is the value returned in tableView:numberOfRowsInSection. The method provides indexPath which is of type NSIndexPath and using this we can find out the current row number the table view is going to display.

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

UITableViewCell *cell = [tableView 
                         dequeueReusableCellWithIdentifier:@"tablalistar"];

if (tableView == tablalistar) {

    GDataEntryDocBase *doc = [[mDocListFeed entries] objectAtIndex:indexPath.row];

    cell.textLabel.text = [[doc title] stringValue];

}
 return cell;
}   

@end 
```

谢谢！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T05:12:37.510

范围字符串仅请求电子表格 API 的权限，但获取的是文档列表 API。

DocList API 的范围可用作`+[GDataServiceGoogleDocs authorizationScope]`

多个服务的范围可以与`+[GTMOAuth2Authentication scopeWithStrings:]`

顺便说一句，DocList API 已被[Google Drive API](http://code.google.com/p/google-api-objectivec-client/)取代。

# wpf - 在wpf中滚动列表框时，列表框选择随机取消选择某些项目

> ID：11333275
> 
> 赞同：2
> 
> 时间：2012-07-04T17:22:32.650
> 
> 标签：wpf, listbox

我有一个与 dataset.listbox 绑定的列表框 .list 框绑定给出了正确的结果 我在列表框中使用了复选框进行选择，并且工作正常，但问题是当我检查某些项目列表框并向下滚动列表时框并选中另一个项目回到向下滚动然后看到一些项目随机自动取消选中。我不希望该项目自动取消选中。请帮我。我在下面使用此代码。

```
<DataTemplate x:Key="listBoxcontrycode">
    <StackPanel Margin="4">
        <DockPanel>
            <CheckBox Name="chkcntrycode" Content="{Binding userisd}"
                      Checked="chkcntrycode_Checked" Unchecked="Unchkcntrycode_Checked" />
        </DockPanel>
    </StackPanel>

<ListBox Height="89" HorizontalAlignment="Left" ItemTemplate="{StaticResource listBoxcontrycode}" ItemsSource="{Binding Tables[0]}" Margin="160,0,0,6" 
         Name="listcntrycode" VerticalAlignment="Bottom" Width="86" Grid.Column="3" Grid.ColumnSpan="2" Grid.RowSpan="2"                                       
         OverridesDefaultStyle="False" SelectionMode="Extended" IsEnabled="True" Grid.Row="3" /> 
```

.

```
private void ListBoxBindingcntrycode()
{
    DBConnection ob = new DBConnection();
    RMS_Dataobject.getConnectionString = System.Configuration.ConfigurationSettings.AppSettings["EDM_RDMServer"];
    string commandString = "use [" + cmbEDM.SelectedItem.ToString() + "] select userisd from ADS_Audit_Log";
    DataTable dt = new DataTable();
    dt = ob.ReturnDatatable(commandString);
    DataSet ds = new DataSet();
    ds.Tables.Add(dt);
    listcntrycode.DataContext = ds;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T09:31:05.293

最后我找到了这个问题的解决方案。我只是使用了 IsChecked 属性和两种方式的绑定模式。我还添加了一个虚拟列。列名是“ischecked”，并在下面给出我的更新代码。

```
<DataTemplate x:Key="listBoxcontrycode">     <StackPanel Margin="4">         <DockPanel>             <CheckBox Name="chkcntrycode" Content="{Binding userisd}"                       Checked="chkcntrycode_Checked" Unchecked="Unchkcntrycode_Checked" IsChecked="{Binding IsChecked, Mode=TwoWay} />         </DockPanel>     </StackPanel>  <ListBox Height="89" HorizontalAlignment="Left" ItemTemplate="{StaticResource listBoxcontrycode}" ItemsSource="{Binding Tables[0]}" Margin="160,0,0,6"           Name="listcntrycode" VerticalAlignment="Bottom" Width="86" Grid.Column="3" Grid.ColumnSpan="2" Grid.RowSpan="2"                                                 OverridesDefaultStyle="False" SelectionMode="Extended" IsEnabled="True">

   private void ListBoxBindingcntrycode()
        {
            DBConnection ob = new DBConnection();
            RMS_Dataobject.getConnectionString = System.Configuration.ConfigurationSettings.AppSettings["EDM_RDMServer"];
            string commandString = "use [" + cmbEDM.SelectedItem.ToString() + "] select distinct userisd ,CONVERT(bit,0) 'IsChecked' from ADS_Audit_Log order by CountryRMSCode";
            DataTable dt = new DataTable();
            dt = ob.ReturnDatatable(commandString);
            DataSet ds = new DataSet();
            ds.Tables.Add(dt);
            listcntrycode.DataContext = ds;
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T19:53:14.560

尝试将 IsChecked 绑定到布尔属性。现在 IsChecked 没有保存在任何地方，所以当项目被回收时，信息不会被保存。

# python - 寻找满足特定约束的子集

> ID：11333277
> 
> 赞同：1
> 
> 时间：2012-07-04T17:22:54.453
> 
> 标签：python, boolean, subset, discrete-mathematics

我有一组变量**S**和一个布尔函数*f*在**S**上定义如下：

*f* (x [1] , x [2] , ... x [n] ) = True 当且仅当*f* (x [i] , x [j] ) = True ∀ 1 ≤ i ≤ *n* ∀ 1 ≤ j ≤ *n* , *n* > 1，否则为 False。

*f* (a, b) 是已知的并且*f* (a, a) 是 True ∀ a, b in **S**。

我希望能在设计一个快速算法方面提供一些帮助，该算法可以返回**S**的所有子集，其中*f*返回 True。

例如，令**S** = [a, b, c] 和*f* (a, b) = *f* (b, c) = *f* (a, c) = True。然后算法应该返回 [[a, b], [a, c], [b, c], [a, b, c]]。

我想到了四种改进蛮力搜索的策略：

*1) f*的参数顺序无关紧要。

2) 使用*f* (a, a) 为 True 且*f* (x [i] , x [j] ) = *f* (x [j] , x [i] ) 的事实，因此只有 i < j 需要检查。

2) 使用*f* (x [1] , x [2] , ... x [*n* +1] ) = *f* (x [1] , x [2] , ... x [*n*] ) ∧ ( *f* (x [i] , x [*n* +1] ) ∀ 1 ≤ i ≤ *n* ) 其中 ∀ 表示迭代合取。

3) 请注意 2) 意味着如果*f* (x [1] , x [2] , ... x [*n*] ) 返回 False，则*f* (x [1] , x [2] , ... x [*n* +Δ] ) 也可以，可能会减少解空间。

4) 只要*f* (x [i] , x [j] ) 对于某些 i, j 为假，就立即返回 False。

如果您想编写一些代码，如果您能在 python 中给出它，我将不胜感激。

非常感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-04T17:49:11.060

二元函数`f(a, b)`可以看作是 S 上的一个对称的自反关系，可以看作是一个无向图。

这样看来，当仅当且仅当形成一个完整的子图时`f(x1, ..., xn)`为真。`{x1, ..., xn}`

从那里，你最终遇到了[集团问题](http://en.wikipedia.org/wiki/Clique_problem)，不幸的是，结果证明是 NP 完全的。换句话说，不太可能存在快速算法。

# c# - 比较调用C dll的c#中的字符串

> ID：11333290
> 
> 赞同：2
> 
> 时间：2012-07-04T17:24:52.120
> 
> 标签：c#, c, string, dll, marshalling

（学习 c# 的第 2 天）我正在将缓冲区从 C# 传递给 C dll。C 函数将字符串“text”复制到缓冲区中。回到 C# 代码中，我将“文本”与缓冲区中的内容进行比较，但结果并不相等。我错过了什么？

```
 extern "C" __declspec( dllexport )      
    int  cFunction(char *plotInfo, int bufferSize) 
    {
        strcpy(plotInfo, "text");
        return(0);
    } 
```

C＃

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Runtime.InteropServices;

namespace ConsoleApplication1
{
    class Program
    {
        [DllImport("mcDll.dll", CallingConvention = CallingConvention.Cdecl,
                                                      CharSet=CharSet.Ansi)]
        public static extern int cFunction(StringBuilder theString, int bufSize);

        static void Main(string[] args)
        {
            StringBuilder s = new StringBuilder(55);
            int result = cFunction(s, 55);
            Console.WriteLine(s);

            string zz = "text";
            if (s.Equals(zz))
                Console.WriteLine( "strings compare equal");
            else
                Console.WriteLine("not equal");

            Console.ReadLine();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T17:29:04.740

`s`是一个`StringBuilder`，`zz`而是一个`string`。

尝试比较

```
s.ToString().Equals(zz); 
```

通常，`Equals()`对引用类型执行引用比较。某些类（例如 String）覆盖`Equals()`以允许包含相同字符的字符串被视为相等（尽管出于性能目的，我相信实际实现首先检查引用相等，然后比较每个字符串的内容）。

您当前的代码正在调用 .Equals() 的方法`StringBuilder`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T17:31:35.937

没有内置的 a`StringBuilder`与 a 的`string` 比较 将任何`StringBuilder`与 a进行比较`string`将始终返回`false`。

[StringBuilder](http://msdn.microsoft.com/en-us/library/system.text.stringbuilder.aspx)类有两个 Equals 重载：

1.  [Equals(object)](http://msdn.microsoft.com/en-us/library/bsc2ak47.aspx)继承自`object`并执行引用比较。
2.  [Equals(StringBuilder)](http://msdn.microsoft.com/en-us/library/ccth01t4.aspx)`StringBuilders`根据它们包含的字符串比较两个。

您正在调用重载 1，因此它不比较内容。

调用`.ToString()`以`s`获取它包含的字符串，然后调用`Equals`它以获取字符串比较。

# tmux - 是否可以找到当前正在使用的 tmux 套接字？

> ID：11333291
> 
> 赞同：21
> 
> 时间：2012-07-04T17:24:56.333
> 
> 标签：tmux

我正在尝试获取当前正在使用的 tmux 套接字列表，但到目前为止我想出的最佳解决方案是检查 /tmp/tmux* 或 TMPDIR。

据我所知，即使当前没有 tmux 会话正在使用它们，tmux 也会将这些套接字保留一段时间。

因此，我希望有类似于 tmux list-sessions 的东西，但是对于套接字，这会给我当前正在使用的所有套接字。我似乎在手册页中找不到一个，如果有的话，我没有正确理解列出套接字是它的目的。

谢谢！

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-07-04T18:15:22.647

要列出您使用的所有套接字，`tmux`可以使用`lsof`：

```
lsof -U | grep '^tmux' 
```

如果`sudo`询问者不拥有该过程，则使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-03-26T18:37:59.270

假设 tmux 套接字位于 /tmp，这是默认情况下它们所在的位置，要列出所有套接字，

lsof | grep tmp/tmux

# image - PlayN：清除图像的一部分

> ID：11333293
> 
> 赞同：0
> 
> 时间：2012-07-04T17:25:08.673
> 
> 标签：image, playn

我想在 PlayN 中使用透明颜色覆盖/清除图像的一部分。这有可能吗？(PlayN 1.3.1)

这是我做的示例代码：

```
 @Override
  public void init() {
    // create and add background image layer
    Image bgImage = assetManager().getImage("images/bg.png");
    ImageLayer bgLayer = graphics().createImageLayer(bgImage);
    graphics().rootLayer().add(bgLayer);
    SurfaceLayer surfaceLayer = graphics().createSurfaceLayer(640, 480);
    CanvasImage image = graphics().createImage(640, 480);
    surfaceLayer.surface().setFillColor(0xff000000);
    surfaceLayer.surface().fillRect(100, 100, 200, 200);
    surfaceLayer.surface().setFillColor(0x00000000);
    surfaceLayer.surface().fillRect(150, 150, 50, 50);
    graphics().rootLayer().add(surfaceLayer);
    image.canvas().setFillColor(0xff000000);
    image.canvas().fillCircle(300, 300, 100);
    image.canvas().setFillColor(0x00000000);
    image.canvas().fillCircle(300, 300, 50);
    graphics().rootLayer().add(graphics().createImageLayer(image));
  } 
```

所以我试过了`SurfaceLayer`，而且`ImageLayer`他们都没有帮助（我想这种方式不可能覆盖部分）。我想要两个相交的矩形和圆形，但我只看到一个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T11:24:30.670

用透明颜色绘制或填充只会导致不绘制任何内容。在 PlayN 中清除像素数据的唯一操作是 Canvas.clear()，它会清除整个图像。您还*可以*利用 GWT 对画布像素操作的访问并手动设置这些像素>> [https://stackoverflow.com/a/10492578/1117740](https://stackoverflow.com/a/10492578/1117740)

为了一个简单的解决方案...

...要清除矩形，您只需复制图像，然后清除图像并绘制您希望保留的部分。

显然你不能用一个圆那么容易地做到这一点，尽管你*可以*使用 Bresenham 的圆绘制算法并复制回你希望保留的每条扫描线的段。

# algorithm - 高效的并行握手（组合）

> ID：11333294
> 
> 赞同：2
> 
> 时间：2012-07-04T17:25:11.467
> 
> 标签：algorithm, parallel-processing, combinatorics

在编写并行程序很多时候，我遇到了制作具有唯一组 2 值的东西的问题。换句话说，这是握手问题，每个人都必须与其他人握手。握手后，有一个晚餐等待所有参与者。

我知道有两种方法可以做到这一点：

1.  给所有男人编号，让每个男人平行，他们将与人数较少的男人握手。在最后一个号码的人要求每个人握手之前，晚餐会变冷。

2.  我们会告诉大家有多少参与者，并根据这个价值创造条件，所以每个人都会动摇。平行的手数相等。晚餐会很冷，因为参与者数学不好。（在这种情况下，人们可以像其他人一样行事）

我们也可以用人来交换数字，用摇晃来比较、乘法等。问题是我们想在天冷之前吃掉晚餐，等待一个线程或制造很多条件会减慢这个过程。

还有其他更有效的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T18:44:47.383

我不确定你有多少受到“数学不好”的限制，但你可能会看看[如何自动生成体育联赛时间表](https://stackoverflow.com/questions/1037057/how-to-automatically-generate-a-sports-league-schedule)，有很好的答案，参考[http://en.wikipedia.org/wiki/循环赛](http://en.wikipedia.org/wiki/Round-robin_tournament)。

在计算同步原语的效率如何时，您需要分别跟踪等待滞后进程赶上所花费的时间，以及同步本身所花费的时间。如果您的时间实际上是花在等待落后者赶上，您需要加快他们的速度（例如通过更均匀地分配工作）或避免等待他们的必要性 - 加快在每个人都等待其他人之后发生的事情可能没有多大帮助。

# c# - Threading.Tasks.Task' 不包含 'Result' 的定义

> ID：11333297
> 
> 赞同：27
> 
> 时间：2012-07-04T17:25:35.867
> 
> 标签：c#, .net, task

因此，我正在尝试学习如何使用 Task's 进行编程，并且正在做一个练习：

```
public static int ReturnFirstResult(Func<int>[] funcs)
{
        Task[] tasks = new Task[funcs.Length];
        for (int i = 0; i < funcs.Length; i++)
        {
            tasks[i] = CreatingTask(funcs[i]);
        }
        return Task<int>.Factory.ContinueWhenAny(tasks, (firstTask) =>
                                                            {
                                                                Console.WriteLine(firstTask.Result);
                                                                return ***????***;
                                                            }).***Result***;
}
private static Task CreatingTask(Func<int> func)
{
        return Task<int>.Factory.StartNew(() => { return func.Invoke(); });
} 
```

我给了一个函数数组来运行，想法是返回第一个函数的结果。问题是字段结果不可用......

我在这里缺少什么？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-07-04T17:26:35.537

您正在`Task`从该`CreatingTask`方法返回 - 您需要 return `Task<int>`，然后更改`tasks`为 be`Task<int>[]`而不是`Task[]`.

基本上，`Task`表示不产生结果`Task<T>`的任务 - 而表示产生类型结果的任务`T`。在您的情况下，整个代码中的所有内容都返回`int`，因此您需要`Task<int>`无处不在。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2019-04-16T15:56:05.217

如果您尝试`.Result`在`Task`对象上使用，您将收到此错误。这可能是因为您打算使用`Task<T>`. 但是，如果您想使用 Task 并且希望它在不使用 await 的情况下返回，那么 Task 就像 void 并且没有结果。你可以`.Wait()`改用。这将返回无效。

# algorithm - 这种多处理器算法的线程调度是否适用于所有情况？

> ID：11333303
> 
> 赞同：0
> 
> 时间：2012-07-04T17:26:09.060
> 
> 标签：algorithm, multiprocessing, scheduling

该算法在本文中描述：多道[程序多处理器的线程调度](http://citeseerx.ist.psu.edu/viewdoc/download;jsessionid=4782F718FC396934BEBB1DC01F314A40?doi=10.1.1.130.3853&rep=rep1&type=pdf)。简而言之，计算分布在进程中，每个进程都有一个线程双端队列来完成这项工作。进程可以将（弹出）线程推送到（从）其双端队列的底部，而其他进程可以通过从顶部弹出线程来窃取它的工作。因此，可以通过推送操作动态地创建工作。算法如下。

![调度算法](../Images/0c814250d6eb4968c58534a15c5f9291.png)

我的问题是关于 popTop() 工作窃取功能。我不认为它适用于所有情况。例如，假设一个拥有队列 Q 的进程 A 和一个试图从 Q 窃取工作的进程 B，调用 popTop()。假设此时 B 在 popTop() 的第 2 行和 localBot = X 之后被抢占。如果 A 运行并且 popBottom() 直到 Q <= X 的底部，当 B 恢复运行时，它将获得一个已经被 A 处理的线程。

我的想法正确吗？我需要验证它，因为我将实现它以在 CUDA 程序中进行工作平衡。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T17:55:54.007

该代码使用 cas() （比较和交换）来尝试停止您所描述的那种事情。如果 popTop() 在第 2 行之后停止，它会在读取 age 和 bot 后停止。如果 popBottom() 然后运行并返回一个线程，它将在 age 内增加字段并使用 cas() 将增加的版本写回内存。现在当 B 恢复并调用 cas() 时， cas() 指令发现 B 提供的年龄值与内存中的值不匹配（这意味着对 cas() 的调用不会修改内存）。所以 B 找到 (oldAge == newAge) 并返回 ABORT。在这种情况下，您通常会再试一次，并希望下次有更好的运气。这篇文章似乎是说，调用 yield() 对你有不错的运气是必要的，但无论如何 popTop() 都不应该返回其他人已经抓住的线程。

当然，在[http://en.wikipedia.org/wiki/Compare-and-swap](http://en.wikipedia.org/wiki/Compare-and-swap)上有一篇关于 cas() 的维基百科文章。

我会将使用锁的并行代码置于串行代码之上一级难度，将无锁并行代码置于锁定并行代码之上一级难度。我不会编写无锁并行代码，除非我确定我需要性能，并且没有可以重用的已知可信代码。在我彻底测试之前，我不会相信这样的代码，如果可能的话，我实际上更愿意进行模型检查。

# calendar - Google Script Calendar 事件结束时间在全天事件中超时

> ID：11333304
> 
> 赞同：0
> 
> 时间：2012-07-04T17:26:13.563
> 
> 标签：calendar, google-apps-script

当我创建一个事件然后通过 Google 脚本访问它时，我注意到 endTime 超出了我设置事件的实际日期。当在日历中迭代几天以获取事件时，这可能会非常有问题。

示例：进入 Google 日历并使用今天日期的标准默认值设置全天事件。然后执行以下代码：

```
function foo() {
  var cal = CalendarApp.getDefaultCalendar();
  var date = new Date();
  var events = cal.getEventsForDay(date);
  Logger.log("Events for today: "+date);
  for (var i=0; i<events.length;i++) {
      Logger.log(events[i].getTitle());
      Logger.log(" "+events[i].getStartTime());
      Logger.log(" "+events[i].getEndTime());
  }
  date.setDate(date.getDate()+1);
  Logger.log("\nEvents for tomorrow: "+date);
  events = cal.getEventsForDay(date);
  for (var i=0; i<events.length;i++) {
      Logger.log(events[i].getTitle());
      Logger.log(" "+events[i].getStartTime());
      Logger.log(" "+events[i].getEndTime());
  }
} 
```

示例输出（来自 Google 脚本日志）：

```
Events for today: Wed Jul 04 2012 19:39:12 GMT+0200 (CEST)
Test
 Wed Jul 04 2012 02:00:00 GMT+0200 (CEST)
 Thu Jul 05 2012 02:00:00 GMT+0200 (CEST)

Events for tomorrow: Thu Jul 05 2012 19:39:12 GMT+0200 (CEST)
Test
 Wed Jul 04 2012 02:00:00 GMT+0200 (CEST)
 Thu Jul 05 2012 02:00:00 GMT+0200 (CEST)
OK 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T11:27:14.100

我认为这是一个错误。您应该订阅问题跟踪器中提出的许多问题

1.  [第 234 期](http://code.google.com/p/google-apps-script-issues/issues/detail?id=234)
2.  [第 936 期](http://code.google.com/p/google-apps-script-issues/issues/detail?id=936)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T03:29:32.910

我现在已经 3 次重新审视这个问题，寻找解决方案。我能找到的唯一合理的解决方案是在 GMT+0 创建一个新日历。然后所有“全天”事件将在一天内正确对齐。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T07:49:33.003

我得到了同样的错误。我的**全天**活动将在美国东部标准时间前一天晚上 7 点开始。我的临时任务是检查全天活动是否从今天开始。代码片段：

```
var allDayP = event.isAllDayEvent();
if (allDayP)
{
  titl = '<font color="red">' + event.getTitle() + '</font>';  
  if (Utilities.formatDate(event.getStartTime(), Session.getTimeZone(),"M/d") == Utilities.formatDate(now, Session.getTimeZone(),"M/d"))
  {
  startTime = "All Day Event The Next Day";
  endTime = Utilities.formatDate(event.getEndTime(), Session.getTimeZone(),"M/d")
  }
  else
  {
  startTime = "All Day Event Today";
  endTime = Utilities.formatDate(event.getEndTime(), Session.getTimeZone(),"M/d")
  }
} 
```

# asp.net - ASP.NET 确定在页面加载事件中的更新面板内单击了哪个按钮

> ID：11333305
> 
> 赞同：5
> 
> 时间：2012-07-04T17:26:19.787
> 
> 标签：asp.net, user-controls, event-handling, postback

我试图解决 ASP.NET UserControl 的页面生命周期问题。我有一个更新面板，里面有两个按钮。现在，在 Page_Load 事件中，我需要检查两个按钮中的哪一个被单击。

我确实知道我应该为此使用点击事件，但这是一个非常复杂的页面循环的情况，带有动态添加的控件等等，所以这不是一个选项，不幸的是:-(

我试图检查该`Request.Form["__EVENTTARGET"]`值，但由于按钮位于 UpdatePanel 内，因此该值是一个空字符串（至少我猜这就是它为空的原因）

所以基本上，有没有办法在 Page_Load 事件中检查在 UpdatePanel 中单击了哪个按钮？

提前致谢。

一切顺利，

博

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-04T17:51:20.603

您可以通过此方法在 Page_Load 事件中获取导致回发的控件 ID。

```
 protected void Page_Load(object sender, EventArgs e)
    {
           Textbox1.Text = getPostBackControlID();    
    }   

    private string getPostBackControlID()
    {
        Control control = null;
        //first we will check the "__EVENTTARGET" because if post back made by       the controls
        //which used "_doPostBack" function also available in Request.Form collection.
        string ctrlname = Page.Request.Params["__EVENTTARGET"];
        if (ctrlname != null && ctrlname != String.Empty)
        {
            control = Page.FindControl(ctrlname);
        }
        // if __EVENTTARGET is null, the control is a button type and we need to
        // iterate over the form collection to find it
        else
        {
            string ctrlStr = String.Empty;
            Control c = null;
            foreach (string ctl in Page.Request.Form)
            {
                //handle ImageButton they having an additional "quasi-property" in their Id which identifies
                //mouse x and y coordinates
                if (ctl.EndsWith(".x") || ctl.EndsWith(".y"))
                {
                    ctrlStr = ctl.Substring(0, ctl.Length - 2);
                    c = Page.FindControl(ctrlStr);
                }
                else
                {
                    c = Page.FindControl(ctl);
                }
                if (c is System.Web.UI.WebControls.Button ||
                         c is System.Web.UI.WebControls.ImageButton)
                {
                    control = c;
                    break;
                }
            }
        }
        return control.ID; 
    }
} 
```

# javascript - Javascript setInterval 范围问题

> ID：11333311
> 
> 赞同：3
> 
> 时间：2012-07-04T17:26:43.843
> 
> 标签：javascript, scope

我有一个我试图用来管理客户端会话的类，它看起来像这样：

```
var sessionmanager;

sessionmanager = (function() {

  sessionmanager.name = 'sessionmanager';

  function sessionmanager(timeout, action) {
    if (action != null) {
      this.action = action;
    } else {
      this.action = null;
    }
    if (timeout != null) {
      this.timeout = timeout * 60;
    } else {
      this.timeout = 0;
    }
  }

  sessionmanager.prototype.run = function() {
    return window.setInterval(this.tick, 1000);
  };

  sessionmanager.prototype.sessionExpired = function() {
    if (this.action != null) {
      window.navigate("timeout.asp");
    }
  };

  sessionmanager.prototype.setTimeout = function(timeout) {
    return this.timeout = timeout;
  };

  sessionmanager.prototype.tick = function() {
    this.timeout -= 1;
    if (this.timeout < 1) {
      return sessionExpired();
    }
  };

  return sessionmanager;

})(); 
```

`tick`但是，当我在从回调中调用的函数内部进行调试时，`setInterval`我得到`this.timeout = NaN`

我猜我的范围不正确？请帮忙？我是javascript新手...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-04T17:35:09.890

如果`setInterval`调用该函数，它不会`this`像您期望的那样设置值。调用`this.tick()` *确实*正确设置了它，但只是传递函数并以另一种方式调用它不会。您必须将`this`值绑定到您想要的值：

```
setInterval(this.tick.bind(this), 1000); 
```

这在较新的浏览器上可用，但有可用的填充程序。

另外，您可能的意思是`this.sessionExpired()`，因为这是它的定义。`return`在那里没有多大意义，因为`setInterval`不关心返回值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T17:31:13.380

你有没有设置过超时？你可能想要

```
sessionmanager.timeout=0; 
```

类定义中的某处。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-08T00:03:25.263

在 ES7 Javascript 中，您可以执行以下操作：

```
window.setInterval(::this.tick, 1000); 
```

双冒号语法`::`是`.bind(this)`.

# c++ - 如何正确显示角落（看里面的图片）？

> ID：11333315
> 
> 赞同：3
> 
> 时间：2012-07-04T17:27:07.720
> 
> 标签：c++, css, qt, border

我正在使用 CSS 重新设计`QFrame`. 这是CSS代码：

```
border: 5px dashed #555; 
```

这是图像示例：

![问题角落](../Images/1021daac5f0e9fcc0646a5b9f28f2763.png)

有没有办法让虚线边框的角连接成一条实线？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T00:06:57.383

我不确定 QFrame 是否接受完整的 CSS 代码，但您可以尝试

```
border-top : 5px dashed #555;
border-bottom : 5px dashed #555;
border-left : 5px solid #555;
border-right: 5px solid #555; 
```

我希望它能完成工作。

这是一个 JS Fiddle 来展示它。

[http://jsfiddle.net/qxupJ/1/](http://jsfiddle.net/qxupJ/1/)

编辑：好吧，在这种情况下，您必须在框架内使用 4 个 div，每个 div 都有一个与其角对应的背景图像。

编辑2：我有个主意！

这是解释我的新想法的小提琴：

[http://jsfiddle.net/7L5A9/](http://jsfiddle.net/7L5A9/)

基本上它是每个角的 4 个 div，它在绝对位置是“边界实体”。

我知道它看起来很丑，但我认为这是不使用图像的唯一方法，否则，如果您的容器大小不会改变，那么我认为您可以在主容器（QFrame）中使用背景图像。

希望它可以帮助你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T19:05:05.403

如果不使用 img 作为角落，则无法获得所需的效果。您可以尝试使用虚线或更小尺寸的破折号以获得更清晰的效果。

# css - twitter 引导容器 div 高度

> ID：11333317
> 
> 赞同：5
> 
> 时间：2012-07-04T17:27:15.207
> 
> 标签：css, twitter-bootstrap

我正在使用 twitter 引导程序，我希望将容器 div 拉伸到页面底部，但它没有。它始终是与内容相对应的大小。如何解决？

```
<body>
    <div id="main-wrapper">
        <div class="navbar navbar-fixed-top">
            <div class="navbar-inner">
                <div class="container">
                    <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse"> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span>
                    <div class="nav-collapse">
                        <ul class="nav">
                            ....
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                .....           
            </div>
        </div>

        <div class="container"> <!-- this is the one I want to stretch to the bottom -->
            <div class="row">
                <ui:insert name="body" />
            </div>
        </div>

        <div id="push"></div>
        </div>
        <footer role="contentinfo">
           footer content
        </footer>

    </body> 
```

的CSS：

```
footer[role="contentinfo"] {
    color: #666;
    background: black;
    padding: 18px 0;
}

footer[role="contentinfo"] p {
    margin: 0;
}
/* Sticky Footer styles begin */
html,body {
    height: 100%;
}

#push {
    height: 54px;
}

footer[role="contentinfo"] {
    height: 18px; /* accounts for padding */
}

#main-wrapper{
    min-height: 100%;
    height: auto !important;
    height: 100%;
    margin: 0px auto -54px;
} 
```

谢谢你的帮助

凯利

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T20:16:21.450

可以用一点 jQuery 来实现。

**HTML：**

```
<div id="main-wrapper">
    <div id="navbar" class="navbar navbar-fixed-top">
        <div class="navbar-inner">
            <div class="container">
                <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </a>  <!-- you forgot the closing </a> -->  
                <div class="nav-collapse">
                    <ul class="nav">
                        ....
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <div id="firstcontainer" class="container" >
        <div class="row">
            <span class="span12">
            .....
            </span> <!-- allways include a .span* in a .row -->           
        </div>
    </div>

    <div id="secondcontainer" class="container" style="background-color:#cccccc;"> <!-- this is the one I want to stretch to the bottom -->
        <div class="row">
            <div class="span12">
                <ui:insert name="body" />
            </div>
        </div>
    </div>

    <div id="push"></div>
    </div>
    <footer role="contentinfo">
       footer content
    </footer> 
```

**jQuery：**

```
function sizing() {
  var wrapperheight=$("#main-wrapper").height();
  var navbarheight=$("#navbar").height();
  var firstcontainerheight=$("#firstcontainer").height();
  var pushheight=$("#push").height();    
  var footerheight=$("#footer").height();
  var secondcontainerheight=wrapperheight-navbarheight-firstcontainerheight-pushheight-footerheight-50;
  $("#secondcontainer").height(secondcontainerheight+"px");
}
$(document).ready(sizing);
$(window).resize(sizing); 
```

**jsFiddle：**

[http://jsfiddle.net/baptme/6Lghx/1/](http://jsfiddle.net/baptme/6Lghx/1/)

* * *

**额外的：**

始终在`.span*`a 中添加 a `.row`。a 上有一种负边距`.row`来补偿第一个的左边距`.span`

你忘了关闭`<a class="btn btn-navbar">`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-13T16:43:13.847

感谢您的讨论，我得出以下解决方案：

```
jQuery.fn.fill_height = function() {
    var bodyheight = $('body').height() - 200;
    $(this).css('min-height', bodyheight + "px");
}

$(function() {
    function fill_heigh_callback() {
        $('.container.full-height').fill_height()
        $('.container-fluid.full-height').fill_height()
    }

    fill_heigh_callback()
    $(window).resize(fill_heigh_callback);
}) 
```

# asp.net - asp.net 3.5 中的信任级别

> ID：11333319
> 
> 赞同：0
> 
> 时间：2012-07-04T17:27:31.793
> 
> 标签：asp.net, web-hosting, code-access-security, trust

我创建了一个网站并使用 Godaddy 托管上传...

当我尝试访问具有编辑器以插入数据的页面时..我收到以下错误

```
*Description: *The application attempted to perform an operation not
allowed by the security policy. To grant this application the required
permission please contact your system administrator or change the
application's trust level in the configuration file.

*Exception Details: *System.Security.SecurityException: Request failed. 
```

# c# - 从 C# 应用程序远程连接到 SQL Server 2012 的最佳方式

> ID：11333322
> 
> 赞同：-1
> 
> 时间：2012-07-04T17:27:56.937
> 
> 标签：c#, sql, sql-server-2012

我正在编写一个简单的 C# 程序，并希望使用 SQL 服务器来存储来自几个用户的条目。它在本地运行良好，但我无法使用 TCP 连接。我在配置管理器中设置了远程连接并启用了 TCP。我不断收到此错误。

> 服务器未找到或无法访问。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。（提供者：SQL 网络接口，错误：26 - 错误定位服务器/指定的实例）

我的连接字符串是

“数据源=127.0.0.1\WEBSTORAGE；网络库=DBMSSOCN；初始目录=字符；用户ID=用户ID；密码=密码；”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T17:30:15.453

您需要更改`Data Source`连接字符串。`127.0.0.1`是`localhost`. 将其替换为 SQL Server 计算机的 IP 地址或计算机名称。

这是连接字符串语法的一个很好的概述：[http ://connectionstrings.com/sql-server-2008](http://connectionstrings.com/sql-server-2008)

编辑：

看来这是关闭[SQL Server Browser服务的问题。](http://msdn.microsoft.com/en-us/library/ms181087%28v=sql.105%29.aspx)当您通过网络访问命名的 SQL Server 实例时，这是必需的。

# css - 设置页面高度

> ID：11333323
> 
> 赞同：0
> 
> 时间：2012-07-04T17:28:02.837
> 
> 标签：css, height

你好地球人，我有一个图像作为我在 Photoshop 中创建的背景。图像的高度为 2500 像素。我希望页面的高度为 1500px。基本上，页面底部有很多空白空间，所以我试图缩小它。我已经测试了很多东西，但没有运气。我想知道是否有人可以帮助我。这是身体的 css 的样子：

```
.body
{
    background-image: url(final2.gif);
    background-repeat:no-repeat;
} 
```

健康长寿·繁荣昌盛。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T21:57:40.100

您确定将样式应用于正确的元素吗？

这之间有区别：

```
.body {
    background-image: url(final2.gif);
    background-repeat:no-repeat;
} 
```

和这个：

```
body {
    background-image: url(final2.gif);
    background-repeat:no-repeat;
} 
```

在第一个（您当前的代码）中，您使用一个 body 类来样式化*某些东西*，而第二个代码将为`body`元素设置样式。看到小点:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T17:29:33.757

你有没有尝试过这样的事情？

```
.body
{
    background-image: url(final2.gif);
    background-repeat:no-repeat;
    height: 1500px;
} 
```

# javascript - 鼠标悬停时更改类

> ID：11333326
> 
> 赞同：-3
> 
> 时间：2012-07-04T17:28:30.947
> 
> 标签：javascript

我在 javascript 中有一个函数，当我单击按钮时会更改跨度类，但是当我将鼠标移到跨度上时，类会更改为旧的类。为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T17:43:25.477

如果您的 html 按钮呈现如下：

```
<button class="btn-primary">Awesome Button</button>
<p>My class is <span class="label">btn-primary</span> 
```

您可以像这样替换它的类：

```
$('button').on('click', function(){
    var self = $(this);
    self.removeClass('btn-primary').addClass('btn-danger');
    $('span').text('btn-danger');
});​ 
```

[这是一个功能性的 jsFiddle 示例](http://jsfiddle.net/JsNGT/10/)

# css - CSS 输入样式

> ID：11333329
> 
> 赞同：0
> 
> 时间：2012-07-04T17:28:34.663
> 
> 标签：css, forms

我有这个输入文本和一个输入按钮...我希望将它们附加

您可以在右上角的[http://www.taranmarlowjewelry.com/](http://www.taranmarlowjewelry.com/)上看到一个示例，

如您所见，输入文本和输入按钮之间有一个空格....我怎么得到

他们要附加？

```
<form class="product_search" method="GET" action="<?php echo $pp_url?>/" >
<input name="product_search" id="wpsc_search_autocomplete" class="wpsc_product_search wpsc_live_search_embed .wpsc_live_search" autocomplete="off" />
<input type="submit" id="button" name="button" class="searchBtn" value="GO"/>
</form> 
```

任何帮助将不胜感激，并感谢您的时间:)

*   Ĵ

另外，如何使按钮的高度与输入文本的高度相同？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T17:33:23.173

将此应用于您的表单：

```
.product_search{
   font-size:0px;
} 
```

或将`input`元素一个接一个地放在同一行：

```
<input name="product_search" .... /><input type="submit" ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T17:31:05.487

尝试以下操作：

```
.searchBtn{
 padding-left:0px;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T17:35:00.690

尝试以下操作：

```
input[type=submit]
{
    margin-left:-6px;
}​ 
```

另外，在小提琴中看到这个：

[http://jsfiddle.net/Msq7y/](http://jsfiddle.net/Msq7y/)

# objective-c - 如何将设备上的图像设置为 Xcode 中的 UIImageView？

> ID：11333332
> 
> 赞同：0
> 
> 时间：2012-07-04T17:28:39.220
> 
> 标签：objective-c, xcode, uitableview, uiimageview

我希望能够拍摄我已经在我的 ipad 上捕获的图像并将其设置为我的 ViewController 内的 UIImageView。此外，我希望能够在我的 TableViewController 中有一个照片按钮图标，这将允许我拍照并将名称保存到将成为 TableViewer 单元格标题的图片中，您可以单击该名称来查看图片。我已经能够在我的支持文件中使用图片作为我设置到 UIImageView 的图像，但无法弄清楚如何拍照并将它们保存到应用程序内的 UIImageView。如果您能给我任何建议、提示或资源来查看它，将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T17:36:50.100

如果您正在谈论来自设备的图像，即用户照片，您应该使用：

1.  UIImagePickerController - 为用户提供一个选择器来选择照片 [http://developer.apple.com/library/ios/#documentation/uikit/reference/UIImagePickerController_Class/UIImagePickerController/UIImagePickerController.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIImagePickerController_Class/UIImagePickerController/UIImagePickerController.html)

或直接访问 -

1.  ALAssetsLibrary -

> 访问受照片应用程序控制的视频和照片。

[http://developer.apple.com/library/ios/#DOCUMENTATION/AssetsLibrary/Reference/ALAssetsLibrary_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#DOCUMENTATION/AssetsLibrary/Reference/ALAssetsLibrary_Class/Reference/Reference.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T18:00:10.050

采用：

```
UImageView* imview = [[UIImageView alloc] initWithImage:[[UIImage alloc] imageWithContentsOfFile:fileName]; 
```

创建一个包含存储在文件 fileName 中的图像的视图。

有关如何拍照，请查看[此 SO 线程](https://stackoverflow.com/questions/5237941/ios-take-picture)。

[在这里](http://www.ios-developer.net/iphone-ipad-programmer/development/camera/taking-a-picture)，您可以找到同时执行这两项操作的代码示例。

# ruby-on-rails - 将本地人传递给更深的部分

> ID：11333336
> 
> 赞同：1
> 
> 时间：2012-07-04T17:28:55.840
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

**我所拥有的：** 几个相同`partial`但不同`locals`的引用

```
<%= render :partial => 'link/to/partial', :locals => {:fieldtype => 'textline', :text => object.text} %>
<%= render :partial => 'link/to/partial', :locals => {:fieldtype => 'list', :list => object.list, :header => 'HEADER'} %> 
```

现在`_partial.html.erb`有以下行：

```
<%= render :partial => 'link/to/partial/'+fieldtype, :locals => locals %> 
```

**我想要什么：** 显然`:locals => locals`行不通。我如何将所有本地人链接到下一个部分？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T18:05:27.330

只是为了澄清起见，您可以将所有本地人放在这样的哈希中：

```
<% my_locals = {:fieldtype => 'textline', :text => object.text} %>
<%= render :partial => 'link/to/partial', :locals => {:my_locals => my_locals} %> 
```

（并不是说它`{}`都用于声明散列和块会令人困惑）

在您的部分中，您将执行以下操作：

```
<%= render :partial => 'link/to/partial/'+my_locals[:fieldtype], :locals => {:my_locals => my_locals} %> 
```

# c# - SqlException 中的每个 Number 是否都有自己的异常类型

> ID：11333348
> 
> 赞同：0
> 
> 时间：2012-07-04T17:30:11.023
> 
> 标签：c#, .net, sqlexception

SqlException 具有表示实际异常的 Number 属性。例如，重复键异常的编号为 2627。

此编号 2627 是否有例外类型？或者更广泛地询问对于 SqlException 的所有数字是否有任何具体类型的异常？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T17:31:14.617

没有了。这`Number`是可以用来区分故障原因的。

# web-developer-toolbar - 编辑默认的 Webkit 开发者工具布局？

> ID：11333349
> 
> 赞同：1
> 
> 时间：2012-07-04T17:30:12.887
> 
> 标签：web-developer-toolbar

每次我打开 Webkit 开发工具时，我都必须通过一系列额外的步骤来设置我喜欢的布局：

*   打开全局调试控制台
*   把它拖得更高
*   切换到网络选项卡
*   仅查看 XHR 和 WebSockets 网络活动

有没有办法可以将此布局存储为我的默认布局，这样我每次打开新标签时都不需要经历这个过程？

没那么糟糕，但是在第 1000 次之后会变得烦人的事情之一......

# android - 如何使用 Robolectric 测试碎片？

> ID：11333354
> 
> 赞同：58
> 
> 时间：2012-07-04T17:30:45.920
> 
> 标签：android, robolectric

我知道有一个`Robolectric.shadowOf(Fragment)`方法和一个`ShadowFragment`类，以为它们没有在文档中列出，但我不能让它工作。

```
myFragment = new MyFragment();
myFragment.onCreateView(LayoutInflater.from(activity), (ViewGroup) activity.findViewById(R.id.container), null);
myFragment.onAttach(activity);
myFragment.onActivityCreated(null); 
```

我正在使用 API 级别 13 (Honeycomb)。

谢谢。

* * *

## 回答 #1

> 赞同：113
> 
> 时间：2012-10-15T20:14:42.717

**编辑 #4 & #5**：在[Robolectric 3.*](https://github.com/robolectric/robolectric/wiki/2.4-to-3.0-Upgrade-Guide)中，他们拆分了片段起始函数。

对于支持片段，您需要将[依赖](https://bintray.com/bintray/jcenter/org.robolectric%3Ashadows-supportv4/view)项添加到您的`build.gradle`：

```
testCompile "org.robolectric:shadows-supportv4:3.8" 
```

进口：[`org.robolectric.shadows.support.v4.SupportFragmentTestUtil.startFragment;`](http://robolectric.org/javadoc/3.0/org/robolectric/shadows/support/v4/SupportFragmentTestUtil.html)

对于平台片段，您不需要此依赖项。进口：[`import static org.robolectric.util.FragmentTestUtil.startFragment;`](http://robolectric.org/javadoc/3.0/org/robolectric/util/FragmentTestUtil)

他们都使用相同的名称`startFragment()`。

```
import static org.robolectric.shadows.support.v4.SupportFragmentTestUtil.startFragment;

@RunWith(RobolectricTestRunner.class)
@Config(constants = BuildConfig.class)
public class YourFragmentTest
{
    @Test
    public void shouldNotBeNull() throws Exception
    {
        YourFragment fragment = YourFragment.newInstance();
        startFragment( fragment );
        assertNotNull( fragment );
    }
} 
```

**编辑#3**：Robolectric 2.4 有一个[用于支持和常规片段的 API](http://robolectric.org/javadoc/2.4/org/robolectric/util/FragmentTestUtil.html)。在构建's时，您可以使用`newInstance()`模式或使用构造函数。`Fragment`

```
import org.junit.Test;
import org.junit.runner.RunWith;
import static org.junit.Assert.assertNotNull;
import static org.robolectric.util.FragmentTestUtil.startFragment;

@RunWith(RobolectricGradleTestRunner.class)
public class YourFragmentTest
{
    @Test
    public void shouldNotBeNull() throws Exception
    {
        YourFragment fragment = new YourFragment();
        startFragment( fragment );
        assertNotNull( fragment );
    }
} 
```

**编辑#2**：如果您使用支持片段，则有一个新的助手（[支持常规活动/片段的应该在下一个版本中](https://github.com/robolectric/robolectric/blob/master/src/main/java/org/robolectric/util/FragmentTestUtil.java)）：

```
import static org.robolectric.util.FragmentTestUtil.startFragment;

@Before
public void setUp() throws Exception
{
    fragment = YourFragment.newInstance();
    startFragment( fragment );
} 
```

**编辑**：如果您升级到 Robolectric 2.0：

```
public static void startFragment( Fragment fragment )
{
    FragmentActivity activity = Robolectric.buildActivity( FragmentActivity.class )
                                           .create()
                                           .start()
                                           .resume()
                                           .get();

    FragmentManager fragmentManager = activity.getSupportFragmentManager();
    FragmentTransaction fragmentTransaction = fragmentManager.beginTransaction();
    fragmentTransaction.add( fragment, null );
    fragmentTransaction.commit();
} 
```

**原始答案**

正如其他评论者所建议的那样，您确实需要使用片段管理器（而不是调用上面列出的生命周期方法）。

```
@RunWith(MyTestRunner.class)
public class YourFragmentTest
{
    @Test
    public void shouldNotBeNull() throws Exception
    {
        YourFragment yourFragment = new YourFragment();
        startFragment( yourFragment );
        assertNotNull( yourFragment );
    } 
```

我创建了一个测试运行器，并有一个为我启动片段的函数，因此我可以在任何地方使用它。

```
public class MyTestRunner extends RobolectricTestRunner
{
    public MyTestRunner( Class<?> testClass ) throws InitializationError
    {
        super( testClass );
    }

    public static void startFragment( Fragment fragment )
    {
        FragmentManager fragmentManager = new FragmentActivity().getSupportFragmentManager();
        FragmentTransaction fragmentTransaction = fragmentManager.beginTransaction();
        fragmentTransaction.add( fragment, null );
        fragmentTransaction.commit();
    }
} 
```

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2014-01-22T21:28:41.513

你们都在艰难地做这件事。只需使用 FragmentTestUtil。

```
FragmentTestUtil.startFragment(yourfragment); 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2015-10-04T12:04:17.027

支持片段已移至模块：

> 阴影支持-v4

（截至 2015 年 7 月，Robolectric v3.0）

向 app/build.gradle 添加 gradle 依赖项：

```
testCompile 'org.robolectric:shadows-support-v4:3.0' 
```

然后导入您的 Robolectric 测试 java 类：

```
import org.robolectric.shadows.support.v4.SupportFragmentTestUtil; 
```

然后您可以开始并使用 support-v4 片段进行测试：

```
@Test
public void minimalFragmentTest() throws Exception {
    MyFunFragment fragment = new MyFunFragment();
    SupportFragmentTestUtil.startVisibleFragment(fragment);
    assertThat(fragment.getView()).isNotNull();
} 
```

参考：

*   [github changelog](https://github.com/robolectric/robolectric/commit/b7eb377f5caa86ab2cd106d3bd52a87755b766c5)，将支持片段移动到不同的模块

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-20T17:12:53.083

我很确定您必须`FragmentTransaction`使用. 创建一个`FragmentManager`，然后它才能工作。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-09-05T18:55:05.980

我只是想在 Robolectric 2.0 中添加它，即使在这样做之后：

```
activity = Robolectric.buildActivity(FragmentActivity.class).create().start().resume().get();
fragment.show(activity.getSupportFragmentManager(), null);
fragment.getDialog();  //This stills returns null 
```

它仍然为我返回 null 。我所做的是添加`activity.getSupportFragmentManager().executePendingTransaction();`并且它有效。

似乎 robolectric 出于某种原因没有运行它。似乎 Looper 已暂停或其他什么。这对我有用的任何方式，它看起来像这样：

```
activity = Robolectric.buildActivity(FragmentActivity.class).create().start().resume().get();
fragment.show(activity.getSupportFragmentManager(), null);
activity.getSupportFragmentManager().executePendingTransactions();
fragment.getDialog(); 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2020-02-28T07:23:22.697

旧的 android 片段已经被弃用，似乎支持片段很快也会被弃用。要测试 androidx 片段，您可以使用带有 robolectric 的片段场景[https://developer.android.com/training/basics/fragments/testing](https://developer.android.com/training/basics/fragments/testing)

```
testImplementation 'androidx.fragment:fragment-testing:1.2.2' 
```

```
val scenario = launchFragmentInContainer<MyFragment>()
scenario.onFragment { fragment ->
    assertNotNull(fragment.view.synteticInflatedView)
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-04-28T09:54:25.023

```
SupportFragmentTestUtil.startFragment(fragment, AppCompatActivity::class.java) 
```

如果活动延长`AppCompatActivity`

这是使用 Kotlin

# hibernate - Hibernate DTO 和值对象映射

> ID：11333369
> 
> 赞同：9
> 
> 时间：2012-07-04T17:31:47.653
> 
> 标签：hibernate

将休眠实体带到表示层是一种好习惯吗？或者我们是否需要将实体的所有属性映射到一个值对象并且值对象将用于 UI？

请让我知道这两种方法的优缺点。

我们什么时候应该使用什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-04T18:52:47.323

你所说的 DTO 是 ORM 中的实体。它们通常是包含业务逻辑的域模型的一部分，并且大多数时候包含的数据比渲染单个视图所需的数据多。我个人的经验法则

**当 DAL 和视图之间没有传输层并且业务逻辑很少时，在视图中使用实体：**

*   好处：
    *   一个模型
    *   无需在模型之间映射
    *   更容易使用延迟加载
*   缺点：
    *   模型的每一次变化都意味着视图的变化
    *   传输层的许多缺点见下文

**当存在传输层和/或视图数据与实体不同或聚合许多不同实体时，将实体映射到 DTO**

*   好处：
    *   当模型发生更改时，DTO/视图不必更改
    *   避免通过存在大量问题的线路发送实体（延迟加载异常，发送大量不需要的数据，暴露敏感信息，...）
    *   模型的职责更少（序列化），这使得它们更容易重用（例如后端处理）
*   缺点：
    *   更多类要写
    *   将实体转换为 DTO 的代码

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-08T18:59:05.720

如果您跨不同的层和模块公开您的实体，您还可以获得更多的性能和 RAM 使用效率。走哪条路完全取决于您，但我从未见过企业甚至中型应用程序将实体暴露在其数据服务项目/层之外。

# java - java序列化过程序列化什么？

> ID：11333375
> 
> 赞同：-5
> 
> 时间：2012-07-04T17:32:26.473
> 
> 标签：java, oop, serialization

java 为一个对象序列化什么？

静态字段？

非静态字段？

方法原型？

方法体？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T17:35:15.503

默认情况下，使用内置的东西？

非静态（非瞬态）字段，对类的引用（完全确定方法原型和主体），仅此而已。

自定义序列化可以做任何你想做的事情，但是序列化应该写一个单一的实例对象，这当然排除了静态方法或变量......

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-04T17:52:38.173

方法没有被序列化，因为它们来自类定义本身。静态字段没有被序列化，因为它们再一次不属于实例本身，而是属于类（如果序列化值可以应用于另一侧，那么在每个实例中序列化某些东西的意义是什么？ ）。所以答案只是字段。

但是即使对于字段，也存在文件被限定为`transient`并且这些不会被序列化的情况。例如：

```
public class T implements Serializable {
   transient int i = 0;
} 
```

在这种情况下，`i`不会被序列化，并且每个反序列化的实例都将呈现`i`值 0。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-04T17:35:49.170

> 静态字段？

不

> 非静态字段？

前提是它们不是`transient`并且类实现`Serializable`

> 方法原型？

不

> 方法体？

不。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-05T21:04:05.853

它序列化实例数据，而不是静态数据或方法。有许多方法可以调整保存的数据，使用`transient`关键字、`Externalizable`界面和其他一些东西。

至关重要的是，如果一个对象直接或间接地引用了其他对象，那么所有其他对象也将被序列化。因此，序列化一个对象可能会导致数百万个对象的序列化。它是一个强大的工具，*无论*善恶。

此外，如果您向 ObjectOutputStream 写入多个对象，并且已经直接或间接写入了一个对象，则只会将引用发送到流。在被读取时，新对象将包含第一次写入的数据。写入文件时这不是问题，但是（以及大量内存使用）在写入套接字时可能会令人尴尬。（无论如何，这让我很尴尬。提示：使用*reset()*方法。）

# objective-c - 如何在 UITableViewCell 中放置不同长度的文本？

> ID：11333376
> 
> 赞同：0
> 
> 时间：2012-07-04T17:32:29.717
> 
> 标签：objective-c, uitableview, resize

我所拥有的是：

*   一个 NSString 可以有 1 到 400 个字符之间的任意长度
*   一个 UITableViewCell（自定义布局）

我尝试使用具有多行的 UILabel，设置文本并调用 sizeToFit。这并不总是有效，大多数时候 UILabel 只是剪掉不适合的字符串部分。此外，由于文本的长度不同，我需要不同大小的 UITableViewCells，并且在调用“tableView: cellForRowAtIndexPath:”时我不知道高度是多少。

所以我需要的是一个非滚动的 UI 元素，它能够显示文本并调整其高度（宽度应保持不变）以完全适合文本。如前所述，sizeToFit 方法主要产生垃圾。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T18:30:57.163

您可以使用 SizeWithFont: 计算单元格所需的高度并将其存储在一个数组中，以便您可以在 HeightForRowAtIndexPath 中返回该高度。如果您需要更新文本，只需有一个方法重新计算高度，将其保存到数组中，然后更新表格。就像是：

```
 CGSize constraintSize;
 constraintSize.width = 290.0f;
 constraintSize.height = MAXFLOAT;
 NSString *text = @"YOUR TEXT"

 CGSize theSize = [text sizeWithFont:[UIFont systemFontOfSize:15.0f] constrainedToSize:constraintSize lineBreakMode:UILineBreakModeWordWrap];

 NSLog(@"height: %f",theSize.height); 
```

会给你身高。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T18:24:15.300

当您在电话应用程序中输入一个 loooong 号码时，此配置应该会为您提供类似于您所看到的内容 -

```
label.minimumFontSize = 4; //a very small font size
label.adjustsFontSizeToFitWidth = YES;
label.lineBreakMode = UILineBreakModeWordWrap;// change to what works for you
label.numberOfLines = 0; 
```

请参阅[lineBreakMode 文档](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/NSString_UIKit_Additions/Reference/Reference.html#//apple_ref/doc/c_ref/UILineBreakMode)

# ruby - Ruby-mp3info 专辑封面

> ID：11333378
> 
> 赞同：3
> 
> 时间：2012-07-04T17:32:45.377
> 
> 标签：ruby, mp3

我有这个 gem，这样我就可以更改给定歌曲的 id3 数据。但是，我还需要能够将专辑插图添加到歌曲中。我在给定的 URL 上有艺术品。我该怎么做？

```
Mp3Info.open(file.path) do |mp3|
  mp3.tag.title  = title
  mp3.tag.artist = artist
end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T16:42:59.223

似乎 ruby​​-mp3info 目前仅支持文本框架，请参见此处：[https ://github.com/moumar/ruby-mp3info/blob/v0.7.1/lib/mp3info/id3v2.rb#L319](https://github.com/moumar/ruby-mp3info/blob/v0.7.1/lib/mp3info/id3v2.rb#L319)

使用[taglib-ruby](http://robinst.github.com/taglib-ruby/)，它会像这样工作：

```
require 'taglib'
require 'open-uri'

picture_data = open(picture_url).read

TagLib::MPEG::File.open(file.path) do |file|
  tag = file.id3v2_tag

  pic = TagLib::ID3v2::AttachedPictureFrame.new
  pic.picture = picture_data
  pic.mime_type = "image/jpeg"
  pic.type = TagLib::ID3v2::AttachedPictureFrame::FrontCover

  tag.add_frame(pic)
  file.save
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T00:00:16.980

如果您不使用 mp3Info gem，请尝试使用 id3Lib，[http](http://id3lib-ruby.rubyforge.org/) ://id3lib-ruby.rubyforge.org/ 。根据我的经验，那个更好。

不确定，但尝试读取文件并将其直接设置为

mp3.tag2.APIC

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T23:03:52.193

使用 ruby​​-mp3info 你可以添加艺术品：

从[文档](http://github.com/moumar/ruby-mp3info)中：

```
file = File.new('input_img','rb')
Mp3Info.open '1.mp3' do |m|
  m.tag2.add_picture(file.read)
end 
```

# javascript - Javascript：检测复选框不适用于只有 1 个复选框的表单。与 2 人或更多人合作

> ID：11333381
> 
> 赞同：0
> 
> 时间：2012-07-04T17:33:02.247
> 
> 标签：javascript, forms

我有下面的功能。它从复选框中获取值并将其传输到文本框。它正在工作......但前提是表单有 2 个或更多复选框。

```
<script type="text/javascript">
    function sendValue()
    {
        var all_values = '';
        boxes = document.DataRequest.itens.length

            for (i = 0; i < boxes; i++)
            {
                if (document.DataRequest.itens[i].checked)
                {
                    all_values = all_values + document.DataRequest.itens[i].value + ","

                }
            }

        window.opener.document.getElementById('emailto').value = all_values;
        self.close();
    }
</script>

<form name="DataRequest">
    <input name="itens" type="checkbox" value="name1">
    <input name="itens" type="checkbox" value="name2">
</form> 
```

我是否错过了仅使用 1 个复选框来完成这项工作的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T17:41:38.487

当有一项时。它不返回数组

```
 function sendValue()
    {
        var all_values = '';
        boxes = document.DataRequest.itens.length
            if(boxes>1)
            {
            for (i = 0; i < boxes; i++)
            {
                if (document.DataRequest.itens[i].checked)
                {
                    all_values = all_values + document.DataRequest.itens[i].value + ","

                }
            }
            }
           else
             {
              if (document.DataRequest.itens.checked)
                {
                    all_values = document.DataRequest.itens.value 

                }
             }

        window.opener.document.getElementById('emailto').value = all_values;
        self.close();
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T17:44:44.903

首先，您需要为您的输入指定不同的名称：

```
<form name="DataRequest">
    <input name="item1" type="checkbox" value="name1">
    <input name="item2" type="checkbox" value="name2">
</form> 
```

在您的情况下，对您的输入使用相同的名称在技术上是可能的，但这是一种糟糕的做法，因为名称通常是不同输入形式的标识。

然后，要访问您的输入，您必须使用不同的语法。可能有多个版本，但您可以这样做：

```
var boxes = document.forms['DataRequest'].getElementsByTagName('input');
var tokens = [];
for (var i=0; i<boxes.length; i++) {
    if (boxes[i].checked) tokens.push(boxes[i].name+'='+boxes[i].value);
}
var all_values = tokens.join(','); 
```

请注意，使用`join`避免了尾随逗号。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T17:54:01.957

不确定您需要多少与 IE 6 - 8 的兼容性，但如果不需要，您可以使用

```
function serializeChecked() {
   var values = [];
   var checked_boxes = document.querySelectorAll('form[name="DataRequest"] input[checked]');
   for (var i = 0, l = checked_boxes.length; i < l; i++) {
     values.push(checked_boxes[i].getAtrribute('value'))
   }
   return values.join(',');
}

function sendValue() {
  window.opener.document.getElementById('emailto').value = serializeChecked();
} 
```

如果确实需要 IE 支持，请使用 document.DataRequest.getElementsByTagName('input') 而不是 QSA 并遍历它们以收集具有选中属性的值。

# c# - 计算文件中以某个字符开头并以不同字符结尾的所有行

> ID：11333382
> 
> 赞同：0
> 
> 时间：2012-07-04T17:33:02.347
> 
> 标签：c#, winforms, file, text

我想要实现的是加载一个文本文件，然后计算所有行：

1.  以字符“X”开头
2.  以字符“Y”结尾

我的代码如下所示：

```
string txtContent;
try
{
    if (openFileDialog1.ShowDialog() == DialogResult.OK)
    {
        txtContent = File.ReadAllText(openFileDialog1.FileName);

    }
}
catch (Exception ex) {
    MessageBox.Show(ex.Message, "Form1", MessageBoxButtons.OK, MessageBoxIcon.Error);
} 
```

我正在将 txt 文件内容读入`txtContent`字符串变量。但我不知道如何继续？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-04T17:36:25.933

好吧，让我们做“提示”，而不仅仅是给你代码......

*   在 UI 线程中读取文件通常是个坏主意。快速实验没关系，但不要在生产代码中进行。
*   如果要读取文件中的*行*，请使用[`File.ReadAllLines`](http://msdn.microsoft.com/en-us/library/system.io.file.readalllines.aspx)(.NET 2+) 或[`File.ReadLines`](http://msdn.microsoft.com/en-us/library/dd383503)(.NET 4+)
*   使用[`string.StartsWith`](http://msdn.microsoft.com/en-us/library/system.string.startswith.aspx)and[`string.EndsWith`](http://msdn.microsoft.com/en-us/library/system.string.endswith.aspx)确定字符串是否以特定方式开始或结束
*   考虑使用 LINQ 的[`Count()`](http://msdn.microsoft.com/en-us/library/bb535181.aspx)方法来计算与谓词匹配的项目

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T17:59:06.293

一个完全不适合家庭作业的班轮。;)

```
File.ReadLines(somePath).Count(line=>Regex.IsMatch(line,"(^X.*$)|(^.*Y$)")) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T17:37:17.713

这听起来像是功课，在这种情况下，我会给你指点——

如果您使用[File.ReadAllLines](http://msdn.microsoft.com/en-us/library/system.io.file.readalllines.aspx)（而不是`ReadAllText`），您将获得每行的数组。

然后，您可以使用[String 上的方法](http://msdn.microsoft.com/en-us/library/7wtc81z6)，例如 (`StartsWith`和`EndsWith`) 来检查您的条件...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-04T17:37:35.573

如果您的目标是计算某些匹配行，那么将所有文本读入内存并不是很有效。相反，我会使用缓冲流并一次处理一条线

```
using (FileStream fs = File.Open(openFileDialog1.FileName, FileMode.Open, FileAccess.Read, FileShare.ReadWrite))
using (BufferedStream bs = new BufferedStream(fs))
using (StreamReader sr = new StreamReader(bs))
{
    string line;
    while ((line = sr.ReadLine()) != null)
    {
        if (line.StartsWith(START_CHARACTER) || line.EndsWith(END_CHARACTER))
        { 
            count++;
        }
    }
} 
```

# iphone - GameCenter 玩家数据

> ID：11333383
> 
> 赞同：0
> 
> 时间：2012-07-04T17:33:09.463
> 
> 标签：iphone, ios, game-center

我可以通过邮件向排行榜中的顶级玩家发送消息吗？有没有办法获取他们的电子邮件列表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T22:38:03.030

我很确定 Apple 永远不会向用户（或开发人员）提供其他用户的个人信息，例如他们的电子邮件地址。这将导致各种虐待和恶意。

你可以在你的应用程序中询问信息，有些人会自愿提供，尽管很多人不会。您必须提供自己的服务器来收集信息；除了游戏统计信息之外，没有游戏中心功能可以将信息从用户传回给开发者。

如果电子邮件是您唯一想要的东西，我认为 Apple 会批准一个应用程序，让用户有理由向您发送电子邮件，那么您可以使用 From: 或 Reply To: 地址与他们沟通。但这仍然是用户自愿的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T17:48:55.150

如果您有电子邮件地址，则可以使用[MFMailComposeViewController](http://developer.apple.com/library/ios/DOCUMENTATION/MessageUI/Reference/MFMailComposeViewController_class/Reference/Reference.html)发送电子邮件。希望我有所帮助。

# iframe - 登录/退出按钮不再保持状态

> ID：11333391
> 
> 赞同：1
> 
> 时间：2012-07-04T17:34:28.857
> 
> 标签：iframe, facebook-javascript-sdk, facebook-social-plugins, facebook-login

我的代码在过去 24 小时之前都运行良好。我没有改变任何东西，但现在#fb 按钮变小了，它不再显示“注销”。

您可以在[Homewrd](http://homewrd.com/pet/4fb8a6bf03fc592e5700046f)看到这一点。

以下代码嵌套在 BODY > ROOT 中：

```
<div id="fb-root"></div>
<script type="text/javascript">
    // Load the SDK Asynchronously
    (function(d){
        var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
        if (d.getElementById(id)) {return;}
        js = d.createElement('script'); js.id = id; js.async = true;
        js.src = "//connect.facebook.net/en_US/all.js";
        ref.parentNode.insertBefore(js, ref);
    }(document));

    // Init the SDK upon load
    window.fbAsyncInit = function() {
        FB.init({
            appId:'271193286279763',
            channelUrl:'//'+window.location.hostname+'/channel',
            status:true,
            cookie:true,
            xfbml:true
        });

        // Conditional UI for landing page
        if (landing) {
            FB.getLoginStatus(function(response) {                                                                                                                              
                if(response && response.status == 'connected') {                                                                                                                
                    FB.api('/me', function(response) {
                        var heading = $('#goods h1').text().replace('Homewrd','Welcome '+response.first_name+'!');
                        $('#goods h1').text(heading);
                    });
                }
            });
        }

        // listen for and handle auth.statusChange events
        FB.Event.subscribe('auth.statusChange', function(response) {
            fbEventful = true;
            if (response.authResponse) {
                fbToken = response.authResponse.accessToken;
                $('#fb-button').css({'display':'inline','float':'left'});
                $('#toolbox').css({'display':'inline'});
                $('#local-login').hide();
                $('#local-logout').hide();
                currentUser = {
                    fbid:response.authResponse.userID
                }
                displayPicture();
            } else {
                $.cookie('cuat', null);
                $.ajax({
                    url:'/logout.json',
                    type:'delete',
                    success:function() {
                        ajaxOff();
                        renderLocal();
                    }
                });
            }
        });

        FB.Event.subscribe('auth.login',
            function(response) {
                FB.api('/me', function(me){
                  if (me.name) {
                    currentUser = {
                        fbid:me.id,
                        email:me.email,
                        first_name:me.first_name,
                        last_name:me.last_name
                    }
                    params = {
                        fbid: currentUser.fbid,
                        user: {
                            fbid:currentUser.fbid,
                            email:currentUser.email,
                            first_name:currentUser.first_name,
                            last_name:currentUser.last_name
                        }
                    }
                    $.ajax({
                        url:domain+'/user.json',
                        data:params,
                        dataType:'json',
                        type:'post',
                        success:function(e) {
                            cuat = e.user.auth_token;
                            $.cookie('cuat', cuat, {
                                path:'/',
                                expires:7
                                }
                            );
                            if (rurl) {
                                refreshSession();
                            }
                            if (storedProcedure!==null) {
                                storedProcedure();
                            }
                        }
                    });
                  }
                });
            }
        );

        $('#local-logout a').click(function(e) {
            e.preventDefault();
            var x = confirm('Are you sure that you want to logout?');
            if (x===true) {
                ajaxOn();
                $.ajax({
                    url:'/logout.json',
                    type:'delete',
                    success:function() {
                        ajaxOff();
                        window.location.reload();
                    }
                });
            }
            return false;
        });

        setTimeout(function() {
            if (!fbEventful) {
                renderLocal();
            }
        },1000);
    }
</script>
<div id="header">
    <div id="logo">
        <h1>Logo Link</h1>
    </div>
    <div id="session">
        <div id="fb-button" autologoutlink="true" class="fb-login-button" scope="publish_stream,email,user_about_me,user_birthday,user_hometown,offline_access"></div>
        <div id="fb-picture"></div>
        <div id="local-login"><p>local login link</p></div>
        <div id="local-logout"><p>local logout link</p></div>
    </div>
</div> 
```

# android - 报警管理器不广播，或者广播接收器接收不到广播

> ID：11333396
> 
> 赞同：1
> 
> 时间：2012-07-04T17:35:04.190
> 
> 标签：android, broadcastreceiver, alarmmanager

我创建了一个方法，通过按下我的主要活动下的保存按钮来调用它，如下所示：

```
public  void scheduleAlarms(Context ctxt) {
        String [] calvalue = (MessageDelay.getSelectedItem().toString()).split(" ",   3);
        int H = Integer.parseInt(calvalue[1]);
        Log.v("Timer","Timer"+H);

        switch (H){

        case 9:
                H=9;
                break;
        case 12:
                H=12;
                break;

        case 3: 
                H=15;
                break;
        case 5: 
                H=17;
                break;
        case 6: 
                H=18;
                break;
        case 8: 
                H=20;
                break;

        }
        Calendar cal = Calendar.getInstance();
        cal.set(Calendar.HOUR_OF_DAY, H);
        cal.set(Calendar.MINUTE, 0);
        cal.set(Calendar.SECOND, 0);
        cal.set(Calendar.MILLISECOND, 0);

          AlarmManager mgr=(AlarmManager)getSystemService(Context.ALARM_SERVICE);
          Intent i=new Intent(getApplicationContext(), AlarmReceiver.class);
          PendingIntent pi=PendingIntent.getService(getApplicationContext(), 0, i, 0);

          mgr.setRepeating(AlarmManager.RTC,cal.getTimeInMillis(),AlarmManager.INTERVAL_DAY, pi);
          Log.v("Timer","Timer");
        } 
```

然后我添加了一行来显示如下：

```
<receiver android:process=":remote" android:name=".AlarmReceiver"></receiver> 
```

然后创建了一个接收器类，如下所示：

```
public class AlarmReceiver extends BroadcastReceiver {
    @Override
    public void onReceive(Context context, Intent intent) {
        try {
            Toast.makeText(context, "broadcast received", Toast.LENGTH_SHORT).show();
            // Set up new intent
            Intent newIntent = new Intent(context, SendMessage.class);

            // Start new intent
            context.startService(newIntent);
        } catch (Exception e) {
            Toast.makeText(context, "There was an error somewhere, but we still received an alarm", Toast.LENGTH_SHORT).show();
            e.printStackTrace();
        }
    }
} 
```

但是由于某种原因，当我在模拟器上测试它时，我无法接收到任何广播:(

谁能告诉我我做错了什么？

提前谢谢了

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T03:17:19.787

您正在使用`PendingIntent`服务，但希望收到广播。尝试使用`PendingIntent.getBroadcast()`.

# objective-c - 在 iOS 中解压缩下载的文件

> ID：11333399
> 
> 赞同：27
> 
> 时间：2012-07-04T17:35:17.250
> 
> 标签：objective-c, ios, zip, unzip

使用 ASIHTTPRequest，我下载了一个 zip 文件，其中包含一个包含多个音频文件的文件夹。我尝试使用`SSZipArchive`和解压缩文件`ZipArchive`，它们都基于`minizip`.

当我编译代码时，我得到这个错误：`Undefined symbols for architecture i386: "_OBJC_CLASS_$_ZipArchive", referenced from: objc-class-ref in AppDelegate.o`.

如何在 iOS 中解压缩此文件？

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-07-04T17:36:53.707

我过去曾成功使用过**[ZipArchive](http://code.google.com/p/ziparchive/)**。它非常轻巧且易于使用，支持密码保护、ZIP 内的多个文件以及压缩和解压缩。

基本用法是：

```
NSString *filepath = [[NSBundle mainBundle] pathForResource:@"ZipFileName" ofType:@"zip"];
ZipArchive *zipArchive = [[ZipArchive alloc] init];
[zipArchive UnzipOpenFile:filepath Password:@"xxxxxx"];
[zipArchive UnzipFileTo:{pathToDirectory} overWrite:YES];
[zipArchive UnzipCloseFile];
[zipArchive release]; 
```

更多关于这个包的例子[在这里](http://transoceanic.blogspot.in/2011/07/compressuncompress-files-on.html)

我也在一些项目中尝试过**[SSZipArchive 。](https://github.com/soffes/ssziparchive)**下面的行将解压缩您的 zip 文件。

```
[SSZipArchive unzipFileAtPath:path toDestination:destination]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-07-08T18:13:52.873

首先，在 iOS 7 中，Apple 引入了本地压缩/解压缩文件的功能。您还可以选择通过邮件、消息、空投和“打开方式”发送 zip 文件。关键是：**zip 文件必须支持 iOS**有些支持，有些不支持。第一步：确定您的文件是否受支持。通过简单检查您新保存的文件来做到这一点。尝试打开它。如果它卡在“Waiting...”中，它*可能*不受支持。如果是这种情况，请尝试其他库或使用解决方法。

现在，以编程方式执行此操作**目前需要**使用第三方库来保存 zip 文件并解压缩它们。这并不理想，因为很多人/公司都避免使用它们。话虽如此，答案标记为正确，ZipArchive 是一个很棒的第三方工具，特别是因为它现在支持 Swift。我建议在 Apple 引入本地库之前使用它。

* * *

## 回答 #3

> 赞同：-5
> 
> 时间：2013-08-16T19:14:01.200

在 iOS6 上，ZIP 文件似乎像文件夹一样处理。我通过简单地执行以下操作取得了成功：

```
[[NSFileManager defaultManager] copyItemAtPath:[NSURL URLForCachesDirectoryWithAppendedPath:@"ZIP_FILE.zip/Contents/Test.m4a"].path
                                        toPath:[NSURL URLForCachesDirectoryWithAppendedPath:@"Test.m4a"].path
                                         error:nil]; 
```

您甚至可以创建一个目录列表来解压缩具有未知内容的文件。虽然不知道受密码保护的 ZIP 文件。

# c++ - 如何在 Windows 中配置 cURL 库？

> ID：11333400
> 
> 赞同：0
> 
> 时间：2012-07-04T17:35:18.150
> 
> 标签：c++, libcurl

我想在我的 Windows 系统上构建 libcurl。

目前我正在使用 eclipse cdt 和 mingw 编译器。我最近还在我的系统上安装了 cygwin 1.7*。我想构建/安装 cURL 7.26.0。但是当我给

```
sh configure 
```

curl根文件夹中的命令我收到以下错误。

```
$ sh configure
checking whether to enable maintainer-specific portions of Makefiles... no
checking whether to enable debug build options... no
checking whether to enable compiler optimizer... (assumed) yes
checking whether to enable strict compiler warnings... no
checking whether to enable compiler warnings as errors... no
checking whether to enable curl debug memory tracking... no
checking whether to enable hiding of library internal symbols... yes
checking whether to enable c-ares for DNS lookups... no
checking for sed... /usr/bin/sed
checking for grep... /usr/bin/grep
checking for egrep... /usr/bin/grep -E
checking for ar... no
configure: error: ar not found in PATH. Cannot continue without ar. 
```

谁能告诉我哪里出错了。或者如果需要安装其他任何东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T18:00:03.937

从这个[线程](http://curl.haxx.se/mail/archive-2009-08/0020.html)： 为什么不使用 cygwin 安装程序安装预构建的 cygwin 版本的 curl？

> 安装cygwin时，有安装curl的选项吗？- 它不是最小基本已安装文件集的一部分。gcc 也不是。您需要在安装程序中选择它。重新运行 cygwin 安装程序，单步执行 Select Packages 部分。展开“网络”项目。Curl 与其他有用的工具（如 cadaver、wget 等）一起存在。单击“新建”列下显示“跳过”的位置以切换选择。它可能会循环通过多个版本。选择所需内容后，单击“下一步”继续。除非您更改它们的选择状态，否则安装程序将不理会您现有的已安装软件包（但如果可用，它将更新到较新的版本）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T17:45:06.380

好吧，它告诉你需要 install [`ar`](http://linux.die.net/man/1/ar)，所以这样做。

启动 Cygwin 安装程序，并找到合适的包（可能类似于`C development environment`没有找到单独的`ar`包）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-04T18:05:42.933

如果你想使用 mingw 工具包（我会推荐它反对 cygwin），你可以使用 msys 来支持 unix-tools（sh 等）。

确保您的 PATH ( `echo $PATH`) 中有 mingw bin 并确保您使用 mingw 的 gcc，而不是 cygwin ！

Cygwin 需要大量的依赖，这就是我不推荐它的原因。

# objective-c - Objective-C：文件管理器，删除文件的麻烦

> ID：11333402
> 
> 赞同：1
> 
> 时间：2012-07-04T17:35:26.357
> 
> 标签：objective-c, nsfilemanager

我有以下方法，它将文件名作为字符串接收，然后将其附加到在方法之外声明的路径。

```
-(BOOL)deleteFile:(NSString *)filename{

NSFileManager *fileManager = [NSFileManager defaultManager];

NSString *myPathDocs = [documentsDirectory stringByAppendingPathComponent:filename];
NSLog(@"[deleteFile] *myPathsDocs: %@", myPathDocs);

NSLog(@"[deleteFile] about to delete file");
//delete file
BOOL success = [fileManager removeItemAtPath:myPathDocs error:NULL];
NSLog(@"[deleteFile] success? %@", success);

return success; 
```

它从目录中删除文件，但随后程序崩溃而没有返回，甚至没有返回

```
NSLog(@"[deleteFile] success? %@", success); 
```

有任何想法吗？我认为这可能很明显，我只是没有看到，但我已经看过很多次了，一切似乎都井井有条。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T17:37:27.157

变量`success`的类型为 BOOL，`%@`格式说明符用于对象。因此，当 NSLog 尝试使用您的布尔值（1 或 0）作为指针时，它会因分段错误而崩溃。采用

```
NSLog(@"Success: %@", success ? @"YES" : @"NO"); 
```

反而。

# java - 使用 GET REST 调用提取以 json 格式返回的不同值

> ID：11333403
> 
> 赞同：2
> 
> 时间：2012-07-04T17:35:31.930
> 
> 标签：java, json, string, rest

我正在开发一个应用程序，在该应用程序中我使用 GET REST 调用来获取一些特定节点，这些节点返回给我以下 json 格式的节点：

```
[

   {

    "nodeId": "30",

    "datasetId": "2",

    "localId": "30",
    "datasetName": "Optimal Travel Route",
    "nodeName": "Location30",
    "nodeDesc": "Find the optimal travel route using travelling salesman problem  ",
    "nodeStatus": "Private",
    "gpsLat": "8.233240",
    "gpsLong": "15.029300",
    "addedBy": "internIITD",
    "addedOn": "2012-06-29 11:08:28",
    "updatedOn": "2012-06-29 11:08:28"
  }

] 
```

它们不是换行符。我在此处添加以使其可读。我这样做是为了将其转换为字符串。：

```
 BufferedReader in = new BufferedReader(new InputStreamReader(
                                      httpCon.getInputStream()));

              String inputLine;
              StringBuilder sb = new StringBuilder();
              while ((inputLine = in.readLine()) != null) {
                  sb.append(inputLine);
                      System.out.println(inputLine);
               }
              String Result;
              Result=sb.toString();
              System.out.println("result:"+Result); 
```

**我想提取满足特定要求的节点的经度和纬度。**我在 NetBeans 7.1.2 工作。我是 JAVA 的新手。 **所以，谁能告诉是否有任何方法可以提取此纬度和经度信息并将其存储在整数变量中。** 我曾经声明 JSONObject 但它在这里不起作用。我不知道为什么？我无法在我的代码中使用 JSONArray 或 JSONObect。它向我显示一个错误。在我正在执行此操作的类中没有邮件功能。此类 ie 文件已被其他一些 .java 文件调用。我的应用程序中有多个窗口。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T18:10:14.927

这将是一个解决方案：

```
String jsonSource = /* your json string */;
JSONArray array = new JSONArray(jsonSource);
for (int i = 0; i < array.length(); i++) {
    JSONObject firstObject = (JSONObject) array.get(i);
    System.out.println("Lat is:  " + firstObject.getDouble("gpsLat"));
    System.out.println("Long is: " + firstObject.getDouble("gpsLong"));
} 
```

这将打印：

```
Lat is:  8.23324
Long is: 15.0293 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T17:41:42.823

该字符串中最外层的字符是方括号，因此您不是在处理 JSON 对象，而是有一个 JSON 数组。

你说你`JSONObject`在其他情况下使用过。[`JSONObject`](http://www.json.org/javadoc/org/json/JSONObject.html)用于对象（以 a 开头`{`）。由于您在这里拥有的是一个数组，因此您想使用它[`JSONArray`](http://www.json.org/javadoc/org/json/JSONArray.html)。

从该字符串创建 a 后`JSONArray`，调用`getJSONObject(0)`它会为您`JSONObject`获取数组的第一个元素（实际上包含您发布的示例中的数据）。假设您发布的结构，您需要执行以下操作：

```
JSONArray outerArray = new JSONArray(Result);
JSONObject nodeObject = outerArray.getJSONObject(0); 
```

之后，您可以`nodeObject`像其他任何`JSONObject`.

# css - CSS - 比页面更宽的中心内容

> ID：11333405
> 
> 赞同：4
> 
> 时间：2012-07-04T17:35:36.980
> 
> 标签：css

这是一个简单的谜题，今天让我沮丧了一段时间：

考虑这个页面标记：

```
<head>
    <style type="text/css">
        #wrapper { overflow: hidden; }
        #content { width: 750px; height: 100px; background: orange; }
    </style>
</head>
<body>
    <div id="wrapper">
        <div id="content">Foo bar</div>
    </div>
</body> 
```

*无论视口宽度*如何，我如何才能`div#content`在页面中居中？

 *我尝试了各种技巧（包括）和绝对定位，但是当浏览器窗口的宽度低于 750 像素时`text-align: center; display: inline-block;`，所有这些都是左对齐的。`div#content`

过去我见过一些知名网站这样做。例如在 Apple.com 上他们为新的 Retina iPad 做广告时：图片中的 iPad 是一个非常宽的图像，超出了主页区域（注意它不是`<body>`元素的 CSS 背景图像），但它不会导致滚动当浏览器窗口只适合主页内容时。不幸的是，我似乎找不到任何这样做的现有网站，所以我找不到参考。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-04T19:32:52.380

是这个吗？看看-> [http://jsfiddle.net/joplomacedo/CkvuG/](http://jsfiddle.net/joplomacedo/CkvuG/)

HTML

```
<div id="page">
  <div id="main">
      <div id="extended-out"><img src="http://myfreeipad.us.com/wp-content/uploads/2011/10/ipad.png" /></div>
  </div>
</div> 
```

CSS

```
#page {
  overflow: hidden;
  min-width: 200px; /*same as #mains width*/
}

#main{
  position: relative;
  height: 500px;
  width: 200px;
  margin: 0 auto;
  background-color: lightgreen;
}

#extended-out { 
  height: 200px;
  margin: 0 -100px;
  background: indianred;
  border: 1px solid red;
}

#extended-out img {
    width: 100%; height: 100%;
} 
```

​</p>

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-04T17:39:30.560

[http://jsfiddle.net/CNNcV/](http://jsfiddle.net/CNNcV/)

```
<head>
        <style type="text/css">
            #wrapper { overflow: hidden; }
            #content { width: 750px; height: 100px; background: orange; 
            margin:0px auto;
            width:100%;}
        </style>
    </head>
    <body>
        <div id="wrapper">
            <div id="content">Foo bar</div>
        </div>
    </body>​ 
```

那是你要找的吗？

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-04T17:39:34.913

加上`margin: auto`这个，

```
#content { width: 750px; height: 100px; background: orange; margin: auto} 
```*

# wpf - 如何在列表框中绑定xml文件？

> ID：11333406
> 
> 赞同：1
> 
> 时间：2012-07-04T17:35:47.440
> 
> 标签：wpf, xml, listbox, bind

我有一个 xml 文件，如图所示：

```
<?xml version="1.0" encoding="utf-8"?>
<PhoneBook xmlns="http://tempuri.org/PhoneBook.xsd">
<Person>
<PersonItem name="name1" famil="famil1">
  <Numbers>
    <NumbersItem number="123456" />
    <NumbersItem number="789100" />
  </Numbers>
</PersonItem>
</Person>
<Person>
<PersonItem name="name2" famil="famil2">
  <Numbers>
    <NumbersItem number="654321" />
    <NumbersItem number="111213" />
  </Numbers>
</PersonItem>
</Person>
</PhoneBook> 
```

我已使用以下方法成功地将列表框绑定到此 XML：

```
Imports <xmlns:DaftarTelephone="http://tempuri.org/PhoneBook.xsd">

   Dim xmlPhoneBook = XDocument.Load(CurDir() & "\PhoneBook.xml")
   Dim q = From el In xmlPhoneBook ...<PhoneBook:PersonItem>
   lst.ItemsSource = q        'my listbox 
```

这是我的 XAML：

```
 <Page.Resources>
    <DataTemplate x:Key="PersonItemTemplate">
        <StackPanel>
            <TextBlock Text="{Binding Path=Attribute[famil].Value}"/>
            <TextBlock Text="{Binding Path=Attribute[name].Value}"/>
            <TextBlock Text="{Binding Path=Attribute[number].Value}"/>
        </StackPanel>
    </DataTemplate>
</Page.Resources>

<Grid x:Name="LayoutRoot"  >
    <ListBox x:Name="lst" ItemsSource="{Binding}" ItemTemplate="{DynamicResource PersonItemTemplate}" />
       </Grid> 
```

家庭和姓名显示正确。但是没有显示数字！！！

# jquery - jQuery 未在 JSF 应用程序中运行

> ID：11333409
> 
> 赞同：1
> 
> 时间：2012-07-04T17:36:03.913
> 
> 标签：jquery, html, jsf-2, alert, netbeans-7

我是 jQuery 的新手。

在 netbeans 中，我有***[jquery-1.7.2.js](http://docs.jquery.com/Downloading_jQuery#Current_Release)***，其中存在所有 HTML 文件。我正在创建 JSF 2.0 项目。

下面是我的代码

```
<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:t="http://myfaces.apache.org/tomahawk"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      >
    <h:head>
        <title>Welcome to MySite.</title>
    </h:head>

    <script language="text/javascript" src="#{facesContext.externalContext.requestContextPath}/faces/jquery-1.7.2.js"></script>
    <script type="text/javascript">
        $(document).ready(function() {
            alert('I am here...');
            $("#table tr:last").after("<tr><td>some</td><td>content</td></tr>");
        });

    </script> 
```

我相信使用此代码，每当加载文档时，我都应该收到警报，`Hi, I am here...`因为我没有收到任何警报。

另外，当我看到查看源代码并单击时`jquery-1.7.2.js`，它会被打开。

知道为什么我没有警觉吗？

## 更新 1

我正在按照***[此处](http://netbeans.org/kb/docs/web/js-toolkits-jquery.html)***提供的教程进行操作，但仍然没有运气。:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T17:57:44.927

这似乎是一个错误的文件位置，我不知道你将 jquery 文件放在你的网络应用程序中的确切位置，但无论如何它应该位于资源文件夹下的文件夹中，所以......

在下添加`resources`文件夹`WebContent`

并在资源内部创建`js`文件夹

然后像这样访问文件

```
 <h:outputScript name="js/jquery-1.7.2.js" target="head" /> 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-07-04T18:29:24.953

我相信 JSF 可能会强制执行 XHTML 标准，告诉它忽略您的脚本标签，因为它是 outisde 头或体标签。您是否检查过您的脚本标签是否正在呈现？

我学到了一种艰难的方式，即在处理 JSF 时做事的最佳方式就是以 JSF 方式来做。在这种情况下，它将使用 h:outputScript 标记。

此外，使用 JavaScript 的一个好的做法是将它放在一个单独的 .js 文件中，即使您打算只在一个页面上使用它。使在浏览器中调试变得更加容易。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2019-02-12T04:54:04.420

您确定以下行：“#{facesContext.externalContext.requestContextPath}/faces/jquery-1.7.2.js”？如果我是你，我会查看浏览器 Url，然后使用指向该 Url 的相对路径编写代码以指向 jquery-1.7.2.js。另一种可能的调试方法是在当前文件夹（即当前.xhtml）中复制jquery-1.7.2.js，然后脚本标记行将是src="./jquery-1.7.2。 js”。如果您可以看到警报，则问题出在该线路路径上。

# html - 您好，如何使用 CSS 绘制三角形？

> ID：11333410
> 
> 赞同：-8
> 
> 时间：2012-07-04T17:36:08.617
> 
> 标签：html, css

> **可能重复：**
> [这个 CSS 三角形是如何工作的？](https://stackoverflow.com/questions/7073484/how-does-this-css-triangle-shape-work)

请帮助我，我需要你的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T17:38:45.787

例如：

```
.arrow-right {
    width: 0; 
    height: 0; 
    border-top: 60px solid transparent;
    border-bottom: 60px solid transparent;

    border-left: 60px solid green;
} 
```

[http://css-tricks.com/snippets/css/css-triangle/](http://css-tricks.com/snippets/css/css-triangle/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T17:39:09.027

[在此处](http://css-tricks.com/snippets/css/css-triangle/)查看有关如何使用 CSS 绘制三角形的说明。这是一个例子：

```
.arrow-right {
    width: 0; 
    height: 0; 
    border-top: 60px solid transparent;
    border-bottom: 60px solid transparent;

    border-left: 60px solid green;
} 
```

CSS技巧可以在[这里找到](http://css-tricks.com)

# ruby - Ruby 的跨平台 GUI 库

> ID：11333411
> 
> 赞同：0
> 
> 时间：2012-07-04T17:36:17.750
> 
> 标签：ruby, windows, delphi, user-interface

有人对 Ruby 的跨平台 GUI 库有建议吗？我查看了[https://github.com/brixen/wxruby](https://github.com/brixen/wxruby)，它似乎已经死了（最后一次代码推送是 2 年前多），但我需要类似的东西。目标是为 Windows/OS X 和 Linux 构建本机应用程序。我目前的另一个选择是学习帕斯卡并购买德尔福:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T17:49:10.827

我会调查[qtruby](http://rubyforge.org/projects/korundum/)。它正在积极开发，可在 Windows、OSX 和 Linux 上运行，甚至还有[一本（旧）电子书关于它](http://pragprog.com/book/ctrubyqt/rapid-gui-development-with-qtruby)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T18:11:53.097

我会尝试：

[http://shoesrb.com/](http://shoesrb.com/)

# controls - Windows 8 Metro 风格水平设计

> ID：11333413
> 
> 赞同：2
> 
> 时间：2012-07-04T17:36:33.087
> 
> 标签：controls, windows-8, windows-runtime, horizontal-scrolling, semantic-zoom

我想问一下可以使用哪些控件来创建类似于内置天气应用程序的设计——这意味着不同的数据集（表格、列表等）可以水平拉伸并且可以滚动并且可以使用语义缩放（仅显示各个部分的名称）。我试图找到一些方法，但我总是只找到使用相同类型项目列表的示例，这些项目以某种方式分组并显示在 GridView 中，但与那些内置应用程序没有任何相似之处。

非常非常感谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T20:50:52.743

您可以使用 ItemTemplateSelector 实现您的目标。有关更多信息，请参见此处：http: [//msdn.microsoft.com/en-us/library/system.windows.controls.itemscontrol.itemtemplateselector.aspx](http://msdn.microsoft.com/en-us/library/system.windows.controls.itemscontrol.itemtemplateselector.aspx)

# c# - 如何处理通过 LINQ 过滤的 DataTable 的“子集”？

> ID：11333414
> 
> 赞同：0
> 
> 时间：2012-07-04T17:36:43.743
> 
> 标签：c#, linq, system.data.datatable

假设我有一个带有颜色列的表。颜色可以有不同的值。我有一个可以一次处理给定列的项目的 C# 方法。因此，我想：

```
foreach(colorname in mytable.getDistinctColornames)
   monocolorMethod(mytable.getSubTableOnlyContainingRowsWithColor(colorname)) 
```

我将如何优雅地做到这一点......？

无论如何，我都会避免来回复制数据。我想对数据表有一种看法。仅“显示”给定列的行的视图和“可写”视图（即，当我写入过滤的子集时，将写入原始表）

**编辑 ：**

假设我有一个“汽车”表，我想在“类型”列中将“轿车”替换为“卡车”，用于所有具有“颜色=红色”的汽车。

给出以下代码我该怎么办？

```
DataTable cars (...); // the data

DataView dv = cars.DefaultView;
dv.RowFilter = "Color='Red'"; 
```

<这里我想在DataView上循环>。以下代码不起作用：

```
foreach (row in dv.AsEnumerable)
{
  if(row["Type"] == "Sedan")
    row["Type"] = "Truck";
} 
```

编辑 2：

发现这个[http://msdn.microsoft.com/fr-fr/library/system.data.dataview.allowedit.aspx](http://msdn.microsoft.com/fr-fr/library/system.data.dataview.allowedit.aspx)这表明

```
view.AllowEdit = true;
view[0].BeginEdit();
view[0]["FirstName"] = "Mary";
view[0]["LastName"] = "Jones";
view[0].EndEdit(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T17:44:05.697

看看这个：

[查询数据集——LINQ to DataSet 简介](http://blogs.msdn.com/b/adonet/archive/2007/01/26/querying-datasets-introduction-to-linq-to-dataset.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T17:46:00.457

您是否尝试过使用`DataView`类？它看起来正是您想要在不使用 LINQ 的情况下实现的目标：http: [//msdn.microsoft.com/en-us/library/fdcwwhez](http://msdn.microsoft.com/en-us/library/fdcwwhez)

**使用示例：**

假设有一个`DataTable`名为`_dt`4 行的对象：

```
_dt = new DataTable("") {Columns = {new DataColumn("ID"), new DataColumn("Name"), new DataColumn("Order")}};
_dt.Rows.Add(1, "one", 1);
_dt.Rows.Add(2, "two", 3);
_dt.Rows.Add(3, "three", 2);
_dt.Rows.Add(4, "four", 5); 
```

您可以轻松创建不过滤数据但对其执行排序操作的 DataView：

```
_dv = new DataView(_dt, "", "Order, Name", DataViewRowState.CurrentRows); 
```

您还可以将新行添加到 中`DataView`，因为它设置为对应`DataTable`的新行将直接添加到`_dt`对象中。排序顺序也将更新，新行不会是最后一行`DataView`（因为排序是在 Order 和 Name 列上完成的）

```
var newRow = _dv.AddNew();
newRow["ID"] = 5;
newRow["Name"] = "five";
newRow["Order"] = 4;
newRow.EndEdit(); 
```

在该代码之后将有 5 行`_dt`。编辑行也很简单：

```
var editedRow = _dv[0];
editedRow.BeginEdit();
editedRow["Name"] = "Test";
editedRow.EndEdit(); 
```

您还可以使用[`DataView.Find()`](http://msdn.microsoft.com/en-us/library/xbc8dtsx)or[`DataView.FindRows()`](http://msdn.microsoft.com/en-us/library/bwt6tf2t)方法在`DataView`.

# css - Firefox 在使用 Tab 时会忽略选定元素上的轮廓和焦点样式

> ID：11333420
> 
> 赞同：13
> 
> 时间：2012-07-04T17:36:52.027
> 
> 标签：css, firefox, focus, keyboard-shortcuts, outline

**语境**

火狐 14（和 13）；在某些情况下会忽略特定的 CSS 样式

**问题**

使用以下 CSS：

```
*
{
    outline:none;
    -moz-outline:none;
    -moz-user-focus:ignore;    
} 
```

[JSFiddle](http://jsfiddle.net/LVcpT/2/)

Firefox 14（和 13）在使用元素`Tab`之间切换时会忽略这些样式。`select`使用后单击这些元素`Tab`仍会显示轮廓。

**笔记**

*   具体造型`select`而不是`*`没有效果。
*   这只发生在`select`元素上。

**问题**

这是错误还是预期行为？

是否需要使用其他 CSS 样式来防止轮廓无限显示？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-08T19:40:54.663

这是一个[已知的错误](https://bugzilla.mozilla.org/show_bug.cgi?id=379939)，引发了数次 Stackoverflow 讨论。根据我的阅读，Mozilla 认为 CSS 是处理这种元素行为的错误位置，并选择通过其他方式处理它。目前唯一的解决方案是使用`tabindex="-1"`或将元素设置为显示为其他内容，并重新设置下拉列表的外观和感觉 - 但请注意，这本身就会打开一堆蠕虫。

如果您确实选择这样做，我过去曾通过以下方法取得成功：

```
select {
    appearance: normal;
        -webkit-appearance: none;
        -moz-appearance: radio-container; /* renders text within select, without arrow chrome */
} 
```

外观告诉浏览器将元素显示为其他内容，但这在供应商之间是不一致的。`appearance: normal;`是规范，而 webkit 将 normal 替换为 none。`-moz-appearance: radio-container;`一直是我发现在所选选择选项中显示文本的唯一方法，同时删除箭头镶边以获得完全自定义的下拉列表。但是，[请尝试尝试可用的选项](https://developer.mozilla.org/en/CSS/-moz-appearance)，直到找到可行的选项并且不添加您希望自定义的对焦环。Internet Explorer 将需要进一步的组合来根据您的需要进行选择。完全有可能，但超出了这个问题和答案的范围。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T18:53:41.030

到目前为止，我发现克服它的唯一方法是设置`tabindex='-1'`（[见小提琴](http://jsfiddle.net/LVcpT/10/)），当然，它会将元素完全从`tab`选择链中取出。这对用户界面不利，而且我的猜测并不是你想要的（我假设你想保持`tab`可访问性，但只是做你自己的样式来突出显示）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-01-07T14:39:55.967

另一种解决方案是设置 outline: none 并设置 box-shadow。例如：

```
.my_elements:focus
{
    outline: none;
    box-shadow: 0 0 3px 0px red;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-11-08T17:49:06.843

利用

```
*:-moz-focusring {
  outline: 2px solid blue;
} 
```

会给你类似于 chrome

此外，如果使用 mac，您还需要启用此功能： [How to allow keyboard focus of links in Firefox?](https://stackoverflow.com/questions/11704828/how-to-allow-keyboard-focus-of-links-in-firefox)

# python - 无法使用 cgi.FieldStorage 获取 POST 值

> ID：11333423
> 
> 赞同：6
> 
> 时间：2012-07-04T17:37:12.393
> 
> 标签：python, http

我正在尝试使用 GET 向用户发送带有表单数据的简单 html 页面，然后使用 POST 从表单接收变量。HTML 文件如下所示：

```
<HTML>
<title> My Title</title>
<body>
<form  method="post" action="http.py">
<input name="Name" type="text"/>
<input name="Submit" type="submit" value="Submit" />
</form>
</body>
</HTML> 
```

这是python脚本：

```
import os
import cgi
import sys
from BaseHTTPServer import HTTPServer, BaseHTTPRequestHandler

class customHTTPServer(BaseHTTPRequestHandler):
        def do_GET(self):
                self.send_response(200)
                self.send_header('Content-type', 'text/html')
                self.end_headers()
                fh=open('index.html','r')
                self.wfile.write(fh.read())
                return

        def do_POST(self):
            form = cgi.FieldStorage()
            self.send_response(200)
            self.end_headers()
            self.wfile.write(form['Name'].value)

def main():
       try:
            server = HTTPServer(('',9111),customHTTPServer)
            print 'server started at port 8080'
            server.serve_forever()
       except KeyboardInterrupt:
            server.socket.close()

if __name__=='__main__':
       sys.exit(main()) 
```

但是 FieldStorage 一直是空的。我已经尝试检查 self.rfile 中的内容，发现如果我尝试执行 self.rfile.readlines() ，浏览器会卡住并且看起来脚本正在等待数据流的结束。我应该从哪里获取我通过 POST 提交的 Name 变量？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2014-08-02T05:27:20.313

在原始代码中，我只是更改了行

```
form = cgi.FieldStorage() 
```

至

```
form = cgi.FieldStorage(
    fp=self.rfile,
    headers=self.headers,
    environ={'REQUEST_METHOD':'POST'}) 
```

它似乎按您的预期工作。

向[http://pymotw.com/2/BaseHTTPServer/](http://pymotw.com/2/BaseHTTPServer/)提示关键的“环境”设置。（默认情况下，cgi.FieldStorage 认为它正在处理 GET 请求。）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-04T18:18:55.773

我想你可能在这里混合了一些概念。您既有服务器的想法，也有 cgi 脚本。无论您的 POST 操作是什么（http.py 或其他），您的服务器都会接受请求。实际上没有发生 CGI 处理。因此，为简单起见，您可以先将 html 模板调整为此：

```
<form  method="post" action=""> 
```

然后，您应该参考有关[如何从请求中读取的](https://stackoverflow.com/a/4233452/496445)其他问题，而不是尝试使用 cgi 字段存储：

```
import urlparse

...

    def do_POST(self):
        length = int(self.headers.getheader('content-length'))
        postvars = urlparse.parse_qs(self.rfile.read(length), keep_blank_values=1)
        self.send_response(200)
        self.end_headers()
        self.wfile.write(postvars) 
```

您遇到的问题，因为这是创建 Web 服务器应用程序的一种非常低级的方法，如果您从输入流中无限期地读取，它将继续运行并阻塞。您检查标头的内容长度并且只读取那么多字节。您根本不需要 cgi 模块，因为这不是 cgi 脚本。

cgi 脚本由服务器工作，看到请求是针对匹配类型和位置的文件，并像普通程序一样在子进程中执行它。它向进程提供参数，然后返回响应以发送回客户端。如果这是一个 cgi 脚本，那么服务器将在一个模块中，永远运行，而 cgi 代码将在另一个模块中，其中包含更简单的代码来检查请求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T18:43:53.857

这是在我的情况下获取 POST vars 的方法的 URL[这里](https://stackoverflow.com/a/4233452/1347201) 详细解释由 JDI 提供。

# php - PHP/curl 无法检索 XML/API

> ID：11333428
> 
> 赞同：1
> 
> 时间：2012-07-04T17:37:38.943
> 
> 标签：php, xml, api, curl

是的，我难住了。我什么也得不到。curl_exec 没有返回任何内容。我试过file_get_contents，但完全超时。我正在尝试从我的 Subsonic 媒体服务器获取 API XML 并将其显示在我的 Web 服务器（不同的服务器）上。最终结果是我可以让人们使用媒体服务器帐户登录到我的 Web 服务器。我可以稍后处理实际的解析，但现在我什至无法获取 XML。我试过他们的论坛，但没有得到太多帮助，因为他们不是真正的 PHP 倾向。图我会在这里问。

```
$url = "http://{$subserver}/rest/getUser.view?u={$username}&p={$password}&username={$username}&v=1.8.0&c={$appID}";

$c = curl_init($url);
curl_setopt($c, CURLOPT_RETURNTRANSFER, true);
curl_setopt($c, CURLOPT_HEADER, 0);
$result = curl_exec($c);
curl_close($c);

echo $result; 
```

这不返回任何内容。变量定义正确，我得到的响应与输入整个 URL 相同。这是他们的 API 页面：[http](http://www.subsonic.org/pages/api.jsp) ://www.subsonic.org/pages/api.jsp我什至尝试过使用他们的“ping”功能 - 仍然是空的

网址本身看起来不错。在网络浏览器中，它返回：

```
This XML file does not appear to have any style information associated with it. The document tree is shown below.
<subsonic-response xmlns="http://subsonic.org/restapi" status="ok" version="1.8.0">
<user username="xxxxxx" email="xxxxxx@xxxxxx.com" scrobblingEnabled="false" adminRole="true" settingsRole="true" downloadRole="true" uploadRole="true" playlistRole="true" coverArtRole="true" commentRole="true" podcastRole="true" streamRole="true" jukeboxRole="true" shareRole="true"/>
</subsonic-response> 
```

我承认我从未使用过 XML，但根据我读过的所有内容......这应该可以。它确实适用于我在网上找到的其他随机 XML 文件。

它可能与它不是“.xml”文件，而是通过 url xml 生成的事实有关，因为相同的确切代码将适用于我发现的一些随机 xml 文件（[http://www.w3schools.com /xml/note.xml](http://www.w3schools.com/xml/note.xml) )

有什么想法吗？

# ruby - 为什么我在对 JSON 的 POST 请求中收到 405？

> ID：11333429
> 
> 赞同：1
> 
> 时间：2012-07-04T17:37:46.307
> 
> 标签：ruby, sinatra, padrino, http-status-code-405

所以我有一个 Padrino 应用程序，其控制器看起来大致如下（为简洁起见）：

```
App.controllers :questions do
  get :index, :with => :id, :provides => [:html, :json] do
    # Stuff
  end

  post :index, :with => :id, :provides => [:html, :json] do
    # Other stuff
  end
end 
```

如果我在浏览器中点击“questions/1”，我会看到给定问题的 HTML 页面。如果我点击“questions/1.json”，我会看到问题的 JSON 表示。就像我所期望的那样。

现在，如果我通过 Web 表单向“questions/1”提交 POST 请求，它就可以工作了。但是，如果我尝试向“questions/1.json”发送一个 POST 请求（表明我想要 JSON 格式的响应，或者至少我*认为*它是这样工作的），我会得到一个 405 Method Not Allowed。

我猜我在这里误解了一些基本的东西。我错过了什么？更重要的是，我*应该*如何定义一个路由来接受 POST 请求并提供 HTML 或 JSON 响应？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T18:15:46.867

好吧，我不太确定为什么会这样。但是现在我已经通过在我的 POST 请求中将“ACCEPT”标头设置为“application/json”而不是在 URL 的末尾添加“.json”来解决这个问题（根据我有限的互联网研究，这可能无论如何都是首选方法）。

# javascript - jQuery：链接的停止传播

> ID：11333430
> 
> 赞同：8
> 
> 时间：2012-07-04T17:37:48.003
> 
> 标签：javascript, jquery

我怎样才能停止传播链接？

```
<script src="http://code.jquery.com/jquery.min.js"></script>
<script>
    $(function() {
        $("#g").click(function(event){
            alert("Link clicked");
            event.stopPropagation();
        });
    });
</script>
<a id="g" href="http://google.com">Google</a> 
```

我希望浏览器不要去谷歌，只显示警报。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-04T17:39:09.167

您必须使用它`event.preventDefault();`来防止默认操作 - 导航到 Google- 发生。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-04T17:39:19.390

您将需要`event.preventDefault()`并且还返回 false

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-04T17:49:57.560

如果你只是不想去 google，就返回 false。

```
$("#g").bind('click', function(event){
   alert("Link clicked");
   return false;
}); 
```

# sql - 多对多关系中的 AND 条件

> ID：11333433
> 
> 赞同：1
> 
> 时间：2012-07-04T17:38:18.740
> 
> 标签：sql, postgresql, indexing, many-to-many, relational-division

假设我有三个表，一个用户表，一个包含大约 500 个不同项目的表，以及相应的连接表。我想做的是：

```
select * from users u join items_users iu on iu.user_id = u.id
where iu.item_id in (1,2,3,4,5)
and u.city_id = 1 limit 10; 
```

除了`IN`条件之外，我想找到拥有*所有*相应项目的用户。如果有帮助，假设一次搜索的最大项目数为 5。此外，我正在使用 Postgres，如果有帮助，请不要介意对其进行非规范化，因为它是只读系统并且速度最高优先。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T17:52:34.950

这是关系分裂的另一种情况。我们在这里收集了相当多的查询来处理这类[问题](https://stackoverflow.com/questions/7364969/how-to-filter-sql-results-in-a-has-many-through-relation/7774879#7774879)。

在这种情况下，如果有 5 个或更多项目，我可能会尝试：

```
SELECT u.*
FROM   users AS u
WHERE  u.city_id = 1
AND EXISTS (
   SELECT *
   FROM   items_users AS a
   JOIN   items_users AS b USING (user_id)
   JOIN   items_users AS c USING (user_id)
   ...
   WHERE  a.user_id = u.user_id
   AND    a.item_id = 1
   AND    b.item_id = 2
   AND    c.item_id = 3
   ...
   )
LIMIT 10; 
```

它在我的测试中是最快的，它符合多个条件的要求，`items_users`同时仅从`user`.

阅读[链接答案中的索引](https://stackoverflow.com/questions/7364969/how-to-filter-sql-results-in-a-has-many-through-relation/7774879#7774879)。这些对性能至关重要。由于您的表格是只读的，我也会同时[`CLUSTER`](http://www.postgresql.org/docs/current/interactive/sql-cluster.html)使用这两个表格，以尽量减少必须访问的页面数量。如果不出意外，CLUSTER`items_users`在`(user_id, item_id)`.

# javascript - 如何直接链接到 jQuery 手风琴选项卡

> ID：11333436
> 
> 赞同：0
> 
> 时间：2012-07-04T17:38:40.410
> 
> 标签：javascript, jquery, accordion

我有一个 wordpress 主题，它内置了用于创建选项卡式界面的短代码。问题是我无法从外部页面链接到特定选项卡。我看到关于同一个问题有多个问题，但没有一个答案对我有用。我不得不提到我的 javascript / jQuery 技能接近于零，所以即使这看起来很简单，我也不知道该怎么做。

我在我的主题的一个文件中找到了负责手风琴选项卡的 jQuery 代码，这里是：

```
// ---------------------------------------
// TAB
// ---------------------------------------
function base_tab() {
$('.tabs-wrap').each(function(){
    var tab_group = $('.tabs-wrap');
    $('.tabs li', tab_group).click(function(e){
        e.preventDefault();
        $('.tabs a', tab_group).removeClass('current');
        $('a', this).addClass('current');

        $('.panes .pane', tab_group).hide();
        $('.panes .pane', tab_group).eq($(this).index()).show();
    });

    // Trigger Initial Tab
    var initial_tab = parseInt( $('.tabs', this).attr('initial-tab') );
    $('.tabs li', tab_group).eq(initial_tab).trigger('click');
});
} 
```

据我之前了解，类似的问题我需要添加此代码，但我无法自己弄清楚在哪里以及如何使其工作：

```
$(window.location.hash).click(); 
```

所有标签的链接目前都是这样的：[http ://www.websitename.com/page/#](http://www.websitename.com/page/#)

我会很感激任何帮助，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T17:44:46.627

首先将您的html更改为

```
<ul class="tabs" initial-tab="0">
   <li><a href="#all">All</a></li>
   <li><a href="#kids">Kids Place &#8211; Kidproof</a></li>
   <li><a href="#baby">Baby Rattle Toy</a></li>
   <li><a href="#kidsvideo">Kids Place Video Player</a></li>
   <li><a href="#letter">Letters With Ally</a></li>
   <li><a href="#mommy">Mommy bird and her chick</a></li>
</ul> 
```

然后写一些额外的代码

```
$(function(){
   var hash = window.location.hash;
   var anchor = $('a[href$="'+hash+'"]');
   if (anchor.length > 0){
      anchor.click();
   }
}); 
```

# jquery - 使用 jquery 验证名称字段

> ID：11333441
> 
> 赞同：1
> 
> 时间：2012-07-04T17:38:58.640
> 
> 标签：jquery, forms, validation

实际上我是 jquery 以及网页设计的新手

现在我需要一些代码，它将在文本框上的模糊事件之后调用。

我需要 jquery 代码来验证 html 表单中的名称字段。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-04T17:55:20.880

试试这个 - [http://jsfiddle.net/gZNkt/](http://jsfiddle.net/gZNkt/)

```
$("#fname").on("blur", function() {
    if ( $(this).val().match('^[a-zA-Z]{3,16}$') ) {
        alert( "Valid name" );
    } else {
        alert("That's not a name");
    }
}); 
```

它将检查您的姓名是否为 3-16 个字符长且仅包含字母，因此`sam`会验证，但`3sam`- 不会

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T17:46:34.463

确保您添加了最新版本的 jQuery.... 这是一个用于验证 not null 的示例。

```
 $(document).ready(function() {
        $('input#fname').on('blur', function() {
            if( $(this).val() == ''  || $(this).val() == "null") {
                // Your code to handle error
            } else {
                            return true;
                    }
        })
    }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-04T17:45:23.683

我认为您想在 jQuery 中聚焦或模糊后验证您的文本框。

您可以将以下代码用于相同目的：-

```
$(document).ready(function()
{
   $("#fnam").blur(function() {

      if($(this).val() == null || $(this).val() == undefined || $(this).val() == "")
      {
         alert("field is empty");
      }

   });

// if you want this validation on focus lost
 $("#fnam").focusout(function() {

  if($(this).val() == null || $(this).val() == undefined || $(this).val() == "")
  {
     alert("field is empty");
  }

   });

}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-05-06T07:40:06.307

```
 $("#reg").bind("keypress", function (event) {
            if (event.charCode!=0) {
                var regex = new RegExp("^[a-zA-Z]+$");
                var key = String.fromCharCode(!event.charCode ? event.which : event.charCode);
                if (!regex.test(key)) {
                    event.preventDefault();
                    return false;
                }
            }
        });

you disable press key and allow only charecters .... 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-04T17:44:04.070

为什么不尝试使用[jQuery Validate 插件](http://docs.jquery.com/Plugins/Validation)

# asp.net-mvc - 使用同一应用程序但多个域 ASP.NET MVC 单点登录

> ID：11333446
> 
> 赞同：3
> 
> 时间：2012-07-04T17:39:16.087
> 
> 标签：asp.net-mvc, authentication, oauth, single-sign-on

我们正在尝试跨多个域实现单点登录，但在 IIS 下使用相同的 Web 应用程序。我们已经检查了一些解决方案，例如 SAML 和 OAuth，但是我们不确定我们是否需要这两个中的任何一个。我们不知道如何跨域共享 cookie，我认为这是不可能的，但如果我错了，请纠正我。

当您访问 youtube 并通过您的 google 帐户进行身份验证时，我们查看了 google 的解决方案，它会提取您的用户名和信息，但我们不知道他们是如何做到这一点的，因为它是另一个域，因此 cookie 不应该传输到 youtube . 如果您对如何做到这一点有任何建议，他们非常欢迎。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T19:05:58.887

您可以查看[以下博客文章](https://blog.stackoverflow.com/2010/09/global-network-auto-login/)，其中 Jeff Atwood 解释了 StackExchange 网络用于支持依赖 HTML5 本地存储的跨域单点登录的机制。这里有一些更多的[技术细节](https://meta.stackexchange.com/a/64274/130891)。

# memory - 使用 android ndk 调试内存损坏

> ID：11333449
> 
> 赞同：3
> 
> 时间：2012-07-04T17:39:19.957
> 
> 标签：memory, memory-management, android-ndk

我的 android 应用程序的本机部分出现段错误，此时 void 函数返回其调用者。为了更好地可视化，我在被调用者函数的末尾放置了一条日志语句，在调用者函数中放置了一条日志语句，就在对被调用者的调用之后（对不起，双关语）。在 logcat 中，第一条消息被打印，第二条则没有（应用程序崩溃）。

考虑到可能的内存损坏，我决定激活 malloc 调试（在 adb shell 中给出“setprop libc.debug.malloc 10”）。然后，我在被调用函数末尾的日志消息之后立即在 logcat 中得到这个：

```
D/MyApp - NativeSide(12778):  I am the callee function and I am about to return!
E/libc    (12778): *** FREE CHECK: buffer 0x82869900 corrupted 16 bytes before allocation
E/libc    (12778): call stack:
E/libc    (12778):  0: 8000e3ea
E/libc    (12778):  1: 8000e49c
E/libc    (12778):  2: 8000e4e2
E/libc    (12778):  3: 8000e540
E/libc    (12778):  4: afd14ccc
E/libc    (12778):  5: 81258188
E/libc    (12778):  6: 81258188
E/libc    (12778):  7: 81258188
E/libc    (12778):  8: 81258188
E/libc    (12778):  9: 81258188
E/libc    (12778): 10: 81258188
E/libc    (12778): 11: 81258188
E/libc    (12778): 12: 81258188
E/libc    (12778): 13: 81258188
E/libc    (12778): 14: 81258188
E/libc    (12778): 15: 81258188
E/libc    (12778): 16: 81258188
E/libc    (12778): 17: 81258188
E/libc    (12778): 18: 81258188
E/libc    (12778): 19: 81258188 
```

我找不到有关如何破译此输出的任何信息。每行显示的数字在每次应用启动时都会发生变化。我希望有一种方法可以使用此信息作为损坏发生位置的线索，因为我无法从代码中找到它。我还尝试使用“-fstack-check 标志构建本机库，但我不能说我是否在日志中获得了更多信息（似乎没有，但我可能错过了它们），或者我是否需要做其他事情得到他们。

此外，这是堆栈转储，位于“FREE CHECK：”消息之后。

```
I/DEBUG   (12311): *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** ***
I/DEBUG   (12311): Build fingerprint: 'google/soju/crespo:2.3/GRH55/79397:user/release-keys'
I/DEBUG   (12311): pid: 12778, tid: 12907  >>> com.ntrack.tuner <<<
I/DEBUG   (12311): signal 11 (SIGSEGV), code 1 (SEGV_MAPERR), fault addr deadbaad
I/DEBUG   (12311):  r0 deadbaad  r1 45ea374c  r2 00000027  r3 00000000
I/DEBUG   (12311):  r4 00000080  r5 45ea374c  r6 8003422e  r7 45ea37b4
I/DEBUG   (12311):  r8 45da4000  r9 a811eca5  10 00100000  fp 00000001
I/DEBUG   (12311):  ip ffffffff  sp 45ea3738  lr 8000f623  pc 8000f650  cpsr 20000030
I/DEBUG   (12311):  d0  3f9664f48406d639  d1  3f8226e3e96e8495
I/DEBUG   (12311):  d2  3faba1ba1bb34201  d3  0000000000000000
I/DEBUG   (12311):  d4  3d7943379e56fd24  d5  3d8f940585cd5f95
I/DEBUG   (12311):  d6  3f2cf2145b888497  d7  3f2cf214636d85f8
I/DEBUG   (12311):  d8  0000000000000000  d9  0000000000000000
I/DEBUG   (12311):  d10 0000000000000000  d11 0000000000000000
I/DEBUG   (12311):  d12 0000000000000000  d13 0000000000000000
I/DEBUG   (12311):  d14 0000000000000000  d15 0000000000000000
I/DEBUG   (12311):  scr 20000010
I/DEBUG   (12311): 
```

任何东西，关于要检查的典型事情的建议或只是使用 malloc 调试信息的方式都会有很大帮助，谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-04T18:24:47.373

malloc 调试属性可能会在您分配的区域之前和之后设置一些幻数。然后，在释放时，它会检查这些区域以确保幻数仍然存在。

例如，如果您分配 1024 个字节：

```
char * p = malloc(1024); 
```

malloc 调试代码实际上会分配您请求的 1024 个字节，以及一些额外的字节：

```
[ 32 bytes ---- | -------- 1024 bytes ------| ---- 32 bytes ]
^ 0xc0000000    ^ 0xc0000020 
```

然后库会在这 32 个字节中写入一个魔法值：

```
[ 32 bytes ---- | -------- 1024 bytes ------| ---- 32 bytes ]
[  0xdeadd00d   |                           | 0xdeadd00d    ]
^ 0xc0000000    ^ 0xc0000020 
```

该库将返回`0xc0000020`并在`p`内部保存`0xc0000000`，大小等。然后您的函数以某种方式使用分配的区域：

```
memset(p, 0, 1025); 
```

注意这一行复制了超过 1024 个字节。这会将 0 写入最后 32 字节的魔术区（注意`0`最后 32 字节中的 ，应该是`0xdeadd00d`）：

```
[ 32 bytes ---- | -------- 1024 bytes ------| ---- 32 bytes ]
[  0xdeadd00d   |  000...             ...00 | 0x0eadd00d    ]
^ 0xc0000000    ^ 0xc0000020  (address) 
```

当您的函数免费调用时：

```
free(p); 
```

然后库将检查以确保第一个和最后 32 个字节仍然是`0xdeadd00d`. 由于您的函数覆盖了最后 32 个字节，因此它会像您发布的那样打印错误。

这只是 malloc 调试检查如何工作的一个示例。如果您想确切了解 malloc 调试检查的内容以及它是如何工作的，请转到`bionic`Android 源目录并搜索您设置的属性，`libc.debug.malloc`.

检查您的代码，了解如何在被调用函数中使用分配的内存。您可能正在写入您分配的区域之外的区域。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-04T18:38:27.177

对我来说，这：

> 我的 android 应用程序的本机部分中的段错误，此时 void 函数返回其调用者。

意味着堆栈损坏（比堆损坏更多）。您从（以及它调用的每个函数..）返回的这个函数的堆栈中存储了什么状态？

您看到的调用堆栈输出应该是检测到损坏时堆栈上每个函数的地址。您需要知道您的库加载到的地址，以便将它们映射回您的`.so`. （我认为这个问题会有所帮助：[How to use addr2line in Android](https://stackoverflow.com/questions/5314036/how-to-use-addr2line-in-android)）

从堆栈转储顶部重复的事实`81258188`也表明您可能已经炸毁堆栈底部（通过递归太多次）。如果您不知道代码中有任何有意的递归，那么找出您的库的加载位置并将其映射回您的代码可能会很有用。

# signal-processing - 使用 1D FFT 的 2D FFT

> ID：11333454
> 
> 赞同：14
> 
> 时间：2012-07-04T17:39:47.847
> 
> 标签：signal-processing, fft

我正在尝试使用 1D FFT 实现 2D FFT。我有一个大小为 4x4 的矩阵（行主要）

我的算法是：

1.  所有 16 个点的 FFT
2.  位反转
3.  转置
4.  16 点上的 FFT
5.  位反转
6.  转置

这个对吗？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-07-04T17:50:25.957

不 - 算法是：

1.  对每一行进行 1D FFT（实数到复数）
2.  对由 (1) 产生的每一列进行 1D FFT（复数到复数）

所以它是 4 x 1D（水平）FFT，然后是 4 x 1D（垂直）FFT，总共 8 x 1D FFT。

# android - 如何布局正确的位置

> ID：11333456
> 
> 赞同：0
> 
> 时间：2012-07-04T17:40:05.733
> 
> 标签：android, android-layout

我有一个屏幕， ![在此处输入图像描述](../Images/f26feb07d8c1120975eb33357303da18.png) 我希望将按钮放在彼此下方，并将文本视图放在每个上方，我的代码是

```
<LinearLayout
                        android:id="@+id/LL1"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:gravity="center_vertical"
                        android:orientation="horizontal" >

                        <TextView
                            android:id="@+id/tvTab1Ask"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:text="ask for new question" />

                        <Button
                            android:id="@+id/bMainTabsGetQuestion"
                            android:layout_width="116dp"
                            android:layout_height="33dp"
                            android:text="Get Question"
                            android:textSize="15px" />
                    </LinearLayout>

                    <LinearLayout
                        android:id="@+id/LL2"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:gravity="center_vertical"
                        android:orientation="horizontal" >

                        <TextView
                            android:id="@+id/tvTab1Join"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:text="Join New Competition" />

                        <Button
                            android:id="@+id/bMainTabsJoin"
                            android:layout_width="wrap_content"
                            android:layout_height="30dp"
                            android:text="Join"
                            android:textSize="15px" />
                    </LinearLayout>

                    <LinearLayout
                        android:id="@+id/LL3"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:gravity="center_vertical"
                        android:orientation="horizontal" >

                        <TextView
                            android:id="@+id/tvTab1Signout"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:text="or you can signout" />

                        <Button
                            android:id="@+id/bMainTabsSignout"
                            android:layout_width="wrap_content"
                            android:layout_height="30dp"
                            android:text="Sign out"
                            android:textSize="15px" />
                    </LinearLayout> 
```

我的意思是每个按钮都必须从同一点垂直开始

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T18:31:32.763

尝试以下 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/tableLayout1"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <TableRow
        android:id="@+id/row1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:padding="5dip"
        android:weightSum="2" >

        <TextView
            android:id="@+id/tv1"
            android:layout_column="0"
            android:text="Ask for new Question"
            android:textAppearance="?android:attr/textAppearanceMedium"
            android:layout_weight="1" />

        <Button
            android:id="@+id/btn1"
            android:text="Get Questiopn"
            android:layout_column="1"
            android:layout_weight="1" />
    </TableRow>

    <TableRow
        android:id="@+id/row2"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:padding="5dip"
        android:weightSum="2" >

        <TextView
            android:id="@+id/tv2"
            android:layout_column="0"
            android:text="Join new Competition"
            android:textAppearance="?android:attr/textAppearanceMedium"
            android:layout_weight="1" />

        <Button
            android:id="@+id/btn2"
            android:text="Join"
            android:layout_column="1"
            android:layout_weight="1" />
    </TableRow>

    <TableRow
        android:id="@+id/row3"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:padding="5dip"
        android:weightSum="2" >

        <TextView
            android:id="@+id/tv3"
            android:layout_column="0"
            android:text="Or you can Signout"
            android:textAppearance="?android:attr/textAppearanceMedium"
            android:layout_weight="1" />

        <Button
            android:id="@+id/btn3"
            android:text="Sign Out"
            android:layout_column="1"
            android:layout_weight="1" />
    </TableRow>

</TableLayout> 
```

这是完美的工作，见下文

![在此处输入图像描述](../Images/fb3f5b614e34a6f1bc5093cecd4f144e.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T17:45:39.827

我认为，当您使用它时，`<TableLayout>`它将按您的意愿工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-04T17:48:19.123

使用`RelativeLayout`而不是 LinearLayout

并使用诸如`android:layout_alignLeft="" android:layout_alignBottom=""`根据您的设计对齐它的参数。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-04T17:44:55.760

如果要垂直设置按钮和文本，为什么不尝试将每个线性布局的方向更改为**垂直**（类似于）？`android:orientation="vertical"`

# c# - 未知错误 - 附近有不正确的语法

> ID：11333460
> 
> 赞同：1
> 
> 时间：2012-07-04T17:40:42.000
> 
> 标签：c#, asp.net, sql

我想知道为什么这个类不起作用，但是如果这段代码直接写在aspx页面中，它就可以了。我希望在课堂上使用它，因为在多个页面中多次调用以检查用户是否已被计为访问者。这样做的主要想法是计算正在查看我的网站的用户数量。

* * *

错误是这样的： **'：'附近的语法不正确**

**说明：**执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。

**异常详细信息：** System.Data.SqlClient.SqlException：“：”附近的语法不正确。

* * *

这是代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Net;
using System.IO;
using System.Data;
using System.Text;

namespace Project
{
    public class ipAddress
    {
        SQL com = new SQL(); //Class to make SQL connection and do querys
        public void GetPublicIP()
        {
            WebClient web = new WebClient();
            System.IO.Stream stream = web.OpenRead(url);
            string text = "";
            using (System.IO.StreamReader reader = new System.IO.StreamReader(stream))
            {
                text = reader.ReadToEnd();
                reader.Close();
            }
            string results = "";
            try
            {
                foreach (DataRow item in com.Execute("select * from table where ip = '" + text + "' and data = '" + DateTime.Now.ToShortDateString() + "';").Rows)
                {
                    results = item["ip"].ToString();
                }
                if (results == "")
                {
                    com.FazerComando("insert into table (ip, date) values ('" + text + "', '" + DateTime.Now.ToShortDateString() + "');");
                }
            }
            catch { }
        }
    }
 } 
```

问候...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-04T17:42:52.280

好吧，我们不知道这个`SQL`类是什么，但看起来您正在将值直接注入 SQL，这是一个**非常糟糕的主意**。它会引发[SQL 注入攻击](http://bobby-tables.com)，混合代码和数据，并使围绕数字和日期/时间值的转换比需要的困难得多。（在这种特殊情况下，您很幸运 - 您正在构建的字符串*只是*无效的 SQL。它不会清除您的数据库。）

相反，您应该使用在 SQL 本身中包含“占位符”的*参数化 SQL ，并单独提供值。*

假设`SQL`是你自己的类，你应该给它使用参数化 SQL 的便利。参见[`SqlCommand.Parameters`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.parameters.aspx)示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T17:45:30.417

您的“文本”变量中有撇号（或更糟）。您基本上是在自我注入您的 SQL 数据库。非常非常糟糕的juju。

# tomcat - Tomcat 看不到新创建的静态文件，正在服务器端缓存旧文件

> ID：11333462
> 
> 赞同：5
> 
> 时间：2012-07-04T17:41:14.620
> 
> 标签：tomcat, tomcat7, static-files

我在 Windows XP 上使用 Tomcat 7。

*   我有一个包含静态文件（HTML、CSS、JS）的目录`%TOMCATDIR%/webapps/myapplication`。
*   他们可以通过`localhost:8080/myapplication`

当我的服务器目录中的文件发生更改时，**它不会反映：**

*   修改后的文件返回（200 OK）与以前相同**（用 Fiddler 测试；肯定不是浏览器缓存问题 - 清除缓存，使用不同的浏览器等）**，
*   该目录中新创建的文件不可访问 (404)。

无论我尝试重新加载文件多少次，甚至向它添加查询字符串（`img.jpg?timestamp=...`），都会发生上述情况。

在`%TOMCATDIR%/conf/context.xml`我设置了各种指令来禁用服务器端缓存：

```
<?xml version='1.0' encoding='utf-8'?>
<Context antiResourceLocking="true" cachingAllowed="false" cacheMaxSize="1" cacheTTL="1">
    <WatchedResource>WEB-INF/web.xml</WatchedResource>
</Context> 
```

怎么了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T17:44:02.157

解决方案似乎是 remove `antiResourceLocking="true"`。

如果有人对该主题更了解，或者知道如何以其他方式解决它，我将不胜感激。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-25T18:38:38.347

Tomcat 8 - 禁用静态资源缓存：

> 上下文.xml

```
<Resources cachingAllowed="false"/> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-04-19T18:11:04.350

最后的解决方案是替换 %TOMCATDIR%/conf/context.xml 文件内容：

```
<?xml version='1.0' encoding='utf-8'?>
<Context cachingAllowed="false" cacheMaxSize="1" cacheTTL="1">
    <WatchedResource>WEB-INF/web.xml</WatchedResource>
</Context> 
```

# c# - 应用程序是否执行 Console.WriteLine("Test"); 在编译版本？

> ID：11333465
> 
> 赞同：4
> 
> 时间：2012-07-04T17:41:34.147
> 
> 标签：c#, .net

我使用了很多这样的行

```
Console.WriteLine("Test"); 
```

在 VS 2010 下调试应用程序。

我的问题是：我在构建应用程序时是否评论了所有这些行？

谢谢！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-04T17:44:22.687

是的。事实上，如果您的应用程序是一个控制台应用程序，那么您确实希望执行这些行。查看可能是您需要的`System.Diagnostics.Debug`方法（例如[Debug.WriteLine ）。](http://msdn.microsoft.com/en-us/library/9z9k5ydz.aspx)它们的输出在 Visual Studio 的输出窗口中，它们在发布代码中什么也不做。

更一般地说，您可以通过执行以下操作获得仅在 Debug 构建中编译的代码：

```
#if DEBUG
// Debug-only code here.
#endif 
```

您还可以[将此属性](http://msdn.microsoft.com/query/dev11.query?appId=Dev11IDEF1&l=EN-US&k=k%28System.Diagnostics.ConditionalAttribute%29;k%28TargetFrameworkMoniker-.NETFramework,Version%3Dv4.0%29;k%28DevLang-csharp%29&rd=true)放在您的方法定义之前，以编写一个在您进行 Release 构建时根本不调用的方法：

```
 [System.Diagnostics.Conditional("DEBUG")] 
```

所有这些方法的优点是它们不应该影响生产代码的性能。

为了检查我给你的建议是否准确，我在发布模式下编译了以下内容：

```
class Program
{
    static void Main(string[] args)
    {
        Console.WriteLine("Hello world!");

#if DEBUG
        Console.WriteLine("Inside #if block.");
#endif

        WriteLine("With ConditionalAttribute.");

        Debug.WriteLine("Debug.WriteLine.");
    }

    [Conditional("DEBUG")]
    public static void WriteLine(string line)
    {
        Console.WriteLine(line);
    }
} 
```

然后我使用 IL Dissasembler 工具查看实际运行的内容：

```
.method private hidebysig static void  Main(string[] args) cil managed
{
  .entrypoint
  // Code size       11 (0xb)
  .maxstack  8
  IL_0000:  ldstr      "Hello world!"
  IL_0005:  call       void [mscorlib]System.Console::WriteLine(string)
  IL_000a:  ret
} // end of method Program::Main 
```

如您所见，仅调用了 Console.WriteLine 方法。正如我们所希望的，其他三个替代方案是从调试代码中“编译出”的。

调试版本如下所示：

```
.method private hidebysig static void  Main(string[] args) cil managed
{
  .entrypoint
  // Code size       46 (0x2e)
  .maxstack  8
  IL_0000:  nop
  IL_0001:  ldstr      "Hello world!"
  IL_0006:  call       void [mscorlib]System.Console::WriteLine(string)
  IL_000b:  nop
  IL_000c:  ldstr      "Inside #if block."
  IL_0011:  call       void [mscorlib]System.Console::WriteLine(string)
  IL_0016:  nop
  IL_0017:  ldstr      "With ConditionalAttribute."
  IL_001c:  call       void ConditionalCompileTest.Program::WriteLine(string)
  IL_0021:  nop
  IL_0022:  ldstr      "Debug.WriteLine."
  IL_0027:  call       void [System]System.Diagnostics.Debug::WriteLine(string)
  IL_002c:  nop
  IL_002d:  ret
} // end of method Program::Main 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-04T17:45:03.670

是的，您的所有内容都`Console.WriteLine()`将被编译成 IL 代码，从而嵌入到您的可执行文件中。

而不是`Console.WriteLine()`使用一些日志框架，比如**[log4net](https://logging.apache.org/log4net/)**或**[NLog](http://nlog-project.org/)**。这些更容易配置和重用。

### 日志框架相对于 Console.WriteLine 的优势

*   从调试到生产日志记录的更改将需要在配置文件中进行一行更新
*   您可以登录文件、控制台、数据库、xml，还可以发送电子邮件并做更多事情
*   您还可以组合多个*记录器*，例如同时保存到文件和输出到控制台
*   花哨的颜色控制台输出怎么样 - 配置文件中的几行
*   易于禁用（配置文件中的一行更改）
*   易于配置，看起来比`#if DEBUG .. #endif`
*   您可以进行异步日志记录
*   如果您将应用程序拆分为可重用的库和 UI（例如与 WPF 一起使用，而不仅仅是与控制台一起使用），则无需更改日志记录代码

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-04T17:45:01.370

```
#define DEBUG
// ...
#if DEBUG
    Console.WriteLine("Debug version");
#endif 
```

[http://msdn.microsoft.com/en-us/library/4y6tbswk.aspx](http://msdn.microsoft.com/en-us/library/4y6tbswk.aspx)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-04T17:45:35.400

它是什么类型的应用程序？在控制台应用程序中，这是输出到屏幕*的方式。*无论如何，答案是肯定的——它仍然会被执行。控制台是否附加任何东西是另一个问题。

您可能想看看，`Debug.WriteLine()`但可能有更好的方法（更不用说控制台在 VS 中非常慢）

# iphone - 使用 MKMapView 在 iPhone 的地图应用程序中显示流量

> ID：11333466
> 
> 赞同：2
> 
> 时间：2012-07-04T17:41:34.530
> 
> 标签：iphone, ios, maps, mkmapview, traffic

我注意到集成在 iOS 中的地图应用程序可以显示流量，但是有没有办法使用 MKMapView 来做到这一点？还是该功能仅出现在该应用程序中？

请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-18T21:16:15.600

Apple 使用的数据似乎来自[TomTom 和其他公司](http://gspe21.ls.apple.com/html/attribution.html)。如果你能找到提供流量数据的 API，你可以使用 a`MKPolyline`来渲染数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T17:43:28.087

据我所知，您无法使用该`MK`框架显示交通信息。

为了达到您想要的结果，我会提供使用第三方资源，例如*Google Maps API*，并用于`UIWebView`呈现自定义地图。[谷歌地图 JavaScript API v3 TrafficLayer](https://developers.google.com/maps/documentation/javascript/layers#TrafficLayer)

# html - 将 HTML5 中的 required 属性与按钮提交一起使用

> ID：11333469
> 
> 赞同：1
> 
> 时间：2012-07-04T17:41:44.647
> 
> 标签：html, forms, button, submit, required

我对表格有一个愚蠢的问题。我一直在输入框中使用“必需”属性进行快速验证，但现在由于某种原因，当我使用按钮时，验证没有运行？它只是不适用于按钮还是我做错了什么？可能导致问题的是，必填字段有时是只读的。可能有冲突吗？下面是一些示例代码：

这将是我的输入框：

`<input type='text' id='something' name='something' required />`

这将是我的提交：

`<input type='submit' value='Submit' />`

但现在我正在尝试使用它：

`<button type='submit'>Submit</button>`

提前致谢。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T20:06:42.097

对于遇到相同问题的任何人，您不能在输入字段中设置必需和只读。尝试不使用或者使用一些 JavaScript 来帮助解决问题。

# php - SSI/PHP exec 命令在返回响应时终止，对吗？

> ID：11333473
> 
> 赞同：3
> 
> 时间：2012-07-04T17:41:57.910
> 
> 标签：php, process, exec, sli

假设我有一个使用 exec 的 SSI 脚本，或者一个使用 exec 或 proc_open 的 PHP 脚本，以便在用户从浏览器向我的服务器发送一些数据时启动一个进程。我是否正确，当服务器完成处理请求并将响应发送回服务器时，这个生成的进程将终止？无论我使用 SSI 还是 PHP，生成的进程都会在此时终止，对吗？

因此，没有办法在单独的请求之间“保持进程活跃”，所以如果我想在后续请求中与同一个进程交互，我需要编写一个守护程序吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T17:50:35.843

实际上，让进程保持活动状态非常简单，我们一直都在这样做：

创建一个shellscript（wrapper.sh），如

```
#!/bin/bash
/path/to/some/process < /dev/zero > "$1" &
echo "Blah" 
```

我们发现`echo "Blah"`在某些系统上是必要的。

使用 生成进程`wrapper.sh "/path/to/output/file"`，它几乎会立即返回 - 在以后的脚本调用中，您可以阅读`/path/to/output/file`以获取结果。

# google-app-engine - ndb 结构化/本地结构化属性 每个属性或包含实体 1mb 限制？

> ID：11333475
> 
> 赞同：1
> 
> 时间：2012-07-04T17:42:11.750
> 
> 标签：google-app-engine, properties, google-cloud-datastore

1mb 实体大小限制如何应用于 ndb 中的结构化/本地结构化属性？

每个（子）属性的大小可以达到 1mb，还是它们的大小是否计入包含实体的限制？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T18:13:40.207

The StructuredProperty's properties are really just properties of the top-level entity, but with special names that ndb knows what to do with (you can see this in the Datastore Viewer), so they count against the limit of the containing entity.

# ruby-on-rails - rails缓存坏了吗？

> ID：11333477
> 
> 赞同：0
> 
> 时间：2012-07-04T17:42:13.043
> 
> 标签：ruby-on-rails, caching

我正在使用活动资源将查询发送到外部 API。

为避免滥用，结果将缓存一小时。这是我的代码，允许我缓存我的查询：

```
 def find_with_read_through_cache(*arguments)
      logger.debug "----------------"
      logger.debug "arguments : #{arguments.join(' ')}"
      key = cache_key(arguments)
      logger.debug "key : #{key}"
      result = Rails.cache.read(key).try(:dup)
      logger.debug "result #{result}"
      logger.debug "#{key} #{result} #{self.cache_expires_in}"
      unless result
        result = find_without_read_through_cache(*arguments)
        logger.debug "write : #{Rails.cache.write(key, result, :expires_in => self.cache_expires_in)}"
      end
      result
    end 
```

在第一次查询时，一切都很好，我对每个查询都有 200 个请求，并且 Rails.cache 返回 true ：

```
----------------
arguments : players/ersykzer/
key : player/players/ersykzer/
result 
player/players/ersykzer/  3600
GET http://ws.maniaplanet.com:80/players/ersykzer/
--> 200 OK 109 (5376.3ms)
write : true
----------------
arguments : player/ersykzer/
key : canyonsolo/player/ersykzer/
result 
canyonsolo/player/ersykzer/  3600
GET http://ws.maniaplanet.com:80/canyon/rankings/solo/player/ersykzer/
--> 200 OK 115 (404.8ms)
write : true
----------------
arguments : player/ersykzer/
key : canyonmulti/player/ersykzer/
result 
canyonmulti/player/ersykzer/  3600
GET http://ws.maniaplanet.com:80/canyon/rankings/multiplayer/player/ersykzer/
--> 200 OK 169 (389.7ms)
write : true
----------------
arguments : zone/ {:params=>{:offset=>113, :length=>10}}
key : canyonsolo/zone//{:params=>{:offset=>113, :length=>10}}
result 
canyonsolo/zone//{:params=>{:offset=>113, :length=>10}}  3600
GET http://ws.maniaplanet.com:80/canyon/rankings/solo/zone/?length=10&offset=113
--> 200 OK 2012 (157.2ms)
write : true
----------------
arguments : zone/ {:params=>{:offset=>"2", :length=>10}}
key : canyonmulti/zone//{:params=>{:offset=>"2", :length=>10}}
result 
canyonmulti/zone//{:params=>{:offset=>"2", :length=>10}}  3600
GET http://ws.maniaplanet.com:80/canyon/rankings/multiplayer/zone/?length=10&offset=2
--> 200 OK 1849 (172.1ms)
write : true 
```

但是，当页面重新加载时，缓存中似乎有两个元素不可用：

```
----------------
arguments : players/ersykzer/
key : player/players/ersykzer/
result #<Player:0xaf25378>
player/players/ersykzer/ #<Player:0xaf25378> 3600
----------------
arguments : player/ersykzer/
key : canyonsolo/player/ersykzer/
result 
canyonsolo/player/ersykzer/  3600
GET http://ws.maniaplanet.com:80/canyon/rankings/solo/player/ersykzer/
--> 200 OK 115 (127.7ms)
write : true
----------------
arguments : player/ersykzer/
key : canyonmulti/player/ersykzer/
result 
canyonmulti/player/ersykzer/  3600
GET http://ws.maniaplanet.com:80/canyon/rankings/multiplayer/player/ersykzer/
--> 200 OK 169 (118.0ms)
write : true
----------------
arguments : zone/ {:params=>{:offset=>113, :length=>10}}
key : canyonsolo/zone//{:params=>{:offset=>113, :length=>10}}
result #<CanyonSolo:0xaee3180>
canyonsolo/zone//{:params=>{:offset=>113, :length=>10}} #<CanyonSolo:0xaee3180> 3600
----------------
arguments : zone/ {:params=>{:offset=>"2", :length=>10}}
key : canyonmulti/zone//{:params=>{:offset=>"2", :length=>10}}
result #<CanyonMulti:0xaeded10>
canyonmulti/zone//{:params=>{:offset=>"2", :length=>10}} #<CanyonMulti:0xaeded10> 3600 
```

如您所见，尽管使用相同的键，但两个元素`canyonsolo/player/ersykzer/`和`canyonmulti/player/ersykzer/`不会由缓存返回。为什么它不起作用？（轨道 3.1）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T12:21:47.200

从 rails 3.1 升级到 3.2.0 后，它可以工作了。我的代码没有任何变化。这似乎是一个rails错误。

# java - JVM Bridge 关键字 - 有什么特殊用途吗？

> ID：11333479
> 
> 赞同：1
> 
> 时间：2012-07-04T17:42:26.153
> 
> 标签：java, jvm, java-bridge-method

我想知道 JVM 上的“bridge”关键字除了将方法标记为特殊之外是否有任何具体目的？我问的是与“抽象”或“受保护”相反的问题，这实际上会直接影响其余代码的解释或功能方式。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T17:46:53.887

`bridge`不是关键字。它用于标记用于实现泛型和协变返回类型的合成方法。它对性能没有太大影响，甚至不会在运行时出现在调用堆栈中。

来自[http://www.docjar.com/html/api/java/lang/reflect/Modifier.java.html](http://www.docjar.com/html/api/java/lang/reflect/Modifier.java.html)

```
/**
 * The {@code int} value representing the {@code volatile}
 * modifier.
 */
public static final int VOLATILE         = 0x00000040;

// Bits not (yet) exposed in the public API either because they
// have different meanings for fields and methods and there is no
// way to distinguish between the two in this class, or because
// they are not Java programming language keywords
static final int BRIDGE    = 0x00000040; 
```

# php - PHP 致命错误：未捕获的 CurlException：Facebook 应用程序上的 28 和 35

> ID：11333480
> 
> 赞同：5
> 
> 时间：2012-07-04T17:42:28.810
> 
> 标签：php, facebook, facebook-graph-api, ssl, curl

我随机收到以下错误。它不会每次都发生。

```
PHP Fatal error:  Uncaught CurlException: 28: Operation timed out after 60 seconds with 47 out of 47 bytes received
PHP Fatal error:  Uncaught CurlException: 28: connect() timed out!
PHP Fatal error:  Uncaught CurlException: 35: Unknown SSL protocol error in connection to graph.facebook.com:443 
```

我所做的尝试是

```
1\. adding CURLOPT_SSLVERSION     => 3 (even try changing to 2)
2\. changing 'https://api-read.facebook.com/' to 'api_read'  => 'https://api.facebook.com/'
3\. adding   $opts[CURLOPT_SSLVERSION] = 3;                                          
            curl_setopt( $ch, CURLOPT_IPRESOLVE, CURL_IPRESOLVE_V4 );
4\. Changing CURLOPT_CONNECTTIMEOUT => from 10 to 60
5\. closing IPv6 and add 69.171.224.54   graph.facebook.com to /etc/hosts (several other IPs also added)
6\. telnet graph.facebook.com 443 and nslookup graph.facebook.com 
```

我不知道该往哪里看。请帮忙！

仅供参考：cURL 支持 = 启用，cURL 信息 = 7.15.5，OpenSSL 版本 = 0.9.8e（我可以在 Centos 5.7 上更新最新版本）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T22:28:14.243

所有这些错误都与 HTTP 进程各个阶段的连接超时有关：

*   首先，建立了连接，但没有（或很少）返回数据
*   第二，根本无法建立连接
*   第三，建立了 TCP 连接，但在安全通道的协商中被丢弃

正如 Shawn E. Carter 上面所说，这个错误似乎是同一个问题[https://developers.facebook.com/bugs/328399317246454?browse=search_4ff4817e0c5ec9768956669](https://developers.facebook.com/bugs/328399317246454?browse=search_4ff4817e0c5ec9768956669)和这个问题一样[Can not connect to Facebook with a curl request](https://stackoverflow.com/questions/10088320/can-not-connect-to-facebook-with-a-curl-request?rq=1)

归根结底，这只是意味着 Facebook 的 API 服务器比预期的要慢一些。您可以尝试使用更长的超时时间，或者，由于它是间歇性的，因此捕获异常并重试。

# mod-rewrite - mod_rewrite - 修改 URL 并继续处理

> ID：11333481
> 
> 赞同：0
> 
> 时间：2012-07-04T17:42:34.153
> 
> 标签：mod-rewrite

这是我的 .htaccess 的摘录：

```
RewriteRule ^([0-9]+)x([0-9]+)$ images/$1x$2.png

# front controller
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule !\.(pdf|js|ico|gif|jpg|css|rar|zip|tar\.gz)$ index.php [L] 
```

我想要实现的目标：当用户访问 URL`example.com/200x100`时，我想在内部将 URL 重写为`example.com/images/200x100.png`，因此应用程序（前端控制器）将 REQUEST_URI 视为`/images/200x100.png`，而不仅仅是`200x100`. 如果文件 /images/200x100.png 存在，则根本不应该启动应用程序。

# architecture - Amazon S3 文件和路径命名架构决策

> ID：11333482
> 
> 赞同：3
> 
> 时间：2012-07-04T17:42:36.490
> 
> 标签：architecture, hash, amazon-s3, cdn

我有兴趣了解为什么如此多的服务（如 Twitter 和 Facebook）以他们的方式命名他们的 CDN 文件。看着[http://25.media.tumblr.com/tumblr_m6m6g57NgY1qdhfhho2_1280.jpg](http://25.media.tumblr.com/tumblr_m6m6g57NgY1qdhfhho2_1280.jpg)我有一些观察性问题：

1.  他们是否使用多个子域（25.media、26.media 等）从单个域卸载 DNS 查询？看起来 storage.tumblr.com 对他们所有的图片来说已经足够了，因为 S3 只是有一个大桶的概念。
2.  他们是否在文件名中插入了一个散列字符串以防止从网络收集工具中连续遍历？这似乎是个好主意。获取文件名并在其上附加一些垃圾，对其进行哈希处理，然后将该哈希插入到 tumblr_XXXXXXXXXXXXXXXXXX_1280.jpg 文件名中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T07:07:00.740

1.  浏览器对单个域可以发出多少并行请求是有限制的，使用多个子域意味着更多的并行请求。见：http: [//yuiblog.com/blog/2007/04/11/performance-research-part-4/](http://yuiblog.com/blog/2007/04/11/performance-research-part-4/)

2.  由于您描述的原因，他们可能使用看似随机的文件名。但更有可能的是，他们使用它来确保文件名的唯一性，并且如果文件发生更改，缓存也会失效，从而确保所有用户都看到最新版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-21T20:44:11.577

1.  多个子域的另一个可能原因是它们可能正在使用多个媒体容器，因为每个容器可以容纳（或应该容纳，以保持快速运行）的对象数量的限制。单个容器中的太多对象会减慢速度向下）。

# iphone - 响应不适用于按钮操作侦听器中的代码

> ID：11333483
> 
> 赞同：0
> 
> 时间：2012-07-04T17:42:40.720
> 
> 标签：iphone, web-services, titanium

```
 var button = Ti.UI.createButton({
            left: 180,
            top: 180,
            width: 100,
            hight: 30,
            title: 'Go'
        });
        self.add(button);

        button.addEventListener('click', function() {

        var xhr = Ti.Network.createHTTPClient();
        var authstr = 'Basic ' +Titanium.Utils.base64encode('S0009231839'+':'+ 'm8390967743!'); 
        xhr.open("GET","http://erp.esworkplace.sap.com/sap/bc/srt/wsdl/bndg_DF52FF9E9AF025F18F0400145E5ADE89/wsdl11/allinone/ws_policy/document?sap-client=800");
        xhr.setRequestHeader('Authorization', authstr);   
        xhr.setRequestHeader('Content-Type','text/xml');
        xhr.setRequestHeader('Accept-Language','en');

        alert('show');

        xhr.onload = function(e)

    {       try
        {

            //get the xml data and let it roll!
            var doc = this.responseXML.documentElement;
            // var items = doc.getElementsByTagName("atom:entry");
            var items = doc.getElementsByTagName("wsdl:portType");

            for(var c=0; c<items.length;c++){
            var item = items.item(c);
            alert(items.length);
            var attributeEmployeeLeave = items.item(c).attributes.getNamedItem("name").nodeValue;
            Ti.API.info(items.item(c).attributes.getNamedItem("name").nodeValue);       
            }
        }

            catch(E)
        {
            alert('error on xhr');
        } 
```

按钮的响应`addEventListener` 不起作用

我不知道为什么！

任何人都可以给我建议！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T19:10:55.187

简单按钮示例

```
 var button = Titanium.UI.createButton({ title: 'Hello' });
    button.addEventListener('click',function(e) {
    Titanium.API.info("You clicked the button"); }); 
```

请将您的更改`button.addEventListener('click', function() {`为`button.addEventListener('click', function(e) {`.

# css - CSS 表格高度

> ID：11333488
> 
> 赞同：0
> 
> 时间：2012-07-04T17:43:15.427
> 
> 标签：css, forms

我有这个输入文本和输入按钮，我试图让它们具有相同的高度......你可以在右上角的[http://www.taranmarlowjewelry.com/](http://www.taranmarlowjewelry.com/)上看到这个......它们看起来一样高吗? 如果不是，我如何让它们保持相同的高度？

```
<form class="product_search" style="font-size:0px !important;" method="GET" action="<?php echo $pp_url?>/" >
<input name="product_search" id="wpsc_search_autocomplete" class="wpsc_product_search wpsc_live_search_embed .wpsc_live_search" autocomplete="off" style="padding:0px !important; height:23px !important;" />
<input type="submit" id="button" name="button" class="searchBtn" value="GO"/>
</form> 
```

和CSS：

```
.searchBtn {
    background-color: #FFA18A;
    border: 0 none;
    color: #FFFFFF;
    cursor: pointer;
    height: 25.5px;
    width: 32px;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T18:00:45.387

文本输入的有效高度为 27px，而按钮的有效高度为 25px。

尝试添加这些样式：

```
.searchBtn{
  padding: 0;
  height: 27px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T18:02:15.297

让它们背靠背浮动，并确保通过在按钮上添加额外的高度来补偿输入的边框。请参阅此处的示例：http: [//jsfiddle.net/wAgfe/](http://jsfiddle.net/wAgfe/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T18:06:09.720

您已定义：

```
input name="product_search" : height:23px !important
input name="button" : height: 25.5px; 
```

统一两个高度有什么问题吗？

# uitableview - 使用 UITableView 以编程方式创建 UINavigationController

> ID：11333492
> 
> 赞同：0
> 
> 时间：2012-07-04T17:43:28.117
> 
> 标签：uitableview, uinavigationcontroller

我已经为这个问题苦苦挣扎了很长时间。也许你可以帮助我。所以我想用简单的 UITableView 以编程方式创建一个基本的 UINavigationController。

例如 UITableView 将包含一些关于“颜色”的信息。项目列表类似于：“黄色”、“橙色”、“绿色”、“紫色”。

如果你能帮助我把这件事做好，我会非常高兴。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T17:51:47.533

尝试这个：

```
@interface MyViewController: UITableViewController {
    NSArray *data;
}

@end

@implementation MyViewController

- (id)init
{
    if ((self = [super init]))
    {
        data = [[NSArray alloc] initWithObjects:@"Red", @"Green", @"Blue", nil];
    }
    return self;
}

- (void)dealloc
{
    [data release];
    [super dealloc];
}

- (int)tableView:(UITableView *)tv numberOfRowsInSection:(int)s
{
    return [data count];
}

- (UITableViewCell *)tableView:(UITableView *)tv cellForRowAtIndexPath:(NSIndexPath *)ip
{
    UITableViewCell *cell = [tv dequeueReusableCellWithIdentifier:@"CELLID"];
    if (!cell) cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault identifier:@"CELLID"] autorelease];
    cell.textLabel.text = [data objectAtIndex:ip.row];
    return cell;
}

@end 
```

像这样使用它：

```
MyViewController *ctrl = [[MyViewController alloc] init];
UINavigationController *navCtrl = [[UINavigationController alloc] initWithRootViewController:ctrl];
[ctrl release]; 
```

等等

# jquery - jquery 多个条件

> ID：11333493
> 
> 赞同：0
> 
> 时间：2012-07-04T17:43:29.130
> 
> 标签：jquery, css

我有 4 个复选框，每个复选框都在一个单独的`<div>`. 每个 div 都有一个对应的类（widthCol1 -> widthCol4）。每个 div 都在一个单独`<td>`的`<tr>`a 中`<table>`。根据选择的复选框组合，我需要用特定颜色为表格的行着色。

仅考虑前 2 个复选框，它应该在选中时为 #ffaaaa 行着色，在`.widthCol2 input`未选中时为 #ccff99 着色。如果没有选中复选框（未实现），它还应该为行 #fff 着色。

如果在另一行中选中了第二个复选框，则该脚本不起作用。为什么 ？

```
$(".widthCol1 input").click(function () {
    if ($(this).is(":checked")) {
        if ($(".widthCol2 input").is(":checked")) {
            $(this).closest("tr").css("background-color", "#ffaaaa");
        } else {
            $(this).closest("tr").css("background-color", "#ccff99");
        }
    } else {
        // test other checkboxes before coloring #fff
    }
}); 
```

该脚本必须用于所有 4。是否还有更好、更清洁的方法来测试它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T18:13:57.913

这是一个可以玩的小提琴：http: [//jsfiddle.net/Xt3RX/](http://jsfiddle.net/Xt3RX/)

我建议您尝试形式化您的逻辑，以便您可以通过检查查找正确的颜色。也许它就像 0=white, 1=green, 2=red, 3=purple（或其他）一样简单，计数器只计算所有选中的框。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T10:32:49.183

这就是解决方案。下面的脚本（我的部分副本）将检索表中的每一行，然后找到我需要的 3 个复选框。之后，它将测试它们并分配正确的颜色代码。最后，它会将颜色分配给该行。这样，我只需要关注 3 个变量，而不是表中的所有复选框（及其特定索引）。

```
$("input[type=checkbox]").click(function () {
    var vals = $(this).closest("tr");
    vals.each(function () {
        var color = "#fff";
        var c1 = $(this).find(".widthCol1 input:checkbox");
        var c2 = $(this).find(".widthCol2 input:checkbox");
        var c3 = $(this).find(".widthCol3 input:checkbox");
        if ($(c2).is(":checked")) {
            color = "#ffaaaa";
        } else {
            $(c1).is(":checked") ? color = "#ccff99" : color = "#fff";
        }
        $(this).css("background-color", color);
    });
}); 
```

# php - 如何将变量添加到控制器/header.php

> ID：11333495
> 
> 赞同：3
> 
> 时间：2012-07-04T17:43:37.613
> 
> 标签：php, opencart

我有这个网站，我想在标题中放入一些用于 SEO 的目的。H1 必须包含制造商名称（品牌）和产品代码（型号）。

所以问题是我不确定如何将这些变量放入控制器的文件中，以便接下来我可以在模板文件中调用它们。

有任何想法吗？:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T10:59:17.690

解决此问题的最佳方法是编辑产品控制器

```
catalog/controller/product/product.php 
```

并在那里更改标题。它设置为

```
$this->document->setTitle($product_info['name']); 
```

所以您只需要在此处添加/附加制造商名称，例如

```
$this->document->setTitle($product_info['name'] . ' ' . $product_info['manufacturer']); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T08:09:46.613

做到了！将此代码添加到 controller/common/header.php

```
if (isset($this->request->get['product_id'])) {
        $product_id = $this->request->get['product_id'];
    } else {
        $product_id = 0;
    }

    $this->load->model('catalog/product');

    $product_info = $this->model_catalog_product->getProduct($product_id);

    $this->data['product_info'] = $product_info;

    if ($product_info) {

        $this->data['manufacturer'] = $product_info['manufacturer'];
        $this->data['model'] = $product_info['model'];

    } 
```

这就是主题/默认/模板/通用/header.tpl

```
<?php echo $product_info['manufacturer']; ?> <?php echo $product_info['model']; ?> 
```

# php - PHP 和 Android 程序员，现在与自由开发者 SVN 合作？或者是什么？

> ID：11333499
> 
> 赞同：0
> 
> 时间：2012-07-04T17:43:51.633
> 
> 标签：php, android, project-management, collaboration

我在我的桌面上做一些 android 工作，我开始在一个网站上做一些 PHP 工作。我刚开始在两个平台上与一些自由职业者进行一些合作。我还想在我的笔记本电脑上做更多的编码（android 和 eclipse 的导出和导入很烦人）。我家里有一个 GoDaddy 共享主机和一个被忽视的 Ubuntu 11.04 服务器。

我需要设置一些东西来让这一切变得更容易，我应该做一些 SVN 吗？我的项目赚不了多少钱，所以我不想为在线存储库付费。有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T17:48:50.930

DVCS，例如[Git](http://git-scm.com/)或[Mercurial](http://mercurial.selenic.com/)。两者都可以在任何具有 shell 访问权限的服务器上设置在线存储库。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T17:55:49.180

[Bitbucket](http://www.bitbucket.org)将是您最好的选择，它对私人回购免费并使用[git](http://git-scm.com/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-04T17:53:09.903

您可以使用[assembla](http://www.assembla.com/)提供的免费 svn/git ，也可以从此链接[http://www.assembla.com/catalog/tag/Free?type=private选择免费计划](http://www.assembla.com/catalog/tag/Free?type=private)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-04T17:54:27.640

您可以尝试打开 git 免费版本，或者 google drive 可能是一个更好的选择，因为它是免费的，它的桌面应用程序可以自动在线同步您的数据。

# ios - 在 Windows 上调试 iOS Safari html 布局

> ID：11333501
> 
> 赞同：1
> 
> 时间：2012-07-04T17:43:54.787
> 
> 标签：ios, debugging, mobile-safari, markup

我的 ASP.NET MVC 网站标记在 iOS（iPad 和 iPhone）中看起来“错误”。在桌面 Safari Chrome、IE 等。我只是在浏览器中使用和嵌入开发者工具来定位问题。

有没有办法从 Windows 调试 iOS Safari（通过一些模拟器）。我手头也有带有 xCode 的 Mac，如果它提供了促进该过程的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T17:46:14.510

在您的 Mac 上，您可以打开 iOS 模拟器（以前是 iPhone 模拟器）。如果你有 XCode，你就有了模拟器。只需打开模拟器，打开 Safari 并从那里导航到您的页面，就像在普通浏览器中一样。

由于 Mobile Safari 没有功能强大的 HTML/CSS 检查器，因此[Firebug Lite](http://getfirebug.com/firebuglite)可能会起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-18T13:32:08.417

我知道这是一个很老的问题，但是由于我最近自己遇到了这个问题，并找到了解决方案，所以让我在这里与其他可能会寻找的人分享。

weinre项目提供了一个远程调试器，其工作[方式](http://muellerware.org/papers/weinre/manual.html)或多或少类似于旧版本的 webkit 开发工具。虽然它不像 Safari 中的适当远程调试工具那样功能齐全，但它可以在使用 HTML 和 CSS 时完成工作。

weinre 包[在 npmjs.com 上](https://www.npmjs.com/package/weinre)可用，它需要在您的系统上安装 NodeJS / NPM。它可以调试运行任何浏览器的任何应用程序，并且适用于所有支持 NodeJS 的平台，包括 Windows。

安装：

```
npm i -g weinre 
```

然后在端口 9000（或您想要的任何端口）上启动它：

```
weinre --httpPort 9000 
```

访问 localhost:9000 可以访问有关如何检测正在测试的网页的说明（查看目标脚本部分）。例如，将此添加到您的页面：

```
<script src="http://localhost:9000/target/target-script-min.js#anonymous"></script> 
```

检测页面后，您可以转到说明页面指向的调试界面。

# javascript - 让您的 jquery 数据表按第一列对 DESC 进行排序。或将另一列设置为其默认排序依据

> ID：11333507
> 
> 赞同：7
> 
> 时间：2012-07-04T17:44:09.783
> 
> 标签：javascript, jquery, datatables

我已经尝试了几个小时来解决这个问题，但它没有发生。当我加载我的表时，我需要它在第一个 col 上对 desc 进行排序。这就是我所拥有的，但没有运气。

```
/**
*   Makes the table in the tabs for reports
*
* @param array Holds the data for datatable.
**/
var makeTabTable = function(tableData){
    $("#tab_active_reg").dataTable({
        bJQueryUI : true,
        bDestroy : true,
        aoColumns : [
            {"sTitle" : "Seen", "sWidth" : "50px", "asSorting": [ "desc"]},
            {"sTitle" : "Sold", "sWidth" : "50px"},
            {"sTitle" : "Name", "sWidth" : "240px"}
        ],
        aaData : tableData  
        });
    $('.tabsComponent').find('.fg-toolbar').empty();
}; 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-04T17:49:24.160

只需将此选项添加到`dataTable()`调用中：

```
aaSorting : [[0, 'desc']] 
```

所以在你的情况下：

```
 $("#tab_active_reg").dataTable({
        bJQueryUI : true,
        bDestroy : true,
        aaSorting : [[0, 'desc']],
        aoColumns : [
            {"sTitle" : "Seen", "sWidth" : "50px"},
            {"sTitle" : "Sold", "sWidth" : "50px"},
            {"sTitle" : "Name", "sWidth" : "240px"}
        ],
        aaData : tableData  
    }); 
```

如您所见，它是一个 数组`[colnumber, sortdirection]`，因此您可以指定多个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-21T11:26:07.673

根据最新的数据表文档，我有一个更**简单的答案。**

例如，如果您想在***页面的默认加载时*****按降序**对数据表的**第 4 列**进行排序，则使用此代码。

 ***[![在此处输入图像描述](../Images/f2c788cf4916c93cf99e3f6631470d7d.png)](https://i.stack.imgur.com/s32Za.png)

```
$(document).ready( function () {
  var table = $('#example').DataTable({    
     //We are simply using order property which is an array of array so multiple columns can be ordered like this.
            "order": [
                      [3, 'desc'],

                     ]        

        });
} );
```

```
body {
  font: 90%/1.45em "Helvetica Neue", HelveticaNeue, Verdana, Arial, Helvetica, sans-serif;
  margin: 0;
  padding: 0;
  color: #333;
  background-color: #fff;
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
<!DOCTYPE html>
<html>
  <head>

    <link href="https://nightly.datatables.net/css/jquery.dataTables.css" rel="stylesheet" type="text/css" />
    <script src="https://nightly.datatables.net/js/jquery.dataTables.js"></script>

    <meta charset=utf-8 />
    <title>DataTables - JS Bin</title>
  </head>
  <body>
    <div class="container">
      <table id="example" class="display nowrap" width="100%">
        <thead>
          <tr>
            <th>Name</th>
            <th>Position</th>
            <th>Office</th>
            <th>Age</th>
            <th>Start date</th>
            <th>Salary</th>
          </tr>
        </thead>

        <tfoot>
          <tr>
            <th>Name</th>
            <th>Position</th>
            <th>Office</th>
            <th>Age</th>
            <th>Start date</th>
            <th>Salary</th>
          </tr>
        </tfoot>

        <tbody>
          <tr>
            <td>Tiger Nixon</td>
            <td>System Architect</td>
            <td>Edinburgh</td>
            <td>61</td>
            <td>2011/04/25</td>
            <td>$3,120</td>
          </tr>
          <tr>
            <td>Garrett Winters</td>
            <td>Director</td>
            <td>Edinburgh</td>
            <td>63</td>
            <td>2011/07/25</td>
            <td>$5,300</td>
          </tr>
          <tr>
            <td>Ashton Cox</td>
            <td>Technical Author</td>
            <td>San Francisco</td>
            <td>66</td>
            <td>2009/01/12</td>
            <td>$4,800</td>
          </tr>
          <tr>
            <td>Cedric Kelly</td>
            <td>Javascript Developer</td>
            <td>Edinburgh</td>
            <td>22</td>
            <td>2012/03/29</td>
            <td>$3,600</td>
          </tr>
          <tr>
            <td>Jenna Elliott</td>
            <td>Financial Controller</td>
            <td>Edinburgh</td>
            <td>33</td>
            <td>2008/11/28</td>
            <td>$5,300</td>
          </tr>
          <tr>
            <td>Brielle Williamson</td>
            <td>Integration Specialist</td>
            <td>New York</td>
            <td>61</td>
            <td>2012/12/02</td>
            <td>$4,525</td>
          </tr>
          <tr>
            <td>Herrod Chandler</td>
            <td>Sales Assistant</td>
            <td>San Francisco</td>
            <td>59</td>
            <td>2012/08/06</td>
            <td>$4,080</td>
          </tr>
          <tr>
            <td>Rhona Davidson</td>
            <td>Integration Specialist</td>
            <td>Edinburgh</td>
            <td>55</td>
            <td>2010/10/14</td>
            <td>$6,730</td>
          </tr>
          <tr>
            <td>Colleen Hurst</td>
            <td>Javascript Developer</td>
            <td>San Francisco</td>
            <td>39</td>
            <td>2009/09/15</td>
            <td>$5,000</td>
          </tr>
          <tr>
            <td>Sonya Frost</td>
            <td>Software Engineer</td>
            <td>Edinburgh</td>
            <td>23</td>
            <td>2008/12/13</td>
            <td>$3,600</td>
          </tr>
          <tr>
            <td>Jena Gaines</td>
            <td>System Architect</td>
            <td>London</td>
            <td>30</td>
            <td>2008/12/19</td>
            <td>$5,000</td>
          </tr>
          <tr>
            <td>Quinn Flynn</td>
            <td>Financial Controller</td>
            <td>Edinburgh</td>
            <td>22</td>
            <td>2013/03/03</td>
            <td>$4,200</td>
          </tr>
          <tr>
            <td>Charde Marshall</td>
            <td>Regional Director</td>
            <td>San Francisco</td>
            <td>36</td>
            <td>2008/10/16</td>
            <td>$5,300</td>
          </tr>
          <tr>
            <td>Haley Kennedy</td>
            <td>Senior Marketing Designer</td>
            <td>London</td>
            <td>43</td>
            <td>2012/12/18</td>
            <td>$4,800</td>
          </tr>
          <tr>
            <td>Tatyana Fitzpatrick</td>
            <td>Regional Director</td>
            <td>London</td>
            <td>19</td>
            <td>2010/03/17</td>
            <td>$2,875</td>
          </tr>
          <tr>
            <td>Michael Silva</td>
            <td>Senior Marketing Designer</td>
            <td>London</td>
            <td>66</td>
            <td>2012/11/27</td>
            <td>$3,750</td>
          </tr>
          <tr>
            <td>Paul Byrd</td>
            <td>Javascript Developer</td>
            <td>New York</td>
            <td>64</td>
            <td>2010/06/09</td>
            <td>$5,000</td>
          </tr>
          <tr>
            <td>Gloria Little</td>
            <td>Systems Administrator</td>
            <td>New York</td>
            <td>59</td>
            <td>2009/04/10</td>
            <td>$3,120</td>
          </tr>
          <tr>
            <td>Bradley Greer</td>
            <td>Software Engineer</td>
            <td>London</td>
            <td>41</td>
            <td>2012/10/13</td>
            <td>$3,120</td>
          </tr>
          <tr>
            <td>Dai Rios</td>
            <td>System Architect</td>
            <td>Edinburgh</td>
            <td>35</td>
            <td>2012/09/26</td>
            <td>$4,200</td>
          </tr>
          <tr>
            <td>Jenette Caldwell</td>
            <td>Financial Controller</td>
            <td>New York</td>
            <td>30</td>
            <td>2011/09/03</td>
            <td>$4,965</td>
          </tr>
          <tr>
            <td>Yuri Berry</td>
            <td>System Architect</td>
            <td>New York</td>
            <td>40</td>
            <td>2009/06/25</td>
            <td>$3,600</td>
          </tr>
          <tr>
            <td>Caesar Vance</td>
            <td>Technical Author</td>
            <td>New York</td>
            <td>21</td>
            <td>2011/12/12</td>
            <td>$4,965</td>
          </tr>
          <tr>
            <td>Doris Wilder</td>
            <td>Sales Assistant</td>
            <td>Edinburgh</td>
            <td>23</td>
            <td>2010/09/20</td>
            <td>$4,965</td>
          </tr>
          <tr>
            <td>Angelica Ramos</td>
            <td>System Architect</td>
            <td>London</td>
            <td>36</td>
            <td>2009/10/09</td>
            <td>$2,875</td>
          </tr>
          <tr>
            <td>Gavin Joyce</td>
            <td>Developer</td>
            <td>Edinburgh</td>
            <td>42</td>
            <td>2010/12/22</td>
            <td>$4,525</td>
          </tr>
          <tr>
            <td>Jennifer Chang</td>
            <td>Regional Director</td>
            <td>London</td>
            <td>28</td>
            <td>2010/11/14</td>
            <td>$4,080</td>
          </tr>
          <tr>
            <td>Brenden Wagner</td>
            <td>Software Engineer</td>
            <td>San Francisco</td>
            <td>18</td>
            <td>2011/06/07</td>
            <td>$3,750</td>
          </tr>
          <tr>
            <td>Ebony Grimes</td>
            <td>Software Engineer</td>
            <td>San Francisco</td>
            <td>48</td>
            <td>2010/03/11</td>
            <td>$2,875</td>
          </tr>
          <tr>
            <td>Russell Chavez</td>
            <td>Director</td>
            <td>Edinburgh</td>
            <td>20</td>
            <td>2011/08/14</td>
            <td>$3,600</td>
          </tr>
          <tr>
            <td>Michelle House</td>
            <td>Integration Specialist</td>
            <td>Edinburgh</td>
            <td>37</td>
            <td>2011/06/02</td>
            <td>$3,750</td>
          </tr>
          <tr>
            <td>Suki Burks</td>
            <td>Developer</td>
            <td>London</td>
            <td>53</td>
            <td>2009/10/22</td>
            <td>$2,875</td>
          </tr>
          <tr>
            <td>Prescott Bartlett</td>
            <td>Technical Author</td>
            <td>London</td>
            <td>27</td>
            <td>2011/05/07</td>
            <td>$6,730</td>
          </tr>
          <tr>
            <td>Gavin Cortez</td>
            <td>Technical Author</td>
            <td>San Francisco</td>
            <td>22</td>
            <td>2008/10/26</td>
            <td>$6,730</td>
          </tr>
          <tr>
            <td>Martena Mccray</td>
            <td>Integration Specialist</td>
            <td>Edinburgh</td>
            <td>46</td>
            <td>2011/03/09</td>
            <td>$4,080</td>
          </tr>
          <tr>
            <td>Unity Butler</td>
            <td>Senior Marketing Designer</td>
            <td>San Francisco</td>
            <td>47</td>
            <td>2009/12/09</td>
            <td>$3,750</td>
          </tr>
          <tr>
            <td>Howard Hatfield</td>
            <td>Financial Controller</td>
            <td>San Francisco</td>
            <td>51</td>
            <td>2008/12/16</td>
            <td>$4,080</td>
          </tr>
          <tr>
            <td>Hope Fuentes</td>
            <td>Financial Controller</td>
            <td>San Francisco</td>
            <td>41</td>
            <td>2010/02/12</td>
            <td>$4,200</td>
          </tr>
          <tr>
            <td>Vivian Harrell</td>
            <td>System Architect</td>
            <td>San Francisco</td>
            <td>62</td>
            <td>2009/02/14</td>
            <td>$4,965</td>
          </tr>
          <tr>
            <td>Timothy Mooney</td>
            <td>Financial Controller</td>
            <td>London</td>
            <td>37</td>
            <td>2008/12/11</td>
            <td>$4,200</td>
          </tr>
          <tr>
            <td>Jackson Bradshaw</td>
            <td>Director</td>
            <td>New York</td>
            <td>65</td>
            <td>2008/09/26</td>
            <td>$5,000</td>
          </tr>
          <tr>
            <td>Miriam Weiss</td>
            <td>Support Engineer</td>
            <td>Edinburgh</td>
            <td>64</td>
            <td>2011/02/03</td>
            <td>$4,965</td>
          </tr>
          <tr>
            <td>Bruno Nash</td>
            <td>Software Engineer</td>
            <td>London</td>
            <td>38</td>
            <td>2011/05/03</td>
            <td>$4,200</td>
          </tr>
          <tr>
            <td>Odessa Jackson</td>
            <td>Support Engineer</td>
            <td>Edinburgh</td>
            <td>37</td>
            <td>2009/08/19</td>
            <td>$3,600</td>
          </tr>
          <tr>
            <td>Thor Walton</td>
            <td>Developer</td>
            <td>New York</td>
            <td>61</td>
            <td>2013/08/11</td>
            <td>$3,600</td>
          </tr>
          <tr>
            <td>Finn Camacho</td>
            <td>Support Engineer</td>
            <td>San Francisco</td>
            <td>47</td>
            <td>2009/07/07</td>
            <td>$4,800</td>
          </tr>
          <tr>
            <td>Elton Baldwin</td>
            <td>Data Coordinator</td>
            <td>Edinburgh</td>
            <td>64</td>
            <td>2012/04/09</td>
            <td>$6,730</td>
          </tr>
          <tr>
            <td>Zenaida Frank</td>
            <td>Software Engineer</td>
            <td>New York</td>
            <td>63</td>
            <td>2010/01/04</td>
            <td>$4,800</td>
          </tr>
          <tr>
            <td>Zorita Serrano</td>
            <td>Software Engineer</td>
            <td>San Francisco</td>
            <td>56</td>
            <td>2012/06/01</td>
            <td>$5,300</td>
          </tr>
          <tr>
            <td>Jennifer Acosta</td>
            <td>Javascript Developer</td>
            <td>Edinburgh</td>
            <td>43</td>
            <td>2013/02/01</td>
            <td>$2,875</td>
          </tr>
          <tr>
            <td>Cara Stevens</td>
            <td>Sales Assistant</td>
            <td>New York</td>
            <td>46</td>
            <td>2011/12/06</td>
            <td>$4,800</td>
          </tr>
          <tr>
            <td>Hermione Butler</td>
            <td>Director</td>
            <td>London</td>
            <td>47</td>
            <td>2011/03/21</td>
            <td>$4,080</td>
          </tr>
          <tr>
            <td>Lael Greer</td>
            <td>Systems Administrator</td>
            <td>London</td>
            <td>21</td>
            <td>2009/02/27</td>
            <td>$3,120</td>
          </tr>
          <tr>
            <td>Jonas Alexander</td>
            <td>Developer</td>
            <td>San Francisco</td>
            <td>30</td>
            <td>2010/07/14</td>
            <td>$5,300</td>
          </tr>
          <tr>
            <td>Shad Decker</td>
            <td>Regional Director</td>
            <td>Edinburgh</td>
            <td>51</td>
            <td>2008/11/13</td>
            <td>$5,300</td>
          </tr>
          <tr>
            <td>Michael Bruce</td>
            <td>Javascript Developer</td>
            <td>Edinburgh</td>
            <td>29</td>
            <td>2011/06/27</td>
            <td>$4,080</td>
          </tr>
          <tr>
            <td>Donna Snider</td>
            <td>System Architect</td>
            <td>New York</td>
            <td>27</td>
            <td>2011/01/25</td>
            <td>$3,120</td>
          </tr>
        </tbody>
      </table>
    </div>
  </body>
</html>
```

如果您还想更改按**降序**排序的列的默认单击，那么您也可以[看到这个小提琴](http://live.datatables.net/zecugafo/1/edit?js)。***

# python - SqlAlchemy + Mysql：由于 IntegrityError 无法删除表

> ID：11333520
> 
> 赞同：3
> 
> 时间：2012-07-04T17:45:36.083
> 
> 标签：python, mysql, sqlalchemy, pyramid

当我尝试重新初始化数据库时，我不断收到 IntegrityError：

```
sqlalchemy.exc.IntegrityError: (IntegrityError) (1217, 'Cannot delete or update a parent row: a foreign key constraint fails') '\nDROP TABLE users' () 
```

在我的 init_db 脚本中，我有：

```
def main(argv=sys.argv):
    if len(argv) != 2:
        usage(argv)
    config_uri = argv[1]
    setup_logging(config_uri)
    settings = get_appsettings(config_uri)
    engine = create_engine('...')
    Session.configure(bind=engine)
    session = Session()
    Base.metadata.bind=engine
    Base.metadata.drop_all(engine)
    Base.metadata.create_all(engine) 
```

它会让我删除用户表，即：

```
class User(Base):
    __tablename__='users'
    __table_args__={
        'mysql_engine':'InnoDB',
        'mysql_charset':'utf8',
    }

    user_id = Column(Integer, primary_key=True, unique=True)
    username = Column(VARCHAR(16), primary_key=True, unique=True)
    name = Column(VARCHAR(16))
    password = Column(VARCHAR(20))
    email = Column(VARCHAR(30))
    creation = Column(DateTime, default = datetime.datetime.now)    

    def __init__(self, un, name, pw, email):
        self.username = un
        self.name = name
        self.email = email
        self.password = pw 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-05T05:59:02.533

我看到两个可能的原因：

1.  **未映射表**：您在数据库中有另一个表，该`ForeignKey`表具有`users`表，但未映射到任何`sqlalchemy`模型，因此在`drop_all`操作期间不会删除。
2.  **缺少 ForeignKey 映射**：模型中缺少某些关系`sqlalchemy`。例如，`addresses`DB 上的表有一个`ForeignKey`which 指向该`users`表，但是您的模型`Address`（或者正确地说，该表的映射器`Address`）没有配置此 ForeignKey，因此`drop_all` `sqlalchemy`无法知道该表应该是在引用的 ( ) 之前删除`users`。

# ruby-on-rails-3 - Twitter Bootstrap Rails - 我如何将我的样式与 bootstrap_and_overrides.less 分开

> ID：11333526
> 
> 赞同：3
> 
> 时间：2012-07-04T17:46:08.240
> 
> 标签：ruby-on-rails-3, twitter-bootstrap, less

我`twitter-bootstrap-rails`在我的应用程序中将 gem 用于样式。

目前，我在里面写了我所有的风格规则`bootstrap_and_overrides.css.less`，随着应用程序的增长，这变得混乱和多余。

我想将较少的代码拆分为每页所需的较小文件，但仍然可以使用引导颜色和混合。我发现我把它拆分成另一个文件后，我不能再使用这些组件了。我想我可能没有正确或按正确的顺序包含它 - 想法？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T19:32:27.010

看看[https://github.com/twitter/bootstrap/blob/master/less/bootstrap.less](https://github.com/twitter/bootstrap/blob/master/less/bootstrap.less)

你应该可以`@import "override-forms.less"`在你`bootstrap_and_overrides.css.less`的例子中使用。

# sql-server - 我应该使用哪种 SQL Server 2005/2008 锁定方法来处理多个服务器应用程序实例中的单个表行？

> ID：11333527
> 
> 赞同：5
> 
> 时间：2012-07-04T17:46:10.373
> 
> 标签：sql-server, locking

我需要开发一个服务器应用程序（在 C# 中），它将从一个简单的表（在 SQL Server 2005 或 2008 中）读取行，做一些工作，例如调用 Web 服务，然后使用结果状态更新行（成功， 错误）。

看起来很简单，但是当我添加以下应用程序要求时，事情变得更加困难：

*   出于负载平衡和容错的目的，多个应用程序实例必须同时运行。通常，应用程序将部署在两台或多台服务器上，并将同时访问同一个数据库表。**每个表行只能处理一次**，因此必须在多个应用程序实例之间使用通用的同步/锁定机制。

*   当一个应用程序实例正在处理一组行时，其他应用程序实例不必等待它结束来读取另一组等待处理的行。

*   如果应用程序实例崩溃，则不需要对正在处理的表行进行任何人工干预（例如删除用于对崩溃实例正在处理的行进行应用程序锁定的临时状态）。

*   应该以类似队列的方式处理行，即应该首先处理最旧的行。

尽管这些要求看起来并不太复杂，但我在想出解决方案时遇到了一些麻烦。

我已经看到了锁定提示建议，例如`XLOCK`, `UPDLOCK`, `ROWLOCK`,`READPAST`等，但是我没有看到任何锁定提示的组合可以让我实现这些要求。

谢谢你的帮助。

问候，

努诺·格雷罗

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-04T20:12:02.407

这是典型的表作为队列模式，如将[表用作队列](http://rusanu.com/2010/03/26/using-tables-as-queues/)中所述。您将使用 Pending Queue 并且出队事务还应该在合理的超时时间内安排重试。在网络调用期间保持锁定实际上是不可能的。成功后，您将删除待处理的项目。

您还需要能够批量出队，如果您进入严重负载（每秒 100 和数千次操作），则逐个出队太慢。因此，从链接的文章中获取 Pending Queue 示例：

```
create table PendingQueue (
  id int not null,
  DueTime datetime not null,
  Payload varbinary(max),
  cnstraint pk_pending_id nonclustered primary key(id));

create clustered index cdxPendingQueue on PendingQueue (DueTime);
go

create procedure usp_enqueuePending
  @dueTime datetime,
  @payload varbinary(max)
as
  set nocount on;
  insert into PendingQueue (DueTime, Payload)
    values (@dueTime, @payload);
go

create procedure usp_dequeuePending
  @batchsize int = 100,
  @retryseconds int = 600
as
  set nocount on;
  declare @now datetime;
  set @now = getutcdate();
  with cte as (
    select top(@batchsize) 
      id,
      DueTime,
      Payload
    from PendingQueue with (rowlock, readpast)
    where DueTime < @now
    order by DueTime)
  update cte
    set DueTime = dateadd(seconds, @retryseconds, DueTime)
    output deleted.Payload, deleted.id;
go 
```

成功处理后，您将使用 ID 从队列中删除项目。在失败或崩溃时，它将在 10 分钟内自动重试。一种认为您必须内化的是，只要 HTTP 不提供事务语义，您就*永远*无法使用 100% 一致的语义来做到这一点（例如，保证没有项目被处理两次）。可以实现非常高的容错率，但是在数据库更新之前，HTTP调用成功后系统总是会崩溃，并且会导致重试相同的项目，因为你无法区分这种情况和系统在HTTP 调用*之前*崩溃的情况。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-04T18:08:19.767

I initially suggested [SQL Server Service Broker](http://msdn.microsoft.com/en-us/library/bb522893.aspx) for this. However, after some research it turns out this is probably not the best way of handling the problem.

What you're left with is the table architecture you've asked for. However, as you've been finding, it is unlikely that you will be able to come up with a solution that meets all the given criteria, due to the great complexity of locking, transactions, and the pressures placed on such a scheme by high concurrency and high transactions per second.

Note: I am currently researching this issue and will get back to you with more later. The following script was my attempt to meet the given requirements. However, it suffers from frequent deadlocks and processes items out of order. Please stay tuned, and in the meantime consider a destructive reads method (DELETE with OUTPUT or OUTPUT INTO).

```
SET XACT_ABORT ON; -- blow up the whole tran on any errors
SET TRANSACTION ISOLATION LEVEL READ COMMITTED;
BEGIN TRAN

UPDATE X
SET X.StatusID = 2 -- in process
OUTPUT Inserted.*
FROM (
   SELECT TOP 1 * FROM dbo.QueueTable WITH (READPAST, ROWLOCK)
   WHERE StatusID = 1 -- ready
   ORDER BY QueuedDate, QueueID -- in case of items with the same date
) X;

-- Do work in application, holding open the tran.

DELETE dbo.QueueTable WHERE QueueID = @QueueID; -- value taken from recordset that was output earlier

COMMIT TRAN; 
```

In the case of several/many rows being locked at once by a single client, there is a possibility of the rowlock escalating to an extent, page, or table lock, so be aware of that. Also, normally holding long-running transactions that maintain locks is a big no-no. It may work in this special usage case, but I fear that high tps by multiple clients will make the system break down. Note that normally, the only processes querying your queue table should be those that are doing queue work. Any processes doing reporting should use READ UNCOMMITTED or WITH NOLOCK to avoid interfering with the queue in any way.

What is the implication of rows being processed out of order? If an application instance crashes while another instance is successfully completing rows, this delay will likely cause at least one row to be delayed in its completion, causing the processing order to be incorrect.

If the transaction/locking method above is not to your satisfaction, another way to handle your application crashing would be to give your instances names, then set up a monitor process that has the capacity to check periodically if those named instances are running. When a named instance starts up it would always reset any unprocessed rows that possess its instance identifier (something as simple as "instance A" and "instance B" would work). Additionally, the monitor process would check if the instances are running and if one of them is not, reset the rows for that missing instance, enabling any other instances to run. There would be a small lag between crash and recovery, but with proper architecture it could be quite reasonable.

Note: The following links should be edifying:

*   [info about XLOCK](https://stackoverflow.com/questions/4609217/sql-server-the-misleading-xlock-optimizations)
*   [Tables as Queues](http://rusanu.com/2010/03/26/using-tables-as-queues/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-04T18:00:21.160

你不能用 SQL 事务来做到这一点（或者在这里依赖事务作为你的主要组件）。实际上，你可以这样做，但你不应该这样做。事务不应该以这种方式使用，用于长锁，你不应该像这样滥用它们。

长时间保持事务打开（检索行、调用 Web 服务、返回进行一些更新）根本不好。而且没有`optimistic locking`隔离级别可以让你做你想做的事。

使用 ROWLOCK 也不是一个好主意，因为它就是这样。**一个提示。**它受到[锁升级](http://msdn.microsoft.com/en-us/library/ms184286%28v=sql.105%29.aspx)的影响，并且可以转换为表锁。

我可以建议您的数据库的单个入口点吗？我认为它适合 pub/sub 设计。所以**只有一个**组件可以读取/更新这些记录：

1.  读取批量消息（足以让所有其他实例使用）- 1000、10000，无论您认为合适。它通过某种排队方式使这些批次可用于其他（并发）组件。我不会说 MSMQ :) （这将是我今天第二次推荐它，但它也非常适合你的情况）。
2.  它将消息标记为`in progress`或类似的东西。
3.  您的消费者都以事务方式绑定到入站队列并做他们的事情。
4.  准备好后，在 Web 服务调用之后，他们将消息放入出站队列中。
5.  中央组件获取它们，并**在分布式事务**中对数据库进行更新（如果失败，消息将保留在队列中）。由于它是唯一可以执行该操作的操作，因此您不会遇到任何并发问题。至少不在数据库上。
6.  同时它可以读取下一个待处理的批次，依此类推。

# mysql - MYSQL 从其他选择中选择列名

> ID：11333529
> 
> 赞同：0
> 
> 时间：2012-07-04T17:46:17.407
> 
> 标签：mysql, sum

我想`colum1 + column2 + column3`从一个表中选择，但问题是列的名称来自我无法更改的脚本。

所以我有

```
select column1,column2,column3 from table 
```

但我需要它们的总和。这可以做到吗？我试过了：

```
select(select REPLACE(...)) 
```

它不工作。

其他方式 - 没有成功，是：

```
select sum() from 
(
    select column1,column2,column3 from table
) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T11:49:13.877

如果你想要一个总和，为什么不使用：

```
SELECT (column1+column2+column3) FROM your_table 
```

# php - PHP、SPL、ArrayAccess 接口

> ID：11333531
> 
> 赞同：1
> 
> 时间：2012-07-04T17:46:27.537
> 
> 标签：php, arrays, spl, arrayaccess

我试图理解 ArrayAccess 接口背后的想法，

我不明白每种方法的含义，如果这些方法（函数）是“内置”函数，而 ArrayAccess 接口（也是“内置”）只是“确保”我将实现那些“内置”方法（函数)

我试图了解每个功能对我们的代码“幕后”的作用。

```
function offsetSet($offset, $value);
function offsetGet($offset);
function offsetUnset($offset);
function offsetExists($offset); 
```

如果我理解 ArrayAccess 是一个包含要实现的密封的内置接口，当我们实现它们时，我们只实现对内置函数的引用，如果有人能帮我解决这个问题，我会很高兴。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-04T17:58:51.360

如果您实现该接口，那么该对象就像一个数组。例如，如果`$foo`是实现的类的实例`ArrayAccess`：

`$foo['bar'] = 42`来电`offsetSet('bar', 42)`。

`echo $foo['bar']`来电`offsetGet('bar')`。

`unset($foo['bar'])`来电`offsetUnset('bar')`。

`isset($foo['bar'])`来电`offsetExists('bar')`。

您永远不会自己显式调用函数 offset*。当您将对象作为数组访问时，它会隐式发生。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T13:42:06.660

在比较`ArrayAccess`（`SimpleXMLElement`一个没有实现它的内部类）时，我也很好奇。该界面已在手册中详细记录，因此我想强调一些特定偏移类型的差异。

但首先是一个实现`ArrayAccess`在访问时给出输出的类的样板示例实现：

```
/**
 * ArrayAccess Example
 */
class ExampleArrayLikeAccess implements ArrayAccess
{

    /**
     * Whether a offset exists
     *
     * @link http://php.net/manual/en/arrayaccess.offsetexists.php
     * @param mixed $offset - An offset to check for.
     * @return boolean true on success or false on failure.
     *
     * The return value will be casted to boolean if non-boolean was returned.
     */
    public function offsetExists($offset) {
        echo "  - offsetExists(", $this->varString($offset),")\n";
    }

    /**
     * Offset to retrieve
     *
     * @link http://php.net/manual/en/arrayaccess.offsetget.php
     * @param mixed $offset The offset to retrieve.
     * @return mixed Can return all value types.
     */
    public function offsetGet($offset) {
        echo "  - offsetGet(", $this->varString($offset),")\n";
    }

    /**
     * Offset to set
     *
     * @link http://php.net/manual/en/arrayaccess.offsetset.php
     * @param mixed $offset The offset to assign the value to.
     * @param mixed $value The value to set.
     * @return void
     */
    public function offsetSet($offset, $value) {
        echo "  - offsetSet(", $this->varString($offset), ", ", $this->varString($value), ")\n";
    }

    /**
     * Offset to unset
     * @link http://php.net/manual/en/arrayaccess.offsetunset.php
     * @param mixed $offset  The offset to unset.
     * @return void
     */
    public function offsetUnset($offset) {
        echo "  - offsetUnset(", $this->varString($offset),")\n";
    }

    /**
     * helper to give a variable dump in form of a string
     */
    private function varString($var) {
        ob_start();
        var_dump($var);
        return trim(strtr(ob_get_clean(), ["\n" => '', "\r" => '']), ' {}');
    }

} 
```

用它运行一些使用示例。我以评论的形式留下了笔记。它应该是不言自明的：

```
$like = new ExampleArrayLikeAccess();

/* offsetExists */

// indexes/keys that behave similar to PHP arrays:

isset($like[1]);    # integer stay integer
# offsetExists(int(1))

isset($like['1']);  # string like an integer - converted to integer
# offsetExists(int(1))

isset($like['01']); # string unlike an integer - stays string
# offsetExists(string(2) "01")

isset($like[TRUE]); # booleans are converted to integer
# offsetExists(bool(true))

// indexes/keys that differ to PHP arrays:

isset($like[1.1]);     # a float stays a float (double)
# offsetExists(double(1.1))

isset($like[NULL]);    # NULL stays NULL
# offsetExists(NULL)

isset($like[array()]); # array stays array
# offsetExists(array(0))

isset($like[$like]);   # object stays object
# offsetExists(class SxeLikeAccess#2 (0))

/* offsetGet */

// indexes/keys behave the same as with offsetExists:
$like[1];    # offsetGet(int(1))
$like['1'];  # offsetGet(int(1))
$like['01']; # offsetGet(string(2) "01")
// ...

/* offsetSet */

$like[1] = 'value';    # index/key behaves the same as with offsetExists
# offsetSet(int(1), string(5) "value")

$like[] = 'value';     # index/key is NULL
# offsetSet(NULL, string(5) "value")

$like[NULL] = 'value'; # index/key is NULL
# offsetSet(NULL, string(5) "value")

/* offsetUnset */
unset($like[1]);       # index/key behaves the same as with offsetExists
unset($like[NULL]);    # same for NULL 
```

与标准 PHP 数组的主要区别在于，您不仅可以使用整数和字符串作为偏移量。

# javascript - javascript var 未正确传递给支持 bean

> ID：11333532
> 
> 赞同：1
> 
> 时间：2012-07-04T17:46:27.880
> 
> 标签：javascript, ajax, jsf, ajax4jsf

我有这段代码无法正常工作。我已经`fieldToStore`定义了。我可以提醒它，我可以在 firebug 控制台中看到它的值，但是当它传递给 myBean 时，如果它是字符串值，它总是未定义的，如果它是布尔值，它总是未定义的。有任何想法吗？

```
<a4j:commandButton id="bt1" action="#{myBean.doSomething}" onclick="fieldToStore=false;saveFieldState();">
</a4j:commandButton>        
<a4j:jsFunction name="saveFieldState" action="#{myBean.dummyAction}" />
   <a4j:actionparam name="fieldToStore" assignTo="#{myBean.fieldToStore}" />
</a4j:jsFunction> 
```

我的期望是，在我点击 bt1 后，myBean.fieldToStore 的值为 false，根据 javascript var fieldToStore。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T18:10:08.810

您正在使用`<a4j:actionParam>`，这是[f:param 和 f:actionListener 的组合](http://my.safaribooksonline.com/book/programming/java/9781430210559/more-a4j-tags-concepts-and-features/using_la4j_colon_actionparamg)，它将其`value`属性分配给 中的属性`assignTo`。

你想`<a4j:param>`改用。[请参阅官方文档中的](http://docs.jboss.org/richfaces/latest_4_2_X/Component_Reference/en-US/html/chap-Component_Reference-Actions.html#exam-Component_Reference-a4jjsFunction-a4jjsFunction_example)此示例

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T16:13:37.737

我想通了......问题出在我在事件onclick上调用jsFunction的方式上：

```
onclick="fieldToStore=false;saveFieldState(); 
```

它应该是：

```
onclick="fieldToStore=false;saveFieldState(fieldToStore); 
```

Richfaces 文档中的示例具有误导性：

```
<body onload="callScript()">
  <h:form>
         ...
        <a4j:jsFunction name="callScript" data="#{bean.someProperty1}" reRender="someComponent" oncomplete="myScript(data.subProperty1, data.subProperty2)">
              <a4j:actionparam name="param_name" assignTo="#{bean.someProperty2}"/>
        </a4j:jsFunction>
        ...
  </h:form>
  ...
</body> 
```

Imo 它应该是 onload="callScript(param_name)"。

# asp.net - Request.IsAuthenticated 与 Membership.GetUser()

> ID：11333537
> 
> 赞同：1
> 
> 时间：2012-07-04T17:46:58.613
> 
> 标签：asp.net, asp.net-mvc, asp.net-membership, asp.net-mvc-4

我正在使用 ASP.NET 成员资格。如果我所关心的只是我是否有一个非空的 Membership.GetUser()，那么是否有理由使用 Request.IsAuthenticated？

在开发过程中，我无意中创建了 Request.IsAuthenticated 为真，但 Membership.GetUser() 为空的情况，因此我将通过 [Authorize] 过滤测试（全局应用，根据需要专门应用 [AllowAnonymous]），但后来失败了。虽然这种情况在生产中可能不会发生，但我仍然想解释它。

鉴于此，编写一个自定义过滤器是否合适，比如 AuthorizeMembership 或类似的，检查 Membership.GetUser() 而不是 Request.IsAuthenticated？有什么需要注意的问题吗？

如果是这样，是否也可以使用该过滤器来使用我通常需要处理请求的用户属性填充全局 UserInfo 对象？我根本不使用会员资料，而是在单独的应用程序数据库中独立管理我的用户属性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T19:35:04.413

主要区别在于速度。

`Request.IsAuthenticated`比`Membership.GetUser()`. _

要了解为什么一个比另一个更快，我将代码放在这里。

```
public virtual bool IsAuthenticated
{
    get
    {
        if (this.m_isAuthenticated == -1)
        {
            WindowsPrincipal principal = new WindowsPrincipal(this);
            SecurityIdentifier sid = new SecurityIdentifier(IdentifierAuthority.NTAuthority, new int[] { 11 });
            this.m_isAuthenticated = principal.IsInRole(sid) ? 1 : 0;
        }
        return (this.m_isAuthenticated == 1);
    }
} 
```

但是`GetUser()`电话太多了，因为实际上需要更多信息才能提供。

```
public static MembershipUser GetUser()
{
    return GetUser(GetCurrentUserName(), true);
}

private static string GetCurrentUserName()
{
    if (HostingEnvironment.IsHosted)
    {
        HttpContext current = HttpContext.Current;
        if (current != null)
        {
            return current.User.Identity.Name;
        }
    }
    IPrincipal currentPrincipal = Thread.CurrentPrincipal;
    if ((currentPrincipal != null) && (currentPrincipal.Identity != null))
    {
        return currentPrincipal.Identity.Name;
    }
    return string.Empty;
}

public static MembershipUser GetUser(string username, bool userIsOnline)
{
    SecUtility.CheckParameter(ref username, true, false, true, 0, "username");
    return Provider.GetUser(username, userIsOnline);
}

internal static void CheckParameter(ref string param, bool checkForNull, bool checkIfEmpty, bool checkForCommas, int maxSize, string paramName)
{
    if (param == null)
    {
        if (checkForNull)
        {
            throw new ArgumentNullException(paramName);
        }
    }
    else
    {
        param = param.Trim();
        if (checkIfEmpty && (param.Length < 1))
        {
            throw new ArgumentException(SR.GetString("Parameter_can_not_be_empty", new object[] { paramName }), paramName);
        }
        if ((maxSize > 0) && (param.Length > maxSize))
        {
            throw new ArgumentException(SR.GetString("Parameter_too_long", new object[] { paramName, maxSize.ToString(CultureInfo.InvariantCulture) }), paramName);
        }
        if (checkForCommas && param.Contains(","))
        {
            throw new ArgumentException(SR.GetString("Parameter_can_not_contain_comma", new object[] { paramName }), paramName);
        }
    }
} 
```

# objective-c - Cocos2D touch-to-move-to-destination控件？

> ID：11333541
> 
> 赞同：0
> 
> 时间：2012-07-04T17:47:53.370
> 
> 标签：objective-c, cocos2d-iphone, touch

我有一艘宇宙飞船。我想让飞船移动到玩家接触过的区域。到目前为止，我有这个代码：

```
- (void) ccTouchesEnded:(NSSet *)touches withEvent:(UIEvent *)event {

  // initialize touch
  UITouch *touch = [touches anyObject];

  // point out location of touch
  CGPoint location = [touch locationInView:[touch view]];

  // move to location
  [player runAction:[CCMoveTo actionWithDuration:0.5 position:location]];

  // log action
  CCLOG(@"player moved");

} 
```

但是，这有一个怪癖：当我触摸某些地方时，梭子会缓慢移动，向上而不是向下，以及其他奇怪的动作。有什么办法可以纠正这个代码吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T18:38:51.443

行后：

```
 CGPoint location = [touch locationInView:[touch view]]; 
```

添加这一行：

```
location = [[CCDirector sharedDirector] convertToGL: location]; 
```

然后尝试。:)

# google-sheets - 考虑列推理：不知道如何访问“This”值

> ID：11333543
> 
> 赞同：-1
> 
> 时间：2012-07-04T17:48:13.677
> 
> 标签：google-sheets, google-sheets-formula

我正在尝试执行以下操作：

*   对于每一行
*   如果单元格 A 包含文本“abc”，则获取 B 列的值和
*   如果 B 列的值大于 0:03:00，则返回 0.9
*   否则，如果 B 列的值 < 0:03:00 且 > 00:01:00 返回 0.6
*   否则返回 0.3
*   将返回值与所有其他值相加。

结果应该是这样的：

```
=IF(ISNUMBER(FIND("abc",INDIRECT(""&$A16&""&"!$D$2:$D"))),IF(INDIRECT(""&$A16&""&"!$D$2:$D")>"00:0300,???,???),?etc??) 
```

？？？是缺失的部分。另外，`INDIRECT()`可以删除进行测试，但问题是？？？部分。我不知道如何获得 IF 语句的结果以及如何处理它。我想我不明白如何使用列。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T18:20:38.860

您可以在 excel 中像这样使用带有 LOOKUP 的“数组公式”

`=SUM(IF(ISNUMBER(FIND("abc",A2:A100)),LOOKUP(B2:B100,{0,1,3}/1440,{3,6,9}/10)))`

用 CTRL+SHIFT+ENTER 确认

或者这个带有 IF 的版本[编辑]

`=SUM(IF(ISNUMBER(FIND("abc",A2:A100)),IF(B2:B100>="0:03"+0,0.9,IF(B2:B100>"0:01"+0,0.6,0.3))))`

在 Google 电子表格中使用此版本

`=arrayformula(SUM(IF(ISNUMBER(FIND(ʺabcʺ,A2:A100)),IF(B2:B100>=ʺ0:03ʺ+0,0.9,IF(B2:B100>ʺ0:01ʺ+0,0.6,0.3)))))`

这将为在 A 列中的文本中找到“abc”且 B 列 >=0 但 < 0:01, 0.6 的每一行的总数增加 0.3。其中 B >=0:01 和 < 0:03 和 0:09 如果 B >= 0:09

使用 LOOKUP 可以更轻松地避免多个 IF，但我不确定它是否在边界上为您提供了正确的值，使用第二个版本更容易调整。如果需要，您可以调整范围长度并添加 INDIRECT。

注意：对第一个条件使用 FIND 意味着公式将在文本中的任何位置查找“abc”（区分大小写），如果您只想准确检查“abc”而没有其他文本，您可以使用**range = " abc"** [不区分大小写] 或**EXACT(range "abc")** [区分大小写]

# html - 打印时显示背景图像？

> ID：11333547
> 
> 赞同：2
> 
> 时间：2012-07-04T17:48:36.203
> 
> 标签：html, css, printing

`background-image`我有一个使用该属性插入页面的图标。效果很好。但是图标是白色的，打印时它不会显示出来。我有一个已设置的打印样式表，但打印时图标不显示。我认为这是因为我正在使用该`background-image`属性并且它不打印背景图像。解决此问题以显示和打印图标的最佳方法是什么？

***CSS：***

```
 /* PAGE CSS */ 

.info-icon{
   width: 16px;
   height: 16px;
   padding: 0 10px;
   background-repeat: no-repeat;
   background-image: url(data:image/png;base64,-data-URI-code-) /* White Icon */;
}

 /* PRINT CSS */ 

.info-icon{
   width: 16px;
   height: 16px;
   padding: 0 10px;
   background-repeat: no-repeat;
   background-image: url(data:image/png;base64,-data-URI-code-) /* Black Icon */;
} 
```

***HTML***

```
<p class="textcenter"><span class="info-icon"></span>Photo Info:</p> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T20:11:18.623

除非有人在这里提出更好的解决方案，否则我最终会这样做。类似于 Sheikh Heera 的[Link](http://www.cssnewbie.com/print-friendly-images/)推荐的内容。

**HTML：**

```
<p class="textcenter">
  <img class="info-icon-black" src="data:image/png;base64, -DATA-URI-CODE-" />
  <span class="info-icon"></span>Photo Info:</p> 
```

**CSS：**

```
/* PRINT STYLESHEET
-------------------------
SHOW BLACK INFO ICON  */

.info-icon-black{
    display:inline;
}

/* HIDE WHITE INFO ICON  */

.info-icon { 
    display:none; 
    /* I still hide in the event someone has print background
    images ticked on in print options. */
}

/* SCREEN STYLESHEET
-------------------------
HIDE BLACK INFO ICON  */

.info-icon-black{ 
    display:none;
}

/* SHOW WHITE INFO ICON  */

.info-icon{
  width: 16px;
  height: 16px;
  padding: 0 10px;
  background-repeat: no-repeat;
  background-image: url(data:image/png;base64, -DATA-URI-CODE-;
} 
```

# php - Magento 付款信息未显示在新订单或交易电子邮件中

> ID：11333549
> 
> 赞同：1
> 
> 时间：2012-07-04T17:48:49.487
> 
> 标签：php, magento, payment

这里有一个奇怪的问题，我不确定可能是什么问题。

当我使用 COD/采购订单/银行转账作为付款方式通过后端创建新订单时，此信息不会保存并在付款信息块中可见，因此在交易电子邮件中不可见。

付款信息部分仅显示“使用英镑下单”

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T01:23:32.637

那不是错误，那是 Magento ！

*在下订单之前*，银行电汇信息不会显示在“付款方式”选择中，并且在订单确认打印文档中。太烂了，就是这样：）

（这里是 Magento 1.7.0.0）

# php - 为什么找不到 mssql_connect()

> ID：11333553
> 
> 赞同：0
> 
> 时间：2012-07-04T17:49:05.730
> 
> 标签：php, sql-server, database, eclipse

我已经在我的电脑上安装了 mssql 服务器、php、Apache 服务器和 Eclipse。我正在尝试使用 mssql_connect() 连接到 mssql 数据库。我收到这条消息：

> “致命错误：找不到函数 mssql_connect()”

我试图将 php_mssql.dll 放在 apache/bin 中，但似乎没有任何效果。我已经配置了我的 php.ini 文件。

1.  这个文件应该放在哪里？
2.  为什么会发生致命错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T17:56:05.887

在 php.ini 文件中，查找该`extension_dir`行。

确保 php_mssql.dll 文件位于该目录中，并确保添加以下行：

```
extension=php_mssql.dll 
```

除此之外，请阅读此页面上的第三篇文章：

[http://www.php.net/manual/en/mssql.installation.php](http://www.php.net/manual/en/mssql.installation.php)

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T17:52:27.103

你必须把它放到你的 php 扩展文件夹中（在你的 php.ini 中查看 extension_dir）。并添加`extension=php_mssql.dll`到你的 php.ini

# javascript - 骨干collection.get（）不工作

> ID：11333560
> 
> 赞同：2
> 
> 时间：2012-07-04T17:49:47.270
> 
> 标签：javascript, backbone.js

我正在尝试过滤路由器中的列表集合，以在新视图中显示特定列表。

我的列表集合已被提取并保存在 MyApp.collections.lists 中，但是当我尝试执行以下操作时，它返回未定义。（id 是我从路由器传入的变量）

```
var list = MyApp.collections.lists.get(id) 
```

我没有得到的是，当我在浏览器控制台中尝试完全相同的代码时，它返回正确的模型没问题。我知道这不是 .fetch() 计时的问题，因为我在尝试获取模型之前和之后记录了集合对象并且它显示得很好。我也知道我也尝试过 .getByCid() 只是为了确保它不是 id 本身的问题并得到相同的结果。

有什么想法可能导致这种情况吗？

# video-streaming - 通过 Java 进行视频捕获（实时视频流）

> ID：11333564
> 
> 赞同：5
> 
> 时间：2012-07-04T17:50:16.957
> 
> 标签：video-streaming, video-capture, live-streaming

我想编写一个程序，可以使用Java 语言通过我的网络摄像头捕获视频，即实时视频流。我找到了一些关于这个主题的线程，但问题是如何让我的程序独立于操作系统，比如如何在 32 位和 64 位操作系统上捕获视频。

请帮我解决这个问题，我做这份工作的时间很短。另外，如果有人对此主题有一些了解，请在此处发布其链接..谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-06T06:03:05.250

1.  由于 j2se 中没有可用于从网络摄像头捕获视频的类，因此您需要 JMF 或 JavaCV 等外部库来执行相同操作。

2.  要安装 JavaCV，您将在以下链接中找到说明：

    一种。ganeshtiwaridotcomdotnp.blogspot.in[链接](http://ganeshtiwaridotcomdotnp.blogspot.in/2011/12/opencv-javacv-eclipse-project.html)

    湾。code.google.com[链接](http://code.google.com/p/javacv/)

3.  从摄像头实时捕捉视频的代码：

    ```
    import com.googlecode.javacv.CanvasFrame;
    import com.googlecode.javacv.FrameGrabber;
    import com.googlecode.javacv.VideoInputFrameGrabber;
    import com.googlecode.javacv.cpp.opencv_core.IplImage;
    import static com.googlecode.javacv.cpp.opencv_core.cvFlip;

    class GrabberShow implements Runnable 
    {    
       IplImage image;
       CanvasFrame canvas = new CanvasFrame("Web Cam");
       public GrabberShow() {
           canvas.setDefaultCloseOperation(javax.swing.JFrame.EXIT_ON_CLOSE);
       }
       @Override
       public void run() {
           FrameGrabber grabber = new VideoInputFrameGrabber(0); // 1 for next camera
           try {
               grabber.start();
               IplImage img;
               while (true) {
                   img = grabber.grab();
                   if (img != null) {
                       cvFlip(img, img, 1);// l-r = 90_degrees_steps_anti_clockwise
                       canvas.showImage(img);
                   }
               } 
           } catch (Exception e) {}
       }
    }

    public class Main 
    {
           public static void main(String[] args) 
           {
               GrabberShow gs = new GrabberShow();
               Thread th = new Thread(gs);
               th.start();
           }
    } 
    ```

希望这可以帮助。

# sql-server - 了解 SQL Server 中的 sys.dm_exec_sessions

> ID：11333565
> 
> 赞同：3
> 
> 时间：2012-07-04T17:50:16.950
> 
> 标签：sql-server, sql-server-2008

几个问题`dm_exec_sessions`。当我运行查询

```
select * from sys.dm_exec_sessions 
```

它向我展示了其他列 a`status`和 a`transaction_isolation_level`列。

我的理解是`sys.dm_exec_sessions`每个经过身份验证的会话返回一行。据我了解，可以使用此会话运行多个查询/事务。

1.  `transaction_isolation_level`每个会话返回的含义是什么？它是使用该连接在数据库上运行的最后一个事务的隔离级别吗？

2.  有一些（几个）会话处于睡眠状态。这意味着什么？我们应该担心这个吗？这些来自 Web 服务器的事务是否回滚失败？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T19:52:15.910

> 据我了解，可以使用此会话运行多个查询/事务。

这是不正确的。您将始终能够执行最多一个查询，并且在一个会话中最多有一个用户活动事务，永远不会超过任何一个。

一个*连接*可以有多个*会话*，但这是另一回事。[sys.dm_exec_connections](http://msdn.microsoft.com/en-us/library/ms181509.aspx)

如果您发现 SERIALIZABLE 会话并且想知道为什么，请记住[使用 new TransactionScope() 被认为是有害的](https://docs.microsoft.com/en-us/archive/blogs/dbrowne/using-new-transactionscope-considered-harmful)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T18:23:41.273

会话本身有一个 transaction_isolation_level。并且在该会话中运行的批处理/请求将使用该 transaction_isolation_level ，除非它明确更改它。

Sleeping 状态仅表示会话处于空闲状态并且当前未运行批处理/请求。（IE，它正在等待它的客户端连接向它发送要执行的命令）。通常没有什么可担心的。

sys.dm_exec_sessions 的官方文档在这里：http: [//msdn.microsoft.com/en-us/library/ms176013.aspx](http://msdn.microsoft.com/en-us/library/ms176013.aspx)

# sql - SQL 触发器 - 无法调用函数

> ID：11333569
> 
> 赞同：0
> 
> 时间：2012-07-04T17:50:58.953
> 
> 标签：sql, oracle, function, triggers

获取 ORA-04079：此触发器的无效触发器规范错误，可以找出原因吗？表格 - TESTCOMM_FINDCOMM - 2 个数字，价格和通讯

```
create or replace trigger TESTCOMM_FINDCOMM
AFTER
insert or update on "TESTCOMM"
for each row
referencing new as new and old as old
begin
  :NEW.Commission:= :NEW.Price*get_Comm(:NEW.Price);      
end; 
```

函数 get_Comm

```
create or replace function get_Comm
(i_price in NUMBER)
return NUMBER
as
 o_COMMISSION_percent PRICECOMMISSION.COMMISSION%type;
begin
  select COMMISSION
into o_COMMISSION_percent
  from (
      select COMMISSION,
             rank () over (order by Price desc) rnk
        from PRICECOMMISSION
        where PRICE <= i_price
  ) where rnk = 1;      

  return o_COMMISSION_percent;

end;​ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T19:49:41.700

您的触发器是 AFTER insert/update 触发器 - 您不能在插入/更新后修改 :NEW 值。

更多关于 AFTER 触发器的信息可以在[这里](http://www.techonthenet.com/oracle/triggers/after_insert.php)找到。您应该查看的是[BEFORE](http://www.techonthenet.com/oracle/triggers/before_insert.php)触发器。

# jquery-ui - Jquery UI Resizable with helper在firefox中添加定位

> ID：11333570
> 
> 赞同：1
> 
> 时间：2012-07-04T17:51:00.977
> 
> 标签：jquery-ui, firefox

我正在使用 jquery UI 垂直调整 div 的大小（IE 使用 n 句柄）。我正在使用帮助器，因此它仅在用户停止拖动后才调整大小。调整大小完成后，我调用一个函数来设置周围元素的尺寸，以便它们都适合容器。

这在 chrome 和 IE 中都有效，但在 Firefox 中添加了 top 的 css 属性，这会将 div 吹出容器。

我已经尝试在事后删除最高值，这很有效，但这是一种黑客行为，也会导致 div “跳跃”。

这是一个错误吗？是否有使用 jquery css html 等的解决方法？

要了解我的意思，请检查[此](http://jsfiddle.net/lchamberlain/bqGwW/1/)小提琴并调整元素的大小，如果您在 Firefox 中检查它，则会有一个顶级 css 属性，但在 chrome 中没有。

谢谢，卢克

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T18:12:53.023

在我看来，这是一个错误。

解决方法：如果您在IE`top: 0;`的 css 规则中添加 a `#resizable`，则 chrome 和 firefox 具有相同的行为。另请参阅[更新的示例](http://jsfiddle.net/bqGwW/2/)。

=== 更新 ===

这是一个Firefox的错误。我从 jQuery UI *resizable*方法代码一直走到 jQuery (main) 代码的*css*方法来寻找答案。在我的搜索结束时，我发现firefox为非/静态定位元素返回css`top`值`auto`，但`0px`如果设置了相对位置则返回；在这两种情况下`top`都没有定义（它们可以设置为`auto`没有区别 - 这是默认值）。

另请参阅[此示例](http://jsfiddle.net/jHnSu/2/)。

在*resizable*方法中，这个结果会有所不同（jQuery UI 通过添加一个类来设置 DOM 元素的相对位置）。如果该错误（我已向 mozilla 报告）将得到修复，则您的示例在 Firefox 中的行为应该与 chrome 中的相同。

如果有新的东西我会在这里报告...

=== 更新 ===

现在我有一个解决方法给你：

对于您描述的特殊情况，将可调整大小元素的 css 位置手动设置为`static`.

添加到您的样式表：

```
#resizable { position: static; } 
```

另请参阅[您更新的示例](http://jsfiddle.net/bqGwW/4/)。

# c++ - Bizzare std::distance 输出

> ID：11333572
> 
> 赞同：0
> 
> 时间：2012-07-04T17:51:02.177
> 
> 标签：c++, qt, stl, iterator

我直接从我正在处理的一些代码中提取了这个小片段：

```
KeyIter it = timeline_.lowerBound( frame );
if ( timeline_.isKeyAtFrame( frame ) ) {
    ++it;
}

KeyIter it1 = it - 1;
cout << "dist1: " << std::distance( timeline_.begin(), it1 ) << endl;
while ( ignore.contains( it1.key() ) ) {
    cout << "dist2: " << std::distance( timeline_.begin(), it1 - 1 ) << endl;
    if ( std::distance( timeline_.begin(), --it1 ) < 0 ) {
        break;
    }
}
cout << "dist3: " << std::distance( timeline_.begin(), it1 ) << endl; 
```

它给出了这个输出：

```
dist1: 0
dist2: 2
dist3: 2 
```

`ignore`是一个`QSet<int>`并且`it1`是一个迭代器`timeline_`（它是一个键为 的映射类型`int`）。如您所见`it1`，从头开始（这是正确的），然后控制进入 while 循环，在该循环中迭代器向后移动一个；但是 std::distance 不是 -1，而是 2！中间发生的所有事情都是密钥的副本用于检查是否`QSet`包含相同的`int`.

使用调试器，我可以确认`timeline_`两个输出之间没有变化`dist#`（无论如何，此时代码中只有一个线程正在运行）。

谁能看到为什么`std::distance`要给出这个输出？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T18:09:22.973

I'm not sure about Qt's behavior on this, but in standard library containers, aquiring an iterator outside the range `[container.begin(),container.end()]` is undefined behavior. I would assume it's the same in Qt, though I'm not sure. However, even if it's not, the behavior of `std::distance` on non-random access iterators is to count the number of **increments** required to get from the first iterator to the last, so this:

```
std::distance(x,y) 
```

where `y` precedes `x`, is undefined behavior.

# ruby - 基于匹配回调的正则表达式

> ID：11333574
> 
> 赞同：1
> 
> 时间：2012-07-04T17:51:11.703
> 
> 标签：ruby, regex, callback, finite-automata

我有一个函数，它接受一个输入字符串，然后通过几个正则表达式运行该字符串，直到找到匹配项。找到匹配项后，我会返回一个输出，该输出是原始字符串和匹配项的函数。所以在红宝石中：

```
str = "my very long original string ... millions of characters"
case str
  when regex1
    do_something1(str,$1)
  when regex2
    do_something2(str,$1)
  when regex3
    do_something3(str,$1)
  ...
  when regex100000
    do_something100000(str,$1)
  else
    do_something_else(str)
end 
```

现在，Ruby 是否真的优化了这个 switch 循环，以便 str 只被遍历一次？假设它不是，那么这个功能可以通过一个嵌入回调的大而长的正则表达式更有效地执行。像这样的东西：

```
/(?<callback:do_something1>regex1)|
(?<callback:do_something2>regex2)|
(?<callback:do_something3>regex3)|
   ...
(?<callback:do_something100000>regex100000)/ 
```

有没有什么技术可以做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-04T20:25:56.277

如果是 Ruby 1.9，并且如果您在正则表达式中使用命名组，那么您可以将所有正则表达式组合成一个，但需要一点技巧。这是完成繁重工作的课程：

```
class BigPatternMatcher

  def initialize(patterns_and_functions, no_match_function)
    @regex = make_big_regex(patterns_and_functions)
    @no_match_function = no_match_function
  end

  def match(s, context)
    match = @regex.match(s)
    context.send(function_name(match), match)
  end

  private

  FUNC_GROUP_PREFIX = "func_"
  FUNC_GROUP_REGEX = /^#{FUNC_GROUP_PREFIX}(.*)$/

  def function_name(match)
    if match
      match.names.grep(FUNC_GROUP_REGEX).find do |name|
        match[name]
      end[FUNC_GROUP_REGEX, 1]
    else
      @no_match_function
    end
  end

  def make_big_regex(patterns_and_functions)
    patterns = patterns_and_functions.map do |pattern, function|
      /(?<#{FUNC_GROUP_PREFIX}#{function}>#{pattern.source})/
    end
    Regexp.union(patterns)
  end

end 
```

我们将回到它是如何工作的。要使用它，您需要一个正则表达式列表以及应该为每个表达式调用的函数的名称。确保仅使用命名组：

```
PATTERNS_AND_FUNCTIONS = [
  [/ABC(?<value>\d+)/, :foo],
  [/DEF(?<value>\d+)/, :bar],
] 
```

还有这些函数，包括在没有匹配项时调用的函数：

```
def foo(match)
  p ["foo", match[:value]]
end

def bar(match)
  p ["bar", match[:value]]
end

def default(match)
  p ["default"]
end 
```

最后，这是它的使用方式。 `BigPatternMatcher#match`接受要匹配的字符串，以及调用函数的对象：

```
matcher = BigPatternMatcher.new(PATTERNS_AND_FUNCTIONS, :default)
matcher.match('blah ABC1 blah', self)    # => ["foo", "1"
matcher.match('blah DEF2 blah', self)    # => ["bar", "2"]
matcher.match('blah blah', self)         # => ["default"] 
```

请参阅折叠下方，了解使其起作用的技巧。

* * *

`BigPatternMatcher#make_big_regex`将所有正则表达式组合为一个，每个都用括号括起来并用 分隔`|`，例如

```
/(ABC(?<value>\\d+))|(DEF(?<value>\\d+))/ 
```

但这还不够。我们需要某种方式，当其中一个子表达式匹配时，识别哪个匹配，从而调用哪个函数。为此，我们将为每个子表达式创建自己的命名组，其名称基于应调用的函数：

```
/(?<func_foo>ABC(?<value>\\d+))|(?<func_bar>DEF(?<value>\\d+))/ 
```

现在，让我们看看我们如何从匹配到调用函数。给定字符串：

```
"blah ABC1 blah" 
```

那么匹配组是：

```
#<MatchData "ABC1" func_foo:"ABC1" value:"1" func_bar:nil value:nil> 
```

要确定调用哪个函数，我们只需要找到名称以“func_”开头且具有非零值的匹配项。“func_”之后的组名部分命名要调用的函数。

* * *

用你的问题中的简单技术来衡量它的性能对读者来说是一个练习。

# asp.net-mvc - 为单个控制器重复调用动作过滤器构造函数

> ID：11333575
> 
> 赞同：0
> 
> 时间：2012-07-04T17:51:19.797
> 
> 标签：asp.net-mvc, asp.net-mvc-3, ninject

我在我的一些控制器上使用了一个动作过滤器，与它的作用无关，它使用 Ninject 进行依赖注入。我在控制器构造函数和动作过滤器构造函数中设置了断点，我发现对于单个请求，控制器的构造函数被调用一次，动作过滤器被调用 8 次。[以下代码产生的效果与此答案](https://stackoverflow.com/a/6194159)中给出的效果几乎相同。

属性：

```
public class NotificationAttribute : Attribute { }

public class NotificationActionFilter : IActionFilter
{
    private IUnitOfWork _unitOfWork;

    public NotificationActionFilter(IUnitOfWork uow)
    {
        _unitOfWork = uow;
    }

    public void OnActionExecuted(ActionExecutedContext filterContext)
    {
        // do stuff
    }

    public void OnActionExecuting(ActionExecutingContext filterContext)
    {

    }
} 
```

捆绑：

```
kernel.BindFilter<NotificationActionFilter>(FilterScope.Controller, 0).WhenControllerHas<NotificationAttribute>(); 
```

控制器：

```
[NotificationAttribute]
public class TestController : Controller
{
    public ActionResult Index()
    {
        return View();
    }
} 
```

它总是正好是 8，但我不知道为什么。我真的一直在努力解决这个问题，只是希望有人可能曾经处理过类似的事情。

# ios5 - 如何在 iOS 上播放列表中的歌曲（仅限歌曲）？

> ID：11333577
> 
> 赞同：3
> 
> 时间：2012-07-04T17:51:23.987
> 
> 标签：ios5, mpmediaitem, mpmediaquery, mpmediaitemcollection

我正在尝试播放 iPod 播放列表中的歌曲。至于播放列表也可能有视频，我只想播放其中的歌曲。

```
 MPMusicPlayerController *mp = [MPMusicPlayerController applicationMusicPlayer];

    MPMediaQuery *query = [MPMediaQuery songsQuery];

    query.groupingType = MPMediaGroupingPlaylist;

    NSArray *playlists = [query collections];

    BOOL found = NO;

    for(MPMediaPlaylist *playlist in playlists)
    {
        NSString *name = [playlist valueForProperty:MPMediaPlaylistPropertyName];
        if([name caseInsensitiveCompare:@"MyPlaylist"] == NSOrderedSame && [playlist count] > 0)
        {
            MPMediaItemCollection *collection = [MPMediaItemCollection collectionWithItems:playlist.items];
            [mp setQueueWithItemCollection:collection];
            found = YES;
            NSLog(@"items count %d", [playlist count]);
            for (MPMediaItem *item in [collection items]){
                NSLog(@"%@", [item valueForKey:MPMediaItemPropertyMediaType]);
            }
            break;
        }
    } 
```

在我加载包含 1 首歌曲和 2 个视频的播放列表后，输出为：

**项目计数 3**
**256**
**256**
**1**

如果查询旨在检索歌曲，并且媒体项目的媒体类型为 MPMediaTypeMovie （256 或 1 << 8），我不明白为什么我也会收到视频。

有什么建议吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-06T18:39:27.440

一种可能的解决方法是使用谓词创建自定义查询。这可以通过使用`MPMediaQuery` `items`数组而不是`collections`数组来实现。该`collections`数组是`MPMediaItemCollection`s 的数组。该`items`数组是`MPMediaItem`s 的数组，因此您可以通过 过滤查询`MPMediaItemPropertyMediaType`。`MPMediaItemPropertyMediaType`仅适用于 a`MPMediaItem`而不是 a `MPMediaItemCollection`。

根据播放列表标题和媒体类型，使用一组谓词初始化查询。这将选择您的播放列表并从查询中过滤掉所有视频：

```
NSString *playlistName = @"MyPlaylist";
MPMediaPropertyPredicate *playlistPredicate = [MPMediaPropertyPredicate predicateWithValue:playlistName
                                                                               forProperty:MPMediaPlaylistPropertyName];

NSNumber *mediaTypeNumber = [NSNumber numberWithInteger:MPMediaTypeMusic]; // == 1
MPMediaPropertyPredicate *mediaTypePredicate = [MPMediaPropertyPredicate predicateWithValue:mediaTypeNumber
                                                                                forProperty:MPMediaItemPropertyMediaType];

NSSet *predicateSet = [NSSet setWithObjects:playlistPredicate, mediaTypePredicate, nil];
MPMediaQuery *mediaTypeQuery = [[MPMediaQuery alloc] initWithFilterPredicates:predicateSet];
[mediaTypeQuery setGroupingType:MPMediaGroupingPlaylist]; 
```

`MPMediaPropertyPredicate`如果您从数组中返回数组，这些s 将不会过滤`MPMediaQuery` `collections`。您应该在日志语句中看到 1 以外的媒体项目类型：

```
NSArray *playlistCollections = [mediaTypeQuery collections];

[playlistCollections enumerateObjectsUsingBlock:^(MPMediaPlaylist *playlist, NSUInteger idx, BOOL *stop) {
    NSLog (@"Playlist title: %@", [playlist valueForProperty:MPMediaPlaylistPropertyName]);
    NSArray *songs = [playlist items];
    [songs enumerateObjectsUsingBlock:^(MPMediaItem *song, NSUInteger idx, BOOL *stop) {
        NSString *songTitle = [song valueForProperty:MPMediaItemPropertyTitle];
        NSInteger mediaValue = [[song valueForProperty:MPMediaItemPropertyMediaType] integerValue];
        if (mediaValue != 1) 
            NSLog(@"title: %@ - media type value: %d", songTitle, mediaValue);
    }]; // Should return other media types here.
}]; 
```

如果您从以下`MPMediaPropertyPredicate`位置返回数组，则 s 将过滤`MPMediaQuery` `items`：

```
NSArray *playlistItems = [mediaTypeQuery items];

[playlistItems enumerateObjectsUsingBlock:^(MPMediaItem *song, NSUInteger idx, BOOL *stop) {
    NSString *songTitle = [song valueForProperty: MPMediaItemPropertyTitle];
    NSInteger mediaValue = [[song valueForProperty:MPMediaItemPropertyMediaType] integerValue];
    if (mediaValue != 1) 
        NSLog(@"title: %@ - media type value: %d", songTitle, mediaValue);
}]; // Should return nothing here. 
```

您还可以通过仅使用以下上的 mediaTypePredicate 将媒体类型过滤器应用于整个库`songsQuery`：

```
MPMediaQuery *query = [MPMediaQuery songsQuery];
[query setGroupingType:MPMediaGroupingPlaylist];
[mediaTypeQuery addFilterPredicate:mediaTypePredicate];
NSArray *playlists = [query items]; 
```

# android - 在 Android 库中创建 SQLite DB

> ID：11333580
> 
> 赞同：2
> 
> 时间：2012-07-04T17:52:00.883
> 
> 标签：android, sqlite

我已经看到 onCreate 和 onOpen 方法与 Android 中的 SQLite 数据库管理之间有很多联系。

我是一名 iOS 开发人员，我正在尝试“翻译”（可以这么说）我的可可库，以便可以在 Android 上使用它。我需要在运行时创建一个 SQLite 数据库。我没有活动 - 因为这是我正在创建的图书馆。似乎我无法在没有活动的情况下创建数据库，这是正确的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T17:56:02.063

要创建sqlite db，您基本上不需要库中的活动。它需要一个**上下文**！！，您可以在库/类中有一个方法，它基本上在输入/参数中获取一个上下文并创建数据库。

此上下文可以从应用程序活动或服务或接收器传递。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T17:57:47.757

我不明白为什么没有活动就不能打开数据库。您需要扩展 SQLiteOpenHelper。

```
public class MyDatabase {
private final DatabaseHelper databaseHelper;
private SQLiteDatabase db;
private static final String DATABASE_NAME = "com.my.db";
private static final int DATABASE_VERSION = 1;

public MyDatabase(Context context) {
    databaseHelper = new DatabaseHelper(context);
}

private static class DatabaseHelper extends SQLiteOpenHelper {

    DatabaseHelper(Context context) {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);
    }

    @Override
    public void onCreate(SQLiteDatabase db) {
                //use db.execSQL to create the database
    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
               // use db.execSQL to update (modify) the database
    }
}

public SQLiteDatabase open() throws SQLException {
    db = databaseHelper.getWritableDatabase();
    return db;
} 
```

}

# monitoring - SNMP 配置

> ID：11333581
> 
> 赞同：1
> 
> 时间：2012-07-04T17:52:14.630
> 
> 标签：monitoring, snmp, nfs

因此，我在节点 A 上安装并配置了 SNMP。还可以说节点 A 通过 NFS 从存储节点 B 挂载。最后我有监控节点 C。当节点 C 通过 snmp 从节点 A 请求信息时，当什么都没有时节点会很好地遵守是错的。

我一直遇到这个问题。假设存储节点 B 发生故障。如果节点 C 通过 SNMP 从节点 A 请求信息，则 snmp 恶魔会在节点 A 上冻结，因为它无法到达安装点。

从 SNMP 的目的来看，这种行为是非常反直觉的。SNMP 用于监控系统统计信息。如果某事失败了，我想知道某事失败了。在这种情况下，从节点 C 的角度来看，似乎有人关闭了节点 A（这显然不是发生的事情）。

我查找了配置设置，以便 SNMP 跳过它无法读取的 MIBS，但什么也没找到。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T18:03:05.720

事实证明，nfs 超时加上 snmp 恶魔是一个老错误。修复它的方法是使用 snmpd.conf 中的以下选项基本上跳过所有 NFS 挂载点

`skipNFSInHostResources yes`

# java - JavaFX 2.1 更改 ScrollPane 滚动条大小

> ID：11333583
> 
> 赞同：4
> 
> 时间：2012-07-04T17:52:20.290
> 
> 标签：java, javafx

我试图弄清楚如何更改滚动窗格滚动条的大小以使其在 javafx 2.1 中更宽。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-05T20:29:35.943

ScrollBar 宽度基于 ScrollPane 的字体大小。

将 ScrollPane 的字体大小设置为较大，并且（如果需要）将 ScrollPane 的内容节点的字体大小发送回正常值。

```
ScrollPane scrollPane = new ScrollPane();
scrollPane.setContent(content);
scrollPane.setStyle("-fx-font-size: 40px;");  // set the font size to something big.
content.setStyle("-fx-font-size: 11px;");     // reset the region's font size to the default. 
```

这是一个完整的可执行示例，基于我[对同一主题的上一个论坛问题的](https://forums.oracle.com/forums/thread.jspa?messageID=10409262)回答。

```
import javafx.application.Application;
import javafx.collections.*;
import javafx.scene.*;
import javafx.stage.Stage;
import javafx.scene.chart.*;
import javafx.scene.control.ScrollPane;
import javafx.scene.layout.Region;

public class BigScrollBars extends Application {
  @Override public void start(Stage stage) {
    // create a chart.
    ObservableList<PieChart.Data> pieChartData =
      FXCollections.observableArrayList(
        new PieChart.Data("Grapefruit", 13),
        new PieChart.Data("Oranges", 25),
        new PieChart.Data("Plums", 10),
        new PieChart.Data("Pears", 22),
        new PieChart.Data("Apples", 30)
      );
    final PieChart chart = new PieChart(pieChartData);
    chart.setTitle("Imported Fruits");
    chart.setMinSize(Region.USE_PREF_SIZE, Region.USE_PREF_SIZE);
    chart.setPrefSize(800,600);

    // create a scrollpane.
    ScrollPane scrollPane = new ScrollPane();
    scrollPane.setContent(chart);
    scrollPane.setStyle("-fx-font-size: 40px;");  // set the font size to something big.
    chart.setStyle("-fx-font-size: 11px;");       // reset the region's font size to the default.

    // show the scene.
    stage.setScene(new Scene(scrollPane, 400, 300));
    stage.show();
  }

  public static void main(String[] args) { launch(args); }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-11-18T16:40:03.520

以下解决方案对我有用：

```
 @FXML
    private ScrollPane myScrollPane;

    // Where you need in your code do the following:
    Set<Node> nodes = myScrollPane.lookupAll(".scroll-bar");
    for (final Node node : nodes) {
        if (node instanceof ScrollBar) {
            ScrollBar sb = (ScrollBar) node;
            if (sb.getOrientation() == Orientation.VERTICAL) { // HORIZONTAL is another option.
                sb.setPrefWidth(40); // You can define your preferred width here.
            }
        }
    } 
```

# html - CSS 格式 - 需要指导

> ID：11333588
> 
> 赞同：0
> 
> 时间：2012-07-04T17:52:48.640
> 
> 标签：html, css

我需要一点关于我网站上的 CSS 格式的帮助。请参阅提供的屏幕截图，它与[http://www.zerogravpro.com/](http://www.zerogravpro.com/)相关。

[css 问题 http://zerogravpro.com/temp/zgp_formatting.jpg](http://zerogravpro.com/temp/zgp_formatting.jpg)

问题#1：我在推荐部分的橙色背景框比我想要的要低很多。我如何强制它向上移动，直接在“推荐”一词下方？

问题#2：看到漂亮的“更多”按钮，里面有绿色的球和箭头吗？当我尝试在我的推荐框中使用相同的样式时，它显示为只是一个无聊的链接。我希望它看起来与按钮相同。我猜该样式只有在它具有正确的层次结构时才会被调用，但是我怎样才能在不弄乱任何其他样式的情况下解决这个问题呢？

我提供了指向我网站的链接，因此您可以在 Firebug 中查看它并查看确切的样式等。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T18:07:34.040

Testimonials 下面的 Box 太低了，因为这条线下面有两个**<br>-Tags**：

```
<p class="dotline"></p> 
```

删除它们，它会适合。

对于更多按钮，您应该将**更多**类添加到此**<p>-Tag**（未经测试）：

```
<div id="testimonial6" style="">
    <p></p>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T18:10:44.803

描述类似按钮的 more 元素的样式应用于 class="more" 的段落。但是，该段落还包含比按钮更多的规则，因此您应该尝试提取有关按钮的 CSS 以使其可重用。

当谈到下层链接的定位时，如果你想把它放在靠近标题的地方，你真的需要把它移近 DOM 中的标题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T18:23:36.643

在推荐框的正上方有一个空的 p 元素，其类为“更多”。取下它，证明框将被拉起。给它一个适当的边距顶部，它会看起来不错。

至于按钮，这是我的尝试-> [http://jsfiddle.net/joplomacedo/c3vqh/](http://jsfiddle.net/joplomacedo/c3vqh/)

# php - 如果 $_POST 为空 多重功能

> ID：11333589
> 
> 赞同：-1
> 
> 时间：2012-07-04T17:52:50.150
> 
> 标签：php, post, if-statement

我有以下 $_POST 函数来检查“开始”、“中间”和“结束”的字段是否为空。

```
if(!empty($_POST['start'])) {
   $description = "a sentence".$_POST['start']." with something in the START.";
}

if(!empty($_POST['middle'])) {
   $description = "a sentence".$_POST['middle']." with something in the MIDDLE.";
}

if(!empty($_POST['end'])) {
   $description .= "a sentence".$_POST['end']." with something in the END.";
} 
```

我想检查一个函数中的值，换句话说，我想同时检查多个值。我见过很少的方法，但不确定哪个是正确的，使用**逗号**或**&&**或**||** ，像下面的东西......

```
if(!empty($_POST['start']) , (!empty($_POST['middle']) , (!empty($_POST['end'])) 
```

或者

```
if(!empty($_POST['start']) && (!empty($_POST['middle']) && (!empty($_POST['end'])) 
```

或者

```
if(!empty($_POST['start']) || (!empty($_POST['middle']) || (!empty($_POST['end'])) 
```

谁能告诉我这种编队的正确代码？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T18:09:16.100

这是一些基本的..我把它作为评论（因为我不确定这是否是你要求的东西）但我想一个答案会是适当的，有一些细节。

*   AND 运算符

&& 将检查每个条件，如果所有条件都为真，它将返回真...

像这样

```
if(FALSE && TRUE) 
```

它总是返回 False 并且 if 不会执行，因为其中一个条件为 false

*   OR 运算符

该|| 将检查第一个条件是否为真，否则将检查第二个条件如果全部为假（甚至没有一个为真），它将返回假。

再次按照前面的例子

```
if(TRUE || False || False) 
```

现在编译器检查第一个条件是否为真，它将忽略接下来的两个条件并返回真。

`if(FALSE || FALSE || FALSE)` - 这将返回假，因为所有都是假的

*   逗号运算符

如果你**，**操作员然后将评估右边的最后一个条件，如果它是真的，那么它将返回真否则假

例子

```
if(True,True,True,False)  -  it will return false

if(FALSE, TRUE, FALSE, TRUE) - it will return true 
```

所以根据你的逻辑选择运营商。

用这个 ：

```
if((!empty($_POST['start'])) && (!empty($_POST['start'])) && (!empty($_POST['start']))); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T17:57:14.200

您正在寻找类似的东西：

```
// Establish valid post key values
$valid_post_variables = array_flip( ['start', 'middle', 'end'] );

// Fetch post data
$post = $_POST;

// $result will contain the values of post where the keys matched valid
$result = array_intersect_key( $post, $valid_post_variables );

// if the resulting array contains our 3 options, its go time
if ( count( $result ) == 3 ) {
     //start middle and end where all passed via POST
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T18:20:14.687

```
function insertPost($before, $offset, $after)
{
    if(!empty($_POST[$offset])) {
         return $before . $_POST[$offset] . $after;
    }
    return '';
}

$description = insertPost('a sentence', 'start', ' with something in the START.'); 
```

# php - 在（纯）PHP / MySQL 中查找类似图像

> ID：11333591
> 
> 赞同：22
> 
> 时间：2012-07-04T17:53:04.070
> 
> 标签：php, mysql, image, similarity

我的用户正在将图像上传到我的网站，我想首先向他们提供已经上传的图像。我的想法是 1\. 为每个现有图像创建某种图像“散列” 2\. 创建新上传图像的散列并将其与数据库中的其他图像进行比较

我找到了一些有趣的解决方案，例如[http://www.pureftpd.org/project/libpuzzle](http://www.pureftpd.org/project/libpuzzle)或[http://phash.org/](http://phash.org/)等，但他们遇到了一个或多个问题

1.  他们需要一些非标准的 PHP 扩展（或者根本不在 PHP 中）——这对我来说没问题，但我想将它创建为我流行的 CMS 的插件，它在许多托管环境中使用，不受我的控制。
2.  他们正在比较两张图片，但我需要一对多（例如数千张）进行比较，并且一张一张地进行比较会非常无效/缓慢......

我可以只找到非常相似的图像（例如不同的大小、重新保存的 jpg 或不同的 jpg 压缩系数）。

我得到的唯一想法是将图像大小调整为例如 5px*5px* 256 色，创建它的字符串表示，然后找到相同的。但我猜想即使只有两张大小不同的相同图像，它也可能会在颜色上产生微小的差异，所以只找到 100% 相同的图像是没有用的。

所以我需要一些好的图像字符串表示格式，而不是可以与一些 SQL 函数一起使用来找到类似的，或者其他一些好的方法。例如 phash 创建感知散列，所以当两个数字接近时，图像也应该接近，所以我只需要找到最近的距离。但它又是外部库。

有什么简单的方法吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-07-05T01:17:51.337

我以前也遇到过**同样的**问题。

随意复制我所做的，希望它能帮助您/解决您的问题。

* * *

## 我是如何解决的

我的第一个失败的想法，类似于你可能在想的，是我最终为每张图片制作了字符串（无论大小）。但是我很快就发现这可以超快地填充您的数据库，并且效果不佳。

下一个选项（有效）是一个较小的图像（就像你的`5px`想法），我就是这样做的，但是使用`10px`*`10px`图像。我为每个图像创建“哈希”的方式就是`imagecolorat()`函数。

[请参阅此处的 php.net。](http://php.net/manual/en/function.imagecolorat.php)

收到`rgb`图像的颜色时，我将它们四舍五入到最接近的`50`，这样颜色就不那么具体了。该数字 ( ) 是您想要更改的数字，**具体**`50`取决于您希望搜索的具体程度。

 ****例如：**

```
// Pixel RGB
rgb(105, 126, 225) // Original
rgb(100, 150, 250) // After rounding numbers to nearest 50 
```

在对每个像素执行此操作后（`10px`*`10px`将`rgb()`返回 100 ），然后我将它们转换为数组，并将它们作为 and 存储在数据库`base64_encode()`中`serialize()`。

在搜索相似的图像时，我对他们想要上传的图像执行了完全相同的过程，然后从数据库中提取图像“哈希”以比较它们，并查看匹配的圆角`rgb`'s。

* * *

## 提示

*   四舍五入的**越大**，您`50`的搜索**就越不具体**（反之亦然）。`rgb`

***   如果您希望您的**SQL**更具体，最好将有关图像的**额外/特定**信息存储在数据库中，以便您可以限制在数据库中获得的搜索。**例如**。如果纵横比为`4:3`，则仅从数据库中拉取图像`4:3`。（ETC）

    *   要完美地获得这个`5px`*可能很困难`5px`，因此建议[使用 phpthumb](http://phpthumb.sourceforge.net/)。我使用它的语法：** 

 **> ```
> phpthumb.php?src=IMAGE_NAME_HERE.png&w=10&h=10&zc=1
> // &w=  width of your image
> // &h=  height of your image
> // &zc= zoom control. 0:Keep aspect ratio, 1:Change to suit your width+height 
> ```

祝朋友好运，希望能帮到你。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-06T19:57:30.330

对于一个**简单的 php 实施**检查：[https ://github.com/kennethrapp/phasher](https://github.com/kennethrapp/phasher)

但是 - 我想知道是否有一个用于“比较”的本机 mySql 函数（参见上面的 php 类）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-28T20:10:33.963

以学术的方式把它放下，你正在寻找的是一个相似度函数，它接收两个图像并返回一个指示两个图像有多远/相似的指标。这个指标很容易是一个从 -1 到 1 的十进制数（相距很远到很近）。拥有此功能后，您可以将图像设置为参考并将所有图像与其进行比较。然后找到与一个相似的图像就像找到最接近的相似性因子一样简单，只需在 MySQL 等 RDBMS 中的双字段上进行简单搜索即可。

现在剩下的就是如何定义相似度函数。老实说，这是特定于问题的。这取决于你所说的相似。但是[协方差](http://en.m.wikipedia.org/wiki/Covariance)通常是一个很好的起点，它只需要你的两个图像大小相同，我认为这没什么大不了的。但是，您可以找到许多其他想法来搜索“两个图像之间的相似性度量”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-17T11:01:01.110

我将图像缩小到 8x8，然后将 RGB 转换为 1 字节 HSV，因此结果哈希是 172 字节字符串。

```
HSVHSVHSVHSVHSVHSVHSVHSV... (from 8x8 block, 172 bytes long)
0fff0f3ffff4373f346fff00... 
```

它不是 100% 准确（未找到一些重复项），但效果很好，并且看起来没有误报结果。****

# grails - Grails spring Security 添加身份验证方法

> ID：11333594
> 
> 赞同：1
> 
> 时间：2012-07-04T17:54:00.183
> 
> 标签：grails, spring-security

我有一个应用程序要求用户在 2 种不同的身份验证方法之间进行选择。一种是用户名/密码认证，另一种是用户名/密码/一次性密码。

我已经创建了额外的身份验证提供程序，并且在我的 resources.groovy 中覆盖 daoAuthenticationProvider 提供程序时效果很好，如[http://burtbeckwith.com/blog/?p=1090中所做的那样](http://burtbeckwith.com/blog/?p=1090)

但是现在当我需要我的身份验证方法与标准 daoAuthenticationProvider 并存时，我有点卡住了。

我知道我在 resources.groovy 中注册了自定义身份验证提供程序和自定义过滤器。问题是我如何让我的自定义过滤器拦截一个 url("redirect /my_auth to the filter")？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T20:29:17.873

您可以使用 Config.groovy 中的 filterChain 配置来执行此操作，而不是在 resources.groovy 中注册过滤器。声明 spring security 将在 filterchain.filterNames 中使用的所有过滤器，包括您想要的标准过滤器以及您的自定义过滤器：

```
grails.plugins.springsecurity.filterChain.filterNames = [
   'securityContextPersistenceFilter', 'logoutFilter',
   'authenticationProcessingFilter', 'firstCustomFilter','secondCustomFilter',
   'rememberMeAuthenticationFilter', 'anonymousAuthenticationFilter',
   'exceptionTranslationFilter', 'filterInvocationInterceptor'
] 
```

然后将您的自定义过滤器映射到特定的 URL - 使用排除项的一种方法如下：

```
grails.plugins.springsecurity.filterChain.chainMap = [
    '/customUrlOne/**': 'JOINED_FILTERS,-secondCustomFilter',
    '/customUrlTwo/**': 'JOINED_FILTERS,-firstCustomFilter',
    '/**':  'JOINED_FILTERS,-firstCustomFilter,-secondCustomFilter'
] 
```

**JOOINED_FILTERS**是您在第一个映射中声明的所有过滤器的集合。在“/**”下，除了已排除的自定义过滤器之外的所有过滤器都将处于活动状态。同样，在自定义 URL 下，所有过滤器（减去排除的用于其他 URL 的自定义过滤器）都将处于活动状态。这将确保前往*customUrlOne*的流量将被*firstCustomFilter*拦截，而前往*customUrlTwo*的流量将被*secondCustomFilter*拦截。

# java - Java中的NSDictionary？

> ID：11333598
> 
> 赞同：0
> 
> 时间：2012-07-04T17:54:14.100
> 
> 标签：java, objective-c

> **可能重复：**
> [Objective-C 的 NSDictionary 的 Java 等价物是什么？](https://stackoverflow.com/questions/8128408/what-is-the-java-equivalent-of-objective-cs-nsdictionary)

我见过其他答案，但他们似乎在回应方面互相争吵。

我需要翻译一些 Objective-C 并且我经常使用 NSDictionary。为此，我应该尝试在 Java 中使用什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T17:56:25.977

最好的 Java 等效项是`Map`专门的实现`HashMap`。

# windows-phone-7 - 推送通知服务

> ID：11333600
> 
> 赞同：0
> 
> 时间：2012-07-04T17:54:22.243
> 
> 标签：windows-phone-7

我已经阅读了有关推送通知服务的文章，但我仍然感到困惑。我是 MS 窗口电话应用程序开发的新手。我的应用程序需要从特定组织的 Web 服务中获取整个班级的数据。希望有人可以回答我的问题如下。

1.  在我的应用程序中，电话响铃并且用户在向 Web 请求发送请求以获取数据期间接听电话。如果 Web 服务发回响应会发生什么？
2.  在上述情况下，我需要应用推送通知服务吗？
3.  我使用 DataContractSerializer 检索数据。如果我需要推送通知服务，是否意味着我需要修改 web 服务以返回 xml 而不是整个类？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T05:41:41.473

正在进行的通话不会中断网络请求-响应流程，因此您不必为此烦恼

# android - 如何在 Android 中使用 JSON 为 httpPost 发布数据

> ID：11333602
> 
> 赞同：-2
> 
> 时间：2012-07-04T17:54:28.327
> 
> 标签：android, android-widget

我有一个示例 json 如下：

{ "Passwd":"字符串内容", "Userme":"字符串内容" }

如何构造上面的 JSON 字符串并将其作为 Android 中 HttpPost 的参数。？

谁能帮我解决这个问题。
提前致谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T18:18:22.970

您可以使用`JSONObject`创建一个简单的 json，例如`{ "Passwd":"String content", "Userme":"String content" }`尝试这样的事情。

```
 String json="";
            JSONObject jobj = new JSONObject();
            jobj.put("Userme", "Username");
            jobj.put("Passwd", "PasswordValue");
            json = jobj.toString(); 
```

上面的字符串可以使用 HTTP POST 作为参数之一轻松发送。下面的函数将 url 和 json 作为参数来发出 POST 请求。

```
private void httpPost(String json,String url) throws ClientProtocolException, IOException{
      HttpClient httpClient = new DefaultHttpClient();
      HttpPost httpPost = new HttpPost(url);
      List<NameValuePair> nameValuePair = new ArrayList<NameValuePair>(2);
      nameValuePair.add(new BasicNameValuePair("json", json));
      httpPost.setEntity(new UrlEncodedFormEntity(nameValuePair));
      httpClient.execute(httpPost);
  } 
```

# mongodb - 如何在 Mongod DB 中查询多个数组

> ID：11333604
> 
> 赞同：1
> 
> 时间：2012-07-04T17:54:39.913
> 
> 标签：mongodb

以下是我收藏的一些记录：

```
{ id: 1, arrayA: [1, 2, 3], arrayB: [4, 5, 6]},
{ id: 2, arrayA: [2, 4], arrayB: [1, 5]},
{ id: 3, arrayA: [1, 6], arrayB: [2, 3, 4]},
{ id: 4, arrayA: [2, 6], arrayB: [1, 3, 4]},
{ id: 5, arrayA: [1, 4, 5], arrayB: [2, 3, 6]},
{ id: 6, arrayA: [2, 4, 5], arrayB: [2, 3]}
.... 
```

如何构造一个查询，该查询接受一个数字数组（称为 inputArray）并获取包含在 arrayA 或 arrayB 中的所有由 inputArray 指定的数字的记录。

如果 inputArray 是 [2, 6]，那么查询将是：在 arrayA 或 arrayB 中查找所有具有 2 和 6 的记录。

这应该返回：

id 1：因为 2 在 arrayA 中，而 6 在 arrayB 中

id 3：因为 2 在 arrayB 中，而 6 在 arrayA 中

id 4：因为 2 在 arrayA 中，而 6 在 arrayA 中

id 5：因为 2 在 arrayB 中，而 6 在 arrayB 中

这是我能想到的最好的：

```
db.collection.find({$or: [    
  {arrayA: {$all: [2, 6]}},
  {arrayB: {$all: [2, 6]}},
  {$and: [
    {arrayA: {$in: [2, 6]}},
    {arrayB: {$in: [2, 6]}}    
  ]}
]}) 
```

  我只是很惊讶没有更好的方法！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T18:11:53.883

好的，这是另一个版本（不要问我这个的效率:)）

```
db.ma.find({$or: [{arrayA: 2, arrayB: 6}, 
                  {arrayA: 6, arrayB: 2}, 
                  {arrayA: {$all: [2,6]}}, 
                  {arrayB: {$all: [2, 6]}}]}) 
```

# rest - CRM 2011、REST、OData 和安全角色

> ID：11333613
> 
> 赞同：2
> 
> 时间：2012-07-04T17:55:55.903
> 
> 标签：rest, dynamics-crm-2011, odata

我需要为我的用户提供任何特殊的安全权限，以便他们可以运行一些自定义代码吗？我有一个 javascript 库，它在单击按钮时触发，然后在子网格中获取所有选定的项目。当我获得所有选中的项目时，我会将其输入到更新操作中，并将字符串 if 项目（以 GUID 的形式）上传到我实体上的单行文本框字段中。一旦该字段被更新，他们将触发一个对话框，该对话框使用文本框字段并对其进行更多工作。

问题是什么都没有发生。一旦我发现用户需要对实体的组织写入访问权限，我就解决了一个问题，但现在我看到另一个异常“...缺少 prvReadWorkflow 权限”这是否意味着这些用户需要对组织工作流的读取访问权限？

我还缺少什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T20:13:29.777

我没有解释为什么您需要对此更新操作的工作流的读取访问权限，但这个[microsoft CRM 论坛帖子](http://social.microsoft.com/Forums/eu/crm/thread/e96c34fa-bb17-418b-8a15-b028f231f0f2)似乎与您遇到的问题相同。

Tanguy 建议您为受影响的用户添加对进程的读取权限。

# algorithm - 福特富尔克森算法的bfs修改，寻找增广路径

> ID：11333618
> 
> 赞同：2
> 
> 时间：2012-07-04T17:56:14.037
> 
> 标签：algorithm, data-structures, graph, breadth-first-search, ford-fulkerson

我正在使用 bfs 来查找增广路径。但它每次都产生相同的路径。但是福特富尔克森算法要求，我们每次从源到接收器都选择不同的路径，所以有人可以建议我如何修改 bfs 以使其产生不同的路径source 和 sink.graph 之间的每次路径都是有向和加权的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T18:13:02.053

您需要确保 BFS 忽略已使用所有容量的边缘。通常，BFS 在所谓的*残差网络上运行，其中每个边缘容量都表明该边缘上**剩余*多少容量（给定您通过该边缘发送的流量）。您可以维护一个单独的残差图，也可以通过让 BFS 查看每条边的原始容量和当前流量之间的差异来创建一个隐式残差图（如果边的容量为零，则将其视为不存在）。

# php - 如何使用 Kohana 3 ORM 处理 Database_Exception

> ID：11333621
> 
> 赞同：1
> 
> 时间：2012-07-04T17:56:27.743
> 
> 标签：php, mysql, kohana, kohana-3, kohana-orm

**这是问题**

有一个脚本在 X 时间（5 到 40 分钟之间的未知时间）后抛出以下错误：**MySQL 服务器已消失**，Kohana 变成**Database_Exception 2006**结果某些信息未保存到数据库。

**这是我认为可能有效的方法**

```
class Model_Bar extends ORM {

protected $_belongs_to = array(
    'foo' => array()
);

public function save(){ //Extends the save method
    try {
        $result = parent::save(); //Try parent save
    }  catch (Database_Exception $e) { //Catch exception
        if ($e->getCode() == 2006) { //If exception code == 2006 then DB has gone away
            mysqli_ping(); //Try to refresh DB link
            $result = parent::save(); //Try parent save again
        } else { //Exception code != 2006
            throw new Exception($e); //Throw new DB exception
        }
    }
    return $result; // Return the result from parent::save()
    }
} 
```

**问题：如何刷新 Kohana 的 ORM 中的 DB 链接？**

**更多信息：**

*   使用 Kohana 3.0.8
*   [可能的解决方案](https://stackoverflow.com/questions/7942154/mysql-error-2006-mysql-server-has-gone-away)（我不知道如何在 Kohana 中尝试）

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T09:19:47.437

这是任何一方的问题

*   达到MYSQL配置的超时时间
*   超过数据包大小
*   丢包

如果您正在执行长插入，如批量插入，如果您的数据库没有为此配置，则代码中的任何更改都不会产生任何影响。您可以尝试重新配置您的 MYSQL 实例，然后排除 MYSQL 的责任，然后在您尝试修改代码之后（我怀疑这是问题的根源）。重试保存不会有太大帮助，但会使数据库更加繁忙。

另一件事，如果您使用的是代理（如 HAProxy），请检查其超时。

# ruby-on-rails - Rails 应用程序使用条带进行支付：无法将 plan_id 从应用程序传输到条带网站

> ID：11333623
> 
> 赞同：0
> 
> 时间：2012-07-04T17:56:37.243
> 
> 标签：ruby-on-rails, stripe-payments

我正在尝试将条带集成到我的应用程序中。我正在关注 Railscast (#288)，但我的印象是 Ryan 没有明确提及一些事情。

我的问题是我的应用程序上的 plan_id 没有传输到 Stripe。一旦我在我的应用程序中生成测试交易并登录到 Stripe，它会显示创建了一个具有有效卡的新客户，但没有传输 plan_id。我确实有计划在条纹上设置。但是由于没有提交plan_id，因此信用卡永远不会被收取费用。所以我有客户，但没有付款。

这是我的订阅/new.html.haml。我想知道是否需要为隐藏字段“plan_id”分配一个值。

```
%p
  = @plan.name 
  = @plan.price

= form_for @subscription do |f|
  - if @subscription.errors.any?
    .error_messages
      %h2
        = pluralize(@subscription.errors.count, "error")
        prohibited this subscription from being saved:
      %ul
        - @subscription.errors.full_messages.each do |msg|
          %li= msg

  = f.hidden_field :plan_id

  = f.hidden_field :stripe_card_token

  .field
    = f.label :email
    = f.text_field :email

  - if @subscription.stripe_card_token
    Credit card has been provided
  - else
    .field
      = label_tag :card_number, "Credit Card Number "
      = text_field_tag :card_number, nil, name: nil
    .field
      = label_tag :card_code, "Security Code on Card (CVV)"
      = text_field_tag :card_code, nil, name: nil
    .field
      = label_tag :card_month, "Card Expiration"
      = select_month nil, {add_month_numbers_true: true}, {name: nil, id: "card_month"}
      = select_year nil, {start_year: Date.today.year, end_year: Date.today.year+15}, {name: nil, id: "card_year"}

  .stripe_error
    %noscript JavaScript is not enabled and is required for this form. First enable it in your web browser settings.
  .actions= f.submit "Subscribe" 
```

这是我的订阅控制器。params(:plan_id) 使用字符串查询传递。

```
 def new
    @subscription = Subscription.new
    @plan = Plan.find_by_id(params[:plan_id])
  end

  def create
    @subscription = Subscription.new(params[:subscription])
    if @subscription.save_with_payment
      flash[:success] = "Thank you for subscribing!"
      redirect_to @subscription
      else
        render 'new'
      end
  end 
```

这是我的订阅模型.rb

```
class Subscription < ActiveRecord::Base

  has_many :users

  belongs_to :plan

  #validates_presence_of :plan_id, :email

  attr_accessible :stripe_card_token, :plan_id, :email
  attr_accessor :stripe_card_token

  def save_with_payment
    if valid?
      customer = Stripe::Customer.create(description:email, plan: plan_id, card: stripe_card_token)
      self.stripe_customer_token = customer.id
      save!
    end
  rescue Stripe::InvalidRequestError => e
    logger.error "Stripe error while creating customer: #{e.message}"
    errors.add :base, "There was a problem with your credit card."
  end
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T23:51:01.167

我最终将 plan_id 传递给了这样的新方法。

```
@subscription = Subscription.new(plan_id: params[:plan_id]) 
```

轻松回答。希望我早点意识到这一点。

# css - 浮动权利和绝对位置不能一起工作

> ID：11333624
> 
> 赞同：143
> 
> 时间：2012-07-04T17:56:42.953
> 
> 标签：css, css-float, position

我希望 div 始终位于其父 div 的右侧，所以我使用`float:right`. 有用。

但我也希望它在插入时不影响其他内容，所以我使用`position:absolute`.

现在`float:right`不起作用，我的 div 总是在其父 div 的左侧。我怎样才能把它移到右边？

* * *

## 回答 #1

> 赞同：326
> 
> 时间：2012-07-04T18:00:53.383

利用

`position:absolute; right: 0;`

无需`float:right`绝对定位

另外，确保父元素设置为`position:relative;`

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2012-07-04T18:09:45.640

一般来说，`float`是一个相对定位语句，因为它指定了元素相对于其父容器的位置（向右或向左浮动）。这意味着它与`position:absolute`属性不兼容，因为`position:absolute`是绝对定位语句。您可以浮动一个元素并允许浏览器相对于其父容器定位它，或者您可以指定一个绝对位置并强制该元素出现在某个位置。具体来说，一个带有属性的元素`position:absolute`将放置在您指定的任何偏移量（使用`left`、`right`、`top`或`bottom`）与其最近的祖先（包含元素）的位置`position`，无论它是否具有`float`财产与否。如果它没有任何具有`position`属性的祖先，它将被放置在您指定的距屏幕边缘的偏移处。

如果您希望绝对定位的元素出现在其父元素的右侧`div`，您可以使用`position: absolute; right: 0;`-- 只要父元素`div`具有诸如 的位置属性`position:relative`。但是，如果父`div`级没有位置属性，这将不起作用，您需要坚持使用`float:right`.

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-04-15T16:57:49.393

如果您的绝对元素是“ **display: inline-block** ” ，则可以使用“ **translateX(-100%)** ”和“ **text-align: right ”**

 **```
<div class="box">
<div class="absolute-right"></div>
</div>

<style type="text/css">
.box{
    text-align: right;
}
.absolute-right{
    display: inline-block;
    position: absolute;
}

/*The magic:*/
.absolute-right{
-moz-transform: translateX(-100%);
-ms-transform: translateX(-100%);
-webkit-transform: translateX(-100%);
-o-transform: translateX(-100%);
transform: translateX(-100%);
}
</style> 
```

**您将获得相对于其父**级的正确对齐的绝对元素

 *** * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-04T18:09:15.867

Perhaps you should divide your content like such using floats:

```
<div style="overflow: auto;">
    <div style="float: left; width: 600px;">
        Here is my content!
    </div>
    <div style="float: right; width: 300px;">
        Here is my sidebar!
    </div>
</div> 
```

Notice the `overflow: auto;`, this is to ensure that you have some height to your container. Floating things takes them out of the DOM, to ensure that your elements below don't overlap your wandering floats, set a container `div` to have an `overflow: auto` (or `overflow: hidden`) to ensure that floats are accounted for when drawing your height. Check out more information on floats and how to use them [here](http://www.alistapart.com/articles/css-floats-101/).

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-01-17T00:06:09.870

我能够用一层嵌套和一个棘手的边距绝对定位一个右浮动元素：

```
function test() {
  document.getElementById("box").classList.toggle("hide");
}
```

```
.right {
  float:right;
}
#box {
  position:absolute; background:#feb;
  width:20em; margin-left:-20em; padding:1ex;
}
#box.hide {
  display:none;
}
```

```
<div>
  <div class="right">
    <button onclick="test()">box</button>
    <div id="box">Lorem ipsum dolor sit amet, consectetur adipiscing elit,
      sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.
      Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris
      nisi ut aliquip ex ea commodo consequat.
    </div>
  </div>
  <p>
    Lorem ipsum dolor sit amet, consectetur adipiscing elit,
    sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.
    Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris
    nisi ut aliquip ex ea commodo consequat.
  </p>
</div>
```

我决定将此设置为可切换的，这样您就可以看到它如何不影响周围文本的流动（运行它并按下按钮以显示/隐藏浮动的绝对框）。****

# c# - AspxGridVIew：如何在服务器端获取可见的rowsonpage 计数？

> ID：11333625
> 
> 赞同：0
> 
> 时间：2012-07-04T17:56:53.397
> 
> 标签：c#, count, devexpress, rows, aspxgridview

如何在服务器端的 gridview 中获取当前页面上可见行的计数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T18:00:03.080

尝试使用此代码

```
int rowCount = myGridView.ChildRows.Count(row => row.IsVisible); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T18:38:19.283

使用[ASPxGridView-Traversing Rows](http://help.devexpress.com/#AspNet/CustomDocument5299)帮助主题中的说明来处理所需的 ASPxGridView 行。

# java - GlassFish 如何将客户端请求映射到会话

> ID：11333627
> 
> 赞同：1
> 
> 时间：2012-07-04T17:56:54.147
> 
> 标签：java, jakarta-ee, ejb-3.0, stateless-session-bean, stateful-session-bean

使用 EJB (3.x)，您可以选择会话 Bean：`@Stateful`和`@Stateless`. 如果我了解这两个选项背后的基础知识：

*   `@Stateful`- 每个用户/客户都有自己的，因此通常不会被汇集；跨多个请求维护状态
*   `@Stateless`- 不维护请求之间的状态，因此通常是池化的，因此每个新的客户端请求都会获得一个新的 bean

我的核心问题很简单，但是我有几个与之相关的小问题：**我的 POJO 设计在`@Stateful`beans 与. 之间有何不同`@Stateless`？**换句话说，如果我有一个`HelloWorld`实现`Hello`接口的 bean，那么 POJO 的设计如何根据我是否希望它是有状态的而改变？

与此相切：

*   应用程序容器（在我的情况下为 GlassFish）对 EJB 施加了哪些不同的限制，具体取决于它是否有状态？
*   在 的情况下`@Stateful`，来自同一用户/客户端的客户端请求如何映射到正确的 bean（从前一个请求维护客户端状态的 bean）？
*   会话 bean 什么时候死？我假设它在请求完成后立即`@Stateless`，但没有任何线索`@Stateful`。

在此先感谢您的澄清。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T20:24:58.430

关于核心问题“我的 POJO 设计在 @Stateful bean 与 @Stateless 之间有何不同”：

您的 hello world 示例是 @Stateless 会话 bean 的一个很好的示例：实现没有状态（没有类实例变量）。它不对状态做任何假设。如果您确实需要 @Stateless bean 中的“更多信息”，请查找、（重新）计算它等。如果您违反此规则并在 bean 上定义实例变量，则无法保证该信息将是您所期望的每次调用 bean 时都要这样做：不要这样做。

您对@Stateful bean 的设计将保留容器将在 bean 的生命周期内保留的内部状态（类实例变量）；bean 必须是可序列化的。在会话的生命周期内保持 bean 存在相关的非常实际的运行时成本（内存和管理第二个切线问题的问题，特别是在集群环境中） - 所以只在适当的时候使用它（这证明了@Stateless bean 的存在）。

例如，考虑一个简单的注册页面：输入用户名、电子邮件地址等，然后输入“您确定”吗？@Stateful bean 可以保留此临时信息，直到您准备好将其提交到后端。

谷歌示例；这是一个：[http ://docs.redhat.com/docs/en-US/JBoss_Enterprise_Application_Platform/6/html/Beta_Documentation/Stateful_Session_Bean_Example.html](http://docs.redhat.com/docs/en-US/JBoss_Enterprise_Application_Platform/6/html/Beta_Documentation/Stateful_Session_Bean_Example.html)

客户端如何映射到正确的 @Stateful bean 是真正依赖于实现的（不是指定的），但是您可以期望它的管理类似于您的 Servlet 会话信息的维护方式。也就是说，不要将 Servlet 会话与 @Stateful 会话*混淆*——它们根本不是一回事。

对于您的@Stateful bean 中的Java EE 5/6，使用@Remove 注释一个方法，当您的客户端调用该方法时，它将被释放回以太。除此之外，只要您持有对@Stateful bean 的引用（即在您的Servlet 会话中），您就可以期望@Stateful bean 在您需要的时候出现。

另见：[http ://docs.oracle.com/javaee/5/tutorial/doc/bnbmt.html](http://docs.oracle.com/javaee/5/tutorial/doc/bnbmt.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T20:00:32.557

*   如果您在无状态会话 Bean 中有实例变量，那么它们的值将毫无意义（实际上来说）。这是因为您永远不知道将从实例池中检索无状态会话 Bean 的哪个实例来为请求提供服务。

*   无状态会话 Bean 仅在容器决定杀死它们时才会死亡。它们根据需要被实例化，并且只有在容器决定销毁它们时才会被销毁（例如，如果它决定使实例池更小）。您说您假设它们在请求后被销毁，但这是不正确的。在请求之后，它们将返回到实例池并保持准备好为下一个请求提供服务。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T07:02:59.920

由于问题范围很广，我将尝试尽快回答并提供更多信息的链接。

**应用程序容器（在我的情况下为 GlassFish）对 EJB 施加了哪些不同的限制，具体取决于它是否有状态？**

您的案例的主要区别在于以下规范的引用：

> 无状态会话 bean 是其实例没有会话状态的会话 bean。这意味着，当所有 bean 实例不参与服务客户端调用的方法时，它们都是等效的。术语“无状态”表示实例没有特定客户端的状态。但是，实例的实例变量可以包含跨客户端调用的方法调用的状态。这种状态的示例包括打开的数据库连接和对企业 bean 对象的对象引用。

**在@Stateful 的情况下，来自同一用户/客户端的客户端请求如何映射到正确的 bean（从前一个请求维护客户端状态的 bean）？**

在客户端，您必须存储对有状态会话 bean 的业务接口的引用。您从 EJB 容器中获得的这个对象。它是容器创建的对象，包含有关如何定位服务器端对象的详细信息。有关 GlassFish 中这些代理的一些信息可以从以下位置找到：

**会话 bean 什么时候死？我假设它在对@Stateless 的请求完成后立即进行，但对@Stateful 没有任何线索。**

不，无状态会话 bean (SLSB) 在请求后不会死掉。无状态会话 bean 的生命周期是：

1.  它是在容器决定时创建的。这在使用之前的某个时间点会自然发生，但除此之外它就在容器的手中。创建 SLSB 后，将其放入池中。
2.  当某些客户端需要调用 SLSB 中的方法时，会在方法调用期间从池中取出一个实例。方法调用完成后，实例返回池中。然后这个实例（以及其他实例）准备好为下一个客户服务。
3.  当容器决定调整池的大小时，SLSB 的生命周期结束

有状态会话 bean (SFSB) 的生命周期大致如下：

1.  当 JNDI 查找或注入发生时，容器会创建新实例。
2.  在其生命周期中，SFSB 可以为多个方法调用提供服务。它也可以被钝化（基本上存储到磁盘以节省资源）并再次激活。
3.  当调用 remove 方法或发生超时（SFSB 在一段时间内未使用）时，SFSB 的生命周期结束。容器通常具有特定于实现的默认超时，并且超时也可以调整。在 Java EE 6 (EJB 3.1) 中，可以通过[StatefulTimeout](http://docs.oracle.com/javaee/6/api/javax/ejb/StatefulTimeout.html)调整每个 bean 的超时时间。

此外，当系统异常发生时，会话 bean 的实例将被丢弃。系统异常是 RuntimeException（未标记为应用程序异常）或 java.rmi.RemoteException。SLSB 的实例被丢弃的事实对客户端是透明的。下一次调用肯定会由其他 SLSB 实例提供服务。在 SFSB 的情况下，未来所有可能的业务方法调用都将失败，因为 SFSB 的服务器端实例不再存在。详细信息可以在 EJB 3.1 规范第 14 章中找到。

可以从 EJB 3.1 规范 (4.6, 4.7) 中找到生命周期的明确而详细的描述。[Java EE 6 教程](http://docs.oracle.com/javaee/6/tutorial/doc/giplj.html)中提供了比上面更详细的描述和图表。

以及对 Hello 服务设计的主要影响是什么：

```
@Stateless
public class HelloStateless implements HelloRemote {
    @Override
    public String getGreeting(String name) {
        return "Hi " + name;
    }
}

/**
 * This design is not possible for Stateless, because
 * subsequent calls to setName and getGreeting can be
 * handled by two different instances. For stateful it 
 * is fine, because we use one exclusively one instance.
 */
@Stateful
public class HelloStateful {

    private String name;
    public void setName(String name) {
        this.name = name;
    }

    public String getGreeting() {
        return "Hi " + name;
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-06T19:26:12.830

1) 你的 EJB/Pojo 真的不知道区别。作为开发人员，您会这样做，但在代码级别，无状态 bean 看起来很像有状态 bean。生命周期和回调实际上是相同的，区别在于客户端可以更好地控制该生命周期，而对于无状态 bean，容器可以控制该生命周期。

2) 您的客户端只是维护 Session Bean 实例的副本。因此，例如，在 Web 容器中，您可以简单地将实例填充到会话中。您不想做的只是不断地为每个请求注入一个有状态会话 bean（使用@EJB），因为这每次都会创建一个新的。最好检查你的会话，如果它不存在，然后正常查找。

3) 有状态bean 可以有一个用@Remove 注释的方法。当您调用此方法时，bean 将被销毁。如果你不调用这个方法，容器有一个超时功能，它会在一些配置的持续时间后自动获取会话 bean。不期望有状态 bean 在服务器重新启动后仍然存在（尽管该合同在集群环境中可能会有所不同）。

还有一堆遗留的 EJB 2 行为大部分都可以工作，你只需要跳过障碍就可以得到它，现代的东西更容易。

# sql - 如何在 PostgreSQL 中搜索日期？

> ID：11333628
> 
> 赞同：0
> 
> 时间：2012-07-04T17:57:14.183
> 
> 标签：sql, ruby-on-rails, database, postgresql

我想将在搜索字段中输入的日期（例如 04.07.2012）与我表中的日期（`datetime`名为 的列`date`）进行比较。但是，我似乎无法直接获得我的 SQL 查询。

我尝试了什么：

```
find(:all, :conditions => ['\'to_timestamp(date, \'DD Mon YYYY\')\' LIKE \'to_timestamp(?, \'DD Mon YYYY\')\'', '#{query}']) 
```

但它失败了：

```
PG::Error: ERROR:  syntax error at or near "DD"
LINE 1: ...s".* FROM "projects"  WHERE ('to_timestamp(date, 'DD Mon YYY...
                                                             ^
: SELECT "pacients".* FROM "projects"  WHERE ('to_timestamp(date, 'DD Mon YYYY')' LIKE 'to_timestamp('#{query}', 'DD Mon YYYY')') 
```

就（postgre）SQL 而言，我是一个真正的新手，我真的很感激在编写这个查询的正确方向上的一些提示。

太感谢了！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T18:09:27.353

As meager pointed out there are a couple of issues here:

*   incorrect string interpolation
*   making the database do more work than necessary and using `LIKE` when you can do date searching more directly:

Let ActiveRecord format the date inputs use straight SQL to compare the dates, something like:

```
start_date = Date.civil(2012, 7, 4)
end_date = Date.civil(2012, 7, 20)
User.where(["date BETWEEN ? AND ?", start_date, end_date]) 
```

Converting the source date and the dates in the database to a timestamp formatted like a string and then using `LIKE` is very round-about and poor performing as well.

# android - 公用事业活动？

> ID：11333630
> 
> 赞同：-2
> 
> 时间：2012-07-04T17:57:37.610
> 
> 标签：android

我对这里使用的命名约定有点困惑......但是AFAIK可以构建一个执行一些小功能的活动（？），而不是许多不同的程序可以使用的。例如，用于日历或警报程序的日期选择器工具。

首先我想知道这些东西叫什么。我在哪里可以看到人们期望在他们的手机上预装的常见列表。最后是否有可能制作和分发你自己的？

我最初认为这些东西可能被称为小部件，但看过其中的一些后，它们本身似乎就是完整的程序——所以我假设小部件不是我要找的词。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T18:47:11.667

> 首先我想知道这些东西叫什么

Android 中没有这样的概念可以满足您的所有要求。

* * *

这是我对您的观点的第一个解释：

> 例如，用于日历或警报程序的日期选择器工具。

这是一个小部件。

> 我在哪里可以看到人们期望在他们的手机上预装的常见列表。

用户不“期望”小部件，就像他们“期望”整数、`HashMap`s 或任何其他编程结构一样。“预装”的小部件是 Android SDK 中的小部件。

> 最后是否有可能制作和分发你自己的？

您当然可以制作自己的自定义小部件。您通常以 Android 库项目的形式分发它们，其他开发人员可以下载并链接到他们的应用程序。

* * *

这是我对您观点的第二种解释：

> AFAIK可以构建一个执行一些小功能的活动（？），而不是许多不同的程序可以使用的......首先我想知道这些东西叫什么

活动。

> 我在哪里可以看到人们期望在他们的手机上预装的常见列表。

没有这样的清单。任何设备都可以有任何应用程序，由设备制造商、移动运营商（如果相关）和用户共同决定。这些应用程序中的任何一个都可以导出一个或多个活动，理论上其他应用程序可以链接到这些活动。

话虽如此，您会`Intent`在 Android SDK 中找到各种操作字符串，尤其是在`Intent`类中，这些操作字符串旨在供 使用`startActivity()`，并且将在大多数 Android 设备上得到尊重。

> 最后是否有可能制作和分发你自己的？

欢迎您创建 Android 应用程序。欢迎您在该应用程序中实施活动。欢迎您导出这些活动并为它们提供操作字符串等。欢迎您记录这些操作字符串，并以其他方式向第三方开发人员解释他们如何调用您的活动。此外，您可以创建支持我上面提到的一些常见`Intent`操作的活动（例如，PDF 查看器应用程序具有宣传它们可以支持查看 PDF 文件的活动）。

# android - 自定义微调器设置文本

> ID：11333636
> 
> 赞同：0
> 
> 时间：2012-07-04T17:58:05.463
> 
> 标签：android, android-spinner, android-adapter

您好，我正在为微调器使用自定义适配器，但是当我从微调器中选择一个项目时，没有使用我选择的选项在微调器上设置文本。我究竟做错了什么？以下代码是我的适配器：

```
 private  class ListadapterUnicaCidades extends BaseAdapter {
            private LayoutInflater mInflater = null;
            private ArrayList<HashMap<String, String>> _list1;
            public ListadapterUnicaCidades(Context context, ArrayList<HashMap<String, String>> pperguntalist) {
                // Cache the LayoutInflate to avoid asking for a new one each time.
                mInflater = LayoutInflater.from(context);
                _list1 = cidadeslist;
            }

            /**
             * The number of items in the list is determined by the number of
             * speeches in our array.
             * 
             * @see android.widget.ListAdapter#getCount()
             */
            public int getCount() {

                // return BabbleMainListParse.getNumOfBabbles();
                return _list1.size();
            }

            /**
             * Since the data comes from an array, just returning the index is
             * sufficent to get at the data. If we were using a more complex data
             * structure, we would return whatever object represents one row in the
             * list.
             * 
             * @see android.widget.ListAdapter#getItem(int)
             */
            public Object getItem(int position) {
                return _list1.get(position);
            }

            /**
             * Use the array index as a unique id.
             * 
             * @see android.widget.ListAdapter#getItemId(int)
             */
            public long getItemId(int position) {

                return position;
            }

            /**
             * Make a view to hold each row.
             * 
             * @see android.widget.ListAdapter#getView(int, android.view.View,
             *      android.view.ViewGroup)
             */
            public View getView(int position, View convertView, ViewGroup parent) 
            {

                Log.d("disponiveislist", "getView");
                // A ViewHolder keeps references to children views to avoid
                // unneccessary calls
                // to findViewById() on each row.
                ViewHolder holder;

                // When convertView is not null, we can reuse it directly, there is
                // no need
                // to reinflate it. We only inflate a new View when the convertView
                // supplied
                // by ListView is null.
                if (convertView == null) 
                {

                    convertView = mInflater.inflate(android.R.layout.simple_list_item_single_choice, parent,false);
                    Log.d("ConvertView",convertView.toString());

                    // Creates a ViewHolder and store references to the two children
                    // views
                    // we want to bind data to.
                    holder = new ViewHolder();
                    holder.listtexto = (TextView) convertView.findViewById(android.R.id.text1);

                    convertView.setTag(holder);
                }
                else 
                {
                    // Get the ViewHolder back to get fast access to the TextView
                    holder = (ViewHolder) convertView.getTag();
                }

                // Bind the data efficiently with the holder.
                //holder.txtVilleListTitle.setText(VilleMainListParse.getMsgTitle(position));

             Log.d("_List", _list1.toString());
             holder.listtexto.setText(_list1.get(position).get("DESIGNACAO"));

                return convertView;
            }

             class ViewHolder
            {
                TextView listtexto;

            }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T18:06:19.940

第 1 点

你没有使用 pperguntalist

```
public ListadapterUnicaCidades(Context context, ArrayList<HashMap<String, String>> pperguntalist) { 
```

第2点：如果你想设置你在spiner list use中看到的内容

```
public Object getItem(int position) {
                return _list1.get(position).get("DESIGNACAO");//_list1.get(position);
            } 
```

# actionscript-3 - 从阶段 AS3 添加/删除

> ID：11333637
> 
> 赞同：0
> 
> 时间：2012-07-04T17:58:06.813
> 
> 标签：actionscript-3

这将删除我的可拖动层上的所有子项：

```
while(draggableLayer.numChildren){
                draggableLayer.removeChildAt(0);
            } 
```

但是它们只是从舞台上消失了，我怎样才能将它们重新添加到舞台上？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T18:02:46.427

`removeChildAt`返回删除的`DisplayObject`. 您可以将其存储在一个`Array`或另一个数据结构中，并在以后需要时添加它。

```
var removedChildren:Vector.<DisplayObject> = new Vector.<DisplayObject>();
while(draggableLayer.numChildren)
{
    removedChildren.push(draggableLayer.removeChildAt(0));
} 
```

# c++ - 动态成员的定义

> ID：11333638
> 
> 赞同：0
> 
> 时间：2012-07-04T17:58:07.383
> 
> 标签：c++

我正在寻找比我目前脑海中模糊的**动态成员更精确的定义。**

我正在阅读 Nicolai Jossutis 的书*Object-Oriented Programming in C++*。我在关于类的动态成员的章节中。我以为我正在理解动态成员，直到我读到“包含类的类”这一章的部分（我的书中的 6.4，如果有帮助的话，第 406 页）。

他给出了一个包含两个字符串作为成员变量的类的示例（它是一个“Person”类，其中包含两个字符串作为人的名字和姓氏）。他说这个类不包含动态成员。相反，它包含具有动态成员的对象。

美好的。那么究竟什么是*动态成员*？我是否足以将其理解为必须在构造函数中用 new 实例化并因此用 delete 销毁的成员？

# regex - 正则表达式匹配单词前的所有内容。在 nan 脚本中使用

> ID：11333641
> 
> 赞同：0
> 
> 时间：2012-07-04T17:58:28.863
> 
> 标签：regex, nant

我正在为我的项目编写一些构建脚本。我想要一个正则表达式模式，它可以匹配特定单词之前的所有内容。例如：我的脚本看起来像这样

```
Create Table ABC(
id int(50)
)

--//@UNDO

Drop table ABC 
```

我想使用[nant regex task](http://nant.sourceforge.net/nightly/latest/help/tasks/regex.html)匹配 --//@UNDO 之前的所有内容。我该如何实施？

如果文件中不存在 --//@UNDO，我还希望它匹配文件中的所有内容。我没有办法解决

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T19:32:05.990

这将是 NAnt 目标：

```
<target name="go">
  <loadfile
    file="C:\foo\bar.sql"
    property="content" />
  <regex
    pattern="(?'content'.*)--//@UNDO"
    input="${content}"
    options="Singleline"
    failonerror="false" />
  <echo message="${content}" />
</target> 
```

请注意，如果文件中不存在该属性，则该属性`content`已预设为完整的文件内容。`--//@UNDO`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T09:58:24.423

这就是我最终做的

```
<loadfile file="${filePathAndName}" property="file.contents" />
    <property name="fileHasUndo" value="${string::index-of(file.contents, '--//@UNDO')}" />
    <choose>
      <when test="${fileHasUndo ==  '-1' }">
          <echo file="${file}" append="true" message="${file.contents}" />
      </when>
      <otherwise>
        <regex pattern="(?'sql'[\s\S]*)--\/\/@UNDO[\s\S]*"  input="${file.contents}" options="Multiline"/>
        <echo file="${file}" append="true" message="${sql}" />
      </otherwise>
    </choose> 
```

我找到了 --//@UNDO 的索引。并且根据它的存在，我正在做一个选择..解决了这个问题

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T18:07:59.000

This is the pattern:

```
(?'str'.*?)--//@UNDO 
```

The result will be in str.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-04T18:14:26.510

如果您只想匹配字符串之前的文本（而不是字符串本身），则需要使用前瞻。

```
.*?(?=--//@UNDO) 
```

需要指定 Singleline 仍然适用。

# c++ - 泛型类中的多态性在 C++0x 中不起作用

> ID：11333642
> 
> 赞同：1
> 
> 时间：2012-07-04T17:58:30.470
> 
> 标签：c++, templates, polymorphism, type-erasure

基本上从 C++ FAQ 我了解到：

> 虚函数允许派生类替换基类提供的实现。编译器确保只要有问题的对象实际上属于派生类，就总是调用替换，即使该对象是通过基指针而不是派生指针访问的。这允许在派生类中替换基类中的算法，即使用户不知道派生类。

但是，使用模板这变得不再正确。

我需要一个由另一个模板类派生的模板类。之后，我发现在基模板类中使用虚函数毫无意义，谷歌搜索后发现有一种技术可以克服泛型编程中的多态性限制，称为类型擦除。

我读过的示例和教程几乎与我的需求无关。另外我不确定我是否正确理解了类型擦除的概念。作为初学者，我只需要做：

```
template <typename T>
class Foo
{
public:
    virtual void doX(){cout<<"doX from Foo"<<endl;}
};

template <typename T>
class Bar : public Foo<T>
{
public:
    void doX(){cout<<"doX from Bar"<<endl;}
}; 
```

和，

```
Foo<int>* p;
Foo<int> i;
i.doX();           // "doX from Foo", it's ok
Bar<int> j;
j.doX();           // "doX from Bar", it's ok
p=&i;
p->doX();          // should be "doX from Foo", it's ok
p=&j;
p->doX();          // I expect "doX from Bar", but it's "doX from Foo" 
```

**编辑：** 我的问题是如何实现上述行为？没有模板，它按预期工作。我需要同样的普通课程。

简单地说，我有一个基类`B`。这是一个模板类。它具有虚拟功能。而且我还有一个子类，`B`它也是一个模板类，它应该重新实现 `B`（以某种方式实现的虚函数`B`）的一些行为。

**EDIT2：刚刚编辑了标题。** 我正在使用标志使用 g++ 4.6.3 编译器编译我的代码，`-std=c++0x`因为我需要`std::thread`并且`std::unique_ptr`在我的代码中。令人惊讶的是，删除`-std=c++0x`上述代码按预期工作。我还尝试了 g++ 4.7，2011 和 2003 标准都没有问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T18:16:08.567

好吧，它不起作用，因为 p 被分配给 i 指针，而 i 是 Foo 的类型。您正在使用基类函数。您应该使基类函数纯虚拟（通过`= 0`在函数末尾添加）。然后它应该工作。

编辑：我没有注意到它被你检查为 OK，以为那是错误。我自己用 msvc 编译器尝试了代码，它确实按预期工作。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-04T18:03:27.470

因为函数 doX 不是虚拟的。在派生类中，您隐藏函数 doX，而不是重载，因此动态多态性不起作用。

**编辑。**
当您使用 -std=c++0x 标志时，GCC 4.6.3 在这种情况下存在错误。
**编辑2。**
可能 GCC 4.6.3 没有这样的错误，问题出在 TS 编译器上。

# oracle - oracle SQL 开发人员调试输出

> ID：11333644
> 
> 赞同：3
> 
> 时间：2012-07-04T17:58:40.247
> 
> 标签：oracle, plsql, oracle-sqldeveloper

我正在使用 SQL Developer 调试如下代码，只有在完成所有存储过程后，输出结果才会显示在调试对话框中。我需要打开一些配置吗？

谢谢

```
 FOR j IN REVERSE 1..i LOOP
     DBMS_OUTPUT.PUT_LINE(emp_tab(j).first_name);
  END LOOP; 
```

日志

```
Connecting to the database hr.
Executing PL/SQL: ALTER SESSION SET PLSQL_DEBUG=TRUE
Executing PL/SQL: CALL DBMS_DEBUG_JDWP.CONNECT_TCP( '192.168.1.4', '53475' )
Debugger accepted connection from database on port 53475.
Source breakpoint occurred at line 24 of EMP_LIST.pls.
Source breakpoint occurred at line 24 of EMP_LIST.pls.
Source breakpoint occurred at line 24 of EMP_LIST.pls.
Source breakpoint occurred at line 24 of EMP_LIST.pls.
Source breakpoint occurred at line 24 of EMP_LIST.pls.
Source breakpoint occurred at line 24 of EMP_LIST.pls.
Executing PL/SQL: CALL DBMS_DEBUG_JDWP.DISCONNECT()
Shelli
Hermann
David
Mozhe
Sundar
Ellen
Process exited.
Disconnecting from the database hr.
Debugger disconnected from database. 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-04T18:09:50.387

如果您`DBMS_OUTPUT`用于调试，则在该过程完成之前您不会看到任何输出。这就是工作方式`DBMS_OUTPUT`。

但是，您似乎成功地使用了 SQL Developer 调试器，这是一种更有效的调试存储过程的方法。您显然正在设置断点，因此您可以检查这些断点处的变量值。无需打印值。

# jquery - 获取元素相对于其父元素的距离

> ID：11333647
> 
> 赞同：20
> 
> 时间：2012-07-04T17:58:51.130
> 
> 标签：jquery

我想知道如何获取元素相对于其父元素的距离/偏移量/位置。

与 jQuery 的`position()`功能不同，它获取相对于父级*偏移*位置的位置，我需要获取一个元素的（假设）*稳定*位置，因为它与包含/父元素顶部的距离。

例子：

```
<div id="parent">
  <div id="pos1">Has a position of 0px from top of containing parent el.</div>
  <br style="height:20px;">
  <br style="height:20px;">
  <div id="pos2">Has a position of 40px from top of containing parent el.</div>
</div> 
```

因此，无论父元素在文档中的位置如何，`pos1`和的位置都`pos2`将被报告为相同的，因为它们相对于其父元素不会改变......

这可能吗？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-07-04T18:28:14.190

这应该这样做：

```
$('#pos1').offset().top - $('#pos1').parent().offset().top - $('#pos1').parent().scrollTop() 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-05T10:34:35.397

这段代码对我有用。

```
var child_top = $("#parent_div").scrollTop() + $("#child_div").offset().top 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T18:07:42.430

Parent.offset() - child.offset() ？

使用 jQuery 偏移量（）

# java - 如何在不更改路径的情况下构建要移动到新位置的 java 项目

> ID：11333649
> 
> 赞同：1
> 
> 时间：2012-07-04T17:58:51.057
> 
> 标签：java

我写了一个java程序

*   在不同的目录中生成大量文件（比如 txt 文件）
*   然后读取文件并对其进行操作

我已将项目导出为可运行的 jar。

我需要在远程服务器上运行 jar，显然 PATH 不一样

我有什么选择

*   更改路径位置
*   还是有其他出路？

此外，我使用不同的外部程序来生成更多文件。我的程序也需要读取这些文件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T18:02:42.917

好吧，听起来您需要能够配置程序的功能。*你如何*做到这一点取决于你。例如：

*   您可以使用命令行参数
*   您可以使用从众所周知的位置加载的配置文件（或者可能从包含 jar 文件的目录加载）
*   您可以将两者混合使用，在命令行上指定*配置文件*位置

最后一个选项可能是最灵活的。阅读配置文件，其中包含您需要的所有其他文件位置。每个部署可以有不同的配置文件。

# html - CSS样式的“输入”与Firefox中的“a href”大小不同？

> ID：11333653
> 
> 赞同：1
> 
> 时间：2012-07-04T17:59:23.397
> 
> 标签：html, css

所以我使用下面的 CSS 来创建一个按钮样式；

```
.button {
    display: inline-block;
    outline: none;
    cursor: pointer;
    text-align: center;
    text-decoration: none;
    font: 14px/100% Arial, Helvetica, sans-serif;
    font-weight:bold;

    text-shadow: 0 1px 1px rgba(0,0,0,.3);

    padding: .5em 2em .55em;

    -webkit-box-shadow: 0 1px 2px rgba(0,0,0,.2);
    -moz-box-shadow: 0 1px 2px rgba(0,0,0,.2);
    box-shadow: 0 1px 2px rgba(0,0,0,.2);

    -webkit-border-radius: .5em; 
    -moz-border-radius: .5em;
    border-radius: .5em;
} 
```

结合其他一些类来添加颜色并提供悬停和按下效果效果很好。

我已经将这种风格应用于整个网站的各种 html 标签；

```
<span>
<a href>
<button>
<input type="button">
<input type="submit"> 
```

所有这些在 Chrome 和（令人惊讶的）IE7-9 中看起来都很棒并且工作得很好（在 IE7-8 中不太好，但还可以）。

但在 Firefox 中，`input`类型标签的大小几乎是类型标签的两倍`a href`。这是什么原因造成的？

这是[一个例子](http://jsfiddle.net/e2agj/101/)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T18:04:30.637

使用 of`em`可能会导致这种行为......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T18:47:17.077

添加一个`line-height`属性。

就像是：

```
line-height:20px; 
```

应该这样做。

Firefox 对不同的元素使用不同的行高。如果你用萤火虫检查，`a`有一个`line-height`14px 的，而`inputs`有一个`line-height`17px 的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T09:05:08.883

好吧，我结合了 Pablo Rincon、ThomasK 和 beanland 的所有三个建议。他们都没有孤立地帮助，但他们似乎都在工作！

添加了一个 CSS 重置，并非所有这些都有效，但找到了这个；[http://github.com/necolas/normalize.css](http://github.com/necolas/normalize.css)

将 em 更改为 px。

将 .button 上的 line-height 设置为 17px。

完美的。干杯。

# ruby-on-rails - 将预先存在的记录与预先存在的父对象关联（2 个父对象）

> ID：11333655
> 
> 赞同：0
> 
> 时间：2012-07-04T17:59:38.787
> 
> 标签：ruby-on-rails, nested-attributes, associated-object

我正在使用的嵌套属性中有几个模型。

我有“团队”（有很多比赛）和“比赛”（属于团队）。但我也希望比赛将“类别”引用为子对象（比赛只能有一个类别，一个类别可以有可能的比赛）。

逻辑的工作方式是首先创建一个团队，然后是比赛，然后我希望能够从类别列表中进行选择（部分）并建立关联（将比赛中的 category_id 设置为 id类别中的价值）。对我来说，在作为团队的子项创建新比赛时如何做到这一点很有意义，但是在创建第二个关系（现有比赛到现有父类别）时，我却碰壁了。

为我提供比赛显示视图的控制器是：

```
def show
@team = Team.find(params[:team_id])
@contest = Contest.find(params[:id])
@categories = Category.all

respond_to do |format|
  format.html # show.html.erb
  format.json { render json: [@contest] }
end 
```

结尾

在显示视图中，我有以下代码：

```
<p><b>Name:</b><%= @contest.name %></p>
<%= link_to 'Edit', edit_team_contest_path(@team, @contest) %> |
<%= link_to 'Back', team_contests_path %>
<br />
<%= render 'categories/index'%> 
```

我的部分 _index 类别包含以下代码：

```
<table>
<% @categories.each do |category| %>
<tr>
<td><%= category.level1 %></td>
<td><%= category.level2 %></td>
<td><%= category.level3 %></td>
<td><%= category.level4 %></td>    
<td><%= link_to 'Show', category %></td>
<td><%= link_to 'Edit', edit_category_path(category) %></td>
<td><%= link_to 'Destroy', category, confirm: 'Are you sure?', method: :delete %></td>
<%end%>
</table> 
```

我很困惑的地方是在哪里放置代码（在竞赛或类别控制器中？）以设置类别-竞赛父子关系，以及哪个视图（竞赛显示视图，或类别 _index 部分？）。我很确定我在这里不了解 Rails 的一些基本知识，所以如果有人能指出我可能会消除我的困惑的文档，我将非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T19:13:16.520

好的，这就是我最终解决问题的方法（以防以后有人发现它并使用我尝试过的相同搜索词）：

楷模：

```
team.rb
 has_many :contests, :dependent => :destroy

category.rb
 has_many :contests

contest.rb
 belongs_to :team, :foreign_key => "team_id"
 belongs_to  :category, :class_name => 'Category', :foreign_key =>"category_id"
 accepts_nested_attributes_for :category 
```

控制器：

```
contests_controller
def update
@contest = Contest.find(params[:id])
@team = @contest.team
if !params[:category_id].nil?
  @category = Category.find(params[:category_id]) 
  @contest.update_attributes(:category_id => @category.id)
end
respond_to do |format|
  if @contest.update_attributes(params[:contest])
   blah
  else
    blah
  end
end
end 
```

类别视图 (_index) 是比赛/节目视图的一部分，包括这三位代码：

```
<table>
<% @categories.each do |category| %>
<tr>
<td><%= form_for [category, @contest] do |f| %>
    <% f.submit "Select" %>
    <% end %></td>
</tr>
<%end%>
</table> 
```

这就是将属于另一个父级的记录与不同模型中的另一个父级关联起来所需要的（在创建第一个关系之后）。

# javascript - 在 Javascript 中循环遍历 Photoshop 图层

> ID：11333658
> 
> 赞同：4
> 
> 时间：2012-07-04T18:00:06.870
> 
> 标签：javascript, photoshop

我正在尝试编写一个 Photoshop 脚本来显示给定名称的所有图层。我需要遍历所有可能的嵌套层集并使用以下代码：

```
function showBounds(layerNode)
{
    for(var layer in layerNode.artLayers)
    {
        if (layer.name == "@bounds")
        {
            layer.visible = 1;
        }
    }

    showBounds(layerNode.layerSets);
}

showBounds(app.activeDocument.doc.layerSets); 
```

但是当我运行它时，我收到以下错误：

```
Error 1302: No such element
Line: 5
->      for(var layer in layerNode.artLayers) 
```

artLayers 应该是 LayerSets 的一个属性，所以我很困惑。

这也是我第一次尝试编写 PS 脚本（并使用 javascript），所以可能有一些我没有得到的基本概念。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-04T18:31:30.130

我认为您需要更多类似的东西：

```
function showBounds(layerNode) {    
    for (var i=0; i<layerNode.length; i++) {

        showBounds(layerNode[i].layerSets);

        for(var layerIndex=0; layerIndex < layerNode[i].artLayers.length; layerIndex++) {
            var layer=layerNode[i].artLayers[layerIndex];
            if (layer.name == "@bounds") {
                layer.visible = 1;
            }
        }
    }
}

showBounds(app.activeDocument.layerSets); 
```

此外，javascripts for...in 语法并不像您认为的那样工作。它不像一个 foreach 循环。它循环遍历对象的属性名称。

# facebook - Facebook iPad 应用程序和查看 Facebook 页面选项卡

> ID：11333660
> 
> 赞同：1
> 
> 时间：2012-07-04T18:00:10.407
> 
> 标签：facebook, ipad, facebook-apps, facebook-iframe, iframe-app

我知道可以通过 Safari 浏览器在 iPad 上查看 Facebook（自定义）Iframe 选项卡。有谁知道是否有办法在 iPad Facebook 应用程序中查看自定义页面选项卡？如果没有，是否有解决方法？亲切的问候，丹尼尔

# python - django 权限组

> ID：11333662
> 
> 赞同：2
> 
> 时间：2012-07-04T18:00:21.037
> 
> 标签：python, django, permissions

我正在`User`通过扩展`User`框架提供的模型来创建自己的自定义模型。我还创建了几个模型类并包含以下权限：

```
class Meta:
    permissions = (("update_values", "update values"),) 
```

当我执行 syncdb 时，我可以看到所有权限都按应有的方式填充。我的问题是，有没有办法在同步数据库发生时将这些权限与组相关联？现在我看到的所有示例都是仅当我们通过代码执行时，但我希望自动生成一些组。谢谢您的帮助！

**[编辑]**

我正在尝试通过创建一个`initial_data.json`如下所示的文件来加载初始数据：

```
[
        {
        "model": "django.contrib.auth.models.Group",
        "pk": 1,
        "fields": {
            "name": "uni_admin"
        }
    },
        {
        "model": "django.contrib.auth.models.Group",
        "pk": 2,
        "fields": {
            "name": "uni_poweruser"
        }
    },
        {
        "model": "django.contrib.auth.models.Group",
        "pk": 3,
        "fields": {
            "name": "uni_viewer"
        }
    }
] 
```

当我跑步时`python manage.py loaddata app/fixtures/initial_data.json`，我不断得到`DeserializationError: Invalid model identifier: 'django.contrib.auth.models.Group'`......但这不是正确的模型吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-11-29T14:25:33.417

相同的pyaml版本

```
- model: auth.Group
  pk: 1
  fields:
    name: Admin Group 
```

auth.Group 是正确的名称和错误的主要原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T18:05:00.400

您可以使用固定装置或自定义 SQL（参见[https://docs.djangoproject.com/en/dev/howto/initial-data/](https://docs.djangoproject.com/en/dev/howto/initial-data/)）来完成，但如果您使用 South 来管理您的架构更新“数据迁移”恕我直言，这是一个更清洁的解决方案（如果你还没有使用 South，你应该 - 它确实让生活更轻松）。

# javascript - FB ui 允许分享到我的墙、朋友墙或通过消息发送

> ID：11333666
> 
> 赞同：1
> 
> 时间：2012-07-04T18:00:49.177
> 
> 标签：javascript, facebook, facebook-graph-api, facebook-iframe, facebook-javascript-sdk

我有一个页面选项卡，并希望允许用户在他们的墙、朋友墙或通过私信给朋友分享一些内容。

我目前正在使用：

```
function postToFeed() {

            // calling the API ...
            var obj = {
              method: 'feed',
              link: 'page url',
              picture: 'image url',
              name: 'Facebook Dialogs',
              caption: 'Reference Documentation',
              description: 'Using Dialogs to interact with users.'
            };

            function callback(response) {
              document.getElementById('msg').innerHTML = "Post ID: " + response['post_id'];
            }

            FB.ui(obj, callback);
        } 
```

这很好用，但只允许在我的墙上分享。

所以问题是......是否有任何对话框或方法可以在同一个对话框中允许三个功能？

我看到“发送”对话框发送私人消息，但在朋友墙对话框中找不到共享。

理想情况下，我只想有一个共享按钮并在单击后允许三个选项。

任何的想法？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-05T15:30:11.287

对于蹒跚学步的人来说，没有适当的官方方法可以做到这一点。但是，仍然可以通过使用 sharer.php 技术 [https://stackoverflow.com/a/12799020/691553来实现它](https://stackoverflow.com/a/12799020/691553)

干杯

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T18:47:35.833

如果您提供`to`参数，您可以使用 Feed 对话框在朋友的墙上分享。

要在打开对话框*之前*获取要发送“到”的用户 ID ，您可以按照此处描述的方式实现*自己的*朋友选择器：[https ://developers.facebook.com/docs/guides/games/custom-muti-friend-selector /](https://developers.facebook.com/docs/guides/games/custom-muti-friend-selector/)

# asp.net - 扩展/覆盖 System.Net.Mail.SmtpClient Send(message As MailMessage) 方法

> ID：11333668
> 
> 赞同：3
> 
> 时间：2012-07-04T18:01:06.877
> 
> 标签：asp.net, .net, vb.net

**设想**

大约 20 个 ASP.net(VB) 应用程序共享相同的代码框架，并且在部署时也共享一个通用的 web.config。在各种应用程序中，我们使用 System.Net.Mail.SmtpClient/MailMessage 来发送电子邮件，现在我们希望为我们的用户实现电子邮件退出功能，同时对现有代码进行最少的更改。这遗漏了最简单的方法；从 SmtpClient 继承一个类，比如 OurSmtpClient，并覆盖 Send() 方法以删除所有选择不接收电子邮件的用户，因为这意味着我们必须将所有 New SmtpClient() 更改为 New OurSmtpClient()应用程序。

**备择方案**

我们之前使用 tagMapping 将标签重新映射到我们内部的派生替代品，类是否有类似的东西，以便所有 SmtpClient 自动成为 OurSmtpClient 并因此将使用覆盖的 Send() 方法？

我们也看过[Extensions](http://msdn.microsoft.com/en-us/magazine/cc163317.aspx)，但这里的问题是我们不能覆盖现有方法，只能添加新方法？

我们考虑的下一个替代方案是反射，但我们无法考虑如何实际实现它。

事件..哦，如果有发送事件...

**代码**（因为每个人都喜欢它）

这是继承方法，只是为了理解我们在寻找什么：

```
Public Class OurSmtpClient
    Inherits SmtpClient

    Public Overloads Sub Send(message As MailMessage)
        For i As Integer = message.To.Count - 1 To 0 Step -1
            With message.To(i)
                If (.Address.Contains("test")) Then
                    message.To.RemoveAt(i)
                End If
            End With
        Next

        MyBase.Send(message)
    End Sub
End Class 
```

有什么建议么？如何在不更改现有应用程序中的代码且仅在共享代码（位于应用程序中的 App_Code 中）或共享 web.config 中的情况下做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T12:23:45.103

我会在数据层而不是在邮件客户端中更改它。

我假设您将有关用户的所有信息集中存储在某个地方，以及他们不想再收到任何电子邮件的信息。因此，在我看来，只要您询问要向其发送电子邮件的用户列表，就可以简单地不再返回这些用户。

我对您当前应用程序的工作方式知之甚少，但这似乎是更改它的最方便的地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T11:57:17.817

您正在努力实现应该是一个简单的要求这一事实是您积累了太多[技术债务](https://stackoverflow.com/questions/1258775/what-is-technical-debt)的重要线索。您的帖子表达了对偿还技术债务的强烈意愿。这是您必须避免的事情，而是接受[无情重构](http://c2.com/cgi/wiki?RefactorMercilessly)。咬紧牙关，介绍专门的 SMTP 类。

# c++ - 在初始化列表中使用 this

> ID：11333671
> 
> 赞同：4
> 
> 时间：2012-07-04T18:02:04.957
> 
> 标签：c++, this, language-lawyer, initializer-list

假设我有一个`Baz`从类继承的类，`Foo`并且`Bar`按顺序。类的构造函数`Bar`接受一个指向`Foo`对象的指针。我想做的是`this`作为`Foo`对象传递给`Bar`构造函数：

```
Baz () : Foo(), Bar(this) {} 
```

一个工作示例：

```
#include <iostream>
class Bar;
class Foo {
  public:
  virtual ~Foo() {}
  virtual void parse_bar (Bar&) const = 0;
};  

class Bar {
  private:
  const Foo * parser;
  public:
  Bar (const Foo * parser_in) : parser(parser_in) {}
  virtual ~Bar() {}
  void parse_self () { parser->parse_bar (*this); }
};  

class Baz : public Foo, public Bar {
  public:
  Baz () : Foo(), Bar(this) {}
  virtual void parse_bar (Bar &) const { std::cout << "Hello World\n"; }
};

int main () {
  Baz baz;
  baz.parse_self();
} 
```

这恰好可以在我的计算机上使用我的编译器（用其中的几个进行测试）工作。然而，2003 标准的第 9.3.2 节让我有点不安，我可能只是走运了，使用`this`这种方式是未定义的行为。严格来说，初始化列表在构造函数的主体之外。这是相关的文字，强调我的：

> 9.3.2`this`指针
> 在非静态成员函数的**主体**`this`中，关键字是一个非左值表达式，其值是调用该函数的对象的地址。

那么我的使用是否合法且定义明确，还是未定义的行为？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-04T18:15:11.413

在这种情况下，有两点需要注意。

首先，在构造函数初始化器列表`this`指针指的是非构造（或非完全构造）的对象。可以访问这样的指针，但它所引用的对象只能以有限的方式使用。请参阅语言规范中的 12.7。

其次，在您的具体示例中，您实际做的是在尝试任何访问之前将`this`指针转换为类型。`Foo *`这是完全安全的，因为此时`Foo`子对象已完全构建。（我假设，如果有的话，任何访问都将仅限于完全构造的`Foo`子对象）。

`this`唯一关心的是这种情况下转换为类型是否合法`Foo *`，即转换过程本身是否应该成功。答案是：是的，在普通（非虚拟）继承的情况下，这种转换是完全合法和安全的（同样，在 12.7 中明确允许）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-04T18:13:45.537

没事。C++ 标准实际上阐明了`this`初始化器列表中指针的使用：

> **12.6.2 初始化基和成员 [class.base.init]**
> 
> *第 7 段：*`expression-list` a中的名称在指定的`mem-initializer` **构造函数范围内进行评估**`mem-initializer`。*[例子：*
> 
> ```
>  class X {
>         int a;
>         int b;
>         int i;
>         int j;
>     public:
>         const int& r;
>         X(int i): r(a), b(i), i(i), j(this->i) {}
>     }; 
> ```
> 
> 初始化`X::r`引用`X::a`，`X::b`用构造函数参数的值初始化，用构造函数参数的值初始化`i`，**用 的值****初始化**；每次 创建类对象时都会发生这种情况。] **[注意：因为****是在构造函数的范围内计算的，所以****可以在 a 的表达式列表中使用指针****来引用正在初始化的对象。****]**`X::i``i`**`X::j``X::i`**`X`**`mem-initializer``this``mem-initializer`**

的`this`初始化程序中指针`Baz`的类型实际上是 type `Baz`。当然，您必须注意并非所有成员都已初始化的事实。许多（如果不是全部）设置为最高警告级别的编译器（无论如何您都应该这样做）会警告您将`this`指针传递给基类。

但是，看起来您正在使它变得更加复杂。为什么不把虚函数`parse_bar()`放在`Bar`类中，而忘记`Foo`类呢？

```
#include <iostream>

class Bar
{             
public:      
    Bar() {}      
    virtual ~Bar() {}      
    void parse_self () { parse_bar(); } 
private: // Template method pattern
    virtual void parse_bar() const = 0;         
};        

class Baz : public Bar
{      
public:      
    Baz () {}     
private: // Yes, this does override the private `parse_bar()` member!
    virtual void parse_bar() const { std::cout << "Hello World\n"; }      
};

int main ()
{ 
    Baz baz; 
    baz.parse_self(); 
} 
```

这基本上具有相同的功能，但代码更少。

# jquery - 在移动网络应用程序中制作“另存为书签”按钮

> ID：11333681
> 
> 赞同：6
> 
> 时间：2012-07-04T18:03:11.360
> 
> 标签：jquery, web-applications, jquery-mobile, bookmarks

我目前正在开发一个基于 jQuery Mobile的***Web 应用程序。***我想为初次使用的用户添加一个对话框，该对话框将提供一个按钮，然后可以单击该按钮将书签保存到网站。此解决方案应该适用于 iOS 和 Android。有没有办法做到这一点？我看到bubble.js 适用于iOS，但我需要一个适用于上述两个平台的通用解决方案。是否可以？

网上有这方面的文献吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T01:51:39.860

是的，它已经完成，因此（大概）确实很有可能。

看看[https://github.com/okamototk/jqm-mobile-bookmark-bubble](https://github.com/okamototk/jqm-mobile-bookmark-bubble)

它支持安卓。自己没试过，但看过推荐。

# javascript - 我可以使用哪个事件来捕获页内搜索？

> ID：11333683
> 
> 赞同：0
> 
> 时间：2012-07-04T18:04:07.757
> 
> 标签：javascript, javascript-events

每次用户使用浏览器搜索在页面中查找术语时是否会触发事件？我怎样才能检测到它并在发生这种情况时做些什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T18:12:04.910

我已将以下内容用于 CTRL+F 事件，请查看：[http ://www.sencha.com/forum/showthread.php?68120-Handle-Ctrl-F-event-in-IE-Safari-and-Google-铬合金](http://www.sencha.com/forum/showthread.php?68120-Handle-Ctrl-F-event-in-IE-Safari-and-Google-Chrome)

```
 Ext.EventManager.on(document, Ext.isOpera ? 'keypress' : 'keydown', function(e){
      if(e.keyCode == 70 && e.ctrlKey){
        e.stopEvent();
        if(Ext.isIE){
        e.browserEvent.keyCode = 0;
       }
    // do stuff
       }
    return false;
    }); 
```

# scala - Scala（最新 2.10）与 Groovy++（最新 0.9.1？）的比较

> ID：11333684
> 
> 赞同：16
> 
> 时间：2012-07-04T18:04:08.210
> 
> 标签：scala, jvm, static-typing, groovy++

我刚刚观看了[Groovy 发明者](http://macstrac.blogspot.com.br/2010/10/scala-is-awesome.html?m=1)James Strachan 的视频，他在视频中继续非常热情地热爱 Scala。这让我想了解更多关于 Groovy 的信息，这让我想到了 Groovy++。[Groovy++](http://code.google.com/p/groovypptest/wiki/Welcome)是 Groovy 的静态类型和编译版本（显然是完全动态的）。

我试图弄清楚 Groovy++（最新版本 0.9.1？）与 Scala（最新版本 2.10）的对比。[Groovy++ 论坛](https://groups.google.com/forum/?fromgroups#!forum/groovyplusplus)上的活动没有太多关于最新版本的最新活动，可以从中获取大量信息。

那么，Scala 与 Groovy++ 是否有一个很好的简单比较/对比？我对 Groovy 本身不感兴趣（除了作为设计 Groovy++ 的基础），因为我想并排比较静态编译的功能。一个简单的优点/缺点（即权衡）列表基本上就是我所寻求的，而无需进行数十到数百小时的研究和实验。

提前感谢您为这种对比和比较查询做出任何贡献。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-05T03:24:17.613

Groovy++ 项目于去年死去，显然是由于 SpringSource Groovy 团队和非 SpringSource 支持的 Groovy++ 团队之间的分裂（由 Alex T. 领导，他现在似乎是 Kotlin 项目的积极贡献者，具有讽刺意味的是 James Strachan）。

非常难看，Alex T. 对把地毯从他身下扫出来很生气是可以理解的（Spring Groovy 宣布了他们自己的静态 Groovy）。检查一些 Old Nabble 的来回条目，有时会加热。不知道现在情况如何，竞争会带来最好和最坏的结果，也许双方都已经结束了......

无论如何，我也放弃了，放弃了 Groovy 转而使用 Scala，并且非常高兴做出了这个决定——我敢说 Scala 摇滚，它是 Scocks™，试试 Scala！;-)

Groovy 对我来说是一种很好的过渡到 JVM 语言，但缺乏编译时间保证让我在一段时间后发疯（可能是静态 Groovy 项目首先出现的原因）

# iphone - 标签栏垂直偏移iOS 5

> ID：11333689
> 
> 赞同：0
> 
> 时间：2012-07-04T18:04:54.617
> 
> 标签：iphone, ios5, tabbar

[http://i.stack.imgur.com/NAqSJ.png](http://i.stack.imgur.com/NAqSJ.png)

你好

我的定制标签栏存在垂直偏移问题。UIImages 和屏幕底部之间似乎有一个黑色间隙。如何解决这个问题？我在第一个 viewController 的 viewDidLoad() 方法中使用了以下代码：

```
[super viewDidLoad];
UIImage *selectedImage0 = [UIImage imageNamed:@"tabBarButtonHomeSelected.png"];
UIImage *unselectedImage0 = [UIImage imageNamed:@"tabBarButtonHomeUnselected.png"];

UIImage *selectedImage1 = [UIImage imageNamed:@"tabBarButtonUserSelected.png"];
UIImage *unselectedImage1 = [UIImage imageNamed:@"tabBarButtonUserUnselected.png"];

UIImage *selectedImage2 = [UIImage imageNamed:@"tabBarButtonPricetagSelected.png"];
UIImage *unselectedImage2 = [UIImage imageNamed:@"tabBarButtonPricetagUnselected.png"];

UIImage *selectedImage3 = [UIImage imageNamed:@"tabBarButtonStarSelected.png"];
UIImage *unselectedImage3 = [UIImage imageNamed:@"tabBarButtonStarUnselected.png"];

UIImage *selectedImage4 = [UIImage imageNamed:@"tabBarButtonGearSelected.png"];
UIImage *unselectedImage4 = [UIImage imageNamed:@"tabBarButtonGearUnselected.png"];

UITabBar *tabBar = self.tabBarController.tabBar;
UITabBarItem *item0 = [tabBar.items objectAtIndex:0];
UITabBarItem *item1 = [tabBar.items objectAtIndex:1];
UITabBarItem *item2 = [tabBar.items objectAtIndex:2];
UITabBarItem *item3 = [tabBar.items objectAtIndex:3];
UITabBarItem *item4 = [tabBar.items objectAtIndex:4];

[item0 setFinishedSelectedImage:selectedImage0 withFinishedUnselectedImage:unselectedImage0];
[item1 setFinishedSelectedImage:selectedImage1 withFinishedUnselectedImage:unselectedImage1];
[item2 setFinishedSelectedImage:selectedImage2 withFinishedUnselectedImage:unselectedImage2];
[item3 setFinishedSelectedImage:selectedImage3 withFinishedUnselectedImage:unselectedImage3];
[item4 setFinishedSelectedImage:selectedImage4 withFinishedUnselectedImage:unselectedImage4]; 
```

非常感谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T18:16:40.120

通常标签标题会进入那个空间。您的标签项目都有空标题，这是故意的吗？如果是，那么您应该更改工具栏视图的默认框架，可能通过将其增加`frame.origin.y`间隙量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T14:20:34.010

解决方案是制作三种类型的图像。首先，您需要 TabBar 的背景。其次，您需要一个按钮大小的图像用于一个选项卡的选定或突出显示背景。第三，您需要没有任何背景的图标。

现在你设置你的 TabBar 背景

```
[tabBar setBackgroundImage:[UIImage imageNamed:@"background.png"]]; 
```

然后您将突出显示的背景图块设置为：

```
[tabBar setSelectionIndicatorImage:[UIImage imageNamed:@"selected.png"]]; 
```

那么你需要像在你的问题中那样设置你的图标。这应该可以完成这项工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-26T21:37:32.923

您现在可以在 Storyboard 中解决此问题。 ![故事板尺寸检查器图像插入调整](../Images/c65758b6c6cfa53bfa64629d35bcbbdf.png)

选择要调整的 Tab Bar Item，打开 Size Inspector，然后调整 Top 和 Bottom Image Insets。您需要将它们调整为相同的量，否则它们只会挤压/拉伸您的图像（因此顶部为 +5，底部为 -5）

# javascript - 从 tumblr 博客获取所有独特的标签

> ID：11333691
> 
> 赞同：3
> 
> 时间：2012-07-04T18:05:03.273
> 
> 标签：javascript, tumblr

**[根据Tumblr API V2](http://www.tumblr.com/docs/en/api/v2)**，有一些方法可以使用标签从您的 Tumblr 博客和副 Versa 中获取帖子和其他详细信息

无论博客文章如何，我都想获取所有标签（唯一标签）的列表

所以如果我有**10**个帖子被标记**`Technology`**，**3**个帖子被标记**`Web`**， -我想以它给我的方式查询我的博客，并且****`JavaScript`****`Web`**`Technology``Web``JavaScript`**

 **比如说，一个数组 -`results.posts.tags = ["Technology", "Web", "JavaScript"]` 或一个对象，我可以挖掘它以找到`tags`然后在循环中迭代。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T04:01:57.250

我从未使用过 Tumblr API，但看起来您应该能够构建标签列表 - 但没有内置方法。首先，您必须通过查询`/info`方法¹来查找博客中的帖子总数。网址是：

```
api.tumblr.com/v2/blog/{base-hostname}/info?api_key={key} 
```

从中获取响应并将其解码为一个对象（jQuery、extjs、w/e 都可以），您可以找到`posts`帖子总数的字段。使用该方法，您可以开始一次拉回 20 个帖子，根据 API 的最大值，使用该`/posts`方法。网址是：

```
api.tumblr.com/v2/blog/{base-hostname}/posts[/type]?api_key={key}&[optional-params=] 
```

您可能想省略`/type`，但您需要`offset`在可选参数中指定。使用偏移量，您可以一次处理 20 个²的所有帖子，直到您全部下载它们（从`/info`查询中获得的数字）。当您下载帖子时，只需跟踪您获得的标签。

不幸的是，您必须下载帖子的正文才能获取标签列表，但我没有看到任何其他方法可以为您提供标签，或者选择隐藏正文并仅查看元数据帖子。

****编辑****

¹：根据 Felix 的评论，`/info`已知帖子返回的数量有时会略有下降。在预期数字很高的情况下，您需要确保只循环您实际收到的结果，而不是您预期的结果。要处理预期数字较低的情况，您可以在结束后进行一次查询，看看是否得到任何结果。在这一点上，尽管您可能会考虑将`/info`查询全部删除并仅查询`/posts`直到您不再获得任何结果。

²：根据 Felix 的第二条评论，即使 API 列出了您可以一次拉出多少帖子的值范围（`1-20`默认`20`情况下），据推测它最多可以接受`50`. 一次提取 50 个结果可以加快/降低带宽，但它会使你的代码更复杂，无法正确执行。由于它是一个未记录的功能（阅读：可能只是一个错误），因此无法保证它会继续工作。因此，您可以尝试一次查询 50 个，但需要准备好处理`400`错误代码或类似的东西，以防他们的服务与 API 匹配，然后默认返回 20。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T03:49:39.910

我对它的工作原理一无所知，但确实如此：查看[Tumblr 标签列表书签](http://root.patrickbeser.com/tumblr/tags/)。应该至少给你一些你可以使用的代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-30T04:35:00.647

我知道这是一篇旧帖子，但我认为它可能对某些人有用，因为我已经花时间将它制作成一个 javascript，它将所有唯一标签作为 javascript 对象返回。

[https://github.com/scintillate/tumblrtag/](https://github.com/scintillate/tumblrtag/)**

# ftp - 使用您自己的 ftp 服务器在我的网站上接收上传的文件

> ID：11333694
> 
> 赞同：0
> 
> 时间：2012-07-04T18:05:21.890
> 
> 标签：ftp

我正在寻找一种开箱即用的解决方案，以便能够添加上传表单，以便我的用户可以将大文件从我的网站上传到我自己的 FTP 服务器上。

有没有人找到一个很好的服务来完成这个？同样，我希望能够在我的办公室使用我自己的服务器，并且我还需要一个附加到上传文件的表格。

我经营一家图形印刷公司，需要能够接收设计师发送给我的大文件。

我希望我的用户体验尽可能轻松且不复杂，因此我希望他们不必下载任何 FTP 客户端（如 filezilla 或传输）。

我只是想让他们填写表格上传他们的文件点击发送

然后我在我的服务器上收到它

如果有任何现成的解决方案，那就太棒了。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-26T18:59:37.290

我想这是一个“开箱即用”的网络应用程序。它允许您通过修改几个文件来将应用程序标记为看起来像您自己的网站。所有的功能都是内置的。它被称为 Simple2FTP，可以在 www.Simple2ftp.com 找到

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T18:11:26.340

维护 ftp 服务器并非易事。网络上有各种 Dropbox 类型的服务，它们非常易于使用。

# iphone - 无法将数据写入 NSOutputStream

> ID：11333695
> 
> 赞同：1
> 
> 时间：2012-07-04T18:05:22.060
> 
> 标签：iphone, objective-c, ios, cocoa-touch, nsoutputstream

我正在尝试使用 NSOuptutStream 的写入方法将大型图像从服务器发送到客户端。但是我发现在写入 684032 字节后，流不再写入字节。我觉得这特别奇怪。我能够发送尺寸 < 680432 的图像并在客户端正确接收它们。下面附上代码片段。如果有人能指出我到底哪里出错了，那就太好了。

```
UIImage *img;
img = [UIImage imageWithContentsOfFile:path];
NSMutableData *imgData = [UIImageJPEGRepresentation(img, 1.0) mutableCopy];

const void *bytes = [imgData mutableBytes];
NSInteger length = [imgData length];
self.bufferLimit = length;
NSLog(@"self.bufferoffset %d self.bufferlimit %d", self.bufferOffset, self.bufferLimit);

uint8_t *crypto_data = (uint8_t *)bytes;                   
NSInteger   bytesWritten;

if([self.outputStream hasSpaceAvailable]) {
    NSLog(@"Space Available");
} else NSLog(@"Space Not Available");

while (self.bufferOffset < self.bufferLimit) {

    bytesWritten = [self.outputStream write:(uint8_t *)crypto_data maxLength:1024];
    NSLog(@"server: bytes weritten %d",bytesWritten);
    assert(bytesWritten != 0);
    if (bytesWritten == -1) {
        [self stopSendWithStatus:@"output buffer write error"];
    } else {
        self.bufferOffset += bytesWritten;
    }
    NSLog(@"self.bufferoffset %d self.bufferlimit %d", self.bufferOffset, self.bufferLimit);
} 
NSLog(@"Done sending");
[self.outputStream close]; 
```

当我的代码挂起时，这是我留下的输出

...
2012-07-04 13:53:20.903 BasicClientServer[1707:f803] self.bufferoffset 681984 self.bufferlimit 1334301
2012-07-04 13:53:20.903 BasicClientServer[1707:f803] 服务器：写入字节数 1024
2012- 07-04 13:53:20.904 BasicClientServer[1707:f803] self.bufferoffset 683008 self.bufferlimit 1334301
2012-07-04 13:53:20.905 BasicClientServer[1707:f803] 服务器：写入的字节数 1024
2012-07-04 13： 53:20.906 BasicClientServer[1707:f803] self.bufferoffset 684032 self.bufferlimit 1334301

并且不会超出这一点

# c++ - OpenCV 网络 (IP) 相机帧数在初始连拍后每秒变慢

> ID：11333698
> 
> 赞同：4
> 
> 时间：2012-07-04T18:05:29.180
> 
> 标签：c++, opencv, ubuntu-12.04, ip-camera

编辑：升级到 OpenCV 2.4.2 和 FFMPEG 0.11.1 似乎已经解决了所有的错误和连接问题，但它仍然没有解决帧速率下降的问题。

我在 Ubuntu 12.04 中使用默认的 OpenCV 包，我相信它是 2.3.1。我正在连接流式传输 MJPEG 的 Foscam FI8910W。我已经看到人们说最好的方法是使用 opencv+libjpeg+curl，因为[它比 gstreamer 解决方案更快](http://opencv-users.1802565.n2.nabble.com/Integration-of-Gstreamer-with-Opencv-code-td7196046.html)。但是，我偶尔（50% 的时间）可以在构建时从 OpenCV 连接到摄像头并获取视频流。该流以大约 30 fps 的速度开始大约 1 秒，然后减慢到 5-10 fps。我正在进行的项目将需要 6 台摄像机，最好以 15-30 fps 的速度运行（越快越好）。

以下是我的问题：

1.  这是 2.4.2 中修复的问题，我应该升级吗？
2.  如果没有，有什么想法为什么我会短暂爆发然后变慢？
3.  最好的解决方案仍然是使用 curl+libjpeg 吗？
4.  我看到很多人说已经发布了解决方案，但很少有实际链接到带有解决方案的帖子。[根据http://opencv-users.1802565.n2.nabble.com/IP-camera-solution-td7345005.html](http://opencv-users.1802565.n2.nabble.com/IP-camera-solution-td7345005.html)在一个地方引用所有实际解决方案（包括 curl 和 gstreamer）将非常方便。

这是我的代码：

```
 VideoCapture cap;
  cap.open("http://10.10.1.10/videostream.asf?user=test&pwd=1234&resolution=32");
  Mat frame;
  cap >> frame;
  wr.open("test.avi", CV_FOURCC('P','I','M','1'), 29.92, frame.size(), true);
  if(!wr.isOpened())
  {
    cout << "Video writer open failed" << endl;
    return(-1);
  }
  Mat dst = Mat::zeros(frame.rows + HEADER_HEIGHT, frame.cols, CV_8UC3);
  Mat roi(dst, Rect(0, HEADER_HEIGHT-1, frame.cols, frame.rows));
  Mat head(dst, Rect(0,0,frame.cols, HEADER_HEIGHT));
  Mat zhead = Mat::zeros(head.rows, head.cols, CV_8UC3);
  namedWindow("test", 1);
  time_t tnow;
  tm *tS;
  double t1 = (double)getTickCount();
  double t2;
  for(int i = 0; i>-1 ; i++) // infinite loop
  {
    cap >> frame;
    if(!frame.data)
      break;
    tnow = time(0);
    tS = localtime(&tnow);
    frame.copyTo(roi);
    std::ostringstream L1, L2;
    L1 << tS->tm_year+1900 << " " << coutPrep << tS->tm_mon+1 << " ";
    L1 << coutPrep << tS->tm_mday << " ";
    L1 << coutPrep << tS->tm_hour;
    L1 << ":" << coutPrep << tS->tm_min << ":" << coutPrep << tS->tm_sec;
    actValueStr = L1.str();
    zhead.copyTo(head);
    putText(dst, actValueStr, Point(0,HEADER_HEIGHT/2), fontFace, fontScale, Scalar(0,255,0), fontThickness, 8);
    L2 << "Frame: " << i;
    t2 = (double)getTickCount();
    L2 << "  " << (t2 - t1)/getTickFrequency()*1000\. << " ms";
    t1 = (double)getTickCount();
    actValueStr = L2.str();
    putText(dst, actValueStr, Point(0,HEADER_HEIGHT), fontFace, fontScale, Scalar(0,255,0), fontThickness, 8);
    imshow("test", dst);
    wr << dst; // write frame to file
    cout << "Frame: " << i << endl;
    if(waitKey(30) >= 0)
      break;
  } 
```

以下是正确运行时列出的错误：

```
Opening 10.10.1.10
Using network protocols without global network initialization. Please use avformat_network_init(), this will become mandatory later.
Using network protocols without global network initialization. Please use avformat_network_init(), this will become mandatory later.
[asf @ 0x701de0] max_analyze_duration reached
[asf @ 0x701de0] Estimating duration from bitrate, this may be inaccurate
[asf @ 0x701de0] ignoring invalid packet_obj_size (21084 656 21720 21740)
[asf @ 0x701de0] freeing incomplete packet size 21720, new 21696
[asf @ 0x701de0] ff asf bad header 0  at:1029744
[asf @ 0x701de0] ff asf skip 678 (unknown stream)
[asf @ 0x701de0] ff asf bad header 45  at:1030589
[asf @ 0x701de0] packet_obj_size invalid
[asf @ 0x701de0] ff asf bad header 29  at:1049378
[asf @ 0x701de0] packet_obj_size invalid
[asf @ 0x701de0] freeing incomplete packet size 21820, new 21684
[asf @ 0x701de0] freeing incomplete packet size 21684, new 21836
Using network protocols without global network initialization. Please use avformat_network_init(), this will become mandatory later.
Using network protocols without global network initialization. Please use avformat_network_init(), this will become mandatory later.
[asf @ 0x701de0] Estimating duration from bitrate, this may be inaccurate
Successfully opened network camera
[swscaler @ 0x8cf400] No accelerated colorspace conversion found from yuv422p to bgr24.
Output #0, avi, to 'test.avi':
Stream #0.0: Video: mpeg1video (hq), yuv420p, 640x480, q=2-31, 19660 kb/s, 90k tbn, 29.97 tbc
[swscaler @ 0x9d25c0] No accelerated colorspace conversion found from yuv422p to bgr24.
Frame: 0
[swscaler @ 0xa89f20] No accelerated colorspace conversion found from yuv422p to bgr24.
Frame: 1
[swscaler @ 0x7f7840] No accelerated colorspace conversion found from yuv422p to bgr24.
Frame: 2
[swscaler @ 0xb9e6c0] No accelerated colorspace conversion found from yuv422p to bgr24.
Frame: 3 
```

`Estimating duration from bitrate`有时它在第一个语句之后挂起

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-15T20:59:13.627

您是否尝试过删除写入磁盘的代码？当磁盘缓冲区填满时，我看到 USB 相机的性能问题非常相似。一开始帧率很高，然后急剧下降。

如果这是问题所在，另一种选择是将压缩编解码器更改为压缩更显着的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-23T17:40:48.960

快速初始 FPS 变为慢速 FPS 表明相机正在增加曝光时间以补偿光线不足的主体。相机正在分析前几帧，然后相应地调整曝光时间。

似乎实际的 FPS 是两件事的结合：

1.  硬件限制（定义最大 FPS）
2.  所需曝光时间（定义最低 FPS）

硬件可能具有传输 X FPS 所需的带宽，但光线不足的条件下可能需要曝光时间，从而减慢实际 FPS。例如，如果每帧需要曝光 0.1 秒，则禁食 FPS 为 10。

为了测试这一点，请在相机指向光线不足的对象时测量 FPS，并将其与相机指向光线良好的对象时的 FPS 进行比较。一定要夸大照明条件，并给相机几秒钟的时间来检测所需的曝光。

# c# - 使用 Prism 根据对象类型将视图注入 ItemsControl

> ID：11333701
> 
> 赞同：1
> 
> 时间：2012-07-04T18:05:45.227
> 
> 标签：c#, wpf, silverlight, mvvm, prism

我有一个服务返回 BaseItem 类型的数组。BaseItem 有 N 个子类型。我正在我的 WPF 应用程序（Prism、MVVM）中从视图模型中使用此服务。在这个视图模型的构造函数中，我填充了一个 BaseItem 类型的可观察集合：

```
public CurrentViewModel(IDataService dataService) 
{ 
    _dataService = dataService

    var baseItems = _dataService.GetAllItems(); // there are many kinds of BaseItems
    _baseItems = new ObservableCollection<BaseItem>(baseItems.ToList()); 
} 
```

到现在为止还挺好。在我的`CurrentView`我有一个`ItemsControl`绑定到这个集合的。在这个控件中，我想`BaseItem`通过使用另一个`View`（及其视图模型）来呈现每个。

到目前为止，我无法使用`DataTemplateSelector`，因为我无法在其中定义每个 DataTemplate，我正在加载 N 个模块（其中包含从 继承的类`BaseItem`）并且 PRISM 从特定文件夹动态加载它们。

我正在使用视图模型优先方法，我还需要哪些其他替代方案来实现该场景？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T07:28:03.650

只需将您的数据模板资源作为资源字典从您的模块中导出，并将特定子类型作为 DataType。我使用 MEF 执行此操作，并在我的主应用程序中合并此资源字典。现在 WPF 知道所有数据模板/视图，并且 itemscontrol 呈现您想要的每个子类型视图模型。

编辑：

模块1.dll

```
public class Modul1VM : BaseItemViewModel {} 
```

使用 MEF 导出的 modul1.dll 中的 ResourceDictionary

```
<DataTemplate DataType="{x:Type local: Modul1VM}">
 <view:Yourmodul1View/>
</DataTemplate> 
```

模块2.dll

```
public class Modul2VM : BaseItemViewModel {} 
```

使用 MEF 导出的 modul2.dll 中的 ResourceDictionary

```
<DataTemplate DataType="{x:Type local: Modul2VM}">
 <view:Yourmodul2View/>
</DataTemplate> 
```

你的主应用

*   合并所有导出的资源字典

应用程序.xaml.cs

```
 [ImportMany("Resourcen", typeof (ResourceDictionary))] 
 private IEnumerable<ResourceDictionary> _importResourcen; 
```

启动时

```
 foreach (var resourceDictionary in _importResourcen)
 {
     this.Resources.MergedDictionaries.Add(resourceDictionary);
 } 
```

您的 itemscontrol 只需要 BaseItemViewModels 的集合作为 itemssource

# php - 在没有 API 支持的情况下使用 PHP 发布到 Twitter/微博（发布表单欺骗？）

> ID：11333704
> 
> 赞同：1
> 
> 时间：2012-07-04T18:06:10.167
> 
> 标签：php, forms, api, post, twitter

我正在尝试制作一个 PHP 脚本，它可以发布到新浪微博上的群组，这是一个中文 Twitter 克隆。除了群组功能之外，微博在实现上（甚至在 API 中）似乎与 Twitter 几乎相同——因此我提到 Twitter 作为类比，因为区别与我的问题无关。

我可以通过 API 定期发帖，但问题是，微博的 API 不支持发帖到群组，大概是由于可能带来的潜在垃圾邮件危害。（注意：我的目的不是向数百万垃圾发送垃圾邮件，而是要获得一个脚本，以每天自动将专利到期信息发布给相关行业团体。）

现在，我知道应该有一个变通办法，因为有一个应用程序允许一个人手动发布到群组（新浪微自动群发精灵），尽管来源是私人的。因此，我尝试使用 Firebug 检查发送到服务器的表单数据，以查看是否可以通过手动使 PHP 脚本复制表单信息来替换 API 推文命令，但无济于事。

这是我在建立 OAuth 连接后调用的 callback.php 文件的代码。发布更新的有效 API 方法已被注释掉，以支持功能失调的发布表单方法（在 HTML 标记中）。

```
<?php
session_start();
include_once( 'config.php' );
include_once( 'saetv2.ex.class.php' );
$o = new SaeTOAuthV2( WB_AKEY , WB_SKEY );

if (isset($_REQUEST['code'])) {
    $keys = array();
    $keys['code'] = $_REQUEST['code'];
    $keys['redirect_uri'] = WB_CALLBACK_URL;
    try {       $token = $o->getAccessToken( 'code', $keys ) ;  } catch (OAuthException $e) {}
}

if ($token) {
    $_SESSION['token'] = $token;
    setcookie( 'weibojs_'.$o->client_id, http_build_query($token) );

    ?><html><head></head><body>
    <form action="http://www.weibo.com/aj/mblog/add?__rnd=1340066897833" method="post">
    <input type="hidden" name="_surl" value="">
    <input type="hidden" name="_t" value=0>
    <input type="hidden" name="location" value="home">
    <input type="hidden" name="module" value="stissue">
    <input type="hidden" name="pic_id" value="">
    <input type="hidden" name="rank" value="">
    <input type="text" name="text" value="测试发表微博 test message" />
    <input type="submit">
    </form></body></html><?

    /*
    $c = new SaeTClientV2( WB_AKEY , WB_SKEY , $_SESSION['token']['access_token'] );
    $msg = $c->update("测试发表微博 test message");
    if ($msg === false || $msg === null){   echo "Error occured";   return false;}
    if (isset($msg['error_code']) && isset($msg['error'])){ echo ('Error_code: '.$msg['error_code'].';  Error: '.$msg['error'] );   return false;} 
    echo($msg['id']." : ".$msg['text']." ".$msg["created_at"]);
    */

    } else echo('授权失败。 authentication failed');
?> 
```

我对这一切都很陌生，所以我可能遗漏了一些明显的东西，但是这里有没有人足够了解 Twitter/Weibo 来找到这里的问题？也许会有一个简单的解决方法？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T07:14:09.127

Been a while, but for anyone stumbling upon this thread: by now I caught up a bit, and it seems like browser automation with Ruby gem Watir would have much better chances of working than form spoofing.

# php - 数据提供者和关系 (Yii)

> ID：11333707
> 
> 赞同：2
> 
> 时间：2012-07-04T18:06:32.430
> 
> 标签：php, yii

我今天正在努力解决一个[问题](https://stackoverflow.com/questions/11330040/extract-data-from-relations)，但我自己设法解决了它。现在我有另一个问题。我发现在这种情况下最好使用 CActiveDataProvider 类。这是我的 DataProvider 的代码：

```
$dataProvider=new CActiveDataProvider('Category', array(
            'criteria'=>array(
                'with'=>array('products'),
                'condition'=>'t.id=1',
            ),
)); 
```

然后我将此数据提供程序传递给一个小部件，但无法访问它的值。如果有人可以，请指导我完成整个过程。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T23:22:20.140

在 Yii 社区的帮助下得到了它（谢谢 :)）
这是控制器的代码：

```
$dataProvider=new CActiveDataProvider('Product', array(
    'criteria'=>array(
            'with'=>array('category'),
                'condition'=>'category.id=:id',
                'params'=>array(':id'=>$id),
    ),
)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T18:13:27.237

好吧，这取决于您的小部件需要什么。 `CActiveDataProvider`是一个包装器，`CActiveRecord`具有扩展的**排序、分页和过滤功能。**通常`CActiveDataProvider`与 zii 小部件一起使用，`CListView`或者`CGridView`正在使用其排序和搜索功能。

因此，如果您想通过（可选）排序/过滤/分页以列表或表格的形式显示数据 - 在 Yii 中最方便的方法是使用描述的 zii 小部件或其扩展。

如果您只需要获取数据并以任何其他方式使用它，但没有`CListView`or `CGridView`- use提供的智能渲染机制`CActiveRecord`，因为它除了获取数据之外不执行任何其他操作。

> 我发现在这种情况下最好使用 CActiveDataProvider 类

你同样可以`CActiveRecord`用来做关系的魔法

# android - 我的 android 应用程序不断强制关闭

> ID：11333708
> 
> 赞同：-3
> 
> 时间：2012-07-04T18:06:34.707
> 
> 标签：android

我在 Eclipse 中的代码没有错误，但是当我在我的设备上运行它时，它说：“不幸的是，SMSFree 已停止。”

这是我的日志猫的副本：

```
07-04 10:57:11.773: E/AndroidRuntime(17647): Caused by: java.lang.NullPointerException 
```

这是我的源代码的副本：

```
package com.johnnydicamillo.freesms;

import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.webkit.WebView;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemSelectedListener;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.EditText;
import android.widget.Spinner;

public class SMSFreeActivity extends Activity implements
        OnItemSelectedListener, OnClickListener {
    /** Called when the activity is first created. */
    Button send;
    EditText message, number;
    WebView wv;
    Spinner spinner;
    String[] carriers = { "Sprint", "Verizon", "AT&T", "Boost", "T-Mobile" };
    String carrierAddy;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    send = (Button) findViewById(R.id.bSend);
    message = (EditText) findViewById(R.id.etMessage);
    number = (EditText) findViewById(R.id.etNumber);
    wv = (WebView) findViewById(R.id.wvGmail);
    wv.getSettings().setJavaScriptEnabled(true);
    wv.getSettings().setLoadWithOverviewMode(true);
    wv.getSettings().setUseWideViewPort(true);
    wv.getSettings().setBuiltInZoomControls(true);
    send.setOnClickListener(this);
    try {
        wv.loadUrl("http://www.gmail.com");
    } catch (Exception e) {
        e.printStackTrace();
    }
    ArrayAdapter<String> adapter = new ArrayAdapter<String>(
            SMSFreeActivity.this, android.R.layout.simple_spinner_item,
            carriers);
    spinner.setAdapter(adapter);
    spinner.setOnItemSelectedListener(this);
}

public void onItemSelected(AdapterView<?> arg0, View arg1, int arg2,
        long arg3) {
    // TODO Auto-generated method stub
    int position = spinner.getSelectedItemPosition();
    switch (position) {
    case 0:
        carrierAddy = "@messaging.sprintpcs.com";
        break;
    case 1:
        carrierAddy = "@vtext.com";
        break;
    case 2:
        carrierAddy = "@txt.att.net";
        break;
    case 3:
        carrierAddy = "@myboostmobile.com";
        break;
    case 4:
        carrierAddy = "@tmomail.net";
        break;
    }
}

public void onNothingSelected(AdapterView<?> arg0) {
    // TODO Auto-generated method stub

}

public void onClick(View v) {
    // TODO Auto-generated method stub

    }
} 
```

我假设没有人会出于尊重而窃取此代码。谢谢你们的帮助。我正在开始android开发人员。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T18:08:24.783

I don't see where your define `spinner` in your onCreate(). You need something like

```
spinner = (Spinner) findViewById(R.id.spinner); 
```

before:

```
spinner.setAdapter(adapter);
spinner.setOnItemSelectedListener(this); 
```

# java - 以编程方式设置 java.system.class.loader

> ID：11333709
> 
> 赞同：5
> 
> 时间：2012-07-04T18:06:35.757
> 
> 标签：java, classloader

目前我正在使用 bat 文件来启动我的 jar 并设置 java.system.class.loader。是否可以以编程方式执行此操作以摆脱 bat 文件？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-04T18:08:05.257

您不能，因为在执行程序的第一行之前使用了系统类加载器。

您可以为某些类使用不同的类加载器，但不能从正在运行的程序中更改系统类加载器。

# java - 在 python 或 java 或 Linux 或 Win7 上的其他东西中将大型 ASCII 转换为 CSV 文件

> ID：11333715
> 
> 赞同：-4
> 
> 时间：2012-07-04T18:07:21.110
> 
> 标签：java, php, python, csv, ascii

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T19:04:55.080

在python中应该是这样的。

```
import csv
fo = csv.writer(open('out.csv','wb'))
with open('eg.txt', 'r') as f:
    for line in f:
        assert line[:3] == '00I'
        buf = []
        for i in range(88):
            line = f.next()
            buf.append(line.strip()[2:])

        line = f.next()
        assert line[:3] == 'A00'
        line = f.next()
        assert line[:3] == 'A10'
        line = f.next()
        assert line[:3] == 'A21'
        fo.writerow(buf) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T19:14:54.430

如果您*绝对确定*每个条目是 92 行长：

```
from itertools import izip
import csv

with open('data.txt') as inf, open('data.csv','wb') as outf:
    lines = (line[2:].rstrip() for line in inf)
    rows = (data[1:89] for data in izip(*([lines]*92)))
    csv.writer(outf).writerows(rows) 
```

# facebook - fetch user facebook information on external website

> ID：11333720
> 
> 赞同：2
> 
> 时间：2012-07-04T18:07:49.273
> 
> 标签：facebook, authentication, facebook-javascript-sdk, facebook-login

i want to impelment the same technique as stik.com has, if a user is logged into facebook they automatically fetch the user information without any approval, they just relaod the website.

How to do that?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T18:12:09.807

参考：[https ://developers.facebook.com/docs/reference/javascript/](https://developers.facebook.com/docs/reference/javascript/)

`"session user"` 您可以使用上面提供的**sdk**、*javascript*之一获取用户信息。 **注意：** 您仍然需要至少向用户请求基本权限才能获取当前用户的姓名、ID 等；

有关集成指南，请参阅：[https ://developers.facebook.com/docs/guides/web/。](https://developers.facebook.com/docs/guides/web/)

# php - How can I reload a php file with Ajax?

> ID：11333731
> 
> 赞同：-1
> 
> 时间：2012-07-04T18:08:57.733
> 
> 标签：php, javascript, ajax, text, external

I have a php file that's create a .txt file with name of some photos. But constantly new photos are being added to the images folder. On my index page, I have a javascript function that call the ajax function, because I don't want to reload the page. I just want to request again the php file to recreate the .txt file with the name of all photos again. Can someone help me with the ajax?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T18:32:27.927

我会为此使用 JQuery，因为它会变得容易得多。

```
$.ajax({
  url: 'path/createtextfile.php',
  success: function(data) {
    alert('textfile created');
  }
}); 
```

就目前而言，它从 createtextfile.php 返回结果并发出警报。

但是，如果您的文件返回列表中所有图片的名称（当然是分隔的）

例子：`name1, name2, name3`

然后，您可以将此列表分解为一个数组并再次使用 JQuery 创建 html 元素以显示名称。

# c# - 如何让 AutoMapper 不缓存映射对象？

> ID：11333732
> 
> 赞同：24
> 
> 时间：2012-07-04T18:09:09.757
> 
> 标签：c#, .net, automapper

当 AutoMapper 遇到一个已经被映射的对象时，它似乎会再次使用该对象，而不是尝试重新映射它。我相信它是基于`.Equals()`.

我有一棵正在映射的树。所以，一个具有一些属性和子节点的节点。多个节点具有相同的 值`.Equals()`，因为它基于 Id 属性。节点的子节点不同，我需要重新映射这些节点，但它使用的是缓存的映射值。

有没有办法关闭缓存的映射？我能想到的只是实现一个新的转换器，但这完全违背了使用 AutoMapper 的目的。

这是有关如何重现的示例。

```
void Main()
{
    var source = new List<Tag>
    {
        new Tag 
        { 
            Id = 1, 
            Name = "Tag 1", 
            ChildTags = new List<Tag>
            {
                new Tag 
                { 
                    Id = 2, 
                    Name = "Tag 2", 
                    ChildTags = new List<Tag> 
                    {
                        new Tag {Id = 3, Name = "Tag 3"},
                        new Tag {Id = 4, Name = "Tag 4"}
                    }
                }
            }
        },
        new Tag { Id = 1, Name = "Tag 1" },
        new Tag 
        {
            Id = 3, Name = "Tag 3", ChildTags = new List<Tag>
            {
                new Tag {Id = 4, Name = "Tag 4"}
            }
        }
    };

    Mapper.CreateMap<Tag, Tag>();
    var results = Mapper.Map<IList<Tag>, IList<Tag>>(source);

    results.Dump();
}

public class Tag
{
    public int Id { get; set; }
    public string Name { get; set; }
    public IEnumerable<Tag> ChildTags { get; set; }

    public override bool Equals(Object obj)
    {
        if (obj == null)
        {
            return false;
        }

        var x = this;
        var y = (Tag)obj;

        return x.Id.Equals(y.Id);
    }

    public override int GetHashCode()
    {
        return Id.GetHashCode();
    }
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2015-03-23T16:05:58.243

现在有一个选项可以禁用缓存。

```
Mapper.CreateMap<Tag, Tag>();
var results = Mapper.Map<IList<Tag>, IList<Tag>>(source, opt => opt.DisableCache = true); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-15T08:30:07.507

我在映射器上遇到了同样的问题，环顾四周，我发现了一个解决方案，通过添加

```
Mapper.Reset(); 
```

[源博客](http://blog.cymen.org/2011/06/17/automapper-and-mapper-reset)（更正的 URL）

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-28T09:18:57.457

我也遇到同样的问题。当您映射同一个对象两次时不会发生这种情况 - 当您具有对象的树继承关系时会发生这种情况，并且树的两个位置存在相同的值（但具有不同的子值）映射项目的第二个实例时- 它使用第一个实例的子值，而不是重新评估子值应该是什么。

这是我的例子：

```
class Tag { 
  int Id {get; set;}
  string Name {get; set;}
  IEnumerable<Tag> ChildTags  {get; set;}
}

public void Test()
{
var source =  new List<Tag>
            {
                new Tag { Id = 1, Name = "Tag 1", ChildTags = new List<Tag>
                            {
                                new Tag { Id = 2, Name = "Tag 2", ChildTags = new List<Tag> 
                                            {
                                                new Tag {Id = 3, Name = "Tag 3"},
                                                new Tag {Id = 4, Name = "Tag 4"}
                                            }
                                    }
                            }
                    },
                new Tag { Id = 1, Name = "Tag 1" },
                new Tag {
                        Id = 3, Name = "Tag 3", ChildTags = new List<Tag>
                            {
                                new Tag {Id = 4, Name = "Tag 4"}
                            }
                    }
            };

Mapper.CreateMap<Tag, Tag>()
    .ForMember(dest => dest.ChildTags,
        opt => opt.MapFrom(src => src.ChildTags));
var result = Mapper.Map<IList<Tag>, IList<Tag>>(tags);
} 
```

结果中

*   标签 1 的第一个实例（即 source[0]）及其所有子对象都是完美的

*   标签 1 的第二个实例（即 source[1]）具有第一个实例的所有子级 - 它不应该有任何子级

*   标记 3 的第二个实例（即源 [2]）没有任何子级 - 它应该有标记 4 作为子级

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-20T08:19:08.127

> 当 AutoMapper 遇到一个已经被映射的对象时，它似乎会再次使用该对象，而不是尝试重新映射它。我相信它是基于 .Equals()

你能解释一下为什么以及什么时候看到的吗？

快速查看源代码后，我确定没有对象缓存。这是一个说明这一点的测试：

```
 public class CustomerSource
    {
        public string FirstName { get; set; }
        public string LastName { get; set; }
        public DateTime DateOfBirth { get; set; }

        public int NumberOfOrders { get; set; }
    }

    public class CustomerTarget
    {
        public string FirstName { get; set; }
        public string LastName { get; set; }
        public DateTime DateOfBirth { get; set; }

        public int NumberOfOrders { get; set; }
    }

    [TestMethod]
    public void Test_AutoMapper()
    {
        Mapper.CreateMap<CustomerSource, CustomerTarget>();

        var source = new CustomerSource() { DateOfBirth = DateTime.Now, FirstName = "FirstName", LastName = "LastName", NumberOfOrders = int.MaxValue };

        var res1 = Mapper.Map<CustomerSource, CustomerTarget>(source);
        Console.WriteLine(res1.FirstName); // PRINT FirstName

        source.FirstName += "[UPDATED]";
        source.LastName += "[UPDATED]";

        var res2 = Mapper.Map<CustomerSource, CustomerTarget>(source);
        Console.WriteLine(res1.FirstName); // PRINT FirstName[UPDATED]

    } 
```

没有你的代码，很难深入。还有一个方法 Mapper.Reset() 清除 MapperEngine 和 MapingConfiguration （所有内部映射表达式都会丢失）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-12T14:43:14.407

您正在映射的树对象的 Equals 行为似乎不合适。

仅当“指定对象等于当前对象”时，该方法才应返回 true。- [http://msdn.microsoft.com/en-us/library/bsc2ak47.aspx](http://msdn.microsoft.com/en-us/library/bsc2ak47.aspx)

在您的情况下，您有两个树对象共享相同的 id，但显然，它们不是“相等的”，因为它们有不同的孩子。

我建议看看为什么 Equals 方法以这种方式被滥用，以及是否可以通过不覆盖 Equals 方法来获得所需的行为，而是使用不同的方法来检查具有更合适名称的树 id 字段，例如。TreeIdsAreEqual。

# javascript - 将动画应用于已动态添加的新元素

> ID：11333736
> 
> 赞同：-1
> 
> 时间：2012-07-04T18:09:18.997
> 
> 标签：javascript, jquery, html

我目前拥有的代码是这样的。

```
function update (){
    latest_id = $('#image:first').data('position'); /* == 12 */
    $.ajax({
        type: "POST",
        url: "../web/update/" + latest_id + "",
        success: function(data) {
            $('#my_like').after(data);
            $('.newly-added').animate({"margin-left": "+=66px"}, "fast");
        },
        error: function(response) {
            alert("failed");
        },
    });
}

setInterval(function() {
  update();
}, 4000); 
```

但是因为元素是新添加的，所以它不会收到新的动画部分。我做了一些研究，发现 .live 但需要一些东西来启动它，例如点击。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T18:17:01.720

已修复，我包含的 jquery 存在问题。

# google-maps - How to enable the user of my site change the route established by the Google Maps?

> ID：11333739
> 
> 赞同：0
> 
> 时间：2012-07-04T18:09:32.790
> 
> 标签：google-maps

Sorry, if this question has been answered, but didn't find. I use the Google Maps API on my site, but I can't change the route outlined by Google. For example, the user establishes a starting point and an ending point; the route is traced and it included establishments (points/markers created by me). But the planned route isn't always the best for the user, who wants to drag it to the best way, and according he was dragging the route, the points of establishments were fading (those not included in the current route) and other be appearing (these included on the current route). Is this possible? Thak you in advance. Regards.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T18:39:29.097

创建`DirectionsRenderer`对象时，请使用选项`draggable:true`. 设置新路线后，重新计算您的兴趣点。

相关的 SO 问题：[谷歌地图保存可拖动的方向](https://stackoverflow.com/questions/4657860/google-maps-saving-dragable-directions)

文档：[https ://developers.google.com/maps/documentation/javascript/reference#DirectionsRendererOptions](https://developers.google.com/maps/documentation/javascript/reference#DirectionsRendererOptions)

# javascript - how to get the contents of ok i am very new to this. and iv been trying to figure out how to get the value of title with pure javascript and i believe xpath might work best speed w 问问题 问问题 2012-07-04T18:09:44.577 2935 次 This question shows research effort; it is useful and clear 0 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. ok i am very new to this. and iv been trying to figure out how to get the value of title with pure javascript and i believe xpath might work best speed wise.

*   Value: $60,760,150,000 M

this is the full xpath expression html/body/div[3]/div[2]/div[3]/div[15]/div[1]/div/div[1]/div/div[1]/div[1]/ul[1]/li[1]/span[2]/span/span what i will want to do is use imacros and this script to get the number in quotes to determine rather to click a button. so if the number is to high it will wait until it is smaller then continue. but right now i just need to figure out how to get the value of title. this is the link to the page i want to run it on. http://www.tagged.com/apps/pets.html#cashruns/3646/ Generally speaking, float is a relative positioning statement, since it specifies the position of the element relative to its parent container (floating to the right or left). This means it's incompatible with the position:absolute property, because position:absolute is an absolute positioning statement. You can either float an element and allow the browser to position it relative to its parent container, or you can specify an absolute position and force the element to appear in a certain location. Specifically, an element with position:absolute will be placed at whatever offset you specify (with left, right, top, or bottom) from the position of its nearest ancestor (containing element) with a position property, regardless of whether it has a float property or not. If it doesn't have any ancestors with a position property, it will be placed at your specified offset from the edge of the screen. If you want an absolutely-positioned element to appear on the right side of its parent div, you can use position: absolute; right: 0; -- as long as the parent div has a position property such as position:relative. If the parent div doesn't have a position property, though, this won't work, and you'll need to stick to float:right. javascriptxpathtitlehtmlimacros 4 3 回答 3 This answer is useful 0 要使用 javascript 评估 xpath，您可以使用document.evaluate()函数。你可以在这里获得更多信息。 function getSpanTitle() { var result = document.evaluate("//span[@class='shorthand shorthand-m']/span/@title", document, null, XPathResult.ANY_TYPE, null); var title = result.iterateNext(); alert(title.textContent); } 另请注意，我使用了相对 xpath，因为//span[@class='shorthand shorthand-m']/span/@title它比绝对 XPath 更健壮。 于 2012-07-05T04:57:55.237 回答 This answer is useful 0 你可以抓取html标签 tag pos=1 type=span attr=title:* extract=htm 然后在eval中使用 javascript slice() 方法提取所需的数据 于 2012-12-27T22:19:37.553 回答 This answer is useful 0 使用@attribute-name 选择属性。在您的示例中 //span/@title 可能有效，但您可能会使用更具选择性的 xpath。 某些 XPath 实现不支持属性，因此请参阅 iMacros 文档。 于 2012-07-04T18:40:50.470 回答 Related 1 java - Java 存储输入值 4 java - 观察者主题单例模式？ 1 c# - Win8：隐藏 Toast 通知 2 python - 谷歌端点仅限制对移动客户端的访问 2 emacs - 疲倦的眼睛的emacs字体定制 3 c - C编译-“未定义的引用”？ 2 c# - Selenium WebDriver with ChromeDriver - C# Visual Studio 2012。无法调试 1 c++ - 这适用于任何小于 521153 的数字。这样它就不起作用并返回一个非常大的负数 1 dynamics-crm-2011 - 如何在 crm 2011 中为新实体添加自定义模板？ 1 asp.net - 如果下拉列表在 formview 内并且在运行时填充，则在回发后不保留值 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：11333742
> 
> 赞同：0
> 
> 时间：
> 
> 标签：javascript, xpath, title, html, imacros

ok i am very new to this. and iv been trying to figure out how to get the value of title with pure javascript and i believe xpath might work best speed wise.

```
<ul class="room_info">
    <li>
        <span>Value:</span>
        <span class="value">
            <span class="shorthand shorthand-m">
                <span title="$60,760,150,000,000,000">$60,760,150,000&nbsp;M</span>
            </span>
        </span>
    </li>
    <li>
</ul> 
```

this is the full xpath expression

`html/body/div[3]/div[2]/div[3]/div[15]/div[1]/div/div[1]/div/div[1]/div[1]/ul[1]/li[1]/span[2]/span/span`

what i will want to do is use imacros and this script to get the number in quotes to determine rather to click a button. so if the number is to high it will wait until it is smaller then continue. but right now i just need to figure out how to get the value of title.

this is the link to the page i want to run it on. [http://www.tagged.com/apps/pets.html#cashruns/3646/](http://www.tagged.com/apps/pets.html#cashruns/3646/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T04:57:55.237

要使用 javascript 评估 xpath，您可以使用`document.evaluate()`函数。[你可以在这里](https://developer.mozilla.org/en/Introduction_to_using_XPath_in_JavaScript)获得更多信息。

```
function getSpanTitle() {
   var result = document.evaluate("//span[@class='shorthand shorthand-m']/span/@title", document, null, XPathResult.ANY_TYPE, null);   
   var title = result.iterateNext();   
   alert(title.textContent);
} 
```

另请注意，我使用了相对 xpath，因为`//span[@class='shorthand shorthand-m']/span/@title`它比绝对 XPath 更健壮。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T22:19:37.553

你可以抓取html标签

```
tag pos=1 type=span attr=title:* extract=htm 
```

然后在[eval中使用 javascript](http://wiki.imacros.net/EVAL) [slice() 方法提取所需的数据](http://www.w3schools.com/jsref/jsref_slice_array.asp)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T18:40:50.470

使用@attribute-name 选择属性。在您的示例中 //span/@title 可能有效，但您可能会使用更具选择性的 xpath。

某些 XPath 实现不支持属性，因此请参阅 iMacros 文档。

# python - 如何使用 python 编写 VMS 守护进程？

> ID：11333749
> 
> 赞同：3
> 
> 时间：2012-07-04T18:09:56.097
> 
> 标签：python, daemon, openvms

互联网上有很多关于如何在 unix 中使用 python 创建守护进程的条目，但我找不到任何提及如何在 OpenVMS 中执行此操作的内容。有人知道如何使用 python 在 OpenVMS 中创建守护进程（或 VMS 等效项）吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T14:03:15.477

你只需要像这样运行它：

```
$ run /detach /process=daemon_name python_program 
```

[更多信息在这里](http://h71000.www7.hp.com/doc/83final/9996/9996pro_168.html)

# javascript - 即时调整图像大小并保持纵横比

> ID：11333753
> 
> 赞同：0
> 
> 时间：2012-07-04T18:10:10.637
> 
> 标签：javascript, .net, image, image-processing

我需要调整图像的大小以显示在不同大小的不同页面上，同时保持原始图像的纵横比。

我可以以编程方式进行还是需要预加载不同尺寸的图像

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T18:16:51.960

如果您只设置图像的宽度或高度，而未指定其他尺寸，浏览器将按比例缩放图像，同时保持其纵横比。

工作演示：http: [//jsfiddle.net/jfriend00/NRLQ5/](http://jsfiddle.net/jfriend00/NRLQ5/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T18:15:31.093

如果您使用的是 Css3，则可以使用 transform:scale(scalefactor)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T19:29:12.603

您可以使用System.Web.Helpers 程序集中的[WebImage](http://msdn.microsoft.com/en-us/library/system.web.helpers.webimage%28v=vs.99%29.aspx "网络图像")类。它提供了一个 Resize 方法，它允许您在保持纵横比不变的情况下调整大小

```
公共网络图像调整大小（
    整数宽度，
    整数高度，
    布尔保留纵横比，
    布尔防止放大
)

```

除此之外，您可以使用文件路径、流或字节数组创建 WebImage 实例并轻松添加水印。

```
WebImage image = new WebImage(Server.MapPath("~/upload/my_image.png"));
WebImage image_small_1 = image.Resize(Convert.ToInt32(image.Width / 2), Convert.ToInt32(image.Height / 2), true, true);

```

您可以将图像保存到磁盘，或者如果您的环境允许它存储在缓存中

```
image_small_1.Save(Server.MapPath("~/upload/my_image_small_1.png"), "png", true);

byte[] to_be_cached = image_small_1.GetBytes("png");

```

# javascript - 无限滚动 MySql 拉取的简单方法

> ID：11333754
> 
> 赞同：0
> 
> 时间：2012-07-04T18:10:11.010
> 
> 标签：javascript, mysql, jquery

我在滚动窗口时难以遍历记录。我最初的想法是加载足够的记录以适应屏幕，然后在窗口滚动到底部时加载额外的一组。我尝试使用会话/变量将一些计数器传递给函数，但没有运气。下面的代码返回足够的记录以适应窗口高度，但限制为 0,10。解决这个问题的简单方法是什么？

另一个问题是我应该在 Mysql 查询中使用 LIMIT 还是 ID > + LIMIT ？

```
$(function(){

setInterval(function(){

var totalHeight, currentScroll, visibleHeight;

if (document.documentElement.scrollTop)
{ currentScroll = document.documentElement.scrollTop; }
else
{ currentScroll = document.body.scrollTop; }

totalHeight = document.body.offsetHeight;
visibleHeight = document.documentElement.clientHeight;

if (totalHeight <= currentScroll + visibleHeight )
  {

    $.get('infinite_pull.php', function(data) {
      $('body').append(data);
      //alert('Load was performed.');
    });

  }
  else
  {
  $('.dd').css('background-color','white');
  }  
            }
, 100);

}); 
```

PHP

```
<?php
    session_start();
    mysql_connect('localhost','root','');
    mysql_select_db('project5');

    $query = "select user_email from users limit 0,10;";
    $results= mysql_query($query);

    while($row = mysql_fetch_array($results)){ 
        echo $row['0'] . '<br/>';
    }

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T18:33:55.140

多次调用 php 文件听起来很糟糕，所有这些开销都比一次获得所有这些更糟糕。你不能只计算你需要多少，然后问那个数字吗？

```
<?php
    $from = (int) $_GET['from'];
    $count = (int) $_GET['count'];

    mysql_connect('localhost','root','');
    mysql_select_db('project5');

    $query = "select user_email from users limit {$from},{$count};";
    $results= mysql_query($query);

    while($row = mysql_fetch_array($results)){ 
        echo $row['0'] . '<br/>';
    }

?> 
```

我还认为您应该添加一个顺序，以确保结果始终以相同的顺序排列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T18:37:48.683

使用`LIMIT`，它结合了偏移量（第一个参数）和要获取的行数（第二个参数）。这是一个简短的分页示例，每次获取 7 个 100 个数字的第 7 页。

```
<?php

$arr = array();
for ( $x = 0; $x < 100; $x += 1 ) {
    $arr[] = $x;
};

$page = 7;
$per_page = 7;
$current_page = 1;

for ( $z = 0; $z < count( $arr ); $z += 1 ) {
    if ( 0 === ( $z % $per_page ) ) {
        $current_page += 1;
    }
    if ( $current_page === $page ) {
        $num_results = $current_page * $per_page;
        $query = "select user_email from users limit {$num_results},{$per_page};";
        echo "value $z on page $page via $query \n";
    }
}

?> 
```

输出：

```
$ php pagination.php 
value 35 on page 7 via select user_email from users limit 49,7; 
value 36 on page 7 via select user_email from users limit 49,7; 
value 37 on page 7 via select user_email from users limit 49,7; 
value 38 on page 7 via select user_email from users limit 49,7; 
value 39 on page 7 via select user_email from users limit 49,7; 
value 40 on page 7 via select user_email from users limit 49,7; 
value 41 on page 7 via select user_email from users limit 49,7; 
```

# ios - 试图将文本从 tableview 传递到带有地图的视图

> ID：11333762
> 
> 赞同：0
> 
> 时间：2012-07-04T18:10:42.453
> 
> 标签：ios, uitableview, map, title

我有一个 UITableView 可以打开一个带有地图的视图，我称之为 Mapa 类。我在将此表视图中的任何类型的文本信息传递到地图时遇到问题。我需要发送一个字符串文本作为我的地图标题和 CLLocation 的坐标。

这是部分代码

MyTableView.m：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

    instMapa = [[Mapa alloc] initWithNibName:@"Mapa" bundle:nil];
    instMapa.mytext = @"pass text to be the title";
    [self.navigationController pushViewController:instMapa animated:YES];

} 
```

映射.h

```
#import <UIKit/UIKit.h>
#import <MapKit/MapKit.h>
#import <MapKit/MKAnnotation.h>

@class MapViewAnnotation;

@interface Mapa : UIViewController <MKMapViewDelegate> {

    IBOutlet MKMapView *mapView;

    NSString *stringTitle;

    NSString *mytext;

    MapViewAnnotation *newAnnotation;

}

@property (nonatomic, retain)   IBOutlet MKMapView *mapView;

@property (nonatomic, retain)   NSString *stringTitle;

@property (nonatomic, retain)   NSString *mytext;

@property (nonatomic, retain)   MapViewAnnotation *newAnnotation;

@end 
```

地图.m

```
#import "Mapa.h"
#import "MapViewAnnotation.h"

@implementation Mapa

@synthesize mapView;

@synthesize stringTitle;

@synthesize mytext;

@synthesize newAnnotation;

// Implement viewDidLoad to do additional setup after loading the view, typically from a nib.
- (void)viewDidLoad {
    [super viewDidLoad];

    CLLocationCoordinate2D location;

    location.latitude = (double) 51.501468;
    location.longitude = (double) -0.141596;

    // Add the annotation to our map view
    newAnnotation = [[MapViewAnnotation alloc] initWithTitle:mytext andCoordinate:location];
    [self.mapView addAnnotation:newAnnotation];

}

// When a map annotation point is added, zoom to it (1500 range)
- (void)mapView:(MKMapView *)mv didAddAnnotationViews:(NSArray *)views
{
    MKAnnotationView *annotationView = [views objectAtIndex:0];
    id <MKAnnotation> mp = [annotationView annotation];
    MKCoordinateRegion region = MKCoordinateRegionMakeWithDistance([mp coordinate], 1500, 1500);
    [mv setRegion:region animated:YES];
    [mv selectAnnotation:mp animated:YES];
}

// Received memory warning
- (void)didReceiveMemoryWarning {
    [super didReceiveMemoryWarning];
}

// If the view unloads, release the map view
- (void)viewDidUnload {

}

- (void)dealloc {

    [newAnnotation release];

    [mytext release];

    [stringTitle release];

    [mapView release];
    [super dealloc];
}

@end 
```

MapViewAnnotation.h

```
#import <Foundation/Foundation.h>
#import <MapKit/MapKit.h>

@interface MapViewAnnotation : NSObject <MKAnnotation> {

    NSString *title;
    CLLocationCoordinate2D coordinate;

}

@property (nonatomic, copy) NSString *title;
@property (nonatomic, readonly) CLLocationCoordinate2D coordinate;

- (id)initWithTitle:(NSString *)ttl andCoordinate:(CLLocationCoordinate2D)c2d;

@end 
```

MapViewAnnotation.m

```
@implementation MapViewAnnotation

@synthesize title, coordinate;

- (id)initWithTitle:(NSString *)ttl andCoordinate:(CLLocationCoordinate2D)c2d {
    [super init];
    title = ttl;
    coordinate = c2d;
    return self;
}

- (void)dealloc {
    [title release];
    [super dealloc];
}

@end 
```

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T18:27:02.637

从你的问题，我明白了；您需要将所选表格视图单元格的字符串值传递给您的地图视图。为此，您需要在您的`didSelectRowAtIndexPath`,

```
UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath];
 instMapa.mytext = cell.textLabel.text; 
```

# d3.js - Leaflet.js+d3.js 带过渡的圆圈

> ID：11333765
> 
> 赞同：2
> 
> 时间：2012-07-04T18:11:06.190
> 
> 标签：d3.js, transition

我正在尝试在 Leaflet.js（一个网络地图应用程序）中绘制圆圈，遵循 [http://bost.ocks.org/mike/leaflet/](http://bost.ocks.org/mike/leaflet/)似乎并不难，但我遇到了奇怪的问题:.( 你可以见这里：[http ://bl.ocks.org/3047025](http://bl.ocks.org/3047025)

事实上，在这里您可以看到简单的圆圈，并且在缩放（双击地图）等情况下可以正常工作。但我希望这些特征是圆圈而不是路径。我认为这是不可能的（？）

我想要圆，这样我就可以应用过渡（从半径 0 到 X，改变颜色，重力），事件等等。

Circles+Leaflet.js 中的这些转换是否可能？据我测试，路径不是。

提前致谢，

佩雷

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T11:16:36.987

Ziggy Johnson 在 d3.js googlegroup 中很好地回答了我的问题。

您可以在[http://bl.ocks.org/3087431中查看它是如何正确完成的](http://bl.ocks.org/3087431)

再次感谢，齐吉！

# php - PHPIniDir 指令导致 apache 崩溃

> ID：11333766
> 
> 赞同：0
> 
> 时间：2012-07-04T18:11:16.907
> 
> 标签：php, apache

我在 Windows XP SP3 上安装了 Apache (httpd-2.2.17-win32-x86-openssl-0.9.8o) 和 PHP (php-5.3.5-Win32-VC9-x86)，当我使用时将 PHPIniDir 放入 Apache配置文件，然后 Apache 将无法启动，它会崩溃，如果我删除了该指令，它可以正常工作，但当然不会读取 PHP 配置。
可能是什么原因造成的，我应该怎么做才能解决它？

这是它在 httpd.conf 中的显示方式

```
#BEGIN PHP INSTALLER EDITS - REMOVE ONLY ON UNINSTALL
LoadModule php5_module "D:/Program Files/PHP/php5apache2_2.dll"
PHPIniDir "D:/Program Files/PHP/"
AddType application/x-httpd-php .php .phtml .html
#END PHP INSTALLER EDITS - REMOVE ONLY ON UNINSTALL 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-26T09:35:32.007

您使用了错误的 PHP 版本。使用 VC6 而不是 VC9（至少对于这个 apache 版本）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-09-24T09:46:18.867

基于[答案](https://stackoverflow.com/a/2947927)

使用记事本或任何文本编辑器打开 php.ini 文件。禁用 php.ini 文件中的所有扩展。逐个评论扩展，找出导致问题的扩展。

# objective-c - 如何在 AVPlayer 中播放 Youtube 视频？

> ID：11333767
> 
> 赞同：1
> 
> 时间：2012-07-04T18:11:19.883
> 
> 标签：objective-c, ios, video, youtube, avplayer

如何将 Youtube 视频流式传输到 AVPlayer？有没有办法获得视频的状态（缓冲、暂停、播放等）？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2016-06-28T11:37:14.677

是的，您可以在 AVPlayer 上播放 YouTube 视频。使用观察者可以确定 AVPLayer 的状态。

例如：

```
let player = AVPlayer(URL: NSURL(string: "http://www.sample.com/movie.mov"))
if (player.rate != 0 && player.error == nil) {
   println("playing")
}

NSNotificationCenter.defaultCenter().addObserverForName(
    AVPlayerItemFailedToPlayToEndTimeNotification, 
    object: nil, 
    queue: nil, 
    usingBlock: { notification in
        self.stop()
    }) 
```

# ruby - 如何重构我的 Sinatra 应用程序？

> ID：11333775
> 
> 赞同：1
> 
> 时间：2012-07-04T18:12:11.680
> 
> 标签：ruby, refactoring, sinatra

我刚刚开始使用 sinatra 编写一个相当简单的网站。我的问题是我想重构主 app.rb 文件，但在尝试访问 url 参数时遇到错误。

在我的 get '/' 操作中，Sinatra 查看设置了哪些参数，然后需要根据 url 中的内容做一些不同的事情。像这样的东西。

```
class App < Sinatra::Application
  ...
  get '/' do
    if params['code1']
      @network = 'code1'
      mode code here
    elsif params['called'] && params['mac']
      @network = 'code2'
      mode code here
    elsif params['code3']
      @network = 'code3'
      mode code here
    end  
  end 
```

问题是我需要一个也使用参数的文件。

我在上面的代码中添加了以下内容：

```
require File.dirname(__FILE__) + '/lib/networks/code1.rb' 
```

其中 code1.rb 包括：

```
class App < Sinatra::Application
  if params['login']  # == 'login'
    pass = 'uampass'
  elsif
  ... 
```

但这给了我以下错误：

```
undefined local variable or method `params' for main:Object 
```

我怎样才能在不导致错误的情况下重构它

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T18:30:16.043

据我所知，您不能在一个应用程序中使用两个（或更多）Sinatra 应用程序。由于两个文件都定义了`Sinatra::Application`后代，这是不可能的。

此外，如果您想使用`params`-hash 中的值，您应该定义帮助方法[Helper Documentation](http://www.sinatrarb.com/intro#Helpers)，您在处理路由时调用它，或者您只需创建具有将参数值作为参数的类或实例方法的类。实际上从另一个文件/类调用参数似乎不是一个好习惯。

将其放在上下文中：Sinatra 应用程序被组织为处理程序。`Sinatra::Application`后代类似于**主**处理程序，它使用*支持*方法（后代的帮助器和实例方法）`Sinatra::Application`或*支持*类，它们通常在其他文件中定义，但不从`Sinatra::Application`.

为了更清楚地说明这一点：

您的*主要*Sinatra 文件：

```
require_relative 'another_file.rb'
class App < Sinatra::Application
  # ...
  @a_handler = MyHandler.new
  get '/' do

    if params['something'] == 'wanted_value'
      @a_handler.handle_it(params)
    end

end 
```

另一个文件（'another_file.rb'）：

```
class MyHandler
  def initialize
    @an_instance_variable = 'foobar'
  end
  def handle_it(params_hash)
    if params_hash['login']  # == 'login'
      pass = 'uampass'
    elsif
     # ...
    end
    # ...
    # do some stuff
    # ....
    return pass
  end
end 
```

实际代码当然取决于您要解决的实际问题，所以如果您能详细说明，我可能会更精确......

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-04T20:04:13.040

错误消息包含您需要知道的所有内容，与 Sinatra 无关。

您需要 code1.rb，其中包含以下内容（稍作编辑以便运行）：

```
require 'sinatra'

class App < Sinatra::Application
  if params['login']  # == 'login'
    pass = 'uampass'
  end
end 
```

Ruby 在遇到代码时对其进行评估。在这种情况下，您需要“code1.rb”，因此它会评估该文件中的代码。它遇到“参数”并询问“是否有具有该名称的局部变量或方法？”。没有，所以正如你所见，它失败了。打开一个 irb 会话并检查它。

ruby 中的类定义只是一个具有范围的表达式。

与 Sinatra 相关：参数在路由声明采用的块中可用。

我建议阅读[Sinatra: Up and Running](http://shop.oreilly.com/product/0636920019664.do)，它解释了正在发生的一些“魔法”（[Sinatra Book](http://sinatra-book.gittr.com/)的好伴侣）。

# javascript - 在sencha touch 2中单击注册表单（register.js）上的提交时如何进入登录表（login.js）

> ID：11333776
> 
> 赞同：0
> 
> 时间：2012-07-04T18:12:15.220
> 
> 标签：javascript, touch, extjs

我正在尝试做一个用户首先需要注册的煎茶触摸应用程序。之后，会弹出一个警报，提示您已注册，当用户按下“确定”按钮时，注册表单 (register.js) 将转到登录表单 (login.js)。

这是我的 register.js：

```
Ext.define('demo.view.Register',{
extend:'Ext.form.Panel',
xtype:'register',

requires:[
    'Ext.form.FieldSet',
    'Ext.field.Email',
    'demo.view.Login'
],
config:{
    title:'Register',
    iconCls:'user',
    url:'doRegister.php',

    items:[
        {
            xtype:'fieldset',
            title:'Registration!!!',

            items:[
                {
                    xtype:'textfield',
                    name:'username',
                    label:'Name'
                },
                {
                    xtype:'passwordfield',
                    name:'password',
                    label:'Password'
                },
                {
                    xtype:'emailfield',
                    name:'email',
                    label:'Email'
                },
                {
                    xtype:'textfield',
                    name:'first_name',
                    label:'First Name'
                },
                {
                    xtype:'textfield',
                    name:'last_name',
                    label:'Last Name'
                }
            ]
        },
        {
            xtype:'button',
            text:'Share',
            ui:'confirm',
            handler: function() {

                // This looks up the items stack above, getting a reference to the first form it see
                var form = this.up('register');

                // Sends an AJAX request with the form data to the url specified above (contact.php).
                // The success callback is called if we get a non-error response from the server
                form.submit({
                    success: function() {
                        Ext.Msg.alert('Status', 'Resgistered Successful!', function(btn, text){
                            if (btn == 'ok'){
                                var redirect = 'login.js';
                                window.location = redirect;
                            }
                        });

                    }
                });
            }
        }
    ]
}
}); 
```

这是我的 login.js：

```
Ext.define('demo.view.Login',{
extend:'Ext.form.Panel',
xtype:'login',

requires:[
    'Ext.form.FieldSet',
    'Ext.field.Email'
],
config:{
    title:'Login',
    iconCls:'user',
    url:'doLogin.php',

    items:[
        {
            xtype:'fieldset',
            title:'Please Login',

            items:[
                {
                    xtype:'textfield',
                    name:'username',
                    label:'username'
                },
                {
                    xtype:'passwordfield',
                    name:'password',
                    label:'password'
                }
            ]
        },
        {
            xtype:'button',
            text:'Login',
            ui:'confirm',
            handler: function() {

                // This looks up the items stack above, getting a reference to the first form it see
                var form = this.up('share');

                // Sends an AJAX request with the form data to the url specified above (contact.php).
                // The success callback is called if we get a non-error response from the server
                form.submit({
                    method:'POST',
                    waitTitle:'Connecting',
                    waitMsg:'Sending data...',
                    success: function() {
                        Ext.Msg.alert('Status', 'Login Successful!', function(btn, text){
                            if (btn == 'ok'){
                                var redirect = 'Share.js';
                                window.location = redirect;
                            }
                        });

                    }
                });
            }
        }
    ]
}
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T03:35:17.473

您可以将两个表单都放在一个带有卡片布局（布局：“卡片”）的容器中，当您想切换到登录表单时，您可以在父容器上调用 setActiveItem(1) .. 最好使用此逻辑的控制器，因此您可以引用该控制器中的所有容器/表单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-30T06:58:43.743

on alert ok button press you can create your login page to the viewport and then navigate to the login page. here is the code :

```
Ext.Msg.alert('Demo', "Register successfully", function(){
    Ext.Viewport.add(Ext.create('demo.view.Login'));
    Ext.Viewport.animateActiveItem(this.getLogin(),{
            type: 'slide',
            direction: 'right'
    });
 }); 
```

# java - 使用 Java 中的原语规避代码膨胀的模式

> ID：11333784
> 
> 赞同：2
> 
> 时间：2012-07-04T18:13:05.627
> 
> 标签：java, performance, design-patterns, primitive, boxing

你好Stackoverflowers，

我有以下问题：

我有一种情况，我得到一组原始数字作为输入。例如 int[] 或 short[] 甚至 byte[]。现在，我需要遍历代码并做一些事情，例如，将数字写入列表。然而，问题是每种类型的数字都需要一个特定的列表。没问题，我想，并尝试使用泛型：

```
Object dataSet = provider.getDataArray();
Number[] copy = new Number[Array.getLength(dataSet)];
for(int i= 0; i < Array.getLength(dataSet); i++) {
    copy[i] = (T) Array.get(dataSet, i);
} 
```

这很好用。但是，问题在于性能。我知道这是无法避免的，因为反射和发生的基元装箱成本很高。我现在正在寻找一种模式来减少代码量，因为写

```
Object dataSet = provider.getDataArray();
Class<? extends Number> dataType = provider.getDataType();

Number[] copy = new Number[dataSet.length];
if(dataType == Float.class) 
    float[] dataSetAsFloat = (float[]) dataSet;
    for(int i= 0; i < dataSet.length; i++) 
        copySet[i] = dataSetAsFloat[i];
else if (dataType == Double.class)
    double[] dataSetAsDouble = (double[]) dataSet;
    for(int i= 0; i < dataSet.length; i++) 
        copySet[i] = dataSetAsFloat[i];    
.... 
```

是一个非常臃肿的解决方案，因为我正在写的程序中的应用程序并不像这里显示的那么简单。基本上，由于这个性能问题，我创建了数百行额外的代码。有针对这个的解决方法吗？也许是我不知道的模式，或者我没有看到的一些非常简单的技巧？

我将非常感谢您的回复。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T18:31:34.847

您是否考虑过根据数据类型选择转换策略的策略模式？虽然它不会减少太多的总代码，但它有助于模块化它。

```
public interface ArrayConversionStrategy<T extends Number> {
    T[] convertArray
}

public class FloatConversionStrategy implements ArrayConversionStrategy<Float>
   float[] convertArray(Object[] dataset) {
     float[] dataSetAsFloat = new float[dataset.length];
      for(int i= 0; i < dataSet.length; i++) 
        dataSetAsFloat [i] = dataset[i];
  }
}

public class DoubleConversionStrategy { ... }
public class LongConversionStrategy { ... } 
```

然后在调用类中有一个数据类型到策略的映射

```
Map<Class<? extends Number>, ArrayConversionStrategy> map;

Object[] dataSet =    provider.getDataArray();
Class<? extends Number> dataType = provider.getDataType();
ArrayConversionStrategy strategy = map.get(dataType)
return strategy.convertArray(dataSet); 
```

我的一些通用语法可能不在此处，并且可能需要进行一些装箱/自动拆箱，但作为一般策略，这可能很有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T18:20:53.110

您可以将 getLong(int)/putLong 用于整数，将 getDouble(int)/putDouble 用于浮点，而不是打开包装器。这将为您提供两种支持所有原语类型的方法。

```
interface Array {
    public long getLong(int idx);
    public double getDouble(int idx);
    public void setLong(int idx, long l);
    public void setDouble(int idx, double d);
}

class ByteProvider implements Array {

}

class IntProvider implement Array { 
```

等等

# extjs - 将面板添加到面板中

> ID：11333785
> 
> 赞同：0
> 
> 时间：2012-07-04T18:13:07.313
> 
> 标签：extjs, extjs4, extjs-mvc, extjs4.1

我的 app.js 中有一个`card`布局设置。这是代码；

```
...
launch: function() {
        var vp = Ext.create('Ext.container.Viewport', {
            layout: 'card',
            items: [
            {
                xtype: 'doctor'
            },
            {
                xtype:'nurse'
            }
            ]
        });
    }, ... 
```

并且，将加载的第一个视图。这是代码；

```
Ext.define('RoyProject.view.user.Doctor', {
    extend:'Ext.form.Panel',
    alias : 'widget.doctor',
    id:'docform', 
    defaultType: 'textfield',
    items: [{       
        fieldLabel: 'Name',
        name: 'name'
        }],
    buttons: [, {
        text: 'Send',
        action:'send'        
    }]
}); 
```

由于我`card`在 app.js 中使用布局，所有第一个视图都被拉伸，并占据了整个屏幕。因此，为了摆脱这一点，我想在其中添加一个`Panel`and`Panel`来添加我的视图（即`RoyProject.view.user.Doctor`）。有人可以帮我将此视图添加到面板中，而无需更改代码的逻辑:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T19:36:27.317

```
launch: function() {
        var vp = Ext.create('Ext.container.Viewport', {
            layout: 'card',
            items: [
            {
                xtype: 'panel',
                items: { xtype: 'doctor' }
            },
            {
                xtype:'nurse'
            }
            ]
        });
    }, ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T20:30:55.210

我认为您正在尝试解决错误的问题。您无需将`doctor`面板封装到另一个面板中。一般来说，将面板嵌套在另一个里面是不好的......

您需要做的是为您的`doctor`面板指定固定宽度或播放其布局以查看哪个更适合您。

# c - 头文件中的枚举类型和结构

> ID：11333787
> 
> 赞同：1
> 
> 时间：2012-07-04T18:13:17.110
> 
> 标签：c, enums, struct, header-files

我有一个头文件`buildTree.h`和一个 C 文件，头文件`buildTree.c`中有一个结构类型定义，我希望结构成员之一是枚举类型

头文件代码为：

```
#define TREE_ITEM_LIMIT 100

typedef enum pType {
    none = 0,
    bool = 1,
    number = 2,
    baud = 3    
}pType;

typedef struct tree {
    // 27 byte size struct
    char longName [13];
    char shortName [5];
    char shortParent [5];
    ptype parameterType;
    void (* handler)(int);
}tree;

extern tree item[TREE_ITEM_LIMIT];
extern tree defaultValues; 
```

如果我随后尝试为 C 文件中的 parameterType 成员分配一个值，则会得到一大堆错误，这些错误基本上说我的结构非常糟糕。真正奇怪的是，如果我再次删除分配，下次编译时错误不会消失！我必须从结构中删除 pType 成员，编译，然后错误就消失了。如果我再次添加它，错误就会消失，直到我再次尝试分配......

猜测我没有正确使用标题中的枚举，但我看不到如何......

编辑：我确实尝试在枚举中注释掉布尔值，以防万一它正在播放但没有改变

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T18:31:19.823

如果这是因为您在结构中将“pType”错误输入为“ptype”，那么上帝会惩罚您。

下一次，阅读第一行错误输出并修复它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T18:32:49.307

命名枚举常量`bool`是一个特别糟糕的主意。这是为“stdbool.h”保留的，你可能会遇到很多问题。如果这是您所面临的，我们不能说，因为您既没有给我们您的编译器版本，也没有给我们错误输出。

# java - Android 如何放大网格视图或画廊视图

> ID：11333789
> 
> 赞同：1
> 
> 时间：2012-07-04T18:13:27.697
> 
> 标签：java, android

我目前正在开发我的第一个 android 应用程序。我需要能够放大 225 张图像的网格视图。从我所遇到的情况来看，不可能使用 GridView 进行水平滚动。可以使Gallarys 可以垂直和水平滚动。我有能力检测用户何时想要放大，但我不知道如何放大。什么是最好的视图组以及关于如何缩放的任何建议将不胜感激

# javascript - How to add html content generated by json call to page generated html code?

> ID：11333791
> 
> 赞同：0
> 
> 时间：2012-07-04T18:13:39.600
> 
> 标签：javascript, asp.net, json, jquery

I have a page. Which contain json method to load data. I call this method on page load. It works properly. The problem is when I view source of that page I don't see the generated code.

My concern is the search engine will never see the content even if end user see it.

Is there anyway to add it? If so how it can be done?

Here is the example of code I use

```
 $(function(){

    //Call to the server to get data.

    var content = "Some data"; //from the json call

    $("#content").html(content);

    });

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T08:48:47.337

在我看来，您的问题似乎是此处和中[所问内容的副本，](https://webmasters.stackexchange.com/questions/25361/making-json-page-which-renders-on-document-ready-indexable)[无论如何，Google 蜘蛛是否可以读取 json 数据？](https://stackoverflow.com/questions/2595182/is-there-anyway-of-making-json-data-readable-by-a-google-spider)

所以，渐进式增强和不显眼的 JavaScript 是出路。

除了这些，可选但重要的是，测试您的应用程序的可抓取性：使用“ [Fetch as Googlebot](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=158587) ”查看抓取工具看到的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T18:47:51.480

大多数（如果不是所有）搜索引擎都不会识别从 Ajax/Javascript 插入页面的内容，这就是为什么如果您希望搜索引擎识别它，您需要在页面中加载此内容。

# c - Casting int to char pointer: unexpected value?

> ID：11333797
> 
> 赞同：1
> 
> 时间：2012-07-04T18:13:58.447
> 
> 标签：c, pointers

> **Possible Duplicate:**
> [Casting int pointer to char pointer causes loss of data in C?](https://stackoverflow.com/questions/5208566/casting-int-pointer-to-char-pointer-causes-loss-of-data-in-c)

What is the reason for the output being `64` in the following code?

```
void main()
{
    int i=320;
    char *ptr=(char *)&i;
    printf("%d",*ptr);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T18:16:53.347

实施定义；取决于您平台上的字节序和 sizeof(int)。您基本上将您的 int 截断为自身的第一个字节，这显然是您系统上的最低有效位。

320 = 0x00 00 01 40 并截断为始终为一个字节的 char：0x40 = 64

这就是为什么。

编辑：正如 Daniel Fischer 指出的那样，这也取决于`CHAR_BIT`<= 8 （它在大多数系统中，如果不是全部的话）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T18:17:05.660

这是一个`char`指针。所以它指向*一个字节*。320 不适合一个字节。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T18:18:15.133

320 是 0x0140

64 是 0x0040

您只读取 int 值的低字节。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-04T18:19:27.287

关联的内存`i`指向一个整数（即大于一个字节）值 320 或`0x0140`.

然后，您获取一个指向该整数的指针并将其转换为指向 a `char`（单个字节）的指针。

然后你打印这个地址的值，在这种情况下`0x40`，即 LSB。这是您的值 64。

在其他实现中，您将获得 MSB，其`0x01`值为 1。

# cocoa - 可可：报告单击停靠图标

> ID：11333803
> 
> 赞同：4
> 
> 时间：2012-07-04T18:15:00.663
> 
> 标签：cocoa, dock

有没有办法报告每次鼠标点击应用程序停靠图标？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-04T18:33:28.850

不完全安全（也可以通过双击应用程序本身来激活），
但绝对是最简单的实现方式：

```
- (BOOL)applicationShouldHandleReopen:(NSApplication *)theApplication hasVisibleWindows:(BOOL)flag 
```

引用[NSApplicationDelegate 协议参考](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/NSApplicationDelegate_Protocol/Reference/Reference.html)：

> 每当 Finder 重新激活已运行的应用程序时发送这些事件，因为有人再次双击它或使用 Dock 激活它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-10-20T13:17:53.640

我想建议[Anne](https://stackoverflow.com/users/388037/anne)提供的[答案](https://stackoverflow.com/a/11334006/4216175)的替代解决方案，它避免与用户双击应用程序图标而不是停靠图标的事件发生冲突。

因此，我建议使用

`- (BOOL)applicationShouldOpenUntitledFile:(NSApplication *)sender;`

另请参阅[Apple 的文档](https://developer.apple.com/documentation/appkit/nsapplicationdelegate/1428444-applicationshouldopenuntitledfil?language=objc)。

# javascript - HTML5 localStorage 最大大小是否包括键名？

> ID：11333807
> 
> 赞同：9
> 
> 时间：2012-07-04T18:15:17.413
> 
> 标签：javascript, html, local-storage

HTML5 的 localStorage WebStorage 最大大小为 5MB。

这包括键名吗？

例如，如果我使用键名“quite-a-long-key-name-and-this-is-only-1”而不是“key1”，我会更快用完空间吗？

关于一个稍微相关的话题；是否有任何命名 localStorage 键的事实上的约定？使用第三方 JS 脚本时如何防止命名空间冲突？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-04T18:19:57.333

> 这包括键名吗？

是的，它们会成为数据的一部分，例如它们会识别您存储并稍后检索的数据，因此也必须保存这些数据。

> 使用第三方 JS 脚本时如何防止命名空间冲突？

这是一个很好的问题，我通常在 localStorage 前面加上应用程序名称。虽然更好的方法是创建一个哈希，例如一些接受应用程序名称等字符串的算法，然后在阅读时再次使用它们。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-04T18:20:50.627

首先请注意，这取决于实现，因为[规范没有给出限制](http://dev.w3.org/html5/webstorage/#disk-space)。所以你不应该依赖大小。

其次，是的，当今浏览器的限制包括名称：这是存储空间（“磁盘空间”）的大小。

为了避免冲突，我使用命名空间（例如`myplugin.mypart.myval`）。5 MB 对于可以随时删除或不再可用的存储空间来说已经很大了，所以我从没想过减小密钥的大小......

# php - 如何自定义 Wordpress comment_form();

> ID：11333810
> 
> 赞同：5
> 
> 时间：2012-07-04T18:15:37.820
> 
> 标签：php, html, wordpress, comments, wordpress-theming

我目前正在开发自己的 Wordpress 主题，并且最近一直在开发自定义`comments_template();`. 我已经读过，使用该`wp_list_comments();`方法是拉入和显示每页/帖子的评论的最佳实践。我已经成功地自定义了通过该方法拉入并显示评论的方式。

我还读到使用该`comment_form();`方法是显示评论表单的最佳实践。但是，我真的很难尝试自定义它。我对*$args*、*filters*和*actions*有点困惑。

本质上，我想彻底改变评论表单的部分内容。在仍然使用该方法的最佳实践的同时，我如何着手更改评论表单的部分内容`comment_form();`？

我真正需要做的就是将几个现有`<p>`标签包装在`<divs>`. 我正在尝试进行的更新列表如下：

1.  `<h3>`将标题调整为`<h2 class="comments-header">Tell us about you!</h2>`
2.  将表单字段包装在`<fieldset></fieldset>`
3.  包裹`<label>`起来`<div class="label"></div>`
4.  包裹`<input>`起来`<div class="field"></div>`
5.  在评论*之前*而不是之后`<p class="form-allowed-tags"></p>`显示*`<textarea>`*
**   更改表单提交按钮以使用`<button>`元素而不是`<input>`*

 **请参阅下面的代码以获取更多说明...*

## 默认comment_form(); 输出的代码：

```
<div id="respond">
    <h3 id="reply-title">Leave a Reply</h3>
    <form action="http://localhost/.../wp-comments-post.php" method="post" id="commentform">
        <p class="comment-notes">
            Your email address will not be published. Required fields are marked
            <span class="required">*</span>
        </p>
        <p class="comment-form-author">
            <label for="author">Name</label>
            <span class="required">*</span>
            <input id="author" name="author" type="text" value="John Doe" size="30" aria-required="true">
        </p>
        <p class="comment-form-email">
            <label for="email">Email</label>
            <span class="required">*</span>
            <input id="email" name="email" type="text" value="johndoe@dodgeit.com" size="30" aria-required="true">
        </p>
        <p class="comment-form-url">
            <label for="url">Website</label>
            <input id="url" name="url" type="text" value size="30">
        </p>
        <p class="comment-form-comment">
            <label for="comment">Comment</label>
            <textarea id="comment" name="comment" cols="45" rows="8" aria-required="true"></textarea>
        </p>
        <p class="form-allowed-tags">
            You may use these HTML tags and attributes...
        </p>
        <p class="form-submit">
            <input name="submit" type="submit" id="submit" value="Post Comment">
            <input type="hidden" name="comment_post_ID" value="22" id="comment_post_ID">
            <input type="hidden" name="comment_parent" id="comment_parent" value="0">
        </p>
    </form>
</div> <!-- #respond --> 
```

## 我试图输出的代码：

```
<div id="respond">
    <h2 class="comments-header">Tell us about you!</h2>
    <form action="http://localhost/.../wp-comments-post.php" method="post" id="commentform">
        <fieldset>
            <div class="label"><label for="author">Name <span class="required">*</span></label></div>
            <div class="field"><input id="author" name="author" type="text" value="<?php echo $comment_author_email; ?>" size="30" aria-required="true"></div>
        </fieldset>
        <fieldset>
            <div class="label"><label for="email">E&ndash;mail (will not be published) <span class="required">*</span></label></div>
            <div class="field"><input id="email" name="email" type="text" value="<?php echo $comment_author_email; ?>" size="30" aria-required="true"></div>
        </fieldset>

        <p class="form-allowed-tags">
            You may use these HTML tags and attributes...
        </p>

        <fieldset>
            <div class="field"><textarea id="comment" name="comment" cols="45" rows="8" aria-required="true"></textarea></div>
        </fieldset>

        <p class="form-submit">
            <button class="story-submit-btn" type="submit" name="submit" id="sub">Post your story</button>
            <input type="hidden" name="comment_post_ID" value="<?php echo $id; ?>" id="comment_post_ID">
            <input type="hidden" name="comment_parent" id="comment_parent" value="0">
        </p>
    </form>
</div> <!-- #respond --> 
```

任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T21:16:12.213

如果一切都失败了，在你的主题目录中的 comments.php 中，更改`comment_form($args);`为

```
ob_start();
comment_form($args);
$comment_form = ob_get_clean();
//insert code to modify $comment_form
echo $comment_form; 
```

我用它来将提交按钮更改为图像按钮。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-09-16T08:10:45.273

如何更改一些评论表单字段的简单示例。

```
$comments_args = array(
        // change the title of send button 
        'label_submit'=>'Send',
        // change the title of the reply section
        'title_reply'=>'Write a Reply or Comment',
        // remove "Text or HTML to be displayed after the set of comment fields"
        'comment_notes_after' => '',
        // redefine your own textarea (the comment body)
        'comment_field' => '<p class="comment-form-comment"><label for="comment">' . _x( 'Comment', 'noun' ) . '</label><br /><textarea id="comment" name="comment" aria-required="true"></textarea></p>',
);

comment_form($comments_args); 
```

更多信息：[关于 WordPress Codex 的 comment_form() 文档](http://codex.wordpress.org/Function_Reference/comment_form)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-07T21:59:20.797

我`functions.php`用来修改评论显示。我不知道这是否是现在的方式（我使用 WP 开发并需要评论的最后一个站点是在 2009 年；）），但它是（将它放在`functions.php`文件中！：

```
function THEMENAME_comment($comment, $args, $depth) {
  $GLOBALS['comment'] = $comment;
  *your comment display code*
} 
```

记住也要创建 pingback 主题。你这样做类似于评论，唯一的区别是第一行：

> 函数 THEMENAME_pings($comment, $args, $depth)

其他方式可能是使用[comments_template](http://codex.wordpress.org/Function_Reference/comments_template)。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-11-05T20:45:46.453

comment_form 使用一个字段数组。该数组中的值是一个字符串。您可以通过为相应的键添加自己的字符串来覆盖字段的输出，如下所示：

```
 function modify_comment_fields($fields){

    $fields =  array('author' =>'<div><p class="comment-form-author"><label for="author">Author</label><input id="author" name="author" type="text"/></p></div>');

    return $fields;

    } 
```

然后在你的函数中添加一个过滤器：

```
add_filter('comment_form_default_fields','modify_comment_fields'); 
```

这是关于 comment_form 函数的 Codex 链接：http: [//codex.wordpress.org/Function_Reference/comment_form](http://codex.wordpress.org/Function_Reference/comment_form)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-09-16T08:07:14.770

发布内容后在 Single.php 上

将其用于自定义评论表单 html 和设计

```
 <?php $comments_args = array(
        // change the title of send button 
        'label_submit'=>'Submit',
        // change the title of the reply section
        'title_reply'=>'Add a comment',
        // remove "Text or HTML to be displayed after the set of comment fields"
        'comment_form_top' => 'ds',
        'comment_notes_before' => '',
        'comment_notes_after' => '',
        // redefine your own textarea (the comment body)
        'comment_field' => '<p class="comment-form-comment"><textarea id="comment" name="comment" placeholder="Your Comment* " aria-required="true"></textarea></p>',
        'fields' => apply_filters( 'comment_form_default_fields', array(

    'author' =>
      '<p class="comment-form-author">'  .
      '<input id="author" class="blog-form-input" placeholder="Your Name* " name="author" type="text" value="' . esc_attr( $commenter['comment_author'] ) .
      '" size="30"' . $aria_req . ' /></p>',

    'email' =>
      '<p class="comment-form-email">'.
      '<input id="email" class="blog-form-input" placeholder="Your Email Address* " name="email" type="text" value="' . esc_attr(  $commenter['comment_author_email'] ) .
      '" size="30"' . $aria_req . ' /></p>',

    'url' =>
      '<p class="comment-form-url">'.
      '<input id="url" class="blog-form-input" placeholder="Your Website URL" name="url" type="text" value="' . esc_attr( $commenter['comment_author_url'] ) .
      '" size="30" /></p>'
    )
  ),
);

comment_form($comments_args);?> 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-04T20:04:56.390

你检查过法典：[http ://codex.wordpress.org/Function_Reference/comment_form](http://codex.wordpress.org/Function_Reference/comment_form)

定制并不容易，但它是可行的

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-10-16T06:42:02.253

```
function THEMENAME_comment($comment, $args, $depth) {
  $GLOBALS['comment'] = $comment;
  *your comment display code*
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-01-02T07:47:11.773

我的主题使用了默认函数comment_form，所以我对子主题进行了更改。

```
 if(function_exists('glutton_comment_form'))
        glutton_comment_form(); //custom function for displaying comments, defined in glutton-child/functions.php
    else
        comment_form(); 
```*

# java - 创建可以采用多种不同模型类型的通用对象

> ID：11333811
> 
> 赞同：0
> 
> 时间：2012-07-04T18:15:43.350
> 
> 标签：java, generics, weka

我目前正在使用 Weka 编写一个构建模型的程序（使用 Weka 中包含的各种模型类型之一）。我遇到问题的部分是我想允许程序对同一功能使用多种类型。例如，如果我选择使用 J48 决策树，我需要在 J48 类型的变量上构建和调用函数。另一方面，如果我想使用 BayesNet，我需要在 BayesNet 类型的变量上构建和调用相同的函数。这个模型需要在程序的不同点使用，所以一个简单的 if-else 链是行不通的。

基本上我需要的是相当于 C++ 中的 void 指针。可以采用各种类型的东西，它们都可以执行类似的功能。我尝试使用通用 Object 类，但发现它无法转换为正确的类型（我收到“不兼容的类型”错误）。

所以，我的问题的简短版本是这样的：Java 程序员如何解决 C++ 程序员使用 void 指针解决的问题？

谢谢，-莫拉格

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T18:20:59.757

你的意思是，像这样的东西？

```
public void doStuff(MyType<?> someObject) { } 
```

`?`代表任何类型并代表`unbounded wildcard`.

请注意，此通配符有一定的限制。例如，您不能向`List<?>`.

有关更多信息，请参阅[官方教程](http://docs.oracle.com/javase/tutorial/extra/generics/wildcards.html)或[AngelikaLanger 泛型常见问题解答](http://www.angelikalanger.com/GenericsFAQ/FAQSections/TypeArguments.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T19:10:59.900

> *我目前正在使用 Weka 编写一个构建模型的程序（使用 Weka 中包含的各种模型类型之一）。我遇到问题的部分是我想允许程序对同一功能使用多种类型。例如，如果我选择使用 J48 决策树，我需要在 J48 类型的变量上构建和调用函数。另一方面，如果我想使用 BayesNet，我需要在 BayesNet 类型的变量上构建和调用相同的函数。这个模型需要在程序的不同点使用，所以一个简单的 if-else 链是行不通的*。

实际上，您真正需要的是多态行为。请查看我回答的这篇文章，对此进行了一些解释：[多态性](https://stackoverflow.com/questions/10177523/using-superclass-to-initialise-a-subclass-object-java/10177599#10177599)

在了解了多态背后的思想之后，再深入一些，寻找工厂模式。以下是 Java 模式的好资源：

[源制作模式](http://sourcemaking.com/)

[维基百科——工厂模式](https://en.wikipedia.org/wiki/Factory_method_pattern)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T04:06:32.453

您可以将超类`Classifier`用作任何分类器对象的类型声明，即使每个对象都是`Classifier`诸如`J48`. 它之所以有效，是因为它们都实现了超类的功能，因此即使您不一定知道您正在使用哪种特定类型的分类器，也会定义函数调用。Axcdnt 的答案链接到有关多态性的更多详细信息。无论如何，我有一个带有以下代码片段的工作程序；他们完全按照您的需要做。

```
Classifier Clfs = null;

    try {
        if (modelType.equals("J48")) {
            Clfs = new J48();
        } else if (modelType.equals("MLP")) {
            Clfs = new MultilayerPerceptron(); 
        } else if (modelType.equals("IB3")) {
            Clfs = new IBk(3);
        } else if (modelType.equals("RF")) {
            Clfs = new RandomForest(); 
        } else if (modelType.equals("NB")) {
            Clfs = new NaiveBayes();
//... 
```

在其他地方，在将分类器写入我调用的文件之后

```
Classifier cls = (Classifier) weka.core.SerializationHelper.read(target);
prediction = cls.distributionForInstance(data.instance(0)); 
```

（`target`是一个包含从中加载模型的文件路径的字符串）如您所见，我使用的分类器类型无关紧要，除非在创建时，当我必须指定时。注意仍然会有一些限制，例如 j48 不能预测数字类。

# javascript - 我们如何将字符串转换为布尔值？

> ID：11333813
> 
> 赞同：1
> 
> 时间：2012-07-04T18:15:47.763
> 
> 标签：javascript, jquery

> **可能重复：**
> [如何在 JavaScript 中将字符串转换为布尔值？](https://stackoverflow.com/questions/263965/how-can-i-convert-a-string-to-boolean-in-javascript)

我有一个包含 2 个选项的选择列表，`yes`或者`no`类似：

```
 <select size="1">
     <option value="true">yes</option>
     <option value="false">no</option>
   </select> 
```

现在我想在 jquery-UI 按钮禁用属性中使用选定的值，这意味着：

```
 $("button").button({ disabled : $("select").val() }); 
```

现在我的问题是我们将获得的价值`$("select").val()`是`string`

`disabled`我们需要布尔值的属性。所以我想知道有什么方法就像

`pareInt`或者`parseFloat`我们可以将字符串转换为布尔值？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-04T18:18:43.397

```
var value = ('true' === $("select").val() ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T18:46:38.543

您可以使用第三个：

```
var num = +something; //toNumber
var str = something + ""; //toString
var bol = !!something; //toBoolean 
```

那将转向`0, "", false, null, undefined, NaN`，`false`而其他一切都转向`true`

但是使用我的演绎能力，你想要类似的东西`"false" -> false`，为此你可以使用其中之一：

```
var bol = something === "true"; //false for anything different than true
var bol = something !== "false"; //true for anything different than false 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T18:17:51.833

试试这个代码：

```
var myBool = myString == "true"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-04T18:18:17.933

自己写怎么样？

我在 JavaScript 语法方面并不完全坚定，但试试这个：

```
function a(inputString)
    if(inputString == "true")
        return true;
    if(inputString == "false")
        return false; 
```

我确信有更好的解决方案。这只是我的想法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-04T18:19:40.047

```
var myBoolean = (myString === 'true') ? true : false; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-04T18:19:57.043

就像是

> $("select").val() == 'true'

应该做的伎俩。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-04T18:21:35.003

取决于你想做多少次。如果它会在你的代码中乱扔垃圾，我会添加一个函数，如：

```
Boolean.parse = function (str) {
  switch (str.toLowerCase ()) {
    case "true":
      return true;
    case "false":
      return false;
    default:
      throw new Error ("Boolean.parse: Cannot convert string to boolean.");
  }
}; 
```

# c# - 如何登录推特并查看通知

> ID：11333815
> 
> 赞同：0
> 
> 时间：2012-07-04T18:16:04.310
> 
> 标签：c#, winforms, twitter, login, browser

**如何登录推特并查看通知？**

**Facebook**

对于 facebook，我使用这部分代码进行登录

```
wb1.Document.GetElementById("email").InnterText="user"; 
```

因为代码**html id**是

```
<input type="text" class="inputtext" name="email" id="email" value="" tabindex="1" data-dynamite-selected="true"> 
```

检查通知我用这个

```
HtmlElement ID1 = wb1.Document.GetElementById("notificationsCountValue"); 
```

**推特**

但在 twitter 页面我有这个 html 代码

```
<div class="placeholding-input username hasome">
                <input type="text" class="text-input email-input" name="session[username_or_email]" title="Nome utente o email" autocomplete="on" data-dynamite-selected="true">
                  <span class="placeholder">Nome utente o email</span>
              </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T10:30:40.593

这是使用 TweetSharp 的示例。

首先，您需要访问[https://dev.twitter.com/](https://dev.twitter.com/)，使用您的 twitter 帐户登录并创建新应用程序以获取**consumerKey**和**consumerSecret**值。

这是用于登录 twitter 并获取所有提及的帮助程序类。该类通过 HttpWebRequest/HttpWebResponse 自动获取授权码。

```
public class Twitter
{
    private TwitterService service;

    private OAuthRequestToken requestToken;

    public Twitter(String consumerKey, String consumerSecret)
    {
        service = new TwitterService(consumerKey, consumerSecret);

        requestToken = service.GetRequestToken();
    }

    public void Login(String username, String password)
    {
        Uri uri = service.GetAuthorizationUri(requestToken);

        CookieContainer cookieContainer = new CookieContainer();

        String response = HttpUtil.GetResponseString(uri, cookieContainer);

        int startIndex = response.IndexOf("authenticity_token\" type=\"hidden\" value=\"") + 41;
        int endIndex = response.IndexOf("\"", startIndex + 1);

        String authenticity_token = response.Substring(startIndex, endIndex - startIndex);

        startIndex = response.IndexOf("name=\"oauth_token\" type=\"hidden\" value=\"") + 40;
        endIndex = response.IndexOf("\"", startIndex + 1);

        String oauth_token = response.Substring(startIndex, endIndex - startIndex);

        String postData = "authenticity_token=" + authenticity_token +
                          "&oauth_token=" + oauth_token +
                          "&session%5Busername_or_email%5D=" + username +
                          "&session%5Bpassword%5D=" + password;

        response = HttpUtil.GetResponseString(new Uri("https://api.twitter.com/oauth/authorize"), postData, cookieContainer);

        if (response.Contains("Invalid user name or password"))
        {
            return;
        }

        startIndex = response.IndexOf("<code>") + 6;
        endIndex = response.IndexOf("</code>");

        String pin = response.Substring(startIndex, endIndex - startIndex);

        OAuthAccessToken access = service.GetAccessToken(requestToken, pin);

        service.AuthenticateWith(access.Token, access.TokenSecret);

    }

    public List<TwitterStatus> GetMentiones()
    {
        return service.ListTweetsMentioningMe().ToList<TwitterStatus>();
    }
} 
```

这是 Twitter 类中使用的 GET 和 POST 请求的帮助程序类，以便自动获取授权代码：

```
public static class HttpUtil
{
    public static String GetResponseString(Uri url, CookieContainer cc)
    {
        HttpWebRequest request = (HttpWebRequest)HttpWebRequest.Create(url);
        request.Method = WebRequestMethods.Http.Get;
        request.CookieContainer = cc;

        HttpWebResponse response = (HttpWebResponse)request.GetResponse();

        StreamReader reader = new StreamReader(response.GetResponseStream());

        String responseString = reader.ReadToEnd();

        response.Close();

        return responseString;
    }

    public static String GetResponseString(Uri url, String postData, CookieContainer cc)
    {
        HttpWebRequest request = (HttpWebRequest)HttpWebRequest.Create(url);
        request.Method = WebRequestMethods.Http.Post;
        request.ContentLength = postData.Length;
        request.ContentType = "application/x-www-form-urlencoded";
        request.CookieContainer = cc;

        StreamWriter writer = new StreamWriter(request.GetRequestStream());
        writer.Write(postData);
        writer.Close();
        HttpWebResponse response = (HttpWebResponse)request.GetResponse();
        StreamReader reader = new StreamReader(response.GetResponseStream());
        String responseString = reader.ReadToEnd();

        response.Close();

        return responseString;
    }

} 
```

最后，简单的例子：

```
class Program
{
    static void Main(string[] args)
    {
        Twitter twitter = new Twitter(**your_consumer_key**, **your_consumer_secret**);

        twitter.Login(**username**, **password**);

        List<TwitterStatus> statuses = twitter.GetMentiones();

        foreach (TwitterStatus status in statuses)
        {
            Console.WriteLine(status.Text);
        }
    }
} 
```

# vba - 以编程方式在 Word 2010 中生成书签，将标头名称作为书签名称

> ID：11333817
> 
> 赞同：1
> 
> 时间：2012-07-04T18:16:08.443
> 
> 标签：vba, ms-word, word-2010

![文件图片](../Images/cfc31b15476bcb359f890b0e19b7f3be.png)

我需要以编程方式在 Word 2010 中生成书签，将标题名称作为书签名称。

我有以下代码使一个单词成为书签，但书签名称保持不变，因为该字符串`Heading 1`仅在 name 变量中可用：

```
Sub bookmarking()
    Selection.EndKey Unit:=wdLine, Extend:=wdExtend
    With ActiveDocument.Bookmarks
        .Add Range:=Selection.Range, Name:=" Heading 1"
        .DefaultSorting = wdSortByName
        .ShowHidden = False
    End With
End Sub 
```

`Heading 1`我想要剪贴板中的内容，而不是name 变量。请帮我`Heading 1`用剪贴板内容替换它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T22:01:31.907

使用`DataObject`来自`Microsoft Forms 2.0 Object Library`：

```
Private Function GetClipboardData()
    Dim objDataObject As MSForms.DataObject ''need to add reference in Tools |References
    Set objDataObject = New MSForms.DataObject

    objDataObject.GetFromClipboard
    On Error Resume Next
    GetClipboardData = objDataObject.GetText
    If Err.Number = -2147221404 Then
       MsgBox "Error: current clipboard data is either empty or is not text. Clibpoard must contain text."
    End If
End Function 
```

然后，返回您的主代码，将书签名称设为此剪贴板数据：

```
...
.Add Range:=Selection.Range, Name:=GetClipboardData()
... 
```

这对你来说是一个好的开始吗？根据您的需要，还有其他方法可能更强大。然而，这应该作为一个很好的概念证明。

# javascript - JavaScript 中的 Django FOR 循环

> ID：11333824
> 
> 赞同：4
> 
> 时间：2012-07-04T18:16:49.580
> 
> 标签：javascript, django, google-maps

首先，我是编程新手。我正在尝试制作一个嵌入了谷歌地图的网页，在这张地图中，你可以看到一条设置路径的彩色线。为此，我正在使用 Django。在我的views.py 中，我有一个名为points 的变量，其中我有一些坐标写在一个列表中，作为一个字符串。例如，

```
points = ('-15.4566620,28.07163320','15.7566620,29.07163320',....) 
```

然后，在谷歌地图脚本中，我有：

var flightPlanCoordinates = [

```
 new google.maps.LatLng(-15.4566620,28.07163320),
        new google.maps.LatLng(-15.7566620,29.07163320),

                ]; 
```

所以当我显示我的页面时，我看到这些点之间有一条线。

我希望有，而不是这样：

var flightPlanCoordinates = [

```
 {% for point in points %}

                         new google.maps.LatLng({{point}}),

                   {% endfor %}

                ]; 
```

但这不起作用。

我做错了什么，应该怎么做？

非常感谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T19:17:16.897

目标是让模板呈现路径数组，就像它是硬编码的一样。您应该检查呈现的网页的源代码以确保。

最好删除尾随逗号，即使它确实可以使用。您可以`forloop.last`在最后一点使用 省略它。

我遵循民意调查教程中的风格。确保视图将`points`变量发送到模板：

**网址.py**

`urlpatterns`包含`url(r'^map/$', 'polls.views.map'),`

**视图.py**

```
def map(request):
    points = ('0,0', '10,0', '10,10', '0,10')
    return render_to_response('polls/map.html', { 'points': points }) 
```

**模板map.html**

```
...
var mypolyline = new google.maps.Polyline({
    map: map,
    path: [
      {% for point in points %}
        new google.maps.LatLng({{ point }}) {% if not forloop.last %},{% endif %}
      {% endfor %}
    ]
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T18:43:29.237

您的点数组是一个形式为“-15.4566620,28.07163320”的字符串数组。所以你正在这样做：新的 google.maps.LatLng({{'-15.4566620,28.07163320'}}),

google.maps.LatLng 构造函数接受两个数字，因此您需要从该字符串中解析出数字（或将数字传递给 LatLng 构造函数）。

编辑：一种方法是像这样填充数组（未经测试）：

```
var polylineArray = [];
for (var i = 0; i < points.length; i++)
{
   // split the string at the comma
   var coords = points[i].split(",");
   // change the two strings to floating point numbers, use them to create the LatLng
   polylineArray.push(new google.maps.LatLng(parseFloat(coords[0]),
                                             parseFloat(coords[1])));
} 
```

# sql-server-2008 - 将表结构和无数据从一个数据库导入另一个数据库

> ID：11333832
> 
> 赞同：0
> 
> 时间：2012-07-04T18:17:03.860
> 
> 标签：sql-server-2008

我在 Microsoft SQL Server 中有多个表的数据库，表中的模式为“xyz”。我可以使用 SQL Server 的导出和导入向导将此数据库表连同数据从一个 sql server 复制到另一个。

我想找到一种方法- 1\. 只复制没有数据的表。2\. 是否可以将当前数据库设计转换为脚本，然后在另一台服务器上运行相同的脚本，该服务器将使用空数据创建所有这些表？提前感谢。最好的祝福

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T18:22:13.817

是的，您可以使用 Management Studio 做到这一点。右键单击您的数据库，然后选择任务 -> 生成脚本。您应该调整一些设置，例如它是否应该为索引和统计信息生成脚本。他们都在眼前。

另一种方法是[SQL Server Data Tools](http://msdn.microsoft.com/en-us/data/tools.aspx)。这是相对较新的（前数据老兄）。对于数据库版本控制和创建迁移脚本，它并不那么简单，但从长远来看会更好。

# objective-c - 将类属性链接到 Objective-C 中的 UIControls 值

> ID：11333834
> 
> 赞同：0
> 
> 时间：2012-07-04T18:17:30.923
> 
> 标签：objective-c

基本上我是一名 C# 开发人员，但最近几天开始学习 Objective-C。

现在我要做一个练习，需要创建一个类并将实例变量（属性）链接到`UIControl`视图的 s 值（例如`UITextField`字符串值）。

这意味着我已经`IBOutlet`在 ViewControler 中实现了所需的 s，在这个控制器中我将创建一个已创建类的实例。在 C# 中，类可以实现 INotifyPropertyChanged 接口，将类绑定到控件并在`Datasource`值发生更改时通知对象。

在 Objective C 中是否有与这个概念相同的东西？或者我怎样才能实现这样的目标，只有通过每个值都发生变化的事件`Control`？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T18:31:01.100

不是 100% 确定您的问题是什么。您是否在询问 ViewController 视图是否可以在模型更改时自动更新？

有许多不同的机制可以在对象/类/等之间提供通知。主要的如下（我已经包含了 IBAction，您可能知道它的完整性）：

1) IBAction - 对于 UI 控件，就像您在 UIViewController 类中连接 IBOutlets 一样，您还可以在用户交互时触发事件（触摸向上/向下触摸/等）。

2) NSNotification - 你几乎可以在任何地方发布这些：

[http://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSNotificationCenter_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40003701](http://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSNotificationCenter_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40003701)

3）键值观察：

[http://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/KeyValueObserving/KeyValueObserving.html#//apple_ref/doc/uid/10000177i](http://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/KeyValueObserving/KeyValueObserving.html#//apple_ref/doc/uid/10000177i)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T18:24:33.963

您的问题和语法有点模棱两可，但在我看来，您想要的是自定义（手动）属性获取器/设置器。尝试这个：

```
@intrface AClass: NSObject {
    int iVar;
}

@property (nonatomic, assign) int iVar;

@end

@implementation AClass

- (int)iVar
{
    // notify object of value being read, then:
    return iVar;
}

- (void)setIVar:(int)_iVar
{
    iVar = _iVar;
    // then notify object about property being set
}

@end 
```

# git - Git-Tfs：每个 Git 提交的 TFS 变更集？

> ID：11333835
> 
> 赞同：5
> 
> 时间：2012-07-04T18:17:38.187
> 
> 标签：git, tfs, git-tfs

在工作中，我们使用 TFS，我正在尝试让 Git-TFS 工具正常工作，以便在处理本地提交时有更大的灵活性，然后再将它们推送到我们的 TFS 存储库。

我有这个工作，但是当我做 a 时`git tfs ct`，它会将我的所有提交检查到一个 TFS 变更集中。我错过了什么，或者这是它应该如何工作？如果它没有将我的每个提交作为单独的变更集单独推送到 TFS，那么它似乎首先破坏了使用 git-tfs 的目的。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-04T21:19:17.910

我使用 rcheckin 命令一次提交一个新的 git 变更集到 tfs，在每次 tfs 提交后重新设置剩余的提交以产生一个正常的树。使用 checkintool 子命令会产生一个合并提交——不过我不记得它会挤压 git 提交。

所以我们使用正常的 git 工作流程：签出一个功能分支，处理它，签出 master 和 'git tfs pull'，如有必要，将功能分支重新定位到 master，然后将功能合并到 master 并执行`git tfs rcheckin`。最后，删除功能分支。在极少数情况下，这会失败（由于锁定的 tfs 文件），rcheckin 会停止，使所有内容都处于合理状态，因此一旦清除了障碍，继续就没有问题了。

总而言之，git-tfs 使使用 TFS 变得可以忍受。

# panda3d - 无法单击 3d 对象并移动它们

> ID：11333838
> 
> 赞同：0
> 
> 时间：2012-07-04T18:17:50.443
> 
> 标签：panda3d

我想点击加载的模型并移动它们。我使用了国际象棋示例示例和熊猫 3d 教程中的代码，但没有成功。有人可以弄清楚代码有什么问题。

谢谢

```
from math import pi, sin, cos
import sys
from direct.showbase.ShowBase import ShowBase
import direct.directbase.DirectStart
from direct.task import Task
from panda3d.core import TextNode
from direct.gui.OnscreenText import OnscreenText
from panda3d.core import CollisionTraverser, CollisionNode
from panda3d.core import CollisionHandlerQueue, CollisionRay
from panda3d.core import Point3, Vec3, Vec4, BitMask32
from direct.showbase.DirectObject import DirectObject
from panda3d.core import AmbientLight, DirectionalLight, LightAttrib

class MyApp(ShowBase):
    def __init__(self):
        ShowBase.__init__(self)

        # quit when esc is pressed
        self.accept('escape', sys.exit)

        #base.disableMouse()

        # load the box model
        self.box = self.loader.loadModel("models/xbox")
        self.box.reparentTo(camera)
        self.box.setScale(2.0, 2.0, 2.0)
        self.box.setPos(8, 50, 0)

        self.keyMap = {
            "w" :False ,
            "s" :False,
            "a": False,
            "d": False,
            "mouse1": False,
            "mouse3": False,
        }

        # CollisionTraverser  and a Collision Handler is set up
        self.picker = CollisionTraverser()
        self.pq = CollisionHandlerQueue() 

        self.pickerNode = CollisionNode('mouseRay')
        self.pickerNP = camera.attachNewNode(self.pickerNode)
        self.pickerNode.setFromCollideMask(BitMask32.bit(1))
        self.box.setCollideMask(BitMask32.bit(1)) 

        self.pickerRay = CollisionRay()
        self.pickerNode.addSolid(self.pickerRay)
        self.picker.addCollider(self.pickerNP, self.pq)

        self.mouseTask = taskMgr.add(self.mouseTask, 'mouseTask')
        self.accept("mouse1", self.setKey, ["mouse1", True])

    def mouseTask(self,task):
        # check if we have access to the mouse
        if base.mouseWatcherNode.hasMouse():

            # get the mouse position
            mpos = base.mouseWatcherNode.getMouse()

            # set the position of the ray based on the mouse position
            self.pickerRay.setFromLens(base.camNode, mpos.getX(), mpos.getY())
            self.picker.traverse(render)
            # if we have hit something sort the hits so that the closest is first and highlight the node
            if self.pq.getNumEntries() > 0:
                self.pq.sortEntries()
                pickedObj = self.picker.getEntry(0).getIntoNodePath()

    def setKey(self,key,value):
        self.keyMap[key] = value

app = MyApp()
app.run() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T15:40:44.220

当我发现你的问题时，我只是想做同样的事情。感谢您的代码，它帮助我开始！

我已经设法让它工作了:)

只是备注：您使用任务，没有返回，这使任务运行一次。你应该使用过：return task.cont

无论如何，这里是我的 panda3d devel (1.8.0+) 的工作代码：

```
import sys
from direct.showbase.ShowBase import ShowBase
from pandac.PandaModules import *

class MyApp(ShowBase):
    def __init__(self):
        ShowBase.__init__(self)

        # quit when esc is pressed
        self.accept('escape',sys.exit)

        #base.disableMouse()

        # load the box model
        box = self.loader.loadModel("models/box")
        box.reparentTo(render)
        box.setScale(2.0, 2.0, 2.0)
        box.setPos(8, 50, 0)

        panda = base.loader.loadModel("models/panda")
        panda.reparentTo(render)
        panda.setPos(0, 10, 0)
        panda.setScale(0.1, 0.1, 0.1)
        cNodePanda = panda.attachNewNode(CollisionNode('cnode_panda'))
        cNodePanda.node().addSolid(CollisionSphere(0,0,5,5))
        cNodePanda.show()

        # CollisionTraverser  and a Collision Handler is set up
        self.picker = CollisionTraverser()
        self.picker.showCollisions(render)
        self.pq = CollisionHandlerQueue() 

        self.pickerNode = CollisionNode('mouseRay')
        self.pickerNP = camera.attachNewNode(self.pickerNode)
        self.pickerNode.setFromCollideMask(BitMask32.bit(1))
        box.setCollideMask(BitMask32.bit(1)) 
        panda.setCollideMask(BitMask32.bit(1))

        self.pickerRay = CollisionRay()
        self.pickerNode.addSolid(self.pickerRay)
        self.picker.addCollider(self.pickerNP,self.pq)

        self.accept("mouse1",self.mouseClick)

    def mouseClick(self):
        print('mouse click')
        # check if we have access to the mouse
        if base.mouseWatcherNode.hasMouse():

            # get the mouse position
            mpos = base.mouseWatcherNode.getMouse()

            # set the position of the ray based on the mouse position
            self.pickerRay.setFromLens(base.camNode,mpos.getX(),mpos.getY())
            self.picker.traverse(render)
            # if we have hit something sort the hits so that the closest is first and highlight the node
            if self.pq.getNumEntries() > 0:
                self.pq.sortEntries()
                pickedObj = self.pq.getEntry(0).getIntoNodePath()
                print('click on ' + pickedObj.getName())

app = MyApp()
app.run() 
```

# html - 如何找到网页的父页面

> ID：11333844
> 
> 赞同：-1
> 
> 时间：2012-07-04T18:18:18.687
> 
> 标签：html

我有一个无法通过我的网站访问的网页。

比如说，我的网站是 www.google.com，而我无法使用该网站访问的网页就像 www.google.com/iamaskingthis/asdasd。当我键入其内容时，该网页会出现在谷歌搜索结果中，但是没有任何内容可以将我发送到我网站上的该页面。

我已经尝试分析页面源以找到它的父位置，但我似乎找不到它。我想删除那个页面，但是因为找不到它，我也不能销毁它。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T18:25:05.127

您可以使用 robots.txt 文件来防止搜索引擎机器人访问页面，从而不显示其搜索结果。

例如，您可以在网站的根目录中创建一个 robots.txt 文件，并向其中添加以下内容：

```
 User-agent: *
    Disallow: /mysecretpage.html 
```

更多详情请访问：[http ://www.robotstxt.org/robotstxt.html](http://www.robotstxt.org/robotstxt.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T18:27:34.517

没有“父页面”这样的概念。如果您的意思是，谷歌通过哪个链接找到了该页面，请记住，它不需要在您的控制之下：如果我在**我的**`www.google.com/iamaskingthis/asdasd`网站上的某个页面上放置了一个链接，并且 googlebat 抓取它，它就会知道它。

 **简而言之：在网站上隐藏页面没有可靠的方法。如果要限制访问，请使用身份验证。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T18:44:59.773

即使按钮消失了，谷歌也会抓取该页面，因为它已经将页面存储在它的记录中。禁止谷歌抓取它的唯一方法是 robots.txt 或简单地将其从服务器上删除（通过 FTP 或您的主机控制面板）。**

# c# - C# 等待和脉冲

> ID：11333845
> 
> 赞同：0
> 
> 时间：2012-07-04T18:18:19.330
> 
> 标签：c#, java, synchronization

在 Java 中，您可以等待每个对象，因此可以编写这种场景：

线程 A 等待对象 a

线程 B 等待对象 b

线程 C 通知一个

线程 A 通知 b

如果我使用 C# 的监视器，在我看来线程 C 只能唤醒 b（或 b 和 a），那么我如何使这种情况成为可能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T18:21:50.653

> 如果我使用 C# 的监视器，在我看来线程 C 只能唤醒 b

为什么？线程 C 正在调用它`Monitor.Pulse(a)`，这将唤醒线程 A，就像`a.pulse()`在 Java 中一样。

尽管有*一些*细微的差别，`Monitor.Wait`/ `Pulse`/ .NET 中的/ /与 Java中的 / /`PulseAll`非常相似。我强烈怀疑您当前正在考虑的任何差异都不是这种情况，但是如果没有具体的代码就很难说。`Object.wait``notify``notifyAll`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T18:21:13.847

您正在寻找`Monitor.Wait`and`Monitor.Pulse`方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-04T18:25:34.267

您似乎在想，因为 C# 同步函数是`Monitor`类的成员，所以您需要一个特殊的`Monitor`实例来使用它们，而 Java 中它们是`java.lang.Object`类的成员并且可用于所有对象。

恰恰相反。根本没有`Monitor`实例。在 C# 中，函数是静态方法，并且仍然适用于任何对象。该类的唯一原因`Monitor`是防止`System.Object`被额外的成员弄乱（这将出现在 Intellisense 建议列表等中）。

但是，我发现使用的代码`Pulse`通常具有隐藏的竞争条件。有更好的方法可以在线程之间进行同步，从而更容易编写可靠的代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-04T18:34:28.883

我不确定我是否正确理解了您，但我没有发现任何问题。以下代码是有意简化的，没有类，也没有 a 和 b 的声明：

```
public void ThreadARunner()
{
    lock(a)
        Monitor.Wait(a); //waits here until thread C pulses, releasing the lock on a
    lock(b)
        Monitor.Pulse(b); //wakes up thread B
}

public void ThreadBRunner()
{
    lock(b)
        Monitor.Wait(b); //waits here until thread A pulses, releasing the lock on b
}

public void ThreadCRunner()
{
    lock(a)
        Monitor.Pulse(a); //wakes up thread a
} 
```

如需进一步帮助，请提供更多详细信息。阅读[此处](http://www.albahari.com/threading/part4.aspx)了解 Monitor 如何在 C# 中工作。

# java - 如何在 OGS 中实现 Session Bean 的集群、负载均衡和故障转移

> ID：11333850
> 
> 赞同：2
> 
> 时间：2012-07-04T18:18:34.067
> 
> 标签：java, jakarta-ee, glassfish, cluster-computing, session-bean

JBoss 似乎有一组非常简单的注释/配置，用于集群和负载平衡会话 bean，但我在 GlassFish 3.x 文档中没有看到相同的功能。

假设我有`MyStatefulBean`和`MyStatelessBean`豆子。对于他们两个，我想要以下功能：

*   我希望能够创建一个 bean 集群（任意数量或规模）并将它们放在一个软件负载均衡器后面，该负载均衡器将循环 bean；和
*   如果 1 个集群 bean 因任何原因失败，我希望将其从池中取出

GlassFish 免费/（社区版）甚至支持这个还是我必须自己实现这个？

与第一个问题相切：集群/负载平衡是否对有状态 bean 有意义？我不认为现在我想到它......但这个问题仍然适用于两种类型的豆子，除非另有证明！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T08:29:28.553

如果您计划通过远程调用来调用 bean，[这](http://docs.oracle.com/cd/E18930_01/html/821-2426/fxxqs.html#scrolltoc)是您正在寻找的高可用性指南中的章节。

有状态 bean 的故障转移是有意义的，但负载平衡也是可能的。请记住，它有它的限制，最大的限制是不能使用扩展的持久性上下文。

*   bean 的池大小在 EJB 服务设置中指定，并且可以`glassfish-ejb-jar.xml`为特定 bean覆盖
*   AFAIK 这就是 EJB 规范所说的 - 当发生系统异常（这包括未经检查的异常）时，bean 被销毁。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T16:59:06.480

首先，如果要在失败时保留会话状态，则需要为应用程序启用高可用性。如果使用管理控制台，部署应用程序屏幕上有一个复选框。如果您从命令行进行部署，请使用“asadmin deploy --availabilityenabled=true --target mycluster myapp.ear”。

查找 bean 时，生成的 bean RMI 代理/存根具有所有可用集群 GlassFish 实例的列表。服务器的顺序是随机生成的，RMI 存根将选择列表顶部的服务器。这就是负载在集群中分布的方式。如果远程服务器发生故障，则选择列表中的下一个服务器。如果远程 bean 是有状态会话 bean，则会话在故障转移时保留。

正如@pdudits 提到的，请阅读有关该主题的文档以获得更深入的报道。

希望这可以帮助！

# android - 动作发生后将焦点设置在滚动视图的顶部

> ID：11333860
> 
> 赞同：3
> 
> 时间：2012-07-04T18:19:55.633
> 
> 标签：android, scrollview

在我的应用程序中，我正在进行一些计算。整个布局在 Scrollview 中。

结果显示在顶部。XML 是这样的：

```
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@drawable/back2back"
    >

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="526dp"
    android:background="@drawable/back4"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/nothing"
        android:layout_width="181dp"
        android:layout_height="51dp"
        android:layout_gravity="center"

        android:textColor="#000000"
        android:textStyle="bold" />

        rest of the xml
    </LinearLayout>
</ScrollView> 
```

所以我希望在按下计算按钮时将屏幕的焦点设置到我的页面顶部（或者在上部文本视图中更具体），以便用户能够看到结果。我在 SO 中进行了搜索，但没有找到类似的东西。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-04T18:25:06.517

如果我理解您的问题，只需致电：

```
scrollView.scrollTo(0, 0); 
```

在您的计算按钮的 OnClickListener 中。

# sql - SQL Server 2005：最后以 NULL 值排序

> ID：11333863
> 
> 赞同：10
> 
> 时间：2012-07-04T18:19:58.580
> 
> 标签：sql, sql-server, tsql, sql-order-by

> **可能重复：**
> [使用 Null 的案例顺序](https://stackoverflow.com/questions/2498240/case-order-by-using-null)

我正在寻找按“ordernum”字段排序的记录列表。ordernum 字段是一个 int 字段。该字段以 NULL 开始，直到由用户设置。我希望 NULL 条目出现在列表的末尾。

我正在构建一个查询，如下所示：

```
select *, case when (ordernum is null) then [largestInt] else ordernum end as newordernum
from tableName
order by newordernum 
```

我知道我可以为 [largestInt] 输入最大可能 int 的值，但我想用一个变量替换 [largestInt]。这可能吗？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-07-04T18:19:59.390

我找到了一种在底部订购 NULL 值的方法。

[http://sqlblog.com/blogs/denis_gobo/archive/2007/10/19/3048.aspx](http://sqlblog.com/blogs/denis_gobo/archive/2007/10/19/3048.aspx)

它很好地满足了我的需求。我的查询现在是：

```
select *
from tableName
order by case when ordernum is null then 1 else 0 end, ordernum 
```

# database - 将数据从 Excel 导出到 Access - 错误：参数不是可选的

> ID：11333865
> 
> 赞同：0
> 
> 时间：2012-07-04T18:20:13.027
> 
> 标签：database, excel, ms-access, vba

当我按下按钮时，我正在尝试使用我的 Excel 文件上的 VBA 代码将数据从 Excel 2010 导出到 Access 2010。我只想将“水质”表中的数据导出到我数据库上的“水质”表中（在 excel 文件和访问文件中是其他表和表）。

我的实际代码是：

```
Sub Button14_Click()

' Exports data from the active worksheet to a table in an Access database

Dim cn As ADODB.Connection
Dim rs As ADODB.Recordset
Dim r As Long
Dim LastRow As Long

' Set cn = New ADODB.Connection

'cn.Open "Provider=Microsoft.ACE.OLEDB.12.0; " & _
    "Data Source=C:\Documents and Settings\Administrador\Mis documentos\MonEAU\modelEAU Database V.2.accdb; " & _
    "Persist Security Info=False;"

strCon = "Provider=Microsoft.ACE.OLEDB.12.0; " & _
    "Data Source=C:\Documents and Settings\Administrador\Mis documentos\MonEAU\modelEAU Database V.2.accdb"

' Late binding, so no reference is needed
Set cn = CreateObject("ADODB.Connection")

cn.Open strCon

' Find LastRow in Col A into the Sheet1
LastRow = Sheet1.Range("A" & Rows.Count).End(xlUp).Row

' Insert unto a table called Water_Quality
scn = "[Excel 8.0;HDR=YES;DATABASE=" & ActiveWorkbook.FullName & "]"
strSQL = "INSERT INTO Water_Quality " _
       & "SELECT * FROM " & scn & ".[Sheet1$A5:L" & LastRow & "]"

' Execute the statement
cn.Execute strSQL

rs.Close
cn.Close
Set rs = Nothing
Set cn = Nothing

End Sub 
```

我可以毫无问题地调试代码，但是当我运行它时，会出现运行错误：“Microsoft Office Access 数据库引擎找不到对象'Sheet1$A5:L10'。确保该对象存在并且拼写它的名称和正确的路径名。” 好像线路有问题`cn.Execute strSQL`。

我也检查了名称和路径名，但找不到问题所在。

任何解决它的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T19:02:11.613

以下是一些一次性插入所有数据的示例：

```
strCon = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=z:\docs\test.accdb"

''Late binding, so no reference is needed
Set cn = CreateObject("ADODB.Connection")

cn.Open strCon

''Create a table called ATable
scn = "[Excel 8.0;HDR=YES;DATABASE=" & ActiveWorkbook.FullName & "]"
strSQL = "SELECT * INTO ATable " _
       & "FROM " & scn & ".[Sheet7$A1:C4]"

''Execute the statement
cn.Execute strSQL

''Insert into a table called ATable
scn = "[Excel 8.0;HDR=YES;DATABASE=" & ActiveWorkbook.FullName & "]"
strSQL = "INSERT INTO ATable " _
       & "SELECT * FROM " & scn & ".[Sheet7$A1:C4]"

''Execute the statement
cn.Execute strSQL

''Insert into a table with no column header in Excel, 
''the fields are [afield],[atext],[another]
scn = "[Excel 8.0;HDR=NO;DATABASE=" & ActiveWorkbook.FullName & "]"
strSQL = "INSERT INTO ATable ([afield],[atext],[another]) " _
       & "SELECT F1 As afield, F2 As AText, F3 As another FROM " _
       & scn & ".[Sheet7$A1:C4]"

''Execute the statement
cn.Execute strSQL 
```

# gdb - 在 GDB 中打印 `errno` 名称而不是值

> ID：11333870
> 
> 赞同：5
> 
> 时间：2012-07-04T18:20:39.963
> 
> 标签：gdb, errno

我想知道是否有任何方法可以`errno`在 GDB 中打印符号名称而不仅仅是一个数字。例如，而不是

```
errno = 13 
```

我想看到类似的东西

```
EACCES 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-04T19:41:38.910

假设你最近有一个嵌入了 Python 的 GDB，你可以使用 Python 解释器来做你想做的事。

以下（未经测试的）代码应该是正确的：

```
(gdb) python import errno
(gdb) python print errno.errorcode[13] 
```

您应该能够定义一个 python 命令，例如`perrno`，这将减少打字。文档[在这里](http://sourceware.org/gdb/onlinedocs/gdb/Commands-In-Python.html#Commands-In-Python)。

# android - 将按钮背景颜色反转为 Android SDK 中的默认颜色

> ID：11333878
> 
> 赞同：1
> 
> 时间：2012-07-04T18:21:14.970
> 
> 标签：android, button, sdk, colors

我正在编写一个只有一个按钮的程序。一开始，按钮是默认颜色；单击按钮时，其背景颜色变为红色，然后再次单击，其背景颜色变为默认颜色。关于在方法中编写代码有什么建议`myButton.setOnClickListener(new OnClickListener(){}`吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T19:05:45.807

```
// Class member variable
private Drawable defaultDrawable;

myButton.setOnClickListener(new OnClickListener()
{
    if(defaultDrawable == null)
    {
        defaultDrawable = myButton.getDrawable();
        myButton.setBackgroundColor(Color.BLUE);
    }
    else
    {
        myButton.setBackgroundDrawable(defaultDrawable);
        defaultDrawable=null;
    }

} 
```

您绝对可以改进逻辑以使其更具可读性。

您也可以简单地使用具有两种状态的 ToggleButton。每个状态都有自己的背景可绘制/颜色，您可以在 xml 文件中指定。不需要听者。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T18:59:48.930

你可以这样做：

```
 boolean isSelected = false;
 int color1 = R.color.mycolor1;
 int color2 = R.color.mycolor2;
 myButton.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
            if(isSelected){
                  btn.setBackgroundColor( color1 );
            } else {
                btn.setBackgroundColor( color2 );
            }
            isSelected = !isSelected;               
        }
    }); 
```

另一种解决方案是扩展按钮类，将您的 isSelected 标志存储为成员类。这样，您可以在任何需要的地方重复使用这种按钮。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T19:08:15.180

您可以从当前主题的 R.attr.buttonStyle 获取颜色，如下所示：

```
 public static int getAttrResId( Context context, int attrId ) {
    TypedValue outValue = new TypedValue();
    context.getTheme().resolveAttribute( attrId, outValue, true );
    return outValue.resourceId;
  } 
```

# java - 在Java中将文件保存为双字节unicode？

> ID：11333881
> 
> 赞同：1
> 
> 时间：2012-07-04T18:21:35.180
> 
> 标签：java, unicode, unicode-string, mql5

好的，我正在运行 Java6（应用程序要求），我需要以 unicode 格式（没有大端或低端）保存文件，只有双字节 unicode。我这样做了：

```
 BufferedWriter bw = new BufferedWriter(
     new OutputStreamWriter(new FileOutputStream(f), "UTF-8"));
 bw.write(dec+",");
 bw.flush();
 bw.close(); 
```

`dec`字符串在哪里。

我还尝试了 UTF-16 和 Unicode。他们都写了一个unicode大端文件。问题是，这个文件是由只接受双字节 unicode 和 ANSI 的脚本语言读取的，但我想使用 unicode。 [http://www.mql5.com/en/docs/constants/io_constants/fileflags](http://www.mql5.com/en/docs/constants/io_constants/fileflags)

知道怎么做吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T18:23:59.793

从您的问题推断出问题是字节顺序，您想要`UTF-16LE`作为编码名称。从`Charset`列出始终支持的强制编码的文档中：

> UTF-16LE - 十六位 UCS 转换格式，小端字节序

# exception - How to log all exceptions in python 3

> ID：11333884
> 
> 赞同：1
> 
> 时间：2012-07-04T18:21:53.200
> 
> 标签：exception, logging, exception-handling, python-3.x, error-logging

There are a lot of exception I don't want to catch, I want them to stop processing, but, I still want the stack trace in the log file. Is there a way to setup a logger so that it automatically logs all exceptions?

Right now I am writing things like this a lot:

```
try:
  blah
except:
  logging.exception('doing blah')
  raise 
```

which take up a lot of time and space + it'll only log the exceptions for which I have a try clause for, not the other ones.

Thanks.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T08:34:03.570

You could use decorators to wrap individual functions and methods with code that logs any uncaught exception.

This means one additional line of code in front of any function definition that should do this logging. Advantage is: Can be quickly added and removed.

The decorator also could get arguments. For example you could specify the base class of those exceptions that you want to log.

[Here's a basic question & concise answer on how to write decorators](https://stackoverflow.com/q/739654/923794).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T18:53:21.847

You could put a catch all handler at the topmost level of your code:

```
try:
  everything
except:
  logging.exception('unhandled')
  raise 
```

# javascript - 如何使用 javascript 或 jQuery 解析 html 内容

> ID：11333885
> 
> 赞同：0
> 
> 时间：2012-07-04T18:21:57.467
> 
> 标签：javascript, jquery, html, parsing

有没有办法使用 javascript 解析 html 内容？

我需要在我的网站中仅显示来自其他网站的 div。那可能吗？例如，考虑我只想在我的网站中显示`div#leftcolumn`of 。`w3schools.com`这甚至可能吗？

如何使用 javascript 或 jQuery 做同样的事情？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T18:27:24.350

您需要查看[Same Origin Policy](http://en.wikipedia.org/wiki/Same_origin_policy)：

> 在计算中，同源策略是许多浏览器端编程语言（例如 JavaScript）的重要安全概念。该策略允许在源自同一站点的页面上运行的脚本无特定限制地访问彼此的方法和属性，但禁止跨不同站点的页面访问大多数方法和属性。

为了能够获取数据，它必须是：

**相同的协议和主机**

您需要实现[JSONP](http://remysharp.com/2007/10/08/what-is-)来解决它。

* * *

尽管在相同的协议和主机上，jQuery 具有[`load()`](http://api.jquery.com/load/)您可以像这样使用的功能：

```
$('#foo').load('somepage.html div#leftcolumn', function(){
  // loaded
}); 
```

* * *

另一种可能的解决方案（未经测试）是使用服务器端语言，而您不需要`jsonp`. 这是一个使用 PHP 的示例。

1）创建一个名为的php页面`ajax.php`并在其中放入以下代码：

```
<?php
  $content = file_get_contents("http://w3schools.com");
  echo $content ? $content : '0'; 
?> 
```

2）在某个页面上，输入以下代码：

```
$('#yourDiv').load('ajax.php div#leftcolumn', function(data){
    if (data !== '0') { /* loaded */ }
}); 
```

确保：

*   您指定正确的`ajax.php`文件路径
*   您[`allow_url_fopen`](http://www.php.net/manual/en/filesystem.configuration.php#ini.allow-url-fopen)已从 php.ini 打开。
*   您替换`yourDiv`为`id`要放入接收到的内容的元素

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T18:26:09.167

您需要使用 抓取 HTML 内容`HTTPRequest`，然后您可以抓取您希望在页面中显示的 HTML 内容。您需要为此了解某种服务器端语言，不幸的是，由于浏览器安全限制，Ajax/jQuery 无法为此工作，大多数“Ajax”请求都受制于[相同的来源策略](http://en.wikipedia.org/wiki/Same_origin_policy)；请求无法从不同的域、子域或协议成功检索数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T18:26:16.113

我能想到的：

```
<div style="hidden" id="container"></div> 
```

然后做某事（快捷方式@ [https://stackoverflow.com/a/11333936/57508](https://stackoverflow.com/a/11333936/57508)）

```
var $container = $('#container');
$container.load('someurl-on-your-domain');
var $leftcolumn = $('div#leftcolumn', $container);
$leftcolumn.appendTo($sthother); 
```

根据评论：是的，这是真的，有一个同源策略（[http://api.jquery.com/load/](http://api.jquery.com/load/)）：

> 由于浏览器安全限制，大部分“Ajax”请求都受同源策略的约束；请求无法从不同的域、子域或协议成功检索数据。

那么为什么不在您的域中创建一个代理，然后使用代理的输出呢？！嘿，这是冗长的 - 真的......但它有效:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-04T18:32:22.240

您需要创建一个 Web 服务来拉入代码。这是因为由于安全限制，您无法通过 JavaScript 拉入数据。这被称为同源政策，并在此页面的其他地方链接。

如果您使用 asp.net 技术，您可以`HtmlAgilityPack`在服务器端解析它。

*   [如何使用 HTML 敏捷包](https://stackoverflow.com/questions/846994/how-to-use-html-agility-pack/2588910#2588910)

然后，您可以使用以下方法从 jQuery 调用数据`.load()`：

*   [http://api.jquery.com/load/](http://api.jquery.com/load/)

想法是将其加载到隐藏的 div 中，例如：

```
$("#result").load("/webservice/pulldata.ashx"); 
```

并像查询任何普通的 jquery 元素一样查询它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-04T18:33:52.647

如果您想绕过 XSS 保护，您可以编写自己的服务器请求并从中获取信息。示例（php）：

获取内容.php

```
<? $fileContent = file_get_content("http://w3schools.com");
   echo $fileContent; ?> 
```

然后你可以使用任何你想修改的内容（甚至在回显之前）。

示例客户端脚本：

```
<div id="resultHtml"></div>
<script type="text/javascript">
$(document).ready(function(){
    $("#resultHtml").load("getFilecontent.php");
}); 
```

# iphone - 使用 NSScanner

> ID：11333886
> 
> 赞同：-4
> 
> 时间：2012-07-04T18:21:57.867
> 
> 标签：iphone, objective-c, nsscanner

我正在尝试扫描文本，但我不明白它是如何工作的，有人可以帮助我吗？

```
<a class="lightbox"  title ="elecciones mexico 2012" href="http://www.myWebpage.com/wp-content/uploads/2012/07/elecciones-mexico-2012.jpg"><img src="http://www.myWebpage.com/wp-content/uploads/2012/07/elecciones-mexico-2012.jpg" alt="" title="elecciones mexico 2012" width="643" height="391" class="aligncenter size-full wp-image-66795" /></a></p>
<p>I need this text</p>
<p> And this text.</p>
<p> Also this text! </p>

<p> I dont want this text </p>]]> 
```

所以我的最终字符串会是这样的：我需要这个文本和这个文本还有这个文本！

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T18:30:48.683

浪费你的镜头。这就是 NSXMLParser 存在的原因。

```
@interface TextParser: NSObject {
    NSMutableString *text;
}

- (id)init
{
    if ((self = [super init]))
    {
        text = [[NSMutableString alloc] init];
        NSXMLParser *parser = [[NSXMLParser alloc] initWithData:[string dataUsingEncoding:NSUTF8Stringaencoding];
        parser.delegate = self;
        [parser parse];

        // here text will contain all the text contained by the XML tags
    }
    return self;
}

- (void)parser:(NSXMLParser *)p foundCharacters:(NSString *)chars
{
    [text appendString:chars];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T18:34:03.177

好吧，我知道的 NSScanner (MacOS) 并不特别适合您正在寻找的那种解析。它只是通过一个字符串并返回“令牌”，例如由它们组成的字符集定义的数字或字符串。这对于处理字符串示例中的标签并不是特别有用，除非您愿意接受很高的错误机会。

在这种情况下，您可能会执行类似“读取由除 < 之外的任何内容组成的字符串”并将其附加到结果字符串，然后“读取由除 > 之外的任何内容组成的字符串”并丢弃等等之类的操作，直到您达到结束。根据您实际尝试解析的内容，这可能会或可能不会起作用；这绝对不是从 HTML 中获取纯文本的“方式”。

它也不是 XML（标签不匹配），所以使用 NSXML 可能也不是一个选项......

# nstextview - NSTextView 插入点滚动到屏幕中间——如何改变行为？

> ID：11333888
> 
> 赞同：1
> 
> 时间：2012-07-04T18:22:07.287
> 
> 标签：nstextview, nsscrollview

我要问的行为显然是正常的，但不是我喜欢的。

我有一个使用 NSTextView 的小程序。如果存在比可见范围更长的文本，并且插入点位于可见范围的底部，并且用户键入文本或点击键盘上的向下箭头，则文本会将插入点滚动到可见范围。（类似地，当插入点位于顶部并按下向上箭头时。）这似乎是正常的，因为 TextEdit 做同样的事情。

我个人觉得这很令人不安。我在 MacVim 中完成大部分常规文本输入，当插入点位于视图底部时，它只滚动一行。我注意到当插入点位于视图底部时，Xcode 编辑器也只滚动一行。

有没有一种简单的方法可以让 NSTextView 只向下滚动一行——比如 Xcode 编辑器——或者这是否需要 NSLayout 的机制？

我用谷歌搜索和搜索，但没有找到适合这个问题的搜索词！

# menuitem - Android menuItem 行为奇怪？

> ID：11333890
> 
> 赞同：1
> 
> 时间：2012-07-04T18:22:08.123
> 
> 标签：menuitem

我相信我的问题对于大多数有经验的 Android 开发人员来说有点简单，但对我来说却不是！

我正在尝试在 menuItem 中设置名称并使文本变为白色。首先，只有当我单击 menuItem 时才会显示文本，或者更确切地说，当我单击 menuItem 时，文本会变为白色并且可读。我不知道的是文本是否仅在我单击 menuItem 时才显示，或者是否由于某种原因在单击时将颜色更改为白色以便我能够看到它？任何有用的帮助如何使文本在 menuItem 中始终保持白色和可见？

item.setTitle(this.task.getName()); 应该是白色的，并且在 menuItem 中始终可见！。多谢！

```
@Override
public boolean onCreateOptionsMenu(Menu menu)
{
    MenuInflater inflater = getMenuInflater();
    inflater.inflate( R.menu.show_task_feedback_menu, menu );
    return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item)
{
    switch ( item.getItemId() )
    {
    case R.id.show_task_feedback_menu_add_feedback:  item.setTitle(this.task.getName()); <------------- Here is the problem!!!!!!!!!!
    this.startTaskFeedback();
    return true;
    default: return true;
    }
} 
```

# php - php setcookie 路径和域

> ID：11333896
> 
> 赞同：3
> 
> 时间：2012-07-04T18:22:47.430
> 
> 标签：php

我在用 php 设置 cookie 时遇到问题。我正在尝试设置一个 cookie `(id)`，`www.example.com/login.php`并且我想从网站上的每个地方使用。例如我想用它：

```
www.example.com/main.php
www.example.com/users.php
www.example.com/login.php 
```

这是我的 php 代码

```
$expire = time() + 31556926;
$cookie_id = $insert_userid;
setcookie ("id");
setcookie("id", $cookie_id, $expire, '/', 'www.example.com'); 
```

我没有任何子域。另外对于 setcookie 函数中的域索引，我不确定要提供哪个。`www.example.com or example.com`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T18:24:58.060

```
www.example.com 
```

如果您有子域并希望允许它们：

```
.example.com 
```

[维基百科](http://en.wikipedia.org/wiki/HTTP_cookie)在这方面非常有用：

> 默认情况下，大多数浏览器允许第一方 cookie — 具有域的 cookie 与请求主机的域相同或子域。例如，访问 www.example.com 的用户可以将 cookie 设置为域 www.example.com 或 .example.com，但不是 .com。

# design-patterns - 池和集群之间的区别

> ID：11333901
> 
> 赞同：12
> 
> 时间：2012-07-04T18:23:57.577
> 
> 标签：design-patterns, cluster-computing, load-balancing, pool

从最纯粹的角度来看，它们有点像相同的概念。两者都管理资源/节点集并控制来自外部组件或通过外部组件的访问。

使用池，您可以将这些资源/节点借入和从池中归还。

使用集群，您有一个位于资源/节点前面的负载均衡器，您可以向负载均衡器发出请求。

在这两种情况下，您都完全无法控制您的请求/借用映射到哪个资源/节点。

所以我提出一个问题：**“池”模式和负载平衡集群之间的根本区别是什么？**

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-07-06T20:55:22.833

池用于避免不断创建和销毁创建成本高昂的资源。池中的资源一次只能由一个客户端使用。可用资源存储在池中。当您需要一个时，您可以从池中获取它，从而使其对其他客户端不可用。完成资源后，将其放回池中。池通常用于数据库连接和线程。另一个优点是它允许将资源（连接、线程）的数量保持在合理的最大值。

集群是节点（计算机、虚拟机）的集合，它允许为大量并发客户端（可扩展性）提供服务并避免单点故障（故障转移、冗余）。另请注意，负载平衡器不一定是随机的。在许多情况下，负载均衡器使用粘性会话：一旦客户端被分配到集群的一个节点，他的所有后续请求都会转到同一个节点。

因此，池和集群之间的目标是不同的。并且存储在池中的资源与集群的资源不同。

# python - 具有自定义数据的 NLTK 命名实体识别

> ID：11333903
> 
> 赞同：48
> 
> 时间：2012-07-04T18:24:08.043
> 
> 标签：python, nlp, nltk, named-entity-recognition

我正在尝试使用 NLTK 从我的文本中提取命名实体。我发现 NLTK NER 对我的目的来说不是很准确，我也想添加更多我自己的标签。我一直在尝试找到一种方法来训练我自己的 NER，但我似乎无法找到合适的资源。我有几个关于 NLTK 的问题-

1.  我可以使用自己的数据在 NLTK 中训练命名实体识别器吗？
2.  如果我可以使用自己的数据进行训练，named_entity.py 是要修改的文件吗？
3.  输入文件格式是否必须在 IOB 中，例如。埃里克 NNP B 人？
4.  是否有任何资源 - 除了我可以使用的 nltk 食谱和带有 python 的 nlp 之外？

我非常感谢这方面的帮助

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-07-09T16:16:25.660

您是否致力于使用 NLTK/Python？我遇到了和你一样的问题，并且使用斯坦福的命名实体识别器得到了更好的结果：http: [//nlp.stanford.edu/software/CRF-NER.shtml](http://nlp.stanford.edu/software/CRF-NER.shtml)。使用您自己的数据训练分类器的过程在 FAQ 中有详细记录。

如果您真的需要使用 NLTK，我会在邮件列表中获取其他用户的一些建议：[http ://groups.google.com/group/nltk-users](http://groups.google.com/group/nltk-users) ://groups.google.com/group/nltk-users 。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2015-11-25T05:45:23.637

您可以轻松地将斯坦福 NER 与 nltk 一起使用。python脚本就像

```
from nltk.tag.stanford import NERTagger
import os
java_path = "/Java/jdk1.8.0_45/bin/java.exe"
os.environ['JAVAHOME'] = java_path
st = NERTagger('../ner-model.ser.gz','../stanford-ner.jar')
tagging = st.tag(text.split()) 
```

要训​​练您自己的数据并创建模型，您可以参考斯坦福 NER 常见问题解答的第一个问题。

链接是[http://nlp.stanford.edu/software/crf-faq.shtml](http://nlp.stanford.edu/software/crf-faq.shtml)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-10-02T15:46:54.937

我也有这个问题，但我设法解决了。您可以使用自己的训练数据。我在我的[github 存储库](https://github.com/arop/ner-re-pt/wiki/NLTK)中记录了这方面的主要要求/步骤。

我使用[了 NLTK-trainer](https://github.com/japerk/nltk-trainer)，所以基本上你必须以正确的格式（token NNP B-tag）获取训练数据，然后运行训练脚本。检查我的存储库以获取更多信息。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-07-29T22:24:03.680

[nltk.chunk.named_entity](http://www.nltk.org/_modules/nltk/chunk/named_entity.html)模块中有一些函数可以训练 NER 标注器。但是，它们是专门为 ACE 语料库编写的，并没有完全清理干净，因此需要编写自己的训练程序作为参考。

还有两个相对较新的在线指南 ( [1](https://nlpforhackers.io/named-entity-extraction/) [2](https://nlpforhackers.io/training-ner-large-dataset/) ) 详细介绍了使用 NLTK 训练 GMB 语料库的过程。

但是，正如上面答案中提到的，现在有许多工具可用，如果需要简化培训过程，真的不需要求助于 NLTK。CoreNLP 和 spaCy 等工具包做得更好。由于使用 NLTK 与从头开始编写自己的训练代码没有太大区别，因此这样做没有太大的价值。NLTK 和 OpenNLP 在某种程度上可以被视为属于 NLP 最近进展爆炸之前的过去时代。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-02-25T21:58:27.373

> 4.  是否有任何资源 - 除了我可以使用的 nltk 食谱和带有 python 的 nlp 之外？

您可以考虑使用`spaCy`为 NER 任务训练您自己的自定义数据。这是该[线程](https://stackoverflow.com/questions/66311315/custom-ners-training-with-spacy-3-throws-valueerror/66356372#66356372)中的一个示例，用于在自定义训练集上训练模型以检测新实体`ANIMAL`。代码已修复和更新，以便于阅读。

```
import random
import spacy
from spacy.training import Example

LABEL = 'ANIMAL'
TRAIN_DATA = [
    ("Horses are too tall and they pretend to care about your feelings", {'entities': [(0, 6, LABEL)]}),
    ("Do they bite?", {'entities': []}),
    ("horses are too tall and they pretend to care about your feelings", {'entities': [(0, 6, LABEL)]}),
    ("horses pretend to care about your feelings", {'entities': [(0, 6, LABEL)]}),
    ("they pretend to care about your feelings, those horses", {'entities': [(48, 54, LABEL)]}),
    ("horses?", {'entities': [(0, 6, LABEL)]})
]
nlp = spacy.load('en_core_web_sm')  # load existing spaCy model
ner = nlp.get_pipe('ner')
ner.add_label(LABEL)

optimizer = nlp.create_optimizer()

# get names of other pipes to disable them during training
other_pipes = [pipe for pipe in nlp.pipe_names if pipe != "ner"]
with nlp.disable_pipes(*other_pipes):  # only train NER
    for itn in range(20):
        random.shuffle(TRAIN_DATA)
        losses = {}
        for text, annotations in TRAIN_DATA:
            doc = nlp.make_doc(text)
            example = Example.from_dict(doc, annotations)
            nlp.update([example], drop=0.35, sgd=optimizer, losses=losses)
        print(losses)

# test the trained model
test_text = 'Do you like horses?'
doc = nlp(test_text)
print("Entities in '%s'" % test_text)
for ent in doc.ents:
    print(ent.label_, " -- ", ent.text) 
```

以下是输出：

```
{'ner': 9.60289144264557}
{'ner': 8.875474230820478}
{'ner': 6.370401408220459}
{'ner': 6.687456469517201}
... 
{'ner': 1.3796682589133492e-05}
{'ner': 1.7709562613218738e-05}

Entities in 'Do you like horses?'
ANIMAL  --  horses 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-03-06T16:09:15.747

要完成@Thang M. Pham 的答案，您需要在训练之前标记您的数据。为此，您可以使用[spacy-annotator](https://github.com/ieriii/spacy-annotator)。

这是另一个答案的示例： [Train Spacy NER on Indian Names](https://stackoverflow.com/questions/49483971/train-spacy-ner-on-indian-names/64063515#64063515)

# python-2.7 - Jinja2 模板不打印查询结果。“未定义错误：‘q’未定义”

> ID：11333906
> 
> 赞同：-1
> 
> 时间：2012-07-04T18:24:36.110
> 
> 标签：python-2.7, html-table, jinja2

```
class TablePage(BaseHandler):

    def get(self):
        ID_id = self.request.get('ID')
        key = db.Key.from_path("PQ", ID_id)
        p = PQ.get(key)
        qs = db.Query(QA)
        qs.ancestor(p)
        result = qs.get()

        template_values = {'qs': qs,
                        'p': p
            }
        self.render_template('table.html',  template_values ) 
```

我问这个问题是因为我试图将查询到的记录放入一个 html 表中。我的 template_values 是否正确且足够，或者我是否还必须以某种方式在 template_values 中包含变量“结果”的值？

在我的 python 代码中使用与我在 jinja2 模板中使用的相同类型的“for”循环，我添加了这个额外的调试代码，它显示 qs 中有两个 QA 实例，但错误仍然存​​在。

```
for q in qs:
            answers = q.answers
            logging.info("answers %s" % answers )

INFO     2012-07-05 09:23:03,853 views.py:84] answers [0L, 0L, 0L]
INFO     2012-07-05 09:23:03,853 views.py:84] answers [0L, 0L, 0L] 
```

我正在尝试这个，但 jinja2 模板似乎没有正确获取信息。例如，我有以下模板代码，它会产生错误“UndefinedError: 'q' is undefined”

```
<tbody>
{% for q in qs %}
    <tr>
    <td> {{ q.seqnum }} </td>
    <td> {{ q.question }} </td>
        {% for answer in q.answers %}
        <td> {{ answer }} </td>
        {% endfor %}
    <td> {{ q.answers|sum() }} </td>
{% endfor %}
<td>{{ q.date }}</td>
<td>{{ q.modified }}</td>
</tr>
</tbody> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T11:08:48.873

html 模板中的 {% endfor %} 为时过早；它必须是所有 q.xxx 值之后。d'oh

很抱歉浪费了别人的时间。

# c# - 来自 TickCount 的日期时间？

> ID：11333907
> 
> 赞同：1
> 
> 时间：2012-07-04T18:24:39.537
> 
> 标签：c#, datetime

我正在捕获 C# 程序中的一些事件，这些事件以时间戳作为系统滴答计数（自开始时间以来的毫秒数）返回。

根据我看到的其他问题，知道我可以从`System.Environment.TickCount`属性（或其他东西）获得相同的数字，我如何推断与收到的 TickCount 对应的 DateTime 对象？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-04T18:26:32.490

你不能，没有更多信息（即使那样它也可能是模棱两可的）。[`Environment.TickCount`](http://msdn.microsoft.com/en-us/library/system.environment.tickcount.aspx)返回：

> 一个 32 位有符号整数，包含自上次启动计算机以来经过的时间量（以毫秒为单位）。

...因此，除非您能找出计算机从某个地方启动的时间，否则您就不走运了。您很可能可以通过注册表项或系统调用来找出上次启动时间，但我不知道它们是否在我的脑海中。当然，您可以通过自己和尽可能早（或早）获得*近似值，并找出两者之间的差异：*`Environment.TickCount``DateTime.UtcNow`

```
public static DateTime UnreliableDateTimeFromTickCount(int tickCount)
{
    DateTime now = DateTime.UtcNow;
    DateTime boot = now - TimeSpan.FromMilliseconds(Environment.TickCount);
    return boot + TimeSpan.FromMilliseconds(tickCount);
} 
```

但是，即使这样*，*该值也会每 24.9 天循环一次，因此如果计算机的运行时间超过此时间，则计数是不明确的。

我建议`Environment.TickCount`尽可能避免使用，基本上 - 这完全在你的控制之下吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-05-03T16:39:24.030

我承认这是一个非常古老的问题，但由于这是我搜索时谷歌的第一次点击，我觉得其他人可能会登陆这里。@JonSkeet 答案中的所有要点都是有效的，请务必阅读它们并充分理解它适用于您的地方。对于我的具体情况，我知道我需要转换的滴答计数值将在最近几天内，但是存在捕获的值在 TickCount 溢出之前的风险，并且转换将发生在之后。下面是我编写的方法，它应该处理 TickCount 溢出的情况，并将给定的滴答计数转换为 DateTime，**只要它在过去 49 天内。**

详细说明 Environment.TickCount 的工作原理：当计算机打开时，它从 0 开始，每毫秒递增。启动 24.9 天后，达到 Int32 的容量，TickCount 从 Int32.MaxValue 翻转到 Int32.MinValue。初始包装后，它将每 49.7 天继续溢出。

```
/// <summary>
/// Converts the given tick count into a DateTime. Since TickCount rolls over after 24.9 days, 
/// then every 49.7 days, it is assumed that the given tickCount occurrs in the past and is 
/// within the last 49.7 days.
/// </summary>
/// <param name="tickCount">A tick count that has occurred in the past 49.7 days</param>
/// <returns>The DateTime the given tick count occurred</returns>
private DateTime ConvertTickToDateTime(int tickCount)
{
    // Get a reference point for the current time
    int nowTick = Environment.TickCount;
    DateTime currTime = DateTime.Now;
    Int64 mSecElapsed = 0;

    // Check for overflow condition
    if( tickCount < nowTick) // Then no overflow has occurred since the recorded tick
    {
        // MIN|--------------TC---------------0------------Now-------------|MAX
        mSecElapsed = nowTick - tickCount;
    }
    else // tickCount >= currTick; Some overflow has occurred since the recorded tick
    {
        // MIN|--------------Now---------------0------------TC-------------|MAX
        mSecElapsed = Convert.ToInt64((int.MaxValue - tickCount) + (nowTick + Math.Abs(Convert.ToDouble(int.MinValue))));   // Time BEFORE overflow + time since the overflow
    }

    DateTime tickCountAsDateTime = currTime - TimeSpan.FromMilliseconds(mSecElapsed);
    return tickCountAsDateTime;        
} 
```

为了测试该方法，我使用了以下代码：

```
static void Main(string[] args)
{
    Console.WriteLine("Test Start Time: {0}", DateTime.Now);

    // 10 seconds ago
    int tc0 = CalculateTC(TimeSpan.FromSeconds(10));
    Console.WriteLine("Expect 10 seconds ago: {0}", ConvertTickToDateTime(tc0));

    // 10 minutes ago
    int tc1 = CalculateTC(TimeSpan.FromMinutes(10));
    Console.WriteLine("Expect 10 minutes ago: {0}", ConvertTickToDateTime(tc1));

    // 10 hours ago
    int tc2 = CalculateTC(TimeSpan.FromHours(10));
    Console.WriteLine("Expect 10 hours ago: {0}", ConvertTickToDateTime(tc2));

    // 1 Day ago
    int tc3 = CalculateTC(TimeSpan.FromDays(1));
    Console.WriteLine("Expect 1 Day ago: {0}", ConvertTickToDateTime(tc3));

    // 10 Day ago
    int tc4 = CalculateTC(TimeSpan.FromDays(10));
    Console.WriteLine("Expect 10 Days ago: {0}", ConvertTickToDateTime(tc4));

    // 30 Day ago
    int tc5 = CalculateTC(TimeSpan.FromDays(30));
    Console.WriteLine("Expect 30 Days ago: {0}", ConvertTickToDateTime(tc5));

    // 48 Day ago
    int tc6 = CalculateTC(TimeSpan.FromDays(48));
    Console.WriteLine("Expect 48 Days ago: {0}", ConvertTickToDateTime(tc6));

    // 50 Day ago (Should read as a more recent time because of the Environment.TickCount wrapping limit - within a day or two)
    int tc7 = CalculateTC(TimeSpan.FromDays(50));
    Console.WriteLine("Expect to not see 50 Days ago: {0}", ConvertTickToDateTime(tc7));

    // 10 Seconds ahead (Should read as a very old date - around 50 days ago)
    int tc8 = Convert.ToInt32(Environment.TickCount + TimeSpan.FromSeconds(10).TotalMilliseconds);
    Console.WriteLine("Expect to not see 10 seconds from now: {0}", ConvertTickToDateTime(tc8));    
}

private static int CalculateTC(TimeSpan timespan)
{
    int nowTick = Environment.TickCount;
    double mSecToGoBack = timespan.TotalMilliseconds;

    int tc;

    if (Math.Abs(nowTick - int.MinValue) >= mSecToGoBack) // Then we don't have to deal with an overflow
    {
        tc = Convert.ToInt32(nowTick - mSecToGoBack);
    }
    else // Deal with the overflow wrapping
    {
        double remainingTime = nowTick + Math.Abs(Convert.ToDouble(int.MinValue));
        remainingTime = mSecToGoBack - remainingTime;

        tc = Convert.ToInt32(int.MaxValue - remainingTime);
    }
    return tc;
} 
```

以下是测试应用程序的输出：

```
Test Start Time: 5/3/2019 4:30:05 PM
Expect 10 seconds ago: 5/3/2019 4:29:55 PM
Expect 10 minutes ago: 5/3/2019 4:20:05 PM
Expect 10 hours ago: 5/3/2019 6:30:05 AM
Expect 1 Day ago: 5/2/2019 4:30:05 PM
Expect 10 Days ago: 4/23/2019 4:30:05 PM
Expect 30 Days ago: 4/3/2019 4:30:05 PM
Expect 48 Days ago: 3/16/2019 4:30:05 PM
Expect to not see 50 Days ago: 5/3/2019 9:32:53 AM
Expect to not see 10 seconds from now: 3/14/2019 11:27:28 PM 
```

我希望这对可能与我处于类似情况的人有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-11-08T17:30:48.657

而不是滴答计数`int`

似乎您更喜欢不同的数据类型：

*   系统正常运行时间为`TimeSpan`
*   系统启动时间为`DateTime`

*（但是，根据您问题的措辞，我不能 100% 确定）*

下面是使用[Windows Management Instrumentation](https://docs.microsoft.com/en-us/windows/win32/wmisdk/wmi-start-page)获取这些属性的代码示例。

```
using System;
using Microsoft.Management.Infrastructure;
using Microsoft.Management.Infrastructure.Options;
using System.Linq;

namespace MachineTimeStamps
{
    class Program
    {
        /// <summary>
        /// Print the system Uptime and Last Bootup Time (using Win32_OperatingSystem LocalDateTime & LastBootUpTime properties).
        /// </summary>
        public static void Main(string[] args)
        {
            var uptime = GetSystemUptime("COMPUTER_NAME");

            if (!uptime.HasValue)
            {
                throw new NullReferenceException("GetSystemUptime() response was null.");
            }

            var lastBootUpTime = GetSystemLastBootUpTime("COMPUTER_NAME");

            if (!lastBootUpTime.HasValue)
            {
                throw new NullReferenceException("GetSystemLastBootUpTime() response was null.");
            }

            Console.WriteLine($"Uptime: {uptime}");
            Console.WriteLine($"BootupTime: {lastBootUpTime}");
            Console.ReadKey();
        }

        /// <summary>
        /// Retrieves the duration (TimeSpan) since the system was last started.
        /// Note: can be used on a local or a remote machine.
        /// </summary>
        /// <param name="computerName">Name of computer on network to retrieve uptime for</param>
        /// <returns>WMI Win32_OperatingSystem LocalDateTime - LastBootUpTime</returns>
        private static TimeSpan? GetSystemUptime(string computerName)
        {
            string namespaceName = @"root\cimv2";
            string queryDialect = "WQL";

            DComSessionOptions SessionOptions = new DComSessionOptions();
            SessionOptions.Impersonation = ImpersonationType.Impersonate;

            CimSession session = CimSession.Create(computerName, SessionOptions);

            string query = "SELECT * FROM Win32_OperatingSystem";
            var cimInstances = session.QueryInstances(namespaceName, queryDialect, query);

            if (cimInstances.Any())
            {
                var cimInstance = cimInstances.First();
                var lastBootUpTime = Convert.ToDateTime(cimInstance.CimInstanceProperties["LastBootUpTime"].Value);
                var localDateTime = Convert.ToDateTime(cimInstance.CimInstanceProperties["LocalDateTime"].Value);

                var uptime = localDateTime - lastBootUpTime;
                return uptime;
            }

            return null;
        }

        /// <summary>
        /// Retrieves the last boot up time from a system.
        /// Note: can be used on a local or a remote machine.
        /// </summary>
        /// <param name="computerName">Name of computer on network to retrieve last bootup time from</param>
        /// <returns>WMI Win32_OperatingSystem LastBootUpTime</returns>
        private static DateTime? GetSystemLastBootUpTime(string computerName)
        {
            string namespaceName = @"root\cimv2";
            string queryDialect = "WQL";

            DComSessionOptions SessionOptions = new DComSessionOptions();
            SessionOptions.Impersonation = ImpersonationType.Impersonate;

            CimSession session = CimSession.Create(computerName, SessionOptions);

            string query = "SELECT * FROM Win32_OperatingSystem";
            var cimInstances = session.QueryInstances(namespaceName, queryDialect, query);

            if (cimInstances.Any())
            {
                var lastBootUpTime = Convert.ToDateTime(cimInstances.First().CimInstanceProperties["LastBootUpTime"].Value);
                return lastBootUpTime;
            }

            return null;
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-01-09T12:07:01.780

我似乎从 Jerren 的解决方案中得到了错误的结果；这可能是一个捏造/不正确的 - 涉及溢出的复杂性，但这让我接近了我的测试的正确结果，试图近似结果：

```
 // TimeSpan result

    var approxUpTime = TryApproximateUpTime();

    private static TimeSpan? TryApproximateUpTime()
    {
        TimeSpan? retVal;

        var envTickCountInMs =
            Environment.TickCount;

        try
        {
            retVal = 
                envTickCountInMs > 0
                    ?
                        new DateTime()
                            .AddMilliseconds(Environment.TickCount) -
                                DateTime.MinValue
                    :
                        new TimeSpan(
                            new DateTime(
                                ((long)int.MaxValue + (envTickCountInMs & int.MaxValue)) * 10 * 1000).Ticks);
        }
        catch (Exception)
        {
            // IGNORE
            retVal = null;
        }

        return retVal;
    } 
```

# hibernate - BigDecimal 0.000 到 0

> ID：11333915
> 
> 赞同：3
> 
> 时间：2012-07-04T18:25:19.420
> 
> 标签：hibernate, plsql, bigdecimal

我正在用 JUnit 测试一个 PLSQL 过程，以达到他在 Java/Hibernate 中的“等于”。PLSQL 中的一个结果是 0，但 Java 结果是 0.0000，我尝试使用调用的函数`stripTrailingZeros`但没有用。我认为就实际而言，它们是相同的，但根本不确定。

编辑我想删除没有数字意义的零，例如

2.3400 > 2.34

我可以这样做，`stripTrailingZeros`但是当我应用该函数时返回相同的东西：

0.0000 > 0.0000

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-05T13:19:56.520

您正在做正确的事情，但是方法的实现是错误的。换句话说，Java 坏了。[有一个关于这个问题的错误报告，](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6480539)但它似乎还没有解决。链接中包含*客户提交*的解决方法。基本上，做一个明确`compareTo`的 with `new BigDecimal("0")`，它工作正常。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-04T21:32:05.330

```
BigDecimal bd1 = new BigDecimal("0.0000");
System.out.println(bd1); // -> 0.0000
BigDecimal bd2 = bd1.setScale(0);
System.out.println(bd2); // -> 0
System.out.println(bd1.equals(bd2)); // -> false
System.out.println(bd1.compareTo(bd2) == 0); // -> true 
```

# git - 如何使备份 git 存储库与本地存储库保持同步，“git push --mirror”或“git remote update”

> ID：11333918
> 
> 赞同：5
> 
> 时间：2012-07-04T18:25:30.180
> 
> 标签：git, git-svn

在工作中，我们在服务器上使用 svn，但我在本地使用 git（通过 git-svn）来利用尚未准备好共享的速度/分支/提交等。

这工作正常，但如果出现问题，我很不舒服连续几天只更改我的一台计算机，并且希望在我们的文件共享上拥有一个私人备份存储库。

我使用如下命令创建了本地仓库的副本：

```
git clone --mirror MyRepo z:/MyRepo.git 
```

并将其作为远程添加到我的本地：

```
git remote add backup z:/MyRepo.git 
```

在一天结束时使备份存储库与我的本地存储库保持同步的最佳方法是什么？

我认为它是以下之一，但不知道它们是否等效，或者如果不是权衡是什么。

1.  在本地存储库中：`git push --mirror backup`

2.  或在备份存储库中：`git remote update`

或者确实有更好的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T19:16:24.543

如果您可以访问带有 SVN 存储库的服务器，则可以使用以下方案：将[SubGit](http://subgit.com)安装到 SVN 存储库中（它将在服务器上创建一个 Git 存储库，该存储库将与 SVN 存储库不断同步，您可以将其视为SVN 存储库的 Git 接口）。然后只需使用纯 Git 接口（拉取、推送）而不是 git-svn，就好像它始终是一个 Git 存储库一样。所有更改将自动与 SVN 同步。这种方法与您描述的有点不同，因为您直接在服务器上拥有镜像，但对您来说可能很有趣。

# java - AWS Java 客户端不对 Java 7 上的发电机端点进行身份验证

> ID：11333921
> 
> 赞同：3
> 
> 时间：2012-07-04T18:25:57.580
> 
> 标签：java, amazon-web-services, amazon-dynamodb

有一个简单的扫描调用从我的代码转到 dynamo，它在 Java 6 中运行良好，但在 Java 7 中运行良好。[亚马逊论坛](https://forums.aws.amazon.com/thread.jspa?threadID=76183)提到了这个问题并建议禁用证书验证，这对我来说似乎有风险。有谁知道 Java 6 和 7 之间发生了什么变化导致了这个问题？

2012 年 7 月 3 日下午 3:51:27 com.amazonaws.http.AmazonHttpClient executeHelper 警告：无法执行 HTTP 请求：对等方未通过身份验证

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T23:22:07.303

如果它适用于一个 JRE 而不是另一个，那么问题可能是您的 1.7 JRE 密钥库中没有安装正确的 CA 证书。有关详细信息，请参阅此帖子：

[http://welocally.com/?p=1358](http://welocally.com/?p=1358)

您也可以只连接到 Dynamo 端点的 http:// 版本，从而完全避免使用 ssl（并因此获得很好的性能提升）。

# css - Chrome 不打印？

> ID：11333923
> 
> 赞同：1
> 
> 时间：2012-07-04T18:26:08.030
> 
> 标签：css, google-chrome, printing

我的网站上有打印机样式表设置。它适用于除 Chrome 之外的所有浏览器。Chrome 在打印预览中不显示任何内容，当我尝试打印时，Chrome 什么也不打印。如果我删除打印样式表并单击打印，它将显示整个页面，*包括*不应显示的页面隐藏部分。不知道该怎么做或为什么它不起作用。

其他人见过这种行为吗？我能做些什么？你需要看什么代码？

如果出现问题，这是调用打印样式表的方式吗？

```
<link href="print.css" media="print" type="text/css" rel="stylesheet" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T20:40:35.730

这个问题似乎是一个缓存问题。一旦我刷新了缓存并更正了早期的错误，问题就会自行解决。

# file-transfer - 将文件传输到 1000 台服务器的有效方法

> ID：11333929
> 
> 赞同：1
> 
> 时间：2012-07-04T18:26:41.690
> 
> 标签：file-transfer, scp

我最近在一次采访中被问到这个问题。假设我有 2000 台服务器。我想将一个 5GB 的文件从中央服务器传输到所有这些服务器。想出一个有效的算法。

我的回应：我将使用 perl/python 将文件从集中式服务器传送到第一台服务器。同时，我还将开始向其他服务器发送文件。我觉得一个接一个地做效率很低，因此并行做会加快速度。

有一个更好的方法吗 ？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-04T18:32:53.453

当然，您会使用某种脚本，因为您不想手动执行此操作。但是，不是将所有文件从一台服务器发送到所有其他服务器，而是开始将文件发送到 k 个服务器。一旦这些 k 个服务器收到文件（假设在时间 t），它们也可以开始分发文件，所以大约在 t 之后。时间 2*t 已经 k^2 服务器拥有该文件，而不是原始解决方案中的 2*k。在时间 3*t 之后 k^3 服务器已经获得了文件...您继续使用该算法，直到每个服务器都获得它的文件。

为了使整个过程更快一点，您还可以将文件分成块，以便服务器可以在收到整个文件之前开始重新分发它（您最终会得到类似 torrent 的东西）

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-05T13:06:08.237

在这种情况下，绝对“洪流”是负载平衡的最佳且经过验证的策略。但我认为，当面试向我提出这样的假设性问题时，她可能也在寻找你的假设并期待反问。

1.  服务器的上传/下载能力。
2.  网络本地化，即不同机器有多少跳。
3.  文件可以存档和发送吗
4.  如何验证完整性（md5 哈希）

感谢@Misch，现在我的计划仍然是相同的“洪流”。但是，如果所有服务器都在相同的 n/w 上并且具有相同的容量，那么；

1.  将文件分成 2000 个部分，每个服务器获得 5GB/2000 ~ 2.5 MB（文件段）来托管，中央作为信标服务器告诉其他服务器文件在哪里。

2.  每台服务器都会以**随机顺序**从其他服务器下载这些块，如果我们按顺序下载，则会导致一台机器出现瓶颈。

根据机器，我们可以拥有最大的活动上传/下载线程，每个线程向上/向下单独的文件段。当服务器为最大主机提供服务时，它可以拒绝文件下载请求。请求主机将简单地拾取另一个随机段进行下载。

1.  我们可以对单个文件段和所有文件组合使用一些校验和，以验证文件完整性。

这确保所有服务器都在接近其上行/下行带宽的情况下上传/下载。但很明显，在现实世界中，我可以拥有一个安全的种子，然后直接使用它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T01:46:47.260

如果您将文件拆分为小块，那么每个服务器都可以开始传输它在整个文件下载之前收到的块。这基本上是 bittorrent 使用的算法，并且比让服务器仅在收到整个文件后才发送文件要快得多（即渐近地）。

事实上，对于一个无限小的块大小（即纯粹的理论情况），将一个大小的文件分发`m`到`n`服务器所花费的时间甚至不取决于`n`- 仅取决于正在分发的文件的大小 (即 O( `m`))。当然，在实际情况下，需要考虑一些开销/细节（[d1val](https://stackoverflow.com/a/11344956/477451)总结得很好），这使得在实践中花费的时间稍长。

相反，如果您让每台服务器仅在收到整个文件后才将文件上传到另一台服务器，则运行时间为 O( `m`log( `n`)) - 这比 bittorrent 方法渐进地大。

另外，补充一下，*通常*当面试问这种问题时，他/她问的是算法，而不是实现细节。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-12T16:08:10.573

我被问到一个类似的问题，其中不接受洪流的做事方式。问题是“如果微软必须将软件更新推送到它在美国拥有的 2000 台服务器，那么它将如何做到这一点”——因此这些服务器无法进行基于种子的文件传输。

我的回答是：从具有 2000 个节点列表的主服务器有一个批处理过程，批处理的容量将取决于您跨这些节点的网络速度。

1.  因此，首先选择 100 个节点的样本并在这些节点上进行速度测试。速度测试将指示这 100 个节点的可用速度中值是多少，并且可能作为整个网络的样本。

2.  因此，现在您的值 X Mbps 是您可以跨这些节点进行传输的速度。

3.  查看您自己的传出数据速度的容量。因此，如果中央服务器的上传速度为 YGbps

然后批处理大小=您的上传容量（Y）/ X（speedtest找到的速度）。

根据这个批处理大小，您可以分批并行传输到 2000 个服务器。

任何输入？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-09-26T16:34:47.940

我想您可以将文件放在 NFS 服务器上并让您的主机安装该 NFS 分区。

# java - 无法将 Groovy 代码编译成 java 类文件

> ID：11333932
> 
> 赞同：0
> 
> 时间：2012-07-04T18:27:03.297
> 
> 标签：java, eclipse, grails, groovy

我正在尝试在我的 Java EE 应用程序中实现独立的 GORM。我已经为域创建了一个 Groovy 类，但是我的 Eclipse 没有将它编译成 java 类，并且 GORM 无法找到它。
我有

*   日食太阳神
*   [从这里](http://dist.codehaus.org/groovy/distributions/greclipse/snapshot/e3.6/)安装的 Groovy Eclipse 插件

*   我的 lib 文件夹中的 groovyall.jar

*   我已将我的项目配置为 Groovy 项目。

我在这里还缺少什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T21:55:41.013

您是否在项目中添加了 Groovy 特性？包含 Groovy 源的文件夹是否标记为源文件夹？您是否在 Groovy 编译器首选项中选择了正确的 Groovy 版本？

# javascript - 用 JavaScript 打印数组

> ID：11333933
> 
> 赞同：-1
> 
> 时间：2012-07-04T18:27:03.507
> 
> 标签：javascript, arrays, printing

我需要打印一个二维数组等：

```
var myArray = [
[0,1,2,0],
[0,1,2,0]
[0,1,2,0]
[0,1,2,0]
[0,1,2,0]
[0,1,2,0]
]; 
```

并使输出完全显示数组的样子：

ETC

```
alert(myArray); 
```

将显示：

```
var myArray = [
[0,1,2,0],
[0,1,2,0]
[0,1,2,0]
[0,1,2,0]
[0,1,2,0]
[0,1,2,0]
]; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T18:28:36.010

你可以试试这个：

```
JSON.stringify(myArray,null,'\t') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T18:39:11.797

```
alert('var myArray = [\n' + myArray.join("\n") + '\n];') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T18:29:31.630

您正在寻找类似 PHP 的东西`printr()`——这不是标准 JS 的一部分，但大量的库将为您提供该功能。开始使用 JSON 编码器进行谷歌搜索。

# django - 如何在不使用模型的情况下在 django-nonrel 中配置 mongoDB 索引？

> ID：11333938
> 
> 赞同：0
> 
> 时间：2012-07-04T18:27:32.130
> 
> 标签：django, mongodb, django-models, pymongo, django-nonrel

我正在使用 mongodb 和 django-nonrel 构建一个站点。我在[各个地方](https://stackoverflow.com/questions/2740837/which-python-api-should-be-used-with-mongo-db-and-django)读到过，对于 mongo，使用直接 pymongo 比使用 django ORM 更好。这也符合我的经验——django 的 ORM 对于关系数据库来说非常棒，但是对于 pymongo 没有提供的功能并没有太多。

我的问题是我最初不知道如何在不使用 django 的 ORM 的情况下设置数据库表（错误...“集合”）。我需要做什么才能摆脱models.py和syncdb的束缚，自己写代码？

似乎有人应该已经为此创建了指南，但我找不到。

更详细一点：

现在，我正在构建模型并运行 syncdb 来配置数据库。到目前为止，django 的 ORM 魔法已经让它发挥了作用。但是我需要做一些稍微花哨的事情，比如对子元素进行索引，所以我认为 ORM 不再适合我了。

最重要的是，我不在项目的其他任何地方使用模型（除了 auth_users 和会话）。真正的模式在 json 中的其他地方定义。我不想同时维护模型类和 json 模式——这只是不好的做法。

最后，我有一个“loadfixtures”管理命令，用于刷新、syncdb 和加载fixture。看起来这对于新的 ORM 替换代码来说是一个非常好的地方，我只是不知道那个代码应该是什么样子......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T03:56:28.470

使用 MongoDB，您不需要额外的步骤来预先声明[模式](http://www.mongodb.org/display/DOCS/Schema+Design)以“设置”集合。MongoDB 面向文档的特性实际上并没有强制执行严格的模式。集合中的文档可以根据需要具有不同的字段。习惯这是一个不同的概念，但是一旦您开始向其中保存数据，就会创建该集合。

可以在集合上使用 pymongo 的[ensureIndex](http://api.mongodb.org/python/current/api/pymongo/collection.html)添加索引。

与插入数据时的集合创建类似，添加索引时如果集合不存在，也会创建一个集合。

一篇可以帮助您入门的文章：[将 MongoDB 与 Django 结合使用](http://www.ibm.com/developerworks/opensource/library/os-django-mongo/index.html)。

如果您是 MongoDB 新手，您可能还想尝试简短的[在线教程](http://try.mongodb.org/)。

# android - 错误代码媒体播放器语法和定义

> ID：11333939
> 
> 赞同：0
> 
> 时间：2012-07-04T18:27:33.210
> 
> 标签：android, android-mediaplayer, android-videoview, error-code

我找不到有关 Android 错误代码的任何文档。我正在整理一个似乎在较低级别的 API 设置上工作但不在更高级别的应用程序。尝试播放音频文件时会发生错误，就像我说的那样，这一切都在较低版本中工作。

我在日志中看到的错误代码是：

> MediaPlayer 信息/警告 (1, 32)
> MediaPlayer 信息 (1,32)
> MediaPlayer 信息/警告 (1,26)
> MediaPlayer 信息 (1,26)
> MediaPlayer 错误(351, -4)
> MediaPlayer 错误(351,-4)
> VideoView 错误(351,-4)

那么有人可以详细解释一下这是如何工作的吗？我知道我有错误`MediaPlayer`，可能`VideoView`根据上面的数据，但数字代表什么？我认为这是一个特定的错误，但哪个错误？

我似乎找不到任何关于此以及如何解码的内容。我在哪里可以找到有关如何找出这意味着什么的文档，这是主要问题。

如果我能更好地得到这个特定错误代码的答案，但同样是实际的文档源，所以我自己可以查找其他代码也会有很大的好处。

这是 Eclipse 导出的确切日志文件：

```
07-04 12:22:48.298: V/key =(6969): http://xxxxxx/glennharrold/audio/normal/relaxsleepwellfull.mp3
07-04 12:22:48.388: D/MediaPlayer(6969): Couldn't open file on client side, trying server side   
07-04 12:22:48.388: D/SprintMM(6969): Proxy will be bypassed because of WIFI connection.
07-04 12:22:48.508: W/MediaPlayer(6969): info/warning (1, 32)
07-04 12:22:48.508: I/MediaPlayer(6969): Info (1,32)
07-04 12:22:48.508: W/MediaPlayer(6969): info/warning (1, 26)
07-04 12:22:48.508: I/MediaPlayer(6969): Info (1,26)
07-04 12:22:48.508: E/MediaPlayer(6969): error (351, -4)
07-04 12:22:48.508: E/MediaPlayer(6969): Error (351,-4)
07-04 12:22:48.508: D/VideoView(6969): Error: 351,-4 
```

现在还不清楚究竟是什么意思，我可以看到它可能与在客户端找不到文件有关，但是这个完全相同的代码适用于较低的 API 版本我将工作代码复制到这个应用程序以制作一个新的一个。我在 Eclipse 的 logcat 中看到的唯一一件事是MediaPlayer 文本前面`(6969)`的`D/`, `E/`, `W/`,`I/`不知道这些额外的东西是什么意思，它只在我将代码导出到文本时出现文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T20:02:50.893

仅供参考，当 logcat 显示信息时，它是以下之一：

*   D -**调试**
*   W -**警告**
*   我-**信息**

后跟一个带有标识符的“/”，以标识通常由 TAG 定义的 Java 代码名称，这是一种标准做法：

```
public class fooClass{
    private static final String TAG = "fooClass";
    // ... SNIP
} 
```

接下来是在 DalvikVM 中运行的 Java 代码的进程 ID，以及一些信息性错误代码/消息，具体取决于程序规范。

例如，从`fooClass`上面突出显示的 Java 类继续，假设它有这样的函数`fooMethod`：

```
private void fooMethod(){    
    Log.d(TAG, "fooMethod() - This is a debug message");    
    //    
    Log.i(TAG, "fooMethod() - This is a info message");    
    //    
    Log.w(TAG, "fooMethod() - This is a warning message"); 
} 
```

现在它将显示在日志中，如下所示：

```
07-04 20:58:00 D/fooClass (1234): fooMethod() - This is a debug message 
07-04 20:58:00 I/fooClass (1234): fooMethod() - This is a info message 
07-04 20:58:00 W/fooClass (1234): fooMethod() - This is a warning message 
```

一些应用程序会根据程序员的判断选择显示消息或显示神秘消息。

值得注意的是，在 Android 框架本身内，一些服务将显示一条无意义的消息，除了 ROM 本身背后的开发人员之外，对任何人都没有什么意义，以帮助进行故障排除。

***编辑：***由于 OP 坚持试图明确理解这一点，这里是

[MediaPlayer 的 AOSP 源代码位于此处](https://github.com/android/platform_frameworks_base/blob/master/media/java/android/media/MediaPlayer.java)的 github 上，在第**1547**行的源代码中有对“pvmf_return_codes.h”的引用，快速 google-fu 导致此[链接](http://www.netmite.com/android/mydroid/external/opencore/pvmi/pvmf/include/pvmf_return_codes.h)。错误代码和条件是由于不兼容或媒体错误造成的。

# jakarta-ee - EJB 的故障转移？

> ID：11333941
> 
> 赞同：0
> 
> 时间：2012-07-04T18:27:39.183
> 
> 标签：jakarta-ee, jboss, glassfish, ejb-3.0, failover

Java EE 应用程序容器为 EJB 提供“故障转移”支持，在他们的文档中从不引用任何首先*需要*故障转移 EJB 的原因！

这些“故障转移”情况何时发生，是什么原因造成的？这只是引发异常的情况吗？或者应用程序容器是否有可能实际“丢失”或“破坏”EJB？

通常，当我过去谈到故障转移时，它是一个网络组件，例如由于某种原因而停机的服务器。我只是在这里有一个心理障碍，试图设想什么会导致一个已部署的*软件*死亡并“故障转移”。

具体示例的奖励积分，而不仅仅是模糊、模糊、抽象的描述（！）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T22:02:38.377

Java EE 通常不提供您所说的这种故障转移。如果它完全受支持，那么它就是特定实现的专有特性。

通常，此类故障转移适用于在某些服务器上运行的远程 EJB，该服务器本身可能由于网络问题而崩溃或变得不可用。在这种情况下，客户端应用程序服务器可以指定多个故障转移 URL，以便如果一个服务器无响应，则将自动使用另一个服务器，以一种对想要与所述 bean 对话的代码透明的方式。

相同的机制也可用于基本负载平衡。如果您的代码要联系的远程 EJB 所在的服务器处于高负载状态，则客户端 AS 可以自动选择运行相同远程 bean 但负载较小的服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-12T07:53:08.427

您可以查看[JBoss 中“集群 EJB”](https://docs.jboss.org/author/display/AS71/Clustered+EJBs)情况下故障转移的详细说明。

您需要通用故障转移并超越 JEE 和 EJB 的原因 - 单个服务器可能变得不可用。

# c# - WCF - 自托管或 IIS 首选项？

> ID：11333942
> 
> 赞同：1
> 
> 时间：2012-07-04T18:27:43.070
> 
> 标签：c#, wcf, iis

我对 C# 和 WCF 比较熟悉。我已经登陆了一个项目，我正在创建作为 Windows 服务运行的自托管 WCF 服务，但我开始怀疑是否应该改用 IIS（我们目前不使用），因为管理所有这些服务最终可能会变得很麻烦。

尽管我尽了最大的努力，但我还没有找到任何确切的信息来说明为什么我会偏爱一种方法而不是另一种方法。这些服务主要用于实用程序，如调整图像大小、检索文件等，并由 C# 和 Java 客户端调用。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T18:32:42.693

最短的答案是“视情况而定”。根据您的要求。您可以毫无问题地自托管，但 IIS 将更有效地管理资源，并使您能够比自托管更轻松地微调内容。

例如，在 IIS 中部署新版本或删除旧版本会更简单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T18:32:19.620

无论哪种方式都很好。

通常，使用内置的 IIS 托管功能可以使您的部署和配置更加简单。您还拥有 http.sys 的激活模型——这意味着 IIS 将在适当的消息到达时为您启动必要的过程。

任何平台的客户端都可以连接到 WCF 服务，无论它们是自托管的还是 IIS 托管的。

ps：[如何允许 IIS 托管的 WCF 服务将其配置数据存储在不同的 xxx.config 文件中](http://blogs.msdn.com/b/dotnetinterop/archive/2008/09/22/custom-service-config-file-for-a-wcf-service-hosted-in-iis.aspx?Redirected=true)

# java - 使用 java swing 为 JTabbedPane 中的选项卡着色

> ID：11333946
> 
> 赞同：2
> 
> 时间：2012-07-04T18:28:15.130
> 
> 标签：java, swing, jtabbedpane

我正在尝试更改标签页的背景颜色`JTabbedPane`。我也尝试过`JTabbedPane.setBackgroudAt(0, Color.GRAY)`和`JTabbedPane.setBackgroud(Color.GRAY)`前景，但没有任何反应。我更改了选项卡内面板的背景，仍然没有。

![在此处输入图像描述](../Images/1ca3ac5c16d8a822a21649f31ab1e855.png)

**编辑1：**`UIManager.setLookAndFeel("com.sun.java.swing.plaf.windows.WindowsLookAndFeel");`如果这可以帮助解决问题，我正在使用

**编辑2：**链接到一个例子，[https://www.dropbox.com/s/0krn9vikvkq46mz/JavaApplication4.rar](https://www.dropbox.com/s/0krn9vikvkq46mz/JavaApplication4.rar)

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-04T19:03:51.400

您可以使用 更改选项卡的背景颜色，`setBackgroundAt()`如下所示[。](https://stackoverflow.com/a/8752166/230513)

![标签](../Images/e2dd6b4657b14ba6219ec97ea511d86b.png)

您可以使用 更改选项卡内容的背景颜色，`setBackground()`如下所示[。](https://stackoverflow.com/a/2349106/230513)通常，您必须在选项卡的内容上执行此操作，因为封闭的`JTabbedPane`背景颜色会被内容遮盖。

![内容](../Images/84683d5a692f61c9b821f1ca780ce5ca.png)

如果您仍然遇到问题，请编辑您的问题以包含基于任一示例的[sscce ，该示例显示您遇到的问题。](http://sscce.org/)

附录：组合这些方法也是可能的：

![结合](../Images/b6c5f129d83f660ed20c5c89aaf54f3e.png)

```
import java.awt.*;
import java.awt.event.*;
import java.util.Random;
import javax.swing.*;

public class JTabbedTest {

    private static JTabbedPane jtp;

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                JFrame f = new JFrame();
                f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

                jtp = new JTabbedPane();
                jtp.setPreferredSize(new Dimension(320, 200));
                jtp.addTab("Reds", new ColorPanel(0, Color.RED));
                jtp.setBackgroundAt(0, Color.RED);
                jtp.addTab("Greens", new ColorPanel(1, Color.GREEN));
                jtp.setBackgroundAt(1, Color.GREEN);
                jtp.addTab("Blues", new ColorPanel(2, Color.BLUE));
                jtp.setBackgroundAt(2, Color.BLUE);

                f.add(jtp, BorderLayout.CENTER);
                f.pack();
                f.setVisible(true);
            }
        });
    }

    private static class ColorPanel extends JPanel implements ActionListener {

        private final Random rnd = new Random();
        private final Timer timer = new Timer(1000, this);
        private Color color;
        private Color original;
        private int mask;
        private JLabel label = new JLabel("Stackoverflow!");
        private int index;

        public ColorPanel(int index, Color color) {
            super(true);
            this.color = color;
            this.original = color;
            this.mask = color.getRGB();
            this.index = index;
            this.setBackground(color);
            label.setForeground(color);
            this.add(label);
            timer.start();
        }

        @Override
        public void actionPerformed(ActionEvent e) {
            color = new Color(rnd.nextInt() & mask);
            this.setBackground(color);
            jtp.setBackgroundAt(index, original);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-04T18:42:37.083

*   大多数方法`JTabbedPane`在 API 中受到保护，并且无法从 Swing 方法访问

*   必须寻找`Custom XxxTabbedPaneUI`，覆盖这些方法，并且可以从外部访问

*   正确的方法是仅实现[自定义外观](https://stackoverflow.com/a/3954646/714968)，其中一部分覆盖`JTabbedPane`

*   [自定义 XxxTabbedPaneUI](https://stackoverflow.com/a/7056093/714968)的示例

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-04T18:38:59.007

您应该考虑使用符合您要求的外观，或者如果失败，则更改 JTabbedPane 的默认 UIManger 设置：

```
UIManager.put("TabbedPane.background", Color.GRAY); 
```

如果您选择后者，则必须在创建 GUI 之前完成。

有关这方面的更多信息，请参阅 Rob Camick 关于该主题的优秀博客：[UIManager Defaults](http://tips4java.wordpress.com/2008/10/09/uimanager-defaults/)。

编辑：我错了。它应该是：

```
UIManager.put("TabbedPane.unselectedBackground", Color.GRAY); 
```

但请注意，这可能不适用于每种外观。

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-07-04T18:35:36.100

选项卡中尚未添加任何内容可能是个问题。

尝试将内容面板的内容管理器设置为`BorderLayout`，添加一个`JPanel`with `BorderLayout`。居中，然后为该面板着色。

# c# - ASP.NET MVC 中的 Rdlc 无法正确呈现

> ID：11333947
> 
> 赞同：2
> 
> 时间：2012-07-04T18:28:18.683
> 
> 标签：c#, asp.net-mvc, rdlc

我正在使用 ASP.NET MVC，我想在视图中呈现 rdlc。这是我渲染 rdlc 文件的代码。

```
[HttpPost]
        public ActionResult DepartmentwiseInwardOutwardReport(int? fd, int? td, string fdt, string tdt)
        {
            TrackBL trackBL = new TrackBL();
            IEnumerable<TrackModel> trackList = trackBL.GetDeptInwardOutwardReport(fd, td, fdt, tdt);
            //return PartialView("_TrackingSearchReport", trackList);
            LocalReport localReport = new LocalReport();
            localReport.ReportPath = Server.MapPath("~/Content/Reports/FileMovement.rdlc");
            ReportDataSource reportDataSource = new ReportDataSource("Customers", trackList);
            reportDataSource.Name = "FTSDataSet_proc_File_InwardOutWardReport";
            localReport.DataSources.Add(reportDataSource);
            string reportType = "PDF";
            string mimeType;
            string encoding;
            string fileNameExtension;

            //The DeviceInfo settings should be changed based on the reportType
            //http://msdn2.microsoft.com/en-us/library/ms155397.aspx

            string deviceInfo =
            "<DeviceInfo>" +
            "  <OutputFormat>PDF</OutputFormat>" +
            "  <PageWidth>8.5in</PageWidth>" +
            "  <PageHeight>11in</PageHeight>" +
            "  <MarginTop>0.5in</MarginTop>" +
            "  <MarginLeft>1in</MarginLeft>" +
            "  <MarginRight>1in</MarginRight>" +
            "  <MarginBottom>0.5in</MarginBottom>" +
            "</DeviceInfo>";

            Warning[] warnings;
            string[] streams;
            byte[] renderedBytes;

            //Render the report
            renderedBytes = localReport.Render(
                reportType,
                deviceInfo,
                out mimeType,
                out encoding,
                out fileNameExtension,
                out streams,
                out warnings);

            //Response.AddHeader("content-disposition", "attachment; filename=NorthWindCustomers." + fileNameExtension);
            return File(renderedBytes, mimeType); 
```

当我在视图中渲染它时，我可以看到 14 页，我现在只有 1 行可以显示。两列各显示在页面中。我想像报告一样显示它，其中所有列都显示在其他列旁边。我错过了一些设置吗？有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T07:50:41.693

我在 MVC3 甚至 MVC4 中使用 RDLC，我没有你面临的那个问题，即使我认为它与 RDLC 报告本身有关，也许你的页面宽度非常高，所以它会将它扭曲到 14 页（有时如果我忘记设置方向并且我有大量的列，它会扭曲到 3 页。

如果您将报告的宽度设置为大于您尝试打​​印的页面，则报告将自动拆分以适合页面。

# jquery - jQuery 和动态元素 vs 显示 css 属性

> ID：11333950
> 
> 赞同：5
> 
> 时间：2012-07-04T18:28:51.120
> 
> 标签：jquery, html, css

在设计 html 界面元素时，根据某些事件显示/隐藏 DOM 是一个非常常见的场景。我的问题很简单，但每次遇到这个问题时，我总是想知道：将元素硬编码在 html 中并简单地切换显示属性（例如使用 .show/.hide）或动态添加/删除它们是否“更好”根据需要通过JS？两者实施起来都很简单，但我不禁想知道它们如何比较，以及使用其中一个是否有任何优点/缺点。

在某些情况下，例如在多个地方逐字使用相同元素时，动态创建 DOM 似乎是有意义的，但另一方面，理论上硬编码它们更易于维护，因为您可以移动 DOM并根据需要更改它们，只要选择器对于 jQuery 仍然相同，它们就会按预期工作。一般来说，从设计师的角度来看，硬编码似乎是要走的路，但我期待着想法，也许我可能会在这里忽略一些事情。

编辑：“硬编码”是指根本不通过 JS 插入的元素；也就是说，已经在其父文档中以原始 html 标记而不是由 JS 指定其位置的元素。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T19:30:28.180

最终，这实际上取决于您正在使用什么以及您的应用程序做什么，但是：

*   静态标记意味着*服务器的*工作量更大（但前提是页面首先是动态生成的，对于静态页面，效果可以忽略不计）。

*   动态标记意味着*客户需要做更多的*工作，这并不总是一件坏事，具体取决于您的目标受众。

然而，从技术上讲，[Graceful Degradation](http://accessites.org/site/2007/02/graceful-degradation-progressive-enhancement/)表明静态标记是可行的方法，因为理想情况下页面应该在禁用脚本的情况下保持可用（动态标记是工作静态核心之上的可选层）。

另一方面，[Progressive Enhancement](http://en.wikipedia.org/wiki/Progressive_enhancement)是从那里构建的，基本上说，由于我们已经在使用准系统核心，我们可以在客户端启动所有圆柱体，并使用利用最新的浏览器技术。

例如，[jQuery UI](http://jqueryui.com/)和[jQuery Mobile](http://jquerymobile.com/)是围绕渐进增强设计的，因为它们的策略是使用更丰富的客户端行为扩展现有标记，通常通过动态创建的元素公开。

因此，标题中的两个选项可以并且可以说*应该*一起实施。在一般情况下，如果可能的话，呈现应用程序在无脚本平台上运行所需的标记，然后从客户端增强该标记看起来是个好主意。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T18:45:11.040

在处理较大的应用程序时需要考虑性能，并且在编写较小的应用程序时没有太多性能问题时，请做您认为容易和易于管理的事情。非常大的 DOM 可能会扼杀移动浏览器。大量的 DOM 修改会影响性能。在较大的应用程序中，最好保持 DOM 轻量级并减少 DOM 修改。因此，简而言之，当性能没有受到密切关注时，它比约定更方便。但始终建议密切关注性能和良好做法。

# java - Google App Engine 中的小程序

> ID：11333952
> 
> 赞同：0
> 
> 时间：2012-07-04T18:29:03.380
> 
> 标签：java, google-app-engine, applet

我的目标是将我的小程序托管到 google app enigne。

我已经制作了一个小程序的 jar，我已将 jar 放入 WEB-INF/lib 目录，但是当我在我的 jsp 页面中编写小程序标签时仍然

```
<applet code="myPackage.MyClass" archive="myapplet.jar" width="600" height="480"/> 
```

小程序未在浏览器中显示。

我正在使用带有 GAE 插件的 eclipse

请指导我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T20:44:21.523

尝试将 JAR 放入与 JSP 文件相同的目录中。

# android - 无法在移动设备上接收 gcm 通知：Android

> ID：11333961
> 
> 赞同：1
> 
> 时间：2012-07-04T18:29:57.773
> 
> 标签：android, google-cloud-messaging

我正在尝试在我的 android 手机中检索 gcm 通知。一切正常，我的 android 设备从 gcm 服务器获取registrationid 我将其发送到我的 PHP 服务器保存它。然后我使用该registrationID 运行我的 PHP 脚本以在我的上发送通知android mobile。通知没有显示，我的设备显示运行时异常（当我在模拟器上运行它时不会弹出此异常）。我的 IntentService 类中有问题，我无法从我的日志猫。

这是我的 IntentService 类：

```
package com.pack.gcm;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;

import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.HttpClient;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.impl.client.DefaultHttpClient;

import android.app.IntentService;
import android.content.Context;
import android.content.Intent;
import android.os.PowerManager; 
import android.util.Log;

import android.widget.Toast;

public class MyIntentService extends IntentService {

public MyIntentService() {
    super("MuazzamService");
}

private static PowerManager.WakeLock sWakeLock;
    private static final Object LOCK = MyIntentService.class;

@Override
protected void onHandleIntent(Intent intent) {

     try {
            String action = intent.getAction();
            if (action.equals("com.google.android.c2dm.intent.REGISTRATION")) {
                handleRegistration(intent);
            } else if (action.equals("com.google.android.c2dm.intent.RECEIVE")) {
                handleMessage(intent);
            }
        } finally {
            synchronized(LOCK) {
                sWakeLock.release();
            }
        }
}

private void handleRegistration(Intent intent) {
      try {
        String registrationId = intent.getStringExtra("registration_id");
        String error = intent.getStringExtra("error");
        String unregistered = intent.getStringExtra("unregistered");       
        // registration succeeded
        if (registrationId != null) {

            this.SendRegistrationIDViaHttp(registrationId);
            Log.i("Regid",registrationId);
        }

        if (unregistered != null) {
        } 

        if (error != null) {
            if ("SERVICE_NOT_AVAILABLE".equals(error)) {
               Log.e("ServiceNoAvail",error);

            } 
            else {
                Log.i("Error In Recieveing regid", "Received error: " + error);
            }
        }
      }catch(Exception e)
      {
          Log.e("ErrorHai(MIS0)",e.toString());
          e.printStackTrace();
      }
}

private void SendRegistrationIDViaHttp(String regID) {

    HttpClient httpclient = new DefaultHttpClient();
 try
 {
    Context context = getApplicationContext();

    HttpGet httpget = new   
            HttpGet("http://192.168.1.12/php/GCM/AndroidRequest.php?registrationID="+regID+"&email=muazzamalii@hotmail.com");   //test purposes k liye muazzam
    HttpResponse response = httpclient.execute(httpget);
    HttpEntity entity=response.getEntity();
    if(entity!=null)
    {
          InputStream inputStream=entity.getContent();
          String result= convertStreamToString(inputStream);
          Log.i("finalAnswer",result);
          Toast tst=Toast.makeText(context,regID, Toast.LENGTH_SHORT);
          tst.show();
    }
}
catch (ClientProtocolException e) 
{
    Log.e("errorhai",e.getMessage());
    e.printStackTrace();
}
catch (IOException e) 
{
    Log.e("errorhai",e.getMessage());
    e.printStackTrace();
}
}
    private static String convertStreamToString(InputStream is) {

    BufferedReader reader = new BufferedReader(new InputStreamReader(is));
    StringBuilder sb = new StringBuilder();

    String line = null;
    try {
        while ((line = reader.readLine()) != null) {
            sb.append(line + "\n");
        }
    } catch (IOException e) {
        Log.e("ErrorHai(MIS)",e.toString());
        e.printStackTrace();
    } finally {
        try {
            is.close();
        } catch (IOException e) {
            Log.e("ErrorHai(MIS2)",e.toString());
            e.printStackTrace();
        }
    }
    return sb.toString();
}

private void handleMessage(Intent intent) {
    String score = intent.getStringExtra("score");
    String time = intent.getStringExtra("time");

    Log.i("GetExtraScore",score);
    Log.i("GetExtratime",time);
}

static void runIntentInService(Context context,Intent intent){
     synchronized(LOCK) {

         if (sWakeLock == null) {
                PowerManager pm = (PowerManager) context.getSystemService(Context.POWER_SERVICE);
                sWakeLock = pm.newWakeLock(PowerManager.PARTIAL_WAKE_LOCK, "my_wakelock");
            }
        }
        sWakeLock.acquire();
        intent.setClassName(context, MyIntentService.class.getName());
        context.startService(intent);
}

} 
```

这是我的Logcat：

```
 07-04 23:00:41.979: E/AndroidRuntime(9987): FATAL EXCEPTION: IntentService[MuazzamService]
 07-04 23:00:41.979: E/AndroidRuntime(9987): java.lang.NullPointerException: println needs a message
 07-04 23:00:41.979: E/AndroidRuntime(9987):    at android.util.Log.println_native(Native Method)
 07-04 23:00:41.979: E/AndroidRuntime(9987):    at android.util.Log.i(Log.java:158)
 07-04 23:00:41.979: E/AndroidRuntime(9987):    at com.pack.gcm.MyIntentService.handleMessage(MyIntentService.java:139)
 07-04 23:00:41.979: E/AndroidRuntime(9987):    at com.pack.gcm.MyIntentService.onHandleIntent(MyIntentService.java:41)
 07-04 23:00:41.979: E/AndroidRuntime(9987):    at android.app.IntentService$ServiceHandler.handleMessage(IntentService.java:59)
 07-04 23:00:41.979: E/AndroidRuntime(9987):    at android.os.Handler.dispatchMessage(Handler.java:99)
 07-04 23:00:41.979: E/AndroidRuntime(9987):    at android.os.Looper.loop(Looper.java:123)
 07-04 23:00:41.979: E/AndroidRuntime(9987):    at android.os.HandlerThread.run(HandlerThread.java:60)
 07-04 23:01:48.089: E/AndroidRuntime(10099): FATAL EXCEPTION: IntentService[MuazzamService]
 07-04 23:01:48.089: E/AndroidRuntime(10099): java.lang.NullPointerException: println needs a message
 07-04 23:01:48.089: E/AndroidRuntime(10099):   at android.util.Log.println_native(Native Method)
 07-04 23:01:48.089: E/AndroidRuntime(10099):   at android.util.Log.i(Log.java:158)
 07-04 23:01:48.089: E/AndroidRuntime(10099):   at com.pack.gcm.MyIntentService.handleMessage(MyIntentService.java:139)    
 07-04 23:01:48.089: E/AndroidRuntime(10099):   at com.pack.gcm.MyIntentService.onHandleIntent(MyIntentService.java:41)
 07-04 23:01:48.089: E/AndroidRuntime(10099):   at android.app.IntentService$ServiceHandler.handleMessage(IntentService.java:59)
 07-04 23:01:48.089: E/AndroidRuntime(10099):   at android.os.Handler.dispatchMessage(Handler.java:99)
 07-04 23:01:48.089: E/AndroidRuntime(10099):   at android.os.Looper.loop(Looper.java:123)
 07-04 23:01:48.089: E/AndroidRuntime(10099):   at android.os.HandlerThread.run(HandlerThread.java:60)
 07-04 23:11:36.189: E/AndroidRuntime(10310): FATAL EXCEPTION: IntentService[MuazzamService]
 07-04 23:11:36.189: E/AndroidRuntime(10310): java.lang.NullPointerException: println needs a message
 07-04 23:11:36.189: E/AndroidRuntime(10310):   at android.util.Log.println_native(Native Method)
 07-04 23:11:36.189: E/AndroidRuntime(10310):   at android.util.Log.i(Log.java:158)
 07-04 23:11:36.189: E/AndroidRuntime(10310):   at com.pack.gcm.MyIntentService.handleMessage(MyIntentService.java:139)
 07-04 23:11:36.189: E/AndroidRuntime(10310):   at com.pack.gcm.MyIntentService.onHandleIntent(MyIntentService.java:41)
 07-04 23:11:36.189: E/AndroidRuntime(10310):   at android.app.IntentService$ServiceHandler.handleMessage(IntentService.java:59)
 07-04 23:11:36.189: E/AndroidRuntime(10310):   at android.os.Handler.dispatchMessage(Handler.java:99)
 07-04 23:11:36.189: E/AndroidRuntime(10310):   at android.os.Looper.loop(Looper.java:123)
 07-04 23:11:36.189: E/AndroidRuntime(10310):   at android.os.HandlerThread.run(HandlerThread.java:60)
 07-04 23:12:31.739: E/AndroidRuntime(10482): FATAL EXCEPTION: IntentService[MuazzamService]
 07-04 23:12:31.739: E/AndroidRuntime(10482): java.lang.NullPointerException: println needs a message
 07-04 23:12:31.739: E/AndroidRuntime(10482):   at android.util.Log.println_native(Native Method)
 07-04 23:12:31.739: E/AndroidRuntime(10482):   at android.util.Log.i(Log.java:158)
 07-04 23:12:31.739: E/AndroidRuntime(10482):   at com.pack.gcm.MyIntentService.handleMessage(MyIntentService.java:139)
 07-04 23:12:31.739: E/AndroidRuntime(10482):   at com.pack.gcm.MyIntentService.onHandleIntent(MyIntentService.java:41)
 07-04 23:12:31.739: E/AndroidRuntime(10482):   at android.app.IntentService$ServiceHandler.handleMessage(IntentService.java:59) 
 07-04 23:12:31.739: E/AndroidRuntime(10482):   at android.os.Handler.dispatchMessage(Handler.java:99)
 07-04 23:12:31.739: E/AndroidRuntime(10482):   at android.os.Looper.loop(Looper.java:123)
 07-04 23:12:31.739: E/AndroidRuntime(10482):   at android.os.HandlerThread.run(HandlerThread.java:60)
 07-04 23:13:57.199: E/AndroidRuntime(10541): FATAL EXCEPTION: IntentService[MuazzamService]   
 07-04 23:13:57.199: E/AndroidRuntime(10541): java.lang.NullPointerException: println needs a message
 07-04 23:13:57.199: E/AndroidRuntime(10541):   at android.util.Log.println_native(Native Method)
 07-04 23:13:57.199: E/AndroidRuntime(10541):   at android.util.Log.i(Log.java:158)
 07-04 23:13:57.199: E/AndroidRuntime(10541):   at com.pack.gcm.MyIntentService.handleMessage(MyIntentService.java:139)
 07-04 23:13:57.199: E/AndroidRuntime(10541):   at com.pack.gcm.MyIntentService.onHandleIntent(MyIntentService.java:41)
 07-04 23:13:57.199: E/AndroidRuntime(10541):   at android.app.IntentService$ServiceHandler.handleMessage(IntentService.java:59)
 07-04 23:13:57.199: E/AndroidRuntime(10541):   at android.os.Handler.dispatchMessage(Handler.java:99)
 07-04 23:13:57.199: E/AndroidRuntime(10541):   at android.os.Looper.loop(Looper.java:123)
 07-04 23:13:57.199: E/AndroidRuntime(10541):   at android.os.HandlerThread.run(HandlerThread.java:60) 
```

**更新：**

这是我从我的 php 脚本发送的内容：

```
 $message = '{"data":{"message":"one","some":"free"},"registration_ids":["xxxx"]}'; 
```

这就是我得到的结果。

```
 {"multicast_id":8230995787169744326,"success":1,"failure":0,"canonical_ids":0,"results":[{"message_id":"0:1341431581592147%5d17b789f9fd7ecd"}]}8.2309957871697E+18 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T19:39:11.000

这是您推送到设备的 JSON 有效负载吗？

```
{ "data": 
  {
    "score": "5x1",
    "time": "15:10"
  },
  "registration_ids": [xxxxxx]
} 
```

上述有效负载是您的客户端代码工作所必需的。

在这些调用之后进行空指针检查：

```
String score = intent.getStringExtra("score");
String time = intent.getStringExtra("time"); 
```

最有可能的分数和时间都为空，并导致 Log.i 崩溃

# common-lisp - 为什么这个宏以一种方式工作而不是另一种？

> ID：11333962
> 
> 赞同：2
> 
> 时间：2012-07-04T18:30:03.380
> 
> 标签：common-lisp, sbcl

这是我尝试使用的“clx-user-callable.lisp”中定义的宏。

```
(in-package :clx-gui)

(defmacro get-callback-wrapper (callback)
  (declare (ignorable callback))
  (let* ((func-name (gensym))
         (wrapper-name (intern (format nil "WRAPPER-~a" func-name) )))
    `(defun ,wrapper-name (caller-instance)
       (funcall ,callback) ;; User callbacks wont have arguments
       (closemenu caller-instance)))) 
```

我以这种方式调用这个宏，它可以正常工作。

```
(in-package :clx-gui-test-app)

(create-user-menuitem "MyUserMenu" "MyEntryDialog"
                      (get-callback-wrapper 'my-callback))

(create-user-menuitem "MyUserMenu" "MyChoiceDialog"
                      (get-callback-wrapper 'my-callback2))

(create-user-menuitem "MyUserMenu" "MyMessageDialog"
                      (get-callback-wrapper 'my-callback3)) 
```

如果我以这种方式更改代码以使用宏，通过将回调的符号名称传递给调用宏的函数，它不会返回不同的包装函数，但总是返回相同的包装函数。调用宏的函数与宏定义在同一个文件和包中。

```
(in-package :clx-gui-test-app)
(create-user-menuitem "MyUserMenu" "MyEntryDialog" 'my-callback)
(create-user-menuitem "MyUserMenu" "MyChoiceDialog" 'my-callback2)
(create-user-menuitem "MyUserMenu" "MyMessageDialog" 'my-callback3) 
```

我尝试将包添加到宏定义中，但这无济于事。

```
(wrapper-name (intern (format nil "WRAPPER-~a" func-name)
                      (symbol-package callback) ))) 
```

我做错了什么？

我正在使用 SBCL-1.0.57 和 Slime。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T03:33:13.530

```
CL-USER>
(defparameter foo1 (gensym))
FOO1
CL-USER> 
foo1
#:G4619
CL-USER> 
(defparameter foo2 '#:G4619)
FOO2
CL-USER> 
foo2
#:G4619
CL-USER> 
(eq foo1 foo2)
NIL
CL-USER> 
~ 
```

或者另一个有趣的练习：

```
(defmacro make-fun ()  
  `(defun ,(intern (format nil "WRAPPER-~a" (gensym))) ()
     'bar))

CL-USER> 
(make-fun)
WRAPPER-G4726
CL-USER> 
(make-fun)
WRAPPER-G4730
CL-USER> 
(make-fun)
WRAPPER-G4734
CL-USER> 
(make-fun)
WRAPPER-G4738
CL-USER> 
(defun WRAPPER-G4745 ()
  'foo)
WRAPPER-G4745
CL-USER> 
(make-fun)
WRAPPER-G4745
CL-USER> (wrapper-G4745)
BAR
CL-USER> 
```

哦，伙计，我们刚刚重写了那个函数！

如果您想用某种前缀名称来标记 gensym，请在 gensym 调用中进行（作为可选参数）。但所有这一切都只是一个练习，b/c 我仍然会在 OP 问题中使用 lambda。

这是（IMO）更简单的替代实现，应该可以满足您的需求：

```
(defun get-callback-wrapper (callback)
  (lambda (caller-instance)
    (funcall callback) 
    (closemenu caller-instance))) 
```

这会生成我认为您所追求的词法闭包。

# c - 在编译时设置 union 的值

> ID：11333964
> 
> 赞同：4
> 
> 时间：2012-07-04T18:30:04.000
> 
> 标签：c, unions

> **可能重复：**
> [可以在声明中初始化联合吗？](https://stackoverflow.com/questions/2148989/can-a-union-be-initialized-in-the-declaration)

我浏览了整个互联网，找不到如何在编译时在结构中设置联合值的示例，我希望你们能帮助我。例如，一个简单的结构是：

```
typedef enum {
     typeFloat,
     typeInt
} Type;

typedef struct myStruct { 
     Type     elementType;
     int      valueInt;
     float    valueFloat;
} myStruct; 
```

然后你可以声明一个局部变量：

```
myStruct structEx = {typeInt, 349, 0}; 
```

或者

```
myStruct structEx = {typeFloat, 0, 349.349}; 
```

如果结构被声明为：你将如何做同样的事情：

```
typedef struct myStruct {
     Type     elementType;
     union value {
          int     valueInt;
          float   valueFloat;
     } value;   
} myStruct; 
```

“值”将是浮点数或整数，“元素类型”允许它知道它是什么。

我知道你可以在运行时设置它：

```
myStruct structEx;
structEx.elementType = typeInt;
structEx.value.valueInt = 349; 
```

但我还没有找到一种方法来使用结构进行上述操作。

提前致谢。

编辑：这是重复的。我应该一直使用“初始化”这个词，它会直接带我去那个。我的 Google-Fu 今天一定很弱。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T18:38:46.160

怎么样：

```
myStruct structEx = {
    .elementType = 0,
    .value = {
        .valueInt = 42
    }
}; 
```

或者可能

```
myStruct structEx = {
    .elementType = 0,
    .value.valueInt = 42
}; 
```

# ios - 使用 Core Image 渲染随机噪声 CALayer 会产生奇怪的伪影

> ID：11333965
> 
> 赞同：2
> 
> 时间：2012-07-04T18:30:14.443
> 
> 标签：ios, core-image, noise, cifilter, ciimage

我正在以编程方式创建一个`CALayer`子类，该子类对其自身应用一些像素噪声。该代码的工作原理是它在图层中呈现噪点，但图像上有一个奇怪的伪影，我无法确定根本原因。

这是一个示例图像，其中`noiseOpacity`出现了使问题更加明显。

![在此处输入图像描述](../Images/125bc3f5bb74a4c36deff2951a89ff7a.png)

粉红色的盒子是 a `UANoisyGradientLayer`，一个`CAGradientLayer`具有以下位的子类：

```
@interface UANoisyGradientLayer ()
    @property (nonatomic, retain) CIContext *noiseContext;
    @property (nonatomic, retain) CIFilter  *noiseGenerator;
    @property (nonatomic, retain) CIImage   *noiseImage;
@end

@implementation UANoisyGradientLayer

@synthesize noiseOpacity = _noiseOpacity, noiseImage;

- (id)init {
    self = [super init];
    if (self) {
        self.noiseOpacity = 0.10;
        self.noiseContext = [CIContext contextWithOptions:nil];         
        self.noiseGenerator = [CIFilter filterWithName:@"CIColorMonochrome"];
        [self.noiseGenerator setValue:[[CIFilter filterWithName:@"CIRandomGenerator"] valueForKey:@"outputImage"] forKey:@"inputImage"];
        [self.noiseGenerator setDefaults];

        self.noiseImage = [self.noiseGenerator outputImage];

    }
    return self;
}

- (void)drawInContext:(CGContextRef)ctx {

    [super drawInContext:ctx];

    CGRect extentRect = [self.noiseImage extent];
    if (CGRectIsInfinite(extentRect) || CGRectIsEmpty(extentRect)) {
        extentRect = self.bounds;
    }

    CGImageRef cgimg = [self.noiseContext createCGImage:self.noiseImage fromRect:extentRect];
    CGContextSetBlendMode(ctx, kCGBlendModeOverlay);
    CGContextSetAlpha(ctx, self.noiseOpacity);
    CGContextDrawImage(ctx, self.bounds, cgimg);
    CGImageRelease(cgimg);
} 
```

基本上，我使用 a作为过滤器的输入来创建`CIImage`init 。然后，当需要绘制它时，我使用（范围**始终**为0）创建它，并将其绘制到上下文中。`CIRandomGenerator``CIColorMonochrome``CGImageRef``self.bounds` **`infinite`**

 **结果大部分都很好，但正如您在图像中看到的那样，似乎有一些拉伸正在发生。这里发生了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-04T21:43:57.207

Although not fixing the original problem, I approached this from a different angle and have duplicated the output. Instead of trying to generate a single image the size of the `self.bounds`, I am now generating an image that is only 64x64, then tiling it using `CGContextDrawTiledImage`. Because I am now sizing it at a fixed size, I could pull some code out of the `drawInContext:` method. And finally, because there was no more image generation done in the draw methods, I was able to make it a static var so it is only ever generated once! Here is the complete class:

```
static CGImageRef   __noiseImage        = nil;
static CGFloat      __noiseImageWidth   = 0.0;
static CGFloat      __noiseImageHeight  = 0.0;

@implementation UANoisyGradientLayer

@synthesize noiseOpacity = _noiseOpacity;

- (id)init {
    self = [super init];
    if (self) {
        self.noiseOpacity = 0.1f;
        self.needsDisplayOnBoundsChange = YES;

        static dispatch_once_t onceToken;
        dispatch_once(&onceToken, ^{
            CIContext *noiseContext = [CIContext contextWithOptions:nil];

            CIFilter *noiseGenerator = [CIFilter filterWithName:@"CIColorMonochrome"];
            [noiseGenerator setValue:[[CIFilter filterWithName:@"CIRandomGenerator"] valueForKey:@"outputImage"] forKey:@"inputImage"];
            [noiseGenerator setDefaults];

            CIImage *ciImage = [noiseGenerator outputImage];

            CGRect extentRect = [ciImage extent];
            if (CGRectIsInfinite(extentRect) || CGRectIsEmpty(extentRect)) {
                extentRect = CGRectMake(0, 0, 64, 64);
            }

            __noiseImage = [noiseContext createCGImage:ciImage fromRect:extentRect];
            __noiseImageWidth = CGImageGetWidth(__noiseImage);
            __noiseImageHeight = CGImageGetHeight(__noiseImage);
        });
    }

    return self;
}

- (void)drawInContext:(CGContextRef)ctx {

    [super drawInContext:ctx];

    if (self.noiseOpacity > 0) {

        CGContextSaveGState(ctx);
        CGPathRef path = [[UIBezierPath bezierPathWithRoundedRect:self.bounds cornerRadius:self.cornerRadius] CGPath];
        CGContextAddPath(ctx, path);
        CGContextClip(ctx);
        CGContextSetBlendMode(ctx, kCGBlendModeOverlay);
        CGContextSetAlpha(ctx, self.noiseOpacity);

        CGContextDrawTiledImage(ctx, CGRectMake(0, 0, __noiseImageWidth, __noiseImageHeight), __noiseImage);

        CGContextRestoreGState(ctx);
    }
}

@end 
```

**NOTE**: `CIColorMonochrome` and `CIRandomGenerator` require **iOS 6** (or newer). Make sure to include the required frameworks (`CoreImage.framework` and `QuartzCore.framework`).**

# c++ - Qt 在不相关的对象之间传递变量

> ID：11333967
> 
> 赞同：1
> 
> 时间：2012-07-04T18:30:23.397
> 
> 标签：c++, qt, class, variables, object

我目前正在学习 Qt，我似乎遇到了问题。在我的实践项目中，我有 2 个类：MainWindow 和 Dialog。

**主窗口.h**

```
#ifndef MAINWINDOW_H
#define MAINWINDOW_H

#include <QMainWindow>
#include "dialog.h"

namespace Ui {
class MainWindow;
}

class MainWindow : public QMainWindow
{
    Q_OBJECT

public:
    explicit MainWindow(QWidget *parent = 0);
    ~MainWindow();

private slots:
    void on_pushButtonDialog_clicked();

private:
    Ui::MainWindow *ui;
    Dialog *dialogInstance;

};

#endif // MAINWINDOW_H 
```

**主窗口.cpp**

```
#include "mainwindow.h"
#include "ui_mainwindow.h"

MainWindow::MainWindow(QWidget *parent) :
    QMainWindow(parent),
    ui(new Ui::MainWindow)
{
    ui->setupUi(this);

    dialogInstance = new Dialog(this);
}

MainWindow::~MainWindow()
{
    delete ui;
}

void MainWindow::on_pushButtonDialog_clicked()
{
    dialogInstance->show();
} 
```

**对话.h**

```
#ifndef DIALOG_H
#define DIALOG_H

#include <QDialog>

namespace Ui {
class Dialog;
}

class Dialog : public QDialog
{
    Q_OBJECT

public:
    explicit Dialog(QWidget *parent = 0);
    ~Dialog();

private:
    Ui::Dialog *ui;
};

#endif // DIALOG_H 
```

**对话框.cpp**

```
#include "dialog.h"
#include "ui_dialog.h"

Dialog::Dialog(QWidget *parent) :
    QDialog(parent),
    ui(new Ui::Dialog)
{
    ui->setupUi(this);
}

Dialog::~Dialog()
{
    delete ui;
} 
```

我的目标是使用 Dialog 窗口输入一个值，然后在 MainWindow 上显示该输入的值，我知道如何使用小部件在类内传递变量，但我不确定如何在不相关的对象之间传递变量。

任何输入都会有很大帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T19:03:08.340

尝试这个：

```
#include "mainwindow.h"
#include "ui_mainwindow.h"

MainWindow::MainWindow(QWidget *parent) :
    QMainWindow(parent),
    ui(new Ui::MainWindow)
{
    ui->setupUi(this);
    connect(ui->pushButtonDialog, SIGNAL(clicked()), this, SLOT(on_pushButtonDialog_clicked()));
    dialogInstance = new Dialog(this);
}
// ... 
```

# delphi - 将如何完成 TComponent 的 WriteState

> ID：11333968
> 
> 赞同：1
> 
> 时间：2012-07-04T18:30:31.017
> 
> 标签：delphi, components, dfm

通过使用 TComponent.Loaded 方法读取流，我知道所有其他组件都已准备就绪。类似于Loaded，通过写来存在一些东西，也就是说，所有的组件都是写的？

谢谢

# c - 系统的clang安装不会链接

> ID：11333969
> 
> 赞同：3
> 
> 时间：2012-07-04T18:30:33.863
> 
> 标签：c, unix, clang, ld, linux-mint

我正在使用 Linux Mint 12（基于 Ubuntu 11.10）并使用以下命令安装了 clang 编译器：

```
$ sudo apt-get install clang 
```

什么安装了系统范围的 clang-2.9。但是当我尝试用它编译一些东西时，我得到了这个错误：

```
$ clang -o hello hello.c 
/usr/bin/ld: cannot find crt1.o: No such file or directory
/usr/bin/ld: cannot find crti.o: No such file or directory
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

这是我使用`-v`标志获得的链接器调用：

```
"/usr/bin/ld" --eh-frame-hdr -m elf_i386 -dynamic-linker /lib/ld-linux.so.2 -o teste crt1.o crti.o /usr/lib/gcc/i686-linux-gnu/4.6.1/crtbegin.o -L/usr/lib/gcc/i686-linux-gnu/4.6.1 -L/usr/lib/gcc/i686-linux-gnu/4.6.1/../../.. /tmp/cc-oYpj2E.o -lgcc --as-needed -lgcc_s --no-as-needed -lc -lgcc --as-needed -lgcc_s --no-as-needed /usr/lib/gcc/i686-linux-gnu/4.6.1/crtend.o crtn.o 
```

那么，这是什么问题，我该如何解决呢？

# localization - JavaFX 2.x TableView 本地化

> ID：11333970
> 
> 赞同：10
> 
> 时间：2012-07-04T18:30:40.400
> 
> 标签：localization, tableview, javafx-2

当 TableView 控件不包含任何内容时，它会显示“No content in table”。如何更改/本地化该字符串？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-07-05T08:27:08.743

干得好

```
tableView.setPlaceholder(new Text("Your localized text here")); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T10:16:35.387

如果没有数据，表格视图中不会显示任何内容

```
.table-row-cell:empty {
    -fx-background-color: lightyellow;
}

.table-row-cell:empty .table-cell {
    -fx-border-width: 0px;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-06T11:35:06.860

按照 JavaFX 的建议，最好像这样实现

模型.java

```
class Model {
    private final ObjectProperty<Text> placeholderProperty;

    Model(ResourceBundle resourceBundle) {

        placeholderProperty = new SimpleObjectProperty<>(new Text(resourceBundle.getString("placeholderTextFromLocalizationProperties")));
    }

    ...

    ObjectProperty<Text> placeholderProperty() {
        return placeholderProperty;
    }
} 
```

控制器.java

```
class Controller implements Initializable {
    private Model model;
    @FXML
    private TableView tableView;
    ...
    @Override
    public void initialize(URL url, ResourceBundle resourceBundle) {
        model = new Model(resourceBundle);

        tableView.setPlaceholder(model.placeholderProperty().get());

    }
    ...
} 
```

当您要更改本地化时，您需要做的就是编辑您的属性文件。

# vb.net - 停止使用 VB6？

> ID：11333977
> 
> 赞同：3
> 
> 时间：2012-07-04T18:30:58.303
> 
> 标签：vb.net, vb6, vb6-migration

我正在开发一个 VB6 遗留应用程序。我已经开始在 VB.NET 中编写所有新代码，本质上是创建我所谓的互操作层。我可以通过两种方式解决这个问题：

1.  使用此互操作层在 VB.NET 中编写所有新代码，并使用分阶段的方法进行升级。
2.  继续编写 VB6 代码，然后在以后将其全部转换（使用大爆炸方法）。我目前没有时间转换整个应用程序。

我的问题是，哪种方法更好？

**更新** 我喜欢选项 1 的原因是因为有一个 ASP.NET 应用程序。以前的开发人员会在两个应用程序（即 VB6 和 ASP.NET）中有效地复制代码。因此，ASP.NET 应用程序中的一些代码可以与 VB6 共享，反之亦然。这就是为什么我认为选项 1 更好，但我找不到任何文献表明开发人员实际上会这样做

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T19:05:14.243

在前世，我参与了同一类型的项目。原始应用程序是使用 Access 作为其框架编写的。然后出现了 VB6，它似乎工作得很好，并且允许更多功能，而不必改变最初在 Access 中编写的大部分内容。

随之而来的是.Net ...

...尽管我不喜欢 .Net 的开发阶段并且被迫使用*互操作性层*，但这是必要的。

也就是说，我将尽可能主观地回答这个问题：

**如果您知道**应用程序将完全转换为 .Net，那么请尽可能多地使用 .Net 进行新开发。除了对互操作性的看法（和事实）之外，我没有其他理由推迟它——例如更多的开销、性能等。

*侧边栏 - 至少您没有与 Access 的互操作性问题......当它崩溃时，它会破坏一切。这是我第一次使用互操作（使用 Access），它并不漂亮。*

等待.Net开发的优势：

1.  交付时间更短*（无互操作层）*
2.  更稳定的应用程序*（无互操作层）*

等待.Net开发的缺点：

1.  **重新编写**整个应用程序时，发布周期很长（并且可能无利可图）
***   引入了许多新的错误*   学习编写单元测试，这将是你的最后一件事**

 **Beginning .Net development now will increase your chances of success in the long run. I don't believe an interop layer is going to cause you the headaches it did for me - and any degradation in performance should be minimal.

I don't know if you are involved with a team of developers on this project, but if you are, make sure everyone is on board with the move to .Net. I've seen a few VB6 developers strike a *dear in the headlights pose* over VB.Net. The nature is to continue writing in the same style they're used to.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T18:38:45.587

我个人会使用你的第一个选项（因为你已经实现了互操作性层），这样当你做它时它会减少重写的痛苦......如果你正确地设计你的类结构。第二种选择将是我的首选方式，但由于您有时间限制，请使用第一种。最终 VB6 运行时不会成为较新版本的 Windows 的一部分，请参阅这个[SO question](https://stackoverflow.com/questions/4221661/vb6-running-on-windows-8)。我自己有一个需要转换的 VB6 应用程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T18:49:21.360

专注于为用户提供他们想要的东西。如果在 vb6 中更容易做到这一点，那么就这样做。在需要转换为 vb.net 时担心转换为 vb.net。将 vb6 转换为 .net 的工具现在非常好，正在不断开发中，因此有望进一步改进。**

# mysql - Mysql加入重复项

> ID：11333980
> 
> 赞同：0
> 
> 时间：2012-07-04T18:31:29.740
> 
> 标签：mysql

我正在建立一个 cms，我有一个名为 menus 的表

```
Menus

MenuID | MenuName
1        Home
2        users
3        email
4        system 
```

我有另一个表来控制用户对这些菜单的访问

```
call user_menu_access
MenuID | UserID
1           1
2           1 
```

我正在做这样的左连接

```
SELECT * 
FROM menus
LEFT JOIN user_menu_access 
    ON menus.MenuID = user_menu_access.MenuID 
WHERE UserID = 1 
```

我的结果集重复行，因为我必须为 1 和 2 实体，我想要一个如下的结果集

```
MenuID  | UserID
1           1
2           1
3           NULL
4           NULL 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T18:40:11.570

您需要将条件移动到`ON`子句中：

```
SELECT menus.menuid, userid 
FROM menus
LEFT JOIN user_menu_access 
    ON menus.MenuID = user_menu_access.MenuID 
    AND UserID = 1 
```

[在此处](http://sqlfiddle.com/#!2/a623e/2)查看此查询的执行情况（准确给出您要求的结果）。

这样做的原因是该`WHERE`子句在连接发生*后**过滤*行集，但是因为您正在执行 a ，所以表的列全部用于没有任何用户访问权限的菜单，因此您的条件不正确对于那些行。*`left join``user_menu_access``null`*

# javascript - HTML表单上的多个输入值在javascript中提交

> ID：11333982
> 
> 赞同：0
> 
> 时间：2012-07-04T18:31:30.523
> 
> 标签：javascript, html, forms

我希望将值乘以 2.50 并添加 1.95（值*2.50）+1.95。有没有办法通过javascript做到这一点？

```
<form action="" id="formcalculate" method="post" name="formcalculate" >
    <p class="DistanceLable">Distance in miles:</p>
    <p style="position: relative; text-align: center; font-size: 11px">
        <input id="ratecalculator" style="text-align: right; width: 50px; font-weight: bold; font-size: 15px" type="text" value="0"/>
    </p>
    <p style="text-align: center; padding-top: 3px">
        <input id="btnTotal" class="art-button"  type="button" value="Calculate"/>
    </p>
    <p id="totalcalculator" class="totalcalculator" >&nbsp;</p>
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T18:41:55.803

修改以下两行：

```
<p class="DistanceLable">Distance in miles: <span id="result"></span></p>
<input id="btnTotal" class="art-button"  type="button" value="Calculate" onclick="document.getElementById('result').innerHTML = (2.50*parseFloat(document.getElementById('ratecalculator').value)+1.95).toFixed(2); " /> 
```

# javascript - Jquery OOP 模型阻止默认然后调用基本处理程序

> ID：11333986
> 
> 赞同：0
> 
> 时间：2012-07-04T18:31:40.063
> 
> 标签：javascript, jquery, html, jquery-mobile

我使用jquery mobile；是否可以设置一个 onclick 事件处理程序来执行某些操作但仍然触发 jqm 设置的基本事件处理程序。

例子：

```
$("mybutton").bind("click", function(e){
          e.preventDefault();
          //... do something custom...
          e.callBasicEvent
}); 
```

或类似的东西

非常感谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T19:11:58.847

你可以这样做：

```
 $("mybutton").click( function(e){        
    var clicked = $(this).hasClass('clicked');   

     if (clicked == false) {

        //... do something custom...

        e.preventDefault();
        $(this).addClass('clicked');
        $(this).click();            
     }
 }); 
```

# android - 警告：导出的活动不需要权限

> ID：11333988
> 
> 赞同：41
> 
> 时间：2012-07-04T18:32:02.367
> 
> 标签：android, android-layout, android-manifest

我最近创建了一个项目并添加了启动和主要活动。我编辑了清单文件并将启动活动和主要活动添加到其中。添加主要活动后，它给了我一个警告“导出的活动不需要权限”。它给我的这个警告是什么？我的 API 版本是 android:15。

请帮忙，谢谢！

这是我的清单文件！

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.sliit.droidman"
android:versionCode="1"
android:versionName="1.0">

<uses-sdk android:minSdkVersion="10" android:targetSdkVersion="15" />

<application android:label="@string/app_name"
    android:icon="@drawable/ic_launcher"
    android:theme="@style/AppTheme">
    <activity
        android:name=".SplashActivity"
        android:label="@string/app_name"
        android:theme="@android:style/Theme.NoTitleBar">
        <intent-filter>
            <action android:name="android.intent.action.MAIN"/>
            <category android:name="android.intent.category.LAUNCHER"/>
        </intent-filter>
    </activity>        
    <activity
        android:name="com.sliit.droidman.main.MainActivity"
        android:label="@string/app_name">
        <intent-filter>
            <action android:name="com.sliit.droidman.main.MAINACTIVITY" />
            <category android:name="android.intent.category.DEFAULT"/>
        </intent-filter>
    </activity>
</application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2012-08-29T11:42:19.733

将此添加到您的活动定义中

```
android:exported="false" 
```

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2012-07-22T15:37:16.017

此警告意味着您的活动会暴露给不同进程的应用程序，这些应用程序可能会在没有任何必要许可的情况下实例化它们。

详情见： http: [//developer.android.com/guide/topics/manifest/activity-element.html](http://developer.android.com/guide/topics/manifest/activity-element.html) [http://developer.android.com/guide/topics/manifest/activity-element.html#prmsn](http://developer.android.com/guide/topics/manifest/activity-element.html#prmsn)

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2012-07-04T18:41:50.263

这可能是由于`<action android:name="com.sliit.droidman.main.MAINACTIVITY" />`. 我不知道你为什么要添加那个意图过滤器？

对于其他正常活动，您通常不需要意图过滤器。

# c++ - 查找所有文件时不显示文件名

> ID：11333999
> 
> 赞同：3
> 
> 时间：2012-07-04T18:32:43.360
> 
> 标签：c++, file, directory, find

我的代码有问题。我的 findfile 函数不显示实际名称，但显示文件夹名称。有谁知道是什么导致了这个问题。path 将是用户的下载文件夹，而 path1 是需要移动文件的位置。是的，我在那个目录中有文件。

代码（适用于窗户）：

```
bool* pointer = &doen;

WORD wait = 2500;

string path1 = getCurrentPath();

char userName[10];
DWORD userNameSize = sizeof(userName);
GetUserName(userName, &userNameSize);

string path = path1.substr(0, 3);

path += "users\\";
path += userName;
path1 = path;
path += "\\downloads";
path1 += "\\documents\\xxxx";

char const* plaatsD = path.c_str();
char const* plaatsF = path1.c_str();

userNameSize = NULL;

WIN32_FIND_DATA ffd;
TCHAR szDir[MAX_PATH];
HANDLE hFind = INVALID_HANDLE_VALUE;
DWORD dwError=0;

string str;
string str2;
string str3;

char const* a;
char const* b;

StringCchCopy(szDir, MAX_PATH, plaatsD);

while (herhalen)
{
    Sleep(wait);

    hFind = FindFirstFile(szDir, &ffd);

    if (INVALID_HANDLE_VALUE == hFind) 
        continue;

    do
    {
        str = ffd.cFileName;

        if (str.find("xxx") != string::npos)
        {
            str2 = path;
            str2 += "\\" + str + ".b";
            str3 = path1;
            str3 += "\\" + str + ".b";

            a = str2.c_str();
            b = str3.c_str();

            try
            {
                CopyFile(a, b, true);
            }
            catch (exception)
            { 
            }

            a = NULL;
            b = NULL;
        }
    } 
    while (FindNextFile(hFind, &ffd) != 0);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T18:55:04.343

为了枚举下载文件夹中的所有文件和文件夹，您必须在目录路径 ( ) 中附加一个星号 ( `*`)（有关详细信息，请参阅 MSDN [FindFirstFile ）。](http://msdn.microsoft.com/en-us/library/windows/desktop/aa364418%28v=vs.85%29.aspx)`szDir`如果您只想枚举文件，请追加`*.*`.

所以改变你的代码是这样的：

```
...

path += "users\\";
path += userName;
path += "\\*";      // Append an asterik.

... 
```

正如@MRAB 在评论部分指出的那样，您还应该通过调用来关闭查找句柄`FindClose(hFile)`。