# StackOverflow 问答 000322000-000322999

# wpf - 将值绑定到 gridviewcolumn 标题？

> ID：322005
> 
> 赞同：1
> 
> 时间：2008-11-26T20:20:09.450
> 
> 标签：wpf, data-binding

是否可以？

我有一个带有几个 gridviewcolumns 的列表视图。最后一列有一个动态标题。我不知道设计时列标题是什么。它实际上是一个我想显示为字符串的数字。

```
 <GridViewColumn Header="{Binding Path=SomeValue}" 
                    DisplayMemberBinding="{Binding Path=OtherValue}"/> 
```

这似乎不起作用。数据将很好地绑定，只是标题保持空白。单步执行代码，它甚至不会破坏 SomeValue 属性。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-11-26T21:29:54.723

我认为您的问题是“SomeValue”属性的来源。如果您要绑定到一个对象列表，那么让该对象上的属性确定标题是没有意义的，因为这样您就可以为每个对象使用不同的标题。本质上，您所说的是“将列的标题绑定到 'SomeValue' 属性，该属性与我的 'OtherValue' 属性所在的对象位于同一对象上。” “SomeValue”需要来自与您的网格项目绑定到的列表不同的来源。您需要在绑定中设置“RelativeSource”或“ElementName”属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2011-09-02T18:35:25.893

1.  阅读帖子 [http://blogs.infragistics.com/blogs/josh_smith/archive/2008/06/26/data-binding-the-isvisible-property-of-contextualtabgroup.aspx](http://blogs.infragistics.com/blogs/josh_smith/archive/2008/06/26/data-binding-the-isvisible-property-of-contextualtabgroup.aspx)

2.根据步骤1中的帖子创建一个datacontext spy类（复制并粘贴它，它是几行）

3.使用datacontext spy

```
<common:DataContextSpy x:Key="dci" DataContext="{Binding SomeProperty}" />

<DataGridTemplateColumn Header="{Binding Source={StaticResource dci},  
                        Path=DataContext.SomePropertysListOfValues[14]}"> 
```

# jboss - 在 jboss 中将带有 JAAS 登录模块的数据源部署为 .sar

> ID：322028
> 
> 赞同：4
> 
> 时间：2008-11-26T20:25:26.693
> 
> 标签：jboss, datasource, sar

有没有人有将数据源 (-ds.xml) 定义 + login-config.xml 捆绑为 jboss 中的服务存档的经验？我一直在为此奋斗一段时间，但无济于事。我只是在寻找一些关于我应该如何布置 .sar 的指示。我希望 .sar 最终存在于 .ear 中。任何指针都非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-21T13:34:02.123

这是一个相对简单的任务。

您的 EAR 文件需要具有以下布局：

```
my-app.ear
    |+ META-INF
       |+ applications.xml and jboss-app.xml
    |+ myapp.war
    |+ myapp.jar
    |+ lib
    |+ my-ds.xml
    |+ my-login-module-service.xml 
```

其中 my-ds.xml 像往常一样包含数据源定义。my-login-module-service.xml 基于 DynamicLoginConfig 类定义 MBean。然后在 jboss-app.xml（自定义 JBoss 部署描述符）中引用这些模块，如下所示：

```
<jboss-app>
<module>
    <service>my-login-module-service.xml</service>
</module>

<module>
    <service>my-ds.xml</service>
</module>
</jboss-app> 
```

创建登录模块定义的最简单方法是使用对嵌入式 XML 文档的支持作为属性值。这样的配置（my-login-module-service.xml）将如下所示：

```
<server>
    <mbean code="org.jboss.security.auth.login.DynamicLoginConfig"
        name="jboss:service=DynamicLoginConfig">
        <attribute name="PolicyConfig" serialDataType="jbxb">
        <jaas:policy xsi:schemaLocation="urn:jboss:security-config:4.1 resource:security-config_4_1.xsd" xmlns:jaas="urn:jboss:security-config:4.1" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
        <jaas:application-policy name="userinrole">
            <jaas:authentication>
                <jaas:login-module code="org.jboss.security.auth.spi.XMLLoginModule" flag="required">
                <jaas:module-option name="my-policy-123">
                <ur:users xsi:schemaLocation="urn:jboss:user-roles:1.0 resource:user-roles_1_0.xsd" xmlns:ur="urn:jboss:user-roles:1.0">
                    <ur:user name="admin" password="admin123">
                        <ur:role name="MyUserRole"></ur:role>
                        <ur:role name="AdminUser"></ur:role
                    </ur:user>
                </ur:users>
                </jaas:module-option>
                <jaas:module-option name="unauthenticatedIdentity">guest</jaas:module-option>
                </jaas:login-module>
        </jaas:authentication>
        </jaas:application-policy>
        </jaas:policy>
    </attribute>
        <depends optional-attribute-name="LoginConfigService">jboss.security:service=XMLLoginConfig</depends>
        <depends optional-attribute-name="SecurityManagerService">jboss.security:service=JaasSecurityManager</depends>
    </mbean>
</server> 
```

您可以使用 JNDIVIew bean 验证成功部署（本示例中为 java:/jaas/my-policy-123）。

对于包含自定义类的部署，最好选择 SAR 存档部署和自定义代码。在这种情况下，您可以将 MBean 定义和登录模块配置 (META-INF/jboss-service.xml) 分开：

```
<server>
<mbean code="org.jboss.security.auth.login.DynamicLoginConfig" name="jboss:service=DynamicLoginConfig">
    <attribute name="AuthConfig">META-INF/login-config.xml</attribute>
    <depends optional-attribute-name="LoginConfigService">jboss.security:service=XMLLoginConfig</depends>
    <depends optional-attribute-name="SecurityManagerService">jboss.security:service=JaasSecurityManager</depends>
</mbean>
</server> 
```

META-INF/login-config.xml 然后将包含您的策略配置。

我在 JBoss AS 4.x 上使用这种方法。

# ocr - 对可编程驾驶执照扫描仪的建议？

> ID：322033
> 
> 赞同：3
> 
> 时间：2008-11-26T20:27:07.440
> 
> 标签：ocr, image-scanner

我们的电机池想要扫描驾驶执照并将数据导入我们的自定义系统。我们正在寻找能够让我们以编程方式从扫描仪（包括图片）获取数据并将其插入应用程序的东西。我想知道是否有人对这种类型的系统有经验，可以推荐一个或告诉我们要避免哪些。我们的应用程序是用 PowerBuilder 编写的，并使用 DB2 数据库。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2010-04-07T22:40:59.933

尝试 idScan.net (www.idScan.net) 的解决方案 有 SDK 可以解析美国和加拿大各省的所有州的驾照。您还可以购买可读取二维条码和磁条的 ID 扫描仪 E-seek m250 等硬件（包括软件）。祝你好运！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-10-14T03:21:48.687

我们在我们的记录管理软件中支持类似的东西。我们的应用程序旨在与楔形阅读器一起使用，因为它们最容易启动和运行（不需要特殊的驱动程序）。刷卡时，读卡器会针对磁条上编码的每个字符向操作系统发送击键，并`Enter`在每个磁道之间模拟按键（符合 AAMVA 的许可证有 3 个数据磁道）。

这有点烦人，因为它的行为*就像*有人在手动输入数据一样，所以没有简单的方法来判断您何时拥有所有数据（您可以等待获取 3 行信息，但是很难检测到无效的卡片，例如当有人试图刷一张学生证时，它的编码轨道可能少于 3 个；在这种情况下，应用程序将永远挂起，等待接收不存在的第三个轨道）。为了解决这个问题，我们使用“快速失败”的方法：每次我们得到一个`Enter`按键，我们立即处理当前行，并记录我们在该点（1、2 或 3）期望的轨道。如果当前曲目无法处理（例如，曲目上出现的起始字符与 AAMVA 格式驾驶执照记录的内容不同），我们假设用户必须刷过驾驶执照以外的其他东西。

我不确定我们使用的阅读器是否支持读取图像数据。可以对其进行编程以返回卡上数据的子集，但我们只使用出厂默认设置，它似乎只返回前三个数据轨道（实际上我相信图像数据是在某些设备上找到的二维条码中编码的）许可证，不在磁条上，但我可能是错的）。

有关驾驶​​执照磁条上使用的 AAMVA 磁道格式的更多信息，请参阅[当前标准](http://www.aamva.org/aamva/DocumentDisplay.aspx?id=%7B6B1585D2-1BCE-4F77-A8CD-BDD325139972%7D)中的附件F。

我们使用的基本方法是：

1.  显示具有隐藏文本框的模式对话框，该文本框被赋予焦点。该对话框只是告诉用户通过读卡器刷卡。

2.  用户刷卡，阅读器开始向隐藏的文本框发送 keydown 事件。

3.  文本框的 keydown 事件处理程序监视`Enter`按键。当检测到一个时，我们抓取当前存储在文本框中的最后一行，并将其传递给一个音轨解析器，该解析器尝试根据 AAMVA 格式解析音轨。

4.  如果当前曲目的“快速失败”解析步骤失败，我们将对话框的状态消息更改为告诉用户无法读取卡的消息。此时，文本框仍会收到额外的 keydown 事件，但这没关系，因为后续轨道也有足够高的机会失败，只要阅读器停止发送数据，用户仍会看到错误消息。

5.  如果解析成功，我们增加一个计数器，告诉解析器接下来应该处理什么轨道。

6.  如果当前轨道计数大于 3，我们知道我们已经处理了 3 个轨道。此时，我们将 3 个轨道（已经将大部分字段拆分，但此时所有内容仍以字符串形式存储）解析为一个更可用的`DriversLicense`对象，该对象对轨道数据进行额外检查，并使其更易于使用我们的应用程序（将`DOB`字段从字符串转换为真实的 Date 对象，将 AAMVA`Name`字段中的子字段解析为名字、中间名、姓氏、名字后缀等）。如果第二个解析阶段失败，我们会告诉用户重新刷卡。如果成功，我们关闭对话框并将`DriversLicense`对象传递给我们的主应用程序以进行进一步处理。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-11-26T20:33:42.357

如果您的扫描仪“兼容双胞胎”，那么您将能够通过您可以在网上购买的 ActiveX 控件从您的应用程序管理[它](http://www.ciansoft.com)。您将能够管理您的基本扫描参数（质量、颜色、单/多页可以、输出格式等），从您的应用程序开始扫描，将结果保存为文件并在任何需要的地方传输此文件。在过去的 2 年里，我们一直将它与 VB 代码一起使用。有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2011-07-07T19:08:00.493

您还可以使用 InfoScan SDK。您可以在 www.scan-monitor.com 上找到它，该系统允许您使用任何扫描仪，并且不会让您购买特定的扫描仪。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-12-20T00:28:08.347

您可以尝试以下列表中的内容：http: [//www.adams1.com/plugins.html](http://www.adams1.com/plugins.html)

不过，我自己并没有使用过它们。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-11-26T20:38:44.093

也许您想使用磁条阅读器从卡中获取驾驶执照信息。我记得大多数驾驶执照的条纹上只有纯文本数据，因此在编程方面相对简单。
MagStripe 阅读器现在也很便宜。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-06-11T14:01:39.143

我用 C# 编写了一个解析器，虽然它“没问题”，但它仍然远非完美。

我似乎找不到它，但曾经存在一个 Wikipedia 条目，它具有要查找的模式（相信我，在没有任何帮助的情况下自己解析它是一种痛苦）。

请注意，不同的州对您可以使用和不能使用政府颁发的身份证件有不同的法律。德克萨斯州有一个。

我们使用戴尔读卡器，它输入的内容*就像*是通过键盘输入一样，然后按回车键。这使编程/非常/容易，因为您只需将焦点发送到文本框并等待输入。将其分成块的主要键是胡萝卜'^'。打破它，你就会有你的基本块。

# coding-style - IF 语句格式最佳实践，你的风格是什么？

> ID：322034
> 
> 赞同：2
> 
> 时间：2008-11-26T20:27:21.447
> 
> 标签：coding-style

希望**改进**我的 IF 语句，并且我想让我的代码**看起来很漂亮**

这就是我目前正在做的事情，它是否**可读，还有****改进**的余地吗？

```
SomeObject o = LoadSomeObject();

if( null == o
    ||
    null == o.ID || null == o.Title
    ||
    0 == o.ID.Length || 0 == o.Title.Length
 ) 
```

我周围没有人可以问。这就是我第一个来这里的原因。请不要关闭我的问题:(

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2008-11-26T20:32:42.263

为了下一个人，我总是尽量避免使用复杂的布尔表达式，但如果我必须编写一个不容易在一行中出现的表达式，我会将其格式化如下：

```
if (value1 == value2 ||
    value3 == value4 ||
    value5 == value6 ||
    value7 == value8) {

  executeMyCode();
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2008-11-26T20:30:48.867

您的冗长导致代码可读性降低，我认为以下格式最好：

```
if ( null == o || null == o.ID || null.Title || 0 == o.ID.Length || 0 == o.Title.Length )
{
  // do stuff
} 
```

我们都有高分辨率/宽屏显示器是有原因的，没有理由将您的代码锁定在一些非常短的语法上。另外，我会简单地创建一个名为 IsIDEmpty 的函数，以便代码看起来像

```
if ( IsIDEmpty(o) )
{
  // do stuff
} 
```

使代码更简单、更干净。该函数将执行实际检查并返回一个布尔值。我敢肯定，无论如何您都可能会重复使用它，而且它还可以作为一种简单的方式让代码更加自我记录/注释。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2008-11-26T20:57:15.507

对于你所拥有的最简单的格式，我会每行一个。

```
if(null == o
  || null == o.ID
  || null == o.Title
  || 0 == o.ID.Length
  || 0 == o.Title.Length) 
```

如果您可以重构条件以使其适合一行，那就更好了。我发现大量|| 或 && 通常难以阅读。也许您可以将其重构为一个函数并留下：

```
if(myFunction(...)) 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2008-11-26T21:37:05.783

我的经验法则：避免使用半智能自动格式化程序无法重现的任何格式。

在我看来，拥有一组已定义的格式*和*一个能够实际生成该格式代码的自动化工具/模板/配置是一大优势。

如果您的代码在自动格式化后仍然不可读，那么您很可能无论如何都需要重构。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2008-11-26T20:31:42.780

如果合适的话，我要么把它全部放在一条线上（这一条显然不合适）。有了这个，我会把 || 始终在行的开头或结尾：

```
if( null == o ||
    null == o.ID ||
    null == o.Title ||
    0 == o.ID.Length ||
    0 == o.Title.Length
) 
```

或者

```
if( null == o
    || null == o.ID
    || null == o.Title
    || 0 == o.ID.Length
    || 0 == o.Title.Length
) 
```

您可以在一条线上有 >1 个条件，|| 的定位 我认为更重要。

~~我忽略了 null.Title 似乎没有多大意义的事实~~

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2008-11-26T20:32:41.593

老实说，我觉得这很让人分心。主要是因为'||' 开始制作有趣的图案。

我更喜欢类似的东西

```
if ( o == null || o.ID == null || null.Title ||
     o.ID.Length == 0 || o.Title.Length ) 
```

甚至更好，如果可能的话，把它放在一行中。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2008-11-26T20:35:07.890

我认为它非常难以阅读。

把常量放在第一位的感觉对我来说总是有点奇怪——大多数编译器可以被说服如果他们在条件中找到赋值，就会发出警告。

然后你为两个不同的东西测试 null ，然后为两个不同的东西测试零长度 - 但重要的不是长度检查，而是你正在检查的成员。所以我会把它写成

```
if (o == null       ||
    o.ID == null    || o.ID.length == 0 ||
    o.Title == null || o.Title.Length == 0) 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2008-11-26T21:43:39.813

与其为这个问题制定一个标准 - 我建议对您使用的任何语言采用现有的编码标准。

例如：

GNU 编码标准
[http://www.gnu.org/prep/standards/](http://www.gnu.org/prep/standards/)

Java 编程语言的代码约定
[http://java.sun.com/docs/codeconv/](http://java.sun.com/docs/codeconv/)

.NET Framework 类库开发人员通用参考设计指南
[http://msdn.microsoft.com/en-us/library/czefa0ke.aspx](http://msdn.microsoft.com/en-us/library/czefa0ke.aspx)

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2008-11-26T21:36:52.477

一般来说，我支持 TravisO，但如果你的 if() 语句中有太多条件以至于它变得很长，请考虑放入它自己的小函数：

```
bool wereTheConditionsMet()
{
  if( NULL == 0 )
    return true;
  if( NULL == o.ID )
    return true;
  :  :   // and so on until you exhaust all the affirmatives
  return false;
}

if ( wereTheConditionsMet() )
{
  // do stuff
} 
```

传达一个命名良好的谓词函数的意图比无穷无尽的 ||s 和 &&s 字符串要容易得多。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-11-26T21:33:57.117

它**不可读**。这就是我如何做真的很长的如果（或者那些我必须经常玩弄的）。

```
if(
  o == null  ||
  o.ID == null || 
  o.Title == null ||
  o.ID.Length == 0 || 
  o.Title.Length == 0
 ) 
```

对于你的，我会做一行。

```
if(o == null  || o.ID == null || o.Title == null || o.ID.Length == 0 ||  o.Title.Length == 0) 
```

或者，如果您使用的是 C++，我会这样做：

```
if(!o)
{}
if(! (o.ID && o.Title && o.Length))
{} 
```

...因为它将创造与正确性分开。

但是，*请注意*，由于我喜欢换行符，我被指责为 LOC 臃肿。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2008-11-26T22:58:40.597

1.  使用自动代码格式化程序，并对其进行适当配置。
2.  编写一个类似 isPresent(String) 的方法来检查 String 参数是否为非空和非空（零长度）。
3.  重写原始条件以使用新的 isPresent(String) 方法，可能都在一行上。

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2008-11-26T20:33:44.367

我通常会做类似的事情：

```
if(x < 0 || x >= width
|| y < 0 || y >= height)
{
    /* Coordinate out of range ... */
} 
```

第一个 y 和 x 排成等宽字体，这很好，而且我不会被半缩进弄糊涂。

这种方法在进行类似比较时效果最好。否则，我通常会拆分我的if。

# java - Java 是否适用于 PCF 字体？

> ID：322050
> 
> 赞同：1
> 
> 时间：2008-11-26T20:35:10.950
> 
> 标签：java, linux, fonts, x11

我正在尝试让 IBM jre 在我的 linux 机器上使用默认 X11 安装中的 PCF 字体。特别是 adobe-helvetica 字体。我已经尝试修改 jre/lib 文件夹中的 fontconfig.properties，但无论我做什么 Java 接缝都可以使用其他字体。我想有一些算法如何 java VM 尝试将 java 逻辑字体链接到系统中的实际物理字体，即使在配置中指定的字体无法使用的情况下也是如此。在 Windows 上这很简单，但在 Linux 上，除了 TrueType 字体之外，我无法让它使用任何东西。
有人有在 Linux 上的 IBM jre 上配置字体的经验吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-17T18:36:33.427

我整个上午都在学习 Java 字体。有很多限制，其中一些在 Java 1.6 中被删除。我没有任何答案，但这里有一些我掌握的信息可能会有所帮助。

Java 在内部区分系统字体和创建的字体。（Sun 的新闻快讯：最好通过子类化明确这一点！） 系统字体似乎是安装在 JRE 中的字体，可能加上安装在系统上的一些字体。但显然不是您系统上安装的所有字体；我的 Linux 系统上也有 adobe-helvetica，但似乎无法以我能想到的任何名称从 Java 访问它。

同时，您可以使用 Font.createFont() 方法从字体文件创建字体。您必须指定字体文件类型。我发现在 Font 类中指定这些类型的唯一常量是 TRUETYPE_FONT 和 TYPE1_FONT。所以看起来如果 PCF 字体可用，它并没有通过提供一个常量来指定它们来明确。也许别人知道的更多。我确实在网上看到了一些关于在 Java ME 中使用位图字体的信息，因此必须以某种方式使用其他类型的字体。

创建字体后，您可以使用 GraphicsEnvironment.registerFont() 调用将其添加到 JVM 的可用字体概念中，但这仅适用于 Java 1.6 及更高版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-17T18:45:52.910

PCFFont[包](http://www.righto.com/java/fonts/)似乎提供了使用 Java 中的 PCF 字体的能力。不幸的是，我认为它是通过一个不扩展 java.awt.Font 类的自定义 PCFFont 类来实现的，所以我想说它的用处可能是有限的。但是，它可能会为编写可以处理 PCF 字体的自定义 Font 子类提供一些实现细节的指针。找到源代码并不是很明显。该确切类的代码在[这里](http://www.righto.com/java/fonts/pcffont/PCFFont.java)。

我想说作者似乎有点困惑，因为他谈到将 TrueType 字体转换为 PCF 以便您可以将它们与他的库一起使用，并且 Java 已经原生支持 TrueType 字体。但他似乎是 Sun 的工程师，所以也许他知道的比我想象的要多；此外，这可能已经过时了（Java 有没有不支持 TrueType 的时候？）。

# colors - 我需要编写一个程序来使用 HP PCL 5e/HP/GL2 绘制图形

> ID：322052
> 
> 赞同：0
> 
> 时间：2008-11-26T20:35:57.810
> 
> 标签：colors, drawing, line, printer-control-language

我已经阅读了一个示例并尝试复制它的方法，但结果很奇怪。这是一个一次性交易，所以我不想买一个包来做这个。此外，它将在不再有很多程序员编写的 Basic 中的多值数据库上执行。如果有人可以发布一个小例子，那将是最有帮助的。具体来说，我需要一个以 8x11 纸为中心的盒子，左边的 1/3 用绿色填充，中间的 1/3 用黄色填充，最后 1/3 用红色填充。然后在框的每种颜色内画一条通过 3 个点的线。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-02T16:39:10.207

最简单的方法是画3个盒子。你必须自己定位每个人，做自己的数学，以确定从哪里开始第一个以使其居中等。

首先将光标放在第一个框的左上角，绘制它，移动到下一个框的左上角，绘制它，最后一个框也一样。这是一些代码：

```
<esc>&u300D<esc>*t300R<esc>*p300x300Y<esc>*r3U<esc>*v2S<esc>*c300a300b5P<esc>*p600x300Y<esc>*r3U<esc>*v3S<esc>*c300a300b5P<esc>*p900x300Y<esc>*r3U<esc>*v1S<esc>*c300a300b5P 
```

这是解释：

```
<esc>&u300D<esc>*t300R -- set the Unit of Measure and Resolution (in this case 300 dpi)
<esc>*p300x300Y -- move cursor to 300x 300y (1 inch x 1 inch) 
<esc>*r3U<esc>*v2S -- set the color palette to RGB and use color 2 (green)
<esc>*c300a300b5P -- draw a box that is 300 wide and 300 tall, use current fill pattern
<esc>*p600x300Y -- move cursor to 600x 300y
<esc>*r3U<esc>*v3S -- set the color palette to RGB use color 3 (yellow)
<esc>*c300a300b5P -- draw a box that is 300 wide and 300 tall, use current fill pattern
<esc>*p900x300Y -- move cursor to 900x 300y
<esc>*r3U<esc>*v1S -- set the color palette to RGB use color 1 (red)
<esc>*c300a300b5P -- draw a box that is 300 wide and 300 tall, use current fill pattern 
```

这是其他颜色和调色板，请记住这是简单的方法，您可以指定自己的 RGB 等。

```
RGB Palette
<esc>*r3U<esc>*v1S - Red                
<esc>*r3U<esc>*v2S - Green
<esc>*r3U<esc>*v3S - Yellow
<esc>*r3U<esc>*v4S - Blue
<esc>*r3U<esc>*v5S - Magenta
<esc>*r3U<esc>*v6S - Cyan

CMYK Palette
<esc>*r-3U<esc>*v1S - Cyan
<esc>*r-3U<esc>*v2S - Magenta
<esc>*r-3U<esc>*v3S - Blue
<esc>*r-3U<esc>*v4S - Yellow
<esc>*r-3U<esc>*v5S - Green
<esc>*r-3U<esc>*v6S - Red
<esc>*r-3U<esc>*v7S - Black 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-28T18:27:19.283

解决的问题：我的想法的错误是它是 300 dpi 和 600 dpi 之间的差异，所以我除以 2 并且答案似乎几乎正确。真正的问题是 3oo dpi 和 720 Decipoints 之间的差异。实际系数需要为 2.4，现在它可以完美运行。

# winforms - 实现 2D 单选按钮网格的最佳方法是什么？

> ID：322068
> 
> 赞同：3
> 
> 时间：2008-11-26T20:40:31.437
> 
> 标签：winforms, user-interface, radio-button, options, selecteditem

实现 2D 单选按钮网格的最佳方法是什么，以便每列中只能选择一个选项，每行中只能选择一个选项？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-11-26T21:26:37.647

单选按钮的一维数组的一维数组。每行（或列）都将使用正常的单选按钮功能，而每一列（或行）将由一个循环更新，每当切换单个单选按钮时调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-23T04:45:22.263

您可以使用自定义集合和数据绑定单选按钮来解决此问题。

每个单独的孩子都有一个行属性和一个列属性以及真/假值标志，当通过单击或按键更改为真时会引发一个事件。

集合类中的逻辑将响应值更改并循环遍历同一行和列中的其他子项，以通知它们它们应该为假。

如果您不想进行数据绑定，也可以使用一组用户控件来实现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-28T12:50:49.937

像这样的东西？

```
using System;
using System.Drawing;
using System.Windows.Forms;

class Program {

    static RadioButton[] bs = new RadioButton[9];

    static void HandleCheckedChanged (object o, EventArgs a) {
        RadioButton b = o as RadioButton;
        if (b.Checked) {
            Console.WriteLine(Array.IndexOf(bs, b));
        }
    }

    static void Main () {
        Form f = new Form();
        int x = 0;
        int y = 0;
        int i = 0;
        int n = bs.Length;
        while (i < n) {
            bs[i] = new RadioButton();
            bs[i].Parent = f;
            bs[i].Location = new Point(x, y);
            bs[i].CheckedChanged += new EventHandler(HandleCheckedChanged);
            if ((i % 3) == 2) {
                x = 0;
                y += bs[i].Height;
            } else {
                x += bs[i].Width;
            }
            i++;
        }
        Application.Run(f);
    }

} 
```

问候，坦伯格

# vb6 - vb6中的发送键

> ID：322069
> 
> 赞同：1
> 
> 时间：2008-11-26T20:40:55.040
> 
> 标签：vb6, sendkeys

只是想在 vb6 中延迟一段时间后按下回车键，我发现的所有示例似乎都不起作用，有什么帮助吗？

只是试图模拟击键。重点无所谓。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-11-26T20:55:10.783

您可能需要提供更多详细信息。但是，如果您尝试向 VB6 编写的应用程序发送回车键并且它没有接收它，通常是因为您没有将表单的 KeyPreview 属性设置为 true。没有当前焦点的控件会吸收您发送的按键。

如果您创作了接收回车键的应用程序。我强烈建议您重构应用程序，以便 enter 触发的任何代码都可以通过代码完成。这通常通过将代码移动到两个应用程序都可以访问的区域来完成。这是因为 Sendkeys 是出了名的不确定性，并且会引起很多奇怪。

您可以从[此处](http://msdn.microsoft.com/en-us/library/ms646304(VS.85).aspx)的 Win32 API 信息中使用 keybd_event， 我发现它比 SendKeys 更可靠。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-11-26T20:50:36.987

如果您尝试触发事件处理程序，您可以在代码中调用它而不是发送按键。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-26T20:58:57.983

SendKeys 应该始终是最后的手段。

问题真的是重点。您必须在每次发送之前设置焦点。

几乎所有事情都可以通过脚本完成，那么您要做什么？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-21T06:52:43.050

Vista 上的 SendKeys 存在一些问题。有关详细信息和解决方案，请参阅Karl Peterson 的[这篇文章](http://visualstudiomagazine.com/articles/2007/11/13/vb-statement-against-vista.aspx)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-12-01T00:10:32.823

我制作了一个 vb6 测试应用程序。带有 1 个表单、1 个默认按钮、1 个计时器：

```
Private Sub Command1_Click()
  Debug.Print CStr(Now) + " Command1"
End Sub
Private Sub Timer1_Timer()
    Debug.Print CStr(Now) + " Sendkeys"
    SendKeys "{Enter}"
End Sub 
```

发送给自己时似乎可以工作。

```
11/30/2008 6:11:38 PM Sendkeys
11/30/2008 6:11:38 PM Command1
11/30/2008 6:11:43 PM Sendkeys
11/30/2008 6:11:43 PM Command1
11/30/2008 6:11:48 PM Sendkeys
11/30/2008 6:11:48 PM Command1 
```

你想发送到另一个进程吗？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-19T13:43:14.750

你可以试试我的 PushKeys 程序，[这里有](http://mc-computing.com/languages/DOSSendKeys.htm#VisualBasic)。它的语法与 SendKeys 兼容，但使用 keybd_event API 并内置了 sleep 功能。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-07T07:04:29.643

如果我想延迟脚本中的某些操作，我会执行以下操作：

```
t = Timer + 5        'Change 5 to a higher number if you need more time to wait
Do While Timer < t
    DoEvents           'This is necessary to prevent freezing 
Loop

SendKeys "{ENTER}"

SendKeys "{ENTER}", True    'This might also work 
```

# c# - 在 Windows Mobile 上访问可用 Wifi AP 的列表

> ID：322070
> 
> 赞同：1
> 
> 时间：2008-11-26T20:41:11.437
> 
> 标签：c#, .net, windows, compact-framework, mobile

我需要查询可用无线接入点的列表。我只需要他们的 SSID。

该应用程序当前是 .Net CF 2.0，但如果必须，使用 3.5 也不是问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-11-26T21:31:56.060

“附近” AP 的列表通过 NDIS 或 WZC 检索，具体取决于您的 NIC 驱动程序支持的内容。两者在 MSDN 中都有很好的记录，但包装起来并不有趣。OpenNETCF 的 SDF 包含一个包装器，可以查看两者，具体取决于您的 NIC 支持。

它可以通过[OpenNETCF.Net.NetworkInformation](http://opennetcf.com/library/sdf/html/d79a4a4f-93be-3c85-477b-5298d1141978.htm)访问。最新[SDF 2.3中的](http://smartdeviceframework.com)[NetworkInterface](http://opennetcf.com/library/sdf/html/d308a2a7-778b-ff94-b297-54422ea9a271.htm)的[GetAllNetworkInterfaces 方法](http://opennetcf.com/library/sdf/html/2dc21eda-47c6-fde5-e569-1781b1b44feb.htm)（实际上它从 2.2 开始就存在）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-26T21:00:27.793

其核心在于 Windows Zero Config .dll，也称为 WZC。但是，从托管应用程序中，您需要通过[OpenNETCF](http://www.opennetcf.com/)进行，因为它们具有可以为您提供此信息的托管包装器。感兴趣的类是 Adapter 或 NetworkAdapter 类。

过时的 api 是：

```
Networking.GetAdapters() 
```

虽然现在已经贬值了，但我想我很抱歉，但我忘记了他们用什么代替了它，但会有一个新的等价物。

# c# - 为什么这个属性 Getter 是虚拟的？

> ID：322071
> 
> 赞同：11
> 
> 时间：2008-11-26T20:41:25.943
> 
> 标签：c#, .net, reflection, .net-3.5

一些 C# 代码有一个奇怪的问题 - 属性的 Getter 方法在未显式标记时显示为虚拟。

该问题与此类的 DbKey 属性有关（完整代码）：

```
public class ProcessingContextKey : BusinessEntityKey, IProcessingContextKey
{
    public ProcessingContextKey()
    {
        // Nothing
    }

    public ProcessingContextKey(int dbKey)
    {
        this.mDbKey = dbKey;
    }

    public int DbKey
    {
        get { return this.mDbKey; }
        set { this.mDbKey = value; }
    }
    private int mDbKey;

    public override Type GetEntityType()
    {
        return typeof(IProcessingContextEntity);
    }
} 
```

当我使用反射检查 DbKey 属性时，我得到以下（意外）结果：

```
Type t = typeof(ProcessingContextKey);
PropertyInfo p = t.GetProperty("DbKey");
bool virtualGetter = p.GetGetMethod(true).IsVirtual; // True!
bool virtualSetter = p.GetSetMethod(true).IsVirtual; // False 
```

为什么 virtualGetter 设置为 True？鉴于该属性既不是**abstract**也不是**virtual** ，我预计是错误的。

为了完整性 - 以及它们相关的远程可能性，这里是 BusinessEntityKey、IProcessingContextKey 和 IBusinessEntityKey 的声明：

```
public abstract class BusinessEntityKey : IBusinessEntityKey
{
    public abstract Type GetEntityType();
}

public interface IProcessingContextKey : IBusinessEntityKey 
{
    int DbKey { get; }
}

public interface IBusinessEntityKey
{
    Type GetEntityType();
} 
```

在此先感谢您的帮助。

**澄清**- 为什么这对我很重要？

我们使用 NHibernate 并跟踪了一些延迟加载到只有一半可覆盖的属性的问题 - 虚拟 getter 但私有 setter。在修复了这些之后，我们添加了一个单元测试来捕捉任何其他可能发生这种情况的地方：

```
public void RequirePropertiesToBeCompletelyVirtualOrNot()
{
    var properties
        = typeof(FsisBusinessEntity).Assembly
            .GetExportedTypes()
            .Where(type => type.IsClass)
            .SelectMany(
                type => 
                    type.GetProperties(
                        BindingFlags.Instance 
                        | BindingFlags.Public 
                        | BindingFlags.NonPublic))
            .Where(property => property.CanRead 
                && property.CanWrite)
            .Where(property => 
                property.GetGetMethod(true).IsVirtual 
                    != property.GetSetMethod(true).IsVirtual);

    Assert.That(
        properties.Count(),
        Is.EqualTo(0),
        properties.Aggregate(
            "Found : ", 
            (m, p) => m + string.Format("{0}.{1}; ", 
                    p.DeclaringType.Name, 
                    p.Name)));
} 
```

这个单元测试在上面提到的 DbKey 属性上失败了，我不明白为什么。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2008-11-26T20:44:07.593

它是虚拟的，因为它实现了一个接口方法。就 CLR 而言，接口实现方法始终是虚拟的。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-11-26T20:45:09.103

DbKey 属性 getter 在 IL 中是虚拟的，因为它位于接口中。setter 不是虚拟的，因为它不是接口的一部分，而是具体类的一部分。

[ECMA-335：公共语言基础设施](http://www.ecma-international.org/publications/standards/Ecma-335.htm)第 8.9.4 节指出：

> 接口可以有静态或虚拟方法，但不能有实例方法。

因此，由您的接口定义的 getter 在派生类中实现时将被标记为虚拟。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2008-11-26T20:49:48.157

[链接](http://msdn.microsoft.com/en-us/library/system.reflection.methodbase.isvirtual.aspx)到解释实现接口的属性始终标记为虚拟的文档。要查看它是否真的是虚拟的（因为它实现了一个接口），您还需要检查它是否为 IsFinal。

# xml - 是否有根据模式验证 XML 的 Perl 模块？

> ID：322080
> 
> 赞同：3
> 
> 时间：2008-11-26T20:44:42.333
> 
> 标签：xml, perl, validation, schema

我需要针对模式验证 XML。

我试过 XML::SAX::ParserFactory; XML::Validator::Schema 和相关模块，但看起来它们是有限的。
受限于它不能识别模式元素，例如 xsd:unique、xsd:group、xsd:keyref、xsd:union 和 xsd:key。

这些 xsd:unique 等是新增功能吗？

如果您能向我指出一些最新且能够胜任任务的 Perl 模块，请不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2008-11-27T15:50:31.507

看看[XML::LibXML](http://search.cpan.org/dist/XML-LibXML/)

这使用了备受推崇的 libxml2 库，大多数人认为它是基于 Expat 和[XML::Parser](http://search.cpan.org/dist/XML-Parser/)的模块的继承者。

对于模式验证，请查看[XML::LibXML::Schema](http://search.cpan.org/perldoc/XML::LibXML::Schema)

```
use XML::LibXML;
use XML::LibXML::Schema;

my $schema = XML::LibXML::Schema->new(location => 'file.xsd' );
my $parser = XML::LibXML->new;

my $xml    = 'file.xml';
my $doc    = $parser->parse_file( $xml );

eval { $schema->validate( $doc ) };
die $@ if $@;

say "$xml is valid\n"; 
```

注意。我仍然主要是[XML::Twig](http://search.cpan.org/dist/XML-Twig/)用户并且几乎不接触 XML 架构，所以我不知道 XML::LibXML::Schema 是否会解决您遇到的问题，但它可能是 CPAN 上满足您需求的最佳解决方案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-11-26T23:18:48.497

您是否尝试过使用 xmllint 验证它？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-02-17T20:12:09.323

@Thushan 你绝对有必要使用 Perl 吗？如果没有，为什么不试试**XMLSTARLET**呢？这是一个非常好的在终端中操作 XML 的工具包！

它不仅支持您需要的遗留 DTD 和 XSD，还支持 Relax-NG 模式。查看它的文档以了解如何[使用 xmlstarlet 验证 XML 文档，](http://xmlstar.sourceforge.net/doc/UG/xmlstarlet-ug.html#d0e520) 希望对您有所帮助；）

祝你有美好的一天！

PD 哦，我看到你使用了 xmllint！它也很棒，但我更喜欢 xmlstarlet =) 试试看；)

# c++ - 标题中的c ++数组声明

> ID：322086
> 
> 赞同：12
> 
> 时间：2008-11-26T20:46:36.590
> 
> 标签：c++, arrays, dynamic, header

我想知道是否可以将数组（此时大小未知）声明为类的私有成员，然后在类的构造函数中设置大小。例如：

```
class Test {
int a[];
public:
Test(int size);
};

Test::Test(int size) {
a[size];   // this is wrong, but what can i do here?
} 
```

这是可能的还是我应该使用动态数组？谢谢！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2008-11-26T20:48:57.770

简短答案：否（数组的大小仅在编译时定义）
长答案：

您可以使用向量来实现相同的结果：

```
class Test
{
    std::vector<int> a;
    public:
        Test(std::size_t size):
            a(size)
        {}
}; 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2008-11-26T20:49:24.460

不，这是不可能的。标头中的数组声明必须具有恒定大小的值。否则，像“sizeof”这样的结构就不可能正常工作。您需要将数组声明为指针类型并在构造函数中使用 new[]。例子。

```
class Test { 
    int *a;
public:
    Test(int size) {
       a = new int[size];
    }
    ~Test() { delete [] a; }
private:
    Test(const Test& other);
    Test& operator=(const Test& other);
}; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-11-26T20:52:01.257

正如其他答案所指出的，数组的大小在编译时是固定的。但是，通过使用模板，您可以在编译时参数化大小：

```
template <int N> class Test {
    int a[N];
public:
    Test() { }
};

Test<5> test;
Test<40> biggertest; 
```

此技术不允许您在*运行*时计算大小（如动态`std::vector`解决方案所做的那样），但根据您的需要，这可能就足够了。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-11-26T20:48:55.787

首先，一般最好在构造函数的初始化列表中初始化东西，而不是在构造函数的主体中。

如果您在编译时知道该边界，则只能使用预定义的边界初始化数组。在这种情况下，您将需要动态分配空间。

你必须记住有一个析构函数，它会在对象被销毁时删除数组，否则你会发生内存泄漏。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-11-26T21:08:01.037

请参阅 Martin 的解决方案（使用`std::vector`），并记住，即使您需要将缓冲区传递给 C API `std::vector`，您也可以通过传递`&vec[0]`：

```
std::vector<char> vec(10);
memset(&vec[0], 0, vec.size()); 
```

它保证可以工作，但前提是向量不为空（C++ 怪癖，<sigh>）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-11-26T20:49:39.140

不，这是不可能的。您应该使用动态数组，例如`std::vector`. C99 允许结构仅将一个未调整大小的数组作为*最后一个*成员，但即使您这样做，您仍然必须自己手动分配内存，例如使用`malloc()`.

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-11-26T20:58:11.823

你说的这些是不可能的。类的大小始终不变。您可以让您的类使用指向动态分配的数组的指针，也可以使用 std::vector。

# recursion - 如何在自定义表达式求值器中检测循环逻辑或递归？

> ID：322089
> 
> 赞同：3
> 
> 时间：2008-11-26T20:46:47.977
> 
> 标签：recursion, evaluation

我编写了一个实验性的函数评估器，它允许我将简单的函数绑定在一起，这样当变量发生变化时，依赖于这些变量的所有函数（以及依赖于这些函数的函数等）都会同时更新。我这样做的方式不是在输入函数时立即评估函数，而是存储函数。仅当请求输出值时，我才评估函数，并且每次请求输出值时都对其进行评估。

例如：

```
pi = 3.14159
rad = 5
area = pi * rad * rad
perim = 2 * pi * rad 
```

我将“pi”和“rad”定义为变量（嗯，返回常量的函数），将“area”和“perim”定义为函数。每当“pi”或“rad”发生变化时，我都希望“area”和“perim”的结果会发生变化。同样，如果有任何函数依赖于“区域”或“周边”，那么它们的结果也会发生变化。

这一切都按预期工作。这里的问题是当用户引入递归时——无论是偶然的还是有意的。我的语法中没有逻辑——它只是一个评估器——所以我不能为用户提供一种“突破”递归的方法。我想完全阻止它发生，这意味着我需要一种方法来检测它并将有问题的输入声明为无效。

例如：

```
a = b
b = c
c = a 
```

现在评估最后一行会导致 StackOverflowException（而前两行评估为 '0' - 未声明的变量/函数等于 0）。我想做的是检测循环逻辑情况并禁止用户输入这样的语句。无论循环逻辑隐藏多深，我都想这样做，但我不知道如何去做。

顺便说一句，在幕后，输入字符串通过简单的扫描器转换为标记，然后通过手写递归下降解析器转换为抽象语法树，然后评估 AST。语言是 C#，但我不是在寻找代码解决方案 - 仅逻辑就可以了。

注意：这是我用来了解解析器和编译器如何工作的个人项目，因此它不是关键任务 - 但是我从中获得的知识我确实计划在某些时候投入到现实生活中。你们可以提供的任何帮助将不胜感激。=)

编辑：如果有人好奇，[我博客上的这篇文章](http://shadowcoding.blogspot.com/2008/11/recursive-descent-and-grander-ideas.html)描述了我为什么要学习这个，以及我从中得到了什么。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-11-26T20:51:00.603

过去我也遇到过类似的问题。我的解决方案是在通过表达式递归检查语法时将变量名推送到堆栈上，并在退出递归级别时弹出它们。

在我将每个变量名压入堆栈之前，我会检查它是否已经存在。如果是，那么这是一个循环引用。我什至能够在循环引用链中显示变量的名称（因为它们会在堆栈上，并且可以按顺序弹出，直到我到达有问题的名称）。

编辑：当然，这是针对单个公式的...对于您的问题，变量赋值的循环图将是更好的方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-11-26T20:51:56.577

一个解决方案（可能不是最好的）是创建一个依赖图。

每次添加或更改函数时，都会检查依赖关系图的循环。

这可以缩短。每次添加或更改功能时，都会对其进行标记。如果评估导致调用被标记的函数，则您有一个循环。

例子：

> `a = b`

*   标记一个
*   评估 b（未找到）
*   取消标记

> `b = c`

*   标志 b
*   评估 c（未找到）
*   取消标记 b

> `c = a`

*   标志 c
*   评估一个
*   评估 b
*   eval c（标记）-> 循环，放弃对 c 的更改！
*   取消标记 c

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-26T21:21:04.180

回复对答案二的评论：

（抱歉，刚刚搞砸了我的 openid 创建，所以我必须稍后将旧的东西链接起来......）

如果您将“flag”切换为“push”，将“unflag”切换为“pop”，这几乎是一样的 :) 使用堆栈的唯一优点是您可以轻松地提供有关循环的详细信息，无论什么深度。（对错误消息有用:)）

安德鲁

# java - 在Unix中编译和运行java（来自Windows）

> ID：322098
> 
> 赞同：4
> 
> 时间：2008-11-26T20:50:06.627
> 
> 标签：java, bash, unix, sh

好的，这适用于 Windows。我的 Java 应用程序正在正常运行

```
javac -classpath .;ojdbc14.jar -g foo.java
java  -classpath .;ojdbc14.jar  foo 
```

但是，当我在 Unix 上做同样的事情时，我得到了这个错误：ojdbc14.jar: not found

我究竟做错了什么？我知道“;” 告诉我的外壳 ojdbc14.jar 是一个新命令，但我不知道如何解决这个问题。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2008-11-26T20:50:51.277

使用冒号 (":") 而不是分号 (";")。

请参阅[设置类路径（Solaris 和 Linux）](http://java.sun.com/javase/6/docs/technotes/tools/solaris/classpath.html)与[设置类路径（Windows）](http://java.sun.com/javase/6/docs/technotes/tools/windows/classpath.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-11-26T22:57:21.333

最终的解决方案是：

```
javac -classpath .:ojdbc14.jar -g foo.java
java  -classpath .:ojdbc14.jar  foo 
```

注意：使用 '.;ojdbc14.jar' 删除了我收到的初始错误消息，但导致以下错误：

```
Exception in thread "main" java.lang.NoClassDefFoundError: foo 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-26T20:51:12.773

```
javac -classpath '.;ojdbc14.jar' -g foo.java
java  -classpath '.;ojdbc14.jar'  foo 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-12-01T02:59:25.747

使用 ant，或者甚至更好地将 ant 与像 Hudson 这样的持续构建环境和像 SVN 这样的 SCM 一起使用。

# java - Java中的向量，如何在一个对象中返回多个向量

> ID：322107
> 
> 赞同：0
> 
> 时间：2008-11-26T20:53:02.003
> 
> 标签：java, object, vector

我正在开发一个java程序，我在一个方法中定义和填充了几个向量（来自一个文件）。我需要从方法中返回所有向量的内容。我听说您可以将它们全部放在一个对象中以返回它们。这可能吗？如果可以，怎么做？如果没有，您对我有任何可能的解决方案吗？在此先感谢您的帮助！

这是一个代码片段：

```
Object getInventory()
{       
        Vector<String> itemID=new Vector<String>();
        Vector<String> itemName=new Vector<String>();
        Vector<Integer> pOrdered=new Vector<Integer>();
        Vector<Integer> pInStore=new Vector<Integer>();
        Vector<Integer> pSold=new Vector<Integer>();
        Vector<Double> manufPrice=new Vector<Double>();
        Vector<Double> sellingPrice=new Vector<Double>();  
        Object inventoryItem=new Object(); //object to store vectors in

    try
    {
        Scanner infile= new Scanner(new FileReader("Ch10Ex16Data.txt"));

        int i=0;

        while (infile.hasNext())
        {                
            itemID.addElement(infile.next());                
            itemName.addElement(infile.next()+infile.nextLine());
            pOrdered.addElement(infile.nextInt());
            pInStore.addElement(pOrdered.elementAt(i));
            pSold.addElement(0);
            manufPrice.addElement(infile.nextDouble());
            sellingPrice.addElement(infile.nextDouble());
            i++;

        }
        infile.close();

        System.out.println(itemID);
        System.out.println(itemName);
        System.out.println(pOrdered);
        System.out.println(pInStore);  
        System.out.println(pSold);
        System.out.println(manufPrice);
        System.out.println(sellingPrice);

    }
    catch (Exception f)
    {
       System.out.print(f);
    }

     return inventoryItem;
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2008-11-26T21:05:01.060

就个人而言，我会完全放弃这种方法。似乎您需要一个 Product 类：

```
public class Product {

    private String itemName;
    private int itemID;
    // etc etc

    public Product(String itemName, int itemID) {
       this.itemName = itemName;
       this.itemID = itemID;
       // etc etc
     }

    public String getItemName() {
       return itemName;
    }

     public int getItemID() {
      return itemID;
    } 

    // etc etc
} 
```

然后是这样的：

```
public class Invertory {

 private List<Product> products = new ArrayList<Product>
 // etc etc

public Inventory(String fileName) throws IOException {
      // Load file,
       // Read each product, 
       products.add(new Product(...product arguments); //add to array
  }

  public Product[] getProducts() {
      return products.toArray(new Product[]{});
  } 
```

}

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-11-26T21:03:21.080

首先，使用 ArrayList 而不是 Vector。然后使用 Map 作为您的返回对象，条目的每个值都是您的列表之一。

其次，更好的方法是创建一个实际保存每个字段的对象并返回这些对象的 java.util.List。

```
public class Item
{
    String id;
    String name
    Integer pOrdered;        
    Integer inStore;
           :
           : 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-11-26T21:08:34.593

你做错了几件事。

首先，不要使用 Vector。就像，永远。如果排序对您很重要，您需要 API 上的 List（可能还有 ArrayList 或 LinkedList 作为实现）。

其次，您试图让大量数组的值恰好排列在一起。这几乎是不可能使用的。只需创建一个代表一条记录的类，然后返回这些记录的列表。

第三：*不要抓住那个异常*。你不知道如何处理它，你只会让自己感到困惑。*仅当您非常*清楚在错误情况下该怎么做时才捕获异常（打印出没有堆栈的错误消息几乎永远不是正确的事情）。

方法的签名是最重要的部分。如果你做对了，那么实施就没有那么重要了。瞄准看起来像这样的东西：

```
List<Item> getInventory(File input) throws IOException {
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-11-26T21:06:15.113

你真的应该在这里重新考虑你的设计。你有多个向量，每个向量都具有相同类型事物的属性——你库存中的一个项目。你可能应该把它变成一个单一的类，也许是`InventoryItem`带有名称、价格等成员的类。然后，在读取每个项目时，你`InventoryItem`用给定的属性构造一个，并返回一个单一的`Vector<InventoryItem>`.

如果您真的很想跟踪所有这些单独`Vector`的 s，您可以只返回 a`Vector[]`以及您拥有的所有向量：

```
return new Vector[] { itemID, itemName, pOrdered, pInStore, pSold, manufPrice, sellingPrice }; 
```

此外，正如[Robin](https://stackoverflow.com/questions/322107/vectors-in-java-how-to-return-multiple-vectors-in-an-object#322150)所说，您应该使用`ArrayList`容器而不是`Vector`. 唯一会改变的是您需要将所有调用更改`someVector.AddElement`为`someList.add`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-11-26T21:06:29.513

听起来应该将其标记为“家庭作业”。

好的，首先，您是否需要使用所有这些向量，或者这是您自己的决定？尽管有些人可能会指出使用 ArrayLists 更好，但我会取消它们并创建您自己的 Item 类。

这样，不是让概念项目的属性分布在多个向量中（您现在正在做的方式），而是每个项目有 1 个项目实例，其中包含与该项目相关的所有数据的字段。现在，您只需要一个数据结构（Vector 或 ArrayList）用于所有项目对象，您可以从 getInventory() 返回该结构。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-11-26T21:15:33.957

声明对象的最简单方法是

```
List<Vector<? extends Object>> inventoryItem = new ArrayList<Vector<? extends Object>> 
```

但这有几个问题，即 Java 的泛型没有具体化，因此您必须测试并转换您返回的每个向量的内容。更好的解决方案是定义一个容器对象，将每个向量作为字段并添加到这些对象中。

然而，这看起来真的没有抓住重点。相反，您应该定义一个拥有七个字段中的每一个的 InventoryItem。每次从文件中读取对象时，实例化一个新的 InventoryItem 并填充其字段。然后，将其添加到单个 Vector。

此外，通常建议您不要使用 Vector 类。相反，您应该使用 ArrayList。仅当您需要其同步属性时才应真正使用 Vector，即使那样您也应考虑将其他列表包装在 Collections.synchronizedList() 中。

最后，您只想捕获异常的地方可以用一只手来计算。您确实应该捕获 IOException ，甚至您可能只想考虑重新抛出。此外，您应该对异常调用 printStackTrace() 而不是 System.out.println()。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-11-26T22:47:50.743

我发现一个好的经验法则是，在对象之外传递集合从来都不是一个好主意。它们在您的对象内部显然很有用，但在外部您会失去控制并且它们并不明显。

考虑使您的代码可读而不是记录它的原则。如果你收集一个集合，它如何告诉调用者传递什么？即使您使用泛型，也无法断言对集合发生的事情的控制——有人可能会在它传递给您后在另一个线程中添加和删除它。

没有理由不创建一个包含您的集合以及操作它们的业务逻辑的业务类（是的，总是有业务逻辑 - 它是您可以在访问集合的位置周围找到的复制和粘贴代码）。

我曾经发现 JDK 似乎总是采用内置类型而不是集合的数组令人沮丧，但在接受传递集合（如传递任何基本类型）只是不是一个好主意。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2008-11-26T21:15:38.247

虽然总的来说我非常同意使用 List/ArrayList 而不是 Vector 的建议，但了解原因很重要。事实上，我不得不强烈反对达斯汀说“永远”不要使用 Vector。

Vector 本质上是一个同步的 ArrayList。如果您确实需要同步，那么请忽略 Dustin 的警告，使用 Vector。

还有另一个例子，Vector 是有道理的。这就是您需要保持与 Java2 之前的代码库的兼容性的时候。

# shell - 调用 gdb 自动将参数传递给正在调试的程序

> ID：322110
> 
> 赞同：39
> 
> 时间：2008-11-26T20:54:52.733
> 
> 标签：shell, gdb

我想编写一个脚本，（在某些条件下）将执行 gdb 并使用一组参数 Y 自动运行一些程序 X。一旦程序完成执行，用户应该留在 gdb 的提示符下，直到他/她明确退出它.

一种方法是让脚本将运行命令和参数 Y 输出到某个文件 F，然后让脚本像这样调用 gdb：

```
gdb X < F 
```

但是有没有办法在不引入临时文件的情况下做到这一点？

* * *

## 回答 #1

> 赞同：87
> 
> 时间：2009-01-25T19:34:34.133

给定程序`X`和参数列表的最简单方法`a b c`：

```
X a b c 
```

就是使用`gdb`'`--args`选项，如下：

```
gdb --args X a b c 
```

* * *

`gdb --help`有这个要说的`--args`：

> > `--args Arguments after executable-file are passed to inferior`

这意味着之后的第一个参数`--args`是要调试的可执行文件，之后的所有参数都*按原样*传递给该可执行文件。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2008-11-26T20:59:55.703

如果你想通过 GDB 运行一些命令，然后让它退出或运行完成，只需执行

```
echo commands | gdb X 
```

如果您想在运行这些命令后将其留在命令提示符处，您可以执行

```
(echo commands; cat) | gdb X 
```

这导致将命令回显到 GDB，然后您键入该`cat`进程，该进程将其标准输入复制到标准输出，该标准输出通过管道传输到 GDB。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2010-04-27T00:39:08.117

有选项*-x*，例如

```
gdb -x gdb_commands exe_file 
```

其中*gdb_commands*可以是例如（在 android 模拟器的情况下）：

```
target remote :5039 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2015-05-14T16:39:55.173

在这里尝试了所有答案之后，

1.  echo/cat hack 虽然很聪明，但破坏了 gdb 的许多重要功能。最值得注意的是，所有用户提示都会自动回答（因此您没有机会确认潜在的危险操作），并且 Ctrl+C（停止您正在调试的进程）最终会杀死 cat，因此您实际上不能之后与 gdb 交谈。
2.  -x 选项应该可以工作，但我无法让它与我的 gdb 版本一起工作，并且它需要一个临时文件。

但是，事实证明您可以只使用 -ex，如下所示：

```
gdb -ex "target remote localhost:1234" 
```

您还可以多次指定 -ex 来运行多个命令！

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-07-14T02:21:59.520

```
gdb target -e "my-automation-commands" 
```

my-automation-commands 包含您通常想要运行的任何内容，

```
break 0x123
set args "foo" bar 2
r 
```

如果您有一些标准的初始化脚本，则严格来说不是临时文件；）

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2010-11-07T17:56:03.153

好吧，这只是一个评论，而不是真正的答案 - 只是想包含一些代码片段。我在`bash`/Ubuntu Lucid 上——对我来说，我遇到了与以下问题几乎相同的问题：“ [GDB 在将命令通过管道传输到 STDIN 时遇到问题 - Unix Linux 论坛 - Fixunix.com](http://fixunix.com/linux/6801-gdb-has-problems-getting-commands-piped-stdin.html) ”。

基本上，我想实现与以下代码段相同的效果：

```
$ gdb
GNU gdb (GDB) 7.1-ubuntu
Copyright (C) 2010 Free Software Foundation, Inc.
License GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.  Type "show copying"
and "show warranty" for details.
This GDB was configured as "i486-linux-gnu".
For bug reporting instructions, please see:
<http://www.gnu.org/software/gdb/bugs/>.
(gdb) pwd
Working directory /media/work/dir.
(gdb) 
```

...除了，我想以`pwd`某种方式“管道”命令，然后保持 gdb 打开（如上例所示）。

我在这里尝试了一些建议，唯一对我有用的是`(echo commands; cat) | gdb`语法 - 以及（有点工作）[Here Strings](http://tldp.org/LDP/abs/html/x17471.html) - 这是我的结果：

```
$ echo "pwd" | gdb
(gdb) Hangup detected on fd 0
error detected on stdin

$ echo "pwd" | gdb -x /dev/stdin
GNU gdb (GDB) 7.1-ubuntu
...
/dev/stdin: Invalid argument.
(gdb) Hangup detected on fd 0
error detected on stdin

$ gdb -x <(echo "pwd")
GNU gdb (GDB) 7.1-ubuntu
...
/dev/fd/63: No such file or directory.
(gdb) q

$ gdb -e "pwd"
GNU gdb (GDB) 7.1-ubuntu
...
For bug reporting instructions, please see:
<http://www.gnu.org/software/gdb/bugs/>.
(gdb) q   # nothing happens

$ gdb <<<"pwd"
GNU gdb (GDB) 7.1-ubuntu
...
(gdb) Working directory /media/work/dir.
(gdb) quit    # OK, but autoexits

$ gdb <<<"pwd
> "
GNU gdb (GDB) 7.1-ubuntu
...
(gdb) Working directory /media/work/dir.
(gdb) Working directory /media/work/dir.
(gdb) quit    # with a line break at end, it execs twice, then exits

# the only one OK for my needs - 
# except locks after quit, and needs Ctrl-C
$ (echo "pwd"; cat) | gdb 
GNU gdb (GDB) 7.1-ubuntu
...
(gdb) Working directory /media/work/dir.
(gdb) q
^C 
```

好吧，希望这对某人有所帮助，
干杯！

编辑：现在至少我知道为什么进程替换不起作用 - 它将使用一个临时文件描述符，它不能被识别为文件`ls`（*因此`gdb`肯定无法读取它；此外，引用几乎立即消失，除非进程以某种方式被阻止，与`cat`*) - 查看终端日志片段：

```
$ echo -e "***\n" <(echo "pwd") "\n***\n`cat <(ls -C /dev/fd ; echo; for ix in /dev/fd/*; do irl=$(readlink -f $ix); echo $ix -\> $irl; ls -la $ix 2>&1; ls -la $irl 2>&1; echo '______'; done ; ls -C /dev/fd )`"

***
 /dev/fd/63 
***
0  1  2  3  63

/dev/fd/0 -> /dev/pts/0
lrwx------ 1 user user 64 2010-11-07 21:18 /dev/fd/0 -> /dev/pts/0
crw--w---- 1 user tty 136, 0 2010-11-07 21:18 /dev/pts/0
______
/dev/fd/1 -> /proc/10713/fd/pipe:[236191]
l-wx------ 1 user user 64 2010-11-07 21:18 /dev/fd/1 -> pipe:[236151]
ls: cannot access /proc/10713/fd/pipe:[236191]: No such file or directory
______
/dev/fd/2 -> /dev/pts/0
l-wx------ 1 user user 64 2010-11-07 21:18 /dev/fd/2 -> pipe:[236151]
crw--w---- 1 user tty 136, 0 2010-11-07 21:18 /dev/pts/0
______
/dev/fd/255 -> /proc/10721/fd/255
ls: cannot access /dev/fd/255: No such file or directory
ls: cannot access /proc/10721/fd/255: No such file or directory
______
/dev/fd/3 -> /proc/10725/fd/3
ls: cannot access /dev/fd/3: No such file or directory
ls: cannot access /proc/10725/fd/3: No such file or directory
______
0  1  2  3 
```

此外，向上/向下键无法与 一起使用`(echo commands; cat) | gdb`，因为这就是 cat 的行为方式；如果我们只是运行`cat`，它将标准输入复制到标准输出，我们得到：

```
$ cat # or `cat -`: and start pressing up/down keys - and get:
^[[A^[[B^[[A^[[B^[[A^[[B^C 
```

您可以尝试使用 开启原始字符模式（*或关闭缓冲/熟化模式*）`stty -cooked`，然后`cat`将字符都写为`^[[A`，并移动光标 - 不幸的是，在这种模式下，Ctrl-C 不再起作用，所以您不能这样关闭`cat`...

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-05-31T09:02:13.463

使用 bash，您可以创建一个脚本，为您正在执行的任何可执行文件提供类似用户的输入：

```
#!/bin/sh
gdb X <<GDB_INPUT
pwd
run X a b c
quit
GDB_INPUT 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-11-26T20:56:20.720

`cat F | gdb X`应该是相同的。因此，您可以使用任何产生输出并将其通过管道传输到 gdb 的东西，而不是这里的 cat 命令。

我假设您是正确的并且 gdb 从标准输入读取。

# iphone - 如何为 iPhone OpenGL ES 渲染交互式地球/地球？

> ID：322111
> 
> 赞同：8
> 
> 时间：2008-11-26T20:54:59.800
> 
> 标签：iphone, opengl-es

我正在寻找一个可以呈现类似于[Smule](http://www.smule.com/)产品中的交互式地球的示例。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2011-06-07T20:51:53.023

有人刚刚向我指出了这个问题。我有一个！

它被称为 WhirlyGlobe，它是专门为此目的而构建的。在 ios 上运行，使用 Objective-C 和 C++ 的组合，并且对 Cocoa Touch 非常友好。使用代理进行相机运动，多线程，所有这些好东西。

哦，它在 Apache2 许可下免费提供。

详细信息可以在这里找到：http: [//mousebird.github.io/WhirlyGlobe/](http://mousebird.github.io/WhirlyGlobe/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2010-01-03T05:57:16.547

我不能提供任何样品，但 Dragon Forged Software 销售用于 iPhone 的预打包 OpenGL ES Globe。[http://dragonforged.com/consult.shtml](http://dragonforged.com/consult.shtml)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2011-03-21T17:45:08.730

[一家名为 Clever Coding 的公司在http://www.clevercoding.com/iPhone3Dglobe.php](http://www.clevercoding.com/iPhone3Dglobe.php)上提供了一个 3D 地球的 opengl 实现。

# web-services - 有没有一种简单的方法来提供基于 Matlab 的 Web 应用程序或 Web 服务？

> ID：322122
> 
> 赞同：12
> 
> 时间：2008-11-26T20:57:11.823
> 
> 标签：web-services, matlab, tomcat, matlab-deployment

我和一位同事花了几年时间开发了一个非常酷的 Matlab 应用程序，MDLcompress。在 Matlab 中，我可以键入“MDLcompress('filename.txt')”，它会告诉我关于 filename.txt 内容的各种非常酷的东西。我们希望允许其他人在不下载代码、安装 Matlab 等的情况下使用 MDLcompress。理想情况下，我们会有一个简单的网页，他们从他们的机器中选择一个文件，然后上传到我的工作站（已经为其他目的运行 tomcat，如果这会让事情变得更容易的话），开始一个进程，沿着“matlab < MDLcompress.m filename.txt > results.txt”的行，然后在他们的浏览器中显示 results.txt 或显示一个链接让他们下载它。

麻烦的是，我的 Matlab 技能远远超过了我的网络技能。谷歌有 100 个通用教程，但没有我想要的那么简单，至少不是特定于 Matlab。

提前致谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-11-27T00:42:06.550

如果您最精通 MATLAB，您可以使用[MATLAB Web Server在 MATLAB 中编写 Web 应用程序](http://www.mathworks.co.uk/access/helpdesk_r13/help/toolbox/webserver/ch01intr.html) **编辑：** Matlab Web Server 已停产，因此如果您使用最新版本的 Matlab，则不适合您。可能[本教程](http://www.mathworks.com/support/solutions/data/1-30REEY.shtml)将有助于从 Matlab 代码创建 CGI 模块。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-11-26T21:03:48.333

一种可能的方法是[将matlab代码编译](http://pages.stern.nyu.edu/~nwhite/scrc/CompilingMatlab.htm)成C，然后[将C文件制作成apache模块](http://apache-modules.com/)，并使用apache服务器。我不知道这有多复杂，但它可能会起作用。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-12-15T17:37:21.240

根据这些标签，我假设您正在尝试部署到 Tomcat 或类似设备。最直接的方法是使用[MATLAB Builder JA](http://www.mathworks.com/products/javabuilder/)为您的代码创建 Java 包装器，然后使用标准工具将 Java 部署为 Web 服务。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-07-04T22:55:18.083

如果您可以承受失去一些 Matlab 更强大的专有特性，那么有几个开源数值计算引擎使用的语法大多与 Matlab 的语法兼容。其中最成熟的之一是[GNU Octave](http://www.gnu.org/software/octave/)。

有几个在线 Octave 接口的例子。 [Octave Online](http://octave-online.net/)是一个支持实时提示和在线编辑器的新界面。我是开发 Octave Online 团队的一员。[您可以在 Octave wiki](http://wiki.octave.org/FAQ#GUI)上找到更多在线 Octave 接口示例。 [Octave 邮件列表](http://octave.1599824.n4.nabble.com)是以前在线 Octave 项目的一个很好的资源。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-11-15T12:07:38.873

我们开发了一个名为[Modelit Webserver Toolbox](http://www.modelit.nl/index.php/matlab-products/modelit-matlab-webserver-toolbox)的工具箱，它应该允许您执行此操作。我们自己使用它来运行在 Matlab 中实现的路由算法，用于在线路线规划器（链接在我们的网站上）。您可以将该工具箱与 Tomcat 和 Matlab（2006b 及更高版本）或已编译的 Matlab 可执行文件结合使用。该工具箱还提供了一种并行运行多个作业的机制。

# c++ - C++ STL 向量迭代器访问对象的成员

> ID：322128
> 
> 赞同：12
> 
> 时间：2008-11-26T20:58:26.080
> 
> 标签：c++

我想我已经正确地声明了一个带有对象的向量。但是，我不知道在使用迭代器循环时如何访问它的成员。

在我的代码中， --->> cout << " " << *Iter;

如何打印成员的内容？像 *Iter.m_PackLine ???

不确定我是否使用了正确的术语，但感谢您的帮助！谢谢

```
class CFileInfo
{
  public:
      std::string m_PackLine;
      std::string m_FileDateTime;
      int m_NumDownloads;
};

void main()
{
  CFileInfo packInfo;

  vector<CFileInfo, CFileInfo&> unsortedFiles;
  vector<CFileInfo, CFileInfo&>::iterator Iter;

  packInfo.m_PackLine = "Sample Line 1";
  packInfo.m_FileDateTime = "06/22/2008 04:34";
  packInfo.m_NumDownloads = 0;
  unsortedFiles.push_back(packInfo);

  packInfo.m_PackLine = "Sample Line 2";
  packInfo.m_FileDateTime = "12/05/2007 14:54";
  packInfo.m_NumDownloads = 1;
  unsortedFiles.push_back(packInfo);

 for (Iter = unsortedFiles.begin(); Iter != unsortedFiles.end(); Iter++ )
 {
    cout << " " << *Iter; // !!! THIS IS WHERE I GET STUMPED
    // How do I output values of the object members? 
 }
}  // end main 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2008-11-26T21:03:46.773

```
cout << " " << *Iter; 
```

只有当有一个可以输出你的结构`CFileInfo`的重载时才会起作用。`operator<<`您可以像这样输出结构的各个成员：

```
cout << " " << Iter->m_PackLine; 
```

或者，以下等价于：

```
cout << " " << (*Iter).m_PackLine; 
```

您必须在 *Iter 周围加上括号，否则成员访问运算符会绑定 tallter。

在侧节点上，让您的主函数返回 int 而不是 void。使其返回 void 在 C++ 中无效。

* * *

你像这样声明向量：

```
vector<CFileInfo, CFileInfo&> unsortedFiles; 
```

第二个论点`vector`应该是另一回事。您的代码根本不需要为向量提供第二个参数。只需使用这个：

```
vector<CFileInfo> unsortedFiles; 
```

* * *

我注意到的另一件事是您使用`Iter++`（称为`postfix increment`）增加迭代器。对于迭代器，总是更喜欢`++Iter`，称为`prefix increment`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-11-26T21:02:20.877

使用 (*iter).member 或 iter->member。

您还可以使用临时对象：

```
CFileInfo &fileInfo = *iter;
cout << " " << fileInfo.myMember; 
```

此外，对于您正在做的事情，您可能需要一个 const_iterator 而不是（可变）迭代器。

此外，std::vector 是一个接受类型名和分配器的模板，而不是两个类型名。您可以通过剥离第二个模板参数来使用默认分配器：

```
vector<CFileInfo> unsortedFiles;
vector<CFileInfo>::iterator Iter; 
```

* * *

一些吹毛求疵：

*   main 应该返回一个 int。
*   最好在 for 语句中声明您的迭代器变量。
*   在 for 循环中使用前缀 ++ 运算符 (++iter) 而不是后缀运算符 (iter++) 可能会更快地提高运行时性能。
*   无需您对 main() 结尾发表评论。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-11-26T21:01:21.863

这是我注意到的第一个问题：

`std::vector`是一个模板。

你有：

```
vector unsortedFiles; 
```

你需要类似的东西：

```
vector<CFileInfo> unsortedFiles; 
```

现在我想起来了，你的模板定义可能刚刚被 stackoverflow 评论系统解析出来。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-11-26T21:02:33.577

首先更正你的向量声明：

```
vector<CFileInfo > unsortedFiles; 
```

接下来，您需要为您的类定义一个输出运算符：

```
std::ostream& operator<<(std::ostream& str,CFileInfo const& data)
{
       // Do something here
       /* Potentailly you could do this
        *    But this requires that this function be a friend of the class

       str << data.m_PackLine << ":"
           << data.m_FileDateTime << ":"
           << data.m_NumDownloads << ":";

       *  Or you could do this

           data.print(str);  // Make print a public const method.

       */

       return str;
} 
```

通常你要么让输出操作符成为你的类的朋友，要么提供一个接受流的公共打印方法。无论哪种方式，您都可以访问成员并将它们手动流式传输到输出。

一旦定义了输出迭代器，就可以更改循环以使用标准库版本：

```
std::for_each(unsortedFiles.begin()
              unsortedFiles.end()
              std::ostream_iterator<CFileInfo>(std::cout," ")
             ); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-11-26T21:02:48.007

```
iter->m_PackLine 
```

或者

```
(*iter).m_PackLine 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-11-26T21:14:58.200

谢谢大家，希望我能给答案加分:)

litb 还指出了我在声明向量时遇到的问题。我删除了向量声明中的第二个参数，它起作用了。

Stackoverflow 解析出了我的一些代码，下次发帖会更加小心。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-11-26T21:53:27.607

`vector<CFileInfo, CFileInfo&`> 根本不起作用。vector 的第二个参数是 vector 使用的分配器，`CFileInfo`不满足这些要求，任何引用类型也不满足。我想你只是想要`vector<CFileInfo>`，迭代器和成员会`CFileInfo&`自动返回。

# visual-studio-2008 - 是否有 ReSharper 模板来生成基本方法？

> ID：322131
> 
> 赞同：7
> 
> 时间：2008-11-26T20:58:58.093
> 
> 标签：visual-studio-2008, resharper

我是 ReSharper 的新手，很惊讶没有为

```
public void MethodName(<params>)
{

} 
```

我意识到我可以创建一个，但我原以为这会成为标准产品的一部分。也许我错过了其他一些捷径？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2008-11-26T21:13:41.993

我不知道有任何这样的默认模板，但正如您指出的那样，它非常容易编写：

```
public void $METHODNAME$($PARAMS$)
{
    $END$
} 
```

但是，我有点困惑，您是否有兴趣将所有方法都设为**默认公开和无效。**

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-11-26T21:29:01.840

我最终得到：

```
private $RETURN_TYPE$ $METHODNAME$($PARAMS$)
{
    $END$
} 
```

我将它与单个字母“m”联系起来。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-31T08:53:40.403

我的版本：

```
//-----------------------------------------------------------------
private $RETURN_TYPE$ $METHODNAME$($PARAMS$)
{
    $CLIPBOARD$
    $END$
} 
```

注意：在模板编辑器中，您可以为每个`$FIELD$`. 例如：“剪贴板内容”宏用于`$CLIPBOARD$`.

# maven-2 - 你如何编辑 Maven pom 文件？

> ID：322144
> 
> 赞同：9
> 
> 时间：2008-11-26T21:02:17.947
> 
> 标签：maven-2, pom.xml

我最近开始探索 Maven，但我对所有 pom 文件中的所有 xml 配置感到有点不知所措。有什么好工具我可以使用吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2008-11-26T21:08:32.440

[m2eclipse](http://m2eclipse.codehaus.org/)，它提供了一个非常好的基于表单的编辑器。但我大部分时间只使用 XML 视图。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-12-09T18:54:28.103

这个技巧适用于任何好的 XML 编辑器。

到目前为止，您可以获得的最佳指南是 XML 模式（“XSD”文件），它定义了所有结构及其作用。

在您的 POM 顶部，确保“项目”元素的定义如下：

```
<project
  xmlns="http://maven.apache.org/POM/4.0.0"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd"> 
```

现在，当您在任何好的编辑器（包括 jEdit 或 Eclipse）中编辑文件时，编辑器实际上会从上面的 URL 下载 .xsd 文件，并使用它来指导您并验证 POM。

例如，在 Eclipse 中，转到 POM 中的某个位置并按 Ctrl-Space - 它会显示当前位置的有效元素列表。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-11-26T21:07:17.747

当我编辑任何 XML 文件时，我使用带有[xmledit](http://www.vim.org/scripts/script.php?script_id=301)插件的[vim 。](http://www.vim.org/)

另一个用于 XML 编辑的好工具是[XMLmind XML 编辑器](http://www.xmlmind.com/xmleditor/)。它可以免费用于非商业用途。它支持使用 W3C XML Schema（和其他模式格式）验证 XML，因此您可以确保生成[有效的 POM 格式](http://maven.apache.org/maven-v4_0_0.xsd)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-11-26T21:36:21.403

你会习惯的。如果您愿意，Maven 配置文件可以非常短。你只需要在 pom.xml 中有一些东西来覆盖默认值。

如果您坚持使用默认的 Maven 目录结构，则根本不需要长的 Maven。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-11-26T22:32:08.717

如果你被 Maven 卡住了，那么你只需要阅读他们的文档，谷歌疯狂地搜索没有记录的内容，然后进行实验。显然，任何能够处理 XML 的编辑器都是合适的，并且您的偏好应该主导选择。

另一方面，如果您不喜欢 Maven，那么我强烈建议您跳槽。我使用 Maven 以及许多其他构建工具已经好几年了，而 Maven 是最糟糕的：它太复杂了，太迟钝了，很难定制或扩展，而且速度很慢。所以，切换到别的东西。

我推荐 Ant+Ivy 或基于 Python 的解决方案。

* * *

## 回答 #6

> 赞同：-4
> 
> 时间：2008-11-26T21:13:30.933

我不。我使用[buildr](http://incubator.apache.org/buildr/)，它具有更紧凑的基于 ruby​​ 的语法来描述您的项目。

# c++ - QAbstractTableModel继承vtable问题

> ID：322147
> 
> 赞同：0
> 
> 时间：2008-11-26T21:02:39.207
> 
> 标签：c++, qt, inheritance, cmake, vtable

这是 qt 的另一个问题：我扩展了 QAbstractTableModel，但出现编译错误（我正在使用 cmake）

```
// file.h
#ifndef TABLEMODEL_H
#define TABLEMODEL_H

#include <QAbstractTableModel>

class TableModel : public QAbstractTableModel
{
Q_OBJECT

public:
TableModel(QObject *parent = 0);
int rowCount(const QModelIndex &parent = QModelIndex()) const;
int columnCount(const QModelIndex &parent = QModelIndex()) const;
};
#endif

// file.c
#include "tableModel.h"

TableModel::TableModel(QObject *parent)
: QAbstractTableModel(parent){}
int TableModel::rowCount(const QModelIndex & ) const
{ return 1; }

int TableModel::columnCount(const QModelIndex & ) const
{ return 1;} 
```

当我编译时，我得到：

在`TableModel': /partd/unusedsvn/unusedpkg/iface/tableModel.cpp:4: undefined reference to`TableModel' /partd/unusedsvn/unusedpkg/iface/tableModel.cpp:4 的函数 vtable 中：未定义引用`vtable for TableModel' collect2: ld returned 1 exit status`

有人遇到同样的问题吗？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-11-26T21:17:30.160

确保您正在通过 MOC 运行您的标头，并且正在链接那些 MOC 目标文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-02T12:31:25.840

解决了将所需的 cpp 文件添加到 CMakeLists.txt 的问题。

```
set(tutorial_SRCS app.cpp mainWin.cpp tableModel.cpp) 
```

当我运行 cmake 时，将自动创建 moc*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-03T19:01:38.377

几乎 100% 的 vtable 错误是由缺少标头/类定义或这些定义中的拼写错误引起的，因此首先要做的是确保标头和源代码正确（并包含在项目中）。我个人为此诅咒Qt到最低的地狱，并错过了项目文件中的那个小错字，不好玩:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2010-06-18T20:41:44.583

是的，vtable 错误是个婊子。
你必须实现 code() 方法，它也是一个纯虚方法。

从[QAbstractTableModel 文档](http://doc.qt.io/archives/4.6/qabstracttablemodel.html)：

> **子类**
> 化 子类化 QAbstractTableModel 时，您必须实现 rowCount()、columnCount()**和 data()**。

我也有一个 vtable 问题，我实现了 data()，所以我错过了其他虚拟废话，但我不知道是哪一个。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2008-12-11T02:43:34.460

[当一个对象没有被 moc'ed](http://doc.qt.io/archives/4.6/debug.html#common-bugs)时，这是一个相当常见的错误。我会阅读整个[调试文档](http://doc.qt.io/archives/4.6/debug.html)以节省一些时间。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2018-05-14T17:27:57.047

为了解决这个问题，我从 TableModel 中删除了 Q_OBJECT，创建了新的类 TableModelController，它从 QObject 派生并且里面有 TableModel

```
class TableModel : public QAbstractTableModel
{
public:
    TableModel(QObject *parent = 0);
    // Some overrided functions
    int rowCount(const QModelIndex &parent = QModelIndex()) const override;
    int columnCount(const QModelIndex &parent = QModelIndex()) const override;
    QVariant data(const QModelIndex &index, int role = Qt::DisplayRole) const override;
};

class TableModelController : public QObject
{
Q_OBJECT
public:
    explicit TableModelController(QObject *parent = nullptr);
    TableModelController(TableModel *m, QObject *parent = nullptr);

    TableModel *getModel() {
        return model;
    }

public slots:
    void addRow();
    void deleteRows();
private:
    TableModel *model;
}; 
```

然后我使用 TableModelController 访问 TableModel throw get Methond 和公共插槽。我正在使用 QtCreator

# java - web.xml 的虚假 Eclipse 警告：“未检测到文档的语法约束（DTD 或 XML 模式）。”

> ID：322155
> 
> 赞同：34
> 
> 时间：2008-11-26T21:04:12.170
> 
> 标签：java, eclipse, xsd, warnings

我的文件顶部`web.xml`如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns="http://java.sun.com/xml/ns/j2ee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/web-app_2_5.xsd"
    version="2.5"> 
```

但是我仍然收到来自 Eclipse (Ganymede) 的警告，即没有检测到 XML 模式，并且没有警告模式违规。我的项目中的其他 XML 文件（例如[Spring Framework](http://en.wikipedia.org/wiki/Spring_Framework)配置文件）没有警告，并且确实给出了有关架构违规的正确警告。

如何使架构检查正常工作并希望警告消失？服务器运行正常。它似乎只是一个IDE问题。

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2010-02-24T11:05:51.410

我也讨厌这个警告。特别是因为它出现在您尚未编写的 XML 文件中，但出于某种原因出现在您的项目中（如果您使用 MAVEN，那就太糟糕了）。

使用 Eclipse 3.5+，您可以轻松删除此验证规则。转到首选项--> XML--> XML 文件--> 验证并选择“忽略”。

您可能还需要执行 Project -> Clean 才能使验证警告消失。

![替代文字](https://i44.photobucket.com/albums/f25/ulon/ignorewarning.png?t=1267009514)

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2008-11-26T21:13:39.077

也许尝试：

```
http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd 
```

代替：

```
http://java.sun.com/xml/ns/j2ee/web-app_2_5.xsd 
```

* * *

此外，`<!DOCTYPE ...>`缺少：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE xml>
<web-app
  xmlns="http://java.sun.com/xml/ns/j2ee" 
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
  xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
  version="2.5">
  <!-- ... -->
</web-app> 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2011-09-17T03:53:39.367

清除已存储验证文件的缓存。

Window > Preferences > General > Network Connections > Cache 然后全部删除。现在去验证文件，看看是否可以解决问题。

这发生在我身上，清除缓存以进行验证是让它再次正常运行的唯一方法。[在这里](http://www.eclipse.org/forums/index.php/m/697230/)找到了清除脏缓存的建议。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-02T01:21:53.993

如果由于您的 XML 编辑器没有找到 XSD 文件而出现相同的（误导性的）错误消息，您可以添加一个目录条目。

您选择为架构指定的 URL，用于声明，例如

```
xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee 
                      http://java.sun.com/xml/ns/j2ee/web-app_2_5.xsd" 
```

[为命名空间http://java.sun.com/xml/ns/j2ee](http://java.sun.com/xml/ns/j2ee)指定架构文件的 URL (http://java.sun.com/xml/ns/j2ee/web-app_2_5.xsd) 。您现在可以使用 Eclipse 中的工作区目录重定向文件的位置：

```
Preferences -> XML -> XML Catalog -> Add.. 
```

采用

```
Key Type = Schema Location
Key = http://java.sun.com/xml/ns/j2ee/web-app_2_5.xsd 
```

然后您可以使用文件选择器在文件系统或工作区中实际选择 XSD 文件。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-29T12:59:11.573

问题有两个方面：

1.  Eclipse 附带了许多著名的 XSD 的缓存。您提供的名称空间和/或位置与其中任何一个都不匹配。
2.  因此 Eclipse 尝试在 Internet 上通过提供的 URI 寻找 XSD（可能正常工作）。不幸的是，在 Oracle 修改 java.sun.com 之后，这种机制似乎在 Eclipse 中超时（显然服务器重定向到主页，而不是简单地说“不存在，抱歉”）。

当您修改为 Java EE 5 的正确值时，将找到缓存中的条目，并且 Eclipse 会很高兴。

* * *

## 回答 #6

> 赞同：-5
> 
> 时间：2009-10-22T18:04:15.647

将此添加`<!DOCTYPE ...>`到您的 xml 文件中。请放在下面`<?xml ...>`：

```
<!DOCTYPE ??? PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
```

`???`= 您的根元素，现在如果您的子元素名称使用 html 保留字，您可能会遇到一些错误，您所要做的就是将它们更改为非保留字。

例如：
如果您当前的子元素是`<img>`，请将其更改为`<pic>`...

# perl - 为什么这个 Perl BEGIN 块在调试器中的行为不同？

> ID：322173
> 
> 赞同：12
> 
> 时间：2008-11-26T21:08:42.817
> 
> 标签：perl, debugging, compilation

我有一些在调试器之外运行良好的 Perl 代码：

```
% perl somefile.pl 
```

但是当我在调试器中运行它时：

```
% perl -d somefile.pl 
```

它的行为不同。

有问题的文件（有几个）是大型 Perl 模块（约 20K 行代码）的测试套件的一部分。测试在编译时做了很多设置工作并使用 BEGIN 块。这是一些最小的复制代码：

```
BEGIN
{
  package MyEx;

  sub new { bless {}, shift }

  package main;

  eval { die MyEx->new };

  if($@)
  {
    die "Really die"  unless($@->isa('MyEx'));
  }
}

print "OK\n"; 
```

如果你把它放进去`somefile.pl`并运行它，它会按预期打印“OK”。如果您在调试器中使用 运行它`perl -d somefile.pl`，它会因以下错误而死：

```
Can't call method "isa" without a package or object reference ... 
```

结果是`$@`当代码在调试器下运行时它不是对象。相反，它是一个包含此字符串的无福标量：

```
" at somefile.pl line 9
    eval {...} called at somefile.pl line 9
    main::BEGIN() called at somefile.pl line 16
    eval {...} called at somefile.pl line 16
" 
```

（保留内部换行符和间距。这是文字，甚至是“...”。）

我需要这样的代码才能在调试器中运行。在测试套件中使用调试器是我工作流程的重要组成部分。该模块使用异常对象并在编译时做了很多事情，并期望抛出的对象在被捕获时成为对象。

我的问题（最后）是这样的：我怎样才能让它工作？有解决方法吗？这是 perl 调试器模块中的错误吗？解决此问题的最佳方法是什么？（我知道这是几个问题，但它们都是相关的。）

我在 Mac OS X 10.5.5 上使用 perl 5.10.0。

* * *

Adam Bellaire 建议的 dieLevel 看起来很有希望，而且确实有些东西（无法找出是什么）对我来说将它设置为 1。但是我使用`~/.perldb`文件将其设置为 0 并且问题仍然存在。事实上，我将所有三个相关设置都设置为 0。我的`~/.perldb`文件：

```
parse_options('dieLevel=0 warnLevel=0 signalLevel=0'); 
```

`o`我通过在调试器中运行命令确认设置生效。当我运行`perl -de 0`时以及运行实际`somefile.pl`文件时，我看到它们都设置为 0。

* * *

谢谢，布赖恩。我曾经`perlbug`提交过一个错误 ( [RT 60890](http://rt.perl.org/rt3/Ticket/Display.html?id=60890) )，并且我已经开始`local $SIG{'__DIE__'}`在我的代码中的所有适当位置进行添加。（我还在错误中注意到`perldoc perldebug`似乎仍然暗示默认`dieLevel`值为 0。）

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2008-11-27T13:36:15.177

这是 perl5db.pl 创建`__DIE__`处理程序的问题。`$SIG{__DIE__}`如果我在你的本地化`eval`，事情会如你所愿。

```
评估{
    本地 $SIG{__DIE__};
    死MyEx->新
    };

```

如果您不这样做，您将从 DB::dbdie 获取处理程序，该处理程序使用 Carp::longmess。如果 dieLevel 为 0，则不应该发生这种情况，但默认情况下为 1，如果未定义，则将其设置为 1。这是 2001 年对 perl5db.pl 的补丁，之前默认值为 0。

您应该通过以下方式关闭此功能：

```
PERLDB_OPT="dieLevel=0" perl5.10.0 -d program 
```

但是在那之后还有一个代码引用`$SIG{__DIE__}`，它是对dbdie的引用。我认为这是处理`$prevdie`perl5db.pl 中的全局变量的错误`dieLevel`。在该子程序的末尾，有：

```
# perl5db.pl dieLevel，在第 7777 行附近
       elsif ($prevdie) {
            $SIG{__DIE__} = $prevdie;
            print $OUT "默认模具处理程序已恢复。\n";
        }

```

但请注意，在 restore 之后`$SIG{__DIE__}`，它将先前的值保留在 中`$prevdie`，这意味着其中的任何内容都会泄漏给另一个调用。当我运行该命令行时，在 dieLevel 处理之前有两次调用`PERLDB_OPT`，所以`$prevdie`可能很脏。

所以，在我不想再考虑 perl5db.pl 之前，这就是我所得到的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-11-26T23:01:19.173

每当代码在调试器中表现不同时，我都认为这是一个错误。

您的问题*可能*与此有关：[调试器损坏符号表 munging](http://rt.perl.org/rt3/Public/Bug/Display.html?id=48332)。从本质上讲，调试器似乎在玩一些技巧`local`——大概是作为沙盒的一部分以提供交互性。显然，弄乱符号表可能会产生意想不到的副作用。我猜调试器正在本地化`$@`并因此模糊了您的对象。我想不出解决办法。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-11-26T21:25:06.137

您是否可能有一个 RC 文件或环境变量 ( `PERLDB_OPTS`) 正在修改`dieLevel`调试器的选项？我个人没有使用过`dieLevel`，但显然当它设置为大于零的值时，它会强制堆栈展开，并且“倾向于无可救药地破坏任何认真对待其异常处理的程序”。（[从这里引用](http://www.xav.com/perl/lib/Pod/perldebug.html)）。

# javascript - Silverlight 是否比 JavaScript 具有性能优势？

> ID：322183
> 
> 赞同：14
> 
> 时间：2008-11-26T21:12:57.847
> 
> 标签：javascript, silverlight, performance

在最近一次关于 Silverlight 的讨论中，提到了速度的优势。Silverlight 的论点是它在浏览器中的性能比 Javascript 更好，因为它是编译（和托管）代码。

然后有人指出，这种优势仅适用于 IE，因为 IE 解释 Javascript 与其他浏览器（例如 Chrome 和 FireFox）相比效率低下，后者在执行之前将 Javascript 编译为机器代码，因此性能与 Silverlight 一样好。

有没有人对这个性能问题有明确的答案。即 Silverlight 和 Javascript 在 Chrome 和 Firefox 上是否/将具有可比性能？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2008-11-30T20:42:10.890

猜测很有趣。或者我们实际上可以尝试一两个测试...

[Silverlight 与 Javascript 国际象棋示例](http://silverlight.net/samples/sl2/silverlightchess/run/Default.html)已针对 Silverlight 2 进行了更新。当我运行它时，C# 平均每秒 420,000 个节点，而 Javascript 平均每秒 23,000 个节点。我正在运行 Google Chrome 的开发分支（v. 0.4.154.25）。这仍然是 Silverlight 的 18 倍速度优势。

素数计算显示 Silverlight 的 3 倍优势：在[Javascript](http://www.tobinharris.com/primes.html)中计算 1,000,000 个素数需要 3.7 秒，在[Silverlight](http://www.itwriting.com/primetest/index.html)中需要 1.2 秒。

所以我认为从计算上来说，Silverlight 仍然有相当强的优势，我的直觉是它很可能会保持这种状态。双方都将继续优化，但在动态语言中可以优化的内容存在一些限制。

Silverlight 在动画方面（还）没有优势。例如，[Bubblemark](http://www.bubblemark.com/)测试显示 Javascript 以 170 fps 运行，Silverlight 以 100 fps 运行。我认为当 Silverlight 3 推出时，我们可以期待看到这种变化[，因为它将包括 GPU 支持](http://weblogs.asp.net/scottgu/archive/2008/11/16/update-on-silverlight-2-and-a-glimpse-of-silverlight-3.aspx)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-11-26T21:15:36.700

大多数浏览器在虚拟机中运行 Javascript。然而，Javascript 仍然是一种时髦的语言，即使是像 V8 这样的“快速”虚拟机，按照现代标准来看也非常慢。

我希望 CLR 更快。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-11-26T21:40:37.743

我不明白您为什么要尝试将脚本语言与浏览器插件进行比较。他们不做同样的事情。前者与 DOM 交互，而后者在浏览器中运行多媒体应用程序。

从性能的角度比较 Flash 和 Silverlight 对我来说似乎更有用。

**编辑：**经过一些研究，我发现您可以在 Silverlight 中与 DOM 进行交互。我不认为它可以被视为一个好的 Javascript 替代品，除了性能问题，除非您需要一些繁重的客户端交互。我看到两个主要缺点：

1) 您将强制您的用户下载 Silverlight 应用程序，而不是依赖相对较小的 .js 文件。

2) 您的用户需要在使用您的页面之前安装 Silverlight。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-11-26T22:35:47.867

我会说，在建筑上，它是一种洗涤。

一方面，Silverlight 是 MSIL 代码，与原始的、优化的本机代码相比，它的速度相当快，但由于 VM (CLR) 开销，它的运行速度仍然较慢，并且在 ngen'd 时初始加载时间仍然很慢。

另一方面，由于 Javascript 引擎在性能上有一个数量级或更多范围的巨大变化，Javascript 的速度不太可靠。你有像 IE 这样的慢解释器，尽管 IE8 正在加快速度，然后你有像 SpiderMonkey 和 V8 这样更快的编译器/解释器，它们最近才开始探索 Javascript 的性能限制。在研发阶段还有一些新技术，比如 TraceMonkey，它们具有极大地提高 Javascript 性能（接近原生代码速度）的巨大潜力。Javascript 确实具有单线程的固有缺点，但考虑到编写好的线程代码的难度，很难说这有多大的不同。

归根结底，当比较苹果和苹果时，真正的性能瓶颈是 DOM，在那里使用什么技术来操作它并不重要。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-02-15T03:27:31.967

根据我所做的粗略测试，Silverlight 运行得更快。[这是我从http://bubblemark.com/](http://bubblemark.com/)收集的一些有趣的结果

[![浏览器和 Javascript 与 Silverlight 的气泡标记比较](https://i.stack.imgur.com/7Gpmh.jpg)](https://i.stack.imgur.com/7Gpmh.jpg)

一般来说，Silverlight 快得多，但 Chrome 的 javascript 实现将其他所有人撕成碎片！

请记住，这仅适用于一台机器、一个操作系统（XP）等。您需要进行更广泛的测试才能实现更多目标。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-11-26T22:23:15.613

我会说是的，因为它有 .NET 的 CLR。那时，随着谷歌 Chrome 和尚未完全发布的 Firefox 3.1 中 JavaScript 的最新发展，人们可能想要自己做一些基准测试；我还不知道有什么比较。（任何人？）

尽管如此，在我看来，.NET 通常应该比 Javascript 更快，并且正如之前所指出的，这不会加快网络速度。因此对于复杂的算法，SilverLight 会更快，但对于网络请求，您可能没有任何明显的差异。

关于性能问题，您可能想看看 Flash 10，它可以允许使用“Alchemy”的 c/c++ 代码。这可能是比 SilverLight 更便携的解决方案。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2010-02-19T10:36:43.257

看起来 Chrome 的 javascript 实现比 Silverlight 快

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2011-01-27T09:09:38.313

这里应该考虑平台。Silverlight 在 Lnux 或 Solaris 或 Mac 中的性能如何确实是个大问题！

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2011-01-27T09:14:01.707

HTML5 如何。我认为在比较 javascript HTMl 的性能时起着重要作用。所以我们绝对应该比较使用 HTML5 + javascript 和 Silverlight 的性能。

* * *

## 回答 #10

> 赞同：-3
> 
> 时间：2008-11-26T22:22:53.260

Sre，如果您使用的是“Internet Exploder”，它可能会...

如果您使用的是 V8 (Chrome) 或即将推出的 Safari 和 FireFox，我对此表示严重怀疑；)

我很想看到 IE 使用 Silverlight 播放而 Chrome 使用 Javascript 的 Chess thn BTW。那会震撼微软……！！;)

# asp.net - ASP.NET 3.5 绑定到 XML 字符串

> ID：322190
> 
> 赞同：2
> 
> 时间：2008-11-26T21:15:29.777
> 
> 标签：asp.net, xml, string, binding

使用 ASP.NET 3.5，我可以通过使用`XmlDataSource`.

如何绑定到 XML*字符串*而不是*文件*？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-11-26T21:27:06.757

使用[XmlDataSource.Data](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.xmldatasource.data.aspx)属性。

```
XmlDataSource dataSource    = new XmlDataSource();
dataSource.Data             = "<root><element>Item #1</element><element>Item #2</element></root>";
dataSource.XPath            = "root/element";
dataSource.DataBind(); 
```

或者，您可以以声明方式指定数据：

```
<asp:xmldatasource 
  id="XmlDataSource1" 
  runat="server" 
>
  <data>
    <Books>
      <LanguageBooks>
        <Book Title="Pure JavaScript" Author="Wyke, Gilliam, and Ting"/>
        <Book Title="Effective C++ Second Edition" Author="Scott Meyers"/>
        <Book Title="Assembly Language Step-By-Step" Author="Jeff Duntemann"/>
        <Book Title="Oracle PL/SQL" Author="Steven Feuerstein"/>
      </LanguageBooks>

      <SecurityBooks>
        <Book Title="Counter Hack" Author="Ed Skoudis"/>
      </SecurityBooks>

    </Books>
  </data>
</asp:xmldatasource> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-26T21:26:20.987

从[这里的 XmlDataSource 文档：](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.xmldatasource.aspx)

> *XML 数据也可以由数据源控件使用 Data 属性以字符串形式直接存储*。

# audio - 免费的声音编辑器/转换器？

> ID：322203
> 
> 赞同：4
> 
> 时间：2008-11-26T21:19:14.480
> 
> 标签：audio

我正在寻找诸如paint.net 或 Gimp 之类的东西，但要寻找音频文件，并在 Windows 上运行。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2008-11-26T21:20:04.180

[大胆](http://audacity.sourceforge.net/)太棒了

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-11-26T21:40:47.027

如前所述，Audacity 很棒。如果您希望在命令行中批量转换声音文件，请查看[mencoder](http://www.mplayerhq.hu)和（仅适用于 MP3）[LAME](http://lame.sourceforge.net/)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-10-08T03:51:21.817

大胆是非常有限的。如果你想做一些更复杂的事情。你应该看看死神。它有 60 天的免费试用期，如果您在那段时间后仍在进行编辑和录制，与其他功能齐全的编辑软件相比，购买的价格非常便宜。Pro Tools 非常昂贵。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-07T17:26:37.717

就我个人而言，我将 REAPER 用于“复杂”任务（跟踪、母带处理、批处理）和 Audacity 用于基本的切割/标准化/导出到 MP3。

如果您需要 Audacity 的免费替代品来处理基本的单声道或立体声文件，您可以尝试 Wavosaur 或其他具有实时预览功能的软件。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2014-09-22T12:47:08.783

NCH Wavepad 也是音频的最佳应用。很容易理解

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2014-10-06T01:00:02.347

收割者对我来说一直工作得很好。它可以免费下载并试用 60 天，之后需要便宜的许可证（有两种不同的价格选择）。强烈推荐。

这是网站链接：

[http://www.reaper.fm/](http://www.reaper.fm/)

# spring - 没有 id 或名称的 Spring bean

> ID：322208
> 
> 赞同：26
> 
> 时间：2008-11-26T21:23:29.680
> 
> 标签：spring

我正在查看一些 Spring 代码，我看到一些没有 id 或名称的 bean def。做这件事的人不在身边问。该应用程序运行良好。我不熟悉这必然意味着什么。有人知道这是否意味着什么特别吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2008-11-28T04:46:32.453

某些 bean 不需要被上下文文件中的其他 bean 或以编程方式访问。正如 JacobM 所提到的，它们不需要 id 或名称，因为它们没有被引用。

这样的示例是[PropertyPlaceholderConfigurer](http://static.springframework.org/spring/docs/2.5.x/api/org/springframework/beans/factory/config/PropertyPlaceholderConfigurer.html)，它读取属性文件，然后允许在上下文定义中进行运行时属性替换。

示例定义是

```
<bean class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
  <property name="location" value="myapp.properties" />
</bean> 
```

JavaDoc 提供了有关此对象的更多文档，但在文件中，您可以通过使用标准模板替换占位符 ${...} 来引用文件中的属性。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2008-11-26T21:36:23.070

一种可能性是您可以在适当的位置定义一个 bean，因此您不需要 id，因为您不需要从其他任何地方引用它。假设我有一个带有 Bar 属性的 Foo 对象：

```
<bean id="foo" class="Foo">
     <property name="bar">
         <bean class="Bar">
     </property>
</bean> 
```

Bar bean 不需要名称，因为它仅用于设置一个属性。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2008-11-27T07:46:29.393

检查自动接线的可能性。另一个 bean 可以通过将 autowire 属性设置为 byType 来引用未命名的 bean。

这只是一个猜测。没有具体的例子，我不能再多说了。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-11-26T22:59:48.020

id 和 name 属性是可选的，用于从其他定义中引用 bean 定义。查看[官方 Spring 文档](http://static.springframework.org/spring/docs/2.5.x/reference/beans.html#beans-beanname)以获取更多详细信息。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-01-10T11:16:27.290

看看它说的[https://docs.spring.io/spring/docs/4.3.12.RELEASE/spring-framework-reference/htmlsingle/#beans-beanname ，](https://docs.spring.io/spring/docs/4.3.12.RELEASE/spring-framework-reference/htmlsingle/#beans-beanname)

> 您不需要为 bean 提供名称或 ID。如果没有明确提供名称或 id，则容器会为该 bean 生成一个唯一名称。但是，如果您想通过名称引用该 bean，通过使用 ref 元素或服务定位器样式查找，您必须提供一个名称。**不提供名称的动机与使用内部 bean 和自动装配合作者有关**。

此外，BeanPostProcessor、BeanFactoryPostProcessor 和 PropertyPlaceholderConfigurer 等 Bean 由应用程序上下文自动检测，通常没有名称

如果您考虑任何 Spring bean，Spring 要求它具有标识符。如果您没有在配置中为 bean 提供任何标识符（通过 id 或 name 属性），您将不会遇到异常。Spring 将通过分配默认标识符来管理这种情况。它有 BeanNameGenerator 来分配默认名称。`<bean class="com.package.name.TestBean">`将被命名为“com.package.name.TestBean”`@Bean`类型的 bean 将其方法名称作为 bean 名称

因此，在您的代码中，出于某种原因，您可以跳过命名几个 bean，如果您使用默认名称访问这些 bean，代码仍然有效

学分：[https ://www.javacodegeeks.com/2013/02/spring-bean-names.html](https://www.javacodegeeks.com/2013/02/spring-bean-names.html)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-11-28T16:04:00.140

没有 id 或 name 的 bean 仍然可以被类名引用。Spring 使用类名自动命名这些 bean，如果同一个类有多个 bean，它会在它们后面附加一个数字。匿名 bean 通常在属性标签中定义，但如果它们就在那里，则可能在其他一些 bean 中配置了自动装配。无论如何，我认为向这些 bean 添加名称或 id 不会破坏您的应用程序。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-11-30T01:18:12.720

正如上面提到的几个人，并不是所有的 bean-grabbing 都是基于 name/ID 的。其中一些是基于类型的。例如，有一个方法

BeanFactoryUtils.beansOfTypeIncludingAncestors(...)

抓取某种给定类型的所有bean。例如，Spring Web MVC DispatcherServlet（以及许多其他地方）使用它来按类型发现 bean，例如 HandlerMappings、HandlerAdapters、HandlerExceptionResolvers 等。将此与 bean 必须具有特定的知名名称/ID 才能找到的情况进行对比，例如 LocaleResolver（ID 必须是“localeResolver”，否则将找不到）和 ThemeResolver（ID 必须是“themeResolver”或它不会被发现）。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-07-14T13:51:16.177

没有名称和 ID 定义的 Bean 可以使用生成的 ID（完整的包名和类名）访问，例如：

bean定义为

```
<bean class="pl.finsys.initOrder.TestBeanImpl"> 
```

可以通过

```
TestBean bean = (TestBean) ctx.getBean("pl.finsys.initOrder.TestBeanImpl"); 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2014-04-17T15:05:13.400

//没有Bean id的Bean Cfg文件

`<bean class="com.ds.DemoBean"> <property name="msg" value="Hello"/> </bean>`

//我们可以访问

对象 obj=factory.getBean("com.ds.DemoBe

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-06-17T11:57:40.853

提供java Bean Id不是强制性的。如果我们不提供Bean Id，我们的容器提供默认的Beeen Id。默认的Bean Id看起来像“（包名称）。（Bean类名称）#N”其中N = 0,1,2,......等等。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-03-27T11:35:18.327

似乎未命名和命名 bean 行为之间存在细微差别。如果你有一个 XML 配置文件被导入了两次，那么每个命名的 bean 只会被创建一次，但是一个未命名的 bean 将被创建的次数与包含它的定义一样多。当尝试按类型自动装配这样的 bean 时，会导致如下错误：

```
No qualifying bean of type [your.class.Name] is defined: expected single matching bean but found 4 
```

# ruby-on-rails - 如何在 NetBeans for Ror 中查找 webrick 错误？

> ID：322212
> 
> 赞同：0
> 
> 时间：2008-11-26T21:24:23.860
> 
> 标签：ruby-on-rails, netbeans, webrick, server-error

我从 Ruby on Rails 开始我的冒险，作为 IDE，我选择了 Netbeans。它捆绑了服务器 Webrick，并且运行良好。但是在我的第一个应用程序进行了一些更改后，它给了我内部错误 500 - 但控制台中没有显示任何内容。较旧的操作会产生相同的结果。

我怎样才能找到问题所在？我在 Ubuntu 系统上工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-01T13:20:39.017

您最好的选择是始终打开一个终端窗口并发出以下命令

```
tail -f log/development.log 
```

当您使用应用程序时，这将为您提供实时的、语法颜色的日志提要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-11-26T21:39:52.580

回答我自己-logs/development.log

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-02T20:06:47.060

您还可以在控制器“application.rb”中添加以下行：

```
ActiveRecord::Base.logger = Logger.new(STDOUT) 
```

然后，您将在 Netbeans 的 WEBrick 的“输出”窗口中获得调试输出。

# visual-studio-2008 - 有没有办法将子报告添加到 RDLC 报告的标题中？

> ID：322213
> 
> 赞同：1
> 
> 时间：2008-11-26T21:24:40.990
> 
> 标签：visual-studio-2008, rdlc

我正在寻找一种在 Visual Studio 2008 中向 RDLC 报告的标题添加“子报告”（或等效的东西）的方法。我有一个信息块，我想通过参数传递，但我只想要显示一次。任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-01T21:23:49.057

我想我找到了一种方法。我刚刚向页眉添加了一个文本框和一个新参数（其中包含我要显示的信息）。然后我将文本框内容设置为参数的值。

# .net - 修改 PDF 文档属性

> ID：322218
> 
> 赞同：7
> 
> 时间：2008-11-26T21:25:24.310
> 
> 标签：.net, pdf

如何使用 .NET 代码以编程方式修改 PDF 文档属性？

我已经购买了许多 PDF 格式的电子书，不幸的是，出版商没有设置标题、作者和主题属性。您可以通过访问文件属性对话框并选择 PDF 选项卡在文档上看到这一点。尝试在电子阅读器设备上使用 PDF 电子书时，这是一个真正的痛苦。

我不想购买完整的 PDF Writer 产品来执行此操作，所以我希望有人可以向我指出一个简单的免费库，我可以使用它以编程方式修改属性。

如果没有可用的 .NET 库，我将不胜感激任何其他技术。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-11-26T23:51:31.833

感谢 Mindaugas 和 Knobloch。既然你们都指向 iTextSharp，我就去做了，并且能够使用[iTextSharp](http://sourceforge.net/projects/itextsharp/)和类似于下面显示的代码来解决我的问题。我注意到的一件事是生成的文件比 3,639,172 的起始文件小 115,143 字节，所以看起来我要么丢失了一些信息，要么这个库比用于创建文档的原始产品更有效。

另一件有趣的事情是，在阅读有关此库的信息时，我一直看到指向[iText in Action](http://www.1t3xt.com/docs/book.php)的链接，该链接由我遇到问题的电子书的同一出版商出版：-)

```
 using System.Diagnostics;
        using iTextSharp.text.pdf;
        using System.IO;
        using System.Collections;

        PdfReader pdfReader = new PdfReader(filePath);
        using (FileStream fileStream = new FileStream(newFilePath, FileMode.Create, FileAccess.Write))
        {
            string title = pdfReader.Info["Title"] as string;
            Trace.WriteLine("Existing title: " + title);

            PdfStamper pdfStamper = new PdfStamper(pdfReader, fileStream);

            // The info property returns a copy of the internal HashTable
            Hashtable newInfo = pdfReader.Info;

            newInfo["Title"] = "New title";

            pdfStamper.MoreInfo = newInfo;

            pdfReader.Close();
            pdfStamper.Close();
        } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-11-26T21:28:53.697

这是[C# 中的开源 PDF 库列表](http://csharp-source.net/open-source/pdf-libraries)

其他几个不在该列表中的库：
[ByteScout-PDF](http://www.sharewareconnection.com/bytescout-pdf.htm)
[iTextSharp](http://itextsharp.sourceforge.net/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-11-26T21:29:41.820

你看过 iTextSharp 吗？它是 .Net 的 PDF API。您可以使用 PDF 做一些相当有用的事情。

[Sourceforge 上的 iTextSharp](http://itextsharp.sourceforge.net/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2011-05-24T17:22:08.600

[Docotic.Pdf 库](https://bitmiracle.com/pdf-library/)可以用于这样的任务。

这是一个展示[如何设置 PDF 文档属性](https://bitmiracle.com/pdf-library/help/document-metadata.aspx)的示例。它适用于新的 PDF 文档，但要更改现有文档中的属性，应该只使用另一个构造函数。

免责声明：我为 Bit Miracle 工作。

# c++ - 通过 Internet 发送数据

> ID：322225
> 
> 赞同：2
> 
> 时间：2008-11-26T21:28:11.107
> 
> 标签：c++, networking

我需要通过互联网发送大约 100 字节的数据。我的机器已连接到互联网。我可以通过发送请求和接收响应来使用 HTTP 来做到这一点。但我的要求只是发送数据而不接收响应。我正在考虑使用 UDP 客户端服务器程序来执行此操作。但要做到这一点，我需要在互联网上托管 UDP 客户端？

有没有其他方法可以做到这一点？

有什么建议么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-11-26T21:34:09.690

互联网上发生的任何事情都需要客户端和服务器。

一个框是客户端的角色，另一个是您特定事务的服务器角色。

通常（但不总是）您的本地机器是客户端，而其他一些机器是服务器。

软件必须在两者上运行以实现一些用于交换数据的协议。

服务器可以侦听 TCP 或 UDP 套接字，但有一些限制。一些端口号是特权的。某些端口号被防火墙阻止。

端口 80，虽然很少被防火墙阻止，但它是一个特权端口。通常，您需要一个 Web 服务器（例如 Apache）或特权来侦听端口 80。

“发送 100 字节”可以使用许多可用的协议来完成：Echo、Telnet、FTP、HTTP 等等。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-11-26T21:53:47.170

在互联网上发送 100 字节数据的廉价答案。

```
C:\Windows\system32>ping -n 1 -l 100 -4 google.com

Pinging google.com [209.85.171.99] with 100 bytes of data:
Reply from 209.85.171.99: bytes=56 (sent 100) time=174ms TTL=233

Ping statistics for 209.85.171.99:
    Packets: Sent = 1, Received = 1, Lost = 0 (0% loss),
Approximate round trip times in milli-seconds:
    Minimum = 174ms, Maximum = 174ms, Average = 174ms 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-11-26T21:33:51.580

HTTP 的最大优点是端口 80 经常打开。使用其他协议，您必须依靠运营商来打开端口。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-11-26T21:54:40.007

为了发送数据但不接收响应，您可以简单地编写程序，使其不监听响应。这并不意味着不会发送给您，只是您不会收到它。

例如，您可以确保不在套接字上调用“recv”。此外，您可以使用“关闭”来禁用套接字上的读取。根据底层实现，走“关闭”路线可能会导致所有传入的数据包被简单地丢弃。

至于如何发送数据包，实际上任何类型的协议都可以工作。当然，您需要知道 Internet 上的目标服务器，但您有很多选择。也许最简单的路线就是您所建议的：HTTP（也许使用 www.google.com 作为您的目标服务器）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-11-26T21:35:51.903

您需要一个客户端（您）和一个服务器（另一端）。对于 UDP，您通过 Internet（使用 IP）发送数据报。UDP 不提供 TCP 提供的安全性，但不需要响应（但此类响应是其协议的一部分，而不是您的协议）。

我建议使用 TCP 来省去一些麻烦。

另外，请确保您不在防火墙后面，否则您的数据包将无法按预期到达目的地。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-11-26T22:33:08.527

嗯……

您想通过 Internet 发送短消息，但没有任何响应。

您的应用程序绝不会是某种间谍软件，不是吗？

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-11-27T00:11:16.987

使用 UDP。打开套接字，发送数据，关闭套接字。就是这样。这是客户端的 Python 版本：

```
import socket
data = 100*'x'
address = ('192.168.0.123', 8080)    # Host, port
sock = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)    # UDP   
sock.connect(address)
sock.send(data)
sock.close() 
```

在[关于 UDP 的 Wikipedia 页面上](http://en.wikipedia.org/wiki/User_Datagram_Protocol)有一些相应的 WinSock 代码。当然对方一定是可达的，而且一定有人在那儿监听，否则目标机器会回复一个ICMP“端口不可达”的数据包（至少如果它符合标准的话）。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-11-26T21:34:25.027

如果您想在 Internet 上安装 UDP 侦听器，则必须将其托管在某个地方。

您可以更轻松地获得 HTTP 托管，它无处不在，UDP 您可能需要您自己的机器或至少一个虚拟机。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-09-26T11:46:43.437

curl 是一个使用 URL 语法传输数据的命令行工具，支持 DICT、FILE、FTP、FTPS、Gopher、HTTP、HTTPS、IMAP、IMAPS、LDAP、LDAPS、POP3、POP3S、RTMP、RTSP、SCP、SFTP、SMTP、 SMTPS、Telnet 和 TFTP。curl 支持 SSL 证书、HTTP POST、HTTP PUT、FTP 上传、基于 HTTP 表单的上传、代理、cookie、用户+密码身份验证（Basic、Digest、NTLM、Negotiate、kerberos...）、文件传输恢复、代理隧道和大量其他有用的技巧。

[在此处查看示例](http://curl.haxx.se/libcurl/c/example.html)

# asp.net - 发送电子邮件，但不是现在

> ID：322226
> 
> 赞同：3
> 
> 时间：2008-11-26T21:28:19.390
> 
> 标签：asp.net, sql, smtp

我正在编写一个应用程序，用户将在其中创建约会，并立即收到一封确认他们约会的电子邮件。我还想在他们约会的那天发送一封电子邮件，提醒他们实际出现。

我在 MS SQL 上的 ASP.NET (2.0) 中。即时电子邮件没有问题，但我不确定处理提醒电子邮件的最佳方式。基本上，我可以想到三种方法：

1.  设置一个每天晚上运行的 SQL 作业，将 SQL 电子邮件发送给当天有约会的人。
2.  以某种方式发送带有“之前不要发送”标志的电子邮件，尽管这似乎是我可能正在发明的东西。
3.  编写*另一个*在每晚特定时间运行的应用程序。

我错过了一些明显的东西吗？我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-11-26T21:44:07.940

选择 #1 将是最佳选择，创建一个要发送的电子邮件表，并在发送每封电子邮件时更新该表。最好不要删除条目而是将其标记为已发送，你永远不知道有一天你会遇到问题并想重新发送电子邮件，我已经在类似的设置中看到过很多次这种情况。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-11-26T21:55:01.380

一个警告——在 web 应用程序中紧密耦合初始电子邮件的传输可能会导致架构脆弱（例如 SMTP 服务器不可用）——并丢失消息。

您可以通过 MSMQ 为初始电子邮件和提醒电子邮件引入抽象层 - 并让服务按计划清扫队列。初始消息可以用表示“立即发送”的属性进行标记 - 提醒消息可以标记为“已调度” - 扫地机只需发送它发现的任何“立即发送”或属于“立即发送”的消息"SCHEDULED" 并且有一个 toBeSentDate >= 当前日期。成功发送消息后 - 可以通过从队列中删除消息来结束工作单元。

这种方法可确保消息不会丢失 - 并通过调整服务轮询间隔将负载分配到非高峰时段。

正如 Rob Williams 指出的那样——我对 MSMQ 的建议对于这个特定问题来说有点矫枉过正......但当你开始考虑规模问题时，这是一种可行的方法——并且你希望（或需要）最小化/减少数据库读/写活动（尤其是在处理高峰期）。

给 Rob 的帽子小费。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-11-26T22:10:30.053

对于每个较大的项目，我通常还会创建一个执行定期或定期任务的服务。

该服务在数据库中的某处更新其状态和上次执行的时间，以便应用程序可以使用该信息。

例如，应用程序将命令发布到命令队列，并且服务在计划时间处理它们。

我发现这个解决方案比 SQL Server 任务或作业更容易处理，因为它只是您需要安装的一个服务，而不是确保正确设置所有必需的作业。

此外，由于该服务是用 C# 编写的，因此我手头有一种比 T-SQL 更强大的编程语言（加上库）。

如果需要处理的确实是纯 T-SQL 内容，那么将有一个 Execute_Daily 存储过程，该服务将在日期更改时调用该存储过程。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-11-26T22:22:36.817

正如其他人所建议的那样，创建一个单独的批处理服务，但使用它来发送所有电子邮件。

Web 应用程序应在数据库表中记录发送通知的需要，包括即时通知和提醒通知，这两个记录都标有所需的发送日期/时间。

使用 MSMQ 是多余的——您已经拥有了一个数据库和一个简单的应用程序。随着复杂性的增加，MSMQ 或类似的东西可能有助于提高复杂性和可伸缩性。

该服务应定期（每隔几分钟到几个小时）扫描数据库表以查找要在不久的将来发送的通知（电子邮件），发送它们，如果成功则将它们标记为已发送。您最终可以利用它来发送短信 (SMS) 或即时消息 (IM) 等。

当您使用它时，您应该考虑使用[命令设计模式](http://c2.com/cgi/wiki?CommandPattern)，并将此服务实现为可重用的命令执行器。我最近使用需要与第三方提供商保持房地产列表 (MLS) 数据同步的 Web 应用程序来完成此操作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-11-26T21:34:18.677

您的选项 2 看起来确实像是您正在发明的东西。我知道如果您要向我发送类似的邮件，*我的邮件系统将不会保留邮件以供将来投递。*

我认为你没有遗漏任何明显的东西。您将需要在约会当天运行的东西来发送电子邮件。将其作为 SQL 作业还是作为单独的应用程序会更好，这取决于您的应用程序架构。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-11-26T21:37:24.740

我会推荐第一个选项，使用 SQL 或其他应用程序每天自动运行以发送电子邮件。这很简单，而且有效。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-11-26T21:43:53.180

Microsoft Office 具有交付延迟功能，但我认为这是 Outlook 的事情，而不是 Exchange/Mail Server 的事情，因此您将不得不使用选项 1 或 3。或者选项 4 将是编写服务。这样您就不必担心计划任务来运行选项 3 应用程序。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-11-26T23:56:42.413

如果您打算将此应用程序托管在便宜的托管服务（如 GoDaddy）上，那么我建议您在 Application_Start 的 Global.asax 中分离一个工作线程并让它休眠、唤醒、发送电子邮件、睡觉...

因为您将无法在 SQL Server 机器上运行某些东西，并且您将无法安装自己的服务。

我这样做，它工作正常。

# java - 使用 Hibernate 持久化用户

> ID：322243
> 
> 赞同：0
> 
> 时间：2008-11-26T21:36:02.307
> 
> 标签：java, mysql, hibernate

我创建了一个 UserObject 和 RoleObject 来代表我的应用程序中的用户。我正在尝试将休眠用于 CRUD 而不是原始 JDBC。我已成功从数据库中检索到信息，但无法创建新用户。我收到以下错误。

```
org.springframework.web.util.NestedServletException: Request processing failed; nested
exception is org.springframework.dao.DataIntegrityViolationException: could not insert: 
[com.dc.data.UserRole]; nested exception is 
org.hibernate.exception.ConstraintViolationException: could not insert: 
[com.dc.data.UserRole] 
```

我的数据库定义如下：

用户表、权限表和权限表。权限表是用户和权限的连接。

我对 UserObjec 的休眠映射如下：

```
 ...
  <set name="roles" table="authorities" cascade="save-update"  lazy="false" >
            <key column="userId" />
            <one-to-many class="com.dc.data.UserRole"/>
            <many-to-many  class="com.dc.data.UserRole" column="authId" />
        </set>
    </class>
   ... 
```

UserRole 映射如下：

```
<class name="com.dc.data.UserRole" table="authority">
    <id name="id" column="authId">
        <generator class="native" />
    </id>
    <property name="roleName">
        <column name="authority" length="60" not-null="true" />
    </property>
</class> 
```

我如何需要更改我的映射或对象结构才能保留新用户？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-11-29T06:33:58.027

您在“set”元素中定义了两种不同的关系。您可能想要的只是多对多元素。

如果这仍然不起作用，请尝试保存 UserRole 本身以查看是否可以自行保留它。如果可以，那么在尝试持久化用户时会抛出 ConstraintViolationException。

最后一个提示，您可能不想在“角色”集上级联保存/更新。您的 UserRoles 很可能已经在数据库中，并且在创建时简单地附加到用户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-11-27T00:58:49.373

UserRole 上的约束冲突可能是尝试插入具有重复键的行的原因。也许尝试使用其他类型的生成器，例如“序列”。

# vb.net - 在属性调用期间填充属性对象

> ID：322247
> 
> 赞同：2
> 
> 时间：2008-11-26T21:36:43.243
> 
> 标签：vb.net, properties, class-constructors

我想知道这种方法是否正确，或者它们是否是更好的方法。

我有一个基本上是一个 Person 类，它有许多其他类作为变量，每个自定义类都通过传递 Person ID 来实例化，然后该类使用该 ID 检索它需要的数据。我通过属性公开变量类。

目前，当我创建 Person 类的实例时，我正在实例化变量类，并且这些变量的大量意味着实例化 Person 类所需的时间正在增长。我的想法是将变量类的实例化移动到 Propertie 声明，然后在此处使用 If 语句来实例化它（如果尚未完成）。

正如我上面所说，这种方法是正确的还是他们这样做的更好方法？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-11-26T21:42:13.887

您所描述的技术有一个术语；它被称为“延迟加载的属性”。它绝对应该有助于分散您对该对象的负载，使其远离“前端加载”构造函数。

另一方面，听起来您所描述的内容将导致一个非常紧密耦合的对象模型（如果您还没有对象模型），这可能会对这段代码的可维护性产生负面影响。但是，我认为关于该主题以及如何以其他方式工作的严肃论文并不真正属于这个问题的范围。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-11-26T21:49:05.027

澄清一下：如果您的意思是在其访问器的 getter 上实例化类，那么是的，这是一种很好的方法 - 称为延迟加载。

例如

```
public Property ChildClass as PersonChildClass

   Get

      if _childClass is Nothing          
          _childClass = new PersonChildClass(_personId)
      End If
      return _childClass
  End Get
End Property 
```

# linux - 暂时防止linux关机

> ID：322254
> 
> 赞同：12
> 
> 时间：2008-11-26T21:39:48.307
> 
> 标签：linux, shutdown, dbus

我有一个备份脚本，每天在我的 linux (Fedora 9) 计算机上运行。如果在备份过程中关闭计算机，则备份可能已损坏，因此我想编写一个小脚本，暂时禁用用户重新启动或关闭计算机的能力。

脚本不一定是不可绕过的，只是让系统的用户知道备份正在进行中，他们不应该关闭。我在 DBus Free 桌面电源管理规范中看到了 Inhibit 方法：http: [//people.freedesktop.org/~hughsient/temp/power-management-spec-0.3.html](http://people.freedesktop.org/~hughsient/temp/power-management-spec-0.3.html) 但这只会在系统空闲时防止关机未明确应用户要求。

有没有一种简单的方法可以在 C/Python/Perl 或 bash 中做到这一点？

**更新：**为了澄清上面的问题，它是一台有多个用户的机器，但他们通过插入的键盘/鼠标顺序使用它。我不是在寻找一个可以阻止我以 root 身份“破解”它的系统。但是当我从 Gnome/GDM 菜单中选择关闭时，一个脚本会提醒我（或其他用户）备份仍在运行

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-11-26T22:12:14.623

另一个让你开始的解决方案：在关机期间，系统运行 /etc/init.d/ 中的脚本（或者实际上是 /etc/rc.*/ 中的脚本，但你明白了。）你可以创建一个该目录中的脚本检查备份的状态，并延迟关闭，直到备份完成。或者更好的是，它会优雅地中断您的备份。

超级用户可以解决这个脚本（例如使用 /sbin/halt），但是如果超级用户真的下定决心去做任何事情，你就不能阻止他们做任何事情。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-05-19T13:27:26.150

有[molly-guard](http://manpages.ubuntu.com/manpages/lucid/man8/molly-guard.8.html)可防止意外关闭、重新启动等，直到满足所有要求的条件 - 条件可以自定义。

正如已经建议的那样，您也可以在关机过程中执行备份操作。参见例如[这个页面](https://help.ubuntu.com/community/BackupYourSystem/SimpleBackupSuite#Automatically_Backup_at_Shutdown)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-13T03:49:21.473

如果用户要通过 GNOME/KDE 关闭，只需*禁止*他们这样做。

[http://live.gnome.org/GnomePowerManager/FAQ#head-1cf52551bcec3107d7bae8c332fd292ec2261760](http://live.gnome.org/GnomePowerManager/FAQ#head-1cf52551bcec3107d7bae8c332fd292ec2261760)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-11-26T21:58:45.397

比完整的解决方案更多的是入门，您可以将关闭命令别名，然后使用类似的脚本

```
#!/bin/sh
ps -ef|grep backupprocess|grep -v grep > /dev/null
if [ "$?" -eq 0 ]; then
 echo Backup in progress: aborted shutdown
 exit 0
else
 echo Backup not in progress: shutting down
 shutdown-alias -h now
fi 
```

保存在用户的路径中作为关机。我预计会有一些变化取决于您的用户如何调用关闭（窗口管理器图标/命令行），并且可能也适用于不同的发行版。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-11-26T22:12:05.293

我不禁觉得您并没有理解 Unix 的隐喻，而您所要求的只是一个杂物。

如果用户以 root 身份运行，则 root 无法阻止 root 关闭系统！你可以做一些装点门面的事情，比如模糊关机 UI，但这并不能真正完成任何事情。

我不知道您是在多用户机器的上下文中谈论这个，还是在单个用户坐在控制台前用作“台式电脑”的机器。如果是前者，您的用户真的不应该使用可以关闭系统以进行日常活动的凭据访问机器。如果是后者，我建议教育用户 (a) 检查脚本是否正在运行，或者 (b) 使用您指定的特定关闭脚本来检查脚本的进程并拒绝关闭，直到它消失。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-04-16T10:58:29.883

> 但是当我从 Gnome/GDM 菜单中选择关闭时，一个脚本会提醒我（或其他用户）备份仍在运行

有人可能会使用 polkit 来完全阻止关机/重启 - 但我找不到能够提供明确响应为什么它被阻止的方法。

添加以下行作为`/etc/polkit-1/localauthority/50-local.d/restrict-login-powermgmt.pkla`作品：

```
[Disable lightdm PowerMgmt]
Identity=unix-user:*
Action=org.freedesktop.login1.reboot;org.freedesktop.login1.reboot-multiple-sessions;org.freedesktop.login1.power-off;org.freedesktop.login1.power-off-multiple-sessions;org.freedesktop.login1.suspend;org.freedesktop.login1.suspend-multiple-sessions;org.freedesktop.login1.hibernate;org.freedesktop.login1.hibernate-multiple-sessions
ResultAny=no
ResultInactive=no
ResultActive=no 
```

您仍然会看到一个确认对话框，但没有确认按钮。看起来很难看，但有效；）

不幸的是，这适用于所有用户，不仅是 lightdm 会话，因此如果需要，您必须添加第二条规则以将它们列入白名单。

请注意，此方法仅阻止从 GUI 发出的 reboot/etc 命令。要从命令行阻止重启/等命令，可以使用 molly-guard - 如[https://askubuntu.com/questions/17187/disabling-shutdown-command-for-all-users-even-root-consequences/17255中所述#17255](https://askubuntu.com/questions/17187/disabling-shutdown-command-for-all-users-even-root-consequences/17255#17255)

# lucene.net - 使用 Lucene.net 突出显示搜索结果

> ID：322256
> 
> 赞同：4
> 
> 时间：2008-11-26T21:40:15.730
> 
> 标签：lucene.net

我正在开发一个使用 Lucene.net 的 asp.net 应用程序，我需要突出显示从 Lucene 返回的搜索结果。我相信有一个 Highlighter 类可以用于此目的。我使用的是 Lucene.Net 2.0.0.4 版，但无法在其中找到任何 Highlighter 类。请帮忙。

谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2008-12-02T12:27:34.490

在谷歌搜索时，我发现了这个链接：http: [//incubator.apache.org/lucene.net/docs/2.0/Highlighter.Net/Lucene.Net.Highlight.html](http://incubator.apache.org/lucene.net/docs/2.0/Highlighter.Net/Lucene.Net.Highlight.html)。这可能是您正在寻找的东西？

# java - 哪个 Tomcat 5 上下文文件优先？

> ID：322260
> 
> 赞同：19
> 
> 时间：2008-11-26T21:40:54.683
> 
> 标签：java, tomcat, configuration, settings, context.xml

[Tomcat 文档](http://tomcat.apache.org/tomcat-5.5-doc/deployer-howto.html)说：

上下文描述符的位置是；

$CATALINA_HOME/conf/[enginename]/[hostname]/context.xml
$CATALINA_HOME/webapps/[webappname]/META-INF/context.xml

在我的服务器上，我至少有 3 个文件浮动：

```
1 ...tomcat/conf/context.xml
2 ...tomcat/Catalina/localhost/myapp.xml
3 ...tomcat/webapps/myapp/META-INF/context.xml 
```

优先顺序是什么？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2008-11-26T23:32:42.993

对于您列出的文件，假设您使用所有默认值，简单的答案是（注意**conf** /Catalina/localhost）：

```
...tomcat/conf/context.xml
...tomcat/conf/Catalina/localhost/myapp.xml
...tomcat/webapps/myapp/META-INF/context.xml 
```

我将此（以及以下讨论）基于[**Context Container**](http://tomcat.apache.org/tomcat-5.5-doc/config/context.html)[的Tomcat 5.5 官方文档](http://tomcat.apache.org/tomcat-5.5-doc/config/context.html)**。**

 **因此，如果这是简单的答案，那么完整的答案是什么？

雄猫 5.5。将在其他几个地方查找`<Context>`您列出的元素之外的元素（请参阅官方文档）。

如果`META-INF/context.xml`Tomcat 发现`Catalina/localhost/myapp.xml`. 因此，如果您实际上拥有上述所有文件，更正确的说法是 the `META-INF/context.xml`is**无关紧要**，而不是它是最低优先级。

如果你`<Context override="true" ...>`在你的`Catalina/localhost/myapp.xml`那将使它成为**最高**优先级，不管`conf/context.xml`. 相同的东西在你的`META-INF\context.xml`，只要你没有`Catalina/localhost/myapp.xml`（见上一段）。

此外，`/Catalina/localhost/`上述文件中的路径部分实际上来自“默认”`conf/server.xml`并与`<Engine name="Catalina" defaultHost="localhost">`. 如果您在和中`server.xml`使用不同的值，那将是 Tomcat 的目录结构。`name``defaultHost``<Engine>`

最后，对于`...tomcat\`您列出的部分文件，Tomcat 使用`$CATALINA_BASE`环境变量中的目录。如果未设置，则它使用`$CATALINA_HOME`环境变量中的 dir，即 Tomcat 安装的目录。我喜欢设置和使用`$CATALINA_BASE`，这样我就不会“污染”我的 Tomcat 安装。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-26T22:11:54.700

我的理解是：

*   tomcat/conf/context.xml 是“默认” context.xml，其内容与 webapp 上下文定义重叠。我的 TC 5 默认 context.xml 中几乎没有任何内容，除了将 web.xml 列为支持此概念的监视资源之外。
*   tomcat/Catalina//.xml 用于 webapp。*它要么是手动放置在这里，要么是在部署时*从您的 web 应用程序中获取......所以这是 TC 使用的真正主人。如果您编辑此更改将在下一次开始阅读。
*   *tomcat/webapps/myapp/META-INF/context.xml - 如果您在初始部署后更改它，则会在初始部署*时将其复制到 tomcat/Catalina/ ，我认为这没有任何影响

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-26T22:03:01.427

我还没有找到任何官方文档，但我观察到加载顺序是：

```
1 tomcat_home/conf/context.xml
2 tomcat_home/webapps/myapp/META-INF/context.xml 
```

其中 #2 是最后一个应用的（因此它的设置会覆盖所有以前的设置，如果适用）。

我从未使用过名为上下文文件的 webapp（您的选项 #2）。

# .net - 签署混合模式 C++ 程序集

> ID：322262
> 
> 赞同：1
> 
> 时间：2008-11-26T21:41:40.580
> 
> 标签：.net, security, c++-cli

您可以签署部分托管和部分非托管的 C++ CLI 应用程序吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-11-26T21:44:20.887

是的。您可以签署混合模式的 .Net 程序集。不过，它仍然需要完全信任才能运行。

# c# - C# 手机游戏开发

> ID：322272
> 
> 赞同：2
> 
> 时间：2008-11-26T21:44:19.843
> 
> 标签：c#, windows-mobile, frameworks, gdi+

我目前正在尝试为 WM 5.0 设备实现一个大理石迷宫游戏，并且一直在努力开发一个工作原型。原型需要用户使用方向键控制球，并显示逼真的加速度和摩擦力。

我想知道是否有人有这方面的经验，可以给我一些建议或指出正确的方向，什么是必要的，以及做这种事情的最佳方式。

提前致谢。

坦率。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-10-05T10:05:37.680

阅读您的答案时，我没有感觉到您在寻找游戏框架，而是更多：如何轻松地为具有加速度和摩擦力的球建模。

为此，您不需要完整的物理框架，因为它相对简单：

首先创建一个每秒触发 30 次的计时器，然后在计时器回调中执行以下操作：

*   绘制迷宫背景
*   在 ballX、ballY 处画一个球（都是浮点变量）
*   将 ballSpdX 添加到 ballX 并将 ballSpdY 添加到 ballY（速度）

现在检查钥匙...

*   如果方向键是左，则减去少量的ballSpdX
*   如果方向键是左上角，则减去少量的ballSpdX和ballSpdY
*   ETC

对于碰撞，请执行以下操作：

*   首先将球沿水平方向移动。然后检查与墙壁的碰撞。如果检测到碰撞，则将球移回其先前位置并反转速度：ballSpdX = -ballSpdX
*   将球沿垂直方向移动。然后检查与墙壁的碰撞。如果检测到碰撞，则将球移回其先前位置并反转速度：ballSpdY = -ballSpdY

通过分别处理垂直和水平运动，碰撞更容易，因为你知道球需要反弹到哪一侧。

最后一个不是最不重要的摩擦，摩擦只是每帧都这样做：ballSpdX *=摩擦；摩擦力大约是 0.99。这样可以确保球的速度由于摩擦而在每一帧都变小；

希望这有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-11-26T21:45:59.323

我建议查看 XNA Studio 3，它内置了对 PC、Xbox 360 和移动设备的支持，它是 Microsoft Visual Studio 的官方免费衍生产品。

[http://creators.xna.com/en-US/](http://creators.xna.com/en-US/)

[http://blogs.msdn.com/xna/](http://blogs.msdn.com/xna/)

如果你四处搜索，人们已经使用物理学写了教程（这个是速度） [http://www.xnamachine.com/2007/12/fun-with-very-basic-physics.html](http://www.xnamachine.com/2007/12/fun-with-very-basic-physics.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-26T21:48:30.927

试试[XFlib](http://www.xflib.net/wiki/doku.php?id=install)。它是用 c++ 编写的，但不幸的是，移动设备上最酷的东西必须是 c++ 编写的。该网站有一些非常酷的免费游戏。您还可以看到大部分游戏的来源。许多人拥有你想要的物理学。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-11-26T21:49:27.727

不幸的是，XNA 不支持 windows 移动平台。但是，您似乎对在 WM 设备上绘图的技术问题没有问题，而是对实现基于物理的运动所需的逻辑有疑问，那么考虑使用 XNA 对物理和运动进行原型制作并不是一个坏主意代码。

[在creators.xna.com](http://creators.xna.com)以及[“gamedev.net”](https://gamedev.net)上查看一些教育主题

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-09-09T08:57:04.910

我不知道这是否有帮助，但我在 google 代码上看到了适用于 Android 平台的 Marble 应用程序。[在这里](http://code.google.com/p/apps-for-android/source/browse/#svn/trunk/Amazed/src/com/example/amazed)查看它，它可能会对游戏的实际逻辑产生一些见解。

该代码是开源的并用java编写（使用android sdk），但它可能很有用。[此外，为了更好地理解代码，请在此处查看](http://developer.android.com/reference/android/hardware/SensorEvent.html)SensorsManager、SensorEvent 等的文档

我不建议您使用与此应用程序相同的架构。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-11-27T07:05:19.367

如果您不知所措，尝试使用“更轻”的原型工具是没有错误的。我会尝试 Torque Game Builder - 它会输出 XNA，尽管可能不适合您的平台。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-11-27T08:08:06.277

在 Windows Mobile SDK 示例（也请查看 WM 6.0 SDK）中，有几个游戏应用程序。其中一个是简单的益智游戏；不多，但这是一个起点。

在游戏开发中使用物理并不特定于 Windows Mobile。你可以找到关于这个主题的大量文献。我现在想到了[这个。](https://rads.stackoverflow.com/amzn/click/com/0596000065)如果你是认真的游戏开发，在任何平台上，你都应该先做一点研究。

# php - php中的并行mysql查询？

> ID：322275
> 
> 赞同：7
> 
> 时间：2008-11-26T21:45:25.923
> 
> 标签：php, mysql, parallel-processing

我将数据分片到多个 mysql 数据库中，但有时我需要从多个分片收集信息。如何在php中并行查询多个mysql数据库？

我见过一些异步 curl 请求和 shell_exec 的例子，但是有没有更直接的方法呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-11-26T22:00:05.037

新的 mysqlnd 驱动程序可以执行异步查询。文档很少，但这里的演示文稿中有一些示例（也与分片有关[）](http://blog.ulf-wendel.de/?p=201)。

# asp.net - asp.net，状态服务器，NLB，会话丢失

> ID：322277
> 
> 赞同：2
> 
> 时间：2008-11-26T21:45:51.743
> 
> 标签：asp.net, session, cluster-computing, nlb, stateserver

关于stackoverflow的第一篇文章，希望有很好的反馈:)

我目前正在尝试对我们的网站进行负载平衡。我们在带有 IIS 6 的 windows server 2003 上设置了 2 个集群 NLB。

在测试设置时，我发现有时我们的会话会丢失。一天半之后，结果如下：

1.  是的，我们的 machine.config 都具有相同的加密/解密密钥。
2.  是的，两台机器的 iis metabase.xml 中的 id 相同。实际上，整个文件都是一样的，除了“AdminACL”。
3.  两个 Web 应用程序都设置了“StateServer”，并且都指向同一台机器。

从那时起，在谷歌上搜索提供的信息和可能的解决方案就更少了。

据我所知，没有导致此问题的特定模式。它只是偶尔发生一次。

在尝试查找问题时，我看到一个请求将 asp session id cookie 发送到服务器，但服务器没有将其映射到用户会话。

于是客户端发出了请求号x，带有cookie，session被映射，一切顺利。请求号 x+1 是从客户端发送的，带有 cookie，但未找到会话。

这两个请求都是在 NLB 中的同一台机器上发出的。

这是 asp trace.axd 的一个片段：

第一个请求：

请求详细信息会话 ID：j2ffvy45updpc52uhw1mbg55 请求类型：GET 请求时间：2008 年 11 月 26 日下午 2:58:06 状态代码：200 请求编码：Unicode (UTF-8) 响应编码：Unicode (UTF-8)

请求 Cookie 收集

名称 值 大小

ASP.NET_SessionId j2ffvy45updpc52uhw1mbg55 42 AID 22 9

响应 Cookie 集合

名称 值 大小

标头集合

名称 值

Cookie ASP.NET_SessionId=j2ffvy45updpc52uhw1mbg55; 援助=22

第二个要求：

请求详细信息会话 ID：请求类型：POST 请求时间：2008 年 11 月 26 日下午 2:58:08 状态代码：
请求编码：Unicode (UTF-8) 响应编码：

请求 Cookie 收集

名称 值 大小

响应 Cookie 集合

名称 值 大小

标头集合名称值 Cookie ASP.NET_SessionId=j2ffvy45updpc52uhw1mbg55; 援助=22

正如您在第二个请求中看到的，cookie 是从客户端发送的，但 asp 似乎从未将 cookie 添加到它的“请求 cookie 集合”中。我认为这就是它找不到会话的原因。

那么为什么cookie没有映射到会话呢？那是问题吗？问题在其他地方吗？

随时询问任何澄清。

谢谢大家的反馈。

杰夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-03T20:43:28.857

我终于找到了我的问题的答案。它的起源是在应用程序代码中（就像 99% 的程序员的 3rd 方工具“错误”）。无论如何，我决定发布它以防有人处于类似情况。

此代码是 WebServiceRequester 类的一部分。Web 服务请求者类在创建会话时被实例化并保存在会话中。在创建过程中，我们初始化了成员'm_webServiceURL'，之后这个成员保存在会话中。此成员初始化的值取决于本地计算机上的设置。

重要的部分如下： WebServiceRequester 类包含一个 WebService 对象。WebService 对象不能保存在会话中，它们在 asp 中不可序列化。该属性具有 [NonSerialized] 属性。因此，每次我们在页面生命周期中第一次访问对象的“We​​bService”属性时，我们都必须创建一个新属性，并为其分配保存在会话中的 url“m_webServiceURL”。所以你看，新的 webservice 对象，可能在不同的机器上，这意味着每台机器上的不同设置。

所以这就是发生的事情：框 29 被设置为在 localhost 访问 Web 服务

框 30 设置为以 192.168.253.29 访问 Web 服务。

从技术上讲，它们都设置在同一台机器上。但这里有一个场景：

在框 29 上登录。m_webServiceURL 在会话中设置为 localhost。

[关于方框 29 的一些要求]

NLB 平衡将我们带到框 30。框 30 加载它的会话，以 localhost 作为 Web 服务地址创建一个新的 Web 服务对象。框 30 向错误的 Web 服务发出请求，导致 Session Expired 异常。

调试过程中的问题之一是本地通信没有被网络监视器记录下来。

在跟踪中引导我的是，我们从来没有在框 29 日志跟踪中记录异常，因为它应该有。

谢谢大家的建议，真的很感激。

祝你有美好的一天。杰夫

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-11-26T21:50:45.943

严格来说不是您问题的答案，但是您是否尝试过使用基于 sql server 的会话存储？（在 MSDN 上搜索永久脚本而不是 asp.net 提供的临时脚本）

我听说过关于可执行会话服务的“坏事”，因此没有使用它。不过，使用基于 sql server 的解决方案从来没有遇到过任何问题。

抱歉，严格来说，这不是您问题的答案，但它应该 (a) 修复它，或 (b) 显着缩小范围。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-26T22:03:01.193

好吧，如果您使用的是 Visual Studio，您至少可以使用 MSDE（Visual Studio 附带的 SQL Server 的精简版）对其进行测试...

它可能有助于排除状态服务器问题......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-11-26T22:31:11.730

使用数据库方法有其自身的问题。我认为您应该能够使用您喜欢的方法。

也许[这篇会话故障排除文章](http://blogs.msdn.com/amenon/archive/2007/08/21/troubleshooting-session-loss.aspx)会有所帮助？

或“[在 ASP.NET 中解决与会话相关的问题](http://aspalliance.com/1182_Troubleshooting_Session_Related_Issues_in_ASPNET.5)”

或“[对过期的 ASP.NET 会话状态和您的选项进行故障排除](http://www.hanselman.com/blog/TroubleshootingExpiredASPNETSessionStateAndYourOptions.aspx)”

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-11-27T00:47:15.167

我会跛脚并重新迭代MS SQL Server的提议。安装完全免费的 SQL Server Express，包括商业用途，它只有这 3 个缺点，在这个阶段对你来说应该不是问题：

*   最大 4GB 大小的数据库
*   最多使用 1 个 CPU 内核
*   使用的最大 1GB RAM

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-11-28T03:18:07.360

需要考虑的几点：

*   您网站的负载是多少？状态服务器在面临大量并发命中时有崩溃的趋势。我们只在用户数量非常少的情况下使用它（在 10 年代，主要是后端系统）。每当我们尝试将它用于每天为 1000 名用户提供服务的网站的生产环境中时，它都会崩溃并导致会话数据丢失。
*   在我们管理的一个生产环境中，我们使用 MSSQL 2005 Express 来管理会话，该站点每天有 10K+ 用户和 200K+ 页面。如果会话是必须的并且紧密耦合到您的应用程序中，这是一种推荐的方法。

如果您将使用 MSSQL Express 作为您的状态数据库，请记住它不附带 SQL Server 代理，这意味着没有任务调度程序在后台运行并清理您过期的会话。我建议找到一个调度程序并定期运行干净的过期会话存储过程。

祝你好运

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-11-28T05:17:55.307

不要乱用 SQL，而是将测试直接发送到您的 IIS 节点之一，看看您是否仍然遇到同样的问题。我敢肯定，如果您只进行少量测试 StateServer 不会是问题。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-11-28T06:05:16.257

尝试通过代码将asp.net_sessionid的域名设置为“.yourdomain.com”。默认情况下，ASP.net_SessionID cookie 域名设置为完整的应用程序路径。因此，这可能是 cookie 不旅行的原因之一。

例如 Request.Cookies["ASP.NET_SessionId"].Domain = ".yourdomain.com"。记住第一个“。” 在域名中很重要。

您可以在 AcquireRequestState 事件的 HttpModule 中执行此操作。

# sharepoint - 如果 Sharepoint 是 64 位，则让 Web 捕获 Web 部件工作

> ID：322280
> 
> 赞同：1
> 
> 时间：2008-11-26T21:46:53.580
> 
> 标签：sharepoint, 64-bit, web-parts

以前我们的 SharePoint 服务器是 32 位的，我们使用 Web 捕获 Web 部件来显示 bugzilla 搜索结果页面。由于我们已迁移到 64 位服务器，因此 webpart 不再工作。我们正在运行相同版本的所有内容，唯一的变化是从 Windows Server 2003 32 位机器迁移到 Windows Server 2003 64 位机器。

奇怪的是，日志不包含任何内容。出现 Web 部件的页面是唯一出现错误消息的地方。这是我所拥有的：

-Web 部件错误：无法显示或导入此页面上的 Web 部件或 Web 窗体控件。找不到该类型或未将其注册为安全类型。

*   错误 - 此 Web 部件中遇到意外错误。

我怀疑 64 位与 32 位问题的原因是我在各种论坛上看到了很多关于该主题的帖子。看来我不是唯一一个遇到这个问题的人，所有的故障排除都导致了这个结论。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2008-11-27T21:25:29.647

在我从 64 位更改为 32 位的过程中一直遇到错误，位数的变化通常是一个红鲱鱼，而失败的实际原因是其他原因。

检查共享点日志中的 WebPart 错误。他们将帮助准确显示问题所在。如果您仍然需要帮助，请发布相关错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-12-17T08:42:08.743

# biztalk - BizTalk 循环仿函数

> ID：322293
> 
> 赞同：1
> 
> 时间：2008-11-26T21:52:01.510
> 
> 标签：biztalk

我有一个结构化的 XML 文件格式，需要映射到更扁平的 XML 格式。通常我会为此创建一个自定义 XSLT 文件并让 BizTalk 映射使用它。然而，我确实喜欢尽可能使用图形地图的想法——直接深入 XSLT 太容易了，但对于那些跟随你的人来说，要快速了解地图的作用就不是那么容易了！

我怀疑可以使用表循环函数和表提取器 functoid 来实现映射，但我已经尝试了几个小时但失败了:(

注意：我无法控制源 XSD - 这来自第三方。这里是：

```
<?xml version="1.0" encoding="UTF-8"?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema" elementFormDefault="qualified"  attributeFormDefault="unqualified">
<xs:element name="VehicleTrips">
    <xs:annotation>
        <xs:documentation>Comment describing your root element</xs:documentation>
    </xs:annotation>
    <xs:complexType>
        <xs:sequence maxOccurs="unbounded">
            <xs:element name="Vehicle">
                <xs:complexType>
                    <xs:sequence>
                        <xs:element name="VehicleID"/>
                        <xs:element name="VehicleRegistration"/>
                    </xs:sequence>
                </xs:complexType>
            </xs:element>
            <xs:element name="Trips">
                <xs:complexType>
                    <xs:sequence maxOccurs="unbounded">
                        <xs:element name="VehicleId"/>
                        <xs:element name="Distance"/>
                        <xs:element name="Duration"/>
                    </xs:sequence>
                </xs:complexType>
            </xs:element>
        </xs:sequence>
    </xs:complexType>
</xs:element> 
```

...这是目标 XSD：

```
<?xml version="1.0" encoding="UTF-8"?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema" elementFormDefault="qualified" attributeFormDefault="unqualified">
<xs:element name="Trips">
    <xs:annotation>
        <xs:documentation>Comment describing your root element</xs:documentation>
    </xs:annotation>
    <xs:complexType>
        <xs:sequence maxOccurs="unbounded">
            <xs:element name="VehicleRegistration"/>
            <xs:element name="Distance"/>
            <xs:element name="Duration"/>
        </xs:sequence>
    </xs:complexType>
</xs:element> 
```

总而言之，我需要查看 Trips，从 Vehicle 中获取 VehicleRegistration，键入 VehicleId 并将数据复制到目标模式。

有谁知道是否/如何仅使用 functoids（或者可能是脚本 functoid 中的一个小脚本）来实现这一点？

非常感谢，罗布。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2008-12-10T13:33:43.540

是否可以获得预期 xml 的子样本？想一想您希望响应文件的外观如何。您是否希望在根下有多个元素序列？我认为如果您的目标架构具有不同的根节点会更容易。

IE。

```
<Trips>
   <Trip>
      <Registration />
      <Distance />
      <Duration />
   </Trip>
</Trips> 
```

除非您使用 XSLT，否则我认为您无法保持元素序列的顺序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-02T18:34:00.850

看起来可以使用循环和逻辑相等 functoid 来完成。如果您可以提供您的实际模式或只是数据的子样本，那么它会更容易弄清楚。

上面显示的源模式看起来你应该能够只使用循环 functoid 来做到这一点，因为你可以有多个 .

# version-control - 在 Perforce 中，切换客户端用户时连接到不同端口的命令是什么？

> ID：322294
> 
> 赞同：4
> 
> 时间：2008-11-26T21:52:10.230
> 
> 标签：version-control, command-line, command, perforce

在 p4win gui 客户端中找到的“切换端口客户端用户”的命令行等效项是什么？

我已经在一个端口下登录，但现在我试图连接到同一服务器上的不同端口，以便访问单独的源代码控制文件库。我认为这将涉及使用：

```
p4 login 
```

但是，阅读“登录”的“帮助”不会显示指定端口号的选项。用户名和客户端名称将保持不变，但只需要更改端口号。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2008-11-26T22:07:06.893

P4PORT 配置变量存储要连接的 Perforce 服务器名称和端口号。您可以将此值设置为环境变量，或者，如果您使用的是 Windows，则可以在注册表中使用“p4 set”：

```
p4 set P4PORT=perforce:1669 
```

要查看 P4PORT 的当前值是多少：

```
> p4 set P4PORT
P4PORT=perforce:1669 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-12-01T13:21:22.057

如果您想对任何 P4 命令通用地执行此操作，则可以通过“p4 help usage”找到通用形式。

简而言之，

```
p4 -p <your port> login 
```

会做你要求的。从使用帮助中可以看出，您可以从命令行指定大多数内容，例如客户端规范、用户名、密码等。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-11-26T22:22:21.527

例如：

```
p4 set P4PORT=1666 
```

从帮助：

```
C:\> p4 help environment

Environment variables used by Perforce:

    Variable    Defines                          For more information see
    --------    -------                          ------------------------
    P4AUDIT     name of server audit file        p4d -h
    P4CHARSET   client's local character set     p4 help charset
    P4COMMANDCHARSET client's local character set for
                command line operations          p4 help charset
    P4CLIENT    name of client workspace         p4 help client
                                                 p4 help usage
    P4CONFIG    name of configuration file       Command Reference Manual
    P4DIFF      diff program to use on client    p4 help diff
    P4DIFFUNICODE diff program to use on client  p4 help diff
    P4EDITOR    editor invoked by p4 commands    p4 help change, etc
    P4HOST      name of host computer            p4 help client
                                                 p4 help usage
    P4JOURNAL   name of server journal file      p4d -h
    P4LANGUAGE  language for text messages       p4 help usage
    P4LOG       name of server log file          p4d -h
    P4MERGE     merge program to use on client   p4 help resolve
    P4MERGEUNICODE merge program to use on client p4 help resolve
    P4PAGER     pager for 'p4 resolve' output    p4 help resolve
    P4PASSWD    user password passed to server   p4 help passwd
    P4PORT      port client connects to          p4 help info
                or server listens on             p4d -h
    P4ROOT      server root directory            p4d -h
    P4TARGET    target server for proxy          Command Reference Manual
    P4TICKETS   location of tickets file         Command Reference Manual
    P4USER      user name                        p4 help usage
    PWD         current working directory        p4 help usage
    TMP, TEMP   directory for temporary files    Command Reference Manual

See 'p4 help set' for details specific to Windows.  The syntax for
setting an environment variable depends on the OS/shell.  Note that many
shells allow the setting of shell variables separate from environment
variables - Perforce cannot see the shell variable, only the environment
variable.

If you are a typical user then the only variables of interest are
$P4CLIENT, $P4PORT and $P4PASSWD.

C:\> p4 help set

set -- Set variables in the registry (Windows only)

p4 set [ -s -S service ] [ var=[value] ]

    'p4 set' sets the registry variables used by Perforce on Windows
    platforms.  Normally, the variable 'var' is set to 'value'.
    If 'value' is missing, the variable 'var' is unset.  Without
    any arguments at all, 'p4 set' list variable settings.

    The -s flag causes 'p4 set' to set variables for the whole system
    rather than for the user.  You must have NT administrator powers
    to use this.

    The -S service flag causes 'p4 set' to set variables for the named
    service.  You must have NT administrator powers to use this.

    Currently, registry variable entries may be overridden by environment
    variables and (in some cases) flags on the command line.
    See 'p4 help environment' for a list of environment/registry variables. 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-11-26T23:15:00.003

您可以使用配置文件为每个项目设置 Perforce 连接的端口。

首先，创建一个文本文件，其中包含您要为项目设置的 Perforce 配置变量。例如，要设置 P4PORT 的值，文件的内容将如下所示：

```
P4PORT=hostname:1234 
```

将文件命名为**.p4config**之类的描述性文件，并将其放在项目文件夹的根目录中。为您的每个项目执行此操作，并根据需要更改变量。 *使用相同的文件名。*

然后，将 P4CONFIG 的值设置为配置文件的名称，例如

```
p4 set P4CONFIG=.p4config 
```

这将使 Perforce 在当前目录或任何父目录中的该名称的文件中查找配置值，因此您不必在每次切换项目时手动更改配置变量。

# java - 如何从 Java 向 Outlook 发送 html 电子邮件

> ID：322298
> 
> 赞同：18
> 
> 时间：2008-11-26T21:53:57.840
> 
> 标签：java, email, jakarta-mail

我正在尝试使用 JavaMail 以 html 格式发送电子邮件，但它似乎总是仅在 Outlook 中显示为文本电子邮件。

这是我的代码：

```
try 
{
    Properties props = System.getProperties();
    props.put("mail.smtp.host", mailserver);
    props.put("mail.smtp.from", fromEmail);
    props.put("mail.smtp.auth", authentication);
    props.put("mail.smtp.port", port);
    Session session = Session.getDefaultInstance(props, null);      

    // -- Create a new message --
    MimeMessage message = new MimeMessage(session);

    // -- Set the FROM and TO fields --
    message.setFrom(new InternetAddress(fromEmail, displayName));
    message.setRecipients(Message.RecipientType.TO, InternetAddress.parse(to, false));

    MimeMultipart content = new MimeMultipart();
    MimeBodyPart text = new MimeBodyPart();
    MimeBodyPart html = new MimeBodyPart();

    text.setText(textBody);
    text.setHeader("MIME-Version" , "1.0" );
    text.setHeader("Content-Type" , text.getContentType() );

    html.setContent(htmlBody, "text/html");
    html.setHeader("MIME-Version" , "1.0" );
    html.setHeader("Content-Type" , html.getContentType() );

    content.addBodyPart(text);
    content.addBodyPart(html);

    message.setContent( content );
    message.setHeader("MIME-Version" , "1.0" );
    message.setHeader("Content-Type" , content.getContentType() );
    message.setHeader("X-Mailer", "My own custom mailer");

    // -- Set the subject --
    message.setSubject(subject);

    // -- Set some other header information --
    message.setSentDate(new Date());

    // INFO: only SMTP protocol is supported for now...
    Transport transport = session.getTransport("smtp");
    transport.connect(mailserver, username, password);
    message.saveChanges();

    // -- Send the message --
    transport.sendMessage(message, message.getAllRecipients());
    transport.close();

    return true;

} catch (Exception e) {
    LOGGER.error(e.getMessage(), e);
    throw e;
} 
```

任何想法为什么电子邮件的 html 版本不会显示在 Outlook 中？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2008-11-27T20:33:39.967

经过大量的调查，我已经能够取得一些重大进展。

首先，我推荐使用[Jakarta Commons Email](http://commons.apache.org/email/)库，而不是直接使用 JavaMail。这确实简化了很多问题！

现在的代码是：

```
HtmlEmail email = new HtmlEmail();

email.setHostName(mailserver);
email.setAuthentication(username, password);
email.setSmtpPort(port);
email.setFrom(fromEmail);
email.addTo(to);
email.setSubject(subject);

email.setTextMsg(textBody);
email.setHtmlMsg(htmlBody);

email.setDebug(true);

email.send(); 
```

讲简单。

但是，仍然存在一个问题。电子邮件的 html 版本在 Gmail、Hotmail 等中运行良好。但它仍然无法在 Outlook 中正确显示。它总是想显示文本版本，我不知道为什么。我怀疑这是 Outlook 中的设置，但我找不到它...

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-11-26T22:42:58.367

除了`html.setHeader("Content-Type", html.getContentType())` 按照建议删除呼叫之外，我还将替换该行：

```
MimeMultipart content = new MimeMultipart(); 
```

…和：

```
MimeMultipart content = new MimeMultiPart("alternative"); 
```

...并删除该行：

```
message.setHeader("Content-Type" , content.getContentType() ); 
```

默认的 MimeMultiPart 构造函数可能会导致“多部分/混合”内容类型出现问题。

当使用 multipart/alternative 时，替代品按照它们对原件的忠实程度排序，最好的再现在最后。但是，客户端通常会为用户提供显示纯文本的选项，即使存在 HTML 也是如此。您确定 Outlook 中未启用此选项吗？其他用户代理（如 Thunderbird 或 GMail）如何处理您的邮件？

此外，请确保 HTML 格式正确。我会使用[W3 验证服务](http://validator.w3.org/#validate_by_input+with_options)验证 HTML 内容，并可能将其保存到文件中并使用不同版本的 IE 进行查看。也许那里有一个缺陷导致 Outlook 回退到纯文本。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-11-26T22:03:39.693

```
html.setContent(htmlBody, "text/html");
html.setHeader("MIME-Version" , "1.0" );
html.setHeader("Content-Type" , html.getContentType() ); 
```

`setContent`并`setHeader("Content-Type", String)`做同样的事情 - 是否有可能`html.getContentType()`返回其他东西`text/html`？

根据评论和@PhilLho & @erickson 的回答进行扩展（天啊，我必须慢慢打字），使用：

```
MimeMultipart content = new MimeMultipart("alternative") 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2010-01-12T15:09:47.233

将此更改为：

```
message.setContent(new String(sBuffer.toString().getBytes(), "iso-8859-1"), "text/html; charset=\"iso-8859-1\""); 
```

内容字符集需要设置，我不明白为什么内容本身。应该是：

```
message.setContent(sBuffer.toString(), "text/html;charset=iso-8859-1"); 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-09-20T07:04:00.190

我使用了以下代码：

```
mimeBodyPart1.setDataHandler(new DataHandler(new ByteArrayDataSource(messageBody, "text/html; charset=utf-8")));
multiPart.addBodyPart(mimeBodyPart1);
message.setContent(multiPart, "text/html; charset=utf-8"); 
```

现在，*Outlook*以*html*格式显示。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-11-26T22:32:25.470

您应该查看接收到的消息的来源：消息的 Content-Type 是 multipart/alternative 吗？

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2010-09-14T06:08:19.233

```
message.setContent(new String(sBuffer.toString().getBytes(), "iso-8859-1"), "text/html; charset=iso-8859-1"); 
```

应该解决您的问题（删除`\"`字符）。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-03-10T15:15:57.473

workaroung 解决方案已解决 Outlook 2003：此消息使用 Internet 服务不支持的字符集。无法正确显示。

这可能是由于编码。大多数 html 页面使用 iso-8859-1 而不是 cp-1252 尝试更改

例如，您的代码是：

```
message.setContent(sBuffer.toString(), "text/html"); 
```

将其更改为：

```
message.setContent(new String(sBuffer.toString().getBytes(), "iso-8859-1"), "text/html; charset=\"iso-8859-1\""); 
```

这会引发一个新的检查异常：java.io.UnsupportedEncodingException，因此您需要声明它被抛出或捕获。支持 iso-8859-1 因此，除非您的 rt.jar 损坏了某些内容，否则永远不会引发异常。

问候， 贾维德 javeed.mca@gmail.com

# performance - AQTime是如何做到的？

> ID：322315
> 
> 赞同：12
> 
> 时间：2008-11-26T22:02:29.743
> 
> 标签：performance, profiler, profiling, aqtime

我一直在测试[性能和内存分析器 AQTime](http://www.automatedqa.com/products/aqtime/)，看看是否值得为我的 Delphi 应用程序花费大笔资金。

令我惊讶的是，它如何在不修改应用程序的源代码和不增加过多时间到调试运行。

他们如此有效地执行此操作的方式使我认为这里可能使用了一些我不知道的技术/技术，这对了解会很有用。

你知道他们使用什么样的方法来逐行捕获执行而无需更改代码？

是否还有其他分析工具也可以进行非侵入性逐行检查，如果有，它们是否使用相同的技术？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-03-23T08:38:07.057

我为 Delphi 制作了一个开源分析器，它做同样的事情： [http ://code.google.com/p/asmprofiler/](http://code.google.com/p/asmprofiler/)

它并不完美，但它是免费的:-)。也是使用Detour技术。它存储每个呼叫（您必须手动设置要分析的功能），因此它可以制作准确的呼叫历史树，包括时间表（！）。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2008-11-27T04:37:52.283

这只是猜测，但也许 AQtime 是基于类似于[Microsoft Detours](http://research.microsoft.com/sn/detours/)的技术？

> Detours 是一个库，用于在 x86、x64 和 IA64 机器上检测任意 Win32 函数。Detours 通过重写目标函数的内存代码来拦截 Win32 函数。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-11-26T22:07:03.523

我不特别了解 Delphi，但是 C 应用程序调试器可以相对轻松地进行逐行分析 - 它可以加载代码并将每个代码路径与代码块相关联。然后它可以中断所有条件跳转指令，然后观察并查看采用了什么代码路径。像 gdb 这样的调试器可以相对有效地运行，因为它们通过内核工作并且不修改代码，它们只是在每行执行时得到通知。如果某些事情导致块提前退出（longjmp），调试器可以挂钩并计算它发生时它进入块的距离并仅增加这些行。

当然，编写代码仍然很困难，但是当我说简单时，我的意思是您可以做到这一点，而无需浪费时间在每条指令上进行更新以更新计数器。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-11-26T22:24:06.890

早已不复存在的 TurboPower 还为 Delphi 提供了一个很棒的分析/分析工具，称为 Sleuth QA Suite。我发现它比 AQTime 简单得多，但也更容易获得有意义的结果。可能值得尝试追踪 - eBay，也许？

# asp.net - 如何使用 jQuery 和 AJAX 刷新 ASP.NET ListView？

> ID：322318
> 
> 赞同：3
> 
> 时间：2008-11-26T22:02:50.850
> 
> 标签：asp.net, jquery, ajax, data-binding

我有一个包含许多 ListViews 的页面，我希望用户能够对其进行排序和分页。而不是每次回发和重新绑定整个页面，我想通过 jQuery/AJAX 有选择地为有问题的控件执行此操作。我很乐意在我的页面中对 WebMethod 进行客户端调用 - 我的问题是如何通过 jQuery 将返回的数据返回到 ListView？

（注意：我不想使用 UpdatePanel！）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-11-26T22:09:41.490

我不确定是否真的可以在没有回发的情况下更新 ListView，只是因为 ListView 控件的底层数据模型。

拥有完整 AJAX 解决方案的最佳选择是使用 JavaScript 模板引擎。我在我的博客上使用 jTemplates 和 MS AJAX 库 v4 预览做了一个演示 - [http://www.aaron-powell.com/blog.aspx?id=1209](http://www.aaron-powell.com/blog.aspx?id=1209)

但是尽管普遍认为您*可以*使用 UpdatePanel 并使其高效，但我也在此处查看了该内容：[http](http://www.aaron-powell.com/blog.aspx?id=1195) ://www.aaron-powell.com/blog.aspx?id=1195 。使用 UpdatePanels 时要记住的最重要的事情是 ViewState。如果您不需要将 ViewState 保存在控件上，请确保将其关闭。通过这样做，您可以真正减少后期负载。删除空格也会有所帮助。

# php - MySQL 准备好的查询是否为每会话一次查询提供了性能优势？

> ID：322319
> 
> 赞同：4
> 
> 时间：2008-11-26T22:02:55.593
> 
> 标签：php, mysql, mysqli, prepared-statement, mdb2

根据文档，如果您多次运行查询，准备好的查询会提供显着的性能优势，因为 MySQL 服务器解析查询的开销只发生一次。我想知道那里的“多次”到底是什么意思。

即，假设您有一个网页运行一次查询。现在假设该页面每秒被调用 50 次。从性能的角度来看，prepare() 查询是否更有意义（因此需要两次往返数据库服务器；一次准备查询，一次运行查询）或仅正常发送查询（只需要一次往返） ? MySQL 和/或 PHP mysqli 驱动程序是否足够聪明，可以意识到在之前的调用中何时准备（）查询？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-11-26T22:06:33.883

不，PHP 是一种“无共享”架构，因此与一个请求（一个页面视图）关联的每个资源在该请求结束时都会被丢弃。准备好的查询不可用于后续的数据库连接。

*您将从准备好的查询中受益的场景是当您准备它并在同一个 PHP 请求*期间多次执行它时。

# c++ - 在 gdb 中显示取消引用的 STL 迭代器

> ID：322322
> 
> 赞同：12
> 
> 时间：2008-11-26T22:03:20.427
> 
> 标签：c++, stl, iterator, gdb, dbx

我有一个映射元素的迭代器，我希望 gdb 向我显示该迭代器的“第一个”和“第二个”元素的值。例如：

```
std::map<int,double> aMap;
...fill map...
std::map<int,double>::const_iterator p = aMap.begin(); 
```

我可以在代码中使用 p.first 和 p.second，但在 gdb 中看不到它们。对于它的价值，在 dbx 中可以执行“print p.node.second_”之类的操作，但我可以在 gbd 中找到类似的任何内容。

我完全愿意有一个函数来传递对象类型，但我也无法让它工作。

有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2008-11-26T22:16:37.170

这是我的做法：

```
This GDB was configured as "i686-pc-linux-gnu"...
(gdb) list
1       #include <iostream>
2       #include <map>
3
4       int main()
5       {
6           std::map<int, int> a;
7           a[10] = 9;
8           std::map<int, int>::iterator it = a.begin();
9           ++it;
10      }
(gdb) b test.cpp:9
Breakpoint 1 at 0x8048942: file test.cpp, line 9.
(gdb) r
Starting program: /home/js/cpp/a.out

Breakpoint 1, main () at test.cpp:9
9           ++it;
(gdb) set print pretty on
(gdb) p it
$1 = {
  _M_node = 0x94fa008
}
(gdb) p *it
$2 = (class std::pair<const int, int> &) @0x94fa018: {
  first = 10,
  second = 9
}
(gdb) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2010-01-28T20:14:36.223

您可以使用 p (*it)->second

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-08T01:29:08.060

您可以尝试[Archer](http://sourceware.org/gdb/wiki/ProjectArcher)，这是一个主要致力于改善 C++ 调试体验的 gdb 开发分支。单击[此处](http://people.redhat.com/ebachalo/video/archer-async-demo.swf)查看用于 C++ 的漂亮打印机演示。这个新项目还允许使用 python 脚本控制 gdb。主要开发人员[Tom Tromey](http://tromey.com/blog/?p=524)写了很多关于这个激动人心的项目的博客。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-18T12:34:45.517

我意识到这是一个老问题，但我认为我已经找到了“最好”的答案。在四处搜索时，我发现了一个很好地取消引用 stl 类型的 .gdbinit 文件。显然有很多版本的浮动，但这是我能找到的最新版本：

[http://www.yolinux.com/TUTORIALS/src/dbinit_stl_views-1.03.txt](http://www.yolinux.com/TUTORIALS/src/dbinit_stl_views-1.03.txt)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-11-26T22:16:52.430

`p`将是一个迭代器`std::pair<const int, double>`，所以你真正想要的是`p->first`. 不过，我认为 GDB 不能很好地处理重载运算符，因此您可能需要`p.`{some member that代表`pair`对象} `.first`。libstdc++有[Doxygen 文档](http://gcc.gnu.org/onlinedocs/libstdc++/latest-doxygen/)，所以你可以找出你想要的成员，在这种情况下它看起来是`((_Rb_tree_node<pair<const int, double> >*)(p._M_node))-> _M_value_field.first`. 因为这非常冗长，所以我会先检查运算符重载是否有效（不，我认为没有更简单的方法；抱歉）。您也可以尝试显式调用运算符，但我认为 gcc 也不能这样做（例如`it.operator*().first`）。

编辑：等等，litb 的帖子似乎表明 gcc 确实支持 *. 奇怪，我总是发现这不起作用！

# cocoa - 从 NSColor 中提取 32 位 RGBA 值

> ID：322333
> 
> 赞同：1
> 
> 时间：2008-11-26T22:07:19.547
> 
> 标签：cocoa, core-graphics

我有一个 NSColor，我真的想要它代表的 32 位 RGBA 值。有没有什么简单的方法可以得到这个，除了提取浮点组件，然后乘法和 ORing 并且通常做粗鲁的、依赖于字节序的事情吗？

编辑：感谢您的帮助。真的，我希望的是 Cocoa 功能已经做到了这一点，但我自己做这件事很酷。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-11-26T22:55:44.673

另一种更暴力的方法是创建一个临时的 CGBitmapContext 并填充颜色。

```
NSColor *someColor = {whatever};
uint8_t data[4];

CGContextRef ctx = CGBitmapContextCreate((void*)data, 1, 1, 8, 4, colorSpace, kCGImageAlphaFirst | kCGBitmapByteOrder32Big);

CGContextSetRGBFillColor(ctx, [someColor redComponent], [someColor greenComponent], [someColor blueComponent], [someColor alphaComponent]);

CGContextFillRect(ctx, CGRectMake(0,0,1,1));

CGContextRelease(ctx); 
```

FWIW，每个组件颜色值 8 位不存在字节序问题。字节顺序仅适用于 16 位或更大的整数。您可以按照您想要的任何方式布置内存，但是无论是大端还是小端机器，8 位整数值都是相同的。（我相信 ARGB 是 Core Graphics 和 Core Image 的默认 8 位格式）。

为什么不只是这个？：

```
uint32_t r = (uint32_t)(MIN(1.0f, MAX(0.0f, [someColor redComponent])) * 255.0f);
uint32_t g = (uint32_t)(MIN(1.0f, MAX(0.0f, [someColor greenComponent])) * 255.0f);
uint32_t b = (uint32_t)(MIN(1.0f, MAX(0.0f, [someColor blueComponent])) * 255.0f);
uint32_t a = (uint32_t)(MIN(1.0f, MAX(0.0f, [someColor alphaComponent])) * 255.0f);
uint32_t value = (r << 24) | (g << 16) | (b << 8) | a; 
```

然后你就知道它在内存中是如何布局的了。

或者这个，如果你更清楚的话：

```
uint8_t r = (uint8_t)(MIN(1.0f, MAX(0.0f, [someColor redComponent])) * 255.0f);
uint8_t g = (uint8_t)(MIN(1.0f, MAX(0.0f, [someColor greenComponent])) * 255.0f);
uint8_t b = (uint8_t)(MIN(1.0f, MAX(0.0f, [someColor blueComponent])) * 255.0f);
uint8_t a = (uint8_t)(MIN(1.0f, MAX(0.0f, [someColor alphaComponent])) * 255.0f);

uint8_t data[4];
data[0] = r;
data[1] = g;
data[2] = b;
data[3] = a; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-11-26T22:53:34.227

并非所有颜色*都有*RGBA 表示。它们可能在 RGBA 中有一个近似值，但这可能准确也可能不准确。此外，Core Graphics 将“颜色”绘制为图案（例如，某些 Mac OS X 版本上的窗口背景颜色）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-11-26T22:19:21.613

将 4 个浮点数转换为它们的整数表示，但是你想实现它，是唯一的方法。

# apache-flex - 有没有办法以编程方式从闪存中删除所有本地共享对象？

> ID：322345
> 
> 赞同：2
> 
> 时间：2008-11-26T22:12:11.643
> 
> 标签：apache-flex, flash, actionscript

我在闪存中使用本地共享对象来存储大量用户数据，以及缓存从服务器获取的数据。

但是，我非常担心达到 100kb 默认限制。因为 100kb 限制是针对整个域的，所以我担心多个本地共享对象的总和会超过 100kb，但每个单独的共享对象会小于 100kb。此外，我终生无法找到列出或清除给定域的所有本地共享对象的方法。

假设您创建了具有随机名称的共享对象，向每个共享对象添加随机数据，这样您就达到了 100kb 的限制。如果您不知道每个对象的名称，有没有办法删除这些共享对象？或者你注定要让弹出窗口要求用户增加共享对象的存储空间量？如果后者是真的，这似乎是 Flash 本地共享对象设计的一个重大缺陷。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-11-27T03:12:45.000

这是否是一个缺陷是有争议的，但无论如何我相信你是正确的，没有办法做到这一点。它的设计是这样设计的 - 默认情况下，SharedObjects 只能由创建它们的 SWF 删除，或者由指定的“localPath”中的 SWF 删除（如果已指定）。该功能是专门设计的，因此来自给定域的一个 SWF 不能删除属于另一个 SWF 的 SharedObject，除非您以这种方式进行设置。

毕竟，您通常不希望恰好提供的广告横幅`citibank.com/adbanners`能够从该站点的贷款模拟器（或其他）访问（在这种情况下删除）SharedObjects。

# flash - Flash Designer 中的 AS3 组件

> ID：322361
> 
> 赞同：2
> 
> 时间：2008-11-26T22:20:46.913
> 
> 标签：flash, actionscript-3, actionscript

在 ActionScript 2 项目中，我可以创建一个新的 MovieClip，在库上右键单击它并选择“组件定义”以添加可以在 MovieClip 中引用的参数。可以在 MovieClip 的属性中轻松更改此参数。

现在，我正在处理一个 ActionScript 3 项目，但还没有找到一种方法来获取在这些参数中传递的值。

我定义了一个名为“textToDisplay”的参数，但是当我在第一帧的 Actions 中编写以下内容时，出现错误：

```
trace(textToDisplay); 
```

这是错误：

```
1120: Access of undefined property textToDisplay. 
```

您知道如何捕获该参数的值吗？

谢谢

PS：我在 Windows XP 上使用 Adob​​e Flash CS3 Professional

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-02T02:28:13.230

考虑到查找有关自定义组件设置的信息有多么困难，我想我会根据我的经验来澄清该过程的某些方面。

初始化事件：

在大多数情况下，上面的 aaaidan 示例是正确的，但有一个例外。

```
addEventListener(Event.INIT, onInit); 
```

应该：

```
loaderInfo.addEventListener(Event.INIT, onInit); 
```

DisplayObject 的 loaderInfo 属性引用了一个 LoaderInfo，您的组件从中获取其参数设置。INIT 事件在它获取数据后被调用（或者你可以使用 COMPLETE 事件，它应该在 INIT 之后直接触发）

可检查的元数据：

当您使用元数据 [Inspectable] 标记设置要访问的属性时，您还可以使用以下方法定义默认值：

```
 [Inspectable(defaultValue="whatevervalue")] 
```

根据我的经验，参数似乎无法处理除字符串（可能还有数字）以外的任何内容，因此我建议使用获取字符串值的 set 函数并使用它们来获取您可能想要的其他值。例如，如果您想加载特定命名类的新实例

```
 [Inspectable(defaultValue="flash.display.Sprite")]
public function set className(value:String):void{
       var ClassReference:Class = getDefinitionByName(value) as Class;
       _class = new ClassReference();
} 
```

在此示例中，如果参数设置为“flash.display.Sprite”，则调用“new _class()”将创建一个新的 Sprite 实例。

设置功能：

如果您希望自定义组件以其他方式调整大小，而不是简单地拉伸高度和宽度值，则需要公共 setSize 函数。每次在 Flash 中调整组件大小时都会调用此函数。

```
public function setSize(w:Number, h:Number):void{
   _menuWidth = w;
   _menuHeight = h;
} 
```

现在，当您在 Flash 中调整组件的大小时，这非常有用，但是一旦您实际发布了 swf 文件，您会注意到它切换回拉伸宽度和高度，而不是使用您的 setSize 函数（我不知道为什么，但这就是它的作用）。要解决此问题，您需要在 onInit 函数中获取宽度和高度，将它们输入您的 setSize，然后将 scaleX 和 scaleY 值重置回 1 ：

```
public function onInit(e:Event):void{
   setSize(width,height);
   scaleX = 1;
   scaleY = 1;
   //add other functions that need to be run once the parameters are loaded
} 
```

（如果有人发现这样做不那么混乱的方式让知道）

希望这可以帮助某人启动并运行他们的自定义组件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-11-30T23:03:17.233

在 as3 中，您必须创建一个外部类文件，其中`public var`包含您将使用的一个或多个声明（您也可以使用 public `get`/`set`函数）。如果您不确定如何使用，请在 Google 上搜索。

在您的外部文件中，使用`[Inspectable]`您之前的元数据标签`var`，如下所示：

```
package myPackage {
  import flash.display.MovieClip;

  public class MyComponent extends MovieClip {

    [Inspectable]
    public var myFancyComponentParameter:String;

    [Inspectable]
    public var myOtherFancyComponentParameter:int;

  }

} 
```

然后您可以打开“组件定义”对话框，将“类”字段设置为外部类的名称（包括包名称），Flash 将根据您的`[Inspectable]`标签自动为您的组件创建参数。或者您可以手动创建它们。

设置完成后，您可以在时间线代码中访问组件变量：

```
trace("Here's my var: " + myFancyComponentParameter); 
```

[元数据 livedocs](http://livedocs.adobe.com/flex/3/html/help.html?content=metadata_3.html)中提供了有关标签的详细信息`[Inspectable]`（包括数据类型）。

如果您希望外部类执行任何操作而不是保存组件值，那么在“链接”对话框中设置类名称也是一个好主意。

我还建议将代码放在您的外部类中，而不是放在时间线中。这种方式更具扩展性。如果您这样做，请记住您的组件参数要等到`INIT`事件触发后才会设置。以下是如何收听的：

```
// package and import statements omitted for brevity
public class MyComponent extends MovieClip {

  [Inspectable]
  public var myFancyComponentParameter:String;

  public function MyComponent() {
    // myFancyComponentParameter not set here yet
    trace(myFancyComponentParameter); // prints null
    addEventListener(Event.INIT, onInit);
  }

  public function onInit(e:Event) {
    // now we can use component parameters!
    trace(myFancyComponentParameter); // prints the param value
  }

} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2010-12-04T16:17:27.303

终于让它工作了（使用基本的 MovieClips，到目前为止没有太多扩展）。我有两点要补充：

1.  需要为 ActionScript 导出符号（即具有**链接**定义）。只在组件定义中设置类是不行的。如果没有导出设置，`[Inspectable]`标签会被解释，但其余代码会被完全忽略。甚至在类的构造函数中。
2.  标签中的**默认**值在`[Inspectable]`编译时似乎不起作用，或者它会导致`null`. 我只使用了一个字符串，它位于“组件参数”框中，但可以追溯到`null`. 即使在之后`Event.INIT`（我正在点击跟踪）。这似乎不是“值未结转”的情况，因为手动输入默认值仍然会导致`null`. 设置默认值`[Inspectable]`有效地定义了一个不能使用的值。

PS使用CS5。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-11-27T08:43:43.600

我没有使用过这个特定的功能，但您可能需要为该 MovieClip 定义一个自定义类（只是 MovieClip 的子类）并添加那个额外的变量。Actionscript 3 已经脱离了 actionscript 2 的动态特性，开始时可能会有些混乱，但最终它更加健壮。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-02-20T22:44:09.247

我在 MovieClip 类定义中没有看到 INIT 事件，而且它似乎没有被调用。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-03-11T09:29:11.653

我遇到了同样的问题——MovieClip 没有 INIT 事件——但除此之外，这个解决方案可以正常工作。我能看到解决这个问题的唯一方法是使用 Event.ENTER_FRAME 并在第一次调用处理程序时再次删除侦听器。我的组件参数可以从下一帧开始访问，但我发现在实例化影片剪辑时不存在官方事件令人惊讶。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-03-16T03:55:43.703

有一个 ADDED_TO_STAGE 事件比 steve-mann 建议的 ENTER_FRAME 事件效果更好。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-05-20T21:12:08.987

在 CS4 10.0.2 版本中，您可以再次右键单击并手动添加组件参数。

需要注意的两点：

1.  您仍然需要等待 loaderInfo Event.INIT 才能引用自定义值（即：loaderInfo.addEventListener(Event.INIT, initComponent)
2.  您需要在第一帧 (var paramName) 上定义参数，以便能够在没有编译器错误的情况下引用它。

希望这可以帮助你......我知道它帮助了我！

〜格雷格

# sql-server-2005 - SQL CLR 函数和 OleDb 权限

> ID：322364
> 
> 赞同：2
> 
> 时间：2008-11-26T22:22:03.043
> 
> 标签：sql-server-2005

我有一个 .NET 3.5 C# 库，它使用 OleDb 从 Excel 文件中提取数据并在 SQL Server 2005 中的 CLR 表值函数使用的 DataRowCollection 中返回它。

`ASSEMBLY`我将SQL Server 中的部署为 sa 并使用`PERMISSION_SET = EXTERNAL_ACCESS`. sa 登录已`EXTERNAL ACCESS ASSEMBLY`打开，数据库已`TRUSTWORTHY`打开。

程序集已签名，我使用了以下 caspol.exe 命令，表明它是成功的：

```
-m -ag All_Code -url "C:\Testing\sqlFunction.dll" FullTrust -n "sqlFunction" 
```

SQL Server 实例、我的库和 Excel 文档都在同一台机器上。

SQL Server 服务作为本地系统运行（但在尝试使其工作时，我还尝试以我登录的 AD 用户身份运行它，该用户也是本地管理员）。

我创建了一个命令行应用程序来测试运行库，一切运行良好，数据按预期返回。

但是当我从 SSMS 运行该函数时，我在结果窗格中收到此错误：

> 在执行用户定义的例程或聚合“GetExcelFile”期间发生 .NET Framework 错误：
> System.Security.SecurityException：请求类型为“System.Data.OleDb.OleDbPermission, System.Data, Version=2.0.0.0,文化=中性，PublicKeyToken=b77a5c561934e089' 失败。
> System.Security.SecurityException：
> 在 System.Security.CodeAccessSecurityEngine.Check(Object demand, StackCrawlMark& stackMark, Boolean isPermSet)
> 在 System.Security.PermissionSet.Demand()
> 在 System.Data.Common.DbConnectionOptions.DemandPermission()
> 在 System.Data .OleDb.OleDbConnection.PermissionDemand()
> 在 System.Data.OleDb.OleDbConnectionFactory.PermissionDemand(DbConnection outerConnection)
> 在 System.Data.ProviderBase.DbConnectionClosed.OpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory)
> 在 System.Data.OleDb.OleDbConnection.Open()
> 在 System.Data.Common.DbDataAdapter.QuietOpen(IDbConnection connection, ConnectionState& originalState)
> 在 System.Data .Common.DbDataAdapter.FillInternal(DataSet dataset, DataTable[] datatables, Int32 startRecord, Int32 maxRecords, String srcTable, IDbCommand command, CommandBehavior behavior)
> at System.Data.Common.DbDataAdapter.Fill(DataTable[] dataTables, Int32 startRecord, Int32 MaxRecords，IDbCommand 命令，CommandBehavior 行为）
> 在 System.Data.Common.DbDataAdapter.Fill(DataTable dataTable)
> 在 GetExcelFunction.GetFile()
> 在 GetExcelFunction.InitMethod（字符串日志名称）

我已经在我的个人开发机器（XP PRO）和我们的开发沙箱（Server 2003）上部署了它，并得到了同样的错误。

大多数代码访问安全问题都围绕着从网络共享运行的程序集——但这里的情况并非如此。

有任何想法吗？我被淘汰了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-11-27T20:10:52.947

解决了！

PERMISSION_SET = EXTERNAL_ACCESS 还不够。我不得不一直到 PERMISSION_SET = UNSAFE 然后它开始工作。我不敢相信我以前没有尝试过。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-11-27T04:23:37.540

很抱歉，我没有为这里的确切问题提供解决方案。

但是，您可以使用 OPENROWSET 函数来处理 SQL Server 中的 Excel 文件。CLR 不是必需的，除非有我不知道的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-27T05:57:55.120

我正在使用反射器查看代码。我纯粹是在推测查看代码。

尝试初始化 System.Data.OleDb.OleDbPermission 类并使用它的 Add 方法来包含 excel 连接字符串以获得权限（在连接打开或查询执行之前）。

我希望这会有所帮助。

# javascript - JavaScript：检查鼠标按钮是否按下？

> ID：322378
> 
> 赞同：160
> 
> 时间：2008-11-26T22:29:23.167
> 
> 标签：javascript, input, mouse, user-input, input-devices

有没有办法检测鼠标按钮当前是否在 JavaScript 中被按下？

我知道“mousedown”事件，但这不是我需要的。按下鼠标按钮后的一段时间，我希望能够检测它是否仍然被按下。

这可能吗？

* * *

## 回答 #1

> 赞同：163
> 
> 时间：2008-11-27T02:53:36.613

关于 Pax 的解决方案：如果用户有意或无意地单击多个按钮，则它不起作用。不要问我是怎么知道的:-(。

正确的代码应该是这样的：

```
var mouseDown = 0;
document.body.onmousedown = function() { 
  ++mouseDown;
}
document.body.onmouseup = function() {
  --mouseDown;
} 
```

通过这样的测试：

```
if(mouseDown){
  // crikey! isn't she a beauty?
} 
```

如果您想知道按下了哪个按钮，请准备好将 mouseDown 设为一个计数器数组，并为单独的按钮分别计数：

```
// let's pretend that a mouse doesn't have more than 9 buttons
var mouseDown = [0, 0, 0, 0, 0, 0, 0, 0, 0],
    mouseDownCount = 0;
document.body.onmousedown = function(evt) { 
  ++mouseDown[evt.button];
  ++mouseDownCount;
}
document.body.onmouseup = function(evt) {
  --mouseDown[evt.button];
  --mouseDownCount;
} 
```

现在您可以检查确切按下了哪些按钮：

```
if(mouseDownCount){
  // alright, let's lift the little bugger up!
  for(var i = 0; i < mouseDown.length; ++i){
    if(mouseDown[i]){
      // we found it right there!
    }
  }
} 
```

现在请注意，上面的代码仅适用于向您传递从 0 开始的按钮编号的标准兼容浏览器。IE 使用当前按下按钮的位掩码：

*   0 表示“没有任何内容被按下”
*   1 为左
*   2 右
*   4 中间
*   以及以上的任意组合，例如，5 代表左 + 中

所以相应地调整你的代码！我把它留作练习。

**请记住：IE 使用了一个全局事件对象，称为……“事件”。**

顺便说一句，IE 有一个对您的情况有用的功能：当其他浏览器仅为鼠标按钮事件（onclick、onmousedown 和 onmouseup）发送“按钮”时，IE 也会使用 onmousemove 发送它。因此，当您需要知道按钮状态时，您可以开始监听 onmousemove，并在获得后立即检查 evt.button - 现在您知道按下了哪些鼠标按钮：

```
// for IE only!
document.body.onmousemove = function(){
  if(event.button){
    // aha! we caught a feisty little sheila!
  }
}; 
```

当然，如果她装死不动，你什么也得不到。

相关链接：

*   [MouseEvent 的按钮 (DOM 2)](http://www.w3.org/TR/DOM-Level-2-Events/events.html#Events-MouseEvent-button)
*   [MSDN 的按钮](http://msdn.microsoft.com/en-us/library/ms533544(VS.85).aspx)

***更新 #1**：我不知道为什么我继承了 document.body 样式的代码。将事件处理程序直接附加到文档会更好。*

* * *

## 回答 #2

> 赞同：57
> 
> 时间：2018-02-25T05:58:54.183

这是一个古老的问题，这里的答案似乎主要提倡使用`mousedown`并`mouseup`跟踪是否按下按钮。但正如其他人指出的那样，`mouseup`只有在浏览器中执行时才会触发，这可能导致按钮状态丢失。

但是，[MouseEvent](https://developer.mozilla.org/en-US/docs/Web/API/MouseEvent) (now) 指示当前按下了哪些按钮：

*   对于所有现代浏览器（包括 Safari v11.1+ [iOS 上的 v11.3+]），请使用[`MouseEvent.buttons`](https://developer.mozilla.org/en-US/docs/Web/API/MouseEvent/buttons)
*   对于 Safari < 11.1（iOS 上为 11.3），使用[`MouseEvent.which`](https://developer.mozilla.org/en-US/docs/Web/API/MouseEvent/which)（`buttons`对于 Safari 将未定义）注意：使用与右键和中键`which`不同的数字。`buttons`

在 上注册时`document`，`mousemove`一旦光标重新进入浏览器，就会立即触发，因此如果用户在外部释放，那么一旦鼠标回到内部，状态就会更新。

一个简单的实现可能如下所示：

```
var primaryMouseButtonDown = false;

function setPrimaryButtonState(e) {
  var flags = e.buttons !== undefined ? e.buttons : e.which;
  primaryMouseButtonDown = (flags & 1) === 1;
}

document.addEventListener("mousedown", setPrimaryButtonState);
document.addEventListener("mousemove", setPrimaryButtonState);
document.addEventListener("mouseup", setPrimaryButtonState); 
```

该代码跟踪主鼠标按钮（通常是左键）的状态，忽略其他鼠标按钮的状态。

如果需要更复杂的场景（不同的按钮/多个按钮/控制键），请查看`MouseEvent`文档。

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2008-11-27T00:48:03.373

我认为最好的方法是保留自己的鼠标按钮状态记录，如下所示：

```
var mouseDown = 0;
document.body.onmousedown = function() { 
    mouseDown = 1;
}
document.body.onmouseup = function() {
    mouseDown = 0;
} 
```

然后，稍后在您的代码中：

```
if (mouseDown == 1) {
    // the mouse is down, do what you have to do.
} 
```

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2010-12-26T08:14:39.987

解决方案不好。可以在文档上“mousedown”，然后在浏览器外“mouseup”，在这种情况下，浏览器仍会认为鼠标已关闭。

唯一好的解决方案是使用 IE.event 对象。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2016-02-04T23:32:57.173

我知道这是一篇旧帖子，但我认为使用鼠标向上/向下跟踪鼠标按钮感觉有点笨拙，所以我找到了一个可能吸引某些人的替代方法。

```
<style>
    div.myDiv:active {
        cursor: default;
    }
</style>

<script>
    function handleMove( div ) {
        var style = getComputedStyle( div );
        if (style.getPropertyValue('cursor') == 'default')
        {
            // You're down and moving here!
        }
    }
</script>

<div class='myDiv' onmousemove='handleMove(this);'>Click and drag me!</div> 
```

:active 选择器比鼠标向上/向下更好地处理鼠标单击，您只需要一种在 onmousemove 事件中读取该状态的方法。为此，我需要作弊并依靠默认光标是“自动”这一事实，我只是将其更改为“默认”，这是默认情况下自动选择的。

您可以使用 getComputedStyle 返回的对象中的任何内容，您可以将其用作标志而不会破坏页面的外观，例如边框颜色。

我本来想在 :active 部分设置我自己的用户定义样式，但我无法让它工作。如果可以的话就更好了。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2017-12-21T18:47:58.703

如果您正在使用现有鼠标事件处理程序在复杂页面中工作，我建议您在**捕获**时处理事件（而不是气泡）。为此，只需将第三个参数设置`addEventListener`为`true`。

此外，您可能需要检查`event.which`以确保您正在处理实际的用户交互而不是鼠标事件，例如`elem.dispatchEvent(new Event('mousedown'))`.

```
var isMouseDown = false;

document.addEventListener('mousedown', function(event) { 
    if ( event.which ) isMouseDown = true;
}, true);

document.addEventListener('mouseup', function(event) { 
    if ( event.which ) isMouseDown = false;
}, true); 
```

将处理程序添加到文档（或窗口）而不是 document.body 很重要，因为它确保仍然记录*窗口外的mouseup 事件。*

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2008-11-27T00:34:42.477

以下代码片段将在 document.body 中的 mouseDown 事件发生 2 秒后尝试执行“doStuff”函数。如果用户抬起按钮，mouseUp 事件将发生并取消延迟执行。

我建议使用某种方法来附加跨浏览器事件 - 显式设置 mousedown 和 mouseup 属性是为了简化示例。

```
function doStuff() {
  // does something when mouse is down in body for longer than 2 seconds
}

var mousedownTimeout;

document.body.onmousedown = function() { 
  mousedownTimeout = window.setTimeout(doStuff, 2000);
}

document.body.onmouseup = function() {
  window.clearTimeout(mousedownTimeout);
} 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2008-11-27T00:54:48.460

您可以结合@Pax 和我的答案来获得鼠标按下的持续时间：

```
var mousedownTimeout,
    mousedown = 0;

document.body.onmousedown = function() {
  mousedown = 0; 
  window.clearInterval(mousedownTimeout);
  mousedownTimeout = window.setInterval(function() { mousedown += 200 }, 200);
}

document.body.onmouseup = function() {
  mousedown = 0;
  window.clearInterval(mousedownTimeout);
} 
```

然后后来：

```
if (mousedown >= 2000) {
  // do something if the mousebutton has been down for at least 2 seconds
} 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2008-11-29T22:29:21.250

您需要处理 MouseDown 和 MouseUp 并设置一些标志或其他东西以“稍后”跟踪它...... :(

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2012-08-12T14:07:50.577

## 短而甜

我不确定为什么以前的答案都不适合我，但我在灵光乍现的时刻想出了这个解决方案。它不仅有效，而且最优雅：

添加到正文标签：

```
onmouseup="down=0;" onmousedown="down=1;" 
```

然后测试并执行`myfunction()`if `down`equals `1`：

```
onmousemove="if (down==1) myfunction();" 
```

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2014-01-04T20:12:41.163

使用 jQuery，以下解决方案甚至可以处理“拖出页面然后发布案例”。

```
$(document).mousedown(function(e) {
    mouseDown = true;
}).mouseup(function(e) {
    mouseDown = false;
}).mouseleave(function(e) {
    mouseDown = false;
}); 
```

我不知道它如何处理多个鼠标按钮。如果有办法在窗口外开始单击，然后将鼠标带入窗口，那么这可能也无法正常工作。

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2019-07-24T10:47:47.097

使用[MouseEvent](https://developer.mozilla.org/en-US/docs/Web/API/MouseEvent) api，检查按下的按钮，如果有的话：

```
document.addEventListener('mousedown', (e) => console.log(e.buttons))
```

[返回](https://developer.mozilla.org/en-US/docs/Web/API/MouseEvent/buttons#Return_value)：

> 代表一个或多个按钮的数字。对于同时按下一个以上的按钮，这些值会组合在一起（例如，3 是主要的 + 次要的）。
> 
> ```
> 0 : No button or un-initialized
> 1 : Primary button (usually the left button)
> 2 : Secondary button (usually the right button)
> 4 : Auxilary button (usually the mouse wheel button or middle button)
> 8 : 4th button (typically the "Browser Back" button)
> 16 : 5th button (typically the "Browser Forward" button) 
> ```

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2021-05-24T18:23:29.147

如果其他人遇到这种情况，您可以使用`.matches`选择`:active`器：

```
function mouseDown() {
    return document.body.matches(":active");
} 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2015-06-25T05:05:13.440

在 jQuery 示例下面，当鼠标悬停在 $('.element') 上时，颜色会根据按下的鼠标按钮而改变。

```
var clicableArea = {
    init: function () {
        var self = this;
        ('.element').mouseover(function (e) {
            self.handlemouseClick(e, $(this));
        }).mousedown(function (e) {
            self.handlemouseClick(e, $(this));
        });
    },
    handlemouseClick: function (e, element) {
        if (e.buttons === 1) {//left button
            element.css('background', '#f00');
        }
        if (e.buttons === 2) { //right buttom
            element.css('background', 'none');
        }
    }
};
$(document).ready(function () {
    clicableArea.init();
}); 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2017-09-20T08:14:51.350

正如@Jack 所说，当`mouseup`发生在浏览器窗口之外时，我们不知道......

## 这段代码（几乎）对我有用：

```
window.addEventListener('mouseup', mouseUpHandler, false);
window.addEventListener('mousedown', mouseDownHandler, false); 
```

## 不幸的是，在其中一种情况下，我不会得到该`mouseup`事件：

*   用户同时按下键盘键和鼠标按钮，在浏览器窗口外释放鼠标按钮，然后释放键。
*   用户同时按下**两个**鼠标按钮，释放一个鼠标按钮，然后释放另一个，都在浏览器窗口之外。

* * *

## 回答 #16

> 赞同：-1
> 
> 时间：2013-07-04T14:49:49.100

```
 var mousedown = 0;
        $(function(){
            document.onmousedown = function(e){
                mousedown = mousedown | getWindowStyleButton(e);
                e = e || window.event;
                console.log("Button: " + e.button + " Which: " + e.which + " MouseDown: " + mousedown);
            }

            document.onmouseup = function(e){
                mousedown = mousedown ^ getWindowStyleButton(e);
                e = e || window.event;
                console.log("Button: " + e.button + " Which: " + e.which + " MouseDown: " + mousedown);
            }

            document.oncontextmenu = function(e){
                // to suppress oncontextmenu because it blocks
                // a mouseup when two buttons are pressed and 
                // the right-mouse button is released before
                // the other button.
                return false;
            }
        });

        function getWindowStyleButton(e){
            var button = 0;
                if (e) {
                    if (e.button === 0) button = 1;
                    else if (e.button === 1) button = 4;
                    else if (e.button === 2) button = 2;  
                }else if (window.event){
                    button = window.event.button;
                }
            return button;
        } 
```

这个跨浏览器版本对我来说很好用。

* * *

## 回答 #17

> 赞同：-3
> 
> 时间：2008-11-26T22:37:31.793

好吧，您无法在活动结束后检查它是否已关闭，但您可以检查它是否已启动...如果已启动.. 则表示不再关闭：P 大声笑

所以用户按下按钮（onMouseDown 事件）......然后，您检查是否已启动（onMouseUp）。虽然它没有启动，但你可以做你需要的。

# .net - 如何通知接口的实现者“路径”参数代表一个文件夹？

> ID：322379
> 
> 赞同：0
> 
> 时间：2008-11-26T22:30:29.123
> 
> 标签：.net, api, extensibility

我即将在我的应用程序中定义一个接口，插件编写者可以实现该接口以提供用户定义的“导出”功能。它看起来像这样：

```
public interface IFooExporter
{
    void ExportFoo(Foo foo, string path);
} 
```

但是，我需要让插件编写者知道（明确地，不仅仅是在文档中）“路径”代表一个文件夹，而不是文件名。作为导出过程的一部分，他们有责任创建文件。

强制路径是文件夹而不是文件名的最佳方法是什么？我现在最好的猜测是使用 DirectoryInfo 而不是字符串：

```
public interface IFooExporter
{
    void ExportFoo(Foo foo, DirectoryInfo folder);
} 
```

这是一个好的解决方案，还是在传递 DirectoryInfo 实例时存在我不知道的陷阱？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-11-26T22:31:05.660

使用 XML 注释，它们将显示在 Visual Studio 的 Intellisense 弹出窗口中。

```
/// <summary>
/// Type in the text you want to appear
/// </summary> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-26T22:38:53.430

更明确地命名您的变量。它仅仅是一条路径吗？你说不，它不是，但你仍然给它留下一个通用名称。将其命名为 folderPath，这样会减少混乱，也不需要明确地与实施者沟通。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-11-26T22:48:04.283

因为您没有实施该解决方案，所以我同意您使用 DirectoryInfo 作为参数的解决方案。如果您指定一个字符串，则无法停止传递任何字符串。

# c++ - 如何使用 icc 编译器检查 gdb 中 std::vector 的内容？

> ID：322390
> 
> 赞同：16
> 
> 时间：2008-11-26T22:34:29.880
> 
> 标签：c++, stl, vector, gdb, icc

我想检查 gdb 中 std::vector 的内容，但我无权访问 _M_impl，因为我使用的是 icc，而不是 gcc，我该怎么做？为简单起见，假设它是一个 std::vector 。

[这里](https://stackoverflow.com/questions/253099/how-do-i-print-the-elements-of-a-c-vector-in-gdb)有一个非常好的答案，但是如果我使用 icc，这将不起作用，错误消息是“没有名为 _M_impl 的成员或方法”。这里似乎有一个不错的调试工具集[，](http://www.yolinux.com/TUTORIALS/GDB-Commands.html#STLDEREF)但它也依赖于_M_impl。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2008-11-26T23:49:21.650

不确定这是否适用于您的矢量，但它对我有用。

```
#include <string>
#include <vector>

int main() {
    std::vector<std::string> vec;
    vec.push_back("Hello");
    vec.push_back("world");
    vec.push_back("!");
    return 0;
} 
```

数据库：

```
(gdb) break source.cpp:8
(gdb) run
(gdb) p vec.begin()
$1 = {
   _M_current = 0x300340
}
(gdb) p $1._M_current->c_str()
$2 = 0x3002fc "Hello"
(gdb) p $1._M_current +1
$3 = (string *) 0x300344
(gdb) p $3->c_str()
$4 = 0x30032c "world" 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-11-27T01:13:44.240

通常我在调试器中处理容器类时，会构建一个对元素的引用，作为局部变量，因此在调试器中很容易看到，而无需在容器实现中胡思乱想。

这是一个人为的例子。

```
vector<WeirdStructure>  myWeird;

/* push back a lot of stuff into the vector */ 

size_t z;
for (z = 0; z < myWeird.size(); z++)
{
    WeirdStructure& weird = myWeird[z];

    /* at this point weird is directly observable by the debugger */ 

    /* your code to manipulate weird goes here */  
} 
```

这就是我使用的成语。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-26T22:44:06.447

`std::vector`模板保证[数据连续存储](http://herbsutter.wordpress.com/2008/04/07/cringe-not-vectors-are-guaranteed-to-be-contiguous/)。如果您获取前面元素的地址（例如，`&v[0]`），则可以通过 C 样式数组访问向量中的任何其他元素。这并不要求您将 STL 的源代码提供给您的调试器。

* * *

在弄乱了一些之后，似乎`v.front()`并且`v.begin()`很可能是内联的，而 GDB 没有找到它们。我会继续寻找，但就我个人而言，我只是将这一行添加`int* i = &v[0]`到源文件中，然后`i`在调试时使用 GDB 命令。请注意，编译器可以自由删除该死代码。您可能需要输出 的值`i`来避免这种情况，或者根本不启动优化。

# regex - 用于匹配“除了”字符串的正则表达式

> ID：322392
> 
> 赞同：1
> 
> 时间：2008-11-26T22:34:44.687
> 
> 标签：regex

我正在寻找一个正则表达式，它将匹配所有字符串，除了那些包含某个字符串的字符串。有人可以帮我建造它吗？

例如，按该顺序查找其中*不*包含 a、b 和 c 的所有字符串。

所以
abasfaf3 会匹配，而
asasdfbasc 不会

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-11-26T22:45:06.397

在 Python 中：

```
>>> r = re.compile("(?!^.*a.*b.*c.*$)")
>>> r.match("abc")
>>> r.match("xxabcxx")
>>> r.match("ab ")
<_sre.SRE_Match object at 0xb7bee288>
>>> r.match("abasfaf3")
<_sre.SRE_Match object at 0xb7bee288>
>>> r.match("asasdfbasc")
>>> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-11-26T22:38:00.077

在 perl 中：

```
if($str !~ /a.*?b.*?.*c/g)
{
    print "match";
} 
```

应该管用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-11-26T22:47:45.767

好吧，您理论上可以构建一个匹配相反的正则表达式。但是对于更长的字符串，那个正则表达式会变得很大。您系统地执行此操作的方式是（大大简化）：

*   将正则表达式转换为确定性有限自动机
*   转换自动机的结束条件，使其接受倒置的正则语言
*   通过从自动机中连续删除节点，将自动机转换回正则表达式，但保持其行为相同。删除一个节点需要将两个或多个正则表达式放在一起，以便它们将解释删除的节点。
*   如果您碰巧有一个开始节点和一个结束节点，那么您就完成了：标记它们之间的边缘的正则表达式是您搜索的正则表达式。

实际上，您可以只匹配您不想在其中包含的字符串*，*然后反转结果。这是在 awk 中的样子：

```
echo azyxbc | awk '{ exit ($0 !~ /a.*b.*c/); }' && echo matched 
```

如果您对此感兴趣，我推荐Michael Sipser*的《计算理论导论》一书。*

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-11-26T22:40:57.340

在 Java 中：

```
(?m)^a?(.(?!a[^b\r\n]*b[^\r\nc]*c))+$ 
```

匹配

```
abasfaf3
xxxabasfaf3 
```

不匹配

```
asasdfbascf
xxxxasasdfbascf 
```

# algorithm - 根据项目索引将数组分成N组的算法（应该很简单）

> ID：322401
> 
> 赞同：3
> 
> 时间：2008-11-26T22:38:35.583
> 
> 标签：algorithm, arrays

我觉得这应该是一件非常简单明了的事情，但只是坚持了最后半个小时，无法继续前进。

我所需要的只是根据元素索引将元素数组拆分为 N 个组。

例如，我们有一个由 30 个元素组成的数组 [e1,e2,...e30]，它必须被分成 N=3 组，如下所示：

```
group1: [e1, ..., e10]
group2: [e11, ..., e20]
group3: [e21, ..., e30] 
```

对于 N = 3，我想出了这样令人讨厌的混乱（伪语言，我在 0 和 1 上留下乘法只是为了澄清）：

```
for(i=0;i<array_size;i++) {
   if(i>=0*(array_size/3) && i<1*(array_size/3) {
      print "group1";
   } else if(i>=1*(array_size/3) && i<2*(array_size/3) {
      print "group2";
   } else if(i>=2*(array_size/3) && i<3*(array_size/3)
      print "group3";
   }
} 
```

但是什么是适当的通用解决方案？

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-11-26T22:50:01.690

这样的事情呢？

```
for(i=0;i<array_size;i++) {
  print "group" + (Math.floor(i/(array_size/N)) + 1)
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-03-17T15:45:58.543

这是一个小功能，可以满足您的需求 - 它假定您知道要创建的组数：

```
function arrayToGroups(source, groups) {  

                     //This is the array of groups to return:
                     var grouped = [];

                     //work out the size of the group
                     var groupSize = Math.ceil(source.length/groups);

                     //clone the source array so we can safely splice it (splicing modifies the array)
                     var queue = source.slice(0);

                     for (var r=0;r<groups;r++) {
                       //Grab the next groupful from the queue, and append it to the array of groups
                       grouped.push(queue.splice(0, groupSize));            
                     }       
             return grouped;
} 
```

你像这样使用它：

```
var herbs = ['basil', 'marjoram', 'aniseed', 'parsely', 'chives', 'sage', 'fennel', 'oregano', 'thyme', 'tarragon', 'rosemary'];

var herbGroups = arrayToGroups(herbs, 3); 
```

返回：

```
herbGroups[0] = ['basil', 'marjoram', 'aniseed', 'parsely']
herbGroups[1] = ['chives', 'sage', 'fennel', 'oregano']
herbGroups[2] = ['thyme', 'tarragon', 'rosemary'] 
```

它不会进行任何完整性检查以确保您传入一个数组和一个数字，但您可以很容易地添加它。您也可以将其原型化为 Javascript 的对象类型，这将为您提供一个方便的数组上的“toGroups”方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-11-27T00:04:40.853

使用矢量语言使这项任务变得简单、正确的工具等等。只是想我会把它扔在那里让人们检查另一种方法。

K 中的解释版本（APL 后代）：

```
split:{[values;n]    / define function split with two parameters
  enum:!n            / ! does enumerate from 0 through n exclusive, : is assign
  floor:_(#values)%n / 33 for this sample, % is divide, _ floor, # count
  cut:floor*enum     / 0 33 66 for this sample data, * multiplies atom * vector
  :cut _ values      / cut the values at the given cutpoints, yielding #cut lists
  }

values:1+!30           / generate values 1 through 30
n:3                    / how many groups to split into
groups:split[values;n] / set the groups 
```

产生预期的输出：

```
(1 2 3 4 5 6 7 8 9 10
 11 12 13 14 15 16 17 18 19 20
 21 22 23 24 25 26 27 28 29 30) 
```

K 中的简短版本：

```
split:{((_(#x)%y)*!y)_ x}
groups:split[1+!30;3] 
```

产生相同的输出：

```
(1 2 3 4 5 6 7 8 9 10
 11 12 13 14 15 16 17 18 19 20
 21 22 23 24 25 26 27 28 29 30) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2010-12-27T20:41:23.447

我在上面修改了Beejamin的功能，只是想分享一下。

```
function arrayToGroups($source, $pergroup) {  
    $grouped = array();
    $groupCount = ceil(count($source)/$pergroup);
    $queue = $source;
    for ($r=0; $r<$groupCount; $r++) {
        array_push($grouped, array_splice($queue, 0, $pergroup));    
    }       
    return $grouped;
} 
```

*这询问每个组*有多少项目，而不是总共有多少组。php。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-11-26T22:48:04.223

```
 const int g = 3;                      // number of groups
 const int n = (array_size + g - 1)/g; // elements per group

 for (i=0,j=1; i<array_size; ++i) {
    if (i > j*n)
        ++j;
     printf("Group %d\n", j);
 } 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-11-26T22:49:07.997

```
int group[3][10];
int groupIndex = 0;
int itemIndex = 0;
for(i = 0; i < array_size; i++)
{
    group[groupIndex][itemIndex] = big_array[i];
    itemIndex++;
    if (itemIndex == 10)
    {
        itemIndex = 0;
        groupIndex++;   
    }
}
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-11-26T22:57:08.290

可能有无数种方法可以做到这一点。我建议：为每个组创建一个基本指针并计数。

```
struct group {foo * ptr; size_t count };
group * pgroups = new group [ngroups];
size_t objects_per_group = array_size / ngroups;
for (unsigned u = 0; u < ngroups; ++u ) {
   group & g =  pgroups[u];
   size_t index = u * objects_per_group;
   g.ptr = & array [index];
   g.count = min (objects_per_group, array_size - index);  // last group may have less!
}
...`
for (unsigned u = 0; u < ngroups; ++u) {
   // group "g" is an array at pgroups[g].ptr, dimension pgroups[g].count
   group & g =  pgroups[u];
   // enumerate the group:
   for (unsigned v = 0; v < g.count; ++v) {
      fprintf (stdout, "group %u, item %u, %s\n",
         (unsigned) u, (unsigned) v, (const char *) g.ptr[v]->somestring);
}  }

delete[] pgroups; 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-01-18T19:46:09.350

我认为问题有点复杂。并且考虑到您仅将组视为一维问题，您将对组实际上是什么有一个非常奇怪的看法。

首先，问题是根据组素数的数量以及您正在处理的组组合来确定的。在数学; 这表示为 n 的 n 次方或 n^n 的幂，可以转换为 !n（n 的因数）。

如果我有 5 个组排列为 (1, 2, 3, 4, 5)，那么我想根据阶乘表达式将其表示为某些组或组的组合，那么组合会变大

1x1 组 = 1,2,3,4,5
2x1 组 = 12, 23, 45, 13, 14, 15, 21, 24, 25, 31, 32, 34, 35, 41, 42, 43, 45, 51 , 52, 53, 54
所以该策略创建一个分支系统分支（很容易）
12, 13, 14, 15
21, 22, 23, 24
31, 32, 34, 35
41, 42, 43, 45
51, 52, 53, 55
组 1 + 2x2x1 = (1, 23, 45), (2, 13, 45), (3, 12, 45), (4, 12, 35), (1, 24, 35), (1 , 25, 35), (1, 32, 45), (1, 34, 25), (1, 35, 24), ... 等等

正如您所看到的，当您开始添加阶乘集时，组合变得不那么容易创建数学参考来表达这些术语。当你进入一个长度大于 3 或 4 的基本组时，情况会变得更糟。

如果我理解您的问题：您想用通用术语表达一种允许您以编程方式创建分组策略的算法吗？

这是一个复杂的集合；并且在微积分中表现最好；作为集合论。否则，您所做的只是二维数组处理。

第一个Array表示分组策略；第二个数组表示分组元素。

我不认为这是您被要求做的，因为数学中的“GROUP”一词对该词有非常具体的分配。您不应该使用术语组；而是将其表示为一个集合；set1, set2 如果那是你正在做的。

Set1 包含 set2 的元素；因此，这是用与表达集合和联合相同的数学来处理的。查找“Vin Diagrams”和“Union”；除非您表示集合的因子，否则请避免使用术语组。
[http://en.wikipedia.org/wiki/Group_(mathematics)](http://en.wikipedia.org/wiki/Group_(mathematics))

我认为您要表达的是已知集合或表中的组；这是在 wikipedia.org 示例 D2 上。

在这种情况下，这意味着您必须像看魔方一样看待问题；它变得复杂。

我在 javascript 中解决同样的问题；当我完成后，我可能会发布它；）。这很复杂。

# javascript - DOMNodeInsertedIntoDocument 应该冒泡吗？

> ID：322418
> 
> 赞同：0
> 
> 时间：2008-11-26T22:44:11.670
> 
> 标签：javascript, events, dom, mutation-events

我一直认为 DOMNodeInsertedIntoDocument/DOMNodeRemovedFromDocument 事件不应该冒泡，对我来说这已经足够了。然而，就在最近，我再次查看规范并发现在一个位置它说这些事件不应该冒泡（[事件类型的完整列表](http://www.w3.org/TR/DOM-Level-3-Events/events.html#Events-EventTypes-complete)），而在其他位置说它们应该（[DOMNodeInsertedIntoDocument](http://www.w3.org/TR/DOM-Level-3-Events/events.html#event-DOMNodeInsertedIntoDocument)和[DOMNodeRemovedFromDocument](http://www.w3.org/TR/DOM-Level-3-Events/events.html#event-DOMNodeRemovedFromDocument)）。

我也在网上查了一下，发现了好几个实现，都在实现的行为上不一样。

问题是：这些事件真的应该冒泡吗？你觉得什么更有意义？

**更新**：发现在[DOM-Level-2-Events](http://www.w3.org/TR/DOM-Level-2-Events/events.html)规范中没有歧义，因为它在一个位置提到了这些事件。

**更新 2**：提出这个问题是为了验证这些事件在[Ample SDK](http://www.clientside.ru/) Ajax 框架中的行为，该框架旨在实现所有基于标准的技术。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-11-26T23:25:39.450

我猜你已经发现它们不应该冒泡。但对于实际的开发人员来说，这是一个有争议的问题，因为它们不受 IE 的支持，IE 仍然占据了大约 80% 的市场。:-(

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-26T23:32:55.537

根据 2 级事件，我会选择“否”，这是一个适当的建议，已经存在了很长时间，并且包含与此无关的任何勘误表。DOM Level 3 Events 只是一个工作组笔记，仍然是 WD，总体上有点不尽人意。

# java - 将 Web 应用程序部署为 war 文件

> ID：322423
> 
> 赞同：0
> 
> 时间：2008-11-26T22:46:17.580
> 
> 标签：java, deployment, tomcat, web-applications

我在使用我选择的主机上传和获取我的网络应用程序时遇到了一些问题。我在 Net Beans 中构建了一个 war 文件，并要求我的主机为我部署它。这很好用，但要访问它，我必须将浏览器指向：

```
www.myDomain.co.uk/explodedWar 
```

我当然想要的是能够通过将浏览器指向以下位置来访问它：

```
www.myDomain.co.uk 
```

war 文件包含整个应用程序、index.html、图像、类等。

这是可能的还是我错过了什么？?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-11-26T23:27:15.470

您可以将战争称为 ROOT.war，但最好的方法是更改​​ servlet 容器中的上下文路径。要在 Tomcat 中执行此操作，您需要在 server.xml 中添加以下内容：

```
<context path="" docBase="explodedWar" debug="0"/> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-11-26T22:55:27.873

如果你将你的战争命名为 ROOT.war（在 Tomcat 中），它应该做你想做的事。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-26T22:49:54.297

这是您需要向主机询问的问题，因为他们正在为您部署它。

# text - API确定细胞载体？

> ID：322440
> 
> 赞同：33
> 
> 时间：2008-11-26T22:50:04.297
> 
> 标签：text, messaging

是否有免费的 API 或其他方式来确定手机号码注册的运营商？

我希望我的应用程序无需从列表中选择运营商即可广播短信。

**更新：** 有趣的是，一位同事找到了答案：http: [//developer.whitepages.com/](http://developer.whitepages.com/)

**UPDATE2：** 好吧，whitepages 许可协议非常严格，以至于您无法为其构建应用程序。还有其他想法吗？

**更新 3：**
在某个时候，有人删除了我的更新 2。这将其放回原处。更重要的是，截至 2015 年 10 月 19 日[，服务条款](http://pro.whitepages.com/terms-of-service/?_ga=1.260850253.1904530943.1445280336)仍处于无法合法使用其服务的状态。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2010-04-10T03:45:19.053

Data24-7 提供了一个 API，用于查找无线电话号码的运营商。它还返回电子邮件地址以向手机发送 SMS 和 MMS 消息。它不是免费的，每月 12 美元，每次查找 0.006 美元。

链接是： [http ://www.data24-7.com](http://www.data24-7.com)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-11-23T17:27:55.260

我知道这个问题已经 5 年了，但对于那些仍在寻找东西的人，PacificEast（我为之工作）为美国和加拿大号码提供[线路识别附加](http://www.pacificeast.com/products/line_identification_append.aspx)服务，以处理本地号码可移植性。该服务可作为 SOAP API 或批处理服务（您将文件发送给 PacificEast，他们对其进行处理并将其发回）。除运营商外，该服务还将识别线路类型（无线、固定电话等）、号码是否已转移，以及一些地理信息。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2010-12-03T15:12:45.520

[Neustar](http://www.neustar.biz/services/numbering-services/)将是您最好的选择，他们处理查找、号码可携带性、请勿呼叫列表等...该服务不是免费的，但它们是业内最可靠的。另一个选择可能是[Twilio](http://www.twilio.com/docs/howto/search-and-buy)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-11-27T00:49:41.997

您应该注意，确定号码属于哪个运营商的方法将因国家/地区而异（尽管，某些国家/地区可能使用相同的方案，但我不确定 - 我使用过挪威和瑞典的便携性数据库它们是完全不同的 api-wize - 并且需要 vpn + 身份验证）。

至少在这里，这些信息是不向公众提供的——我看到服务提供商、网络运营商和信息提供商（如黄页中的）可以访问。

但是otoh，一个合适的短信网关服务不会为你做这件事吗？

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-04-28T15:11:27.930

如果您正在寻找我的身份（一种轻松发送电子邮件的方式 -> 为程序发送短信的人），我相信最好的方法是向该国家/地区的每个运营商发送电子邮件 phonenumber@sms-gateway。这样做时，该号码仅适用于该号码目前处于活动状态的一个运营商。其他邮件将被退回。如果您尝试查找它，您现在依赖于他们的数据库的最新情况。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2008-11-26T23:19:51.723

你最大的问题是人们现在可以随身携带他们的号码。因此，虽然过去手机运营商有电话号码块，并且可能仍然存在，但没有可靠的方法将特定手机号码映射到特定运营商。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-03-09T22:24:36.027

您可以尝试从[http://www.fonefinder.net](http://www.fonefinder.net)之类的网站截屏，该网站对号码执行“whois”

这是一个要抓取的示例 url。（我验证了它的真正冲刺，所以这是正确的）

```
http://www.fonefinder.net/findome.php?npa=817&nxx=683&thoublock=2926 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-09-16T05:13:41.020

我最近用 Ruby 写了一个与前面提到的 FoneFinder.net 接口的

[https://rubygems.org/gems/FoneFinder](https://rubygems.org/gems/FoneFinder) --> Ruby Gem 页面
[https://github.com/evinugur/FoneFinder.rb/](https://github.com/evinugur/FoneFinder.rb/) --> Github 源

您可以使用它来获取与手机号码相关的一些数据字段，但要确定运营商，请执行此操作。

```
require 'FoneFinder'
myPhoneNumber = FoneFinder.new("123-456-7890")
puts myPhoneNumber.carrier 
```

# sql-server - 使用 LINQ to SQL 忽略 SQL Server 中的重音符号

> ID：322441
> 
> 赞同：11
> 
> 时间：2008-11-26T22:50:05.373
> 
> 标签：sql-server, linq, linq-to-sql

如何在使用 LINQ to SQL 对 SQL Server 数据库进行的查询中忽略重音符号（如 ´、`、~）？

**更新：**

仍然没有弄清楚如何在 LINQ 中做到这一点（或者即使有可能），但我设法更改了数据库来解决这个问题。只需要更改我想要搜索的字段的排序规则。我的整理是：

```
SQL_Latin1_General_CP1_CI_AS 
```

CI 代表“不区分大小写”，AS 代表“区分重音”。只需将 AS 更改为 AI 即可使其“不区分重音”。SQL 语句是这样的：

```
ALTER TABLE table_name ALTER COLUMN column_name column_type COLLATE collation_type 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-11-26T23:06:18.303

在 SQL 查询中（我记得是 Sql Server 2000+），您可以通过执行类似 select MyString, MyId from MyTable where MyString collat​​e Latin1_General_CI_AI ='aaaa' 之类的操作来做到这一点。

我不确定这在 Linq 中是否可行，但对 Linq 更熟悉的人可能可以翻译。

如果您对排序和选择/查询始终忽略重音符号感到满意，则可以更改表以在您关注的字段上指定相同的排序规则。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2011-11-16T00:21:48.717

请参阅以下答案：

[忽略重音和大小写的 LINQ](https://stackoverflow.com/questions/7418624/linq-where-ignore-accentuation-and-case/8144930#8144930)

基本上你需要改变 SQL Server 中的字段类型，例如

```
ALTER TABLE People ALTER COLUMN Name [varchar](100) COLLATE SQL_Latin1_General_CP1_CI_AI 
```

除了调用自定义方法来删除变音符号（这不会是高性能的）之外，似乎没有办法使用 LINQ 来做到这一点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2010-11-29T05:39:31.723

LINQ to SQL 没有任何特定功能来设置用于查询的排序规则，因此它将始终使用数据库默认值。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-02-01T14:16:06.623

似乎有一种方法可以通过使用 t-sql 函数来忽略 Linq to SQL 中的排序规则差异：

```
CREATE FUNCTION [dbo].[func_ConcatWithoutCollation]
(
    @param1 varchar(2000),
    @param2 varchar(2000)
)
RETURNS varchar(4000)
AS
BEGIN
    IF (@param1 IS NULL) SET @param1 = ''
    IF (@param2 IS NULL) SET @param2 = ''
    RETURN @param1 COLLATE Latin1_General_CS_AS + @param2 COLLATE Latin1_General_CS_AS
END 
```

要在 linq to sql 中获取此函数，有一个用于 SqlMetal:/functions 的开关。例子：

```
"%ProgramFiles%\Microsoft SDKs\Windows\v7.0A\Bin\SqlMetal.exe" /server:. /database:NameOfDatabase /pluralize /code:ContextGenerated.cs /sprocs /views /functions 
```

在 Linq to sql 中使用这个函数，如下所示：

```
from s in context.Services
where context.Func_ConcatWithoutCollation(s.Description, s.Email) == "whatever"
select s 
```

它帮助了我，也许有人也觉得这很有用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-10-21T12:47:33.200

一个解决方案可以是创建一个 SQL 函数来删除变音符号，通过将排序规则 SQL_Latin1_General_CP1253_CI_AI 应用于输入字符串，如下所示：

```
CREATE FUNCTION [dbo].[RemoveDiacritics] (
@input varchar(max)
)   RETURNS varchar(max)

AS BEGIN
DECLARE @result VARCHAR(max);

select @result = @input collate SQL_Latin1_General_CP1253_CI_AI

return @result
END 
```

然后，您可以通过将其映射到属性 DbFunction 将其添加到 DB 上下文（在本例中为 ApplicationDbContext）：

```
public class ApplicationDbContext : IdentityDbContext<CustomIdentityUser>
    {
        [DbFunction("RemoveDiacritics", "dbo")]
        public static string RemoveDiacritics(string input)
        {
            throw new NotImplementedException("This method can only be used with LINQ.");
        }

        public ApplicationDbContext(DbContextOptions<ApplicationDbContext> options)
            : base(options)
        {
        }
} 
```

最后在 LINQ 查询中使用它，例如（linq-to-entities）：

```
var query = await db.Users.Where(a => ApplicationDbContext.RemoveDiacritics(a.Name).Contains(ApplicationDbContext.RemoveDiacritics(filter))).tolListAsync(); 
```

# debugging - 您如何检查和测试已知的 IE 浏览器“功能”？

> ID：322446
> 
> 赞同：2
> 
> 时间：2008-11-26T22:53:06.740
> 
> 标签：debugging, internet-explorer, testing

我的公司通过使用 IE6、7、Firefox 和 Safari 的出色用户体验来赚钱。我们 90% 的流量以 IE 告终，并且可能有 60% 的流量仍然是 IE6。IE6 有许多已知的陷阱，例如在插入 DOM 对象时访问它们会导致浏览器崩溃。在例行测试中几乎没有这些问题浮出水面，它们几乎总是包括一些奇怪的计时竞赛条件，这些条件只会影响我们本周最重要的客户。

您使用什么流程或工具来确保您的代码中不存在导致 IE 崩溃的已知模式？

补充：对于那些建议坚持使用 3rd 方库的人：我同意这将有很大帮助，但您仍然必须将这些 API 与 Javascript 粘合在一起。有没有人不只是交叉手指并等待野外有人让他们知道那里的代码刚刚使他们的系统崩溃？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-11-26T22:58:22.063

我们不担心。相反，我们使用第三方工具，如 jQuery（嗯，**完全**像我们公司的 jQuery）来确保处理跨平台特性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-26T23:04:04.220

我建议您尽可能多地依赖流行的 3rd 方框架。他们经历的修改和测试比您所能执行的要多得多。显然，这意味着您应该使用 jQuery 来完成所有与 JS 相关的工作。

不幸的是，这些浏览器错误没有灵丹妙药，只要您使用 JS 和 HTML，您将继续遇到这些问题。充其量你可以编制一份清单，将它们发布到博客上，让社区讨论它们，并确保你的所有开发人员都学习它们。

这是 Flash 和 SilverLight 存在的一个示例，考虑到您花费大量时间开发 UI，这似乎是令人震惊的建议，但如果您想摆脱浏览器/操作系统错误，请使用 1 公司交付包是打破网络错误 99.9% 障碍的唯一方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-11-26T23:07:09.533

我在 window.event.srcElement 上进行了尝试（它只在 IE 中工作）并将非 IE 的东西放在 catch 中，然后把东西绑在我的 finally 中。

所有其他浏览器似乎都抛出了 window.event.srcElement 异常，所以我首先使用该行，如果它通过该行，它显然是 IE，所以我将我的 IE 代码放在那里，如果它被捕获，很明显一个更符合标准的浏览器，所以我把备用代码放在那里。

在使用涉及鼠标事件的服务器端代码动态编写 Javascript 事件时，这为我节省了很多时间。

希望对您有所帮助，为您提供一种在没有服务器端检测的情况下支持具有不同代码的多个浏览器的方法。

信不信由你，一些 jQuery（和其他库）函数并不适用于所有浏览器。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2008-11-28T13:53:10.123

> 信不信由你，一些 jQuery（和其他库）函数并不适用于所有浏览器。

当然，如果你涉及到 IE5 或 NN4，jQuery 可能不是最好的选择。否则，你不会有这个问题。我将 jQuery 用于一个巨大的站点，并且我对库没有问题。我有插件问题，但这是另一回事。顺便说一句，我的文件中只有不到 10 行纯 js。如果您学会有效地使用 jquery，您将不需要任何 js 知识（听起来很奇怪，但是……这是我的情况：P）

# javascript - 您在 Eclipse 中使用哪些 CSS/JS/HTML/XML 插件？

> ID：322467
> 
> 赞同：14
> 
> 时间：2008-11-26T23:01:38.860
> 
> 标签：javascript, html, css, eclipse

我正在寻找一个在 Eclipse 中进行 Web 前端工作的好插件。我不想要完全接管 eclipse 的东西，或者有大量依赖项需要一直更新的东西，或者面向特定服务器端平台的东西，或者需要大量成本的东西。

那里有什么轻量级的东西可以击中最佳位置吗？

我尝试了 aptana - 发现它接管了我的整个 eclipse 环境，并将新闻提要和其他垃圾到处都是。

然后我尝试安装 aptana jar 的一个子集，结果对结果非常满意。

这是我的插件目录中的内容：

> com.aptana.ide.core_1.2.0.018852.jar com.aptana.ide.snippets_1.2.0.018852.jar com.aptana.ide.core.ui_1.2.0.018852.jar com.aptana.ide.debug.core_1 .2.0.018852.jar com.aptana.ide.editor.css_1.2.0.018852.jar com.aptana.ide.editor.html_1.2.0.018852.jar com.aptana.ide.editor.js_1.2.0.018852。 jar com.aptana.ide.editors_1.2.0.018852.jar com.aptana.ide.editors.codeassist_1.2.0.018852.jar com.aptana.ide.epl_1.2.0.018852.jar com.aptana.ide.io。 file_1.2.0.018852.jar com.aptana.ide.jface.text.source_1.2.0.018852.jar com.aptana.ide.lexer_1.1.0.018852.jar com.aptana.ide.libraries_1.2.0.18696 com. aptana.ide.libraries.jetty_1.2.0.018852 com.aptana.ide.logging_1.2.0.018852.jar com.aptana.ide.parsing_1.2.0.018852.jar com.aptana.ide.search.epl_1.2.0.018852 .jar com.aptana.ide.server_1.2.0.018852.jar com.aptana.ide.server.core_1.2.0。018852.jar com.aptana.ide.server.jetty_1.2.0.018852.jar com.aptana.ide.server.ui_1.2.0.018852.jar

..并在特点：

> com.aptana.ide.feature.editor.css_1.2.0.018852 com.aptana.ide.feature.editors_1.2.0.018852 com.aptana.ide.feature.editor.html_1.2.0.018852 com.aptana.ide.feature .editor.js_1.2.0.018852

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2018-07-16T21:03:50.977

这是一个非常古老的初始问题，但由于它在谷歌中仍然非常明显，我想我会为碰巧想知道同样问题的人更新 2018 年的答案。目前，所有 Web 语言的最佳编辑器是[CodeMix](https://www.genuitec.com/products/codemix/codemix-journey/)。您可以在提供的链接上阅读它或从[Eclipse Marketplace](https://marketplace.eclipse.org/content/codemix)安装它。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2008-11-26T23:06:39.037

听起来您需要[Web 工具项目](http://www.eclipse.org/webtools/)

更新：在最新的 2016 Eclipse Neon 中，转到 HELP -> Install Software 并搜索 Eclipse Web Developer 工具。出于某种原因，很难从 Marketplace 中找到它们。

[![帮助安装软件](https://i.stack.imgur.com/ooTsim.png)](https://i.stack.imgur.com/ooTsim.png)

[![网络开发者工具](https://i.stack.imgur.com/u4RfX.png)](https://i.stack.imgur.com/u4RfX.png)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2008-11-26T23:07:53.137

你可能喜欢：

*   JSEclipse 插件（[更新站点](http://download.macromedia.com/pub/labs/jseclipse/autoinstall)）最初由 Interactonline 开发，后来被 Adob​​e 收购
*   Eclipse Web 工具平台项目（[更新站点](http://download.eclipse.org/webtools/updates/)）

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-11-26T23:07:59.627

就个人而言，我使用 Aptana 的独立社区版本来处理这类事情，因为这些天我并没有真正将 Eclipse 用于其他任何事情。

有一个 Eclipse 插件版本的 Aptana，此处提供信息：http: [//www.aptana.com/docs/index.php/Plugging_Aptana_into_an_existing_Eclipse_configuration](http://www.aptana.com/docs/index.php/Plugging_Aptana_into_an_existing_Eclipse_configuration)

更新：获取此插件的新链接：http: [//aptana.org/products/studio3/download](http://aptana.org/products/studio3/download)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-11-28T08:43:01.417

这取决于 - 对于 JS 和 CSS，我使用标准 Webtools 插件。但是对于 HTML 和 XML，我认为 Aptana 做了很好的分叉——在 HTML 中自动格式化确实有很大帮助。我使用 Eclipse，但下载 Aptana 作为插件并仅使用它的一些功能。

此外，Aptana JS 编辑器使您可以为最流行的 JS 框架（如 jQuery 或 Ext）使用完整的代码和文档。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-11-28T08:22:24.733

我在我的公司使用[Amateras HTML Editor](http://amateras.sourceforge.jp/cgi-bin/fswiki_en/wiki.cgi?page=EclipseHTMLEditor)。它是其他更高级的编辑器（用于编辑 JSF、Struts、UML、XML...）的基础。它很简单，只是一个插件，并且可以很好地完成必要的工作。带有一个源代码编辑器（带有完成）和一个运行良好的预览。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-25T13:25:21.717

截至目前，Eclipse Juno 拥有出色的 HTML/CSS/XML/JS 编辑器，其中 PDT 是一个很好的 PHP 插件

# ruby - 我可以在不包含 Ruby 模块的情况下调用实例方法吗？

> ID：322470
> 
> 赞同：201
> 
> 时间：2008-11-26T23:03:37.793
> 
> 标签：ruby, module, methods

### 背景：

我有一个模块，它声明了许多实例方法

```
module UsefulThings
  def get_file; ...
  def delete_file; ...

  def format_text(x); ...
end 
```

我想从一个类中调用其中一些方法。你通常如何在 ruby​​ 中执行此操作是这样的：

```
class UsefulWorker
  include UsefulThings

  def do_work
    format_text("abc")
    ...
  end
end 
```

### 问题

`include UsefulThings`从中引入*所有*方法`UsefulThings`。在这种情况下，我只想要`format_text`并且明确地不想要`get_file`and `delete_file`。

我可以看到几个可能的解决方案：

1.  以某种方式直接在模块上调用该方法，而不在任何地方包含它
    *   我不知道如何/是否可以做到这一点。（因此这个问题）
2.  不知何故包括`Usefulthings`并且只引入它的一些方法
    *   我也不知道如何/是否可以做到
3.  创建一个代理类，包含`UsefulThings`在其中，然后委托`format_text`给该代理实例
    *   这会起作用，但匿名代理类是一种黑客攻击。呸。
4.  将模块拆分为 2 个或更多更小的模块
    *   这也可行，并且可能是我能想到的最好的解决方案，但我宁愿避免它，因为我最终会得到几十个模块的扩散——管理这将是繁重的

为什么单个模块中有很多不相关的功能？它`ApplicationHelper`来自一个 Rails 应用程序，我们的团队实际上已决定将其作为任何不具体到不属于其他任何地方的东西的垃圾场。主要是随处使用的独立实用程序方法。我可以把它分解成单独的助手，但是会有 30 个，每个都有 1 种方法......这似乎没有生产力

* * *

## 回答 #1

> 赞同：167
> 
> 时间：2009-09-11T14:03:09.880

我认为只需一次性调用（不更改现有模块或创建新模块）的最短方法如下：

```
Class.new.extend(UsefulThings).get_file 
```

* * *

## 回答 #2

> 赞同：145
> 
> 时间：2008-11-26T23:27:24.890

如果将模块上的方法转换为模块函数，您可以简单地从 Mods 中调用它，就好像它已被声明为

```
module Mods
  def self.foo
     puts "Mods.foo(self)"
  end
end 
```

下面的 module_function 方法将避免破坏任何包含所有 Mod 的类。

```
module Mods
  def foo
    puts "Mods.foo"
  end
end

class Includer
  include Mods
end

Includer.new.foo

Mods.module_eval do
  module_function(:foo)
  public :foo
end

Includer.new.foo # this would break without public :foo above

class Thing
  def bar
    Mods.foo
  end
end

Thing.new.bar 
```

但是，我很好奇为什么一组不相关的函数首先都包含在同一个模块中？

*编辑*显示，如果`public :foo`在之后调用，包括仍然有效`module_function :foo`

* * *

## 回答 #3

> 赞同：93
> 
> 时间：2008-11-26T23:23:05.353

如果您“拥有”该模块，另一种方法是使用`module_function`.

```
module UsefulThings
  def a
    puts "aaay"
  end
  module_function :a

  def b
    puts "beee"
  end
end

def test
  UsefulThings.a
  UsefulThings.b # Fails!  Not a module method
end

test 
```

* * *

## 回答 #4

> 赞同：23
> 
> 时间：2008-11-26T23:18:29.793

如果您想调用这些方法而不在另一个类中包含模块，那么您需要将它们定义为模块方法：

```
module UsefulThings
  def self.get_file; ...
  def self.delete_file; ...

  def self.format_text(x); ...
end 
```

然后你可以打电话给他们

```
UsefulThings.format_text("xxx") 
```

或者

```
UsefulThings::format_text("xxx") 
```

但无论如何，我建议您将相关方法放在一个模块或一个类中。如果你有问题想要只包含模块中的一个方法，那么这听起来像是一种糟糕的代码味道，并且将不相关的方法放在一起并不是好的 Ruby 风格。

* * *

## 回答 #5

> 赞同：20
> 
> 时间：2014-10-02T03:50:57.330

要调用模块实例方法而不包含模块（并且不创建中间对象）：

```
class UsefulWorker
  def do_work
    UsefulThings.instance_method(:format_text).bind(self).call("abc")
    ...
  end
end 
```

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2008-11-26T23:16:11.873

首先，我建议将模块分解为您需要的有用的东西。但是你总是可以创建一个类来扩展你的调用：

```
module UsefulThings
  def a
    puts "aaay"
  end
  def b
    puts "beee"
  end
end

def test
  ob = Class.new.send(:include, UsefulThings).new
  ob.a
end

test 
```

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2019-10-01T23:48:14.280

不确定 10 年后是否有人仍然需要它，但我使用 eigenclass 解决了它。

```
module UsefulThings
  def useful_thing_1
    "thing_1"
  end

  class << self
    include UsefulThings
  end
end

class A
  include UsefulThings
end

class B
  extend UsefulThings
end

UsefulThings.useful_thing_1 # => "thing_1"
A.new.useful_thing_1 # => "thing_1"
B.useful_thing_1 # => "thing_1" 
```

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2014-02-06T21:21:59.280

A. 如果您总是想以“合格”的独立方式（UsefulThings.get_file）调用它们，那么就像其他人指出的那样，将它们设为静态，

```
module UsefulThings
  def self.get_file; ...
  def self.delete_file; ...

  def self.format_text(x); ...

  # Or.. make all of the "static"
  class << self
     def write_file; ...
     def commit_file; ...
  end

end 
```

B. 如果您仍然想在相同的情况下保留 mixin 方法，以及一次性独立调用，您可以拥有一个使用 mixin*扩展*自身的单线模块：

```
module UsefulThingsMixin
  def get_file; ...
  def delete_file; ...

  def format_text(x); ...
end

module UsefulThings
  extend UsefulThingsMixin
end 
```

所以两者都有效：

```
 UsefulThings.get_file()       # one off

   class MyUser
      include UsefulThingsMixin  
      def f
         format_text             # all useful things available directly
      end
   end 
```

恕我直言，它比`module_function`每种方法都更清洁-以防万一。

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2015-08-13T07:27:00.267

据我了解这个问题，您想将模块的一些实例方法混合到一个类中。

让我们从考虑[Module#include 的](http://ruby-doc.org/core-2.0.0/Module.html#method-i-include)工作原理开始。假设我们有一个`UsefulThings`包含两个实例方法的模块：

```
module UsefulThings
  def add1
    self + 1
  end
  def add3
    self + 3
  end
end

UsefulThings.instance_methods
  #=> [:add1, :add3] 
```

和`Fixnum` `include`那个模块：

```
class Fixnum
  def add2
    puts "cat"
  end
  def add3
    puts "dog"
  end
  include UsefulThings
end 
```

我们看到：

```
Fixnum.instance_methods.select { |m| m.to_s.start_with? "add" }
  #=> [:add2, :add3, :add1] 
1.add1
2 
1.add2
cat
1.add3
dog 
```

您是否期望`UsefulThings#add3`覆盖`Fixnum#add3`，以便`1.add3`返回`4`？考虑一下：

```
Fixnum.ancestors
  #=> [Fixnum, UsefulThings, Integer, Numeric, Comparable,
  #    Object, Kernel, BasicObject] 
```

当类`include`成为模块时，模块成为类的超类。因此，由于继承的工作方式，发送`add3`到 的实例`Fixnum`将导致`Fixnum#add3`被调用，返回`dog`.

现在让我们添加一个`:add2`方法`UsefulThings`：

```
module UsefulThings
  def add1
    self + 1
  end
  def add2
    self + 2
  end
  def add3
    self + 3
  end
end 
```

我们现在只`Fixnum`希望`include`方法`add1`和`add3`。这样做，我们期望得到与上面相同的结果。

假设，如上所述，我们执行：

```
class Fixnum
  def add2
    puts "cat"
  end
  def add3
    puts "dog"
  end
  include UsefulThings
end 
```

结果是什么？不需要的方法`:add2`被添加到`Fixnum`，`:add1`被添加，并且由于我上面解释的原因，`:add3`没有被添加。所以我们要做的就是`undef` `:add2`。我们可以使用一个简单的辅助方法来做到这一点：

```
module Helpers
  def self.include_some(mod, klass, *args)
    klass.send(:include, mod)
    (mod.instance_methods - args - klass.instance_methods).each do |m|
      klass.send(:undef_method, m)
    end
  end
end 
```

我们这样调用：

```
class Fixnum
  def add2
    puts "cat"
  end
  def add3
    puts "dog"
  end
  Helpers.include_some(UsefulThings, self, :add1, :add3)
end 
```

然后：

```
Fixnum.instance_methods.select { |m| m.to_s.start_with? "add" }
  #=> [:add2, :add3, :add1] 
1.add1
2 
1.add2
cat
1.add3
dog 
```

这就是我们想要的结果。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2017-11-13T23:27:40.967

将近 9 年后，这是一个通用的解决方案：

```
module CreateModuleFunctions
  def self.included(base)
    base.instance_methods.each do |method|
      base.module_eval do
        module_function(method)
        public(method)
      end
    end
  end
end

RSpec.describe CreateModuleFunctions do
  context "when included into a Module" do
    it "makes the Module's methods invokable via the Module" do
      module ModuleIncluded
        def instance_method_1;end
        def instance_method_2;end

        include CreateModuleFunctions
      end

      expect { ModuleIncluded.instance_method_1 }.to_not raise_error
    end
  end
end 
```

您需要应用的不幸技巧是在定义方法之后包含模块。或者，您也可以在上下文定义为 之后包含它`ModuleIncluded.send(:include, CreateModuleFunctions)`。

或者，您可以通过[反射](https://github.com/thisismydesign/reflection_utils)工具 gem 使用它。

```
spec.add_dependency "reflection_utils", ">= 0.3.0"

require 'reflection_utils'
include ReflectionUtils::CreateModuleFunctions 
```

# xml - Vim 中的模式感知 XML 编辑

> ID：322481
> 
> 赞同：23
> 
> 时间：2008-11-26T23:07:51.093
> 
> 标签：xml, vim, xsd

在 IntelliJ IDEA 中编辑 XML 文件时，如果文档引用了架构，IDEA 将获取架构并使用该信息进行自动完成。它知道哪些标签在哪些上下文中有效，因此当您点击 CTRL-空格时，它只会建议那些标签。它还突出显示根据架构无效的任何标签。

有人知道提供类似功能的 Vim 扩展吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-20T11:24:52.173

VIM 7+ 支持**默认不带任何插件**，它可以加载 XML 定义，有 DTD 和 SchemaNG 的转换器：

[http://vimdoc.sourceforge.net/htmldoc/insert.html#ft-xml-omni](http://vimdoc.sourceforge.net/htmldoc/insert.html#ft-xml-omni)

例如我的 Vim 7.3 已经有 XHTML 的定义：

```
$ rpm -ql vim vim-common | grep xml
/usr/share/vim/vim73/autoload/xml
/usr/share/vim/vim73/autoload/xml/html32.vim
/usr/share/vim/vim73/autoload/xml/html401f.vim
/usr/share/vim/vim73/autoload/xml/html401s.vim
/usr/share/vim/vim73/autoload/xml/html401t.vim
/usr/share/vim/vim73/autoload/xml/html40f.vim
/usr/share/vim/vim73/autoload/xml/html40s.vim
/usr/share/vim/vim73/autoload/xml/html40t.vim
/usr/share/vim/vim73/autoload/xml/xhtml10f.vim
/usr/share/vim/vim73/autoload/xml/xhtml10s.vim
/usr/share/vim/vim73/autoload/xml/xhtml10t.vim
/usr/share/vim/vim73/autoload/xml/xhtml11.vim
/usr/share/vim/vim73/autoload/xml/xsd.vim
/usr/share/vim/vim73/autoload/xml/xsl.vim
/usr/share/vim/vim73/autoload/xmlcomplete.vim
/usr/share/vim/vim73/compiler/xmllint.vim
/usr/share/vim/vim73/compiler/xmlwf.vim
/usr/share/vim/vim73/ftplugin/xml.vim
/usr/share/vim/vim73/indent/xml.vim
/usr/share/vim/vim73/syntax/docbkxml.vim
/usr/share/vim/vim73/syntax/xml.vim 
```

试试看，值得。上面的链接下都清楚地记录了所有内容，我不会在这里复制粘贴。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-11-27T03:25:31.557

我见过的最接近 Vim 的是[XML Completion](http://www.vim.org/scripts/script.php?script_id=1442)脚本。

它包含 DocBook 4.[234]、XSL FO 1.0、XSLT 1.0、Relax NG 1.0、XML Schemas 1.0、SVG 1.1、XHTML 1.1、XInclude 1.0 和 OpenOffice 1.0 XML 格式的 XML 定义文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-05T07:47:00.173

参考：[http ://ricardianambivalence.com/2013/02/17/xml-validation-in-vim/](http://ricardianambivalence.com/2013/02/17/xml-validation-in-vim/)

通过`bar.xml`打开，您可以轻松地针对`foo.xsd`. 首先，保存您的更改，然后点击`:`并输入以下内容（它是终端命令的管道）。

```
:! xmllint --noout --schema foo.xsd bar.xml 
```

# css - 有人可以推荐一个花里胡哨的 CSS 框架吗？

> ID：322484
> 
> 赞同：13
> 
> 时间：2008-11-26T23:08:22.683
> 
> 标签：css, open-source, css-frameworks

我正在寻找一个花里胡哨的 CSS 框架。我在网上找到了一个处理“网格”的数字，一些处理“排版”，还有一些处理“重置”。

我还没有找到能够为我的 Web 应用程序提供一致的可重用样式或主题的东西。

我想它必须有一些预定义的元素来做事情，例如：

```
div.boxed {...} 
```

然后是一些主题或插件以一致的方式提供这些。像 ExtJS、YUI 和 GWT 这样的 Javascript 工具包都有自己的可换肤性，我想这是我想要的功能集，但独立于任何 Javascript 库。

（开源最好，但我们不介意付费）

**编辑：** 5 个很好的答案，但我已经看过所有这些框架，但它们还不足以满足我的需求。也许我正在寻找的东西不存在。或者我没有正确解释。我会让他们好好看看。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2008-11-27T00:03:15.880

[指南针](http://acts-as-architect.blogspot.com/2008/11/introducing-compass.html)真的为你改变了一切。

除了提供从网格到水平列表等 mixin 的所有内容之外，它还构建在 SASS 之上，因此您可以获得重用和变量等内容。

它使您甚至没有意识到的痛苦无痛。绝对值得一看。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2008-11-26T23:22:12.390

我是[Blue Print CSS](http://www.blueprintcss.org/)的粉丝，他们的重置和网格样式是一个很好的起点。特别是如果您关心拥有干净的 html 和 css。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-11-26T23:57:12.990

[960gs](http://www.960.gs)适合布局。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-11-26T23:12:50.193

只需使用[YUI Grids](http://developer.yahoo.com/yui/grids/)就可以了：P

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2008-11-28T06:46:31.307

指南针的长期计划之一是为设计师创建工具，以共享闪亮按钮甚至整个页面的设计。现在实际上是可能的，但是机制还没有很好的记录。但我很高兴你喜欢它，请随时在邮件列表中向我们发送错误消息。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2008-11-27T01:07:18.497

我是[BlueTrip](http://bluetrip.org/)的忠实粉丝，它自称是“一个功能齐全且美观的 CSS（级联样式表）框架，它结合了 Blueprint、Tripoli（因此得名）、Hartija 的打印样式表、960.gs 的简单性和Elements 的偶像，现在已经找到了自己的生命。”

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2010-07-20T04:38:05.273

我第二个 YAML。它用途广泛，文档齐全，具有构建工具等。表单组件会产生一些令人讨厌的悬停效果，我总是禁用这些效果，但 YAML 为您提供了构建自己的框架的良好基础，可能在 LESS 的帮助下，一个工具你很快就会发现不可或缺。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2008-11-27T10:45:16.287

我发现[YAML](http://www.yaml.de/en/)（Yet Another Multi-columned Layout）是一个优秀、全面、适应性强的多面手。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2009-04-14T00:57:23.580

[Emastic](http://code.google.com/p/emastic/)轻量级、基于 em 的流体和固定柱。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2010-05-10T03:19:10.460

还有[LESS](http://lesscss.org/) - LEaner cSS。

提供以下功能：

*   混合
*   变量
*   嵌套选择器
*   运营

# version-control - 您如何处理源代码管理中的 Visual Basic 6.0 frm 和 frx 文件？

> ID：322488
> 
> 赞同：23
> 
> 时间：2008-11-26T23:11:22.037
> 
> 标签：version-control, vb6, frm

无论我使用什么源代码控制系统（[Visual SourceSafe](https://en.wikipedia.org/wiki/Microsoft_Visual_SourceSafe)、[CVS](https://en.wikipedia.org/wiki/Concurrent_Versions_System)、[ClearCase](https://en.wikipedia.org/wiki/Rational_ClearCase)等），这总是很痛苦。合并 Visual Basic 窗体时，二进制 .frx 文件总是会导致问题。

我知道...我知道...你为什么要使用 Visual Basic...因为仍然有很多遗留应用程序使用它编写，虽然我不愿意承认，但我实际上喜欢使用它（*鸭子西红柿*）。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2008-11-26T23:24:19.593

您只需要硬着头皮将它们包含在版本控制系统中。不幸的是，它们*确实*包含源中其他任何地方都不可用的信息。（例如，添加到 ImageList 控件的位图。）如果丢失了这些文件，则无法正确重建应用程序。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2008-11-27T07:55:03.587

Frx 合并是一个主要的痛苦。如果您的版本控制系统允许锁定，我为什么建议您在 frx 文件上使用它以避免合并。例如，Subversion 支持锁定以避免编辑位图和其他二进制文件时出现问题。

话虽如此，我和我的公司在 Visual Basic 6.0 CAD/CAM 项目上使用 Subversion 已经超过五年了，并且只遇到了几次合并 frx 的问题。

在所有情况下，解决问题都很简单。主要是由一个人备份他的表格并通过剪切和粘贴手动解决问题。如果有人在其中一个有很多位图的表单上做主要工作，那么我们确保我们锁定它并尽快完成项目的那部分。

PS 不要为 Visual Basic 的 FRX 奇怪之处道歉。任何时候两个人编辑相同的位图、WAV 或软件将依赖的任何其他类型的二进制文件，其他软件包都会出现同样的问题。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-05-27T17:58:54.837

我在 ClearCase 上工作并偶然发现了完全相同的问题，而谷歌查询让我最终来到了这里。由于这里的答案并没有真正提供有关如何在 ClearCase 上处理这些文件的技术细节，因此请允许我添加我今天所做的以解决我的问题。

*问题：*

.frx 文件是使用 ClearCase 中的“compressed_files”类型创建的，它不支持合并，并且可能会产生冲突，使不知情的用户感到困惑（并让您在 CM 团队中致电支持）。

*解决方案：*

我们将遵循的整个脚本在此[IBM 技术说明中进行了描述](http://www.ibm.com/developerworks/rational/library/07/0424_hu/index.html)

1.  首先，您需要了解您希望对二进制文件进行哪种类型的处理：NEVER_MERGE 或 COPY。

    可以在其他[IBM 技术说明中找到对这两种新类型的引用](http://www-01.ibm.com/support/docview.wss?rs=984&uid=swg21123371)

    我个人为 .frx 文件选择 COPY 类型

    您需要使用 ClearCase Type Explorer 创建新类型。

    我建议您首先在某处的测试 VOB 上创建新类型。一旦您对测试感到满意，请在您的管理 VOB 中创建新类型。如果你在 UCM 上工作，那将是你的 PVOB(s) 级别。无论哪种情况，请确保将新类型声明为 Global。如果您不在 UCM 上工作，并且没有管理员 VOB，则必须在要使用它的所有单个 VOB 中创建新类型。

    只需按照上述技术说明中的说明进行操作即可。

    **注意，重要：**如果您在管理 VOB 中创建它们之前在测试 VOB 中创建了新类型（假设您的测试 VOB 在管理 VOB 下），则必须从“较低”VOB 中删除它们。删除元素类型会删除此类型的所有实例，因此不要创建此新类型来测试真实文件，因为从较低级别的 VOB 中删除类型将删除与其关联的所有文件！

    小心不要丢失任何重要数据！

2.  您需要确保将使用正确的新类型创建任何新的 .frx 文件。

    为此，您需要更改“魔术文件”。将更改集中到魔术文件是一个好主意（而不是必须在每个单独的客户端上进行更改）。您想在服务器（例如您的 VOB 服务器）上更改它一次，并让人们使用名为“MAGIC_PATH”的环境变量来指向它。

    请参阅此[IBM 技术说明](http://www-01.ibm.com/support/docview.wss?rs=0&uid=swg21127381)

    在 MAGIC_PATH 位置复制并重命名 default.magic 文件后，您需要更改 .frx 文件的定义。

    在默认的魔法文件中实际上有两个条目：

    ```
    (...)

    # Match non-printable files by name

    (...)

    vb_form_compiled vb_derived compressed_file : !-printable & -name "*.[fF][rR][xX]" ;

    (...)

    # assumed to be binary

    (...)

    vb_form_compiled vb_derived compressed_file : -name "*.[fF][rR][xX]" ; 
    ```

    我对它们都进行了评论，并在魔术文件的最后一个条目之前添加了以下行：

    ```
    # New COPY type:

    frx_visual_basic vb_derived COPY : -name "*.[fF][rR][xX]" ;

    # catch-all, if nothing else matches
    compressed_file : -name "*" ;

    #EOF 
    ```

    每个定义 MAGIC_PATH 环境变量的客户端现在都应该正确选择它，因此任何使用 .frx 后缀创建的新文件都将具有“COPY”元素类型。

3.  如果您的 VOB 中已有 .frx 文件，您希望将它们更改为新类型：
    *   锁定 VOB
    *   从 DOS 提示符（从您的 VOB 顶部）在 Windows 上使用以下命令：

        ```
        cleartool find . -all -name "*.frx" -exec "cleartool chtype COPY %CLEARCASE_XPN%" 
        ```

        这会将所有 *.frx 文件的元素类型更改为新的 COPY 类型

    *   解锁 VOB

        您需要对所有 VOB 执行此操作。

注意：此答案顶部的第一个技术说明指出“Rational ClearCase Remote Client 不支持这种类型的合并（即 COPY）。” 从 ClearCase 7.0.1 开始，从我今天所做的测试来看，现在支持这一点。

# validation - 您将使用哪些规则来验证澳大利亚电话号码？

> ID：322493
> 
> 赞同：8
> 
> 时间：2008-11-26T23:14:05.137
> 
> 标签：validation, phone-number

如何全面验证澳大利亚电话号码？我正在编写的应用程序需要这个。您可以假设它是从澳大利亚境内拨打的。我想使用白名单方法。

到目前为止，这是我的规则（在删除任何空格之后）：-

1.  以 13 开头，长度为 6 位
2.  以 1300 开头，长度为 10 位
3.  以 0 开头（但不是 0011，因为这是国际拨号），长度为 10 位
4.  以 +61 开头，后跟 9 位数字
5.  以 (0_) 开头，后跟 8 位数字（其中 _ 是 1-9）

有什么我错过的吗？

需要区号，因为当用户处于不同状态时，我们可能会在一个状态下从我们的传真服务器发送传真。

（我不是问如何根据上述规则制作正则表达式，而是问这些规则是否正确）。

另请参阅：
[英国电话号码](https://stackoverflow.com/questions/32401/validate-a-uk-phone-number)
[美国电话号码](https://stackoverflow.com/questions/175488/us-phone-number-verification)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2008-11-27T01:54:27.480

不久前我做过类似的事情。unthinkableMayhem 提到的维基百科页面是一个很好的起点。

一年前，我的规则是这样的：

```
02[3-9]\d{7}  NSW/ACT
03[4-9]\d{7}  VIC/TAS
07[3-9]\d{7}  QLD
08\d{8}       SA/NT/WA

04[\d]{8}     Moblies  04x[123] = Optus,  04x[456] = Voda, 04x[0789] = Telstra

0500[\d]{6}   Find me anywhere server
0550[\d]{6}   VoIP
059[\d]{7}    Enum

13[\d]{4}     Local rate
1300[\d]{6}   Local rate

1800[\d]{6}   Free call

0198[\d]{2}   Data networks (local call anyway I think)
0198[\d]{6}

190[\d]{7}    Premium rate 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-11-27T02:00:09.390

基于以前的一些答案（我将使用正则表达式，因为它更整洁）：

1.  删除任何空格或匹配的 ( ) 对
2.  如果以下之一匹配，则返回数字：
    1.  1[38][0-9]{4}
    2.  1300[0-9]{6}
    3.  ([(0),(+61)][23478]){0,1}[1-9][0-9]{7}

请注意，有效的区号值为 [23478]。我还假设仍然存在 1800 个数字。我想也可能有 1900 个数字。

此外，000 和 112 是有效的紧急号码：根据您的具体用例，您可能希望明确允许或拒绝这些号码。如果您要存储“这是我的电话号码”，那么您可能希望禁止紧急号码，但对于拨号计划之类的东西，您可能希望允许它们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-11-27T01:27:37.287

0011 不是唯一的国际访问代码。例如，通过传真呼叫海外您应该使用 0015 - 它避免了压缩的语音剪辑效果，这对传真（或数据，如果您碰巧使用调制解调器）不利。我的办公电话数据库在一些国际传真号码上有 0015 前缀。还有其他特殊用途的国际拨号代码。

我仍然看到手机号码写成 (0411) 123 456

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-11-26T10:06:08.120

如需最终列表，请尝试[https://github.com/googlei18n/libphonenumber](https://github.com/googlei18n/libphonenumber)

> Google 的通用 Java、C++ 和 JavaScript 库，用于解析、格式化、存储和验证国际电话号码。Java 版本针对在智能手机上运行进行了优化，自 4.0（Ice Cream Sandwich）起就被 Android 框架使用。

你可以在这里测试它：[https ://rawgit.com/googlei18n/libphonenumber/master/javascript/i18n/phonenumbers/demo-compiled.html](https://rawgit.com/googlei18n/libphonenumber/master/javascript/i18n/phonenumbers/demo-compiled.html)

这对我的小工作来说太过分了，我概括了我的测试，但是那个库可以让你测试你的规则:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-11-27T00:05:25.110

这可能是你所追求的：

[http://www.comlaw.gov.au/comlaw%5Cmanagement.nsf/lookupindexpagesbyid/IP200506356?OpenDocument](http://www.comlaw.gov.au/comlaw%5Cmanagement.nsf/lookupindexpagesbyid/IP200506356?OpenDocument)

1997 年电信编号计划 建立运输服务编号和与提供运输服务有关的号码使用框架，指定与提供运输服务有关的号码，并建立分配和运输服务的框架号码的可移植性。

这是一份 261 页的简短文档，包含您需要知道的所有内容：)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-11-26T23:22:23.123

我也很想删除括号。我仍然偶尔会看到类似“(0212) 34 5678”的电话号码。

008 号码还在使用吗？1800怎么样？我认为这是现在类似于 1300 的有效前缀。

# xml - LINQ 或 XSLT 在 Visual Basic 9 中将一个元素转换为另一个元素

> ID：322496
> 
> 赞同：2
> 
> 时间：2008-11-26T23:14:31.877
> 
> 标签：xml, vb.net, linq, xslt, transform

精简版：

任何人都可以在 LINQ to XML for VB 或 XSLT 中建议或提供一个示例，说明如何将一个 XML 元素更改为另一个（无需硬编码所有未更改元素的逐个元素副本）？

背景：

我有一个我认为格式正确的 XML 文件，其中包含一个根条目`<collection`> 和多个`<dvd`> 元素。在 DVD 中，有流派和标签，如下所示。（为简单起见，我删去了很多其他元素）。

我想要做的是将任何`<Tag`可能存在的 > 元素变成一个额外的`<Genre`>。例如，在下面的条目中，我需要添加`<Genre`>Kids `</Genre`>。（我意识到它实际上是 TAG 元素的 NAME 属性，我希望将其转换为 GENRE 元素，但如果我什至可以弄清楚如何创建一个名为“Tag”的新 GENRE，我会走得更远并且可能会解开其余的问题。）

我从来没有对 XML 做过很多事情。我的理解是，我可以使用 XSLT 转换文件和 XSLCompiledTransform，或者我可以使用 LINQ to XML（我有 Visual Basic 9，并且更愿意在 VB 中完成这一切）。[我相信还有许多其他方法。]

麻烦的是，我找不到任何 XSLT 或 LINQ 语法示例来告诉我如何将一个元素转换为另一个元素。我可以写出足够多的 LINQ 来一个一个地复制所有元素，但是必须有一种比硬编码所有不变元素的副本更简单的方法！（必须有！）

因此，如果知道的人可以为我提供一个示例或帮助我了解一些 LINQ 或 XSLT 中的入门代码，我将永远感激不尽（好吧，也许不是永远，但至少在很长一段时间内！）。

谢谢。

示例 XML：

```
<Collection>
  <DVD>
    <ID>0000502461</ID>
    <Title>Cirque du Soleil: Alegría</Title>
    <Released>2002-05-31</Released>
    <RunningTime>90</RunningTime>
    <Genres>
      <Genre>Family</Genre>
      <Genre>Music</Genre>
    </Genres>
    <Overview>What if anything were possible? What if ...
    </Overview>
    <Notes/>
    <Tags>
      <Tag Name="Kids" FullName="Kids"/>
    </Tags>
  </DVD>
</Collection> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-11-26T23:55:00.250

使用最基本和最强大的 XSLT 设计模式之一：覆盖[**标识模板**](http://www.w3.org/TR/xslt#copying)，人们将编写这个非常简单的转换来用“主题”元素替换每个“流派”元素：

```
<xsl:stylesheet 版本="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

 <xsl:输出省略-xml-declaration="yes"/>

    <xsl:template match="node()|@*">
      <xsl:复制>
         <xsl:apply-templates select="node()|@*"/>
      </xsl:copy>
    </xsl:模板>

    <xsl:template match="流派">
      <主题>
         <xsl:apply-templates select="node()|@*"/>
      </主题>
    </xsl:模板>
</xsl:样式表>

```

针对提供的源 XML 文档应用时：

```
<收藏>
    <DVD>
        <ID>0000502461</ID>
        <Title>太阳马戏团：Alegría</Title>
        <发布>2002-05-31</发布>
        <RunningTime>90</RunningTime>
        <体裁>
            <体裁>家庭</体裁>
            <流派>音乐</流派>
        </流派>
        <Overview>如果一切皆有可能呢？如果... </Overview>
        <注意事项/>
        <标签>
            <Tag Name="Kids" FullName="Kids"/>
        </标签>
    </DVD>
</收藏>

```

产生了想要的结果：

```
<收藏>
    <DVD>
        <ID>0000502461</ID>
        <Title>太阳马戏团：Alegría</Title>
        <发布>2002-05-31</发布>
        <RunningTime>90</RunningTime>
        <主题>
            <体裁>家庭</体裁>
            <流派>音乐</流派>
        </主题>
        <Overview>如果一切皆有可能呢？如果... </Overview>
        <注意事项/>
        <标签>
            <Tag Name="Kids" FullName="Kids"/>
        </标签>
    </DVD>
</收藏>

```

样式表中的第一个模板是身份规则。它复制任何匹配的节点，并以递归方式将模板应用于其属性或子节点。如果不存在其他模板，则此模板会创建与源 xml 文档相同的副本，因此得名。

当有更具体的模板（为匹配的节点指定更具体的细节，例如名称和/或其他条件）时，称为“覆盖”更通用的模板。这意味着选择更具体的模板来处理节点。

使用这种极其强大的设计模式，只需几行代码就可以轻松实现以下处理：

1.  删除所有满足某个条件的节点。
2.  重命名满足某些条件的所有节点。
3.  修改所有满足某个条件的节点的内容

同时完整地复制所有其他节点。

在我们的例子中，第二个模板更具体，它被选中用于处​​理每个名为“流派”的元素。它所做的只是创建一个名为“Topics”的元素，并在其中将模板应用于所有当前节点属性和子节点。

**最后**，*以下转换将为每个“标签”元素添加一个新的“流派”元素到“流派”的子元素*：

```
<xsl:stylesheet 版本="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

 <xsl:输出省略-xml-declaration="yes"/>

    <xsl:template match="node()|@*">
      <xsl:复制>
         <xsl:apply-templates select="node()|@*"/>
      </xsl:copy>
    </xsl:模板>

    <xsl:template match="流派">
      <xsl:复制>
         <xsl:apply-templates select="node()|@*"/>
         <xsl:apply-templates select="../Tags/Tag" mode="Gen"/>
      </xsl:copy>
    </xsl:模板>

    <xsl:template match="Tag" mode="Gen">
      <类型>
        <xsl:value-of select="@Name"/>
      </体裁>
    </xsl:模板>
</xsl:样式表>

```

结果再次符合要求：

```
<收藏>
    <DVD>
        <ID>0000502461</ID>
        <Title>太阳马戏团：Alegría</Title>
        <发布>2002-05-31</发布>
        <RunningTime>90</RunningTime>
        <体裁>
            <体裁>家庭</体裁>
            <流派>音乐</流派>

```

```
 <Genre>Kids</Genre> 
```

```
        </流派>
        <Overview>如果一切皆有可能呢？如果... </Overview>
        <注意事项/>
        <标签>
            <Tag Name="Kids" FullName="Kids"/>
        </标签>
    </DVD>
</收藏>

```

更多使用“身份规则”模式的代码片段可以在[**这里**](http://www.dpawson.co.uk/xsl/sect2/identity.html)找到。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-26T23:25:01.900

您可以将任何节点与 匹配`node()`，如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="2.0"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

<!-- Uncomment to remove Tags elements -->
<!-- <xsl:template match="Tags" /> -->

<xsl:template match="Genres">
    <xsl:copy>
        <xsl:apply-templates select="@*|node()" />
        <xsl:for-each select="../Tags/Tag">
            <xsl:element name="Genre">
                <xsl:value-of select="@Name" />
            </xsl:element>
        </xsl:for-each>
    </xsl:copy>
</xsl:template>

<!-- Default rule: Copy node and descend -->
<xsl:template match="@*|node()">
        <xsl:copy>
                <xsl:apply-templates select="@*|node()"/>
        </xsl:copy>
</xsl:template>

</xsl:stylesheet> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-26T23:24:31.793

您是否正在寻找这样的东西：

```
 <xsl:template match="Tag">
    <xsl:element name="Genre">
      <xsl:value-of select="@Name"/>           
    </xsl:element>    
  </xsl:template> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-09-05T17:37:51.163

我在 VB9 中也有同样的需求，想使用 Linq 而不是 XSL。我发现了这个：http: [//msdn.microsoft.com/en-us/library/bb669154.aspx](http://msdn.microsoft.com/en-us/library/bb669154.aspx)，它工作得非常好。

# iphone - 如何使用可选方法创建协议？

> ID：322498
> 
> 赞同：137
> 
> 时间：2008-11-26T23:15:30.593
> 
> 标签：iphone, objective-c

我注意到在 iPhone SDK 中定义的几个协议中标记为可选的方法，例如`UIActionSheetDelegate`协议。

如何定义自己的协议，并将一些方法设置为可选？

* * *

## 回答 #1

> 赞同：258
> 
> 时间：2008-11-26T23:21:34.950

从“[正式协议](https://developer.apple.com/library/ios/documentation/cocoa/conceptual/ProgrammingWithObjectiveC/WorkingwithProtocols/WorkingwithProtocols.html)”的 Apple 页面：

> 可选协议方法可以使用@optional 关键字标记为可选。与@optional modal 关键字相对应，有一个@required 关键字来正式表示默认行为的语义。您可以使用@optional 和@required 将您的协议划分为您认为合适的部分。如果您不指定任何关键字，则默认为@required。

```
@protocol MyProtocol

- (void)requiredMethod;

@optional
- (void)anOptionalMethod;
- (void)anotherOptionalMethod;

@required
- (void)anotherRequiredMethod;

@end 
```

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2014-09-03T14:52:04.683

如果协议中的方法被标记为可选，则在尝试调用它之前必须检查对象是否实现了该方法。

例如，饼图视图可能会像这样测试段标题方法：

```
NSString *thisSegmentTitle;
if ([self.dataSource respondsToSelector:@selector(titleForSegmentAtIndex:)]) {
    thisSegmentTitle = [self.dataSource titleForSegmentAtIndex:index];
} 
```

respondsToSelector: 方法使用了一个选择器，它指的是编译后的方法的标识符。您可以通过使用 @selector() 指令并指定方法的名称来提供正确的标识符。

如果本例中的数据源实现了该方法，则使用标题；否则，标题保持为零。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2015-05-28T13:36:05.287

协议是一组规则。我们可以创建如下示例的协议：

**测试协议.h**

```
@protocol TestProtocols <NSObject>
    @optional
    -(void)testMethodOptional;

    @required  // by default
    -(void)testMethodRequired;
@end 
```

执行：

**测试类.h**

```
#import "TestProtocols.h"
@interface TestClass : NSObject  <TestProtocols>

@end 
```

**测试类.m**

```
#import "TestClass.h"
@implemenation TestClass
    //optional to implement 
    -(void)testMethodOptional{
     // Your Code
    }

    //required to implement 
    -(void)testMethodRequired{
     // Your Code
    }
@end 
```

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2008-11-26T23:21:24.717

在方法声明之前使用`@optional`关键字使其可选。就那么简单！

```
// myProtocol.h
@protocol myProtocol
- (void)myMandatoryMethod:(id)someArgument;
@optional
- (void)myOptionalMethod:(id)someArgument;
@end
```

```
// myClass.m
@interface myClass : someSuperClass <myProtocol>
    //...
@end
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2014-05-07T07:26:32.287

协议的行为与抽象类相同，因此 @optional 关键字定义了那些对于实现是可选的方法。

所以，在代码中， someMethod1、someMethod2 和 someMethod4 是必需的方法（必须实现）。someMethod3 是可选的——如果我们没有实现这个方法，编译器不会抛出任何警告。

```
@protocol myPrtocol<NSObject>

-(void)someMethod1:(id)someArgument;
-(void)someMethod2:(id)someArugument;

@optional

-(void)someMethod3:(id)someArgument;

@required //by default

-(void)someMethod4:(id)someArgument;

@end

// sampleClass.m
@interface sampleClass : someSuperClass <myProtocol>
//...
@end 
```

# php - 从 NuSOAP 迁移到 PHP5 SOAP

> ID：322510
> 
> 赞同：6
> 
> 时间：2008-11-26T23:20:43.220
> 
> 标签：php, soap, wsdl, port, nusoap

我一直在使用依赖于 NuSOAP 的 PHP4 编写脚本。现在，我正在尝试将其移至 PHP5，并在那里使用对 SOAP 的内置支持。

```
$wsdlPath = "";    // I have obviously set these variables to something meaningful, just hidden for the sake of security
$apiPath = "";
$username = "";
$password = "";

// PHP5 style
$client = new soapclient($wsdlPath, array('login'=>username,                
'password'=> $password,
'soap_version'=> SOAP_1_2,
'location'=> $apiPath,
 'trace'=> 1));

// PHP4/NuSOAP style
$client = new soapclient($wsdlPath, true);  
client->setEndpoint($apiPath);                          
$client->setCredentials($username, $password);
$client ->loadWSD); 
```

PHP5 版本抛出以下异常堆栈跟踪：

```
EXCEPTION=SoapFault exception: [WSDL] SOAP-ERROR: Parsing WSDL: Couldn't load from 'http://external-nbb.napi.norwegian.no.stage.osl.basefarm.net/api/napi1300?wsdl' in /home/eisebfog/public_html/database/norwegian.php:31
Stack trace:
#0 /home/eisebfog/public_html/database/norwegian.php(31): SoapClient->SoapClient('http://external...', Array)
#1 /home/eisebfog/public_html/database/index.php(53): require_once('/home/eisebfog/...')
#2 {main} 
```

现在，NuSOAP 版本确实可以工作，而纯 PHP5 则不行——不需要脑外科医生就可以发现我做错了什么。我可以访问 .htaccess 文件，并通过 phpinfo() 确保我正在正确运行 NuSOAP 并在我应该运行 PHP5 时运行 PHP4/Nusoap。

基本上，我对 Web 服务和肥皂不是很好 - 但如果有人有任何想法，我将不胜感激任何关于我做错了什么以及如何在 PHP5 中迁移到本机肥皂的意见。顺便说一句，我首先希望这一举措的原因是假定在本地肥皂中节省资源。我也很感激这两个解决方案之间的基准测试链接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-03T23:22:15.010

确保 NuSoap 和 PHPv5-SOAP 在同一台服务器上运行。如果我没有完全错，两个库都使用相同的类名。如果您确保不包含 NuSopa 文件，它可能会更好地工作？还要验证 SOAP 库是否已加载：

```
if(!extension_loaded('soap')){
  dl('soap.so'); // Actually a deprecated method. See "notes" at http://no.php.net/dl
} 
```

我猜你提到的版本字段被定义为“SOAP 1.1”或类似的？

最良好的祝愿 ：）

顺便说一句：你在做什么？交换从飞行员到机场的延误？或者也许是一种网络服务，可以减少在 Osl 运送行李的等待时间？:p

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-30T21:03:08.617

在没有测试的情况下，我有两个建议：

首先，将您的 error_reporting 设置为尽可能高（在创建 SoapClient 之前）：

```
error_reporting( E_ALL ); 
```

如果服务器端的身份验证有问题，PHP 会抛出警告。在大多数情况下，它会告诉您出了什么问题。

第二：我不知道您是否可以将“位置”选项与 wsdl 的 URL 一起指定。从理论上讲，wsdl 会告诉您的客户端，操作的端点在哪里，因此您不必费心。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-17T11:38:20.977

我们在 PHP5 内置 SOAP 客户端尝试使用基于 .NET 的 Web 服务时遇到了非常相似的问题。此外，WSDL 解析失败报告无效模式。将架构定义放入单个本地文件没有帮助。

我们放弃了尝试，改用 NuSOAP，它确实有效。

然而，NuSOAP 也远非完美。现在我在解析 1MB+ 响应时遇到内存不足的情况。删除所有讨厌的调试代码有一点帮助，但不是彻底。

因此，目前 PHP 中似乎没有 100% 可互操作/功能性的 SOAP 客户端实现。

# asp.net - 如何测试 AJAX 安装

> ID：322529
> 
> 赞同：1
> 
> 时间：2008-11-26T23:29:47.447
> 
> 标签：asp.net, ajax, debugging

有没有一种简单且万无一失的方法可以测试 AJAX 安装？我们在使用 AJAX 从 JS 文件调用 webscript 时遇到问题。错误是未定义“ServiceLib”。该错误在 Google 上获得了一些点击。

我们向客户的应用程序添加了一些 AJAX 功能。这在办公室的开发机器和我们的 IIS 服务器上运行良好，在客户的测试网站上运行良好，但是当我们将应用程序放在实时站点上时，webscript 调用失败。

几天前，客户在他们的实时服务器上安装了 AJAX。我们已经验证了服务库文件存在于正确的位置。

我们已经花了几个小时没有解决方案，但仍然不确定我们的代码是否有问题，或者他们的服务器有问题，或者就此而言，是否正确安装了 AJAX。我们的部分问题是我们无法访问他们的实时服务器，所以除了更改我们自己的代码中的行，将应用程序文件提供给我们那里的联系人，看看会发生什么，我们无能为力。联系人知道的比我们少，所以我们在盲目地工作。我知道这是一个奇怪的情况，但其中涉及到官僚主义。

非常感谢迈克·托马斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-11-26T23:32:49.560

Firebug 可能会有所帮助 - 如果您可以让远端的人安装它，它可能能够通过其控制台让您深入了解 ajax 请求的情况，该控制台记录并让您能够查看返回所有ajax请求的数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-11-26T23:38:57.973

我在想...

该过程分为三个部分：
1）浏览器中的客户端javascript逻辑将HTTP请求发送到服务器。
2) 服务器端 ASP.NET 页面对其进行处理并做出响应。
3）客户端逻辑接收响应并更新网页，或其他。

用更简单的诊断方法替换每个部分，以查看中断在管道中的哪个位置。

例如，创建一个诊断网页来替代#1，直接调用服务器端页面。

如果这似乎可行，请创建一个非常简单的不同服务器端 ASP.NET 页面，只需记录一些内容，以证明真正的 #1 执行您的诊断 #1 所做的事情。

你知道，你的标准调试二进制搜索......

# intellij-idea - 如何让 IntelliJ IDEA 运行包中的所有测试，包括子包

> ID：322561
> 
> 赞同：87
> 
> 时间：2008-11-26T23:49:03.677
> 
> 标签：intellij-idea

如果我单击一个包并执行 control-shift-F10 它只会在该包中查找并运行 JUnit 测试 - 但我真的希望它递归到子包并运行它们。

更新：看起来它还有其他问题。当我在一个有测试的包上运行它时，它仍然抱怨没有测试（但如果我打开一个 JUnit 测试，我可以很好地运行它）。

* * *

## 回答 #1

> 赞同：184
> 
> 时间：2015-02-10T23:24:53.383

1.  运行->编辑配置...
2.  创建一个新的junit测试配置
3.  将其命名为“所有测试”
4.  包括整个包裹
5.  应用/运行。

![在此处输入图像描述](https://i.stack.imgur.com/6T5Sg.png)

来自@andersoyvind 的评论。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2008-11-26T23:56:10.777

运行所有测试的默认组合键是`Ctrl`+ `Shift`+`F10`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-03-14T11:58:35.163

感谢[csauve](https://stackoverflow.com/users/65580/csauve) [response](https://stackoverflow.com/a/28443830/968925)我已经解决了这个问题。这可能是对他的回答，但我不知道如何在其中包含图像。

***可以通过Run > Edit Configurations访问***运行/调试配置*对话框。使用这些选项来创建一个运行所有测试的选项：*

 *[![所有测试的运行/调试配置](https://i.stack.imgur.com/KYGya.png)](https://i.stack.imgur.com/KYGya.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-12-29T20:36:36.873

对于**Python**用户：

1.  包含`__init__.py`在每个子文件夹中
2.  `dummy_test.py`在您的测试目录的根目录中创建一个，例如：

```
class DummyTest(TestCase): 
    pass 
```

（[归功于这个答案](https://stackoverflow.com/a/70072638/3508719)）

# c# - 如何在 .Net 中将 Char 转换为 Keycode？

> ID：322580
> 
> 赞同：2
> 
> 时间：2008-11-27T00:04:28.123
> 
> 标签：c#, winapi

我想将一个字符串转换为一系列键码，以便我可以通过 PostMessage 将它们发送到控件。我需要模拟实际的键盘输入，我想知道是否只有大量的 switch 语句是将字符转换为正确的键码的唯一方法，或者是否有更简单的方法。

====

得到了我的解决方案 - [http://msdn.microsoft.com/en-us/library/ms646329(VS.85).aspx](http://msdn.microsoft.com/en-us/library/ms646329(VS.85).aspx)

VkKeyScan 将为任何字符返回正确的键码。

（是的，我一般不会这样做，但是在进行自动化测试并确保正确响应键盘按下时，它足够可靠地工作）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-11-27T00:25:21.403

雷蒙德说这是个坏主意。

[http://blogs.msdn.com/oldnewthing/archive/2005/05/30/423202.aspx](http://blogs.msdn.com/oldnewthing/archive/2005/05/30/423202.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-11-27T00:28:22.537

对于 Az 1-9，您可以尝试将 char 构建到 keycode 字符串`string.Format("KEY_KEY_{0}", char.ToString())`中，然后使用 Enum.Parse 提取 Enum 值，但这有点麻烦

或查看[如何将 uint](http://www.experts-exchange.com/Programming/Languages/C_Sharp/Q_23092844.html) keycode 转换为专家性交换上的 Keys 枚举，然后解决棘手的情况。

我同意 switch 语句有点糟糕

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-29T21:25:20.473

得到了我的解决方案 - [http://msdn.microsoft.com/en-us/library/ms646329(VS.85).aspx](http://msdn.microsoft.com/en-us/library/ms646329(VS.85).aspx)

VkKeyScan 将为任何字符返回正确的键码。

（是的，我一般不会这样做，但是在进行自动化测试并确保正确响应键盘按下时，它足够可靠地工作）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-11-29T22:28:07.727

将一串击键发送到窗口的更可靠的等待是使用 SendKeys 类

```
 System.Windows.Forms.SendKeys("This is a test");
 System.Windows.Forms.SendKeys("This is sends CTRL+J ^j"); 
```

这将更具可预测性，并且应该可以为您节省一些时间。

# user-interface - 经常被忽略的重要 UI 功能

> ID：322585
> 
> 赞同：17
> 
> 时间：2008-11-27T00:09:52.980
> 
> 标签：user-interface, usability, missing-features

我真的很想知道我在开发的软件中是否遗漏了任何明显的东西。

大多数软件中经常缺少哪些您认为重要的用户界面功能？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2008-11-27T00:18:31.090

撤消对代码来说很讨厌，但对最终用户非常有用。

保存所有/任何窗口的位置和大小，以便在程序重新启动时恢复它们。

从可用性专家 (Aza Raskin) 那里阅读有关撤消的这篇文章：[当您的意思是撤消时，切勿使用警告](http://www.alistapart.com/articles/neveruseawarning)。编码撤消并不是那么难：示例[[1]](http://humanized.com/weblog/2007/09/14/undo-made-easy-with-ajax-part-1/)、[[1.5]](http://humanized.com/weblog/2007/09/21/undo-made-easy-with-ajax-part-15/)、[[2]](http://humanized.com/weblog/2007/10/22/undo_with_ajax_2/)。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2008-11-27T00:14:13.877

键盘快捷键

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2008-11-27T00:21:00.010

UI中通常会遗漏什么？没有！（字面意思是空的空间）。这个问题最好问“可以取出什么？”。当您必须考虑您的 UI 还需要什么时，您已经走得太远了。留出空白是 UI 程序员需要做的事情。没有人喜欢特征爬行。

![在此处输入图像描述](https://i.stack.imgur.com/U5mKx.png)

记住 KISS 规则。

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2008-11-27T00:41:53.663

这些是我经常发现做得不好甚至缺失的一些 UI 功能：

*   [正确恢复窗口状态](http://miksovsky.blogs.com/flowstate/2005/10/the_fractal_nat.html)。
*   符合普通（非初学者、非专家）用户的心理模型。
*   限制用户必须做出的选择的数量。
*   限制用户在使用应用程序时必须阅读的数量。
*   与在同一平台上运行的其他同类应用程序具有很强的一致性。
*   一个做得好的撤消/恢复工具。
*   正如其他人所说，上下文相关的帮助。
*   允许在没有鼠标帮助的情况下导航应用程序。
*   良好的多显示器支持。

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2008-11-27T00:12:44.143

*   一个帮助菜单，不仅仅是关于...
*   上下文相关帮助
*   工具提示

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2008-11-27T00:19:01.900

一个 API 和一个脚本语言，这样我就可以绕过 UI。

严重地。没有什么比通过一些重复的过程点击鼠标更乏味（而且容易出错）的了。

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2008-11-27T00:18:00.857

右键单击树视图和网格等内容的上下文菜单。

我们在工作中有一个记录管理应用程序，我必须不时使用它，而且他们没有右键单击树视图中的任何文档，因此您必须继续到屏幕底部将任务标记为完成 grrr，也没有键盘快捷键 grrr

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2008-11-27T00:31:35.637

1.  设计中的一致性......有太多“看起来”像程序员编写的应用程序。我压力不够！
2.  自动化... Office 有它，我希望更多的应用程序有。
3.  CLI ...如上所述，特别是如果它是一个重复的向导类型的过程
4.  模板/预设......像手刹......让生活更轻松，更不用说在培训过程中得心应手了
5.  不会妨碍您的错误/确认消息...除非用户需要立即采取行动，否则不要显示对话框。如果错误很明显，请为我修复，然后告诉我原因
6.  可扩展的用户界面。使用 WPF，这变得越来越容易，但是如果我在大型显示器上并且必须眯着眼睛看任何东西，那就很烦人了。更不用说我的点击准确性不是那么好。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2008-11-27T00:44:59.273

用户界面一致性。

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2008-11-27T00:59:36.953

我知道我过去曾因遗漏印刷支持而感到内疚。我永远不会使用它，但我的一些用户会使用它。

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2008-11-27T09:34:26.210

*   拖放
*   剪贴板

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2008-11-27T00:20:45.643

好的设计。

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2008-11-27T00:38:19.897

在您的对话框中留出空间，因此如果您将其国际化，您就有空间容纳更长的单词（想想意大利语）和更大的字体（想想中文）。

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2008-12-09T22:17:02.283

我将添加一些尚未提及的自己：

1.  在完成其他工作时可以保持打开状态的非模态表单。

2.  能够一次查看多个窗口（而不是一次只显示一个的选项卡）

3.  能够同时拥有单个窗口的多个视图，即拆分模式、窗格或实际的多个窗口到同一个对象中。

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2008-11-27T01:08:19.523

干净直观。

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2008-12-03T13:21:20.793

干净的图标。好的图标。有意义的图标。

我对应用程序中的许多图标感到非常失望——尤其是在 Windows 上 ;-)

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2008-12-05T17:17:56.367

对用户的实际*考虑*似乎经常被忽略：

*   使用对程序员有意义但对用户没有意义的术语
*   组织应用程序的工作流程以方便程序员，但不方便用户
*   一开始不考虑用户的工作流程，而是想方设法帮助他/她消除步骤和简化事情

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2008-12-05T18:46:44.300

能够使用拖放来自定义工具栏，并且能够删除/隐藏不需要的工具栏，而不会留下未使用的按钮，其唯一目的是恢复/取消隐藏它们。

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2008-12-31T07:25:21.037

1.  当应用程序执行超过一秒钟的操作时冻结应用程序。

2.  不向用户展示正在发生的事情，也不指出需要多长时间。

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2009-07-28T23:57:06.437

IMO，用户名和密码登录选项需要工作。我了解这些选项中的每一个都存在安全问题。每个应用程序的风险权衡是不同的，需要逐个应用程序进行评估。

经常被遗忘或实施不佳的功能包括：

*   记住账号
*   忘记密码
    *   如果您有限制性密​​码策略，请告诉我它是什么！
    *   # 个字符的范围，无特殊字符，必需的数字或大写字母等
*   忘了用户名了吗
    *   如果我的用户名不是我的电子邮件地址，请提示您的用户名政策

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2008-11-27T00:48:10.407

有点太笼统的问题了。这将取决于应用程序做什么。我看到 gui 应用程序中经常缺少的一件事是一种简单的方法来撤消错误，不仅在您正在操作的对象中，而且在程序 UI 元素中。错误地关闭了一些浮动选项面板或工具栏，然后不知道启用的东西在哪里让我感到沮丧。是在windows下吗？还是在视图下？是这个吗？没有那个完全是为了别的东西。呸！它叫什么？

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2008-11-27T10:07:48.797

使用选项卡按钮循环浏览链接和字段。

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2008-12-05T16:46:22.217

左键单击拖动以突出显示，右键单击上下文菜单并选择复制突出显示的文本。在一些用 Java 编码的应用程序中发现缺失。

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2010-04-13T07:17:18.690

与其他窗口和屏幕板对齐的窗口。KDE 和 Winamp 做到了这一点，并且是最著名的。为什么一大堆其他应用程序和 DE 不这样做呢？

# objective-c - @class 与 #import

> ID：322597
> 
> 赞同：715
> 
> 时间：2008-11-27T00:20:17.140
> 
> 标签：objective-c, cocoa, cocoa-touch

据我了解，如果 ClassA 需要包含 ClassB 标头，而 ClassB 需要包含 ClassA 标头以避免任何循环包含，则应该使用前向类声明。我也明白 an`#import`很简单`ifndef`，因此包含只发生一次。

我的询问是这样的：什么时候使用`#import`，什么时候使用`@class`？有时，如果我使用`@class`声明，我会看到常见的编译器警告，如下所示：

> `warning: receiver 'FooController' is a forward class and corresponding @interface may not exist.`

真的很想理解这一点，而不是仅仅删除`@class`前向声明并投入`#import`以使编译器给我的警告静音。

* * *

## 回答 #1

> 赞同：756
> 
> 时间：2008-11-27T00:33:10.813

如果您看到此警告：

> 警告：接收器“MyCoolClass”是一个转发类，对应的@interface 可能不存在

您需要`#import`该文件，但您可以在实现文件 (.m) 中执行此操作，并使用`@class`头文件中的声明。

`@class`不会（通常）消除对`#import`文件的需求，它只是将需求向下移动到更接近信息有用的地方。

**例如**

如果你说`@class MyCoolClass`，编译器知道它可能会看到如下内容：

```
MyCoolClass *myObject; 
```

除了有效类之外，它不必担心任何事情`MyCoolClass`，它应该为指向它的指针保留空间（实际上，只是一个指针）。因此，在您的标题中，`@class`90% 的时间就足够了。

但是，如果您需要创建或访问`myObject`的成员，则需要让编译器知道这些方法是什么。此时（可能在您的实现文件中），您需要`#import "MyCoolClass.h"`, 告诉编译器除了“这是一个类”之外的其他信息。

* * *

## 回答 #2

> 赞同：183
> 
> 时间：2009-08-29T00:34:16.193

三个简单的规则：

*   头文件（文件）中只有`#import`超类和采用的协议。`.h`
*   `#import`所有类和协议，您在实现（`.m`文件）中发送消息。
*   其他一切的前向声明。

如果您在实现文件中进行前向声明，那么您可能做错了什么。

* * *

## 回答 #3

> 赞同：110
> 
> 时间：2008-11-27T11:23:57.550

查看[ADC上的 Objective-C 编程语言文档](https://developer.apple.com/legacy/library/documentation/Cocoa/Conceptual/OOPandObjC1/OOPandObjC1.pdf)

在定义类的部分下 | 类接口它描述了为什么这样做：

> @class 指令最大限度地减少编译器和链接器看到的代码量，因此是给出类名前向声明的最简单方法。简单来说，它避免了在导入文件时可能会出现的潜在问题，而这些文件又会导入其他文件。例如，如果一个类声明了另一个类的静态类型实例变量，并且它们的两个接口文件相互导入，则任何一个类都无法正确编译。

我希望这有帮助。

* * *

## 回答 #4

> 赞同：48
> 
> 时间：2008-11-27T00:33:04.243

如果需要，`#import`在头文件中使用前向声明，以及您在实现中使用的任何类的头文件。换句话说，你总是`#import`在你的实现中使用你的文件，如果你需要在你的头文件中引用一个类，也可以使用前向声明。

**例外情况**是您应该在`#import`头文件中继承一个类或正式协议（在这种情况下，您不需要在实现中导入它）。

* * *

## 回答 #5

> 赞同：24
> 
> 时间：2008-11-27T01:04:51.217

通常的做法是在头文件中使用@class（但您仍然需要#import 超类），并在实现文件中使用#import。这将避免任何圆形夹杂物，并且它可以正常工作。

* * *

## 回答 #6

> 赞同：24
> 
> 时间：2010-09-09T08:02:01.253

另一个优点：快速编译

如果包含头文件，则其中的任何更改都会导致当前文件也被编译，但如果类名包含为`@class name`. 当然，您需要在源文件中包含标头

* * *

## 回答 #7

> 赞同：18
> 
> 时间：2012-02-08T06:10:46.377

> 我的查询是这样的。什么时候使用#import，什么时候使用@class？

简单的回答：你`#import`还是`#include`有身体依赖的时候。否则，您使用前向声明 ( `@class MONClass`, `struct MONStruct`, `@protocol MONProtocol`)。

以下是一些常见的身体依赖示例：

*   任何 C 或 C++ 值（指针或引用不是物理依赖）。如果您将 a`CGPoint`作为 ivar 或属性，编译器将需要查看`CGPoint`.
*   你的超类。
*   您使用的方法。

> 有时，如果我使用@class 声明，我会看到一个常见的编译器警告，如下所示：“警告：receiver 'FooController' 是一个前向类，相应的@interface 可能不存在。”

编译器在这方面实际上非常宽松。它会丢弃提示（例如上面的提示），但是如果您忽略它们并且不`#import`正确，您可以轻松地丢弃您的堆栈。尽管它应该（IMO），但编译器并不强制执行此操作。在 ARC 中，编译器更加严格，因为它负责引用计数。发生的情况是编译器在遇到您调用的未知方法时会退回到默认值。每个返回值和参数都假定为`id`. 因此，您应该从代码库中消除所有警告，因为这应该被视为物理依赖。这类似于调用未声明的 C 函数。对于 C，参数假定为`int`.

您赞成前向声明的原因是您可以按因素减少构建时间，因为依赖性最小。使用前向声明，编译器看到有一个名称，并且在没有物理依赖时可以正确解析和编译程序，而无需看到类声明或其所有依赖项。干净的构建需要更少的时间。增量构建花费的时间更少。当然，您最终会花费更多时间来确保您需要的所有标题对每个翻译都是可见的，但这会在快速减少构建时间方面得到回报（假设您的项目并不小）。

如果您使用`#import`or`#include`代替，您将在编译器上投入大量不必要的工作。您还引入了复杂的标头依赖项。您可以将其比作蛮力算法。当你`#import`，你拖入了大量不必要的信息，这需要大量的内存、磁盘 I/O 和 CPU 来解析和编译源代码。

在依赖方面，ObjC 非常接近基于 C 的语言的理想选择，因为`NSObject`类型永远不是值——`NSObject`类型始终是引用计数的指针。因此，如果您适当地构建程序的依赖关系并在可能的情况下转发，那么您可以摆脱令人难以置信的快速编译时间，因为几乎不需要物理依赖。您还可以在类扩展中声明属性以进一步减少依赖。这对于大型系统来说是一个巨大的好处——如果您曾经开发过大型 C++ 代码库，您就会知道它所带来的不同。

因此，我的建议是尽可能使用前锋，然后到`#import`有物理依赖的地方。如果您看到警告或其他暗示身体依赖的警告 - 将它们全部修复。解决方法是`#import`在您的实现文件中。

在构建库时，您可能会将某些接口分类为一个组，在这种情况下，您会将`#import`引入物理依赖的库分类（例如`#import <AppKit/AppKit.h>`）。这可能会引入依赖关系，但库维护者通常可以根据需要为您处理物理依赖关系——如果他们引入了一个特性，他们可以最大限度地减少它对您的构建的影响。

* * *

## 回答 #8

> 赞同：11
> 
> 时间：2011-06-29T15:51:46.730

我看到很多“这样做”，但没有看到“为什么？”的任何答案。

那么：*为什么*你应该在你的标题中@class 而只在你的实现中使用#import？*由于必须一直使用@class和*#import ，您的工作量会增加一倍。除非你使用继承。在这种情况下，您将为单个@class 多次#importing。然后，如果您突然决定不再需要访问声明，则必须记住从多个不同的文件中删除。

由于#import 的性质，多次导入同一个文件不是问题。编译性能也不是真正的问题。如果是这样，我们几乎不会在我们拥有的每个头文件中都使用#importing Cocoa/Cocoa.h 之类的东西。

* * *

## 回答 #9

> 赞同：7
> 
> 时间：2012-01-04T06:32:03.173

如果我们这样做

```
@interface Class_B : Class_A 
```

意味着我们将 Class_A 继承到 Class_B 中，在 Class_B 中我们可以访问 class_A 的所有变量。

如果我们这样做

```
#import ....
@class Class_A
@interface Class_B 
```

这里我们说我们在程序中使用 Class_A，但是如果我们想在 Class_B 中使用 Class_A 变量，我们必须在 .m 文件中 #import Class_A（创建一个对象并使用它的函数和变量）。

* * *

## 回答 #10

> 赞同：5
> 
> 时间：2013-08-12T11:16:58.967

有关文件依赖项和#import 和@class 的额外信息，请查看：

[http://qualitycoding.org/file-dependencies/](http://qualitycoding.org/file-dependencies/ "#imports 疯了！ 如何驯服文件依赖") 这是一篇好文章

文章摘要

> # 头文件中的导入：
> 
> *   #import 你继承的超类，以及你正在实现的协议。
> *   前向声明其他所有内容（除非它来自具有主标头的框架）。
> *   尝试消除所有其他#imports。
> *   在自己的标头中声明协议以减少依赖关系。
> *   前向声明太多？你有一个大班。
> 
> # 在实现文件中导入：
> 
> *   消除不使用的杂乱无章的#imports。
> *   如果一个方法委托给另一个对象并返回它返回的内容，请尝试前向声明该对象而不是#importing它。
> *   如果包含一个模块会迫使您逐级包含连续依赖项，那么您可能有一组想要成为库的类。将其构建为带有主标头的单独库，因此所有内容都可以作为单个预构建块引入。
> *   #import 太多？你有一个大班。

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2011-05-18T15:42:16.573

当我发展的时候，我脑子里只有三件事不会给我带来任何问题。

1.  导入超类
2.  导入父类（当你有孩子和父母时）
3.  导入项目外部的类（如在框架和库中）

对于所有其他类（我的项目自身中的子类和子类），我通过 forward-class 声明它们。

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2013-01-07T12:18:18.223

如果你试图在你的头文件中声明一个变量或一个你还没有导入的属性，你会得到一个错误，说编译器不知道这个类。

你的第一个想法可能是`#import`它。
在某些情况下，这可能会导致问题。

例如，如果你在头文件、结构或类似的东西中实现了一堆 C 方法，因为它们不应该被多次导入。

因此，您可以告诉编译器`@class`：

> 我知道你不知道那个类，但它存在。它将在其他地方导入或实施

它基本上告诉编译器关闭并编译，即使它不确定这个类是否会被实现。

您通常会`#import`在**.m**和**.h**文件`@class`中使用。

 *** * *

## 回答 #13

> 赞同：0
> 
> 时间：2012-06-22T15:12:08.347

前向声明只是为了防止编译器显示错误。

编译器会知道有你在头文件中使用的名称来声明的类。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2013-07-18T11:15:21.150

仅当您要以编译器需要知道其实现的方式使用该类时，编译器才会抱怨。

前任：

1.  这可能就像你要从中派生你的类，或者
2.  如果您打算将该类的对象作为成员变量（尽管很少见）。

如果您只是将它用作指针，它不会抱怨。当然，您必须在实现文件中#import 它（如果您正在实例化该类的对象），因为它需要知道类内容才能实例化对象。

注意：#import 与#include 不同。这意味着没有所谓的循环导入。import 是一种要求编译器查看特定文件以获取某些信息的请求。如果该信息已经可用，编译器将忽略它。

试试这个，在 Bh 中导入 Ah 和在 Ah 中导入 Bh 不会有问题或抱怨，它也可以正常工作。

**何时使用@class**

仅当您甚至不想在标题中导入标题时才使用@class。这可能是您甚至不知道该类将是什么的情况。您甚至可能还没有该类的标题的情况。

这方面的一个例子可能是您正在编写两个库。一个类，我们称之为 A，存在于一个库中。该库包含来自第二个库的标头。该标头可能具有 A 指针，但再次可能不需要使用它。如果库 1 尚不可用，则使用 @class 不会阻止库 B。但是如果你要导入 Ah，那么库 2 的进度就会被阻止。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2016-09-27T13:33:19.473

这是一个示例场景，我们需要@class。

考虑如果您希望在头文件中创建一个协议，该协议具有相同类的数据类型的参数，那么您可以使用@class。请记住，您也可以单独声明协议，这只是一个示例。

```
// DroneSearchField.h

#import <UIKit/UIKit.h>
@class DroneSearchField;
@protocol DroneSearchFieldDelegate<UITextFieldDelegate>
@optional
- (void)DroneTextFieldButtonClicked:(DroneSearchField *)textField;
@end
@interface DroneSearchField : UITextField
@end 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2018-01-04T16:10:38.217

将@class 视为告诉编译器“相信我，这存在”。

将#import 视为复制粘贴。

出于多种原因，您希望最大限度地减少导入的数量。没有任何研究，首先想到的是它减少了编译时间。

请注意，当您从类继承时，不能简单地使用前向声明。您需要导入该文件，以便您声明的类知道它是如何定义的。

# sql - SQL插入相关表

> ID：322601
> 
> 赞同：10
> 
> 时间：2008-11-27T00:20:53.317
> 
> 标签：sql, sql-server, insert

在我看来，这似乎是 SQL/数据库开发中一直出现的问题，但是我对这一切都是新手，所以请原谅我的无知。

我有 2 张桌子：

```
CREATE TABLE [dbo].[Tracks](
    [TrackStringId] [bigint] NOT NULL,
    [Id] [bigint] IDENTITY(1,1) NOT NULL,
    [Time] [datetime] NOT NULL,
 CONSTRAINT [PK_Tracks] PRIMARY KEY CLUSTERED 
(
    [Id] ASC
) WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF,
        IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON,
        ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]

GO

ALTER TABLE [dbo].[Tracks] CHECK CONSTRAINT [FK_Tracks_AudioStreams]
GO

ALTER TABLE [dbo].[Tracks]  WITH CHECK ADD  CONSTRAINT
[FK_Tracks_TrackStrings]     FOREIGN KEY([TrackStringId])
REFERENCES [dbo].[TrackStrings] ([Id])
GO

ALTER TABLE [dbo].[Tracks] CHECK CONSTRAINT [FK_Tracks_TrackStrings]
GO 
```

和

```
CREATE TABLE [dbo].[TrackStrings](
    [Id] [bigint] IDENTITY(1,1) NOT NULL,
    [String] [nvarchar](512) NOT NULL,
 CONSTRAINT [PK_Strings] PRIMARY KEY CLUSTERED 
(
    [Id] ASC
) WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF,
        IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON,
        ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY] 
```

我想在轨道表中插入一个新条目。这还将涉及在 trackstrings 表中插入一个新条目，并确保 track 中的外键列 trackstringid 指向 trackstrings 中的新条目。实现这一目标的最有效方法是什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2008-11-27T00:28:24.317

首先，插入到`TrackStrings`，从列列表中省略主键列。这会调用其`IDENTITY`自动生成值的列。

```
INSERT INTO [dbo].[TrackStrings] ([String]) 
  VALUES ('some string'); 
```

其次，插入`Tracks`并指定它`TrackStringId`的函数，它返回由*当前范围内*的列[`SCOPE_IDENTITY()`](http://msdn.microsoft.com/en-us/library/ms190315(SQL.90).aspx)生成的最新值。`IDENTITY`

 *```
INSERT INTO [dbo].[Tracks] ([TrackStringId], [Time]) 
  VALUES (SCOPE_IDENTITY(), CURRENT_TIMESTAMP()); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2008-11-27T04:56:43.837

如果您使用的是 SQL Server 2005 或更高版本，并且在单个中插入大量记录`INSERT`，则可以查看`OUTPUT`或`OUTPUT INTO`选择[此处](http://msdn.microsoft.com/en-us/library/ms177564.aspx)以在第二个中使用第一个插入的标识，而无需“重新查找”要获取的行所有的`IDENTITY`价值观。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-27T00:32:10.113

首先插入到主表中。

```
INSERT INTO trackstrings VALUES('myvalue') 
```

接下来获取身份。此方法取决于您是在 1 个语句或存储过程或其他方法中完成所有操作。我将假设 1 条语句，所以我将插入标识特殊变量。

```
INSERT INTO tracks VALUES( @@IDENTITY, getdate() ) 
```

类似的事情应该根据你的具体情况来做。关键是@@IDENTITY 变量。它保存您正在使用的连接的最后插入的标识值。它不是特定于表的，它只是在连接生命周期内插入的最新身份。

# apache - 考虑到 SEO 升级网站

> ID：322606
> 
> 赞同：0
> 
> 时间：2008-11-27T00:24:55.493
> 
> 标签：apache, seo, search-engine, http-status-code-404

我正在管理一个已建立的网站，该网站目前正在升级（完全重新更换），但我担心我会丢失我所有的 Google 索引（也就是说，Google 的索引中会有很多页面不再存在于那个地方）。

上次我升级（不同的）网站时，有人告诉我我应该做*一些事情*，以免我的 SEO 受到不利影响。问题是，我不记得那是*什么东西了*。

* * *

*更新一些澄清：*基本上我正在寻找一种将旧路径映射到新路径的方法。例如：

*   用户搜索“很棒的页面”
*   谷歌返回`mysite.com/old_awesome_page.php`，用户点击它。
*   我的网站将他们带到`mysite.com/new_awesome_page.php`

当谷歌再次开始抓取该网站时......

*   谷歌抓取我的网站，刷新现有索引。
*   要求`old_awesome_page.php`
*   我的网站告诉 Google 该页面现已移至`new_awesome_page.php`.

不会有像那样简单的 1:1 映射，它会更像`(old) index.php?page=awesome --> (new) index.php/pages/awesome`，所以我不能只用重定向替换现有文件的内容。

*我在 Apache 上使用 PHP*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-11-27T00:41:42.137

301 将您所有的旧（已消失）页面重定向到新页面。

*编辑：* 这是[帮助的链接](http://www.seomoz.org/blog/whiteboard-friday-which-way-did-he-go)。它也有一些到其他地方的链接。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-11-27T00:58:17.780

您需要将一些重写规则放在 .htaccess 文件中。

[你可以在这里](http://httpd.apache.org/docs/1.3/misc/rewriteguide.html)找到很多很好的信息。它适用于 Apache 1.3，但也适用于 Apache 2。

从那篇文章中，重定向到已移动目录的文件的示例：

```
RewriteEngine on
RewriteRule   ^/~(.+)  http://newserver/~$1  [R,L] 
```

内容如下：

*   打开重写引擎。
*   对于以 /~ 开头的任何内容，后跟一个或多个“anything”，将其重写为[http://newserver/~](http://newserver/~)后跟那个“anything”。
*   [L] 表示重写应在此规则之后停止。

您可以使用其他指令来设置 [301] 重定向

你可以这样做：

```
RewriteEngine on
RewriteRule   old_page.php  new_page.php  [L] 
```

但是你必须对每一页都有一个规则。为避免这种情况，我会考虑使用正则表达式，如第一个示例所示。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-11-27T00:34:30.497

[您可以在Google Webmaster Tools](http://www.google.com/webmasters/tour/tour1.html)中调整 Google 对您网站的看法，并可能通知其更改。我认为您应该构建当前站点的站点地图，并在站点更改时对其进行验证。

# php - 嵌入图像的脚本

> ID：322607
> 
> 赞同：9
> 
> 时间：2008-11-27T00:25:03.277
> 
> 标签：php, mysql, security

我运行一个小型浏览器 MMO，我遇到了一个问题，几个用户将脚本嵌入到他们的个人资料图像中，并使用它们来攻击所述用户以及我的游戏。有没有办法防止这种情况发生，或者我是否需要开始阻止人们使用他们自己的自定义图像？

如果它有帮助，它是在 PHP/MySQL 中完成的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-11-27T03:22:23.310

最有可能的是，他们为您提供了一个脚本的链接，该脚本正在构建图像并即时返回它，除了不允许用户使用外部图像之外，没有什么可以做的，一个选择防止它是下载图像并将其存储在您的服务器上，而不是链接到外部图像。

--我决定提供一个示例
这张图片是即时创建的，我提供的网址是：[http](http://unkwndesign.com/profilePic.png) ://unkwndesign.com/profilePic.png ：
[alt text http://unkwndesign.com/profilePic.png](http://unkwndesign.com/profilePic.png)
现在, profilePic.png 是一个文件夹，在请求时提供 index.php，它使用 gd 获取 SO 徽标，并将您的 IP 地址强加在它上面，在这里非常清楚我没有记录这个或任何其他数据源对于 index.php 是：

```
<?php
$image = imagecreatefrompng("http://stackoverflow.com/Content/Img/stackoverflow-logo-250.png");
$font_size = 12;
$color = imagecolorallocate($image, 0,0,0);
ImageTTFText ($image, $font_size, 0, 55, 35, $color, "arial.ttf",$_SERVER['REMOTE_ADDR']);
header("Content-type: image/png");
imagepng($image);
imagedestroy($image);
?> 
```

由于我正在返回一个具有适当扩展名和适当 mime 类型的图像，因此无法检测到我在做什么。如果服务器下载了我的图像并将其存储在本地，那么 IP 地址将是服务器的 IP 地址，这会破坏这样做的乐趣，并且可能证明足以阻止这种行为。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-11-27T00:37:20.040

尝试让 GD 处理这些图像。如果它抛出错误，你就知道你有问题。由于图像上传是一种相对少见的操作，因此进行某种任意操作不会导致加载问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-27T00:33:48.750

验证图像完整性的一些最常见做法包括检查[MIME](http://en.wikipedia.org/wiki/MIME)类型，或二进制读取图像的前几个字节。尽管这些都不是最好的，但值得尝试避开其中的一些。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-11-27T01:33:10.660

您是否在谈论 IE 将其中带有 HTML 标记的图像解释为 HTML 页面的问题，从而允许从用户提交的图像中注入 HTML 和脚本？

（错误是即使你告诉它 Content-Type 是图像/类型，IE 也会这样做。微软通过这种“有用”的尝试造成了无尽的安全灾难。）

如果是这样，通常的解决方案是从不同的主机名提供用户提交的图像，该主机名无法访问您提供 Web 应用程序的主主机名上的 cookie 或脚本。

请务必锁定您的虚拟服务器，以便图像服务器和应用程序服务器只能从一个特定的主机名获得（并且应用程序服务器不能通过 IP 地址访问）。

这将解决跨站点脚本问题。您可能仍然需要处理跨站点请求伪造请求，但这是一个不同的问题，并且可以在没有图像包装脚本注入的情况下被利用。

# wpf - WPF 开发中最常见的错误是什么？

> ID：322612
> 
> 赞同：14
> 
> 时间：2008-11-27T00:27:29.793
> 
> 标签：wpf

此问题旨在提供开发 WPF 应用程序时常见陷阱、“陷阱”或设计问题的解决方案列表。这也可以包括正确的设计模式，只要有解释为什么它工作得最好。应根据问题类型的常见程度对响应投赞成票或反对票。以下是规则：

*   每个帖子一个回复。这显然会使最常见的问题排名最高。
*   最好提供已经生活在 SO 土地某处的相关帖子或解决方案的链接。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2008-11-27T00:29:08.637

**问题**：到目前为止，我看到的主要问题是人们开始在 WPF 中编码时考虑到了 winform UI 模型。

**解决方案**：**WPF 不是 WinForms/MFC/Win32** 所以忘记过去 20 多年在开发基于 Windows 的 UI 时使用和学习的所有 UI 方面的假设和规范。

了解这个平台背后的核心思想非常重要，这个链接[-新WPF平台中的主要UI开发突破](http://msdn.microsoft.com/en-us/magazine/cc163662.aspx)将深入了解WPF。其中列出了以下几点。突出显示的是我最喜欢这个平台的功能。

10.  **高级图形**
11.  绘图对象模型
12.  丰富的应用程序文本
13.  **可调整的 UI 布局**
14.  灵活的内容模型
15.  **Lookless 控件**
16.  **数据驱动的用户界面**
17.  一致的风格
18.  触发器
19.  声明式编程

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-11-27T01:09:14.997

**问题：**使用 MV-VM 设计模式，我在哪里实例化视图？这会发生在 ViewModel 中吗？[问题 1](https://stackoverflow.com/questions/315180/model-view-presenter-and-modal-dialog-boxes-how-to) ,[问题 2](https://stackoverflow.com/questions/303006/m-v-vm-design-question-calling-view-from-viewmodel)

**解决方案：**与其他常见模式（如 MVC）相比，使用 MV-VM 模式时 WPF 开发最有效。趋势是将 ViewModel 与处理打开和创建视图以及模型的控制器相同。在 MV-VM 中情况并非如此。视图是唯一应该创建视图的地方。ViewModel 应该对视图一无所知。[所以答案1](https://stackoverflow.com/questions/322612/what-are-the-most-common-mistakes-made-in-wpf-development#322647)，[所以答案2](https://stackoverflow.com/questions/303006/m-v-vm-design-question-calling-view-from-viewmodel#306902)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-11-27T03:54:23.777

没有意识到在项目开始时字体渲染有多糟糕，并且被客户告知他们不能忍受看着它，因为一切看起来都很模糊。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-11-27T00:56:30.173

**问题/问题：** [所以问题](https://stackoverflow.com/questions/313124/wpf-usercontrol-expose-actualwidth)

> 如何向用户公开用户控件中组件的 DependencyProperty？有很多关于如何通过创建新的依赖属性和绑定来公开普通属性的示例，但没有关于如何公开像 FrameworkElement.ActualWidthProperty 这样的只读属性的示例。

**解决方案：**您需要在用户控件中公开一个新的 Readonly DependencyProperty，并在您包含的“组件”的 ActualWidthProperty 更新时更新它。这需要使用 DependecyPropertyDescriptor 来获得发生更改的通知。[解决方案](https://stackoverflow.com/questions/313124/wpf-usercontrol-expose-actualwidth#317699)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-11-27T00:44:56.373

使数据绑定在 ContentControls（Windows、UserControls 等）中定义的属性和构成控件内容的元素的属性之间正常工作。例如。假设我有一个看起来像这样的窗口：

```
<Window x:Name="MyWindow"....>
   <TextBlock Text="{Binding Path=PropertyDefinedInMyWindow}" />
</Window> 
```

**问题：**无论您多久更新一次“PropertyDefinedInMyWindow”，它都不会反映在 TextBlock 中。[所以问题](https://stackoverflow.com/questions/317973/wpf-dependencyproperties)

**解决方案：**您需要设置 Window 的 DataContext 或告诉绑定该属性位于哪个元素上。[解决方案](https://stackoverflow.com/questions/317973/wpf-dependencyproperties#318006)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2010-07-19T08:47:05.850

在视图中使用代码 - 让婴儿 FSM 哭泣。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-11-27T01:17:51.377

Ivan Towson 就这个话题做了一个非常好的演讲。大部分信息都在他的幻灯片中，您可以从这里获得：http: [//hestia.typepad.com/flatlander/2008/08/codecamp-2008-.html](http://hestia.typepad.com/flatlander/2008/08/codecamp-2008-.html)

# c# - Linq to SQL：如何按复合对象排序？

> ID：322614
> 
> 赞同：1
> 
> 时间：2008-11-27T00:28:14.113
> 
> 标签：c#, linq-to-sql, sql-order-by

我有以下 Linq to SQL 查询，其中我正在尝试执行多列 GROUP BY：

```
return from revision in dataContext.Revisions
       where revision.BranchID == sourceBranch.BranchID-1
                && !revision.HasBeenMerged
       group revision by new Task(revision.TaskSourceCode.ToUpper(), 
                                  revision.TaskSourceID)
       into grouping
       orderby grouping.Key ascending
       select (ITask)grouping.Key; 
```

这将引发 InvalidOperationException（“无法按类型“任务”排序。”）。

是否有 Task 必须实现的接口（它*已经*实现了 IComparable、IComparable<ITask>）？Task 是否需要是 Linq to SQL 实体（目前不需要，因为没有对应的表）。或者这只是 Linq to SQL 不支持的东西？

请注意，我已经为分组尝试了匿名类型，但失败并出现类似的 InvalidOperationException：

```
...
group revision by new { Code = revision.TaskSourceCode.ToUpper(),
                        Id = revision.TaskSourceID } 
... 
```

值得一提的是，Task 对象是 2 个字段的组合；一个是单个字符（通常是“S”或“B”），另一个是 int（如果您愿意，实际上是跨数据库的“外键”）。Tasks 的排序行为只是比较它们的字符串表示；EG 任务“B101”< 任务“S999”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-11-27T01:07:27.233

好的，我想通了。我有两个问题；首先，ToUpper() 不翻译成 SQL，其次，我不认为 Linq to SQL 支持对象的 orderby；至少不是非实体。通过将 orderby 分解为其组成列，一切都开始按计划进行。

```
return from revision in dataContext.Revisions
       where revision.BranchID == sourceBranch.BranchID-1
                && !revision.HasBeenMerged
       group revision by new { revision.TaskSourceCode, 
                                  revision.TaskSourceID }
       into grouping
       orderby grouping.Key.TaskSourceCode, 
               grouping.Key.TaskSourceID ascending
       select (ITask)new Task(grouping.Key.TaskSourceCode, 
                              grouping.Key.TaskSourceID); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-27T01:50:18.440

看起来您已经有了解决方案，但仅供参考 LINQ to SQL 确实支持`.ToUpper()`.

例如：

```
NorthwindDataContext dc = new NorthwindDataContext();
Product product = dc.Products.Single(p => p.ProductName.ToUpper() == "CHAI"); 
```

被翻译成：

```
exec sp_executesql N'SELECT [t0].[ProductID], [t0].[ProductName], [t0].[SupplierID], [t0].[CategoryID], [t0].[QuantityPerUnit], [t0].[UnitPrice], [t0].[UnitsInStock], [t0].[UnitsOnOrder], [t0].[ReorderLevel], [t0].[Discontinued]
FROM [dbo].[Products] AS [t0]
WHERE <b>UPPER([t0].[ProductName]) = @p0</b>',N'@p0 nvarchar(4)',@p0=N'CHAI' 
```

希望有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-27T00:38:11.567

我认为您需要在分组之前进行选择-您想将对象转换为任务，然后按其他内容排序（Task.start 或其他内容）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-11-27T05:05:41.543

Linq to SQL 可能支持 String.ToUpper()，但它不支持 Char.ToUpper()，这正是我对这个特定表和列所需要的。但无论如何感谢您的信息！

# com - 更新 com dll

> ID：322639
> 
> 赞同：0
> 
> 时间：2008-11-27T00:39:55.277
> 
> 标签：com

我们有一个使用 COM dll 的应用程序。现在，我们正在推送这个 dll 的更新。我们复制新的 dll（覆盖现有的）并注册 dll。这是一个好习惯吗？或者，我们应该先在客户端机器上取消注册 dll。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-11-27T00:41:00.093

只要您的旧 COM dll 实现完全相同的接口，就没有理由取消注册/注册

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-27T16:01:12.623

在更新 COM dll 时，我们不应更改旧接口，即 IID（COM 的基本规则），以免破坏使用旧接口的客户端。

所以不需要取消注册旧的 COM dll，只需注册新的 DLL。注册新 dll 后，由于旧接口使用相同的 IID，它不会破坏使用旧接口的客户端。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-27T11:08:52.837

如果您只想替换 Com Dll，则必须考虑两件事：

1.  它们新旧具有相同的 GUID。
2.  您尚未将任何新接口附加到更新的 com Dll。

否则你应该 unreg/reg 你的 com dll

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-11-30T14:55:47.000

好吧，假设您使用 VB6 编写 COM 服务器（几年前的常见情况），您需要将其设置为二进制兼容，以使 VB 为组件保留相同的 GUID。

由于大多数时候 DLL 中的类的对象是使用内置在同一个 dll 中的类工厂创建的，如果 GUID 与类工厂知道的不匹配，即使没有更改，它也无法为旧的 GUID 创建对象被制作成接口。

那是 DLL 地狱的一部分，记得吗？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-11-30T17:11:20.050

如果您知道您的所有客户端平台都运行 Windows XP 或更高版本，您可能会考虑使用无注册 COM，从而避免整个问题。

请参阅[我对“如何在运行时注册 COM 库？”的回答。](https://stackoverflow.com/questions/265212/how-to-register-com-libraries-at-runtime#265239)详情。MSDN 上的文章[“COM 组件的免注册激活：演练”](http://msdn.microsoft.com/en-us/library/ms973913.aspx)有完整的演练。

# javascript - 带有拖动选择多天的Javascript日历

> ID：322652
> 
> 赞同：5
> 
> 时间：2008-11-27T00:48:39.267
> 
> 标签：javascript, calendar

有人知道支持多天拖动选择的Javascript日历吗？还需要能够在几个月内完成，而不仅仅是一个月。

提前非常感谢，这里的那些对我的问题没有好处： [http ://www.javascript-examples.com/javascript-calendars/](http://www.javascript-examples.com/javascript-calendars/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2008-11-27T02:20:58.503

一个 jquery 日期选择器

[http://www.filamentgroup.com/examples/datepicker/](http://www.filamentgroup.com/examples/datepicker/)

虽然不支持拖动，但可以让您获得超过一个月的日期范围

[或者 - 甚至更好 - 您可以使用来自 jQuery UI http://ui.jquery.com/repository/latest/demos/functional/#ui.datepicker](http://ui.jquery.com/repository/latest/demos/functional/#ui.datepicker)的 DatePicker 组件 （搜索日期范围）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-11-27T02:58:54.607

这是我发现的最好的 javascript 日历。 [http://www.dynarch.com/projects/calendar/](http://www.dynarch.com/projects/calendar/)

# jquery - jQuery：选择指向当前 URL 的

> ID：322657
> 
> 赞同：0
> 
> 时间：2008-11-27T00:54:19.287
> 
> 标签：jquery, css-selectors

 在 jQuery 中，如何选择`<a>`指向当前 URL 的 href 

例如：
URL = [http://server/dir/script.aspx?id=1](http://server/dir/script.aspx?id=1)

我想选择这个`<a>`
`<a href="/dir/script.aspx">...</a>`

我试过这个但它不起作用：

```
var url = window.location.href;
$('#ulTopMenu a["'+url+'"*=href]').addClass("selected"); 
```

可能语法错误。有人知道正确的做法吗？

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-11-27T01:10:00.207

听起来您正在尝试解决选定的选项卡“模式”。我发现我可以使用以下代码自己解决这个问题：

```
var nav = location.pathname.substr(1).split('/', 2)[0] || '/';
if (nav) {
    $('#ulTopMenu a[href$="' + nav + '"]').parent().addClass('selected');
} 
```

这基本上说如果 URL 以与当前 URL 相同的结尾结尾，则添加 selected 类。尽管您必须注意“相似”的 url - 但如果您有很多实际上相似的 url，您可能应该考虑使用服务器端解决方案。

（我不久前发表了一篇关于这项技术的文章——如果这实际上是你想要做的：http: [//leftlogic.com/lounge/articles/auto-selecting_navigation/](http://leftlogic.com/lounge/articles/auto-selecting_navigation/)）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-27T00:59:49.790

我不知道您的问题的答案，但该选择器语法有效吗？

```
'#ulTopMenu a["http://www.foo.com"*=href]' 
```

我想如果这样的事情是可能的，它会写成

```
'#ulTopMenu a[href*="http://www.foo.com"]' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-27T02:51:44.963

谢谢雷米，它并没有真正起作用，但它已经接近了。
这是我的最终代码

```
 var scriptname = GetUrlScriptname();
  $('#ulTopMenu a[href$="' + scriptname + '"]').parent().addClass('selected');

function GetUrlScriptname()
{
  var rex = new RegExp("\\/[^\\/]+\\.\\w+($|\\?)");
  var match = rex.exec(location.pathname);
  return match[0].substring(1);
} 
```

# email - 当邮件服务器不在网络主机上时发送邮件和 MX 记录

> ID：322659
> 
> 赞同：4
> 
> 时间：2008-11-27T00:56:10.190
> 
> 标签：email, smtp, sendmail, mx-record

这是一个我确信很容易解决的问题，但我整天都在努力解决这个问题。

我正在为客户开发一个新网站。该网站位于（这是一个示例）website.com。我有一个 PHP 表单脚本，可以将访问者的请求通过电子邮件发送到 requests@website.com。

当我在不同域的登台服务器上编码时，一切正常。当我将其移至 website.com 时，邮件消息从未到达。Web 服务器位于具有主要 ISP 的虚拟主机上。

以下是我从那以后学到的东西： 我客户的邮件服务器是 Microsoft Exchange，实际位于他们办公室的一个盒子上。每当外界有人向 requests@website.com 发送电子邮件时，邮件就会到达。 *但是*如果网络服务器发送到同一个电子邮件地址，它每次都会失败。这**不是**PHP 问题。我将 shell 保护到 Web 服务器，并使用 sendmail 和 UNIX 邮件应用程序对此进行了测试。我还通过从 shell 发送各种电子邮件帐户来测试它。例如，我可以给自己发电子邮件，只是 website.com 域中的任何人都没有。

简而言之，当我登录到 website.com 时，发送到 requests@website.com、user@website.com、another_user@website.com 的邮件都失败了。所有其他地址都可以正常工作。我发现那些丢弃的电子邮件被路由到 Web 服务器的“catchall”帐户，它们位于收件箱中。

我在 website.com 上进行了 MX 查找。MX 记录指向 mailsec.website.com。我可以远程登录到 mailsec.website.com 的 25 端口并查看 SMTP 服务器。

在我看来，website.com 在向 requests@website.com 发送邮件时没有进行 MX 查找。我的理论是，它将域识别为本地域，看到没有“请求”用户帐户可以将其传递到，然后将邮件放入包罗万象的帐户中。我想要的是强制 sendmail 进行 MX 查找并将邮件发送到 Exchange 服务器。我在这里束手无策。我不知道该怎么做。

就此而言，我可能离这里很远，并且完全误诊了这一点。互联网邮件和 MX 对我来说一直是一门魔法，而我的无知肯定会在这个问题上表现出来。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2008-11-27T02:28:22.017

我认为问题在于 sendmail （您的进程）正在与本地 sendmail 守护进程通信。本地 sendmail 守护进程认为，因为它是 website.com，它应该知道如何传递电子邮件。不幸的是，网络服务器上不存在 to 字段中的实际地址，因此它将其转储到“catchall”邮箱中。您应该与您的 ISP 交谈并让他们更新他们的 sendmail 配置，以便发往 ...@website.com 的邮件转发到邮件交换器，而不是在本地处理。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-06T12:13:54.170

默认情况下，Sendmail 会猜测本地电子邮件域的列表。可以使用 sendmail.mc 文件中的以下行将其关闭：

```
define(`confDONT_PROBE_INTERFACES',`True') 
```

作为根列表本地电子邮件域在更改之前和之后使用：

```
echo '$=w' | sendmail -Am -bt 
```

在禁用自动猜测后，您将看到哪些域应该“手动”添加到（通常）/etc/mail/local-host-names 文件中。

更改后`sendmail.mc`：

1.  生成/编译新`sendmail.cf`文件
2.  重启 sendmail 守护进程（或发送 HUP 信号）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-11-27T03:44:51.953

tvanfosson 基本上有它，但作为一种临时解决方法，您应该能够更改您的脚本，以便它发送邮件'user@mailsec.website.com'，然后邮件将被传递到实际的邮件服务器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-01T13:41:59.157

编辑 tsm.cf 文件（在 /etc/mail/ 或类似文件中）以包含

```
FEATURE(relay_entire_domain) 
```

在 DOMAIN() 和 MAILER() 行之间。由于您正在编辑文件，因此您可能还希望通过以下方式提高安全性

```
define(`confPRIVACY_FLAGS',``noexpn,novrfy'') 
```

更改 tsm.cf 文件（或*任何*sendmail 配置文件）后，重新启动或 SIGHUP sendmail 进程。

此更改是必要的，因为域的 WWW 和 MX 服务器不存在于同一进程空间中；此 FEATURE 触发 sendmail 使用其外部传递机制处理域的消息。

tsm.cf 文件的编辑部分应类似于以下内容：

```
DOMAIN(website.com)dnl
FEATURE(relay_entire_domain)dnl
define(`confPRIVACY_FLAGS',``noexpn,novrfy'')dnl
MAILER(smtp)dnl
MAILER(procmail)dnl 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2011-01-01T22:49:46.583

对我有用的是在托管网站的网络服务器上添加一条 MX 记录，该记录指向原始域名服务器上分配的主机。在此处介绍的情况下，mx 记录指向：mailsec.website.com

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-05-30T19:29:36.727

我是新来的。想扩展**RB_CWI**答案，但我不允许发表评论。他的解决方案效果很好。

您**不需要**定义 DOMAIN()。

但是，在我的系统上，我需要安装 sendmail-cf 软件包。

以下说明是在**CentOS 6.5上完成的**

一、安装sendmail-cf

```
sudo yum install sendmail-cf 
```

然后，编辑 senmail.mc

```
sudo vi /etc/mail/sendmail.mc 
```

在文件底部添加 FEATURE(relay_entire_domain)dnl，如下所示：

```
...
FEATURE(relay_entire_domain)dnl
MAILER(smtp)dnl        # right above this line
MAILER(procmail)dnl
dnl MAILER(cyrusv2)dnl 
```

保存文件，然后重新启动 sendmail。

```
sudo service sendmail restart 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-10-01T07:49:51.673

陷入同样的​​问题。MX 指向外部 Exchange 服务器，但 php/sendmail 没有查找此记录。相反，由 WordPress 在此网络服务器上发布的邮件会落入万能邮箱。

解决方案是删除网络服务器上的所有邮箱。现在 sendmail 对 MX 感兴趣，所有邮件都发送到了 Exchange。

但是，Exchange 使用网络空间的邮件服务器作为外发邮件的 SmartHost。作为解决方案，我们能够使用 FTP 凭据来访问邮件服务器。我认为这个解决方案不适用于这个星球上的每个供应商，但在我们的案例 (all-inkl.com) 中它成功了。

# ruby-on-rails - Rails 连接表

> ID：322687
> 
> 赞同：1
> 
> 时间：2008-11-27T01:16:15.500
> 
> 标签：ruby-on-rails, associations

我有以下 SQL 查询：

选择articles.name、articles.price、users.zipcode FROM article INNER JOIN users ON users.id =articles.user_id WHERE vectors @@ to_tsquery('crime') ORDER BYarticles.price ASC

我想把它写在一个名为 Articles 的 ActiveRecord 类的 find 方法中（Articles belongs_to 用户）。基本上我想搜索文章并从用户访问邮政编码属性（用户 has_many 文章）

我写了以下版本，但我不确定它是否有效，因为在响应中我没有收到有关用户邮政编码的任何信息。

a = Article.find(:all,:conditions=>"vectors @@ to_tsquery('crime')",:joins= >:user,:order=>:price,:include=>:user)

但我不知道如何访问邮政编码信息。我怎样才能访问这些信息？这是正确的做法吗？

问候，

胜利者

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-11-27T08:17:45.647

如果您已经耦合`Articles`并且`Users`像上面所说的那样，这应该很容易：

```
@articles = Article.find(:all, :conditions => "…", :include => :user) 
```

然后，在您看来，您可以执行以下操作：

```
<ul>
<% for each article in @articles do %>
  <li><%= article.user.zipcode %></li>
</ul>
<% end %> 
```

`User`这是因为 Rails 为模型 () 中的父对象 () 创建了一个属性`Article`- 您可以[在 API 文档中](http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html)阅读更多相关信息。这甚至可以在没有上面的“include”键的情况下工作，但是将其排除在外意味着循环的每一步都需要进行数据库查询。

# xml - Flex 和嵌入式 XML

> ID：322689
> 
> 赞同：5
> 
> 时间：2008-11-27T01:17:27.977
> 
> 标签：xml, apache-flex, actionscript-3, actionscript

我在当前的 Flex 项目中使用 Parsley IoC。所以我想将容器配置 XML 嵌入到结果 SWF 中。

如何将嵌入的 XML 文件加载到动作脚本 XML 对象中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2010-06-23T01:12:48.597

您需要使用 XML 吗？如果您通过 AS 或 MXML 配置 Parsely，它将被编译并更快。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T03:15:17.300

我的 XML 文件中有声明，所以我需要来自[http://cookbooks.adobe.com/post_Embedding_assets_with_application_octet_stream-8046.html](http://cookbooks.adobe.com/post_Embedding_assets_with_application_octet_stream-8046.html)的八位字节解决方案，而不是 Antti 的答案链接。

# django - 多次安装 Django - 如何通过网络服务器 (Lighttpd) 配置透明多路复用？

> ID：322694
> 
> 赞同：1
> 
> 时间：2008-11-27T01:20:59.780
> 
> 标签：django, webserver, fastcgi, lighttpd, flup

这个问题从答案流向：[如何在一台服务器上为 Django 设置多个具有不同数据库的帐户？](https://stackoverflow.com/questions/314515/how-does-one-set-up-multiple-accounts-with-separate-databases-for-django-on-one)

我没有在谷歌或其他地方看到过这样的东西（也许我的词汇有误），所以我认为输入可能是对互联网话语的有价值的补充。

怎么能像这样配置服务器：

*   一种 Lighttpd 的安装
*   作为 FastCGI 运行的多个 Django 项目
*   django项目可以随意添加/删除，不需要重启webserver
*   根据当前用户将所有请求/响应透明重定向到特定 Django 安装

即给定 Django 项目（带有相应的 FastCGI 套接字）：

*   鲍勃 (/tmp/bob.fcgi)
*   苏 (/tmp/sue.fcgi)
*   乔 (/tmp/joe.fcgi)

以（过于简单的）脚本开始的 Django 项目如下：

```
#!/bin/sh
NAME=bob

SOCKET=/tmp/$NAME.fcgi

PROTO=fcgi
DAEMON=true

/django_projects/$NAME/manage.py runfcgi protocol=$PROTO socket=$SOCKET
  daemonize=$DAEMON 
```

我希望访问[http://www.example.com/](http://www.example.com/)的流量根据登录的用户将请求定向到正确的 Django 应用程序。

换句话说，[http://www.example.com](http://www.example.com)应该是“be” /tmp/bob.fcgi 如果 bob 已登录， /tmp/joe.fcgi 如果 joe 已登录， /tmp/sue.fcgi 如果 sue已登录。如果没有人登录，它应该重定向到登录页面。

我已经考虑使用以下算法解复用“plexer”FastCGI 脚本：

1.  如果设置了 cookie $PLEX，则通过管道将请求发送到 /tmp/$PLEX.fcgi

2.  否则重定向到登录页面（根据用户名 => PLEX 的多对一映射设置 cookie PLEX）

当然，出于安全考虑，应该对 $PLEX 进行污点检查，并且 $PLEX 不应引起任何信任假设。

Lighttpd 配置会是这样（尽管 Apache、Nginx 等也可以很容易地使用）：

```
fastcgi.server = ( "plexer.fcgi" =>
                           ( "localhost" =>
                             (   
                               "socket" => "/tmp/plexer.fcgi",
                               "check-local" => "disable"
                             )
                           )   
                 ) 
```

输入和想法、有用的链接以及知道如何正确实现 FastCGI plexer 将不胜感激。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-20T17:41:01.837

这是我解决这个问题的大致方法：

在 lighttpd.conf 中

```
$SERVER["socket"] == "localhost:81" {
  include_shell "/opt/bin/lighttpd_conf.py"
} 
```

以及对应的 lighttpd_conf.py：

```
#!/usr/bin/python
import fileinput
ACCOUNT_LIST_FILE = "/opt/servers/account_list.txt"

for user in fileinput.input(ACCOUNT_LIST_FILE):
    print """
    $HTTP[\"url\"] =~ \"^/%s/\" {
        scgi.server = ( \"/\" => 
            (
            (
                \"socket\" => \"/tmp/user-socket-%s.scgi\",
                \"check-local\" => \"disable\",
            )
            )
        )
    }
    """ % (user, user) 
```

其中 ACCOUNT_LIST_FILE 包含许多帐户，例如

```
abc1
abc2
abc3 
```

服务器会将[http://example.com/abc1](http://example.com/abc1)映射到 /tmp/user-socket-abc1.scgi，其中用户 abc1 的 Django 实例可能正在使用 SCGI。

显然必须对帐户名称执行某种污点检查（我生成这些）。

# algorithm - 一种打包算法……有点像

> ID：322699
> 
> 赞同：1
> 
> 时间：2008-11-27T01:26:50.237
> 
> 标签：algorithm, np-hard, computation

给定一个项目数组，每个项目都有一个`value`和`cost`，**确定以最小成本达到最小值所需的项目的最佳算法是什么？**例如：

```
Item: Value -> Cost
-------------------
A     20   -> 11
B     7    -> 5
C     1    -> 2

MinValue = 30
naive solution: A + B + C + C + C. Value: 30, Cost 22
best option: A + B + B.            Value: 34, Cost 21 
```

请注意，最后的总体价值：成本比是无关紧要的（`A + A`会给你最好的物有所值，但`A + B + B`它是一个更便宜的选择，它达到了最小值）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-11-27T01:36:34.710

这就是背包问题。（也就是说，这个问题的决策版本与背包问题的决策版本相同，尽管背包问题的优化版本通常有不同的表述。）它是 NP-hard（这意味着没有已知的算法是“大小”中的多项式——位数——在输入中）。但是，如果您的数字很小（例如输入中的最大“值”；成本无关紧要），那么有一个简单的动态规划解决方案。

让 best[v] 是获得（精确）v 值的最小成本。然后您可以通过（将所有 best[v] 初始化为无穷大和）计算所有 v 的值 best[]：

```
best[0] = 0
best[v] = min_(items i){cost[i] + best[v-value[i]]} 
```

然后查看 best[v] 的值，直到您想要的最小值加上最大值；其中最小的会给你成本。

如果您想要实际项目（而不仅仅是最低成本），您可以维护一些额外的数据，或者只是查看 best[] 数组并从中推断。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-02T13:34:33.813

这个问题被称为整数线性规划。这是NP难的。但是，对于像您的示例这样的小问题，快速编写几行代码来简单地强制所有购买选择的低组合是微不足道的。

NP-hard 并不意味着不可能甚至昂贵，它意味着您的问题在解决更大规模的问题时会变得迅速变慢。在您只有三个项目的情况下，您可以在几微秒内解决这个问题。

对于一般来说最好的算法是什么的确切问题......有整本教科书。一个好的开始是[好的旧维基百科。](http://en.wikipedia.org/wiki/Linear_programming)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2009-05-02T13:22:40.860

**编辑由于事实不正确，此答案已被编辑。遵循此处的建议只会对您造成伤害。**

这实际上不是背包问题，因为它假定您装的物品不能超过某个容器的空间。在你的情况下，你想找到最便宜的组合来填满空间，考虑到可能发生溢出的事实。

我的解决方案，我不知道是最优的，但应该非常接近，将计算每个项目的成本效益比，找到具有最高成本效益的项目并用这个项目填充结构，直到没有' t 空间再放一项。然后我会测试看看是否有任何其他可用项目的组合可以以低于最便宜项目之一的成本填充可用槽，然后如果存在这样的解决方案，请使用该组合，否则再使用一个最便宜的物品。

*修正*这实际上也可能是 NP 完全的，但我还不确定。无论如何，出于所有实际目的，这种变化应该比天真的解决方案快得多。

# java - 在 Java 中匹配不准确的公司名称

> ID：322701
> 
> 赞同：8
> 
> 时间：2008-11-27T01:28:36.223
> 
> 标签：java, matching

我有一个公司数据库。我的应用程序接收到按名称引用公司的数据，但名称可能与数据库中的值不完全匹配。我需要将传入的数据与它所指的公司相匹配。

例如，我的数据库可能包含一家名为“AB Widgets & Co Ltd”的公司。而我的传入数据可能引用“AB Widgets Limited”、“AB Widgets and Co”或“AB Widgets”。

公司名称中的某些词（AB Widgets）比其他词（Co、Ltd、Inc 等）更重要。避免错误匹配很重要。

公司的数量足够少，我可以在内存中维护他们的名称地图，即。我可以选择使用 Java 而不是 SQL 来找到正确的名称。

你会如何在 Java 中做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-11-27T01:40:43.093

您可以在 DB/map 和输入中尽可能地标准化格式（即转换为大写/小写），然后使用来自动态编程的[Levenshtein（编辑）距离度量](http://en.wikipedia.org/wiki/Levenshtein_distance)对所有已知名称的输入进行评分。

然后，您可以让用户确认匹配，如果他们不喜欢它，让他们选择将该值输入到您的已知名称列表中（再想一想——这可能会给用户太大的权力.. .)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-03-02T13:54:31.003

虽然这个线程有点老了，但我最近对名称匹配的字符串距离度量的效率进行了调查，并遇到了这个库：

[https://code.google.com/p/java-similarities/](https://code.google.com/p/java-similarities/)

如果您不想花时间实现字符串距离算法，我建议您先尝试一下，已经实现了大约 20 种不同的算法（包括 Levenshtein、Jaro-Winkler、Monge-Elkan 算法等。 ) 并且它的代码结构足够好，您不必深入了解整个逻辑，但您可以在几分钟内开始使用它。

（顺便说一句，我不是图书馆的作者，所以要感谢它的创造者。）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-11-27T02:02:52.800

我会在 LCS 中忽略空格、标点符号、大小写以及“co”、“llc”、“ltd”等的变体。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-11-27T01:35:26.320

您可以使用[LCS](http://en.wikipedia.org/wiki/Longest_common_subsequence_problem)算法对它们进行评分。

我在我的[相册](http://github.com/dustin/photo)中这样做是为了方便通过电子邮件发送照片并让它们正确归入安全类别。

*   [LCS代码](http://github.com/dustin/photo/tree/master/src/java/net/spy/photo/util/LCS.java)
*   [示例用法](http://github.com/dustin/photo/tree/master/src/java/net/spy/photo/mail/MailPoller.java#L255)（根据人们输入的内容猜测类别）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-11-27T01:36:42.243

看看Lucene。它是一个具有“近似匹配”功能的开源全文搜索 Java 库。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-11-27T01:32:13.737

您的数据库可能支持正则表达式 (regex) 的使用 - 请参阅下面的 Java 教程 - 这是 MySQL 文档的链接（作为示例）：

[http ://dev.mysql.com/doc/refman/5.0/ zh/regexp.html#operator_regexp](http://dev.mysql.com/doc/refman/5.0/en/regexp.html#operator_regexp)

您可能希望在数据库中为每家公司存储一个相当复杂的正则表达式语句，其中包含您可能预期的拼写变化 - 或您希望重视的公司名称的子元素。

您还可以在 Java 中使用正则表达式库

JDK 1.4.2
[http://java.sun.com/j2se/1.4.2/docs/api/java/util/regex/Pattern.html](http://java.sun.com/j2se/1.4.2/docs/api/java/util/regex/Pattern.html)

JDK 1.5.0
[http://java.sun.com/j2se/1.5.0/docs/api/java/util/regex/Matcher.html](http://java.sun.com/j2se/1.5.0/docs/api/java/util/regex/Matcher.html)

在 Java 中使用正则表达式
[http://www.regular-expressions.info/java.html](http://www.regular-expressions.info/java.html)

Java Regex API 解释
[http://www.sitepoint.com/article/java-regex-api-explained/](http://www.sitepoint.com/article/java-regex-api-explained/)

您可能还想查看您的数据库是否支持 Soundex 功能（例如，请参阅以下 MySQL 链接）
[http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_soundex](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_soundex)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-11-27T01:35:53.913

您可以使用 Lucene 来索引您的数据库，然后查询 Lucene 索引。有许多基于 Lucene 构建的搜索引擎，包括 Solr。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2010-04-19T20:56:29.387

> 投赞成票 1 票反对

您可以使用 LCS 算法对它们进行评分。

我在我的相册中这样做是为了方便通过电子邮件发送照片并让它们正确归入安全类别。

```
* LCS code
* Example usage (guessing a category based on what people entered) 
```

为了更精确，比 Least Common Subsequence 更好，Least Common Substring 应该更精确，因为字符的顺序很重要。

# java - Servlet 被调用两次！

> ID：322702
> 
> 赞同：4
> 
> 时间：2008-11-27T01:30:34.130
> 
> 标签：java, servlets

抱歉，我没有实际的代码，但我会尝试解释：

我有一个映射到以下内容的 servlet：

```
/admin/* 
```

因此，这将转到一个 servlet：

```
public class AdminController extends MainController {
    public void doPost(HttpServletRequest request, HttpServletResponse response) {
        // Do stuf here
    }
} 
```

这是主控制器：

```
public class MainController extends HttpServlet {
@Override
public void service(ServletRequest request, ServletResponse response) {
    String requesturi = ((HttpServletRequest)request).getRequestURI();
    reqlist = Arrays.asList(requesturi.substring(requesturi.indexOf(Util.rootPath) + Util.rootPath.length()).split("/"));
    reqlist = reqlist.subList(1, reqlist.size());

    doPost((HttpServletRequest)request, (HttpServletResponse)response);
} 
```

所以，请求被传递给 AdminController，没问题，但后来我意识到：

**servlet 被调用了两次！**. 这给我带来了很多错误..

有人对此有所了解吗？是因为我使用了某种传承？感谢你所做的一切！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-10-02T09:14:32.373

虽然它是旧线程，但我的回答可能会对某人有所帮助。今天我遇到了同样的问题。我的特定 servlet 早些时候工作正常，突然它开始调用 doGet 方法两次。经过调查，我发现我的 chrome 浏览器具有 html 验证器扩展，它再次调用 servlet 并使用相同的请求进行 html 验证。在我禁用扩展后，问题得到了解决。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2008-11-27T01:46:40.773

[所有请求类型都会调用HttpServlet.service](http://java.sun.com/products/servlet/2.3/javadoc/javax/servlet/http/HttpServlet.html#service(javax.servlet.http.HttpServletRequest,%20javax.servlet.http.HttpServletResponse))方法，您看到的是 HEAD 请求，然后是 GET 或 POST 请求。无需实现服务，只需实现 doGet 或 doPost。通常所做的只是实现 doPost 或 doGet 之一，然后从您没有实现的那个调用另一个。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-03-09T06:07:38.920

我用简单的方法解决了同样的问题。

如果您正在本地开发并使用作为环回网络的地址[http://127.0.0.1](http://127.0.0.1)访问您的应用程序，请将地址更改为直接的[http://localhost](http://localhost)。

如果您实际上在虚拟主机或服务器上运行它并从外部网络访问它，则不会发生此问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-02-28T09:38:21.397

有同样的问题，我尝试了上面和其他帖子中提到的任何内容，但问题仅在本地。

如果您也没有任何效果，请尝试部署:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-02-19T09:16:16.313

我遇到过同样的问题。我有一个 servlet 来处理发布请求。但是在调用 doPost 之后，它突然开始调用 doGet 方法。所以 doGet 是由我安装的 chrome 插件（FireBug Lite）调用的。停用该插件后问题解决。

# php - PHP 内存缓存设计模式

> ID：322709
> 
> 赞同：12
> 
> 时间：2008-11-27T01:33:20.190
> 
> 标签：php, design-patterns, memcached

我们基本上使用 memcache 来缓存查询结果。

由于其实施方式，失效是一场噩梦。从那以后，我们通过阅读邮件列表学习了一些使用 memcache 的技术，例如允许一组密钥组失效的技巧。知道的可以跳过下一段。。

对于那些不知道但感兴趣的人，诀窍是在您的密钥中添加一个序列号并将该序列号存储在 memcache 中。然后每次在你做你的“获取”之前，你都会抓住当前的序列号并围绕它构建你的密钥。然后，要使整个组无效，您只需增加该序列号。

所以无论如何，我目前正在修改我们的模型来实现这一点。

我的问题是..

我们不知道这种模式，我敢肯定还有其他我们不知道的。我已经搜索并且无法在网络上找到任何用于实现 memcache、最佳实践等的设计模式。

有人可以指出我这样的事情，甚至只是写一个例子吗？我想确保我们在新的重构中不会犯初学者的错误。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2008-11-27T01:55:38.133

对象缓存要记住的一点是，它就是对象/复杂结构的缓存。很多人错误地为直接、高效的查询而命中缓存，这会导致缓存检查/未命中的开销，而数据库本来可以更快地获得结果。

这条建议是我自从教给我以来就牢记在心的一条建议；知道什么时候不缓存，也就是说，当开销抵消了感知的好处时。我知道它没有回答这里的具体问题，但我认为值得指出作为一般提示。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-11-27T02:06:20.203

rob 说的是好建议。根据我的经验，有两种常见的方法来识别和失效标签：唯一标识和基于标签的标识。这些通常组合在一起形成一个完整的解决方案，其中：

1.  缓存记录被分配一个唯一标识符（通常以某种方式取决于它缓存的数据）和任意数量的标签。
2.  缓存记录由其唯一标识符调用。
3.  缓存记录可以通过其唯一标识符（一次一个）或任何标记它们的标签（可能同时使多条记录无效）来失效。

这实现起来相对简单，通常效果很好。我还没有遇到需要更多系统的系统，尽管可能存在一些需要特定解决方案的边缘情况。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-11-27T04:16:01.300

我使用[Zend Cache](http://framework.zend.com/manual/en/zend.cache.html)组件（如果需要，您不必使用整个框架，只需使用 zend 缓存的东西）。它抽象了一些缓存内容（它支持按“标签”对缓存进行分组，尽管 memcache 后端不支持该功能，但我已经相对轻松地推出了自己对“标签”的支持）。所以我用于访问缓存的函数（通常在我的模型中）的模式是：

```
public function getBySlug($ignoreCache = true)
{
    if($ignoreCache || !$result = $this->cache->load('someKeyBasedOnQuery'))
    {
        $select = $this->select()
                ->where('slug = ?', $slug);
        $result = $this->fetchRow($select);

        try
        {
            $this->cache->save($result,'someKeyBasedOnQuery');
        }
        catch(Zend_Exception $error)
        {
          //log exception
        }
    }
    else
    {
        $this->registry->logger->info('someKeyBasedOnQuery came from cache');
    }
    return $result;

} 
```

将缓存键基于查询的哈希意味着如果另一个开发人员绕过我的模型或在其他地方使用另一个函数来做同样的事情，它仍然会从缓存中提取。通常我用一对生成标记标记缓存（表的名称是一个，另一个是函数的名称）。因此，默认情况下，我们的代码在插入、删除和更新带有表标签的缓存项时无效。总而言之，缓存在我们的基本代码中是非常自动化的，开发人员可以确保缓存在我们所做的项目中“正常工作”。（使用标记还有一个很大的副作用是我们有一个页面，它提供了细粒度的缓存清除/管理，可以选择通过模型函数或表来清除缓存）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-11-27T17:50:55.100

我们还将数据库（PostgreSQL）的查询结果存储在 memcache 中，并且我们在表上使用触发器来使缓存无效 - 那里有几个 API（例如[pgmemcache](http://pgfoundry.org/projects/pgmemcache/)，我认为 mysql 也有类似的东西，但我没有肯定知道）。好处是数据库自身（触发器）可以处理更改（更新、插入、删除）时数据的失效，您无需将所有这些内容写入您的“应用程序”。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2011-02-21T14:08:14.527

mysqlnd_qc，它在数据库查询结果返回级别插入 memcaching，自动缓存来自 mysql 的结果集。它非常棒，而且是自动的。

# java - 何时在 Java 中使用 LinkedList 而不是 ArrayList？

> ID：322715
> 
> 赞同：3431
> 
> 时间：2008-11-27T01:36:35.567
> 
> 标签：java, arraylist, collections, linked-list

我一直是一个简单使用的人：

```
List<String> names = new ArrayList<>(); 
```

我使用 interface 作为*portability*的类型名称，因此当我提出这样的问题时，我可以重新编写我的代码。

什么时候应该[`LinkedList`](https://docs.oracle.com/javase/9/docs/api/java/util/LinkedList.html)用完，[`ArrayList`](https://docs.oracle.com/javase/9/docs/api/java/util/ArrayList.html)反之亦然？

* * *

## 回答 #1

> 赞同：3707
> 
> 时间：2008-11-27T01:49:42.357

**在*更多*`ArrayList`的用例中，**总结**比. 如果您不确定 - 只需从.`ArrayDeque`*`LinkedList``ArrayList`***

 **** * *

TLDR，在 ArrayList 中访问一个元素需要常数时间 [O(1)]，而添加一个元素需要 O(n) 时间[最坏情况]。在 LinkedList 中添加元素需要 O(n) 时间，访问也需要 O(n) 时间，但 LinkedList 比 ArrayList 使用更多内存。

`LinkedList`并且`ArrayList`是 List 接口的两种不同实现。`LinkedList`用双向链表实现它。`ArrayList`使用动态调整大小的数组来实现它。

与标准链表和数组操作一样，各种方法将具有不同的算法运行时。

为了[`LinkedList<E>`](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/LinkedList.html)

*   `get(int index)`是*O(n)*（平均有*n/4步），但**O(1)* when `index = 0`or `index = list.size() - 1`（在这种情况下，您也可以使用`getFirst()`and `getLast()`）。**的主要好处之一** `LinkedList<E>`
*   `add(int index, E element)`是*O(n)*（平均有*n/4步），但是**O(1)* when `index = 0`or `index = list.size() - 1`（在这种情况下，您也可以使用`addFirst()`and `addLast()`/ `add()`）。**的主要好处之一** `LinkedList<E>`
*   `remove(int index)`是*O(n)*（平均有*n/4步），但**O(1)* when `index = 0`or `index = list.size() - 1`（在这种情况下，您也可以使用`removeFirst()`and `removeLast()`）。**的主要好处之一** `LinkedList<E>`
*   `Iterator.remove()`是*O(1)*。**的主要好处之一** `LinkedList<E>`
*   `ListIterator.add(E element)`是*O(1)*。**的主要好处之一** `LinkedList<E>`

^(注意：许多操作平均需要*n/4步，最佳情况下的步数**恒定*（例如 index = 0），最坏情况下需要*n/2*步（列表中间）)

为了[`ArrayList<E>`](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/ArrayList.html)

*   `get(int index)`是*O(1)*。**主要好处** `ArrayList<E>`
*   `add(E element)`是*O(1)*摊销，但*O(n)*最坏情况，因为必须调整数组大小和复制
*   `add(int index, E element)`是*O(n)*（平均有*n/2步）*
*   `remove(int index)`是*O(n)*（平均有*n/2步）*
*   `Iterator.remove()`是*O(n)*（平均有*n/2步）*
*   `ListIterator.add(E element)`是*O(n)*（平均有*n/2步）*

^(注意：许多操作平均需要*n/2*步，最佳情况下（列表末尾）的步数*恒定*，最坏情况下（列表开头）需要*n步*)

`LinkedList<E>`允许*使用迭代器*进行恒定时间的插入或删除，但只能顺序访问元素。换句话说，您可以向前或向后遍历列表，但在列表中查找位置所花费的时间与列表的大小成正比。Javadoc 说*“索引到列表中的操作将从开头或结尾遍历列表，以较近者为准”*，因此这些方法平均为*O* *(n)*（*n/4*步），尽管对于.*`index = 0`*

 *`ArrayList<E>`，另一方面，允许快速随机读取访问，因此您可以在恒定时间内抓取任何元素。但是从任何地方添加或删除，但最后需要将所有后面的元素转移过来，要么打开一个开口，要么填补空白。另外，如果添加的元素多于底层数组的容量，则会分配一个新数组（大小的 1.5 倍），并将旧数组复制到新数组中，因此添加到 an最坏的情况`ArrayList`是*O(n)*情况但平均保持不变。

因此，根据您打算执行的操作，您应该相应地选择实现。迭代任何一种 List 实际上同样便宜。（迭代 an`ArrayList`在技术上更快，但除非你正在做一些对性能非常敏感的事情，否则你不应该担心这一点——它们都是常量。）

`LinkedList`当您重新使用现有的迭代器来插入和删除元素时，使用 a 的主要好处就出现了。然后可以通过仅在本地更改列表在*O(1)中完成这些操作。*在数组列表中，数组的其余部分需要*移动*（即复制）。另一方面，在最坏的情况下，按照*O(n)*`LinkedList`中的链接（*n/2*步）寻找方法，而在所需位置可以通过数学计算并在*O(1)*中访问。**`ArrayList`**

 ***`LinkedList`当您从列表的头部添加或删除时，使用 a 的另一个好处会出现，因为这些操作是*O(1)* ，而对于，它们是*O(n)*`ArrayList`。请注意，这`ArrayDeque`可能是`LinkedList`添加和删除头部的一个很好的替代方法，但它不是`List`.

此外，如果您有大型列表，请记住内存使用量也不同。a 的每个元素`LinkedList`都有更多的开销，因为指向下一个和前一个元素的指针也被存储。`ArrayLists`没有这个开销。但是，`ArrayLists`无论是否实际添加了元素，都会占用为容量分配的内存。

an 的默认初始容量`ArrayList`非常小（Java 1.4 - 1.8 为 10）。但是由于底层实现是一个数组，如果添加很多元素，则必须调整数组的大小。当您知道要添加大量元素时，为了避免调整大小的高成本，请`ArrayList`使用更高的初始容量构建 。

如果从数据结构的角度来理解这两种结构，LinkedList 基本上是一个包含头节点的顺序数据结构。Node 是两个组件的包装器：一个 T 类型的值 [通过泛型接受] 和另一个对链接到它的 Node 的引用。所以，我们可以断言它是一个递归数据结构（一个节点包含另一个节点，另一个节点有另一个节点，依此类推......）。如上所述，在 LinkedList 中添加元素需要线性时间。

ArrayList 是一个可增长的数组。它就像一个常规数组。在幕后，当添加一个元素并且 ArrayList 已经满载时，它会创建另一个大小大于先前大小的数组。然后将元素从先前的数组复制到新数组，并且要添加的元素也放置在指定的索引处。

* * *

## 回答 #2

> 赞同：671
> 
> 时间：2011-10-06T06:46:45.893

到目前为止，似乎没有人解决这些列表中的每一个的内存占用问题，除了普遍认为 a`LinkedList`比 a “多得多”，`ArrayList`所以我做了一些数字运算来证明两个列表究竟占用了多少 N 个空引用。

由于引用在其相关系统上是 32 位或 64 位（即使为空），因此我包含了 4 组 32 位和 64 位的数据`LinkedLists`以及`ArrayLists`.

**注意：**显示的`ArrayList`行大小适用于*修剪后的列表*- 实际上，an 中后备数组的容量`ArrayList`通常大于其当前元素数。

**注意 2：（** *感谢 BeeOnRope）*由于 CompressedOops 现在是 JDK6 中期及更高版本的默认值，因此以下 64 位机器的值将基本匹配它们的 32 位对应物，当然除非您特别将其关闭。

* * *

![LinkedList 和 ArrayList 的图表 元素数量 x 字节](https://i.imgur.com/f83xDyz.png)

* * *

结果清楚地表明，`LinkedList`它远远超过`ArrayList`，尤其是在元素数量非常多的情况下。如果内存是一个因素，请避开`LinkedLists`.

我使用的公式如下，如果我做错了什么，请告诉我，我会修复它。对于 32 位或 64 位系统，“b”是 4 或 8，“n”是元素的数量。注意 mods 的原因是因为 java 中的所有对象无论是否全部使用都会占用 8 字节空间的倍数。

**数组列表：**

`ArrayList object header + size integer + modCount integer + array reference + (array oject header + b * n) + MOD(array oject, 8) + MOD(ArrayList object, 8) == 8 + 4 + 4 + b + (12 + b * n) + MOD(12 + b * n, 8) + MOD(8 + 4 + 4 + b + (12 + b * n) + MOD(12 + b * n, 8), 8)`

**链表：**

`LinkedList object header + size integer + modCount integer + reference to header + reference to footer + (node object overhead + reference to previous element + reference to next element + reference to element) * n) + MOD(node object, 8) * n + MOD(LinkedList object, 8) == 8 + 4 + 4 + 2 * b + (8 + 3 * b) * n + MOD(8 + 3 * b, 8) * n + MOD(8 + 4 + 4 + 2 * b + (8 + 3 * b) * n + MOD(8 + 3 * b, 8) * n, 8)`

* * *

## 回答 #3

> 赞同：283
> 
> 时间：2008-11-27T14:20:16.133

`ArrayList`是你想要的。`LinkedList`几乎总是一个（性能）错误。

为什么`LinkedList`很烂：

*   它使用大量的小内存对象，因此会影响整个进程的性能。
*   许多小对象不利于缓存局部性。
*   任何索引操作都需要遍历，即具有 O(n) 性能。这在源代码中并不明显，导致算法 O(n) 比`ArrayList`使用时慢。
*   获得良好的性能是棘手的。
*   即使 big-O 性能与 相同`ArrayList`，它也可能会明显变慢。
*   在源代码中看到它很不和谐，`LinkedList`因为它可能是错误的选择。

* * *

## 回答 #4

> 赞同：169
> 
> 时间：2010-04-08T20:33:35.467

```
Algorithm           ArrayList   LinkedList
seek front            O(1)         O(1)
seek back             O(1)         O(1)
seek to index         O(1)         O(N)
insert at front       O(N)         O(1)
insert at back        O(1)         O(1)
insert after an item  O(N)         O(1) 
```

[算法：Big-Oh Notation](https://web.archive.org/web/20180729155145/http://leepoint.net/algorithms/big-oh/bigoh.html)（已归档）

ArrayLists 适用于一次写入多次读取或附加程序，但不适合从前面或中间添加/删除。

* * *

## 回答 #5

> 赞同：153
> 
> 时间：2011-01-01T20:23:52.100

作为一个已经在超大规模 SOA Web 服务上进行操作性能工程大约十年的人，我更喜欢 LinkedList 的行为而不是 ArrayList。虽然 LinkedList 的稳态吞吐量更差，因此可能会导致购买更多硬件 - ArrayList 在压力下的行为可能会导致集群中的应用程序以近乎同步的方式扩展其阵列，并且对于大阵列大小可能会导致缺乏响应能力在应用程序和中断，而在压力下，这是灾难性的行为。

同样，您可以从默认吞吐量的终身垃圾收集器中获得更好的应用程序吞吐量，但是一旦您获得具有 10GB 堆的 Java 应用程序，您可能会在 Full GC 期间锁定应用程序 25 秒，这会导致 SOA 应用程序超时和失败如果它发生得太频繁，就会破坏你的 SLA。尽管 CMS 收集器占用更多资源并且无法达到相同的原始吞吐量，但它是一个更好的选择，因为它具有更高的可预测性和更小的延迟。

如果您所说的性能是吞吐量并且您可以忽略延迟，那么 ArrayList 只是性能更好的选择。根据我的工作经验，我不能忽视最坏情况下的延迟。

更新（2021 年 8 月 27 日——10 年后）：这个答案（我对 SO 历史上最受好评的答案）很可能是错误的（原因在下面的评论中列出）。我想补充一点，ArrayList 将优化内存的顺序读取并最大限度地减少缓存行和 TLB 未命中等。相比之下，当数组增长超过界限时的复制开销可能是无关紧要的（并且可以通过高效的 CPU 操作来完成）。考虑到硬件趋势，随着时间的推移，这个答案也可能变得更糟。LinkedList 可能有意义的唯一情况是高度做作的事情，您有数千个列表，其中任何一个都可能增长到 GB 大小，但在分配列表和设置它们时无法做出好的猜测所有到 GB 大小的都会炸毁堆。如果你发现了这样的问题，那么它确实需要重新设计你的解决方案（我不喜欢轻易建议重新设计旧代码，因为我自己维护成堆的旧代码，但那将是一个非常好的案例，原始设计只是跑出了跑道，确实需要被淘汰）。不过，我仍然会将我几十年前的糟糕观点留在那里供您阅读。简单，合乎逻辑而且非常错误。不过，我仍然会将我几十年前的糟糕意见留在那里供您阅读。简单，合乎逻辑而且非常错误。不过，我仍然会将我几十年前的糟糕意见留在那里供您阅读。简单，合乎逻辑而且非常错误。

* * *

## 回答 #6

> 赞同：117
> 
> 时间：2009-05-19T11:21:20.293

是的，我知道，这是一个古老的问题，但我会投入两分钱：

LinkedList在性能方面*几乎总是*错误的选择。有一些非常特殊的算法需要 LinkedList，但这些算法非常非常罕见，并且该算法通常特别依赖于 LinkedList 在列表中间相对快速地插入和删除元素的能力，一旦你导航到那里使用 ListIterator。

LinkedList 优于 ArrayList 的一个常见用例是：队列。但是，如果您的目标是性能，而不是 LinkedList，您还应该考虑使用 ArrayBlockingQueue （如果您可以提前确定队列大小的上限，并且可以预先分配所有内存），或者这个[CircularArrayList 实现](http://www.javaspecialists.eu/archive/Issue027.html). （是的，它是从 2001 年开始的，因此您需要对其进行泛化，但我得到的性能比与刚刚在最近的 JVM 中引用的文章中的内容相当）

* * *

## 回答 #7

> 赞同：93
> 
> 时间：2017-03-01T10:47:43.927

LinkedList 的作者 Joshua Bloch：

> 有人真的使用 LinkedList 吗？我写了它，我从不使用它。

链接：[https ://twitter.com/joshbloch/status/583813919019573248](https://twitter.com/joshbloch/status/583813919019573248)

我很抱歉这个答案没有像其他答案那样信息丰富，但我认为如果不透露的话，这将是最不言自明的。

* * *

## 回答 #8

> 赞同：79
> 
> 时间：2008-11-27T01:39:59.897

这是一个效率问题。`LinkedList`添加和删​​除元素很快，但访问特定元素很慢。`ArrayList`访问特定元素的速度很快，但添加到任一端可能很慢，尤其是在中间删除很慢。

[Array vs ArrayList vs LinkedList vs Vector](https://web.archive.org/web/20090204031044/http://www.javafaq.nu/java-article1111.html)更深入， [Linked List](http://en.wikipedia.org/wiki/Linked_list)也是如此。

* * *

## 回答 #9

> 赞同：57
> 
> 时间：2011-09-21T22:59:23.773

正确或错误：请在本地执行测试并自行决定！

编辑/删除`LinkedList`比`ArrayList`.

`ArrayList`, backed by `Array`，需要双倍大小，在大容量应用中效果更差。

下面是每个操作的单元测试结果。时间以纳秒为单位。

* * *

```
Operation                       ArrayList                      LinkedList  

AddAll   (Insert)               101,16719                      2623,29291 

Add      (Insert-Sequentially)  152,46840                      966,62216

Add      (insert-randomly)      36527                          29193

remove   (Delete)               20,56,9095                     20,45,4904

contains (Search)               186,15,704                     189,64,981 
```

* * *

这是代码：

```
import org.junit.Assert;
import org.junit.Test;

import java.util.*;

public class ArrayListVsLinkedList {
    private static final int MAX = 500000;
    String[] strings = maxArray();

    ////////////// ADD ALL ////////////////////////////////////////
    @Test
    public void arrayListAddAll() {
        Watch watch = new Watch();
        List<String> stringList = Arrays.asList(strings);
        List<String> arrayList = new ArrayList<String>(MAX);

        watch.start();
        arrayList.addAll(stringList);
        watch.totalTime("Array List addAll() = ");//101,16719 Nanoseconds
    }

    @Test
    public void linkedListAddAll() throws Exception {
        Watch watch = new Watch();
        List<String> stringList = Arrays.asList(strings);

        watch.start();
        List<String> linkedList = new LinkedList<String>();
        linkedList.addAll(stringList);
        watch.totalTime("Linked List addAll() = ");  //2623,29291 Nanoseconds
    }

    //Note: ArrayList is 26 time faster here than LinkedList for addAll()

    ///////////////// INSERT /////////////////////////////////////////////
    @Test
    public void arrayListAdd() {
        Watch watch = new Watch();
        List<String> arrayList = new ArrayList<String>(MAX);

        watch.start();
        for (String string : strings)
            arrayList.add(string);
        watch.totalTime("Array List add() = ");//152,46840 Nanoseconds
    }

    @Test
    public void linkedListAdd() {
        Watch watch = new Watch();

        List<String> linkedList = new LinkedList<String>();
        watch.start();
        for (String string : strings)
            linkedList.add(string);
        watch.totalTime("Linked List add() = ");  //966,62216 Nanoseconds
    }

    //Note: ArrayList is 9 times faster than LinkedList for add sequentially

    /////////////////// INSERT IN BETWEEN ///////////////////////////////////////

    @Test
    public void arrayListInsertOne() {
        Watch watch = new Watch();
        List<String> stringList = Arrays.asList(strings);
        List<String> arrayList = new ArrayList<String>(MAX + MAX / 10);
        arrayList.addAll(stringList);

        String insertString0 = getString(true, MAX / 2 + 10);
        String insertString1 = getString(true, MAX / 2 + 20);
        String insertString2 = getString(true, MAX / 2 + 30);
        String insertString3 = getString(true, MAX / 2 + 40);

        watch.start();

        arrayList.add(insertString0);
        arrayList.add(insertString1);
        arrayList.add(insertString2);
        arrayList.add(insertString3);

        watch.totalTime("Array List add() = ");//36527
    }

    @Test
    public void linkedListInsertOne() {
        Watch watch = new Watch();
        List<String> stringList = Arrays.asList(strings);
        List<String> linkedList = new LinkedList<String>();
        linkedList.addAll(stringList);

        String insertString0 = getString(true, MAX / 2 + 10);
        String insertString1 = getString(true, MAX / 2 + 20);
        String insertString2 = getString(true, MAX / 2 + 30);
        String insertString3 = getString(true, MAX / 2 + 40);

        watch.start();

        linkedList.add(insertString0);
        linkedList.add(insertString1);
        linkedList.add(insertString2);
        linkedList.add(insertString3);

        watch.totalTime("Linked List add = ");//29193
    }

    //Note: LinkedList is 3000 nanosecond faster than ArrayList for insert randomly.

    ////////////////// DELETE //////////////////////////////////////////////////////
    @Test
    public void arrayListRemove() throws Exception {
        Watch watch = new Watch();
        List<String> stringList = Arrays.asList(strings);
        List<String> arrayList = new ArrayList<String>(MAX);

        arrayList.addAll(stringList);
        String searchString0 = getString(true, MAX / 2 + 10);
        String searchString1 = getString(true, MAX / 2 + 20);

        watch.start();
        arrayList.remove(searchString0);
        arrayList.remove(searchString1);
        watch.totalTime("Array List remove() = ");//20,56,9095 Nanoseconds
    }

    @Test
    public void linkedListRemove() throws Exception {
        Watch watch = new Watch();
        List<String> linkedList = new LinkedList<String>();
        linkedList.addAll(Arrays.asList(strings));

        String searchString0 = getString(true, MAX / 2 + 10);
        String searchString1 = getString(true, MAX / 2 + 20);

        watch.start();
        linkedList.remove(searchString0);
        linkedList.remove(searchString1);
        watch.totalTime("Linked List remove = ");//20,45,4904 Nanoseconds
    }

    //Note: LinkedList is 10 millisecond faster than ArrayList while removing item.

    ///////////////////// SEARCH ///////////////////////////////////////////
    @Test
    public void arrayListSearch() throws Exception {
        Watch watch = new Watch();
        List<String> stringList = Arrays.asList(strings);
        List<String> arrayList = new ArrayList<String>(MAX);

        arrayList.addAll(stringList);
        String searchString0 = getString(true, MAX / 2 + 10);
        String searchString1 = getString(true, MAX / 2 + 20);

        watch.start();
        arrayList.contains(searchString0);
        arrayList.contains(searchString1);
        watch.totalTime("Array List addAll() time = ");//186,15,704
    }

    @Test
    public void linkedListSearch() throws Exception {
        Watch watch = new Watch();
        List<String> linkedList = new LinkedList<String>();
        linkedList.addAll(Arrays.asList(strings));

        String searchString0 = getString(true, MAX / 2 + 10);
        String searchString1 = getString(true, MAX / 2 + 20);

        watch.start();
        linkedList.contains(searchString0);
        linkedList.contains(searchString1);
        watch.totalTime("Linked List addAll() time = ");//189,64,981
    }

    //Note: Linked List is 500 Milliseconds faster than ArrayList

    class Watch {
        private long startTime;
        private long endTime;

        public void start() {
            startTime = System.nanoTime();
        }

        private void stop() {
            endTime = System.nanoTime();
        }

        public void totalTime(String s) {
            stop();
            System.out.println(s + (endTime - startTime));
        }
    }

    private String[] maxArray() {
        String[] strings = new String[MAX];
        Boolean result = Boolean.TRUE;
        for (int i = 0; i < MAX; i++) {
            strings[i] = getString(result, i);
            result = !result;
        }
        return strings;
    }

    private String getString(Boolean result, int i) {
        return String.valueOf(result) + i + String.valueOf(!result);
    }
} 
```

* * *

## 回答 #10

> 赞同：55
> 
> 时间：2013-04-21T00:03:47.817

`ArrayList`本质上是一个数组。`LinkedList`实现为双链表。

`get`很清楚。O(1) for `ArrayList`，因为`ArrayList`允许使用索引进行随机访问。O(n) for `LinkedList`，因为它需要先找到索引。`add`注意：和有不同的版本`remove`。

`LinkedList`添加和删​​除速度更快，但获取速度较慢。简而言之，`LinkedList`如果出现以下情况，应该首选：

1.  没有大量随机访问元素
2.  有大量的添加/删除操作

===**数组**列表 ===

*   加(E e)
    *   在 ArrayList 末尾添加
    *   需要调整内存大小的成本。
    *   O(n) 最差，O(1) 摊销
*   添加（int索引，E元素）
    *   添加到特定的索引位置
    *   需要转移和可能的内存调整成本
    *   在）
*   删除（整数索引）
    *   移除指定元素
    *   需要转移和可能的内存调整成本
    *   在）
*   删除（对象o）
    *   从此列表中删除第一次出现的指定元素
    *   需要先搜索元素，然后转移和可能的内存调整成本
    *   在）

===**链表**===

*   加(E e)

    *   添加到列表的末尾
    *   O(1)
*   添加（int索引，E元素）

    *   在指定位置插入
    *   需要先找到位置
    *   在）
*   消除（）
    *   删除列表的第一个元素
    *   O(1)
*   删除（整数索引）
    *   移除指定索引的元素
    *   需要先找到元素
    *   在）
*   删除（对象o）
    *   删除指定元素的第一次出现
    *   需要先找到元素
    *   在）

这是来自[programcreek.com](http://www.programcreek.com/2013/03/arraylist-vs-linkedlist-vs-vector/)的图（`add`并且`remove`是第一种类型，即在列表末尾添加一个元素并删除列表中指定位置的元素。）：

![在此处输入图像描述](https://i.stack.imgur.com/pdKaZ.png)

* * *

## 回答 #11

> 赞同：44
> 
> 时间：2018-10-19T02:53:16.687

**TL;DR**由于现代计算机体系结构，`ArrayList`对于几乎任何可能的用例都将显着提高效率 - 因此`LinkedList`除了一些非常独特和极端的情况外，应避免使用。

* * *

理论上，LinkedList 对于`add(E element)`

此外，在列表中间添加一个元素应该非常有效。

实践非常不同，因为 LinkedList 是一个**Cache Hostile** Data 结构。从性能 POV 来看 - 很少有比*Cache-friendly*`LinkedList`性能更好的情况。 *`ArrayList`*

 *以下是在随机位置插入元素的基准测试结果。如您所见 - 数组列表效率更高，尽管理论上列表中间的每个插入都需要“移动”数组的*n 个*后面的元素（较低的值更好）：

[![在此处输入图像描述](https://i.stack.imgur.com/edAd8.png)](https://i.stack.imgur.com/edAd8.png)

在下一代硬件上工作（更大、更高效的缓存）——结果更具决定性：

[![在此处输入图像描述](https://i.stack.imgur.com/XtdBP.png)](https://i.stack.imgur.com/XtdBP.png)

LinkedList 需要更多的时间来完成同样的工作。[source](https://kjellkod.wordpress.com/2012/08/08/java-galore-linkedlist-vs-arraylist-vs-dynamicintarray/) [源代码](https://ideone.com/JOJ05)

这有两个主要原因：

1.  **主要是**- 的节点`LinkedList`随机分散在内存中。RAM（“随机存取存储器”）并不是真正随机的，需要提取内存块进行缓存。这个操作需要时间，而且当这种抓取频繁发生时——缓存中的内存页需要一直被替换->缓存未命中->缓存效率不高。 `ArrayList`元素存储在连续内存上——这正是现代 CPU 架构正在优化的目标。

2.  **Secondary** `LinkedList`需要保留后向/前向指针，这意味着存储的每个值的内存消耗是`ArrayList`.

[顺便说一句， DynamicIntArray](https://github.com/apache/orc/blob/master/java/core/src/java/org/apache/orc/impl/DynamicIntArray.java)是一个自定义的 ArrayList 实现，它持有`Int`（原始类型）而不是 Objects - 因此所有数据实际上都是相邻存储的 - 因此效率更高。

要记住的一个关键因素是，获取内存块的成本比访问单个内存单元的成本更重要。这就是为什么读取器 1MB 的顺序内存比从不同的内存块读取这么多的数据快 400 倍：

```
Latency Comparison Numbers (~2012)
----------------------------------
L1 cache reference                           0.5 ns
Branch mispredict                            5   ns
L2 cache reference                           7   ns                      14x L1 cache
Mutex lock/unlock                           25   ns
Main memory reference                      100   ns                      20x L2 cache, 200x L1 cache
Compress 1K bytes with Zippy             3,000   ns        3 us
Send 1K bytes over 1 Gbps network       10,000   ns       10 us
Read 4K randomly from SSD*             150,000   ns      150 us          ~1GB/sec SSD
Read 1 MB sequentially from memory     250,000   ns      250 us
Round trip within same datacenter      500,000   ns      500 us
Read 1 MB sequentially from SSD*     1,000,000   ns    1,000 us    1 ms  ~1GB/sec SSD, 4X memory
Disk seek                           10,000,000   ns   10,000 us   10 ms  20x datacenter roundtrip
Read 1 MB sequentially from disk    20,000,000   ns   20,000 us   20 ms  80x memory, 20X SSD
Send packet CA->Netherlands->CA    150,000,000   ns  150,000 us  150 ms 
```

资料来源：[每个程序员都应该知道的延迟数字](https://gist.github.com/jboner/2841832)

为了更清楚地说明这一点，请检查将元素添加到列表开头的基准。这是一个用例，在理论上，`LinkedList`应该真正发光，并且`ArrayList`应该呈现较差甚至更坏的结果：

[![在此处输入图像描述](https://i.stack.imgur.com/2EygL.png)](https://i.stack.imgur.com/2EygL.png)

注意：这是 C++ 标准库的基准测试，但我之前的经验表明 C++ 和 Java 的结果非常相似。[源代码](https://ideone.com/DDEJF)

复制连续的大量内存是现代 CPU 优化的操作 - 改变理论并实际上再次`ArrayList`/`Vector`更高效

* * *

致谢：此处发布的所有基准均由[Kjell Hedström](https://www.linkedin.com/in/kjellkod/)创建。更多数据可以在[他的博客上找到](https://kjellkod.wordpress.com/)

* * *

## 回答 #12

> 赞同：36
> 
> 时间：2008-11-27T01:41:47.740

`ArrayList`是随机访问的，而`LinkedList`扩展和删除元素非常便宜。大多数情况下，`ArrayList`没问题。

除非您创建了大型列表并测量了瓶颈，否则您可能永远不需要担心差异。

* * *

## 回答 #13

> 赞同：25
> 
> 时间：2008-11-28T02:04:15.433

如果您的代码有`add(0)`and `remove(0)`，请使用`LinkedList`and 它更漂亮的`addFirst()`and`removeFirst()`方法。否则，使用`ArrayList`.

当然，[Guava](https://github.com/google/guava)的[ImmutableList](https://google.github.io/guava/releases/21.0/api/docs/com/google/common/collect/ImmutableList.html)是你最好的朋友。

* * *

## 回答 #14

> 赞同：23
> 
> 时间：2017-02-10T15:14:02.713

让我们比较一下 LinkedList 和 ArrayList wrt 下面的参数：

## 一、实施

> *ArrayList*是列表接口的可调整大小的数组实现，而
> 
> *LinkedList*是列表接口的双向链表实现。

* * *

## 2\. 性能

*   ### get(int index) 或搜索操作

    > *ArrayList* get(int index) 操作以恒定时间运行，即 O(1) 而
    > 
    > *LinkedList* get(int index) 操作运行时间为 O(n) 。

    *ArrayList*比 LinkedList 更快的原因是 ArrayList 对其元素使用基于索引的系统，因为它在内部使用数组数据结构，另一方面，

    *LinkedList*不为其元素提供基于索引的访问，因为它从开头或结尾（以较近者为准）进行迭代以检索指定元素索引处的节点。

*   ### insert() 或 add(Object) 操作

    > *LinkedList*中的插入通常比 ArrayList 快。在 LinkedList 添加或插入是 O(1) 操作。
    > 
    > 而在*ArrayList*中，如果数组是完整的，即最坏的情况，则调整数组大小并将元素复制到新数组会产生额外的成本，这使得 ArrayList 中的添加操作的运行时间为 O(n)，否则为 O(1) .

*   ### 删除（int）操作

    LinkedList 中的删除操作一般与ArrayList 相同，即O(n)。

    > 在*LinkedList*中，有两个重载的 remove 方法。一种是不带任何参数的 remove()，它删除列表的头部并以恒定时间 O(1) 运行。LinkedList 中另一个重载的删除方法是 remove(int) 或 remove(Object)，它删除作为参数传递的 Object 或 int。此方法遍历 LinkedList 直到找到 Object 并将其从原始列表中取消链接。因此，此方法运行时间为 O(n)。
    > 
    > 而在*ArrayList* remove(int) 方法涉及将元素从旧数组复制到新的更新数组，因此它的运行时间是 O(n)。

* * *

## 3\. 反向迭代器

> *LinkedList*可以使用 descendingIterator() 反向迭代，而
> 
> *ArrayList*中没有 descendingIterator() ，因此我们需要编写自己的代码来反向迭代 ArrayList。

* * *

## 4\. 初始容量

> 如果构造函数没有重载，则*ArrayList*创建一个初始容量为 10 的空列表，而
> 
> *LinkedList* 只构造空列表，没有任何初始容量。

* * *

## 5\. 内存开销

> 与 ArrayList 相比， *LinkedList*中的内存开销更大，因为 LinkedList 中的节点需要维护下一个和前一个节点的地址。尽管
> 
> 在*ArrayList* 中，每个索引只保存实际的对象（数据）。

* * *

[来源](http://javahungry.blogspot.com/2015/04/difference-between-arraylist-and-linkedlist-in-java-example.html)

* * *

## 回答 #15

> 赞同：23
> 
> 时间：2019-01-14T12:54:12.597

我通常根据我在该特定列表上执行的操作的时间复杂性使用一个而不是另一个。

```
|---------------------|---------------------|--------------------|------------|
|      Operation      |     ArrayList       |     LinkedList     |   Winner   |
|---------------------|---------------------|--------------------|------------|
|     get(index)      |       O(1)          |         O(n)       | ArrayList  |
|                     |                     |  n/4 steps in avg  |            |
|---------------------|---------------------|--------------------|------------|
|      add(E)         |       O(1)          |         O(1)       | LinkedList |
|                     |---------------------|--------------------|            |
|                     | O(n) in worst case  |                    |            |
|---------------------|---------------------|--------------------|------------|
|    add(index, E)    |       O(n)          |         O(n)       | LinkedList |
|                     |     n/2 steps       |      n/4 steps     |            |
|                     |---------------------|--------------------|            |
|                     |                     |  O(1) if index = 0 |            |
|---------------------|---------------------|--------------------|------------|
|  remove(index, E)   |       O(n)          |         O(n)       | LinkedList |
|                     |---------------------|--------------------|            |
|                     |     n/2 steps       |      n/4 steps     |            |
|---------------------|---------------------|--------------------|------------|
|  Iterator.remove()  |       O(n)          |         O(1)       | LinkedList |
|  ListIterator.add() |                     |                    |            |
|---------------------|---------------------|--------------------|------------|

|--------------------------------------|-----------------------------------|
|              ArrayList               |            LinkedList             |
|--------------------------------------|-----------------------------------|
|     Allows fast read access          |   Retrieving element takes O(n)   |
|--------------------------------------|-----------------------------------|
|   Adding an element require shifting | o(1) [but traversing takes time]  |
|       all the later elements         |                                   |
|--------------------------------------|-----------------------------------|
|   To add more elements than capacity |
|    new array need to be allocated    |
|--------------------------------------| 
```

* * *

## 回答 #16

> 赞同：22
> 
> 时间：2013-04-19T07:26:48.140

我知道这是一篇旧帖子，但老实说，我不敢相信没有人提到过`LinkedList`implements `Deque`。看看`Deque`(and `Queue`) 中的方法；如果您想要一个公平的比较，请尝试运行并`LinkedList`进行`ArrayDeque`功能比较。

* * *

## 回答 #17

> 赞同：20
> 
> 时间：2012-11-06T14:32:08.023

这是`ArrayList`and`LinkedList`和 also中的 Big-O 符号`CopyOnWrite-ArrayList`：

**数组列表**

```
get                 O(1)
add                 O(1)
contains            O(n)
next                O(1)
remove              O(n)
iterator.remove     O(n) 
```

**链表**

```
get                 O(n)
add                 O(1)
contains            O(n)
next                O(1)
remove              O(1)
iterator.remove     O(1) 
```

**CopyOnWrite-ArrayList**

```
get                 O(1)
add                 O(n)
contains            O(n)
next                O(1)
remove              O(n)
iterator.remove     O(n) 
```

基于这些，您必须决定选择什么。:)

* * *

## 回答 #18

> 赞同：15
> 
> 时间：2008-11-27T01:47:34.280

除了上面的其他好论点之外，您还应该注意`ArrayList`implements`RandomAccess`接口，而`LinkedList`implements `Queue`。

因此，它们以某种方式解决了略有不同的问题，效率和行为有所不同（请参阅他们的方法列表）。

* * *

## 回答 #19

> 赞同：11
> 
> 时间：2008-11-27T01:42:03.217

这取决于您将在列表中执行更多操作。

`ArrayList`访问索引值更快。插入或删除对象时情况更糟。

要了解更多信息，请阅读任何有关数组和链表之间区别的文章。

* * *

## 回答 #20

> 赞同：9
> 
> 时间：2010-04-20T15:32:01.660

数组列表本质上是一个具有添加项目等方法的数组（您应该改用通用列表）。它是可以通过索引器访问的项目集合（例如 [0]）。它意味着从一个项目到下一个项目的进展。

链表指定从一个项目到下一个项目的进展（项目 a -> 项目 b）。您可以使用数组列表获得相同的效果，但链表绝对说明了应该在前一个之后的项目。

* * *

## 回答 #21

> 赞同：9
> 
> 时间：2011-09-05T06:33:52.753

请参阅[Java 教程 - 列出实现](http://download.oracle.com/javase/tutorial/collections/implementations/list.html)。

* * *

## 回答 #22

> 赞同：8
> 
> 时间：2010-03-22T22:32:31.243

链表的一个重要特征（我在另一个答案中没有读到）是两个列表的串联。对于数组，这是 O(n)（+ 一些重新分配的开销）对于链表，这只是 O(1) 或 O(2) ;-)

**重要提示**：对于 Java，`LinkedList`这是不正确的！请参阅[Java中的链表是否有快速的连接方法？](https://stackoverflow.com/q/2494031/587642)

* * *

## 回答 #23

> 赞同：8
> 
> 时间：2017-05-15T18:06:30.810

ArrayList 和 LinkedList 各有优缺点。

ArrayList 使用连续的内存地址，而 LinkedList 使用指向下一个节点的指针。因此，当您想在 ArrayList 中查找元素时，比使用 LinkedList 进行 n 次迭代要快。

另一方面，LinkedList 中的插入和删除要容易得多，因为您只需更改指针，而 ArrayList 意味着对任何插入或删除都使用移位操作。

如果您的应用程序中有频繁的检索操作，请使用 ArrayList。如果您经常插入和删除，请使用 LinkedList。

* * *

## 回答 #24

> 赞同：7
> 
> 时间：2018-06-07T10:33:41.423

**1) 底层数据结构**

ArrayList 和 LinkedList 之间的第一个区别在于 ArrayList 由 Array 支持，而 LinkedList 由 LinkedList 支持。这将导致性能上的进一步差异。

**2) LinkedList 实现 Deque**

`add()`ArrayList 和 LinkedList 的另一个区别是，除了 List 接口之外，LinkedList 还实现了 Deque 接口，该接口为and`poll()`和其他几个 Deque 函数提供了先进先出操作。3）在ArrayList中添加元素 在ArrayList中添加元素如果不触发Array的re-size是O（1）操作，在这种情况下它变为O（log（n）），另一方面，在其中追加一个元素LinkedList 是 O(1) 操作，因为它不需要任何导航。

**4) 从一个位置移除一个元素**

为了从特定索引中删除一个元素，例如`remove(index)`调用根据接近度从任一方向遍历。

**5) 遍历 ArrayList 或 LinkedList**

迭代是 LinkedList 和 ArrayList 的 O(n) 操作，其中 n 是元素的编号。

**6) 从某个位置检索元素**

该`get(index)`操作在 ArrayList 中为 O(1)，而在 LinkedList 中为 O(n/2)，因为它需要遍历该条目。不过，在大 O 表示法中，O(n/2) 只是 O(n)，因为我们忽略了那里的常数。

**7) 内存**

LinkedList 使用一个包装对象 Entry，它是一个静态嵌套类，用于存储数据和两个节点 next 和 previous，而 ArrayList 只是将数据存储在 Array 中。

因此，ArrayList 的内存需求似乎比 LinkedList 少，除了 Array 在将内容从一个 Array 复制到另一个 Array 时执行重新调整大小操作的情况。

如果 Array 足够大，此时可能会占用大量内存并触发垃圾收集，这会减慢响应时间。

从 ArrayList 与 LinkedList 之间的所有上述差异来看，看起来 ArrayList 在几乎所有情况下都是比 LinkedList 更好的选择，除非您执行频繁`add()`操作而不是`remove()`, 或`get()`。

修改链表比修改 ArrayList 更容易，特别是当您从开始或结束添加或删除元素时，因为链表内部保留了这些位置的引用，并且它们可以在 O(1) 时间内访问。

换句话说，你不需要遍历链表到达你想要添加元素的位置，那样的话，加法就变成了O(n)的操作。例如，在链表中间插入或删除一个元素。

在我看来，对于 Java 中的大多数实际目的，使用 ArrayList 而不是 LinkedList。

* * *

## 回答 #25

> 赞同：6
> 
> 时间：2011-10-03T23:23:00.370

我已经阅读了回复，但在一种情况下，我总是在 ArrayList 上使用 LinkedList，我想分享以听取意见：

每次我有一个方法返回从数据库获得的数据列表时，我总是使用 LinkedList。

我的理由是，因为不可能确切知道我得到了多少结果，所以不会浪费内存（就像 ArrayList 中的容量和实际元素数量之间的差异一样），并且不会浪费时间尝试复制容量。

就 ArrayList 而言，我同意至少您应该始终使用具有初始容量的构造函数，以尽可能减少数组的重复。

* * *

## 回答 #26

> 赞同：5
> 
> 时间：2013-04-25T07:57:38.497

ArrayList 中的 get(i) 操作比 LinkedList 更快，因为：
**ArrayList：** List 接口的 Resizable-array 实现
**LinkedList：** List 和 Deque 接口的双向链表实现

索引到列表中的操作将从开头或结尾遍历列表，以更接近指定索引的为准。

* * *

## 回答 #27

> 赞同：5
> 
> 时间：2016-11-02T09:00:23.477

`ArrayList`两者`LinkedList`的实现`List interface` 及其方法和结果几乎相同。但是，它们之间几乎没有区别，这取决于要求，它们使一个比另一个更好。

## ArrayList 与 LinkedList

1）`Search:` `ArrayList`与搜索操作相比，`LinkedList`搜索操作相当快。`get(int index)`in`ArrayList`给出了`O(1)`while `LinkedList`performance is的表现`O(n)`。

`Reason:` `ArrayList`为其元素维护基于索引的系统，因为它隐式使用数组数据结构，这使得在列表中搜索元素的速度更快。另一方面`LinkedList`实现了双向链表，它需要遍历所有元素以搜索元素。

2）`Deletion:` `LinkedList`删除操作提供`O(1)`性能，同时`ArrayList`提供可变性能：`O(n)`在最坏的情况下（在删除第一个元素时）和`O(1)`在最好的情况下（在删除最后一个元素时）。

> 结论：LinkedList 元素删除比 ArrayList 更快。

原因：LinkedList 的每个元素都维护着两个指针（地址），它们指向列表中的两个相邻元素。因此，删除只需要更改将要删除的节点的两个相邻节点（元素）中的指针位置。而在 ArrayList 中，所有元素都需要移动以填充已删除元素创建的空间。

3) `Inserts Performance:` `LinkedList`add 方法提供性能`O(1)`，而在最坏的情况下提供。原因与删除的解释相同。`ArrayList``O(n)`

4)`Memory Overhead:` `ArrayList`维护索引和元素数据，同时`LinkedList`维护元素数据和相邻节点的两个指针

> 因此，LinkedList 中的内存消耗相对较高。

## 这些类之间几乎没有相似之处，如下所示：

*   ArrayList 和 LinkedList 都是 List 接口的实现。
*   它们都维护元素插入顺序，这意味着在显示 ArrayList 和 LinkedList 元素时，结果集将具有与元素插入列表相同的顺序。
*   这两个类都是非同步的，可以使用 Collections.synchronizedList 方法显式同步。
*   这些类返回的 和 是`iterator`（如果在迭代器创建后的任何时候对 list 进行了结构修改，除了通过自己的 remove 或 add 方法之外的任何方式，迭代器将a ）。`listIterator``fail-fast``iterator’s``throw``ConcurrentModificationException`

## 什么时候用 LinkedList，什么时候用 ArrayList？

*   如上所述，插入和删除操作 `(O(1))`与`LinkedList`.`ArrayList(O(n))`

    > 因此，如果应用中需要频繁的增删改查，那么LinkedList是最好的选择。

*   搜索 ( `get method`) 操作速度快`Arraylist (O(1))`但速度不快`LinkedList (O(n))`

    > 因此，如果添加和删除操作较少，搜索操作要求较多，ArrayList 将是您的最佳选择。

* * *

## 回答 #28

> 赞同：3
> 
> 时间：2016-06-11T20:40:29.867

对于 ArrayLists 和 LinkedLists，两者`remove()`都`insert()`具有 O(n) 的运行时效率。然而，线性处理时间背后的原因来自两个截然不同的原因：

在 ArrayList 中，您可以在 O(1) 中找到元素，但实际上删除或插入某些东西会使它成为 O(n)，因为需要更改以下所有元素。

在 LinkedList 中，实际上需要 O(n) 才能到达所需的元素，因为我们必须从头开始，直到到达所需的索引。实际上删除或插入是不变的，因为我们只需要更改 1 个引用`remove()`和 2 个引用`insert()`。

两者中哪一个更快插入和删除取决于它发生的位置。如果我们更接近开始，LinkedList 会更快，因为我们必须通过相对较少的元素。如果我们更接近终点，ArrayList 会更快，因为我们在恒定时间内到达那里，只需要更改它后面的少数剩余元素。当恰好在中间完成时，LinkedList 会更快，因为遍历 n 个元素比移动 n 个值要快。

奖励：虽然没有办法为 ArrayList 制作这两种方法 O(1)，但实际上在 LinkedLists 中有一种方法可以做到这一点。假设我们要遍历整个 List 删除和插入元素。通常，您将使用 LinkedList 从一开始就为每个元素开始，我们也可以使用迭代器“保存”我们正在处理的当前元素。在迭代器的帮助下，我们在使用 LinkedList 时获得了 O(1) 的`remove()`效率`insert()`。使它成为唯一的性能优势，我知道 LinkedList 总是比 ArrayList 更好。

* * *

## 回答 #29

> 赞同：3
> 
> 时间：2018-08-04T18:52:06.510

我在这里看到的一项测试只进行一次测试。但我注意到的是，您需要多次运行这些测试，最终它们的时间会收敛。基本上，JVM 需要预热。对于我的特定用例，我需要将项目添加/删除到一个增长到大约 500 个项目的列表中。在我的测试`LinkedList`中，结果更快，`LinkedList`大约 50,000 NS 和`ArrayList`大约 90,000 NS ......给予或接受。请参阅下面的代码。

```
public static void main(String[] args) {
    List<Long> times = new ArrayList<>();
    for (int i = 0; i < 100; i++) {
        times.add(doIt());
    }
    System.out.println("avg = " + (times.stream().mapToLong(x -> x).average()));
}

static long doIt() {
    long start = System.nanoTime();
    List<Object> list = new LinkedList<>();
    //uncomment line below to test with ArrayList
    //list = new ArrayList<>();
    for (int i = 0; i < 500; i++) {
        list.add(i);
    }

    Iterator it = list.iterator();
    while (it.hasNext()) {
        it.next();
        it.remove();
    }
    long end = System.nanoTime();
    long diff = end - start;
    //uncomment to see the JVM warmup and get faster for the first few iterations
    //System.out.println(diff)
    return diff;
} 
```

* * *

## 回答 #30

> 赞同：1
> 
> 时间：2018-02-20T21:51:19.830

ArrayList 扩展了 AbstractList 并实现了 List 接口。ArrayList 是动态数组。
可以说它基本上是为了克服数组的缺点而创建

的 LinkedList 类扩展了 AbstractSequentialList 并实现了 List、Deque 和 Queue 接口。
性能
`arraylist.get()`是 O(1) 而`linkedlist.get()`is O(n)
`arraylist.add()`是 O(1) 并且`linkedlist.add()`是 0(1)
`arraylist.contains()`是 O(n) 并且`linkedlist.contains()`是 O(n)
`arraylist.next()`是 O(1) 并且`linkedlist.next()`是 O(1)
`arraylist.remove()`是 O(n)而在数组列表中是 O( `linkedlist.remove()`1 )是 O(n)而在链表
中是 O(1)
`iterator.remove()`

`iterator.remove()`

* * *

## 回答 #31

> 赞同：1
> 
> 时间：2019-10-10T00:09:07.827

我的经验法则是，如果我需要 a `Collection`（即不需要是 a `List`），那么`ArrayList`如果您事先知道尺寸，或者可以自信地知道尺寸，或者知道它不会有太大变化，请使用。如果您需要随机访问（即您使用`get(index)`），请避免使用`LinkedList`. 基本上，`LinkedList`仅当您不需要索引访问并且不知道要分配的集合的（近似）大小时才使用。此外，如果您要进行大量添加和删除（再次通过`Collection`界面），那么 LinkedList 可能更可取。

* * *

## 回答 #32

> 赞同：-2
> 
> 时间：2012-06-11T09:08:06.680

我应该什么时候使用`LinkedList`？主要使用堆栈或使用缓冲区时。我应该什么时候使用`ArrayList`？只有在使用索引时，否则您可以将 HashTable 与链表一起使用，然后您将获得：

## 哈希表+链表

*   通过密钥**O(1) 访问，**
*   **按键O(1)**插入，
***   按键删除**O(1)***   在使用版本控制时，有一个技巧可以用 O(1) 实现 RemoveAll / SetAll**

 **这似乎是一个很好的解决方案，在大多数情况下，您应该知道：HashTable 占用大量磁盘空间，因此当您需要管理 1,000,000 个元素列表时，它可能变得很重要。这可能发生在服务器实现中，在客户端中很少发生。

也看看[红黑树](http://en.wikipedia.org/wiki/Red%E2%80%93black_tree)

*   随机访问**日志（n），**
*   插入**日志（n），**
*   删除**日志（n）**

* * *

## 回答 #33

> 赞同：-8
> 
> 时间：2020-06-08T10:51:09.763

首先使用 Vector 代替 ArrayList 因为您可以覆盖 insureCapasity 方法，在 ArrayList 中是私有的并添加 1.5 大小的当前数组[https://docs.oracle.com/javase/8/docs/api/java/util/Vector.html #ensureCapacity-int-](https://docs.oracle.com/javase/8/docs/api/java/util/Vector.html#ensureCapacity-int-)

在许多情况下，linkedList 可能会更好，las 具有很大的优势，即您可以插入高频数据，因此列表的大小变化非常快，并且您无法为数字元素分配大小。从理论上讲，您可能会遇到诸如“内存不足”之类的错误，但在现代计算机中，您有 16G 和交换磁盘，因此如果您列出的是 billoins 元素，则与 15-20 年前相比，您可能会失败。

# operating-system - 为什么目录列表包含当前 (.) 和父 (..) 目录？

> ID：322719
> 
> 赞同：10
> 
> 时间：2008-11-27T01:39:15.920
> 
> 标签：operating-system, filesystems

每当我使用 readdir 之类的函数列出目录的内容时，返回的文件名也包括“。” 和 ”..”。我怀疑这些只是文件系统中的普通链接，因此与实际文件无法区分，但我总是必须将它们过滤掉，因为它们不是我列出的目录中的实际对象。像 readdir 这样的函数是否有充分的理由包含它们？某些操作系统或文件系统是否包含更多或不同的虚拟文件名？除了与“。”进行字符串比较之外，还有更好的方法来过滤掉它们吗？和 ”..”？

更新：谢谢大家的回答。我想我一直认为像 ./ 和 ../ 这样的东西只是可以通过搜索和替换来处理的约定。我觉得让它们成为文件系统本身的一部分有点令人惊讶，尽管可能更有效和透明。

不过，一个问题仍然存在：因为 . 和 .. 是这些链接的任意名称，是否存在使用不同名称的文件系统？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2008-11-27T01:49:28.303

`.`并且`..`实际上是文件系统中的硬链接。它们是必需的，以便您可以根据一些参考路径指定相对路径（考虑`"../sibling/file.txt"`）。`readdir`由于这些硬链接实际上存在于文件系统中，因此告诉您它们是有意义的。（实际上，该术语`hard link`仅表示与所引用的实际目录无法区分的某个名称：它们都指向`inode`文件系统中的同一个）。

`strcmp`如果您不想列出它们，最好的方法是忽略它们。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2008-11-27T03:10:41.947

最初它们是硬链接，以及文件系统代码中特殊情况的数量。和..是最小的。然而，对于所有现代文件系统来说，情况并非如此。

但是已经建立了约定，因此即使这两个目录条目实际上不存在的文件系统仍然可以通过 readdir 之类的 API 报告它们的存在。现在改变它会破坏很多代码。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-11-27T02:10:26.577

> 我怀疑这些只是文件系统中的正常链接，因此与实际文件无法区分

他们是。虽然您可能将文件系统视为“文件夹”“包含”文件夹的层次结构，但它实际上是一个双向链接树¹，目录是节点，文件是叶子。因此，`.`和`..`是访问当前节点的叶子和遍历树所需的链接，它们与所有其他链接相同。

当你调用 时`readdir`，你会得到所有你可以从当前节点直接去的地方。如果您不想列出您认为“向上”的地方，则必须自己整理它们。您应该为此编写一个小函数，也许称为`readdir_down`. 我不知道以哪个顺序`readdir`列出目录，但也许您可以丢弃前两个条目。

¹）这是第一个近似值，也有可能使树实际上成为网络的“硬链接”。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-11-27T01:45:43.147

原因之一是没有它们就无法访问父目录。或者获取当前目录的句柄。

没有它们，我们就无法做以下事情：

```
./run_this 
```

确实，我们无法添加“。” 到 $PATH，这意味着我们永远无法执行不在路径中的文件。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-11-27T01:47:00.087

这些是普通目录，它们是指向当前目录和上面目录的“硬链接”。它们存在于所有目录中（即使在根级别，`..`与 完全相同`.`）。

使用 时`ls`，可以过滤掉`.`和`..`with `ls -A`（注意大写`-A`）。

将命令应用于所有点文件时，而不是`.`or `..`，我经常使用`.??*`which 只匹配名称为三个或更多字符的点文件。

```
touch .??* 
```

请注意，此模式还排除了任何其他以点开头且只有两个字符长（例如`.x`）的文件，但这些文件并不常见。

当使用像`readdir()`我这样的程序化文件列表时，必须`.`手动`..`排除。由于这两个文件应该是您返回的列表中的第一个文件，因此`readdir()`您可以这样做：

```
@files = readdir(DIR);
for (1..2) { shift @files; } # get rid of . and ..
# go on with your business 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-11-27T01:47:36.327

报告它们是因为它们存储在目录列表中。这就是 unices 一直以来的工作方式。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-11-27T01:50:37.800

因为在类 Unix 操作系统上，目录列表命令包括这些命令，您可以使用它们在文件系统层次结构中上下移动。

类似的东西`grep { not /^.{1,2}\z/ } readdir HANDLE`应该适合你。

* * *

## 回答 #8

> 赞同：-4
> 
> 时间：2008-11-27T02:00:48.997

目录扫描没有理由返回这些文件名。

# flash - Flash 是如何工作的？

> ID：322740
> 
> 赞同：5
> 
> 时间：2008-11-27T01:48:42.640
> 
> 标签：flash

现在，我正在为游戏开发一个面向画布的小型 2D 图形引擎，并且一直在寻找几个来源以获取适用于我的系统设计的提示。但显然，最久经考验的解决方案是闪存，所以我想知道闪存是如何架构的。我找到了一些关于 Flash 工作原理的资源，但大多数都是非常基础的，面向设计师和艺术家，但我想更多地了解系统的内部结构。我的下一步是下载 Flex 的源代码并浏览它，但在此之前，我希望有一个“指南”，以便在代码库中充分利用我的时间。有什么好的在线资源和文章的建议吗？

谢谢！

**编辑：**为了更清楚，我正在寻找 Flash 的内部工作原理，因为我的目标是制作类似于 Flash 的东西，但当然没有那么强大，它可以在没有插件的浏览器中工作。唉，纯 HTML+Javascript。

另外，我不使用 Flash 的原因是它不符合我的要求（免费 + 无插件），并且因为我的目标平台上没有 Flash 支持，此外我在这里重新发明轮子乐趣和自我教育。哦，我已经知道如何使用 Flash :)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-11-27T02:55:36.797

嗯，Flash 内容的根是一个舞台对象（[Stage](http://help.adobe.com/en_US/AS3LCR/Flash_10.0/flash/display/Stage.html)类的一个实例）。该阶段是显示对象树的根节点，其中任何一个都可以包含图形资源（线条、文本字段等）或其他显示对象。Flash 的“工作原理”是，Flash 播放器每秒 X 次将整个显示树绘制到屏幕上。播放器还从操作系统收集用户输入（[KeyboardEvents](http://help.adobe.com/en_US/AS3LCR/Flash_10.0/flash/events/KeyboardEvent.html)等）并将它们传递给已为其注册的任何对象。

那么，作为内容创建者，您的工作就是使用子项（[DisplayObject](http://help.adobe.com/en_US/AS3LCR/Flash_10.0/flash/display/DisplayObject.html)类型或任何子类）填充此阶段，Flash 引擎将为您将其绘制到屏幕上。您可以使用像 Sprite 和 MovieClip 和 TextField 这样的低级子组件来填充它，它们是 Flash 内容的基本构建块，或者您可以实例化像[ScrollBar](http://help.adobe.com/en_US/AS3LCR/Flash_10.0/fl/controls/ScrollBar.html)或[DataGrid](http://help.adobe.com/en_US/AS3LCR/Flash_10.0/fl/controls/DataGrid.html)这样的东西，它们是具有通常复杂内部工作的高级组件。

当然，您可以扩展这些类中的任何一个以包含您自己的自定义视觉效果或类逻辑，或者创建不属于显示树的非视觉类。并且您可以加载其他 Flash 内容，或进行 HTTP 连接等。

这一切都假设你的意思是AS3。这有帮助吗？如果不是，您将不得不使您的问题更具体。;)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-27T08:05:03.130

如果您要制作游戏，请远离 Flex。老实说，查看源代码可能会让您感到困惑，而不是帮助您。Flex 非常适合 GUI 密集型应用程序，有助于加快此类产品的开发。然而，它不是很快，也不是特别适合游戏。

Flash 的主要优点之一是您不必非常关心“内部工作原理”，尽管对它们有基本的了解自然会有所帮助。

Flash Lite 与它的成熟大哥有很大不同，所以不要太在意。

另外，看在上帝的份上，学习 Actionscript 3.0 并远离 Actionscript 2。3.0 在所有可能的方面都更好（至少对我们编码人员而言）。

编辑：澄清：关于 Flash 一词有一些混淆。这一切由三个部分组成，在浏览器中运行的插件、“技术本身”和创作工具。所有这些都简称为Flash。Flex 更令人困惑。它是一个运行在 Flash 之上的框架。就像说，Swing for Java（我从未使用过它，所以比较可能完全错误）。您在 Flex 中可以做的所有事情都可以在 Flash 中实现。Flex 是免费开源的，但 IDE、Flex Builder 不是。即使您在做“纯”的动作脚本项目，Flex Builder 也非常有用。但也有许多更便宜的替代品。我个人更喜欢[FlashDevelop](http://www.flashdevelop.org/community/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-27T03:18:04.863

我发现的最好的链接（虽然很可悲）是这个：

[Flash Lite 的架构](http://www.adobe.com/products/flashlite/architecture/)

# url-rewriting - 没有文件扩展名的网站网址？

> ID：322747
> 
> 赞同：15
> 
> 时间：2008-11-27T01:51:51.200
> 
> 标签：url-rewriting

当我查看 Amazon.com 并看到他们的页面 URL 时，它没有`.htm`,`.html`或`.php`在 URL 的末尾。

就像：
[http ://www.amazon.com/books-used-books-textbooks/b/ref=topnav_storetab_b?ie=UTF8&node=283155](http://www.amazon.com/books-used-books-textbooks/b/ref=topnav_storetab_b?ie=UTF8&node=283155)

为什么以及如何？那是什么样的扩展？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2008-11-27T02:01:00.293

您的浏览器不关心文件的扩展名，只关心服务器报告的内容类型。（好吧，除非您使用 IE，因为在 Microsoft，他们认为他们比您更了解您所提供的服务）。如果您的服务器报告所提供的内容是 Content-Type: text/html，那么无论文件名是什么，您的浏览器都应该将其视为 HTML。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2008-11-27T02:00:28.030

通常，它是使用某种描述的 URL 重写方案来实现的。基本概念是，网络应该转向使用适当的 URI 来寻址资源，而不是泄漏实现细节的经典旧 URL，因此容易受到未来变化的影响。

可以在 Tim Berners-Lee 的文章[Cool URIs Don't Change](http://www.w3.org/Provider/Style/URI)中找到对该主题的彻底讨论，该文章主张减少 URI 中不相关的内容，以帮助避免在实现发生更改时出现的问题，并且当资源确实移动到不同的 URL 时。这篇文章本身包含关于规划 URI 方案的一般建议，非常值得一读。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2008-11-27T03:17:48.437

比大多数这些答案更具体：

Web 内容不使用文件扩展名来确定所提供的文件类型（除非您是 Internet Explorer）。相反，他们使用`Content-type`HTTP 标头，该标头在图像内容、HTML 页面、下载或其他内容之前通过网络发送。例如：

```
Content-type: text/html 
```

表示您正在查看的页面应被解释为 HTML，并且

```
Content-type: image/png 
```

表示该页面是PNG图像。

如果文件是直接从磁盘提供的，则 Web 服务器通常使用文件扩展名来*确定*要`Content-type`分配的内容，但是 Web 应用程序也可以生成任何`Content-type`他们喜欢的页面来响应请求。无论文件名的结构或扩展名如何，只要页面的实际内容与声明的 匹配`Content-type`，数据就会按预期呈现。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2008-11-27T01:54:25.110

*对于使用 Apache 的网站*，他们可能正在使用 mod_rewrite 使他们能够重写 URL（并使它们对用户和 SEO 更友好）

您可以在这里阅读更多内容[http://httpd.apache.org/docs/2.0/mod/mod_rewrite.html](http://httpd.apache.org/docs/2.0/mod/mod_rewrite.html) 和这里[http://www.sitepoint.com/article/apache-mod_rewrite-examples/](http://www.sitepoint.com/article/apache-mod_rewrite-examples/)

**编辑**：IIS 也有重写模块。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2008-11-27T02:12:50.767

传统上，文件扩展名代表正在服务的文件。

例如

> [http://someserver/somepath/image.jpg](http://someserver/somepath/image.jpg)

后来，同样的方法被用于允许脚本处理参数

> [http://somerverser/somepath/script.php?param=1234&other=7890](http://somerverser/somepath/script.php?param=1234&other=7890)

在这种情况下，该文件是一个处理“请求”并呈现动态创建文件的 php 脚本。

如今，应用程序比这复杂得多（即您提到的亚马逊）

然后没有一个单一的脚本来处理请求（但是一个更复杂的应用程序有几个文件/方法/函数/对象等），并且 url 更像是一个 web 应用程序的入口点（它可能有一个脚本后面但那是另一件事）所以现在像亚马逊这样的网络应用程序，是的，stackoverflow 不会在 URL 中显示文件，但是任何通信都由服务器端的应用程序处理。

> [没有文件扩展名的网站网址？](https://stackoverflow.com/questions/322747/websites-urls-without-file-extension)

这里 I *questions*代表 webapp 和 *322747*参数

我希望这个小小的解释可以帮助您更好地理解所有其他答案。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2010-12-24T00:08:04.307

那么在目录中有一个 index.html 文件，然后在浏览器中输入路径怎么样？我看到我的 Firefox 和 IE7 都自动输入了斜杠，我不必输入它。这更适合像我这样不认为地球上的每个 url 都应该调用 php、perl、cgi 和 10,000 个其他应用程序来发送几千字节数据的人。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-11-27T02:38:10.903

很多帖子都提到了这一点，我会权衡一下。它绝对是一个 URL 重写系统，许多平台都有实现这一点的方法。

我曾为一些较大的电子商务网站工作过，现在它已成为网络存在的一个非常重要的部分，并提供了许多优势。

我建议采用您想要使用的技术，并研究该平台的 URL 重写机制示例。例如，对于 .NET，有 google 'asp.net url rewriting' 或使用像 MVC 这样的附加框架，它开箱即用地执行此功能。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-11-27T01:54:22.787

很多人正在使用更“ [RESTful](http://en.wikipedia.org/wiki/RESTful) ”类型的架构......或者至少，看起来像 REST 的 URL。

该站点（StackOverflow）不显示文件扩展名......它使用的是[ASP.NET MVC](http://www.asp.net/mvc)。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-11-27T01:54:27.090

根据您的服务器的设置，您可以使用（或不使用）您想要的任何扩展。您甚至可以将扩展名设置为“.JamesRocks”，但这不会很有帮助:)

无论如何，以防万一您是网络编程的新手，所有这些乱码最后都有 GET 操作的参数，而不是页面的扩展名。

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2008-11-27T02:08:22.430

在 Django（python 的 Web 应用程序框架）中，您自己设计 URL，独立于任何文件名，甚至服务器上的任何路径。

您只需说“我希望`/news/<number>/`此函数处理 url”之类的话

# java - 在 Java 中使用 double 保持精度

> ID：322749
> 
> 赞同：171
> 
> 时间：2008-11-27T01:54:03.550
> 
> 标签：java, floating-point, double, precision

```
public class doublePrecision {
    public static void main(String[] args) {

        double total = 0;
        total += 5.6;
        total += 5.8;
        System.out.println(total);
    }
} 
```

上面的代码打印：

```
11.399999999999 
```

我如何才能让它打印（或能够将其用作）11.4？

* * *

## 回答 #1

> 赞同：166
> 
> 时间：2008-11-27T03:27:46.780

[`BigDecimal`](https://docs.oracle.com/javase/8/docs/api/java/math/BigDecimal.html)正如其他人所提到的，如果您想获得 11.4 的精确表示，您可能想要使用该类。

现在，稍微解释一下为什么会发生这种情况：

Java 中的`float`和`double`原始类型是[浮点数](http://en.wikipedia.org/wiki/Floating_point)，其中数字存储为分数和指数的二进制表示。

更具体地说，类型等双精度浮点值`double`是 64 位值，其中：

*   1 位表示符号（正或负）。
*   11 位为指数。
*   有效数字为 52 位（小数部分为二进制）。

这些部分组合起来产生一个`double`值的表示。

（来源：[维基百科：双精度](http://en.wikipedia.org/wiki/Double_precision)）

有关如何在 Java 中处理浮点值的详细说明，请参阅[第 4.2.3 节：Java 语言规范的浮点类型、格式和值](http://docs.oracle.com/javase/specs/jls/se8/html/jls-4.html#jls-4.2.3)。

, `byte`, `char`,类型是[定点数](http://en.wikipedia.org/wiki/Fixed-point_arithmetic)`int`，它们是数字的精确表示。与定点数不同，浮点数有时（可以安全地假设“大部分时间”）无法返回数字的精确表示。这就是为什么你最终得到.`long``11.399999999999``5.6 + 5.8`

当需要一个精确的值（例如 1.5 或 150.1005）时，您需要使用其中一种能够精确表示数字的定点类型。

正如已经多次提到的，Java 有一个[`BigDecimal`](https://docs.oracle.com/javase/8/docs/api/java/math/BigDecimal.html)类可以处理非常大的数字和非常小的数字。

来自`BigDecimal`该类的 Java API 参考：

> 不可变的、任意精度的有符号十进制数。BigDecimal 由一个任意精度的整数未缩放值和一个 32 位整数刻度组成。如果为零或正数，则刻度是小数点右侧的位数。如果为负数，则将数字的未缩放值乘以 10 的负数次方。因此 BigDecimal 表示的数字的值是 (unscaledValue × 10^-scale)。

Stack Overflow 上有很多关于浮点数及其精度的问题。以下是可能感兴趣的相关问题列表：

*   [为什么我看到一个双变量初始化为 21.4 之类的某个值作为 21.399999618530273？](https://stackoverflow.com/questions/177506/why-do-i-see-a-double-variable-initialized-to-some-value-like-214-as-2139999961)
*   [如何在 C++ 中打印非常大的数字](https://stackoverflow.com/questions/240876/print-really-big-numbers)
*   [浮点数是如何存储的？什么时候重要？](https://stackoverflow.com/questions/56947/how-is-floating-point-stored-when-does-it-matter)
*   [会计应用程序美元金额使用浮点数还是小数？](https://stackoverflow.com/questions/61872/use-float-or-decimal-for-accounting-application-dollar-amount)

如果您真的想深入了解浮点数的基本细节，请查看[每个计算机科学家应该了解的关于浮点运算的知识](http://docs.sun.com/source/806-3568/ncg_goldberg.html)。

* * *

## 回答 #2

> 赞同：108
> 
> 时间：2010-03-18T00:41:56.650

当你输入一个双精度数时，例如 ，`33.33333333333333`你得到的值实际上是最接近的可表示的双精度值，也就是：

```
33.3333333333333285963817615993320941925048828125 
```

将其除以 100 得出：

```
0.333333333333333285963817615993320941925048828125 
```

这也不能表示为双精度数，因此再次将其四舍五入为最接近的可表示值，即：

```
0.3333333333333332593184650249895639717578887939453125 
```

当您打印出这个值时，它会*再次*四舍五入到 17 位十进制数字，给出：

```
0.33333333333333326 
```

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2010-03-18T01:09:06.223

如果您只想将值处理为分数，您可以创建一个包含分子和分母字段的 Fraction 类。

编写加法、减法、乘法和除法的方法以及 toDouble 方法。这样您就可以在计算过程中避免浮动。

编辑：快速实施，

```
public class Fraction {

private int numerator;
private int denominator;

public Fraction(int n, int d){
    numerator = n;
    denominator = d;
}

public double toDouble(){
    return ((double)numerator)/((double)denominator);
}

public static Fraction add(Fraction a, Fraction b){
    if(a.denominator != b.denominator){
        double aTop = b.denominator * a.numerator;
        double bTop = a.denominator * b.numerator;
        return new Fraction(aTop + bTop, a.denominator * b.denominator);
    }
    else{
        return new Fraction(a.numerator + b.numerator, a.denominator);
    }
}

public static Fraction divide(Fraction a, Fraction b){
    return new Fraction(a.numerator * b.denominator, a.denominator * b.numerator);
}

public static Fraction multiply(Fraction a, Fraction b){
    return new Fraction(a.numerator * b.numerator, a.denominator * b.denominator);
}

public static Fraction subtract(Fraction a, Fraction b){
    if(a.denominator != b.denominator){
        double aTop = b.denominator * a.numerator;
        double bTop = a.denominator * b.numerator;
        return new Fraction(aTop-bTop, a.denominator*b.denominator);
    }
    else{
        return new Fraction(a.numerator - b.numerator, a.denominator);
    }
}

} 
```

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2008-11-27T03:11:07.640

请注意，如果您使用有限精度的十进制算术，并且想要处理 1/3：0.333333333 * 3 是 0.999999999，而不是 1.00000000，则会遇到同样的问题。

不幸的是，5.6、5.8 和 11.4 并不是二进制的整数，因为它们涉及五度。所以它们的浮点表示并不精确，就像 0.3333 不完全是 1/3 一样。

如果您使用的所有数字都是非循环小数，并且您想要精确的结果，请使用 BigDecimal。或者正如其他人所说，如果你的值就像钱一样，它们都是 0.01 或 0.001 的倍数，然后将所有值乘以 10 的固定幂并使用 int 或 long（加法和减法是琐碎的：注意乘法）。

但是，如果您对二进制计算感到满意，但只想以稍微友好的格式打印出来，请尝试使用`java.util.Formatter`或`String.format`. 在格式字符串中指定的精度小于双精度的完整精度。对于 10 位有效数字，例如 11.399999999999 是 11.4，因此在二进制结果非常接近只需要几个小数位的值的情况下，结果几乎一样准确且更易于阅读。

指定的精度在一定程度上取决于您对数字进行了多少数学运算-通常，您做的越多，累积的错误就越多，但是某些算法的累积速度比其他算法快得多（它们被称为“不稳定”）与舍入误差的“稳定”相反）。如果您所做的只是添加一些值，那么我猜只删除小数点后一位就可以解决问题。实验。

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2010-03-18T01:08:35.713

如果您真的需要精确数学，您可能需要考虑使用 java.math.BigDecimal 类。这是 Oracle/Sun 关于[BigDecimal 案例的](https://blogs.oracle.com/CoreJavaTechTips/entry/the_need_for_bigdecimal)一篇好文章。虽然你永远不能像有人提到的那样代表 1/3，但你**可以**决定你想要的结果有多精确。setScale() 是你的朋友.. :)

好的，因为目前我手头有太多时间，这是一个与您的问题相关的代码示例：

```
import java.math.BigDecimal;
/**
 * Created by a wonderful programmer known as:
 * Vincent Stoessel
 * xaymaca@gmail.com
 * on Mar 17, 2010 at  11:05:16 PM
 */
public class BigUp {

    public static void main(String[] args) {
        BigDecimal first, second, result ;
        first = new BigDecimal("33.33333333333333")  ;
        second = new BigDecimal("100") ;
        result = first.divide(second);
        System.out.println("result is " + result);
       //will print : result is 0.3333333333333333

    }
} 
```

并插入我最喜欢的新语言 Groovy，这是同一事物的一个更简洁的示例：

```
import java.math.BigDecimal

def  first =   new BigDecimal("33.33333333333333")
def second = new BigDecimal("100")

println "result is " + first/second   // will print: result is 0.33333333333333 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2008-11-27T01:57:20.970

很确定你可以把它变成一个三行的例子。:)

如果您想要精确的精度，请使用 BigDecimal。否则，您可以使用整数乘以 10 ^ 任何您想要的精度。

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2008-11-27T03:52:24.920

正如其他人所指出的，并非所有十进制值都可以表示为二进制，因为十进制基于 10 的幂，而二进制基于 2 的幂。

如果精度很重要，请使用 BigDecimal，但如果您只想要友好的输出：

```
System.out.printf("%.2f\n", total); 
```

会给你：

```
11.40 
```

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2010-03-18T00:30:23.337

你不能，因为 7.3 没有二进制的有限表示。你能得到的最接近的是 2054767329987789/2**48 = 7.3+1/1407374883553280。

查看[http://docs.python.org/tutorial/floatingpoint.html](http://docs.python.org/tutorial/floatingpoint.html)以获得进一步的解释。（它在 Python 网站上，但 Java 和 C++ 有相同的“问题”。）

解决方案取决于您的问题到底是什么：

*   如果您只是不喜欢看到所有这些噪音数字，那么请修复您的字符串格式。不要显示超过 15 个有效数字（或 7 个浮点数）。
*   如果你的数字的不精确性破坏了“if”语句之类的东西，那么你应该写 if (abs(x - 7.3) < TOLERANCE) 而不是 if (x == 7.3)。
*   如果您正在使用金钱，那么您可能真正想要的是十进制固定点。存储整数美分或货币的最小单位。
*   （非常不可能）如果您需要超过 53 个有效位（15-16 个有效数字）的精度，则使用高精度浮点类型，例如 BigDecimal。

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2010-03-18T00:35:13.283

您遇到了 double 类型的精度限制。

Java.Math 有一些任意精度的算术工具。

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2010-03-17T23:15:40.087

使用 java.math.BigDecimal

双精度数在内部是二进制分数，因此它们有时不能将小数部分表示为精确的小数。

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2011-12-07T13:41:19.717

```
private void getRound() {
    // this is very simple and interesting 
    double a = 5, b = 3, c;
    c = a / b;
    System.out.println(" round  val is " + c);

    //  round  val is  :  1.6666666666666667
    // if you want to only two precision point with double we 
            //  can use formate option in String 
           // which takes 2 parameters one is formte specifier which 
           // shows dicimal places another double value 
    String s = String.format("%.2f", c);
    double val = Double.parseDouble(s);
    System.out.println(" val is :" + val);
    // now out put will be : val is :1.67
} 
```

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2020-09-18T10:25:31.107

```
 /*
        0.8                     1.2
        0.7                     1.3
        0.7000000000000002      2.3
        0.7999999999999998      4.2
        */
        double adjust = fToInt + 1.0 - orgV;

        // The following two lines works for me. 
        String s = String.format("%.2f", adjust);
        double val = Double.parseDouble(s);

        System.out.println(val); // output: 0.8, 0.7, 0.7, 0.8 
```

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2008-11-27T01:56:29.223

将所有内容乘以 100 并将其存储在 long 中。

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2010-03-18T00:38:54.410

计算机以二进制形式存储数字，实际上不能准确地表示诸如 33.333333333 或 100.0 之类的数字。这是使用双打的棘手问题之一。在将答案显示给用户之前，您将不得不对其进行四舍五入。幸运的是，在大多数应用程序中，您不需要那么多小数位。

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2010-03-18T00:40:47.543

浮点数与实数的不同之处在于，对于任何给定的浮点数，都有下一个更高的浮点数。与整数相同。1 和 2 之间没有整数。

无法将 1/3 表示为浮点数。它下面有一个浮子，上面有一个浮子，它们之间有一定的距离。1/3 在那个空间里。

Apfloat for Java 声称可以处理任意精度的浮点数，但我从未使用过它。大概值得一看。 [http://www.apfloat.org/apfloat_java/](http://www.apfloat.org/apfloat_java/)

[在Java 浮点高精度库](https://stackoverflow.com/questions/277309/java-floating-point-high-precision-library)之前，这里问了一个类似的问题

* * *

## 回答 #16

> 赞同：2
> 
> 时间：2019-09-23T15:49:03.810

简短回答：始终使用 BigDecimal 并确保使用带有**String**参数的构造函数，而不是双精度参数。

回到您的示例，以下代码将根据您的意愿打印 11.4。

```
public class doublePrecision {
    public static void main(String[] args) {
      BigDecimal total = new BigDecimal("0");
      total = total.add(new BigDecimal("5.6"));
      total = total.add(new BigDecimal("5.8"));
      System.out.println(total);
    }
} 
```

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2008-11-27T02:22:49.407

双精度数是 Java 源代码中十进制数的*近似值*。您会看到双精度（二进制编码值）和源（十进制编码）之间不匹配的后果。

Java 产生最接近的二进制近似值。您可以使用 java.text.DecimalFormat 来显示更好看的十进制值。

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2008-11-27T02:36:26.227

使用 BigDecimal。它甚至可以让您指定舍入规则（如 ROUND_HALF_EVEN，如果两者的距离相同，它将通过舍入到偶数邻居来最小化统计误差；即 1.5 和 2.5 都舍入到 2）。

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2015-11-14T16:05:34.067

为什么不使用 Math 类的 round() 方法？

```
// The number of 0s determines how many digits you want after the floating point
// (here one digit)
total = (double)Math.round(total * 10) / 10;
System.out.println(total); // prints 11.4 
```

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2010-03-17T23:14:14.300

查看 BigDecimal，它可以处理处理浮点运算的问题。

新调用如下所示：

```
term[number].coefficient.add(co); 
```

使用 setScale() 设置要使用的小数位数精度。

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2018-05-07T10:59:58.363

如果您别无选择，只能使用双精度值，可以使用以下代码。

```
public static double sumDouble(double value1, double value2) {
    double sum = 0.0;
    String value1Str = Double.toString(value1);
    int decimalIndex = value1Str.indexOf(".");
    int value1Precision = 0;
    if (decimalIndex != -1) {
        value1Precision = (value1Str.length() - 1) - decimalIndex;
    }

    String value2Str = Double.toString(value2);
    decimalIndex = value2Str.indexOf(".");
    int value2Precision = 0;
    if (decimalIndex != -1) {
        value2Precision = (value2Str.length() - 1) - decimalIndex;
    }

    int maxPrecision = value1Precision > value2Precision ? value1Precision : value2Precision;
    sum = value1 + value2;
    String s = String.format("%." + maxPrecision + "f", sum);
    sum = Double.parseDouble(s);
    return sum;
} 
```

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2021-10-17T19:45:45.847

您可以执行以下操作！

```
System.out.println(String.format("%.12f", total)); 
```

如果您在此处更改十进制值***%.12f***

* * *

## 回答 #23

> 赞同：-2
> 
> 时间：2010-05-21T12:16:14.860

不要使用 BigDecimal 浪费您的精力。在 99.99999% 的情况下，您不需要它。java **double**类型当然是近似的，但在几乎所有情况下，它都足够精确。请注意，您在第 14 位有效数字处有错误。**这真的可以忽略不计！**

要获得不错的输出，请使用：

```
System.out.printf("%.2f\n", total); 
```

# sql-server - ODBC、OLEDB 和 ADO.NET 的底层协议是否存在差异

> ID：322766
> 
> 赞同：6
> 
> 时间：2008-11-27T02:04:28.460
> 
> 标签：sql-server, ado.net, odbc, oledb, protocols

使用典型系统之一 ODBC、OLEDB 或 ADO.NET 与 SQL Server 数据库通信时，底层基本协议是否相同？这些系统之间的所有差异基本上只是客户端问题吗？

这只是 TDS（表格数据流）传输的不同风格吗？

[[MS-TDS]：表格数据流协议规范](http://msdn.microsoft.com/en-us/library/cc448435.aspx)

还是有实际不同的方式与数据库服务器通信，并且这些协议之间存在根本区别？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2008-11-27T04:04:29.247

ODBC、OLE DB 和 ADO.NET 是用于与数据库通信的不同 API/框架。例如，ADO 以连接方式处理数据，主要使用服务器端游标，而 ADO.NET 以非连接方式运行，快速从服务器拉取数据并将其缓存在客户端的 ADO.NET 数据集对象中。

在底层，每一个都通过 TDS 向 SQL Server 发送 SQL 命令，并通过 TDS 接收回数据。OLE DB 允许您接近 TDS 以提高性能，而 ODBC 进行了很多抽象，以便为许多不同的数据源提供一致的接口。

# ruby - 使用符号链接到 ruby 可执行文件时查找相关库

> ID：322769
> 
> 赞同：5
> 
> 时间：2008-11-27T02:06:59.763
> 
> 标签：ruby, symlink

假设您有一个可执行文件 foo.rb，其中的库 bar.rb 以下列方式布局：

```
<root>/bin/foo.rb
<root>/lib/bar.rb 
```

在 foo.rb 的标题中，您需要在 bar.rb 中引入以下功能：

```
require File.dirname(__FILE__)+"../lib/bar.rb" 
```

只要对 foo.rb 的所有调用都是直接的，这就可以正常工作。如果您输入 $HOME/project 并将符号链接 foo.rb 放入`$HOME/usr/bin`，则``__FILE__``解析为`$HOME/usr/bin/foo.rb`，因此无法找到`bar.rb`与`foo.rb`.

我意识到像 ruby​​gems 这样的打包系统通过创建一个名称空间来搜索库来解决这个问题，并且也可以使用`$:`include来调整 load_path `$HOME/project/lib`，但似乎应该存在一个更简单的解决方案。有没有人遇到过这个问题并找到有用的解决方案或配方？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-04-20T20:07:44.307

我知道这已经很久了，但我刚刚发现了这个：

```
require 'pathname'
APP_ROOT = File.join(File.dirname(Pathname.new(__FILE__).realpath),'..') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-11-27T10:50:38.490

您可以使用此函数跟踪任何符号链接并返回真实文件的完整路径：

```
def follow_link(file)
  file = File.expand_path(file)

  while File.symlink?(file)
    file = File.expand_path(File.readlink(file), File.dirname(file))
  end

  file
end

puts follow_link(__FILE__) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2010-04-20T09:37:54.097

可能值得一提的是，它`+`可以很好地与`Pathname`对象一起工作，而且还有`Kernel.Pathname`方法，所以@Burke 的原始代码可以变得更短：

```
require 'pathname'
APP_ROOT = Pathname.new(__FILE__).realpath + "../../lib" 
```

# c# - C#：在 foreach 语句中使用 Directory.GetFiles 并删除文件的副作用？

> ID：322772
> 
> 赞同：1
> 
> 时间：2008-11-27T02:10:03.080
> 
> 标签：c#, file-io

我有以下 foreach 循环：

```
using System.IO;
//...   
if (Directory.Exists(path))
{
    foreach(string strFile in Directory.GetFiles(path, "*.txt"))
    {
        // do something, possibly delete the file named strFile
    }
} 
```

删除当前用于 foreach 循环的目录中的文件时会产生副作用吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2008-11-27T02:14:35.240

GetFiles 返回一个数组，而不是迭代器，因此在您引用第一个文件时操作已完成。此外，它只返回文件名，而不是文件句柄，因此您应该完全安全地对其进行任何操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-11-27T02:23:25.003

枚举器不会在每次点击时重新查询，所以你应该没问题 - 也就是说，如果文件出现在文件夹中，而你在这个过程中它不会被删除。

# email - Gmail 如何识别电子邮件签名（或者，“识别电子邮件签名的最佳方法是什么？”）

> ID：322779
> 
> 赞同：5
> 
> 时间：2008-11-27T02:15:07.470
> 
> 标签：email, parsing, gmail, signature

Gmail 会自动将看起来像签名的文本变灰。任何人都有任何猜测它是如何做到的？（我注意到这取决于发件人姓名的存在，但我认为这只是故事的一部分）。

我问是因为我正在开发一个具有电子邮件界面的 Web 应用程序，并且我想在显示他们的电子邮件内容之前删除用户的签名。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-11-27T02:21:41.763

电子邮件签名应该以两个破折号、一个空格和一个换行符开头。参见[维基百科](http://en.wikipedia.org/wiki/Signature_block)和[RFC-3676](https://www.rfc-editor.org/rfc/rfc3676#page-9)

# oop - 用于收集语义相关输入的对象的最佳名称？

> ID：322781
> 
> 赞同：1
> 
> 时间：2008-11-27T02:15:41.930
> 
> 标签：oop, class-design

我正在编写一个 HTML 表单生成库。有一个顶级的 Form 类，在底部有针对每种类型的 HTML 表单输入对象（Select、Textfield、Radio 等）的类。中间有一个类，它包含 1 个或多个语义相关的输入对象的分组。

例如，此类的一种类型可以称为“登录”，并且将包含文本字段输入和密码输入。再举一个例子，表单库的主要用途是生成在线调查，因此中间类将是各种调查问题。

我的问题是一般如何称呼这些中级类。我们工作组中提出的一些建议是“Set”、“Fieldset”、“Group”、“Block”、“Chunk”和“Conglomeration”。

这些建议中有几个是“好的”，但没有一个是“就是这样！” 打断。（最接近的是后者，但那（a）太长了，（b）太容易拼写错误。）有人有更好的建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-11-27T02:21:54.757

组件，如“登录组件”或“多值响应组件”中的组件。

供参考。我发现[http://thesaurus.reference.com](http://thesaurus.reference.com)对此类问题非常有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-27T02:22:20.577

只需将其称为 Foo 或 SematicallyRelatedInputs1 并开始编码。你应该很快就会想到一个合理的名字。如果你改了几次名字，不要觉得难过。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-11-27T03:14:31.720

'FormBlob' 也许？

“分组输入”？

如果单个单词术语失败，请退回到多术语混搭 =)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-11-27T03:26:43.723

TagSet 可能会起作用。如果我理解正确，您会使用以下两种方式的组合：

```
<input type="text" /> <input type="password"/> 
```

和

非表单元素，例如：

```
<dl>
  <dt>Question</dt>
  <dd>Answer<dd>
</dl> 
```

或者

这些都是 HTML 标签的集合。TagSet 似乎是一个简单的描述性名称。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-11-30T23:49:50.870

经过我们工作组的进一步讨论，我们最终选择了“fieldset”。

感谢所有的建议。

# java - 如何使用 Java 从文件中编辑模板文档（套用信函）？

> ID：322784
> 
> 赞同：3
> 
> 时间：2008-11-27T02:20:47.647
> 
> 标签：java, templates

我是第一次玩 Java，需要能够替换模板中的一些单词。示例模板 -

“亲爱的 PUT_THEIR_NAME_HERE，

我正在联系你..... bla bla bla

问候，

PUT_COMPANY_NAME_HERE"

复制此模板文件并在正确的位置添加正确的单词然后将其保存到文件系统的最简单方法是什么（最好使用标准库）？我必须做很多这样简单的模板，所以一种可以轻松复制的方法会很好。

我也在使用 Rhino 通过 JavaScript 访问 Java，不确定这是否有任何区别。

问候，

克里斯

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2008-11-27T02:47:36.750

您正在寻找 java.text.MessageFormat：

以下是一些使用示例（来自 JavaDoc）：

```
 Object[] arguments = {
     new Integer(7),
     new Date(System.currentTimeMillis()),
     "a disturbance in the Force"
 };

 String result = MessageFormat.format(
     "At {1,time} on {1,date}, there was {2} on planet {0,number,integer}.",
     arguments);

 output: At 12:30 PM on Jul 3, 2053, there was a disturbance
           in the Force on planet 7. 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-11-27T03:42:53.270

对于高级功能（如循环），您可能需要使用[Apache Velocity](http://velocity.apache.org/)或[FreeMarker](http://freemarker.sourceforge.net/)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-11-27T02:37:38.300

非常简单的方法：

当然不是防弹。

```
C:\oreyes\samples\java\replace>type Simplistic.java
public class Simplistic{
    public static void main( String [] args ) {
        String template = "Dear _NAME_HERE_. I'm glad you...";
        System.out.println( template.replaceAll("_NAME_HERE_","Oscar Reyes"));
    }
}

C:\oreyes\samples\java\replace>java Simplistic
Dear Oscar Reyes. I'm glad you... 
```

如果您想进一步调查，这是该方法的正式文档

[http://java.sun.com/javase/6/docs/api/java/lang/String.html#replaceAll(java.lang.String,java.lang.String)](http://java.sun.com/javase/6/docs/api/java/lang/String.html#replaceAll(java.lang.String,java.lang.String))

我很高兴听到你正在学习 Java！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-11-27T07:47:47.050

当前评分最高的帖子是准确的，但不是在 Java 6 中使用 API 的最简洁方式。无需创建参数数组或显式地将整数装箱，并且 new Date() 默认使用当前时间：

String result = MessageFormat.format("在 {1,date} 的 {1,time}，行星 {0,number,integer} 上有 {2}。", 7, new Date(), "力量”）;

只需几个技巧，让您的代码更具可读性和更易于维护。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-11-27T02:25:52.893

大约 10 年前，当我将应用程序移植到 java 时，我为此编写了一个类：

[http://github.com/dustin/spyjar/tree/master/src/java/net/spy/util/SpyToker.java](http://github.com/dustin/spyjar/tree/master/src/java/net/spy/util/SpyToker.java)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-11-27T03:08:39.703

您可以使用 commons-lang 库的[StringSubstitutor](http://commons.apache.org/lang/apidocs/org/apache/commons/lang/text/StrSubstitutor.html)类

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2008-11-27T02:28:08.210

好吧，最简单的方法是将文件读入字符串，执行 replaceAll （对要替换的每个单词执行一次），然后将结果写入新文件。这不是最有效的方法，但它对于简单的任务非常有效。

# c# - 如何将 DataTable 保存到 .DBF？

> ID：322792
> 
> 赞同：3
> 
> 时间：2008-11-27T02:23:35.613
> 
> 标签：c#, odbc, dbf

我一直在编写一个程序来读取 dbf 文件，处理数据并将其保存回 dbf。我遇到的问题与写作部分有关。

```
 private const string constring = "Driver={Microsoft dBASE Driver (*.dbf)};"
                                   + "SourceType=DBF;"
                                   + "DriverID=277;"
                                   + "Data Source=¿;"
                                   + "Extended Properties=dBASE IV;";
    private const string qrystring = "SELECT * FROM [¿]";
    public static DataTable loadDBF(string location)
    {
        string filename = ConvertLongPathToShort(Path.GetFileName(location));
        DataTable table = new DataTable();
        using(OdbcConnection conn = new OdbcConnection(RTN(constring, filename)))
        {
            conn.Open();
            table.Load(new OdbcCommand(RTN(qrystring, filename), conn).ExecuteReader());
            conn.Close();
        }
        return table;
    }

    private static string RTN(string stmt, string tablename)
    { return stmt.Replace("¿", tablename); }

    [DllImport("Kernel32", CharSet = CharSet.Auto)]
    static extern Int32 GetShortPathName(
    String path,                // input string
    StringBuilder shortPath,    // output string
    Int32 shortPathLength);     // StringBuilder.Capacity

    public static string ConvertLongPathToShort(string longPathName)
    {
        StringBuilder shortNameBuffer;
        int size;

        shortNameBuffer = new StringBuilder();

        size = GetShortPathName(longPathName, shortNameBuffer, shortNameBuffer.Capacity);
        if (size >= shortNameBuffer.Capacity)
        {
            shortNameBuffer.Capacity = size + 1;
            GetShortPathName(longPathName, shortNameBuffer, shortNameBuffer.Capacity);
        }

        return shortNameBuffer.ToString();
    } 
```

这就是我正在使用的。我已经尝试了多种方法来编写一个新文件，但都没有成效。老实说，虽然通常我会提倡形式和功能，但我只是想让该死的东西工作，这个应用程序应该做一件非常具体的事情，它不会模拟天气。

-=# 编辑 #=-

由于时间压力，我已经停止使用该应用程序，但在我放弃它之前，我意识到我正在使用的特定格式的 dbf 没有主键信息。这当然意味着我必须从本质上将数据读取到 DataTable，弄乱它，然后擦除 dbf 中的所有记录并从头开始插入所有内容。把它搞砸了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-07-29T17:37:48.993

对于将来来这里的人：我今天写了这个，效果很好。文件名没有扩展名 (.dbf)。路径（用于连接）只是目录路径（无文件）。您可以将数据表添加到数据集并传入。此外，我的一些数据类型是 foxpro 数据类型，可能与所有 DBF 文件不兼容。希望这可以帮助。

```
 public static void DataSetIntoDBF(string fileName, DataSet dataSet)
    {
        ArrayList list = new ArrayList();

        if (File.Exists(Path + fileName + ".dbf"))
        {
            File.Delete(Path + fileName + ".dbf");
        }

        string createSql = "create table " + fileName + " (";

        foreach (DataColumn dc in dataSet.Tables[0].Columns)
        {
            string fieldName = dc.ColumnName;

            string type = dc.DataType.ToString();

            switch (type)
            {
                case "System.String":
                    type = "varchar(100)";
                    break;

                case "System.Boolean":
                    type = "varchar(10)";
                    break;

                case "System.Int32":
                    type = "int";
                    break;

                case "System.Double":
                    type = "Double";
                    break;

                case "System.DateTime":
                    type = "TimeStamp";
                    break;
            }

            createSql = createSql + "[" + fieldName + "]" + " " + type + ",";

            list.Add(fieldName);
        }

        createSql = createSql.Substring(0, createSql.Length - 1) + ")";

        OleDbConnection con = new OleDbConnection(GetConnection(Path));

        OleDbCommand cmd = new OleDbCommand();

        cmd.Connection = con;

        con.Open();

        cmd.CommandText = createSql;

        cmd.ExecuteNonQuery();

        foreach (DataRow row in dataSet.Tables[0].Rows)
        {
            string insertSql = "insert into " + fileName + " values(";

            for (int i = 0; i < list.Count; i++)
            {
                insertSql = insertSql + "'" + ReplaceEscape(row[list[i].ToString()].ToString()) + "',";
            }

            insertSql = insertSql.Substring(0, insertSql.Length - 1) + ")";

            cmd.CommandText = insertSql;

            cmd.ExecuteNonQuery();
        }

        con.Close();
    }

    private static string GetConnection(string path)
    {
        return "Provider=Microsoft.Jet.OLEDB.4.0;Data Source=" + path + ";Extended Properties=dBASE IV;";
    }

    public static string ReplaceEscape(string str)
    {
        str = str.Replace("'", "''");
        return str;
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-02-10T09:32:23.717

使用 ADO.Net 读取和写入 dbf 文件非常慢，所以我建议您使用另一种方法。

一种选择是使用旧的 DAO 3.6 库。这要快得多并且兼容，但取决于 com 对象的工作。

更好的方法是使用开源[DBFExporter 组件](http://sourceforge.net/projects/dbfexporter/)。它可能需要一些代码来设置（您需要一个具有描述您的记录集的属性的类，并且这些属性必须具有某些属性集），但之后它工作得非常好。它使用起来很快，但它不读取 dbf 文件。该组件是 LGPL 下的许可证，因此您应该能够在商业代码中使用它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-11-28T13:07:27.237

您正在使用哪种 dbf 文件？（有几个，例如 dBase、FoxPro 等不是 100% 兼容的。）我已经让它与 C# 中的 Microsoft Visual FoxPro OleDB Provider 一起工作，你可能会试一试，而不是使用 dBase ODBC 驱动程序。

# c - 从 i386 移动到 x86_64 时的浮点精度

> ID：322797
> 
> 赞同：12
> 
> 时间：2008-11-27T02:26:40.600
> 
> 标签：c, 64-bit, floating-point

我有一个为 Linux x86 32 位开发的应用程序。根据结果​​，有很多浮点运算和大量测试。现在我们将它移植到x86_64，但是在这个架构下测试结果是不同的。我们不想为每个架构保留一组单独的结果。

根据文章*[An Introduction to GCC - 对于 GNU 编译器 gcc 和 g++](http://www.network-theory.co.uk/docs/gccintro/gccintro_70.html)*，问题是 X86_64 中的 GCC 假定**fpmath=sse**而 x86 假定**fpmath=387**。387 FPU 对所有操作使用**80 位内部精度**，并且仅将结果转换为给定的浮点类型（float、double 或 long double），而 SSE 使用操作数的类型来确定其内部精度。

我可以在编译自己的代码时**强制 -mfpmath=387并且我的所有操作都可以正常工作，但是每当我调用一些库函数（sin、cos、atan2 等）时，结果又是错误的。**我认为这是因为**libm**是在没有 fpmath 覆盖的情况下编译的。

我尝试使用 387 仿真自己构建 libm（glibc），但它导致了很多崩溃（不知道我是否做错了什么）。

有没有办法强制进程中的所有代码使用 x86_64 中的 387 仿真？或者也许一些库在两种架构上都返回与 libm 相同的值？有什么建议么？

关于“你需要80位精度”的问题，我不得不说这对于个人操作来说不是问题。在这种简单的情况下，差异非常小，没有任何区别。但是，当复合大量操作时，错误会传播，最终结果的差异不再那么小，而且会产生影响。所以我想我需要80位精度。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2008-11-27T02:42:38.397

我会说你需要修复你的测试。如果您假设浮点数学是准确的，那么您通常会让自己失望。与其测试*完全*相等，不如测试它是否足够接近预期结果。毕竟，您发现的不是错误，因此如果您的测试报告错误，*则测试*是错误的。;)

正如您所发现的，您所依赖的每个库都将采用 SSE 浮点，因此，除非您打算现在和永远手动编译*所有内容*，以便将 FP 模式设置为 x87，否则最好处理现在有了问题，只是接受 FP 数学不是 100% 准确，并且通常不会在两个不同的平台上产生相同的结果。（我相信 AMD CPU 在 x87 数学中的结果也略有不同）。

您绝对*需要*80 位精度吗？*（如果是这样，除了自己编译所有内容*以使用 80 位 FP之外，显然没有太多选择。）

否则，请调整您的测试以在一些小 epsilon 内执行比较和相等测试。如果差值小于该 epsilon，则认为这些值相等。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-01-27T22:39:58.643

80 位精度实际上是危险的。问题在于，只要变量存储在 CPU 寄存器中，它实际上就会被保留。每当它被强制输出到 RAM 时，它都会被截断为类型精度。因此，即使代码中没有发生任何事情，您也可以让变量实际更改其值。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2011-06-28T20:14:38.783

如果您想要`long double`精度，请使用`long double`所有浮点变量，而不是期望`float`或`double`具有额外的魔术精度。这真的是不言而喻。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-11-27T21:37:57.500

SSE 浮点数和 387 浮点数使用完全不同的指令，因此无法说服 SSE fp 指令使用 387。可能解决此问题的最佳方法是让您的测试套件获得稍微不同的结果，而不是依赖于结果与最后一位相同。

# .net - 配置：IsReadOnly 什么时候生效？

> ID：322803
> 
> 赞同：1
> 
> 时间：2008-11-27T02:31:33.380
> 
> 标签：.net, configuration, readonly

这是一个简单的问题，但我在文档中找不到太多信息。在处理自定义配置部分、集合、元素等时，该`IsReadOnly`设置何时真正意味着“只读”？

随着`IsReadOnly`回归`True`，我仍然可以做类似的事情`MyBase.Item("property") = value;`。

当从 .config 文件中读取配置时，这些类是否只是“只读”的，但在直接使用这些类时总是读/写？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-10-20T23:24:40.163

`Configuration.GetSection``IsReadOnly`在返回`ConfigurationSection`. 根据我的经验，一旦`IsReadOnly`设置，您将无法更改该部分中包含的配置元素的任何属性。如果您自己构造配置对象，那么除非您从派生类`IsReadOnly`调用，否则不会设置。`SetReadOnly()`

# jquery - Droppable hoverClass 选项在 Internet Explorer 中不起作用

> ID：322804
> 
> 赞同：0
> 
> 时间：2008-11-27T02:32:36.203
> 
> 标签：jquery, html, css, jquery-ui, jquery-ui-droppable

我似乎无法让它工作。它在 Firefox 中工作正常，但在 IE 中，当`droppable`有一个项目在它上面时没有任何反应。

我尝试使用[`hoverClass`option](http://api.jqueryui.com/droppable/#option-hoverClass)，还尝试在“over”和“out”事件中手动更改类。这两种方法都适用于 Firefox，但不适用于 IE。IE有解决方法吗？

下面是我的代码：

```
over: function(ev, ui) {
  $(this).addClass( 'droppable-hover' );
},

out: function(ev, ui) {
  $(this).removeClass( 'droppable-hover' );
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-11-27T04:19:28.203

droppable-hover 类使用大纲样式属性，IE 不支持该属性（Macintosh 上的 IE5 除外）。至少[W3Schools](http://www.w3schools.com/htmldom/dom_obj_style.asp)是这么说的。您可以使用以下方法在 IE 上对其进行近似：

```
<!--[if IE]>
<style>
.   droppable-hover
   {
       border: double 1px black;
   }
</style>
<![endif]--> 
```

# roi - 哪些软件开发实践提供了最高的投资回报率？

> ID：322807
> 
> 赞同：3
> 
> 时间：2008-11-27T02:35:33.000
> 
> 标签：roi

我组织中的软件开发团队（开发 API - 中间件）正准备一次采用至少一种最佳实践。以下是名单：

单元测试（真正意义上的）、自动化单元测试、测试驱动设计与开发、静态代码分析、持续集成能力等。

有人可以向我指出一项研究，该研究表明采用哪些“最佳”实践具有更好的投资回报率，并更快地提高软件质量。那里有研究吗？这应该有助于我（支持我的主张）优先考虑这些实践的实施。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-11-27T02:47:20.697

“一项研究表明采用哪些‘最佳’实践具有更好的投资回报率，并更快地提高软件质量”

那岂不是很棒！如果有这样的事情，我们都会这样做，而您只需在 DDJ 中阅读即可。

既然没有，你就不得不做出痛苦的判断。

没有“为 8% 的 ROI 做 X”。其中一些技术需要大量投资。其他的可以免费启动。

*   单元测试（真正意义上的） - 免费 - ROI 立即开始。
*   自动化单元测试——不是免费的——需要自动化。
*   测试驱动的设计和开发 - 免费 - 立即开始投资回报。
*   静态代码分析 - 需要工具。
*   持续集成能力——便宜，但不是免费的

你无法知道投资回报率。所以你只能优先考虑投资。有些东西比其他东西更容易被人们采用。你必须考虑你的团队是否愿意接受这项技术。

编辑。单元测试是免费的。

*   “编写测试代码的时间本可以用于编写列表中的下一个功能” 确实，测试意味着开发人员做更多的工作，但支持做的调试工作更少。我认为这不是 1:1 的交易。多花一点时间编写（和通过）正式的单元测试可以显着降低支持成本。

*   “遗留代码呢？” 关键是免费是管理成本的问题。如果您将单元测试添加到遗留代码中，则成本不是免费的。所以不要那样做。相反，添加单元测试作为维护、错误修复和新开发的一部分——然后它是免费的。

*   “培训*是*一个问题” 根据我的经验，这是几个可靠的例子，以及除了代码之外对单元测试的管理需求。只需召开全体会议就可以解释需要进行单元测试*，*这里是示例。然后它要求每个人都将他们的状态报告为“已编写测试/已通过测试”。你还没有完成 60%，你已经完成了 315 次测试中的 232 次。

*   “平均而言，如果它适用于给定的项目，它只是免费的”总是正确的，好点。

*   “需要更多的时间，时间对业务来说不是免费的” 你可以编写几乎不工作但需要大量支持的糟糕代码，或者你可以编写可以工作但不需要大量支持的好代码。我认为让测试真正通过所花费的时间减少了支持、维护和调试成本。根据我的经验，重构单元测试的价值大大减少了进行架构更改的时间。它减少了添加功能的时间。

*   “我也不认为它是立即的 ROI” 实际上，一个单元测试具有如此巨大的 ROI，以至于很难表征。第一个通过的测试成为你认为可以真正*信任*的测试。只拥有一段值得信赖的代码可以节省时间，因为它减少了您需要花费大量时间思考的事情。

**战争故事**

这周我必须完成一个批量数据加载器；它验证并加载我们从客户那里接受的 30,000 个行文件。我们有一个很好的库，用于上传一些内部开发的文件。我想将该模块用于客户文件。但是客户文件有很大的不同，我可以看到库模块 API 并不适合。

所以我重写了 API，重新运行了测试并检查了更改。这是一个重大的 API 更改。破损多。寻找所有参考资料并修复它们。

运行相关测试后，我将其签入。*然后*我重新运行了我认为不密切相关的测试。哎呀。它失败了。它正在测试一些不属于 API 的东西，这*也*坏了。固定的。再次登记入住（晚了一个小时）。

如果没有基本的单元测试，这将在 QA 中出现问题，需要错误报告，需要调试和返工。看劳动力：QA人员1小时发现并报告错误+开发人员2小时重构QA场景并定位问题+1小时确定修复什么。

使用单元测试：1 小时意识到测试没有通过，并修复代码。

**底线**。我写测试花了3个小时吗？没有。但是该项目因我在编写测试方面的投资而获得了三个小时的回报。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-27T14:15:58.640

您没有在列表中提及代码审查。对于我们的团队来说，这可能是我们获得最大投资回报的原因（是的，投资很陡，但回报更高）。我知道 Code Complete（至少是原始版本）提到了与查找缺陷 VS 测试的审查效率相关的统计数据。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-11-27T12:14:58.400

您假设您提供的列表构成了一组“最佳实践”（尽管我同意它可能确实如此，顺便说一句）

与其尝试挑选一种流程变更，不如检查一下您当前的做法？

问问自己这个：

你最痛的地方在哪里？你可以改变什么来减少/消除它？

重复直到无痛。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-11-27T02:50:18.477

你在寻找这样的东西吗？

*   [软件过程改进的投资回报率 Capers Jones 为期 36 个月的新案例研究](http://www.itmpi.org/default.aspx?pageid=205)
*   [具有最高投资回报的敏捷实践](http://www.infoq.com/news/2008/06/agile-practices-high-roi)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-11-27T14:53:04.413

我希望我有一个比其他答案更好的答案，但我没有，因为我认为目前真正得到回报的不是传统的。也就是说，在设计上，尽量减少[冗余](http://mdunlavey.blogspot.com/2008/10/redundancy.html)。说起来容易，但需要经验。

在数据中，它意味着保持数据规范化，当它不能规范化时，以一种可以容忍一些不一致的松散方式处理它，而不是依赖于紧密绑定的通知。如果你这样做，它会大大简化代码并减少对单元测试的需求。

在源代码中，这意味着如果您的某些“输入数据”以非常慢的速度更改，您可以考虑代码生成，作为简化源代码并获得额外性能的一种方式。如果源代码更简单，则更容易审查，并减少对其进行测试的需要。

不是脾气暴躁，但我担心，从我所看到的项目中，过度设计的趋势很强烈，有太多的“抽象层”，如果不是，它们的正确性就不会受到质疑甚至没有。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-11-27T02:42:00.147

有一些关于单元测试和 TDD 的 ROI 参考资料。请参阅我对这个相关问题的回复；[单元测试的投资回报率有确凿的证据吗？](https://stackoverflow.com/questions/237000/is-there-hard-evidence-of-the-roi-of-unit-testing#237067).

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-11-12T10:19:37.533

一次一种做法不会产生最佳的投资回报率。这些做法不是独立的。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-11-27T03:17:27.767

有一种叫做“局部最优”的东西。您可以在 Goldratt 的书 Goal 中了解它。它说，只有提高整体吞吐量，创新才有任何价值。实施新技术的决定应该与项目内部的关键路径相关。如果技术加速已经足够快的过程，它只会造成不必要的准备模块积压。这没有必要提高项目开发的整体速度。

# maven-2 - Maven2生命周期帮助

> ID：322835
> 
> 赞同：3
> 
> 时间：2008-11-27T03:00:54.273
> 
> 标签：maven-2, maven-plugin

我已经使用 Ant 构建了一个自定义 Maven2 插件。我想在自定义 Ant 插件成功完成后立即调用另一个 maven 插件，特别是 Cargo Maven2 插件。但是，我不想将 Cargo 插件附加到另一个目标或阶段。有没有办法让它们连续运行而无需编写批处理脚本？是否可以让 Custom Ant 插件调用 Cargo 插件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-20T15:35:41.057

请参阅此讨论：[Re：在另一个插件中调用插件？](http://mail-archives.apache.org/mod_mbox/maven-users/200706.mbox/%3C4669508E.1020903@apache.org%3E)根据 Maven 开发人员的说法，这不是插件应该工作的方式。

但是，有一个有趣的评论：

> 插件/Mojos 应该是库周围的薄包装。您想直接使用该库。

Cargo 不仅是一个 Maven 插件，它还有一个 Java API 和一个[Ant 任务](http://cargo.codehaus.org/Ant+support)。所以你可能可以：

*   从您的 Ant mojo 中调用 Cargo Ant 任务（我认为您只需要插件的类路径中的 Cargo JAR）；

*   用 Java 重写你的 Ant mojo，并调用 Cargo API（你想看看 Cargo 插件的源代码）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-20T14:14:57.943

maven-ant-plugin 执行的 Ant 脚本并不真正了解 Maven。此插件旨在向后兼容自定义 Ant 任务。我想不出一种干净的方式来做你想做的事，尽管可能有某种黑客可以让你做到这一点。

还应该可以从 Ant 内部执行第二个 Maven 实例，它纯粹运行 Cargo 目标，但在这种情况下，您可能会遇到锁定文件等问题。这样做的方法是在您的 Ant 脚本中使用一个标记，并调用带有适当目标作为参数的“mvn”可执行文件。

最简洁的方法是简单地将 Cargo 目标绑定到构建的某个阶段，并在 Ant 完成后运行该阶段。我认为这种方法没有任何缺点——你没有真正说明你想要避免它的任何具体原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-22T22:19:23.610

您可能对以下两个 maven 感兴趣

*   [Mojo Executor 插件](http://code.google.com/p/mojo-executor/)和
*   [GMaven 插件](http://groovy.codehaus.org/GMaven)

GMaven 插件允许您使用 groovy 编写 maven 插件。[这使您可以使用Ant Builder](http://groovy.codehaus.org/Using+Ant+from+Groovy)完全访问 ant ，这是在 Groovy 中编写 ant 脚本的一种非常简单的方法。然后在这个 Groovy mojo 中，您可以使用 Mojo Executor 调用任何 maven mojo。

我已经在几个自定义 maven 插件中使用了这些，但我还没有找到一种更简单的方法来编写和组合 mojos。

# c# - 将枚举与数据库中的静态数据同步

> ID：322836
> 
> 赞同：0
> 
> 时间：2008-11-27T03:01:15.567
> 
> 标签：c#, enums, enumeration

我有一个交付状态代码的枚举。当我将交付数据保存到数据库时，它们会使用外键存储到包含相同数据（即相同的交付代码）的表中

使枚举与数据库中的数据保持同步的最佳策略是什么？

您是否只记得在将新代码添加到数据库时添加到枚举中？

或者在应用程序启动时将数据加载到字典中？并使用字典而不是枚举？虽然这意味着我没有数据的强类型表示 - 这是我绝对想要的。

或者是其他东西？

数据不是很不稳定，但每个蓝月亮都会添加一次新代码

将不胜感激任何建议。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-11-28T06:58:07.650

我在 Visual Studio 2008 中使用 T4 模板。这样，我可以在构建期间强制生成代码，并为我想要的每个表生成枚举。

[Hilton Giesenow's sample](http://dotnet.org.za/hiltong/archive/2008/08/06/generating-enums-from-database-tables.aspx)是一个很好的起点，我相信它可以准确回答您的问题。

从不同的角度来看，一种更有趣的方法是使用 SQL 视图来模拟数据库中的枚举。通过这种方式，您可以将数据库与您的 C#（或其他）代码同步。您可以在 Oleg Sych 的博客上找到一篇关于它的精彩文章，请[点击此处](http://www.olegsych.com/2008/07/t4-template-for-generating-sql-view-from-csharp-enumeration/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-11-27T03:39:43.230

当我在代码中使用枚举时，我通常将格式化的名称作为 varchar 存储在数据库中，而不是在数据库中保留一个枚举值表。我意识到这并不像人们希望的那样规范化，但我相信这比试图保持数据库和我的枚举同步要好。所需要的只是在插入/更新时格式化并在选择时解析以将值重新组合回枚举中。

只有当我相信枚举将被修复时，我才会这样做——尽管我也很少进行更新。如果我相信数据很可能会定期更新，我不会使用枚举，而是会在数据库中有一个单独的表，其中包含外键引用。

# jquery - 简单的 jQuery 问题 - 选择与 a 具有相同类的 div

> ID：322837
> 
> 赞同：0
> 
> 时间：2008-11-27T03:01:26.287
> 
> 标签：jquery

我想这样做，但还没有完全弄清楚......

```
 $(document).ready(function() {
        $("a.whateverclass").click(function() {
            $("div.whateverclass").show();
            return false;
        }); 
```

基本上，当单击某个类的链接时，会显示该类的所有 div。类可以是任何类。而且我不知道 application.js 文件中类的名称，所以我需要匹配相同的类。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-11-27T03:13:19.850

我喜欢@Eran 的回答，但如果您有一些不符合此模式的链接，您可能需要确保仅将其应用于符合此模式的链接。

```
$('a[class]').click(function() {
    $('div.' + $(this).attr('class')).show();
    return false;
}); 
```

如果链接可能应用了其他类，您可能需要使用命名方案，例如：

```
$('a[class^=div-]').click(function() {
    $('div.' + $(this).attr('class')).show();
    return false;
});
<div class='div-mydiv'></div>
<a href='javascript:void(0);' class='div-mydiv'>Show</a>

<a href='mailto:nobody@nowhere.com' class='mail-link'>Contact Us</a> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-27T03:04:12.940

```
$("a").click(function() {
        $("div." + $(this).attr('class')).show();
}); 
```

# sql - MySQL计算匹配词

> ID：322839
> 
> 赞同：2
> 
> 时间：2008-11-27T03:01:52.713
> 
> 标签：sql, mysql, database

如何查询以获取字段中匹配单词的计数，特别是在 MySQL 中。只是我需要获取字段值中出现“搜索词”的次数。

例如，值是“一二一一二”，所以当我搜索单词“一”时，它应该给我 3

是否可以？因为目前我只是从数据库中提取值并使用服务器端语言进行计数。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-11-27T03:10:25.080

您是否正在寻找一个查询，给定一个单词列表，返回数据库字段中匹配单词的数量？

例如：

数据库表有

```
身份证条款
1 猫、狗、鸟、马

```

然后检查“猫，马”这个词会返回 2？

如果是这样，我建议您在 SQL*之外*进行检查，无论您使用哪种语言进行其余处理。SQL 不是为这种级别的处理而设计的。

您可以*使用*存储过程来循环检查需要检查的单词，但我怀疑它是否有效或高效。

当然，如果我误解了您的要求，我可能全都错了=）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-27T07:02:54.253

您可以创建一个直接在 SQL 中使用的函数，以便一步完成。

这是[我在 MySQL 网站上找到的一个函数](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html)：

```
delimiter ||
DROP FUNCTION IF EXISTS substrCount||
CREATE FUNCTION substrCount(s VARCHAR(255), ss VARCHAR(255)) RETURNS TINYINT(3) UNSIGNED LANGUAGE SQL NOT DETERMINISTIC READS SQL DATA
BEGIN
DECLARE count TINYINT(3) UNSIGNED;
DECLARE offset TINYINT(3) UNSIGNED;
DECLARE CONTINUE HANDLER FOR SQLSTATE '02000' SET s = NULL;

SET count = 0;
SET offset = 1;

REPEAT
IF NOT ISNULL(s) AND offset > 0 THEN
SET offset = LOCATE(ss, s, offset);
IF offset > 0 THEN
SET count = count + 1;
SET offset = offset + 1;
END IF;
END IF;
UNTIL ISNULL(s) OR offset = 0 END REPEAT;

RETURN count;
END;

||

delimiter ; 
```

你应该像这样使用它：

```
SELECT substrCount('one two one onetwo', 'one') `count`; // Returns 3 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-27T03:45:14.747

我建议您在 SQL 之外执行此操作，无论引擎如何，正则表达式都比 SQL 语言更适合。您可能可以使用视图或其他东西来做到这一点，但正如我所说，有更合适的方法可以做到这一点，比如您的语言或正则表达式中的字符串操作类/对象/函数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-11-27T14:53:42.883

如果您一次只需要搜索一个词，则可以使用类似的功能

```
select (len(field)-len(replace,find,''))/len(find) 
```

可以在 sql server 中工作，但我不确定 MySQL。您还需要处理特殊情况`len(find) = 0`。

# php - PHP 3 到 PHP 5 升级... 3 中的变量前面没有 $... 是否有向后兼容的设置？

> ID：322842
> 
> 赞同：0
> 
> 时间：2008-11-27T03:03:53.613
> 
> 标签：php, variables

好的，这是一个奇怪的要求，它甚至可能不完全正确......但我正在升级某人的系统......而且他们正在使用 OSCommerce（从很久以前开始）。

似乎它们的变量在它们前面没有美元符号的情况下被引用（这对我来说是新的）。我已经有 7 年没有使用 PHP 了，而且我一直使用美元符号。

有没有我可以在 PHP 5 中使用的设置来假设这些是变量？

例子：

```
mysql_connect(DB_SERVER, DB_UserName, DB_Password); 
```

在我的日子里，那将是：

```
mysql_connect($DB_Server, etc, etc); 
```

他们的网站有数千个文件……不，我不想在所有东西前面都放美元符号。

帮助！

谢谢，

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-11-27T03:06:34.560

我相信 OSCommerce 实际上定义了这些值，所以用法是正确的（没有 $）。

寻找

```
定义（“DB_SERVER”，“本地主机”）；
```

或类似的东西。

换句话说，如果它们实际上是定义的常量，则*不要在之前用 $ 遍历和更新它们。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-11-27T03:06:21.063

您可以使用[常量](http://www.php.net/constant)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-28T22:13:37.977

如果我没记错的话，一个很大的区别是缺少“register_globals”默认为“ON”。您可能需要在这里更改很多实例 $var 应该是 $_REQUEST['var'] 或适当的 $_GET/$_POST 超级全局变量。

就常量而言，您应该这样访问它们：

```
constant('MY_CONSTANT') 
```

如果未定义常量，这可以避免 PHP 假设 MY_CONSTANT 是一个字符串。

# c# - 更改架构后更新我的 asp.net 应用程序/数据库的最佳方法是什么？

> ID：322845
> 
> 赞同：2
> 
> 时间：2008-11-27T03:04:17.870
> 
> 标签：c#, asp.net, sql-server-2005

我的应用程序的几个主要数据库表中存在的核心字段之一需要从 varchar(5) 更改为 varchar(8)。依赖于这些表的存储过程列表非常长，更不用说必须在我的数据访问层（带有 TableAdapters 的 ASP.NET 2.0 数据集）中进行的更改。

有没有办法自动（并且*安全地*）更改最重要字段的类型并将更改传播到依赖它的所有存储过程/数据访问层调用？

我正在使用 SQL Server 2005 数据库。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-11-27T03:24:10.280

您可能会对Scott Ambler 的这篇关于数据库重构的[文章感兴趣。](http://www.agiledata.org/essays/databaseRefactoring.html)我想他也有一本书。我相信，基本思想是引入一个具有适当宽度的新列，将现有数据复制到新列，实现触发器以同步任何新的插入/更新，迁移您的 SP/DAL 以使用新列，然后完成后删除旧列。显然，所有新代码都使用新列。不幸的是，我不知道有任何自动方式来更新您的 SP/DAL。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-27T03:39:02.077

虽然它现在对您没有多大帮助，但您可以（将来）使用代码生成工具来为您生成数据访问层和任何必要的（非自定义）存储过程。我使用 .netTiers 并更改字段名称、数据类型或列大小（如您的情况）非常简单。

如果您对 .netTiers 之类的内容感兴趣，可以[在此处](http://www.nettiers.com)查看他们的网站。

不幸的是，我不知道如何轻松更新您拥有的所有内容。但是，您可以使用 Redgate 的 SQL Refactor 之类的工具来处理所有数据库更改（请参阅[此处](http://www.red-gate.com/products/SQL_Refactor/index.htm)）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-11-27T07:13:26.840

[CommandBuilder](http://msdn.microsoft.com/en-us/library/ms971491.aspx)可能对您有用，也可能没用。它有它的优点和缺点（就像我猜的任何东西一样）。至于现阶段对你有多大好处，我不知道，但它存在并且可以使用，所以我认为我应该提高它:)

我个人会以此为契机来看看我的数据访问层。您所做的更改非常小，但它对系统产生了深远的影响，**为什么？**

如果您预见到系统会发生更多变化，我肯定会更多地考虑 DAL 的结构，以及为什么一个小的变化会产生如此大的影响。

# c++ - 将 Fortran 转换为 C 或 C++

> ID：322846
> 
> 赞同：3
> 
> 时间：2008-11-27T03:05:16.090
> 
> 标签：c++, c, fortran

我有一些需要转换为 C 或 C++ 的数字代码。我尝试使用 f2c，但它不适用于 Fortran 代码。f2c 抱怨是因为代码使用了 C 风格的预处理器指令 (#include)。该代码的自述文件指出它是 Fortran77，它与 fort77 链接器一起使用，可以扩展这些包含。

有谁知道如何成功转换此代码？

我最后的办法是编写一个简单的预处理器来扩展这些包含，然后将代码提供给 f2c。

注意：我在这里的 Windows/Visual C++ 环境中工作，所以任何 gcc 恶作剧都可能比它们的价值更麻烦......

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2008-11-27T03:29:30.347

我在一个工程研究小组工作了很多年。从 Fortran 到 C 的自动转换我们从来没有运气好过。代码不是特别容易理解，而且很难维护。我们最好的运气是使用 Fortran 代码作为算法的模板，并对我们希望继续使用的任何东西进行重新实现。或者，您可以更新 Fortran 以使用更现代的 Fortran 结构，并获得许多与迁移到 C/C++ 相同的价值。我们还成功地从 C 调用 Fortran 例程，尽管调用约定的差异有时会使事情变得困难。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2008-11-27T03:22:19.847

这个~~可能~~有点走投无路，但是您是否考虑过，由于您可能正在使用 C 风格的包含，您实际上可以在文件上运行 C 预处理器以包含这些文件？然后，您可以获取*该*输出并通过 f2c 运行它。

（我不是这方面的专家。如果合适，请对此投反对票。）

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2008-11-27T03:24:45.753

您可能会摆脱手动转换

> #include “whatsit.f90”

至

> 包括“whatsit.f90”

然后再次尝试 f2c 转换。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2008-11-27T03:23:29.237

你没有C预处理器吗？在 Unix 上，可能有一个单独的程序 cpp，它将带`#include`指令的 Fortran 转换为不带`#include`指令的 Fortran。或者，您可以将源代码从`xyz.f77`( `xyz.f`) 重命名为`xyz.c`，然后在“仅预处理器”模式下运行 C 编译器，并将输出捕获为`f2c`程序的新输入。您可能不得不担心消除`#line`输出中指令的选项等，或者您最好通过简单的过滤器（`sed`或`perl`想到）运行输出。

# visual-studio-2008 - vista 上的英特尔编译器：“无法获得映射内存”

> ID：322866
> 
> 赞同：1
> 
> 时间：2008-11-27T03:23:11.360
> 
> 标签：visual-studio-2008, memory, compiler-construction, intel

尝试在 vs2008 的 vista 商业版 (sp1) 上使用英特尔编译器版本 10.0.025 编译 C++ 项目时出现以下错误：

```
unable to obtain mapped memory (see pch_diag.txt) 
```

没有像 pch_diag 这样的文件，所以这有点令人沮丧。

如果我尝试只使用 microsoft 编译器，我对英特尔的集成性能原语 (ipp) 的所有调用都会遇到对存储 ipp 的程序文件目录的访问错误。

有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-11-27T19:12:00.943

这是答案：

在 xp sp2 兼容模式下运行 icl。它在vista模式下不起作用。这有点奇怪，但确实如此。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-11-27T04:18:34.540

听起来您正在以标准用户身份运行编译器（对您有好处！），并且您使用 Microsoft 编译器遇到的错误似乎指向权限问题。您应该使用 Windows 资源管理器检查您提到的目录的安全属性（如果您还没有）。如果从安全属性页面中问题不明显，这里有一些可能对调试权限问题有用的工具：

*   [LUA Buglight](http://blogs.msdn.com/aaron_margosis/archive/2006/08/07/LuaBuglight.aspx)：用于查找“LUA”（受限用户访问）错误原因的工具
*   [Sysinternals Process Monitor](http://technet.microsoft.com/en-us/sysinternals/bb896645.aspx)：用于实时监控文件系统和注册表访问的工具。您可以过滤掉除编译器之外的所有进程，然后查找“ACCESS DENIED”错误。

# svn - TortoiseSVN 回购浏览器网址

> ID：322870
> 
> 赞同：5
> 
> 时间：2008-11-27T03:24:41.497
> 
> 标签：svn, tortoisesvn

如何删除 TortoiseSvn 存储库浏览器的下拉列表中不再存在的存储库的 url？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2008-11-27T03:27:30.117

只需将鼠标移到要删除的项目上，然后按`Shift`+ `Del`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-11-27T03:40:03.710

打开注册表

转到 hkey_current_user\software\tortoisesvn\history\repourls\

将 urlX 值更改为 "" 以获取您要删除的任何内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-11-27T03:35:11.663

如果你进入你的程序菜单并找到 TortoiseSVN > 设置

有“保存的数据”选项卡。从那里您可以删除列表中的所有项目，这些项目可能比您想要摆脱的要多。我不确定它的存储位置以及是否有删除单个项目的选项。

# php - 您可以使用 Eclipse PDT 启用变量突出显示吗？

> ID：322877
> 
> 赞同：6
> 
> 时间：2008-11-27T03:32:26.550
> 
> 标签：php, eclipse, ide, eclipse-pdt

我使用的是 3.3.2 版，我知道 Java 的常规 Eclipse 会突出显示变量。无论您使用什么语言，Notepad++ 都会执行此操作（如果您选择任何文本，它会突出显示相似的文本）

我知道这不是至关重要的，并且向后/向前增量搜索是一种足够的解决方法，但如果有它会很好。

**更新**看起来我有 PDT 1.03，（当前版本是 2.0），我有 Eclipse 3.2.2。需要查看“帮助 -> 软件更新 -> 管理配置”，而不仅仅是“帮助 -> 关于”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-11-27T12:38:48.617

您可以将新的 PDT 2.0 All-in-one 与 Eclipse 3.4 一起下载——这里是“标记出现”的功能，并且有一些新功能。我现在使用它，发现它很稳定。

[http://www.eclipse.org/pdt/downloads/](http://www.eclipse.org/pdt/downloads/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-27T12:12:23.740

我相信“标记出现”是最接近您所说的“语法突出显示”的选项

但是根据[这个讨论，](http://dev.eclipse.org/newslists/news.eclipse.tools.php/msg01188.html) [PHP 开发工具](http://www.eclipse.org/pdt/)(PDT) 在 2007 年还没有这个功能。

然而[这个错误](https://bugs.eclipse.org/bugs/show_bug.cgi?id=166178)说 PDT1.1 现在有能力标记事件。

[此pdf 文档](http://wiki.eclipse.org/images/c/c2/MarkOccurrences_(Dev2QA).pdf)中的完整说明。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-27T06:02:02.707

我认为你的问题措辞不佳。语法高亮和高亮所有相似的字符串是非常不同的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-11-27T06:28:36.023

不确定 PDT，但我建议改用[PHPEclipse](http://phpeclipse.net/)插件，它更强大。它为您提供了 Eclipse 为 java 提供的几乎所有东西 - 标记事件、Ctrl-单击导航、代码完成等。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-08-26T19:50:34.880

另一个技巧是突出显示单词然后右键单击 -> 重构 -> 重命名或只是 Alt-Shift-R

这会突出显示所有出现的变量。

Esc 键停止突出显示。

只要确保你不会意外重命名它（如果你这样做很容易撤消）。

# api - 让谷歌地图以地理位置为中心并适当放大

> ID：322895
> 
> 赞同：8
> 
> 时间：2008-11-27T03:51:47.073
> 
> 标签：api, google-maps

我想将 x 数量的地理位置传递给 Google Maps API，并使其以这些位置为中心，并设置适当的缩放级别，以便所有位置在地图上都可见。即显示当前在地图上的所有标记。

Google Maps API 默认提供的功能是否可以实现，或者我需要自己解决吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2010-09-29T14:24:53.833

我对每个点都使用了[fitBounds (API V3)：](http://code.google.com/intl/uk-UA/apis/maps/documentation/javascript/reference.html)

1.  声明变量。

    ```
    var bounds = new google.maps.LatLngBounds(); 
    ```

2.  用 FOR 循环遍历每个标记

    ```
    for (i = 0; i < markers.length; i++) {
        var latlng = new google.maps.LatLng(markers[i].lat, markers[i].lng);
        bounds.extend(latlng);
    } 
    ```

3.  最后打电话

    ```
    map.fitBounds(bounds); 
    ```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-11-27T04:18:40.187

有很多方法可以做到这一点，但如果您使用 V2 API，这很容易。[有关示例](http://blog.jeromeparadis.com/archive/2007/02/08/1468.aspx)，请参阅此帖子、[此群组帖子](http://groups.google.com/group/Google-Maps-API/browse_thread/thread/996f83e075e51fdf/d1d67c0e17c5a490)或[此帖子](http://econym.googlepages.com/basic14.htm)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-10-09T17:50:10.127

对于 V3，有[zoomToMarkers](http://googlemap.codeplex.com/Thread/View.aspx?ThreadId=38223)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-17T16:37:08.183

格雷的想法很棒，但不能按原样工作。我不得不为**zoomToMarkers** API V3 设计一个 hack：

```
function zoomToMarkers(map, markers)
{
    if(markers[0]) // make sure at least one marker is there
    {
        // Get LatLng of the first marker
        var tempmark =markers[0].getPosition();

        // LatLngBounds needs two LatLng objects to be constructed
        var bounds = new google.maps.LatLngBounds(tempmark,tempmark);

        // loop thru all markers and extend the LatLngBounds object
        for (var i = 0; i < markers.length; i++) 
        {
            bounds.extend(markers[i].getPosition());
        }

        // Set the map viewport 
        map.fitBounds(bounds);
    }

} 
```

# .net - .NET ClickOnce 和 Vista 启动

> ID：322898
> 
> 赞同：4
> 
> 时间：2008-11-27T03:54:15.040
> 
> 标签：.net, windows-vista, clickonce, digital-signature

我们有一些内部使用的软件，这些软件是通过 VS 2008 的 ClickOnce 发布的。

该应用程序需要始终在每个人的计算机上运行，​​因此显而易见的解决方案是将其放在开始菜单的“启动”文件夹中。这在 XP 机器上运行良好。但是，不可避免的是，人们正在转向 Vista。现在我们遇到了一个问题，即拥有 Vista 的用户在启动时不再运行应用程序。

看起来问题是由于应用程序没有数字签名这一事实引起的，这与启动中的其他程序不同。

我需要对应用程序进行数字签名吗？如果是这样，我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-12-18T16:52:08.647

您确实需要证书，但如果您只是为自己的公司做证书，则无需前往 Verisign 或任何其他外部供应商。

在 Visual Studio 中，您可以自己创建证书并向 ClickOnce 应用程序添加引导程序，以允许客户端接受它作为来自受信任的发布者的证书。

MSDN 有一篇关于这整个过程的[优秀文章。](http://msdn.microsoft.com/en-us/library/ms996418.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-11-27T04:18:30.967

当您对代码进行签名时，vista 中的生活会更轻松。您可以从 verisign 或 godaddy 获得代码签名证书。一旦你有了，你可以在 windows sdk中运行[signtool](http://msdn.microsoft.com/en-us/library/8s9b9yaz(VS.80).aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-01T15:01:26.210

如果您购买证书，这里有[一篇很棒的文章](http://www.softinsight.com/bnoyes/CommentView.aspx?guid=78d107d1-3937-4d8d-81d9-73cb6ae18eee)，介绍了如何创建对程序集进行签名所需的文件。

*此外，*您不必购买证书。您也可以创建[自签名证书](http://msdn.microsoft.com/en-us/library/bfsktky3.aspx)。最大的“缺点”是您的应用程序的发布者将显示为“未知”。对于商业产品来说不是很好，但对于内部应用程序来说可能就好了。

# java - 将依赖 jar 插入安装程序 jar

> ID：322907
> 
> 赞同：1
> 
> 时间：2008-11-27T04:05:27.357
> 
> 标签：java, maven-2, jar

我有一个带有安装程序子项目的多模块 Maven 项目。安装程序将作为可执行 JAR 分发。它将设置数据库并将 WAR 文件提取到应用服务器。我想使用 maven 来组装这个 jar，如下所示：

> /META-INF/MANIFEST.MF
> /com/example/installer/Installer.class
> /com/example/installer/...
> /server.war

清单将有一个指向安装程序类的主类条目。我怎样才能让 maven 以这种方式构建 jar？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-11-29T21:55:45.560

[您可以使用Maven Assembly Plugin](http://maven.apache.org/plugins/maven-assembly-plugin/)构建 jar 。

首先，您需要向 pom.xml**插件**部分添加一些信息，以使生成的 jar 可执行：

```
<plugin>
  <artifactId>maven-assembly-plugin</artifactId>
  <configuration>
    <archive>
      <manifest>
        <mainClass>com.example.installer.Installer</mainClass>
      </manifest>
    </archive>
  </configuration>
</plugin> 
```

我建议使用单独的[程序集描述符](http://maven.apache.org/plugins/maven-assembly-plugin/examples/single/using-components.html)来构建实际的安装程序 jar。这是一个例子：

```
<assembly>
  <id>installer</id>

  <formats>
    <format>jar</format>
  </formats>

  <baseDirectory></baseDirectory>

  <dependencySets>
    <dependencySet>
      <outputDirectory>/</outputDirectory>
      <includes>
        <!-- this references your installer sub-project -->
        <include>com.example:installer</include>
      </includes>
      <!-- must be unpacked inside the installer jar so it can be executed -->
      <unpack>true</unpack>
      <scope>runtime</scope>
    </dependencySet>
    <dependencySet>
      <outputDirectory>/</outputDirectory>
      <includes>
        <!-- this references your server.war and any other dependencies -->
        <include>com.example:server</include>
      </includes>
      <unpack>false</unpack>
      <scope>runtime</scope>
    </dependencySet>
  </dependencySets>
</assembly> 
```

如果您已将程序集描述符保存为“installer.xml”，则可以通过运行程序集来构建您的 jar，如下所示：

> mvn clean package assembly:single -Ddescriptor=installer.xml

希望这可以帮助。以下是一些您可能会觉得有用的附加链接：

*   [Maven 程序集插件 - 配置和使用](http://maven.apache.org/plugins/maven-assembly-plugin/usage.html)
*   [使用 Maven 程序集插件创建可执行 JAR](http://www.sleberknight.com/blog/sleberkn/entry/20080618)
*   [使用 Maven 创建可执行的 jar](http://left.subtree.org/2008/01/24/creating-executable-jars-with-maven/)

# windows - 什么是 Teredo 隧道伪接口？

> ID：322910
> 
> 赞同：16
> 
> 时间：2008-11-27T04:12:53.613
> 
> 标签：windows, networking, ipconfig

运行 ipconfig /all 显示 Teredo 隧道伪接口。那是什么？这与 IPv4 与 IPv6 有关吗？我应该摆脱它吗？如果有怎么办？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2008-11-27T04:29:13.707

与IPv6有关

这里的所有血腥细节：http: [//www.microsoft.com/technet/network/ipv6/teredo.mspx](http://www.microsoft.com/technet/network/ipv6/teredo.mspx)

有些人遇到了问题，并禁用了它，但作为一般规则，如果它没有坏...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-18T15:23:45.250

除非您有某种非常奇怪的问题，否则请保留它。IPv6 站点的数量非常少，但是有一些站点，即使您在仅 IPv4 的位置，它也可以让您访问它们。

如果它给您带来问题，最好解决它。我看到很多人建议删除它来解决问题。但是，他们实际上并没有解决问题的根本原因。在我见过的所有情况下，删除 Teredo 只是碰巧会导致解决他们问题的副作用...... :)

# javascript - jQuery查找与表达式匹配的所有先前元素

> ID：322912
> 
> 赞同：11
> 
> 时间：2008-11-27T04:14:42.643
> 
> 标签：javascript, jquery

使用 jQuery，**如何匹配 DOM 树中当前元素之前的元素？**使用`prevAll()`只匹配以前的兄弟姐妹。

例如：

```
<table>
    <tr>
        <td class="findme">find this one</td>
    </tr>
    <tr>
        <td><a href="#" class="myLinks">find the previous .findme</a></td>
    </tr>
    <tr>
        <td class="findme">don't find this one</td>
    </tr>
</table> 
```

在我的具体情况下，我将在单击链接之前搜索第*一个元素。* `.findme`

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2008-11-27T16:26:10.983

好的，这就是我想出的 - 希望它在许多不同的情况下都会有用。我称之为 jQuery 的 2 个扩展`prevALL`和`nextALL`. 虽然标准`prevAll()`匹配之前的兄弟姐妹，但`prevALL()`匹配 DOM 树上的所有之前的元素，对于`nextAll()`和类似`nextALL()`。

我将尝试在下面的评论中解释它：

```
// this is a small helper extension i stole from
// http://www.texotela.co.uk/code/jquery/reverse/
// it merely reverses the order of a jQuery set.
$.fn.reverse = function() {
    return this.pushStack(this.get().reverse(), arguments);
};

// create two new functions: prevALL and nextALL. they're very similar, hence this style.
$.each( ['prev', 'next'], function(unusedIndex, name) {
    $.fn[ name + 'ALL' ] = function(matchExpr) {
        // get all the elements in the body, including the body.
        var $all = $('body').find('*').andSelf();

        // slice the $all object according to which way we're looking
        $all = (name == 'prev')
             ? $all.slice(0, $all.index(this)).reverse()
             : $all.slice($all.index(this) + 1)
        ;
        // filter the matches if specified
        if (matchExpr) $all = $all.filter(matchExpr);
        return $all;
    };
}); 
```

用法：

```
$('.myLinks').click(function() {
    $(this)
        .prevALL('.findme:first')
        .html("You found me!")
    ;

    // set previous nodes to blue
    $(this).prevALL().css('backgroundColor', 'blue');

    // set following nodes to red
    $(this).nextALL().css('backgroundColor', 'red');
}); 
```

* * *

*编辑*- 从头开始​​重写的功能。我只是想到了一种更快更简单的方法来做到这一点。查看编辑历史以查看我的第一次迭代。

*再次编辑*- 找到了一种更简单的方法！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-27T04:29:40.757

大概您是在 onclick 处理程序中执行此操作，因此您可以访问被单击的元素。我要做的是做一个 prevAll 看看它是否处于同一水平。如果没有，那么我会做一个 parent().prevAll() 来获取父元素的先前兄弟姐妹，然后向后遍历这些兄弟姐妹，检查它们的内容以获得所需的元素。继续向上 DOM 树，直到找到所需的内容或找到 DOM 的根。这是一个通用算法。

如果您知道它在表格内，那么您可以简单地获取包含单击元素的行并从该行向后遍历表格的行，直到找到包含所需元素的行。

我认为没有办法在一个（链接的）语句中做到这一点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-11-27T05:12:51.123

**编辑**：此解决方案适用于您的原始问题、您在第一条评论中提到的问题以及您在之后的评论中详述的问题。

```
$('.myLinks').click(function() {
    var findMe = '';

    $(this).parents().each(function() {
        var a = $(this).find('.findme').is('.findme');
        var b = $(this).find('.myLinks').is('.myLinks');
        if (a && b) {                             // look for first parent that
                                                  // contains .findme and .myLinks
            $(this).find('*').each(function() {
                var name = $(this).attr('class');
                if ( name == 'findme') {
                    findMe = $(this);             // set element to last matching
                                                  // .findme
                }
                if ( name == 'myLinks')    {
                    return false;                 // exit from the mess once we find
                                                  // .myLinks
                }
            });
            return false;
        }   
    });
    alert(findMe.text() );               // alerts "find this one"
}); 
```

这适用于您在 OP 中的示例以及评论中解释的修改示例：

```
<table>
  <tr>
    <td class="findme">don't find this one</td>
  </tr>
  <tr>
    <td class="findme">find this one</td>
  </tr>
  <tr>
    <td><a href="#" class="myLinks">find the previous .findme</a></td>
  </tr>
  <tr>
    <td class="findme">don't find this one</td>
  </tr>
</table> 
```

以及您添加的这个测试用例：

```
<table>
  <tr>
    <td class="findme">don't find this one</td>
  </tr>
  <tr>
    <td class="findme">don't find this one</td>
  </tr>
  <tr>
    <td class="findme">find this one</td>
  </tr>
</table>

<a href="#" class="myLinks">find the previous .findme</a> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2011-08-10T10:21:53.857

我通常给元素编号（1,2,3..）（rel="number"），所以我使用这段代码为所有先前的元素提供类：

```
var num = $(this).attr("rel");

for (var i = 1; i<=num; i++)
{
    $('.class[rel="'+i+'"]').addClass("newclass");
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-02T20:54:07.917

有同样的问题，这是我想出的。我的函数使用[compareDocumentPosition](http://www.w3schools.com/jsref/met_node_comparedocumentposition.asp)。不知道它在性能方面与其他解决方案相比如何。

```
$.fn.findNext = function ( selector ) {
  var found, self = this.get(0);
  $( selector )
    .each( function () {
      if ( self.compareDocumentPosition( this ) === 4 ){ 
        found = this; 
        return false;
      }    
    })
  return $(found);
} 
```

当然，人们可以很容易地改变这一点，以获取调用元素之后的所有元素。

```
$.fn.nextALL= function ( selector ) {
  var found = [], self = this.get(0);
  $( selector )
    .each( function () {
      if ( self.compareDocumentPosition( this ) === 4 )
        found.push(this);          
    })
  return $(found);
} 
```

### 编辑：精简版

```
$.fn.findNext = function( s ){
    var m = this[0], f=function(n){return m.compareDocumentPosition(n)===4;};
    return this.pushStack( $(s).get().filter(f) );
} 
```

# asp.net - 检查页面是否处于部分呈现模式 ASP.NET 2.0 + AJAX.NET

> ID：322921
> 
> 赞同：2
> 
> 时间：2008-11-27T04:23:51.300
> 
> 标签：asp.net, asp.net-ajax, updatepanel, postback, ajax.net

我需要确定页面是否以部分呈现模式加载（从 UpdatePanel 中回发时）。

有什么建议么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-11-27T05:38:49.820

您可以使用 ScriptManager 的 [IsInAsyncPostBack](http:///asp.net/AJAX/Documentation/Live/mref/P_System_Web_UI_ScriptManager_IsInAsyncPostBack.aspx)属性来检查页面是否正在通过部分回发加载。

# iphone - 使用动态数据重用 UITableView 的最佳方法？

> ID：322923
> 
> 赞同：0
> 
> 时间：2008-11-27T04:24:55.213
> 
> 标签：iphone, cocoa-touch, uitableview

我的应用程序有一系列基于一些分层数据的表视图。例如，用户在我的 CategoryListController 上选择“按 XYZ 浏览”，然后我根据该选择加载我的 DocumentListController。

现在我正在通过一个返回一些 JSON 数据的 Web 服务获取列表，但这不是重点。我可以从 SQLite 数据库中检索这个动态列表，我将面临同样的潜在挑战。

这里的问题是，由于 DocumentListController 中我的表视图的项目列表将根据用户点击的选择而改变，因此我必须在显示表视图后加载我的列表。

现在，我正在使用`-viewWillAppear:`从我的 Web 服务触发数据项的“刷新”。我想知道这是否是进行此刷新的最佳方式，或者我是否应该考虑使用不同的方法。我尝试使用`-viewDidLoad`，但该方法只为 DocumentListController 调用一次，并且我必须在每次调用时检查“选择”是否已更改，如果是，我需要再次调用我的 Web 服务。

做这样的事情的最好方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2008-11-27T14:16:50.713

由于您通过网络检索数据，我建议您在处理后发布通知。您的 DocumentListController 应该注册该通知并在通知处理程序中调用其表视图的 reloadData。

另一种方法，如果在显示视图时数据将始终存在，那就是您所建议的 - 在 vi​​ewWillAppear 中更新表视图。

# java - Java：在堆栈中检索上述方法

> ID：322926
> 
> 赞同：5
> 
> 时间：2008-11-27T04:26:20.670
> 
> 标签：java

您将如何获得对当前类之上几个堆栈帧的执行类的引用？例如，如果您有：

```
Class a { 
    foo() {
        new b().bar();
    }
}

Class b {
    bar() {
        ...
    }
} 
```

有没有办法在线程执行 bar() 时通过在 foo() 中使用“this”来获取将检索的值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-11-27T04:31:56.773

不，你不能。在我所知道的所有使用堆栈的语言中，其他堆栈帧的内容对您是隐藏的。除了将其作为参数传递之外，您还可以做一些事情来获取它。面向方面的框架之一可能会给你一些东西。此外，您可以从[`Thread.getStackTrace()`](http://java.sun.com/javase/6/docs/api/java/lang/Thread.html#getStackTrace()).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-27T05:07:16.000

正如其他人所说，您将希望将较低方法传递给较高方法的类实例并以这种方式获取它。

例如：

```
Class A { 
    foo() {
        new b().bar(this);
    }
}

Class B {
    bar(A aInstance) {
        ...
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-11-27T11:25:27.673

你有三个选择。您可以将调用对象传递给 bar 方法：

```
Class A { 
    foo() {
        new B().bar(this);
    }
}

Class B {
    bar(A caller) {
        ...
    }
} 
```

或者您可以使 B 类成为 A 类的内部类：

```
Class A { 
    foo() {
        new B().bar();
    }

    Class B {
        bar() {
            A caller=A.this;
            ...
        }
     }
} 
```

如果您只需要类而不是对象实例，那么您还有第三种选择。使用`Thread.currentThread().getStackTrace()`可以在栈中任意点获取类的限定名，并使用反射获取类实例。但这太可怕了，您应该修复您的设计，或者（如果您正在编写自己的调试器或类似的东西）尝试一个更简单的项目，直到您对 java 有足够的了解来为自己解决这种事情......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-11-27T04:30:17.683

`this`始终是对对象当前实例的引用。所以任何`this`in的使用`foo()`都会返回一个 Class A 的实例。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-11-27T04:31:32.343

我认为Java方法一般是不允许直接访问调用栈的。

从安全的角度来看，您不希望 API 函数可能访问调用者的数据。

# javascript - css / js中的自动换行

> ID：322929
> 
> 赞同：40
> 
> 时间：2008-11-27T04:30:16.137
> 
> 标签：javascript, css

我正在寻找一种跨浏览器的方式来包装具有预定宽度的 div 内没有中断空格（例如长 URL）的长文本部分。

以下是我在网上找到的一些解决方案以及为什么它们对我**不起作用**：

*   **溢出：隐藏/自动/滚动**- 我需要整个文本可见而不滚动。div 可以垂直增长，但不能水平增长。
*   **注射­** 通过 js / server-side - ­**进入字符串** FF3 现在支持，但是复制和粘贴带有 ­ 的 URL 中间在 Safari 中不起作用。此外，据我所知，没有一种干净的方法可以测量文本宽度来找出将这些字符添加到的最佳字符串偏移量（有一种 hacky 方法，请参阅下一项）。另一个问题是放大 Firefox 和 Opera 很容易打破这一点。
*   **将文本转储到隐藏元素并测量 offsetWidth** - 与上面的项目相关，它需要在字符串中添加额外的字符。此外，测量长文本正文所需的中断数量很容易需要数千次昂贵的 DOM 插入（每个子字符串长度一个），这可能会有效地冻结站点。
*   **使用等宽字体**- 同样，缩放会弄乱宽度计算，并且文本不能自由设置样式。

看起来很有希望但并不完全存在的事情：

*   **word-wrap : break-word** - 它现在[是 CSS3 工作草案](http://www.w3.org/TR/css3-text/#word-wrap)的一部分，但它还不受 Firefox、Opera 或 Safari 的支持。如果它适用于今天的所有浏览器，这将是理想的解决方案:(
*   **通过 js/ 服务器端将 <wbr> 标记注入字符串**- 复制和粘贴 URL 在所有浏览器中都有效，但我仍然没有一个好的方法来衡量在哪里放置中断。此外，此标记使 HTML 无效。
*   **在每个字符后添加中断**- 这比数千个 DOM 插入要好，但仍然不理想（将 DOM 元素添加到文档会占用内存并减慢选择器查询等）。

有没有人对如何解决这个问题有更多的想法？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2010-07-29T08:34:25.443

css哟！

```
.wordwrap {
    white-space: pre-wrap; /* css-3 */
    white-space: -moz-pre-wrap; /* Mozilla, since 1999 */
    white-space: -pre-wrap; /* Opera 4-6 */
    white-space: -o-pre-wrap; /* Opera 7 */
    word-wrap: break-word; /* Internet Explorer 5.5+ */ 
} 
```

我也刚刚找到这篇文章 [http://www.impressivewebs.com/word-wrap-css3/](http://www.impressivewebs.com/word-wrap-css3/)

所以你应该使用

```
.wordwrap {  
    word-wrap: break-word;
}  

.no_wordwrap {  
    word-wrap: normal;
} 
```

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2008-11-27T05:28:16.817

我通常使用`word-wrap`和 的`<wbr>`想法来处理这个问题。注意有几个[变种](http://www.quirksmode.org/oddsandends/wbr.html)。如您所见，`&#8203;`这可能是您最好的兼容性选择。

`word-wrap`浏览器支持并不*可怕*，考虑到所有因素，Safari、Internet Explorer 和 Firefox 3.1（Alpha Build）都支持它（[src](http://www.css3.info/preview/word-wrap/)），所以我们可能不会那么遥远。

关于服务器端损坏，我已经非常成功地使用了这种方法（php）：

```
function _wordwrap($text)   {
    $split = explode(" ", $text);
    foreach($split as $key=>$value)   {
        if (strlen($value) > 10)    {
            $split[$key] = chunk_split($value, 5, "&#8203;");
        }
    }
    return implode(" ", $split);
} 
```

基本上，对于超过 10 个字符的单词，我将它们分成 5 个字符。这似乎适用于我收到的所有用例。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-11-27T04:51:44.473

这里有一个松散相关的问题[textarea with 100% width ignores parent element's width in IE7](https://stackoverflow.com/questions/33933/textarea-with-100-width-ignores-parent-elements-width-in-ie7)

不知道是否找到了任何决定性的解决方案，但似乎最接近的是**word-break:break-all**，它可能在 Internet Exploder 中完成这项工作。

我还发现这个[http://petesbloggerama.blogspot.com/2007/02/firefox-ie-word-wrap-word-break-tables.html](http://petesbloggerama.blogspot.com/2007/02/firefox-ie-word-wrap-word-break-tables.html)隐藏在我的书签中，这表明大多数其他浏览器的解决方法，这可能帮助。

如果 CSS3 出现在这里，它会很棒......

希望对您有所帮助，有兴趣看看您的想法。抱歉，我无法提供任何经过测试或更具体的内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-02-13T22:15:53.517

在 PHP 中使用正则表达式应该可以更快地分解长单词。我创建了一个处理 htmlspecialchars 并用 ­ 分解单词的函数。这是任何有兴趣的人的功能。只需传递字符串和最大单词长度（如果您不想用 ­ 分解单词，则保留为 0），它将返回一个字符串，其中转换了 html 特殊字符，单词用 ­ 分解

```
function htmlspecialchars2($string = "", $maxWordLength = 0)
{
    if($maxWordLength > 0)
    {
        $pattern = '/(\S{'.$maxWordLength.',}?)/';
        $replacement = '$1&shy;';
        $string = preg_replace($pattern, $replacement, $string);
    }

    //now encode special chars but dont encode &shy;
    $string = preg_replace(array('/\&(?!shy\;)/','/\"/',"/\'/",'/\</','/\>/'), array('&amp;','&quot;','&#039;','&lt;','&gt;'), $string);

    return $string;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-12-03T08:28:56.547

您可以使用现在在 IE7-8 和 FF3.5 中工作的表格布局 +word-wrap CSS 属性。它不会解决问题，但至少您的设计不会被破坏。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-22T06:56:48.297

如果需要根据组件的高度和宽度自动换行以显示，请在 css 中使用 **white-space:normal希望这可能对您有所帮助。**

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-07T14:43:48.967

与欧文的回答非常相似，这在一行中实现了服务器端的相同功能：

```
return preg_replace_callback( '/\w{10,}/', create_function( '$matches', 'return chunk_split( $matches[0], 5, "&#8203;" );' ), $value ); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-07-12T06:36:37.310

这可以解决您的问题

```
function htmlspecialchars2($string = "", $maxWordLength = 0){
 return  wordwrap($string , $maxWordLength,"\n", true);
 } 
```

# mysql - 如何在 MySQL 表上拆分数据

> ID：322931
> 
> 赞同：2
> 
> 时间：2008-11-27T04:30:40.333
> 
> 标签：mysql, scalability, large-data-volumes

我有一个网站，其中的成员互相发送消息。会有一些成员，他们喜欢发送消息 - 我相信你可以看到这是怎么回事。

目前我已经说过消息存储在一个很好的关系表中，巧妙地命名为“消息”，具有不同的状态 ID 来表示，呃，状态（未读，已保存等）。我知道这是事后的事，但我认为我真的需要将此表拆分为其他几个表（例如，每种状态类型不止一个）而且我不确定最好的方法是什么关于它。

我有几个想法，但都不是火箭科学，但我很好奇这是否有“标准解决方案”。谷歌不建议这样做，但我想这些问题在像 stackoverflow 这样的地方之外并不常见。

有人*已经做过*了吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-11-27T11:01:04.977

我肯定会将“消息”表拆分为多个。例如：

消息状态消息消息文本

这样，如果您在某人的收件箱中显示项目列表，您只需要扫描“消息”表，该表是较小且固定长度的列，以获得最大搜索速度。当有人想打开并查看消息正文时，您可以点击“MessageText”表。“消息状态”只是一个查找表，用于将 tinyint FK 加入“消息”表。

与可能带有 mediumtext 列的 1 个表相比，您将获得更多的性能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-11-27T04:51:29.027

你有没有想过可能有一个归档过程来归档任何早于一段时间的东西？

通过适当的索引和微调，您将不得不有相当多的消息需要在多个表中移动它们，除非它是空间问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-27T04:52:26.967

拥有包含大量数据的消息表没有任何问题。如果你真的不需要它，没有理由拆分它。

如果您担心此表的性能，请首先根据您的需要明智地选择存储引擎：我的建议是使用 InnoDB，因为它是写密集型的。然后查看索引以加快读取速度。

如果表真的变得太大而且太慢，你可以做的是创建 2 个表：

*   带有 MyISAM 存储的 messages_archive 表（仅用于快速检索和搜索“归档”消息）。

*   带有 InnoDB 存储的 messages_inbox 表：这是经常插入新消息的表。

选修的 ：

*   一个messages_drafts，保存自动保存的消息。原因：不需要用草稿消息减慢收件箱表的速度。

顺便说一句，这不是您所说的“标准解决方案”，只是一个想法。:)

**编辑 ：**

从您的评论中，我了解到您正在寻找的实际上是“[分区](http://dev.mysql.com/doc/refman/5.1/en/partitioning-overview.html)”。

不同的 MySQL 分区类型允许您按范围、列表、键或散列物理隔离数据。

# makefile - 通用 GNU makefile 目录路径

> ID：322936
> 
> 赞同：49
> 
> 时间：2008-11-27T04:35:45.363
> 
> 标签：makefile

我试图通过使用一个通用的 makefile 来整合一些构建信息。我的问题是我想使用来自不同子目录级别的 makefile，这使得工作目录值 ( `pwd`) 不可预测。例如：

```
# Makefile.common
TOP := $(shell pwd)
COMPONENT_DIR := $(TOP)/component
COMPONENT_INC := $(COMPONENT_DIR)/include
COMPONENT_LIB := $(COMPONENT_DIR)/libcomponent.a 
```

如果我`Makefile.common`从子目录中包含，像这样，`$(TOP)`目录不正确，其他一切都遵循：

```
# other_component/Makefile
include ../Makefile.common
# $(COMPONENT_LIB) is incorrectly other_component/component 
```

`Makefile.common`使用*自己的*目录路径而不是更善变的最佳方法是什么`pwd`？

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2008-11-27T23:05:22.703

您应该能够使用[MAKEFILE_LIST 变量](http://www.gnu.org/software/make/manual/html_node/Special-Variables.html#Special-Variables)，如下所示：

```
# This must be the first line in Makefile.common
TOP := $(dir $(firstword $(MAKEFILE_LIST))) 
```

从文档中：

> 当 make 读取各种 makefile 时，包括从 MAKEFILES 变量、命令行、默认文件或包含指令获得的任何文件，它们的名称将自动附加到 MAKEFILE_LIST 变量中。它们是在 make 开始解析它们之前添加的。这意味着如果 makefile 所做的第一件事是检查此变量中的最后一个单词，它将是当前 makefile 的名称。但是，一旦当前的 makefile 使用了 include，最后一个单词将是刚刚包含的 makefile。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2010-03-30T19:13:43.983

这不是好的风格，因为它添加了另一个依赖项（即 realpath 二进制文件）。根据您的用例，这可能是可以接受的。

```
ROOT_DIR := $(shell dirname $(realpath $(lastword $(MAKEFILE_LIST)))) 
```

如果您没有安装 realpath：

```
$ sudo apt-get install realpath # on debian and derivatives 
```

*编辑*：一定要使用`:=`，而不是`=`因为后者会导致`make`使用后期绑定，并且`MAKEFILE_LIST`可能由于后期包含而改变。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-11-27T04:44:26.623

您是否尝试过这样做：

```
# Makefile.common
TOP ?= $(shell pwd)
COMPONENT_DIR := $(TOP)/component
COMPONENT_INC := $(COMPONENT_DIR)/include
COMPONENT_LIB := $(COMPONENT_DIR)/libcomponent.a

# other_component/Makefile
TOP ?= ..
include ../Makefile.common 
```

使用 ?= 构造将防止 TOP 被重新定义（如果已设置）。您可以在调用 make 时根据您在树中的位置将其设置为适当的值。我承认我使用 GNU make 已经有一段时间了，所以这可能不起作用或可能需要一些调整。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-22T04:23:40.633

把常用的东西写进去`common.mk`。然后将 common.mk 放在 Make 在遇到 include 语句时查找的默认目录中。请参阅Make 查找的常用目录[的手册](https://www.gnu.org/software/make/manual/html_node/Include.html#Include)。

您也可以将 common.mk 放在自定义目录中，然后键入 `make -I customdir`.

在每个子文件夹的 Makefile 中，您可以

```
include common.mk 
```

就这些。无需担心路径和移动东西。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-01-29T08:12:13.770

我的解决方案：

```
cwd  :=  $(shell readlink -en $(dir $(word $(words $(MAKEFILE_LIST)),$(MAKEFILE_LIST)))) 
```

这也适用于`make -f /opt/some/dir/Makefile` whenn your in 之类的调用`/opt/other/path/subdir`。

# c++ - 初始化 srand 的推荐方法？

> ID：322938
> 
> 赞同：73
> 
> 时间：2008-11-27T04:37:23.410
> 
> 标签：c++, random, srand

我需要一种“好”的方法来初始化 C++ 中的伪随机数生成器。我发现[一篇文章](http://www.cplusplus.com/reference/clibrary/cstdlib/srand.html)说：

> 为了生成类似随机的数字，srand 通常被初始化为一些独特的值，比如那些与执行时间相关的值。例如，函数 time（在头文件 ctime 中声明）返回的值每秒都不同，这足以满足大多数随机需求。

Unixtime 对我的应用程序来说不够独特。初始化它的更好方法是什么？如果它是可移植的，则加分，但代码将主要在 Linux 主机上运行。

我正在考虑做一些 pid/unixtime 数学来获得一个 int，或者可能从`/dev/urandom`.

谢谢！

**编辑**

是的，我实际上每秒多次启动我的应用程序并且我遇到了冲突。

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2008-11-27T09:20:01.827

这是我用于可以频繁运行的小型命令行程序（每秒多次）：

```
unsigned long seed = mix(clock(), time(NULL), getpid()); 
```

混合在哪里：

```
// Robert Jenkins' 96 bit Mix Function
unsigned long mix(unsigned long a, unsigned long b, unsigned long c)
{
    a=a-b;  a=a-c;  a=a^(c >> 13);
    b=b-c;  b=b-a;  b=b^(a << 8);
    c=c-a;  c=c-b;  c=c^(b >> 13);
    a=a-b;  a=a-c;  a=a^(c >> 12);
    b=b-c;  b=b-a;  b=b^(a << 16);
    c=c-a;  c=c-b;  c=c^(b >> 5);
    a=a-b;  a=a-c;  a=a^(c >> 3);
    b=b-c;  b=b-a;  b=b^(a << 10);
    c=c-a;  c=c-b;  c=c^(b >> 15);
    return c;
} 
```

* * *

## 回答 #2

> 赞同：63
> 
> 时间：2008-11-27T05:30:14.160

最好的答案是[`<random>`](http://en.cppreference.com/w/cpp/header/random)。如果您使用的是 C++11 之前的版本，您也可以查看 Boost random number stuff。

但是，如果我们在谈论`rand()`和~~最好~~`srand()`
的最简单的方法就是使用：~~`time()`~~

 ~~```
int main()
{
    srand(time(nullptr));

    ...
} 
```

请务必在程序开始时执行此操作，而不是每次调用时都执行此操作`rand()`！

* * *

边注：

***注意***：下面的评论中讨论了这是不安全的（这是真的，但最终不相关（继续阅读））。因此，另一种选择是从随机设备`/dev/random`（或其他一些安全的实数（er）随机数生成器）中播种。***但是***：不要让这让你陷入一种虚假的安全感。这是`rand()`我们正在使用的。即使您使用出色生成的种子播种它，它仍然是可预测的（如果您有任何值，您可以预测下一个值的完整序列）。这仅对生成`"pseudo"`随机值有用。

如果您想要“安全”，您可能应该使用`<random>`（尽管我会在安全通知网站上做更多阅读）。请参阅下面的答案作为起点：[https](https://stackoverflow.com/a/29190957/14065) ://stackoverflow.com/a/29190957/14065以获得更好的答案。

次要注意：使用随机设备实际上比我下面的原始建议更好地解决了每秒启动多个副本的问题（只是不是安全问题）。

* * *

回到原来的故事：

每次启动时， time() 都会返回一个唯一值（除非您每秒启动应用程序多次）。在 32 位系统中，它只会每 60 年左右重复一次。

我知道你认为时间不够独特，但我觉得这很难相信。但众所周知，我是错的。

如果您同时启动大量应用程序副本，则可以使用分辨率更高的计时器。但是，在值重复之前，您会冒更短时间段的风险。

好的，所以如果你真的认为你正在启动多个应用程序。
然后在计时器上使用更细的颗粒。

```
 int main()
 {
     struct timeval time; 
     gettimeofday(&time,NULL);

     // microsecond has 1 000 000
     // Assuming you did not need quite that accuracy
     // Also do not assume the system clock has that accuracy.
     srand((time.tv_sec * 1000) + (time.tv_usec / 1000));

     // The trouble here is that the seed will repeat every
     // 24 days or so.

     // If you use 100 (rather than 1000) the seed repeats every 248 days.

     // Do not make the MISTAKE of using just the tv_usec
     // This will mean your seed repeats every second.
 } 
```

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2008-11-27T04:54:18.413

如果您需要更好的随机数生成器，请不要使用 libc rand。相反，只需使用类似`/dev/random`或直接的东西（直接从中`/dev/urandom`读取或类似的东西）。`int`

libc rand 唯一真正的好处是给定种子，它是可预测的，这有助于调试。

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2008-11-27T08:34:04.197

在窗户上：

```
srand(GetTickCount()); 
```

`time()`以毫秒为单位提供比它更好的种子。

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2012-10-22T03:12:20.030

**C++11`random_device`**

如果您需要合理的质量，那么您首先不应该使用 rand() ；你应该使用`<random>`图书馆。它提供了许多很棒的功能，例如用于不同质量/大小/性能权衡的各种引擎、重入和预定义分布，因此您最终不会弄错它们。它甚至可以提供对非确定性随机数据（例如，/dev/random）的轻松访问，具体取决于您的实现。

```
#include <random>
#include <iostream>

int main() {
    std::random_device r;
    std::seed_seq seed{r(), r(), r(), r(), r(), r(), r(), r()};
    std::mt19937 eng(seed);

    std::uniform_int_distribution<> dist{1,100};

    for (int i=0; i<50; ++i)
        std::cout << dist(eng) << '\n';
} 
```

`eng`是随机性的来源，这里是 mersenne twister 的内置实现。我们使用 random_device 播种它，在任何体面的实现中都将是一个非确定性的 RNG，并使用 seed_seq 组合超过 32 位的随机数据。例如在 libc++ random_device 默认访问 /dev/urandom （尽管您可以给它另一个文件来访问）。

接下来，我们创建一个分布，使得在给定随机源的情况下，重复调用该分布将产生从 1 到 100 的整数的均匀分布。然后我们继续重复使用该分布并打印结果。

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2008-11-27T04:55:09.847

最好的方法是使用另一个伪随机数生成器。Mersenne twister（和 Wichmann-Hill）是我的推荐。

[http://en.wikipedia.org/wiki/Mersenne_twister](http://en.wikipedia.org/wiki/Mersenne_twister)

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2008-11-27T06:07:32.667

我建议你在 mozilla 代码中查看 unix_random.c 文件。（猜它是 mozilla/security/freebl/ ...）它应该在 freebl 库中。

它使用系统调用信息（如 pwd、netstat ....）为随机数生成噪声；它是为支持大多数平台而编写的（这可以获得我的奖励点：D）。

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2008-11-27T13:24:01.490

您必须问自己的真正问题是您需要什么样的随机性质量。

libc random 是一个[LCG](http://en.wikipedia.org/wiki/Linear_congruential_generator)

无论您向 srand 提供什么输入，随机性的质量都会很低。

如果您只是需要确保不同的实例具有不同的初始化，您可以混合使用进程 ID (getpid)、线程 ID 和计时器。将结果与 xor 混合。对于大多数应用程序来说，熵应该足够了。

例子 ：

```
struct timeb tp;
ftime(&tp);   
srand(static_cast<unsigned int>(getpid()) ^ 
static_cast<unsigned int>(pthread_self()) ^ 
static_cast<unsigned int >(tp.millitm)); 
```

要获得更好的随机质量，请使用 /dev/urandom。您可以使用 boost::thread 和 boost::date_time 使上述代码可移植。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2015-03-22T04:20:46.963

`c++11`乔纳森·赖特（Jonathan Wright）投票最高的帖子版本：

```
#include <ctime>
#include <random>
#include <thread>

...

const auto time_seed = static_cast<size_t>(std::time(0));
const auto clock_seed = static_cast<size_t>(std::clock());
const size_t pid_seed =
      std::hash<std::thread::id>()(std::this_thread::get_id());

std::seed_seq seed_value { time_seed, clock_seed, pid_seed };

...
// E.g seeding an engine with the above seed.
std::mt19937 gen;
gen.seed(seed_value); 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2008-11-27T09:13:52.070

```
#include <stdio.h>
#include <sys/time.h>
main()
{
     struct timeval tv;
     gettimeofday(&tv,NULL);
     printf("%d\n",  tv.tv_usec);
     return 0;
} 
```

tv.tv_usec 以微秒为单位。这应该是可接受的种子。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2017-12-06T15:00:41.043

只要您的程序仅在 Linux 上运行（并且您的程序是 ELF 可执行文件），就可以保证内核在 ELF 辅助向量中为您的进程提供唯一的随机种子。内核为您提供 16 个随机字节，每个进程都不同，您可以使用`getauxval(AT_RANDOM)`. 要将这些用于`srand`，请仅使用`int`其中的一个，如下所示：

```
#include <sys/auxv.h>

void initrand(void)
{
    unsigned int *seed;

    seed = (unsigned int *)getauxval(AT_RANDOM);
    srand(*seed);
} 
```

这也有可能转化为其他基于 ELF 的系统。我不确定在 Linux 以外的系统上实现了哪些辅助值。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2011-05-10T05:19:11.830

假设您有一个带有如下签名的函数：

```
int foo(char *p); 
```

随机种子的一个很好的熵来源是以下哈希：

*   （秒和纳秒）的完整结果`clock_gettime`而不丢弃低位 - 它们是最有价值的。
*   的值`p`，转换为`uintptr_t`。
*   的地址`p`，转换为`uintptr_t`。

至少第三个，可能还有第二个，从系统的 ASLR 中获取熵，如果可用的话（初始堆栈地址，因此当前堆栈地址有些随机）。

为了不触及全局状态，我也将完全避免使用`rand`/ ，这样您就可以更好地控制所使用的 PRNG。`srand`但是，无论您使用什么 PRNG，上述过程都是一种很好的（并且相当便携）的方法，无需大量工作即可获得一些体面的熵。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2013-01-16T04:57:16.373

对于那些使用 Visual Studio 的人，这里还有另一种方式：

```
#include "stdafx.h"
#include <time.h>
#include <windows.h> 

const __int64 DELTA_EPOCH_IN_MICROSECS= 11644473600000000;

struct timezone2 
{
  __int32  tz_minuteswest; /* minutes W of Greenwich */
  bool  tz_dsttime;     /* type of dst correction */
};

struct timeval2 {
__int32    tv_sec;         /* seconds */
__int32    tv_usec;        /* microseconds */
};

int gettimeofday(struct timeval2 *tv/*in*/, struct timezone2 *tz/*in*/)
{
  FILETIME ft;
  __int64 tmpres = 0;
  TIME_ZONE_INFORMATION tz_winapi;
  int rez = 0;

  ZeroMemory(&ft, sizeof(ft));
  ZeroMemory(&tz_winapi, sizeof(tz_winapi));

  GetSystemTimeAsFileTime(&ft);

  tmpres = ft.dwHighDateTime;
  tmpres <<= 32;
  tmpres |= ft.dwLowDateTime;

  /*converting file time to unix epoch*/
  tmpres /= 10;  /*convert into microseconds*/
  tmpres -= DELTA_EPOCH_IN_MICROSECS; 
  tv->tv_sec = (__int32)(tmpres * 0.000001);
  tv->tv_usec = (tmpres % 1000000);

  //_tzset(),don't work properly, so we use GetTimeZoneInformation
  rez = GetTimeZoneInformation(&tz_winapi);
  tz->tz_dsttime = (rez == 2) ? true : false;
  tz->tz_minuteswest = tz_winapi.Bias + ((rez == 2) ? tz_winapi.DaylightBias : 0);

  return 0;
}

int main(int argc, char** argv) {

  struct timeval2 tv;
  struct timezone2 tz;

  ZeroMemory(&tv, sizeof(tv));
  ZeroMemory(&tz, sizeof(tz));

  gettimeofday(&tv, &tz);

  unsigned long seed = tv.tv_sec ^ (tv.tv_usec << 12);

  srand(seed);

} 
```

也许有点矫枉过正，但适用于快速间隔。gettimeofday 函数在[这里](https://stackoverflow.com/questions/2494356/how-to-use-gettimeofday-or-something-equivalent-with-visual-studio-c-2008 "https://stackoverflow.com/questions/2494356/how-to-use-gettimeofday-or-something-equivalent-with-visual-studio-c-2008")找到。

编辑：经过进一步调查，rand_s 可能是 Visual Studio 的一个不错的选择，它不仅仅是一个安全的 rand()，它完全不同，并且不使用来自 srand 的种子。我以为它与 rand 几乎相同，只是“更安全”。

要使用 rand_s，请不要忘记在包含 stdlib.h 之前 #define _CRT_RAND_S 。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2019-10-11T20:02:02.787

假设 srand() + rand() 的随机性足以满足您的目的，诀窍在于为 srand 选择最佳种子。time(NULL) 是一个很好的起点，但是如果在同一秒内启动多个程序实例，就会遇到问题。添加 pid（进程 ID）是一种改进，因为不同的实例将获得不同的 pid。我会将 pid 乘以一个因子以进一步传播它们。

但是，假设您将其用于某些嵌入式设备，并且您在同一网络中有多个设备。如果它们都同时通电，并且您在启动时自动启动程序的多个实例，它们可能仍会获得相同的时间和 pid，并且所有设备将生成相同的“随机”数字序列。在这种情况下，您可能需要为每个设备添加一些唯一标识符（例如 CPU 序列号）。

建议的初始化将是：

```
srand(time(NULL) + 1000 * getpid() + (uint) getCpuSerialNumber()); 
```

在 Linux 机器中（至少在我测试过的 Raspberry Pi 中），您可以实现以下函数来获取 CPU 序列号：

```
// Gets the CPU Serial Number as a 64 bit unsigned int. Returns 0 if not found.
uint64_t getCpuSerialNumber() {

    FILE *f = fopen("/proc/cpuinfo", "r");
    if (!f) {
        return 0;
    }

    char line[256];
    uint64_t serial = 0;
    while (fgets(line, 256, f)) {
        if (strncmp(line, "Serial", 6) == 0) {
            serial = strtoull(strchr(line, ':') + 2, NULL, 16);
        }
    }
    fclose(f);

    return serial;
} 
```

* * *

## 回答 #15

> 赞同：-2
> 
> 时间：2014-12-21T21:33:29.650

在程序顶部包含标题，并编写：

```
srand(time(NULL)); 
```

在你的程序中声明你的随机数之前。下面是一个打印 1 到 10 之间随机数的程序示例：

```
#include <iostream>
#include <iomanip>

using namespace std;

int main()
{
   //Initialize srand
   srand(time(NULL));

   //Create random number
   int n = rand() % 10 + 1;

   //Print the number
   cout << n << endl; //End the line

   //The main function is an int, so it must return a value
   return 0;
} 
```

# c# - WriteOnly 属性或方法？

> ID：322941
> 
> 赞同：8
> 
> 时间：2008-11-27T04:39:04.310
> 
> 标签：c#, .net, vb.net, coding-style

是否存在特定情况下`WriteOnly`属性比方法更有意义？方法方法对我来说感觉更自然。

什么是正确的方法？

**使用属性**：

```
Public WriteOnly Property MyProperty As String
   Set(ByVal value as String)
      m_myField = value
   End Set
End Property 
```

```
public string MyProperty
{
   set{ m_myField = value;}
} 
```

**使用方法**：

```
Public Sub SetMyProperty(ByVal value as String)
   m_myField = value
End Sub 
```

```
public void SetMyProperty(string value)
{
   m_myField = value;
} 
```

**编辑** 只是为了澄清我指的是“WriteOnly”属性。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2008-11-27T04:46:59.693

我认为属性表示可以是只读或读/写的东西。只写属性的行为并不明显，所以我避免创建它们。

例如，在视图的下拉列表中设置值列表并访问所选项目：

```
public interface IWidgetSelector
{
  void SetAvailableWidgets(string[] widgets);

  string SelectedWidget { get; set; }
} 
```

比以下更有意义：

```
public interface IWidgetSelector
{
  string[] AvailableWidgets { set; }

  string SelectedWidget { get; set; }
} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2008-11-27T05:33:47.053

值得一提的是，Microsoft 框架设计指南（体现在他们的 FxCop 工具中）不鼓励只写属性并将它们的存在标记为 API 设计问题，因为这种方法不直观。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2010-02-25T06:43:40.273

这是我在 XNA 项目中使用的代码***示例。***如您所见，**Scale**是只写的，它很有用且（相当）直观，读取属性（**get**）对它没有意义。当然可以用方法替换它，但我喜欢这种语法。

```
public class MyGraphicalObject
      {
      public double ScaleX { get; set; }
      public double ScaleY { get; set; }
      public double ScaleZ { get; set; }

      public double Scale { set { ScaleX = ScaleY = ScaleZ = value; } }

      // more...
      } 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-11-27T07:43:38.807

只是另一个想法：
属性应该与**field 的感觉和味道相同**。您无法创建只写的字段。ReadWrite 是可能的，ReadOnly (const) 是可能的，但不是 WriteOnly。*不一致很糟糕 [tm]*

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-11-27T05:43:14.773

我同意你的预感：使用方法。正如您从其中一些答案中看到的那样，只写属性的想法有点奇怪。SetInternalDataProperty() 更容易理解——最终，这是一个问题，即哪种方法会造成最少的混乱。我会跟着你的直觉走。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-11-27T05:38:26.703

我怀疑有一个正确的选择。这是一个品味问题。

在这两种情况下，您都会丢失一些封装。使用该方法或属性的开发人员需要了解有关内部实现的一些信息才能理解结果。因此，我会尽可能避免使用它们，否则会谨慎使用它们。

对我而言，Properties 建议与具有可能访问规则的私人成员建立紧密链接。如果您只是设置一个安全的私人成员，我会使用一个属性：

```
public string Password { set; } 
```

如果你的套装影响了几个成员，我会采用这种方法。就像是：

```
public void SetToRunMode(object[] runvars); 
```

最重要的是一致性。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-11-27T07:36:54.560

但是我已经看到 .Net 框架本身使用 ReadOnly 属性，我想到的第一个是：

```
System.Net.Mail.MailMessage.To 
```

为此，您必须调用一个方法来写入：

```
System.Net.Mail.MailMessage.To.Add(Recipient As String) 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2010-07-26T14:11:27.017

根据代码分析规则 CA1044：

Get 访问器提供对属性的读取访问权限，而 set 访问器提供写入访问权限。

设计指南禁止使用只写属性。这是因为让用户设置一个值然后阻止用户查看该值不会提供任何安全性。此外，如果没有读取访问权限，则无法查看共享对象的状态，这限制了它们的有用性。

为该属性添加一个 get 访问器。

或者，如果只写属性的行为是必要的，**请考虑将此属性转换为方法。**

有关详细信息，请参阅[http://msdn.microsoft.com/en-us/library/ms182165.aspx](http://msdn.microsoft.com/en-us/library/ms182165.aspx)

# url - 网址礼仪？

> ID：322944
> 
> 赞同：1
> 
> 时间：2008-11-27T04:42:31.807
> 
> 标签：url, standards, file-extension

鉴于我对 PHP 的“包含”功能的新理解，我猜测我网站上的所有页面都将是 .php 扩展名。

这会被认为很奇怪吗？

我曾经认为大多数页面都是 .htm 或 .html，但在环顾网络时，我注意到确实没有任何“标准”。

如果我想从 php 文件调用我的菜单，我真的认为我别无选择。就我所见，它就是那样......所以只是让你们大家来感受一下“真正的程序员”对这些问题的感受。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-11-27T05:55:04.313

对浏览器来说真正重要的不是文件的扩展名，而是文件的扩展名。它是在 HTTP 标头中发送的 MIME 类型。标头是在实际文件之前发送的数据，并说明它是什么类型的数据，它有多大，以及一堆其他不重要的垃圾。您可以将服务器配置为将任何文件扩展名作为 HTML 页面发送，但 HTML 页面最常见的扩展名是 .htm、.html、.php、.asp、.aspx、.shtml、.jsp 等。

至于它看起来“奇怪”，实际上很少有人会看地址栏，更不用说文件扩展名是 .php 而不是 .html。如果我是你，我就不会担心；它真的没有什么区别。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-11-27T04:53:58.680

一般 - 确保您的 URL 易于阅读，反映其下方的内容，并且不要更改。“不变”部分可能很棘手，尤其是当您随着时间的推移改变技术时（html>php>aspx）。

要实现这一点，只需确保您网站的每个区域都位于其自己的子目录中*。*

mysite.com/news/

mysite.com/aboutus/

mysite.com/products/

等等

您可以通过以这种方式物理构建您的站点并使用默认文档 (default.html/php/aspx) 来做到这一点，或者使用类似 mod rewrite、ISAPI rewrite 或类似的东西来将这些路径重写为适当的文档。

热衷于 SEO 或营销的人可能对什么构成“好” URL 有不同的想法，但作为开发人员，这就是我的看法。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-11-27T06:14:15.693

在 .php 中结束 URL 从技术上讲是好的，但我认为现在很多人都试图使 URL 独立于实际的代码/文件结构。

实际上，从软件工程的角度来看，我认为这也是一件好事。URL 在概念上与用于组织为网站提供动力的系统的文件/目录结构不同（阅读：根本不相关）。

URL“定位”的“资源”不是包含显示它的代码的 .php 或 .asp 文件。

以stackoverflow为例，这个问题的URL是`/questions/322944/uql-etiquette`，里面没有任何东西可以用来“猜测”底层框架/系统。在这种情况下，资源是问题及其所有答案，以及评论、投票、编辑和各种其他内容。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-11-27T04:45:23.127

无论您的 URL 以什么结尾，`.php`都很好，而且相当普遍。如今，人们唯一关心的就是 URL 是否适合搜索引擎优化，但这是一个全新的问题。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-11-27T04:46:43.687

*真正的程序员*使用像 /noun/verb/id/ 这样的 URL 并且根本不显示文件扩展名：p

我个人使用 Apache 的 mod-rewrite。

（稍微不那么诙谐的注释）值得一提的是，特别是对于包含，您应该**确保**您的实际文件具有扩展名 .php。我见过不止一个站点可以在浏览器中查看编程逻辑，因为开发人员结束了他们的文件 .inc（或在此处插入选择的非自动解析扩展名）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-11-27T09:10:31.237

就 url 礼仪而言——我真的不认为涉及礼仪；但是，如果您有成熟的用户访问您的网站，他们对平台和技术有强烈的看法，那么使用 .php 或 .aspx 扩展名可能会让用户望而却步——也许是下意识的。

如果您使用 apache，通过更改 httpd.conf 文件将 .php 读取为 .py 是相当容易的，反之亦然。我目前的做法是使用 .html 扩展名（或根本不使用扩展名）并将所有文件视为 .php。

无论您决定什么，请确保您永远不会破坏现有的网址。即使您保留 .php 作为扩展名并决定稍后更改技术，也可以实现这一点。

# java - 需要抽象类和接口？

> ID：322945
> 
> 赞同：15
> 
> 时间：2008-11-27T04:42:39.310
> 
> 标签：java, interface, abstract-class

接口是一个 100% 的抽象类，因此我们可以使用接口进行高效编程。是否存在抽象类比接口更好的情况？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2008-11-27T04:47:23.483

当您确实打算创建一个具体类时使用抽象类，但要确保所有子类中有一些**共同的状态**或某些操作的可能的**共同实现**。

接口不能包含任何一个。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2008-11-27T06:20:55.697

是的，抽象类和接口都有一席之地。

让我们来看一个具体的例子。我们将研究如何从抽象中创建一个`CheckingAccount`和看看我们如何使用一个接口来区分这两种类型的帐户。`SavingsAccount``AbstractBankAccount`

首先，这是一个抽象类`AbstractBankAccount`：

```
abstract class AbstractBankAccount
{
    int balance;
    public abstract void deposit(int amount);
    public abstract void withdraw(int amount);
} 
```

我们有帐户余额`balance`和两个方法`deposit`，`withdraw`必须由子类实现。

正如我们所见，一个**抽象类声明了**应该如何定义银行账户的结构。正如@Uri 在他的回复中提到的那样，这个抽象类有一个*状态*，即`balance`字段。这对于接口是不可能的。

现在，让我们`AbstractBankAccount`创建一个子类`CheckingAccount`

```
class CheckingAccount extends AbstractBankAccount
{
    public void deposit(int amount)
    {
        balance += amount;
    }

    public void withdraw(int amount)
    {
        balance -= amount;
    }
} 
```

在这个子类`CheckingAccount`中，我们实现了两个抽象类——这里没什么有趣的。

现在，我们如何实施`SavingsAccount`？它与 a 的不同之处`CheckingAccount`在于它会获得兴趣。使用该方法可以增加利息`deposit`，但话又说回来，并不是客户自己存入利息。因此，如果我们有另一种将钱存入账户的方法，特别是为了利息，比如一种`accrueInterest`方法，可能会更清楚。

我们可以直接实现 in 中的方法`SavingsAccount`，但是将来可能会有更多可以产生利息的银行账户类型，所以我们可能想要制作一个`InterestBearing`具有该`accrueInterest`方法的接口：

```
interface InterestBearing
{
    public void accrueInterest(int amount);
} 
```

所以，我们现在可以`SavingsAccount`通过实现`InterestBearing`接口来创建一个可以引起兴趣的类：

```
class SavingsAccount extends AbstractBankAccount implements InterestBearing
{
    public void deposit(int amount)
    {
        balance += amount;
    }

    public void withdraw(int amount)
    {
        balance -= amount;
    }

    public void accrueInterest(int amount)
    {
        balance += amount;
    }
} 
```

现在，如果我们想创建另一种类型的账户，比如 a `PremiumSavingsAccount`，我们可以创建一个 的子类`AbstractBankAccount`并实现`InterestBearing`接口来创建另一个计息账户。

该`InterestBearing`接口可以看作是为不同的类**添加了一个共同的特性。**当支票账户不产生任何利息时，拥有处理支票账户利息的功能是没有意义的。

因此，确实存在抽象类和接口在一种情况下共存和协同工作的地方。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2008-11-27T05:31:35.733

抽象类 v/s 接口是一个让 Java 新手和想要深入挖掘的人产生很多好奇心/兴趣/困惑的话题。

[本文](http://www.javaworld.com/javaworld/javaqa/2001-04/03-qa-0420-abstract.html)提供了有关该主题的详细说明。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-11-27T14:05:23.590

您可能更喜欢无实现的抽象类而不是接口的原因有几个：

*   某些不可能的强制转换和 instanceof 操作可以在编译时被捕获。
*   您确实可以选择在以后的版本中添加具体方法。
*   多年前曾经有显着的性能优势。
*   从高度模糊的安全角度来看，您无法通过创建预先存在的类和抽象类的子类来获得预先存在的类来实现方法。

但另一方面，interface Java 关键字允许更清晰的源代码。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-11-27T11:37:11.797

一般来说，接口描述了你的代码应该使用的公共 API，而抽象基类最好作为实现细节保留，可以保留公共代码或状态，以减少任何实现类中的重复。

通过在您的 API 中使用接口，人们（包括您）可以更轻松地针对您的类编写测试代码，因为您可以使用不依赖于任何外部资源或表现出显式类型的测试类。糟糕但难以模拟现实生活中的行为。

所以java提供了List接口和AbstractList抽象基类来“最小化实现”接口的工作量……

# c# - 在事件上从Repeater检索兄弟控件

> ID：322953
> 
> 赞同：1
> 
> 时间：2008-11-27T04:47:55.103
> 
> 标签：c#, repeater

我在转发器控件上有一个 DropDownList 以及一个按钮。

当我想启用该按钮时，该按钮被禁用，直到在 DropDownList 上选择了一个有效项目。不幸的是，我似乎无法做到这一点。

通过以下方式找到中继器：（.As() 方法是 (object as T) 的扩展方法，只是使转换更容易）

```
sender.As<Control>().NamingContainer.Parent.As<Repeater>() 
```

但是，我返回的中继器对我没有帮助，因为 FindControl(string name) 函数没有返回任何内容 - 并且在监视窗口中没有显示任何有用的信息。

那么，如何从转发器上另一个项目的事件（在这种情况下为 DropDown_SelectedIndexChanged）获得转发器上的同级控件（在这种情况下为 ImageButton）？

**编辑**

我终于解决了

```
sender.As<ImageButton>().NamingContainer.As<RepeaterItem>().FindControl("ControlName") 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-11-27T10:00:15.567

我想我有你的问题的答案：

1.-我使用下拉列表和按钮创建一个中继器来进行测试：

```
 <asp:Repeater ID="rp" runat="server">
   <ItemTemplate>
        <asp:DropDownList ID="DropDownList1" AutoPostBack="true" runat="server" OnSelectedIndexChanged="DropDownList1_SelectedIndexChanged">
        <asp:ListItem>1</asp:ListItem>
        <asp:ListItem>2</asp:ListItem>
        <asp:ListItem>3</asp:ListItem>
        <asp:ListItem>4</asp:ListItem>
        <asp:ListItem>5</asp:ListItem>
        <asp:ListItem>6</asp:ListItem>

        </asp:DropDownList>
        <asp:ImageButton ID="Button1" runat="server" Enabled="False" />
        </ItemTemplate>
        </asp:Repeater> 
```

我对中继器进行数据绑定。

2.-我创建方法 DropDownList1_SelectedIndexChanged：

```
protected void DropDownList1_SelectedIndexChanged(object sender, EventArgs e)
    {
        DropDownList control = (DropDownList)sender;

        RepeaterItem rpItem = control.NamingContainer as RepeaterItem;
        if (rpItem != null)
        {
            ImageButton btn = ((ImageButton)rpItem.FindControl("Button1"));
            btn.Enabled = true;

        }

    } 
```

这样做的方法是询问控件，谁是它的父级，也就是说，RepeaterItem，或者你可以使用 NamingContainer（正如我最后写的那样），在那里你可以询问里面的任何控件。

# c# - 使用 ASP.Net 使用 Twitter 搜索提要的简单方法

> ID：322959
> 
> 赞同：2
> 
> 时间：2008-11-27T04:53:49.693
> 
> 标签：c#, asp.net, twitter, atom-feed

任何人都知道使用 ASP.Net 使用 search.twitter.com 提要的简单方法吗？我尝试使用 RSSToolKit，但它没有提供任何用于解析提要中的标签和其他标签的东西。

例如：我想解析这个提要：[http](http://search.twitter.com/search.atom?q=c%23) ://search.twitter.com/search.atom?q=c%23并让它出现在页面上，就像它在 twitter 搜索结果中一样（链接和所有） .

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-11-27T05:13:42.073

根据您喜欢哪种锤子，您可以使用：

*   XSL 转换，如果您了解 XSL，则很容易，如果您从未使用过，则很痛苦

*   将其加载到 XmlDocument 或 XPathDocument 中，然后迭代所需的节点

*   将其放入 XmlDataSource 中，然后将其绑定到中继器

还有许多其他选择，它们只是我喜欢的一些锤子

# c# - 是否有一种对象，我可以将 Buttons 和 MenuItem 对象都投射到该对象上以访问它们的 Tag 属性？

> ID：322971
> 
> 赞同：1
> 
> 时间：2008-11-27T05:05:22.290
> 
> 标签：c#, .net, casting

我想将 MenuItem 对象和 Button 控件对象都转换为我可以引用其“Tag”属性的对象类型。

有这样的对象类型吗？

例如

```
void itemClick(object sender, EventArgs e)
{
    Control c = (Control)sender;
    MethodInvoker method = new MethodInvoker(c.Tag.ToString(), "Execute");
    method.Invoke();
} 
```

除了这失败 - “无法将对象类型'System.Windows.Forms.MenuItem'转换为'System.Windows.Forms.Control'

在这个例子中什么可以代替 Control？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-11-27T05:35:10.920

我在没有 IDE 的情况下写这个。

```
 object myControlOrMenu = sender as MenuItem ?? sender as Button;
if (myControlOrMenu == null)
// neither of button or menuitem 

```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-11-27T05:43:01.933

使用“as”运算符。

 `````
object tag;
Button button;
MenuItem menuItem = sender as MenuItem;
if (menuItem  != null)
{
    tag = menuItem.Tag;
}
else if( (button = sender as Button) != null )
{
    tag = button.Tag;
} 
else 
{
    //not button nor MenuItem 
} 
````  `* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-11-27T05:31:23.613

MenuItem 和 Button 的继承路径不同，没有共享/继承的 Tag 属性。

MenuItem 继承自 Menu ，它声明了一个 Tag 属性，Button 继承自 Control ，它也实现了一个 Tag 属性。您应该能够将 MenuItem 和 Button 都转换为 Component，但这对您没有帮助，因为 Tag 属性是在我提到的派生类（菜单和控件）中声明的。

在这种特定情况下，您可能需要使用反射而不是继承。或者想出B计划

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-11-27T05:15:49.667

控制就是您要寻找的。

# windows-mobile - 挂钩 WM6 声音

> ID：322988
> 
> 赞同：0
> 
> 时间：2008-11-27T05:21:10.497
> 
> 标签：windows-mobile, audio, hook

如何连接到窗口移动声音（驱动程序？）并在将数据传递到扬声器时读取数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2008-12-14T02:46:54.533

虽然创建一个新的 wavedev 音频驱动程序可能会做你想做的事（它不是 100% 清楚你想如何实现你的目标）你可能追求的是[Mixer API](http://msdn.microsoft.com/en-us/library/ms705739.aspx)。您可以查看[Andy Raffman 关于音频混音器术语的博客](http://blogs.msdn.com/medmedia/archive/2007/01/12/what-do-you-mean-by-mixer.aspx)，了解您的需求在哪里。

DirectSound 曾经是一个选项（4.2 和更早版本），但[在 5.0 中被删除](http://msdn.microsoft.com/en-us/library/aa446919.aspx)。

# visual-studio - 解决方案中的 Visual Studio 项目引用

> ID：322992
> 
> 赞同：7
> 
> 时间：2008-11-27T05:28:40.043
> 
> 标签：visual-studio, compilation

在解决方案中引用项目的最佳方法是什么。

我通过 Add Reference --> Projects 添加了引用。但是，它链接到发布 DLL 或调试 dll。

我想在引用中有项目本身，当我们编译项目时，必须编译所有引用项目（通过依赖项）。

这个怎么做？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2008-11-27T05:32:03.767

如果要引用项目本身，而不是 DLL/程序集（从“添加引用”对话框中的“浏览”选项卡），则应将要引用的项目添加到解决方案（添加...现有项目）。一旦它在解决方案中，“添加引用”对话框将允许您从解决方案中的另一个项目引用解决方案中的一个项目（通过“添加引用”对话框中的“项目”选项卡）。``~~****************