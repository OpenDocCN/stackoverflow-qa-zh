# StackOverflow 问答 10646000-10646999

# ios - 如何垂直实现自动调整 UITextView？

> ID：10646001
> 
> 赞同：1
> 
> 时间：2012-05-18T02:30:17.813
> 
> 标签：ios, uitextview, textfield, autoresize

先看截图： ![在此处输入图像描述](../Images/c2d28551852acd7b577fb1e39e697d13.png)

第二次按下返回键，截图供大家参考： ![在此处输入图像描述](../Images/834ea2f7d04a82b0c455ff741f256e78.png)

![在此处输入图像描述](../Images/a768633815efde448542c549fd47c625.png)

四次点击后

返回

按钮，文本字段的高度不会再高了。

现在问题来了：如何实现文本字段的功能？那么文本字段后面的背景图像呢，也应该自动调整大小吗？如果有任何解决方案，请告诉我！非常感谢 - -

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T05:39:47.330

使其不是文本字段，跟踪代表的`UITextView`文本更改。`shouldChangeTextInRange``textView`

在此方法中计算行数（textView.contentSize.height/textView.font.lineHeight），将其与之前的值进行比较以决定是否需要继续或仅返回。如果更改了行数，请检查是否`textView`已经显示最大行数（在图像上必须为 3），并根据结果更改`textView`，它的 superview 和一个按钮框架（您也可以使其动画很容易）并可能使用 . 将文本滚动到更改区域`scrollRangeToVisible`。

# google-apps-script - 谷歌应用脚 本 UrlFetchApp.fetch 限制？

> ID：10646003
> 
> 赞同：8
> 
> 时间：2012-05-18T02:30:34.430
> 
> 标签：google-apps-script

我有一个简单的脚本，可以提取大约 30,000 个 JSON 字符。

`SyntaxError: Unexpected token: F (line 12)`当我尝试用`JSON.parse()`or解析它时，我得到了`Utilities.jsonParse();`

```
function refresh() {

  var ss = SpreadsheetApp.getActiveSpreadsheet();
  var sheet = ss.getSheets()[0];
  sheet.clear();

  var text = UrlFetchApp.fetch("http://blablah/json");

  Logger.log(text.getContentText());

  //error SyntaxError: Unexpected token: F (line 12)
  json = JSON.parse(text);
) 
```

记录器只显示大约 59 行 JSON，但有人告诉我记录器有空间限制 - 但我不太确定就是这样。

在我自己的服务器上运行，JSON.parse 可以很好地解析数据，jQuery get() 也是如此。

所以我在想 UrlFetchApp.fetch() 就是无法获取长文件？

很难接受，我没有找到关于它的文档:(

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-18T03:32:09.377

[您可以在新的 Apps 脚本仪表板上](https://docs.google.com/macros/dashboard)查看 UrlFetch 和其他服务限制。根据我的经验，Logger.log 对单个日志的限制比 UrlFetch 更严格，可能 UrlFetch 做得很好，Logger.log 没有显示它，你遇到了其他问题。

尝试将`getContentText`结果放在其他地方，例如电子表格单元格。或者拆分它并在 for 循环中调用 logger log。

您可能面临的一个可能错误（除了配额限制）是字符编码，`getContentText`有一个可选参数，您可以在其中通知页面的编码，您检查了吗？

# usb - Microchip PIC (MPLAB/C18) 的 USB HID 代码中的链接器错误

> ID：10646008
> 
> 赞同：2
> 
> 时间：2012-05-18T02:31:37.737
> 
> 标签：usb, hid, microchip, mplab, c18

我正在尝试为基本的 USB HID 功能编译一些代码。我正在使用带有 MPLAB 8.43 和 Microchip C18 编译器的 PIC18F14K50。

我正在使用 Microchip 网站上的一些标准文件。[这是我的 C 文件](http://pastebin.com/YmVV1jrB)，[这是我的头文件](http://pastebin.com/bxzS33Xr)。

构建时出现以下错误：

> 执行："C:\Program Files\Microchip\mplabc18\v3.40\bin\mplink.exe" /p18F14K50 /l"C:\MCC18\lib" /k"C:\MCC18\bin\LKR" "usb_function_hid. o" "usb_device.o" "enumeration.o" "usb_descriptors.o" /u_CRUNTIME /u_DEBUG /z__MPLAB_BUILD=1 /z__MPLAB_DEBUG=1 /o"C:\LPCUSBDK_Labs\Lab1_files\output\Project Lab 1.cof" /M" C:\LPCUSBDK_Labs\Lab1_files\output\Project Lab 1.map" /W
> 
> MPLINK 4.40，链接器
> 
> 设备数据库版本 1.3
> 
> 版权所有 (c) 1998-2011 Microchip Technology Inc.
> 
> 错误 - 在文件“./usb_function_hid.o”中找不到符号“HIDDescriptor1”的定义。
> 
> 错误：1
> 
> 链接步骤失败。

该`HIDDescriptor1`符号出现在代码中的 2 个位置：C 文件的 PasteBin 行 173 和头文件的 PasteBin 行 356。

此代码直接来自 Microchip。我不确定为什么它不会链接。我认为要么它是为另一个版本的编译器设计的，要么我缺少一些外部依赖项，或者我缺少一些编译器/链接器开关。

关于我需要做什么来构建它的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T16:24:59.500

在头文件中，您已在`HIDDescriptor1`外部定义。因此，当您编译 usb_function_hid.c 时，它会正常编译，直到您尝试链接它。然后，它找不到那个符号。

看来您必须`HIDDescriptor1`在自己的代码中定义。否则它位于您下载的源代码中的其他位置，您也需要将其链接。但它肯定没有在 .c 文件中定义。

编辑：

I downloaded and installed the [Microchip Application Libraries](http://www.microchip.com/stellent/idcplg?IdcService=SS_GET_PAGE&nodeId=2680&dDocName=en547784). There is no longer any mention of HIDDescriptor1 in any of the source. However, `usb_function_hid.h` details another structure that I assume is a replacement:

```
//USB HID Descriptor header as detailed in section 
//"6.2.1 HID Descriptor" of the HID class definition specification
typedef struct _USB_HID_DSC
{
    BYTE bLength;           //offset 0 
    BYTE bDescriptorType;           //offset 1
    WORD bcdHID;            //offset 2
    BYTE bCountryCode;      //offset 4
    BYTE bNumDsc;           //offset 5

    //USB_HID_DSC_HEADER hid_dsc_header[HID_NUM_OF_DSC];
    /* HID_NUM_OF_DSC is defined in usbcfg.h */

} USB_HID_DSC; 
```

Browsing the example projects, there are many many HID projects, all which build just fine with the C18 compiler. I recommend downloading this library again; you may have an incomplete or older library. The highlighted project below is for the PIC18F14K50.

![Microchip Application Libraries\USB\Device - HID - Keyboard\Firmware](../Images/e0337c306ab01928e6f84519c4504753.png)

# vbscript - Wix 自定义操作获取当前运行的 msi 文件名

> ID：10646009
> 
> 赞同：0
> 
> 时间：2012-05-18T02:31:42.930
> 
> 标签：vbscript, wix, windows-installer, custom-action

我正在尝试使用 Wix 创建此安装程序。在 InstallFinalize 之前或之后，我需要获取 msi 文件名，然后将该文件名写入安装目录中的配置文件。这有可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T02:51:53.717

Windows Installer 属性[OriginalDatabase](http://msdn.microsoft.com/en-us/library/windows/desktop/aa370562%28v=vs.85%29.aspx)具有 MSI 数据库的路径和名称。您必须从路径中解析出名称。WiX 的 util 扩展具有用于[配置](http://wix.sourceforge.net/manual-wix3/util_xsd_xmlconfig.htm)XML 文件的自定义操作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-18T06:09:07.783

您可以像这样访问 VBS 中的属性：

```
Dim propValue = Session.Property("OriginalDatabase") 
```

此外，非常重要的是，确保自定义操作是即时的。您不能从延迟的自定义操作中执行上述操作。

但是，我推荐使用[Win32 DLL](http://www.codeproject.com/Articles/1747/MSI-Custom-Action-DLL)进行自定义操作。在其中，您可以使用[Windows API](http://msdn.microsoft.com/en-us/library/windows/desktop/aa370134%28v=vs.85%29.aspx)来读取属性值。

# python - Pyschools 主题 13 Q 9 csv.writer

> ID：10646012
> 
> 赞同：1
> 
> 时间：2012-05-18T02:32:00.157
> 
> 标签：python, csv

我为此练习提出了两种不同的功能。一种使用 csv 类编写器，一种使用 DictWriter 类。两者都通过了列出的预期结果，但是他们没有通过私有测试用例？

```
import csv
def csvWriter(filename, records): 
    header = []
    for i in records:
        if len(i) < 1:
          records.remove(i)
    for i in records:
        for v in i:
          if v not in header:
            header.append(v)
    for i in records:
        if len(i) == 0:
            return '0 records processed.'
    test=open(filename,'w') 
    wr = csv.writer(test,header,lineterminator='\n')
    wr.writerow(header)
    for i in records:
        wr.writerow(i.values())
    test.close()
    return '%d records processed.' % len(records) 
```

csvWriter('文件名',[{'a':1,'b':2},{'a':3,'b':4}]

repr(open('filename').read()) ---> 'a,b\n1,2,\na,b\n3,4'**检查**

“通过了 2 条记录。” ---> '2 条记录通过。' **查看**

私人测试用例 ---> 失败？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T19:16:39.763

这个函数在私有测试用例上失败的原因是，可以传递第二个参数并且值将被写入而不被排序。

```
import csv
def csvWriter(filename, records): 
  header = []
  for i in records:
    if len(i) < 1:
      records.remove(i)
  for i in records:
    for v in i:
      if v not in header:
        header.append(v)
  for i in records:
    if len(i) == 0:
      return '0 records processed.'
  test=open(filename,'w') 
  dict_wr = csv.DictWriter(test,header,lineterminator='\n')
  dict_wr.writerow(dict(zip(header,header)))
  for i in records:     
  # Adding in the **sorted** built-in fixed it
    dict_wr.writerow(dict(zip(header,sorted(i.values()))))  
  test.close()
  return '%d records processed.' % len(records) 
```

仍然很粗糙，我们也不应该使用 csv 模块。我将回去改进这一点，并在没有模块的情况下试一试。

有什么建议么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-08-05T20:01:58.833

导入 csv

def csvWriter（文件名，记录）：

```
header = []

f = []
with open(filename, 'w')as new_file:

    csv_writer = csv.writer(new_file,header,lineterminator='\n')

    for line in records:
        if line not in header:
            header.append(sorted(line))
            header.append(sorted(line.values()))
            for x in header:
                if x not in f:
                    f.append(x)
                    csv_writer.writerow(x)
return '%s records processed.' % len(records) 
```

# cocoa - 保存 NSDocument 的最佳实践

> ID：10646013
> 
> 赞同：0
> 
> 时间：2012-05-18T02:32:31.667
> 
> 标签：cocoa, nsdocument

我正在开发一个基本的*hello world*应用程序，它将打开一个**txt**文档，对其进行**编辑**，然后最后**保存**该文档。处理编辑的最佳做法是什么。

我已经通读了 Apple 的文档，但是当我检查`NSError **outError`方法时返回`NO`. 当我注释掉它时 `- (BOOL)writeToURL:(NSURL*)writeURL ofType:(NSString*)type forSaveOperation:(NSSaveOperationType)saveOp originalContentsURL:(NSURL*)origURL error:(NSError**)errorPtr` 会写出文件。

是否有保存文档的最佳实践？下面的实现有问题吗？如果您注释掉对 errorPtr 的检查，则修改文件将写入原始文件。

```
 - (BOOL)writeToURL:(NSURL*)writeURL 
             ofType:(NSString*)type 
   forSaveOperation:(NSSaveOperationType)saveOp 
originalContentsURL:(NSURL*)origURL 
              error:(NSError**)errorPtr {

  if (errorPtr) {

    *errorPtr = [NSError errorWithDomain:NSOSStatusErrorDomain code:unimpErr userInfo:NULL];

    return NO;
  }

    return [[[self.txtView textStorage] string] writeToURL:writeURL atomically:NO encoding:NSUTF8StringEncoding error:errorPtr];
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T06:18:32.757

覆盖`fileWrapperOfType:error:`或`dataOfType:error:`代替。

而且，错误指针是一个输出参数。如果需要并且它不为空，您应该将其设置在您的函数中。

# php - 你能用 case 来指定一个在 MySQL 中使用的连接吗？

> ID：10646018
> 
> 赞同：1
> 
> 时间：2012-05-18T02:33:22.373
> 
> 标签：php, mysql, sql, database

我有一个 usermessages 表，其中存储了站点上两个用户之间发送的所有消息。

每条消息都有一个`sourceUserId`和一个`friendId`，它们是发送者和接收者。

每个用户消息收件箱都列出了所有发送和接收的消息，每条消息都显示了哪个用户发送或接收了该消息。

**问题**

当我们列出发送和接收用户时，有些列是错误的，例如如果当前用户的 userId 是 1

*   发送的消息的 sourceUserId 为 1
*   收到的消息的friendId为1

如果我尝试用一​​个查询完成整个收件箱，那么我目前必须对两者进行两次连接`sourceUserId`，`friendId`因为我无法判断哪个是当前登录的用户。

我已经知道当前登录用户的用户名，所以当只需要一个时，有两个连接似乎不正确？

我想知道是否可以在 mysql 查询中使用某种案例来有效地实现以下目标并减少每次必须查找的数据量..

```
SELECT um.message, UNIX_TIMESTAMP(um.time), um.read, user.username
FROM usermessages um
    CASE 
        WHEN um.friendId = 1
            INNER JOIN user ON um.sourceUserId = user.id
        WHEN um.sourceUserId = 1        
            INNER JOIN user ON um.friendId = user.id
    END
WHERE (um.friendId = 1 OR um.sourceUserId = 1) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T02:43:51.770

您需要改用`CASE`for`ON`子句

```
SELECT um.message, UNIX_TIMESTAMP(um.time), um.read, user.username
FROM usermessages um
INNER JOIN user ON 
    CASE 
        WHEN um.friendId = 1 THEN um.sourceUserId
                             ELSE um.friendId
    END = user.id
WHERE (um.friendId = 1 OR um.sourceUserId = 1) 
```

（或者如果你更喜欢的话，把比较移到`= user.id`里面）`CASE`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T03:13:01.683

另一种方法，而不是使用 case when，以布尔方式执行：

```
SELECT um.message, UNIX_TIMESTAMP(um.time), um.read, user.username
FROM usermessages um
INNER JOIN user ON 
    (um.friendId = 1 AND um.sourceUserId = user.id)
    OR
    um.friendId = user.id
WHERE (um.friendId = 1 OR um.sourceUserId = 1) 
```

# python - Python 记录器未加载格式

> ID：10646019
> 
> 赞同：0
> 
> 时间：2012-05-18T02:33:22.557
> 
> 标签：python, logging

我有以下python代码：

```
import logging
import logging.config
logging.config.fileConfig('a.conf')
logging.debug('aaaa') 
```

使用以下配置文件`a.conf`：

```
[loggers]
keys = root

[handlers]
keys = console

[formatters]
keys = generic

[logger_root]
handlers=console
level=DEBUG

[handler_console]
class = StreamHandler
level = DEBUG
format = generic
args = (sys.stdout,)

[formatter_generic]
format=%(levelname)s: %(name)s - %(message)s 
```

然而，问题是输出`"a.py"`没有`"aaaa"`使用日志名称或日志级别正确格式化。关于为什么这不起作用的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T02:41:41.240

在 [handler_console] 你有“格式=通用”

将此更改为“格式化程序=通用”

这输出：调试：root - aaaa

# iphone - 执行 Segue 后如何让 UIScrollView 记住位置？

> ID：10646020
> 
> 赞同：2
> 
> 时间：2012-05-18T02:33:49.233
> 
> 标签：iphone, ios, uiview, uiscrollview, storyboard

我正在使用具有扩展内容大小的 UIScrollView 并在其中放置了许多对象。它像地图一样滚动。单击 UIScrollView 中的按钮将执行 Segue 并将用户带到另一个场景（嵌入在 UINavigationController 中的另一个 UIView）。在第二个场景中，单击另一个按钮将执行另一个 Segue 以返回原始场景（像地图一样滚动的 UIScrollView）。

一切正常，除了当它返回原始场景时，它会回到默认位置。我如何让它记住原来的位置？想象它是一张地图，通过返回它，它应该显示它离开的地方，用户不需要重新滚动到以前的地方。我怎样才能做到这一点？

我在 iOS 5 上使用 Storyboard。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T02:41:40.500

要返回之前的视图，您不应该使用 Segue。只需使用以下代码行：

```
[self.navigationController popViewControllerAnimated:YES]; 
```

原始视图中的位置应保持原样。通过使用 Segue 推送到另一个视图（无论是前一个视图），您实际上创建了另一个视图控制器实例，如下所示：

```
VC A -> VC B -> VC A 
```

您可以通过在 VC A 和 B 上添加另一个按钮来测试它，并使用上面的代码来验证您的 VC 是否按顺序弹出。您的 VC A 的滚动位置不会被记住，因为创建了一个新的 VC A 实例。如果您使用 segue，第一个 VC A 将永远可达。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T04:43:53.913

首先确定

```
scrollView.delegate=self; 
```

委托方法中的第二个，记住 scrollView.contentOffset.x 作为类变量

```
-(void)scrollViewDidEndDecelerating:(UIScrollView *)scrollView {
    self.offsetX = scrollView.contentOffset.x;
} 
```

三、从导航返回

```
-(void)viewWillAppear:(BOOL)animated{
    CGRect frame=scrollView.frame;
    frame.origin.x=self.offsetX;
    [scrollView scrollRectToVisible:frame animated:NO];
} 
```

或者如果垂直滚动则更改 offsetY

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T02:40:52.307

当您执行转场时，这会将“新”场景推送到您的导航堆栈。如果该场景随后“弹出”（这将是新场景中 UINavigationController 的后退按钮的默认行为），则用户应自动返回到所需内容偏移处的原始视图。如果这没有发生，您可能会意外地推送原始视图控制器的新实例。您不应该执行额外的 segue，而是应该将顶视图控制器从导航堆栈中弹出。也就是说，您可以使用这种相当严厉的方法来确保内容偏移保持不变：

在执行 segue 之前，将属性设置为 scrollView 的 contentOffset 属性的值，例如：

```
-(void)prepareForSegue
{
    [self setScrollViewOffset:self.scrollView.contentOffset];
} 
```

当此视图控制器准备再次出现时，将其设置为滚动视图的 contentOffset：

```
-(void)viewWillAppear
{
  [[self scrollView] setContentOffset:self.scrollViewContentOffset animated:NO];
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T20:50:59.623

为了让 UIScrollView 记住视图控制器转换之间的内容位置 UIScrollView.contentSize 应该在任何转换之前正确设置。

# ruby-on-rails-3 - 如何使用橡胶宝石在 EC2 上设置 queue_classic 后台作业

> ID：10646025
> 
> 赞同：1
> 
> 时间：2012-05-18T02:34:49.180
> 
> 标签：ruby-on-rails-3, amazon-ec2

如何使用gem`queue_classic`在 EC2 上设置后台作业？`rubber`我尝试使用工头导出，但我不确定在哪里运行它（应用程序或网络角色？）。我失败的尝试是使用[http://blog.sosedoff.com/2011/07/24/foreman-capistrano-for-rails-3-applications/](http://blog.sosedoff.com/2011/07/24/foreman-capistrano-for-rails-3-applications/)。

我应该创建一个新实例来运行这些作业吗？（或新角色？）

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T17:36:06.930

弄清楚了。

首先使用 queue_classic rake 任务创建一个 Procfile（参见[http://blog.daviddollar.org/2011/05/06/introducing-foreman.html](http://blog.daviddollar.org/2011/05/06/introducing-foreman.html)）

然后我将工头添加到我的主机（确保您有该环境的 procfile，例如：Procfile.production）

```
# Foreman tasks
namespace :foreman do
  desc 'Export the Procfile to Ubuntu upstart scripts'
  task :export, :roles => :queue do

    run "cd #{release_path} && bundle exec foreman export upstart /etc/init -f ./Procfile.#{Rubber.env} -a #{application} -u #{user} -l #{release_path}/log/foreman"
  end

  desc "Start the application services"
  task :start, :roles => :queue do

    rsudo "start #{application}"
  end

  desc "Stop the application services"

  task :stop, :roles => :queue do
    rsudo "stop #{application}"

  end

  desc "Restart the application services"
  task :restart, :roles => :queue do
    rsudo "stop #{application}; start #{application}"
    #run "sudo start #{application} || sudo restart #{application}"
  end
end
after "deploy:update", "foreman:export"    # Export foreman scripts
before "deploy:restart", "foreman:restart"   # Restart application scripts
after "deploy:stop", "foreman:stop"   # Restart application scripts 
```

# c# - 将 json 数据写入 .js(javascript) 文件？

> ID：10646026
> 
> 赞同：-2
> 
> 时间：2012-05-18T02:35:06.480
> 
> 标签：c#, json

我当前的项目有一个 .js 文件，其中包含硬编码数据。所以我在客户端引用这个文件。当我在客户端需要时，我正在使用这个文件来获取数据。但我的任务是动态生成这个 .js 文件。我从数据库中获取 json 格式的值。所以我需要一种将这个 json 格式的数据写入 .js 文件的方法，这样我就可以在客户端使用这些写入的数据。

JS中需要的格式：

```
var list = new Array();
list["1000"] = "TestEvent1"; 
```

实际 Json 格式：

```
{
    "__metadata": {
        "type": "event_Result"
    }, "event_id": 1000, "event_GROUPId": 17, "event_name": "TestEvent1", 
} 
```

请帮我。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T02:43:18.130

您可以拥有一个`ashx`输出 javascript 内容的通用处理程序。将您的输出内容类型设置为“text-javascript”。

它不必有一个文件扩展名`.js`，内容类型和它的引用方式是最重要的

`<script type="text/javascript" src="myJavascript.ashx"></script>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T03:26:45.763

为什么不简单地使用 json 编码的数据，将其保存到变量中或覆盖保存初始数据的变量？

# cdi - CDI 从 XML 注入字符串值/值的部署时间规范

> ID：10646027
> 
> 赞同：3
> 
> 时间：2012-05-18T02:35:12.137
> 
> 标签：cdi, jboss-weld

在 Spring 中，可以在应用程序上下文 XML 文件中定义字符串值（例如：服务器名称、用户名、密码等）。这些可以根据部署进行修改（例如：测试、生产等）。我可以在 CDI 中做同样的事情吗？如果不是，那么处理值的部署时间规范的公认模式是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T06:04:46.290

You would need to create a portable extension to do that, there isn't anything out of the box for it.

# asp.net-mvc-3 - MVC Code First C# 检索数据

> ID：10646028
> 
> 赞同：1
> 
> 时间：2012-05-18T02:35:20.717
> 
> 标签：asp.net-mvc-3, c#-4.0

好的，所以我只需要关于如何设计用于从数据库中检索数据的类的良好指导页面。我可以找到有关如何获取现有数据库并从中创建实体框架的信息，但我正在尝试先编写代码。

我能够插入数据（尽管我不是 100% 确定它是如何工作的）我似乎无法弄清楚如何使用创建的类（模型）从数据库中提取数据并在 Razor 上显示该数据页。

我对学习和学习没有任何问题，但我很难找到好的信息，这些信息将真正完成这个过程。

再一次，我不是在寻找实体框架。

感谢您提供的所有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T02:49:09.610

互联网上有很多教程。这是一个从表中提取数据并显示在视图中的小示例。

假设您有一个像这样的名为 User 的模型类

```
public class User
{
  public int ID { set;get;}
  public string FirstName { set;get;}
} 
```

将这样的属性添加到您`DataContext`的每个模型实体的类中。该属性的类型为`DbSet`。

```
public class YourDataContext: DbContext
{
  public DbSet<User> Users {set;get;}  
} 
```

然后在您的控制器操作方法中，您可以创建 DBContext 类的实例并访问其`Users`属性。把它传递给我们的观点。

```
public class UserController : Controller
{
  public ActionResult Index()
  {
    YourDBContext db=new YourDBContext();
    var users=db.Users.ToList();
    return View(users)
  }
} 
```

在文件夹下有一个这样的 index.cshtml 视图`Views/User`。

```
@model IEnumerable User

@foreach(var user in Model)
{
   <p>@user.FirstName</p>
} 
```

# vb.net - 在没有有效活动文档的情况下以其他格式保存 Word 文档

> ID：10646029
> 
> 赞同：3
> 
> 时间：2012-05-18T02:35:39.757
> 
> 标签：vb.net

VB.net 中有没有一种方法可以将 Word 文档另存为不同的格式（即 Me.Application.ActiveDocument.SaveAs）而无需切换到它？例如，如果当前文档是未保存的，我想将该文档的副本另存为 HTML，但仍保持未保存的文档处于活动状态。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T09:02:34.027

Copy the current doc variable to another variable and save it.

```
 Try
        Dim oWord As Word.Application
        Dim oDoc As Word.Document

        'Start Word and open the document template.
        oWord = CreateObject("Word.Application")
        oWord.Visible = True
        oDoc = oWord.Documents.Add
        oDoc.PageSetup.TopMargin = oWord.CentimetersToPoints(5.08)
        oDoc.PageSetup.LeftMargin = oWord.CentimetersToPoints(4.57)
            oDoc.PageSetup.RightMargin = oWord.CentimetersToPoints(1.27)
            oDoc.PageSetup.BottomMargin = oWord.CentimetersToPoints(3.81)
            oDoc.PageSetup.PageHeight = oWord.CentimetersToPoints(29.7)
            oDoc.PageSetup.PageWidth = oWord.CentimetersToPoints(21)

            'TIll Above your entire odoc is formatted
            'From below I will save it to my own code

            Dim newdoc As Word.Document
            newdoc = oDoc
            newdoc.SaveAs2("d:\file.pdf", Word.WdSaveFormat.wdFormatPDF)

            'All done. Close this form.
            'BSPGlobals.DataBase.Contact.ExitApp()
            MessageBox.Show("Print to Doc Done.")
        Catch ex As Exception
            MessageBox.Show("Error at Printing the bill." & vbCrLf & ex.Message)
        End Try 
```

# ruby-on-rails-3 - 如何将 resque 与橡胶宝石一起使用

> ID：10646031
> 
> 赞同：2
> 
> 时间：2012-05-18T02:36:09.710
> 
> 标签：ruby-on-rails-3, amazon-ec2

我看到橡胶有一束`resque`宝石。如果我对 resque 进行硫化，我需要运行什么命令来创建一个具有 resque_worker、Web 界面和 redis 数据库的实例？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T13:57:46.583

我在橡胶邮件列表中回答了这个问题： [https ://groups.google.com/d/msg/rubber-ec2/qGruh0yCzt0/xtgODGnJxfQJ](https://groups.google.com/d/msg/rubber-ec2/qGruh0yCzt0/xtgODGnJxfQJ)

# ios - 为什么我的应用程序因为“多任务应用程序只能使用后台”而被拒绝？

> ID：10646034
> 
> 赞同：0
> 
> 时间：2012-05-18T02:36:37.047
> 
> 标签：ios, iphone, appstore-approval

我通过设置闹钟和观看视频在后台测试了我的应用程序，当我观看视频时，我的闹钟正确响起。

即使我从后台删除我的应用程序，警报也会响起。现在我想知道我是否正确理解了Apple的回复。任何人都可以解码回复吗？

> 我们发现您的应用使用后台模式，但不包含需要该模式持续运行的功能。此行为不符合 App Store 审核指南。
> 
> 我们注意到您的应用在 Info.plist 的 UIBackgroundModes 键中声明支持音频，但当应用在后台时不会播放任何可听内容。虽然您的意图可能是提供此功能，但在审核时，我们无法为您的应用播放背景音频。
> 
> 如 iOS 应用程序编程指南中所述：
> 
> “此密钥旨在供在后台向用户提供可听内容的应用程序使用，例如音乐播放器或流音频应用程序。”
> 
> 因此，在应用程序处于后台时向用户提供可听内容或从 UIBackgroundModes 键中删除“音频”设置是合适的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-18T02:38:52.620

你有什么不明白的？很明显，您提供了“音频”的 UIBackgroundMode，但没有在后台播放任何音频。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-17T09:02:41.743

您可以从**功能**启用**背景模式**，并在那里检查**音频**和**背景提取**。然后您的应用程序就可以从后台访问所有音频流。

# video - 如何获取 mp4 文件的持续时间（h.264 标准）

> ID：10646036
> 
> 赞同：2
> 
> 时间：2012-05-18T02:37:19.037
> 
> 标签：video, h.264, mp4, mpeg

我想得到一个mp4文件的一些信息，我尝试使用Shell32，但是它不支持mp4格式，我在网站上找到了一些dll，但它们都不是COM组件，然后我尝试使用IBMToolkitForMpeg4SDK.jar ，然后遇到一些问题：

```
***Exception in thread "main" java.net.MalformedURLException: Unrecognized extension of file: e:\1.mpeg
at I4g.d(Unknown Source)
at I4g.a(Unknown Source)
at I4i.a(Unknown Source)
at I4b.a(Unknown Source)
at I4b.open(Unknown Source)
at AVgenSample.getMp4Duration(AVgenSample.java:48)
at AVgenSample.main(AVgenSample.java:36)*** 
```

所以我想获取mp4文件的信息，任何人有任何方法，请帮助！Thsnks all！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-21T11:32:09.010

如果您的意思是 ISO 文件 -[这个 java 库](https://github.com/sannies/mp4parser)可能会有所帮助。

使用它导航到`moov->trak->mdia->mdhd`

或 Elecard 视频格式分析器[http://www.elecard.com/en/download/products.html#development](http://www.elecard.com/en/download/products.html#development)

# android - android - 如何将画廊的小内容居中放在中间

> ID：10646037
> 
> 赞同：0
> 
> 时间：2012-05-18T02:37:38.347
> 
> 标签：android, android-widget

天！

如果它们的宽度小于画廊的宽度，我需要将内容（画廊项目）居中。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T03:20:10.313

如果我正确理解您的问题

像这样的东西可能会起作用：

```
gallery.setSelection((int)(gallery.getCount() /2)); 
```

如果您在 onCreate 或其他地方调用它，它应该将您的画廊尽可能靠近中间，因为它可以考虑到它有多少孩子。

# web-crawler - 避免或阻止所有负载平衡的网站被抓取

> ID：10646046
> 
> 赞同：0
> 
> 时间：2012-05-18T02:39:38.760
> 
> 标签：web-crawler, umbraco, load-balancing, robots.txt

我们在负载平衡的环境中有一个 Umbraco 站点，我们需要确保只抓取实际的 URL，而不是不同的生产 URL。

我们只想`example.com`在负载均衡器在`production1.example.com`和`production2.example.com`不在时被索引。

我是否将这些 URL 的禁止规则添加到 robots.txt，或者将元`nofollow`标记添加到头部？还是有另一种方法可以让爬虫不索引负载平衡 URL？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T06:39:00.003

最佳解决方案：不要公开特定节点的 URL（我们通常使用本地 ip/port 来检查特定节点上的站点）。

由于您拥有这些域，因此您可以根据域提供不同的 robots.txt（使用 URL 重写）。

# jquery - JQuery .click - 排除 div 内的特定元素

> ID：10646047
> 
> 赞同：32
> 
> 时间：2012-05-18T02:39:39.453
> 
> 标签：jquery

如果用户在 div 内单击，我希望 .click 什么都不做`<p>text</p>`，对于我希望 div .click 工作的所有其他内容。

**HTML：**

```
<div>
    <span>yes</span>
    <p>text</p>
</div> 
```

**查询：**

```
<script>
$(document).ready(function() {

    $("div").click(function() {

        alert("woohoo!");

    }); 

});
</script> 
```

* * *

## 回答 #1

> 赞同：97
> 
> 时间：2012-05-18T02:41:29.723

```
 $("div").click(function(e) {
        if($(e.target).is('p')){
            e.preventDefault();
            return;
        }
        alert("woohoo!");
    }); 
```

检查点击的目标。这样你就不需要绑定另一个事件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-18T03:15:45.103

```
<script>
$( document ).ready(function() {
    $( "div :not(p)" ).click(function( event ) {
        alert( "woohoo!" );
    }); 
});
</script> 
```

这意味着您不关心文本节点作为`<div>`容器的子节点。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-05-18T02:41:55.720

```
$("div > span").click(function() {

    alert("woohoo!");

}); 
```

但是你最好为你的 html 元素提供 id。

# java - 为调用存储过程的 doGet() 引发异常时出现 Java Servlet 错误

> ID：10646049
> 
> 赞同：0
> 
> 时间：2012-05-18T02:39:55.527
> 
> 标签：java, database, servlets

任何人都知道如何解决以下错误

`unreported exception javax.naming.NamingException; must be caught or declared to be thrown Context context = new InitialContext();`

`Auth.java:46: unreported exception java.sql.SQLException; must be caught or declared to be thrown conn = ds.getConnection();`

我从这个 java servlet 得到什么？

```
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import javax.servlet.ServletConfig;
import javax.servlet.ServletException;
import java.io.IOException;
import java.io.PrintWriter;
import java.sql.*;
import javax.sql.DataSource;
import javax.naming.Context;
import javax.naming.InitialContext;
import javax.naming.NamingException;
import java.sql.SQLException;
import oracle.jdbc.OracleTypes;

public class ABC extends HttpServlet {

  @Override
  public void init(ServletConfig config) throws ServletException {
    super.init(config);
  }

  protected void doGet(HttpServletRequest req, HttpServletResponse res)
    throws ServletException, IOException {

    Connection conn;
    CallableStatement cs;

    String xy = req.getParameter("xy");
    String zz = req.getParameter("zz");

    // call stored procedure
    Context context = new InitialContext();
    DataSource ds = (DataSource)context.lookup("jdbc/mypool");
    conn = ds.getConnection();
    cs = conn.prepareCall( "{call mysproc (?,?)}" );
    cs.setString(1, xy);
    cs.setString(2, zz);
    cs.execute();

    if ( conn != null ) {
      try { conn.close(); } catch ( Exception ex ) {}
      conn = null;
    }

    // Set the content type (MIME Type) of the response.
    res.setContentType("text/html");

    // Write the HTML to the response
    PrintWriter out = res.getWriter();
    out.println("<html>");
    out.println("<head>");
    out.println("<title>my title</title>");
    out.println("</head>");
    out.println("<body>");
    out.println("<h2>my header</h2>");
    out.println("my body text<br/>");
    out.println("</body>);
    out.println("</html>");
    out.flush();
    out.close();
  }

  public void destroy() {  
  }         
} 
```

如果我尝试更换

```
 protected void doGet(HttpServletRequest req, HttpServletResponse res)
    throws ServletException, IOException { 
```

和

```
 protected void doGet(HttpServletRequest req, HttpServletResponse res)
    throws Exception { 
```

或者

```
 protected void doGet(HttpServletRequest req, HttpServletResponse res)
    throws ServletException, IOException, SQLException, NamingException { 
```

它们都产生错误，说我无法覆盖 doGet，因为被覆盖的方法不会抛出异常、SQLException 或 NamingException。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T02:44:45.653

[`new InitialContext()`](http://docs.oracle.com/javase/6/docs/api/javax/naming/InitialContext.html#constructor_detail)抛出一个经过检查的异常`NamingException`，它应该被捕获，或者您使用此代码的方法应该有一个与之关联的 throws 子句。

由于您正在扩展[`HttpServlet`](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServlet.html)和覆盖[`doGet`](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServlet.html#doGet%28javax.servlet.http.HttpServletRequest,%20javax.servlet.http.HttpServletResponse%29)方法，因此您不能附加新的已检查异常，因为它违反了 Java 中的覆盖法则。

而是将代码放在 try catch 块和 catch`NamingException`中。

所以而不是

```
Context context = new InitialContext(); 
```

将其替换为

```
Context context = null;
try {
    context = new InitialContext();
} catch(NamingException exp){
    //Handle Exception
} 
```

类似地[`dataSource.getConnection`](http://docs.oracle.com/javase/6/docs/api/javax/sql/DataSource.html#getConnection%28%29)抛出一个应该被捕获或重新抛出的检查异常`SQLException`，你不能再一次向你的 doGet 方法添加新的检查异常，因为覆盖规则你必须明确地捕获它。

```
try {
    DataSource ds = (DataSource)context.lookup("jdbc/mypool");
    conn = ds.getConnection();
    cs = conn.prepareCall( "{call mysproc (?,?)}" );
    cs.setString(1, xy);
    cs.setString(2, zz);
    cs.execute();

} catch ( SQLException exp ) {
  //Handle your exception
} finally {  
  if (conn != null ) {
      try {
         conn.close(); 
      } catch(SQLException sqlExp){
         // Handle your exception     
      }
      conn = null;
    }
} 
```

Java中的覆盖规则：

[被覆盖的方法](http://code.google.com/p/learn-java/wiki/OverridenMethod)

*   参数不得更改
*   返回类型不能改变，除了协变（子类型）返回
*   异常可以减少/消除。不得抛出新的/更广泛的检查异常
*   访问权限不能更严格。可以少一些限制。
*   调用 调用哪个方法取决于对象类型，在运行时

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T02:41:47.757

你是对的。您不能向被覆盖方法的`throws`子句添加例外。

相反，将有问题的语句放在`try`/`catch`块中并处理错误。如果不出意外，您可以将它们重新抛出为`ServletException`. 例如：

```
Context context;
try {
    context = new InitialContext();
}
catch (NamingException e) {
    throw new ServletException(e);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-18T02:58:10.223

用@mprabhat 和@QuantumMechanic 给出的try-catch 包装SQL 代码是最好的方法。

如果你想知道为什么你不能

```
protected void doGet(HttpServletRequest req, HttpServletResponse res)
throws Exception { 
```

或者

```
protected void doGet(HttpServletRequest req, HttpServletResponse res)
throws ServletException, IOException, SQLException, NamingException { 
```

..这是因为当你覆盖一个方法时 - 有两件重要的事情要记住..

*   覆盖方法可以有一个更自由的访问器。例如：如果声明了超类方法`protected int add(...)`，则可以用 覆盖`public int add(...)`，反之则不行。
*   覆盖方法必须声明超类异常的相同或子类型。例如..如果声明了超类方法`public int add() throws IllegalArgumentException`，那么覆盖方法可以有以下语法.. `public int add() throws NumberFormatException`，但不能有更广泛的语法如`public int add() throws Exception`.

谢谢大家不投反对票！！

# asp.net-mvc - MVC 动态验证

> ID：10646051
> 
> 赞同：1
> 
> 时间：2012-05-18T02:40:01.610
> 
> 标签：asp.net-mvc, validation

我得到这样的要求：

不同的航空公司需要不同的旅客信息。

例如：航空公司A，需要身份证号码，孩子生日是必需的，年龄必须在2~12岁之间。

航空公司 B ，需要身份证号码和性别。

航空公司 C，要求所有旅客的生日，儿童年龄必须在 2 ~12 岁之间。

ETC...

我的问题是：有没有在不同的场景中使用不同的验证规则？此外，所有儿童和成人的信息都集中在一页中，因此我需要指定旅行者实例的验证规则。

我怎样才能在**MVC**中做到这一点？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T03:15:44.847

那么你可以在 mvc 中使用 IValidateObject 。到目前为止，您还没有指定您所做的事情，但我会创建一个 Airline viewmodel 并像这样验证它

```
public class AirlineViewModel: IValidatableObject 
{   
public string AirlineName{ get; set; }

public int IDNo{ get; set; }  

 //  your other properties here  

public IEnumerable<ValidationResult> Validate(ValidationContext validationContext)
{
    List<ValidationResult> err = new List<ValidationResult>();
    if(AirlineName.Equals("Airline a"))
    {
       if(IDNo>0)
       {
          yield return new ValidationResult("ID cannot be empty", new[] { "IDNo" });
       }
    }
    else if(AirlineName.Equals("Airline b"))
    {
        //  your stuff here
    }
    else if(AirlineName.Equals("Airline C"))
    {
        //  your stuff here
    }           
} 
```

}

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T03:32:55.647

正如mazhar 提到的，如果您不关心客户端验证，IValidateableObject 是一种选择。创建您自己的数据注释属性的另一种选择。第三种选择是使用第三方验证库，如 Fluent Validation。

# java - 扑克手评估器

> ID：10646052
> 
> 赞同：0
> 
> 时间：2012-05-18T02:40:15.823
> 
> 标签：java

我有一个确定冲洗的方法，只是想要一些意见。它查看扑克手数组，比较花色，并计算每次匹配一张牌，如果是 4，则返回 true。有没有更有效的方法来做到这一点？

```
public boolean isFlush(PlayingCard[] hand)
    {
        int suitCounter = 0;

        for(int i = 0; i < 1 ; i++)
        {
            for(int j = 1 ; j < hand.length ; j++ )
            {
                if(hand[i].getSuit() == hand[j].getSuit())
                    suitCounter++;
            }
        }

        return (suitCounter == 4);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T02:44:04.993

```
public boolean isFlush(PlayingCard[] hand) {
  Suit s = hand[0].getSuit();

  for(PlayingCard c : hand)
    if(c.getSuit() != s)
      return false;

  return true;
} 
```

你不需要计算任何东西，`false`如果有什么不匹配就返回。

# java - 用于 Java 的 Groovy 的 HTTPBuilder？

> ID：10646053
> 
> 赞同：2
> 
> 时间：2012-05-18T02:40:27.780
> 
> 标签：java, http, groovy, httpbuilder

是否有与[Groovy 的 Java 的 HTTPBuilder](http://groovy.codehaus.org/modules/http-builder/doc/index.html)等价物？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T11:35:17.590

为现有项目添加 groovy 支持并使用 Groovy 的 HTTPBuilder

[http://briantarbox.blogspot.co.uk/2009/01/tutorial-for-adding-groovy-to-java.html](http://briantarbox.blogspot.co.uk/2009/01/tutorial-for-adding-groovy-to-java.html)

“总的来说，这应该不会超过二十分钟左右。”

# valgrind - 为什么所有程序都被 Valgrind 分成 200 个基本块？

> ID：10646059
> 
> 赞同：3
> 
> 时间：2012-05-18T02:41:13.933
> 
> 标签：valgrind

为什么所有程序都被 Valgrind 分成 200 个基本块？以及如何划分？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T21:06:15.803

**第一个问题**

自从我使用 Valgrind 工具已经有一段时间了（甚至比这个问题还老），但如果有人仍然感兴趣，这就是我从记忆中挖掘出来的：

首先，区别：超级块与基本块有点不同。Valgrind 使用超级块，而不是基本块。超级块可以在任何时候退出，但基本块只会通过跑完它的末端而退出。

Valgrind 不会将程序分成 200 个超级块。我很确定它会将程序分解为不超过 200 个 IRStatements 的超级块（可能会也可能不会直接转换为指令）。

我很确定这样做的原因是为了提高翻译器的效率：至少对于当前版本的 Valgrind，我有理由确定它不会预先翻译你的整个程序。将程序翻译成它的 IR 格式既费时又耗费资源，因此翻译人员试图只翻译它需要的程序的大部分内容。它通过仅在第一次执行时翻译代码来做到这一点。

**第二个问题**

现在，关于你的第二个问题......我不完全确定你在问什么。如果你问“Valgrind 是如何决定如何划分程序的？”，那么答案是它的决定类似于编译器。它开始将程序转换为超级块，并在达到块限制大小或检测到从其他地方进入块的入口点（超级块和基本块只能有一个入口点）时启动一个新的超级块。

如果您的意思是“我可以更改 IRSB 超级块的大小吗？”，那么是的，您可以在工具初始化代码中将一个选项传回 Valgrind 来告诉它您想要什么大小的超级块（尽管我不知道'不记得是否可以将其增加到任意大小）。这些都没有在线记录，并且仅在文件本身中很少记录。您可以查看其他工具的源代码，以了解它们如何在初始化期间将配置选项传递给 Valgrind。这至少应该让您很好地了解要查看哪些标头以确定您需要将哪个选项传递回 Valgrind。

# assembly - 装配中的循环 - （澄清）

> ID：10646082
> 
> 赞同：-3
> 
> 时间：2012-05-18T02:44:43.300
> 
> 标签：assembly, for-loop

这只是文件的一个片段。这是炸弹的级别之一。每个级别都由用户输入来消除。我们应该解释反汇编代码以找出输入应该是什么。在这个特定级别中，用户必须输入 5 个数字。一旦提供了 5 个数字，就会在这个反汇编代码中检查它们。如果它们不起作用，那么炸弹就会爆炸。我已经完成了它并提出了一些数字规则，但有些部分我无法解释。主要是当涉及到循环时。

以下是反汇编代码供参考：

```
8048eae:       55                      push   %ebp
8048eaf:       89 e5                   mov    %esp,%ebp
8048eb1:       83 ec 28                sub    $0x28,%esp
8048eb4:       c7 45 f8 00 00 00 00    movl   $0x0,0xfffffff8(%ebp)
8048ebb:       8d 45 e4                lea    0xffffffe4(%ebp),%eax
8048ebe:       89 44 24 04             mov    %eax,0x4(%esp)
8048ec2:       8b 45 08                mov    0x8(%ebp),%eax
8048ec5:       89 04 24                mov    %eax,(%esp)
8048ec8:       e8 69 06 00 00          call   8049536 <read_five_numbers>
8048ecd:       8b 45 e4                mov    0xffffffe4(%ebp),%eax
8048ed0:       83 f8 1a                cmp    $0x1a,%eax
8048ed3:       74 05                   je     8048eda <level_3+0x2c>
8048ed5:       e8 a6 10 00 00          call   8049f80 <explode_bomb>
8048eda:       c7 45 fc 00 00 00 00    movl   $0x0,0xfffffffc(%ebp)
8048ee1:       eb 2c                   jmp    8048f0f <level_3+0x61>
8048ee3:       8b 45 fc                mov    0xfffffffc(%ebp),%eax
8048ee6:       8b 54 85 e4             mov    0xffffffe4(%ebp,%eax,4),%edx
8048eea:       8b 45 fc                mov    0xfffffffc(%ebp),%eax
8048eed:       83 c0 01                add    $0x1,%eax
8048ef0:       8b 44 85 e4             mov    0xffffffe4(%ebp,%eax,4),%eax
8048ef4:       39 c2                   cmp    %eax,%edx
8048ef6:       7f 05                   jg     8048efd <level_3+0x4f>
8048ef8:       e8 83 10 00 00          call   8049f80 <explode_bomb>
8048efd:       8b 45 fc                mov    0xfffffffc(%ebp),%eax
8048f00:       8b 44 85 e4             mov    0xffffffe4(%ebp,%eax,4),%eax
8048f04:       0f af 45 fc             imul   0xfffffffc(%ebp),%eax
8048f08:       01 45 f8                add    %eax,0xfffffff8(%ebp)
8048f0b:       83 45 fc 01             addl   $0x1,0xfffffffc(%ebp)
8048f0f:       83 7d fc 03             cmpl   $0x3,0xfffffffc(%ebp)
8048f13:       7e ce                   jle    8048ee3 <level_3+0x35>
8048f15:       8b 45 f4                mov    0xfffffff4(%ebp),%eax
8048f18:       f7 d8                   neg    %eax
8048f1a:       3b 45 f8                cmp    0xfffffff8(%ebp),%eax
8048f1d:       74 05                   je     8048f24 <level_3+0x76>
8048f1f:       e8 5c 10 00 00          call   8049f80 <explode_bomb>
8048f24:       c9                      leave  
8048f25:       c3                      ret 
```

到目前为止，我有以下规则来查找数字：

*   由于与 0x1a 比较，第一个数字应该是 26。

*   有一个 for 循环迭代 4 次并确保每个数字都小于当前索引处的数字这是我不确定的规则

*   前四个数字的总和应该小于等于某个值。
*   最后一个数字应该是第一个数字的负数

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T14:37:55.317

根据函数的开头，您可以这样查看堆栈布局：

```
int v[5], c0, c1;

ebp+e4 | v1
ebp+e8 | v2
ebp+ec | v3
ebp+f0 | v4
ebp+f4 | v5
ebp+f8 | c0
ebp+fc | c1 
```

我已将代码转录为伪代码，它应该可以回答您的问题。当然`do/while`，一旦您了解发生了什么，goto 可以转换为循环以提高可读性。

```
8048eae push  %ebp                           
8048eaf mov   %esp,%ebp                      
8048eb1 sub   $0x28,%esp                     

8048eb4 movl  $0x0,0xfffffff8(%ebp)          c0 = 0;
8048ebb lea   0xffffffe4(%ebp),%eax          
8048ebe mov   %eax,0x4(%esp)                 
8048ec2 mov   0x8(%ebp),%eax                 
8048ec5 mov   %eax,(%esp)                    
8048ec8 call  8049536 <read_five_numbers>    read_five_numbers(v);
8048ecd mov   0xffffffe4(%ebp),%eax          eax = v[0];
8048ed0 cmp   $0x1a,%eax                     
8048ed3 je    8048eda <level_3+0x2c>         unless(eax == 0x1A)
                                             {
8048ed5 call  8049f80 <explode_bomb>           explode_bomb();
                                             }
8048eda movl  $0x0,0xfffffffc(%ebp)          c1 = 0;
8048ee1 jmp   8048f0f <level_3+0x61>         goto loop_condition;
                                             loop_body:
8048ee3 mov   0xfffffffc(%ebp),%eax          eax = c1;
8048ee6 mov   0xffffffe4(%ebp,%eax,4),%edx   edx = v[eax];
8048eea mov   0xfffffffc(%ebp),%eax          eax = c1;
8048eed add   $0x1,%eax                      ++eax;
8048ef0 mov   0xffffffe4(%ebp,%eax,4),%eax   eax = v[eax];
8048ef4 cmp   %eax,%edx                      
8048ef6 jg    8048efd <level_3+0x4f>         unless(edx > eax)
                                             {
8048ef8 call  8049f80 <explode_bomb>           explode_bomb();
                                             }
8048efd mov   0xfffffffc(%ebp),%eax          eax = c1;
8048f00 mov   0xffffffe4(%ebp,%eax,4),%eax   eax = v[eax];
8048f04 imul  0xfffffffc(%ebp),%eax          eax *= c1;
8048f08 add   %eax,0xfffffff8(%ebp)          c0 += eax;
8048f0b addl  $0x1,0xfffffffc(%ebp)          ++c1;
                                             loop_condition:
8048f0f cmpl  $0x3,0xfffffffc(%ebp)          if(c1 <= 3) {
8048f13 jle   8048ee3 <level_3+0x35>           goto loop_body;
                                             }
8048f15 mov   0xfffffff4(%ebp),%eax          eax = v[4];
8048f18 neg   %eax                           eax = -eax;
8048f1a cmp   0xfffffff8(%ebp),%eax          
8048f1d je    8048f24 <level_3+0x76>         unless(c0 == eax)
                                             {
8048f1f call  8049f80 <explode_bomb>           explode_bomb();
                                             }
8048f24 leave                                
8048f25 ret 
```

因此，如果我没看错，您的数字必须是：

*   第一个必须等​​于 0x1A。
*   第二个必须小于第一个。
*   第三个必须小于第二个。
*   第四个必须小于第三个。
*   `(1 * second + 2 * third + 3 * fourth)`必须等于第五个数字的负数。

# git - 推动heroku后保存文件夹不被破坏

> ID：10646086
> 
> 赞同：2
> 
> 时间：2012-05-18T02:44:56.217
> 
> 标签：git, heroku, webserver

我有一个应用程序可以让用户上传文件。该应用程序将文档保存到服务器上的一个文件夹中，例如 users_documents。该应用程序托管在 Heroku 上。

当我执行 git push heroku master 时，新应用程序已部署，但 users_documents 中的所有文件都已删除，有没有办法告诉 git（或 heroku）不要重写该文件夹？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T02:59:29.343

您可能应该将数据存储在比[Heroku 的临时文件存储](https://devcenter.heroku.com/articles/dyno-isolation#ephemeral_filesystem)更永久的地方。重新启动测功机后，您的数据就会消失，即使您无意重新启动测功机，Heroku 维护也可能会在硬件需要维护时开始新的维护。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T02:50:02.007

你试过 gitignore 吗？ [https://devcenter.heroku.com/articles/gitignore#ignoring_directories](https://devcenter.heroku.com/articles/gitignore#ignoring_directories)

# mysql - 如何在 Yii 中使用 MySQL DB 进行 EGmap 扩展

> ID：10646097
> 
> 赞同：1
> 
> 时间：2012-05-18T02:48:34.530
> 
> 标签：mysql, google-maps, yii

例如我有一个包含纬度和经度的 MySQL 数据库，我如何调用这些坐标以显示在地图中？任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T05:11:16.570

由于您的问题和信息有点不清楚，这些是我的假设：

1.  我假设您已正确按照说明将 EGMap 扩展安装到您的 yii 应用程序中。
2.  您想在所述坐标（纬度和经度）上放置一个标记。

示例代码：（请在注释为“// Get LatLong from table Location”的行中调整以适合您的数据库表和列）。将其直接放入您的视图文件示例中：protected/views/site/index.php

```
<!-- other html codes here -->
<div id="map-container">
<?php
// Get LatLong from table Location
$location=Location::model()->findByPk(1);
$latitude = $location->latitude;
$longitude = $location->longitude;

Yii::import('ext.gmap.*');

$gMap = new EGMap();
$gMap->setJsName('map');
$gMap->zoom = 10;
$mapTypeControlOptions = array(
    'sensor'=>true,
    'position'=> EGMapControlPosition::LEFT_BOTTOM,
    'style'=>EGMap::MAPTYPECONTROL_STYLE_DROPDOWN_MENU
);
// Map settings
$gMap->mapTypeControlOptions= $mapTypeControlOptions;
$gMap->setWidth(800);
$gMap->setHeight(600);
$gMap->setCenter($latitude, $longitude);

// Prepare icon
$icon = new EGMapMarkerImage("http://google-maps-icons.googlecode.com/files/gazstation.png");
$icon->setSize(32, 37);
$icon->setAnchor(16, 16.5);
$icon->setOrigin(0, 0);
// Prepare marker
$marker = new EGMapMarker($latitude, $longitude, array('title' => 'Gas Station','icon'=>$icon));
$gMap->addMarker($marker);

$gMap->renderMap();
?>
</div>
<!-- other html codes here --> 
```

# java - 使用 Java 和 MongoDB 进行参数化查询

> ID：10646098
> 
> 赞同：5
> 
> 时间：2012-05-18T02:48:46.303
> 
> 标签：java, api, mongodb

你能用 Java 和 MongoDB 做参数化查询吗——有点像用 JDBC 准备的语句？

我想做的是这样的。设置一个采用日期范围的查询 - 然后使用不同的范围调用它。我知道`DBCursor.find(...)`这种方式行不通-这是一种伪代码来说明我在寻找什么。

```
DBCollection dbc = ...
DBObject pQuery = (DBObject) JSON.parse("{'date' : {'$gte' : ?}, 'date' : {'$lte' : ?}}");
DBCursor aprilResults = dbc.find(pQuery, "2012-04-01", "2012-04-30");
DBCursor mayResults = dbc.find(pQuery, "2012-05-01", "2012-05-31");
... 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T09:53:14.640

MongoDB 本身不支持这样的东西，但话又说回来，它没有太多意义，因为它需要每次都将查询发送到服务器。您可以简单地自己在应用程序中构造对象，并通过更新正确的数组元素来修改特定部分。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-25T13:40:20.840

你应该使用[Jongo](http://jongo.org)，一个基于 mongo-java-driver 的 API。

这是参数化查询的示例：

```
 collection.insert("{'date' : #}", new Date(999));               
    Date before = new Date(0);
    Date after = new Date(1000);

    Iterable<Report> results = collection.find("{'date' : {$gte : #}, 'date' : {$lte : #}}", before, after).as(Report.class); 
```

# codeigniter - CodeIgniter：验证表单数组不起作用

> ID：10646099
> 
> 赞同：5
> 
> 时间：2012-05-18T02:48:47.407
> 
> 标签：codeigniter, codeigniter-2

我有一组需要验证的配置文件数据：

```
$user_group_profiles = $this->input->post('user_group_profiles', TRUE);
foreach ($user_group_profiles as $key => $user_group_profile)
{
    $this->form_validation->set_rules("user_group_profiles[$key][profile_name]", 'Profile Name', 'trim|required');
    $this->form_validation->set_rules("user_group_profiles[$key][birthdate]", 'Birthdate', 'trim|required');

    // TODO: heigth/weight not required, but the validation somehow makes it required
    $this->form_validation->set_rules("user_group_profiles[$key][height]", 'Height', 'trim|greater_than[0]');
    $this->form_validation->set_rules("user_group_profiles[$key][weight]", 'Weight', 'trim|greater_than[0]');
} 
```

身高和体重是可选的，但是当没有为这些字段设置值时，CI 验证会报错。A`var_dump($user_group_profiles);`显示了这一点：

```
array
  'ugp_b33333338' => 
    array
      'profile_name' => string '' (length=0)
      'birthdate' => string '' (length=0)
      'height' => string '' (length=0)
      'weight' => string '' (length=0) 
```

有什么想法可能是错的吗？

编辑1：

我进入 CI 的 Form_validation 库并成为`$_field_data`公共成员。当我 var_export 之后，我得到了这个：

```
 'user_group_profiles[ugp_833333338][height]' => 
    array
      'field' => string 'user_group_profiles[ugp_833333338][height]' (length=42)
      'label' => string 'Height' (length=6)
      'rules' => string 'greater_than[1]' (length=15)
      'is_array' => boolean true
      'keys' => 
        array
          0 => string 'user_group_profiles' (length=19)
          1 => string 'ugp_833333338' (length=13)
          2 => string 'height' (length=6)
      'postdata' => string '' (length=0)
      'error' => string 'The Height field must contain a number greater than 1.' (length=54) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-01T12:38:28.480

好的 - 我刚刚花了一个小时 - 我已经解决了问题+解决方案

问题是当您正在测试的变量是数组的一部分时，CI 将该字段解释为已设置，因此“包含”一个值（即使它为空）。因为那个“值”不是一个大于 0 的数字——它失败了。

因此，您需要在 $_POST (NOT $user_group_profiles) 变量为“空”时取消设置它，以便它通过验证。注意 - 验证在 $_POST 上运行 - 这就是您取消设置 $_POST 而不是 $user_group_profiles 的原因

所以解决方法是这样的：

```
$user_group_profiles = $this->input->post('user_group_profiles', TRUE);
foreach ($user_group_profiles as $key => $user_group_profile)
{
     // Set the rules
     $this->form_validation->set_rules($key."[profile_name]", "Profile Name", "trim|required");
     $this->form_validation->set_rules($key."[birthdate]", "Birthdate", "trim|required");
     $this->form_validation->set_rules($key."[height]", "Height", "trim|greater_than[0]");
     $this->form_validation->set_rules($key."[weight]", "Weight", "trim|greater_than[0]");

     // Now check if the field is actually empty
     if (empty($user_group_profile['height']))
     {
         // If empty, remove from array so CI validation doesnt get tricked and fail
         unset($_POST[$key]['height']);
     }
     if (empty($user_group_profile['weight']))
     {
         unset($_POST[$key]['weight']);
     }
} 
```

我已经对此进行了测试 - 它解决了您的问题。

如果您不想接触 $_POST 数据，也可以这样编程：

```
foreach ($user_group_profiles as $key => $user_group_profile)
    {
         // Set the rules
         $this->form_validation->set_rules($key."[profile_name]", "Profile Name", "trim|required");
         $this->form_validation->set_rules($key."[birthdate]", "Birthdate", "trim|required");

         // Now check if the field is actually empty
         if ( ! empty($user_group_profile['height']))
         {
             $this->form_validation->set_rules($key."[height]", "Height", "trim|greater_than[0]");
         }
         if ( ! empty($user_group_profile['weight']))
         {
             $this->form_validation->set_rules($key."[weight]", "Weight", "trim|greater_than[0]");
         }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T03:35:35.870

让我们试着把它分解成几部分。我希望我能在这里帮助你。

我假设您正在使用第二个“TRUE”参数对 XSS 过滤执行以下操作：

```
$user_group_profiles = $this->input->post('user_group_profiles', TRUE); 
```

您实际上可以使用表单验证规则进行 XSS 过滤，或者如果您更喜欢在规则之后过滤帖子。请参阅此处了解我的偏好：

```
$this->form_validation->set_rules('profile_name', 'Profile Name', 'xss_clean|trim|required'); 
```

因此，现在知道了这一点，我们可以遵循他们的表单验证库的 CI 约定。在使用表单验证库之前没有必要获取帖子，因为它会自动检测我相信字段名称的 POST 数据。例如：

```
$this->form_validation->set_rules('profile_name', 'Profile Name', 'trim|required|xss_clean');
$this->form_validation->set_rules('birthdate', 'Birthdate', 'trim|required|xss_clean');
$this->form_validation->set_rules('height', 'Height', 'trim|greater_than[0]|numeric');
$this->form_validation->set_rules('weight', 'Weight', 'trim|greater_than[0]|numeric');

if ($this->form_validation->run() == FALSE) {
    $this->load->view('my_view_where_this_post_came_from');
} else {
    $profile_name = $this->input->post('profile_name');

    //or if you prefer the XSS check here, this:
    //$profile_name = $this->input->post('profile_name', TRUE);

    $birthdate= $this->input->post('birthdate');
    $height= $this->input->post('height');
    $weight= $this->input->post('weight');

    //$user_group_profiles = $this->input->post();

} 
```

我希望这有帮助！

**编辑：我也刚刚注意到这一点。如果您尝试获取整个 post 数组，则代码为：**

```
$user_group_profiles = $this->input->post(NULL, TRUE); // returns all POST items with XSS filter 
$user_group_profiles = $this->input->post(); // returns all POST items without XSS filter 
```

不是：

```
 $user_group_profiles = $this->input->post('user_group_profiles'); 
```

如果您不知道您的 $_POST 名称或感到困惑，这是一个很好的帮助，您可以执行此操作以查看该数据是否存在！像这样作为你的第一行：

```
var_dump($_POST);
exit(); 
```

# phpunit - 如何在 PHPUnit 测试中使用 csv 文件

> ID：10646105
> 
> 赞同：6
> 
> 时间：2012-05-18T02:49:55.947
> 
> 标签：phpunit

我按照PHPUnit手册的示例4.5编写了一个DataTest案例，网址是：
[http ://www.phpunit.de/manual/3.6/en/writing-tests-for-phpunit.html#writing-tests-for-phpunit .data-providers](http://www.phpunit.de/manual/3.6/en/writing-tests-for-phpunit.html#writing-tests-for-phpunit.data-providers)。
但是我遇到了一个错误：

> *为 DataTest::testAdd 指定的数据提供者无效。
> 数据集#0 无效。*

我认为可能是我以错误的方式编辑了 data.csv 文件，然后我使用 php 函数 fputcsv() 创建了 data.csv 文件，但它也不起作用，我想知道为什么，以及如何解决这个问题。谢谢！

PS：data.csv中的数据为：

> 0,0,0
> 0,1,1

* * *

代码如下：
DataTest.php

```
require 'CsvFileIterator.php';
class DataTest extends PHPUnit_Framework_TestCase
{
public function provider()
    {
        return new CsvFileIterator('data.csv');
    }

    /**
    * @dataProvider provider
    */
    public function testAdd($a, $b, $c)
    {
         $this->assertEquals($c, $a + $b);
    }
} 
```

CSVFileIterator.php

```
class CsvFileIterator implements Iterator
{
    protected $file;
    protected $key = 0;
protected $current;

public function __construct($file)
{
    $this->file = fopen($file, 'r');
}

public function __destruct()
{
    fclose($this->file);
}

public function rewind()
{
    rewind($this->file);
    $this->current = fgetcsv($this->file);
    $this->key = 0;
}

public function valid()
{
    return !feof($this->file);
}

public function key()
{
    return $this->key;
}

public function current()
{
    return $this->current;
}

public function next()
{
    $this->current = fgetcsv($this->file);
    $this->key++;
}
} 
```

data.csv 文件由函数 fputcsv() 创建：

```
$data = array(
array(0, 0, 0),
array(0, 1, 1)
);

$fp = fopen('data.csv', 'w');

foreach($data as $v)
{
fputcsv($fp, $v);
}
fclose($fp); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-18T10:42:48.560

例子 ：-）

```
/**
 * @dataProvider provider
 * @group csv
 */
public function testAdd($a, $b, $c)
{
    $this->assertEquals($c, $a + $b);
}

/**
 * @return array
 */
public function provider()
{
    $file = file_get_contents("/Volumes/htdocs/contacts.csv","r");
    foreach ( explode("\n", $file, -1) as $line )
    {
        $data[] = explode(',', $line);
    }
    return $data;
}

/*
 * CREATE TO CSV FILE DATAPROVIDER
 * don't create this file in your test case
 */
public function saveToCsv()
{
    $list = array(
        array(0,0,0),
        array(0,1,1)
    );

    $file = fopen("/Volumes/htdocs/contacts.csv","w");

    foreach ($list as $line)
    {
        fputcsv($file,$line);
    }

    fclose($file);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-13T16:29:56.200

@ZongshuLin 这里有类似的问题。可能的解决方案：

*   检查这个[data.csv](https://github.com/rdok/phpunit.de/blob/master/02-writing-tests-for-phpunit/storage/data.csv)。基本上我必须在最后一行之后添加一行。
*   指定 data.csv 位置时，您还可以[在 GitHub 上查看我的方法](https://github.com/rdok/phpunit.de/blob/ad2984fbc6976815fb9c4de6ba7a7c7a4f3664d5/02-writing-tests-for-phpunit/tests/providers/IteratorObjectDataProviderTest.php#L26)

> 使用 DIRECTORY_SEPARATOR 常量，以便脚本可以在任何操作系统上运行——Windows 使用反斜杠，而 Linux 使用斜杠。

```
 /**
 * @return CsvFileIterator
 */
public function additionProvider()
{
    return new CsvFileIterator(__DIR__ . DIRECTORY_SEPARATOR . '..' . DIRECTORY_SEPARATOR . 'storage/data.csv');
} 
```

# android - Android - 将用户发送到应用程序的 android play 时出现奇怪的崩溃报告

> ID：10646109
> 
> 赞同：3
> 
> 时间：2012-05-18T02:50:10.103
> 
> 标签：android

我有一个按钮，用户可以单击该按钮将他们发送到 Google Play 商店中的应用页面。这是我用于按钮的代码：

```
 Intent intent = new Intent(Intent.ACTION_VIEW);
        intent.setData(Uri.parse("market://details?id=com.problemio"));
        startActivity(intent); 
```

包在这里：[https ://play.google.com/store/apps/details?id=com.problemio](https://play.google.com/store/apps/details?id=com.problemio)

有时它工作正常，但有时我会收到这样的崩溃报告：

```
android.content.ActivityNotFoundException: No Activity found to handle Intent { act=android.intent.action.VIEW dat=market://details?id=com.problemio }
at android.app.Instrumentation.checkStartActivityResult(Instrumentation.java:1409)
at android.app.Instrumentation.execStartActivity(Instrumentation.java:1379)
at android.app.Activity.startActivityForResult(Activity.java:2833)
at android.app.Activity.startActivity(Activity.java:2959)
at com.problemio.content.BusinessIdeasActivity$5.onClick(BusinessIdeasActivity.java:107)
at android.view.View.performClick(View.java:2538)
at android.view.View$PerformClick.run(View.java:9152)
at android.os.Handler.handleCallback(Handler.java:587)
at android.os.Handler.dispatchMessage(Handler.java:92)
at android.os.Looper.loop(Looper.java:130)
at android.app.ActivityThread.main(ActivityThread.java:3691)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:507)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:907)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:665)
at dalvik.system.NativeStart.main(Native Method) 
```

知道为什么它只有时有效吗？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-18T03:14:11.470

我会为您的软件尝试不同的 URL：

```
 Uri uri = Uri.parse("market://search?q=pname:com.problemio");
    Intent intent = new Intent(Intent.ACTION_VIEW, uri);
    try {
        this.startActivity(intent);
    } catch (ActivityNotFoundException anfe) {
        // Hmm, market is not installed
        Log.w(TAG, "Android Market is not installed");
    } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-18T03:07:33.470

这将发生在未安装 Android Market/Google Play 的设备上。实际上有很多，尤其是便宜的平板电脑。您可以捕获检查是否安装了市场/游戏应用程序以防止这种情况发生的异常。

顺便说一句，如果您只是在 Market/Play 商店中分发，那么您的应用程序可能已经被盗版，或者可能有人只是将其从他们的 root 设备中取出并将其推送到他们的新 el Cheapo 平板电脑或模拟器上。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-18T03:04:18.953

```
try{
    Intent viewIntent = new Intent("android.intent.action.VIEW", Uri.parse("https://market.android.com/details?id=com.problemio"));
    startActivity(viewIntent);
}catch (ActivityNotFoundException activityException) {
    Log.e("helloandroid", "Call failed",activityException);
} 
```

试试这个，现在你的应用程序不会崩溃，但可能有异常。

# c# - 实体框架迁移 - 启用自动迁移以及添加的迁移

> ID：10646111
> 
> 赞同：13
> 
> 时间：2012-05-18T02:50:35.313
> 
> 标签：c#, asp.net-mvc-3, entity-framework, entity-framework-migrations

我在我的项目中使用实体框架 4.3 迁移。我想使用自动迁移，这样当我对域对象和上下文类进行修改时，我的数据库会在我运行项目时自动更新。到目前为止，我有这个工作。

除了自动迁移之外，我还想使用一些添加的迁移，并且我希望应用程序在我运行应用程序时自动跳转到最新版本（基于我添加的迁移）。

为了做到这一点，我把它放在 global.asax 文件中......

```
Database.SetInitializer(new MigrateDatabaseToLatestVersion<MyContext, Core.Migrations.Configuration>()); 
```

现在这可行，但是当我这样做时，它不再根据我的域对象自动更新数据库。

我希望能够完全删除数据库，然后运行应用程序并运行所有自动迁移，然后运行我的显式迁移并将数据库升级到最新版本。

我知道我在以前的项目中已经完成了这项工作，但我不确定在这种情况下我做错了什么。

谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-18T11:31:31.933

您需要在构造函数中传递一个将 AutomaticMigrationsEnabled 设置为 true 的配置。这样的事情应该会有所帮助：

```
 Database.SetInitializer(new MigrateDatabaseToLatestVersion<MyContext, MyConfiguration>()); 
```

MyConfiguration 类似于：

```
 public class MyConfiguration : Core.Migrations.Configuration
{
    public MyConfiguration { this.AutomaticMigrationsEnabled = true; }
} 
```

免责声明：刚刚破解了这个，所以可能需要进行一些小的调整才能编译它

## 编辑：

刚刚检查了 EF 4.3.1，初始化程序的代码是这样的：

```
Database.SetInitializer(new MigrateDatabaseToLatestVersion<DataContext, MyConfiguration>()); 
```

这对于配置类：

```
public class MyConfiguration : System.Data.Entity.Migrations.DbMigrationsConfiguration<DataContext>
{
    public MyConfiguration()
    {
        this.AutomaticMigrationsEnabled = true;
    }
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-10-21T20:39:00.170

经过几个小时的努力，我终于想出了一个解决方案，可以在必要时创建数据库，*或者*在过时时对其进行升级。我们在 Gallery Server Pro 中使用了这种技术，以便于第一次安装或升级以前的版本。

```
private static void InitializeDataStore()
{
  System.Data.Entity.Database.SetInitializer(new System.Data.Entity.MigrateDatabaseToLatestVersion<GalleryDb, GalleryDbMigrationConfiguration>());

  var configuration = new GalleryDbMigrationConfiguration();
  var migrator = new System.Data.Entity.Migrations.DbMigrator(configuration);
  if (migrator.GetPendingMigrations().Any())
  {
    migrator.Update();
  }
}

public sealed class GalleryDbMigrationConfiguration : DbMigrationsConfiguration<GalleryDb>
{
  protected override void Seed(GalleryDb ctx)
  {
    MigrateController.ApplyDbUpdates();
  }
} 
```

我写了一篇包含更多细节的博客文章： [使用实体框架代码优先迁移来自动创建和自动更新应用程序](https://galleryserverpro.com/using-entity-framework-code-first-migrations-to-auto-create-and-auto-update-an-application/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-02-02T00:30:47.807

与 Roger 相同的解决方案，但在 DbContext 上使用了静态构造函数。下面的完整代码......这允许初始化代码存在于类本身上，并在 DataDbContext 类的第一次实例化时自行调用。

```
public partial class DataDbContext : DbContext
{
    public DataDbContext()
        : base("name=DefaultConnection")
    {
    }

    static DataDbContext() // This is an enhancement to Roger's answer
    {
        Database.SetInitializer(new DataDbInitializer()); 

        var configuration = new DataDbConfiguration();
        var migrator = new DbMigrator(configuration);

        if (migrator.GetPendingMigrations().Any())
            migrator.Update();
    }

    // DbSet's
    public DbSet<CountryRegion> CountryRegion { get; set; }
    // bla bla bla.....

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        modelBuilder.Conventions.Remove<PluralizingTableNameConvention>();
        modelBuilder.Conventions.Remove<ManyToManyCascadeDeleteConvention>();
        modelBuilder.Conventions.Remove<OneToManyCascadeDeleteConvention>();

        Configuration.ProxyCreationEnabled = false;
        Configuration.LazyLoadingEnabled = false;
        //Configuration.ValidateOnSaveEnabled = false; 

        base.OnModelCreating(modelBuilder);

        modelBuilder.Configurations.AddFromAssembly(Assembly.GetExecutingAssembly()); // Discover and apply all EntityTypeConfiguration<TEntity> of this assembly, it will discover (*)
    }

}

internal sealed class DataDbInitializer : MigrateDatabaseToLatestVersion<DataDbContext, DataDbConfiguration>
{
}

internal sealed class DataDbConfiguration : DbMigrationsConfiguration<DataDbContext>
{
    public DataDbConfiguration()
    {
        AutomaticMigrationsEnabled = true;
        AutomaticMigrationDataLossAllowed = true;
    }

    protected override void Seed(DataDbContext context)
    {
        DataSeedInitializer.Seed(context); 
        base.Seed(context);
    }
}

internal static class DataSeedInitializer
{
    public static void Seed(DataDbContext context)
    {
        SeedCountryRegion.Seed(context);
        // bla bla bla.....

        context.SaveChanges();
    }
}

internal static class SeedCountryRegion
{
    public static void Seed(DataDbContext context)
    {
        context.CountryRegion.AddOrUpdate(countryRegion => countryRegion.Id,

            new CountryRegion { Id = "AF", Name = "Afghanistan" },
            new CountryRegion { Id = "AL", Name = "Albania" },
            // bla bla bla.....

            new CountryRegion { Id = "ZW", Name = "Zimbabwe" });

        context.SaveChanges();
    }
}

public class CountryRegionConfiguration : EntityTypeConfiguration<CountryRegion> // (*) Discovered by
{
    public CountryRegionConfiguration()
    {
        Property(e => e.Id)
            .IsRequired()
            .HasMaxLength(3);

        Property(e => e.Name)
            .IsRequired()
            .HasMaxLength(50);
    }
}

public partial class CountryRegion : IEntity<string>
{
    // Primary key 
    public string Id { get; set; }

    public string Name { get; set; }

}

public abstract class Entity<T> : IEntity<T>
{
    //Primary key
    public abstract T Id { get; set; }
}

public interface IEntity<T>
{
    T Id { get; set; }
} 
```

我们可以看到 Seed 方法一次又一次地运行.. 我们可以通过检查迁移是否已经退出来避免这种情况，因为在创建数据库时会自动应用迁移.. 然后我们可以重构 DataDbConfiguration 如下...

```
internal sealed class DataDbConfiguration : DbMigrationsConfiguration<DataDbContext>
{
    private readonly bool _isInitialized;

    public DataDbConfiguration()
    {
        AutomaticMigrationsEnabled = true;
        AutomaticMigrationDataLossAllowed = true;

        var migrator = new DbMigrator(this);

        _isInitialized = migrator.GetDatabaseMigrations().Any();
    }

    protected override void Seed(DataDbContext context)
    {
        InitializeDatabase(context);
    }

    public void InitializeDatabase(DataDbContext context)
    {

        if (!_isInitialized)
        {
            if (context.Database.Connection.ConnectionString.Contains("localdb"))
            {
                DataSeedInitializer.Seed(context); // Seed Initial Test Data
            }
            else
            {
                // Do Seed Initial Production Data here
            }

        }
        else
        {
            // Do any recurrent Seed here
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-19T14:51:19.673

这是我目前的解决方案，我对此并不完全满意。

```
protected void Application_Start()
{
    AreaRegistration.RegisterAllAreas();

    RegisterGlobalFilters(GlobalFilters.Filters);
    RegisterRoutes(RouteTable.Routes);

    var context = new KCSoccerDataContext();
    var initializeDomain = new CreateDatabaseIfNotExists<KCSoccerDataContext>();
    var initializeMigrations = new MigrateDatabaseToLatestVersion<KCSoccerDataContext, Core.Migrations.Configuration>();

    initializeDomain.InitializeDatabase(context);
    initializeMigrations.InitializeDatabase(context);

} 
```

我实际上正在创建两个不同的初始化程序。首先，使用 CreateDatabaseIfNotExists，成功地通过并基于我的域对象创建表。第二个，使用 MigrateDatabaseToLatestVersion，执行我所有的显式迁移。

我不喜欢它，因为自动迁移基本上被禁用了。因此，为了添加或更改我的域模型，我必须完全删除数据库并重新创建它。一旦我将应用程序移至生产环境，这将是不可接受的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-04-07T07:46:50.640

如果您的应用程序包含 Startup.cs 类，您可以使用 DbMigrator 类，如下所示转到您的 App_Start 文件夹，打开 Startup.Auth 将这些代码行粘贴到 ConfigureAuth 方法中

```
var configuration = new Migrations.Configuration();
        var dbmigrator = new DbMigrator(configuration);
        dbmigrator.Update(); 
```

> 注意：请记住使用此命名空间 - using System.Data.Entity.Migrations；

它的作用是在应用程序启动时将数据库更新到最新版本

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2017-07-06T19:42:35.380

你只需要做

```
 private static void InitializeDataStore()
    {
        System.Data.Entity.Database.SetInitializer(new System.Data.Entity.MigrateDatabaseToLatestVersion<GalleryDb, GalleryDbMigrationConfiguration>());
        System.Data.Entity.Database.Initialize(false);
    } 
```

# javascript - Javascript/jQuery 文本动画性能缓慢

> ID：10646112
> 
> 赞同：0
> 
> 时间：2012-05-18T02:50:45.603
> 
> 标签：javascript, jquery, html, css, animation

这是我的代码的简化和解释版本：

```
 var ptext=parr.find('div.ptext');   //Text Container

    var pt=ptext.html();                //Text Container's string
    var pdv=[pt.split(" ")];            //Text Container's array of words
        pdv.push(pdv[0].length);    //Write also the number of words

    var ht=hp.html();               //Text Container's new string
    var hdv=[ht.split(" ")];            //Text Container's new array of words
    hdv.push(hdv[0].length);            //New number of words

    var kakaka=0;                       //If they begin with the same,
    for (var j=0;j<hdv[0].length;j++){  //Animate only from the position
        if (hdv[0][j]==pdv[0][j])   //where they differ
            kakaka+=2;
    }

    window.clearTimeout(ptext.data('curt'));  //Clear current animation's interval
    ptext.data('count',kakaka);      //Set starting position    
    ptext.data('curt',                      //Set interval's var into object
        window.setInterval((function (item,pdv,hdv,text_callback) {
                return function() {       //item = text obj, text_callback= callback function
                        var i=item.data('count');
                            i=(i==undefined)?0:1+i;
                        item.data('count',i);     //increase counter
                                //first phase - remove old text
                        if (i<=pdv[1])       // go on
                        {
                            item.html((pdv[0].slice(0,pdv[1]-i)).join(' '));
                        }       //if reached the position, add new text
                        else if (i<=pdv[1]+hdv[1])
                        {
                            item.html((hdv[0].slice(0,i-pdv[1])).join(' '));
                        }        //if finish clear timeout and call callback
                        else {
                            item.data('count',0);
                            window.clearTimeout(item.data('curt'));
                            text_callback();
                        }
                }
            })(ptext,pdv,hdv,text_callback),8)   //8 = supposed interval
       );

} 
```

它从 div 中获取单词，快速将它们一一删除，然后用新文本填充它。

它使用 .setInterval() 函数，该函数应该每 8 毫秒回调一次。这在我的 i5 CPU 上运行良好，但在 i3 笔记本电脑上却非常慢。

您能否就如何提高性能提供一些建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T03:32:40.243

你可以

*   尝试使容器具有设定的宽度和高度，以避免重新绘制和重排文档。操作后调整元素大小。
*   那么您可以避免数组操作（拆分和连接）而直接使用字符串操作。
*   通过在循环操作之外存储引用来避免重复调用同一元素
*   使用`text()`而不是`html()`，这样，DOM 只创建文本节点。

[这是一个演示](http://jsfiddle.net/T3uLX/4/)，它在我信赖的 Pentium 4 上运行得非常快

```
$(function() {

    function clearText(selector, callback) {
        //cache repeatedly used items
        var element = $(selector),
            elementText = element.text() + ' '; 

        //set element dimensions to fixed
        element.width(element.width());    
        element.height(element.height());

        (function erase() {
            if (elementText) {
                //use slice operations instead
                elementText = elementText.slice(elementText.indexOf(' ')+1);
                //use "text()"
                element.text(elementText);
                //loop
                setTimeout(function() {
                    erase();
                }, 8);
            } else {
                //set the dimensions back to auto
                element.width('auto').height('auto');   
                //execute callback returning the jQuery element
                callback.apply(element); 
            }
        }())

    }

    clearText('#foo', function() {
        //"this" is jQuery object "#foo"
        this.text('hello world');
    });
});​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T03:39:08.097

这将完成这项工作，您可能想要更改 setTimeout 调用之间的延迟。它可以变得更加独立，但我现在没有动力：

```
<script type="text/javascript">

// Some support functions
(function(g) {
  var el = document.createElement('div');
  if (typeof el.textContent == 'string') {
    g.getText = function(el) {return el.textContent};
    g.setText = function(el, text) {el.textContent = text};
  }

  if (typeof el.innerText == 'string') {
    g.getText = function(el) {return el.innerText};
    g.setText = function(el, text) {el.innerText = text};
  }
}(this));

function annoyUser(el, text) {
  var re = /\s+/g;
  var oText = getText(el).split(re);

  if (oText.length == 1) {
    setText(el, text);

  } else {
    oText.pop();
    setText(el, oText.join(' '));
    setTimeout(function(){annoyUser(el, text)}, 100);
  }
}

window.onload = function() {
  setTimeout(function() {
    annoyUser(document.getElementById('d0'), 'hello world')
  }, 1000);
}

</script>

<div id="d0">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Maecenas
 metus sapien, lobortis non dictum et, mollis vitae lorem. Nulla facilisi. Morbi eget
 ante diam.</div> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-15T02:11:06.590

这是完美完成的功能，整个想法是将其包装在 SPANS 中，然后对于每个跨度，我们将更改可见性，当它进入反向阶段时，替换为包装在跨度中的不同文本。

我不保证你会理解任何事情，但你肯定可以知道我是如何解决它的。注意，基本上主要的输入是 pdv，而 hdv - 是输入文本和输出文本的单词数组。

```
function letsdance(obj,op,type,text_callback){  //animate text

    if (text_callback==undefined) var text_callback=function(){};

    var parr=obj.parents('.pconter');
    var ptext=parr.find('div.ptext');

    var pt=ptext.html();

    var ppp=ptext.children();
    var pdv=[[]];
    for (var i=0;i<ppp.length;i++)
        pdv[0].push(    ppp[i].outerHTML    );

    if (ppp.length==0){
    var pdv=[pt.split(" ")];
        for (var i=0;i<pdv[0].length;i++)
            pdv[0][i]='<span>'+pdv[0][i]+'</span>';
        ptext.html(pdv[0].join(' '));
    }

    pdv.push(pdv[0].length-1);

    if (op){
        if (type===1)
            {
                var ht=obj.html();
            }
        else if (type==2)
            {
                var ht=ptext.data('orig');  
            }
        else {
        var ide=(obj.attr('id').match(/_[\da-zA-Z]*_[\da-zA-Z]*$/))[0];
        var hp=parr.find('div.hptext[id$="'+ide+'"]');
        var ht=hp.html();   
        }
        var hdv=[ht.split(" ")];
            hdv.push(hdv[0].length-1);  
    } else {    
        var current_selection=parseInt(ptext.data('current_section'));
        if (current_selection>0){
            var pto=ptext.siblings('.subptext[id$="NN'+current_selection+'"]').html();
            }
        else 
            var pto=ptext.data('orig');

        var hdv=[pto.split(" ")];
            hdv.push(hdv[0].length-1);  
    }

    var kakaka=0;
    var kaka=false;
    for (var i=0;i<=hdv[1];i++){
        if (pdv[0][i]!=undefined&&!kaka&&hdv[0][i]==pdv[0][i].replace(/(<([^>]+)>)/ig,"")&&!/invis/.test(pdv[0][i])){
                        kakaka+=1;  
        }
        else {
            kaka=true;
            hdv[0][i]='<span class="invis">'+hdv[0][i]+'</span>'; 
        }
    }
    var invi_count=pdv[1];
    for (invi_count;invi_count>=0;invi_count--)
        if (!/invis/.test(pdv[0][invi_count])) break;

    window.clearInterval(ptext.data('curt'));
    ptext.data('count',invi_count).data('index',kakaka).data('phase',0)//data('skip',0);            
    ptext.data('curt',
        window.setInterval((function (item,pdv,hdv,text_callback) {
                return function() {
                    var i=item.data('count');      
                    var phase=item.data('phase');      
                    var index=item.data('index');    
                    switch (phase)
                    {
                        case 0:
                                item.children(':eq('+i+')').addClass('invis');
                                if (i>index)    
                                    item.data('count',i-1);
                                else
                                    item.data('count',index).data('phase',1)
                                    .html((pdv[0].slice(0,index)).join(' ')).append(' '+hdv[0].slice(index,hdv[1]).join(' '));
                        break;  
                        case 1:
                                item.children(':eq('+i+')').removeClass('invis');
                                if (i<hdv[1])
                                    item.data('count',i+1);
                                else{
                                    //item.data('count',0).data('phase',0);
                                    window.clearInterval(item.data('curt'));
                                    text_callback();
                                }
                        break;      
                    }
                }
            })(ptext,pdv,hdv,text_callback),4)
       );

} 
```

# radio-button - 单击无法在无线电场中工作

> ID：10646114
> 
> 赞同：2
> 
> 时间：2012-05-18T02:50:51.403
> 
> 标签：radio-button, sencha-touch-2

我正在尝试在检查无线电场时生成一个事件。只需单击一下即可检查该字段，但仅当我双击它时才会生成该事件。

任何做错的事情。这是我使用的代码。

```
{
            xtype : 'radiofield',
            //  ui:'plain',
            id : 'r1',
            name : 'sendDoc',
            value : 'Default',
            label : 'Default',
            labelWidth : '50%',
            checked : true,
            //baseCls: 'x-plain',

            listeners : {
                check: function ( radioFld, event, opts ){
                    if(radioFld.isChecked()){
                        Ext.getCmp('workstep').disable();
                    }
                }

            }
        }, 
        {
            xtype : 'radiofield',
            name : 'sendDoc',
            id : 'r2',
            value : 'Source Workstep',
            label : 'Source Workstep',
            labelWidth : '50%',
            listeners : {
                check : function(radioFld, event, opts ) {
                    console.log(radioFld.isChecked());
                        if (radioFld.isChecked())   {
                            Ext.getCmp('workstep').enable();
                        }
                    }
                }

        } 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T08:10:59.527

我不确定你的问题是什么，但如果你看看这个小提琴： [http](http://www.senchafiddle.com/#EiQID#UTcRj#bTsT0) ://www.senchafiddle.com/#EiQID#UTcRj#bTsT0 ，

您将看到在将选择从第一个单选框更改为第二个单选框时正确触发了“检查”和“取消检查”事件，反之亦然，只需轻按一下即可。

这对你有用吗？如果没有，究竟发生了什么？

# php - PHP/MYSQL：检查变量是否为空

> ID：10646115
> 
> 赞同：0
> 
> 时间：2012-05-18T02:51:14.563
> 
> 标签：php, mysql, isset

我想防止空值进入 MySQL 数据库

我正在使用以下但由于某种原因它让空值通过......

```
if (trim($var)= '' || !isset($var)){
header("Location:page.php?er=novariablel");
}
else {
...insert into database
} 
```

请注意，有一堆复杂的东西可以设置 var 的值，这就是为什么我想要同时拥有 the`=''`和 the 的原因，`!isset`因为两者都可能是这种情况。

我是否缺少 or 语句的某些内容，即如果两者都为真，则它的评估结果为假。或者我做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-18T02:54:29.477

你在你的声明中缺少`=`你的[平等比较运算符](http://php.net/manual/en/language.operators.comparison.php)`if`。尝试：

```
if (trim($var) == '' || !isset($var)){ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-18T02:52:23.813

尝试：

```
if (!isset($var) || empty(trim($var))){ 
```

[`empty()`](http://us2.php.net/manual/en/function.empty.php)是检查变量是否没有值的更好方法。请记住，以下将返回 true：

以下内容被认为是空的：

*   ""（一个空字符串）
*   0（0 为整数）
*   0.0（0 作为浮点数）
*   "0" (0 作为字符串)
*   无效的
*   错误的
*   array() （一个空数组）
*   变量$变量；（声明的变量，但在类中没有值）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T03:53:37.790

您还应该在您的数据库表属性中设置一个不接受 NULL 值的约束。那么您的条目将不会在数据库中进行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-03T01:33:46.803

@John 这是一个很好的建议。

```
empty(trim($var)) 
```

我已经编程 6 年了，在检查变量是否为空之前，我从未想过修剪变量。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-18T02:56:26.933

尝试

```
if (strlen(trim($var)))==0 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-18T02:53:25.837

尝试：

```
$var = trim($var);
if (!empty($var)){
  //not empty
} 
```

# android - 哪一个是从android中的服务器（网络）解析数据的最佳方案

> ID：10646119
> 
> 赞同：0
> 
> 时间：2012-05-18T02:51:55.797
> 
> 标签：android

在我的应用程序中，我必须解析来自服务器的数据。我在一些站点中看到了一些使用的示例`AsyncTask`，一些使用回调方法的示例，一些使用线程和处理程序的示例。

哪一个最适合从服务器解析数据。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T03:06:50.957

**AsyncTasks、Threads 和 Handlers 与解析数据**完全无关，它们只是允许您将长时间运行的处理任务从 UI 线程中移开。无论如何，对于初学者，我建议`AsyncTask`在 Android 环境中记录良好、支持和最广泛使用。

# php - 从 iframe 上的容器获取 GET 变量？

> ID：10646121
> 
> 赞同：0
> 
> 时间：2012-05-18T02:52:04.913
> 
> 标签：php, iframe

我需要检查从 iframe 的 GET 中传递的变量。这可能吗？

EG 如何`$_GET['postID']`在 iframe 中回显变量？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T03:42:51.637

您是指从 iframe 中获取父框架的变量吗？如果你想这样做，你要么需要在 iframe src 中传递变量，要么将值写入会话，然后从 iframe 中读取会话（如果它在同一个域上）。

子框架是一个完全独立的 HTTP 请求，不能从父框架读取任何非持久数据，除非父框架显式传递它们，或者将它们写入（半）持久数据存储。

# ruby-on-rails - Sass 3.2 与 Rails 的预发布

> ID：10646122
> 
> 赞同：1
> 
> 时间：2012-05-18T02:52:16.353
> 
> 标签：ruby-on-rails, sass

我想将新的 SASS 3.2 与 rails (3.2) 一起使用。似乎 sass-rails 依赖于 sass 3.1

我如何着手制作 Gemfile 以使用预发布的 SASS 3.2 gem？

我曾尝试分叉 sass-rails 项目并自己升级 sass 依赖项，但没有运气，在尝试运行 bundler 时只有错误。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T02:53:40.643

您可以将版本设置为您的第二个参数`Gemfile`：

```
gem 'sass', '3.2.0.alpha.237' 
```

它将安装您设置的版本。

# android - android XMPP、SIP 或 UPD 流上的两路视频？

> ID：10646125
> 
> 赞同：0
> 
> 时间：2012-05-18T02:52:37.163
> 
> 标签：android, video, xmpp, sip

我想开发一个简单的双向视频通话功能并将其集成到我的应用程序中。我找到了两个解决方案：

1.  使用 Android SIP - 我需要处理发送和接收流
2.  使用 XMPP - Jingle - 我需要实现整个协议

问题是我对 SIP 很陌生，并且确实知道真正了解 android 上的 SIP 协议已经处理了什么以及需要多少开发。另一方面，我知道 Android 上的 XMPP 也不容易，尤其是在处理视频流时。

我希望人们知道哪种解决方案是最好的实施方案，因为我知道我想要： 1\. 一开始是一个简单的工作 2way 视频聊天 2\. 将功能扩展到用户系统（我想将 XMPP 与 openfire 一起使用会很容易地解决这个问题，但我有点害怕整合叮当声的工作量）

如果您有任何更简单的解决方案可以在 android 上集成音频/视频功能，我很高兴收到您的来信。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T03:40:29.360

两种解决方案在很多方面都是相同的。SIP 和 XMPP 都只处理信令。媒体部分（视频流、UDP 等）在“其他地方”完成并使用相同的协议集：用于传输和控制的 RTP 和 RTCP。H.264/VP8 用于视频编解码器，其他一些编解码器用于语音。

我会研究 WebRTC，看看它是否在 Android 上有任何可用的代码——这会很好地处理媒体部分。

# android - 使用 android 应用程序检查 ruby on rails 生成的 xml 版本

> ID：10646130
> 
> 赞同：0
> 
> 时间：2012-05-18T02:54:15.683
> 
> 标签：android, xml, ruby-on-rails-3

我有一个 android 应用程序，它以使用 Ruby on Rails 在我的服务器中生成的 xml 文件为基础。我只想下载新版本的 xml 文件，前提是它比我之前下载的文件更新。

我想知道在双方都做到这一点的最佳方法是什么：在服务器的某处以某种方式生成 xml 的版本，并使用 android.xml 获取文件的版本。

现在我正在下载一个xml，最后一天修改我想下载的xml，将它与我在本地下载的进行比较，但我认为这种方式效率不高。你能建议任何其他方法吗？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T06:10:21.383

您可以根据 HTTP GET 请求生成它，而不是预先生成 XML 文件然后下载它，从 Android 应用程序中，您可以在表示版本或上次更新时间的 URL 中传递一个参数。

那么你的服务器可以通过这个参数检查是否应该生成一个新版本。

# php - 为什么这个 MySQL 查询区分大小写？

> ID：10646131
> 
> 赞同：1
> 
> 时间：2012-05-18T02:54:22.750
> 
> 标签：php, mysql

我正在尝试对我的 MySQL 数据库进行查询。我希望它不区分大小写。如果数据库中存在“RED”并且我搜索“red”，我希望显示结果。

不幸的是，这个查询是区分大小写的，我不知道为什么：

```
$color = "red";
$size = "large";

$query = mysql_query("SELECT * FROM items WHERE color = '$color' OR size = '$size'");

while ($row = mysql_fetch_array($query)) {

    if ($color == $row['color']) {
        echo "The color exists in the database";
    }
    if ($size == $row['size']) {
        echo "The size exists in the database";
    }

} 
```

使用此示例，“RED”存在于数据库中，但未找到。

查询有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T02:55:36.720

因为你列的排序规则是区分大小写的

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-18T02:56:06.197

区分大小写由列的排序规则/表和数据库的默认排序规则决定

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-18T02:57:44.323

您可以使用`REGEXP`不区分大小写的运算符。请参阅[http://dev.mysql.com/doc/refman/5.1/en/regexp.html](http://dev.mysql.com/doc/refman/5.1/en/regexp.html)。

# closures - 在谷歌闭包编译器中使用高级编译

> ID：10646133
> 
> 赞同：0
> 
> 时间：2012-05-18T02:54:49.940
> 
> 标签：closures, google-closure-compiler

我是谷歌闭包编译器的新手，在阅读了闭包工具站点中的文档后，我创建了一个 js 并进行了测试。

但是我发现即使我使用高级编译级别，编译后的代码仍然很容易反编译。

例如，这是代码：

```
//2
window["_NameSpace_"]={};
window["_NameSpaceInternal_"]={};
(function() {
    _NameSpaceInternal_.Class = function() {
        var clazz = function() {
            this["init"] && this["init"].apply(this, arguments);
        };
        var pros = {}, arg;
        for(var c = 0, k = arguments.length; c < k; ++c) {
            arg = arguments[c];
            if( typeof arg === 'function') {
                if(c == 0 && k > 1) {
                    var F = function() {
                    };
                    F.prototype = arg.prototype;
                    pros = new F;
                    arg = arg.prototype;
                }
            } else {
                if(arg.init) {
                    clazz = arg["init"];
                    delete arg["init"]
                }
            }
        }
        for(var p in arg)
            pros[p] = arg[p]
        clazz.prototype = pros;
        return clazz;
    };
})();

(function(d){
    d["Person"]=_NameSpaceInternal_.Class({
        "init":function(name){
            this.name=name; 
        },
        "whatever":function(aaa){
        }
    });
})(_NameSpace_); 
```

编译后（我为人类阅读制作了一个漂亮的格式）：

```
window.__MapNS__ = {};
window.__MapNSImpl__ = {};
__MapNSImpl__.a = function() {
    function c() {
        this.init && this.init.apply(this, arguments)
    }
    for (var b = {}, a, d = 0, e = arguments.length; d < e; ++d) if (a = arguments[d], "function" === typeof a) 0 == d && 1 < e && (b = function() {}, b.prototype = a.prototype, b = new b, a = a.prototype);
    else {
        a.b && (c = a.init, delete a.init)
    }
    if (!b || !a) throw Error("You must provide an object to copy from and to");
    for (var f in a) b[f] = a[f];
    c.prototype = b;
    return c
};
(function(c) {
    c.Person = __MapNSImpl__.a({
        init: function(b) {
            this.name = b
        },
        whatever:function(x){
        }
    })
})(__MapNS__); 
```

现在，以“Person”的类定义为例，编译后，“Person”的所有方法显然都是为了黑客，即使这些方法必须暴露出来。

但我想知道我是否可以制作这样的编译代码；

```
...........
var xx="init",xxx="whatever",xxxx=="Person";
    c[xxxx] = __MapNSImpl__.a({
        xx: function(b) {
            this.name = b
        },
        xxx:function(x){
        }
    })

........... 
```

就像谷歌地图的压缩一样。

任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T12:19:11.813

您正在寻找的确切答案是通过使用 Java API 或通过制作编译器的自定义构建来启用编译器中的 AliasStrings 传递。默认情况下不启用 pass，因为在考虑 gzip 时它往往会产生更大的代码。

要真正获得与大多数谷歌产品相同的效果，您需要对代码进行大量更改。

1.  在全局范围内定义您的对象和方法。在全局声明它们之后将它们分配给命名空间。您可以使用该`output_wrapper`标志将编译后的代码包装在一个函数中，以防止全局范围冲突。例子：

    `function a() {}; window['Namespace']['obj'] = a;`

2.  直接定义您的对象 - 不要使用辅助方法。所以而不是

    `var a = _NameSpaceInternal_.Class({"init":function(name){ this.name=name; });`

    你会使用类似的东西：

    `function a(){}; a.prototype.name = ""; a.prototype.init = function(name) { this.name=name; };`

    这避免了使用带引号的语法，并允许编译器重命名您的属性和方法。

有关使用 Closure-compiler 以最佳方式编译/重命名的更多编码样式示例，请参阅[Closure 库](http://closure-library.googlecode.com/svn/docs/)。

# iphone - 如何在表格中以图像中显示的方式实现文本字段

> ID：10646134
> 
> 赞同：0
> 
> 时间：2012-05-18T02:55:23.850
> 
> 标签：iphone, uitableview, uitextfield

我想在每个 tableview 上添加文本字段，并使用它们的标签访问文本字段的文本。我该怎么做，见下图。

![在此处输入图像描述](../Images/4c93883bfc6742b9eeaa63206785ad7f.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T04:22:36.347

你必须自定义你的 tableViewCell 你可以在你的`cellForRowAtIndexPath`方法中做到这一点。

当您在该方法中创建单元格时，您可以执行以下操作：

```
UITextField *textField = [[UITextField alloc] init];
// Set a unique tag on each text field
textField.tag = 101;
// Add general UITextAttributes if necessary
textField.enablesReturnKeyAutomatically = YES;
textField.autocorrectionType = UITextAutocorrectionTypeNo;
textField.autocapitalizationType = UITextAutocapitalizationTypeNone;
[cell.contentView addSubview:textField];
[textField release]; 
```

之后，您想要访问您的文本字段的每个人都可以执行以下操作：

```
UITextField *myTextField = (UITextField*)[cell viewWithTag:yourTag]; 
```

希望这就是你要找的..

**更新**

如您所见，我将标签 101 分配为静态。这可以是任何数字，但请确保在同一单元格中没有任何其他具有相同标签的视图。如果您在另一个单元格中，则不是问题。

现在在任何地方，如果让我们说`didSelectRowAtIndexPath`您可以执行以下操作：

```
 UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath];
 UITextField *myTextField = (UITextFiled*)[cell viewWithTag:101]; 
```

这样，您将首先获得您的手机。现在，您的单元格只有一个带有 101 标签的视图，因此无论您对其他 textField 是否有相同的标签，您都可以获取您的文本字段，因为该单元格并非对所有人都相同。

干杯

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T05:49:01.340

```
UITextField *myTextField = (UITextField*)[cell viewWithTag:yourTag];
myTextField.tag=indexPath.row; 
```

这种方式分配 10 个文本字段标签。在 textfield 委托方法之后，您可以从不同的 10 个标签中检索该文本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-18T06:07:32.807

// 要从 UITextField 获取文本，请在初始化 Textfield 后添加以下代码

```
[yourTextField addTarget:self action:@selector(getTextFieldValue:) forControlEvents:UIControlEventEditingDidEnd]; 
```

和这个方法

```
- (void) getTextFieldValue:(UITextField *)textField{
    NSLog(@"GetTextvalue");
    if (textField.tag == 0) {
        NSLog(@"1--->%@",textField.text);
    }else if(textField.tag == 1){
        NSLog(@"2--->%@",textField.text);
    }else if(textField.tag == 2){
        NSLog(@"3--->%@",textField.text);
    }
} 
```

# java - 如何将我的 java swing 应用程序的连接传递到 Crystal Reports XI？

> ID：10646135
> 
> 赞同：1
> 
> 时间：2012-05-18T02:55:27.913
> 
> 标签：java, swing, jdbc, crystal-reports, crystal-reports-xi

我有我在我的摇摆应用程序上使用的这段代码：

```
 ReportClientDocument rpt =  new ReportClientDocument();
    rpt.open(reportPath+"APVendorList.rpt", 0);
    rpt.getReportSource();

    ReportViewerBean viewer = new ReportViewerBean();
    viewer.init(new String[0], null, null, null);
    //viewer.setHasGroupTree(false);
    viewer.setReportSource(rpt.getReportSource()); 
```

问题是，每当我尝试使用 jframe 加载报告时，它总是要求提供登录凭据：

```
Database Logon:
Server Name: Localhost
Database Name: <blank and cannot be edited>
User ID:
Password: 
```

有没有办法在我查看报告时不输入这些信息？或者我可以将 java.sql.Connection 传递给它？此外，它似乎不知道要连接到哪个数据库。请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T03:49:14.920

您可以设置属性值，如下所示：

```
ReportClientDocument clientDoc = new ReportClientDocument();
....
DatabaseController dbController=clientDoc.getDatabaseController();
IConnectionInfo ConnInfo = dbController.getConnectionInfos(null).getConnectionInfo(0);
com.crystaldecisions.sdk.occa.report.lib.PropertyBag boPropertyBag1 = new com.crystaldecisions.sdk.occa.report.lib.PropertyBag();
// Set the properties for the connection
boPropertyBag1.put("JDBC Connection String", connString);
boPropertyBag1.put("Database Class Name", dbClassName);
boPropertyBag1.put("Connection URL", connString);
boPropertyBag1.put("Server", serverHost);
....
// Assign the properties to the connection info
ConnInfo.setAttributes(boPropertyBag1);
// Set the DB Username and Pwd
ConnInfo.setUserName(usrName);
ConnInfo.setPassword(pwd); 
```

希望这可以帮助...

# objective-c - 在 TableViewCell 的内容视图中放置 UITableView 的教程？

> ID：10646136
> 
> 赞同：0
> 
> 时间：2012-05-18T02:55:29.537
> 
> 标签：objective-c, ios5, uitableview

我一直在尝试找到一个教程来执行以下操作：

我有`UITableViewController`两个部分，每部分 1 行。

第二部分中的行显示了一个项目列表，这些项目只是一个字符串列表（就像具有`UITableView`基本单元格类型的基本单元格）。

所以基本上，如果我有 2 个项目要在其中列出`UITableViewCell`，我想在`UITableView`其中创建一个`contentView`1 部分和 2 行，每行都有一个`UILabel`供我访问。

谁能指出我正确的方向？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T09:45:06.970

原则上，我认为您应该放弃在表格视图中使用表格视图的想法。外部表格视图将滚动，内部表格视图也会滚动，从而导致非常混乱且可能令人沮丧的用户体验。您所描述的内容（主细节）的标准设置是在一个单独的表格视图中显示细节，该视图可以动画进出；或将您的表格视图划分为包含数据的部分（使用下面的部分获取您提到的其他数据）。

如果你想继续你的想法，你应该能够解释为什么用户在滚动第一部分时必须看到第二部分。我认为这将很难争论。

话虽如此，当然可以在表格视图单元格中包含表格视图。只需将表格视图拖到界面构建器中的单元格中，给它一个唯一的名称，将它与您的控制器（委托和数据源）连接起来，并确保您在委托和数据源方法中区分外部和内部表格视图。

例如，

```
-(UITableViewCell*) tableView:(UITableView*)tableView 
   cellForRowAtIndexPath:(NSIndexPath*)indexPath {

   if (tableView==innerTableView) {
      // get and configure the cells
   }
   else {
      // configure the cells of the original table view
   }
} 
```

# php - 转义字符串是什么意思？

> ID：10646142
> 
> 赞同：94
> 
> 时间：2012-05-18T02:57:06.923
> 
> 标签：php, mysql, security, escaping

我正在阅读[在进入 SQL 查询之前是否需要转义 $_SESSION['username']？](https://stackoverflow.com/questions/10645067/does-sessionusername-need-to-be-escaped-before-getting-into-an-sql-query)它说“您需要转义传递给 sql 查询的每个字符串，无论其来源如何”。现在我知道这样的事情真的很基本。谷歌搜索出现了超过 20,000 个结果。仅 Stackoverflow 就有 20 页的结果，但没有人真正解释什么是转义字符串或如何进行转义。这只是假设。你能帮助我吗？我想学习，因为我一如既往地使用 PHP 制作 Web 应用程序。

我看过： [插入转义字符](https://stackoverflow.com/questions/1653040/inserting-escape-characters)，[Java中的所有转义字符是什么？](https://stackoverflow.com/questions/1367322/what-are-all-the-escape-characters-in-java), [不能用 addcslashes() 转义字符串](https://stackoverflow.com/questions/9341068/cant-escape-a-string-with-addcslashes), [转义字符](https://stackoverflow.com/questions/2237703/escape-caracter), [mysql_real_escape_string() 到底是做什么的？](https://stackoverflow.com/questions/6327679/what-does-mysql-real-escape-string-really-do), [如何在 php 中转义字符串中的双引号？](https://stackoverflow.com/questions/9389191/how-can-i-escape-double-quotes-from-a-string-in-php), [MySQL_real_escape_string 不加斜线？](https://stackoverflow.com/questions/6627971/mysql-real-escape-string-not-adding-slashes)， [从 php 中的字符串中删除转义序列](https://stackoverflow.com/questions/7178399/remove-escape-sequences-from-string-in-php)我可以继续，但我相信你明白了。这不是懒惰。

* * *

## 回答 #1

> 赞同：150
> 
> 时间：2012-05-18T03:01:43.300

转义字符串意味着减少该字符串中使用的引号（和其他字符）中的歧义。例如，当您定义一个字符串时，通常用双引号或单引号将其括起来：

```
"Hello World." 
```

但是如果我的字符串中有双引号呢？

```
"Hello "World."" 
```

现在我有歧义 - 解释器不知道我的字符串在哪里结束。如果我想保留我的双引号，我有几个选择。我可以在我的字符串周围使用单引号：

```
'Hello "World."' 
```

或者我可以逃避我的报价：

```
"Hello \"World.\"" 
```

任何以斜杠开头的引号都会被*转义*，并被理解为字符串值的一部分。

在查询方面，MySQL 有一些它监视的关键字，我们不能在查询中使用这些关键字，而不会造成一些混乱。假设我们有一个值表，其中一列名为“Select”，我们想要选择它：

```
SELECT select FROM myTable 
```

我们现在在查询中引入了一些歧义。在我们的查询中，我们可以通过使用反引号来减少这种歧义：

```
SELECT `select` FROM myTable 
```

这消除了我们在选择字段名称时使用错误判断而引入的混淆。

只需将您的值传递给[`mysql_real_escape_string()`](http://php.net/manual/en/function.mysql-real-escape-string.php). 在下面的示例中，您可以看到我们正在通过此函数传递用户提交的数据，以确保它不会对我们的查询造成任何问题：

```
// Query
$query = sprintf("SELECT * FROM users WHERE user='%s' AND password='%s'",
            mysql_real_escape_string($user),
            mysql_real_escape_string($password)); 
```

转义字符串还有其他方法，例如`add_slashes`, `addcslashes`,`quotemeta`等，尽管您会发现当目标是运行安全查询时，大多数开发人员更喜欢`mysql_real_escape_string`or `pg_escape_string`(在 PostgreSQL 的上下文中。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-05-18T03:00:59.270

某些字符对您正在使用的 SQL 数据库具有特殊含义。在查询中使用这些字符时，它们可能会导致意外和/或意外行为，包括允许攻击者破坏您的数据库。为了防止这些字符以这种方式影响查询，需要对它们进行转义，或者换一种说法，需要告诉数据库不要将它们视为该查询中的特殊字符。

在`mysql_real_escape_string()`它转义的情况下`\x00`, `\n`, `\r`, `\`,和这些`'`，当不转义时，可能会导致前面提到的问题，包括 MySQL 数据库的 SQL 注入。`"``\x1a`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-06-01T14:27:44.573

为简单起见，您基本上可以将反斜杠“\”想象为运行时对解释器的命令。

例如，在解释此语句时：

```
$txt = "Hello world!"; 
```

在词法分析阶段（或将语句拆分为单独的标记时），这些将是标识的标记 `$`, `txt`, `=`, `"`, `Hello world!`, `"`, 和`;`

然而，字符串中的反斜杠将导致一组额外的标记，并被解释为对紧随其后的字符执行某些操作的命令：例如

```
$txt = "this \" is escaped"; 
```

产生以下标记： `$`, `txt`, `=`, `"`, `this`, `\`, `"`, `is escaped`, `"`, 和`;`

`\`解释器已经知道（或者已经预设了它可以采用的路线）基于令牌之后的字符要做什么。因此，在`"`它继续将其视为字符而不是字符串结尾命令的情况下。

# google-maps - 谷歌地图结果为 XML 或 JSON

> ID：10646144
> 
> 赞同：0
> 
> 时间：2012-05-18T02:57:43.610
> 
> 标签：google-maps

我有这个网址可以查看具有给定坐标的最近医院。

```
http://maps.google.com/maps?q=hospitals+near+{lat},{long} 
```

他们是一种以 XML 或 JSON 格式获取结果的方法吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T03:12:10.790

您有很多选择，从[这里](https://developers.google.com/maps/documentation/)开始。如果您想要一个 URL，您可以查询并取回 XML 或 JSON，然后转到[此处](https://developers.google.com/maps/documentation/webservices/)。

这些是直接指向 Google API 文档的链接。您有许多可用选项，包括 JavaScript API 以及可以检索 JSON 或 XML 的 Web 服务。

# html - 指定 div 之间的关系

> ID：10646149
> 
> 赞同：0
> 
> 时间：2012-05-18T02:58:29.597
> 
> 标签：html, href, rel

我有一个相当大的页面元素集合，当单击它们时，它们会滑出并滑入新元素。使用标签将元素链接在一起会很好`<a>`，但不幸的是每个元素内部的内容不能单独用`<span>`s 和其他内容级别的元素来表达，所以我不得不使用 a`<div>`作为可点击元素。

`<div>`使用 a或类似元素指定元素之间关系的最佳方法是什么？

我可以做类似的事情：

```
<div id="attribute-1" rel="{href: '#subattribute-1'}">Details about subattribute 1</div> 
```

并将`rel`元素解析为 Javascript。但是使用这样的`rel`元素感觉很笨拙；我缺少更好的解决方案吗？

谢谢，凯文

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T03:06:22.940

你可以使用`data-*`属性。喜欢`data-target`。或者您可以将其包装`div`在一个`a`（在 HTML5 中有效）

# android - Android ActionBar setActionView 布局问题

> ID：10646150
> 
> 赞同：5
> 
> 时间：2012-05-18T02:58:47.600
> 
> 标签：android, android-4.0-ice-cream-sandwich

我一直在尝试使用 ICS 中 ActionBar 中的 setActionView

似乎它应该是直截了当的，但不知何故我没有得到我希望的布局对齐。正如您在下图中所见，“目标”图标在其布局中正确居中。但是当我 setActionBar(progress) 时，无论我尝试什么，进度视图总是与右侧对齐。

![在单击菜单项之前](../Images/4b6bdfe2ae4bd6279fa63b1bc369078f.png) ![点击菜单项后](../Images/d14ce2fd4dbe1e7fed75de1839fff173.png)

这是单击菜单项之前和之后的两种状态。如您所见，进度视图始终向右对齐。我已经尝试将我的进度布局 xml 中的重力选项从左到右更改为中心，无论我做什么更改它似乎都没有改变任何东西。

我还没有找到任何关于这个问题的信息，所以我想我一定是做错了什么。

有人有线索吗？谢谢您的帮助！

这是我的操作栏菜单布局“action_bar_menu.xml”

```
<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:id="@+id/locate"
          android:title="locate"
          android:icon="@drawable/locate"
          android:showAsAction="ifRoom|withText" />
</menu> 
```

这是我的进度条布局'inderterminate_progress.xml'

```
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
             android:layout_width="match_parent"
             android:layout_height="match_parent"
             android:gravity="center">

    <ProgressBar android:layout_width="25dp"
                 android:layout_height="25dp"
                 android:layout_gravity="center"
                 android:indeterminate="true"
                 style="?android:attr/progressBarStyleInverse"/>
</FrameLayout> 
```

最后这是我的 testx 活动

```
public class HelloAndroidActivity extends Activity {

    /**
     * Called when the activity is first created.
     * @param savedInstanceState If the activity is being re-initialized after
     * previously being shut down then this Bundle contains the data it most
     * recently supplied in onSaveInstanceState(Bundle). <b>Note: Otherwise it is null.</b>
     */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        getActionBar().setTitle("Test");
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.action_bar_menu, menu);
        return true;
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        super.onOptionsItemSelected(item);

        if (R.id.locate == item.getItemId()) {

            final MenuItem menuItem = item.setActionView(R.layout.inderterminate_progress);

            new Thread(new Runnable() {
                @Override
                public void run() {
                    SystemClock.sleep(3000);
                    runOnUiThread(new Runnable() {
                        @Override
                        public void run() {
                            menuItem.setActionView(null);
                        }
                    });
                }
            }).start();
        }

        return true;
    }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-02T11:34:05.310

如下所示，显式定义样式并在布局的根目录中添加 4dip 填充似乎可以解决此问题

```
<ImageView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center"
    android:paddingLeft="4dip"
    android:paddingRight="4dip"
    style="?android:attr/actionButtonStyle" /> 
```

这似乎在[此处的 android 样式表中使用](http://source-android.frandroid.com/frameworks/base/core/res/res/layout/action_menu_item_layout.xml)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-12T20:05:50.793

有点晚但正确的解决方案不是绝对值，例如 4dp。正确的方法是将 minWidth 设置为 ABS 值：

```
android:minWidth="@dimen/abs__action_button_min_width" 
```

进度条示例：

```
<?xml version="1.0" encoding="utf-8"?>

<ProgressBar xmlns:android="http://schemas.android.com/apk/res/android"
             android:minWidth="@dimen/abs__action_button_min_width"
             android:layout_width="wrap_content"
             android:layout_height="wrap_content"
             android:focusable="true"
             android:layout_gravity="center"
             style="@android:style/Widget.ProgressBar.Small"/> 
```

# xaml - Windows 8 应用开发中的 GoBack() 事件

> ID：10646156
> 
> 赞同：0
> 
> 时间：2012-05-18T03:00:00.297
> 
> 标签：xaml, navigation, windows-8, windows-runtime, winrt-xaml

我正在设计一个 Windows 8 Metro 阅读应用程序，并且在正确的开始时遇到了导航事件的问题。为了简化问题，描述如下：

有两个页面：MainPage.xaml 和 DetailPage.xaml。MainPage.xaml 包含一个列表视图，该项目是一个文章对象（那些文章项目是从网上下载的），单击该项目。框架将使用

```
void ItemView_ItemClick(object sender, ItemClickEventArgs e)
        {
            // Navigate to the appropriate destination page, configuring the new page
            // by passing required information as a navigation parameter
            this.Frame.Navigate(typeof(DetailPage), e.ClickedItem);
        } 
```

阅读全文后，用户将单击“返回”按钮，该按钮定义为

```
<Button x:Name="backButton" Click="GoBack" IsEnabled="{Binding Frame.CanGoBack, ElementName=pageRoot}" Style="{StaticResource BackButtonStyle}"/> 
```

那么问题来了，本来应该Frame刚刚导航回MainPage，但是导航之后，MainPage中的DataContext不见了，又调用了MainPage的构造函数，获取了web资源。

作为一名 Windows Phone 开发人员，我对这个问题感到困惑。任何人都可以帮助我。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T17:22:23.337

[WinRT/XAML 中的Page.NavigationCacheMode](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.controls.page.navigationcachemode.aspx)指定的默认行为与 Windows Phone 上的 PhoneApplicationPage 不同。它默认为[NavigationCacheMode](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.navigation.navigationcachemode.aspx) .Disabled，而 NavigationCacheMode.Enabled 或 .Required 是您可能想要使用的，以使其按预期工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T08:26:04.070

我在这里[写了关于这个问题的博客](http://mikaelkoskinen.net/post/WinRT-Navigation-Cache-%28Why-Going-Back-to-the-Previous-Page-Creates-a-new-Instance-of-the-Page%29.aspx)，希望对您有所帮助。

即使在启用 NavigationCacheMode 之后，与 Windows Phone 相比也有一点不同：在向后导航和向前导航时使用缓存。在 Windows Phone 中，向前导航时总是会创建一个新实例。

在我的 Windows 8 应用程序中启用 NavigationCacheMode 后，我遇到了一些内存使用问题，因此这是您应该跟踪的一件事。

# python - 从窗口中删除小部件

> ID：10646157
> 
> 赞同：0
> 
> 时间：2012-05-18T03:00:03.357
> 
> 标签：python, tkinter, widget

所以在我的程序中，每当我放置`grid_remove()`函数时，它通常都会删除小部件。每当我第一次运行程序时（也就是说，不会因为猜错而失去任何分数），它会删除大部分小部件。但是，每当我猜错并拿走分数（效果很好）时，小部件就会懒洋洋地留在窗口上。有什么帮助吗？

这是代码：（我认为错误发生在`def numright`and之后的某个地方`def wordguess`）

```
import random
from tkinter import *
from tkinter import messagebox

text_doc = open("test.txt", "r")
text = text_doc.read()
numbOfletters = len(text)
random_letter = random.randint(0,numbOfletters-1)
letter = text[random_letter]
points = 50
username = ""
is_there = 0

class GUIFramework(Frame):

    def __init__(self,master=None):

        Frame.__init__(self,master)

        self.master.title("Window")
        self.master.geometry("420x75")

        self.grid(padx=10,pady=10)
        self.CreateWidgets()

    def CreateWidgets(self):

        self.lbText = Label(self, text="Would you like to play \"Find the secret letter?\"", font="Verdana")
        self.lbText.grid(row=0, column=0, columnspan = 3)

        self.button = Button(self, text="Yes, please", command=self.next, background = "green")
        self.button.grid(row=1, column=0)

        self.btnDisplay = Button(self, text="No, thanks", command = self.window, background = "red")
        self.btnDisplay.grid(row=1, column=1)

    def window(self):

        self.tl = Toplevel(self)
        self.master.destroy()

    def next(self):

        self.lbText.grid_remove()
        self.button.grid_remove()
        self.btnDisplay.grid_remove()

        self.lbText = Label(self, text="You're currently playing \"Find the secret letter\"", font="Verdana")
        self.lbText.grid(row=0, column=0, columnspan = 10)

        self.username = Label(self, text="Enter your username")
        self.username.grid(row=1, column=0)

        self.enText = Entry(self)
        self.enText.grid(row=1, column=2, columnspan=5)

        self.ok = Button(self, text="OK", command = self.wordguess)
        self.ok.grid(row=1, column=8)

    def wordguess(self):

        global username
        self.master.geometry("420x90")
        username = self.enText.get()

        self.username.grid_remove()
        self.enText.grid_remove()

        self.word = Label(self, text="You have {0} points, enter a word?".format(50))
        self.word.grid(row=1, column=0)

        self.entry = Entry(self)
        self.entry.grid(row=1, column=1, columnspan=4)

        self.ok = Button(self, text="OK", command = self.numright)
        self.ok.grid(row=1, column=8)

    def numright(self):

        global points
        global is_there

        word = self.entry.get()
        word = word.lower()
        is_there = word.count(letter)

        self.lbText.grid_remove()
        self.word.grid_remove()
        self.entry.grid_remove()
        self.enText.grid_remove()
        self.ok.grid_remove()

        if is_there > 4:
            self.master.geometry("200x70")
            self.done = Label(self, text = "Congradulations, you have won!")
            self.done.grid(row = 0, column = 0)

            self.ok = Button(self, text="OK", command = self.window)
            self.ok.grid(row=1, column=0)

        else:
            if (is_there < 5) and (is_there > 0):
                points = points - 5

            else:
                points = points - 10

            self.lbText = Label(self, text="You're currently playing \"Find the secret letter\"", font="Verdana")
            self.lbText.grid(row=0, column=0, columnspan = 10)

            self.numright = Label(self, text="That word has {} secret letters".format(is_there))
            self.numright.grid(row=2, column=0)

            self.word = Label(self, text="You have {0} points, enter a word?".format(points))
            self.word.grid(row=1, column=0)

            self.entry = Entry(self)
            self.entry.grid(row=1, column=1, columnspan=4)

    def scores(self):
        output = open("names.txt", "a")
        output.write("{0:2}      {1} \n".format(str(points), username))
        output.close()
        output = open("names.txt", "r")

if __name__ == "__main__":
    guiFrame = GUIFramework()
    guiFrame.mainloop() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T21:57:55.873

您的问题是行（在 numright 方法的 else 子句中）：

```
 self.numright = Label(self, text="That word has {} secret letters".format(is_there))
        self.numright.grid(row=2, column=0) 
```

self.numright 是您的 GUIFramework 类中的一个方法，您可以在此处踩踏并将其重新分配给 Label 字段。此外，您可能必须将 self.ok 按钮放回页面上，因为您在上面将其 grid_removed。我添加了以下几行：

```
self.ok = Button(self, text="OK", command = self.numright)
self.ok.grid(row=1, column=8) 
```

到 numright 方法的末尾将 OK 按钮放回去。然后我通过制作一个名为 self.numright 的不同方法来摆弄，这就是我发现重新分配错误的方式。

# matrix - 在MATLAB中计算矩阵行列式的错误

> ID：10646159
> 
> 赞同：1
> 
> 时间：2012-05-18T03:00:32.403
> 
> 标签：matrix, octave, determinants

我有这个矩阵

```
A1 = [7.4011 9.8999 1.9990; 7.4011 9.8988 1.9990; 7.4011 9.8999 1.9990]

A1 =
      7.4011   9.8999   1.9990
      7.4011   9.8988   1.9990
      7.4011   9.8999   1.9990 
```

但是当我执行指令时`det(A1)`出现以下错误：

```
error: det: invalid dense matrix type 
```

怎么了？

我尝试在网上查找有关此错误的信息，但找不到任何东西。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T11:31:39.273

好吧，我建议您在[http://www.gnu.org/software/octave/download.html](http://www.gnu.org/software/octave/download.html)上下载最新的 Octave 版本，正如 @WarrenWeckesser 所说。这将是您使用的旧版本的问题。

[我刚刚为 Windows ( http://wiki.octave.org/Octave_for_Windows](http://wiki.octave.org/Octave_for_Windows) )安装了 Octave-3.6.1-mingw + octaveforge pkgs ，它运行良好！与`det(A1)`：

```
ans = 0 
```

由于该矩阵上至少有两条线相等，因此结果行列式必须为零！

# php - PHP 性格测验

> ID：10646161
> 
> 赞同：0
> 
> 时间：2012-05-18T03:00:50.407
> 
> 标签：php

我正在使用 php 创建一个网站，您将通过一个个性测验将您分为不同的类别，我真的不知道如何解释文本，所以我将在下面展示一个示例。

**问题一：你喜欢吃吗？**
(+) 哎呀！（这个值是 a）
() EW，没有。（这个有b的值）

**问题2：你吃蜘蛛吗？**
（+）是的。（这个值是a）
（）NO。（这个有 b 的值）

（显然这些不是真正的问题，只是测试）现在假设用户选择了更多适合个性 a 的问题，它们以 7 a 和 3 b 结尾。我将如何使用这些信息来展示他们的个性？

我的第一个想法是将他们得到的所有值（在本例中为 7 a，3 b）相加，然后使用 IF 语句选择与值 a 对应的个性，但要做到这一点，我会使用 PHP Count 函数吗？

如果有人能指出我正确的方向去做这件事，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T02:26:49.120

假设您计算结果数组中有多少 a 和 b（来自您的表单？），您可以使用这样的 IF 语句

```
<?php 
   // once your count is set...
   if ($counta < $countb) {echo "<img src='/personalitya.jpg' />";}
   elseif ($counta > $countb) {echo "<img src='personalityb.jpg' />";}
?> 
```

或者你可以做更具体的结果并设置

```
if ($counta == 7) {echo "<img src='/personality7.jpg' />";}
if ($counta == 6) {echo "<img src='/personality6.jpg' />";} 
```

等等...我认为这就是您要寻找的...如果我理解您的问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T03:10:04.203

假设您将答案存储在一个数组中，

第一次使用数组过滤器获取 a 和 b 的总数 [http://php.net/manual/en/function.array-filter.php](http://php.net/manual/en/function.array-filter.php)

然后你可以使用 count() 函数来计算有多少个 a 和 b。

编辑：发布了错误的链接。

# jquery - 使用带有 HTML 本地存储的 jquery 可拖动时，Div 位置略有偏移

> ID：10646169
> 
> 赞同：6
> 
> 时间：2012-05-18T03:02:08.567
> 
> 标签：jquery, html, jquery-ui

我有一个可拖动的 div 元素，它使用 HTML 5 localStorage 来记住它在用户页面上的位置。这工作正常。

`window.addEventListener`如果 div 被拖到另一个打开的选项卡中，我也使用来更新位置。这可行，但一个浏览器选项卡中的 div 位置与另一个选项卡中的 div 略有偏移。有谁知道是什么原因造成的？

下面是一个基本示例。将其保存为 html 文件并在两个不同的选项卡中打开它以查看发生了什么。

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" >
<head>
    <title>Untitled Page</title>

    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.18/jquery-ui.min.js"></script>
    <style type="text/css">
    .note
    {
        position: absolute;
        width:200px;
        height:220px;
        background: #2E2E2E;
        top: 50px;
        left: 50px;

     transform:rotate(7deg);
    -ms-transform:rotate(7deg);
    -moz-transform:rotate(7deg);
    -webkit-transform:rotate(7deg);
    -o-transform:rotate(7deg);
    }

    </style>

    <script type="text/javascript">
        $(function () {

            var note = $(".note");
            updatePosition(note);

            note.draggable({ stop: function () {

                var left = $(this).position().left;
                var top = $(this).position().top;

                localStorage.setItem("left", left);
                localStorage.setItem("top", top);

            }
            });

            window.addEventListener("storage", function (e) {
                updatePosition(note);
            }, 

            false);

        });

            function updatePosition(note) {

            var left = localStorage.getItem("left");
            var top = localStorage.getItem("top");
            note.css({ left: left + "px", top: top + "px" });

            }
    </script>

</head>
<body>

<div class="note"></div>

</body>
</html> 
```

更新：导致偏移的 CSS 转换属性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T05:42:27.197

我在这里使用 Chrome 的检查器发现了问题。

`$(".note").position()`不同于真实的`left`和`top`的`note`

这是因为您旋转了元素，您可以通过删除`transform`css 中的 来自己查看。可以在此处找到修复：[使用 CSS3 旋转属性时的 jQuery .position() 奇怪](https://stackoverflow.com/questions/5078897/jquery-position-strangeness-while-using-css3-rotate-attribute)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T05:42:39.523

你看过这个bug吗？ [http://bugs.jquery.com/ticket/8362](http://bugs.jquery.com/ticket/8362)

我看到你的 JS 做的一切都是正确的，但是 jQuery 从 .css() 返回了错误的值。

这是一个工作示例： [http ://db.tt/gCHuZ7zz](http://db.tt/gCHuZ7zz)

并且相关代码更改：

```
 note.draggable({ stop: function () {

            var left = this.offsetLeft;
            var top = this.offsetTop;

            localStorage.setItem("left", left);
            localStorage.setItem("top", top);

        }
        });

        function updatePosition(note) {

        var left = localStorage.getItem("left");
        var top = localStorage.getItem("top");
        note.css({ left: left + "px", top: top + "px" });

        note[0].offsetTop = top;
        note[0].offsetLeft = left

        } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-18T05:49:35.710

尝试

```
 var left = this.offsetLeft;
  var top = this.offsetTop; 
```

代替

```
 var left = $(this).position().left;
  var top = $(this).position().top; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-18T05:09:50.987

我认为css类的转换属性没有问题。其实是html5本地存储的行为。

**本地存储：**

*   值在 Windows 和浏览器的生命周期之后仍然存在。
*   在同一来源运行的每个窗口或选项卡之间共享值。

现在，查看您设置的代码并获取 div 在本地存储中的位置。当 div 被拖动时，你的“window”事件监听器被触发，它从本地存储中获取位置并更新位置。因此，这就是为什么在浏览器的不同选项卡上 div 保留相同位置的原因。

你应该试试这个

```
var left = this.offsetLeft;
var top = this.offsetTop; 
```

# javascript - 在检票口加载页面中添加 twitter 小部件

> ID：10646172
> 
> 赞同：0
> 
> 时间：2012-05-18T03:02:19.970
> 
> 标签：javascript, wicket, twitter4j

我是检票口的新手。我正在尝试在我的检票口页面中添加 twitter 搜索小部件，并希望在页面加载时使其工作。 [https://twitter.com/about/resources/widgets/widget_search](https://twitter.com/about/resources/widgets/widget_search)

我创建了一个新面板并实现了 IHeaderContributor

```
public class TwitterPanel extends Panel implements IHeaderContributor{
public void renderHead(IHeaderResponse response)
{
// response.renderOnLoadJavaScript("alert('page loaded!');");

response.renderJavaScriptReference
 ("http://widgets.twimg.com/j/2/widget.js");
response.renderOnLoadJavaScript
`enter code here`("new TWTR.Widget({"
+"version: 2,".....)

 }} 
```

并将此面板添加到我的主页中。

我想让它在我的主页加载时工作。但它没有发生。我觉得脚本没有被调用。如果您有任何想法，请帮助...使其工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T05:46:39.920

检查[https://github.com/wicketstuff/core/tree/core-1.5.x/jdk-1.5-parent/twitter-parent](https://github.com/wicketstuff/core/tree/core-1.5.x/jdk-1.5-parent/twitter-parent)

# java - 如何使用 Java 从不规则文本中提取 JSON

> ID：10646176
> 
> 赞同：1
> 
> 时间：2012-05-18T03:02:59.143
> 
> 标签：java, json, extract

这是一个告诉我们如何从文本中提取 json 的链接！ [从文本中提取 JSON](https://stackoverflow.com/questions/10574520/extract-json-from-text)

但是我需要它使用高性能的Java，我真的不想使用三部分插件来帮助。

谁能帮我？它让我发疯了。谢谢你们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T03:09:16.440

你真的有性能问题吗？很难知道你是否没有测量过。如果您还没有编写任何代码，这很难做到。看，您不会编写一个没有其他人尚未为您完成的超快速 JSON 解析器。您将不得不做的工作量与任何创建 3rd 方插件的人已经完成的工作量大致相同。别再担心性能了，去找一个库来帮你做这件事。那里有很多。普通的香草 JSONObject 符合要求。

[http://json.org](http://json.org)

我个人喜欢[http://flexjson.sourceforget.net](http://flexjson.sourceforget.net)它具有下降性能和良好的功能集。

# ruby - 有没有办法找出导致在 ruby 中调用另一个方法的方法的名称？

> ID：10646177
> 
> 赞同：0
> 
> 时间：2012-05-18T03:03:01.537
> 
> 标签：ruby, metaprogramming

我刚刚开始使用元编程，想知道是否有一种方法可以查看类似于类祖先链的方法链？

例如，假设我有一个如下所示的方法：

```
def method_a
  method_b
end

method_b    
  # ..    
end 
```

如果我这样调用method_a：

```
method_a 
```

它应该运行 method_b

有没有办法**从**method_b 确定 method_a 负责调用它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T03:06:51.417

看看[`Kernel#caller`](http://www.ruby-doc.org/core-1.9.3/Kernel.html#method-i-caller)，它应该会给你你想要的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T03:10:36.893

如果您使用的是 ruby​​ 调试器，那么`where`命令将为您当前的代码执行吐出调用堆栈

# django - 为什么 Django 忽略我的 ROOT_URLCONF 设置？

> ID：10646178
> 
> 赞同：0
> 
> 时间：2012-05-18T03:03:30.803
> 
> 标签：django

我尝试`ROOT_URLCONF`在我的项目（称为注册）中的 settings.py 中设置各种字符串：`ROOT_URLCONF = 'registration.urls'`, `ROOT_URLCONF = 'foo.urls'`, `ROOT_URLCONF = 'monkey.urls'`, `ROOT_URLCONF = 'registration.registration.urls'`.

无论如何，我在我的主页上得到这个输出：

```
Page not found (404)
Request Method: GET
Request URL:    http://78.198.124.245/
Directory indexes are not allowed here.
You're seeing this error because you have DEBUG = True in your Django settings file. 
```

这是为什么？这是我用来配置Passenger的文件（passenger_wsgi.py）。该文件位于“/home/david/registration/registration/”中。

```
import os, sys

os.environ.setdefault("DJANGO_SETTINGS_MODULE", "registration.settings")

# This application object is used by any WSGI server configured to use this
# file. This includes Django's development server, if the WSGI_APPLICATION
# setting points here.
from django.core.wsgi import get_wsgi_application
application = get_wsgi_application()

sys.path.append(os.getcwd())
sys.path.append("/home/david/registration/registration")
sys.path.append("/home/david/registration/registration/app") 
```

/home/david/registration/registration/urls.py 看起来像这样。

```
from django.conf.urls import patterns, include, url, http

def myFunction(request):
    return http.HttpResponse("A mapped URL")

urlpatterns = patterns('',
    (r'^$', 'myFunction')
) 
```

为什么我的 Django 应用程序完全忽略我的 ROOT_URLCONF 设置并在我每次访问我的主页时返回相同的输出？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T05:07:46.353

您的任何尝试实际上都不存在于 python 路径中。如果路径是`/home/david/registration/registration`并且网址在其中，`/home/david/registration/registration/urls.py`那么从第一个到第二个的相对路径应该是什么？

# sharepoint-2010 - 部署解决方案时激活 Sharepoint 功能

> ID：10646183
> 
> 赞同：0
> 
> 时间：2012-05-18T03:04:40.157
> 
> 标签：sharepoint-2010, wsp

我想在部署新的 wsp 解决方案时自动激活一项功能（特别是 SharePoint Server 发布功能）。这可能吗。

我在 Visual Studio Sharepoint 项目中的何处以及如何执行此操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T06:05:09.093

嗨 Luis 请检查此解决方案如何以编程方式激活功能

[http://social.technet.microsoft.com/Forums/en-US/sharepoint2010programming/thread/9812889d-954a-43ef-9377-6561e91f3bbf/](http://social.technet.microsoft.com/Forums/en-US/sharepoint2010programming/thread/9812889d-954a-43ef-9377-6561e91f3bbf/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-14T14:11:54.023

查看 VS 中功能的属性 - 有几个选项可以控制通过 VS 部署解决方案时功能的行为方式（仅）.. 一旦解决方案超出，这些设置对解决方案没有影响对...

1.  默认情况下激活 - 指示该功能是否在安装期间激活
2.  始终强制安装 - 指示是否强制安装该功能，即使它已经安装。
3.  在 Central Admin 中自动激活 - 表示该功能已为 CA 中的管理员激活...

# objective-c - 调用方法 X 次

> ID：10646184
> 
> 赞同：0
> 
> 时间：2012-05-18T03:04:48.570
> 
> 标签：objective-c, ios, cocos2d-iphone

我正在寻找一种使用同一段代码运行代码 X 次的方法。

假设我想重复代码：

```
NSLog(@"repeat"); 
```

numberX 次：

```
int numberX; 
```

无需根据 numberX 的值更改任何代码。

这将如何完成？如果您需要更多解释或解释我试图通过代码实现的目标，请发表评论。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T03:12:33.833

用户 for 循环：

```
for(int x = 0; i<NUMBER_OF_TIMES; x++){
  NSLog(@"repeat");
} 
```

并**确保**你阅读[了这个 Objective-C Primer](http://developer.apple.com/library/mac/#referencelibrary/GettingStarted/Learning_Objective-C_A_Primer/_index.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T03:09:09.030

您可以使用简单的 for 循环

```
for(int i = 0; i< numberX; i++) {
// the code you want to repeat

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T03:11:26.317

使用 for 循环！创建你的方法：

```
(void) aMethod{
NSLog(@"Repeat");
} 
```

在 for 循环中使用原始方法中的方法：

```
int numberX = 123456789;
for(int loopInt = numberX; loopInt >= 0){
aMethod;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-18T04:04:42.187

假设您要同步运行任务，您可以将任务插入串行调度队列。它是一个先进先出。

# java - 如果构造函数以异常结束，创建的对象是否与普通对象相同？

> ID：10646185
> 
> 赞同：3
> 
> 时间：2012-05-18T03:05:07.803
> 
> 标签：java, exception, constructor

如果构造函数以异常结束，那么创建的对象是否与正常对象完全相同？

```
class A {

    static A o;

    A() throws Exception {
        o=this;
        throw new Exception();
    }

    void f() { System.out.println("f(): entry."); };

    static public void main(String[]args ) {
        try {
         A o =new A();
        }
        catch (Exception e) {
              System.out.println("Exception: " + e);
        }

        A.o.f(); // Is it safe to use this object?
       }
} 
```

这编译并运行，这个程序的输出是：

```
Exception: java.lang.Exception
f(): entry. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T03:21:30.857

如果你捕捉到异常，构造的对象永远不会传回给调用者，调用者的结果变量也不会被设置。但是，理论上，静态变量会被设置，我看不出它无法访问的任何原因。

`this`但是请注意，在调用构造函数之前，方法验证不允许您存储`super`，因此这不是进入其他受保护对象的“后门”。

由于它是您的对象，因此“安全”取决于您。

[更详细一点：当您的构造函数的编译版本被输入时，“原始”Java 对象被完全构造——系统不需要额外的工作来使其有效。但是`super`，尚未调用构造函数，由您来显式`super`调用或让编译器默认插入`super`调用（如果您没有显式调用，它将在方法的开头执行此操作）。JVM 中的“字节码验证器”对调用构造函数之前在构造函数中可能发生的事情有一些非常严格的规则`super`，并且存储`this`到静态将是一个明确的禁忌——你会得到一个 VerifyError。]

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-18T03:12:43.207

> ```
>  A.o.f(); // Is it safe to use this object? 
> ```

它是一个常规的 java 对象，它将像任何其他 Java 对象一样响应方法调用。就 Java 语言而言，这不是未定义行为的来源。

这并不意味着它可以安全使用。许多类的安全性取决于它们维护重要不变量的能力，而在构造或关键操作期间抛出的意外异常通常意味着这些不变量不成立，因此使用起来不安全。

考虑如果你继承 A 会发生什么

```
public class S extends A {
  boolean dirty;

  S() throws Exception {
    // Do work to maintain important security invariants.
    dirty = true;
  }

  void foo() {
    if (dirty) {
      System.out.println("clean");
      dirty = false;
    }
    System.out.println("foo");
  }

  public static void main(String... argv) {
    try {
      new S();
    } catch (Exception ex) {}
    // Now A.o is an instance of S, but S's constructor
    // was never called.
    S s = (S) A.o;  // works.
    s.foo();  // Never prints clean before printing foo.
  }
} 
```

# jquery - 未加载 JQuery UI 对话框中的 JQuery Datatables 插件

> ID：10646194
> 
> 赞同：2
> 
> 时间：2012-05-18T03:06:00.263
> 
> 标签：jquery, jquery-ui, datatables, jquery-ui-dialog

我有这段代码，其中 url 是一些带有 id="table" 的表格元素的页面

```
$('#dialog').load(url).dialog({
    'modal' : true,
    open: function(event, ui) {
        var table = $('#dialog #table').dataTable();
    },
    close: function(event, ui) { 
        $('#dialog').empty();
    }
}); 
```

我遇到的问题是数据表似乎没有加载到 open() 事件处理函数中。我也尝试将数据表代码放在 create() 事件处理函数中，但无济于事。很奇怪，当我在 open() 函数中添加一个 alert() 时，

```
open: function(event, ui) {
    alert('test');
    var table = $('#dialog #table').dataTable();
}, 
```

它确实加载。

知道问题是什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T05:12:09.857

可能是你的选择器错了？尝试`$('#table').dataTable();`

或者您可以为您的 table 分配一个类，例如`class="mytable"`并更改为 selector ，如下所示：

```
$('.mytable').dataTable(); 
```

# regex - 如何通过首先“测试”或“预览”搜索部分在 Vim 中有效地搜索和替换？

> ID：10646197
> 
> 赞同：10
> 
> 时间：2012-05-18T03:06:10.917
> 
> 标签：regex, vim, replace

有时我想在 Vim 中使用该`s/search_for/replace_with/options`格式进行搜索和替换，但该`search_for`部分变成了一个复杂的正则表达式，我第一次无法正确处理。

我有`set incsearch hlsearch`我的`.vimrc`所以当我使用`/search_for`格式搜索时，Vim 会在我输入时开始突出显示。这对于首先“测试”/“预览”我的正则表达式很有用。然后，一旦我得到我想要的正则表达式，我就会申请`s/`搜索和替换。

但是这种方法有两个很大的限制：

1.  将我在`/`模式中创建的正则表达式复制并粘贴到`s/`模式中很麻烦。
2.  我无法使用正则表达式（即`(`和`)`）中的匹配组进行预览，也无法`\v`在`/`.

那么你们如何尝试在 Vim 中进行复杂的正则表达式搜索和替换？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-18T03:24:47.640

在搜索模式下使用 测试您的正则表达式`/`，然后使用`s//new_value/`. 当您不向 的搜索部分传递任何内容时`s`，它将采用最近的搜索。

正如@Sam Brink 也所说，您可以使用`<C-r>/`粘贴搜索寄存器的内容，所以`s/<C-r>//new_value/`也可以。当您有一个复杂的搜索表达式时，这可能会更方便。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-18T03:39:30.263

如前所述，您可以使用 练习搜索部分`/your-regex-here/`。当它正常工作时，您可以使用`s//replacement/`最新的搜索。

一旦你完成了一次，你可以使用`&`重复最后一个`s///`命令，即使你从那以后做了不同的搜索。您还可以使用`:&g`在当前行上进行全局替换。您可以使用在此处 ( ) 和文件末尾 ( )`:.,$&g`之间的所有匹配项进行搜索，以及许多其他可能性。`.``$`

当然，如果操作未按预期工作，您也可以撤消。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-18T14:22:44.097

正如其他人所指出的，我通常用于`s//replacement/`替换，但您也可以使用`<C-r>/`粘贴搜索寄存器中的内容。因此，您可以使用粘贴搜索`s/<C-r>//replacement/`的位置`<C-r>/`，并且可以在最后一刻进行任何您想要的更改。

`<C-r>`在光标所在的位置插入寄存器的内容
该`/`寄存器保存最新的搜索词
`:registers`，将显示每个寄存器的内容，以便您查看可用的内容。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-05-17T19:44:01.177

从 Neovim 0.1.7 开始，就有了*Incremental (“live”) :substitute*函数。（所以这只适用于 Neovim！）

要启用它，请设置命令选项：

```
:set inccommand=split 
```

它在这里宣布：[https ://neovim.io/news/2016/11/](https://neovim.io/news/2016/11/)

# java - java类A扩展类B，方法覆盖

> ID：10646199
> 
> 赞同：3
> 
> 时间：2012-05-18T03:06:14.957
> 
> 标签：java, class, overriding, extends

```
public class A {
   protected ClassX a;
   public void foo() {
       operations on a;
   }
}

public class B extends A {
   private ClassY b; // ClassY extends ClassX
   @Override
   public void foo() {
       //wanna the exact same operation as A.foo(), but on b;
   } 
} 
```

抱歉，标题这么不清楚。我的问题是：在 B 类中，当我调用 foo() 时，我想要与 A 类对 a 进行完全相同的操作。如何在不重复 A 的相同代码的情况下实现这一点？如果我在 B 类中省略 foo()，它会起作用吗？或者当我在 foo() 中调用 super.foo() 时发生了什么；

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T03:08:32.480

由于 ClassY 扩展了 ClassX，因此您可以`private ClassY b`从 B 类中删除。然后您可以将 ClassX 的实例设置为`a`实例变量。这允许`foo()`在 B 类中继承，但仍使用相同的逻辑和实例变量。

```
public class A {
    protected ClassX a

    public void foo() {
        // operations on a;
    }
}

public class B extends A {
    // do something to set an instance of ClassY to a; for example...
    public void setClassY(ClassY b){
        this.a = b;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T03:12:53.670

这听起来像`ClassX`并且`ClassY`会有一个通用接口（如果它们有相同的方法你想在 ear 上调用，至少）。您是否考虑`foo()`过采用公共接口类型的对象？

```
public class A {
   private ClassX a;
   protected void foo(ClassXAndClassYInheritMe anObject) {
       operations on anObject;
   }

   public void foo() {
       foo(a);
   }
}

public class B {
   private ClassY b;
   @Override
   public void foo() {
       foo(b);
   }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-18T03:20:47.847

如果要与 A 中的操作相同，则不要在 B 中定义 foo() 方法。如果要与 A 中的不同操作，请覆盖 B 中的 foo() 方法。如果要扩展 foo() 方法在 B 中，使其首先在 A 中执行操作，然后在 B 中执行操作，然后在方法顶部调用 super.foo()；如果您希望 A 中的操作在 B 中的操作之后，则在方法 foo() 的末尾调用 super.foo()。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-18T03:13:08.640

您可以`super.foo()`在覆盖的方法中执行此操作。

# iphone - NSString 解码 - 将图像更改为文本

> ID：10646206
> 
> 赞同：0
> 
> 时间：2012-05-18T03:07:34.037
> 
> 标签：iphone, objective-c, xcode, nsstring

我正在研究一些开源代码，目前正在转换 DTMF 音调，然后将它们显示为`UIImageview`. 但是，我们确实需要一种方法来改变这一点，因此每个 ImageView 的内容都被替换`UILabel`为生成的输出是字符串而不是图像。我希望这是有道理的：

这是负责此任务的原始代码：

```
- (void)setLCDString:(char*)content {

if (strlen(content) > LCD_COLS) {

    content = content + (strlen(content)-LCD_COLS);
}
//NSLog(@"LCDString %d len",strlen(content));

UIImageView *disp[LCD_COLS] = {a,b,c,d,e,f,g,h,i,j,k,l,m,n,o};

for (int in = 0; in < LCD_COLS; in++) {

//Here we start at 0, and if our INT is less than 24 (6x4) then we increase INT by 1.

    [disp[in] setImage:[self charToImage:*content]];

//Here we set UIImageVIew to our INT, and convert Character to images.

    if (*content) content++;
  }
}

- (UIImage *)charToImage:(char) chr
{

if (isdigit(chr) || (chr == 'A') || (chr == 'B') || (chr == 'C') || (chr == 'D')
        || (chr == '*') || (chr == '#')) {

    char name[10];

    snprintf(name,10,"%c.png",chr);;

    UIImage *img = [UIImage imageNamed:[NSString stringWithCString:name encoding:NSASCIIStringEncoding]];

    return img;
}

return nil;
} 
```

在这里您可以看到，解码正在将字符串转换为单个图像中的图像`UIImageView`，但我们需要将其替换为`UILabel`文本。

如果有人能指出我们正确的方向，将不胜感激。

# android - Android-如何结束/断开拨出电话

> ID：10646210
> 
> 赞同：0
> 
> 时间：2012-05-18T03:08:45.793
> 
> 标签：android

> **可能重复：**
> [Android。如何挂断拨出电话？](https://stackoverflow.com/questions/599443/android-how-to-hang-up-outgoing-call)

Android-如何结束/断开拨出电话

1-我有一个接收器，它检测到那里的通话我需要断开当前通话并生成具有不同号码的新通话..

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T03:13:59.807

据我所知，如果不使用反射（使用 SDK 中未包含的代码，无法保证有效），就无法断开由普通电话处理的呼叫。有可能在通话通过之前拦截并取消它，但我不太清楚那个。

# ruby-on-rails-3 - 在 Rails 3 中使用自定义控制器方法破坏类似功能

> ID：10646211
> 
> 赞同：0
> 
> 时间：2012-05-18T03:08:48.717
> 
> 标签：ruby-on-rails-3, rest, controller, destroy

我有一个名为的资源`patient_admissions`，它包含所有 RESTful 路由。它嵌套在另一个名为`patients`. 我想向我的`patient_admissions`控制器添加另一个方法，`discharge`该方法更新模型中名为`:discharge_date`(with `Date.now`) 的字段并将该值保存在表中。

我希望它像方法一样工作，如果我在我的视图中的表格中列出`destroy`了一堆对象，我可以点击链接并出现一个确认框，我会点击“确定”，然后value 将被更新，而无需先转到另一个视图并处理表单。`patient_admission``index``Discharge`

我怎样才能做到这一点而不求助于像javascript这样的东西？非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T03:16:15.063

在有关 Routing 的 rails 指南中，有一节介绍了[添加额外的 restful 操作：](http://guides.rubyonrails.org/routing.html#adding-more-restful-actions)

[http://guides.rubyonrails.org/routing.html#adding-more-restful-actions](http://guides.rubyonrails.org/routing.html#adding-more-restful-actions)

那里的例子将转化为：

```
resources :patient_admissions do
  member do
    put 'discharge'
  end
end 
```

这将`/patient_admissions/1/discharge`通过 PUT 识别，并路由到 的放电动作`PatientAdmissionsController`。

这至少可以让您为操作设置路由。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T03:23:57.360

您可以通过将`link_to`or`button_to`助手与控制器的自定义成员路由结合使用来做到这一点。这是一个例子：

```
#routes.rb
resources :patient_adminssions do
  put :discharge, :on => :member
end 
```

请注意，我使用 PUT 添加自定义路由，因为记录不会被删除，只是修改。所以根据 REST 标准，我认为 put 是最合适的。

```
# in your view
<%= button_to "Discharge", discharge_patient_admission_path(@patient_admission), :method => :put,
             :confirm => "Are you sure you want to discharge this patient?" %> 
```

这将在隐藏表单中创建一个按钮，单击该按钮将显示确认消息，如果确认，它将向您的控制器操作发送请求，您可以在其中按照您的建议设置适当的出院日期。

# java - 在 onClick 事件之后启动 onTouchEvent

> ID：10646214
> 
> 赞同：0
> 
> 时间：2012-05-18T03:09:30.680
> 
> 标签：java, android, imagebutton, touch-event

我正在尝试在我的 Activity 中设置图像按钮 (pushClick) 以启用用于旋转针形图形的 onTouchEvents。不幸的是，无论我是否单击图像按钮，onTouchEvent 都是活动的。在单击图像按钮之前，如何防止 onTouchEvent 触发？

```
public void pushClick(View pushClick) {
    switch (pushClick.getId()) {
    case R.id.btn_push:

        make(degrees);

    }
}

@Override
public boolean onTouchEvent(MotionEvent event) {
    switch (event.getAction()) {
    case MotionEvent.ACTION_DOWN:
        startRotating();
        break;
    case MotionEvent.ACTION_UP:
        stopRotating();
        break;
    }

    return super.onTouchEvent(event);
}

private void startRotating() {
    returnRotating = false;

    if (!keepRotating) {
        keepRotating = true;

        final Handler handler = new Handler();
        handler.postDelayed(new Runnable() {
            @Override
            public void run() {
                if (keepRotating) {
                    degrees = (degrees + 1) % 360;
                    make(degrees);

                    handler.postDelayed(this, INTERVAL);
                }
            }
        }, INTERVAL);
    }
}

private void stopRotating() {
    keepRotating = false;

    if (!returnRotating) {
        returnRotating = true;

        final Handler handler = new Handler();

        handler.postDelayed(new Runnable() {
            @Override
            public void run() {
                if (returnRotating) {
                    degrees = (degrees - 1) % 360;
                    make(degrees);

                    handler.postDelayed(this, INTERVAL);
                }
            }
        }, INTERVAL);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T03:22:10.577

我敢打赌，有更好的方法可以做到这一点，但我想不到：

```
private boolean buttonClicked = false;

public void pushClick(View pushClick) {
    switch (pushClick.getId()) {
    case R.id.btn_push:
        buttonClicked = true;
        make(degrees);

    }
}

@Override
public boolean onTouchEvent(MotionEvent event) {
    if(buttonClicked)
    {
        switch (event.getAction()) {
        case MotionEvent.ACTION_DOWN:
            startRotating();
            break;
        case MotionEvent.ACTION_UP:
            stopRotating();
            break;
        }
    } 

    return super.onTouchEvent(event);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T03:29:04.313

您还可以在按下图像按钮时添加 OnTouchListener（从您想要附加的任何视图），并在再次单击它时将其删除（如果这是您想要的）。

# mysql - Importing 1GO SQL File => ERROR 2013 (HY000) at line 23: Lost connection to MySQL server during query

> ID：10646216
> 
> 赞同：20
> 
> 时间：2012-05-18T03:10:14.863
> 
> 标签：mysql, sql, mysqldump, mysql-management

我必须导入 1go 的 sql 数据，我将 max_allowed_pa​​cket 提高到 1100M 以确保。

所以我使用：

我的查询

```
mysql -u root -p -D mainbase < GeoPC_WO.sql 
```

但 1 分钟后它在此过程中停止，我收到此错误：

```
**ERROR 2013 (HY000) at line 23: Lost connection to MySQL server during query
**Lost connection to MySQL server during query**** 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-05-18T03:22:50.060

可能您有一些大于最大大小的大型插入语句。检查您的 /etc/mysql/my.cnf 文件或任何位置。不记得默认值是什么 - 但将其设置为如下所示的大值可能会有所帮助。

这是一种选择

```
[mysqld]
max_allowed_packet = 16M 
```

也许另一种方式

```
[mysqldump]
max_allowed_packet = 16M 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-11-24T19:09:18.770

我有完全相同的问题。经过1小时的挣扎，我通过设置解决了这个问题

```
net_write_timeout 
```

更高的价值（在我的情况下是*300*）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-06-03T00:47:01.470

**在我的情况下，问题（“在查询期间丢失与 MySQL 服务器的连接”）出现在损坏的转储文件或行为异常的 HDD 中：**

首先，我在主服务器上进行了转储，然后将该转储复制到复制服务器。但似乎复制服务器的 HDD 出现了一些问题，转储已损坏，即主服务器上原始转储文件的 MD5 与复制服务器上转储副本的 MD5 不同。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-03-25T06:23:50.320

你可以试试这个：

第一的：

```
sudo /etc/init.d/mysql stop 
```

然后你应该编辑这个文件：

```
sudo vi /etc/mysql/my.cnf 
```

将以下行添加到 [mysqld] 部分：

```
innodb_force_recovery = 4 
```

最后：

```
sudo /etc/init.d/mysql start 
```

（innodb_force_recovery 强制启动 InnoDB 存储引擎。值 4 表示您的数据文件可能已损坏。有关更多信息，您可以访问：[http ://dev.mysql.com/doc/refman/5.7/en/forcing-innodb-恢复.html](http://dev.mysql.com/doc/refman/5.7/en/forcing-innodb-recovery.html) )

问候。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-07-29T08:29:18.033

就我而言，这是因为内存不足，我尝试将 90MB 压缩的 sql 文件导入到 1GB RAM vps 服务器，并且在我关闭 httpd 服务以释放一些内存并再次运行导入命令之前，一直出现错误 2013然后就成功了。

# javascript - 在rails中渲染后如何在javascript中访问json

> ID：10646221
> 
> 赞同：1
> 
> 时间：2012-05-18T03:10:54.313
> 
> 标签：javascript, ruby-on-rails, ruby, json

如果我在 Ruby 中呈现 json，我如何访问 javascript 中的值？

在红宝石中，如果我写：

```
response = {:key => "val"}
response = response.to_json
render :json => response, :status => 200 
```

如何在 javascript 中访问“val”？

如果我在 javascript 中执行 alert(response)，我看到 json 周围有一个标签，这会有所不同还是预期的？

我尝试了 jQuery.parseJSON(response) 但出现语法错误。如果我尝试直接访问响应，我不会得到正确的值 - 应该

`response.key === "val"`

评价为真？

我是在 Ruby 中错误地设置它还是在 javascript 中错误地访问它，或两者兼而有之？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T07:10:23.550

如果您可以显示您的 javascript 代码，那将非常有帮助。
无论如何，一种方法是使用 jQuery 的 ajax 函数并将 dataType 设置为 json。

```
$.ajax({
    type: "GET",
    url: "<your link>",
    dataType: "json",
    success: function(response) {
      if (response.key)
        alert(response.key);
    });
}); 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T07:15:14.740

这是一个简单的例子。

在 ./config/routes.rb

```
match '/index' => 'application#index'
match '/json' => 'application#json' 
```

控制器，./app/controllers/application_controller.rb：

```
class ApplicationController < ActionController::Base
  protect_from_forgery

  def index
    # server side code required by index
  end

  def json
    response = {:key => "val"}
    response = response.to_json
    render :json => response, :status => 200
  end
end 
```

发出 ajax 请求的 erb 页面，在本例中为 ./app/views/application/index.html.erb：

```
<script type="text/javascript" charset="utf-8">
    $(document).ready(
        function(){
            $("a#my_ajax").bind("ajax:success",
                function(evt, data, status, xhr){
                    console.log(data.key);
                    console.log(data.key === "val");
                }).bind("ajax:error", function(evt, data, status, xhr){
                    console.log("doh!")
                });
    });
</script>

<%= link_to "test",  {:controller=>"application",  :action => 'json'}, :remote=> true, :id => "my_ajax" %> 
```

# javascript - 为什么在 jQuery 中使用 load() 而不是 htmls？

> ID：10646223
> 
> 赞同：1
> 
> 时间：2012-05-18T03:11:06.780
> 
> 标签：javascript, jquery

**更新**：非常抱歉没有让自己清楚。它是 jQuery 中的 load()，而不是 loadpage()。

也许这是一个微不足道的问题，但我无法将其视为 js 的新手。我将非常感谢您的帮助。

我正在建立一个小型个人网站，其中包含几个类似的页面。我发现一些教程建议用于`load()`在一个 .html 文件中，基于不同的点击，生成不同的内容，这些内容是使用 .html 从我的其他 html 文件中获取的`load()`。

但我为什么要这样做？有几个 html 文件可以正常工作。使用`load()`方法我仍然需要那些文件；我也用谷歌搜索了很多关于`load()`.

因此我只是想知道我们这样做的原因。

先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T03:25:12.713

`loadpage()`不是原生 jQuery 方法，因此您可能偶然发现了一篇文章，该文章为 jQuery 的方法提供了一些自定义包装器。另一方面，`$.load()`它是一种本机 jQuery 方法，可将远程内容异步拉入您的页面。更改是好的，如果有人构造了一个`loadpage()`方法，他们实际上可能已经在内部使用`$.load()`（或任何其他[ajax 方法](http://api.jquery.com/category/ajax/)）。

您可能指的是[`$.mobile.loadPage`](http://jquerymobile.com/demos/1.1.0/docs/api/methods.html)（在幕后使用 jQuery `$.ajax`），这实际上是一种 jQuery Mobile 方法。除非您参与移动应用程序开发，否则您不会过多地处理这个问题。

无论您是使用 jQuery Mobile`$.mobile.loadPage`还是 jQuery`$.load`来加载您的内容，原因都是一样的：当只需要部分页面加载时，请避免刷新整个页面。

想想每次你想加载不同的 HTML 文件时会发生什么。每次加载新页面时，您都必须重新加载页眉、导航、页脚、侧边栏信息、图形，也许还有一些媒体内容——其中很多内容不会因页面而异。这就是为什么能够加载文档片段很有帮助，而无需用户重新发出对所有内容的请求，只是为了查看第 2 页上的独特内容。

# amazon-ec2 - 重启后挂载的 EBS 数据丢失

> ID：10646237
> 
> 赞同：4
> 
> 时间：2012-05-18T03:13:43.173
> 
> 标签：amazon-ec2, amazon-ebs

我在一个实例上安装了一个额外的 EBS 卷。我停止了实例并尝试在一天后重新启动，并且挂载卷中的所有数据都消失了。任何人都知道为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-18T04:02:45.003

在引入 EBS 卷之后，这曾经是一个常见问题，答案通常是以下之一：

> (1) 重启后没有挂载卷（挂载是不够的）。
> 
> (2) 将数据放入目录时未安装卷，现在您已在数据上安装了一个空卷，将其隐藏。

对于后者，如果将数据放在临时卷上（例如，在 /mnt 下），您将遇到麻烦，因为该卷在停止时会被清除。

否则，好消息是 EBS 卷不仅会丢失文件，因此它们应该在某个地方。

哦。此问题的另一个常见原因：

> (3) 您复制并粘贴了附加和挂载新 EBS 卷的命令，但没有注意到列表中的 mkfs 命令。

# python - Python：IRC Bot 停止工作

> ID：10646244
> 
> 赞同：0
> 
> 时间：2012-05-18T03:14:48.763
> 
> 标签：python, sockets, irc

我曾经有一个工作的 IRC 机器人，我亲切地称之为“shakybot”，因为它一开始非常不稳定。

现在，我正在重新编码。但是，每当我运行它时，都会遇到问题。这是从 IRC 通道检测到的输出：

```
NOTICE AUTH :*** Please wait while we scan your connection for open proxies...
:Tigh.GeekShed.net NOTICE AUTH :*** Looking up your hostname...
:Tigh.GeekShed.net NOTICE AUTH :*** Found your hostname (cached)
:Tigh.GeekShed.net NOTICE AUTH :*** Checking ident... 
```

然后它就进入了主循环。它从不连接或任何东西，它只是打印这个。我正在使用旧版本中的相同代码。

```
irc=socket.socket(socket.AF_INET,socket.SOCK_STREAM)
irc.connect((network, port))
a=irc.recv (4096) #Setting up the Buffer
print a
irc.send('NICK ' + nick + '\r\n')
irc.send('USER shakybot shakybot bla :shakybot\r\n')
irc.send('JOIN :' + chan + '\r\n')
irc.send('PRIVMSG ' + chan + ' :Hello.\r\n') 
```

我怎样才能使它连接？

**编辑**：在比较了用 Mibbit 和这个程序连接到 IRC 的调试消息之后，我应该得到：

```
Tigh.GeekShed.net *** Looking up your hostname... 
Tigh.GeekShed.net *** Checking ident... 
Tigh.GeekShed.net *** Found your hostname 
Tigh.GeekShed.net *** Received identd response 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T03:19:14.627

返回时`irc.recv(4096)`，这意味着您已从远程服务器收到*至少一个字节。*远程服务器可能尚未准备好让您发送`NICK`命令。您应该等到从服务器收到一条适当的消息，说明它已准备好接收您的登录信息（抱歉，我现在不记得该消息是什么了）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T05:07:02.777

`Greg`说的是对的。请根据您需要检查消息 查看此代码（ [http://code.activestate.com/recipes/299411-connect-to-an-irc-server-and-store-messages-into-a/ ）。](http://code.activestate.com/recipes/299411-connect-to-an-irc-server-and-store-messages-into-a/)`RFC1459``PING`

您还可以查看一些 python IRC 库。
[http://pypi.python.org/pypi/lalita/0.1.1](http://pypi.python.org/pypi/lalita/0.1.1)
[http://pypi.python.org/pypi/irc/1.1](http://pypi.python.org/pypi/irc/1.1)

不要忘记在 pypi 中搜索（[http://pypi.python.org/pypi?%3Aaction=search&term=irc&submit=search](http://pypi.python.org/pypi?%3Aaction=search&term=irc&submit=search)）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-23T00:00:36.850

我发现以下是连接到 IRC 服务器的解决方案。

```
 irc.send('NICK %s\r\n' % nick)
    irc.send('USER %i 8 * :%s\r\n' % (ident, nick))
    irc.send('JOIN %s\r\n' % channel) 
```

# couchdb - 从 couchDB 中检索数据

> ID：10646247
> 
> 赞同：0
> 
> 时间：2012-05-18T03:15:00.653
> 
> 标签：couchdb

我是 couchDB 的新手，但在使用关系数据库方面有很好的经验。谁能告诉如何连接到 couchDB 数据库并检索存储在其中的数据。我在关系数据库中给出一个示例，我需要有关如何在 couchDB 中执行类似任务的帮助。在 mysql 中，我们使用连接器连接到数据库，例如我们给出“从表名中选择用户名，其中密码 =”abc” ”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T06:05:53.730

CouchDB talks HTTP and JSON, then you can use any HTTP client and JSON parser/generator. You can find a nice introduction in [The Definitive Guide](http://guide.couchdb.org/draft/tour.html).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-09T15:56:00.180

试试这个 URL：[http://localhost:5984/_utils/](http://localhost:5984/_utils/)，它将打开 FUTON 编辑器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-20T12:34:19.743

CouchDB 是一个 NOSQL 数据库。所以它使用 HTTP 请求（基于 url）工作。couchDB 中存储的数据是 JSON 文档的形式，所以没有表的概念。简而言之，SQL中的数据库代表couchDB中的数据库，SQL表中的行代表couchDB中的文档。

回到您的问题，要从 couchDB 中检索数据，有一个称为视图的概念，它使用 Map 和 Reduce 函数（它们是 JavaScript 函数）。使用这些视图 couchDB 索引您的搜索函数跨越整个数据库（包括所有文档），因此您需要编写一个 Map 函数指定用于搜索的条件。这是一个例子 -

```
function(doc) {
    if (doc.password) {
        emit(doc.username, doc);
    }
} 
```

上面的例子是一个简单的 Map 函数。搜索有密码的数据库文档，返回数据库中所有文档的用户名。密码输入值（在本例中为“abc”）应在您将发送到 couchDB URL 的查询字符串中指定。现在，您可能会问指定要搜索的数据库在哪里？我说我们必须创建视图才能进行搜索。这些视图存储在您要搜索的特定数据库中。因此，如果要搜索名称为“User_Credentials”的数据库，则使用上述 Map 函数在“User_Credentials”中创建一个视图。可以在此处找到有关如何完成的更多详细信息：[CouchDB 视图指南](http://guide.couchdb.org/draft/views.html)

# ruby - 从数据库字段的值构建下拉列表

> ID：10646248
> 
> 赞同：0
> 
> 时间：2012-05-18T03:15:15.453
> 
> 标签：ruby, ruby-on-rails-3

我在数据库中有一个从文本区域填充的字段。我插入了很多值并通过为每个值插入新行来分隔它们。如何从 Rails 中的该字段构建下拉菜单？

这实际上是数据库字段中的内容

```
["Drop\r\nDown\r\ntext\r\ntext\r\ntext"] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T04:05:43.107

```
 > "Drop\r\nDown\r\ntext\r\ntext\r\ntext".split("\r\n")
 => ["Drop", "Down", "text", "text", "text"] 
```

# android - Android - 如何使水平按钮之间没有空间？

> ID：10646249
> 
> 赞同：0
> 
> 时间：2012-05-18T03:15:24.170
> 
> 标签：android, android-layout

现在我的这些按钮排列得很好，但它们之间有一些空间。为了看起来像一个更专业的标题，我希望按钮之间没有空间。那可能吗？

这是我目前的布局：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent" 
android:layout_height="fill_parent"
 android:orientation="horizontal"
>

 <Button android:id="@+id/home"
  android:layout_width="0dp" 
  android:layout_height="wrap_content"
  android:layout_weight="1"
  android:text="Home"
  android:textSize="11dp"
/>

<Button android:id="@+id/questions"
 android:layout_width="0dp" 
 android:layout_height="wrap_content"
 android:layout_weight="1"
 android:text="Questions"
 android:textSize="11dp"
android:layout_toRightOf="@+id/home"  />  

 <Button android:id="@+id/businesses"
  android:layout_width="0dp" 
  android:layout_height="wrap_content"
  android:layout_weight="1"
  android:textSize="11dp"
  android:text="Businesses"
  android:layout_toRightOf="@+id/questions"
 />  

 <Button android:id="@+id/learn"
  android:layout_width="0dp" 
  android:layout_height="wrap_content"
  android:layout_weight="1"
  android:text="Learn"
  android:textSize="11dp"
  android:layout_toRightOf="@+id/businesses"
 />  

</LinearLayout> 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T03:19:03.107

您将需要更改按钮的图像。您使用的默认按钮，这些背景周围有一些填充。这就是为什么你看到它们之间的空间。

由于您对按钮有不同的用例，因此您需要为它们提供新图像。

# jquery - 使用航点插件滚动时加载内容

> ID：10646251
> 
> 赞同：0
> 
> 时间：2012-05-18T03:15:28.043
> 
> 标签：jquery, jquery-waypoints

我使用插件航点（[http://imakewebthings.com/jquery-waypoints/](http://imakewebthings.com/jquery-waypoints/)）

**编辑：工作解决方案：http: [//pastebin.com/x95Qf7m8](http://pastebin.com/x95Qf7m8) **

我要做的是在“share-this”标签向下滚动时加载链接中包含的共享小部件。

你可能会注意到 head.ready 的使用，它只是 document.ready 的替代品，因为我使用 headjs 加载我的外部脚本。

我的问题很简单，为什么点击触发时它可以工作，但不使用航点插件？欢迎任何帮助

我的网站：[http ://www.entendu.info](http://www.entendu.info)

```
head.ready(function() {

$('.share-this').waypoint(function(event, direction) {
   if (direction === 'down') {

    var contentId = $('.share-this').attr('rel');
    var uri = $('.share-this').attr('rev');

    e.preventDefault();
    //console.log('clicked');

    $.ajax({
   url: 'http://www.entendu.info/share',
   type: 'GET',
   dataType: 'html',
   data: {id:contentId, url:uri},
   complete: function(xhr, textStatus) {

   },
   success: function(data, textStatus, xhr) {

   $('#'+contentId).html(data);
   },
   error: function(xhr, textStatus, errorThrown) {

   }
   });

   }
   else {

      // do this on the way back up through the waypoint
   }

   });

});

<div class="content" id="{$posts[i].PID}" style="float:left">
<a href="" class="share-this" rel="{$posts[i].PID}" rev={$posts[i].name|escape:'htmlall'}">

<img src="{$imageurl}/share2.png" width="379" height="22" style="opacity: 0.5; float:left"></a>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T11:49:45.350

在你说`e.preventDefault()`但没有的功能中`e`。您的活动名为`event`。如果您查看控制台，您将看到错误“e 未定义”。另外，防止航点处理程序中的默认值没有任何作用，所以我不确定那条线的意义是什么。

# asp.net-mvc - 如何在具有强类型视图的 asp.net mvc 3 中获取复选框列表的检查值？

> ID：10646255
> 
> 赞同：3
> 
> 时间：2012-05-18T03:15:59.270
> 
> 标签：asp.net-mvc, strongly-typed-view

关键词：asp.net mvc 3、复选框列表、强类型视图。

所以，请不要建议我使用 ViewBag 或 formcollection。

我对 web 表单开发并不陌生，但我对 asp.net MVC 相当陌生。

假设在注册页面上，我有这样的东西：

![一个非常简单的注册表单](../Images/2295b2504b530db742ce9568e9768da8.png)

视图模型会是什么样子？以下看起来对吗？

```
public class RegistrationViewModel 
```

{

```
// To store the selected state ID upon postback.
public int StateId {get; set; }  

// A list of states to populate the dropdown.
public Dictionary<int, string> States {get; set; } 

// To store the list of insurance companies the user has used before.
public int[] PriorInsuranceCompanies {get; set; } 

// A list of insurance companies to populate the check box list.
public Dictionary<int, string> InsuranceCompanies {get; set; } 
```

}

我知道如何创建我在屏幕截图中显示的视图，但我不确定我应该如何在我的控制器中捕获用户输入的视图模型值。请记住，我更喜欢强类型视图。mvc 框架如何分辨哪个是哪个？您是否有一个最小的工作示例可以共享（最好是在一个完整的可运行项目中）？谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T03:35:58.143

您使用的方法是正确的。我同意你总是使用视图模型而不是 ViewBag。

在您的视图模型中，您应该将字典更改为 MultiSelectList，以便您也可以拥有选定的值。

```
public IList<int> PriorInsuranceCompaniesSelected { get; set; }
public MultiSelectList PriorInsuranceCompanies { get; set; } 
```

然后，如果已经选择了一些 Id（例如从存储库加载数据时获得的信息），则映射第一个字段，然后映射所有值的第二个字段。

从 Get 部分的控制器中（仅以一些代码为例）：

```
 model.PriorInsuranceCompaniesSelected = new List<int>();
  var companies = repository.GetPriorInsuranceCompanies();
  //add to your PriorInsuranceCompaniesSelected the values already checked from your entity
  var entity = repository.GetEntityBy(id);
  if (entity.PriorInsuranceCompanies != null)
    foreach (var item in entity.PriorInsuranceCompanies)
      model.PriorInsuranceCompaniesSelected.Add(item.Id);

  var select = (from s in companies select new { Id = s.Id, Name = s.Name }).OrderBy(x => x.Name); //.ToList;
  model.PriorInsuranceCompanies = new MultiSelectList(select, "Id", "Name", model.PriorInsuranceCompaniesSelected); 
```

然后在您的 Html 中，您将有这样的输出

```
@foreach (var item in Model.PriorInsuranceCompanies)
{
   <label for="@item.Value" class="check">
   <input type="checkbox" id="@item.Value" name="PriorInsuranceCompaniesSelected" value="@item.Value" @(item.Selected ? "checked" : "") />@item.Text</label>
} 
```

在发布时，ModelBinder 会自动将正确的对象映射到您的模型。您只需检查 model.PriorInsuranceCompaniesSelected 中的值

```
[HttpPost]
public ActionResult MyForm(MyViewModel model)
{
  if (ModelState.IsValid)
  {
    try
    {
      //your mapping code or whatever...

      //You do your things with the selected ids..
      if (model.PriorInsuranceCompaniesSelected != null && model.PriorInsuranceCompaniesSelected.Count > 0)
        entity.PriorInsuranceCompanies = repository.GetCompaniesBy(model.PriorInsuranceCompaniesSelected);
      else
        entity.PriorInsuranceCompanies = new List<Comapny>();
      repository.Save(entity);

      return RedirectToAction("Index");
    }
    catch (RulesException ex)
    {
      ex.CopyTo(ModelState);
    }
    catch
    {
      ModelState.AddModelError("", "My generic error taken form a resource");
    }
  }

  //rehydratates the list in case of errors
  //....
  return View(model);
} 
```

这应该让您知道该怎么做。我希望它有帮助

# unix - bc：获取num列表的总和

> ID：10646256
> 
> 赞同：6
> 
> 时间：2012-05-18T03:16:05.530
> 
> 标签：unix, bc

```
杰克 10
Ĵ 10
一个 20
卢卡 20
公元前 U 20

```

我想得到这些数字的总和：10+10+20+20+20 = 80

但我不能`cat input|cut -d " " -f 3`用来获取数字，我该怎么做？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-18T03:38:07.630

您可以使用 grep + paste + bc

```
$ grep -oE '[0-9]+' file
10
10
20
20
20

$ grep -oE '[0-9]+' file | paste -s -d + - 
10+10+20+20+20

$ grep -oE '[0-9]+' file | paste -s -d + - | bc
80 
```

而不是 grep，您可以使用 cut

```
$ cut -c 8- file 
```

或者只是 awk

```
$ awk '{print $NF}' file 
```

但是如果你可以使用 awk，你可以使用 awk 求和

```
$ awk '{total += $NF} END { print total }' file 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T03:29:47.150

假设您的文件名为 input.txt：

```
echo `sed 's/[^0-9]*\([0-9]*\).*/\1+/' input.txt` '0' | bc 
```

（我确信使用 sed 或 awk 有更优雅的方法，这只是添加终止 '0' 以使 bc 高兴的快速技巧。分别运行命令的不同部分以找出发生了什么在）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-10-04T03:52:01.213

您可以用 + 替换所有空格并将结果传递给 bc

回声“5 6 2” | sed -E -e 's/\s+/+/g' | 公元前

# php - jquery 对话框打开以触发 php

> ID：10646259
> 
> 赞同：0
> 
> 时间：2012-05-18T03:16:26.023
> 
> 标签：php, javascript, jquery, html, ajax

我想知道我正在尝试创建一个函数，该函数将在打开对话框后创建一组下拉菜单，而不是之前...我已经创建了 php 函数并将其称为测试我想知道是否有办法使用 javascript 或 ajax（这似乎是最合乎逻辑的方式）来让这个函数在对话框出现后运行.. 它只是一个非常小的函数，不会花费更长的时间来运行。所以真的我只是在寻找一些关于如何让它工作的建议。如果我感到困惑，我只想在打开对话框后运行 php 函数，然后在关闭对话框时删除无论创建什么功能。

但是由于我在 ajax、javascript 或 jquery 方面的知识非常有限，我真的想不出如何开始任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T03:26:10.107

在此处查找对话框打开回调（使用 JQuery UI）[http://jqueryui.com/demos/dialog/#event-open](http://jqueryui.com/demos/dialog/#event-open)

在此处查找可用于从 PHP 脚本中获取数据的 AJAX 调用：http: [//api.jquery.com/category/ajax/](http://api.jquery.com/category/ajax/)

那应该让你继续前进。

# jquery - jquery在提交前检查值

> ID：10646264
> 
> 赞同：1
> 
> 时间：2012-05-18T03:17:46.650
> 
> 标签：jquery

我有一个带有链接的页面，当使用单击链接时，将出现一个新的选择标签，然后当用户提交表单时，我想确保用户为每个选择标签选择一个选项

你可以去最后一个jquery函数，但我放了一些创建选择标签的代码

# html

```
<div class="container" id="addCell">
    <form id="acForm"method="POST" action="<?php echo URL; ?>Cell/addCell">
        <ul>
            <li>
                <p>
                    <label>Name</label>
                    <input type="text" name="name"class="longInput1"/>
                <p>
                <p>
                    <label>City</label>
                    <select id="countrySelector" name="city">
                    </select>
                </p>
            </li>
            <li id="intersectionCells">
                <p>
                    <label>Inserted cells</label>
                    <a href="#" class="smallLink" id="acaclink">new</a>
                </p>
            </li>
            <li>
                <input type="submit" class="button1" value="save"/>
            </li>
        </ul>
    </form>
</div> 
```

# jQuery

```
$("#addCell").ready(function(){
    $("#addCell").on('click',"#acaclink",function(){
        var me = this;
        var cityName = $("#countrySelector").val();
        $.getJSON("http://localhost/Mar7ba/Cell/getCellsInCity/"+cityName+"/TRUE",function(data){
            var options = '';
            options+="<option>Select Cell</option>";
            for(var i=0;i<data.length;i++){
                options += "<option>"+data[i]+"</option>";
            }
            $(me).closest('li').append('<p>\n\
            <label>Select Cell</label>\n\
            <select name="acSelect[]">\n\
             '+options+'\n\
</select>\n\
<a href="#" class="removeA">delete</a>\n\
<span class="errorMessage"></span>\n\
</p>');
        });
    });
});
$("#addCell").ready(function(){
    $("#addCell").on('click',".removeA",function (){
        $(this).closest('p').remove();
    });
});
$("#addCell").ready(function (){
    $("#countrySelector").change(function (){
        var cityName = $("#countrySelector").val();
        $.getJSON("http://localhost/Mar7ba/Cell/getCellsInCity/"+cityName+"/TRUE",function(data){
            var options = '';
            options+="<option>Select Cell</option>";
            for(var i=0;i<data.length;i++){
                options += "<option>"+data[i]+"</option>";
            }
            $("#intersectionCells select").html(options);
        });
    });
}); 
```

这是表单验证

```
$("#addCell").ready(function (){
    $("#acForm").on('submit',function (){
        var errorCount = 0;
        $('span.errorMessage').text('');
        $('#intersectionCells select').each(function(){
            var $this = $(this);
            if($this.val() === 'Select Cell'){
                var error = 'Please select a cell' ; // take the input field from label
                $this.next('span').text(error);
                errorCount = errorCount + 1;   
            }
        });
        if(errorCount==0){
            $(this)[0].submit(); // submit form if no error
        }
    });
}); 
```

但垃圾邮件没有按我的意愿出现

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T03:36:13.803

你不应该使用`ready`文档元素，如果表单有错误`$(document).ready(function(){...})`，你可以使用`preventDefault()`它来防止它被提交：

```
$("#acForm").on('submit',function (e){
    var errorCount = 0;
    $('span.errorMessage').text('');
    $('#intersectionCells select').each(function(){
        var $this = $(this);
        if ($this.val() == 'Select Cell'){
            var error = 'Please select a cell' ;
            $this.next('span').text(error);
            errorCount++;   
        }
    });

    if (errorCount > 0) {
        e.preventDefault();
    }
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-18T03:36:19.830

见：http: [//jsfiddle.net/ujrNu/](http://jsfiddle.net/ujrNu/)

在这之后

```
if(errorCount==0){
            $(this)[0].submit(); // submit form if no error
        } 
```

你应该添加：

```
else{
   return false;
} 
```

否则无论如何你的表格都会被张贴。

第二个问题是这一行：

```
$this.next('span').text(error); 
```

next 返回 NEXT 兄弟，而不是作为跨度的下一个兄弟。如果下一个兄弟不是跨度，它将返回 null。在您的情况下，下一个兄弟不是跨度，而是 A 标签。所以你想要这个：

```
$this.siblings('span :first').text(error); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-18T03:30:16.723

```
$("#acForm").on('submit',function (e){
        var errorCount = 0;
        $('span.errorMessage').text('');
        $('#intersectionCells select').each(function(){
            var $this = $(this);
            if($this.val() === 'Select Cell'){
                var error = 'Please select a cell' ; // take the input field from label
                $this.next('span').text(error);
                errorCount = errorCount + 1;   
            }
        });
        if(errorCount==0){
            $(this)[0].submit(); // submit form if no error
        }
        e.preventDefault(); // this will stop the form submit
    }); 
```

**[演示](http://jsfiddle.net/thecodeparadox/Cc3dH/1/)**

# amazon-ec2 - 从 ebs 快照空恢复卷

> ID：10646265
> 
> 赞同：3
> 
> 时间：2012-05-18T03:17:54.090
> 
> 标签：amazon-ec2

我创建了一个带有数据的 ebs 快照。然后我尝试从快照中创建一个卷并将其附加到一个实例。但是，当我尝试安装卷（带有数据）时，它说

```
mount: wrong fs type, bad option, bad superblock on /dev/xvdg,
   missing codepage or helper program, or other error
   In some cases useful info is found in syslog - try
   dmesg | tail  or so 
```

如果我尝试 mkfs 它，所有数据都会丢失，对吗？

# mobile - 二维码恶意软件

> ID：10646267
> 
> 赞同：0
> 
> 时间：2012-05-18T03:18:08.637
> 
> 标签：mobile, qr-code, malware

我阅读了几篇关于此的文章（例如，[二维码如何传播恶意软件](http://www.infosecisland.com/blogview/20814-How-QR-Codes-Can-Deliver-Malware.html)），它似乎引起了相当大的轰动。

根据我的阅读，所有所谓的“恶意软件”都是指向恶意网站或应用程序的链接。我的问题是：还有其他形式的二维码恶意软件吗？如果不是，那么这种类型的恶意软件有什么新变化？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T13:08:11.647

QR 码的最大有效载荷约为 4K，因此 QR 扫描仪不会出现缓冲区溢出或类似情况。

但是，它们可用于以几种有趣的方式将人们引导至恶意内容。

1.  您知道访问链接的计算机很可能是移动设备。如果您有针对 iPhone 的浏览器漏洞利用 - 您可以在用户访问网页后交付它。
2.  使用很长的 URL，您可能会欺骗用户以为他们正在访问“安全”站点。如果 QR 扫描仪只显示 URL 的前 20 个字符，您可以制作一个 QR

    ```
    https://www.VerySafeSite.com.evilsite.com 
    ```

3.  虽然扫描仪可能不易受缓冲区溢出的影响，但地址簿可能会。因此，制作具有异常长字段的 vCard 可能会为攻击提供载体——尽管这不太可能。
4.  贴纸攻击是可能的。犯罪分子可以找到带有合法二维码的海报，并在上面贴上二维码贴纸。这可能会诱使人们进行扫描。

因此，基本上，几乎不可能拥有恶意二维码——只有恶意目的地。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T03:30:23.013

二维码本身是不可执行的，不包含可执行数据，所以只读取一个应该是安全的。正如@Blender 所说，它们当然可以链接到恶意软件，但它们本身并不是恶意的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T03:34:13.873

当二维码用于销售终端时，可能会利用应用程序及其用户，但这需要对应用程序有深入的了解。如果它们只包含一个 URL，那么它与以任何其他方式打开相同的 URL 相同。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-18T03:36:02.110

你是对的，我看到的所有二维码恶意软件都只是指向恶意网站或应用程序的链接。

QR 码可以包含链接以外的数据，例如纯文本、联系信息 (VCARD) 或事件信息 (VCALENDAR)。它甚至可以包含原始数据，理论上可以包含可执行代码，但大多数二维码阅读器软件可能会忽略此类代码，因为它不知道如何处理嵌入的数据。

# c# - 列表异常“参数无效。”

> ID：10646270
> 
> 赞同：4
> 
> 时间：2012-05-18T03:18:54.187
> 
> 标签：c#, image, list

我有问题`List<Image>`

```
 List<Image> _Images = new List<Image>();
    int currIndex = 0;

    private void btnAdd_Click(object sender, EventArgs e)
    {
        using (OpenFileDialog dialog = new OpenFileDialog())
        {
            dialog.Filter = "All Images|*.jpg;*.jpeg;*.png;*.bmp;*.gif";
            if (dialog.ShowDialog() == DialogResult.Cancel) 
                return;
            _Images.Add(Image.FromFile(dialog.FileName));
            currIndex = _Images.Count - 1;
            picBox.Image = _Images[currIndex];
        }
    }

    private void btnNext_Click(object sender, EventArgs e)
    {
        if (currIndex + 1 >= _Images.Count)
            return;
        picBox.Image = _Images[++currIndex];
    }

    private void btnBack_Click(object sender, EventArgs e)
    {
        if (currIndex - 1 < 0)
            return;
        picBox.Image = _Images[--currIndex]; 
    } 
```

在我将两个图像添加到该列表后，当我按下后退按钮时出现此异常`btnBack_Click`：`Parameter is not valid.`
为什么当我第一次添加图像时它会起作用，`picBox.Image = _Images[currIndex];`然后当我稍后尝试从索引中获取图像时，它给了我这个异常？

**注意：**我没有使用 ImageList，因为据我所知，它的 ImageSize 对于所有图像都是恒定的。

那我怎么让它工作呢？

**更新：**
它现在工作了，当我`List<Image>`改为`List<Stream>`

```
picBox.Image = Image.FromStream(_Images[--currIndex]); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T11:50:04.173

改变你`List<Image>`的`List<Stream>`

```
picBox.Image = Image.FromStream(_Images[--currIndex]); 
```

然后它将起作用。

# sockets - 实现UDP聊天服务器和客户端的简单设计或想法或常用步骤

> ID：10646271
> 
> 赞同：0
> 
> 时间：2012-05-18T03:18:54.697
> 
> 标签：sockets, network-programming

谁能指导我一个简单的设计或想法或常见步骤来实现 UDP 聊天服务器和客户端？我不是问绳索，我想尝试我自己。我正在寻找一种独立于编程语言的解释。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T04:59:46.060

经典的设计是，每当用户在他的聊天客户端中键入一行文本时，该客户端将文本（可能还有一些其他信息，例如用户名）放入它发送到服务器的 UDP 数据包中。服务器接收 UDP 数据包，然后将数据包的副本转发给它知道的所有其他客户端。当其他客户端收到转发的数据包时，它们各自显示数据包的内容供本地用户阅读。

唯一不明显的部分是发现——即客户端如何知道将 UDP 数据包发送到哪个 IP 地址，以及服务器如何知道将接收到的数据包转发到哪个 IP 地址？

如果你能保证所有的客户端总是和服务器在同一个以太局域网上，那么这很容易处理——只要总是将所有的 UDP 数据包发送到广播地址（255.255.255.255），局域网上的每个人都会接收它们。（事实上​​，在这种情况下，您根本不需要服务器，因为客户端可以直接相互通信）。

在更现实的情况下，客户端位于 Internet 上的任意位置，发现变得更加困难。希望您可以在众所周知的固定位置（例如 www.thabo-chat.com 或其他地方）运行服务器，并将该主机名硬编码到客户端中。然后每当客户端启动时，它可以向服务器发送一个 UDP 数据包，让服务器知道它的存在，服务器可以从收到的 UDP 数据包中读取源 IP 地址并将其添加到 known-client- 列表中它将接收到的数据包转发到的 IP 地址。它还应该保留每个客户端最近收到消息的时间戳，如果很长时间没有收到消息，则从列表中删除 IP 地址（以避免无意义地向已经离开的客户端发送数据包）。

在 Internet 上使用 UDP 时您将面临的最后一个问题是，许多计算机都位于防火墙后面，这些防火墙将阻止来自 Internet 的 UDP 数据包，因此您的服务器发送的 UDP 数据包在许多情况下不会到达客户端它正试图将它们发送到。对此没有一个很好的解决方案——您可以要求您的客户端用户在他们的路由器上设置 UDP 端口转发，但这对他们来说很麻烦，而且很多人没有这样做的技能。在这种情况下，唯一真正的选择是改用 TCP，让客户端通过 TCP 连接到服务器并以这种方式来回发送数据（这种方式有效，因为几乎所有防火墙都允许通过传出 TCP 连接进行双向数据流量，因为这是网页浏览和电子邮件所必需的）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-18T03:38:07.067

看看这[本书](http://anubhavjain91.weebly.com/uploads/3/7/5/8/3758780/davis_-_definitive_guide_to_linux_network_programming_apress_2004.pdf)的第 9 章。将清除您对聊天应用程序的客户端-服务器架构的所有查询。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T03:27:21.527

Python 是一种很容易上手的语言： [http ://wiki.python.org/moin/UdpCommunication](http://wiki.python.org/moin/UdpCommunication)

# octave - Octave - 图中的变量点符号

> ID：10646276
> 
> 赞同：2
> 
> 时间：2012-05-18T03:19:29.973
> 
> 标签：octave

我正在绘制两个向量。我想根据第三个向量中的相应值来改变用于绘制每个点的符号。

换句话说，如果我正在绘制 X 和 Y，我知道我可以让每个绘图点显示为“*”，如下所示：

```
plot (X, Y, "*") 
```

但是我怎样才能涉及第三个向量 Z，以便为某些 Z 值显示“*”，而为其他值显示“+”？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2017-06-05T10:00:14.513

也可以通过获取 Z 元素的索引来完成，其中**+/***将使用`find`方法打印在 2 个单独的数组中。

考虑到您想为Z的*正值打印***(+)**和为*负值打印 (* ***)**，以下代码将执行此操作：

 ****```
 pos = find(Z > 0); neg = find(Z <= 0);
    plot(X(pos), Y(pos), 'k+', X(neg), Y(neg), 'k*'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-18T14:05:26.397

尝试这样的事情：

```
x = [1 2 3];
y = [1 4 9];
z = {'*' '+' '*'};
for i_=1:length(x)
    eval(["plot(x(" num2str(i_) "),y(" num2str(i_) "),'" z{i_} "')"])
    hold on
end 
```

这实质上是`n`绘制图，其中`n`是 和 的`x`长度`y`。如果您希望每个点的点颜色发生变化，您可以使用`hold all`而不是`hold on`. 如果您希望点样式以 的值为条件`y`，您可以执行

```
x = [1 2 3];
y = [1 4 9];
z = {'*' '+' '*'};
for i_=1:length(x)
    if (y(i_) > 1)
        z{i_} = '*';
    else
        z{i_} = '+';
    end
    eval(["plot(x(" num2str(i_) "),y(" num2str(i_) "),'" z{i_} "')"])
    hold on
end 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-11-20T05:29:53.920

下面的代码将为 z > 0 打印“ro”，为 z < 0 打印“bx”

```
plot(x(z>0), y(z>0), 'ro', x(z<0), y(z<0), 'bx') 
```****

# opengl - OpenGL：关于处理碰撞检测和顶点数据的建议？

> ID：10646280
> 
> 赞同：2
> 
> 时间：2012-05-18T03:20:10.233
> 
> 标签：opengl, graphics, 3d, collision-detection

我正在考虑如何在我的 OpenGL 应用程序中进行碰撞检测，并得出结论，我应该保留我的几何数据的两份副本。

1）**第一个副本**：仅用于OpenGL渲染目的。这可以保存为VBO，顶点索引。（保存在GPU中？）

2）**第二个副本**：我保存在客户端（在一个类中，比如 3DEntity 中），我执行所有测试，包括边界框碰撞测试、光线投射、

因此，在我加载网格数据（比如从 OBJ 文件）之后，首先我准备“第一个副本”，然后使用“顶点索引”准备“第二个副本”。（例如：如果我的网格是一个简单的立方体，我的“第一个副本”将有 8 个顶点，并使用顶点索引来正确渲染它。但我的“第二个副本”将总共有 36 个顶点。因为我必须做 ray-铸造三角形）

我在“3DEntity”中保留了一个转换矩阵，以保持我的“3d Entity”的位置、旋转等状态。所以在伪代码中；

```
class 3DEntity {
 Vertex[] verticesForPhysics;
 Matrix tranformationMatrix;
} 
```

我保持“verticesForPhysics”值固定。（意味着它始终在模型坐标系中）。所以当我想移动时，旋转我的实体我只需更改“transformationMatrix”。

在进行诸如碰撞检测之类的测试时，我再次制作了顶点的临时副本，方法是将“verticesForPhysics”乘以“transformationMatrix”，给出世界坐标中的顶点。

```
Vertex[] verticesForPhysicsInWorld=transformationMatrix * verticesForPhysics; 
```

现在我使用这些“verticesForPhysicsInWorld”进行测试。

这是处理这个的正确方法吗？我担心通过保留两个副本并为碰撞检测测试制作另一个临时副本来担心数据冗余。其他 OpenGL 游戏引擎如何处理这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T05:27:32.377

拥有多个顶点数据副本是很正常的，所以不用担心 :-)

例如，您可能有：

*   描述几何图形的未转换顶点数据
*   渲染期间转换的顶点数据（可能由 GPU 完成）
*   用于碰撞检测的简化转换数据（例如 AABB 树）——这比使用完全转换的顶点数据进行碰撞检测要高效得多！
*   需要时，转换顶点数据以进行更详细的碰撞检测，但*前提*是您确定两个对象可能由于 AABB 重叠而发生碰撞。您不想每帧都为每个对象执行此操作！

请注意，用于物理的顶点数据/几何图形与用于渲染的顶点数据/几何图形不同也是很常见的。通常，您可以使用更简单的对象进行碰撞检测（例如球体、圆柱体）

# tcl - 期望脚本操作顺序

> ID：10646283
> 
> 赞同：3
> 
> 时间：2012-05-18T03:20:26.827
> 
> 标签：tcl, expect

因此，首先我承认我已经玩了大约 3 天的脚本非常新。我拿起了 O'Reilly 的书，正在努力完成它。但是我对期望的流程有点困惑，并希望得到一些指导。

我在下面有以下代码片段。if 语句的上半部分运行良好。但是 elseif 部分不能按预期工作。它执行，只是乱序。它首先处理 puts 行，然后通过 send 命令向下运行。我想知道它为什么这样做以及如何使其按顺序执行。

我还想做的另一个调整是，当没有匹配 $MD5 时，我不想等待超时。所以基本上我希望 $MD5 或任何不是 $MD5 的东西，这样我就不必坐在那里等待默认超时。我意识到我可以期待 -timeout 1 "$MD5" 并缩短窗口，但我想知道是否有更优雅的方式来处理这个问题。

先感谢您。

```
expect "$MD5"
if {$MD5 == $expect_out(0,string)} {
    send "config t\r";
    send "no boot system\r";
    send "boot system flash:$IOS\r";
    send "exit\r";
    send "wr mem\r";
    expect "OK";
    send "exit\r";
    puts -nonewline "\nIOS Upgrade Successful and Bootvar changed.\n"
    exit
} elseif {$MD5 != $expect_out(0,string)} {
    send "delete flash:$IOS\r";
    send "\r";
    send "\r";
    send "exit\r";
    puts -nonewline "\nIOS Upgrade FAILED MD5 Hash did not match!\n";
    expect eof
    exit
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T18:07:13.500

# vb.net - VB.net 中波斯语的拼写检查器

> ID：10646285
> 
> 赞同：1
> 
> 时间：2012-05-18T03:20:37.577
> 
> 标签：vb.net, spell-checking

是否有任何真正支持阿拉伯语脚本语言的.NET 拼写检查器库？或者任何工作的例子？

我想在 VB.net 的富文本框中对单词进行拼写检查。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T03:46:26.563

我认为[NHunspell](http://nhunspell.sourceforge.net/)会帮助你。它有多种语言，包括[波斯语](http://wiki.services.openoffice.org/wiki/Dictionaries#Persian_.28Iran.29_2)。

# ruby-on-rails - 显示关注的用户的帖子

> ID：10646290
> 
> 赞同：0
> 
> 时间：2012-05-18T03:21:26.697
> 
> 标签：ruby-on-rails, ruby

我有`act_as_follower`宝石。在哪里：

```
class Section < ActiveRecord::Base
  has_many :posts
  acts_as_followable
  # ...
end

class User < ActiveRecord::Base
  acts_as_follower
  has_one :section
  has_many :posts
  # ...
end 
```

节控制器：

```
def follow
  @section = Section.find(params[:id])
  @section.user = current_user

  if @section.user == nil
    # We don't follow this yet
    @section.user.follow(@section)
    msg = "You are suscribed to this Section"
  elsif @section.user.following?(@section)
    # We already follow this
    @section.user.stop_following(@section)
    msg = "You are't suscribed to this Section anymore"
  else
    # We don't follow this yet
    @section.user.follow(@section)
    msg = "You are suscribed to this Section"
  end
  redirect_to section_path(@section), :notice => msg
end 
```

所有这一切都很好，但我想`created_at desc`在`articles.index`.

# javascript - 在视图和模板中使用 django ajax 上传器

> ID：10646296
> 
> 赞同：0
> 
> 时间：2012-05-18T03:22:49.887
> 
> 标签：javascript, ajax, django, upload

我一直在努力`django ajax uploader`工作。`django application`我一定是脑死了:(因为我无法让它工作——据许多代码用户说，这应该是一件容易的事。

我已经安装了[django ajax 上传](https://github.com/GoodCloud/django-ajax-uploader)器 并将其添加到已安装的应用程序中。我决定不使用`STATIC_URL`s 而是将`css and js`文件放入`MEDIA_ROOT`并用于`MEDIA_URL`服务它们。

如[文档的第 4 步](https://github.com/GoodCloud/django-ajax-uploader#step-4-set-up-your-template)所述，我还在标签中包含了[匿名函数](http://pastebin.com/Yx2JpgjD)- 将操作更改为`<script>``start.html``{% url ajax_upload %}`

在我的`start.html`页面中，我需要一个文件输入元素，以便在选择文件时将文件上传到服务器上的某个位置。

所以我像这样创建了html

```
<form enctype="multipart/form-data" method="post" action="{% url upload_without_ajax %}"> {% csrf_token %}
<input type="file" name="fselect" id="file-uploader"> </input>
</form> 
```

start.html 由`views.start`方法呈现

视图.py -

```
def start(request, template_name):
    csrf_token = get_token(request)
    reqctx = RequestContext(request,{'csrf_token': csrf_token })
    return render_to_response(template_name,reqctx)

import_uploader = AjaxFileUploader() 
```

这是我的问题。

1.给`id=file-uploader`输入元素是否足以导致文件上传？或者我必须`$('#file-uploader').change(`在我的javascript中调用一个？

2.我只需要将选择的文件写入`MEDIA_ROOT/uploads`文件夹，这是我认为默认`LocalUploadBackend`的。在 urls.py 我映射`views.import_uploader`到 url ajax_upload

```
url(r'^ajax_upload$', 'views.import_uploader',name='ajax_upload'), 
```

尽管如此，没有文件上传发生..

我无法从 github 站点中的给定代码中得到太多信息。如果有人可以帮助我，将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-13T14:55:17.767

除了html之外的一切似乎都很好。但是，您应该检查您是否有 python 2.7，因为 2.6+ 与 django-ajax-uploader 不兼容。（或相反亦然！）

如果你继续使用 python 2.7，你应该克隆[https://github.com/lazerscience/django-ajax-uploader](https://github.com/lazerscience/django-ajax-uploader)

```
git clone https://github.com/lazerscience/django-ajax-uploader
cd django-ajax-uploader
python setup.py install 
```

这应该足够了。（不要忘记像 repo 中的示例那样更改 html，是的，#file-upload 可以与 jQuery 一起使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-30T05:58:18.473

我目前也在处理我的 django-ajax 文件上传。但是我的模板部分通过放置默认值可以正常工作。

其中 file-uploader 是 div 的 id 而不是实际的输入文件类型。根据我在 fileuploader.js 中读到的内容，该脚本将使用标准样式为您创建文件上传元素。我不是 js 大师，但我相信您可以在 fileuploader.js 中自定义它？

在下面的 js 函数中，我试图通过尝试添加名称和值的新项目`params: {..}`并将`action: "{% url ajax_upload %}",`其指向此的新项目，将我的实例的 pk 作为 ajax 的参数传递`url(r'^ajax-upload$', 'yourapp.views.import_uploader', name="ajax_upload"),`

我希望这有没有帮助..给我投票：[

```
<!doctype html>
<head>
    <!--<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.1/jquery.min.js" ></script>-->
    <script src="{{ STATIC_URL }}js/jquery-1.9.1.js" ></script>
    <script src="{{ STATIC_URL }}ajaxuploader/js/fileuploader.js" ></script>
    <link href="{{ STATIC_URL }}ajaxuploader/css/fileuploader.css" media="screen" rel="stylesheet" type="text/css" />
    <script>

        function createUploader(pk){            
            var uploader = new qq.FileUploader({
                element: $('#file-uploader')[0],
                action: "{% url ajax_upload %}",
                debug: true,
                multiple: false,                    
                onComplete : function(id, fileName, responseJSON) {
                if(responseJSON.success) {
                    alert("success!");
                } else {
                    alert("upload failed!");
                }                    
                },                    
                params: {
                'csrf_token': '{{ csrf_token }}',
                'csrf_name': 'csrfmiddlewaretoken',
                'csrf_xname': 'X-CSRFToken',
                'pk': pk,
                },           
            });
        };

        $(document).ready(function(){
            createUploader({{instance.id}});
        });          
    </script>
</head>
<body>    
    <div id="file-uploader">        
    </div>   
</body>
</html> 
```

# haskell - 共享由 monad 动作计算的信息

> ID：10646299
> 
> 赞同：5
> 
> 时间：2012-05-18T03:22:54.473
> 
> 标签：haskell, compiler-construction, monads, sharing

我正在研究使用 Haskell 构建编译器。我使用定点数据类型递归来表示抽象语法树（ast）。

我正在研究如何为具有简单表达式（数字和逻辑常量、二进制操作和局部变量声明）的玩具语言编写类型检查器。

类型检查器是一个读写状态 ( `RWS`) monad：

*   阅读器，因为它使用由具有符号定义（符号及其类型的关联列表）的环境组成的上下文；
*   writer，因为它会生成错误消息列表；
*   稍后将需要 state 来实现名义类型等价，现在我只是在计算程序中定义了多少变量（仅作为其使用的演示）。

monad 返回的值是一个用类型（用于表达式）或环境（用于声明）注释的 ast。

该函数`checker`接收输入程序的 ast 并生成一个用`RWS`monad 操作注释的新 ast，该操作在运行时给出类型（如果 ast 是表达式）或环境（如果 ast 是声明）。

例如，考虑输入程序

```
let x = 2 + 3 in 1 + x 
```

与相应的 ast：

```
 Let                     
                     |                      
          -----------------------           
         |                      |           
     VarDec: x               Bin Add        
         |                      |           
         |                ------------      
         |                |          |      
      Bin Add          Num 1.0     Var x    
         |                                  
    -----------                             
   |          |                             
Num 2.0    Num 3.0 
```

类型检查它将产生以下 ast：

```
 action1
                    Let                     
                     |                      
          -----------------------           
         |                      |           
      action2                action3
     VarDec: x               Bin Add        
         |                      |           
         |                ------------      
         |                |          |      
      action4          action5    action6
      Bin Add          Num 1.0     Var x    
         |                                  
    -----------                             
   |          |                   
action7    action8      
Num 2.0    Num 3.0 
```

`RWS`这是用monad 动作递归注释的。

编译器的后期阶段将需要知道 ast 中的注释产生的信息（及其子级，递归地）。因此需要运行相应的操作来获取它。

根据语言规则，通过组合孩子的动作来构造根动作。

例如，为了获得根表达式的类型（一个 let 表达式），`action1`必须运行，这将使得`action2`and`action3`也被运行，因为当`action1`它被创建时，它使用了`action2`and `action3`。

当`1+x`需要添加的类型时，`action3`必须运行才能获得它。

所以动作会重复运行。类型检查器的结构方式（使用`RWS`monad 操作）失去了对 ast 的每个节点的计算信息的共享。

是否有任何技术可以恢复这种共享，从而消除重新计算操作的需要？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T08:17:24.730

听起来你的设计已经变成了一条死胡同。你向我们展示了它的外观。

> 我正在研究使用 Haskell 构建编译器。

[学习意味着您可以阅读其他人如何进行类型检查（例如 GHC 或Oleg](http://okmij.org/ftp/)的示例）。或者，通过尝试发明来了解更多信息可能是您的手段。

> 类型检查器的结构方式......失去了对 ast 的每个节点的计算信息的共享。

所以不要丢失信息。如果类型检查器在 monad 中运行，那么您最终可以将其设计为记住状态。

> 是否有任何技术可以恢复这种共享，从而消除重新计算操作的需要？

更具体地说，您想在 actionX 运行后用它的结果替换它。这看起来非常非常非常像对惰性值的渴望：计算一次并记住结果（只是稍微有点棘手的错误）。

也许每个动作都会从它的节点重新计算子树，包括它自己。孩子们的行动被他们的结果（和重新计算的子树）所取代。

或者，如果您的 AST 是一个不可变的东西，那么状态可能应该是一个并行的 AST。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T12:32:52.677

动作应该总是给出类型，有时*修改*环境。词法环境本身可以直接在 monad 中携带，作为一个词法框架的堆栈（或列表），每个框架捕获一个范围，并包含标识符到类型的映射。如果你正在做统一，那么让你的类型要么是实际类型，要么只是打开类型变量，然后指向另一个从类型变量到类型的映射。（这方面为您提供了一个可变存储。）如果该映射中的类型变量没有值，则该类型仍然是打开的。一旦确定了类型统一到什么，然后将该统一作为关联添加到地图中。（当然，统一两个类型变量意味着创建一个新类型变量并将其他类型变量统一到该变量上——这实际上是基本统一的唯一“技巧”）。

无论如何，您可能想查看 wren 的统一库以获取一些实现技术的指针：http: [//hackage.haskell.org/package/unification-fd](http://hackage.haskell.org/package/unification-fd)。请注意他如何拥有一个`STVar`使用真正可变性的后端，以及一个在`IntVar`后台使用不可变映射的后端（这有点像上面描述的）。

**编辑**：我还想到，如果每个动作都在 RWS 之后，那么根据定义，它们之间就无法共享！AST 的递归固定点很棒，但我知道将 monad 向下“推”到每个级别没有任何优势，除非您明确想要创建实际上试图避免的“不共享”行为。

**编辑**：要在每个级别使用类型注释 AST，然后只需将`typecheck`from的类型更改`Expr () -> m Type`为`Expr -> m (Expr Type)`expr 在某种注释上参数化的位置！您当前没有用类型注释 AST，而是用可以产生类型的计算来注释它！因此，只需运行计算即可...

# node.js - Node.js - throw new Error("Cannot find module '" + request + "'");

> ID：10646301
> 
> 赞同：3
> 
> 时间：2012-05-18T03:23:28.307
> 
> 标签：node.js

这是什么意思？

```
throw new Error("Cannot find module '" + request + "'"); 
```

当我安装一个软件包时，我遇到了这个错误！为什么？

我是usig快递。

例如

npm install -g 时刻

m = 要求('时刻');

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T20:00:19.597

如果你想在脚本中使用它，你必须在本地安装它。如果要在 shell 中使用它，请全局安装。

[http://blog.nodejs.org/2011/03/23/npm-1-0-global-vs-local-installation/](http://blog.nodejs.org/2011/03/23/npm-1-0-global-vs-local-installation/)

基本上，在`npm install moment`没有`-g`标志的情况下运行它会起作用。

# android - 查找logcat消息来源：surface (identity=xxxxx) is invalid, err=-19 (no such device)

> ID：10646303
> 
> 赞同：1
> 
> 时间：2012-05-18T03:23:56.513
> 
> 标签：android, logcat, glsurfaceview, orientation-changes

“surface (identity=xxxxx) is invalid, err=-19 (no such device)”，其中 xxxxx 是数字 ID，当然。

这是我在 3（三）个实例中同时获得的 logcat 错误条目，但我开发的游戏运行良好。我只是担心，因为这是一个错误，而不是警告。当我的游戏屏幕 (GLSurface) 由于 Activity.onResume() 而恢复时，我得到了 3 个相同的条目。屏幕行为在实践中绝对没问题。

详细信息：我的游戏受 GLSurfaceView.onResume() 以及方向更改的影响（即它在清单和配置更改中设置为横向，但显然当我从主屏幕返回游戏时，Android 需要将方向更改为横向） . 所以我在 GL 线程恢复后不久（在纹理重新加载期间）得到了错误。

我想我应该担心，毕竟这是一个错误。Stackoverflow 需要具体的问题，所以我的问题是：是什么原因以及如何处理，或者如果它是未知的，我在哪里可以找到它？应该是在安卓开源吧？

# linux - 如何更改Munin的munin-graph.log、munin-html.log、munin-limits.log和munin-update.log的日志级别？

> ID：10646309
> 
> 赞同：3
> 
> 时间：2012-05-18T03:24:38.137
> 
> 标签：linux, logging, centos, rsyslog, munin

我已经在“/etc/munin/munin-node.conf”中更改了“munin-node.log”的日志级别，但是现在一切都在 100% 工作，我该如何更改“munin-graph”的日志级别.log”、“munin-html.log”、“munin-limits.log”和“munin-update.log”？

它们都位于 /var/log/munin/

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-08T17:25:37.143

要更改 munin-graph 的日志级别（在版本 2.0.7 以下的日志级别 INFO 上运行），您可以更改 /usr/share/munin/munin-graph

从：

```
logger_open($config->{'logdir'});
logger_debug() if $config->{debug} or defined($ENV{CGI_DEBUG}); 
```

至：

```
logger_open($config->{'logdir'});
logger_debug() if $config->{debug} or defined($ENV{CGI_DEBUG});
logger_level("warn"); 
```

或升级到更高的 munin 版本：参见[http://munin-monitoring.org/ticket/1251](http://munin-monitoring.org/ticket/1251)

# javascript - 如何向选项 onchange MooTools 添加/删除选定属性？

> ID：10646312
> 
> 赞同：0
> 
> 时间：2012-05-18T03:24:55.500
> 
> 标签：javascript, mootools, option, html-select

这是我的小提琴：http: [//jsfiddle.net/tE6Wv/7/](http://jsfiddle.net/tE6Wv/7/)

我需要`selected="selected"`在使用 moo 更改时从先前选择的选项属性中添加或删除该选项，但从未添加过 html。

我正在使用 moo 缓慢创建菜单，但未采用所选值

```
var firstoption = new Element('option', { 
    'selected':'selected', 
    'value':"myValue" 
} 
```

或者

```
var firstoption = new Element('option', {
    'selected': true,
    'value': "myValue"
} 
```

这些都不起作用

感谢任何帮助。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T04:09:29.797

FWIW，您可以更改您的小提琴以确认已选择已为您更改。我已将 id 分配给 2 个选项，以便更容易分辨：

html 更改以在 2 个链接选项中包含 id 属性：

```
<select id="menu" onchange="location.href=this.value">
    <option value="">Go to..</option>
    <option id="link1" value="#">Link</option>
    <option id="link2" value="#">Link</option>
</select>​​​​​​​​​​​ 
```

js 以显示已选择的更改：

```
$('menu').addEvent('change',function() {
    alert(document.getElementById('link1').selected);
    alert(document.getElementById('link2').selected);
});​ 
```

# c - 基于 DBusGProxy 连接 dbus 信号失败

> ID：10646314
> 
> 赞同：0
> 
> 时间：2012-05-18T03:25:14.607
> 
> 标签：c, dbus

我正在做一个小项目。我的操作系统是 Linux (Ubuntu 11.04)。我想连接到 DBus Daemon 信号 NameOwnerChanged 以指示哪个应用程序正在关闭或启动。我编写了一个小程序来执行此操作。虽然失败了。我只使用了 glib dbus，没有使用低级 dbus。

这是我的代码：

/ *gcc -o 测试 main.c`pkg-config --libs --cflags glib-2.0 dbus-1 dbus-glib-1`* /

```
#include <dbus/dbus.h>
#include <dbus/dbus-glib.h>
#include <dbus/dbus-glib-bindings.h>
#include <dbus/dbus-glib-lowlevel.h>

#define D_SERVICE     "org.freedesktop.DBus"
#define D_PATH        "/"
#define D_INTERFACE   "org.freedesktop.DBus"

GMainLoop* loop;
DBusGConnection* conn;
DBusGProxy*     d_proxy;

static void dbus_name_owner_changed(DBusGProxy *proxy, char* name, char* old, char* new, gpointer user_data)
{
    g_print("%s owner change \n", name);
}

int main(int argc,char** argv)
{
    g_type_init();
    loop = g_main_loop_new(NULL, FALSE);
    conn = dbus_g_bus_get(DBUS_BUS_SESSION,NULL);
    d_proxy = dbus_g_proxy_new_for_name(conn, D_SERVICE, D_PATH, D_INTERFACE);

    guint ret;
    GError * error = NULL;

    dbus_g_proxy_call(  d_proxy, "RequestName", &error,
                        G_TYPE_STRING, "com.asianux.test",
                        G_TYPE_UINT, DBUS_NAME_FLAG_DO_NOT_QUEUE,
                        G_TYPE_INVALID,
                        G_TYPE_UINT, &ret,
                        G_TYPE_INVALID);

    if(error==NULL && ret==DBUS_REQUEST_NAME_REPLY_PRIMARY_OWNER)
    {
        g_print("Request Name Success \n");
    }
    else
    {
        if(error)
        {
            g_print("Request Name Failed %s\n", error->message);
        }
    }

    dbus_g_proxy_add_signal(d_proxy,"NameOwnerChanged",
                            G_TYPE_STRING,
                            G_TYPE_STRING,
                            G_TYPE_STRING,
                            G_TYPE_INVALID);

    dbus_g_proxy_connect_signal(d_proxy,"NameOwnerChanged",
                                G_CALLBACK(dbus_name_owner_changed),
                                NULL,NULL);

    g_main_loop_run(loop);
} 
```

我编译并运行它，但函数 dbus_name_owner_changed 从未运行过。为什么连接不上信号？

我知道`dbus_g_object_register_marshaller`在添加信号和连接信号之前我错过了。但是，即使我`dbus_g_object_register_marshaller`在我的代码上添加了，它仍然会失败。为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T06:21:29.120

我已经解决了。因为 D_PATH 应该是 "/org/freedesktop/DBus" 。

# apache - .htacces 使用通配符重定向

> ID：10646315
> 
> 赞同：0
> 
> 时间：2012-05-18T03:25:19.170
> 
> 标签：apache, .htaccess, url, mod-rewrite, redirect

我一直在努力让网站重定向正常工作，但我不断收到内部服务器错误

如果网址不是，这是我需要的：

`domain1/content/newzealand/mpc/mpc_newzealand_website/en/home_mpc/van******`

或者：

`domain1/content/newzealand/mpc/mpc_newzealand_website/en/home_mpc/truck*****`

然后重定向域2

`******`= 表示一切顺利（通配符）

domain1 = [http://www2.mydomain.com](http://www2.mydomain.com)

domain2 = [http://www.mydomain.com](http://www.mydomain.com)

这是我目前拥有的，但就像我说的那样，它不起作用。

```
Options +FollowSymLinks
RewriteEngine On
RewriteCond !domain1/content/newzealand/mpc/mpc_newzealand_website/en/home_mpc/van.*
RewriteCond !domain1/content/newzealand/mpc/mpc_newzealand_website/en/home_mpc/truck.*
RewriteRule .* domain2 [R=301,L] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T15:32:50.490

试试这个：

```
RewriteCond %{HTTP_HOST} ^www2.mydomain.com
RewriteCond %{REQUEST_URI} !content/newzealand/mpc/mpc_newzealand_website/en/home_mpc/van.*
RewriteCond %{REQUEST_URI} !content/newzealand/mpc/mpc_newzealand_website/en/home_mpc/truck.*
RewriteRule ^(.*)$ http://www.mydomain.com/$1 [R=301,L] 
```

`$1`如果您只想将它​​们重定向到 www.mydomain.com 而不是根据请求重定向到其中的任何其他页面，请从最后一行删除。

# javascript - 在井字游戏中声明平局的正确语法

> ID：10646318
> 
> 赞同：0
> 
> 时间：2012-05-18T03:25:57.243
> 
> 标签：javascript, jquery

我正在做一个井字游戏。有人已经教过我如何宣布获胜者并停止进一步的比赛。

有两个持续存在的问题。第一个是当胜利直接交叉时，计数器将 x 获胜加 1，将 o 获胜加 2。第二个问题是我无法让比赛打成平局。如果没有结果，我已经尝试过。

这是整个js，游戏可以在：http: [//jvonhausen.com/final/p19/](http://jvonhausen.com/final/p19/)

```
jQuery(function() {

    $('#start').click(clear_squares);

    $('.square').click(function () {    
        square_stuff(this);
    });

});

var player_x = true; 
var complete = false; 
var winner = '';
var x_wins = 0;
var o_wins = 0;
var draw = 0;

function clear_squares () {
    localStorage.setItem('x_count', x_wins); 
    localStorage.setItem('o_count', o_wins); 
    localStorage.setItem('draw_count', draw); 

    $('.square').html(''); 

    player_x = true;
    $('#output').html('turn: x');

    complete = false; //allows for new game
}

function square_stuff (square) {
    if (!complete) {
        if ($(square).html() == '') {       
            if (player_x == true) {
                $(square).html('x');
                player_x = false;               
            } else {            
                $(square).html('o');
                player_x = true;                
            }
        }
    }   
    check_squares();
}

function check_squares () {
    complete = true;
    var values = new Array(); 
    var winner = '';

    $('.square').each(function () {     
        values.push( $(this).html());
        if ($(this).html() == '') complete = false;
        if ( !winner && values[0] == values[1] && values[1] == values[2] ) winner = values[0];
        if ( !winner && values[3] == values[4] && values[4] == values[5] ) winner = values[4];
        if ( !winner && values[6] == values[7] && values[7] == values[8] ) winner = values[7];
        if ( !winner && values[0] == values[3] && values[3] == values[6] ) winner = values[3];
        if ( !winner && values[1] == values[4] && values[4] == values[7] ) winner = values[1];
        if ( !winner && values[2] == values[5] && values[5] == values[8] ) winner = values[5];
        if ( !winner && values[0] == values[4] && values[4] == values[8] ) winner = values[8];
        if ( !winner && values[2] == values[4] && values[4] == values[6] ) winner = values[2];      
        if (winner) {           
            complete = true;
            $('#output').html('winner: ' + winner);
            if ($(this).html() == 'x') {
                localStorage.setItem('x_count', x_wins); 
                x_wins++;
                $('#wins_x').val(x_wins);
            } 
            if ($(this).html() == 'o') {
                localStorage.setItem('o_count', o_wins); 
                o_wins++;
                $('#wins_o').val(o_wins);
            }
            if (winner == '' && complete == true) { 
                $('#output').html('no winner');
                localStorage.setItem('draw_count', draw); 
                draw++;
                $('#draws').val(draw);
            }   
        }                   
        if (winner == '' && complete == false) {    
            if (player_x == true) {     
                $('#output').html('turn: x');
            } else {        
                $('#output').html('turn: o');
            }       
        }
    });

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T03:54:49.223

一旦你发现一个赢家，你就不会打破你的“每个”循环。我认为这会起作用：

```
$('.square').each(function () {  
    if (winner) {
       return;
    }   
    values.push( $(this).html());
    .... 
```

或者，这更干净：

```
function check_squares () {
complete = true;
var values = []; // better way to declare an empty array
var winner = '';

// build the values array first
$('.square').each(function () {     
    values.push( $(this).html());
}

// then just check for a winner once... 
if ( !winner && values[0] == values[1] && values[1] == values[2] ) winner = values[0];
.... 
```

您的代码未检测到平局的原因是您的平局检查发生在“if (winner)”块内。

```
 if (winner) {           
        complete = true;
        ....

        // the clause will never get executed, because winner must have already been set to have made it this far
        // so winner == '' will aways be false
        if (winner == '') { 
            $('#output').html('no winner'); 
```

# objective-c - 由于文件间依赖关系，在 Xcode 中创建存档不起作用

> ID：10646319
> 
> 赞同：1
> 
> 时间：2012-05-18T03:25:57.390
> 
> 标签：objective-c, xcode4

我有一个 Xcode 项目，其中包含处理 .re 文件 (re2c) 的自定义规则，以及项目中的一组输入文件。这些输入文件相互依赖，例如file2.re需要先处理file1.re。

我的问题如下：

尽管在项目的“构建阶段”选项卡的“编译源”部分中正确设置了顺序，.re 文件还是以任意顺序编译。这可以解决，我可以在生成所有生成的文件之前多次执行构建。

但是当我尝试归档项目时，Xcode 总是会进行干净的重建，因此生成的文件每次都会被删除，并且由于依赖问题，我根本无法成功构建。

我的问题是：在单个目标中，有没有办法指定使用自定义规则构建的文件之间的依赖关系，或者指定构建顺序的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T18:09:39.790

我找到了解决方法。问题是由于自定义规则并行执行，因此明显的“随机”执行顺序。通过将并发构建的数量设置为 1，不会出现问题，但是当然，构建速度要慢得多。切拉维埃。

将并发构建设置为 1 的命令：

```
defaults write com.apple.dt.Xcode IDEBuildOperationMaxNumberOfConcurrentCompileTasks 1 
```

# javascript - window.location 在 javascript 中不起作用

> ID：10646323
> 
> 赞同：11
> 
> 时间：2012-05-18T03:26:19.647
> 
> 标签：javascript, function, redirect, window.location

由于某种原因，下面的代码在尝试重定向时不起作用。我尝试了其他几种方法，例如 window.location.href 等等。唯一有效的是`window.open ("")`，当我需要它在同一页面时，这会在新窗口中打开一个页面。如果我这样做`window.open("", "_self")`了，它就不再起作用了。如果我用它替换`window.location`它`alert`工作正常，所以我认为整体代码是正常的，只是阻止它在同一页面上重定向。这个问题也出现在我的 Windows Chrome 和 Mac Firefox 上。

```
<html>
    <head>
        <script type="text/javascript">
            function checkAnswers(){    
                getElementById("myQuiz");
                if(myQuiz.elements[1].checked){
                    window.location = "www.google.com";
                }else{
                    alert("Failed");
                }
            };
        </script>
    </head>
    <body>
        <img src="Castle.JPG" />
        <form id="myQuiz" onsubmit="checkAnswers()" action="">
            <p>Name the country this castle is located in?
                <br/>
                <input type="radio" name="radiobutton" value="A"/>
                <label>England</label>
                <input type="radio" name="radiobutton" value="B"/>
                <label>Ireland</label>
                <input type="radio" name="radiobutton" value="C"/>
                <label>Spain</label>
                <input type="radio" name="radiobutton" value="D"/>
                <label>France</label>
                <input type="submit" name="submit" value="Submit"/>
                <input type="reset" name="reset" value="Reset"/>
            </p>
        </form>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-18T03:36:56.130

将js更改为：

```
function checkAnswers()
{
    var myQuiz=document.getElementById("myQuiz");
    if (myQuiz.elements[1].checked) {
        window.location.href = "http://www.google.com";
    }
    else {
        alert("Failed");
    }
    return false;
}; 
```

并改变：

```
<form id="myQuiz" onsubmit="checkAnswers()" action=""> 
```

至

```
<form id="myQuiz" onsubmit="return checkAnswers();" action=""> 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-18T03:31:33.720

更改位置时，必须给它一个绝对 URL：

```
location.href = '/some_page_on_my_site'; 
```

或者：

```
location.href = 'http://www.google.com'; 
```

或者：

```
location.href = '//www.google.com'; 
```

最后一个将转到 http 或 https，具体取决于当前方案。谢谢@Derek

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-07-06T08:35:42.787

2018

多浏览器：safari、chrome、firefox：

只是这项工作：

```
window.location.replace(url) 
```

尝试将 url 分配给 window.location 或 window.location 的另一个选项失败

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-18T03:33:33.933

当你运行这个：

```
window.location ="www.google.com"; 
```

您正在相对于当前 requestURI 运行它。因此，如果您在[http://example.com](http://example.com)页面上，那么您正在尝试重定向到：

```
http://example.com/www.google.com 
```

相反，只需记住包含协议：

```
window.location ="http://www.google.com"; 
```

请记住，window.location 不是您的地址栏，旨在处理在地址栏中输入网址的非技术人员。对于 window.location，您必须明确包含 http://。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-18T03:31:53.170

您使用的网址`window.location`是本地网址；您需要添加`http://`部分网址。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-18T03:34:33.670

您忘记分配 myQuiz 变量

```
var myQuiz = document.getElementById( "myQuiz" ); 
```

您还需要`http://`在网址的开头添加。因为，否则它意味着相对 url。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2014-10-16T02:02:36.603

```
 <script type="text/javascript">
        function checkAnswers(){   

            var myQuiz = document.getElementById( "myQuiz" );
            if (myQuiz.elements[1].checked){ alert("123");
                window.location = "www.google.com";
            }else{
                alert("Failed");
            }
        };
    </script>
  </head>
<body>
    <img src="Castle.JPG" />
    <form id="myQuiz" onsubmit="return checkAnswers()" action="">
        <p>Name the country this castle is located in?
            <br/>
            <input type="radio" name="radiobutton" value="A"/>
            <label>England</label>
            <input type="radio" name="radiobutton" value="B"/>
            <label>Ireland</label>
            <input type="radio" name="radiobutton" value="C"/>
            <label>Spain</label>
            <input type="radio" name="radiobutton" value="D"/>
            <label>France</label>
            <input type="submit" name="submit" value="Submit"/>
            <input type="reset" name="reset" value="Reset"/>
        </p>
    </form>
</body> 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2016-06-09T12:05:26.363

问题应该是在没有相应对象的情况下调用方法.. 将 javascript 更改为如下所示... getElementById("myQuiz") 是 HTML 文档对象的方法。所以在 javascript 中使用此方法时，您必须将其附加到要对其进行操作的对象上。请记住 getElementById() 不是 javascript 方法。因此，当您执行 document.getElementById("myQuiz") 时，您会告诉 javascript 去文档对象（即 HTML）运行 getElementById("myQuiz") 方法。这个方法返回给 JS 一个元素。在 DOM 中，所有 HTML 元素都是对象。所以，我们有一个 Obj_Form，它是 HTML 中的元素对象。

```
function checkAnswers(){    
     var Obj_Form=document.getElementById("myQuiz");
      if(Obj_Form.elements[1].checked){
          window.location = "http://www.google.com";
          }
      else{ alert("Failed");
        }
     } 
```

# java - 获取在 android 中使用 wifi 网络共享连接的所有用户的列表

> ID：10646324
> 
> 赞同：12
> 
> 时间：2012-05-18T03:26:28.170
> 
> 标签：java, android, android-wifi, tethering

我正在尝试获取 wifi 网络共享中所有已连接用户的列表。我知道我必须阅读`dnsmasq.leases`，但问题是，我在哪里可以从我的手机中获取此文件？

如果我查看 wifi 网络共享开源应用程序的源代码

我在这里得到文件路径

```
this.coretask.setPath(this.getApplicationContext().getFilesDir().getParent());
this.DATA_FILE_PATH+"/var/dnsmasq.leases" 
```

我可能没有使用此应用程序进行 wifi 网络共享。那么我怎样才能获得文件位置来读取所有连接的用户呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T08:32:38.920

不要在某些外部应用数据上创建应用的依赖关系。

请参阅[此链接](https://stackoverflow.com/questions/5233068/android-application-wifi-device-ap-connectivity) 以了解如何获取已连接 WiFi 设备的列表。

您可以使用 Zero-conf bonjour 协议来发现其他设备。

[Android 应用 Wi-Fi 设备 - AP 连接](https://stackoverflow.com/questions/5233068/android-application-wifi-device-ap-connectivity)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T15:34:53.940

你为什么不创建一个新文件，并在用户进入 wifi 时捕获用户名，写入文件。然后在他们离开 wifi 时删除姓名，而不是不断检查姓名。也许每 10 秒检查一次？+1 如果有帮助，-1 如果没有帮助。

抱歉，缺少格式，但我正在使用手机。

# windows-phone-7 - 如何在 wp7 中删除基于 pivotitem 的上下文菜单项？

> ID：10646328
> 
> 赞同：0
> 
> 时间：2012-05-18T03:27:06.140
> 
> 标签：windows-phone-7

这适用于 Windows Phone 7.5

我无法根据枢轴项从我的上下文菜单中删除菜单项。我有三个枢轴项，我需要在上下文菜单中显示自定义项。

我正在尝试找到可以帮助我捕获当前数据透视项的正确事件，并基于此我想呈现上下文菜单选项。

更新#1：

Xaml 标记：

```
 <controls:PivotItem x:Name="HighPivotItem" Header="high">
        <toolkit:ContextMenuService.ContextMenu>
            <toolkit:ContextMenu Opened="ContextMenu_Opened" 
                           Closed="ContextMenu_Closed">
                <toolkit:MenuItem Header="mark as done" Click="MarkMenuItem_Click"/>
                <toolkit:MenuItem Header="edit" Click="EditMenuItem_Click"/>
                <toolkit:MenuItem Header="delete" Click="DeleteMenuItem_Click"/>
            </toolkit:ContextMenu>
        </toolkit:ContextMenuService.ContextMenu>
        <Grid>
            <TextBlock x:Name="HighTextBlock" Text=""
      Visibility="Collapsed" Margin="22,17,0,0"
 Style="{StaticResource PhoneTextGroupHeaderStyle}" />

            <ListBox x:Name="HighListBox" 
             ItemTemplate="{StaticResource DataTemplate}"
             SelectionChanged="ListBox_SelectionChanged" />
        </Grid>
    </controls:PivotItem> 
```

这是我的活动中的代码：

```
void MarkMenuItem_Click(object sender, RoutedEventArgs e)
{
  Task task = (sender as MenuItem).DataContext as Task;

  // Move from the task list to the done list
  Settings.TaskList.Value.Remove(task);
  Settings.DoneList.Value.Add(task);

  RefreshLists();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T06:20:06.050

您应该为每个数据透视项目设计上下文菜单

```
 <controls:Pivot Title="Pivot">
            <controls:PivotItem Header="one" DataContext="{Binding Task}">
                <!-- Stuff for pivot ONE -->
                <toolkit:ContextMenuService.ContextMenu>
                    <toolkit:ContextMenu >
                        <toolkit:MenuItem Header="Menu for both"/>
                        <toolkit:MenuItem Header="Menu for item ONE"/>
                    </toolkit:ContextMenu>
                </toolkit:ContextMenuService.ContextMenu>
            </controls:PivotItem>
            <controls:PivotItem Header="two">
                <!-- Stuff for pivot TWO -->
                <toolkit:ContextMenuService.ContextMenu>
                    <toolkit:ContextMenu >
                        <toolkit:MenuItem Header="Menu for both"/>
                        <toolkit:MenuItem Header="Menu for item TWO"/>
                    </toolkit:ContextMenu>
                </toolkit:ContextMenuService.ContextMenu>
            </controls:PivotItem>
        </controls:Pivot> 
```

菜单可以放置在列表框的数据模板中，也可以放置在单个项目上。

上面的例子假设页面有一个 DataContext 有一个属性“Task”

```
public MainPage()
{
    this.DataContext = new ViewModel { Task = new Task() };
    InitializeComponent();
} 
```

# c# - C#.net的DataGridView

> ID：10646331
> 
> 赞同：-3
> 
> 时间：2012-05-18T03:27:24.217
> 
> 标签：c#

当我们改变 DataGridView1 的值时如何设置事件。这意味着当我更改单元格的值时，我想在另一个单元格中显示文本。

示例：旧单元格值 = 尼泊尔我在此单元格上输入：N NE NEP 每次更改单元格值，我都需要发生事件。当我输入 N 然后 NE 然后 NEP 每次更改单元格值时，我都需要事件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T03:32:02.410

看一下DataGridView的CellValueChanged事件

[http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.cellvaluechanged.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.cellvaluechanged.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T04:11:11.057

我不认为 OP 是在 CellValueChanged 行为之后。这只是告诉你，在单元格被编辑后，我认为值是否不同。

听起来像 OP 想要更直接的事件，即当编辑控件的文本发生变化时。

这里看起来有很多信息： [将事件附加到 DataGridView 单元格的底层文本框](https://stackoverflow.com/questions/5430156/attaching-events-to-an-textbox-underlying-for-a-datagridview-cell)

# data-binding - knockout.js - 根访问视图模型

> ID：10646332
> 
> 赞同：1
> 
> 时间：2012-05-18T03:27:33.930
> 
> 标签：data-binding, knockout.js

有没有办法从列表中项目的回调内部访问根视图模型？

例子：

```
function Employee() {
    var self = this;
    this.notes = ko.observableArray();

    this.addNote = function() {
       // need to access the EmployeeViewModel here in order to set its detailedNote 
    }
}

function EmployeeViewModel() {
    var self = this;
    this.employees= ko.observableArray([]);

    // observables used as placeholders in modal windows
    this.detailedEmployee = ko.observable();
    this.detailedNote = ko.observable();
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-19T02:14:45.787

我假设您将在某个时候将 Employee 的实例添加到您的视图模型中的员工 observableArray 中。创建实例时，将 parentVM 传递给 Employee 构造函数。唯一需要注意的是，您将无法调用 ko.toJSON，因为当它尝试对对象进行字符串化时，它只会继续转圈。

我不得不做出一些推论，因为你没有提供很多细节，但我试图为你举一个例子。

[http://jsfiddle.net/bczengel/trm7y/](http://jsfiddle.net/bczengel/trm7y/)

在旁注中，创建多个对象实例时的一个小技巧，将您的内部函数放入构造函数的原型中，这样您就不会创建执行相同操作的函数的副本。例如，您的 addNote 函数将为您创建的每个 Employee 实例创建一次。如果您使用原型继承，则只会创建一个。这种变化也在我的例子中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T03:32:45.193

有 $root，您可以将其传递给您的回调，或者您创建具有 VM 知识的员工，或者丑陋，具有全局（或存储库），或者在 VM 上没有注释，或者附加函数从捕获VM的“自我”的视图模型到员工......

# jquery-mobile - jQuery Mobile Poppop 不隐藏或显示

> ID：10646334
> 
> 赞同：1
> 
> 时间：2012-05-18T03:27:49.370
> 
> 标签：jquery-mobile

我有这个作为我的html；

```
<div data-role="page" id="page1">

    <div data-role="content" class="Content">
        <a href="#popupBasic" data-rel="popup">Tooltip</a>

        <div data-role="popup" id="popupBasic">
            This is a completely basic popup, no options set.
        </div>
    </div>

</div> 
```

当我运行我的 jQuery Mobile 应用程序时，所有的页面转换都很好，但由于某种原因，弹出窗口在启动时没有隐藏，因此锚链接单击什么也不做。

我正在加载这些库；

```
<script src="/scripts/jquery-1.6.4.min.js"></script>
<script src="/scripts/jquery.mobile-1.1.0.min.js"></script> 
```

另外，如果我运行`$('#popupBasic').popup('close');`什么也不会发生

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T03:40:53.240

这是 JQM 的一项计划功能，但尚不可用。在 JQM 1.2 之前，该功能将无法使用。尝试像[http://dev.jtsage.com/jQM-SimpleDialog/demos2/](http://dev.jtsage.com/jQM-SimpleDialog/demos2/)这样的插件来提供该功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-29T13:07:53.830

```
$(document).ready(function(){
var isVisible=$('#popupBasic').is(':visible'); or var isHidden=$('#popupBasic').is(':hidden');
if(isVisisble)
{
 $('#popupBasic').hide('slow');
}
else
{
$('#popupBasic').show('slow');
}
}); 
```

# python - 检查字典键是否填充了 2 个数字的列表

> ID：10646335
> 
> 赞同：4
> 
> 时间：2012-05-18T03:27:58.837
> 
> 标签：python

我有一本字典：

```
self.currently_occupied = {obj:[0, 0]} 
```

我需要检查 obj 的值是否包含列表中两个数字以外的任何内容

例子：

```
obj:[58, -234]  is ok
obj:[32]        is not 
obj:[]          is not
obj:[4, k]      is not 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T03:35:33.967

这个测试怎么样：

```
(len(d[obj]) == 2) and isinstance(d[obj][0], int) and isinstance(d[obj][1], int) 
```

`isinstance(d[obj][1], (float, int))`*将同时* 检查`int`和`float`，并且`long`也可以添加。

这演示了需要测试什么以及如何满足 OP 请求，尽管毫无疑问可以通过巧妙的语法以各种方式缩短测试。

更新：正如@Akavall 指出/建议的那样，如果测试需要包括这是一个列表，则可以在`and`上面的测试前面加上以下内容：

```
isinstance(d[obj], list) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T03:43:58.170

让我们快速看看如何在不错的 python 中实现这一点：

```
def foo(currently_occupied):
    return all(isinstance(item, list)
               and len(item) == 2
               and all (isinstance(subitem, int)
                        for subitem in item)
               for item in currently_occupied.itervalues()) 
```

现在，让我告诉你，你不应该在 Python 中实现这种检查。这里的哲学是*鸭子打字*：如果它像鸭子一样走路，听起来像鸭子，那么它就是鸭子。

您不会询问该对象是否是一个列表并且有两个整数。您将它作为一个列表进行索引，您获取第一个元素并将其用作整数。如果有任何故障，哎呀，不是你的错，是呼叫者的错。

最多，您可以尝试/捕获类型错误并使用更具描述性的消息重新抛出它们，但不要去验证所有内容的类型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T03:36:26.587

尝试：

```
def two_int_list(value):
    return isinstance(value, list) and len(value) == 2 and \
           all(map(lambda x: isinstance(x, int), value))

def validate_dict_key(dictionary, key, valid=two_int_list):
    return key in dictionary and valid(dictionary[key])

validate_dict_key({'obj': [58, -234]}, 'obj')  # True
validate_dict_key({'obj': [32]}, 'obj')        # False
validate_dict_key({'obj': (58, -234)}, 'obj')  # False; only accepts list objects, not sure if this is what you want 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-18T04:44:32.563

我的解决方案在很大程度上基于@Levon 的解决方案，但我正在添加更多细节。仅仅使用 is`isinstance`可以引导一些不是由数字组成的列表来限定。例如：

```
[float('nan'), float('inf')] 
```

将符合条件，因为从技术上讲，上述两个值都是`float`; 但是，它们不是数字；因此我们需要添加一个额外的条件来控制它。

```
import numpy as np

def check(x):
    if isinstance(x,list):
        if len(x) == 2:
            if all(isinstance(ele, (int, float)) and np.isinf(ele) == False and np.isnan(ele) == False for ele in x):
                return True
    return False 
```

结果：

```
>>> check([2,3])
True
>>> check([4, float('inf')])
False 
```

编辑：

我认为使用`isfinite`使代码更干净，我也认为我们不需要`isinstance`在这种情况下使用。结果代码将是：

```
def check(x):
    if isinstance(x,list):
        if len(x) == 2:
            if all(np.isfinite(ele) for ele in x):
                return True
    return False 
```

# linux - 用 vim 编辑远程文件

> ID：10646339
> 
> 赞同：6
> 
> 时间：2012-05-18T03:29:10.960
> 
> 标签：linux, vim, scp

我正在尝试使用此命令“：e scp://username@host//home/oracle/filename.ksh”使用vim 7.2 编辑远程文件。但我收到此错误“scp：未找到”。然后我把 scp 文件放在 home/oracle 中。但我仍然得到同样的错误。我错过了什么？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-18T09:12:34.237

从 Vim 6.x 开始，**netrw 插件**作为标准插件安装。因此，您可以通过 ftp、rcp、scp 或 http 编辑文件。

对于`scp`操作，打开文件很有用，如下所示：

```
vim scp://remoteuser@server.tld//path/to/document 
```

您会在[Vim 提示页面](http://vim.wikia.com/wiki/Editing_remote_files_via_scp_in_vim)上获得大量信息。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-18T04:11:12.043

根据您的操作系统软件配置，您可以交替使用 fuse 和 sshfs 来完成此操作。

* * *

在大多数发行版中打包为 sshfs，这使得用户（取决于您的用户权限策略）可以在本地文件系统的某个位置实际安装 ssh 位置。

该命令看起来像这样（假设您已经安装了 sshfs）：

```
sshfs <user>@<host>:<remote_location> <local_path> 
```

一个例子：

```
sshfs root@test.example.org:/var/www /mnt/sshfsmounts/www 
```

这样做，您可以安全地编辑远程文件，就像它们成为本地文件系统的一部分一样，使用

```
vim /mnt/sshfsmounts/www/index.php 
```

例如。

* * *

这里有一些有用的链接：

[1] - [http://en.wikipedia.org/wiki/SSHFS](http://en.wikipedia.org/wiki/SSHFS)

[2] - [http://fuse.sourceforge.net/sshfs.html](http://fuse.sourceforge.net/sshfs.html)

[3] - [http://www.linuxjournal.com/article/8904](http://www.linuxjournal.com/article/8904)

* * *

请注意，您在挂载的 ssh 文件系统上拥有的权限是为`sshfs`命令中指定的用户应用的权限，由您在本地文件系统上为挂载点拥有的权限完成。这意味着您基本上*需要*在指定的 sshfs 用户下对挂载点和 ssh 主机具有写访问权限。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-18T03:33:31.423

您应该 ssh 到`host`，然后在那里使用 vim 的副本来编辑文件：

```
ssh username@host
vim /home/oracle/filename.ksh 
```

否则，如果必须，在本地（在 vim 之外）scp 文件，编辑它，然后将文件 scp 回`host`：

```
scp username@host:/home/oracle/filename.ksh .
vim filename.ksh
scp filename.ksh username@host:/home/oracle/ 
```

# groovy - 使用地图构造函数时在groovy中触发setter的顺序是什么

> ID：10646340
> 
> 赞同：2
> 
> 时间：2012-05-18T03:29:15.850
> 
> 标签：groovy, constructor, setter

在 Groovy 中，当我调用地图构造函数时，例如

```
new Player(name:'Lionel', surname:'Messi', number: 10, team:barcelona) 
```

我如何知道调用属性设置器的顺序？

我需要知道这一点，因为我需要在我的一些 setter 中应用某些逻辑，并且我需要知道在调用每个 setter 时将在对象中设置哪些数据。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-18T05:11:17.487

使用快速脚本，它们似乎是按照传递的顺序设置的：

```
class Foo {
    def settersCalled = []
    def setFoo(foo) { settersCalled << 'foo' }
    def setBar(bar) { settersCalled << 'bar' }
    def setBaz(baz) { settersCalled << 'baz' }
}

assert new Foo(foo: 0, bar: 0, baz: 0).settersCalled == ['foo', 'bar', 'baz']
assert new Foo(bar: 0, foo: 0, baz: 0).settersCalled == ['bar', 'foo', 'baz']
assert new Foo(baz: 0, bar: 0, foo: 0).settersCalled == ['baz', 'bar', 'foo'] 
```

但是，您可以通过使用调试器跟踪代码来更多地了解 Groovy 正在做什么。如果您在该代码的其中一个设置器中放置断点，您会注意到调用堆栈包含`MetaClassImpl.setProperties`，这意味着这些属性是由该方法设置的。如果我们看一下[`setProperties`'代码](https://github.com/groovy/groovy-core/blob/5e6fa9226d7ee88e2bf82e48683b5255f3194caf/src/main/groovy/lang/MetaClassImpl.java#L1484)，我们可以确认它正在使用映射迭代器来遍历构造函数中传递的映射。而且，由于 Groovy 使用有序的 LinkedHashMaps 作为默认 Map 实现，我们可以得出结论，这些属性将按照它们在构造函数的映射中定义的顺序进行设置：)

# php - 如何正确管理 PHP 会话

> ID：10646342
> 
> 赞同：0
> 
> 时间：2012-05-18T03:29:58.867
> 
> 标签：php, session, session-variables, sessionid

如果输入验证失败，我只需要使用会话来维护从`edit.php`(1) 到`post.php`(2) 到(3) 的表单输入，这样我的用户就不必用他们的 (3)重新填写表单由于 (2) 之前在 (1)的条目不会重新发布到(3)。有多种方法可以通过此隧道传输数据：`edit.php``save_post``edit.php``edit.php``post.php``edit.php`

1.  WordPress 使用查询字符串作为它的消息 - 除了查询字符串的常见缺点之外，我没有这样做，因为我的`$_POST`变量对于查询字符串来说可能太多了
2.  [Transient API](http://codex.wordpress.org/Transients_API) - 不，不是这个，因为（远程可能的）碰撞原因
3.  直接修改 edit.php 和 post.php - 不可持续，尤其是在更新时。如果找不到其他东西，我可以为此寻找挂钩
4.  会议，

其中。

我不会使用会话进行登录（因为我使用的是 WordPress，所以我会让 WordPress 负责。）通过搜索网络，我在我的`functions.php`:

```
/*
 * manage sessions
 */
// http://wblinks.com/notes/secure-session-management-tips
// http://devondev.com/2012/02/03/using-the-php-session-in-wordpress/
// http://en.wikipedia.org/wiki/Session_fixation
// http://www.php.net/manual/en/function.session-regenerate-id.php
if (is_admin()) add_action('init', 'empl_sesh_start', 1);
add_action('wp_login', 'empl_sesh_cleanup');
add_action('wp_logout', 'empl_sesh_cleanup');
function empl_sesh_start() {
    session_start();
    // check if loaded session is server-generated
    if (!isset($_SESSION['IS_SERVER_TRUSTED']))
        session_regenerate_id(true); // if not, regenerate id and clean-up previous session files
    // regenerate id for every request
    session_regenerate_id();
    $_SESSION['IS_SERVER_TRUSTED'] = true; // set flag
}
// cleanup
function empl_sesh_cleanup() {
    session_start(); // needed for the rest of this function to work
    $_SESSION = array(); // cleanup session variables
    session_regenerate_id(true); // regenerate id and clean-up previous session files
    session_destroy();
} 
```

我只需要知道我是否做对了。我特别关心

1.  会话语句的顺序和调用是否正确？
2.  它们是否有必要（如在线文章所指出的那样，努力使会话不那么容易受到攻击）？

我还关心我读到的关于取消设置 cookie 及其复杂性的内容 - 我需要这样做吗？我不使用任何 cookie，我只使用两个会话变量：

```
// persist form vars to next load
$_SESSION['empl_form_inputs'][] = $_POST['empl_age'];
    // more similar code here...
$_SESSION['empl_form_inputs'][] = $_POST['empl_id'];

// persist message array to next load
$_SESSION['empl_messages'] = $empl_messages; 
```

我在此处而不是在 wordpress.stackexchange.com 上发布了此内容，因为（我认为）这并不是一个真正的 WordPress 问题，而是更多的 PHP Session 最佳实践。

* * *

**解决方案：**我最终放弃了整个会话 caboodle 并实现了 1 秒到期的冲突解决（至少对于我的用例）瞬态。谢谢@Robbie

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T04:07:00.627

您不需要会话来从表单发布，甚至在 wordpress 中也不需要。

您的脚本/插件应该阅读。

*   使用默认值创建值
*   创建“空”错误条件
*   如果发布
*   *   从 POST 填充“默认”值
*   *   清理价值观
*   *   验证值
*   *   如果有效
*   *   *   创建操作（例如将值放入数据库）
*   *   *   重定向到显示结果/成功消息的另一个页面（防止后退按钮失败）
*   *   如果无效
*   *   *   填充错误条件
*   使用值和错误条件显示表单。

如果您使用向导（多页表单）方法，您将使用会话。这样，表单总是显示用户输入的内容和错误。

* * *

但是，要回答您的问题，您的 addactions() 可能是您想要的，但这些功能是激进的。

*   init 看起来不错 - ish（请注意下面关于重新生成 ID 的评论）
*   清理是有风险的，因为您将清除任何其他使用会话的插件。只需删除您的条目（ $_SESSION['empl_form_inputs'] = array(); ）并继续
*   如果你像这样乱用 sesson ID，你将完全搞砸任何其他使用会话的插件。
*   对于“安全”，保持相同的会话 ID，但跟踪它的来源并给它一个超时。因此，如果 session_id() = "ABC" 有 10 分钟未使用，或者来自不同的用户代理，则忽略您拥有的那些值并重新开始。

超时示例：

```
if ($_SESSION['empl_form_expires'] > time()) {  // Also add user agent chack or something
    $_SESSION['empl_form_inputs'] = array();  // Clear values
} else {
    $_SESSION['empl_form_expires'] = time() + 600;  // Keep the time running
} 
```

# macos - 我的本地主机服务器上的隐藏目录（与 htaccess 相关）

> ID：10646347
> 
> 赞同：2
> 
> 时间：2012-05-18T03:30:43.917
> 
> 标签：macos, .htaccess, xampp

我发现本地主机上的某些目录在包含具有以下代码行的 htaccess 文件时会消失（或隐藏）：

`Options +FollowSymLinks`

一旦我注释掉该行，保存文件并刷新我的浏览器 - 目录重新出现。我在我的 Mac OS 10.6.8 上运行 XAMPP 服务器 - 不确定这里还有哪些其他信息会有所帮助。我已经注释掉并取消了文件中所有其他代码行的注释，它们不会以任何方式影响这种情况。

任何帮助表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T17:22:41.543

好吧，我的一个朋友帮我弄清楚了这一点，我会在这里为将来的搜索者发帖。

问题是`AllowOverride`在不同的地方设置了不同的东西——它被设置为`All`（`httpd.conf`正确地）但是在那个文件里面`http-userdir.conf`被包含在那个文件里面，`AllowOverride`不包含`Options`.

所以 Apache 看到了 htaccess 命令中的选项并隐藏了整个目录 - 以惩罚我做一些我不被允许做的事情。

如果您处于同样的情况 - 在此处检查日志：

xamppfiles/logs/error_log

日志准确地说明了发生了什么以及为什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T03:45:18.537

此选项启用或禁用符号链接的显示，即符号链接（使用`ln`或类似命令）。在更高级别的 Apache 配置中，我认为您禁用了 SymLinks。当您注释掉此选项时，您添加（`+`选项之前的）重新启用当前文件夹的符号链接。我猜你的目录是指向另一个目录的链接

参考[Apache 核心模块](http://httpd.apache.org/docs/current/mod/core.html)

# cocoa - 基础工具中的 NSNotificationCenter

> ID：10646350
> 
> 赞同：0
> 
> 时间：2012-05-18T03:30:59.553
> 
> 标签：cocoa, networking, foundation

我正在创建一个服务器，它必须在 OS X 上作为特权帮助工具运行。在其中，我尝试使用`NSSocketPort`, `NSFileHandle`, 并`NSNotificationCenter`在侦听套接字上执行异步 IO。但是，`NSNotificationCenter`拒绝调用通知处理程序。以下是相关代码：

```
NSSocketPort* sock = [[NSSocketPort alloc] initWithTCPPort:8080];
NSFileHandle* listener = [[NSFileHandle alloc] initWithFileDescriptor:sock.socket closeOnDealloc:NO]
[NSNotificationCenter.defaultCenter addObserver:self selector:@selector(onConnection:) name:NSFileHandleConnectionAcceptedNotification object:nil] 
```

我的主线程正在运行`[NSRunLoop.mainRunLoop run]`，所以这不是问题。我曾尝试在通话中将 'object' 设置为 'listener' `addObserver:`，但这并没有什么区别。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T04:00:09.173

`NSFileHandle`在创建实例之前尝试注册为观察者。如果通知是在 init 方法期间发送的，那么您注册得太晚了。（我没有具体的经验`NSFileHandle`，所以这只是一个可能修复的预感。）

# c# - 从另一个表单刷新 datagridview

> ID：10646352
> 
> 赞同：1
> 
> 时间：2012-05-18T03:31:27.580
> 
> 标签：c#, forms, datagridview, refresh

我有两种形式。主窗体和子窗体。在主窗体中显示 datagridview，在子窗体中是一种将数据插入主窗体中的 datagridview 的窗体。所以在我从子窗体插入数据后，我想在主窗体中刷新 datagridview。所以新数据出现在datagridview中。我试过这段代码，但datagridview没有刷新，我必须关闭我的应用程序并重新打开它以显示新的datagridview ...

```
public void button1_Click(object sender, EventArgs e)
    {
        string cstr = "server=localhost;User Id=root;database=sma9";
        con1 = new MySqlConnection(cstr);
        con1.Open();
        com1 = new MySqlCommand();
        com1.Connection = con1;
        com1.CommandType = CommandType.Text;
        com1.CommandText = "INSERT INTO tbukux (kodebuku,judulbuku,namakategori,pengarang,penerbit,tahunterbit,stokbuku) VALUES ('" + txtkode.Text + "','" + txtjudul.Text + "','" + txtkategori.Text + "','" + txtpengarang.Text + "','" + txtpenerbit.Text + "','" + txttahun.Text + "','" + txtstok.Text + "')";
        com1.ExecuteNonQuery();            
        con1.Close();
        Form1 form1 = new Form1();
        form1.gridbuku.RefreshEdit();                        
    } 
```

我也试过这个，但也没有工作

```
public void button1_Click(object sender, EventArgs e)
    {
        Form1 form1 = new Form1();
        string cstr = "server=localhost;User Id=root;database=sma9";
        con1 = new MySqlConnection(cstr);
        con1.Open();
        com1 = new MySqlCommand();
        com1.Connection = con1;
        com1.CommandType = CommandType.Text;
        com1.CommandText = "INSERT INTO tbukux (kodebuku,judulbuku,namakategori,pengarang,penerbit,tahunterbit,stokbuku) VALUES ('" + txtkode.Text + "','" + txtjudul.Text + "','" + txtkategori.Text + "','" + txtpengarang.Text + "','" + txtpenerbit.Text + "','" + txttahun.Text + "','" + txtstok.Text + "')";
        com1.ExecuteNonQuery();
        com2 = new MySqlCommand();
        com2.Connection = con1;
        com2.CommandType = CommandType.Text;
        com2.CommandText = "select * from tbukux";
        ds1 = new DataSet();
        adp1 = new MySqlDataAdapter(com2);
        adp1.Fill(ds1, "tbukux");
        form1.gridbuku.DataSource = ds1;
        form1.gridbuku.DataMember = "tbukux";
        con1.Close();            
        form1.gridbuku.Refresh();                        
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T14:15:01.473

您可以在 frmNewBook 中添加这样的新事件

```
public event System.Action NotifyAnotherForm 
```

现在将此事件放在主窗体的 btnOpenForm_click 下

```
frmNewBook form = new frmNewBook();
form.NotifyAnotherForm += new System.Action(mainForm_NotifyAnotherForm);
form.Show(); // or .ShowDialog(); 
```

在主窗体，你必须有一个方法来处理这个事件

```
public void mainForm_NotifyAnotherForm() {
    //put you code for update datagrid
} 
```

当您在 frmNewBook 中进行一些修改时，它会在适当的位置执行一个事件

```
if (NotifyAnotherForm != null) {
   NotifyAnotherForm();
} 
```

如果你更简单的方法，你可以尝试这样做

```
frmNewBook form = new frmNewBook();

//You code will pause until form.Show close
form.Show(); // or .ShowDialog();

//After frmNewBook close, code will continue running and you can put code to update
loadDataGrid(); 
```

我建议你把你的**参数**放在 SQL COMMAND 中以避免[**Sql Injection**](http://msdn.microsoft.com/en-us/library/ff648339.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-23T14:06:29.090

您也可以使用“使用”。

```
 public void button1_Click(object sender, EventArgs e)
    {
       frmChildForm ofrmchild = new frmChildForm();

            using(new frmChildForm())

        {
            ofrmchild .BringToFront();
            ofrmchild .ShowDialog();

        }
         loadDataGrid();  

   } 
```

# python - 如何使用 django 的注册字段来自定义表格

> ID：10646353
> 
> 赞同：0
> 
> 时间：2012-05-18T03:31:31.427
> 
> 标签：python, django, registration

我需要使用注册表单的现有字段（即密码）（它不是新字段）在发布时在单独的表格上使用

我的代码如下

```
from django.contrib.auth.models import User 
from django.db.models.signals import post_save 

class Token(models.Model): 
  user = models.OneToOneField(User) 
  api_key=models.CharField(max_length=50) 

def create_user_token(sender, instance, created, **kwargs): 
 if created: 
   profile, created = Token.objects.get_or_create(user=instance) 

#this will definitely not work because i have no field name api_key on form 
post_save.connect(create_user_token, sender=User) 
```

我创建 apikey 的逻辑如下

```
 #password=posted from django-registration form as i have used django-registration 
 digest = hmac.new('Secret', password, hashlib.sha256).hexdigest() 
```

我正在使用 django 注册，每当用户注册或更改密码时，我都需要设置 api_key=digest

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T05:04:29.223

Django-registration 有一个特殊的[user_registered](https://bitbucket.org/ubernostrum/django-registration/src/27bccd108cde/registration/signals.py#cl-5)信号，例如，您可以从中获取所需的内容`request.POST`。

要更改密码，您可以编写自己的视图（基于 django 的视图）并从那里发送信号（甚至可能是相同的）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T15:21:00.647

同意 Ilvar 和 Frantzdy，您需要使用 user_registered 信号。请按照以下步骤操作

表格.py

```
from django import forms
from registration.forms import RegistrationForm
from django.utils.translation import ugettext_lazy as _
from registration.models import RegistrationProfile

attrs_dict = { 'class': 'required' }

class RegistrationFormEx(RegistrationForm):
  cell_phone = forms.CharField(widget=forms.TextInput(attrs=attrs_dict)) 
```

模型.py

```
import hashlib
import hmac
from django.db import models
from django.contrib.auth.models import User
from registration.signals import user_registered
from userInfo.forms import RegistrationFormEx

class ExProfile(models.Model):
   user = models.ForeignKey(User, unique=True)
   cell_phone = models.CharField(max_length=200, blank=True)
   api_key=      models.CharField(max_length=200, blank=True)

   def user_created(sender, user, request, **kwargs):
      form = RegistrationFormEx(data=request.POST)
      digest = hmac.new(str(request.POST['password1']), str(request.POST['username']), hashlib.sha256).hexdigest()
      new_user = User.objects.get(username=request.POST['username'])
      //here I have added api_key hash algo, you can change it
      new_profile = ExProfile(user=new_user,cell_phone=request.POST['cell_phone'],api_key=digest)
     new_profile.save()
     return new_user

  user_registered.connect(user_created) 
```

网址.py

```
from django.conf.urls import patterns, include, url
import registration.backends.default.urls as regUrls
from registration.views import register
from userInfo.forms import  RegistrationFormEx

urlpatterns = patterns('',
url(r'^accounts/register/$', register, {'backend': 'registration.backends.default.DefaultBackend','form_class': RegistrationFormEx}, name='registration_register'),
(r'^accounts/', include('registration.backends.default.urls'))

) 
```

希望您现在可以更改密码，祝您好运

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T05:09:16.750

如果您创建一个 change_password 视图，我建议添加几行代码来更改该密钥。出于演示目的：

```
profile = Token.objects.get(user=request.user)
#set a new api key
profile.api_key =hashlib.sha1(str(random.random()) +
                                   'app_name' +
                                 str(time.time())).hexdigest()
profile.save() 
```

* * *

# java - 休眠异常空值被分配给原始类型设置器的属性

> ID：10646358
> 
> 赞同：12
> 
> 时间：2012-05-18T03:32:07.223
> 
> 标签：java, sql, hibernate, persistence

Hibernate 3.6.9 有一个令人沮丧的问题。MS SQL Server 2008。注意异常和奇数列索引参考。

HQL 查询本身：

```
Select r from DataStoreReference r join fetch r.container c where r.hash=:hash and r.state=0 
```

堆栈跟踪：

```
2012-05-16 00:01:22,184 [BackgroundDeletionThread] ERROR org.hibernate.util.JDBCExceptionReporter - The value supplied cannot be converted to BIGINT.  
2012-05-16 00:01:22,186 [BackgroundDeletionThread] ERROR org.hibernate.util.JDBCExceptionReporter - The value supplied cannot be converted to BIGINT.  
2012-05-16 00:01:22,188 [BackgroundDeletionThread] ERROR org.hibernate.util.JDBCExceptionReporter - Invalid column index 14\.  
2012-05-16 00:01:22,190 [BackgroundDeletionThread] ERROR org.hibernate.util.JDBCExceptionReporter - The value supplied cannot be converted to BIGINT.  
2012-05-16 00:01:22,193 [BackgroundDeletionThread] ERROR org.hibernate.util.JDBCExceptionReporter - The value supplied cannot be converted to BIGINT.  
2012-05-16 00:01:22,194 [BackgroundDeletionThread] ERROR org.hibernate.util.JDBCExceptionReporter - Invalid column index 14\.  
2012-05-16 00:01:22,194 [BackgroundDeletionThread] ERROR com.flipper.utils.ServerErrorHandlerStrategy - reportError: Db :: com.flipper.datastore.workers.BackgroundDeletionThread.executeWork:87 :: EXCEPTION : com.flipper.datastore.exceptions.DBStoreException: Null value was assigned to a property of primitive type setter of com.flipper.datastore.model.DataStoreReference.usage com.flipper.datastore.exceptions.DBStoreException: Null value was assigned to a property of primitive type setter of com.flipper.datastore.model.DataStoreReference.usage  
    at com.flipper.datastore.impl.hib.HibernateDBStore.getAllReferences(HibernateDBStore.java:301)
    at    com.flipper.datastore.workers.BackgroundDeletionThread.processEntry(BackgroundDeletionThread.java:165)
    at com.flipper.datastore.workers.BackgroundDeletionThread.processSet(BackgroundDeletionThread.java:138)
    at com.flipper.datastore.workers.BackgroundDeletionThread.executeWork(BackgroundDeletionThread.java:84)
    at com.flipper.datastore.workers.BackgroundDeletionThread.run(BackgroundDeletionThread.java:60)
Caused by: org.hibernate.PropertyAccessException: Null value was assigned to a property of primitive type setter of com.flipper.datastore.model.DataStoreReference.usage
    at org.hibernate.property.BasicPropertyAccessor$BasicSetter.set(BasicPropertyAccessor.java:109)
    at org.hibernate.tuple.entity.AbstractEntityTuplizer.setPropertyValues(AbstractEntityTuplizer.java:583)
    at org.hibernate.tuple.entity.PojoEntityTuplizer.setPropertyValues(PojoEntityTuplizer.java:229)
    at org.hibernate.persister.entity.AbstractEntityPersister.setPropertyValues(AbstractEntityPersister.java:3847)
    at org.hibernate.engine.TwoPhaseLoad.initializeEntity(TwoPhaseLoad.java:152)
    at org.hibernate.loader.Loader.initializeEntitiesAndCollections(Loader.java:982)
    at org.hibernate.loader.Loader.doQuery(Loader.java:857)
    at org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:274)
    at org.hibernate.loader.Loader.doList(Loader.java:2542)
    at org.hibernate.loader.Loader.listIgnoreQueryCache(Loader.java:2276)
    at org.hibernate.loader.Loader.list(Loader.java:2271)
    at org.hibernate.loader.hql.QueryLoader.list(QueryLoader.java:459)
    at org.hibernate.hql.ast.QueryTranslatorImpl.list(QueryTranslatorImpl.java:365)
    at org.hibernate.engine.query.HQLQueryPlan.performList(HQLQueryPlan.java:196)
    at org.hibernate.impl.SessionImpl.list(SessionImpl.java:1268)
    at org.hibernate.impl.QueryImpl.list(QueryImpl.java:102)
    at com.flipper.message.dao.DataStoreDao.getAllReferencesByHash(DataStoreDao.java:136)
    at com.flipper.datastore.impl.hib.HibernateDBStore.getAllReferences(HibernateDBStore.java:298)
    ... 4 more
Caused by: java.lang.IllegalArgumentException
    at sun.reflect.GeneratedMethodAccessor556.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.hibernate.property.BasicPropertyAccessor$BasicSetter.set(BasicPropertyAccessor.java:66)
    ... 21 more 
```

现在，如果以下不正确，我会从逻辑（和谷歌搜索）中理解这一点

a) DataStoreReference 的每个实例化后紧跟 System.currentTimeMillis 的 setUsage) b) 该项目在映射中被标记为非空（见下文） c) 导出的表仅在 f_external 列中显示空值。使用列具有完全合理的长数字。

POJO：

数据存储参考

```
private long id;

private String hash;    
private long date;  
private long sze;   
private long usage; 

private int state;  
private String external;
private DataStoreContainer container; 
```

其次是通用的未修改的getter/setter。

映射文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN" "http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd">
<hibernate-mapping package="com.flippr.datastore.model">
  <class name="DataStoreReference" table="t_dsref">
    <id name="id">
      <column name="ds_reference_id"/>
      <generator class="native"/>
    </id>
    <property name="hash" not-null="true" column="f_hash" lazy="false" index="idx_hash_dsr" type="string" length="128" />
    <property name="state" not-null="true" column="f_state" lazy="false" index="idx_hash_dsr,idx_size_dsr,idx_usage_dsr" type="integer"/>
    <!--  hibernate hates the name size -->
    <property name="sze" not-null="true" column="f_size" lazy="false" index="idx_size_dsr" type="long"/>
    <property name="date" not-null="true" column="f_date" lazy="false" type="long"/>    
    <property name="usage" not-null="true" column="f_usage" lazy="false" index="idx_usage_dsr" type="long"/>
    <property name="external" not-null="false" column="f_ext" lazy="false" type="string" length="160" />

    <many-to-one name="container" class="com.flipper.datastore.model.DataStoreContainer" 
     column="entity_id" foreign-key="fk_ds_container_id_dsr"  not-found="ignore" not-null="true"/>
   </class>
</hibernate-mapping>

<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN" "http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd">
<hibernate-mapping package="com.flipper.datastore.model">
  <class name="DataStoreContainer" table="t_dscnt">
    <id name="id">
      <column name="ds_container_id"/>
      <generator class="native"/>
    </id>
    <property name="containerType" column="f_type" index="idx_containerType_dsc" lazy="false" type="integer"/>
    <property name="fileCount" column="f_fc" lazy="false" type="long"/>
    <property name="deletedCount" column="f_dc" lazy="false" type="long"/>
    <property name="path" column="f_path" length="255" lazy="false"  type="string"/>
    <set cascade="save-update,delete,delete-orphan,all-delete-orphan" inverse="true" name="documents">
      <key column="entity_id" />
      <one-to-many class="com.flipper.datastore.model.DataStoreReference"/>
    </set>
  </class>
</hibernate-mapping> 
```

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-05-18T07:09:16.543

错误消息很清楚：在至少一行中，列 f_usage 具有空值。这个 null 值不能放入像 long 这样的原始类型中，因为原始类型不能表示 null。

当数据库中已经存在空值时，property 子句中的非空属性无效。not-null 属性仅用于 dmd 生成。但是数据库表 t_dsref 的 f_usage 列可能允许空值（`desc t_dsref`在 sql 中检查）。

解决方案：用Long交换long：

```
private Long usage; 
```

并且在使用该值时，您必须处理 null 条件，例如

```
if (usage != null) {
  return usage.longValue();
else
  return -1; 
```

（您正在使用 getter 和 setter 来访问 hibernate，所以这个 codelet 不应该在 getter 中，因为在数据库中，更新后 null 值应该继续为 null，但您可以在您使用的第二个 getter 中执行此操作在其他任何地方，或者您为休眠进行字段访问。）

*我的一般建议：如果列在数据库*中标记为 NOT NULL，则原始数据类型应仅用于休眠属性。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-01-16T08:29:56.427

当您对某些列使用原始类型但该字段在 DB 中为空时，此类错误会在 Hibernate 中发生。解决方案：

解决方案一：使用 Wrapper 类（Integer for int ...） 解决方案二：定义列的默认值。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-19T02:12:44.067

原来这是增强的 Hibernate 3.6 MS SQL 方言的错误。如果您扩展 SQLServer2005 或 SQLServer2008 方言，您将遇到此问题。使用较旧的 SQLServer 方言（这几乎是 Hibernate 3.3x 附带的）你不需要。可能与引入的分页支持有关。叹

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-12-07T04:58:28.837

Hibernate 需要一些修改以匹配企业开发的现实生活场景。使用对象而不是原语会导致比在此上下文中解决的问题更多的问题。

自 2002 年以来，我一直在编写 Java EE 企业应用程序。考虑到您可能有许多引用具有空值的代码表的表，最好的解决方案是尽可能更新数据库。

例如，如果您有一个引用生成代码表的人员表来表示初级、高级等头衔，并且许多条目为空，请更新代码表以具有未知引用，然后更新所有的表数据空值指向该引用。作为大多数大型且编码错误的 Java EE 应用程序，您可以尝试更新这些表的入口点，但很可能这是一团糟，并且可能有各种入口点从 cron 作业、Web 服务等运行，因此请更新DB 来捕获这些空值并将它们默认为未知条目，让您自己头疼。如果您从头开始构建，那么这也是休眠的一团糟，因为从我可以告诉休眠的内容来看，这并不是很容易告诉您尝试使用原语调用设置器，并且它' s null 只需将其设为 0 或 -1，但我的休眠体验也不足 20 小时。我刚刚阅读了用户类型，所以我必须阅读更多内容并了解它们是如何工作的。

大型 Java EE 应用程序中的对象在运行时是一场噩梦，与当今市场上的编码器质量一样。

# android - 如何从android中的专辑中获取歌曲？

> ID：10646366
> 
> 赞同：3
> 
> 时间：2012-05-18T03:34:02.497
> 
> 标签：android

我正在获取所有专辑详细信息。现在我想从任何专辑中获取所有歌曲。如何查询特定专辑中的歌曲？

我已使用此代码获取专辑详细信息：

```
Cursor cursor = contentResolver.query(
                MediaStore.Audio.Albums.getContentUri("external"),
                new String[] { 
                    MediaStore.Audio.Albums.ARTIST, 
                    MediaStore.Audio.Albums._ID,
                    MediaStore.Audio.Albums.NUMBER_OF_SONGS, 
                    MediaStore.Audio.Albums.ALBUM}, null, null,
                MediaStore.Audio.Albums.ALBUM + " ASC"); 
```

请任何人帮助我。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-03-02T11:48:30.200

您可以通过 MediaStore.Audio.Media 属性上的字段为 contentResolver.query 上的“选择”字符串编写简单的 sqlite 查询。[请查看我关于如何从专辑 ID 获取歌曲和其他媒体的](https://stackoverflow.com/questions/32337949/how-to-get-songs-and-other-media-from-an-album-id/35746126#35746126)答案？

# php - 根据搜索选项显示来自 SQL 的数据

> ID：10646370
> 
> 赞同：2
> 
> 时间：2012-05-18T03:34:23.807
> 
> 标签：php, mysql, sql

我正在尝试制作一个搜索表单，以帮助用户从数据库中过滤他们的结果。

您如何根据从下拉列表中选择的选项对结果进行排序？

我的意思是排序，如果用户从列表中选择“名称”，当他们点击提交时，表格将显示所有数据，但名称将按升序或降序排列（也是用户选项）

**表单（下拉列表和单选按钮示例）：**

```
<select name="sort">
    <option value="x">Select a field</option>
    <option value="1">Name</option>
    <option value="2">City</option>
    <option value="3">Occupation</option>
</select>
&nbsp;
ascending<input type="radio" name="sort_order" value="asc">
&nbsp;
descending<input type="radio" name="sort_order" value="desc"> 
```

**询问：**

```
if ($sort !== "x")
$SQL="SELECT * FROM data //what do I add here?// 
```

实现这一目标的最有效方法是什么？任何帮助表示赞赏！
随意问我是否不清楚，因为我不确定如何很好地表达我的问题。

编辑：

我正在使用数组`$value()`在表格上显示数据。

**样品展示：**

```
for ($i=0;$i<$num_results;$i++)
        {
        $row=mysql_fetch_array($result);
        echo "<tr>";
        echo "<td>".$row["Name"]."</td>";
        if (in_array("City",$value))
        echo "<td>".$row["City"]."</td>";
           if (in_array("Occupation",$value))
           echo "<td>".$row["Occupation"]."</td>"; 
```

如何将结果保存为 my`$sort`和`$sort_order`into `$value()`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T03:39:42.683

```
mysql_query("select * from data order by ".mysql_real_escape_string($_POST['sort'])." ".mysql_real_escape_string($_POST['sort_order'])); 
```

像这样编写你的 sql 查询

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T03:37:47.413

```
$sort = mysql_real_escape_string($_POST['sort']);
$sort_order = mysql_real_escape_string($_POST['sort_order']);
$SQL="SELECT * FROM data ORDER BY $sort $sort_order"; 
```

# ruby-on-rails - 如何检索具有附件的对象并根据一组预排序值对这些对象进行排序？

> ID：10646374
> 
> 赞同：0
> 
> 时间：2012-05-18T03:34:51.143
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, activerecord, paperclip

我正在使用 Ruby on Rails 3.2.2 和 Paperclip 2.7.0。我想从记录/对象有附件的数据库中检索数据（在我的情况下它是一个图像文件），并根据一组预先订购的值对这些对象进行排序。也就是说，我有`image_file_name`（由 Paperclip gem 处理）和`status`（状态可以是`published`, `unpublished`, `blocked`）数据库表列，我希望这样：

1.  返回的数据*主要*包含与图像相关联的记录/对象（也许这可以通过 Paperclip gem 处理）；
2.  在第 1 步检索到的对象按重要性排序（按*重要性*排序）`blocked`，`unpublished`然后是`published`状态；

此外，如果返回的对象小于 5，那么我想将其他对象“附加”到这些对象，但不关心步骤 #1 和 #2 中的“过滤器和排序”。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T03:49:35.640

这取决于数据存储。例如，如果您想按 MySQL 中某个字段的特定值进行排序，您可以执行以下操作：

```
Model.where('image_file_name is not null').order("field('status', 'blocked', 'unpublished', 'published')") 
```

# perl - 我可以通过调用脚本在我的 perl 项目中全局覆盖 die 吗？

> ID：10646375
> 
> 赞同：1
> 
> 时间：2012-05-18T03:35:16.923
> 
> 标签：perl, perl-module

我正在 Windows 中编写一个 perl 应用程序，我正在使用一个调用 perl 脚本，并且有几个分层的 perl oo 模块。我想自定义 perl 处理死亡的方式。我知道使用 $SIG{ **DIE** } 并使用“使用 subs die”，但我可以只将它放入我的调用脚本并期望现在，如果我的应用程序中的任何模块将只通过这个处理程序？

我已经尝试过这样的事情但没有奏效：

```
$SIG{__DIE__} = \&_death_handler;
use Mypackage;

my $obj = Mypackage->new();
$obj->init;

sub _die_handler {
    print "I die handler\n";
} 
```

Mypackage 看起来像这样：

```
package Mypackage;

sub new {
   .....
   .....
}

sub init {
    my $self = shift;
    die "error\n";
} 
```

这似乎只在我从调用脚本调用 die 时才有效，但从 Mypackage 调用的 die 没有被处理程序处理。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T03:53:17.167

是的，有可能：“如果你真的需要捕捉到死的调用，你可以定义 CORE::GLOBAL::die”

[http://www.effectiveperlprogramming.com/2011/05/override-die-with-end-or-coreglobaldie/](http://www.effectiveperlprogramming.com/2011/05/override-die-with-end-or-coreglobaldie/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-19T03:21:07.013

错字，不幸的是没有人被`strict`也抓住`warnings`；

当您打算引用您定义的子例程时，您已经分配了对*未定义*子例程的引用。`_death_handler``_die_handler`

更正错字并享受消息“我死了处理程序”（来自您的 sub `_die_handler`）。

# java - 将浮点数转换为字符串导致空指针异常

> ID：10646376
> 
> 赞同：-4
> 
> 时间：2012-05-18T03:35:19.797
> 
> 标签：java, android, floating-point, nullpointerexception, touch-event

我试图在我的布局上的 TextView 中将浮点值“度”显示为字符串，但在 tv.setText(mydegrees) 上收到 NullPointerException；我尝试了多种方法将浮点数转换为可用的字符串值，但似乎无法让 TextView 显示浮点值。任何帮助将不胜感激！

注意：度数由 onTouchEvent 操作

来自 XML 的 TextView：

```
<TextView
android:id="@+id/current_degrees"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:gravity="center_vertical|center"
android:text="@string/app_name"
android:textColor="#FFFF00" /> 
```

Java 代码：

```
float degrees = (float) -65;
String mydegrees = String.format("%.2f", degrees) ;

//...

public void pushClick(View pushClick) {
    switch (pushClick.getId()) {
    case R.id.btn_push:

        TextView tv = (TextView) findViewById(R.id.current_degrees);
        tv.setText(mydegrees); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T03:52:27.577

正如 tigrang 指出的那样，您的问题不是将浮点数转换为字符串。你所拥有的应该可以正常工作。您的问题是由于某种原因`findViewById()`返回一个值，大概是因为没有视图具有您提供的 ID。在尝试对其执行任何操作之前`null`，请确保 ID 是正确的并且您正在获取一个有效的实例。`TextView`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T04:06:31.777

```
String degreesStr = Float.parseFloat(degrees); 
```

试试这个将浮点值转换为字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T03:40:22.783

**编辑**：如前所述`@Jake King`，在我之前的回答中，我没有注意细节（您的`mydegree`成员是一个`String`实例。

这样，您获得 a 的唯一原因`NPE`是您的`tv TextView`为空。

请检查您用于活动/渲染器/视图的布局 xml 文件，并确保您有一个`TextView`或任何扩展名为`@+id/current_degrees`.

此外，您的标题非常具有误导性：如果您的`float`声明和初始化如上所述，则不能有任何`NullPointerException`.

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-18T03:39:28.250

简单..使用这个

```
tv.setText(degrees+""); //Degrees is the float value 
```

# ios - 使用ARC，系统是否有可能释放正在使用主动被解析的内存？

> ID：10646386
> 
> 赞同：1
> 
> 时间：2012-05-18T03:36:47.380
> 
> 标签：ios, parsing, exception, automatic-ref-counting

我不断收到以下错误：

```
*** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[__NSCFString setLinkID:]: unrecognized selector sent to instance 0x6bf37e0' 
```

我正在使用 NSXMLParser 解析 XML 文档，当我遇到标签“链接”时，我正在创建一个自定义 JLink 对象并将解析器委托传递给该对象。这种方法工作正常，然后我一定做了一些事情，因为现在每次运行项目时它都会突然产生上述错误。

我一直在努力解决问题，但我认为 JLink 对象正在被释放，因此当调用 setLinkID: 方法时，程序会崩溃。有没有其他人遇到过这个问题或知道可能是什么问题？我的代码如下：

导致错误（大部分时间）但有时会发生变化的方法：

```
-(void) parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict {
  if ([elementName isEqual:@"linkID"]) {
    currentString = [[NSMutableString alloc] init];
    [self setLinkID:currentString];
  } else if ([elementName isEqual:@"userID"]) {
    currentString = [[NSMutableString alloc] init];
    [self setUserID:currentString];
  } else if ([elementName isEqual:@"url"]) {
    currentString = [[NSMutableString alloc] init];
    [self setLink:currentString];
  } else if ([elementName isEqual:@"displayText"]) {
    currentString = [[NSMutableString alloc] init];
    [self setText:currentString];
  }
} 
```

以及创建 JLink 并使其成为解析器委托的方法：

```
-(void) parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict {
  if ([elementName isEqual:@"userID"]) {
    currentString = [[NSMutableString alloc] init];
    [self setUserID:currentString];
    [links removeAllObjects];
  } //A bunch of other checks
  else if ([elementName isEqual:@"link"]) {
    JLinks* newLink = [[JLinks alloc] init];
    //Setup the parent so that we can regain control of the element
    [newLink setParentParserDelegate:self];
    [parser setDelegate:newLink];
    [[self links] addObject:newLink];
  }
} 
```

我正在使用ARC。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T04:15:29.590

好的，错误说

```
-[__NSCFString setLinkID:]: unrecognized selector sent to instance 0x6bf37e0 
```

请注意，您以某种方式将消息发送到（基本上是 的私有子类）`setLinkID:`的实例。`__NSCFString``NSString`

在您的代码中，您只发送`setLinkID:`给自己。因此，不知何故，您的解析器委托已被解除分配，取而代之的是分配了 NSString 的实例。

即使您使用 ARC，您仍然必须了解对象所有权。在这种情况下，*NSXMLParser 不会保留对其委托的引用*，因为这很可能会创建一个保留循环。如果您查看标题或文档，您会看到该属性被定义为弱引用。

我认为正在发生的事情是您设置了解析器，您没有其他对主解析器委托的强引用，因此在解析开始后不久，它就被释放了。您需要检查您的代码，并确保您对该主解析器委托具有强引用。

如果你这样做，你会遇到问题：

```
NSXMLParser *parser = ...
[parser setDelegate:[[MyParserDelegate alloc] init]];
// delegate immediately deallocated, no strong references to it
if ([parser parse]) {
    MyParserDelegate *delegate = [parser delegate]; // nil or junk at this point 
```

你应该像这样构造你的代码：

```
NSXMLParser *parser = ...
MyParserDelegate *topLevelDelegate = [[MyParserDelegate alloc] init];
[parser setDelegate:topLevelDelegate];
if ([parser parse]) {
    // pull data out of topLevelDelegate 
```

如果您使用交换专用委托的模式，topLevelDelegate 需要维护对子委托的强引用。如果你有一个从子级到父级的强引用，那没关系，因为子级本身只能从解析器本身访问，它不保留其委托。您可能需要两种方式的参考：从父母到孩子的强大；从孩子到父母的软弱。（一般来说，这种模式会阻止保留循环。）

哦，回答你的标题问题：是的，ARC 有可能释放你正在使用的内存，如果它只能通过对它的弱引用来访问。但如果你正在使用它，你应该至少有一个强烈的参考。

# python - python：在当前目录之外找不到文件

> ID：10646389
> 
> 赞同：0
> 
> 时间：2012-05-18T03:37:12.780
> 
> 标签：python

我在 Cygwin 的命令提示符下运行 python (2.7)。我通常将文件名传递给我的 python 代码并使用以下命令检索文件名：sys.argv[1]。我让 python 在打开之前检查文件是否存在（使用 os.path.exists）。

即使我将文件指定为“../dir1/dir2/file_name”，这仍然有效。截至今天，如果文件名包含路径，Python 无法找到任何文件（即使它们都在那里）。

例如：对于名为 dir_1 的目录中的 prog.py

```
 python prog.py          file.txt     :::: works OK

 python prog.py ../dir_1/file.txt     :::: Fails

 >pwd
  ......../dir_1 
```

我不断收到“没有这样的文件或目录”错误。我让 Python 打印出它正在寻找的文件，并且一切正常（但是它已经将 ../ 等变成了绝对路径名）。

我有一种感觉，某处可能已经损坏了。有任何想法吗？

拉斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T03:49:47.180

os.path.exists() 不检查您作为参数传递的路径是否存在？您是否正在尝试查看文件是否存在？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T03:42:05.267

您需要将这些相对引用解析为正确的扩展路径。

```
import os

relative = "../"
print os.path.abspath(relative)
# /Users/jdi 
```

它可以处理当前目录中的文件，因为它不需要解决任何问题。但是需要扩展shell路径。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-20T16:51:24.347

据我了解，Python 不理解像“波浪号”这样的 Unix 快捷方式：

```
~/Downloads 
```

不起作用但这会：

```
/home/Castro/Downloads 
```

这能解决您的问题吗？

# c# - 是否可以使用 Mono AOT Compiled (Native)c# Executable 和具有未实现 Mono 方法的 C# Dll(CIL)

> ID：10646390
> 
> 赞同：2
> 
> 时间：2012-05-18T03:37:21.187
> 
> 标签：c#, .net, mono, aot

我有一个可以使用 Mono c# 编译器编译的主要 C# 可执行文件，但 EXE 使用的 DLL 使用 P/Invoke 和其他不支持的单声道方法，因此我无法将此 DLL 编译为 Mono。有什么方法可以将这些 DLL 与提前编译的 Mono Executable 一起使用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T03:39:41.170

您的问题有点含糊，因为您似乎将 AOT 和 P/Invoke 混为一谈。AOT 不会调用和缓存 P/Invoke 调用的结果，实际上它们之间没有任何关系。

AOT 基本上为 ILDASM .NET 字节码生成本机代码。它与 P/Invoke 调用无关。P/Invoke 是一个运行时 .NET 函数，它从本机 DLL 调用该函数。

与您的帖子相反，Mono 完全支持 P/Invoke。您的问题与 Mono 无关，因此 Mono AOT 无法解决您的问题。您的问题是，您在 Mono 下运行应用程序的平台不支持 P/Invoke'd 库。没有人可以在这里帮助您；您将需要为新平台重新实现本机功能或找到托管替代方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T10:58:01.597

是的，可以 AOT 编译主可执行文件并仍然访问非 AOT 编译的库。

但是 AOT 并不是一种混淆机制，特别是您仍然需要原始的 main 可执行文件，否则您的程序将无法运行。您想要 AOT 编译可执行文件/库的唯一原因是在一些非常特定的场景中让它更快一点。

如果您想混淆，请查看[mkbundle](http://www.mono-project.com/Guide%3aRunning_Mono_Applications#Bundles)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T06:57:55.863

Mono 支持 pinvoke（如果没有，它几乎没用）。AOT 编译的代码仍然可以调用 pinvoke 方法。您将看到的问题将来自您的目标平台可能不支持的非托管 C 库（linux？mac？solaris？）

你在这里有三件事：

*   [奥特](http://www.mono-project.com/AOT)
*   [调用](http://www.mono-project.com/Interop_with_Native_Libraries)
*   .Net 唯一库

前两个在上面的链接中得到了充分的解释，PInvoke 是高级 .Net/Mono 编程的核心，并且得到了很好的支持。AOT 更常用于[Android](http://xamarin.com/monoforandroid)或[iPhone](http://xamarin.com/monotouch)目标

最后一点，您拥有的库仅在 .Net 下的 windows 上可用，通常涉及 Mono 未实现的核心框架方法（您要调用什么？）或者是 windows 系统调用的包装器（通常在 kernel32.dll ) 在 linux 或其他平台上不存在。

您可能还会发现，即使您需要的程序集似乎在单声道上运行，原始作者可能没有注意使用可移植目录分隔符之类的事情，并且一直假定为 Windows 平台。

我的建议是在你的程序上运行一个新的[MoMa](http://www.mono-project.com/MoMA)副本，看看它说了什么。

# ruby-on-rails-3 - jquery 函数似乎不起作用

> ID：10646397
> 
> 赞同：1
> 
> 时间：2012-05-18T03:38:09.703
> 
> 标签：ruby-on-rails-3, jquery

所以我有我的 Rails 3.1 应用程序，我使用 ajax 来处理登录和注销。由于我有一些代码的重复（附加 Flash 通知，更新 div），我将代码移动到一个函数中，并从我的其他方法中调用该函数。如果我将代码从函数中取出并将其放入方法中，它工作正常，但在我将代码移入函数后，它不再做任何事情。

data.login 看起来像 :json => ( :login => true)

```
$(document).ready(function() {

  function setNotice(data) {
    var $flash = $('<div class="alert alert-success"><a class="close" data-dismiss="alert" href="#">x</a>'" + data.data.message + "'</div>');
     $('#account').html( 
      if (data.login) { 
        data.email 
      } else {
        "Account"
      });
     $('.alert').alert('close');
     $('.row').prepend($flash);
  }

  $('form#sign_in').bind('ajax:success', function(e, data, status, xhr) {
    console.log(data);
    if(data.success) {
      $('#user_login_box').html(data.content);
      setNotice(data)
    } else {
      $('#status').html(data.data.message);
    }
  });

  $('.logout').bind('click', function(e, data, status, xhr) {
   setNotice(data)
  });

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T03:44:36.073

设置时`$.html`，需要使用匿名函数，`return`结果：

```
$('#account').html(function(){
  return data.login ? data.email : "Account" ;
}); 
```

您的`$flash`行未正确连接：

```
var $flash = $('<div class="alert alert-success"><a class="close" data-dismiss="alert" href="#">x</a>' + data.data.message + '</div>'); 
```

或重写：

```
var $flash = $("<div>",{
  'class': 'alert alert-success',
   'html': data.data.message
});

var $link  = $("<a>",{
   'html': 'x',
  'class': 'close',
   'href': '#'
}).data("dismiss","alert").prependTo( $flash ); 
```

###来自[聊天室](https://chat.stackoverflow.com/rooms/11406/discussion-between-mike-and-jonathan-sampson)

我们还确定注销按钮不起作用：

```
$('.logout').bind('click', function(e, data, status, xhr) {
   setNotice(data);
}); 
```

这是可用于单击事件处理程序的混淆参数的结果。解决方案是更改 click 事件以触发异步请求以注销用户：

```
$(".logout").on("click", function(e){
  e.preventDefault();
  $.post("/logout", {_method:"delete"}, function(data){
    setNotice(data);
  });
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T03:45:45.003

以下行似乎有错误..

`var $flash = $('<div class="alert alert-success"> <a class="close" data-dismiss="alert" href="#">x</a>'" + data.data.message + "'</div>');`

你能用这个替换上面的行，如果它得到解决，请告诉我们..

`var $flash = $('<div class="alert alert-success"><a class="close" data-dismiss="alert" href="#">x</a>' + data.data.message + '</div>');`

你能确保所有的引号等都正确关闭吗？

# c# - 填充数据源，列表视图绑定但显示 EmptyDataTemplate

> ID：10646398
> 
> 赞同：0
> 
> 时间：2012-05-18T03:38:31.240
> 
> 标签：c#, asp.net, listview, data-binding

我在使用 C# asp.net listview 时遇到了这个奇怪的问题，我无法确定确切的原因和问题。这是场景

我有一个使用 AutoCompleteExtender 的搜索文本框。在 PageLoad() 中，列表视图将填充从 DataTable 中提取的一堆数据。当有人在文本框中输入内容时，从 web 服务获取结果，将结果填充到 DataTable 中，listview 将绑定到 DataTable。

一切正常 - listview 绑定正常，DataPager 最初工作正常。在列表视图的第一页，如果用户输入搜索，列表视图将绑定并显示新结果。

但是，当我在第二页或更多时，listview 绑定但显示 EmptyDataTemplate。我检查了 DataTable 并确定它在 listview.DataBind 之前填充了新数据。只有当我离开列表视图的第 1 页时才会出现问题。

ASPX

```
<asp:ListView ID="productList" runat="server" onitemcommand="productList_ItemCommand" DataKeyNames="PrimaryID">

             <LayoutTemplate>
          <table>
            <tr runat="server">
              <th runat="server">Actions</th>
              <th runat="server">PrimaryID</th>
               <th runat="server">Product</th>
            <th runat="server">Description</th>
            </tr>
            <tr runat="server" id="itemPlaceholder" />
          </table>
        <asp:DataPager runat="server" ID="productDataPager" PageSize="20" PagedControlID="productList" QueryStringField="pageNumber">
            <Fields>
               <asp:NextPreviousPagerField ButtonType="Image" ShowFirstPageButton="true" ShowNextPageButton="false" ShowPreviousPageButton="false" FirstPageText="|&lt;&lt; " />
                <asp:NumericPagerField ButtonCount="10" />
                <asp:NextPreviousPagerField ButtonType="Image" ShowLastPageButton="true" ShowNextPageButton="false" ShowPreviousPageButton="false" LastPageText=" &gt;&gt;|" />

            </Fields>
          </asp:DataPager>     
       </LayoutTemplate>

         <ItemTemplate>
          <tr id="Tr1" class="even" runat="server">
            <td>
              <asp:LinkButton ID="EditButton" runat="Server" Text="Edit" CommandName="Edit_product"/>
            </td>

            <td">
              <asp:Label ID="primarylbl" runat="Server" Text='<%#Bind("PrimaryID") %>' />
            </td>
            <td>
              <asp:Label ID="productlbl" runat="Server" Text='<%#Bind("Product") %>' />
            </td>
             <td>
              <asp:Label ID="descriptionlbl" runat="Server" Text='<%#Bind("Description") %>' />            </td>
            </tr>
        </ItemTemplate>
       <AlternatingItemTemplate>
        <tr id="Tr1" class="odd" runat="server">
            <td>
              <asp:LinkButton ID="EditButton" runat="Server" Text="Edit" CommandName="Edit_product"/>
            </td>

            <td>
              <asp:Label ID="primarylbl" runat="Server" Text='<%#Bind("PrimaryID") %>' />
            </td>
            <td>
              <asp:Label ID="productlbl" runat="Server" Text='<%#Bind("Product") %>' />
            </td>
             <td>
              <asp:Label ID="descriptionlbl" runat="Server" Text='<%#Bind("Description")  %>' />
            </td>
            </tr>

       </AlternatingItemTemplate>

         <EmptyDataTemplate>
       No Records Found
       </EmptyDataTemplate>
           </asp:ListView> 
```

代码隐藏

```
protected void Page_Load(object sender, EventArgs e)
        {
            if (!IsPostBack)
            {
                string productkey = "0";
                getWeb(productkey); //call WebService to get all Products

             }

        }

   private void createTable(Products[] product)
        {

            DataTable productTable = new DataTable();
            productTable.Columns.Add(new DataColumn("PrimaryID", typeof(string)));
            prouctTable.Columns.Add(new DataColumn("Product", typeof(string)));
            productTable.Columns.Add(new DataColumn("Description", typeof(string)));

            for (int i = 0; i < product.Length; i++)
            {

                DataRow dr = productTable.NewRow();
                dr["PrimaryID"] = product[i].PrimaryID.ToString();
                dr["Product"] = product[i].Product.ToString();
                dr["Description"] product[i].Description.ToString();

                productTable.Rows.Add(dr);
                productTable.AcceptChanges();
            }

            bindtoList(productTable);

 protected void bindtoList(DataTable prodTab)
        {
            if (productList.DataSource == null)
            {
                productList.DataSource = prodTab;
                productList.DataBind();

                Updatepanel1.Update();
            }
            else
            {
                productList.DataSource = null;
                productList.DataSource = proTab;
                productList.DataBind();
            }

            if (prodTab.Rows.Count > 20)
            {
                ((DataPager)productList.FindControl("productDataPager")).Visible = true;
            }
            else
            {

                if (((DataPager)productList.FindControl("productDataPager")) != null && ((DataPager)productList.FindControl("productDataPager")).Visible == true)
                {
                    ((DataPager)productList.FindControl("productDataPager")).Visible = false;
                }
            }

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T11:02:08.410

我认为 getWeb(productkey); 应该在“if(!PostBack)”之外调用，因为更改页面会创建回发（不是新的 Get），因此您的表将为空（或者至少这是它在网格中的工作方式）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T11:42:03.723

我找到了一种解决方法，也许是一个愚蠢的解决方法，因为它并不能真正解决问题的真正原因。

这是解决方法：

由于列表视图仅在现有列表位于 PagerNumber=1 时才显示搜索结果，因此我使用 DataPager.SetPageProperties(0, DataPager.PageSize, true) 重置了 DataPager。那行得通！

我仍然很困惑为什么我一开始就有这个问题......

无论如何，谢谢大家的帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T09:13:52.520

我认为你需要`QueryStringField="pageNumber"`从`DataPager`.

问题是当您从第 1 页搜索任何内容时。x 如果结果少于 x 页，则列表视图显示空数据模板。

但是，如果结果有 x 或更多页，则列表视图会显示包含在页号中的结果。X。

并且当您的搜索结果 x 或更多页面时，如果您更改包含列表视图的新结果中的任何页面，则列表视图的数据源将更改为初始数据源。

如果您删除该`QueryStringField="pageNumber"`部分，问题将得到解决。

**编辑**
将此用作您的`<LayoutTemplate>`

```
<LayoutTemplate>
          <table>
            <tr runat="server">
              <th runat="server">Actions</th>
              <th runat="server">PrimaryID</th>
               <th runat="server">Product</th>
            <th runat="server">Description</th>
            </tr>
                                <tr ID="itemPlaceholder" runat="server">
                                </tr>
                            </table>
                        </td>
                    </tr>
                    <tr runat="server">
                        <td runat="server">
                            <asp:DataPager ID="DataPager1" runat="server" pagesize="20">
                                <Fields>
               <asp:NextPreviousPagerField ButtonType="Image" ShowFirstPageButton="true" ShowNextPageButton="false" ShowPreviousPageButton="false" FirstPageText="|&lt;&lt; " />
                <asp:NumericPagerField ButtonCount="10" />
                <asp:NextPreviousPagerField ButtonType="Image" ShowLastPageButton="true" ShowNextPageButton="false" ShowPreviousPageButton="false" LastPageText=" &gt;&gt;|" />

            </Fields>
                            </asp:DataPager>
                        </td>
                    </tr>
                </table>
            </LayoutTemplate> 
```

# assembly - ARM 汇编 - 基本中断处理

> ID：10646399
> 
> 赞同：7
> 
> 时间：2012-05-18T03:38:34.073
> 
> 标签：assembly, embedded, arm

我目前正在处理 lpc2378 上的一些 ARM 汇编程序，但是我编写了一个循环来控制炉子的温度；我相信我需要实现某种中断处理来完成我的项目。

当应用程序运行时，它进入一个循环，等待 Button_1 输入，然后循环继续并经过各个阶段，但无法等待 Button_2 输入以使应用程序运行。

所以这里有几个问题，中断处理程序究竟是如何工作的？以及如何将它实现到我的应用程序中。

这是我的 Button_1 代码：

```
;=========================================================================
; Wait for BUT1 to be pressed
;=========================================================================
WaitBUT1
  STMFD r13!,{r0,r5,r14}   ; Push r0, r5 and LR

WaitForBUT1Pressed
    ldr r0, = IO0PIN            ; Address of FIO0PIN register 
    ldr r1, [r0]                ; Read FIO0PIN in to r1
    ands r1, r1, # B1_MASK      ; Mask out BUT1
    beq BUT1Pressed             ; Exit LED toggle loop if button is pressed
    B WaitForBUT1Pressed
BUT1Pressed

  LDMFD r13!,{r0,r5,r14}   ; Pop r0, r5 and LR
  mov pc, r14              ; Put link register back into PC 
```

和我的 Button_2 代码：

```
;=========================================================================
; Wait for BUT2 to be pressed
;=========================================================================
WaitBUT2
  STMFD r13!,{r0,r5,r14}   ; Push r0, r5 and LR

WaitForBUT2Pressed
    ldr r0, = IO0PIN            ; Address of FIO0PIN register 
    ldr r1, [r0]                ; Read FIO0PIN in to r1
    ands r1, r1, # B2_MASK      ; Mask out BUT1
    beq BUT2Pressed             ; Exit LED toggle loop if button is pressed
    B WaitForBUT2Pressed
BUT2Pressed

  LDMFD r13!,{r0,r5,r14}   ; Pop r0, r5 and LR
  mov pc, r14              ; Put link register back into PC 
```

还有我的炉子控制回路：

```
LoopStart

   BL WaitBUT1 ; wait until button 1 is pressed
   BL heaterOn ; turn heater on
   BL systemLedOn ; turn system LED on
   BL readTemp ; Check ADC for temp
   BL checkTemp ; Count down, check ADC for temp
   CMP r3, #5 ; Compare timer with delay
   BGT errorVal
   SUBS r4, r2, r7  ;Performs r7 = r4 - r2 and sets condition register
   BEQ LoopStart ; if equal nothing to do
   BGT overTemp ; r7 < 0 case
   BL errorLedOn
   BL heaterOn
   BL FanOff
   B LoopStart

overTemp
   BL errorLedOn
   BL heaterOff
   BL FanOn
   B LoopStart

   BL WaitBUT2
   BL FanOff
   BL errorLedOff
   BL systemLedOff
   BL heaterOff

       B LoopStart 
```

提前致谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-18T07:03:39.280

如果您还没有它，您需要获取 ARM ARM（ARM 架构参考手册）。过去只有一个，但现在有这么多内核，他们不得不将其拆分为不同的架构。 [http://infocenter.arm.com](http://infocenter.arm.com) 左侧是 ARM 架构，然后是参考手册，然后是 ARMv5，是的，我知道你有一个 ARMv4 (ARM7TDMI)。ARMv5 手册是过去的手册。

它将涵盖异常向量等。

您可能已经知道，在启动时，地址 0x00000000 处的指令被执行。对于中断，调用地址 0x00000018 处的指令。

```
.globl _start
_start:
    b   reset     ;@ 0x00000000 reset
    b   handler   ;@ 0x00000004 undefined instruction
    b   handler   ;@ 0x00000008 software interrupt swi
    b   handler   ;@ 0x0000000C prefetch abort
    b   handler   ;@ 0x00000010 data abort
    b   handler   ;@ 0x00000014 dont know
    b    irq_handler   ;@ 0x00000018 irq
    b   handler   ;@ 0x000000 
```

从 ARM ARM，您还应该看到寄存器被分组，特别是 r13 堆栈指针，在中断模式下有一个单独的堆栈指针。因此，在启动时，当您设置正常堆栈时，您还想为中断堆栈设置一些空间。

```
reset:
;@//mov r0, #(PSR_IRQ_MODE|PSR_FIQ_DIS|PSR_IRQ_DIS)
mov r0,#0xD2
msr cpsr_c, r0
ldr sp, =0xD600C000

;@//mov r0, #(PSR_SVC_MODE|PSR_FIQ_DIS|PSR_IRQ_DIS)
mov r0,#0xD3
msr cpsr_c, r0
ldr sp, =0xD600B000 
```

在某些时候，您需要在 cpsr 中启用中断。您可能会一直等待，直到您启用了任何外围设备（芯片中，内核外部）中的任何中断。

```
;@ SVC MODE, IRQ ENABLED, FIQ DIS
mov r0,#0x53
msr cpsr_c, r0 
```

您需要阅读 lpc 部分的手册以了解如何启用中断，以及如何在中断发生时清除中断。

您需要在中断处理程序中做的第一件事（您分支到地址 0x18 的代码）是保留堆栈上的共享（非存储）寄存器，这样您就不会弄乱它们。如果您在返回被中断的代码时不这样做，则寄存器将发生变化，并且该代码可能无法正常工作。由于您的项目似乎在 ASM 中，因此您可以在应用程序中使用一些寄存器并仅为 isr 保留一些寄存器，而不必设置堆栈。如果要在处理程序中的任何位置使用 bl，则需要将 lr 保存在堆栈中。

在某些时候，您的处理程序需要清除外围设备中的中断，以便在下一次中断之前不会再次触发，为此必须阅读 lpc 手册。是的，当我说 lpc 时，我的意思是 NXP 以前是飞利浦……

最后一件事是，如果你按下 lr，弹出它，如果你按下了其他寄存器，则弹出它们，然后使用这个确切的指令，手臂将返回并将模式切换回被中断的模式（切换到使用那些银行寄存器）。

```
subs pc,lr,#4 
```

请注意，您可能还需要获取特定内核的 TRM（技术参考手册）（在您的情况下为 ARM7TDMI-S），通常使用 ARM 是一个好主意。在信息中心页面上，左侧转到 ARM7 处理器，不是架构下的 ARMv7，而是较低的，它有 ARM11、ARM9、ARM7。

按钮在弹跳时可能会因中断而变得混乱，并在 I/O 引脚上产生许多边沿。查看您的其他帖子，我看不出您需要在哪里打断。除非另有必要，否则您通常应避免中断。他们一般都很乱。当然，有些设计是您无法避免使用的。还有一些事件驱动的设计，你的所有代码都是中断处理程序，应用程序中除了启动代码和无限循环（或某种睡眠）之外什么都没有。

您可以使用中断来消除抖动，例如，如果您设置定时器中断并对中断中的按钮的 I/O 引脚进行采样，您可以避免大量的抖动，但您也有可能错过按钮按下的风险. 仅仅因为按钮 I/O 引脚连续两次被断言为两次中断，而不是两次按下，所以您在某处更改了状态变量，当按钮被释放时，您更改了状态变量。该状态变量的边缘变化对应用程序很感兴趣。当按钮从未按下变为按下时，做一些事情，如果它从按下变为未按下，则不做任何事情，等待它从未按下变为按下为例。

您还可以使用相同的定时器中断来启动或采样 adc。

由于您还没有解决这里也提到的其他问题，所以我不会靠近中断。先弄清楚这个问题，然后再决定是否有需要中断的功能。就像对 adc 的偶数/常规采样一样。

这应该足以让你开始。如果您确实尝试了中断，请勿将它们作为此应用程序的一部分进行尝试，请创建一个完全独立的应用程序，例如 LED 闪光灯。在中断处理程序中更改 LED 的状态，和/或更改处理程序中的全局变量或寄存器，并让前台监视并因此更改 LED。始终将您的问题/学习练习分成单独的部分，解决这些问题，然后将它们粘合在一起，添加一件，测试，添加一件，测试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T09:24:29.010

在这种情况下，似乎不需要中断处理程序，您可以简单地在主循环中轮询按钮 2，而不是使用“等待”功能。将此添加到循环的末尾：

```
ldr r1, [r0]                ; Read FIO0PIN in to r1
ands r1, r1, # B2_MASK      ; Mask out BUT1
beq STOP 
```

其中 STOP 是执行安全关闭熔炉的目标（即不会让它无限期地运行）。

请注意，您的循环包括等待 button1 - 肯定应该在*之前* `LoopStart`？否则，控制循环将在每次迭代时等待按钮按下而不执行任何控制动作——如果最后一个动作是`heaterOn`!

除此之外，注意在 ARM-Cortex 内核之前（LPX2378 是一个 ARM7TDMI-S 内核），ARM 内核只定义了两个中断源 IRQ 和 FIQ，大多数部分在 ARM 内核外部都有一个单独的中断控制器，而这个中断控制器是特定于供应商的。因此，要确定您如何处理例如 GPIO 中断，您需要参考设备的参考手册而不是 ARM 文档。

基于 ARM Cortex-M 的设备正在迅速取代 ARM7 设备，使用这样的设备可能会更好。特别是中断处理更加直接、灵活和高效。请参阅[这篇文章](http://www.eetimes.com/design/embedded/4008823/Migrating-ARM7-code-to-a-Cortex-M3-MCU)，了解 Cortex-M 如何在 ARM7 上进行改进。

# jquery - jQuery动画没有运行

> ID：10646400
> 
> 赞同：1
> 
> 时间：2012-05-18T03:38:34.990
> 
> 标签：jquery, html

这是我的 HTML 页面：

```
<!DOCTYPE html>
<html lang="en">

    <head>

        <title>Example</title>

        <meta charset="utf-8">

        <link rel="stylesheet" type="text/css" href="content/main.css">

        <script src="content/jquery.js" type="text/javascript"></script>
        <script type="text/javascript">
        $("#container").animate({
            'background-position': '1110px 1110px'
        }, 1000, function () {
        });
        </script>

    </head>

    <body>

        <div id="container">

            <p>hello</p>

        </div>

    </body>

</html> 
```

容器应该使用该`div`JavaScript 代码进行动画处理，但在打开页面时没有任何反应。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T03:39:19.090

您的代码在DOM 树完全构建**之前运行。**所以你需要用

```
$(function() { // <--- begin of the wrap

        $("#container").animate({
            'background-position': '1110px 1110px'
        }, 1000, function () {
        });

}); // <---- end of the wrap 
```

[http://api.jquery.com/ready/](http://api.jquery.com/ready/)

# apache - 来自 Cahe 和 %{DOCUMENT_ROOT}%{REQUEST_URI} 的 Mod_rewrite

> ID：10646407
> 
> 赞同：0
> 
> 时间：2012-05-18T03:39:43.353
> 
> 标签：apache, mod-rewrite

晚上，

我正在运行一个文件：

/home/user/Web/sites/gubbinz/

Web 服务器根是 Web/

当我加载网址时：localhost/sites/gubbinz/index.php?request=home.html

我想检查一下是否有文件 ./sites/gubbinz/cache/home.html

我可以使用以下方法使其工作：

```
RewriteCond %{QUERY_STRING}     ^request=(.*)    [NC]
RewriteCond /home/user/Web/sites/gubbinz/cache/home.html -f
RewriteRule ^.+$ cache/%1 [QSA,L] 
```

但不是这样：

```
RewriteCond %{QUERY_STRING}     ^request=(.*)    [NC]
RewriteCond %{DOCUMENT_ROOT}%{REQUEST_URI}cache/home.html -f
RewriteRule ^.+$ cache/%1 [QSA,L] 
```

我更喜欢后者，因为这意味着我可以为 localhost 设置一条规则并进行直播。有谁知道我哪里出错了？

注意我没有 RewriteBase 集。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T18:11:36.220

经过一番摆弄，这是我能想到的最好的跨服务器工作，而不需要多个服务器条件：

```
RewriteCond %{SCRIPT_FILENAME}  ^(.+)\/index.php$                   [NC]
RewriteRule .* - [E=PATH:%1]

RewriteCond %{QUERY_STRING}     ^request=(.*)    [NC]
RewriteCond %{ENV:PATH}/cache/%1.html -f
RewriteRule ^.+$ cache/%1.html [QSA,L]

RewriteCond %{SCRIPT_FILENAME} !-f
RewriteCond %{SCRIPT_FILENAME} !-d
RewriteRule ^.+$ index.php?request=$0 [QSA,L] 
```

第一部分获取请求来自的目录的完整路径，并将其保存为环境变量。index.php 从末尾开始修剪。

第二部分获取包含实际加载的 URL 的内部重定向，检查是否存在 HTML 的缓存版本，如果它确实执行到它的内部重定向。

第三部分采用“搜索引擎友好 URL”并进行内部重定向到 index.php?request={URL}。

简而言之，您加载网址：

[http://domain.com/page/sub-page](http://domain.com/page/sub-page)

第三个条件集将其重定向到：

[http://domain.com/index.php?request=page/sub-page](http://domain.com/index.php?request=page/sub-page)

然后第二组（在第一条规则中设置了 env.var.）查看 ./cache/page/sub-page.html 是否存在于服务器上；如果是，则该页面将显示给浏览器。

注意任何可能发现第三个条件集不是必需的使用的人，您可以只使用两条规则来做到这一点。我使用重定向到 index.php?request=555 作为我的 PHP 处理的一部分。

# akka - Terminated 是否在来自垂死演员的消息之后到达？

> ID：10646413
> 
> 赞同：4
> 
> 时间：2012-05-18T03:40:30.317
> 
> 标签：akka

我有一个演员为一些工作产生临时子演员，父演员将每个演员的信息存储在一个简单的地图中，当孩子报告工作完成（成功或失败）时，我正在清理地图，一切都很好...

工作完成后，子actor向父actor报告，然后使用毒药杀死自己。为了确保我的地图不会因为孩子不报告而包含孤儿，我还对他们进行了死亡观察......

对我来说，死亡守望听起来像是一个单独的服务，因此，消息没有理由尊重来自同一演员的消息排序事情。

是否可以保证从孩子发送到父演员的消息将在 Terminated 之前到达？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-21T06:47:54.640

Actor 做的最后一件事是执行它的`postStop()`生命周期钩子；返回后它不能自行发送任何消息。其终止的系统通知（如 中主管的策略所见`handleChildTerminated(...)`）和`Terminated`DeathWatch 的消息是在之后发送的，即它们发生在最后一个消息发送之后。因此，如果一条消息从某个其他参与者 A 发送，`postStop()`并且该参与者 A 也注册用于接收该`Terminated`消息，那么这些消息将以正确的顺序接收（相同的发送者，相同的接收者 => 排序）。

# solr - 需要关于使用 Map/Reduce 创建 solr 索引的建议

> ID：10646415
> 
> 赞同：1
> 
> 时间：2012-05-18T03:40:40.730
> 
> 标签：solr, amazon-s3, mapreduce, elastic-map-reduce, emr

我对 Map/Reduce 世界很陌生，并试图评估最佳选择，以确定是否可以利用它在 Solr 中创建索引。目前，我正在使用常规爬网来获取数据并直接在 Solr 中对其进行索引。这工作没有任何问题。

但展望未来，我们需要访问 Amazon S3 中的大量数据。目前 S3 中存储了大约 500 万条数据，需要对其进行索引。我正在考虑使用 Amazon Elastic Map/Reduce (EMR) 直接从 S3 访问内容，然后在 Solr 中创建索引。数据结构简单，url（唯一）是S3 key，value是一个XML文件。url 将用作 Solr 中的 doc id，而 XML 数据的相关部分将作为字段存储在 Solr 索引中。

我的问题是 EMR 是否是正确的方法？任务是从 S3 访问数据，从 XML 中提取某些元素，进行一些处理，然后调用 Solr API 来生成索引。在索引数据之前，处理部分需要几个类，可能是命令模式链。这是可以实现的吗？Doo 我需要一个减速器还是可以使用映射器来完成这个过程？如果需要减速器，它的范围是什么？目前，我有一个存储数据的索引。

对此的任何指示将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-22T08:31:59.150

您可以尝试使用 MapReduceIndexer 工具。您可以从 apache-sole 下载它。它是 contrib 模块的一部分。

# bash - 如何用sed用其他语法替换成对的方括号？

> ID：10646418
> 
> 赞同：16
> 
> 时间：2012-05-18T03:40:52.823
> 
> 标签：bash, sed

我想替换文件中的所有方括号对，例如`[some text]`，用`\macro{some text}`，例如：

```
This is some [text].
This [line] has [some more] text. 
```

这变成：

```
This is some \macro{text}.
This \macro{line} has \macro{some more} text. 
```

*   这些对只出现在单独的行上，从不跨越多行。
*   有时一行中可能有不止一对，但它们从不嵌套。
*   如果在一行中单独发现一个括号，而没有一对，则不应更改它。

如何用此代码替换这些括号对？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-05-18T04:59:31.367

花了一点时间，但在这里：

```
sed -i.bkup  's/\[\([^]]*\)\]/\\macro{\1}/g' test.txt 
```

让我们看看我是否可以解释这个正则表达式：

1.  `\[`匹配方括号。由于`[`是一个有效的魔法正则表达式字符，反斜杠意味着匹配文字字符。
2.  这`\(...\)`是一个捕获组。它捕获了我想要的正则表达式的一部分。我可以有许多捕获组，并且`sed`可以将它们引用为`\1`,`\2`等。
3.  捕获组里面`\(...\)`。我有`[^]]*`。
    1.  `[^...]`语法表示任何字符但是。
    2.  表示除右大括号外的`[^]]`任何字符。
    3.  表示前面的`*`零个或多个。这意味着我正在捕获零个或多个不关闭方括号的字符。
4.  表示右方`\]`括号

让我们看看*这是 [some] more [text]这一行*

*   *在上面的 #1 中，我捕获了单词some*前面的第一个开放方括号。但是，它不在捕获组中。这是我要替换的第一个角色。
*   我现在开始一个捕获组。我根据上面的 3.2 和 3.3 进行捕获，从尽可能多的字符中的字母开始，这些字符不是右方`s`括号*。*这意味着我正在匹配`[some`，但仅捕获`some`。
*   在 #4 中，我已经结束了我的捕获组。我已经匹配用于替换目的`[some`，现在我匹配最后一个右方括号。这意味着我正在匹配`[some]`。请注意，正则表达式通常是贪婪的。我将在下面解释为什么这很重要。
*   现在，我可以匹配替换字符串。这要容易得多。是`\\macro(\1)`。`\1`被我的捕获组取代。这`\\`只是一个反斜杠。因此，我将替换`[some]`为`\macro{some}`.

如果我能保证每行都有一组方括号，那会容易得多。然后我可以这样做：

```
sed -i.bkup 's/\[\(.*\)\]/\\macro(\1)/g' 
```

捕获组现在在方括号之间说出任何内容。然而，问题是正则表达式是贪婪的，这意味着我会从`s`in一直匹配`some`到 final `t`in text。下面的“x”显示了捕获组。`[`和`]`显示我匹配的方括号：

```
 this is [some] more [text]
         [xxxxxxxxxxxxxxxx] 
```

This became more complex because I had to match on characters that had special meaning to regular expressions, so we see a lot of backslashing. Plus, I had to account for regular expression greediness, which got the nice looking, non-matching string `[^]]*` to match anything not a closing bracket. Add in the square brackets before and after `\[[^]]*\]`, and don't forget the `\(...\)` capture group: `\[\([^]]*\)\]`And you get one big mess of a regular expression.

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-05-18T04:02:27.760

```
sed -e 's/\[\([^]]*\)\]/\\macro{\1}/g' file.txt 
```

这将查找一个左括号、任意数量的显式非右括号，然后是一个右括号。该组被括号捕获并插入到替换表达式中。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-18T04:01:50.740

使用组

```
sed 's|\[\([^]]*\)\]|\\macro{\1}|g' file 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-18T04:01:48.490

以下表达式匹配模式`[a-z, A-Z and space]`并将其替换为`\macro{<whatever was between the []>}`

```
sed -e 's/\[\([a-zA-Z ]*\)\]/\\macro{\1}/g' 
```

在表达式中，`\( ... \)`匹配组的形式可以稍后在替换中引用为`\1`

# sql-server-2005 - SQL 客户端连接字符串错误

> ID：10646420
> 
> 赞同：0
> 
> 时间：2012-05-18T03:40:53.803
> 
> 标签：sql-server-2005, ado.net, c++-cli, connection-string

我是 SQLClient 的新手，在 VS2008 中工作并尝试连接到本地计算机上的 SQL Server 2005 SQL Express 实例。

我一直在尝试引号、大写字母和其他东西的不同组合，但我似乎无法获得联系。

我的代码是

```
using namespace System::Data::SqlClient ;
...
String^ connectionString = "Server=MY-PC\SQLEXPRESS; Database=myDB; Trusted_Connection=True; " ;
SqlConnection^ connection = gcnew SqlConnection(connectionString) ;
connection->Open() ; 
```

其中 MY-PC 是机器名称。

错误是“未找到服务器或无法访问服务器。”

有什么明显的错误吗？

谢谢，梅兰妮

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T03:51:03.613

您需要两个反斜杠，否则它将 \S 视为转义字符。

此外，使用 (local)\SQLEXPRESS 而不是您的计算机名称来解决可能困扰您的任何 DNS 配置问题可能会更简单。

最后，确保您的数据库允许连接。

# virtualization - 无法编辑 KVM 配置文件

> ID：10646426
> 
> 赞同：1
> 
> 时间：2012-05-18T03:43:20.983
> 
> 标签：virtualization, virtual-machine, qemu, kvm, libvirt

我已经在我的 Ubuntu 系统上安装了 KVM。使用`vmbuilder`，我设置了一个 linux VM。当我尝试使用`virsh console vm`命令访问控制台时，出现[错误](http://wiki.libvirt.org/page/Error_%22internal_error_cannot_find_character_device%22_when_trying_to_connect_a_domain%27s_console)。我尝试遵循该解决方案，但似乎无法对配置文件进行任何永久性更改。我尝试手动编辑 xml 配置文件以及使用`virsh edit`命令。但是在我编辑文件并关闭它之后，如果我再次使用重新打开配置文件`virsh edit`，我会在没有任何编辑的情况下取回原始文件。

有人可以告诉我哪里可能出错。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T16:04:57.510

首先，确保您有一个 XML 文件。

然后，确保您没有定义机器。

```
virsh list --all 
```

如果这返回任何机器，请在所有机器上运行它。

```
virsh undefine <machine> 
```

现在你应该有一个清晰的系统。

现在开始为您尝试设置的机器编辑 xml 文件。确保它具有 tty 的定义，以便您稍后可以连接到控制台。设备下应该有一个控制台或串行部分。具体不记得了。

xml文件准备好后，就可以定义了。

```
virsh define <path_to_xml> 
```

它所做的是将 xml 放入 virsh 中，所以现在它是实际用于机器的副本，而不是磁盘上的 xml 文件。这意味着对该文件的任何修改都不会反映在 virsh 中。您仍然可以修改 xml，但现在为了这样做，您需要取消定义并再次定义它或使用。

您可以列出机器并使用这些命令检查特定机器的配置（机器的名称是 xml 文件中定义的名称）。

```
virsh list --all
virsh edit <machine> 
```

现在启动机器

```
virsh start <machine> 
```

它应该说机器已经启动，您应该能够使用控制台连接到机器

```
virsh console <machine> 
```

前面的两个命令可以写成一个命令，它会让你立即进入控制台。

```
virsh start <machine> --console 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-17T14:02:38.020

取消定义 XML 时应该小心。

undefine 之前的第一步是复制实际的 xml。

否则你会发现 $> virsh undefine file.xml 从 virsh 列表中删除虚拟机并删除实际的 xml 文件。

制作一份副本并按照为 origamicoder 定义的程序进行操作。

# django - RESTful、用户身份验证和 Django-tastypie

> ID：10646427
> 
> 赞同：8
> 
> 时间：2012-05-18T03:43:23.027
> 
> 标签：django, authentication, rest, tastypie

为初学者的问题道歉。

对于将 RESTful 服务与不同用户结合使用的一般方法，我有点困惑。特别是，我主要关心的是开发一个只有我会在我编写的各种应用程序中使用的 API，即 Web 应用程序，以及可能会访问相同数据的一些移动应用程序。

(1) 由 django-tastypie 之类的东西生成的 rest API 是否适合（甚至是最佳实践）非公开使用——即，当我只想通过我的应用程序授予对这些数据的访问权限时？

(2) 在创建对 Restful API 的登录访问时，我是在为我的 web 应用程序的所有用户创建登录名——还是为*我自己*和我的 web 应用程序创建登录名？我的 webapp 的用户帐户是否应该被视为与访问 Restful API 的帐户不同？

基本上，我想使用 Django 和 django-tastypie 创建一个应用程序，允许用户登录、创建和查看对象、订阅用户并查看他们的对象。我想将 Tastypie API 用于我自己的 javascript 用途，以便在我的视图中轻松创建序列化和更新相关数据。这些用户帐户在这张图片中的位置是什么？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T05:40:22.277

如果我理解正确，您在这里处理两个单独的身份验证问题：(A) 访问 API - 仅限您的网络/移动应用程序 (B) 通过 API 访问用户数据 - 对于通过您的网络/移动应用程序的用户

对于 (A)，您可以只使用密钥进行身份验证。因此，您的 Web 或移动前端将在每个 API 请求中发送该密钥，这将保证您仅接收来自您授权的客户端的请求。

如果您想为不同的应用程序使用不同的密钥，您可以创建一个简单的 django 模型来跟踪它们，并根据需要添加新密钥或撤销它们。

如果您对所有事情都使用 SSL，那么您应该可以避免嗅探攻击以发现您的密钥。我认为这里最薄弱的一点是有人可能会对您的移动应用程序进行逆向工程以找到密钥，因为您必须将密钥存储在应用程序中。

对于 (B)，使用 django 身份验证系统。sweetpie Basic 或 ApiKey [Authenticators](http://django-tastypie.readthedocs.org/en/latest/authentication_authorization.html#authentication-options)应该允许您通过 API 登录用户，并根据他们的权限访问或创建数据。我想这就是你在第二个问题中提出的问题？

如果您使用会话，我认为您不能对 (A) 和 (B) 使用相同的身份验证模型，因为您不能同时拥有两个活动会话。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-13T15:22:20.857

我是**Django**和**DRF**的新手，我可以使用一些帮助。我刚刚创建了一个 Note 应用程序，我正在考虑在我的项目中是否需要用户/作者/客户的第二个应用程序。我只希望用户能够登录，创建自己的笔记，并且笔记应该有一个（或多个）作者，以便我可以过滤用户数据。有帮助吗？

PS：我也是初学者，有需要可以联系。

# maven - 在 cobertura 插件中运行自定义目标

> ID：10646428
> 
> 赞同：1
> 
> 时间：2012-05-18T03:43:24.120
> 
> 标签：maven, plugins, customization, cobertura

当我运行 command 时，我想在检测和测试之间做一些事情`mvn cobertura:cobertura`。

这个命令中的目标'cobertura'最初取决于'instrument'，我想要的是在这个'instrument'过程之后做某事然后运行测试我的想法是将我的要求抽象成一个maven插件，称为'my-plugin'有没有办法让它在两个 cobertura 目标（仪器，测试）之间运行

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T09:18:00.023

您需要定义 cobertura 插件的两个执行，可以如下实现：

```
 <plugin>
    <groupId>...</groupId>
    <artifactId>..</artifactId>
    <version>...</version>
    <executions>
      <execution>
        <id>instrument</id>
        <goals><goal>instrument</goal></goals>
        <phase>process-test-classes</phase>
      </execution>
      <execution>
        <id>test</id>
        <goals><goal>cobertura</goal></goals>
        <phase>test</phase>
      </execution>
    </executions>
  </plugin> 
```

# mysql - mysql存储过程 - 验证输入xml

> ID：10646431
> 
> 赞同：1
> 
> 时间：2012-05-18T03:43:37.877
> 
> 标签：mysql, xml, stored-procedures

我有一个 mysql 5.1 存储过程，它接受 TEXT 输入，它应该包含一个 XML。

我可以成功解析 XML 并完成所需的一切。现在我正在处理错误处理部分，我需要知道如何确保输入 XML 格式正确且有效？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T04:20:51.930

我不知道 MySQL 的 XML 支持中有什么说“这是格式良好的 XML”，但你可以伪造它。MySQL有一个[`ExtractValue`](http://dev.mysql.com/doc/refman/5.5/en/xml-functions.html#function_extractvalue)功能：

> `ExtractValue()`接受两个字符串参数，一个 XML 标记片段**`xml_frag`**和一个 XPath 表达式**`xpath_expr`**（也称为***定位器***）；它返回第一个文本节点的文本 (CDATA)，该文本节点是与 XPath 表达式匹配的元素的子元素。

但是您也可以使用它来检查 XML，因为：

> 如果没有为表达式找到匹配的文本节点（包括隐含的`/text()`）——无论出于何种原因，只要**`xpath_expr`**是有效的，并且**`xml_frag`**由正确嵌套和关闭的元素组成——返回一个空字符串。
> [...]
> `NULL`如果**`xml_frag`**包含未正确嵌套或关闭的元素，则返回，并生成警告...

因此，如果您`ExtractValue`提交任何有效的 XPath 表达式和任何有效的 XML 片段，那么您将获得非 NULL 结果，但如果您使用值 XPath 和无效 XML，您将获得 NULL 返回。因此，您需要做的就是构建一个 INSERT 和 UPDATE 触发器，用于`ExtractValue`检查 XML 并[`signal`](http://dev.mysql.com/doc/refman/5.5/en/signal.html)在获得 NULL 时引发异常：

```
select ExtractValue(new.your_xml_column, '/*') into @xml_check;
if @xml_check is null then
    signal sqlstate '45000';
end if; 
```

# android - 列表选择器更改我的列表条目高度大小

> ID：10646433
> 
> 赞同：2
> 
> 时间：2012-05-18T03:43:52.937
> 
> 标签：android, listview

我有一个带有一些 xml 作为布局文件的 listView。在这个文件中，我有一个线性布局作为根，这个线性布局有一个 60dp 的高度大小。

对于这个线性布局的背景，我使用了一个列表选择器 - 当点击列表中的这个特定条目时，背景将在按下时变为另一种颜色（通过 png - 渐变色）。

问题是，当这样使用时，我的 listView 会给我不同的布局高度大小。假设我的清单有 7 个条目，其中一个条目（据我所知是随机选择的）比其他条目高一点。

如果我放弃列表选择器并只使用 1 个背景 png 文件，我会得到所有的输入，但当按下输入时我会失去颜色变化。

对此有任何想法吗？这是列表输入布局的代码。

```
 <?xml version="1.0" encoding="utf-8"?>
     <!-- The selector for this LinearLayout (@drawable/list_selector) -->
     <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
     android:layout_width="fill_parent"
     android:id="@+id/layoutBG"
     android:layout_height="wrap_content"

     android:background="@drawable/list_selector"  

     android:paddingTop="1dp"
     android:paddingBottom="1dp"
     android:orientation="horizontal" >

     <LinearLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="30dp"
        android:layout_height="fill_parent"
        android:orientation="horizontal"
        android:shadowColor="@color/white"
        android:shadowDx="60"
        android:shadowRadius="60" >

        <TextView
            android:id="@+id/rawId"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="top"
            android:paddingLeft="3px"
            android:shadowColor="@color/black"
            android:shadowDx="2"
            android:shadowRadius="2"
            android:textColor="@color/white"
            android:textSize="18dip" />

      </LinearLayout>

      <LinearLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="100dp"
        android:layout_height="fill_parent"
        android:orientation="horizontal"
        android:shadowColor="@color/white"
        android:shadowDx="60"
        android:shadowRadius="60" >

        <LinearLayout
            xmlns:android="http://schemas.android.com/apk/res/android"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:orientation="vertical"
            android:shadowColor="@color/white"
            android:shadowDx="60"
            android:shadowRadius="60" >

            <TextView
                android:id="@+id/Info"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="top"
                android:paddingLeft="3px"
                android:shadowColor="@color/black"
                android:shadowDx="2"
                android:shadowRadius="2"
                android:text="@string/info"
                android:textColor="@color/Green2"
                android:textSize="15dip" />

            <TextView
                android:id="@+id/dateDisp"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="top"
                android:paddingLeft="3px"
                android:shadowColor="@color/black"
                android:shadowDx="2"
                android:shadowRadius="2"
                android:text="Date"
                android:textColor="@color/white"
                android:textSize="15dip" />

            <TextView
                android:id="@+id/day"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="top"
                android:paddingLeft="3px"
                android:shadowColor="@color/black"
                android:shadowDx="2"
                android:shadowRadius="2"
                android:text="Day"
                android:textColor="@color/white"
                android:textSize="15dip" />
        </LinearLayout>
      </LinearLayout>

      <LinearLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="75dip"
        android:layout_height="wrap_content"
        android:orientation="vertical"
        android:shadowColor="@color/white"
        android:shadowDx="60"
        android:shadowRadius="60" >

        <TextView
            android:id="@+id/timestarted"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="top"
            android:paddingLeft="3px"
            android:shadowColor="@color/black"
            android:shadowDx="2"
            android:shadowRadius="2"
            android:text="@string/timeStarted"
            android:textColor="@color/Green2"
            android:textSize="15dip" />

        <TextView
            android:id="@+id/start"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="top"
            android:paddingLeft="3px"
            android:shadowColor="@color/black"
            android:shadowDx="2"
            android:shadowRadius="2"
            android:textColor="@color/white"
            android:textSize="15dip" />

        <TextView
            android:id="@+id/finish"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="top"
            android:paddingLeft="3px"
            android:shadowColor="@color/black"
            android:shadowDx="2"
            android:shadowRadius="2"
            android:textColor="@color/white"
            android:textSize="15dip" />
      </LinearLayout>

      <LinearLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:orientation="horizontal"
        android:shadowColor="@color/white"
        android:shadowDx="60"
        android:shadowRadius="60" >

        <LinearLayout
            xmlns:android="http://schemas.android.com/apk/res/android"
            android:layout_width="wrap_content"
            android:layout_height="fill_parent"
            android:orientation="vertical"
            android:shadowColor="@color/white"
            android:shadowDx="60"
            android:shadowRadius="60" >

            <TextView
                android:id="@+id/hourMin"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="top"
                android:gravity="right"
                android:paddingLeft="5px"
                android:shadowColor="@color/black"
                android:shadowDx="2"
                android:shadowRadius="2"
                android:text="@string/duration"
                android:textColor="@color/Green2"
                android:textSize="15dip" />

            <TextView
                android:id="@+id/shiftDisp"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="top"
                android:gravity="right"
                android:paddingLeft="5px"
                android:shadowColor="@color/black"
                android:shadowDx="2"
                android:shadowRadius="2"
                android:text="ShiftDisp"
                android:textColor="@color/white"
                android:textSize="15dip" />
         </LinearLayout>
      </LinearLayout>

   </LinearLayout>

    The list selector xml:

    <?xml version="1.0" encoding="utf-8"?>
   <selector xmlns:android="http://schemas.android.com/apk/res/android"   

       android:constantSize="true" android:dither="true">

    <item android:drawable="@drawable/li2" android:state_first="true"/>
    <item android:drawable="@drawable/liner2" android:state_pressed="true"/>
    <item android:drawable="@drawable/li2" android:state_pressed="false"/>

   </selector> 
```

![主要清单](../Images/89b6d306f805b5d6ee4638eb5ae36d92.png "工具提示")

![入口BG](../Images/1a9a8ead0a324b18f4b0398070c8dc3c.png) ![在此处输入图像描述](../Images/d82f1ed3968e627c6bb3873d3f46af43.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T14:53:44.353

我自己找到了答案 - 我已经从列表选择器中删除了这个 android:constantSize="true" ，现在我得到了我应该得到的相同大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T03:46:28.677

您的选择器图像可能是问题所在。仔细查看它们，看看它们是否具有相同的高度、相同的 padding 和相同的内容区域。那应该可以解决您的问题。

# asp.net-mvc-3 - ObjectDisposed 异常：我在 MVC 3 EF 深度加载中做错了什么？

> ID：10646434
> 
> 赞同：1
> 
> 时间：2012-05-18T03:43:56.103
> 
> 标签：asp.net-mvc-3, entity-framework-4, linq-to-entities, entity-framework-4.1

我正在尝试深度加载 EF 对象并将其保存在缓存中一段时间​​。就我而言，我有一个对象（比如用户），然后是一个内部书籍列表设置为虚拟集合

```
public virtual ICollection<Books> ListOfBooks { get; set; } 
```

书籍和用户之间存在外键关系的地方（一切正常）

我正在尝试在静态中心类中深度加载它

```
public static List<User> LoadAllBooksAndUsers() {

  using (MyDB dc = new MyDB())
  {

      dc.Users.Include("ListOfBooks");
      List<User> a = dc.Users.Where(l => l.Status == 1).ToList();

      return a;             
   }
} 
```

在我的调用代码中，我有这样的东西：

```
var evx = DB.LoadAllBooksAndUsers();
var q = evx.Single(m=>m.name==name); 
```

在调试器或 q.ListOfBooks 中检查 evx 表明 listOfBooks 有一个对象处理异常并且它为空。

这是随机的 - 它似乎偶尔会起作用，我不知道在什么条件下。

我对正在发生的事情一无所知 - 我的理解是使用 .Include() 然后枚举它会加载所有相关的外键对象，那么为什么该方法不将所有书籍深度加载到用户中？我错过了什么？

（我想深度加载这个对象并缓存一段时间，因为其中的数据经常使用）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T05:06:41.580

你用`Include`错了。您需要将它与查询构建一起使用，而不是本身：

```
List<User> a = dc.Users.Include("ListOfBooks")
                       .Where(l => l.Status == 1)                           
                       .ToList(); 
```

您可以[在这篇文章](http://blogs.msdn.com/b/adonet/archive/2011/01/31/using-dbcontext-in-ef-feature-ctp5-part-6-loading-related-entities.aspx)中找到有关预加载的更多信息。

# javascript - 在 Javascript 中生成 PGP 密钥对，并使用加密的 PGP 私钥对文本进行签名

> ID：10646435
> 
> 赞同：4
> 
> 时间：2012-05-18T03:43:56.720
> 
> 标签：javascript, encryption, cryptography, pgp, openpgp

我正在写一些[需要做电子签名的](https://plus.google.com/103112149634414554669/posts/E38VGATKVZb)东西。

有些用户会像我一样是极客，并且已经拥有自己的 PGP 密钥。大多数人不会，也不想安装或维护它。

作为一种解决方法，我想执行以下操作：

1.  为使用单独的“签名”密码的用户创建一个公钥/私钥对。
2.  当我需要用户签署某些东西时，向用户提供明文以及其中的一些其他信息，例如时间戳和其他引用，并让他们使用我存储的私钥对其进行签名。

基本上有两种方法可以做到这一点（对于没有自己的 PGP 密钥的用户）。

1.  用户通过 SSL 向我提交签名密码。我在服务器端生成私钥对，并在需要签名时临时解锁私钥。我根本不存储密码，我尽快摆脱解锁的私钥。
2.  用户在 Javascript 中生成 pub/priv 密钥。他们将公钥和加密私钥发送给我，并在本地存储中保留一份副本。当他们需要签署某些东西时，我确保他们的本地存储有它（如果没有，则推送），他们使用 JS 在本地解密和签署文本。我从来没有看到他们的签名密码，也没有看到他们解锁的私钥。

无论哪种方式，我还使用服务器的密钥对结果进行签名。但我也需要有一种用户唯一的、不可否认的方式让用户签署文本，并且让他们拥有我维护的 PGP 密钥是最简单的方法。

选项 1 操作起来要简单得多，并且可以很好地满足我的最低需求。

选项 2 更值得信赖，因为除非我颠覆 JS（我仍然可以这样做），否则我自己不能使用他们的私钥。

但是，为了做到这一点，我需要一个 JavaScript 库，它可以

1.  生成一个 pub/priv 密钥对
2.  解密私钥以供使用
3.  使用该私钥签署一段文本

哪些图书馆可以做到这一点？

PS请注意，我不需要*加密*给定的公钥。我需要用户使用他们自己的（加密存储的）密钥进行*签名。*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T06:28:46.317

看看[http://openpgpjs.org](http://openpgpjs.org) - 它应该已经实现了您正在寻找的大部分功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T04:12:57.113

首先，阅读这篇文章： http: [//www.matasano.com/articles/javascript-cryptography/](http://www.matasano.com/articles/javascript-cryptography/)

如果您仍然相信 javascript crypto 是您正在做的事情的好主意，那么：

PGP 相当复杂，您不需要 95% 的功能，我建议您改为考虑使用 Ed25519 进行签名 - javascript 版本可在 [http://www.flownet.com/ron/code/ed25519获得.js](http://www.flownet.com/ron/code/ed25519.js)。这是一个基于椭圆曲线的系统，比 RSA 快得多，具有同等的安全性和更小的密钥。事实上，密钥是如此之小，以至于您可以让用户选择一个“签名密码”，将其提供给 scrypt[1]，并将其用户 ID 作为盐，并将输出用作私钥（您只需要frob 三位使其成为有效的 Ed25519 私钥）。

1.  [https://github.com/cheongwy/node-scrypt-js](https://github.com/cheongwy/node-scrypt-js)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-19T17:30:56.480

我认为你的文章声称错误的事情。例如，它说，没有办法阻止例如 math.RND() 被覆盖 - 但它可以很容易地完成 - 在文件顶部编写带有内联 js 的 html 文件。在该代码中，您冻结每个对象，openpgp.js 取决于。

[对象.freeze()](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/freeze)

所以你可以建立一个安全的环境。的确！使用 ssl 传输 index.html，冻结重要的内容，防止加载其他 js 文件，确保不允许连接到其他服务器等等。

# jquery - jQuery 悬停切换修复

> ID：10646440
> 
> 赞同：4
> 
> 时间：2012-05-18T03:45:34.970
> 
> 标签：jquery

我有一个产品网格，在每个单独的悬停时，都会`div`使用图像/添加到购物车按钮切换。但是，每次我快速将鼠标悬停在项目上时，它们都有些闪烁。

这是一个[演示](http://jsfiddle.net/vJX5g/3/)

有没有更好的 jQuery 方法来切换单个网格项的相应悬停`div`而不使用闪光灯？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T04:11:44.797

只需添加`$.stop()`以防止它排队更多动画：

```
$(".grid li").hoverIntent(
    function(){
        $(".grid-hover", this).stop().delay(500).fadeIn();
    },
    function(){
        $(".grid-hover", this).stop().fadeOut();
    }            
); 
```

要做到完美有点困难，但是我相信在这种情况下，它[`$.hoverIntent()`](https://github.com/briancherne/jquery-hoverIntent)可能是比原生`$.hover()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T03:54:50.523

这似乎更接近于感觉更舒适的 UI 体验：

```
$(document).ready(function() {

    $('.grid li').hover(function(){

        $('.grid-hover').stop();
        $('.grid-hover').fadeOut(500);
        $('.grid-hover', this).fadeIn(500);

    }, function(){

        $('.grid-hover', this).fadeOut(500);

    });

}); 
```

不完美..可以肯定。on hover jquery 事件很难正确处理；尤其是动画。必须仔细遵循事物的逻辑和时间安排。我会玩弄`.stop()`jQuery 函数，它会停止元素上的动画；以及`setTimeout()`JavaScript 函数。

# php - 替换短信模板字符串中的字符串

> ID：10646441
> 
> 赞同：-1
> 
> 时间：2012-05-18T03:45:40.900
> 
> 标签：php, mysql

我在 mysql 中有以下模板字符串，我通过 php 获取。

> $msg = "亲爱的 $contacts-salutation$ $contacts-firstname$ $contacts-lastname$，祝你生日快乐！！最好的问候，团队";

我想用其他 mysql 表中存在的变量替换 $contacts- ***_* _ $ 。**但我不能代替它？

如何替换字符串中的字符串？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T03:57:50.460

尝试使用

${联系人}-dadasdsdasd

# php - 在 highcharts 上有一些栏不是 url 链接

> ID：10646443
> 
> 赞同：2
> 
> 时间：2012-05-18T03:45:55.010
> 
> 标签：php, javascript, highcharts

我有一个像这样的高图： [小提琴演示图](http://jsfiddle.net/gh/get/jquery/1.7.1/highslide-software/highcharts.com/tree/master/samples/highcharts/plotoptions/series-point-events-click-url/) 它是在 PHP 中使用数据在服务器上生成的，但如果数据计数为零（因为没有什么可看的），我不希望它有一个 URL。

如何告诉图表仅禁用这些条上的链接？

```
if($value['category'] > 0){
        $chartActive .= $comma."{y:".$value['category'].", url: '/section/of/site/index.php'}";
    }else{
        $chartActive .= $comma."{y:0, url: javascript:void(0)}";
    } 
```

这将被添加到图表中，如下所示：

```
plotOptions: {
            column: {
                stacking: 'normal',
                dataLabels: {
                    enabled: true,
                    color: (Highcharts.theme && Highcharts.theme.dataLabelsColor) || '#333'
                }
            },
            series: {
                cursor: 'pointer',
                point: {
                    events: {
                        click: function() {
                            location.href = this.options.url;
                        }
                    }
                }
            }
        },
        series: [{
            name: 'Active',
            data: [<?php echo $chartActive; ?>]
        }, 
```

如您所见，url 是在 plotOptions 的系列部分中定义的，因此它始终存在，如果我按照现在的方式进行操作，则链接有效，但转到 mysite.com/undefined

任何意见，将不胜感激。

标记

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T09:14:51.113

您可以在设置 url 之前测试该点是否在 click 事件中具有值。但是，任何空点仍然会有指针光标，我还没有找到解决方法。

```
 series: {
    cursor: 'pointer',
    point: {
        events: {
            click: function() {
// if you've more than one series then you'll have to sum up the value for the stack
                if (this.y != 0) {  
                    location.href = this.options.url;
                }
            }
        }
    }
} 
```

# php - 用php读取word文档

> ID：10646445
> 
> 赞同：7
> 
> 时间：2012-05-18T03:46:02.193
> 
> 标签：php

我现在正在做一个项目，我一直在阅读word文档。

Word 文件内容。

```
This is a test word file in PHP.

Thank you. 
```

PHP 代码。

```
 $myFile = "wordfile.docx";
    $fh = fopen($myFile, 'r');
    $theData = fread($fh, 1000);
    fclose($fh);
    echo $theData; 
```

输出：

```
PK!éQ°Â[Content_Types].xml ¢( ´”MOÂ@†ï&amp;þ‡f¯¦]ð`Œ¡pP<*‰Ïëv
 «Ýì,_ÿÞiI¡(ziÒNß÷}fÚÞ`©‹h•5)ë&‘6Sf’²×ñc|Ë"Âd¢°R¶dƒþåEo
 ¼r€© ¦l‚»ãå´ÀÄ:0TÉ­×"Ð­Ÿp'ä§˜¿îtn¸´&€  q(=X¿÷¹˜!.éñ
 š„ä,º_¿WF¥L8W()ò²Êu <"œ›l.Þ%¤¬Ìqª^Nøp0ÙKPºl­*Õ3Ó
 «¢‘ðáIhbçë3žY9ÓÔwr¼¹F›çJB­/Ýœ·é;é"©+Z(³e?ÈaUþ=ÅÚ÷Ä
 ø7¦Ã<I?Hû<4ÆeÓÉ:bGÛž!ÐN    ùþÛÆmCÇs+ÂÞ_þbÇ¼$§ó4ïœ
 0ñ£¶n…´#€W×îÙ•Í±H:#oÒÎñ¿h{»JuLGÎ êõÐtÄêDZXg÷åFÌ kÈæÕîÿÿPK
 !ÇÂ'¼ß_rel 
```

无论如何可以在 PHP 中阅读 word 文档吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2015-08-07T11:01:50.950

对于 docx 使用此功能

```
function read_docx($filename){

    $striped_content = '';
    $content = '';

    if(!$filename || !file_exists($filename)) return false;

    $zip = zip_open($filename);
    if (!$zip || is_numeric($zip)) return false;

    while ($zip_entry = zip_read($zip)) {

        if (zip_entry_open($zip, $zip_entry) == FALSE) continue;

        if (zip_entry_name($zip_entry) != "word/document.xml") continue;

        $content .= zip_entry_read($zip_entry, zip_entry_filesize($zip_entry));

        zip_entry_close($zip_entry);
    }
    zip_close($zip);      
    $content = str_replace('</w:r></w:p></w:tc><w:tc>', " ", $content);
    $content = str_replace('</w:r></w:p>', "\r\n", $content);
    $striped_content = strip_tags($content);

    return $striped_content;
} 
```

它将从 docx 返回文本

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-06-04T19:40:32.753

“PHPWord 是一个用纯 PHP 编写的库，它提供了一组类来写入和读取不同的文档文件格式。” （PHPOffice，2016）

这个开放的 php 库应该可以解决您的问题。您可以通过 composer 下载或获取它：

[https://github.com/PHPOffice/PHPWord](https://github.com/PHPOffice/PHPWord)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-18T03:59:22.457

“docx”与“doc”不同。Docx 文件基本上[是 zipfile 容器中的 xml 文件（如维基百科所述）](http://en.wikipedia.org/wiki/Office_Open_XML_file_formats)。Doc 文件是二进制 blob。

我知道没有库可以轻松读取 php 中的 docx 文件（尽管[Phpdocx 可以编写它们](http://www.phpdocx.com/)）。但是，由于这些只是 zip 文件和 xml 文件，因此您应该能够将一些东西放在一起使用[`ZipArchive`](http://php.net/manual/en/class.ziparchive.php)来打开 docx 容器和/或或[`DOMDocument`](http://us3.php.net/manual/en/book.dom.php)读取[`SimpleXML`](http://us3.php.net/manual/en/book.simplexml.php)xml文档本身。[`XMLReader`](http://us3.php.net/manual/en/book.xmlreader.php)[`XSLTProcessor`](http://us3.php.net/manual/en/book.xsl.php)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-18T03:48:22.017

Word 文档不像文本文件（它更像 xml / 二进制文件）那样方便地存储，因此您不能只使用 echo 并期望它输出`docx`文件的人类可读部分。

有一个库可以做你想做的事，但它只需要`doc`文件

[多维特](http://code.google.com/p/docvert/source/browse/trunk/web-service.php?r=176)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-11-24T11:02:15.173

以下是与[@suhdir](https://stackoverflow.com/users/3848339/sudhir)的答案类似的功能，但适用于 PHP 8：

```
 function readDocx($filename)
    {

        $zip = new ZipArchive();
        if ($zip->open($filename)) {
            $content = $zip->getFromName("word/document.xml");
            $zip->close();
            $content = str_replace('</w:r></w:p></w:tc><w:tc>', " ", $content);
            $content = str_replace('</w:r></w:p>', "\r\n", $content);

            return strip_tags($content);
        }
        return false;

    } 
```

Zip 函数在 PHP 8 中已被弃用并被 ZipArchive 取代。

# css - CSS中的浮动项目问题

> ID：10646449
> 
> 赞同：0
> 
> 时间：2012-05-18T03:46:36.807
> 
> 标签：css, css-float

我正在努力实现以下目标：

![在此处输入图像描述](../Images/714c7a2218e425eccad65176c84f62e0.png)

到目前为止，我已经能够做到以下几点： ![在此处输入图像描述](../Images/a0ac876f312e9317fe24fc460d71430f.png)

我的问题如下：

1- 我无法让“Inicio”和“Productos”居中。我试过 margin: 0 auto ，但因为没有任何动作而徒劳无功。如果我尝试 margin-left 我可以移动它。我怎样才能“自动”居中呢？

2- 一旦“Inicio”和“Productos”居中。我想与图像对齐。我再次尝试向左浮动图像标签并向右浮动 ul li ，但我得到了一些东西。

有人可以帮我弄清楚该怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T06:47:23.753

如果你想让它看起来像黄色图像，试试这个：
**HTML**

```
<div class="main">
    <p><a href="#">Avuda</a> <a href="#">Acceso</a> <a href="#">Registrarse</a></p>
    <img src="http://m.onkey.org/images/rails-logo.jpg?1314545460" />
    <div class="clear"></div>
    <div class="center"><a href="#">Inicoi</a> <a href="#">Productos</a></div>
</div> 
```

**CSS**

```
div.main {
    background-color: yellow;
    overflow: hidden;
    text-align: center;
}
.clear {
    clear:both;
}
.center {
    float: left;
    margin: 15px 10px 0 25px;
}
img {
    float: left;
    margin-top: -5px;
}
p {
    text-align:right;} 
```

你可以在这里看到结果：http: [//jsfiddle.net/unrbd/](http://jsfiddle.net/unrbd/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T05:25:10.230

嗨，检查一下，我希望这会对您有所帮助：-

**HTML**

```
 <div class="header">

<div class="logo"><img src="http://alansmoneyblog.com/wp-content/uploads/2010/10/google-logo.jpg" /></div>
        <div class="nav">
        <a>Link one</a> <a>Link two</a> <a>Link three</a>
        </div>
        <div class="mid">    
            <a href="#">Inicio</a>
            <a href="#">Productos</a>
        </div>
    </div> 
```

**CSS**

```
.header {
    border:1px solid black;
    overflow:hidden;
}
.logo {
    float:left;
    width:128px;
    height:128px;

}
.nav {
    float:right;
    width:213px;
    height:128px;

}
.mid {
    background:red;
    height:128px;
    text-align:center;
    margin-right:213px;
    margin-left:128px;
    line-height:80px;
} 
```

看演示：- [http://jsfiddle.net/d6dtJ/23/](http://jsfiddle.net/d6dtJ/23/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T06:05:26.730

[这应该做你想做的事](http://jsfiddle.net/sQ63V/3/)，我尽量保持简单。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-18T04:03:11.930

这是您正在寻找的完美解决方案 -

演示 - [http://jsfiddle.net/d6dtJ/25/](http://jsfiddle.net/d6dtJ/25/)

# javascript - Backbone.js：将视图、集合、模型分离到不同的 js 文件中，它们无法相互识别

> ID：10646451
> 
> 赞同：5
> 
> 时间：2012-05-18T03:46:40.720
> 
> 标签：javascript, jquery, backbone.js

我使用 Backbone.js 创建了一个 web 应用程序，所有视图、集合和模型都写入一个 js 文件，它成功了！

现在我想将它们分成不同的 js 文件，就像：

```
<script type="text/javascript" src="js/layermanagemodel.js"></script>       
<script type="text/javascript" src="js/layermanagecollection.js"></script>  
<script type="text/javascript" src="js/layermanageview.js"></script>    
<script type="text/javascript" src="js/boot.js"></script> 
```

并在 jquery 加载中加载模型代码：

```
$(function(){
    //Model
        var manageModel = Backbone.Model.extend({
                default:{
                    'selectedId':'unknow'
                },
                selectLayer:function(uuid){
                     this.set({"selectedId": uuid});
                },
                delLayer:function(){

                }
        }); 
}) 
```

但萤火虫告诉我错误：

```
manageModel is not defined
[Break On This Error]   

model: manageModel 
```

在收集文件中

为什么如果将它们分开到不同的文件中，它们无法相互识别？我该如何解决这个问题？或者什么是正确的加载顺序？谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-18T04:00:00.193

添加函数包装器后：

```
$(function() {
    // ...
}) 
```

您已经引入了新的作用域，并且`var`在这些函数中声明的所有 s 仅在这些函数中可见。您可以通过将它们设为全局（即 的属性`window`）来解决此问题：

```
$(function(){
    window.manageModel = Backbone.Model.extend({
        //...
    });
}); 
```

或者更好的是，引入一个应用程序命名空间：

```
$(function(){
    window.app = window.app || { };
    window.app.manageModel = Backbone.Model.extend({
        //...
    });
}); 
```

然后通过以下方式引用`app`事物`app.manageModel`：

```
$(function(){
    window.app = window.app || { };
    window.app.someCollection = Backbone.Collection.extend({
        model: app.manageModel,
        //...
    });
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-18T06:40:22.223

[您还可以考虑使用Require.js](http://requirejs.org/)使您的 js 文件模块化。工作得非常好，只会在需要时加载视图、模型和集合。如果您的应用程序非常大，建议您这样做。它将阻止您在页面加载时加载所有脚本。一个快速的backbone.js 实现如下：

```
define([
    'jquery',
    'underscore',
    'backbone',
    'models/post'
], function ($, _, Backbone, Post) {
    "use strict";
    var PostsCollection = Backbone.Collection.extend({
        model: Post,
        url: CONFIG.apiUrl + 'posts'
    });
    return PostsCollection;
}); 
```

上面是一个采集模块。您可以看到“模型/帖子”指向另一个模块的位置。jquery、下划线和主干是在我的配置中定义的，所以我只需要传递它们而不是指向它们的实际位置。这是一个简短的介绍，但如果你想分离你的 js 文件，[Require.js](http://requirejs.org/)是一种方式。

# html - CSS：即使鼠标抬起，悬停也不会退出

> ID：10646453
> 
> 赞同：0
> 
> 时间：2012-05-18T03:48:05.353
> 
> 标签：html, css

我的问题是，如果我将鼠标悬停在链接上，背景会按我的意愿改变。但是，当我移动到下一个链接时，它会保持这种状态，如果我移动到最后一个链接，所有链接看起来都像悬停一样。但是，如果我将鼠标从链接上移开，它们都会恢复正常。这就像一个步骤序列。如果链接 1 悬停，则只有链接 1 受到影响。如果链接 2 悬停，则链接 2 上方的任何内容也会悬停，链接 3 也是如此。链接 3 上方的任何内容都将悬停。我该如何解决这个问题，让它单独悬停？任何帮助将不胜感激。谢谢。这是我的 CSS 代码：

```
#profilebarsectiondiv {
    width: 100%;
    background-color: #285059;
    font-family: sans-serif;
    font-weight: bold;
    color: #ffffff;
}

.profilebarlink{
    width: 100%;
    background-color: #dce8ea;
}

.profilebarlink a{
    font-family: sans-serif;
    font-weight: bold;
    font-size: 8;
    text-decoration: none;
    color: #206676;
}

.profilebarlink:hover{
    background-color: #e67e17;
} 
```

还有我的 HTML

```
<div id="profilebarsectiondiv">Dashboard</div>
<div class="profilebarlink"><a href="#">Home</a>
<div class="profilebarlink"><a href="#">Profile</a>
<div class="profilebarlink"><a href="#">Contacts</a> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T03:52:35.563

您需要关闭`<div>`标签

```
<div id="profilebarsectiondiv">Dashboard</div>
<div class="profilebarlink"><a href="#">Home</a></div>
<div class="profilebarlink"><a href="#">Profile</a></div>
<div class="profilebarlink"><a href="#">Contacts</a></div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T04:00:54.030

您需要关闭所有`<div>`标签。你正在申请悬停样式在`<div class="profilebarlink">`. 但这种方法效率不高。

通过代码中的更正和改进检查此[演示。](http://jsfiddle.net/aniketpant/tjyC2/)

## HTML

```
<div id="profilebarsectiondiv">Dashboard</div>
<a href="#" class="profilebarlink">Home</a>
<a href="#" class="profilebarlink">Profile</a>
<a href="#" class="profilebarlink">Contacts</a>​ 
```

## CSS

```
#profilebarsectiondiv {
    background-color: #285059;
    font-family: sans-serif;
    font-weight: bold;
    color: #ffffff;
}

.profilebarlink{
    display: block;
    background-color: #dce8ea;
    font-family: sans-serif;
    font-weight: bold;
    font-size: 8;
    text-decoration: none;
    color: #206676;
}

.profilebarlink:hover{
    background-color: #e67e17;
}​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T03:52:47.370

您正确的 HTML

```
<div id="profilebarsectiondiv">Dashboard</div>
<div class="profilebarlink"><a href="#">Home</a></div>
<div class="profilebarlink"><a href="#">Profile</a></div>
<div class="profilebarlink"><a href="#">Contacts</a></div> 
```

div也需要结束标签

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-18T04:39:44.137

```
<div id="profilebarsectiondiv">Dashboard</div>
<div class="profilebarlink"><a href="#">Home</a></div>
<div class="profilebarlink"><a href="#">Profile</a></div>
<div class="profilebarlink"><a href="#">Contacts</a></div> 
```

兄弟关闭你的 div 标签:)，它肯定会工作

# google-app-engine - 部署到 Google App Engine 时出现错误 404，未找到应用程序错误

> ID：10646461
> 
> 赞同：2
> 
> 时间：2012-05-18T03:50:05.440
> 
> 标签：google-app-engine

我有一个使用 Eclipse 插件的 Java 应用程序。当我尝试上传时，出现错误：

> com.google.appengine.tools.admin.HttpIoException：发布到 URL 时出错：[https](https://appengine.google.com/api/appversion/create?app_id=my_appname&version=1&)
> ://appengine.google.com/api/appversion/create?app_id=my_appname&version=1& 404 Not Found
> 此应用程序不存在（app_id=u 'my_appname'）。

这`my_appname`是我的 Google App Engine 帐户中的应用程序 ID。我已经检查了 的内容`appengine-web.xml`，看起来不错：

```
<?xml version="1.0" encoding="utf-8"?>
<appengine-web-app xmlns="http://appengine.google.com/ns/1.0">
  <application>my_appname</application>
  <version>1</version>
</appengine-web-app> 
```

为什么会出现此错误，如何修复我的应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-09T10:24:17.643

**原因：**当您在“build.properties”文件中更改了应用程序名称但未更新为“appengine-web.xml”文件时，会发生这种情况。

**解决方案：**请手动更改“appengine-web.xml”中的应用程序名称。

```
<appengine-web-app xmlns="http://appengine.google.com/ns/1.0">
  <application>Modified_application_name</application>
  <version>1</version>
  <threadsafe>true</threadsafe>
</appengine-web-app> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T19:33:30.193

得到完全相同的东西。

上面的建议是正确的。这是一个权限问题。

转到 Google App Engine 控制台，打开应用程序。向下看左侧，打开权限链接。我有两个使用的域电子邮件帐户。一个显示为在应用程序中具有“所有者”角色。另一个没有列出来！出现问题是因为我使用未经授权（丢失）的电子邮件帐户登录到 Eclipse。

只需确保您使用具有“所有者”或“开发者”角色的帐户登录 Eclipse GAE，即可解决问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-01T05:45:10.527

我也遇到了这个问题，求解决试试

1->您的应用程序 ID 必须与您在谷歌应用引擎帐户中的应用程序名称相同。

2->版本不能是点（.）格式。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-23T12:12:27.370

只是为了将记录留给其他人，我在从命令行运行它时遇到了类似的问题。第一次尝试是使用我为其他应用程序保存的电子邮件，因此它没有找到我尝试更新的应用程序。然后，即使强制选项--email，仍然没有运气。

事实证明，一旦身份验证被缓存（使用 cookie），即使您使用不同的凭据强制使用 --email，它也会默认使用它。因此，解决方案是添加选项--no_cookies，它会删除之前存储的cookie并提示输入电子邮件的密码。

```
# assuming you are in the root directory of your app, 
# and GAE tools are in yout $PATH
$ appcfg.py --email {your email here} --no_cookies . 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-17T05:29:02.010

尝试检查权限。转到 App Engine 控制台 > 管理 > 权限 > 设置您的权限。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-06-30T20:00:56.437

一个常见的错误是忘记编辑 web.xml 文件，您必须指定初始网页。

```
<!-- Default page to serve --> <welcome-file-list>
<welcome-file>Default.html</welcome-file>  </welcome-file-list> 
```

此致

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-10-13T12:03:04.803

不确定-但我认为即使是网页本身的代码错误也可能导致...

# git - Mercurial 或 git diff 文件如何以及何时进行？

> ID：10646464
> 
> 赞同：1
> 
> 时间：2012-05-18T03:50:26.990
> 
> 标签：git, mercurial, sync

我正在进行一个关于文件同步的项目。我有一些疑问：

*   谁能告诉我 Mercurial 或 Git diff 文件和存储差异的方式？
*   它是否监视文件更改？
*   提交时是否需要区分整个文件？
*   是否可以通过驱动来监控段的变化？
*   处理文本文件和二进制文件的方式有什么区别？
*   还有其他我应该研究的开源软件吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T12:14:52.767

对于 Mercurial，*显示*差异和*存储*差异是不同的。

*显示*差异时，取决于您是要求 Mercurial 本身显示差异，还是要求它使用外部差异程序。

以下是所有组合：

1.  存储差异
    1.  总是使用二进制差异，不管它是什么类型的文件（或假设是）
2.  显示差异
    1.  要求 Mercurial 显示差异
        1.  如果它是二进制文件会报错（也就是说，Mercurial*假定*它是二进制文件）
        2.  如果它是文本文件，将显示差异（再次假设）
    2.  要求外部程序显示差异
        1.  取决于外部程序能够处理什么

至于监控变化，Mercurial 不这样做。当您要求它提交时，它会确定要存储哪些文件以及要为它们提交哪些更改。

# bash - 一个简单的“if”语句

> ID：10646465
> 
> 赞同：11
> 
> 时间：2012-05-18T03:50:43.203
> 
> 标签：bash, if-statement

我的问题可以简化为使以下脚本工作（需要一个命令行参数）：

```
#!/bin/bash
if ["$1" == "0"]; then
    echo "good"
else
    echo "bad"
fi 
```

当我运行**脚本 0**时，这应该打印得**很好**，但我无法做到。我尝试了数字周围的各种引号组合，我尝试了 =、== 和 -eq。所以... bash，它是如何工作的？

 *** * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-18T04:20:19.390

这`[`实际上是一个命令。做一个`ls /bin/[`或一个`ls /usr/bin/[`。你会看到它实际上是一个可执行文件。

这`[...]`是来自旧的伯恩贝壳时代。该`if`命令执行该语句，如果该语句的退出代码为零，则该语句被认为是*真的*并执行 if 子句。如果退出代码不为零，则执行 else 子句（如果存在）。

试试这些：

```
$ date
Fri May 18 00:04:03 EDT 2012
echo $?   #Prints the exit code of the date command
0

$ date -Q  #Shouldn't work, I hope...
date: illegal option -- q
usage: date [-jnu] [-d dst] [-r seconds] [-t west] [-v[+|-]val[ymwdHMS]] ... 
    [-f fmt date | [[[mm]dd]HH]MM[[cc]yy][.ss]] [+format]
$ echo $?    #Exit code for the date command
1 
```

您可以看到这`date`是一个有效命令并返回退出代码 0（的值`$?`），但`date -Q`它无效，并返回退出代码 1。

现在让我们在`if`语句中尝试它们：

```
if date
then
   echo "I've successfully printed out the date!"
else
   echo "I made a mistake in the command"
fi 
```

现在试试这个：

```
if date -q
then
   echo "I've successfully printed out the date!"
else
   echo "I made a mistake in the command"
fi 
```

最初， the`[...]`是该`test`命令的别名。以下是等价的：

```
if test -f /bin/ls    #Does a file called /bin/ls exist?
then
   echo "There's a /bin/ls file"
fi 
```

和

```
if [ -f /bin/ls ]
then
   echo "There's a /bin/ls file"
fi 
```

这就是为什么在`[`and周围放置空格非常重要的原因`]`。因为这些实际上是命令。在 BASH 中，shell 内置，但它们是命令。这也是为什么所有测试参数（如`-f`、`-z`和`-eq`）都以破折号为前缀的原因。它们最初是`test`命令的参数。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-05-18T03:55:21.550

在括号和参数之间使用空格

```
$ cat x
#!/bin/bash
if [ "$1" == "0" ]; then
    echo "good"
else
    echo "bad"
fi

$ bash x 0
good 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-05-18T05:44:16.123

使用双括号进行算术比较，则无需担心引号和空格，例如：

```
#!/bin/bash 
if (($1 == 0)); then 
    echo "good" 
else 
    echo "bad" 
fi 
```

一般规则：`(( ))`用于算术以及`[[ ]]`文本和模式。
正如其他人所说， [ 是旧的 Bourne shell 语法，几乎没有理由再使用它了。**

# asp.net-mvc-3 - 将函数放入 @helper 时的空引用 - 我可以将它放在哪里或如何处理它？

> ID：10646466
> 
> 赞同：2
> 
> 时间：2012-05-18T03:50:50.630
> 
> 标签：asp.net-mvc-3, function, razor, razor-declarative-helpers

我正在尝试计算价格，例如：

```
@{
    Model.Prices.total =
        ((Input == choice) ? a : b)
    +
        ((AnotherInput == anotherchoice) ? c : d)
    ;
} 
```

这在`.cshtml`视图文件中运行良好，但不用说实际代码要长很多（更不用说我想应用 3 种不同的计算）。

所以我开始考虑在调用中创建一个`@helper`文件，这样我就可以这样调用它：`App_Code``Calculate``Pricing.cshtml`

```
@Pricing.Calculate() 
```

但这会引发“无法对空引用执行运行时绑定”错误。

我得到了错误，我明白这是一个限制。谁能建议我如何才能做到这一点？我想到了一个类文件，但不知道如何将它转换成一个（如果这是一个更好的选择）。非常感谢代码示例。

**更新：** 我暂时将此计算放在视图中，因为我无法将其转换为我研究过的其他选项：

1.  文件中的一个`@helper`函数`App_Code`- 但这是我遇到的“空引用”错误。
2.  一个`.cs`类文件（或者可能只是将它添加到我的 ViewModel - 但我无法正确编码。
3.  将它放在控制器中的建议 - 但代码很长。
4.  ~~创建一个自定义的 Html Helper 类来尝试将其称为 `@Html.Calculate([parameter?], [parameter?]) - 但对我来说，这比 #2 复杂一些。~~- 适当注明的评论。

再次注意，我提供的示例是一个简单的、简单的示例。我有 30 多个条件可以用多个选项来探索每个条件（例如上面的`a`'s 和`b`'），其中一些变得更加复杂：

```
() ? a : () ? b : c + () ? d : () ? e : () ? f : g + .... 
```

如果我使用 C# 代码（在它自己的`.cs`文件、自定义 Html Helper 或 ViewModel 中），所有的声明都会出错。

请注意，这不是我遇到问题的实际计算。上面的那个片段可以用来执行我的计算。**I am just struggling to get it to an appropriate option I listed above.**

**UPDATE 2**

I am having a lot of trouble converting this to it's own class (I am not a programmer - sorry for not understanding). This is part of my function in the view (just a snippet, hopefully I can figure out the rest if you provide a code sample):

```
@{
    Model.Price.calculated
        =
        //below is the "base" price, all else would be "add-ons"
        Model.Price.priceOne //elsewhere would be priceTwo, etc.
        +
            ((Model.MyModelOne.MyRadioButtonOne == 
                MyModelOne.RB1Enum.RB1ChoiceOne)
            ?
            Model.Price.AddOnOne
            :
            (Model.MyModelOne.MyRadioButtonOne == 
                MyModelOne.RB1Enum.RB1ChoiceTwo)
            ?
            Model.Price.AddOnTwo
            :
            Model.Price.AddOnThree)
    +
        ((Model.MyModelTwo.MyRadioButtonTwo
            == MyModelTwo.RB2Enum.RB2ChoiceOne)
        ?
        Model.Price.AddOnFour
        :
        (Model.MyModelTwo.MyRadioButtonTwo
            == MyModelTwo.RB2Enum.RB2ChoiceTwo)
        ?
        Model.Price.AddOnFive
        :
        Model.Price.AddOnSix)
    ;
} 
```

Don't bust my balls for using `enums`. :)

Again, although the calculation is not the appropriate thing to do in a view, the above works - I get the calculated result I am expecting based on user choices.

My `Price.cs` model (again, just something basic so you get the idea):

```
public class Price
{
    //Leaving out [DataType] and [DisplayFormat] DataAnnotations
    // leaving out priceTwo, etc.
    // numbers are basic for simplicity
    public decimal calculated { get; set; }
    public decimal priceOne { get { return 100; } } 
    public decimal AddOnTwo { get { return 10; } } 
    public decimal AddOnThree { get { return 20; } }
    public decimal AddOnFour { get { return 30; } }
    public decimal AddOnFive { get { return 40; } }
    public decimal AddOnSix { get { return 50; } }
    // Others go here
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T14:26:56.040

Html helper functions are just ways to reuse duplicated pieces of your display. What you're doing now is calculations based on the state of your model. In MVC, this data processing would be considered part of the model.

Here's the basic steps I'd take.

1.  Fetch/create your business model(s), which contains all the information necessary to do this calculation.
2.  Perform the calculation on the business model. If your calculation is based on one object using only it's internal properties, you can include the calculation code within your business model itself. Otherwise I'd create a separate calculations class that computes it.
3.  Create your View model based on the calculation result and your business model. The view model should only contain the state that will be displayed/edited within the view.

For example:

```
public ActionResult YourAction(int userChoice)
{
    MyModel businessModel = createOrFetchModel(); //May be more than one object
    Calculations calcs = new Calculations(businessModel);
    var total = calcs.GetTotal(userChoice);
    MyViewModel viewModel = makeViewModel; //usually I'd use something like AutoMapper here
    return View(viewModel);
} 
```

**Edit :** Sample code based on your update. The final design you must decide based on the actual calculation.

```
 public class Calculations
 {
     MyModelOne modelOne; //Do you really need seperate models for radio buttons?
     MyModelTwo modelTwo;
     Price Price;

     //...

     public decimal GetTotal()
     {
         decimal total = price.priceOne;
         total += price.FirstAddOn(modelOne);
         total += price.SecondAddOn(modelTwo);
         return total;
     }
 } 

 public class Price
 {
     //...
     public decimal FirstAddOn(MyModelOne modelOne)
     {
       if(modelOne.MyRadioButtonOne == MyModelOne.RB1Enum.RB1ChoiceOne)
          return this.AddOnOne;
       else if(modelOne.MyRadioButtonOne == MyModelOne.RB1Enum.RB1ChoiceTwo)
          return this.AddOnTwo;
       else
         return this.AddOnThree;
     }
 } 
```

# c++ - C++ 中的通用函数包装器可能吗？

> ID：10646469
> 
> 赞同：3
> 
> 时间：2012-05-18T03:51:48.133
> 
> 标签：c++, functional-programming, generic-programming, decltype

当我`boost::fusion::fused`在使用 decltype 时查看函数包装器中的错误时，就会出现这种情况。问题似乎是无效的 decltype 是编译错误，即使不会使用需要它的模板实例化，我也不知道如何解决这个问题以创建通用函数包装器。

这是我对单参数包装器的尝试：

```
#include <utility>
#include <type_traits>

template <class T>
typename std::add_rvalue_reference<T>::type declval();

template <class Fn, class Arg>
struct get_return_type
{
    typedef decltype(declval<Fn>()(declval<Arg>())) type;
};

template <class Fn>
struct wrapper
{
    explicit wrapper(Fn fn) : fn(fn) {}
    Fn fn;

    template <class Arg>
    typename get_return_type<Fn,Arg&&>::type
        operator()(Arg&& arg)
    {
        return fn(std::forward<Arg>(arg));
    }

    template <class Arg>
    typename get_return_type<const Fn,Arg&&>::type
        operator()(Arg&& arg)
    {
        return fn(std::forward<Arg>(arg));
    }
}; 
```

问题是，这不适用于非 const 版本的参数不能转换为 const 版本的参数的情况。例如：

```
#include <iostream>

struct x {};
struct y {};

struct foo
{
    void operator()(x) { std::cout << "void operator()(x)" << std::endl; }
    void operator()(y) const { std::cout << "void operator()(y) const" << std::endl; }
};

int main()
{
    wrapper<foo> b = wrapper<foo>(foo());
    b(x()); // fail
} 
```

在我看来，由 引起的 decltype 表达式的失败`void operator()(y) const`应该只是导致该函数由于 SFINAE 而被删除。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T05:13:51.813

这是在 g++ 4.6.1 上编译好的代码：

```
#include <utility>
#include <type_traits>
#include <iostream>

template <class Fn, class Arg>
struct get_return_type
{
    typedef decltype( std::declval<Fn>() ( std::declval<Arg>() ) ) type;
};

template <class Fn>
struct wrapper
{
    explicit wrapper(Fn fn) : fn(fn) {}
    Fn fn;

    template <class Arg>
    typename get_return_type<Fn,Arg&&>::type
    operator()(Arg&& arg)
    {
        return fn(std::forward<Arg>(arg));
    }

    template <class Arg>
    typename get_return_type< const Fn,Arg&&>::type
    operator()(Arg&& arg) const
    {
        return fn(std::forward<Arg>(arg));
    }
};

struct x {};
struct y {};

struct foo
{
    x* operator()(x) { std::cout << "x* operator()(x)" << std::endl; return nullptr; }
    x operator()(x) const { std::cout << "x operator()(x) const" << std::endl; return x(); }
    y* operator()(y) { std::cout << "y* operator()(y)" << std::endl; return nullptr; }
    y operator()(y) const { std::cout << "y operator()(y) const" << std::endl; return y(); }
};

template <class Fn>
void test_foo(Fn fn)
{
    // make sure all operator() overloads are callable
    const Fn& cfn = fn;

    x* a = fn(x());
    x b = cfn(x());
    y* c = fn(y());
    y d = cfn(y());
(void)a;(void)b;(void)c;(void)d;
}

int main()
{
    test_foo(foo());
    test_foo(wrapper<foo>(foo())); // fail
} 
```

# ruby-on-rails-3 - 设置一个rails模型属性并将其保存在数据库中

> ID：10646486
> 
> 赞同：0
> 
> 时间：2012-05-18T03:54:52.157
> 
> 标签：ruby-on-rails-3, model, controller

我怀疑我遇到了困难，因为我不了解 ruby​​ 和/或 rails 3 中的基本概念，但无论如何这里是：

我有一个名为的模型`Patient`，它在数据库中有一个名为的列，`active_admission_id`我希望能够执行以下操作：

```
@patient.active_admission_id = @admission.id 
```

在我的控制器中，并将值也保存在数据库中。现在我尝试通过在我的`Patient`模型中实现以下内容来做到这一点：

```
def active_admission_id=(admission_id)
  self.active_admission_id = admission_id
end 
```

但现在似乎我陷入了无限递归循环，因为一切都是 ruby​​ 中的一种方法......

所以我的问题分为两部分：（1）我试图在控制器中执行的代码 - 这是否符合 rails 范例？(2) 如果是这样，我该如何修复模型中的代码？非常感谢！

# r - 将 mm-yy 字符串“Jan-01”转换为日期格式

> ID：10646487
> 
> 赞同：8
> 
> 时间：2012-05-18T03:55:05.497
> 
> 标签：r, date

我的原始 Excel 文件中的日期代表“Jan-01”格式的月度数据。当然，我可以先手动将它们转换为 Excel 中更有用的东西，然后再输入到 R 中。

如何将此类日期转换为 R 中的 Date 类？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-18T05:43:12.250

如果你想要一个`date`类，使用 as.Date：

```
x <- "Jan-01"
as.Date(paste("01-", x, sep = ""), format = "%d-%b-%y") 
```

如果您想要`POSIXct`上课，请考虑使用`lubridate`：

```
library(lubridate)
x <- "Jan-01"
dmy(paste("01-", x , sep ="")) 
```

如果您只想依靠`base`：

```
x <- "Jan-01"
as.POSIXct(paste("01-", x, sep = ""), format = "%d-%b-%y") 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-18T04:21:54.907

编辑：

最简单的方法是在 zoo 中使用 yearmon 类：

```
 require(zoo)
 as.yearmon(x, "%b-%y")
#[1] "Jan 2001" 
```

稍长的方法：

```
 x="Jan-01"
 xs<-strsplit(x, "-")
 xd <- as.Date( xs[[1]][2], paste( xs[[1]][1], "01",  sep="-"), format="%y-%b-%d")
 xd
#[1] "2001-01-01" 
```

如果要处理一串日期，则可能需要使用`sapply`if 选择第二种方法来制作年份向量和月份向量

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T05:23:22.150

如果您强制指定该月的第一天，您可以将日期转换为：

```
datevar <- c("Jan-01","Feb-01","Mar-12")
as.Date(paste("01",datevar,sep="-"),"%d-%b-%y") 
```

应该注意的是，这与 DWin 下面给出的答案基本相同，只是手动指定了日期而不是年份。

# c# - 字幕 (.srt) 时间范围的类型是什么？

> ID：10646492
> 
> 赞同：0
> 
> 时间：2012-05-18T03:55:42.410
> 
> 标签：c#, parsing, time, timer

我正在开发 C# 应用程序，它将读取 .srt 文件并将其显示在屏幕上。

文件格式就是这样；

```
1   00:00:06,000    00:00:07,400    Enjoy the movie! 
2   00:00:07,500    00:00:09,500    Hi, my name is Mary
3   00:00:22,000    00:00:25,000    Hello my name is John. 
```

我正在使用一个计时器，它每 100 毫秒滴答一次，并且在每个滴答声上，我都想检查值是否在开始和结束之间。在这种情况下，首先将在 00:00:06,000 和 00:00:07,400 之间。但我不确定我应该使用什么值。我试图将它解析为 DateTime 但它没有转换。

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T04:10:43.807

您可以使用[DateTime](http://msdn.microsoft.com/en-us/library/w2sa9yss.aspx)或[TimeSpan](http://msdn.microsoft.com/en-us/library/system.timespan.parseexact.aspx)但您需要提供[正确的格式](http://msdn.microsoft.com/en-us/library/ee372287.aspx)才能`ParseExact`正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T04:51:40.293

使用时间跨度。这里是简单的控制台项目，用于在正确的时间显示字幕

```
 class Program
    {
    private static Queue<Subtitle> _subtitles;

    private static Subtitle _activeSubtitle;

    private static TimeSpan _currentTime = new TimeSpan();

    static void Main(string[] args)
    {
        _subtitles = new Queue<Subtitle>();

        Subtitle title1 = new Subtitle()
                              {
                                  StartTime = TimeSpan.Parse("00:00:06,000"),
                                  EndTime =  TimeSpan.Parse("00:00:07,400"),
                                  Text = "Enjoy the movie!"
                              };

        Subtitle title2 = new Subtitle()
                              {
                                  StartTime = TimeSpan.Parse("00:00:07,500"),
                                  EndTime =  TimeSpan.Parse("00:00:09,500"),
                                  Text = "Hi, my name is Mary"
                              };

        Subtitle title3 = new Subtitle()
                              {
                                  StartTime = TimeSpan.Parse("00:00:22,000"),
                                  EndTime =  TimeSpan.Parse("00:00:25,000"),
                                  Text = "Hello my name is John."
                              };

        _subtitles.Enqueue(title1);
        _subtitles.Enqueue(title2);
        _subtitles.Enqueue(title3);

        Timer timer = new Timer(ShowSubtitles, null, 0, 100);

        while (_currentTime <= new TimeSpan(0, 0, 0, 30))
        {

        }
        Console.WriteLine("End");
    }

    private static void ShowSubtitles(object state)
    {

        if (_activeSubtitle == null && _subtitles.Count > 0)
            _activeSubtitle = _subtitles.Dequeue();
        Console.WriteLine(_currentTime);

        if (_activeSubtitle != null)
        {

            if (_currentTime >= _activeSubtitle.StartTime && _currentTime <= _activeSubtitle.EndTime)
                Console.WriteLine("\t{0}", _activeSubtitle.Text);

            if (_currentTime >= _activeSubtitle.EndTime)
                _activeSubtitle = null;
        }
        _currentTime = _currentTime.Add(new TimeSpan(0, 0, 0, 0, 100));

    }
}

internal class Subtitle
{
    public TimeSpan StartTime { get; set; }
    public TimeSpan EndTime { get; set; }
    public string Text { get; set; }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-18T04:02:47.467

您必须使用 TimeSpan 类型进行解析，看看[这里](http://msdn.microsoft.com/pt-br/library/system.timespan.milliseconds.aspx)

# javascript - 使用 javascript 获取 facebook 共享计数

> ID：10646494
> 
> 赞同：1
> 
> 时间：2012-05-18T03:55:49.430
> 
> 标签：javascript, xml, facebook, jquery

我写了以下代码：

```
function shareCount(url){
    var count;
    $.ajax({
        type: "GET",
        url: "http://api.facebook.com/method/fql.query?query=SELECT+share_count+FROM+link_stat+WHERE+url%3D%22http%3A%2F%2F9gag.com%2Fgag%2F"+encodeURIComponent(url)+"%22",
        dataType: "xml",
        success: function(xml) {
                alert($(xml).find('share_count').text());
                return $(xml).find('share_count').text();
        }
    });
    //alert(count);
} 
```

它只是向 facebook 发送一个 fql 查询以获取`share_count`给定的链接，该链接很好，并且`alert($(xml).find('share_count').text());`可以工作，但是当我返回计数时，另一个函数说 var 未定义！`alert()`当我取消注释最后的范围时，也会发生同样的事情。

这是向该函数发送请求的其他函数的一部分（不确定是否相关）

```
g.innerHTML = h("#template", {
                id: c.images[a].id,
                title: c.images[a].title,
                image: c.images[a].image.small,
                time: c.images[a].time,
                votes: c.images[a].votes,
                url: c.images[a].url,
                shareCount: shareCount(c.images[a].id)
            }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T04:13:25.617

警报在 ajax 完成之前执行。

为什么要使用自己的 ajax 方法来获取 fb 数据？你为什么不使用[graph api](https://developers.facebook.com/docs/reference/api/)，像下面这样的东西应该这样做

```
FB.api({
    method: 'fql.query',
    query: 'SELECT share_count FROM link_stat WHERE url = "http://9gag.com/gag/"'
}, function (data) {
    alert(data[0].share_count);
    //    do the rest here
}); 
```

[演示](http://jsfiddle.net/dhirajbodicherla/kR8Hp/3/)

希望这可以帮助

# matlab - 如何在 MATLAB gui 中定期捕获操纵杆输入

> ID：10646496
> 
> 赞同：1
> 
> 时间：2012-05-18T03:56:32.503
> 
> 标签：matlab, user-interface, timer, serial-port, joystick

我正在尝试在 matlab 中创建一个 gui，它会定期检查我的操纵杆输入的状态。这个想法是接受这个输入并用它控制伺服。到目前为止，我可以让所有东西单独工作，但不能一起工作。现在，微控制器刚刚设置为查看串行线并基于此调整伺服（0到180之间）。这工作得很好。这是我到目前为止所拥有的，

```
function Foo

h.fig = figure('position', [1100 30 210 60]);
h.serial = serial('COM3');
fopen(h.serial);
h.joy = vrjoystick(1);
h.timerObject = timer('TimerFcn',@JoyInput,'ExecutionMode','fixedRate',...
                    'Period',1.0);

h.buttonOne = uicontrol('style', 'pushbutton' ,...
                'position', [10 10 100 40],...
                'string' , 'Start');

set(h.buttonOne, 'callback', {@Start, h})

function h = Start(hObject, eventdata, h)
h.buttonTwo = uicontrol('style', 'pushbutton' ,...
                'position', [100 10 100 40],...
                'string' , 'Stop');
set(h.buttonTwo, 'callback', {@Stop, h});
set(h.buttonOne, 'enable', 'off');
start(h.timerObject);
%fprintf(h.serial,'150') This works as is

function h = Stop(hObject, eventdata, h)

delete(h.buttonTwo)
h = rmfield(h, 'buttonTwo');
set(h.buttonOne, 'enable', 'on');
stop(h.timerObject);
fclose(h.serial);
delete(h.serial);

function h=JoyInput(hObject, eventdata, h)
fprintf(h.serial,'150') %doesn't work
% a = 1 % this repetively outputs a=1 without the fprintf 
```

我收到一条错误消息

```
??? Error while evaluating TimerFcn for timer 'timer-17' 

Input argument "h" is undefined. 
```

我对在 matlab 中使用 gui 很陌生，当我可以在其他回调函数的其他地方使用 h.serial 时，我不知道这意味着什么。谢谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T08:05:22.240

而不是轮询（定期检查更改），您可能会更幸运地使用事件驱动的方法。有关文件交换的一些示例代码，请参阅以下链接以获得一些灵感。该代码用于与 3d 鼠标硬件接口，但您可能会发现通用方法非常有用。

[http://www.mathworks.com/matlabcentral/fileexchange/22124-3d-mouse-support-using-classes-and-events](http://www.mathworks.com/matlabcentral/fileexchange/22124-3d-mouse-support-using-classes-and-events)

# grails - 已安装 Quartz 插件，但作业未在 grails 中启动

> ID：10646497
> 
> 赞同：1
> 
> 时间：2012-05-18T03:56:33.363
> 
> 标签：grails, quartz-scheduler

我刚刚安装了石英插件（quartz2-0.2.2），我正在使用 grails-1.3.7。

然后我使用“grails create-job”创建了我的作业类，并对其进行了修改以打印出一条小消息作为测试。

```
class ImportFilesJob {

    def startDelay = 100000L

    def cronExpression = "0 30 22 * * ?"

    def execute() {
        log.info"ImportFilesJob start!"
        println "ImportFilesJob start!"
        Date runDate = DateUtils.today
        long start = System.currentTimeMillis()
        long end = System.currentTimeMillis()
        log.info "Finished ImportFilesJob in ${end - start} millisec."
        println"Finished ImportFilesJob in ${end - start} millisec."
    }
} 
```

现在，我预计这项工作将在每天晚上 10.30 开始。

但事实并非如此……

我错过了什么吗？

感谢任何帮助。

尼米

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T04:08:10.537

这是在您的“测试”环境中吗？如果是这样，Quartz 配置为不会在测试中自动启动。检查 QuartzConfig.groovy 文件并设置

> 自动启动 = 真

为了尽快检查是否等到 10:30，您可以使用以下 cron 表达式每 3 分钟启动一次，以查看它是否正常工作：

> “0 0/3 * * * ？”

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-18T18:06:09.650

我猜你忘记了“触发器”块：

```
class MyFirstJob{
    def concurrent = false

    static triggers = {
        simple name: 'myFirstJobTrigger', startDelay: 1000, repeatInterval: 1000 }

    def group = "MyGroup"

    def execute(){ 
        println "MyFirstJob run!" 
    }
} 
```

# asp.net-mvc-3 - 如何检查模型字段/属性在视图中是否有效？

> ID：10646498
> 
> 赞同：0
> 
> 时间：2012-05-18T03:57:04.033
> 
> 标签：asp.net-mvc-3

如果模型中的字段有效，是否可以在视图中设置检查条件？

我有一个包含用户名和密码字段的视图页面。模型类中有字段具有 [Required] 属性，因此如果未提供这两个字段，则将进行验证。

如果此字段无效，我的目标是更改视图中标签的 css。

任何人请指教。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T04:09:29.760

您可以将 jQuery 与 MVC 使用的不显眼的验证一起使用。

[这个答案](https://stackoverflow.com/a/10267902/394028)和[这](https://stackoverflow.com/a/10267907/394028)应该给你两种可以使用的方法

# ruby-on-rails - 雷神不可用

> ID：10646499
> 
> 赞同：1
> 
> 时间：2012-05-18T03:57:04.773
> 
> 标签：ruby-on-rails, thor

我已经安装了 Ruby 1.9.2 以及安装 rails gem。我现在尝试使用以下命令创建一个新的 rails 应用程序：

```
$ rails new foo -T 
```

我立即收到提示

```
Thor is not available.
If you ran this command from a git checkout of Rails, please make sure thor is installed 
```

我已经安装了雷神，但我不知道该怎么做。请帮忙。

*警告，我是这方面的新手。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T05:31:13.980

我找到了自己问题的答案。

我在 Mac OS 10.7 上安装了 Ruby 1.9.2 并安装了 Xcode 4.2。Thor 不适用于最新的 Xcode，一旦我安装了 Ruby 1.9.3，一切似乎都运行良好。

# ruby-on-rails-3 - Accepts_nested_attributes_for Formtastic 嵌套表格

> ID：10646501
> 
> 赞同：0
> 
> 时间：2012-05-18T03:57:34.780
> 
> 标签：ruby-on-rails-3, nested-forms, formtastic

我看过其他帖子，看不出我做错了什么。我收到此错误：

```
ActiveModel::MassAssignmentSecurity::Error in ProjectsController#create

Can't mass-assign protected attributes: blog_post 
```

这是我的两个模型和我的表格。我的印象是项目控制器中没有什么特别需要的。项目或 blog_post 控制器中有什么东西可以搞砸吗？

项目.rb

```
class Project < ActiveRecord::Base
  attr_accessible :name, :category_id, :user_id, :goal, :about, :headline, :image_url, :about_html, :blog_post_attributes

  has_many :blog_posts, :dependent => :destroy
  accepts_nested_attributes_for :blog_posts
end 
```

blog_post.rb

```
class BlogPost < ActiveRecord::Base
  attr_accessible :project_id, :user_id, :title, :blog_text, :commentable, :private
  belongs_to :project
  has_many :blog_post_replies, :dependent => :destroy
end 
```

项目/_new_form.html.erb

```
<%= semantic_form_for @project do |f|  %>
<%= f.semantic_errors :state %>

<%= f.input :name, :as => :string %>
<%= f.input :headline, :as => :string %>
<%= f.input :about %>
<%= f.input :image_url, :as => :file %>
<%= f.input :category , :include_blank => false%>
<div class="well">
<%= f.semantic_fields_for :blog_post do |blog_post| %>
    <%= blog_post.input :title, :as => :string, :label => "First Blog Post Title" %>
    <%= blog_post.input :blog_text, :as => :text, :label => "First Blog Post Text" %>
<% end %>
</div>
<%= f.action :submit, :as => :button %>
<% end %> 
```

**编辑**如果我使用建议的 Formtastic 格式：

```
<%= f.input :title, :for => :blog_post %>
<%= f.input :blog_text, :for => :blog_post %> 
```

我收到此错误；这让我觉得它根本没有看到嵌套属性：

```
NoMethodError in Projects#new

undefined method `title' for #<Project:0x007fb044745f58> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T06:05:34.487

错误在这里：

```
<%= f.semantic_fields_for :blog_post do |blog_post| %> 
```

它应该是：

```
<%= f.semantic_fields_for :blog_posts do |blog_post| %> 
```

(:blog_posts 而不是 :blog_post)

# perl - 从 perl 调用链接

> ID：10646505
> 
> 赞同：1
> 
> 时间：2012-05-18T03:58:02.970
> 
> 标签：perl

我正在使用 WWW::Scripter 来调用 javascript。该网站的链接是[这样的。](https://www.amazon.com/gp/digital/fiona/manage?ie=UTF8&ref_=gno_yam_myk#pdocSettings) 文档的 html 如下所示。

```
<form id="whitelistForm" method="get" action="">
<table id="whitelistTable" class="info">
<tbody>
<tr>
<th class="firstCol" width="75%" style=""> E-mail address </th>
<th class="lastCol">Actions</th>
</tr>
<tr class="even">
<td>id@mailhost.com</td>
<td class="button">
<a onclick="deleteWhitelist('id@mailhost.com')" href="javascript:void(0)">Delete</a>
</td>
</tr>
</tbody>
</table>
</form>
<div id="whitelist-du-output" class="actionResult"></div>
<div class="subLink">
<a id="addNewEmailAddress" class="myk-link" href="javascript:void(0)" style="font-weight: normal;"> Add a new approved e-mail address </a>
</div>
</div> 
```

有谁知道如何从 perl 执行 addNewEmailAddress 。（我已经使用 WWW::Mechanize 登录）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T13:36:14.910

如果您想使用 Perl 向这个 Amazon 系统添加/提交（新）电子邮件地址，您必须先登录。

我相信您已经编写了该步骤。然后，您必须**保存 cookie**以供进一步请求。

* * *

要提交电子邮件，您需要调用**POST**请求到 url：

`https://www.amazon.com/gp/digital/fiona/du/add-whitelist.html/ref=kinw_myk_wl_add`

并使用此请求提交两个参数：

*   **sid** *（这是您可以在 cookie 中找到的会话 ID；例如：183-9522205-2962863）*
*   **newEmail** *（您要提交的电子邮件地址；例如：my@email.address.com）*

不要忘记对这些字符串进行编码。

检查响应代码，必须是**200**。然后读取响应文本以检查**成功**参数的值。

您可能需要为此请求**添加引用者。**如果是这样，那么它应该是：

`https://www.amazon.com/gp/digital/fiona/manage?ie=UTF8&ref_=gno_yam_myk`

# java - 为什么使用 Surface 视图的相机图像与我使用 Intent(ACTION_IMAGE_CAPTURE) 捕获的图像不同

> ID：10646506
> 
> 赞同：0
> 
> 时间：2012-05-18T03:58:47.980
> 
> 标签：java, android

我使用以下代码来捕获图像。在其中我使用`Surfaceview`. 捕获的图像保存在我在 android Sdcard 中创建的文件夹中，但是当我以图像方向显示这些图像时`GridView`，图像方向不同。如果我使用相机，`Intent (ACTION_IMAGE_CAPTURE)`则输出图像定义明确。谁能帮我

在这里，我有一个扩展 Activity 一个工具的类`SurfaceHolder.Callback`

```
public class CameraView extends Activity implements SurfaceHolder.Callback {

       private static final String TAG = "CameraVeiw";

        private Camera camera;
        boolean previewing = false;
        SurfaceHolder surfaceHolder;
        private File file = null;
        private static String mFileName = null;

        private long name;

        final int RESULT_SAVEIMAGE = 0;
        private int w;
        private int h;

        public   static byte[] data = null;

        @Override
        public void onCreate(Bundle savedInstanceState){
            super.onCreate(savedInstanceState);
            setContentView(R.layout.camera);
       } 
```

我`SurfaceView`用来捕捉图像

```
 SurfaceView surfaceView = (SurfaceView) findViewById(R.id.surfaceview);
    surfaceHolder = surfaceView.getHolder();
    surfaceView.getWindowVisibility();
    surfaceHolder.addCallback(this);
    surfaceHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);
    surfaceHolder.setFixedSize(300, 300); //hard coded

    Button button2 = (Button) findViewById(R.id.picbutton);
    button2.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {

    camera.takePicture(new CustomShutter(), null, 
    new CustomPictureCallback());
    }
    });

    }
public void surfaceChanged(SurfaceHolder holder, int format, int width,
    int height) {

        if(previewing){
            camera.stopPreview();
            previewing = false;
        }

        if (camera != null){
            try {
                camera.setPreviewDisplay(surfaceHolder);
                camera.startPreview();

                previewing = true;

            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }
    }

public void surfaceCreated(SurfaceHolder holder) {
        camera = Camera.open();
             camera.setDisplayOrientation(90);        }

@Override
public void surfaceDestroyed(SurfaceHolder holder) {
    camera.stopPreview();
    camera.release();
    camera = null;
    previewing = false;  
}

class CustomPictureCallback implements Camera.PictureCallback {
    private Bitmap bitmap;
public void onPictureTaken(byte[] data, Camera camera) {

             FileOutputStream outStream = null;

                try {

        String path = "/sdcard/MonsterApp/Photos/" + data+".jpg";
                outStream = new FileOutputStream(String.format(path));
                    outStream.write(data);
                    outStream.close();
                    Log.d(TAG, "onPictureTaken - wrote bytes: " + data.length);
                } catch (FileNotFoundException e) {
                    e.printStackTrace();
                } catch (IOException e) {
                    e.printStackTrace();
                } finally {
                }
                Log.d(TAG, "onPictureTaken - jpeg");

                camera.startPreview();
                Log.i("Information", "Helllllooooo");   } }

class CustomShutter implements Camera.ShutterCallback {

    public void onShutter() {

    }

    }
    @Override
    public void onDestroy() {
    super.onDestroy();
    if(camera != null) {
    camera.release();
    }
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T04:15:58.127

我认为当您使用 Intent (ACTION_IMAGE_CAPTURE) 时，它会使用从不处理设备方向的默认应用程序。该设备始终仅处于横向状态。但是，如果您旋转设备时出现表面视图，那么它会处理方向。所以它也旋转相机捕捉。我认为最好的解决方案是将您的相机捕捉活动固定为横向并在横向中设置正确的方向。我想你的相机会很好用。如果您不明白，那么我可以向您发布一些代码.. 但首先尝试.. 我不确定，但我认为它应该可以工作。

你能试试这个吗

setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);

将其写入您的创建然后使用您的表面视图捕获。

试试这个来设置正确的方向

mCamera.setDisplayOrientation(90);

或者

mCamera.setDisplayOrientation(0);

有四种不同的角度肯定会适用于您的代码。尝试每个..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T04:16:48.973

有一个元数据，其中包含从 android 相机捕获的所有图像。我认为在使用表面视图捕获时，您没有将 EXIF 元数据与图像一起保存。EXIF 元数据包含拍摄图像时手机的方向详细信息。所以android系统在显示时会根据方向细节旋转图像。这些细节可能会对您有所帮助

[http://mobisocial.stanford.edu/news/2011/08/rotating-images-in-android/](http://mobisocial.stanford.edu/news/2011/08/rotating-images-in-android/)

# jquery - 带有 jquery.spritely 的对角平移

> ID：10646508
> 
> 赞同：2
> 
> 时间：2012-05-18T03:58:51.233
> 
> 标签：jquery

[是否可以使用Spritely](http://spritely.net/)沿对角线方向平移（例如左下）？这是我当前的代码：

```
$(function() {
    $('#container').pan({fps: 30, speed: 1, dir: 'left'});
}); 
```

# c# - Silverlight 原产地

> ID：10646509
> 
> 赞同：1
> 
> 时间：2012-05-18T03:59:04.813
> 
> 标签：c#, .net, wpf, silverlight, web-services

如果我将 silverlight 应用程序部署到[http://mydomain.com/MySilverlightApp](http://mydomain.com/MySilverlightApp)我知道我可以使用以下任一方式与 Web 服务进行通信：

*   [http://mydomain.com/Webservices/](http://mydomain.com/Webservices/)或
*   [http://mydomain.com/MySilverlightApp/WebServices/](http://mydomain.com/MySilverlightApp/WebServices/)。

如果我使用[https://mydomain.com/Webservices](https://mydomain.com/Webservices)我会得到一个安全异常，因为源站点不一致。

同样，如果我使用[http://mydomain2.com/Webservices](http://mydomain2.com/Webservices)，我将再次因为来源站点问题而出现安全异常。

我目前没有时间设置或测试它，但如果我使用[http://s1.mydomain.com/Webservices](http://s1.mydomain.com/Webservices)或[http://s2.mydomain.com/会出现安全异常网络服务](http://s2.mydomain.com/Webservices)？

我基本上是在寻找一种进行负载平衡的方法，但是如果我的应用程序部署到一个位置[http://mydomain.com/MySilverlightApp/](http://mydomain.com/MySilverlightApp/)有什么途径可以克服由于原产地差异而导致的这些安全异常？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T05:50:11.473

是的，你会得到一个安全例外。

我看到了两种实现负载平衡和避免跨域异常的方法：

1.  [使您的 Silverlight 应用程序成为受信任的应用程序](http://msdn.microsoft.com/en-us/library/ee721083%28v=vs.95%29.aspx#relaxed_crossdomain_access_restrictions)

2.  设置发布客户端访问策略文件或托管在源站点的[路由服务](http://msdn.microsoft.com/en-us/magazine/cc500646.aspx)（[WCF 4 版本）。](http://www.codeproject.com/Articles/260996/Router-Service-in-WCF-4-0)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T20:35:46.087

只允许对您的服务进行跨域访问？

[http://msdn.microsoft.com/en-us/library/cc197955(v=vs.95).aspx](http://msdn.microsoft.com/en-us/library/cc197955(v=vs.95).aspx)

# php - RESTful Web 服务架构和令牌

> ID：10646511
> 
> 赞同：1
> 
> 时间：2012-05-18T03:59:12.353
> 
> 标签：php, rest, symfony, fosuserbundle

所以我能够通过 symfony 中的 REST 接口登录用户。但是我不清楚的是如何在后续的 REST 调用中访问数据。

例如，我登录用户并返回 $user 数组，类似于：

```
{"success":true,"user":{"id":1,"username":"jini","username_canonical":"jini","email":"jini@email.com","email_canonical":"jini@email.com","enabled":true,"salt":"n0ad2gbrzasc8s0sso0so408ggokwo4","password":"RzxZoVc2raTH0ORMfoSGqifjCn1M\/LmtemDb6som7z6\/Pao2G4M0KNGs32t3jSCIYadKGJQBsdCB8ihuJv9NYQ==","confirmation_token":"685jmhhtsr0oso44w00k0wck0goo8gs8w4gwc0cwogkskwkk0c","groups":[],"locked":false,"expired":false,"roles":[],"credentials_expired":false}} 
```

然后我如何使用这些信息（令牌/用户等）来请求每个后续的 Web 服务调用？那就是我是否在每个 URL 中传递一个 $user 参数以确保资源有效？

任何提示和指南将不胜感激，如果我的问题似乎含糊不清，我很抱歉。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T11:49:12.923

例如，您可以设置标头以传递用户名和密码，然后读取它们并在服务器上验证。您可以添加一些 api 密钥。例如：

```
//pseudocode
$request->Headers["X-Auth-User"] = $user;
$request->Headers["X-Auth-Key"] = $key;
$request->send(); //curl for example 
```

然后，您可以设置额外的防火墙以通过 securitybundle 处理 serv 上的身份验证。

# regex - Rails 3 使用正则表达式自动完成

> ID：10646512
> 
> 赞同：2
> 
> 时间：2012-05-18T03:59:15.233
> 
> 标签：regex, ruby-on-rails-3, autocomplete

我正在创建一个新网站，该网站将通过文本字段接收说明。在文本字段中，我希望有一个特定的自动完成机制在它上面工作，就像文本编辑器中的制表符完成一样。例如，如果我编写了一个包含食谱步骤的烹饪网站，我希望这些步骤尝试根据动词列表（烘焙、烹饪、切割等）自动完成第一个单词，然后采取行动通过查找壁橱正则表达式来智能地查找您应该/可以自动完成的术语以填写文本字段。

我的问题是我能做到的最好的方法是什么。我正在查看标记项目并在其上使用自动完成功能，但不确定它是如何工作的。

对此的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T04:19:02.403

可能最简单的方法是使用 带有回调函数的[jQuery UI Autocomplete 。](http://jqueryui.com/demos/autocomplete/)

你需要确保你的字典被缓存在服务器端，这样你的数据库就不会被大量的请求所淹没。Memcached 或 Redis 可以派上用场。

您还需要考虑这些数据是如何更新的，刷新缓存的可接受时间量是多少，以及它存储在磁盘上的模型（它是否用于程序的其他方面，而关系模型将更有意义？）。

# algorithm - DeviceMotion 采用什么算法从加速度计和陀螺仪计算姿态？

> ID：10646518
> 
> 赞同：1
> 
> 时间：2012-05-18T04:00:24.070
> 
> 标签：algorithm, accelerometer, gyroscope, core-motion, kalman-filter

根据参考资料， deviceMotion 属性仅适用于同时具有加速度计和陀螺仪的设备。这是因为它的子属性是传感器融合算法的结果，即两个信号一起评估以减少估计误差。

嗯，我的问题是 CMMotionManager 用来进行计算的内部实现或算法在哪里。我想要一些关于这个所谓的“传感器融合算法”的细节

流行的融合算法是例如卡尔曼滤波器和导数，但我猜 CMMotionManager 的内部实现是基于更简单，因此更快的算法。我希望对来自加速度计和陀螺仪的传感器数据进行一些简单但足够好的数学计算，最终计算出横滚、偏航和俯仰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T08:08:10.023

目前尚不清楚[Core Motion 中实际实现了什么](https://stackoverflow.com/a/5493592/341970)。

至于卡尔曼滤波器以外的滤波器：我已经根据这份[手稿为](https://drive.google.com/open?id=0B9rLLz1XQKmaZTlQdV81QjNoZTA)[Shimmer 2](http://www.shimmer-research.com/products-2/shimmer-revisions)设备实现了传感器融合。

[您可能会在Complementrary Filters](https://stackoverflow.com/a/1590385/341970)上发现这个答案也很有帮助，请参阅[filter.pdf](https://drive.google.com/open?id=0B9rLLz1XQKmaLVJLSkRwMTU0b0E)

我不会使用 roll、pitch 和 yaw 有两个原因：（1）[它会破坏你的应用程序的稳定性](https://stackoverflow.com/q/5577334/341970)，（2）你[不能将它用于插值](https://stackoverflow.com/a/5580491/341970)。

# java - Java - 在数组 haystack 中查找针的一部分的 indexof

> ID：10646520
> 
> 赞同：1
> 
> 时间：2012-05-18T04:00:26.907
> 
> 标签：java, arrays, indexof

我正在尝试查找包含字符串的一部分的数组索引位置。

```
FullDirPrt = "a1a" "b2b" "c3c"

String doT ="b2";
int DotPos = Arrays.asList(FullDirPrt).indexOf(doT); 
```

如果我搜索 b2b，它会返回 indexOf。如果我只搜索 b2，它会返回 -1。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T04:06:29.893

您必须单独检查数组中的每个项目，因为每个数组项目都是一个单独的字符串：

```
String[] full = { "a1a", "b2b", "c3c" };
String doT = "b2";

for(int i = 0; i < full.length; i++) {
    if(full[i].contains(doT)) {
        System.out.println("Found item at index " + i);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T04:06:43.180

您正在匹配整个字符串，您将不得不遍历整个列表或数组，然后检查每个字符串上的每个 indexOf。

```
for (String s : FullDirPrt) {
    if (s.indexOf("bs") > 0) {
        // do something
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T04:09:43.283

使用不使用 List 的简单字符串数组，您也可以执行如下操作。

```
String[] full={"a1a", "b2b", "c3c"};
String doT = "b2";
for(String str:full){
if(str.contains(doT)){
System.out.println(str+" contains "+doT);
}
} 
```

# mysql - mysql在选择和平均后重命名列值

> ID：10646521
> 
> 赞同：1
> 
> 时间：2012-05-18T04:00:30.590
> 
> 标签：mysql

在我当前的表中，我试图根据 comp_name 获取列的平均值，下面是输出

```
 "Comp_Name"         "No_of_Rows"    "Column1_Avg"   "Column2_Avg"   "Column3_Avg"
    "Company1 Pty Ltd"  "291"           "39"            "60"            "0"
    "Company1 Pty."     "1699"          "23"            "76"            "0"
    "Company2 Ltd"      14335"          "6"             "82"            "10"
    "Company2 "         "4335"          "60"            "8"             "2"
    "Company3 Pty Ltd"  "767"           "22"            "77"            "0"
    "Company3"          "1628"          "16"            "82"            "1" 
```

可以平均“Company1 Pty Ltd”和“Company1 Pty”。（以及其他公司）但添加行数？

我的选择查询如下，基本上它是根据某个值计算平均值，并根据表中可用的公司名称进行分组

```
 SELECT Comp_Name,count(*) as No_of_Rows,
    CAST(   (COUNT(CASE WHEN Column1 < 500 then 1 else NULL end)/COUNT(mytable.ID)) * 100 AS CHAR(2))+'%' as Column1_Avg,
    CAST(   (COUNT(CASE WHEN (Column1 < 30000 AND Column1 > 500) then 1 else NULL end)/COUNT(mytable.ID)) * 100 AS CHAR(2))+'%' as Column2_Avg,
    CAST(   (COUNT(CASE WHEN (Column1 > 30000)  then 1 else NULL end)/COUNT(mytable.ID)) * 100 AS CHAR(2))+'%' as Column3_Avg
    FROM mytable
    GROUP BY Comp_Name desc 
```

预期输出：

```
 "Comp_Name"         "No_of_Rows"    "Column1_Avg"   "Column2_Avg"   "Column3_Avg"
    "Company1"          "1990"          "31"            "68"            "0"
    "Company2"          "18670"         ".."            ".."            "6"
    "Company3"          "2395"          ".."            ".."            ".." 
```

我可以使用带有 company_name 列表的某种参考表及其替代吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T06:10:47.297

如果您只想取`GROUP BY`从句中的第一个单词，您可以使用：

```
GROUP BY CASE LOCATE(' ', Comp_Name) WHEN 0 THEN Comp_Name ELSE LEFT(Comp_Name, LOCATE(' ', Comp_Name)) END

```

然后，如果你想建立一个*参考表*，这样的查询应该没问题：

```
SELECT DISTINCT Comp_Name, CASE LOCATE(' ', Comp_Name) WHEN 0 THEN Comp_Name ELSE LEFT(Comp_Name, LOCATE(' ', Comp_Name)) END AS Simple_Comp_Name
来自我的表
按 Simple_Comp_Name 订购

```

# java - 地图与类属性建议

> ID：10646522
> 
> 赞同：1
> 
> 时间：2012-05-18T04:00:37.693
> 
> 标签：java, properties

我正在编写一个包含一堆类的程序，这些类将被序列化以保存在数据库中并通过网络发送。

为了使通过命令行界面访问类属性更容易，我正在考虑将属性存储在 Map 类中，而不是为每个属性提供它自己的变量。

基本上，而不是使用这样的东西：

```
String id = account.getUserId(); 
```

我会这样做

```
String id = account.properties.get("userId"); 
```

这是一种可取的做事方式吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T04:11:01.410

我喜欢这样做的方式通常是这样的：

```
enum StringPropertyType {
   USERID, FIRSTNAME, LASTNAME
}

interface StringAttributes {
    String get(StringPropertyType s);
    void put(StringPropertyType s, String value);
}

class MapBasedStringAttributes implements StringAttributes {
    Map<StringPropertyType, String> map = new HashMap<~>();
    String get(StringPropertyType s) { return map.get(s); }
    void put(StringPropertyType s, String value) { map.put(s,value); }
} 
```

这为您提供了编译时安全性、重构等。

您还可以使用 stringPropertyType.name() 来获取枚举值的字符串表示形式并使用

```
Map<String,String> 
```

反而..

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-18T04:08:55.160

是的，这是一个非常明智的模型。它有时被称为“[原型对象模型](http://en.wikipedia.org/wiki/Prototype-based_programming)”，与在 JavaScript 中的工作方式非常相似，其中每个对象实际上都是一个 Map。这反过来又导致了非常流行的 JSON 序列化格式。

不错的特点：

*   您不必担心混乱的继承层次结构 - 您可以随意更改属性。
*   您可以通过从另一个对象（原型）复制来创建一个新对象
*   操作数据的代码可以以统一的方式执行此操作，而无需显式命名所有变量。
*   与静态类定义相比，它更“动态”——扩展和修改对象很容易

潜在风险/不利因素：

*   如果您使用字符串，则需要跟踪您的属性名称 - 编译器不会为您执行此操作！这个问题可以通过使用枚举作为键来缓解，但是你会失去一些灵活性......
*   您没有获得静态类型检查的好处，因此您可能会发现需要编写更多的 JUnit 测试以确保一切正常
*   有轻微的性能开销（尽管可能不足以担心，因为地图查找非常快）

实际上，我在 90 年代使用这个对象模型 ( [Tyrant](http://sourceforge.net/projects/tyrant/) ) 的变体编写了一个完整的游戏，并且效果很好。

但是，您可能需要考虑封装此功能，以便您可以在对象本身上使用访问器方法，而不是暴露 Map 对象，例如

```
String id = account.getProperty("userId"); 
```

# django - 如何获取多项选择列表

> ID：10646529
> 
> 赞同：0
> 
> 时间：2012-05-18T04:01:51.627
> 
> 标签：django, django-forms, django-templates, django-views

我在渲染模板变量时遇到问题，例如`{{ profile.speciality }}` 导致`[u'pediatrics']`网页出现的问题，我真正想要的是简单的 `pediatrics`. 数据来自`MultipleChoiceField`一个`CheckboxSelectMultiple` 小部件，因为用户应该能够选择多个选项。

然后我习惯`request.POST.getlist('speciality')`将数据填充到模型实例中，例如：

```
user_profile = UserProfile(speciality=request.POST.getlist('speciality')) 
```

我也尝试在模板中进行迭代，`{{ profile.speciality }}`但我得到的是字符串迭代而不是列表迭代。

我是一个绝对的初学者，我没有编程经验，如果我做了任何愚蠢的事情，请原谅我，迫切需要帮助，尽我所能。

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T12:56:30.140

您可以使用它来呈现 MultipleChoiceField

```
{% for speciality in profile.speciality.all %}
    {{ speciality }}
{% endfor %} 
```

# go - Golang 条件编译

> ID：10646531
> 
> 赞同：51
> 
> 时间：2012-05-18T04:02:01.300
> 
> 标签：go, build, go-build

我在 Go 1 中遇到了条件编译问题。

这是我的测试代码。我对“// +build”约束和“-tags”标志有什么误解吗？

main1.go

```
// +build main1
package main

import (
    "fmt"
)

func main() {
    fmt.Println("This is main 1")
} 
```

main2.go

```
// +build main2
package main

import (
    "fmt"
)

func main() {
    fmt.Println("This is main 2")
} 
```

运行“go build”时，仍然出现编译错误

```
$ go build -tags 'main1'
# test
./main2.go:8: main redeclared in this block
        previous declaration at ./main1.go:8 
```

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2012-05-18T09:00:43.370

您必须在后面`// +build XXX`加上一个空行。

在我的简短搜索中，我找不到在哪里/是否记录了这一点。但[消息来源](https://code.google.com/p/go/source/browse/src/pkg/go/build/build.go?r=2449e85a115014c3d9251f86d499e5808141e6bc#790)明确指出

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-12-02T21:18:04.637

对，你必须留一个空行，不是正好在之后`// +build XXX`而是之前，`package main`因为声明包的行之前的所有注释行都被认为是包的描述，并由`godoc`.

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-06-16T15:59:10.200

> [包构建](http://golang.org/pkg/go/build/)
> 
> 构建约束
> 
> 构建约束是一个以指令开头的行注释，该指令 `+build`列出了文件应包含在包中的条件。约束可以出现在任何类型的源文件中（不仅仅是 Go），但它们必须出现在文件顶部附近，前面只能有空行和其他行注释。
> 
> 为了将构建约束与包文档区分开来，一系列构建约束必须后跟一个空行。

在构建约束后添加一个空行。例如，

```
// +build main1

package main

import (
    "fmt"
)

func main() {
    fmt.Println("This is main 1")
} 
```

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2021-06-11T12:42:16.080

从 Go 1.17 开始，条件构建标签能够使用`//go:build`支持布尔表达式的行而不是旧`// +build`行。

### 主要改进

*   `//go:build`注释格式与其他 go 指令一致，如`//go:embed`, `//go:generate`,`//go:noinline`等。
*   构建标签之间的布尔表达式的语法现在已经标准化，使用`&&`和`||`运算符

### 语法比较

| 表达 | `// +build` | `//go:build` |
| --- | --- | --- |
| 或者 | `// +build foo bar`（空格分隔） | `//go:build foo &#124;&#124; bar` |
| 和 | `// +build foo,bar` | `//go:build foo && bar` |
| 非（不变） | `// +build !foo` | `//go:build !foo` |

### 多行注释

更复杂的布尔表达式可以使用括号，而在它之前需要多行注释：

从：

```
// +build foo bar
// +build 386 
```

到：

```
//go:build (foo || bar) && 386 
```

此外，`//go:build`现在不允许使用超过一行的多个指令。

### 自动格式化

此外，`go fmt`在带有`// +build`指令的源文件上运行将自动添加匹配`//go:build`的。

> 如果文件只包含 // +build 行，gofmt 将在它们上方添加一个等效的 //go:build 行。

* * *

资料来源：[Go 1.17 构建约束草案设计](https://golang.org/design/draft-gobuild)。（即使 Go 1.17 正式发布，目前仍然是一个草案）

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-05-23T05:26:28.330

从[构建约束](http://golang.org/pkg/go/build/)文档：

> 为了将构建约束与包文档区分开来，一系列构建约束必须后跟一个空行。

# objective-c - 根据双精度值排序 NSmutable 数组包含对象

> ID：10646532
> 
> 赞同：0
> 
> 时间：2012-05-18T04:02:09.637
> 
> 标签：objective-c, arrays, cocoa, nsmutablearray, sql-order-by

我想`NSMutableArray`根据两个对象属性订购包含对象，其中一个具有`double`类型，第二个具有`NSString`？

我尝试使用此方法，但出现异常：

```
NSString * LASTNAME = @"lastName";
NSString * GRADE = @"grade";

NSSortDescriptor *lastDescriptor =
    [[NSSortDescriptor alloc]
        initWithKey:LASTNAME
          ascending:YES
           selector:@selector(localizedCaseInsensitiveCompare:)];

NSSortDescriptor *firstDescriptor =
    [[NSSortDescriptor alloc]
        initWithKey:GRADE
          ascending:YES
           selector:@selector(localizedCaseInsensitiveCompare:)]];

NSArray * descriptors =
   [NSArray arrayWithObjects:lastDescriptor, firstDescriptor, nil];
NSArray * sortedArray =
   [students sortedArrayUsingDescriptors:descriptors];

@interface Student : NSObject
{
    NSString * firstName;
    NSString * lastName;
    double grade;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T04:10:40.367

NSNumber 不响应`localizedCaseInsensitiveCompare:`。你想要的只是简单`compare:`的数字。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T04:10:35.507

数字没有大小写，尝试使用 compare: for GRADE

编辑后：你没有说你得到了什么错误。您发布的代码甚至编译了吗？您的 firstDescriptor 中有错字——方法末尾的“]”太多了。当您取出比较时，您可能已经解决了这个问题：（不应该解决任何问题）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T05:21:09.507

删除localizedCaseInsensitiveCompare

```
NSSortDescriptor *firstDescriptor =
    [[NSSortDescriptor alloc]
        initWithKey:GRADE
          ascending:YES]]; 
```

# c - 在 Fedora 中创建大量线程时 pthread_join 出现分段错误

> ID：10646535
> 
> 赞同：0
> 
> 时间：2012-05-18T04:02:33.873
> 
> 标签：c, multithreading, segmentation-fault, fedora

我尝试多线程快速排序，如下面的代码。我使用函数 median3 来查找枢轴，CUTOFF 定义如何通过 InsertionSort 对小数组进行排序。这个 QuickSort 可以使用数组有 1000 个元素，但是当我将数组增加到 10.000 个元素时，我在 pthread_join() 处得到“分段错误”。我在 Fedora 16 上编码，符合 gcc

```
void *q_sort( q_sort_input *input ) {

int *a; int left; int right;
a = input->a;
left = input->left;
right  = input->right;
int i, j;
int pivot;
if (left + CUTOFF < right) {   
    pthread_t thread1, thread2;
           pivot = median3( a, left, right );
    i = left - 1; 
    j = right - 1;         
    #ifdef DEBUG
    int k;
    for (k = 0; k<lenght; k++) printf("%d ",a[k]);
    printf("\n");
    printf("left:%d right:%d pivot:%d \n",left,right,pivot);
    #endif      
    for (;;) {
        while (a[++i] < pivot ); 
        while (a[--j] > pivot ) ; 
        if (i < j) {swap( &a[i], &a[j] );}
        else  break;

    }
    swap( &a[i], &a[right - 1] );        
    #ifdef DEBUG

    for (k = 0; k<lenght; k++) printf("%d ",a[k]);
    printf("\n \n");
    #endif
    q_sort_input*input1= malloc(sizeof(q_sort_input));
    input1->a = a;
    input1->left = left;
    input1->right =  i-1;
    input1->n = input->n;
    pthread_create(&thread1, NULL, q_sort, (void*)input1 );

    q_sort_input*input2= malloc(sizeof(q_sort_input));
    input2->a = a;
    input2->left = i+1;
    input2->right = right;
    input2->n = input->n;
    pthread_create(&thread2, NULL, q_sort, (void*)input2 );
    void *end;
    if (thread1 != NULL) pthread_join(thread1,&end);
    if (thread2 != NULL) pthread_join(thread2,&end);
    free(input1);
    free(input2);
}
else InsertionSort(a, left,right);

} 
```

# weka - 使用 WEKA 时找出错误分类的实例

> ID：10646536
> 
> 赞同：6
> 
> 时间：2012-05-18T04:02:37.517
> 
> 标签：weka

我正在使用 WEKA 的 GUI 版本，并且正在使用朴素贝叶斯进行分类。谁能告诉我如何找出哪些实例被错误分类。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-18T18:00:58.013

1.  转到 Weka 资源管理器中的分类选项卡
2.  点击更多选项...
3.  检查输出预测
4.  点击确定

希望有帮助。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-06-11T10:30:34.777

我之前也遇到过同样的问题，现在我解决得很好。我所做的是以下内容：

1.  创建一个字符串属性，为每个实例分配一个唯一 ID。我已将文档的名称分配给我的每个实例。
2.  生成 WEKA 支持的 .arff 文件。
3.  每当您必须对此 .arff 数据运行分类器时，您会注意到您必须排除 Instance ID 属性。如果不这样做，Weka 会弹出一个错误，说分类器无法处理 String 属性。不是排除，而是在 InstanceID 上运行过滤器 StringToNominal。
4.  现在，正如@Rushdi 所说，单击分类选项卡上的“更多选项”。
5.  在“分类器评估选项”弹出窗口中检查输出预测。
6.  在“输出附加属性”框中输入实例 ID 的属性编号。
7.  对整个数据运行分类器，不包括 Instance ID 属性。（大多数分类器在“Ranker”中将其作为一个名为“StartSet”的选项，例如我与 SMO 分类器一起使用。）
8.  如果到目前为止您已正确完成所有操作，您将看到列出的所有实例以及它们的真实和预测输出值，以及可以准确告诉您哪些文档被错误分类的实例 ID。

希望这可以帮助某人。祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T04:08:43.217

在您的输出中应该有一个带有数字和百分比的错误分类部分，应该就是这样。[此图像](http://i.imgur.com/pWNa0.png)中的红色框就是您要查找的内容。**编辑：**[这里的](http://weka.sourceforge.net/explorer_screenshots/ClassifyPanel.png)原始图像源

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-11-28T16:50:22.583

这对我有用：

1.  反编译官方weka.jar
2.  在库中搜索您要测试的分类，了解它是如何工作的，并确定哪些实例被错误分类。

# xcode4 - 有没有办法从 Xcode 4 复制/粘贴错误或警告消息？

> ID：10646537
> 
> 赞同：9
> 
> 时间：2012-05-18T04:02:40.603
> 
> 标签：xcode4

假设我在 Xcode 中有一些编译器错误。假设我想在 Stack Overflow 上询问这些错误。

我该怎么做？我必须阅读警告信息并输入吗？

很多人询问确切的错误而没有拼写错误；我敢打赌，有一种方法可以复制和粘贴这些错误。它是什么？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-05-18T04:13:51.233

我想你可以如何：

1) Cmd + 4\. 打开问题导航器

2) 单击“按类型”按警告和错误问题排序

3）然后找到你的错误，然后右键单击并复制

4）剪贴板中的错误消息，您可以将其粘贴到任何地方

希望这对你有帮助

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-18T04:06:32.957

按 cmd+7 进入 Log navigator，选择最后一个构建日志，找到你的错误信息，右键复制。

# c# - 如果移动到其他屏幕，WPF MediaElement 将停止播放

> ID：10646543
> 
> 赞同：10
> 
> 时间：2012-05-18T04:03:27.623
> 
> 标签：c#, wpf, mediaelement, multiscreen

我在使用 MediaElement 时遇到了一个非常奇怪的问题，似乎与多屏幕环境有关：偶尔（我无法每次都复制问题）当我将它所在的窗口从一个屏幕拖到另一个屏幕时，MediaElement 停止播放。这种奇怪的行为也发生在一个非常基本的代码中，例如：

```
public MainWindow()
{
    InitializeComponent();
}

protected override void OnSourceInitialized(EventArgs e)
{
    media.Play();
    base.OnSourceInitialized(e);
} 
```

和

```
<Window x:Class="Test.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">
    <Grid>
        <MediaElement LoadedBehavior="Manual" 
                      Name="media" 
                      Source="C:\Users\Maurizio\Desktop\Pulp Fiction.avi"/>
    </Grid>
</Window> 
```

有没有人经历过（并最终解决了）任何类似的问题？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-18T16:11:47.503

我找到了一种解决方法，在窗口渲染中禁用硬件加速似乎可以解决问题：

```
using System.Windows.Interop;
...

    protected override void OnSourceInitialized(EventArgs e)
    {
        HwndSource hwndSource = PresentationSource.FromVisual(this) as HwndSource;
        HwndTarget hwndTarget = hwndSource.CompositionTarget;
        hwndTarget.RenderMode = RenderMode.SoftwareOnly;
        media.Play();
        base.OnSourceInitialized(e);
    } 
```

我无法察觉性能上有任何差异，并且在任何测试中都没有出现问题...

# perl - 不应该访问@Whatever::whatever 至少产生一个警告而不是一个空数组？

> ID：10646551
> 
> 赞同：10
> 
> 时间：2012-05-18T04:05:16.110
> 
> 标签：perl, variables

在以下代码中：

```
use strict;
use warnings;
use Data::Dumper;

my %hash = %Whatever::whatever;
my @array = @Whatever::whatever;
print Dumper \@array;
print Dumper \%hash; 
```

我的理解是 @Whatever::whatever 正在访问符号表，并且不会产生错误消息，因为符号表是一个散列。但是为什么访问不存在的元素时至少没有警告消息呢？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-18T04:39:25.480

因为在 Perl 中几乎不可能捕获处于不存在状态的全局变量。只要你提到一个名字——即使只是为了引用它——它就存在。而且因为数组和散列不同于标量；一个标量存在保存 value `undef`，当用于大多数目的时会触发“使用未初始化的值”警告；但是数组和散列以*空*数组和散列的形式存在，空数组或散列不足以引起警告！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T14:08:36.890

*（改编/从评论迁移）*

相反，我会说它标识了一个在包中`@Whatever::whatever`命名的动态范围数组，而不是它“访问符号表...... [有点像]哈希”。`@whatever``Whatever`

像这样的合格标识符总是避免限制（参见文档[`strict 'vars'`](http://perldoc.perl.org/strict.html#strict-vars)）。

# data-binding - knockout.js 模态绑定值更新

> ID：10646553
> 
> 赞同：1
> 
> 时间：2012-05-18T04:05:29.743
> 
> 标签：data-binding, knockout.js

我在这个 jsFiddle 中有以下代码。

我遇到的问题是我的子项目没有正确更新。

我可以在出现问题时单击“编辑用户”并查看数据更改，但是当我尝试添加注释或即使我要编写编辑注释功能时，数据也无法正确绑定

[http://jsfiddle.net/jkuGU/10/](http://jsfiddle.net/jkuGU/10/)

```
<ul data-bind="foreach: Users">
<li>
    <span data-bind="text: Name"></span>   
    <div data-bind="foreach: notes">
        <span data-bind="text: text"></span>
        <a href="#" data-bind="click: $parent.editNote">Edit Note</a>
    </div>
    <a href="#" data-bind="click: $parent.addNote">Add Note</a>
     <a href="#" data-bind="click: $parent.EditUser">Edit user</a>
</li>
</ul>

    <div id="userModal" data-bind="with: EditingUser" class="fade hjde modal">
        <div class="modal-header">
            <a class="close" data-dismiss="modal">×</a>
            <h3>
                Editing user</h3>
        </div>
        <div class="modal-body">
            <label>
                Name:</label>
            <input type="text" data-bind="value: Name, valueUpdate: 'afterkeydown'" />
        </div>
        <div class="modal-footer">
             <a href="#" class="btn btn-primary">Save changes</a>
        </div>
    </div>

<div id="addJobNoteModal" data-bind="with: detailedNote" class="fade hjde modal">
        <div class="modal-header">
            <a class="close" data-dismiss="modal">×</a>
            <h3>
                Editing Note</h3>
        </div>
        <div class="modal-body">
            <label>
                Text:</label>
            <input type="text" data-bind="value: text, valueUpdate: 'afterkeydown'" />
        </div>
        <div class="modal-footer">
             <a href="#" class="btn btn-primary" data-dismiss="modal">Save changes</a>
        </div>
    </div>
​

function Note(text) {
    this.text = text;
}

var User = function(name) {
    var self = this;
    self.Name = ko.observable(name);
    this.notes = ko.observableArray([]);
}

var ViewModel = function() {
    var self = this;
    self.Users = ko.observableArray();

    self.EditingUser = ko.observable();
    self.detailedNote = ko.observable();
    self.EditUser = function(user) {
        self.EditingUser(user);
        $("#userModal").modal("show");
    };

    this.addNote = function(user) {
        var note= new Note("original")
        self.detailedNote(note);
        $("#addJobNoteModal").find('.btn-warning').click(function() {
            user.notes.push(note);
            $(this).unbind('click');
        });

        $("#addJobNoteModal").modal("show");
    }

    for (var i = 1; i <= 10; i++) {
        self.Users.push(new User('User ' + i));
    }
}

ko.applyBindings(new ViewModel());​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T04:27:19.130

改变这个：

```
 $("#addJobNoteModal").find('.btn-warning').click(function() { 
```

对此：

```
 $("#addJobNoteModal").find('.btn-primary').click(function() { 
```

你的目标是错误的按钮:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T14:07:49.967

我认为问题毕竟是您必须在表单输入/文本区域中绑定到“值：”而不是“文本：”。

# java - Jetty 和 Scala 与 SBT 的部署策略？

> ID：10646558
> 
> 赞同：1
> 
> 时间：2012-05-18T04:06:08.407
> 
> 标签：java, scala, jetty, sbt

我想让 Jetty 在生产服务器上运行，当我有一个新的代码包要部署时，我希望能够做一个“sbt 包”来将我的代码打包成一个 war 文件，然后将它复制过来到生产机器的 webapp 文件夹。

这合理吗？如果是这样，启动 Jetty 作为守护进程的最佳方式是什么？它会看到新文件并自动重新加载我的应用程序还是我需要以某种方式重新启动它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T04:28:17.700

您所建议的主要问题是让**服务器侦听或监视 webapps 文件夹所需的配置是生产命中。**

虽然这种类型的配置非常适合开发，**但不建议用于生产应用程序。**

话虽如此，您正在寻找的是一个 ContextDeployer，它可以在 jetty.xml 中进行配置。有关详细信息，请参阅特定版本的 Jetty 的 Jetty 文档：

```
<!-- =========================================================== -->
<!-- Configure the context deployer                              -->
<!-- A context deployer will deploy contexts described in        -->
<!-- configuration files discovered in a directory.              -->
<!-- The configuration directory can be scanned for hot          -->
<!-- deployments at the configured scanInterval.                 -->
<!--                                                             -->
<!-- This deployer is configured to deploy contexts configured   -->
<!-- in the $JETTY_HOME/contexts directory                       -->
<!--                                                             -->
<!-- =========================================================== -->
<Call name="addLifeCycle">
  <Arg>
    <New class="org.mortbay.jetty.deployer.ContextDeployer">
      <Set name="contexts"><Ref id="Contexts"/></Set>
      <Set name="configurationDir"><SystemProperty name="jetty.home" default="."/>/contexts</Set>
      <Set name="scanInterval">5</Set>
    </New>
  </Arg>
</Call> 
```

“scanInterval”告诉服务器监视上下文文件夹。每 5 秒，它会检查文件是否更改。

最后，要将 Jetty 作为守护程序启动，只需使用它们在 /bin 文件夹中为您提供的脚本：

```
./jetty.sh start 
```

要停止 Jetty，请运行：

```
./jetty.sh stop 
```

并重新启动 Jetty，运行：

```
./jetty.sh restart 
```

同样，请参阅[The Jetty 文档](http://docs.codehaus.org/display/JETTY/Jetty+Wiki)或[The Webtide 网站](https://www.webtide.com/)，了解您正在运行的任何版本的 Jetty 的确切文档。就服务器的配置方式而言，不同的版本可能会有很大的不同。

# apache - 在 Apache 404 页面上保存 .htaccess 文件的位置

> ID：10646559
> 
> 赞同：1
> 
> 时间：2012-05-18T04:06:14.347
> 
> 标签：apache, .htaccess, amazon-ec2, custom-errors, file-not-found

我有一个在 Amazon EC2 上运行的 Apache Web 服务器，我正在尝试制作一个自定义的 404 页面，但我希望它在请求输入错误或错误的 URL 时弹出。这是我的 .htaccess 代码

```
ErrorDocument 404 /404.html 
```

我将 .htaccess 文件保存在 /var/www/html 目录中。难道我做错了什么？因为当我输入错误的 url 时，默认的 Apache 404 错误会不断弹出，我不希望它把访问者赶走。这可能吗？**谢谢！！！**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T04:12:09.120

确认 AllowOverride 指令在您的 httpd.conf 中设置为 All，

其次 .htaccess 应保存在代码的根目录中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T06:46:46.777

我想到了。我使用了相同的代码：

`ErrorDocument 404 /404.html`

但是，我没有将它放在我的 .htaccess 文件中，该文件从未起作用，而是将相同的代码放在我在目录下找到的 httpd.conf 文件中。`/etc/httpd/conf/httpd.conf`感谢您的所有帮助！

# c#-4.0 - IRONPYTHON NET4，嵌入式，传递类对象而不是值

> ID：10646561
> 
> 赞同：-1
> 
> 时间：2012-05-18T04:06:24.893
> 
> 标签：c#-4.0, .net-4.0, ironpython

我有 python 代码，它保存到 test.py

```
def Process():
   list1 = [1, 2, 3]                       #list object                    
   return list1 
```

我也有 C# 代码

```
 List<int> list1 = new List<int>(new int[3]);
        var runtime = Python.CreateRuntime();
        dynamic test = runtime.UseFile(m_sFilename);
        var list2 = test.Process();
        list1 = (List<int>)list2;           << Error
        /*
        list1[0] = list2[0];  // this code works fine but need how to
        list1[1] = list2[1];
        list1[2] = list2[2];
        */ 
```

当我运行它时，我得到 RuntimeBinderException 未处理

> > > 无法将类型“IronPython.Runtime.List”转换为“System.Collections.Generic.List”

如何解决这个问题？

另外如何将列表传递给Python？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T16:11:45.580

有两种方法可以解决这个问题：

1.  保留 python “vanilla”（没有 .net/IronPython 特定代码，可能是必需的）：

这为您提供了以下 python 脚本：

```
def Process(list):
    list1 = [1, 2, 3] #list object
    return list1 + list # concatenate lists 
```

和 C# 代码（请注意如何转换为`IList<object>`然后仅使用 LINQ 在 .net 中进行进一步处理。根据数据/用例的数量，您也可以继续使用 IronPython 运行时返回的 IList。）：

```
var m_sFilename = "test.py";
var list = new IronPython.Runtime.List();
list.append(4);
list.append(5);
list.append(6);

var runtime = Python.CreateRuntime();
dynamic test = runtime.UseFile(m_sFilename);
var resultList = test.Process(list);

var dotNetList = ((IList<object>)resultList).Cast<int>().ToList(); 
```

1.  在您的界面/python 代码中使用 .net 类型：

这会将您的 python 代码更改为：

```
import clr
clr.AddReference("System.Core")
import System
clr.ImportExtensions(System.Linq)
from System.Collections.Generic import List

def ProcessDotNetStyle(list):
    list1 = List[int]([1, 2, 3])
    return list1.Union(list).ToList() 
```

你的 C# 看起来像

```
var dotNetList = new List<int>(new[] { 4, 5, 6 });
dotNetList = test.ProcessDotNetStyle(dotNetList); 
```

# ios - ios storyboard tabbar > ViewController > TableView

> ID：10646567
> 
> 赞同：0
> 
> 时间：2012-05-18T04:07:09.323
> 
> 标签：ios, tableview, tabbar, viewcontroller

我想创建以下导航

我有一个带有情节提要的标签栏程序，当我单击按钮时，我有一个带有按钮的视图控制器调用导航控制器

现在我已经建立了所有连接并且一切正常但是..为了创建从按钮到表格视图的更改，我正在使用模态 segue 并且删除了我的标签栏。我知道推送不会起作用，因为它不是导航，但我怎么能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T08:48:49.873

我遇到了同样的问题，但我意识到最好的选择是使用 push segue。这是最好的选择，因为当您将表格视图放入选项卡栏项目时，它的可用性更高，这是客户想要的。很抱歉没有解决您的问题，但我强烈建议您使用 push。

# jsp - RequestDispatcher#forward 不只是渲染一个页面？

> ID：10646569
> 
> 赞同：1
> 
> 时间：2012-05-18T04:07:50.997
> 
> 标签：jsp, jakarta-ee, servlets, rendering

在我的 web.xml 中，我设置了一个像

```
<servlet>
    <servlet-name>forward</servlet-name>
    <servlet-class>test.Forward</servlet-class>
</servlet>
<servlet-mapping>
    <servlet-name>forward</servlet-name>
    <url-pattern>/f/*</url-pattern>
</servlet-mapping> 
```

`test.Forward#doGet`被实现为

```
protected void doGet(HttpServletRequest req, HttpServletResponse resp)
        throws ServletException, IOException {
    req.getRequestDispatcher("target.jsp").forward(req, resp);
} 
```

访问**localhost:8080/project/f/anypath**时，由于堆栈溢出错误，服务器崩溃。

似乎对**/f/target.jsp**`RequestDispatcher#forward`设置了另一个请求，然后再次调用，然后再次调用。我不知何故误解了我认为它只是渲染一个页面。**`test.Forward#doGet``RequestDispatcher#forward`**

 **那么，有没有只渲染 JSP 的方法呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T04:11:27.473

您的 servlet 路径是 /f/*，并且您正在重定向到该路径上的文件，很可能是无意的：

```
/f/target.jsp 
```

结果，这将创建一个无限循环，因为您的 servlet 不断地一次又一次地调用自己。

如果您想重定向到 JSP，我假设它位于另一个文件夹中，例如 /jsp/target.jsp 位置？如果是这样，请确保包含完整路径：

```
req.getRequestDispatcher("/jsp/target.jsp").forward(req, resp); 
```

当您省略 时`/`，请求将相对于当前 requestURI 进行转发。**

# events - 如何在 Meteor 中处理自定义 jQuery 事件？

> ID：10646570
> 
> 赞同：7
> 
> 时间：2012-05-18T04:07:58.777
> 
> 标签：events, meteor

在 Metor 0.3.5 中，当所有事件都是 jQuery 事件时，我可以使用[jQuery UI Draggable](http://jqueryui.com/demos/draggable/)，然后使用 Metor[事件映射处理](http://docs.meteor.com/#eventmaps)[`drag`&`dragstop`事件](http://jqueryui.com/demos/draggable/#events)：

```
Template.game.events['dragstop .card'] = function (e) {
    //stuff
}; 
```

但我刚刚在 Meteor 邮件列表中读到了这个：

> 在 0.3.6 中，事件映射不再依赖于 jQuery

果然，上述技术似乎不再起作用——我的`dragstop`处理程序现在根本没有被调用。

对于如何在 0.3.6 中实现相同效果的任何建议，我将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-11-18T23:00:12.723

如今，您可以简单地使用身体事件以“流星”方式完成此操作：

```
Template.body.events({
    'dragstop #somedivid': function(e) {
        // Do stuff
    }
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-24T04:23:59.377

自定义 jQuery 事件可以与普通的旧 jQuery 绑定，完全绕过[事件映射](http://docs.meteor.com/#eventmaps)：

```
$(function () {
    $('body').on('dragstop', '.card', function (e) {
        //stuff
    });
}); 
```

请记住使用 jQuery 的[`on`](http://api.jquery.com/on/)函数来绑定处理程序，因为模板元素不一定总是包含在 DOM 中。

# c# - 如何在 Windows 应用程序中显示进度条？

> ID：10646575
> 
> 赞同：2
> 
> 时间：2012-05-18T04:08:46.113
> 
> 标签：c#, winforms, progress-bar

我正在使用 c# 开发一个 Windows 应用程序。

我有一个表单和一个包含所有方法的类。

我在类中有一个方法，我在其中处理 arraylist 中的一些文件。我想为此文件处理调用进度条方法，但它不起作用。

任何帮助

PFB 我的代码片段：

```
public void TraverseSource()
{
    string[] allFiles1 = Directory.GetFiles(sourcePath, "*.xml", SearchOption.AllDirectories);

    var allFiles = new ArrayList();
    var length = allFiles.Count;
    foreach (string item in allFiles1)
    {
        if (!item.Substring(item.Length - 6).Equals("MD.xml"))
        {
            allFiles.Add(item);

            // Here i want to invoke progress bar which is in form
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-18T04:15:22.783

您将需要使用[BackgroundWorker](http://msdn.microsoft.com/en-us/library/cc221403%28v=vs.95%29.aspx)组件，其中`DoWork`处理程序包含您的实际工作（`string[] allFiles1`部分及其他）。它看起来像这样：

```
public void TraverseSource()
{
    // create the BackgroundWorker
    var worker = new BackgroundWorker
                       {
                          WorkerReportsProgress = true
                       };

    // assign a delegate to the DoWork event, which is raised when `RunWorkerAsync` is called. this is where your actual work should be done
    worker.DoWork += (sender, args) => {
       string[] allFiles1 = Directory.GetFiles(sourcePath, "*.xml", SearchOption.AllDirectories);

        var allFiles = new ArrayList();

        foreach (var i = 0; i < allFiles1.Length; i++)
        {
            if (!item.Substring(item.Length - 6).Equals("MD.xml"))
            {
                allFiles.Add(item);
                // notifies the worker that progress has changed
                worker.ReportProgress(i/allFiles.Length*100);
            }
        }
    };
    // assign a delegate that is raised when `ReportProgress` is called. this delegate is invoked on the original thread, so you can safely update a WinForms control
    worker.ProgressChanged += (sender, args) => {
       progressBar1.Value = args.ProgressPercentage;
    };

    // OK, now actually start doing work
    worker.RunWorkerAsync();

} 
```

# wifi - iPhone应用程序在超出wifi连接范围时冻结？

> ID：10646578
> 
> 赞同：0
> 
> 时间：2012-05-18T04:09:04.867
> 
> 标签：wifi, freeze

我开发了一个无线电应用程序，它使用网络连接进行在线流媒体，并且我正在检查网络是否可用的情况。如果没有网络连接，它会显示一个警报“他们没有可用的网络”。我的代码在这里

```
 - (void)viewDidLoad
  {
  [super viewDidLoad];

  //checking network reachability statys, this will show one alert view if no network available
    Reachability* reachabile = [Reachability reachabilityWithHostName:@"www.apple.com"];
    NetworkStatus remoteHostStatus = [reachabile currentReachabilityStatus];

   if(remoteHostStatus == NotReachable) 
    {

    NSLog(@"not reachable");
       UIAlertView *notReachableAlert1=[[UIAlertView alloc]initWithTitle:@"NO INTERNET  CONNECTION" message:@"This Application Need Internet To Run" delegate:self cancelButtonTitle:@"Okay Buddy" otherButtonTitles:nil];
    notReachableAlert1.delegate=self;
     [notReachableAlert1 show];
     [notReachableAlert1 release];

    }

    [[NSNotificationCenter defaultCenter] addObserver:self 
                                         selector:@selector(moviePlayerPlaybackStateDidChange:) 
                                             name:MPMoviePlayerPlaybackStateDidChangeNotification 
                                           object:nil];

    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(moviePlayerLoadStateChanged:) name:MPMoviePlayerLoadStateDidChangeNotification object:player];

    // Do any additional setup after loading the view from its nib.
  } 
```

我也检查了通知的条件

```
 -(void) moviePlayerPlaybackStateDidChange:(NSNotification*)notification 
  {
  Reachability* reachabile = [Reachability reachabilityWithHostName:@"www.apple.com"];
  NetworkStatus remoteHostStatus = [reachabile currentReachabilityStatus];

  NSLog(@"playbackDidChanged");

  MPMoviePlayerController *moviePlayer = notification.object;
  player=notification.object;
  MPMoviePlaybackState playbackState = moviePlayer.playbackState;
   if(playbackState == MPMoviePlaybackStateStopped) 
     {
      NSLog(@"MPMoviePlaybackStateStopped");

   }
   else if(playbackState == MPMoviePlaybackStatePlaying) {
    NSLog(@"MPMoviePlaybackStatePlaying");

} else if(playbackState == MPMoviePlaybackStatePaused) {
    NSLog(@"MPMoviePlaybackStatePaused");

    if(remoteHostStatus == NotReachable) 
    {

          NSLog(@"not reachable");
          UIAlertView *notReachableAlert1=[[UIAlertView alloc]initWithTitle:@"NO INTERNET CONNECTION" message:@"This Application Need Internet To Run" delegate:self cancelButtonTitle:@"Okay Buddy" otherButtonTitles:nil];
        notReachableAlert1.delegate=self;
        [notReachableAlert1 show];
        [notReachableAlert1 release];

      }
 } else if(playbackState == MPMoviePlaybackStateInterrupted) 
    {
    NSLog(@"MPMoviePlaybackStateInterrupted");

    if((remoteHostStatus == NotReachable)&&(remoteHostStatus != ReachableViaWiFi)) 
    {

          NSLog(@"not reachable");
          UIAlertView *notReachableAlert1=[[UIAlertView alloc]initWithTitle:@"NO INTERNET CONNECTION" message:@"This Application Need Internet To Run" delegate:self cancelButtonTitle:@"Okay Buddy" otherButtonTitles:nil];
        notReachableAlert1.delegate=self;
        [notReachableAlert1 show];
        [notReachableAlert1 release];

     } 
```

我的问题是，当应用程序在没有 3g 和正常数据连接的情况下超出 wifi 连接范围时，它会冻结一段时间。当我回到范围时，它会进入活动状态并显示警报。

我对网络可用性检查做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T06:26:37.907

这是您可以根据您的应用程序编辑的示例

```
@class Reachability;

@interface urAppDelegate : NSObject <UIApplicationDelegate> 
{

        Reachability* internetReachable;

        Reachability* hostReachable;

        BOOL   hostActive;

        BOOL   internetActive; 

}

@property (nonatomic, assign) BOOL hostActive;

@property (nonatomic, assign) BOOL internetActive;
@end

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions{

    self.internetActive=NO;
    self.hostActive=NO;
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(checkNetworkStatus:) name:kReachabilityChangedNotification object:nil];

    internetReachable = [[Reachability reachabilityForInternetConnection] retain];
    [internetReachable startNotifier];

    // check if a pathway to a random host exists
    hostReachable = [[Reachability reachabilityWithHostName: @"www.apple.com"] retain];
    [hostReachable startNotifier];

    // now patiently wait for the notification

 [self.window makeKeyAndVisible];
    return YES;
}

-(void) checkNetworkStatus:(NSNotification *)notice{
    NetworkStatus internetStatus = [internetReachable currentReachabilityStatus];

    switch (internetStatus)
    {
        case NotReachable:
        {
            NSLog(@"The internet is down.");
            self.internetActive = NO;            
            break;
        }
        case ReachableViaWiFi:
        {
            NSLog(@"The internet is working via WIFI.");
            self.internetActive = YES;

            break;
        }
        case ReachableViaWWAN:
        {
            NSLog(@"The internet is working via WWAN.");
            self.internetActive = YES;            
            break;
        }
    }

    NetworkStatus hostStatus = [hostReachable currentReachabilityStatus];
    switch (hostStatus)
    {
        case NotReachable:
        {
            NSLog(@"A gateway to the host server is down.");
            self.hostActive = NO;            
            break;
        }
        case ReachableViaWiFi:
        {
            NSLog(@"A gateway to the host server is working via WIFI.");
            self.hostActive = YES;

            break;
        }
        case ReachableViaWWAN:
        {
            NSLog(@"A gateway to the host server is working via WWAN.");
            self.hostActive = YES;
            break;
        }
    }

    if (internetActive && hostActive)
    {       
        // Net work Available.......

    }
    else
    {
        UIAlertView *netWorkAlert=[[UIAlertView alloc]initWithTitle:@"Network Connection Error" message:@"Please Check Connection" delegate:nil cancelButtonTitle:@"Close" otherButtonTitles:nil, nil];
        [netWorkAlert show];
        [netWorkAlert release];
    }

} 
```

# asp.net-mvc - 属性路由不起作用

> ID：10646580
> 
> 赞同：2
> 
> 时间：2012-05-18T04:09:25.857
> 
> 标签：asp.net-mvc, asp.net-mvc-3, model-view-controller, routing

我把`[AttributeRouting.Web.Mvc.Route("faq.html")]`我的行动常见问题解答。

但是，当我去

```
localhost/faq.html 
```

我收到 404 http not found 错误，并且在 localhost/routes.axd 中找不到我的自定义路由。

我怎样才能解决这个问题 ？

谢谢 ！

更新：这是我的常见问题解答

```
 [OutputCache(Duration = 120)]
    [AttributeRouting.Web.Mvc.Route("faq.html")]
    public virtual ActionResult FAQ(int id = 0){
        //some code here 
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T14:08:56.090

试试下面的代码：

```
[OutputCache(Duration = 120)]
[AttributeRouting.Web.Mvc.Route("faq.html/{id?}")]
public virtual ActionResult FAQ(int id = 0){
    //some code here 
} 
```

或从常见问题解答方法中删除“id”参数。

[AttributeRouting 说明](https://github.com/mccalltd/AttributeRouting/wiki/Optional-Route-Parameters)

# windows - 如何在windows中安装pfa字体

> ID：10646583
> 
> 赞同：0
> 
> 时间：2012-05-18T04:09:38.143
> 
> 标签：windows, windows-7, fonts

我已经从 pdf 中提取了字体，但它们的扩展名为

> 字体.pfa

我怎样才能安装这些字体

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T04:28:23.357

PFA 代表打印机字体 Ascii。PFB 代表打印机字体二进制。

[后记字体的维基百科](http://en.wikipedia.org/wiki/PostScript_fonts#Windows_support)建议 Windows 不支持 PFA，但支持 PFB。

因此，尝试将您的 PFA 转换为 PFB，可能使用[https://onlinefontconverter.com](https://onlinefontconverter.com)

# javascript - 垂直手风琴菜单溢出问题

> ID：10646585
> 
> 赞同：0
> 
> 时间：2012-05-18T04:09:45.710
> 
> 标签：javascript, css, accordion

我使用了这个站点的垂直手风琴菜单

[http://www.designchemical.com/lab/jquery-vertical-accordion-menu-plugin/getting-started/](http://www.designchemical.com/lab/jquery-vertical-accordion-menu-plugin/getting-started/)

页面加载时子菜单溢出。我使用的内部脚本是

```
<script type="text/javascript">
$(document).ready(function($){
    $('#accordion-3').dcAccordion({
        eventType: 'click',
        autoClose: false,
        saveState: false,
        disableLink: false,
        showCount: false,
        active:false, 
        collapsible:true,
        speed: 'slow'
    });
});
</script> 
```

我在样式表中尝试了这种样式

`.blue .accordion li {overflow: hidden; position:relative;}`

这是我的html代码

```
<div class="blue demo-container">
    <ul class="accordion"  id="accordion-3">
        <li ><a  href="#">Manage Webpage</a>
            <ul>
                <li ><a href="/admin/create">Create Webpage</a></li>
                <li ><a href="/admin/view">View Webpage</a></li>
            </ul>
        </li>
        <li class="active"><a href="/admin/content">Manage Menu</a></li>
        <li ><a href="/admin/event">Manage Event</a></li>
        <li ><a href="/admin/category">Add Category</a></li>
    </ul>
</div> 
```

但没有什么能解决这个问题。如何在页面加载问题上解决此溢出问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T10:17:53.807

将以下内容添加到样式表中：

.blue .accordion ul {显示：无；}

# android - 创建新按钮

> ID：10646586
> 
> 赞同：-4
> 
> 时间：2012-05-18T04:09:51.063
> 
> 标签：android, android-button, android-context

我正在使用的 Android 程序有问题。下面的方法在 MyActivity 中。MyActivity 有一个扩展 AsyncTask 的内部类 InnerClass。在 InnerClass 的 doInBackground 方法中，我搜索了一个数据库。该搜索的结果被传递给这个方法 processSearchResult。除了最后一行抛出 NullPointerException 之外，一切正常。我在创建按钮时尝试使用 getApplicationContext() 代替它，但它仍然抛出异常。我对其进行了调试，发现问题出在 android.content.ContextWrapper 类中。在getApplicationContext() 方法中是调用mBase.getApplicationContext。问题是变量 mBase 为空。使用 this 关键字时，仍然会调用此方法，并且 mBase 仍然为空。谁能告诉我为什么 mBase 为空？或者如果 mBase 为空实际上是正常的？

```
public void processSearchResult(ResultSet result) {
    try {

    int x = 1;
    while (result.next()) {

        String name = result.getString(1);
        String ing = result.getString(2);
        String ins = result.getString(3);
        String notes = result.getString(4);
        String type = result.getString(5);
        String course = result.getString(6);

        Recipe r = new Recipe(name, ing, ins, notes, type, course);
        recipeList.add(r);

        Button button = new Button(this); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T04:12:55.860

您不能从您需要的`doInBackground`方法更新用户界面，而是从方法更新它。`AsyncTask``publishProgress``onProgressUpdate`

**我如何发布我的进度`doInBackground`**

```
publishProgress(0); //Assuming progress is 0 
```

**从那以后我在哪里更新 UI？**

```
@Override
protected void onProgressUpdate(Integer... progress){
    //HERE
} 
```

**这**可能与您的想法无关。我所做的是`Context`在我的代码中保留一个私有全局变量以供将来参考，如下所示：

```
private Context x = this; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T04:11:34.313

这应该是您活动的上下文，而不是应用程序上下文。试试 MyActivity.this。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-18T04:14:48.943

要创建您应该使用的按钮`ActivityContext`，请尝试

```
Button button = new Button(MyActivity.this); 
```

# iphone - 如何阻止我的应用程序多次访问每个单元格的数据库？

> ID：10646589
> 
> 赞同：0
> 
> 时间：2012-05-18T04:10:14.517
> 
> 标签：iphone, objective-c, ios, core-data

我有一个 UITableViewCell，它接收指向数据库中对象的指针。该对象以一对一的关系拥有自己的对象。我想知道如何在不每次访问数据库的情况下从这些对象中访问各种信息。有点像“我是否能够一次性加载数据，所以一切准备就绪，作为指针的一部分，而不是需要从数据库加载的东西”？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T04:16:04.770

您可以使用[`NSCache`](http://developer.apple.com/library/ios/#DOCUMENTATION/Cocoa/Reference/NSCache_Class/Reference/Reference.html)缓存数据。在去数据库之前，检查数据是否在缓存中。如果不是，则读取数据库并将结果放入缓存中；下次访问几乎是即时的。

您还可以使用[Core Data](http://developer.apple.com/library/ios/#DOCUMENTATION/DataManagement/Conceptual/iPhoneCoreData01/Introduction/Introduction.html)访问数据库：它为您缓存结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T12:59:25.627

安德鲁，

您可以将获取请求设置为不将您的项目加载为故障，即通过使用使所有数据可用而不是缓存在行缓存中`-returnsObjectsAsFaults`。此外，您可以通过使用预取关系中的属性`-relationshipKeyPathsForPrefetching`。IOW，您可以确保“一次性”获取所有内容。

安德鲁

# c# - 如何使 C# 命名空间像 Java 包一样工作，以便在移动它们时自动重命名？

> ID：10646590
> 
> 赞同：4
> 
> 时间：2012-05-18T04:10:18.253
> 
> 标签：c#, java, namespaces, package

我来自Java，看到Java中的包非常方便。当您将一个类移动到另一个包时，它会自动更改包。（当然也可以通过 Eclipse 或 Netbean 等 IDE）

但是 C# 正在使用命名空间，并且不会像在 Java 中那样自动重命名我的命名空间。例如，我有一个名称空间为的文件，`com.app`我将其放入`com.app`，但稍后，我将此文件移动到`com.lib`文件夹，其名称空间仍为`com.app`. 所以，我发现这很难管理，因为我手动移动它。

请帮助我解决我的问题。（该文件的命名空间由它包含的文件夹命名，当我移动到其他时，我会自动更改）。我们能做到吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-18T04:20:27.813

[我通过使用名为Resharper](http://www.jetbrains.com/resharper/)的 IDE 插件解决了这个问题。（在***许多***有用的功能中）它会在命名空间错误时突出显示（基于程序集的文件夹层次结构和根命名空间），并且可以为您修复它。

请注意，与 Java 不同，有时有非常正当的理由使类位于名称空间中，*而*不是由目录结构推断出的名称空间中。一个很好的例子可能是扩展方法类，它需要在调用它们的类的范围内。因此，通常有：

```
/myProject
  /extensions
     /MyExtensionMethodClass.cs 
```

具有类似的命名空间`myProject`（以便扩展方法可以在 myProject 中的任何位置使用，而无需使用指令）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-18T04:21:10.360

这实际上是因为 C# 具有部分类的概念，也就是说，您可以将 C# 类分布在多个文件中，而不是像 Java 那样将其编码到单个文件中。因此，.Net 中的命名空间是分布式容器，而不是由命名空间操作员定义的集中式容器。

# iphone - 以编程方式绘制图像

> ID：10646593
> 
> 赞同：1
> 
> 时间：2012-05-18T04:10:40.727
> 
> 标签：iphone, ios, xcode

我的宾果游戏应用程序遇到问题，每当在我的数字生成器中选择一个数字时，我都会尝试以编程方式画一个圆圈。

我尝试了这段代码，它在图像中绘制圆圈，然后将其保存到`documentsDirectory`. 我还有一个加载实现，当我调用它时将它加载到视图中。

//画

```
-(void)draw
{
    UIImage *image = [UIImage imageNamed:@"GeneralBingoResult.png"];
    UIImage *imageWithCircle1 = [self imageByDrawingCircleOnImage1:image];

    // save it to documents

    NSString *documentsPath = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,
                                                                   NSUserDomainMask, YES) lastObject];
    NSString *filePath = [documentsPath stringByAppendingPathComponent:@"Output.png"];
    NSData *imageData = UIImagePNGRepresentation(imageWithCircle1);
    [imageData writeToFile:filePath atomically:YES];
    NSLog(@"Saved new image to %@", filePath);

UIImage *image1 = [self loadImage];
    [imageToDisplay setImage:image1];

} 
```

//在图片中画圆

```
- (UIImage *)imageByDrawingCircleOnImage1:(UIImage *)image
{
    // begin a graphics context of sufficient size
    UIGraphicsBeginImageContext(image.size);
    // draw original image into the context
    [image drawAtPoint:CGPointZero];
    // get the context for CoreGraphics
    CGContextRef ctx = UIGraphicsGetCurrentContext();

    // set stroking color and draw circle
    [[UIColor redColor] setStroke];

    // make circle rect 5 px from border
    CGRect circleRect = CGRectMake(420,40,
                                   90,
                                   90);
    circleRect = CGRectInset(circleRect, 5, 5);

    // draw circle
    CGContextStrokeEllipseInRect(ctx, circleRect);

    // make image out of bitmap context
    UIImage *retImage = UIGraphicsGetImageFromCurrentImageContext();
    // free the context
    UIGraphicsEndImageContext();
    return retImage;
} 
```

//从文档目录加载

```
- (UIImage*)loadImage
{
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, 
                                                         NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];
    NSString* path = [documentsDirectory stringByAppendingPathComponent: 
                      [NSString stringWithString: @"Output.png"] ];
    UIImage* image = [UIImage imageWithContentsOfFile:path];
    return image;
} 
```

我成功地在我的图像中绘制了一个圆圈，但我的问题是当我保存带有圆圈的图像时，`documentsDirectory`我希望能够加载保存的图像并再次使用该图像进行绘制。或者更确切地说，我将如何像宾果应用程序一样实现它，如下所示：

示例：首先，在数字生成器中选择数字 7。输出：

![[IMG]http://i186.photobucket.com/albums/x3/arkei8105/1-1.jpg[/IMG]](../Images/d56b5c57aa6ec82572f84f697f97051a.png)

接下来，选择 55 号。它为数字添加了另一个圆圈。输出：

![[IMG]http://i186.photobucket.com/albums/x3/arkei8105/2.jpg[/IMG]](../Images/3134a3f8b9de1bc950556535401adf3a.png)

顺便说一句，我正在使用`UIScrollview`. 我正在`ScrollViewDidEndScrolling`. 谢谢。

我也试过这段代码，但每次`UIScrollView`停止时它只显示一个圆圈。

```
 - (void) scrollViewDidEndScrollingAnimation:(UIScrollView *)scrollview{

    if ([[images objectAtIndex:index] intValue] == 1){
                [circle setFrame:CGRectMake(420,40,90,90)];
                [self.view addSubview:circle];       
    }else if([[images objectAtIndex:index] intValue] == 2){
                [circle setFrame:CGRectMake(460,40,90,90)];
                [self.view addSubview:circle];   
     }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-18T06:00:52.960

您最简单的选择是在 Photoshop 或其他类似程序中创建所需大小且具有透明背景的图像。将此保存为 .png 文件。然后，当您想在板上添加圆圈时，您只需在网格中的正确位置添加一个新的 UIImageView ：

```
UIImageView *circle;
circle = [[UIImageView alloc] initWithFrame:CGRectMake(xLocation, yLocation, myCircleWidth, myCircleHeight)];
circle.image = [UIImage imageNamed:@"myCircle.png"];
[self.view addSubview:circle]; 
```

另一种选择是创建一个继承自 UIView 的视图。您可以向此类添加方法，允许您将位置设置为圆圈。然后在 drawRect 代码中，您只需在所有已标记的位置上绘制圆圈。

```
- (void)drawRect:(CGRect)rect {
// Circle your marked locations here
} 
```

在这种情况下，最后一步是在包含 BINGO 板的原始视图上添加新视图。

编辑：

这是用于进行视图覆盖的扩展示例代码。首先，OverlayView.h：

```
@interface OverlayView : UIView {

}

- (void)clearPoints;
- (void)addPointX:(int)whichX Y:(int)whichY;
@end 
```

请注意，我在这里使用 C++ 向量，所以这是在 OverlayView.mm 文件中：

```
#import "OverlayView.h"
#import <UIKit/UIKit.h>
#include <vector>

@implementation OverlayView

std::vector<int> points;

- (id)initWithFrame:(CGRect)frame {
    if (self = [super initWithFrame:frame]) {
        // Initialization code
        [self setOpaque:NO];
        [self setUserInteractionEnabled:false];
    }
    return self;
}

- (void)drawRect:(CGRect)rect {
    if (points.size() == 0)
        return;
    CGContextRef context = UIGraphicsGetCurrentContext(); 
    CGContextSetLineWidth(context, 15.0);

    CGContextSetRGBStrokeColor(context, 1.0, 0.0, 0, 0.5);
    for (int x = 0; x < points.size(); x++)
        CGContextStrokeEllipseInRect(context, CGRectMake(points[x]%width-resolution/2,
                                                         points[x]/width-resolution/2,
                                                         resolution, resolution));

}

- (void)dealloc {
    //printf("Deallocating OverlayView\n");
    [super dealloc];
}

- (void)clearPoints {
    points.resize(0);
    [self setNeedsDisplay];
}

- (void)addPointX:(int)whichX Y:(int)whichY {
    points.push_back(whichX+whichY*width);

    [self setNeedsDisplay];
    printf("Adding point (%d,%d)\n", whichX, whichY);
} 
```

您只需将此视图添加到与您的板相同的视图中。调用 addPoint 函数以添加一个以该点为中心的圆。您需要自己定义视图的分辨率和宽度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T04:14:13.227

只需通过 UIImageView 在正确的坐标处将其粘贴到您的宾果板顶部（我认为宾果板的大小都相同？应该很容易计算）。还是我错过了你想要做的事情？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-26T08:58:20.067

试试这个

```
UIImage *image1 = [UIImage imageNamed:@"image1.png"]; 
UIImage *image2 = [UIImage imageNamed:@"image2.png"]; 

CGSize newSize = CGSizeMake(width, height);
UIGraphicsBeginImageContext( newSize );

[image1 drawInRect:CGRectMake(0,0,newSize.width,newSize.height)];

[image2 drawInRect:CGRectMake(0,0,newSize.width,newSize.height) blendMode:kCGBlendModeNormal alpha:0.8];
UIImage *finalImage = UIGraphicsGetImageFromCurrentImageContext();

UIGraphicsEndImageContext(); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-18T05:43:50.567

如果你想要像宾果游戏这样的动画，你可以使用 Cocos2D 框架来构建你的应用程序。

# php - 如何在 Yii 中设置表前缀

> ID：10646597
> 
> 赞同：16
> 
> 时间：2012-05-18T04:11:03.227
> 
> 标签：php, yii

在我正在处理的项目中，我需要为项目设置一个表前缀，以后可以更改。浏览我遇到的文档： [http ://www.yiiframework.com/doc/api/1.1/CDbConnection#tablePrefix-detail](http://www.yiiframework.com/doc/api/1.1/CDbConnection#tablePrefix-detail)

但是没有解释我在哪里实现它。我的意思是我应该把它放在 protected/config/main.php 中还是编辑核心文件？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-05-18T04:25:21.090

您将它与其他数据库配置一起放在配置文件中，如下所示：

```
'db'=>array(
  'connectionString' => 'xxxxx',
  'username' => 'xxxxx',
  'password' => 'xxxxx',
  'tablePrefix' => 'tbl_',
), 
```

任何组件的所有公共属性都可以通过这种方式在配置文件中设置。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2014-07-19T09:49:15.460

```
 'db'=>array(
        'connectionString' => 'mysql:host=localhost;dbname=###',
        'emulatePrepare' => true,
        'username' => '###',
        'password' => '###',
        'charset' => '###',
        'tablePrefix' => 'r_',
    ), 
```

# asp.net - 是否可以让 asp.net 中继器的数据源成为列表 那是一个类的属性？

> ID：10646599
> 
> 赞同：2
> 
> 时间：2012-05-18T04:11:11.760
> 
> 标签：asp.net, repeater, datasource

这是我的中继器的 aspx：

```
<asp:Repeater ID="rpt_Files" runat="server">
    <HeaderTemplate>
       <th><asp:Label runat="server" ID="lbl_FileNameHeader" Text="File Name" /></th>                       
    </HeaderTemplate>
    <ItemTemplate>            
           <asp:Label runat="server" ID="lbl_FileName" Text='<%# Eval("JobFileNames")  %>' />
    </ItemTemplate>       
</asp:Repeater> 
```

下面是在 C# 中绑定数据的代码：

```
rpt_Files.DataSource = CurrentQuote;
    rpt_Files.DataBind(); 
```

这是 CurrentQuote 的类定义：

```
public class CurrentQuote
{
// Properties
private List<string> _jobfilenames;
public List<string> JobFileNames
{
    get
    {
        if (_jobfilenames != null)
            return _jobfilenames;
        else
        {
            _jobfilenames = new List<string>();
            return _jobfilenames;
        }
    }

    set { _jobfilenames = value; }
} 
```

这是我收到的错误：

```
An invalid data source is being used for rpt_Files. A valid data source must implement either IListSource or IEnumerable. 
```

如果我将转发器数据源更改为 CurrentQuote.JobFileNames，我会收到一条错误消息，指出该字符串没有名为“JobFileNames”的属性。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-18T08:23:16.050

如果您有一个包含多个文件的引用，您的 DataSource 应该如下所示：

```
CurrentQuote cq = new CurrentQuote();
string[] filenames = new string[] { "file1", "file2", "file3" };
cq.JobFileNames = filenames.ToList();

rpt_Files.DataSource = cq.JobFileNames;
rpt_Files.DataBind(); 
```

然后在标记中您可以使用：

```
<asp:Label runat="server" ID="lbl_FileName" Text='<%# Container.DataItem %>' /> 
```

所以是的，“可以让 asp.net 中继器的数据源成为一个作为类属性的列表”，但是您应该首先实例化该类，并且您必须从标记中直接访问 DataItem，因为它是一个字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T06:35:59.587

您应该将 DataSource 分配给一个对象列表，如下所示：

```
List<CurrentQuote> myCurrentQuoteList = new List<CurrentQuote>();
CurrentQuote  currentQuoteObj = new CurrentQuote();  
currentQuoteObj.JobFileNames.Add("test");
myCurrentQuoteList.Add(myCurrentQuoteList );  

rpt_Files.DataSource = myCurrentQuoteList;
rpt_Files.DataBind(); 
```

您不能直接分配类 Object，您应该实现 IListSource 或 IEnumerable 以用作您的数据源。

# javascript - 当用户进行文件更改时，FileAPI 不会更新文件大小（非 webkit 浏览器）

> ID：10646601
> 
> 赞同：8
> 
> 时间：2012-05-18T04:11:18.437
> 
> 标签：javascript, html, firefox, webkit, fileapi

我想我会先用一个例子来证明这个问题，

jsfiddle： http: [//jsfiddle.net/e2UfM/15/](http://jsfiddle.net/e2UfM/15/) （使用 FF 12 和 Chrome 18.0.1025.168 测试）

用法：

*   从本地计算机加载文本文件。
*   点击“加载文件”。
*   点击“显示文件大小” - 注意大小。
*   在本地机器上修改并保存文本文件。
*   再次点击“显示文件大小”。请注意在 webkit 浏览器 (Chrome) 中文件大小如何变化，但在 Firefox 中它没有更新文件大小

当用户更改他们选择的本地文件时，非 webkit 浏览器不会更新其大小属性，而 Chrome 会这样做。两种浏览器都会更新文件的内容。

有没有办法让 Firefox 更新文件大小，就像 Chrome 在这种情况下所做的那样？

* * *

## 简单的真实世界示例：

用户选择了一个对于表单来说太大的文件，他们点击提交按钮并收到通知他们的文件太大（通过警报、“大小”栏（见下文）等）

他们在本地修改文件，然后再次点击提交。

在 Chrome 中，文件大小会更新。当用户再次点击提交按钮时，它将再次验证它的更新大小并允许上传。在 Firefox 中，用户必须重新选择表单上的文件才能看到文件大小的变化。

**Firefox 的部分解决方法 - @ZER0 的[回答](https://stackoverflow.com/questions/10646601/fileapi-doesnt-update-the-files-size-when-user-makes-file-changes-non-webkit-b/10905353#10905353)**

* * *

## 真实世界的例子（深入）：

如果我没记错的话，文件 API 的一个目的是在上传到服务器之前验证客户端的文件大小。

考虑表单中有 2MB 上传限制并且用户选择 1MB 文件的场景。Firefox 和 Chrome 都会看到文件大小小于 2MB 并将其添加到表单中。我们还假设有一个简洁的栏显示他们选择的文件有多大，以及它是否符合文件大小限制：

![用户选择的 1MB 文件！](../Images/a7a5a820b8e3c5a5696288938b6098b8.png)

但是随后用户决定在提交表单并将大小超过 2MB**之前在本地对该文件的内容进行微小的更改。**

在 Google Chrome 中，我可以在客户端优雅地处理这个问题。当用户提交表单时，我可以再次检查文件大小，并在将其发送到服务器之前验证它实际上仍然低于 1MB。但即使在用户提交表单之前，在 Chrome 中，我也可以动态更新小条图像，因为它们在本地进行更改，如下所示：

![现在文件超过 2MB，糟糕！](../Images/b25fe3a251778a02b6c4e7eb016d1dd6.png)

如果用户正在填写大型表单，则此“栏”（或即时通知上的任何其他表单，例如警报）很有用。我希望用户在他们的文件太大时立即知道，以便他们可以更正它，而不仅仅是在他们提交表单时。

在 Firefox 中，因为文件大小永远不会更新，它会很乐意上传 2MB 的文件，认为它仍然是 1MB！我使用服务器端逻辑来仔细检查文件大小，但我宁愿节省服务器行程。

* * *

## 我是如何遇到这个错误的：

*上述示例与更多人相关，因为更多人可能处理过表单中的文件上传，而不是使用[File API 中的 slice 函数](http://www.w3.org/TR/FileAPI/#slide-method-algo)。这就是我遇到问题的具体方式。*

在我的表单中，用户选择了一个文件，当他们点击提交时，屏幕上只显示最后 10,000 个字节，`textarea`以确认它确实是他们想要的文件。

考虑一个`50,000`字节大小的文件。用户在表单中选择它，Chrome 和 Firefox 都`40,000 - 50,000`在`textarea`.

现在用户向文件添加了一些内容，并将相同的文件转换为`70,000`字节！

Google Chrome 将正确更新`textarea`以包含 bytes `60,000-70,000`。在 Firefox 中，因为大小将保持不变，它仍然只会显示范围内的字节`40,000-50,000`。

* * *

**编辑：**更新了 jsfiddle 以证明 FF 仍然可以读取更新的文件内容。只是文件大小不会随着这些新内容而改变。

**编辑：** [https](https://bugzilla.mozilla.org/show_bug.cgi?id=756503) ://bugzilla.mozilla.org/show_bug.cgi?id=756503 （错误报告）

**编辑：**已添加和更新示例以响应@Eduárd Moldován 的[评论](https://stackoverflow.com/questions/10646601/fileapi-doesnt-update-the-files-size-when-user-makes-file-changes-non-webkit-b#comment14191706_10646601)和@ZER0 的[回答](https://stackoverflow.com/questions/10646601/fileapi-doesnt-update-the-files-size-when-user-makes-file-changes-non-webkit-b/10905353#10905353)。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T21:37:56.140

看来您是`size`直接从那里获取属性的，并且由于此表单元素中的值没有更改，因此 Firefox 可能也不会更新该`size`属性。

作为解决方法，您可以检查`length`您已阅读的内容。所以而不是`file.size`有`evt.target.result.length`.

但是，这对我来说绝对是一个错误，因此您将其添加到 Bugzilla 上已经做得很好了！

**更新**：您仍然可以使用[slice](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/slice)的字符串版本。否则，如果您更喜欢（或者`result`是特定类型的数据），您可以从`evt.target.result`一个新的[Blob](https://developer.mozilla.org/en/DOM/Blob)对象（文件对象使用此接口）创建，您可以在其中使用`size`属性和`slice`方法。

# javascript - 在 TextChanged 或 CheckedChanged 事件上使用 JavaScript 清除两个文本框和复选框

> ID：10646607
> 
> 赞同：0
> 
> 时间：2012-05-18T04:11:53.273
> 
> 标签：javascript, c#, asp.net, dom-events

如果第三个控件的值发生变化，则清除其他两个控件 - 使用 Javascript

我有两个文本框和一个复选框

txtExpiryDate--使用 ajaxCalenderExtender

txtDaysToExpire

chkExpired --复选框

我无法解决的问题是，如果上述三个控件中的 **任何**一个控件中的值发生更改（在客户端），则应清除**其他两个控件。**

就像如果在 中选择了一个日期`txtExpiryDate`，其他两个控件的值应该被清除为：`txtDaysToExpire.Text="";`和`chkExpired.Checked = false`.. 同样如果`chkExpired.Checked = true`，那么**其他两个应该被清除**.. 希望它可以清楚地理解.. 请看一下标记-向上

```
<td colspan="2" rowspan="2">
    <asp:UpdatePanel ID="upnlExpiry" runat="server" UpdateMode="Conditional">
        <Triggers>
            <asp:AsyncPostBackTrigger ControlID="txtExpiryDate" EventName="TextChanged" />
            <asp:AsyncPostBackTrigger ControlID="txtDaysToExpire" EventName="TextChanged" />
            <asp:AsyncPostBackTrigger ControlID="chkExpired" EventName="CheckedChanged" />
        </Triggers>
        <ContentTemplate>
            <table cellpadding="0" cellspacing="0" border="0" width="100%" class="leftaligntxt">
                <tr>
                    <td width="44%" align="left">
                        Expiry Date
                    </td>
                    <td colspan="2">
                        <asp:TextBox ID="txtExpiryDate" runat="server"  OnTextChanged="txtExpiryDate_TextChanged"></asp:TextBox>
                        <ajaxToolkit:CalendarExtender ID="calExtExpiryDate" runat="server" Format="dd/MM/yyyy"
                            PopupButtonID="imgBtnCal" TargetControlID="txtExpiryDate">
                        </ajaxToolkit:CalendarExtender>
                        <asp:ImageButton ID="imgBtnCal" runat="server" ImageAlign="AbsMiddle" ImageUrl="~/App_Themes/FQBlue/img/Calendar_img.png" />
                    </td>
                </tr>
                <tr>
                    <td width="44%">
                        Days to Expire
                    </td>
                    <td valign="top">
                        <asp:TextBox ID="txtDaysToExpire" runat="server" Width="80px" OnTextChanged="txtDaysToExpire_TextChanged"
                            ></asp:TextBox>
                        <ajaxToolkit:NumericUpDownExtender ID="txtDaysToExpire_NumericUpDownExtender" runat="server"
                            Maximum="15000" Minimum="0" TargetControlID="txtDaysToExpire" Width="100">
                        </ajaxToolkit:NumericUpDownExtender>
                    </td>
                    <td>
                        <asp:CheckBox ID="chkExpired" runat="server" Text="Show Expired" AutoPostBack="True"
                            OnCheckedChanged="chkExpired_CheckedChanged" />
                    </td>
                </tr>
                <tr>
                    <td>
                        &nbsp;
                    </td>
                    <td colspan="2">
                        &nbsp;
                    </td>
                </tr>
            </table>
        </ContentTemplate>
    </asp:UpdatePanel>
</td> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T06:00:45.673

如果不使用 AutoPostBack：

```
<asp:TextBox ID="txtDaysToExpire" runat="server" Width="80px" onchange="tValue(this)">   </asp:TextBox>
<asp:TextBox ID="txtTest" runat="server" Text="blah blah blah" />
<asp:CheckBox ID="CheckBox1" runat="server" />

 <script type="text/javascript">
  function tValue(txt)
  {
    document.getElementById('<%= txtTest.ClientID %>').value = "";
    document.getElementById('<%= CheckBox1.ClientID %>').checked = false;
  }
 </script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T13:32:17.017

正如@Ashwini 提到的，您可以为其他人做同样的事情：

```
<asp:TextBox ID="txtDaysToExpire" runat="server" Width="80px" onchange="DaysToExpireChanged(this)">   </asp:TextBox>
<asp:TextBox ID="txtExpiryDate" runat="server" Text="blah blah blah" onchange="ExpiryDateChanged(this)" />
<asp:CheckBox ID="chkExpired" runat="server" onchange="ExpiredChanged" />

 <script type="text/javascript">
  function DaysToExpireChanged(txt)
  {
    document.getElementById('<%= txtExpiryDate.ClientID %>').value = "";
    document.getElementById('<%= chkExpired.ClientID %>').checked = false;
  }

  function ExpiryDateChanged(txt)
  {
    document.getElementById('<%= txtDaysToExpire.ClientID %>').value = "";
    document.getElementById('<%= chkExpired.ClientID %>').checked = false;
  }

  function ExpiredChanged(txt)
  {
    document.getElementById('<%= txtDaysToExpire.ClientID %>').value = "";
    document.getElementById('<%= txtExpiryDate.ClientID %>').value = "";
  }
 </script> 
```

或者您可以改进逻辑以仅执行一个处理每个更改的功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T03:45:42.333

@Ashwini您的带有以下代码的代码对我来说效果很好..
因为这三个都应该清除其他两个并且**复选框**没有按照我对上面代码所需的方式工作..所以不得不换一种方式..无论如何代码对我来说工作得很好。
现在它清除**了两个**未选中的（在三个控件中）

再一次感谢你..！

```
 <script src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.7.js" type="text/javascript"></script>
<script type="text/javascript">
    $(document).ready(function () {
        $(".checkCss").blur(function () {
            $(".checkCssChk input").attr("checked", false);
            $(".checkCss").not(this).val("");
        });
        $(".checkCssChk input").change(function () {
            $(".checkCss").not(this).val("");
        })
    });
</script>
    <asp:TextBox ID="txtExpiryDate" runat="server" CssClass="checkCss" onchange="tValue(this)"></asp:TextBox>
    <asp:TextBox ID="txtDaysToExpire" runat="server" Width="80px" CssClass="checkCss" onchange="t2Value(this)"> ></asp:TextBox>
    <asp:CheckBox ID="chkExpired" runat="server" Text="Show Expired" CssClass="checkCssChk" />
    <script type="text/javascript">
        function tValue(txt) {
            document.getElementById('<%= txtDaysToExpire.ClientID %>').value = "";
            document.getElementById('<%= chkExpired.ClientID %>').checked = false;
        }
        function t2Value(txt) {
            document.getElementById('<%= txtExpiryDate.ClientID %>').value = "";
            document.getElementById('<%= chkExpired.ClientID %>').checked = false;
        }
     </script> 
```

# blackberry - Phonegap 和 Blackberry WebWorks：build\StandardInstall 不存在

> ID：10646610
> 
> 赞同：2
> 
> 时间：2012-05-18T04:12:18.127
> 
> 标签：blackberry, ant, cordova

我的环境是Windows XP。已安装 JDK 和 Apache ant。Phonegap 版本是 1.7.0 用于智能手机的 BlackBerry Webworks SDK：版本 2.3.1

我按照[http://docs.phonegap.com/en/1.7.0/guide_getting-started_blackberry_index.md.html#Getting%20Started%20with%20Blackberry](http://docs.phonegap.com/en/1.7.0/guide_getting-started_blackberry_index.md.html#Getting%20Started%20with%20Blackberry)的说明在黑莓上尝试 phonegap。

我使用的示例 Blackberry WebWorks 示例应用程序是这个[https://github.com/phonegap/phonegap/tree/master/lib/blackberry/sample](https://github.com/phonegap/phonegap/tree/master/lib/blackberry/sample)

首先我执行'ant blackberry build'。尽管它说“BUILD SUCCESSFUL”，但是，StandardInstall 和 .cod 都没有被创建。输出包含如下错误消息：

```
[exec] E:\Temp\widgetGen.15924526831337325595265.tmp\extension\blackberry\common\util\URLDecoder.java:183: unclosed string literal
[exec]         decodingMap.put( "%AC", "? );
[exec]                                 ^
[exec] 100 errors
[exec] Error!: Error: java compiler failed: C:\Program Files\Java\jdk1.6.0_32\bin\javac.exe @E:\TEMP\rapc_02802fef.dir\options
[exec] [ERROR]                     RAPC exception occurred 
```

完整的构建日志在这里[http://www.cis.nctu.edu.tw/~gis90571/a.txt](http://www.cis.nctu.edu.tw/~gis90571/a.txt)

然后我执行'ant blackberry load-simulator'，它显示：...

BUILD FAILED D:\WebWorks_projects\helloworld\build.xml:33：执行此行时出现以下错误：

D:\WebWorks_projects\helloworld\blackberry.xml:123: D:\WebWorks_projects\hellowo rld\build\StandardInstall 不存在。

blackberry.xml 的内容是：

```
123: <copy todir="${simulator.dir}">
124:   <fileset dir="${build.dir}/StandardInstall" includes="*.cod, *.cso, *.csl, *.alx" />
125: </copy> 
```

（我把phonegap提供的样例app放在了D:\WebWorks_projects，改名为“helloworld”。）

我是蚂蚁和黑莓的新手。

有人可以提供一些帮助或提示吗？谢谢。

答：\ext\common\blackberry\common\util 中的源文件 URLDecoder.java 似乎由于某些编码问题而损坏。修复它，问题就解决了。

这里有一篇有用的文章：[http ://whatdrewknows.blogspot.com/2012/04/cordova-blackberry-development-part-2.html](http://whatdrewknows.blogspot.com/2012/04/cordova-blackberry-development-part-2.html)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-18T07:11:39.393

您的应用程序未成功构建。

如果您的应用程序构建并生成 3 个文件夹

1.  OTA安装
2.  标准安装
3.  小部件

同时还创建了一个 application.zip 文件。

如果您获得了所有这些文件，则您的应用程序已成功编译和构建。

# php - 无法跨页面获取某些会话变量

> ID：10646613
> 
> 赞同：0
> 
> 时间：2012-05-18T04:12:20.857
> 
> 标签：php, mysql, session-variables

尝试为文件系统目录工作添加一些额外的元素到我的会话变量中，我注意到我无法添加一些。这是我所拥有的：

```
 <?php
#login.php

// This page processes the login form submission.

// Upon successful login, the user is redirected.

// Two included files are necessary.

// Check if the form has been submitted:

if(isset($_POST['submitted']))
{

    // For processing the login:

    require_once ('login_functions.php');

    // Need the database connection:

    require_once ('../mysqli_connect.php');

    // Check the login:

    list ($check, $data) = check_login($dbc, $_POST['email'], $_POST['pass']);

    if ($check) //OK!
    {
        // set the session data:

      session_start();

      $_SESSION['user_id'] = $data['user_id'];

      $_SESSION['first_name'] = $data['first_name'];

      $_SESSION['company_name'] = $data['company_name'];

      $_SESSION['email'] = $data['email'];

      // Store the HTTP_USER_AGENT:

      $_SESSION['agent'] = md5($_SERVER['HTTP_USER_AGENT']);

        //Redirect:

        $url = absolute_url ('loggedin.php');

        header("Location: $url");

        exit(); // Quit the script.

    }
    else // Unsuccessful!
    {

       // Assign $data to $errors for error reporting
        // in the login_functions.php file.

        $errors = $data;

    }

    mysqli_close($dbc); // Close the database connection

} //End of the main submit conditional

//Create the page:

include('login_page_inc.php');

?> 
```

以下是登录功能：

```
 <?php #login_functions.php

//This page defines two functions used by the login/logout process.

/*This function determines and returns an absolute URL.
 * It takes one argument: the page that concludes the URL.
 * The argument defaults to index.php
 */

function absolute_url ($page = 'about.php')
{
    //Start defining the URL...
    //URL is http:// plus the host name plus the current directory:

    $url = 'http://' . $_SERVER['HTTP_HOST'] . dirname($_SERVER['PHP_SELF']);

    // Remove any trailing slashes:

    $url = rtrim($url, '/\\');

    // Add the page:
    $url .= '/' . $page;

    // Return the URL:

    return $url;

}//End of absolute_url() function.

/*This function validates the form data (email address and password).
 * If both are present, the database is queried.
 * The function requires a database connection
 * The function returns an array of information, including:
 *  - a TRUE/FALSE variable indicating success
 * - an array of either errors or the database result
 */

function check_login($dbc, $email = '', $pass = '')
{
    $errors = array(); // Initialize error array.

    // Validate the email address:

    if (empty($email))
    {
        $errors[] = 'You forgot to enter your email address.';
    }
    else
    {
        $e = mysqli_real_escape_string($dbc, trim($email));
    }

    // Validate the password:

    if (empty($pass))
    {
        $errors[] = 'You forgot to enter your password.';
    }
    else
    {
        $p = mysqli_real_escape_string($dbc, trim($pass));
    }

    if(empty($errors)) //If everything's OK.
    {
        // Retrieve the user_id and first_name for that email/password combo

        $q = "SELECT user_id, first_name, email FROM
            user WHERE email='$e' AND pass=SHA1('$p')";

        $r = @mysqli_query ($dbc, $q); // Run the query.

        //Check the result:

        if (mysqli_num_rows($r)==1)
        {
            //Fetch the record:

            $row = mysqli_fetch_array($r, MYSQLI_ASSOC);

            // Return true and the record:

            return array (true, $row);

        }
        else //Not a match for writer, check the publisher table
        {
            $q = "SELECT pub_id, company_name, cemail FROM
                pub WHERE cemail='$e' AND password=SHA1('$p')";

            $r = @mysqli_query ($dbc, $q);

            if (mysqli_num_rows($r)==1)
         {
            //Fetch the record:

            $row = mysqli_fetch_array($r, MYSQLI_ASSOC);

            // Return true and the record:

            return array (true, $row);

        }
        else
        {
            echo '<p>Invalid Credentials</p>';

         }
        }

    } // End of empty($errors) IF.

    // Return false and the errors:

    return array(false, $errors);

} // End of check_login() function.

?> 
```

注意：$_SESSION['first_name'] 和 $_SESSION['company_name'] 一直正常工作，但是添加电子邮件和 user_id 不起作用。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T04:53:14.783

email 和 user_id 永远不会对发布者起作用：因为登录函数返回“pub_id”和“cemail”。要解决此问题，您可以将 SQL 更改为：

```
 $q = "SELECT pub_id as user_id, company_name, cemail AS email FROM 
            pub WHERE cemail='$e' AND password=SHA1('$p')"; 
```

# grails - GORM CriteriaBuilder sqlRestriction CONTAINS 子句

> ID：10646616
> 
> 赞同：2
> 
> 时间：2012-05-18T04:13:01.527
> 
> 标签：grails, grails-orm, contains

我正在尝试使用 GORM CriteriaBuilder 在字段名称上使用 CONTAINS 子句对 SQL Server 数据库进行全文搜索。我正在尝试使用 sqlRestriction 方法来执行此操作。此外，CriteriaBuilder 可能包含许多其他可选条件。

就像是：

```
Table.createCriteria.list {
    and {
      if (option1) { eq "field1", option1 }
      if (option2) { like "field2", option2 }
      if (option3) { sqlRestriction "CONTAINS(field3, '${option3}')" }
    }
} 
```

option3 可以包含布尔运算符。

有人成功了吗？

单元测试在 sqlRestriction 行上引发异常：groovy.lang.MissingMethodException：没有方法签名：grails.gorm.CriteriaBuilder.sqlRestriction() 适用于参数类型：(java.lang.String)

我认为 String 类型正是 sqlRestriction 正在寻找的。

对替代品持开放态度。提前致谢。

使用 grails 2.0.3。

# iphone - 用于 viewController 的 iPhone 单元测试

> ID：10646621
> 
> 赞同：0
> 
> 时间：2012-05-18T04:13:37.090
> 
> 标签：iphone, ios, ipad

我有一个控制器类，我想在其中编写在按钮单击时执行的代码的测试用例。在我的 testClass.m 文件中，我有以下代码，我想从中调用来自 testClass.m 的按钮。这段代码会起作用吗？

```
-(void)testcheckTheArrayForNull
 {
        viewController.temp=@"c";
        viewController.buttonCount=1;
        [viewController goButton:self];
        STAssertNotNil(viewController.setUpArray,@"set up Array is not nil");

} 
```

通过这段代码，我的控制权会转移到 goButton 吗？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T04:47:39.553

我会说这*可行*，但您没有提供 goButton、setUpArray 的代码，而且我不知道 temp 或 buttonCount 的作用——所以只是猜测。

# c# - C# 中的 USB 加密狗访问

> ID：10646627
> 
> 赞同：-2
> 
> 时间：2012-05-18T04:14:10.890
> 
> 标签：c#, .net, c#-4.0, c#-3.0

有人可以分享一个库/代码来访问 C# 中的 USB 3G 加密狗吗？

该库应支持连接/断开连接，最重要的是在传输层访问数据的字节流（即带有 TCP/UDP 标头的 TCP/UDP 数据包）。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T05:48:30.430

每个 USB 加密狗都彼此不同，这就是为什么开发您的 USB 棒的公司/制造商通常会提供 API 与之交互的原因。

在我们公司，我们也致力于 SafeNet/Alladin/Rainbow Parallel 和 USB Dongles 多年。我们使用它们来保护我们的软件。我们使用哪个加密狗，它是为我们提供 API 的公司。

# xdebug - xdebug 运行时未返回特定请求的响应

> ID：10646631
> 
> 赞同：0
> 
> 时间：2012-05-18T04:14:20.563
> 
> 标签：xdebug, phpstorm

我很肯定这是一个 xdebug 问题，而不是 PHPStorm 问题，但要明确一点，我在本地使用 PHPStorm 来调试驻留在远程服务器上的 PHP 代码。我在服务器上设置了 xdebug，并在服务器上的 php.ini 中使用以下配置：

```
zend_extension=/home/httpd/php_extensions/xdebug-2.1.4/modules/xdebug.so
xdebug.remote_enable=1
xdebug.remote_port=9000
xdebug.remote_connect_back=1
xdebug.idekey=PHPSTORM-XDEBUG 
```

我已将 PHPStorm 设置为我的本地调试器。我在 Chrome 中使用 XDebug Helper 或在 Firefox 中使用简单的 Xdebug 来初始化 xdebug（无论我使用哪个，我的问题都会出现）。一般来说，调试工作正常。我可以设置断点、单步执行代码、查看变量等。

当某些请求从未收到来自服务器的响应时，就会出现问题。服务器只是从不响应，我已经使用 Charles Web 调试代理验证了这一点。这总是发生在相同的特定请求上，并且无论是否设置断点都会发生。没有收到响应的请求都是相似的——它们调用一个 php 脚本，该脚本缩小并连接多个 JavaScript 文件并回显结果。

为了排除故障，我通过将其添加到 php.ini 来启用 xdebug 日志记录：

```
xdebug.remote_log=/home/httpd/xdebug.log 
```

当我在日志中查找被命中的 php 文件的名称作为这些有问题的请求的端点时，我得到 0 个结果（除非我明确地向该端点添加了断点）。当我向该端点（minify.php）添加断点时，我可以在 PHPStorm 中单步执行它，即使通过回显缩小和连接的 JS 代码，它似乎也可以通过代码——但响应仍然从未发送据我的本地机器所知，从服务器。

知道这里发生了什么吗？这真的妨碍了我使用 xdebug 的能力。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T09:50:55.000

cookie 很可能不会传播到这些请求。我建议看看你是否可以设置[`xdebug.remote_autostart`](http://xdebug.org/docs/remote#remote_autostart)，然后它是否会尝试连接？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T15:11:43.547

感谢您的回复。这不是问题，但它让我进一步挖掘。原来是一个错误，当 php 调用 exit() 时 xdebug 崩溃。使用最新的候选版本修复了此处指定的问题：

[http://bugs.xdebug.org/view.php?id=815](http://bugs.xdebug.org/view.php?id=815)

谢谢！

# python - Django 中的 db_type（尝试使用 mysql 安装 pootle）

> ID：10646635
> 
> 赞同：1
> 
> 时间：2012-05-18T04:15:11.667
> 
> 标签：python, django

此处提出的类似查询：[Getting db_type() error while using django-facebook connect for DjangoApp](https://stackoverflow.com/questions/10356581/getting-db-type-error-while-using-django-facebook-connect-for-djangoapp)

我正在尝试在 CentOS 机器上安装 Pootle，并提供以下详细信息：

```
[root@localhost pootle]# cat /etc/redhat-release<br>
CentOS release 6.2 (Final)
<br>
[root@localhost pootle]# PootleServer --version<br>
Pootle 2.1.6<br>
Translate Toolkit 1.9.0<br>
Django 1.4<br>
[root@localhost pootle]# python -V<br>
Python 2.6.6 
```

我收到以下错误：

```
Creating tables ...
Traceback (most recent call last):
  File "/usr/lib64/python2.6/wsgiref/handlers.py", line 94, in run
    self.finish_response()
  File "/usr/lib64/python2.6/wsgiref/handlers.py", line 134, in finish_response
    for data in self.result:
  File "/usr/lib/python2.6/site-packages/django/http/__init__.py", line 710, in next
    chunk = self._iterator.next()
  File "/usr/lib/python2.6/site-packages/pootle_misc/dbinit.py", line 134, in staggered_install
    yield syncdb()
  File "/usr/lib/python2.6/site-packages/pootle_misc/dbinit.py", line 76, in syncdb
    call_command('syncdb', interactive=False)
  File "/usr/lib/python2.6/site-packages/django/core/management/__init__.py", line 150, in call_command
    return klass.execute(*args, **defaults)
  File "/usr/lib/python2.6/site-packages/django/core/management/base.py", line 232, in execute
    output = self.handle(*args, **options)
  File "/usr/lib/python2.6/site-packages/django/core/management/base.py", line 371, in handle
    return self.handle_noargs(**options)
  File "/usr/lib/python2.6/site-packages/django/core/management/commands/syncdb.py", line 91, in handle_noargs
    sql, references = connection.creation.sql_create_model(model, self.style, seen_models)
  File "/usr/lib/python2.6/site-packages/django/db/backends/creation.py", line 44, in sql_create_model
    col_type = f.db_type(connection=self.connection)
TypeError: db_type() got an unexpected keyword argument 'connection' 
```

在我将*/usr/lib/python2.6/site-packages/django/db/backends/creation.py*编辑为我认为可以纠正问题的方式后，当我尝试时，我仍然从我的 PootleServer 屏幕中获得以下输出加载网页：

```
Creating tables ...
Traceback (most recent call last):
  File "/usr/lib64/python2.6/wsgiref/handlers.py", line 94, in run
    self.finish_response()
  File "/usr/lib64/python2.6/wsgiref/handlers.py", line 134, in finish_response
    for data in self.result:
  File "/usr/lib/python2.6/site-packages/django/http/__init__.py", line 710, in next
    chunk = self._iterator.next()
  File "/usr/lib/python2.6/site-packages/pootle_misc/dbinit.py", line 134, in staggered_install
    yield syncdb()
  File "/usr/lib/python2.6/site-packages/pootle_misc/dbinit.py", line 76, in syncdb
    call_command('syncdb', interactive=False)
  File "/usr/lib/python2.6/site-packages/django/core/management/__init__.py", line 150, in call_command
    return klass.execute(*args, **defaults)
  File "/usr/lib/python2.6/site-packages/django/core/management/base.py", line 232, in execute
    output = self.handle(*args, **options)
  File "/usr/lib/python2.6/site-packages/django/core/management/base.py", line 371, in handle
    return self.handle_noargs(**options)
  File "/usr/lib/python2.6/site-packages/django/core/management/commands/syncdb.py", line 91, in handle_noargs
    sql, references = connection.creation.sql_create_model(model, self.style, seen_models)
  File "/usr/lib/python2.6/site-packages/django/db/backends/creation.py", line 45, in sql_create_model
    col_type = f.db_type(self.connection)
TypeError: db_type() takes exactly 1 argument (2 given) 
```

网页显示：

```
Error: "(1146, "Table 'p2.siteconfig_siteconfiguration' doesn't exist")" while attempting to access the Pootle database, will try to initialize database. 
```

有问题的行是第 44 行，如下所示：

```
 col_type = f.db_type(connection=self.connection) 
```

我已将其注释掉，并在其下方添加了一行，如下所示：

```
 #col_type = f.db_type(connection=self.connection)
    col_type = f.db_type(self.connection) 
```

以前运行服务器会呈现此错误，但是在它之前有许多成功的创建通知，正如我们在这里看到的：

```
mysql> show tables;

+-----------------------------------------------+
| Tables_in_p2                                  |
+-----------------------------------------------+
| auth_group                                    |
| auth_group_permissions                        |
| auth_permission                               |
| auth_user                                     |
| auth_user_groups                              |
| auth_user_user_permissions                    |
| django_admin_log                              |
| django_content_type                           |
| django_session                                |
| django_site                                   |
| pootle_app_directory                          |
| pootle_app_language                           |
| pootle_app_permissionset                      |
| pootle_app_permissionset_negative_permissions |
| pootle_app_permissionset_positive_permissions |
| pootle_app_pootleprofile                      |
| pootle_app_pootleprofile_alt_src_langs        |
| pootle_app_pootleprofile_languages            |
| pootle_app_pootleprofile_projects             |
| pootle_app_project                            |
| pootle_app_submission                         |
| pootle_app_suggestion                         |
| pootle_app_translationproject                 |
| pootle_notifications_notice                   |
| pootle_store_qualitycheck                     |
| pootle_store_store                            |
| pootle_store_suggestion                       |
| pootle_store_unit                             |
| registration_registrationprofile              |
+-----------------------------------------------+
29 rows in set (0.00 sec) 
```

如果这是一个冗长的问题，我很抱歉，但是我正在尝试提供尽可能多的相关信息，以便让您对正在发生的事情有一个很好的了解。

如果您知道解决此问题的方法，请告诉我，因为互联网似乎相当缺乏与 Pootle 相关的修复。

编辑：看到这个：[如何修复 django 的 db_type 弃用警告？](https://stackoverflow.com/questions/8035078/how-to-fix-djangos-db-type-deprecation-warning)

将 settings.py 文件更改为包含以下内容：

```
 col_type = f.db_type(connection=connection)
    #col_type = f.db_type(connection=self.connection)
    #col_type = f.db_type(self.connection) 
```

收到此错误：

```
NameError: global name 'connection' is not defined 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T19:07:32.150

看起来 Pootle 不支持 Django 1.4 卸载 Django 1.4 并安装较旧的 1.3.1 版本。

这可能会有所帮助： [如何在 virtualenv 上安装旧版本的 Django？](https://stackoverflow.com/questions/3220280/how-do-i-install-an-old-version-of-django-on-virtualenv)

# opengl - 如何围绕固定对象（OpenGL）旋转光源？

> ID：10646643
> 
> 赞同：1
> 
> 时间：2012-05-18T04:16:08.640
> 
> 标签：opengl, rotation, lighting, translate-animation, glrotate

我试图在我的 OpenGL 项目中让光源围绕我的角色模型旋转，但是当我尝试它时，到目前为止我得到的只是我的模型像疯了一样旋转（或地板）。

我的渲染代码如下所示：

```
void mainRender() {
    updateState();
    renderScene();
    glFlush();
    glutPostRedisplay();

    //spin = (spin + 30) % 360;

    Sleep(30);
}

void renderScene() {
    glClearColor(backgrundColor[0],backgrundColor[1],backgrundColor[2],backgrundColor[3]);
    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);  // limpar o depth buffer

    glMatrixMode(GL_MODELVIEW);
    glLoadIdentity();
    updateCam();
    renderFloor();
    modelAL.Translate(0.0f,1.0f,0.0f);
    modelAL.Draw();
}

void renderFloor() {

    // set things up to render the floor with the texture
    glShadeModel(GL_SMOOTH);
    glEnable(type);
    glTexEnvi(GL_TEXTURE_ENV, GL_TEXTURE_ENV_MODE, GL_MODULATE);

    glPushMatrix();

    glTranslatef(-(float)planeSize/2.0f, 0.0f, -(float)planeSize/2.0f);

    float textureScaleX = 10.0;
    float textureScaleY = 10.0;
    glColor4f(1.0f,1.0f,1.0f,1.0f);
    int xQuads = 40;
    int zQuads = 40;
    for (int i = 0; i < xQuads; i++) {
        for (int j = 0; j < zQuads; j++) {
            glBegin(GL_QUADS);
                glTexCoord2f(1.0f, 0.0f);   // coords for the texture
                glNormal3f(0.0f,1.0f,0.0f);
                glVertex3f(i * (float)planeSize/xQuads, 0.0f, (j+1) * (float)planeSize/zQuads);

                glTexCoord2f(0.0f, 0.0f);  // coords for the texture
                glNormal3f(0.0f,1.0f,0.0f);
                glVertex3f((i+1) * (float)planeSize/xQuads, 0.0f, (j+1) * (float)planeSize/zQuads);

                glTexCoord2f(0.0f, 1.0f);  // coords for the texture
                glNormal3f(0.0f,1.0f,0.0f);
                glVertex3f((i+1) * (float)planeSize/xQuads, 0.0f, j * (float)planeSize/zQuads);

                glTexCoord2f(1.0f, 1.0f);  // coords for the texture
                glNormal3f(0.0f,1.0f,0.0f);
                glVertex3f(i * (float)planeSize/xQuads, 0.0f, j * (float)planeSize/zQuads);

            glEnd();
        }
    }

    glDisable(type);

    glPopMatrix();
} 
```

我怎样才能让这个新的光源围绕我的“modelAL”对象旋转？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T04:48:39.193

对于固定管道，分配的光源位置与`glLight()`普通对象一样，使用模型视图矩阵进行转换。因此，您可以像处理普通对象一样使用转换函数来定位和旋转光源。

要围绕一个点旋转光源（或其他对象），您需要按照以下步骤操作。设 L 为旋转 0 度时光源所在的位置，O 为主体 - 您要围绕其旋转光源的对象。

1.  将光源定位在 LO（光源*相对于主体*的位置）
2.  围绕所需的轴（可能是 Y 轴）旋转它
3.  将其平移 O 以将其移动到位。

由于 OpenGL 的工作方式，您基本上是按倒序执行这些操作。基本上它会是这样的：

```
glPushMatrix();
glTranslatef(O.x,O.y,O.z);
glRotate(angle,0,1,0);
GLfloat lightpos[4] = {L.x-O.x,L.y-O.y,L.z-O.z,1};
glLightfv(GL_LIGHT0,GL_POSITION,lightpos);
glPopMatrix(); 
```

请注意，这仅适用于定位光源，不适用于定向光源，即 w=0。

# python - python如何从列表中创建字典中的字典

> ID：10646645
> 
> 赞同：0
> 
> 时间：2012-05-18T04:16:30.097
> 
> 标签：python, list, dictionary-comprehension

我有一个文件名列表，`experiments = ['f1','f2','f3','f4']`一天中的时间`t = ['am','pm']`，和收集的数据类型，`['temp','humidity']`。

从这些我想在字典中创建以下格式的字典：

```
dict = {'f1': { am : {'temp': [], 'humidity': []} , pm : {'temp': [], 'humidity': []}},
        'f2': { am : {'temp': [], 'humidity': []} , pm : {'temp': [], 'humidity': []}},
        'f3': { am : {'temp': [], 'humidity': []} , pm : {'temp': [], 'humidity': []}},
        'f4': { am : {'temp': [], 'humidity': []} , pm : {'temp': [], 'humidity': []}}} 
```

最好的方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-18T04:32:25.823

```
{z: {y: {x: [] for x in data_types} for y in t} for z in experiments} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-18T04:32:54.770

如果我见过的话，这是一个理解的案例。

```
from copy import deepcopy
datatypes = ['temp','humidity']
times = ['am','pm']
experiments = ['f1','f2','f3','f4']

datatypes_dict = dict((k, []) for k in datatypes)
times_dict = dict((k, deepcopy(datatypes_dict)) for k in times)
experiments_dict = dict((k, deepcopy(times_dict)) for k in experiments) 
```

或者更好的 dict 理解方式（python 2.7+）

```
datatypes_dict = {k: [] for k in datatypes}
times_dict = {k: deepcopy(datatypes_dict) for k in times}
experiments_dict = {k: deepcopy(times_dict) for k in experiments} 
```

你可以嵌套它们，但如果事情很复杂，它会很快让人兴奋。

然而，在这个用例中，@marshall.ward 的回答

```
{z: {y: {x: [] for x in data_types} for y in t} for z in experiments} 
```

比我的要好得多，因为你可以避免 deepcopy()ing。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-18T05:15:22.087

使用输出格式获得一些艺术许可

```
>>> from collections import namedtuple, defaultdict
>>> from itertools import product
>>> experiments = ['f1','f2','f3','f4']
>>> times_of_day = ['am','pm']
>>> data_types = ['temp','humidity']
>>> DataItem = namedtuple('DataItem', data_types)
>>> D=defaultdict(dict)
>>> for ex, tod in product(experiments, times_of_day):
...     D[ex][tod]=DataItem([], [])
... 
>>> D
defaultdict(<type 'dict'>, {'f1': {'am': DataItem(temp=[], humidity=[]), 'pm': DataItem(temp=[], humidity=[])}, 'f2': {'am': DataItem(temp=[], humidity=[]), 'pm': DataItem(temp=[], humidity=[])}, 'f3': {'am': DataItem(temp=[], humidity=[]), 'pm': DataItem(temp=[], humidity=[])}, 'f4': {'am': DataItem(temp=[], humidity=[]), 'pm': DataItem(temp=[], humidity=[])}}) 
```

您可以像这样访问数据项

```
>>> D['f1']['am'].temp
[]
>>> D['f1']['am'].humidity
[] 
```

# git - git clone ssh 访问windows驱动

> ID：10646650
> 
> 赞同：1
> 
> 时间：2012-05-18T04:17:39.503
> 
> 标签：git, ssh, clone

我需要克隆一个驻留在 windows server 上的 git 项目`d:\GitRepos\test.git`。我在服务器上的管理员下通过 ssh 登录`d:\cygwin\home\Administrator\t2.git`

当我从本地执行 git clone 时：

```
git clone ssh://Administrator@host.com/~/t2.git ./t2.git ==> this is ok 
```

我如何克隆驻留在上面的 test.git `d:\GitRepos\test.git`？

我试过了：

```
git clone ssh://Administrator@host.com/d/GitRepos/test.git ./test.git ==>fail
git clone ssh://Administrator@host.com/cygdrive/d/GitRepos/test.git ./test.git ==>fail 
```

请问有什么建议吗？

没关系：我可以访问它

```
git clone ssh://Administrator@host.com/../../GitRepos/test.git ./test.git 
```

前提是您的管理员主页是 2 个文件夹深。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T04:23:08.110

假设服务器在 cygwin 中运行 sshd，您需要使用 cygwin 映射将 windows 驱动器映射到 cygwin/unix 文件空间，通常`/cygdrive/d`用于`D:\`.

所以你应该可以去

```
git clone ssh://Administrator@host.com/cygdrive/d/GitRepos/test.git test.git 
```

# python - 将输出格式化为表格

> ID：10646652
> 
> 赞同：-1
> 
> 时间：2012-05-18T04:17:51.477
> 
> 标签：python, string-formatting, tabular

示例输入：

```
[('b', 'c', 4),
('l', 'r', 5),
('i', 'a', 6),
('c', 't', 7),
('a', '$', 8),
('n', '$', 9)] 
```

[0] 包含垂直标题，[1] 包含水平标题。

示例输出：

```
 c r a t $ $
b 4  
l   5
i     6
c       7
a         8
n           9 
```

注意：给定足够的元组可以填充整个表：P

**如何使用 [preferably] 一行代码将输出格式化为 Python 中的表格？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T05:22:42.640

这是您修改后的问题的答案：

```
data = [
    ['A','a','1'],
    ['B','b','2'],
    ['C','c','3'],
    ['D','d','4']
]

# Desired output:
#
#   A B C D
# a 1
# b   2
# c     3
# d       4

# Check data consists of colname, rowname, value triples
assert all([3 == len(row) for row in data])
# Convert all data to strings
data = [ [str(c) for c in r] for r in data]
# Check all data is one character wide
assert all([1 == len(s) for s in r for r in data])

#============================================================================
# Verbose version
#============================================================================
col_names, row_names, values = zip(*data) # Transpose

header_line = '  ' + ' '.join(col_names)
row_lines = []
for idx, (row_name, value) in enumerate(zip(row_names,values)):
    # Use '  '*n to get 2n consecutive spaces.
    row_line = row_name + ' ' + '  '*idx + value
    row_lines.append(row_line)

print header_line
for r in row_lines:
    print (r) 
```

或者，如果这对你来说太长，试试这个：

```
cs, rs, vs = zip(*data)
print ('\n'.join(['  '+' '.join(cs)] + [r+' '+'  '*i+v for i,(r,v) in enumerate(zip(rs,vs))])) 
```

两者都有以下输出：

```
 A B C D
a 1
b   2
c     3
d       4 
```

* * *

这是您想要的内核（没有阅读器行或标题列）

```
>>> print('\n'.join([ ''.join([str(i+j+2).rjust(3)
    for i in range(10)]) for j in range(10) ]))

  2  3  4  5  6  7  8  9 10 11
  3  4  5  6  7  8  9 10 11 12
  4  5  6  7  8  9 10 11 12 13
  5  6  7  8  9 10 11 12 13 14
  6  7  8  9 10 11 12 13 14 15
  7  8  9 10 11 12 13 14 15 16
  8  9 10 11 12 13 14 15 16 17
  9 10 11 12 13 14 15 16 17 18
 10 11 12 13 14 15 16 17 18 19
 11 12 13 14 15 16 17 18 19 20 
```

它使用嵌套列表推导`i`来`j`生成 numbers `i+j`，然后`str.rjust()`将所有字段填充到三个字符的长度，最后使用一些`str.join()`s 将所有子字符串放在一起。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T05:20:12.713

假设 python 2.x，它有点难看，但它是功能性的：

```
import operator
from functools import partial
x = range(1,11)
y = range(0,11)
multtable = [y]+[[i]+map(partial(operator.add,i),y[1:]) for i in x]
for i in multtable:
    for j in i:
        print str(j).rjust(3),
    print

  0   1   2   3   4   5   6   7   8   9  10
  1   2   3   4   5   6   7   8   9  10  11
  2   3   4   5   6   7   8   9  10  11  12
  3   4   5   6   7   8   9  10  11  12  13
  4   5   6   7   8   9  10  11  12  13  14
  5   6   7   8   9  10  11  12  13  14  15
  6   7   8   9  10  11  12  13  14  15  16
  7   8   9  10  11  12  13  14  15  16  17
  8   9  10  11  12  13  14  15  16  17  18
  9  10  11  12  13  14  15  16  17  18  19
 10  11  12  13  14  15  16  17  18  19  20 
```

您的问题是如此具体，很难做出一个真正的通用示例。

不过，这里重要的部分是制作表格的部分，而不是实际的打印：

```
[map(partial(operator.add,i),y[1:]) for i in x] 
```

# android - 在根设备上的 /data/data 中获取数据库文件

> ID：10646653
> 
> 赞同：2
> 
> 时间：2012-05-18T04:18:09.203
> 
> 标签：android, linux

我可以访问`/data/data`文件夹中的包。但我无法 `cp`将此数据库文件命令到 SDCard。它说：`cp: not found`。我这样做如下：

```
# cd databases
# ls
    webview.db
    mydatabase.db
    webviewCache.db
# cp mydatabase /mnt/sdcard 
```

但

```
cp: not found 
```

有人知道怎么做这个吗？我怎样才能得到这个文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T04:21:42.333

```
cat source_file > dest_file 
```

您还可以安装busybox，并使用cp 命令以及许多其他命令。 [https://play.google.com/store/apps/details?id=stericson.busybox&hl=en](https://play.google.com/store/apps/details?id=stericson.busybox&hl=en)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T04:23:15.833

当您引用文件时，您还需要提供扩展名！这是第一部分。即，它应该`cp mydatabase.db /mnt/sdcard` 与`.db`. 但是`cp`，它不是 android 库存二进制文件的一部分。您需要busybox 来获取这些命令。

如果你真的想复制文件[没有安装busybox]。使用这个，

`cat mydatabase.db > /mnt/sdcard/mydatabase.db`.

如果你想使用`cp`，你需要在你的设备上安装[BusyBox 。](https://play.google.com/store/apps/details?id=stericson.busybox)

# php - 缺少 mysqli 扩展。请检查您的 PHP 配置

> ID：10646655
> 
> 赞同：14
> 
> 时间：2012-05-18T04:18:36.097
> 
> 标签：php, apache, mysqli

我浏览了所有我能找到与这个问题和我的问题相关的论坛，但没有任何效果。我有 apache2.2 和 php5、phpMyAdmin 和 MySQL。我取消了扩展的注释，我检查了我的`phpinfo()`并且 mysqli 没有出现。我的配置目录是它应该在的位置，但它仍然不会加载。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2018-08-31T21:07:22.603

1.  找出[使用了哪个 php.ini](https://stackoverflow.com/questions/8684609/where-can-i-find-php-ini)。
2.  在文件 php.ini 中，这一行：

    ```
    extension=mysqli 
    ```

3.  替换为：

    ```
    extension="C:\php\ext\php_mysqli.dll" 
    ```

4.  重启阿帕奇

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-07-01T21:11:12.503

我知道这是不久前的事了，但我遇到了这个问题并在这里遵循了其他答案但无济于事，我通过这个问题找到了解决方案（[Stackoverflow 问题](https://stackoverflow.com/questions/6617288/phpmyadmin-windows-xampp-missing-mysql-extension-issue)）

基本上只需要编辑 php.ini 文件（我的文件位于 c:\xampp\php\php.ini）并取消注释这些行......

```
;extension=php_mysql.dll
;extension=php_mysqli.dll
;extension=php_pdo_mysql.dll 
```

重新启动 apache 后，一切都按预期工作。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2020-05-20T22:02:29.297

如果你的配置文件没问题但还是有同样的问题，那么根据安装的php版本安装php7.x-mysql。

例如，在我的情况下，我使用的是 php7.3，所以我运行了以下命令来完成所有设置：

```
sudo apt install php7.3-mysql

systemctl reload apache2 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2020-06-14T03:00:13.117

*   在您的 Xampp 文件夹中，打开`php.ini`PHP 文件夹中的文件，即`xampp\php\php.ini`（使用文本编辑器）。

*   搜索`extension=mysqli`（Ctrl+F），如果有两个，则查找没有注释的那个（后面不带“;”）

*   使用正确的路径地址更改 mysqli，即`extension=C:\xampp\php\ext\php_mysqli.dll`.

*   在 Xampp 控制面板上，停止并启动 apache 和 MySQL

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-04T14:13:29.267

本文可以帮助您[在 Windows 中使用 MySQL 为 Apache 2 或 IIS 配置 PHP](http://www.artfulsoftware.com/php_mysql_win.html)。查看“在 Apache 2 下配置 PHP 和 MySQL”部分，第 3 点：

```
extension_dir = "c:\php\extensions"      ; FOR PHP 4 ONLY 
extension_dir = "c:\php\ext"             ; FOR PHP 5 ONLY 
```

您必须取消注释 extension_dir 参数行并将其设置为 PHP 扩展目录的绝对路径。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2020-04-27T16:34:42.907

`sudo apt-get install php7.2-mysql`

> extension=mysqli.so（添加这个 php.ini 文件）

```
sudo service apahce2 restart 
```

请使用上述命令解决 mysqli-extension 缺失错误

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-05-18T06:28:04.013

将 libmysql.dll 从 PHP 安装文件夹复制到 windows 文件夹。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2019-12-04T09:57:49.217

只需在 php.ini 文件中指定可加载扩展（模块）所在的目录

```
; On windows:
extension_dir="C:\xampp\php\ext" 
```

至

```
; On windows:
;extension_dir = "ext" 
```

然后启用扩展如果它被禁用通过更改

```
;extension=mysqli 
```

至

```
extension=mysqli 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2019-09-01T04:37:50.523

我一直在寻找几个小时，没有人能帮助我。我做了一个简单的事情来解决这个问题。(Windows 10 x64)

按照这个：

1 - 转到您的 php_mysqli.dll 路径（在我的情况下：C:/xampp/php/ext）；

2 - 将 php_mysqli.dll 移动到上一个文件夹（C:/xampp/php）；

3 - 打开 php.ini 并搜索以下行：“扩展名：php_mysqli.dll”；

4 - 更改文件所在的路径：extension="C:\xampp\php\php_mysqli.dll";

5 - 重新启动您的应用程序（wampp、xampp 等）并启动 Apache Server；

问题是路径 ext/php_mysqli.dll，我尝试将行更改为 extension="C:\xampp\php\ext\php_mysqli.dll" 但没有用。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2020-03-27T20:54:26.680

我有同样的问题，我解决了。如果您按照以下步骤操作，您也可以解决它：

1.  您必须将 PHP 安装到**C:/php** 或您当前的版本将其定位到此路径并将其指定为系统变量
2.  然后打开 xampp 程序并单击配置并打开 php.ini 并取消注释以下行：

    ```
    extension=pdo_mysql
    extension=pdo_mysql
    extension=openssl 
    ```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2014-08-27T05:53:52.813

我今天遇到了这个问题，最终我意识到是 mysql dll 之前的行上的注释导致了问题。

这是 PHP 5.5.16 默认在 php.ini 中应该有的内容：

```
;extension=php_exif.dll       Must be after mbstring as it depends on it
;extension=php_mysql.dll
;extension=php_mysqli.dll 
```

除了删除分号之外，您还需要删除 php_exif.dll 之后的注释行。这给你留下了

```
extension=php_exif.dll      
extension=php_mysql.dll
extension=php_mysqli.dll 
```

这解决了我的问题。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2019-09-23T14:23:53.897

我只是将我的 php_myslqli.dll 文件从 ert 文件夹复制回 php 文件夹，从控制面板重新启动我的 Apache 和 MySQL 后它对我有用

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2020-12-20T22:36:20.643

代替

```
include_path=C:\Program Files (x86)\xampp\php\PEAR 
```

有以下

```
include_path="C:\Program Files (x86)\xampp\php\PEAR" 
```

即添加逗号，我检查了显示语法错误的 apache 错误日志，因此检查了整个文件的语法错误。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2020-08-16T22:39:33.583

就我而言，在完全安装 Debian 10 后我遇到了类似的问题。

**命令行：** `php -v`显示我正在使用`php7.4`，但 print`phpinfo()`给了我`php7.3`

**解决方法：禁用php7.3 启用php7.4**

```
 $ a2dismod php7.3

   $ a2enmod php7.4

   $ update-alternatives --set php /usr/bin/php7.4
   $ update-alternatives --set phar /usr/bin/phar7.4
   $ update-alternatives --set phar.phar /usr/bin/phar.phar7.4
   $ update-alternatives --set phpize /usr/bin/phpize7.4
   $ update-alternatives --set php-config /usr/bin/php-config7.4 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2020-04-25T03:47:26.930

它是扩展目录的问题。您需要手动更改 php 扩展目录才能工作。

**如果您使用的是 AMPP 服务器，请执行以下操作**

转到设置 -> PHP -> 配置

在 php7.3.ini 中查找，（版本可能会改变）

extension_dir = "" , (已经有一些路径)

并将值更改为

extension_dir = "C:\Program Files\Ampps\php-7.3\ext"

**如果您使用 XAMP**

转到 XAMP 设置，Apache -> PHP.ini

在 php.ini 中找到 extension_dir =，并设置本地机器的 php 扩展文件夹的路径。请参见下面的示例。

extension_dir = "C:\php\ext" （*正确检查您的路径*）

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2021-06-08T08:20:33.143

解决我的问题的事情是：打开`php.ini`然后添加这个`extension=php_mysqli.dll`

# iphone - 硬件加速 h.264 解码到 iOS 中的纹理、覆盖或类似

> ID：10646657
> 
> 赞同：12
> 
> 时间：2012-05-18T04:19:02.930
> 
> 标签：iphone, ios, opengl-es, h.264

是否可以使用 iOS 硬件加速的 h.264 解码 API 解码本地（非流式传输）视频文件，然后在其上组合其他对象，并且是否受支持？

我想制作一个涉及在视频前面绘制图形对象的应用程序，并使用播放计时器将我在上面绘制的内容与视频上正在播放的内容同步。然后，根据用户的操作，更改我在顶部绘制的内容（但不是视频）

来自 Android 的 DirectX、OpenGL 和 OpenGL ES，我正在描绘类似将视频渲染为纹理，并使用该纹理绘制全屏四边形，然后使用其他精灵来绘制其余对象；或者可能在渲染器之前编写一个中间过滤器，这样我就可以操纵各个输出帧并绘制我的东西；或者可能在视频顶部绘制到 2D 图层。

似乎 AV Foundation 或 Core Media*可以*帮助我做我正在做的事情，但在我深入研究细节之前，我想知道是否有可能做我想做的事，我的主要工作是什么解决问题的途径。

~~请不要回答“这对你来说太高级了，先试试你好世界”的答案。在我自己研究细节之前，我知道我的东西，只是想知道我想做的事情是否可行（最重要的是，得到支持，所以应用程序最终不会被拒绝）。~~

编辑：

我不熟悉 iOS 开发，但专业为 Android 做 DirectX、OpenGL 和 OpenGL ES。我正在考虑制作我目前拥有的 Android 应用程序的 iOS 版本，我只想知道这是否可能。如果是这样，我有足够的时间从头开始 iOS 开发，直到做我想做的事情。如果不可能，那么我现在就不会花时间研究整个平台。

因此，这是一个技术可行性问题。我不是在请求代码。我正在寻找“是的，你可以这样做。只需使用 A 和 B，使用 C 渲染到 D 并用 E 绘制你的东西”或“不，你不能。硬件加速解码是不适用于第三方应用程序”（这是一位朋友告诉我的）。就这样，我就上路了。

我已阅读[ios 技术概述第 32 页中的视频技术概述](https://developer.apple.com/jp/devcenter/ios/library/documentation/iPhoneOSTechOverview.pdf)。它几乎说我可以使用 Media Player 来实现最简单的播放功能（不是我想要的），UIKit 用于嵌入视频，对嵌入有更多的控制，但不能控制实际的播放（不是我想要的）我正在寻找），AVFoundation 可以更好地控制播放（可能是我需要的，但是我在网上找到的大多数资源都在谈论如何使用相机），或者 Core Media 可以对视频进行完全的低级控制（可能是我需要，但[文档记录极差](https://developer.apple.com/library/mac/#documentation/CoreMedia/Reference/CoreMediaFramework/_index.html)，甚至比 AVFoundation 更缺乏播放资源）。

我担心我可能会在接下来的六个月里全职学习 iOS 编程，结果发现相关 API 对第三方开发人员不可用，而我想做的事情是无法接受 iTunes 商店部署。这是我的朋友告诉我的，但我似乎在应用程序开发指南中找不到任何相关内容。所以，我来这里是想问问在这方面有更多经验的人，我想做的事情是否可行。不再。

我认为这是一个有效的高级问题，可能会被误解为 I-didn't-do-my-homework-plz-give-me-teh-codez 问题。如果我在这里的判断是错误的，请随时删除或否决这个问题，让您心生鄙视。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-05-18T16:30:48.877

是的，您可以这样做，而且我认为您的问题足够具体，可以归入此处。你不是唯一一个想要这样做的人，而且确实需要一点点挖掘才能弄清楚你能做什么和不能做什么。

AV Foundation 允许您使用 AVAssetReader 对 H.264 视频进行硬件加速解码，此时您将收到 BGRA 格式的原始解码视频帧。这些可以使用`glTexImage2D()`iOS 5.0 中的任一或更高效的纹理缓存上传到纹理。从那里，您可以处理显示或从 OpenGL ES 检索帧，并使用 AVAssetWriter 对结果执行硬件加速的 H.264 编码。所有这些都使用公共 API，因此您永远不会接近会导致 App Store 拒绝的东西。

但是，您不必滚动自己的实现。我的 BSD 许可开源框架[GPUImage](https://github.com/BradLarson/GPUImage)封装了这些操作并为您处理所有这些。您为输入的 H.264 电影创建一个 GPUImageMovie 实例，在其上附加过滤器（例如叠加混合或色度键操作），然后将这些过滤器附加到 GPUImageView 进行显示和/或附加到 GPUImageMovieWriter 以重新编码 H. 264 电影来自处理过的视频。

我目前遇到的一个问题是我不遵守视频中的时间戳进行播放，因此帧的处理速度与从电影中解码的速度一样快。对于视频的过滤和重新编码，这不是问题，因为时间戳会传递到记录器，但对于直接显示到屏幕，这意味着视频可以加速多达 2-4 倍. 我欢迎任何可以让您将播放速率与实际视频时间戳同步的贡献。

我目前可以在 iPhone 4 上以超过 30 FPS 的速度播放、过滤和重新编码 640x480 视频，在 ~20-25 FPS 上播放 720p 视频，而 iPhone 4S 能够以远高于 30 FPS 的速度进行 1080p 过滤和编码. 一些更昂贵的过滤器会对 GPU 造成负担并稍微减慢速度，但大多数过滤器都在这些帧率范围内运行。

如果你愿意，你可以检查 GPUImageMovie 类，看看它是如何上传到 OpenGL ES 的，但相关代码如下：

```
- (void)startProcessing;
{
    NSDictionary *inputOptions = [NSDictionary dictionaryWithObject:[NSNumber numberWithBool:YES] forKey:AVURLAssetPreferPreciseDurationAndTimingKey];
    AVURLAsset *inputAsset = [[AVURLAsset alloc] initWithURL:self.url options:inputOptions];

    [inputAsset loadValuesAsynchronouslyForKeys:[NSArray arrayWithObject:@"tracks"] completionHandler: ^{
        NSError *error = nil;
        AVKeyValueStatus tracksStatus = [inputAsset statusOfValueForKey:@"tracks" error:&error];
        if (!tracksStatus == AVKeyValueStatusLoaded) 
        {
            return;
        }
        reader = [AVAssetReader assetReaderWithAsset:inputAsset error:&error];

        NSMutableDictionary *outputSettings = [NSMutableDictionary dictionary];
        [outputSettings setObject: [NSNumber numberWithInt:kCVPixelFormatType_32BGRA]  forKey: (NSString*)kCVPixelBufferPixelFormatTypeKey];
        // Maybe set alwaysCopiesSampleData to NO on iOS 5.0 for faster video decoding
        AVAssetReaderTrackOutput *readerVideoTrackOutput = [AVAssetReaderTrackOutput assetReaderTrackOutputWithTrack:[[inputAsset tracksWithMediaType:AVMediaTypeVideo] objectAtIndex:0] outputSettings:outputSettings];
        [reader addOutput:readerVideoTrackOutput];

        NSArray *audioTracks = [inputAsset tracksWithMediaType:AVMediaTypeAudio];
        BOOL shouldRecordAudioTrack = (([audioTracks count] > 0) && (self.audioEncodingTarget != nil) );
        AVAssetReaderTrackOutput *readerAudioTrackOutput = nil;

        if (shouldRecordAudioTrack)
        {            
            audioEncodingIsFinished = NO;

            // This might need to be extended to handle movies with more than one audio track
            AVAssetTrack* audioTrack = [audioTracks objectAtIndex:0];
            readerAudioTrackOutput = [AVAssetReaderTrackOutput assetReaderTrackOutputWithTrack:audioTrack outputSettings:nil];
            [reader addOutput:readerAudioTrackOutput];
        }

        if ([reader startReading] == NO) 
        {
            NSLog(@"Error reading from file at URL: %@", self.url);
            return;
        }

        if (synchronizedMovieWriter != nil)
        {
            __unsafe_unretained GPUImageMovie *weakSelf = self;

            [synchronizedMovieWriter setVideoInputReadyCallback:^{
                [weakSelf readNextVideoFrameFromOutput:readerVideoTrackOutput];
            }];

            [synchronizedMovieWriter setAudioInputReadyCallback:^{
                [weakSelf readNextAudioSampleFromOutput:readerAudioTrackOutput];
            }];

            [synchronizedMovieWriter enableSynchronizationCallbacks];
        }
        else
        {
            while (reader.status == AVAssetReaderStatusReading) 
            {
                [self readNextVideoFrameFromOutput:readerVideoTrackOutput];

                if ( (shouldRecordAudioTrack) && (!audioEncodingIsFinished) )
                {
                    [self readNextAudioSampleFromOutput:readerAudioTrackOutput];
                }

            }            

            if (reader.status == AVAssetWriterStatusCompleted) {
                [self endProcessing];
            }
        }
    }];
}

- (void)readNextVideoFrameFromOutput:(AVAssetReaderTrackOutput *)readerVideoTrackOutput;
{
    if (reader.status == AVAssetReaderStatusReading)
    {
        CMSampleBufferRef sampleBufferRef = [readerVideoTrackOutput copyNextSampleBuffer];
        if (sampleBufferRef) 
        {
            runOnMainQueueWithoutDeadlocking(^{
                [self processMovieFrame:sampleBufferRef]; 
            });

            CMSampleBufferInvalidate(sampleBufferRef);
            CFRelease(sampleBufferRef);
        }
        else
        {
            videoEncodingIsFinished = YES;
            [self endProcessing];
        }
    }
    else if (synchronizedMovieWriter != nil)
    {
        if (reader.status == AVAssetWriterStatusCompleted) 
        {
            [self endProcessing];
        }
    }
}

- (void)processMovieFrame:(CMSampleBufferRef)movieSampleBuffer; 
{
    CMTime currentSampleTime = CMSampleBufferGetOutputPresentationTimeStamp(movieSampleBuffer);
    CVImageBufferRef movieFrame = CMSampleBufferGetImageBuffer(movieSampleBuffer);

    int bufferHeight = CVPixelBufferGetHeight(movieFrame);
    int bufferWidth = CVPixelBufferGetWidth(movieFrame);

    CFAbsoluteTime startTime = CFAbsoluteTimeGetCurrent();

    if ([GPUImageOpenGLESContext supportsFastTextureUpload])
    {
        CVPixelBufferLockBaseAddress(movieFrame, 0);

        [GPUImageOpenGLESContext useImageProcessingContext];
        CVOpenGLESTextureRef texture = NULL;
        CVReturn err = CVOpenGLESTextureCacheCreateTextureFromImage(kCFAllocatorDefault, coreVideoTextureCache, movieFrame, NULL, GL_TEXTURE_2D, GL_RGBA, bufferWidth, bufferHeight, GL_BGRA, GL_UNSIGNED_BYTE, 0, &texture);

        if (!texture || err) {
            NSLog(@"Movie CVOpenGLESTextureCacheCreateTextureFromImage failed (error: %d)", err);  
            return;
        }

        outputTexture = CVOpenGLESTextureGetName(texture);
        //        glBindTexture(CVOpenGLESTextureGetTarget(texture), outputTexture);
        glBindTexture(GL_TEXTURE_2D, outputTexture);
        glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);
        glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);
        glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE);
        glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE);

        for (id<GPUImageInput> currentTarget in targets)
        {            
            NSInteger indexOfObject = [targets indexOfObject:currentTarget];
            NSInteger targetTextureIndex = [[targetTextureIndices objectAtIndex:indexOfObject] integerValue];

            [currentTarget setInputSize:CGSizeMake(bufferWidth, bufferHeight) atIndex:targetTextureIndex];
            [currentTarget setInputTexture:outputTexture atIndex:targetTextureIndex];

            [currentTarget newFrameReadyAtTime:currentSampleTime];
        }

        CVPixelBufferUnlockBaseAddress(movieFrame, 0);

        // Flush the CVOpenGLESTexture cache and release the texture
        CVOpenGLESTextureCacheFlush(coreVideoTextureCache, 0);
        CFRelease(texture);
        outputTexture = 0;        
    }
    else
    {
        // Upload to texture
        CVPixelBufferLockBaseAddress(movieFrame, 0);

        glBindTexture(GL_TEXTURE_2D, outputTexture);
        // Using BGRA extension to pull in video frame data directly
        glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA, bufferWidth, bufferHeight, 0, GL_BGRA, GL_UNSIGNED_BYTE, CVPixelBufferGetBaseAddress(movieFrame));

        CGSize currentSize = CGSizeMake(bufferWidth, bufferHeight);
        for (id<GPUImageInput> currentTarget in targets)
        {
            NSInteger indexOfObject = [targets indexOfObject:currentTarget];
            NSInteger targetTextureIndex = [[targetTextureIndices objectAtIndex:indexOfObject] integerValue];

            [currentTarget setInputSize:currentSize atIndex:targetTextureIndex];
            [currentTarget newFrameReadyAtTime:currentSampleTime];
        }
        CVPixelBufferUnlockBaseAddress(movieFrame, 0);
    }

    if (_runBenchmark)
    {
        CFAbsoluteTime currentFrameTime = (CFAbsoluteTimeGetCurrent() - startTime);
        NSLog(@"Current frame time : %f ms", 1000.0 * currentFrameTime);
    }
} 
```

# javascript - 在 JavaScript 中将小数合二为一是个好主意吗？（作为存储优化方案）

> ID：10646660
> 
> 赞同：0
> 
> 时间：2012-05-18T04:19:39.873
> 
> 标签：javascript, mongodb, optimization, numbers, format

据说

> javascript 中的所有数字都是 64 位浮点数。

我想知道数字是否总是在内存中使用 64 位？

我有这样的数据结构（在 C 风格的代码中）

```
{
  int x; // [0-9]
  int y; // [0-9]
  int d; // [0-3]
} 
```

x 和 y 将绝对在 [0-9] 的范围内，并且 d 的唯一可能值是 0、1、2、3。

如果我将它们存储为 3 个分隔数字，该结构会使用 64 位 * 3 = 192 位 = 24 字节吗？

如果是这样，我想将它存储在一个数字中，x * 100 + y * 10 + d，这应该只使用 64 位（8 字节）。在不考虑 CPU 使用率的情况下这是否更好。

我还考虑了字符串解决方案。

```
x.toString() + y.toString() + d.toString(); 
```

因为所有的 x、y 和 d 都小于 10，所以它们应该只有 1 个字符，16 位。所以结构变成 16 bits * 3 = 48 bits = 6 Bytes。这是最优化存储的解决方案吗？

那么mongoDB中的存储呢？如果我将数据结构存储到mongoDB中，是不是同样的情况？

* * *

我写了一个片段来测试 mongo 中的存储。最终结构包括上述结构的 3 个实例。总量为66816。

我将它们存储到 3 个独立的数据库中：

*   布局完整（我丢失了一个's'）：一个数组包括 3 {x: valueX, y: valueY, d: valueD}
*   layouts-int: xydxydxyd (十进制) ex. 233250750 表示 {x:2,y:3,d:3},{x:2,y:5,d:0},{x:7,y:5,d:0}
*   layouts-str：将上面的 int 转换为 2-char 字符串。String.fromCharCode(i >> 16) + String.fromCharCode(i & 0xFFFF)

结果是……

```
> show dbs
layout-full     0.03125GB
layouts-int     0.03125GB
layouts-str     0.03125GB 
```

但细节是...

布局完整的集合

```
"size" : 8017920,
"avgObjSize" : 120,
"storageSize" : 11182080, 
```

layouts-int 中的集合

```
"size" : 2138112,
"avgObjSize" : 32,
"storageSize" : 5591040, 
```

layouts-str 中的集合

```
"size" : 2405396,
"avgObjSize" : 36.000299329501914,
"storageSize" : 5591040, 
```

从这些结果中，我发现 int 存储是最节省空间的方法。

我也这样做了：

```
> db.tiny.save({})
> db.tiny.stats().avgObjSize
24
> db.tiny.remove()
> db.tiny.save({l:null})
> db.tiny.stats().avgObjSize
28
> db.tiny.remove()
> db.tiny.save({l:[{x:null,y:null,d:null},{x:null,y:null,d:null},{x:null,y:null,d:null}]})
> db.tiny.stats().avgObjSize
84 
```

所以`_id`将使用 24 个字节，而关键部分 ,`{l:`将使用 4 = 28 - 24 个字节。

而且你会发现一个整数使用 32 - 28 = 4 个字节，所以小于 2^31 的整数似乎在 mongo db 中存储为 32 位整数。

还有 in string 解决方案，一个 2-char 字符串使用 36 - 28 = 8 个字节，正好等于我猜到的值。

而对于全结构解决方案，从上次的 tiny db 测试中，您可以看到没有数据的结构使用 84 字节，因此数据使用 120 - 84 = 36 字节 = 9 * 4 字节。我的最终数据结构中只有 9 个整数（三元组 x、y、d）。这也证明整数存储为 32 位整数。

为什么空结构使用 84 字节？

通过一些更多的实验，我发现1个数组或空json对象使用4个字节，而一个键使用* 4。

所以，空结构实际上是

```
{                                               // 1 object +4 bytes       = 4
  '_id': ObjectId('0123456789abcdef012345678'), // 3-char key + 12-byte id = 24
  'l': [                                        // 1-char key + 1 array    = 8
    {'x': null, 'y': null, 'd': null},          // 1 object+ 3 keys        = 16
    {'x': null, 'y': null, 'd': null},          // 1 object+ 3 keys        = 16
    {'x': null, 'y': null, 'd': null}           // 1 object+ 3 keys        = 16
  ]
} 
```

结果是 4 + 24 + 8 + 16 * 3 = 84 字节。

我希望我的实验对其他人有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T08:15:12.693

这会将三个数字存储在一个字符串中。做得更好的唯一方法是使用类型化数组，但我不确定这是否是一个选项。

```
function showMeSomeMagic(x, y, d) {
  // we assume that:
  // - x, y are integers in the range [0 9] 
  // - d is an integer in the range [0 3]
  // if not add the appropriate checks/casting/coercing
  var n = (d << 8) + (y << 4) + x;
  // return a String made of a single Unicode code point in 
  // the range [0xE000 0xE399], i.e. inside the Unicode BMP PUA
  return String.fromCharCode( n + 0xE000 );
}

function showMeSomeInverseMagic(s) {
  // we assume that:
  // s is a String created by showMeSomeMagic
  var n = s.charCodeAt(0) - 0xE000;
  var x = n & 15;
  var y = (n >> 4) & 15;
  var d = (n >> 8) & 15;
  return { x:x, y:y, d:d };
} 
```

编辑：根据OP评论更新

# r - 如何将 R Markdown 转换为 HTML？即，“Knit HTML”在 Rstudio 0.96 中做了什么？

> ID：10646665
> 
> 赞同：71
> 
> 时间：2012-05-18T04:20:31.210
> 
> 标签：r, rstudio, knitr, r-markdown

**在 Rstudio 0.96 中的 R Markdown 文件上按“Knit HTML”时会运行哪些命令？**

我的动机是，当我在另一个文本编辑环境中时，我可能想运行相同的命令，或者我可能想将命令合并到一个更大的`makefile`.

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2012-06-10T13:30:27.713

### 基本脚本

所以现在[R`markdown`包已经发布了](http://jeffreyhorner.tumblr.com/post/24404112057/announcing-the-r-markdown-package)，这里有一些代码将 Knit 的功能复制到 Html。

```
require(knitr) # required for knitting from rmd to md
require(markdown) # required for md to html 
knit('test.rmd', 'test.md') # creates md file
markdownToHTML('test.md', 'test.html') # creates html file
browseURL(paste('file://', file.path(getwd(),'test.html'), sep='')) # open file in browser 
```

`test.rmd`R markdown 文件的名称在哪里。请注意，我对 browseURL 行不是 100% 有信心（因此我的问题是关于[在 Web 浏览器中打开文件](https://stackoverflow.com/a/10969110/180892)）。

### markdownToHTML 选项

好处`markdownToHTML`是在如何创建 HTML 方面有很多选择（请参阅 参考资料`?markdownHTMLOptions`）。因此，例如，如果您只想要一个没有所有标头信息的代码片段，您可以编写：

```
markdownToHTML('test.md', 'test.html', options='fragment_only') 
```

或者，如果您不喜欢硬换行（即，在 Markdown 源代码中有单个手动换行符时插入换行符），您可以省略 'hard_wrap' 选项。

```
# The default options are 'hard_wrap', 'use_xhtml', 
#      'smartypants', and 'base64_images'.
markdownToHTML('test.md', 'test.html', 
       options=c('use_xhtml', 'base64_images')) 
```

### 生成文件

这也可以全部添加到生成文件中，可能使用`Rscript -e`（例如，[类似这样的东西](https://stackoverflow.com/a/10943794/180892)）。这是我放在一起的一个基本示例 makefile，其中`test`指示 rmd 文件被称为`test.rmd`.

```
RMDFILE=test

html :
    Rscript -e "require(knitr); require(markdown); knit('$(RMDFILE).rmd', '$(RMDFILE).md'); markdownToHTML('$(RMDFILE).md', '$(RMDFILE).html', options=c('use_xhtml', 'base64_images')); browseURL(paste('file://', file.path(getwd(),'$(RMDFILE).html'), sep=''))" 
```

makefile 使用我首选的降价选项：即，`options=c('use_xhtml', 'base64_images')`

* * *

## 回答 #2

> 赞同：43
> 
> 时间：2012-05-18T14:16:07.293

放入`Sys.sleep(30)`一个块，你会清楚地看到 RStudio 调用了哪些命令。基本上他们是

1.  `library(knitr); knit()`获取降价文件；
2.  RStudio 具有将 Markdown 转换为 HTML 的内部函数；

第二步会在下一版本的[**markdown**](http://cran.r-project.org/package=markdown)包中更加透明。目前，您可以使用`knitr::knit2html('your_file.Rmd')`RStudio 为您提供类似的 HTML 文件。

* * *

**2019/09/17 更新：**上述答案适用于 RStudio v0.96（2012 年）。现在 R Markdown 是通过 编译的`rmarkdown::render()`，它使用 Pandoc 而不是退休的 R 包**markdown**。有关更多详细信息，请参阅[R Markdown、Knitr、Pandoc 和 Bookdown 之间的关系](https://stackoverflow.com/q/40563479/559676)。

* * *

## 回答 #3

> 赞同：28
> 
> 时间：2015-06-26T00:36:05.827

[简而言之，来自knitr 的](http://kbroman.org/knitr_knutshell/pages/Rmarkdown.html)非常简单的命令行方法：

```
R -e "rmarkdown::render('knitr_example.Rmd')" 
```

这需要`rmarkdown`安装`install.packages(rmarkdown)`并且[pandoc](http://pandoc.org/)已安装（显然它与 Rstudio 一起提供，有关更多详细信息，请参阅[knitr in a knutshell](http://kbroman.org/knitr_knutshell/pages/Rmarkdown.html)）。

到目前为止，当我使用它时，它很好地将所有绘图放在 HTML 文件中，而不是作为图形目录中的图像，并清理任何中间文件（如果有）；就像 RStudio 中的编译一样。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-07-06T23:26:05.383

看来您应该调用 rmarkdown::render() 而不是 knitr::knit2html() 因为 a.rmd 似乎是 R Markdown v2 文档。

# java - 长类型名称会影响性能吗？

> ID：10646670
> 
> 赞同：4
> 
> 时间：2012-05-18T04:21:27.280
> 
> 标签：java, jvm

类型名称 like`com.example.Dog`将被编译到`com/example/Dog`.class 文件中。大多数JVM将如何优化它？似乎更长的类型名称（或成员名称）需要更多的字符串比较。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-18T04:34:39.503

长类型（类和接口）名称在符号表中占据空间。这些名称在链接时使用，如[Java 虚拟机规范的第 5 章](http://docs.oracle.com/javase/specs/jvms/se7/html/jvms-5.html)中详细描述的那样。完成所有这些链接后，除非您使用反射，否则名称对运行时性能没有影响。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-18T04:28:56.320

java编译器生成字节码，没有字符串比较。

用 javap 检查这个类并查看字节码。

例如，这个

```
class A extends java.lang.Object{
    static final boolean $assertionsDisabled;
    A();
    public static void main(java.lang.String[]);
    static {};
} 
```

转这个

```
class A extends java.lang.Object{
static final boolean $assertionsDisabled;

A();
  Code:
   0:   aload_0
   1:   invokespecial   #1; //Method java/lang/Object."<init>":()V
   4:   return

public static void main(java.lang.String[]);
  Code:
   0:   getstatic   #2; //Field $assertionsDisabled:Z
   3:   ifne    14
   6:   new #3; //class java/lang/AssertionError
   9:   dup
   10:  invokespecial   #4; //Method java/lang/AssertionError."<init>":()V
   13:  athrow
   14:  getstatic   #5; //Field java/lang/System.out:Ljava/io/PrintStream;
   17:  ldc #6; //String hi
   19:  invokevirtual   #7; //Method java/io/PrintStream.println:(Ljava/lang/String;)V
   22:  return

static {};
  Code:
   0:   ldc_w   #8; //class A
   3:   invokevirtual   #9; //Method java/lang/Class.desiredAssertionStatus:()Z
   6:   ifne    13
   9:   iconst_1
   10:  goto    14
   13:  iconst_0
   14:  putstatic   #2; //Field $assertionsDisabled:Z
   17:  return

} 
```

jvm 在内部使用数字 ID。长变量名和短变量名之间没有区别。

编辑：添加 -l 输出

```
Compiled from "A.java"
class A extends java.lang.Object{
static final boolean $assertionsDisabled;

A();
  Code:
   0:   aload_0
   1:   invokespecial   #1; //Method java/lang/Object."<init>":()V
   4:   return

  LineNumberTable: 
   line 3: 0

public static void main(java.lang.String[]);
  Code:
   0:   getstatic   #2; //Field $assertionsDisabled:Z
   3:   ifne    14
   6:   new #3; //class java/lang/AssertionError
   9:   dup
   10:  invokespecial   #4; //Method java/lang/AssertionError."<init>":()V
   13:  athrow
   14:  getstatic   #5; //Field java/lang/System.out:Ljava/io/PrintStream;
   17:  ldc #6; //String hi
   19:  invokevirtual   #7; //Method java/io/PrintStream.println:(Ljava/lang/String;)V
   22:  return

  LineNumberTable: 
   line 6: 0
   line 7: 14
   line 8: 22

static {};
  Code:
   0:   ldc_w   #8; //class A
   3:   invokevirtual   #9; //Method java/lang/Class.desiredAssertionStatus:()Z
   6:   ifne    13
   9:   iconst_1
   10:  goto    14
   13:  iconst_0
   14:  putstatic   #2; //Field $assertionsDisabled:Z
   17:  return

  LineNumberTable: 
   line 3: 0

} 
```

并添加 -verbose -s

```
Compiled from "A.java"
class A extends java.lang.Object
  SourceFile: "A.java"
  minor version: 0
  major version: 50
  Constant pool:
const #1 = Method   #10.#23;    //  java/lang/Object."<init>":()V
const #2 = Field    #8.#24; //  A.$assertionsDisabled:Z
const #3 = class    #25;    //  java/lang/AssertionError
const #4 = Method   #3.#23; //  java/lang/AssertionError."<init>":()V
const #5 = Field    #26.#27;    //  java/lang/System.out:Ljava/io/PrintStream;
const #6 = String   #28;    //  hi
const #7 = Method   #29.#30;    //  java/io/PrintStream.println:(Ljava/lang/String;)V
const #8 = class    #31;    //  A
const #9 = Method   #32.#33;    //  java/lang/Class.desiredAssertionStatus:()Z
const #10 = class   #34;    //  java/lang/Object
const #11 = Asciz   $assertionsDisabled;
const #12 = Asciz   Z;
const #13 = Asciz   <init>;
const #14 = Asciz   ()V;
const #15 = Asciz   Code;
const #16 = Asciz   LineNumberTable;
const #17 = Asciz   main;
const #18 = Asciz   ([Ljava/lang/String;)V;
const #19 = Asciz   StackMapTable;
const #20 = Asciz   <clinit>;
const #21 = Asciz   SourceFile;
const #22 = Asciz   A.java;
const #23 = NameAndType #13:#14;//  "<init>":()V
const #24 = NameAndType #11:#12;//  $assertionsDisabled:Z
const #25 = Asciz   java/lang/AssertionError;
const #26 = class   #35;    //  java/lang/System
const #27 = NameAndType #36:#37;//  out:Ljava/io/PrintStream;
const #28 = Asciz   hi;
const #29 = class   #38;    //  java/io/PrintStream
const #30 = NameAndType #39:#40;//  println:(Ljava/lang/String;)V
const #31 = Asciz   A;
const #32 = class   #41;    //  java/lang/Class
const #33 = NameAndType #42:#43;//  desiredAssertionStatus:()Z
const #34 = Asciz   java/lang/Object;
const #35 = Asciz   java/lang/System;
const #36 = Asciz   out;
const #37 = Asciz   Ljava/io/PrintStream;;
const #38 = Asciz   java/io/PrintStream;
const #39 = Asciz   println;
const #40 = Asciz   (Ljava/lang/String;)V;
const #41 = Asciz   java/lang/Class;
const #42 = Asciz   desiredAssertionStatus;
const #43 = Asciz   ()Z;

{
static final boolean $assertionsDisabled;
  Signature: Z

A();
  Signature: ()V
  LineNumberTable: 
   line 3: 0

  Code:
   Stack=1, Locals=1, Args_size=1
   0:   aload_0
   1:   invokespecial   #1; //Method java/lang/Object."<init>":()V
   4:   return
  LineNumberTable: 
   line 3: 0

public static void main(java.lang.String[]);
  Signature: ([Ljava/lang/String;)V
  LineNumberTable: 
   line 6: 0
   line 7: 14
   line 8: 22

  Code:
   Stack=2, Locals=1, Args_size=1
   0:   getstatic   #2; //Field $assertionsDisabled:Z
   3:   ifne    14
   6:   new #3; //class java/lang/AssertionError
   9:   dup
   10:  invokespecial   #4; //Method java/lang/AssertionError."<init>":()V
   13:  athrow
   14:  getstatic   #5; //Field java/lang/System.out:Ljava/io/PrintStream;
   17:  ldc #6; //String hi
   19:  invokevirtual   #7; //Method java/io/PrintStream.println:(Ljava/lang/String;)V
   22:  return
  LineNumberTable: 
   line 6: 0
   line 7: 14
   line 8: 22

  StackMapTable: number_of_entries = 1
   frame_type = 14 /* same */

static {};
  Signature: ()V
  LineNumberTable: 
   line 3: 0

  Code:
   Stack=1, Locals=0, Args_size=0
   0:   ldc_w   #8; //class A
   3:   invokevirtual   #9; //Method java/lang/Class.desiredAssertionStatus:()Z
   6:   ifne    13
   9:   iconst_1
   10:  goto    14
   13:  iconst_0
   14:  putstatic   #2; //Field $assertionsDisabled:Z
   17:  return
  LineNumberTable: 
   line 3: 0

  StackMapTable: number_of_entries = 2
   frame_type = 13 /* same */
   frame_type = 64 /* same_locals_1_stack_item */
     stack = [ int ]

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-18T05:10:28.207

这部分取决于在 JIT 编译时是否可以解决实际的精确方法。如果可以，那么编译后的代码可以简单地分支到相关代码。[例如，您可以在最终与非最终方法调用](http://www.javamex.com/tutorials/java_final_performance_vs_non_final_timings.shtml)的这些时间中看到 Hotspot 这样做的证据。事实上，没有专门针对 final 方法的优化（这是我在开发人员中发现的常见误解）。但正如这些数字所示，对于可以确定精确方法的情况（无论是否最终确定），都存在优化*。*

如果无法识别精确的方法，那么 VM 至少可以对方法签名的*哈希码*进行操作，这样一旦针对从给定方法的给定字节码偏移量进行的调用计算了一次哈希码，它就不会需要重新计算。我承认我没有查看 Hotspot 或其他 JVM 是否真的这样做，但原则上这似乎是一件非常明显的事情。

# doctrine - 使用复合键从学说集合中获取值

> ID：10646672
> 
> 赞同：1
> 
> 时间：2012-05-18T04:21:31.540
> 
> 标签：doctrine, symfony-1.4

4 用于我的 Doctrine 应用程序。

在那里我使用以下教义命令来检索人员对象集合

```
//query
$people = $q->execute(); 
```

这将返回 20 个对象。person 对象的主键是具有三个属性的复合键。那些是

```
id
department_id
name 
```

我需要通过如下搜索来获取人员对象。

```
$id = 10;
$department_id = 1;
$name = "abc";

$people->get($id, $department_id, $name); 
```

但这不起作用，也没有给出正确的结果。我试过这个，它给出了空结果，似乎我的集合主键没有设置。

```
$people->getKeyColumn(); 
```

我不想在收集和处理它时经历一个 foreach 循环，因为当我处理大约 500 人时，它会减慢我的应用程序。

有人可以帮我解决这个问题，从教义集合中获取值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T09:13:14.417

你能用这样的东西吗？

```
 $people = Doctrine::getTable('Persons')
    ->createQuery()
    ->where('id = ? AND department_id = ? AND name = ?', array($id, $department_id, $name))
    ->execute(); 
```

它将为您提供已通过提供的参数过滤的 DoctrineCollection。

这里的“Persons”是一个 Doctrine 模型名称，而不是来自 mySQL 的表名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T10:07:08.343

你也可以使用 Doctrine 的魔法查找器`findBy*()`：

```
$people = Doctrine_Core::getTable('Persons')
    ->findByIdAndDepartmentIdAndName($id, $department_id, $name); 
```

# delphi - 64 位 sharemem.pas/borlndmm.dll XE2

> ID：10646673
> 
> 赞同：4
> 
> 时间：2012-05-18T04:21:35.173
> 
> 标签：delphi, 64-bit, delphi-xe2

几个问题：

1.  当 sharemem.pas 像在 32 位中一样使用时，Delphi XE2 64 位应用程序是否在 borlndmm.dll 中链接？
2.  它们的导出签名是否与 32 位 borlndmm.dll 相同？
3.  是不是也叫borlndmm.dll？

干杯。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-18T05:14:15.837

> 问：在使用 sharemem.pas 时，Delphi XE2 64 位应用程序是否会在 borlndmm.dll 中链接，就像在 32 位中一样？

A: 是的，Delphi 使用 64 位版本的 borlndmm.dll 库

> 问：它们的导出签名是否与 32 位 borlndmm.dll 相同？

A: 是的，签名是一样的。

> 问：是不是也叫borlndmm.dll？

答：是的，它名为**borlndmm.dll**，位于rad studio (delphi) 安装的*bin64文件夹中。*

# java - 将安卓手机变成游戏手柄，通过wi-Fi连接到电脑

> ID：10646674
> 
> 赞同：5
> 
> 时间：2012-05-18T04:21:38.887
> 
> 标签：java, android, c, embedded, hardware

我正在尝试为具有基于加速度计的方向控制的 android 制作游戏手柄。到目前为止，我已经成功完成了 android 部分。现在我需要使用 Wi-Fi 连接游戏手柄的计算机 I/O 端口。我不知道该怎么做。为此，我需要嵌入式系统编程知识。但我什至不知道从哪里开始？事实上我什至不知道这是否可能？我通过互联网搜索并发现了很多关于使用并行端口或串行端口连接的信息。但是每个页面都说你必须有一个并行端口母连接器才能做到这一点（*现在并行端口连接器已经灭绝，因为 USB 已经取代了它们*）。我知道当我通过 Wi-Fi 工作时，我不需要连接到任何这些外部引脚连接器。

1.  这对我正在尝试构建的东西可能吗？
2.  如何使用 Wi-Fi 访问 I/O 端口（无需将任何外部连接到端口）？
3.  是否可以在android（java）和计算机（C嵌入式系统编程）之间传输数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T04:30:28.890

*   [将 WiFi 驱动程序移植到 Android](http://blog.linuxconsulting.ro/2010/04/porting-wifi-drivers-to-android.html)
*   [如何编写一个Android SocketServer来监听wifi](https://stackoverflow.com/questions/5054076/how-to-write-an-android-socketserver-to-listen-on-wifi)

没有什么是不可能的，以上链接可能对您有所帮助 祝您在项目中取得成功

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-11T14:06:29.323

我使用 WP7 做了类似的事情。我们做了一个服务器端（PC）和一个客户端（WP）。连接是通过套接字，使用 wi-fi。我认为您应该开始研究套接字和线程。

# c++ - C++ 中的 AVL 树 - 代码日志

> ID：10646683
> 
> 赞同：0
> 
> 时间：2012-05-18T04:23:01.257
> 
> 标签：c++, avl-tree

我正在用 C++ 编写一个 AVL 树程序。我基于我之前制作的 BST 优先队列程序。不幸的是，每次添加应该导致旋转的新节点时，都会引发堆栈溢出异常。

到目前为止，这是我的代码：

节点.h

```
#ifndef NODE_H_
#define NODE_H_

#include "stdio.h"
#include <iostream>
using namespace std;

class node
{
    public:node(int inputValue)
        {
            value = inputValue;
            Right = NULL;
            Left = NULL;
            Parent = NULL;
        }

        node* Right;
        node* Left;
        node* Parent;
        int value;
        int Priority;

        int AvlValue;
        void UpdateHeight();

    private:int Height(node* root);
};

void node::UpdateHeight()
{
    int Right = Height(this->Right);
    int Left = Height(this->Left);
    if (Right == -1)
        Right = 0;
    if (Left == -1)
        Left = 0;

    AvlValue = Left - Right;
}

int node::Height(node* root)
{
    if (root == NULL) return -1;
    return max(Height(root->Left), Height(root->Right)) + 1;
}
#endif 
```

AVL.h

```
#ifndef AVL_H_
#define AVL_H_

#include "node.h"
#include <string>
#include <iostream>
using namespace std;

class AVL
{
    private:
        int size;
        node* head;
    public:
        AVL(void);
        ~AVL(void);

        void ADD(int nvalue, int nPriority);
        int Peek();
        int RemoveAndDisplay();
        int Height(node* root);
        int SearchFor(int Priority);

        void MenuSelection(int indicator);
        void Controller();
        int MainMenu();

        void PreOrder(node* root);
        void inorder(node* root);

        void Traverse(node* root);
        node* First();
        void LevelOut();

        node* LRotation(node* current);
        node* RRotation(node* current);
        node* DoubleRotationLR(node* current);
        node* DoubleRotationRL(node* current);
};

AVL::AVL()
{
    size = 0;
    head = NULL;
}

AVL::~AVL()
{
}

void AVL::LevelOut()
{
    Traverse(head);

    node* sort;
    node* current = head;
    while(current->Left != NULL || current->Right != NULL)
    {
        if(current->AvlValue != 2 && current->AvlValue != -2)
        {
            if(current->Left != NULL)
            {
                current = current->Left;
            }
            else if(current->Right != NULL)
            {
                current = current->Right;
            }
        }
        else
        {
            sort = current;
            if (sort->AvlValue == 2)
            {
                if (sort->Left->AvlValue == 1)
                {
                    RRotation(sort);
                    Traverse(head);
                }
                else if(sort->Left->AvlValue == -1)
                {
                    DoubleRotationLR(sort);
                    Traverse(head);
                }
            }
            else
            {
                if (sort->Right->AvlValue == -1)
                {
                    LRotation(sort);
                    Traverse(head);
                }
                else if(sort->Right->AvlValue == 1)
                {
                    DoubleRotationRL(sort); 
                    Traverse(head);
                }
            }
        }
    }
}

node* AVL::LRotation(node* current)
{
    node* RightChild = current->Right;
    current->Parent = RightChild;
    RightChild->Left = current;

    return RightChild;
}

node* AVL::RRotation(node* current)
{
    node* LeftChild = current->Left;
    current->Parent = LeftChild;
    LeftChild->Right = current;

    return LeftChild;
}

node* AVL::DoubleRotationLR(node* current)
{
    node* tmp = current;
    tmp->Left = LRotation(tmp->Left);
    tmp = RRotation(tmp);
    return tmp;
}

node* AVL::DoubleRotationRL(node* current)
{
    node* tmp = current;
    tmp->Right = RRotation(tmp->Right);
    tmp = LRotation(tmp);
    return tmp;
}

int AVL::Peek()
{
    node* current = head;
    while(current->Left != NULL)
    {
        current = current->Left;
    }
    return current->value;
}

int AVL::RemoveAndDisplay()
{
    int valueReturn = -1;
    node* current = head;
    node* deleterPointer;

    if(current->Left != NULL)
    {
        while(current->Left != NULL)
        {
            current = current->Left;
        }
        valueReturn = current->value;

        deleterPointer = current->Parent;
        delete current;
        deleterPointer->Left = NULL;
    }
    else
    {
        valueReturn = current->value;
        current = current->Right;
        delete head;
        head = current;
    }
    size--;
    LevelOut();
    return valueReturn;
}

int AVL::SearchFor(int sPriority)
{
    node* current = head;
    bool keepGoing = true;
    int valueToReturn = -1;

    while(keepGoing)
    {
        if(current->Priority == sPriority)
        {
            valueToReturn = current->value;
            keepGoing = false;
        }
        else
        {
            if(current->Priority > sPriority && current->Left != NULL)
            {
                current = current->Left;
                keepGoing = true;
            }
            else if(current->Priority < sPriority && current->Right != NULL)
            {
                current = current->Right;
                keepGoing = true;
            }
            else
            {
                keepGoing = false;
            }
        }
    }
    return valueToReturn;
}

void AVL::ADD(int nvalue, int nPriority)
{
    node* current = head;
    bool nextLvL = true;
    if (head == NULL)
    {
        head = new node(nvalue);
        head->Priority = nPriority;
    }
    else
    {
        while(nextLvL)
        {
            if(current->Priority > nPriority)
            {
                if(current->Left != NULL)
                {
                    current = current->Left;
                    nextLvL = true;
                }
                else
                {
                    current->Left = new node(nvalue);
                    current->Left->Priority = nPriority;
                    current->Left->Parent = current;
                    nextLvL = false;
                }
            }
            else
            {
                if (current->Right != NULL)
                {
                    current = current->Right;
                    nextLvL = true;
                }
                else
                {
                    current->Right = new node(nvalue);
                    current->Right->Priority = nPriority;
                    current->Right->Parent = current;
                    nextLvL = false;
                }
            }
        }
    }
    size++;
    LevelOut();
}

int AVL::MainMenu()
{
    int inputvalue = 0;
    cout << "\t Main Menu " << endl;
    cout << "   1\. Add " << endl;
    cout << "   2\. Remove " << endl;
    cout << "   3\. Peek " << endl;
    cout << "   4\. SearchFor " << endl;
    cout << "   5\. Size " << endl;
    cout << "   6\. Inorder " << endl;
    cout << "   7\. PreOrder " << endl;
    cout << "   8\. Height " << endl;
    cout << "   0\. Quit " << endl;

    cout << "  Input: ";
    cin>>inputvalue;
    return inputvalue;
}

void AVL::MenuSelection(int indicator)
{
    int userInput = -1;
    int prior;
    int SearchForValue = -1;

    switch(indicator)
    {
    case 1:
        cout << "Value to add: ";
        cin>> userInput;
        cout << "Priority for input: ";
        cin>> prior;
        ADD(userInput, prior);
        break;
    case 2:
        cout << "Item Removed: " << RemoveAndDisplay() << endl;
        break;
    case 3:
        cout << "The first item in the Queue has a value of: " << Peek() << endl;
        break;
    case 4:
        cout << "Priority to Search for: ";
        cin>> prior;
        SearchForValue = SearchFor(prior);
        break;
    case 5:
        cout << "Total items in the Queue is: " << size << endl;
        break;
    case 6:
        cout << "First Value: " << First()->value << endl;
        inorder(head);
        printf("\n");
        break;
    case 7:
        PreOrder(head);
        printf("\n");
        break;
    case 8:
        cout << Height(head) << endl;
        break;
    case 0:
        cout << "\tGood Bye!" << endl;
        break;
    default:
        break;
    }

}

node* AVL::First()
{
    node* current = head;
    while(current->Left != NULL)
        current = current->Left;
    return current;
}

void AVL::Traverse(node* root)
{
    if (root != NULL)
    {
        root->UpdateHeight();
        Traverse(root->Left);
        Traverse(root->Right);
    }
}

void AVL::PreOrder(node* root)
{
    if(root != NULL){
        cout << root->value << ", ";
        PreOrder(root->Left);
        PreOrder(root->Right);
    }
}

void AVL::inorder(node* root)
{
    if(root != NULL){
        inorder(root->Left);
        cout << root->value << ", ";
        inorder(root->Right);
    }
}

int AVL::Height(node* root)
{
    if (root == NULL) return -1;
    return max(Height(root->Left), Height(root->Right)) + 1;
}

void AVL::Controller()
{
    int input = -1;
    while(input != 0)
    {
        input = MainMenu();
        MenuSelection(input);
    }
}

#endif 
```

AVL.cpp

```
#include "AVL.h"

int main()
{
    AVL avl;
    avl.Controller();
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T05:16:20.920

似乎是一个逻辑错误 - 经过一些`printf`调试后，有时一个被称为的节点似乎`root->Left`仍将`root`作为其`Right`成员。因此，呼叫`Height(root->Left)`最终将尝试`Height(root->Left->Right)`并再次遇到`root`。

（另外，`Height()`应该声明为静态的，因为它不`this`以任何方式使用。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T05:27:39.633

您真的要忽略 Rotation 调用的函数的返回值`LevelOut`吗？

例如，`AVL::LevelOut`调用： `RRotation(sort)`

其中宣布： `node* AVL::RRotation(node* current)`

:-)

# php - Facebook 错误 191 仅在 IE 上，可能是 realssl

> ID：10646688
> 
> 赞同：1
> 
> 时间：2012-05-18T04:23:58.603
> 
> 标签：php, facebook

我目前正在使用 PHP 开发一个应用程序，基本上它已经完成，并且在测试它时没有出现任何问题（Chrome），直到在 IE（7、8 和 9）上测试

该应用程序可以进行身份​​验证，但是每当我尝试与该应用程序交互时，它都会显示错误

API 错误代码：191 API 错误描述：指定的 URL 不归应用程序所有 错误消息：无效的 redirect_uri：Esta URL no está permitida por la configuración de la aplicación。

现在，我检查了 fb 中的应用程序设置，与 PHP 中的重定向一致，根本看不到任何问题：

（在Facebook）

URL del sitio https://secure3.realssl.com/pepitolapelicula/concurso/ Página de trabajo https://apps.facebook.com/concursospepito/ URL del lienzo https://secure3.realssl.com/pepitolapelicula/concurso/ Secure画布 URL https://secure3.realssl.com/pepitolapelicula/concurso/ Lienzo FBML/iframe iframe 沙盒模式 Activado 取消授权 URL https://secure3.realssl.com/pepitolapelicula/concurso/

（在 PHP 中要进行身份验证的部分）

```
$fbconfig['appid' ] = "000";
$fbconfig['secret'] = "000";

$fbconfig['baseUrl']    =   "https://secure3.realssl.com/pepitolapelicula/concurso/";
$fbconfig['appBaseUrl'] =   "http://apps.facebook.com/concursospepito/";

if (isset($_GET['code'])){
    header("Location: " . $fbconfig['appBaseUrl']);
    exit;
}

if (isset($_GET['request_ids'])){

}

$user  =   null; 
try{
    include_once "facebook.php";
}
catch(Exception $o){
    echo '<pre>';
    print_r($o);
    echo '</pre>';
}

$facebook = new Facebook(array(
  'appId'  => $fbconfig['appid'],
  'secret' => $fbconfig['secret'],
  'cookie' => true,
));

$user       = $facebook->getUser();
$loginUrl = $facebook->getLoginUrl(array('scope'=>'publish_stream'));

if ($user) {
  try {
    // Proceed knowing you have a logged in user who's authenticated.
    $user_profile = $facebook->api('/me');
  } catch (FacebookApiException $e) {
    d($e);  // d is a debug function defined at the end of this file
    $user = null;
  }
}

if (!$user) {
    echo "<script type='text/javascript'>top.location.href = '$loginUrl';</script>";
    exit;
}

//get user basic description
$userInfo           = $facebook->api("/$user"); 
```

* * *

我认为这可能与主机提供商（secure3.realssl）有关，但老实说，我现在不知道。因此，请提前感谢您提供的任何帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T19:49:23.550

嗯，这真的很奇怪，但是...

我已经设法使用这个问题中提供的示例（由 SIR） [验证 facebook 画布应用程序返回 ?code=](https://stackoverflow.com/questions/6642494/)

基本上，我注意到的是我使用的代码得到了

```
if (isset($_GET['code'])){
    header("Location: " . $fbconfig['appBaseUrl']);
    exit;
}
$user       = $facebook->getUser(); 
```

虽然 SIR 答案中的示例首先获取的是 $user，然后检查“代码”

不过，奇怪的是，只有在 IE 上才注意到行为

谢谢

# sql - 为什么需要光标？

> ID：10646692
> 
> 赞同：0
> 
> 时间：2012-05-18T04:24:32.673
> 
> 标签：sql, cursor

当我们可以在存储过程中使用循环时，为什么我们需要游标。即当我们可以使用存储过程执行相同的操作时，为什么我们需要游标。我是新手，所以我的问题对某些人来说听起来有点奇怪

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T04:41:20.250

游标只是一个循环，但在 SQL 查询中的一组值上。如果您正在循环遍历顺序值，那么我想您不需要使用游标，只需使用手动循环即可。

# mysql - 无法在共享主机上使用 REPLACE 语法

> ID：10646698
> 
> 赞同：0
> 
> 时间：2012-05-18T04:25:39.167
> 
> 标签：mysql, syntax, privileges

我在共享托管服务器上使用 CPanel 创建了一个 mysql 数据库...我已向用户授予 CREATE、UPDATE、DELETE、INSERT 权限，我应该授予使用 REPLACE 语法的权限...可用权限（如您可能已经知道）... 更改、创建例程、创建视图、删除、索引、锁定表、选择、更新、创建、创建临时表、删除、执行、插入、参考、显示视图...但我找不到REPLACE 特权...因为这是我在在线服务器上的第一次体验...我不知道请帮助... :)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T04:28:35.460

引用[**手册页`replace`**](http://dev.mysql.com/doc/refman//5.5/en/replace.html)：

> 要使用`REPLACE`，您必须同时拥有该表的`INSERT`和`DELETE`权限。

这是有道理的，考虑到 replace 可以做一个简单的`insert`，或者 a`delete`然后是一个`insert` *（如果第一次插入失败，因为发生了重复键错误）*。

# git - Git忽略正在跟踪的文件而不删除它们

> ID：10646700
> 
> 赞同：17
> 
> 时间：2012-05-18T04:26:10.217
> 
> 标签：git, version-control

我在理解基本的 git 概念时遇到了一些麻烦：/

在我的 git 控制的站点上尝试一些东西之前，我正在我的本地 Windows 机器上进行测试。

我有：

```
gittesting/repo1:
    file.txt
    ignoreme:
        ignore.txt 
```

和

```
gittesting/repo2
    file.txt
    ignoreme:
        ignore.txt 
```

Repo2 是 repo1 的副本，并且已经在跟踪 ignoreme。ignore.txt 文件在 repo2 中发生了更改，但我想停止跟踪它并让 git 完全忽略它。问题是，如果我创建一个 .gitignore 文件并添加 ignoreme，为时已晚，因为它已经被跟踪，所以我必须执行 git rm --cached ignore，但随后它被标记为已删除，如果我将提交拉到repo1，该目录将被删除而不是被单独留下..

把它们加起来：

1.  ignore.txt 在两个 repos 之间有不同的内容。
2.  我希望 ignore.txt 内容保持原样并被 git 完全忽略

我在网上查看，在 IRC 中询问，并查看了非常相关的问题，但找不到这样做的方法。我知道这个例子看起来微不足道，但这正是我需要在我的网站上做的，而目录是 Forum/cache。

* * *

编辑：

这有点骇人听闻，我更喜欢更好的答案，但我最终做了：

```
cd repo2
echo "ignoreme" > .gitignore
echo "ignoreme/*" > .gitignore
git rm --cache -r ignoreme
git commit -m "Should ignore now"
cd ../repo1
mv ignoreme ignoreme2
git pull ../repo2
mv ignoreme2 ignoreme 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-18T05:18:55.343

试试这个

```
git update-index --assume-unchanged ignoreme/ignore.txt 
```

Git 将忽略此文件的任何未来更改，而不更改存储库。要再次开始跟踪更改，请使用

```
git update-index --no-assume-unchanged ignoreme/ignore.txt 
```

请注意，这仅对当前工作副本生效，因此您每次克隆存储库时都需要执行此操作。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-30T06:17:02.167

如果我正确理解您的问题，您想`repo2`了解该`ignoreme/`目录，但您不希望 Git 关心对目录的任何修改。并且`git rm --cached`不会帮助您，因为您告诉 Git*从现在开始停止跟踪此内容。*

Git 用于跟踪内容的解决方案，但固定在某个点，是通过子模块。这除了来自[Git Book](http://git-scm.com/book/en/Git-Tools-Submodules)解释（强调添加）：

> 尽管`rack`它是您工作目录中的一个子目录，但 Git 将其视为一个子模块，并且**当您不在该目录中时，它不会跟踪其内容。**相反， Git 将其记录为来自该存储库**的特定提交。**

您可以尝试以下方法：

1.  将`ignoreme/`目录复制到新位置，并使其成为 git 存储库

2.  将其作为子模块添加回`repo2`：

    ```
    git submodule add file:///path/to/ignoreme ignoreme
    git commit -m"Add ignoreme/ as a submodule" 
    ```

`ignoreme`子模块现在固定到特定的提交。`repo2`仍在跟踪子模块内的任何内容，但是除非您在子模块中提交它们，否则`ignoreme/`不会跟踪对文件的任何更改。`repo2`假设`ignoreme/ignore.txt`以某种方式进行了修改：

```
$ git status
# On branch master
# Changes not staged for commit:
#   (use "git add <file>..." to update what will be committed)
#   (use "git checkout -- <file>..." to discard changes in working directory)
#   (commit or discard the untracked or modified content in submodules)
#
#       modified:   ignoreme (modified content)
#
no changes added to commit (use "git add" and/or "git commit -a") 
```

即使您运行，除非它们像这样提交到子模块，否则不会将`git add .`更改添加到索引中：`ignoreme/ignore.txt`

```
$ cd ignoreme
$ git commit -am"Time to change ignore.txt"
$ cd ..
$ git add .
$ git status
# On branch master
# Changes to be committed:
#   (use "git reset HEAD <file>..." to unstage)
#
#       modified:   ignoreme
# 
```

但是，如果您想忘记子模块中的本地修改：

```
$ cd ignoreme
$ git reset --hard
$ cd .. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-18T05:06:45.380

Git 不存储目录。如果你想在 Git 中保留一个空目录，约定是放一个名为 的空文件`.keepme`，然后提交。

至于这个问题，据我所知，您将无法从其克隆中隐藏上游分支中的文件。这不是 Git 旨在做的事情。考虑其他选项，例如拆分为两个存储库（并且可能使用子树或子模块）。或者在上游保留一个单独的分支以供下游跟踪，并`ignore.txt`通过接收后挂钩从该分支过滤。

告诉我们更多你为什么要这样做，也许有更好的方法。

无论如何，我希望您不要出于“安全”原因尝试隐藏此文件 - 否则事情会更加复杂（例如，您必须从整个历史记录中清除它等）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-18T05:17:52.270

签出包含该文件的提交将替换它，并从包含该文件的提交转换为不包含该文件的提交将删除它。Git 不能理智地做任何其他事情。.gitignore 不会覆盖 repo，它可以方便地避免您的状态报告。

您可以使该文件成为 git 领域之外某个地方的符号链接，这样可以通过检查不良历史记录轻松地从损坏中恢复。如果这不是一个选项，则有过滤器分支。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-19T00:12:33.913

Git 仅将忽略模式应用于未跟踪的文件。您不能使用忽略模式来忽略对已由 git 跟踪的文件的更改。不过，请参阅[https://gist.github.com/1423106](https://gist.github.com/1423106)了解人们解决此问题的方法。

请注意，如果您担心 .gitignore 本身，您可以尝试将 .git/info/excludes 用于仅本地存储库的 .gitignore 文件。请注意，这*不会*解决更改跟踪文件的问题，只会为您提供不会被跟踪的补充 .gitignores。

# iphone - 使用邮件发送动画文本

> ID：10646702
> 
> 赞同：1
> 
> 时间：2012-05-18T04:26:30.023
> 
> 标签：iphone, xcode, ipad

大家好，我正在使用此代码为我的 UILable 文本提供发光效果。

```
[NSTimer scheduledTimerWithTimeInterval:0.4
                                     target:self
                                   selector:@selector(glowMarquee)
                                   userInfo:nil
                                    repeats:YES];

-(void)glowMarquee {
    alph = (alph == 1) ? 0.1 : 1;
    [UIView beginAnimations:@"alpha" context:NULL];
    [UIView setAnimationDuration:0.4];        
    lblpreview.alpha = alph;
    [UIView commitAnimations];
} 
```

现在可以用发光效果在邮件中发送这个文本吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T04:27:48.940

不可以。您不能在电子邮件中发送可执行代码并相信它在另一端运行。

# drupal - 每天需要几个视图块通过邮件发送

> ID：10646704
> 
> 赞同：0
> 
> 时间：2012-05-18T04:26:56.590
> 
> 标签：drupal, notifications, message, newsletter

我有一个要求 - 我在每个用户仪表板上显示 6 个视图块。根据设置，这些块的节点列表因用户而异。我想每天安排一封通知邮件，将这些视图块通过邮件发送给网站的每个用户。一些有经验的成员建议我为它设置规则并发送......但问题是 - 应该设置什么来实现这一目标？

如果任何机构知道实现它的方法，那么请建议..

谢谢， 拉吉夫克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T23:46:00.663

rueles scheduler自定义php代码的规则和执行可以解决你的问题：

```
$view = views_get_view('weekly_email' , TRUE);
$views_result = $view->preview('mail_embed');
$output = drupal_html_to_text($views_result);
print $output; 
```

# gnuplot - 八度不绘制正确的标记面颜色

> ID：10646705
> 
> 赞同：4
> 
> 时间：2012-05-18T04:27:15.813
> 
> 标签：gnuplot, octave

我的代码有什么问题？

`octave:26> plot([1;2;3;4],[1;8;27;64], 'marker', 'o', 'linestyle', 'none', 'marker', 'o', 'markeredgecolor', 'red', 'markerfacecolor', 'black', 'markersize', 20);`

它创建蓝色空圆圈（圆圈内有白色背景）。

版本信息：GNU Octave，版本 3.2.4

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T05:21:02.850

可能是版本问题。这是我使用最新版本（3.6.1）得到的： ![在此处输入图像描述](../Images/6dc6f404e86ae16101d647edd6ad3b1f.png)

你的颜色是否以某种方式反转？白色和黑色是对立的，红色和蓝色是对立的。您可以尝试不同的颜色，看看它们是否系统性错误。如果删除 edgecolor 或 facecolor 规范，它会起作用吗？

# android - 相对布局的小部件错误

> ID：10646710
> 
> 赞同：1
> 
> 时间：2012-05-18T04:27:35.867
> 
> 标签：android, android-relativelayout, classcastexception

我收到了这个奇怪的错误，似乎每次我通过代码在我的 RelativeLayout 中编辑子视图的位置时，我都会收到一个运行时错误，例如 FATAL EXCEPTION: MAIN 和 ClassCastException: ChildView 的类。

起初它是我的 ImageView，所以我尝试使用 Eclipse 中的 GUI 移动它，然后它是我的 LinearLayout，所以我做了同样的事情，但后来它又回到了 ImageView，等等。我想知道我的布局有什么问题? 这是我的 main.xml 编码：

> ```
> <TextView
>     android:id="@+id/txtVersion"
>     android:layout_width="wrap_content"
>     android:layout_height="wrap_content"
>     android:layout_alignParentBottom="true"
>     android:layout_centerHorizontal="true"
>     android:padding="10dp"
>     android:text="version 1.0"
>     android:textColor="#000000"
>     android:textSize="15sp"
>     android:textStyle="bold" />
> 
> <TextView
>     android:id="@+id/txtLogo"
>     android:layout_width="wrap_content"
>     android:layout_height="wrap_content"
>     android:layout_alignParentLeft="true"
>     android:layout_alignParentTop="true"
>     android:background="@drawable/logo_background"
>     android:gravity="center"
>     android:padding="20dp"
>     android:paddingBottom="5dp"
>     android:paddingRight="20dp"
>     android:paddingTop="5dp"
>     android:text="Ngaji Yuk"
>     android:textColor="#FFFFFF"
>     android:textSize="25sp"
>     android:textStyle="bold" />
> 
> <LinearLayout
>     android:id="@+id/linearLayout1"
>     android:layout_width="wrap_content"
>     android:layout_height="fill_parent"
>     android:layout_alignParentRight="true"
>     android:layout_alignParentTop="true"
>     android:gravity="center"
>     android:orientation="vertical"
>     android:paddingBottom="5dp"
>     android:paddingRight="20dp"
>     android:paddingTop="5dp" >
> 
>     <Button
>         android:id="@+id/btnRead"
>         android:layout_width="fill_parent"
>         android:layout_height="wrap_content"
>         android:background="@drawable/button_background"
>         android:gravity="center"
>         android:padding="20dp"
>         android:paddingBottom="5dp"
>         android:paddingLeft="20dp"
>         android:paddingRight="20dp"
>         android:paddingTop="5dp"
>         android:text="Mulai Ngaji"
>         android:textColor="#FFFFFF"
>         android:textSize="20sp"
>         android:textStyle="bold" />
> 
>     <Button
>         android:id="@+id/btnIndex"
>         android:layout_width="fill_parent"
>         android:layout_height="wrap_content"
>         android:background="@drawable/button_background"
>         android:gravity="center"
>         android:padding="20dp"
>         android:paddingBottom="5dp"
>         android:paddingLeft="20dp"
>         android:paddingRight="20dp"
>         android:paddingTop="5dp"
>         android:text="Indeks"
>         android:textColor="#FFFFFF"
>         android:textSize="20sp"
>         android:textStyle="bold" />
> 
>     <Button
>         android:id="@+id/btnAbout"
>         android:layout_width="wrap_content"
>         android:layout_height="wrap_content"
>         android:background="@drawable/button_background"
>         android:gravity="center"
>         android:padding="20dp"
>         android:paddingBottom="5dp"
>         android:paddingLeft="20dp"
>         android:paddingRight="20dp"
>         android:paddingTop="5dp"
>         android:text="Tentang Aplikasi"
>         android:textColor="#FFFFFF"
>         android:textSize="20sp"
>         android:textStyle="bold" />
> 
> </LinearLayout>
> 
> <ImageView
>     android:id="@+id/imgMamat"
>     android:layout_width="wrap_content"
>     android:layout_height="wrap_content"
>     android:layout_alignParentBottom="true"
>     android:layout_alignParentLeft="true"
>     android:src="@drawable/ic_launcher" /> 
> ```

除了分配变量外，我的 MainActivity 中没有编码，并且仅适用于 LinearLayout 内的按钮。

哦，如果这是一个愚蠢的问题，请原谅，我是 Android 的初学者，谢谢。

编辑：这是我的 Logcat：

> 05-18 11:17:08.920: E/AndroidRuntime(516): 致命异常: main 05-18 11:17:08.920: E/AndroidRuntime(516): java.lang.RuntimeException: 无法启动活动 ComponentInfo{com. rangga.elearning.ngaji/com.rangga.elearning.ngaji.MainActivity}：java.lang.ClassCastException：android.widget.LinearLayout 05-18 11:17:08.920：E/AndroidRuntime(516)：在 android.app.ActivityThread .performLaunchActivity(ActivityThread.java:2663) 05-18 11:17:08.920: E/AndroidRuntime(516): 在 android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679) 05-18 11:17:08.920: E /AndroidRuntime(516): 在 android.app.ActivityThread.access$2300(ActivityThread.java:125) 05-18 11:17:08.920: E/AndroidRuntime(516): 在 android.app.ActivityThread$H.handleMessage(ActivityThread .java:2033) 05-18 11:17:08.920: E/AndroidRuntime(516):在 android.os.Handler.dispatchMessage(Handler.java:99) 05-18 11:17:08.920: E/AndroidRuntime(516): 在 android.os.Looper.loop(Looper.java:123) 05-18 11 ：17：08.920：E / AndroidRuntime（516）：在android.app.ActivityThread.main（ActivityThread.java：4627）05-18 11：17：08.920：E / AndroidRuntime（516）：在java.lang.reflect。 Method.invokeNative(Native Method) 05-18 11:17:08.920: E/AndroidRuntime(516): at java.lang.reflect.Method.invoke(Method.java:521) 05-18 11:17:08.920: E /AndroidRuntime(516): 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868) 05-18 11:17:08.920: E/AndroidRuntime(516): 在 com.android.internal。 os.ZygoteInit.main(ZygoteInit.java:626) 05-18 11:17:08.920: E/AndroidRuntime(516): at dalvik.system.NativeStart.main(Native Method) 05-18 11:17:08.920: E /Android 运行时（516）：引起：java.lang.ClassCastException: android.widget.LinearLayout 05-18 11:17:08.920: E/AndroidRuntime(516): at com.rangga.elearning.ngaji.MainActivity.onCreate(MainActivity.java:35) 05 -18 11:17:08.920: E/AndroidRuntime(516): 在 android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047) 05-18 11:17:08.920: E/AndroidRuntime(516): 在 android.app .ActivityThread.performLaunchActivity(ActivityThread.java:2627) 05-18 11:17:08.920: E/AndroidRuntime(516): ... 11 更多E/AndroidRuntime(516): 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627) 05-18 11:17:08.920: E/AndroidRuntime(516): ... 11 更多E/AndroidRuntime(516): 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627) 05-18 11:17:08.920: E/AndroidRuntime(516): ... 11 更多

清理项目似乎修复了它。当出现这样的问题时有点烦人，即使所有代码都没有显示错误>.<

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T04:39:07.747

尝试清理和构建，这可能是由于之前对 xml 视图的一些引用仍然存在

# c# - 更新后显示的 Gridview

> ID：10646712
> 
> 赞同：0
> 
> 时间：2012-05-18T04:28:11.950
> 
> 标签：c#, asp.net, gridview, web-controls

我正在使用批量更新来更新我的网格视图。

首先提示用户选择日期，然后单击按钮以显示这些日期的 gridview 数据。更新相关单元格，然后单击保存。

问题是我的 Gridview 在更新后消失了。我希望 Gridview 继续显示更新的数据。我怎么做？

代码片段：

```
 string connStr = ConfigurationManager.ConnectionStrings["bbsConnectionString"].ConnectionString;
        using (SqlConnection Con = new SqlConnection(connStr))
        {

            SqlDataAdapter sdr = new SqlDataAdapter(str, Con);

            sdr.SelectCommand.Parameters.AddWithValue("@startdate", startdate);
            sdr.SelectCommand.Parameters.AddWithValue("@enddate", enddate);
            DataTable dt = new DataTable();
            sdr.Fill(dt);
            if (dt.Rows.Count > 0)
            {
                GridView1.DataSource = dt;
                GridView1.DataBind();
                Button2.Visible = true;
            }

        }

    protected void Button2_Click(object sender, EventArgs e)
    {
        foreach (GridViewRow row in GridView1.Rows)
        {

            TextBox dtm = row.FindControl("DtmTextBox") as TextBox;

            string connStr = ConfigurationManager.ConnectionStrings["bbsConnectionString"].ConnectionString;
            using (SqlConnection Con = new SqlConnection(connStr))
            {
                Con.Open();
                SqlCommand cmd = new SqlCommand("Update tblAvailable set intqty=@intQty, curprice=@curprice where intresortid=@intresortid and dtm=@dtm and strroomtype=@strroomtype", Con);

                // cmd.Parameters.AddWithValue("@dtm", DateTime.ParseExact(dtm.Text.Trim(), "dd/M/yyyy", System.Globalization.CultureInfo.InvariantCulture));

                cmd.ExecuteNonQuery();
                GridView1.EditIndex = -1;
                GridView1.DataBind();
                GridView1.Visible = true;

            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T04:35:13.687

您必须在调用绑定方法之前将数据表/数据集分配给数据源

```
 GridView1.DataSource = dt;
 GridView1.DataBind(); 
```

在这里，您在更新后绑定网格，但未将 DataTable 分配给 GridView1.DataSource。您可以在此处调用 DataGrid 方法，而不是像这样绑定。

```
private void FillGrid()
{
string connStr = ConfigurationManager.ConnectionStrings["bbsConnectionString"].ConnectionString;
        using (SqlConnection Con = new SqlConnection(connStr))
        {

            SqlDataAdapter sdr = new SqlDataAdapter(str, Con);

            sdr.SelectCommand.Parameters.AddWithValue("@startdate", startdate);
            sdr.SelectCommand.Parameters.AddWithValue("@enddate", enddate);
            DataTable dt = new DataTable();
            sdr.Fill(dt);
            if (dt.Rows.Count > 0)
            {
                GridView1.DataSource = dt;
                GridView1.DataBind();
                Button2.Visible = true;
            }
        }
}
 //You should as call the method FillGrid that loads data and bind grid previously      

            cmd.ExecuteNonQuery();
            GridView1.EditIndex = -1;
            //GridView1.DataBind();
            FillGrid();
            GridView1.Visible = true; 
```

删除这些语句并调用之前绑定网格的方法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T04:52:40.060

我已经使用了下面的代码。我会工作的。您应该再次调用按日期显示网格视图的方法

```
public void DisplyGridview(){

string connStr = ConfigurationManager.ConnectionStrings["bbsConnectionString"].ConnectionString;
    using (SqlConnection Con = new SqlConnection(connStr))
    {

        SqlDataAdapter sdr = new SqlDataAdapter(str, Con);

        sdr.SelectCommand.Parameters.AddWithValue("@startdate", startdate);
        sdr.SelectCommand.Parameters.AddWithValue("@enddate", enddate);
        DataTable dt = new DataTable();
        sdr.Fill(dt);
        if (dt.Rows.Count > 0)
        {
            GridView1.DataSource = dt;
            GridView1.DataBind();
            Button2.Visible = true;
          }

    } 
```

} 受保护的无效 GridView1_RowUpdating（对象发件人，GridViewUpdateEventArgs e）{

```
 foreach (GridViewRow row in GridView1.Rows)
    {

        TextBox dtm = row.FindControl("DtmTextBox") as TextBox;

        string connStr = ConfigurationManager.ConnectionStrings["bbsConnectionString"].ConnectionString;
        using (SqlConnection Con = new SqlConnection(connStr))
        {
            Con.Open();
            SqlCommand cmd = new SqlCommand("Update tblAvailable set intqty=@intQty, curprice=@curprice where intresortid=@intresortid and dtm=@dtm and strroomtype=@strroomtype", Con);

            // cmd.Parameters.AddWithValue("@dtm", DateTime.ParseExact(dtm.Text.Trim(), "dd/M/yyyy", System.Globalization.CultureInfo.InvariantCulture));

            cmd.ExecuteNonQuery();
            GridView1.EditIndex = -1;
            GridView1.DataBind();
            GridView1.Visible = true;

        }

DisplyGridview(); 
```

}

# html - 为什么 div#navbar 和 div #navbar 的结果不同？

> ID：10646723
> 
> 赞同：0
> 
> 时间：2012-05-18T04:29:49.490
> 
> 标签：html, css

代码如下所示。Jsfiddle 链接：http: [//jsfiddle.net/tLXSt/](http://jsfiddle.net/tLXSt/)。

```
 <div id="navbar">

<ul>
    <li><a href="index.html">Home</a></li>
    <li><a class="fb" href="menu.html">Menu</a></li>

</ul>

</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T04:31:50.797

它们是两个不同的选择器：

*   `div#navbar`选择`div`一个`id`_`navbar`
*   `div #navbar`选择具有 an 的元素，该元素`id`是元素`navbar`的后代`div`。

基本上，第一个匹配：

```
<div id="navbar">
  Hello
</div> 
```

但第二个匹配：

```
<div>
  <img src="foo.png" id="navbar" />
</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T04:31:55.497

`div#navbar`寻找一个 div id'd navbar

`div #navbar`在所有 div 中查找 id'd navbar

为了解释，尽我所能，这些东西被称为 CSS 选择器。你可以用不同的方式指定选择器；在第一个中，您有一堆选择器。这会寻找符合该描述的元素。

每次你有一个空间时，就像“现在开始寻找最后一个选择器中（是子级）的元素。

这就是为什么 id 为 navbar 的 div 没有空格 ( `div#navbar`) ，而带空格 ( ) 的 div**在div****中**`div #navbar`查找 id navbar 。

 *** * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T04:57:12.730

当您有嵌套的标签或元素时，可以使用它。例如。

```
<div id="container">
    <div id="base"> <!-- i want to select this for my css instead of... -->
    </div>
</div>
<div id="base"> <!-- this -->
</div> 
```

我想选择容器内的 ID 基数，所以我将使用...

```
#container #base {
    // styles
} 
```

如果只使用...

```
#base {
    //styles
} 
```

容器外的基本 ID 也会被调出。逻辑。

所以要更正确地理解它。这是一个例子

```
#div1 #div2 #div3 .test img {
    height:100px;
} 
```

'test' 类内部的图像，'div3' ID 内部，'div2' ID 内部，'div1' ID 内部的图像高度为 100 像素。**

# javascript - Fancybox：无法固定高度和宽度

> ID：10646724
> 
> 赞同：0
> 
> 时间：2012-05-18T04:29:58.477
> 
> 标签：javascript, jquery, css, fancybox

我正在使用 Fancybox 1.2.6 和 JQuery 1.2.6，

***代码：***

```
<script type="text/javascript">
    $(document).ready(function() {

        $("a.iframe").fancybox({
            'width'             : 300,
            'height'            : 200,
            'type'              : 'iframe',
            'autoScale'         : false,
            'transitionIn'      : 'fade',
            'transitionOut'     : 'fade',
            'speedIn'           : 600, 
            'speedOut'          : 200, 
            'showCloseButton'   : false,
            'titleShow'         : false
        });

    });
</script>

<a class="iframe" id="iframe" href="test.html">iframe</a> 
```

在这里，我无法修复窗口的高度和宽度。下面我附上了我的输出图像。有没有办法固定高度和宽度？

![在此处输入图像描述](../Images/0598f68e4f4b8e72af925d70c3fe9733.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T04:45:35.363

将值设置`autoDimensions`为`true or false`;

有关详细信息，请参阅[http://fancybox.net/api](http://fancybox.net/api)

还有

```
$.fancybox.resize(); 
```

# java - 使用 Google 日历 API 进行身份验证

> ID：10646731
> 
> 赞同：0
> 
> 时间：2012-05-18T04:31:08.393
> 
> 标签：java, android, google-api, google-api-java-client

我正在编写一个同时使用 Google 任务和日历 API 的 Android 应用程序。通过任务进行身份验证非常有效。但是，在访问日历 API 时，我看到一个屏幕显示“与 Google 服务通信时出现问题。请稍后再试。” 标题为“无法登录”。如果我单击下一步，登录...屏幕会显示大约半秒钟，然后我会被发送回“出现问题”屏幕。

我对日历 API 进行身份验证的代码如下。请注意，工作正常的 Tasks API 的代码几乎相同。

```
GoogleAccountManager google_manager = new GoogleAccountManager(this);
Account[] accounts = google_manager.getAccounts();
Account my_account;
if (accounts.length > 1) my_account = selectWhichAccount(accounts);
else {
    if (accounts.length == 0) display_no_account_dialog();
    Log.v("account",accounts[0].toString());
    my_account = accounts[0];
}
final String AUTH_TOKEN_TYPE = "oauth2:https://www.googleapis.com/auth/calendar";
Log.v("schedule","getting auth token");
google_manager.manager.getAuthToken(my_account, AUTH_TOKEN_TYPE, null, this, new AccountManagerCallback<Bundle>() {

        @Override
        public void run(AccountManagerFuture<Bundle> future) {
            try {
                String token = future.getResult().getString(AccountManager.KEY_AUTHTOKEN);
                Log.d("schedule","starting scheduletask");
                start_ScheduleTask(t, token);
            } catch (OperationCanceledException e) {
                Log.v("accounts","denied access to account");
                handleException(e);
            } catch (Exception e) {
                handleException(e);
            }
        }
    }, null); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T04:42:07.913

使用 'oauth2:' 前缀指定的 OAuth2 令牌仅部分支持，`AccountManager`其中一些不起作用。不幸的是，目前没有记录支持和不支持的内容（AFAIK）。您有两种选择：使用 ClientLogin（使用 'cl' 作为令牌类型）或使用 WebView 获取令牌。ClientLogin 现在应该可以正常工作，但是它已被正式弃用，并将在大约一年后消失。

# compiler-construction - GPU 中的并行编译器

> ID：10646733
> 
> 赞同：0
> 
> 时间：2012-05-18T04:31:22.800
> 
> 标签：compiler-construction, parallel-processing, gpu

在我的学期论文中，我需要研究并行编译器（尤其是 GPU 中使用的编译器）如何执行任务映射以及用于执行数据映射/对齐的各种启发式方法。

任何指向涵盖现有文献、新趋势的论文的指针都将非常有帮助和赞赏。

最好的，Subramanian

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T10:59:45.750

NVIDIA 现在为 CUDA 使用开源 LLVM 编译器。您将在[此处](http://llvm.org/pubs/)找到与 LLVM 相关的出版物。

# nlp - Ontonotes Treebanked Sentences Notation

> ID：10646737
> 
> 赞同：1
> 
> 时间：2012-05-18T04:32:00.293
> 
> 标签：nlp, text-processing

[这是Ontonotes](http://www.bbn.com/ontonotes/) - [V3.0](http://www.ldc.upenn.edu/Catalog/docs/LDC2009T24/OntoNotes-Release-3.0.pdf)中的一个句子示例。我想知道 Treebanked 句子中 *T*-1 和 *-2 的含义[我认为这是普通句子的标记化版本]

## 简单的句子：

```
In the summer of 2005, a picture that people have long been looking forward to
started emerging with frequency in various major Hong Kong media. 
```

## 树库语句：

```
[Speaker#1] In the summer of 2005 , a picture that people have long been looking
forward to *T*-1 started *-2 emerging with frequency in various major Hong Kong
media . 
```

还有一些其他标签，如 *PRO* 和 *PRO*-1

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T19:34:22.223

该`*T*-1`事物代表解析树中的“踪迹”。您看到它们的原因是 OntoNotes 建立在使用该注释的 Penn Treebank 之上。

如果您在网上搜索“penn treebank trace”，您应该会找到很多可阅读的内容。我在 Penn Treebank 中找到[了这个](http://www.ling.ohio-state.edu/~hinrichs/course07/ptb.pdf)文档，它对各种`*X*`标签有简短的解释和示例，但那里可能有更完整的解释。

# android - Android :: TCP 数据包

> ID：10646741
> 
> 赞同：1
> 
> 时间：2012-05-18T04:32:28.047
> 
> 标签：android, sockets, tcp

我正在尝试通过 RCON 端口与我的 Minecraft 服务器通信。

不过，我几乎不知道如何使用套接字和流的东西。翻来覆去，我发现他们都有一些共同点。套接字、输入流和输出流。

我在我的代码中尝试过，但返回没有任何用处。我知道代码实际上发送了一个数据包，因为我从服务器控制台**[Rcon connection from: /1.2.3.4]**得到了确认。

它只是我尝试基于互联网组装的代码，从输出返回类似**[B@4053f750**。不知道那是什么，我也不能在谷歌中搜索它。

有人可以提供一个很好的网站来解释这些东西吗？

谢谢一堆。

```
Socket s;
InputStream i;
DataInputStream iD;
OutputStream o;
DataOutputStream oD;

OnClickListener listenA=new OnClickListener(){
    public void onClick(View v){
        try{
            s=new Socket("MyDomain.tld", 12345);
            i=s.getInputStream();
            iD=new DataInputStream(i);
            o=s.getOutputStream();
            oD=new DataOutputStream(o);

            byte[] data=new byte[1024], packet={
                (byte)0xFE, (byte)0xFD, // Magic bytes
                (byte)0x09,                 // Challenge type
                (byte)0xde, (byte)0xad, (byte)0xbe, (byte)0xef  // Your ID token
            };

            o.write(packet);
            i.read(data, 0, 1024);

            guiMain.setTxt_Edit(encodeCArray(data.toString())); // returns a hex string to an edit box. I can then compare the packet to what I expect.

            s.close();
        }catch(UnknownHostException e){
            e.printStackTrace();
        }catch(IOException e){
            e.printStackTrace();
        }
    }
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T05:55:19.747

请尝试：

```
guiMain.setTxt_Edit(encodeCArray(new String(data))) 
```

# python - 模块递归导入其子模块是一种好习惯吗？

> ID：10646743
> 
> 赞同：8
> 
> 时间：2012-05-18T04:32:43.183
> 
> 标签：python

我看到了 Python 模块的常见模式。有时会`__init__.py`导入其子模块：

例如

```
mymod/
    __init__.py:
        from . import subm1, subm2
        __all__ = ['subm1', 'subm2']

    subm1.py:
        def subf1():
            ...
        __all__ = ['subf1']

    subm2.py:
        def subf2():
            ...
        __all__ = ['subf2'] 
```

所以客户端代码只需要这样做：

```
import mymod
mymod.subm1.subf1()
mymod.subm2.subf2() 
```

代替：

```
import mymod.subm1
import mymod.subm2
mymod.subm1.subf1()
mymod.subm2.subf2() 
```

哪一个是最佳实践^(TM)？递归导入有什么问题还是我应该坚持默认行为？默认行为的基本原理是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T04:58:07.590

这将取决于您的模块的使用情况。如果子模块只是碰巧被*编写*为模块的单例对象，而不是具有诸如具有全静态方法的类 Java 类，则递归导入可能没问题。另一方面，如果您的模块是由几个相关的子模块组成的（例如，参见 stdlib`html`模块），您可能需要显式的子模块导入。

一般来说，递归导入设置说“这个模块的任何客户端总是想要所有这些”。考虑这是否适用于您的模块（以及其他模块，具体情况），然后从那里开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T05:11:24.443

这些做法是平等的。

第一个示例期望两个子模块必须一起使用，因此用户代码中总是有两个导入。他们为您提供了一条捷径。

第二个期望子模块是独立的块，仅与其他块进行间接交互。

# oracle - oracle存储过程生成序列号？

> ID：10646744
> 
> 赞同：1
> 
> 时间：2012-05-18T04:32:43.870
> 
> 标签：oracle, stored-procedures

我有一个员工、产品和产品里程表，如下所示

![在此处输入图像描述](../Images/4300f447e13ee448f66b49f452891dc5.png)

每个员工都有一个唯一的 emp_code，具体取决于他可以访问的产品。

每个产品的标识符都有一个唯一的前缀。

我需要为每个产品生成一个唯一的字母数字标识符并将其分配给员工。

此产品标识符的长度为 9 个字符，包括前缀。

里程表将存储分配给该特定产品中员工的最后一个 emp_code。

如何编写一个存储过程来根据产品为系统中添加的每个新员工生成这些字母数字 emp_codes？

请帮忙。

**编辑1：**

只是里程表表中的一个小修正，我们可能不需要将里程表存储为 A00000001。相反，我们只能存储 00000001 然后附加前缀。

**编辑2：**

这是我到目前为止所做的。

```
create or replace PROCEDURE SP_GEN_NEXT_DUMMY_DB_PRISM_ID
(
  in_product_id number,
  db_prism_id out varchar2
)
AS
BEGIN

  UPDATE BI_DB_PRISM_ID_ODOMETER
  SET DB_PRISM_ID =  DB_PRISM_ID + 1
  WHERE 
    PRODUCT_ID = in_product_id; 

  SELECT to_char(db_prism_id, 'FM00000000') into db_prism_id FROM     BI_DB_PRISM_ID_ODOMETER WHERE PRODUCT_ID = in_product_id; 

END; 
```

但是如何确保它在事务中运行，以及如何将产品前缀附加到生成的数字。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T06:40:32.690

你有两个我能想到的选择：

1.  为每个产品创建一个 Oracle 序列，也许使用某种可以检测新产品并动态创建序列的维护程序。

2.  滚动您自己的序列码。将最后一个值存储在 Product 表中。编写一个为给定产品生成新值的过程。该过程将首先在产品表上获得一个行锁（这样您就不会让两个会话同时获得相同的值），推进该值，并将新值写入产品表。您需要将此过程作为一个自治事务（否则，如果会话没有立即提交或回滚，其他会话将只是等待）。

#1 的一个优点是它是最快的。

#1 的一个缺点是您必须运行动​​态 DDL，并且在尝试为其插入里程表记录之前，您必须确保产品的 DDL 已运行。如果产品被删除，您可能还需要考虑是否删除序列。

#1 的另一个缺点是您只能使用动态 SQL 获取序列值（您必须在运行时确定序列的名称）。

#2 的一个缺点是对于允许并发 DML 的系统很容易出错。您需要确保逻辑正确，并在高并发负载下对其进行测试。此外，#2 的性能会比 #1 差，因为它对每个产品的访问进行了序列化。

**编辑**

> “但我如何确保它在交易中运行，以及如何将产品前缀附加到生成的数字中。”

Oracle 中的事务是自动的。但是，在这种情况下，您需要的是[**自主**事务](http://docs.oracle.com/cd/B19306_01/appdev.102/b14261/autonotransaction_pragma.htm)。

使用字符串连接函数附加产品前缀 - 例如`||`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T08:00:36.333

似乎是您在这里对数据模型进行了非规范化。

里程表与产品表是 1:1 的，里程表值还取决于当前分配给该产品的员工数量。

emp_code 序列号可以从员工 id 和产品表中导出。可以说，标识符前缀也可以从产品 id 中推断出来，因此实际上您的架构中有冗余列和冗余表。

你确定你真的需要它们吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T08:03:01.403

也许我在这里遗漏了一些东西，如果是这样，请接受我的道歉。

在我看来，里程表只是一个计数器，用于计算有多少员工可以访问每种产品。

如果是这种情况，为什么不完全摆脱表（和 EMP_CODE 列）并在一个或多个视图中“构建”该信息？

亚历山德罗

PS：看起来我发布了与大卫奥尔德里奇相同的建议。对困惑感到抱歉。

# .htaccess - 是否可以使用 htaccess 将 url（不在我的域中）重定向到另一个？

> ID：10646748
> 
> 赞同：0
> 
> 时间：2012-05-18T04:33:24.967
> 
> 标签：.htaccess, redirect

我正在使用第三方在线商店，并为商店分配了一个特定的 URL。现在我已经更改了第三方并有一个新的商店网址。但是，一些浏览器缓存了旧网址的人仍然使用它。

那么，有没有办法将旧网址重定向到新网址？两者都是分配给我的商店网址，但它们不在我的域中。

或者，有没有办法强制清空浏览器缓存？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T11:53:43.003

在没有访问其服务器的情况下无法重定向第三方 url。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T06:54:26.033

In htacces file write

```
RewriteEngine On
RewriteRule ^(.*)$ http://new_url 
```

I have no knowledge of htacces but still iam damn sure that it is correct and will work for you.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T06:58:03.507

您需要将重定向相关代码添加到旧 URL 指向的服务器根目录。

如果您的旧网址[http://xyz.com](http://xyz.com)指向某个 IP 为 wxyz 的服务器，那么您需要在该特定服务器上添加 .htaccess 重定向规则。

所以我的问题是，你可以访问那台旧服务器吗？

# php - 将 XUL 与 PHP 集成

> ID：10646749
> 
> 赞同：-1
> 
> 时间：2012-05-18T04:33:47.053
> 
> 标签：php, javascript, xml, firefox-addon, xul

是否可以将 XUL 与 PHP 集成，就像我们对 HTML 和 PHP 所做的那样？如果是，我需要做什么才能完成这项工作？

我需要做些什么来阻止我的服务器尝试将 XUL 作为纯文本或 HTML 提供？

此外，如果您有一个很好的资源或教程来了解如何做到这一点，那就太棒了！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-18T04:43:18.130

PHP 是一种脚本语言。一般来说，当我们想到脚本语言和它们生成的标记时，我们倾向于主要考虑 HTML。

但是，脚本语言可用于生成*任何*类型的内容，例如 HTML、CSS、JavaScript、XML 甚至 XUL。

在这种情况下，您希望您的 Web 服务器以内容类型“application/vnd.mozilla.xul+xml”的形式提供 PHP。默认情况下，一些网络服务器不会识别这种 mime 类型。如果您没有，那么您需要将该 mime 类型添加到您的服务器配置中。

> 如果您与本教程一起构建一个 XUL 文件并将其放到 Web 服务器上，您需要配置您的 Web 服务器以将 XUL 文件的内容类型指定为 application/vnd.mozilla.xul+xml。对于 Apache，您可以通过在 mime.types 文件中添加以下行来执行此操作：
> 
> **应用程序/vnd.mozilla.xul+xml .xul**
> 
> * * *
> 
> 或者，将此行添加到您的 httpd.conf 文件中，或者，如果 Apache 服务器配置为允许，则添加到提供 XUL 文件的目录中的 .htaccess 文件中：
> 
> **AddType application/vnd.mozilla.xul+xml .xul**
> 
> 然后重新启动您的网络服务器。
> 
> * * *
> 
> 使用 PHP，您可以使用 header() 函数发送 mime 类型。

```
<?php
    header('Content-type: application/vnd.mozilla.xul+xml');
?>
<!-- XUL markup starts here --> 
```

最后一点很重要。请记住，在大多数情况下，我们使用 PHP 提供 HTML，并且大多数服务器都能很好地识别内容类型是 text/html。在您的情况下，您可能希望自己显式设置内容类型标头，如上面的示例中所做的那样。

有关更多详细信息和信息，请参阅[使用远程 XUL](https://developer.mozilla.org/en/using_remote_xul)。

# java - google Oauth2.0中处理请求参数

> ID：10646753
> 
> 赞同：0
> 
> 时间：2012-05-18T04:34:46.193
> 
> 标签：java, servlets, oauth-2.0

我正在尝试在我的 java Web 应用程序中使用 Google OAuth2.0 身份验证机制。但是，我在这样做时遇到了一些基本挑战，为此我在这里寻求帮助-

我已经在 Google API 控制台中注册了我的应用程序，并将登录 url 重定向到我的本地主机应用程序以用于开发目的。在用户验证应用程序后，我正在尝试处理 google 在 servlet 中提供的访问令牌 - 但是，我看到来自 google 的 url 如下 - `http: //local host:8080//loginProcess#access_token=ya29.AHS6ZQBN-4Snrj6P9i4xPxbCxLLkmbPf3Jc2Dj7eUA72FWIy4&token_type=Bearer&expires_in=3600` servlet 名称为“loginProcess”，请注意后面的 # - 哈希在请求参数中，我无法使用 request.getParameter("access_token") 在 java servlet 中检索它们；

我希望我的问题很清楚 - 如果没有，请让我知道我缺少的细节..

提前谢谢大家！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T13:17:28.553

这是*客户端应用程序*（在浏览器中运行的 JavaScript）的正常行为。我不知道这是否是您的实际情况，如果是这样，要处理响应，*javascript*是您唯一的选择，如[文档中所述](https://developers.google.com/accounts/docs/OAuth2UserAgent#handlingtheresponse)

* * *

如果没有，可能您需要将您的授权请求（场景）更改为[*Web 服务器应用程序*](https://developers.google.com/accounts/docs/OAuth2WebServer)，在这种情况下，您可以使用 处理响应`request.getParameter("access_token")`，这种授权的重要参数是`response_type=code`

* * *

此外，从安全角度来看，客户端（Web 浏览器）在检索文档时不应该向服务器发送 URI 片段，如[规范中所述](https://www.rfc-editor.org/rfc/rfc3986#section-3.5)。片段标识符的功能与 URI 的其余部分不同：即，它的处理完全是客户端，没有服务器的参与。

# javascript - 截断具有相同 id 或类的多个 div 中的数据

> ID：10646754
> 
> 赞同：0
> 
> 时间：2012-05-18T04:34:55.430
> 
> 标签：javascript, asp.net-mvc-3, html

我有以下创建多个具有 truncateMe id 的 div 块，我想截断此 div 中的内容。

```
<ul class="usernews">
    @foreach(var news in Model.News){
        <li>
                <div class="usernews_img">image</div>
                <div class="usernews_info">
                    <div class="truncateMe">@Html.Raw(@news.News.NewsContent)</div>
                </div>

        </li>
    }
</ul>

 <script type="text/javascript">

     var len = 100;
     var p = document.getElementById('truncateMe1');
     if (p) {

         var trunc = p.innerHTML;
         if (trunc.length > len) {

             /* Truncate the content of the P, then go back to the end of the
             previous word to ensure that we don't truncate in the middle of
             a word */
             trunc = trunc.substring(0, len);
             trunc = trunc.replace(/\w+$/, '');

             /* Add an ellipses to the end and make it a link that expands
             the paragraph back to its original size */
             trunc += '<a href="#" ' +
      'onclick="this.parentNode.innerHTML=' +
      'unescape(\'' + escape(p.innerHTML) + '\');return false;">' +
      '...<\/a>';
             p.innerHTML = trunc;
         }
     }

</script> 
```

然后我有这个 java 脚本，它适用于具有 truncateMe id 的单个 div。我如何为每个具有 truncateMe id 的 div 应用相同的内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T04:41:21.023

如果你被允许使用 jQuery，这真的很容易。

```
$.fn.truncate = function(options) {
   options = $.extend({maxLength:100}, options);

   this.each(function() {
     var $this = $(this);

     var html = $this.html();

     if (html.length <= options.maxLength) return;

     html = html.substring(0, options.maxLength);
     html = html.replace(/\w+$/, '');

     html += '<a href="#" ' +
      'onclick="this.parentNode.innerHTML=' +
      'unescape(\'' + escape($this.html()) + '\');return false;">' +
      '...<\/a>';

     $this.html(html);
   });
} 
```

然后使用它：

```
$('.truncate-me').truncate(); // use a CSS class instead of IDs 
```

# iphone - 按用户编辑 Utableviewcell 内容

> ID：10646755
> 
> 赞同：1
> 
> 时间：2012-05-18T04:34:56.977
> 
> 标签：iphone, ios, uitableview

我想在以下事情上为您提供帮助。

我有一个 uitableview 列表，其中包含从数据库中获取的内容。现在我想在那里编辑 tableviewcell 内容。

我的意思是如何允许 uitableviewcells 可编辑？

请让我知道实现上述内容的工作示例链接/参考教程。

谢谢你的时间。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
    }

    NSDictionary *aDict = [self.mySimpleTemplatesArr objectAtIndex:indexPath.row];
    NSString *value = [aDict objectForKey:@"value"];
    cell.textLabel.text = value;

    // Configure the cell...

    return cell;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T05:12:54.230

我为选择单元格项目创建示例代码，然后显示模型弹出窗口，然后更新该项目，然后按更新，然后该项目更新并显示到表格中，

我认为这是简单易用的应用程序和触发数据库的操作。

所以你可以从这里下载示例代码。

我希望您可以轻松理解并将该代码实施到您的项目中，因此问题可能会得到解决

请下载我为示例代码开发的源代码，您也可以进一步增强此代码。

[下载链接在这里。](http://sourceforge.net/projects/nimitparekh/files/Student%20Database/StudentInfoDatabase.zip/download)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-18T05:02:38.617

这是一个示例，这是我的代码之一。：-

```
@interface CustomizedCellProductDetails : UITableViewCell {

    UILabel *sNO;
    UILabel *abcWine;
    UILabel *redWine;
    UILabel *two;
    UILabel *hundred;
    UILabel *fourTwo;
    UILabel *twoOne;
    UIImageView *imgView;

    UILabel *itemNo;
    UILabel *itemName;
    UILabel *itemDesc;
    UILabel *department;
    UILabel *qtyAvailable;

    UIButton *check;

}

@property (nonatomic , retain) UILabel *sNO;
@property (nonatomic , retain) UILabel *abcWine;
@property (nonatomic , retain) UILabel *redWine;
@property (nonatomic , retain) UILabel *two;
@property (nonatomic , retain) UILabel *hundred;
@property (nonatomic , retain) UILabel *fourTwo;
@property (nonatomic , retain) UILabel *twoOne;
@property (nonatomic , retain) UIImageView *imgView;

@property (nonatomic , retain) UILabel *itemNo;
@property (nonatomic , retain) UILabel *itemName;
@property (nonatomic , retain) UILabel *itemDesc;
@property (nonatomic , retain) UILabel *department;
@property (nonatomic , retain) UILabel *qtyAvailable;
@property (nonatomic , retain) UIButton *check;

-(void) clicked;
@end 
```

# 导入“CustomizedCellProductDetails.h”

```
@implementation CustomizedCellProductDetails
@synthesize sNO,abcWine,redWine,two,hundred,fourTwo,twoOne,imgView,itemNo,itemName,itemDesc,department,qtyAvailable,check;

- (id)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier {

    self = [super initWithStyle:style reuseIdentifier:reuseIdentifier];
    if (self) {
        sNO=[[UILabel alloc] init];
        abcWine=[[UILabel alloc] init];
        redWine=[[UILabel alloc] init];
        two=[[UILabel alloc] init];
        hundred=[[UILabel alloc] init];
        fourTwo=[[UILabel alloc] init];
        twoOne=[[UILabel alloc] init];
        imgView=[[UIImageView alloc] init];

        itemNo=[[UILabel alloc] init];
        itemName=[[UILabel alloc] init];
        itemDesc=[[UILabel alloc] init];
        department=[[UILabel alloc]init];
        qtyAvailable=[[UILabel alloc] init];

        check=[UIButton buttonWithType:UIButtonTypeCustom];
        [check addTarget:self action:@selector(clicked) forControlEvents:UIControlEventTouchUpInside];
        [check setTitle:@"Check" forState:UIControlStateNormal];

        [self.contentView addSubview:sNO];
        [self.contentView addSubview:abcWine];
        [self.contentView addSubview:redWine];
        [self.contentView addSubview:two];
        [self.contentView addSubview:hundred];
        [self.contentView addSubview:fourTwo];
        [self.contentView addSubview:twoOne];
        [self.contentView addSubview:itemNo];
        [self.contentView addSubview:itemName];
        [self.contentView addSubview:itemDesc];
        [self.contentView addSubview:department];
        [self.contentView addSubview:qtyAvailable];
        [self.contentView addSubview:check];

    }
    return self;
}

- (void)layoutSubviews {

    [super layoutSubviews];

    CGRect contentRect = self.contentView.bounds;

    CGFloat boundsX = contentRect.origin.x;

    CGRect frame;

    frame=CGRectMake(boundsX+10, 0, 50, 40);

    sNO.frame = frame;

    frame= CGRectMake(boundsX+70 ,0, 150, 40);

    abcWine.frame = frame;

    frame= CGRectMake(boundsX+230 ,0, 150, 40);

    redWine.frame = frame;

    frame= CGRectMake(boundsX+390 ,0, 50, 40);

    two.frame = frame;

    frame= CGRectMake(boundsX+450 ,0, 50, 40);

    hundred.frame = frame;

    frame= CGRectMake(boundsX+510 ,0, 50, 40);

    fourTwo.frame = frame;

    frame= CGRectMake(boundsX+570 ,0, 50, 40);

    twoOne.frame = frame;

    /************************                      ***********************/

    frame= CGRectMake(boundsX+10 ,50, 100, 200);

    imgView.frame = frame;

}

-(void) clicked
{

}

- (void)setSelected:(BOOL)selected animated:(BOOL)animated {

    [super setSelected:selected animated:animated];

    // Configure the view for the selected state.
}

- (void)dealloc {
    [super dealloc];
}

@end 
```

只需在 cellforRowAtIndexPath 中使用此类的实例，并根据您的需要对其进行修改。要在运行时更改值，请访问属性。

您可以通过这种方式在 tableview 中实现自定义 cemm：-

```
// Customize the appearance of table view cells.
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    static NSString *CellIdentifier = @"Cell";

    CustomizedCellProductDetails *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[[CustomizedCellProductDetails alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
    }
    cell.sNO.text=@"2255";
    cell.abcWine.text=@"ABCWine";
    cell.redWine.text=@"REDWine";
    cell.two.text=@"2";
    cell.hundred.text=@"100";
    cell.fourTwo.text=@"42";
    cell.twoOne.text=@"21";

    [cell.imgView setImage:[UIImage imageNamed:@"wine.png"]];
    cell.itemNo.text=@"Item No                     2255";
    cell.itemName.text=@"Item Name                 ABCWine";
    cell.itemDesc.text=@"Item Description          This is the best wine";
    cell.qtyAvailable.text=@"Quantity Available    2";
    // Configure the cell...

    return cell;
} 
```

更改单元格的高度：-

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
 {  

        return 300;  

} 
```

不要使用 300 而是给它单元格框架的高度`cell.frame.size.height`

# django - 为什么更改我的“STATIC_URL”设置会改变我的 Django 应用程序是否正常工作？

> ID：10646759
> 
> 赞同：1
> 
> 时间：2012-05-18T04:35:37.520
> 
> 标签：django, django-staticfiles

在 settings.py 中，如果我指定`STATIC_URL = 'http://68.164.125.221/'`，则客户端可以访问我的网页。但是，不会加载 CSS 和其他静态文件。

另一方面，如果我指定`STATIC_URL = '/'`，则访问我的应用程序的主页会产生此错误。

```
Page not found (404)
Request Method: GET
Request URL:    http://68.164.125.221/
Directory indexes are not allowed here.
You're seeing this error because you have DEBUG = True in your Django settings file. 
```

有趣的是，尽管我的应用程序的主页显示此错误，但我的静态文件现在加载（例如 http://68.164.125.221/main.css 加载）。

为什么更改我的“STATIC_URL”设置会切换是加载主页还是加载静态文件？我正在使用静态文件应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T04:49:48.547

你可能想要`STATIC_URL = '/static/'`[1]; 当您将其设置为`/`Django 时，它会尝试`/blah/`作为静态文件提供服务，而不是将其推送到您的 Django 应用程序。

您遇到的实际错误是`Directory indexes are not allowed here.`指未列出静态文件夹这一事实 - 您必须访问特定文件才能为其提供服务。

[1] 或 /media/，或 /files/，或其他任何...只是不是“/”。

# c# - 如何使控件显示在 Windows 窗体主菜单控件之上？

> ID：10646760
> 
> 赞同：0
> 
> 时间：2012-05-18T04:36:15.307
> 
> 标签：c#, .net, winforms

我想在 MainMenu 控件之上放置一个控件，但是设计器不会让您将控件移动到 MainMenu 控件之上。

还有另一种方法可以实现这一目标吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T02:35:40.087

结果是`MainMenu`控件不支持这种行为，但是使用`MenuStrip`控件（在 .net 2.0 中引入）支持这种行为。

所以我只需要将控件更改为新类型即可使其正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T04:43:53.713

将控件属性设置为

```
 control.Dock = DockStyle.Top;
  control.SendToBack(); 
```

# cocoa - 如何在 Cocoa 首选项中存储密码？

> ID：10646764
> 
> 赞同：4
> 
> 时间：2012-05-18T04:36:52.857
> 
> 标签：cocoa, nsuserdefaults

我打算在我的 Cocoa 应用程序中存储一个密码，`NSUserDefaults`但后来我意识到它是以纯文本形式存储的。

您如何存储 Cocoa 应用程序的密码凭证？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-18T04:45:53.390

密码应存储在钥匙串中。您可能应该首先查看[Keychain Services Programming Guide](https://developer.apple.com/library/mac/#documentation/Security/Conceptual/keychainServConcepts/01introduction/introduction.html)。钥匙串存在于 iOS 和 OS X 平台上。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-18T04:44:49.507

先用 BCrypt 加密。

如果您有兴趣，我有一个开源 BCrypt 实用程序类...

[旧链接已删除]

# maven - Eclipse indigo for Mac OS Maven 问题

> ID：10646767
> 
> 赞同：1
> 
> 时间：2012-05-18T04:37:13.763
> 
> 标签：maven, osx-lion

有人尝试在 Mac OS Lion 上安装 Eclipse Indigo EE 吗？我的 Windows 机器死了，我不得不在我的 Mac OS Lion 上安装 Eclipse 3.7。我用 Maven 更新了 Eclipse。两天来，我无法弄清楚为什么 Maven 没有得到超出似乎与它打包在一起的常规原型的原型。像'org.broadleafcommerce'。

我通过添加远程存储库找到了解决方法：http://repo1.maven.org/maven2/archetype-catalog.xml。我从来不需要在 Windows 安装中添加它。

因此，我能够使用“maven-archetype-webapp”创建一个 webapp 项目。但现在它不会像 spring 那样添加依赖项。该版本是面向 Web 开发人员的 Eclipse java IDE，Indigo Service Release 2，内部版本号：20120216-1057。

即使旧版本的 Eclipse 有没有更好的？请注意，我已尝试在首选项中下载 Maven 并更新 Eclipse 安装 - 但没有成功。而且，因为我在家，所以我不在防火墙后面。我已经在谷歌上搜索了 3 天不眠不休。

谢谢。

# matrix - 希尔密码加密中的 26 模

> ID：10646771
> 
> 赞同：2
> 
> 时间：2012-05-18T04:37:33.683
> 
> 标签：matrix, encryption

我正在阅读来自维基百科的[Hill Cipher](http://en.wikipedia.org/wiki/Hill_cipher)加密算法。我看到我有一个作为矩阵的键，它必须乘以值的矩阵。但是有两件事我不明白。

我不知道（mod 26）的意思。我知道它是模 26，但我不知道它的用途是什么？

至于第二个问题，我不明白矩阵 [15 14 7] 是从哪里来的？

任何好的解释将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-18T04:47:07.133

`26`是字典的长度，恰好是英文字母表的长度（A 到 Z）。使用模运算符允许您将矩阵乘法（加密）的每个可能输出映射到字母表中的一个字母（`834 = 2 (mod 26)`即**C**），这样您就可以将加密消息以字母串的形式存储。

来自`[15 4 7]`矩阵`[67 222 319] (mod 26)`：

![在此处输入图像描述](../Images/ba72ab1c1c224812edf080896f3c6579.png)

三等号表示矩阵`[67 222 319]`与`[15 4 7]`模 26 一致。左侧矩阵中的每个元素也应与右侧矩阵中的相应元素模 26 一致，因此您将模运算符应用于中的每个元素左侧矩阵以获取右侧矩阵中的每个元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T04:43:58.253

因此，将两个矩阵相乘，然后得到加密矩阵。然后，您**将结果矩阵的每个值取模 26**。

mod 26 只是一般的意思，“这个值是模 26”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-17T12:58:57.220

嗨，这就是所谓的模运算，因为字母表中有 26 个字母 0 是 A 1 是 B ... 25 是 Z 所以什么字母是 27 不清楚这就是为什么你用模运算符 % 或 mod every 环绕数字当你得到一个大于 25 或小于 0 的数字时，你用 mod 26 环绕在这方面 27 是 B 因为 27 mod 26 = 1 矩阵 [15 14 7] 来自 [67 222 319] 因为 67 mod 26 = 15 222 mod 26 = 14 和 319 mod 26 = 7 :)

# wpf - 如何为事件成员编写类型约束？

> ID：10646772
> 
> 赞同：2
> 
> 时间：2012-05-18T04:37:42.867
> 
> 标签：wpf, f#, structural-typing

WPF 控件有许多事件成员，它们具有相同的名称，但不共享相同的接口或基类。F# 的类型约束支持编写函数，该函数适用于具有相同成员的所有对象。然后，如果我可以为事件成员编写类型约束，我可以编写 curried 函数，以方便许多控件的属性设置。

```
open System.Windows.Controls
let inline click handler control =
  (^T:(member Click:IEvent<_,_>)control)
    .Add handler

Button()
|> click (fun _ -> ()) // error!

MenuItem()
|> click (fun _ -> ()) // error!

type A () =
  [<CLIEvent>]
  member __.Click = Event<_>().Publish
A() |> click (fun _ -> ()) // It works! but IntelliSense shows the member as "event A.Click .." 
```

但是上面的代码不起作用..我想为事件成员编写类型约束是不可能的..因为这是一个小问题，如果我们通过语言特性解决每一个小问题，语言将变得如此复杂以至于没有人可以使用！（现在 F# 似乎强大而简单）

然后我想知道一些解决这个问题的替代方法，如果它存在的话。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T12:45:03.360

发布这个问题后，我自己解决了这个问题。您可以通过调用方法 add_* 和 remove_* 来访问事件成员。类型约束适用于方法调用。谢谢！

```
let inline click handler control =
  let handler = RoutedEventHandler(fun _ e -> handler e)
  (^T:(member add_Click:RoutedEventHandler->unit)control,handler)

Button() |> click (fun _ -> ()) // works!
MenuItem() |> click (fun _ -> ()) // works! 
```

# javascript - 活动菜单突出显示 CSS

> ID：10646775
> 
> 赞同：31
> 
> 时间：2012-05-18T04:38:21.133
> 
> 标签：javascript, html, jquery, css

我想突出显示您单击的当前菜单。我正在使用 CSS，但它现在正在工作。

这是我的CSS代码：

```
#sub-header ul li:hover{ background-color: #000;}
#sub-header ul li:hover a{ color: #fff; }
#sub-header ul li.active{ background-color: #000; }
#sub-header ul li.active a{ color: #fff; } 
```

这是我的html：

```
<div id="sub-header">
    <ul>
        <li> <a href="index.php">Home</a> </li>
        <li> <a href="contact.php">Contact Us</a> </li>
        <li> <a href="about.php">About Us</a> </li>
    </ul>
</div> 
```

当我悬停并且菜单处于活动状态时，这就是我喜欢的

![当我悬停并且菜单处于活动状态时，这就是我喜欢的](../Images/0be641a8ecc14c8190c019a567d23836.png)

悬停是可以的，问题是当我点击菜单后黑地不显示

* * *

@Jonathan，我已经解决了它，它比你给出的更简单。

这是我的回答：

```
$(function(){
    // this will get the full URL at the address bar
    var url = window.location.href; 

    // passes on every "a" tag 
    $("#sub-header a").each(function() {
            // checks if its the same on the address bar
        if(url == (this.href)) { 
            $(this).closest("li").addClass("active");
        }
    });
}); 
```

然后在我的css文件上：

```
.active { background-color: #000; }
/* to override the existing css for "a" tag */
#sub-header .active a{ color: #fff; } 
```

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-05-18T04:44:31.130

在每个页面的正文中添加一个类：

```
<body class="home"> 
```

或者，如果您在联系页面上：

```
<body class="contact"> 
```

然后在创建样式时考虑到这一点：

```
#sub-header ul li:hover,
body.home li.home,
body.contact li.contact { background-color: #000;}

#sub-header ul li:hover a,
body.home li.home a,
body.contact li.contact a { color: #fff; } 
```

最后，将类名应用于您的列表项：

```
<ul>
  <li class="home"><a href="index.php">Home</a></li>
  <li class="contact"><a href="contact.php">Contact Us</a></li>
  <li class="about"><a href="about.php">About Us</a></li>
</ul> 
```

此时，无论何时您在`body.home`页面上，您的`li.home a`链接都将具有默认样式，表明它是当前页面。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-23T00:51:13.407

答：你需要 CSS 来表示“当前”链接，这里是 tut。

[jQuery 菜单导航的描述](http://www.kevinleary.net/highlighting-the-current-page-with-php-jquery/)

示例：[众多解决方案之一](http://www.kevinleary.net/wp-samples/jquery-current-navigation/index.html)

它为我工作

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-05-22T12:35:32.690

添加简单的方式

```
<div id='cssmenu'>
<ul>
<li class=''><a href='1.html'><span>1</span></a></li>
<li class=''><a href='2.html'><span>2</span></a></li>
<li class='' style="float:right;"><a href='3.html'><span>3</span></a></li>
</ul>
</div>

$("document").ready(function(){
$(function() {
$('.cssmenu a[href="' + location.pathname.split("/")[location.pathname.split("/").length-1] + '"]').parent().addClass('active');
});

}); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-08-24T06:51:02.700

由于这个问题的给定标签是*CSS*，我将提供我完成它的方式。

1.  在 .css 文件中创建一个类。

    `a.activePage{ color: green; border-bottom: solid; border-width: 3px;}`

2.  导航栏将类似于：

    *   家
    *   联系我们
    *   关于我们

**注意：**如果您已经使用一个类为所有 Nav-Bar 元素设置样式，您可以在 html-tag 中的泛型类之后使用*空格级联我们创建的特殊情况类。*

*示例：*在这里，我已经从我为所有 list-items 创建的名为*'navList'的类中导入了我的样式。*但是特殊情况的样式属性是*“activePage”类的一部分*

.CSS 文件：

```
a.navList{text-decoration: none; color: gray;}
a.activePage{ color: green; border-bottom: solid; border-width: 3px;} 
```

.HTML 文件：

```
<div id="sub-header">
    <ul>
        <li> <a href="index.php" class= "navList activePage" >Home</a> </li>
        <li> <a href="contact.php" class= "navList">Contact Us</a> </li>
        <li> <a href="about.php" class= "navList">About Us</a> </li>
    </ul>
</div> 
```

*看看我是如何将一个类名级联的。*

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-05-20T20:02:44.547

也许这是非常非常糟糕的方式，只适合懒惰的人，但我决定说出来。

我也使用了 PHP 和 bootstrap 和 fontawsome

简单来说，我有 2 页：1.index 和 2.create-user

将此代码放在您的代码上方

```
<?php
$name=basename($_SERVER["REQUEST_URI"]);
$name=str_replace(".php","",$name);
switch ($name) {
    case "create-user":
        $a = 2;
        break;
    case "index":
        $a = 1;
        break;
    default:
        $a=1;
}
?> 
```

并在菜单`<?php if($a==1){echo "active";} ?>`中为 menu1 添加类，为 menu2 添加`<?php if($a==2){echo "active";} ?>`

```
<ul id="menu" class="navbar-nav  flex-column text-right mt-3 p-1">
                        <li class="nav-item mb-2">
                            <a href="index.php" class="nav-link text-white customlihamid <?php if($a==1){echo "active";} ?>"><i
                                        class="fas fa-home fa-lg text-light ml-3"></i>dashbord</a>
                        </li>
                        <li class="nav-item mb-2">
                            <a href="#" href="javascript:" data-parent="#menu" data-toggle="collapse"
                               class="accordion-toggle nav-link text-white customlihamid <?php if($a==2){echo "active";} ?>" data-target="#tickets">
                                <i class="fas fa-user fa-lg text-light ml-3"></i>manage users
                                <span class="float-left"><i class="fas fa-angle-down"></i></span>
                            </a>

                            <ul class="collapse list-unstyled mt-2 mr-1 pr-2" id="tickets">
                                <li class="nav-item mb-2">
                                    <a href="create-user.php" class="nav-link text-white customlihamid"><i class="fas fa-user-plus fa-lg text-light ml-3"></i>add user</a>
                                </li>

                                <li class="nav-item mb-2">
                                    <a href="#" class="nav-link text-white customlihamid"><i class="fas fa-user-times fa-lg text-light ml-3"></i>delete user</a>
                                </li>

                            </ul>
                        </li>

                    </ul> 
```

并添加CSS

```
.customlihamid {
    transition: all .4s;
}

.customlihamid:hover {
    background-color: #8a8a8a;
    border-radius: 5px;
    color: #00cc99;
}
.nav-item > .nav-link.active  {
    background-color: #00cc99;
    border-radius: 7px;
    box-shadow: 5px 7px 10px #111;
    transition: all .3s;
}
.nav-item > .nav-link.active:hover  {
    background-color: #8eccc1;
    border-radius: 7px;
    box-shadow: 5px 7px 20px #111;
    transform: translateY(-1px);
} 
```

并在js中添加

```
$(document).ready(function () {
   $('.navbar-nav .nav-link').click(function(){
      $('.navbar-nav .nav-link').removeClass('active');
      $(this).addClass('active');
   })
}); 
```

首先检查你的工作没有 js 代码，以了解 js 代码是为了什么

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-07-23T12:14:26.783

首先，给所有链接一个唯一的 id 并创建一个名为 active 的 css 类：

```
<ul>
    <li><a id="link1" href="#/...">link 1</a></li>
    <li><a id="link2" href="#/...">link 2</a></li>
</ul> 
```

**CSS：**

```
.active {
    font-weight: bold;
} 
```

**jQuery版本：**

```
function setActiveLink(setActive){
    if ($("a").hasClass('active'))
        $("a").removeClass('active');
    if (setActive)
        $("#"+setActive).addClass('active');
}

$(function() {
    $("a").click(function() {
        setActiveLink(this.id);
    });
}); 
```

**香草 javascript 版本：**

为了防止使用 选择过多的链接`document.querySelectorAll`，请给父元素一个名为 menuLinks 的 id。在链接上添加一个 onClick 处理程序。

```
<ul id="menuLinks">
    <li><a id="link1" href="#/..." onClick="setActiveLink(this.id);">link 1</a></li>
    <li><a id="link2" href="#/..." onClick="setActiveLink(this.id);">link 2</a></li>
</ul> 
```

代码：

```
function setActiveLink(setActive){
    var links = document.querySelectorAll("#menuLinks a");
    Array.prototype.map.call(links, function(e) {
        e.className = "";
        if (e.id == setActive)
            e.className = "active";
    })
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-09-18T10:06:30.007

您应该引用当前元素，而不是所有与您的选择器匹配的元素。

```
$("#mainMenu td").click(function() {
$(this).css('background-color', '#EDEDED'); 
```

});

我还建议您使用 CSS 类而不是这样设置 CSS 属性。

那会是这样的；

```
$("#mainMenu td").click(function() {
$(this).addClass('selected'); 
```

});

和...一起;

```
#mainMenu td.selected { 
```

背景颜色：#EDEDED；}

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-10-05T10:31:23.230

试试这个（复制和粘贴）：

测试.html：-

```
<html>
 <link rel="stylesheet" type="text/css" href="style.css">
 <a class="fruit" href="#">Home</a></span>
 <a class="fruit"  href="#">About</a></span>
 <a class="fruit"  href="#">Contact</a></span>
</html> 
```

样式.css：-

```
a:link{
 color:blue;
}

a:visited{
 color:purple;
}

a:hover{
 color:orange;
}
a:focus{
color:green;
}

a:active{
 color:red;
}

a:active{
 color:yellow;
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-04-14T00:18:37.520

另一种带有简单 2 线监听器的变体

```
$( ".menu_button" ).click(function() {

    $( ".menu_button" ).removeClass('menu_button_highlight');
    $(this).addClass('menu_button_highlight');
}); 
```

=====

```
 <a class='menu_button' href='#admin'>Admin</a>
    <br/>

    <a class='menu_button' href='#user_manager'>User Manager</a>
    <br/>

    <a class='menu_button' href='#invite_codes'>Invite Codes</a> 
```

====

```
.menu_button {

    padding: 0 5px;
}

.menu_button_highlight {

    background: #ffe94c;
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-04-21T20:56:39.560

假设我们有一个这样的菜单：

```
<div class="menu">
  <a href="link1.html">Link 1</a>
  <a href="link2.html">Link 2</a>
  <a href="link3.html">Link 3</a>
  <a href="link4.html">Link 4</a>
</div> 
```

让我们当前的网址为`https://demosite.com/link1.html`

使用下面的函数，我们可以在我们的 url 中添加菜单的 href 所在的活动类。

```
let currentURL = window.location.href;

document.querySelectorAll(".menu a").forEach(p => {
  if(currentURL.indexOf(p.getAttribute("href")) !== -1){
    p.classList.add("active");
  }
}) 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-10-07T07:52:40.713

按照@Sampson的回答，我以这种方式接近它 -

**HTML：**

1.  我在每个页面中都有一个`div`with`content`类，其中包含该页面的**内容**。页眉和页脚是分开的。
2.  我为每个页面添加了一个独特的类`content`。例如，如果我正在创建一个**CONTACT US**页面，我会将页面的内容放入`<section class="content contact-us"></section>`.
3.  这样，我可以更轻松地在单个**style.css**中编写特定于页面的 CSS 。

```
<body>
    <header>
        <div class="nav-menu">
            <ul class="parent-nav">
                <li><a href="#">Home</a></li>
                <li><a href="#">Contact us</a></li>
                ...
            </ul>
        </div>
    </header>

    <section class="content contact-us">
        Content for contact us page goes here
    </section>

    <footer> ... </footer>

</body>
```

**CSS：**

1.  我已经定义了一个`active`类，它包含活动菜单的样式。

```
.active {
    color: red;
    text-decoration: none;
}
```

```
<body>
    <header>
        <div class="nav-menu">
            <ul class="parent-nav">
                <li><a href="#">Home</a></li>
                <li><a href="#">Contact us</a></li>
                ...
            </ul>
        </div>
    </header>

    <section class="content contact-us">
        Content for contact us page goes here
    </section>

    <footer> ... </footer>

</body>
```

**JavaScript：**

1.  现在在 JavaScript 中，我的目标是将菜单链接文本与 HTML 中定义的唯一类名进行比较。我正在使用 jQuery。
2.  首先，我获取了所有菜单文本，并执行了一些字符串函数以使文本小写并用连字符替换空格，使其与类名匹配。
3.  现在，如果`content`该类与菜单文本具有相同的类（小写且没有空格），则将`active`类添加到菜单项。

```
var $allMenu = $('.nav-menu > .parent-nav > li > a');
var $currentContent = $('.content');
$allMenu.each(function() {
  $singleMenuTitle = $(this).text().replace(/\s+/g, '-').toLowerCase();
  if ($currentContent.hasClass($singleMenuTitle)) {
    $(this).addClass('active');
  }
});
```

```
.active {
  color: red;
  text-decoration: none;
}
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

<body>
  <header>
    <div class="nav-menu">
      <ul class="parent-nav">
        <li><a href="#">Home</a></li>
        <li><a href="#">Contact us</a></li>
        ...
      </ul>
    </div>
  </header>

  <section class="content contact-us">
    Content for contact us page goes here
  </section>

  <footer> ... </footer>

</body>
```

**为什么我接近这个？**

1.  @Sampson 的回答对我来说效果很好，但我注意到每次我想添加新页面时都必须添加新代码。
2.  同样在我的项目中，`body`标签在`header.php`文件中，这意味着我不能为每个页面编写唯一的类名。

# iphone - iPad 应用程序插件

> ID：10646782
> 
> 赞同：1
> 
> 时间：2012-05-18T04:39:32.140
> 
> 标签：iphone, ios, ipad, plugins

嘿，我正在计划一个用于在 iPad 上编码的应用程序。IDE 的一个常见功能是为不同的语法突出显示插件，我的问题是关于 iOS 规则/功能。是否可以让其他人创建可以在 iPad 应用程序中“导入”的语法文件？

我认为这可以通过 HTTP 完成，但我要求的更像是“插件商店”

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T04:49:53.960

只要插件不是可执行代码（这意味着它是您自己解析的数据），您就可以做任何您想做的事情。如果您想让它们可购买，则需要通过应用内购买。

一般逻辑流程将是：

1.  用户启动应用程序并前往商店
2.  用户购买插件
3.  应用程序从您的服务器请求 XML/JSON/任何格式
4.  服务器验证收据
5.  服务器返回文件
6.  应用程序将文件保存到应用程序沙箱并指定文件不应由 iCloud 备份（或将其保存到缓存目录而不是文档目录），因为设备可以重新下载静态内容。

如果内容是免费的，那么您当然可以跳过第 2 步和第 4 步。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T04:50:09.977

> 2.7 以任何方式或形式下载代码的应用程序将被拒绝 2.8 安装或启动其他可执行代码的应用程序将被拒绝

这是您不再想知道为什么 iPad 没有插件架构的那些时刻之一……

当然，如果它只是一个plist或某种格式的数据文件，那也可以。当然，围绕它进行编码会有点棘手（这是制作插件的全部原因），因为大多数应用程序内购买在大多数应用程序中都处于一种“隐藏”状态。

# android - 使用 sqlite 进行 Android 开发：如何在不使用列表视图的情况下使用数据库查询的字符串结果？

> ID：10646785
> 
> 赞同：0
> 
> 时间：2012-05-18T04:39:56.530
> 
> 标签：android, string, sqlite, cursor

我已经为此工作了好几天，断断续续。我想要做的是当用户单击一个按钮时，对我的 sql lite 数据库运行一个返回 1 值（可能是整数，但字符串很好）的查询，然后我可以将其放入文本框中。（此外，当用户更改输入值并单击按钮时，他们会得到不同的结果。

我已经浏览了大量示例，但它们都在最后使用列表视图来显示一组行。有没有办法从我的数据库适配器中获取结果，我认为它是一个字符串。在下面来自 mydbadapter 的代码中，我想从 KEY_FEE 列返回一个值：

```
public String getdata(){
 String[] columns = new String[]{KEY_ROWID, KEY_SPEED, KEY_TIME, KEY_FEE };
 Cursor c = myDatabase.query(DATABASE_TABLE, columns, "speed like '25' AND "
         + "time like '50'", null, null, null, null);
 String result ="";
 int iRow =c.getColumnIndex(KEY_ROWID);
int iSPEED =c.getColumnIndex(KEY_SPEED);
int iTIME=c.getColumnIndex(KEY_TIME);
int iFEE =c.getColumnIndex(KEY_FEE);

for (c.moveToFirst(); !c.isAfterLast();c.moveToNext()){
    result = result + c.getString(iRow) + " " +c.getString(iSPEED) + " " 
    +c.getString(iTIME)  + " " +c.getString(iFEE) + "/n";
}
 return result;    } 
```

这个**结果**实际上是一个字符串吗？

如果是这样，我如何从我的主程序中访问它，点击按钮： Button.OnClickListener buttonOnClickListener = new Button.OnClickListener(){

```
 @Override
       public void onClick(View v) {
            System.out.println("The calculate FEE button was clicked " );

            //TODO
            //getdata here from database, to a variable for lineout, sub in for "60".
            //
            myDbHelper.getdata();
            //set the stringVal variable to the Fee
            _stringVal = "Fee is:" **???how to specify the result string from dbhelper here?**;
            //sets the text textview based on prior code: _value = (TextView) findViewById(R.id.textView3);
            _value.setText(_stringVal);

            //System.out.println("Text should say "+_stringVal);
            // System.out.println("Get Data Has been called. ");
       }
    }; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T04:52:37.117

在进一步涉足 Android 开发之前，您应该考虑提高您的 Java 知识。网上有很多教程和资源可以帮助你。

要回答您的问题：

> 这个结果实际上是一个字符串吗？

是的，`String result ="";`告诉你这`result`是一个`String`对象引用。

> 在下面来自 mydbadapter 的代码中，我想从 KEY_FEE 列返回一个值：

您的代码不仅仅返回 KEY_FEE 列。它将多个结果（与您的 SQL 查询匹配的所有结果）中的 4 列值连接成一个字符串。

> _stringVal = "Fee is:" **???这里如何指定dbhelper的结果字符串？**;

这就是你的做法：

```
//set the stringVal variable to the Fee
_stringVal = myDbHelper.getdata(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T05:20:22.237

是的**结果**是一个字符串。您将其设置为字符串，因此它是字符串。

如果您只想获取一列的值，为什么要将所有列的值放入结果字符串。

```
for (c.moveToFirst(); !c.isAfterLast();c.moveToNext()){
    result = result + c.getString(iRow) + " " +c.getString(iSPEED) + " " 
    +c.getString(iTIME)  + " " +c.getString(iFEE) + "/n";
} 
```

为您的点击事件获取该值

```
_stringVal = myDbHelper.getdata(); 
```

根据您的查询和数据库中的值，有时您可能会获得不止一行的数据。那么你的**结果**可能很长并且包含很多值。如果您只需要显示这没关系，但如果您需要使用这些值进行更多计算，这不是一个好主意。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T06:01:56.477

也许我误解了，但是您说您只想要 KEY_FEE 列中的值，那么如果您想要的只是一位，为什么还要连接所有这些数据呢？还是所有的一位？

```
Cursor c = myDatabase.query(DATABASE_TABLE, columns, "speed like '25' AND " 
     + "time like '50'", null, null, null, null); 

c.moveToFirst();
String[] feeArray = new String[c.getcount()]
int i=0;    
while (c.isAfterLast() == false) {
    feeArray[i] = c.getString(c.getColumnIndex(KEY_FEE));     
    i++;
    c.moveToNext();
} 
```

上面将为游标返回的每条记录放入一个 KEY_FEE 值到字符串数组中。

# c++ - 如何知道设备 /dev/hd* 是否是带有 c/c++ 的 linux 中的 cdrom？

> ID：10646786
> 
> 赞同：0
> 
> 时间：2012-05-18T04:40:06.587
> 
> 标签：c++

我使用 xen 创建一个 vm 并通过虚拟 cdrom 传递一些信息，最后，在 DomU 中，我需要知道 cdrom 包含信息的磁盘是哪个磁盘。问题是：如何找到 cdrom 设备名称？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T07:29:48.847

最简单的就是执行 lsblk，pipe in the result 和 in the result

```
sr0     11:0    1   308M  0 rom  
sda      8:0    0   120G  0 disk 
├─sda1   8:1    0   300M  0 part /boot
├─sda2   8:2    0 117.8G  0 part /
└─sda3   8:3    0     2G  0 part [SWAP] 
```

检查一行，例如：

“rom”所以，对我来说，CD-rom 是 /dev/sr0 。对你来说可能是 hd0

使用 sysfs.h 和 sysfs 调用需要做更多的工作，更多信息在“man sysfs”或浏览[http://lxr.free-electrons.com/source/include/linux/sysfs.h](http://lxr.free-electrons.com/source/include/linux/sysfs.h)或lsblk 的来源：http: [//gitorious.org/util-linux-ng/util-linux-ng/blobs/cc6b1d11eabf9d86849a80f2ca8b4c0afd45844f/misc-utils/lsblk.c](http://gitorious.org/util-linux-ng/util-linux-ng/blobs/cc6b1d11eabf9d86849a80f2ca8b4c0afd45844f/misc-utils/lsblk.c)

希望这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-22T12:35:54.907

您可以使用 /proc/sys/dev/cdrom/info 的内容

例如
$ cat /proc/sys/dev/cdrom/info

```
CD-ROM information, Id: cdrom.c 3.20 2003/12/17
drive name:     sr0
drive speed:        62
drive # of slots:   1
Can close tray:     1
Can open tray:      1
Can lock tray:      1
Can change speed:   1
Can select disk:    0
Can read multisession:  1
Can read MCN:       1
Reports media changed:  1
Can play audio:     1
Can write CD-R:     1
Can write CD-RW:    1
Can read DVD:       1
Can write DVD-R:    1
Can write DVD-RAM:  1
Can read MRW:       1
Can write MRW:      1
Can write RAM:      1 
```

这里，如果“驱动器名称：”行包含 sr0，则表示 /dev/sr0 是 cdrom。

# sql - 选择所有参与过所有选举的用户

> ID：10646787
> 
> 赞同：2
> 
> 时间：2012-05-18T04:40:16.210
> 
> 标签：sql

我的数据库结构为

```
User Table(user id, username, first name,last name)

Event Table(event id,event name, event date)

UserEvent(user id, event id) 
```

我想知道所有参加过所有活动的用户的用户名

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T04:43:56.243

这是一种方法：选择与用户关联的不同事件 ID 的数量以及事件 ID 的总数。

```
select *
from User u
where (
    select count(*) from (
        select distinct ue.EventId
        from UserEvent ue
        where ue.UserId=u.UserId
    )
) = (select count(*) from Event) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T04:47:04.250

一个想法 ：

1) 计算具有不同事件 ID 的事件数

2）对于一个用户，计算其不同的事件，如果数量相同，则将其放入表中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T04:50:16.960

这应该够了吧

```
 SELECT u.id as user_id, u.username
FROM USER U,
(
        SELECT COUNT(EVENT_ID) AS EVENT_COUNT
        FROM EVENT
        ) AS E
    INNER JOIN (
        SELECT UDSER_ID, COUNT(EVENT_ID) AS EVENT_COUNT
        FROM USEREVENT
        GROUP BY USER_ID
        ) AS UE ON U.USER_ID = UE.USER_ID
WHERE E.EVENT_COUNT = UE.EVENT_COUNT 
```

# javascript - jQuery AJAX IE - 跳过的函数 ajax

> ID：10646789
> 
> 赞同：0
> 
> 时间：2012-05-18T04:40:37.383
> 
> 标签：javascript, jquery, internet-explorer

```
$("#multiselect").hide();
$("#multiselect_container").append('<img id="loader" src="/loader.gif" />'); 
```

`$("#list").click()`由于某种原因，在 IE 中跳过了块内的上述 2 个函数，而不是 FF，Chrome

```
$("#list").click(function() 
{           
    var selection = $(this).val();

    $("#multiselect").hide();
    $("#multiselect_container").append('<img id="loader" src="/loader.gif" />');

    $.ajax(
    {
        url: 'include/ajax.php?id='+selection,
        async: false,
        dataType: 'json',
        success: function (json) 
        {       
            $("#loader").remove();
            $("#multiselect").show();

            //parse json
        } 
    });//json
}); 
```

**这是怎么回事：**

有一个按钮`#list`和一个容器`#multiselect_container`，`#multiselect`它是容器大小的选择框。

单击时`#list`，选择框被隐藏并显示其下方的容器，并带有一个加载栏。

ajax 调用完成后，加载栏被移除，选择框再次显示。

在 Firefox 中，这工作得非常好。在 IE 中它没有。

**我尝试过的事情：**

*   `$('#list').ajaxComplete(function() {});`在成功部分

*   休眠 php 文件 3 秒。相同的结果，除了延迟。

*   ### 删除 ajax 块，这两个调用正确进行。

*   缓存不是问题，正在进行 ajax 调用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T04:59:44.670

您应该更改`async: false`为`async: true`. 在ajax 调用完成之前，显示不更新`async: false`是*正常行为。*因此，这种变化可能足以解决它。否则请继续阅读...

我以前在 IE 上遇到过类似的问题，它只是不想在执行 Ajax 时更新显示以显示“正在加载”类型的消息——即使 Ajax 是异步的。并不是函数本身被跳过，只是显示直到 Ajax 完成回调执行之后才会更新——并且由于完成处理删除了“加载”消息，就好像它从用户的角度来看从未存在过看法。与您的代码一样，我的项目在 Firefox 中运行良好。那是不久前的事了，但如果我没记错的话，我通过在 Ajax 调用中引入一个短暂的超时来让它在 IE 中工作，如下所示：

```
$("#list").click(function() 
{           
    var selection = $(this).val();

    $("#multiselect").hide();
    $("#multiselect_container").append('<img id="loader" src="/loader.gif" />');

    setTimeout(function() {
       $.ajax(
       {
           url: 'include/ajax.php?id='+selection,
           async: true,  // changed from false
           dataType: 'json',
           success: function (json) 
           {       
               $("#loader").remove();
               $("#multiselect").show();

               //parse json
           } 
       });//json
    }, 5);
}); 
```

# wikipedia - dbpedia 也有单独的小说信息吗？

> ID：10646790
> 
> 赞同：0
> 
> 时间：2012-05-18T04:40:39.807
> 
> 标签：wikipedia, dbpedia

维基百科有一个单独的小说信息框，因此我想知道 dbpedia 是否像书籍一样有单独的小说本体？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T20:03:56.970

Infobox_novel 只是对 Infobox_book 的重定向：

[http://en.wikipedia.org/wiki/Template:Infobox_novel](http://en.wikipedia.org/wiki/Template:Infobox_novel)

虽然有数千页使用 Infobox_book，但只有六个使用 Infobox_novel：

[http://en.wikipedia.org/wiki/Special:WhatLinksHere/Template:Infobox_novel?namespace=0](http://en.wikipedia.org/wiki/Special:WhatLinksHere/Template:Infobox_novel?namespace=0)

所以在这种情况下，添加一个新的 DBpedia 类可能没有意义。

作为记录，这是 DBpedia 类 Book 的类层次结构：

[http://mappings.dbpedia.org/server/ontology/classes/#Book](http://mappings.dbpedia.org/server/ontology/classes/#Book)

这里有一些关于如何添加新类的文档：

[http://mappings.dbpedia.org/index.php/Ontology_Editing](http://mappings.dbpedia.org/index.php/Ontology_Editing)

# c++ - 友谊得到继承？？奇怪的

> ID：10646794
> 
> 赞同：0
> 
> 时间：2012-05-18T04:41:28.240
> 
> 标签：c++, inheritance, friend

正所谓——“**朋友不遗传**”。
代表着

```
class c
 {public:
 friend void i_am_friend();
 };

class d:public c
{public:
 //
}; 
```

这里 **void i_am_friend()**不是在类 d 中继承的。用更专业的术语来说（我是这样认为的。）

类 d 的对象不会为**void i_am_friend()**分配内存，因为它是基类的朋友。
现在考虑问题号。14.3 在这个页面[http://www.parashift.com/c++-faq/friends.html](http://www.parashift.com/c++-faq/friends.html)

```
class Base {
 public:
   friend void f(Base& b);
   ...
 protected:
   virtual void do_f();
   ...
 };

 inline void f(Base& b)
 {
   b.do_f();
 }

 class Derived : public Base {
 public:
   ...
 protected:
   virtual void do_f();  // "Override" the behavior of f(Base& b)
   ...
 };

 void userCode(Base& b)
 {
   f(b);
 } 
```

这段代码怎么可能是正确的？因为

> class derived d;// d 不会有友元函数
> 类基 *b=&d; //结果b也没有成员函数

所以在这里调用 f(b) 应该是错误的。

**所以说什么是正确的：-
友谊不是继承的
或友谊是继承的，但不能在派生类中使用**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T04:49:01.777

> 友谊不是遗传的

即使在您的示例中也是如此。对 f(b) 的调用不应该是一个错误，因为`Derived`对象被转换为`Base&`类型。

该函数`f`只能访问类的私有和受保护部分`Base`，但只能访问类的公共部分`Derived`。

# mysql - 在数据库中选择值为 NULL 的 int 类型的行

> ID：10646795
> 
> 赞同：-1
> 
> 时间：2012-05-18T04:41:41.517
> 
> 标签：mysql, sql, default-value

我正在维护一个项目。有一个表叫'timeblock'，它有一个字段叫'break_minutes'，在遗留设计中，'break_minutes'的类型是int，默认值为NULL。

这种设计不适合我的新任务，因为我将使用“break_minutes”来做一些数学函数。喜欢总和。所以我已经将数据库架构和默认值更改为 0 而不是 Null。

所以我必须将'break_minutes'值为NULL的所有数据更改为0。

所以我写了sql：

```
update timeblock set break_minutes=0 where break_minutes=NULL 
```

结果是空的。

如果我像这样写sql：

```
update timeblock set break_minutes=0 where break_minutes=NULL 
```

结果仅适用于值为 0 的行。

两个sql都达不到我的预期。

谁有这个想法？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T04:43:24.030

要检查一个值是否为**NULL**，请使用特殊的比较谓词`IS NULL`而不是使用比较运算符。比较运算符`unknown`在将任何内容与**NULL**进行比较时返回。

```
UPDATE timeblock SET break_minutes=0 WHERE break_minutes IS NULL 
```

# asp.net - display:block 防止在 ASP.NET 菜单中更改字体大小

> ID：10646800
> 
> 赞同：0
> 
> 时间：2012-05-18T04:42:38.837
> 
> 标签：asp.net, css

我在我的 VS2010 Web 应用程序中使用 ASP.NET 菜单控件，我在动态菜单项可点击区域出现问题，所以我使用 style=display:block 现在可以了，但不幸的是我的动态菜单项字体大小不能现在变了！！在使用 display:block 之前它们还可以（大），但现在它们显示得更小了，我无法更改它们的大小，我在我的风格中使用了 font-size:large，并且还在控制标签中设置了 font-size="large"但仍然没有运气！这里出了什么问题？我怎样才能把这两件事都做好？

我在 DynamicMenuItemStyle 中使用 cssstyle="myStyle"，当我删除我的 cssstyle 时，会执行字体更改！

这是我的菜单：...

```
 <DynamicMenuItemStyle HorizontalPadding="5" Font-Size="XX-Large" CssClass="MenuFullClick" />
                                    <DynamicMenuStyle BackColor="#E6C679" Font-Size="XX-Large" Width="230px" />
                                    <DynamicHoverStyle Font-Size="XX-Large" Width="230px" /> 
```

这是我的CSS：

```
 .MenuFullClick
    {
         display: block;
         color:White;
         Height:40px;
         Width:230px;
         font-size:xx-large;
    } 
```

我最终渲染的 HTML 是这样的： ...

```
<table border="0" cellpadding="0" cellspacing="0">
    <tr onmouseover="Menu_HoverDynamic(this)" onmouseout="Menu_Unhover(this)" onkeyup="Menu_Key(event)" id="Menu1n6">
        <td><table class="MenuFullClick Menu1_4" cellpadding="0" cellspacing="0" border="0" width="100%">
            <tr>
                <td style="white-space:nowrap;width:100%;"><a class="Menu1_1 MenuFullClick Menu1_3" href="products.aspx?id=1" style="border-style:none;font-size:1em;">انواع دستمال کاغذی</a></td><td style="width:0;"><img src="Images/arrow.png" alt="Expand انواع دستمال کاغذی" style="border-style:none;vertical-align:middle;" /></td>
            </tr>
        </table></td>
    </tr><tr onmouseover="Menu_HoverDynamic(this)" onmouseout="Menu_Unhover(this)" onkeyup="Menu_Key(event)" id="Menu1n7">
        <td><table class="MenuFullClick Menu1_4" cellpadding="0" cellspacing="0" border="0" width="100%">
            <tr>
                <td style="white-space:nowrap;width:100%;"><a class="Menu1_1 MenuFullClick Menu1_3" href="pr1.aspx?catcode=9" style="border-style:none;font-size:1em;">پوشک بچه</a></td>
            </tr>
        </table></td> 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T09:11:22.710

抱歉回复晚了，上班。

你的链接有`style="border-style:none;font-size:1em;"`

所以`font-size:1em;`为你设置了字体大小。您应该删除`font-size`from`DynamicHoverStyle`并在`css`课堂上使用它。

# c - C malloc 仅在第二次调用时崩溃

> ID：10646804
> 
> 赞同：2
> 
> 时间：2012-05-18T04:43:25.107
> 
> 标签：c, crash, malloc, call

我在使用 malloc 调用时遇到了一些麻烦。问题是这个调用是在一个我在我的程序上调用两次的函数上进行的。**该函数的第二个 malloc 仅在我第二次调用此函数时崩溃**。我尝试交换其中一些的顺序，甚至删除一个。在第一种情况下，第二个 malloc（最初是第一个）崩溃了，在第二种情况下，它崩溃了稍后出现在同一函数中的 realloc。另外，我尝试在第二次之前调用我的函数一次，并在（新的）第二次调用时一直崩溃。谁能帮我？这是我的代码：

```
int main(int argv, char *argc[]){
    fsys = malloc(sizeof(struct ext2system)); // Global pointer var

    getsysdata();

    list_dir(fsys->root);
//  list_dir(fsys->root); // IF THIS LINE IS UNCOMMENTED, 
                          // THE PROGRAM CRASHES ON THIS CALL
                          // IF NOT, IT CRASHES ON data = get_cont(fsys->root); 

    pdir dir = malloc(sizeof(struct s_direct));
    int* data;
    int offs, i;

    data = get_cont(fsys->root);  
    offs = 0;
    for (i = 0; i < fsys->root->i_links_count + 2; ++i) {
        offs += readdirent(getblock(data[0])+offs, dir);
        printf("%.*s\n", dir->name_len, dir->name);
        if(dir->file_type==1) printf("%s\n", data);
    }

    unmap(fsys->diskmap);
    return 0;
}

void list_dir(pinode inod){
    // Lists a directory contents
    pdir dir = malloc(sizeof(struct s_direct));
    int* data;
    int offs, i;

    data = get_cont(inod);
    offs = 0;
    for (i = 0; i < inod->i_links_count + 2; ++i) {
        offs += readdirent(getblock(data[0])+offs, dir);
        printf("%.*s\n", dir->name_len, dir->name);
    }

}

int *get_cont(pinode inod){
    // Recupera contenido de los blocks de datos de un inodo
    int *cont=NULL; 
    int *idx=NULL;
    int i=0;
    int *block;

    cont = malloc(sizeof(int));
    idx  = malloc(sizeof(int)); // HERE IS WHERE THE PROGRAM CRASHES
                                // EVEN IF MALLOCS ARE SWAPPED

    while(i < inod->i_blocks && i<13) {
        // Recupera los 12 primeros bloques directamente
            realloc(cont, i*sizeof(int)); // CRASHED HERE WHEN
                                          // I DELETED ONE MALLOC

            cont[i]=inod->i_block[i];
            i++;
    }

    if(i < inod->i_blocks){
        *idx=13;
        block=(int*)getblock(inod->i_block[*idx]);
        fetchcont(block, idx, cont, inod->i_blocks, 0);
    }
    if(i < inod->i_blocks){
        block=(int*)getblock(inod->i_block[*idx]);
        fetchcont(block, idx, cont, inod->i_blocks, 1);
    }
    if(i < inod->i_blocks){
        block=(int*)getblock(inod->i_block[*idx]);
        fetchcont(block, idx, cont, inod->i_blocks, 2);
    }

    return cont;

} 
```

谢谢指教！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T04:57:23.093

这部分绝对是一个问题（缩短的片段）：

```
int i = 0;

cont = malloc(sizeof(int)); 

while(i < inod->i_blocks && i<13) {

        realloc(cont, i*sizeof(int)); 
```

第一次通过，`i`将在 realloc 调用时为零。`malloc()`手册页说：

> `realloc()`将 ptr 指向的内存块的大小更改为 size 字节。内容将不变为新旧尺寸中的最小值；新分配的内存将未初始化。如果 ptr 为 NULL，则对于所有 size 值，调用等效于`malloc(size)`,；**如果 size 等于 0，并且 ptr 不为 NULL，则调用等效于`free(ptr)`.** 除非 ptr 为 NULL，否则它一定是由较早的`malloc()`,`calloc()`或调用返回的`realloc()`。如果指向的区域被移动，`free(ptr)`则完成。

既然你去了：

```
cont[i]=inod->i_block[i]; 
```

您将写入刚刚释放的内存（或者，当`i`非零时，您将写入刚刚分配的内存）。这可以是任何东西 - 您可能正在覆盖 的内部结构`malloc()`，这可能会导致稍后在调用 malloc 或 free 时崩溃。

此外，在 , 之后`realloc(cont, 0)`将`cont`不再是由返回的指针`malloc()`（因为就像你写的一样`free(cont);`），它也不会为空。这几乎肯定会在`i`为 1 时崩溃。

你可能的意思是：

```
 realloc(cont, (i+1)*sizeof(int)); 
```

反而。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T04:56:34.380

alloc 函数中的崩溃意味着您已经踩到了他们的簿记数据。在 getsysdata() 或 list_dir() 调用树中的某个位置，您通过一个错误的指针进行分配，该指针恰好指向超出您认为它指向的任何内容的末尾，从而损坏了 malloc 的数据。情况可能更糟，您的覆盖可能会踩到您关心的数据。

# ajax - ajax 获取文件内容时显示加载图像

> ID：10646805
> 
> 赞同：6
> 
> 时间：2012-05-18T04:43:34.790
> 
> 标签：ajax

我是 ajax 新手并阅读了一些 tuts 来制作一个具有多个按钮的 lil 脚本，单击每个按钮都会在特定的 div 中加载一个 php 文件。对于那个我使用这个

```
function loadXMLDoc()
{
var xmlhttp;
if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.onreadystatechange=function()
  {
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
   document.getElementById("1").innerHTML=xmlhttp.responseText;
        }
  }
xmlhttp.open("GET","feedchck.php",true);
xmlhttp.send();
} 
```

动作按钮：

```
<button type="button" onclick="loadXMLDoc();">Request</button>
<div id="1">asdf</div> 
```

我做到了这部分，点击 php 文件加载完美。但因为它需要时间来处理它显示空白区域。那么是否可以在处理过程中显示加载图像或文本，完成后它会隐藏图像并显示文件内容？
帮助表示赞赏:}
欢呼

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-18T04:54:41.833

```
<button type="button" onclick="loadXMLDoc();">Request</button>
<!--An empty tag - this be the loading image-->
<span id="loading"></span>
<div id="1">asdf</div>

<script>
function loadXMLDoc() {
    var xmlhttp;
    if (window.XMLHttpRequest) {// code for IE7+, Firefox, Chrome, Opera, Safari
        xmlhttp = new XMLHttpRequest();
    }
    else {// code for IE6, IE5
        xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
    }
    xmlhttp.onreadystatechange = function () {
        if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
            document.getElementById("loading").innerHTML = ''; // Hide the image after the response from the server
            document.getElementById("1").innerHTML = xmlhttp.responseText;
        }
    }
    document.getElementById("loading").innerHTML = '<img src="../loading.gif" />'; // Set here the image before sending request
    xmlhttp.open("GET", "feedchck.php", true);
    xmlhttp.send();
}
</script> 
```

# php - 另一个简单的 php 数组循环新手

> ID：10646806
> 
> 赞同：0
> 
> 时间：2012-05-18T04:43:39.600
> 
> 标签：php, arrays, loops

抱歉，我确信这很容易，但我花了很长时间试图解决这个简单的问题。我有一个名为`$listOfLinks`. 当我`print_r`这是输出时：

```
Array ( [0] => Array ( [LinkID] => 1 [GroupID] => 1 [Description] => Home [Title] => Home Page [Hyperlink] => [Target] => ) [1] => Array ( [LinkID] => 2 [GroupID] => 1 [Description] => View Employees [Title] => View Employees [Hyperlink] => Views/ViewEmployees.php [Target] => ) ) 
```

我想遍历数组打印出诸如`Title`. 到目前为止，我的代码如下所示：

```
foreach($listOfLinks as $key => $element)
{
    echo $key["Title"];
} 
```

出了点问题，因为输出绝对没有。没有错误。消息什么的。我一直在尝试遵循[http://www.tizag.com/phpT/arrays.php](http://www.tizag.com/phpT/arrays.php)上的建议，但我似乎误解了一些东西。

这个链接到[Foreach 循环在 PHP 中返回空值？](https://stackoverflow.com/questions/2483596/foreach-loop-returning-null-values-in-php)看起来很有希望，但最终结果证明这是一个与我无关的简单问题。同样有希望的是[PHP：循环遍历多维数组并在数组项之间建立父子关系，](https://stackoverflow.com/questions/8685825/php-loop-through-multidimensional-array-and-establish-parent-child-relationship)但它没有合适的解决方案。我以为我[对 PHP 中的这个简单数组问题](https://stackoverflow.com/questions/6767700/simple-array-question-in-php)很接近，但结果证明它是不相关的。这看起来也很有希望，但事实并非如此。[PHP 又一个多维关联数组问题](https://stackoverflow.com/questions/7029748/php-yet-another-multidimensional-associative-array-problem)。

看起来答案在[另一个 php 数组循环问题](https://stackoverflow.com/questions/4626602/another-php-array-looping-question)中，但我不明白它是否存在。

请不要因为这么简单的问题恨我。我真的一直在努力理解这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T04:45:05.747

使用您使用的语法进行循环时[**`foreach`**](http://fr.php.net/manual/en/control-structures.foreach.php)，您希望使用`$element`变量*（包含当前项目的数据）*，而不是变量（仅`$key`包含*数组中当前项目的索引）*：

```
foreach($listOfLinks as $key => $element)
{
    echo $element["Title"];
} 
```

此外，由于您没有使用每个项目的键，您可以使用这个更短的语法：

```
foreach($listOfLinks as $element)
{
    echo $element["Title"];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T04:45:08.907

```
foreach($listOfLinks as $value)
{
    echo $value["Title"];
} 
```

您正在做的是对密钥进行索引。而是索引到数组元素。

# c# - 将 GridViewRow 宽度保持在 GridView 范围内

> ID：10646807
> 
> 赞同：0
> 
> 时间：2012-05-18T04:43:45.787
> 
> 标签：c#, wpf, listview

我试图在 GridView 边界中保留一个 GridView 行，
以便如果有人调整列的大小，则行的整个大小仍然在 GridView 中 **没有滚动条**。！

[正确的行为](https://i.stack.imgur.com/Q7XPD.png)

但是任何人都可以像这样调整列的大小！

[错误行为](https://i.stack.imgur.com/Z0aTL.png)

您可能会看到错误的行为屏幕截图有滚动条，我不希望它在网格范围内扩展列。

我附上部分代码

```
<Grid >

        <Grid.RowDefinitions >
      <RowDefinition Height="255" />
         ......
      <RowDefinition  />
     </Grid.RowDefinitions>
<!-->msv is Custom ListView to allow multi select<--!>
      <msv:MultiSelectListView  x:Name="listView"   
      Grid.Row="0"   
      ItemContainerStyle="{StaticResource ItemContStyle}" SelectionMode="Extended">

            <msv:MultiSelectListView.View >
               <GridView >
                    <GridViewColumn Header="File Name"  Width="360" fwc:GridViewSort.PropertyName="FileName">
                        <GridViewColumn.CellTemplate >
                            <DataTemplate >
                                <Label Height="26" VerticalAlignment="Stretch"    HorizontalAlignment="Stretch"  Content="{Binding FileName}" ToolTip="{Binding FileName}"/>
                            </DataTemplate>
                        </GridViewColumn.CellTemplate>
                    </GridViewColumn>
                </GridView>
                </msv:MultiSelectListView.View>
            </msv:MultiSelectListView>

</grid> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T07:57:15.407

我不相信有一种简单的方法可以做到这一点。请参阅[本文](http://www.codeproject.com/Tips/84529/Simulate-WPF-ListView-Column-Width-Set-to)以获取具有“*”大小的 GridViewColumn 的示例，这是我认为您需要的。

# grails - DFC 的 Grails 多环境配置问题

> ID：10646811
> 
> 赞同：1
> 
> 时间：2012-05-18T04:43:57.480
> 
> 标签：grails, documentum, dfc

`dfc.jar`我们有一个使用和`dctm.jar`API连接到 Documentum 文档库的 Grails 应用程序。这些 jar 期望`dfc.properties`文件位于类路径上以配置 docbase 设置。在一个环境中工作时这很好，但我们正在为 、 和 环境构建战争文件`dev`，`test`每个`prod`环境都有自己的`dfc.properties`配置。

Grails 环境配置非常适合处理应用程序中的其他环境特定设置，但我无法找到一种方法来覆盖`dfc.properties`每个环境的文件或配置 Documentum API 以从其他地方检索它的设置。

我已经考虑过拥有特定于环境的属性文件，然后在每次战争构建之前运行一个 shell 脚本以将它们复制到`dfc.properties`文件中，但这感觉就像是一个 hack。我希望能够只进行三个战争构建，而不会混淆复制不同版本的属性文件。

```
 grails dev war
 grails test war
 grails prod war 
```

任何有关如何解决此多环境配置问题的建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T11:59:19.723

将此行添加到 WEB-INF/classes 内 dfc.properties 的顶部，并将外部化版本存储在应用程序服务器之外：

```
#include D:\Documentum\config\dfc.properties 
```

只要你能外化任何其他环境配置，你只需要一场战争。

作为奖励，如果您愿意，您仍然可以在 WEB-INF 版本中包含特定于应用程序的密钥，并且它将与外部副本合并。这样，可以单独配置多个应用程序，但使用相同的 docbroker/全局注册表设置。

# c - C中的左值和右值

> ID：10646823
> 
> 赞同：2
> 
> 时间：2012-05-18T04:45:15.957
> 
> 标签：c

谁能给我关于c中的左值和右值的正确解释。我还没有找到合适的。如果有人有链接，你可以粘贴 t 作为评论。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T04:47:51.467

**l 值是可以获取地址（***通常例外：寄存器变量*）的实体，它们驻留在内存中的时间足够长，可以通过名称引用。
**r-values**是~~变量~~对象，其地址无法获取，并且它们驻留在内存中的时间不足以被名称引用，它们是无名的。通常也称为无名临时对象。

**[示例程序：](http://ideone.com/OsBUK)**

```
int returnanInteger()
{
    int i = 10;
    return i;
}

void doSomething(int i)
{
    //do something, right now we don't care
}
int main()
{
   int i = 20;
   doSomething(returnanInteger());

   return 0;
} 
```

在上面的程序`i`中，in`main()`是一个**左值**，因为它的地址可以被获取并且可以通过名称来引用。
同时，在声明中：

```
doSomething(returnanInteger()); 
```

返回的值`returnanInteger()`是一个**r-value**，它的地址不能被获取，它在内存中的保留时间不够长，不能被任何名称引用。它会立即被复制以作为参数传递给函数`doSomething()`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T05:13:48.993

= 右侧的所有值（在 c 编程中“等于”符号）都是右值。就像 x = 23; c = 'x'; int *ptr = &x;

这里 23 , 'x' 和 '&x" 是右值 对应的 x , c 和 *ptr 是左值。它们代表内存中的变量或对象 你永远不能把右值放在 = ("equal" to登录 c 编程）

请参阅此链接 - [http://www.devx.com/tips/Tip/5696](http://www.devx.com/tips/Tip/5696) 了解更多信息。rgds 软软的

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T06:23:01.043

一种简化是将左值视为在程序中具有显式分配的类型化“对象”，可以是变量、复合文字或通过`malloc`或类似机制。根据它们的类型，左值可以修改或不可修改（`const`为类型指定），并且您可能被允许获取或不获取它的地址（`register`为变量声明指定）。

右值只是程序作为评估中的中间步骤生成的“值”，编译器可以自由选择最适合的特定表示。右值不能被修改，它们的地址通常不能被取走。（有非常特殊的情况允许将其用于数组组件评估。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-18T04:57:27.247

除了上面 Als 已经提到的（足够详细）之外，您可能会发现以下链接很有用：

[http://msdn.microsoft.com/en-us/library/bkbs2cds.aspx](http://msdn.microsoft.com/en-us/library/bkbs2cds.aspx)

[左值&右值](http://publib.boulder.ibm.com/infocenter/comphelp/v7v91/index.jsp?topic=/com.ibm.vacpp7a.doc/language/ref/clrc05lvalue.htm)

[基于 C++ 的链接](http://www.techrepublic.com/article/distinguish-the-differences-between-r-values-and-l-values-in-c-/5383417)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-03-07T03:28:53.477

**左值（左值）**（通常）位于等式“=”运算符的左侧。

**右值（右值）**位于等式“=”运算符的右侧。

**左值**是位于内存位置（地址）的对象。一旦声明它们的块被终止，左值就会被删除。

**右**值是临时值，一旦它们被初始化或分配给左值就会被删除。

前任：`int a = 1 + 2;`

在上面的示例中，“a”是左值，因为它位于等式运算符的左侧，而表达式“1 + 2”是右值，因为它位于等式运算符的右侧。一旦这个语句被执行，变量“a”（现在被初始化为 3）在内存中持续存在，而表达式“1 + 2”被自动删除。

这是一个链接：[https ://msdn.microsoft.com/en-us/library/f90831hc.aspx](https://msdn.microsoft.com/en-us/library/f90831hc.aspx)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-03-07T04:27:29.510

**L-value：** “l-value”是指识别对象的内存位置。l 值可能出现在赋值运算符 (=) 的左侧或右侧。l 值通常表示为标识符。

涉及可修改位置的表达式称为“可修改左值”。可修改的左值不能具有数组类型、不完整类型或具有 const 属性的类型。对于要成为可修改左值的结构和联合，它们不能有任何具有 const 属性的成员。标识符的名称表示存储位置，而变量的值是存储在该位置的值。

*例子 ：*

```
// declare a an object of type 'int'
int a;

// a is an expression referring to an
// 'int' object as l-value
a = 1;

int b = a; // Ok, as l-value can appear on right

// Switch the operand around '=' operator
9 = a;

// Compilation error:
// as assignment is trying to change the
// value of assignment operator 
```

**R-value ：** “r-value”是指存储在内存中某个地址的数据值。r-value 是一个表达式，不能为其分配值，这意味着 r-value 可以出现在右侧，但不能出现在右侧在赋值运算符 (=) 的左侧。

*例子 ：*

```
// declare a, b an object of type 'int'
int a = 1, b;

a + 1 = b; // Error, left expression is
           // is not variable(a + 1)

// declare pointer variable 'p', and 'q'
int *p, *q; // *p, *q are lvalue

*p = 1; // valid l-value assignment

// below is invalid - "p + 2" is not an l-value 
// p + 2 = 18; 

q = p + 5; // valid - "p + 5" is an r-value

// Below is valid - dereferencing pointer
// expression gives an l-value
*(p + 2) = 18;

p = &b; 

int arr[20]; // arr[12] is an lvalue; equivalent
              // to *(arr+12)
              // Note: arr itself is also an lvalue

struct S { int m; };

struct S obj; // obj and obj.m are lvalues

// ptr-> is an lvalue; equivalent to (*ptr).m
// Note: ptr and *ptr are also lvalues
struct S* ptr = &obj; 
```

[![在此处输入图像描述](../Images/49f500df3ef499a9569532385d52d9bb.png)](https://i.stack.imgur.com/JUNVL.jpg)

# java - REST Webservice - 示例代码 - 给出 HTTP 302 响应

> ID：10646825
> 
> 赞同：0
> 
> 时间：2012-05-18T04:45:34.430
> 
> 标签：java, web-services, http-status-code-302, restful-url, restful-architecture

我只是在尝试 REST 网络服务；标准样品；虽然我能够创建战争并将其加载到 WSO2 AS 中，但当我尝试将其与客户端连接时，我得到了 HTTP 302 的响应；我想知道错误可能出在哪里；以下是我的文件列表。

```
package com.indu.rs.test;

import javax.ws.rs.GET;
import javax.ws.rs.Path;
import javax.ws.rs.Produces;
import javax.ws.rs.core.MediaType;

// POJO, no interface no extends

// The class registers its methods for the HTTP GET request using the @GET annotation. 
// Using the @Produces annotation, it defines that it can deliver several MIME types,
// text, XML and HTML. 

// The browser requests per default the HTML MIME type.

//Sets the path to base URL + /hello
@Path("/hello")
public class Hello {

    // This method is called if TEXT_PLAIN is request
    @GET
    @Produces(MediaType.TEXT_PLAIN)
    public String sayPlainTextHello() {
        return "Hello Jersey";
    }

    // This method is called if XML is request
    @GET
    @Produces(MediaType.TEXT_XML)
    public String sayXMLHello() {
        return "<?xml version=\"1.0\"?>" + "<hello> Hello Jersey" + "</hello>";
    }

    // This method is called if HTML is request
    @GET
    @Produces(MediaType.TEXT_HTML)
    public String sayHtmlHello() {
        return "<html> " + "<title>" + "Hello Jersey" + "</title>"
                + "<body><h1>" + "Hello Jersey" + "</h1></body>" + "</html> ";
    }

} // class 
```

**web.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
            xmlns="http://java.sun.com/xml/ns/javaee" 
            xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" 
            xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" 
            id="WebApp_ID" version="2.5">

  <display-name>com.indu.rs.test</display-name>

  <servlet>
    <servlet-name>Jersey1</servlet-name>
    <servlet-class>com.sun.jersey.spi.container.servlet.ServletContainer</servlet-class>
    <init-param>
      <param-name>com.sun.jersey.config.property.packages</param-name>
      <param-value>com.indu.rs.test</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
  </servlet>

  <servlet-mapping>
    <servlet-name>Jersey1</servlet-name>
    <url-pattern>/rest</url-pattern>
  </servlet-mapping>
</web-app> 
```

**客户**

```
package com.indu.rs.test.client;

import java.net.URI;

import javax.ws.rs.core.MediaType;
import javax.ws.rs.core.UriBuilder;

import com.sun.jersey.api.client.Client;
import com.sun.jersey.api.client.ClientResponse;
import com.sun.jersey.api.client.WebResource;
import com.sun.jersey.api.client.config.ClientConfig;
import com.sun.jersey.api.client.config.DefaultClientConfig;

public class RsTest {
    public static void main(String[] args) {
        ClientConfig config = new DefaultClientConfig();
        Client client = Client.create(config);
        WebResource service = client.resource(getBaseURI());

        // Fluent interfaces
        System.out.println(service.path("rest").path("hello").accept(
                MediaType.TEXT_PLAIN).get(ClientResponse.class).toString());

        // Get plain text
        System.out.println(service.path("rest").path("hello").accept(
                MediaType.TEXT_PLAIN).get(String.class));

        // Get XML
        System.out.println(service.path("rest").path("hello").accept(
                MediaType.TEXT_XML).get(String.class));

        // The HTML
        System.out.println(service.path("rest").path("hello").accept(
                MediaType.TEXT_HTML).get(String.class));

    }

    private static URI getBaseURI() {
        return UriBuilder.fromUri(
                "http://localhost:9100/com.indu.rs.test").build();
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T06:05:39.593

302 表示您正在被重定向。使用 curl --verbose 连接到端点，并查看 Location: 标头。它应该为您提供有关正在发生的事情的线索。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T04:06:12.570

好的，这是我终于从我的一个朋友那里得到的解决方案；

在 web.xml 中更改 /rest --> /rest/*

创建war文件并上传到服务器（在我的例子中是WSO2）；当服务器上传war文件时，它会使用上下文创建它（在我的例子中是RSTest）

最后转到浏览器类型：

```
http://localhost:9100/RSTest/rest/hello 
```

你会看到一个成功的结果（在本例中为 Hello Jersey ）

-印度

# php - Mysql查询选择结束时间前一小时的所有数据？

> ID：10646828
> 
> 赞同：0
> 
> 时间：2012-05-18T04:45:46.173
> 
> 标签：php, mysql

我想在结束时间前一小时选择所有数据

我有我的疑问：

```
SELECT a.end_time,u.email FROM watchlists as w 
LEFT JOIN users as u ON u.id =w.user_id 
LEFT JOIN auctions as a ON a.id = w.auction_id where 
a.end_time > DATE_ADD(curdate(), INTERVAL 1 HOUR) 
```

购买我的显示器有误。

它显示了间隔一小时的所有数据，例如当前日期是`2012-05-18 12:40:20`

显示的数据是：

```
2012-05-18 12:08:20
2012-05-18 12:51:20
2012-05-18 12:41:20 
```

我想显示结束时间前一小时的数据，例如：当前时间是`2012-05-18 12:40:20`
过去 `2012-05-18 13:40:20`
的日期，不包括在内。

如何在 mysql 查询中执行此操作？谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T05:35:29.120

将查询修改为类似

```
SELECT a.end_time,u.email FROM watchlists as w 
LEFT JOIN users as u ON u.id =w.user_id 
LEFT JOIN auctions as a ON a.id = w.auction_id where 
a.end_time between curdate() and DATE_ADD(curdate(), INTERVAL 1 HOUR) 
```

# ruby-on-rails - 在 ruby 中，如何在创建 OpenSSL PKCS12 对象后获取主题、颁发者等

> ID：10646832
> 
> 赞同：1
> 
> 时间：2012-05-18T04:46:38.447
> 
> 标签：ruby-on-rails, ruby, openssl, pkcs#12

如果我使用

```
c = OpenSSL::PKCS12.new data 
```

是否有类似 c.subject 或 s.expiry 的东西来获取这些属性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T02:14:50.883

PKCS#12 是一种容器格式，用于收集密钥和证书并将它们以可能的加密格式存储。大多数情况下，文件是加密的，因此您可以像这样“加载”PKCS12 对象：

```
p12 = OpenSSL::PKCS12.new(data, "password") 
```

如果密码正确，您现在可以访问密钥和证书：

```
key = p12.key
cert = p12.certificate 
```

有了证书，您现在可以使用[OpenSSL::X509::Certificate](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/openssl/rdoc/OpenSSL/X509/Certificate.html)的方法访问主题和到期时间。请注意，到期是由 `#not_after' 访问的。

# mysql - 使用MySQL查询遍历行制作递归树

> ID：10646833
> 
> 赞同：20
> 
> 时间：2012-05-18T04:46:50.647
> 
> 标签：mysql, recursion

我有一个这样设置的物料清单表：
item - parent

我显示物料清单时的最终结果是显示如下：

```
item 1  - parent 0    
    item 2 - parent 1    
    item 3 - parent 1 
```

最终结果也可以是多层次的，如下所示：

```
item 3 - parent 0    
    item 4 - parent 3    
    item 76 - parent 3 
```

它可以无限循环：

```
item 76 - parent 0    
    item 46 - parent 76    

item 46 - parent 0     
    item 25 - parent 46 
```

现在，我要么只从数据库中获得 1 级：

`SELECT * FROM bom WHERE parentId = $itemId (shorthand)`

或者从表中提取每一行并使用我的递归函数来整理出我需要的那些，但这显然效率低下，因为我可能只需要 10 行，但我提取了 10,000 条记录。递归函数的输出将创建一个像这样的树：

```
item 1
   item 2
   item 3
      item 4
      item 76
         item 46
            item 25 
```

我所知道的是我从第 1 项开始。第 5 项可能有 11 个父项；他们不必按顺序进行。我想得到树中的所有子分支。我怎么能在mysql中做这个查询？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-06-14T15:03:11.237

早在 2011 年 10 月 24 日，有人[**在 DBA StackExchange 上发布了一个关于 MySQL 中树遍历的问题**](https://dba.stackexchange.com/q/7147/877)。MySQL 的 SQL 不能支持它。

[**在我对该问题的回答中，**](https://dba.stackexchange.com/a/7161/877)我编写了三 (3) 个存储过程（*GetParentIDByID、GetAncestry 和 GetFamilyTree*）。希望这些信息可以帮助您构建您正在寻找的东西。[](https://dba.stackexchange.com/a/7161/877)

 *** * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-06-13T22:54:40.263

[Bill Karwin](https://stackoverflow.com/users/20860/bill-karwin)发布了一个关于MySQL 中的层次结构[数据](http://www.slideshare.net/billkarwin/models-for-hierarchical-data)的幻灯片。如果可以选择更改数据库设计，那么还有其他一些吸引人的方法来存储数据以使其更易于查询。他涵盖的方法是：

*   邻接表
*   路径枚举
*   嵌套集
*   封闭表

幻灯片 69 有一张很好的表格，显示了每种方法的优缺点，所以我建议你先看看这张幻灯片，看看哪种方法适合你，然后再回去看看如何实现它的细节。请注意，您选择的设计（邻接表）是所呈现的四种设计中*唯一*一种难以查询子树的设计。

话虽如此，如果你不能改变你的设计或者你想坚持使用邻接列表，那么我必须同意 Didier 的观点，你应该看看[Quassnoi](https://stackoverflow.com/users/55159/quassnoi)的文章[“MySQL 中的层次查询”](http://www.slideshare.net/billkarwin/models-for-hierarchical-data)。这是一篇非常清晰的文章，并解释了如何有效地编写查询。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-05-18T08:06:12.873

AFAIK，用 MySQL 做到这一点并非易事。

这是一组关于它的好文章：

[http://explainextended.com/2009/03/17/hierarchical-queries-in-mysql/](http://explainextended.com/2009/03/17/hierarchical-queries-in-mysql/)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2019-02-19T12:29:05.343

MySQL (8) 现在支持递归查询。

考虑到您的表项（id，父项）和 id = 1 的起始项，以下将完成这项工作：

```
with recursive result(id, parent) as (select id, parent from item where id = 1 union all select i.id, i.parent from item i join result on i.parent = result.id) select * from result; 
```**

# php - SQL 查询，我需要获取一些值

> ID：10646839
> 
> 赞同：3
> 
> 时间：2012-05-18T04:48:25.527
> 
> 标签：php, mysql

我有 2 张桌子，桌子 1 和桌子 2。

table1 有字段：

```
id
atype
adesc
aid 
```

table2 有字段：

```
id
aid
adesc
value_1
value_2 
```

```
$query1 = mysql_query("Select DISTINCT atype from table1");
while($row = mysql_fetch_array($query1)){
    $atype = $row['atype'];
    $query2 = mysql_query("Select adesc from table1 where atype='$atype' and aid IN (Select aid from table2 ) order by id asc");
    while($row2 = mysql_fetch_array($query2)){
        // i know query2 can only get adesc, so i need value_1 and value_2 in this
        echo $row2['adesc'] .'>> '. (this should be value1 from table2) .'>> '. (this should be value2 from table2);
    }
} 
```

我也想得到`value_1`and `value_2`。任何帮助，将不胜感激。

**编辑：**
table1 值在我的数据库中（分别为 atype、aid、adesc）：

```
type1 111 'this is type 1'
type1 111 'this is type 1'
type2 112 'this is type 2'
type3 113 'this is type 3'
type4 114 'this is type 4'
type1 111 'this is type 1'
type4 114 'this is type 4'
type2 112 'this is type 2' 
```

我的 table2 上的值（分别为aid、adesc、val1、val2）：

```
111  'this is type 1' 100 50
111  'this is type 1' 100 50
112  'this is type 2' 300 500
113  'this is type 3' 100 50
112  'this is type 2' 100 50
114  'this is type 4' 100 50
111  'this is type 1' 100 50 
```

我真正想投影的是：

```
type1
      (sum)value_1 (sum)value_2
type2 
      (sum)value_1 (sum)value_2
type3
      (sum)value_1 (sum)value_2
type4
      (sum)value_1 (sum)value_2 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T04:59:25.477

```
 $query2 = mysql_query("Select t1.adesc, t2.value_1, t2.value_2 from table1 as t1, table2 as t2 where t1.atype='$atype' and t1.aid = t2.aid order by t1.id asc");

    while($row2 = mysql_fetch_array($query2)){
        // i know query2 can only get adesc, so i need value_1 and value_2 in this
        echo $row2['adesc'] .'>> '. $row2['value_1'] .'>> '. $row2['value_2'];
    } 
```

更新：

```
$sql = <<<SQL
select t1.adesc, sum(t2.value_1) as v1, sum(t2.value_2)  as v2
from 
table1 as t1,
table2 as t2

where 
t1.aid = t2.aid 
group by t1.atype

order by t1.atype asc
SQL;
$query = mysql_query($sql);
while($row = mysql_fetch_array($query2)){
    // i know query2 can only get adesc, so i need value_1 and value_2 in this
        echo $row['adesc'] .'>> '. $row['v1']  .'>> '. $row['v2'];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T04:59:24.637

在 SQL 中使用一个简单的内部连接，而不是您的两个选择：

```
select table1.adesc,atable2.value1 from table1,table2 where table2.adesc=table1.adesc and table1.aid=table2.aid order by table1.aid asc 
```

编辑：

```
select table1.adesc,atable2.value1 from table1,table2 where table1.aid=table2.aid order by table1.aid asc 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-18T04:57:48.027

此 SQL 查询应产生您想要的结果：

```
select adesc, 
       value_1, 
       value_2 

from   table1 

where  atype='$atype' and 
       aid IN (Select aid from table2 ) 

order by id asc 
```

# asp.net - 在gridview asp.net中将文本转换为链接

> ID：10646840
> 
> 赞同：0
> 
> 时间：2012-05-18T04:48:36.910
> 
> 标签：asp.net, gridview

你好我的问题是我在网格视图中有一个名为 TweetText 的列，它总是有一个 Url。我想将该 URl 设置为可点击的链接。我设法在页面加载时做到了这一点。但是当我更改网格的页码时，TweetText 的文本保持不变，即不变。在这里写我的代码。我也在 GridView1_PageIndexChanged 上执行此代码。但没有任何帮助。还有一件事是我不想让整个专栏都有一个链接。我只想将列中的 URL 作为链接

```
if (!Page.IsPostBack)
            {
                for (int i = 0; i < GridView1.Rows.Count; i++)
                {
                    GridViewRow row = GridView1.Rows[i];
                    String Url = SmartyPlants.Classes.TwitterData.GetUrlStrings(row.Cells[5].Text);
                    bool Check = SmartyPlants.Classes.TwitterData.IsUrlValid(Url);
                    int Index = Url.IndexOf(" ");
                    if (Url.Contains(" "))
                    {
                        Url = Url.Remove(Index);
                    }
                    String link = MakeLink(Url);
                    row.Cells[5].Text = row.Cells[5].Text.Replace(Url, link);
                }
            }
public static string MakeLink(string txt)
        {
            Regex regx = new Regex("http://([\\w+?\\.\\w+])+([a-zA-Z0-9\\~\\!\\@\\#\\$\\%\\^\\&amp;\\*\\(\\)_\\-\\=\\+\\\\\\/\\?\\.\\:\\;\\'\\,]*)?", RegexOptions.IgnoreCase);

            MatchCollection mactches = regx.Matches(txt);

            foreach (Match match in mactches)
            {
                txt = txt.Replace(match.Value, "<a href='" + match.Value + "'>" + match.Value + "</a>");
            }
public static bool IsUrlValid(string url)
        {
            return Regex.IsMatch(url, @"(http|https)://([\w-]+\.)+[\w-]+(/[\w- ./?%&=]*)?");
        }
        public static string GetUrlStrings(string text)
        {
            MatchCollection ms = Regex.Matches(text, @"(www.+|http.+)([\s]|$)");
            string testMatch = ms[0].Value.ToString();
            return testMatch;
        }

            return txt;
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T05:40:46.073

如果您已经有数据，为什么不在`HyperLink`gridview 中使用控件并使用？`Eval()`

```
<asp:TemplateField>
    <ItemTemplate>
       <asp:HyperLink ID="HyperLink1" runat="server" NavigateUrl='Default.aspx?ID=<%#Eval("id")%>' Text="TweetText"></asp:HyperLink>
     </ItemTemplate>
 </asp:TemplateField> 
```

**或者**

您甚至可以在 GridView OnRowDataBound 事件中找到 HyperLink。

```
protected void GridView1_RowDataBound(object sender, GridViewRowEventArgs e)
{
  if(e.Row.RowType == DataControlRowType.DataRow)
  {
    HyperLink myHyperLink = e.Row.FindControl("HyperLink1") as HyperLink;
    if(myHyperLink !=null)
    {
       //myHyperLink.NavigateUrl="URL"; 
    }
  } 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T05:13:07.160

用这个

```
 <asp:HyperLinkField DataNavigateUrlFields="id" Text="Details" ControlStyle-Font-old="true" 
DataNavigateUrlFormatString="~/pages/UserDetails.aspx?id={0}" /> 
```

动态设置`DataNavigateUrlFormatString`或您可以`Hyperlink`使用`itemtemplet`

# php - 使用不同的用户凭据连接来自多个数据库的表

> ID：10646843
> 
> 赞同：0
> 
> 时间：2012-05-18T04:49:10.613
> 
> 标签：php, mysql, join

我需要连接来自不同数据库的两个表。
代码看起来像这样：

```
$tbl1 = 'table1';
$tbl2 = 'table2';

$DB1 = 'DB1';
$DB2 = 'DB2';

$connect1 = mysql_connect(DB_SERVER,DB_USER1,DB_PASSWORD1);
mysql_select_db ($DB1, $connect1);

$connect2 = mysql_connect(DB_SERVER,DB_USER2,DB_PASSWORD2);
mysql_select_db ($DB2, $connect2);
/* note both the DB are in the same server and users has privileges to theyr own datadases say usr1 to DB1, usr2 to DB2 */

mysql_query("SELECT * FROM $DB1.$tbl1 AS tb1 LEFT JOIN $DB2.$tbl2 AS tb2 ON tb1.id = tb2.id", $connect1); 
```

上面的查询返回一个错误，说 table2 不存在，很明显因为我正在使用`$connect1`

帮助我的人！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T04:51:54.653

如果您的两个用户中的每一个都只能访问一个数据库而不能访问另一个数据库，那么您将无法在一个查询中同时使用这两个数据库/表——因为没有用户能够运行该查询。

您要么必须：

*   获取可以访问这两个数据库的用户 - 因此，可以运行此查询，
*   或者使用有权访问它的用户从每个数据库/表中获取数据——然后从你的 PHP 代码中处理这些数据以*合并*它们*（基本上，在 PHP 中进行连接，而不是在 SQL 中；即使这可能不是最有效的想法）*。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T04:56:03.393

您不能从两个数据库加入。尽可能考虑使用一个数据库，它使编程更容易并提高性能。在 PHP 中有很多方法可以做到这一点，但是它们相当复杂并且对性能非常不利。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T10:54:19.457

至少对于 Oracle，[前面建议的替代方案](https://stackoverflow.com/a/10646871/365237)的第三个选项是在 DB1 中创建一个数据库链接，这将提供从 DB2 中选择的一些信息。

它的工作方式是您首先创建数据库链接

```
-- as the current user
CREATE DATABASE LINK sales.us.americas.acme_auto.com USING 'sales_us';

-- as another user, shared public
CREATE SHARED PUBLIC DATABASE LINK sales.us.americas.acme_auto.com
CONNECT TO scott
IDENTIFIED BY tiger
AUTHENTICATED BY anupam
IDENTIFIED BY bhide USING 'sales'; 
```

然后你可以像这样查询它

```
SELECT * FROM target_table@sales.us.americas.acme_auto.com; 
```

并结合查询“本地”数据库。此外，如果您不想每次都输入数据库链接，可以使用同义词。

这是 Oracle DB 链接的[手动条目](http://docs.oracle.com/cd/B28359_01/server.111/b28310/ds_concepts002.htm)，其中包含更多示例和进一步说明。

[对于 MySQL，在这个线程](https://stackoverflow.com/questions/1565993/oracle-database-link-mysql-equivalent)中讨论了一些替代方案。显然没有直接的选择。

# asp.net - ASP.NET 中的 Crystal Reports - 有些有效，有些无效

> ID：10646844
> 
> 赞同：0
> 
> 时间：2012-05-18T04:49:15.450
> 
> 标签：asp.net, crystal-reports

我制作了 4 个类似的水晶报表。当我将报表名称设置为 CrystalReportSource（使用下拉菜单，所以我知道它的拼写正确）时，其中只有 2 个会给我一点预览，而另外 2 个只显示 CrstalReportViewer 控件。当我运行 Web 应用程序时，相同的 2 个报告显示一个空白报告（只有工具栏）。所有 4 个报表都在报表设计器中正确显示。我已经查看了我能想到的所有属性，但没有发现有效的和无效的之间有任何区别。

也许有人可以让我更好地了解在哪里看。

万一有所不同，其中 3 份报告是从前一份报告中克隆出来的，但数据库位置已更改。

同样，它们都在设计器中工作。

有任何想法吗？:-)

```
<%@ Page Title="" Language="VB" MasterPageFile="~/AFRA.master" AutoEventWireup="false" CodeFile="ReportViewer.aspx.vb" Inherits="ReportViewer" %>
<%@ Register assembly="CrystalDecisions.Web, Version=10.5.3700.0, Culture=neutral, PublicKeyToken=692fbea5521e1304" namespace="CrystalDecisions.Web" tagprefix="CR" %>

<asp:Content ID="Content3" ContentPlaceHolderID="main" Runat="Server">
    <CR:CrystalReportViewer ID="CrystalReportViewer1" runat="server" 
    AutoDataBind="true" DisplayGroupTree="False" Height="50px" 
        ReportSourceID="CrystalReportSource1" />
    <CR:CrystalReportSource ID="CrystalReportSource1" runat="server">
        <Report FileName="RPT\StatsRevenue.rpt">
        </Report>
    </CR:CrystalReportSource>
</asp:Content> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T03:08:02.060

我终于发现那 2 份报告可能只是腐败了。由于它们是工作报告克隆的修改报告，我只花了大约一个小时就从头开始制作新的报告。

# javascript - jQuery 拖动 窗外

> ID：10646845
> 
> 赞同：1
> 
> 时间：2012-05-18T04:49:19.357
> 
> 标签：javascript, jquery, jquery-ui, draggable

所以我正在使用 jQuery UI 进行测试`dragging()`。它使拖动变得简单，但是我在玩它时意识到了一个问题。

```
$("#drag").draggable();​ 
```

```
<div id="drag"></div>​ 
```

[http://jsfiddle.net/DerekL/NS9s4/](http://jsfiddle.net/DerekL/NS9s4/)

当我拖动它时，`<div>`当我移出窗口时，它会停止。我不想要这种行为。有什么办法可以让它在窗口外仍然可以拖动？我知道这是可能的，因为我在 Google 服务的许多页面中都看到了它，但我不知道他们是如何做到的。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T05:08:39.030

看看他们提供的这个演示：

[http://jqueryui.com/demos/draggable/default.html](http://jqueryui.com/demos/draggable/default.html)

它似乎可以满足您的需求？您使用的是当前版本吗？

我还注意到，在他们的网站上，他们有以下用于演示的 css：

```
overflow: auto; 
```

# sql-server - 如何在 SQL 中执行 skip 和 take 函数？

> ID：10646847
> 
> 赞同：1
> 
> 时间：2012-05-18T04:49:39.707
> 
> 标签：sql-server

我有 161 列，每列有超过 50K 的数据。我必须在折线图中为每一列显示此信息。如果尝试在折线图中显示此信息，则绘制图形将需要更多时间。

**问题 ：**

现在我决定划分与每一列对应的数据。比如对于 column1 取前 50 行取平均值，然后取第二个 50 行，依此类推。此过程将针对所有列继续。

我如何在 SQL 中做到这一点。我已经在 C# 中完成了它，但我想在 SQL 服务器端执行此操作。

```
 public static IEnumerable<double> CheckRateValue(this IEnumerable<double> values)
    {

            int i = 1;
            int j = 0;
            for (; i < values.Count(); )
            {
                yield return values.Skip(j * 2).Take(2).Average();
                i = i + 2;
                j++;
            }

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T06:27:01.307

您可以使用[row_number()](http://msdn.microsoft.com/en-us/library/ms186734.aspx)。

```
declare @Skip int = 20
declare @Take int = 10

select SomeColumn
from (
       select SomeColumn,
              row_number() over(order by SomeColumnToOrderBy) as rn
       from YourTable
     ) T
where rn > @Skip and 
      rn <= @Skip + @Take 
```

# c# - 无法在动态生成的 div 中显示 Google 地图

> ID：10646850
> 
> 赞同：1
> 
> 时间：2012-05-18T04:49:54.190
> 
> 标签：c#, javascript, jquery, pagemethods

我正在尝试在通过 PageMethod 调用 C# 程序创建的 div 中显示 Google 地图。Pagemethod 返回生成的 html 代码，该代码使用 jquery 命令 $('.showitems').html(somecode); 插入到我的网页中；这段代码包含一个 div，我想在其中放置一个 Google 地图，但是当我执行我的 javascript 来创建一个 Google 地图时，它会用空格而不是地图替换 div。但是，如果我为包含地图的 div 硬编码，则用于创建 Google 地图的 javascript 可以工作。所以我的问题是，为什么我不能使用动态生成的 html 代码创建 Google 地图？下面是我创建谷歌地图的代码，除了动态生成的 div 之外，它已经工作了多年。

```
function ShowDinerItems(dinerkey) {

            document.getElementById('HiddenDinerID').value = dinerkey;
            var latitude = document.getElementById("Hiddenlat").value;
            var longitude = document.getElementById("Hiddenlng").value;
            location = document.getElementById("LocationText").textContent;

            PageMethods.CallShowDinerItems(dinerkey, latitude, longitude, location, OnShowDinerComplete, OnShowDinerError, dinerkey);
        }

    function OnShowDinerComplete(result, dinerkey) {

              $('.showitems').html(result[0]);
              } 
```

上面列出的showitems区域有一个span区域，点击获取地图如下图：

```
<span style="cursor:pointer" onclick=\"DisplayDinerMap('40.0912345', '89.12345', `'m0001', 'diner name')\">  Map </span>`

<div id="m0001" style="height:200px; width:200px;display:inline">map</div> 
```

动态生成的 div 映射在 showitems div 中如下所示，其中“m001”是 map1 的 id。

```
function markDiner(lat, lng, content, map1) {

            map = new google.maps.Map(document.getElementById(map1), {
                zoom: 14,
                center: new google.maps.LatLng(lat, lng),
                mapTypeId: google.maps.MapTypeId.ROADMAP
            });
            var marker = new google.maps.Marker({
                position: new google.maps.LatLng(lat, lng),
                map: map,
                animation: google.maps.Animation.DROP,
                title: content
            });

        } 
```

在用户单击地图链接后，我调用 Map 函数。在调试模式下，我可以看到执行通过 Map 例程进行。

```
 function DisplayDinerMap(lat, lng, map1, dinername) {

            markDiner(lat, lng, dinername, map1);
} 
```

如果 map1 是硬编码的，谷歌地图就可以工作。如果它是通过调用 PageMethod 动态生成的，它不会显示地图，而是在我编写的文字上显示空格，以查看它是否消失。所以在上面的例子中，当我尝试显示地图时，文本“地图”消失了。任何意见或建议表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T13:32:19.700

尝试将委托添加到您用来触发事件的跨度。

# python - python json.loads 在 str 上

> ID：10646851
> 
> 赞同：0
> 
> 时间：2012-05-18T04:49:55.957
> 
> 标签：python, json

也许这个问题很愚蠢。

```
s="{'x':1}"
t='{"x":1}' 
```

json.loads(s) 带来异常：

```
Traceback (most recent call last):
File "<stdin>", line 1, in <module>
File "/usr/local/Cellar/python/2.7.3/lib/python2.7/json/__init__.py", line 326, in loads
  return _default_decoder.decode(s)
File "/usr/local/Cellar/python/2.7.3/lib/python2.7/json/decoder.py", line 366, in decode
  obj, end = self.raw_decode(s, idx=_w(s, 0).end())
File "/usr/local/Cellar/python/2.7.3/lib/python2.7/json/decoder.py", line 382, in raw_decode
obj, end = self.scan_once(s, idx)
ValueError: Expecting property name: line 1 column 1 (char 1) 
```

而 json.loads(t) 是正确的：

```
{u'x': 1} 
```

有什么不同？先感谢您。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T04:57:41.670

JSON 格式需要在数据中使用双引号字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T04:59:48.833

如果您查看[Json 规范](http://json.org/)，它只允许将双引号作为正确的字符串。

# php - 通过 PHP 将 Yahoo CSV 转换为 HTML - 不再有效

> ID：10646853
> 
> 赞同：-1
> 
> 时间：2012-05-18T04:50:02.597
> 
> 标签：php, html, csv, yahoo, finance

我正在使用 PHP 脚本将 Yahoo 金融报价转换为 HTML 网页。但是，在完美运行一年后，网页突然停止显示数据，并且根本没有代码更改。这是我的代码：

```
<table>
<tr>
<?php $fp = fopen ("http://finance.yahoo.com/d/quotes.csv?s=VIP&f=l1c1p2rj1&e=.csv","r");
        $data = fgetcsv ($fp, 1000, ",") ?>
<td>Vimpel-Communications</td>
<td><?php echo $data[0] ?></td>
<td><?php echo $data[1] ?></td>
<td><?php echo $data[2] ?></td>
<td><?php echo $data[3] ?></td>
<td><?php echo $data[4] ?></td>
<td><?php echo $data[5] ?></td>
</tr>
</table> 
```

这是实际站点的测试页面：[http](http://bricadr.com/test.php) ://bricadr.com/test.php 任何人都可以帮助或知道发生了什么，或者我该如何解决这个问题？另外，如果有人有服务器，你能看看这段代码在你的服务器上是否有效吗？也许我的托管公司关闭了一些允许它以前工作的功能。

先感谢您！

布赖恩

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-18T05:40:54.913

**更新**：在我的服务器上进行了测试。未解析时，HTML 中的注释是 301 重定向通知。新页面是“ [http://download.finance.yahoo.com/d/quotes.csv?s=VIP&f=l1c1p2rj1&e=.csv](http://download.finance.yahoo.com/d/quotes.csv?s=VIP&f=l1c1p2rj1&e=.csv) ”，只需更改您的 URL。如果您想使用它，我已经更新了下面的代码。

无论如何，这是您的代码的一个小高效版本，使用 cURL，因为它比 fopen[快得多。](https://stackoverflow.com/questions/555523/file-get-contents-vs-curl-what-has-better-performance)我还使用了explode，因为出于某种原因，我的服务器上的cvs 功能不起作用。

```
$curl=curl_init();
curl_setopt ($curl,CURLOPT_URL,"http://download.finance.yahoo.com/d/quotes.csv?s=VIP&f=l1c1p2rj1&e=.csv");
curl_setopt ($curl,CURLOPT_HEADER,0);
ob_start();
curl_exec ($curl);
curl_close ($curl);
$data=ob_get_clean();
$data=explode(",",$data);
$data=str_replace('"','',$data);
foreach ($data as $results)
  echo "<td>$results</td>"; 
```

[在这里](http://connorpeet.com/betawebs/2012/cvs/)工作。

# java - Java InetSocketAddress 是什么样的 .toString()？

> ID：10646857
> 
> 赞同：1
> 
> 时间：2012-05-18T04:50:27.410
> 
> 标签：java, inet-socket

我正在 InetSocketAddress 上执行 .toString()。这是迄今为止无法连接到主机的 Android websocket 客户端的一部分。

现在变量 address.toString() 的输出看起来像`domain.com/72.xx.xxx.xx:8000`，但据我了解，只需要两个值（IP 和端口）？

谢谢让我知道这是否正确。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T04:59:09.470

InetSocketAddress 的 toString() 首先调用 InetAddress 的 toString() ，然后将端口号附加到它，从 InetAddress 的 toString() 返回的字符串形式为：**主机名/文字 IP 地址**。

在从 InetSocketAddress 的 toString() 返回到返回值（来自 InetAddress 的 toString() ）之前，连接了稍后的端口号，因此最终结果是**主机名/文字 IP 地址：端口号**。

有关更多信息，请参阅[InetSocketAddress 的 toString()](http://docs.oracle.com/javase/6/docs/api/java/net/InetSocketAddress.html#toString%28%29)的 JavaDocs 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T04:53:41.697

能够找到一个例子：[http ://discuss.itacumens.com/index.php?topic=46099.0](http://discuss.itacumens.com/index.php?topic=46099.0)

基本上它是正确的:)

我需要在其他地方调试...

# windows-phone-7 - 数据绑定：使用一个 XML 节点中的值来查找另一个

> ID：10646858
> 
> 赞同：1
> 
> 时间：2012-05-18T04:50:35.963
> 
> 标签：windows-phone-7

我有如下所示的 XML：

```
<showcases>
<showcase id="260">
<artistID>2143</artistID>
<venueID>29</venueID>
<startdatetime>2012-09-12 17:30:00</startdatetime>
<enddatetime>2012-09-12 18:00:00</enddatetime>
</showcase>
[etc]
</showcases> 
```

在同一个 XML 文件中：

```
<showcaseartists>
<showcaseartist id="2129">
[other stuff about them]
</showcaseartist>
[etc]
</showcaseartists>

<venue id="19">
<name> ... </name>
<address> ... </address>
[etc]
</venue> 
```

如何将这些数据放入列表中？

所以像这样：

```
var showcasedata = from query in loadedData.Descendants("showcase")
select new Showcase
{
    StartDateTime = (DateTime)query.Element("startdatetime"),
    ArtistName = ????,
    Venue = ????
};
ShowcasesList.ItemsSource = showcasedata.ToList(); 
```

我想一定有办法，但我找不到！

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T05:21:49.567

说你的班级看起来像

```
public class Showcase
{
  public DateTime StartDateTime;
  public string ArtistName;
  public string Venue;
} 
```

尝试这个

```
var showcasedata = 
  from query1 in loadedData.Descendants("showcase")
    select new Showcase() {
      StartDateTime = (DateTime)query1.Element( "startdatetime" ),
      ArtistName = ( from query2 in loadedData.Descendants("showcaseartist")
                     where (int)query1.Element( "artistID" ) == (int)query2.Attribute("id")
                     select (string)query2.Element("name") ).First(),
      Venue = ( from query3 in loadedData.Descendants("venue")
                where (int)query1.Element( "venueID" ) == (int)query3.Attribute("id")
                select (string)query3.Element("name") ).First(),
    }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T05:21:11.590

快速而肮脏的方式：

```
var showcasedata = from query in loadedData.Descendants("showcase")
select new Showcase
{
    StartDateTime = (DateTime)query.Element("startdatetime"),
    ArtistName = (string)loadedData.Elements("showcaseartist").First(e => (string)e.Attribute("id") == (string)query.Element("artistID"))
};
ShowcasesList.ItemsSource = showcasedata.ToList(); 
```

它应该适用于小型 XML 文档，但您很快就会遇到大型文档的性能问题。对于那些，使用 Dictionary 进行缓存：

```
var artists = loadedData.Elements("showcaseartist").ToDictionary(e => (string)e.Attribute("id"), e => e);

var showcasedata = from query in loadedData.Descendants("showcase")
select new Showcase
{
    StartDateTime = (DateTime)query.Element("startdatetime"),
    ArtistName = (string)artists[(string)query.Attribute("id")].Element("artistID")
}; 
```

将“Artist”对象放在 Dictionary 而不是 XML 节点中会更好。尽可能使代码适应您的模型对象。

# c# - 将可空日期时间数组转换为可空双精度的更简洁方法？

> ID：10646859
> 
> 赞同：2
> 
> 时间：2012-05-18T04:50:44.773
> 
> 标签：c#, .net, nullable

我有一个：

```
DateTime?[] dates 
```

我需要转换为：

```
Double?[] oaDates 
```

有什么办法可以清理这一个衬垫？还是我应该诉诸一个功能？

```
DateTime?[] dates = new DateTime?[]{DateTime.Now, DateTime.Now.AddDays(1), DateTime.Now.AddDays(2)}; //example array
Double?[] oaDates = dates.Select(t => (t==null)?((double?)null):(t??DateTime.MinValue).ToOADate()).ToArray(); 
```

我不能在 t 上调用方法而不检查它是否为空（因此是三级运算符），我也必须合并它以便我可以调用 OADate（因此永远不会命中的合并和填充 DateTime.MinValue）。

它可以在一行中完成工作，但它看起来有点像 perl。

也许是一种扩展方法？这样我就可以隐藏丑陋并按照以下方式做一些事情：

```
dates.ToNullableOADates(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T05:30:11.453

您实际上可以在`null`引用上调用扩展方法。因此，您可以定义一个扩展方法来将单个转换`DateTime?`为`double?`类似：

```
public static class DateUtil
{
    public static double? ConvertToDouble(this DateTime? date)
    {
        return date.HasValue ? date.Value.ToOADate() : (double?)null;
    }
} 
```

然后这样称呼它：

```
double?[] oaDates = dates.Select(t => t.ConvertToDouble()).ToArray(); 
```

但是，您同样可以使用方法组语法来调用它：

```
double?[] oaDates1 = dates.Select(DateUtil.ConvertToDouble).ToArray(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-18T05:05:26.383

不知道你为什么有t？？

你就不能...

```
Double?[] oaDates = 
   dates.Select(t => (t == null) ? (double?)null : t.Value.ToOADate()).ToArray(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T05:52:03.970

```
var array = dates.Select(t => t.HasValue ? t.Value.ToOADate() : (double?)null).ToArray(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-18T05:57:53.457

```
 dates.Select( t=> t==default(DateTime?) || t.HasValue==false ? (double?)(null):t.Value.ToOADate() ).ToArray() 
```

# html - 在 JavaFX WebView 中检测 HTML textarea onkeyup 事件

> ID：10646865
> 
> 赞同：6
> 
> 时间：2012-05-18T04:51:18.027
> 
> 标签：html, webview, javafx, javafx-2

我想在输入后立即在 WebView 中打印 HTML 文本区域的内容。PS：由于某种原因，
我尝试收听它，但它不起作用。`keyEvent``webView`

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-21T11:16:19.087

1.  如果您尝试将**JavaFX TextArea**对象的内容打印到 WebView 中，那么您应该将侦听器添加到 TextArea 而不是 WebView。

2.  如果您尝试在 WebView 的 HTML 页面内的**HTML TextArea**标记中侦听事件，则应将侦听器添加到文档模型：

    ```
    // we need this to wait till document load
    webEngine.getLoadWorker().stateProperty().addListener(new ChangeListener<State>() {
        public void changed(ObservableValue ov, State oldState, State newState) {
            if (newState == Worker.State.SUCCEEDED) {

                // note next classes are from org.w3c.dom domain
                EventListener listener = new EventListener() {
                    public void handleEvent(Event ev) {
                        System.out.println(ev.getType());
                    }
                };

                Document doc = webEngine.getDocument();
                Element el = doc.getElementById("textarea");
                ((EventTarget) el).addEventListener("keypress", listener, false);
            }
        }
    });
    webEngine.loadContent("<textarea id='textarea'></textarea>"); 
    ```

# sql - SQL 分页具有 group by 子句的查询

> ID：10646867
> 
> 赞同：1
> 
> 时间：2012-05-18T04:51:39.873
> 
> 标签：sql, sql-server, group-by, pagination

是否可以在我的主查询中有一个`group by`子句的情况下进行分页类型的查询。

我将如何实现这一点（如果这可能的话）

示例查询：

```
SELECT * FROM TABLE_NAME GROUP BY DATEPART(YEAR,DATE), DATEPART(YEAR,MONTH) 
```

我可以通过逐页阅读来获得结果吗？

...并且在讨论该主题时，我是否还可以在不将其放入子查询的情况下获得将要检索的总行数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T06:02:25.743

使用`ROW_NUMBER`SQL Server 的 & CTE 功能，如下所述。

```
WITH CTE AS (
SELECT     A,B,C
           ROW_NUMBER() OVER (ORDER BY  columnName) RN
)
SELECT * FROM CTE WHERE RN Between 1 and 10 
```

有关详细信息，请参阅[http://sqlserverplanet.com/sql/pagination-using-rownumber 。](http://sqlserverplanet.com/sql/pagination-using-rownumber)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-18T05:28:44.017

分页的概念是：

1.  您需要获取总行数。

    SELECT * FROM table_name where id='id';

2.  设置每页显示的项目数。比如 $limit=50。这意味着，您将每页显示 50 个项目。

嗯，我认为如果你看看这个应该会更好，[http](http://php.about.com/od/phpwithmysql/ss/php_pagination.htm) ://php.about.com/od/phpwithmysql/ss/php_pagination.htm 。它解释得更好。

希望有帮助。

# design-patterns - 将相同数据保存为不同文件格式的设计模式

> ID：10646869
> 
> 赞同：0
> 
> 时间：2012-05-18T04:51:47.913
> 
> 标签：design-patterns, factory

我有一个 3D 动画，我想输出到不同的文件格式，例如 .BVH、.FBX...

适合实现这种功能的设计模式是什么？

工厂设计模式会起作用吗？为什么和为什么不。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T16:04:02.987

它既不是建造者也不是工厂。它看起来像[Strategy 模式](http://www.google.com.vn/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CF4QFjAA&url=http://en.wikipedia.org/wiki/Strategy_pattern&ei=iHK2T9rtKOSfiAeamfXuCA&usg=AFQjCNGl3o_1x2n2_FUSSLX9qu5qjlOGmA&sig2=MGtJStc2cRcHs0FGuyGq4w)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-18T05:09:13.090

我认为重要的是设计而不是图案名称。我认为您需要的是一种适配器：

```
public interface IAnimationFormat {
    void Save(Animation animation);
}

public class Bvh : IAnimationFormat {
    public void Save(Animation animation){
        ...
    }
}

public class Fbx : IAnimationFormat {
    public void Save(Animation animation){
        ...
    }
} 
```

您还可以添加 Load 方法和东西。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-18T05:05:58.850

在这种情况下，您应该考虑`Builder`&`Factory`模式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-18T15:58:59.523

我会使用观察者模式。假设您有可观察的 A 类和观察者类 C 和 D。单击 A 上的 SAVE、引发和事件以通知 B、C、......任何更多的观察者执行 SAVE 操作。

[http://www.dofactory.com/Patterns/PatternObserver.aspx](http://www.dofactory.com/Patterns/PatternObserver.aspx)

# mysql - 是否可以使用“ORDER BY FIELD”语句对多列进行排序？

> ID：10646877
> 
> 赞同：1
> 
> 时间：2012-05-18T04:53:00.840
> 
> 标签：mysql, sql, ruby-on-rails, activerecord, ruby-on-rails-3.2

我正在使用 Ruby on Rails 3.2.2，我想知道是否可以使用该`ORDER BY FIELD`语句对多个列/字段进行排序（例如，在`Model.order("orders_count, created_at, name, ...")`but for中进行`ORDER BY FIELD`）。

如果是这样，我怎么能“ `ORDER BY FIELDS`”？

*PS ：如上一个*[答案](https://stackoverflow.com/questions/10646374/how-to-retrieve-objects-that-have-an-attached-file-and-order-those-objects-based)中所写，为了订购与*一*列相关的记录，我正在使用该`Model.order("field(status, 'blocked', 'unpublished', 'published')")`语句。

# objective-c - 来自 URL 连接的 JSON 对象显示在 tableview 中

> ID：10646879
> 
> 赞同：0
> 
> 时间：2012-05-18T04:53:17.237
> 
> 标签：objective-c, cocoa-touch, uitableview, ios4

```
#pragma mark -
#pragma mark Fetch loans from internet

-(void)loadData
{
    self.responseData = [NSMutableData data];

    NSURLRequest *request = [NSURLRequest requestWithURL:[NSURL URLWithString:
                                                          @"http://192.168.1.104:8080/Test/ItemGroup.jsp"]];
    [[NSURLConnection alloc] initWithRequest:request delegate:self];
}

- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response {
    [responseData setLength:0];
}

- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data {
    [responseData appendData:data];
}

- (void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error {
    [connection release];
    self.responseData = nil;
}

#pragma mark -
#pragma mark Process loan data
- (void)connectionDidFinishLoading:(NSURLConnection *)connection {
    [connection release];

    NSString *responseString = [[NSString alloc] initWithData:responseData encoding:NSUTF8StringEncoding];
    self.responseData = nil;

    array=[responseString JSONValue];
    NSMutableString *text=[NSMutableString stringWithString:@"Values:\n"];
    for (int i=0; i <[array count]; i++) {
        [text appendFormat:@"%@\n",[array objectAtIndex:i]];

        // NSLog(@"Values:""%@\n",array);

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T05:06:06.197

您可以使用[RestKit](https://github.com/RestKit/RestKit)（一个 Cocoa RESTful Web 服务框架）来获取数据并使用[对象映射](https://github.com/RestKit/RestKit/wiki/Object-mapping)功能将返回的数据映射到对象数组。

RESTKit Object Mapping wiki 中给出的示例将 JSON 文档映射到 Article 实例数组中：[https ://github.com/RestKit/RestKit/wiki/Object-mapping](https://github.com/RestKit/RestKit/wiki/Object-mapping)

# linux - 在 Linux 中断上下文中引用“当前”任务

> ID：10646892
> 
> 赞同：1
> 
> 时间：2012-05-18T04:54:38.483
> 
> 标签：linux, linux-kernel, linux-device-driver

当我在Linux中进行中断处理时，我有一个问题，如果我们可以引用当前宏指向被中断的任务，而核心处于硬中断模式？此外，如果这种引用是可能的，如果我们调用信号量“down”会发生什么，尽管这是非常不鼓励的。？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T07:40:33.863

我相信至少在 x86 上是可以做到的，因为它不会立即引起恐慌。

然而，这样做**总是错误的。**中断与任何任务无关，中断与正在运行的某个任务之间没有联系，因此无论如何都没有合理的理由尝试这样做。如果当前任务可以是系统上的任何任务，它有什么好处？

# c - 用于在给定 CPU 架构上进行优化的 GCC 选项

> ID：10646894
> 
> 赞同：8
> 
> 时间：2012-05-18T04:54:45.417
> 
> 标签：c, gcc, intel

我正在研究 Nehalam/westmere 英特尔微架构 CPU。我想为此架构优化我的代码。GCC 是否有任何专门的编译标志或 C 函数可以帮助我提高代码的运行时性能？

我已经在使用-o3。

```
Language of the Code - C
Platform - Linux
GCC Version - 4.4.6 20110731 (Red Hat 4.4.6-3) (GCC) 
```

在我的代码中，我进行了一些浮点比较，它们完成了超过一百万次。

请假设代码已经进行了最佳优化。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-18T05:59:25.807

首先，如果你真的想从像这样的新处理器上的优化中获益，你应该安装最新版本的编译器。4.4 几年前出现了，即使它看起来仍然保持不变，我怀疑更新的优化代码是否向后移植。（当前版本为 4.7）

Gcc 有一个包罗万象的优化标志，通常应该生成针对编译架构优化的代码：`-march=native`. 连同`-O3`这应该是你所需要的一切。

（对于本网站的未来问题，请使用完整的英语语法和标点符号。）

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-05-18T05:03:47.227

警告：**答案不正确**。

~~您实际上可以自己分析所有禁用和启用的优化。在您的计算机上运行：~~

 ~~```
gcc -O3 -Q --help=optimizers | grep disabled 
```~~ 

~~然后阅读仍然被禁用的标志，并且可以根据 [gcc 文档](http://gcc.gnu.org/onlinedocs/gcc/Option-Summary.html)影响性能。~~

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-05-18T09:26:26.230

您需要添加一个`-march=...`选项。`...`应该用[GCC 的 i386/x86_64 选项中描述的](http://gcc.gnu.org/onlinedocs/gcc-4.4.7/gcc/i386-and-x86_002d64-Options.html#i386-and-x86_002d64-Options)最接近您的 CPU 架构（往往会有细微的差异）替换。

我会使用`core2`，因为`corei7`（您想要的）仅在 GCC 4.6 及更高版本中可用。在此处查看[GCC 4.6 的架构列表](http://gcc.gnu.org/onlinedocs/gcc-4.6.3/gcc/i386-and-x86_002d64-Options.html#i386-and-x86_002d64-Options)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-10T00:12:08.287

如果你真的想使用一个太旧以至于它不支持 corei7 的 gcc，你可以使用 -mtune=barcelona

# javascript - 使用 .change() 函数在复选框更改时自动提交表单？

> ID：10646896
> 
> 赞同：0
> 
> 时间：2012-05-18T04:55:14.643
> 
> 标签：javascript, jquery

这是一个有点长的问题，所以请大家多多包涵。

勾选复选框时，我需要自动提交表单。到目前为止，我有下面的代码，**它工作得很好**。当复选框被选中或未选中时，表单必须提交。有一些 PHP 读取数据库条目并在加载时显示适当的状态（选中或未选中）。

```
<form method="post" id="edituser" class="user-forms" action="--some php here--">
    <input class="lesson" value="l101" name="flesson" type="checkbox" />
</form>
<script>
    $('.lesson').change(function() {
        $('.user-forms').submit(); 
    });
</script> 
```

但是，当我介绍一个将复选框变为滑块的精美复选框脚本时，它不再起作用。复选框 jQuery 脚本如下：

```
<script src="'.get_bloginfo('stylesheet_directory').'/jquery/checkboxes.js"></script>
<script type="text/javascript" charset="utf-8">
    $(document).ready(function(){
    $("input[type=checkbox]").tzCheckbox({labels:["Enable","Disable"]});
    });
</script> 
```

上面调用的 checkboxes.js 内容如下：

```
(function($){
$.fn.tzCheckbox = function(options){

    // Default On / Off labels:

    options = $.extend({
        labels : ['ON','OFF']
    },options);

    return this.each(function(){
        var originalCheckBox = $(this),
            labels = [];

        // Checking for the data-on / data-off HTML5 data attributes:
        if(originalCheckBox.data('on')){
            labels[0] = originalCheckBox.data('on');
            labels[1] = originalCheckBox.data('off');
        }
        else labels = options.labels;

        // Creating the new checkbox markup:
        var checkBox = $('<span>',{
            className   : 'tzCheckBox '+(this.checked?'checked':''),
            html:   '<span class="tzCBContent">'+labels[this.checked?0:1]+
                    '</span><span class="tzCBPart"></span>'
        });

        // Inserting the new checkbox, and hiding the original:
        checkBox.insertAfter(originalCheckBox.hide());

        checkBox.click(function(){
            checkBox.toggleClass('checked');

            var isChecked = checkBox.hasClass('checked');

            // Synchronizing the original checkbox:
            originalCheckBox.attr('checked',isChecked);
            checkBox.find('.tzCBContent').html(labels[isChecked?0:1]);
        });

        // Listening for changes on the original and affecting the new one:
        originalCheckBox.bind('change',function(){
            checkBox.click();
        });
    });
};
})(jQuery); 
```

该脚本还附带一些 CSS，但我将其省略，因为它并不重要。

最后，这是 jQuery 脚本对复选框所做的：

```
<input id="on_off_on" class="lesson" value="lesson11-1" name="forexadvanced[]" type="checkbox" style="display: none; ">
<span classname="tzCheckBox checked" class=""><span class="tzCBContent">Disable</span><span class="tzCBPart"></span></span> 
```

当复选框更改为滑块时，.change() 函数不再检测复选框状态的更改。

我怎样才能使 .change() 函数工作，或者它们是我可以使用的替代函数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T05:09:48.170

听这样的变化：

```
 $('.lesson').bind("tzCheckboxChange",function() {
      $('.user-forms').submit(); 
 }); 
```

通过添加以下行来修改插件：

```
 $(originalCheckBox).trigger("tzCheckboxChange"); 
```

后

```
 checkBox.find('.tzCBContent').html(labels[isChecked?0:1]); 
```

这样，无论何时你使用这个插件，你都可以监听**tzCheckboxChange**而不仅仅是**change**。
我真的不知道插件发生了什么，但是当它只能通过触发器触发时，它正在监听一个更改事件似乎有点时髦（除非它不隐藏原始复选框）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T05:16:08.847

该插件将您的复选框更改为跨元素并隐藏实际的复选框本身。因此，当您单击它们时，什么也没有发生。由于 span 元素没有 onchange 事件，因此您无法将更改事件绑定到这些事件。

然而，span 元素确实有点击事件，这意味着您可以改为将点击事件绑定到生成的 span，使用 Firebug 或 Chrome 调试器来定位要绑定到的正确元素。

然后，如果未使用插件，您的单击处理程序可以执行更改事件通常会执行的相同操作。

这是一个例子：

**HTML（来源）：**

```
<!-- This is a checkbox BEFORE running the code that transforms the checkboxes 
   into sliders -->
<li>
    <label for="pelda1">Opció 1:</label>
    <input class="pelda" type="checkbox" id="pelda1" name="pelda1" />
</li> 
```

**HTML（从 Chrome 调试器生成）：**

注意：这是运行将复选框转换为滑块的 JavaScript 后生成的 HTML！生成此代码*后*，您必须绑定单击事件。

```
<li>
    <label for="pelda1">Option 1:</label>

    <!-- The hidden checkbox -->
    <input class="pelda" type="checkbox" id="pelda1" name="pelda1" style="display: none; " />

    <!-- the "checked" class on the span gets changed when you toggle the slider 
         if it's there, then it's checked. This is what you're users are actually
         changing. 
    -->
    <span class="tzCheckBox checked">
        <span class="tzCBContent">active</span>
        <span class="tzCBPart"></span>
    </span>
</li> 
```

**JavaScript：**

注意：这必须在将复选框转换为滑块**之后绑定。**如果您之前尝试过，HTML 将不会存在于 DOM 中！

```
$('.tzCheckBox').click(function() {

    // alert the value of the hidden checkbox
    alert( $('#pelda1').attr("checked") );

    // submit your form here
}); 
```

# c# - 如何使用模板发送电子邮件？

> ID：10646897
> 
> 赞同：0
> 
> 时间：2012-05-18T04:55:22.660
> 
> 标签：c#, visual-studio, c#-4.0

我在 c# 中使用此代码发送电子邮件。我希望这封电子邮件基于模板。此电子邮件包含图像和样式。我想更改电子邮件的某些内容（例如，姓名、链接等）。任何想法如何去做？代码如下，

```
private void button1_Click(object sender, EventArgs e)
{

// Create outlook application object.
var outlookApplication = new Microsoft.Office.Interop.Outlook.Application();

// Create mail message.
var newMail = (Microsoft.Office.Interop.Outlook.MailItem)outlookApplication.CreateItem(Microsoft.Office.Interop.Outlook.OlItemType.olMailItem);
newMail.To = "example@exam.com";
newMail.Subject = "Example";
newMail.SentOnBehalfOfName = "team@iny.co.uk";
newMail.Attachments.Add(@"c:\New\DebriefReportTemplate.docx");

newMail.BodyFormat = Microsoft.Office.Interop.Outlook.OlBodyFormat.olFormatHTML;
newMail.HTMLBody = "<p>Dear Example,</p><p>Example example.</p>";
newMail.Display(true);

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T05:00:43.817

向您推荐 Razor Engine，[http://razorengine.codeplex.com/](http://razorengine.codeplex.com/)。它易于使用，语法与 asp.net mvc 3 razor 相同

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T05:49:33.800

您可以使用格式和标签创建 xsl 文件。将数据传递给 xsl 并将其转换为 html 格式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T05:16:08.577

最简单的解决方案是使用`String.Format`

```
wMail.HTMLBody = string.Format("<p>Dear {0},</p><p>{1}</p>", name, message); 
```

如果您需要更复杂的东西，您应该使用 @allentranks 建议的 Castle Velocity 或 Razor 等模板引擎。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-18T05:07:16.840

> 如果您在电子邮件模板中的关键字是固定的，那么您可以使用 Sting.Replace("Example","XYZ") 并获得您想要的结果

# php - 如何使用正则表达式匹配 php 中的 url？

> ID：10646916
> 
> 赞同：0
> 
> 时间：2012-05-18T04:57:24.487
> 
> 标签：php, regex

我正在尝试`v`在以下正则表达式中匹配查询的值：

```
http:\/\/www\.domain\.com\/videos\/video.php\?.*v=([a-z0-9-_]+) 
```

示例网址：

```
http://www.domain.com/videos/video.php?v=9Gu0sd2dmm91B9b1 
```

url 始终是 www，我只是想匹配该`v`值。有谁知道我的语法有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T05:00:28.357

使用该[`parse_url()`](http://php.net/manual/en/function.parse-url.php)功能。它更容易使用：

```
$url_components = parse_url("http://www.domain.com/videos/video.php?v=9Gu0sd2dmm91B9b1");

echo $url_components['query']; 
```

从那里我认为你可以做剩下的事情并切掉前几个字母。一旦你这样做了，你就只剩下`v=`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T05:00:32.803

你忘记了大写字母

```
http:\/\/www\.domain\.com\/videos\/video.php\?.*v=([a-zA-Z0-9-_]+) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T05:03:09.807

你没有逃避句号“。” 在 video.php 中。如果我要转义路径/URL，我也会使用不同的分隔符 - 如下所示：

```
preg_match( "#http://www\.domain\.code/videos/video\.php\?.*v=([^&]*)#", $url, $matches ); 
```

如果 v= 在查询字符串的中间，

```
v=([^&]*) 
```

.. 会将所有内容与另一个 & 符号匹配，以防字母和 _ 以外的字符，- 由于某种原因最终出现在其中。

# gwt - public void onSuccess(String result)，从哪里/如何设置结果？

> ID：10646919
> 
> 赞同：0
> 
> 时间：2012-05-18T04:57:42.037
> 
> 标签：gwt, gwt-rpc

我尝试遵循 GWT RPC 示例代码，但我不明白 AsyncCallback 的 Onsuccess 方法结果是如何设置的。任何人都可以帮助我理解流程。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T05:27:23.027

```
AsyncCallback<YourReturnType> callback = new AsyncCallback<YourReturnType>() {
    @Override
    public void onSuccess(YourReturnType result) {
        //to do something with the result
    }
    @Override
    public void onFailure(Exception ex) {
       //to do something with exceptions
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T05:55:44.843

@Rajesh，我在这里提供一个[链接](https://developers.google.com/web-toolkit/doc/latest/tutorial/RPC#services)。我希望这可以帮助你。

# php - MySQL和PHP - 如何显示字段值等于x的所有行？

> ID：10646921
> 
> 赞同：3
> 
> 时间：2012-05-18T04:57:55.347
> 
> 标签：php, mysql, select

我有一个包含以下字段的数据库表（ff_projections）：

```
ID  Player  Position    Team    Pass_Yds    Pass_TDs    Int_Thrown  Rush_Yds    Rush_TDs    Rec_Yds Rec_TDs Receptions  Fumbles Extra_Pts   FG  Sacks   Int_Caught  Def_TD  ST_TD   Shutouts    Overall_Pts Total_Fantasy_Pts 
```

我想要的是显示 Position = QB 的所有行。但是，只有某些字段会出现在行中。

像这样：

```
SELECT Player, Team, Pass_Yds, Pass_TDs, Int_Thrown, Rush_Yds, Rush_TDs, Overall_Pts, Total_Fantasy_Pts  FROM ff_projections WHERE Position = 'QB'; 
```

然后将结果显示在网页上的表格中。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-18T05:00:50.103

```
<?php
$con = mysql_connect("localhost","user","password");
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }

mysql_select_db("database", $con);

$result = mysql_query("SELECT Player, Team, Pass_Yds, Pass_TDs, Int_Thrown, Rush_Yds, Rush_TDs, Overall_Pts, Total_Fantasy_Pts FROM ff_projections WHERE Position = 'QB' ORDER BY Pass_Yds DESC;");

while($row = mysql_fetch_array($result))
  {
  echo $row['Player'];
  echo $row['Team'];
  ....
  }

mysql_close($con);
?> 
```

# java - primefaces 中的提要阅读器

> ID：10646923
> 
> 赞同：2
> 
> 时间：2012-05-18T04:58:29.583
> 
> 标签：java, primefaces, rss-reader

下面是 primefaces 的提要阅读器的代码，它抛出一个错误，上面写着
java.lang.NoClassDefFoundError: com/sun/syndication/io/XmlReader

```
<h:body>
    <p:feedReader size="20" value="http://rss.news.yahoo.com/rss/sports" var="feed">  
<h:outputText value="#{feed.title}" style="font-weight: bold"/>  
<br />  
<h:outputText value="#{feed.description.value}" escape="false"/>  
<p:separator /> 
```

我搜索了相同的 n 发现某些 ROME 库必须包含在类路径中。我下载了 rome jar 文件 n 将其包含在我的项目中，但它仍然给出相同的错误我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T05:12:30.390

你添加了jdom jar吗？如果没有添加。Als 尝试更改 rome jar 的版本。即尝试 0.9。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T05:21:46.927

您可以使用运行时工具或 jdk 工具包含该库

使用`runtime`工具

java -cp`Your class_List`

使用`jdk tools`

例如：C:> java/jdb/javac/javah -classpath C:\java\MyClasses;C:\java\OtherClasses

或者你可以设置`CLASSPATH`环境变量

例如：设置 CLASSPATH=path1;path2

# php - 使用 id 识别从另一个表中获取记录

> ID：10646924
> 
> 赞同：0
> 
> 时间：2012-05-18T04:58:38.763
> 
> 标签：php, mysql

艺术家表中有艺术家、曲目等表有： **id** name cover desc

并且在轨道表中有： id name desc **Artistid**

所以如果我 goto track.php?id=1 然后他们打印 id name desc **artistid**我想让这个显示艺术家表中的记录并识别 id

你能告诉我如何从记录集中制作多个过滤器吗？因为当值为 1 时我有字段“pubid”，这意味着发布，然后如果值为 2，则意味着取消发布

抱歉英语不好谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T05:06:48.337

看看[SQL Join](http://www.w3schools.com/sql/sql_join.asp)。为了只获取可能发布的记录，您必须添加另一个`WHERE`子句。喜欢：

`SELECT name, desc FROM track WHERE id = $id AND pubid = 1;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T05:10:05.940

track.php?id=1 或 track.php?id=1&pubid=1 track.php?id=1&pubid=2

```
<?php

if (isset($_GET['id'])) {
    $artistid = $_GET['id'];
    if (isset($_GET['pubid'])) {
        $pudid = $_GET['pubid']; 
        $sql = "select `id`, `name` from `track` where `artistid` = {$artistid} and `pubid` = {$pupid} order by `desc`";

    } else
        $sql = "select `id`, `name` from `track` where `artistid` = {$artistid} order by `desc`";

    $query = mysql_query($sql);
    while (($row = mysql_fetch_array($query)) !== false) {
       echo $row['name'];
    }
} 
```

# sql-server - 哪个 select SQL 查询会更快：排序的还是未排序的？

> ID：10646925
> 
> 赞同：0
> 
> 时间：2012-05-18T04:58:52.533
> 
> 标签：sql-server

如果我触发这样的查询

**案例一：**

**一世 ：）**

```
select * from visitors
     order by visitdate desc 
```

**二：）**

```
select top 100 * from visitors
order by visitdate desc 
```

**案例 B：**

**一世：）**

```
select * from visitors 
```

**二：）**

```
select top 100 * from visitors 
```

**编辑1：**

情况 A i 或 ii 在情况 B 中哪个会更快： i 或 ii

就**CPU 使用**（计算时间）和第一次输出交付而言，未完成向客户端的输出交付

**编辑 2：** 我假设它没有被索引

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T05:30:14.817

在几乎所有情况下，**ii**都会更快，尽管速度不会快很多

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T07:46:33.653

假设您有 100 多个访问者，ii 会更快。

至于`order by`子句，这取决于您是否在该字段上有索引。

# iphone - iOS 应用程序在临时安装后设备重新启动后才会运行

> ID：10646929
> 
> 赞同：2
> 
> 时间：2012-05-18T04:59:19.353
> 
> 标签：iphone, ios5, xcode4

每次我使用 ad hoc 分发方法（例如存档、创建一个 .ipa 文件并让我的测试人员下载它）将我的应用程序安装到 iDevice 时，应用程序将在设备重新启动之前不会运行。就像下面发布的第二个链接一样，在升级到 iOS 5 和 XCode 4.3.1 之前我没有遇到这个问题——目前正在运行 iOS 5.1 / XCode 4.3.2 并且仍然有同样的问题。如果我使用 USB 连接 iPhone / iPad（并直接从 xcode 运行），则应用程序安装正常并且运行良好。

目前，在安装 ad hoc 时，会发生以下两种情况之一：

1：应用程序“正常”安装并且图标可见-但按下它会显示启动图像，然后应用程序无法黑屏-然后返回跳板。应用程序永远不会有任何进展。

• 或者 •

2：应用程序安装似乎正常进行，然后当“安装...”阶段完成时，应用程序图标就消失了。重新启动 iPhone，应用程序图标正是它应该在的位置。

在任何一种情况下，重新启动 iPhone 后它都可以正常运行。

有什么建议么？？

这是我能找到的最接近的问题，但我在 iOS 5.0 / 5.1 上遇到了这个问题，甚至在第一次将我的应用程序安装到设备时： [iPhone 应用程序在 iOS 4 上安装后无法启动，在设备重启后工作](https://stackoverflow.com/questions/3123729/iphone-app-fails-to-launch-after-install-on-ios-4-works-after-device-reboot)

我也找到了这篇文章，所以我检查了我的权利设置（在目标中）——未启用：[ad hoc app failed to install on real iPad](https://stackoverflow.com/questions/9851441/ad-hoc-app-failed-to-install-on-real-ipad)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T23:29:50.383

当我在 Info.plist 中设置了与您在配置门户中设置的 App Id 不同的“Bundle Identifier”之前，我遇到了这个确切的问题。

如果这不起作用，您可以在尝试安装 ad hoc ipa 时尝试检查设备日志。

XCode -> 窗口 -> 管理器 -> 设备 -> 您的设备 -> 控制台

# iphone - 如何检索iphone中每个应用程序占用的内存

> ID：10646932
> 
> 赞同：1
> 
> 时间：2012-05-18T04:59:30.867
> 
> 标签：iphone, ios

我卡在了这一点上。我需要检索 iphone 内置应用程序占用的内存，如音乐、照片、电影、应用程序等......任何人有想法请告诉我。

像显示细节一样。 [如何在 iPhone 中以编程方式获取应用程序的存储大小](https://stackoverflow.com/questions/9603776/how-to-get-storage-size-of-applications-programatically-in-iphone)

所以请帮助我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T05:08:15.600

```
#import <mach/mach.h>    
void report_memory(void) 
{
    struct task_basic_info info;
    mach_msg_type_number_t size = sizeof(info);
    kern_return_t kerr = task_info(mach_task_self(),
                             TASK_BASIC_INFO,
                             (task_info_t)&info,
                             &size);
    if( kerr == KERN_SUCCESS ) 
    {
         NSLog(@"Memory in use (in bytes): %u", info.resident_size);
    } 
    else
    {
        NSLog(@"Error with task_info(): %s", mach_error_string(kerr));
    }
} 
```

你可以看到内存的大小（以字节为单位）

# jquery - 浏览器检测jQuery？

> ID：10646944
> 
> 赞同：1
> 
> 时间：2012-05-18T05:00:34.140
> 
> 标签：jquery

我正在使用 jquery 浏览器检测功能来提醒不同浏览器上的不同值，但似乎它与 safari 和 chrome 冲突。他们都在提醒相同的价值。此功能在所有浏览器中都可以正常工作，但只有 safari 和 chrome 存在问题。提前致谢。

```
<script type="text/javascript">

$(function (){

    var m= $.browser;

    if(m.webkit) {

        alert('chorme')

        }

    else if(m.safari) {

        alert('safari')

        }

    else {alert('bye bye')}

    })

</script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T05:03:36.157

Safari 和 Chrome 使用相同的渲染引擎 Webkit。首先查找 Safari，然后查找其他 Webkit 浏览器。在现实情况下，确实没有理由区分两者。它们几乎在每种情况下都会以几乎相同的方式呈现网页。

但是，如果您需要将它们分开，请尝试以下操作：

```
$.browser.safari &= !/chrome/.test(navigator.userAgent.toLowerCase());

if (m.safari) {
    alert('safari')
} else if (m.webkit) {
    alert('chorme')
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T05:03:04.090

你可以试试这段代码：

```
$.browser 
```

**为safari 和 webkit**给出相同的结果。

[**检查 $.browser 的文档**](http://api.jquery.com/jQuery.browser/)

所以你可以[在这里](http://www.quirksmode.org/js/detect.html)尝试你的解决方案，但不是 jquery

# php - Magento - CSS 未在 magento 中加载

> ID：10646952
> 
> 赞同：0
> 
> 时间：2012-05-18T05:01:26.223
> 
> 标签：php, css, magento

我已经在实时服务器上安装了 Magento。但问题是它没有加载css。我已经仔细检查了 .htaccess 文件，但其中没有任何问题。我已授予对 Var、Media 和 app/etc 文件夹的完全访问权限。

请让我知道这是什么问题？

提前致谢。

亚历克斯·S。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-07-25T17:52:47.337

在我的情况下，这是由于 .htaccess 文件。在我的项目中，文件夹中有一个`.htaccess`文件，`/skin`内容如下：

`Header set Access-Control-Allow-Origin "*"`

我已经删除了这个文件，它工作正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T06:00:16.657

对于 htaccess，确保 RewriteBase / 未注释。所以从#RewriteBase / 到 RewriteBase /。如果可能，请检查错误日志。而且，我记得的另一件事是，您可能还需要清除缓存和 tmp 文件夹。首先执行此操作，清除缓存和 tmp 文件夹。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T05:15:59.390

查看页面的源代码并单击 css 链接，如果指向正确，它将带您进入 css 页面。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-25T07:53:52.100

当您在 Mysql 中更改 base_url 路径时

```
as : web/secure/base_url = http://example.com/ 
```

必须在Then clear session and cache`/`的末尾提及。 然后重启 MySQL 和 Apache2。 类似的。`.com`

`unsecure/base_url`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-09-23T10:06:36.360

在安装时，magento 询问了安全 URL 和不安全 URL。当我们更改服务器时，必须更改这些 url。如果您无法访问`admin`>>>>`system``configuration`

然后你可以从数据库中改变它。在表中查找

> 数据库前缀。core_config_data

改变路径

`web/unsecure/base_url`到您的新域名
`web/secure/base_url`到您的新域名

**注意**：请不要忘记最后加上斜杠。喜欢：www.newdomain.com`/`

谢谢。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-03-29T08:24:11.590

我会建议一步一步来。

有2种情况：

**1）您可以直接**从 URL看到您的 CCS ，因此浏览器通过直接 URL 加载它，例如：`http://your-magento/skin/frontend/your-package/your-theme/css/styles.css`，所以在这种情况下，您应该检查与 Magento 连接的点：

*   从配置或数据库检查/更正基本 URL
*   清除缓存
*   清除会话
*   检查配置

2) 如果您的 CSS 不是通过直接 URL 加载的。所以在这种情况下**，它根本与 Magento 无关**。在这种情况下，您应该检查以下几点：

*   检查文件和文件夹权限
*   检查重写规则和模块
*   服务器日志文件查找错误
*   检查 .htaccess 的存在和正确性。
*   **重要**的是，检查所有子文件夹中的所有 .htaccess 文件。

就我而言，我区分了这两种情况，并开始在第二种情况下搜索我的问题。

我`.htaccess`在文件夹中找到`/skin/frontend/your-package/your-theme/` 内容如下：

```
Order deny,allow
Deny from all 
```

删除此文件，您的 CSS 文件将被加载。我不知道这个文件是如何创建的，我在父主题中没有这样的文件。我认为 Magento 是自动创建的。用 GIT 关注并跟踪变化。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-08-31T10:46:15.263

检查 app/etc、var、media 文件夹等文件夹的权限。尝试为这些文件夹授予 777 权限。最近我遇到了同样的问题，我尝试了这个。然后我的网站工作正常。

# java - Java：无法在循环中打印文本框的值

> ID：10646955
> 
> 赞同：1
> 
> 时间：2012-05-18T05:01:40.540
> 
> 标签：java

我有 3 个文本框。一个文本框包含一些整数，例如：2 我想做的是我想迭代循环 2 次.. 在每次迭代中我想在文本框中打印值。在进行下一次迭代之前，我正在清除文本框。经过 2 次迭代后，我想让文本框可编辑为 false。但问题是循环迭代 2 次，但文本框中的值仅在第 1 次迭代时打印。我写了以下代码

```
int i=1;
do
{
System.out.println(ext_people_name.getText());
System.out.println(ext_contact_num.getText());
System.out.println(i);
ext_people_name.setText("");
ext_contact_num.setText("");
i++;
if(i>nop1)
{
ext_people_name.setEditable(false); 
ext_contact_num.setEditable(false); 
break;
}
}while(i<=nop1); 
```

我现在得到的输出是

```
neha
8798
1
2 
```

任何人都可以告诉任何替代方案或请帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T05:03:57.993

```
I am clearing the textbox before going to the next iteration 
```

在那里，你解决了你自己的问题！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T05:05:15.720

对于您的代码，最好使用 for 循环而不是 do/while。像这样重构你的代码：

```
for (int i=1; i<=nop1; i++) {
   System.out.println(ext_people_name.getText());
   System.out.println(ext_contact_num.getText());
   System.out.println(i);
   ext_people_name.setText("");
   ext_contact_num.setText("");
};

ext_people_name.setEditable(false); 
ext_contact_num.setEditable(false); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T05:06:55.033

您自己给出了答案 - 您在下一次迭代之前清除了文本框。因此，它不包含值，因此不会打印值。

您需要做的是重新设计您正在做的事情并将其分解为更小的步骤。与其尝试使用一个循环来做所有事情，不如将其分解为更小的循环。

我也不太明白你想要做什么。为什么在下一次迭代之前清除文本框？

如果您只想显示文本框值两次，然后清除它们并使其不可编辑，请在单独的步骤中执行此操作。

或者，编辑您的原始问题并添加一些我们可以更好地理解它的上下文。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-18T05:09:21.407

您在每次迭代后清除文本框中的值，这会使值为空并且不打印任何内容

```
System.out.println("some   "+ext_people_name.getText()); 
System.out.println("some   "+ext_contact_num.getText()); 
```

使用上面的代码，你会发现你在迭代后覆盖了结果

# c++ - 为什么我的 c++ 程序在特定输入时崩溃？

> ID：10646958
> 
> 赞同：1
> 
> 时间：2012-05-18T05:02:53.483
> 
> 标签：c++, stl, nfa, automaton

几天来，我试图做一个程序来模拟一个不确定的有限自动机（NFA），更具体地说，一个字符串识别器。在几次失败后，感谢用户[Konrad Rudolph](https://stackoverflow.com/users/1968/konrad-rudolph)，我可以根据这个伪代码实现一个解决方案：

> 好吧，在 NFA 中，您有一组当前状态，并且在每个步骤中，您都会遍历所有当前状态，并且为每个状态选择所有有效转换。这些组合集形成了您的新状态集。
> 
> 最后，检查当前状态和接受状态的交集是否为非空。

在伪代码中，如下所示：

```
current = { initial }
    for each char in input:
        next = { }
        for each state in current:
            for each transition in transitions[state][char]:
                next.append(target_of(transition))
        current = next
if len(intersection(current, accepting)) > 0:
    print "String accepted"
else:
    print "String rejected" 
```

这可以逐行翻译成 C++ 代码。他建议让这个简单，使用`std::set<int> for the current and next sets`

这是我在 C++ 中的实现：

```
#include <iostream>
#include <vector>
#include <map>
#include <set>
#include <utility>
#include <vector>

using namespace std;

int main (){

    int testCases, i, j,k, cont=1,finalStates,numberInputs,stateOrigin, stateDestination;
    int numberStates, numberTransitions, initialState;
    int  numberFinals;
    char transitionCharacter ;

    set<int> current;
    set<int> next;
    set<int>::iterator it;
    set <int> final;
    set<int> the_intersection;  // Destination of intersect
    map<pair<int, int>, char>::iterator p;
    string inputString;

    typedef std::pair<int, int> trigger;
    std::map<trigger, char> transitions;
    map<trigger, char>::iterator r;

    cin>> testCases;
    for (i=0;i< testCases;i++){

        final.clear();
        next.clear();
        current.clear();
        the_intersection.clear();
        transitions.clear();
        cin>>numberStates>>numberTransitions>>initialState>>numberFinals;

        for (j=0;j<numberFinals;j++){
            cin>>finalStates;
            final.insert(finalStates);
        }

        for (j=0; j<numberTransitions;j++){
            cin>> stateOrigin>>stateDestination>>transitionCharacter;
            transitions.insert(make_pair(make_pair(stateOrigin, stateDestination), transitionCharacter));
        }

        cin>>numberInputs;
        current.insert (initialState);
        cout<<"Test Case #"<<cont++<<":"<<endl;

        for (j=0; j<numberInputs;j++){
            current.clear();
            current.insert (initialState);
            the_intersection.clear();
            cin>> inputString;
            cout<<inputString<<" ";

            /// ///////////////Konrad Rudolph's solution /////////////////
            for (k=0; k<inputString.size();k++){
                next.clear();
                for (it = current.begin(); it!=current.end(); it++){
                    for (r =transitions.begin(); r!=transitions.end(); r++){
                        if ( ((*r).first.first == *it) && ( (*r).second == inputString[k] ) ){
                            next.insert((*r).first.second);
                        }
                    }
                    current = next;
                }
            }
            std::set_intersection(current.begin(), current.end(), final.begin(), final.end(), std::inserter(the_intersection, the_intersection.end()));

            if (the_intersection.empty()){
                cout<<"Rejected"<<endl;
            }else {
                cout<<"Acepted"<<endl;
            }

            /// ///////////////////////////////////////////////////////
        }
        cout<<endl;
    }
return 0;
} 
```

我有这个输入：

```
1
6 8 0 2
2
5
0 0 a
0 1 a
1 1 b
1 2 c
1 3 c
3 4 d
4 4 d
4 5 d
5
aaabcccc
aabbbbcdc
abbcdddcc
abc
acdddddd 
```

预期的输出是：

```
Test Case #1:
aaabcccc Rejected
aabbbbcdc Rejected
abbcdddcc Rejected
abc Acepted
acdddddd Acepted 
```

但是，我的代码作为输出生成：

```
Test Case #1:
aaabcccc Rejected
aabbbbcdc Rejected
abbcdddcc Rejected
abc Acepted
acdddddd 
```

而对于测试用例的最后一个字符串，程序什么也不做，只是不停止运行。我的问题是为什么我的程序会因这个特定的输入而崩溃。[我在JFlap](http://www.jflap.org/)中设计了相同的自动机 NFA并识别了最后一个输入

> **呸呸呸呸**

.

![在此处输入图像描述](../Images/245a623ff1e6688f9f9624c60b16b175.png)

```
(0, a) = 1
(1, c) = 2
(2, d) = 3
(3, d) = 4
(4, d) = 4
(4, d) = 4
(4, d) = 4
(4, d) = 5 
```

我在执行代码时犯了什么错误？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T05:29:40.827

你想做的；

```
for each char in input:
    next = { }
    for each state in current:
        for each transition in transitions[state][char]:
            next.append(target_of(transition))
    current = next 
```

但你正在做的是；

```
for each char in input:
    next = { }
    for each state in current:
        for each transition in transitions[state][char]:
            next.append(target_of(transition))
        current = next 
```

微妙，但在循环时重新分配电流可能会导致您的挂起，并且绝对不会给出预期的结果。

# c++ - 计算 1 到 20 之间数字的 lcm 的 C++ 程序（项目 euler ）

> ID：10646960
> 
> 赞同：1
> 
> 时间：2012-05-18T05:03:05.270
> 
> 标签：c++, lcm

正如标题所解释的，这是一个查找 1 到 20 之间数字 lcm 的程序。我找到了一个算法来做到这一点，这是链接
[http://www.cut-the-knot.org/Curriculum/Arithmetic/LCM.shtml](http://www.cut-the-knot.org/Curriculum/Arithmetic/LCM.shtml) 网页上有一个 java 小程序可以更好地解释算法

**问题**：我编写的代码编译器没有显示错误，但是当我运行代码时程序会发疯，我想可能是一些无限循环，但我一生都无法弄清楚。我使用 turbo c++ 4.5，所以基本上如果有人可以查看代码并帮助我，那就太好了。提前致谢

**算法**：

假设我们需要找到 2,6,8 的 lcm

首先，我们找到系列中最小的，并将其上方的数字添加到它上面，即系列变为

4,6,8

现在我们再次找到最小值并将列中的初始值添加到它，即 2

6,6,8

所以下一次迭代变成

8,6,8

8,12,8

10,12,8

10,12,16

12,12,16

14,12,16

14,18,16

16,18,16

18,18,16

18,18,24

20,18,24

20,24,24

22,24,24

24,24,24

正如你所看到的那样，所有数字都变得相等，这就是我们的 lcm

```
#include<iostream.h>
/*function to check if all the elements of an array are equal*/
int equl(int a[20], int n)
{
int i=0;

  while(n==1&&i<20)
 {
  if (a[i]==a[i+1])
        n=1;
  else
        n=0;
        i++;
  }
 return n;
}
/*function to calculate lcm and return that value to main function*/

int lcm()
{
int i,k,j,check=1,a[20],b[20];
/*loading both arrays with numbers from 1 to 20*/
for(i=0;i<20;i++)
{
    a[i]=i+1;
    b[i]=i+1;
}
check= equl(a,1);

/*actual implementation of the algorith*/
while(check==0)
 {
    k=a[0];                  /*looks for the least value in the array*/
    for(i=0;i<20;i++)
    {
        if(a[i+1]<k)
            {
                k=a[i+1];       /*find the least value*/

                j=i+1;          /*mark the position in array */

            }
        else
            continue;
    }
    a[j]=k+b[j];            /*adding the least value with its corresponding number*/

    check= equl(a,1);
 }

 return (a[0]); 

/*at this point all numbers in the array must be same thus any value gives us the lcm*/
}

void main()
{
 int l;
 l=lcm();
 cout<<l;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T05:23:56.227

在这一行：

```
a[j]=k+b[j]; 
```

您使用`j`但它是未初始化的，因此它具有很大的价值，并且您超出了数组边界，因此您会遇到分段错误。

您的代码中还发生了一些奇怪的事情。`void main()`并且您`cout`不用说`std::cout`或`using namespace std;`类似的东西就可以使用。一种奇怪的做法。

如果你要创建`lcm()`一个函数，你不认为你应该将数组作为参数传递吗？那就是`int lcm(int a[], int b[]);`。

您可能还会考虑使用调试器并改进您的编码实践。在调试器的帮助下，我在将代码粘贴到编译器后的 30 秒内发现了这个错误。

您的循环条件是：

```
while(n==1&&i<20) 
```

因此，您的`equl`函数将永远不会返回 1，因为如果 n 恰好为 1，那么循环将继续进行并且永远不会返回 1。但是，您的程序似乎仍然没有返回正确的结果。您可以拆分找到最小元素的代码片段并将其替换为清洁：

```
int least(int a[], int size){
    int minPos = 0;

    for(int i=0; i<size ;i++){

        if (a[i] < a[minPos] ){
            minPos = i;
        }
    }

    return minPos;
} 
```

然后你可以通过说来调用它`j = least(a, 20);`。我会把你的程序的进一步工作留给你。考虑将您的变量称为有意义的东西，而不是`i,j,k,a,b`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T05:40:17.427

您的`equl`函数使用 0-20 的数组索引，但数组只有 1-19

`j``lcm()`如果第一个元素是最小的，则in未初始化。它应该在while循环的顶部设置为0

在下面的代码中，当 i=19 时，您正在访问`a[20]`，它超出了数组的范围。应该`for(i=0;i<19;i++)`

```
for(i=0;i<20;i++) {
    if(a[i+1]<k) 
```

您实际上并未`std`使用`cout`. 这应该是`std::cout<<l`

您包括`iostream.h`. 标准`iostream`没有.h，这可能不适用于这么旧的编译器

而不是到处硬编码 20，你应该使用`#define`. 这不是错误，只是风格问题。

下面的代码什么都不做。这是默认行为

```
else
    continue; 
```

# python - 从 matplotlib 中的“alpha blending”原始颜色获取新的十六进制颜色值

> ID：10646963
> 
> 赞同：3
> 
> 时间：2012-05-18T05:03:13.580
> 
> 标签：python, matplotlib, python-imaging-library

简单地说，给定一个初始颜色“#1010CA”和一个 alpha 因子 0.5，我怎样才能得到图中显示的最终颜色`color="#1010CA", alpha=0.5`？

或者更直截了当，我应该填写什么

```
plot(x, y, color=__) 
```

所以它相当于（至少在视觉上）

```
plot(x, y, color="#1010CA", alpha=0.5) 
```

? 我想这不应该是一个 python 问题，而是如何通过某种因素操纵 rgb 颜色来抑制它，但请原谅我对调色板的无知......

**编辑**

这是我在接受@Blender 的回答后选择的当前解决方案

```
import matplotlib
import numpy as np
def alpha_blending(hex_color, alpha) :
    """ alpha blending as if on the white background.
    """
    foreground_tuple  = matplotlib.colors.hex2color(hex_color)
    foreground_arr = np.array(foreground_tuple)
    final = tuple( (1\. -  alpha) + foreground_arr*alpha )
    return(final) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T05:11:40.263

如果没有背景颜色，您也无法获得“最终颜色”。

但是为了渲染 alpha 透明度，我*猜*加权和会起作用：

```
final = (1 - alpha) * background + alpha * foreground 
```

因此，如果您的颜色是白色并且您的`alpha = 0.5`，您可以执行以下操作：

```
final = rgb(0.5, 0.5, 0.5) + foreground / 2 
```

Matplotlib 接受 RGB 元组，因此您可以很容易地制作不透明度展平功能。但是，我无法回答您为什么需要这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T05:24:48.723

问题在于它是影响最终像素颜色的两种颜色（前景和背景）的混合。如果您从白色作为背景开始，将前景色转换为**HSI**颜色空间（[http://en.wikipedia.org/wiki/HSL_and_HSV](http://en.wikipedia.org/wiki/CIELAB "这里")）并使用**I**作为您的 alpha 通道可以让您接近。对于更接近的匹配，您可以使用**L*a*b**颜色空间 ( [http://en.wikipedia.org/wiki/CIELAB](http://en.wikipedia.org/wiki/CIELAB "这里") ) 并更改**L**以匹配您的透明度比率。

# c - Mandelbrot 消息队列阻塞 - C

> ID：10646964
> 
> 赞同：1
> 
> 时间：2012-05-18T05:03:34.347
> 
> 标签：c, message-queue, mandelbrot

我在这个程序中使用消息队列时遇到问题，它应该启动多个进程，这些进程通过命令提示符通过参数传递给程序，但它只启动并计算一个进程的点......其他进程没有' ' 得到 发射 .. 请 帮助 我 .

这是创建消息队列并将所选数据输出为 pgm 格式的程序，只有第一个进程才能运行其他进程，没有人能告诉我为什么吗？

```
 #include <unistd.h>
#include <stdio.h>
#include <sys/types.h>
#include <sys/ipc.h>
#include <sys/msg.h>
#include <stdlib.h>
#include <string.h>
void output_pgm(char *filename,double *buffer, int nx, int ny, double max) {
  int i;
  FILE *file;
  file = fopen(filename,"w");
  fprintf(file,"P2\n");
  fprintf(file,"%d %d\n",nx,ny);
  fprintf(file,"%d\n",(int)max);
  for (i=0; i<nx*ny; i++) {
    if (!(i%nx)) fprintf(file,"\n");
    fprintf(file,"%d ",(int)buffer[i]);
  }
  fclose(file);
}

void main(int argc,char *argv[]) {

    if(argc != 2) {
    } else {

       int n = atoi(argv[1]);
       int i = 0;
       struct msgbuf {
              long mtype;
        int x;
        int y;
        double value;
       };

       struct envio {
          long mtype;
          long type;
          int ny;
          double yM1;
          double yM2;
       };

        key_t key = 123;
        key_t key2 = 124;
        int msgflg = IPC_CREAT | 0666;
        int msqid = msgget(key,msgflg);
        int msqid2 = msgget(key2,msgflg);
       switch(fork()) {
           case -1:
            printf("Erro de fork");
            break;
           case 0:
            printf("Oi: %d\n",n);           
            double *b;
            int x,y,i,m;

            double *ptr = b = malloc(1000*1000*sizeof(double));
            printf("Chego(1)\n");
                struct msgbuf a;
            struct envio c;
            size_t buflen = sizeof(a) - sizeof(long);
            size_t len2 = sizeof(c) - sizeof(long);
            printf("Chego(2)\n");
            int msid = msgget(key,msgflg);
            int msid2 = msgget(key2,msgflg);
            printf("Chego(3)\n");           
            double aux = -1.0;
            double multiplier = ((1.0/n) * 2);
            c.mtype = 300;
            int ny = (int)(1000/n);

            for(i = 0; i < n; i++) {
             c.type = (i+1);
               c.ny = (int)(1000/n);
               c.yM1 = aux;
               c.yM2 = aux+multiplier;
               printf("Chego aqui(2)\n");
                           if(msgsnd(msid2,&c,len2,0) < 0) {
                  perror("Erro do 1o envio\n");
               }
            }
        for(m = 0; m < n; m++) {
               printf("Entrei no ciclo(1)\n");

            for(y = 0; y <ny ;y++) {
                //printf("Chego(4)\n");
                 for(x = 0; x < 1000;x++) {
                if(msgrcv(msid,&a,buflen,(long)(m+1),0) < 0) {
                   perror("Erro na recepcao:\n ");       
                }
                //printf("Chego(5)\n");
                b[a.y * ny + a.x] = a.value;
                 }
            }

            b = b + (1000/n)*1000;
           }
            output_pgm("mandel.pgm", ptr, 1000, 1000, 255);
            //msgctl(msid, IPC_RMID, NULL);
            //msgctl(msid2, IPC_RMID, NULL);
            printf("Processo 1\n");
            break;
           default:
             for(i = 0;i < n;i++) {
              switch(fork()) {
                  case -1:
                   printf("Erro de fork");
                case 0:
                   exit(0);
                   break;
                default:
                    printf("Fui lancado\n");
                    execlp("/home/hyper/Documents/SO2/TP3-4/rec","rec",0);
                    break;
              }
                 }
             break;         
        }             
    }   

}; 
```

该程序中的 for 循环只运行一次

```
#include <unistd.h>
#include <stdio.h>
#include <sys/types.h>
#include <sys/ipc.h>
#include <sys/msg.h>
#include <stdlib.h>
#include <string.h>
double type;
       struct senbuf {
              long mtype;
        int x;
        int y;
        double value;
       };
int max_iterations = 256;

double compute_point(double ci, double cr) {
  int iterations = 0;
  double zi = 0;
  double zr = 0;

  while ((zr*zr + zi*zi < 4) && (iterations < max_iterations)) {
    double nr, ni;

    /* Z <-- Z^2 + C */

    nr = zr*zr - zi*zi + cr;
    ni = 2*zr*zi + ci;

    zi = ni;
    zr = nr;

    iterations ++;
  } 
  return iterations; 
}

/* The "compute" function computes the Mandelbrot function over every
   point on a grid that is "nx" points wide by "ny" points tall, where
   (xmin,ymin) and (xmax,ymax) give two corners of the region the
   complex plane.
*/

void compute(int msqid,int nx, int ny, double xmin, double xmax,
         double ymin, double ymax,long type2 ) {

  double delta_x, delta_y;
  int x, y;
  struct senbuf sen;
  delta_x = (xmax - xmin)/nx;
  delta_y = (ymax - ymin)/ny;
  size_t buflen = sizeof(sen) - sizeof(long);
  for (y=0;  y<ny; y++) {
    //printf("Ja entrei aqui");
    double y_value = ymin + delta_y * y;
    for (x=0; x<nx; x++) {
      double x_value = xmin + delta_x * x;
      sen.mtype = type;
      sen.x = x;
      sen.y = y;
      sen.value = compute_point(x_value,y_value);
      if(msgsnd(msqid,&sen,buflen,0) < 0) {
        perror("Erro no envio:");
      };     
     // printf("%f",sen.a[y*nx + x]);
      //buffer[y*nx + x] = compute_point(x_value, y_value);
    }
  }
   printf("Ja mandei %d\n",type2);  
/*sen.mtype=500;
   sen.test = -1;
   printf("Ja to a sair\n");
   msgsnd(msqid,&sen,buflen,IPC_NOWAIT);*/
}

/* Output the data contained in the buffer to a Portable Greymap format
   image file.  The parameter "max" should be an upper bound for the
   data values in the buffer.
*/

void output_pgm(char *filename,double *buffer, int nx, int ny, double max) {
  int i;
  FILE *file;
  file = fopen(filename,"w");
  fprintf(file,"P2\n");
  fprintf(file,"%d %d\n",nx,ny);
  fprintf(file,"%d\n",(int)max);
  for (i=0; i<nx*ny; i++) {
    if (!(i%nx)) fprintf(file,"\n");
    fprintf(file,"%d ",(int)buffer[i]);
  }
  fclose(file);
}

int main()
{
    int msqid;
    int msqid2;
          struct recep {
          long mtype;
          long type;
          int ny;
          double yM1;
          double yM2;
       };

     struct recep a;
     size_t len = sizeof(a) - sizeof(long);
     key_t key = 124;
     msqid = msgget(key, 0666);
     if(msgrcv(msqid, &a, len, 300, 0) < 0) {
          perror("Error checking");
     };
    printf("Dados :\n Tipo : %d\n Ny: %d\n,yM1 : %f\n yM2: %f\n",a.type,a.ny,a.yM1,a.yM2);

     type = a.type;
     printf("Vou iniciar o compute");

     key_t key2 = 123;
         msqid2 = msgget(key2,0666);    
     compute(msqid2,1000,a.ny, -1.0, 1.0,a.yM1,a.yM2,a.type);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T05:42:37.940

在您的第一个 switch 语句中，您创建一个孩子做任何事情。父级进入第二个 switch 语句，其中子级立即退出并且父级覆盖有“rec”可执行文件。父级不再执行-它是程序“rec”。您永远不会执行超过一次的循环，因为正在执行的代码此时已经消失了。如果您想要运行多个“rec”实例，您应该`execlp`在子级而不是父级上使用。

**编辑**

有两个系统调用`wait`并`waitpid`提供各种选项。这些中较简单的一个`wait`对于您正在做的事情来说已经并且应该足够了。为您创建的每个子项在父项中定义并增加一个计数器。然后，您等待所有孩子完成，而不是仅仅退出父母。像这样简单的事情就足够了：

```
for (int i = 0; i < counter; i++)
{
    wait(NULL);
} 
```

# personalization - 页面个性化

> ID：10646965
> 
> 赞同：0
> 
> 时间：2012-05-18T05:03:36.157
> 
> 标签：personalization

我的任务是使用内容区域上的拖放小部件创建的页面个性化。我需要根据规则创建细分，以便我可以为特定细分个性化页面。在这里，我将使用规则引擎来创建规则。

我没有获得基于规则创建细分的用户体验。任何人都可以提出他们的想法，以便我加快速度。

谢谢

# javascript - 如何在 JS 文件中使用模板？

> ID：10646968
> 
> 赞同：1
> 
> 时间：2012-05-18T05:03:49.577
> 
> 标签：javascript, jquery, templates

我正在尝试使用 javascript 模板

```
<script type="text/x-tmpl" id="tmpl-demo">
   <h3>{%=o.title%}</h3>
   <p>Released under the
   <a href="{%=o.license.url%}">{%=o.license.name%}</a>.</p>
</script> 
```

问题是 - 我想在我的 JS 文件中包含这个？我将如何使用模板，但在我假设我不能使用`<script>`标签的 JS 文件中？

目前，我做类似的事情：

```
myFunction(id) {
   return "<div>" + id + "</div>";
} 
```

我想将其转换为模板？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T05:07:46.360

你基本上有四种选择：

1.  将其作为字符串包含在 javascript 文件中
2.  通过使用服务器端语言准备 javascript 文件，让您自己轻松一点
3.  使用 jammit 之类的东西，以模板作为变量动态创建 javascript 文件，并包含这些文件。
4.  使用 requirejs 并使用文本插件加载模板。

# jsp - 未添加tomcat cookie

> ID：10646969
> 
> 赞同：0
> 
> 时间：2012-05-18T05:03:53.933
> 
> 标签：jsp, tomcat, cookies, tomcat7

我正在尝试通过以下方式创建 cookie：

```
 Cookie cookie = new Cookie( "User", "deepak" );
    //cookie.setMaxAge( 60 * 60 * 24 ); // 24 hours for expiry
    response.addCookie( cookie ); 
```

我期待下一个请求；我可以找到这个 cookie 和行 yahooo 被打印但它不是。要检索 cookie，我使用以下代码：

```
 Cookie[] cookies2 = request.getCookies();
    for ( Cookie c : cookies2 )
    {
        if ( c.getName() != null && c.getName().endsWith( "User" ) )
        {
            System.out.println( "yahoooo......cookie name is " + c.getName() );
        }
    } 
```

我正在使用简单的tomcat 7.x，jsp。

# c++ - C++ #includes 和类型变量的设计问题

> ID：10646972
> 
> 赞同：1
> 
> 时间：2012-05-18T05:04:25.543
> 
> 标签：c++, macros, include

我将尝试稍微描述一下问题的背景，然后进行一些观察。我没有具体的问题；我只是在寻找建议，主要是。

我有许多 .h 文件，它们对应于用户的测试/演示。每个 .h 文件定义一个类对应一个测试/演示。应该注意的是，所有这些类都继承自一个公共基础。

在我的主文件中，我需要#include 所有这些 .h 文件并标识它们的每个类。然后，对于*n 个*类，将有*n 个*按钮。每个按钮在按下时都会创建它对应的类的一个新实例。释放时，它会删除它。按钮*不能*存储自己的实例化；它们必须在按下和释放时创建和删除；不能同时实例化不同类的两个实例。

这引发了一些问题（并澄清上下文）：

1.  关于特定测试/演示的所有信息都应该在同一个地方（即，测试的名称、测试的文件名和测试的类名都应该在代码的同一区域。最好在同一行。这是只是好的设计。
2.  该类的一个关键信息是它的 C++ 名称。不幸的是，据我所知，此类标记只能写入实例化它的代码中（例如，它不能存储在包含有关每个测试/演示的信息的结构中；我尝试了模板，但后来它是一个列表参数都不同的模板）。

第 1 点和第 2 点让我做了如下形式的宏表达式：

```
#define TESTDEMO_DATA(MACRO)\
    MACRO("<name 1 here>",class1_symbol,"<filename 1 here>")\
    MACRO("<name 2 here>",class2_symbol,"<filename 2 here>")\
    MACRO("<name 3 here>",class3_symbol,"<filename 3 here>")\
    ... 
```

从这里，我可以非常简单地创建按钮（我使用 TESTDEMO_DATA 生成将创建 classn_symbol 实例的函数，然后让每个按钮调用正确的按钮）。

但是现在我被困住了：我显然无法编写一个宏来传递给 TESTDEMO_DATA ，它只会 #include 文件名，就像我可能喜欢的那样，因为这需要一个多通道预处理器。我也不想单独编写#includes，因为这违反了第1点，尽管这是我现在能想到的最好的。

想法？谢谢，
伊恩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T05:50:55.623

从脚本生成代码。

# android - 当我不在android中按下按钮时，如何禁用按下画廊内的按钮？

> ID：10646975
> 
> 赞同：0
> 
> 时间：2012-05-18T05:05:13.017
> 
> 标签：android, android-widget

天！

我有一个包含自定义项目的画廊：

项目示例：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
          android:orientation="vertical"
          android:gravity="center_horizontal"
          android:layout_width="253dp"
          android:layout_height="500dp"
          android:focusable="false">
<ImageButton
    android:id="@+id/play"
    style="@style/somestyle" /> 
```

所有项目都由画廊很好地显示，但是当我尝试滚动按下滚动的项目内部的画廊按钮时，也按下了。如果我按下项目内部的按钮（我没有按下），那会很好。

我怎样才能关闭它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T07:02:26.483

在项目渲染器中使用时，您应该设置更多参数`ImageButton`，以使其响应点击（点击），但按预期工作，而不会复制父级的状态：

```
<ImageButton
    android:id="@+id/play"
    style="@style/somestyle"
    android:focusable="false" 
    android:focusableInTouchMode="false" /> 
```

这可以集成到您的`somestyle`定义中。

# c# - 返回列表 使用 WCF 服务

> ID：10646978
> 
> 赞同：3
> 
> 时间：2012-05-18T05:05:46.320
> 
> 标签：c#, wcf

我上了一堂`Employee`课，每个员工都有一份申请休假的清单。是否可以将列表`AppliedLeave`作为`[DataMember]`WCF 中的一个？

```
[DataContract]
public class Employee
{
    [DataMember]
    public string UserID { get; set; }

    [DataMember]
    public int EmployeeNumber { get; set; }

    [ForeignKey("EmployeeUserID")]
    [DataMember]
    public List<Leave> AppliedLeave
    {
        get { return _appliedLeaves; }
        set { _appliedLeaves = value; }
    }

    private List<Leave> _appliedLeaves = new List<Leave>();
    ...
 } 
```

有没有其他方法可以做到这一点？

感谢您对此事的考虑

**我扩展我的问题**

这是我的假期班：

```
[DataContract]
public class Leave
{

    [Key()]
    [DataMember]
    public Guid LeaveId { get; set; }

    [DataMember]
    public string LeaveType { get; set; }

    [DataMember]
    public DateTime StartDate { get; set; }

    [DataMember]
    public string EmployeeUserID { get; set; }

} 
```

这显示了 ServiceContract ---->

```
[ServiceContract]
public interface IEmployeeService
{
    [OperationContract]
    Employee GetEmployeeByUserId(string userId);

    [OperationContract]
    void AssignSupervisor(string userId, string supervisorUserId);

    [OperationContract]
    void DeleteEmployeeByUserId(string userId);

....
} 
```

在客户端应用程序中，

> EmployeeServiceClient employeeService = new EmployeeServiceClient();
> 
> 员工员工 = employeeService.GetEmployeeByUserId(id);

但是当 Employee 从服务中收集时，它显示 Null 表示叶子，

![在此处输入图像描述](../Images/e0672773e54eee112c0b7abc3846bccd.png)

有人可以帮助我吗？我在这里做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-18T05:11:14.850

是的，可以从 WCF 服务操作返回泛型。

但默认情况下，它们在客户端被强制转换为 Array。这可以在代理生成时进行定制。

[WCF：序列化和泛型](http://jeffbarnes.net/blog/post/2007/05/10/WCF-Serialization-and-Generics.aspx)

此外，您必须使用 KnownTypeAttribute 使用可以解析泛型的所有类型来装饰服务。

[已知类型和通用解析器](http://msdn.microsoft.com/en-us/magazine/gg598929.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-18T05:12:31.327

您可以使用`IList<T>`而不是`List<T>`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-07-04T09:02:12.527

[![我的解决方案的变化](../Images/4e80030783192d1dc3c1ece5bc1ef57f.png)](https://i.stack.imgur.com/WTRY1.jpg)

我还发现我的服务器端列表总是以空指针的形式到达客户端。在为这个问题浏览了很多之后，它让我印象深刻，起初几乎总是被拒绝（“你的代码应该可以工作”）

发现了问题。我已经使用一个“WCF 服务”项目和一个带有生成的服务引用的“Winforms 应用程序”项目配置了我的解决方案。正如预期的那样，Service1 的接口和实现都在 WCF 服务项目中。但是任何列表成员都返回 null。

当我将 IService1.cs =*仅*接口= 放在单独的类库中时，在两侧（使用）引用类库并再次生成服务引用，我的列表确实有效！客户端生成的代码看起来要简单得多。

为此，我不需要任何特殊属性、更改服务引用配置或接口引用。

# jquery - 即使使用 true 参数，jquery clone 也不起作用

> ID：10646985
> 
> 赞同：0
> 
> 时间：2012-05-18T05:06:10.760
> 
> 标签：jquery

我正在使用 jquery 克隆功能，但我真的不明白会发生什么。阅读文档说如果我使用 clone(true) 所有事件处理程序都应该被复制。但这并没有发生。

所以，我尝试做的是一个灯箱，在里面我克隆了缩放效果。[这里是网站](http://desarrollo.cbwagencia.com/talabarteria/category/tejidos/)。

您可以看到一张带有我尝试克隆的缩放效果的大照片，然后如果您单击链接，您将看到灯箱效果，但没有缩放***。***

这是点击功能，这是我所做的功能：

```
jQuery(document).ready(function(){
  var lb = '<div class="lb-cont"></div>'; 
  jQuery(lb).prependTo('body');

jQuery('.post').each(function(){

//code and vars to center the content....

obj.on('click','.vm',function(){

        var bh = jQuery('body').height();
        var contenido = jQuery('.light-cont', obj).clone(true).removeClass('hide');
        jQuery('.lb-cont').width(ww);
        jQuery('.lb-cont').height(bh);
        jQuery('.lb-cont').fadeIn('slow');
        contenido.appendTo('.lb-cont');
        return false;   

        });

)};
)}; 
```

我让它工作的最后一个意图是在我的代码中包含缩放效果，它可以工作，

```
obj.bind('click','.vm',function(){

        var bh = jQuery('body').height();
        var contenido = jQuery('.light-cont', obj).clone(true).removeClass('hide');
        jQuery('.lb-cont').width(ww);
        jQuery('.lb-cont').height(bh);
        jQuery('.lb-cont').fadeIn('slow');
        contenido.appendTo('.lb-cont');

//THIS IS THE ZOOM TRIGGER
jQuery('.imagess').epicZoom({}); 

        return false;   

        }); 
```

但我想知道这是否是正确的方法以及为什么 clone(true) 和 clone(true, true) 不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T08:42:56.127

```
 $(document).ready(function () {
            var lb = '<div class="lb-cont"></div>';
            $(lb).prependTo('body');

            $('.post').each(function () {
                var obj = $(this);
                var verMas = $('.vm', obj)
                //medidas ventana
                var ww = $(window).width();
                var wh = $(window).height();

                //contenedor
                var contenedorInfo = $('.light-cont');
                //medidas del contenedor
                var lbw = contenedorInfo.width();
                var lbh = contenedorInfo.height();

                verMas.live('click', function () {
                    var bh = $('body').height();
                    var contenido = $('.light-cont', obj).clone(true, true).removeClass('hide');

                    $('.lb-cont').width(ww);
                    $('.lb-cont').height(bh);
                    $('.lb-cont').fadeIn('normal');
                    contenido.appendTo('.lb-cont');
                    var cerrar = '<div id="cerrar-cont"><div id="cerrar">X</div></div>';
                    $(cerrar).prependTo('.lb-cont .light-cont');
                    $('.imagess').epicZoom({});
                    var urlss = $('#facebook').attr('st_url');
                    stWidget.addEntry({
                        "service": "facebook",
                        "element": document.getElementById('facebook'),
                        "url": urlss,
                        "title": "sharethis",
                        "type": "large",
                        "text": "ShareThis",
                        "image": "http://www.softicons.com/download/internet-icons/social-superheros-icons-by-iconshock/png/256/sharethis_hulk.png",
                        "summary": "this is description1"
                    });
                    return false;

                });
            });

            $('#cerrar').live('click', function (event) {
                $('.lb-cont').fadeOut('normal');
            });

            function pos_obj(lbw, lbh, ww, wh) {
                contenedorInfo.css({
                    'margin-left': (ww / 2) - (lbw / 2) + 'px',
                    'margin-top': (wh / 2) - (lbh / 2) + 'px'
                });
            };

            pos_obj(lbw, lbh, ww, wh);

            $(window).resize(function () {
                ww = $(window).width();
                wh = $(window).height();
                lbw = contenedorInfo.width();
                lbh = contenedorInfo.height();
                contenedorInfo = $('.light-cont');
                $('.lb-cont').width(ww);
                pos_obj(lbw, lbh, ww, wh);
            });

        }); 
```

在你的 jquery 中两个或三个 '});' 缺少一个';' 不见了……检查一下……

# python - 在python中修改字典时出错

> ID：10646987
> 
> 赞同：0
> 
> 时间：2012-05-18T05:06:24.137
> 
> 标签：python

假设我想创建一个字典，将数字映射到以这些数字结尾的小于 100 的数字，如下所示：

```
d = {}
for i in range(100):
 r = i % 10
 if r in d:
  d[r] = d[r].append(i)
 else:
  d[r] = [i]
print d 
```

首先，当 i 为 20 时， d[r] 显然是 NoneType 当我尝试附加到它时，会引发错误。为什么会这样？其次，我觉得我的方法效率低下，因为检查 r in d 是否没有传播的工作。像这样的东西会更好，我觉得：

```
case(d[r]) of 
   SOME(L) => d[r] = L.append(i)
 | NONE => d[r] = [i] 
```

有没有办法在 python 中使用这种逻辑？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T05:19:23.237

> 首先，当 i 为 20 时， d[r] 显然是 NoneType 当我尝试附加到它时，会引发错误。为什么会这样？

这是因为下面的代码是错误的：

```
d[r] = d[r].append(i) 
```

`.append`修改列表*作为副作用*，并返回`None`。因此，在将列表附加到之后，它会被丢弃并替换为`None`现在重新分配给`d[r]`.

> 有没有办法在 python 中使用这种逻辑？

有多种 hack 可以使用，但这里没有一个是合适的。

相反，解决特定问题：“如果存在则修改字典值，否则创建新值”。这可以细化为“如果不存在则创建一个空的默认值，然后修改现在保证存在的值”。

您可以使用 来做到这一点`.setdefault`，或者更优雅地，您可以将字典替换为`collections.defaultdict`：

```
from collections import defaultdict

d = defaultdict(list)
for i in range(100):
    r = i % 10
    d[r].append(i) 
```

或者您可以解决更具体的问题：“创建具有给定模式的字典”，即将规则或公式应用于输入序列（在这种情况下，输入为`range(100)`：

```
from itertools import groupby

def last_digit(i): return i % 10
d = {k: list(v) for k, v in groupby(sorted(range(100), key=last_digit), last_digit)} 
```

或者，您可以利用`range`需要另一个参数来指定步长的事实来解决更具体的问题：

```
d = {i: range(i, 100, 10) for i in range(10)} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T05:19:52.290

使用 Andrew 的建议`d[r].append(i)`，您会得到想要的答案：

```
In [3]: d
Out[3]: 
{0: [0, 10, 20, 30, 40, 50, 60, 70, 80, 90],
 1: [1, 11, 21, 31, 41, 51, 61, 71, 81, 91],
 2: [2, 12, 22, 32, 42, 52, 62, 72, 82, 92],
 3: [3, 13, 23, 33, 43, 53, 63, 73, 83, 93],
 4: [4, 14, 24, 34, 44, 54, 64, 74, 84, 94],
 5: [5, 15, 25, 35, 45, 55, 65, 75, 85, 95],
 6: [6, 16, 26, 36, 46, 56, 66, 76, 86, 96],
 7: [7, 17, 27, 37, 47, 57, 67, 77, 87, 97],
 8: [8, 18, 28, 38, 48, 58, 68, 78, 88, 98],
 9: [9, 19, 29, 39, 49, 59, 69, 79, 89, 99]} 
```

你可以这样做：

```
In [7]: for onesdigit in range(10):
   ...:     d[onesdigit] = range(onesdigit, 100, 10) 
```