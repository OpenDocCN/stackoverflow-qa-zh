# StackOverflow 问答 12292000-12292999

# svn - 解释“svn diff”输出

> ID：12292006
> 
> 赞同：4
> 
> 时间：2012-09-06T01:59:45.337
> 
> 标签：svn, diff

假设ac文件中没有内容，然后修改文件如下：

```
#include <stdio.h>

int main()
{
    printf("Hello, world\n");
} 
```

执行`svn diff`，我收到了这条消息。

```
--- b.c (revision 1)
+++ b.c (working copy)
@@ -0,0 +1,6 @@
+#include <stdio.h>
+
+int main()
+{
+    printf("Hello, world\n");
+} 
```

在代码中再添加一行：

```
#include <stdio.h>

int main()
{
    printf("Hello, world\n");
    printf("Goodbye, world\n");
} 
```

这是`svn diff`结果：

```
--- b.c (revision 2)
+++ b.c (working copy)
@@ -3,4 +3,5 @@
 int main()
 {
     printf("Hello, world\n");
+    printf("Goodbye, world\n");
 } 
```

我猜对于旧（-）和新（+）版本，逗号后面的数字是显示的总数行。但是，我不确定逗号前的数字。我认为这是改变开始的地方，但对于第一种情况，新（+）版本的数字是 1 而不是 0。

如何解释`svn diff`输出？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-06T02:38:39.893

来自维基百科上的[统一差异格式](http://en.wikipedia.org/wiki/Diff#Unified_format)：

> ```
> @@ -l,s +l,s @@ optional section heading 
> ```
> 
> 大块范围信息包含两个大块范围。原始文件的大块范围前面有一个减号，新文件的范围前面有一个加号。每个块范围的格式为 l,s，其中 l 是起始行号，s 是更改块应用于每个相应文件的行数。在许多版本的 GNU diff 中，每个范围都可以省略逗号和尾随值 s，在这种情况下 s 默认为 1。请注意，唯一真正有趣的值是第一个范围的 l 行号；所有其他值都可以从差异中计算出来。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-06T02:18:17.053

> 我认为这是改变开始的地方，但对于第一种情况，新（+）版本的数字是 1 而不是 0。

行号从 1 开始，因此`1,6`对于 new(+) 文件可以解释为您写的：`1`是起始行号，`6`是显示的行数。

行号的 0 必须是表示文件不存在的特殊情况。这样你就可以区分一个不存在的 old(-) 文件 — `0,0`— 和一个空文件 — `1,0`。

# repository - How to create a truly in memory jacrabbit repository

> ID：12292011
> 
> 赞同：2
> 
> 时间：2012-09-06T02:00:06.757
> 
> 标签：repository, jackrabbit, jcr

I've been trying to figure out if it is possible to have a jackrabbit repository to be run completely in memory.

Whatever I try in order to run the repository fully in memory, I still end up with a repository directory full of files on my disk?

If anyone has figured this out I'd much appreciate if you could explain how to achieve it.

Thanks

Piersyp

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T02:18:43.820

请参阅这篇 4 年以上的博客文章，希望它仍然适用并且很有帮助： http: [//modeshape.wordpress.com/2008/02/22/speedy-unit-testing-with-jackrabbit/](http://modeshape.wordpress.com/2008/02/22/speedy-unit-testing-with-jackrabbit/)

# android - Error in parsing php json url into android list view

> ID：12292014
> 
> 赞同：0
> 
> 时间：2012-09-06T02:00:25.873
> 
> 标签：android, json, android-emulator

I have written the following program to read a json file from server and display its contents in android. But its not working and showing a long list of errors. Somebody please guide me and tell where I went wrong. I am new to android programming.

```
package com.example.json_display;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.net.HttpURLConnection;
import java.net.MalformedURLException;
import java.net.URL;
import java.util.ArrayList;
import android.app.ListActivity;
import android.os.Bundle;
import android.widget.ArrayAdapter; 
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

public class MainActivity extends ListActivity {

@Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        setListAdapter(new ArrayAdapter<String>(this,android.R.layout.simple_list_item_1,this.populate())); 
    }

    private ArrayList<String> populate() {
        ArrayList<String> items = new ArrayList<String>();

        try {
            URL url = new URL("http://www.pooja8bhatt.tk/info.php");
            HttpURLConnection urlConnection =(HttpURLConnection)url.openConnection();
            urlConnection.setRequestMethod("GET");
            urlConnection.connect();

            BufferedReader bufferedReader =new BufferedReader(new InputStreamReader(urlConnection.getInputStream()));

            String next;
            while ((next = bufferedReader.readLine()) != null){
                JSONArray ja = new JSONArray(next);
                System.out.println(next);

                for (int i = 0; i < ja.length(); i++) {
                    JSONObject jo = (JSONObject) ja.get(i);
                    items.add(jo.getString("text"));
                    //System.out.println("inside");
                }
            }
        } catch (MalformedURLException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (JSONException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        return items;
    }
} 
```

logcat is:

```
09-09 18:59:42.777: E/Trace(763): error opening trace file: No such file or directory (2)
09-09 18:59:43.298: D/AndroidRuntime(763): Shutting down VM
09-09 18:59:43.298: W/dalvikvm(763): threadid=1: thread exiting with uncaught exception (group=0x40a13300)
09-09 18:59:43.327: E/AndroidRuntime(763): FATAL EXCEPTION: main
09-09 18:59:43.327: E/AndroidRuntime(763): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.json_display/com.example.json_display.MainActivity}: android.os.NetworkOnMainThreadException
09-09 18:59:43.327: E/AndroidRuntime(763):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2059)
09-09 18:59:43.327: E/AndroidRuntime(763):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
09-09 18:59:43.327: E/AndroidRuntime(763):  at android.app.ActivityThread.access$600(ActivityThread.java:130)
09-09 18:59:43.327: E/AndroidRuntime(763):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
09-09 18:59:43.327: E/AndroidRuntime(763):  at android.os.Handler.dispatchMessage(Handler.java:99)
09-09 18:59:43.327: E/AndroidRuntime(763):  at android.os.Looper.loop(Looper.java:137)
09-09 18:59:43.327: E/AndroidRuntime(763):  at android.app.ActivityThread.main(ActivityThread.java:4745)
09-09 18:59:43.327: E/AndroidRuntime(763):  at java.lang.reflect.Method.invokeNative(Native Method)
09-09 18:59:43.327: E/AndroidRuntime(763):  at java.lang.reflect.Method.invoke(Method.java:511)
09-09 18:59:43.327: E/AndroidRuntime(763):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
09-09 18:59:43.327: E/AndroidRuntime(763):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
09-09 18:59:43.327: E/AndroidRuntime(763):  at dalvik.system.NativeStart.main(Native Method)
09-09 18:59:43.327: E/AndroidRuntime(763): Caused by: android.os.NetworkOnMainThreadException
09-09 18:59:43.327: E/AndroidRuntime(763):  at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1117)
09-09 18:59:43.327: E/AndroidRuntime(763):  at java.net.InetAddress.lookupHostByName(InetAddress.java:385)
09-09 18:59:43.327: E/AndroidRuntime(763):  at java.net.InetAddress.getAllByNameImpl(InetAddress.java:236)
09-09 18:59:43.327: E/AndroidRuntime(763):  at java.net.InetAddress.getAllByName(InetAddress.java:214)
09-09 18:59:43.327: E/AndroidRuntime(763):  at libcore.net.http.HttpConnection.<init>(HttpConnection.java:70)
09-09 18:59:43.327: E/AndroidRuntime(763):  at libcore.net.http.HttpConnection.<init>(HttpConnection.java:50)
09-09 18:59:43.327: E/AndroidRuntime(763):  at libcore.net.http.HttpConnection$Address.connect(HttpConnection.java:341)
09-09 18:59:43.327: E/AndroidRuntime(763):  at libcore.net.http.HttpConnectionPool.get(HttpConnectionPool.java:87)
09-09 18:59:43.327: E/AndroidRuntime(763):  at libcore.net.http.HttpConnection.connect(HttpConnection.java:128)
09-09 18:59:43.327: E/AndroidRuntime(763):  at libcore.net.http.HttpEngine.openSocketConnection(HttpEngine.java:315)
09-09 18:59:43.327: E/AndroidRuntime(763):  at libcore.net.http.HttpEngine.connect(HttpEngine.java:310)
09-09 18:59:43.327: E/AndroidRuntime(763):  at libcore.net.http.HttpEngine.sendSocketRequest(HttpEngine.java:289)
09-09 18:59:43.327: E/AndroidRuntime(763):  at libcore.net.http.HttpEngine.sendRequest(HttpEngine.java:239)
09-09 18:59:43.327: E/AndroidRuntime(763):  at libcore.net.http.HttpURLConnectionImpl.connect(HttpURLConnectionImpl.java:80)
09-09 18:59:43.327: E/AndroidRuntime(763):  at com.example.json_display.MainActivity.populate(MainActivity.java:35)
09-09 18:59:43.327: E/AndroidRuntime(763):  at com.example.json_display.MainActivity.onCreate(MainActivity.java:25)
09-09 18:59:43.327: E/AndroidRuntime(763):  at android.app.Activity.performCreate(Activity.java:5008)
09-09 18:59:43.327: E/AndroidRuntime(763):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
09-09 18:59:43.327: E/AndroidRuntime(763):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
09-09 18:59:43.327: E/AndroidRuntime(763):  ... 11 more
09-09 18:59:45.997: I/Process(763): Sending signal. PID: 763 SIG: 9 
```

I have added the oncreate method in this code which I forgot earlier.

# android - Android APV pdf reader crashes upon opening PDF

> ID：12292018
> 
> 赞同：0
> 
> 时间：2012-09-06T02:01:27.783
> 
> 标签：android, pdf

I followed the instructions on the [wiki](http://code.google.com/p/apv/wiki/Building) for apv-0.3.3: chose pro version with python command, then used the current building method by running scripts/build_native.sh. No problems or errors yet. Then I imported the project into eclipse from the folder pdfview. I had an error saying "The return type is incompatible with View.getRotation()", so I commented the getRotation() function in PagesView.java out. When I ran the project on the emulator, every time I opened a PDF I got the following error in LogCat:

```
09-05 18:46:33.008: E/AndroidRuntime(1652): FATAL EXCEPTION: main
09-05 18:46:33.008: E/AndroidRuntime(1652): java.lang.ExceptionInInitializerError
09-05 18:46:33.008: E/AndroidRuntime(1652):     at cx.hell.android.pdfviewpro.OpenFileActivity.getPDF(OpenFileActivity.java:541)
09-05 18:46:33.008: E/AndroidRuntime(1652):     at cx.hell.android.pdfviewpro.OpenFileActivity.startPDF(OpenFileActivity.java:502)
09-05 18:46:33.008: E/AndroidRuntime(1652):     at cx.hell.android.pdfviewpro.OpenFileActivity.onCreate(OpenFileActivity.java:219)
09-05 18:46:33.008: E/AndroidRuntime(1652):     at android.app.Activity.performCreate(Activity.java:4465)
09-05 18:46:33.008: E/AndroidRuntime(1652):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
09-05 18:46:33.008: E/AndroidRuntime(1652):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
09-05 18:46:33.008: E/AndroidRuntime(1652):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
09-05 18:46:33.008: E/AndroidRuntime(1652):     at android.app.ActivityThread.access$600(ActivityThread.java:123)
09-05 18:46:33.008: E/AndroidRuntime(1652):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
09-05 18:46:33.008: E/AndroidRuntime(1652):     at android.os.Handler.dispatchMessage(Handler.java:99)
09-05 18:46:33.008: E/AndroidRuntime(1652):     at android.os.Looper.loop(Looper.java:137)
09-05 18:46:33.008: E/AndroidRuntime(1652):     at android.app.ActivityThread.main(ActivityThread.java:4424)
09-05 18:46:33.008: E/AndroidRuntime(1652):     at java.lang.reflect.Method.invokeNative(Native Method)
09-05 18:46:33.008: E/AndroidRuntime(1652):     at java.lang.reflect.Method.invoke(Method.java:511)
09-05 18:46:33.008: E/AndroidRuntime(1652):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
09-05 18:46:33.008: E/AndroidRuntime(1652):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
09-05 18:46:33.008: E/AndroidRuntime(1652):     at dalvik.system.NativeStart.main(Native Method)
09-05 18:46:33.008: E/AndroidRuntime(1652): Caused by: java.lang.UnsatisfiedLinkError: Couldn't load pdfview2: findLibrary returned null
09-05 18:46:33.008: E/AndroidRuntime(1652):     at java.lang.Runtime.loadLibrary(Runtime.java:365)
09-05 18:46:33.008: E/AndroidRuntime(1652):     at java.lang.System.loadLibrary(System.java:535)
09-05 18:46:33.008: E/AndroidRuntime(1652):     at cx.hell.android.lib.pdf.PDF.<clinit>(PDF.java:25)
09-05 18:46:33.008: E/AndroidRuntime(1652):     ... 17 more 
```

How can I fix this?

Thanks!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T08:40:09.697

可能有点晚了

尝试移动你`PDF.Java`的包裹`cx.hell.android.lib.pdf`

# playframework - 监控 Play 2.0 应用程序

> ID：12292024
> 
> 赞同：2
> 
> 时间：2012-09-06T02:02:48.420
> 
> 标签：playframework, playframework-2.0

监控生产中运行的 Play 2.0 应用程序的推荐方法是什么？日志文件是获得服务器可见性的唯一方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T14:02:10.350

日志是监控的主要工具。如果你使用 Typesafe 去“Pro”，你可以访问[控制台](http://typesafe.com/products/console)，这有助于监控。

还有[New Relic](http://newrelic.com/product/real-user-monitoring)，它提供了 Heroku 插件（如果您使用该平台）。

# android - Android: What happens when variables passed using intent

> ID：12292025
> 
> 赞同：0
> 
> 时间：2012-09-06T02:02:53.370
> 
> 标签：android, android-intent

I want know i pass a variable via Intent to another activity and that activity changes that variable, will it reflect in original activity without passing back the intent. If answer is no then is it better to use global variable using application then passing intent and getting back data. in my program, i am having round 5+ activities and all of them need to access a list of class objects. any recommendations apart from above

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T02:50:11.573

创建您自己的扩展`Application`来存储您的应用程序的状态并在组成您的应用程序的不同活动之间共享数据。`Application`充当整个应用程序的上下文，Android 保证在您的应用程序中始终只有一个实例。因此，它的工作方式类似于定义您自己的 Singleton，但使用`Application`将允许 Android 控制您共享数据的生命周期并基本上为您进行内存管理。

总结一下：

1.  创建您自己的`Application`.
2.  在清单的应用程序标记中指定该类。

在此之后，您将能够安全地将所有调用`getApplication()`（从`Activity`实例）和`getApplicationContext()`（从任何`Context`实例）的结果转换为您在步骤#1 中定义的子类。这意味着您可以使用应用程序扩展中定义的任何 getter/setter 方法来存储/检索数据。

[阅读此处了解更多详情](https://stackoverflow.com/a/708317/1029225)。

# php - 在用户输入上调用 json_decode 是否安全？

> ID：12292029
> 
> 赞同：32
> 
> 时间：2012-09-06T02:03:50.930
> 
> 标签：php, input-sanitization

我在 cookie 中存储一个 JSON 编码的整数索引数组 => 整数值。

显然 cookie 可以像任何其他用户输入一样轻松操作，所以这是我的 cookie getter 验证：

```
if ($_COOKIE['myCookie']) { //if cookie exists
    $myCookie = json_decode($_COOKIE['myCookie'], true);
    if (!is_array($myCookie)) { //in case decoding fails or bad cookie
        $myCookie = array(); //sets it as empty array
    }
} else { //if cookie doesn't exist, uses an empty array instead
    $myCookie = array();
} 
```

然后在使用任何值之前，我检查它是否存在于数组中并针对白名单值列表进行测试——这部分看起来很安全，但我将其发布为验证的一部分：

```
if (!empty($myCookie[$index])) { //checks if index exists and is truthy
    if ($myCookie[$index] !== 1 && $myCookie[$index] !== 2) { //values whitelist
        die('Hacking attempt through cookies exploit.');
    }
    //use the cookie data now
} 
```

回到问题，**直接在cookie上****调用是否安全？`json_decode`**用户可以操纵 cookie 来运行任意代码吗？

到目前为止，我一直在阅读关于 SO 的许多主题，我发现它`unserialize()`是不安全的，因为它调用构造函数，但`json_decode`在技术上是安全的。我已经阅读了他们的 php.net 页面，但这些页面并没有直接解决安全问题。

我的插件很快就会进入实时测试版，所以我想知道`json_decode`直接调用 cookie 是否足够安全，或者我是否应该在调用`json_decode`. 我也可以运行 a `preg_match`，但是当我在使用它们之前针对值的白名单进行测试时，应该没有问题，除非`json_decode`以某种方式运行任意代码，它不会，对吧？

我知道如果它不是有效的 JSON，它会`json_encode`返回`NULL`，但我想知道这是否是正确的方法，或者**我应该在调用之前添加某种验证`json_decode`？**

抱歉，如果这是一个太愚蠢的问题，我只是对 cookie/JSON 的经验很少，并且不希望成为我们服务器数据库丢失的罪魁祸首。任何帮助/信息表示赞赏。`=]`

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-09-06T02:18:20.107

Using `json_decode` to decode the user input directly has no security problem.

It is just string parsing, won't do any string eval.

`json_decode` in php is like `JSON.parse` in javascript, and both of them could be used directly on the user input, they are safe at the decoding time.

But after being decoded, you have to validate the data for your requirement.

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-06T02:10:23.627

只要`json_decode`正确实现，在没有额外预处理的情况下使用应该是安全的（事实上，这可能会更糟，因为您的预处理器中可能有错误）。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-06T02:12:03.530

json_decode will fail if the data is not in json format and otherwise will return an nice array for you to work with. Like Itay said if somebody can exploit this he almost deserves to get in. json_decode doesnt suffer from the risk of sql so I'd say you're fine doing this.

Just make sure you clean anything (or white list, like you already are) before incorporating it in a query.

# javascript - 如何在 JavaScript 中创建对象时使用变量的值

> ID：12292035
> 
> 赞同：2
> 
> 时间：2012-09-06T02:04:30.993
> 
> 标签：javascript

我有一个对象：

```
var obj = {fields : []}; 
```

还有一个变量：

```
var x = "property_name"; 
```

现在，如何使用变量 x 中的值作为要推入数组的对象的属性名称？

我尝试了类似下面的方法，但它`x`从字面上理解并将其用作属性名称。我要使用的是存储在变量中的值`x`。那可能吗？

```
obj.fields.push({x : 'im a value'}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T02:06:05.297

您不能为此目的使用对象文字语法。但是，您*可以*创建一个新对象，然后使用`[]`语法 - 请记住，`obj.xyz`等效于`obj['xyz']`- 但正如您在后者中的引号中看到的那样，您可以在那里使用*表达式*- 例如变量：

```
var x = "property_name";
var obj = {};
obj[x] = 'value';
obj.fields.push(obj); 
```

# iphone - iOS 设备的网页设计

> ID：12292037
> 
> 赞同：1
> 
> 时间：2012-09-06T02:04:45.907
> 
> 标签：iphone, ios, ipad, design-patterns, web

我已经学习了一些有关开发 iOS 应用程序的基础知识，并且很想了解更多信息。我最近遇到了网站在移动设备上的显示方式，并且很想知道是否有特定的设计模式/方法支持它。我尝试在移动设备上打开 walmart.com，它显示的网站与屏幕上的显示相同，但​​如果我打开 homedepot.com；我在移动设备上获得的视图是经过优化的视图。

这是如何运作的？如何为不同的设备（即桌面屏幕、ipad 或 iphone）获得相同/优化的显示？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T02:23:54.277

有几种方法：

*   使用[浏览器代理信息](https://stackoverflow.com/questions/2153877/what-is-the-ipad-user-agent)并为该客户端提供自定义文件（html、css、js 等）（通常不推荐）
*   使用[浏览器代理或屏幕宽度](http://css-tricks.com/snippets/javascript/redirect-mobile-devices/)重定向到特定于移动设备的站点（很多站点都这样做；相对容易）
*   做[响应式设计](http://www.alistapart.com/articles/responsive-web-design/)，它本质上使用屏幕宽度和 css 来自定义网站的显示，这也有一个很好的副作用，可以响应桌面浏览器的窗口调整大小。但是这种方法比移动特定站点需要更多的工作。

上述任何方法通常都需要一些特定于移动设备的东西，例如[元标记](https://developer.mozilla.org/en-US/docs/Mobile/Viewport_meta_tag)：

```
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"> 
```

这告诉移动浏览器将页面宽度设置为屏幕宽度，并防止缩放。

对于响应式设计，您可以使用[320 及以上](http://stuffandnonsense.co.uk/projects/320andup/)的 CSS 框架来提供帮助。它也是一个很好的参考，可以了解如何完成各种移动设备。

对于特定于移动设备的站点，[jquery-mobile 之](http://jquerymobile.com/)类的东西可以提供很大帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T02:22:57.703

您可以检测加载页面的浏览器类型并重定向到针对移动设备优化的 URL。您可能应该让移动用户可以访问该网站的移动优化版和完整版（请参阅：www.progressive.com）。

谷歌诸如“iphone优化网站教程”之类的东西来学习如何。

# android - 进度条 ICS

> ID：12292038
> 
> 赞同：1
> 
> 时间：2012-09-06T02:04:55.813
> 
> 标签：android, progress-bar, android-4.0-ice-cream-sandwich

我有一个从网络填充的列表视图的活动。在加载数据时，我想显示一个进度对话框而不是列表视图。

我的布局：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <ProgressBar
        android:id="@+android:id/progress_large"
        style="?android:attr/progressBarStyleLarge"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center" />

    <ExpandableListView
        android:id="@+id/listview"
        android:layout_width="match_parent"
        android:layout_height="match_parent" />

</RelativeLayout> 
```

我这样做是为了让进度条显示出来（这很有效）：

```
setProgressBarVisibility(true); 
```

但是，一旦填充了列表视图（使用 AsyncTask），我希望进度条消失，但事实并非如此，它保持在列表视图上方。

这是我在 AsyncTask 中所做的：

```
 @Override
    protected void onPostExecute(Void result) {
        setProgressBarVisibility(false);

        //... and some code to update UI
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T02:20:57.563

在您的代码中执行此操作，

```
@Override
    protected void onPostExecute(Void result) {
         //progressBar.dismiss(); //this dismisses the progressbar
              progressBar.setVisibility(ProgressBar.GONE)

        //... and some code to update UI
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T02:35:14.750

`ProgressBar`您可以在 the 的方法中创建 a`ProgressDialog`并在`preExecute`方法中`AsyncTask`关闭 the `ProgressDialog`，而不是在布局中使用 a `postExecute`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T03:41:17.663

试试这个：

声明对话框：ProgressDialog 对话框；

在 onPostExecute 中： dialog.dismiss();

希望能帮助到你..

# java - .equals() 方法来检测重复的数组元素（尝试过@Override）

> ID：12292039
> 
> 赞同：0
> 
> 时间：2012-09-06T02:04:50.110
> 
> 标签：java

我有一个简单的循环来检查任何重复的结果，其中 studresults 保存我的 results ， result 是给方法的对象结果， r 是数组中的当前对象。我在整个程序中都成功地使用了这种方法，尽管它在这种情况下不起作用，即使当我调试 result 和 r 时，它们完全相同，有人知道为什么会这样吗？我已经按照其他答案中的建议尝试了@Override，但无济于事。

我试图通过抛出异常来停止重复的数组元素。

```
for(Result r : studresults)
   {
     if(r.equals(result)) 
       {
           return false;
       }
   } 
```

编辑好 这里是整个班级>

```
package ams.model;

import java.util.ArrayList;
import java.util.Arrays;

import ams.model.exception.EnrollmentException;

public abstract class AbstractStudent implements Student {
private int studentId;
private String studentName;
private ArrayList<Course> studcourses = new ArrayList<Course>();
private ArrayList<Result> studresults = new ArrayList<Result>();

public AbstractStudent(int studentId, String studentName) {
    this.studentId = studentId;
    this.studentName = studentName;

}

public String getFullName() {

    return studentName;
}

public int getStudentId() {

    return studentId;
}

public Result[] getResults() {  

    Result[] res = studresults.toArray(new Result[0]);
    if(res.length > 0 )
    {
    return res;
    }
    return null;

}

public boolean addResult(Result result)
{
    for(Result r : studresults)
    {
        if(r.equals(result))
        {
                return false;
        }
    }

    studresults.add(result);
    return true;
}

public void enrollIntoCourse(Course c)
{
    //for re-enrollment
    if(studcourses.contains(c))
    {
        studcourses.remove(c);
        studresults.clear();
    }
    studcourses.add(c);
}

public void withdrawFromCourse(Course c) throws EnrollmentException
{
    if(studcourses.size() > 0)
    {
        studcourses.remove(c);
    }
    else
        throw new EnrollmentException();
}
public Course[] getCurrentEnrolment() 
{
    return studcourses.toArray(new Course[0]);
}

public abstract int calculateCurrentLoad();

public int calculateCareerPoints() {
    // TODO Auto-generated method stub
    return 0;
}

public String toString()
{
    return studentId + ":" + studentName +":" + calculateCurrentLoad();
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T02:12:13.903

你已经覆盖了`hashCode`方法`Result`吗？
如果您 override `equals`，您还必须重写该`hashCode`方法以允许您为相似的对象（具有相同值但实际上不同的对象实例的对象）返回相同的哈希码。

我认为哈希码的默认实现将为不同的对象实例返回不同的值，即使它们具有相同的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T07:06:15.233

相反，我转换为toString，然后进行比较，它可以工作？？？

让我觉得以前有些东西有点不一样？

新方法

```
public boolean addResult(Result r)
{
    for (Result s : studresults)
    {
         String sr1 = s.toString();
         String sr2 = r.toString();
         if(sr1.equals(sr2))
         {
             return false;
         }
    } 
```

# npapi - NPAPI 插件 Windows DLL 依赖项

> ID：12292042
> 
> 赞同：0
> 
> 时间：2012-09-06T02:05:20.213
> 
> 标签：npapi

我创建了一个 NPAPI 插件，并将其打包在 Chrome 扩展程序中。我能够在 Windows 2003 和 Windows XP 64 位的 Chrome 中成功安装和使用该扩展程序。

但是，当我在 Windows 7（32 位或 64 位）或 Windows XP 32 位上安装插件时，我无法在 Chrome 中使用该扩展程序。chrome 日志显示错误消息“无法初始化插件”。

我在所有环境中都运行了依赖项walker，看起来在扩展不起作用的环境中，它们都有共同的警告消息“警告：由于缺少导出功能，至少一个模块具有未解析的导入在延迟负载相关模块中。” （有问题的 DLL 是 SHLWAPI.DLL、IEFRAME.DLL 和 MPR.DLL）而扩展工作的环境没有此警告（尽管其中一个确实警告未找到延迟加载依赖模块）。

这些 DLL 依赖项是否应该在不同版本的 Windows 中有所不同？解决它们的最佳方法是什么？或者插件故障很可能与这些 DLL 依赖项无关？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T19:28:13.317

通过使用“/MT”编译器标志而不是默认的“/MD”编译二进制文件来重建您的项目而不依赖于运行时库。

如果您依赖开源代码，请确保使用“/MT”标志重新构建每个项目，否则您将永远追逐这些运行时 DLL 问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T15:41:00.887

shlwapi 和 ieframe 可能与您的问题无关；看到这些错误是一个常见问题。不确定mpr.dll，没见过那个。

您可以尝试使用[FireBreath](http://firebreath.org)插件并比较依赖项walker 结果，看看您是否可以发现任何您需要firebreath 不需要的东西，因为firebreath 没有外部DLL 依赖项。

# objective-c - 对目标 C 设置淡入淡出效果

> ID：12292044
> 
> 赞同：4
> 
> 时间：2012-09-06T02:06:06.873
> 
> 标签：objective-c, animation, background

我希望这是我的 Ipad 应用程序的背景。我正在目标 C 中构建所有内容（本机应用程序）

我需要一点帮助来弄清楚如何为图像上的每个三角形（叠加层）设置动画，使其相互独立地淡入和淡出，目标是制作一个恒定的微光效果，这样图像就不会感觉那么僵硬。我必须独立地为每个三角形设置动画吗？有没有我应该看的算法，所以它看起来有点随机，但不是。

这是背景图片

![在此处输入图像描述](../Images/3ce6afc6bb2dc48c5156ec01e0213c22.png)

我需要一些关于从哪里开始以及如何解决这个问题的指导，我们将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T02:40:28.647

**a)** 我的建议是使用 iOS 4 中引入的 UIViewAnimationWithBlocks。如果您对块有扎实的了解，它们会非常有用。这是我在短短 5 分钟内创建的示例来说明：

```
typedef void(^FadeInOutBlock)(void);

@interface PMViewController ()
@property (nonatomic, copy) FadeInOutBlock fadeInOutBlock;
@end 
```

在这里，我们声明了一个 typedef 来避免我们再次使用块语法。我们还创建了一个属性来保存动画块。

```
@implementation PMViewController
@synthesize myView;

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.

    __block PMViewController *_self = self;

    self.fadeInOutBlock = ^{

        [UIView animateWithDuration:0.5f animations:^{
            // fade out effect
            _self.myView.alpha = 0.0f;
        } completion:^(BOOL success){
            [UIView animateWithDuration:0.5f animations:^{
                // fade in effect
                _self.myView.alpha = 1.0f;
            } completion:^(BOOL success){
                // recursively fire a new animation
                if (_self.fadeInOutBlock)
                    _self.fadeInOutBlock();
            }];
        }];
    };
} 
```

我们在动画中创建动画。您从淡出开始，myView 的 alpha 将在 0.5f 秒内降低到 0.0f。完成后，将触发第二个动画，将 myView 的 alpha 恢复到 1.0f，最后再次触发第一个动画。（动画）

```
- (void)viewDidAppear:(BOOL)animated
{
    [super viewDidAppear:animated];

    if (self.fadeInOutBlock)
        self.fadeInOutBlock();
}

@end 
```

最后，in view 确实出现了，您第一次将其关闭。

**b)**

现在，对于您提到的闪烁动画，我建议您将每个三角形分成它自己的 UIView 并使用上面的技术，使用不同的持续时间和 alpha。

如果您有许多小的 UIView，请将它们组合成一个更大的 UIView（通过使用 addSubview 方法）并将动画应用于那些“容器”UIView。

例如，您可以有四个独立的 UIView 容器，它们有一堆独立的 UIView 作为它们的子级。然后，您可以创建四个块动画，每个容器一个，然后将动画应用到它们。我敢打赌，你将能够创造出非常好的效果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T02:12:43.030

您可以在没有任何特殊库的情况下执行此操作。所以你需要创建一个`UIView`alpha 为 0 的黑色。然后创建一个`NSTimer`增加 alpha 的`UIView`.

# java - 如何保存和加载android图像

> ID：12292045
> 
> 赞同：0
> 
> 时间：2012-09-06T02:06:13.067
> 
> 标签：java, android, fileinputstream, fileoutputstream

场景如下：

如果在本地路径找到图像文件，则将使用它，否则将首先下载图像文件。图像由其 id 和名称标记。

提前谢谢，对不起，我的句子太短了，因为英语很少。

```
FileOutputStream fos;
FileInputStream fis; 
        try {
            fis = openFileInput(Integer.toString(id)+"_"+getName());
        } catch (FileNotFoundException e1) {
            e1.printStackTrace();
        }
        // exist
        if(fis!=null){
            this.setImage(BitmapFactory.decodeStream(fis));
            try {
                fis.close();
            } catch (IOException e) {
                e.printStackTrace();
            }
        // not exist
        }else{
            this.setImage(getBITMAP.BitmapUrl(image));
            try {
                fos = openFileOutput(Integer.toString(id)+"_"+getName(), Context.MODE_PRIVATE);
            } catch (FileNotFoundException e) {
                e.printStackTrace();
            }
            getImage().compress(Bitmap.CompressFormat.PNG, 100, fos);
            try {
                fos.close();
            } catch (IOException e) {
                e.printStackTrace();
            }
        } 
```

PD：我忘了说错误出现应用程序崩溃：`The application ****** has stopped unexpectedly. Please try again.`

这是 LogCat：

```
09-06 09:03:14.253: D/dalvikvm(472): GC freed 404 objects / 23688 bytes in 54ms
09-06 09:03:15.214: I/global(472): Default buffer size used in BufferedReader constructor. It would be better to be explicit if an 8k-char buffer is required.
09-06 09:03:15.233: D/AndroidRuntime(472): Shutting down VM
09-06 09:03:15.233: W/dalvikvm(472): threadid=3: thread exiting with uncaught exception (group=0x4001b188)
09-06 09:03:15.233: E/AndroidRuntime(472): Uncaught handler: thread main exiting due to uncaught exception
09-06 09:03:15.243: E/AndroidRuntime(472): java.lang.RuntimeException: Unable to start activity ComponentInfo{match.now.play/match.now.play.MatchNowGames}: java.lang.NullPointerException
09-06 09:03:15.243: E/AndroidRuntime(472):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2496)
09-06 09:03:15.243: E/AndroidRuntime(472):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2512)
09-06 09:03:15.243: E/AndroidRuntime(472):  at android.app.ActivityThread.access$2200(ActivityThread.java:119)
09-06 09:03:15.243: E/AndroidRuntime(472):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1863)
09-06 09:03:15.243: E/AndroidRuntime(472):  at android.os.Handler.dispatchMessage(Handler.java:99)
09-06 09:03:15.243: E/AndroidRuntime(472):  at android.os.Looper.loop(Looper.java:123)
09-06 09:03:15.243: E/AndroidRuntime(472):  at android.app.ActivityThread.main(ActivityThread.java:4363)
09-06 09:03:15.243: E/AndroidRuntime(472):  at java.lang.reflect.Method.invokeNative(Native Method)
09-06 09:03:15.243: E/AndroidRuntime(472):  at java.lang.reflect.Method.invoke(Method.java:521)
09-06 09:03:15.243: E/AndroidRuntime(472):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
09-06 09:03:15.243: E/AndroidRuntime(472):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
09-06 09:03:15.243: E/AndroidRuntime(472):  at dalvik.system.NativeStart.main(Native Method)
09-06 09:03:15.243: E/AndroidRuntime(472): Caused by: java.lang.NullPointerException
09-06 09:03:15.243: E/AndroidRuntime(472):  at android.content.ContextWrapper.openFileInput(ContextWrapper.java:152)
09-06 09:03:15.243: E/AndroidRuntime(472):  at match.now.play.functions.Game.<init>(Game.java:32)
09-06 09:03:15.243: E/AndroidRuntime(472):  at match.now.play.functions.Games.addGames(Games.java:43)
09-06 09:03:15.243: E/AndroidRuntime(472):  at match.now.play.MatchNowGames.onCreate(MatchNowGames.java:52)
09-06 09:03:15.243: E/AndroidRuntime(472):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
09-06 09:03:15.243: E/AndroidRuntime(472):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2459)
09-06 09:03:15.243: E/AndroidRuntime(472):  ... 11 more
09-06 09:03:15.263: I/dalvikvm(472): threadid=7: reacting to signal 3
09-06 09:03:15.273: I/dalvikvm(472): Wrote stack trace to '/data/anr/traces.txt'
09-06 09:03:17.324: I/Process(472): Sending signal. PID: 472 SIG: 9
09-06 09:03:17.873: D/dalvikvm(478): GC freed 631 objects / 50272 bytes in 64ms
09-06 09:03:18.053: D/dalvikvm(478): GC freed 65 objects / 2544 bytes in 53ms
09-06 09:03:18.183: D/dalvikvm(478): GC freed 131 objects / 6072 bytes in 57ms 
```

安卓清单：

```
 <uses-sdk android:minSdkVersion="7" />
    <uses-permission android:name="android.permission.WRITE_INTERNAL_STORAGE" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
    <uses-permission android:name="android.permission.INTERNET" /> 
    <application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:name=".functions.App" >
        <activity
            android:theme="@android:style/Theme.NoTitleBar"
            android:name=".MatchNow"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <activity android:name="MatchNowRegister" android:theme="@android:style/Theme.NoTitleBar">
        <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter></activity>
        <activity android:name="MatchNowTerms" android:theme="@android:style/Theme.NoTitleBar">
        <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity android:name="MatchNowMain" android:theme="@android:style/Theme.NoTitleBar">
        <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity android:name="MatchNowGames" android:theme="@android:style/Theme.NoTitleBar">
        <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

我认为android清单没有错，因为添加了活动。我认为问题出在openFile ...

通过使用另一个类似的代码解决了这个问题。如果有人也有用：

```
public static Bitmap saveImage(String url, String fichero){
    Bitmap imageAux = null;
    OutputStream outStream = null;
    extStorageDirectory = Environment.getExternalStorageDirectory().toString();
    File file = new File(extStorageDirectory, fichero);
    try {           
        // Exist
        if(file.exists()){
            imageAux=BitmapFactory.decodeFile("/sdcard/"+fichero);
        // No exist
        }else{
            outStream = new FileOutputStream(file);
            imageAux=getBITMAP.BitmapUrl(url);
            imageAux.compress(Bitmap.CompressFormat.PNG, 100, outStream);
            outStream.flush();
            outStream.close();
        }
    } catch (FileNotFoundException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    return imageAux;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T12:08:25.563

您在调用 openFileInput() 的某处有一个空指针。您应该检查 getName() 返回的内容（我的赌注）以及*id*。

# ruby-on-rails - Rails 应用程序在 Heroku 中崩溃

> ID：12292046
> 
> 赞同：0
> 
> 时间：2012-09-06T02:06:17.327
> 
> 标签：ruby-on-rails, ruby, heroku

我今天一直在试图弄清楚为什么我的 rails 应用程序在 heroku 上崩溃了。

这是heroku日志的输出：

```
2012-09-06T01:33:43+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/builder.rb:51:in `initialize'
2012-09-06T01:33:43+00:00 app[web.1]:   from /app/config.ru:1:in `<main>'
2012-09-06T01:33:43+00:00 app[web.1]:   from /app/config.ru:1:in `new'
2012-09-06T01:33:43+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/builder.rb:40:in `eval'
2012-09-06T01:33:43+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/server.rb:200:in `app'
2012-09-06T01:33:43+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/builder.rb:40:in `parse_file'
2012-09-06T01:33:43+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/commands/server.rb:46:in `app'
2012-09-06T01:33:43+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/server.rb:301:in `wrapped_app'
2012-09-06T01:33:43+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/server.rb:252:in `start'
2012-09-06T01:33:43+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/commands/server.rb:70:in `start'
2012-09-06T01:33:43+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/commands.rb:55:in `block in <top (required)>'
2012-09-06T01:33:43+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/commands.rb:50:in `tap'
2012-09-06T01:33:43+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/commands.rb:50:in `<top (required)>'
2012-09-06T01:33:43+00:00 app[web.1]:   from script/rails:6:in `require'
2012-09-06T01:33:43+00:00 app[web.1]:   from script/rails:6:in `<main>'
2012-09-06T01:33:44+00:00 heroku[web.1]: Process exited with status 1
2012-09-06T01:33:44+00:00 heroku[web.1]: State changed from starting to crashed
2012-09-06T01:33:46+00:00 heroku[router]: Error H10 (App crashed) -> GET whispering-atoll-2029.herokuapp.com/ dyno= queue= wait= service= status=503 bytes=
2012-09-06T01:33:46+00:00 heroku[router]: Error H10 (App crashed) -> GET whispering-atoll-2029.herokuapp.com/favicon.ico dyno= queue= wait= service= status=503 bytes=
2012-09-06T01:41:17+00:00 heroku[slugc]: Slug compilation started
2012-09-06T01:41:49+00:00 heroku[api]: Release v10 created by jared@xoorath.com
2012-09-06T01:41:49+00:00 heroku[api]: Deploy 1c4a107 by jared@xoorath.com
2012-09-06T01:41:49+00:00 heroku[web.1]: State changed from crashed to starting
2012-09-06T01:41:50+00:00 heroku[slugc]: Slug compilation finished
2012-09-06T01:41:55+00:00 heroku[web.1]: Starting process with command `bundle exec rails server -p 51538`
2012-09-06T01:42:11+00:00 app[web.1]: DEPRECATION WARNING: You have Rails 2.3-style plugins in vendor/plugins! Support for these plugins will be removed in Rails 4.0\. Move them out and bundle them in your Gemfile, or fold them in to your app as lib/myplugin/* and config/initializers/myplugin.rb. See the release notes for more on this: http://weblog.rubyonrails.org/2012/1/4/rails-3-2-0-rc2-has-been-released. (called from <top (required)> at /app/config/environment.rb:5)
2012-09-06T01:42:11+00:00 app[web.1]: DEPRECATION WARNING: You have Rails 2.3-style plugins in vendor/plugins! Support for these plugins will be removed in Rails 4.0\. Move them out and bundle them in your Gemfile, or fold them in to your app as lib/myplugin/* and config/initializers/myplugin.rb. See the release notes for more on this: http://weblog.rubyonrails.org/2012/1/4/rails-3-2-0-rc2-has-been-released. (called from <top (required)> at /app/config/environment.rb:5)
2012-09-06T01:42:11+00:00 app[web.1]: DEPRECATION WARNING: You have Rails 2.3-style plugins in vendor/plugins! Support for these plugins will be removed in Rails 4.0\. Move them out and bundle them in your Gemfile, or fold them in to your app as lib/myplugin/* and config/initializers/myplugin.rb. See the release notes for more on this: http://weblog.rubyonrails.org/2012/1/4/rails-3-2-0-rc2-has-been-released. (called from <top (required)> at /app/config/environment.rb:5)
2012-09-06T01:42:14+00:00 app[web.1]: => Booting WEBrick
2012-09-06T01:42:14+00:00 app[web.1]: => Rails 3.2.8 application starting in production on http://0.0.0.0:51538
2012-09-06T01:42:14+00:00 app[web.1]: => Ctrl-C to shutdown server
2012-09-06T01:42:14+00:00 app[web.1]: => Call with -d to detach
2012-09-06T01:42:14+00:00 app[web.1]: Connecting to database specified by DATABASE_URL
2012-09-06T01:42:14+00:00 app[web.1]: Exiting
2012-09-06T01:42:14+00:00 app[web.1]: /app/vendor/bundle/ruby/1.9.1/gems/bundler-1.2.0/lib/bundler/rubygems_integration.rb:147:in `block in replace_gem': Please install the postgresql adapter: `gem install activerecord-postgresql-adapter` (pg is not part of the bundle. Add it to Gemfile.) (LoadError)
2012-09-06T01:42:14+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.8/lib/active_record/connection_adapters/postgresql_adapter.rb:7:in `<top (required)>'
2012-09-06T01:42:14+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:251:in `require'
2012-09-06T01:42:14+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:251:in `block in require'
2012-09-06T01:42:14+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:236:in `load_dependency'
2012-09-06T01:42:14+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:251:in `require'
2012-09-06T01:42:14+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.8/lib/active_record/connection_adapters/abstract/connection_specification.rb:50:in `resolve_hash_connection'
2012-09-06T01:42:14+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.8/lib/active_record/connection_adapters/abstract/connection_specification.rb:41:in `resolve_string_connection'
2012-09-06T01:42:14+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.8/lib/active_record/connection_adapters/abstract/connection_specification.rb:27:in `spec'
2012-09-06T01:42:14+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.8/lib/active_record/connection_adapters/abstract/connection_specification.rb:129:in `establish_connection'
2012-09-06T01:42:14+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.8/lib/active_support/lazy_load_hooks.rb:36:in `execute_hook'
2012-09-06T01:42:14+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.8/lib/active_record/railtie.rb:82:in `block (2 levels) in <class:Railtie>'
2012-09-06T01:42:14+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.8/lib/active_support/lazy_load_hooks.rb:36:in `instance_eval'
2012-09-06T01:42:14+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.8/lib/active_support/lazy_load_hooks.rb:43:in `block in run_load_hooks'
2012-09-06T01:42:14+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.8/lib/active_support/lazy_load_hooks.rb:42:in `run_load_hooks'
2012-09-06T01:42:14+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.8/lib/active_support/lazy_load_hooks.rb:42:in `each'
2012-09-06T01:42:14+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.8/lib/active_record/base.rb:721:in `<top (required)>'
2012-09-06T01:42:14+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/devise-2.1.2/lib/devise/orm/active_record.rb:3:in `<top (required)>'
2012-09-06T01:42:14+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:251:in `require'
2012-09-06T01:42:14+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:251:in `block in require'
2012-09-06T01:42:14+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:236:in `load_dependency'
2012-09-06T01:42:14+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:251:in `require'
2012-09-06T01:42:14+00:00 app[web.1]:   from /app/config/initializers/devise.rb:16:in `block in <top (required)>'
2012-09-06T01:42:14+00:00 app[web.1]:   from /app/config/initializers/devise.rb:3:in `<top (required)>'
2012-09-06T01:42:14+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/devise-2.1.2/lib/devise.rb:247:in `setup'
2012-09-06T01:42:14+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:245:in `load'
2012-09-06T01:42:14+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:245:in `block in load'
2012-09-06T01:42:14+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:236:in `load_dependency'
2012-09-06T01:42:14+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:245:in `load'
2012-09-06T01:42:14+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/engine.rb:588:in `block (2 levels) in <class:Engine>'
2012-09-06T01:42:14+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/engine.rb:587:in `each'
2012-09-06T01:42:14+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/engine.rb:587:in `block in <class:Engine>'
2012-09-06T01:42:14+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/initializable.rb:30:in `run'
2012-09-06T01:42:14+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/initializable.rb:30:in `instance_exec'
2012-09-06T01:42:14+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/initializable.rb:54:in `each'
2012-09-06T01:42:14+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/initializable.rb:55:in `block in run_initializers'
2012-09-06T01:42:14+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/initializable.rb:54:in `run_initializers'
2012-09-06T01:42:14+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/application.rb:136:in `initialize!'
2012-09-06T01:42:14+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/railtie/configurable.rb:30:in `method_missing'
2012-09-06T01:42:14+00:00 app[web.1]:   from /app/config/environment.rb:5:in `<top (required)>'
2012-09-06T01:42:14+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:251:in `require'
2012-09-06T01:42:14+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:251:in `block in require'
2012-09-06T01:42:14+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:236:in `load_dependency'
2012-09-06T01:42:14+00:00 app[web.1]:   from /app/config.ru:4:in `block in <main>'
2012-09-06T01:42:14+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:251:in `require'
2012-09-06T01:42:14+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/builder.rb:51:in `instance_eval'
2012-09-06T01:42:14+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/builder.rb:51:in `initialize'
2012-09-06T01:42:14+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/builder.rb:40:in `eval'
2012-09-06T01:42:14+00:00 app[web.1]:   from /app/config.ru:1:in `<main>'
2012-09-06T01:42:14+00:00 app[web.1]:   from /app/config.ru:1:in `new'
2012-09-06T01:42:14+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/builder.rb:40:in `parse_file'
2012-09-06T01:42:14+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/server.rb:200:in `app'
2012-09-06T01:42:14+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/server.rb:252:in `start'
2012-09-06T01:42:14+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/commands/server.rb:46:in `app'
2012-09-06T01:42:14+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/server.rb:301:in `wrapped_app'
2012-09-06T01:42:14+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/commands/server.rb:70:in `start'
2012-09-06T01:42:14+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/commands.rb:55:in `block in <top (required)>'
2012-09-06T01:42:14+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/commands.rb:50:in `tap'
2012-09-06T01:42:14+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/commands.rb:50:in `<top (required)>'
2012-09-06T01:42:14+00:00 app[web.1]:   from script/rails:6:in `require'
2012-09-06T01:42:14+00:00 app[web.1]:   from script/rails:6:in `<main>'
2012-09-06T01:42:16+00:00 heroku[web.1]: Process exited with status 1
2012-09-06T01:42:16+00:00 heroku[web.1]: State changed from starting to crashed
2012-09-06T01:42:17+00:00 heroku[router]: Error H10 (App crashed) -> GET whispering-atoll-2029.herokuapp.com/ dyno= queue= wait= service= status=503 bytes=
2012-09-06T01:42:17+00:00 heroku[router]: Error H10 (App crashed) -> GET whispering-atoll-2029.herokuapp.com/favicon.ico dyno= queue= wait= service= status=503 bytes=
2012-09-06T01:42:19+00:00 heroku[router]: Error H10 (App crashed) -> GET whispering-atoll-2029.herokuapp.com/ dyno= queue= wait= service= status=503 bytes=
2012-09-06T01:42:19+00:00 heroku[router]: Error H10 (App crashed) -> GET whispering-atoll-2029.herokuapp.com/favicon.ico dyno= queue= wait= service= status=503 bytes= 
```

这是我的宝石文件：

```
source 'https://rubygems.org'
gem 'rails', '3.2.8'

#gem 'thin', '1.2.8'
gem 'devise'
group :development, :test do
  gem 'sqlite3-ruby', :require => 'sqlite3'
end
group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'
  gem 'uglifier', '>= 1.0.3'
end
gem 'jquery-rails'
gem "compass-rails", ">= 1.0.3", :group => :assets
gem "zurb-foundation", ">= 3.0.9", :group => :assets
gem "simple_form", ">= 2.0.2" 
```

这是我的[回购](http://github.com/xoorath/TimeTracker)

我正在使用 devise、foundation.zurb 和其他一些东西。这是我的第一个 Rails 应用程序，所以可能有一些重要信息我忘记告诉你们了。任何帮助是极大的赞赏！请注意，我一直在更改左右和中心的内容以尝试修复此问题，因此请注意，我来自 Pastie 的 gemfile 与 repo 中的不一样。我在这里粘贴的是我正在尝试使用的那个。

让我知道我是否可以提供更多信息。

更新：：：：：：：：：：：：：：：：：：：：：：：：：：：：：：：：

我已经像这样更改了我的 gemfile：

```
source 'https://rubygems.org'
gem 'rails', '3.2.8'

#gem 'thin', '1.2.8'
gem 'devise'
group :production do
    gem 'pg'
end
group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'
  gem 'uglifier', '>= 1.0.3'
end
gem 'jquery-rails'
gem "compass-rails", ">= 1.0.3", :group => :assets
gem "zurb-foundation", ">= 3.0.9", :group => :assets
gem "simple_form", ">= 2.0.2" 
```

现在它没有崩溃，但我正在点击 500.html 文件

这是heoku日志：

```
2012-09-06T02:21:50+00:00 app[web.1]: => Call with -d to detach
2012-09-06T02:21:50+00:00 app[web.1]: => Ctrl-C to shutdown server
2012-09-06T02:21:50+00:00 app[web.1]: Connecting to database specified by DATABASE_URL
2012-09-06T02:21:52+00:00 app[web.1]: Hello World[2012-09-06 02:21:52] INFO  WEBrick 1.3.1
2012-09-06T02:21:52+00:00 app[web.1]: [2012-09-06 02:21:52] INFO  WEBrick::HTTPServer#start: pid=2 port=14673
2012-09-06T02:21:52+00:00 app[web.1]: [2012-09-06 02:21:52] INFO  ruby 1.9.2 (2011-07-09) [x86_64-linux]
2012-09-06T02:21:53+00:00 heroku[web.1]: State changed from starting to up
2012-09-06T02:21:55+00:00 heroku[web.1]: Error R12 (Exit timeout) -> At least one process failed to exit within 10 seconds of SIGTERM
2012-09-06T02:21:55+00:00 heroku[web.1]: Stopping remaining processes with SIGKILL
2012-09-06T02:21:57+00:00 heroku[web.1]: Process exited with status 137
2012-09-06T02:22:00+00:00 app[web.1]: 
2012-09-06T02:22:00+00:00 app[web.1]: 
2012-09-06T02:22:00+00:00 app[web.1]: Started GET "/" for 74.14.32.8 at 2012-09-06 02:22:00 +0000
2012-09-06T02:22:00+00:00 app[web.1]: Processing by HomeController#index as HTML
2012-09-06T02:22:00+00:00 app[web.1]:   Rendered home/index.html.erb within layouts/application (12.3ms)
2012-09-06T02:22:00+00:00 app[web.1]: Completed 500 Internal Server Error in 147ms
2012-09-06T02:22:00+00:00 app[web.1]: 
2012-09-06T02:22:00+00:00 app[web.1]: ActionView::Template::Error (File to import not found or unreadable: foundation/common/ratios.
2012-09-06T02:22:00+00:00 app[web.1]:     6:     <title>Timetracker</title>
2012-09-06T02:22:00+00:00 app[web.1]:     7:     <meta name="description" content=""/>
2012-09-06T02:22:00+00:00 app[web.1]: Load path: /app
2012-09-06T02:22:00+00:00 app[web.1]:     9:     <%= stylesheet_link_tag    "application", :media => "all" %>
2012-09-06T02:22:00+00:00 app[web.1]:   (in /app/app/assets/stylesheets/foundation_and_overrides.scss)):
2012-09-06T02:22:00+00:00 app[web.1]:     10:     <%= javascript_include_tag "application" %>
2012-09-06T02:22:00+00:00 app[web.1]:     8:     <meta name="author" content=""/>
2012-09-06T02:22:00+00:00 app[web.1]:     11:     <%= csrf_meta_tags %>
2012-09-06T02:22:00+00:00 app[web.1]:     12:     <script type="text/javascript" src="https://www.google.com/jsapi"></script>
2012-09-06T02:22:00+00:00 app[web.1]:   app/assets/stylesheets/foundation_and_overrides.scss:1
2012-09-06T02:22:00+00:00 app[web.1]:   app/views/layouts/application.html.erb:9:in `_app_views_layouts_application_html_erb__3480637122833364973_39068600'
2012-09-06T02:22:00+00:00 app[web.1]: 
2012-09-06T02:22:00+00:00 app[web.1]: 
2012-09-06T02:22:00+00:00 heroku[router]: GET whispering-atoll-2029.herokuapp.com/ dyno=web.1 queue=0 wait=0ms service=275ms status=500 bytes=643
2012-09-06T02:22:00+00:00 heroku[router]: GET whispering-atoll-2029.herokuapp.com/favicon.ico dyno=web.1 queue=0 wait=0ms service=12ms status=200 bytes=1150
2012-09-06T02:22:02+00:00 app[web.1]: 
2012-09-06T02:22:02+00:00 app[web.1]: 
2012-09-06T02:22:02+00:00 app[web.1]: Started GET "/" for 74.14.32.8 at 2012-09-06 02:22:02 +0000
2012-09-06T02:22:02+00:00 app[web.1]: Processing by HomeController#index as HTML
2012-09-06T02:22:02+00:00 app[web.1]:   Rendered home/index.html.erb within layouts/application (0.0ms)
2012-09-06T02:22:02+00:00 app[web.1]: Completed 500 Internal Server Error in 8ms
2012-09-06T02:22:02+00:00 app[web.1]: Load path: /app
2012-09-06T02:22:02+00:00 app[web.1]: 
2012-09-06T02:22:02+00:00 app[web.1]: ActionView::Template::Error (File to import not found or unreadable: foundation/common/ratios.
2012-09-06T02:22:02+00:00 app[web.1]:   (in /app/app/assets/stylesheets/foundation_and_overrides.scss)):
2012-09-06T02:22:02+00:00 app[web.1]:     7:     <meta name="description" content=""/>
2012-09-06T02:22:02+00:00 app[web.1]:     6:     <title>Timetracker</title>
2012-09-06T02:22:02+00:00 app[web.1]:     10:     <%= javascript_include_tag "application" %>
2012-09-06T02:22:02+00:00 app[web.1]:     8:     <meta name="author" content=""/>
2012-09-06T02:22:02+00:00 app[web.1]:     9:     <%= stylesheet_link_tag    "application", :media => "all" %>
2012-09-06T02:22:02+00:00 app[web.1]: 
2012-09-06T02:22:02+00:00 app[web.1]:   app/assets/stylesheets/foundation_and_overrides.scss:1
2012-09-06T02:22:02+00:00 app[web.1]:   app/views/layouts/application.html.erb:9:in `_app_views_layouts_application_html_erb__3480637122833364973_39068600'
2012-09-06T02:22:02+00:00 app[web.1]:     11:     <%= csrf_meta_tags %>
2012-09-06T02:22:02+00:00 app[web.1]:     12:     <script type="text/javascript" src="https://www.google.com/jsapi"></script>
2012-09-06T02:22:02+00:00 app[web.1]: 
2012-09-06T02:22:02+00:00 heroku[router]: GET whispering-atoll-2029.herokuapp.com/ dyno=web.1 queue=0 wait=0ms service=43ms status=500 bytes=643
2012-09-06T02:22:03+00:00 app[web.1]: 
2012-09-06T02:22:03+00:00 app[web.1]: Started GET "/" for 74.14.32.8 at 2012-09-06 02:22:03 +0000
2012-09-06T02:22:03+00:00 app[web.1]: 
2012-09-06T02:22:03+00:00 app[web.1]: Processing by HomeController#index as HTML
2012-09-06T02:22:03+00:00 app[web.1]:   Rendered home/index.html.erb within layouts/application (0.0ms)
2012-09-06T02:22:03+00:00 app[web.1]: Completed 500 Internal Server Error in 9ms
2012-09-06T02:22:03+00:00 app[web.1]: 
2012-09-06T02:22:03+00:00 app[web.1]:     8:     <meta name="author" content=""/>
2012-09-06T02:22:03+00:00 app[web.1]: ActionView::Template::Error (File to import not found or unreadable: foundation/common/ratios.
2012-09-06T02:22:03+00:00 app[web.1]:     10:     <%= javascript_include_tag "application" %>
2012-09-06T02:22:03+00:00 app[web.1]: Load path: /app
2012-09-06T02:22:03+00:00 app[web.1]:   (in /app/app/assets/stylesheets/foundation_and_overrides.scss)):
2012-09-06T02:22:03+00:00 app[web.1]:     6:     <title>Timetracker</title>
2012-09-06T02:22:03+00:00 app[web.1]:     7:     <meta name="description" content=""/>
2012-09-06T02:22:03+00:00 app[web.1]:     9:     <%= stylesheet_link_tag    "application", :media => "all" %>
2012-09-06T02:22:03+00:00 app[web.1]:     11:     <%= csrf_meta_tags %>
2012-09-06T02:22:03+00:00 app[web.1]:     12:     <script type="text/javascript" src="https://www.google.com/jsapi"></script>
2012-09-06T02:22:03+00:00 app[web.1]:   app/views/layouts/application.html.erb:9:in `_app_views_layouts_application_html_erb__3480637122833364973_39068600'
2012-09-06T02:22:03+00:00 app[web.1]:   app/assets/stylesheets/foundation_and_overrides.scss:1
2012-09-06T02:22:03+00:00 app[web.1]: 
2012-09-06T02:22:03+00:00 app[web.1]: 
2012-09-06T02:22:03+00:00 heroku[router]: GET whispering-atoll-2029.herokuapp.com/ dyno=web.1 queue=0 wait=0ms service=32ms status=500 bytes=643
2012-09-06T02:22:03+00:00 heroku[router]: GET whispering-atoll-2029.herokuapp.com/favicon.ico dyno=web.1 queue=0 wait=0ms service=4ms status=304 bytes=0
2012-09-06T02:22:06+00:00 app[web.1]: 
2012-09-06T02:22:06+00:00 app[web.1]: 
2012-09-06T02:22:06+00:00 app[web.1]: Started GET "/" for 74.14.32.8 at 2012-09-06 02:22:06 +0000
2012-09-06T02:22:06+00:00 app[web.1]: Processing by HomeController#index as HTML
2012-09-06T02:22:06+00:00 app[web.1]:   Rendered home/index.html.erb within layouts/application (0.0ms)
2012-09-06T02:22:06+00:00 app[web.1]: Completed 500 Internal Server Error in 9ms
2012-09-06T02:22:06+00:00 app[web.1]: 
2012-09-06T02:22:06+00:00 app[web.1]: ActionView::Template::Error (File to import not found or unreadable: foundation/common/ratios.
2012-09-06T02:22:06+00:00 app[web.1]: Load path: /app
2012-09-06T02:22:06+00:00 app[web.1]:   (in /app/app/assets/stylesheets/foundation_and_overrides.scss)):
2012-09-06T02:22:06+00:00 app[web.1]:     6:     <title>Timetracker</title>
2012-09-06T02:22:06+00:00 app[web.1]:     7:     <meta name="description" content=""/>
2012-09-06T02:22:06+00:00 app[web.1]:     8:     <meta name="author" content=""/>
2012-09-06T02:22:06+00:00 app[web.1]:     9:     <%= stylesheet_link_tag    "application", :media => "all" %>
2012-09-06T02:22:06+00:00 app[web.1]:     10:     <%= javascript_include_tag "application" %>
2012-09-06T02:22:06+00:00 app[web.1]:     11:     <%= csrf_meta_tags %>
2012-09-06T02:22:06+00:00 app[web.1]:     12:     <script type="text/javascript" src="https://www.google.com/jsapi"></script>
2012-09-06T02:22:06+00:00 app[web.1]:   app/assets/stylesheets/foundation_and_overrides.scss:1
2012-09-06T02:22:06+00:00 app[web.1]:   app/views/layouts/application.html.erb:9:in `_app_views_layouts_application_html_erb__3480637122833364973_39068600'
2012-09-06T02:22:06+00:00 app[web.1]: 
2012-09-06T02:22:06+00:00 heroku[router]: GET whispering-atoll-2029.herokuapp.com/ dyno=web.1 queue=0 wait=0ms service=18ms status=500 bytes=643
2012-09-06T02:22:06+00:00 app[web.1]: 
2012-09-06T02:22:06+00:00 heroku[router]: GET whispering-atoll-2029.herokuapp.com/favicon.ico dyno=web.1 queue=0 wait=0ms service=6ms status=304 bytes=0 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-06T02:11:20.300

从日志中读取：

> /app/vendor/bundle/ruby/1.9.1/gems/bundler-1.2.0/lib/bundler/rubygems_integration.rb:147:in `block in replace_gem': Please install the postgresql adapter:`gem install activerecord-postgresql-adapter`（pg不是捆绑的一部分。添加它到 Gemfile。）（LoadError）

Heroku 使用 postgres 连接数据库（不是 sqlite），所以添加一个包含 postgres gem 的生产组

```
group :production do
    gem 'pg'
end 
```

这告诉 bundler 在生产环境中安装 pg gem（Heroku 想要的）。

* * *

更新：

对于你的第二个问题。再次从日志中：

> 2012-09-06T02:22:00+00:00 app[web.1]: ActionView::Template::Error（找不到或无法读取要导入的文件：基础/通用/比率。2012-09-06T02:22： 00+00:00 应用 [web.1]: 6:
> 时间跟踪器 2012-09-06T02:22:00+00:00 应用 [web.1]:
> 7: 2012-09-06T02:22:00+00:00 app[web.1]：加载路径：/app 2012-09-06T02:22:00+00:00 app[web.1]：
> 9: <%= stylesheet_link_tag "application", :media => "all" %> 2012-09-06T02:22:00+00:00 app[web.1]: (在 /app/app/assets/stylesheets/ Foundation_and_overrides.scss)): 2012-09-06T02:22:00+00:00 app[web.1]: 10: <%= javascript_include_tag "application" %> 2012-09-06T02:22:00+00:00应用[web.1]：8：2012-09-06T02:22:00+00:00 应用[web.1]：11：<%= csrf_meta_tags %> 2012-09-06T02:22:00+00:00应用 [web.1]：12：2012-09-06T02:22:00+00:00 应用 [web.1]：
> app/assets/stylesheets/foundation_and_overrides.scss:1 2012-09-06T02:22:00+ 00:00 app[web.1]:
> app/views/layouts/application.html.erb:9:in `_app_views_layouts_application_html_erb__3480637122833364973_39068600'

那是 sass 文件：[foundation_and_overrides.scss](https://github.com/xoorath/TimeTracker/blob/master/app/assets/stylesheets/foundation_and_overrides.scss)。首先，后缀不是[资产管道形式](http://guides.rubyonrails.org/asset_pipeline.html#how-to-use-the-asset-pipeline)。此外，在该文件中，导入指的是丢失的文件。

**TL;DR：花一些时间阅读输出日志！**如果失败，大多数事情都会在那里抱怨；）

# android - 以编程方式将帐户添加到 Android 电子邮件应用程序

> ID：12292049
> 
> 赞同：1
> 
> 时间：2012-09-06T02:06:38.493
> 
> 标签：android

我一直在研究，但一直无法找到以编程方式将电子邮件帐户添加到 Android 上的默认电子邮件应用程序的方法。我咨询了一些移动开发人员和专家，并相信这是不可能的。唯一的选择是开发和应用程序来显示电子邮件（本质上是制作一个电子邮件客户端）来处理这个问题。

在我放弃之前，问问 Stackoverflow 社区是否有任何未发布的 API 或替代品？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T04:11:00.423

首先，没有“默认电子邮件应用程序”。AOSP 电子邮件应用程序可能包含也可能不包含，大多数运营商都包含自己的。其次，您通常不能修改第三方应用程序，除非它们为此提供某种 API（ContentProvider 等）。如果您想为 AOSP 电子邮件应用程序确认这一点，只需查看源代码即可。对于其他任何事情都没有保证，但由于电子邮件帐户信息是敏感信息，我怀疑其中任何一个都有公共 API 来修改或查询电子邮件帐户。

# database - 如何在 Play 框架中使用持久 H2 数据库而不是内存中的数据库

> ID：12292050
> 
> 赞同：14
> 
> 时间：2012-09-06T02:06:39.230
> 
> 标签：database, playframework, playframework-2.0, h2

Java Todo List 教程中使用的 H2 数据库如下：

```
db.default.driver=org.h2.Driver
db.default.url="jdbc:h2:mem:play" 
```

如何修改配置文件以使用持久数据库而不是内存版本。我需要设置一个完全独立的数据库还是可以修改`db.default.url`属性？

我正在使用播放！2.0.3。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-09-06T02:36:10.483

我找到了解决方案。

要创建文件数据库，请修改以下内容：

从

```
db.default.url="jdbc:h2:mem:play" 
```

至

```
db.default.url="jdbc:h2:file:data/db" 
```

在哪里`data/db`分解为：

`data/`数据库文件相对于项目根目录的文件夹位置。

`db`数据库文件的名称。

# r - y 作为 R 中 x 的函数

> ID：12292051
> 
> 赞同：0
> 
> 时间：2012-09-06T02:06:54.737
> 
> 标签：r

就 x 而言，我有一个复杂的 y 函数，如下所示

```
y = 1-(e^(-((x^2)/730))) 
```

或 y 等于 1-(e 幂减 (x-square/730))

我如何在 R 中表示如此复杂的函数？我想绘制一条连接所有这些点的曲线（图形）。我还想以 10 的间隔标记从 0 到 370 的 x 轴。我知道如何保持休息，但我不知道如何用数字标记轴。如果在某处提供帮助，请引导我访问该链接。非常感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T02:25:15.297

查看帮助`?curve`，`?axis`...

```
## draw the curve
curve(1-exp(-x^2/730),from=0,to=370,axes=FALSE)
axis(side=2)  ## add default lefthand axis
axis(side=1,at=seq(0,370,by=10))  ## add custom bottom axis
box(bty="l")  ## add a box 
```

需要注意的一件事是 R 抑制了重叠标签，因此除非您的绘图非常宽，否则您实际上不会看到每个轴标签。如果愿意，您可以尝试将`cex.axis=0.5`（甚至更小）添加到 side-1 轴。您还可以从包中查看`staxlab`功能`plotrix`，或[旋转轴标签](http://cran.r-project.org/doc/FAQ/R-FAQ.html#How-can-I-create-rotated-axis-labels_003f)。（你的表达式中有很多多余的括号；更多的括号并没有*什么*坏处，但从长远来看，如果你了解操作的顺序，你可以编写更简洁的代码（并且花更少的时间计算括号）。）

![在此处输入图像描述](../Images/2c4708e5f3cd9f2e4b323474ca704cc6.png)

# java - 如何使用 Jersey 容器过滤器修改表单参数

> ID：12292054
> 
> 赞同：1
> 
> 时间：2012-09-06T02:07:34.627
> 
> 标签：java, jersey

我正在使用 Jersey 1.5，并希望将旧 API 转换为新 API。

我想使用容器过滤器来修改传入的请求。这要求我能够修改表单参数。到目前为止，我无法这样做。

我的过滤器：

```
public class Filter implements ContainerRequestFilter  {
    public ContainerRequest filter(ContainerRequest cr) {
       this.logger.debug(("media type: " + cr.getMediaType().toString()));
       this.logger.debug("before form params: " + cr.getFormParameters().toString());
       cr.getFormParameters().add("test", "test");
       this.logger.debug("after form params: " + cr.getFormParameters().toString());
       return cr;
    }
} 
```

卷曲：

```
curl -d "hello=world" http://localhost:8080/api/test 
```

输出：

```
22:05:38.250 [163501009@qtp-1025542363-0] DEBUG Filter - media type: application/x-www-form-urlencoded
22:05:38.250 [163501009@qtp-1025542363-0] DEBUG Filter - before form params: {hello=[world]}
22:05:38.250 [163501009@qtp-1025542363-0] DEBUG Filter - after form params: {hello=[world]} 
```

谢谢！

# opengl - 旋转四边形，使其垂直于球体

> ID：12292055
> 
> 赞同：0
> 
> 时间：2012-09-06T02:07:40.523
> 
> 标签：opengl, 3d, three.js

在我正在开发的 OpenGL 应用程序中，我有一个半径为 r 的球体和一组纬度/经度点。

我想渲染一个球体，然后在每个纬度/经度处渲染一个正方形。我坚持的那块正在旋转正方形，因此对于任何位置，它最终都会垂直于球体的表面 - 就像切线一样。

球体以原点为中心。

在伪代码中我有：

```
lat = rand( 180.0 ) - 90.0;
lng = rand( 180.0 );

phi = ( 90.0 - lat ) * PI / 180.0;
theta = ( 360.0 - lng ) * PI / 180.0;

x = radius * sin( phi ) * cos( theta );
y = radius * cos( phi );
z = radius * sin( phi ) * sin( theta );

square.setRotation( rx, ry, rz );
square.setPosition( px, py, pz ); 
```

我想提出 rx、ry 和 rz 的值。其中一个当然应该是 0，我想另外 2 个连接到 lat/lng 但我尝试过的所有组合都没有奏效。

这里的 JavaScript 示例：http: [//jsfiddle.net/NZEBH/2/](http://jsfiddle.net/NZEBH/2/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T09:11:46.303

所有你需要的是：

```
mesh.lookAt( sphere.position ); 
```

请参阅评论的更新小提琴：http: [//jsfiddle.net/NZEBH/59/](http://jsfiddle.net/NZEBH/59/)

请记住，如果面法线朝向球体中心，则必须将材质设置为 THREE.BackSide 或 THREE.DoubleSide。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T05:08:41.017

我不确定这是否是最好的方法，但是使用一些代码让相机看一个点，我想出了这个来旋转正方形，它似乎可以按我的意愿工作：

```
var target_vec = new THREE.Vector3( 0, 0, 0 );
var rotation_matrix = new THREE.Matrix4();
rotation_matrix.makeRotationX( phi );
rotation_matrix.makeRotationY( 0 );
rotation_matrix.makeRotationZ( theta );
rotation_matrix.lookAt( mesh.position, target_vec, mesh.up );
mesh.rotation.setEulerFromRotationMatrix( rotation_matrix, mesh.eularOrder ); 
```

此处示例：http: [//jsfiddle.net/NZEBH/47/](http://jsfiddle.net/NZEBH/47/)

# reporting-services - SSRS 表达式 - 聚合变量

> ID：12292056
> 
> 赞同：2
> 
> 时间：2012-09-06T02:07:42.323
> 
> 标签：reporting-services, sum, ssrs-2008, ssrs-expression

我正在构建一个报告，我正在尝试为变量（而不是参数）编写表达式。我计划创建多个变量，每个变量都引用来自不同数据集的金额的 SUM(SUM())。然后，我计划在单个文本框中引用这些变量中的每一个来进行计算。这是为了规避 SSRS 在单个 tablix/matrix 中使用多个数据集的限制。

我需要一些语法帮助。当我单独使用 SUM 时，报告运行良好，我可以毫无问题地对这些值执行计算。例如，这很好用：

变量1：

```
=SUM(Fields!Amount.Value, "DataSet1") 
```

变量2：

```
=SUM(Fields!Amount.Value, "DataSet2") 
```

文本框1：

```
=Variable1.Value - Variable2.Value 
```

但是在尝试将其修改为以下内容时出现错误（这是我真正需要的）：

变量1：

```
=SUM(SUM(Fields!Amount.Value, "DataSet1")) 
```

我收到一条错误消息，提示“报表‘正文’的变量表达式使用没有范围的聚合表达式。除非报表只包含一个数据集，否则在数据区域之外使用的所有聚合都需要范围。” 我有一种预感，我的语法/括号放置有问题。我尝试再次添加“，DataSet1”，最后（SUM（SUM（Fields！Amount.Value，“DataSet1”），“DataSet1”）但收到有关递归嵌套问题的错误。有什么建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T02:42:07.547

我猜你在哪里分配变量，它没有这些列组的概念，所以唯一的选择是对整个数据集求和。

我认为您可以尝试以下方法之一：

1.  从 tablix 中分配值（如果允许，您可能需要聚合然后设置变量的自定义代码）
2.  在条件总和中再次指定分组条件，如`SUM(IIF(Fields!Location.Value = TheLocationValueForTheColumnYouNeed, Fields!Amount.Value, 0))`

# c# - LINQ where 和 where 方法在集合上的区别

> ID：12292061
> 
> 赞同：2
> 
> 时间：2012-09-06T02:09:04.867
> 
> 标签：c#, .net, linq, where

与使用集合 Where() 方法相比，使用 LinQ 进行过滤有什么区别。

进一步来说，

第一的

```
var numQuery = from num in numbers
               where (num % 2) == 0
               select num; 
```

第二

```
var numQuery = numbers.Where(num => num % 2 == 0); 
```

在上面的查询中，哪个更好？是否有任何性能考虑？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-06T02:10:24.277

没有区别。第一个是`Query Type`LINQ。第二个是`Extension Method`类型。我更喜欢第二个，因为它具有许多内置功能。

从下面的链接

> “......但是方法语法和查询语法之间没有语义差异。”

**[MSDN：LINQ 查询语法与方法语法 (C#)](http://msdn.microsoft.com/en-us/library/bb397947.aspx)**

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-06T02:21:54.797

不，根本没有区别（正如约翰指出的那样）。

为了说服任何不愿意相信的人，我检查了生成的 IL 代码，它*完全*一样（下面为好奇的人发布）：

```
 IL_0001:  ldc.i4.4    
IL_0002:  newarr      System.Int32
IL_0007:  dup         
IL_0008:  ldtoken     {A078DB01-D7BE-45F4-8D98-8D2FA673C282}.$$method0x6000001-1
IL_000D:  call        System.Runtime.CompilerServices.RuntimeHelpers.InitializeArray
IL_0012:  stloc.0     
IL_0013:  ldloc.0     
IL_0014:  ldsfld      UserQuery.CS$9__CachedAnonymousMethodDelegate1
IL_0019:  brtrue.s    IL_002E
IL_001B:  ldnull      
IL_001C:  ldftn       b__0
IL_0022:  newobj      System.Func..ctor
IL_0027:  stsfld      UserQuery.CS$9__CachedAnonymousMethodDelegate1
IL_002C:  br.s        IL_002E
IL_002E:  ldsfld      UserQuery.CS$9__CachedAnonymousMethodDelegate1
IL_0033:  call        System.Linq.Enumerable.Where
IL_0038:  stloc.1     
IL_0039:  ldloc.1     
IL_003A:  call        LINQPad.Extensions.Dump

b__0:
IL_0000:  ldarg.0     
IL_0001:  ldc.i4.2    
IL_0002:  rem         
IL_0003:  ldc.i4.0    
IL_0004:  ceq         
IL_0006:  stloc.0     
IL_0007:  br.s        IL_0009
IL_0009:  ldloc.0     
IL_000A:  ret 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T04:31:01.070

`Select(a => a)`如果返回每个条目的实例，使用 Where() 扩展方法不需要选择部分。

查询类型表达式总是需要表达式`select a`末尾的选择部分，这看起来是多余的，但语法要求。

而且，First() 扩展方法没有对应的查询类型语法。所以需要给查询类型表达式加括号（from a in b where a > 0 select a）。First() 对于嵌套查询，还需要给查询类型表达式加括号。我可以`b.First(a > 0)`直接使用而不是`b.Where(a > 0).First()`

因此，我提倡使用扩展方法。

# database-design - 扩展应用程序设计 - 从数据库中已有的模板自动生成数据项

> ID：12292066
> 
> 赞同：1
> 
> 时间：2012-09-06T02:10:10.047
> 
> 标签：database-design

假设我正在编写供派对策划者使用的软件。这是我当前的数据库架构的样子：

```
Parties ( PartyId, ClientId, DateTime )
Tents ( PartyId, TentDetails... )
Clowns ( PartyId, ClownDetails... )
SecurityAgentAssignment ( PartyId, AgentId, fromTime, untilTime ) 
```

如您所见，一个派对可以有多个帐篷、小丑和安全特工分配给它。

现在，派对策划师经常策划相同类型的派对：​​大多数有一个帐篷，一个小丑，没有保安；但还有另一种常见的派对类型，有三个帐篷，没有小丑，三个保安人员参加派对。他们希望能够存储“预设”（也称为“派对包”或“派对模板”），选择这些预设会在数据库中添加必要的帐篷、小丑和安全行。派对仍然可以像往常一样自定义，当然，这只是最小化初始数据输入的一种手段。

现在的问题是，我将如何实现它？

最直接的方法是复制`Tents`、`Clowns`和`SecurityAgentAssignment`表并添加一个新`Packages`表，如下所示：

```
Packages ( PackageId, Name )
Package_Tents ( PackageId, TentDetails... )
Package_Clowns ( PackageId, ClownDetails... )
Package_Security ( PackageId, AgentId ) 
```

然后 biz 逻辑必须`Tent`从行创建`Package_Tent`行，它不能通过`INSERT INTO SELECT FROM`语句来完成，因为两个模式不同（例如，`Package_Security`缺少`fromTime`and`untilTime`字段）。

这种方法简单且有效，但存在一些问题：

1.  这意味着只为 Package 系统复制大量表。这就是项目变得臃肿的方式。
2.  它引入了额外的维护层：如果我修改原始表，那么我也必须修改这些表。
3.  不知何故，这似乎是“错误的”。

第二种方法意味着使用现有表，但添加一个新表，如下所示：

```
Packages ( PackageId, Name, PartyId ) 
```

此`Packages`表链接到现有`Party`行（及其关联的帐篷、小丑和安全行）。它链接到的派对不存在（或者更确切地说，它的细节无关紧要），它成为新派对的模板，只需在单个表中复制行，而不是在另一个表中创建新表中的行桌子。这种方法还有一个优点是允许用户使用现有的 GUI 来修改包作为原型方，而不是拥有单独的 GUI 工具/区域。

但是它存在“杂质”：现在一个政党的状态如何作为“政党”而不是“政党模板”取决于它是否是`Packages`表中的外键。这也意味着存在无效或无意义的数据（例如，在聚会模板中使用`fromTime`and for Security 是没有意义的）。`untilTime`

StackOverflow 是否偏爱一种方法而不是另一种方法，还是有第三种方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T06:00:16.197

采用第二种方法绝对是有意义的。每种设计都有其优点和缺点，但第二种方法（重用模式和 GUI）的优点远远超过任何小问题。

就个人而言，我不认为您提到的任何问题都是架构中的“杂质”，而是需要在应用程序中明确说明的业务约束，例如：

*   如果编辑派对模板，忽略`fromTime`and `untilTime`，并在 GUI 中隐藏它们
*   如果编辑常规派对，请确保`fromTime`并且`untilTime`有效

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T00:01:09.103

在我看来，模板就是这样，模板：预设。您可以将预设值存储为 xml。让您在不破坏表结构的情况下更改模板的范围很广，并且只有应用程序代码需要在运行时处理解析和翻译 xml。这里唯一的缺点是如果模板变得太大，xml 可能会变得难以管理。但是对于中小型使用和有效的 DAO/ORM 层，您的配置将与 `Party_Template(template_id,template_title,template_desc`)

# python - import cv2 有效，但 import cv2.cv as cv 不工作

> ID：12292070
> 
> 赞同：9
> 
> 时间：2012-09-06T02:10:46.680
> 
> 标签：python, opencv, simplecv

我认为 sys 路径是正确的，cv.pyd 和 cv.pyd 位于 c:\OpenCV2.3\build\Python\2.7\Lib\site-packages 中。

```
>>> import sys
>>> sys.path
['', 'C:\\Python27\\Lib\\idlelib', 'C:\\Python27\\lib\\site-packages\\pil-1.1.7-py2.7-win32.egg',     'C:\\Python27\\lib\\site-packages\\cython-0.17-py2.7-win32.egg', 'C:\\Python27\\lib\\site-packages\\pip-1.2-py2.7.egg', 'c:\\OpenCV2.3\\build\\Python\\2.7\\Lib\\site-packages', 'C:\\Python27\\python27.zip', 'C:\\Python27\\DLLs', 'C:\\Python27\\lib', 'C:\\Python27\\lib\\plat-win', 'C:\\Python27\\lib\\lib-tk', 'C:\\Python27', 'C:\\Python27\\lib\\site-packages', 'C:\\Python27\\lib\\site-packages\\IPython\\extensions'] 
```

并且 import cv 或 cv2 似乎还可以，但 import cv2.cv 不行

```
>>> import cv
>>> import cv2.cv as cv

Traceback (most recent call last):
  File "<pyshell#4>", line 1, in <module>
    import cv2.cv as cv
ImportError: No module named cv
>>> import cv2
>>> cv.NamedWindow("camera", 1) 
```

...

ImportError 的原因可能是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-06-30T08:02:47.647

[我有同样的问题。这是 OpenCV 引擎的问题。从https://github.com/thumbor/opencv-engine/releases/tag/1.0.1](https://github.com/thumbor/opencv-engine/releases/tag/1.0.1)下载 OpenCV 引擎并将其保存为 \Python27\ 中的 engine.py Lib\site-packages.use cv2.cv 而不是 cv2.cv 作为 cv。

# c++ - 将字母转换为其 ascii 十进制形式

> ID：12292075
> 
> 赞同：-2
> 
> 时间：2012-09-06T02:11:37.193
> 
> 标签：c++, type-conversion

我在上基础编程课，对编程几乎一无所知，我们使用的是 c++，我目前的项目是打开控制台并执行以下操作

1.  输入一个字母并输出它的 ascii 十进制等效值
2.  输入一个介于 33 和 254 之间的数字并输出其等效字母
3.  输入小写字母并输出大写
4.  输入小时数并输出分钟数
5.  输入大于 60 的数字，输出小时数和分钟数

这是我到目前为止的工作

```
#include <iostream>

using namespace std;

void main ()  
{  
    cout<<"Assignment 2"<<endl;
    char somechar;
    int charval;
    int input_number;
    char output_letter2;
    char input_lower_letter;
    char output_upper_letter;
    int input_hours;
    int output_minutes;
    int input_minutes2;
    int output_hours2;
    int output_remainder_minutes;

    cout<<"Enter a letter"<<endl;
    cin>>somechar>>endl;
    cout<< somechar='a';
    int charval = somechar;
    printf("%c = %d\n",somechar,charval);

    system("pause");
} 
```

非常感谢任何提示和帮助

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-06T02:42:46.907

一个重要的教训（他们似乎从未在学校教过）是从一个非常简单的程序开始，让它完美地运行，然后建立起来，在每一步进行测试。

您的代码无法编译。让我们剥离您的代码并从头开始：

```
void main()
{
} 
```

这不编译。修理它：

```
int main()
{
  return(0);
} 
```

现在添加一些输出：

```
#include <iostream>
using namespace std;

int main()
{
  cout << "Assignment 2" << endl;
  return(0);
} 
```

到目前为止，一切都很好。现在输入：

```
#include <iostream>
using namespace std;

int main()
{
  cout << "Assignment 2" << endl;

  char somechar;
  cout << "Enter a letter" << endl;
  cin >> somechar >> endl;
  return(0);
} 
```

这不编译。修理它。

等等。看看它怎么运作？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T03:19:51.583

```
#include <iostream>
using namespace std;

int main() {

    char a ='a';
    cout << a << " => integer: " << (int)(a) << endl;

    int i = 98;
    cout << i << " => character: " << (char)(i) << endl;

    char b='b';
    cout << b <<" => lower: " << (char)(b+('a'-'A')) << endl;

    char c='c';
    cout << c << " => upper: " << (char)(c-('a'-'A')) << endl;

    int hours = 15;
    cout << hours << " hours => minutes: " << hours * 60 << endl;

    int minutes = 75;
    cout << minutes << " minutes => hours:minutes: " << minutes/60 << ":" << minutes % 60 << endl;

    system("PAUSE");

    return 0;
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-06T03:04:45.333

为此，您可以查看`casting`. 要将字符 ( `char`) 转换为整数 ASCII 值，您必须`int`对该`char`值进行转换。例如：

```
#include <iostream>

using namespace std;

int main() {
        char myvalue;
        cout<<"Enter a character: ";
        cin>>myvalue;
        cout<<endl<<"The ASCII value is: "<<(int)myvalue<<endl;
        return 0;
} 
```

现在因为这是家庭作业，我不会为你完成这些步骤，但从这里开始应该很简单。

有关更多信息`casting`，我强烈建议：[http ://www.cplusplus.com/doc/tutorial/typecasting/](http://www.cplusplus.com/doc/tutorial/typecasting/)

# javascript - 删除功能

> ID：12292089
> 
> 赞同：2
> 
> 时间：2012-09-06T02:15:25.600
> 
> 标签：javascript, jquery

我正在寻找浏览我网页上的内容。一些内容是文本，其他是链接，......**我需要一个可以穿透它的功能**。

找到了这个很好的答案：[如何在一段文本上使用 JavaScript 设置删除线效果？](https://stackoverflow.com/questions/5368521/how-do-i-animate-a-strike-through-effect-using-javascript-on-a-piece-of-text) （第二个答案）但我想将它转换成一个函数，以便我可以在任何地方使用它。

他原来的jsfiddle：http: [//jsfiddle.net/alexdickson/wmBYx/](http://jsfiddle.net/alexdickson/wmBYx/)

这是他的JS：

```
var findText = function(element, pattern, callback) {

    if ( ! element.childNodes) {
      return;   
    }
    for (var childi = element.childNodes.length; childi-- > 0;) {
        var child = element.childNodes[childi];
        if (child.nodeType == 1) {
            findText(child, pattern, callback);
        } else if (child.nodeType == 3) {
            var matches = [];
            var match;
            while (match = pattern.exec(child.data))
            matches.push(match);
            for (var i = matches.length; i-- > 0;)
            callback.call(window, child, matches[i]);
        }
    }
}

findText(document.body, /./g, function(node, match) {
    var element = document.createElement('span');
    node.splitText(match.index + 1);
    element.appendChild(node.splitText(match.index));
    node.parentNode.insertBefore(element, node.nextSibling);
});

var spans = document.getElementsByTagName('span'),
    spansLength = spans.length,
    currentSpan = 0,
    interval = setInterval(function() {
        if (currentSpan == spansLength) {
            clearInterval(interval);
        }
        spans[currentSpan++].style.textDecoration = 'line-through';

    }, 100); 
```

说实话，我什么都不懂，所以我不知道如何将其转换为 DRY 函数。（甚至不会告诉你我到目前为止得到了什么，我很惭愧）。

谢谢你的帮助

PS：我使用的是 jquery，所以非常欢迎您在其中添加一些内容。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-06T02:31:17.603

你可以为它创建一个 jQuery 插件：

```
$.fn.strikeThrough = (function() {

    var findText = function(element, pattern, callback) {

        if ( ! element.childNodes) {
          return;   
        }

        for (var childi = element.childNodes.length; childi-- > 0;) {
            var child = element.childNodes[childi];
            if (child.nodeType == 1) {
                findText(child, pattern, callback);
            } else if (child.nodeType == 3) {
                var matches = [];
                var match;
                while (match = pattern.exec(child.data))
                matches.push(match);
                for (var i = matches.length; i-- > 0;)
                callback.call(window, child, matches[i]);
            }
        }
    }

    return function(pattern) {
        pattern = pattern || /./g;

        if (this.length > 1) {
            this.each(function() {
                $(this).strikeThrough(pattern);
            });
            return this;
        }

        findText(document.body, pattern, function(node, match) {
            var element = document.createElement('span');
            node.splitText(match.index + 1);
            element.appendChild(node.splitText(match.index));
            node.parentNode.insertBefore(element, node.nextSibling);
        });

        var spans = this[0].getElementsByTagName('span'),
            spansLength = spans.length,
            currentSpan = 0,
            interval = setInterval(function() {
                if (currentSpan == spansLength) {
                    clearInterval(interval);
                    return;
                }
                spans[currentSpan++].style.textDecoration = 'line-through';

            }, 100);

        return this;
    };

})();

$(function() {
    $('div').strikeThrough();
}); 
```

HTML：

```
<div>strike me out please but <strong>don't</strong> drop my events!</div> 
```

[演示](http://jsfiddle.net/wmBYx/19/)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-09-06T02:19:42.743

这非常简单。

```
$(function(){
    //pass over the jQuery object.
    strikeThrough($('.ele'));
});

/*
 * Create function outside of .ready() scope
 */
function strikeThrough(ele){
    ele.css('textDecoration', 'line-through');  
} 
```

[这是有效的 jsFiddle 示例。](http://jsfiddle.net/PdGqJ/)

# xml - Windows 任务计划程序输出

> ID：12292090
> 
> 赞同：2
> 
> 时间：2012-09-06T02:15:30.723
> 
> 标签：xml, windows, logging, scheduled-tasks

我有一些可执行文件计划使用 Windows 任务计划程序运行。他们有必须在某处看到的输出。通过 Windows 任务计划程序运行应用程序时，程序的输出会丢失。如何捕获此输出？我做了谷歌，发现黑客改为运行 cmd 并将输出重定向到一个日志文件，但我无法将该信息很好地放在一个 XML 文件中，我应该能够向任务调度程序注册，所以我需要一个更好的方法来做到这一点。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-12T00:47:58.887

如上所述：

> 好的，所以黑客没有描述为适用于 Windows TS XML Schema。重定向部分，>> log 2>&1，实际上并不是“参数”的一部分；它由 cmd shell 解释，而不是由程序处理。我想这就是为什么它不能作为 . 一种合理的解决方法是让 Windows TS 执行批处理文件，并让批处理文件执行 c:...\sunspotters.bat -i ... >> test.output.txt 2>&1

# c# - 如果匹配成功则需要失败

> ID：12292094
> 
> 赞同：0
> 
> 时间：2012-09-06T02:15:53.833
> 
> 标签：c#, regex

我在 C# 中有这种模式：

```
 string WWPNMatchString = @"port-wwn\s+\(vendor\)\s+:(?<wwpn>..:..:..:..:..:..:..:..)"; 
```

我有这两行在文件中成对出现多次的文件：

端口-wwn（供应商）：50:01:73:80:12:60:01:41
永久端口-wwn（供应商）：50:01:73:80:12:60:01:41

我只想匹配第一行。还有其他行搞砸了我正在解析的数据，其中第二行如下所示：permanent-port-wwn (vendor) :00:00:00:00:00:00:00:00

所以，我不想匹配包含永久的行。我可以做一个单独的 if 来检查传入的字符串，但这很混乱。我用来检查正则表达式的在线站点在第二行失败，但在代码编译后 C# 没有。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T02:30:46.093

我突然想到，我不想要的模式总是以 00 开头：

所以我将正则表达式更改为：

```
string WWPNMatchString = @"port-wwn\s+\(vendor\)\s+:(?<wwpn>[1-9].:..:..:..:..:..:..:..)"; 
```

这将排除 wwpn 组以 0 开头的任何内容 - 我所追求的值，有效值永远不会以 0 开头。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T02:31:30.720

一个正则表达式

```
string WWPNMatchString = @"^port-wwn\s+\(vendor\)\s+:(?<wwpn>..:..:..:..:..:..:..:..)"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T02:34:33.667

我假设您正在逐行读取文件，并且每一行都作为单独的字符串处理？

您可以使用 强制匹配从字符串的开头开始`^`，如下所示：

```
@"^port-wwn\s+\(ven... 
```

这将排除以“permanent-”开头的行。

# c# - 如何更新超表中的数据

> ID：12292095
> 
> 赞同：3
> 
> 时间：2012-09-06T02:16:02.113
> 
> 标签：c#, hypertable

我已经编写了一些 C# 代码来将数据存储到超表数据库中。但是我不知道如何更新数据。以下是我所做的：

```
Hypertable b = new Hypertable();
b.Write("1", "value1");//this line is for writing to database
b.Write("1", "value111");//this line is for updating the value whose key = "1" 
```

我的写功能是：

```
public override bool Write(string key, string value)
{
    try
    {
        using (IContext context = Context.Create(connectionString))
        using (IClient client = context.CreateClient())
        {
            using (INamespace ns = client.OpenNamespace("Test", OpenDispositions.OpenAlways | OpenDispositions.CreateIntermediate))
            {
                using (ITable table = ns.OpenTable(tableName))
                {
                    using (ITableMutator mutator = table.CreateMutator())
                    {
                        Key _key = new Key { Row = key, ColumnFamily = "vvalue" };
                        mutator.Set(_key, Encoding.UTF8.GetBytes(value));
                    }
                }
            }
        }
        return true;
    }
    catch (Exception e)
    {
        Console.WriteLine("Hypertable--Write--{0}", e.Message);
        return false;
    }
} 
```

所以我的更新只是用相同的键但不同的值再次写入。但是在更新后我读取了那个键和值，它应该显示新的键和值（键 =“1”和值 =“value111”）但它没有，它只显示旧的键和值(key = "1" and value = "value1")
我不知道为什么会这样。任何提示将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T01:33:16.483

您可以尝试添加`mutator.Flush()`到最里面的`using`块，尽管它应该在 mutator 超出范围时自动调用......

# multithreading - 当一个线程停止时（例如操作系统线程调度），重新排序的机器指令如何受到影响？

> ID：12292097
> 
> 赞同：0
> 
> 时间：2012-09-06T02:16:25.837
> 
> 标签：multithreading, assembly

我们知道 CPU 可以重新编排指令。和操作系统通过调度模拟多线程。

以下cpu机器指令：

```
ins0
ins1
ins2 
```

thread0 将这三个 in 分成 2 个部分。part0 执行 ins0，part1 执行 ins1 和 ins2。在第 0 部分开始之前，第 2 部分完成。然后触发thread1。

我的问题是：part0 应该在 thread1 开始之前完成吗？还是在thread0完成ins1和ins2而不完成ins0时启动thread1？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T02:47:52.017

简短的回答是，除了极少数例外，当 CPU 从一个线程切换到另一个线程时，它会选择一个指令边界并完成该边界之前的每条指令，并且不会在该边界之后启动任何指令。当它恢复时，它从该边界之后的第一条指令开始。

> 为了允许在处理异常或中断后重新启动程序或任务，所有异常（中止除外）都保证在指令边界上报告异常。所有中断都保证在指令边界上进行。
> ...
> 中断严格支持重新启动中断的程序和任务，而不会失去连续性。为中断保存的返回指令指针指向要在处理器接受中断的指令边界处执行的下一条指令。如果刚刚执行的指令有重复前缀，则中断在当前迭代结束时进行，寄存器设置为执行下一次迭代。-- Intel x86[系统编程指南](http://www.intel.com/Assets/ja_JP/PDF/manual/253668.pdf)，第 3A 卷，第 1 部分，第 6.6 节

# perl - Catalyst DBIx::Class 未找到表，您是否忘记指定 db_schema

> ID：12292098
> 
> 赞同：0
> 
> 时间：2012-09-06T02:16:32.883
> 
> 标签：perl, catalyst

在 Catalyst 开发中，有很多模块。当我按如下方式运行命令时，出现错误

> 未找到表，您是否忘记指定 db_schema
> 
> script/addressbook_create.pl model AddressDB DBIC::Schema AddressBook::Schema::AddressDB create=static dbi:SQLite:/tmp/database

我在看书--Catalyst 5.8 perl MVC框架

我的问题：

*   如何解决这个问题呢？

*   我可以从 perldoc 或其他东西那里得到什么帮助？文档要多得多，而且对模块的依赖非常困难。关键是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T23:26:09.133

在您的 create 命令中对 AddressDB 的第二个引用可能是将文件放在它们应该位于的子目录下，即`lib/AddressBook/Schema/AddressBook/Result/People.pm`. 查看您的目录结构并将其与本书的 p141 进行比较。

我建议你清理它，然后尝试：

```
script/addressbook_create.pl model AddressDB DBIC::Schema AddressBook::Schema \
  create=static dbi:SQLite:/tmp/database 
```

# php - IF 语句未按预期运行

> ID：12292099
> 
> 赞同：2
> 
> 时间：2012-09-06T02:16:34.443
> 
> 标签：php, mysql

如果用户已登录，我想显示用户的全名。如果没有，则应显示文本“登录”。

这是我到目前为止所拥有的：

```
session_start();

$session = $_SESSION['username'];

include "config.php";

$sql = mysql_query("SELECT * from user");    
while($d=mysql_fetch_array($sql))
{
    if($d['status']=='online' and $_SESSION['username'] == $d['username'])
    {
        $full_names = $d['full_name'];

        echo $full_names;
    }
    else
    {
        echo "Login";
    }
} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T02:20:35.630

您应该使用 SQL `WHERE`（如@ThiefMaster 所述），但只是为了回答您的问题：

```
$full_names = false;
while($d=mysql_fetch_array($sql)) {
    if($d['status']=='online' and $_SESSION['username'] == $d['username']) {
        $full_names = $d['full_name'];

        echo $full_names;
    }
}

if(!$full_names) {
  echo "Login";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T02:46:02.980

您可能希望存储 id，而不是将用户*名存储在会话中。*这不如`WHERE`在查询中使用语句将结果限制为单行（即相关用户）重要。这很重要，因为随着用户数据库大小的增加，此查询将变得越来越低效。通过一些简单的逻辑，您可以防止未来的问题并在平衡中拥有更强大的架构。

另一个重要注意事项，`mysql_*` **功能已被弃用，您不应该使用它们。**您需要开始使用 PDO 再怎么强调也不为过。并不难弄清楚（不再是`mysql_*`功能！），您不妨现在就开始使用它——很快，`mysql_*`将完全不可用。您的代码将停止工作，或者您将被困在一个充满已知安全漏洞的旧 PHP 版本上。

在引用 中的键之前`$_SESSION`，您应该检查以确保它存在。

```
session_start();
$session_identifier = isset($_SESSION['username']) ? $_SESSION['username'] : false;
$user_name = false;
if ($session_identifier) {
    $pdo = new PDO("mysql:host=localhost;dbname=database", '-username-', '-password-');
    $sql = '
        SELECT 
            full_name 
        FROM 
            users 
        WHERE 
            username = ":username"
    ';
    $statement = $pdo->prepare($sql);
    if($statement->execute(array(':username'=>$session_identifier)))
        $user_name = $statement->fetchColumn();
} 
```

...然后你可以这样做：

```
if ($user_name)
    print 'Welcome, '.$user_name;
else
    print '<a href="login.php">Login</a>'; 
```

**文档**

*   `isset`- [http://php.net/manual/en/function.isset.php](http://php.net/manual/en/function.isset.php)
*   `PDO`- [http://www.php.net/manual/en/class.pdo.php](http://www.php.net/manual/en/class.pdo.php)
*   `PDO::prepare`- [http://www.php.net/manual/en/pdo.prepare.php](http://www.php.net/manual/en/pdo.prepare.php)
*   `PDOStatement` - [http://www.php.net/manual/en/class.pdostatement.php](http://www.php.net/manual/en/class.pdostatement.php)
*   `PDOStatement::execute` - [http://www.php.net/manual/en/pdostatement.execute.php](http://www.php.net/manual/en/pdostatement.execute.php)
*   `PDOStatement::fetchColumn` - [http://www.php.net/manual/en/pdostatement.fetchcolumn.php](http://www.php.net/manual/en/pdostatement.fetchcolumn.php)
*   `mysql_query` **DEPRECATED!** - [http://php.net/manual/en/function.mysql-query.php](http://php.net/manual/en/function.mysql-query.php)
*   mySQL `SELECT` (see the `WHERE` section) - [http://dev.mysql.com/doc/refman/5.0/en/select.html](http://dev.mysql.com/doc/refman/5.0/en/select.html)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-06T02:36:23.397

您应该将查询更改为：

```
"SELECT * from user WHERE status = 'online' AND username = '" . mysql_real_escape_string($_SESSION['username']) . "'" 
```

然后你不需要 where 循环。

您还应该使用 mysqli 而不是 mysql。

# api - API 环境中令牌的客户端 cookie

> ID：12292100
> 
> 赞同：0
> 
> 时间：2012-09-06T02:16:46.600
> 
> 标签：api, rest, restful-authentication

我的客户端 Web 应用程序的后端是 JSON Api。我想保持后端的通用性，以便其他设备（例如移动设备）可以重用相同的服务。

假设每个用户帐户在他们的个人资料中都有一个令牌，当他们使用他们的用户名/密码登录时，我会将令牌发回。在我发回令牌的每个后续请求中，在数据库中查找它以找出用户是谁。

当用户在整个应用程序中移动时，我如何/在哪里存储此令牌。我是否将其存储在 cookie 中？为了保持某种会话状态，我是否删除了额外的 cookie？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T09:16:54.317

首先，这不是 100% RestFul。我也遇到过类似的情况。[在这里](http://sricode.blogspot.co.uk/)写博客

解决方案是，我创建了一个单例对象来将用户身份验证令牌存储在应用程序容器中。然后配置一个过滤器来查询请求并获取客户端发送的身份验证令牌。然后这个令牌与存储在 Singleton Session 对象中的令牌相匹配。

# iphone - 如何访问不提供API的网站？

> ID：12292104
> 
> 赞同：0
> 
> 时间：2012-09-06T02:17:02.883
> 
> 标签：iphone, objective-c

我想创建一个 iphone 应用程序，可以将文本字段上的值发送到网站页面，例如评论。当我点击提交我的评论时，评论将显示在网站上。该网站不提供 API，也不是我的网站。我可以这样做吗？有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T04:32:49.983

许多网站会阻止您从外部来源发送 POST 或 GET 数据作为安全措施 - 所以通常不会那么简单。

除非您可以访问该网站，并且您说这不是您的网站，否则这可能不是一个可行的想法。如果您确实可以访问该网站，或者同意在他们的网站上上传网络服务，那将是一件非常简单的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T02:19:08.633

您可以使用相同的输入字段创建表单并提交给相同的表单处理程序。提交表单不需要 API。

# facebook - Facebook 与 dotnetopenauth

> ID：12292107
> 
> 赞同：0
> 
> 时间：2012-09-06T02:17:41.583
> 
> 标签：facebook, facebook-graph-api, authentication, facebook-c#-sdk, dotnetopenauth

我在 facebook 上创建了一个应用程序，我正在使用这个应用程序通过 dotnetopenauth 授权用户。

在这里，我将传递 APPID 和 APPSECRET 并获取用于调用 Facebook Graph 以获取 facebook 用户详细信息的令牌。如果我是第一次这样做，用户将被要求在 Facebook 网站上输入用户名/密码，然后在浏览器中创建会话，它将作为 Facebook 用户重定向到我的网站。这意味着如果我在当前窗口中打开一个新标签并打开 facebook，用户将直接看到他/她的页面，而无需询问用户名/密码。- 这是显而易见且可以理解的。

```
 // code
 request = WebRequest.Create("https://graph.facebook.com/me?access_token=" + Uri.EscapeDataString(strAccessToken)); 
 response = request.GetResponse(); 
```

我的查询是：在上述情况之后，如果用户从 Facebook 网站注销或我关闭浏览器窗口，则 Facebook 会话将丢失。但是，我仍然拥有身份验证时获得的访问令牌（上述代码中的字符串）。所以，截至目前，我没有存储来自 Facebook 的任何用户信息（甚至没有 cookie 或其他任何东西）。我只是要求用户将我的应用程序授权为 Facebook 用户。当用户这样做时，我会获得访问令牌，我可以使用它来调用 Graph 和 REST API。这个访问令牌通常保持不变，所以我下次真的不需要传递应用程序 ID 和秘密来获取令牌。实际上，我可以使用存储的令牌请求图形 API 和 REST API 并请求用户详细信息。我已经对此进行了测试并且工作正常。

我正在寻找的是，如果用户打开 www.facebook.com，用户应该看到他/她的个人 facebook 页面，这显然只有当我在当前浏览器中有会话时才有可能。因此，我的问题是：我如何使用我的访问令牌或者我应该使用我的访问令牌进行什么调用，以便我可以为 facebook 用户设置浏览器会话？技术上可行吗？

问候， AG

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T21:32:57.517

不可以。您的网络服务器使用您的访问令牌来调用 facebook。这不可能（也不可取）以设置 facebook.com cookie 的方式影响用户的浏览器，以便用户通过使用访问令牌隐式登录到 Facebook。

# ruby-on-rails - Devise-Rails 3 的登录视图位于何处

> ID：12292113
> 
> 赞同：7
> 
> 时间：2012-09-06T02:18:50.357
> 
> 标签：ruby-on-rails, login, devise

这可能是一个愚蠢的问题，但我的登录视图看起来完全是废话，并且没有使用其他页面的任何 CSS 样式。

无论出于何种原因，我都找不到这个视图来编辑它。我的视图中唯一的文件夹是帖子、页面和布局。有谁知道我可以如何编辑登录视图的外观？

我的路线.rb：

```
Projectmadrone::Application.routes.draw do
   mount RailsAdmin::Engine => '/admin', :as => 'rails_admin'

  devise_for :users
  devise_for :users do get '/users/sign_out' => 'devise/sessions#destroy' end

  resources :posts 
```

用户模型：

```
class User < ActiveRecord::Base

  devise :database_authenticatable, :registerable,
     :recoverable, :rememberable, :trackable, :validatable

  attr_accessible :email, :password, :password_confirmation, :remember_me

  has_many :posts
 end 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-06T02:27:44.850

您需要为设计视图运行生成器，这会将它们复制到您的应用程序（默认情况下它们位于 gem 中）：

```
rails g devise:views 
```

这里有更多关于配置视图的信息：[https ://github.com/plataformatec/devise#configuring-views](https://github.com/plataformatec/devise#configuring-views)

确保您使用并利用和样式化为您提供的视图，以便用户注册和编辑他们的帐户。请参阅 app/views/devise/registrations 不要自己编写。使用这些提供的。

# c++ - 提取模板类中的类型以用于其他模板

> ID：12292116
> 
> 赞同：0
> 
> 时间：2012-09-06T02:19:15.177
> 
> 标签：c++, templates, types

如何从类中提取模板类型：

例如，我有一个像这样的类：

```
template <typename T, typename T2 = def>
class A
{
    typedef T type;
    typedef T2 type2;
    //other stuff
} 
```

我想`type2`在其他模板中使用：

```
template <typename G>
foo(A<G> a)
{
    //This doesn't work:
    std::vector<a::type2> vec;

    //Neither does this:
    std::vector<a->type2> vec;

    //or this:
    std::vector<typename a::type2> vec;

} 
```

那么我如何`type2`确定实例是什么`a`（可以`a`有一个`type2`不是默认值的值）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T02:22:09.950

这应该有效：

```
std::vector<typename A<G>::type2> vec; 
```

*原因*：`std::vector`期望一个完整的类型作为它的参数，并且只是`A`一个`template`，但是`A<G>`变成了一个完整的类型。从你的例子中，我已经提到过`A<G>`，但它可以是`A<int>`任何`A<char>`东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T04:14:02.373

如果您的编译器支持它，您可以使用该`decltype`功能来命名对象的类型。

```
template <typename G>
void foo(A<G> a)
{
    std::vector<typename decltype(a)::type2> vec;
} 
```

在这个例子中，`decltype(a)`是类型`A<G>`。

# php - 配置所有转发到 php 脚本的唯一每个用户电子邮件地址的正确方法是什么？

> ID：12292117
> 
> 赞同：3
> 
> 时间：2012-09-06T02:19:17.360
> 
> 标签：php, email, sendmail

我有一个大约有一个 Web 应用程序。30k 用户并快速增长。我们希望通过电子邮件启用某些功能，这意味着为每个用户分配一个唯一的电子邮件地址（出于安全原因）。发送到这些唯一地址的电子邮件应转发到 PHP 脚本。PHP 脚本需要访问电子邮件的所有部分——标题、正文和任何附件。我不确定设置它的正确方法是什么。我们目前正在使用 sendmail 并且更愿意坚持使用它（这是 linux，如果重要的话）。我已经能够将单个电子邮件转发到脚本，但是（在我看来）创建 30k 别名然后每次新用户注册时创建一个新别名是不可扩展的。我会更喜欢某种类型的包罗万象/基于 RegEx 的解决方案，它只是告诉 PHP 脚本作为收件人的唯一电子邮件地址，

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-10T17:22:55.890

30k 帐户不会向我们提供有关您希望处理的**流量的任何信息。**但让我们假设这是另一个问题。

您可以创建`catch all`帐户类型，它只会接受您在其中创建用户地址的域中的任何电子邮件（基本上`*@domain`）。然后您可以在每封传入邮件上启动您的处理脚本（您通常可以从`stdin`流中获取整个邮件正文（在 PHP 中可通过 访问`php://stdin`），并根据需要进行处理。但是如果您想使用 PHP（或几乎任何脚本语言），因为每封邮件都需要生成新的 PHP 进程，初始化所有扩展等等。这一切都需要时间和资源，而且更大的垃圾邮件泛滥，你的盒子几乎被烤熟了。

或者，您可以将您的邮件作为任何其他邮件收集在邮箱中，然后让您的脚本从那里获取它（直接挖掘`maildir`或通过 IMAP 或 POP 等邮件协议）。从管理的角度来看，这看起来更好，只要您的邮件服务器可以接受传入的邮件，您的整个系统仍然可以工作。您甚至可以尝试通过设置一些过滤规则（在 MTA 级别）来“分区”您的系统，并将传入的邮件发送到单个邮箱而不是更多邮箱。然后，您可以更轻松地并行处理这些邮件（无需费心处理具有多个实例的相同邮件等）。“分区”模式可以是任何东西，即取决于您的完整地址命名方案，如果基于字母，它将是单独的邮箱`a*@`，`b*@`或者`[a-d]*@]`（取决于交通），并不重要。

或者，您可以尝试将传入邮件的正文放入数据库，然后如上所述进行处理，而不需要任何 POP/IMAP 处理。

无论您选择什么，我建议您**不要**将任何形式的处理脚本直接放在邮件接收流程链中。延迟 1 分钟通常不是问题（因此您可以运行任何类型的守护进程并获取邮件进行处理、cronjob 等），用户可以等待那么久而不会抱怨 - 看起来即时处理很可能不会在您的情况下也是强制性的。但如果是这样，那么恐怕 PHP**可能**不是最好的工具选择。

**编辑：（回答评论问题而不是达到评论大小限制）**

我对 Sendmail 不够熟悉，无法在这里为您提供精确的配置指令（我在定制的 qmail 上），但我希望有一些一般性的提示适用。首先，我相信 Sendmail 支持虚拟用户（这意味着邮箱中不存在的用户`/etc/passwd`）。如果是这样，那么 MTA 通常应该让您使用一些内置提供商查询 DB（以查明目标电子邮件地址是否有效以及该用户的主目录在哪里放入邮件）。或者（甚至更好）调用外部程序来做到这一点。后者在这里是赢家，因为实际上没有用户，因此您可以编写小脚本或（再次，性能更好）C 应用程序来解决问题。由于您所需要的只是根据一些简单的预定义规则将传入的邮件“分离”到几个物理邮箱中，所以几个`if()`s +`substr()`s，你就完成了。几行，不需要数据库，很快。或者，更好的是，您甚至可以在`roundrobin`这里尝试最愚蠢的方法 - 实际上，如果邮件命中`accountA`或`accountB`只要 50% 的邮件以 50% 的结尾`A`和其他 50%的结尾`B`（或者如果您选择 4 个目标帐户，则为 25%等），这是我认为你应该关心的唯一条件。您可以尝试使用`procmail`它，但我认为它没有意义，并且对性能不是最好的。

至于将邮件放入数据库。这取决于 MTA - 默认情况下没有人这样做，因为它比将邮件放入 maildirs 慢（因为 DB 通常是其他主机），但仍然有几个解决方案。要么为 Sendmail 寻找第三方补丁，要么添加另一个脚本/应用程序，将邮件从物理邮箱“复制”到数据库中。你可能会说 - 但它会更慢。当然，但同样 - 我不知道非实时处理在你的情况下是否真的很重要（我的盲目猜测 - 它没有），所以为什么要打扰。如果您在这里节省了几毫秒，但在整个解决方案的进一步维护上花费了几分钟，那么选择就很明显了。

顺便说一句：以防万一——每当我写的时候，`mailbox`我肯定是指用户邮件的容器，而**不是** `mailbox`文件格式。至于文件格式`maildir`（或其他东西）是更好的选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T15:53:46.840

你真的想为每封收到的电子邮件分叉一个 PHP 吗？如果您要处理体面的邮件量，那可能会变得昂贵。为什么不在邮件服务器中使用自定义回调来处理传入邮件并插入数据库，然后使用工作脚本不断轮询要处理的新邮件？

mail-to-db 部分应该比所有处理都轻得多，这为您提供了一个空闲队列，因此如果您几乎同时收到一堆请求，您的系统不会在尝试处理时崩溃他们一下子。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-14T19:49:50.023

做了一个类似的实现，虽然规模较小......但应该扩展以满足您的目的。

两个单独的问题

(1) 邮件 - 前面提到的包罗万象是一个很好的解决方案，尽管您将不得不处理垃圾邮件和格式错误的电子邮件地址（这可能是好事也可能是坏事）。如果您拥有服务器，只需为“虚构”帐户设置别名并指示邮件服务器将它们全部放入同一个中央邮箱即可完成任务，因为您不需要单独的实际帐户，并且标题信息将保持不变。具体取决于您的邮件解决方案，但任何邮件服务器都应该具备处理此任务和卷的能力，并且您应该能够编写别名创建脚本......否则返回包罗万象

(2) PHP解析处理——PHP内置的pop3函数可以轻松处理查看（现在的）单个邮箱账户和处理消息；我曾经经历过的一些功能示例是：

```
function pop3_login($host,$port,$user,$pass,$folder="INBOX",$ssl=false){
        $ssl=($ssl==false)?"/novalidate-cert":"";
        return (imap_open("{"."$host:$port/pop3$ssl"."}$folder",$user,$pass,OP_SILENT));
}
function pop3_stat($connection){
        $check = imap_mailboxmsginfo($connection); # changed from $imap
        return ((array)$check);
}
function pop3_retr($connection,$message,$section='1'){
        return(quoted_printable_decode(imap_fetchbody($connection,$message,$section)));
}
function pop3_dele($connection,$message){
        return(imap_delete($connection,$message));
}
function pop3_close($connection){
        return(imap_close($connection,CL_EXPUNGE));
} 
```

一切都非常通用，如果您不需要控件，可能会有类。最重要的是，PHP 拥有快速解析和处理邮件消息所需的一切。

# android - 无法将自定义标题与其他标题功能错误组合

> ID：12292119
> 
> 赞同：1
> 
> 时间：2012-09-06T02:19:45.700
> 
> 标签：android

我有一个tabhost，里面有一个活动。我希望此活动具有自定义的标题栏，因此我使用了以下代码。但它给出了错误无法将自定义标题与其他标题功能结合起来。我查看文件，只看到一个主题应用于它，我不确定为什么会发生这种情况......知道吗？我还在我的 tabhost 中的其他活动中使用 dialogtheme，但我认为这很好，因为我只将我的自定义主题应用于一个 Activity（名为 startActivity）。

显现：

```
<application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:name=".MainTabActivity"
            android:configChanges="orientation|keyboardHidden|screenSize"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name=".StartActivity"
            android:label="@string/app_name"
            android:theme="@style/CustomTheme"   //this is the Custom title bar theme for this activity
            android:screenOrientation="portrait" >
    </activity> 
```

活动 onCreate()：

```
 requestWindowFeature(Window.FEATURE_CUSTOM_TITLE);  //error happned here
    getWindow().setFeatureInt(Window.FEATURE_CUSTOM_TITLE, R.layout.window_title);
    super.onCreate(savedInstanceState);
    Log.i(TAG, "onCreate()");
    setContentView(R.layout.startactivity); 
```

布局文件夹中的 window_title.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="horizontal"
    android:layout_width="fill_parent"
    android:layout_height="35dip"
    android:gravity="center_vertical"
    android:paddingLeft="5dip"
    android:background="#323331">

    <ImageView
        android:id="@+id/header"
        android:src="@drawable/ic_launcher"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"/>

</LinearLayout> 
```

最后，@style：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <style name="CustomWindowTitleBackground">
        <item name="android:background">#323331</item>
    </style>

    <style name="CustomTheme" parent="android:Theme">
        <item name="android:windowTitleSize">35dip</item>
        <item name="android:windowTitleBackgroundStyle">@style/CustomWindowTitleBackground</item>
    </style>
</resources> 
```

# localization - App_GlobalResources 的 SaaS 方法

> ID：12292120
> 
> 赞同：1
> 
> 时间：2012-09-06T02:19:59.780
> 
> 标签：localization, globalization, saas, app-globalresources

我们正在构建一个应用程序，其中*多个*网站由IIS 上的*单个站点提供支持*

我们有一个基于网络的工具，网站管理员可以在其中编辑“resx”文件，例如：/App_GlobalResources/es/Backend.es.resx

但是，这样做有两个问题：

1.  更改这些文件会影响*所有*站点。
2.  它还会导致整个 IIS 站点重新启动。

还有另一种方法吗？我认为将字符串存储在数据库中可能不是一个好主意，因为它会导致每页数百次 SQL 查找。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T15:03:12.810

您是否提供编辑 resx 文件的界面？如果是这样，请将它们缓存在 Application 范围内，并在更新时使缓存过期。然后，将它们存储在数据库中。这样，您将拥有速度和灵活性。仅仅因为数据在数据库中，并不意味着它会很慢。缓存是解决方案。当然，第一次查找会很慢，但后续查找会尽可能快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T16:28:00.627

使用支持缓存的数据库驱动资源提供程序。你很幸运，因为[其他人](http://www.west-wind.com/weblog/)已经[做到了](http://www.west-wind.com/presentations/wwDbResourceProvider/)

# shell - 在 KornShell 中构建动态变量名称

> ID：12292122
> 
> 赞同：1
> 
> 时间：2012-09-06T02:20:30.680
> 
> 标签：shell, variables, dynamic, ksh

我进行了搜索，但没有找到与我正在尝试做的事情非常相似的事情。我有一个服务器主机名和 IP 列表

*   瑟拉 | 帕
*   服务器b | IPb
*   服务器 | IPn

我想 cat 这个文件并将每个元素放入变量中

*   Server_Var_1
*   IP_Var_1
*   Server_Var_2
*   IP_Var_2
*   Server_Var_n
*   IP_Var_n

我目前拥有的是以下 KornShell (ksh)：

```
Counter=0
cat hostfile|while read line; do
Server_Var_"$Counter"=echo $line | awk -F"|" '{print $1}'
IP_Var_"$Counter"=echo $line | awk -F"|" '{print $2}'
echo $Server_Var_[*] $IP_Var_[*]
done 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T06:12:08.847

```
$ cat hostfile
server1 | 192.168.1.101
server2 | 192.168.1.102
server3 | 192.168.1.103
$ cat foo
#!/bin/sh

counter=0
while IFS=" |" read name ip; do
    eval Server_VAR_$counter=$name
    eval IP_VAR_$counter=$ip
    : $(( counter += 1 ))
done < hostfile

echo $Server_VAR_0:$IP_VAR_0
echo $Server_VAR_1:$IP_VAR_1
echo $Server_VAR_2:$IP_VAR_2
$ ./foo
server1:192.168.1.101
server2:192.168.1.102
server3:192.168.1.103 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T08:16:29.160

这是对原始问题的轻微改动（@William Pursell 完美回答了这个问题）。因此，这段代码将产生相同的输出，但使用了一个复合变量数组。请注意，这是特定于`ksh93`.

```
$ cat  read_hostvars

#!/bin/sh

counter=0
typeset -a Server
while IFS=" |" read name ip; do
    Server[counter].name=$name
    Server[counter].ip=$ip
    (( counter++ ))
done < hostfile

for n in ${!Server[@]}; do
    echo ${Server[n].name}:${Server[n].ip}
done 
```

# macos - 运行服务器风格程序的 OS X main.m

> ID：12292127
> 
> 赞同：1
> 
> 时间：2012-09-06T02:20:58.203
> 
> 标签：macos, nsrunloop

我编写了我的第一个 OS X 命令行程序，它是一个服务器风格的程序。它的工作是处理各种信息并响应其他事件。

我的 main.m 中有以下代码

```
int main(int argc, const char * argv[]) {
    @autoreleasepool {

        PIPieman *pieman = [[[PIPieman alloc] init] autorelease];
        [pieman start];

        NSRunLoop *loop = [NSRunLoop currentRunLoop];
        while (!pieman.finished && [loop runMode:NSDefaultRunLoopMode beforeDate:[NSDate distantFuture]]);

    }
    return 0;
} 
```

我从各种文档中获得了这段代码，基本思想是一旦`pieman.finished`设置为 YES，程序就会退出。

我遇到的问题是 pieman 内的代码正在设置标志，但没有触发运行循环，因此程序不会退出。我一直在寻找触发运行循环的方法，似乎有很多种，但没有一个感觉是一个好的解决方案。例如，我可以将时间减少`beforeDate:`到几秒钟以导致定期触发运行循环。

我的偏好是在`finished`布尔值更改时触发运行循环。

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T02:45:37.150

您需要告诉运行循环从`runMode:beforeDate:`. 该类`NSRunLoop`没有定义消息来执行此操作，而是`NSRunLoop`构建在 上`CFRunLoop`，并且该`CFRunLoopStop`函数可以满足您的需要。

```
@implementation PIPieman

...

- (void)setFinished:(BOOL)finished {
    _finished = finished;
    CFRunLoopStop(CFRunLoopGetMain());
} 
```

# entity-framework-4.3 - 将 CreateDatabaseIfNotExists 与代码优先迁移一起使用？

> ID：12292137
> 
> 赞同：1
> 
> 时间：2012-09-06T02:23:01.433
> 
> 标签：entity-framework-4.3, entity-framework-migrations

在我的项目中，当前的方法是创建数据库（如果尚不存在）并使用`CreateDatabaseIfNotExists`并从中播种初始数据`Intializer`。在升级到 Entity 4.4 后，我还添加了 Code First 迁移支持，这样将来当我们更改模型/数据库结构时，我们可以更新客户端数据库而不会删除它们现有的数据库。

但是它似乎并没有很好地工作，例如，我现在被困在无法加载表单并且错误消息类似于`The model backing the 'myEntities' context has changed since the database was created. Consider using Code First Migrations to update the database (http://go.microsoft.com/fwlink/?LinkId=238269).`. 但是模型和数据库确实是更新版本，只是似乎 Migration 无法识别由 生成的数据库`CreateDatabaseIfNotExists`，但同时在运行时似乎一切正常。

在那之后我注意到如果我让`CreateDatabaseIfNotExists`初始化一个数据库，`Add-migration`之后会失败并抱怨`pending migration`并要求我做一个`update-database`. 当我尝试执行 a 时`update-database`，它也会失败，因为迁移路径似乎假设数据库处于初始设置状态，并将尝试运行所有迁移脚本，而不应运行任何迁移脚本，因为生成的数据库`CreateDatabaseIfNotExists`确实与当前同步模型，根本不应该迁移。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T20:59:21.790

我发现`MigrationHistory`System Tables 中有一个表，该表将始终保存数据库初始化历史记录，无论初始化程序是`CreateDatabaseIfNotExists`还是`MigrateDatabaseToLatestVersion`. 不同之处在于，如果数据库由`CreateDatabaseIfNotExists1, everytime the database initialized, the migriationId for that initialize record will be different, but`MigrateDatabaseToLatestVersion 初始化，则将始终为每个迁移步骤保存相同的迁移 ID 集。我猜这就是 Entity Framework 5.0 的工作原理。

所以最后，我放弃并重写了我的 DB Access 代码，以在我的代码的其他部分而不是`CreateDatabaseIfNotExists`Migration `s`Configuration 类中播种初始数据库数据，因为两者都适合我的需要。

# php - 如何使用下拉菜单显示 mysql 数据？

> ID：12292140
> 
> 赞同：0
> 
> 时间：2012-09-06T02:23:33.497
> 
> 标签：php, mysql

这就是我想出的，我可以在我的“性别”字段中插入一个数据，但是当我在编辑/更新页面中时，我希望“性别”字段只显示“选择一个”值，而不是“男性/女性” "

提前致谢

```
<form action='#' method='post' border='0'>
<table>
 <tr>
  <td>
   <select name="gender" id="gender">
   <option>Select One</option>
   <option>Male</option>
   <option>Female</option>
   </select>
  </td>
 </tr>
 <td>
  <input type='hidden' name='id_number' value='<? php echo $id_number ?>' />
  <input type='hidden' name='action' value='edit' />
  <input type='submit' value='Edit' />
 </td>
</table>
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T02:25:41.167

您必须将一个名为的属性添加到您希望默认选择`selected="selected"`的标签中。`<option>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T04:37:17.010

只需将数据库中的 $gender 值导入编辑页面，然后添加：

```
<select name="gender" id="gender">
    <option>Select One</option>
    <option <?if $gender=="Male" echo 'selected="selected"'?>>Male</option>
    <option <?if $gender=="Female" echo 'selected="selected"'?>>Female</option>
</select> 
```

就是这样的朋友。我希望它对你很有用

# asp.net - IE 跨子域共享登录 cookie - 不需要

> ID：12292146
> 
> 赞同：1
> 
> 时间：2012-09-06T02:24:50.900
> 
> 标签：asp.net, internet-explorer, cookies, web-config

我有一个 www.mysite.com 和几个子域的登录 cookie，例如：

*   www.one.mysite.com
*   www.two.mysite.com
*   www.three.mysite.com

仅在 IE 中（firefox 不这样做）如果我登录 mysite.com，则该 cookie 似乎在所有子域之间共享（登录到所有站点）。如果我使用子域 (one.mysite.com) 登录，则不会共享 cookie（仅登录到 one.mysite.com）。

www.mysite.com 和 www.one.mysite.com 共享同一个 web.config 文件，我不介意他们共享一个登录 cookie（它是同一个站点，但 url 是不同的），但不是在其余的的网站。

如何阻止 IE 将 cookie 共享给所有或部分子域？

我可以只使用 web.config 文件吗？

* * *

**更新：**

我在我的 web.config 文件中使用了成员资格和角色管理器。在上面的问题中我没有设置

```
<authentication mode="Forms"> <forms domain="... 
```

据我所知，

```
<authentication mode="Forms"> <forms domain="mysite.com" ... 
```

可以只允许一个域 (www.mysite.com) 或所有子域 (.mysite.com)。我需要一种方法来允许 www.mysite.com 和一个子域。这可能吗？

我可以告诉其他子域不要接受 .mysite.com cookie吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T02:31:02.040

通常，所有子域都可以访问 example.com 上设置的 cookie。但是，如果您想将 cookie 限制为特定的子域，您应该手动设置您希望他们访问的每个域的域属性。

```
Response.Cookies["domain"].Domain = "www.example.com"; 
```

[一些有价值的阅读](http://msdn.microsoft.com/en-us/library/system.web.httpcookie.domain%28v=vs.100%29.aspx)，或者[更有价值的阅读......](http://msdn.microsoft.com/en-us/library/ms178194%28v=vs.100%29.aspx)（阅读：“限制 Cookie 域范围”部分），最后是“[如何限制 ASP.NET 中特定子域的 cookie](http://www.dotnetfunda.com/articles/article1413-how-to-limit-cookie-for-a-particular-domain-in-aspnet.aspx) ”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T01:58:08.353

答案是我真的不知道这里的登录过程发生了什么。

和我一起工作的另一个人正在解决这个问题。显然它与机器密钥有关，需要在除主要站点（www.mysite.com）之外的所有其他子域网站（two.mysite.com、three.mysite.com）上进行更改。

这几乎不是一个答案，但如果你像我一样愚蠢（对 ASP.Net 登录不够了解），并且必须处理 IE8/兼容性视图和这个登录问题......不知道在哪里寻找答案。

# android - 在android中检测没有触摸感的按钮

> ID：12292147
> 
> 赞同：1
> 
> 时间：2012-09-06T02:24:57.270
> 
> 标签：android

我有 8 个按钮 我希望应用程序通过滚动屏幕而不是触摸来检测按钮？喜欢 Jelly bean 中的辅助功能吗？我不确定如何将该功能称为？手势？运动感？

这可能吗？我应该寻找什么？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T04:15:54.900

默认情况下，Android 中的 UI 元素可以通过滚动球、箭头键等来聚焦... View 有一个 View.setOnFocusChangedListener 回调。您还可以以编程方式将焦点设置在元素上。

我很快写了一些示例代码，但没有测试。

```
float initialX = 0;
float initialY = 0;
int currentFocusedChild = 0;
List<View> children;

public void walkElements() {
    final LinearLayout mainLayout = (LinearLayout) findViewById(R.id.main_layout);
    children = mainLayout.getFocusables(View.FOCUS_FORWARD);
    mainLayout.setOnTouchListener(new OnTouchListener() {

        @Override
        public boolean onTouch(View v, MotionEvent event) {
            switch(event.getAction()) {
                case MotionEvent.ACTION_DOWN:
                    initialX = event.getX();
                    initialY = event.getY();                        
                    break;
                case MotionEvent.ACTION_MOVE:
                    float diffX = event.getX() - initialX;
                    float diffY = event.getY() - initialY;

                    if(diffY > 0) {
                        if (currentFocusedChild < children.size() - 1) {
                            currentFocusedChild++;
                        }
                    } else {
                        if (currentFocusedChild > 0) {
                            currentFocusedChild--;
                        }
                    }
                    children.get(currentFocusedChild).setSelected(true);

                    //Sleep for a period of time so the selection is slow enough for the user.
                    Thread.sleep(300);
                    break;
                case MotionEvent.ACTION_UP:
                    children.get(currentFocusedChild).performClick();
                    break;
            }
            return false;
        }
    });

} 
```

# python - applicationOpenUntitledFile 中的 _class_getName 崩溃

> ID：12292151
> 
> 赞同：0
> 
> 时间：2012-09-06T02:25:09.843
> 
> 标签：python, objective-c, cocoa

我有这个代码：

```
from AppKit import *

def setupWindow():
    w = NSWindow.alloc()
    w.initWithContentRect_styleMask_backing_defer_(
        ((200.0, 200.0), (250.0, 100.0)),
        NSTitledWindowMask |
        NSClosableWindowMask |
        NSResizableWindowMask,
        NSBackingStoreBuffered, False)
    w.setTitle_("Hello world")

    w.display()
    w.orderFrontRegardless()
    w.makeMainWindow()

    app.delegate().mainWindow = w

    return w

class PyAppDelegate(NSObject):

    def applicationOpenUntitledFile_(self, app):
        print "applicationOpenUntitledFile_", app
        print "delegate:", app.delegate()
        print self.__class__
        setupWindow()

app = NSApplication.sharedApplication()
appDelegate = PyAppDelegate.alloc().init()
app.setDelegate_(appDelegate)
app.finishLaunching()
app.run() 
```

当我单击停靠栏并且没有打开任何窗口时，我得到以下输出：

```
applicationOpenUntitledFile_ <NSApplication: 0x7fbb57e10bb0>
delegate: <PyAppDelegate: 0x7fbb5770c0f0>
<objective-c class PyAppDelegate at 0x7fbb57e05c30>
fish: Job 1, '../main.py ' terminated by signal SIGSEGV (Address boundary error) 
```

随着这次崩溃：

```
Crashed Thread:  0  Dispatch queue: com.apple.main-thread

Exception Type:  EXC_BAD_ACCESS (SIGSEGV)
Exception Codes: EXC_I386_GPFLT

Thread 0 Crashed:: Dispatch queue: com.apple.main-thread
0   libobjc.A.dylib                 0x00007fff9474acbc _class_getName + 13
1   _objc.so                        0x0000000109fda3a2 0x109fb7000 + 144290
2   org.python.python               0x0000000109d074e7 0x109c67000 + 656615
3   org.python.python               0x0000000109cd10b7 0x109c67000 + 434359
4   org.python.python               0x0000000109cd0f10 PyDict_SetItem + 145
5   _objc.so                        0x0000000109fdaba1 0x109fb7000 + 146337
6   org.python.python               0x0000000109cdae38 PyObject_SetAttr + 157
7   org.python.python               0x0000000109c7f78d PyEval_EvalFrameEx + 5632
8   org.python.python               0x0000000109c84869 0x109c67000 + 120937
9   org.python.python               0x0000000109c8063a PyEval_EvalFrameEx + 9389
10  org.python.python               0x0000000109c7e147 PyEval_EvalCodeEx + 1934
11  org.python.python               0x0000000109cb7d7a 0x109c67000 + 331130
12  org.python.python               0x0000000109c766c6 PyObject_Call + 97
13  _objc.so                        0x0000000109fcc758 0x109fb7000 + 87896
14  libffi.dylib                    0x00007fff9023b8a6 ffi_closure_unix64_inner + 508
15  libffi.dylib                    0x00007fff9023af66 ffi_closure_unix64 + 70
16  com.apple.AppKit                0x00007fff923ce664 -[NSApplication _doOpenUntitled] + 482
17  com.apple.AppKit                0x00007fff92619e93 -[NSApplication(NSAppleEventHandling) _handleAEReopen:] + 240
18  com.apple.AppKit                0x00007fff923cbabc -[NSApplication(NSAppleEventHandling) _handleCoreEvent:withReplyEvent:] + 351
19  com.apple.Foundation            0x00007fff9505f35b -[NSAppleEventManager dispatchRawAppleEvent:withRawReply:handlerRefCon:] + 308
20  com.apple.Foundation            0x00007fff9505f1bd _NSAppleEventManagerGenericHandler + 106
21  com.apple.AE                    0x00007fff94864f68 aeDispatchAppleEvent(AEDesc const*, AEDesc*, unsigned int, unsigned char*) + 307
22  com.apple.AE                    0x00007fff94864dc9 dispatchEventAndSendReply(AEDesc const*, AEDesc*) + 37
23  com.apple.AE                    0x00007fff94864c89 aeProcessAppleEvent + 318
24  com.apple.HIToolbox             0x00007fff94369e29 AEProcessAppleEvent + 100
25  com.apple.AppKit                0x00007fff923c82a6 _DPSNextEvent + 1456
26  com.apple.AppKit                0x00007fff923c7862 -[NSApplication nextEventMatchingMask:untilDate:inMode:dequeue:] + 128
27  com.apple.AppKit                0x00007fff923bec03 -[NSApplication run] + 517
28  libffi.dylib                    0x00007fff9023ade4 ffi_call_unix64 + 76
29  libffi.dylib                    0x00007fff9023b619 ffi_call + 853
30  _objc.so                        0x0000000109fd1557 PyObjCFFI_Caller + 1980
31  _objc.so                        0x0000000109fe6372 0x109fb7000 + 193394
32  org.python.python               0x0000000109c766c6 PyObject_Call + 97
33  org.python.python               0x0000000109c8078d PyEval_EvalFrameEx + 9728
34  org.python.python               0x0000000109c84869 0x109c67000 + 120937
35  org.python.python               0x0000000109c8063a PyEval_EvalFrameEx + 9389
36  org.python.python               0x0000000109c7e147 PyEval_EvalCodeEx + 1934
37  org.python.python               0x0000000109c7d9b3 PyEval_EvalCode + 54
38  org.python.python               0x0000000109cb9c70 0x109c67000 + 339056
39  org.python.python               0x0000000109cb9d3c PyRun_FileExFlags + 165
40  org.python.python               0x0000000109cb9726 PyRun_SimpleFileExFlags + 410
41  org.python.python               0x0000000109cdde27 Py_Main + 2715
42  libdyld.dylib                   0x00007fff946a07e1 start + 1 
```

崩溃是在线的`app.delegate().mainWindow = w`。

为什么？难道我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T02:55:06.023

我发现了问题。窗口上的正常关闭行为会产生额外的`release`. 见[这里](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSWindow_Class/Reference/Reference.html#//apple_ref/occ/instm/NSWindow/close)。

这段代码会导致同样的崩溃（在您将其设置为的行中`None`），它​​变得更加清晰：

```
if app.delegate().mainWindow:
    app.delegate().mainWindow.close()
    app.delegate().mainWindow = None
app.delegate().mainWindow = w 
```

它崩溃是因为`close()`已经释放了对象。然后 PyObjC 尝试再次释放它。

因此，解决方法是：

```
w.setReleasedWhenClosed_(False) 
```

* * *

另一种可能的解决方案是不保留对该`NSWindow`对象的任何 Python 引用。然后，在 中`setupWindow()`，而不是设置`mainWindow`和返回窗口，只需执行以下操作：

```
w.retain() 
```

# ruby-on-rails-3 - 如何在子模型中使用 after_save 回调来更新父模型中的属性？

> ID：12292153
> 
> 赞同：2
> 
> 时间：2012-09-06T02:25:23.127
> 
> 标签：ruby-on-rails-3, callback, parent-child

我有两个模型，User 和 TrainingSession：

```
class User < ActiveRecord::Base
has_many :training_sessions
end

class TrainingSession < ActiveRecord::Base
belongs_to :user
end 
```

每个用户都有一定数量的*积分*，基于他们累积的 training_sessions 的持续时间总和（在 TrainingSession 模型中）：

```
class TrainingSession
def points
  sum(:duration) / 6
end 
```

目前，在用户创建新的 training_session 后，我正在更新 User 模型中的 points 属性，如下所示（来自 TrainingSession 控制器）：

```
# POST /training_sessions
# POST /training_sessions.json
def create
@user = User.find_by_id(session[:user_id])
@training_session = @user.training_sessions.new(params[:training_session])
@points = @user.training_sessions.points
@user.update_attribute(:points, @points)
... 
```

问题是每次创建 training_session 时，它都不包括用户刚刚从最近创建的 training_session 中累积的积分。例如，如果用户有 160 分，那么他们跑了 60 分钟，他们将获得 10 分，达到 170 分。但是在创建了 60 分钟的运行 training_session 之后，用户模型将其更新为 160 分。所以它总是落后一步，可以这么说。我尝试在 TrainingSession 模型上使用 after_save 回调，如下所示：

```
class TrainingSession < ActiveRecord::Base
after_save :update_points  

private

def update_points
 count = @user.training_sessions.sum(:duration)
 if count >= 1
  points = count / 6
 end
 @user.update_attribute(:points, points)
end 
```

但是在尝试创建新的 training_session 时出现此错误：

```
undefined method `training_sessions' for nil:NilClass 
```

所以，我的问题是，如何在包含最近创建的 training_session 的情况下更新我的用户模型上的 :points 属性？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T02:57:00.993

`@user`在您的模型中未定义。这就是你得到错误的原因。

培训课程属于用户，因此在您的模型中，您可以通过`self.user`或简单地获取用户`user`。此代码应该可以工作：

```
def update_points
  count = self.user.training_sessions.sum(:duration)
  points = count / 6 if count >= 1
  self.user.update_attribute(:points, points)
end 
```

# matlab - 分割后如何获取区域？

> ID：12292155
> 
> 赞同：0
> 
> 时间：2012-09-06T02:25:33.090
> 
> 标签：matlab

![分割的边界](../Images/7fc375bd84ce2b77730717301f9efc2f.png)

正如上图所示，我在分割后得到了一张图像的边界。但我只是得到了逻辑边界，我想标记被分段分割的每个区域。函数 bwlabel 不起作用，它只能标记连接区域。那么，我如何标记这 200 个区域？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T04:12:13.157

如果您的原始图像称为*img*并且您当前的 bw 分段图像称为*I*，我建议：

```
I = (I==0); % invert the image
cc = bwconncomp(I,8); % could use 4-connected neighborhood also
s = regionprops(cc,img,'all'); 
```

最后一行将为每个分割区域提供原始图像中的所有可用属性（如果需要）。你可以使用你提到的*bwlabel*，但我认为*bwconncomp*可能更快/更有效。

*用于标记的bwlabel*的替代方法是：

```
L = labelmatrix(cc); 
```

然后我喜欢使用*label2rgb*查看段：

```
RGB_label = label2rgb(L, @jet, 'k', 'shuffle');
imshow(RGB_label); 
```

这将根据提供的颜色图（在本例中为 jet）随机为每个段着色。

# http - 请求前的 HTTP 响应

> ID：12292158
> 
> 赞同：52
> 
> 时间：2012-09-06T02:25:52.090
> 
> 标签：http, networking, tcp, comet

我的问题可能听起来很愚蠢，但我只是想确定一下：

*   是否可以在请求该资源之前发送 HTTP 响应？

例如，假设您有一个 HTML 页面`index.html`，该页面仅显示名为`img.jpg`. 现在，如果您的服务器知道访问者每次都会请求 HTML 文件，然后是 jpg 图像：

服务器是否可以在 HTML 文件之后发送图像以节省时间？

我知道 HTTP 是一个同步协议，所以理论上它不应该工作，但我只是希望有人确认（或不确认）。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2014-06-09T15:08:10.400

Jacques Mattheij最近[发表的一篇文章](http://jacquesmattheij.com/the-several-million-dollar-bug)引用了您的问题，声称尽管 HTTP 被设计为同步协议，但*实现*并非如此。实际上，浏览器（他没有具体说明哪个）接受尚未发送的请求的答案。

另一方面，如果您正在寻找不那么 hacky 的东西，您可以看看：

*   允许服务器向浏览器发送内容的推送技术。取代长轮询/彗星“黑客”的现代实现是[websockets](http://en.wikipedia.org/wiki/WebSocket)。您可能还想看看[socket.io](http://socket.io/)。
*   或者，您可能想看看[client-side routing](https://stackoverflow.com/questions/10190215/what-is-client-side-routing-and-how-is-it-used)。一些实现将其与缓存技术相结合（我相信在[derby.js中）。](http://derbyjs.com/)

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-09-06T02:31:51.567

如果有人请求 /index.html，而您发送了两个响应（一个用于 /index.html，另一个用于 /img.jpg），您怎么知道收件人会收到这两个响应并知道在第二个响应之前如何处理它们请求进入？

问题不在于发送。问题在于接收器可能会收到意外数据。

另一个问题是您拒绝客户端使用 HTTP 缓存工具，如 If-Modified-Since 和 If-None-Match（即客户端可能不希望发送 /img.jpg，因为它已经有一个缓存复制）。

也就是说，您可以通过使用[Comet](http://en.wikipedia.org/wiki/Comet_%28programming%29)技术来近似服务器推送的好处。但这比简单地预测传入的 HTTP 请求要复杂得多。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-06T02:35:37.697

通过有效地缓存资源，您将获得更好的结果，即设置[适当的缓存标头](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html)并配置您的 Web 服务器以进行缓存。如果这是一个特定问题，您还可以[使用 base 64 encoding 内联图像。](http://en.wikipedia.org/wiki/Data_URI_scheme)

您还可以查看[长轮询](https://stackoverflow.com/questions/333664/simple-long-polling-example-code)javascript 解决方案。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-06T02:34:39.210

您正在寻找[服务器推送](http://www.chromium.org/spdy/link-headers-and-server-hint)：它在 HTTP 中不可用。像 SPDY 这样的协议有它，但如果你被限制在 HTTP 上，那你就不走运了。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-06T02:36:03.653

我认为不可能在同一个 HTTP 响应中混合 .html 和图像。至于“立即”发送图像数据，在第一次请求之后 - 有一个“静态资源”的概念可能会有所帮助（但它需要客户端为特定资源创建一个新的请求）。

[文章](https://developers.google.com/speed/docs/best-practices/request)中提到了一些有趣的事情。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-09-06T02:31:38.307

不，这是不可能的。

请求的第一行包含被请求的资源，因此除非您首先检查请求的字节（至少一行的值），否则您将不知道要响应什么。

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2012-09-06T10:06:35.357

不，HTTP 被定义为请求/响应协议。一个请求：一个响应。其他任何东西都不是 HTTP，而是其他东西，您必须正确指定它并在两端完全实现它。

# android - 如何解决密钥库加载：无效的密钥库格式？

> ID：12292160
> 
> 赞同：0
> 
> 时间：2012-09-06T02:26:05.460
> 
> 标签：android, keystore, jarsigner

三个月前，我获得了我的应用程序的发布密钥。现在我格式化我的电脑，当我用我的 releasekey 签署我的应用程序时，我得到了错误：java.lang.RunTimeException: keystore load: invalid keystore format。

我应该如何解决这个错误？

命令是：jarsigner -verbose -keystore "D:\releasekey.keystore" "D:\myApp.apk" releasekey

我正在使用较旧的密钥库（第一个），但我得到了提到的错误。

我试着得到这个：

```
java.io.IOException: java.io.IOException: invalid keystore format 
at sun.security.provider.javaKeyStore.engineLoad(JavaKeyStore.java:650) 
at sun.security.provider.javaKeyStore$JKS.engineLoad(JavaKeyStore.java:55) 
at java.security.KeyStrore.load(KeyStore.java:1214) 
at sun.security.tools.KeyTool.doCommands(KeyTool.java:789) 
at sun.security.tools.KeyTool.run(KeyTool.java:340) 
at sun.security.tools.KeyTool.main(KeyTool.java:333) 
```

![在此处输入图像描述](../Images/d8f629fa9fd930ac35bed3b52efd8b25.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T02:45:09.827

密钥库保存用于签署应用程序的私有加密密钥 - 重新运行命令将生成一个完全不同的密钥（密码只是保护保存它的文件 - 它与加密密钥本身没有直接关系） - 您无法恢复/rebuild 如果你丢失了密钥库文件。

如果您丢失了它，那么您的用户必须在安装您的新版本之前完全卸载现有应用程序 - 并且当他们卸载它时，他们将丢失应用程序中保存的所有数据（无法解决这个问题，这是 android 中的一项安全功能）

更糟糕的是——android play store 不会让你上传你的新版本，因为它们没有使用与旧版本相同的密钥进行编码——你需要以不同的包名称发布新版本——这意味着您现有的用户甚至无法自动升级（他们必须找到新版本）-您甚至无法告诉他们他们需要升级（您无法上传旧应用程序的新版本......）

您必须在备份中找到该密钥库文件或尝试从磁盘恢复数据-希望您采用“快速”格式-在这种情况下，如果您的操作系统没有结束，一个好的数据恢复服务*可能*能够将其取回- 还写了。

祝你好运！

# c# - JavaScript 警报适用于 int 但不适用于字符串

> ID：12292165
> 
> 赞同：0
> 
> 时间：2012-09-06T02:26:52.180
> 
> 标签：c#, javascript, asp.net, asp.net-mvc, razor

调用 javascript 函数时，它仅在我传入 int 时才有效。如果我传入一个字符串，它会失败。

例如，这是我的控制器，我在其中将人员列表传递给视图。

```
public ActionResult Index()
{
    List<Person> people = new List<Person>();
    people.Add(new Person() { Id = 1, FirstName = "Geddy", LastName = "Lee" });
    people.Add(new Person() { Id = 2, FirstName = "Alex", LastName = "Lifeson" });

    return View(people);
} 
```

在视图中，我有这个 javascript 函数：

```
function RemovePerson(firstName) {
    alert(firstName);
} 
```

我的 webgrid 有一列允许用户删除一个人：

```
gridPeople.Column(header: "", columnName: "",
    format: (person) => MvcHtmlString.Create(string.Format(
    "<a href='' onclick='RemovePerson({0}); return false;'>x</a>",
    person.FirstName))), 
```

如上面的代码所示，当我单击 x 删除一个人时出现此错误：

```
Uncaught Reference Error: Geddy is not defined 
```

为什么？

如果我更改 javascript 以接受 int：

```
function RemovePerson(personId) {
    alert(personId);
} 
```

并实际传递 int：

```
gridPeople.Column(header: "", columnName: "",
    format: (person) => MvcHtmlString.Create(string.Format(
    "<a href='' onclick='RemovePerson({0}); return false;'>x</a>",
    person.Id))), 
```

它正确显示了一个带有 int 值的消息框。那么为什么在传递一个 int 而不是名称时这会起作用呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T02:29:49.127

原因是您需要将字符串变量用引号引起来。

> 未捕获的引用错误：未定义 Geddy

这意味着它认为您指的是一个名为的变量`Geddy`而不是字符串字面量`"Geddy"`。

这是您使用的：

```
string.Format("<a href='' onclick='RemovePerson(\"{0}\"); return false;'>x</a>",
person.Id) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T02:46:13.347

除了，

```
string.Format("<a href='' onclick='RemovePerson(\"{0}\"); return false;'>x</a>", 
```

人名）；

严格来说，使用

```
person.FirstName.Replace("\"", "\\\"") 
```

# php - 两个php问题

> ID：12292167
> 
> 赞同：0
> 
> 时间：2012-09-06T02:27:41.943
> 
> 标签：php, arrays, list

如何在 PHP 中的数组中列出 IP 地址，而不必求助于正则表达式来转义句点？

```
<?php 
    $list = array( 
        "^12\.34\.", 
        "^12\.35\.", 
    ); 
```

并且不必像这样将它们全部放在括号内：

```
<?php
    $list = array ("12.34.","12.35."); 
```

我想做这样的事情：

```
<?php 
    $list = array(include a list on a different page, without having to put it into syntax) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T04:11:18.760

我假设您的文件结构类似于：

```
123.123.123.123
234.234.234.234
1.2.3.4
2.3.4.5 
```

如果您希望将这些全部添加到一个数组中，您可以这样做`$f = file('ip.txt');`，然后`$f`将是一个包含文件中 IP 地址的字符串元素数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T02:31:34.070

要将 IP 添加到阵列中，您只需要以下内容：

```
$array[] = $ip; 
```

您的数组会将 IP 存储为带有句点的字符串。

例如：

```
$array[] = '10.0.0.1';
print_r($array); 
```

输出看起来像：

```
数组（[0] => 10.0.0.1）
```

# c - 如何在 MPI 中使用未阻塞的 Bcast？

> ID：12292169
> 
> 赞同：0
> 
> 时间：2012-09-06T02:27:59.047
> 
> 标签：c, parallel-processing, mpi

我想隐藏 MPI_Bcast 中的通信延迟。

据我所知，我可以使用 MPI_Isend/Irecv 来制作它，但是当我使用 Bcast 时，我怎样才能让它畅通无阻？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T03:17:28.050

虽然它还不是最终版本，但 MPI 3.0 规范包括一个`MPI_Ibcast`，以及其他非阻塞集合。MPICH2 和 OpenMPI 的最新版本包括这些集合的实现。还有 libNBC，但它更多的是概念验证实现，并不关注性能。

说到性能：它可能需要一些调整。您可能会发现启用后台进度线程有助于或阻碍性能。您可以尝试`MPI_Test`定期调用以确保进度。这就像非阻塞点对点，只是在后台发送的消息更多，性能调优可以产生更大的收益。最后，在某些硬件上，可以从 CPU 中卸载集体通信并获得更好的计算/通信重叠。

# node.js - 我可以在 Node 的标头中发送带有 cookie 的 GET 请求吗？

> ID：12292173
> 
> 赞同：7
> 
> 时间：2012-09-06T02:28:43.487
> 
> 标签：node.js

在浏览器中，如果我发送 GET 请求，请求会同时发送 cookie。现在我想模拟一个来自Node的GET请求，那么代码怎么写呢？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-06T02:32:23.860

使用奇妙的[请求](https://github.com/mikeal/request/)库 cookie 默认启用。您可以像这样发送自己的（取自 Github 页面）：

```
var j = request.jar()
var cookie = request.cookie('your_cookie_here')
j.add(cookie)
request({url: 'http://www.google.com', jar: j}, function () {
  request('http://images.google.com')
}) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-06T06:31:24.063

如果您想使用本机方法执行此操作，则需要在参数的成员中`http:request()`设置适当的`Set-Cookie`标头（请参阅 HTTP 参考以了解它们的外观）；本机代码中没有处理 cookie 的特定方法。如果您需要具体示例，请参阅 Mikeal库中的源代码和/或中的代码。`headers``options``request``cookieParser``connect`

但 Femi 几乎可以肯定是对的：处理 cookie 充满了相当挑剔的细节，而且你几乎总是会更好地使用已经编写好的代码，更重要的是，经过测试。如果您尝试重新发明这个特定的轮子，您可能会想出似乎在大多数情况下都可以工作的代码，但偶尔会莫名其妙地失败。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-23T22:44:16.843

```
var jar = request.jar();
const jwtSecret = fs.readFileSync(`${__dirname}/.ssh/id_rsa`, 'utf8');
const token = jwt.sign(jwtPayload, jwtSecret, settings);
jar.setCookie(`any-name=${token}`, 'http://localhost:12345/');
const options = {
  method: 'GET',
  url: 'http://localhost:12345',
  jar,
  json: true
};
request(options, handleResponse); 
```

# ios - PhoneGap 2.0 在 XCode 中不显示 console.log

> ID：12292177
> 
> 赞同：1
> 
> 时间：2012-09-06T02:29:11.947
> 
> 标签：ios, xcode, cordova

使用基本的 PhoneGap 2.0 应用程序，我`console.log`在 XCode 中看不到任何消息。我读到发布版本不应该中继日志，但它似乎已经在调试模式下构建了 CordovaLib，因为我确实看到了来自`PluginResult`.

日志记录功能是否仍然应该存在？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T03:39:57.737

它适用于我使用phonegap2.0的应用程序。然而，我注意到的一件事是它只有在“deviceready”被触发后才开始工作。可能值得一看。

# javascript - 在 ASP.net / JS 中是否可能出现以下情况

> ID：12292184
> 
> 赞同：0
> 
> 时间：2012-09-06T02:30:11.677
> 
> 标签：javascript, asp.net, iframe

我不需要代码 atm，我只是想知道我想做的事情是否可以使用 asp.net。/js

我有一个页面，其中有一个 iframe。此 iframe 包含一个包含基本表单的页面，我无法编辑此页面。

我理想中想做的就是这个。

- 用户访问母版页

- 用户在 iframed 页面中提交表单

- iframe 中表单提交的回发触发母版页中的回发

-如果（母版页是回发）将 iframe SRC 更改为另一个随机静态页面（这将只包含一个图像）。

所以基本上我要问的是 - 是否有可能：

A：从 iframe 中的表单提交触发母版页上的回发。（请记住，我无法编辑 iframed 表单页面）。

B：在由母版页上的 A 引起的回发上。将 iframe 的 SRC 更改为不同的 url。

再次不寻找任何代码，但会使用一些资源，这样我就可以知道要开始看什么了。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T03:55:12.237

不，这是不可能的。

想想如果这可能会出现的所有安全漏洞。
（网络钓鱼攻击）。

您可能会检测到 iframe 何时加载

使用 jquery：

```
counter = 0;
$("iframe").load(function(){
    //The iframe has loaded or reloaded. 
    counter++;
    //take some action
    if(counter==2){
         __doPostback("","");
    }
}); 
```

# c++ - 输出到字符串而不是 wofstream

> ID：12292187
> 
> 赞同：0
> 
> 时间：2012-09-06T02:30:29.363
> 
> 标签：c++, string, wstring, wofstream

对于以下代码，是否可以将结果输出到字符串而不是 wofstream？谢谢！

```
wstring w = L"test";
std::wofstream ofs("test.txt");
std::locale utf8_locale(std::locale(), new boost::archive::detail::utf8_codecvt_facet());
ofs.imbue(utf8_locale);
std::copy(w.begin(),w.end(),
    std::ostream_iterator<wchar_t, wchar_t>(ofs)); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T02:58:12.580

输出字符串流是一个 C++ 特性，其行为类似于输出文件流，因为它们都继承自`std::ostream`，这意味着您可以在两者中使用几乎相同的函数。但是，字符串流对字符串而不是文件进行操作。

这对您来说意味着您需要做的所有事情（因为您没有使用任何`wofstream`-specific 函数）是将类型更改为`ofs`字符串流：

```
#include <sstream>
std::wostringstream oss; 
```

现在我无法获得语言环境的东西（我还没有使用过那些），但是评论它们确实产生了正确的结果（[见这个测试](http://liveworkspace.org/code/dbaabe6b5ef07dd46cf320e74bba33c1)）。如您所见，您可以通过字符串流的`str()`函数访问字符串。

# apache - 当网站在 Tomcat 前使用 Apache Varnish 配置时获取用户机器的 IP 地址

> ID：12292189
> 
> 赞同：1
> 
> 时间：2012-09-06T02:30:46.250
> 
> 标签：apache, jakarta-ee, tomcat6, varnish

目前，我正在运行一个在 Tomcat 上运行的网站，该网站前面有 Apache，并使用清漆进行缓存。Tomcat 在端口上运行，端口`8080`用作`81`清漆后端。我需要实现一个功能，我需要知道访问该网站的客户端机器的 IP 地址。我试图通过 header 访问 IP 地址`X-FORWARDED-FOR`。

当从端口 81（即[http://mywebsite.com:81/](http://mywebsite.com:81/)）访问网站时，我可以获得客户端机器的 IP 地址，但不幸的是通过默认端口 80（即[http://mywebsite.com/](http://mywebsite.com/)）访问时它返回本地主机 IP 地址 (127.0.0.1)。任何人都可以建议如何从端口 80 获取用户的真实 IP 地址吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T11:10:57.510

如果我理解正确，您的设置如下：

Varnish（端口 80）-> Apache（端口 81）-> Tomcat（端口 8080）

并且您希望实际的远程 IP 显示`REMOTE_ADDR`在 Tomcat 服务器上。

Varnish`X-Forwarded-For`默认附加标题，所以已经排序。要让 Apache 将实际的远程 IP 传递给 Tomcat，您应该[为 Apache (mod_rpaf) 安装反向代理添加转发模块](http://stderr.net/apache/rpaf/)。mod_rpaf 完全符合您的要求。Apache 的适当配置是：

```
<IfModule !rpaf_module>
    LoadModule rpaf_module modules/mod_rpaf-2.0.so
</IfModule>

<IfModule rpaf_module>
    RPAFenable On
    RPAFsethostname On
    RPAFproxy_ips 127.0.0.1
    RPAFheader X-Forwarded-For
</IfModule> 
```

启用模块后，Tomcat 应该会看到正确`REMOTE_ADDR`的标头以及`HTTP_X_FORWARDED_FOR`标头。

# java - （几乎）空的 JTable 代码

> ID：12292193
> 
> 赞同：0
> 
> 时间：2012-09-06T02:31:12.080
> 
> 标签：java, jtable, columnheader

我想将带有标题的空白表添加到我正在处理的微型程序中。显然这是因为程序的部分目的是向表中添加信息。我需要该列的标题，我已经阅读了如何做的标题，但我无法弄清楚如何在不编码内容的情况下定义表格。

```
 String[] ColumnNames = {"1column", "2column", "3column"};
/*
*
*/
        EmptyTable = new JTable((???),ColumnNames);
        add(EmptyTable); 
```

这是我目前拥有的代码。(???) 在那里，因为我强烈怀疑我找不到的丢失代码属于那个地方。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T02:38:01.697

[该JTable 构造函数](http://docs.oracle.com/javase/7/docs/api/javax/swing/JTable.html#JTable%28java.lang.Object%5B%5D%5B%5D,%20java.lang.Object%5B%5D%29)的第一个参数采用`Object[][]`, 预计是初始表模型。

```
emptyTable = new JTable(new Object[ColumnNames.length][], columnNames); 
```

附带说明一下，变量应该使用驼峰式命名，正如 Java 约定所规定的那样（即 EmptyTable 应该是 emptyTable，ColumnNames 应该是 columnNames）。

# javascript - Javascript链表删除问题

> ID：12292202
> 
> 赞同：1
> 
> 时间：2012-09-06T02:32:08.313
> 
> 标签：javascript, linked-list

有一段时间我一直在反对这个。我无法弄清楚为什么该节点不会从我的链表中删除。我有一个链接列表，用于存储我浏览并渲染每个图像的图像。问题是它们仍在被渲染而不是被移除。我的代码有问题吗？对于 javascript 中的所有其他类型的链接列表，我的代码似乎相同。

*编辑*添加完整代码，因为它可能有用：

```
var object_action_holder = function () {
    this.skill_id =     0;
    this.skill_type =   0;
    this.image_src =    0;
    this.x_pos =        0;
    this.y_pos =        0;
    this.turn_off =     0;
    this._head =        null;
};
object_action_holder.prototype = {

add: function ( skill_id , skill_type , image_src , x_pos , y_pos ) {

    var node = {
        skill_id:skill_id,
        skill_type:skill_type,
        image_src:image_src,
        x_pos:x_pos,
        y_pos:y_pos,
        next:null
    },
    current;

        if (this._head === null) {
            this._head = node;
        } else {
            current = this._head;

            while (current.next) {
                current = current.next;
            }   
            current.next = node;
        }

        this.skill_id = skill_id;
        this.skill_type = skill_type;
        this.image_src = image_src;
        this.x_pos = x_pos;
        this.y_pos = y_pos;

        },

remove_node: function ( skill_id ) {
    var current = this._head, previous;
    if (skill_id != null && current != null ) { 
        while ( current.skill_id != skill_id ) {
            previous = current;
            current = current.next;
        }

        if ( current.skill_id == skill_id )
            console.log('found the skill_id');
        if (current != null) {
            if ( current.next != null ) {
                previous.next = current.next;
                return current;
            }else {
                previous = null;
                current = null;
                return current;
            }
        }
    }
    return null;
},

get_action_holder: function () {
    var current = this._head;

    var object_array = [];
    var i = 0;
    while (current != null) {
        object_array[i] = current;
        i++;
        current = current.next;
    }
    return object_array;
},
} 
```

*渲染*

```
var action_image = main.action_holder.get_action_holder();
        for(var i = 0; i < action_image.length; i++) {
            main.game_handle.drawImage ( action_image[i].image_src , (  action_image[i].x_pos * 16 )  + main.player_x - ( main.game_x_pos * 16 ) , ( action_image[i].y_pos * 16 ) + main.player_y - ( main.game_y_pos * 16 ) );
            if ( action_image[i].turn_off == true )
                delete main.action_holder.remove_node(action_image[i].skill_id);
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T02:55:44.190

试试这个：

```
if (current != null) {
    if (previous) {
        previous.next = current.next;
    }
    if (current.next) {
        current.next.previous = previous;
    }
    if (current == this._head) { // if the first node is removed, reset head to the next node
        this._head = current.next;
    }
    return current;
} 
```

内部`add_node`方法：

```
if (this._head === null) {
    this._head = node;
} else {
    current = this._head;

    while (current.next) {
        current = current.next;
    }
    if (current != node) { // avoid circular reference
        current.next = node;
        node.previous = current; // set previous of the new node
    }
} 
```

[测试](http://jsfiddle.net/CW3q4/)

# data-structures - 在 CSB+ 树上的节点内搜索

> ID：12292213
> 
> 赞同：1
> 
> 时间：2012-09-06T02:33:41.853
> 
> 标签：data-structures, b-tree, search-tree

我正在阅读论文，[使 B+-trees 缓存在主内存中具有意识](http://dl.acm.org/citation.cfm?id=335449)。在**第 3.1.2 节**中，作者描述了几种在 CSB+ 树节点中搜索的方法。

基本方法是使用传统的 while 循环简单地进行二进制搜索*。*

*统一*的方法是通过**代码扩展**，将 while 循环展开为`if-then-else`语句，假设所有键都已使用。

作者给出了以下示例，该示例展示了对具有多达 9 个键的节点的搜索展开。节点中的数字表示`if`测试中使用的键的位置

```
 4
            /   \
           2     6
          / \   / \
         1   3 5   8
                  / \
                 7   9 
```

然后是令人困惑的部分：

> **如果实际只存在 5 个键，我们可以用恰好3**次比较遍历这棵树。另一方面，将最深的子树放在左侧而不是右侧的展开将需要在某些分支上进行**4 次比较。**

那么为什么需要在以下树中进行更多比较：

```
 6
            /   \
           4     8
          / \   / \
         2   5 7   9
        / \
       1   3 
```

此外，

> 如果我们知道我们只有五个有效键，我们可以硬编码一棵平均使用**2.67**次比较而不是 3 次比较的树。

**2.67**是怎么来的？

任何提示将不胜感激。此外，将我指向**代码扩展**知识的链接会很有帮助。

实际上，我不确定在论文上提出问题是否合适，因为在此处转录时可能遗漏了一些关键信息（问题可能需要重新格式化）。我只是希望有人碰巧读过这篇论文。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T15:28:45.503

这里的关键点是同一部分的以下引用：

> 我们将所有未使用的键 (keyList[nKeys..2d-1]) 填充到具有最大可能键的节点中

同样重要的是，在 B+/CSB+ 树中，我们搜索的不是节点值，而是这些值之间的间隔。一组可能的值被 5 个键分成 6 个区间。

由于大部分右子树都填充了最大可能的键（L），因此我们需要比平时更少的比较：

```
 4
            /   \
           2     L
          / \   / \
         1   3 5   L
                  / \
                 L   L 
```

根节点的右后代拥有最大可能的键，不需要检查它右边的任何节点。每个间隔都需要进行 3 次比较：

```
interval   comparisons
up to 1    k>4, k>2, k>1
 1..2      k>4, k>2, k>1
 2..3      k>4, k>2, k>3
 3..4      k>4, k>2, k>3
 4..5      k>4, k>L, k>5
 5..L      k>4, k>L, k>5 
```

如果我们把最深的子树放在左边，我们就有了一棵树，其中非空节点被放置得更深一层：

```
 L
            /   \
           4     L
          / \   / \
         2   5 L   L
        / \
       1   3 
```

在此树中搜索节点“1”需要将密钥与 4 个不同的节点进行比较：L、4、2 和 1。

如果我们知道我们只有五个有效键，我们有以下树：

```
 2
            /   \
           1     4
                / \
               3   5 
```

在这里，我们可以以某种方式安排比较，平均进行 2.67 次比较：

```
interval   comparisons
up to 1    k>2, k>1
1..2       k>2, k>1
2..3       k>2, k>4, k>3
3..4       k>2, k>4, k>3
4..5       k>2, k>4, k>5
5..L       k>2, k>4, k>5 
```

“代码扩展”不是一个广泛使用的术语，所以我不能给你最相关的链接。[我认为，这与"Loop unwinding"](http://en.wikipedia.org/wiki/Loop_unwinding)没有太大区别。

# php - 不能将 __PHP_Incomplete_Class 类型的对象用作数组

> ID：12292214
> 
> 赞同：1
> 
> 时间：2012-09-06T02:33:44.197
> 
> 标签：php

我有以下代码：

```
class user{
    public function __construct(){
    }
}
$user = new user;
$id = $_SESSION['user']; 
```

这会导致错误“不能使用 __PHP_Incomplete_Class 类型的对象作为数组”。更改`$_SESSION['user']`为`$_SESSION['_user']`更正此问题。

我只在我的开发环境中遇到这种情况。我的生活环境不会产生这个错误。

我的问题：是否有将会话键“用户”视为类对象的配置设置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-11T08:35:21.217

实际上，还有更多的事情可以导致这个问题：

1.  register_globals 已打开 - 如上所述。我的意思是，register_globals 太石化了！！！如果关闭就关闭！

2.  如果您从 $_SESSION 加载一个之前未包含的对象 - 设置自动加载器可能会有所帮助，但根据我的尝试，如果它与第 1 点一起使用 - 这将无济于事（所以再次，如果仍然打开，请关闭 1 ..)

3.  会话变量的实际名称可能会导致问题 -> 例如 $_SESSION['user'] - 在加载会话时，PHP（天知道为什么）会尝试查找类“User”，如果找到class - 尝试将会话变量视为此类的实例，这可能会导致类的不完整，因为 CLass 尚未加载，或者只是因为该变量的结构错误（因为它包含不同的数据课程）。在我的情况下，它是 1 和 3 的组合。只需将会话变量重命名为 $_SESSION['save-user'] 或类似的东西就可以解决问题

4.  如果发生上述任何情况，您可以尝试使用此 anwser 中的代码，它修复了损坏的会话对象，[强制访问 __PHP_Incomplete_Class 对象属性](https://stackoverflow.com/questions/965611/forcing-access-to-php-incomplete-class-object-properties)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T02:38:31.543

当我遇到这个是由于调用 session_start(); 加载类定义后。它需要首先被调用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T13:16:07.880

如果你想在会话中存储你的类的一个实例，你需要先序列化它。您可以在 PHP 中使用标准的 serialize() 函数。检索您的信息，使用 unserialize() 函数。

```
class User()
{
    private $id;
    // other

    public function __construct()
    {
        //
    }
}

// Set the session
$newUser = new User();
$_SESSION['mySession'] = serialize($newUser);

// Retrieve session info
$myUser = unserialize($_SESSION['mySession']); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-06T02:38:51.247

我的猜测是你启用了 register_globals 这意味着全局变量`$user`和会话变量`$_SESSION['user']`是同一件事，所以当你用新对象`$user = new user`覆盖你的会话变量时`['user']`

当您调用时，PHP 会反序列化存储在会话中的所有内容，`session_start`如果尚未定义对象的类，PHP 将无法反序列化对象。当您尝试执行类似的操作时，PHP 会将其放入一个特殊的无用类中，称为**__PHP_Incomplete_Class**。

这将解决问题

这将解决问题 $_SESSION['user'] 是一个对象，而不是一个数组，并且您不能使用数组表示法访问对象（即：['index']）*。如果'index'是一个公共属性，你可以使用->index访问它，否则你需要在你的类中添加一个方法来获取'index'并使用->get_index()调用该方法；

# sql - SQL：如何根据传递的参数有条件地调整 WHERE 子句并仍然使用 UNION

> ID：12292217
> 
> 赞同：0
> 
> 时间：2012-09-06T02:34:27.733
> 
> 标签：sql, stored-procedures, parameters, union, where-clause

我对SQL相当缺乏经验。我正在使用 SQL Server 2012。

基本上，我希望根据传递给存储过程的某些参数的值来调整 SQL SELECT 语句的 WHERE 子句。

我还将将此 SELECT 的结果与存储过程中的另一个 SELECT 语句联合起来。

到目前为止的结构如下：

```
CREATE PROCEDURE dbo.procMyProcedure
  @Param1 smallint = null
  , @Param2 int = null
  , ...
AS ...

--I have three separate SELECT statements, each catering for a specific scenario

    SELECT ...
    FROM ...
    WHERE
        (ER.EMR_Number = ISNULL(@Param1, ER.EMR_Number)) AND 
        (EE.EME_Number = ISNULL(@Param2, EE.EME_Number))

    SELECT ...
    FROM ...
    WHERE
        (EE.EME_Number = ISNULL(@Param2, EE.EME_Number))

    SELECT ...
    FROM ...
    WHERE
        (ER.EMR_Number = ISNULL(@Param1, ER.EMR_Number)) 
```

除了 WHERE 子句之外，这些语句是相同的。在我的场景中，第一条语句正好返回 1 个结果。第二个返回 119 个结果。第三个返回 3 个结果。

我不想运行所有三个语句。我想将它们合并到一个语句中，该单个语句返回与上述三个语句相同的结果，具体取决于传递的（可选）参数的值。

我可以通过将 SELECT 包装在嵌套的 IF ... ELSE IF 结构中来做到这一点，但是我不能使用 UNION。以下结构不起作用：

```
 IF ...
        SELECT ...
    ELSE IF ...
        SELECT ...
    ELSE IF ...
        SELECT ...
UNION
    SELECT ... 
```

必须有一种方法可以将这些合并到单个 SELECT 语句中，这样我就可以将它用作 UNION 语句的一部分。

我想了解以下内容：

```
SELECT ... --This select
UNION
SELECT ... --Other stuff 
```

我真的很感激这方面的任何帮助。

问候，

亚当。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T05:56:19.233

好的。我想出了一个解决我的问题的方法。它涉及一些布尔逻辑和一些使用 NULL 和相当数量的括号。

这是我正在寻找的 WHERE 子句：

```
WHERE
    ((ER.EMR_Number = ISNULL(@Param1, ER.EMR_Number)) AND 
     (EE.EME_Number = ISNULL(@Param2, EE.EME_Number)))
    OR 
    ((ER.EMR_Number = ISNULL(@Param1, NULL)) AND 
     (EE.EME_Number = ISNULL(@Param2, EE.EME_Number)))
    OR
    ((ER.EMR_Number = ISNULL(@Param1, ER.EMR_Number)) AND 
     (EE.EME_Number = ISNULL(@Param2, NULL))) 
```

它给了我预期的确切结果，并且我仍然可以在 UNION 语句中使用该查询。

当然，可能有更优雅的解决方案。如果有，请发帖。

-亚当。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T05:18:33.803

如果 emr_number 和 eme_number 不可为空，只需使用 OR 而不是 AND 运行第一个查询

# c# - 持久线程实现

> ID：12292225
> 
> 赞同：0
> 
> 时间：2012-09-06T02:36:09.007
> 
> 标签：c#, .net, wpf

我正在构建一个简单的 wpf 应用程序。gui 有一个按钮，按下该按钮将创建一个后台线程。websocket 服务器将在这个后台线程上运行。websocket 服务器是事件驱动的。此服务器上可能有一段时间的低活动，但我不希望线程由于低容量而终止。有没有一种简单的方法可以使这个线程持久化（至少在应用程序终止之前）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T02:57:34.143

为什么线程会因音量低而终止？线程只会在您告诉它时终止。即使您的应用程序和表单已关闭，后台线程很可能仍会运行。

我在一个线程中有一个与 TCPServer 类（使用 TCPListener）类似的东西，并且由于后台线程可以在 AcceptTcpClient() 中被阻塞（它是阻塞的并且处于无限循环中），因此 TCPListener 必须手动关闭：

```
public partial class MainForm : Form
{
    public TCPServer TCPServer = new TCPServer();
    private Thread ServerThread = null;

    private void button1_Click(object sender, EventArgs e)
    {
        ServerThread = new Thread(TCPServer.Run);
        ServerThread.Start();
    }

    private void OnApplicationExit(object sender, EventArgs e)
    {
        if (TCPServer.Server != null)
            TCPServer.Server.Stop();
     }
} 
```

# linux - 在 bash shell 上循环“for..do”

> ID：12292230
> 
> 赞同：-1
> 
> 时间：2012-09-06T02:36:28.213
> 
> 标签：linux, bash, shell, loops

如何`for do`在 bash shell 中执行循环以执行某些应用程序？

我在下面有这段代码，我想运行 usb-servo 应用程序，给定 usb-servo 的值从 190 到 225，我尝试运行代码，但`for do`没有给出任何输出，我的伺服没有移动.

```
#! /bin/sh
i=190

sleep 0.4
for (( i=190;i<=225;i++ ))
do
echo my_pass | sudo -S /usr/bin/usb-servo set 0 $i
done

#echo my_pass | sudo -S /usr/bin/usb-servo set 0 195
#echo my_pass | sudo -S /usr/bin/usb-servo set 0 200
#echo my_pass | sudo -S /usr/bin/usb-servo set 0 205
#echo my_pass | sudo -S /usr/bin/usb-servo set 0 210
#echo my_pass | sudo -S /usr/bin/usb-servo set 0 215
#echo my_pass | sudo -S /usr/bin/usb-servo set 0 220
#echo my_pass | sudo -S /usr/bin/usb-servo set 0 225 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T02:47:48.843

您的循环看起来不错，但您也可以使用范围进行尝试，看看是否打印出您想要的内容：

```
for i in {190..225}; do
    echo my_pass | sudo -S /usr/bin/usb-servo set 0 $i
done 
```

如果这个和你的循环都没有打印出预期的输出，那么问题不在于循环。可能是您的`usb-servo`命令中的问题。

# iphone - 点击时如何使按钮变亮（如点击iphone中的shift键）

> ID：12292231
> 
> 赞同：0
> 
> 时间：2012-09-06T02:36:35.587
> 
> 标签：iphone, ios, uibutton, uikeyboard

我想做一个shift键。当我单击它时，键将变为其他字母。在 iphone 中单击此 shift 按钮时如何使其变亮？你能给出一些示例代码吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T02:45:35.593

如果您希望在点击时更改按钮的图像，然后再返回，您可以使用 -[setImage:forState:] 方法。对于此示例，假设您有 2 个图像：分别用于未按下和按下的图像的 image_one.png 和 image_two.png。

假设你有一个这样的按钮：

```
UIButton *button = [[UIButton alloc] init];
[button setFrame:CGRectMake(0, 0, 100, 44)];
[button setImage:[UIImage imageNamed:@"image_one.png"] forState:UIControlStateNormal];
[[self view] addSubview:button]; 
```

您可以添加将来回更改图像的目标和操作。要查看它当前是哪个图像，我会使用 tag 属性。

```
[button setTag:0]; // initial, non pressed button tag, for this example
[button addTarget:self action:@selector(swapImage:) forControlEvents:UIControlEventTouchUpInside]; 
```

并且在 setImage 方法中有如下内容：

```
-(void)swapImage:(UIButton *)sender {

    if ([sender tag] == 0) {

        [sender setTag:1]; // pressed tag, for example
        [sender setImage:[UIImage imageNamed:@"image_two.png"] forState:UIControlStateNormal];

    } else {

        [sender setTag:0]; // non-pressed tag, for example
        [sender setImage:[UIImage imageNamed:@"image_one.png"] forState:UIControlStateNormal];

    }

} 
```

当您第一次点击按钮时，它会选择。再次点击它会取消选择它 - 就像键盘的 shift 按钮一样。

# unix - 在 UNIX 中重命名批量文件

> ID：12292232
> 
> 赞同：3
> 
> 时间：2012-09-06T02:36:48.467
> 
> 标签：unix, rename

我有一组文件如下：

*   oldname_1.txt
*   oldname_1.pdf
*   oldname_1.bak

等等..每个都有不同的扩展名，我需要用“newname”重命名“oldname”所以我试过：

```
rename -v 's/\oldname_*.*$/\newname_*.*/’ oldname_*.* 
```

但这不起作用..

有什么建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T03:01:48.763

重命名文件的一种方法：

```
for i in oldname*; do mv "$i" "${i/oldname/newname}"; done 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-06T02:40:49.123

首先，您应该真正指定“不起作用”的实际含义。它什么都不做吗？它会错误地重命名它们吗？它是否会向您身体的某些私密部位传递电脉冲？:-)

无论如何，我会从：

```
rename -v 's/^oldname/newname/' oldname_*.* 
```

没有必要在实际表达式中包含通配符，*特别是*因为它的含义与您的想法不同 (`xyz_*`表示`xyz`后面跟着零个或多个`_`字符，并不*意味着*后面`xyz_`跟着任何东西，`.*`只是自找麻烦，因为这意味着零或更多任何字符）。

文件名的过滤由最后一个参数完成。由于您知道只有与该参数匹配的文件才会被重命名，因此您可以定制正则表达式来更改第一位。

* * *

此外，请确保您拥有正确的`rename`. Linux有不同的`rename`可用语法，它们具有不同的语法：

```
rename oldname newname oldname_*.* 
```

在这些系统中，正则表达式变体通常称为`prename`.

* * *

最后，请原谅可能是一个愚蠢的问题，您*确定*文件的名称是您期望的名称吗？一个简单的`ls -al oldname*`应该显示这一点。

* * *

顺便说一句，这在我的 Debian 盒子下运行良好：

```
pax> touch oldname_1.txt oldname_1.pdf oldname_1.bak

pax> ll *name*
-rw-r--r-- 1 pax pax 0 Sep  6 10:56 oldname_1.bak
-rw-r--r-- 1 pax pax 0 Sep  6 10:56 oldname_1.pdf
-rw-r--r-- 1 pax pax 0 Sep  6 10:56 oldname_1.txt

pax> rename -v 's/^oldname/newname/' oldname_*.*
oldname_1.bak renamed as newname_1.bak
oldname_1.pdf renamed as newname_1.pdf
oldname_1.txt renamed as newname_1.txt

pax> ll *name*
-rw-r--r-- 1 pax pax 0 Sep  6 10:56 newname_1.bak
-rw-r--r-- 1 pax pax 0 Sep  6 10:56 newname_1.pdf
-rw-r--r-- 1 pax pax 0 Sep  6 10:56 newname_1.txt 
```

# android - 如何从我的示例应用程序中获取三星手机中保存的数据库数据？

> ID：12292233
> 
> 赞同：0
> 
> 时间：2012-09-06T02:36:53.063
> 
> 标签：android, sqlite, samsung-mobile

是否可以在我的三星手机中获取原始数据文件？

就像我有一个示例应用程序一样，这个应用程序将数据保存到我手机中的数据库中。现在我想获取原始数据，但不知道它在哪里。

谢谢

RJ

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T06:27:54.627

另一种方法是从设备中提取数据库并在您的 PC 上使用 sqlite 客户端浏览它：

为此，您需要将`adb pull`源路径和目标路径作为参数的工具：

> adb pull /data/data/com.yourdomain.yourapp/databases/yourdatabase.db c:\users\yourfolder

然后您可以使用例如[SQLite 数据库浏览器](http://sqlitebrowser.sourceforge.net/)或任何其他 sqlite 客户端。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T06:08:50.933

要直接从手机上的应用程序访问数据库，您可以使用 Android SDK 附带的平台工具，特别是 adb 和 sqlite3。

例如，如果您知道应用程序包的名称，例如 com.sample.app，您应该能够找到有关数据库的更多信息。首先，在您的 Android SDK 文件夹中找到您的平台工具文件夹，然后使用以下命令打开手机外壳：

```
adb shell 
```

这将允许您通过命令行查看您的手机。数据库应存储在文件夹 /data/data 中，因此您应该能够通过键入以下内容导航到您的特定数据库：

```
cd /data/data/com.sample.app 
```

在此目录中应该是数据库目录，使用导航到该目录

```
cd databases 
```

现在从这个目录中，您应该能够访问应用程序使用的所有数据库。具体来说，如果您的数据库名为 mydatabase，那么您应该能够开始访问它并使用以下命令查看它：

```
sqlite3 mydatabase 
```

从那里您可以了解有关您的数据库的更多信息，例如不同的表、当前存储的数据等。有关工具类型中的更多帮助 .help

您可以在此处找到有关该工具的更多信息：http: [//developer.android.com/tools/help/sqlite3.html](http://developer.android.com/tools/help/sqlite3.html)

这里有一个简短的教程：[http ://www.vogella.com/articles/AndroidSQLite/article.html#sqlite_commnandline](http://www.vogella.com/articles/AndroidSQLite/article.html#sqlite_commnandline)

# spring - 如何测试休眠生命周期观察者？

> ID：12292235
> 
> 赞同：1
> 
> 时间：2012-09-06T02:37:05.757
> 
> 标签：spring, hibernate, unit-testing

我在尝试测试注册为 JPA 实体生命周期观察者时遇到问题`POST_COMMIT_INSERT`

因为我的观察者是一个spring bean，所以我将它连接到实体管理器中，如下所示：

```
private void configureHibernateHooks(HistoricEventListener<?> listener) {
    SessionFactory sessionFactory = getSessionFactory();

    EventListenerRegistry registry = ((SessionFactoryImpl) sessionFactory).getServiceRegistry().getService(
            EventListenerRegistry.class);

    if (listener instanceof PostInsertEventListener)
    {
        registry.getEventListenerGroup(EventType.POST_COMMIT_INSERT).appendListener((PostInsertEventListener) listener);
    }
}

SessionFactory getSessionFactory() {
    Session session = (Session) entityManager.getDelegate();
    SessionFactory sessionFactory = session.getSessionFactory();
    return sessionFactory;
} 
```

我的测试被注释为`@Transactional`. 因此，据我了解，每个测试都在它自己的事务中运行。这阻止了我的观察者方法被调用，因为在我的测试期间事务没有提交，所以`POST_COMMIT_XXX`永远不会观察到监听器。

我尝试注入`EntityManager`并手动提交事务，但这导致了异常。

测试这些的适当策略是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T04:07:26.083

您可以在测试方法上使用 @Rollback(false) 注释来指示 spring 提交事务而不是回滚它。

甚至触发 entityManger.flush() 就足够了。我认为事件触发与事务的提交无关（名称可能具有误导性）。

# php - 如何在php中使用soap 1.2获取报价？

> ID：12292236
> 
> 赞同：0
> 
> 时间：2012-09-06T02:37:27.303
> 
> 标签：php, soap

我完全是 XML 和 SOAP 的菜鸟，

您能否就至少从哪里开始或举个例子给出一些建议？

（我不是乞求为我写代码）

以下是规格：

我只是希望收到两个*双精度*值。最简单的方法是什么？

```
POST /CurrencyConvertor.asmx HTTP/1.1
Host: www.webservicex.net
Content-Type: application/soap+xml; charset=utf-8
Content-Length: length

<?xml version="1.0" encoding="utf-8"?>
<soap12:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap12="http://www.w3.org/2003/05/soap-envelope">
  <soap12:Body>
    <ConversionRate xmlns="http://www.webserviceX.NET/">
      <FromCurrency>PHP</FromCurrency>
      <ToCurrency>USD or EUR</ToCurrency>
    </ConversionRate>
  </soap12:Body>
</soap12:Envelope>

HTTP/1.1 200 OK
Content-Type: application/soap+xml; charset=utf-8
Content-Length: length

<?xml version="1.0" encoding="utf-8"?>
<soap12:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap12="http://www.w3.org/2003/05/soap-envelope">
  <soap12:Body>
    <ConversionRateResponse xmlns="http://www.webserviceX.NET/">
      <ConversionRateResult>double</ConversionRateResult>
    </ConversionRateResponse>
  </soap12:Body>
</soap12:Envelope> 
```

以上规格的出处：[http ://www.webservicex.net/CurrencyConvertor.asmx?op=ConversionRate](http://www.webservicex.net/CurrencyConvertor.asmx?op=ConversionRate)

第一个块应该是一个请求，另一个响应......

**编辑**

好吧，我停在一个标准的 PHP 类，但我不太明白这个`__doRequest`方法要求什么：

```
$client = new SoapClient();
$client->__doRequest ( <<<EOD
<?xml version="1.0" encoding="utf-8"?>
<soap12:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap12="http://www.w3.org/2003/05/soap-envelope">
  <soap12:Body>
    <ConversionRate xmlns="http://www.webserviceX.NET/">
      <FromCurrency>PHP</FromCurrency>
      <ToCurrency>USD or EUR</ToCurrency>
    </ConversionRate>
  </soap12:Body>
</soap12:Envelope>
EOD
, "http://www.webservicex.net/CurrencyConvertor.asmx" , $???, $???  ); 
```

[http://www.php.net/manual/en/soapclient.dorequest.php](http://www.php.net/manual/en/soapclient.dorequest.php)

什么是动作，我应该把什么作为版本，我知道 - 一个肥皂版本 1.2 但参数是`int`所以它不能被分配一个`1.2`值大声笑......

**编辑2：**

好吧，这就是我到目前为止所得到的，但它给了我一个空字符串......

```
$client = new SoapClient(null, array('location'=>'http://www.webservicex.net/CurrencyConvertor.asmx','uri'=>''));
$client->__doRequest ( <<<EOD
<?xml version="1.0" encoding="utf-8"?>
<soap12:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap12="http://www.w3.org/2003/05/soap-envelope">
  <soap12:Body>
    <ConversionRate xmlns="http://www.webserviceX.NET/">
      <FromCurrency>PHP</FromCurrency>
      <ToCurrency>USD or EUR</ToCurrency>
    </ConversionRate>
  </soap12:Body>
</soap12:Envelope>
EOD
, "http://www.webservicex.net/CurrencyConvertor.asmx" , "ConversionRate", 2  );

echo "Response :<br>", htmlentities($client->__getLastResponse()); 
```

...我只是不明白这个'uri'的东西 - 超出了我的理解。这让我想把头撞到墙上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T02:54:44.460

基本上你需要的是两个部分。

1.  解决通信的 SOAPClient 类知道服务器 URL，发送请求和接收响应（您在问题中以 XML 形式获得）并且还触发 #2，即：

2.  第二部分是 XML 解析器/编组器，它可以将请求对象（包含 fromCurrency 和 toCurrency）转换为服务器可以理解的正确 XML 字符串（根据 WSDL），并使用 WSDL 再次将一些 XML 转换为响应对象。这部分有点棘手，但我找到了很多文档，搜索“SOAP PHP”，你会得到一些例子）。这两个过程称为**编组**和解**组**（帮助您使用 Google 更快地找到内容）。您的 StockQuote 网络服务并没有真正提供 WSDL，它基本上是对所有可能操作的描述（在您的情况下只有一个：）`GetQuote`及其可用对象（在您的情况下只有简单的 types `string`，不必定义，因为它们是 WSDL 标准）

我没有用 PHP 做过 SOAP，但是花了很多时间在 Java+SOAP 上，可以理解它有多么困难。理论上，您只需将一些 XML 发送到服务器并获取一些 XML。但是发送的 XML 必须采用正确的格式，并且当您收到响应时，您希望将响应转换为对象而不是处理某些 XML 字符串。

对于像这样的简单 Web 服务，您可能会考虑手动构造 XML 请求（只需将 XML 字符串放在一起）和`substr`响应以找到请求的答案。

# emacs - 将 shell 命令的输出插入 emacs 缓冲区

> ID：12292239
> 
> 赞同：45
> 
> 时间：2012-09-06T02:37:36.247
> 
> 标签：emacs

我想设置一个键绑定以将日期插入缓冲区。我在我的`.emacs`文件中写了以下 lisp。使用`date`为例：

```
;;put the date                                                                  
(global-set-key
 (kbd "C-c C-d")
 (shell-command "date" (current-buffer))
) 
```

当我使用其他命令`'next-line`（`shell-command`如`*scratch*`.

也许我需要使用`shell-command-on-region`.

* * *

## 回答 #1

> 赞同：92
> 
> 时间：2012-09-06T19:03:36.757

对于将 shell 命令的任何输出插入到当前缓冲区的一般情况，您可以使用内置键盘和弦：

```
C-u M-! <shell-command> 
```

它运行相同的`shell-command`功能，并且还将输出插入到当前缓冲区中的点。

整个击键本身可以保存为一个宏（并且可能分配给一个快捷方式），以便于调用常见的 shell 命令。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-09-06T03:52:05.200

我的一个朋友在工作中帮助了我。

```
(defun put-the-date ()
  (interactive)
  (insert (shell-command-to-string "date")))

(global-set-key
 (kbd "C-c C-d")
 'put-the-date
 ) 
```

# asp.net-mvc - 为什么在我的 MacBook 上尝试使用 Parallels 编译 asp.net-mvc 应用程序时出现此错误

> ID：12292240
> 
> 赞同：-1
> 
> 时间：2012-09-06T02:37:42.167
> 
> 标签：asp.net-mvc, visual-studio-2010, parallels

我在苹果网站上发布了一个问题，但有人建议我可能会直接在 stackoverflow 上得到更好的回应，因为它是一个与视觉工作室相关的问题。

我在我的 macbook pro 上安装了 parallels，并通过 DVD 安装了 windows 7 iso。起初一切看起来都很好，现在我正在尝试在 Visual Studio 中编译一个 asp.net-mvc 应用程序，我一遍又一遍地收到这个错误

![在此处输入图像描述](../Images/eb84a151288e81e5da4e559ee6c54af1.png)

无论我点击什么，它最终都会进步，但这很烦人。[这里问了](http://software.intel.com/en-us/forums/topic/266164)同样的问题，但没有给出好的答案。似乎它认为它需要依赖于 DVD 驱动器中的某些东西（它不应该）

有人可以解释一下为什么 devenv.exe 此时需要将 ISO dvd 连接到我的笔记本电脑吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-27T11:49:21.657

重启后这个问题似乎消失了

# php - phpMySQL 应该可以工作

> ID：12292245
> 
> 赞同：1
> 
> 时间：2012-09-06T02:38:33.267
> 
> 标签：php, mysql, sql

这是一个私人消息系统。它应该将数据插入表中，但根本不是......感谢您的帮助。

**Sql 错误**：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以了解在 'from, body, subject, date_sent VALUES('itunes89','itunes89','sd','s','9-05-2012' 附近使用的正确语法在第 1 行

```
$sql = "INSERT INTO pm_inbox (to_user, from, body,subject,date_sent)VALUES('$userIdFromPost','$user','$body','$sub','$date')";
mysql_query($sql);
echo "Error: " . mysql_error($con);
echo "<br/>Inserted: '$userIdFromPost','$user','$body','$sub','$date'"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T02:42:55.603

`)`您在列列表之后错过了一个。请不要使用`mysql_`函数。使用准备好的语句，`mysqli`或者`PDO`像这样：

```
$stmt = $mysqli->prepare("INSERT INTO pm_inbox (to_user, from, body, subject, date_sent) VALUES(?,?,?,?,?)"); 
$stmt->bind_param($userIdFromPost,$user,$body,$sub,$date); 
```

此外，`from`是 MySQL 中的[保留名称](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)。它需要像这样封装：

```
(to_user, `from`, 正文, 主题, date_sent)
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T02:40:35.847

你错过了一个右括号：

```
$sql = "INSERT INTO pm_inbox (to_user, from, body, subject, date_sent VALUES('$userIdFromPost','$user','$body','$sub','$date')"; 
```

应该

```
$sql = "INSERT INTO pm_inbox (to_user, from, body, subject, date_sent) VALUES('$userIdFromPost','$user','$body','$sub','$date')"; 
```

# php - MySQL没有在PHP中返回错误

> ID：12292248
> 
> 赞同：0
> 
> 时间：2012-09-06T02:38:44.543
> 
> 标签：php, mysql, web

在我的数据库类中得到了这一行，

```
$return = mysql_fetch_array($data) or 
          $this->dberror("Error fetching data<br/>" . mysql_error()); 
```

但该网站发布的所有内容是：获取数据时出错

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-09-06T02:40:45.060

试试这个： echo("错误：" . mysql_error($con));

将 $con 替换为您的连接变量。

# ruby-on-rails - 无需 Javascript 即可执行 Ruby 的按钮

> ID：12292252
> 
> 赞同：0
> 
> 时间：2012-09-06T02:39:14.213
> 
> 标签：ruby-on-rails, button

### 路线

```
resources :cars do
  collection do
    get :f01a
  end
end 
```

### 控制器

```
class CarsController < ApplicationController
  def f01a
    @user = User.find(params[:id])
    @count = Count.find_by_user_id(@user)
    @count.increment!(:f02)
    redirect_to @user
  end
end 
```

### 看法

```
<%= button_to "add f01", f01a_cars_path %> 
```

我不能让它工作。我需要从一个按钮执行此代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T03:00:02.960

`button_to`发送 POST 请求，但您的路由设置为仅接受 GET 请求。您应该将其更改为：

```
resources :cars do
  collection do
    post :f01a
  end
end 
```

由于您正在使用`params[:id]`您的操作，但根本没有发送它，您需要将它传递到您的`button_to`：

```
<%= button_to "add f01", f01a_cars_path(:id => something) 
```

（替换`something`为您要传递的任何 ID。）

# magento - 如何在 head.php 页面上获取 sku 和产品名称？

> ID：12292254
> 
> 赞同：0
> 
> 时间：2012-09-06T02:39:55.867
> 
> 标签：magento

如何在 head.php (\app\code\core\Mage\Page\Block\Html\head.php) 页面上获取 sku 和产品名称？谢谢你。

当我使用`$this->_data['sku'];`或`$this->getSku();`都不起作用时。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T08:17:15.503

前面的答案很好，只是它不检查注册表中是否存在产品。因此，您将在非产品页面上遇到致命错误。始终检查变量是否存在。

```
$product = Mage::registry('current_product');
if ($product) //sometimes need check for instanse, use instanseof
{
    $product->getSku();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T07:51:12.107

您应该能够从注册表中拉回当前产品并从中访问值。

```
$product = Mage::registry('current_product');
$product->getSku(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-22T10:58:33.733

工作代码：

```
if($_product = Mage::registry('current_product')){
  $id = $_product->getId();
  $sku = $_product->getSku();
} 
```

# c++ - boost::mpl::if_ 的编译错误

> ID：12292255
> 
> 赞同：0
> 
> 时间：2012-09-06T02:40:09.410
> 
> 标签：c++, boost, boost-mpl

我正在尝试使用 boost::mpl 根据某些模板参数类型的常量来控制某些指针类型的常量。这是我的尝试：

```
template<typename T>
struct iter {
   typedef typename boost::mpl::if_<boost::is_same<T, const list>, const sexpr *, sexpr *>::type pointer;
}; 
```

然而，编译器拒绝了这种说法：

```
sexpr.h:154: error: ISO C++ forbids declaration of `type name' with no type
sexpr.h:154: error: template argument 2 is invalid
sexpr.h:154: error: template argument 1 is invalid
sexpr.h:154: error: `type' does not name a type 
```

任何线索我做错了什么？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T02:51:25.970

我能够使用 is_const 修复它：

```
typedef typename boost::mpl::if_<boost::is_const<T>, const sexpr *, sexpr *>::type pointer; 
```

谢谢！

# python - 确保矩阵元素长度的“Pythonic”方式

> ID：12292258
> 
> 赞同：-1
> 
> 时间：2012-09-06T02:40:33.297
> 
> 标签：python, idioms

给定一个列表列表：

```
>>> n=4
>>> LoL=[range(n) for i in range(n)]
>>> LoL
[[0, 1, 2, 3], [0, 1, 2, 3], [0, 1, 2, 3], [0, 1, 2, 3]] 
```

以这种方式确保 N x N 矩阵是否很明显，可以理解，*Pythonic ：*

```
>>> len(LoL) == n and {len(l) for l in LoL} == {n}
True 
```

所以它会这样使用：

```
if len(matrix) != 4 or {len(l) for l in matrix} != {4}:
        raise ValueError 
```

有没有更好的替代成语或者这是可以理解的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T03:22:06.473

如您的评论中所述，尝试 / except 可能更好。

您不仅会捕获并尝试使用 4x4 尺寸之外的元素，还会捕获传递给您的错误尺寸：

```
>>> LoL=[1,2,3,4]
>>> len(LoL) == n and {len(l) for l in LoL} == {n}
Traceback (most recent call last):
File "<stdin>", line 1, in <module>
File "<stdin>", line 1, in <setcomp>
TypeError: object of type 'int' has no len() 
```

Vs，如果您对即将使用的数据有疑问：

```
>>> try: 
...    i=LoL[2][2]
... except IndexError:
...    print 'no bueno...'
... 
no bueno... 
```

# android - 像 AppBrain fastWeb 安装程序一样实现 Android 应用程序静默安装

> ID：12292261
> 
> 赞同：1
> 
> 时间：2012-09-06T02:40:36.773
> 
> 标签：android

嗨专家/专家黑客，

我正在尝试在 android 上实现 Google Play 应用程序静默安装功能（类似于 appbrain 快速网络安装程序）。

到目前为止，我能够实现以下目标：

1.  找出一种检索 Google Play Auth Token 的方法（从而授予我的应用程序与电话上的 Google Play 应用程序通信的权限）。

2.  了解如何检索手机的 Android-Id（我认为应该在将 appInstall 请求发送到 GPlay 服务器或 Android 手机上的 Gplay/vending 应用程序时使用此 ID）

3.  找出要发送到 Google Play 服务器或手机上的 Gplay/vending 应用程序的协议缓冲区请求，以启动静默应用程序下载和安装过程。（这是我从[这篇](http://jon.oberheide.org/blog/2011/05/28/when-angry-birds-attack-android-edition/)文章中找到的）

我已经研究了大约两个星期了，但我仍然找不到以下内容：

AppBrain fast Web Installer 是否使用协议缓冲区来调用手机或 Gplay 服务器上的 Gplay（自动售货应用程序）？如果是这样，上述协议缓冲区请求格式是否正确？？

如果上述协议缓冲区请求格式正确，那么我应该将协议缓冲区请求发送到电话或 Gplay 服务器的哪个位置以调用静默应用程序下载和安装程序？

我也有一个围绕这个任务的 C2DM（现在是 GCM）服务器和客户端设置。谁能指出我正确的方向或给我任何解决这个问题的线索？任何帮助深表感谢 。

# php - 获取一个 href 链接并使用正则表达式将其添加到变量中

> ID：12292264
> 
> 赞同：0
> 
> 时间：2012-09-06T02:40:51.743
> 
> 标签：php, regex, href

我是 php 和正则表达式的新手。

我有来自旧应用程序的 html 代码：

```
$oldlinkshtml = "<li class="active"><a href="www.example.com?page=1">Previous</a></li>";
// desired output
$oldlinksvar = "";

echo $oldlinksvar; 
```

我想删除 $oldlinkshtml 中的所有 html 标签，只取“www.example.com?page=1”并将其添加到 $oldlinksvar。我如何使用正则表达式来做到这一点？请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T21:30:45.660

```
preg_replace('/<a(.*?)href="([^"]*)"(.*?)>/','<a $1 href="http://new.href/?old_url=$2" $3>',$text); 
```

Input: `<li class="active"><a href="www.example.com?page=1">Previous</a></li>`
Output: `<li class="active"><a href="http://new.href/?old_url=www.example.com?page=1" >Previous</a></li>`

# sql - OLAP 和存储过程、性能差异和事实

> ID：12292267
> 
> 赞同：1
> 
> 时间：2012-09-06T02:41:06.890
> 
> 标签：sql, stored-procedures, sql-server-2012

我目前正在阅读一本书，*使用 Microsoft SQL Server 2012，第三版交付商业智能*。在本书中，它有一个部分说明了以下内容：

> **数据集市的特点**
> 
> 因为数据集市旨在用作商业智能的来源，而不是管理组织的日常事务，所以它的设计与 OLTP 数据库不同。数据集市不是围绕规范化规则构建的，而是为了访问速度而构建的。数据集市仍然是一个关系数据库，但它的设计目的是在输出数据以进行分析和报告时需要更少的表连接。在数据集市中，为了速度，可以重复数据（非规范化）。
> 
> 在设计数据集市时，规范化规则被围绕“事实”组织的不同设计方法所取代。这些新的设计方法被称为星星和雪花。我们在“星形模式”和“雪花模式”部分讨论星形和雪花。星星和雪花可能看起来像是孩子们的幻想，但实际上，它们提供了相当成熟和脚踏实地的方法来创建快速且易于访问的信息。

多么棒的信息啊！但这就是混乱开始的地方。我知道 SQL Server 允许使用存储过程作为优化查询性能的一种方式。虽然我不知道这些的内部工作原理，但我知道服务器具有优化查询性能的内置方法，可以在传统的规范化数据库中快速运行查询。例如，假设我有一个 Sales 表，其中列出了 20,000 行，这些行都是已售出的单个产品。如果我想知道这些行的总和，我可能会将查询保存`SELECT SUM(SALES.SALESPRICE) FROM SALES`在存储过程中。

如果我知道存储过程是预编译的，那么服务器不会自动知道它必须在每次插入完成时获取这个总和并缓存查询结果吗？那么，每当添加第 20,001 行时，就会自动保存销售金额，因此上述存储过程的结果立即可用？这不就是执行计划背后的全部想法吗？还是我完全错过了“优化”查询的功能？

如果不是这种情况，我将不胜感激了解存储过程的内部工作原理，以及与从 SQL Server Management Studio (SSMS) 进行直接查询相比，它如何产生性能优势

谢谢！！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T08:12:32.610

是的，恐怕你错过了重点。

存储过程的一个好处是计算*如何*获取结果而不是计算结果也需要处理时间——存储过程缓存的正是这一点*。*`execution plan`

见[http://www.simple-talk.com/sql/performance/execution-plan-basics/](http://www.simple-talk.com/sql/performance/execution-plan-basics/)

也许存储过程的更大好处在于能够更精细地保护对您的数据的访问，并在不更改外部（SP）接口的情况下隐藏或更改您的架构 - 即：我可以阻止任何用户发出`INSERT`,`UPDATE`或`DELETE`针对我的命令数据，仅允许他们访问执行类似任务或多项任务的某些程序。

如果您确实想存储总和计算的结果，则可以这样做，但它必须位于专用表中，或者如果要对总和进行分组，则它必须位于现有表中的附加字段中 - 并且计算必须手动编写 - 在`INSERT`,`UPDATE`和`DELETE`事件上的触发器中，或者通过您为执行这些数据操作功能而编写的存储过程中的附加代码 - 所以现在您的存储过程读取类似

```
create proc SellProduct (@productID int, @price money)
as
begin
    insert ProductSales (ProductID, SalePrice) values (@productID, @price)
    update Products set TotalSales = TotalSales + @price WHERE productid = @productID
end 
```

（您可能想在完成上述代码之前阅读有关事务的信息）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T08:23:54.667

所以，我删除了 MDX 标记，因为您的问题是关于存储过程的，您只是使用 olap 来举例说明您的问题。

因此，当您说存储过程是预编译的时，请记住这不适用于过程的结果。如果你有一个带有 select(sum) 的过程，每次你运行它时，select(sum) 都会被提交到数据库中。结果不会存储在任何地方。

您提到了性能优势。将查询包装在过程中不会带来任何性能优势。在幕后，无论查询是否在 proc 内，查询都将准确执行。程序的好处更多地与 waht @podiluska 说。

我认为您的主要困惑（基于您所写的这一行：）`Whenever line 20,001 is added, the amount of the sale would automatically be saved so the result of the above stored procedure`是您认为程序是包含数据的对象，而事实并非如此。过程、视图（非持久性）和函数是您用来更好地查询或数据的机制

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-11T21:19:44.947

OLAP 将一百万个不同 SUM 的结果存储在您的数据集市中。OLTP（“普通”SQL 数据库）仅存储基础数据，并在您调用存储过程时计算 SUM。

存储过程被编译，就像 C 程序一样。您在过程之外编写的 SQL 查询在运行时被翻译，就像 ASP 网页一样。两者都不包含数据。

# objective-c - NSManagedObjectContext 的 performBlock 方法是否保证操作的顺序？

> ID：12292268
> 
> 赞同：3
> 
> 时间：2012-09-06T02:41:08.140
> 
> 标签：objective-c, ios, xcode, core-data

这个问题几乎涵盖了所有内容。如果我将 N 个块放入 NSManagedObjectContext 的队列中，它会按顺序执行它们，有保证，还是有可能它们中的一些可能会被打乱？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T02:57:32.100

我看不出为什么 NSManagedObjectContext 不会在内部使用 GCD，而且 GCD 队列是严格的 FIFO。当然，我没有证据来证实这一点，但这对我来说非常有意义，因为它的目标`performBlock`是线程安全，并且在给定的上下文中一次只执行一个操作，为什么 Apple 会费心从头开始编写一个系统？一个完美的功能（GCD）已经存在。

# python-2.7 - 在python中找到最小值和最大值

> ID：12292270
> 
> 赞同：7
> 
> 时间：2012-09-06T02:41:15.113
> 
> 标签：python-2.7

我必须要求用户输入一些数字，然后打印大小、总和、平均值、最小值和最大值。我可以得到前三件事，但我被困在最小和最大的一个上。我遇到的问题是我不能使用`sort()`，因为我需要将列表设为整数 1，但您不能将整数列表用于`split()`

这是我的代码：

```
 number = raw_input('Enter number:')
    list_of_numbers = number.split()
    tally = 0
    sum = 0
      while number!= '':
        tally = tally + 1
        sum = sum + int(number)
        average = float(sum) / float(tally)
      number = raw_input('Enter number:')
    print "Size:", tally
    print "Sum:", sum
    print "Average:", average 
```

有什么提示吗？谢谢

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-06T03:04:38.617

是否允许使用 Python 的内置函数？如果是，那就更容易了：

```
number = raw_input('Enter number:')
list_of_numbers = number.split()

numbersInt = map(int, list_of_numbers) # convert string list to integer list

print("Size:",    len(numbersInt))
print("Min:",     min(numbersInt))
print("Max:",     max(numbersInt))
print("Sum:",     sum(numbersInt))
print("Average:", float(sum(numbersInt))/len(numbersInt) if len(numbersInt) > 0 else float('nan'))
# float conversion is only required by Python 2\. 
```

where`numbersInt = map(int, list_of_numbers)`将列表的每个字符串编号转换为整数。每个函数的含义如下：

*   **`len`**计算列表的长度
*   **`min`**计算最小值
*   **`max`**计算最大值
*   **`sum`**计算列表的总和

Python 标准库中没有 mean 函数。但你可以`numpy.mean()`改用。`pip install numpy`使用or安装它`conda install numpy`，然后：

```
import numpy as np
print("Average: ", np.mean(numbersInt)) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-06T02:44:37.563

我认为您可以使用 min() 和 max() 来查找这些值。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-06T05:55:04.010

你有两个选择：

*   您可以将当前数字与之前的极值进行比较，并相应地更新您的最小值和最大值；

    ```
    import sys
    tally = 0
    sum = 0
    nmax = -sys.maxint
    nmin = +sys.maxint
    number = raw_input('Enter number:')
    while number!= '':
        number = int(number)
        if number > nmax:
            nmax = number
        elif number < nmin:
            nmin = number
        tally = tally + 1
        sum += number
        average = float(sum) / float(tally)
        number = raw_input('Enter number:') 
    ```

    我们使用您系统上的最大整数 ( `sys.maxint`) 来初始化我们的`nmin`和`nmax`

*   您可以将每个数字存储在一个列表中，然后一次执行所有操作：

    ```
    number = raw_input('Enter number:')
    numbers = []
    while number!= '':
        numbers.append(int(number))
        number = raw_input('Enter number:')
    numbers.sort()
    nmin = numbers[0]
    nmax = numbers[-1]
    tally = len(numbers)
    nsum = sum(numbers)
    avg = nsum/float(tally) 
    ```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-06-22T19:25:10.843

```
tally = 0
sum = 0
average = 0
while (True):
    number = input('Enter number')
    list_of_numbers = number.split()
    if number == '':
        continue
    else:
        tally = tally + 1
        sum = sum + int(number)
        average = float(sum)/float(tally)
    print('Size:', tally)
    print('Sum:', sum)
    print('Average:', average) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-11-03T05:39:18.053

如果我没记错的话，这可能是最简单的。

```
len_min_max_sum=reduce(lambda x,y : (x[0]+1,y,x[2],x[3]+y) if x[0]>y else (x[0]+1,x[1],y,x[3]+y) if x[2]<y else (x[0]+1,x[1],x[2],x[3]+y) ,arr,(0,arr[0],arr[0],0))

len_min_max_sum_avg=(len_min_max_sum[0],len_min_max_sum[1],len_min_max_sum[2],len_min_max_sum[3],float(len_min_max_sum[3])/len_min_max_sum[0]) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-03-18T11:52:39.187

python中的`max()`和`min()`预定义的数学方法可以解决这个问题，如下所示

```
numbers = [3,2,5,9,5,3]
minimum = min(numbers)
maximum = max(numbers) 
```

以上的结果是

```
>>>maximum
9
>>>minimum
2 
```

希望有帮助。

# wordpress - 可以存储 API 数据吗？

> ID：12292271
> 
> 赞同：2
> 
> 时间：2012-09-06T02:41:15.893
> 
> 标签：wordpress, api, request

我想使用 API 在我的 Wordpress 网站上显示产品信息，但该公司表示将在每月 1000 次服务器请求后向我收费。

是否可以存储请求的数据，以便我可以重复使用它而不通过配额？会不会有什么潜在的问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T02:57:11.640

是的，他们实施这样的限制的原因是鼓励人们在他们的网站上缓存（存储）数据。如果每个人都编写自己的网站代码，以便在每次显示页面时通过 API 请求数据，那么 API 服务器很快就会不堪重负。

有很多方法可以缓存数据，最简单的方法是将所有 API 调用移动到每晚运行的 cron 作业中，并将每个 API 请求的结果放在磁盘上的不同文件中 - 然后您可以更改网页代码读取此文件而不是连接到 API url。（您也可以使用 filemtime() 来检查文件的年龄，如果超过一天就自动请求它，但是如果您的服务器很忙并且多个请求进入，因为文件过期触发多个api 请求 - 所以 cron 作业是安全路线）

缓存整个响应的缺点是每次显示页面时都必须解析它 - 但如果你想要简单 API 调用的最简单解决方案 - 就是这样。

正确的方法是解析 cron 作业中的响应，并以易于使用的方式将数据存储在数据库中。然后，您可以只从数据库中请求您需要的数据——这将使您的整个站点运行得更快并使用更少的内存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T23:37:45.160

由于您正在开发一个 Wordpress 网站，我强烈建议您研究和实施[Transients API](http://codex.wordpress.org/Transients_API)。

它的工作方式非常接近 cron 作业，并为您提供更简单的缓存解决方案，您可以通过 Wordpress 插件或主题进行管理。它与 Wordpress 选项 API 一样工作，但增加了设置的过期时间。

# winforms - clickonce 发布应用程序后应用程序配置中的客户端特定设置

> ID：12292274
> 
> 赞同：0
> 
> 时间：2012-09-06T02:41:58.653
> 
> 标签：winforms, configuration, clickonce

我有一个可以按用户安装的 Windows 窗体应用程序。我在我的应用程序中使用 Sql express 作为数据库，还使用实体框架来处理我的数据访问端。我在应用程序中有一个应用程序配置文件，其目的是允许我的客户根据自己的方便给出一些键的值。比如图像文件夹路径，我的自定义日志文件的路径，它将记录生产使用过程中应用程序的异常，实体框架的连接字符串等。

现在我已经使用 clickonce deployement 在每台客户端机器上安装了我的软件。在我的一台客户端机器（这是我的测试环境）上安装后，我没有看到任何配置，并且在多次搜索中我知道它是深度创建的根据正在使用的操作系统，在一些特殊文件夹中，并且由于某些 clickonce 安全规定，这些深埋的配置文件也无法修改。现在我有以下问题-

1.  由于我无法为每个用户发布应用程序，因此在客户端计算机上安装应用程序后如何更改每个用户的设置。

2.  我是否应该参考一些外部配置源，但是如何以及在何处将其放入 Machine. 如果externl config有效，它也可以用于实体框架连接字符串。

3.  如何持久化这些客户特定的更改。

因为我是 clickonce 的新手，我在谷歌做了 serach 但无法得到解决方案。所以在这方面任何指导都将受到高度赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T21:05:44.147

Generally `App.Config` stores settings at an Application level rather than at User level.

I am not 100% sure from your post but if you want to store settings for each individual user then the best place is probably APPDATA directory.

You can access the APPDATA path using this call:

```
Environment.GetFolderPath(Environment.SpecialFolder.ApplicationData) 
```

You can find out more about APPDATA [here](https://stackoverflow.com/questions/867485/c-sharp-getting-the-path-of-appdata).

# python - 如何存储会话对象？

> ID：12292277
> 
> 赞同：1
> 
> 时间：2012-09-06T02:42:41.820
> 
> 标签：python, session, sqlalchemy, session-state, pyramid

我有一些模型类，例如传递字典的用户类，并包装它提供各种方法，其中一些在需要更改值时与数据库通信。字典本身是由 sqlalchemy RowProxy 制成的，因此它的所有键实际上都是直接取自 sql 用户表的属性名称。（属性包括 user_id、username、email、passwd 等）

如果用户已登录，我是否应该简单地将这个字典保存到一个 redis 键值存储中，并在需要时简单地调用一个新的用户对象并从 redis 传递这个字典（这应该比只在会话中保存用户 ID 更快并根据该 user_id 从数据库再次加载值）？

或者我应该以某种方式序列化整个对象并将其保存在redis中？我很感激任何管理模型和会话对象的替代方法，你们中的任何人都觉得会更好。

如果有人想知道我只使用 sqlalchemy 表达式语言，而不是 orm。我将模型类用作接口，并针对它们进行编码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T15:17:05.047

除非你非常小心，否则将整个对象序列化为 redis 会导致问题。您实际上将其视为缓存，因此您必须小心，如果用户更改了自己的某些内容，这些值就会过期。您还必须确保所有值都是可序列化的（可能通过 pickle）。您没有指定这是否是过早的优化，所以我要说它可能是，并建议您只跟踪用户 ID 并在需要时从数据库中重新加载他的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T15:38:20.423

+1 对迈克尔的回答。

我还要注意一些事情-

如果您决定缓存此数据，则应将其视为只读存储。您永远不应该基于此更新数据库。

我将我的项目分为两个逻辑部分：

/account - 大量写入操作，数据必须是最新的 /everything-else - 主要是读取操作，数据应该是最新的

/account 中的所有内容始终会访问数据库以获取最新版本。该站点的其余部分可以访问数据库或缓存-我不在乎。

对于您描述的需求，并使用表达式语言，您不需要从缓存数据创建对象来执行任何操作。

[http://docs.sqlalchemy.org/en/rel_0_7/core/tutorial.html#inserts-and-updates](http://docs.sqlalchemy.org/en/rel_0_7/core/tutorial.html#inserts-and-updates)

> >>> conn.execute(users.update().
> 
> ...其中（users.c.name=='jack'）。
> 
> ...值（名称='ed'）
> 
> ... )

为什么不这样做：

> 其中（users.c.id==cached_value）

# java - JNDI InitialContext - 服务器路径

> ID：12292281
> 
> 赞同：0
> 
> 时间：2012-09-06T02:43:19.620
> 
> 标签：java, jndi, lookup, initial-context

我正在努力理解 InitialContext 的作用。我知道它为查找对象提供了初始上下文，但是它查找的是哪个服务器？

我知道我们可以将服务器 url 作为 Context 的属性之一传递，但“通常”InitialContext 是在没有参数的情况下调用的。在那种“一般”情况下，它会查找哪个服务器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T02:51:23.817

如果您从托管在服务器（Web/应用服务器）中的应用程序中构建 InitialContext，则它默认为 InitialContext 和托管服务器的端口。

换句话说，您的查找对象也绑定到部署调用应用程序的服务器的 JNDI 树。

# javascript - 自动调整向左浮动且绝对位置的重叠元素的大小

> ID：12292285
> 
> 赞同：0
> 
> 时间：2012-09-06T02:44:23.880
> 
> 标签：javascript, jquery, html

我正在创建一个每周议程。我有一个表格作为时间和网格的背景，并且我有设置为位置的块：绝对和浮动：左。我的块出现了，但它们是重叠的。所以假设我有 5 个重叠的块，我需要一种方法来调整这五个块的大小，以便它们占用相等的空间。更难的是，这五个可能并不都相互重叠。例如：

![在此处输入图像描述](../Images/b2c8f61ac17dff3b0dab6ecc59d33684.png)

注意第一张图像中的重叠。如果有重叠，我需要适当地间隔。不太确定这是否有意义；如果这真的令人困惑，我将尝试更好地澄清。基本上我只需要一种方法来在一周日历上显示一堆时间块，这些时间块将显示来自不同人的多个任命。如前所述，请记住，这些块是 position: absolute 和 float: left 因为它们在表格顶部按像素定位。至于解决方案，它可以是 javascript 或 HTML，我真的不在乎，但请记住，稍后我将不得不添加拖动，所以如果他们拖动一个框，我需要一种方法来动态重新排序重叠。

## 更新

就像快速更新一样。在我的图表中，这是一个例子。不能保证我将只有 4 个具有这种重叠格式的框。我可以有 50 个框都在不同的点重叠，所以我可能需要一个通过 javascript 的算法。

另外，要回答为什么位置：绝对的问题，这是我的议程截图：

![在此处输入图像描述](../Images/513b5038cf0186042ec15b7efba493a0.png)

注意到后面的网格了吗？那是一张桌子。每个元素都放置在一行内，并延伸到多行。如果我没有绝对位置，它将自动扩展该行，这会扭曲网格。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T02:56:39.223

您可以只获取您希望跨越的第一个时隙的渲染位置，然后将该位置设置为块的样式定义中`left`的`top`值。（你根本不需要`float`）

[在页面上查找 HTML 元素的位置](http://www.quirksmode.org/js/findpos.html)

或者，您可以将三个不同的图像拼接在一起。在这里，您将在第一个时隙使用“顶部”图像，在最后一个时隙使用“底部”图像，为中间的所有时隙使用“中心”图像，并将这些图像设置为相应表格单元格的背景。

但是，如果您需要能够用文本填充整个块，您可能需要查看 html table 属性`rowspan=""`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T03:02:41.507

我认为这可以通过 div 和 float 轻松完成。请根据您设置高度和宽度

![在此处输入图像描述](../Images/8d945abc0edc4bd9a21f5a627d4705e3.png)

# c# - 将值添加到特定的 DataTable 单元格

> ID：12292287
> 
> 赞同：26
> 
> 时间：2012-09-06T02:44:44.673
> 
> 标签：c#, datagridview, datagrid, datatable

我想知道是否可以将值添加到特定的 DataTable 单元格？

假设我有一个现有的 dataTable 并且我添加了一个新列，我将如何在不覆盖现有列的行的情况下添加到新列的行？

据我所知，没有添加到特定单元格的方法（除非我错了）。

```
 dt.Rows.Add(a, b, c, d) 
```

其中 a、b、c 和 d 是字符串值。那么如果我只想添加到 d 列怎么办？

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-09-06T02:49:54.247

如果它是一个全新的行，您只想设置一个值，则需要添加整行，然后设置单个值：

```
DataRow dr = dt.NewRow();
dr[3].Value = "Some Value";
dt.Rows.Add(dr); 
```

否则，您可以找到现有行并设置单元格值

```
DataRow dr = dt.Rows[theRowNumber];
dr[3] = "New Value"; 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2015-06-16T05:33:53.953

试试这个：

```
dt.Rows[RowNumber]["ColumnName"] = "Your value" 
```

例如：如果您想将值 5（数字 5）添加到第一行和列名“索引”，您可以这样做

```
dt.Rows[0]["index"] = 5; 
```

我相信 DataTable 行以 0 开头

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T02:48:25.137

我认为你不能这样做，但至少你可以更新它。为了编辑 DataTable 中的现有行，您需要找到要编辑的 DataRow，然后将更新后的值分配给所需的列。

例子，

```
DataSet1.Tables(0).Rows(4).Item(0) = "Updated Company Name"
DataSet1.Tables(0).Rows(4).Item(1) = "Seattle" 
```

**[来源这里](http://msdn.microsoft.com/en-us/library/tat996zc%28v=vs.80%29.aspx)**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-06T02:47:35.377

你的意思是你想添加一个新行并且只将数据放在某个列中？尝试以下操作：

```
var row = dataTable.NewRow();
row[myColumn].Value = "my new value";
dataTable.Add(row); 
```

但是，由于它是一个数据*表*，所以每一列中总会有某种类型的数据。它可能`DBNull.Value`不是您想象的任何数据类型。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-03-07T14:42:03.357

如果有人像我一样正在为此寻找更新的正确语法，请尝试以下操作：

```
Example:
dg.Rows[0].Cells[6].Value = "test"; 
```

# database-design - Redis 集合的替代品

> ID：12292297
> 
> 赞同：1
> 
> 时间：2012-09-06T02:46:21.323
> 
> 标签：database-design, nosql, redis, relational-database

因此，为了进行设置，我有一家公司，其中有用户和一组标签来描述这些用户。每个用户最多可以附加 5000 个标签。

我们有一个引擎，允许客户选择某些标签来制作标签组。该引擎具有 AND/Or 功能和 Include/Exclude。客户可以创建一个标签组，我们的引擎会找到满足标签组中指定的逻辑要求的用户总数。基本上这只是交集、联合和排除，所以 redis 集已经很完美了。

为了处理这个问题，我存储数据。标签1：[用户1，用户2，用户3]标签2：[用户1，用户5，用户6]等

从这里开始，所有的布尔逻辑都是使用脚本完成的。

然而，我们的客户群正在迅速扩大。几年之内，我们要么需要几个 64GB redis 服务器，要么需要一个替代方案。

这是我的问题。是否有任何闪电般快速的数据库选项来进行基于磁盘的相交和联合？我尝试过 Postgres，但性能无法接受。例如，对 500k 用户集进行集比较需要 1 秒。在 Postgres 中，我看到大约 30 秒，如果标签组中有很多标签，则更多。

我已经推荐了 DynamoDB 和其他一些人，但我只是想在深入挖掘之前获得一些有根据的意见。

谢谢，丹

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-06T04:17:52.233

Redis 是获得快速交叉和联合的最佳方式。你可以做一些事情来限制 Redis 使用的内存：

## 使用 IntSet

在内部，Redis 使用数据结构`IntSets`。这是一个排序的整数数组。要在这个集合中找到一个整数，复杂度是 O(log N)。IntSet 有三种风格——16 位、32 位和 64 位。

从内存的角度来看，Int Sets 是非常理想的。如果您使用集合并关心内存，则应确保您使用的是 Int Sets。

要利用 Int Sets，您需要做两件事 -

1.  确保集合包含整数。如果您的用户 ID 是字符串，则您必须稍微更改逻辑以使它们成为整数。
2.  在 redis.conf 中，将设置更新`set-max-intset-entries`为合理的数字。这将是给定标签的最大用户数。请注意，将其增加超过一个点实际上会降低性能。

## 将用户对象移动到另一个商店

这些集合只需要用户 ID，不需要整个用户对象。因此，如果内存成为限制，您还可以将用户对象移动到另一个数据存储区。也许是另一个 Redis 服务器，甚至是一个关系数据库。这种方法可以让您两全其美。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-06T22:23:44.547

“闪电般的数据库”和“基于磁盘”并不真正兼容。最快的存储是内存存储。

除了使用 intset 之外，另一个可能的优化是将集合表示为位图。这完全取决于数据的基数，但假设用户数量的增长速度快于标签数量，那么每个标签都有一个位图可能会很有趣。在位图中，给定位由用户的数字 ID 索引。

Redis 2.6正是为此目的支持[SETBIT](http://redis.io/commands/setbit)、[BITOP](http://redis.io/commands/bitop)和[BITCOUNT操作。](http://redis.io/commands/bitcount)

每个用户使用一个比特，500K 用户使用少于 64K，乘以全球标签数量。我怀疑你会发现它比使用 intset 更紧凑。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-15T20:07:49.980

很抱歉对这样一个老问题发表评论。

我确信速度不会像 redis 那样低，但我想提一下“标签”和“标签组”范围内的 2 个 postgres 功能

Ltree 是一种用于创建类别层次结构的便捷语法：（支持全文搜索） [http://www.postgresql.org/docs/9.1/static/ltree.html](http://www.postgresql.org/docs/9.1/static/ltree.html)

并且（我没有使用过这个）hstore 是一个标签实现 [http://www.postgresql.org/docs/9.0/static/hstore.html](http://www.postgresql.org/docs/9.0/static/hstore.html)

我相信，如果您对如何使用这些工具（并构建正确的索引）很聪明，您应该能够将查询时间降低到一个合理的值。

# java - 构建数据结构解析文本文件java

> ID：12292298
> 
> 赞同：0
> 
> 时间：2012-09-06T02:46:20.737
> 
> 标签：java, android, string, parsing, design-patterns

在文本文件中，我有以下文本。

```
add device 1: /dev/input/event7
  name:     "evfwd"
add device 2: /dev/input/event6
  name:     "aev_abs"
add device 3: /dev/input/event5
  name:     "light-prox"
add device 4: /dev/input/event4
  name:     "qtouch-touchscreen"
add device 5: /dev/input/event2
  name:     "cpcap-key"
add device 6: /dev/input/event1
  name:     "accelerometer"
add device 7: /dev/input/event0
  name:     "compass"
add device 8: /dev/input/event3
  name:     "omap-keypad" 
```

我需要做的是，对于每个名称元素，我需要提取相应的事件编号并将它们放在哈希图上。

例如，从文本中我们看到名称***evfwd***与***event7***链接，因此 hashmap 将如下所示

```
<"evfwd", 7> 
```

相似地

```
<"compass", 0> 
```

如何有效地解析文本并在 java 中构建类似的 hashmap？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T03:05:39.710

您可能应该使用正则表达式（正则表达式）来解析信息。要使用正则表达式，请查看 Pattern 和 Matcher 类，这是一个示例：

```
Pattern pattern = Pattern.compile("test");
Matcher matcher = pattern.matcher("some testing thing with a test in it"); 
```

然后，您可以调用 matcher.find() 将匹配器内容设置为下一个匹配项（如果找到另一个匹配项，则返回 true，如果结束则返回 false）。

您需要一个带有所谓捕获组的正则表达式，基本上每当您将 () 放在正则表达式中的某个内容周围时，您都可以调用`matcher.group(index)`以查找那些 () 的内容（应该注意 .group(0) 返回整个内容， .group(1) 第 1 个 ( ) 的内容等)

这是我刚刚制作的一个正则表达式，它应该适合你：

`add device \d*?: /dev/input/event(\d*?)\n name: \"(.*?)\"`

这用英语说：

`add device [some number]: /dev/input/event[some number, capture group #1]\n name: \"[some string, capture group #2]\"`

要获取它的事件编号，请调用`Integer.parseInt(matcher.group(1))`并获取它的名称，请调用`matcher.group(2)`。

如果有什么失败请告诉我，希望我有所帮助:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T03:08:54.427

我将使用基础知识。

编写一个函数，首先读取 4 个单词并获取第 4 个单词。使用“/”作为分隔符将第 4 个单词解析为 3 个不同的单词。取最后一个，读取最后一个 char 并将其保留为 hashmap 的值。

然后继续阅读另外两个单词，取最后一个单词并将其作为键和您之前读取的值存储到 hashmap 中。

递归应用此函数，直到到达文件末尾。

# php - 使用函数来减少重写代码但半显着地改变输出

> ID：12292302
> 
> 赞同：0
> 
> 时间：2012-09-06T02:47:08.157
> 
> 标签：php

好吧，我有一个函数可以绘制类似于网页上的标签的链接。基本上，我有一系列链接可用作选项卡，所有这些性质：

```
$aTabs[] = array("Mode" => "something", "Title" => "Something Else"); 
```

添加所有选项卡后，我想使用此功能打印它们：

```
function drawTabs($aTabs, $sFilename) {
global $iMode;

foreach ($aTabs as $aTab) {
    $sClass = "Tab";
    if ($iMode == $aTab["Mode"]) {
        $sClass .= " CurTab";
    }
    echo "<a class=\"{$sClass}\" href=\"{$sFilename}?Mode={$aTab["Mode"]}\">{$aTab["Title"]}</a>\n";
} 
```

}

所以这看起来一切都很好，花花公子。它工作得很好。

我还想在站点的另一部分使用它，它使用 URL 重写使事情看起来更整洁。在网站的那部分，输出需要是

```
echo "<a class=\"{$sClass}\" href=\"{$sFilename}/{$aTab["Mode"]}/\">{$aTab["Title"]}</a>\n"; 
```

我正在考虑添加一个字符串替换，它会做这样的事情：

```
str_replace("[mode]", $aTab["Mode"], $sFilename); 
```

这样我就可以打电话

```
drawTabs($aTabs, "/some/place/on/my/site/[mode]/"); 
```

并且很可能添加一个条件，以便如果 $sFilename 中没有“[mode]”，它只会使用“?Mode=$aTab[“Mode”]'将其添加到末尾。

我的问题是，我的逻辑看起来是否正确，还是有一些更简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T02:58:58.960

解决方案可能是这样的

```
function drawTabs($aTabs, $sFilename, $sFormat = null) {
    global $iMode;

    $sFormat = $sFormat ?: "<a class=\"[class]\" href=\"[fileName]?Mode=[mode]\">[title]</a>\n";

    foreach ($aTabs as $aTab) {
        $sClass = "Tab";
        if ($iMode == $aTab["Mode"]) {
            $sClass .= " CurTab";
        }

        $replacements = array(
            '[class]' => $sClass,
            '[fileName]' => $sFilename,
            '[mode]' => $aTab["Mode"],
            '[title]' => $aTab['Title'],
            );
            echo strtr($sFormat, $replacements);

    }
} 
```

然后使用它

```
$sFormat = "<a class=\"[class]\" href=\"[fileName]/[mode]/\">[title]</a>\n";

drawTabs($aTabs, $sFilename, $sFormat); 
```

# rspec - rspec：“没有要加载的文件——rspec/mocks”

> ID：12292304
> 
> 赞同：1
> 
> 时间：2012-09-06T02:47:28.400
> 
> 标签：rspec, mocking, rspec-mocks

我正在尝试对一些非常简单的 Ruby 进行测试。我的 linux 机器上安装了 ruby​​ 和 rails。我也安装了 rspec。我的宝石清单是：

```
LOCAL GEMS

actionmailer (3.2.8)
actionpack (3.2.8)
activemodel (3.2.8)
activerecord (3.2.8)
activeresource (3.2.8)
activesupport (3.2.8)
arel (3.0.2)
builder (3.0.0)
bundler (1.2.0, 1.1.5)
diff-lcs (1.1.3)
erubis (2.7.0)
hike (1.2.1)
i18n (0.6.1, 0.6.0)
journey (1.0.4)
json (1.7.5)
mail (2.4.4)
mime-types (1.19)
multi_json (1.3.6)
polyglot (0.3.3)
rack (1.4.1)
rack-cache (1.2)
rack-ssl (1.3.2)
rack-test (0.6.1)
rails (3.2.8)
railties (3.2.8)
rake (0.9.2.2)
rdoc (3.12)
rspec (2.11.0)
rspec-core (2.11.1)
rspec-expectations (2.11.2)
rspec-mocks (2.11.2)
rubygems-bundler (1.0.7)
rvm (1.11.3.5)
sprockets (2.4.5, 2.1.3)
thor (0.16.0)
tilt (1.3.3)
treetop (1.4.10)
tzinfo (0.3.33) 
```

但是当我跑步时

```
 rspec my_test_file.rb 
```

我收到以下错误：

```
/usr/lib/ruby/vendor_ruby/rspec/core/mocking/with_rspec.rb:1:in `require': no such file to load -- rspec/mocks (LoadError)
from /usr/lib/ruby/vendor_ruby/rspec/core/mocking/with_rspec.rb:1
from /usr/lib/ruby/vendor_ruby/rspec/core/configuration.rb:116:in `require'
from /usr/lib/ruby/vendor_ruby/rspec/core/configuration.rb:116:in `mock_framework'
from /usr/lib/ruby/vendor_ruby/rspec/core/configuration.rb:376:in `configure_mock_framework'
from /usr/lib/ruby/vendor_ruby/rspec/core/command_line.rb:19:in `run'
from /usr/lib/ruby/vendor_ruby/rspec/core/runner.rb:55:in `run_in_process'
from /usr/lib/ruby/vendor_ruby/rspec/core/runner.rb:46:in `run'
from /usr/lib/ruby/vendor_ruby/rspec/core/runner.rb:10:in `autorun'
from /usr/bin/rspec:4 
```

这似乎特定于 rspec/mocks（与 SE 上发布的其他“没有要加载的文件”红宝石错误不同）。那么我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T17:05:03.390

这根本不是 rspec 问题。我的机器只是不知道在哪里寻找 gem 文件。我必须按如下方式更新我的 .bashrc 文件：

```
PATH=$PATH:$HOME/.rvm/bin # Add RVM to PATH for scripting
[[ -s "/home/jason/.rvm/scripts/rvm" ]] && . "/home/jason/.rvm/scripts/rvm" # Load RVM function 
```

现在一切正常。

# c# - 将零字节添加到字节数组的最简单方法是什么？

> ID：12292311
> 
> 赞同：4
> 
> 时间：2012-09-06T02:48:08.110
> 
> 标签：c#

我正在将 a 转换`byte[]`为 a`BigInteger`并且我想确保它是积极的。[文档说](http://msdn.microsoft.com/en-us/library/dd268207.aspx)：

> 为防止正值被误解为负值，您可以在数组末尾添加一个零字节值。

但它没有具体说明如何。那么，我该怎么做呢？

* * *

发现这是最简单的：

```
public static BigInteger UnsignedBigInt(byte[] bytes)
{
    if ((bytes[bytes.Length - 1] & 0x80) != 0) Array.Resize(ref bytes, bytes.Length + 1);
    return new BigInteger(bytes);
} 
```

[谢谢 dtb](https://stackoverflow.com/a/12292424/65387)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-06T03:05:23.973

尝试这个：

```
byte[] bytes = ...

if ((bytes[bytes.Length - 1] & 0x80) != 0)
{
    Array.Resize<byte>(ref bytes, bytes.Length + 1);
}

BigInteger result = new BigInteger(bytes); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-06T03:06:05.183

使用静态方法 System.Array.Resize。在你的情况下：

```
byte[] b = Guid.NewGuid().ToByteArray();
System.Array.Resize<byte>(ref b, b.Length + 1);
b[b.Length - 1] = 0; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-06T03:08:55.330

```
var dest = new byte[17];
Array.Copy(Guid.NewGuid().ToByteArray(), dest , 16);
BigInteger bi = new BigInteger(dest); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-06T03:01:15.047

我认为它在页面底部进行了解释。请看示例：

```
 ulong originalNumber = UInt64.MaxValue;
byte[] bytes = BitConverter.GetBytes(originalNumber);
if (originalNumber > 0 && (bytes[bytes.Length - 1] & 0x80) > 0) 
{
   byte[] temp = new byte[bytes.Length];
   Array.Copy(bytes, temp, bytes.Length);
   bytes = new byte[temp.Length + 1];
   Array.Copy(temp, bytes, temp.Length);
}

BigInteger newNumber = new BigInteger(bytes);
Console.WriteLine("Converted the UInt64 value {0:N0} to {1:N0}.", 
                  originalNumber, newNumber); 
```

请注意，此代码是从 MSDN 站点复制的，以显示如何处理在转换为 BigInt 期间可能被视为负数的大数。当谈到效率时，这*并不是*你能得到的最好的，而且这个线程中提供了更好的片段。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-06T03:15:42.927

这看起来非常简单：

```
var bytesAfter = bytesBefore.Concat(new byte[] { 0 }).ToArray(); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-06T03:06:36.297

单程：

```
var x = BigInteger.Abs(new BigInteger(bytes)); 
```

# xcode - FetchedResultsController 返回空数组

> ID：12292313
> 
> 赞同：2
> 
> 时间：2012-09-06T02:48:23.420
> 
> 标签：xcode, core-data, nsfetchedresultscontroller, nsmanagedobject, cs193p

我有一个使用 CoreDataTableView 的 fetchedResultsController，我想从中检索信息，问题是我没有从 fetchedresultsController 中获取任何值，我相信这些值存储在 CoreDataProperly 中，但我认为我没有正确检索它们。我有一个单独的文件来存储所有数据，并且我有一个应该传回 NSManagedObject 上下文的类方法，我认为问题可能出在此处。我正在存储 NSDictionary 的某些值，例如标题和 id 以及图像。这是代码

```
#import "FlickrVacationViewController.h"
#import "FlickrCoreDataProcess.h"
#import "VacationPhoto+Flickr.h"

@interface FlickrVacationViewController ()
@end

@implementation FlickrVacationViewController

-(void) setupFetchedResultsController{

NSFetchRequest * request = [NSFetchRequest fetchRequestWithEntityName:@"VacationPhoto"];
request.sortDescriptors = [NSArray arrayWithObject:[NSSortDescriptor sortDescriptorWithKey:@"title" ascending:YES selector:@selector(localizedCaseInsensitiveCompare:)]];

//[FlickrCoreDataProcess shareManagedObject] should share the NSManagedObject
//performFetch gets called here
self.fetchedResultsController = [[NSFetchedResultsController alloc] initWithFetchRequest:request managedObjectContext:[FlickrCoreDataProcess shareManagedObject].managedObjectContext sectionNameKeyPath:nil cacheName:nil];

NSLog(@"Number of Objects = %i", [[self.fetchedResultsController fetchedObjects] count]);
//This returns 0

NSLog(@"temp array is %@",self.fetchedResultsController.fetchedObjects);
//Array is empty?
}

- (void)viewDidLoad
{
[super viewDidLoad];

[self setupFetchedResultsController];
}

- (void)viewDidUnload
{
[super viewDidUnload];
// Release any retained subviews of the main view.
// e.g. self.myOutlet = nil;
}

//This is not called, I think since the fetchedResultsController doesnt have any values
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
static NSString *CellIdentifier = @"Vacation Cell";
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

// Configure the cell...

VacationPhoto  *vacationPhoto = [self.fetchedResultsController objectAtIndexPath:indexPath];
NSLog(@"text = %@", vacationPhoto.title);
cell.textLabel.text = vacationPhoto.title;

return cell;
}

@end 
```

这是存储数据的文件这里是传递NSManagedObject的方法

```
+(UIManagedDocument*) shareManagedObject{

NSURL* url  = [[[NSFileManager defaultManager] URLsForDirectory:NSDocumentDirectory inDomains:NSUserDomainMask] lastObject];
url = [url URLByAppendingPathComponent:@"Default Photo DataBase"];

static UIManagedDocument *doc = nil;

static dispatch_once_t onceToken;
dispatch_once(&onceToken, ^{
    doc = [[UIManagedDocument alloc] initWithFileURL:url];
});

return doc;

} 
```

这是我存储文件的方式

```
+(VacationPhoto*) photoWithFlickrInfo: (NSDictionary*) flickrInfo inManagedObjectContext: (NSManagedObjectContext*) context{

NSLog(@"Photo To Store =%@", flickrInfo);   
VacationPhoto * photo = nil;

NSFetchRequest *request = [NSFetchRequest fetchRequestWithEntityName:@"VacationPhoto"];
request.predicate = [NSPredicate predicateWithFormat:@"uniqueID = %@", [flickrInfo objectForKey:FLICKR_PHOTO_ID]];
NSSortDescriptor * descriptor = [NSSortDescriptor sortDescriptorWithKey:@"title" ascending:YES];
request.sortDescriptors = [NSArray arrayWithObject:descriptor];

NSError *error = nil;
NSArray *matches =  [context executeFetchRequest:request error:&error];

if (!matches || [matches count] > 1) {
    // handle error
} else if ( [matches count] == 0){
    photo = [NSEntityDescription insertNewObjectForEntityForName:@"VacationPhoto" inManagedObjectContext:context];
    photo.placeName = [flickrInfo objectForKey:FLICKR_PHOTO_PLACE_NAME];
    photo.title = [flickrInfo objectForKey:FLICKR_PHOTO_TITLE];
    NSLog(@"title = %@", photo.title);
    photo.uniqueID = [flickrInfo objectForKey:FLICKR_PHOTO_ID];
    NSLog(@"ID = %@", photo.uniqueID);
    photo.imgURL = [[FlickrFetcher urlForPhoto:flickrInfo format:FlickrPhotoFormatLarge] absoluteString];

} else {
    photo = [matches lastObject];
}

return photo;

} 
```

可能没有提到这一点，但我首先创建了一个 UITableViewController，然后将其设为 CoreDataTableViewController 的子类，因此应该从中调用 performFetch 和其他类似的函数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T02:56:15.080

好像您忘记调用 - [[NSManagedObjectContext](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/CoreDataFramework/Classes/NSManagedObjectContext_Class/NSManagedObjectContext.html) save:] 来实际保存您插入的对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T03:02:19.883

您似乎缺少对 performFetch 的调用以及告诉表每个部分中有多少行的数据源方法。

# c - 在C中替换字符串中的字符

> ID：12292317
> 
> 赞同：3
> 
> 时间：2012-09-06T02:49:08.887
> 
> 标签：c, string, string.h

我有一个格式为字符串的 char 数组，`<item1>:<item2>:<item3>`分解它的最佳方法是什么，以便我可以分别打印不同的项目？我应该只遍历数组，还是有一些字符串函数可以提供帮助？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T02:53:09.907

我会使用该`sscanf`功能

```
char * str = "i1:i2:i3";
char a[10];
char b[10];
char c[10];
sscanf(str, "%s:%s:%s", a, b, c); 
```

这是不安全的，因为它容易受到缓冲区溢出的影响。在 Windows 中，有 sscanf_s 作为安全黑客。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T02:56:42.940

您可以尝试 strtok：这里是一些示例代码，用于获取由 - 或 | 分隔的子字符串

```
#include <stdio.h>
#include <string.h>
int main(int argc,char **argv)
{
char  buf1[64]={'a', 'a', 'a', ',' , ',', 'b', 'b', 'b', '-', 'c','e', '|', 'a','b', };
/* Establish string and get the first token: */
char* token = strtok( buf1, ",-|");
while( token != NULL )
    {
/* While there are tokens in "string" */
        printf( "%s ", token );
/* Get next token: */
        token = strtok( NULL, ",-|");
    }
return 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T06:27:15.820

只需遍历字符串，每次点击`':'`，打印自上次出现`':'`.

```
#define DELIM ':'

char *start, *end;

start = end = buf1;

while (*end) {
    switch (*end) {
        case DELIM:
            *end = '\0';
            puts(start);
            start = end+1;
            *end = DELIM;
            break;
        case '\0':
            puts(start);
            goto cleanup;
            break;
    }
    end++;
}

cleanup:
// ...and get rid of gotos ;) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-06T04:22:27.287

`strtok`是最好的选择，想在这里添加两件事：

1）`strtok`修改/操作您的原始字符串并将其从分隔符中剥离出来，并且

2）如果你有一个多线程程序，你最好使用`strtok_r`线程安全/可重入版本。

# php - php 图形统计从数据库中获取数据？

> ID：12292321
> 
> 赞同：0
> 
> 时间：2012-09-06T02:49:56.253
> 
> 标签：php

我有一个*像*rapidshare 这样的网站，允许用户*上传**文件*和注册很容易使用....谢谢

 *** * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T02:52:13.120

我建议 [Google Chart API](https://developers.google.com/chart/)支持复杂的绘图，数据来自 MYSQL 数据库，还支持 2D/3D 图表**

# jquery - 如何更改 jQuery 滑块中的排序标准？

> ID：12292325
> 
> 赞同：1
> 
> 时间：2012-09-06T02:50:49.687
> 
> 标签：jquery, html, wordpress

我正在尝试为 Wordpress 主题编辑此主题的模板：http: [//demo.fabthemes.com/financio/](http://demo.fabthemes.com/financio/) 在“来自博客”容器中，我不想显示所有最新条目。由于我在我的学习道路上，我不需要一个确切的解决方案。我只需要有人指出我正确的方向。

问题：如何更改我的代码，以便滑块显示来自特定评分标准的条目？我觉得我需要改变一些东西

`"$the_query->have_posts() ) : $the_query->the_post();"`

```
<div id="timer1" class="timer"></div>
 <div id="carslide">
  <?php $the_query = new WP_Query('posts_per_page=9' );
   while ( $the_query->have_posts() ) : $the_query->the_post(); ?>
 <div class="post slidepost" id="post-<?php the_ID(); ?>">
   <?php
      $thumb = get_post_thumbnail_id();
      $img_url = wp_get_attachment_url( $thumb,'full' ); //get full URL to image (use "large" or "medium" if the images too big)
      $image = aq_resize( $img_url, 300, 150, true ); //resize & crop the image
   ?>
<?php if($image) : ?>
  <a href="<?php the_permalink(); ?>">
   <img class="slide-image" src="<?php echo $image ?>"/>
  </a>
<?php endif; ?>
    <h2><a href="<?php the_permalink() ?>" rel="bookmark" title="Permanent Link to <?php the_title(); ?>"><?php the_title(); ?></a></h2>
  <?php wpe_excerpt('wpe_excerptlength_index', 'wpe_excerptmore'); ?>
  <div class="clear">
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T03:05:40.177

我认为您想更改该`WP_Query('posts_per_page=9')`部分，以便它显示与不同查询匹配的帖子。您可以阅读[查询参考以](http://codex.wordpress.org/Function_Reference/query_posts)获取更多信息。

例如，如果您想显示特定类别的五个最新帖子，您可以使用`WP_Query('posts_per_page=5&cat=3')`.

# java - 在android中使用Thread不安全吗？

> ID：12292326
> 
> 赞同：0
> 
> 时间：2012-09-06T02:50:57.717
> 
> 标签：java, android

我使用了一个服务启动了一个线程，在这个线程中，我写了一个while循环（我设置了一个标志，while标志为真，线程运行，如果标志为假，那么线程不会做任何事情，因此停止手动线程）在这个线程中。当我调试我的代码时，我经常注意到线程已经结束，但服务仍在运行。是android系统回收的吗？

如何防止我的线程被回收？

====== 编辑 =======

“将在结束之前由系统自动清理线程” - 表示线程在不应该被杀死时被杀死

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T03:03:02.220

您是否在循环中调用 Thread.yield() 以允许系统执行其他操作？如果不是——那么 android 可能会因为消耗 100% CPU 使用率而杀死线程——如果它是一个简单的循环，堆栈跟踪不会改变，所以它会让你的脚本挂起

[http://developer.android.com/reference/java/lang/Thread.html#yield](http://developer.android.com/reference/java/lang/Thread.html#yield) ()

Yield() 告诉线程执行器它应该在返回到您的线程之前停止并运行其他线程，没有它您的循环将窃取其他应用程序的资源

如果你确定你的旗帜在一定时间内不会改变，你也可以睡觉

**编辑 - 背景**- 这是 android 检测挂起线程的方式 - 如果一个线程占用了 100% 的 CPU，那么它将堆栈跟踪转储到文件，等待一小段时间，然后转储另一个堆栈跟踪 - 如果两者匹配它假设代码已经停止运行，并且会为某个活动发出 ANR“xx 没有响应”对话框，或者，如果它是一个服务，它会简单地杀死它并自动重新启动它。

通过让步，您可以防止它消耗 100%，因此它永远不会尝试这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T03:02:40.383

不清楚你的代码在做什么，甚至你认为应该发生什么都不清楚。然而，有一件事我们可以马上弄清楚。

Java（和 Android）中的线程不会“回收”。一旦 Thread 的`run()`方法结束（通过返回，或通过允许某些异常传播），它将永远不会重新启动。永远不会。

此外，线程仍在运行时不会被垃圾收集。垃圾收集不能导致线程结束。

# wordpress - 在wordpress的类别模板页面上按标签显示相关帖子

> ID：12292332
> 
> 赞同：1
> 
> 时间：2012-09-06T02:51:37.623
> 
> 标签：wordpress, nested-loops

我想通过类别页面上帖子旁边的标签显示相关帖子。我能找到的所有相关帖子代码都将在嵌套循环中使用，`single.php`但我需要它在类别页面的循环中。

因此，当您转到“猫”类别时，它应该输出以下内容：“帖子 1 标题”，“猫”类别，标签“小猫”“相关帖子 1.1 标题”，标签“小猫”“相关帖子 1.2 标题”，标签“小猫”

* * *

“帖子 2 标题”，类别“猫”，标签“tomcats” “相关帖子 2.1 标题”，标签“tomcats” “相关帖子 2.2 标题”，标签“tomcats”

* * *

...

这是我想出的代码，但它坏了。

`// 第一个查询 $my_query = new WP_Query('cat=6');

```
// If first query have posts
if( $my_query->have_posts() ) :

    // While first query have posts
    while ($my_query->have_posts()) : $my_query->the_post(); 
    ?>

    <!-- start post -->

     <!-- End post div -->

        <?php
        // tags

            $tag_ids = array();
                            foreach($tags as $individual_tag) $tag_ids[] = $individual_tag->term_id;
                            $args=array(
                            'tag__in' => $tag_ids,
                            'post__not_in' => array($post->ID),
                            'posts_per_page'=>99,
                            'caller_get_posts'=>1
                            );
            // Second query
            $my_second_query = new WP_Query('$args');

            // If second query have posts
            if( $my_second_query->have_posts() ) :
            ?>

                <?php
                // While second query have posts
                while( $my_second_query->have_posts() ) : $my_second_query->the_post();

                    ?>
                    <!-- start post -->

     <!-- End post div -->

                    <?php
                // End second while have posts
                endwhile;
                ?>
    <?php
    // End first while have posts
    endwhile; 

// End if first query have posts
endif;
?>` 
```

这甚至可能吗？我一辈子都找不到例子。提前谢谢了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T05:11:08.437

是的，有可能。看起来您的代码方向正确。您需要做的就是创建一个自定义查询，查看当前帖子的标签，然后使用这些标签来查找其他帖子。`single.php`只要您在循环中，它是否在其他地方或任何地方使用都无关紧要。将此添加到您的`functions.php`文件中：

```
function echo_related_posts() {
    global $post;
    // Get the current post's tags
    $tags = wp_get_post_tags( $post->ID );
    $tagIDs = array();
    if ( $tags ) {
        // Fill an array with the current post's tag ids
        $tagcount = count( $tags );
        for ( $i = 0; $i < $tagcount; $i++ ) {
            $tagIDs[$i] = $tags[$i]->term_id;
        }
        // Query options, the magic is with 'tag__in'
        $args = array(
            'tag__in' => $tagIDs,
            'post__not_in' => array( $post->ID ),
            'showposts'=> 5
        );
        $my_query = new WP_Query( $args );
        // If we have related posts, show them
        if ( $my_query->have_posts() ) {
            $related = '';
            while ( $my_query->have_posts() ) {
                $my_query->the_post();
                $current = $my_query->current_post + 1;
                $related .= "Related post " . $current . ": ";
                $related .= "<a href='" . get_permalink() . "' >";
                $related .= get_the_title();
                $related .= "</a>";
                if ( ( $my_query->current_post + 1 ) != ( $my_query->post_count ) ) $related .= ", ";
            }
            echo $related;
        }
        else echo "No related posts";
    }
    else echo "No related posts";
    wp_reset_query();
} 
```

显然，您可以更改此函数中的任何内容以获得您正在寻找的确切结果，这只是一个示例，最多可以回显五个相关帖子。查看[http://codex.wordpress.org/Class_Reference/WP_Query](http://codex.wordpress.org/Class_Reference/WP_Query)以获取有关自定义查询的进一步参考。

使用该功能后，您现在可以访问该`echo_related_posts()`功能，该功能将通过常见标签输出任何相关帖子。因此，在您`category.php`或您的类别页面使用的任何模板中，您可以执行以下操作（为简洁起见，这是一个过度简化的循环，只需注意`echo_related_posts()`函数）：

```
// Inside your existing loop
<?php while ( have_posts() ) : the_post(); ?>

    // Output the current post info here

    // Output the related posts
    <?php echo_related_posts(); ?>

<?php endwhile; ?> 
```

假设找到相关帖子，它将输出如下内容：

“相关文章 1：标题一，相关文章 2：标题二，相关文章 3：标题三”

希望你能从那里拿走它！

# mysql - MySQL 仅在 where 子句存在时更新行

> ID：12292334
> 
> 赞同：13
> 
> 时间：2012-09-06T02:51:51.857
> 
> 标签：mysql

我相信我在某处读到有一个 mysql 配置设置可以防止通过控制台更新行，除非存在 WHERE 子句。

我无法在文档中找到它，是否存在该选项？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-06T02:58:35.073

那就是 MYSQL 安全更新模式。

***[在这里检查。](https://www.xpertdeveloper.com/mysql-safe-update/)***

还有**[--safe-updates](http://dev.mysql.com/doc/refman/5.6/en/mysql-tips.html#safe-updates)**选项。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-06T02:59:42.827

就`SET SQL_SAFE_UPDATES=0;`在运行查询之前。

请参阅有关安全模式的[MySQL 提示。](http://dev.mysql.com/doc/refman/5.0/en/mysql-tips.html)

> 对于初学者来说，一个有用的启动选项是 --safe-updates（或 --i-am-a-dummy，具有相同的效果）。这对于您可能已经发出 DELETE FROM tbl_name 语句但忘记了 WHERE 子句的情况很有帮助。通常，这样的语句会从表中删除所有行。使用 --safe-updates，您只能通过指定标识行的键值来删除行。这有助于防止事故。
> 
> 除非您在 WHERE 子句中指定键约束或提供 LIMIT 子句（或两者），否则不允许执行 UPDATE 或 DELETE 语句。例如：
> 
> ```
> UPDATE tbl_name SET not_key_column=val WHERE key_column=val;
> 
> UPDATE tbl_name SET not_key_column=val LIMIT 1; 
> ```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-06T03:00:53.877

来自 MySQL 文档：[http ://dev.mysql.com/doc/refman/5.5/en/mysql-tips.html](http://dev.mysql.com/doc/refman/5.5/en/mysql-tips.html)

"4.5.1.6.2\. 使用 --safe-updates 选项

对于初学者来说，一个有用的启动选项是 --safe-updates（或 --i-am-a-dummy，具有相同的效果）。这对于您可能已经发出 DELETE FROM tbl_name 语句但忘记了 WHERE 子句的情况很有帮助。通常，这样的语句会从表中删除所有行。使用 --safe-updates，您只能通过指定标识行的键值来删除行。这有助于防止事故。

[...]

除非您在 WHERE 子句中指定键约束或提供 LIMIT 子句（或两者兼有），否则不允许执行 UPDATE 或 DELETE 语句。”

# nhibernate - Castle.Facilities.AutoTx 错误“非法尝试将集合与两个打开的会话相关联”的事务问题

> ID：12292337
> 
> 赞同：1
> 
> 时间：2012-09-06T02:52:42.603
> 
> 标签：nhibernate, transactions, castle-windsor

我们在一个项目中使用了一些 Castle 设施，特别是 Castle Automatic 交易和 NHibernateIntegration 设施。

最初的设置是每个方法的事务，但是我们在回滚整个工作单元时遇到了问题。一切正常。我们对每个方法的这些小交易的 Castle 配置是：

```
<component id="SessionModule"
             service="BCS.Modules.ISessionModule, BCS.Modules"
             type="BCS.Modules.SessionModule, BCS.Impl"
             isTransactional="true">     
     <transaction>
        <method name="GetCurrentDate" />
        <method name="GetCurrentDateAndTime" />
     </transaction>
  </component> 
```

然后我们开始在整个请求中遇到回滚操作的问题，因此我们决定将每个业务事务的所有单一事务分组在一个父事务中，例如：

```
namespace BCS.BusinessRules {
   [Transactional]
   public class TransactionModule : ITransactionModule {

      [Transaction( TransactionMode.Requires, IsolationMode.ReadUncommitted, Distributed = false )]
      public Dictionary<String, double> CalculateGoalSetting( Member member, WorkflowContext contextSetting ) { 
       // Calling a lot of child transactional methods for this unit of work
      }

      [Transaction( TransactionMode.Requires, IsolationMode.ReadUncommitted, Distributed = false )]
      public MembershipOperationResult SelfEnrollment( Member member ) {
          // Same here, Another unit of work      
      }

   }

} 
```

这些工作单元在我们的 Web 应用程序中被称为每个请求一个。但在那之后，我们开始遇到诸如**非法尝试将集合与两个打开的会话相关联**、**超时过期等问题。在操作完成之前超时时间已过或服务器没有响应。**有时**会出现死锁**

最常见的错误是一个：

“/”应用程序中的服务器错误。非法尝试将集合与两个打开的会话相关联描述：在执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。

异常详细信息：NHibernate.HibernateException：非法尝试将集合与两个打开的会话相关联

源错误：在执行当前 Web 请求期间生成了未处理的异常。可以使用下面的异常堆栈跟踪来识别有关异常起源和位置的信息。

堆栈跟踪：

```
[HibernateException: Illegal attempt to associate a collection with two open sessions]
   NHibernate.Collection.AbstractPersistentCollection.SetCurrentSession(ISessionImplementor session) +242
   NHibernate.Event.Default.OnUpdateVisitor.ProcessCollection(Object collection, CollectionType type) +177
   NHibernate.Event.Default.AbstractVisitor.ProcessEntityPropertyValues(Object[] values, IType[] types) +83
   NHibernate.Event.Default.DefaultSaveOrUpdateEventListener.PerformUpdate(SaveOrUpdateEvent event, Object entity, IEntityPersister persister) +632
   NHibernate.Event.Default.DefaultSaveOrUpdateEventListener.PerformSaveOrUpdate(SaveOrUpdateEvent event) +101
   NHibernate.Event.Default.DefaultSaveOrUpdateEventListener.OnSaveOrUpdate(SaveOrUpdateEvent event) +365
   NHibernate.Impl.SessionImpl.FireSaveOrUpdate(SaveOrUpdateEvent event) +394
   NHibernate.Impl.SessionImpl.SaveOrUpdate(String entityName, Object obj) +392
   NHibernate.Engine.Cascade.CascadeOn(IEntityPersister persister, Object parent, Object anything) +578
   NHibernate.Event.Default.AbstractFlushingEventListener.CascadeOnFlush(IEventSource session, IEntityPersister persister, Object key, Object anything) +157
   NHibernate.Event.Default.AbstractFlushingEventListener.PrepareEntityFlushes(IEventSource session) +364
   NHibernate.Event.Default.AbstractFlushingEventListener.FlushEverythingToExecutions(FlushEvent event) +225
   NHibernate.Event.Default.DefaultAutoFlushEventListener.OnAutoFlush(AutoFlushEvent event) +83
   NHibernate.Impl.SessionImpl.AutoFlushIfRequired(ISet`1 querySpaces) +474
   NHibernate.Impl.SessionImpl.List(CriteriaImpl criteria, IList results) +782
   NHibernate.Impl.CriteriaImpl.List(IList results) +63
   NHibernate.Impl.CriteriaImpl.UniqueResult() +69
   BCS.Modules.Behavior.BehaviorElementDataAccess.GetByName(String name) in c:\Projects\dps\bcs\branches\bcs31\BCS.Impl\Modules\Behavior\BehaviorElementDataAccess.cs:41
   BCS.Modules.Behavior.BehaviorManagerModule.FindBehaviorElementByName(String behaviorName) in c:\Projects\dps\bcs\branches\bcs31\BCS.Impl\Modules\Behavior\BehaviorManagerModule.cs:191
   Castle.Proxies.Invocations.IBehaviorManagerModule_FindBehaviorElementByName.InvokeMethodOnTarget() +147
   Castle.DynamicProxy.AbstractInvocation.Proceed() in e:\OSS.Code\Castle.Core\src\Castle.Core\DynamicProxy\AbstractInvocation.cs:144
   Castle.Facilities.AutoTx.TransactionInterceptor.Intercept(IInvocation invocation) in c:\dev\dotnet\castle\main\Castle.Facilities.AutomaticTransactionManagement\src\Castle.Facilities.AutoTx\TransactionInterceptor.cs:92
   Castle.DynamicProxy.AbstractInvocation.Proceed() in e:\OSS.Code\Castle.Core\src\Castle.Core\DynamicProxy\AbstractInvocation.cs:166
   Castle.Proxies.IBehaviorManagerModuleProxy.FindBehaviorElementByName(String behaviorName) +356
   KAO.Behavior.CommonBehaviorCalculations.SaveGoalActivityMinutes(Member member, JulianDate startingDate, JulianDate endingDate, JulianDate currentDate) in c:\svn\qupio21\KAO\Behavior\CommonBehaviorCalculations.cs:148
   KAO.BusinessRules.TransactionModule.CalculateGoalSetting(Member member, WorkflowContext contextSetting) in c:\svn\qupio21\KAO.BusinessRules\TransactionModule.cs:111
   Castle.Proxies.Invocations.ITransactionModule_CalculateGoalSetting.InvokeMethodOnTarget() +155
   Castle.DynamicProxy.AbstractInvocation.Proceed() in e:\OSS.Code\Castle.Core\src\Castle.Core\DynamicProxy\AbstractInvocation.cs:144
   Castle.Facilities.AutoTx.TransactionInterceptor.Intercept(IInvocation invocation) in c:\dev\dotnet\castle\main\Castle.Facilities.AutomaticTransactionManagement\src\Castle.Facilities.AutoTx\TransactionInterceptor.cs:169
   Castle.DynamicProxy.AbstractInvocation.Proceed() in e:\OSS.Code\Castle.Core\src\Castle.Core\DynamicProxy\AbstractInvocation.cs:166
   Castle.Proxies.ITransactionModuleProxy.CalculateGoalSetting(Member member, WorkflowContext context) +183
   BCS.Web.App.Landing.Tunneling.Goals.cmdCalculate_Click(Object sender, EventArgs e) in c:\svn\qupio21\BCS.Web.App\Landing\Tunneling\Goals.aspx.cs:104
   System.Web.UI.WebControls.LinkButton.RaisePostBackEvent(String eventArgument) +155
   System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +3707

Version Information: Microsoft .NET Framework Version:4.0.30319; ASP.NET Version:4.0.30319.272 
```

我们的数据访问层使用 NHibernate 集成工具，当前打开的会话：

```
 public class BehaviorElementDataAccess : DataAccessBase<BehaviorElement, Int64>, IBehaviorElementDataAccess {

      public BehaviorElementDataAccess( ISessionManager sessionManager ) : base( sessionManager ) { }

      public T GetById<T>( long id ) where T : BehaviorElement {
         T ret;
         using ( ISession session = SessionManager.OpenSession( ) ) {
            ret = session.Load<T>( id );
            session.Evict( ret );
         }
         return ret;
      }
} 
```

我们不知道这里如何使用两个会话，在子事务一切正常之前，现在我们的并发性显着降低。我最初的想法是，Castle AutoTX 交易的默认值是 IsolationLevel.ReadCommited 对于那些只在 XML 配置文件中声明的 XML 中的交易，另一方面，在代码文件中声明的交易是 IsolationLevel.ReadUncommited，所以孩子的必须继承此行为也为事务共享相同的 Hibernate Session。

Nhibernate级别的数据库隔离级别会影响这个吗？我们在我们的设施中为数据库设置了这个设置>：

```
 <?xml version="1.0" encoding="utf-8" ?>
<castle>
       <!-- Facilities -->
       <facilities>
          <facility id="atm" type="Castle.Facilities.AutoTx.TransactionFacility, Castle.Facilities.AutoTx">
          </facility>
          <facility id="nhibernate" type="Castle.Facilities.NHibernateIntegration.NHibernateFacility, Castle.Facilities.NHibernateIntegration">
             <factory id="nhibernate.factory" alias="nh.facility.default">
                <settings>
                   <item key="connection.provider">NHibernate.Connection.DriverConnectionProvider</item>
                   <item key="connection.driver_class">NHibernate.Driver.SqlClientDriver</item>
                   <item key="connection.connection_string_name">SQLServerConnection</item>
                   <item key="connection.isolation">ReadCommitted</item>
                   <item key="dialect">NHibernate.Dialect.MsSql2008Dialect</item>
                   <item key="adonet.batch_size">0</item>
                   <item key="use_outer_join">true</item>
                   <item key="query.substitutions">true 1, false 0, yes 'Y', no 'N'</item>
                   <item key="show_sql">true</item>
                   <item key="command_timeout">600</item>
                   <item key="proxyfactory.factory_class">NHibernate.ByteCode.Castle.ProxyFactoryFactory, NHibernate.ByteCode.Castle</item>
                   <item key="cache.use_minimal_puts">true</item>
                </settings>
                <assemblies>
                   <assembly>BCS.Impl</assembly>
                </assemblies>
                <listeners>
                   <listener type="BCS.NHibernate.Types.ActivitySaveUpdateListener, BCS.Impl" event="Save"/>
                   <listener type="BCS.NHibernate.Types.ActivitySaveUpdateListener, BCS.Impl" event="Update"/>
                   <listener type="BCS.NHibernate.Types.ActivitySaveUpdateListener, BCS.Impl" event="SaveUpdate"/>
                   <listener type="BCS.NHibernate.Types.ActivityDeleteListener, BCS.Impl" event="Delete"/>
                </listeners>

             </factory>
          </facility>
       </facilities>

       <include uri="file://modules.cfg.xml" />

    </castle> 
```

我需要提一下，工作单元回滚工作得很好，但是一些用户同时得到了 **NHibernate.HibernateException：非法尝试将一个集合与**我们工作单元中的两个打开的会话相关联，另一方面是嵌套的与父亲交易所有这些问题。我们将 IIS 池更改为 ASP.Net 4.0 Classic 也没有运气......

我们尝试了不同的方法，但没有任何效果。我们的 Castle 二进制文件版本是：

```
Castle.Facilities.AutoTx 2.5.1.0
Castle.Facilities.NHibernateIntegration 1.1.0.0
Castle.Services.Transaction 2.5.0.0 
Castle.Windsor 2.5.1.0
NHibernate.ByteCode.Castle 3.1.0.4000 
NHibernate  3.1.0.4000
ASP.Net 4.0 
```

有些人有类似的问题或过去有类似的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T08:08:38.067

在 BehaviorElementDataAccess.GetById 方法中，您正在逐出您加载的实体，这显然会将其从会话中删除。但是，您没有对任何相关实体（尤其是本例中的任何集合）做任何事情。

我怀疑正在发生的事情是您正在加载实体，然后 NHibernate 为其关联的集合创建代理，并且这些代理保留对会话的引用，然后当您驱逐加载的实体时，代理仍然具有此引用，所以当您尝试为了稍后在同一个会话中再次保存它，因为实体被逐出，NHibernate 尝试将实体重新附加到会话，但这样做它会尝试重新附加已经引用了会话的集合代理和这会导致错误。

我不确定您为什么要在 GetById 方法中驱逐实体 - 我建议不要这样做，它绕过了 NHibernate 提供的许多功能。

# python - Django 查询集和生成器

> ID：12292343
> 
> 赞同：11
> 
> 时间：2012-09-06T02:53:18.297
> 
> 标签：python, django, iteration, generator

出乎意料的是，我想知道以下使用生成器迭代结果集的方式是否会对正常迭代产生任何积极或消极的影响？

例如。

```
def all_items_generator():
  for item in Item.objects.all():
    yield item

for item in all_items_generator():
  do_stuff_with_item(item) 
```

反对：

```
for item in Item.objects.all():
  do_stuff_with_item(item) 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-09-06T02:59:14.783

前者会更慢，因为它将创建一个包含所有模型的列表，然后一次生成一个，而后者将直接使用该列表。如果你想要一个生成器，那么你应该使用它[`QuerySet.iterator()`](https://docs.djangoproject.com/en/dev/ref/models/querysets/#iterator)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-06T03:06:25.813

不。除了它更冗长、多余且不是特别有用（在您提供的生成器的上下文中）之外。

当您`Item.objects.all()`在 a中执行操作时`for`，它们会使用带有查询缓存（[source](https://github.com/django/django/blob/master/django/db/models/query.py#L95)）的迭代器进行[迭代。](https://docs.djangoproject.com/en/dev/ref/models/querysets/#iterator)如果您不想缓存结果，请按照Ignacio 的建议使用。`iterator()`

# javascript - JS扩展div的定位

> ID：12292345
> 
> 赞同：0
> 
> 时间：2012-09-06T02:53:54.837
> 
> 标签：javascript, jquery, html, expand

我正在构建一个菜单，该菜单由沿标题图像底部的一系列 div 组成，这些 div 旨在在悬停时向上扩展至指定高度。

我有一个[JSFiddle](http://jsfiddle.net/DbTyX/18/)几乎可以完成我想要的，但是由于某种原因，当光标在它上面时，div 会跳到容器的顶部。我想知道导致这种行为的 JS（或者可能是 CSS）中缺少什么。我还添加了一张图片来帮助展示所需的效果。

![图片](../Images/3e73f8f083d5b70d4d2eaf4b8ffb3f07.png)

一如既往，非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T03:04:15.317

查看您的 JSFiddle，我不确定我是否明白您为什么还要为 top 属性设置动画，没有它的代码：

```
$("#pagebuttonhome").hover(function() {
    $("#pagebuttonhome").animate({'height': '80px'});
}, function() {
    $("#pagebuttonhome").animate({'height': '30px'});
}); 
```

我相信按您的预期工作。

这也可以单独使用 CSS（带有过渡）来完成，如果您对该解决方案感兴趣，请告诉我

**注意**：仅 CSS 的解决方案与任何不支持过渡的浏览器不兼容

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T03:07:46.713

如果将元素设置`position`为`absolute`然后设置`top`or`left`值，则这些值将被解释为相对于原点 (0,0)。使用`marginTop`/`marginLeft`代替，如此[处所示](http://jsfiddle.net/DbTyX/18/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T03:09:40.080

由于已经在 CSS 中定义了，所以在制作动画时`bottom: 0px`不需要定义属性。`top`您可以简单地重新定义`height`它，它将按预期工作。这是一个例子：http: [//jsfiddle.net/DbTyX/20/](http://jsfiddle.net/DbTyX/20/)

```
$("#pagebuttonhome").hover(function() {
    $("#pagebuttonhome").animate({'height': '80px'});
}, function() {
    $("#pagebuttonhome").animate({'height': '30px'});
}); 
```

只是为了优化，您还可以使用`this`关键字：

```
$("#pagebuttonhome").hover(function() {
    $(this).animate({'height': '80px'});
}, function() {
    $(this).animate({'height': '30px'});
}); 
```

# asp-classic - 如何防止经典 ASP 应用程序上的页面缓存？

> ID：12292346
> 
> 赞同：4
> 
> 时间：2012-09-06T02:53:55.657
> 
> 标签：asp-classic, cache-control

我需要一些页面**不要**缓存在经典 ASP 应用程序上，但我已经尝试了所有可能的标题组合，但似乎没有任何效果：

```
Response.Expires         = -1
Response.ExpiresAbsolute = Now() - 1
Response.CacheControl    = "no-cache; private; no-store; must-revalidate; max-stale=0; post-check=0; pre-check=0; max-age=0"
Response.AddHeader         "Cache-Control", "no-cache; private; no-store; must-revalidate; max-stale=0; post-check=0; pre-check=0; max-age=0"  ' Same as previous line, I know, just in case.
Response.AddHeader         "Pragma", "no-cache"
Response.AddHeader         "Expires", "-1" 
```

我也尝试重新启动网站和 IIS，但无济于事。当我离开页面并使用浏览器的后退按钮返回时，它不会重新加载。

我在这里想念什么？

**编辑**：经过大量的谷歌搜索，我找到并实现[了这个 JavaScript 解决方案](http://www.hunlock.com/blogs/Mastering_The_Back_Button_With_Javascript)，它不是防弹的，因为它是客户端的，我更喜欢服务器端的解决方案，但它可以完成工作！

**不过，我想听听任何服务器端选项。**

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-06T07:27:33.150

You are operating under the impression that the result of the browser's back button is related to HTTP caching, it is not.

The provision of the back button is at the discretion of the browser which is from a HTTP stack point of view the *application*. An application has no obligation to consider the caching requirements of any http request(s) that was used to render the contents of a window. Indeed many browsers are capable of displaying content delivered through other protocols than http.

Consider the most common scenario for using the back button. A user gets some search results from a web search engine (google, bing, ...), clicks on one of the results, quickly sees that the content is not what they were looking for and clicks the back button. In order to optomise the user's experience most browsers will hold on to many of the resources (even the window into which the page is rendered) of a page when navigation from the page occurs. The back button can then be implemented by reassembling those resources or even simply making the original window visible again.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-06T04:17:50.267

看起来不错..尝试使用它。

**在向用户发送任何 HTML之前**运行这些语句，即在任何`Response.Write`或之前`<%=foo()%>`

```
Response.Buffer = True
Response.CacheControl = "no-cache"
Response.AddHeader "Pragma", "no-cache"
Response.Expires = -1 
```

更正了拼写错误的单词响应。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-13T07:55:26.173

当您按下后退按钮时，某些浏览器总是会缓存。有一种方法可以捕捉资源管理器的事件后退按钮并做一些事情，尽管可能很可怕。您可以通过 AJAX 加载页面数据，并使用通过 javascript 生成的随机变量来防止缓存。如果您需要示例，请告诉我...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-12-21T12:38:35.013

防止在经典 ASP 上缓存特定页面。请尝试以下代码：

```
<% Response.CacheControl = "no-cache, no-store, must-revalidate" %> 
```

在部分下添加上面的代码。

# nosql - 如何浏览/查看存储在 Redis 中的值

> ID：12292351
> 
> 赞同：113
> 
> 时间：2012-09-06T02:54:55.597
> 
> 标签：nosql, redis

有什么好的浏览器/浏览器可以用来查看 Redis 吗？我是 Redis 新手，所以我的期望是是否有类似于 MongoVUE、Toad 或 SQLExplorer 的东西。

我从服务堆栈尝试了 Redis Admin UI，但在尝试 IIS 时遇到了 500 错误

* * *

## 回答 #1

> 赞同：82
> 
> 时间：2013-04-05T09:32:29.813

如果你已经在使用 node.js，[Redis Commander就很棒。](http://joeferner.github.io/redis-commander/)

使用 NPM 超级简单：

```
npm install -g redis-commander
redis-commander 
```

然后将浏览器指向控制台中的地址

* * *

## 回答 #2

> 赞同：75
> 
> 时间：2013-12-01T16:51:26.097

如果你更喜欢**开源桌面工具**，也可以看看[Redis 桌面管理器](http://rdm.dev/)。

它是一个跨平台的开源 Redis DB 管理工具（即 Admin GUI）

*免责声明*：我是这个应用程序的创建者和维护者。

[![redis 桌面管理器屏幕](../Images/f300cd774498ad5030371e2df7ac81a9.png)](https://rdm.dev/static/img/features/all.png?v=20202)

* * *

## 回答 #3

> 赞同：30
> 
> 时间：2012-09-07T10:21:56.463

也许你可以试试**[Redsmin](http://redsmin.com)**。

它提供：

*   跨平台，在浏览器中随处可用。
*   实时和历史**监控**和**警报**功能
*   通过直接（纯文本连接）、直接（TLS/SSL 连接）或代理访问防火墙后的本地实例的多**数据库管理。**
*   对匹配模式的多个键进行批量操作（删除、重命名、复制）
*   **值编辑器**
*   在线**配置**
*   可从浏览器控制台直接访问 JavaScript API 以进行轻量级数据处理

[![Redis JavaScript API](../Images/9dff838ddc58f5c5f7fb149bf31d6a05.png)](https://i.stack.imgur.com/181bU.gif)

*   **Lua 编辑器**

[![Redis LUA 编辑器](../Images/a89f51e18fbfccda95ef68252198d4bb.png)](https://i.stack.imgur.com/lMQeC.gif)

*   具有自动完成和**内联文档**的在线**终端**
***   实时**数据可视化****

 **![在此处输入图像描述](../Images/852c35db2601d40dd2deae4ec6bf115d.png) [![在此处输入图像描述](../Images/1fe4b68c2863a7734c805da3f1714a50.png)](https://www.youtube.com/watch?v=EcwToUTMpMs)

全面披露：我创立了 Redsmin。

![](../Images/e63f09d7561b709bc69ab8bd421e887a.png)

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2014-08-01T15:49:04.743

我刚刚发布了[rebrow](https://github.com/marians/rebrow/)，这是一个用 Python 编写的基于 Web 的 Redis 浏览器。功能集是有限的，但它是免费和开放的，因此您可以添加您需要的内容。

有一个 Docker 映像可以帮助您快速入门。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2017-11-14T23:21:22.380

我真的很喜欢[qredis](https://pypi.python.org/pypi/qredis/0.1.7)，它是一个 Python + Qt 图形界面，用于探索应该更受欢迎的 IMO 数据库。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2015-10-24T22:15:50.320

一定要看看[Redis React](https://github.com/ServiceStackApps/RedisReact)。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2014-08-24T22:05:19.420

如果你喜欢红宝石，那就是[`redis-browser`](http://github.com/monterail/redis-browser)宝石。

它基本上是一个 Sinatra 应用程序，因此可以安装到任何基于机架的应用程序中，例如 Ruby on Rails，或者它可以独立运行。

*免责声明：我是这个 gem 的维护者之一。***

# postgresql - 开发人员的 postgresql 选项 - wal_debug

> ID：12292352
> 
> 赞同：2
> 
> 时间：2012-09-06T02:55:01.773
> 
> 标签：postgresql

我想设置`wal_debug`我的`postgresql.conf`，这样我就可以看到预写日志（WAL）发生了什么。

我编译了 PostgreSQL `--enable-debug`：

```
./configure --prefix=/usr/local/pgsql --enable-nls --with-perl --with-libxml --with-pam --enable-debug 
```

并将其添加到`postgresql.conf`

```
wal_debug = on 
```

当我尝试启动 postgres 时，服务器抱怨：

```
$ pg_ctl start
server starting
FATAL:  unrecognized configuration parameter "wal_debug" 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T09:12:38.857

配置时，传入`-DWAL_DEBUG`to `CPPFLAGS`，`./configure`例如：

```
./configure CPPFLAGS='-DWAL_DEBUG' 
```

所做的一切`--enable-debug`（在 Pg 中）是告诉编译器在每个编译单元中发出一个附加部分，其中包含调试信息 - 函数参数、局部变量信息等。此信息允许在使用 进行调试时产生有用的回溯`gdb`，使其更容易执行通过程序等

其他调试和测试选项由预处理器定义控制，例如在源代码`WAL_DEBUG`中使用条件编译指令进行测试。`#ifdef WAL_DEBUG`其中一些具有配置标志，例如`--enable-cassert`，但对于大多数人来说，您只需要自己传递预处理器标志。

正如 dezso 所指出的，请参阅：

*   [http://www.postgresql.org/docs/current/static/install-procedure.html](http://www.postgresql.org/docs/current/static/install-procedure.html)
*   [http://www.postgresql.org/docs/current/static/runtime-config-developer.html](http://www.postgresql.org/docs/current/static/runtime-config-developer.html)

# hibernate - 如何在联合表中使用 Hibernate XML 映射实体

> ID：12292360
> 
> 赞同：0
> 
> 时间：2012-09-06T02:56:42.233
> 
> 标签：hibernate, hibernate-mapping

我是 Hibernate 的初学者，在将 3 个表与 2 个实体映射时发现了一个问题。

SQL 代码：

```
CREATE TABLE users (
  userid int unsigned auto_increment,
  username varchar(20) not null,
  password varchar(64) not null,
  primary key (userid)
);

CREATE TABLE roles (
  roleid int unsigned auto_increment,
  rolename varchar(10) not null,
  description varchar(255) not null
  primary key (roleid)
);

CREATE TABLE userroles (
  userid int unsigned not null,
  roleid int unsigned not null,
  primary key (userid,roleid),
  foreign key (userid) references users (userid),
  foreign key (roleid) references roles (roleid)
); 
```

当前映射 xml

用户.hbm.xml

```
<class name="com.model.User" table="users">
  <id name="userId" column="userid">
    <generator class="native"/>
  </id>
  <property name="userName" column="username"/>
  <property name="password" column="password"/>
</class> 
```

角色.hbm.xml

```
<class name="com.model.Role" table="roles">
  <id name="roleId" column="roleid">
    <generator class="native"/>
  </id>
  <property name="roleName" column="rolename"/>
  <property name="description" column="description"/>
</class> 
```

还请告知如何创建实体 java 文件。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T03:10:23.737

我假设您在映射第三个表时遇到问题。您需要为第三个表使用复合键。以下是一些您可能会发现有用的链接：- [http://docs.jboss.org/hibernate/annotations/3.5/reference/en/html_single/#d0e2177](http://docs.jboss.org/hibernate/annotations/3.5/reference/en/html_single/#d0e2177) http://www.theserverside.com/discussions/thread.tss? thread_id=22638

如果您在创建文件时仍然遇到问题，请随时在答案中添加评论，我会尽力帮助您。要创建 java 文件，只需使用 getter 和 setter 创建文件，然后使用 get 方法提取数据并使用 set 方法输入新数据。

# java - JVM 超出了使用 -Xmx 定义的最大内存

> ID：12292368
> 
> 赞同：18
> 
> 时间：2012-09-06T02:57:42.050
> 
> 标签：java, memory-management, memory-leaks

我们有一个从 Java 1.5.0.19 升级到 Java 1.6.0.21 的 Java webapp

```
/usr/java/jdk1.6.0_21/bin/java -server -Xms2000m -Xmx3000m -XX:MaxPermSize=256m -Djava.awt.headless=true -Dwg.environment=production -Djava.io.tmpdir=/var/cache/jetty -Dcom.sun.management.jmxremote -Dcom.sun.management.jmxremote.port=31377 -Dcom.sun.management.jmxremote.authenticate=true -Dcom.sun.management.jmxremote.ssl=false -XX:+HeapDumpOnOutOfMemoryError -XX:HeapDumpPath=/tmp/webapp -Dprogram.name=run.sh -Djava.endorsed.dirs=/opt/3p/jboss/lib/endorsed -classpath /opt/3p/jboss/bin/run.jar:/usr/java/jdk1.6.0_21/lib/tools.jar org.jboss.Main -c default 
```

正如你所看到的，它应该预先分配 2GB 的堆，并且最大为 3GB（为什么我们预先分配这么多是因为这个应用程序很古老而且设计不佳，所以有很多东西要加载）。升级到 1.6 后，我们最近看到的问题是内存有时会爆满。虽然内存使用可能是一个应用程序问题，但 JVM 超过了堆的 3GB 最大设置。使用顶部我看到：

```
 PID USER      PR  NI  VIRT  RES  SHR S %CPU %MEM    TIME+  COMMAND    
8449 apache    18   0 19.6g 6.9g 5648 S  4.0 84.8  80:42.27 java 
```

那么具有 3GB 堆、256MB permgen 甚至一些开销的 JVM 怎么会消耗 6.9GB 呢？JVM 中的错误将通过升级到 build #35 来修复？java中缺少的东西可能会使用额外的内存？只是想看看有没有人以前见过这个。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-06T03:11:39.090

> 那么具有 3GB 堆、256MB permgen 甚至一些开销的 JVM 怎么会消耗 6.9GB 呢？

可能的解释包括：

*   很多很多的线程堆栈，
*   应该关闭时没有关闭的内存映射文件，
*   一些使用（可能泄漏）堆外内存的本机代码库。

在责怪 JVM 之前，我倾向于责怪应用程序。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-11-08T21:29:46.027

长话短说，我最初的反应是正确的，这是 JVM 中的一个错误。[我们使用的是 1.6.0_21，结果发现我们遇到了与https://confluence.atlassian.com/pages/viewpage.action?pageId=219023686](https://confluence.atlassian.com/pages/viewpage.action?pageId=219023686)中概述的完全相同的错误。升级到 1.6.0_37 解决了这个问题，我们从每天崩溃到 2 周没有崩溃。

因此，虽然不只是责备 JVM 是一个好政策，但似乎也应该建议人们不要总是假设 JVM 没有错误，就像所有软件都有偶尔的错误一样。另外，保持最新状态似乎是个好政策。

感谢您对此的所有帮助！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-06T03:03:43.923

[http://docs.oracle.com/cd/E13150_01/jrockit_jvm/jrockit/geninfo/diagnos/garbage_collect.html](http://docs.oracle.com/cd/E13150_01/jrockit_jvm/jrockit/geninfo/diagnos/garbage_collect.html)

> 请注意，JVM 使用的内存不仅仅是堆。例如，Java 方法、线程堆栈和本机句柄被分配在与堆分开的内存中，以及 JVM 内部数据结构中。

所以如果你有很多线程和很多本机句柄，内存可能会超过堆限制。你确定这也没有发生过吗？

另请查看：[Java 使用的内存比分配的内存多](https://stackoverflow.com/questions/6527131/java-using-more-memory-than-the-allocated-memory)

# android - 从 android 中的程序启用默认 TTS 引擎

> ID：12292369
> 
> 赞同：0
> 
> 时间：2012-09-06T02:57:53.533
> 
> 标签：android

是否可以检查 Android 中是否启用了默认的文本转语音引擎？如果没有，我可以通过我的 Android 程序启用它吗？如果是这样，怎么做？

```
Intent checkIntent = new Intent();
checkIntent.setAction(TextToSpeech.Engine.ACTION_CHECK_TTS_DATA);
startActivityForResult(checkIntent, MY_DATA_CHECK_CODE); 
```

上面的代码显示了不同的 TTS 可用并显示为一个对话框，然后我选择所需的 TTS 并单击 OK。一旦我这样做了 - 系统（平板电脑或手机）会自动选择所选的 TTS 并启用它。

我可以通过将它放在自定义布局中来做同样的事情（列出安装的 TTS）吗？我可以选择所需的内容并通过单击启用按钮或其他方式启用它吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T03:59:35.480

您可以在 ICS 中列出可用的 TTS 引擎，并且可以在 Froyo 及更高版本上按包名称和语言测试可用性。TTS 引擎由系统控制，因此您无法从您的应用中禁用/启用它们。您只能提示用户这样做。

回复：编辑的问题。这是一个完全不同的故事。此意图检查是否安装了 TTS 数据，如果您有多个引擎，则必须选择一个来处理该意图。这只是 Android 分发意图的方式，与 TTS 无关。如果您通过调用`Intent.setPackage("my.tts.package")`对话框使意图明确，则不会显示。请注意，这不会检查是否启用了 TTS 引擎。我还没有检查，但我怀疑如果 TTS 引擎在设置中被禁用，这将启用它。

# java - 使用 Jsoup 在 html 标记之后获取文本并创建 ArrayList

> ID：12292378
> 
> 赞同：2
> 
> 时间：2012-09-06T02:58:55.877
> 
> 标签：java, jsoup

我正在尝试使用 Jsoup 将 HTML 文档中的文本放入 ArrayList 中。我的文档看起来像这样。

```
<p>
   <b>1</b>First Text
   <b>2</b>Second Text
   <b>3</b>Third Text
   .
   .
   .
   .
</p> 
```

从上面的文档中，我想创建如下所示的数组。

```
list{[First Text],[Second Text],[Third Text]} 
```

感谢你的帮助。

尝试使用以下代码，但仅获取数字。

```
Document doc1 = Jsoup.parse(chapter);
Element vve = doc1.body();
Elements vvv = doc1.select("p").select("b"); 
```

我的结果是

```
vvv.get(0) = <b>1</b>
vvv.get(1) = <b>2</b>
.
.
. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T13:15:25.020

这是我昨晚完成的完整代码。

```
 Elements elements = doc.body().select("p").select("b");
        for(int i=0; i<elements.size(); i++){
            Element para = elements.get(i);
            versesList.add(para.nextSibling().toString());
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T03:31:10.090

这将有助于

```
Elements elements = doc.body().select("p");

for(int j=0;j<elements.size();j++){
     Element para = tblelements.get(j);
     String value = para.select("b").get(i).text();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T10:47:57.597

让我们试试这个：

```
final String html = "<p> ... "; // your HTML here

Document doc = Jsoup.parse(html);
List<String> list = new ArrayList<>();

for( Element element : doc.select("b") )
{
    list.add(element.nextSibling().toString());
} 
```

**注意：**您也可以使用`List<Node>`，然后您只需删除`toString()`呼叫。

# iphone - 如何在iOS中显示大按钮而不单击按钮（单击该按钮周围的区域）

> ID：12292386
> 
> 赞同：0
> 
> 时间：2012-09-06T02:59:46.560
> 
> 标签：iphone, ios, uibutton, uitapgesturerecognizer

我为键盘做了很多按钮。当我单击一个按钮时，它显示为大按钮。如果不点击按钮，它可以显示为大按钮吗？（如 iPhone）你能给出一些示例代码吗？

就像你在这张图片中看到的（默认的），我只是点击附近/周围按钮，而不是直接点击按钮，但它在文本字段中显示字母！如何设置按钮周围区域的条件？

![不点击按钮](../Images/7a31657ea184ad2c3596b9d1c039ef61.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T03:03:43.517

您是指在突出显示的按钮（如键盘）上方显示按钮的较大图像吗？

如果是这样，我会考虑为 UIControlStateTouchDown 设置一个操作，以查看您的按钮何时突出显示，并最终在按下的按钮上方添加更大的按钮图像。然后，为 UIControlStateTouchUpInside、UIControlStateTouchUpOutside 和 UIControlStateTouchCancel 添加一个操作，以删除较大的按钮图像。

要跟踪较大的按钮图像，您可以使用属性并跟踪它。我建议将 UIButton 子类化，我假设您将其用于您的按钮，并为其较大的按钮图像添加一个属性，以便较大的按钮图像与其上方的按钮相关联。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T03:40:25.647

您的帖子不是很清楚，但我相信您正在尝试复制`UIKeyboard`.

如果是这种情况，那么这里有几个简单的步骤可以实现这一点。

将自定义操作添加到控件状态“内部触摸”和“触摸向下”的按钮。我可能会这样做，`viewDidAppear`这样你就不会阻塞运行循环，直到一切都完成移动到位。也许稍微延迟执行此操作甚至可能是有益的。如下所示在循环中执行此操作将允许您自动将这些操作添加到主视图的子视图数组中“UIButton”类的每个对象。

```
 for (UIButton *button in self.view.subviews) {
    if ([button isKindOfClass:[UIButton class]]) {
        [button addTarget:self action:@selector(anyButtonDown:) forControlEvents:UIControlEventTouchDown];
        [button addTarget:self action:@selector(anyButtonUp:) forControlEvents:UIControlEventTouchUpInside];
    }
} 
```

我们将使用 touch down 方法来缩放按钮，并在内部进行 touch up 以将按钮返回到其原始状态，然后将按钮文本值附加到文本字段的末尾。

为了这个例子，我使用了`UILabel`.

请注意，我们将这些方法`UIButton`用作参数，以便可以转换调用此操作的任何按钮的转换，而无需为每个按钮创建操作。

```
- (void)anyButtonDown:(UIButton *)sender
{
    [self.view bringSubviewToFront:sender];
    [UIView animateWithDuration:0.1 animations:^{
        [sender setTransform:CGAffineTransformConcat(CGAffineTransformMakeScale(1.3, 1.3), CGAffineTransformMakeTranslation(0, -25))];
    }];
} 
```

在这里，我们将“发送者”的变换调整回释放按钮时的原始变换。此动画是使用完成处理程序创建的，当按钮完成动画返回其原始状态时，允许为该按钮指定的文本附加到当前位于标签中的文本的末尾。

**注意：**为此，我假设您已经输入了按钮代表的字母作为按钮的`textLabel`.

```
- (void)anyButtonUp:(UIButton *)sender
{
    [UIView animateWithDuration:0.1 animations:^{
        [sender setTransform:CGAffineTransformConcat(CGAffineTransformMakeScale(1.0, 1.0), CGAffineTransformMakeTranslation(0, 0))];
    }completion:^(BOOL done){
        [textLabel setText:[textLabel.text stringByAppendingString:sender.titleLabel.text]];
    }];
} 
```

# java - 将 Key 转换为 String 并转换回 Key Java

> ID：12292389
> 
> 赞同：7
> 
> 时间：2012-09-06T03:00:11.313
> 
> 标签：java, key, des

所以我正在尝试将 Key 转换为字符串，以便可以使用 System.out 显示它，然后我想将其转换回 Key。我可以使用 BASE64Encoder 将其转换为字符串，但在将其转换回来时遇到问题。这是我的源代码：

```
 public class Encryption extends Applet {
    Key keyOrig;
    BASE64Decoder decoder = new BASE64Decoder();
    BASE64Encoder encoder = new BASE64Encoder();

    public void init() {
        try {
            keyOrig = generateKey();

            String keyString = encoder.encode(keyOrig.getEncoded());
            System.out.println("Key: "+keyString);

            Key key = new SecretKeySpec(keyString.getBytes(),0,keyString.getBytes().length, "DES");     

            String message = "This is hacker proof!";
            System.out.println("Message is: "+message);

            String encryptedMessage = encrypt(message,key);
            System.out.println("Message encrypted: "+ encryptedMessage);

            String decryptedMessage = decrypt(encryptedMessage,key);
            System.out.println("Message decrypted: "+ decryptedMessage);

        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    public Key generateKey() throws NoSuchAlgorithmException {
        KeyGenerator generator;
        generator = KeyGenerator.getInstance("DES");
        generator.init(new SecureRandom());
        return keyOrig = generator.generateKey();
    }

    @SuppressWarnings("unused")
    public String encrypt(String message, Key key)
            throws IllegalBlockSizeException, BadPaddingException,
            NoSuchAlgorithmException, NoSuchPaddingException,
            InvalidKeyException, UnsupportedEncodingException {
        // Get a cipher object.
        Cipher cipher = Cipher.getInstance("DES/ECB/PKCS5Padding");
        cipher.init(Cipher.ENCRYPT_MODE, key);

        // Gets the raw bytes to encrypt, UTF8 is needed for
        // having a standard character set
        byte[] stringBytes = message.getBytes("UTF8");

        // encrypt using the cypher
        byte[] raw = cipher.doFinal(stringBytes);

        // converts to base64 for easier display.
        @SuppressWarnings("restriction")
        BASE64Encoder encoder = new BASE64Encoder();
        String base64 = encoder.encode(raw);

        return base64;
    }

    public String decrypt(String encrypted, Key key) throws InvalidKeyException,
            NoSuchAlgorithmException, NoSuchPaddingException,
            IllegalBlockSizeException, BadPaddingException, IOException {

        // Get a cipher object.
        Cipher cipher = Cipher.getInstance("DES/ECB/PKCS5Padding");
        cipher.init(Cipher.DECRYPT_MODE, key);

        // decode the BASE64 coded message
        BASE64Decoder decoder = new BASE64Decoder();
        byte[] raw = decoder.decodeBuffer(encrypted);

        // decode the message
        byte[] stringBytes = cipher.doFinal(raw);

        // converts the decoded message to a String
        String clear = new String(stringBytes, "UTF8");
        return clear;
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-06T03:05:44.733

你永远不会使用你`BASE64Decoder`的 un-base-64 你的字符串。

替换这个：

```
 Key key = new SecretKeySpec(keyString.getBytes(),0,keyString.getBytes().length, "DES"); 
```

和

```
 byte[] encodedKey = decoder.decodeBuffer(keyString);
        Key key = new SecretKeySpec(encodedKey,0,encodedKey.length, "DES"); 
```

# php - php返回多个数组

> ID：12292390
> 
> 赞同：1
> 
> 时间：2012-09-06T03:00:18.493
> 
> 标签：php

我想返回多个数组，然后将它们分开。

```
function cal(){
    $st1=array('1','2'); 
    $st2=array('1','2');
    return $st1."-".$st2;
} 
```

称它为

```
$mainstring=explode("-",cal())
print_r($mainstring[0]);
print_r($mainstring[1]); 
```

我想得到 $st1 和 $st2 的原始数组。

请帮忙。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-06T03:01:35.093

只需将您的功能更改`cal()`为

```
function cal(){
    $st1=array('1','2'); 
    $st2=array('1','2');
    return array($st1,$st2);
} 
```

然后做

```
$mainstring=cal();
print_r($mainstring[0]);
print_r($mainstring[1]); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2020-11-21T23:16:39.957

如果您想保留数组名称，可以使用[list()](https://www.php.net/manual/en/function.list.php)；

```
function cal(){
    $st1=array('1','2'); 
    $st2=array('1','2');
    return array($st1,$st2);
}

list($st1,$st2)=cal();
print_r($st1);
print_r($st2); 
```

# iphone - 在表格视图单元格的左侧添加活动指示器

> ID：12292391
> 
> 赞同：1
> 
> 时间：2012-09-06T03:00:29.743
> 
> 标签：iphone, objective-c, ios4, uiactivityindicatorview

我目前有一个可以向右平移以刷新内容的表格单元格，但我想在空白区域的左侧添加一个活动指示器。我的单元格是自定义的，但我认为您不能在 customcell.m 中添加指示器，因为它只允许您将子视图放置在单元格的边界中。不要介意单元格中的文本。 ![在此处输入图像描述](../Images/bf8754b3e875ffea33417381fc3000d0.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T03:09:06.210

如果单元格的内容视图将“clipsToBounds”属性设置为 false，则您只需将活动指示器添加到单元格内容视图的边界之外。也许在 -50 的 x 值中，或者类似的东西。

# php - 忽略图片上传错误

> ID：12292394
> 
> 赞同：0
> 
> 时间：2012-09-06T03:01:08.430
> 
> 标签：php

我的编码有问题，上传工作正常，如果我没有上传任何图片，它会回显错误，如果我只上传一张图片，它不会显示任何错误消息，现在我想做它如果没有要上传的内容，它不会回显错误消息，但我想保留错误消息，以防万一出现问题，我知道有问题。谢谢！

```
// Upload begins!!

if ($_FILES['ufile']['name'][0] != "")
    {
    $target_path =  "."."/uploads/".$petname."/".$_FILES['ufile']['name'][0];

    copy($_FILES['ufile']['tmp_name'][0], $target_path);
    $filesize1=$_FILES['ufile']['size'][0];
    }

    if ($_FILES['ufile']['name'][1] != "")
    {
    $target_path1 =  "."."/uploads/".$petname."/".$_FILES['ufile']['name'][1];

    copy($_FILES['ufile']['tmp_name'][1], $target_path1);
    $filesize2=$_FILES['ufile']['size'][1];
    }

    if ($_FILES['ufile']['name'][2] != "")
    {
    $target_path2 =  "."."/uploads/".$petname."/".$_FILES['ufile']['name'][2];

    copy($_FILES['ufile']['tmp_name'][2], $target_path2);
    $filesize3=$_FILES['ufile']['size'][2];
    }

// Check for error!!
    if($filesize1 || $filesize2 || $filesize3 != 0) 
    {
    }

// If got error, show message 
    else 
    {
    echo "<div class='error'>ERROR : There seems to be problem uploading the pictures.</div>";
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T04:06:16.807

我自己设法解决了，下面是我的解决方案：-

```
if ($_FILES['ufile']['name'][0] != "")
{
$target_path =  "."."/uploads/".$petname."/".$_FILES['ufile']['name'][0];

if (!copy($_FILES['ufile']['tmp_name'][0], $target_path))
{
    $a = 1; 
}

}

else
{
    $a = 0;
}

if ($_FILES['ufile']['name'][1] != "")
{
$target_path1 =  "."."/uploads/".$petname."/".$_FILES['ufile']['name'][1];

if (!copy($_FILES['ufile']['tmp_name'][1], $target_path1))
{
    $b = 1;
}

}

else
{
    $b = 0;
}

if ($_FILES['ufile']['name'][2] != "")
{
$target_path2 =  "."."/uploads/".$petname."/".$_FILES['ufile']['name'][2];

if (!copy($_FILES['ufile']['tmp_name'][2], $target_path2))
{
    $c = 1;
}

}

else
{
    $c = 0;
}

if ($a || $b || $c == 1)
{
    echo "Error! There is problem uploading the pictures.";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T03:24:03.787

你可以试试这个

```
$upload_errors = array( 
    "No errors.",
    "Larger than upload_max_filesize.", 
    "Larger than form MAX_FILE_SIZE.", 
    "Partial upload.", 
    "No file.", 
    "Nothing because 5 doesn't exist",
    "No temporary directory.", 
    "Can't write to disk.", 
    "File upload stopped by extension.", 
);

if($_FILES['ufile']['error']==0) { // 0=No errors
    // process
}
else 
{
    if($_FILES['ufile']['error']!=4) { // 4=Not uploaded
        // Error occured other than error code 4(you don't want to show this)
        echo $upload_errors[$_FILES['ufile']['error']].' !<br />';
    }
} 
```

**参考：** [**PHP 手册**](http://php.net/manual/en/features.file-upload.errors.php)。

# maven-2 - 如何在 cloudbees 中创建单独的快照存储库

> ID：12292395
> 
> 赞同：1
> 
> 时间：2012-09-06T03:01:11.680
> 
> 标签：maven-2, jenkins, cloudbees

我们有一个 CloudBees 项目，其中包含多个“工作”。其中一些工作对应于独立更新的独立 Google 项目。

我们的问题是所有更新都转到同一个快照存储库，所以当两个开发人员 A 和 B 在同一个项目上工作并且 A 正在推送他的更改时，B 得到的是最新版本，而不是他想要的本地版本。

理想情况下，我们希望每个 Google 项目都有一个快照存储库，这样它们就不会相互重叠。

如何在同一个 CloudBees 项目中创建不同的快照存储库并将它们关联到不同的项目？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T09:37:16.670

如果您真的想为不同的项目使用不同的快照存储库，那么您将需要为每个作业使用“私有本地存储库”功能，以确保作业从它们自己的快照存储库中提取依赖项。

此外，您需要为每个作业提供单独的 settings.xml，否则它们无论如何都会从同一个远程存储库中提取依赖项。

然后，您需要使用 Forge Repositories 屏幕在 CloudBees 服务中创建一个单独的 Maven WebDAV 存储库。请注意，如果您处于免费层，您可能会受到 Maven WebDAV 存储库数量的限制……您可能会作弊！通过告诉 settings.xml 存储库路径实际上是路径的子路径，例如[https://user1650693.forge.cloudbees.com/repositories/snapshot/project1](https://user1650693.forge.cloudbees.com/repositories/snapshot/project1)和[https://user1650693.forge.cloudbees.com /repositories/snapshot/project2](https://user1650693.forge.cloudbees.com/repositories/snapshot/project2)而不是[https://user1650693.forge.cloudbees.com/repositories/snapshot](https://user1650693.forge.cloudbees.com/repositories/snapshot)

这基本上意味着 project1 和 project2 将看到完全独立的远程存储库。

所有这一切都代表你做了大量的工作......并且管理起来很痛苦......当你在 Maven 中做很多工作时，*大声尖叫*你做错了！

也许你需要停下来想想你在哪里调用了 Maven 反模式并远离那个反模式。

我经常看到的一种反模式是`verify`在您不了解自己在做什么的阶段运行构建。

一般来说，我建议 CI 系统永远不要`deploy`为非发布版本运行，因为它会压垮开发人员...... [解决方法是运行`deploy`，但运行到仅由 CI 系统使用的单独的 -SNAPSHOT 存储库]

这就是为什么我也倾向于只`verify`在 CI 系统上进行，就好像`install`你需要每个工作都有自己的私有 maven 存储库一样......尽管有时你需要走那么远才能将工作零碎地分解.

经验法则是，开发人员的机器应该具有开发人员构建的依赖项，而不是在 Maven 的刷新时随机获取更新 - SNAPSHOT 每次*您在`settings.xml`间隔中配置的任何内容*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T12:22:26.533

从 Maven 的角度来看，在您的场景中，如果 B 不想获得“最后一个稳定版本”，则不应依赖 A SNAPSHOT。

您还可以使用“私有本地存储库”高级选项“隔离您的詹金斯作业 maven local-repository”，这样 B 只会看到 B 的最后一个公开部署的版本，而不是最后一个构建的版本

# jsf - 如何在 JSF 组件属性中使用 EL 条件运算符？

> ID：12292397
> 
> 赞同：3
> 
> 时间：2012-09-06T03:01:27.603
> 
> 标签：jsf, el, conditional-operator

我需要`<p:panelGrid>`根据支持 bean 属性动态选择 a 的宽度。但是它对我不起作用。我感觉我的代码中有一些语法错误。

```
<p:panelGrid style="width:#{myBean.fromCCRM} ?70%:90%">
    ...
</p:panelGrid> 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-06T05:20:02.870

整个语句需要进去`#{...}`。

```
style="width:#{myBean.fromCCRM ? '70%' : '90%'}" 
```

# java - 如何创建 MockNdefMessages

> ID：12292403
> 
> 赞同：0
> 
> 时间：2012-09-06T03:02:13.410
> 
> 标签：java, android, nfc

我正在使用 FakeTagsActivity

> FakeTagsActivity — 一种启动标签的活动，就像它们已被扫描一样。如果您无法访问启用 NFC 的设备或标签，这将非常有用。

它定义了一些假数据：

```
 /**
     * A plain text tag in english.
     */
    public static final byte[] ENGLISH_PLAIN_TEXT =
        new byte[] {(byte) 0xd1, (byte) 0x01, (byte) 0x1c, (byte) 0x54, (byte) 0x02, (byte) 0x65,
            (byte) 0x6e, (byte) 0x53, (byte) 0x6f, (byte) 0x6d, (byte) 0x65, (byte) 0x20,
            (byte) 0x72, (byte) 0x61, (byte) 0x6e, (byte) 0x64, (byte) 0x6f, (byte) 0x6d,
            (byte) 0x20, (byte) 0x65, (byte) 0x6e, (byte) 0x67, (byte) 0x6c, (byte) 0x69,
            (byte) 0x73, (byte) 0x68, (byte) 0x20, (byte) 0x74, (byte) 0x65, (byte) 0x78,
            (byte) 0x74, (byte) 0x2e}; 
```

我怎样才能像这样制作自己的数据？

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T11:56:21.237

数据是所谓的 NDEF 消息，包含一个或多个 NDEF 记录。您可以使用类[`NdefMessage`](http://developer.android.com/reference/android/nfc/NdefMessage.html)和[`NdefRecord`](http://developer.android.com/reference/android/nfc/NdefRecord.html). 一条记录有一个类型和一个有效负载（数据），有时还有一个 ID。

您显示的示例是带有文本记录的 NDEF 消息。可以从[NFC 论坛网站](http://www.nfc-forum.org/specs/spec_list/)获得此类记录（和其他记录）的确切详细信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T08:27:26.587

我创建了一个[NDEF 编辑器](http://code.google.com/p/nfc-eclipse-plugin/)作为 Eclipse 插件，它可以让您以文件的形式定义大量“假”数据。

从 res/raw 目录加载文件很容易。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T03:33:26.677

看起来像

```
new byte[] {(byte) 0xd1, (byte) 0x01, (byte) 0x1c, (byte) 0x54, (byte) 0x02, (byte) 0x65,
        (byte) 0x6e, 
```

是 NFC 标签标题（“�Ten”），其余的是实际文本（“一些随机英文文本。”）

**编辑**-请注意，其中一些数字不会转换为可见字符（0x01 和 0x02）-这就是为什么有 6 个数字序列且只有 4 个字符的原因。这也是为什么他们必须像他们正在做的那样构建 byte[]（而不仅仅是使用字符串）——简单地将“�Ten”复制到字符串中不会是一回事——所以不要尝试:-)

这些字节是 ASCII 字符的十六进制代码——我可以用 PHP 解码它们——

```
php -r "print chr(0xd1).chr(0x01).chr(0x1c).chr(0x54) . chr(0x02) . chr(0x65).chr(0x6e).chr(0x53).chr(0x6f).chr(0x6d).chr(0x65).chr(0x20).chr(0x72).chr(0x61).chr(0x6e).chr(0x64).chr(0x6f).chr(0x6d).chr(0x20).chr(0x65).chr(0x6e).chr(0x67).chr(0x6c).chr(0x69).chr(0x73).chr(0x68).chr(0x20).chr(0x74).chr(0x65).chr(0x78).chr(0x74).chr(0x2e);" 
```

> �TenSome 随机英文文本。

ASCII 表 - [http://www.asciitable.com/](http://www.asciitable.com/)

如果您想制作其他标签，则必须查找要发送的标签类型的规范 - Google 可以帮助您

**编辑**- 根据您的评论进行转换的 PHP 代码（我只是不想查找 java 函数，即使我这样做了，您也必须编写一堆代码才能运行/查看输出 - PHP像这样的东西要快得多）

```
$text = 'Some random english text.';
for ($i = 0; $i < strlen($text); $i++) {
   print " (byte) 0x" . dechex(ord(substr($text,$i,1))) .',';
} 
```

# javascript - 如何加载 BackboneJS

> ID：12292405
> 
> 赞同：0
> 
> 时间：2012-09-06T03:02:32.553
> 
> 标签：javascript, backbone.js

我有一个非常简单的问题。如何在不使用 requireJS 的情况下加载 BackboneJS 并在模块中使用它？

我只使用 1 个模块，所以所有 Backbone 视图、模型和集合都将在该文件中。

索引.html

```
<!-- libraries 10k zipped-->
<script src='js/libs/underscore-min.js'></script>
<script src='js/libs/backbone-min.js'></script>

<!-- modules -->
<script src='js/game.js'></script> 
```

游戏.js

```
window.onload = (function(Backbone){

    var Input = Backbone.View.extend({  
            events: {
                'mousedown' : 'handleMouseDown',
                'mouseup'   : 'handleMouseUp',
            },

            handleMouseDown: function(){
                console.log('mousedown');
            },

            handleMouseUp: function(){
                console.log('mouseup');
            }
    }), 

    input = new Input;
    return input;
})(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T03:16:09.967

我认为您只需要进行一些小的调整。

首先，在和`jquery.js`之前拉入。`underscore-min.js``backbone-min.js`

然后，您可以使用`$(function() { ... })`而不是显式地将某些内容分配给`window.onload`：

```
$(function() {
    var Input = Backbone.View.extend({...
    //...
}); 
```

你`window.onload`有两个问题：

1.  您将其用作函数的参数，但在调用函数时`Backbone`没有提供值。`Backbone`
2.  您正在调用该函数并将其返回值分配给`window.onload`. `window.onload`应该是一个函数，而不是一个`new Input`.

如果你真的想使用，`window.onload`那么你会这样做：

```
window.onload = function() {
    var Input = Backbone.View.extend({  
    /* ... */
}; 
```

你`<script src='js/libs/backbone-min.js'></script>`会给你一个全局的`Backbone`，所以你不必`function(Backbone) { ... }`像使用 Require.js 那样做。

此外，如果您对脚本顺序很小心，您甚至不需要将您的`Input`内部包装在一个函数中，只需保留以下内容：

```
var Input = Backbone.View.extend({  
    events: {
        'mousedown' : 'handleMouseDown',
        'mouseup'   : 'handleMouseUp',
    },
    handleMouseDown: function(){
        console.log('mousedown');
    },
    handleMouseUp: function(){
        console.log('mouseup');
    }
});
var input = new Input; 
```

在你的`js/game.js`，你应该没问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T03:11:01.493

您需要将 Backbone 作为参数传递，因为您在 in 参数中使用它：

```
window.onload = (function(Backbone){

    var Input = Backbone.View.extend({  
            events: {
                'mousedown' : 'handleMouseDown',
                'mouseup'   : 'handleMouseUp',
            },

            handleMouseDown: function(){
                console.log('mousedown');
            },

            handleMouseUp: function(){
                console.log('mouseup');
            }
    }), 

    input = new Input;
    return input;
})(Backbone); 
```

# vb.net - 连接完成后如何保持位置？

> ID：12292406
> 
> 赞同：1
> 
> 时间：2012-09-06T03:02:34.237
> 
> 标签：vb.net, richtextbox

我所拥有的是一个常见解决方案的菜单。我希望能够在我编辑时单击菜单项并让它将该文本添加到富文本框中。

```
RichTextBox1.Text = RichTextBox1.Text + ToolStripMenuItem2.Text 
```

这是将文本添加到 RichTextBox1 的诀窍，只有一个缺点。它将光标返回到起始位置。如果可能的话，我怎样才能避免这种情况发生？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T03:24:31.090

您需要将[SelectionStart](http://msdn.microsoft.com/en-us/library/system.windows.forms.textboxbase.selectionstart%28v=vs.100%29.aspx)设置为 RichTextBox 中文本的长度。

IE

```
RichTextBox1.Text = RichTextBox1.Text + ToolStripMenuItem2.Text    
RichTextBox1.Focus()
RichTextBox1.SelectionStart = RichTextBox1.TextLength 
```

从上面的链接：

> 您可以通过将 SelectionStart 设置为文本框中您希望插入符号移动到的位置并将 SelectionLength 属性设置为零 (0) 值，以编程方式在文本框中移动插入符号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T03:24:59.363

```
RichTextBox1.SelectionStart = RichTextBox1.TextLength
RichTextBox1.ScrollToCaret() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T03:36:33.390

试试这个

```
RichTextBox1.SelectionStart = RichTextBox1.Text.Length
RichTextBox1.Focus() 
```

# windows - 如何为 NTFS 或 ext2 执行序列化磁盘读取？

> ID：12292412
> 
> 赞同：0
> 
> 时间：2012-09-06T03:03:13.970
> 
> 标签：windows, linux, performance, io, filesystems

背景是通过程序将大量文件复制到另一个磁盘中，所以基本思想是使用序列化IO而不是随机IO，这意味着我应该根据它们的扇区位置对文件进行排序，那么，我该如何排序呢？

# jquery - jQuery slideDown/Up 和响应式设计

> ID：12292413
> 
> 赞同：1
> 
> 时间：2012-09-06T03:03:28.870
> 
> 标签：jquery, html, responsive-design

我有一个响应式调整大小的菜单，因此`#menuWFhover`每次调整大小都会重新排列 div ( ) 的内容，因此 div 的高度取决于窗口大小。

当我使用 jQuery`slideDown/Up`时，它第一次工作正常，但在调整大小后 div 保持上一个动画的高度。这是因为 slideDown 播放动画的高度吗？这是我正在使用的简化版本。如果我替换/添加一个`(windows)resize`（这是我的猜测，它与它有关）动画不会发生，但我可能做错了。

```
$(document).ready(function(){
        var WFover = function () {
            $('#menuWFhover').stop().slideDown(300);
        };
        var WFout = function () {
            $('#menuWFhover').stop().slideUp(300);
        };

        $('#menuNewBox').mouseover(WFover);
        $('#menuWFhover').mouseover(WFover);
        $('#menuNewBox').mouseout(WFout);
        $('#menuWFhover').mouseout(WFout);
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-06T04:16:48.040

正如[ComputerArts 提到](https://stackoverflow.com/questions/12292413/jquery-slidedown-up-and-responsive-designs/12292909#comment16490656_12292413)的，问题在于 jQuery 在完成动画后明确设置了 div 的高度。然后，即使您在 CSS 中调整了 div 的大小，它也会重用这个显式高度。

当然，如今，您可能应该将 CSS 动画用于此类事情。
（见[http://addyosmani.com/blog/css3transitions-jquery/](http://addyosmani.com/blog/css3transitions-jquery/)）

如果您需要 jQuery 解决方案，您可以在动画完成后强制高度未定义，以便 jQuery 获取当前 CSS 高度。虽然，这会稍微改变行为：

**演示：http:** [//jsfiddle.net/brianpeiris/8zc5g/show](http://jsfiddle.net/brianpeiris/8zc5g/show)

```
$(document).ready(function(){
        var WFover = function () {
            $('#menuWFhover').stop().slideDown(600), function () {
                $('#menuWFhover').height(''); 
            });
        };
        var WFout = function () {
            $('#menuWFhover').stop().slideUp(600), function () {
                $('#menuWFhover').height(''); 
            });
        };

        $('#menuNewBox').mouseover(WFover);
        $('#menuWFhover').mouseover(WFover);
        $('#menuNewBox').mouseout(WFout);
        $('#menuWFhover').mouseout(WFout);

    $(window).resize(function () {
        $.removeData($('#menuWFhover')[0], 'fxshow', true);
    });
}); 
```

# c++ - 将 getline() 数字字符串转换为数组或整数

> ID：12292422
> 
> 赞同：2
> 
> 时间：2012-09-06T03:04:58.670
> 
> 标签：c++

我有一个文本文件写成：

```
1 2 3
7 8 9
13 14 15

```

目标是使每一列成为一个整数数组，例如`x=[1,7,13]`, `y=[2,8,14]`, `z=[3,9,15]`.

这是我到目前为止...

我打开文本文件并将内容作为字符串读入：

```
string fileText;
int n;
int result[];
    //file open
        ifstream input ("input.txt");

    //file read
        if(input.is_open())
        {

            for(int i=0; i<n; i++) //n=3 in this case
            {
                 getline(input, fileText);
                 result = strtok(fileText," "); // parse each line by blank space " ".
                  //i get various errors here depending on what I try: such as "must be lvalue" 
                  //or a problem converting string to char.

                 x[i] = result[0];
                 y[i] = result[1];
                 z[i] = result[2];
            }

 } 
```

所以我的问题是将一行文本作为由空格分隔的数字转换为整数数组。

这在 PHP 等高级语言中非常简单，但在 C++ 中，数据类型和内存分配等变得更加复杂。另外，我是新手！

谢谢

~

如果没有向量，我将如何做到这一点？

如果说我有： int x*, y*, z*;

然后为每个变量指针分配内存：

```
 x = (int*) malloc (n*sizeof(int)); // where n is the number of lines in the text doc.
    y = (int*) malloc (n*sizeof(int));
    z = (int*) malloc (n*sizeof(int)); 
```

现在我想将每一列放入每个 x,y,z 整数数组中。

我可以做类似的事情：

...

```
std::string line;
int i;
for (int k=0; k<n; k++) 
{
        while (std::getline (input, line))
        {
        std::stringstream parse(line);

        parse >> i;
        x[k] = i;
        parse >> i;
        y[k] = i;
        parse >> i;
        z[k] = i;

        }

    } 
```

现在 x = [1,7,13] 等等。

有没有办法在不使用 push_back() 方法的情况下做到这一点？我只想将整数读入每个数组。

使用 getNextInt() 什么的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T03:18:41.263

如果您的文件如此简单，您只需执行以下操作：

```
 std::vector<std::vector<int>> v;
 ifstream input("input.txt");
 for(int x, y, z; input >> x >> y >> z;)
     v.push_back(std::vector<int>{x, y, z}); 
```

或与`std::tuple`：

```
 std::vector<std::tuple<int, int, int>> v;
 ifstream input("input.txt");
 for(int x, y, z; input >> x >> y >> z;)
     v.emplace_back(x, y, z); 
```

这根本不需要转换，并且一旦流失败就会失败。两者都需要 C++11 支持，所以如果您需要 C++03 解决方案，请告诉我。

如果您想坚持使用普通的旧数组：

```
 ifstream input("input.txt");
 for(int i = 0; input >> x[i] >> y[i] >> z[i]; ++i)
     ; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-06T03:22:45.877

使用从 getline 返回的字符串创建一个字符串流可能是最“C++”的方式来做你想做的事情。

```
std::vector<int> x, y, z;
ifstream input ("input.txt");
if(input.is_open())
{
    std::string line;
    int i;
    while (std::getline (input, line))
    {
        std::stringstream parse(line);
        // assuming 3 just like you had
        parse >> i;
        x.push_back (i);
        parse >> i;
        y.push_back (i);
        parse >> i;
        z.push_back (i);
    }
} 
```

条件检查不是必需的，但我将其保留为您最初的样子。

# ruby - unix sed 排序如何与 ruby 格式结合使用？

> ID：12292423
> 
> 赞同：0
> 
> 时间：2012-09-06T03:05:13.847
> 
> 标签：ruby, bash, unix, streaming, stdin

*使用 sed 的目的是因为我想逐行读取它。

我对unix bash和ruby的问题很少，我对bash的语法真的很困惑。如果有人能给我一些例子，它真的可以帮助人们学习。欣赏每一个回应。

1.假设我想在命令行中读取 server.txt，然后按服务器内容 aplhabetally 对其进行排序

这是 server.txt 的样子

> 太平洋
> 亚洲
> 北美
> 美国

这是我输入的

```
sed -e server.txt |sort| > done.txt 
```

但似乎效果不佳，如何解决？

2.我的第二个问题是如何结合使用unix命令和ruby脚本。就像我想在文件中流式传输，然后逐行输入到我的 ruby​​ 文件中。然后输出到一些文件。我试过

```
sed -e server.txt ruby filter.rb > done.txt 
```

这也行不通。

3.$stdin $stdout 是什么意思？

4.如果 server.txt 像 10gb 的内存放不下，我们还能用 sort 吗？或者排序就像自动为我们做流式传输和合并？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T03:48:14.837

1.  如果您输入的内容准确无误：

    ```
    sed -e server.txt |sort| > done.txt 
    ```

    您应该因为`sed`抱怨“server.txt”中缺少第三个“e”而出现语法错误（因为它会将其视为尝试用“e”作为表达式分隔符来制定替代命令；该`-e`选项意味着以下参数是命令表达式，而不是文件名）。

    第二个管道应该省略。如前所述，您调用了一个创建文件`done.txt`然后什么也不做的空命令。如果您希望将输出写入文件，则需要在其中输入`cat`or`tee`命令。或者，更好的是，省略第二个管道以便`sort`写入文件。

    > 您能否举例说明如何使用`cat`或`tee`使第一个示例起作用？

    ```
    sed -e s/a/b/g server.txt | sort | cat > done.txt  # UUOC award
    sed -e s/a/b/g server.txt | sort | tee   done.txt
    sed -e s/a/b/g server.txt | sort       > done.txt  # No UUOC award
    sed -e s/a/b/g server.txt | sort      -o done.txt  # No UUOC award 
    ```

    我已经添加了一个表达式，`sed`所以它会读取文件`server.txt`。 [UUOC](http://catb.org/jargon/html/U/UUOC.html)是“无用的猫”奖。绝对没有必要`cat`在示例中使用。如果您打算在滚动过去时读取所有 10 GiB 数据，则使用`tee`它可能是有意义的；否则，最后两个选项之一更明智；在这种情况下，它们本质上是等价的。

2.  你的第二个命令：

    ```
    sed -e server.txt ruby filter.rb > done.txt 
    ```

    应该写成：

    ```
    sed -e s/a/b/g server.txt | ruby filter.rb > done.txt 
    ```

    我为`-e`选项提供了一个愚蠢的操作`sed`；的输出通过`sed`管道传输到`ruby`脚本，然后将输出写入`done.txt`. 这是一种非常标准的成语。

3.  没有更多的上下文，我不能告诉你什么`$stdin`和`$stdout`意思。在不同的语言中，它的含义略有不同，但通常是对某种变量的引用。我不确定是否有任何语言将这两个名称视为特殊名称；可能有一些，但 Perl 和 shell 对这些名称都没有特殊含义。

# javascript - Google Native Client，将二进制数据从 NACL 发送到前端

> ID：12292425
> 
> 赞同：12
> 
> 时间：2012-09-06T03:05:37.363
> 
> 标签：javascript, c++, arrays, google-nativeclient

如何将二进制数据（例如`mp3/mp4`数据）发送回前端？

我知道有两种方法：利用 NACL 提供的沙箱文件系统并在前端获取 url；通过`PostMessage()`using传递数据`VarArrayBuffer`。如果有人能给我一个简单的例子来说明如何通过`PostMessage()`. NACl FileSystem API 有一个 Pong 示例，但我对如何将文件位置检索为 url 以便前端 JS 可以通过消息获取它有点困惑。

这是我到目前为止所做的，使用通过`PostMessage()`and传递数据的第二种方法`VarArrayBuffer`：

*   我成功地从在线 mp4 文件中检索数据并将其存储在 char vector`vector<char> outputBuffer`中。

*   将数据转储到新的 char 缓冲区并创建`VarArrayBuffer`以保存数据并将其传递给 JS 端

    ```
    char* binaryBuffer = new char[outputBuffer.size()];
    int increment = 0;
    for (vector<char>::iterator it = outputBuffer.begin(); 
         it != outputBuffer.end(); it++) {
         binaryBuffer[increment] = *it;
    }

    pp::VarArrayBuffer outBuffer(binaryBuffer);
    instance_->PostMessage(outBuffer);//instance_ is a NACL module instance 
    ```

那么，JS端应该如何抓到数组缓冲区呢？是通过`message.data`还是别的什么？

# ios - 图像拼接成带有动画的瓷砖 - iOS

> ID：12292431
> 
> 赞同：3
> 
> 时间：2012-09-06T03:06:13.207
> 
> 标签：ios, xcode, splice

我正在尝试拼接图像，然后过渡到下一个类似这样的图像？关于从哪里开始有什么建议吗？是否可以将图像拼接成小图块并使用 UIView 动画对其进行动画处理？这是一个[示例](https://vimeo.com/11318617)。

编辑：

```
 '#define DESIRED_WIDTH 40

 '#define DESIRED_HEIGHT 60

 - (void)viewDidLoad
{
[super viewDidLoad];

  UIImage *bigImage = [UIImage imageNamed:@"background_for_Manager_App.png"];
  CGRect frame = CGRectMake(0.0, 0.0, DESIRED_WIDTH, DESIRED_HEIGHT);
  int widthCount = (bigImage.size.width / DESIRED_WIDTH);
  int heightCount = (bigImage.size.height / DESIRED_HEIGHT);
  NSLog(@"height width %i %i",heightCount,widthCount);
  for (int i = 0; i <heightCount; i++) {
    for (int j = 0; j < widthCount; j++) {
        UIImage *piece = [self imageCroppedWithRect:frame];
        UIImageView *view = [[UIImageView alloc] initWithImage:piece];
        view.frame = frame;
        [self.view addSubview:view];

        frame.origin.x += frame.size.width;
        NSLog(@"x value %f",frame.origin.x);

       }
    frame.origin.x = 0.0;

    frame.origin.y += frame.size.height;
     NSLog(@"y value %f",frame.origin.y);
   }

//[UIView beginAnimations:nil context:12    // Do any additional setup after loading the view, typically from a nib.

}

- (UIImage *)imageCroppedWithRect:(CGRect)rect
  {
    CGFloat scale = [UIImage imageNamed:@"background_for_Manager_App.png"].scale;
    NSLog(@"scale value%f",scale);
    if (scale > 1.0f) 
    {    // this is for Retina display capability
         rect = CGRectMake(rect.origin.x * scale,
                      rect.origin.y * scale,
                      rect.size.width * scale,
                      rect.size.height * scale);

    }

    CGImageRef imageRef = CGImageCreateWithImageInRect([UIImage imageNamed:@"background_for_Manager_App.png"].CGImage, rect);
    UIImage *result = [UIImage imageWithCGImage:imageRef scale:scale orientation:self.splicedImageView.image.imageOrientation];
    CGImageRelease(imageRef);
    return result;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T03:16:11.540

使用此代码进行裁剪（您最好将其添加为`UIImage`类别）：

```
- (UIImage *)imageCroppedWithRect:(CGRect)rect
{
    if (self.scale > 1.0f) {    // this is for Retina display capability
        rect = CGRectMake(rect.origin.x * self.scale,
                          rect.origin.y * self.scale,
                          rect.size.width * self.scale,
                          rect.size.height * self.scale);
    }

    CGImageRef imageRef = CGImageCreateWithImageInRect(self.CGImage, rect);
    UIImage *result = [UIImage imageWithCGImage:imageRef scale:self.scale orientation:self.imageOrientation];
    CGImageRelease(imageRef);
    return result;
} 
```

如何使用：您应该`UIImage`使用此代码创建一个类别。然后加载图像并将其切片：

```
UIImage *bigImage = [UIImage imageNamed:@"big_image"];
CGRect frame = CGRectMake(0.0, 0.0, DESIRED_WIDTH, DESIRED_HEIGHT);
for (int i = 0; i < bigImage.size.height / DESIRED_HEIGHT; i++) {
    for (int j = 0; i < bigImage.size.width / DESIRED_WIDTH; j++) {
        UIImage *piece = [bigImage imageCroppedWithRect:frame];
        UIImageView *view = [[UIImageView alloc] initWithImage:piece];
        view.frame = frame;
        [self.view addSubview:view];
        [view release];
        frame.origin.x += frame.size.width;
    }
    frame.origin.x = 0.0;
    frame.origin.y += frame.size.height;
} 
```

只需将您的图像切成小块，然后创建适当数量的`UIImageView`对象并将它们以正确的顺序放置到您的视图中。现在您可以根据需要为它们设置动画。

另请注意， DESIRED_WIDTH 和 DESIRED_HEIGHT 必须将图像的边分开，没有余数。

对于视频上的动画，您应该使用`UIViewAnimationOptionTransitionFlipFromLeft`选项：

```
[UIView animateWithDuration:0.2 delay:0.0 options:UIViewAnimationOptionTransitionFlipFromLeft animations:^{
    // hide your image here
} completion:nil]; 
```

# php - php中的动态外部链接css

> ID：12292443
> 
> 赞同：2
> 
> 时间：2012-09-06T03:08:11.500
> 
> 标签：php, html, css

我正在尝试使用 php 创建一个网站，并且我使用外部 css 文件。

我有 head.php 文件

```
<title>TITLE</title>
<link rel="stylesheet" type="text/css" href="style/style.css" /> 
```

这是我的 index.php 文件

```
$server = $_SERVER['DOCUMENT_ROOT'];
include $server.'/head.php'; 
```

它工作正常，但是当我尝试在 child/index.php 等子目录中创建其他 index.php 文件时，它说找不到 css 文件。我试图将 head.php 更改为

```
<link rel="stylesheet" type="text/css" href="<? echo $server ?>/style/style.css" /> 
```

它也不起作用。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T03:12:34.440

如果css文件的url是`http(s?)://www.example.com/style/style.css`

然后就使用：

```
<link rel="stylesheet" type="text/css" href="/style/style.css" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T03:12:27.737

由于 PHP 是服务器端，因此使用文档根目录将引用您的 Web 服务器的根目录。但是，您正在尝试在客户端加载 CSS 文件。因此，您的 href 属性值是相对于当前域的（/ 不是指服务器上的根，只是域的根）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T03:12:56.940

您的样式表使用的是相对路径。您可以通过更改它以反映它位于子目录中来解决问题：

```
../style/style.css 
```

`..`导致它从解释 HTML 的位置“向上”一个目录。

另一种选择是使用绝对路径，例如`http://www.example.com/style/style.css`

# common-lisp - hunchentoot-1.2.3中是否删除了足够的url功能？

> ID：12292447
> 
> 赞同：1
> 
> 时间：2012-09-06T03:09:15.580
> 
> 标签：common-lisp, hunchentoot

如果是这样，我该如何更改以下代码：

```
(script-path (tbnl::enough-url (ppcre:regex-replace-all "\\\\" script-name "/") uri-prefix)) 
```

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-06T10:28:20.460

也许你正在寻找这个？

```
CL-USER> (puri:render-uri
          (puri:enough-uri "http://foo.bar.com/baz/blub"
                           "http://foo.bar.com/")
          nil)
"/baz/blub" 
```

# php - htaccess 重定向除多个文件夹和文件之外的所有内容

> ID：12292449
> 
> 赞同：1
> 
> 时间：2012-09-06T03:09:21.053
> 
> 标签：php, .htaccess, redirect

我一直在尝试多种不同类型的示例，但在尝试添加更多文件夹和文件作为重定向例外时无法正常工作。我只知道这个例子可以在我的 apache localhost 中工作：

```
<IfModule mod_rewrite.c>
    RewriteEngine on
    RewriteRule  !^js($|/) http://google.com [L,R=301]
</IfModule> 
```

所以基本上我想重定向除 js、css、img 文件夹和 getOrder.php、getCustomer.php 文件之外的所有文件，诸如此类。在这种情况下有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T04:22:36.540

我建议您添加一条“最后一个”规则，上面写着“不要触摸这些文件夹”。然后在此之后进行重定向。

编辑：使用包装元素更新答案（FollowSymLink，ReWriteEngine on）。

```
Options +FollowSymLinks
Options -Indexes

# These folders will not be touched.
RewriteEngine On
RewriteCond %{REQUEST_URI} "/css/" [OR]
RewriteCond %{REQUEST_URI} "/img/"
RewriteRule (.*) $1 [L]

# Then have your redirect rule
RewriteEngine On
RewriteRule  (.*) http://google.com [L,R=301] 
```

* * *

尽管正如评论中所建议的那样，您可以对“找不到文件”进行重定向，这可能更合适？或者将重定向放在您不希望有人阅读的文件夹中。重定向到您说“未找到”的页面也比重定向到谷歌更好。但这是你的决定。

# javascript - 如何在javascript中只读取小数点前的数字？

> ID：12292451
> 
> 赞同：0
> 
> 时间：2012-09-06T03:10:17.507
> 
> 标签：javascript, parsing, variables

我有我在这里使用的脚本：http: [//jsfiddle.net/6b2yy/1/](http://jsfiddle.net/6b2yy/1/)

它应该根据变量值更改每个单独表格的背景颜色。但是，它不能像现在这样工作，因为变量后面有一个小数和 %。我怎样才能让它只读取小数点前的前两位，而不改变页面上显示的内容。需要注意的一件事是，在我的网站上显示的是变量，而不是静态数字。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-06T03:12:00.733

使用[parseInt](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/parseInt)函数

```
parseInt('75.9%',10)
> 75 
```

我想在你的情况下

```
score = parseInt($(this).text(), 10); 
```

[**演示**](http://jsfiddle.net/6b2yy/2/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T03:24:07.353

为什么不正确读取和四舍五入的值，而不是将数字读取到小数点？

```
parseInt('75.9%',10);            //-> 75
Math.round(parseFloat('75.9%')); //-> 76 
```

# java - java类中的规范和实现？

> ID：12292453
> 
> 赞同：-1
> 
> 时间：2012-09-06T03:10:25.220
> 
> 标签：java, class, inheritance

我无法理解这些术语的含义，如果有人可以向我解释，我将不胜感激。

我已经有 3 个类叫做：Shape Rectangle Circle

然后我创建了一个名为 Triangle 的类

a）当他们说创建一个与矩形 ADT 类似的三角形 ADT 规范（在我已经拥有的类之上）时，这是什么意思

b) 实现类 Triangle

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T03:18:55.350

“创建三角形[ADT](http://en.wikipedia.org/wiki/Abstract_data_type)的规范”意味着定义定义三角形所需的数据（三个笛卡尔坐标是最直接的，但它可以是一个点、三个角和一个边长，或其他）。

“实现类 Triangle”意味着编写一个 java 类，`implements Shape`但其内部实现是您在步骤 1 中定义的 java 表示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T03:19:31.193

ADT：实现独立的数据描述，指定数据的内容、结构和合法操作。ADT 有一个

```
Name:
Description of the data structure:
Operations:

Construction operations:
Initial values;
Initialization processes;
    For each operation:
    Name of the operation;

Input: External data that comes from the user of this data (client)

Preconditions: Necesssary state of the system before executing this operation;

Process: Actions performed by the data

Output: Data that is output to the client

Post Conditions: State of the system after executing this operation 
```

例子：

```
ADT circle
Data: r³ 0 (radius);
Operations

    Costructor:

        Initial values:radius of circle;
        Process: Assign initial value of r;

    Area:

        Input: none;
        Preconditions: none;
        Process: A ¬ p *r*r Output: A
        Postcondition: none

    Circumference:

        Input: None;
        Preconditions: none;
        Process: C ¬ 2*p *r
        Output: C
        Postconditions: none;

End ADT circle; 
```

# php - 阻止 file_get_content 正确读取的警告

> ID：12292456
> 
> 赞同：0
> 
> 时间：2012-09-06T03:10:43.807
> 
> 标签：php, email, attachment

在附加附件时，我收到一条警告消息，阻止我将现有的 pdf 文件附加到我的电子邮件中。我知道这不是我的标题，因为该脚本成功地附加了一个由其前面的字符串生成的 vcard。由于我没有编辑文件，因此不需要 TDPDF 和 FPDF。（虽然不是 100%）这是我一直在使用的代码。我已经包含了我的输出测试行和评论。

```
//File Definition
        $filepath = "docs/";
        //$filepath = "./docs/"; //tried: same result
        $fullpath = $filepath . $filename; //$filename defined earlier

    //File Manipulation
        $file = fopen($fullpath,'rb');
        $pdfdata = fread($file, filesize($fullpath));
        fclose($file);

    //Testing
        echo $fullpath . "<br />\n";
        echo "Filename: " .$filename . "<br />\n";
        echo "Filesize: " .filesize($fullpath). "<br />\n";
        echo "String Length: " .strlen($pdfdata). "<br />\n";

    //The Following line proved the variable is dumping properly, 
    //but its content cannot be used for file_get_contents...huh?
        //var_dump($pdfdata); //Only used for proofing

        echo "Probable Errors for file_get_contents<br />\n";
        $data = file_get_contents($pdfdata);

    // The following line: Sends File, but is 0 bytes
        //$attachment = chunk_split(base64_encode($pdfdata));
    //default 
        $attachment = chunk_split(base64_encode(file_get_contents($pdfdata))); 
```

这输出：

```
docs/pdf-to-send.pdf
Filename: pdf-to-send.pdf
Filesize: 37907
String Length: 37907
Probable Errors for file_get_contents

Warning: file_get_contents(%PDF-1.5 % ... (truncated by me)
        ... ) [function.file-get-contents]: failed to open stream: No such file or directory in /my/hosting/directory/mailer.php on line 337
Warning: file_get_contents(%PDF-1.5 % ... (truncated by me )
        ... ) [function.file-get-contents]: failed to open stream: No such file or directory in /my/hosting/directory/mailer.php on line 339 
```

它告诉我文件大小，可以在 2 个不同的变量中找到：$pdfdata 和 $filesize。他们匹配。我会提到我截断的响应（由于字符集）已经被服务器截断了。这就是我开始检查长度的原因。

最后，以防万一它可能是我的标题，因为我能够成功发送一个 0 字节的文件，这里是那些行......

```
$body .= "--". $mime_boundary. "\r\n" ;
$body .= "Content-Type: application/octet-stream; name=\"".$filename."\"". "\r\n";
$body .= "Content-Transfer-Encoding: base64" . "\r\n";
$body .= "Content-Disposition: attachment;" . "\r\n";
$body .= "filename=\"".$filename."\"" . "\r\n\n";
$body .= $attachment . "\n\n"; 
```

我知道我可以将“Content-Type”更改（并尝试过）为“application/pdf”。

我的字符集是 UTF-8。我可能误解了 fopen() 和 fread() 的“二进制安全”描述，但这不应该导致脚本失败。应该是？

任何解决此问题的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T15:15:18.787

好的。我修好了它。奇怪的是它在我的标题中。

我发布的标题命令实际上是正确的。可悲的是，我发布了我的电子名片附件正文修正案。所以这个问题已经有了我的答案。::邦克::

这条线是正确的。

```
$body .= "filename=\"".$filename."\"" . "\r\n\n";
$body .= $attachment . "\n\n"; 
```

这就是我实际拥有的。

```
$body .= "filename=\"".$filename."\"" . "\r\n"; 
```

这解释了为什么我有一个 0 字节的附件。

而且，只是为了显示实际有效的代码段：

```
//File Manipulation
        $file = fopen($fullpath,'rb');
        $pdfdata = fread($file, filesize($fullpath));
        fclose($file);

    //Testing
        // echo $fullpath . "<br />\n";
        //echo "Filename: " .$filename . "<br />\n";
        //echo "Filesize: " .filesize($fullpath). "<br />\n";
        // echo "String Length: " .strlen($pdfdata). "<br />\n";
        //var_dump($pdfdata); // Don't remove this (as a comment) again. LOL
        // echo "Probable Errors for file_get_contents<br />\n";
        //$data = file_get_contents($pdfdata, true);

        $attachment = chunk_split(base64_encode($pdfdata));
        //$attachment = chunk_split(base64_encode(file_get_contents($pdfdata))); 
```

对不起，如果我浪费了任何人的时间。

# php - 在查看站点上添加文本字段然后保存

> ID：12292457
> 
> 赞同：0
> 
> 时间：2012-09-06T03:10:55.587
> 
> 标签：php, joomla

我正在开发一个用于评分的 Joomla 组件。我有 3 个观点：

*   课程
*   主题
*   学生

“课程”和“主题”视图现在运行良好，但我对学生视图有一点问题。我的任务是在它的默认视图中创建或添加一个文本字段，并且我已经成功完成了它，但问题是当我添加 JToolbarHelper::save 时它不会保存或更新文本字段中的项目。 . 有什么解决办法吗？

这是示例代码

`echo "<input type='text' name='grade' value='".$row->grade."'>"`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T13:36:25.247

你能参考你的`STUDENT`XML文件吗？如果没有像`grade`你这样的文件，你必须创建它。提交表单后，您将获得帖子值...

在`Joomla 2.5`您已声明 XML 文件中的所有字段。

*   放在`exit` 从提交和`echo $this->grade`值之前。如果值不存在就放`$this->grade = $_POST['grade']`. 然后将该值存储在数据库表中。

试试这个......希望这对你有用......

# android - Techart 在首次加载时显示压缩，因为扩展的键盘会缩小视图

> ID：12292461
> 
> 赞同：1
> 
> 时间：2012-09-06T03:11:39.963
> 
> 标签：android, xamarin.android, teechart

我有一个使用 ActionBar 选项卡的 FragmentActivity，其中一个选项卡有一个包含一系列图表的选项卡主机。

此活动是通过搜索启动的，因此在加载活动时键盘会消失，这会导致第一个选项卡的图表显示为压缩状态。这只发生在第一次加载活动时。在我的第二次搜索中，图表完整显示。

TabHost 活动如下所示，

```
[Activity]
public class MonthlySalesChartView : Activity
{
    private CustomerRepository _customerRespository;
    private BaseChart _chart;
    private string _code;

    protected override void OnCreate(Bundle savedInstanceState)
    {
        base.OnCreate(savedInstanceState);
        _customerRespository = new CustomerRepository();

        _chart = BuildChart();

        _code = Intent.GetStringExtra("customer_code");

        SetContentView(_chart);
    }

    private BaseChart BuildChart()
    {
        var data = _customerRespository.GetMonthlySalesData(_code);
        var tChart = new BaseChart(ApplicationContext, "Monthly Sales History");
        tChart.Axes.Left.Title.Text = "Spend ($)";
        tChart.Aspect.View3D = false;
        var bar1 = new BaseBar(tChart.Chart) { Title = "Customer Spend" };
        bar1.Marks.Visible = false;
        var avgLine = new Line(tChart.Chart) { Title = "Average Spend", Dark3D = false, LinePen = { Width = 4 } };

        foreach (var month in data.ResultSet.MonthlySales)
        {
            bar1.Add(month.Value, month.MonthName);
        }

        avgLine.DataSource = bar1;
        avgLine.Function = new Average(true);
        avgLine.Depth = 50;

        return tChart;
    }
} 
```

外观示例

![图表](../Images/55d81cd97fa75a3ebd6293b96fbe12ee.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T04:39:51.073

尝试调整

在 Activity 上的 AndroidManifest.xml 中设置输入模式。

```
android:windowSoftInputMode="stateVisible|adjustPan" 
```

这调整了系统如何处理调整屏幕以适应占用屏幕空间的键盘。

# google-chrome - Safari Chrome 随机超时，Firefox 从不

> ID：12292462
> 
> 赞同：1
> 
> 时间：2012-09-06T03:11:44.643
> 
> 标签：google-chrome, safari, timeout

感谢高级版，
Safari 和 Chrome 随机超时/冻结/挂起。这在随机页面上随机发生。我可以单击刷新大约 5 次，然后页面快速加载。如果我让它尝试下载，则页面获取服务器没有响应错误。使用 Firefox 时，页面总是加载得非常快。我通常在登录涉及会话/cookie 的后端后看到问题。两种浏览器都启用了 Cookie。IE 也可以，但比 firefox 慢。我不确定导致问题的代码有什么问题。
Safari 6.0
/ Chrome 21.0 Mac 10.8.1 上的
Firefox 15.0 我在带有 chrome 的 windows xp 上也遇到了问题。有几次我失去了会话，不得不重新登录 IE 6。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T03:23:36.993

尝试添加`EXPIRES`标题：

> 网页变得越来越复杂，其中包含更多的脚本、样式表、图像和 Flash。首次访问页面可能需要多个 HTTP 请求来加载所有组件。通过使用 Expires 标头，这些组件变得可缓存，从而避免了后续页面视图中不必要的 HTTP 请求。Expires 标头通常与图像相关联，但它们可以而且应该用于所有页面组件，包括脚本、样式表和 Flash。

并配置实体标签：

> 实体标签 (ETags) 是 Web 服务器和浏览器用来确定浏览器缓存中的组件是否与源服务器上的组件匹配的一种机制。由于 ETag 通常是使用属性构建的，这些属性使它们对于托管站点的特定服务器是唯一的，因此当浏览器从一台服务器获取原始组件并随后尝试在另一台服务器上验证该组件时，这些标签将不匹配。

我在 Chrome上使用[YSlow](https://chrome.google.com/webstore/detail/ninejjcohidippngpapiilnmkgllmakh)获得了上述信息。

# facebook - 提取用户 Facebook 墙上的所有帖子

> ID：12292464
> 
> 赞同：-1
> 
> 时间：2012-09-06T03:11:54.327
> 
> 标签：facebook, api

我正在尝试对公司 Facebook 墙上的所有墙帖进行总结，但我希望所有帖子都采用类似 XML 的格式。我知道 Graph API，但我以前从未使用过它。

确切的具体问题：
**如何“提取”公司 Facebook 墙上的所有墙贴？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T04:36:55.307

使用 Graph API 尝试以下操作。

```
https://graph.facebook.com/[company_page_id]/posts?access_token=XXXXXXX 
```

# ios - uisearchbar 上的清除按钮根本不起作用

> ID：12292471
> 
> 赞同：6
> 
> 时间：2012-09-06T03:12:54.673
> 
> 标签：ios, objective-c, iphone, uikit, uisearchbar

我以编程方式创建了一个搜索栏，并使用以下代码添加到我的视图中：

```
- (void)viewDidLoad
{
    searchBar = [[UISearchBar alloc] initWithFrame:CGRectMake(xPositionForSearchBar, yPositionForSearchBar, widthForSearchBar, heightForSearchBar)];
        UIView *bg = [[searchBar subviews] objectAtIndex:0];
        searchBar.delegate = self;
        searchBar.placeholder = @"Search record";
        for(UIView *view in searchBar.subviews){
            if([view isKindOfClass:[UITextField class]]){
                UITextField *tf = (UITextField *)view;
                tf.delegate = self;
                break;
            }
        }
        [bg removeFromSuperview];
        [self.view addSubview: searchBar];
} 
```

该代码使用 UISearchBarDelegate 和 UITextFieldDelegate 实现。

我试过使用

```
- (void)searchBarCancelButtonClicked:(UISearchBar *)aSearchBar
{
    NSLog(@"cancel clicked");
    searchBar.text = @"";
    [aSearchBar resignFirstResponder];
}

- (BOOL)textFieldShouldClear:(UITextField *)textField
{
    NSLog(@"clear");
    [self performSelector:@selector(searchBarCancelButtonClicked:) withObject:searchBar afterDelay: 0.1];
    return YES;
} 
```

然而，当我点击“清除按钮”时，搜索栏中的文本根本没有被清除 - 一个里面有一个“X”的圆圈。

当我在 IB 中实现它时，清除按钮有效。想知道为什么？

恳请指教，非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-10-23T16:39:35.620

如果您将搜索栏放置在父视图的范围之外，则可能会发生这种情况。然后，触摸不会正确传递到您的 searchBar。这也会影响文本编辑控件，例如复制和粘贴。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T05:42:24.880

我已经检查了您的代码，它在设备和模拟器上都可以正常工作。

# scala - sbt.bat 用于 windows

> ID：12292474
> 
> 赞同：3
> 
> 时间：2012-09-06T03:13:16.913
> 
> 标签：scala

我是 Scala 的新手。

我刚刚[为 Windows MSI 安装了 sbt](http://www.scala-sbt.org/download.html)

我有一个带有 build.sbt 的项目

我在当前项目文件夹中打开了一个 Windows 控制台。

我运行了 sbt.bat

我打开了@echo 以获取错误消息。

```
C:\MasseGuillaume-Scala99-1879ed7>sbt

C:\MasseGuillaume-Scala99-1879ed7>set SBT_HOME=C:\MasseGuillaume-Scala99-1879ed7
\

C:\MasseGuillaume-Scala99-1879ed7>set ERROR_CODE=0

C:\MasseGuillaume-Scala99-1879ed7>rem We use the value of the JAVACMD environmen
t variable if defined

C:\MasseGuillaume-Scala99-1879ed7>set _JAVACMD=

C:\MasseGuillaume-Scala99-1879ed7>if "" == "" (if not "" == "" (if exist "\bin\j
ava.exe" set "_JAVACMD=\bin\java.exe" ) )

C:\MasseGuillaume-Scala99-1879ed7>if "" == "" set _JAVACMD=java

C:\MasseGuillaume-Scala99-1879ed7>rem We use the value of the JAVA_OPTS environm
ent variable if defined

C:\MasseGuillaume-Scala99-1879ed7>set _JAVA_OPTS=

C:\MasseGuillaume-Scala99-1879ed7>if "" == "" set _JAVA_OPTS=-Xmx512M -XX:MaxPer
mSize=256m -XX:ReservedCodeCacheSize=128m -Dsbt.log.format=true

C:\MasseGuillaume-Scala99-1879ed7>"java" -Xmx512M -XX:MaxPermSize=256m -XX:Reser
vedCodeCacheSize=128m -Dsbt.log.format=true  -cp "C:\MasseGuillaume-Scala99-1879
ed7\jansi.jar;C:\MasseGuillaume-Scala99-1879ed7\sbt-launch.jar;C:\MasseGuillaume
-Scala99-1879ed7\classes" SbtJansiLaunch
'"java"' n'est pas reconnu en tant que commande interne
ou externe, un programme exécutable ou un fichier de commandes.

C:\MasseGuillaume-Scala99-1879ed7>if ERRORLEVEL 1 goto error

C:\MasseGuillaume-Scala99-1879ed7>set ERROR_CODE=1

C:\MasseGuillaume-Scala99-1879ed7>exit /B 
```

错误在这一行：

```
"%_JAVACMD%" %_JAVA_OPTS% %SBT_OPTS% -cp "%SBT_HOME%jansi.jar;%SBT_HOME%sbt-launch.jar;%SBT_HOME%classes" SbtJansiLaunch %* 
```

我应该添加什么来修复它？该错误表明它的 Java 未被识别为内部或外部命令或程序。

我只是没有收到消息错误。如果我将 sbt.bat 和 jansi.jar 和 sbt-launch.jar 放入 C:\Program Files (x86)\Java\jre6\bin 并运行批处理文件，它就可以工作。

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-06T03:23:43.330

我承认，自从我离开学校后的三十多年里，我没有学过多少法语（除了帮助孩子们），但是：

> '"java"' n'est pas reconnu en tant que commande interne ou externe, un program exécutable ou un fichier de commandes。

看起来很可疑：

> '"java"' 不被识别为内部或外部命令、程序可执行文件或命令文件。

`'something' is not recognized as an internal or external command, operable program or batch file`这是Windows 在找不到您要运行的内容时抛弃的旧最爱。

所以听起来你需要安装一个 Java 运行时环境，或者修改你的路径以指向一个已经安装的环境。由于您显然*有*一个`C:\Program Files (x86)\Java\jre6\bin`目录，因此我建议您使用后者。

进入控制面板，`System`然后`Advanced System Settings`选择 ，选择`Advanced`选项卡，然后选择`Environment Variables`按钮。

然后修改您的路径以包含 JRE bin 目录。保存后，打开另一个`cmd`窗口并使用`path`. 这需要检查（和使用）新路径，因为它只影响*新*会话，而不影响现有会话。

请注意，这些说明适用于 Win 7，在其他版本上可能会有所不同，但概念是相同的。

或者，如果您不想摆弄控制面板中的路径，您可以在该批处理文件中更改它，例如：

```
set path="%path%;C:\Program Files (x86)\Java\jre6\bin" 
```

这样，它只会在您运行批处理文件时生效。

# php - 在同一个句子中计算数据

> ID：12292476
> 
> 赞同：0
> 
> 时间：2012-09-06T03:13:24.210
> 
> 标签：php, mysql

我有桌子：

```
==========================================================
|id | before | after | freq | id_sentence | document_id  |
==========================================================
| 1 |    a   |   b   | 1    |     0       |      1       |
| 2 |    c   |   d   | 1    |     1       |      1       |
| 3 |    e   |   f   | 1    |     1       |      1       |
| 4 |    g   |   h   | 2    |     0       |      2       |
========================================================== 
```

我想获得数据的数量取决于`id_sentence`，`freq`所以结果必须是 1 2 1 这是代码：

```
$query = mysql_query("SELECT freq FROM tb where document_id='$doc_id' ");
    while ($row = mysql_fetch_array($query)) {
        $stem_freq = $row['freq'];
        $total = $total+$stem_freq; 
```

但结果仍然是错误的。请帮帮我..谢谢:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T03:33:58.117

如果我理解您的问题，您正在尝试计算`freq`每个不同`id_sentence`的特定的总和`document_id`。

尝试以下 SQL：

```
SELECT id_sentence, SUM(freq) as freq FROM tb WHERE document_id = 1 GROUP BY(id_sentence) 
```

结果将是具有`id_sentence`相应总和的数据行`freq`。事后无需手动总结。

请参阅此 SQL 小提琴：[http ://sqlfiddle.com/#!2/691ed/8](http://sqlfiddle.com/#!2/691ed/8)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T03:16:22.180

我认为你可以做类似的事情

```
SELECT count(*) AS count FROM tb GROUP BY(id_sentence,freq) 
```

做你想要的计数。你甚至可以做类似的事情

```
SELECT count(*) AS count, id_sentence, freq FROM tb GROUP BY(id_sentence,freq) 
```

知道计数是针对哪个 id_sentence,freq 组合。

# c++ - 为成就系统设计 MySQL 表

> ID：12292485
> 
> 赞同：0
> 
> 时间：2012-09-06T03:16:14.070
> 
> 标签：c++, mysql

我正在为成就系统创建一个数据库（就像你在暴雪游戏中看到的那样）。我想要一个显示游戏中所有成就的当前进度的 GUI，这意味着我需要为用户查询所有成就的进度才能填充 GUI。我计划取得大约 100 项成就。

这带来了一个设计问题。**设计数据库和查询代码以查询约 100 位字段的进度的最佳方法是什么？**

似乎蛮力方法是获取整行成就，然后对行中的每个字段进行一些硬编码字符串比较以确定我们正在处理的成就。

另一种可能的解决方案可能是基于表的列索引有一个大的 switch 语句并处理每种情况的每个成就（不需要修改表或您必须重构大量 C++ 代码）。

我很想知道你们可能对此有任何其他设计。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T03:50:19.920

我建议使用 3 个表构建解决方案。这些表是用户、成就和 user_achievements。用户将通过 users 表中的 u_id 标识。成就将通过成就表中的 a_id 来标识。然后，您将通过在 user_achievements 表中插入一行来跟踪用户的成就，其中包括一个用于标识用户的 u_id 和一个用于标识成就的 a_id。user_achievements 表还将包含一个列，该列将指定给定用户的该成就的完成百分比。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-03T08:18:49.353

遇到这个问题，即使它已经 5 岁了，也许有人会对以下方法感兴趣。

*   成就通常被分解为数字（其余的，如名称，每个成就的描述可以放在站点/应用程序核心以避免膨胀数据库）。
*   简单点，我们不是 FB，不需要单独的表格，所以在“users”表格中我们只添加 1 个单列：“Achievements”它是一个 varchar(50)。括号中的数字 (50) 将取决于您对该列的实际需求（即它存储了多少数据）。
*   所以你最终在成就列的每个单元格中都有一个数字序列：10982039482084109384

从左到右阅读这行数字如下：用户已达到“1098 个个人资料浏览量”，收到“2039 个赞”等。可选地，添加一个分隔符以便于区分 + 以在第一个用户有 25 个赞时立即处理案例，然后是 125，然后是 2039（2 位、3 位、4 位 - 或者另一种选择是使用 0025，然后是 0125，然后是 2039，因为您知道每个成就的最大位数是 4）。但是仍然可以说我们决定使用分隔符，即逗号：

```
1098,2039,4820,8410,9384 
```

然后，一旦您需要数据，只需选择属于特定用户 ID 的成就，然后（如果您添加了分隔符）

```
explode (',', $array) 
```

那么您的网站 php 核心知道前 4 位数字代表“个人资料视图”，并且可以说这意味着他有一个 10 级徽章用于个人资料视图（1 个徽章代表 100 个视图）。

在此之上，您可以轻松地进行操作，而无需进一步的 SQL 查询。例如，用户想知道他获得 20 级徽章的进度，您显示：他有 1098/2000（或 55%）的进度。

此时，成就描述、名称、级别信息存储在站点核心中，而百分比则在移动中计算。

希望逻辑清晰，并且可能对社区中的任何人有用。

干杯!

# java - 使类线程安全

> ID：12292486
> 
> 赞同：14
> 
> 时间：2012-09-06T03:16:14.773
> 
> 标签：java, synchronization, thread-safety

鉴于：

```
public class TestSeven extends Thread {

private static int x;

public synchronized void doThings() {
    int current = x;
    current++;
    x = current;
}

public void run() {
    doThings();
  }
} 
```

哪个论述是对的？

A. 编译失败。

B. 运行时抛出异常。

C. 同步 run() 方法将使类线程安全。

D. 变量“x”中的数据受到保护，不会出现并发访问问题。

E. 将 doThings() 方法声明为静态将使类成为线程安全的。

F. 将 doThings() 中的语句包装在 synchronized(new Object()) { } 块中将使类成为线程安全的。

将 doThings() 标记为同步以使该类线程安全还不够吗？我看到正确答案是 D，但这个问题的模型答案是 E，但我不明白为什么？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-06T03:25:25.237

> E. 将 doThings() 方法声明为静态将使类成为线程安全的。

这是一个棘手的答案。该方法已经同步，但在实例上，而状态在静态字段中，即在类上。使它`static synchronized`确实是正确的答案，因为它会在类上同步，而不是在（无意义的）实例上同步。

> D. 变量“x”中的数据受到保护，不会出现并发访问问题。

```
private static int x; 
```

这是一个静态变量。它由类的所有实例共享，因此在单个实例上同步没有帮助，就像 F 没有帮助一样，它在完全丢弃的虚拟对象上同步。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-09-06T03:27:11.807

根据[语言规范](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.4.3.6)：

> 同步方法在执行之前获取监视器（第 17.1 节）。
> 
> 对于类（静态）方法，使用与方法类的 Class 对象关联的监视器。
> 
> 对于实例方法，使用与 this（调用该方法的对象）关联的监视器。

这意味着在您提供的代码中，关键字会导致方法在执行方法主体之前`synchronized`获得锁定。`this`但是，因为`x`这`static`并不能确保更新`x`是原子的。（该类的另一个实例可以进入同步区域并同时进行更新，因为它们具有不同的`this`值，因此具有不同的锁。）

但是，声明`doStuff`static 将使对该方法的所有调用都获得相同的锁（在 上的那个`Class`），因此将确保方法体中的互斥。

规范确实说明了这一点：

```
class A {
    static synchronized void doSomething() {
        // ...
    }
} 
```

字面意思是一样的

```
class A {
    static void doSomething() {
        synchronized(A.class) {
            // ...
        }
    }
} 
```

相似地：

```
class B {
    synchronized void doSomething() {
        // ...
    }
} 
```

字面意思是一样的

```
class B {
    void doSomething() {
        synchronized (this) {
            // ...
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-09-06T03:27:20.697

通过同步 doThings() 方法，您持有特定 TestSeven 对象的锁。但是，类的静态变量不属于对象本身的具体实例。它们属于 Class 对象`TestSeven.class`。所以，要么你可以去

```
synchronized (TestSeven.class){
    int current = x;
    current++;
    x = current;
} 
```

在你的 doThings() 方法中，该方法正在获取实例锁中的类锁，这是过度的事情。因此，您可以将该方法标记为静态，以便最终单独获取 Class 对象的锁。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-06T03:58:50.090

由于其他线程可以在方法运行的同时对其进行修改`x`。制作将阻止这一点。`static``doThings``doThings` `static`

* * *

## 回答 #5

> 赞同：-6
> 
> 时间：2012-09-06T03:29:14.587

我同意你的观点，正确答案是 D。我会说 E 不正确，因为如果我将 doThings() 设置为静态并删除同步关键字，我可以只启动 50 个 TestSeven 线程，这可能会导致不正确的 x 值。

注意：我在这里错了，我错过了没有静态的同步方法实际上使用实例作为锁监视器而不是类本身的观点。

# powershell - 无法通过 Exchange 2010 SP1 上的 PowerShell 删除邮箱权限

> ID：12292488
> 
> 赞同：1
> 
> 时间：2012-09-06T03:16:17.500
> 
> 标签：powershell, exchange-server, exchange-server-2010

使用 Exchange 2010 SP1 远程 powershell，我使用 Add-MailboxPermission cmdlet 为用户添加了权限。这是我用来添加权限的命令...

`Add-MailboxPermission user_mailbox -User admin_user -AccessRights FullAccess -InheritanceType All`

效果很好。一旦我运行它，admin_user 就可以访问 user_mailbox 的邮箱。现在，当我尝试删除这些权限时，它失败了。这是我用来删除权限的命令...

`Remove-MailboxPermission user_mailbox -User admin_user -AccessRights FullAccess -InheritanceType All`

这是它给出的错误......

`Object reference not set to an instance of an object. + CategoryInfo : NotSpecified: (:) [Remove-MailboxPermission], Nu llReferenceException + FullyQualifiedErrorId : RemoteHostExecutionException`

我不确定这个异常意味着什么，所以我不知道去哪里找。有没有其他方法可以通过远程powershell删除邮箱权限？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T18:53:56.560

尝试以下

```
Get-MailboxPermission -Identity "user_mailbox" -User "user_with_permission_to_remove" | Remove-MailboxPermission 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-02T19:16:32.980

我对 Exchange 2013 上的用户有损坏的邮箱权限。用户有权使用继承的 AND 特定权限访问邮箱。仅仅做一个 Remove-MailboxPermission 是不够的。我必须获得权限然后删除权限。它删除了损坏的一个并跳过了继承的一个。

Get-MailboxPermission -identity | 其中 {$_.user -eq ""} | 删除邮箱权限。

像魅力一样工作。

# javascript - 自动编辑页面的url

> ID：12292493
> 
> 赞同：1
> 
> 时间：2012-09-06T03:16:59.370
> 
> 标签：javascript, url, redirect, userscripts

在我们学校的网站上，我们老师的家庭作业页面只显示即将到来的作业。
要显示所有作业，请单击查看全部，然后单击所有作业。

URL按以下方式更改

```
http://example.com/apps/classes/show_class.jsp?classREC_ID=000000
http://example.com/apps/classes/show_assignment.jsp?classREC_ID=000000&showAll=true 
```

我已经（主要在 Stack Overflow）寻找解决方案，例如会自动更改 URL 的用户脚本，但我无法根据其他人的问题/答案弄清楚如何做到这一点。

简而言之，我将如何修改 URL，使**show_class**变为**show_assignment**并在末尾附加**&showAll=true**。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T03:24:24.880

这会做到：

```
window.location = String(window.location).replace(/show_class/,"show_assignment") + "&showAll=true"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T03:44:55.207

您是否尝试修改链接、修改按钮或***重定向***所有`show_class.jsp`页面？

如果您尝试修改链接、按钮等。编辑您的答案以显示目标页面的适当 HTML 源代码。

如果要重定向，应该使用如下脚本：

```
// ==UserScript==
// @name        _Redirect to see all homework assignments
// @include     http://example.com/apps/classes/show_class.jsp?classREC_ID=*
// @run-at      document-start
// ==/UserScript==

var newURL  = location.href.replace (/show_class\.jsp/i, "show_assignment.jsp")
            + "&showAll=true"
            ;

//--- Keep browser history / back-button, uncluttered.
location.replace (newURL); 
```

# active-directory - AD 用户配置 - SOAP API？

> ID：12292499
> 
> 赞同：1
> 
> 时间：2012-09-06T03:18:06.660
> 
> 标签：active-directory

我正在研究一个场景，我们希望通过我们的应用程序以编程方式将用户配置（即创建）到 AD 中。我想知道 AD 是否提供任何可用于此目的的基于 SOAP 的 API。任何人都有关于这种情况的经验/信息？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T03:38:21.093

ADFS 没有任何用户。身份验证（和“用户”）始终位于 Active Directory 中。有许多 API 可以与 AD 交互。（例如[目录服务](http://msdn.microsoft.com/en-us/library/system.directoryservices.aspx)）

我不知道基于 SOAP 的 API，但您可以构建一个包装上述 API 的 API。另外，我会研究这是否真的有必要。如果供应引擎打算在同一个域（例如本地）中运行，那么您将不需要 SOAP。

# r - readLines 函数丢失内容显示一小部分

> ID：12292507
> 
> 赞同：1
> 
> 时间：2012-09-06T03:20:45.907
> 
> 标签：r

为什么我无法读取下载的文件`readLines`？我该如何阅读它？

```
url="http://www.hkex.com.hk/chi/market/sec_tradinfo/stockcode/eisdeqty_c.htm"
txt=download.file(url,destfile="stock")
> file1=readLines("stock",encoding="big5")
Warning messages:
1: In readLines("stock", encoding = "big5") :
invalid input found on input connection 'stock'
2: In readLines("stock", encoding = "big5") :
incomplete final line found on 'stock'
> file1=readLines("stock",encoding="gbk")
Warning messages:
1: In readLines("stock", encoding = "gbk") :
invalid input found on input connection 'stock'
2: In readLines("stock", encoding = "gbk") :
incomplete final line found on 'stock'
> file1=readLines("stock",encoding="gb2132")
Warning messages:
1: In readLines("stock", encoding = "gb2132") :
invalid input found on input connection 'stock'
2: In readLines("stock", encoding = "gb2132") :
incomplete final line found on 'stock'
> file1=readLines("stock",encoding="gb18030")
Warning messages:
1: In readLines("stock", encoding = "gb18030") :
 invalid input found on input connection 'stock'
2: In readLines("stock", encoding = "gb18030") :
incomplete final line found on 'stock' 
```

文件只包含部分内容，很多内容丢失，为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T06:36:38.247

该文件包含 18 行，我的 R 读取了所有这 18 行。我怀疑您试图忽略文本文件和 HTML 文件之间的区别。要提取 HTML 表格，您需要使用类似[这样](https://stackoverflow.com/questions/1395528/scraping-html-tables-into-r-data-frames-using-the-xml-package)的东西。

# android - 使用 android 在 facebook 中发布带有照片的消息并出现错误：发生未知错误

> ID：12292508
> 
> 赞同：0
> 
> 时间：2012-09-06T03:20:47.700
> 
> 标签：android, facebook, facebook-graph-api, android-intent

我正在尝试将照片和消息发布到用户的墙上。我的代码发布在下面。

当我只发布消息时，它已成功发布。但是当我发布带有图片的消息时，我收到一个未知错误。

当用户按下按钮时，将执行以下代码：

```
 mFacebook.authorize(MainActivity.this, new String[] { "user_about_me", "email","publish_stream", "read_stream", "offline_access" }, new TestLoginListener());

     public class TestLoginListener implements DialogListener {

    public void onComplete(Bundle values) {
        try {
             {
                Bundle parameters = new Bundle();
                parameters.putString("message", "Test\n");
                String path=Environment.getExternalStorageDirectory()+"/Diegodeals/";
                 if(!new File(path).exists()) new File(path).mkdirs();

              File photo = new File(path, "diegodeals.jpg");

                if(photo!=null){
                    System.out.println(Uri.fromFile(photo).toString());
                parameters.putString("picture", Uri.fromFile(photo).toString());
                }
                String response = mFacebook.request("me/feed", parameters, "POST");
                 JSONObject json;
                 try
                 {
                     json = Util.parseJson(response);
                     if (!json.isNull("id"))
                     {
                         Toast.makeText(MainActivity.this, "SUCCESSED       ssssssss", Toast.LENGTH_LONG).show();
                     }
                     else
                     {
                         Toast.makeText(MainActivity.this, "fail", Toast.LENGTH_LONG).show();
                     }
                 } catch (FacebookError e)
                 {
                    e.printStackTrace();
                 }
                new FBLongOpertaion().execute("");

            }

            /*String resID = mFacebook.request("me");
            JSONObject objId = Util.parseJson(response);*/
        } catch (Exception e) {
            e.printStackTrace();
        }

    }

    public void onCancel() {
    }

    public void onError(DialogError e) {
        e.printStackTrace();
    }

    public void onFacebookError(FacebookError e) {
        e.printStackTrace();
    }
} 
```

我收到类似*UnKnown Error Detected 之*类的错误。我的 Logcat 值是

```
 09-06 10:50:42.210: W/System.err(352): com.facebook.android.FacebookError: An unknown error has occurred.
   09-06 10:50:42.240: W/System.err(352):   at com.facebook.android.Util.parseJson(Util.java:279)
    09-06 10:50:42.240: W/System.err(352):  at com.eheuristics.android.diegodeals.MainActivity$TestLoginListener.onComplete(MainActivity.java:146)
     09-06 10:50:42.240: W/System.err(352):     at  com.facebook.android.Facebook$1.onComplete(Facebook.java:354)
     09-06 10:50:42.240: W/System.err(352):     at com.facebook.android.FbDialog$FbWebViewClient.shouldOverrideUrlLoading(FbDialog.java:145)
     09-06 10:50:42.240: W/System.err(352):     at android.webkit.CallbackProxy.uiOverrideUrlLoading(CallbackProxy.java:216)
      9-06 10:50:42.240: W/System.err(352):     at android.webkit.CallbackProxy.handleMessage(CallbackProxy.java:323)
       09-06 10:50:42.240: W/System.err(352):   at android.os.Handler.dispatchMessage(Handler.java:99)
     09-06 10:50:42.240: W/System.err(352):     at android.os.Looper.loop(Looper.java:130)
     09-06 10:50:42.240: W/System.err(352):     at android.app.ActivityThread.main(ActivityThread.java:3683)
        09-06 10:50:42.251: W/System.err(352):  at java.lang.reflect.Method.invokeNative(Native Method)
      09-06 10:50:42.251: W/System.err(352):    at java.lang.reflect.Method.invoke(Method.java:507)
      09-06 10:50:42.251: W/System.err(352):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
      09-06 10:50:42.251: W/System.err(352):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597) 
```

09-06 10:50:42.251: W/System.err(352): at dalvik.system.NativeStart.main(Native Method)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T05:39:51.113

在您的代码中使用这一行：parameters.putString("access_token", "" + st);

```
 facebook1 = new Facebook(APP_ID);
    String st = get_token__(con);
    Bundle parameters = new Bundle();
    parameters.putString("message", message);
    parameters.putString("description", "topic share");

    parameters.putString("access_token", "" + st);

    facebook1.request("me");
    String response = facebook1.request("me/feed", parameters, "POST");
    Log.d("Tests--->*************", "got response: " + response); 
```

试试这个它可能会帮助你。

* * *

编辑的答案

从这里下载代码：[clickme](http://dj-android.blogspot.in/2012/05/share-text-to-facebook-twitter-android.html)

更改该代码中的 APP_ID。

在 share_text.java Activity 中更改以下方法

```
public static void postToWall(String message, Context con) {

        facebook1 = new Facebook(APP_ID);
        String st = get_token__(con);
        Bundle parameters = new Bundle();

        parameters.putString("caption", "I Like DJ Call Manager!" + "\n\n"
                + "https://www.facebook.com/DjCallManager");
        parameters.putString("url",
                "http://www.mspy.com/blog/wp-content/uploads/2012/04/1327425781_1.jpeg");

        if (st.length() > 0) {
            parameters.putString("access_token", "" + st);
        }
        try {

            String response = facebook1
                    .request("me/photos", parameters, "POST");
            Log.d("Tests--->*************", "got response: " + response);

            if (response == null
                    || response.equals("")
                    || response.equals("false")
                    || response
                            .equalsIgnoreCase("{\"error\":{\"message\":\"An active access token must be used to query information about the current user.\",\"type\":\"OAuthException\",\"code\":2500}}")) {
                showToast("Blank response. please loginf again in facebook",
                        con);
                clear_fb_data(con);
            } else {
                showToast("Message posted to your facebook wall!", con);
            }
        } catch (Exception e) {
            showToast("Failed to post to wall!", con);
            e.printStackTrace();
        }
    } 
```

我使用 URL 共享照片只是更改该行以共享文件代码。

# jquery - 如何将 php 数组回显到 jquery $.each 方法

> ID：12292509
> 
> 赞同：0
> 
> 时间：2012-09-06T03:20:49.573
> 
> 标签：jquery

如何将 php 数组回显到 jquery $.each 函数？

这是我到目前为止在 php 中尝试过的...

```
 $index = 0;

                  while(!feof($file))
                  {
                     $singleLine = fgets($file);
                     $totalLines[$index] = $singleLine;

                     ++$index;
                  }
                  echo $totalLines; 
```

这是我在 jquery 中读回它的方式...

```
 $.post("sendFile.php",{fileName: sendFileName}, function(data)
       {
              $.each(data, function(index, value)
              {
                        alert(value);
              });
       }); 
```

输出给了我 Array...当它应该给我每个数组元素的 Test1、Test2、Test3 时...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T03:22:20.480

使用[json_encode](http://php.net/manual/en/function.json-encode.php)对数据进行编码。

```
echo json_encode($totalLines); 
```

您的 php 代码可以简单地编写如下：（使用[文件](http://jp.php.net/manual/en/function.file.php)函数将整个文件读入数组）

```
echo json_encode(file($file));
// or if need to skip the empty line and new line char
echo json_encode(file($file, FILE_IGNORE_NEW_LINES | FILE_SKIP_EMPTY_LINES)); 
```

# ruby-on-rails - 是否有任何 Rails 身份验证 gem 实现了此处概述的安全加盐哈希：crackstation.net/hashing-security.htm

> ID：12292510
> 
> 赞同：0
> 
> 时间：2012-09-06T03:20:57.183
> 
> 标签：ruby-on-rails, security, authentication

我正在尝试选择一个使用此站点概述的最佳实践方法实现强加盐散列算法的 Rails 登录/身份验证 gem：

[http://crackstation.net/hashing-security.htm](http://crackstation.net/hashing-security.htm)

你知道哪些 Rails gem 可以支持完全登录/注销/密码恢复+这些哈希要求吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T03:39:00.907

您应该检查`has_secure_password`类方法。

[http://api.rubyonrails.org/classes/ActiveModel/SecurePassword/ClassMethods.html](http://api.rubyonrails.org/classes/ActiveModel/SecurePassword/ClassMethods.html)

这是关于它的railscast：

[http://railscasts.com/episodes/270-authentication-in-rails-3-1](http://railscasts.com/episodes/270-authentication-in-rails-3-1)

# jqgrid - 在 jQGrid 删除（delGridRow）后显示消息的 JSON 格式？

> ID：12292511
> 
> 赞同：0
> 
> 时间：2012-09-06T03:21:01.197
> 
> 标签：jqgrid

我正在创建一个新的 jqgrid 表，我的问题是如何在 JSON 中格式化响应以在[afterSubmit 事件](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3aform_editing#delgridrow)中提供响应文本？例如，它的格式是这样的：`{'response': true}`?

无论如何，我需要这个来向用户显示记录是否已成功删除的消息。比如“记录已被删除”或“记录不能被删除”。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T03:28:06.077

我很确定您可以根据需要对其进行格式化。我个人使用类似的东西

```
[
    {"success": true}, 
    {"response": "Record has been deleted"}
] 
```

详细信息在于您如何阅读消息并在响应中处理它。

所以在你的`afterSubmit`事件函数中，你可以按如下方式处理数据

```
afterSubmit : function(response, postdata) 
{ 
    var data = JSON.parse(response.responseText); 

    if(data[0].success){

        // do stuff for success;

    } else {

        // do stuff for failure;

    }
}; 
```

# java - 如何在 Java 中为数组覆盖等于？

> ID：12292513
> 
> 赞同：2
> 
> 时间：2012-09-06T03:21:45.347
> 
> 标签：java

我希望覆盖 int[] 数组的等号。这样以下将是正确的

```
int[] a = {1,2,3};
int[] b = {1,2,3};
System.out.println(a.equals(b)); 
```

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-06T03:37:01.987

覆盖`equals`of 的方法`int[]`既不可能也没有必要。您可以使用[Arrays.equals(int[], int[])](http://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html#equals%28int%5B%5D,%20int%5B%5D%29)来实现您想要的功能。

```
int[] a = {1,2,3};
int[] b = {1,2,3};
System.out.println(Arrays.equals(a, b)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T03:24:31.863

数组是 Java 的低级构造，因此您不能创建子类，因此您不能覆盖方法。但是您可以使用 java.util.List 而不是数组。现代 JRE 在数组和列表方面表现出相同的性能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T04:08:48.887

这里的其他答案是正确的，因为您实际上应该只使用`Arrays.equals()`或切换到使用 a`List<Integer>`而不是 a `int[]`。

但是，您想要做的*几乎*可以使用反射和`javassist.util.proxy.ProxyFactory`. 这是一些或多或少可以解决问题的示例代码：

```
public static void main(String[] args) throws Exception {
    int[] test = {0, 1, 2, 3};
    int[] empty1 = {};
    int[] empty2 = {};

    Class clss = int[].class;
    ProxyFactory factory = new ProxyFactory();
    factory.setSuperclass(clss);
    factory.setFilter(new MethodFilter() {
         public boolean isHandled(Method m) {
             // ignore finalize()
             return !m.getName().equals("finalize");
         }
     });
    factory.setHandler(new IntArrayEqualsHandler());

    Class newArrayClass = factory.createClass();

    int[] specialArray = (int[])newArrayClass.newInstance();
    System.out.println(empty1.equals(empty2));
    System.out.println(specialArray.equals(empty1));
    System.out.println(specialArray.equals(empty2));
    System.out.println(specialArray.equals(test));
}

private static class IntArrayEqualsHandler implements MethodHandler {
    @Override
    public Object invoke(Object thisObj, Method method, Method original, Object[] params) throws Throwable {
        if (method.getName().equals("equals")) {
            int[] left = (int[])thisObj;
            int[] right = (int[])params[0];
            return Arrays.equals(left, right);
        }
        return original.invoke(thisObj, params);
    }

} 
```

不幸的是，这不起作用，因为在语言`int[].class`中声明为`final`，因此即使使用反射也无法扩展它。至少据我所知。您可以使用一些技巧[从字段中删除“最终”修饰符](https://stackoverflow.com/questions/3301635/change-private-static-final-field-using-java-reflection)，但似乎没有等效的技巧可用于`final`从整个类中删除修饰符。

如果有这样的事情，您可以使用上面的代码或类似的代码，`int[]`在运行时生成一个自定义子类，以实现您所需的`equals()`行为。

真的，虽然这比它的价值更麻烦，尤其是当您开始研究如何在项目的其余部分中实际*使用自定义子类时。**所以所有的事情都*认为你最好使用`Arrays.equals()`or `List<Integer>`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-06T03:45:41.733

您不能直接覆盖数组上的 equals - 数组是 Java 中的原始构造，您不能覆盖作用于它们的方法或运算符。

您应该考虑使用`ArrayList`s 而不是数组 - ArrayLists 提供了一个`equals()`可以按照您的要求工作的实现（以及数组没有的许多其他有用功能，例如向列表添加新元素的能力等）

# javascript - 命名一个函数（而不是让它匿名）和创建一个对它的引用有什么区别？

> ID：12292514
> 
> 赞同：2
> 
> 时间：2012-09-06T03:22:03.737
> 
> 标签：javascript, function, variables, anonymous-function

在我开始的另一个线程的评论中，有人说：

> @adlwalrus 是的。试试这个： var foo = function bar(){}; 控制台.log(foo); 但是请注意， bar 只是函数名称（**这意味着我自己不确定**）而不是对它的引用，因此**您不能通过执行 bar() 来调用它**。并且分配（甚至命名函数）与声明函数不同。提升（撞到范围顶部）仅适用于声明，分配将保持不变。– 瓦伦蒂娜斯 6 小时前

如果你不能用函数名来调用它，它的用途是什么`bar()`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T03:33:33.907

您指的是*命名函数表达式*。规范要求此类函数的名称只能在新函数的范围内使用。[规格报价](http://bclary.com/2004/11/07/#a-13)：

> 可以从 FunctionExpression 的 FunctionBody 内部引用 FunctionExpression 中的标识符，以允许函数递归调用自身。但是，与 FunctionDeclaration 不同，FunctionExpression 中的标识符不能被引用，也不影响包含 FunctionExpression 的范围。

另一方面，该表达式的*结果*是对新函数的引用，可以在任何地方保存和引用。

这里有很多细节：

*   [http://kangax.github.com/nfe/#named-expr](http://kangax.github.com/nfe/#named-expr)

我读了整本书。

至于好处，另一个是它使它们更容易在调试器中识别。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-06T03:26:54.103

用于调用自身的函数。

```
var x = function y(val){
            if (val){
                console.log(val);
                y(val-1);
            }
        }; 
x(5);
> 3  
> 2  
> 1 
y(3); 
> ReferenceError: y is not defined 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-06T04:23:13.287

在 JavaScript 中创建函数有两种方法，“函数声明”和“函数表达式”。我相信 Doug Crockford 解释得最好，他指出除非“函数”是给定行上的第一组字符，否则您正在执行函数表达式（而不是声明）。

函数声明是挑剔的生物。当你看到它们时，你会认出它们。它们看起来像这样：

```
function foo() { /* ... */ } 
```

它们总是被赋予一个名称（这是必需的），并且该名称的局部范围仅限于声明函数的词法上下文。因此，如果您在全局上下文中执行函数声明，则可以通过其名称全局引用该函数。如果您在函数内执行此操作，则只能在该函数内以及在该函数内声明的任何函数内引用该函数的名称。

我认为这种声明函数的方法（很少被评论）最重要的方面是函数初始化被提升到当前词法上下文的顶部。因此，您永远不应该*在*条件中使用函数声明，例如：

```
//DON'T DO THIS!
if (x) {
    function foo() { return 1; }
} else {
    function foo() { return 2; }
}

foo(); //will always be 2, regardless of the value of x. 
```

函数表达式略有不同。通常，它们被直接分配给一个变量，如下所示：

```
var foo = function() { /* ... */ }; 
```

这与上面的函数声明几乎相同，只是没有提升初始化。因此，您可以执行以下操作：

```
var foo;
if (x) {
    foo = function() { return 1; };
} else {
    foo = function() { return 2; };
}

foo(); //will be 1 or 2, depending on the truthy-ness of x. 
```

所以，回到最初的问题。函数表达式也可以有一个名称，尽管它不是必需的，并且它不限于声明函数的上下文（与函数声明一样）。相反，它被限定在函数自己的词法上下文中。这在某些情况下非常有用。我个人最喜欢的是这种模式：

```
(function foo() {
    //Do something.

    setTimeout(foo, 1000);
}());

foo; //undefined 
```

由于“函数”一词之前的括号，这是一个函数表达式，名称仅在内部范围内。但这没关系，因为我们只需要在内部调用它（通过`setTimeout()`）。结果是该函数将立即执行一次，然后在完成执行后每隔一秒左右重新执行一次。这比使用更安全，`setInterval()`因为它会等到执行完毕后再重新调度自身，从而防止可能导致错过执行和/或 JavaScript 线程“支配”的重叠。

本质上，命名函数表达式的使用是有限的，但是当您需要它时，它非常强大。

# php - PHP中获取邮件的函数

> ID：12292519
> 
> 赞同：-1
> 
> 时间：2012-09-06T03:22:54.537
> 
> 标签：php, email

是否可以在 php 中编写这样的脚本来连接到像 gmail.com 这样的邮件服务器并从中获取邮件？

也许这听起来很幼稚，但也许有一个功能可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T03:26:03.600

PHP 中有[IMAP 库](http://php.net/manual/en/book.imap.php)。一个快速的谷歌搜索[给了我一个](http://davidwalsh.name/gmail-php-imap)如何使用它的例子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T03:26:11.720

是的，请查看 IMAP [http://www.php.net/manual/en/book.imap.php](http://www.php.net/manual/en/book.imap.php)

# ios - 更改所选索引选项卡时关闭模态视图不起作用

> ID：12292520
> 
> 赞同：1
> 
> 时间：2012-09-06T03:22:55.080
> 
> 标签：ios, modalviewcontroller

我有一个带有通过模型视图控制器调用的菜单的 tabBar 应用程序。然后当你选择一个选项。我希望它在更改 tabBAr 的 SelectedIndex 时关闭。

这是我的代码片段：

FirstTabBarController：

这就是所谓的“菜单”

```
-(IBAction)pressedButton {

    GWDNativeViewController *secondView = [[GWDNativeViewController alloc] initWithNibName:nil bundle:nil];
    [secondView setModalTransitionStyle:UIModalTransitionStyleCoverVertical];
    [self presentModalViewController:secondView animated:YES];
} 
```

这是在 GWDNativeViewController（菜单）视图中关闭的代码：

```
-(IBAction)dismissThisView {

    //Insert code to dismiss here
    [self dismissModalViewControllerAnimated:YES];
    [(UITabBarController *)self.parentViewController setSelectedIndex:3];

} 
```

该行：

```
[(UITabBarController *)self.parentViewController setSelectedIndex:3]; 
```

似乎没有做的伎俩..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T03:52:17.743

试试这个：

```
YourAppDelegate *appDelegate = (YourAppDelegate *)[[UIApplication sharedApplication] delegate];

appDelegate.tabBarController.selectedIndex = 3; 
```

# javascript - 使用 JavaScript 操作 Razor 模型

> ID：12292521
> 
> 赞同：2
> 
> 时间：2012-09-06T03:22:58.947
> 
> 标签：javascript, asp.net, razor

我正在使用带有 Razor 视图引擎的 ASP.NET MVC 4。我正在尝试通过从我的视图中的模型中删除一个项目来从我的 webgrid 中删除一个项目。我认为的模型如下所示：

```
@model List<MiscCommon.Entities.Person> 
```

我尝试通过 javascript 从此列表中删除一个项目失败了：

```
function RemovePerson(personId) {
    alert(personId); // Test. This works.
    //var people = '@Model[0].FirstName'; // This is a string. I want the actual model.
    @foreach(var person in Model)
    {
        if (person.Id == @:personId) { // Remove row here }
    }
} 
```

在那个 javascript 函数中，我得到了这个人的正确 ID。如何从模型中删除它？（我希望当从模型中删除该行时，我的 webgrid 会更新。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T03:30:54.453

视图模型在服务器上执行时被处理。它与稍后在客户端上执行的 JavaScript 没有直接关联。您可以在 JS 中混合/匹配 Razor 表达式（正如您所做的那样），但 JS 不会知道模型作为对象的任何信息（除非您告诉它）。

如果您尝试操作一组 ID，您可以通过多种方式执行此操作：

*   将 data-* 属性添加到包含对象 ID 的表的每一行。

*   使用 Razor 创建一个 JS 数组声明，其中包含您的 ID 列表。渲染视图时，将渲染数组声明。

*   包含您需要的数据的隐藏字段

*   AJAX 动作链接

如果您真的想要客户端上的整个模型，您可以将其作为 JSON 字符串序列化到隐藏字段或作为脚本块内的对象文字。但是，通常有更好的方法。

您还可以查看[Knockout](http://knockoutjs.com/)，它（在我看来）更加强调客户端模型。不过，没有必要解决这个问题。

# javascript - JavaScript 中基本 for 循环和 for-in-loop 之间的区别

> ID：12292523
> 
> 赞同：8
> 
> 时间：2012-09-06T03:23:19.007
> 
> 标签：javascript, for-loop, for-in-loop

> **可能的重复：**
> [带有数组的 JavaScript “For ...in”](https://stackoverflow.com/questions/500504/javascript-for-in-with-arrays)

在哪些情况下使用

```
for (var i = 0; i < array.length; i++) 
```

不同于使用

```
for (var i in array) 
```

在 JavaScript 中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T03:26:56.690

```
for (var i = 0; i < array.length; i++) 
```

最适合遍历数组，按顺序访问所有数组元素。

在现代 javascript 引擎上，`array.forEach`通常更干净。

```
for (var i in object) // with object.hasOwnProperty 
```

用于遍历 OBJECT 的可枚举属性，包括继承的可枚举属性。订单不放心。尽管数组是一个对象，并且此方法对数组“有效”，但它并不理想，因为返回的属性可能没有任何特定的顺序。此外，如果在数组对象上放置了任何猴子补丁或垫片，它们可以显示在此处。

# jersey - JAX-RS 如何选择图像 mimetype？

> ID：12292524
> 
> 赞同：1
> 
> 时间：2012-09-06T03:23:32.797
> 
> 标签：jersey, jax-rs

有没有办法`Accept`为图像处理选择最好的 mimetype？

我有一个资源看起来像这样。

```
@GET
@Produces({"image/jpeg", "image/png"})
public Response readResizedImage(
    @Context Request request,
    @Context HttpHeaders httpHeaders,
    @QueryParam("width") final int width,
    @QueryParam("height") final int height) {

    final List<Variant> variants = Variant.mediaTypes(
        new MediaType("image", "jpeg"), new MediaType("image", "png")).build();

    // Why on earth variants is empty?
    if (!variants.isEmpty()) {
        final Variant variant = request.selectVariant(variants);
        LOGGER.log(Level.INFO, "{0}", variant.getMediaType().toString());
    }

    final List<MediaType> acceptableMediaTypes =
        httpHeaders.getAcceptableMediaTypes();
    for (MediaType acceptableMediaType : acceptableMediaTypes) {
        LOGGER.log(Level.INFO, "acceptableMediaType:{0}/{1}",
                   new Object[]{acceptableMediaType.getType(),
                                acceptableMediaType.getSubtype()});
    }

    return null;
} 
```

我用以下命令尝试了这个资源。

```
$ curl -v -H "Accept: */*" \
-H "Accept: image/*;q=0.2" \
-H "Accept: image/jpeg;q=0.5" \
-H "Accept: image/png;q=1.0" \
http://............. 
```

和服务器打印

```
acceptableMediaType:image/png
acceptableMediaType:*/*
acceptableMediaType:image/jpeg
acceptableMediaType:image/* 
```

问题：

**如何选择正确的（非通配符）mime 类型？**

我必须有一个用于操作图像字节以重新调整大小。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T12:00:42.270

如果你把它留给泽西岛，这是最简单的——即有两种方法，一种产生图像/png，另一种产生图像/jpeg。Jersey 将根据传入请求的接受标头中各个媒体类型的质量参数调用正确的。

# wpf - 将使用 backgroundworker 的方法替换为 async / tpl (.NET 4.0)

> ID：12292527
> 
> 赞同：14
> 
> 时间：2012-09-06T03:23:45.797
> 
> 标签：wpf, design-patterns, pattern-matching, task-parallel-library, backgroundworker

我的问题很多。自从我看到。NET 4.5，我印象非常深刻。不幸的是，我所有的项目都是 .NET 4.0，我没有考虑迁移。所以我想简化我的代码。

目前，我的大部分代码通常需要足够的时间来冻结屏幕，我执行以下操作：

```
BackgroundWorker bd = new BackgroundWorker();
bd.DoWork += (a, r) =>
    {
        r.Result = ProcessMethod(r.Argument);
    };
bd.RunWorkerCompleted += (a, r)  =>
    {
        UpdateView(r.Result);
    };

bd.RunWorkerAsync(args); 
```

老实说，我厌倦了它。当存在逻辑复杂的用户交互时，这将成为一个大问题。

我想知道，如何简化这个逻辑？（请记住，我使用的是 .Net 4.0）我注意到 google 的一些东西，但没有发现任何易于实现且适合我需要的东西。

我认为这个解决方案如下：

```
var foo = args as Foo;
var result = AsyncHelper.CustomInvoke<Foo>(ProcessMethod, foo);
UpdateView(result);

public static class AsyncHelper
{
    public static T CustomInvoke<T>(Func<T, T> func, T param) where T : class
    {
        T result = null;
        DispatcherFrame frame = new DispatcherFrame();
        Task.Factory.StartNew(() =>
        {
            result = func(param);
            frame.Continue = false;
        });

        Dispatcher.PushFrame(frame);

        return result;
    }
} 
```

我不确定对操作调度程序框架的影响。但我知道它会很好用，例如，我可以在控件的所有事件中使用它，而无需费心冻结屏幕。我对泛型、协变、逆变的知识有限，也许这段代码可以改进。

我想到了使用`Task.Factory.StartNew`and的其他东西`Dispatcher.Invoke`，但没有任何东西看起来有趣且易于使用。谁能给我一些光？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-10T18:03:30.457

您应该只使用任务并行库 (TPL)。关键是为更新 UI 的任何延续指定`TaskScheduler`当前的。`SynchronizationContext`例如：

```
Task.Factory.StartNew(() =>
{
    return ProcessMethod(yourArgument);
})
.ContinueWith(antecedent =>
{
    UpdateView(antecedent.Result);
},
TaskScheduler.FromCurrentSynchronizationContext()); 
```

除了在访问先行者的`Result`属性时进行一些异常处理之外，仅此而已。通过使用`FromCurrentSynchronizationContext()`来自 WPF 的环境 SynchronizationContext（即 DispatcherSynchronizationContext）将用于执行延续。这与 call 相同`Dispatcher.[Begin]Invoke`，但您完全从中抽象出来。

如果你想变得更“干净”，如果你控制 ProcessMethod 我实际上会重写它以返回 a`Task`并让它拥有它是如何旋转的（仍然可以在`StartNew`内部使用）。这样，您就可以将调用者从 ProcessMethod 可能想要自己做出的异步执行决策中抽象出来，而他们只需要担心链接延续以等待结果。

**2013 年 5 月 22 日更新**

应该注意的是，随着 .NET 4.5 的出现和 C# 中的异步语言支持，这种规定的技术已经过时了，您可以简单地依靠这些功能来执行特定任务`await Task.Run`，然后在 Dispatcher 线程上执行再次自动。所以是这样的：

```
MyResultType processingResult = await Task.Run(() =>
{
    return ProcessMethod(yourArgument);
});

UpdateView(processingResult); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T18:07:47.943

将始终相同的代码封装在可重用组件中怎么样？您可以创建一个实现 ICommand 的 Freezable，公开一个 DoWorkEventHandler 类型的属性和一个 Result 属性。在 ICommand.Executed 上，它将创建一个 BackgroundWorker 并连接 DoWork 和 Completed 的委托，使用 DoWorkEventHandler 的值作为事件处理程序，并以将其自己的 Result 属性设置为事件中返回的结果的方式处理 Completed .

您将在 XAML 中配置组件，使用转换器将 DoWorkEventHandler 属性绑定到 ViewModel 上的方法（我假设您有一个），并将您的 View 绑定到组件的 Result 属性，因此它会在 Result 时自动更新进行更改通知。

此解决方案的优点是：它是可重用的，并且仅适用于 XAML，因此您的 ViewModel 中不再有胶水代码来处理 BackgroundWorkers。如果您不需要后台进程报告进度，它甚至可能不知道它在后台线程上运行，因此您可以在 XAML 中决定是要同步还是异步调用方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T10:45:31.433

几个月过去了，但这对您有帮助吗？
[在没有 .NET Framework 4.5 的情况下使用 async/await](http://blogs.msdn.com/b/bclteam/archive/2012/10/22/using-async-await-without-net-framework-4-5.aspx)

# regex - 正则表达式获取url中的最后一个值

> ID：12292529
> 
> 赞同：0
> 
> 时间：2012-09-06T03:24:01.870
> 
> 标签：regex, apache

我需要从 URL 中获取最后一个值

以下 URL 场景：

`http://www.abc.com/aa/bb/cc`

`http://www.abc.com/aa/bb/cc?ab=1`

`http://www.abc.com/aa/bb/cc/`

`http://www.abc.com/aa/bb/cc/?ab=1`

从上面的 URL 列表中，我需要从 URL 正则表达式中取出 cc 以获取值 cc

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T03:37:57.977

这应该可以解决问题：

```
([^/?]+)(?=/?(?:$|\?)) 
```

在此处查看实际操作：[http ://regexr.com?322bq](http://regexr.com?322bq)

* * *

### 解释：

*   **`([^/?]+)`**- 匹配任何*不是*斜线或问号的字符。
*   **`(?=`**- 开始前瞻。
*   **`/?`**- 可选地匹配斜线。
*   **`(?:$|\?)`**- 要么匹配一个问号，要么断言我们已经结束了。
*   **`)`**- 关闭前瞻。

* * *

**注意：**在演示中，它也在`?`字符之后进行匹配，因为它正在执行全局搜索。不过，这不应该让你担心。

# algorithm - 生成所有结构上不同的具有 n 个叶子的完整二 叉树

> ID：12292532
> 
> 赞同：1
> 
> 时间：2012-09-06T03:24:08.950
> 
> 标签：algorithm, binary-tree, catalan

这是作业，我想起来有困难。请给我一些关于递归和DP解决方案的想法。非常感谢

生成并打印所有结构上不同的完整二叉树，其中 n 个叶子以点括号的形式出现，“完整”表示所有内部（非叶子）节点正好有两个子节点。

例如，有 5 棵不同的满二叉树，每棵树有 4 个叶子。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T06:52:51.603

在 Python 中，你可以这样做

```
def gendistinct(n):
    leafnode = '(.)'
    dp = []
    newset = set()
    newset.add(leafnode)
    dp.append(newset)
    for i in range(1,n):
        newset = set()
        for j in range(i):
            for leftchild in dp[j]:
                for rightchild in dp[i-j-1]:
                    newset.add('(' + '.' + leftchild + rightchild + ')')
        dp.append(newset)
    return dp[-1]

alltrees = gendistinct(4)
for tree in alltrees:
    print tree 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-01-12T15:46:48.243

另一个具有不同策略的 Python 示例。

这是递归的并使用生成器。它比这里的其他实现要慢，但应该使用更少的内存，因为一次只能在内存中存在一个列表。

```
#!/usr/bin/env python

import itertools

def all_possible_trees(n):
    if n == 1:
        yield 'l'
    for split in range(1, n):
        gen_left = all_possible_trees(split)
        gen_right = all_possible_trees(n-split)
        for left, right in itertools.product(gen_left, gen_right):
            yield [left, right]

if __name__ == '__main__':
    import sys
    n = int(sys.argv[1])
    for thing in all_possible_trees(n):
        print(thing) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T05:20:39.883

我没有看到一个明显的递归方法，但毫无疑问有一个。

相反，我会尝试动态编程方法。

请注意，根据您对完整树的定义，具有 n 个叶子的树具有 n-1 个内部节点。另请注意，可以通过在根部将两棵树连接在一起，左侧为 1 到 n-1 片叶子，右侧为 n-1 到 1 片叶子，从而从较小的树中生成树。

另请注意，各种大小的“树”可以存储为点括号字符串。要从这些构建新树，请连接（左，右）。

因此，从具有 1 个叶子的单棵树（即单个节点）开始。构建大小增加到 n 的树的列表。要构建 k-叶子树的列表，对于每个 j = 1 到 k-1，对于每个 j 个叶子的树，对于每个 kj 个叶子的树，连接以构建树（具有 k 个叶子）并添加到列表中。

在构建 n 叶树时，您可以将它们打印出来而不是存储它们。

有 5*1 + 2*1 + 1*2 + 1*5 = 14 棵树，有 5 片叶子。

有 14*1 + 5*1 + 2*2 + 1*5 + 1*14 = 42 棵树，有 6 片叶子。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-06T05:22:41.380

U can use recursion, on i-th step u consider i-th level of tree and u chose which nodes will be present on this level according to constraints: - there is parent on previous level - no single children present (by your definition of "full" tree)

recursion ends when u have exactly N nodes.

# input - 在 Lisp 中读取分隔输入

> ID：12292538
> 
> 赞同：2
> 
> 时间：2012-09-06T03:24:48.810
> 
> 标签：input, lisp

在 Common Lisp 中，我需要以实数列表的形式捕获用户输入。该列表以连续两个零结束。例如，`5.0 0 6.0 3 2.0 5 1.0 7 13.0 8 0 0`应该返回列表`(5.0 0 6.0 3 2.0 5 1.0 7 13.0 8)`。

我遇到了 function `read-delimited-list`，它以单个字符作为结束点。我可以停在一个*零*处，但我不确定如何扩展这个函数，而且我不知道另一个函数采用分隔字符串而不是字符。

*编辑*感谢接受的答案，我开发了以下内容：

```
(butlast (loop for y = -1 then x for x = (read stream) until (and (= 0 x) (= 0 y))
    collect x))) 
```

它对我来说似乎更具可读性（此时我公开承认我的 Lisp 眼睛只有 3 天），而且我不确定性能影响（`collect`在循环退出范围后追加或反转列表? 有没有更简单的方法来切掉最后一个元素，或者干脆不附加它？）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T03:53:52.407

对于这种简单的情况，您可以`read`在循环中使用，收集到目前为止读取的结果并在最后两个为零时停止。

```
(defun read-double-zero-terminated-list (stream)
  (do* ((prev -1 val)
        (val (read stream) (read stream))
        list)
       ((and (zerop prev) (zerop val)) (reverse (cdr list)))
     (push val list))) 
```

`read-delimited-list`旨在用于创建专用语法的情况，因此在这里可能有点过分了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T18:50:51.477

在 Common Lisp 中解析数字的最佳方法是使用库`parse-number`。如果您的用户输入可以逐行读取，您可以简单地将行拆分为空格并用于`parse-number`结果。

# node.js - 如何从外部模型中引用 Mongoose db？

> ID：12292544
> 
> 赞同：3
> 
> 时间：2012-09-06T03:25:33.287
> 
> 标签：node.js, mongodb, express, mongoose

我正在使用[DailyJS上的](http://dailyjs.com/2010/11/01/node-tutorial/)[Nodepad](https://github.com/alexyoung/nodepad/blob/master/app.js)教程。我已经分叉了它，并正在扩展它以用于我自己的目的。我遇到的一个问题是整个应用程序都写在文件中，我更喜欢将我的应用程序分开一点。我应该如何将 mongo 写入我的单独模型文件，因为与 mongoose 相关的所有内容都在.`app.js``app.js`

我需要将什么带入我的外部文件，以便它们能够正确连接到数据库并理解我的猫鼬模式？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T12:26:20.253

最简单的方法是在应用程序初始化时向 Mongoose 注册模型，然后当您想要使用它们时，只需从 Mongoose 检索它们，而不是再次要求“用户”。

您还可以通过打开 Mongoose 的默认连接来使事情变得更容易，除非您有特定要求，这意味着您必须手动管理每个连接。

像这样做：

**应用程序.js**

```
var mongoose = require('mongoose');
require('./models/user');
mongoose.connect('server', 'database'); 
```

**模型/user.js**

```
var mongoose = require('mongoose')
  , Schema = mongoose.Schema
  , ObjectId = Schema.ObjectId;

UserSchema = new Schema({
    email: {type: String, "default": ''},
    created_at: {type: Date, Date.now}
});

mongoose.model('User', UserSchema); // no need to export the model 
```

**其他任何地方...**

```
var mongoose = require('mongoose')
  , User = mongoose.model('User');

var u = new User({email: 'youremail@something.com'});
u.save(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-06T03:57:18.947

这是一个直接从[Gitpilot](http://gitpilot.com)中提取的示例：

**用户.js：**

```
var mongoose = require('mongoose')
  , Schema = mongoose.Schema
  , ObjectId = Schema.ObjectId; //not needed here, but may be needed in another model file

UserSchema = new Schema({
    email: {type: String, "default": ''},
    created_at: {type: Date, Date.now}
});

User = mongoose.model('users', UserSchema); //name of collection is 'users'

module.exports.User = User;
module.exports.Schema = UserSchema; 
```

然后在你的另一个文件中......

```
var mongoose = require('mongoose')
  , User = require('./user').User;

mongoose.connection.once('open', function() {
  var u = new User({email: 'youremail@something.com'});
  u.save();
});
mongoose.connect(); //default connect to localhost, 27017 
```

`User`注意：为简洁起见，从模型中删除了一些字段。希望这可以帮助。

# php - YII：如何在属性上显示相关的表字段？

> ID：12292545
> 
> 赞同：0
> 
> 时间：2012-09-06T03:25:33.873
> 
> 标签：php, yii

我是 YII 的新手，我有一个问题......我有一个像

```
Person {
   $id ; 
   $name ; 
   $address ; 
}

Car{
   $id ;
   $carLicenseNumber ; 
   $person_id ; // BELONGS TO PERSON 
} 
```

我有一个 CJuiAutoComplete 但我不知道如何在要更新时在字段上显示人名

```
$this->widget('zii.widgets.jui.CJuiAutoComplete', array(
    'model'=>$model,
    'id'=>'person',
    'name'=>'person',

    'attribute'=> 'person->name', // I WANT THIS but no idea how to do this ... 

    'source'=>$this->createUrl('person/suggestPerson'),
    'options'=>array(
        'delay'=>150,
        'minLength'=>2,
        'showAnim'=>'fold',
        'select'=>"js:function(event, ui) {
            $('#label').val(ui.item.label);
            $('#temp_person_id').val(ui.item.id);
        }"
    ),
    'htmlOptions'=>array(
        'size'=>'40'
    ),
)); 
```

如何在属性上显示人员->姓名？

注意：$model 是 Car 实例

我尝试使用临时变量，例如

$temp = $model->person->name ; 然后将 $temp 分配给 'attribute'=>$temp 它工作得很好......

我只想知道如何在文本字段或自动完成字段上分配相关字段的正确方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T05:58:11.997

在我在 Live Chat 上与一些 YII 开发人员聊天后，我找到了解决方案

```
$this->widget('zii.widgets.jui.CJuiAutoComplete', array(
    'model'=>$model->person, // change this to model->person instead of model
    'id'=>'person_name',
    'name'=>'person_name',

    'attribute'=> 'name', // just name

    'source'=>$this->createUrl('person/suggestPerson'),
    'options'=>array(
        'delay'=>150,
        'minLength'=>2,
        'showAnim'=>'fold',
        'select'=>"js:function(event, ui) {
            $('#label').val(ui.item.label);
            $('#temp_person_id').val(ui.item.id);
        }"
    ),
    'htmlOptions'=>array(
        'size'=>'40'
    ),
)); 
```

# javascript - Jsonp跨域ajax

> ID：12292553
> 
> 赞同：0
> 
> 时间：2012-09-06T03:26:18.650
> 
> 标签：javascript, jquery, ajax, jsonp

我正在开发一个使用 ajax 调用从服务器获取 html 的应用程序。当我在服务器上运行它时，一切正常。

但是当我在 localhost 上运行时，出现“Access-Control-Allow-Origin”错误。我环顾四周，似乎使用 jsonp 可能是解决方案。

所以，我的 ajax 调用看起来像这样：

```
$.ajax({
    url: url,
    dataType: 'jsonp',
    crossDomain: true,
    type: 'GET',
    success: function(data){
        // should put the data in a div
    },
    error: function(){
        //do some stuff with errors
    }
}); 
```

我从服务器获取 html，但我总是有这个错误：

```
Uncaught SyntaxError: Unexpected token < 
```

有没有办法将 jsonp 响应包装在 html 中？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T03:35:23.220

您不能使用 JSONP 来获取 HTML 文档。您需要将 HTML 包装在 JavaScript 变量中。JSONP 有一些非常具体的要求才能使其正常工作，包括回调函数/属性。如果您无法控制托管目标页面的服务器，您将无法使其正常工作。这是一项安全预防措施，可防止随机页面从您通过 AJAX 调用登录的站点窃取您的个人信息。

**更新**

我更彻底地阅读了你的问题。听起来您的问题是您处于一个没有相关资源的开发环境中。JSONP 不是答案，因为仅仅为了让您的页面在开发中工作而运行起来很麻烦。您应该创建目标 HTML 的本地副本并使用相对或服务器绝对 URL 来获取它，例如，`"/the/page/i/need.html"`而不是`"http://myserver.com/the/page/i/need.html"`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T03:32:42.963

如果要通过jsonp获取数据，那么服务器端需要支持jsonp。

没有办法只是改变`dataType`来获取数据。

如果服务器端不支持 jsonp，那么你需要在你的 localhost 中做一个代理。

# c++ - 如何在 C++ 中正确使用嵌套类？

> ID：12292554
> 
> 赞同：0
> 
> 时间：2012-09-06T03:26:24.527
> 
> 标签：c++

我正在学习 C++，我正在尝试更多地了解如何使用朋友键盘。

但是，我在头文件中使用嵌套类时遇到问题。

我知道头文件应该只用于声明，但我不想在其中包含一个 cpp 文件，所以我只使用一个头文件来声明和构建。

Anways，我有一个 main.cpp 文件，我希望严格使用它来创建类的对象并访问它的函数。

但是，我不确切知道如何在我的头文件中创建 FriendFunctionTest 函数，以便我可以使用 header Class 对象在 main.cpp 源文件中访问它，因为我试图理解“朋友”关键字。

这是我的标题代码：

```
#ifndef FRIENDKEYWORD_H_
#define FRIENDKEYWORD_H_

using namespace std;

class FriendKeyword
{
    public:
        FriendKeyword()
        {//default constructor setting private variable to 0
            friendVar = 0;
        }
    private:
        int friendVar;

    //keyword "friend" will allow function to access private members
    //of  FriendKeyword class
    //Also using & in front of object to "reference" the object, if
    //using the object itself, a copy of the object will be created
    //instead of a "reference" to the object, i.e. the object itself
    friend void FriendFunctionTest(FriendKeyword &friendObj);
};

void FriendFunctionTest(FriendKeyword &friendObj)
{//accessing the private member in the FriendKeyword class
    friendObj.friendVar = 17;

    cout << friendObj.friendVar << endl;
}

#endif /* FRIENDKEYWORD_H_ */ 
```

在我的 main.cpp 文件中，我想做这样的事情：

```
FriendKeyword keyObj1;
FriendKeyword keyObj2;
keyObj1.FriendFunctionTest(keyObj2); 
```

但显然它不起作用，因为 main.cpp 在头文件中找不到 FriendFunctionTest 函数。

我该如何解决这个问题？

我再次道歉，我只是想在线学习 C++。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T03:34:34.390

该`friend`关键字仅用于指定函数或其他类是否可以访问该类的私有成员。您不需要类继承或嵌套，因为`FriendFunctionTest`它是一个全局函数。全局函数在调用时不需要任何类前缀。

来源`friend`：http: [//msdn.microsoft.com/en-us/library/465sdshe (v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/465sdshe(v=vs.80).aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T03:46:44.120

你真的在这里谈论几个完全不同的事情。以下是其中两个的示例：

1）“朋友”：

*   [http://www.learncpp.com/cpp-tutorial/813-friend-functions-and-classes/](http://www.learncpp.com/cpp-tutorial/813-friend-functions-and-classes/)

    // 类声明 class Accumulator { private: int m_nValue; 公共：累加器（）{ m_nValue = 0; } void Add(int nValue) { m_nValue += nValue; }

    // 使 Reset() 函数成为此类的朋友 friend void Reset(Accumulator &cAccumulator); };

    // Reset() 现在是 Accumulator 类的朋友 void Reset(Accumulator &cAccumulator) { // 并且可以访问 Accumulator 对象的私有数据 cAccumulator.m_nValue = 0; }

2）“嵌套类”：

*   [http://publib.boulder.ibm.com/infocenter/comphelp/v8v101/index.jsp?topic=%2Fcom.ibm.xlcpp8a.doc%2Flanguage%2Fref%2Fcplr061.htm](http://publib.boulder.ibm.com/infocenter/comphelp/v8v101/index.jsp?topic=%2Fcom.ibm.xlcpp8a.doc%2Flanguage%2Fref%2Fcplr061.htm)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T03:57:51.000

朋友不是会员。这是一个很好的例子，说明如何在实践中使用“朋友”。

```
namespace Bar {

class Foo {

    public:
       // whatever...

    friend void swap(Foo &left, Foo &right); // Declare that the non-member function
                                             // swap has access to private section.
    private:
       Obj1  o1;
       Obj2 o2;
 };

 void swap(Foo &left, Foo &right) {
     std::swap(left.o1, right.o1);
     std::swap(left.o2, right.o2);
 }

} // end namespace Bar 
```

我们已经声明了一个比 std::swap 更有效的交换 Foo 的函数，假设类 Obj1 和 Obj2 具有有效的移动语义。（该死，你用那个绿色复选标记很快！:)）

知道因为交换例程由 Foo 对象（在本例中为两个）参数化并在与 Foo 相同的命名空间中声明，所以它成为 Foo 的公共接口的一部分，即使它不是成员也是有用的。该机制称为“依赖于参数的查找”（ADL）。

# sql - 在 VBA (Excel 2010) 中缓存以连接到 SQL Server 2008 Express

> ID：12292564
> 
> 赞同：2
> 
> 时间：2012-09-06T03:27:32.467
> 
> 标签：sql, sql-server-2008, caching, sql-server-express

我有一个 excel 2010。在 VBA 代码中，一个过程从 SQPEXPR 2008 获取数据。
重复调用，并且多次获取相同/过滤数据（这已经存在于 excel 文档中）。

它是应用缓存（用于提高性能）的一个很好的用例。

可能吗？是怎么回事？

SQL Native Client 用于连接数据库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T06:07:38.603

当您更新要缓存的基础数据时，还要存储更新日期。这可以手动或通过触发器完成。

当您在 Excel 中对主要数据执行查询时，还要在 Excel 电子表格中查询并存储上次更新的日期。

最后，当您从 Excel 执行数据刷新操作时，首先查询当前的最后更新日期是否与存储的最后更新日期相同。如果是这样，则无需刷新数据。

如果您的数据具有固有的“最后更新”日期，并且有任何类型的索引将此值作为其中的第一列，那么您已经将“最后更新日期”存储得很好 - 只需一次查找阅读最近的更新日期，您可以从中得出相同的优化。

```
SELECT TOP 1 DateChanged FROM dbo.YourTable ORDER BY DateChanged DESC; 
```

假设我在 上谈论的那个索引`DateChanged`，你有你的“表最后更新”日期。当然，还假设表上的每个操作都会在插入或更新时忠实地更新此日期，并且永远不会删除行，只是标记为不活动（否则您将不知道删除行）。

无论哪种方式 - 显式保存单独的最后更新日期或隐式使用列，您现在都可以缓存数据。

它可能会帮助您考虑浏览器和 Web 服务器如何执行此任务，这与我所概述的几乎完全相同：被请求的文件具有修改日期，并且此数据首先与客户端浏览器交换。只有当文件的日期比浏览器的缓存副本更新时，浏览器才会请求实际的文件内容。

# php - 来自子查询的mysql查询一直挂起

> ID：12292565
> 
> 赞同：0
> 
> 时间：2012-09-06T03:27:35.523
> 
> 标签：php, mysql

您好，我有一个 mysql 数据库，我想要的基本上是从第一个表查询中获取第二个表的值

我想出了这样的事情，但没有工作。

```
select src, dst_number, state, duration 
from cdrs, area_code_infos
where SUBSTRING(cdrs.src,2,3) = area_code_infos.`npa`; 
```

请帮我弄清楚这一点。我曾尝试在 PHP 中让多个查询一个接一个地运行，但是当我在等待 45 分钟后加载页面时，我放弃了。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T03:58:34.797

我假设这些表非常大，而且您也在进行未索引的查询.. 基本上必须为每一行计算子字符串。

每当您进行连接时，您都希望确保两个连接的字段都被索引。

一个选项是创建另一个包含子字符串计算的列，然后在其上创建一个索引。

但是，更好的选择是拥有一个 areaCodeInfosID 列并将其设置为 area_code_infos 表的外键

# javascript - 更改已保存 HTML 文件的 URL

> ID：12292575
> 
> 赞同：0
> 
> 时间：2012-09-06T03:29:35.880
> 
> 标签：javascript, html

我是 HTML 新手，所以这个问题可能听起来有点蹩脚。无论如何，我的桌面上有一个保存的网页，当我在谷歌浏览器中打开它时，我希望它显示一个特定的 URL，而不是它的当前位置。有什么想法可以让这个工作吗？我尝试使用 history.pushState 但我不知道为什么它不起作用。我现在创建了一个简单的页面来测试它：

```
<html>
<head>
<script>
function setURL()
{
    history.pushState("Test","page2", "www.test.com");
}
</script>
</head>
<body>

<button type="button" onclick="setURL()">Set Url</button>

</body>
</html> 
```

任何帮助将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T03:36:40.457

我想你误解了它是如何工作的。它用于在同一域上更改页面位置，而无需重新加载内容。例如：你在索引上。然后你点击“关于”页面，它会将 url 从 更改`www.hello.com`为`www.hello.com/about`。

使用额外的 JS，您可以让它加载更改以使其看起来像 about 页面而不加载整个内容（但这与您想要的内容无关；只是解释它的应用程序。）

它不允许完整的 URL 覆盖，并且您的桌面文件不被视为与您的网站相同的域（安全限制）。

如果这是为了愚弄某人：你将无法做到。

# javascript - 如何在加载 iframe 位置 url 之前捕获它？

> ID：12292576
> 
> 赞同：1
> 
> 时间：2012-09-06T03:29:59.977
> 
> 标签：javascript, jquery, html, iframe

我有一个不受我控制的 iFrame，它有一个初始的已知源 URL。当点击 iframe 中的链接时，url 和内容会发生变化，但我想在加载之前捕获该位置的变化，甚至可能中断该加载。

我知道我可以像这样捕获 iframe 的位置数据：

```
$('iframe').on('load',function() { var location = this.contentWindow.location.href; } 
```

但是有没有办法在加载之前捕获位置，无论是使用jQuery（首选）还是原始javascript？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T03:46:51.733

没有广泛支持的方法来监视 iframe 的`.src`更改。某些版本的 IE 具有 propertyChanged 事件，但其他浏览器不支持该事件。

如果可以更改 iframe 的链接`.src`是已知的并且可以访问（不在跨域 iframe 中），那么您可以在这些链接上添加自己的点击处理程序，并`.src`在处理默认点击后检查 iframe。根据页面的详细信息，您可以只检查自己的事件处理程序，或者您可能需要设置一个短计时器并在其他事件处理程序运行后检查。

# visual-studio-2010 - 如何通过 nuget powershell 脚本重新加载 Visual Studio 项目

> ID：12292577
> 
> 赞同：2
> 
> 时间：2012-09-06T03:30:03.970
> 
> 标签：visual-studio-2010, powershell, nuget, envdte

在解决方案资源管理器中，“DependentUpon”项目项通常被禁用为其他项的子项（例如 web.config / web.Debug.config）。我遇到的问题是，当在包安装时通过 nuget/powershell 动态添加项目时，解决方案资源管理器不会重新加载项目，因此项目不会显示为依赖项。手动关闭并重新打开解决方案或卸载/重新加载项目可解决问题。我想将 Project Reload 作为 install.ps1 powershell 脚本的一部分自动化，但是当我这样做时，我得到“Project Unloaded”错误并且 nuget 回滚安装。我认为这是因为我知道如何获取 Reload 上下文菜单的唯一方法是先卸载项目。

我正在寻找在此调用之后调用的对象。我想如果我可以直接执行，我就不必先卸载项目。

```
$dte.ExecuteCommand("Project.ReloadProject") 
```

这是在解决方案资源管理器中卸载/重新加载项目的完整代码

```
# Reload a project thru dte/SolutionExplorer Window 
# using Unload and Reload Context Menus.

$project = Get-Project
$shortpath = $dte.Solution.Properties.Item("Name").Value + "\" + $project.Name

#following GUID = Constants.vsWindowKindSolutionExplorer
#magic 1 = vsUISelectionType.vsUISelectionTypeSelect
$dte.Windows.Item("{3AE79031-E1BC-11D0-8F78-00A0C9110057}").Activate()
$dte.ActiveWindow.Object.GetItem($shortpath).Select(1)
$dte.ExecuteCommand("Project.UnloadProject")
$dte.ExecuteCommand("Project.ReloadProject") 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-07-01T15:07:01.050

我通过“触摸”项目文件并因此触发 Visual Studio 来提示用户在包管理器关闭后重新加载修改后的项目来解决这个问题。所以我的 Install.ps1 文件如下所示：

```
param($installPath, $toolsPath, $package, $project)

# if there isn't a project file, there is nothing to do
if (!$project) { return }

# Do some stuff here

$project.Save()

# Touch the file to force a project reload
$(get-item $project.FullName).lastwritetime=get-date 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T15:24:00.377

这里回答了类似的问题： [VS 2010 中是否有一个设置允许它在项目文件更改后恢复打开的文件？](https://stackoverflow.com/questions/3783648/is-there-a-setting-in-vs-2010-that-will-allow-it-to-recover-open-files-after-a-p) 但是，它并不表示可以在不先调用 unload 的情况下调用 reload，并且它不提供无需通过 dte.execute 命令直接调用的机制。

# c# - 追加和读取文本文件

> ID：12292578
> 
> 赞同：2
> 
> 时间：2012-09-06T03:30:07.050
> 
> 标签：c#

环境：欢迎任何 .Net 框架。我有一个被写入 24/7 的日志文件。

我正在尝试创建一个将读取日志文件并处理数据的应用程序。

有效读取日志文件的最佳方法是什么？我想用 FileSystemWatcher 之类的东西监视文件。但是，如何确保在我的应用程序处理数据后不会读取相同的数据？或者说应用程序由于某种未知原因中止，它将如何从上次中断的地方继续？

日志文件中的有效负载周围通常有一个页眉和页脚。也许内容中还有一个 id 字段。虽然还不确定 id 字段是否存在。

我还想象可能将读取的行数保存在某处，以将其用作书签。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T04:37:17.693

它记录到文件是否有原因？文件很棒，因为它们易于使用，并且作为最小的公分母，出错的可能性相对较小。但是，文件是有限的。正如您所说，当您读取文件时，不能保证对文件的写入会完成。写入日志的多个应用程序可能会相互干扰。没有简单的排序或过滤机制。日志文件可能会很快增长得非常大，并且没有简单的方法可以将旧事件（例如超过 24 小时的事件）移动到单独的文件中以进行备份和保留。

相反，我会考虑将日志写入数据库。表结构可以非常简单，但您可以获得事务的优势（因此您可以轻松提取或备份）并使用几乎普遍理解的语法进行搜索、排序和过滤。如果您担心负载峰值，请使用消息队列，例如用于 SQL Server 的[http://msdn.microsoft.com/en-us/library/ms190495.aspx 。](http://msdn.microsoft.com/en-us/library/ms190495.aspx)

为了使转换更容易，请考虑使用[log4net](http://logging.apache.org/log4net/)之类的日志框架。它将大部分内容从您的代码中抽象出来。

另一种选择是使用[syslog](http://www.syslog.org/)之类的系统，或者，如果您有多个服务器和大量日志，请使用[flume](https://github.com/cloudera/flume/wiki)。通过将日志文件移出源计算机，您可以更有效地在不同的计算机上存储或检查它们。但是，对于您当前的问题，这些可能是矫枉过正。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T04:04:16.327

出于显而易见的原因，读取文件的全部内容以及从日志文件中删除行（在将它们加载到您的应用程序之后）是不可能的。

我能想到的部分解决方案是拥有一个小型数据库（可能比成熟的 MySQL/MS SQL/PostgreSQL 实例小得多）并使用从日志文件中读取的内容填充表。我很确定即使断电然后机器再次启动，大多数关系数据库应该能够轻松恢复它的状态。此解决方案需要一些可用于识别日志文件中的行的数据（例如：记录操作的确切时间、发生操作的机器等）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T03:43:00.840

好吧，你必须自己找出你的特殊情况的魔法。如果您要使用众所周知的文本编码，它可能非常简单。查看 System.IO.StreamReader 和它的 ReadLine()、DiscardBufferedData() 方法和 BaseStream 属性。您应该能够记住您在文件中的最后一个位置并稍后回到该位置并再次开始阅读，因为您确定该文件只是附加的。不过，还有其他事情需要考虑，对此没有统一的通用答案。

就像一个天真的例子（您可能仍然需要进行很多调整才能使其正常工作）：

```
 static void Main(string[] args)
    {
        string filePath = @"c:\log.txt";
        using (var stream = new FileStream(filePath, FileMode.Open, FileAccess.Read, FileShare.Read))
        {
            using (var streamReader = new StreamReader(stream,Encoding.Unicode))
            {
                long pos = 0;
                if (File.Exists(@"c:\log.txt.lastposition"))
                {
                    string strPos = File.ReadAllText(@"c:\log.txt.lastposition");
                    pos = Convert.ToInt64(strPos);
                }
                streamReader.BaseStream.Seek(pos, SeekOrigin.Begin); // rewind to last set position.
                streamReader.DiscardBufferedData(); // clearing buffer
                for(;;)
                {
                    string line = streamReader.ReadLine();
                    if( line==null) break;

                    ProcessLine(line);
                }
                // pretty sure when everything is read position is at the end of file.
                File.WriteAllText(@"c:\log.txt.lastposition",streamReader.BaseStream.Position.ToString());
            }
        }
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-06T04:18:34.027

我认为您会发现 File.ReadLines(filename) 函数与 LINQ 结合使用对于这样的事情非常方便。ReadAllLines() 会将整个文本文件作为 string[] 数组加载到内存中，但 ReadLines 将允许您在遍历文件时立即开始枚举行。这不仅可以节省您的时间，而且可以将内存使用率保持在非常低的水平，因为它一次处理每一行。使用语句很重要，因为如果该程序被中断，它将关闭文件流，刷新写入器并将未写入的内容保存到文件中。然后，当它启动时，它将跳过所有已读取的文件。

```
int readCount = File.ReadLines("readLogs.txt").Count();
using (FileStream readLogs = new FileStream("readLogs.txt", FileMode.Append))
using (StreamWriter writer = new StreamWriter(readLogs))
{
     IEnumerable<string> lines = File.ReadLines(bigLogFile.txt).Skip(readCount);
     foreach (string line in lines)
     {
         // do something with line or batch them if you need more than one
         writer.WriteLine(line);
     }
} 
```

正如 MaciekTalaska 提到的，如果这是 24/7 写入的内容并且会变得非常大，我强烈建议使用数据库。文件系统根本不具备处理这种容量的能力，您将花费大量时间来尝试发明数据库可以轻而易举地完成它的解决方案。

# php - PHP 脚本不接受 AJAX 数据

> ID：12292581
> 
> 赞同：0
> 
> 时间：2012-09-06T03:30:28.703
> 
> 标签：php, ajax

这真的很奇怪。我正在尝试向服务器提交数据并让 PHP 脚本解析数据，然后发回响应。正在发送格式正确的 URL：

```
http://localhost/ajax/test.html?row=rec_no_1 
```

，但服务器似乎没有响应来自 PHP 脚本的内容，尽管返回码为 200。事实上，开发者工具（在 Google Chrome 中）并没有说明 PHP 文件的任何内容。AJAX“数据”语句的格式必须正确，否则我将无法获得正确的 URL。POST（而不是 GET）没有帮助。

如果我将 AJAX 数据更改为字符串，那么它工作正常。这意味着 AJAX 数据有问题。但鉴于 URL 的格式正确并且确实会根据我选择的行而改变，我无法理解是什么。

有任何想法吗？

这是Javascript：

```
$(document).ready(function() { 
$(".submit").click(function() {

$.ajax({
        type: 'GET',
        url: 'getTable.php',
        dataType: 'html',
        data: {row: $('input[type='checkbox']:checked').val()},
        //data: {row: 'rec_no_2'},
        success: function($result) {
    $('.tableHolder').text($result);
    }
    });
    return false;
});
}); 
```

这是PHP代码：

```
<?php
if (isset($_GET['row'])) {
    $tableRow = $_GET['row'];
    echo $tableRow;
}
else
        echo 'TEST';
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T21:01:19.587

您的语法不正确：

```
$('input[type='checkbox']:checked').val() 
```

您应该在 周围使用双引号`checkbox`：

```
$('input[type="checkbox"]:checked').val() 
```

无论如何，`console.log( $('input[type="checkbox"]:checked').val() )`在 ajax 调用之前做一个只是为了找出正在发送的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T20:12:23.637

尝试将您的 javascript 文件移动到服务器。Ajax 不适用于跨域。您正在本地主机上运行 javascript 文件并尝试从实时服务器获取信息。将 php 和 javascript 文件保存在同一服务器上，无论是 live 还是 localhost。它会正常工作。

还有一件事，尝试更改 ajax 请求的 url 参数。尝试完整的 url 或尝试在您的文件名之前放置或不放置斜杠 /。

# git - 如果未设置用户电子邮件，我如何进行 git 块提交？

> ID：12292582
> 
> 赞同：22
> 
> 时间：2012-09-06T03:30:29.963
> 
> 标签：git

我有单独的电子邮件地址用于工作项目和开源项目，我想确保为每种类型的项目使用正确的电子邮件地址。

显然，解决方案是适当地设置存储库特定的配置，不幸的是我一直忘记设置它，直到我提交了一些，所以我使用全局 user.email 配置，如果这与我的匹配就很好工作，但不是那么好。

如果 user.email 没有在任何地方设置，git 只需将本地用户名和主机挤在一起组成一个（对于台式机来说不是那么棒）；我希望它只是阻止提交。我不认为钩子会起作用，因为我希望这发生在新的和克隆的回购中——如果我手动将钩子复制到回购中，我可能应该设置配置。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-09-06T04:15:11.640

新更新（2016 年 2 月，适用于 git 2.8）

git 2.8（2016 年 3 月）将添加一个新的解决方案：

请参阅[Dan Aloni (](https://github.com/da-x) [)的](https://github.com/da-x)[提交 4d5c295](https://github.com/git/git/commit/4d5c2956969a6690db2bbb2f3ff40459c09d7646)（2016 年 2 月 6 日） 。 帮助者：[Eric Sunshine (](https://github.com/sunshineco) [)](https://github.com/sunshineco)。 请参阅[Jeff King (](https://github.com/peff) [)的](https://github.com/peff)[提交 59f9295](https://github.com/git/git/commit/59f929596b611d88270ac0fd3ea132b32d66d460)（2016 年 2 月 4 日） 。 帮助者：[Eric Sunshine (](https://github.com/sunshineco) [)](https://github.com/sunshineco)。^(（由)^([Junio C Hamano 合并 --](https://github.com/gitster)) ^([--](https://github.com/gitster))^在^([提交 c37f9a1](https://github.com/git/git/commit/c37f9a1bc38cad56c9eca40014802e7cd822c21c))^(中，2016 年 2 月 17 日）)[`da-x`](https://github.com/da-x)
[`sunshineco`](https://github.com/sunshineco)
[`peff`](https://github.com/peff)
[`sunshineco`](https://github.com/sunshineco)
^([`gitster`](https://github.com/gitster))

> ## `ident`：为不应该猜到的时间添加`user.useConfigOnly`布尔值`ident`
> 
> 以前是这样的：

```
git config --global user.email "(none)" 
```

> 是人们强迫自己`user.email`在每个存储库中设置的一种可行方式。
> 这对于拥有多个电子邮件地址的人很有帮助，针对不同的克隆定位不同的电子邮件地址，因为它禁止 git 创建提交，除非`user.email`在 per-repo 配置中将配置设置为正确的电子邮件地址。
> 
> 然而，最近的更改[19ce497](https://github.com/git/git/commit/19ce497cf594a3c01af33a65b27b19e7459212d6) ( `ident`: keep a flag for bogus default_email, 2015-12-10 for git 2.6.5, Jan. 2016) 声明显式配置*不是*`user.email`伪造的，无论其值是什么，所以这个hack 不再有效。
> 
>  *通过添加新的配置变量来提供相同的功能**`user.useConfigOnly`；设置此变量时，用户必须显式设置 user.email 配置**。*

 *因此，从 2016 年 3 月和 git 2.8 开始，请执行以下操作：

```
git config --global user.useConfigOnly true 
```

您的任何新仓库都`user.email` *只会*在其本地`.git/config`文件中查找。如果在本地 git 配置中找不到，
则提交将不会继续。`user.email`

* * *

请注意，它将在 git 2.9（2016 年 6 月）中得到更多增强：

请参阅[提交 d3c06c1](https://github.com/git/git/commit/d3c06c196964c02f7343b53301e0e85679fad51f)，[提交 734c778](https://github.com/git/git/commit/734c7789aa1055d465e336f618889cc6df478535)（2016 年 3 月 30 日）由[Marios Titas (``)](https://github.com/)。
^(（由[Junio C Hamano 合并 -- `gitster`--](https://github.com/gitster)在[提交 e7e6826](https://github.com/git/git/commit/e7e68265147f6aa08391b4724d862e58424b29df)中，2016 年 4 月 29 日）)

> ## `ident`：`useConfigOnly`在自动检测姓名/电子邮件之前检查
> 
> 如果`user.useConfigOnly`已设置，则尝试自动检测名称和/或电子邮件是没有意义的。
> 自动检测甚至可能导致虚假名称并触发错误消息。
> 
> ## `ident``useConfigOnly`:出错时给出“请告诉我”消息
> 
> 使用描述性较差的错误消息来阻止用户禁用`user.useConfigOnly`配置变量以解决此错误情况。我们希望鼓励他们改为设置 user.name 或 user.email。

所以而不是：

```
user.useConfigOnly set but no name given
user.useConfigOnly set but no mail given 
```

你会看见：

```
no name was given and auto-detection is disabled
no email was given and auto-detection is disabled 
```

* * *

原始答案（2012 年 9 月）

有点像“[使用预提交钩子停止特定作者的 git 提交](https://stackoverflow.com/questions/9627198/stop-a-git-commit-by-a-specific-author-using-pre-commit-hook)”，你可以定义一个**默认**的预提交钩子来检查：

```
 git config --local user.email 
```

是否为空。
如果为空：`exit 1`

要确保您为正在创建的每个 repo 使用该默认挂钩，请参阅“[更改默认 git 挂钩](https://stackoverflow.com/questions/1977610/change-default-git-hooks)”。
这是一种类似于“[分享你的 git hooks](http://malsserver.blogspot.fr/2011/08/share-your-git-hooks.html) ”中描述的方法：

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-07-31T03:48:14.440

我刚刚发现了一个 hack/workaround，只需将默认全局电子邮件设置为`(none)`，如下所示：

```
git config --global user.email "(none)" 
```

很少解释：此解决方法取决于官方 git 客户端源代码中的当前电子邮件验证，因此使用它需要您自担风险。*

# iphone - 在 NSDocumentsDirectory 中重命名和保存

> ID：12292583
> 
> 赞同：1
> 
> 时间：2012-09-06T03:30:47.760
> 
> 标签：iphone, ios, xcode, ipad

就像这样，在我的应用程序中，我有`UIScrollView`一个缩略图视图，它们是我的`NSCachesDirectory`. 我从我的选择器中保存了它们，然后在我的数组中命名它们，例如：`images0.png,images.1.png`...等

因此，例如，我的目录中有这样的图像：`images0.png, images1.png, images2.png, images3.png`。

然后我删除images1.png，剩下的图片会是这样的：`images0.png,images2.png, images3.png`对吧？

我想要实现的是获取图像`NSDocumentsDirectory`然后再次重命名它们或再次对它们进行排序`images0.png, images1.png, images2.png`...等再次？这可能吗？希望你能帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T04:06:38.190

使用这个**NSFileManger moveItemAtPath: toPath: error:** 但你应该提供**toPath:same_path_but_different_filename**。这会将文件移动到具有您提供的新文件名的新路径。[看到这个](http://ioscoderef.blogspot.com/2012/09/rename-file-in-nsdocumentdirectory.html)

由于您似乎希望整个逻辑重命名您的图像文件，因此您可以尝试以下代码，前提是文件位于 Document 目录中

```
NSFileManager *fileManager = [NSFileManager defaultManager];
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];
NSString * oldPath =[[NSString alloc]init];
NSString * newPath =[[NSString alloc]init];

int count=0;
for (int i=0; i<=[[fileManager contentsOfDirectoryAtPath:documentsDirectory error:nil]count]; i++) {

    oldPath=[documentsDirectory stringByAppendingPathComponent:[NSString stringWithFormat:@"images%d.png",i]];

    if ([fileManager fileExistsAtPath:oldPath]) {

        newPath=[documentsDirectory stringByAppendingPathComponent:[NSString stringWithFormat:@"images%d.png",count]];
        [fileManager moveItemAtPath:oldPath toPath:newPath error:nil]; 
        count+=1;

    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T04:42:29.627

Apple 不允许重命名保存的文件。所以替代方法是在文档目录中获取所有内容，如下所示：

```
NSArray *directoryContent = [[NSFileManager defaultManager] contentsOfDirectoryAtPath:yourDocDirPath error:NULL]; 
```

现在排序如下：

```
NSSortDescriptor * descriptor = [NSSortDescriptor sortDescriptorWithKey:nil ascending: YES comparator:^NSComparisonResult(id obj1, id obj2){
     return [obj1 compare: obj2 options: NSNumericSearch];
 }];

NSArray * sortedDirectoryContent = [directoryContent sortedArrayUsingDescriptors:[NSArray arrayWithObject: descriptor]]; 
```

我们已经排序数组用新名称重写了所有文件：

```
for(NSString *fileName in sortedDirectoryContent)
{
  NSString *filePath = [yourDocDirPath stringByAppendingPathComponent:fileName];
  NSData *fileData = [[NSData alloc]initWithContentsOfFile:filePath];
  if ([[NSFileManager defaultManager] fileExistsAtPath:filePath]) {
    [[NSFileManager defaultManager] removeItemAtPath:filePath error:nil];

    if(fileData)
    {
        NSString *newFilePath = [yourDocDirPath stringByAppendingPathComponent:@"New Name here"];
        [fileData writeToFile:newFilePath atomically:YES];
    }
  }
  else
  {
    if(fileData)
    {
        NSString *newFilePath = [yourDocDirPath stringByAppendingPathComponent:@"New Name here"];
        [fileData writeToFile:newFilePath atomically:YES];
    }
  }

} 
```

# javascript - 如何在没有页面的情况下获取 url

> ID：12292585
> 
> 赞同：0
> 
> 时间：2012-09-06T03:31:01.273
> 
> 标签：javascript, html, string, dom

我想获取没有页面的 url。请看下面。

当前网址

```
http://localhost/FolderPath/Page.html 
```

想得到

```
http://localhost/FolderPath/ 
```

我怎样才能做到这一点？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T03:32:17.483

```
var oldPath = 'http://localhost/FolderPath/Page.html';
var newPath = oldPath.split('/').slice(0, -1).join('/') + '/'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T03:34:36.817

```
"http://localhost/FolderPath/Page.html".replace(/[^\/]*$/, ''); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T03:42:25.537

正则表达式有人吗？

```
var url = "http://localhost/FolderPath/Page.html";
url.match(/(.+)(\/(.+)?)$/)[1] + "/";

//returns "http://localhost/FolderPath/"

var url = "http://localhost/FolderPath/";
url.match(/(.+)(\/(.+)?)$/)[1] + "/";

//returns "http://localhost/FolderPath/" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-06T03:37:13.407

```
var url = "http://localhost/FolderPath/Page.html";
url = url.substr(0, url.lastIndexOf('/') + 1); 
```

# android - 无法在 AsyncTask 中显示 ProgressDialog

> ID：12292586
> 
> 赞同：1
> 
> 时间：2012-09-06T03:31:02.417
> 
> 标签：android

这是我的代码：

```
@Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        Log.i(TAG, "onCreate");
        setContentView(R.layout.list);    
        new GetBlockListAsyncTask().execute(BlockListActivity.this);
    }
public void initializeDialog() {    
        dialog = ProgressDialog.show(BlockListActivity.this, "", "Loading data. Wait...", true);
        dialog.show();
    }

    public void dismissDialog(){        
        dialog.dismiss();
    } 
```

GetBlockListAsyncTask：

```
 public class GetBlockListAsyncTask extends AsyncTask<Object, Boolean, String>{

private BlockListActivity callerActivity;
private String TAG = "GetBlockListAsyncTask";
private String stringCode = "";

@Override
protected String doInBackground(Object... params) { 

    callerActivity = (BlockListActivity)params[0];      
    try {
        Log.d(TAG, "Start to sleep");
        Thread.sleep(4000);         
        Log.d(TAG, "End sleep");
    } catch (InterruptedException e) {
       e.printStackTrace();
    }
    return null;
}

@Override
protected void onPostExecute(String response) {
    callerActivity.dismissDialog();
}

@Override
protected void onPreExecute() {
    callerActivity.initializeDialog();
} 
```

}

它会显示错误：

```
'Caused by: java.lang.NullPointerException'
  onPreExecute(GetBlockListAsyncTask.java:101) 
```

我发现一个解决方案是，如果我将 initializeDialog 移出 AsyncTask 并将其放在`new GetBlockListAsyncTask().execute(BlockListActivity.this);`in行之前`onCreate`，它就可以工作。
问题是如果我想将 initializeDialog 放在 AsyncTask 中，如何使它工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T04:12:10.237

尝试向您的 AsyncTask 添加一个公共构造函数，该构造函数接受 Activity 上下文作为第一个参数：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    // Create a new AsyncTask with the Activity Context
    AsyncTask task = new GetBlockListAsyncTask(this);

    // Execute the task
    task.execute();
}

public class GetBlockListAsyncTask extends AsyncTask<Object, Boolean, String> {
    private Context activityContext;

    private String TAG = "GetBlockListAsyncTask";
    private String stringCode = "";

    //Constructor
    public GetBlockListAsyncTask(Context c) {
        // Store the activity context
        activityContext = c;
    }

    @Override
    protected String doInBackground(Object... params) { 
        try {
            Log.d(TAG, "Start to sleep");
            Thread.sleep(4000);         
            Log.d(TAG, "End sleep");
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
        return null;
    }

    @Override
    protected void onPostExecute(String response) {
        activityContext.dismissDialog();
    }

    @Override
    protected void onPreExecute() {
        activityContext.initializeDialog();
    }
} 
```

# php - 在本月 8 日和上月 8 日之间选择，每个月

> ID：12292588
> 
> 赞同：0
> 
> 时间：2012-09-06T03:31:09.897
> 
> 标签：php, mysql

您将如何选择本月 8 日和上月 8 日之间的所有记录而不在当月通过？我的日期列是日期类型。

```
SELECT * 
FROM table
WHERE date BETWEEN '8th of last month' AND 
                   '8th of this month' 
```

我尝试在 PHP 中计算日期，然后将它们发送到 MySQL。但是在考虑到年数时它会变得有点复杂。我想知道这是否可以用 SQL 来完成？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T03:33:10.280

从可读性的角度来看，使用 PHP 可能更[直接](http://us3.php.net/manual/en/datetime.formats.relative.php)*，*使用.[`strtotime()`](http://us3.php.net/strtotime)

以下内容应该可以帮助您入门：

```
echo date('Y-m-d', strtotime('eighth of last month')); 
```

### 更新

*序数*不像我上面想的那样工作。但是，*假设*您使用当月的同一天（即 8 日）。以下是好的：

```
echo date('Y-m-08', strtotime('last month')); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T03:43:17.953

这是一个解决方案

```
echo date('Y-m-d', mktime(0, 0, 0, date('n') - 1, 8)); 
```

如果你想使用 strtotime

```
echo date('Y-m-d', strtotime('+7 days', strtotime('first day of last month'))); 
```

# filter - 在 Weka 中使用 AddExpression / MathExpression

> ID：12292589
> 
> 赞同：3
> 
> 时间：2012-09-06T03:31:12.777
> 
> 标签：filter, attributes, preprocessor, weka

我正在做一个非常基本的 WEKA 任务，我正在尝试使用 WEKA 来预处理来自 GUI（最新版本）的数据。双击 MathExpression 时，我正在尝试在表达式框中执行非常基本的 if 语句和数学语句，但没有任何成功。例如我想做

```
if (a5 == 2 || a5 == 0) then y = 1; else y = 0 
```

许多不同的变体对我不起作用，我也不清楚如何引用“y”或者它是否需要在行内引用。

另一个例子是 -abs(log(a7)–3) 我也无法计算出来。关于如何使这些陈述起作用的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T06:00:20.783

来自[MathExpression的 javadoc](http://weka.sourceforge.net/doc.dev/weka/filters/unsupervised/attribute/MathExpression.html)

> “A”字母是指正在处理的属性的值。其他属性值（仅限数字）可以通过变量 A1、A2、A3、... 访问

您的过滤器适用于数据集的所有属性。如果我加载虹膜数据集并应用以下过滤器。

> weka.filters.unsupervised.attribute.MathExpression -E log(A)。

您的属性，sepallength 值更改如下。

```
Before Filter      After Filter           
Minimum 4.3    Minimum  1.459
Maximum 7.9    Maximum  2.067
Mean    5.843  Mean 1.755
StdDev  0.828  StdDev   0.141 
```

另外，如果您查看 javadoc，则没有 ifelse 函数，而是 ifelse 函数。因此你应该写类似

```
ifelse ( (A == 2 || A == 0), 1,0 ) 
```

此过滤器也适用于所有属性。如果您只想更改一个属性并根据其他属性值进行更改；那么您需要使用“忽略范围选项”并使用 A1、A2 来引用其他属性值。

如果您需要添加新属性，请使用[AddExpression](http://weka.sourceforge.net/doc.dev/weka/filters/unsupervised/attribute/AddExpression.html)。

> 通过将数学表达式应用于现有属性来创建新属性的实例过滤器。

# django - 在 Nginx 后面调试 Django/Gunicorn

> ID：12292590
> 
> 赞同：2
> 
> 时间：2012-09-06T03:31:15.500
> 
> 标签：django, debugging, nginx, gunicorn

全新安装 Nginx、Gunicorn、Supervisor、New Relic、Django、Postgres 等。点击 URL 会导致“内部服务器错误”。

在 Nginx 配置中打开调试提供了很多细节，但没有任何内容指出导致 500 错误的原因（只是它正在发生。）

接下来，我通过 supervisorctl 关闭 Gunicorn 并通过 启动应用程序`python manage.py runserver`，点击 URL，一切运行正常。

退后一步，关闭`runserver`并手动使用 Gunicorn 启动`bin/gunicorn_django`，这是我能够获得的最接近可用跟踪日志的位置：

```
2012-09-05 21:39:25 [5927] [ERROR] Error handling request
Traceback (most recent call last):
  File "/somewhere/local/lib/python2.7/site-packages/gunicorn/workers/sync.py", line 102, in handle_request
    respiter = self.wsgi(environ, resp.start_response)
  File "/somewhere/local/lib/python2.7/site-packages/django/core/handlers/wsgi.py", line 241, in __call__
    response = self.get_response(request)
  File "/somewhere/local/lib/python2.7/site-packages/django/core/handlers/base.py", line 82, in get_response
    urlconf = settings.ROOT_URLCONF
  File "/somewhere/local/lib/python2.7/site-packages/django/utils/functional.py", line 185, in inner
    return func(self._wrapped, *args)
AttributeError: 'Settings' object has no attribute 'ROOT_URLCONF' 
```

我不是要回答这里发生的事情，因为我知道这还不够详细，无法弄清楚。这个`ROOT_URLCONF`问题是普遍的，可能是由很多事情引起的。我的问题是我可以使用哪些后续步骤来继续追踪正在发生的事情？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T15:15:15.713

提到`Settings`not `settings`（注意大写）是可疑的。我个人在使用 Aptana Studio 时注意到，键入后出现的自动完成选项之一`from django.conf import`是`Settings`，但这显然不是您真正想要的。也许发生了类似的事情并且您接受了错误的自动完成选择？我会搜索您的项目`Settings`（当然，区分大小写），并酌情将其更改为小写。

# qt - Qt - 鼠标悬停并单击自定义按钮的样式表

> ID：12292592
> 
> 赞同：9
> 
> 时间：2012-09-06T03:31:44.033
> 
> 标签：qt, button, stylesheet

我想要一个不可见的按钮，但是当用户将鼠标悬停在它上面时，我想要一个浅蓝色，当他点击它时，我想要一个深蓝色。

在我做了一些研究之后，我发现我可以使用样式表功能，但我是 Qt 的新手，我对 Qt 没有任何经验，所以我更愿意询问和学习。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-06T06:11:09.103

```
yourBtn->setStyleSheet("QPushButton{background:url(:/Resources/pause_nor.png);border:0px;}"
    "QPushButton:hover{background:url(:/Resources/pause_over.png);border:0px}"
    "QPushButton:pressed{background:url(:/Resources/pause_over.png); position: relative;top: 1px; left: 1px;}"); 
```

# c# - 为什么 LZMA SDK (7-zip) 这么慢

> ID：12292593
> 
> 赞同：24
> 
> 时间：2012-09-06T03:31:50.183
> 
> 标签：c#, performance, compression, 7zip, lzma

我发现 7-zip 很棒，我想在 .net 应用程序上使用它。我有一个 10MB 的文件（a.001），它需要：

![在此处输入图像描述](../Images/7ea88d4f0db0356e645ca0d026935b82.png)

**2 秒编码**。

现在，如果我能在 c# 上做同样的事情，那就太好了。我已经下载了[http://www.7-zip.org/sdk.html](http://www.7-zip.org/sdk.html) LZMA SDK c# 源代码。我基本上将 CS 目录复制到了 Visual Studio 中的控制台应用程序中： ![在此处输入图像描述](../Images/725d1dc0f9b67e20263200786729850a.png)

然后我编译并顺利编译。因此，在输出目录中，我放置了`a.001`10MB 大小的文件。在我放置的源代码中的主要方法上：

```
[STAThread]
    static int Main(string[] args)
    {
        // e stands for encode
        args = "e a.001 output.7z".Split(' '); // added this line for debug

        try
        {
            return Main2(args);
        }
        catch (Exception e)
        {
            Console.WriteLine("{0} Caught exception #1.", e);
            // throw e;
            return 1;
        }
    } 
```

当我执行控制台应用程序时，应用程序运行良好，并且我`a.7z`在工作目录中获得了输出。**问题是它需要很长时间。执行大约需要15秒！**我也尝试过[https://stackoverflow.com/a/8775927/637142](https://stackoverflow.com/a/8775927/637142)方法，它也需要很长时间。为什么它比实际程序慢 10 倍？

## 还

即使我设置只使用一个线程： ![在此处输入图像描述](../Images/1c3e636ab86477a42db3b35dc82ce1dc.png)

它仍然需要更少的时间（3 秒对 15 秒）：

* * *

## （编辑）另一种可能性

可能是因为 C# 比汇编或 C 慢吗？我注意到该算法做了很多繁重的操作。例如比较这两个代码块。他们都做同样的事情：

## **C**

```
#include <time.h>
#include<stdio.h>

void main()
{
    time_t now; 

    int i,j,k,x;
    long counter ;

    counter = 0;

    now = time(NULL);

    /* LOOP  */
    for(x=0; x<10; x++)
    {
        counter = -1234567890 + x+2;

        for (j = 0; j < 10000; j++)     
            for(i = 0; i< 1000; i++)                
                for(k =0; k<1000; k++)
                {
                    if(counter > 10000)
                        counter = counter - 9999;
                    else
                        counter= counter +1;
                }

        printf (" %d  \n", time(NULL) - now); // display elapsed time
    }

    printf("counter = %d\n\n",counter); // display result of counter        

    printf ("Elapsed time = %d seconds ", time(NULL) - now);
    gets("Wait");
} 
```

**输出**

![在此处输入图像描述](../Images/062f087d030107282f1d9906eedd653f.png)

## **C＃**

```
static void Main(string[] args)
{       
    DateTime now;

    int i, j, k, x;
    long counter;

    counter = 0;

    now = DateTime.Now;

    /* LOOP  */
    for (x = 0; x < 10; x++)
    {
        counter = -1234567890 + x + 2;

        for (j = 0; j < 10000; j++)            
            for (i = 0; i < 1000; i++)                
                for (k = 0; k < 1000; k++)
                {
                    if (counter > 10000)
                        counter = counter - 9999;
                    else
                        counter = counter + 1;
                }

        Console.WriteLine((DateTime.Now - now).Seconds.ToString());            
    }

    Console.Write("counter = {0} \n", counter.ToString());
    Console.Write("Elapsed time = {0} seconds", DateTime.Now - now);
    Console.Read();
} 
```

**输出**

![在此处输入图像描述](../Images/1bb644e18b766d4364eb2913beaef661.png)

**注意 c# 慢了多少。这两个程序都在发布模式下从 Visual Studio 外部运行。**也许这就是为什么 .net 比 c++ 需要更长的时间的原因。

## 我也得到了同样的结果。就像我刚刚展示的示例一样，C# 慢了 3 倍！

* * *

## 结论

我似乎不知道是什么导致了问题。我想我会使用 7z.dll 并从 c# 调用必要的方法。执行此操作的库位于：[http](http://sevenzipsharp.codeplex.com/) ://sevenzipsharp.codeplex.com/ ，这样我使用的库与 7zip 使用的库相同：

```
 // dont forget to add reference to SevenZipSharp located on the link I provided
    static void Main(string[] args)
    {
        // load the dll
        SevenZip.SevenZipCompressor.SetLibraryPath(@"C:\Program Files (x86)\7-Zip\7z.dll");

        SevenZip.SevenZipCompressor compress = new SevenZip.SevenZipCompressor();

        compress.CompressDirectory("MyFolderToArchive", "output.7z");

    } 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-07-11T16:14:14.153

我在代码上运行了一个分析器，最昂贵的操作似乎是搜索匹配项。在 C# 中，它一次搜索一个字节。LzBinTree.cs 中有两个函数（GetMatches 和 Skip），其中包含以下代码片段，它花费了大约 40-60% 的时间在此代码上：

```
if (_bufferBase[pby1 + len] == _bufferBase[cur + len])
{
    while (++len != lenLimit)
        if (_bufferBase[pby1 + len] != _bufferBase[cur + len])
            break; 
```

它基本上是试图一次找到一个字节的匹配长度。我将其提取到它自己的方法中：

```
if (GetMatchLength(lenLimit, cur, pby1, ref len))
{ 
```

如果您使用不安全的代码并将 byte* 转换为 ulong* 并一次比较 8 个字节而不是 1，那么我的测试数据的速度几乎翻了一番（在 64 位进程中）：

```
private bool GetMatchLength(UInt32 lenLimit, UInt32 cur, UInt32 pby1, ref UInt32 len)
{
    if (_bufferBase[pby1 + len] != _bufferBase[cur + len])
        return false;
    len++;

    // This method works with or without the following line, but with it,
    // it runs much much faster:
    GetMatchLengthUnsafe(lenLimit, cur, pby1, ref len);

    while (len != lenLimit
        && _bufferBase[pby1 + len] == _bufferBase[cur + len])
    {
        len++;
    }
    return true;
}

private unsafe void GetMatchLengthUnsafe(UInt32 lenLimit, UInt32 cur, UInt32 pby1, ref UInt32 len)
{
    const int size = sizeof(ulong);
    if (lenLimit < size)
        return;
    lenLimit -= size - 1;
    fixed (byte* p1 = &_bufferBase[cur])
    fixed (byte* p2 = &_bufferBase[pby1])
    {
        while (len < lenLimit)
        {
            if (*((ulong*)(p1 + len)) == *((ulong*)(p2 + len)))
            {
                len += size;
            }
            else
                return;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-13T19:10:24.927

这种二进制算术和分支繁重的代码是 C 编译器喜欢的，而 .NET JIT 讨厌的。.NET JIT 不是一个非常聪明的编译器。它针对快速编译进行了优化。如果微软想调整它以获得最大性能，他们会插入 VC++ 后端，但后来故意不这样做。

此外，我可以通过您使用 7z.exe (6MB/s) 获得的速度来判断您正在使用多个内核，可能使用的是 LZMA2。我的快速核心 i7 可以提供每个核心 2MB/s 的速度，所以我猜 7z.exe 正在为您运行多线程。如果可能，请尝试在 7zip 库中打开线程。

我建议您不要使用托管代码 LZMA 算法，而是使用本机编译的库或使用`Process.Start`. 后一个应该让你很快开始并取得良好的效果。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-14T21:42:45.333

Another alternative is to use SevenZipSharp (available on NuGet) and point it to your 7z.dll. Then your speeds should be about the same:

```
var libPath = Path.Combine(Environment.GetFolderPath(Environment.SpecialFolder.ProgramFiles), "7-zip", "7z.dll");
SevenZip.SevenZipCompressor.SetLibraryPath(libPath);
SevenZip.SevenZipCompressor compressor = new SevenZipCompressor();
compressor.CompressFiles(compressedFile, new string[] { sourceFile }); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-06T03:45:37.070

我自己没有使用过 LZMA SDK，但我很确定默认情况下 7-zip 在许多线程上运行大部分操作。由于我自己没有这样做，我唯一建议的是检查是否可以强制它使用多个线程（如果默认情况下不使用它）。

编辑：

* * *

似乎线程可能不是（唯一的）与性能相关的问题，我还可以想到其他一些问题：

1.  您是否检查过您设置的选项与使用 7-zip UI 时设置的选项完全相同？输出文件的大小是否相同？如果不是 - 可能会发生一种压缩方法比另一种压缩方法快得多。

2.  您是否通过 VS 执行您的应用程序？如果是这样 - 这也可能会增加一些开销（但我想它不应该导致应用程序运行速度慢 5 倍）。

3.  在压缩文件之前是否有任何其他操作发生？

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-09-13T18:44:47.027

我刚刚查看了 LZMA CS 实现，它都是在托管代码中执行的。最近针对我当前项目的压缩要求对此进行了一些调查，托管代码中的大多数压缩实现似乎比本机代码执行效率低。

我只能假设这是这里问题的原因。如果您查看另一个压缩工具 QuickLZ 的性能表，您可以看到本机代码和托管代码（无论是 C# 还是 Java）之间的性能差异。

想到两个选项：使用 .NET 的互操作工具调用本机压缩方法，或者如果您可以牺牲压缩大小，请查看[http://www.quicklz.com/](http://www.quicklz.com/)。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-09-14T20:23:57.763

.net 运行时比本机指令慢。如果 c 中出现问题，我们通常会导致应用程序崩溃并蓝屏死机。但在 c# 中却没有，因为我们没有在 c 中进行的任何检查实际上都添加到了 c# 中。如果不对 null 进行额外检查，运行时将永远无法捕获空指针异常。如果不检查索引和长度，运行时永远无法捕获越界异常。

这些是使 .net 运行时变慢的每条指令之前的隐式指令。在典型的业务应用程序中，我们不关心性能，其中业务和 ui 逻辑的复杂性更为重要，这就是为什么 .net 运行时会格外小心地保护每条指令，以便我们快速调试和解决问题。

原生 c 程序总是比 .net 运行时更快，但它们很难调试，并且需要深入了解 c 才能编写正确的代码。因为 c 会执行一切，但不会给你任何异常或出错的线索。

# python - 将终端输出写入文件

> ID：12292594
> 
> 赞同：1
> 
> 时间：2012-09-06T03:31:55.203
> 
> 标签：python, os.system

在我的机器上，我有一些软件在终端中接受命令并返回一个值列表。

要运行它，我必须输入如下内容：

```
pdv -t filename 
```

我正在尝试将它作为 python 程序的一部分运行。当我运行以下命令时：

```
os.system('pdv -t %s' % (epoch_name)) 
```

然后我得到我想要返回到我的终端的值（其中 epoch_name 是文件名的变量名）。但是当我尝试将结果写入文件时：

```
os.system('pdv -t %s % "(epoch_name)" > 123.txt') 
```

文件 123.txt 已生成，但它是空的。

我知道我放错了 " 和/或 ' 字符，但我不知道它们应该放在哪里。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-06T05:28:33.090

您可以使用带有 stdout 关键字参数的 subprocess.call：

```
import subprocess

cmd = ['ls', '-l']

with open('output.txt', 'w') as out:
    return_code = subprocess.call(cmd, stdout=out) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-06T03:50:49.343

我相信这可以满足您的要求。参数 to`os.system()`应该是表示操作系统命令的字符串。

```
os.system('pdv -t %s > 123.txt' % epoch_name) 
```

有一个[`subprocess`](http://docs.python.org/library/subprocess.html)模块，如果您打算在 python 中进一步处理输出，可能值得研究一下。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-06T05:18:59.780

最好使用 os.system 的子进程模块

```
import subprocess
subprocess.call(['pdv', '-t', filename, '>', dest_file_name]) 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-06T05:26:47.123

```
from subprocess import Popen
proc = Popen(['pdv', '-t', epoch_name], stdout = open('123.txt', 'w')) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-06T03:36:30.207

查看该命令`script`是否对您可用。它可能会满足您的需求。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-01-26T10:27:49.843

或者，如果对您有帮助，您可以使用[DiveIntoPython](http://www.diveintopython.net/scripts_and_streams/stdin_stdout_stderr.html)`sys.stdout`中的查看此文档或[此处](http://www.reddit.com/r/learnprogramming/comments/1enj7r/sysstdoutwrite_in_python/)的讨论。

```
import sys

print 'Dive in'
saveout = sys.stdout
fsock = open('out.log', 'w')
sys.stdout = fsock
print 'This message will be logged instead of displayed'
sys.stdout = saveout
fsock.close() 
```

# ios - 为 iPhone 制作纸牌游戏的最佳框架是什么？

> ID：12292599
> 
> 赞同：-2
> 
> 时间：2012-09-06T03:32:46.093
> 
> 标签：ios

我正在查看所有选项，但我无法决定。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T04:50:36.683

您应该查看由[Ray Wenderlich](http://www.raywenderlich.com)管理的最优秀的网站。有很多出色的贡献者，例如[Matthjis Hollemans](http://twitter.com/#!/mhollemans)，他们制作了史诗[《如何使用多人和蓝牙制作简单的纸牌游戏》](http://www.raywenderlich.com/12735/how-to-make-a-simple-playing-card-game-with-multiplayer-and-bluetooth-part-1)。

# c# - 多个类和表单的样式/架构完整性检查

> ID：12292600
> 
> 赞同：4
> 
> 时间：2012-09-06T03:32:55.380
> 
> 标签：c#, winforms, class, architecture

到目前为止，我一直用来自学编码的 c# 项目是一种包含大量函数和大量“全局”静态变量的巨大形式。

在阅读了这里，做了一些教程等之后，我现在正试图完成重构它以正确使用类和封装的过程。

我的课程：

*   **`Program.cs`**- 基本上除了初始化什么都不做`Form1`。
*   **`Form1.cs`**= 生成和修改所有 UI。调用其他类中的公共函数，并有一些其他类可以调用来更新它的公共函数。
*   **`UiStrings.cs`**= 包含所有错误消息、对话框、说明等。
*   **`Options.cs`**= 跟踪一些设置，构建和更新安装文件的路径，根据更改的 UI 执行代码。
*   **`Updater.cs`**= 跟踪当前版本，下载资产，将它们放在正确的位置，并调整选项。
*   **`Installer.cs`**= 根据当前选项处理安装/卸载/备份所有资产。

最初，我在`Form1`. 这有助于`Form1`能够访问`UiStrings`or中的函数和属性`Options`。然而，这些类无法访问彼此的某些部分，大概是因为它们没有被实例化。

这导致我的目标是将我所有的自定义类都设为`UiStrings`静态类`Options`（因为我不需要它们的多个实例）。这也意味着我必须将每个类中的每个函数和属性都设为静态。

对于真正知道自己在做什么的人来说，这是一个合理的解决方案吗？

到目前为止，它似乎在我的测试中有效，但我最初没有任何课程的尝试也工作得很好，直到我知道它有多么错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T03:54:04.527

如果您打开项目属性（在解决方案资源管理器中右键单击项目，右键单击，选择属性），您将找到 UiStrings 的“资源”选项卡，以及“选项”的“设置”选项卡。我建议将它们用作标准功能。这也消除了设计您自己的要素类的需要。

除此之外，您可以将它们静态化，并且您不必创建类的副本来访问静态成员。语法是 ClassName.Method() 或 ClassName.Property 而不是 var instance = new ClassName(); 实例.方法（）；

# jquery - 使用 jQuery 函数时的 HTTP 405；发送选项

> ID：12292601
> 
> 赞同：1
> 
> 时间：2012-09-06T03:33:08.277
> 
> 标签：jquery, asp.net-mvc, http, asp.net-web-api

我遇到了一个非常奇怪的问题。以下 jQuery 接收 HTTP 405 错误代码并发送 OPTIONS 请求方法而不是 GET。

```
function GetPerf() 
{
    jQuery.support.cors = true;
    leInterval = setInterval(function()
    {
    $.ajax({
        url: "http://localhost/PerfMon3/api/performance/categories",
        data: { machine_name : "CLOUDMACHINE" },
        type: "GET",
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        xhrFields: {
        withCredentials: true
        },
        success: function (data) {
            WriteResponse(data);
        },
        error: function (x, y, z) {
            alert(data);
        }
    });
    },
    1000)
} 
```

有趣的是，这在 Internet Explorer 中运行得非常好，但 Chrome 我得到了 405。有人知道发生了什么吗？

附加说明：无论使用何种浏览器，从托管应用程序的 IIS 浏览器运行它时，它都能正常工作。这个问题只在远程机器上起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T03:41:43.173

好吧，我只是喜欢在 SO 上询问后立即通过自己的测试找出问题的答案。我很抱歉，伙计们。

我将 jQuery 中的 url 行更改为

```
url: "http://cloudmachine/PerfMon3/api/performance/categories" 
```

现在它工作得很好。

不过，为什么它最初只在 IE 中有效？这没有意义。

# java - 是否可以从 struts2 中的查询 url 制作描述性 url

> ID：12292605
> 
> 赞同：0
> 
> 时间：2012-09-06T03:33:32.767
> 
> 标签：java, struts2

是否可以从 struts2 中的查询 url 制作描述性 url

示例：如果网址如下

查询网址：[http ://example.com/products?category=2&pid=25](http://example.com/products?category=2&pid=25)

描述性网址：[http ://example.com/products/2/25](http://example.com/products/2/25)

请给我建议。

# android - 将值动态设置为包含视图的 TextView

> ID：12292607
> 
> 赞同：2
> 
> 时间：2012-09-06T03:33:38.400
> 
> 标签：android, layout, include

我有两个`views`layout_a.xml 和 layout_b.xml。
在 layout_a 和 layout_b 中，有一个`include`包含另一个视图 layout_header.xml。
该 layout_header 包含一个`textView`显示*登录用户名*。
用户名存储在单例类`User`中。

如何设置用户名一次，但不能在`activity`包含 layout_header.xml 的每个应用程序中设置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T04:07:24.797

子类 TextView 并让它初始化单例。

爪哇：

```
public class UserTextView extends TextView{

    public UserTextView(Context context) {
        super(context);
        CharSequence username = User.getInstance().username
        setText(username);      
    }
} 
```

布局：

```
<com.example.UserTextView 
 android:id="@+id/username"
 android:layout_width="wrap_content"
 android:layout_height="wrap_content"> 
```

# android - 尝试使用 AsycTask 绕过来自 Android 的 Web 服务调用

> ID：12292619
> 
> 赞同：0
> 
> 时间：2012-09-06T03:35:31.493
> 
> 标签：android, login, android-activity, crash

我是 Android 开发的初学者。我正在开发一个广泛中继 Web 服务调用的应用程序。第一个屏幕获取用户名和密码，并通过调用 Web 服务来验证用户。如果 U/P 有效，那么我需要启动第二个活动。在第二个活动中，我需要打 3 个电话。但是我还没有进入第二部分。事实上，我还没有完成完整的编码。但我想测试该应用程序是否可以正常工作。

调用 webservice 时，我正在显示警报对话框。但是该应用程序在某个地方崩溃了。LoginActivity 出现。当我输入 U/P 并按下登录按钮时，它崩溃了。

我的课程：

任务处理程序.java

```
 public class TaskHandler {

private String URL;
private User userObj;
private String results;
private JSONDownloaderTask task; ;

public TaskHandler( String url, User user) {
    this.URL = url;
    this.userObj = user;
}

public String handleTask() {
    Log.d("Two", "In the function");
    task = new JSONDownloaderTask();
    Log.d("Three", "In the function");
    task.execute(URL);
    return results;
}

private class JSONDownloaderTask extends AsyncTask<String, Void, String> {

    private String username;// = userObj.getUsername();
    private String password; //= userObj.getPassword();

    public  HttpStatus status_code;

    public JSONDownloaderTask() {
        Log.d("con", "Success");
        this.username = userObj.getUsername();
        this.password = userObj.getPassword();

        Log.d("User" + this.username , " Pass" + this.password);
    }

    private AsyncProgressActivity progressbar = new AsyncProgressActivity();

    @Override
    protected void onPreExecute() {
        progressbar.showLoadingProgressDialog();
    }

    @Override
    protected String doInBackground(String... params) {

        final String url = params[0]; //getString(R.string.api_staging_uri) + "Authenticate/";

        // Populate the HTTP Basic Authentitcation header with the username and password
        HttpAuthentication authHeader = new HttpBasicAuthentication(username, password);
        HttpHeaders requestHeaders = new HttpHeaders();
        requestHeaders.setAuthorization(authHeader);
        requestHeaders.setAccept(Collections.singletonList(MediaType.APPLICATION_JSON));

        // Create a new RestTemplate instance
        RestTemplate restTemplate = new RestTemplate();

        restTemplate.getMessageConverters().add(new MappingJacksonHttpMessageConverter());

        try {
            // Make the network request
            Log.d(this.getClass().getName(), url);

            ResponseEntity<Message> response = restTemplate.exchange(url, HttpMethod.GET, new HttpEntity<Object>(requestHeaders), Message.class);
            status_code =  response.getStatusCode();
            return response.getBody().toString();
        } catch (HttpClientErrorException e) {

            status_code = e.getStatusCode();
            return new Message(0, e.getStatusText(), e.getLocalizedMessage(), "error").toString();
        } catch ( Exception e ) {
            Log.d(this.getClass().getName()  ,e.getLocalizedMessage());
            return "Unknown Exception";
        }
    }

    @Override
    protected void onPostExecute(String result) {
        progressbar.dismissProgressDialog();

        switch ( status_code ) {
        case UNAUTHORIZED:
            result =  "Invalid username or passowrd"; break;
        case ACCEPTED:
            result = "Invalid username or passowrd" + status_code; break;
        case OK:
            result = "Successful!"; break;
        }
    }
}
} 
```

AsycProgressActivity.java

```
public class AsyncProgressActivity  extends Activity {

protected static final String TAG = AsyncProgressActivity.class.getSimpleName();

private ProgressDialog progressDialog;
private boolean destroyed = false;

@Override
protected void onDestroy() {
    super.onDestroy();
    destroyed = true;
}

public void showLoadingProgressDialog() {
    Log.d("Here", "Progress");
    this.showProgressDialog("Authenticating...");
    Log.d("Here", "afer p");
}

public void showProgressDialog(CharSequence message) {
    Log.d("Here", "Message");
    if (progressDialog == null) {
        progressDialog = new ProgressDialog(this);
        progressDialog.setIndeterminate(true);
    }
    Log.d("Here", "Message 2");

    progressDialog.setMessage(message);
    progressDialog.show();
}

public void dismissProgressDialog() {
    if (progressDialog != null && !destroyed) {
        progressDialog.dismiss();
    }
}
} 
```

登录活动.java

```
public class LoginActivity extends AsyncProgressActivity implements OnClickListener {

Button login_button;
HttpStatus status_code;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    //this.requestWindowFeature(Window.FEATURE_NO_TITLE);

    setContentView(R.layout.main);

    login_button = (Button) findViewById(R.id.btnLogin);
    login_button.setOnClickListener(this);
    ViewServer.get(this).addWindow(this); 
}

public void onDestroy() {  
    super.onDestroy();  
    ViewServer.get(this).removeWindow(this);  
}  

public void onResume() {  
    super.onResume();  
    ViewServer.get(this).setFocusedWindow(this);  
}  

public void onClick(View v) {
    if ( v.getId() == R.id.btnLogin ) {

        User userobj = new User();
        String result;
        userobj.setUsername( ((EditText) findViewById(R.id.username)).getText().toString());
        userobj.setPassword(((EditText) findViewById(R.id.password)).getText().toString() );

        TaskHandler handler = new TaskHandler(getString(R.string.api_staging_uri) + "Authenticate/", userobj);
        Log.d(this.getClass().getName(), "One");
        result = handler.handleTask();
        Log.d(this.getClass().getName(), "After two");
        Utilities.showAlert(result, LoginActivity.this);
    }
} 
```

实用程序.java

```
public class Utilities {

public static void showAlert(String message, Context context) {

    AlertDialog.Builder alertDialogBuilder = new AlertDialog.Builder(context);
    alertDialogBuilder.setTitle("Login");

    alertDialogBuilder.setMessage(message)
                      .setCancelable(false)
                      .setPositiveButton("OK",new DialogInterface.OnClickListener() {
                        public void onClick(DialogInterface dialog,int id) {
                            dialog.dismiss();
                            //dialog.cancel();
                        }
                       });
    alertDialogBuilder.setIcon(drawable.ic_dialog_alert);

    // create alert dialog
    AlertDialog alertDialog = alertDialogBuilder.create();

    // show it
    alertDialog.show(); 
}
 } 
```

**编辑：更多信息**

我尝试逐步添加 Logging 以查看其崩溃的位置。看起来它在这里崩溃了。因为在此之后它没有显示日志消息。

```
 Log.d("Here", "Message");
    if (progressDialog == null) {
        progressDialog = new ProgressDialog(this);
        progressDialog.setIndeterminate(true);
    }
    Log.d("Here", "Message 2"); 
```

`Message 2`没有出现在日志中，但`Message`出现了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T04:05:49.923

我认为问题是你的`handleTask`方法：

```
public String handleTask() {
    Log.d("Two", "In the function");
    task = new JSONDownloaderTask();
    Log.d("Three", "In the function");
    task.execute(URL);
    return results;
} 
```

您正在启动一个 AsyncTask ，**当任务完成时**`results`，它将在另一个线程中填充变量。但是，您将立即返回此值并立即使用它来构建 AlertDialog。此变量可能尚未由后台线程填充，并且可能仍为空。

 **编辑：你可能不应该打电话`showAlert`给`onClick`. 相反，您应该在`onPostExecute`.**

# objective-c - 如何在 Xcode 中将 m4a 文件转换为 aac adts 文件？

> ID：12292620
> 
> 赞同：1
> 
> 时间：2012-09-06T03:35:38.993
> 
> 标签：objective-c, cocoa-touch, core-audio

我有一个从 iPod lib 复制并保存到我的文档中的 mp4 文件

对于我的下一步，我需要将其转换为 .mp3 或 .aac（ADTS 类型）

我使用此代码并失败...

```
-(IBAction)compressFile:(id)sender{
NSLog (@"handleConvertToPCMTapped");

// open an ExtAudioFile
NSLog (@"opening %@", exportURL);
ExtAudioFileRef inputFile;
CheckResult (ExtAudioFileOpenURL((__bridge CFURLRef)exportURL, &inputFile),
             "ExtAudioFileOpenURL failed");

// prepare to convert to a plain ol' PCM format
AudioStreamBasicDescription myPCMFormat;
myPCMFormat.mSampleRate = 44100; // todo: or use source rate?
myPCMFormat.mFormatID = kAudioFormatMPEGLayer3 ;
myPCMFormat.mFormatFlags =  kAudioFormatFlagsCanonical; 
myPCMFormat.mChannelsPerFrame = 2;
myPCMFormat.mFramesPerPacket = 1;
myPCMFormat.mBitsPerChannel = 16;
myPCMFormat.mBytesPerPacket = 4;
myPCMFormat.mBytesPerFrame = 4;

CheckResult (ExtAudioFileSetProperty(inputFile, kExtAudioFileProperty_ClientDataFormat,
                                     sizeof (myPCMFormat), &myPCMFormat),
             "ExtAudioFileSetProperty failed");

// allocate a big buffer. size can be arbitrary for ExtAudioFile.
// you have 64 KB to spare, right?
UInt32 outputBufferSize = 0x10000;
void* ioBuf = malloc (outputBufferSize);
UInt32 sizePerPacket = myPCMFormat.mBytesPerPacket; 
UInt32 packetsPerBuffer = outputBufferSize / sizePerPacket;

// set up output file
NSString *outputPath = [myDocumentsDirectory()   stringByAppendingPathComponent:@"m_export.mp3"];
NSURL *outputURL = [NSURL fileURLWithPath:outputPath];
NSLog (@"creating output file %@", outputURL);
AudioFileID outputFile;
CheckResult(AudioFileCreateWithURL((__bridge CFURLRef)outputURL,
                                   kAudioFileCAFType,
                                   &myPCMFormat, 
                                   kAudioFileFlags_EraseFile, 
                                   &outputFile),
            "AudioFileCreateWithURL failed");

// start convertin'
UInt32 outputFilePacketPosition = 0; //in bytes

while (true) {
    // wrap the destination buffer in an AudioBufferList
    AudioBufferList convertedData;
    convertedData.mNumberBuffers = 1;
    convertedData.mBuffers[0].mNumberChannels = myPCMFormat.mChannelsPerFrame;
    convertedData.mBuffers[0].mDataByteSize = outputBufferSize;
    convertedData.mBuffers[0].mData = ioBuf;

    UInt32 frameCount = packetsPerBuffer;

    // read from the extaudiofile
    CheckResult (ExtAudioFileRead(inputFile,
                                  &frameCount,
                                  &convertedData),
                 "Couldn't read from input file");

    if (frameCount == 0) {
        printf ("done reading from file");
        break;
    }

    // write the converted data to the output file
    CheckResult (AudioFileWritePackets(outputFile,
                                       false,
                                       frameCount,
                                       NULL,
                                       outputFilePacketPosition / myPCMFormat.mBytesPerPacket, 
                                       &frameCount,
                                       convertedData.mBuffers[0].mData),
                 "Couldn't write packets to file");

    NSLog (@"Converted %ld bytes", outputFilePacketPosition);

    // advance the output file write location
    outputFilePacketPosition += (frameCount * myPCMFormat.mBytesPerPacket);
}

// clean up
ExtAudioFileDispose(inputFile);
AudioFileClose(outputFile);

// show size in label
NSLog (@"checking file at %@", outputPath);
[self transMitFile:outputPath];
if ([[NSFileManager defaultManager] fileExistsAtPath:outputPath]) {
    NSError *fileManagerError = nil;
    unsigned long long fileSize = [[[NSFileManager defaultManager] attributesOfItemAtPath:outputPath
                                                                                    error:&fileManagerError]
                                   fileSize];

} 
```

# android - 以编程方式在视图内收听？

> ID：12292621
> 
> 赞同：1
> 
> 时间：2012-09-06T03:35:47.603
> 
> 标签：android, android-view

当用户手指以编程方式位于视图内时，有什么方法可以收听？我想要的是当用户将手指移到视图外时，视图内的用户手指具有不同的状态。

我知道这可以通过 xml 来完成，但是因为我使用的是 3rd 方库，它不允许我这样做，所以我必须找到一种以编程方式进行的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T03:59:17.970

在视图上设置一个触摸监听器并比较 x 和 y 点

[http://developer.android.com/reference/android/view/View.html#onTouchEvent(android.view.MotionEvent](http://developer.android.com/reference/android/view/View.html#onTouchEvent(android.view.MotionEvent) )

记录用户触地的起始位置

[http://developer.android.com/reference/android/view/MotionEvent.html#ACTION_DOWN](http://developer.android.com/reference/android/view/MotionEvent.html#ACTION_DOWN)

然后跟踪偏移量。

这是我为另一个问题编写的一些视图侦听器代码：

```
float initialX = 0;
float initialY = 0;
int currentFocusedChild = 0;
List<View> children;

public void walkElements() {
    final LinearLayout mainLayout = (LinearLayout) findViewById(R.id.main_layout);
    children = mainLayout.getFocusables(View.FOCUS_FORWARD);
    mainLayout.setOnTouchListener(new OnTouchListener() {

        @Override
        public boolean onTouch(View v, MotionEvent event) {
            switch(event.getAction()) {
                case MotionEvent.ACTION_DOWN:
                    initialX = event.getX();
                    initialY = event.getY();                        
                    break;
                case MotionEvent.ACTION_MOVE:
                    float diffX = event.getX() - initialX;
                    float diffY = event.getY() - initialY;

                    if(diffY > 0) {
                        if (currentFocusedChild < children.size() - 1) {
                            currentFocusedChild++;
                        }
                    } else {
                        if (currentFocusedChild > 0) {
                            currentFocusedChild--;
                        }
                    }
                    children.get(currentFocusedChild).setSelected(true);

                    //Sleep for a period of time so the selection is slow enough for the user.
                    Thread.sleep(300);
                    break;
                case MotionEvent.ACTION_UP:
                    children.get(currentFocusedChild).performClick();
                    break;
            }
            return false;
        }
    });

} 
```

# ruby - Sinatra：渲染片段（部分）

> ID：12292622
> 
> 赞同：2
> 
> 时间：2012-09-06T03:35:47.983
> 
> 标签：ruby, sinatra

我正在关注一本 O'Reilly 的书，该书正在使用 Sinatra 构建 Twitter 克隆。由于 Sinatra 没有“部分”（就像 Rails 那样），所以作者创建了自己的“片段”，就像部分一样工作。我知道这在 Sinatra 中相当普遍。

无论如何，在他的一个片段中（见下面的第一个），他调用了另一个片段 text_limiter_js （复制如下）。Text_limiter_js 基本上是一个 javascript 函数。

如果您查看 text_limiter_js 中的 javascript 函数，您会注意到它需要两个参数。我不明白这些参数是从哪里来的，因为当 text_limiter_js 在另一个片段中呈现时它们没有被传入。

我不确定我是否为某人提供了足够的信息/代码来帮助我理解这一点，但如果可以，请解释一下。

```
=snippet :'/snippets/text_limiter_js'
%h2.comic What are you doing?
%form{:method => 'post', :action => '/update'}
  %textarea.update.span-15#update{:name => 'status', :rows => 2, :onKeyDown => "text_limiter($('#update'), $('#counter'))"}
  .span-6
    %span#counter
      140
    characters left
  .prepend-12
    %input#button{:type => 'submit', :value => 'update'} 
```

text_limiter_js.haml

```
:javascript
  function text_limiter(field,counter_field) {
    limit = 139;
    if (field.val().length > limit) 
      field.val(field.val().substring(0, limit));
    else
      counter_field.text(limit - field.val().length);
  } 
```

# image - 两个 DIV 层：根据底部 DIV 的动态高度调整顶部 DIV 的大小

> ID：12292626
> 
> 赞同：1
> 
> 时间：2012-09-06T03:36:24.513
> 
> 标签：image, html, dynamic, height

我有两个 DIV 层，一个在另一个之上。在顶部 DIV 中，有一个图像，在底部 DIV 中，有一个文本块。底部 DIV 中的文本数量会发生变化，从而增加和减少所需的高度。我需要根据底部需要多少高度来动态降低顶部 DIV 中图像的高度。我正好有 600px 的垂直空间可用。

例如：如果底部 DIV 需要 200px 高度，我需要将图像高度更改为 400px。如果底部 DIV 需要 300px 高度，我需要将图像高度更改为 300px。

我知道我可以将图像高度设置为顶部 DIV 的 100%，从而允许它根据需要扩展或收缩。问题是我需要底部 DIV 能够自由扩展，并让顶部 DIV 做出相应的反应。换句话说，我不能有一个固定的高度。

```
<div id="topdiv">
<img src="example.png" alt="This image needs a height based on the bottom div" />
</div>
<div id="bottomdiv">
This text needs to be able to expand or contract freely
</div> 
```

任何人都可以帮忙吗？

# java - 定期振动后

> ID：12292628
> 
> 赞同：0
> 
> 时间：2012-09-06T03:36:32.163
> 
> 标签：java, android, eclipse

我有一个哔声系统，它会给你四声哔声。一秒钟后发出一声哔哔声，持续一秒钟。

但是，如果它的静音模式我希望振动器做同样的事情，请在 1 秒后振动 1 秒 4 次。

这是我正在使用的代码

```
 long[] pattern = new long[2];
                    pattern[0] = 10;
                    pattern [1] = 30;
                      switch (am.getRingerMode()) 
                      {

                      case AudioManager.RINGER_MODE_VIBRATE:
                          vibe.vibrate(pattern, 0);
                          break;
                      case AudioManager.RINGER_MODE_NORMAL:
                          soundsOn(mp);
                          break; 
```

请问我该怎么做我想做的事

最好的祝福

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T03:55:24.767

我会将您`pattern`移至您的振动盒中，这是我对“1 秒后振动 1 秒 4 次”的解释：

```
switch (am.getRingerMode())  {
case AudioManager.RINGER_MODE_VIBRATE:
    long[] pattern = new long[8];
    pattern[0] = 1000; // Wait one second
    pattern[1] = 950;  // Vibrate for most a second
    pattern[2] = 50;   // A pause long enough to feel distinction
    pattern[3] = 950;  // Repeat 3 more times
    pattern[4] = 50;
    pattern[5] = 950;
    pattern[6] = 50;
    pattern[7] = 950;
    vibe.vibrate(pattern, -1);
    break;
case AudioManager.RINGER_MODE_NORMAL:
    soundsOn(mp);
    break;
} 
```

# iphone - iPhone App Store 截图顺序

> ID：12292634
> 
> 赞同：0
> 
> 时间：2012-09-06T03:37:11.153
> 
> 标签：iphone, app-store-connect

在 iTunes Connect 中，第一个屏幕截图（左侧）没有显示为 App Store 中的第一个屏幕截图。在一种情况下，iTunes Connect 中的第 3 个屏幕截图在 App Store 中排名第 1，在另一种情况下，第 4 个屏幕截图在 App Store 中排名第 1。有谁知道如何指定图像的顺序？

我发现了这个问题，说 iTunes Connect 中的第一个屏幕截图应该是 App Store 上的第一个，但我的 2 个应用程序并非如此。

[iTunes 连接截图顺序](https://stackoverflow.com/questions/7462753/itunes-connect-screenshot-order)

# ios - iOS：如何用 GPU 能力减去两个视频帧？

> ID：12292637
> 
> 赞同：1
> 
> 时间：2012-09-06T03:38:17.430
> 
> 标签：ios, image-processing, opengl-es, quartz-composer

我想用 GPU 处理能力做两个 RGB 视频帧减法。即，第一张图像的每个像素的R，G，B值与第二张图像相减。此外，结果希望具有负 RGB 值并存储在 NSMutableArray 中。我使用 AVCaptureSession 来帮助我获取 CMSampleBufferRef 格式的原始视频帧。

1) 任何图像格式都支持负 RGB 值？或者我需要制作一个类似矩阵的类来存储图像？

（似乎某些图像格式使用浮点数来存储 RGB 值......）

（我听说过图像不同的混合模式，它与我想要的相似，但会绝对 RGB 值，我希望结果具有负值）

2) 如何使用 GPU 处理能力进行减法？

（我可以用 CPU 做，但是 FPS 太慢了，大约 5-6 FPS，但我希望它是 30 FPS）

（OpenGL 或 Quartz Composer 有用吗？）

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T17:55:44.813

正如 Hammer 所指出的，我的开源[GPUImage](https://github.com/BradLarson/GPUImage)框架中的 GPUImageDifferenceBlendFilter 就是这样做的。它使用以下片段着色器来获得红色、绿色和蓝色通道的绝对差异：

```
 varying highp vec2 textureCoordinate;
 varying highp vec2 textureCoordinate2;

 uniform sampler2D inputImageTexture;
 uniform sampler2D inputImageTexture2;

 void main()
 {
     mediump vec4 textureColor = texture2D(inputImageTexture, textureCoordinate);
     mediump vec4 textureColor2 = texture2D(inputImageTexture2, textureCoordinate2);
     gl_FragColor = vec4(abs(textureColor2.rgb - textureColor.rgb), textureColor.a);
 } 
```

如果您需要比较连续的视频帧，您还可以使用 GPUImageBuffer 来延迟较旧的帧与当前视频帧一起处理。我在框架内的 FilterShowcase 示例应用程序中有一个示例。

我不太确定“结果想要具有负 RGB 值”是什么意思。当前 iOS 设备上唯一支持纹理支持的帧缓冲区（您的渲染目标）的纹理格式是 32 位 BGRA。这意味着每个颜色通道的范围为 0-255，不允许有负值。不过，您可以将该颜色范围的下半部分用于负值，将上半部分用于正值。

您可以修改我的 GPUImageSubtractBlendFilter 来做到这一点，使用如下片段着色器：

```
 varying highp vec2 textureCoordinate;
 varying highp vec2 textureCoordinate2;

 uniform sampler2D inputImageTexture;
 uniform sampler2D inputImageTexture2;

 void main()
 {
     lowp vec4 textureColor = texture2D(inputImageTexture, textureCoordinate);
     lowp vec4 textureColor2 = texture2D(inputImageTexture2, textureCoordinate2);

     gl_FragColor = vec4((textureColor.rgb - textureColor2.rgb + 1.0) * 0.5, textureColor.a);
 } 
```

然后，在您读出像素后，您需要将 0-255 输出转换为 -128 - 128（或任何您的范围）。

# c# - 如何将数据从 WebBrowser 控件中的 JavaScript 返回到 C#？

> ID：12292640
> 
> 赞同：2
> 
> 时间：2012-09-06T03:38:49.837
> 
> 标签：c#, javascript, jquery, winforms, browser

我有一个`WebBrowser`控件`WinForm`，在其中我显示了一个带有 jQ​​uery 的对话框，其中包含一个文本区域和一个标有“保存”的按钮，其目的是从用户那里获取数据。

当用户单击保存按钮时，我希望检索文本区域中的文本并将其存储在我的 WinForm 应用程序的变量中。

这可能吗：jQuery 函数将值返回给 WinForm 应用程序？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T04:24:00.220

是的。

如果您打算使用`WebBrowser`WindowsForm 的标准控件，请查看以下属性：[`WebBrowser.ObjectForScripting`](http://msdn.microsoft.com/en-us/library/system.windows.forms.webbrowser.objectforscripting.aspx)-- 底部有一个非常有用的示例，向您展示了如何执行回调到您的应用程序的 Javascript。

就个人而言，我不喜欢为 WinForms 或 WPF 提供的 WebBrowser 控件——它们只是 Internet Explorer 的 COM 包装器。我更喜欢使用[Awesomium.NET](http://awesomium.codeplex.com/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T04:23:46.227

您是特别想使用 jQuery 来执行此操作，还是只想进行双向通信？使用 jQuery 或传统的 Web 实践将需要在某处运行 Web 服务器以供页面查询。

如果您只需要双向通信，请设置[WebBrowser.ObjectForScripting](http://msdn.microsoft.com/en-us/library/system.windows.forms.webbrowser.objectforscripting.aspx)属性。这会将 .Net 对象公开给网页上的 JavaScript 代码，如`window.external`. 然后页面上的 JavaScript 代码可以调用该对象上的方法和属性以与您的 WinForms 应用程序通信，例如在按下“保存”按钮时从文本区域存储文本。

有关详细信息，请参阅[http://msdn.microsoft.com/en-us/library/a0746166.aspx](http://msdn.microsoft.com/en-us/library/a0746166.aspx)。

# mongodb - 哪些数据将在辅助节点上回滚

> ID：12292642
> 
> 赞同：0
> 
> 时间：2012-09-06T03:39:10.147
> 
> 标签：mongodb

当副本集需要选举新的主节点时，更新的数据仍会保存在旧的主节点中，并会生成一个bson文件。但我也发现有时辅助节点中有一个 bson 文件。哪些数据将在辅助节点中回滚？谢谢！以下是我的情况：

1.  该集群有 3 个节点：server1、server2 和 server3，server1 是主节点
2.  插入大量数据
3.  在插入过程中，server1 不连接到 server2 和 server3，因此集群将选举新的主节点
4.  仍在插入数据
5.  server2 被选为主
6.  网络恢复，server1可以连接server2和server3
7.  server1 将状态从 ROLLBACK 更改为 SECONDARY
8.  发现 server1 在回滚文件夹中有一个 bson 文件。
9.  但也发现server3在回滚文件夹中有一个bson文件

为什么server3有一个bson文件？什么数据会被回滚？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T06:23:53.093

有时，将成为新主节点的辅助节点在复制中落后于另一个辅助节点。例如，如果您按照此处所述为副本成员指定手动优先级，则可能会发生这种情况：http: [//docs.mongodb.org/manual/administration/replica-sets/#replica-set-node-priority-configuration](http://docs.mongodb.org/manual/administration/replica-sets/#replica-set-node-priority-configuration)

在这种情况下，另一个辅助节点也需要回滚到新主节点的当前状态。

# c# - 加快 SQL Server 2008 中 185k 行的更新速度？

> ID：12292644
> 
> 赞同：4
> 
> 时间：2012-09-06T03:39:22.597
> 
> 标签：c#, sql-server, database, sql-server-2008

我有一个包含大约**185k**行的二进制文件。`C#`在几秒钟内解析文件。`MSSQL`用该数据更新表的最佳方法是什么？

我试过的：

1.  最简单的方法 - 读取二进制行，解析，更新表。整个过程大约需要 2 天时间来更新所有数据。
2.  合并 200 个更新查询并立即将它们发送到 MSSQL。在这种情况下，更新需要 8 到 10 小时。
3.  将 500 多个查询合并为一个。工作速度更快，但不时会丢弃超时异常，因此某些更新不会通过。

关于如何加快更新过程的任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T03:42:04.023

不确定您是否真的想通过 C# 执行此操作：可能想要使用[BULK INSERT](http://msdn.microsoft.com/en-us/library/ms188365.aspx)并为其提供一个数据格式正确的文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T04:02:45.760

我会尝试表值参数：

[http://www.codeproject.com/Articles/22392/SQL-Server-2008-Table-Valued-Parameters](http://www.codeproject.com/Articles/22392/SQL-Server-2008-Table-Valued-Parameters)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-11T22:54:38.327

使用[`SqlBulkCopy`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlbulkcopy.aspx)（到临时表）后跟[`MERGE`](http://technet.microsoft.com/en-us/library/bb510625.aspx).

大容量复制方法可以使用来自 .NET 客户端的“推送”来有效地传输数据。使用[`BULK INSERT`](http://msdn.microsoft.com/en-us/library/ms188365.aspx)需要从服务器“拉”（以及所需的本地文件访问）。

然后该`MERGE`命令（在 SQL Server 2008+ 中）可用于根据所需规则将临时表中的数据插入/更新/更新插入到目标表中。由于此时数据完全在数据库中，因此此操作将尽可能快。使用`MERGE` *也可能*导致优于许多单独命令的[性能优势](https://stackoverflow.com/questions/2548295/what-is-the-performance-of-merge-clause-in-sql-server-2008)，甚至是同一事务中的那些。

也可以看看：

*   [SQLBulkCopy“如果存在则插入或更新”的任何方式？](https://stackoverflow.com/questions/4889123/any-way-to-sqlbulkcopy-insert-or-update-if-exists)
*   [SQL Server 2008 插入优化](https://stackoverflow.com/questions/4123416/sql-server-2008-insert-optimization)

# android - Android ListView、GridView加载缓慢

> ID：12292647
> 
> 赞同：0
> 
> 时间：2012-09-06T03:39:59.197
> 
> 标签：android, http, listview, optimization, gridview

简而言之，在我的应用程序中，ListView 包含来自 SQLite 的数据和来自 http url 的图像，还有一个 GridView 以及来自 SQLite 的数据和来自 http url 的图像。看来一切都好！但是当滚动加载缓慢的长应用程序时告诉我如何优化我的应用程序？请

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T03:57:04.147

这在 Android 培训[网站](http://developer.android.com/training/improving-layouts/smooth-scrolling.html)中通过使用后台线程和在视图持有者中保存视图对象进行了详细解释。如果您需要更多解释，您应该观看 Romain Guy 和 Chet Haase 的演讲 - [ListView 的世界](http://www.youtube.com/watch?v=wDBM6wVEO70)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T04:00:42.633

如果您使用了一些光标，请尝试关闭它们

```
cursor.close; 
```

最后关闭数据库

```
myDb.close; 
```

因为每次滚动光标时都会重复您所做的每一个动作

# javascript - 为什么这个 DateTimePicker 脚本会导致 IE6 和 IE7 无法加载页面

> ID：12292649
> 
> 赞同：2
> 
> 时间：2012-09-06T03:40:17.880
> 
> 标签：javascript, jquery, asp.net-mvc-3, internet-explorer, internet-explorer-7

我在 asp.net MVC 3 站点上有几个页面，导致 IE6 和 7 在加载菜单后提示“无法加载页面”。我已经能够通过以下`DateTimePicker`脚本对此进行故障排除：

```
<script type="text/javascript">
$('#StartDateTime').datetimepicker({
    onClose: function(dateText, inst) {
        var endDateTextBox = $('#EndDateTime');
        if (endDateTextBox.val() != '') {
            var testStartDate = new Date(dateText);
            var testEndDate = new Date(endDateTextBox.val());
            if (testStartDate > testEndDate)
                endDateTextBox.val(dateText);
        }
        else {
            endDateTextBox.val(dateText);
        }
    },
    onSelect: function (selectedDateTime){
        var start = $(this).datetimepicker('getDate');
        $('#EndDateTime').datetimepicker('option', 'minDate', new Date(start.getTime()));
    }
});
$('#EndDateTime').datetimepicker({
    onClose: function(dateText, inst) {
        var startDateTextBox = $('#StartDateTime');
        if (startDateTextBox.val() != '') {
            var testStartDate = new Date(startDateTextBox.val());
            var testEndDate = new Date(dateText);
            if (testStartDate > testEndDate)
                startDateTextBox.val(dateText);
        }
        else {
            startDateTextBox.val(dateText);
        }
    },
    onSelect: function (selectedDateTime){
        var end = $(this).datetimepicker('getDate');
        $('#StartDateTime').datetimepicker('option', 'maxDate', new Date(end.getTime()) );
    }
});
</script> 
```

我相信这是它抛出的错误：

> HTML 解析错误：在子元素关闭之前无法修改父容器元素

现在我已经解决了这个问题，但是我想知道**它为什么会首先发生？**它是某些版本的 IE 中的错误吗？我注意到在一次安装 IE7 时，如果您安装标准更新，错误就会消失，有些人说他们在 IE8 上遇到了错误。

基本上这个问题是我的 MVC 布局页面看起来像这样：

```
<!DOCTYPE html>
<html>
<head>
    ...
</head>
<body>
<section>
    @RenderBody()
</section>
<footer>
</footer>
</body>
</html> 
```

有问题的页面包含如下内容：

```
<h2>Test</h2>
<form action="/Home/Test" data-ajax="true" data-ajax-loading="#loading-progress"
 data-ajax-method="GET" data-ajax-mode="replace" data-ajax-update="#results"
 id="form0" method="post">

    Start Time
    <br />
    <input data-val="true" data-val-required="The StartDateTime field is required."
     id="StartDateTime" name="StartDateTime" type="text" value="" />
    <br />

    End Time
    <br />
    <input data-val="true" data-val-required="The EndDateTime field is required."
     id="EndDateTime" name="EndDateTime" type="text" value="" />    <br />
    <br />

    <input type="submit" value="Search" />
    <img id="loading-progress" src="../../Content/images/ajax-loader.gif" alt="loading"/>
</form>

<div id="results"></div> 
```

后面跟着上面的脚本。`<section>`因此，带有脚本的页面会在标签内呈现。

为了解决这个问题，所有需要做的就是将 与 分开，`form`所以`script`我所做的只是呈现`@RenderBody()`如下所示的表单和`@RenderSection("Scripts")`.

```
<!DOCTYPE html>
<html>
<head>
    ...
</head>
<body>
<section>
    @RenderBody()
</section>
<footer>
</footer>
@RenderSection("scripts", false)
</body>
</html> 
```

所以这解决了这个问题，但为什么呢？标签是否`<section>`需要在脚本之前关闭？更有趣的是，这只是`DateTimePicker`脚本页面上的问题。我有很多页面都包含类似且更复杂的脚本，没有任何问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T08:44:04.363

您应该在 DOM 完成后执行该代码。将您的代码封装在：

```
$(function () {
    // your code here
}); 
```

[http://api.jquery.com/ready/](http://api.jquery.com/ready/)

# r - 在 R 中加入一个参差不齐的数组

> ID：12292654
> 
> 赞同：3
> 
> 时间：2012-09-06T03:41:11.107
> 
> 标签：r, list, join

我经常处理这种形式的对象：

```
v <- list(one = c(a = 1, b = 2, c = 3), two = c(a = 10, b = 20, d = 30, c = 40)) 
```

我想通过元素名称外部连接这些向量，以获得：

```
 index value.x value.y
1     a       1      10
2     b       2      20
3     c       3      40
4     d      NA      30 
```

我已经编写了代码来做到这一点。简而言之，将向量转换为数据帧并通过连续合并减少。但我想知道我是否一直在重新发明轮子，并且包中或 R 基础中包含一些可能优化的功能。这似乎是一个很常见的任务。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T03:50:26.527

不确定这是否比您的方法更简单，但您可以使用`reshape2`,`lapply`和 as.list。我认为`melt``dcast

```
library(reshape2)
dcast(melt(lapply(v, as.list)), L2 ~L1)
##   L2 one two
## 1  a   1  10
## 2  b   2  20
## 3  c   3  40
## 4  d  NA  30 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T04:02:59.327

以下是基本 R 中的两个选项。它们需要将您`list`转换为`data.frame`第一个。

```
v2 <- data.frame(do.call(rbind, 
                         strsplit(names(unlist(v)), "\\.")), 
                 unlist(v))
names(v2) <- c("time", "id", "value")
xtabs(value ~ id + time, v2)
#     time
#  id  one two
#    a   1  10
#    b   2  20
#    c   3  40
#    d   0  30
reshape(v2, direction="wide", idvar="id", timevar="time")
#       id value.one value.two
# one.a  a         1        10
# one.b  b         2        20
# one.c  c         3        40
# two.d  d        NA        30 
```

我不知道有一种更直接的方法来拆分`names`using 产生的结果`unlist`，但是一旦完成，您尝试进行的操作就会变得容易得多。

分配新名称以使输出更“整洁”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T04:16:34.097

这是一个基本解决方案：

```
> do.call( merge,  list(v[[1]], v[[2]], by="row.names", all=TRUE))
  Row.names  x  y
1         a  1 10
2         b  2 20
3         c  3 40
4         d NA 30 
```

如需更多长度 >2 的列表，您可以使用`as.data.frame.table`将命名向量转换为两列`data.frame`

```
> v <- list(one = c(a = 1, b = 2, c = 3), 
           two = c(a = 10, b = 20, d = 30, c = 40), 
           three = c(a = 1, b = 2, c = 3))
> setNames(Reduce(function(x,y) {
        merge(x,y,all=T, by ='Var1')},lapply(v, as.data.frame.table)),
         c('index', names(v)))

  index one two three
1     a   1  10     1
2     b   2  20     2
3     c   3  40     3
4     d  NA  30    NA 
```

# plugins - 构建 axvlc.cab 以允许在没有 Internet 访问的情况下安装插件（在 Intranet 上）

> ID：12292656
> 
> 赞同：2
> 
> 时间：2012-09-06T03:41:37.270
> 
> 标签：plugins, activex, vlc, cab

我有以下任务：在本地提供 VLC 插件，以便即使用户没有 Internet 访问权限（没有安装 VLC，只有 Intranet 访问权限）也可以安装它们。

不幸的是，VLC 网站上不再提供 axvlc.cab 文件（如此处所述[）](http://forum.videolan.org/viewtopic.php?f=16&t=97518&start=20)。

VLC 论坛中有一些说明（例如[这里](http://forum.videolan.org/viewtopic.php?f=16&t=98424&p=329958#p329960)），我知道还有大量关于创建 .cab 文件的资源。

但是，我想知道为这个特定的 VLC 插件实现这一目标的绝对最短路径是什么。我可能还应该提到我过去没有对 CAB 文件等做过任何事情。

我检查了最后一个可用的 axvlc.cab v0.8.6（可[在此处](http://download.videolan.org/pub/videolan/vlc/0.8.6/win32/)获得），看来它基本上只包含安装程序的“链接”。我想知道这是否足以： - 使安装程序在我自己的服务器上可用 - 重写 .cab 中的 .inf 文件以将其指向该“本地安装程序”而不是 VLC 网站上可用的那个？

下一个最好的想法是使用 axvlc.dll 并自己创建 cab 文件。不确定具体的步骤是什么。我了解 Microsoft Cabinet SDK 不再是 Microsoft 真正支持/推荐的东西。虽然它仍然可以在某些 3rd 方网站（例如[这个](http://www.pixelsplasher.com/_downloads/software/Microsoft-Cabinet-SDK/)）上使用，但是创建 .cab 文件的方法是通过 Visual Studio，对吗？

另外，我是否必须对要重新创建的 .cab 文件进行签名，或者如果未签名，它是否可以工作（假设我将站点添加到受信任的站点或其他站点）？我想在获得证书等之前先让它工作。

练习的第二部分，也就是为 Mozilla 和 Chrome 提供 .xpi 插件，似乎更容易，因为 VLC 仍然在他们的[网站](http://downloads.videolan.org/pub/videolan/vlc/last/win32/)上提供这个插件。

但是，如果有人可以提供 html 代码如何嵌入 FF 插件并使其从同一服务器上的本地目录下载（如果尚未安装），我也会很感激。

# ruby - 什么是 - 获取是一个目录 - 错误消息

> ID：12292658
> 
> 赞同：7
> 
> 时间：2012-09-06T03:41:58.383
> 
> 标签：ruby, rspec

我收到这个奇怪的错误...

```
/Users/gideon/Documents/ca_ruby/rubytactoe/lib/player.rb:13:in `gets': Is a directory - spec (Errno::EISDIR) 
```

player_spec.rb：

```
 require_relative '../spec_helper'

# the universe is vast and infinite...it contains a game.... but no players
describe "tic tac toe game" do
  context "the player class" do
    it "must have a human player X"do
      player = Player.new("X")
      STDOUT.should_receive(:puts).with("human move")
      # player.stub(:gets).and_return("")
      player.move_human("X")
    end
    it "must have a computer player O" do
      player = Player.new("O")
      STDOUT.should_receive(:puts).with("computer move") #what I expect to get back
      player.stub(:gets).and_return("") #what I am sending
      player.move_computer("O") #the actual call
    end
  end
end 
```

播放器.rb

```
 # require_relative 'drawgrid'

class Player

  attr_reader :boardpiece # i exist so game can read me

  def initialize(letter)
    @boardpiece = letter
  end

  def move_human(game)
    puts "human move..."
    @move = gets.chomp
  end

  def move_computer(game)
    puts "computer move..."
    # all possible third moves as 'O' (computer)
    @human_winmoves = {
        :wm01 => {:a1=>"X", :a2=>" ", :a3=>" ", :b1=>" ", :b2=>"X", :b3=>" ", :c1=>" ", :c2=>" ", :c3=>" "},
        :wm02 => {:a1=>" ", :a2=>"X", :a3=>" ", :b1=>" ", :b2=>"X", :b3=>" ", :c1=>" ", :c2=>" ", :c3=>" "},
        :wm03 => {:a1=>" ", :a2=>" ", :a3=>"X", :b1=>" ", :b2=>"X", :b3=>" ", :c1=>" ", :c2=>" ", :c3=>" "},
        :wm04 => {:a1=>" ", :a2=>" ", :a3=>" ", :b1=>"X", :b2=>"X", :b3=>" ", :c1=>" ", :c2=>" ", :c3=>" "},
        :wm05 => {:a1=>" ", :a2=>" ", :a3=>" ", :b1=>" ", :b2=>"X", :b3=>"X", :c1=>" ", :c2=>" ", :c3=>" "},
        :wm06 => {:a1=>" ", :a2=>" ", :a3=>" ", :b1=>" ", :b2=>"X", :b3=>" ", :c1=>"X", :c2=>" ", :c3=>" "},
        :wm07 => {:a1=>" ", :a2=>" ", :a3=>" ", :b1=>" ", :b2=>"X", :b3=>" ", :c1=>" ", :c2=>"X", :c3=>" "},
        :wm08 => {:a1=>" ", :a2=>" ", :a3=>" ", :b1=>" ", :b2=>"X", :b3=>" ", :c1=>" ", :c2=>" ", :c3=>"X"},
        #check those corners
        :wm09 => {:a1=>"X", :a2=>"X", :a3=>" ", :b1=>" ", :b2=>" ", :b3=>" ", :c1=>" ", :c2=>" ", :c3=>" "},
        :wm10 => {:a1=>"X", :a2=>" ", :a3=>" ", :b1=>"X", :b2=>" ", :b3=>" ", :c1=>" ", :c2=>" ", :c3=>" "},
        :wm11 => {:a1=>" ", :a2=>"X", :a3=>"X", :b1=>" ", :b2=>" ", :b3=>" ", :c1=>" ", :c2=>" ", :c3=>" "},
        :wm12 => {:a1=>" ", :a2=>" ", :a3=>"X", :b1=>" ", :b2=>" ", :b3=>"X", :c1=>" ", :c2=>" ", :c3=>" "},
        :wm13 => {:a1=>" ", :a2=>" ", :a3=>" ", :b1=>" ", :b2=>" ", :b3=>"X", :c1=>" ", :c2=>" ", :c3=>"X"},
        :wm14 => {:a1=>" ", :a2=>" ", :a3=>" ", :b1=>" ", :b2=>" ", :b3=>" ", :c1=>" ", :c2=>"X", :c3=>"X"},
        :wm15 => {:a1=>" ", :a2=>" ", :a3=>" ", :b1=>" ", :b2=>" ", :b3=>" ", :c1=>"X", :c2=>"X", :c3=>" "},
        :wm16 => {:a1=>" ", :a2=>" ", :a3=>" ", :b1=>"X", :b2=>" ", :b3=>" ", :c1=>"X", :c2=>" ", :c3=>" "},
        #check opposites
        :wm17 => {:a1=>"X", :a2=>" ", :a3=>" ", :b1=>" ", :b2=>" ", :b3=>" ", :c1=>"X", :c2=>" ", :c3=>" "},
        :wm18 => {:a1=>" ", :a2=>"X", :a3=>" ", :b1=>" ", :b2=>" ", :b3=>" ", :c1=>" ", :c2=>"X", :c3=>" "},
        :wm19 => {:a1=>" ", :a2=>" ", :a3=>"X", :b1=>" ", :b2=>" ", :b3=>" ", :c1=>" ", :c2=>" ", :c3=>"X"},
        :wm20 => {:a1=>"X", :a2=>" ", :a3=>"X", :b1=>" ", :b2=>" ", :b3=>" ", :c1=>" ", :c2=>" ", :c3=>" "},
        :wm21 => {:a1=>" ", :a2=>" ", :a3=>" ", :b1=>"X", :b2=>" ", :b3=>"X", :c1=>" ", :c2=>" ", :c3=>" "},
        :wm22 => {:a1=>"X", :a2=>" ", :a3=>" ", :b1=>" ", :b2=>" ", :b3=>" ", :c1=>" ", :c2=>" ", :c3=>"X"},
        :wm23 => {:a1=>" ", :a2=>" ", :a3=>" ", :b1=>" ", :b2=>" ", :b3=>" ", :c1=>"X", :c2=>" ", :c3=>"X"},
        :wm24 => {:a1=>" ", :a2=>" ", :a3=>"X", :b1=>" ", :b2=>" ", :b3=>" ", :c1=>"X", :c2=>" ", :c3=>" "}
    }

    @ai_winmoves = {
        :wm01 => {:a1=>"O", :a2=>" ", :a3=>" ", :b1=>" ", :b2=>"O", :b3=>" ", :c1=>" ", :c2=>" ", :c3=>" "},
        :wm02 => {:a1=>" ", :a2=>"O", :a3=>" ", :b1=>" ", :b2=>"O", :b3=>" ", :c1=>" ", :c2=>" ", :c3=>" "},
        :wm03 => {:a1=>" ", :a2=>" ", :a3=>"O", :b1=>" ", :b2=>"O", :b3=>" ", :c1=>" ", :c2=>" ", :c3=>" "},
        :wm04 => {:a1=>" ", :a2=>" ", :a3=>" ", :b1=>"O", :b2=>"O", :b3=>" ", :c1=>" ", :c2=>" ", :c3=>" "},
        :wm05 => {:a1=>" ", :a2=>" ", :a3=>" ", :b1=>" ", :b2=>"O", :b3=>"O", :c1=>" ", :c2=>" ", :c3=>" "},
        :wm06 => {:a1=>" ", :a2=>" ", :a3=>" ", :b1=>" ", :b2=>"O", :b3=>" ", :c1=>"O", :c2=>" ", :c3=>" "},
        :wm07 => {:a1=>" ", :a2=>" ", :a3=>" ", :b1=>" ", :b2=>"O", :b3=>" ", :c1=>" ", :c2=>"O", :c3=>" "},
        :wm08 => {:a1=>" ", :a2=>" ", :a3=>" ", :b1=>" ", :b2=>"O", :b3=>" ", :c1=>" ", :c2=>" ", :c3=>"O"},
        #check those corners
        :wm09 => {:a1=>"O", :a2=>"O", :a3=>" ", :b1=>" ", :b2=>" ", :b3=>" ", :c1=>" ", :c2=>" ", :c3=>" "},
        :wm10 => {:a1=>"O", :a2=>" ", :a3=>" ", :b1=>"O", :b2=>" ", :b3=>" ", :c1=>" ", :c2=>" ", :c3=>" "},
        :wm11 => {:a1=>" ", :a2=>"O", :a3=>"O", :b1=>" ", :b2=>" ", :b3=>" ", :c1=>" ", :c2=>" ", :c3=>" "},
        :wm12 => {:a1=>" ", :a2=>" ", :a3=>"O", :b1=>" ", :b2=>" ", :b3=>"O", :c1=>" ", :c2=>" ", :c3=>" "},
        :wm13 => {:a1=>" ", :a2=>" ", :a3=>" ", :b1=>" ", :b2=>" ", :b3=>"O", :c1=>" ", :c2=>" ", :c3=>"O"},
        :wm14 => {:a1=>" ", :a2=>" ", :a3=>" ", :b1=>" ", :b2=>" ", :b3=>" ", :c1=>" ", :c2=>"O", :c3=>"O"},
        :wm15 => {:a1=>" ", :a2=>" ", :a3=>" ", :b1=>" ", :b2=>" ", :b3=>" ", :c1=>"O", :c2=>"O", :c3=>" "},
        :wm16 => {:a1=>" ", :a2=>" ", :a3=>" ", :b1=>"O", :b2=>" ", :b3=>" ", :c1=>"O", :c2=>" ", :c3=>" "},
        #check opposites
        :wm17 => {:a1=>"O", :a2=>" ", :a3=>" ", :b1=>" ", :b2=>" ", :b3=>" ", :c1=>"O", :c2=>" ", :c3=>" "},
        :wm18 => {:a1=>" ", :a2=>"O", :a3=>" ", :b1=>" ", :b2=>" ", :b3=>" ", :c1=>" ", :c2=>"O", :c3=>" "},
        :wm19 => {:a1=>" ", :a2=>" ", :a3=>"O", :b1=>" ", :b2=>" ", :b3=>" ", :c1=>" ", :c2=>" ", :c3=>"O"},
        :wm20 => {:a1=>"O", :a2=>" ", :a3=>"O", :b1=>" ", :b2=>" ", :b3=>" ", :c1=>" ", :c2=>" ", :c3=>" "},
        :wm21 => {:a1=>" ", :a2=>" ", :a3=>" ", :b1=>"O", :b2=>" ", :b3=>"O", :c1=>" ", :c2=>" ", :c3=>" "},
        :wm22 => {:a1=>"O", :a2=>" ", :a3=>" ", :b1=>" ", :b2=>" ", :b3=>" ", :c1=>" ", :c2=>" ", :c3=>"O"},
        :wm23 => {:a1=>" ", :a2=>" ", :a3=>" ", :b1=>" ", :b2=>" ", :b3=>" ", :c1=>"O", :c2=>" ", :c3=>"O"},
        :wm24 => {:a1=>" ", :a2=>" ", :a3=>"O", :b1=>" ", :b2=>" ", :b3=>" ", :c1=>"O", :c2=>" ", :c3=>" "}
    }
    # match current answers located in @thegrid with possible @anskey array, iterate for each item
    @anskey={
        :wm01=>"c3",:wm02=>"c2",:wm03=>"c1",:wm04=>"b3",:wm05=>"b1",:wm06=>"a3",:wm07=>"a2",:wm08=>"a1",
        :wm09=>"a3",:wm10=>"c1",:wm11=>"a1",:wm12=>"c3",:wm13=>"c3",:wm14=>"c1",:wm15=>"c3",:wm16=>"a1",
        :wm17=>"b1",:wm18=>"b2",:wm19=>"b3",:wm20=>"a2",:wm21=>"b2",:wm22=>"b2",:wm23=>"c2",:wm24=>"b2"
    }
    #
    # scan board for available move locations
    # select all values where value is O for thegrid and copy those into keys_with_o
    # compare result to ai_winmoves
    # keys_with_o = $thegrid.select{ |k, v| v == "O" }.keys
    # matching_moves = @ai_winmoves.select{ |k, v| v.select{ |k, v| v == "O" }.keys == keys_with_o }
    # puts "matching_moves: "
    # puts matching_moves

    # select all values where value is X for thegrid and copy those into keys_with_x
    keys_with_x = $thegrid.select{ |k, v| v == "X" }.keys
    block_moves = @ai_winmoves.select{ |k, v| v == "X" }.keys

    #DEBUG puts "keys_with_x: "
    #DEBUG puts keys_with_x.to_s

    # human_keys = v.select{ |k, v| v == "X"}.keys
    @intersection = block_moves & keys_with_x

    @thing = [] # initialize thing array

    @human_winmoves.each do |k,v| # for test - go threw each win moves.
      #get common elements between two arrays..recall from above that v contains a hash
      human_keys = v.select{ |k, v| v == "X"}.keys
      @intersection = human_keys & keys_with_x
      if $thegrid[:b2] == " "   #AND center spot is empty
        ai_spot = "b2"
        puts "take center "+ai_spot
        @move = ai_spot.to_sym  #must return this answer as a symbol
        return @move
      elsif @intersection.length >= 2
        #DEBUG puts "where does a intersect b"
        #DEBUG puts @intersection.to_s 
        #DEBUG puts "answer key:"
        #DEBUG puts k
        @thing << k # adds per iteration
        #DEBUG puts "@thing array"
        #DEBUG puts @thing.to_s # for test - find each intersection
        #DEBUG puts "@thing array first key"
        #DEBUG puts @thing.last.to_s
        #DEBUG puts "value"
        #DEBUG puts @anskey[@thing.last]
        #DEBUG puts "symbol?"
        answer = @anskey[@thing.last].to_sym
        #DEBUG puts answer.is_a?(Symbol)
        @move = answer # for test - at last intersection value found...return it as move value 
      end
    end # END @human_winmoves.each do |k,v|
    return @move # had this guy in the wrong place
  end
end 
```

谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-01T16:57:13.303

当你打电话时`gets.chomp`，你实际上指的是[`Kernel#gets`](http://www.ruby-doc.org/core-2.1.2/Kernel.html#method-i-gets)，它需要一个文件来读取。如果您传递命令行参数，它们将被解释为这些输入文件所`Kernel#gets`期望的。如果其中一个 args 是目录路径，那么您将收到您提到的错误。

你想[`IO#gets`](http://www.ruby-doc.org/core-2.1.2/IO.html#method-i-gets)改用。这将按预期工作：

```
def move_human(game)
  puts "human move..."
  @move = $stdin.gets.chomp
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-23T08:47:26.040

**您可能将目录名称作为命令行参数。**

Kernel#gets 从作为命令行参数给出的文件中读取。您可能在命令行中给出了目录名而不是文件名。

如果命令行中没有参数，则从 STDIN 读取。

# jquery - 输入框追加后聚焦并选择所有输入框

> ID：12292661
> 
> 赞同：1
> 
> 时间：2012-09-06T03:42:10.240
> 
> 标签：jquery

我需要实现一个生成输入框，并且在生成时有一个默认值，该默认值应该自动聚焦并且应该选择所有文本；

这是我在 JS 中的函数，假设已单击按钮并调用此函数

```
function createFolder()
{
   var newTextBoxDiv = $(document.createElement('div')).attr({   
                        "id" : 'TextBoxDiv',
                        "class" : 'TextBoxDiv+ctr'
                        });   
   newTextBoxDiv.html('<input type="text" name="folder_name" id="folder_name"   value="New Folder"/>');

   $("#folder_name").focus(function() { $(this).select(); } );

   newTextBoxDiv.appendTo("#fileTreeView");

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T04:02:59.773

在某处设置计数器以跟踪新 ID 并将值插入到新添加的元素定义中。并在附加事件之前附加元素。交换函数中的最后两行代码。

```
var folderCount = 0;

function createFolder() {

    var newTextBoxDiv = $(document.createElement('div')).attr({
        "id": 'TextBoxDiv_' + folderCount ,
        "class": 'TextBoxDiv+ctr'
    });
    newTextBoxDiv.html('<input type="text" name="folder_name_' + folderCount + '" id="folder_name_' + folderCount + '" value="New Folder"/>');
    newTextBoxDiv.appendTo("#fileTreeView");

    $("#folder_name_" + folderCount).focus().select();

    folderCount++;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T03:48:10.517

`$("#folder_name")`当元素尚未附加到文档时将返回空。

尝试这个：

```
function createFolder() {
    var newTextBoxDiv = $('<div id="TextBoxDiv"/>').addClass("TextBoxDiv+ctr");
    var input = $('<input type="text" name="folder_name" id="folder_name"  value="New Folder"/>').focus(function () {
        $(this).select();
    });
    newTextBoxDiv.append(input).appendTo("#fileTreeView");
} 
```

而且我假设该函数将被多次调用，那么您需要为这些元素创建唯一的 ID。

# javascript - 引用设置为异步的属性

> ID：12292666
> 
> 赞同：0
> 
> 时间：2012-09-06T03:43:22.500
> 
> 标签：javascript, indexeddb

我正在尝试重构我编写的一些使用 IndexedDb 的代码。理想情况下，我想做的是创建一个小型业务库，抽象出使用 IndexedDb 的一些丑陋之处。例如，我将创建一个 toDoList 对象，该对象将具有一些获取、添加、更新、删除的方法，并且在这些方法中我将调用 IndexedDb。

这是我所拥有的一个例子：

```
var MyApp = MyApp || {};

(function() {

  var req = indexedDB.open("todostore", 1);

  req.onerror = function(e) { console.log(e); };

  req.onupgradeneeded = function (e) {
    var newDB = e.target.result;
    newDB.createObjectStore("todostore", { keyPath : "id", autoIncrement : true });
  };

  req.onsuccess = function () {
    MyApp.db = req.result;
  };

})();

MyApp.todolist = (function() {
  return {
    get : function(key, success) {
      var tran = MyApp.db.transaction("todostore");
      var req = tran.objectStore("todostore").get(key);

      req.onsuccess = function (e) {           
        success(e.target.result);
      };
    }
  };
})();

//consumer of library would ideally just do something like this:

var worked = function(e) {
   //do something...
}
MyApp.todolist.get(1, worked); 
```

问题是 MyApp.db 在 get 方法中未定义，因为尚未触发 onsuccess 回调。我还是 javascript 的新手，所以想知道我可以使用哪些选项/模式。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T03:55:00.137

可能有 1000 种不同的方法来处理这个问题。但我建议在您的“get”方法中简单地包含一个失败选项，并在数据库未准备好时触发该选项：

```
MyApp.todolist = (function() {
  return {
    get : function(key, success, failure) {
      if(!MyApp.db) { 
        if(typeof failure === "function") {
          failure("Database is not ready yet");
        } 
        return;
      }
      var tran = MyApp.db.transaction("todostore");
      var req = tran.objectStore("todostore").get(key);

      req.onsuccess = function (e) {           
        success(e.target.result);
      };
    }
  };
})();

//consumer of library would ideally just do something like this:

var worked = function(e) {
   //do something...
};

var didntWork = function(e) {
   //report the error, e.
};

MyApp.todolist.get(1, worked, didntWork); 
```

您还应该考虑为您的客户端提供一个回调方法来确定数据库何时准备好（或未准备好）。如果不出意外，至少提供一些方法让他们通过方法轻松检查数据库是否准备好。根据您希望如何向用户展示该工具，您可以使用许多选项。

# c++ - 给定具有奇数个节点的单个链表，通过仅遍历列表一次找到中间节点的两种方法是什么？

> ID：12292669
> 
> 赞同：0
> 
> 时间：2012-09-06T03:44:13.620
> 
> 标签：c++, list, linked-list

这是在 IBM ISL 采访中提出的。

我经历了这个问题，[如何在单次遍历中找到单个链表的中间节点（如果未给出列表的长度）](https://stackoverflow.com/questions/6703880/how-to-find-the-middle-node-of-the-single-linked-list-in-single-traversal-if-le)，但它不包含我正在寻找的答案，所以再次在这里发布。

我有一个单链表，假设节点数是奇数。告诉我通过遍历列表一次找到中间节点的两种方法？

我回答说，用 2 个指针 p1 和 p2 将 p2 移动 2 个节点，将 p1 移动 1 个节点。当 p2 为空时，p1 在中间节点。

面试官回答：这是最简单的方法，使用 2 指针。再告诉我一种方法。提示：是否有可以使用的编译器属性？

有人可以给我一种使用提示的方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-06T04:25:31.517

```
#include <vector>
#include <list>

typedef std::list<int> listT;

listT::const_iterator
find_middle(const listT &list)
{
  std::vector<listT::const_iterator> v;
  for (listT::const_iterator i = list.begin() ; i != list.end() ; ++i)
    v.push_back(i);

  return v[v.size() / 2];
} 
```

# wso2 - Stratos 上的 WSO2 API Manager 部署

> ID：12292674
> 
> 赞同：0
> 
> 时间：2012-09-06T03:45:35.203
> 
> 标签：wso2, wso2-am, wso2stratos

API Manager 可以部署在 Stratos 上吗？操作方法在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T05:48:24.733

目前不支持 API Manager 作为云服务。但是，API Manager 将来会作为云服务提供。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-21T09:25:19.137

使用 WSO2 Private PAAS 4.0.0 版本，您可以将 WSO2 api 管理器与 Stratos 一起使用。

请查找快速入门指南。 [https://docs.wso2.com/display/PP400/Quick+Start+Guide](https://docs.wso2.com/display/PP400/Quick+Start+Guide)

一旦您运行 boot.sh 来设置 WSO2 Private PAAS ，它就会询问您是否要部署 APIM (API Manager) 服务。然后您可以输入“Y”并继续进行 WS02 api 管理器部署。

# jquery - jquery UI-tabs 在它们附近定位弹出 div

> ID：12292678
> 
> 赞同：1
> 
> 时间：2012-09-06T03:45:55.260
> 
> 标签：jquery, jquery-ui

对于我的页面，我使用 j-query 的 ui-tabs 来分隔一些元素。我正在使用 .mouseover 和 .mouseout 弹出一个小帮助 div 并希望它在鼠标指针附近对齐。

不幸的是，使用 pageX/pageY 定位它不起作用，所以我手动将它移回。应该有办法找到它的位置，对吧？由于我使用的是制表符，我是否必须在某处计算偏移量？

这是我使用它的方式：

```
$(".hashelp").mouseover(function(e){
        offsety = 5;
        offsetx = 5; //pop-up slightly below and right of the mouse.
        if($(this).attr("id")=="tablist")
        {
            offsety = -200;
            offsetx = -50;
        }
        else if($(this).parent().hasClass("ui-tabs-panel"))
        {
            console.log("pagex: "+e.pageX+" pagey: "+e.pageY+" helpx: "+helpx+" helpy: "+helpy);
            offsety = -200;
            offsetx = -15;
        }
        if(firsttime){
        $(this).find(".help").eq(0).css("top",(e.pageY+offsety));
        $(this).find(".help").eq(0).css("left",(e.pageX+offsetx));
        $(this).find(".help").eq(0).show();
        }

    }).mouseout(function(){
        $(this).find(".help").eq(0).hide();
    }); 
```

这是选项卡的 html：我使用 $("#tabgroups").tabs() 创建它。

```
<div id="tabgroups">
      <ul id="tablist" class="hashelp">
        <li><a href="#tab1">tab1</a></li>
        <div class="help" style="display:none;">
        please choose the right tab
        </div>
     </ul>
   <div id="tab1">
    <ul id="common" class="hashelp">
      <li><button>commonchoice1<button></li>
    <div class="help" style="display:none;">
    Some help stuff
   </div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T22:57:30.657

在查看了 div 的位置后，我解决了这个问题。由于它们是嵌套的，它们的行为很糟糕，所以我分离了每个 div 并将它们附加到 body 元素中，这样它们就可以得到正确的 x & y。现在它工作得很好。

```
var helppopup;
$(".hashelp").mouseover(function(e){
        offsety = 5;
        offsetx = 5;
            helppopup =  $(this).find(".help").eq(0);
        if(firsttime){
        $("body").append(helppopup.detach());
        helppopup.css("top",(e.pageY+offsety));
        helppopup.css("left",(e.pageX+offsetx));
        helppopup.show();
        }

    }).mouseout(function(){
        $(this).append(helppopup.detach())
        helppopup.hide();
    }); 
```

# git - 用于 http 和 ssh 的 Gitolite 服务器端设置

> ID：12292683
> 
> 赞同：3
> 
> 时间：2012-09-06T03:46:54.127
> 
> 标签：git, http, ssh, gitolite

我正在尝试使用 gitolite 设置一个 git 服务器。到目前为止，我的服务器正在使用 ssh，我并没有尝试在其之上添加 http 支持（最终目标是使用 LDAP 进行身份验证）

我已经关注 了[http://sitaramc.github.com/gitolite/ssh-and-http.html](http://sitaramc.github.com/gitolite/ssh-and-http.html) how-to 文档。

我以为我已经完成了所有设置，所以我尝试了：

`git clone http://myServer/testing`

结果是：

`Cloning into 'testing'... fatal: http://myServer/testing/info/refs not found: did you run git update-server-info on the server?`

我尝试`git update-server-info`从实际的服务器测试存储库运行，结果仍然相同。

在`git-daemon-export-ok`testing.git 存储库中有。

有人可以帮我解决这个问题吗？我不知道我应该从哪里开始..

*附加信息：*
我正在使用 Arch Linux（服务器端）

输出`sudo suexec -V`：

```
-D AP_DOC_ROOT="/srv/http"
-D AP_GID_MIN=99
-D AP_HTTPD_USER="http"
-D AP_LOG_EXEC="/var/log/httpd/suexec.log"
-D AP_SAFE_PATH="/usr/local/bin:/usr/bin:/bin"
-D AP_UID_MIN=99
-D AP_USERDIR_SUFFIX="public_html" 
```

下面是我的 /etc/httpd/conf/httpd.conf 中的 VirtualHost 部分

在下面的部分中，服务器名是我从*`hostname`*命令 中得到的

```
<VirtualHost *:80>  
    ServerName        servername  
    ServerAlias       servername
    ServerAdmin       admin@server.com

    DocumentRoot /srv/http/git  
    <Directory /srv/http/git>  
        Options       None  
        AllowOverride none  
        Order         allow,deny  
        Allow         from all  
    </Directory>  

    SuexecUserGroup git git
    ScriptAlias /git/ /srv/http/bin/gitolite-suexec-wrapper.sh/
    ScriptAlias /gitmob/ /srv/http/bin/gitolite-suexec-wrapper.sh/

    <Location /git>
        AuthType Basic
        AuthName "Git Access"
        Require valid-user
        AuthUserFile /etc/httpd/conf/extra/git.passwd
    </Location>       
</VirtualHost> 
```

输出自`ls -l /srv/http/`

```
drwxr-xr-x 2 git  git  4096 Sep  6 22:02 bin
drwxr-xr-x 2 http http 4096 Sep  6 22:00 git 
```

输出自`ls -l /srv/http/bin/gitolite-suexec-wrapper.sh`

```
-rwx------ 1 git git 196 Sep  6 22:02 /srv/http/bin/gitolite-suexec-wrapper.sh 
```

的内容`gitolite-suexec-wrapper.sh`：

```
#!/bin/bash
#
# Suexec wrapper for gitolite-shell
#

export GIT_PROJECT_ROOT="/home/git/repositories"
export GITOLITE_HTTP_HOME="/home/git"

exec ${GITOLITE_HTTP_HOME}/gitolite/src/gitolite-shell 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T04:11:27.713

您的配置定义了一个别名 /git/ ，它将调用您的 gitolite 包装器。
这意味着它只会为地址调用它`yourServer/git/...`

你至少应该尝试你的克隆：

```
git clone http://myServer/git/testing 
```

正如[OP 提升者在](https://stackoverflow.com/users/1602174/hoistyler)[此答案](https://stackoverflow.com/a/12344607/6309)中引用的那样，唯一剩下的问题是基于文件登录的身份验证问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T02:03:13.930

感谢 VonC 的指导，我现在已经解决了这个问题。

我试过`git clone http://myServer/git/testing`了，它给了我

```
Cloning into 'testing'...
Username for 'http://myServer': git
Password for 'http://git@myServer': 
fatal: Authentication failed 
```

我查看了日志，发现我的 git.passwd 文件格式不正确（我忘记了上次是如何创建该文件的......）

我基本上不得不再次创建我的 git.passwd 文件：

`htpasswd -c git.passwd git`

现在它起作用了！再次感谢 VonC

# linux - Python 和 Skype4Py 中 Skype.Attach() 中的分段错误

> ID：12292687
> 
> 赞同：1
> 
> 时间：2012-09-06T03:47:30.407
> 
> 标签：linux, python-2.7, skype4py

我尝试为 Skype4Py 运行一个简单的 python 代码，这是我的代码

```
import Skype4Py
import logging

logging.basicConfig(level=logging.DEBUG)
print 'OK'
# Create Skype instance
print 'CREATE'
skype = Skype4Py.Skype()
print 'CREATED'

# Connect Skype object to Skype client
print 'CONNECT'
skype.Attach()
print 'CONNECTED'

print 'Your full name:', skype.CurrentUser.FullName
print 'Your contacts:'
for user in skype.Friends:
  print 'LOOP'
  print '    ', user.FullName
  print 'DONE' 
```

我的输出是这个

```
OK
CREATE
INFO:Skype4Py.skype.Skype:object created
INFO:Skype4Py.api.posix_dbus.SkypeAPI:opened
CREATED
CONNECT
INFO:Skype4Py.api.posix_dbus.SkypeAPI:thread started
Segmentation fault
Segmentation in skype.Attach(). 
```

任何人都知道如何解决这个问题？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T20:15:08.237

使用 X11 传输来避免分段错误

[https://github.com/opensourcehacker/sevabot/blob/master/sevabot/bot.py#L30](https://github.com/opensourcehacker/sevabot/blob/master/sevabot/bot.py#L30)

还要使用 Skype4Py 的补丁版本，不要尝试使用你的 Linux 发行版提供的任何东西

[https://github.com/stigkj/Skype4Py](https://github.com/stigkj/Skype4Py)

有关 Skype4Py 的段错误的更多信息

[https://github.com/opensourcehacker/sevabot#segfaults](https://github.com/opensourcehacker/sevabot#segfaults)

# jboss - 从 JBoss Netty HttpRequest 获取客户端 IP 地址

> ID：12292694
> 
> 赞同：1
> 
> 时间：2012-09-06T03:48:19.487
> 
> 标签：jboss, netty

我尝试使用 HttpRequest.getHeaders() 获取标头列表，但我只获得了一些标头，其中没有一个是指客户端的 IP 地址。

是否可以使用 HttpRequest 对象获取客户端的 IP

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-08-20T08:19:10.993

这是一个完整的示例代码

```
@Override
public void channelRead(ChannelHandlerContext ctx, Object msg) {
    InetSocketAddress socketAddress = (InetSocketAddress) ctx.channel().remoteAddress();
    InetAddress inetaddress = socketAddress.getAddress();
    String ipAddress = inetaddress.getHostAddress(); // IP address of client
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T10:13:03.667

您可以只使用频道。

```
Channel.getRemoteAddress(); 
```

# asp.net-mvc-3 - 子动作异常处理程序

> ID：12292696
> 
> 赞同：1
> 
> 时间：2012-09-06T03:49:46.737
> 
> 标签：asp.net-mvc-3, exception, filter, child-actions

我有一个简单的控制器：

```
public class RedirectController : Controller {
    public ActionResult Index() {
        return View();
    }

    [ChildActionOnly]
    public ActionResult Child1() {
        return View();
    }

    [ChildActionOnly]
    public ActionResult Child2() {
        return View();
    }

[ChildActionOnly]
    public ActionResult Child3() {
        throw new Exception("abc");        
    }
} 
```

索引.cshtml

```
...
@Html.Action("Child1")
... 
```

Child1.cshtml

```
...
@Html.Action("Child2")
... 
```

Child2.cshtml

```
...
@Html.Action("Child3")
... 
```

Child3 会抛出异常 throw new Exception("abc") 出于某种原因，我为 error.cshtml 设置了布局，最后导出的内容包含 Index.cshtml 、 Child1.cshtml 、 Child2.cshtml 和 Error.cshtml

所以我定义了一个自定义的 ExceptionFilter 来处理这个异常

```
public class MyExceptionAttribute : ActionFilterAttribute , IExceptionFilter {

    public void OnException(ExceptionContext filterContext) {
    ...
        ...
        if(filterContext.ParentActionViewContext != null) {
    //remove parent actions' exported contents
            ViewContext par = filterContext.ParentActionViewContext;
            while(null != par){
                var wtr = (StringWriter)par.Writer;
                wtr.GetStringBuilder().Clear();
                par = par.ParentActionViewContext;
            }

        }
...
... 
```

做完这个过滤后，最终输出的html去掉了“Index”、“Child1”和“Child2”的内容，但是“Layout”的内容还是输出了。

```
<html>
    ...(Layout content)
    <html>
    ...(Error.cshtml content)
    </html>
</html> 
```

有没有办法删除除错误内容之外的所有内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T05:09:42.753

我有一个解决方案：

当子动作抛出异常时，自定义 ExceptionFilter 处理它，并删除所有父动作的输出，但布局。

因此，在 _ViewStart.cshtml 中：

```
@{
if(!this.ViewContext.IsChildAction) {
    Layout = "~/Views/Shared/_Layout.cshtml";
}
} 
```

# ipad - 如何将 glVerttexAttribPointer 与 glBufferData 结合使用？

> ID：12292698
> 
> 赞同：1
> 
> 时间：2012-09-06T03:50:04.390
> 
> 标签：ipad, opengl-es-2.0, vertex-buffer

在 iOS 5 的股票“旋转立方体”OpenGL 示例中，他们有以下代码：

```
glBufferData(GL_ARRAY_BUFFER, sizeof(gCubeVertexData), gCubeVertexData, GL_STATIC_DRAW);

glEnableVertexAttribArray(GLKVertexAttribPosition);
glVertexAttribPointer(GLKVertexAttribPosition, 3, GL_FLOAT, GL_FALSE, 24, BUFFER_OFFSET(0));
glEnableVertexAttribArray(GLKVertexAttribNormal);
glVertexAttribPointer(GLKVertexAttribNormal, 3, GL_FLOAT, GL_FALSE, 24, BUFFER_OFFSET(12)); 
```

混乱的部分是`glVertexAttribPointer`. [文档](http://www.opengl.org/sdk/docs/man/xhtml/glVertexAttribPointer.xml)说最后一个参数是指向数组的指针。

但在这个程序中，他们使用的是直数。确实，`BUFFER_OFFSET`定义为

```
#define BUFFER_OFFSET(i) ((char *)NULL + (i)) 
```

那么他们是否依赖于`gCubeVertexData`从内存地址 0 开始的数组？

所以，我不明白两件事：

1.  ****为什么当我“更正”第三行代码时****示例不起作用**（没有绘制立方体）**

     ****```
    glVertexAttribPointer(GLKVertexAttribPosition, 3, GL_FLOAT, GL_FALSE, 24, gCubeVertexData ); 
    ```**** 
*****   调用 glVertexAttribPointer 的正确方法是什么？**** 

 ****我认为你应该为最后一个索引传递一个内存指针，如文档所述。实际上，这里的[另一个示例](http://developer.apple.com/library/ios/#documentation/3DDrawing/Conceptual/OpenGLES_ProgrammingGuide/TechniquesforWorkingwithVertexData/TechniquesforWorkingwithVertexData.html)使用了 glVertexAttribPointer：

```
glVertexAttribPointer(ATTRIB_POSITION, 2, GL_FLOAT, GL_FALSE, sizeof(vertexStruct), &vertices[0].position);
glEnableVertexAttribArray(ATTRIB_POSITION);
glVertexAttribPointer(ATTRIB_COLOR, 4, GL_UNSIGNED_BYTE, GL_TRUE, sizeof(vertexStruct), &vertices[0].color);
glEnableVertexAttribArray(ATTRIB_COLOR); 
```

所以你在后一个例子中看到他们传递了*指针（最后一个参数）的**内存地址*，而不是直数。

 ** * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T05:33:33.147

glVertexAttribPointer 可以通过两种方式使用：

1) 使用客户端顶点数组。在这种情况下，最后一个参数是一个指向数组的指针，你是对的。

2）除了用作指针之外，如果您在链接的文档页面中进一步阅读，它会显示：

> 如果一个非零命名缓冲区对象绑定到 GL_ARRAY_BUFFER 目标（请参阅 glBindBuffer），同时指定了一个通用顶点属性数组，则指针被视为缓冲区对象数据存储中的字节偏移量。

这适用于当您使用 glVertexAttribPointer 指向 VBO 时，您之前已上传到 opengl (glBindBuffer/glBufferData) 的缓冲区。

澄清：

如果您没有与 glBindBuffer 绑定的活动缓冲区，则 glVertexAttribArray 需要一个指针。如果确实有缓冲区绑定，则 glVertexAttribArray 将偏移量放入绑定缓冲区。`0`如果您想从缓冲区的开头开始绘制，这将是该值。*****

# html - SSL 站点上上传的文件是否已加密？

> ID：12292701
> 
> 赞同：0
> 
> 时间：2012-09-06T03:50:38.443
> 
> 标签：html, ssl, security

在 HTML 中使用表单，使得输入为：

```
<input id="afile" type="file" accept="*.csv" name="afile"> 
```

并通过 javascript 发送，例如：

```
 $(function() {
    $('#afile').change(onChange);
  });

  function onChange() {
    var file = this.files[0];
    var fd = new FormData();
    fd.append("afile", file);

    var xhr = new XMLHttpRequest();
    xhr.open('POST', 'upload/handle_upload.php5', true);
    xhr.send(fd);
  } 
```

我在 Firebug 和 Live HTTP 标头的 Net 面板中查看请求数据，但所有数据都以纯文本形式显示（我假设它们显示的是预加密）。

文件在传输前是否加密？如果是这样，文件何时被加密？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T03:54:51.057

如果这是一个 HTTPS 连接，它会在离开浏览器之前被加密。为方便起见，浏览器内部的网络面板可能会显示已解密。如果您使用了网络嗅探器，您应该能够验证连接是否安全。

> 文件在传输前是否加密？

文件本身没有加密，但完整的 HTTP 请求是加密的（文件就在里面）。

# c# - 异步和等待跳过任务

> ID：12292704
> 
> 赞同：0
> 
> 时间：2012-09-06T03:50:49.317
> 
> 标签：c#, visual-studio-2012, kinect

好吧，以前，我的问题在不到 3 分钟的时间内就结束了，所以如果我愿意，我什至无法添加细节。

所以又来了，这次是代码。所以我现在遇到的问题就是这个。我的程序会将我的 kinect 倾斜到 -15 度，截屏然后将其移动到 0 度。这里的问题是它会跳过一些代码。

```
private async void DangerScreenshotFunction()
    {
        kinect.ElevationAngle = -15;
        var hiddenTimerTask = Task.Factory.StartNew(() => { Thread.Sleep(3000); });
        await hiddenTimerTask;//These 3 lines works

        var TiltTask = Task.Factory.StartNew(() =>
        {
            string path = TakeImage(0);
            imageOne = PathToMemory(path);
            ImageComparision(imageOne, imageDB);
            imageOne = null;
        });
        await TiltTask;//This whole part is SKIPPED

        kinect.ElevationAngle = 0;
        var returnToOrigin = Task.Factory.StartNew(() => { Thread.Sleep(2000); });
        await returnToOrigin;//This part works.

    } 
```

这在没有任何异步或等待的情况下工作。这里有问题吗？

# javascript - 通过 CSS 选择器将参数传递给 javascript 函数

> ID：12292705
> 
> 赞同：5
> 
> 时间：2012-09-06T03:50:51.753
> 
> 标签：javascript, jquery, html, css, dom

所以，简而言之，我有一套 .li

```
<ul>
  <li class="lmit_1"><a href="#" >Home</a></li>
  <li class="lmit_2"><a href="#">About us</a></li>
  <li class="lmit_3"><a href="#">Who we are</a></li>
  <li class="lmit_4"><a href="#">Whats new</a></li>
  <li class="lmit_5"><a href="#">Contact Us</a></li>    
</ul> 
```

和我的 javascript (jQuery)

```
<script>
  $(".lmit_" + id).click(function () {
    alert(id);
  });
</script> 
```

我想要做的是接收css类末尾的任何数字作为参数（例如.lmit_3将允许id = 3），因此alert（id）应该导致弹出数字3？我对编程和javascript都是新手，所以如果答案让我眼前一亮，我深表歉意......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T03:52:25.553

演示：http: [//jsfiddle.net/sFwZj/1/](http://jsfiddle.net/sFwZj/1/)

```
$('li').click(function () {
  alert($(this).attr('class').split('_')[1]);
}); 
```

在您的代码中，您使用未声明的变量调用，因此当您尝试时`id`它应该抛出错误。`ReferenceError: id is not defined``".lmit_" + id`

而且我认为你不应该使用`id`这个`class`，也正如提到的那样，如果你将数字存储在`data-id`属性中会更好，那么你可以通过`$(this).data('id')`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T03:57:05.913

```
$("li").click(function () {
  alert(this.className.split('_')[1]);
}); 
```

应该这样做

但为什么不

```
<ul>
     <li class="lmit" id="lmit_1"><a href="#" >Home</a></li>
     <li class="lmit" id="lmit_2><a href="#">About us</a></li> 
```

和

```
$(".lmit").click(function () {
  alert(this.id.split('_')[1]);
}) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T04:04:28.737

最好将要使用的任何数据存储在数据属性中。这样，您就不会过于依赖类和 id（以及字符串处理），并且在格式和功能之间有一些分离。

您的 html 将如下所示：

```
 <ul>
<li class="lmit" data-myattr="1"><a href="#" >Home</a></li>
<li class="lmit" data-myattr="2"><a href="#">About us</a></li>
</ul> 
```

请注意，data-myattr 可以被称为任何带有“data-”前缀的东西。

访问您的数据

```
 $(".lmit").click(function(){
//you can access it as an attribute
        alert($(this).attr("data-myattr"));
//or you can access it as data
           alert($(this).data("myattr"));
        }) 
```

或者对于更无类的解决方案，使用事件委托

```
$("ul").delegate("li", "click", function() {
 alert($(this).data("myattr"));
}); 
```

所以你的 html 中根本不需要 lmit 类

```
 <ul>
<li data-myattr="1"><a href="#" >Home</a></li>
<li data-myattr="2"><a href="#">About us</a></li>
</ul> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-06T06:03:26.617

```
$('[li][class^="lmit_"]').click(function () {
  alert($(this).attr('class').split('_')[1]);
}); 
```

**如果你使用 $('li') 如果你点击任何 li 它没有“limit_”类也将被解雇。**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-06T04:00:55.387

尝试这个

```
$('ul li').on('click', function(){
    alert($(this).prop('class').split('_')[1]);
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-06T04:07:35.173

上面的答案都是正确的。如果您想获取 中的项目编号`<ul>`，您还有其他选择。

```
$('li').click(function() {
    alert($(this).index()+1);
}); 
```

好处是您不必生成类名（如果这就是它们的全部用途）

# php - 创建数据库模板

> ID：12292706
> 
> 赞同：0
> 
> 时间：2012-09-06T03:51:22.207
> 
> 标签：php

php中最好的方法是什么，或者一些逻辑......转换这个表模板

```
$tmpl ="创建表`wpsc_claimed_stock` (
  `product_id` bigint(20) unsigned NOT NULL DEFAULT '0',
  `variation_stock_id` bigint(20) unsigned NOT NULL DEFAULT '0',
  `stock_claimed` 浮动非空，
  `last_activity` 日期时间不为空，
  `cart_id` varchar(255) NOT NULL DEFAULT '0',
  `cart_submitted` varchar(1) NOT NULL DEFAULT '0',
  唯一键`unique_key`（`product_id`，`variation_stock_id`，`cart_id`），
  KEY `last_activity` (`last_activity`),
  KEY `cart_submitted` (`cart_submitted`)
)";

```

变成这种格式：注意：这个snipplet取自wp-ecommerce（wordpress插件）

```
$table_name = 'wpsc_claimed_stock'; /* !wpsc_claimed_stock */
$wpsc_database_template[$table_name]['columns']['product_id'] = "bigint(20) UNSIGNED NOT NULL DEFAULT '0'";
$wpsc_database_template[$table_name]['columns']['variation_stock_id'] = "bigint(20) UNSIGNED NOT NULL DEFAULT '0'";
$wpsc_database_template[$table_name]['columns']['stock_claimed'] = "FLOAT NOT NULL";
$wpsc_database_template[$table_name]['columns']['last_activity'] = "DATETIME NOT NULL";
$wpsc_database_template[$table_name]['columns']['cart_id'] = "VARCHAR(255) NOT NULL DEFAULT '0'";
$wpsc_database_template[$table_name]['columns']['cart_submitted'] = "VARCHAR(1) NOT NULL DEFAULT '0'";
$wpsc_database_template[$table_name]['indexes']['unique_key'] = "唯一键 `unique_key` (`product_id`,`variation_stock_id`,`cart_id`)";
$wpsc_database_template[$table_name]['indexes']['last_activity'] = "KEY `last_activity` ( `last_activity` )";
$wpsc_database_template[$table_name]['indexes']['cart_submitted'] = "KEY `cart_submitted` (`cart_submitted`)";

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T04:06:14.820

我认为最好的方法（也许是唯一的方法）是简单地编写一个自定义解析器。我真的看不出有任何其他方法可以解决它。

# c - 如何使用 gcc 的 -I 命令添加递归文件夹

> ID：12292707
> 
> 赞同：17
> 
> 时间：2012-09-06T03:51:27.353
> 
> 标签：c, gcc, vim, c-preprocessor

有没有办法使用 gcc 的 -I 命令并通过提供**根**目录将所有路径添加到搜索路径？

我正在尝试使用`:!gcc -E myfile.c`查看宏扩展，但`myfile.c`在不同目录中包含一大堆其他头文件，并且因为我在vim中执行此命令，所以我不想调用makefile，无论如何做这个？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-06T03:56:32.190

如果您使用的是 Apple 的 GCC（或 Clang），那么您可以使用以下方法（这似乎是一个扩展）：

* * *

参数的后缀将需要`/**`

```
-IMON_DIRECTORY/** 
```

现在`MON_DIRECTORY/`可以搜索下面的所有内容。

显然，这可能会损害您的构建时间，并且当文件具有相同名称时，可能会导致包含错误的文件。所以......谨慎使用它！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T19:29:54.360

gcc 有[多种方法](http://gcc.gnu.org/onlinedocs/gcc-4.7.1/cpp/Invocation.html#Invocation)来控制[包含搜索路径](http://gcc.gnu.org/onlinedocs/gcc-4.7.1/cpp/Search-Path.html#Search-Path)，但我看不到任何提供你想要的东西。请注意，您可以为此使用[环境变量](http://gcc.gnu.org/onlinedocs/gcc-4.7.1/cpp/Environment-Variables.html)，它可能比替代方案更方便。

# mysql - MySQL 有限 TIMESTAMP 范围的解决方法，同时保留其自动时区转换功能？

> ID：12292708
> 
> 赞同：1
> 
> 时间：2012-09-06T03:51:32.183
> 
> 标签：mysql, database, datetime, timezone, timestamp

我想要的是： 1\. 执行事务时，记录当前时间 2\. 还存储时区信息，以便根据客户端时区自动转换时间

所以 TIMESTAMP 听起来对我来说是一个完美的选择，但事实证明，对于需要长时间站立的应用程序来说，范围太小（1970-2038）。所以我想知道如何绕过这个限制。我知道 DATETIME 有更广泛的范围，但它似乎没有满足要求。2、我可以有你的想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T03:58:46.153

您可能需要将时区偏移存储在一个单独的字段中，并使用`DATETIME`以 UTC 表示的 a 进行存储，除非您有充分的理由，否则您应该为所有日期和时间存储。

需要表达完整的时区名称，因为单独的时区偏移没有意义。例如，-0400 可以指东部夏令时间或中部标准时间。

# php - 如何替换字符？

> ID：12292709
> 
> 赞同：0
> 
> 时间：2012-09-06T03:51:34.163
> 
> 标签：php

```
 $a="dir=desc&order=position&" 
```

我想替换`=`to `-`， `&`to `-`。

我使用以下代码：

```
 $a = str_replace('&','-',$a);
            $a = str_replace('=','-',$a); 
```

现在变成`dir-desc-order-position-`. 但我想得到`dir-desc-order-position`。即，最后一个字符替换为 null `""`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T03:55:47.553

```
<?php

$a = "dir=desc&order=position&";    
//Now replace the character '='
$a = str_replace('=', '-', $a);
$result = str_replace('&', '-', $a);
echo rtrim($result,"-");
?> 
```

有关更多信息，`rtrim()`请参阅@Niet the Dark Absol 答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T03:58:09.497

[`rtrim($a,"-")`](http://php.net/rtrim)如果该字符存在，您可以使用它来删除它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T03:54:36.650

您可以删除最后一个字符`substr($a, 0, -1);`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-06T04:01:29.083

如果知道必须从字符串中删除哪些字符，则可以使用**trim**函数，否则可以通过检查是否需要从字符串末尾删除多少字符来查找字符串的长度并使用**substr函数。**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-06T04:03:36.467

删除字符串中的最后一个字符

```
substr_replace($string ,"",-1); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-06T04:14:04.527

```
$a = str_replace('&','-',$a,1); 
```

这将只替换`&`一次`-`。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-06T04:45:29.850

```
 <?php
  $a = "dir=desc&order=position&";
  $pattern = '/&/';
  $replace = '-';
  $b =preg_replace($pattern , $replace, $a );
  $c = preg_replace('/=/','-',$b);
  echo $c;
  ?> 
```

# php - php中的大量字符串

> ID：12292710
> 
> 赞同：1
> 
> 时间：2012-09-06T03:51:38.377
> 
> 标签：php, arrays, list

```
<?php 
$list = array( 
    "^12\.34\.", 
    "^12\.35\.", 
); 
```

这里的问题是我的字符串“^12.34”。等等，必须在正则表达式中处理。有没有办法让 php 解析大量字符串而不必求助于正则表达式？假设您有这么多字符串并且它们经常更改，您不希望将它们转换为正则表达式，因为这意味着为该过程创建一个脚本。可能吗？可能是另一个包含字符串的页面的一个不错的小包含，但这不必在正则表达式中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T04:14:41.743

您可以在 PHP 中使用 trim 和 floatval 来构建解决方案，但我不确定它会更快。

[http://php.net/manual/en/function.trim.php](http://php.net/manual/en/function.trim.php)

[http://www.php.net/manual/en/function.floatval.php](http://www.php.net/manual/en/function.floatval.php)

但是，我会在这里使用正则表达式，因为它更清洁且更易于维护。请参阅此处选择的答案以获得良好的解决方案：[regex replace for decimals](https://stackoverflow.com/questions/1142496/regex-replace-for-decimals)

# ruby-on-rails - Rails：有条件的主页链接

> ID：12292717
> 
> 赞同：2
> 
> 时间：2012-09-06T03:52:25.103
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3.1

我目前正在使用

```
<li><%= link_to_unless_current("Home", root_path) %></li> 
```

当它们不在根路径时，在导航栏上显示主页链接。**它工作正常，除了当它们**位于根路径时留下文本“Home”（不是链接，只是文本） 。

我敢肯定有更好的方法来做到这一点，有什么建议吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-06T04:02:03.970

```
link_to("Home", root_path) unless current_page?(root_url) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T04:01:17.733

您可以这样做以省略“Home”：

```
<%= link_to_unless_current("Home", root_path) { "" } %> 
```

[API](http://api.rubyonrails.org/classes/ActionView/Helpers/UrlHelper.html#method-i-link_to_unless_current)表明，如果您想做的不仅仅是返回名称，您可以传入一个块并执行您想要的操作，在这种情况下返回一个空字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T04:10:11.960

`link_to_unless_current`通过这样做工作：

1.  如果条件为真，它会将链接放置到位
2.  如果条件不成立，它只会放置文本（没有链接）。

此功能通常用于您仍希望显示“当前”选项的菜单中，即使您在该页面上 - 通常您经常希望以某种方式突出显示它。

如果您希望链接根本不显示，只需执行“正常”链接并使用，除非在整个 link_to 方法调用中使用。例如本杰明谭的例子：

```
link_to("Home", root_path) unless current_page?(root_path) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-06T09:46:18.727

我想最好不要使用 link_to_unless 或 link_to_if，因为它会使用户感到困惑。最好更改其样式或背景并留下链接以轻松重新加载页面点击链接。

# java - Java中是否有一个读取数学函数的包（就像计算器一样）？

> ID：12292719
> 
> 赞同：1
> 
> 时间：2012-09-06T03:52:47.127
> 
> 标签：java, function

> **可能重复：**
> [用于评估数学表达式的免费 Java 库](https://stackoverflow.com/questions/7258538/free-java-library-for-evaluating-math-expressions)

我想知道Java中是否有一个可以接收字符串的包，比如“x^2+e^x*cos(x)”，并像计算器一样将它评估为一个数学函数，给定x的值——理想情况下，它是免费且公开可用的。这存在吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T03:59:34.717

有很多 - 这是一个相当简单和常见的解析器编写练习，所以很多人都尝试过并发布了一些代码。参见例如：

*   [http://jeval.sourceforge.net/](http://jeval.sourceforge.net/)
*   [http://www.javaprogrammingforums.com/algorithms-recursion/605-java-calculator.html](http://www.javaprogrammingforums.com/algorithms-recursion/605-java-calculator.html)
*   [https://webspace.utexas.edu/anl234/calc/](https://webspace.utexas.edu/anl234/calc/)

可能的问题是可用的数学函数的范围。您可以期待标准功能，但可能需要自定义/添加您自己的功能以获得更不寻常的功能（也许是[cosh ？）](http://en.wikipedia.org/wiki/Hyperbolic_cosine)

另一种选择是嵌入语言解释器，例如[Groovy](http://groovy.codehaus.org/)来进行计算。这有点重量级，意味着您需要更加注意安全风险（例如，如果代码可能在服务器上运行），但如果您对脚本有更普遍的需求，这可能是有意义的。

# silverlight - 如何在 Out of Browser Lightswitch App 中启用 IIS 压缩

> ID：12292721
> 
> 赞同：1
> 
> 时间：2012-09-06T03:53:14.513
> 
> 标签：silverlight, visual-studio-lightswitch, silverlight-oob, http-compression

我有一个 Lightswitch OOB 2012 并且想启用 IIS 7 压缩。我按照这些步骤[http://www.hanselman.com/blog/EnablingDynamicCompressionGzipDeflateForWCFDataFeedsODataAndOtherCustomServicesInIIS7.aspx](http://www.hanselman.com/blog/EnablingDynamicCompressionGzipDeflateForWCFDataFeedsODataAndOtherCustomServicesInIIS7.aspx)如果我在浏览器中部署我的应用程序，那么在使用 Fiddler 时我可以看到大小大幅下降。

但是，当我运行 OOB 时，来自服务器的响应没有被压缩：SVC 请求没有 Accept-Encoding: GZIP 标头。

**如何告诉 OOB Silverlight 请求在 Lightswitch 中使用此标头？**

Fiddler：无压缩：（第一次下载 11 兆）

![在此处输入图像描述](../Images/2bbd685d02645dc3c332e02b5a18a0d8.png)

Fiddler：压缩后（**在浏览器中运行）**： ![在此处输入图像描述](../Images/59364703a0d43df945b647756d68c83b.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T18:22:45.253

我相信你在这件事上不走运。

当在浏览器模式外运行时，[Silverlight WCF 数据服务客户端切换到使用 Silverlight 客户端 HTTP 实现](http://msdn.microsoft.com/en-us/library/ff650916%28v=vs.95%29.aspx#bkmk_outofbrowser)。Silverlight HTTP 客户端不支持 GZIP 压缩。有一个[功能要求](http://dotnet.uservoice.com/forums/4325-silverlight-feature-suggestions/suggestions/908467-provide-support-for-gzip-compression-when-using-cl)对此进行更改，但考虑到 Silverlight 的朦胧未来，我认为这不太可能发生。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T06:49:29.640

要支持 OOB Silverlight 应用程序的压缩，只需将以下两行添加到您的 App.xaml.cs(Constructor)：

```
WebRequest.RegisterPrefix("http://", System.Net.Browser.WebRequestCreator.BrowserHttp);
WebRequest.RegisterPrefix("https://", System.Net.Browser.WebRequestCreator.BrowserHttp); 
```

# python - 测试 RPC 扭曲调用的工具？

> ID：12292723
> 
> 赞同：0
> 
> 时间：2012-09-06T03:53:20.817
> 
> 标签：python, django, testing, twisted, twisted.web

是否有任何工具/Chrome 插件，例如 Chrome 的“高级 REST 插件”，可用于测试 Twisted RPC JSON 调用？

还是我必须编写一些 Python 代码才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T23:11:18.637

在测试方面，您应该始终使用代码，这样如果您将来更改某些内容或必须修复错误，测试您的更改将是几秒钟的事情：

python mytestsuite.py

# html - Chrome 不遵守静态 HTML 文件中的无缓存规则

> ID：12292725
> 
> 赞同：0
> 
> 时间：2012-09-06T03:53:48.500
> 
> 标签：html

我有一堆 HTML 静态文件。我意识到 chrome 并没有真正遵守我的 HTML 静态文件中的规则。

```
<meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
<meta http-equiv="Pragma" content="no-cache">
<meta http-equiv="Expires" content="0"> 
```

好像是bug？[http://code.google.com/p/chromium/issues/detail?id=28035](http://code.google.com/p/chromium/issues/detail?id=28035)

我不知道任何解决方法。有谁知道？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T03:57:35.520

配置您的 Web 服务器以将这些作为您的文件（或所有 *.html 文件）的标头发送。由于您没有指定您的网络服务器，因此无法提供更多信息。

# php - 我可以解密通过 PHP 加密的 C++ 中的数据吗？

> ID：12292727
> 
> 赞同：2
> 
> 时间：2012-09-06T03:54:01.683
> 
> 标签：php, c++, encryption-symmetric

我正在使用 mcrypt_encrypt 和 base64_encode 来加密 php 中的数据。我试过用 C++ 解密数据，但无济于事。我有多年来使用的 C++ Rijndael 逻辑，以及 base64_decode 逻辑。后者完美解码由 php 的 base64_encode 编码的字符串。我将 CBC 与 php 和 C++ 一起使用。我已经尝试过不同的块大小等等，但无济于事。非常感谢任何建议。

这是我的测试逻辑：

PHP

```
$key = "qwertyuiopasdfghjklzxcvbnmqwerty";  
$iv = "12345678901234561234567890123456";  
$text = "this is the text to encrypt";
$crypttext = mcrypt_encrypt(MCRYPT_RIJNDAEL_256, $key, $text, MCRYPT_MODE_CBC, $iv);
echo base64_encode($crypttext)."<br/>"; 
```

C++

```
char* base64encode = ".. output from php...";  
unsigned char binaryData[256];  
int binaryNumBytes;  
char result[256];  
base64_decode(reinterpret_cast<unsigned char*>(base64encode), strlen(base64encode),       binaryData, &binaryNumBytes, false);  
Encryption::Rijndael rijndael;  
char* key = "qwertyuiopasdfghjklzxcvbnmqwerty";  
char* iv = "12345678901234561234567890123456";  
rijndael.Init(Encryption::Rijndael::CBC, reinterpret_cast<const char*>(key), 32, 32,    reinterpret_cast<const char*>(iv));  
rijndael.Decrypt(reinterpret_cast<const char*>(binaryData), reinterpret_cast<char*>(result), 32);  
cout << result << endl; 
```

编辑：如果我使用 ECB 模式，我可以让它工作。2之间的CBC存在一些问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T03:21:36.957

使用欧洲央行模式是要走的路。

# asp.net - NHibernate Session.Load 或 Session.Get

> ID：12292729
> 
> 赞同：0
> 
> 时间：2012-09-06T03:54:07.883
> 
> 标签：asp.net, asp.net-mvc, nhibernate, ado.net, fluent-nhibernate

我对 Session.Load 和 Session.Get 有一个想法，但想知道它的实时实现。假设存在具有 n:1 关系的 Company 和 Location 表。在公司编辑页面中，用户选择一个位置并提交页面。通过使用下面的代码，它可以在不访问数据库的情况下附加。

```
cust.Location =  session.Load<Location>(selectedlocationid) 
```

但同时，如果其他用户在此期间删除了该位置，则可能会发生异常。这种情况甚至可能发生在 ADO.NET/Entity 框架中，因为我们只是在不检查存在的情况下更新 id。

我想大致了解如何针对这个简单的场景进行更新。由于 Web 应用程序的架构已断开连接，是否可以忽略这种可能性并继续使用“加载”（或）使用“获取”访问数据库并检查空值并继续。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T04:33:58.113

您不能在删除之前锁定行，因为在查看要删除的行和实际删除该行之间可能会有很多延迟。
不锁定行是[乐观并发](http://msdn.microsoft.com/en-us/library/aa0416cz%28v=vs.110%29.aspx)。

在数据库级别实现您的[外键](http://msdn.microsoft.com/en-us/library/ms175464%28v=sql.105%29.aspx)关系，以便它不允许与已删除行的关系。这样，如果有人删除了该行，您的代码将引发异常。

您可以捕获该异常并相应地提醒用户。

# apache - 子域重定向到 www

> ID：12292740
> 
> 赞同：3
> 
> 时间：2012-09-06T03:55:56.893
> 
> 标签：apache, redirect, subdomain

我有域`example.com`并`test.example.com`在 apache 服务器上运行。出于某种原因，当我尝试访问*test.example*时，它​​被重定向到*www.test.example*并因此`Server not found`在浏览器中显示错误。.htaccess（根和子域文件夹）文件都是空的。

**其他事实**

我有另一个子域`xyz.example.com`指向 public_html/xyz 目录，其中包含一些内容（带有“hello world 消息”的 index.html），如果我使用 xyz.example.com 而不是 www.xyz.example.com，它可以正常工作。所以，你能帮我指出正确的方向吗？我有一个 vps，如果需要，我可以更改任何文件。

您可以在下面找到我的虚拟主机配置。

```
<VirtualHost xx.xxx.xxx:80>
    ServerName test.example.com
    ServerAlias www.test.example.com
    DocumentRoot /home/example/public_html/test
    ServerAdmin webmaster@test.example.com
    UseCanonicalName Off
    CustomLog /usr/local/apache/domlogs/test.example.com combined
    CustomLog /usr/local/apache/domlogs/test.example.com-bytes_log "%{%s}t %I  .\n%{%s}t %O ."

    ScriptAlias /cgi-bin/ /home/example/public_html/test/cgi-bin/

    # To customize this VirtualHost use an include file at the following location
    # Include "/usr/local/apache/conf/userdata/std/2/example/test.example.com/*.conf"

</VirtualHost> 
```

谢谢你的时间

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T09:29:49.563

在绑定配置区域中，您没有设置子域测试在 example.com 区域中添加此行 >>

```
test.example.com         IN        A         (xxx.xxx.xxx.xxx) 
```

xxx.xxx.xxx.xxx 是你服务器的 ip

或者你不启用你的虚拟主机配置>>

```
a2ensite test.example.com 
```

test.example.com 是虚拟主机文件的名称。

# templates - 加载 Joomla 组件而不是首页的文章

> ID：12292746
> 
> 赞同：1
> 
> 时间：2012-09-06T03:57:04.630
> 
> 标签：templates, joomla, core, reroute

我想为首页而不是文章加载 Joomla 组件。我该怎么做？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T04:03:58.233

起初我不太确定你需要什么，然后看到你的评论。

如果要在主页上加载组件，则创建一个新的菜单项，链接到该组件，然后将该菜单项设置为“默认”。

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-02T09:26:55.563

在您的主题文件夹中，您必须在此文件夹中创建 HTML 文件夹，在此处创建组件（如此 com_component）文件夹，您可以在此处放置 default.php 文件

# c - 将动态分配的二维数组传递给函数

> ID：12292750
> 
> 赞同：1
> 
> 时间：2012-09-06T03:57:18.680
> 
> 标签：c

以下代码无法正常工作。运行程序时出现段错误。我通过 gdb 运行我的程序，发现错误发生在 fillArrays(int**,int) 函数中。

GDB 为 fillArrays(int**,int) 显示以下参数：

```
fillArrays (arrays=0x0,numArrays=3) 
```

这是我的程序的源代码

```
#include <stdlib.h> /* malloc and free */

#define MULTIPLIER          1
#define SMALL               10
#define BIG                 20

void allocateSmallArrays(int **arrays,int numArrays) {
    int index,freeIndex;
    int outerIndex,innerIndex;
    arrays = malloc(numArrays*sizeof(int*));
    if(arrays == NULL) {
        printf("out of memory\n");
        exit(1);
    }
    for(index = 0;index < numArrays;index++) {
        arrays[index] = malloc(SMALL*sizeof(int));
        if(arrays[index] == NULL) {
            printf("out of memory\n");
            exit(1);
        }
    }
}

void fillArrays(int **arrays,int numArrays) {
    int outerIndex,innerIndex;
    for(outerIndex = 0;outerIndex < numArrays;outerIndex++) {
        for(innerIndex = 0;innerIndex < SMALL;innerIndex++)
            arrays[outerIndex][innerIndex] = 0;
    }
}

void deallocateSmallArrays(int **arrays,int numArrays) {
    int index;
    for(index = 0;index < numArrays;index++)
        free(arrays[index]);
    free(arrays);
}

int main(void) {
   int numArrays  = (3 * MULTIPLIER);
   int **arrays = 0;

   allocateSmallArrays(arrays,numArrays);
   fillArrays(arrays,numArrays);
   deallocateSmallArrays(arrays,numArrays);

   arrays = 0;

   return 0;
} 
```

我假设由于数组是在 allocateSmallArrays 中分配的，因此通过 fillArrays 传递它会将分配的数组清零，然后在最后一个函数中解除分配。我该怎么做呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T03:59:21.020

问题是`allocateSmallArrays`更改了它自己的**指针****副本`arrays`**。所以结果`malloc`丢失了，函数完成后，调用者`arrays`仍然为0。你可以：

*   传递一个三重指针`int ***arrays`并执行`*arrays`您正在执行的所有操作`arrays`

*   **返回指针而不是 void**

A [C FAQ](http://c-faq.com/ptrs/passptrinit.html)处理这个主题。

# java - Java通配符和泛型？超级T和？扩展 T

> ID：12292752
> 
> 赞同：1
> 
> 时间：2012-09-06T03:57:42.850
> 
> 标签：java, generics, wildcard, extends, super

在处理通配符（例如将通用项目设置/添加到某个容器）时，是否建议使用类似的东西？

```
void add(List<?  super T> someList,someitem){
    someList.add(someItem);
} 
```

并且在检索项目时建议使用类似这样的东西

```
 <T> void f1(List<? extends T> obj, T item) {
     obj.add(item);
} 
```

这背后的原理是什么？我什么时候知道我是否应该使用它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T12:53:16.300

你应该看看PECS原理的解释

[什么是PECS（Producer Extends Consumer Super）？](https://stackoverflow.com/questions/2723397/java-generics-what-is-pecs)

简而言之，当您想从对象中获取信息时，请确保使用带通配符的扩展。

当你想将信息放入对象时，请确保使用 super 和通配符

# php - 如何执行带有 .html 扩展名的 php 文件？

> ID：12292754
> 
> 赞同：2
> 
> 时间：2012-09-06T03:57:49.513
> 
> 标签：php, .htaccess, mod-rewrite, url-rewriting, webserver

我的网站有问题，当我尝试将 php 转换为 html 时，出现此错误 **Not Found**

这是.htaccess

```
RewriteEngine on
RewriteRule ^(.*)\.php$ /ver1/$1.html [R=301,QSA,L] 
```

文件夹 ver1 中的所有文件

我看到这个帖子

[.php 网址到 .html 网址](https://stackoverflow.com/questions/8562724/php-url-to-html-url)

但不和我一起工作

我只需要将 php 转换为 html，如果我转到 index.php

我去 index.html 并使所有 url html

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T04:12:33.887

将您的 .php 文件重命名为 .html 并将此行添加到您的 .htaccess

```
AddType application/x-httpd-php .html .htm 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T04:12:04.503

您需要在两个地方添加 /ver1/ - "^(. *).php$" -> "^/ver1/(.* ).php$"

但是该行只是关闭了 .php 版本-您从未复制告诉它以不同扩展名实际提供 PHP 文件的行 (RewriteRule ^(.*).html$ $1.php)

```
RewriteEngine on 
RewriteRule ^/ver1/(.*)\.html$ /ver1/$1.php
RewriteRule ^/ver1/(.*).php$ /ver1/$1.html [R=301,QSA,L] 
```

第一条规则将在内部将 .html 映射到 .php 文件并将它们直接提供给客户端

第二条规则会将 /ver1/ 下的任何 .php 重定向到它的 .html 等效项，以用于 SEO 目的

**编辑**-**警告**- 如果您有任何 HTML 表单是 action=POST 数据 - 您必须更新它们的动作以指向 .html 版本 - 否则它们将停止工作（不重定向 POST 数据！）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T04:15:43.753

您是否在寻找“如何使用 .htaccess 规则将 .php 重写为 .html”????????????????

如果是，请使用

```
RewriteEngine on
RewriteRule ^(.*)\.html$ /ver1/$1.php [nc] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-02T23:39:00.133

在 .htaccess 上试试：

```
RewriteCond %{DOCUMENT_ROOT}/$1.php -f
RewriteRule ^(.*)\.html$ /$1.php 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-06-28T10:28:42.343

```
RewriteRule ^(.*)\.html$ $1.php [nc] 
```

# pdf - 蜡染 SVG 转 PDF 无文本

> ID：12292757
> 
> 赞同：1
> 
> 时间：2012-09-06T03:58:09.997
> 
> 标签：pdf, svg, debian, batik

我有一个疯狂的问题让我发疯:)

使用 highcharts 导出到 PDF 功能，它生成图形数据但没有文本。

我正在使用 Debian 6 并安装了在导出为 PDF 时出现转码问题的 libbatik-java。在阅读了一些在 stackoverflow 上找到的解决方案后，我完成了从 apache 的网站下载蜡染，现在可以导出为 PDF。

但是文本没有显示，因为它似乎在屏幕外呈现，因为当我编辑一个 x/y 值时，它可以看到文本。

我在导出为 PNG 或 JPG 时工作得很好。

我还将 SVG 复制到另一台运行 AIX 的服务器并在那里运行 batik 命令，它转换为 PDF 没有问题。

我还尝试将 batik DIR 从我们的 AIX 盒子复制到 Debian 盒子，但仍然遇到同样的问题。

不知道我还能做什么:(

任何帮助，将不胜感激。

# javascript - Ember View 未响应用户发起的事件

> ID：12292758
> 
> 赞同：1
> 
> 时间：2012-09-06T03:58:11.487
> 
> 标签：javascript, ember.js, dom-events

谁能解释为什么我设置的事件`SampleView`不起作用？

[http://jsfiddle.net/colinkahn/3nkUv/](http://jsfiddle.net/colinkahn/3nkUv/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T04:51:07.817

每当你重写 init 方法时，你应该调用 super 方法`this._super()`。这是工作小提琴[http://jsfiddle.net/3nkUv/8/](http://jsfiddle.net/3nkUv/8/)

# android - 使用 ProGuard 构建会忽略 android.app.* 类

> ID：12292760
> 
> 赞同：0
> 
> 时间：2012-09-06T03:58:15.030
> 
> 标签：android, proguard

我是第一次使用 ProGuard。我在项目的根包中拥有我所有的活动、片段、列表片段等（我试图移动它们但没有任何区别）。我正在使用标准`proguard-android.txt`加上`proguard-project.txt`我可以放置任何我想要的东西，这对这些类没有影响，因为它们只是被忽略了。

它们未列在`usage.txt`,或中`seeds.txt`，也不在 dex 中（尽管库类似乎得到了正确处理）。`mapping.txt``dump.txt`

`-keep public class <my.project.rootpackage>.MyActivity`我为每个被忽略的课程尝试了一个，还有很多其他的东西，最后一个是：

```
-dontshrink
-dontoptimize
-dontobfuscate

-keep public class * extends android.app.Application
-keep public class * extends android.support.v4.app.FragmentActivity
-keep public class * extends android.support.v4.app.Fragment
-keep public class * extends android.support.v4.app.ListFragment
-keep public class * extends android.preference.PreferenceActivity 
```

我可以在学习时使用一个更简单的项目，但我不明白为什么它不应该工作，毕竟 ProGuard 似乎可以很好地处理这些库。当然，项目在调试模式下运行良好。

ProGuard 更新到 v4.8，Eclipse 3.7.2，ADT 和 SDK 更新，项目目标 API 15，ProGuard 没有消息。

我错过了什么？我承认我从来没有清楚的构建过程。我必须学习蚂蚁吗？

**编辑**：当它不起作用时（也就是说，ProGuard 以错误结束），我经常收到这种错误：

> 警告：my.project.package.ClassA：找不到引用的类 my.project.package.ClassB

请注意，这两个类也可以在同一个包中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T14:03:48.660

因此，被忽略的类似乎是由于“自动构建”功能阻止了 ProGuard 完成其工作。如果未选中，“导出签名的应用程序包”过程会顺利进行，但 ProGuard 不会混淆/缩小。但这又引出了另一个问题。

参考资料：[为什么在我以前不需要 -libraryjars 的情况下开始使用它？](https://stackoverflow.com/questions/11006305/why-start-using-libraryjars-when-i-never-needed-it-before)

**...编辑**：实际上只是项目中的 apk`bin`没有缩小。导出的 APK 没问题。什么奥德赛。

# multithreading - 多线程scala中长进程的惯用超时

> ID：12292761
> 
> 赞同：4
> 
> 时间：2012-09-06T03:58:23.637
> 
> 标签：multithreading, scala, concurrency, functional-programming

所以，我看到一些关于 stackoverflow 的问题以一种或另一种方式询问如何“杀死”未来，例如已弃用的 Thread.stop()。我看到答案解释了为什么这是不可能的，但不是解决类似问题的替代机制。

例如：[期货的实际使用？即，如何杀死他们？](https://stackoverflow.com/questions/1245937/practical-use-of-futures-ie-how-to-kill-them)

我意识到未来不能被“杀死”。

我知道如何用 Java 的方式做到这一点：将任务分解为更小的睡眠，并在定期检查的线程类中有一些“volatile boolean isStillRunning”。如果我通过更新此值取消了线程，则线程退出。这涉及“共享状态”（isStillRunning 变量），如果我在 Scala 中做同样的事情，它看起来就不是很“实用”。

在惯用的函数式scala中解决这类问题的正确方法是什么？有没有合理简洁的方法来做到这一点？我应该恢复到“正常”线程和 volatile 标志吗？我应该以与 Java 关键字相同的方式使用 @volatile 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T09:13:07.523

是的，它看起来和 Java 中的一样。

对于测试台，测试可能会挂起或运行时间过长，我使用一个承诺来保证测试失败（无论出于何种原因）。例如，超时监视器可以“取消”测试运行程序（中断线程并 compareAndSet 一个标志），然后完成失败的承诺。或者测试准备可能会提前失败配置错误的测试。或者，测试运行并产生结果。在更高的层次上，测试台只是看到了未来及其价值。

与 Java 不同的是您可以选择组合期货。

```
val all = Future.traverse(tests)(test => {
  val toKeep = promise[Result]    // promise to keep, or fail by monitor
  val f = for (w <- feed(prepare(test, toKeep))) yield {
    monitored(w, toKeep) {
      listener.start(w)
      w.runTest()
    }
  }
  f completing consume _
  // strip context
  val g = f map (r => r.copy(context = null))
  (toKeep completeWith g).future
}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T04:13:17.967

我想我已经找到了解决我自己问题的更好方法。我可以向参与者发送更高优先级的退出消息，而不是使用 volatile 变量让操作知道何时死亡。它看起来像这样：

```
val a = new Actor() { 
  def act():Unit = {
    loop{ react {
      case "Exit" => exit(); return;
      case MyMessage => {
        //this check makes "Exit" a high priority message, if "Exit" 
        //is on the queue, it will be handled before proceeding to 
        //handle the real message.
        receiveWithin(0) {
          case "Exit" => exit(); return
          case TIMEOUT => //don't do anything.
        }
        sender ! "hi!" //reply to sender
      }
    }}
  }
}

a.start()
val f = a !! MyMessage
while( ! f.isSet && a.getState != Actor.State.Terminated ) {
  //will probably return almost immediately unless the Actor was terminated
  //after I checked.
  Futures.awaitAll(100,f)
}
if( a.getState != Actor.State.Terminated ) {
  f() // the future should evaluate to "hi!"
}
a ! "Exit" //stops the actor from processing anymore messages.
           //regardless of if any are still on the queue.
a.getState // terminated 
```

可能有一种更简洁的方法来编写这个..但这大约是我在我的应用程序中所做的。

reactWithin(0) 是立即无操作，除非队列上有“退出”消息。队列中的“退出”消息替换了我将在线程 Java 应用程序中放入的 volatile 布尔值。

# jstree - 在 jstree 中禁用展开/折叠

> ID：12292762
> 
> 赞同：3
> 
> 时间：2012-09-06T03:58:31.973
> 
> 标签：jstree

我需要显示 JSTree 但不展开和折叠。有没有办法做到这一点？

在下面的链接中，它提到禁用扩展和折叠在 jstree 中不可用，这似乎是一个错误。

[https://groups.google.com/forum/?fromgroups#!topic/jstree/DFWEmFZ4OeI](https://groups.google.com/forum/?fromgroups#!topic/jstree/DFWEmFZ4OeI)

但它发布于 2009 年。那么这个错误解决了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T16:40:06.530

只是不要给展开/折叠元素空间：

```
<style>
     .jstree ins {width:0px}
</style> 
```

# appharbor - 在 appharbor 上运行 jake

> ID：12292764
> 
> 赞同：1
> 
> 时间：2012-09-06T03:58:42.027
> 
> 标签：appharbor, jake

我有一个在我的 MVC 3 项目“jake build”上运行的后期构建任务，它结合了一堆咖啡脚本文件并使用 Phantom.js 运行一些测试。

我不希望 appharbor 在我部署时运行它，但它正在尝试。它当然是失败的，因为没有安装 node、jake 和任何数量的其他 node 模块。当我构建但让 appharbor 忽略它时，有没有办法让这个后期构建过程在我的本地机器上运行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T11:17:18.923

我用这个问题解决了这个问题： [How to run Visual Studio post-build events for debug build only](https://stackoverflow.com/questions/150053/how-to-run-visual-studio-post-build-events-for-debug-build-only)

您可以在 ide 中执行此操作： if $(ConfigurationName) == Debug jake build

或者在项目文件的源代码中：

```
<PropertyGroup Condition=" '$(Configuration)' == 'Debug' ">
    <PostBuildEvent>start gpedit</PostBuildEvent>
</PropertyGroup> 
```

# html - 具有相对定位的 CSS div 在 IE 中无法正常工作

> ID：12292770
> 
> 赞同：0
> 
> 时间：2012-09-06T03:59:21.957
> 
> 标签：html, css, internet-explorer, css-position

我在几个具有相对定位的 div 层上放置了一个大图像。我也在使用 top: -170px; 将图像拉到我需要的位置。它在 Firefox 中完美运行，但在 IE 中，它不会调整其下方蓝色条的位置以解释负顶部位置。

如果我没有意义，您可以查看实时开发站点：

[http://www.suncastmedia.com/clients/ezbook/](http://www.suncastmedia.com/clients/ezbook/)

如果您同时查看 Firefox 和 IE，您就会明白我的意思。这也是我针对这些特定 div 的 CSS。

```
#red-box {
  width: 100%;
  height: 343px;
  background: url('../images/bg-red.png') top left repeat-x;
  text-align: left;
}

#red-box-text {
  position: relative;
  left: 70px;
  top: 45px;
  font-size: 18px;
  font-weight: bold;
  color: #fff;
  font-family: helvetica;
  width: 451px;
}

#spacer {
  width: 100%;
  height: 8px;
}

#blue-box {
  width: 100%;
  height: 29px;
  background: url('../images/bg-blue.png') top left repeat-x;
}

#pic-globe {
  position: relative;
  top: -170px;
  left: 52%;
  background: url('../images/pic-globe.png') top left no-repeat;
  width: 506px;
  height: 471px;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T04:06:18.043

你可以来回切换`#pic-globe`，`#red-box-text`然后添加`float: right;`到`#pic-globe`. 通常，如果您使用巨大的负边距，可能会有更简单的方法来做到这一点。

# node.js - 无法使用 Web 客户端运行 node.js 应用程序

> ID：12292771
> 
> 赞同：0
> 
> 时间：2012-09-06T03:59:22.933
> 
> 标签：node.js, browser

我在我的 linux 服务器上编写并运行了一个 node.js 程序（例如：hello.js），IP 地址为 62.xxx，基本内容：

```
var http = require('http');
http.createServer(
    function(req,res){
        res.writeHead(200, {'content-type':'Text plain'}); 
        res.end('Hello ');
    }
).listen(8000) 
```

我尝试使用 curl 命令在服务器上对其进行测试：`curl http: //127.0.0.1:8000`

我得到了预期的结果：`hello`在屏幕上。

但是当我在我的客户端机器上使用浏览器客户端（IE、Firefox、...）尝试它时，`http://62.x.x.x:8000`webbrowser 无法加载此页面并且无法返回我的结果。

我不知道这个错误是什么意思？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T04:05:26.633

问题是防火墙正在阻止页面加载。您需要配置防火墙以允许端口 8000 上的出站流量

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T10:28:46.127

尝试收听您的外部界面，例如

```
).listen(8000, "62.x.x.x") 
```

# mongodb - 如何更改mongodb索引名称

> ID：12292772
> 
> 赞同：0
> 
> 时间：2012-09-06T03:59:24.280
> 
> 标签：mongodb, indexing

这是我使用的索引的名称

经度Latitude_indexContents_1_prominent_-1

那个 -1 的东西是有问题的并且是自动生成的。我想将其更改为 LongitudeLatitude_indexContents_1_prominent_min1

或者其他的东西

索引需要一段时间。所以我宁愿只是更改索引的名称。

例如，

如果我做

```
db.tablebusiness.find({ "LongitudeLatitude" : { "$nearSphere" : [106.772835, -6.186753], "$maxDistance" : 0.044983732050783008 }, "Prominent" : { "$gte" : 15 }, "indexContents" : { "$all" : [/^warung/] } }).hint("LongitudeLatitude_indexContents_1_Prominent_-1").limit(50).explain(); 
```

我懂了

```
> ).hint("LongitudeLatitude_indexContents_1_Prominent_-1").limit(50).explain();
Thu Sep 06 11:01:51 uncaught exception: error: { "$err" : "bad hint", "code" : 1
0113 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T07:24:58.083

你为什么用`hint()`？那一定是我见过的最不未来的证明代码。如果您的查询没有有效地使用索引，那么您应该真正更改查询或添加另一个索引以使查询在索引上运行。强制 MongoDB 使用它自己找不到的索引实际上可能会进一步减慢查询速度，因为它会尝试使用不提供快捷方式的 b-tree。

事实上你的查询：

```
db.tablebusiness.find({ "LongitudeLatitude" : { "$nearSphere" : [106.772835, -6.186753], "$maxDistance" : 0.044983732050783008 }, "Prominent" : { "$gte" : 15 }, "indexContents" : { "$all" : [/^warung/] } }) 
```

将使用您创建的索引而不使用`hint()`. 如果有一天你为这个查询创建了一个更好的索引，那么`hint()`由于这个新索引，使用将阻止这个查询变得更快。不仅如此，您还必须更改所有代码中的索引名称。

至于更改索引的名称：我认为您必须先删除它，然后重新索引创建一个您自己的名称的新索引（尽管正如@Thilo 提到的，自命名索引将被删除）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T04:06:44.890

> .hint("LongitudeLatitude_indexContents_1_Prominent_-1")

应该

> .hint({ LongitudeLatitude_indexContents: 1, Prominent: -1 })

# html - css transform:rotate 属性，不需要的边框

> ID：12292780
> 
> 赞同：0
> 
> 时间：2012-09-06T04:00:23.890
> 
> 标签：html, css

我正在使用 css 转换属性来旋转网页的徽标。logo 本身由几个具有相对和绝对位置的内部 div 组成。我有一个外部 div 保存整个东西的 id 为 wholeLogo，我把它放在样式表中来旋转它：

```
#wholeLogo {
    border: none;
    width: 600px;
    margin: 0 auto;
    margin-top: 15px;
    transform: rotate(-7deg);
    -webkit-transform: rotate(-7deg); 
    -o-transform: rotate(-7deg); 
    -moz-transform: rotate(-7deg); 
} 
```

徽标已正确旋转，但我在整个徽标 div 内的每个 div 周围都有一个奇怪的虚线边框。有谁知道为什么会发生这种情况以及如何让它停止？

这是小提琴要求：

[http://jsfiddle.net/CbsUT/1/](http://jsfiddle.net/CbsUT/1/)

如果你想知道为什么每块标志都有两个副本，那是因为我想要颜色渐变和文字阴影。但是这两件事似乎不能很好地相互配合，所以我用一个和另一个复制了一个副本并将它们重叠。

最坏的情况是我取消旋转它，做一个屏幕截图，用油漆或其他东西旋转它，然后把它作为图片带回来，但如果可能的话，我想避免这种情况。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T06:39:36.557

试试这个

HTML : -

```
<div id="wholeLogo">
  <h1 data-title="Logo"> <a href="#">Logo</a> </h1>
</div> 
```

CSS：-

```
#wholeLogo {
    width: 600px;
    margin: 0 auto;
    margin-top: 35px;
    transform: rotate(7deg);
    -webkit-transform: rotate(7deg);
    -o-transform: rotate(7deg);
    -moz-transform: rotate(7deg);
}

h1 {
    position: relative;
    font-style: italic;
    font-family: Verdana;
    font-weight:normal;
    text-transform:uppercase;
    font-size:100px;
    text-shadow: 2px 3px 1px #292929;
}

h1 a {
    text-decoration: none;
    position: absolute;
    color: #0032ff;
    -webkit-mask-image: -webkit-gradient(linear, left top, left bottom, from(rgba(0,0,0,1)), color-stop(20%, rgba(0,0,0,0)), to(rgba(0,0,0,1)));
    -webkit-transition: all .3s;
    -moz-transition: all .3s;
    transition: all .3s;
}

h1 a:hover {
    color: #0032ff;
    -webkit-mask-image: -webkit-gradient(linear, left top, left bottom, from(rgba(0,0,0,1)), color-stop(50%, rgba(0,0,0,.3)), to(rgba(0,0,0,1)));
}

h1:after {
    color: #dc0000;
    content : attr(data-title);
} 
```

# java - 如何在 JAVA 中使用转义序列

> ID：12292783
> 
> 赞同：0
> 
> 时间：2012-09-06T04:00:43.843
> 
> 标签：java, escaping

嗨，我遇到了这个 JAVA 类的问题。我知道这很简单，但它对我不起作用。

我到目前为止的代码是这样的：

```
 public class ShowEscapeSequences {
    public static void main(String[] args) {
        System.out.print("I really like \n\t\"CIS355A\"Business Application Programming with Lab using JAVA\"");
    }//End of main
} 
```

它给出了这个输出：

```
 I really like 

    "CIS355A"Business Application Programming with Lab using JAVA" 
```

但我需要输出看起来像这样：

```
I really like

    CIS355A 
         "Business Application Programming with Lab using JAVA" 
```

如何在不产生 100 个错误的情况下执行此操作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-06T04:02:40.330

你的字符串需要是

```
"I really like\n\n\tCIS355A \n\t\t \"Business Application Programming with Lab using JAVA\"" 
```

这是基于查看问题中的原始文本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T04:25:11.450

```
System.out.print("I really like\n\n\tCIS355A \n\t\t\ "Business Application Programming with Lab using JAVA\""); 
```

# php - yii：如何通过 ajax 更新 cgridview

> ID：12292784
> 
> 赞同：2
> 
> 时间：2012-09-06T04:00:45.810
> 
> 标签：php, gridview, yii

问：如何通过ajax 更新CgridVeiw？

状态：我已经完成了 cookie。但是有一个问题。在页面上传时，日期总是显示在从日期和到日期文本框中。并且当重新加载页面时，它并没有清除。

这是我的看法

```
<?php $form=$this->beginWidget('CActiveForm', array(
    'id'=>'page-form',
    'enableAjaxValidation'=>true,
)); ?>
<div style="margin-top:30px;">

    <b>From :</b>
    <?php
    $this->widget('zii.widgets.jui.CJuiDatePicker', array(
        'name'=>'from_date',  // name of post parameter
        //'value'=>Yii::app()->request->cookies['from_date']->value,  // value comes from cookie after submittion
         'options'=>array(
            'showAnim'=>'fold',
            'dateFormat'=>'yy-mm-dd',
        ),
        'htmlOptions'=>array(
            'style'=>'height:20px;'
        ),
    ));
    ?>
    <span>&nbsp;&nbsp;&nbsp;&nbsp;</span>
    <b>To :</b>
    <?php
    $this->widget('zii.widgets.jui.CJuiDatePicker', array(
        'name'=>'to_date',
        //'value'=>Yii::app()->request->cookies['to_date']->value,
         'options'=>array(
            'showAnim'=>'fold',
            'dateFormat'=>'yy-mm-dd',

        ),
        'htmlOptions'=>array(
            'style'=>'height:20px;'
        ),
    ));
    ?>
    <span>&nbsp;&nbsp;&nbsp;&nbsp;</span>
    <?php echo CHtml::submitButton('Go'); ?>
    <?php
        echo CHtml::ajaxSubmitButton('Search', CHtml::normalizeUrl(array('index')),
                array(  
                    'success'=>'js:'
                    .'function(){'
                    .'$.fn.yiiGridView.update("acc-payment-recei-grid", {url:"index"});'                    
                    .'}',
                ),
                array('id'=>'go', 'name'=>'go'));

    ?>
    <?php $this->endWidget(); ?>

    <p style="float:right;">
        <a href="<?php echo "create"; ?>" class="btn btn-info">New Payment Receive</a>
    </p>
</div>
<style>
.items table tr:last-child td:first-child {
    -moz-border-radius-bottomleft:10px;
    -webkit-border-bottom-left-radius:10px;
    border-bottom-left-radius:10px
}

.items table tr:last-child td:last-child {
    -moz-border-radius-bottomright:10px;
    -webkit-border-bottom-right-radius:10px;
    border-bottom-right-radius:10px
}

</style>
<?php $this->widget('zii.widgets.grid.CGridView', array(
    'id'=>'acc-payment-recei-grid',
    'dataProvider'=>$accpaymentrecei->search(),
    //'filter'=>$accpaymentrecei,
    'columns'=>array(
        //'id',
        array('name' => 'acc_category_id',
               'value'=>'(isset($data->acccategories->name)) ? CHtml::encode($data->acccategories->name) :""',
        ),
        array('name' => 'acc_recei_id',
              'header'=> 'Account Received',
               //'value'=>'(isset($data->method)) ? CHtml::encode($data->method) :""',
        ),
        array(
            'name' => 'date',
            'value'=>'($data->date= 0) ? "" : date("d M yy",strtotime($data->date))',
        ),                
        array('name' => 'method',
               'value'=>'(isset($data->method)) ? CHtml::encode($data->method) :""',
        ),
        array('name' => 'description',
               //'value'=>'(isset($data->method)) ? CHtml::encode($data->method) :""',
        ),
        /*
        'created_date',
        'updated_date',
        'file_name',
        */
        array(
            'class'=>'CButtonColumn',
        ),
    ),
)); 
```

这是控制器

```
public function actionIndex()
{
    $accpaymentrecei=new AccPaymentRecei('search');
    $accpaymentrecei->unsetAttributes();  // clear any default values

    if(isset($_GET['AccPaymentRecei']))
        $accpaymentrecei->attributes=$_GET['AccPaymentRecei'];

    $acccategory = AccCategory::model()->findAll();

    $arr_method = array('Cash'=>'Cash', 'Cheque'=>'Cheque', 'Credit Card'=>'Credit Card', 'Bank Transfer'=>'Bank Transfer');

    $this->from_to_date($accpaymentrecei);
    //exit();
    $this->render('index',array(
        'accpaymentrecei'=>$accpaymentrecei,
        'acccategory'=>$acccategory,
        'arr_method'=>$arr_method,
    ));
}

protected function from_to_date($model)
{
    unset(Yii::app()->request->cookies['from_date']);  // first unset cookie for dates
    unset(Yii::app()->request->cookies['to_date']);

    //$model=new XyzModel('search');  // your model

    $model->unsetAttributes();  // clear any default values

    if(!empty($_POST))
    {
        Yii::app()->request->cookies['from_date'] = new CHttpCookie('from_date', $_POST['from_date']);  // define cookie for from_date
        Yii::app()->request->cookies['to_date'] = new CHttpCookie('to_date', $_POST['to_date']);
        $model->from_date = $_POST['from_date'];
        $model->to_date = $_POST['to_date'];
    }else{
        Yii::app()->request->cookies['from_date'] = new CHttpCookie('from_date', date("Y/m/d"));
        Yii::app()->request->cookies['to_date'] = new CHttpCookie('to_date', date("Y/m/d"));    
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T17:54:49.763

下面的代码 - 它只是示例，解决方案的主要原则。第一个原则：我们不需要刷新页面（通过提交），我们只需要在请求后刷新CGridView。

## 解决方案有几个部分：

1.  我们需要带有一些参数的表单。在你的情况下 - *fromDate*和*toDate*。你已经有了这个。但是我们不需要任何提交元素。一点都不！我们将使用 AJAX。

2.  我们需要一些函数来发起 AJAX 请求。例如，此请求的 let's 事件将**更改**参数 *from_date* 或 *to_date*。此函数还必须在请求后更新 CGridView。

3.  我们需要控制器中的操作来处理 AJAX 请求。

## 让我们从第 2 部分开始。可能是这样的：

> ```
> Yii::app()->clientScript->registerScript('scriptId',
>     "var ajaxUpdateTimeout;
>     var ajaxRequest;
>     $('**selector_for_parameters_fields**').change(function(){  
>         ajaxRequest = $(this).serialize();
>         clearTimeout(ajaxUpdateTimeout);
>         ajaxUpdateTimeout = setTimeout(function () {
>             $.fn.yiiGridView.update(
> // this is the id of the CGridView
>                 'acc-payment-recei-grid',
>                 {data: ajaxRequest}
>             )
>         },
> // this is the delay
>         300);
>     });"
> ); 
> ```

将此代码放在视图中。笔记：

`$(this).serialize()`- 关键时刻。寻找[更多信息](http://api.jquery.com/serialize/)

`selector_for_parameters_fields`- 给他们（*fromDate*和*toDate*）一些独特的选择器

我们使用一些`delay`（300 毫秒）来减少不必要的 AJAX 请求的加载

## 现在 - 关于控制器中的操作

> ```
> public function actionIndex($fromDate='', $toDate='')       
> {
>   $criteria = new CDbCriteria();   
>   if(!empty($fromDate))
>     $criteria->addSearchCondition('your search condition about fromDate');    
>   if(!empty($toDate))
>     $criteria->addSearchCondition('your search condition about toDate');                 
>    $dataProvider=new CActiveDataProvider('YourModel',
>         array('criteria' => $criteria,));           
>    $this->render('YourView',array('dataProvider'=>$dataProvider,)); 
>  } 
> ```

它必须有效，但需要针对具体条件进行一些调整。

# android - 操作超时

> ID：12292788
> 
> 赞同：1
> 
> 时间：2012-09-06T04:01:19.257
> 
> 标签：android, web-services, timeout, httpresponse, socketexception

我有这个奇怪的错误：我什至设置了无限超时来尝试解决它。我说这很奇怪，因为它以前工作得很好，但现在，它不起作用，我不知道原因。错误：

```
09-05 22:40:04.930: W/IInputConnectionWrapper(820): showStatusIcon on inactive InputConnection
09-05 22:43:26.901: E/ServicioRest(881): Error en listar!
09-05 22:43:26.901: E/ServicioRest(881): java.net.SocketException: The operation timed out
09-05 22:43:26.901: E/ServicioRest(881):    at org.apache.harmony.luni.platform.OSNetworkSystem.connectStreamWithTimeoutSocketImpl(Native Method)
09-05 22:43:26.901: E/ServicioRest(881):    at org.apache.harmony.luni.platform.OSNetworkSystem.connect(OSNetworkSystem.java:115)
09-05 22:43:26.901: E/ServicioRest(881):    at org.apache.harmony.luni.net.PlainSocketImpl.connect(PlainSocketImpl.java:244)
09-05 22:43:26.901: E/ServicioRest(881):    at org.apache.harmony.luni.net.PlainSocketImpl.connect(PlainSocketImpl.java:533)
09-05 22:43:26.901: E/ServicioRest(881):    at java.net.Socket.connect(Socket.java:1055)
09-05 22:43:26.901: E/ServicioRest(881):    at org.apache.http.conn.scheme.PlainSocketFactory.connectSocket(PlainSocketFactory.java:119)
09-05 22:43:26.901: E/ServicioRest(881):    at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:143)
09-05 22:43:26.901: E/ServicioRest(881):    at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:164)
09-05 22:43:26.901: E/ServicioRest(881):    at org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:119)
09-05 22:43:26.901: E/ServicioRest(881):    at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:348)
09-05 22:43:26.901: E/ServicioRest(881):    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:555)
09-05 22:43:26.901: E/ServicioRest(881):    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487)
09-05 22:43:26.901: E/ServicioRest(881):    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:465)
09-05 22:43:26.901: E/ServicioRest(881):    at com.example.interviewhelpers.ClientDetailActivity.onCreateView(ClientDetailActivity.java:72)
09-05 22:43:26.901: E/ServicioRest(881):    at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:870)
09-05 22:43:26.901: E/ServicioRest(881):    at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1080)
09-05 22:43:26.901: E/ServicioRest(881):    at android.support.v4.app.BackStackRecord.run(BackStackRecord.java:622)
09-05 22:43:26.901: E/ServicioRest(881):    at android.support.v4.app.FragmentManagerImpl.execPendingActions(FragmentManager.java:1416)
09-05 22:43:26.901: E/ServicioRest(881):    at android.support.v4.app.FragmentActivity.onStart(FragmentActivity.java:505)
09-05 22:43:26.901: E/ServicioRest(881):    at android.app.Instrumentation.callActivityOnStart(Instrumentation.java:1129)
09-05 22:43:26.901: E/ServicioRest(881):    at android.app.Activity.performStart(Activity.java:3781)
09-05 22:43:26.901: E/ServicioRest(881):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2636)
09-05 22:43:26.901: E/ServicioRest(881):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
09-05 22:43:26.901: E/ServicioRest(881):    at android.app.ActivityThread.access$2300(ActivityThread.java:125)
09-05 22:43:26.901: E/ServicioRest(881):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
09-05 22:43:26.901: E/ServicioRest(881):    at android.os.Handler.dispatchMessage(Handler.java:99)
09-05 22:43:26.901: E/ServicioRest(881):    at android.os.Looper.loop(Looper.java:123)
09-05 22:43:26.901: E/ServicioRest(881):    at android.app.ActivityThread.main(ActivityThread.java:4627)
09-05 22:43:26.901: E/ServicioRest(881):    at java.lang.reflect.Method.invokeNative(Native Method)
09-05 22:43:26.901: E/ServicioRest(881):    at java.lang.reflect.Method.invoke(Method.java:521)
09-05 22:43:26.901: E/ServicioRest(881):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
09-05 22:43:26.901: E/ServicioRest(881):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
09-05 22:43:26.901: E/ServicioRest(881):    at dalvik.system.NativeStart.main(Native Method) 
```

这是调用 Web 服务的方法： 最后一行是 eclipse 告诉我问题发生的地方。

```
public static final String ruta = "http://10.0.0.2:2731/Api/Usuario";

        HttpParams httpParameters = new BasicHttpParams();
        HttpConnectionParams.setConnectionTimeout(httpParameters, 0);
        HttpConnectionParams.setSoTimeout(httpParameters, 0);
        HttpConnectionParams.setTcpNoDelay(httpParameters, true);

        HttpClient httpClient = new DefaultHttpClient(httpParameters);
        HttpGet del = new HttpGet(ruta + "s");
        del.setHeader("content-type", "application/json");

        try {
            HttpResponse resp = httpClient.execute(del); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T04:08:38.163

您在代码中将超时值设为 0。您使用大于 5000（毫秒）的值而不是 0。即 HttpConnectionParams.setConnectionTimeout(httpParameters, 5000); HttpConnectionParams.setSoTimeout(httpParameters, 5000);

# objective-c - 单击按钮时将选定的单元格文本标签添加到数组

> ID：12292805
> 
> 赞同：0
> 
> 时间：2012-09-06T04:04:10.193
> 
> 标签：objective-c, ios, xcode

我现在有一个应用程序，它有一个表格视图，其中包含从数组加载的多个单元格。我在文本视图中分隔文本以将文本分成组件，然后将这些组件添加到数组中。从那里我将每个单元格的文本标签设置为数组中的每个组件。所以我有一些看起来像这样的东西......

![在此处输入图像描述](../Images/738de103067c9627140b63febc15840d.png)

我希望能够选择一个单元格并突出显示该单元格，然后我希望能够单击右侧的按钮之一。当我单击一个按钮时，它会获取该单元格的文本标签并将其作为组件存储在一个数组中。

我不知道如何编写“获取所选单元格的文本标签并将其存储为组件”的代码。有没有办法检测单元格是否被选中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T04:14:38.903

您需要使用 a`NSMutableArray`来实现此目的，因为您可以动态添加和删除对象：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    myMutableArray = [[NSMutableArray alloc] init];
}

- (void)myButtonClicked
{
    NSMutableArray *myMutableArray;
    UITableViewCell *cell = [self.tableView cellForRowAtIndexPath:[self.tableView indexPathForSelectedRow]];
    if ([myMutableArray containsObject:cell.textLabel.text]) {
        [myMutableArray removeObject:cell.textLabel.text];
    }else{
        [myMutableArray addObject:cell.textLabel.text];
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T04:14:38.863

一种更好的方法是从为表格视图提供数据的数组中获取文本并将其放入另一个数组中。我会打电话给他们`sourceArray`和`destinationArray`。

```
- (IBAction)buttonAction:(id)sender {
    NSIndexPath *indexPath = [self.tableView indexPathForSelectedRow];
    NSString *string = [self.sourceArray objectAtIndex:indexPath.row];
    [self.destinationArray addObject:string];
} 
```

我怀疑该`indexPathForSelectedRow`方法是您正在寻找的方法。如果您仍然需要使用标签文本，请修改处理程序，如下所示：

```
- (IBAction)buttonAction:(id)sender {
    NSIndexPath *indexPath = [self.tableView indexPathForSelectedRow];
    UITableViewCell *selectedCell = [self.tableView cellForRowAtIndexPath:indexPath];
    NSString *string = selectedCell.textLabel.text;
    [self.destinationArray addObject:string];
} 
```

希望这可以帮助！

# html5-canvas - KeneticJS HTML5 Canvas 可拖动和舞台上的元素

> ID：12292808
> 
> 赞同：1
> 
> 时间：2012-09-06T04:04:29.193
> 
> 标签：html5-canvas, draggable, kineticjs

因此，我正在尝试创建一个舞台，在该舞台上可以有多个可拖动的项目。但是当单击并拖动舞台时，所有元素都会随之移动。

到目前为止，我只能通过将“可拖动”属性添加到其中一个来使其中一个工作。

有没有人有解决方案来解决这个问题？

这是 JSfiddle [http://jsfiddle.net/KHVhU/](http://jsfiddle.net/KHVhU/)

我已经考虑过我可能需要使用 jquery-ui 使包含的 div 可拖动而不是尝试在画布内完成整个事情的可能性，但理想情况下不想走这条路

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T05:33:48.173

不包括正确的 kineticJs 库。使用下面正确的 KineticJs。 [http://d3lp1msu2r81bx.cloudfront.net/kjs/js/lib/kinetic-v4.4.1.min.js](http://d3lp1msu2r81bx.cloudfront.net/kjs/js/lib/kinetic-v4.4.1.min.js)

现在，即使在舞台上，每个单独的项目也可以拖动。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T04:56:12.993

`setDraggable()`在函数的帮助下找到了解决方案

在这里更新了 JSFiddle：http: [//jsfiddle.net/KHVhU/1/](http://jsfiddle.net/KHVhU/1/) :)

# iis-7 - 在 IIS7 中添加 IIS6 管理兼容性角色的命令

> ID：12292810
> 
> 赞同：0
> 
> 时间：2012-09-06T04:04:45.657
> 
> 标签：iis-7, batch-file, iis-6

我尝试通过以下命令在 IIS7 中添加 IIS6 管理兼容性角色，但它不起作用。对于其他角色，相同的格式已经奏效。有任何想法吗？

使用的命令：

```
start /w pkgmgr /iu:IIS6-MetabaseCompatibility;
start /w pkgmgr /iu:IIS-IIS6MetabaseCompatibility; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-25T13:31:43.840

通常对于 Windows 功能，您也可以从命令行使用 DISM。参考这里：[http ://technet.microsoft.com/en-us/library/dd744382(WS.10).aspx](http://technet.microsoft.com/en-us/library/dd744382(WS.10).aspx)

使用命令行

```
Dism /online /Get-Features 
```

浏览可用功能。选一个你喜欢的！

```
Dism /online /enable-feature /FeatureName:[yourfeaturehere] 
```

# javascript - javascript-window.open

> ID：12292811
> 
> 赞同：0
> 
> 时间：2012-09-06T04:04:57.340
> 
> 标签：javascript, asp.net, vb.net

如何连接来自数据库和 URL 的 ID？

这是我的代码。我有一个错误“服务器标签格式不正确。”

```
NavigateUrl="javascript:void(window.open('ChangeHistory.aspx?ID="<%# DataBinder.Eval(Container.DataItem, "id")%>" ','_blank','height=600','width=600') );" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T04:07:22.183

我*认为*这是你需要的：

```
NavigateUrl="javascript:void(window.open('ChangeHistory.aspx?ID=<%# DataBinder.Eval(Container.DataItem, "id")%>','_blank','height=600','width=600') );" 
```

也就是说，删除`"`之前的那个`<%`和之后的那个`>%`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T04:46:25.767

您应该尝试`NavigateUrl`从服务器端代码添加属性...这将非常容易并且还包含您的`ID`in`window.open`方法。

如果它在其中，`Grid/Repeater/Datalist`则使用该`DataBound`属性，否则使用`Page_Load`事件为其添加属性...

例子

```
Foocontrol.NavigateUrl=@"javascript:void(window.open
     ('ChangeHistory.aspx? ID='"+YourID+"','_blank','height=600','width=600') )"; 
```

**编辑**

```
protected void yourGrid_RowDataBound(object sender, GridViewRowEventArgs e)
{
  if (e.Row.RowType == DataControlRowType.DataRow)
   {
     HyperLink hlnkViewHistory = (HyperLink)e.Row.FindControl("hlnkViewHistory");
     hlnkViewHistory.NavigateUrl==@"javascript:void(window.open
     ('ChangeHistory.aspx? ID='"+YourID+"','_blank','height=600','width=600') )";
   }
 } 
```

YourID - 添加您想要发送的任何 ID 作为参数......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T05:42:30.493

尝试这个。我改变了这个

```
<asp:HyperLink ID="HyperLink1" runat="server" NavigateUrl='<%# String.Format("ChangeHistory.aspx?id={0}", Eval("id")) %>' onclick="javascript:w= window.open(this.href,'DownloadImage','left=20,top=20,width=500,height=500,toolbar=0,resizable=0');return false;">Open</asp:HyperLink> 
```

# json - 如何将json响应放入表格单元格

> ID：12292812
> 
> 赞同：0
> 
> 时间：2012-09-06T04:04:58.917
> 
> 标签：json, uitableview, ios5

我对 ios dev 非常陌生，到目前为止，我几乎一直在努力解决所有问题。这真的很令人沮丧。

我已将注释/*代码崩溃放在这里*/以指示我的应用程序流停止的位置。我正在请求 json 数据

```
NSData* data = [NSData dataWithContentsOfURL:[NSURL URLWithString:@"http://192.168.2.4/iRestaurant/users"]];
    [self performSelectorOnMainThread:@selector(fetchedData:)
                           withObject:data waitUntilDone:YES]; 
```

fetchedData 的实现

```
- (void)fetchedData:(NSData *)responseData {
//parse out the json data
NSError* error;
NSDictionary* json = [NSJSONSerialization
                      JSONObjectWithData:responseData //1

                      options:kNilOptions
                      error:&error];
//NSLog(@"%@", json);
NSArray* latestLoans = [json objectForKey:@"Users"]; //2
NSEnumerator* enumerator = [latestLoans objectEnumerator];
id element;

  while(element = [enumerator nextObject]) {
    Result *fetchedResults = [Result init];
    /*crashes here*/
    fetchedResults.name = [[element objectForKey:@"User"] objectForKey:@"name"]; 
    fetchedResults.email = [[element objectForKey:@"User"] objectForKey:@"name"];
    [results addObject:fetchedResults];objectForKey:@"name"]);
  }
} 
```

**Result**是一个自定义对象，是 NSObject 的子类。我已经导入了 Result.h。我还在当前文件的声明文件中声明了 NSMutableArray *results。我正在将对象推入**results**。结果的头文件看起来像

```
@interface Result : NSObject

@property (nonatomic, copy) NSString *name;
@property (nonatomic, copy) NSString *email;
@property (nonatomic, assign) int ID;

@end 
```

我将实现 cellForRowAtIndexPath 并将结果的内容推送到可重用的单元格中。

我的 JSON 响应是

```
{"Users":
    [{"User":
        {"id":"1",
         "name":"Kishor kundan",
         "email":"kis@kun.ca",
         "password":"asdfasdf",
         "fb_id":"1234444"
        }
     },
     {"User":         
        {"id":"2",
         "name":"adsfasdf",
         "email":"asdfasdf@asdf.asdf",
         "password":"asdfasdf",
         "fb_id":"123123"
     }
    }]
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T18:42:34.470

由于找不到对象，代码崩溃了。我的代码引用了一个不存在的位置。[我从另一个问题](https://stackoverflow.com/questions/12296920/how-to-copy-custom-nsobject-into-nsmutablearray)中接受了@btype 的建议

# groovy - 是否可以将我自己的闭包和变量绑定到 groovlet？

> ID：12292815
> 
> 赞同：2
> 
> 时间：2012-09-06T04:05:03.487
> 
> 标签：groovy, groovlet

有一些变量和闭包，`groovlet`如请求、响应、输出、转发、重定向......

是否可以自动绑定我自己的变量和闭包`groovlet`？

我想要这个功能来做`${escapeHtml(params.value)}`类似的事情。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T16:40:14.783

`GroovyServlet`提供了一个钩子来做到这一点：[`setVariables`](http://groovy.codehaus.org/api/groovy/servlet/AbstractHttpServlet.html#setVariables%28groovy.servlet.ServletBinding%29). 创建一个`GroovyServlet`覆盖此方法的子类并`ServletBinding`使用您想要的任何内容填充。

# c++ - VS2008 - 项目过时，没有一行代码改变

> ID：12292819
> 
> 赞同：0
> 
> 时间：2012-09-06T04:05:44.727
> 
> 标签：c++, winapi, visual-studio-2008, build, console

我在使用 Visual Studio 2008 时遇到了一个非常奇怪的问题。我在 SO 上搜索了与“Project Out of Date”对话框类似的问题，但他们的问题是他们使用的头文件已被弃用/不再存在，或者他们的问题是在构建多项目解决方案时发生的，或者它有其他依赖项。

我的项目是一个 Win32 控制台应用程序，我去了 File->New->Project...->Win32 Console Application。我使用了默认设置（检查了预编译的标头），并且我没有更改项目中的任何一行代码，只要项目创建我按下调试按钮（尽管我在设置时遇到完全相同的问题构建目标发布）。

[主.cpp]

```
#include "stdafx.h"

int _tmain(int argc, _TCHAR* argv[])
{
    return 0;
} 
```

^ 非常标准的源文件，对吧？好吧，无论我在任何项目中构建什么，VS2008 都告诉我它已经过时了。为什么？这个问题可能不会阻止我构建项目，但我非常希望一切都井井有条，再也不用看到这个对话框了。再次，我查看了类似的问题，但他们的解决方案涉及消除一些额外的依赖或类似的东西，这些都不适用于我的情况。

为什么 VS2008 会在自己的项目模板上挑剔？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T04:08:18.697

如果源文件（包括包含文件）在未来某个时间以某种方式获得了日期时间，那么编译器会认为目标文件总是过时的。

# c# - 更改在 FTP 中上传文件的路径

> ID：12292830
> 
> 赞同：0
> 
> 时间：2012-09-06T04:06:55.607
> 
> 标签：c#, .net, wpf, ftp

> **可能重复：**
> [如何使用 FtpWebRequest (.NET) 更改目录？](https://stackoverflow.com/questions/330155/how-do-you-change-directories-using-ftpwebrequest-net)

```
 private void InitFTPTransfer(string filePath)
    {
        string[] ftpAddress = ddcdao.ddcAddress.Split(new string[] { "http://" }, StringSplitOptions.None);
        FtpWebRequest request = (FtpWebRequest)WebRequest.Create("ftp://" + ftpAddress[1] + "/root/" + Path.GetFileName(filePath));
        request.Method = WebRequestMethods.Ftp.UploadFile;

        request.Credentials = new NetworkCredential(Properties.Settings.Default.SysFTPID, Properties.Settings.Default.SysFTPPassword);

        byte[] fileContents = File.ReadAllBytes(filePath);

        request.ContentLength = fileContents.Length;

        Stream requestStream = request.GetRequestStream();
        requestStream.Write(fileContents, 0, fileContents.Length);
        requestStream.Close();

        FtpWebResponse response = (FtpWebResponse)request.GetResponse();

        response.Close();

    } 
```

我有上面的代码将特定文件上传到路径。

在 ftp 里面，我如何设置一个特定的目录来上传文件？

在这种情况下，我正在上传到带有嵌入式 linux 的机器，因此它需要位于 /root/somedirectory 下

编辑：我已经尝试过在请求路径中实际包含目录路径的建议，但它只是在 request.GetRequestStream(); 行抛出 System.Net.WebException 并带有消息“系统错误”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T04:14:23.957

您将目录放在请求的路径中，即

```
FtpWebRequest request = (FtpWebRequest)WebRequest.Create("ftp://" 
                         + ddcdao.ddcAddress + "/" + someDirectory 
                         + "/" someFile); 
```

# paypal - 无法使用 GetExpressCheckoutDetails 获取完整的购物车详细信息

> ID：12292832
> 
> 赞同：1
> 
> 时间：2012-09-06T04:07:16.837
> 
> 标签：paypal, paypal-sandbox

我目前正在使用贝宝沙箱中的自定义购物车测试在线商店。我能够正确地完成所有交易步骤 setExpressCheckout-> pay -> DoExpressCheckout。

在 DoExpressCheckout 步骤中，我认为现在是使用订单更新数据库的好时机。为此，我使用 GetExpressCheckoutDetails 函数来检索交易的内容。可悲的是，此功能返回贝宝必须提供的所有内容，但错过了我购物车的内容。我能得到的只是一件物品的细节。如果交易涉及多个项目，我只会得到第一个项目的详细信息。

这是我的代码（主要取自贝宝样本）：

```
$token =urlencode( $_REQUEST['token']);
$payerId=urlencode(  $_REQUEST['PayerID']);
$getExpressCheckoutDetailsRequest = new GetExpressCheckoutDetailsRequestType($token);

$getExpressCheckoutReq = new GetExpressCheckoutDetailsReq();
$getExpressCheckoutReq->GetExpressCheckoutDetailsRequest = $getExpressCheckoutDetailsRequest;

$paypalService = new PayPalAPIInterfaceServiceService();
$getECResponse = $paypalService->GetExpressCheckoutDetails($getExpressCheckoutReq);

$details = $getECResponse->GetExpressCheckoutDetailsResponseDetails;

// $details->PaymentDetails->PaymentDetailsItem this array should hold all items details
// sadly it always have 1 element instead of the full content of my cart :(

$orderTotal = $details->PaymentDetails->OrderTotal;

$PaymentDetails= new PaymentDetailsType();
$PaymentDetails->OrderTotal = $orderTotal;

 // 
 Some stuff with payment details
 //

$DoECRequestDetails = new DoExpressCheckoutPaymentRequestDetailsType();

$DoECRequest = new DoExpressCheckoutPaymentRequestType();
$DoECRequest->DoExpressCheckoutPaymentRequestDetails = $DoECRequestDetails;

$DoECReq = new DoExpressCheckoutPaymentReq();
$DoECReq->DoExpressCheckoutPaymentRequest = $DoECRequest;

$DoECResponse = $paypalService->DoExpressCheckoutPayment($DoECReq); 
```

我错过了一步还是调用了错误的功能。因为我试图打印我遇到的每个变量，而我的购物车的全部内容无处可寻。我觉得这很奇怪，因为交易的“orderTotal”与我原来的购物车相匹配。我可以在 SetExpressCheckout 步骤中存储我的原始订单，但由于贝宝已经有这些值，我发现它是多余的。

作为最后的手段，我确实使用 $paypalService->getLastRequest() 找到了购物车的内容，但严重的是，这是 paypal 返回的原始 XML，api 应该正确解析它:(。

谢谢阅读

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T09:31:39.513

我遇到了同样的问题——虽然 PayPal 返回的 XML 很好，但他们的 PHP SDK 没有正确解析它，所以你只能看到 GetExpressCheckout 中的最后一项。

我已经在 PayPal 的 GitHub 上的一个问题中发布了针对此问题的修复，请查看：

[https://github.com/paypal/SDKs/issues/37](https://github.com/paypal/SDKs/issues/37)

# objective-c - 表格视图的后退按钮

> ID：12292837
> 
> 赞同：0
> 
> 时间：2012-09-06T04:07:29.383
> 
> 标签：objective-c, uitableview, xcode4, back-button

我有一个应用程序，您可以在其中在文本字段中输入一些文本，然后一旦按下回车按钮，它就会被放入表格视图中。在我点击表格视图的后退按钮后，我返回到前一个视图，文本标签包含我输入的任何文本。要在我返回时清除文本，我想将一个操作方法连接到表视图的后退按钮。我应该怎么做，因为后退按钮没有出现在界面生成器中，所以我不能只控制拖动？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T14:05:52.600

您可以在 viewWillAppear 或 viewDidAppear 中执行此操作，也可以在保存文本后将其清除。

```
 - (void)viewWillAppear:(BOOL)animated
    {
            [super viewWillAppear:animated];
            [myTextField setText:@""];
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T04:23:34.897

在带有文本字段的视图的控制器中，您可以使用它：

```
- (void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];
    if (myTextField.text.length != 0) {
        [myTextField setText:@""];
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T04:25:33.383

我认为在按下后退按钮时清除文本字段会更有意义，例如：

方法，它可能看起来像

```
-(void)viewWillAppear:(BOOL)animated
{
    self.textInput.text = @"";
} 
```

在您导航回的视图控制器上。每当视图出现时，文本字段将被清除。您在 int hat 方法中放置的任何其他内容也将在那时执行。当您第一次导航到视图时也会发生这种情况，但这在这里似乎不是问题，并且可以很容易地被编码为..

# mysql - 使用 MySQL 随着时间的推移选择一部分大量数据

> ID：12292841
> 
> 赞同：5
> 
> 时间：2012-09-06T04:07:51.823
> 
> 标签：mysql, sql

我有数十万个跨越 40 年的价格点。我想构建一个只返回 3000 个总数据点的查询，最后 500 个是最近的数据点，另外 2500 个只是其余数据的样本，均匀分布。

是否可以在一个查询中执行此操作？我将如何只选择大量数据的样本？这是我仅获取其他 2500 个数据点的样本的一个小示例：

```
1
2
3    
4
5
6
7
8
9
10 
```

我想返回这样的东西：

```
1
5
10 
```

这是最后 500 个的查询：

```
SELECT * FROM price ORDER BY time_for DESC LIMIT 500 
```

我不确定如何从其他数据点获取样本数据。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-06T04:44:00.220

尝试这个：

```
(SELECT * FROM price ORDER BY time_for DESC LIMIT 500)
UNION ALL
(SELECT * FROM price WHERE time_for < (SELECT time_for FROM price ORDER BY time_for LIMIT 500, 1) ORDER BY rand() LIMIT 2500)
ORDER BY time_for 
```

注意：它可能会很慢。这张桌子有多大？

仅从所有这些行中获取主 ID，然后在缩小范围后将其连接到辅助查询中的原始 ID 可能会更快。这是因为必须对*整个*表`ORDER BY rand() LIMIT`进行排序。如果表很大，这可能需要很长时间，并且需要大量磁盘空间。仅检索 ID 会减少必要的磁盘空间。

 ** * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-10T13:59:28.870

前面的答案很好，但是您确实指定了希望结果*均匀分布*，所以我也会添加这种可能性。通过在行上迭代计数器，您可以使用 MOD 运算符对均匀分布进行采样。我现在没有安装 MYSQL 来测试它，如果语法不是 100% 正确，我深表歉意。但它应该足够接近，可能会给你一些想法。

```
 (  SELECT p1.*
       FROM price p1
   ORDER BY p1.time_for DESC
      LIMIT 500  )

   UNION ALL

  (  SELECT @i := @i + 1 AS row_num,
            p2.*
       FROM price p2,
            (SELECT @i: = 0)
      WHERE row_num > 500
        AND (row_num % 500) = 0
   ORDER BY time_for DESC  ) 
```

第一个查询给出了最新的 500 行。第二个查询之后每 500 行给出一次，从而从其余数据返回均匀分布。显然，您可以调整此参数以实现所需的样本间距。或者根据表中的总行数来计算必要的间距，以准确给出 2500 条记录。*

# ruby-on-rails - 如何使 link_to 和自定义 URL 在 Rails 上协同工作

> ID：12292842
> 
> 赞同：3
> 
> 时间：2012-09-06T04:08:10.857
> 
> 标签：ruby-on-rails, ruby, routing

我有一个自定义的虚 URL 设置，ala GitHub：

```
http://foo.com/:user/:stuff 
```

我也有处理这个问题的路线：

```
match '/:user/:stuff', to: 'stuffs#show' 
```

我怎样才能`link_to`使用这条路线`stuff`？

```
link_to @stuff.name, @stuff 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-06T04:28:16.393

您可以通过路由别名来实现：

```
match '/:user/:stuff' => 'stuffs#show', :as => 'users_stuff' 
```

在您看来，通常调用它，传递两个参数：

```
<%= link_to 'Show', users_stuff_path(current_user,3) %> 
```

# sockets - 错误 #2048：违反安全沙箱

> ID：12292843
> 
> 赞同：1
> 
> 时间：2012-09-06T04:08:15.193
> 
> 标签：sockets, actionscript, flash-cs6

我已经阅读了 Internet 上几乎所有关于“错误 #2048”和“违反安全沙箱”的文章。我已经尝试了所有提供的解决方案，但问题仍然存在。

我的努力的详细版本可以在以下链接中找到： [http ://forums.adobe.com/message/4668901#4668901](http://forums.adobe.com/message/4668901#4668901)

总而言之，我正在使用带有 AS3 的 Flash Professional CS6，试图建立到我用 C# 开发的服务器的二进制套接字连接。我发现有一次我需要有一个策略服务器来在端口 843 上提供请求的 crossdomain.xml，但是尽管遵循每一个面包屑，我仍然被“错误 #2048：违反安全沙箱”所困扰。

我遇到了一些提到将 SWF 放置在远程服务器上的参考资料，因此我通过启动一个运行 Server 2012 RC 的 VirtualBox 会话进行了尝试，并得到了相同的结果——尽管从来宾操作系统浏览了 HTML 页面。

我注意到 Adob​​e 上的文档已经严重过时，所以我不知道我是否只是错过了他们正在为开发自己的服务器提供套接字支持的公告，或者这是他们强迫你购买他们的媒体服务器的方式.

也许还有另一种方法可以解决这个问题，但我想要完成的是能够通过 Flash 应用程序与具有实时数据的后端服务器进行通信。我不想流式传输视频或音乐，只是文本数据包。后端服务器将使用 C# 开发。

任何反馈或建议表示赞赏。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T01:43:43.677

解决方案需要 3 处更改。第一个与如何识别“AddressFamily”有关。下一项是将 IPEndPoint 的 IPAddress 从 AddressList 的源更改为“IPAddress.Any”。最后一项有点奇怪，因为在我使用 MaxConnections 定义侦听器之前，服务器似乎没有接收任何新连接。

有关更多详细信息，请参阅我的 Adob​​e 论坛[消息](http://forums.adobe.com/message/4668901#4668901)。

# javascript - 更改当前选项卡或浏览器窗口的标题

> ID：12292845
> 
> 赞同：0
> 
> 时间：2012-09-06T04:08:32.147
> 
> 标签：javascript, html, dom, title, titlebar

当您有 1 条通知或消息时，如何更改出现在浏览器选项卡上的网站的当前标题，就像 Facebook 将标题更改为“(1) Facebook”一样？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-06T04:10:14.753

就这样做...

```
document.title = 'my new title'; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-06T04:10:33.113

```
document.title = 'new title'; 
```

或者

```
document.getElementsByTagName('title')[0].innerHTML = 'new title'; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-06T04:10:16.570

JavaScript：

```
document.title = 'my title'; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-06T04:11:10.767

```
document.title = "your title"; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-06T04:10:06.837

**Javascript：**

```
document.getElementsByTagName("title")[0].innerHTML = "Your Desired Title" 
```

**或者**

**HTML：**

```
<title id="page-title"></title> 
```

**Javascript：**

```
document.getElementById("page-title").innerHTML = "Your Desired Title" 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-06T04:14:00.410

jquery方式

```
$("title").html("your title"); 
```

# c# - 处理 TableAdapter Null 值

> ID：12292848
> 
> 赞同：1
> 
> 时间：2012-09-06T04:08:38.450
> 
> 标签：c#, .net, dataset

我在包装此 SQL 的 TableAdapter 中有一个查询（Oracle SQL，使用'：'而不是'@'作为参数化变量），我称之为`GetModel()`

```
SELECT MFG_PRODUCT FROM FRAME_NO
WHERE FRM_NO = :FRM_NO 
```

我预计查询可能会返回空值，因此我将列`MFG_PRODUCT`空值设置为 Microsoft [http://msdn.microsoft.com/en-us/library/ya91ataz(v=vs.100)](http://msdn.microsoft.com/en-us/library/ya91ataz(v=vs.100).aspx)`Null`的本指南所指出的 。 [aspx](http://msdn.microsoft.com/en-us/library/ya91ataz(v=vs.100).aspx)

但是，当查询没有返回任何行时，我的应用程序仍然会抛出异常。我该怎么办？

我已经重建了整个解决方案，以防代码仍然引用旧的编译数据集，但仍然没有运气。

编辑：这是代码。返回值为null时抛出异常

```
try
{
    String modelCode = frameAdapter.GetModelCode(txtStdFrameId.Text.Trim()).ToString();
    if(String.IsNullOrEmpty(modelCode)) //Go directly to exception when data is null here
    {
       //Process the data 
    }
}
catch(Exception ex)
{
     //Log error to a text file
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T04:28:14.817

以这种方式设置列`NULL`与您的空数据行没有任何关系。仅当您至少有一行并且该行中的列是`NULL`

对于不返回行的数据，您必须自己处理这种情况

```
//DataTable
DataTable dt = ds.Fill(..);

//handle no rows 
if(dt.Rows.Count == 0)
{
   //what do you want to do here
}
else
{
   //this dt contains at least one row, now I can use it without any errors/exception
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T06:12:48.500

好的，我找到了解决方案。这是因为这一行中的拼写错误： `String modelCode = frameAdapter.GetModelCode(txtStdFrameId.Text.Trim()).ToString();`

显然将 a 转换为`null`触发错误的字符串。它应该是这样的： `String modelCode = frameAdapter.GetModelCode(txtStdFrameId.Text.Trim());`

# c# - MVVM 最佳实践 - 直接使用模型列表成员的引用或制作副本？

> ID：12292852
> 
> 赞同：1
> 
> 时间：2012-09-06T04:09:36.220
> 
> 标签：c#, mvvm, reference, deep-copy

假设我有一个模型，它为我提供了一个属性，即自定义对象列表。该模型是一个单例，我将此属性的引用提供给 ViewModel。这些自定义对象具有例如布尔属性。现在，用户通过单击视图并操作模型中的参考来更改这些值。因此，我的模型中的列表不会改变，因此模型无法通知其他视图，除非我为每个列表成员实现事件处理。

另一方面，如果我分配了一个完整的新列表，我的模型会通知其他人。

问题是：处理我的模型的引用通常是个好主意，还是每个 ViewModel 都应该对列表内容进行深层复制，然后为模型分配一个完整的新列表。如果不是，我应该为模型中列表的每个成员添加事件处理吗？

顺便提一句。ObservableCollection 不是选项，因为它不会检测项目更改，我认为一般模型应该使用 Ilist 接口。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T04:38:45.077

您的问题没有直接的答案，这完全取决于您希望应用程序的行为方式。

如果您希望用户所做的任何更改在应用程序中立即生效，那么您应该直接处理模型返回的引用。但在用户方面，你必须处理应用程序主动更改列表并通知用户的情况。

另一方面，如果您希望用户所做的任何修改都必须通过按下“应用更改”按钮来验证，那么克隆列表的选项可能是最佳选择。

# sql - 创建表的最佳实践 DDL 是什么？包含所有对象的单个语句还是创建和更改许多单个语句？

> ID：12292859
> 
> 赞同：3
> 
> 时间：2012-09-06T04:10:37.077
> 
> 标签：sql, oracle, ddl

是否有最接近这些示例之一的最佳实践？

```
CREATE TABLE TABLE1 
(
ID   NUMBER(18)     CONSTRAINT TABLE1_PK PRIMARY KEY,
NAME VARCHAR2(10)   CONSTRAINT NAME_NN NOT NULL
); 
```

或者

```
CREATE TABLE TABLE1 
(
ID   NUMBER(18),
NAME VARCHAR2(10)   CONSTRAINT NAME_NN NOT NULL
);

ALTER TABLE TABLE1  ADD CONSTRAINT TABLE1_PK
PRIMARY KEY (ID)
USING INDEX (CREATE UNIQUE INDEX IDX_TABLE1_PK ON TABLE1 (ID)); 
```

一般来说，这两种情况都会产生更好的结果吗？第一个选项更具可读性，但也许有后者更可取的原因。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-06T04:53:18.923

绝对是个人喜好。我更喜欢在单个语句中尽可能多地做，`CREATE TABLE`因为我发现它更简洁。我需要的大部分东西都在那里描述。

有时这是不可能的。假设你有两个表，每个表都有引用，或者你想先加载一个包含一堆数据的表，所以你在加载表之后添加额外的索引。

您会发现许多从数据库创建模式的工具会将它们分开（主要是因为它总是正确的——定义所有表，然后定义所有关系）。

但就个人而言，如果可行的话，我发现将所有内容集中在一个地方是最好的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-06T05:42:45.483

在构建最终将由其他人稍后运行的部署脚本时，我更喜欢将脚本分开一点。如果出现问题，从日志中判断到底是什么失败会更容易一些。

我的表创建脚本通常只有 NOT NULL 约束。PK、unique 和 FK 约束将在之后添加。

不过，这是一个小问题，我并没有特别反对将它们全部组合到一个大的 CREATE TABLE 语句中。

您可能会发现您的工作场所已经制定了标准。例如，我当前的客户需要单独的 CREATE TABLE 脚本，然后需要更多单独的约束、索引等脚本。

当然，索引组织表是个例外，它必须预先声明 PK 约束。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T04:34:36.850

在实际创建语句中为字段定义任何属性或默认值是个人偏好。我注意到的一件事是您的第二个语句不起作用，因为您没有指定 id 字段是`NOT NULL`.

我想我预先指定表的主键是可读性的个人最佳实践。

创建表时要考虑的另一件事是您希望如何识别项目，唯一性或复合性。 `ALTER TABLE`有利于事后创建复合键。

# sql - 在 Django 中使用表单编辑一个小的 SQL 行集

> ID：12292867
> 
> 赞同：0
> 
> 时间：2012-09-06T04:11:39.837
> 
> 标签：sql, django, forms, flask, wtforms

我有兴趣使用类似于在桌面数据库应用程序中找到的网格在页面上使用表单显示 1-5 个模型实例。我知道我需要使用多个表单或表单集，但另一个要求是我希望它更多地采用网格格式，每个模型的字段都显示在 y 轴上具有公共字段标签的列中。

我应该能够同时编辑多个列（实际上是模型实例），然后提交单个列（模型实例）或全部提交。我还希望能够突出显示已更改的已更改单元格，以便向用户提供有待更改的视觉反馈。

对于相当长的要求列表感到抱歉，我知道这可能需要一些不同的技术/技巧来实现。我把它扔在那里是因为我在向这个社区寻求关于我应该看哪些组件/技术的指导。如果运气好的话，会有一些 jQuery 组件可以为我处理这个几乎是开箱即用的。如果没有，实现编辑多个模型实例的一些指导将会有所帮助。

我还需要构建版本控制，以防视图页面上显示的数据过时并防止覆盖较新的提交。我可能会使用表中的版本控制字段来实现后者，该字段将执行检查并相应地处理它。

此外，Flask 和 Django 都是引擎的选择，而且 WTForms 看起来至少看起来很有希望。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T22:25:51.930

Django 中没有这种现成的解决方案。只需创建您的自定义表单来处理您想要的任意数量的实例并执行您想要的任何操作，或者扩展表单集。

# ios - 在 Xcode 中的 Plist 中搜索数组

> ID：12292876
> 
> 赞同：0
> 
> 时间：2012-09-06T04:12:28.037
> 
> 标签：ios, xcode, arrays, search, plist

我正在开发一个应用程序，它应该在 Plist 数据中搜索一个字符串并返回一个值，该值应该提示用户是什么类型，比如品牌。例如，用户在我的文本字段中输入“iPhone”，应用程序应返回用户在点击文本字段下方的 Go 按钮后输入的产品品牌。

在我的 Products.plist 中，它包含一系列品牌以及品牌拥有的某些产品。示例是：

苹果：iPhone、iPod、iPad、Mac 索尼：PSP、PS3、Bravia、Xperia 三星：Galaxy S II、Galaxy S III、Galaxy Tab

我怎样才能做到这一点？我已经完成了我的应用程序，但没有使用 plist。我只想使用 Plist 来轻松维护和更新应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T05:07:43.540

考虑您的 plist 文件名为 data.plist，您应该这样做：

```
NSBundle *bundle = [NSBundle mainBundle];    
NSString *pListpath = [bundle pathForResource:@"data" ofType:@"plist"];
NSDictionary *dictionary = [[NSDictionary alloc] initWithContentsOfFile:pListpath];

for (NSString* key in [dictionary allKeys]){
    NSArray *array = [dictionary objectForKey:key];
    for (int j = 0; j < [array count]; j++) {
        if ([[array objectAtIndex:j] isEqualToString:@"iPhone"]) {
            NSLog(@"%@",key);
        }
    }
} 
```

# mongodb - MongoDB BI架构

> ID：12292879
> 
> 赞同：1
> 
> 时间：2012-09-06T04:12:36.780
> 
> 标签：mongodb, business-intelligence

我们有一个运行 Mongo 的生产应用程序，在不同的盒子上有一个副本集。

我想开始对数据做一些 BI，可能使用[Pentaho](http://wiki.pentaho.com/display/BAD/Downloads)。

我的问题是：我应该如何设置我的架构，以便我不直接在生产环境中进行 BI？

我应该创建一个单独的 BI 实例并对 BI 实例执行 mongoexport，还是应该遵循其他一些最佳实践？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T11:34:59.593

根据您的数据集、BI 要求和 MongoDB 服务器版本，有几个选项需要考虑。如果您只需要为报告*读取*数据，则有比*写入*数据更多的选项（例如，对于 map/reduce 操作）。MongoDB 2.2 还引入了一些非常有用的特性和改进，如下所述。

一般来说，使用[副本集](http://www.mongodb.org/display/DOCS/Replica+Sets)配置对于管理目的非常有帮助，因为这样可以在不中断主 MongoDB 服务器的情况下使用数据集的完整副本。对于更大的数据集和水平写入扩展，MongoDB 的[分片](http://www.mongodb.org/display/DOCS/Sharding+Introduction)功能也可以与以下任何建议结合使用。

在走上分离 BI 数据的道路之前，有必要通过在暂存环境中进行测试来确定实际影响是什么。

以下方法大致按照与生产环境隔离的顺序排列：

1.  使用副本集，您可以使用[读取首选项](http://docs.mongodb.org/manual/applications/replication/#read-preference)将查询定向到适当的服务器。在 2.2 之前的 MongoDB 版本中，一般读取首选项仅限于从主要读取或允许从具有“slaveOK”（相当于“secondaryPreferred”）的非隐藏辅助读取。在 MongoDB 2.2 中有一些额外的读取首选项，包括“次要”（如果可用，则从次要读取，否则错误）；“首选首选”（如果可用，则从主要读取..否则为次要）；和“最近的”（根据网络延迟从最近的主节点或辅助节点读取）。MongoDB 2 中的读取首选项。

2.  对于 MongoDB 1.8 及更高版本，您可以使用具有[隐藏辅助节点](http://www.mongodb.org/display/DOCS/Replica+Set+Configuration#ReplicaSetConfiguration-Memberoptions)的副本集。隐藏节点不会被通告给正常连接到副本集的客户端，但可以直接连接到生成报告。注意：隐藏节点将是只读辅助节点，因此这限制了某些查询的使用。例如，map/reduce 需要写入权限才能保存到输出集合.. 但您可以根据您的 BI 要求使用内联 map/reduce。

3.  MongoDB 2.2 有一个数据库级别的写锁（对具有全局写锁的先前版本的改进）。如果需要写入 BI 数据，可以将其保存到单独的数据库中，以尽量减少锁争用。您仍然必须考虑整体资源影响。例如，为 BI 目的处理大量旧文档可能会与生产应用程序正在查询的最新文档的缓存竞争。

4.  如果您想将 BI 数据与生产环境完全分离，您可以使用其中一种 MongoDB[备份策略](http://docs.mongodb.org/manual/administration/backups/)创建一个单独的实例。如果启用了复制，则可以从副本集中的辅助节点创建备份。根据您的数据集的大小，创建数据的快照副本（包括已构建的索引）可能会比完整的[mongodump/mongorestore](http://www.mongodb.org/display/DOCS/Import+Export+Tools#ImportExportTools-mongodumpandmongorestore)周期更快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T04:20:22.353

使用副本集并在辅助节点上运行分析（只要涉及）。

# javascript - 如何将数组元素附加到div？

> ID：12292882
> 
> 赞同：3
> 
> 时间：2012-09-06T04:13:32.913
> 
> 标签：javascript, html, arrays, string, dom

我一直在尝试改变，所以我从输入表单中得到推送，但没有运气。

```
<form id="myform">
    <input id="type" type="text" name="input">
    <button onclick="myFunction()">Add number</button>
</form>
<br>
<div id="box"; style="border:1px solid black;width:150px;height:150px;overflow:auto">
</div>
<script>
    var number= [];
    function myFunction()
    {
        number.push= document.getElementById("type").value;
        var x=document.getElementById("box");
        x.innerHTML=number.join('<br/>');
    }
</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T04:16:07.430

代替：

```
var x = document.getElementById("demo"); 
```

和：

```
var x = document.getElementById("box"); 
```

如果要将数组转换为字符串，可以使用 javascript 函数`join()`：

```
x.innerHTML = number.join(',');
// Or
x.innerHTML = number.toString(); 
```

这是你想要的吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T04:15:47.553

您需要转换数组，例如：

```
x.innerHTML=number.join(","); 
```

和：

```
var x = document.getElementById("box"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T04:18:02.573

```
var arr = [];

function func () {
  arr.push('5');
  document.getElementById('box').innerHTML = arr.toString();
} 
```

# java - Arraylist 未在 Java GUI 温度猜谜游戏中存储用户输入

> ID：12292883
> 
> 赞同：0
> 
> 时间：2012-09-06T04:13:49.980
> 
> 标签：java, arrays, arraylist, store, user-input

我目前正在为一年级的编程课做作业，老实说，编程并不是我最大的技能。因此，对于这个小问题的任何帮助将不胜感激。我很抱歉因为我的新手而堵塞了网站。

该程序本质上是一个使用温度的猜数游戏，它将JTextField中的猜测（intguessTemperature）存储并排序到一个数组列表中，并通过JOptionMessage显示，一旦你猜对了，最低猜测，正确猜测的索引数组，所有猜测的平均值和以华氏度为单位的转换温度。它在 9 到 40 之间，因为作业指定了 40 和我学生证上的最高数字。我没有包含 avg 或 index 的方法，因为不起作用的 arraylist 使它变得多余。

我遇到的麻烦是将温度猜测（无论正确还是不正确）存储在数组列表中。我手动测试程序，从 9 开始，一直工作到 40。因此，如果我的数组列表运行正常，那么在对猜测的最低温度进行排序后的输出应该始终为 9，因为这始终是我开始的地方，但输出最低当前温度是随机计算的数字和正确的猜测。除非我的排序方法和查找最小值方法不正确，否则除了最后一个之外，arraylist 不会被任何猜测填充。因此，如果有人可以向我建议我的 arraylist 有什么问题（或者如果一切都错了）它没有捕获每个猜测实例，那将不胜感激。

```
import java.awt.*;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.util.ArrayList;
import java.util.Collections;
import java.util.Random;
import javax.swing.*;

public class TemperatureFrame extends JFrame {

public JFrame mainFrame;
public JLabel prompt1, prompt2;
public JTextField userInput;
public JLabel comment;
public JButton restart;
public int randomTemperature;
public int min = 9;
public int max = 40;
public int guessTemperature;
public int sumTemperature;
public double avgTemperature;
public int lowestTemperature;
public int convertedTemperature;
public int indexTemperature;
public Color background;
public ArrayList<Integer> arList;

public TemperatureFrame() {

    super("Temperature Guess/Conversion Application");
    prompt1 = new JLabel("Randomly generated temperature is between 9 and 40." );
    prompt2 = new JLabel("Write temperature (your guess) or -1 (for exit) and press enter key:");
    userInput = new JTextField(5);
    userInput.addActionListener(new GuessHandler());       
    comment = new JLabel("The results will be shown here.");
    restart = new JButton("Start Again - Generate A New Temperature");
    restart.addActionListener(
            new ActionListener() {
                @Override
                public void actionPerformed(ActionEvent e) {
                    userInput.setText("");
                    comment.setText("The results will be shown here.");
                    RandomTemperature();
                    userInput.setEditable(true);
                }
            });
    setLayout(new FlowLayout());
    background = Color.LIGHT_GRAY;
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    setSize(500, 150);
    setLocationRelativeTo(null);
    setVisible(true);
    setResizable(false);        

    add(prompt1);
    add(prompt2);
    add(userInput);
    add(comment);
    add(restart);

    RandomTemperature();
    ConvertTemperature();   
}

public void RandomTemperature() {
    Random random = new Random();
    randomTemperature = random.nextInt(max - min) + min;
}    

public void ConvertTemperature() {
    convertedTemperature = randomTemperature * 9 / 5 + 32;        
}

class GuessHandler implements ActionListener {

    @Override
    public void actionPerformed(ActionEvent e) {
        {
            arList = new ArrayList<>();
            String str;
            str = userInput.getText().toString();
            guessTemperature = Integer.parseInt(str);
            arList.add(guessTemperature);
            {   
                if (guessTemperature > randomTemperature) {
                    comment.setText("Temperature guessed is higher than the random temperature.");
                    userInput.setText("");
                    userInput.setEditable(true);             
                }
                if (guessTemperature < randomTemperature) {
                    comment.setText("Temperature guessed is lower than the random temperature.");
                    userInput.setText("");
                    userInput.setEditable(true);
                }
                if (guessTemperature == randomTemperature) {
                    Collections.sort(arList);
                    lowestTemperature = Collections.min(arList);
                    comment.setText("Temperature guessed is equal to the random temperature.");
                    JOptionPane.showMessageDialog(null, "Temperature guessed is equal to the random temperature.\n\n1\. Lowest temperature is:" + lowestTemperature + "\n2\. Average temperature is:" + avgTemperature + "\n3\. Array index of correctly guessed temperture is:" + indexTemperature + "\n4\. Temperature in Farenheit is:" + convertedTemperature + "\n\nThank you for playing!");                         
                } 
                else if (guessTemperature == -1) {
                    System.exit(0);
                }
            }
        }
    }
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T04:22:28.590

您可能希望`arList = new ArrayList<>();`作为处理程序类的实例变量移动。现在，由于 arraylist 是在 actionPerformed 方法中初始化的，所以每次用户单击按钮时都会重新初始化。

（只是粗略地看了一下程序。我可能是错的）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T04:23:00.260

只是快速浏览了一下，但我认为问题在于每次执行操作时都会创建一个新的 ArrayList。

# java - 从 WAVE 转换为 MP3 的音频文件的持续时间差异

> ID：12292889
> 
> 赞同：1
> 
> 时间：2012-09-06T04:14:36.650
> 
> 标签：java, audio, javasound

我认为如果我们在不同格式之间转换音频文件，播放的总持续时间应该没有差异。

例如，如果我记录总持续时间为 2 秒的波形文件，它现在的大小是 20.3 MB 。现在我使用 ffmpeg 最新版本将此波形文件转换为 mp3 文件，它的大小变为 1.35 mb。现在我使用下面的代码获得相同转换后的 MP3 文件的持续时间。

```
public static String getDurationWithMp3Spi(File file)
            throws UnsupportedAudioFileException, IOException, Exception {

        AudioFileFormat fileFormat = AudioSystem.getAudioFileFormat(file);
        System.out.println(" File for duration MP3 " + file.getAbsolutePath());
        if (fileFormat instanceof TAudioFileFormat) {
            Map<?, ?> properties = ((TAudioFileFormat) fileFormat).properties();
            String key = "duration";
            Long microseconds = (Long) properties.get(key);
            int mili = (int) (microseconds / 1000);
            int sec = (mili / 1000) % 60;
            int min = (mili / 1000) / 60;

            String mp3Len = null;
            String mins = null;
            String secs = null;

            if (min == 0) {
                mins = "00";
            }

            if (min < 10) {
                mins = "0" + min;
            }else{
                mins = "" + min;
            }

            if (sec == 0) {
                secs = "00";
            }

            if (sec < 10) {
                secs = "0" + sec;
            }else{
                secs = ""+secs;
            }

            mp3Len = mins + ":" + secs;

            System.out.println("time = " + min + ":" + sec);

            return mp3Len;
        } else {
            throw new UnsupportedAudioFileException();
        }

    } 
```

如果我在 windows 媒体播放器或任何其他播放器中看到它会显示与原始波形相同的持续时间，但是当我从这种方法中获得时，它与原始波形不同，并且差异非常大。

如果将音频文件从 WAVE 转换为 MP3 或反之亦然，音频文件的持续时间是否存在差异？

请提供任何帮助。上面的代码使用[MP3SPI](http://www.javazoom.net/mp3spi/mp3spi.html)插件。

上述方法进行转换并获得持续时间。

```
for (Iterator<FileItem> fileIter = fileList.iterator(); fileIter
                .hasNext();) {

            FileItem fileItem = fileIter.next();

            // write file to disk to specified path
            if (!fileItem.isFormField()) {

                String fileName = fileItem.getName();

                System.out.println(" file Name " + fileName);

                // save file to desired destination
                waveFileSavePath = processFolderAppendee(waveFileSavePath,
                        fileName);

                File waveFile = new File(waveFileSavePath);

                fileItem.write(waveFile);

                Thread.sleep(100);

                // do conversion
                String mp3FileName = fileName.replace("wav", "mp3");
                mp3Path = mp3Path + "/" + mp3FileName;
                convertToMP3(servletContext, waveFileSavePath, mp3Path);

                Thread.sleep(100);

                // prepare data(s)
                GuestMessagesForm guestMessageForm = prepareGuestMessageData(
                        accountId, waveFileSavePath, mp3Path);

                PlayListMessagesForm playListMessageForm = preparePlayListMessageData(accountId);

                // save data(s) 
```

// 此方法调用持续时间 saveGuestMessage(guestMessageForm); savePlayListMessage(playListMessageForm);

```
 } else {

                // do nothing
            }

            waveFileSavePath = servletContext.getRealPath(recordDir);
        } 
```

# ruby - 安装 RMagick gem -- 找不到 MagickWand.h

> ID：12292896
> 
> 赞同：12
> 
> 时间：2012-09-06T04:15:13.777
> 
> 标签：ruby, osx-snow-leopard, rmagick

我正在 OSX 10.6.8 上安装 rmagick gem，使用`gem install rmagick`，我收到以下错误

```
 Can't install RMagick 2.13.1\. Can't find MagickWand.h.
*** extconf.rb failed ***
Could not create Makefile due to some reason, probably lack of
necessary libraries and/or headers.  Check the mkmf.log file for more
details.  You may need configuration options.

Provided configuration options:
    --with-opt-dir
    --with-opt-include
    --without-opt-include=${opt-dir}/include
    --with-opt-lib
    --without-opt-lib=${opt-dir}/lib
    --with-make-prog
    --without-make-prog
    --srcdir=.
    --curdir
    --ruby=/Users/disaacs/.rvm/rubies/ruby-1.9.3-p125/bin/ruby

Gem files will remain installed in /Users/disaacs/.rvm/gems/ruby-1.9.3-p125/gems/rmagick-2.13.1 for inspection.
Results logged to /Users/disaacs/.rvm/gems/ruby-1.9.3-p125/gems/rmagick-2.13.1/ext/RMagick/gem_make.out 
```

查看 mkmf.log 文件，我看到

```
have_header: checking for wand/MagickWand.h... -------------------- no

"/usr/bin/gcc-4.2 -E -I/Users/disaacs/.rvm/rubies/ruby-1.9.3-p125/include/ruby-1.9.1/x86_64-darwin10.8.0 -I/Users/disaacs/.rvm/rubies/ruby-1.9.3-p125/include/ruby-1.9.1/ruby/backward -I/Users/disaacs/.rvm/rubies/ruby-1.9.3-p125/include/ruby-1.9.1 -I.      conftest.c -o conftest.i"
conftest.c:3:29: error: wand/MagickWand.h: No such file or directory 
```

这是真的。`-I`在该命令的指令指定的任何目录中都找不到文件 MagickWand.h `gcc-4.2`。**为什么不？我该如何解决这个问题？**

ImageMagick 已安装，使用自制软件。如果我搜索我的驱动器，我会发现 MagicWand.h 安装在`/usr/local/Cellar/imagemagick/6.7.7-6/include/ImageMagick/wand/MagickWand.h`.

我已经尝试了[Can't install RMagick 2.13.1 中的所有建议。找不到 MagickWand.h。](https://stackoverflow.com/questions/9050419/cant-install-rmagick-2-13-1-cant-find-magickwand-h)，但他们都没有工作。

**编辑**：要注意的另一件事：我最初使用 MacPorts 安装了 ImagMagick 6.7.0-7，并且 RMagick 安装得很好。除了它不适用于 CarrierWave gem。所以我卸载了 MacPorts 并卸载了 RMagick。然后使用 重新安装 ImageMagick `brew install -f imagemagick --disable-openmp`，并尝试重新安装 rmagick gem（这让我想到了当前的问题）。我在每一步都重新启动了所有终端，以确保我的路径已刷新。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-06-03T08:00:13.983

对于基于 Debian（例如 Ubuntu）的系统，您可以尝试，

```
sudo apt-get install libmagickcore-dev libmagickwand-dev
gem install rmagick 
```

这个对我有用。

从[ruby​​-forum找到解决方案](http://www.ruby-forum.com/topic/190824)

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-03-28T12:15:39.973

1) 通过安装程序安装

[http://cactuslab.com/imagemagick/](http://cactuslab.com/imagemagick/)

2）尝试 gem install rmagick

如果检查 wand/MagickWand.h... 无
类型

```
mdfind MagickWand.h 
```

找到类似的东西

```
/Users/user/ImageMagick-6.8.3/include/ImageMagick-6/wand/MagickWand.h 
```

并输入终端

```
C_INCLUDE_PATH=/Users/user/ImageMagick-6.8.3/include/ImageMagick-6/ gem install rmagick 
```

如果，在那之后你有这个错误（因为有它）“在 pkg-config 搜索路径中找不到包 MagickCore。”

类型

```
mdfind MagickCore.pc 
```

找到类似 /opt/ImageMagick/lib/pkgconfig/MagickCore.pc 的东西

最后在终端类型中：

```
PKG_CONFIG_PATH=/opt/ImageMagick/lib/pkgconfig/ gem install rmagick 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2012-09-06T13:18:26.230

原来答案是[无法安装 RMagick 2.13.1。找不到 MagickWand.h。](https://stackoverflow.com/questions/9050419/cant-install-rmagick-2-13-1-cant-find-magickwand-h)毕竟。我刚刚错误地遵循了这个建议。

```
C_INCLUDE_PATH=/usr/local/Cellar/imagemagick/6.7.7-6/include/ImageMagick gem install rmagick 
```

这成功安装了 rmagick gem。

不幸的是，rmagic 仍然不能使用 CarrierWave :-(，但这完全是一个不同的问题。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-10-26T21:54:50.717

这是 OS X Mavericks 的解决方案 - 至少它对我有用......

首先，安装 Xcode 5（来自 App Store）

然后安装开发工具——打开终端并输入：

```
xcode-select install 
```

接下来，从 CatusLab 获取 ImageMagick 包：http://cactuslab.com/imagemagick/ [（](http://cactuslab.com/imagemagick/) 我选择了不支持 Freetype 的包，它需要 XQuarz - 但这完全取决于您）。

您还需要 pgkconfg - 在这里获取：http: [//macpkg.sourceforge.net](http://macpkg.sourceforge.net)

安装后，导出 pkgconfig 二进制文件：

```
export PATH=/opt/pkgconfig/bin:$PATH 
```

然后找到 MagickWand.h

```
mdfind MagickWand.h 
```

它给出了 MagickWand.h 的路径，在我的例子中是 /opt/ImageMagick/include/ImageMagick-6/wand/MagickWand.h

接下来找到 pkgconfig 路径：

```
mdfind MagickCore.pc 
```

对我来说，它推出了：/opt/ImageMagick/lib/pkgconfig/MagickCore.pc

我遇到了无法获取 rmagick gem 的问题，所以我从 ruby​​gems.org/gems/rmagick 下载了它

将 rmagick gem 下载到您的下载文件夹后，您现在应该能够安装 rmagick：

```
sudo C_INCLUDE_PATH=/opt/ImageMagick/include/ImageMagick-6/ PKG_CONFIG_PATH=/opt/ImageMagick/lib/pkgconfig/ gem install --local ~/Downloads/rmagick-2.13.2 
```

对我来说它安装成功 - 希望这会有所帮助......

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2017-01-18T12:25:24.393

我在这上面浪费了很多时间，6.7 以上的 ImageMagick 版本不能很好地安装 rmagick gem。看起来有人做了一个包来解决这个问题，试试：

```
brew install imagemagick-ruby186 
```

卸载之前的 imagemagick 后。之后`gem install rmagick`对我来说效果很好。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2017-01-25T18:13:16.953

我在 OS X El Capitan 上。

我的应用程序正在使用 ruby​​ 2.1.2 和 rmagick 2.13.4。

使用时`brew install imagemagick`我得到 ImageMagick -v 7.0.4-5。

我的解决方案是使用`brew install imagemagick@6`它给了我 ImageMagick -v 6.9.7-5 这让我能够成功安装 gem。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-08-02T12:59:01.300

这是我在 16.04.1 所做的，

```
sudo apt-get install libmagickwand-dev
sudo apt-get install graphicsmagick-imagemagick-compat 
```

然后安装gem

```
PATH="/usr/lib/x86_64-linux-gnu/ImageMagick-6.8.9/bin-Q16:$PATH" gem install rmagick -v '2.13.2' 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-02-22T06:33:31.027

我在跑步时遇到了类似的问题

```
$ gem install rmagick 
```

然后通过键入检查版本

```
$ convert --version 
```

如果你这样做了，你可能要么用 fink 或 macports 安装它（也许是自制软件？）。发生的事情是 rvm 找不到 imagemagick 目录。

阅读[https://superuser.com/questions/361435/i-have-compiled-imagemagick-on-my-centos-and-rmagick-wont-install](https://superuser.com/questions/361435/i-have-compiled-imagemagick-on-my-centos-and-rmagick-wont-install)后，我通过添加导出了 imagemagick 路径

```
$ export PKG_CONFIG_PATH="/opt/local/lib/pkgconfig:$PKG_CONFIG_PATH" 
```

到我的 ~/.bash_profile，获取新的配置文件，然后再次运行 gem install rmagick。

这对我有用

如果上述解决方案不起作用，请尝试以下命令

```
sudo apt-get install libmagickwand-dev 
```

我希望这会有所帮助。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-05-23T05:24:34.270

在 OSX El Capitan (10.11.6) 上唯一对我有用的是克隆这个存储库：

[https://github.com/zagros/imagemagick-rmagic-el-captian](https://github.com/zagros/imagemagick-rmagic-el-captian)

并遵循该 github 页面上描述的每个库的编译步骤，但稍作修改。

stuff 文件夹中的 imagemagick 本身已经编译并且缺少配置脚本，所以我从 stuff sierra 中提取了其他 image magick 并编译、安装，然后 gem install rmagick 工作。

# c# - 可以重现 Paint.NET 的“调整图像大小”质量吗？

> ID：12292898
> 
> 赞同：1
> 
> 时间：2012-09-06T04:15:20.563
> 
> 标签：c#, .net, image, paint.net

我一直很难创建质量不差的缩略图。到目前为止，我想出的最好的代码是：

```
Bitmap bmp = new Bitmap(width, height);
Graphics graphic = Graphics.FromImage(bmp);
graphic.InterpolationMode = InterpolationMode.HighQualityBicubic;
graphic.SmoothingMode = SmoothingMode.HighQuality;
graphic.PixelOffsetMode = PixelOffsetMode.HighQuality;
graphic.CompositingQuality = CompositingQuality.HighQuality;
graphic.DrawImage(photo, 0, 0, width, height);
return imageToByteArray(bmp); 
```

产生这个宝石：

![在此处输入图像描述](../Images/b66ce8698edb448617ab44cbc76207cb.png)

如果我在 Paint.NET 中调整相同图像的大小，我会得到：

![在此处输入图像描述](../Images/342c649327c841621a1406ffe8ef5ff0.png)

哪个更好。我在网上找到的所有内容都指向我上面的代码的一些变体。我知道 Paint.NET 曾经是开源的。有谁知道他们做了什么魔术来创建如此好的调整大小功能，以及该功能是否可以在 C# 中重现？

更新：

此示例中的原始图像是 jpg

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T04:27:13.830

## 动图

我记得读过 .NET 在基于调色板的格式（如 GIF）方面存在问题，所以我翻了几篇文章。

本文介绍了如何量化（选择最佳调色板）以提高质量： http: [//msdn.microsoft.com/en-us/library/aa479306.aspx](http://msdn.microsoft.com/en-us/library/aa479306.aspx)和[这篇（格式错误的）文章](http://glennjones.net/2005/10/high-quality-dynamically-resized-images-with-dot-net/)一样。

简而言之，我相信 GDI+ 在执行调整大小时会选择非最佳调色板。

## PNG

PNG 是基于调色板的，因此它们可能容易出现与 GIF 相同的问题。我不确定调色板可以更大是否重要。

## JPEG 友好示例

此代码在 JPEG 上应该可以正常工作（但*不能*平滑地渲染 GIF）。如果您尝试它并且它使 JPEG 像素化，那么可能还有其他事情发生。

```
private static byte[] GetScaledImage( byte[] inputBytes, int width, int height ) {
    Image img = null;

    using( MemoryStream ms = new MemoryStream() ) {
        ms.Write( inputBytes, 0, inputBytes.Length );
        img = Image.FromStream( ms );
    }

    using( MemoryStream ms = new MemoryStream() ) {
        using( Image newImg = new Bitmap( width, height ) ) {
            using( Graphics g = Graphics.FromImage( newImg ) ) {
                g.InterpolationMode = InterpolationMode.HighQualityBicubic;
                g.DrawImage( img, 0, 0, width, height );

                newImg.Save( ms, img.RawFormat );
                return ms.GetBuffer();
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T04:31:53.217

因为`Bitmap(int,int)`实际上`Bitmap(int,int,PixelFormat.Format32bppArgb)`我认为问题出在源图像中。如果使用调色板，请尝试创建与源图像大小相同的图像的另一个中间副本，然后将该`32bppArgb`图像源用于调整大小功能。

# java - 在 android 4.0 版本上点击通知时，Activity 永远不会启动

> ID：12292901
> 
> 赞同：4
> 
> 时间：2012-09-06T04:15:48.413
> 
> 标签：java, android, notifications

这是通知的实现代码：

```
Notification notification = new Notification();
RemoteViews expandedView = new RemoteViews(mContext.getPackageName(),
                                          R.layout.status_bar_ongoing_event_progress_bar);
// ignore the setup code for expanedView
notification.contentView = expandedView;
Intent intent = new Intent(mContext, MyActivity.class);
PendingIntent contentIntent = PendingIntent.getActivity(mContext, 0, intent,
                                            PendingIntent.FLAG_UPDATE_CURRENT);
notification.contentIntent = contentIntent;
mNotificationMgr.notify(notification_id, notification); 
```

此代码在 android 设备 2.2 上运行良好，但是，这在 android 设备 4.0 上不起作用。当用户单击通知时，MyActivity 没有启动，也没有任何反应。

我不知道是什么原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T06:01:10.603

我不知道你的代码到底有什么问题，但是如果你使用来自 [android Dev的代码](https://developer.android.com/guide/topics/ui/notifiers/notifications.html)

它在**ICS**和**pre ICS上工作流畅**

我最近检查了这段代码

# ios - MR_save 似乎删除了上下文中的对象

> ID：12292910
> 
> 赞同：1
> 
> 时间：2012-09-06T04:16:49.830
> 
> 标签：ios, core-data, magicalrecord

我正在使用神奇的记录来处理核心数据。我有创建一个实体的代码，如下所示：

```
if ( gameEntity == nil )
{    
    gameEntity = [GameEntity MR_createEntity];
}
gameEntity.opponent = opponent;
gameEntity.me = me;
etc... 
```

然后当我按如下方式查询游戏实体时：

```
NSPredicate* gamePredicate = [NSPredicate predicateWithFormat:@"SELF IN %@ AND gameState != %@", me.myGames, GAME_ENTITY_STATE__OTHER];
NSFetchRequest* fetchRequest = [GameEntity MR_requestAllWithPredicate:gamePredicate];
NSArray * results = [[NSManagedObjectContext MR_defaultContext] executeFetchRequest:fetchRequest error:nil];
return results; 
```

结果的大小为 1（这是有道理的）。

但是，当我按如下方式保存上下文时：

```
[[NSManagedObjectContext MR_defaultContext] MR_save]; 
```

然后运行上面相同的 fetchRequest，突然 GameEntity 消失了，NSArray 中也没有结果。

更奇怪的是，当我关闭应用程序并再次运行它时，它找到了 GameEntity。所以它实际上被保存了。为什么 MR_save 本质上会破坏我的 NSManagedObject 上下文？

所有保存和创建都在主线程上运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T20:55:47.123

所以事实证明问题出在我的谓词上，这使得这更像是一个 CoreData 问题，而不是一个神奇的记录。

我从此更改了谓词：

```
NSPredicate* predicate = [NSPredicate predicateWithFormat:@"SELF IN %@ AND gameState != %@", me.myGames, GAME_ENTITY_STATE__OTHER]; 
```

对此：

```
predicate = [NSPredicate predicateWithFormat:@"me == %@ AND gameState != %@", me, GAME_ENTITY_STATE__OTHER]; 
```

由于某种原因，第一个谓词并不总是准确的。而第二个似乎总是有效。

虽然这确实回答了这个问题，但我很好奇为什么人们相信为什么第一个谓词并不总是有效......

# javascript - 圆形旋转木马，在所选图像的两侧都有视图

> ID：12292911
> 
> 赞同：3
> 
> 时间：2012-09-06T04:17:15.887
> 
> 标签：javascript, jquery, carousel

有没有人设法创建/修改 jcarousel、bootstrap carousel 或 tiny carousel 以实现在初始化时除了主图像之外的下一个和上一个图像的部分视图？

*这是一个圆形旋转木马

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T05:58:41.977

www.one.org/international/

找到了！我浏览了每个元素...调整了宽度...并设置了负边距。

在决定插入负边距之前，我必须计算屏幕宽度和图像宽度......我想......（屏幕宽度 - 图像宽度）/ 2。

```
.jcarousel-list {
  margin: 0;
  overflow: hidden;
  padding: 0;
  position: relative;
  top: 0;
  z-index: 1;
}

.jcarousel-container {
  margin-left: -258px; /*to be appended*/
  position:relative;
}

.jcarousel-clip {
  margin: 0;
  overflow: hidden;
  padding: 0;
  position: relative;
  z-index: 2;
}

#carousel {
  background: url("../img/lines-hatches/cr-hatch-bl.gif") repeat-x scroll 0 100% transparent;
  height: 500px;
  overflow: hidden;
  padding: 20px 0 30px;
  width: 100%;
} 
```

====**添加：总是突出显示下一个控件或图像**====

这样就不会在控制器中选择部分隐藏的图像。

```
function mycarousel_itemFirstInCallback(carousel, item, idx, state) {
    var sel = parseInt($(item).find('img').attr('data-page'));
    if(sel == $('.jcarousel-control a').length) { 
        sel = 1;
    } else {
        sel += 1;
    }
    $('.jcarousel-control a').removeClass('selected');
    $('.jcarousel-control a:nth-child(' + sel + ')').addClass('selected')
};
function mycarousel_initCallback(carousel) {
    jQuery('.jcarousel-control a').bind('click', function() {
        var sel = parseInt(jQuery(this).attr('data-page'));
        sel -= 1;
        carousel.scroll(jQuery.jcarousel.intval(sel));
        return false;
    });
} 
```

在init的选项中：

```
initCallback: mycarousel_initCallback,
itemFirstInCallback:  mycarousel_itemFirstInCallback 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T04:47:53.373

当然。诀窍是让视口小于可见区域，并将溢出设置为隐藏。

在这个特定的例子中，我们使用了一些 CSS 渐变来让部分项目也被淡出。

![旋转木马](../Images/16d09ebbd0f604584ac66e421c5cdbd3.png)

我在`<li>`这里将 s 设置为 155px：

```
li {
  height: 115px;
  padding: 0 0 0 20px;
  width: 155px; 
```

然后剪辑区域不是 155px 的倍数，在本例中为 700px。诀窍是在两边都设置非常大的边距！这将使您的额外物品溢出边缘。

```
.jcarousel-clip {
  height: 115px;
  margin: 0 120px;
  overflow: hidden;
  width: 700px; 
```

# c - 这个 c 代码对 unsigned char 的操作做了什么？

> ID：12292918
> 
> 赞同：0
> 
> 时间：2012-09-06T04:18:00.703
> 
> 标签：c, bit-manipulation

我正在维护一个包含未知逻辑的遗留 c 代码。显然它与 unsigned char 的按位运算有关。但是我不熟悉按位运算，有人可以解释一下这背后的机制吗？我包括了一些关键陈述。

```
 private const unsigned char DONE_HDR = 0x01;
    private const unsigned char DONE_TRL = 0x02;
    private const unsigned char DONE_ACC = 0x04;
    private const unsigned char DONE_NTW = 0x08;
    unsigned char done = 0; 
```

它分配给变量的是什么？16位数字？

```
case TAP_HDR:
    if (done & DONE_HDR){
        //do something
    }
    done |= DONE_HDR;
    break;
case TAP_TRL:
    if (done & DONE_TRL){
        //do something
    }
    done |= DONE_TRL;
    break;
case TAP_ACC:
    if (done & DONE_ACC){
        //do something
    }
    done |= DONE_ACC;
    break;
case TAP_NTW:
    if (done & DONE_NTW){
        //do something
    }
    done |= DONE_NTW;
    break; 
```

如何评估 unsigned char？我以为我们只能评估布尔值或数字。如果数字为正，则将其评估为真。但是 unsigned char 没有负值，所以我在这里感到困惑。什么时候会是真的？“&”操作的目的/结果是什么？

如果在那之后，无论上面的 if 语句是否为真，它都会：

```
done |= DONE_HDR; 
```

似乎正在记录状态。我想它产生的任何东西都必须取决于“完成”的值，因为 DONE_HDR 是一个常数。

最后检查：

```
if (!(done & DONE_HDR))
if (!(done & DONE_TRL))
if (!(done & DONE_ACC))
if (!(done & DONE_NTW)) 
```

可能正在检查它是否遇到了所有记录。再一次，我不知道 & 在这里是如何发挥作用的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T04:26:09.947

1.  `&`是按位与运算符。所以表达式如下：

    ```
    (done & MASK) 
    ```

    正在检查该`MASK`位是否设置在`done`. 这意味着：

    ```
    !(done & MASK) 
    ```

    正在检查是否`MASK`已清除。赋值运算符行：

    ```
    done |= MASK; 
    ```

    正在设置中的`MASK`位`done`。

2.  `char`和是整数类型`signed char`，`unsigned char`就像任何其他整数类型一样——它们通常更小。大多数情况下，它们是 8 位类型，但您可以检查`CHAR_BIT`宏`stdint.h`以确定。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-06T04:26:35.897

首先，`private`不是 C 关键字。我猜一些头文件`#define`-s 它到某个[属性](http://gcc.gnu.org/onlinedocs/gcc/Variable-Attributes.html)或其他编译器特定的扩展名（或者可能是`static`）

在几乎所有 C 实现中，a`char`或是`unsigned char`一个字节（8 位）。普通`char`类型可以是有符号的或无符号的（这个重要的选择取决于实现，通常是特定于体系结构的；在一些编译器（如 GCC）上，它可以通过编译器选项进行[配置）。](http://gcc.gnu.org/onlinedocs/gcc-4.6.3/gcc/C-Dialect-Options.html)无符号字符通常是无符号字节（值从 0 到 0xff）。有符号字符通常是有符号字节（从 -128 到 +127）。

名称`DONE_HDR`等被定义为`const`优化编译器可以对它们进行常量折叠。

您的代码只是测试`done`（使用 eg `done & DONE_HDR`）中的位字段并更新该变量（使用 设置该位`done |= DONE_HDR`）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-06T04:36:53.160

在 C 中，除 0 以外的每个整数都被认为是真，而 0 是假。

char 也被认为是 ASCII 字符及其数值。

& 运算符执行按位与，这意味着逐位比较，例如 0x01 将与 0x01 组合得到 0x01 的结果，而 0x01 & 0x03 将得到 0x01 而 0x01 & 0x02 将得到 0x00 .

这可以说明：

0x01 以位为单位：00000001
0x03 以位为单位：00000011
0x01& 0x03：00000001

0x01: 00000001
0x02: 00000010
0x01 & 0x02: 00000000

类似的情况是 | 这是按位或运算符，这意味着它正在根据底层位进行或运算，这意味着 0x01 | 0x02 结果为 0x03，因为

0x01：00000001
0x02：00000010
0x01 | 0x03: 00000011

将这些与 && 和 || 进行对比 它们仅进行逻辑比较，这在 C 中本质上意味着 0x01 和 0x02 被转换为真，然后进行比较，结果为真。

另请注意，按位运算符不会短路，而逻辑会短路，原因是按位我们需要比较整个值，而对于逻辑比较，一个值可能足以知道结果。

我还没有遇到过 |= 运算符，但我猜它是 done = done | 的简写。面具; 这基本上导致 MASK 中为 1 的位将在完成时设置为 1。

(**熟悉 VB 的读者注意**：大多数 VB 程序员可能不知道，但 VB 关键字 AND\OR\NOT 实际上是按位与，VB6 中没有逻辑与，但在 VB.Net 中有 AndAlso 运算符，并且结果（1和2）在VB中实际上是错误的，因为它是按位的，这也是VB中没有短路评估的原因，这在处理Win32API时也会产生影响，因为不做返回 1 的 API 函数实际上是 -1，这也是正确的，而不是逻辑 NOT。）

# winforms - 如何订阅从子对象引发的属性更改事件？

> ID：12292921
> 
> 赞同：1
> 
> 时间：2012-09-06T04:18:16.180
> 
> 标签：winforms, linq, entity-framework-4, propertychanged

我有一个 Invoice 对象，它公开了一个只读属性 - `Total`。这个总数只是发票项目总数的总和：

```
public decimal Total { get { return this.InvoiceItems.Sum(s => s.Total); } } 
```

InvoiceItems 类中的 Total 属性如下所示：

```
public decimal Total { get { return Price * Quantity - Discount; } } 
```

类和属性由 LINQ 生成（除了我自己创建的两个类中的 Total 属性）。例如，当价格在 上发生变化时`InvoiceItem`，我希望该变化反映在`Total`其 parent 的属性中`Invoice`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T05:27:29.050

您将不得不手动执行此操作，即

1.  遍历孩子`InvoiceItems`
2.  `PropertyChanged`为他们的事件添加一个处理程序
3.  当他们的`Price`财产发生变化时，更新您的`Total`财产
4.  *在添加/删除发票项目时，可选择*处理`CollectionChanged`事件`InvoiceItems`以添加/删除`PropertyChanged`订阅。

# java - Kepler 2.3 安装报错

> ID：12292922
> 
> 赞同：0
> 
> 时间：2012-09-06T04:18:23.140
> 
> 标签：java, linux

我们正在尝试在具有 Java 1.6（64 位）的 Red Hat 机器（它的虚拟机）上安装 Kepler 2.3 工作流程。但是我们收到以下错误

*[null] 初始化 VM 期间发生错误 *[null] 对于指定的新大小而言，初始堆太小

知道有什么问题吗？如果它有帮助，我已经将它安装在我的本地机器上，它工作正常。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T13:12:31.387

开普勒 2.3 以 5MB 的初始堆开始，这在某些 64 位系统上很小。要更改它，请修改 $HOME/KeplerData/kepler.modules/build-area/settings/memory.xml

将“min”键更改为更大的值，10m 应该已经足够了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T04:21:42.687

您可以尝试指定更大的堆大小作为 JVM 参数：

`java -Xms512m -Xmx512m YourApp`

# java - 带和不带 getClassLoader 的 getResourceAsStream 有什么区别？

> ID：12292926
> 
> 赞同：12
> 
> 时间：2012-09-06T04:19:05.493
> 
> 标签：java, classloader

我想知道以下两者之间的区别：

`MyClass.class.getClassLoader().getResourceAsStream("path/to/my/properties");`

和

`MyClass.class.getResourceAsStream("path/to/my/properties");`

谢谢你。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-06T04:22:24.863

来自 Javadoc 的[`Class.getResourceAsStream()`](http://docs.oracle.com/javase/7/docs/api/java/lang/Class.html#getResourceAsStream%28java.lang.String%29)：

> 这个方法委托给这个对象的类加载器。在委托之前，使用以下算法从给定的资源名称构造一个绝对资源名称：
> 
> *   如果`name`以“/”开头（“\u002f”），则资源的绝对名称是“/”后面的名称部分。
> *   否则，绝对名称采用以下形式： `modified_package_name/name`
>     其中 modified_pa​​ckage_name 是此对象的包名称，用 '/' 代替了 '.' ('\u002e')。

换句话说，如果“路径”以“/”开头，它们会做同样的事情，但如果不是，那么在后一种情况下，路径将相对于类的包，而类加载器将是绝对的。

简而言之，第一个 fetches`path/to/my/properties`和第二个 fetches `package/of/myclass/path/to/my/properties`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-06T04:27:35.973

从`Class.getClassLoader()` [文档](http://docs.oracle.com/javase/7/docs/api/java/lang/Class.html#getClassLoader%28%29)中：

> 返回类的类加载器。一些实现可能使用 null 来表示引导类加载器。如果此类由引导类加载器加载，则此方法将在此类实现中返回 null。

如果类是由引导类加载器加载的，那么`getClassLoader()` *可能会*返回，因此[实现](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/7-b147/java/lang/Class.java#Class.getResourceAsStream%28java.lang.String%29)中的 null 检查：`null``Class.getResourceAsStream`

```
public InputStream getResourceAsStream(String name) {
    name = resolveName(name);
    ClassLoader cl = getClassLoader0();
    if (cl==null) {
        // A system class.
        return ClassLoader.getSystemResourceAsStream(name);
    }
    return cl.getResourceAsStream(name);
} 
```

您还会注意到`name = resolveName(name);`Mark Peters 在[他的回答](https://stackoverflow.com/a/12292945/697449)中解释的陈述。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-06T04:31:09.200

主要的实际区别是您可以在上课时使用相对路径。因此，如果您的属性与 MyClass 在同一个包中，您可以这样做

```
MyClass.class.getResourceAsStream("properties"); 
```

# objective-c - iOS 中 iVar 的只读属性的奇怪问题

> ID：12292927
> 
> 赞同：1
> 
> 时间：2012-09-06T04:19:13.960
> 
> 标签：objective-c, ios

这是我所拥有的：

```
@interface engine : NSObject
{

    int test;

}

@property (nonatomic, readonly) int test; 
```

当我尝试在我自己的类（引擎类）中为 iVar 测试分配值（10）时，调试器显示 test = 10 和 _test = 0。

当我尝试从测试中读取时，我得到 0，我猜我得到了 of_test 的值。

我如何让它按照它应该的方式工作？我希望外部班级对“测试”具有只读访问权限，但在我的班级内，我可以向/从“测试”分配和读取值吗？

或者这个实现有什么问题？

更新：我没有合成，因为我使用的是 xcode 4.4，它会自动为你做。我假设合成将使用与属性相同的 iVar 名称。如果您进行正常合成，这无论如何都是默认行为。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T05:22:03.780

Automatic synthesize creates an instance variable with a underscore prefix, so a property called `test` generates a backing instance variable of `_test`. So you have two instance variables; `test`, which isn't connected to the property, and `_test`. If you write to the instance variable `test`, it will not be reflected in `_test` or the property's value.

But more to the point, declaring the backing instance variable yourself is pointless. It's just an extra code and unnecessary redundancy. The `@property` line already contains type, name, whether it's read/write or read-only and a storage qualifier. Just skip declaring the backing instance variable yourself and use the one the compiler generates for you.

In Engine.h:

```
@interface Engine : NSObject
@property (readonly, assign) NSInteger test;
- (void)doSomething;
@end 
```

In Engine.m:

```
@implementation Engine

- (void)doSomething {
    _test++; // _test is created automatically by the compiler
}

@end 
```

In other.m:

```
Engine *engine = [[Engine alloc] init];
NSLog(@"%d", engine.test); // 0
[engine doSomething];
NSLog(@"%d", engine.test); // 1 
```

This all just works. Don't add to it.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T05:15:39.733

你假设错了。默认实现是生成带有下划线的属性名称。如果你想要一个不同的名字，你需要自己合成它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T04:27:09.523

没有看到你的代码很难说，但我猜，你正在尝试做类似的事情，`test=10`而不是`self.test=10`. 根据您使用的 ObjC/XCode 版本和可能的`@synthesize`语句，您正在访问一个（无论定义的）局部变量，而不是属性 resp。是 iVar。

**编辑**

当你想写一个只读属性时，你应该使用它的 iVar。例如，在`_test=10`两次读取访问之后，`self.test`并且`_test`（但不是纯粹`test`的！）应该提供相同的值。

# linux - grep 选择行

> ID：12292928
> 
> 赞同：0
> 
> 时间：2012-09-06T04:19:38.097
> 
> 标签：linux, grep

我想从日志文件中选择最近 7 天的记录也包含“OK LOGIN”

```
 Sat Sep  2 03:32:13 2012 [pid 12461] CONNECT: Client "66.249.68.236"
 Sat Sep  2 03:32:13 2012 [pid 12460] [ftp] OK LOGIN: Client "66.249.68.236", anon     password "gxxglxxxxt@google.com"
 Sat Sep  2 03:32:14 2012 [pid 12462] [ftp] OK DOWNLOAD: Client "66.249.68.236",   "/pub/10.5524/100001_101000/100022/readme.txt", 451 bytes, 1.39Kbyte/sec
 Sat Sep  2 03:32:22 2012 [pid 12677] CONNECT: Client "66.249.68.236"
 Sat Sep  2 03:32:23 2012 [pid 12676] [ftp] OK LOGIN: Client "66.249.68.236", anon password "xxxxxbot@google.com" 
```

我使用这个命令，但它不起作用以及如果我想约会如何写= [当前日期 - 7 天]

```
 cat vsftp.log | grep 'OK LOGIN' |egrep "Sep [1-6]" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T06:15:56.483

您可以[使用`sed`以下命令选择行范围并生成正则表达式`date`](http://ideone.com/MDj71)：

```
#!/bin/bash

function md()
{
    date +'%b %e' --date "$@"
}

start=`md 'last week'`
end=`md 'now'`
grep 'OK LOGIN' | sed -n "/$start/,/$end/p" 
```

每天至少应该登录一次。正则表达式是允许的，可能存在误报。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T06:34:15.473

缺少一个空格：

```
grep 'OK LOGIN' vsftp.log | egrep "Sep  [1-6]" 
```

# vb.net - Vb.net InputLanguage的windows

> ID：12292929
> 
> 赞同：0
> 
> 时间：2012-09-06T04:19:39.220
> 
> 标签：vb.net, winforms

我试图获取 Windows 的当前 keboard**语言**

语言栏：

![在此处输入图像描述](../Images/52211e5c987ca031e5653b28d8a8ba91.png)

我的代码：

```
Private Sub Form1_InputLanguageChanged(ByVal sender As Object, ByVal e As System.Windows.Forms.InputLanguageChangedEventArgs) Handles Me.InputLanguageChanged

    Me.Text = e.InputLanguage.LayoutName

End Sub 
```

此代码只能获取**表单**语言

我想从**语言栏中获取当前的****Windows语言。**

 **我需要使用 user32.dll 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T04:28:14.607

**编辑**

更改代码以调用 PInvoke [GetKeyboardLayoutName](http://msdn.microsoft.com/en-us/library/ms929435.aspx) (...)。不幸的是，这只是一个数字 - 仍在努力检索正确的名称。

```
Imports System.Runtime.InteropServices
Imports System.Text

Private Sub Timer1_Tick(sender As System.Object, e As System.EventArgs) Handles Timer1.Tick
    Dim sb As New StringBuilder
    If GetKeyboardLayoutName(sb) Then
        Me.Text = sb.ToString()
    End If
End Sub
<DllImport("user32.dll", CharSet:=CharSet.Unicode)>
Private Shared Function GetKeyboardLayoutName(pwszKLID As StringBuilder) As Boolean
End Function 
```**

# c - 一个线程可以打开一个套接字而另一个线程关闭它吗？

> ID：12292932
> 
> 赞同：0
> 
> 时间：2012-09-06T04:20:02.087
> 
> 标签：c, linux, multithreading

我的 KLM 内部有一些 Linux 内核中的内核线程。
我有一个服务器线程，它监听通道，一旦它看到有一个传入连接，它就会创建一个接受套接字，接受连接并产生一个子线程。它还将接受的套接字作为 (void *) 参数传递给子内核线程。

代码工作正常。我有一个设计问题。
假设现在必须终止线程，主线程和子线程，关闭接受套接字的最佳方法是什么。我可以看到两种方法，
1]主线程等待所有子线程退出，每个子线程在退出时关闭接受套接字，最后一个子线程将信号传递给主线程以使其退出。在这里，即使主线程是创建接受套接字的线程，子线程也会关闭该套接字，并且它们会在主线程退出之前执行此操作。那么这是可以接受的吗？你们在这里预见到任何问题吗？
2] 其次是主线程在退出之前关闭它创建的所有接受套接字。但是可能存在（极端情况）主线程出现异常并且必须关闭的可能性，因此如果它在退出之前关闭接受套接字，则使用该套接字的子线程将处于危险之中。

因此，我使用的是我提到的第一个案例。让我知道你们的想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T09:47:59.727

首先：套接字的“句柄”是一个整数，无论​​上下文如何，将整数交给 close 函数都会起作用。

关于你的设计..我建议混合使用这两个版本..创建一个打开套接字的列表（如果访问当然会锁定）并让每个线程关闭它的套接字并将其从主列表中删除。退出主线程后，您将关闭所有剩余的套接字。这样子线程+主线程将不得不在套接字打开之前死亡，这应该是所有描述的情况中概率最小的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T09:36:49.993

我更喜欢选项 1，因为它是一个更清洁的解决方案：当一个特定的线程退出时，它会清理它拥有的资源（线程确实拥有套接字，对吗？）。这样你就不会遇到你提到的任何可能的极端情况，主线程关闭可能在子线程中使用的套接字等。使用子线程拥有套接字并且是唯一一个读/写/关闭它很简单，干净，并导致更高的凝聚力。

可以实现第二个选项以避免具有额外逻辑和信号的极端情况，但实际上没有必要添加额外的复杂性。我总是喜欢使用[KISS 原则](http://en.wikipedia.org/wiki/KISS_principle)。

至于您对在与其创建位置不同的线程中关闭套接字的担忧：这里没有问题。文件描述符（用于套接字和其他实体）在整个进程中是唯一的。如果我们谈论的是分叉进程，那将是不同的。

# haskell - 功能性香蕉旅行者游戏 - 有趣而疯狂

> ID：12292934
> 
> 赞同：12
> 
> 时间：2012-09-06T04:20:13.047
> 
> 标签：haskell, reactive-banana

我想使用响应式香蕉来编写人们可以为其编写机器人的旅行者游戏。FRP 对我来说是全新的，我很难开始。当我开始时，我创建了一个更精细的图表，但为了我的目的，我试图让它尽可能简单。我想要一些指导，主要是关于从哪里开始，以及如何将这个更大的问题分解成更小的问题来解决。这是最初的设计。

这个想法是有一个 LNodes 的图（为了简单起见，我现在忽略了加权边缘）。我将这些 LNode 描述为`Planet`s。s 有一个名字，一个和s上的`Planet`玩家地图。玩家有一个 id、resources 和一个 Planet。这里是 Data Structues 和一些相关的功能，接下来是更多的讨论。`Planet``Resource`

```
-- Graph-building records and functions

data PlanetName = Vulcan
                | Mongo
                | Arakis
                | Dantooine
                | Tatooine
                     deriving (Enum,Bounded,Show)

data Planet = Planet {pName :: PlanetName
                     ,player :: IntMap Player
                     ,resources :: Int
                     } deriving Show

data Player = Player {pid :: Int
                    ,resources :: Int
                    } deriving Show

makePlanetNodes :: PlanetName -> [LNode Planet]
makePlanetNodes planet = Prelude.map makePlanetNodes' $
                         zip [planet ..] [0 ..]
  where makePlanetNodes' (planet,i) =
          (i,Planet {pName = planet, players = IM.empty})

makePlanetGraph p = mkGraph p [(0,1,1),(1,2,2),(2,3,4),(3,4,3),(4,0,2)]

-- Networking and command functions

prepareSocket :: PortNumber -> IO Socket
prepareSocket port = do
   sock' <- socket AF_INET Stream defaultProtocol
   let socketAddress = SockAddrInet port 0000
   bindSocket sock' socketAddress
   listen sock' 1
   putStrLn $ "Listening on " ++ (show port)
   return sock'

acceptConnections :: Socket -> IO ()
acceptConnections sock' = do
   forever $ do
       (sock, sockAddr) <- Network.Socket.accept sock'
       handle <- socketToHandle sock ReadWriteMode
       sockHandler sock handle

sockHandler :: Socket -> Handle -> IO ()
sockHandler sock' handle = do
    hSetBuffering handle LineBuffering
    forkIO  $ commandProcessor handle
    return ()

commandProcessor :: Handle -> IO ()
commandProcessor handle = untilM (hIsEOF handle) handleCommand >> hClose handle
  where
    handleCommand = do
        line <- hGetLine handle
        let (cmd:arg) = words line
        case cmd of
            "echo" -> echoCommand handle arg
            "move" -> moveCommand handle arg
            "join" -> joinCommand handle arg
            "take" -> takeCommand handle arg
            "give" -> giveCommand handle arg
            _ -> do hPutStrLn handle "Unknown command"

echoCommand :: Handle -> [String] -> IO ()
echoCommand handle arg = do
    hPutStrLn handle (unwords arg)

moveCommand = undefined

joinCommand = undefined

takeCommand = undefined

giveCommand = undefined 
```

到目前为止，这是我所知道的，我的事件将涉及类型`Planet`和`Player`. 行为将涉及移动、加入、获取和给予。当玩家加入时，它将创建一个新`Player`事件并使用该事件更新 Vulcan 上的地图`Player`。移动将允许从一个遍历 `LNode`到另一个，前提是`LNode`s 由一条边连接。Take 将从`resources`当前`Planet`的`Player`“打开”中删除并将它们添加`resources`到 `Player`. 给予会适得其反。

我怎样才能把这个大问题分解成更小的问题，这样我才能理解这些东西？

更新：事实证明 Hunt the Wumpus 不是帮助学习 FRP 的好选择，请参阅[此处](https://stackoverflow.com/questions/6812533/am-i-using-reactive-banana-right)的 FRP 用途说明。这是 Heinrich Apfelmus 的回应。

也就是说，我现在将完全忽略网络代码。我可以写一些虚拟机器人来测试时间等。

更新：有些人似乎对这个问题感兴趣，所以我将在这里跟踪相关问题。

[建立一个计时器](https://stackoverflow.com/questions/12625963/implementing-a-timer-in-traveller-game)

[输入处理](https://stackoverflow.com/questions/12919136/functional-banana-traveller-input-handling)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-06T18:12:29.283

这是一个复杂的项目。一个游戏大致分为以下几部分：

*   输入层（将输入转换为游戏事件）
*   一个引擎（接受一个事件和当前状态来产生一个新的游戏状态）
*   输出层（显示游戏状态和执行事件产生的消息）

我将首先通过使用控制台输入和输出（即标准输入和标准输出）来简化输入和输出层。稍后您可以添加网络支持。

其次，我会简化游戏本身。例如，从单人游戏开始。最近，我将 Lisp 游戏“Grand Theft Wumpus”翻译成 Haskell 非常有趣。

第三，我将从游戏引擎开始。这意味着您必须考虑：

*   什么是游戏状态？
*   游戏活动有哪些？

为游戏状态和每个事件定义 Haskell 数据结构。请注意，游戏状态需要记录与游戏相关的*所有*内容：地图、玩家位置、玩家状态甚至随机数种子。

游戏状态通常是产品类型：

```
data GameState = {  _mapNodes :: [Node]
                   ,_mapEdges  :: [ (Node,Node) ]
                   ,_player   :: Node
                   , ...
                 } 
```

游戏事件应定义为 sum 类型：

```
data GameEvent =
  | MovePlayer Node
  | Look
  | ... 
```

定义完这些数据结构后，编写`performEvent`函数：

```
performEvent :: GameEvent -> GameState -> IO(GameState) 
```

结果的原因`performEvent`是`IO(GameState)`您可能需要告知玩家发生了什么，并且`IO`在游戏的这个阶段使用 monad 将是执行此操作的最简单方法（不是双关语。）有一些方法可以净化一个类似的函数`performEvent`，但那是另一个话题。

例子：

```
performEvent :: GameEvent -> GameState -> IO(GameState)
performEvent (Move p n) s =
  do putStrLn "Moving from " ++ (show $ s _player) ++ " to " ++ (show n)
     return s { _player = n }
performEvent Look       s =
  do putStrLn "You are at " ++ (show $ s _player)
     return s 
```

测试`performEvent`完成后，您可以添加一个前端来将一行文本翻译为`GameEvent`：

```
parseInput :: Text -> Maybe GameEvent
parseInput t = case Text.words t of
                 ("look":_)    -> Just Look
                 ("move":n:_)  -> Move <$> (parseNode n)
                 otherwise     -> Nothing 
```

然后添加一个输入循环，编写一个函数来创建初始 GameState，然后在不知不觉中，您将拥有一个真正的交互式游戏！

# java - 包含方面和类的 jar 文件可以安全地自我检测吗

> ID：12292937
> 
> 赞同：0
> 
> 时间：2012-09-06T04:20:34.833
> 
> 标签：java, aop, aspectj, aspects

如果我有一个包含已编译方面和已编译类的检测 jar 文件，我可以用它自己检测该 jar 吗？

如果我对输出 jar 重复此操作，行为是否会重复，或者第二个输出是否与第一个相同？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T09:48:07.650

你本来可以尝试的。你？

无论如何，答案是否定的。输出将是相同的。想一想：你不能将具有相同切面的类重新编织两次，因为切面在翻译成字节码时也只是一个类，并且同一个类不能在 JVM 中存在两次，除非在隔离的类加载器中。

你为什么要这样做呢？用例是什么？

# ruby - Ruby 无法加载这样的文件 mac MLion

> ID：12292939
> 
> 赞同：0
> 
> 时间：2012-09-06T04:21:01.790
> 
> 标签：ruby

我正在尝试在 ruby​​ 中安装 gems，因为我正在关注开始 ruby​​ 书，并且当我在终端上安装它时需要安装 redcloth，它似​​乎已安装，但是当我更改为 irb 时会发生这种情况

```
1.9.3-p194 :001 > require 'rubygems'
 => false 
1.9.3-p194 :002 > require 'RedCloth'
LoadError: cannot load such file -- RedCloth
    from /Users/AlbertoRdz/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
    from /Users/AlbertoRdz/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
    from (irb):2
    from /Users/AlbertoRdz/.rvm/rubies/ruby-1.9.3-p194/bin/irb:16:in `<main>' 
```

也在终端

```
MacBook-de-Jesus:rubygems-1.8.24 AlbertoRdz$ which redcloth
/Users/AlbertoRdz/.rvm/rubies/ruby-1.9.3-p194/bin/redcloth 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T08:21:34.293

您需要按以下方式修复它：

`require 'redcloth'`

# sed - 如何在匹配模式之后立即更改行

> ID：12292949
> 
> 赞同：1
> 
> 时间：2012-09-06T04:22:39.407
> 
> 标签：sed, inline-editing

我需要一个 sed one 班轮来立即按照模式 [lb] 更改一行：

```
[lb]
enabled=0 
```

更改为：

```
[lb]
enabled=1 
```

提前感谢所有专家的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T04:32:47.903

IMO，sed 并不是真正正确的工具，但您可以这样做：

```
sed '/^\[lb\]/{ N; s/enabled=0/enabled=1/; }' input 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T07:05:54.877

一种更通用的方法`awk`：

```
awk 'BEGIN {RS="\\[.*\\]"; ORS=OFS="" } { gsub("enabled=0", "enabled=1"); print RT, $0 }' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T04:32:30.373

希望这不是你的作业。

```
sed  '/\[1b\]/,+1s/enabled=0/enabled=1/' <input-file> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-06T04:35:15.243

一种使用方式`GNU sed`：

```
sed -i -r '/\[lb\]/ { N; s/(enabled=)0/\11/; }' file.txt 
```

# php - 使用数组 PHP

> ID：12292950
> 
> 赞同：0
> 
> 时间：2012-09-06T04:22:51.687
> 
> 标签：php, mysql

我想使用一个数组来确定是否需要显示专辑，而不是单个图像。从逻辑上讲，这是我尝试的方式：

1）从表中选择所有单个图像（行）矩（它们被称为矩）

2）如果图像没有在alb_id列中设置值，则正常显示

3) 如果图像具有 alb_id 值，请查看它是否已存储在数组中以跟踪 alb_id。

4) 如果它在数组中，则跳过该行，或者显示一个相册并将图像中的 alb_id 添加到数组中，这样以后任何具有该 alb_id 的图像都不会显示。

这是我正在尝试的。虽然看起来不太对。它也不起作用。

```
 $connect= mysqli_connect('localhost', 'root', '', 'thesocialnetwork')
        or die('error connecting');
    $query= "SELECT * FROM moments WHERE user_id= '".$user_id."' ORDER BY     
            order_date DESC";
    $result= mysqli_query($connect, $query);
    $list= array($album);
    while ($row= mysqli_fetch_array($result)) {
        if (!empty($row[alb_id'])) {    
                    if (!in_array($row['alb_id'], $list)) {
           $album.= $row['alb_id'];
                       display a new album;
                    }
                    else {
                        continue;
                    }
                }
                else {
                    just display the single image;
                } 
```

所以，我想我的问题是，我的逻辑是否正确？此外，创建新数组、测试该数组以及添加到该数组的最佳方法是什么？我的意思是，关于我想要做什么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T06:51:20.430

如果要测试数组中的成员资格，最好使用关联数组，并将要检查的内容用作键。所以逻辑应该是：

```
$list = array();
while ($row = mysqli_fetch_array($result)) {
  $alb = $row['alb_id'];
  if (!empty($alb)) {
    if (!isset($list[$alb]) {
      $list[$alb] = true;
      // display a new album
    } else {
      continue;
    }
  } else {
    // display the single image
  }
} 
```

# php - Setting enctype attribute for mixed data types, including file

> ID：12292956
> 
> 赞同：0
> 
> 时间：2012-09-06T04:23:49.493
> 
> 标签：php, html, post, file-upload, enctype

I am new to PHP and HTML, and have trouble understanding the enctype attribute of the form when using POST. In all examples of File Upload using PHP, it is written that I should set enctype as multipart/form-data (which, as far as I understand, is used for files). However in all these examples, the only input on the form is file input.

My question is, what if I want to have form with mixed inputs? Particularly, both text and file. Then, if I set enctype to multipart/form-data, will I still be able to access both files and text from PHP using $_FILES and $_POST?

Thank you

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T08:34:46.660

It basically means, add the $_FILE array to the request. For more information, read this question
[What does enctype='multipart/form-data' mean?](https://stackoverflow.com/questions/4526273/what-does-enctype-multipart-form-data-mean)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T08:36:58.730

Use `multipart/form-data`.

It converts each piece of data to a part in a multi-part MIME request (and then does some specific encoding of each part). It isn't just for files, and if you are using PHP then `$_POST` will be populated normally.

The alternative (`application/x-www-form-urlencoded`) basically builds a query string. For a POST request it makes that query string the request body. This format doesn't have any provision for encoding files.

# javascript - 在 javascript 中测试异步加载脚本的工具

> ID：12292958
> 
> 赞同：0
> 
> 时间：2012-09-06T04:23:52.927
> 
> 标签：javascript, testing, asynchronous, requirejs

我正在使用单个 web 页面应用程序和 RequireJs 迈出第一步，我注意到通常一切似乎都可以在本地找到，但是当部署在远程服务器上时，会随机出现一些错误，主要是因为正在加载异步文件和依赖项没有很好的定义。

（这里只是一个例子[https://groups.google.com/forum/#!topic/requirejs/skOZCi-3nFU/discussion](https://groups.google.com/forum/#!topic/requirejs/skOZCi-3nFU/discussion)）

我想知道是否有某种工具可以运行自动化测试但强制每个脚本被延迟，尝试所有可能的组合（我在考虑某种代理）......

如果没有这样的东西，你如何测试这些场景？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T04:30:31.733

你有没有研究过[boilerplatejs](http://boilerplatejs.org/)。这是我们与单页 java 脚本应用程序一起使用的参考架构。这将帮助您以更有效的方式管理您的代码。看一看。

# xslt-1.0 - 复制具有 xml 属性的完整节点，不包括节点的第一个元素

> ID：12292961
> 
> 赞同：1
> 
> 时间：2012-09-06T04:24:01.870
> 
> 标签：xslt-1.0

XSLT：我是 XSLT 的新手。我必须复制 XML 的完整节点，不包括该节点的第一个子节点。例如：输入是

```
 <root id="123456789">
      <userid></userid>
      <fname></fname>
      <lname></lname>
      <age></age>
    </root>

    Output should be:
    <root id="123456789">
      <fname></fname>
      <lname></lname>
      <age></age>
    </root>

    Please suggest how to achieve this. Thanks in advance 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T03:57:02.880

**这种转变**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="node()|@*">
  <xsl:copy>
   <xsl:apply-templates select="node()|@*"/>
  </xsl:copy>
 </xsl:template>

 <xsl:template match="/*/*[1]"/>
</xsl:stylesheet> 
```

**应用于提供的 XML 文档时**：

```
<root id="123456789">
    <userid></userid>
    <fname></fname>
    <lname></lname>
    <age></age>
</root> 
```

**产生想要的正确结果：**

```
<root id="123456789">
      <fname/>
      <lname/>
      <age/>
</root> 
```

**说明**：

正确使用和覆盖**[身份规则](http://www.dpawson.co.uk/xsl/sect2/identity.html)**。

# python - 将列表写入列

> ID：12292970
> 
> 赞同：4
> 
> 时间：2012-09-06T04:25:36.553
> 
> 标签：python

我有一个 Python 数据列表：

```
[1,2,3,4,5] 
```

我想通过以下方式将此数据作为列读入文件：

```
1
2
3
4
5 
```

然后我希望`([6,7,8,9,10])`将我的下一个列表添加到其中（使用选项卡）：

```
1 6  
2 7  
3 8  
4 9  
5 10 
```

等等。

任何人都可以帮助我如何做到这一点吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-06T04:30:04.950

使用`zip()`：

```
with open('data.txt','w') as f:
    lis=[[1,2,3,4,5],[6,7,8,9,10],[11,12,13,14,15]]
    for x in zip(*lis):
        f.write("{0}\t{1}\t{2}\n".format(*x)) 
```

**输出：**

```
1   6   11

2   7   12

3   8   13

4   9   14

5   10  15 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-06T04:31:06.033

```
col1,col2 = [1,2,3,4,5],[6,7,8,9,10]

>>> output = '\n'.join('\t'.join(map(str,row)) for row in zip(col1,col2))
>>> print(output)
1       6
2       7
3       8
4       9
5       10 
```

要写入文件：

```
with open('output.txt', 'w') as f:
    f.write(output) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-06T04:30:54.847

如果您有所有这些列表的列表，例如

```
data = [[1, 2, 3, 4, 5], [6, 7, 8, 9, 10]] 
```

你可以转置它`zip(*data)`以获得

```
[[1, 6], [2, 7], [3, 8], [4, 9], [5, 10]] 
```

然后用类似的东西写出来

```
with open('filename', 'w') as f:
    for row in zip(*data):
        f.write('\t'.join(row)+'\n') 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-06T04:34:46.280

```
>>> from itertools import izip
>>> with open('in.txt') as f:
...    input = [s.strip() for s in f.readlines()]
...
>>> input
['1', '2', '3', '4', '5']
>>> combine = ['6','7','8','9','10']
>>> with open('out.txt','w') as f:
...     for x in izip(input,combine):
...         f.write("{0}\t{1}\n".format(x[0],x[1]))
...
>>> quit()
burhan@sandbox:~$ cat out.txt
1       6
2       7
3       8
4       9
5       10 
```

# java - android以编程方式替换可绘制图像

> ID：12292977
> 
> 赞同：0
> 
> 时间：2012-09-06T04:26:33.493
> 
> 标签：java, android, android-layout, android-gallery, android-resources

我的 android 项目的 drawable 目录中有 10 张图像，我在画廊中使用这些图像。我想根据用户请求以编程方式替换这 10 个图像以从网络下载新图像。

这可以用下载的图像替换我的应用程序的可绘制图像吗？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T04:31:11.540

这是不可能的。您必须下载并将其存储在磁盘上。在内部存储器或外部存储器中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T04:32:16.390

不，这是不可能的行为。您不能操作 APK 的任何资源（只读）。

您可以将图像存储在手机内存（内部或外部）中，也可以在运行时创建一个 Drawable（缓存）并刷新它。

`/data/data/package_name`卸载应用程序后，您拥有名为此文件夹的目录将被删除，而对于其他目录，您必须手动删除。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T04:45:20.707

您不能以编程方式更改应用程序的资源（如@hotveryspicy 所说），但您可以为您的应用程序创建特定目录（您的应用程序的私有目录或公共目录）并将图像下载到它。当您的应用程序想要显示图像时检查该目录中是否存在图像，显示来自它的图像，否则显示来自它的资源的图像。

# c# - C#如何下载程序并将其保存在启动文件夹中

> ID：12292991
> 
> 赞同：1
> 
> 时间：2012-09-06T04:29:42.657
> 
> 标签：c#, permissions, startup

我已经使用 WebClient 命名空间下载了文件，但是当我尝试将文件保存到 Windows 7 中的启动文件夹时，它被拒绝访问以将文件保存在那里。有没有一种方法可以请求允许将其保存在那里，或者有解决方法吗？我还没有在网上找到一个好的资源来告诉我如何解决权限问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T04:36:46.537

你应该运行你的程序“runas”admin add app.config：

```
<requestedExecutionLevel level="requireAdministrator" uiAccess="false" /> 
```

# wordpress - Wordpress EC2 上的永久链接

> ID：12292992
> 
> 赞同：19
> 
> 时间：2012-09-06T04:29:54.120
> 
> 标签：wordpress, amazon-ec2, permalinks

我刚刚将我的博客从本地网络服务器转移到 Amazon EC2 Free Linux 服务器，现在一切似乎都在工作，除了永久链接，我禁用并重新启用它们，但它仍然中断。

我试过运行脚本

```
sudo a2enmod rewrite 
```

但它说 a2enmod: command not found while logged into my server as ec2-user

任何帮助将非常感激！

谢谢

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-09-18T02:30:03.547

我刚刚遇到了同样的问题，假设您使用的是 httpd，您需要`/etc/httpd/conf`通过运行打开 http.conf `sudo vi httpd.conf`，然后将“AllowOverride”更改为：

```
<Directory />
    Options FollowSymLinks
    AllowOverride All
</Directory> 
```

您可能还需要在`AllowOverride All`此处进行更改：

```
# AllowOverride controls what directives may be placed in .htaccess files.
# It can be "All", "None", or any combination of the keywords:
#   Options FileInfo AuthConfig Limit
#
    AllowOverride All 
```

然后你需要通过运行重新启动 httpd `apachectl -k restart`。请注意，您可能需要实际运行`sudo apachectl -k restart`.

让我知道这是否有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-14T06:39:58.313

对于 Ubuntu，在以下位置更改“AllowOverride All”：

“我必须采取的额外步骤是编辑 /etc/apache2/sites-enabled/000-default。

在该文件中，您会找到 /var/www 的 AllowOverride 设置，即“无”。

将设置更改为： AllowOverride All "

感谢 ljonas @ [http://wordpress.org/support/topic/solved-permalinks-working-in-apache2-ubuntu-1010](http://wordpress.org/support/topic/solved-permalinks-working-in-apache2-ubuntu-1010)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-11-27T00:39:28.957

此处有书面和视频说明[https://a1websitepro.com/enable-pretty-permalinks-amazon-web-hosting/](https://a1websitepro.com/enable-pretty-permalinks-amazon-web-hosting/)

```
 <Directory /var/www/html/>
     Options Indexes FollowSymLinks
     AllowOverride All
    </Directory> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-07-31T11:40:47.877

基础：[使用 PuTTY 从 Windows 连接到 Linux 实例](http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/putty.html)

第 1 步：打开[PuTTY](https://www.chiark.greenend.org.uk/~sgtatham/putty/)登录 AWS EC2 控制台

第 2 步：输入服务器地址

[![在此处输入图像描述](../Images/208b456f4cdab5dc14ffe486cf0c4629.png)](https://i.stack.imgur.com/dzUpn.png)

第 3 步：在 PuTTY 中浏览 Auth 私钥

[![在此处输入图像描述](../Images/6cf2c75bc63f6ba9fc2a9db2ce705360.png)](https://i.stack.imgur.com/h61M6.png)

第 4 步：通过 PuTTY 登录 AWS（输入“Login as name”即您的 AWS ec2 实例名称。例如：ec2-user）

第 5 步：将目录更改为 /etc/httpd/conf ( `$ cd /etc/httpd/conf`)

第 6 步：执行`sudo vi httpd.conf`更新 httpd.conf 文件。（在 VI 编辑器中打开 httpd.conf 文件）

更新关注

```
<Directory />
    Options FollowSymLinks
    AllowOverride None
</Directory> 
```

到

```
<Directory />
    Options FollowSymLinks
    AllowOverride All
</Directory> 
```

和

```
# AllowOverride controls what directives may be placed in .htaccess files.
# It can be "All", "None", or any combination of the keywords:
#   Options FileInfo AuthConfig Limit
#
    AllowOverride None 
```

到

```
# AllowOverride controls what directives may be placed in .htaccess files.
# It can be "All", "None", or any combination of the keywords:
#   Options FileInfo AuthConfig Limit
#

    AllowOverride All 
```

步骤 7：保存并退出 VI 编辑器。

要保存并退出 VI 编辑器，请按 [Esc] 键并键入`:wq`

第 8 步：重新启动 Apache

类型`sudo apachectl -k restart`

最终截图

[![在此处输入图像描述](../Images/0f737df2b49039c3bedf6b220b153ba8.png)](https://i.stack.imgur.com/NQ3K2.png)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-01-26T18:44:27.587

在 AWS 上，我的文件位于稍微不同的位置：

```
sudo nano /etc/httpd/conf/httpd.conf 
```

在两个位置更改`AllowOverride None`为并使用永久链接重新启动后，重定向效果很好！`AllowOverride All``sudo service httpd restart`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-08T20:03:51.413

您的服务器可能没有启用 AllowOverride 指令。如果在 Apache httpd.config 文件中将 AllowOverride 指令设置为 None，则 .htaccess 文件将被完全忽略。

在这种情况下，服务器甚至不会尝试读取文件系统中的 .htaccess 文件。当此指令设置为 All 时，任何具有 .htaccess 上下文的指令都可以在 .htaccess 文件中使用。httpd.config 中启用 AllowOverride 指令的示例：

`Options FollowSymLinks`

`AllowOverride All`

**此链接也可能有帮助：** [http ://codex.wordpress.org/Using_Permalinks](http://codex.wordpress.org/Using_Permalinks)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-03-18T04:30:44.933

AllowOverride 控制哪些指令可以放在 .htaccess 文件中。它可以是“All”、“None”或关键字的任意组合： Options FileInfo AuthConfig Limit

```
AllowOverride All 
```

当我在我的服务器上设置这个时，我得到了 503 内部服务器错误，请问有什么建议吗？

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-06-22T00:32:21.577

我不得不在多个 .conf 文件中使用 AllowOverride All 和 Options +FollowSymLinks（我还尝试了 a2enmod rewrite）。但它是最后一个显然控制该目录的 .conf 文件（我们使用的 .iso 导致多个具有相同目录的目录......而我更改的第一个没有效果）。但是一旦他们都拥有这两种设置，系统就开始工作了。

# php - 验证 url 数组？

> ID：12292998
> 
> 赞同：1
> 
> 时间：2012-09-06T04:30:41.640
> 
> 标签：php, arrays

我正在编写一个小脚本，用户将 url 添加到 textarea，我发现这个小函数来验证单个链接：

```
function isValidURL($url){
 return preg_match('|^http(s)?://[a-z0-9-]+(.[a-z0-9-]+)*(:[0-9]+)?(/.*)?$|i', $url);
} 
```

但我需要它来验证一系列链接

我使用爆炸来分开每个这样的：

```
$urls = explode("\n", $_POST['urls']); 
```

我知道我需要使用 a 循环 url 数组，`foreach`但我怎样才能在我的`$var`内部获取 foreach`elseif`

**例子：**

```
function isValidURL($url){
 return preg_match('|^http(s)?://[a-z0-9-]+(.[a-z0-9-]+)*(:[0-9]+)?(/.*)?$|i', $valid);
}

$urls = array('http://iamvalid.com','iamnotvalid.com','http://iamvalidaswell.com');

foreach ($urls as $check) {
 $validate = isValidURL($check);
}

if($check != $validate) {
//  If fail
 $result = 'fail';
} else {
//  If pass
 $result = 'pass';
}  // if

echo $result; 
```

*（出于演示目的，使用数组而不是 expode）*

**更新：** [Deepaks](https://stackoverflow.com/questions/12292998/validate-url-array/12293077#12293077)回答效果很好，但与我的 mysql 注入预防功能冲突

**冲突函数：**

```
function sanitizeSQL($input) {
 if(get_magic_quotes_gpc() == true){
   $input = stripslashes($input);
  }
   return mysql_real_escape_string(htmlspecialchars($input));
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T04:32:31.240

使用您的示例代码（数组而不是爆炸）我建议类似

```
function isValidURL($url){
  return preg_match('|^http(s)?://[a-z0-9-]+(.[a-z0-9-]+)*(:[0-9]+)?(/.*)?$|i', $valid);
}

$urls = array('http://iamvalid.com','iamnotvalid.com','http://iamvalidaswell.com');

$result = 'pass';
foreach ($urls as $check) {
  if(!isValidURL($check)) {
    $result = 'fail';
    break;
  }
}

echo $result; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T04:40:43.630

```
function isValidURL($url){
   return preg_match('|^http(s)?://[a-z0-9-]+(.[a-z0-9-]+)*(:[0-9]+)?(/.*)?$|i', $url);
}

function sanitizeSQL($input) {
   if(get_magic_quotes_gpc() == true){
      $input = stripslashes($input);
   }
   return mysql_real_escape_string(htmlspecialchars($input));
}

$urls = explode("\n", $_POST['urls']);

$errorcount = 0;
foreach($urls as $url) {
   // next line fixes conflict by cleaning here rather then before
   $url = sanitizeSQL($url);
   $result = isValidURL(trim($url));
   // Do something with ur result
   if(!$result) $errorcount++;

}
if($errorcount>0){
  //Failed
} else {
  //Passed
} 
```

**笔记**

尽量避免`mysql_*`函数使用`mysqli_*`or `PDO`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-18T08:32:07.080

或者可能更短一点......？

```
$urls = array_map('trim', explode("\n", $string));
$validUrls = array_filter(filter_var_array($urls, FILTER_VALIDATE_URL)); 
```