# StackOverflow 问答 10816000-10816999

# c# - 如何在 Rows.Add 之后触发 DataTableNewRowEvent

> ID：10816003
> 
> 赞同：4
> 
> 时间：2012-05-30T12:11:16.730
> 
> 标签：c#, winforms, events, datatable, newrow

我现在有

```
var row = container.Tables[name].NewRow();
row[0] = time;
row[1] = val;
container.Tables[name].Rows.Add(row); 
```

当然，事件`DataTableNewRowEvent`是在第一行触发的。但我需要在最后一行之后解雇他们，我的意思是在添加新行到`RowsCollection`. 怎么做？`DataTable`我需要它在发射时获取实际数据`DataTableNewRowEvent`

我想想：

```
//to insert proper data
var row = container.Tables[name].NewRow();
row[0] = time;
row[1] = val;
container.Tables[name].Rows.Add(row);
//to fire event
container.Tables[name].Rows.Remove(container.Tables[name].NewRow()); 
```

但可能这不是最好的解决方案。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-30T12:58:20.520

我认为您最好处理`RowChanged`on 上的事件`DataTable`，您将获得一个类型的参数，该参数`DataRowChangeEventArgs`具有一个`DataRowAction`属性，让您知道行上实际发生的更改，这是`Add`可能的值之一。

你的处理程序看起来像这样

```
protected void DataTable_RowChanged(object sender, DataRowChangeEventArgs e)
{
    if (e.Action == DataRowAction.Add)
    {
        // Do something with e.Row which is already populated
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T13:02:58.290

DataTableNewRowEvent 事件在内部触发

```
protected virtual void OnTableNewRow(DataTableNewRowEventArgs e); 
```

该方法仅在 DataTable 类的 NewRow 方法中调用。如果你想在不同的时间触发你的事件，除了继承 DataTable 类之外的唯一解决方案是使用反射。

```
MethodInfo mi = (typeof(DataTable)).GetMethod("OnTableNewRow", BindingFlags.Instance | BindingFlags.NonPublic);

// ...

mi.Invoke(container.Tables[name], new object[] { new DataTableNewRowEventArgs(row) }); // fire the event as you please 
```

# java - Java - creating separate thread for sending objects over the Internet

> ID：10816005
> 
> 赞同：3
> 
> 时间：2012-05-30T12:11:29.360
> 
> 标签：java, multithreading, sockets, event-handling, connection

I am writing Battleships game in Java for Event-Driven Programming on my studies. The game is supposed to be a network game and i am going to make client and server in one application.

This is an image representing structure of my application: [class diagram http://dl.dropbox.com/u/41993645/mvc.jpeg](http://dl.dropbox.com/u/41993645/mvc.jpeg)

To get to the point - i want to write Server class that will run as separate thread and are responsible for remote View - Controller communication. So, the Server class will be responsible for:

*   Reading objects from socket in infinite loop and if any arrives, putting them in the BlockingQueue for the Controller.
*   Providing method like 'sendActionEventToView()' which will allow Controller to pass object the other way - from Controller to remote View.

Unfortunately, when running the Server thread, whole application stops responding. If anybody would tell me what am i doing wrong, i would be very grateful. This is in my opinion the problematic part of Server code:

```
/** Main Server method - responsible for reading objects
 *  and putting them in the queue if any arrived */
public void run() {
  GameEvent event;
  while(true) {
    try {
      event = (GameEvent)objectStream.readObject();
      if(event != null) eventQueue.put(event);
    } catch(ClassNotFoundException e) {
      e.printStackTrace();
    } catch(IOException e1) {
      e1.printStackTrace();
    } catch(InterruptedException e2) {
      e2.printStackTrace(); 
    }
  }
} 
```

I think thread hangs on 'readingObject()' - how can i force it to give processor time to another threads if there are not any objects in the stream?

Rest of Server: [https://github.com/mc-suchecki/Battleships/blob/master/controller/Server.java](https://github.com/mc-suchecki/Battleships/blob/master/controller/Server.java) Rest of the app: [https://github.com/mc-suchecki/Battleships](https://github.com/mc-suchecki/Battleships)

Thank you very much in advance, if anything is unclear, please comment. And sorry for my English.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T12:47:08.447

如果你真的在使用多个线程，那么当一个线程被阻塞时，其他线程就会运行。没有必要“强制”处理器给其他线程时间。

查看您的代码，您的视图直接调用控制器的 run 方法，而不是将其交给另一个线程运行： [https](https://github.com/mc-suchecki/Battleships/blob/75e6cf69d081c05845f4171bf42ce096ed5247a7/view/View.java#L48) ://github.com/mc-suchecki/Battleships/blob/75e6cf69d081c05845f4171bf42ce096ed5247a7/view/View.java#L48这会导致`Controller's`要在调用的同一线程中运行的代码`createServer`。

在您的要点中，您已经将您提交`Controller`给构造函数中的新线程`Controller's`（https://gist.github.com/2835863#L46）。我假设您可以在您的视图中删除对“controller.run()”的调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T12:52:08.403

如果您的代码 public void run(); 使用 Thread 的 start 方法启动时，readObject 只能阻塞该线程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T19:57:33.370

确保你的*run*方法本身有一个线程。我怀疑您在一个线程上做了很多事情；您所有的线程实际上都是一个线程，它们都在套接字上等待。当他们（单数）读到一些东西时，他们只是回去再次等待套接字。

使用您的 IDE 确保您拥有所需的所有线程。使用您的调试器。挂起时暂停程序并检查所有线程。确保你至少有两个。（如果你不这样做，那就是问题所在。） *一个*线程*应该*挂在读取的套接字上。检查其他人（如果存在）在哪里挂起并修复代码，以免他们不这样做。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-30T12:29:25.160

正常的 java 流是*阻塞*的。这意味着您通常希望每个套接字连接使用 2 个线程（假设双向通信）。一个线程专门用于*每个套接字连接的**每个流*（输入/输出）。

 ** * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-02T12:36:57.987

我刚刚发现了问题 - 它在构造函数中：

```
/** Server class constructor */
public Server(BlockingQueue<GameEvent> queue) {
  eventQueue = queue;
  try {
    serverSocket = new ServerSocket(Constants.PORT_NUMBER);
    socket = serverSocket.accept();  
    inputStream = socket.getInputStream();  
    objectStream = new ObjectInputStream(inputStream);  
  } catch(IOException e) {
    e.printStackTrace();
  }  
  Thread thread = new Thread(this);
  thread.start();
} 
```

在创建单独的线程*之前*挂起`socket = serverSocket.accept()`应用程序。我不知道为什么，但我一直在寻找方法上的问题，这是错误的。*`run()`**

# java - how to set progress bar on activity

> ID：10816007
> 
> 赞同：1
> 
> 时间：2012-05-30T12:11:31.877
> 
> 标签：java, android, progress-bar, android-activity

This is my code...

```
public class detailedview extends Activity
{
    WebView mWebView;
    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.detailedview);
        GetSet gs = new GetSet();

        String title = gs.getTitle();
        String desc = gs.getDesc();

        mWebView = (WebView) findViewById(R.id.webview);
        mWebView.getSettings().setJavaScriptEnabled(true);
        mWebView.getSettings().setBuiltInZoomControls(true);
        mWebView.getSettings().setSupportZoom(true);
        mWebView.getSettings().setTextSize(TextSize.SMALLER);
        mWebView.loadDataWithBaseURL("", "<p  align=\"justify\"><b> " + title+"</p></b><p align=\"justify\"><br>"+ desc + "</p></br>", "text/html", "utf-8", ""); 
```

I want to set a `ProgressBar` on the `Activity`. How can I achieve this? help me.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T12:15:36.453

下面的代码用于显示进度条：

```
ProgressDialog progressDialog = ProgressDialog.show(this, "Please Wait!", "Loading..."); 
```

并禁用它：

```
if (progressDialog != null) {
            progressDialog.dismiss();
    } 
```

更新：

```
this.getWindow().requestFeature(Window.FEATURE_PROGRESS);
        setContentView(R.layout.main);
        getWindow().setFeatureInt(Window.FEATURE_PROGRESS,
                Window.PROGRESS_VISIBILITY_ON);
        final WebView webView = (WebView) findViewById(R.id.webView);
        webView.getSettings().setJavaScriptEnabled(true);
        webView.loadUrl("file:///android_asset/www/index.html");
        final Activity MyActivity = this;
        webView.setWebChromeClient(new WebChromeClient() {
            public void onProgressChanged(WebView view, int progress) {
                // Make the bar disappear after URL is loaded, and changes
                // string to Loading...
                MyActivity.setTitle("Loading...");
                MyActivity.setProgress(progress * 100); // Make the bar
                                                        // disappear after URL
                                                        // is loaded

                // Return the app name after finish loading
                if (progress == 100)
                    MyActivity.setTitle(R.string.app_name);
            }
        }); 
```

# spring - How to configure Spring Batch RetryPolicy for chunks in job.xml file

> ID：10816011
> 
> 赞同：0
> 
> 时间：2012-05-30T12:11:45.193
> 
> 标签：spring, spring-batch, restart

I have configured the same as below. But getting exceptions (see later), Please help. The purpose of doing so, is to achieve to restart Steps on failure.

======================================== The retryPolicyJob.xml

```
<batch:job id="retryPolicyJob" job-repository="jobRepository">
    <batch:step id="retryPolicyStep">
        <batch:tasklet>
            <batch:chunk reader="ConnectionRetryReader" writer="CustomItemWriter" commit-interval="100"
                retry-policy="retryPolicy" />
        </batch:tasklet>
    </batch:step>
</batch:job>

<bean id="ConnectionRetryReader" class="spring.batch.examples.retry.ConnectionRetryReader"/>
<bean id="CustomItemWriter" class="spring.batch.examples.retry.CustomItemWriter"/>

<bean id="retryPolicy"
    class="org.springframework.batch.retry.policy.ExceptionClassifierRetryPolicy">
    <property name="policyMap">
        <map>
            <entry key="org.springframework.dao.ConcurrencyFailureException">
                <bean class="org.springframework.batch.retry.policy.SimpleRetryPolicy">
                    <property name="maxAttempts" value="2" />
                </bean>
            </entry>
            <entry key="org.springframework.dao.DeadlockLoserDataAccessException">
                <bean class="org.springframework.batch.retry.policy.SimpleRetryPolicy">
                    <property name="maxAttempts" value="3" />
                </bean>
            </entry>
        </map>
    </property>
</bean> 
```

============================================= The Reader Class code :

```
public class ConnectionRetryReader<T> implements ItemReader<T>, ItemStream {

    private int retryCount = 0;
    private T t;
    int currentIndex = 0;
    private static final String CURRENT_INDEX = "current.index";

    public T read() throws Exception, UnexpectedInputException, ParseException,
            NonTransientResourceException, ConnectionFailureException,
            ResourceNotAvailableException {
        retryCount++;
        System.out.println("In Retry " + retryCount);
        if (retryCount == 2) {
            System.out.println("throwing ConcurrencyFailureException");
            throw new org.springframework.dao.ConcurrencyFailureException(
                    "ConcurrencyFailureException thrown", new Exception());
        }
        System.out.println("throwing DeadlockLoserDataAccessException");
        throw new org.springframework.dao.DeadlockLoserDataAccessException(
                "DeadlockLoserDataAccessException thrown", new Exception());
    }

    public void open(ExecutionContext executionContext)
            throws ItemStreamException {
        if (executionContext.containsKey(CURRENT_INDEX)) {
            currentIndex = new Long(executionContext.getLong(CURRENT_INDEX))
                    .intValue();
        } else {
            currentIndex = 0;
        }
    }

    public void update(ExecutionContext executionContext)
            throws ItemStreamException {
        executionContext.putLong(CURRENT_INDEX,
                new Long(currentIndex).longValue());

    }

    public void close() throws ItemStreamException {
        // TODO Auto-generated method stub

    }

} 
```

==================================================== The Exception message:

```
17:22:40,140  INFO main SimpleJobLauncher:179 - No TaskExecutor has been set, defaulting to synchronous executor.
17:22:40,546  INFO main SimpleJobLauncher:118 - Job: [FlowJob: [name=retryPolicyJob]] launched with the following parameters: [{}]
17:22:40,577  INFO main SimpleStepHandler:133 - Executing step: [retryPolicyStep]
In Retry 1
throwing DeadlockLoserDataAccessException
17:22:40,640 ERROR main AbstractStep:212 - Encountered an error executing the step
org.springframework.batch.core.step.skip.NonSkippableReadException: Non-skippable exception during read
    at org.springframework.batch.core.step.item.FaultTolerantChunkProvider.read(FaultTolerantChunkProvider.java:104)
    at org.springframework.batch.core.step.item.SimpleChunkProvider$1.doInIteration(SimpleChunkProvider.java:108)
    at org.springframework.batch.repeat.support.RepeatTemplate.getNextResult(RepeatTemplate.java:367)
    at org.springframework.batch.repeat.support.RepeatTemplate.executeInternal(RepeatTemplate.java:214)
    at org.springframework.batch.repeat.support.RepeatTemplate.iterate(RepeatTemplate.java:143)
    at org.springframework.batch.core.step.item.SimpleChunkProvider.provide(SimpleChunkProvider.java:103)
    at org.springframework.batch.core.step.item.ChunkOrientedTasklet.execute(ChunkOrientedTasklet.java:68)
    at org.springframework.batch.core.step.tasklet.TaskletStep$ChunkTransactionCallback.doInTransaction(TaskletStep.java:386)
    at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:130)
    at org.springframework.batch.core.step.tasklet.TaskletStep$2.doInChunkContext(TaskletStep.java:264)
    at org.springframework.batch.core.scope.context.StepContextRepeatCallback.doInIteration(StepContextRepeatCallback.java:76)
    at org.springframework.batch.repeat.support.RepeatTemplate.getNextResult(RepeatTemplate.java:367)
    at org.springframework.batch.repeat.support.RepeatTemplate.executeInternal(RepeatTemplate.java:214)
    at org.springframework.batch.repeat.support.RepeatTemplate.iterate(RepeatTemplate.java:143)
    at org.springframework.batch.core.step.tasklet.TaskletStep.doExecute(TaskletStep.java:250)
    at org.springframework.batch.core.step.AbstractStep.execute(AbstractStep.java:195)
    at org.springframework.batch.core.job.SimpleStepHandler.handleStep(SimpleStepHandler.java:135)
    at org.springframework.batch.core.job.flow.JobFlowExecutor.executeStep(JobFlowExecutor.java:61)
    at org.springframework.batch.core.job.flow.support.state.StepState.handle(StepState.java:60)
    at org.springframework.batch.core.job.flow.support.SimpleFlow.resume(SimpleFlow.java:144)
    at org.springframework.batch.core.job.flow.support.SimpleFlow.start(SimpleFlow.java:124)
    at org.springframework.batch.core.job.flow.FlowJob.doExecute(FlowJob.java:135)
    at org.springframework.batch.core.job.AbstractJob.execute(AbstractJob.java:281)
    at org.springframework.batch.core.launch.support.SimpleJobLauncher$1.run(SimpleJobLauncher.java:120)
    at org.springframework.core.task.SyncTaskExecutor.execute(SyncTaskExecutor.java:48)
    at org.springframework.batch.core.launch.support.SimpleJobLauncher.run(SimpleJobLauncher.java:114)
    at org.springframework.batch.core.launch.support.CommandLineJobRunner.start(CommandLineJobRunner.java:349)
    at org.springframework.batch.core.launch.support.CommandLineJobRunner.main(CommandLineJobRunner.java:574)
    at spring.batch.examples.retry.RetryTestCommandLine.main(RetryTestCommandLine.java:9)
Caused by: org.springframework.dao.DeadlockLoserDataAccessException: DeadlockLoserDataAccessException thrown; nested exception is java.lang.Exception
    at spring.batch.examples.retry.ConnectionRetryReader.read(ConnectionRetryReader.java:30)
    at org.springframework.batch.core.step.item.SimpleChunkProvider.doRead(SimpleChunkProvider.java:90)
    at org.springframework.batch.core.step.item.FaultTolerantChunkProvider.read(FaultTolerantChunkProvider.java:87)
    ... 28 more
Caused by: java.lang.Exception
    at spring.batch.examples.retry.ConnectionRetryReader.read(ConnectionRetryReader.java:31)
    ... 30 more
17:22:40,655  INFO main SimpleJobLauncher:121 - Job: [FlowJob: [name=retryPolicyJob]] completed with the following parameters: [{}] and the following status: [FAILED]

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T16:33:57.930

您的阅读器类正在显式调用异常类。这应该由您的 retryPolicy 自动管理。如果要捕获异常详细信息，请使用侦听器“MyRetryListener extends RetryListenerSupport”。

您需要为阅读器类定义一个类型，而不是使用“T”。这是一个字节[]，字符串，？？？

问候，戈登狄更斯

# twitter - Twitter bootstrap modal - change option for existing modal

> ID：10816017
> 
> 赞同：4
> 
> 时间：2012-05-30T12:11:50.280
> 
> 标签：twitter, twitter-bootstrap, modal-dialog

I want to change modal behavior after certain event.

```
$('.myModal').modal('show'); // default behavior - user can close modal on ESC
$(button).click(function(){
    $('.myModal').modal({keyboard:false}); // override 
                                           // prevous line code does not work as i expect,
                                           // user can close modal with ESC
    $('.myModal').data('modal').option.keyboard = false; // even this code doesn't work
}); 
```

Any help will be appreciated

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-26T14:31:00.000

我有同样的问题，我使用了错误的数据...

你可以试试这个（考虑到bt3）：

```
$('#myModal').data('bs.modal').options.keyboard=false; 
```

**但**

如果模态已打开，则它不起作用，您需要刷新它。

# jsf-2 - 注销后清除会话

> ID：10816029
> 
> 赞同：1
> 
> 时间：2012-05-30T12:12:29.233
> 
> 标签：jsf-2

我有许多托管 bean `@SessionScoped`，我想在用户注销时清除整个会话。有谁知道如何实现这一目标？哪一个表现最好：`@SessionScoped`or `@RequestScoped`or `@ViewScoped`? 还有注释来替换文件 faces-config.xml 中的重定向吗？

我可以通过注释替换以下内容：

```
 <navigation-rule>
    <from-view-id>pages/login.xhtml</from-view-id>
    <navigation-case>
      <from-outcome>userOK</from-outcome>
      <to-view-id>pages/template.xhtml</to-view-id>
      <redirect />
    </navigation-case>
    <navigation-case>
      <from-outcome>userNOK</from-outcome>
      <to-view-id>pages/login.xhtml</to-view-id>
    </navigation-case>    
  </navigation-rule> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T12:20:57.790

在您的托管 bean 中

```
 public void logout() {
     FacesContext.getCurrentInstance().getExternalContext().invalidateSession();
 } 
```

另请参阅[此](https://stackoverflow.com/questions/5619827/how-to-invalidate-session-in-jsf-2-0)答案

**第二部分**

不，对此没有注释。但是您可以随时添加到您的链接`"/home.xhtml?faces-redirect=true"`中。

而对于性能 - 它总是取决于你想要什么。如果它只是一个只加载一次的页面（比如一些报告或其他东西），那么使用 RequestScoped bean（它只存在于每个请求中）。

只要用户停留在同一个视图上，ViewScoped 就会一直存在，因此对于我们说具有动态表的页面进行 ajax 调用是很好的。

并且 SessionScoped bean 存在整个会话，因此最好拿着购物车或类似的东西。

# java - 使这个循环变得简单（使用循环在 Java 中打印字母 J）

> ID：10816032
> 
> 赞同：0
> 
> 时间：2012-05-30T12:12:36.793
> 
> 标签：java, loops, for-loop

我尝试在控制台上打印字母 D，但我无法帮助代码比我预期的要长。你能帮我....还有另一种方法可以减少这段代码吗？谢谢你。这是我的代码：

```

```
public class LetterD {
    public static void main(String[] args) {
      for(int i = 1;i<=14;i++){
         for(int j = 1;j<=4;j++) System.out.print("*");
         if(i == 1 || i==14) for(int k = 1;k<=7;k++) System.out.print("*");
         if(i == 2 || i==13) for(int k = 1;k<=9;k++) System.out.print("*");
         if(i == 3 || i==12){
             for(int k = 1;k<=6;k++) System.out.print(" ");
             for(int l = 7;l<=10;l++) System.out.print("*");
         }
         if(i==4||i==11){
             for(int k = 1;k<=7;k++) System.out.print(" ");
             for(int l = 8;l<=11;l++) System.out.print("*");
         }
         if(i==5||i==10){
             for(int k = 1;k<=8;k++) System.out.print(" ");
             for(int l = 9;l<=12;l++) System.out.print("*");
         }
         if(i==6||i==9){
             for(int k = 1;k<=9;k++) System.out.print(" ");
             for(int l = 10;l<=13;l++) System.out.print("*");
         }
         if(i==7||i==8){
             for(int k = 1;k<=10;k++) System.out.print(" ");
             for(int l = 11;l<=14;l++) System.out.print("*");
         }
         System.out.println();
      }
    }
} 
```

输出将是这样的：

```
***********
*************
****      ****
****       ****
****        ****
****         ****
****          ****
****          ****
****         ****
****        ****
****       ****
****      ****
*************
*********** 
```

            回答 #1

赞同：2

时间：2012-05-30T12:38:56.347

我想使代码更短的最明显方法是在循环中绘制字母的中心部分，如下所示：

```
public class LetterD {
    public static void main(String[] args) {

        for(int i = 1;i<=14;i++) {
            for(int j = 1;j<=4;j++) System.out.print("*");
            if(i == 1 || i==14) for(int k = 1;k<=7;k++) System.out.print("*");
            if(i == 2 || i==13) for(int k = 1;k<=9;k++) System.out.print("*");
            if (i > 2 && i < 13) {
                for (int j = 0; j < 10 - Math.abs(i - 7.5); j++) System.out.print(" ");
                for (int j = 0; j < 4; j++) System.out.print("*");
            }
            System.out.println();
        }
    }
} 
```

            回答 #2

赞同：2

时间：2012-05-30T12:42:31.483

辅助方法只是你的代码很多：

```
public static void main(String[] args) {
    printAsterisks(11, true);
    printAsterisks(13, true);
    for(int i = 6; i < 10; i++){
        printSpaced(i);
    }
    for(int i = 10; i > 5; i--){
        printSpaced(i);
    }
    printAsterisks(13, true);
    printAsterisks(11, true);
}

static void printSpaced(int spaces){
    printAsterisks(4, false);
    for(int i = 0; i < spaces; i++){
        System.out.print(" ");
    }
    printAsterisks(4, true);
}

static void printAsterisks(int n, boolean newLine){
    for(int i = 0; i < n; i++){
        System.out.print('*');
    }
    if(newLine){
        System.out.println("");
    }
} 
```

            回答 #3

赞同：1

时间：2012-05-30T12:20:17.523

您可以使用字符串数组来表示字母 D“像素”的各个行，并在 for 循环中对其进行迭代。如果您想真正花哨，可以将“像素”行编码为整数并使用按位运算符对其进行解码。

            回答 #4

赞同：1

时间：2012-05-30T12:23:53.520

不使用循环？

```
System.out.println("***********"
               + "\n*************"
               + "\n****      ****"
               + "\n****       ****"
               + "\n****        ****"
               + "\n****         ****"
               + "\n****          ****"
               + "\n****          ****"
               + "\n****         ****"
               + "\n****        ****"
               + "\n****       ****"
               + "\n****      ****"
               + "\n*************"
               + "\n***********") 
```

你看不到这样的 hello world 程序，是吗？

```
for(int i = 0; i < 12; i++) {
    if(i == 0)       System.out.print("H");
    else if(i == 1)  System.out.print("e");
    else if(i == 2 || i == 3 || i == 9)
                     System.out.print("l");
    else if(i == 4 || i == 7)
                     System.out.print("o");
    else if(i == 5)  System.out.print(" ");
    else if(i == 6)  System.out.print("w");
    else if(i == 8)  System.out.print("r");
    else if(i == 10) System.out.print("d");
    else             System.out.print("!");
} 
```

            回答 #5

赞同：1

时间：2012-05-30T12:34:35.740

具有单循环的递归解决方案：

```
public static void printD(int size, int currentStep, boolean dir) {
    for (int i = 0; i < size + currentStep; i++) {
        if (currentStep > size / 10) {
            if (i > size / 3 && i < size + currentStep - (size / 3)) {
                System.out.print("-");
            } else {
                System.out.print("*");
            }
        } else {
            System.out.print("*");
        }
    }
    System.out.println();
    if (currentStep < size / 2 && dir) {
        printD(size, currentStep + 1, true);
    } else {
        if (currentStep > 0) {
            printD(size, currentStep - 1, false);
        }
    }
} 
```

并打印类似于结果调用的内容`printD(12, 0, true);`

```

# delphi - 如何在 Delphi IDE 中更快地创建自动属性？

> ID：10816033
> 
> 赞同：12
> 
> 时间：2012-05-30T12:12:38.173
> 
> 标签：delphi, properties, ide, automatic-properties

我需要创建和管理许多简单的已发布属性。如果它们看起来像这样，我称它们为自动属性：

```
private
  FTitle: string;
published
  property Title: string read FTitle write FTitle; 
```

通常我用下一个方法创建它们：

1.  添加属性名称和类型：

    `property Title: string`

2.  选择属性名称并将其复制`Title`到剪贴板。

3.  附加行`read F` `Ctrl+V` `write F` `Ctrl+V` `;`

4.  按下`Ctrl+Shift+C`，这将生成私有字段

有什么方法可以排除步骤 2 和 3 以更快地添加属性？也许可以为此创建一些宏？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-30T13:59:47.210

从 Delphi 2006 开始，您可以使用 LiveTemplates。

以 Delphi XE 为例：

*   键入[`propf`](http://docwiki.embarcadero.com/RADStudio/en/Live_Templates_Changes_for_XE)并`Ctrl + J`击键
*   写下属性名称并按下`TAB`键
*   写下属性类型名称，点击`TAB`或`ENTER`键，你就完成了

您可以在此处找到有关如何编写自己的实时模板的更多信息：

*   [`Delphi Live Templates - http://delphi.wikia.com`](http://delphi.wikia.com/wiki/Delphi_Live_Templates)
*   [`Creating Live Templates - http://docwiki.embarcadero.com`](http://docwiki.embarcadero.com/RADStudio/en/Creating_Live_Templates)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-09T12:28:01.720

我为此使用宏。

例如，我有带字段的模型

```
private
  FTitle: string;
  FName: string
  FAge: Integer 
```

然后我将字段复制粘贴到已发布部分并创建宏

1.  转到第一个字段并击中`Home`
2.  点击`Ctrl + Shift + R`开始录制宏
3.  使用`Crtl + ->`, `Crtl + <-`和`End`键进行导航并将第一个字段转换为属性，如**属性 Title: string Read FTitle Write FTitle;**
4.  在那之后打到`Home`下一行
5.  通过点击完成宏`Ctrl + Shift + R`
6.  对于所有其他字段，只需按`Crtl + Shift + P`

起初这似乎很困难，但技能会得到回报。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-02-19T15:45:32.650

在 XE7 中键入 prom 并点击`enter`. 它似乎更快。

# php - 无法从自定义 Magento 模块在 MySQL 中保存数据

> ID：10816034
> 
> 赞同：1
> 
> 时间：2012-05-30T12:12:41.537
> 
> 标签：php, mysql, zend-framework, magento, orm

我正在为 Magento 1.7.0 制作一个自定义模块。我在尝试将数据插入 MySQL 时遇到问题。我从会话中获取用户信息，如下所示：

```
$customer = Mage::getSingleton('customer/session')->getCustomer(); 
$user_id = $customer->getId(); 
```

`$user_id`现在携带`ID`当前用户登录到我的 Magento 系统。

基本上问题是，当我尝试将上述 ID 保存在我的自定义表中时，保存在我的表中的值始终为**0**。

以前我在尝试保存另一个整数值时遇到了这个问题，我通过将 MySQL 表列的数据类型从 int(10) 更改为 tinyint(4) 解决了这个问题，但在这种情况下，我不能为用户 ID 这样做。

```
$model= Mage::getModel('voter/competetion')
    ->setDesignid($designId)
    ->setUserId($user_id)
    ->setVote($vote)
    ->setStartdate($startDate)
    ->save(); 
```

MySQL 列名与安装 sql 脚本如下：**id、designid、user_id、vote、startdate、enddate**

```
$installer = $this;
$installer->startSetup();

$prefix = Mage::getConfig()->getTablePrefix();

$installer->run("
    CREATE TABLE IF NOT EXISTS ".$prefix."vote_competetion (
        id int(10) NOT NULL AUTO_INCREMENT,
        designid int(10) NOT NULL,
        user_id int(10) NOT NULL,
        vote tinyint(1) NOT NULL,
        startdate datetime NOT NULL,
        enddate datetime NOT NULL,
        PRIMARY KEY (id),
        FOREIGN KEY (designid) REFERENCES ".$prefix."vote_design(id)
    ) ENGINE=MyISAM DEFAULT CHARSET=latin1 AUTO_INCREMENT=1;
");

Mage::getModel('core/url_rewrite')->setId(null);
$installer->endSetup(); 
```

我的 setter 方法名称有问题吗？所有其他值都被正确保存。我真的不知道该怎么办。请帮忙。

我感谢所有的帮助。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T13:28:02.843

如果你从一开始就没有 user_id 在表中，你应该清除缓存，因为 Magento 保持它的结构缓存并且不会设置任何新的列数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T12:25:14.313

您在命名用户 ID 字段时出错。在表中它被命名为**userid**，所以在你的代码中你应该这样称呼它：

```
$model= Mage::getModel('voter/competetion')
    ->setDesignid($designId)
    ->setUserid($user_id) // notice lowercase "i" here
    ->setVote($vote)
    ->setStartdate($startDate)
    ->save(); 
```

或者您可以将表中的字段从**userid**重命名为**user_id**。

# sql - 查询优化；Table.Column = @Param OR @Param IS NULL

> ID：10816039
> 
> 赞同：1
> 
> 时间：2012-05-30T12:12:51.273
> 
> 标签：sql, sql-server, sql-server-2008, tsql

在 WHERE 子句中使用像这样的条件 Table.Column = @Param OR @Param IS NULL 它不对列使用 INDEX。

是真的吗，如果是这样，那么如何编写这种也使用 INDEX 的查询

查询示例

```
SELECT Col1, Col2 ...
FROM Table
WHERE (Col1 = @col OR @col IS NULL)
AND   (Col2 = @col2 OR @col2 IS NULL)
AND   (Col3 = @col3 OR @col3 IS NULL) 
```

任何帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-30T12:17:57.233

不幸的是，执行计划的生成并不像您期望的那样。

对于该单个查询，将创建一个计划。在创建该计划时，选择并固定要使用的索引。始终使用相同的计划、相同的索引等参数并不重要。

优化者*试图*找到适合所有可能性的最佳计划，但由于这种查询的性质，没有一个。您根本没有使用索引的计划所产生的特征。

解决方案是使用动态 SQL。这感觉很不整洁，但是如果您使用带有 的参数化查询`sp_executesql`，它实际上可以非常结构化，并且非常高效。

这是关于该主题的一篇非常有用的文章的链接： [动态搜索](http://www.sommarskog.se/dyn-search.html)

它非常深入，但它*是*解决这个问题的一种非常健壮的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-25T10:15:41.363

```
SELECT Col1, Col2 ...
FROM Table
WHERE EXISTS(
    SELECT Col1, Col2, Col3
    INTERSECT
    SELECT @col, @col2, @col3) 
```

直觉上，这似乎应该表现得很糟糕，但是 SQL Server 的查询优化器知道如何给予`INTERSECT`特殊处理，并在内部将其转换为（伪 SQL）

```
SELECT Col1, Col2 ...
FROM Table
WHERE (Col1, Col2, Col3) IS (@col, @col2, @col3) 
```

正如您在查询计划中看到的那样。如果您在这些列上有索引，它们可以并且确实会被使用。

我最初是从 Paul White 的[Undocumented Query Plans: Equality Comparisons](http://web.archive.org/web/20180422151947/http://sqlblog.com:80/blogs/paul_white/archive/2011/06/22/undocumented-query-plans-equality-comparisons.aspx)博客文章中挑选出来的，这可能是一个有趣的进一步阅读。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-30T12:17:18.073

为什么不试试这个：

```
SELECT Col1, Col2 ...
FROM Table
WHERE Col1 = IsNull(@col,Col1)
AND Col2 = IsNull(@col2,Col2)
AND Col3 = IsNull(@col3,Col3) 
```

关于您的问题：您的查询分析器说它不使用 column1,2,3 上的索引？您为所有 3 列创建了索引？然后它应该使用它而不管其他`OR IS NULL`

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-30T13:07:50.830

尝试在所有 where 子句列上建立索引，并尝试使用更结构化的查询，如下所示：

```
SELECT Col1, Col2 ... 
FROM Table 
WHERE Col1 = **COALESCE**(@col,Col1)
AND Col2 = **COALESCE**(@col2,Col2)
AND Col3 = **COALESCE**(@col3,Col3) 
```

COALESCE() 函数返回第一个非空参数，因此如果 STATUS 为 NULL，它将返回 ''。

# c# - Web 项目的“无法启动程序”错误

> ID：10816043
> 
> 赞同：1
> 
> 时间：2012-05-30T12:12:58.237
> 
> 标签：c#, silverlight, internet-explorer, iis

我有一个我编写的内部使用的 Silverlight 项目 - 由于我们没有任何需要处理它，所以我已经有一段时间没有打开这个项目了。我今天早上打开它，在构建方面一切都很好，但是每当我尝试调试时，都会出现以下错误：

无法启动程序“http://mymachinename/mywebsite/index.aspx”

当然，在 Firefox 中运行它可以正常工作，但不会加载任何符号。在没有调试的情况下运行仍然会引发相同的错误，但 IE 还是会加载...

在 IE 中导航到网站工作正常 - SL 应用程序打开、加载数据等，一切看起来都不错

我整个早上都在谷歌上搜索（通常很擅长查找信息），并且通过了关于 SO 的所有问题，我无法弄清楚发生了什么 - 事件日志中似乎没有任何消息，有任何 VS 输出窗口中都没有消息，w3wp 在启动后立即终止（可能是由于尝试打开 IE 时出错）。我尝试过重新安装 IE、清理/重建、使用本地开发服务器、创建新的 Web 项目、在 IE9 中打开/关闭设置等

似乎没有什么不同 - 任何人都有过这方面的经验并且在没有做我已经做过的事情之一的情况下修复了它？还有其他建议吗？

提前致谢！

更新

只是为了以防万一有人问清楚——我在创建一个新的网络项目时遇到了这个问题——即我所说的我尝试过的一切（上面）都没有改变行为。无论我到目前为止做了什么（包括一个非 SL 网络项目），它都显示相同的错误

我还尝试将调试器附加到正在运行的 w3wp（标准 IIS 进程），但我似乎无法对其进行调试（没有加载符号），但这可能完全是另一个问题。我接下来会看看，也许如果我发现它可能会导致解决这个问题

更新 2

在 Firefox 中调试有效 - 我附加到 w3wp 没有成功，然后意识到我的愚蠢（SL 是客户端应用程序！）我附加到 FF 运行其插件的 plugin-container.exe。这有效。我可能对 IE 也可以做同样的事情，只是附加到 IE，但是为什么它不能从 VS 启动呢？！*拉头发*

更新 3

万一有人问，默认浏览器在 VS 中设置为 IE。我还设法通过附加到 IE 进行调试，它只是不会从 VS 中启动 IE - 烦人，但我现在可以忍受它。如果有人确实有建议，请随时...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T12:03:44.927

对于任何人的信息，以防他们遇到同样的问题，最终我运行我的网站的端口也在运行一个 SharePoint 网站！

我在端口 81 上创建了一个新站点并将其用于开发 - 不确定其他站点上的什么设置导致了问题，但它最终在端口 81 上工作。

# windows - C# Screen.DeviceName

> ID：10816044
> 
> 赞同：0
> 
> 时间：2012-05-30T12:12:59.103
> 
> 标签：windows

这是一个关于 Screen.DeviceName 的非常简单的问题

它总是返回 "\.\DISPLAY1" 到 "\.\DISPLAY"n 吗？或者除了这些之外还有其他价值吗？

我有多个显示器，我喜欢 "\.\DISPLAY1" "\.\DISPLAY2" "\.\DISPLAY3"

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T13:02:36.287

在幕后，这只是调用[`GetMonitorInfo`](http://msdn.microsoft.com/en-us/library/dd144901%28v=vs.85%29.aspx)Windows API 函数。没有提及该名称将始终出现在文档中的特定格式。

因此，返回的设备名称本身是操作系统的实现细节，可能会在版本之间或软件更新中发生变化。我强烈建议您不要假设它总是采用这种格式，即使 - 现在 - 它是。

# wordpress - 在网站前端或页面中显示插件

> ID：10816046
> 
> 赞同：1
> 
> 时间：2012-05-30T12:13:00.637
> 
> 标签：wordpress

我想在我的网站或页面上显示我的插件。我使用`wordpress 2.3.2`

我也授予了文件夹的权限。

例如，我编辑并更新了一个著名的插件 Holly dolly，但我不知道如何在前端显示..

我知道我必须打电话

```
// Now we set that function up to execute when the admin_notices action is called
add_action( 'admin_notices', 'hello_dolly' ); 
```

但如何？

我尝试谷歌搜索，但没有任何完美的解决方案..

**请帮我..**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T12:29:55.337

这就是我所做的 - 将文件复制`hello.php`到插件文件夹中并将其重命名为`myhello.php`. 这是在我的系统上运行良好的代码——

```
<?php
/**
 * @package myhello
 * @version 1.6
 */
/*
Plugin Name: My Hello
Plugin URI: http://wordpress.org/extend/plugins/myhello/
Description: This is not just a plugin
Author: Swapnesh Sinha
Version: 1.6
Author URI: swapneshsinha.wordpress.com
*/

function myhello_get_lyric() {
    /** These are the lyrics to Hello Dolly */
    $lyrics = "Hello, Dolly
Well, hello, Dolly
It's so nice to have you back where you belong
You're lookin' swell, Dolly
Dolly'll never go away
Dolly'll never go away
Dolly'll never go away again";

    // Here we split it into lines
    $lyrics = explode( "\n", $lyrics );

    // And then randomly choose a line
    return wptexturize( $lyrics[ mt_rand( 0, count( $lyrics ) - 1 ) ] );
}

// This just echoes the chosen line, we'll position it later
function myhello() {
    $chosen = myhello_get_lyric();
    echo "<p id='dolly'>$chosen</p>";
}

// Now we set that function up to execute when the admin_notices action is called
add_action( 'admin_notices', 'myhello' );

// We need some CSS to position the paragraph
function dolly_css() {
    // This makes sure that the positioning is also good for right-to-left languages
    $x = is_rtl() ? 'left' : 'right';

    echo "
    <style type='text/css'>
    #dolly {
        float: $x;
        padding-$x: 15px;
        padding-top: 5px;       
        margin: 0;
        font-size: 11px;
    }
    </style>
    ";
}

add_action( 'admin_head', 'dolly_css' );

?> 
```

# git - 按需发布的最佳（在您看来）GIT 工作流程（在大多数情况下，一次 1-2 张票）

> ID：10816047
> 
> 赞同：2
> 
> 时间：2012-05-30T12:13:05.507
> 
> 标签：git, release-management

我是一个 Git 新手，我正在寻找你的建议。

在我工作的公司中，我们有一个“工作流程”，我们的项目有一个 Git 存储库，有 2 个分支：`master`和`prod`. 所有开发人员都在`master`分支上工作。如果票已完成（从开发人员的角度来看），我们将推送到 repo。如果所有测试都通过了，我们就会发布。

问题在于，在大多数情况下，业务人员的请求听起来像：“请释放票 A 或 A && B”。

在大多数情况下，我最终会做类似的事情

```
git checkout prod
git cherry-pick --no-commit commit_hash
git commit -m "blah blah to prod" -a 
```

正如您所看到的，这不是一个完美的解决方案，我的印象非常深刻，这是一个完美的方法，尤其是当更改 A 取决于更改 B 和 C 时。

如果更多开发人员在同一个分支上工作并且流程看起来像我上面描述的那样，您对如何按需处理发布有什么建议吗？欢迎所有建议。

我无法更改业务流程，它必须保持原样 - 不幸的是。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T15:07:10.970

我们使用了像您这样的工作流程两年，最近放弃了它。我们发现了四个问题，每个问题都会随着您使用工作流程的时间越长而变得夸张。这是一个惊人的时间浪费，需要我们（诚然很小的）发布人员几乎全职的努力来管理。如果你还没有的话，这就是你几个月后要达到的目标：

1.  你`master`和`prod`分支不共享提交历史，这意味着它们不能轻易地相互合并。这在您的此工作流程版本中尤其明显，因为您正在挑选`--no-commit`标志，然后重新提交文件。从某种意义上说，您是在同一组代码上维护两个不同的 git 存储库。这听起来很容易管理，直到你击中......

2.  因为`master`和`prod`有不同的历史，但是`prod`是`master`'s 变化的一个子集，你的分支会随着时间的推移而发散。有时新功能会被废弃。有时业务人员会改变优先级。有时一个想法看起来很棒，直到你提交了 40 次并意识到它破坏了一切。将在`master`分支中引入无法在 上重现的错误`prod`，其中一些将是根本看不到的代码工件`prod`。没有持续的维护，它`master`的完整性就会降低。这很烦人，令人沮丧，并阻止真正的工作完成。更糟...

3.  您最终将修复.`master`中不存在的合并冲突`prod`。当您将这些提交挑选到 时`prod`，您有很小的机会在挑选过程中引入错误。您的`master`代码*几乎*就是您的`prod`代码，但微小的差异可能会产生意想不到的后果。如果您的开发人员不是特别注意空格或喜欢“实验”，那么问题就会被夸大。如果天才开发人员 Susie（他确实很聪明，但倾向于将遗留文件重构为更具可读性）检查一堆空白更改以及一两个合法的代码修复，那么您将把您的生产分支置于奇怪的灰色介于之前和现在之间的状态`master`。

4.  最后，如果将 -1-、-2- 和 -3- 结合起来，就会遇到我们遇到的最严重的问题：难以编写、测试和发布紧急修复程序和功能。当它发生危机时——你刚刚在你的应用程序中引入了一个安全漏洞；bizdev 刚刚签署了 MoneyBags McEnterprise 以获取一个中等国家的 GDP，他们所需要的只是 COB 提供的一套全新的工具——你需要修复`prod`，因为这是必须的，但你不能。不容易。您所有的开发人员都在`master`本地运行。它们可以`prod`通过切换分支来运行，但是您的测试框架是硬连线`master`到`prod`. 没关系，你可以把它写在上面，`prod`然后挑选回来`master`， 正确的？嗯。并非没有遇到合并冲突和不同的文件。功能分支`prod`并直接将其合并到 中`master`怎么样？哦，是的，他们不分享历史……

有可能我们只是没有对这些问题进行足够的思考。我向你保证，那里的某个人对提交和历史记录足够小心以使这项工作顺利进行，你可能会在其他答案中听到他们的消息。尽管如此，这个工作流程在我们使用它的两年时间里浪费了大量的时间。我们围绕几个关键思想重新制定了我们的工作流程：

首先，分支既`git`便宜又容易，因此我们将它们用于每个功能或案例。我们开发了一个命名方案，开发人员将特定案例的分支（我们的问题跟踪系统提供的案例编号）推送到一个可共享的地方。我们使用[gitorious](http://gitorious.org/)为每个开发人员提供个人远程存储库，但没有理由不能将这些“正在运行”的功能和案例推送到共享的`origin`. 它需要一些组织和跟踪，但比上述问题所需的要少得多。

其次，这些特征分支应该被砍掉`production`，而不是`master`。除非某个功能或修复依赖于另一个“正在运行”的更改集，否则它应该基于显示问题或需要该功能的最上游分支。对我们来说，总是这样`production`。

第三，`master`或者我们称之为主要开发集成分支的任何东西，它只是合并在生产之上的“运行中”功能分支的集合。它存在于集成测试和早期识别功能分支之间的合并冲突和依赖关系。它不是我们新代码的基础。我们在每个版本中重新设置它，并自动跟踪和合并“正在运行的主题”。我们还为 QA 部门维护了一个单独的`next`分支，该分支已停止生产，并且仅包含将在下一个版本中发布的那些功能分支。

这是我们从[git 项目本身改编的工作流程。](http://www.kernel.org/pub/software/scm/git/docs/v1.7.2.2/gitworkflows.html)它是分布式的，对我们来说是一种范式转变。它可能对您有用，但如果没有，我仍然建议您寻求另一个工作流程。你当前的版本会随着时间的推移而退化，以至于你最终可能会像对抗代码一样对抗版本控制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T16:39:00.183

分支工作流的常见参考是[一个成功的 Git 分支模型](http://nvie.com/posts/a-successful-git-branching-model/)

# automapper - 使用 Automapper 映射两个相同类型的集合时覆盖集合

> ID：10816048
> 
> 赞同：0
> 
> 时间：2012-05-30T12:13:05.920
> 
> 标签：automapper, automapper-2

我的课程定义如下

```
Source {

    public List<Driver> UnreportedDrivers { get; set; }  // count 1

    public List<Driver> LendingLossDrivers { get; set; }  // count 2

    public List<Driver> OtherDrivers { get; set; } // count 1

}

Destination {

    public List<Driver> Drivers { get; set; }  // expected count = 4 after mapping

} 
```

我必须从源映射到目的地。我必须合并源中的所有集合并将它们映射到目标。

我已经定义了我的映射如下。但是这段代码并没有帮助我。它不是合并所有集合，而是仅映射最后一个 (UnreportedDrivers) 覆盖顶部的集合。

```
AutoMapper.Mapper.CreateMap<ServiceModel.MacReconciliationResponse, MacProcessContext>()
                .ForMember(destination => destination.Drivers, source => source.MapFrom(s => s.OtherDrivers))
                .ForMember(destination => destination.Drivers, source => source.MapFrom(s => s.LendingLossDrivers))
                .ForMember(destination => destination.Drivers, source => source.MapFrom(s => s.UnreportedDrivers)); 
```

请在这种情况下帮助我。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T12:48:01.427

我只想在一次调用`.Concat`中映射您想要映射的每个列表：`.ForMember`

```
Mapper.CreateMap<Source, Destination>()
    .ForMember(dest => dest.Drivers, opt => opt.MapFrom(src => src.LendingLossDrivers
        .Concat(src.OtherDrivers)
        .Concat(src.UnreportedDrivers))); 
```

# vb.net - 引擎盖下的 OpenFileDialog

> ID：10816050
> 
> 赞同：-1
> 
> 时间：2012-05-30T12:13:12.423
> 
> 标签：vb.net, openfiledialog

这是我在这里的第一个问题，因为我最终陷入了死胡同。我正在使用 ZIP 2 Secure EXE（来自 Chilkat 的非常好的软件）为应用程序创建 setup.exe。ZIP 2 Secure EXE 可以在没有带有一个或多个参数的 GUI 的情况下运行。
问题是，当我调用 ZIP 2 Secure EXE (ChilkatZipSE.exe) 而不使用 OpenFileDialog 表单来确定 ChilkatZipSE.exe 的位置时，它不会使用 System.Diagnostics.Process 类运行进程。我调用 ChilkatZipSE.exe 的方式是“..\ChilkatZipSE.exe -cfg settings.xml”。settings.xml 一切正常，并且有创建 setup.exe 文件所需的 UnlockCode 节点。当我使用 OpenFileDialog ChilkatZipSE.exe 创建所需的 setup.exe 并且它工作正常。
贝娄是我使用的代码：

```
Private Sub btnStartApp_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnStartApp.Click

    If txtExtAppPath.Text.Length > 0 AndAlso System.IO.File.Exists(txtExtAppPath.Text) Then

        Dim myFile As New FileInfo(txtExtAppPath.Text)
        txtExtAppLog.Text = StartApplication(myFile.FullName, txtExtParams.Text, chkIsHidden.Checked)
        'txtExtAppLog.Text = StartApplication(txtExtAppPath.Text, txtExtParams.Text, chkIsHidden.Checked)

    End If

End Sub

Public Function StartApplication(ByVal fileFullPath_ As String, ByVal fileParameter_ As String, ByVal isHidden_ As Boolean) As String

    Dim lassie As String = String.Empty

    Try

        Dim newProcess As New ProcessStartInfo()
        newProcess.FileName = fileFullPath_
        newProcess.Arguments = fileParameter_
        If isHidden_ Then newProcess.WindowStyle = ProcessWindowStyle.Hidden

        If System.IO.File.Exists(fileFullPath_) Then

            Using startedNewProcess As Process = Process.Start(newProcess)
                'startedNewProcess.EnableRaisingEvents = True
                startedNewProcess.WaitForExit()
            End Using

        Else

            lassie = "File " + fileFullPath_ + " doesn't exist."

        End If

    Catch ex As Exception

        lassie = ex.Message

    End Try

    Return lassie

End Function 
```

谢谢，万能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-06-17T22:26:30.267

问题是给定的参数。使用 OpenFileDialog 时，它知道 settings.xml 的位置。但是在没有 OpenFileDialog 的情况下调用“..\ChilkatZipSE.exe -cfg settings.xml”时，它必须用作“..\ChilkatZipSE.exe -cfg ..\settings.xml”

# xml - 在linq查询WP7中格式化日期

> ID：10816051
> 
> 赞同：-1
> 
> 时间：2012-05-30T12:13:15.000
> 
> 标签：xml, linq, windows-phone-7

我有一个 linq 查询显示如下

```
 XDocument data = XDocument.Parse(xml);

            var persons = from query in data.Descendants("Table")
                          select new MailList
                          {
                              Sender = (string)query.Element("FromUser"),
                              Body = (string)query.Element("Message"),

                              Date = (string)query.Element("mDate"),
                              Time = (string)query.Element("mTime"),

                          };
            EmailList.ItemsSource = persons; 
```

我想将日期格式化为“MM/yy”，将时间格式化为“hh:mm”谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T21:16:31.973

您不能将 Direct Cast 与 a 一起使用，`DateTime`因为它是一种值类型。使用正常的演员表，但要注意`FormatException`如果日期格式不正确。

```
var persons = from query in data.Descendants("Table")
          select new MailList
          {
              Sender = (string)query.Element("FromUser"),
              Body = (string)query.Element("Message"),
              Date = ((DateTime)query.Element("mDate")).ToString("MM/yy"),
              Time = ((DateTime)query.Element("mTime")).ToString("hh:mm"),

          }; 
```

# c - C 函数意外更改值

> ID：10816052
> 
> 赞同：2
> 
> 时间：2012-05-30T12:13:17.210
> 
> 标签：c, ncurses

我有一个奇怪的问题，谷歌和 SO 搜索无法解决。这可能是非常简单的事情，但我已经折腾了几个小时，无法弄清楚。

我正在使用 Ncurses（使用 Ubuntu）在 C 中制作俄罗斯方块。

我的主函数调用一个 updatePiece() 函数，传入一个指向跟踪活动片段状态的结构的指针，以及键盘输入缓冲区。

结构：

```
struct piece {                                                                  
    struct coords pos;                                                          
    char currentMap[4][MAPSIZEX][MAPSIZEY];                                     
    int type;                                                                   
    int rotation;                                                               
    int leftColumn;                                                             
    int rightColumn;                                                            
    int bottomRow;                                                              
}; 
```

更新片功能：

```
void updatePiece(struct piece* piece, int input) {                              
    switch(input) {                                                             
        case KEY_UP:                                                            
            ++piece->rotation;                                                  
            if(piece->rotation == 4)                                            
                piece->rotation = 0;                                            
            getBoundary(piece);                                                 
            break;                                                              
        case KEY_RIGHT:                                                         
            if(piece->pos.x + piece->rightColumn != WELLSIZEX)                  
                ++piece->pos.x;                                                 
            break;                                                              
        case KEY_LEFT:                                                          
            if(piece->pos.x + piece->leftColumn != 0)                           
                --piece->pos.x;                                                 
            break;                                                              
        case 'p':                                                               
            ++piece->type;                                                      
            selectMap(piece);                                                   
            getBoundary(piece);                                                 
            break;                                                              
    }                                                                           

    if(piece->pos.y + piece->bottomRow >= WELLSIZEY)                            
        piece->pos.y = 0;                                                       
    ++piece->pos.y;                                                             
} 
```

很酷，所以该函数可以移动棋子、旋转等。一旦当前棋子变为“死”等，我最终将使用 rand() 来选择一个新棋子，但现在我正在检测“p”正在输入和使用它来随意增加计数器。

然而，这件作品似乎只会旋转一次。使用 mvprintw() 告诉我 piece->type 的内容似乎没有改变。

所以我跳入 gdb 以了解发生了什么。一开始一切都很顺利；在标准输入检测到“p”，piece->type 确实增加了，然后调用 selectMap() 函数。这就是有趣的事情发生的地方。

```
void selectMap(struct piece* piece) {                                           
    switch(piece->type) {                                                       
        // T Piece                                                              
        case 0:                                                                 
            strcpy(piece->currentMap[0][0], "....");                            
            strcpy(piece->currentMap[0][1], ".X..");                            
            strcpy(piece->currentMap[0][2], "XXX.");                            
            strcpy(piece->currentMap[0][3], "....");                            
            strcpy(piece->currentMap[1][0], "....");                            
            strcpy(piece->currentMap[1][1], ".X..");                            
            strcpy(piece->currentMap[1][2], ".XX.");                            
            strcpy(piece->currentMap[1][3], ".X..");                            
            strcpy(piece->currentMap[2][0], "....");                            
            strcpy(piece->currentMap[2][1], "....");                            
            strcpy(piece->currentMap[2][2], "XXX.");                            
            strcpy(piece->currentMap[2][3], ".X..");                            
            strcpy(piece->currentMap[3][0], "....");                            
            strcpy(piece->currentMap[3][1], ".X..");                            
            strcpy(piece->currentMap[3][2], "XX..");                            
            strcpy(piece->currentMap[3][3], ".X..");                            
            return;                                                             
        // J Piece                                                               
        case 1:                                                                 
            strcpy(piece->currentMap[0][0], "....");                            
            strcpy(piece->currentMap[0][1], ".X..");                            
            strcpy(piece->currentMap[0][2], ".X..");                            
            strcpy(piece->currentMap[0][3], "XX..");                            
            strcpy(piece->currentMap[1][0], "....");                            
            strcpy(piece->currentMap[1][1], "X...");                            
            strcpy(piece->currentMap[1][2], "XXX.");                            
            strcpy(piece->currentMap[1][3], "....");                            
            strcpy(piece->currentMap[2][0], "....");                            
            strcpy(piece->currentMap[2][1], ".XX.");                            
            strcpy(piece->currentMap[2][2], ".X..");                            
            strcpy(piece->currentMap[2][3], ".X..");                            
            strcpy(piece->currentMap[3][0], "....");                            
            strcpy(piece->currentMap[3][1], "....");                            
            strcpy(piece->currentMap[3][2], "XXX.");                            
            strcpy(piece->currentMap[3][3], "..X.");                            
            return;   

           <REST OF FUNCTION OMITTED>
    }
} 
```

该函数更改 currentPiece 字符数组以匹配当前片段类型。一切都复制得很好，但只要函数退出，piece->type 就会设置为 0。

我不知道为什么。Piece 是通过引用传递的，所以它不应该是范围问题。使用开关或一堆 if/else 无效。使用 break 或 return 无效。

这可能是一件非常简单和愚蠢的事情，但作为一个自学成才的程序员，这让我很难过。

任何帮助表示赞赏。整个代码如下（欢迎批评！）：

```
#include <ncurses.h>
#include <stdlib.h>
#include <string.h>

#define WELLSIZEX 10
#define WELLSIZEY 20
#define MAPSIZEX  4
#define MAPSIZEY  4
#define DELAY     100000

struct coords {
    int x;
    int y;
};

struct piece {
    struct coords pos;
    char currentMap[4][MAPSIZEX][MAPSIZEY];
    int type;
    int rotation;
    int leftColumn;
    int rightColumn;
    int bottomRow;
};

void selectMap(struct piece* piece) {
    switch(piece->type) {
        // T Piece
        case 0:
            strcpy(piece->currentMap[0][0], "....");
            strcpy(piece->currentMap[0][1], ".X..");
            strcpy(piece->currentMap[0][2], "XXX.");
            strcpy(piece->currentMap[0][3], "....");
            strcpy(piece->currentMap[1][0], "....");
            strcpy(piece->currentMap[1][1], ".X..");
            strcpy(piece->currentMap[1][2], ".XX.");
            strcpy(piece->currentMap[1][3], ".X..");
            strcpy(piece->currentMap[2][0], "....");
            strcpy(piece->currentMap[2][1], "....");
            strcpy(piece->currentMap[2][2], "XXX.");
            strcpy(piece->currentMap[2][3], ".X..");
            strcpy(piece->currentMap[3][0], "....");
            strcpy(piece->currentMap[3][1], ".X..");
            strcpy(piece->currentMap[3][2], "XX..");
            strcpy(piece->currentMap[3][3], ".X..");
            return;
        // J Piece
        case 1:
            strcpy(piece->currentMap[0][0], "....");
            strcpy(piece->currentMap[0][1], ".X..");
            strcpy(piece->currentMap[0][2], ".X..");
            strcpy(piece->currentMap[0][3], "XX..");
            strcpy(piece->currentMap[1][0], "....");
            strcpy(piece->currentMap[1][1], "X...");
            strcpy(piece->currentMap[1][2], "XXX.");
            strcpy(piece->currentMap[1][3], "....");
            strcpy(piece->currentMap[2][0], "....");
            strcpy(piece->currentMap[2][1], ".XX.");
            strcpy(piece->currentMap[2][2], ".X..");
            strcpy(piece->currentMap[2][3], ".X..");
            strcpy(piece->currentMap[3][0], "....");
            strcpy(piece->currentMap[3][1], "....");
            strcpy(piece->currentMap[3][2], "XXX.");
            strcpy(piece->currentMap[3][3], "..X.");
            return;
        // L Piece
        case 2:
            strcpy(piece->currentMap[0][0], "....");
            strcpy(piece->currentMap[0][1], ".X..");
            strcpy(piece->currentMap[0][2], ".X..");
            strcpy(piece->currentMap[0][3], ".XX.");
            strcpy(piece->currentMap[1][0], "....");
            strcpy(piece->currentMap[1][1], "....");
            strcpy(piece->currentMap[1][2], "XXX.");
            strcpy(piece->currentMap[1][3], "X...");
            strcpy(piece->currentMap[2][0], "....");
            strcpy(piece->currentMap[2][1], "XX..");
            strcpy(piece->currentMap[2][2], ".X..");
            strcpy(piece->currentMap[2][3], ".X..");
            strcpy(piece->currentMap[3][0], "....");
            strcpy(piece->currentMap[3][1], "..X.");
            strcpy(piece->currentMap[3][2], "XXX.");
            strcpy(piece->currentMap[3][3], "....");
            return;
        // O Piece  
        case 3:
            strcpy(piece->currentMap[0][0], "....");
            strcpy(piece->currentMap[0][1], ".XX.");
            strcpy(piece->currentMap[0][2], ".XX.");
            strcpy(piece->currentMap[0][3], "....");
            strcpy(piece->currentMap[1][0], "....");
            strcpy(piece->currentMap[1][1], ".XX.");
            strcpy(piece->currentMap[1][2], ".XX.");
            strcpy(piece->currentMap[1][3], "....");
            strcpy(piece->currentMap[2][0], "....");
            strcpy(piece->currentMap[2][1], ".XX.");
            strcpy(piece->currentMap[2][2], ".XX.");
            strcpy(piece->currentMap[2][3], "....");
            strcpy(piece->currentMap[3][0], "....");
            strcpy(piece->currentMap[3][1], ".XX.");
            strcpy(piece->currentMap[3][2], ".XX.");
            strcpy(piece->currentMap[3][3], "....");
            return;
        // I Piece
        case 4:
            strcpy(piece->currentMap[0][0], ".X..");
            strcpy(piece->currentMap[0][1], ".X..");
            strcpy(piece->currentMap[0][2], ".X..");
            strcpy(piece->currentMap[0][3], ".X..");
            strcpy(piece->currentMap[1][0], "....");
            strcpy(piece->currentMap[1][1], "....");
            strcpy(piece->currentMap[1][2], "XXXX");
            strcpy(piece->currentMap[1][3], "....");
            strcpy(piece->currentMap[2][0], ".X..");
            strcpy(piece->currentMap[2][1], ".X..");
            strcpy(piece->currentMap[2][2], ".X..");
            strcpy(piece->currentMap[2][3], ".X..");
            strcpy(piece->currentMap[3][0], "....");
            strcpy(piece->currentMap[3][1], "....");
            strcpy(piece->currentMap[3][2], "XXXX");
            strcpy(piece->currentMap[3][3], "....");
            return;
        // S Piece
        case 5:
            strcpy(piece->currentMap[0][0], "....");
            strcpy(piece->currentMap[0][1], ".XX.");
            strcpy(piece->currentMap[0][2], "XX..");
            strcpy(piece->currentMap[0][3], "....");
            strcpy(piece->currentMap[1][0], "....");
            strcpy(piece->currentMap[1][1], "X...");
            strcpy(piece->currentMap[1][2], "XX..");
            strcpy(piece->currentMap[1][3], ".X..");
            strcpy(piece->currentMap[2][0], "....");
            strcpy(piece->currentMap[2][1], ".XX.");
            strcpy(piece->currentMap[2][2], "XX..");
            strcpy(piece->currentMap[2][3], "....");
            strcpy(piece->currentMap[3][0], "....");
            strcpy(piece->currentMap[3][1], "X...");
            strcpy(piece->currentMap[3][2], "XX..");
            strcpy(piece->currentMap[3][3], ".X..");
            return;
        // Z Piece
        case 6:
            strcpy(piece->currentMap[0][0], "....");
            strcpy(piece->currentMap[0][1], "XX..");
            strcpy(piece->currentMap[0][2], ".XX.");
            strcpy(piece->currentMap[0][3], "....");
            strcpy(piece->currentMap[1][0], "....");
            strcpy(piece->currentMap[1][1], ".X..");
            strcpy(piece->currentMap[1][2], "XX..");
            strcpy(piece->currentMap[1][3], "X...");
            strcpy(piece->currentMap[2][0], "....");
            strcpy(piece->currentMap[2][1], "XX..");
            strcpy(piece->currentMap[2][2], ".XX.");
            strcpy(piece->currentMap[2][3], "....");
            strcpy(piece->currentMap[3][0], "....");
            strcpy(piece->currentMap[3][1], ".X..");
            strcpy(piece->currentMap[3][2], "XX..");
            strcpy(piece->currentMap[3][3], "X...");
            return;
        }
/*
        if(piece->type == 0) {
            strcpy(piece->currentMap[0][0], "....");
            strcpy(piece->currentMap[0][1], ".X..");
            strcpy(piece->currentMap[0][2], "XXX.");
            strcpy(piece->currentMap[0][3], "....");
            strcpy(piece->currentMap[1][0], "....");
            strcpy(piece->currentMap[1][1], ".X..");
            strcpy(piece->currentMap[1][2], ".XX.");
            strcpy(piece->currentMap[1][3], ".X..");
            strcpy(piece->currentMap[2][0], "....");
            strcpy(piece->currentMap[2][1], "....");
            strcpy(piece->currentMap[2][2], "XXX.");
            strcpy(piece->currentMap[2][3], ".X..");
            strcpy(piece->currentMap[3][0], "....");
            strcpy(piece->currentMap[3][1], ".X..");
            strcpy(piece->currentMap[3][2], "XX..");
            strcpy(piece->currentMap[3][3], ".X..");
        }
        if(piece->type == 1) {
            strcpy(piece->currentMap[0][0], "....");
            strcpy(piece->currentMap[0][1], ".X..");
            strcpy(piece->currentMap[0][2], ".X..");
            strcpy(piece->currentMap[0][3], "XX..");
            strcpy(piece->currentMap[1][0], "....");
            strcpy(piece->currentMap[1][1], "X...");
            strcpy(piece->currentMap[1][2], "XXX.");
            strcpy(piece->currentMap[1][3], "....");
            strcpy(piece->currentMap[2][0], "....");
            strcpy(piece->currentMap[2][1], ".XX.");
            strcpy(piece->currentMap[2][2], ".X..");
            strcpy(piece->currentMap[2][3], ".X..");
            strcpy(piece->currentMap[3][0], "....");
            strcpy(piece->currentMap[3][1], "....");
            strcpy(piece->currentMap[3][2], "XXX.");
            strcpy(piece->currentMap[3][3], "..X.");
        }
*/

}

void inits(struct piece* piece, char wellMap[WELLSIZEX][WELLSIZEY]) {
    piece->pos.x = piece->pos.y = 1;
    piece->rotation = 0;
    piece->type = 0;
    piece->leftColumn = 0;
    piece->rightColumn = 2;
    piece->bottomRow = 2;

    selectMap(piece);

    int x, y;
    for(y = 0; y < WELLSIZEY; ++y)
        for(x = 0; x < WELLSIZEX; ++x)
            wellMap[x][y] = '.';
}

void getBoundary(struct piece* piece) {
    // T Piece 
    if(piece->type == 0) {
        if(piece->rotation == 0) {
            piece->leftColumn = 0;
            piece->rightColumn = 2;
            piece->bottomRow = 2;
            return;
        }
        if(piece->rotation == 1) {
            piece->leftColumn = 1;
            piece->rightColumn = 2;
            piece->bottomRow = 3;
            return;
        }
        if(piece->rotation == 2) {
            piece->leftColumn = 0;
            piece->rightColumn = 2;
            piece->bottomRow = 3;
            return;
        }
        if(piece->rotation == 3) {
            piece->leftColumn = 0;
            piece->rightColumn = 1;
            piece->bottomRow = 3;
            return;
        }
    }
    // J Piece
    if(piece->type == 1) {
        if(piece->rotation == 0) {
            piece->leftColumn = 0;
            piece->rightColumn = 1;
            piece->bottomRow = 3;
            return;
        }
        if(piece->rotation == 1) {
            piece->leftColumn = 0;
            piece->rightColumn = 2;
            piece->bottomRow = 2;
            return;
        }
        if(piece->rotation == 2) {
            piece->leftColumn = 1;
            piece->rightColumn = 2;
            piece->bottomRow = 3;
            return;
        }
        if(piece->rotation == 3) {
            piece->leftColumn = 0;
            piece->rightColumn = 2;
            piece->bottomRow = 3;
            return;
        }
    }
    // L Piece
    if(piece->type == 2) { 
        if(piece->rotation == 0) {
            piece->leftColumn = 1;
            piece->rightColumn = 2;
            piece->bottomRow = 3;
            return;
        }
        if(piece->rotation == 1) {
            piece->leftColumn = 0;
            piece->rightColumn = 2;
            piece->bottomRow = 3;
            return;
        }
        if(piece->rotation == 2) {
            piece->leftColumn = 0;
            piece->rightColumn = 1;
            piece->bottomRow = 3;
            return;
        }
        if(piece->rotation == 3) {
            piece->leftColumn = 0;
            piece->rightColumn = 2;
            piece->bottomRow = 2;
            return;
        }
    }
    // O Piece
    if(piece->type == 3) {
        piece->leftColumn = 1;
        piece->rightColumn = 2;
        piece->bottomRow = 2;
        return;
    }
    // I Piece
    if(piece->type == 4) {
        if(piece->rotation == 0 || piece->rotation == 2) {
            piece->leftColumn = 1;
            piece->rightColumn = 1;
            piece->bottomRow = 3;
            return;
        }
        if(piece->rotation == 1 || piece->rotation == 3) {
            piece->leftColumn = 0;
            piece->rightColumn = 3;
            piece->bottomRow = 2;
            return;
        }
    }
    // S/Z Piece
    if(piece->type == 5 || piece->type == 6) {
        if(piece->rotation == 0 || piece->rotation == 2) {
            piece->leftColumn = 0;
            piece->rightColumn = 2;
            piece->bottomRow = 2;
            return;
        }
        if(piece->rotation == 1 || piece->rotation == 3) {
            piece->leftColumn = 0;
            piece->rightColumn = 1;
            piece->bottomRow = 3;
            return;
        }
    }
}

void updatePiece(struct piece* piece, int input) {
    switch(input) {
        case KEY_UP:
            ++piece->rotation;
            if(piece->rotation == 4)
                piece->rotation = 0;
            getBoundary(piece);
            break;
        case KEY_RIGHT:
            if(piece->pos.x + piece->rightColumn != WELLSIZEX)
                ++piece->pos.x;
            break;
        case KEY_LEFT:
            if(piece->pos.x + piece->leftColumn != 0)
                --piece->pos.x;
            break;
        case 'p':
            ++piece->type;
            selectMap(piece);
            getBoundary(piece);
            break;
    }

    if(piece->pos.y + piece->bottomRow >= WELLSIZEY)
        piece->pos.y = 0;
    ++piece->pos.y;
}

void drawWell(char wellMap[WELLSIZEX][WELLSIZEY]) {
    int y, x;
    for(y = 0; y < WELLSIZEY; ++y)
        for(x = 0; x < WELLSIZEX; ++x)
            mvaddch(y, x, wellMap[x][y]);

    for(y = 0; y < WELLSIZEY; ++y) {
        mvaddch(y,         0, '|');
        mvaddch(y, WELLSIZEX, '|');
    }

    for(x = 0; x <= WELLSIZEX; ++x) {
        mvaddch(        0, x, '-');
        mvaddch(WELLSIZEY, x, '-');
    }
}

void drawPiece(struct piece piece) {
    int x, y;
    for(y = 0; y < MAPSIZEY; ++y)
        for(x = 0; x < MAPSIZEX; ++x)
            mvaddch(piece.pos.y + y, piece.pos.x + x, piece.currentMap[piece.rotation][y][x]);
}

int main(void) {
    struct piece piece;
    char wellMap[WELLSIZEX][WELLSIZEY];

    initscr();
    cbreak();
    curs_set(FALSE);
    nodelay(stdscr, TRUE);
    keypad(stdscr, TRUE);

    inits(&piece, wellMap);
    while(1) {
        clear();
        /*
        if(isCollision) {
            blit();
            getNewPiece();
            piece.pos.y = 0;
            piece.pos.x = 3;
        }
        */
        updatePiece(&piece, getch());
        drawWell(wellMap);
        drawPiece(piece);
        mvprintw(2, 12, "l %d / dn %d / r %d / pce %d / rot %d",
                 piece.leftColumn, piece.bottomRow, piece.rightColumn,
                 piece.type, piece.rotation);
        refresh();
        usleep(DELAY);
    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-30T12:20:01.553

您正在使用

```
char currentMap[4][MAPSIZEX][MAPSIZEY]; 
```

场地。

同时你在做

```
strcpy(piece->currentMap[0][0], "...."); 
```

和类似的东西。

由于零终止符，strcpy() 实际上写入了 5 个（不是 4 个）字节。

由于您在 currentMap 之后有“type”字段，因此您在那里得到零（“type”中的第一个字节被覆盖）。

将 memcpy() 用于 piece->currentMap[i][j] 或分配超过 4 个字节。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T12:22:04.173

`MAPSIZEY`是`4`，但是您将 5 个字符复制到每个数组中（复制字符串`".X.."`并`strcpy()`复制您可以看到的四个字符加上空终止符）。

最后一个空终止符很可能会覆盖`type`值的第一个字节，并且如果您有一个小端机器，它将最低有效字节设置`type`为零。

# javascript - 通过 append() 添加的 jquery img 触发两次 onload

> ID：10816053
> 
> 赞同：6
> 
> 时间：2012-05-30T12:13:19.130
> 
> 标签：javascript, jquery, append, image, onload

让我头疼的代码很简单：

```
$(function(){ 
$("#test").append('<img onload="alert(\'hi\')" src="Image.jpg"/>');
}) 
```

我脑子里有上面的代码，正文中有一个 id 为“test”的 div。现在我的问题是页面在加载图像时会产生两个警报，但我希望它只产生一个警报，因为“onload”应该只触发一次 - 当我手动添加图像而没有任何 javascript 时发生的方式..
请参阅我在以下位置制作的小提琴：http: [//jsfiddle.net/9985N/](http://jsfiddle.net/9985N/)

非常感谢任何帮助/解释...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-30T12:38:21.530

> 已更新（因为有些人不相信我，哈哈）

因为`.append`首先创建节点，然后将其移动到适当的位置。尝试先添加元素，然后添加其属性，如下所示：

```
$(function() {
    $("#test").append(
        $("<img />").attr({
            src: "http://upload.wikimedia.org/wikipedia/commons/thumb/1/1a/Bachalpseeflowers.jpg/300px-Bachalpseeflowers.jpg",
            onload: "alert(\'hi\')"
        })
    );
}); 
```

我的回答并没有“避免”这个问题，而是非常直接地回答了这个问题。如果您以未压缩格式打开 jQuery.js 文件，您可以清楚地看到它在文档上`.append`创建了第一次调用事件时的位置，然后将其放置到再次调用时的位置。也许 shift 是错误的词，请原谅我，因为词汇不是我的强项。但是，如果您遵循代码，您会看到它的创建和移动，但是对于再次使用 append 来移动它并没有说同样的话，因为节点已经创建，它只是从一个元素移动到另一个元素而没有重新加载。正如我所说，不确定最好的术语，但在[jQuery.js](http://code.jquery.com/jquery-1.7.2.js)上很容易理解。`node``onload``shifts`

不相信我？刚刚在 MSIE9、FF12 和 GoogleChrome20 中测试了以下[小提琴，出现了 0 个问题。](http://jsfiddle.net/SpYk3/uGraS/)

# [***jsFiddle***](http://jsfiddle.net/SpYk3/uGraS/)

仅供参考，这并不是一种可怕的做法，但我看到人们一直在用 jQuery 编写整行 HTML，这违背了目的。这是一个图书馆，有很多书可以故意阅读。有时，完整的 HTML 行可能看起来更容易，但它可能不会更快，因为它没有遵循为您完成的所有出色的布局工作。这个想法是“少写，多做”，这包括 HTML。毕竟，如果您要编写整行 HTML，那么当您可以只用 PHP 编写它时，为什么还要使用 jQuery！？:P 只是一个想法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T12:43:42.993

或这个：

```
var img = $('<img src="http://upload.wikimedia.org/wikipedia/commons/thumb/1/1a/Bachalpseeflowers.jpg/300px-Bachalpseeflowers.jpg"/>').on('load', function(){
    $('#test').append(img);
    alert('loaded');  
}); 
```

# asp.net - 网站部署软件

> ID：10816055
> 
> 赞同：0
> 
> 时间：2012-05-30T12:13:23.187
> 
> 标签：asp.net, deployment, iis-6

我为一家拥有多层网站的公司工作。因此，我们有几个前端站点与多个后端 Web 服务进行通信。所有这些都在多台服务器之间进行负载平衡，并托管在 IIS 6.0 中。

当我们发布新版本时，我们需要将多个站点从临时环境复制到实时 Web 服务器上的预发布版本。任何版本中部署的站点的数量和类型可能会有所不同。当前使用 robocopy 脚本/bat 文件来执行此操作。哪个有效，但容易出错且难以维护。

有没有人有任何可以帮助我们完成这项任务的好的、最好是开源的部署软件的经验？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T12:18:49.630

我会使用 PowerShell 及其[WebAdministration](http://technet.microsoft.com/en-us/library/ee790599.aspx)模块。还可以在此处查看 Scott Hanselman 的[文章](http://www.hanselman.com/blog/WebDeploymentMadeAwesomeIfYoureUsingXCopyYoureDoingItWrong.aspx)，其中他解释了 WebDeploy 打包和部署解决方案（也在[Channel9](http://channel9.msdn.com/Events/MIX/MIX10/FT14)上）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T12:26:18.443

我们使用持续集成服务器和[Web Deploy](http://www.iis.net/download/WebDeploy)。唯一的手动步骤是触发 CI 服务器中的构建。

我们使用[TeamCity](http://www.jetbrains.com/teamcity/)，它有一个有限的免费版本。[CruiseControl.NET](http://sourceforge.net/projects/ccnet/)是一个开源 CI 服务器，但配置不如 TeamCity。

以下是有关设置 TeamCity 进行部署的几篇文章：

*   [http://www.diaryofaninja.com/blog/2010/05/09/automated-site-deployments-with-teamcity-deployment-projects-amp-svn](http://www.diaryofaninja.com/blog/2010/05/09/automated-site-deployments-with-teamcity-deployment-projects-amp-svn)
*   [http://www.troyhunt.com/2010/11/you-deploying-it-wrong-teamcity_26.html](http://www.troyhunt.com/2010/11/you-deploying-it-wrong-teamcity_26.html)

# javascript - 如何在 Javascript/Jquery 中解决这个复杂的 if 语句？

> ID：10816062
> 
> 赞同：0
> 
> 时间：2012-05-30T12:13:51.817
> 
> 标签：javascript, jquery, if-statement

我需要从函数中排除元素并且正在努力使用 if 子句......

我可以有四种类型的元素和三个属性

```
 A                  B               C          D
-----------------------------------------------------------------
"external"   undefined     boolean/undefined   boolean     boolean
"wrapper"    boolean       undefined           boolean     undefined
"parent"     1             0                   1          1 
```

我需要构造一个只允许**A**和**B**通过的 if 子句，我快疯了……

这是我所拥有的：

```
// "from" is my element to check
if ( 
   ( typeof from.jqmData("external-page") == "undefined" 
            && from.parents('body').length == 1 ) 
     || 
   ( typeof from.jqmData("external-page") == "boolean" 
             && from.parents('body').length == 0 )
   ) {
     // do something    
     } 
```

有人可以帮助我并让我走上正轨吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T12:21:33.827

这会起作用吗：

```
if (from.parents('body').length === 0 || typeof from.jqmData('external-page') === 'undefined') {
    // do something
} 
```

# javascript - 展开一个 div 以覆盖另一个 div

> ID：10816071
> 
> 赞同：3
> 
> 时间：2012-05-30T12:14:37.073
> 
> 标签：javascript, jquery, css

我在悬停时使用 jQuery 扩展 div，使其覆盖页面的整个宽度。它包含一个大表，我需要为低分辨率构建，但实际上每个人都有更高的分辨率，所以这是一个公认的解决方法。我的问题是 div 会“跳”到其他 div 下方，而不是像我希望的那样覆盖它们。任何人都知道如何实现这一目标？

我已经创建了它的 jsfiddle，所以你明白了主要思想：http: [//jsfiddle.net/MRNxt/1/](http://jsfiddle.net/MRNxt/1/)

将灰色框悬停并使其向右扩展，覆盖边栏中的#asd2，而不是在其下方。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T12:21:20.143

检查这个小提琴：http: [//jsfiddle.net/MRNxt/4/](http://jsfiddle.net/MRNxt/4/)

该解决方案涉及在展开时向日志 div 添加绝对定位，并在折叠时将其取出。还包括一个小修复，以避免在制作动画时闪烁。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T12:21:03.097

添加这个CSS：

```
#asd2{
 position:absolute;
 z-index:-1;        
}
#log{
    background:white;
} 
```

示例：http: [//jsfiddle.net/MRNxt/2/](http://jsfiddle.net/MRNxt/2/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T12:22:50.383

是否有理由不适合使用灯箱/厚箱之类的东西？

或者，您将需要使用绝对定位和 z-index。我建议在制作动画之前弄清楚你的理想布局。把它放在 CSSEdit/Firebug/whatever 中，这样你的盒子就在你想要的地方，然后添加到动画脚本中就很简单了。

或者只是使用现成的灯箱。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-30T12:28:53.330

这不会是完美的答案：

[http://jsfiddle.net/MRNxt/7/](http://jsfiddle.net/MRNxt/7/)

但在这里我使用了一个 subContainer 来让你拥有 100% 的宽度和一些边框。

# angularjs - 如何在 AngularJS 中进行分页？

> ID：10816073
> 
> 赞同：257
> 
> 时间：2012-05-30T12:14:38.670
> 
> 标签：angularjs, pagination

我在内存中有一个大约 1000 个项目的数据集，并且正在尝试为此数据集创建一个寻呼机，但我不确定如何执行此操作。

我正在使用自定义过滤器功能来过滤结果，并且效果很好，但是我需要以某种方式获取页数。

有什么线索吗？

* * *

## 回答 #1

> 赞同：288
> 
> 时间：2013-07-24T15:24:06.953

# Angular UI Bootstrap - 分页指令

查看[UI Bootstrap](http://angular-ui.github.io/bootstrap/)的[分页指令](https://github.com/angular-ui/bootstrap/tree/master/src/pagination)。我最终使用了它，而不是这里发布的内容，因为它有足够的功能供我当前使用，并且有一个[完整的测试规范](https://github.com/angular-ui/bootstrap/blob/master/src/pagination/test/pagination.spec.js)来陪伴它。

## 看法

```
<!-- table here -->

<pagination 
  ng-model="currentPage"
  total-items="todos.length"
  max-size="maxSize"  
  boundary-links="true">
</pagination>

<!-- items/page select here if you like --> 
```

## 控制器

```
todos.controller("TodoController", function($scope) {
   $scope.filteredTodos = []
  ,$scope.currentPage = 1
  ,$scope.numPerPage = 10
  ,$scope.maxSize = 5;

  $scope.makeTodos = function() {
    $scope.todos = [];
    for (i=1;i<=1000;i++) {
      $scope.todos.push({ text:"todo "+i, done:false});
    }
  };
  $scope.makeTodos(); 

  $scope.$watch("currentPage + numPerPage", function() {
    var begin = (($scope.currentPage - 1) * $scope.numPerPage)
    , end = begin + $scope.numPerPage;

    $scope.filteredTodos = $scope.todos.slice(begin, end);
  });
}); 
```

我做了一个[工作的plunker](http://plnkr.co/edit/81fPZxpnOQnIHQgp957q?p=preview)供参考。

* * *

# 旧版：

## 看法

```
<!-- table here -->

<div data-pagination="" data-num-pages="numPages()" 
  data-current-page="currentPage" data-max-size="maxSize"  
  data-boundary-links="true"></div>

<!-- items/page select here if you like --> 
```

## 控制器

```
todos.controller("TodoController", function($scope) {
   $scope.filteredTodos = []
  ,$scope.currentPage = 1
  ,$scope.numPerPage = 10
  ,$scope.maxSize = 5;

  $scope.makeTodos = function() {
    $scope.todos = [];
    for (i=1;i<=1000;i++) {
      $scope.todos.push({ text:"todo "+i, done:false});
    }
  };
  $scope.makeTodos(); 

  $scope.numPages = function () {
    return Math.ceil($scope.todos.length / $scope.numPerPage);
  };

  $scope.$watch("currentPage + numPerPage", function() {
    var begin = (($scope.currentPage - 1) * $scope.numPerPage)
    , end = begin + $scope.numPerPage;

    $scope.filteredTodos = $scope.todos.slice(begin, end);
  });
}); 
```

我做了一个[工作的plunker](http://plnkr.co/edit/6PFCPuFrN6lfGHjHVwGf?p=preview)供参考。

* * *

## 回答 #2

> 赞同：88
> 
> 时间：2012-06-01T23:26:11.293

我最近为 Built with Angular 网站实现了分页。您可以查看源代码：[https ://github.com/angular/builtwith.angularjs.org](https://github.com/angular/builtwith.angularjs.org)

我会避免使用过滤器来分隔页面。您应该将项目分解为控制器内的页面。

* * *

## 回答 #3

> 赞同：78
> 
> 时间：2014-05-10T07:24:44.377

我不得不多次使用 Angular 实现分页，对于我觉得可以简化的东西总是有点痛苦。我使用了这里和其他地方提出的一些想法来制作一个分页模块，使分页变得简单：

```
<ul>
    <li dir-paginate="item in items | itemsPerPage: 10">{{ item }}</li>
</ul>

// then somewhere else on the page ....

<dir-pagination-controls></dir-pagination-controls> 
```

就是这样。它具有以下特点：

*   控制器中不需要自定义代码来将集合绑定`items`到分页链接。
*   您不必使用表格或网格视图 - 您可以对任何可以重复的内容进行分页！
*   委托给`ng-repeat`，因此您可以使用任何可以在 中有效使用的表达式`ng-repeat`，包括过滤、排序等。
*   跨控制器工作 -`pagination-controls`指令不需要知道任何关于`paginate`调用指令的上下文的信息。

## 演示：[http ://plnkr.co/edit/Wtkv71LIqUR4OhzhgpqL?p=preview](http://plnkr.co/edit/Wtkv71LIqUR4OhzhgpqL?p=preview)

对于那些正在寻找“即插即用”解决方案的人，我认为您会发现这很有用。

## 代码

该代码可在 GitHub 上找到，其中包含一组相当不错的测试：

[https://github.com/michaelbromley/angularUtils/tree/master/src/directives/pagination](https://github.com/michaelbromley/angularUtils/tree/master/src/directives/pagination)

如果您有兴趣，我还写了一篇简短的文章，对模块的设计有更深入的了解：http: [//www.michaelbromley.co.uk/blog/108/paginate-almost-anything-in-angularjs/](http://www.michaelbromley.co.uk/blog/108/paginate-almost-anything-in-angularjs/)

* * *

## 回答 #4

> 赞同：64
> 
> 时间：2012-10-01T09:16:17.843

我刚刚制作了一个 JSFiddle，它使用 btford 代码在每列上显示分页 + 搜索 + 排序：http: [//jsfiddle.net/SAWsA/11/](http://jsfiddle.net/SAWsA/11/)

* * *

## 回答 #5

> 赞同：15
> 
> 时间：2014-07-24T18:50:13.733

我更新[了 Scotty.NET 的](https://stackoverflow.com/users/1123275/scotty-net)plunkr [http://plnkr.co/edit/FUeWwDu0XzO51lyLAEIA?p=preview](http://plnkr.co/edit/FUeWwDu0XzO51lyLAEIA?p=preview)以便它使用更新版本的 angular、angular-ui 和 bootstrap。

控制器

```
var todos = angular.module('todos', ['ui.bootstrap']);

todos.controller('TodoController', function($scope) {
  $scope.filteredTodos = [];
  $scope.itemsPerPage = 30;
  $scope.currentPage = 4;

  $scope.makeTodos = function() {
    $scope.todos = [];
    for (i=1;i<=1000;i++) {
      $scope.todos.push({ text:'todo '+i, done:false});
    }
  };

  $scope.figureOutTodosToDisplay = function() {
    var begin = (($scope.currentPage - 1) * $scope.itemsPerPage);
    var end = begin + $scope.itemsPerPage;
    $scope.filteredTodos = $scope.todos.slice(begin, end);
  };

  $scope.makeTodos(); 
  $scope.figureOutTodosToDisplay();

  $scope.pageChanged = function() {
    $scope.figureOutTodosToDisplay();
  };

}); 
```

引导 UI 组件

```
 <pagination boundary-links="true" 
    max-size="3" 
    items-per-page="itemsPerPage"
    total-items="todos.length" 
    ng-model="currentPage" 
    ng-change="pageChanged()"></pagination> 
```

* * *

## 回答 #6

> 赞同：10
> 
> 时间：2016-01-31T01:02:27.420

这是一个纯 javascript 解决方案，我已将其包装为 Angular 服务来实现分页逻辑，例如在 google 搜索结果中。

[在http://codepen.io/cornflourblue/pen/KVeaQL/](http://codepen.io/cornflourblue/pen/KVeaQL/)上的 CodePen 工作演示

[此博客文章](http://jasonwatmore.com/post/2016/01/31/AngularJS-Pagination-Example-with-Logic-like-Google.aspx)中的详细信息和解释

```
function PagerService() {
    // service definition
    var service = {};

    service.GetPager = GetPager;

    return service;

    // service implementation
    function GetPager(totalItems, currentPage, pageSize) {
        // default to first page
        currentPage = currentPage || 1;

        // default page size is 10
        pageSize = pageSize || 10;

        // calculate total pages
        var totalPages = Math.ceil(totalItems / pageSize);

        var startPage, endPage;
        if (totalPages <= 10) {
            // less than 10 total pages so show all
            startPage = 1;
            endPage = totalPages;
        } else {
            // more than 10 total pages so calculate start and end pages
            if (currentPage <= 6) {
                startPage = 1;
                endPage = 10;
            } else if (currentPage + 4 >= totalPages) {
                startPage = totalPages - 9;
                endPage = totalPages;
            } else {
                startPage = currentPage - 5;
                endPage = currentPage + 4;
            }
        }

        // calculate start and end item indexes
        var startIndex = (currentPage - 1) * pageSize;
        var endIndex = startIndex + pageSize;

        // create an array of pages to ng-repeat in the pager control
        var pages = _.range(startPage, endPage + 1);

        // return object with all pager properties required by the view
        return {
            totalItems: totalItems,
            currentPage: currentPage,
            pageSize: pageSize,
            totalPages: totalPages,
            startPage: startPage,
            endPage: endPage,
            startIndex: startIndex,
            endIndex: endIndex,
            pages: pages
        };
    }
} 
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2017-10-20T05:07:41.750

下面的解决方案很简单。

```
<pagination  
        total-items="totalItems" 
        items-per-page= "itemsPerPage"
        ng-model="currentPage" 
        class="pagination-sm">
</pagination>

<tr ng-repeat="country in countries.slice((currentPage -1) * itemsPerPage, currentPage * itemsPerPage) "> 
```

[这是示例jsfiddle](http://jsfiddle.net/fr2owktx/1/)

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2012-12-07T17:12:59.483

我在这里提取了相关位。这是一个“简洁”的表格分页器，因此不包括排序或过滤。根据需要随意更改/添加：

```
 //your data source may be different. the following line is 
     //just for demonstration purposes only
    var modelData = [{
      text: 'Test1'
    }, {
      text: 'Test2'
    }, {
      text: 'Test3'
    }];

    (function(util) {

      util.PAGE_SIZE = 10;

      util.range = function(start, end) {
        var rng = [];

        if (!end) {
          end = start;
          start = 0;
        }

        for (var i = start; i < end; i++)
          rng.push(i);

        return rng;
      };

      util.Pager = function(data) {
        var self = this,
          _size = util.PAGE_SIZE;;

        self.current = 0;

        self.content = function(index) {
          var start = index * self.size,
            end = (index * self.size + self.size) > data.length ? data.length : (index * self.size + self.size);

          return data.slice(start, end);
        };

        self.next = function() {
          if (!self.canPage('Next')) return;
          self.current++;
        };

        self.prev = function() {
          if (!self.canPage('Prev')) return;
          self.current--;
        };

        self.canPage = function(dir) {
          if (dir === 'Next') return self.current < self.count - 1;
          if (dir === 'Prev') return self.current > 0;
          return false;
        };

        self.list = function() {
          var start, end;
          start = self.current < 5 ? 0 : self.current - 5;
          end = self.count - self.current < 5 ? self.count : self.current + 5;
          return Util.range(start, end);
        };

        Object.defineProperty(self, 'size', {
          configurable: false,
          enumerable: false,
          get: function() {
            return _size;
          },
          set: function(val) {
            _size = val || _size;
          }
        });

        Object.defineProperty(self, 'count', {
          configurable: false,
          enumerable: false,
          get: function() {
            return Math.ceil(data.length / self.size);
          }
        });
      };

    })(window.Util = window.Util || {});

    (function(ns) {
      ns.SampleController = function($scope, $window) {
        $scope.ModelData = modelData;
        //instantiate pager with array (i.e. our model)
        $scope.pages = new $window.Util.Pager($scope.ModelData);
      };
    })(window.Controllers = window.Controllers || {});
```

```
<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.2.23/angular.min.js"></script>
<table ng-controller="Controllers.SampleController">
  <thead>
    <tr>
      <th>
        Col1
      </th>
    </tr>
  </thead>
  <tbody>
    <tr ng-repeat="item in pages.content(pages.current)" title="{{item.text}}">
      <td ng-bind-template="{{item.text}}"></td>
    </tr>
  </tbody>
  <tfoot>
    <tr>
      <td colspan="4">
        <a href="#" ng-click="pages.prev()">&laquo;</a>
        <a href="#" ng-repeat="n in pages.list()" ng-click="pages.current = n" style="margin: 0 2px;">{{n + 1}}</a>
        <a href="#" ng-click="pages.next()">&raquo;</a>
      </td>
    </tr>
  </tfoot>
</table>
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2012-05-30T14:20:43.760

jQuery Mobile 角度适配器有一个分页过滤器，您可以以此为基础。

这是一个使用它的演示小提琴（添加超过 5 个项目，它变成分页）：http: [//jsfiddle.net/tigbro/Du2DY/](http://jsfiddle.net/tigbro/Du2DY/)

这是来源：[https ://github.com/tigbro/jquery-mobile-angular-adapter/blob/master/src/main/webapp/utils/paging.js](https://github.com/tigbro/jquery-mobile-angular-adapter/blob/master/src/main/webapp/utils/paging.js)

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2015-04-20T12:26:23.157

对于像我这样难以为表格创建分页器的人，我发布了这个。所以，在你看来：

```
 <pagination total-items="total" items-per-page="itemPerPage"    ng-model="currentPage" ng-change="pageChanged()"></pagination>    
        <!-- To specify your choice of items Per Pages-->
     <div class="btn-group">
                <label class="btn btn-primary" ng-model="radioModel"  btn-radio="'Left'" data-ng-click="setItems(5)">5</label>
                <label class="btn btn-primary" ng-model="radioModel" btn-radio="'Middle'" data-ng-click="setItems(10)">10</label>
                <label class="btn btn-primary" ng-model="radioModel" btn-radio="'Right'" data-ng-click="setItems(15)">15</label>
            </div>
     //And don't forget in your table:
      <tr data-ng-repeat="p in profiles | offset: (currentPage-1)*itemPerPage | limitTo: itemPerPage" > 
```

在你的 angularJs 中：

```
 var module = angular.module('myapp',['ui.bootstrap','dialogs']);
  module.controller('myController',function($scope,$http){
   $scope.total = $scope.mylist.length;     
   $scope.currentPage = 1;
   $scope.itemPerPage = 2;
   $scope.start = 0;

   $scope.setItems = function(n){
         $scope.itemPerPage = n;
   };
   // In case you can replace ($scope.currentPage - 1) * $scope.itemPerPage in <tr> by "start"
   $scope.pageChanged = function() {
        $scope.start = ($scope.currentPage - 1) * $scope.itemPerPage;
            };  
});
   //and our filter
     module.filter('offset', function() {
              return function(input, start) {
                start = parseInt(start, 10);
                return input.slice(start);
              };
            }); 
```

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2016-01-21T13:29:43.030

我使用这个 3rd 方分页库，它运行良好。它可以做本地/远程数据源，而且非常可配置。

[https://github.com/michaelbromley/angularUtils/tree/master/src/directives/pagination](https://github.com/michaelbromley/angularUtils/tree/master/src/directives/pagination)

```
<dir-pagination-controls
    [max-size=""]
    [direction-links=""]
    [boundary-links=""]
    [on-page-change=""]
    [pagination-id=""]
    [template-url=""]
    [auto-hide=""]>
    </dir-pagination-controls> 
```

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2017-06-28T10:52:01.260

您可以使用 Bootstrap UI 指令轻松完成此操作。

这个答案是对@Scotty.NET 给出的答案的修改，我已经更改了代码，因为`<pagination>`现在不推荐使用指令。

以下代码生成分页：

```
<ul uib-pagination 
    boundary-links="true"  
    total-items="totalItems"  
    items-per-page="itemsPerPage"  
    ng-model="currentPage"  
    ng-change="pageChanged()"  
    class="pagination"  
    previous-text="&lsaquo;"  
    next-text="&rsaquo;"  
    first-text="&laquo;"  
    last-text="&raquo;">
</ul> 
```

要使其正常工作，请在您的控制器中使用它：

```
$scope.filteredData = []
$scope.totalItems = $scope.data.length;
$scope.currentPage = 1;
$scope.itemsPerPage = 5;

$scope.setPage = function (pageNo) {
    $scope.currentPage = pageNo;
};

$scope.pageChanged = function() {
    var begin = (($scope.currentPage - 1) * $scope.itemsPerPage)
    , end = begin + $scope.itemsPerPage;

    $scope.filteredData = $scope.data.slice(begin, end);
};

$scope.pageChanged(); 
```

有关分页的更多选项，请参阅此：[Bootstrap UI Pagination Directive](https://angular-ui.github.io/bootstrap/#!#pagination)

* * *

## 回答 #13

> 赞同：3
> 
> 时间：2017-11-27T12:57:42.887

从 Angular 1.4 开始，`limitTo`过滤器还接受第二个可选参数`begin`

从[文档](https://code.angularjs.org/1.4.14/docs/api/ng/filter/limitTo)：

> {{ limitTo_expression | 限制到：限制：开始}}
> 
> 开始（可选）字符串|数字
> 开始限制的索引。作为负索引，begin 表示从输入结尾的偏移量。默认为 0。

**所以不需要新建指令**，这个参数可以用来设置分页的偏移量

```
ng-repeat="item in vm.items| limitTo: vm.itemsPerPage: (vm.currentPage-1)*vm.itemsPerPage" 
```

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2017-01-26T09:47:12.170

**ng-重复分页**

```
 <div ng-app="myApp" ng-controller="MyCtrl">
<input ng-model="q" id="search" class="form-control" placeholder="Filter text">
<select ng-model="pageSize" id="pageSize" class="form-control">
    <option value="5">5</option>
    <option value="10">10</option>
    <option value="15">15</option>
    <option value="20">20</option>
 </select>
<ul>
    <li ng-repeat="item in data | filter:q | startFrom:currentPage*pageSize | limitTo:pageSize">
        {{item}}
    </li>
</ul>
<button ng-disabled="currentPage == 0" ng-click="currentPage=currentPage-1">
    Previous
</button>
{{currentPage+1}}/{{numberOfPages()}}
 <button ng-disabled="currentPage >= getData().length/pageSize - 1" ng-                 click="currentPage=currentPage+1">
    Next
    </button>
</div>

<script>

 var app=angular.module('myApp', []);

 app.controller('MyCtrl', ['$scope', '$filter', function ($scope, $filter) {
 $scope.currentPage = 0;
 $scope.pageSize = 10;
 $scope.data = [];
 $scope.q = '';

 $scope.getData = function () {

  return $filter('filter')($scope.data, $scope.q)

   }

   $scope.numberOfPages=function(){
    return Math.ceil($scope.getData().length/$scope.pageSize);                
   }

   for (var i=0; i<65; i++) {
    $scope.data.push("Item "+i);
   }
  }]);

        app.filter('startFrom', function() {
    return function(input, start) {
    start = +start; //parse to int
    return input.slice(start);
   }
  });
  </script> 
```

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2014-02-18T11:10:28.443

以前的消息基本上推荐了如何自己构建分页。如果您像我一样，并且更喜欢完成的指令，我刚刚找到了一个很棒的指令[ngTable](http://bazalt-cms.com/ng-table/)。它支持排序、过滤和分页。

这是一个非常干净的解决方案，在您看来，您所需要的一切：

```
 <table ng-table="tableParams" class="table">
        <tr ng-repeat="user in $data">
            <td data-title="'Name'" sortable="'name'">
                {{user.name}}
            </td>
            <td data-title="'Age'" sortable="'age'">
                {{user.age}}
            </td>
        </tr>
    </table> 
```

在控制器中：

```
$scope.tableParams = new ngTableParams({
    page: 1,            // show first page
    count: 10,          // count per page
    sorting: {
        name: 'asc'     // initial sorting
    }
}, {
    total: data.length, // length of data
    getData: function($defer, params) {
        // use build-in angular filter
        var orderedData = params.sorting() ?
                            $filter('orderBy')(data, params.orderBy()) :
                            data;

        var start = (params.page() - 1) * params.count();
        var end = params.page() * params.count();

        $defer.resolve(orderedData.slice( start, end));
    }
}); 
```

GitHub链接：[https ://github.com/esvit/ng-table/](https://github.com/esvit/ng-table/)

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2016-01-21T12:25:27.890

[角分页](http://brantwills.github.io/Angular-Paging/)

是个不错的选择

> 一个指令，用于帮助对大型数据集进行分页，同时需要最少的实际分页信息。在这种分页方案中，我们非常依赖服务器来“过滤”结果。中心思想是我们只想保存项目的活动“页面” - 而不是将整个项目列表保存在内存中并在客户端进行分页。

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2016-10-26T12:59:09.787

老问题，但由于我认为我的方法有点不同而且不那么复杂，我会分享这个，并希望我以外的人觉得它有用。

我发现一个**简单而小型**的分页解决方案是将指令与使用相同范围变量的过滤器结合起来。

要实现这一点，您在数组上添加过滤器并像这样添加指令

```
<div class="row">
    <table class="table table-hover">
        <thead>
            <tr>
                <th>Name</th>
                <th>Price</th>
                <th>Quantity</th>
            </tr>
        </thead>
        <tbody>
            <tr ng-repeat="item in items | cust_pagination:p_Size:p_Step">
                <td>{{item.Name}}</td>
                <td>{{item.Price}}</td>
                <td>{{item.Quantity}}</td>
            </tr>
        </tbody>
    </table>
    <div cust-pagination p-items="items" p-boundarylinks="true" p-size="p_Size" p-step="p_Step"></div>
</div> 
```

p_Size 和 p_Step 是范围变量，可以在范围内自定义，否则 p_Size 的默认值为 5，p_Step 为 1。

当分页中的步骤发生变化时，p_Step 会更新，并将触发 cust_pagination 过滤器的新过滤。cust_pagination 过滤器然后根据 p_Step 值对数组进行切片，如下所示，仅返回在分页部分中选择的活动记录

```
var startIndex = nStep * nPageSize;
var endIndex = startIndex + nPageSize;
var arr = items.slice(startIndex, endIndex);
return arr; 
```

**DEMO** [在这个 plunker 中查看完整的解决方案](https://plnkr.co/edit/JT6aNvV6KDTPuO1lsZ9s?p=preview)

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2014-06-18T07:53:53.587

有我的例子。列表控制器中间的选定按钮。配置>>>

```
 $scope.pagination = {total: null, pages: [], config: {count: 10, page: 1, size: 7}}; 
```

分页逻辑：

```
/*
     Pagination
     */
    $scope.$watch('pagination.total', function (total) {
        if(!total || total <= $scope.pagination.config.count) return;
        _setPaginationPages(total);
    });

    function _setPaginationPages(total) {
        var totalPages = Math.ceil(total / $scope.pagination.config.count);
        var pages = [];
        var start = $scope.pagination.config.page - Math.floor($scope.pagination.config.size/2);
        var finish = null;

        if((start + $scope.pagination.config.size - 1) > totalPages){
            start = totalPages - $scope.pagination.config.size;
        }
        if(start <= 0) {
            start = 1;
        }

       finish = start +  $scope.pagination.config.size - 1;
       if(finish > totalPages){
           finish = totalPages;
       }

        for (var i = start; i <= finish; i++) {
            pages.push(i);
        }

        $scope.pagination.pages = pages;
    }

    $scope.$watch("pagination.config.page", function(page){
        _setPaginationPages($scope.pagination.total);
        _getRespondents($scope.pagination.config);
    }); 
```

以及我对引导程序的看法

```
<ul ng-class="{hidden: pagination.total == 0}" class="pagination">
        <li ng-click="pagination.config.page = pagination.config.page - 1"
            ng-class="{disabled: pagination.config.page == 1}" ><a href="#">&laquo;</a></li>
        <li ng-repeat="p in pagination.pages"
            ng-click="pagination.config.page = p"
            ng-class="{active: p == pagination.config.page}"><a href="#">{{p}}</a></li>
        <li ng-click="pagination.config.page = pagination.config.page + 1"
            ng-class="{disabled: pagination.config.page == pagination.pages.length}"><a href="#">&raquo;</a></li>
    </ul > 
```

它是有益的

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2015-04-21T14:16:44.810

我希望我能发表评论，但我只需要在这里留下这个：

Scotty.NET 的回答和 user2176745 对更高版本的重做都很棒，但他们都错过了我的 AngularJS 版本（v1.3.15）打破的东西：

i 未在 $scope.makeTodos 中定义。

因此，用这个函数替换它可以修复更新的角度版本。

```
$scope.makeTodos = function() {
    var i;
    $scope.todos = [];
    for (i=1;i<=1000;i++) {
        $scope.todos.push({ text:'todo '+i, done:false});
    }
}; 
```

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2016-04-05T05:58:16.517

> 概述**：**分页使用

```
 - ng-repeat
 - uib-pagination 
```

> 查看**：**

```
<div class="row">
    <div class="col-lg-12">
        <table class="table">
            <thead style="background-color: #eee">
                <tr>
                    <td>Dispature</td>
                    <td>Service</td>
                    <td>Host</td>
                    <td>Value</td>
                </tr>
            </thead>
            <tbody>
                <tr ng-repeat="x in app.metricsList">
                    <td>{{x.dispature}}</td>
                    <td>{{x.service}}</td>
                    <td>{{x.host}}</td>
                    <td>{{x.value}}</td>
                </tr>
            </tbody>
        </table>

        <div align="center">
            <uib-pagination items-per-page="app.itemPerPage" num-pages="numPages"
                total-items="app.totalItems" boundary-link-numbers="true"
                ng-model="app.currentPage" rotate="false" max-size="app.maxSize"
                class="pagination-sm" boundary-links="true"
                ng-click="app.getPagableRecords()"></uib-pagination>        

            <div style="float: right; margin: 15px">
                <pre>Page: {{app.currentPage}} / {{numPages}}</pre>
            </div>          
        </div>
    </div>
</div> 
```

> JS 控制器**：**

```
app.controller('AllEntryCtrl',['$scope','$http','$timeout','$rootScope', function($scope,$http,$timeout,$rootScope){

    var app = this;
    app.currentPage = 1;
    app.maxSize = 5;
    app.itemPerPage = 5;
    app.totalItems = 0;

    app.countRecords = function() {
        $http.get("countRecord")
        .success(function(data,status,headers,config){
            app.totalItems = data;
        })
        .error(function(data,status,header,config){
            console.log(data);
        });
    };

    app.getPagableRecords = function() {
        var param = {
                page : app.currentPage,
                size : app.itemPerPage  
        };
        $http.get("allRecordPagination",{params : param})
        .success(function(data,status,headers,config){
            app.metricsList = data.content;
        })
        .error(function(data,status,header,config){
            console.log(data);
        });
    };

    app.countRecords();
    app.getPagableRecords();

}]); 
```

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2017-07-13T10:07:01.930

我想添加与`ngRepeat`您一起使用的解决方案和过滤器，而无需使用`$watch`切片数组或切片数组。

**您的过滤结果将被分页！**

```
var app = angular.module('app', ['ui.bootstrap']);

app.controller('myController', ['$scope', function($scope){
    $scope.list= ['a', 'b', 'c', 'd', 'e'];

    $scope.pagination = {
        currentPage: 1,
        numPerPage: 5,
        totalItems: 0
    };

    $scope.searchFilter = function(item) {
        //Your filter results will be paginated!
        //The pagination will work even with other filters involved
        //The total number of items in the result of your filter is accounted for
    };

    $scope.paginationFilter = function(item, index) {
        //Every time the filter is used it restarts the totalItems
        if(index === 0) 
            $scope.pagination.totalItems = 0;

        //This holds the totalItems after the filters are applied
        $scope.pagination.totalItems++;

        if(
            index >= (($scope.pagination.currentPage - 1) * $scope.pagination.numPerPage)
            && index < ((($scope.pagination.currentPage - 1) * $scope.pagination.numPerPage) + $scope.pagination.numPerPage)
        )
            return true; //return true if item index is on the currentPage

        return false;
    };
}]); 
```

在 HTML 中，确保将过滤器应用于分页过滤器`ngRepeat` **之前。**

```
<table data-ng-controller="myController">
    <tr data-ng-repeat="item in list | filter: searchFilter | filter: paginationFilter track by $index">
        <td>
            {{item}}
        </td>
    <tr>
</table>
<ul class="pagination-sm"
    uib-pagination
    data-boundary-links="true"
    data-total-items="pagination.totalItems"
    data-items-per-page="pagination.numPerPage"
    data-ng-model="pagination.currentPage"
    data-previous-text="&lsaquo;"
    data-next-text="&rsaquo;"
    data-first-text="&laquo;"
    data-last-text="&raquo;">
 </ul> 
```

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2021-12-08T19:35:22.387

下面的代码将有助于在后端提供带有角度重复的自定义分页。

您的数据将在

```
$scope.myticketIssuesData = [];
$scope.allticketIssuesData = []; 
```

```
var jiraapp = angular.module('jiraapp',  ['ui.bootstrap']);

jiraapp.controller('JiraController', ['$scope', '$http', '$window','$location', function JiraController($scope, $http, $window,$location) {

    $scope.myticketIssuesData = [];
    $scope.allticketIssuesData = [];
    $scope.jiraIssue = {};
    $scope.RequesterType = [];
    $scope.loading = false;
    $scope.showerror = false;
    $scope.alert = {};

    $scope.maxSize = 10;    
    $scope.totalCount = 0;  
    $scope.pageIndex = 0;  
    $scope.startIndex = 0;
    $scope.pageSizeSelected = 10;

    $scope.maxallSize = 10;
    $scope.totalallCount = 0;
    $scope.pageallIndex = 0; 
    $scope.startallIndex = 0;
    $scope.pageallSizeSelected = 10;

    $scope.getUserTickets = function()  {
        $scope.loading = true;
        $http({
            method: 'GET',
            url: 'http://localhost:53583/api/Jira/getUserTickets?assignee='+$scope.loc+'&startAt='+ $scope.startIndex +'&maxResults='+$scope.pageSizeSelected,
            headers: {
                "Accept": "application/json",
                "Access-Control-Allow-Origin": "http://localhost:8080",
                "crossDomain": "true",
            }
        }).then(function successCallback(response) {

            $scope.myticketIssuesData = response.data.issues;
            $scope.totalCount = response.data.total;

            $scope.loading = false;

        }, function errorCallback(response) {
            $scope.loading = false;

        });
    }

    $scope.getrequestType = function(){
        $http({
            method: 'GET',
            url: 'http://localhost:53583/api/Jira/getrequestType',
            headers: {
                "Accept": "application/json",
                "Access-Control-Allow-Origin": "http://localhost:8080",
                "crossDomain": "true",
            }
        }).then(function successCallback(response) {
            $scope.RequesterType = response.data.values;
        }, function errorCallback(response) {
        });
    }

    $scope.getDropDown = function(){
        $scope.getrequestType();
    }

    $scope.initialize = function (item) {
        $scope.getUserTickets();
        $scope.getDropDown();
    }

    $scope.initialize();

    $scope.pageChanged = function () {  

        if($scope.pageIndex == 0)
            $scope.startIndex = 0;
        else if($scope.pageIndex == 1)
            $scope.startIndex = 0;
        else
            $scope.startIndex =  (($scope.pageIndex-1) * $scope.pageSizeSelected);

        $scope.getUserTickets();
    };  

    $scope.pageallChanged = function () {  

        if($scope.pageallIndex == 0)
            $scope.startallIndex = 0;
        else if($scope.pageallIndex == 1)
            $scope.startallIndex = 0;
        else
            $scope.startallIndex =  (($scope.pageallIndex-1) * $scope.pageallSizeSelected);
        $scope.getAllTickets();
    };  

    $scope.changeallPageSize = function () {  
        $scope.pageallIndex = 0;  
        $scope.getAllTickets();
    };  

    $scope.getAllTickets = function()  {
        $scope.loading = true;
        $http({
            method: 'GET',
            url: 'http://localhost:53583/api/Jira/getAllTickets?startAt='+ $scope.startallIndex +'&maxResults='+$scope.pageallSizeSelected,
            headers: {
                "Accept": "application/json",
                "Access-Control-Allow-Origin": "http://localhost:8080",
                "crossDomain": "true",
            }
        }).then(function successCallback(response) {

            $scope.allticketIssuesData = response.data.issues;
            $scope.totalallCount = response.data.total;

            $scope.loading = false;

        }, function errorCallback(response) {

            $scope.loading = false;

        });
    }

}]);
```

```
<html ng-app="jiraapp">

<head>
    <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
    crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" crossorigin="anonymous">
    <link href='https://fonts.googleapis.com/css?family=Source+Sans+Pro' rel='stylesheet' type='text/css'>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"
        crossorigin="anonymous"></script>

    <script src="/angular.min.js"></script>
    <script src="/jira.js"></script>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/angularjs/1.2.6/angular-route.min.js"></script>

    <script src="/ui-bootstrap-tpls-0.13.4.min.js"></script>

    <!-- this is important -->
    <style type="text/css">
        #loading {
            position: fixed;
            top: 50%;
            left: 50%;
            margin-top: -5em;
            margin-left: -10em;
        }

        .pagination {
            display: inline-block;
            padding-left: 0;
            margin: 20px 0;
            border-radius: 4px
        }

        .pagination>li {
            display: inline
        }

        .pagination>li>a,
        .pagination>li>span {
            position: relative;
            float: left;
            padding: 6px 12px;
            margin-left: -1px;
            line-height: 1.42857143;
            color: #337ab7;
            text-decoration: none;
            background-color: #fff;
            border: 1px solid #ddd
        }

        .pagination>li:first-child>a,
        .pagination>li:first-child>span {
            margin-left: 0;
            border-top-left-radius: 4px;
            border-bottom-left-radius: 4px
        }

        .pagination>li:last-child>a,
        .pagination>li:last-child>span {
            border-top-right-radius: 4px;
            border-bottom-right-radius: 4px
        }

        .pagination>li>a:focus,
        .pagination>li>a:hover,
        .pagination>li>span:focus,
        .pagination>li>span:hover {
            z-index: 3;
            color: #23527c;
            background-color: #eee;
            border-color: #ddd
        }

        .pagination>.active>a,
        .pagination>.active>a:focus,
        .pagination>.active>a:hover,
        .pagination>.active>span,
        .pagination>.active>span:focus,
        .pagination>.active>span:hover {
            z-index: 2;
            color: #fff;
            cursor: default;
            background-color: #337ab7;
            border-color: #337ab7
        }

        .pagination>.disabled>a,
        .pagination>.disabled>a:focus,
        .pagination>.disabled>a:hover,
        .pagination>.disabled>span,
        .pagination>.disabled>span:focus,
        .pagination>.disabled>span:hover {
            color: #777;
            cursor: not-allowed;
            background-color: #fff;
            border-color: #ddd
        }

        .pagination-lg>li>a,
        .pagination-lg>li>span {
            padding: 10px 16px;
            font-size: 18px;
            line-height: 1.3333333
        }

        .pagination-lg>li:first-child>a,
        .pagination-lg>li:first-child>span {
            border-top-left-radius: 6px;
            border-bottom-left-radius: 6px
        }

        .pagination-lg>li:last-child>a,
        .pagination-lg>li:last-child>span {
            border-top-right-radius: 6px;
            border-bottom-right-radius: 6px
        }

        .pagination-sm>li>a,
        .pagination-sm>li>span {
            padding: 5px 10px;
            font-size: 12px;
            line-height: 1.5
        }

        .pagination-sm>li:first-child>a,
        .pagination-sm>li:first-child>span {
            border-top-left-radius: 3px;
            border-bottom-left-radius: 3px
        }

        .pagination-sm>li:last-child>a,
        .pagination-sm>li:last-child>span {
            border-top-right-radius: 3px;
            border-bottom-right-radius: 3px
        }

        .pager {
            padding-left: 0;
            margin: 20px 0;
            text-align: center;
            list-style: none
        }

        .pager li {
            display: inline
        }

        .pager li>a,
        .pager li>span {
            display: inline-block;
            padding: 5px 14px;
            background-color: #fff;
            border: 1px solid #ddd;
            border-radius: 15px
        }

        .pager li>a:focus,
        .pager li>a:hover {
            text-decoration: none;
            background-color: #eee
        }

        .pager .next>a,
        .pager .next>span {
            float: right
        }

        .pager .previous>a,
        .pager .previous>span {
            float: left
        }

        .pager .disabled>a,
        .pager .disabled>a:focus,
        .pager .disabled>a:hover,
        .pager .disabled>span {
            color: #777;
            cursor: not-allowed;
            background-color: #fff
        }
    </style>
</head>

<body ng-controller="JiraController">
    <div class="col-sm-12">
        <div class="row" style="background: #09c;">
            <div style="margin-left: auto; margin-right: auto;">
                <img src="/logo.png" height="80">
                <span class="d-none d-sm-inline"
                    style="color: white; font-size: 4rem; vertical-align: middle; font-family:'Source Code Pro'">Jira</span>
            </div>
        </div>
        <div class="row">
            <div class="col-sm-12">
                <nav>
                    <div class="nav nav-tabs" id="nav-tab" role="tablist">
                        <a class="nav-item nav-link active" id="nav-myticket-tab" data-toggle="tab" href="#nav-myticket"
                            role="tab" aria-controls="nav-myticket" aria-selected="true" ng-click="getUserTickets()">My
                            Ticket</a>
                    </div>
                </nav>
                <div class="tab-content" id="nav-tabContent">
                    <div class="tab-pane fade show active" id="nav-myticket" role="tabpanel"
                        aria-labelledby="nav-myticket-tab">
                        <div class="col-sm-12" style="margin:10px">
                            <div id="loading" ng-show="loading">
                                <img src="spinner.gif">
                            </div>
                                <table ng-show="!loading"  class="table table-striped table-bordered table-hover tabel-condensed">
                                    <thead>
                                        <tr>
                                            <td>Key</td>
                                            <td>Priority</td>
                                            <td>Summary</td>
                                            <td>Assignee</td>
                                            <td>Status</td>
                                            <td>Due Date</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr ng-repeat="data in myticketIssuesData">
                                            <td>
                                                <a href={{data.fields.customfield_10023._links.web}} target="_blank">
                                                    {{data.key}}
                                                </a>
                                            </td>
                                            <td>{{data.fields.priority.name}}</td>
                                            <td>{{data.fields.summary}}</td>
                                            <td>{{data.fields.assignee.displayName}}</td>
                                            <td>{{data.fields.status.name}}</td>
                                            <td>{{data.fields.duedate}}</td>
                                        </tr>
                                    </tbody>
                                    <tfoot>
                                        <tr>
                                            <td align="center" colspan="6">
                                                <!-- <span class="form-group pull-left page-size form-inline">
                                                    <select id="ddlPageSize" class="form-control control-color"
                                                        ng-model="pageSizeSelected" ng-change="changePageSize()">
                                                        <option value="5">5</option>
                                                        <option value="10">10</option>
                                                        <option value="25">25</option>
                                                        <option value="50">50</option>
                                                    </select>
                                                </span> -->
                                                <div class="pull-right">
                                                    <pagination total-items="totalCount" ng-change="pageChanged()"
                                                        items-per-page="pageSizeSelected" direction-links="true"
                                                        ng-model="pageIndex" max-size="maxSize" class="pagination"
                                                        boundary-links="true" rotate="false" num-pages="numPages">
                                                    </pagination>
                                                    <a style="margin-left: 640px;" class="btn btn-primary">Page: {{pageIndex}} / {{numPages}}</a>
                                                </div>
                                            </td>
                                        </tr>
                                    </tfoot>
                                </table>
                        </div>
                    </div>

                </div>

            </div>
        </div>
</body>

</html>
```

# facebook - 点赞链接无法正常工作

> ID：10816074
> 
> 赞同：0
> 
> 时间：2012-05-30T12:14:50.683
> 
> 标签：facebook, facebook-like

我有一个快速的问题，也许有人可以帮助我。

我有一些项目，每个项目都会收到一个类似的链接，效果很好，只有当转移到 FB 时，链接才会被“切断”。

相反，在 www.domain.de/news/name-der-news/&pos=1 他只给出 www.domain.de/news/name-der-news/

你知道我该如何解决吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T12:31:15.520

您需要对其进行 url 编码，以便对特殊字符进行编码，例如 '?'、'=' 等...

在您的示例中，编码的 url 是： `www.domain.de%2Fnews%2Fname-der-news%2F%26pos%3D1`

这是一个在线 url 编码器/解码器：http: [//meyerweb.com/eric/tools/dencoder/](http://meyerweb.com/eric/tools/dencoder/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T07:04:37.973

当然......链接是例如[http://www.hagelshop-lounge.de/news/13/21/Rock-your-style/&pos=1](http://www.hagelshop-lounge.de/news/13/21/Rock-your-style/&pos=1) 和代码：

```
<iframe src="//www.facebook.com/plugins/like.php?href={$cgsimple->self_url()|replace:":":"%3A"|replace:"/":"%2F"|replace:"&":"%26"|replace:"=":"%3D"}&amp;send=false&amp;layout=standard&amp;width=450&amp;show_faces=false&amp;action=like&amp;colorscheme=light&amp;font=arial&amp;height=35" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:450px; height:35px;" allowTransparency="true"></iframe> 
```

像这样写的链接将如下所示：

http%3A%2F%2Fwww.hagelshop-lounge.de%2Fnews%2F13%2F21%2FRock-your-style%2F%26pos%3D1

但仍然会丢失**&pos=1 ...**

谢谢您的帮助。

# azure - 在 Azure 虚拟机中部署 Active Directory 和 ADFS 2.0 并将其与 ACS 集成

> ID：10816075
> 
> 赞同：0
> 
> 时间：2012-05-30T12:14:56.020
> 
> 标签：azure, adfs2.0, acs

是否可以将 Azure 虚拟机用作 ADFS 2.0 的 Active Directory 服务器并将其与 ACS 集成？

问候 ，

詹姆斯·罗伊特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T19:02:30.350

在云中拥有 AD 服务器（也带有 RMS）是我不时从 Azure 用户那里听到的一个问题，它肯定是在 Windows Azure 或任何云中运行的一个很好的补充。各种组织的 IT 也提出了同样的要求，但是目前使用当前的 Windows Azure 是不可能的。

一些人可能会建议使用 Windows Azure VM 角色，但是，我会说存在对持久性和其他问题的担忧，所以我会说 Windows Azure VM 角色也不可能，并且还有其他相关问题与 Active Directory 产品以及在云场景中运行。

如果我直接回答，我会说**目前不支持和建议在 Windows Azure 上安装 AD 的场景，**并且由于各种原因无法正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T12:42:51.290

您现在可以在 Azure 上以持久状态安装 AD。它仍然是预览版，但我刚刚在 Azure 上的单独网络上获得了一个独立的 AD。我还没有完成 ADFS 和 ACS 的接线，但我花了一点时间来了解它，我会在那里。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T13:08:43.373

为什么要将 AD 服务器放在 Azure 中？如果它只是为了测试 - 你可以。然而，Windows Azure 的当前状态只允许您拥有一个无状态的 VM 角色。这意味着，您可以使用 AD 准备您的 VM，所有这些都为 ACS 配置并填满用户。但是，您不能依赖任何更改来保留（包括更改密码、用户编辑）。VM 角色是无状态的，这意味着一旦角色被回收、重新启动或修复，您将丢失所做的更改。

因此，当前 Windows Azure 产品的最终答案将是 - 现在不要这样做，除非您只是想尝试一下，看看它是否有效。

** 编辑 **

我不是 AD 专家，我设法做的并拥有一个“内部虚拟化”实验室是将 VM 上的 ADFS 与 ACS 集成。另一个运行 Windows 7 的 VM，它是加入我的 AD 的域。然后是一个利用 ACS 和 ADFS 集成的 Web 部署应用程序。一切正常。

至于将 AD 数据存储在外部持久存储上 - 我不知道是否有可能，以及如何配置它（已经告诉过你我不是 AD 专家）。但是，如果您知道如何为 AD 配置存储，并且可以将其存储在 SQL Azure 中，那么值得一试。

最后，正如 Sandrino 所说，阅读 ZDNet 博客文章提供的链接，其中包含您可能会发现有用的信息。

# c# - SQL Server 2008 每天00:00同步

> ID：10816079
> 
> 赞同：1
> 
> 时间：2012-05-30T12:15:03.493
> 
> 标签：c#, sql-server-2008

我有桌面应用程序，我希望该应用程序中存储在本地数据库中的所有新数据将在每天 00:00 同步到生产数据库。

我在看 MS 同步框架

[http://www.vitalygorn.com/blog/post/2008/01/05/Microsoft-Sync-Framework-Support-in-Visual-Studio-2008.aspx](http://www.vitalygorn.com/blog/post/2008/01/05/Microsoft-Sync-Framework-Support-in-Visual-Studio-2008.aspx)

此解决方案是否正确或如何在每天 00:00 同步两个数据库的最佳方式。

应用程序是用 C# 编写并使用本地 SQL Server 2008

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T12:27:08.177

我会使用数据库[复制](http://msdn.microsoft.com/en-us/library/ms151198)并指定一个[同步计划](http://msdn.microsoft.com/en-us/library/ms151702.aspx)。

# ruby-on-rails - Rails父子表单示例防止批量分配

> ID：10816084
> 
> 赞同：0
> 
> 时间：2012-05-30T12:15:22.900
> 
> 标签：ruby-on-rails, mass-assignment

我使用 rails 3.2，我想防止批量分配。我有亲子关系。

```
class Parent < ActiveRecord:Base
    has_many :children
    attr_accessible :name
end
class Child < ActiveRecord:Base
    belongs_to :parent
    attr_accessible :title
end 
```

在我的 routes.rb 中，子资源没有嵌套在父资源中。现在我有一个链接来创建一个新的孩子`new_child_path(@parent.id)`。这指示我`localhost:3000/child/new?parent_id=1`，我最终`new`采取行动：

```
def new
    @child = Child.new
    @parent = Parent.find(params[:parent_id])
    @child.parent = @parent
end 
```

我的问题是：如何为`_form.html.erb`子实体编写我的？我不能使用`f.hidden_field`for，`parent_id`因为在我的创建操作中，它会因为批量分配而中断。另一方面，`parent_id`当我救孩子时，我需要通过了解我的父母。我还没有找到一个很好的工作示例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T12:17:32.237

您应该阅读 Rails 的嵌套资源。

一些链接：

[http://railscasts.com/episodes/139-nested-resources](http://railscasts.com/episodes/139-nested-resources)

-- 编辑 1 --

根据您没有超过一层嵌套的评论，您还可以具有以下路由配置：

```
resources :grandparents do
    resources :parents
end

resources :parents do
    resources :children
end 
```

这样，您仍然可以拥有父子关系，而无需多级嵌套的开销。您还可以命名您的控制器以保持清洁，例如：

```
resources :grandparents do
    resources :parents, :controller => "grandparent/parent"
end

resources :parents do
    resources :children
end 
```

# javascript - 使用 javascript 替换特定的 html 标签

> ID：10816085
> 
> 赞同：11
> 
> 时间：2012-05-30T12:15:28.370
> 
> 标签：javascript

我想用&替换每个`<li>`标签`#` `</li>``<br />`

我想我需要一个全局替换功能，而不是一个简单的`string.replace()`所以......

```
var s=obj1.innerHTML;

 s = s.replace(/<li>/g,&quot;# &quot;);
 s = s.replace(/</li>/g,&quot;<br/>&quot;); 
```

但这似乎不起作用。有什么错误吗？

**编辑：**我将在 blogger 中使用代码，这就是为什么它需要被解析。所以这就是为什么你看到`&quot;`而不是`"`.

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-05-30T12:22:55.773

这样做： -

**[现场演示](http://jsfiddle.net/SivaCharan/uGY8A/)**

```
var s="<div>hello world <br/><li>First LI</li><li>Second LI</li></div>";   
s = s.replace(/<li>/g, "#");  
s = s.replace(/<\/li>/g,"<br/>"); 
alert(s); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-30T12:20:05.123

```
obj1.innerHTML = obj1.innerHTML.replace(/<li>/g, '#').replace(/<\/li>/g, '<br>'); 
```

您只需要转义`/`in`/li`否则它将被视为正则表达式分隔符。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2018-08-30T02:39:50.200

抱歉，如果`li`标签有一些属性（如样式），您将获得不需要的文本。对我来说，最简单的方法是使用这样的正则表达式：

```
var regex = /(<li[^>]+>|<li>|<\/li>)/g;
s = s.replace(regex , ' '); 
```

如果您想剥离所有`<tags> </tags>`（不仅是 li 标签），您应该执行以下操作：

```
var regex = /(<[^>]+>|<[^>]>|<\/[^>]>)/g;
s =s.replace(regex , ' '); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-30T12:25:18.987

这工作得很好：

```
<html>
<head>
    <script type="text/javascript" src="http://streamed.in/static/js/jquery-1.4.1.min.js"></script>
    <script>
    $(document).ready(function(){
        var s = $('#obj1').html();
        s = s.replace(/<li>/g,'#');
        s = s.replace(/<\/li>/g,'<br/>');
        $('#obj1').html(s);
    });
    </script>
</head>
<body id="obj1">
    <li>omg 1</li>
    <li>omg 2</li>
    <li>omg 3</li>
    <li>omg 4</li>
</body>
</html> 
```

或者您可以尝试将第二个替换行替换为：

```
s.replace(/<\/li>/g,'<br/>'); 
```

* * *

## 回答 #5

> 赞同：-4
> 
> 时间：2012-05-30T12:22:40.867

如果您可以使用 jQuery，这将对您有所帮助：

`$("li").after("#<br/>").remove();`

# android - 使用 onScroll 方法时如何限制滚动的边界？

> ID：10816086
> 
> 赞同：1
> 
> 时间：2012-05-30T12:15:33.480
> 
> 标签：android, scroll

我正在尝试通过覆盖 Gesture Listener 的 onScroll 方法来实现布局的滚动

```
 @Override
        public boolean onScroll(MotionEvent e1, MotionEvent e2,
                float distanceX, float distanceY) {
            Log.d("Scroll"," X " + this.get +" Y " + this.getScrollY()  );

                            // this- Relative Layout
            this.scrollBy((int)distanceX,(int)distanceY);

             invalidate();
                return false;
        } 
```

使用上面的代码，我可以滚动布局，但我的布局的背景超出了边界，即屏幕？我将如何限制它？我通过 getScrolly() ， getLeft() 尝试了各种事情，但我没有得到任何可以继续的链接？请帮我 ...

# java - 无线连接时 Http Connection Flush 几次，EDGE 和 3G 上只有一次

> ID：10816089
> 
> 赞同：1
> 
> 时间：2012-05-30T12:15:46.357
> 
> 标签：java, blackberry, java-me

我想建立一个刷新几次的http连接，如下面的代码：

```
 int length100 = 1000;
           int position = 0;
           while (position < length) {
                try {
                    os.write(postDataBytes, position, length100);
                    position += length100;
                    int location = position * 100 / length;
                    gaugeField.setValue(location);
                    os.flush();
                }
            } 
```

此代码适用于无线连接。但是在 EDGE 和 3G 上对其进行测试时，代码仅刷新一次，并且在尝试使用写入时`os.write(...);`抛出异常`StreamConnection: Stream Closed`

任何帮助或想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T20:53:23.677

HTTP 连接通常不是交互式的。虽然我同意，但对于一个正常运行的网络堆栈，应该可以一路调用 flush()，但我认为完全删除调用不会带来任何困难。

为什么你需要在同一个请求上多次调用flush()？

# perl - 获取嵌入在 Excel 工作表中的图表

> ID：10816093
> 
> 赞同：0
> 
> 时间：2012-05-30T12:16:11.270
> 
> 标签：perl, excel, com, ole

我正在尝试使用以下 Perl 代码对 Excel 工作表中的图表进行一些修改：

```
 $ex = Win32::OLE->new ('Excel.Application')
        or confess "could not instantiate Excel.Application: $!\n";

    my $workbook = $ex->Workbooks->Open ($file)
        or confess "failed to open $file: $!";

    my $charts_ws = $workbook->Worksheets ("Charts");
    my $charts_col = $charts_ws->ChartObjects;

    for (my $i = 0; $i != $charts_col->Count; ++$i)
    {
        my $chart = $charts_col->Item ($i); # XXX the problem is here
    }

    $workbook->Close; 
```

一切似乎都有效，直到`XXX`标记线。不幸的是，我收到以下错误：

```
Win32::OLE(0.1709) error 0x800a03ec
    in METHOD/PROPERTYGET "Item" at test.pl line 557 
```

我无法破译`0x800a03ec`HRESULT 值是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T13:00:49.023

（为什么我总是在我在这里发布问题后几秒钟找到答案？）

解决方案：我应该使用`$charts_ws->ChartObjects ($i)->Chart`并且应该从索引 1 开始循环。

# android - 在横向模式下将视图伪造为纵向

> ID：10816096
> 
> 赞同：3
> 
> 时间：2012-05-30T12:16:14.957
> 
> 标签：android, view, canvas, rotation

我有一个横向模式的活动。里面有一个像这样对齐的自定义标题视图：

![目前看来](../Images/014ed60d0476965cb4ee402bdbe85e0a.png)

是否可以保持横向模式并将此视图“伪造”为纵向模式，如下所示： ![所需视图](../Images/8a8697ef865f6700b165b13dd7e61785.png)

我试图覆盖我的自定义 TitleView 并把这样的东西`draw(Canvas)`

```
 public class VerticalTitle extends Title{

      public draw(Canvas){
           canvas.save();
           canvas.rotate(getWidth() / 2, getHeight() / 2);
           // i tryed many translations, but get none to work
           canvas.translate(0, getHeight());
           super.draw(canvas);
           canvas.restore()
      }

      public void onMeasure(int widthMeasureSpec, int heightMeasureSpec){
           super.onMeasure(heightMeasureSpec, widthMeasureSpec);
           setMeasuredDimension(getMeasuredHeight(), getMeasuredWidth());
      }
} 
```

如果有任何兴趣，TitleBar 从 RelativeLayout 扩展并具有固定的高度和 fill_parent 宽度

View 中的 setRotate 参数不是一个选项，因为应用程序应该与 2.2 保持兼容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T12:34:00.237

我从来没有这样做过，但我在 SO 上找到了另外两个答案，它们展示了你可能实现这一点的方法。

第一个涉及扩展 TextView 类，[在这里](https://stackoverflow.com/a/7855852/1105376)。既然你想做一个整体的看法，我认为下一个答案更适合你的情况。

另一个答案是使用旋转创建动画来处理它。答案就[在这里](https://stackoverflow.com/a/2888892/1105376)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T12:42:11.460

您必须扩展 Text 视图并构建您的自定义垂直 TextView 首先查看这两个链接以获取更多详细信息

1.  [垂直文本视图](http://www.pocketmagic.net/?p=1625)
2.  [垂直旋转标签](https://stackoverflow.com/questions/1258275/vertical-rotated-label-in-android/7855852#7855852)

然后在你的 Layout-land 中你可以使用这个 Xml 文件来进行你的布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <com.yourpackage.CustomVerticalTextView
        android:layout_width="42dp"
        android:layout_height="fill_parent"
        android:text="@string/hello"
        android:background="#0000FF" />

</LinearLayout> 
```

如果要旋转布局而不是将其所有子级旋转 90 度，请使用 LayoutAnimationController

有关更多详细信息，请参阅此[SO 线程](https://stackoverflow.com/questions/3444764/rotate-view-hierarchy-90-degrees)

# android - 如何处理超出范围的数组索引？

> ID：10816106
> 
> 赞同：3
> 
> 时间：2012-05-30T12:16:37.867
> 
> 标签：android, arrays, indexoutofboundsexception

我在网格视图中有一个图像列表。当我单击它以全屏心情显示的图像时，通过触摸将一个图像更改为另一个只是增加位置。这里是 onTouchListener 的代码

```
private int position=0;
imageView.setOnTouchListener(new OnTouchListener() {
    @Override
    public boolean onTouch(View v, MotionEvent event)   
    {  
        if(event.getAction() == MotionEvent.ACTION_DOWN)  
        {  
              position++;
              if( v == findViewById( R.id.full_image_view ))   
              { 
                   imageView.setImageResource(imageAdapter.mThumbIds[position]);
              }
        }
        return false; 
    }
}); 
```

在最后一张图片中，它显示“它已意外停止”的错误。我该如何处理索引绑定的数组？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T12:19:05.037

您正在尝试获取不在您的数组中的索引。您的`position must be less than array.length`

```
 if( v == findViewById( R.id.full_image_view ))
              {
                  if(position < imageAdapter.mThumbIds.length){

                    imageView.setImageResource(imageAdapter.mThumbIds[position]);

                 }
               } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T12:19:05.483

在尝试访问数组中的元素之前，检查索引是否有效（介于两者之间`0`） 。`array.size - 1`

# c++ - 匿名函数 C++

> ID：10816107
> 
> 赞同：15
> 
> 时间：2012-05-30T12:16:44.067
> 
> 标签：c++, lambda, c++11, anonymous-function

我正在尝试使用函数`signal(int,void(*)(int))`from`<csignal>`来处理浮点异常 SIGFPE。我希望能够打印一些有用的诊断信息，除了一条消息说“浮点异常”或类似的东西。这意味着我作为处理程序传递的函数`signal`需要访问我的代码中的一些数据。问题就在于此。

该函数必须返回`void`并只接受 1 个类型的参数`int`。我不能使处理程序成为我的数据存储类的成员函数，因为那时该类型将`void(Foo::*)(int)`归因于隐藏`this`指针。

我想过使用 lambdas 来尝试制作这样的匿名函数；

```
void handler(int nSig, Foo data)
{
    // do something
}
// snip
Foo data;
signal(SIGFPE, [&](int nSig)->void{handler(nSig,data);}); 
```

然而，因为 lambda 从编译器外部捕获变量`data`，所以不会让它转换为指向的指针`void(*)(int)`（这很遗憾，因为这似乎是 lambdas 的理想用途）。

我可以简单地创建`data`一个全局变量，然后可以看到它，`handler`但出于明显的原因我不愿意这样做。

所以我的问题是这样的；**在 C++ 中模仿匿名函数的最佳方法是什么**？

注意：我更喜欢本机 C++ 解决方案，而不必使用 boost 或等效的。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-30T13:31:31.763

这确实是一个好问题。在指责 C++ 之前，让我们先弄清楚发生了什么。想想 lambdas 是如何实现的。

最简单的 lambda 是在没有捕获数据时。如果是这样的话，它的底层类型就变成了一个简单的普通函数。例如，像这样的 lambda：

```
[] (int p0) {} 
```

将相当于一个简单的函数：

```
void foo(int p0)
{
} 
```

如果您希望该 lambda 成为函数指针，这实际上非常有效。例如：

```
#include <string>
#include <csignal>
#include <iostream>

int main()
{
    int ret;
    signal(SIGINT, [](int signal) {
            std::cout << "Got signal " << signal << std::endl;
        });
    std::cin >> ret;
    return ret;
} 
```

到现在为止还挺好。但是现在您想将一些数据与您的信号处理程序相关联（顺便说一下，上面的代码是未定义的行为，因为[您只能在信号处理程序中执行信号安全代码](http://lazarenko.me/2013/01/15/how-not-to-write-a-signal-handler/)）。所以你想要一个像这样的 lambda：

```
#include <string>
#include <csignal>
#include <iostream>

struct handler_context {
    std::string code;
    std::string desc;
};

int main()
{
    int ret;
    handler_context ctx({ "SIGINT", "Interrupt" });
    signal(SIGINT, [&](int signal) {
            std::cout << "Got signal " << signal
                      << " (" << ctx.code << ": " << ctx.desc
                      << ")\n" << std::flush;
        });
    std::cin >> ret;
    return ret;
} 
```

让我们暂时忘记 C++ lambda 的语法糖。即使在 C 或汇编程序中，您也可以“模仿” lambda，这已不是什么秘密。那么，实际上会是什么样子呢？C 风格的“Lambda”可能看起来像这样（这仍然是 C++）：

```
#include <string>
#include <cstdlib>
#include <iostream>

/*
 * This is a context associated with our lambda function.
 * Some dummy variables, for the sake of example.
 */
struct lambda_captures {
    int v0;
    int v1;
};

static int lambda_func(int p0, void *ctx) // <-- This is our lambda "function".
{
    lambda_captures *captures = (lambda_captures *)ctx;
    std::cout << "Got " << p0 << " (ctx: "
              << captures->v0 << ", " << captures->v1
              << ")\n" << std::flush;
    return 0;
}

// Below is an example of API function provided to the user that can
// invoke a callback supplied by the user.
static void some_api_function(int (*callback)(int p, void *data), void *data)
{
    callback(12345, data);
    callback(98765, data);
}

int main()
{
    lambda_captures captures;
    captures.v0 = 1986;
    captures.v1 = 2012;

    some_api_function(lambda_func, (void *)&captures);

    return EXIT_SUCCESS;
} 
```

以上是 C 风格，C++ 倾向于将“上下文”作为“this”传递，它始终是隐式的第一个参数。如果我们的 API 支持将“数据”作为第一个参数传递，我们可以应用指向成员转换 (PMF) 的指针并编写如下内容：

```
#include <string>
#include <cstdlib>
#include <iostream>

struct some_class {
    int v0;
    int v1;

    int func(int p0)
    {
        std::cout << "Got " << p0 << " (ctx: "
                  << v0 << ", " << v1
                  << ")\n" << std::flush;
        return p0;
    }
};

static void some_api_function(int (*callback)(void *data, int p), void *data)
{
    callback(data, 12345);
    callback(data, 98765);
}

int main()
{
    typedef int (*mpf_type)(void *, int);

    some_class clazz({ 1986, 2012 }); // <- Note a bit of a Java style :-)
    some_api_function((mpf_type)&some_class::func, (void *)&clazz);

    return EXIT_SUCCESS;
} 
```

在上面的两个例子中，注意“数据”总是被传递的。这个非常重要。如果应该调用回调的 API 不接受以某种方式传回回调的“void *”指针，则无法将任何上下文与回调关联。唯一的例外是全局数据。例如，这个 API 很糟糕：

```
#include <string>
#include <cstdlib>
#include <iostream>

struct lambda_captures {
    int v0;
    int v1;
};

static int lambda_func(int p0)
{
/*
    // WHERE DO WE GET OUR "lambda_captures" OBJECT FROM????
    lambda_captures *captures = (lambda_captures *)ctx;
    std::cout << "Got " << p0 << " (ctx: "
              << captures->v0 << ", " << captures->v1
              << ")\n" << std::flush;
*/
    return 0;
}

// Below is an example of API function provided to the user that can
// invoke a callback supplied by the user.
static void some_api_function(int (*callback)(int p))
{
    callback(12345);
    callback(98765);
}

int main()
{
    lambda_captures captures;
    captures.v0 = 1986;
    captures.v1 = 2012;

    some_api_function(lambda_func /* How do we pass a context??? */);

    return EXIT_SUCCESS;
} 
```

话虽如此，旧的信号 API 就是这样。解决该问题的唯一方法是将您的“上下文”实际放入全局范围。然后信号处理函数可以访问它，因为地址是众所周知的，例如：

```
#include <string>
#include <cstdlib>
#include <iostream>

struct lambda_captures {
    int v0;
    int v1;
};

lambda_captures captures({ 1986, 2012 }); // Whoa-la!!!

static int lambda_func(int p0)
{
    std::cout << "Got " << p0 << " (ctx: "
              << captures.v0 << ", " << captures.v1
              << ")\n" << std::flush;
    return 0;
}

// Below is an example of API function provided to the user that can
// invoke a callback supplied by the user.
static void some_api_function(int (*callback)(int p))
{
    callback(12345);
    callback(98765);
}

int main()
{
    some_api_function(lambda_func);

    return EXIT_SUCCESS;
} 
```

这是人们必须面对的。不仅在使用信号 API 的情况下。这也适用于其他事物。例如，中断处理程序处理。但是你必须处理硬件的低级编程。当然，在用户空间提供这种 API 并不是最好的主意。我将再次提到它 - 您只能在信号处理程序中做一小部分事情。您只能调用[异步信号安全函数](https://www.securecoding.cert.org/confluence/display/seccode/SIG30-C.+Call+only+asynchronous-safe+functions+within+signal+handlers)。

当然，旧的 API 不会很快消失，因为它实际上是 POSIX 标准。然而，开发人员认识到了这个问题，并且有更好的方法来处理信号。例如，在 Linux 中，您可以使用[`eventfd`](http://www.kernel.org/doc/man-pages/online/pages/man2/eventfd.2.html)安装信号处理程序，将其与任意上下文相关联，并在回调函数中执行您想要的任何操作。

无论如何，让我们回到你正在使用的 lambda。问题不在于 C++，而在于信号 API，除了使用全局变量外，您无法传递上下文。话虽如此，它也适用于 lambda：

```
#include <string>
#include <cstdlib>
#include <csignal>
#include <iostream>

struct some_data {
    std::string code;
    std::string desc;
};

static some_data data({ "SIGING", "Interrupt" });

int main()
{
    signal(SIGINT, [](int signal) {
            std::cout << "Got " << signal << " (" << data.code << ", "
                      << data.desc << ")\n" << std::flush;
        });
    return EXIT_SUCCESS;
} 
```

因此，C++ 在这里所做的事情并没有什么可耻的，因为它做了一件正确的事情。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-30T12:25:54.683

C 中没有匿名函数之类的东西（C++ 在这里无关紧要，因为函数必须遵守 C 调用约定）。

您唯一能做的就是从处理程序中*颤抖*访问全局变量，可能是全局*变量*（而不是常量，这很好）。

我建议将这些全局变量设为*本地线程*以避免多线程问题，但从全局变量使应用程序更脆弱的意义上说，它仍然很*糟糕。*

* * *

**如何 ？**

*注意：正如 Luc Danton 耐心地向我解释的那样，信号可能会中断任何非原子活动，因此只有当它是无锁原子（或其他一些东西）时，从全局读取才是安全的。**不幸的是`std::function`可能不是这样，这取决于您的实现**，我仍然会留下这段代码来解释如果访问是原子的，它是如何**完成`std::function`的**。*

可以创建一个蹦床来调用有状态的东西，隔离线程并允许重入调用。

```
typedef std::function<void(int)> SignalHandlerType;

extern thread_local ignalHandlerType SignalHandler; 
```

我们创建以下访问器（传递给信号）：

```
void handle_signal(int const i) {
    if (SignalHandler) { SignalHandler(i); }
} 
```

以及以下 RAII 设置器：

```
class SignalSetter: boost::noncopyable {
public:
    SignalSetter(int signal, SignalHandlerType&& sh):
        signal(signal), chandler(0), handler(sh)
    {
        chandler = std::signal(signal, &handle_signal<T>);
        swap(SignalHandler, handler);
    }

    ~SignalSetter() {
        std::signal(signal, chandler);
        swap(SignalHandler, handler);
    }

private:
    typedef void(*CHandlerType)(int);

    int signal;
    CHandlerType chandler;
    SignalHandlerType handler;
}; 
```

*注意：全局变量和`handle_signal`可能都是`private`类`SignalSetter`......但因为`std::signal`不是......*

预期用途：

```
int main(int argc, char* argv[]) {
    SignalSetter setter(SIGFPE, [argc, argv]() {
        std::cout << argc << ": " << argc << std::endl;
    });

    // do what you want.
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T15:38:13.123

您无法在运行时轻松创建新的静态函数，一些 JIT 编译器库能够做到这一点。如果您只需要合理数量的指针，您可以通过专门模板来创建一些静态函数池。

所以最简单的方法是用静态函数包装 C++ Functor。这里的问题是没有像用户数据参数这样的东西。只有一个参数，即信号数。由于只有 64 个信号，您可以创建一个静态数组`std::function< void(int) >`并根据信号编号调用每个信号。一些简单的例子：

```
typedef std::function< void(int) > SignalFunc;

static std::array< SignalFunc, 64 > signalsFunc;

static void cHandler(int nSig)
{
    signalsFunc.at(nSig)(nSig);
}

SignalFunc RegisterSystemSignal( int sig, SignalFunc func )
{
    if( signal( sig, func ? &cHandler : (sighandler_t)SIG_DFL ) != SIG_ERR )
    { 
        func.swap( signalsFunc.at( sig ) );
        return func;
    }
    throw some_error();
} 
```

所以现在你可以这样做：

```
RegisterSystemSignal(SIGFPE, [&](int nSig)->void{handler(nSig,data);}); 
```

还有一个`sigaction`女巫有更多的特点。

# c# - 将 SqlDataReader 作为参数传递

> ID：10816108
> 
> 赞同：0
> 
> 时间：2012-05-30T12:16:52.947
> 
> 标签：c#, asp.net

我有以下问题：我有一个返回 SqlDataReader 的方法，然后我在这个 SqlDataReader 中执行一段时间，如下所示：

```
using (SqlDataReader objSqlDtReader = objDtAccess.GetDataReader()) 
{
    while(objSqlDtReader.Read()) 
    {
           UserEntitie objUserEntitie = new UserEntitie();
           objUserEntitie.Name = Convert.ToString(objSqlDtReader["name"])    
    }
} 
```

所以，我需要用所有数据、姓名、电子邮件、ID 填充我的所有 UserEntite。但是我在用户类中有很多方法（GetUserById，GetUserByEmai，GetAllUsers），我必须再次填写数据。

我需要创建一个私有方法来填充我的 UserEntitie，并且在每个方法中我只调用我的方法 FillUser 并返回它。我认为我需要将我的 SqlDataReader 传递给我的私有方法 FillUser。

有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T12:25:50.953

你可以这样做：

```
class UserEntitie
{
    internal void FillFromSqlDataReader(SqlDataReader reader)
    {
        this.Name = Convert.ToString(reader["name"]);
        /* Fill your fields */
    }
} 
```

用法：

```
using (SqlDataReader objSqlDtReader = objDtAccess.GetDataReader()) 
{
    while(objSqlDtReader.Read()) 
    {
        UserEntitie objUserEntitie = new UserEntitie();
        objUserEntitie.FillFromSqlDataReader(objSqlDtReader);
        /* Add to a list or something */    
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T12:32:43.010

我正在使用类似的系统，但我没有将 SqlDataReader 传递给私有对象，而是将 SqlConnection 传递给对象并拥有一个`FillDetailsFromDb()`执行必要工作的私有方法。

因此，我将有一个无参数构造函数以及一个将 SqlConnection 作为参数的构造函数，而不是传递 SqlDataReader。

创建对象后，我将向对象传递一个参数（在我的情况下是一个 Guid），我的私有方法使用与它一起构造的 SqlConnection 以及一个新的 SqlCommand，它接受我发送给公共方法的参数.

```
 private void FillDetailsFromDb(Guid p)
    {
        SqlCommand com = new SqlCommand();
        com.Connection = conn;

        com.CommandText = "spSelectProspectUsingLinkParameter";
        com.CommandType = CommandType.StoredProcedure;
        com.Parameters.AddWithValue("@linkparam", p);
        conn.Open();
        SqlDataReader rdr = com.ExecuteReader();
        ...
        etc
    } 
```

这意味着该对象仍然可以作为离散对象存在，并且可以在其他地方使用，并且 SqlDataReader 不必传递，我发现它不太喜欢。

顺便说一句，当我自己探索这个问题时，我发现在将数据从数据库中的数据类型转换为 .Net 数据类型时，我很有可能会遇到奇怪的空值。使用类似下面的代码，我设法避免使用 DBNull 数据类型，并利用数据库中的列名。

```
if (!rdr.IsDBNull(rdr.GetOrdinal("firstname")))
{
    Firstname = rdr.GetString(rdr.GetOrdinal("firstname"));
} 
```

# magento - magento更改客户pdf发票

> ID：10816113
> 
> 赞同：1
> 
> 时间：2012-05-30T12:17:06.510
> 
> 标签：magento

我正在开发一个 magento 电子商店，并尝试在从前端（在客户面板）生成的发票上添加客户的增值税号。
我搜索并发现编辑文件： `app/code/core/Mage/Sales/Model/Order/Pdf/Invoice.php` `app/code/core/Mage/Sales/Model/Order/Pdf/Abstract.php` 是适当的方式。

编辑这些文件只会导致管理员面板中生成的 pdf 发票发生更改。如何在**客户**面板生成的 pdf 中添加增值税号？（它与在管理员面板生成的 pdf 不同）

# python - 将鼻子测试称为 scons 任务。

> ID：10816115
> 
> 赞同：1
> 
> 时间：2012-05-30T12:17:14.267
> 
> 标签：python, scons, nose

我想让 scons 用目录列表调用nosetests。最好的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T13:06:10.833

如果您需要分析外部应用程序的返回码（例如，如果您调用测试），则需要使用 Command() + python subprocess 模块。如果您只使用命令，您将无法获得应用程序的返回码。

例如：

```
if 'test' in COMMAND_LINE_TARGETS:
    runTestsCmd = env.Command('runTests', None, Action(runTests, "Running tests"))
    AlwaysBuild(runTestsCmd)
    Alias('test', runTestsCmd) 
```

runTests 函数示例：

```
def runTests(target = None, source = None, env = None) :
    # fill args
    retCode = subprocess.call(args, env = env['ENV'], cwd = cwd, shell = True)
    Exit(retCode) 
```

此外，您可以为 runTestsCmd 设置其他依赖项。

```
Depends(runTestsCmd, [appAndLibsToBuild]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T12:39:02.900

我不知道鼻子框架，但是有两种方法可以使用 SCons 执行外部应用程序（还有其他方法可以使用 python，但无需提及）如下：

*   [Execute](http://www.scons.org/doc/production/HTML/scons-user/x3090.html) () - 在分析 SConscript 文件时始终执行
*   [Command](http://www.scons.org/doc/production/HTML/scons-user/c3786.html) () - 就像一个目标，只根据它的依赖执行

我认为您会希望使用 Command() 选项仅在相关依赖项之一发生更改时才启动单元测试。

关于目录列表，那么你可以使用一些 python 编程，像这样：

```
dirs = ['dir1', 'dir2', 'dir3']
for dir in dirs:
   cmd = 'theScriptToExecute $SOURCE $TARGET'
   env.Command(target = 'whatever', source = dir, action = cmd) 
```

# postgresql - Postgres 动态更新约束外键

> ID：10816116
> 
> 赞同：3
> 
> 时间：2012-05-30T12:17:15.340
> 
> 标签：postgresql, postgresql-8.4

我有很多带有很多外键的表，并且几乎所有表都是 UPDATE NO ACTION 和 DELETE NO ACTION。

是否可以将所有这些外键动态更新为 CASCADE 而不是 NO ACTION 或 RESTRICT？

例如：

```
ALTER TABLE * ALTER FOREIGN KEY * SET ON UPDATE CASCADE ON DELETE CASCADE; 
```

你的，迪奥戈

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-30T12:37:32.217

不，这是不可能的。

您将需要删除并重新创建所有约束，因为不能像那样更改外键约束。

以下语句将生成必要的 alter table 语句来删除和重新创建外键：

```
select 'alter table '||pgn.nspname||'.'||tbl.relname||' drop constraint '||cons.conname||';'
from pg_constraint cons
  join pg_class tbl on cons.confrelid = tbl.oid
  join pg_namespace pgn on pgn.oid = tbl.relnamespace
where contype = 'f'

union all 

select 'alter table '||pgn.nspname||'.'||tbl.relname||' add constraint '||cons.conname||' '||pg_get_constraintdef(cons.oid, true)||' ON UPDATE CASCADE ON DELETE CASCADE;'
from pg_constraint cons
  join pg_class tbl on cons.confrelid = tbl.oid
  join pg_namespace pgn on pgn.oid = tbl.relnamespace
where contype = 'f' 
```

将此语句的输出保存到文件并运行它。

### 确保在运行它们之前验证生成的语句！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-29T15:56:28.510

我将使用以下代码生成必要的 alter table SQL 语句来删除和重新创建外键（按顺序）：

```
 select 'ALTER TABLE '||pgn.nspname||'.'||tbl.relname||' DROP CONSTRAINT '||cons.conname||';' as sqlstr
    from pg_constraint cons
      join pg_class tbl on cons.conrelid = tbl.oid
      join pg_namespace pgn on pgn.oid = tbl.relnamespace
    where contype = 'f' 
    union
    select 'ALTER TABLE '||pgn.nspname||'.'||tbl.relname||' ADD CONSTRAINT '||cons.conname||' FOREIGN KEY ('||(select attname from pg_attribute where attrelid=cons.conrelid and attnum = ANY(cons.conkey))||') REFERENCES '||tblf.relname||' ('||(select attname from pg_attribute where attrelid=cons.confrelid and attnum = ANY(cons.confkey))||')  ON UPDATE CASCADE ON DELETE CASCADE;'  as sqlstr
    from pg_constraint cons
      join pg_class tbl on cons.conrelid = tbl.oid
      join pg_namespace pgn on pgn.oid = tbl.relnamespace
      join pg_class tblf on cons.confrelid = tblf.oid
    where contype = 'f' 

    ORDER BY sqlstr desc 
```

# java - 输出什么也没有

> ID：10816117
> 
> 赞同：0
> 
> 时间：2012-05-30T12:17:16.610
> 
> 标签：java, arraylist

A类包含：

```
public static ArrayList<String> sourceList = new ArrayList<String>();
// here ArrayList contain some string type data; 
public static ArrayList<String> getSource()
    {
        return sourceList;
    } 
```

主类包含：

```
List<String> s1 = A.getSource();
for(String dk:s1) {
            System.out.println(dk);
        } 
```

在这里，我将 A 类的 ArrayList 数据存储到 B 类的列表中，并检查它是否有效。但是当我运行主类时，它什么也没有。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T12:32:00.730

我已经模拟了你在做什么，它按预期工作。您确定列表填充正确吗？

```
import java.util.ArrayList;
import java.util.List;

public class PrintList {

    public static void main(String[] args) {

        List<String> s1 = AClass.getSource();

        for (String dk : s1) {
            System.out.println("We have : " + dk);
        }
    }
}

class AClass {
    public static final ArrayList<String> sourceList = new ArrayList<String>();

    static {
        sourceList.add("A string");
        sourceList.add("Another string");        
    }

    public static ArrayList<String> getSource() {
        return sourceList;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T12:19:11.050

如果这就是您正在使用的所有代码，那么您将永远不会得到任何东西，因为您从一开始就没有填充数组列表。

如果您真的想查看它是否有效，请尝试以下操作：

```
public static ArrayList<String> sourceList = new ArrayList<String>();
// here ArrayList contain some string type data; 
public static ArrayList<String> getSource()
{
    sourceList.add("Hello I am working");
    return sourceList;
} 
```

如果一切顺利，您应该会看到字符串`Hello I am working`。

# mysql - 带有 2 个字母符号的所有国家/地区名称列表

> ID：10816122
> 
> 赞同：0
> 
> 时间：2012-05-30T12:17:31.367
> 
> 标签：mysql

我搜索了包含 2 个字母符号的所有国家/地区名称的数组，但没有找到。我想将它添加到 MySQL 数据库中的表中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T12:31:43.570

国家名称和 2 字符缩写的 ISO 3166 列表可[从其网站](http://www.iso.org/iso/country_codes/iso_3166_code_lists/)获得。我建议您使用[分号分隔的 TXT 格式](http://www.iso.org/iso/list-en1-semic-3.txt)[`LOAD DATA`](http://dev.mysql.com/doc/en/load-data.html)，然后使用或导入 MySQL [`mysqlimport`](http://dev.mysql.com/doc/en/mysqlimport.html)。例如：

```
LOAD DATA INFILE '/path/to/list-en1-semic-3.txt'
    INTO TABLE countries
    FIELDS TERMINATED BY ';'
    IGNORE 2 LINES
    (country_name, abbreviation); 
```

或者：

```
mysqlimport --columns="country_name,abbreviation" --fields-terminated-by=";" \
            --ignore-lines=2 my_db /path/to/countries.txt 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T12:24:16.670

尝试优化您的搜索以包括“国家数据库”、“国家列表 sql”、“iso”之类的内容。这些数据库是可用的，数据本身也可以在互联网上免费获得。但是，如果您找不到像您正在寻找的那样免费的数据库，您当然可以使用现有的可用数据非常快速地构建一个。

祝你好运。

# arrays - 红宝石数组循环总是配对

> ID：10816125
> 
> 赞同：10
> 
> 时间：2012-05-30T12:17:34.830
> 
> 标签：arrays, ruby, loops

我有以下数组：

```
a = ['sda', 'sdb', 'sdc', 'sdd'] 
```

现在我想遍历这些条目，但总是有两个元素。我现在这样做如下：

```
while b = a.shift(2)
  # b is now ['sda', 'sdb'] or ['sdc', 'sdd']
end 
```

这感觉有点不对劲，有没有更好的方法来做到这一点？有没有办法轻松获得类似的东西`[['sda', 'sdb'], ['sdc', 'sdd']]`？

我读了[http://www.ruby-doc.org/core-1.9.3/Array.html](http://www.ruby-doc.org/core-1.9.3/Array.html)但我没有找到有用的东西......

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-30T12:21:55.827

您可能想查看[`Enumerable`](http://www.ruby-doc.org/core-1.9.3/Enumerable.html)，它包含在`Array`.

您想要的方法是[`Enumerable#each_slice`](http://www.ruby-doc.org/core-1.9.3/Enumerable.html#method-i-each_slice)，它从可枚举的元素中反复产生给定的元素数量（如果最后没有那么多元素，则更少）：

```
a = ['sda', 'sdb', 'sdc', 'sdd']
a.each_slice(2) do |b|
    p b
end 
```

产量：

```
$ ruby slices.rb 
["sda", "sdb"]
["sdc", "sdd"]
$ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-01-20T10:33:03.950

如果您需要使用严格的对，您可能需要使用[Enumerable#each_cons](https://ruby-doc.org/core-1.9.3/Enumerable.html#method-i-each_cons)方法。`each_slice`这是和之间的区别`each_cons`：

```
a = ['a', 'b', 'c', 'd', 'e']
a.each_slice(2) { |i| p i }
# ["a", "b"]
# ["c", "d"]
# ["e"]
a.each_cons(2) { |i| p i }
# ["a", "b"]
# ["b", "c"]
# ["c", "d"]
# ["d", "e"] 
```

# java - 将年份与数据库中日期的年份部分进行比较

> ID：10816126
> 
> 赞同：1
> 
> 时间：2012-05-30T12:17:44.470
> 
> 标签：java, javascript, mysql

我有一个员工登记表，员工在其中添加了他的详细信息。

单击`Submit`按钮时，我将从后端向员工添加默认假期。我的数据库中有一个表`holiday`，其中包含每年的公众假期。
当员工单独登记当年的假期时，应将其添加到`employee_holiday`表中。

谁能告诉我如何将当前年份与假期表中的日期进行比较并将其添加到`employee_holiday`表中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T12:23:29.010

不确定我是否清楚地理解了您的问题，但就 MySQL 查询而言，您可以使用此查询来选择当年的假期：

```
SELECT *
FROM holidays 
WHERE date_format(now(), '%Y') = date_format(holiday_date, '%Y'); 
```

假设表`holiday`有一个称为`holiday_date`假期日期的列。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T13:08:54.203

这是java中可以比较日期的一种方法。

```
Calendar cal = Calendar.getInstance();
if(cal.get(Calendar.YEAR)==2012){
    System.out.println("Same year");
} 
```

# android - 有没有办法改变android中“MediaPlayer”组件的UI设计？

> ID：10816127
> 
> 赞同：1
> 
> 时间：2012-05-30T12:17:47.540
> 
> 标签：android, user-interface, media-player

有没有办法改变android中“MediaPlayer”组件的UI设计？我说的是 playButton、seekbar 和它包含的所有组件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T12:24:17.403

如果你想修改它，只需更改应用程序的 drawables 文件夹中的 drawables（我假设你必须查看所有股票应用程序所在的系统文件夹）

# jquery - Fancybox onComplete 功能未运行

> ID：10816130
> 
> 赞同：6
> 
> 时间：2012-05-30T12:17:58.003
> 
> 标签：jquery, fancybox

由于某种原因，它只是没有运行该`onComplete`功能。但是它确实加载了fancybox div。我的html：

```
<ul>
    <li class="orange">

           #1 <a href="#text">click here</a>

           <div id="text" class="text">text text text</div>

    </li>
</ul> 
```

我的jQuery：

```
 jQuery('li a').fancybox({       
    'autoDimensions':   'false',
    'width' :   631,
    'height':   256,        
    'onComplete':function(){

        alert('running');
        jQuery('.fancybox-skin').css('background-color',colour);
    }
}); 
```

警报不运行。我也尝试将事件函数更改为`onClosed`和其他事件，但什么也没有。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-30T16:55:47.030

我猜你忘了指定你使用的是什么版本的 fancybox。

`onComplete`是fancybox v1.3.x 的回调选项，而`fancybox-skin` *该类*是在2.x 版之前引入的，.....所以我假设您使用的是2.x 版，不是吗？

Fancybox v2.x 选项是新的，与以前的版本不兼容；(v1.3.x) 选项的等效`onComplete`项现在是`afterLoad`(v2.x) 回调选项。

查看[http://fancyapps.com/fancybox/#docs](http://fancyapps.com/fancybox/#docs)以获取 fancybox v2.x 的选项、方法和回调的完整列表

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-26T07:18:42.393

`afterShow`我认为与`onComplete`Fabxybox 2中的适当等价物

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-15T16:09:40.740

Fancybox 版本 2 不支持`onComplete`. 它使用`afterLoad`.

```
jQuery('#tips li a').fancybox({       
    'autoDimensions':   'false',
    'width' :   631,
    'height':   256,        
    afterLoad:function(){

        alert('running');
        jQuery('.fancybox-skin').css('background-color',colour); // colour to 'red' for example. typo
    }

}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-30T12:24:46.093

好像错字

```
jQuery('#tips li a').fancybox({       
'autoDimensions':   'false',
'width' :   631,
'height':   256,        
'onComplete':function(){

    alert('running');
    jQuery('.fancybox-skin').css('background-color',colour); // colour to 'red' for example. typo
}
}); 
```

[工作示例](http://jsfiddle.net/agriboz/JWyd5/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-05-24T12:55:07.183

使用*afterLoad*而不是*onComplete*

# linq - 通过 LINQ 访问集合并将单个成员设置为新对象

> ID：10816131
> 
> 赞同：0
> 
> 时间：2012-05-30T12:17:59.727
> 
> 标签：linq

我正在尝试使用 id = users101 访问集合中的用户对象并将其设置为其他用户。

```
Controller.MyObject.SingleOrDefault(x => x.Id == "user101") = OtherUser(); 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T12:24:14.487

你不能用一个 LINQ 表达式来做到这一点。

通常 LINQ 扩展适用于可枚举，如果`MyObject`是一个集合，您首先必须找到所需的项目，然后用新对象覆盖它（此外`SingleOrDefault()`，如果条件不满足，将简单地返回 null）。

你应该写这样的东西（确切的代码取决于是什么`MyObject`）：

```
var item = Controller.MyObject.SingleOrDefault(x => x.Id == "user101");
if (item != null)
    Controller.MyObject[Controller.MyObject.IndexOf(item)] = new OtherUser(); 
```

请注意，如果您真的不需要执行的检查，`SingleOrDefault()`您可以简化代码（并避免在`SingleOrDefault()`and中执行双重搜索`IndexOf()`）。

如果这是“性能关键”，那么编写一个一次性完成此任务的临时实现可能会更好。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-30T12:24:37.310

分两行试试：

```
var objectWithId = Controller.MyObject.SingleOrDefault(x => x.Id == "user101");
(objectWithId as WhateverTypeOfObjectOtherUserIs) = OtherUser(); 
```

# iphone - iphone的计算器怎么按用户的意愿放小数点？

> ID：10816139
> 
> 赞同：1
> 
> 时间：2012-05-30T12:18:26.780
> 
> 标签：iphone, xcode, xcode4

我有一个计算器，我想根据按钮按下小数点来输入小数点。我得到了小数点，但如果我输入另一个数字，小数点就会消失并被覆盖。

下面提到了十进制按的代码：-

```
-(IBAction)decimalPressed:(id)sender{
  calculatorScreen.text = [calculatorScreen.text stringByAppendingString:@"."];
} 
```

对于数字新闻，它是：-

```
-(IBAction)buttonDigitPressed:(id)sender{
  currentNumber = currentNumber*10 + (float)[sender tag];
  calculatorScreen.text = [NSString stringWithFormat:@"%g",currentNumber];
} 
```

我怎么能做类似 23 的事情然后“。” 然后是 45。结果将是 23.45

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T03:48:58.420

我最近做了一个计算器应用程序，可以理解你的问题。关于这一点您要注意的另一件事是您不希望在计算中有多个点，例如 10.345.1123.5。简而言之，您希望它也是一个合法的浮点数。

话虽如此，您可以使用 IBAction（请记住将其链接到您的故事板或 xib 文件）

```
-(IBAction)decimalPressed:(UIButton *)sender
{
 NSRange range = [self.display.text rangeOfString:@"."];
if (range.location ==NSNotFound){
self.display.text = [ self.display.text stringByAppendingString:@"."];
}
self.userIsInTheMiddleOfEnteringANumber = YES;
} 
```

虽然我们可能在同一个项目上做，它也可能完全不同（你自己从头开始）所以我将通过一些代码

您可以将 UIButton 替换为默认 id，但最好静态替换它，以便为您自己或查看您代码的任何其他人做出明确说明。

NSRange 顾名思义，标记范围，该范围将是你的计算显示文本（例如 1235.3568），本例中它所针对的字符串范围是“.”。因此，如果 NSNotfound (rangeOfString "." 未在文本范围内找到)，您将在当前显示文本后附加 "." 使用函数 stringByAppendingString:@"."，没有别的，所以如果 "." 则不会发生任何函数 已经找到，解决了显示多点的问题。

userIsInTheMiddleOfEnteringANumber 是一个 BOOL，用于解决显示中出现 0 的问题（例如 06357），如果您有方法可以更改它，请将我的方法名称替换为您自己的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T12:26:49.477

试试下面的代码：

```
-(IBAction)buttonDigitPressed:(id)sender
{
     UIButton *pressedButton = (UIButton *)sender;
     calculatorScreen.text = [calculatorScreen.text stringByAppendingFormat:@"%d",pressedButton.tag];
     currentNumber = [calculatorScreen.text floatValue];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T17:39:58.030

```
-(IBAction)ButtonDot
{
    decimalChecker = 10;
    calculatorScreen.text = [NSString stringWithFormat:@"$ %g.", currentSavings];
    decimalChecker=1;

}

-(IBAction)buttonDigitPressed:(id)sender
{
if (decimalChecker ==1) 
{        
    currentDecimal = currentDecimal*10 + (float)[sender tag];
    calculatorScreen.text = [NSString stringWithFormat:@"$ %g.%g",      currentSavings,currentDecimal];       
}
else
{
    currentSavings = currentSavings*10 + (float)[sender tag];
    calculatorScreen.text = [NSString stringWithFormat:@"$ %g",currentSavings];
}
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-04T12:03:55.380

这是我的解决方案：

视图控制器.h

```
#import <UIKit/UIKit.h>

@interface ViewController : UIViewController {
    float result;
    IBOutlet UILabel *TextInput;
    int currentOperation;
    float currentNumber;
    BOOL userInTheMiddleOfEnteringDecimal;
}

- (IBAction)buttonDigitPressed:(id)sender;
- (IBAction)buttonOperationPressed:(id)sender;
- (IBAction)cancelInput;
- (IBAction)cancelOperation;
- (IBAction)dotPressed;
@end 
```

视图控制器.m

```
#import "ViewController.h"

@interface ViewController ()

@end

@implementation ViewController

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
}

- (IBAction)buttonDigitPressed:(id)sender {
    if(!userInTheMiddleOfEnteringDecimal)
    {
        currentNumber = currentNumber*10 + (float)[sender tag];
        TextInput.text = [NSString stringWithFormat:@"%d",(int)currentNumber];
    }
    else{
        TextInput.text= [TextInput.text stringByAppendingString:[NSString stringWithFormat:@"%d",[sender tag]]];
        currentNumber = [TextInput.text floatValue];
    }
}

- (IBAction)buttonOperationPressed:(id)sender {
    if (currentOperation == 0) result = currentNumber;
    else {
        switch (currentOperation) {
            case 1:
                result = result + currentNumber;
                break;
            case 2:
                result = result - currentNumber;
                break;
            case 3:
                result = result * currentNumber;
                break;
            case 4:
                result = result / currentNumber;
                break;
            case 5:
                currentOperation = 0;
                break;
            default:
                break;
        }
    }
    currentNumber = 0;
    TextInput.text = [NSString stringWithFormat:@"%.2f",result];
    if ([sender tag] == 0) result = 0;
    currentOperation = [sender  tag];
    userInTheMiddleOfEnteringDecimal = NO;
}

-(IBAction)cancelInput{
    currentNumber = (int)(currentNumber/10);
    TextInput.text = [NSString stringWithFormat:@"%.2f",currentNumber];;
}

-(IBAction)cancelOperation{
    currentNumber = 0;
    TextInput.text = @"0";
    userInTheMiddleOfEnteringDecimal = NO;
}
- (IBAction)dotPressed{
    if(!userInTheMiddleOfEnteringDecimal){
        userInTheMiddleOfEnteringDecimal = YES;
        TextInput.text= [TextInput.text stringByAppendingString:@"."];
    }
}

@end 
```

希望这会有所帮助..另一种解决方案...

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-05-30T12:24:42.397

按“。”后 之后的所有值将按照按“。”后按的第一个数字进行划分。将除以 10，第二个除以 100，依此类推

所以编辑你的功能它会是这样的

```
-(IBAction)buttonDigitPressed:(id)sender{
  currentNumber = currentNumber + (float)[sender tag] / 10.0;
  calculatorScreen.text = [NSString stringWithFormat:@"%g",currentNumber];
} 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-05-30T12:37:37.907

我认为这可以解决你的问题

[http://www.datasprings.com/resources/articles-information/iphone-sdk-getting-started-example-code](http://www.datasprings.com/resources/articles-information/iphone-sdk-getting-started-example-code)

有计算器的示例代码。

# ember.js - 处理现有 DOM 内容的 Ember.js 视图

> ID：10816143
> 
> 赞同：2
> 
> 时间：2012-05-30T12:18:54.160
> 
> 标签：ember.js

我们经常处理我们网站上的事物列表。这些最初从服务器加载页面的其余部分。但是，收到的任何更新都希望使用 Ember 更新这些列表。

到目前为止，我看到的所有使用 Ember 视图的示例都涉及控制页面上的内容，而该页面始终完全由 Ember 创建。使用 Ember 视图处理页面上已经存在的 DOM 元素有哪些选项？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T23:25:03.193

这里有一些关于这个想法的讨论：[https ://github.com/emberjs/ember.js/issues/563](https://github.com/emberjs/ember.js/issues/563)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-02T23:31:28.253

在目前的情况下，我想到了两种方法：

*   一旦所有列表项都可用作 ember 作为数据对象（例如通过 ember-data），就将静态呈现的列表替换为 Ember.CollectionView

*   使用普通的旧 jQuery 在列表的开头/结尾附加最新更新

我想这取决于您的列表项和更新逻辑的复杂程度。如果更新需要重新排序项目并且您的列表需要复杂的交互，则使用 ember 的第一种方法可能更适合，尽管在替换列表时可能会出现内容“闪烁”。第二种方法要简单得多，但也有限。我只会使用 jQuery 来附加/前置内容。不过，如果列表很简单，那么在这种情况下甚至使用 ember 都将是矫枉过正。

# python - 如何打印 Tkinter Text 小部件的内容？

> ID：10816145
> 
> 赞同：1
> 
> 时间：2012-05-30T12:18:58.810
> 
> 标签：python, text, printing, tkinter, pdflib

我看到了一个类似的问题（几年前），它与 Tkinter Canvas 的印刷有关。

我需要打印一个`Text`小部件的内容，它可能还包含图像。

我惊讶/震惊地发现也许没有办法做到这一点。我可以忍受 PDF 导出。

`PDFlib`似乎有很多缺点，但它可能会得到解决：

1.  价格高

    然后我注意到这个[PDFLib Lite](http://www.pdflib.com/download/pdflib-family/pdflib-lite-7/)，它似乎有我需要的一切。

2.  使用不想设置 Python 绑定的*配置和制作*步骤难以安装。

    然后我发现了一个简单的：`yum install pdflib-lite-python`.

在任何情况下，您都应该安装源代码，因为它包含许多 Python 示例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T12:51:28.583

文本小部件不支持打印或导出为打印友好格式。

话虽如此，如果您没有嵌入式小部件或图像，那么获取文本小部件的内容并使用 pdflib 之类的东西将其转换为 pdf 应该很容易。虽然文本小部件不直接支持富文本格式，但它具有非常好的自省能力。

# android - Android.mk：如何列出特定目录中的所有 *.c 文件？

> ID：10816146
> 
> 赞同：2
> 
> 时间：2012-05-30T12:19:00.800
> 
> 标签：android, android-ndk

在`Android.mk`如何列出`*.c`特定目录中的所有文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T12:26:24.667

像那样：

```
LOCAL_SRC_FILES := $(call all-c-files-under, ./path/to/directory) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-01T06:02:42.217

假设所有`*.c*`文件都保存在`<my_dir>/src`

```
LOCAL_PATH := $(call my-dir)

include $(CLEAR_VARS)

MY_BASE_JNI_PATH := $(LOCAL_PATH)
MY_MODULE_DIR := $(shell basename $(LOCAL_PATH))
LOCAL_SRC_FILES := $(subst $(MY_BASE_JNI_PATH)/$(MY_MODULE_DIR)/,,$(wildcard $(MY_BASE_JNI_PATH)/$(MY_MODULE_DIR)/src/*.c*)) 
```

# ruby-on-rails - 带导轨的状态页

> ID：10816155
> 
> 赞同：1
> 
> 时间：2012-05-30T12:19:27.993
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我正在尝试在我的应用程序上创建一个状态页面。这个页面应该显示 Resque 和 Faye 的状态
有没有办法在我的 Rails 应用程序中获取这些服务的状态？我尝试过这样的http请求/响应，[但](http://www.rubyinside.com/nethttp-cheat-sheet-2940.html)我得到的只是超时。

产生超时的代码

```
def index
    url = URI.parse('http://127.0.0.1:8080/faye.js')
    req = Net::HTTP::Get.new(url.path)
    res = Net::HTTP.start(url.host, url.port) {|http|
      http.request(req)
    }

    @status_push = res.body 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T20:42:53.420

如果您想要监控队列及其大小，那么监控 resque 就太容易了。只需使用[Resque 类并调用它的方法](https://github.com/defunkt/resque/blob/master/lib/resque.rb)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T11:52:55.627

完成与[上帝](http://godrb.com/)。我可以`'god status {service}'`处理输出。谢谢你们

# eclipse - 将应用程序部署到 Glassfish 3 时出错

> ID：10816157
> 
> 赞同：1
> 
> 时间：2012-05-30T12:19:34.133
> 
> 标签：eclipse, glassfish-3

当我尝试将名为 shopping-1 的应用程序部署到 Glassfish 3 时，出现以下错误：

```
'Publishing to GlassFish Server Open Source Edition 3 (Java EE 6)2 at localhost...'has encountered a problen.

cannot Deploy shopping-1
Deployment Error for module: shopping-1: Exception while loading the app :
  java.lang.Exception: java.lang.IllegalStateException: ContainerBase.addChild: start:
  org.apache.catalina.LifecycleException:
  org.apache.catalina.LifecycleException:
  java.lang.ClassNotFoundException:
  org.springframework.web.servlet.DispatcherServlet 
```

如何追踪并解决此问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T04:44:01.373

1.  首先运行 appserver admin-list 应用程序
2.  检查服务器上是否有任何已部署的应用程序。
3.  如果有，通过运行它们来取消部署。
4.  停止应用程序服务器。
5.  打开您拥有用于部署的war文件的位置文件夹
6.  检查其中一次只有一个war文件。7.启动应用服务器
7.  部署战争。
8.  应该可以正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T11:46:06.730

显然该`shopping-1.war`文件不包括包含`DispatcherServlet`该类的档案。

`unzip -l shopping-1.war | grep spring`（在 Linux 上）将为您提供所有与 spring 相关的包含 jar 文件的列表

# performance - 用 nan 值计算矩阵中的指数移动平均值

> ID：10816165
> 
> 赞同：0
> 
> 时间：2012-05-30T12:20:08.950
> 
> 标签：performance, matlab, matrix, moving-average

假设我有以下矩阵

一个=

76 南 122 南

78 南 123 南

84 南 124 54

77 南 126 58

82 45 129 62

90 50 135 45

76 63 133 66

79 52 122 49

88 56 140 24

有没有办法计算每列的指数移动平均值，而不考虑第一个 NaN 值？例如，如果我使用 3 天指数因子，我希望得到一个矩阵，第一列中的 2 个 NaN 值，第二列中的 6 个 NaN 值，第三列中的 2 个 NaN 值和 4 个 NaN 值第 4 列。有什么建议吗？先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T13:24:53.473

只需对整个矩阵使用过滤器，它将酌情通过 NaN。如果您还想用 NaN “感染”边缘值，请在顶部边缘添加一些额外内容，然后修剪结果：

```
kernel = [1 1 1].';   % Any 3-element kernel, as column vector
a2 = [repmat(NaN, 2, 4); a];  % Add extra NaN's at the start, to avoid partial answers
xtemp = filter(kernel, 1, a2);
x = xtemp(3:end, :); 
```

# dynamics-crm - 如何在更新前插件中将字段设置为空

> ID：10816166
> 
> 赞同：1
> 
> 时间：2012-05-30T12:20:09.123
> 
> 标签：dynamics-crm, dynamics-crm-2011

我为案例实体开发了一个更新前插件。在这个插件中，我想将一个字符串字段设置为一个新值。如果新值不为空，它会顺利运行。但如果新值 si 为 null，则它会被忽略。

这有效：

```
Incident caseTarget = ((Entity) localContext.PluginExecutionContext.InputParameters["Target"]).ToEntity<Incident>();
caseTarget.ProductSerialNumber = "new value"; 
```

插件执行后，*ProductSerialNumber*字段的值为“新值”。

这不起作用：

```
Incident caseTarget = ((Entity) localContext.PluginExecutionContext.InputParameters["Target"]).ToEntity<Incident>();
caseTarget.ProductSerialNumber = null; 
```

插件执行后，*ProductSerialNumber*字段仍具有其旧值。

如何将目标的字段设置为空？

# sql-server - 使用外部用户数据库访问 SSAS

> ID：10816169
> 
> 赞同：4
> 
> 时间：2012-05-30T12:20:30.123
> 
> 标签：sql-server, authentication, iis, ssas

我们有一个 BI 团队，他们创建了一个出色的数据仓库，内部员工可以通过内部网络上的 Excel 使用它。他们通过域控制器使用 Windows 身份验证，一切正常，包括限制对用户和 AD 组的访问。

问题是我们现在希望为不属于我们的 Windows 域的更广泛的受众提供相同的访问权限。由于需要访问系统的用户的信息已经存储在另一个位置（带有 SQL 数据库的应用程序），这使情况变得更加复杂。

目标是让他们连接（可能使用 HTTPS）到多维数据集（使用 Excel 分析服务集成），并使用他们在主应用程序中拥有的用户名/密码进行身份验证。

主应用程序有一个用于用户身份验证和会话管理的 WCF 服务接口，所以我真正需要的是一种在 MSMDpump.dll 前面针对该 WebService 提供身份验证的方法。我们还可以添加角色映射，以便我们可以针对应用程序中的用户定义 SSAS 角色。

我在想我可以创建一个与 MSMDPUMP.dll 具有相同接口的 dll，并在客户端和主 dll 之间转换调用，但这似乎有点矫枉过正。

是否有任何预先构建的工具可以做到这一点？（是的，我知道 Sharepoint 可以做这样的事情，但这不是一个选项，所以请不要建议它）。有没有人知道任何详细说明如何做到这一点的博客？

从哪里开始在两者之间创建接口的任何指针？

问题类似于[如何保护 MS SSAS 2005 以通过 Internet 进行 HTTP 远程访问？](https://stackoverflow.com/questions/126350/how-to-secure-ms-ssas-2005-for-http-remote-access-via-internet)但是，我正在考虑从另一个数据源提供身份验证机制，并将角色提供给 SSAS，而不是用户。我们不想为在外部应用程序中设置的每个用户都在 SSAS 中设置一个新用户。

更新：需要明确的是，他们的外部用户需要使用 Excel 连接到多维数据集，并且返回的数据需要根据他们所在的角色和多维数据集中应用的安全性进行过滤。如果有帮助，我们可以更改多维数据集以使用 Dynamic Dimension Security 并使用 CustomData 属性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T11:42:45.033

最终的解决方案是第三方控制和动态维度安全的结合。

我们发现，如果不付出很大的努力，就不可能轻松地将 MembershipProvider 接口应用到 MSMDPUMP 接口，因此我们的解决方案为他们提供了一个 Web 接口来代替使用。

我们使用的控件是 DevExpress 的，是他们的“PivotGrid”控件。它不是免费的，但比实施任何其他定制解决方案的开发资源成本要低得多。

除了控件，我们还对多维数据集应用了动态维度安全性，因此站点的每个用户都将有一个专用的多维数据集连接字符串，并将“自定义数据”附加到连接字符串。这允许我们将数据分离任务委托给 Cube 和 BI 团队，并让 Web 开发人员专注于控件的显示。

该解决方案运行良好，并且不涉及像 Sharepoint/Excel Services 这样的重量级应用程序。它可以直接内置到您的网站中并根据您的需要进行品牌化，提供销售工具以及有用的功能工具。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T22:01:27.283

您可以在多维数据集数据库上创建一个访问受限的用户（只读，仅用于相关多维数据集等）并将该用户/密码硬编码到应用数据库上的连接字符串中吗？

# java - 如何从我的应用程序的“小”版本重定向到“大”版本

> ID：10816174
> 
> 赞同：0
> 
> 时间：2012-05-30T12:20:42.297
> 
> 标签：java, google-app-engine

我已将我的 Google App Engine 应用程序分成一个小版本（经常使用的位 - 用户界面等）和一个大版本（所有小版本加上管理屏幕、cron 工作人员等）

计划是 GAE 应该能够非常快速地加载我的小版本并服务来自每个实例的大量请求，因为内存需求很小。大版本将为管理屏幕和 cron 工作加载，并且需要 Guice、模板库、apache-commons 等。

问题是当用户点击“Admin”标签时，他们需要自动转移到大版本 - 我怎样才能生成这个链接？我希望按如下方式对我的应用程序进行版本控制：

small-1.myapp.appspot.com

big-1.myapp.appspot.com

small-2.myapp.appspot.com

big-2.myapp.appspot.com

等等，并且当用户请求小代码中不可用的页面时，他们可以从 small-1 重定向到 big-1。

我试过使用 SystemProperty.applicationVersion 但它似乎不包含应用程序版本字符串。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T13:29:34.143

你确定吗

```
com.google.appengine.api.utils.SystemProperty.applicationId.get() 
```

不会产生您的应用程序的 ID（`myapp`在您的情况下），或者

```
com.google.appengine.api.utils.SystemProperty.applicationVersion.get() 
```

不会产生您正在运行的应用程序的主要版本（例如：`small-1 [timestamp]`）（您必须去掉时间戳）？

如果做不到这一点，既然您已经知道您的应用程序 ID 和版本号，您是否可以不在您的系统中声明新的系统属性`appengine-web.xml`并改用这些值？

尽管有上述情况，您可能需要考虑一种更简洁的替代方案：只有一个应用程序（维护和上传到 GAE 的工作要少得多），然后为您的管理部分执行延迟初始化，或者执行我所做的并将初始化放入应用程序启动时排队的任务。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-30T16:57:00.207

当您想使用和维护不同的版本时，可以使用流量拆分：[https ://developers.google.com/appengine/docs/adminconsole/trafficsplitting](https://developers.google.com/appengine/docs/adminconsole/trafficsplitting)

# python - 基于 Python 的具有依赖关系解析的作业调度程序

> ID：10816175
> 
> 赞同：6
> 
> 时间：2012-05-30T12:20:56.483
> 
> 标签：python

我正在寻找一个基于 Python 的作业调度程序，它具有作业依赖性解析（可能以 XML 格式指定）。现有的大多在特定时间启动作业，但不解决作业之间的依赖关系，即依赖于作业 X 和 Y 的作业 Z 应该仅在成功完成 X 和 Z 后启动。

这预计将在 64 位 Windows 上运行。依赖项/安装要求越少越好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-14T06:11:39.610

您可能想尝试一下[RQ](http://python-rq.org/docs/)。

> 要执行依赖于另一个作业的作业，请使用 depends_on 参数：
> 
> ```
> q = Queue('low', async=False) 
> report_job = q.enqueue(generate_report)
> q.enqueue(send_report, depends_on=report_job) 
> ```
> 
> 处理作业依赖性的能力允许您将一个大作业拆分为几个较小的作业。依赖于另一个作业的作业仅在其依赖成功完成时才入队。

# xml - 使用超链接扩展 Visual Studio xml 编辑器（导航）

> ID：10816186
> 
> 赞同：1
> 
> 时间：2012-05-30T12:21:36.857
> 
> 标签：xml, visual-studio-2010, visual-studio, editor, vs-extensibility

有没有办法用 C# 编辑器中的导航功能扩展 Visual Studio xml 编辑器。如果您按 Ctrl 并单击类名，C# 编辑器（我不知道这是 VS 还是 Resharper 功能）允许跳转到另一个类定义。我想在 XML 编辑器中实现这样的东西。
例子：

**文件 1.xml：**

```
<elements>
    <element elementId="el1" relatedElement="file2.el2" dsDefinition="ds1"/>
</elements>
<datasources>
    <datasource elementId="ds1"/>
</datasources> 
```

**文件 2.xml：**

```
<elements>
    <element elementId="el2"/>
</elements> 
```

单击`file2.el2`（按住 ctrl 时）应打开`file2.xml`并将光标定位在 el2 元素上。单击 ds1 应将光标定位到 ds1 数据源。

这可能使用 Visual Studio 编辑器扩展机制吗？如果没有，还有其他选择吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T07:51:13.013

我在 msdn 论坛上问了同样的问题并得到了这个[答案](http://social.msdn.microsoft.com/Forums/en-AU/vsx/thread/5fb50b31-af73-423d-adb9-fedcdd2b78e6)。这足以让我开始。

# sql - 两个完全不同的查询的相同输出

> ID：10816187
> 
> 赞同：0
> 
> 时间：2012-05-30T12:21:37.907
> 
> 标签：sql, r, sqldf

在 R studio v_0.96 中运行时，以下两个查询给出相同的输出

1)

```
ab<-sqldf('select a.Family_tree_id, a.parent_name
           from test as a, test as b 
           where a.child_id <> b.parent_id 
           group by a.Family_tree_id') 
```

2)

```
cd<-sqldf('select a.Family_tree_id, a.parent_name
           from test as a
           where a.parent_name NOT IN 
           (select b.child_name from test as b)') 
```

我似乎不明白相同答案背后的原因，尽管第一个答案似乎与第二个答案完全不同。我在 SQL 方面不是很有经验，所以请多多包涵。是否需要有关数据集的更多信息来回答这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T15:00:19.107

虽然，正如 Paul 所问的，数据集会派上用场，但两个查询之间有几个重叠：

*   这两个查询都选择没有孩子的人。
*   DISTINCT 是一种简单的 GROUP BY 以防止重复，如果每个家谱 ID 只有一个无子父级，您的第一个查询将具有相同的结果。

此外，在您的第二个查询中，`, test as b`没有任何意义。

# javascript - Ext JS 4 项目选择器示例

> ID：10816188
> 
> 赞同：2
> 
> 时间：2012-05-30T12:21:43.040
> 
> 标签：javascript, extjs, extjs4.1

我想在 ExtJS 4.1 中创建一个 ItemSelector，但它们似乎没有两个列表的有效“标题”属性。这正是我想要的：

[http://dev.sencha.com/deploy/ext-4.0.0/examples/multiselect/multiselect-demo.html](http://dev.sencha.com/deploy/ext-4.0.0/examples/multiselect/multiselect-demo.html)

（注意两个标题：“available”和“selected”）

这是适用于 4.1 版本的“相同示例”：

[http://dev.sencha.com/deploy/ext-4.1.0-gpl/examples/multiselect/multiselect-demo.html](http://dev.sencha.com/deploy/ext-4.1.0-gpl/examples/multiselect/multiselect-demo.html)

这就是我下载 extJS 4.1 并从早期版本（4.0.7）添加 ItemSelector 和 MultiSelect 文件的原因。然后我复制了第一个示例中的几乎所有内容，但什么也没做，我也没有错误消息。

请告诉我我应该如何使这样的 ItemSelector 工作（最好使用 ext JS 4.1，因为它是最新版本，并且从不推荐使用的版本开始似乎是错误的，但在这一点上，任何可行的解决方案都可以，因为我用完了想法）。

这是我的html文件：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"> 
```

在此处插入标题

```
<!-- ExtJS -->
<link rel="stylesheet" type="text/css" href="./resources/css/ext-all.css" />
<script type="text/javascript" src="bootstrap.js"></script>

<!-- Shared -->
<!--     <link rel="stylesheet" type="text/css" href="../shared/example.css" /> -->

<!-- Example -->
<script type="text/javascript" src="app.js"></script>
<link rel="stylesheet" type="text/css" href="./resources/css/ItemSelector.css" /> 
```

和 app.js 文件：

```
Ext.Loader.setConfig({enabled: true});
//Ext.Loader.setPath('Ext.ux', './ux');
Ext.require([
    'Ext.form.Panel',
    'Ext.ux.form.MultiSelect',
    'Ext.ux.form.ItemSelector'
]);

 Ext.onReady(function(){
console.log("ready");

/*
 * Ext.ux.form.MultiSelect Example Code
 */
var msForm = Ext.widget('form', {
    title: 'MultiSelect Test',
    width: 400,
    bodyPadding: 10,
    renderTo: 'multiselect',
    items:[{
        anchor: '100%',
        xtype: 'multiselect',
        msgTarget: 'side',
        fieldLabel: 'Multiselect',
        name: 'multiselect',

        allowBlank: false,
        // minSelections: 2,
        // maxSelections: 3,

        store: [[123,'One Hundred Twenty Three'],
                ['1', 'One'], ['2', 'Two'], ['3', 'Three'], ['4', 'Four'], ['5', 'Five'],
                ['6', 'Six'], ['7', 'Seven'], ['8', 'Eight'], ['9', 'Nine']],

        value: ['3', '4', '6'],

        ddReorder: true
    }],

    tbar:[{
        text: 'Options',
        menu: [{
            text: 'Set value (2,3)',
            handler: function(){
                msForm.getForm().findField('multiselect').setValue(['2', '3']);
            }
        },{
            text: 'Toggle enabled',
            handler: function(){
                var m = msForm.getForm().findField('multiselect');
                if (!m.disabled) {
                    m.disable();
                } else {
                    m.enable();
                }
            }
        },{
            text: 'Toggle delimiter',
            handler: function() {
                var m = msForm.getForm().findField('multiselect');
                if (m.delimiter) {
                    m.delimiter = null;
                    Ext.Msg.alert('Delimiter Changed', 'The delimiter is now set to <b>null</b>. Click Save to ' +
                                  'see that values are now submitted as separate parameters.');
                } else {
                    m.delimiter = ',';
                    Ext.Msg.alert('Delimiter Changed', 'The delimiter is now set to <b>","</b>. Click Save to ' +
                                  'see that values are now submitted as a single parameter separated by the delimiter.');
                }
            }
        }]
    }],

    buttons: [{
        text: 'Clear',
        handler: function(){
            var field = msForm.getForm().findField('multiselect');
            if (!field.readOnly && !field.disabled) {
                field.clearValue();
            }
        }
    }, {
        text: 'Reset',
        handler: function() {
            msForm.getForm().reset();
        }
    }, {
        text: 'Save',
        handler: function(){
            if(msForm.getForm().isValid()){
                Ext.Msg.alert('Submitted Values', 'The following will be sent to the server: <br />'+
                    msForm.getForm().getValues(true));
            }
        }
    }]
});

console.log(msForm);

var ds = Ext.create('Ext.data.ArrayStore', {
    data: [[123,'One Hundred Twenty Three'],
        ['1', 'One'], ['2', 'Two'], ['3', 'Three'], ['4', 'Four'], ['5', 'Five'],
        ['6', 'Six'], ['7', 'Seven'], ['8', 'Eight'], ['9', 'Nine']],
    fields: ['value','text'],
    sortInfo: {
        field: 'value',
        direction: 'ASC'
    }
});

/*
 * Ext.ux.form.ItemSelector Example Code
 */
var isForm = Ext.widget('form', {
    title: 'ItemSelector Test',
    width: 700,
    bodyPadding: 10,
    renderTo: 'itemselector',

    tbar:[{
        text: 'Options',
        menu: [{
            text: 'Set value (2,3)',
            handler: function(){
                isForm.getForm().findField('itemselector').setValue(['2', '3']);
            }
        },{
            text: 'Toggle enabled',
            handler: function(){
                var m = isForm.getForm().findField('itemselector');
                if (!m.disabled) {
                    m.disable();
                } else {
                    m.enable();
                }
            }
        },{
            text: 'Toggle delimiter',
            handler: function() {
                var m = isForm.getForm().findField('itemselector');
                if (m.delimiter) {
                    m.delimiter = null;
                    Ext.Msg.alert('Delimiter Changed', 'The delimiter is now set to <b>null</b>. Click Save to ' +
                                  'see that values are now submitted as separate parameters.');
                } else {
                    m.delimiter = ',';
                    Ext.Msg.alert('Delimiter Changed', 'The delimiter is now set to <b>","</b>. Click Save to ' +
                                  'see that values are now submitted as a single parameter separated by the delimiter.');
                }
            }
        }]
    }],

    items:[{
        xtype: 'itemselector',
        name: 'itemselector',
        anchor: '100%',
        fieldLabel: 'ItemSelector',
        imagePath: '../ux/images/',

        store: ds,
        displayField: 'text',
        valueField: 'value',
        value: ['3', '4', '6'],

        allowBlank: false,
        // minSelections: 2,
        // maxSelections: 3,
        msgTarget: 'side'
    }],

    buttons: [{
        text: 'Clear',
        handler: function(){
            var field = isForm.getForm().findField('itemselector');
            if (!field.readOnly && !field.disabled) {
                field.clearValue();
            }
        }
    }, {
        text: 'Reset',
        handler: function() {
            isForm.getForm().reset();
        }
    }, {
        text: 'Save',
        handler: function(){
            if(isForm.getForm().isValid()){
                Ext.Msg.alert('Submitted Values', 'The following will be sent to the server: <br />'+
                    isForm.getForm().getValues(true));
            }
        }
    }]
});

}); 
```

最后，这是我的文件夹结构：

```
-app.js
-bootstrap.js
-ext-all-debug.js
-NewFile.html
-ux
   -form
         -ItemSelector.js
         -MultiSelector.js
         -layout
              -ItemSelector.js
              -MultiSelect.js
-resources
   -css
         -ext-all.css
         -ItemSelector.css 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T11:39:43.463

```
items:[{
    xtype: 'itemselector',
    name: 'itemselector',
    anchor: '100%',
    fieldLabel: 'ItemSelector',
    imagePath: '../ux/images/',

    store: ds,
    displayField: 'text',
    valueField: 'value',
    value: ['3', '4', '6'],

    allowBlank: false,
    // minSelections: 2,
    // maxSelections: 3,
    fromTitle : 'Available'
    toTitle : 'Selected'
    msgTarget: 'side'
}], 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T15:53:23.487

这是一个工作示例[MultiSelect & ItemSelector - 4.1](http://docs.sencha.com/ext-js/4-1/extjs-build/examples/multiselect/multiselect-demo.html)。

确保您的 和 版本`Ext.ux.form.ItemSelector`与源`Ext.ux.form.MultiSelect`中的版本相同`extjs 4.1`（您可以在`extjs-4.1.1/examples/ux/form`目录中找到）。

我有同样的问题和更新`MultiSelect.js`并`ItemSelector.js`解决了我的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-20T12:45:50.123

有一些版本的 Extjs 有 Itemselector 的错误。这是相当容易克服的。
1\. 转到您的 Itemselector.js 文件并找到 setupItems 函数。
2\. 该函数使用createList() 函数创建FromField 和ToField。
3\. 函数重载：创建另一个函数，就像 createList() 一样，并传递一个参数（这是您要设置的标题），（例如：createList(param)）
4\. 在 createList(param) 函数中，只需添加标题：参数
5\. 现在在 setupItems 函数中将 createList() 替换为 createList('Avaiable') 和 createList('Selected')。
6\. 你完成了。

示例代码：

```
createList: function(param){
    var me = this;
    return Ext.create('Ext.ux.form.MultiSelect', {
            submitValue: false,
            flex: 1,
            dragGroup: me.ddGroup,
            dropGroup: me.ddGroup,
            store: {
                model: me.store.model,
                    data: []
            },
            title: param,
            displayField: me.displayField,
            disabled: me.disabled,
            listeners: {
                boundList: {
                        scope: me,
                        itemdblclick: me.onItemDblClick,
                        drop: me.syncValue  
            }
            }
    });
},

setupItems: function() {
        var me = this;

        me.fromField = me.createList('Available');
        me.toField = me.createList('Selected');

        // add everything to the from field at the start
        me.fromField.store.add(me.store.getRange());

        return {
            layout: {
                type: 'hbox',
                align: 'stretch'
            },
            items: [
                me.fromField,
                {
                    xtype: 'container',
                    margins: '0 4',
                    width: 22,
                    layout: {
                        type: 'vbox',
                        pack: 'center'
                    },
                    items: me.createButtons()
                },
                me.toField
            ]
        };
    }, 
```

谢谢。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-01T01:01:58.240

为了让它工作，你可以在你的应用程序代码执行之前放入这些覆盖。（这需要在 4.1 中运行才能在 4.0 中使用 Ext.override 运行）

```
Ext.define('Ext.ux.form.override.MultiSelect', {
    override : 'Ext.ux.form.MultiSelect',

    setupItems : function() {
        var me = this;
        me.boundList = Ext.create('Ext.view.BoundList', {
            deferInitialRefresh : false,
            multiSelect : true,
            store : me.store,
            displayField : me.displayField,
            disabled : me.disabled
        });
        me.boundList.getSelectionModel().on('selectionchange', me.onSelectChange, me);
        //START OVERRIDE
        this.selectedPanel = new Ext.panel.Panel({
            bodyStyle : 'border: 0;',
            layout : 'fit',
            title : me.title,
            tbar : me.tbar,
            items : me.boundList
        });

        return {
            xtype : 'container',
            layout : 'fit',
            items : this.selectedPanel
        };
    }
});

Ext.define('Ext.ux.form.override.ItemSelector', {
    override : 'Ext.ux.form.ItemSelector',

    fromTitle : 'Available',
    toTitle : 'Selected',

    setupItems : function() {
        var items = this.callParent();

        this.fromField.selectedPanel.setTitle(this.fromTitle);
        this.toField.selectedPanel.setTitle(this.toTitle);

        return items;
    }
}) 
```

我建议不要在生产中使用这个组件。如您所知，Ext 不支持它，而且它很容易发生变化。代码也很糟糕，这两个组件不能更紧密地耦合。

# c# - 如何让我的位置服务在我的 Windows Phone 芒果应用程序的每个页面上运行

> ID：10816191
> 
> 赞同：0
> 
> 时间：2012-05-30T12:21:55.343
> 
> 标签：c#, silverlight, windows-phone-7.1

在我的 windows phone mango 应用程序中，我正在使用位置服务。现在我想要的是页面用户导航位置服务的任何内容都可以使用 WCF 调用不断感知并不断更新当前位置。目前它在 1 页上运行良好。但是当我导航到另一个页面时它不起作用。我知道这与应用程序的设计有关。

请尽可能详细地提出最佳行动方案。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T12:57:34.110

创建一个应用级别的 GeoCoordinateWatcher 实例并初始化一次。继续使用直到您关闭/停用应用程序

# c# - 表示时间段的最有效方式

> ID：10816198
> 
> 赞同：5
> 
> 时间：2012-05-30T12:22:26.407
> 
> 标签：c#, datetime, timespan

我需要一段时间，例如一周，然后将其分解为几天，然后进一步分解为几小时、30 分钟、15 分钟等。

然后我希望能够将（可能是多个）人分配到这些时间跨度。

例如

2012 年 5 月 30 日

0700 : 0730 - 爱丽丝，鲍勃

0730 : 0800 - 爱丽丝

……：……

1930 : 2000 - 爱丽丝

2012 年 5 月 31 日

0700 : 0730 - 卡罗尔

0730 : 0800 - 卡罗尔

……：……

1930 : 2000 - 卡罗尔

每天的开始时间和结束时间是可定制的。

我需要能够对工作期间进行排序并查询它们以查看是否有人没有分配给他们。检查一天/一周内没有人被分配到 > x 小时。

我知道 .Net 有 TimeSpan 和 DateTime 但这些似乎很麻烦，因为它们似乎是一些数据的简单表示，而 TimeSpan 没有 StartTime，它纯粹只是一个时间跨度（例如 30 分钟、5 分钟、1 小时等）。

我最初的想法是创建一个名为 WorkingDay 的类，一个 WorkingDay 可以有多个 WorkingPeriod。WorkingPeriod 有一个 StartTime 和 EndTime 以及一个分配给该 WorkingPeriod 的人员列表，使用 AddPerson 和 RemovePerson 的简单方法。

WorkingDay 将具有一项功能，通过运行 WorkingPeriods 并提取分配给任何时间段的所有唯一人员来获取分配给该天的人员列表。它还将具有一个功能，该功能可以提取所有未分配任何人的 WorkingPeriods。

不过，这似乎太麻烦了！尤其是当我需要一些其他的东西来占用多个工作日并检查某人在多天内分配的总时间是否少于 x 小时等。

对此有什么好的结构建议吗？他们是现有的.Net结构，可以提供我所缺少的吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-30T12:34:29.873

时隙的最直接（和紧凑）表示是`DateTime start, TimeSpan duration`.

这很适合查询，不太适合设置和验证（防止重叠等）。

下一个选项是将每天（或每周）划分为固定数量的时段，将这些时段定义一次并将每个时间段编码为`DateTime base, int PeriodId`. 更适合查找空的和重复的。

# c# - 无法读取数据矩阵条码

> ID：10816199
> 
> 赞同：2
> 
> 时间：2012-05-30T12:22:29.587
> 
> 标签：c#, crystal-reports

我在 iPhone 上读取 Data Matrix 代码时遇到问题。我正在使用 scanlife 应用程序。我正在尝试读取从水晶报表打印的数据矩阵代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T07:56:50.410

我认为水晶报告上的条形码尺寸很小。增加条码的大小，然后试试看。

# xml - 如何在java中使用sax解析器解析xml？

> ID：10816200
> 
> 赞同：1
> 
> 时间：2012-05-30T12:22:37.560
> 
> 标签：xml

在一个循环中，每次我需要解析一个新的 xml 并且在 xml 中我必须解析一些特定的节点，如果它们有值然后将它们复制到另一个文件，否则继续直到最后一个 xml，怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T15:02:37.357

Sax 的本质是您不拥有控制流：当您说“循环中”时，您是在暗示您想要控制流。使用 Sax，解析器会在准备好时调用您。如果您想控制，请尝试使用拉式解析器（Stax，例如 Woodstox）。

# php - php/jquery 应用程序应该如何做 Ajax 安全？

> ID：10816208
> 
> 赞同：0
> 
> 时间：2012-05-30T12:22:57.430
> 
> 标签：php, jquery, access-control

我正在使用 PHP 中的一个模块，它使用来自另一个系统的登录身份验证，并具有以下特征：

*   登录是通过表单提交完成的，然后基于用户登录允许访问基于后端处理的不同子模块集。
*   页面交互都是用 jQuery 完成的。与后端的通信都是在 Ajax 中完成的。
*   子模块包括报告和 CRUD 表单，每个都需要访问控制，例如，1 个部门无法查看报告 A，但可以查看报告 B，而另一个部门可以同时查看两者。表格严格适用于某些群体。
*   所有 AJAX 请求都返回 JSON

我可以找出后端的 ACL，但我不确定 AJAX 请求的安全性。
我能想到的最好的办法是为每个用户、每个子模块提供 API 密钥，并检查每个请求的用户会话。

澄清一下，我无法触及登录过程，因为它仅限于另一个系统。我只能获取 cookie 并查询其他系统以验证他们是否已登录。

在这种情况下，您将如何加强 AJAX 安全性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T12:34:40.690

> 我可以找出后端的 ACL

是的，你可以……而且必须。您不能相信客户端会告诉您是否允许客户端访问某些内容。

> 但我不确定如何保护 AJAX 请求。

Ajax 请求只是由 JavaScript 发出的 HTTP 请求。保护它们的唯一区别是您编写的 JavaScript 必须为“权限被拒绝”响应做好准备（因此它可以向用户显示合适的消息）。

> 我能想到的最好的办法是为每个用户、每个子模块提供 API 密钥，并检查每个请求的用户会话。

通常，您只需使用会话来跟踪用户的登录状态以及他们的访问级别/角色。您说您可以访问 cookie，使用它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T12:31:13.243

基本上保证一个http请求的安全性总是一样的，ajax与否。

有不同种类的检查：

*   数据一致性：服务器接收到数据时检查可能的注入，但客户端接收到数据时也要检查，以避免间接注入。
*   数据来源：检查谁是发件人，并尽可能使用 SSL。

rgds。

# google-app-engine - 使用 Google AppEngine 命名空间，但能够访问所有租户数据

> ID：10816209
> 
> 赞同：3
> 
> 时间：2012-05-30T12:23:05.127
> 
> 标签：google-app-engine, google-cloud-datastore

我正在研究实现多租户应用程序的不同方法——其中一种是使用 AppEngine 命名空间 API。

要求之一是我们将能够访问不同租户的数据，但每个租户只能访问自己的数据。通过这种方式，我们将能够看到多个租户发生的趋势。

是否可以使用 AppEngine 命名空间 API 来做这样的事情？

谢谢你，伊多。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T16:13:17.410

管理访问，管理员可以访问所有命名空间，但非管理员租户只能访问他们自己的，使用命名空间和用户服务中的少量方法很容易实现。

请参阅 [https://developers.google.com/appengine/docs/python/users/adminusers](https://developers.google.com/appengine/docs/python/users/adminusers) https://developers.google.com/appengine/docs/python/multitenancy/overview

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T19:20:18.153

我设法做到这一点，部分是通过使用该`NamespaceManager.set`方法访问特定的租户数据。我可以一次选择一个租户数据，但这对我来说很好。

我愿意。

# ios - 如何在 iOS 上的表格视图中放置文本？

> ID：10816211
> 
> 赞同：1
> 
> 时间：2012-05-30T12:23:08.200
> 
> 标签：ios, views, cell

我解析了一个充满文章的 XML 文件，每篇文章都有标题、描述和日期。

我正在解析这个 xml 并尝试将信息放在表格视图中，以便在每个单元格中我可以看到每篇文章的标题、描述和日期。

在每个单元格中，我都有类似的标题`cell.textLabel.text = . . .` 和类似的描述`cell.textDetailLabel.text = . . .` ，它们工作正常。如何在单元格中添加第三行并添加日期？

此外，如果标题很长，我无法在我的单元格中看到所有内容。如何确保它适合单元格？我尝试更改字体，但这只会使字母变小。我想使用多行来显示标题和描述。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T12:27:10.080

创建您自己的标签并将其添加到 UITableViewCell 并为单元格创建动态单元格高度。请参阅以下网址 [http://www.cimgf.com/2009/09/23/uitableviewcell-dynamic-height/](http://www.cimgf.com/2009/09/23/uitableviewcell-dynamic-height/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T13:12:32.927

使用 UITableViewCell 类来准确定义您希望单元格显示的方式。看看 Apple Docs on this（下面的链接），特别是在“iPhoneCoreDataRecipes”示例代码项目中。查看RecipeTableViewCell 类和recipeListTableViewController.m 中cellForRowAtIndexPath: 方法的变化

[https://developer.apple.com/library/ios/#documentation/UIKit/Reference/UITableViewCell_Class/Reference/Reference.html](https://developer.apple.com/library/ios/#documentation/UIKit/Reference/UITableViewCell_Class/Reference/Reference.html)

# c# - 动态 linq 查询不起作用

> ID：10816217
> 
> 赞同：5
> 
> 时间：2012-05-30T12:23:25.533
> 
> 标签：c#, linq, entity-framework, linq-to-sql, entity-framework-4

我正在使用此处找到的动态 Linq 库：

[http://speakingin.net/2008/01/08/dynamic-linqparte-1-usando-la-libreria-de-linq-dynamic/](http://speakingin.net/2008/01/08/dynamic-linqparte-1-usando-la-libreria-de-linq-dynamic/)

[http://msdn.microsoft.com/en-us/vstudio//bb894665.aspx](http://msdn.microsoft.com/en-us/vstudio//bb894665.aspx)

我的 DAL 中有以下代码：

```
public IQueryable<RequestBase> GetRequestByCustomQuery(string strql)
            {
                return _context.RequestBases.Where(strql);
            } 
```

我的页面中有以下代码：

```
protected void BtnOpenReport_Click(object sender, EventArgs e)
        {
             var list = RequestBaseBL.GetRequestByCustomQuery("RequestNumber = 12");
            GrvResults.DataSource = list;
            GrvResults.DataBind();
        } 
```

我省略了所有其他层，但是有一个 BL，然后是 Dal Facade，然后是 DL，但他们所做的只是将字符串传递到最后一层，即 DAL。

我得到了例外

```
Operator '=' incompatible with operand types 'String' and 'Int32' 
```

对象是这样的：

```
public class RequestBase
    {
        public int RequestBaseId { get; set; }
        public string CurrentStatus { get; set; }
        public string RequestNumber { get; set; }
        public DateTime RequestDate { get; set; }
        public bool IsOnHold { get; set; }

        public virtual Dealer Dealer { get; set; }
        public virtual Requester Requester { get; set; }
        public virtual Vehicle Vehicle { get; set; }

        public virtual ICollection<Attachment> Attachments { get; set; }
        public virtual ICollection<WorkflowHistory> WorkflowHistories { get; set; } 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-30T12:29:38.597

这可能是因为您的 RequestNumber 被定义为对象中的字符串。但在请求中， `"RequestNumber = 12"` 12 被视为一个数字。

尝试`"RequestNumber == \"12\""`

你也不能使用简单的引号，因为它是用于字符的，也就是说只有一个字母。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T12:27:43.050

我认为你需要改变

```
"RequestNumber = 12" 
```

到

```
"RequestNumber = '12'" 
```

因为`RequestNumber`是一个`string`。如果你没有`''`周围它会认为它是一个`int`

**编辑**

您也可以尝试`"RequestNumber == \"12\""`使用转义字符

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T12:25:47.933

我知道你的“RequestNumber”是字符串，必须使用 Equals(“12”)，试试这个它肯定可以工作。

RequestNumber.Equals("12")

快乐编码！！！

# c# - 适用于小屏幕和大屏幕的 Winform 设计方法

> ID：10816219
> 
> 赞同：0
> 
> 时间：2012-05-30T12:23:34.597
> 
> 标签：c#, winforms, devexpress

我有多个标签，里面有不同的数据。第一个选项卡有 ListView，它基本上填满了整个 TabPage。当它以小分辨率观看时看起来不错，如果它是大分辨率则很好，因为它可以很好地缩放。如果没有足够的数据来填充整个空间，它只会为数据提供更多空间。

![在此处输入图像描述](../Images/a7a0a252b15a69fde5e441538ab07876.png)

但是，我遇到了其他选项卡的问题，这些选项卡基本上包含一些 GroupBoxes 和一些 TextBoxes，如下面的屏幕所示。

![在此处输入图像描述](../Images/721014a0a10e507ac9be71fbed2aacde.png)

数据量始终是静态的，这就是我遇到问题的地方。它在小屏幕上看起来不错，因为 TextBoxes 和 GroupBoxes 填充得很好。但在更大的显示器上，我不知道如何处理它。要么我可以使 TextBoxes 更大，但对于某些字段来说似乎非常不切实际，并且街道名称从 Monitor 的一侧到另一侧似乎根本不是一个逻辑选择。我可以制作 Groupboxes 来填充空间，但它仍然是一个空的空间，看起来......很空。像这样离开它是“正常的”吗，或者如何处理这样的空白空间？我无法真正将更多内容移入其中，因为在较小的屏幕上会出现问题。有什么可以做的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T13:54:23.250

我将尝试在评论中说明我在说什么。从图像中我看到您使用 DevExpress 组件，我也这样做并创建了简单的示例： 2 `TextEdits`（让我们想象它代表城市条目）在`LayoutControl`. `TextEdits.Properties.MaxLength`设置为 30 - 与数据库表字段大小相同。第一个`TextEdit`没有限制`Width`，第二个`TextEdit.MaxSize.Width = 280`

![在此处输入图像描述](../Images/b54dcbdb7ccf32d76fc7d034a381df93.png)

现在在第一张图片`TextEdits`中看起来不错，但在第二张图片中首先`TextEdit`很奇怪 - 它很长，但您只能输入 30 个符号。第二个`TextEdit`非常清楚 - 它显示了应有的符号。

所以我认为没有必要填满所有空白，而只需创建直观的 UI。您可以稍后在该空白处添加更多控件。

# python - 如何使用 tox 和 py.test 将单元测试限制在支持的平台上？

> ID：10816224
> 
> 赞同：2
> 
> 时间：2012-05-30T12:23:47.263
> 
> 标签：python, setuptools, pytest, tox

我确实有一个小的 python 包[teno](https://github.com/ssbarnea/tendopy)，我想让它在各种 python 版本上运行、测试和安装，从 2.5 开始到 3.2 结束

我需要 2.5 支持，因为我们仍然有机器运行它并且还不能升级。

目前，单元测试包含在模块中，这使得当您更改模块并运行它们时更容易更新它们，因为**main**将运行测试。

某些模块并非在所有平台上都可用。

```
setup.py
setup.cfg
tox.ini
mypackage/foo.py
mypackage/bar.py 
```

Tox 配置为`py.test`在所有平台上运行，但`[pytest]`from 部分仍配置为在所有文件`setup.cfg`中查找测试。`*.py`

这带来了一个问题：其中一些文件不应该在上面运行，`py25`并且不可能为此调整它们。

我正在寻找一种配置，它可以让我指定为某些平台加载（或更好地排除）哪些模块。

期望的行为是能够在所有受支持的 python 版本上安装这个包。（显然应该跳过几个模块）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T10:35:59.967

您可以使用 conftest.py 文件来自定义测试集合。例如，您可以跳过所有版本的 setup.py 和 python3 上的特定模块，如下所示：

```
# content of conftest.py
import sys

collect_ignore = ["setup.py"]
if sys.version_info[0] > 2:
    collect_ignore.append("pkg/module_py2.py") 
```

如果你把这个 conftest.py 文件放在你的 setup.py 文件旁边并且有一个像这样的模块文件::

```
# content of pkg/module_py2.py
def test_only_on_python2():
    try:
        assert 0
    except Exception, e:
        pass 
```

然后你会`py.test --collectonly`在 Python2 下看到类似这样的东西::

```
$ py.test --collectonly
=========================== test session starts ============================
platform linux2 -- Python 2.7.3 -- pytest-2.2.5.dev1
collecting ... collected 1 items
<Module 'pkg/module_py2.py'>
  <Function 'test_only_on_python2'>

=============================  in 0.01 seconds ============================= 
```

根据 conftest.py 的定义，可以看到模块，而在 python3 下，不会收集`module_py2.py`nor文件。`setup.py`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-09T04:47:27.613

另一种选择，我个人更喜欢：

```
import os.path
import sys

py3 = sys.version_info[0] >= 3

def pytest_ignore_collect(path, config):
    basename = os.path.basename(str(path))
    return (not py3 and 'py3' in basename) or (py3 and 'py2' in basename) 
```

添加`py2`或`py3`测试文件将仅收集它们以在各自的 Python 版本下进行测试。

# winforms - 使用 VS2010，C# 代码在 Windows 窗体中的一列中合并编辑和删除列

> ID：10816225
> 
> 赞同：0
> 
> 时间：2012-05-30T12:23:49.713
> 
> 标签：winforms, c#-4.0

![在此处输入图像描述](../Images/ff470d3c4c7021c51ebf54bafaab4406.png)我在 Windows DataGridView 中有一个 Edit 列和另一个 Delete 列，我以编程方式绑定它们。假设我有一个列“Edit”和另一个“Delete”，它们都绑定到“ID”。现在我想合并这些两列都是“编辑/删除”，其中将有“编辑”和“删除”的链接..但是根据 VS Studio 2010 的 C# windows 窗体属性的 TableLayoutPanel 属性，我不能在一个单元格中有两个控件.. 如何使用 C# Windows 窗体代码实现此场景

代码 ：-

```
public frmTopicSectionManagement()

{

InitializeComponent();

PopulateTopicList();

PopulateGridView();

}

private void PopulateGridView()

{

try

{

string PYear = "";

int pId;

int TopicId = Convert.ToInt32(((Topiclist)cmbTopics.SelectedItem).TopicId);

PYear = StartUp.PlanYear.ToString();

pId = StartUp.ProductTypId;

TopicSectionLookup objTopicSection = new TopicSectionLookup();

if (repo.GetAllTopicSections() != null && TopicId == -1 && PYear != "")

  {

 GridView_TopicSection.DataSource = repo.GetAllTopicSectionDisplayTopicTitle(pId, PYear).ToList();                    GridView_TopicSection.Columns["ProductType"].Visible = false;

 GridView_TopicSection.Columns["Year"].Visible = false;                 
PopulateAllGridView();

        }
    else if (repo.GetAllTopicSections() != null)
    {
    GridView_TopicSection.DataSource = repo.GetAllTopicsForSectionManagement(TopicId, pId, PYear).ToList();
                GridView_TopicSection.Columns["ProductType"].Visible = false;
                GridView_TopicSection.Columns["Year"].Visible = false;
                PopulateAllGridView();
            }
            else
            {
                return;
            }
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.Message);
        }
              }

    private void PopulateAllGridView()
    {
        try
        {
            //Add Update Button to DataGridView(Problems here)
            if (!GridView_TopicSection.Columns.Contains("Update") || !!GridView_TopicSection.Columns.Contains("Delete"))
            {
                DataGridViewLinkColumn updateColumn = new DataGridViewLinkColumn();
                updateColumn.Name = "Edit";
                updateColumn.HeaderText = "Update";
                updateColumn.Text = "Edit";
                updateColumn.Width = 50;
                updateColumn.DividerWidth = 0;
                updateColumn.UseColumnTextForLinkValue = true;
                GridView_TopicSection.Columns.Add(updateColumn);

                //  Add Delete Button to GridView (and here)
                DataGridViewLinkColumn deletecolumn = new DataGridViewLinkColumn();
                deletecolumn.Name = "Delete";
                deletecolumn.HeaderText = "Delete";
                deletecolumn.Text = "Delete";
                deletecolumn.Width = 103;
                deletecolumn.UseColumnTextForLinkValue = true;
                GridView_TopicSection.Columns.Add(deletecolumn);
            }

            GridView_TopicSection.Columns["TopicId"].Visible = false;
            GridView_TopicSection.Columns["TopicSectionLookupId"].Visible = false;
            GridView_TopicSection.Columns["TopicTitle"].Visible = true;
            GridView_TopicSection.Columns["TopicTitle"].Width = 200;
            GridView_TopicSection.Columns["SectionText"].Visible = true;
            GridView_TopicSection.Columns["SectionText"].Width = 200;
            GridView_TopicSection.Columns["Year"].Visible = false;
            GridView_TopicSection.Columns["ProductTypeId"].Visible = false;
            GridView_TopicSection.Columns["IsActive"].Visible = true;
            GridView_TopicSection.Columns["IsActive"].Width = 80;
            GridView_TopicSection.Columns["IsBenifit"].Visible = true;
            GridView_TopicSection.Columns["IsBenifit"].Width = 80;
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.Message);
        }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T13:19:49.340

*假设*您希望在名为**Edit / Delete**的单个单元格中有**两个链接**，那么我认为您应该使用包含两个 LinkLabel 的自定义单元格类型创建一个自定义列类型。

 **更多关于单个数据网格视图单元格中的多个控件[带有源代码] [。](http://social.msdn.microsoft.com/forums/en-US/winformsdesigner/thread/c28399bb-9d50-4a1e-b671-3dbaebb5cc69/)

**[解决方案 1 -*合并*标题]**

您不需要合并列，而是合并标题 - 像[这样](http://i.imagehost.org/0196/s3.gif)。然后，请参考[相关 SO 帖子](https://stackoverflow.com/a/1937719/763026)中的解决方案。这应该可以解决您的问题。

**[解决方案 2 -*合并*列]** 您可以在单个数据网格视图单元格中托管多个控件，这就是您想要实现的。创建一个**带有两个链接标签的 winforms 用户控件，**并将该用户控件托管在 datagridview 单元格中。因此，您将在单个单元格中进行编辑/删除*[您所指的合并列*]。请参阅此处以在数据网格视图单元格中托管自定义控件 - [http://msdn.microsoft.com/en-us/library/7tas5c80.aspx?PHPSESSID=o1fb21liejulfgrptbmi9dec92](http://msdn.microsoft.com/en-us/library/7tas5c80.aspx?PHPSESSID=o1fb21liejulfgrptbmi9dec92)**

# css - IE8 的 CSS 问题

> ID：10816226
> 
> 赞同：0
> 
> 时间：2012-05-30T12:23:50.517
> 
> 标签：css, internet-explorer-8

这里的链接 - [http://indivar.us/StackOverFlow/PTCNews/Website/](http://indivar.us/StackOverFlow/PTCNews/Website/)

你好

请找到上面的链接。显示“**世界和国家**”的块在IE8中不会向左浮动，但在其他浏览器中工作得很好。

我的 css 代码（ie8.css）是否有任何缺陷，或者我找不到正确的方法？你能告诉我它是如何像在 IE9 或其他浏览器中一样向左浮动的吗？

谢谢 B。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T12:31:28.907

`UL.outside-punjab`只需从ie8.css中的类中删除宽度

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T12:30:33.630

删除**`ul.outside-punjab`**类的宽度然后它将正常工作

# c++ - 在 std::function 参数上强制执行 const ref

> ID：10816228
> 
> 赞同：2
> 
> 时间：2012-05-30T12:24:13.287
> 
> 标签：c++, visual-c++, reference, lambda, std-function

我有一个带有 std::function 参数的函数。我希望 std::function 有一个 bool& 参数：

```
void function(std::function<bool(bool&)> lambda); 
```

但是没有强制执行 ref 约束，我可以拥有：

```
auto lambda = [](bool canceled) ->bool{}; 
```

或者

```
auto lambda = [](bool& canceled) ->bool{}; 
```

编译器是 MSVC 2010。

**注意**

第一个示例为 bool 使用了一个 const ref，因为 bool 变量在另一个线程中发生了更改，我需要跟踪其用于 ref 的值。而且我不能在 lambda 中修改它，因此是 const。

# android - WebViewClient 类未在 android 3.1 中实例化

> ID：10816231
> 
> 赞同：3
> 
> 时间：2012-05-30T12:24:15.437
> 
> 标签：android, webviewclient

当指定的 url 被重定向到另一个时面临问题。我已经为我的 webview 实现了 webviewclient。android 2.3 及更低版本会调用 webviewclient 类，但不会调用 android 3.1。

下面是我的代码。

```
 protected void onCreate(Bundle savedInstanceState)
     {
             super.onCreate(savedInstanceState);
             setContentView(R.layout.abc);
             WebView ww = (WebView)findViewById(R.id.webview);
             ww.getSettings().setJavaScriptEnabled(true);
             ww.getSettings().setJavaScriptCanOpenWindowsAutomatically(false);

             String ggurl = "https://twitter.com/"+twitter_url;
             ww.setWebViewClient(new Callback());
             ww.loadUrl(ggurl); 
     }
         public class Callback extends WebViewClient
     {  
    @Override
         public boolean shouldOverrideUrlLoading(WebView view, String url) 
            {

          if(url.equals("http://www.abc.com/misc/not_found.php"))
               {
            System.out.println("Not found url thrown...");
            url="http://www.abc.com/index";
            ww.setWebViewClient(new Callback());
            ww.loadUrl(url);
               }
        else
               {
            System.out.println("Found page of college thrown");
               }

        return false;
            }

     }
  } 
```

建议我在哪里做错了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T07:28:17.283

我解决了我的问题；因为不会工作`http://`。`shouldOverrideUrlLoading()`

必须使用`onPageFinished()`里面的所有代码都`shouldOverrideUrlLoading()`必须在里面`onPageFinished().`

# python - 在scrapy python中的一行csv文件中每列排列一个项目

> ID：10816241
> 
> 赞同：1
> 
> 时间：2012-05-30T12:24:49.477
> 
> 标签：python, csv, dictionary, scrapy, pipeline

我有从网站上抓取的项目，我将它们放入如下的 json 文件中

```
{
 "author": ["TIM ROCK"], 
 "book_name": ["Truk Lagoon, Pohnpei &amp; Kosrae Dive Guide"], 
 "category": "Travel", 
}
{
 "author": ["JOY"], 
 "book_name": ["PARSER"], 
 "category": "Accomp", 
} 
```

我想将它们存储在 csv 文件中，每行一个字典，其中每列一个项目如下

```
|    author   |     book_name     |    category   |
|   TIM ROCK  |  Truk Lagoon ...  |     Travel    |
|     JOY     |   PARSER          |     Accomp    | 
```

我在一行中获取一本字典的项目，但所有列都组合在一起

我的`pipeline.py`代码是

导入 csv

```
class Blurb2Pipeline(object):

    def __init__(self):
        self.brandCategoryCsv = csv.writer(open('blurb.csv', 'wb'))
        self.brandCategoryCsv.writerow(['book_name', 'author','category'])

    def process_item(self, item, spider):
        self.brandCategoryCsv.writerow([item['book_name'].encode('utf-8'),
                                    item['author'].encode('utf-8'),
                                    item['category'].encode('utf-8'),
                                     ])
        return item 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T12:36:00.563

要点是这很简单`csv.DictWriter`：

```
>>> inputs = [{
...  "author": ["TIM ROCK"], 
...  "book_name": ["Truk Lagoon, Pohnpei &amp; Kosrae Dive Guide"], 
...  "category": "Travel", 
... },
... {
...  "author": ["JOY"], 
...  "book_name": ["PARSER"], 
...  "category": "Accomp", 
... }
... ]
>>> 
>>> from csv import DictWriter
>>> from cStringIO import StringIO
>>> 
>>> buf=StringIO()
>>> c=DictWriter(buf, fieldnames=['author', 'book_name', 'category'])
>>> c.writeheader()
>>> c.writerows(inputs)
>>> print buf.getvalue()
author,book_name,category
['TIM ROCK'],"['Truk Lagoon, Pohnpei &amp; Kosrae Dive Guide']",Travel
['JOY'],['PARSER'],Accomp 
```

最好将这些数组加入某些东西，但由于元素可以是 list 或*string*，所以有点棘手。判断某事物是字符串还是其他可迭代对象是 Python 中为数不多的直接类型检查很有意义的情况之一。

```
>>> for row in inputs:
...     for k, v in row.iteritems():
...         if not isinstance(v, basestring):
...             try:
...                 row[k] = ', '.join(v)
...             except TypeError:
...                 pass
...     c.writerow(row)
... 
>>> print buf.getvalue()
author,book_name,category
TIM ROCK,"Truk Lagoon, Pohnpei &amp; Kosrae Dive Guide",Travel
JOY,PARSER,Accomp 
```

# android - 使用 EditText 在 ListView 中搜索

> ID：10816243
> 
> 赞同：7
> 
> 时间：2012-05-30T12:24:53.293
> 
> 标签：android

我有一个`ListView`. 它的每一行都包含 3`TextView`和 2 `Button`。在它上面我有一个`EditText`. `ListView`如何按每行第一行的值过滤我的值`TextView`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T12:52:01.233

为列表视图创建一些数组列表。在“AddTextChangeListener”上，您可以搜索列表中的类似项目并为搜索的文本加载新的数组列表...

```
edittext.addTextChangedListener(new TextWatcher(){
public void afterTextChanged(Editable s) {
     //search for the keyword and add the items to a new arraylist
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T16:57:03.020

下面的代码使用自定义列表适配器。

我使用自定义列表适配器显示了 3 个文本视图。我制作了一个示例，它根据列表顶部的 editext 中的输入进行搜索。根据输入与每行的 textview1 中的数据进行比较，并相应地过滤和显示数据。

您可以在 listview 行中有其他项目，搜索可以基于 texview1/textview2 或 textview3。根据您的需要修改以下内容。

```
public class MainActivity extends Activity {
ArrayList<NewData> mTemp=new ArrayList<NewData>();
ArrayList<NewData> mPostingData=new ArrayList<NewData>();
ArrayList< NewData> mOri = new ArrayList<NewData>();

Myadapter ma;
EditText search;

NewData nd;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    for(int i = 0; i < 20; i++)
    {

        nd=new NewData();

        nd.newDatacus.put(NewData.TAG_CUSTOMER_CODE, "i"+i);
        nd.newDatacus.put(NewData.TAG_CUSTOMER_NAME, "a"+i);
        nd.newDatacus.put(NewData.TAG_CUSTOMER_MOBILE, "number");
        nd.newDatacus.put(NewData.TAG_CUSTOMER_ADDRESS, "address");
        mOri.add(nd);
    }

    ma= new Myadapter(MainActivity.this);
    mPostingData=mOri;
    mTemp=mOri;
    ListView lv= (ListView) findViewById(R.id.list);
    lv.setAdapter(ma);
    search= (EditText) findViewById(R.id.search);
    search.addTextChangedListener(new TextWatcher() {

        public void onTextChanged(CharSequence s, int start, int before, int count) {
            ma.getFilter().filter(s);
            ma.notifyDataSetChanged();

        }

        public void beforeTextChanged(CharSequence s, int start, int count,
                int after) {

        }

        public void afterTextChanged(Editable s) {
        }
    });

}

class Myadapter extends ArrayAdapter
{
    LayoutInflater mInflater;

    public void setData(ArrayList<NewData> mPpst) {   
        mPostingData = mPpst;//contains class items data.
    }

    @Override
    public Filter getFilter() {
        return new Filter() {
            @Override
            protected void publishResults(CharSequence constraint, FilterResults results) {
                if (results != null && results.count >= 0) {
                    setData((ArrayList<NewData>) results.values);//if results of search is null set the searched results data
                } else {
                    setData(mOri);// set original values
                }

                notifyDataSetInvalidated();
            }

            @Override
            protected FilterResults performFiltering(CharSequence constraint) {
                FilterResults result = new FilterResults();
                if (!TextUtils.isEmpty(constraint)) {
                    constraint = constraint.toString().toLowerCase();
                    ArrayList<NewData> foundItems = new ArrayList<NewData>();
                    if(mTemp!=null)
                    {
                        for(int i=0;i<mTemp.size();i++)
                        {

                            if (mTemp.get(i).newDatacus.get(NewData.TAG_CUSTOMER_CODE).toString().contains(constraint)) {
                                System.out.println("My datas"+mTemp.get(i).newDatacus.get(NewData.TAG_CUSTOMER_CODE).toString());
                                foundItems.add(mTemp.get(i));

                            }
                            else
                            {

                            }
                        }
                    }
                    result.count = foundItems.size();//search results found return count
                    result.values = foundItems;// return values
                } 
                else
                {
                    result.count=-1;// no search results found
                }

                return result;
            }
        };
    }
    public Myadapter(Context context) {
        super(context, 0);
        mInflater = (LayoutInflater)context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        // TODO Auto-generated constructor stub
    }

    @Override
    public int getCount() {
        // TODO Auto-generated method stub
        return mPostingData.size();
    }

    @Override
    public Object getItem(int position) {
        // TODO Auto-generated method stub
        return position;
    }

    @Override
    public long getItemId(int position) {
        // TODO Auto-generated method stub
        return 0;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        // TODO Auto-generated method stub
        ViewHolder holder;

        if(mOri == null ){

            return null;
        }
        // When convertView is not null, we can reuse it directly, there is no need
        // to reinflate it. We only inflate a new View when the convertView supplied
        // by ListView is null.
        if (convertView == null) {
            convertView = mInflater.inflate(R.layout.list, null);
            convertView.setLayoutParams(new AbsListView.LayoutParams(LayoutParams.FILL_PARENT,
                    LayoutParams.WRAP_CONTENT));
            // Creates a ViewHolder and store references to the two children views
            // we want to bind data to.
            holder = new ViewHolder();
            holder.t1=(TextView) convertView.findViewById(R.id.textView1);
            holder.t2 = (TextView) convertView.findViewById(R.id.textView2);
            holder.t3 = (TextView) convertView.findViewById(R.id.textView3);

            convertView.setTag(holder);
        } else {
            // Get the ViewHolder back to get fast access to the TextView
            // and the ImageView.
            holder = (ViewHolder) convertView.getTag();
        }
        holder.t1.setText(mPostingData.get(position).newDatacus.get(NewData.TAG_CUSTOMER_CODE).toString());
        holder.t2.setText(mPostingData.get(position).newDatacus.get(NewData.TAG_CUSTOMER_NAME).toString());
        holder.t3.setText(mPostingData.get(position).newDatacus.get(NewData.TAG_CUSTOMER_MOBILE).toString());
        return convertView;
    }
}
class ViewHolder
{
    TextView t1,t2,t3;
} 
```

主.xml

```
<?xml version="1.0" encoding="utf-8"?> 
```

```
<EditText
    android:id="@+id/search"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" />

<ListView
    android:id="@+id/list"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" /> 
```

List.xml //要膨胀的xml

```
<TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:paddingLeft="20dp"
    android:text="TextView" />

<TextView
    android:id="@+id/textView2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:paddingLeft="20dp"
    android:text="TextView" />

<TextView
    android:id="@+id/textView3"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:paddingLeft="20dp"
    android:text="TextView" /> 
```

新数据类

```
 public class NewData {
  public static final String TAG_CUSTOMER_CODE = "customer_code";
  public static final String TAG_CUSTOMER_NAME = "customer_name";
  public static final String TAG_CUSTOMER_MOBILE = "customer_mobile";
  public static final String TAG_CUSTOMER_ADDRESS = "customer_address";

  Hashtable newDatacus=new Hashtable();

  public NewData()
  {

    newDatacus.put(NewData.TAG_CUSTOMER_CODE,new String());
    newDatacus.put(NewData.TAG_CUSTOMER_ADDRESS,new String());
    newDatacus.put(NewData.TAG_CUSTOMER_NAME,new String());
    newDatacus.put(NewData.TAG_CUSTOMER_MOBILE,new String());
    newDatacus.put(NewData.TAG_CUSTOMER_ADDRESS,new String());

 }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T12:30:52.730

按照链接

[http://marakana.com/forums/android/learning_android_book/617.html](http://marakana.com/forums/android/learning_android_book/617.html)

[http://androidsearchfilterlistview.blogspot.in/2011/06/android-custom-list-view-filter.html](http://androidsearchfilterlistview.blogspot.in/2011/06/android-custom-list-view-filter.html)

[在android中的EditText上输入时如何过滤ListView数据](https://stackoverflow.com/questions/1645209/how-can-i-filter-listview-data-when-typing-on-edittext-in-android)

[如何在 Android 上动态更新 ListView](https://stackoverflow.com/questions/1737009/how-to-make-a-nice-looking-listview-filter-on-android)

# zend-framework - 如何使用 Zend Gdata 将谷歌文档移动到文件夹中

> ID：10816248
> 
> 赞同：1
> 
> 时间：2012-05-30T12:25:02.397
> 
> 标签：zend-framework, gdata, gdata-api, zend-gdata

嗨，伙计们，我真的很难使用 zend gdata 将文档从我的根文件夹移动到另一个文件夹，这就是我尝试这样做的方式，但它不起作用。

```
$service = Zend_Gdata_Docs::AUTH_SERVICE_NAME;
$client = Zend_Gdata_ClientLogin::getHttpClient($gUser, $gPass, $service);
$link = "https://docs.google.com/feeds/documents/private/full/spreadsheet:0AUFNVEpLOVg2U0E"; // Not real id for privacy purposes
$docs = new Zend_GData_Docs($client);

// Attach a category object of folder to this entry
// I have tried many variations of this including attaching label categories
$cat = new Zend_Gdata_App_Extension_Category('My Folder Name','http://schemas.google.com/docs/2007#folder');

$entry = $docs->getDocumentListEntry($link);
$entry->setCategory(array($cat));

$return = $docs->updateEntry($entry,$entry->getEditLink()->href); 
```

当我运行它时，我得到没有错误，但似乎没有任何变化，并且返回数据不包含新类别。

**编辑：** 好的，我意识到它不是类别，而是决定资源属于哪个“集合”（文件夹）的链接。[https://developers.google.com/google-apps/documents-list/#managing_collections_and_their_contents](https://developers.google.com/google-apps/documents-list/#managing_collections_and_their_contents)说每个资源都有父链接，所以我尝试将代码更改为设置链接而不是设置类别，但这并没有工作。

```
$folder = "https://docs.google.com/feeds/documents/private/full/folder%3A0wSFA2WHc";
$rel = "http://schemas.google.com/docs/2007#parent";

$linkObj = new Zend_Gdata_App_Extension_Link($folder,$rel,'application/atom+xml', NULL,'Folder Name');
$links = $entry->getLink();
array_push($links,$linkObj);
$entry->setLink($links);

$return = $docs->updateEntry($entry,$entry->getEditLink()->href); 
```

**编辑：已解决 [几乎]** 好的 这里是如何从一个文件夹移动/复制到另一个文件夹：比最初想象的要简单，但问题是它创建了一个引用而不是移动！它现在同时在两个地方......

```
// Folder you want to move too
$folder = "https://docs.google.com/feeds/folders/private/full/folder%asdsad";
$data = $docs->insertDocument($entry, $folder); // Entry is the entry you want moved using insert automatically assigns link & category for you... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T11:12:02.537

要将文件复制/移动到文件夹中，请执行以下操作：

```
$service = Zend_Gdata_Docs::AUTH_SERVICE_NAME;
$client = Zend_Gdata_ClientLogin::getHttpClient($gUser, $gPass, $service); 
$docs = new Zend_GData_Docs($client);

$link = "https://docs.google.com/feeds/documents/private/full/spreadsheet:0AUFNVEpLOVg2U0E";
$entry = $docs->getDocumentListEntry($link);
// Folder (Collection you want to move to)
$folder = "https://docs.google.com/feeds/folders/private/full/folder%asdsad";
// Move
$data = $docs->insertDocument($entry, $folder); 
```

现在有些问题是：

1.  它似乎只制作**参考**副本，这意味着它仍然是同一个文档，只是它有一个额外的类别和父链接（所以它现在在两个地方）。这可以更好地解释它：[https ://groups.google.com/forum/embed/?place=forum/google-documents-list-api#!topic/google-documents-list-api/OrLi2JCINw4](https://groups.google.com/forum/embed/?place=forum/google-documents-list-api#!topic/google-documents-list-api/OrLi2JCINw4)

我确信必须有一种方法可以“更清洁”/更好地做到这一点，但至少它现在可以移动它。

# jquery-plugins - 带有数据表的特定列过滤器

> ID：10816251
> 
> 赞同：0
> 
> 时间：2012-05-30T12:25:08.753
> 
> 标签：jquery-plugins, datatables

```
<script type="text/javascript" charset="utf-8">
//initialisation code
    $(document).ready(function() {
        $('#example').dataTable( {
             "sPaginationType": "full_numbers",

        } );
    } );

    var asInitVals = new Array();

    $(document).ready(function() {

        $("tfoot input").each( function (i) {
            asInitVals[i] = this.value;
        } );

        $("tfoot input").focus( function () {
            if ( this.className == "search_init" )
            {
                this.className = "";
                this.value = "";
            }
        } );
        $("tfoot input").blur( function (i) {
            if ( this.value == "" )
            {
                this.className = "search_init";
                this.value = asInitVals[$("tfoot input").index(this)];
            }
        } );

        var oTable = $('.exam').dataTable( {
            "oLanguage": {
                "sSearch": "Search all columns:"
            },
            "bStateSave": true,
            "fnInitComplete": function() {
                var oSettings = $('.exam').dataTable().fnSettings();
                for ( var i=0 ; i<oSettings.aoPreSearchCols.length ; i++ ){
                    if(oSettings.aoPreSearchCols[i].sSearch.length>0){
                        $("tfoot input")[i].value = oSettings.aoPreSearchCols[i].sSearch;
                        $("tfoot input")[i].className = "";
                    }
                }
            }
        } );

        $("tfoot input").keyup( function () {
            /* Filter on the column (the index) of this element */
            oTable.fnFilter( this.value, $("tfoot input").index(this) );
        } );

    } );
</script>

</head>

<body>

<table id="example" class = "exam" width="100%" border="1" cellpadding="0" cellspacing="0" class="pretty" align="center"> 
```

我是 jquery 编程的新手。当我在浏览器中查看表格时，我看到了错误：

> 数据表警告（表 id = 'example'）：无法重新初始化数据表。要检索此表的数据表对象，请不传递任何参数或查看 bRetrieve 和 bDestroy 的文档

如何解决这个问题呢？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T15:52:44.230

您正在尝试两次初始化同一个表。首先你正在运行

```
 $(document).ready(function() {
    $('#example').dataTable( {
         "sPaginationType": "full_numbers",

    } );
} ); 
```

正在尝试使用示例 ID 初始化表上的数据表。然后你尝试在这里再次初始化它：

```
var oTable = $('.exam').dataTable( {
        "oLanguage": {
            "sSearch": "Search all columns:"
        },
        "bStateSave": true,
        "fnInitComplete": function() {
            var oSettings = $('.exam').dataTable().fnSettings();
            for ( var i=0 ; i<oSettings.aoPreSearchCols.length ; i++ ){
                if(oSettings.aoPreSearchCols[i].sSearch.length>0){
                    $("tfoot input")[i].value = oSettings.aoPreSearchCols[i].sSearch;
                    $("tfoot input")[i].className = "";
                }
            }
        }
    } ); 
```

在这里，您正在初始化一个包含考试类别的表格。在这种情况下，带有班级考试的表和示例的 ID 是同一个表。错误基本上是在说，嘿我已经初始化了这个表一次，我不能再做一次。

删除第一块代码，它应该可以解决您的问题。

# asp.net - 尝试连接数据库时 WCF 服务不工作

> ID：10816256
> 
> 赞同：1
> 
> 时间：2012-05-30T12:25:14.393
> 
> 标签：asp.net, wcf, visual-studio-2010, .net-4.0

我创建了一个 WCF 服务来与数据库通信，首先我创建了一个`Helloworld!`工作正常的示例方法

但是当我尝试调用实际方法时，它会给出以下异常

> 接收对[http://10.11.32.211:87/Service.svc](http://10.11.32.211:87/Service.svc)的 HTTP 响应时出错。这可能是由于服务端点绑定未使用 HTTP 协议。

在浏览器中

> 现有连接被远程主机强行关闭

## 我的 web.config 文件

```
<configuration>
<system.web>
<compilation debug="true" targetFramework="4.0"/>
</system.web>

<!--<system.serviceModel>
<behaviors>
  <serviceBehaviors>
    <behavior name="">
      <serviceMetadata httpGetEnabled="true"/>
      <serviceDebug includeExceptionDetailInFaults="true"/>
    </behavior>
  </serviceBehaviors>
</behaviors>
<serviceHostingEnvironment multipleSiteBindingsEnabled="true"/>
</system.serviceModel>-->

<system.serviceModel>
<serviceHostingEnvironment multipleSiteBindingsEnabled="true"/>
<services>
  <service behaviorConfiguration="ServiceBehavior" name="Service">
    <endpoint address="" binding="basicHttpBinding" contract="IService">
      <identity>
        <dns value="localhost"/>
      </identity>
    </endpoint>
    <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange"/>
  </service>
  </services>
  <behaviors>
   <serviceBehaviors>
     <behavior name="ServiceBehavior">
      <serviceMetadata httpGetEnabled="true"/>
      <serviceDebug includeExceptionDetailInFaults="true"/>
      <dataContractSerializer maxItemsInObjectGraph="2147483646"/>
       <serviceThrottling maxConcurrentCalls="3000" maxConcurrentSessions="3000" maxConcurrentInstances="3000"/>
     </behavior>
    </serviceBehaviors>
  </behaviors>
 </system.serviceModel>
 </configuration> 
```

我浏览了这些链接，但没有用 [MSDN LINK1](http://social.msdn.microsoft.com/Forums/en-US/wcf/thread/3aec066e-5985-4d3e-ae1e-b054597aaa84)

## 编辑

实际上我用这个服务做的是在服务器上执行一个存储过程

```
using (con = new SqlConnection(connectionString))
        {
            using (cmd = new SqlCommand(selectStatement, con) { CommandType = CommandType.StoredProcedure })
            {
                adapter = new SqlDataAdapter(cmd);
                table = new DataTable();
                adapter.Fill(table);
                return table;
            }
        } 
```

我可以从不同的网站手动调用相同的存储过程，但不使用此服务....

它是什么？为什么会这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T07:56:35.170

[我在这里](https://stackoverflow.com/a/42332/1196411)找到了答案，我们只需要在其构造函数中实例化具有指定名称的数据表

像

```
DataTable dt = new DataTable("TableName"); 
```

我不知道为什么这会出错，但这解决了问题......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T13:10:20.590

尝试增加发送或接收超时并为`basicHttpBinding`.

```
 <bindings>
    <basicHttpBinding>
      <binding  maxBufferSize="5000000" maxBufferPoolSize="524288" maxReceivedMessageSize="5000000" receiveTimeout="00:10:00" sendTimeout="00:10:00" >
        <readerQuotas maxDepth="32" maxStringContentLength="80192" maxArrayLength="50000000" maxBytesPerRead="4096" maxNameTableCharCount="16384"/>
      </binding>
    </basicHttpBinding>
  </bindings> 
```

# c# - 元素下的元素 <#text> 在 Azure 中无法识别

> ID：10816261
> 
> 赞同：14
> 
> 时间：2012-05-30T12:25:33.037
> 
> 标签：c#, visual-studio-2010, azure

这里有个大问题。我无法在 Visual Studio 中打开任何类型的项目。即使我创建一个新的，我也会收到错误：

> 元素下方的元素 <#text> 无法识别。C:\Program Files\MSBuild\Microsoft\VisualStudio\v10.0\Windows Azure 工具\1.6\Microsoft.WindowsAzure.targets。

如果有人知道请帮助我。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2015-05-20T09:26:48.920

我也遇到了这个问题。错误文本是：

```
The element <#text> beneath element <Target> is unrecognized.
c:\Program Files (x86)\MSBuild\12.0\Bin\Microsoft.CSharp.CurrentVersion.targets 
```

我的解决方案是根据我的一位同事的工作文件检查指示的文件。即使是 XML 解析器甚至浏览器在遇到此类错误时也会弹出错误。下面的元素`<Target>`已损坏。而不是`<Csc ... />`我有确切的`07sc ... />`. 我修复了格式并且它起作用了。请注意，错误文本 ( ) 中指示的文件`Microsoft.CSharp.CurrentVersion.targets`是有罪的。希望这可以帮助。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2019-10-09T08:07:45.673

通用 XML 错误也会发生这种情况。就我而言，它`>>`位于项目文件中的某个位置。是冲突解决过程中的复制粘贴错误，引入了它。遗憾的是，输出不包含有错误的行，因此请尝试在文件中搜索`<<`并`>>`查看这是否是某个地方的问题。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2018-02-23T08:46:46.447

如果应该在节点下的属性是`<PropertyGroup>`节点的子节点`<Target>`，也会发生这种情况

错误（产生错误）：

```
<Project ToolsVersion="15.0" DefaultTargets="CalculateVariables" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
  <Target Name="CalculateVariables">
    <IsWrong>true</IsWrong>
  </Target>
</Project> 
```

对（作品）：

```
<Project ToolsVersion="15.0" DefaultTargets="CalculateVariables" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
  <Target Name="CalculateVariables">
    <PropertyGroup>
      <IsWrong>true</IsWrong>
    <PropertyGroup>
  </Target>
</Project> 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-31T20:16:34.380

这肯定是安装错误，我建议不要尝试修复，因为可能会有更多此类错误。在我与合作伙伴的工作中，我看到过一些这样的错误，这些错误大多是由于实时、病毒扫描程序或机器中的一些未知问题导致的安装拙劣造成的。

这是我可以建议的：

1.  完全卸载 Azure SDK，（检查任何 Azure 相关条目的程序列表并卸载）
2.  重新启动机器以清除任何残留设置或正在运行的脚本
3.  下载 SDK（如果 Web Deploy 出现错误，请尝试[在此处](http://www.microsoft.com/en-us/download/details.aspx?id=28045)下载完整的 SDK ）
4.  暂时禁用病毒扫描程序或任何实时文件系统或脚本监控工具（如果您有疑虑，请断开机器与互联网的连接）
5.  安装 SDK 组件。

它在过去有效，所以我希望它也能与你一起工作。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2019-06-12T03:19:36.900

.csProject 中会有一个错字。您可以将 csProj XML 复制并粘贴到 [https://freeformatter.com/xml-formatter.html](https://freeformatter.com/xml-formatter.html)中，它将显示导致问题的行！

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2019-07-18T16:02:28.887

由于 git merge 冲突将不可见字符插入 xml 文件，我遇到了这个问题。要解决这个问题：

1.  在文本编辑器中打开 sln 文件并将内容复制到在线 xml 验证器 ( [https://www.xmlvalidation.com/](https://www.xmlvalidation.com/) )

2.  找到不可见字符的位置并删除它们或重新键入该行

# phpmyadmin - 不使用php代码调用存储过程？

> ID：10816265
> 
> 赞同：1
> 
> 时间：2012-05-30T12:25:53.690
> 
> 标签：phpmyadmin

我正在使用 phpMyAdmin 3.1.3 在 phpMyAdmin 我创建了一个像这样的过程

它创建成功。但是当我从 php 文件中调用它时，没有返回结果集。像这样....

```
$conn --  server connection

$database  -- database selection
using    mysql_query ("CALL test2()"); 
```

下面的消息来了。

```
Warning: mysql_fetch_assoc(): supplied argument is not a valid MySQL result resource in C:\wam 
```

请任何人给我想法！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-24T13:46:57.033

```
//assume there is a procedure named "verifyemail"

$uid = "11";//it can be anything.
    $proce=mysql_query(("CALL verifyemail($uid)")or die("proce_error- ".mysql_error())); 
```

警告是关于在过程调用时应该传递的一个或多个参数。如上例所示，verifyemail 过程使用参数 $uid 进行调用。

或者

您应该提供有关该过程的代码，在您的情况下应该是 test2 过程。

希望它会有所帮助..！

# c++ - shgetvalue 运行时错误

> ID：10816267
> 
> 赞同：1
> 
> 时间：2012-05-30T12:26:00.033
> 
> 标签：c++, c, windows, winapi

我正在使用以下代码读取注册表以获取 EnableLUA 的值

```
LPCTSTR pszSubKey = "SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Policies\\System";
LPCTSTR pszValue = "EnableLUA";
DWORD dwType = 0;
DWORD dwValue = 0;
DWORD dwValueSize = sizeof( DWORD );

if ( ERROR_SUCCESS != SHGetValue( HKEY_LOCAL_MACHINE, pszSubKey, pszValue, 
    &dwType, &dwValue, &dwValueSize) ) 
```

我在管理员模式下运行上述代码，即使出现运行时错误。任何其他可用于完成这项工作的 api。我想简单地检查 EnableLUA 值是 0 还是 1 .. 我正在使用 mingw 并且 LSTATUS 显示为编译时间

> 错误：未知的声明 LSTATUS。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T14:15:18.730

也许 Mingw 不完全支持 Windows？

LSTATUS 是 SHGetValue 的返回类型，所以应该定义。在**Shlwapi.h**中查找 SHGetValue 的原型。

您可能可以暂时更改代码以将 SHGetValue 的返回值分配给变量并将其打印出来。然后告诉我们价值是什么。可能是 5（*拒绝访问*）。

您是否在代码中包含**Windows.h**和**Shlwapi.h**？

来自 MSDN：

**返回值**

类型：*LSTATUS*

如果成功则返回 ERROR_SUCCESS，否则返回 Winerror.h 中定义的非零错误代码。您可以使用带有 FORMAT_MESSAGE_FROM_SYSTEM 标志的 FormatMessage 函数来检索错误的一般描述。

# vb.net - 使用阿拉伯名称将文件上传到 ftp 服务器（编码错误）

> ID：10816274
> 
> 赞同：3
> 
> 时间：2012-05-30T12:26:12.420
> 
> 标签：vb.net, character-encoding, ftp-server

我正在尝试将一个名称用阿拉伯语编写的文件上传到 ftp 服务器，我成功上传了该文件，但我在 ftp 服务器上遇到了问题，上传的文件名不正确并且采用不可读的格式，例如“?? ？？？？？？” 或“ ***** ** *** ** *** ** *** ** ***** ”或阿拉伯语以外的任何格式。

我尝试将文件名编码为 UTF-8 或“默认”ANSI 编码，但我无法解决这个问题？这是用于在 VB .Net 中对文件路径进行编码的以下代码：

```
FIleNamePath = Encoding.UTF8.GetString(Encoding.UTF8.GetBytes(FIleNamePath)) 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T09:24:53.093

如果我理解正确，问题是，任何字符串与您的代码的转换都应该为您生成原始字符串。

```
dim input = "abcü"
dim output = Encoding.UTF8.GetString(Encoding.UTF8.GetBytes(input))
assert.areEqual(input, output) 
```

对我来说，这段代码有效（使用德语变音符号）。

那么也许您的输入不是 UTF-8 字符串？尝试检查 Encoding.UTF8.GetBytes 产生的内容（多少个字符，尝试手动转换是，...）

# android - 如何将上传的服务器文件版本与安卓市场上的应用程序版本进行比较

> ID：10816278
> 
> 赞同：2
> 
> 时间：2012-05-30T12:26:31.560
> 
> 标签：android, android-intent

每当用户启动我的应用程序时，我都会尝试在 24 小时后检查和更新 Android 应用程序，我已经编写了此代码，但它不起作用，它没有显示任何可用更新的消息。

我在服务器上上传了一个 txt 文件，我刚刚写了 3 作为版本号，我命名了这个文件版本，这个文件的路径是 www.mywebsite.com/upload。version.txt 文件存在于上传目录中。当我运行此应用程序时，我没有收到任何关于模拟器中可用更新的对话消息。请帮我找出问题所在。我是android开发的新手。预先感谢。

```
package com.test;

import java.net.URL;
import java.net.URLConnection;
import org.apache.http.util.ByteArrayBuffer;
import android.app.AlertDialog;
import android.content.DialogInterface;
import android.content.SharedPreferences;
import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.os.Handler;
import java.io.InputStream;
import java.io.BufferedInputStream;
import android.net.Uri;

public class TestActivity extends Activity {
    private Handler mHandler;
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        mHandler = new Handler();

        SharedPreferences prefs = getPreferences(0);
        long lastUpdateTime = prefs.getLong("lastUpdateTime", 0);

        /* Should Activity Check for Updates Now? */
        if ((lastUpdateTime + (24 * 60 * 60 * 1000)) < System.currentTimeMillis()) {

            /* Save current timestamp for next Check*/
            lastUpdateTime = System.currentTimeMillis();            
            SharedPreferences.Editor editor = getPreferences(0).edit();
            editor.putLong("lastUpdateTime", lastUpdateTime);
            editor.commit();        

            Thread checkUpdate = null;
            /* Start Update */            
            checkUpdate.start();

            /* This Thread checks for Updates in the Background */
            Thread checkUpdatee = new Thread() {
                public void run() {
                    try {
                        URL updateURL = new URL("http://mywebsite.com/update");                
                        URLConnection conn = updateURL.openConnection(); 
                        InputStream is = conn.getInputStream();
                        BufferedInputStream bis = new BufferedInputStream(is);
                        ByteArrayBuffer baf = new ByteArrayBuffer(50);

                        int current = 0;
                        while((current = bis.read()) != -1){
                             baf.append((byte)current);
                        }

                        /* Convert the Bytes read to a String. */
                        final String s = new String(baf.toByteArray());         

                        /* Get current Version Number */
                        int curVersion = getPackageManager().getPackageInfo("com.test", 0).versionCode;
                        int newVersion = Integer.valueOf(s);

                        /* Is a higher version than the current already out? */
                        if (newVersion > curVersion) {
                            Runnable showUpdate = null;
                            /* Post a Handler for the UI to pick up and open the Dialog */
                            mHandler.post(showUpdate);
                        }                
                    } catch (Exception e) {
                    }
                }
            };

            /* This Runnable creates a Dialog and asks the user to open the Market */ 
            Runnable showUpdate = new Runnable(){
                   public void run(){
                    new AlertDialog.Builder(TestActivity.this)

                    .setTitle("Update Available")
                    .setMessage("An update for is available!\\n\\nOpen Android Market and see the details?")
                    .setPositiveButton("Yes", new DialogInterface.OnClickListener() {
                            public void onClick(DialogInterface dialog, int whichButton) {
                                    /* User clicked OK so do some stuff */
                                    Intent intent = new Intent(Intent.ACTION_VIEW, Uri.parse("market://search?q=pname:com.test"));
                                    startActivity(intent);
                            }
                    })
                    .setNegativeButton("No", new DialogInterface.OnClickListener() {
                            public void onClick(DialogInterface dialog, int whichButton) {
                                    /* User clicked Cancel */
                            }
                    })
                    .show();
                   }
            };    

        }

    }
} 
```

# jquery-ui - 如何让 jQueryui 对话框 scrollTop 将对话框内容滚动到顶部

> ID：10816279
> 
> 赞同：8
> 
> 时间：2012-05-30T12:26:36.927
> 
> 标签：jquery-ui, jquery-ui-dialog, scrolltop

我有一个 jQueryui 对话框，我正在加载很多内容（服务协议条款），当内容溢出时会导致滚动条。这是我希望的样子。但是，一旦对话框打开，我希望滚动条位于顶部（因此用户可以从头开始阅读而无需向上滚动）。对话框的设置是

```
$(function() 
{
$( "#tos_dialog" ).dialog({
    title: 'Terms Of Service Agreement',
autoOpen: true,
height: 480,
    width: 640,
modal: true,
    show: "blind",
hide: "explode",
    buttons: {
       "I Accept": function() {
        $( this ).dialog( "destroy" );
                $("#login_container").dialog( "destroy" );
                window.location.replace('/main.php');
    },
            "I Decline": function() {
                $( this ).dialog( "destroy" );
            }
        }
    }); 
```

我已经尝试将 autoOpen 设置为 true 和 false，并且我已经尝试了以下所有代码来尝试让内容滚动到顶部：

```
 $("#tos_dialog").show()
  $("#tos_dialog").scrollTop();
  $( ".ui-dialog" ).show();
  $( ".ui-dialog" ).scrollTop();
  $(".ui-widget-content").show();
  $(".ui-widget-content").scrollTop();
  $("body").scrollTop();
  $('#tos_dialog', window.parent.document).scrollTop(0); 
```

不幸的是，上述方法似乎都不起作用。我还尝试将上述内容放在对话框上的绑定事件中，用于 dialogOpen 和对话框调整大小，但无济于事。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-31T19:27:25.920

尝试

```
$("#the_dialog_div").scrollTop("0") 
```

这对我有用！

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-15T18:31:43.367

这对我有用

```
$(function() 
{
 $( "#tos_dialog" ).dialog({
  title: 'Terms Of Service Agreement',
  autoOpen: true,
  height: 480,
  width: 640,
  modal: true,
  show: "blind",
  hide: "explode",
  buttons: {
   "I Accept": function() {
    $( this ).dialog( "destroy" );
      $( "#login_container" ).dialog( "destroy" );
      window.location.replace('/main.php');
   },
   "I Decline": function() {
      $( this ).dialog( "destroy" );
   }
  },
  open: function() {
    //Solution HERE
    $( ".ui-dialog-content" ).scrollTop(0);
    //End of Solution
  }
}); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-29T07:02:30.693

尝试：

```
setTimeout(function(){
   $('#selector').scrollTop("0");
},100); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-05T12:41:24.800

好的，所以我终于找到了一种破解方法来让它工作。虽然人们似乎可以使用 scrollTop("0") 和/或可能的其他人，但这些都不适合我。如果您也是这种情况，请尝试以下操作：

创建与 nbsp 的链接；作为它的文本（所以它不会立即看起来像一个链接）。将此作为您希望显示的对话框显示区域中的第一个 HTML（在我的情况下，它是显示在 dailog 中的服务条款的顶部）。

然后在声明对话框时，添加 open 函数作为参数并包含行以模糊元素内的所有链接，然后将焦点设置在顶部的链接上。下面是一个对我有用的初始化代码。

```
$(function() {
    $( "#tos_dialog" ).dialog({
  title: 'Terms Of Service Agreement',
        autoOpen: false,
      height: 480,
  width: 640,
        modal: true,
    show: "blind",
        hide: "explode",
  open: function () 
  { 

    $('.ui-dialog-relative :link').blur();
    //setTimeout(function() { $('#tos_top').focus();}, 4000);
    $('#tos_top').focus();
  },
  focus: function(event, ui) {$('#tos_top').focus(); },
  buttons: {
            "I Accept": function() {
                $( this ).dialog( "destroy" );
      $("#login_container").dialog( "destroy" );
      window.location.replace('/nextpage.php');
            },
            "I Decline": function() {
                $( this ).dialog( "destroy" );
            }
        }
    });
    $( "#tos_dialog" ).dialog("open");
}); 
```

希望这可以帮助其他人作为最后的选择，因为无论出于何种原因，他们首先无法使用标准方法。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-13T03:07:04.933

我有同样的问题，我的 jquery-ui dialog() 会打开并滚动到对话框内容的底部。我的同事建议这是因为内容底部有一个按钮/链接。

我也发现那`$("#dialog").scrollTop("0")`行不通。

我找到了这个页面并尝试使用 prepend() 添加一个指向对话框内容开头的链接，然后调用`focus()`. 这有效，`blur()`根本没有在对话`open()`事件中使用。

该链接在对话框的左上角直观地显示为 IE10 中的单个下划线，我不关心。

我发现根本不需要链接。`$("#dialog").focus()`足以滚动到页面顶部。这在 FireFox 和 IE10 中进行了测试。

解决方案 ：

```
var mydialog = $("<div id='mydialog'>Here is some exceptionally long content which will overflow.</div>");
$("body").append(mydialog);
mydialog.dialog({open : function(event, ui) {
mydialog.focus();
}
}); 
```

高温高压

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-04-08T17:22:36.907

就我而言，我有`#dialog modal:true`，所以上述方法都不起作用。

我发现该`body`元素是实际滚动的，所以我做了以下操作，效果很好：

```
$( "#timeWindowDialog" ).dialog({
     autoOpen: false,
     modal: true,
     open : function() {
       $('body').scrollTop(0);
     }
}); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-09-07T08:34:00.937

将以下内容添加到打开的 dialog() 函数中效果很好（如果对话框过大，只会在对话框内滚动：

```
$('#dialog-form').dialog({
    height: 500,
    width: 600,
    modal: false, // works with modal true and false
    open: function () 
        {
            $('#dialog-form').scrollTop(0);
        }, 
```

如果对话框在设置此处理程序之前自动打开，则可能不起作用。

# ios - 在哪里以编程方式构建视图与使用 nib

> ID：10816283
> 
> 赞同：7
> 
> 时间：2012-05-30T12:26:50.307
> 
> 标签：ios, uiview, uiviewcontroller, interface-builder, nib

我进行了很多搜索，并翻阅了几本教科书，但我真正欣赏的是对在 iOS 应用程序中定义 UIView 子类的最佳实践的简单解释。

*   如果使用 xib，我可以在运行时开始时在哪里添加/调整控件？
*   如果以编程方式构建，我应该在 ViewController（loadView？）还是单独的 UIView 子类中执行此操作？如果是后者，我如何指定它的文件所有者，以便如果它作为子视图添加它知道它的控制器是谁？
*   您在 awakeFromNib、loadView、viewDidLoad、UIView.init、UIViewController.init 等中放置了什么？
*   您还经常使用哪些其他方法？

我不需要超级具体的说明——我更多的是寻找一个快速参考指南，它解释了每种可用方法中的代码类型。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-30T19:05:32.340

我的做法是：

*   在单独的文件中创建自定义**UIView子类。**
*   在 UIViewController 的**init**中创建所有非 UI 对象
*   在 UIViewController 的**loadView**创建我的自定义 UIView 并将其设置为控制器的**self.view**
*   在 UIViewController 的**viewDidUnload**（内存警告时调用）释放所有 UI 组件（我的自定义 UIView）
*   在 UIViewController 的**dealloc**中释放所有非 UI 对象

在我的自定义 UIView 子类中我：

*   **在init**方法中创建所有子视图并在**dealloc**中释放它
***   在 layoutSubviews 我以这种方式设置子视图的框架以确保仅在更改时才设置框架。这是因为重绘子视图很昂贵：**

 **> ```
> if ( !CGRectEqualToRect(__subview.frame, rect) ) {
>   __subview.frame = rect;
> } 
> ```

这就是我在所有 UIViewControllers 中所做的。我不使用 IB，一切都是以编程方式创建的。

希望能帮助到你！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-30T14:03:50.210

> 如果使用 xib，我可以在运行时开始时在哪里添加/调整控件？

在`viewDidLoad`视图控制器中。

> 如果以编程方式构建，我应该在 ViewController（loadView？）还是单独的 UIView 子类中执行此操作？如果是后者，我如何指定它的文件所有者，以便如果它作为子视图添加它知道它的控制器是谁？

同样，我也总是在`viewDidLoad`我的视图控制器中这样做。

> 您在 awakeFromNib、loadView、viewDidLoad、UIView.init、UIViewController.init 等中放置了什么？

其中，我只担心`viewDidLoad`。

> 您还经常使用哪些其他方法？

1.  确保为手动创建的控件使用自动调整大小的蒙版，以确保它们正确处理用户界面方向。

2.  永远不要假设（像许多人那样）你的屏幕是 320pt 宽。始终参考`self.view.size`您需要当前视图大小的位置。

3.  如果您的控件无法通过自动调整大小蒙版来处理用户界面方向的更改，请确保使用 iOS 5`viewWillLayoutSubviews`来调整它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T15:28:05.313

有非常简单的 nib，例如典型的 MainWindow.nib，它们没有本地化内容，只需一行代码即可复制。在这种情况下，代码比解压 nib 快得多。

还有一些无法用笔尖描述的高度动态的布局。

您应该在每种特定情况下选择最方便和最有效的方式。总会有取舍，只要明智地选择。**

# c++ - 访问向量中的数据会创建 EXC_BAD_ACCESS

> ID：10816285
> 
> 赞同：0
> 
> 时间：2012-05-30T12:27:10.053
> 
> 标签：c++, objective-c

我尝试从 vector3f 访问/打印数据，结果是`EXC_BAD_ACCESS`：

```
std::cout << myMesh.faces[1].vertices[1].pos.x; 
```

代码：

```
struct Vector2f{
    float x, y;
};
struct Vector3f{
    float x, y, z;
};

struct ObjMeshVertex{
    Vector3f pos;
    Vector2f texcoord;
    Vector3f normal;
};

struct ObjMeshFace{
    ObjMeshVertex vertices[3];
    ObjMeshFace(){}
    ObjMeshFace(const ObjMeshFace& o)
    {for (int i=0; i < 3; ++i) vertices[i] = o.vertices[i]; }
};

struct ObjMesh{
    std::vector<ObjMeshFace> faces;
};

ObjMesh myMesh;

for(size_t i = 0; i < faces.size(); ++i){
    ObjMeshFace face;
    for(size_t j = 0; j < 3; ++j){
        face.vertices[j].pos        = positions[(faces[i].pos_index[j] - 1)];
        face.vertices[j].texcoord   = texcoords[faces[i].tex_index[j] - 1];
        face.vertices[j].normal     = normals[faces[i].nor_index[j] - 1];
    }
    myMesh.faces.push_back(face);
} 
```

调试器指的是`stl_vector.h`：

```
 reference
  operator[](size_type __n)
  { return *(this->_M_impl._M_start + __n); } 
```

这是什么意思？我打电话超出范围了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T18:11:51.453

已经有一段时间了，但是当您执行 push_back 时，您只是浅复制了 vertices 数组`vertices[] = vertices[]`。您需要 ObjMeshFace 中的自定义 copy-ctor。这就是为什么`vertices[0].pos.x`有效而`vertices[1].pos.x`无效的原因。

# linux-device-driver - 解决自旋锁问题

> ID：10816288
> 
> 赞同：2
> 
> 时间：2012-05-30T12:27:13.683
> 
> 标签：linux-device-driver, spinlock

在 Linux 设备驱动程序中。当它引入自旋锁时，它给出了以下示例：

> 您的驱动程序正在执行并且刚刚取出一个控制对其设备的访问的锁。当锁被持有时，设备会发出一个中断，这会导致你的中断处理程序运行。中断处理程序在访问设备之前也必须获得锁。在中断处理程序中取出自旋锁是合法的事情。这是自旋锁操作不休眠的原因之一。但是如果中断例程与最初取出锁的代码在同一个处理器中执行会发生什么？当中断处理程序正在旋转时，非中断代码将无法运行以释放锁定。该处理器将永远旋转。

如何解决这个问题？使用信号量？请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T14:36:38.100

您可以使用**`spin_lock_irqsave`**from 非中断代码来禁用当前内核上的硬件中断，或者使用同一章节中**“锁定的替代方案”部分中描述的任何工具。**

### 编辑0：

不记得那里的确切细节，但理论是：

*   在 UP 系统上，您根本不需要自旋锁 - 从访问与中断处理程序共享的数据的 BH 代码中禁用中断就足够了。
*   在 SMP 系统上，您需要一个自旋锁来防止在其他内核上执行相同的 BH 代码，并且，如果您处理硬件，您还希望禁用同一内核上的中断以避免与 IRQ 例程发生死锁。
*   中断处理程序总是需要在持有任何锁的同时禁用中断，以避免与自身发生死锁。

希望这可以帮助。

# web-services - Web 服务随机超时/断开连接

> ID：10816289
> 
> 赞同：1
> 
> 时间：2012-05-30T12:27:15.000
> 
> 标签：web-services, sql-server-2008, iis

我们有一个进行 Web 服务调用的 Windows 客户端应用程序。Web 服务有时可以对数据库执行相当长的查询。我们有 3 个可以正常工作的生产环境。但是，在其中一个上，我们在通过 Web 服务执行那些长时间运行的查询时收到此错误。客户看到；

> “底层连接已关闭：接收时发生意外错误。”

这种情况经常发生，但通常不会在没有用户使用 Web 服务时发生（即：当我们在夜间进行测试时）。仅在 Web 服务负载不足的白天。

如果我们打开 http-keepalives 设置，仍然会出现确切的错误，只是文本不同。它会说；

> “底层连接已关闭：预期保持活动的连接已被服务器关闭。”

所有超时似乎都可以（客户端 Web 服务代理、web.config、IIS）。任何人都可以提供的任何信息都会非常受欢迎！

系统在 64 位 Windows server 2008 R2 和 Microsoft .NET Framework 2.0.50727.4963 上运行 SQL 2008 R2 Express

没有此问题的其他系统使用 32 位 Windows server 2003 R2、SQL 2008 Express（不是 R2）和 Microsoft .NET Framework 2.0.50727.3053

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T12:24:32.280

通过禁用 ISS 网站中的响应 ping 修复

# ios - 自定义 UIPicker 外观

> ID：10816293
> 
> 赞同：0
> 
> 时间：2012-05-30T12:27:32.420
> 
> 标签：ios, uipickerview, uipicker

我想知道是否可以自定义 UIPicker 以使其具有我们想要的外观。

我在这里看到了 Mappy iPad 应用程序选择器[（在屏幕截图的左侧）](http://data.imagup.com/11/1152446519.png) ，我想为我的应用程序做同样的选择器。所以，我的问题是：如何制作像这个一样的选择器？

非常感谢 ！

问候，塞巴斯蒂安；）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T13:21:20.410

这就是我在使用它之前的想法。你已经用过这个应用程序了吗？事实上，被选中的项目停留在列表的中间，就像 UIPicker 不像 UITableView。希望我清楚..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T22:58:30.680

我猜他们是按自己的方式做的。它可以通过多种方式完成。

事实上，它可能是一个 ListView，上面有一个“浮动”视图。当您滚动列表时，更改指示器内的值以匹配其下方的元素。

它甚至可能是一个 ListView，它知道哪个元素在中间，因此它为那个元素使用另一个 UITableViewCell 设计，给人一种被选中的错觉。（旋转木马做到这一点）

它也可以通过 UIScrollView 和注释视图指示器来完成。

我记得你不能改变 UIPicker 的设计。

**编辑**

但是，您仍然可以使用该`- (UIView *)pickerView:(UIPickerView *)pickerView viewForRow:(NSInteger)row forComponent:(NSInteger)component reusingView:(UIView *)view` 方法编辑 UIPickerView 样式。

**此外，您可以通过在其上方添加一些具有透明中心和allowUserInteraction = NO**的PNG图像来“删除”或更改默认选择器边框，以便您仍然可以使用它下面的选择器。要删除它，只需创建一个看起来作为背景的图像。

唯一的缺点是选择器视图具有您必须使用的特定高度大小（162.0、180.0 或 216.0）。这就是为什么我认为您提供的示例不使用选择器视图的原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T12:35:39.020

屏幕截图上的那个对我来说看起来像一个带有自定义单元格的普通 UITableView。也许你可以这样尝试。

# mysql - 如何使用 MySQL 生成不同编码的字符？

> ID：10816294
> 
> 赞同：0
> 
> 时间：2012-05-30T12:27:33.713
> 
> 标签：mysql, unicode, encoding

我正在尝试使用 MySQL 生成不同编码的字符。

我的脚本如下所示：

```
SET @id := 678;
SELECT
    @id,
    CHAR(@id USING utf32),
    CHAR(@id USING utf16),
    CHAR(@id USING utf8),
    HEX(CHAR(@id USING utf32)),
    HEX(CHAR(@id USING utf16)),
    HEX(CHAR(@id USING utf8)) 
```

我的预期结果是：

```
678
ʦ
ʦ
ʦ
000002A6
02A6
CAA6 
```

我实际得到的：

```
678
ʦ
ʦ
            <-- Questionable
000002A6
02A6
02          <-- Questionable 
```

**有没有办法在 MySQL 中做到这一点？**

## 回答者

谢谢兰兹。[_](https://stackoverflow.com/a/10816480/113154)

```
SET @id = 45678;
SELECT
    @id,
    CHAR(@id USING utf32),
    CONVERT(CHAR(@id USING utf32) USING utf16),
    CONVERT(CHAR(@id USING utf32) USING utf8),
    HEX(CHAR(@id USING utf32)),
    HEX(CONVERT(CHAR(@id USING utf32) USING utf16)),
    HEX(CONVERT(CHAR(@id USING utf32) USING utf8)); 
```

结果：

```
45678
뉮
뉮
뉮
0000B26E
B26E
EB89AE 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T12:39:03.273

试试`CONVERT(CHAR(678 USING UTF16) USING UTF8)`。该`CHAR()`调用会将您的 unicode 字符代码转换为实际的字符串，`CONVERT()`并将该字符串转换为实际的 UTF8。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T12:43:23.410

UTF-8 中的字节序列`0x02A6`（十进制 678）[无效](http://en.wikipedia.org/wiki/UTF-8#Invalid_byte_sequences)；第一个字节解码为[`U+0002`](http://www.fileformat.info/info/unicode/char/0002/index.htm)，但第二个字节没有解码。

# xslt - XSL 用指数显示结果

> ID：10816306
> 
> 赞同：1
> 
> 时间：2012-05-30T12:28:11.837
> 
> 标签：xslt

使用 添加数字`XSL`时，使用 显示结果`exponent`。例如，如果`ProductID`是`1111`

```
<xsl:value-of select="@ProductID + 1000000"/> 
```

它显示类似于`1.1111E6`，但是我希望结果是`1001111`。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T14:59:38.060

您可能正在使用非模式感知转换，因此@ProductID 的值是无类型的，这意味着当您进行算术运算时，结果是 xs:double。如果你做了整数算术：

```
xs:integer(@ProductID) + 1000000 
```

结果将是一个 xs:integer 并且会这样输出。

在 XPath 1.0 中，所有算术都是 xs:double 算术，但是数字到字符串的转换规则通过要求将“整数”作为整数输出来隐藏这个事实。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T16:06:29.730

您似乎正在使用 XSLT 2.0 处理器（我正在使用的所有 5-6 个不同的 XSLT 1.0 处理器都会产生想要的答案 - `1001111`.

**使用 XSLT 2.0 处理器，只需转换`@ProductID`为`xs:decimal`：**

```
<xsl:stylesheet version="2.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:xs="http://www.w3.org/2001/XMLSchema">
 <xsl:output method="text"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="/*">
     <xsl:value-of select="xs:decimal(@ProductID) + 1000000"/>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于以下 XML 文档时：**

```
<t ProductID="1111"/> 
```

**产生了想要的正确结果：**

```
1001111 
```

**请注意**：

使用`xs:decimal(someNumber)`构造函数和十进制算术保证结果的最大精度，以防万一`someNumber`可以有一个非整数值。

该类型`xs:decimal`是 的基本类型`xs:integer`，即 any`xs:integer`也是`xs:decimal`，因此此解决方案也适用于任何整数值。

# ruby-on-rails-3 - 炼油厂保存页面无法正常工作

> ID：10816307
> 
> 赞同：0
> 
> 时间：2012-05-30T12:28:22.977
> 
> 标签：ruby-on-rails-3, refinerycms

我在我的一个项目中使用 Refinery，但遇到了页面更新问题。当我尝试对页面进行更改，然后单击“保存”时，查看该页面仍会显示旧内容。如果我返回编辑页面，我会看到新内容。

我了解到，转到公用文件夹然后删除我更改的页面可以解决我的问题，从而显示更改，但是这样做对客户来说太复杂了。这是炼油厂配置问题吗？我注意到我们拥有的三个炼油厂应用程序中只有一个可以做到这一点。

以前有没有人遇到过这个问题，如果你遇到了，你是如何解决的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T13:13:56.580

我解决了。无论出于何种原因，Refinery 都在创建静态 HTML 页面作为缓存，当它们被删除时，它会在页面被点击时立即使用新内容重新生成它们。

我为解决这个问题所做的只是启动一个 cron 作业，告诉站点找到所有以“.html”结尾的文件并删除它们。这解决了我们的问题。

# mysql - c:\ to mysql> mode in command promt

> ID：10816309
> 
> 赞同：0
> 
> 时间：2012-05-30T12:28:34.010
> 
> 标签：mysql, command-line

我正在尝试检查`mysql`我的系统的状态。

我知道从命令提示符我的模式应该是`mysql>`这样我可以输入

```
mysql>status; 
```

如何从我`c:\Documents and Settings\etc...`的模式导航到阅读`mysql>`模式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T12:30:39.950

假设通过root登录：

```
<MYSQL_DIR>\bin\mysql.exe -uroot -p 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T12:40:01.637

阅读： [http ://dev.mysql.com/doc/refman/5.0/en/connecting-disconnecting.html](http://dev.mysql.com/doc/refman/5.0/en/connecting-disconnecting.html)

# sql - 将 .bak 文件还原到远程数据库

> ID：10816310
> 
> 赞同：21
> 
> 时间：2012-05-30T12:28:36.153
> 
> 标签：sql, sql-server, ssms

我的本地机器上有一个`test.bak`文件。我需要将此文件恢复到远程机器的数据库。我怎么做？

当我尝试这个时，远程数据库会抛出一个它无法`test.bak`在本地文件系统上找到的错误。

**询问**

```
RESTORE DATABASE TESTPROJECT 
FROM DISK = 'C:\Program Files\Microsoft SQL Server\MSSQL10_50.ICON3\MSSQL\Backup\test.bak' 
```

**错误**

```
Cannot open backup device 'C:\Program Files\Microsoft SQL Server\MSSQL10_50.ICON3\MSSQL\Backup\test.bak'. Operating system error 2(The system cannot find the file specified.). 
```

我怎样才能做到这一点？我正在使用 Microsoft SQL Server 2008。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-05-30T12:41:42.510

在这个答案的上下文中 -`remote`是指您的机器，`local`是数据库服务器。

* * *

**`local`从文件系统恢复**

将备份文件复制到文件`local`系统，并直接从此副本恢复。

*先决条件*

*   复制`test.bak`到`C:\test.bak`服务器上

*句法*

```
RESTORE DATABASE TESTPROJECT FROM DISK = N'C:\test.bak'; 
```

* * *

**`remote`从文件系统恢复**

[或者，您可以使用UNC 语法](http://support.microsoft.com/kb/141941)`remote`从备份文件中恢复。我通常不使用此选项，但如果文件系统上没有足够的磁盘空间用于备份文件和恢复的数据库，它会很有用。`local`

此选项的成功取决于一些变量 -`remote`分配给数据库服务帐户的文件系统的权限、网络健康状况等。

*先决条件*

*   `Remote`机器名称是`remotemachine`
*   `remote`备份位于`'C:\test.bak'`
*   数据库服务帐户有权访问`remote`管理员共享`C$`

*句法*

```
RESTORE DATABASE TESTPROJECT FROM DISK = N'\\remotemachine\c$\test.bak'; 
```

# sql - SQL 查询 - 得出正确的结果

> ID：10816312
> 
> 赞同：0
> 
> 时间：2012-05-30T12:28:37.167
> 
> 标签：sql

大家好，我有一个 sql 查询，我只是想不出上课，想知道我能得到一些帮助。这是问题：

> 显示“中标成员列表”：中标的成员列表以及该项目的项目名称、项目价值和中标金额。我的代码只显示所有这些中的最高出价，而不是每个成员的最高出价

和表格：

```
Member (username, lastName, firstName, title, address, city, postcode, country,
     phoneBH, phoneAH, faxNumber, email, registrationDate, password, isBuyer,
     isSeller)    
Item (itemNumber, itemName, itemDescription, itemValue, itemLocation,
     categoryID, sellerUsername)       
Auction (auctionNumber, currency, startDateTime, endDateTime, shippingTerms,
     startBidAmount, reserveAmount, bidIncrementAmount, noOfItems, itemSold,
     itemNumber feedbackDateAndTime, rating, comments, paymentDate, paymentid)    
Bid (bidderUsername, auctionNumber, bidDateTime,bidAmount) 
```

```
SELECT B.bidderUsername, I.itemName, I.itemValue, B.bidAmount, A.auctionNumber        
FROM Item I, Auction A, Bid B        
WHERE A.auctionNumber = B.auctionNumber        
AND I.itemNumber = A.itemNumber        
AND B.bidAmount >= A.reserveAmount        
AND A.endDateTime < SYSDATE        
AND B.bidAmount = (SELECT max(B.bidAmount)                          
FROM dbf12.Bid B, dbf12.Auction A                           
WHERE B.auctionNumber = A.auctionNumber) 
```

对于代码和表格，您可能需要选择代码/表格并推送`ctrl-k`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T01:28:09.797

我修好了。我在子查询中引用了错误的表。这是正确的代码

```
SELECT B.bidderUsername, I.itemName, I.itemValue, B.bidAmount, A.auctionNumber
FROM dbf12.Item I, dbf12.Auction A, dbf12.Bid B
WHERE A.auctionNumber = B.auctionNumber
AND I.itemNumber = A.itemNumber
AND B.bidAmount >= A.reserveAmount
AND A.endDateTime < SYSDATE
AND B.bidAmount = (SELECT max(B.bidAmount)
                 FROM dbf12.Bid B
           WHERE B.auctionNumber = A.auctionNumber); 
```

# c# - 如何在c#中检查特定字典是否属于通用字典类型？

> ID：10816314
> 
> 赞同：0
> 
> 时间：2012-05-30T12:28:55.653
> 
> 标签：c#, dictionary

通用字典如下：

```
public class ConcurrentDictionary<TKey, TValue> : IDictionary<TKey, TValue> 
```

具体的字典可以如下：

```
var container = new ConcurrentDictionary<string, Unit>();
var container = new ConcurrentDictionary<string, CustomUnitClass>(); 
```

那么，如何检查某些字典是否属于通用字典类型？

```
object obj = GetObj(); // obj is some of many dictionaries
if(obj is ?) 
```

先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T12:31:41.573

你不应该，但如果你真的因为某种原因需要它，它是：

```
if (obj.GetType().GetGenericTypeDefinition() == typeof(Dictionary<,>)) {
    // It is a Dictionary<TKey, TValue>
} 
```

或者

```
if (obj is ConcurrentDictionary<string, CustomUnitClass>) {
    // It is a ConcurrentDictionary<string, CustomUsnitClass>
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T12:34:06.120

```
public class ConcurrentDictionary<TKey, TValue> : IDictionary<TKey, TValue> 
```

是“开放泛型类型”，您不能拥有开放泛型类型的实例。

但是，如果您想知道给定对象是否是具有泛型类型参数的字典，则可以使用反射来确定：

```
 var d1 = new Dictionary<int, string> ();

        var t = d1.GetType ();

        Console.WriteLine ("Generic? " + t.IsGenericType); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T13:25:33.950

您还可以将字典视为非通用`IDictionary`. 当然，在这种情况下，您会丢失所有强类型：

```
var dictionary = obj as IDictionary;
if (dictionary != null)
{
    ICollection keys = dictionary.Keys;    
    ICollection values = dictionary.Values;
    // work with keys and values as a collection of objects
} 
```

# zend-framework - 如何在zend框架中实现插件架构

> ID：10816315
> 
> 赞同：0
> 
> 时间：2012-05-30T12:28:56.427
> 
> 标签：zend-framework

我试图弄清楚如何为我的 zend 框架应用程序实现插件架构之类的东西。

假设我有一些文件的上传公式。如果没有“插件”，我想将一些默认上传到我的网络服务器。但是，如果我插入我的“特定上传插件”，我希望将文件上传到共享点（仅作为示例）。

但我真的想在不改变太多代码的情况下实现这一点。我可以更改一些配置文件，但我根本不需要更改任何控制器代码。

有人可以指出我将如何实现这一目标的一些教程或方法吗？或者只是这类任务的一些最佳实践？

先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T17:09:10.433

我的第一个想法是扩展`Zend_File_Transfer_Adapter_Http`用于处理`File`Zend Framework 中标准上传元素的适配器。

您可能需要做的就是重载`receive()`接收文件的方法，但不是将文件移动到服务器上的永久位置，您可以让适配器上传到共享点，或者将文件移动到最终目的地，无论它或许。

您的构造函数可以设置适配器特定的选项，例如共享点 IP 地址和凭据以及您需要的任何其他选项。

这样，不需要对控制器进行任何更改，您只需修改您的`Zend_Form`对象以使用一个`File`元素，但给它您的自定义传输适配器。所有的验证和错误处理都由 Zend_Form 完成，您的适配器负责将文件放在需要去的地方的细节，并且在那里遇到的任何错误都可以传递回表单。因此，无需更改任何控制器代码；所有这些逻辑都存在于您的传输适配器和表单中。

希望这有助于为您指明正确的方向。

# php - 多个表的php连接查询

> ID：10816316
> 
> 赞同：0
> 
> 时间：2012-05-30T12:29:02.007
> 
> 标签：php, join

谁能告诉我如何获得 project_title、project_id、level_of_want 和 selection_id 的值。当我提交这个我得到没有选择数据库错误。

```
$query_Name = "SELECT u.Student_Surname, u.Student_Forename, p2.Project_Title,     
p2.Project_id, s.level_of_want, s.selection_id
FROM users u
INNER JOIN projects p2 ON u.id = p2.Project_Lecturer
INNER JOIN selection s ON p2.Project_id = s.id_project
INNER JOIN users u2 ON s.student_id = u2.id
WHERE u2.Username = ".$_SESSION['MM_Username']." ORDER BY selection_id ASC" ;
$Name = mysql_query($query_Name, $projectsite) or die(mysql_error());
$row_Name = mysql_fetch_assoc($Name);
$totalRows_Name = mysql_num_rows($Name); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T12:32:06.133

连接到 mysql 服务器基础后，您应该使用[mysql_select_db](http://php.net/manual/en/function.mysql-select-db.php)函数显式选择数据库

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T12:38:53.490

```
mysql_select_db($bd); 
```

我们需要看看你是如何连接的

# jquery - 使用 Jquery Mobile 编写脚本仅在刷新后生效

> ID：10816322
> 
> 赞同：1
> 
> 时间：2012-05-30T12:29:35.477
> 
> 标签：jquery, mobile, refresh

我有这个在“HEAD”标签下运行的小脚本，与 jquery mobile 一起使用。它根据屏幕宽度调整图像大小。它工作正常，但只有在每次刷新该页面后才能工作。无论如何，我每次进入页面时都可以强制刷新吗？或者有没有更好的方法来做到这一点？

脚本是这样的：

```
<script>
  $( document ).ready( function()
  {
     $width = $( '#content' ).width();
     $( '#content img' ).css( 
     {
        'max-width': $width, 'height': 'auto'
     } );
   } );
</script> 
```

谢谢

- - -更新 - - -

```
<body>
  <script>
    $( document ).live( 'pageload', function()
    {
      var maxWidth = $( '.content' ).width();
      $( '.content img' ).css( "max-width", maxWidth );
      $( '.content img' ).css( "height", auto );
    });
  </script>
</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T19:32:58.640

首先，不要将您的 javascript/jquery 代码放在 HEAD 部分，确保它在 BODY 中，因为 jquery mobile 会过滤掉那里的代码。Jquery mobile 仅使用 HEAD 中的 TITLE。

使用这样的东西：

```
$(document).bind("pagecreate", function() {
    // make sure all submit buttons are disabled to being with
    $('input#submit').each(function() {
        $(this).button("disable");
    });
}); 
```

我知道这个例子不是你要找的功能，但概念是一样的。像我一样将您的事件绑定到“pagecreate”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T13:11:07.233

你在使用 JQM 的 AJAX 页面加载吗？如果你是，你应该绑定到`pageload`事件。所有事件都在这里描述[http://jquerymobile.com/demos/1.1.0/docs/api/events.html](http://jquerymobile.com/demos/1.1.0/docs/api/events.html)。在`pageload`事件处理程序中，您可以添加代码来调整图像大小。

您还可以绑定到`pageshow`每个页面的事件。

```
$('[data-role=page]').live('pageshow', function () {
//Image resize code here 
```

});

# c# - 使用 c# 将 Outlook 电子邮件自动保存到文件夹

> ID：10816326
> 
> 赞同：4
> 
> 时间：2012-05-30T12:29:42.020
> 
> 标签：c#, asp.net, outlook

基于在 Outlook 中执行的搜索，我想将结果保存到本地驱动器中，我该如何继续？在 C# 或 ASP.Net 中有什么方法可以实现它吗？非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-29T23:18:18.383

您可以编写自己的 Outlook 插件来完成这项工作。

启动 Visual Studio，创建一个新的 Outlook 加载项。根据您的 Visual Studio 和 Office 版本，也许您必须安装 VS Tools for Office Runtime（如果我没记错的话）。

在启动时为 Application.ItemContextMenuDisplay 注册一个处理程序，并在事件处理程序中添加一个新菜单条目，让我们说“将消息保存到磁盘”，并创建一个事件处理程序，该处理程序获取选定的消息并将其保存到某处。

像这样的东西：

```
using Office = Microsoft.Office.Core;
using Outlook = Microsoft.Office.Interop.Outlook;

private void MyAddIn_Startup(object sender, System.EventArgs e)
{
    Office.CommandBarButton bts = (Office.CommandBarButton)CommandBar.Controls.Add();
    bts.Visible = true;
    bts.Caption = "Save selected messages to disk";
    bts.Click += new Office._CommandBarButtonEvents_ClickEventHandler(bts_Click);
}

private void bts_Click(Office.CommandBarButton Ctrl, ref bool CancelDefault)
{
    Outlook.Selection list = this.Application.ActiveExplorer().Selection;

    string fileName = "";

    Object selObject;
    Outlook.MailItem mailItem;

    for (int i = 1; i < list.Count + 1; i++)
    {
        selObject = this.Application.ActiveExplorer().Selection[i];

        if (selObject is Outlook.MailItem)
        {
            mailItem = (selObject as Outlook.MailItem);

            if (mailItem != null)
            {
                fileName = Path.GetTempFileName();
                mailItem.SaveAs(fileName, Outlook.OlSaveAsType.olMSG);
            }
        }
    }
} 
```

它没有任何错误检查，没有优化，这会将消息保存到临时文件中，但您可以获得基础知识。

它也不是自动保存的，但您必须选择消息，右键单击并选择新的菜单项。

# jquery - jquery可拖动工作仅一次

> ID：10816332
> 
> 赞同：0
> 
> 时间：2012-05-30T12:30:08.533
> 
> 标签：jquery, jquery-ui, draggable

我有一个图像列表，每个图像都位于一个 div 元素内。生成图像时，我将可拖动事件绑定到每个 img 元素。即`$('#optionImage_'+ next +'').draggable();`

接下来为每个img元素分配唯一的ID。当我拖动任何图像时，它开始拖动，但是当我向上拖动鼠标时，它不允许再次拖动并禁用该页面上的所有js功能意味着它会引发错误。

请建议我使用 jquery 1.7 和 jquery ui 1.8。

任何帮助或建议将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T08:40:10.730

我遇到了同样的问题。我的代码看起来像这样

```
$('<td>'+document.getElementById("hideditname").value+'</td>').appendTo('#etr1').draggable( {cursor: 'move',helper:'clone', start: edittabclass }); 
```

我遇到了和你一样的问题。

然后我像这样更改了代码-

```
$('<td>'+document.getElementById("hideditname").value+'</td>').appendTo('#etr1').draggable( {cursor: 'move', start: edittabclass, revert:'true' }); 
```

然后问题就解决了。

您还可以删除还原元素。

# iphone - iOS 上的预计电池使用时间

> ID：10816335
> 
> 赞同：3
> 
> 时间：2012-05-30T12:30:20.000
> 
> 标签：iphone, objective-c, ios, power-management

> **可能重复：**
> [iphone：计算电池寿命](https://stackoverflow.com/questions/1469549/iphone-calculating-battery-life)

我在 appstore 中看到过许多应用程序，它们为不同的使用模式（待机、音频和视频播放、Wi-Fi 和 3G 浏览器的使用、通话时间）提供估计的电池工作时间。我有类似的要求来计算这样的估计时间。有人可以说明如何以编程方式执行此操作吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T13:04:35.403

电池寿命规格来自[Apple 的网站](http://www.apple.com/iphone/specs.html)。

*   通话时间：3G 长达 8 小时，2G (GSM) 长达 14 小时
*   待机时间：长达200小时
*   互联网使用：3G 最长 6 小时，Wi-Fi 最长 9 小时
*   视频播放：长达 10 小时
*   音频播放：长达 40 小时

获取剩余电池百分比的代码是：

```
[[UIDevice currentDevice] setBatteryMonitoringEnabled:YES];
float batteryLevel = [myDevice batteryLevel]; 
```

这就是 Apple 和 iOS 为您提供的全部内容，因此应用程序使用的任何其他内容都是猜测。

# asp.net-mvc - MVC 3 获取在不同控制器上定义的操作的 ActionResult

> ID：10816340
> 
> 赞同：2
> 
> 时间：2012-05-30T12:30:47.520
> 
> 标签：asp.net-mvc, reflection, asp.net-mvc-routing, controller-factory

**问题：**

我需要的是类似于 @Html.RenderAction("action","controller") 的东西，但我可以从不同的控制器内部使用。例如：

```
public class FirstController : Controller
{
   public ActionResult GetErDone()
   {
        return View();
   }
}

public class SecondController : Controller
{
   public ActionResult Index()
   {
        ActionResult coolResult = 
               Helper.GetActionResult("GetErDone", "FirstController");

        return View();
   }
} 
```

**进步：**

我已经开始剥离/改革实际的@Html.Action() 方法，但它确实有太多的内部辅助依赖项，我认为这不应该那么难。到目前为止，我所拥有的是：

```
 private void TestCreateActionFromDifferentController(RouteValueDictionary routeValues, string controllerName, string actionName)
    {
        var httpContext = this.HttpContext;
        var routeData = this.RouteData;
        routeData.Values["action"] = (object)actionName;

        if (!string.IsNullOrEmpty(controllerName))
            routeData.Values["controller"] = (object)controllerName;

        IController myController = ControllerBuilder.Current.GetControllerFactory().CreateController(new RequestContext(httpContext, routeData) , "staticpages");
    } 
```

这当然可以部分工作（减去区域数据令牌等许多缺点），但除了反射之外没有其他方法可以到达`MyActionResult`对象。

**概括：**

在控制器内部时，有什么方法可以从在不同控制器上定义的操作中获取 ActionResult？

**更新：**

更具体地说，我正在尝试使用 System.Web.Mvc.Html.ChildActionExtensions.ChildActionMvcHandler 之类的东西，但它不执行，而是返回 ActionResult

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T13:30:31.380

不知道为什么`ActionResult`要从 another中返回 a `controller`。可能您可以提供更多详细信息来了解我们的问题域。

我认为您可以考虑使用`BaseController`并声明`GetErrorDone`带有返回结果的静态方法。

可以从 All 调用此方法`Child Controllers`。

* * *

> 或第二个答案

**[考虑使用Controller.RedirectToAction](http://msdn.microsoft.com/en-us/library/system.web.mvc.controller.redirecttoaction.aspx)**将其重定向到所需的操作

```
e.g. RedirectToAction("action name" "controller Name") 
```

# jquery - 在仅显示一个 div 时切换多个 div，可能是 jquery 手风琴？

> ID：10816342
> 
> 赞同：0
> 
> 时间：2012-05-30T12:30:50.113
> 
> 标签：jquery, toggle, jquery-animate, jquery-ui-accordion

当前，当用户单击链接时，会`$('#user');`滑出。当用户单击另一个（不是相同的链接）`$('.more-info-arrow').find('a')`链接时，前一个用户的信息会消失，但不会随着第二个请求重新出现。`$('#user');`我希望只有在可见 的情况下才这样做。

[http://jsfiddle.net/QSapW/](http://jsfiddle.net/QSapW/)

=======================Jquery====================

```
 //User detail information
        $('.more-info-arrow').find('a').live('click', function () {
            var $this = $(this);
            var user = $('#user');
            var userInfo = $('#user-info');

            // If display is none, that means it is hidden
            if (user.css('display') == 'none') {
                $this.addClass('active');
                user.hide().animate({
                    width: 'toggle'
                }, 400, function () {
                    userInfo.fadeIn('fast');
                });
            }

            // Second Click
            else {
                $this.removeClass('active');
                userInfo.fadeOut('fast', function () {
                    user.animate({
                        width: 'toggle'
                    }, 400);
                });
            }
        }); 
```

![电话簿网络应用程序](../Images/3a15df12f8a6589bf9007d60f9b1d40d.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T06:52:52.567

如果您使用的是 HTML5，则可以利用新`data`属性。

在这里演示：http: [//jsfiddle.net/QSapW/4/](http://jsfiddle.net/QSapW/4/)

**HTML**

```
<div class="item-info clearfix" data-userId="1">
    <div class="more-info-arrow"><a title="" href="javascript:;">&gt;&gt;</a></div>
</div>
<div class="item-info clearfix" data-userId="2">
    <div class="more-info-arrow"><a title="" href="javascript:;">&gt;&gt;</a></div>
</div>

<div class="user" id="user-box-1">
    <div class="user-info">
        <p>hello world</p>
    </div>
</div>
<div class="user" id="user-box-2">
    <div class="user-info">
        <p>good-bye world</p>
    </div>
</div>​ 
```

**JS**

```
//User detail information
$('.more-info-arrow').on('click', 'a', function () {
    var $this    = $(this),
        $item    = $this.parents('.item-info'),
        userId   = $item.data('userid'),
        user     = $('#user-box-' + userId),
        userInfo = $('.user-info', user);

    // If display is none, that means it is hidden
    if (user.is(':visible') === false) {
        $this.addClass('active');
        user.animate({
            width: 'toggle'
        }, 400, function () {
            userInfo.fadeIn('fast');
        });
    }

    // Second Click
    else {
        $this.removeClass('active');
        userInfo.fadeOut('fast', function () {
            user.animate({
                width: 'toggle'
            }, 400);
        });
    }
});​ 
```

**CSS**

```
.user {
    display:none;
    width:100px;
    height:100px;
    background:red;
} 
```

# asp.net - IIS7 上的响应超时，不能超过 30 秒（默认）

> ID：10816345
> 
> 赞同：1
> 
> 时间：2012-05-30T12:31:09.117
> 
> 标签：asp.net, sql-server, http, iis-7, session-state

我有一个使用 .net 3.5、IIS7 和 SQL Server 2008 的网站。

在网页上，单击`report download button`，它将数据从 SQL Server 和 Stream 加载到用户作为 excel 文件。

它工作正常，除非执行时间和加载时间（来自 SQL Server）超过 30 秒，然后网页超时。

我试图更改 web.config（可能是错误的），但它没有帮助。

```
<system.web>
  <httpRuntime executionTimeout="240" maxRequestLength="20480" />
</system.web> 
```

我可以通过仅配置 IIS7 来解决此问题吗？还是 SQL Server/Session State DB/Browser 也有超时限制？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T12:41:00.950

如果您使用的是 SQLCommand 对象，那么您可以设置一个属性“CommandTimeout”，并且您的处理不应失败。

# python - 如何在 Django 上制作电话号码掩码？

> ID：10816353
> 
> 赞同：0
> 
> 时间：2012-05-30T12:31:30.737
> 
> 标签：python, django, mask, digits

假设我有一个电话号码，例如：

> 05395042123

我想将其转换为如下格式：

> xxxx xxx xx xx

我要怎么做？有人有功能吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-30T12:43:56.017

手工很容易，只要你只有一种格式，这可能是最好的主意：

```
def phone_split(x):
  return ' '.join([x[0:4], x[4:7], x[7:9], x[9:]]) 
```

**编辑：**

还有一种更通用的方式：

```
def phone_split(x, format=[4,3,2,2]):
  parts = []
  reduce(lambda x, y: parts.append(x[:y]) or x[y:], format, x)
  return ' '.join(parts) 
```

它使用`append()`副作用来累积结果并`or`满足 lambda 的*单行*要求。

**编辑2：**

我刚刚意识到您可能想在 Django 模板中使用它。如果是这种情况，您可能希望使用上面的代码来定义[自定义模板标签](https://docs.djangoproject.com/en/dev/howto/custom-template-tags/)并将[其注册为简单的过滤器](https://docs.djangoproject.com/en/dev/howto/custom-template-tags/#registering-custom-filters)。

# ruby-on-rails - ActiveRecord::Relation 的未定义方法“update_attribute”

> ID：10816363
> 
> 赞同：1
> 
> 时间：2012-05-30T12:32:04.310
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1

我试图更新数据库中的一条记录，`Object.update_attributes(:field => "parameter")` 以显示我正在尝试做的一个简单示例。请看下面的代码

```
a = params["ORDERNO"].to_s
b =  params["TRACKNO"].to_s    
@bd=Staging.where(:trackno => b , :orderno=> a)
    if @bd.nil? 
       puts "not found"
    else
       @bd.update_attributes(:field_name => "PARAMETER")
    end 
```

我也试过`@bd.first.update_attributes(::field_name => "PARAMETER")`

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-30T12:33:22.937

一个可能的解决方案

利用`update_all(:field_name => "PARAMETER")`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-30T12:45:13.673

如果您知道只有一个 staging 对应于 (trackno, orderno) 您可以尝试这样的事情

```
@bd =Staging.find_by_trackno_and_orderno(b,a)
if @bd
  @bd.update_attributes(:field_name => value)
else
  #whatever you want to do
end 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-30T12:50:37.367

您的查询`@bd=Staging.where(:trackno => b , :orderno=> a)`返回一个对象数组。

`Array`通常没有`#update_attributes`方法。因此，您需要重写查询以仅获取 1 个对象或使用每个对象遍历查询结果中的所有对象：`@bd.each{|r| r.update_attributes(:field_name => "PARAMETER")}`

但是迭代并不是更新许多记录的正确方法，因为它会为您要更新的每个对象调用更新查询。

# ruby-on-rails - 无法在具有多态图像模型的载波中嵌入多个图像

> ID：10816367
> 
> 赞同：1
> 
> 时间：2012-05-30T12:32:23.530
> 
> 标签：ruby-on-rails, ruby-on-rails-3, mongoid, nested-forms, carrierwave

我很难将carrierwave一起使用mongoid。我正在编写一个需要将图像存储在多个集合中的应用程序，因此我创建了 Image 类，如下所示（请原谅使用 imageable）：

```
class Image
  include Mongoid::Document

  embedded_in :imageable, polymorphic: true

  mount_uploader :file, ImageUploader
end 
```

`ImageUploader`是由创建的`rails generate uploader Image`。

然后我有一个故事模型：

```
class Story
  include Mongoid::Document
  include Mongoid::Timestamps

  field :title, :type => String
  field :content, :type => String
  field :category, :type => String

  embeds_many :blog_images, as: :imageable
end 
```

当我尝试创建一个`Story`对象时，`uninitialized constant BlogImage`即使我没有通过表单提供和图像，我也会收到错误消息。我也试过在控制台中调用`story.blog_images << Image.new`同样的错误。

在我的 gem 文件中，我有：

```
gem 'carrierwave'
gem 'carrierwave-mongoid', :require => 'carrierwave/mongoid' 
```

我的版本是 Mongoid - 2.4.7 和carrierwave - 0.6.2。

我的主要问题是如何解决这个错误，但我也不太确定如何设置表单来接收这些图像。（理想情况下，每次选择一个文件时，我都想使用 javascript 添加一个新对话框。）我设置模型的方式或使用carrierwave 的方式有问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T18:42:43.957

您需要为 blog_images 指定目标类，因为它不能从关系名称派生。尝试：

```
embeds_many :blog_images, as: :imageable, :class_name => 'Image' 
```

# ios - 无法通过 GameKit 连接

> ID：10816373
> 
> 赞同：0
> 
> 时间：2012-05-30T12:32:50.403
> 
> 标签：ios, bluetooth, gamekit

我遇到以下问题：我正在使用 GameKit 开发多人游戏。我正在使用 iPad 和 iPod 测试多人游戏。将这些设备相互连接从来没有任何问题，但今天他们不再见面了。当我启动 peerPickerController 时，它只会显示“正在寻找其他 iPad、iPhone 或 iPod touch...”，并且永远无法找到其他设备。我如何解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T12:45:01.473

可能需要调查的事情：1) 设备之前是否有可能通过 WIFI 与 bonjour 连接（它们是否都连接到同一个 wifi 接入点）.. 如果它们通过 wifi 连接，请在每个设备上打开 safari 以验证他们都仍然连接到互联网

2）关闭每部手机并重新启动它们（如果您做了一些暂时弄乱蓝牙堆栈的事情，这可能是一个主要问题

3）您是否在两台设备上都打开了蓝牙

4）您是否更新了其中任何一个的操作系统版本？（如果是这样，gamekit 在 5.0、5.1 等中略有不同）

5）您是否修改了您的代码，以便您比以前更早地初始化游戏套件（这可能导致设备在蓝牙运行之前尝试设置其可用性）

6）将您的代码恢复到早期版本，有时您会发现一些看起来完全不相关的东西实际上是导致问题的原因

以我的经验，这将是其中之一

# php - 如何在 PHP 中捕获当前页面的 url

> ID：10816378
> 
> 赞同：2
> 
> 时间：2012-05-30T12:32:56.300
> 
> 标签：php, url, query-parameters

我想用 PHP 中的参数获取当前页面 URL

网址是

```
http://localhost/omni/abc.php#def=S6ZT4b9MEsFGDzo 
```

我想在`#`签名后获取 url 部分

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T12:40:08.170

URL 中的任何内容`#`仅在客户端处理。它甚至没有传递给服务器的请求，因此您无法直接访问它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T12:44:32.317

从这个网址：`http://localhost/omni/abc.php?def=S6ZT4b9MEsFGDzo`

`$_SERVER['HTTP_HOST']`-> `localhost`
`$_SERVER['SCRIPT_URL']`-> `omni/abc.php`
`$_SERVER['QUERY_STRING']`->`def=S6ZT4b9MEsFGDzo`

或者

`$_SERVER['REQUEST_URI']`->`omni/abc.php?def=S6ZT4b9MEsFGDzo`

或者

`$_SERVER['SCRIPT_URI']`->`http://localhost/omni/abc.php`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T12:41:04.507

在研究这个问题时发现了这个小圆点......

[http://www.stoimen.com/blog/2009/04/15/read-the-anchor-part-of-the-url-with-php/](http://www.stoimen.com/blog/2009/04/15/read-the-anchor-part-of-the-url-with-php/)

```
<script>

var query = location.href.split('#');

document.cookies = 'anchor=' + query[1];

<?php if (!$_COOKIE['anchor']) : ?>

window.location.reload();

<?php endif; ?>

<?php

echo $_COOKIE['anchor'];

?> 
```

# php - $_SESSION (php 5.4.3) 导致 5 分钟以上的性能损失

> ID：10816379
> 
> 赞同：-1
> 
> 时间：2012-05-30T12:32:56.550
> 
> 标签：php, mysql, apache, session

我已经在这里工作了三天来解决这个问题。

当我像这样使用我的函数时，php 需要 5 多分钟才能响应！

```
$indexContent = $class->myWall($_SESSION['FUID'], 20, 'no', 15, 'no');
$fUser = $class->getUser($_SESSION['FUID']); 
```

但如果我这样使用，一切正常需要 250 毫秒才能加载。

```
$indexContent = $class->myWall(1, 20, 'no', 15, 'no');
$fUser = $class->getUser(1); 
```

这里出了什么问题？问题出在哪里？我尝试升级/降级 php 版本、mysql 版本等但没有效果。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-30T13:17:05.767

您需要的是更多信息。

您应该运行像[xdebug](http://xdebug.org/)这样的分析工具来准确查看瓶颈所在的位置。[您可以使用KCachegrind](http://kcachegrind.sourceforge.net)或[Cachegrind](http://valgrind.org/info/tools.html#cachegrind)等工具分析分析输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T12:57:48.397

你试过了吗

```
$indexContent = $class->myWall((int)$_SESSION['FUID'], 20, 'no', 15, 'no'); 
```

如果仍然无法正常工作，则在某处输出带有 static 1 和 (int)$_SESSION['FUID'] 的 SQL 查询。你会注意到差异。

# jquery - jQuery Greedy Droppable Dialog 可能吗？

> ID：10816384
> 
> 赞同：2
> 
> 时间：2012-05-30T12:33:18.800
> 
> 标签：jquery, jquery-ui, jquery-plugins

我正在尝试创建一个对话框，我可以将元素“放入”其中，但我遇到了问题，因为它下面的元素也是可放置的。有没有一种方法可以在没有嵌套元素的情况下模拟或增强可放置元素的贪婪功能（可能带有 z-index 的东西）？或者是否可以在对话框中嵌套对话框（这可能是同一级别的重叠对话框的问题）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T05:40:23.540

这花了我很多时间来弄清楚，但我在这里有一个工作示例：http: [//jsfiddle.net/MadLittleMods/HXRSe/](http://jsfiddle.net/MadLittleMods/HXRSe/)

所以有重叠的可排序列表存在问题，所以我不得不用内置的事件编写一个rearound。我用它`beforeStop`来查找帮助器（项目被拖动）和连接列表之间是否存在冲突。如果发生冲突，我会将其附加到该新列表中。

这是示例的 jQuery 代码：一定要包含 jQuery Collisions：http: [//sourceforge.net/projects/jquerycollision/](http://sourceforge.net/projects/jquerycollision/)

```
$('#container').sortable({
    connectWith: '.sortable_list',
    start: function() {
        $('#popup').fadeIn();
    },
    beforeStop: function(event, ui) {
        var list = ui.helper.collision($('#container').data().sortable.options.connectWith);
        var thisList = $(this);
        list.each(function(index, value) {
            if($(this)[0] != thisList[0]) {
                $(this).append(ui.helper);
            }
        });
    },
    stop: function() {
        $('#popup').fadeOut();
    }
}).disableSelection();

// List to Drag items into...
$('#popup').sortable({
    connectWith: '.sortable_list'
}).disableSelection(); 
```

以及与之配套的 HTML/CSS：

```
<i>Start dragging to see a pop up list.</i>

<div id="container" class="sortable_list">
    <div class="item">Item 1</div>
    <div class="item">Item 2</div>
    <div class="item">Item 3</div>
    <div class="item">Item 4</div>
    <div class="item">Item 5</div>
</div>

<div id="popup" class="sortable_list">
    Drop Items Here:
</div>​

<style type="text/css">
#container
{
    background: #cccccc;
}

.item
{
    background: #eeeeee;
    border: 1px solid #aaaaaa;
    line-height: 30px;

    cursor: hand; 
    cursor: pointer;
}

#popup
{
    position: absolute;
    top: 40px;
    left: 75px;

    display: none;
    width: 500px;

    background: #444444;
    padding: 4px;
}

</style> 
```

# asp.net - 如何在 MS Web Developer Express 中浏览到文件 url - css 文件

> ID：10816386
> 
> 赞同：0
> 
> 时间：2012-05-30T12:33:21.510
> 
> 标签：asp.net, visual-studio, ide

我是 asp.net 的新手，我正在使用 Web Developer Express IDE，我似乎不知道如何浏览到 css 文件中的文件 url，例如：

```
 background: url( how do i browse to the file from hear ?) no-repeat left top; 
```

在 netbeans 中，您可以单击 ctrl + 空格键来查找文件并插入路径。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T12:47:49.920

在 WDE 中工作时，您需要手动键入这些内容。它没有在 CSS 编辑器中提供 url/文件选择器（不过在新版本中有一个颜色选择器）。

# android - 类未找到异常

> ID：10816389
> 
> 赞同：1
> 
> 时间：2012-05-30T12:33:26.213
> 
> 标签：android, android-fragments

我有以下活动

```
package com.appnetics;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.support.v4.app.FragmentActivity;
import android.support.v4.app.FragmentManager;
import android.support.v4.app.FragmentTransaction;
import android.view.View;
import android.widget.Button;

public class FragmenttestActivity extends FragmentActivity {
    Button LogIn = null ;
    final   FragmentManager fragmentManager =    getSupportFragmentManager()  ;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        LogIn = (Button) findViewById(R.id.btn_showdetails); 
        LogInEvent() ; 
    }
public void LogInEvent(){

        LogIn.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {

                        FragmentTransaction fragmentTransaction = fragmentManager.beginTransaction();
                        details fragment = new details();
                        fragmentTransaction.add(R.id.my_parent_layout, fragment);
                        fragmentTransaction.commit();

            }
        }); 

    }

} 
```

我称之为清单

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.appnetics"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="8" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:name=".FragmenttestActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

问题是应用程序崩溃给这个日志猫

```
05-30 14:31:10.970: W/dalvikvm(4958): Unable to resolve superclass of Lcom/appnetics/FragmenttestActivity; (5)
05-30 14:31:10.970: W/dalvikvm(4958): Link of class 'Lcom/appnetics/FragmenttestActivity;' failed
05-30 14:31:10.970: D/AndroidRuntime(4958): Shutting down VM
05-30 14:31:10.970: W/dalvikvm(4958): threadid=1: thread exiting with uncaught exception (group=0x402ce760)
05-30 14:31:10.980: E/AndroidRuntime(4958): FATAL EXCEPTION: main
05-30 14:31:10.980: E/AndroidRuntime(4958): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.appnetics/com.appnetics.FragmenttestActivity}: java.lang.ClassNotFoundException: com.appnetics.FragmenttestActivity in loader dalvik.system.PathClassLoader[/data/app/com.appnetics-1.apk]
05-30 14:31:10.980: E/AndroidRuntime(4958):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1739)
05-30 14:31:10.980: E/AndroidRuntime(4958):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1831)
05-30 14:31:10.980: E/AndroidRuntime(4958):     at android.app.ActivityThread.access$500(ActivityThread.java:122)
05-30 14:31:10.980: E/AndroidRuntime(4958):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1024)
05-30 14:31:10.980: E/AndroidRuntime(4958):     at android.os.Handler.dispatchMessage(Handler.java:99)
05-30 14:31:10.980: E/AndroidRuntime(4958):     at android.os.Looper.loop(Looper.java:132)
05-30 14:31:10.980: E/AndroidRuntime(4958):     at android.app.ActivityThread.main(ActivityThread.java:4123)
05-30 14:31:10.980: E/AndroidRuntime(4958):     at java.lang.reflect.Method.invokeNative(Native Method)
05-30 14:31:10.980: E/AndroidRuntime(4958):     at java.lang.reflect.Method.invoke(Method.java:491)
05-30 14:31:10.980: E/AndroidRuntime(4958):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:849)
05-30 14:31:10.980: E/AndroidRuntime(4958):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:607)
05-30 14:31:10.980: E/AndroidRuntime(4958):     at dalvik.system.NativeStart.main(Native Method)
05-30 14:31:10.980: E/AndroidRuntime(4958): Caused by: java.lang.ClassNotFoundException: com.appnetics.FragmenttestActivity in loader dalvik.system.PathClassLoader[/data/app/com.appnetics-1.apk]
05-30 14:31:10.980: E/AndroidRuntime(4958):     at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:251)
05-30 14:31:10.980: E/AndroidRuntime(4958):     at java.lang.ClassLoader.loadClass(ClassLoader.java:540)
05-30 14:31:10.980: E/AndroidRuntime(4958):     at java.lang.ClassLoader.loadClass(ClassLoader.java:500)
05-30 14:31:10.980: E/AndroidRuntime(4958):     at android.app.Instrumentation.newActivity(Instrumentation.java:1025)
05-30 14:31:10.980: E/AndroidRuntime(4958):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1730)
05-30 14:31:10.980: E/AndroidRuntime(4958):     ... 11 more 
```

我确定活动的名称，我不知道为什么有任何想法

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T12:39:05.847

如果您正在使用`the ADT >= 17`，则必须将支持包的 jar 复制到`libs`项目中的文件夹中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T12:34:36.817

已在 eclipse 的 bulid 路径中添加了 jar 请按照以下链接获取更多信息....

[http://tools.android.com/recent/dealingwithdependenciesinandroidprojects](http://tools.android.com/recent/dealingwithdependenciesinandroidprojects)

[http://mobile.tutsplus.com/tutorials/android/jar-for-android/](http://mobile.tutsplus.com/tutorials/android/jar-for-android/)

# c# - MVC3 中的 Page 和 ViewBag 动态对象有什么区别？

> ID：10816394
> 
> 赞同：3
> 
> 时间：2012-05-30T12:33:39.420
> 
> 标签：c#, .net, asp.net-mvc, asp.net-mvc-3

动态对象`Page`可以在继承自`System.Web.WebPages.WebPageBase`的抽象类中找到。`WebViewPage`

`ViewBag`可以在 中找到动态对象`System.Web.Mvc.WebViewPage`。

两者都可以从视图向上传播到它的布局页面。

我可以看到的另一个区别是`ViewBag`可以在控制器中使用，而`Page`只能在视图中使用。还有其他我应该知道的差异吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-30T13:20:04.203

`Page`并且`ViewBag`是动态的，它们是字典的包装器。

`Page``PageData`是字典的动态包装器。是字典`ViewBag`的动态包装器。`ViewData`

当谈到差异时，

`ViewBag`用于在控制器和视图之间共享数据，甚至我们可以用来在主视图和部分视图之间共享数据。因此 ViewBag 可以从控制器和视图中访问。

`Page`有点不同，它不能从控制器访问，它用于在主页面和部分页面之间传递数据。

请参阅此处的示例，`Page`用于在主视图和部分视图之间传递数据。

**主文件.cshtml**

```
@{
   Page.Name = "Mark;
}

@RenderPage("DisplayName.cshtml"); // partial view 
```

**显示名称.cshtml**

```
<p>
Name: @Page.Name
</p> 
```

并不是说我使用`RenderPage`来渲染局部视图，局部视图也位于主视图所在的同一目录中。

# assembly - 在我使用 ndisasm 看到的功能之后，汇编指令的目的是什么？

> ID：10816395
> 
> 赞同：4
> 
> 时间：2012-05-30T12:33:39.830
> 
> 标签：assembly, x86, nasm, elf, disassembly

我反汇编了编译非常简单的源文件 test.c 产生的代码，它看起来像这样：

```
void main() {} 
```

我运行这些命令将`main`函数链接到静态可执行文件（编者注：没有 CRT 启动代码，所以它只会崩溃），然后提取到删除了几个部分的平面二进制文件，所以我可以将其提供给`ndisasm`（编者注：它不像 ELF 元数据那样理解`objdump -drwC -Mintel`）

```
 gcc -c test.c 
 ld -o test -Ttext 0x0 -e main test.o 
 objcopy -R .note -R .comment -S -O binary test test.bin
 ndisasm -b 32 test.bin 
```

这就是我得到的：

```
00000000  55                push ebp
00000001  89E5              mov ebp,esp
00000003  5D                pop ebp
00000004  C3                ret
00000005  0000              add [eax],al
00000007  001400            add [eax+eax],dl
0000000A  0000              add [eax],al
0000000C  0000              add [eax],al
0000000E  0000              add [eax],al
00000010  017A52            add [edx+0x52],edi
00000013  0001              add [ecx],al
00000015  7C08              jl 0x1f
00000017  011B              add [ebx],ebx
00000019  0C04              or al,0x4
0000001B  0488              add al,0x88
0000001D  0100              add [eax],eax
0000001F  001C00            add [eax+eax],bl
00000022  0000              add [eax],al
00000024  1C00              sbb al,0x0
00000026  0000              add [eax],al
00000028  D8FF              fdivr st7
0000002A  FF                db 0xff
0000002B  FF05    00000000      inc dword [dword 0x0]
00000031  41                inc ecx
00000032  0E                push cs
00000033  088502420D05      or [ebp+0x50d4202],al
00000039  41                inc ecx
0000003A  0C04              or al,0x4
0000003C  04C5              add al,0xc5
0000003E  0000              add [eax],al 
```

前四行之后的所有内容的目的是什么？为什么要添加到 eax、2*eax、edx+0x52、比较等指向的内存位置？是为了检查程序是否正确执行还是别的什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-30T12:34:45.823

我相信你已经反汇编了不是代码的位，这就是为什么它没有多大意义。

要了解文件可能包含的内容，我建议`objdump`在*完整*二进制文件 (ELF) 上运行，看看您是否可以识别任何部分中的上述字节序列。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-04-19T04:23:32.420

本节`.eh_frame`紧随其后`.text`。`-fno-asynchronous-unwind-tables`你可以通过使用gcc 编译时摆脱它。

请参阅[为什么 GCC 编译的 C 程序需要 .eh_frame 部分？](https://stackoverflow.com/questions/26300819/why-gcc-compiled-c-program-needs-eh-frame-section)更多细节。

# c++ - 设置了 MOVEFILE_COPY_ALLOWED 标志的 MoveFileEx

> ID：10816397
> 
> 赞同：-1
> 
> 时间：2012-05-30T12:33:44.403
> 
> 标签：c++, file

因此，MoveFileEx 的 msdn 页面声明了 MOVEFILE_COPY_ALLOWED：

如果要将文件移动到不同的卷，则该函数通过使用 CopyFile 和 DeleteFile 函数来模拟移动。如果文件被成功复制到不同的卷并且无法删除原始文件，则该函数成功保留源文件不变。

现在我的问题是首先，当它说音量时，我认为这只是意味着你的硬盘上的不同位置？按照这个假设，如果我制作了一个只读文件。然后我调用 MoveFileEx 并设置 MOVEFILE_COPY_ALLOWED 标志，它是否应该不只是使用 CopyFile 移动文件。那么当它试图删除文件时它应该会失败，因为 DeleteFile 不能删除只读文件。

我正在执行上述操作，只是文件正在从旧位置删除。我唯一的想法是音量与我上面所说的不同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T12:43:07.293

`Volume`表示系统上的不同驱动器（分区），例如 from`C:`到`D:`，或从本地驱动器到远程驱动器（反之亦然）。

如果您要复制到同一个卷（例如， from `C:\Test\`to `C:\TestTwo\`，它们在同一个卷上。

我在文档中没有看到任何说`If the file is read-only and therefore unable to be deleted`. 我明白`If the file is unable to be deleted`了，这大概意味着`If the file is in use or you don't have proper rights in the source location to delete it`。毕竟，您要求通过调用来移动文件`MoveFileEx`。

如果您不想删除文件，请不要调用`MoveFile`or `MoveFileEx`; 改为使用`CopyFile`，这显然是您想要做的。

# c++ - 对常量数组的未定义引用

> ID：10816410
> 
> 赞同：8
> 
> 时间：2012-05-30T12:34:43.013
> 
> 标签：c++, arrays, header, linker, constants

a.cpp

```
const unsigned char whatever[123] = { /* ... */ }; 
```

啊

```
extern const unsigned char whatever[123]; 
```

b.cpp

```
#include "a.h"
unsigned char x = whatever[0];
// error: undefined reference to 'whatever' 
```

为什么我会收到未定义的引用错误？没有`const`，错误就会消失。

如何在多个翻译单元之间共享一组常量？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-30T13:00:32.313

这是人们遇到的怪癖之一，只是您定义了一个 ah 头文件，该文件声明了一个 123 个字符的 const 数组，并为其分配了外部链接。当它被包含到 b.cpp 文件中时，您基本上是在保证它会在其他翻译单元中找到它的编译器。

但是，每个`const`变量都有一个不为人知的秘密——它被困在其定义的翻译单元中，因为它被隐式地赋予了静态链接。您承诺您的编译器`whatever`将在多个翻译单元之间共享，但它实际上只忠于一个翻译单元并且不喜欢被共享。而且，你知道其余的。

`extern`通过在实现文件中明确说明来解决。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-30T12:41:15.117

```
3.5/3

 A name having namespace scope (3.3.5) has internal linkage if it is the name of
 ...
 — an object or reference that is explicitly declared const and neither explicitly declared extern nor previously declared to have external linkage;
 ... 
```

变量喜欢

```
 const int x = 10; 
```

被隐式定义为“静态”。

要使它们成为非静态的（因此是非内部的），请在“.c”文件中使用“extern”修饰符。

尝试使用

```
extern const unsigned char whatever[123] = { /* ... */ }; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T12:40:52.933

const 在 c++ 中默认具有静态（内部）链接，在您的 .c 文件中也使用 extern const。
[这](https://stackoverflow.com/questions/1358400/what-is-external-linkage-and-internal-linkage-in-c)是一个包含更多信息的随机 SO 线程。或谷歌“c++中的链接”。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-02-08T20:34:36.503

要解决这个问题，`a.cpp`应该这样做：

```
#include "a.h" 
```

在定义之前`whatever`。

*如果范围内没有先前的声明，*则将`const unsigned char whatever[123] = {...};`具有内部链接。但如果`a.h`包含，则定义与先前的声明相匹配。标头`whatever`使用外部链接定义，并且定义与名称匹配。

正如其他人所提到的，您也可以`extern`输入定义，这样如果您忘记`#include "a.h"`. 但最好的做法仍然是包含声明我们试图公开定义的任何内容的标头。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-30T14:03:46.850

在 C++ 中，const 是编译时 const，例如，

```
const int cc = 100;
int a[cc]; 
```

我们可以在 C++ 中使用 const 来定义数组，但在 C 中不能。由于是 const，无法更改其值，因此不需要在多个文件之间共享它们。因此，可以说， const 具有内部联系。

# version-control - Unix 和 Linux 脚本的版本控制

> ID：10816412
> 
> 赞同：0
> 
> 时间：2012-05-30T12:34:49.627
> 
> 标签：version-control

我在一家使用 Unix 和 Linux 服务器的公司工作。很多时候，脚本（在 shell、perl 或 python 中）被编写，然后多次修改，这可能会产生混乱。

我的任务是在这些服务器上研究和实施版本控制系统，以帮助我们更好地处理脚本编写和编辑。

关于使用什么版本控制解决方案有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T13:04:49.203

Git、Mercurial 和 Bazaar 中的任何一个都可以。这些是流行的现代分布式版本控制系统，但即使您并不特别认为自己需要 DVCS，它们也是最有力的竞争者。如果您出于某种原因害怕 DVCS 概念，您可能还想考虑 Subversion，但它不应该是您的首选，除非您有理由想留在前十年。

任何版本控制都比没有版本控制好。你会想知道在几周内没有它你是如何度过的。

另见[http://en.wikipedia.org/wiki/Revision_control](http://en.wikipedia.org/wiki/Revision_control)

# java - 为什么 IllegalAccessError 没有两个参数的构造函数？

> ID：10816414
> 
> 赞同：3
> 
> 时间：2012-05-30T12:34:51.093
> 
> 标签：java

IllegalAccessError 类有两个构造函数，`IllegalAccessError()`和`IllegalAccessError(String s)`.

为什么 IllegalAccessError 没有像这样的两个参数的构造函数`IllegalAccessError(String s, Throwable cause)`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-30T12:39:38.097

`IllegalAccessError`本身就是错误的最终根本原因。这就是为什么它不需要任何`Throwable cause`.

# ember.js - Ember.run.end 问题

> ID：10816415
> 
> 赞同：0
> 
> 时间：2012-05-30T12:34:53.233
> 
> 标签：ember.js, radio

通过 valueBinding 将值设置为 ember 单选按钮后，调用 Ember.run.end() 将更改的值反映在 DOM 中。

但请参阅以下错误。错误：未捕获的类型错误：无法调用 null wt 的方法 'prev' 是这里的问题

```
 //Doing value binding here
    App.radioController.set('content', App.createRadioModel.create({ id:1 }));
    Ember.run.end();
  //Doing some css changes as soon as the value is updated onto the radio button.
  Ember.$(".view-radio").removeClass("modified","delete"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T23:30:03.787

如果`Ember.run.end()`没有相应的`Ember.run.start()`. 您看到的错误可能是因为没有当前的运行循环。

如果您要手动同步绑定，可以使用`Ember.run.sync()`. 否则，我建议将您的代码包装在这样的`Ember.run()`调用中：

```
Ember.run(function() {
  // your code here
}); 
```

# android - 在 android 框架本身内对 NFC 标签做出反应

> ID：10816420
> 
> 赞同：1
> 
> 时间：2012-05-30T12:35:16.597
> 
> 标签：android, frameworks, android-activity, nfc, lockscreen

我想在 android 框架内接收 NFC 标签。特别是在“LockPatternKeyguardView”内部。问题是我不在活动上下文中，因此我无法从 NfcService 接收任何意图。到目前为止，我的想法是让另一个活动对所有 Nfc 标签做出反应，并通过广播意图将它们传递给在“LockPatternKeyguardView”内运行的服务。

不知何故，我认为这不是一个真正的好方法。谁能指出一个替代方案？

提前致谢，

罗伯特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T00:44:46.993

由于服务无法处理 NFC 意图，这听起来是一种合理的方法。

# jquery - 为什么 .on() 在使用多个事件处理程序时不支持委托（未来元素）？

> ID：10816424
> 
> 赞同：0
> 
> 时间：2012-05-30T12:35:31.277
> 
> 标签：jquery

**使用 .live() ：**

```
<input type="button" value="button" />

$(":input[type=button]").live({
      click: function() {
            $(this).after('<input type="button" value="new" />');
      },
      mouseover: function() {
            //do something
      },
      mouseout: function() {
            //do something
      }
    }); 
```

**演示：http:** [//jsfiddle.net/F9gC4](http://jsfiddle.net/F9gC4)

这里委托工作正常。如果我们单击“按钮”或“新建”，将创建新的按钮元素。

**使用 .on() ：**

```
<input type="button" value="button" />

$(":input[type=button]").live({
      click: function() {
            $(this).after('<input type="button" value="new" />');
      },
      mouseover: function() {
            //do something
      },
      mouseout: function() {
            //do something
      }
    }); 
```

**演示：http:** [//jsfiddle.net/CB8fh](http://jsfiddle.net/CB8fh)

这里委托不起作用。“新”按钮单击不会创建元素（无法触发）

那么我们如何使用 .on() 多个事件处理程序和委托（未来元素）？

这可能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-30T12:41:01.640

试试这个代码：

```
$(document).on({
      click: function() {
            $(this).after('<input type="button" value="new" />');
      },
      mouseover: function() {
            //do something
      },
      mouseout: function() {
            //do something
      }
}, ':input[type=button]');​ 
```

要使用已创建/未来的元素进行委派，您需要将事件附加到文档并使用 .on 函数的“选择器”参数来定位事件。未经测试，但理论上应该可以工作！请参阅[on 函数](http://api.jquery.com/on/ "在")的文档，并且[live 的文档中](http://api.jquery.com/live/)有一节关于移动到 .on 函数。

**编辑**只是想添加，正如@Joy 在他的回答中所说，您不需要附加到`document`，越接近您委托给的目标元素越好（尽管您需要确保该元素不会受到 ajax/ dom 更改可能会删除事件处理程序）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T12:40:03.963

`$.on`在这种情况下，您必须将事件绑定到父元素

```
$(document).on({
  click: function() {
        $(this).after('<input type="button" value="new" />');
  },
  mouseover: function() {
        //do something
  },
  mouseout: function() {
        //do something
  }
},':input[type=button]');​ 
```

在这种情况下，我绑定到`document`，您可以绑定到`parent`dom 中始终存在的任何内容。

[工作小提琴](http://jsfiddle.net/joycse06/CB8fh/2/)

参考：[$.on](http://api.jquery.com/on/)

# c# - AXIS 媒体控制 ActiveX 组件

> ID：10816427
> 
> 赞同：1
> 
> 时间：2012-05-30T12:35:37.250
> 
> 标签：c#, winforms, video, activex

我有一个播放流媒体视频的 ActiveX 控件，我从以下网址下载：[http](http://www.axis.com/techsup/cam_servers/dev/activex.htm) ://www.axis.com/techsup/cam_servers/dev/activex.htm 我的目标是在视频上画一个椭圆！！我创建了使用此 ActiveX 控件的表单 (winform) 并且我看到了视频，但是视频主宰了屏幕以及我尝试放在视频上的所有东西，从未见过。有什么帮助吗？

```
amc.mediaurl="192.168.0.1";
amc.mediatype="mpjg";
amc.play(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T12:44:33.133

该控件应该具有属性以设置剧本尺寸，您应该查看文档。几个月前我玩过Axis control，所以我很确定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-12T19:05:18.030

要在 Axis Media Control 视频流上绘制椭圆、多边形和其他形状，您必须使用带有叠加层的*UserObject方法：*

`BeginUserObject`, `EndUserObject`, `GetUserObject`, `SetUserObject`, `RemoveUserObject`, `OnUserObjectChanged`.

`AmcDoc.chm`在安装 AMC 的目录中有一个帮助文件。它通常在`C:\Program Files (x86)\Axis Communications\AXIS Media Control SDK\doc`.

SetUserObject 用于在视频流上绘制内容：

```
 HRESULT SetUserObject(ByVal theID As Long,
            ByVal theType As Long,
            ByVal theData As String,
            ByVal theName As String,
            ByVal theColor1 As Long,
            ByVal theColor2 As Long,
            ByVal theNumPointsLimit As Long,
            ByVal theFlags As Long) 
```

例如，要绘制 Ellipsis ：

```
axAxisMediaControl1.SetUserObject(2, 4, 
                                  "4500,4500,500,1000", "test", 
                                  255, 100, -1, 19); 
```

> 前两个整数定义椭圆 (x,y) 的中心点。第三个整数定义相对于圆的 x 轴的半径。第四个整数定义相对于圆的 y 轴的半径。

为此，您必须`enableOverlays`在媒体控件属性中设置为 1。

# javascript - 将 css 附加到特定的 div

> ID：10816430
> 
> 赞同：-2
> 
> 时间：2012-05-30T12:35:42.433
> 
> 标签：javascript, jquery

可以修改下面的 jQuery，而不是附加到通用 .myCss 样式，我可以附加到特定 div 'myDiv' 中的 css 吗？

```
var myDiv= $("#myDiv");
$('<a class=\".newCss\" href=\"#\"></a>').appendTo('.myCss'); 
```

通过附加到 css，我的意思是 div 从此转换：

```
<div id="myId" class="myCss">
</div> 
```

对此：

```
<div id="myId" class="test">
    <a class="myCss"></a>                                               
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T12:38:03.090

只需更改选择器。

```
$('<a class=\".newCss\" href=\"#\"></a>').appendTo('#myDiv'); 
```

或者，由于您已经引用了它，只需传递您之前使用该选择器创建的 jQuery 对象。

```
var myDiv= $("#myDiv");
$('<a class=\".newCss\" href=\"#\"></a>').appendTo(myDiv); 
```

* * *

由于问题已被重写：

1.  如果您不想`.`在类名中出现愚蠢，请不要在里面放一个
2.  如果您不想要 href 属性，请不要在其中添加一个
3.  确保您在 HTML 中使用的 id 与您在 CSS 中使用的 id 匹配

这样的：

```
var myDiv= $("#myId");
$('<a class="newCss"></a>').appendTo(myDiv); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T12:38:11.517

```
$('<a class="newCss" href="#"></a>').appendTo('#myDiv .myCss'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T12:38:31.417

当然：

```
var myDiv= $("#myDiv");
$('<a class="newCss" href="#"></a>').appendTo(myDiv); 
```

或者简单地说：

```
$('<a class="newCss" href="#"></a>').appendTo('#myDiv'); 
```

或者

```
$("#myDiv").append('<a class="newCss" href="#"></a>'); 
```

或者

```
$("#myDiv").html('<a class="newCss" href="#"></a>'); 
```

**修复的东西：**

*   从`class=\".newCss\"`
*   删除了不必要的转义字符`\`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-30T12:38:38.240

试试这个：

```
$('<a class=\".newCss\" href=\"#\"></a>').appendTo("#myDiv .myCss"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-30T12:48:02.803

根据您更新的问题，我假设您的要求是将任何类复制`#myDiv`到新`<a>`元素中，而不管实际上是什么类：

```
var myDiv= $("#myDiv");               // find the div
var cls = myDiv.attr('class');        // get its existing class
$('<a>', {href: '#', 'class': cls})   // create the new link with that class
  .appendTo(myDiv);                   // append it
myDiv.removeClass().addClass('test'); // change the div's class 
```

# android - 动态壁纸和扩展背景

> ID：10816432
> 
> 赞同：3
> 
> 时间：2012-05-30T12:35:49.330
> 
> 标签：android, bitmap, android-canvas, live-wallpaper, wallpaper

我正在尝试创建一个动态壁纸，其动画始终以当前主屏幕页面为中心，而不会丢失扩展背景。我现在正在做的是绘制我的自定义背景位图，然后在其上绘制一些文本。

这是我的并条框方法：

```
 final SurfaceHolder holder = getSurfaceHolder();
        Canvas canvas = null;
        try {
            canvas = holder.lockCanvas();
            if (canvas != null) {

                if(mBackgroundBitmap != null) {
                    canvas.drawBitmap(mBackgroundBitmap, 0, 0, null);
                } else {
                    canvas.drawColor(Color.BLACK);
                }
                drawText(canvas);
            }
        }
        finally {
            if (canvas != null ) holder.unlockCanvasAndPost(canvas);
        } 
```

它确实有效，但很明显，当我在主屏幕上更改页面时，我得到了一个固定的背景图像，而不是像使用大壁纸时那样的不同“部分”。

我也尝试在锁定画布之前设置壁纸，但它不像预期的那样工作：

```
if(mBackgroundBitmap != null) {                 
                try {
                    setWallpaper(mBackgroundBitmap);
                } catch (IOException e) {
                    e.printStackTrace();
                }
            }
final SurfaceHolder holder = getSurfaceHolder();
    Canvas canvas = null;
    try {
        canvas = holder.lockCanvas();
        if (canvas != null) {
            drawText(canvas);
        }
    }
    finally {
        if (canvas != null ) holder.unlockCanvasAndPost(canvas);
    } 
```

更改主屏幕页面时如何保持大背景“移动”，但在当前页面中添加一些动画？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T12:56:18.050

我已经找到解决方法了！

```
 void drawFrame() {
        final SurfaceHolder holder = getSurfaceHolder();

        Canvas canvas = null;
        try {
            canvas = holder.lockCanvas();
            if (canvas != null) {
                canvas.save();
                canvas.translate((float) mxOffset, 0f);

                if(mBackgroundBitmap != null) {
                    canvas.drawBitmap(mBackgroundBitmap, 0, 0, null);
                }

                canvas.restore();
            }
        }
        finally {
            if (canvas != null ) holder.unlockCanvasAndPost(canvas);
        }
    } 
```

mBackgroundBitmap 是我想作为墙纸绘制的位图，它的宽度是屏幕宽度的两倍。

mxOffsets 被覆盖在 onOffsetsChanged 中：

```
 @Override
    public void onOffsetsChanged(float xOffset, float yOffset,
            float xOffsetStep, float yOffsetStep, int xPixelOffset,
            int yPixelOffset) {
        super.onOffsetsChanged(mxOffset, yOffset, xOffsetStep, yOffsetStep,
                xPixelOffset, yPixelOffset);

        mxOffset = xPixelOffset;
        drawFrame();
    } 
```

# android - 关闭应用程序时不会收到通知

> ID：10816434
> 
> 赞同：3
> 
> 时间：2012-05-30T12:35:58.063
> 
> 标签：android, push-notification, android-c2dm, urbanairship.com

我有一个使用 Urban Airship 设置推送通知的 Android 应用程序。我的应用程序打开时通知工作正常，但我的应用程序关闭时我仍需要接收通知。我环顾四周，但没有找到有用的东西。我很确定问题出在我的清单中，所以就在这里。

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="za.co.foo.android.financials"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="11" />

    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
    <uses-permission android:name="android.permission.WRITE_INTERNAL_STORAGE" />

    <!-- Permissions for Urban Airship -->
    <uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED"/> <!-- Not sure if required for C2DM -->
    <uses-permission android:name="android.permission.VIBRATE"/>
    <uses-permission android:name="android.permission.BROADCAST_STICKY" />

    <!-- Only this application can receive the messages and registration result -->
    <permission android:name="za.co.foo.android.financials.permission.C2D_MESSAGE" android:protectionLevel="signature" />
    <uses-permission android:name="za.co.foo.android.financials.permission.C2D_MESSAGE" />

    <!-- This app has permission to register and receive message -->
    <uses-permission android:name="com.google.android.c2dm.permission.RECEIVE" />

    <application
        android:icon="@drawable/icon"
        android:label="@string/app_name" >
        <activity
            android:name=".InvestorRelations"
            android:label="@string/app_name" 
            android:screenOrientation="landscape" 
            android:theme="@android:style/Theme.Holo.NoActionBar">

            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <!-- For Urban Airship -->
        <receiver android:name="com.urbanairship.CoreReceiver">
        </receiver>

        <receiver android:name="com.urbanairship.push.c2dm.C2DMPushReceiver"
                android:permission="com.google.android.c2dm.permission.SEND"
                android:enabled="true">
             <!-- Receive the actual message -->
             <intent-filter>
                 <action android:name="com.google.android.c2dm.intent.RECEIVE" />
                 <category android:name="za.co.foo.android.financials" />
             </intent-filter>
             <!-- Receive the registration id -->
             <intent-filter>
                 <action android:name="com.google.android.c2dm.intent.REGISTRATION" />
                 <category android:name="za.co.foo.android.financials" />
             </intent-filter>
        </receiver>

        <receiver android:name="za.co.foo.android.financials.IntentReceiver" />

        <service android:name="com.urbanairship.push.PushService" />

    </application>

</manifest> 
```

这是我的`IntentReceiver`

```
public class IntentReceiver extends BroadcastReceiver {

    private static final String logTag = "IR Intent Receiver";

    @Override
        public void onReceive(Context context, Intent intent) {
        Log.i(logTag, "Received intent: " + intent.toString());
        String action = intent.getAction();

        if (action.equals(PushManager.ACTION_PUSH_RECEIVED)) {
            int id = intent.getIntExtra(PushManager.EXTRA_NOTIFICATION_ID, 0);

            Log.i(logTag, "Received push notification. Alert: "
                    + intent.getStringExtra(PushManager.EXTRA_ALERT)
                    + " [NotificationID="+id+"]");

            logPushExtras(intent);

        } else if (action.equals(PushManager.ACTION_NOTIFICATION_OPENED)) {
            Log.i(logTag, "User clicked notification. Message: " + intent.getStringExtra(PushManager.EXTRA_ALERT));

            logPushExtras(intent);

            Intent launch = new Intent(Intent.ACTION_MAIN);
            launch.setClass(UAirship.shared().getApplicationContext(), InvestorRelations.class);
            launch.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
            launch.putExtra("FromNotification", true);

            UAirship.shared().getApplicationContext().startActivity(launch);

        } else if (action.equals(PushManager.ACTION_REGISTRATION_FINISHED)) {
            Log.i(logTag, "Registration complete. APID:" + intent.getStringExtra(PushManager.EXTRA_APID)
                    + ". Valid: " + intent.getBooleanExtra(PushManager.EXTRA_REGISTRATION_VALID, false));
        }

    }

    public void logPushExtras(intent) {
        //Does some logging stuff
    }
} 
```

任何帮助都会很棒

**编辑**

包括整个清单，只有我的公司名称更改为“foo”。

**编辑**

事实证明，我的应用在关闭时确实会收到通知，但在强制关闭后不会收到通知。看完[这个](https://stackoverflow.com/questions/8814817/c2dm-broadcast-receiver)问题才明白。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T06:59:31.227

It turns out the notifications worked fine whether the app was running or not. The problem was when the app was force-closed.

I think the actual problem is something along the lines of the BroadcastReceiver being killed when the app is force closed but I'm not sure.

This is just to close the question off because it's unlikely to be solved now that I realise the problem is different to the question title.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T12:43:55.063

is your projects package really named "mypackage" ? and is your receiver etc. in that package? Because it looks like all "myPackage" should be repalced with "com.urbanairship"

# sql-server - 如何设置 rdlc 报告表中显示的最小行数？

> ID：10816437
> 
> 赞同：0
> 
> 时间：2012-05-30T12:36:06.603
> 
> 标签：sql-server

如何设置 rdlc 报告表中显示的最小行数？如果数据库只返回 5 行，但我想要 15 行，甚至 10 行显示为空白。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T13:12:25.313

我只能考虑限制 SSRS 报告中显示的行数。你这样做的方法是在组上写一个表达式

```
 =Ceiling((RowNumber(Nothing)) / 20) 
```

并在开始时设置分页符，在结束时设置分页符

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T15:51:26.667

想到的最简单的方法是您可以将带有空数据的其他行添加到传递给 rdlc 的数据集中。

这可以在用于填充数据表的存储过程（或多语句函数）中完成，也可以在将其交给报告之前直接针对应用程序代码中的数据表完成。

# blackberry - 在 BlackBerry 中设置 ObjectChoiceField 的高度？

> ID：10816441
> 
> 赞同：3
> 
> 时间：2012-05-30T12:36:29.543
> 
> 标签：blackberry

我在我的应用程序中使用了[ObjectChoiceField](http://www.blackberry.com/developers/docs/5.0.0api/net/rim/device/api/ui/component/ObjectChoiceField.html)。选择很长，大多数选择是两条线，这增加了高度`ObjectChoiceField`并使我的 UI 不稳定。我在**Android中使用了“** **single line = true** ”属性，它允许长文本行以省略号（...）显示。

 **我可以在 BlackBerry 中这样做，因为不想在运行时更改高度。我也不想使用 custom `ObjectChoiceField`。请根据我的情况建议我该怎么做。

*目前我正在使用以下代码。*

```
ObjectChoiceField _productLineOCF =new ObjectChoiceField("",_productLineArray,plSetTo1,Field.FIELD_RIGHT){
    protected void layout(int width, int height) {
        setMinimalWidth(width - 61);
        super.layout(width, height);
    }
}; 
```

*上述代码的示例输出：*

![样本输出](../Images/856ecfa2755d713b268d06c3b324dba8.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-30T18:05:48.910

试试这个，

```
String choices[] = {
        "Choice 1 - Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.",
        "Choice 2",
        "Choice 3" };

long styleBit = Field.FIELD_RIGHT | ObjectChoiceField.FORCE_SINGLE_LINE;

ObjectChoiceField ocf = new ObjectChoiceField("", choices, 0, styleBit) {
    protected void layout(int width, int height) {
        setMinimalWidth(width - 61);
        super.layout(width, height);
    }
}; 
```**

# java - 如何使用 Java 获取 WSDL 文件中的复杂类型？

> ID：10816442
> 
> 赞同：2
> 
> 时间：2012-05-30T12:36:45.493
> 
> 标签：java, web-services, wsdl, castor, complextype

我已经阅读了类似的主题和示例，但是在从 WSDL 获取具有复杂类型的 WSDL 模式内容方面仍然存在一些问题。

我正在使用 WSDL4J、Castor 和 JDOM 库。

```
 org.exolab.castor.xml.schema.Schema castorSchema = null ;
            if(theWSDL.getTypes() !=null &&  theWSDL.getTypes().getExtensibilityElements() !=null){
                for (Object e : theWSDL.getTypes().getExtensibilityElements()) {
                    schema = (Schema)e;
                }
            }

            if (schema != null) {
                DOMBuilder domBuilder = new DOMBuilder();
                Element jdomSchemaElement = domBuilder.build(schema.getElement());
                XMLOutputter outputter = new XMLOutputter();
                String xmlout = outputter.outputString(jdomSchemaElement.getDocument());

                StringReader in2 = new StringReader(xmlout);
                InputSource schemaSource = new InputSource(in2);

                SchemaReader schemaReader;
                try {
                    schemaReader = new SchemaReader(schemaSource);
                    castorSchema= schemaReader.read();
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
            } 
```

此代码适用于某些 WSDL 文件，但对于某些 WSDL 文件，我在行“castorSchema=schemaReader.read();”中收到此错误：

> 线程“主”java.lang.IllegalArgumentException 中的异常：getComplexType：在 org.exolab.castor.xml.schema.Schema.getComplexType(Schema.java:951) 的 org.exolab.castor 中无法识别命名空间前缀“tns:cEstado” .xml.schema.TypeReference.resolveTypeReference(TypeReference.java:122) 在 org.exolab.castor.xml.schema.TypeReference.getType(TypeReference.java:71) 在 org.exolab.castor.xml.schema.ElementDecl.getType (ElementDecl.java:349) 在 org.exolab.castor.xml.schema.ElementDecl.validate(ElementDecl.java:809) 在 org.exolab.castor.xml.schema.Group.validate(Group.java:463) 在org.exolab.castor.xml.schema.ComplexType.validate(ComplexType.java:815) 在 org.exolab.castor.xml.schema.Schema.validate(Schema.java:2206) 在 org.exolab.castor.xml。 schema.reader.SchemaReader.read(SchemaReader.java:261) 在 network.WSNetwork.execute(WSNetwork.java:105) 在 network.WSNetwork.main(WSNetwork.java:61)

关于模式中复杂类型的 wsdl 文件部分：

```
 <s:complexType>

      <s:sequence>

        <s:element minOccurs="0" maxOccurs="1" name="getestadosResult" type="tns:ArrayOfCEstado" />

      </s:sequence>

    </s:complexType>

  </s:element>

  <s:complexType name="ArrayOfCEstado">

    <s:sequence>

      <s:element minOccurs="0" maxOccurs="unbounded" name="cEstado" nillable="true" type="tns:cEstado" />

    </s:sequence>

  </s:complexType>

  <s:complexType name="cEstado">

    <s:sequence>

      <s:element minOccurs="0" maxOccurs="1" name="IdEstado" type="s:string" />

      <s:element minOccurs="0" maxOccurs="1" name="Estado" type="s:string" />

      <s:element minOccurs="0" maxOccurs="1" name="Err" type="s:string" />

    </s:sequence>

  </s:complexType> 
```

任何帮助将不胜感激..

谢谢

# php - 检查数组中的数组？

> ID：10816451
> 
> 赞同：1
> 
> 时间：2012-05-30T12:37:24.583
> 
> 标签：php, arrays

我将一个数组 ($row) 放在另一个数组 ($allRows) 中：

```
array_push($allRows, $row); 
```

有没有一种简单的方法来检查 $allRows 中是否已经存在数组？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T12:42:23.167

是的：

```
if (in_array($array1, $array2)) {
echo "Array found";
}
// $array1 - needle. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T12:52:06.780

这可以通过[`in_array`^(*Docs*)](http://php.net/in_array)实现：

```
if (in_array($row, $allRows, TRUE)) {
   echo "Array found";
} 
```

与现有答案不同，这个答案实际上告诉您参数的顺序，并且您必须指定*严格*的参数。

否则，您将比较其他很可能不是您要查找的内容，请参阅[*比较运算符*^(*文档*)](http://php.net/manual/language.operators.comparison.php)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T12:40:07.270

使用[`in_array()`](http://www.php.net/manual/en/function.in-array.php)...

```
$range = range(1, 10);

var_export(in_array($range, array(range(1, 10)))); 
```

[键盘](http://codepad.org/pJLeKoZg)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-30T12:40:31.187

您可以检查 $allRows 是否已经有元素

```
count($allRows) 
```

# c++ - C++ Fallout new vegas directx hook和自定义绘图

> ID：10816452
> 
> 赞同：1
> 
> 时间：2012-05-30T12:37:26.523
> 
> 标签：c++, directx

我写了一个用于在 Fallout NV 中显示自定义内容的 directx 挂钩，但我遇到了一个我无法理解的问题。

初始化代码：

```
hdc=CreateCompatibleDC(NULL);
font=CreateFont(1000,0,0,0,FW_NORMAL,false,false,false,DEFAULT_CHARSET,OUT_DEFAULT_PRECIS,CLIP    _DEFAULT_PRECIS,DEFAULT_QUALITY,DEFAULT_PITCH|FF_DONTCARE,"Arial");
SelectObject(hdc, font);
D3DXCreateText(this->m_pIDirect3DDevice9,hdc,"Hello World",0.001f,0.4f,&mesh,NULL,NULL); 
```

EndScene Hook 上的代码：

```
m_pIDirect3DDevice9->SetRenderState(D3DRS_CULLMODE, D3DCULL_NONE);
D3DXMATRIX world_matrix; //Pre-initialized
D3DXMatrixIdentity(&world_matrix);
D3DXMatrixTranslation(&world_matrix,-67762,3567,8384);
m_pIDirect3DDevice9->SetTransform(D3DTS_WORLD,&world_matrix);
mesh->DrawSubset(0); 
```

这是结果：

![在此处输入图像描述](../Images/f2d7e54a2f9c3364dcfd16dfc4116418.png)

如您所见，图像是 2d（应该是 3d），而且它就像场景的“蒙版”，为什么？我错过了什么？

# web-services - 也将 Web 应用程序公开为 Web 服务

> ID：10816455
> 
> 赞同：0
> 
> 时间：2012-05-30T12:37:44.100
> 
> 标签：web-services, spring

我有一个在春天开发的网络应用程序。现在我需要将某些功能公开为 Restful Web 服务。我不应该使用 Spring Rest 功能。以下是我的问题，

1) 我可以使用与 Web 应用程序和 Web 服务相同的代码库吗？

2）如果对第一个问题的回答是肯定的，那么只需很少或最小的更改，将 Web 应用程序类（或某些功能）转换为安静的 Web 服务的最佳方法是什么？AXIS2 还是泽西岛？对于 Jersey，我可以看到互联网上提供的示例教程主要由注释驱动，并且由于我的 Spring Web 应用程序已经充满了诸如 @AutoWired、@Component 等注释，我不确定在 spring 注释之上使用 Jersey 注释会导致到冲突。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T13:49:06.290

是的，您可以使用相同的代码库，但不一样..您需要用球衣的注释替换一些注释，因为 Web 服务是关于它的 URL 和方法的，因此需要将 URL 路径放置到方法并且必须定义请求-Java 类和方法上的响应方法（post/get）方法。

此外，您需要制作带有 jersey 注释的 xml 控制器或包装器，它们将接收发布的 xml 输入并生成所需的 xml 输出，或者您决定的 JSON。

对我来说，使用 jersey 将与 spring 注释非常相似，而且也很容易。

# sql-server - 使用 TransactionScope 执行多个包含 BEGIN TRANS - COMMIT TRANS 的 SP

> ID：10816457
> 
> 赞同：3
> 
> 时间：2012-05-30T12:37:58.053
> 
> 标签：sql-server, sql-server-2008, transactions, transactionscope

当 BEGIN TRANS - COMMIT TRANS 在一个 SP 中完成并在 TransactionScope 中执行多个 SP 并在完成范围之前引发错误时会发生什么。

所以伪代码如下

```
//Using TransactionScope() {
//   executing SP1 
//   executing SP2
//   executing SP3
//   throw new Exception();
//} 
```

SP2 包含如下代码。

```
// BEGIN TRANS
//   Update Statement1
//   Update Statement2
//   Update Statement3
// COMMIT TRANS 
```

如果我们假设事务在 SP2 中被提交，会发生什么？

1.  一切都回滚
2.  SP2 中的 3 个语句被提交。其他一切都回滚了吗？

我不知道这是否重要，但以防万一，所有三个 SP 都使用一个连接对象执行，并且连接正在关闭并在两个 ExecuteNonQuery 语句之间再次打开。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T13:07:18.570

只有一个事务，总是由最外层事务范围启动的最外层事务。在最外层事务范围下发生的所有其他内部事务范围和 T-SQL 代码中的所有其他 BEGIN TRANSACTION 只不过是美化的增量，[`@@TRANCOUNT`](http://msdn.microsoft.com/en-us/library/ms187967.aspx)所有这些 COMMITS 只不过是相同的减量。只有最后一次 COMMIT 才重要，直到那时事务还没有提交。

因此，在您的示例中，SP2 没有提交任何内容。它所做的一切都是将@@TRANCOUNT 增加到 2，然后将其减少回 1。事务仍然处于活动状态，并且当 C# 代码抛出时，事务将回滚。

作为旁注，请参阅[异常处理和嵌套事务](http://rusanu.com/2009/06/11/exception-handling-and-nested-transactions/)，了解如何编写良好的异常安全存储过程的模板。

# iphone - Objective-C 中自定义对象的分组

> ID：10816458
> 
> 赞同：8
> 
> 时间：2012-05-30T12:37:58.203
> 
> 标签：iphone, objective-c, cocoa

我有一个 Person 类的自定义对象数组

```
Person : NSObject{
    NSString *firstName;
    NSString *lastName; 
    NSString *age;
}

NSMutableArray *personsArray = [NSMutableArray array];
Person  *personObj1 =  [[[Person alloc]  init] autorelease];
personObj1.firstName = @"John";
personObj1.lastName = @"Smith";
personObj1.age = @"25";
[personsArray addObject: personObj1];

Person  *personObj2 =  [[[Person alloc]  init] autorelease];
personObj2.firstName = @"John";
personObj2.lastName = @"Paul";
personObj2.age = @"26";
[personsArray addObject: personObj2];

Person  *personObj3 =  [[[Person alloc]  init] autorelease];
personObj3.firstName = @"David";
personObj3.lastName = @"Antony";
personObj3.age = @"30";
[personsArray addObject: personObj3]; 
```

现在personsArray 包含3 个Person 对象。

我们可以按年龄或名字等属性对这些对象进行分组吗？

我的预期结果是

```
NSDictionary {
    "John" = >{
        personObj1, //(Its  because personObj1 firstName is John )
        personObj2 //(Its  because personObj2 firstName is John )
    },
    "David" = >{
        personObj3, //(Its  because personObj3 firstName is David )
    },
} 
```

我知道我可以通过创建一个 NSDictionary 然后遍历 personArray 来获得这个结果，然后首先检查每个

```
NSMutableDictionary *myDict = [NSMutableDictionary dictionary];

  for (Person *person in personsArray){

    if([myDict objectForKey: person.firstName]){
        NSMutableArray *array = [myDict objectForKey: person.firstName];
        [array addObject:person];
        [myDict setObject: array forKey:person.firstName];
    }else{
        NSMutableArray *array = [NSMutableArray arrayWithObject:person];
        [myDict setObject: array forKey:person.firstName];
    }
    }

    NSLog(@"myDict %@", myDict);

//Result myDict will give the desired output. 
```

但是有没有更好的办法呢？

如果我使用 `@distinctUnionOfObjects`，我只能按字符串对象分组（不是这样的自定义对象。我说的对吗？）。

感谢您提前回答。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-05-22T03:24:33.990

结帐此答案与您想要的非常相似

[https://stackoverflow.com/a/15375756/1190861](https://stackoverflow.com/a/15375756/1190861)

您的案例中的代码如下：

```
NSMutableDictionary *result = [NSMutableDictionary new];

NSArray *distinctNames;
distinctNames = [personsArray valueForKeyPath:@"@distinctUnionOfObjects.firstName"];
for (NSString *name in distinctNames) {
    NSPredicate predicate = [NSPredicate predicateWithFormat:@"firstName = %@", name]; 
    NSArray *persons = [personsArray filteredArrayUsingPredicate:predicate];
    [result setObject:persons forKey:name];
}

NSLog(@"%@", result); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-30T12:46:55.337

您可以尝试这是数组的自定义对象排序

```
NSSortDescriptor *sortDescriptor = [[NSSortDescriptor alloc] initWithKey:@"Firstname" ascending:NO selector:@selector(compare:)];

[Array sortUsingDescriptors:[NSArray arrayWithObjects:sortDescriptor, nil]]; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-06T06:17:04.963

我创建了一个名为[Linq-to-ObjectiveC](https://github.com/ColinEberhardt/LinqToObjectiveC)的小型库，它提供了许多更容易查询数组的方法。为了执行您需要的组操作，您只需执行以下操作：

```
NSDictionary* groupedByName = [personsArray groupBy:^id(id person) {
   return [person firstName];
}]; 
```

这将返回一个字典，其中键是不同的名字，每个值都是具有给定名字的“人”对象数组。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-03-14T13:31:00.163

```
- (NSDictionary *)groupObjectsInArray:(NSArray *)array byKey:(id <NSCopying> (^)(id item))keyForItemBlock
{
    NSMutableDictionary *groupedItems = [NSMutableDictionary new];
    for (id item in array)
    {
        id <NSCopying> key = keyForItemBlock(item);
        NSParameterAssert(key);

        NSMutableArray *arrayForKey = groupedItems[key];
        if (arrayForKey == nil)
        {
            arrayForKey = [NSMutableArray new];
            groupedItems[key] = arrayForKey;
        }
        [arrayForKey addObject:item];
    }
    return groupedItems;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-30T13:08:46.387

一个代码来帮助你做到这一点，

```
 -(NSMutableArray *)sortArray:(NSArray *)arrayTosort withKey:(NSString *)key ascending:(BOOL)_ascending
{
    NSSortDescriptor *sortDescriptor;
    sortDescriptor = [[NSSortDescriptor alloc] initWithKey:key
                                                 ascending:_ascending] ;
    NSArray *sortDescriptors = [NSArray arrayWithObject:sortDescriptor];

    return [[arrayTosort sortedArrayUsingDescriptors:sortDescriptors] mutableCopy];
} 
```

这里的关键是`key`or `keypath`。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-30T17:08:17.153

中没有内置的 group by 方法`NSArray`。您的示例实现可以添加为类别。

不幸的是，该`@distinctUnionOfObjects`操作将只返回 firstName 属性的字符串：John, David。它不会`group by`做手术，也不会有这样的手术。

[收款操作](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/KeyValueCoding/Articles/CollectionOperators.html)

# asp.net-mvc-3 - 高级自动完成输入

> ID：10816463
> 
> 赞同：0
> 
> 时间：2012-05-30T12:38:15.540
> 
> 标签：asp.net-mvc-3, jquery-ui

只是在 MVC3 和 JQuery 方面学习我的方式，我需要做一些相当高级的事情，但我认为其他人以前没有做过任何事情。因此，如果您能指出我正确的方向，那就太好了。

我有一个包含作者列表的文本框，我已设法使用数据库中的自动完成列表填充这些作者（Oracle 使用 EF4）。也很好。但我需要在此基础上再接再厉。

![在此处输入图像描述](../Images/294b598523c2fc0b1adcc867a32c7d2b.png)

基本上用户需要：

*   选择 1 个或多个作者（自动完成）
*   选定的作者应该以某种方式持久化（例如列表等）
*   用户需要能够删除已添加的作者。
*   如果用户添加了不在列表中的作者，则需要以某种方式将其指定为新用户（至少我需要在代码中知道），并且应该适当地将其插入作者表中。
*   在后台，我需要保留一个带有作者姓名的 ID 链接（来自数据库），以便我可以正确更新数据库。这可能是对前面观点的回答的一部分，因为新作者没有 ID，所以插入语句。

希望这是有道理的，我不认为这很复杂，只是我不知道在哪里看和一些代码提示:)

**更新**

*因此，经过一番寻找——我想我找到了一个不错的插件，它可以完成我想要的绝大多数工作——它叫做 tokenInput。尚不确定如何格式化 JSON，因为它需要特定格式，也不确定指定新作者。但现在只好试一试......*

[http://loopj.com/jquery-tokeninput/](http://loopj.com/jquery-tokeninput/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T16:06:35.373

为了格式化为 Json，您可以创建一个新的匿名对象集合，然后将其序列化为 json，我这样做是这样的：

```
var anonymousList= from t in db.YourTable 
                                 where ... something ....
                                 select new
                                 {
                                     id=t.id,
                                     name=t.name
                                 };
var serializer = new JavaScriptSerializer();
var serialized = serializer.Serialize(anonymousList);
return View(new ViewModel { Serialized = serialized }); 
```

然后你应该将你的 json 返回到你的视图中，我通常会在我的 ViewModel 中添加一个参数。然后你需要将该字符串分配给一个 javascript 变量：

```
<script>
    var myVariable = @Html.Raw(Model.Serialized);
</script> 
```

# mysql - SQL多连接与应该具有不同值的相同列的表

> ID：10816468
> 
> 赞同：1
> 
> 时间：2012-05-30T12:38:27.423
> 
> 标签：mysql, join

```
SELECT
billing_line.id,
billing_line.active,
billing_line.account_id,
billing_line.billing_measure_id,
billing_line.site_id,
billing_line.rate,
billing_line.range_start,
billing_line.range_end,
billing_measure.`name` AS measure_name,
billing_service.`name` AS service_name,
billing_field_value.id as billing_field_value_id,
billing_field_value.billing_field_id,
billing_field_value.`value`
FROM
    billing_line,
    billing_service,
    billing_measure
INNER JOIN billing_field_value ON (  ( billing_field_value.BILLING_FIELD_ID = 3 AND billing_field_value.VALUE = 'Option 2')
                                   OR( billing_field_value.BILLING_FIELD_ID = 4 AND billing_field_value.VALUE = 'Option 5'))
WHERE
    billing_line.ACTIVE = 1
AND billing_line.ACCOUNT_ID = 1337
AND billing_line.SITE_ID IS NULL
AND billing_service.ID = 7
AND billing_measure.ID = 15
AND billing_line.BILLING_MEASURE_ID = billing_measure.ID
AND billing_measure.BILLING_SERVICE_ID = billing_service.ID
AND billing_field_value.BILLING_LINE_ID = billing_line.ID
ORDER BY
    billing_service.SORT ASC,
    billing_measure.SORT ASC,
    billing_line.RANGE_START ASC,
    billing_line.RATE ASC 
```

这很自然地返回 billing_field_value.value 为“选项 2”或“选项 5”的值。这是一个过滤系统，它应该选择所有“选项 2”（对于字段 id 3），但也应该只选择“选项 5”（对于字段 id 4）

问题是返回的结果既有 'Option 2'->'Other Options' 也有 'Option 2'->'Option 5' - 因此有效地忽略第一个之后的任何“过滤器”。

我意识到“或”是这里问题的一部分，但是因为这些字段和值存储在相同的列中但可以有不同的值，所以使用“与”意味着它永远不会评估为真。

对于简单的东西，这可能是一个漫长而复杂的解释，但我很难过。有什么想法吗？

# javascript - 当我可以将其加载到 iframe 中时，为什么还要担心制作纯 javascript/jquery 小部件？

> ID：10816469
> 
> 赞同：6
> 
> 时间：2012-05-30T12:38:30.793
> 
> 标签：javascript, jquery, ajax, iframe, widget

我的意思是，我曾经有这个小部件：

```
<script src="http://www.mywebsite.com/widget/widget.js?type=normal" type="text/javascript"></script>
<div id="archie-container"></div> 
```

检查 jquery 是否在托管网站上；否则它会加载它并执行一些 ajax/jsonp 请求。正如本[教程](http://alexmarandon.com/articles/web_widget_jquery/)所建议的那样。

好吧，我注意到关于 CSS 父级的大麻烦，集成其他 jquery 插件（如循环）并管理此“接口”和 ajax 调用之间的数据。

当我可以使用单一 iframe 时，为什么我应该这样做？我还注意到，如果我从 widget.js 加载 jquery，并且（当然）我将它放入 iframe（这样我可以管理单独的函数），则库是从缓存中获取的。所以没有任何过载。

这个方法对你来说足够好吗？或者我错过了什么？

我还注意到 90% 的小部件（如 FB、twitter 等）使用这种策略（使用 iframe）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-30T12:46:44.920

iframe 与页面的其余部分保持隔离。

我推荐阅读： [iframe vs ajax](https://stackoverflow.com/questions/768222/iframes-vs-ajax)

如果某些东西与页面的其余部分隔离，那么简单地使用 iframe。如果小部件与页面的其余部分交互，请使用 AJAX。

# asp.net - jquery mobile 和 asp.net updatepanel 问题

> ID：10816473
> 
> 赞同：2
> 
> 时间：2012-05-30T12:38:40.123
> 
> 标签：asp.net, jquery-mobile

我在 asp.net webforms 中使用 jquerymoble。

以下是我的代码。

在部分回发（下拉选择更改）上，我缺少更新面板下所有控件的 css 样式。

我该如何解决这个问题？

```
 <form id="form1" runat="server">
    <asp:ScriptManager ID="ScriptManager1" runat="server">
    </asp:ScriptManager>
    <div data-role="page">
    <div data-role="content">
<a href="#page2" data-role="button" data-inline="true" data-rel="dialog" data-corners="true" data-shadow="true" data-iconshadow="true" data-wrapperels="span" data-theme="c">     Open Dialog </a>
</div>
    </div>
    <div id="page2" data-role="dialog">

        <div data-role="header" data-theme="d" role="banner">
        <h1 class="ui-title" role="heading" aria-level="1">Dialog</h1>
        </div>

        <div data-role="content" data-theme="c" role="main">
            <h1>Delete page?</h1>
            <asp:UpdatePanel ID="UpdatePanel1" runat="server">
            <ContentTemplate>

            <asp:DropDownList ID="ddlTest" runat="server" AutoPostBack="true" 
                onselectedindexchanged="ddlTest_SelectedIndexChanged">
            <asp:ListItem Text="One" Value="1"></asp:ListItem>
            <asp:ListItem Text="Two" Value="2"></asp:ListItem>
            <asp:ListItem Text="Three" Value="3"></asp:ListItem>
            </asp:DropDownList>
                <asp:TextBox ID="TextBox1" runat="server"></asp:TextBox>

            <asp:Label ID="lblText" runat="server" Text="Label"></asp:Label>
            <asp:Label ID="lblValue" runat="server" Text="Label"></asp:Label>
            <br />

            </ContentTemplate>
            </asp:UpdatePanel>

        </div>
    </div>
    </form> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T04:16:40.003

您需要告诉 jquery mobile 刷新控件

```
$("#<%=UpdatePanel1.ClientID%>").trigger("create"); 
```

# c# - InternalsVisibleTo，签名和单元测试，如何使其实用？

> ID：10816475
> 
> 赞同：4
> 
> 时间：2012-05-30T12:38:52.437
> 
> 标签：c#, .net, unit-testing, internalsvisibleto, signed-assembly

在“C# in Depth 2nd Edition”中，Jon Skeet 的书——我刚读到第 2 部分结束——在 7.7.3 中提到它`InternalsVisibleTo`也可以与签名程序集一起使用。目前我根本没有使用签名。已发布二进制文件的安全问题实际上非常关键，因此我计划使用预处理器变量测试完全删除发布程序集的属性。

只是为了兴趣，使用签名的程序集和`InternalsVisibleTo`? 为了`InternalsVisibleTo`用于指定签名的朋友程序集，我需要指定它的公钥。我只有在编译了依赖于被测程序集的朋友程序集之后才拥有它（动态程序集加载和反射抛开，什么会膨胀编码和可读性）。这听起来像是一个鸡蛋问题，需要测试程序集的引导程序。我可以想象一些使用 MSBuild 和脚本来自动执行此操作的技巧。有没有更实用的方法来做到这一点？

如果它仍然如此乏味，我将坚持我的第一个想法，即为发布版本放弃单元测试（这有点令人不满意，因为可能会未经测试微妙的时间问题......）

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-30T15:14:38.127

使用相同的密钥对解决方案中的所有项目进行签名，不要为每个项目和每个构建生成不同的密钥。我建议在项目属性中为每个项目引用相同的物理密钥文件，而不是将其复制到每个项目中。

这样，所有这些都与相同的`PublicKey`常数相关联。并使用单个条目，例如：

```
[assembly: System.Runtime.CompilerServices.InternalsVisibleTo("UnitTests, PublicKey=<your key>")] 
```

# php - 如何在没有支付网关的情况下验证信用卡详细信息

> ID：10816477
> 
> 赞同：2
> 
> 时间：2012-05-30T12:38:55.850
> 
> 标签：php, validation

我正在建立一个小型网站，该网站将从客户那里收集信用卡详细信息并存储它们，但不会从卡中收取费用 - 交易将由客户手动完成。

我想做的是检查数字以确保卡存在，如果可能的话，检查它是否可以收费（即零余额或负余额没有骰子 - 这不是必需的，但可以好的）。

是否有任何值得信赖（最好是免费使用）的卡验证网络服务？

笔记：

*   Google-fu 似乎并没有削减它，我的大多数结果都返回 *验证*库，而不是任何可以验证卡号确实*存在的东西*

*   该站点具有 SSL 并且所有敏感数据在存储之前都经过加密（使用盐）。安全性超出了这个问题的范围，但欢迎任何意见或改进它的建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T13:10:35.587

合法性问题或您是否应该这样做，我相当肯定这样的服务不存在，当然不是免费的。

为了确定卡是否存在或是否可以收费，必须针对该卡完成交易。通常对于“验证”检查，这将采取非常小的“预授权”交易的形式，这需要清算银行、与信用卡提供商的连接以及各种昂贵的东西。

如果您的客户有能力处理信用卡交易，他也许可以让您使用他的商业银行/身份验证网关拥有的任何在线工具进行设置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T13:41:53.030

批量是正确的。执行此操作的首选方式是与同一方进行验证和收费。

但是，也存在其他选择，例如通过第三方公司（包括[AllCharge](http://www.newgenpay.com/)和[CredoRax](http://credorax.com/)），这些公司目前为世界各地的各种卡提供这些服务。如果还有交易，通常验证是免费的。如果只是验证，费用一般高达 20 美分，具体取决于公司。

同样重要的是要注意，关于合法性，即使您没有使用卡完成实际交易，您仍然需要符合 PCI 标准，因为您将*处理*持卡人信息。

# c# - 如何使用 linq 投影并投影到根投影对象的子集合中？

> ID：10816483
> 
> 赞同：-1
> 
> 时间：2012-05-30T12:39:16.017
> 
> 标签：c#, linq

我正在尝试这样做....

```
var entity = landingPages.Select(x = new MyClass { name = x.name, age = x.age }); 
```

唯一的问题是年龄实际上是一种冷却，所以我想我会这样做......

```
var entity = landingPages.Select(x = new MyClass { name = x.name, age.add(x.age) }); 
```

但它不起作用。这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T14:03:43.347

```
var entity = landingPages.Select(x => new MyClass
{  //this is an initialization block.  Only Property Assignment is allowed.
  name = x.name,
  age.add(x.age)  //arbitrary statements are not allowed in initialization blocks.
}); 
```

* * *

您没有说哪个年龄是集合（LandingPage 的年龄或 MyClass 的年龄）。

如果是 LandingPage 的年龄，则：将单个值转换为集合。

```
IEnumerable<MyClass> query = landingPages.Select(x => new MyClass
{
  name = x.name,
  age = new List<int>() { x.age } //this is a collection initializer
}); 
```

如果是 MyClass 的年龄，则：将集合转换为单个值。

```
IEnumerable<MyClass> query = landingPages.Select(x => new MyClass
{
  name = x.name,
  age = x.age.Sum()
}); 
```

# html - CSS3在HTML元素上不显示背景图像+渐变

> ID：10816487
> 
> 赞同：3
> 
> 时间：2012-05-30T12:39:22.147
> 
> 标签：html, css

一般来说，我知道可以使用 CSS3 来指定多个背景，并且我之前已经成功地在图像顶部叠加了渐变。但是，当应用于基本`html`元素时，这似乎失败了。在 Chrome 和 Firefox 中，渐变不会在下面的 CSS 中呈现：

```
html {
    background:#14283C;
    background-image:url('/images/bluenoise.png?1338342472'),-webkit-gradient(radial, center 8em, 0, center 8em, 100, color-stop(0%, rgba(255,255,255,0.2)), color-stop(100%, rgba(255,255,255,0)));
    background-image:url('/images/bluenoise.png?1338342472'),-webkit-radial-gradient(center 8em, ellipse closest-corner, rgba(255,255,255,0.2),rgba(255,255,255,0));
    background-image:url('/images/bluenoise.png?1338342472'),-moz-radial-gradient(center 8em, ellipse closest-corner, rgba(255,255,255,0.2),rgba(255,255,255,0));
    background-image:url('/images/bluenoise.png?1338342472'),-o-radial-gradient(center 8em, ellipse closest-corner, rgba(255,255,255,0.2),rgba(255,255,255,0));
    background-image:url('/images/bluenoise.png?1338342472'),-ms-radial-gradient(center 8em, ellipse closest-corner, rgba(255,255,255,0.2),rgba(255,255,255,0));
    background-image:url('/images/bluenoise.png?1338342472'),radial-gradient(center 8em, ellipse closest-corner, rgba(255,255,255,0.2),rgba(255,255,255,0));
} 
```

如果我将相同的样式应用于`body`，则渐变会正确呈现。关于为什么会有这种差异的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T16:14:00.887

我尝试了评论中提到的一些技巧，但最终奏效的是：

```
html{
    background:#14283C;
    background-image:-webkit-gradient(radial, center 8em, 0, center 8em, 100, color-stop(0%, rgba(255,255,255,0.2)), color-stop(100%, rgba(255,255,255,0))),url('/images/bluenoise.png?1338386219');
    background-image:-webkit-radial-gradient(center 8em, ellipse closest-corner, rgba(255,255,255,0.2),rgba(255,255,255,0)),url('/images/bluenoise.png?1338386219');
    background-image:-moz-radial-gradient(center 8em, ellipse closest-corner, rgba(255,255,255,0.2),rgba(255,255,255,0)),url('/images/bluenoise.png?1338386219');
    background-image:-o-radial-gradient(center 8em, ellipse closest-corner, rgba(255,255,255,0.2),rgba(255,255,255,0)),url('/images/bluenoise.png?1338386219');
    background-image:-ms-radial-gradient(center 8em, ellipse closest-corner, rgba(255,255,255,0.2),rgba(255,255,255,0)),url('/images/bluenoise.png?1338386219');
    background-image:radial-gradient(center 8em, ellipse closest-corner, rgba(255,255,255,0.2),rgba(255,255,255,0)),url('/images/bluenoise.png?1338386219');
} 
```

唯一的变化是我在图像**之前列出了渐变。**看起来各种`background-image`参数以相反的顺序重叠。不过，这种解释似乎与 ScottS 的小提琴相矛盾，尽管给出了相反的顺序，但它也显示了所需的行为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T13:34:40.607

Christoph 发布的[小提琴链接](http://jsfiddle.net/D9B4q/)在 Chrome 中也适用于我。为了让覆盖在 Firefox 中发挥作用，我必须在元素中添加一个`height`或。看到[这个小提琴](http://jsfiddle.net/D9B4q/12/)。`min-height: 100%``html`

然而，简单地拥有*内容*也提供了高度，并且还允许背景为 Firefox 工作，正如[这个小提琴](http://jsfiddle.net/D9B4q/13/)所示。

显然，渐变需要某种元素的实际高度才能在 Firefox 中呈现。

# c# - 如何将选择查询的值存储在 Web 服务的变量中？

> ID：10816488
> 
> 赞同：3
> 
> 时间：2012-05-30T12:39:37.047
> 
> 标签：c#, asp.net, mysql, web-services

我是 web 服务开发的新手。我已经使用 c# 和 mysql 在 asp.net 中创建了 webservice。

我想将选择查询的值存储在变量中，然后我想将其插入表中。

我使用了以下代码：

```
//for inserting new game details in the tbl_Game by FB
    [WebMethod]
    public string InsertNewGameDetailsForFB(string gametype, string player1, string player2, string player3, string player4, string player5)
    {
        string success = "Error in Insertion";

        string selectID = "Select UserID from tbl_userinfo where Facebook_ID IN ('" + player1 + "','" + player2 + "','" + player3 + "')";
        con = new MySqlConnection(conString);
        con.Open();
        MySqlCommand cmd = new MySqlCommand(selectID, con);
        MySqlDataReader ids = cmd.ExecuteReader();
        string id1="", id2="", id3="";
        while (ids.Read())
        {
           id1 = ids.GetString(0);
           id2 = ids.GetString(1);
           id3 = ids.GetString(2);

        }

        string insertNewGame = "Insert into tbl_game(Type,Player1,Player2,Player3,Player4,Player5) values";
        insertNewGame += "( '" + gametype + "' , '" + id1 + "', '" + id2 + "','" + id3 + "', '" + player3 + "','" + player4 + "', '" + player5 + "' )";
        con = new MySqlConnection(conString);
        con.Open();
        MySqlCommand cmd1 = new MySqlCommand(insertNewGame, con);
        int success1 = cmd1.ExecuteNonQuery();
        con.Close();

        string gameID = "Select MAX(GameID) from tbl_game";
        con = new MySqlConnection(conString);
        con.Open();
        MySqlCommand cmd2 = new MySqlCommand(gameID, con);
        string gameid = cmd2.ExecuteScalar().ToString();

        if (success1 > 0)
        {
           success="Inserted Successfully, GameID is - " + gameid;
        }
        return success;
    } 
```

我怎样才能做到这一点 ？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T13:16:38.797

您的第一个问题是您如何尝试从第一个查询中读取 UserID。此查询不会返回三列，而是三行。所以你需要做这样的事情：

```
int index = 0;
while (ids.Read())
{
    switch (index)
    {
        case 0:
            id1 = ids.GetString(0);
            break;
        case 1:
            id2 = ids.GetString(0);
            break;
        case 2:
            id3 = ids.GetString(0);
            break;
    }
    index += 1;
} 
```

那应该正确存储它们。我的第二个建议是，由于这是一个 Web 服务，你应该避免 SQL 注入攻击并使用参数化查询而不是动态 SQL。您可以使用网络上的大量示例。

我最后的建议是对实现 IDisposable 的对象（即连接对象、命令、阅读器等）虔诚地使用**using语句。**这可确保正确清理对象。

# objective-c - NSDateFormatter 本地化StringFromDate:dateStyle:timeStyle: 类方法的开销

> ID：10816495
> 
> 赞同：0
> 
> 时间：2012-05-30T12:39:52.980
> 
> 标签：objective-c, ios, nsdateformatter

`NSDateFormatter`包括以下便捷方法：

`+ (NSString *)localizedStringFromDate:(NSDate *)date dateStyle:(NSDateFormatterStyle)dateStyle timeStyle:(NSDateFormatterStyle)timeStyle`

该[文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSDateFormatter_Class/Reference/Reference.html)指出，使用此方法与显式执行此操作相同：

```
NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
[formatter setFormatterBehavior:NSDateFormatterBehavior10_4];
[formatter setDateStyle:dateStyle];
[formatter setTimeStyle:timeStyle];
NSString *result = [formatter stringForObjectValue:date]; 
```

现在，我在不同的地方读到初始化一个`NSDateFormatter`对象有相当大的开销。有谁知道`localizedStringFromDate:etc`类方法是否具有相同的开销，即`NSDateFormatter`每次调用它都会导致在幕后实例化一个新对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T13:14:26.890

我使用我`NSDateFormatter`的 s 作为我懒惰初始化的静态变量。像这样初始化例程只被调用一次：

```
static NSDateFormatter *formatter = nil;
if (!formatter) {
   formatter = [[NSDateFormatter alloc] init];
   [formatter setDateStyle:dateStyle];
   [formatter setTimeStyle:timeStyle];
}
NSString *result = [formatter stringFromDate:date]; 
// reuse
[formatter setDateStyle:anotherDateStyle];
[formatter setTimeStyle:anotherTimeStyle];
NSString *anotherResult = [formatter stringFromDate:anotherDate]; 
```

# perl - B::Lint 和 Perl::Critic 用于静态代码分析

> ID：10816497
> 
> 赞同：3
> 
> 时间：2012-05-30T12:40:00.313
> 
> 标签：perl, lint, static-code-analysis, perl-critic

我需要为 Perl 中的静态代码分析实现 lint 和 Perl::Critic。我在 Perl 中找到了用于 lint 的 B::Lint 模块。

1.  是否真的需要使用这两个模块进行静态代码分析？
2.  如果是，那么这两个模块如何协同工作？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-30T13:12:30.633

[B::Lint](http://perldoc.perl.org/B/Lint.html)和[Perl::Critic](http://search.cpan.org/perldoc?Perl%3a%3aCritic)是独立的模块。

不需要同时使用这两个模块，但同时使用这两个模块很有用。

我为自己创建了一个包装脚本，以便按顺序运行这两个脚本。例如，要分析单个 Perl 源代码文件 ( `file.pl`)：

```
perlcritic --brutal --verbose 9 file.pl
perl -MO=Lint file.pl 
```

# android - 从浏览器历史记录中检索 android 中浏览网页的日期

> ID：10816501
> 
> 赞同：1
> 
> 时间：2012-05-30T12:40:04.727
> 
> 标签：android

如何从android中的浏览器历史记录中获取访问网页的日期。我可以获取 url 和标题索引，但无法从中获取浏览网页的日期，因为 Browser.SEARCHES_PROJECTION_DATE_INDEX 没有提供当前日期的正确信息。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T11:06:27.597

使用 Browser.HISTORY_PROJECTION_DATE_INDEX。它返回长值。尝试以下代码获取日期

```
 CursorLoader cursorLoader = new CursorLoader(this,
            android.provider.Browser.BOOKMARKS_URI,
            Browser.HISTORY_PROJECTION, null, null, null);
    Cursor cursor = cursorLoader.loadInBackground();
    Calendar cal = Calendar.getInstance();
    long dateTime;
    cursor.moveToFirst();
    if (cursor.moveToFirst() && cursor.getCount() > 0) {
        while (cursor.isAfterLast() == false) {
    dateTime =Long.parseLong(cursor.getString(Browser.HISTORY_PROJECTION_DATE_INDEX));
                cal.setTimeInMillis(dateTime);
    Log.i("Date",cal.getTime().toString());
   }
   } 
```

希望能帮助到你

# arrays - 带有 if else 条件的 awk for 循环数组

> ID：10816504
> 
> 赞同：3
> 
> 时间：2012-05-30T12:40:08.247
> 
> 标签：arrays, for-loop, awk, if-statement

我寻求您的帮助，以使用 if else 条件将 awk 返回值存储在我的 awk for 循环的数组中。

```
If  $3 == $7
then print $9 multiplied by $4
else print $4 multiplied by (2 minus $9) 
```

到目前为止，我通过以下方式完成了这项工作：

```
awk '{if ($3 == $7) print $9*$4; else print $4*(2-$9);}' file >outfile 
```

上面的代码适用于第一个数据列 ( `$9`)。但是，我想遍历从 9 到 1547 的所有列并返回一个包含返回值的数组。这应该很简单，但我似乎无法理解这里的一些基本概念。

到目前为止，我了解需要在实际函数之前声明循环数，方法是：

> awk ' {for(i=9;i<=NF;i++)} END {if ($3 == $7) print $i*$4; 否则打印 $4*(2-$i);}'

但是，如何以及何时声明数组超出了我的范围（生物学家）。任何帮助将不胜感激。

例子：

输入（大文件..此处第 1-10 列）：

> rs2070501 22 A 0.0206 0.337855 rs2070501 GA 0.977 0.066

输出：

> 0.0210738

这里 else 语句开始了 ($3 * (2-$9)

如何让 awk 打印出第 9-N 个数组，而不仅仅是第 9 列

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-30T13:12:56.750

试试这个。

```
awk '{
    for(i=9; i<=NF; ++i)
        printf "%s%f",
            (i==9 ? "" : " "),
            ($3 == $7 ? $i*$4 : $4*(2-$i));
    printf "\n"
}' filename 
```

The`( test ? when : else )`只是一个简写；`?`如果测试为真，则评估之后的东西，`:`否则评估之后的东西。所以它为第一个字段打印一个空分隔符，否则打印一个空格；并根据是否`$3 == $7`为真选择如何计算字段的值。

# neo4j - 为 Neo4j 配置 TypeRepresentationStrategy

> ID：10816507
> 
> 赞同：2
> 
> 时间：2012-05-30T12:40:13.867
> 
> 标签：neo4j, graph-layout, spring-data-neo4j

我们目前正在使用 neo4j 开发一个 Java 项目。

我们使用[Spring Data Neo4j并从](http://www.springsource.org/spring-data/neo4j)[Good Relationships](http://static.springsource.org/spring-data/data-graph/snapshot-site/reference/pdf/spring-data-neo4j-reference.pdf)书中获取大部分信息。

该文档指出，图中的标准实体类型表示是[IndexingNodeTypeRepresentationStrategy](http://static.springsource.org/spring-data/data-neo4j/docs/2.0.0.RC1/api/org/springframework/data/neo4j/support/typerepresentation/IndexingNodeTypeRepresentationStrategy.html)。

对于我们的项目，我们更喜欢带有*子引用节点*的那个。

在使用存储库时，我们如何配置 neo4j 以使用此策略。我们从 HelloWorld 示例开始，因此我们目前有一个存储库接口，如下所示：

```
public interface IWebsiteGraphRepository extends GraphRepository<Website> {} 
```

此外，我们还有我们的节点实体（我省略了大部分不相关的代码）：

```
@NodeEntity
public class Website {
    ...
} 
```

谁能提供一个如何设置[TypeRepresentationStrategy](http://static.springsource.org/spring-data/data-graph/docs/current/api/org/springframework/data/neo4j/core/TypeRepresentationStrategy.html#postEntityCreation%28S,%20java.lang.Class%29)的小例子？

这可以在 Spring 配置中完成吗？

配置将是：

```
<context:annotation-config />
<tx:annotation-driven mode="aspectj" transaction-manager="neo4jTransactionManager" />
<context:component-scan base-package="my.base">
    <context:exclude-filter type="annotation" 
                  expression="org.springframework.stereotype.Controller" />
    </context:component-scan>
<neo4j:config storeDirectory="target/neo4j-db" />
<neo4j:repositories base-package="my.base.packages.repositories" /> 
```

**编辑：**

在另一个会话之后，我终于能够让它工作了！我开始基于 Michael Hungers 的回答，但无法创建 Bean。我发现他的例子可能来自：[gitHub](https://github.com/SpringSource/spring-data-neo4j/blob/3d9c549f8ad20bb0a11a72c68f42bb199d677a6a/spring-data-neo4j-aspects/src/test/resources/org/springframework/data/neo4j/aspects/support/SubReferenceTypeRepresentationStrategyOverride-context.xml)。但是，这仍然对我不起作用。我开始深入研究 TypeRepresentationStrategyFactory 类的源代码。我发现， Strategy 是一个私有枚举。这是我试图提供的第二个构造函数 arg。在我的项目中，它从未将其检测为 Strategy 类型。

首先我有点怀疑，因为战略是私人的。我的意思是，我什至无法在代码中实例化 TypeRepresentationStrategyFactory，因为它找不到类型 Strategy。我很快发现，据说 Spring 可以做这样的事情：[Beans with private constructor](https://stackoverflow.com/questions/7254496/java-spring-bean-with-private-constructor)。

最后我不得不调整 Michaels 解决方案，因为它没有识别构造函数参数。不管我做了什么。也许这是我的设置，我真的不知道。但最后我想出了[从私有枚举创建一个 bean](http://robertmaldon.blogspot.ch/2007/05/creating-spring-bean-from-java-5-enum.html)并将其作为对构造函数的引用的解决方案：

```
<bean id="subref" factory-method="valueOf"
class="org.springframework.data.neo4j.support.typerepresentation.TypeRepresentationStrategyFactory.Strategy">
    <constructor-arg>
        <value>SubRef</value>
    </constructor-arg>
</bean>

<bean id="typeRepresentationStrategyFactory"
    class="org.springframework.data.neo4j.support.typerepresentation.TypeRepresentationStrategyFactory">
    <constructor-arg index="0" ref="delegatingGraphDatabase" />
    <constructor-arg index="1" ref="subref" />
</bean> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T17:45:18.600

这应该这样做：

```
<bean id="typeRepresentationStrategyFactory" class="org.springframework.data.neo4j.support.typerepresentation.TypeRepresentationStrategyFactory">
    <constructor-arg index="0" ref="graphDatabaseService"/>
    <constructor-arg index="1" value="SubRef"/>
</bean> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-20T13:08:19.393

你可以这样做 ：

```
<bean id="typeRepresentationStrategyFactory" class="org.springframework.data.neo4j.support.typerepresentation.TypeRepresentationStrategyFactory">
    <constructor-arg index="0" ref="graphDatabaseService"/>
    <constructor-arg index="1">
        <value type="org.springframework.data.neo4j.support.typerepresentation.TypeRepresentationStrategyFactory.Strategy">SubRef</value>
    </constructor-arg>
</bean> 
```

# database - 带有类型的 Rails 模型如何建模？

> ID：10816508
> 
> 赞同：0
> 
> 时间：2012-05-30T12:40:14.550
> 
> 标签：database, ruby-on-rails-3, activerecord

我有两个模型

业务和代表

当企业或代表注册时，他们会看到“您是如何得知我们的？”的选项列表。

发现方式是动态的，因此管理员可以添加企业或代表可以发现我们的方式。例如，管理员可以添加“通过 Google”、“通过朋友”、“通过其他代表”等选项。每种发现类型可以针对企业或代表，或两者兼而有之。

我应该如何建模discovery_type模型，它应该有什么关系，我在想一些事情如下

```
Schema : 
table: discovery_types
name: string
type: string(can be one of 'business','representative', 'both')

class DiscoveryType< ActiveRecord::Base
  has_many :businesses
  has_many :representatives
end

class Business< ActiveRecord::Base
  belongs_to :discovery_type
end

class Representative< ActiveRecord::Base
  belongs_to :discovery_type
end 
```

我只是对上述方案没有信心。所以任何人都可以指出任何问题，并可能提出更好的出路..

我还应该在任何列上添加索引吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T12:46:17.973

编辑：不是多态关联，你是对的 - 这是相反的关系。

这应该适用于您想要的关系 -

```
class DiscoveryType< ActiveRecord::Base
  has_many :discoveries
end

class Discovery < ActiveRecord::Base
  belongs_to :discovery_type
end

class Business < Discovery
end

class Representative < Discovery
end 
```

如果您将`type`列留在`discovery_types`Rails 中应自动使用它

# git - git 创建仅包含我的更改的补丁

> ID：10816511
> 
> 赞同：1
> 
> 时间：2012-05-30T12:40:23.883
> 
> 标签：git

我想做一些与这个问题基本相似的事情：

[将未跟踪的目录合并到已跟踪的目录中](https://stackoverflow.com/questions/5009085/merge-an-untracked-directory-into-the-tracked-directory)

但是，那里的答案对我的情况并不是特别有帮助。

基本上，一位同事将他的代码版本作为 zip 文件发送给我。他的版本应该比我的版本好很多，但我不能只使用他的版本，因为我的版本中有几个我不相信他的版本的错误修复。我想做的是创建一个只包含我对代码的贡献的补丁，并尝试用我的更改来修补他的（未跟踪的）版本。

这与在我开始在新分支中处理代码之前检查修订是否相同，将他的文件复制到该 repo 并将其作为新分支提交，然后将该分支与我的合并？如果是这样，我将如何找到我在相关目录中所做的第一个提交？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T14:16:43.433

您可以使用`git log`显示影响特定路径的所有提交：

```
git log -- path/to/interesting/dir 
```

由于您只对自己的提交感兴趣，因此您还需要以下`--author`选项：

```
git log --author=mgilson -- path/to/interesting/dir 
```

目录中的第一个提交是列表中的最后一个，您可以通过`--oneline`选项 和的组合找到它`tail`：

```
git log --author=mgilson --oneline -- path/to/interesting/dir | tail -n1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T14:10:36.847

> 这与在我开始在新分支中处理代码之前检查修订是否相同，将他的文件复制到该 repo 并将其作为新分支提交，然后将该分支与我的合并？

是的，它应该是相同的，另外还有一个好处是可以将所有内容保持在同一个引用中。

> 我将如何找到我在相关目录中所做的第一个提交？

A**[`git bisect`](http://git-scm.com/book/en/Git-Tools-Debugging-with-Git)**将很有用，以便找到第一个“错误”提交（即您的目录所在的提交）。

# c# - 正则表达式获取特定属性的值？

> ID：10816520
> 
> 赞同：2
> 
> 时间：2012-05-30T12:40:44.820
> 
> 标签：c#, regex

我在代码隐藏中有一部分 XAML 字符串，如下所示

```
string str = "<Button Name = \"btn1\" Foo = \"Bar"\ /><TextBox Name=\"txtbox1\">" 
```

什么应该是正则表达式来查找仅 Name 属性的值。

我想

```
btn1
txtbox1 
```

如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T12:48:15.327

你肯定不想这样做吗？

```
string str = "<Button Name = \"btn1\" /><TextBox Name=\"txtbox1\"/>";
var attrs = XElement.Parse("<r>"+str+"</r>").Elements().Attributes("Name").Select(a => a.Value);

foreach (var attr in attrs) Console.WriteLine(attr); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T13:12:52.177

除了 LINQ，您还可以使用 XPath 来获取值。这将为您提供第一个按钮的名称：

```
string str = "<Button Name = \"btn1\" /><TextBox Name=\"txtbox1\"/>";
XmlDocument doc = new XmlDocument();
doc.LoadXml("<root>" + str + "</root>");
string name = doc.SelectSingleNode("root/Button/@Name").InnerText; 
```

或者，如果您只想获取任何项目的名字属性：

```
string name = doc.SelectSingleNode("root/*/@Name").InnerText; 
```

或者获取所有项目的所有名称属性的列表：

```
foreach (XmlNode node in doc.SelectNodes("root/*/@Name"))
{
    string name = node.InnerText';
} 
```

等等

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T12:46:08.767

如果你可以使用环视，试试这个：

```
(?<=\bName\b\s*=\s*")[^"]+ 
```

# asp.net - 无法将包含对象列表的会话变量转换为列表

> ID：10816523
> 
> 赞同：0
> 
> 时间：2012-05-30T12:40:53.253
> 
> 标签：asp.net, session, c#-4.0, session-variables

为什么以下代码会产生错误**“对象引用未设置为对象的实例，**即使我在两个按钮单击事件中都使用设置会话方法？

```
public partial class MergePopUp : System.Web.UI.Page
{

List<MergeAccounts> Mlist = new List<MergeAccounts>();

protected void Page_Load(object sender, EventArgs e)
{

}
private void SetSession()
{
    if (Session["Account"] == null)
    {
        Session["Account"] = Mlist;
    }
}

protected void AddToMergeList_Click(object sender, EventArgs e)
{
    MergeAccounts obj = new MergeAccounts();
    obj.AccountNumber = Convert.ToInt32(AccountNumber.Text);
    obj.PinNumber = Convert.ToInt32(PinNumber.Text);
    int temp = obj.IsAccNoValid(obj.AccountNumber, obj.PinNumber);
    if (temp == 0)
    {
        FoundOrNot.Visible = true;
        FoundOrNot.Text = "Enter a valid Pin Number against this Account number";
    }
    else
    {
        DataSet MyDataSet = obj.ShowDetails(obj.AccountNumber, obj.PinNumber);
        foreach (DataRow myRow in MyDataSet.Tables[0].Rows)
        {
            AccountTitle.Text = myRow["Title"].ToString();
            Balance.Text = myRow["Balance"].ToString();
            CreationDate.Text = myRow["CreationDate"].ToString();
        }
        obj.AccountTitle = AccountTitle.Text;
        obj.Balance = Convert.ToDouble(Balance.Text);
        obj.CreationDate = Convert.ToDateTime(CreationDate.Text);
        Mlist.Add(obj);
        Session["Account"] = Mlist;
        SetSession();
    }
}
protected void AddNext_Click(object sender, EventArgs e)
{
    foreach (TextBox i in this.Page.Form.Controls.OfType<TextBox>().ToList())
    {
        i.Text = null;
    }
    FoundOrNot.Visible = false;
}
protected void CheckList_Click(object sender, EventArgs e)
{
    SetSession();
    Response.Redirect("Merge.spx");
}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T12:47:45.930

Session["Account"] 可能为空。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T12:53:36.070

在这里设置一个断点

```
Mlit = (List<MergeAccounts>)Session["Account"]; 
```

然后按 F5 单步执行您的应用程序并将鼠标放在 Session["Account"] 上以检查该值 - 它可能为 null

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T18:50:22.423

这两个按钮是在同一页面上吗？如果是这样，请创建一个对设置会话变量的两个按钮都可访问的方法。确保检查它是否已经设置，以便只设置一次。

```
private void SetSession()
{
   if(Session["Account"] == null)
      Session["Account"] = "Value";
   else
      //what do you want to do here
}

protected void button1_click(.....)
{
    SetSession();
    //do something
}

protected void button2_click(....)
{
    SetSession();
    //redirect
} 
```

这样，您的会话始终设置为单击第一个按钮还是第二个按钮

# php - PHP，数据库获取和发布

> ID：10816531
> 
> 赞同：0
> 
> 时间：2012-05-30T12:41:22.850
> 
> 标签：php, json

我正在构建网站的职业部分，并编写了这个 PHP 来与我尚未构建的应用程序交谈。问题是当 json_encode 它只显示我的数据库的第一行。任何指向正确方向的指针都将不胜感激。谢谢，乔丹

```
<?php

error_reporting(E_ALL);

ini_set('display_errors', '1');

//variables
$server = 'localhost';
$user = 'root';
$password = '';
$db = 'starkdb';

// Connect to Database   
$connection = mysql_connect($server, $user, $password)
    or die ("Could not connect to server ... \n" . mysql_error ());

mysql_select_db($db)
    or die ("Could not connect to database ... \n" . mysql_error ());

//Check if the skill has been updated. If it has, process and save it to the database
//POST update
if (isset($_POST['update']))
{
    //Confirm that the 'id' value is a valid integer before getting the data
    if (is_numeric($_POST['id']))

    {
        //Retrieve the data
        $id = $_POST['id'];
        $title = mysql_real_escape_string(htmlspecialchars($_POST['title']));
       $description =                                                                                                              mysql_real_escape_string(htmlspecialchars($_POST['description']));

        //Error check both fields
        if ($title == '' || $description == '')
        {
            $error = 'ERROR: Please fill in all Fields!';
        }
        else
        {
            //Update data to database
            mysql_query("UPDATE skill SET title='$title', description='$description' WHERE id='$id'")
            or die (mysql_error());
            $row = mysql_fetch_array($result);
        }
    }
    //POST create
    else
    {

        //Get data, making sure it is valid
        $title = mysql_real_escape_string(htmlspecialchars($_POST['title']));
        $description = mysql_real_escape_string(htmlspecialchars($_POST['description']));

        //Error check both fields
        if ($title == '' | $description == '')
        {
            $error = 'ERROR: Please fill in all Fields!';
        }
        else
        {
            //Save new skill to database
            mysql_query("INSERT skill SET title='$title', description='$description'")
            or die(mysql_error());
            $row = mysql_fetch_array($result);
        }
    }
  }
  //GET ID
  else
  {
    //Get the id value from URL 
    if (isset($_GET['id']) && is_numeric($_GET['id']) && $_GET['id'] > 0)
    {
        //Query DB
        $id = $_GET['id'];
        $result = mysql_query("SELECT * FROM skill WHERE id=$id") or     die(mysql_error());
        $row = mysql_fetch_array($result);

        if($row)
        {
            $title = $row['title'];
            $description = $row['description'];
        }

    }
    //GET list
    else
    {
        $result = mysql_query("SELECT * FROM skill") or die(mysql_error());
        $row = mysql_fetch_array($result);
    }
}

//Encode data and display with JSON
echo json_encode($row);
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T12:43:11.257

`mysql_fetch_array`一次只能从数据库中提取一行，您必须像这样在循环中对其进行迭代：

```
<?php
$rows = array( ); // Initialise an empty array
while( $row = mysql_fetch_array( $result ) ) { // Loop over the database iterator
    $rows[] = $row; // Append the row to the array of rows
}

echo json_encode( $rows ); // Output the json encoded array of rows
?> 
```

有关更多信息，请参阅 PHP 手册页： http: [//php.net/manual/en/function.mysql-fetch-array.php](http://php.net/manual/en/function.mysql-fetch-array.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T12:45:48.233

```
$array_of_rows = array();

while ($row = mysql_fetch_array($result)) {
  array_push($array_of_rows, $row);
}

echo json_encode($array_of_rows); 
```

……或类似的。

# unix - 在Mac上以各种结尾重命名目录中的文件？

> ID：10816532
> 
> 赞同：-1
> 
> 时间：2012-05-30T12:41:23.963
> 
> 标签：unix, batch-file

尝试将目录中的一组文件重命名为具有各种文件类型的文件，所有文件都使用一个常用词，比如 'foo'，在 MacBook Pro 上使用另一个词，比如 'bar'。

例如：

```
foo.txt

form_foo.plist

home_foo.png

images_foo.zip 
```

->

```
bar.txt

form_bar.plist

home_bar.png

images_bar.zip 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T12:44:08.157

我无法使用 Mac，但在 Ubuntu 下，您可以使用该`rename`命令。如果该命令可用，这是[手册页](http://unixhelp.ed.ac.uk/CGI/man-cgi?rename)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T12:49:01.277

小心使用：

```
ls | grep foo | while read -r name; do echo mv "$name" "${name//foo/bar}"; done 
```

这将报告当您省略“echo”时它将运行的命令。检查结果，然后省略“echo”重新运行。这不会尝试处理名称中带有换行符的文件，也不会递归到子目录中。如果要处理名称以 开头的文件`.`，请添加`-a`到`ls`. 为了安全起见，您可能需要添加`-i`到`mv`. 当然要先备份。

# mono - Mono for android，更改不反映

> ID：10816534
> 
> 赞同：0
> 
> 时间：2012-05-30T12:41:35.460
> 
> 标签：mono, xamarin.android

我是 android 单声道的新用户。我创建了一个新的单声道 android 应用程序并成功部署它。现在我在项目中做了一些更改，但不幸的是，当我运行应用程序时，这些更改不会反映在屏幕上。等待你的回复。

问候

穆罕默德·卡齐姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T12:43:51.740

您应该再次构建和部署应用程序以查看反映的更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T06:22:54.827

我的问题已经解决了。实际上我犯了一个错误，我没有点击“运行设备”窗口上的“确定”按钮。实际上，这不是我 100% 的错误。在我看来，尽管隐藏在其他屏幕后面，但这个屏幕应该出现在屏幕前面。谢谢你的支持。

# fusioncharts - FusionCharts Pie3D 切片边框

> ID：10816538
> 
> 赞同：1
> 
> 时间：2012-05-30T12:41:53.630
> 
> 标签：fusioncharts

我需要为 FusionCharts *Pie3D*图表中的切片添加边框。

FusionCharts [API 文档](http://docs.fusioncharts.com/charts/contents/ChartSS/Pie3D.html#Anchor20)声明**borderColor**属性应该添加到xml 数据中的**set**元素中，但是它似乎没有效果。

这是我提供图表的示例 XML：

```
<chart
    decimals="1
    enableSmartLabels="1"
    enableRotation="1"
    startingAngle="70"
    animation="1"
    defaultAnimation="1"
   >
   <set label="Light 1" value="47" isSliced="1" color="ff9999" borderColor="dd3300" />
   <set label="Dark 1" value="53" isSliced="1" color="dd3300" borderColor="dd3300" />

   <set label="Light 2" value="68" isSliced="1" color="ffee99" borderColor="ffcc22" />
   <set label="Dark 2" value="30" isSliced="1" color="ffcc22" borderColor="ffcc22" />

   <set label="Light 3" value="69" isSliced="1" color="99ffdd" borderColor="33cc66" />
   <set label="Dark 3" value="31" isSliced="1" color="33cc66" borderColor="33cc66" />

   <set label="Light 4" value="86" isSliced="1" color="cceeff" borderColor="00aaee" />
   <set label="Dark 4" value="4" isSliced="1" color="00aaee" borderColor="00aaee" />
</chart> 
```

如您所见，这些值成对出现（尽管图表是单系列 - 没有多系列 pie3d），因此为了使这些对在视觉上可区分，我在相关的切片对上设置相同的边框颜色。 ..一切看起来都很好，除了切片边框根本没有出现......

FC版本为*FusionCharts XT v3.2.2*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T13:07:51.173

提供`plotborderthickness='1'`图表属性，因为默认情况下，对于 3D 图表，绘图边框的厚度为零。这是因为在正常情况下，3D 饼图在应用边框时看起来并不那么好。

**更新后的 XML 看起来像**

```
<chart
    decimals="1"
    plotBorderThickness="1" 
    enableSmartLabels="1"
    enableRotation="1"
    startingAngle="70"
    animation="1"
    defaultAnimation="1">

   <set label="Light 1" value="47" isSliced="1" color="ff9999" borderColor="dd3300" />
   <set label="Dark 1" value="53" isSliced="1" color="dd3300" borderColor="dd3300" />

   <set label="Light 2" value="68" isSliced="1" color="ffee99" borderColor="ffcc22" />
   <set label="Dark 2" value="30" isSliced="1" color="ffcc22" borderColor="ffcc22" />

   <set label="Light 3" value="69" isSliced="1" color="99ffdd" borderColor="33cc66" />
   <set label="Dark 3" value="31" isSliced="1" color="33cc66" borderColor="33cc66" />

   <set label="Light 4" value="86" isSliced="1" color="cceeff" borderColor="00aaee" />
   <set label="Dark 4" value="4" isSliced="1" color="00aaee" borderColor="00aaee" />
</chart> 
```

希望这可以帮助。:)

# java - 使用套接字的聊天应用程序无法在 Java 中通过 Internet 工作

> ID：10816541
> 
> 赞同：2
> 
> 时间：2012-05-30T12:42:00.310
> 
> 标签：java, sockets

我目前正在开发通过 Internet 工作的聊天应用程序。目前我的应用程序在 LAN 上工作正常，但不能通过 Internet 工作。我还使用了端口转发。我已经在调制解调器中完成设置并将端口转发到私有 IP 地址，但它仍然无法正常工作。我收到“找不到服务器”的错误。请建议我该怎么做并告诉我，我是否在调制解调器中进行了正确的设置？

下面是我的服务器代码...

```
Server.java

import java.util.*;
import java.net.*;
import java.io.*;

class Server implements ChatConstants
{
  private static Vector list;
  private ServerSocket ssocket ;
  private Service service;
  private static Socket socket;
  private boolean done=false;
  private static Hashtable userTable = new Hashtable();
  private static Hashtable _userList = new Hashtable();
  private static Hashtable _conflist = new Hashtable();

public Server() throws UnknownHostException
{
    System.out.println("Initializing...");
    list=new Vector(BACKLOG);
    try {
        ssocket= new ServerSocket(SERVER_PORT,BACKLOG);
    }
    catch(Exception e) {
                    e.printStackTrace();
                    System.out.println("Inside constructor"+e);
    }
    start();
}

public void start() throws UnknownHostException
{

    byte[] data;
    int header;
    Socket _socket = null;
    String hostname = null;
    System.out.println("Server successfully started at "
            +InetAddress.getLocalHost().toString()
            +" port "+SERVER_PORT);

     while(!done) {
                try 
                   {
                   _socket=ssocket.accept();

                    if(_socket != null) {
                     synchronized(list) {
                     list.addElement(_socket);
                }

                DataInputStream dis=new DataInputStream(_socket.getInputStream());
                data = new byte[MAX_MESSAGE_SIZE];
                dis.read(data);
                Message message = ((Message)ChatUtils.bytesToObject(data));
                System.out.println("Joined client "
                            +message._username+" at "+message._host+"...");
                synchronized(userTable) {
                    userTable.put(message._username,_socket);
                }
                addUser(message);
                sendUserList(message);
                writeToClients(message);
                service = new Service(_socket,hostname,message._user);
            }
        }

        catch(Exception e) {
            e.printStackTrace();
            System.out.println("Thread exception"+e);
            try {
                _socket.close();
            }
            catch(Exception ex) {
                ex.printStackTrace();
                System.out.println("ERROR CLOSING SOCKET");
            }
        }
    }//END WHILE
}

private void addUser(Message message)
{
    synchronized(_userList) {
        _userList.put(message._user.toString(),message._user);
    }
}

public static void updateUser(User user)
{
    User myuser;
    synchronized(_userList) {
        _userList.put(user.toString(),user);
    }
}

public static synchronized void writeToClients(Message message)
{
    byte[] data;
    DataOutputStream dos;
        for(int count=0;count<list.size();count++) {
        try {
             dos=new 
                     DataOutputStream(((Socket)list.elementAt(count)).getOutputStream());
            data=ChatUtils.objectToBytes(message);
            dos.write(data,0,data.length);
        }
        catch(Exception e) {
            e.printStackTrace();
            System.out.println("Output exception");
        }
    }//END FOR
}

public static void writeToClient(Message message)
{
    Socket socket;
    byte[] data;
    DataOutputStream dos;
    synchronized(userTable) {
        try {
            socket = (Socket)userTable.get(message._destination);
            dos=new DataOutputStream(socket.getOutputStream());
            data=ChatUtils.objectToBytes(message);
            dos.write(data,0,data.length);
        }
        catch(Exception e) {
            e.printStackTrace();
            System.out.println("SEND EXCEPTION"+e);
        }
    }
}

public static void sendConferenceListToClient(Message message)
{
    Socket socket;
    byte[] data;
    DataOutputStream dos;
    synchronized(userTable) {
        try {
            Message mymessage= new Message(CONFERENCE_LIST);
            Vector vector = (Vector)
                _conflist.get(message._destination);

            mymessage._username = message._username;
            mymessage._destination = message._destination;
            mymessage.userlist = vector;

            socket = (Socket)userTable.get(message._username);

            if(socket!=null) {
                dos=new DataOutputStream(socket.getOutputStream());
                data=ChatUtils.objectToBytes(mymessage);
                dos.write(data,0,data.length);
            }
        }
        catch(Exception e) {
            e.printStackTrace();
            System.out.println("CONFERENCE LIST EXCEPTION"+e);
        }
    }
}

public static void writeToPublicChat(Message message)
{
    Socket socket;
    byte[] data;
    DataOutputStream dos;
    synchronized(_conflist) {
        try {
            Vector svector = (Vector)_conflist.get(message._destination);
            for(int cnt=0;cnt<svector.size();cnt++) {
                synchronized(userTable) {
                    try {
                        socket = (Socket)userTable.get((svector.get(cnt).toString()));
                        if(socket!=null) {
                            dos=new DataOutputStream(socket.getOutputStream());
                            data=ChatUtils.objectToBytes(message);
                            dos.write(data,0,data.length);
                        }
                    }
                    catch(Exception e) {
                        e.printStackTrace();
                        System.out.println("PUBLIC CHAT EXCEPTION"+e);
                    }
                }
            }
        } catch(Exception e){
            e.printStackTrace();
            System.out.println("PUBLIC EXCEPTION"+e);
        }
    }
}

public static void inviteToPublicChat(Vector svector,Message message)
{
    Socket socket;
    byte[] data;
    DataOutputStream dos;
    synchronized(_conflist) {
        for(int cnt=0;cnt<svector.size();cnt++) {
            synchronized(userTable) {
                try {
                    socket = (Socket)userTable.get((svector.get(cnt).toString()));
                    if(socket != null) {
                        dos=new DataOutputStream(socket.getOutputStream());
                        data=ChatUtils.objectToBytes(message);
                        dos.write(data,0,data.length);
                    }
                }
                catch(Exception e) {
                    e.printStackTrace();
                    System.out.println("PUBLIC INVITE EXCEPTION"+e);
                }
            }
        }
    }
}

private void sendUserList(Message message)
{
    int header=0;
    String destination;

    header=message._header;
    destination = message._destination;

    message._header = USERS_LIST;
    message._destination = message._username;

    message.userlist = new Vector(_userList.values());
    writeToClient(message);

    //Restore the headers
    message._destination = destination;
    message._header = header;

}

public static synchronized void removeUser(User user)
{
    try {
        Socket socket = (Socket)userTable.get(user.toString());
        list.removeElement(socket);
        _userList.remove(user.toString());
        userTable.remove(user.toString());
    }
    catch(Exception e) {
        e.printStackTrace();
        System.out.println("ERROR REMOVING SOCKET "+e);
    }
}

public static synchronized void processClientMessage(Message message)
{
    switch(message._header) {

        case CHANGE_STATUS:
            updateUser(message._user);
            writeToClients(message);
            break;

        case CLIENT_LOGOUT:
            removeUser(message._user);
            writeToClients(message);
            break;

        case CONFERENCE_CREATE:
            Vector myvector = new Vector();
            myvector.add(message._username);
            _conflist.put(message._user.toString(),myvector);
        case CONFERENCE_INVITE:
            inviteToPublicChat(message.userlist,message);
        break;

        case CONFERENCE_JOIN:
            Vector vector=null;
            vector = (Vector)
                _conflist.get(message._destination.toString());
            vector.add(message._username);
            _conflist.put(message._destination.toString(),vector);
            writeToPublicChat(message);
        break;

        case CONFERENCE_DENY:
            //_conflist.remove(message._user.toString(),message.userlist);
            writeToPublicChat(message);
        break;

        case CONFERENCE_LEAVE:
            Vector vectors =(Vector)
                _conflist.get(message._destination.toString());
            for(int count=0;count<vectors.size();count++) {
                if(message._username.equals((vectors.elementAt(count).toString())))
                    vectors.remove(count);
            }
            if(vectors.size() != 0)
                _conflist.put(message._user.toString(),vectors);
            else//IF THERE ARE NO MORE USERS
                _conflist.remove(message._user.toString());//DONE CONFERENCE
            writeToPublicChat(message);
        break;

        case PUBLIC_CHAT:
            writeToPublicChat(message);
        break;

        case CONFERENCE_LIST:
            sendConferenceListToClient(message);
        break;

        default:
            writeToClient(message);
    }
}

public static void main(String args[]) throws Exception
{
    Server chatserver=new Server();
}
  }

 //
 // Service: Service class for each clients connected to server.
 //

  class Service implements Runnable, ChatConstants
  {
private DataInputStream dis;
private Socket socket;
private boolean done=false;
private Thread thread;
private String hostname;
private User user;

public Service(Socket _socket,String _hostname,User user)
{
    try {
        this.socket = _socket;
        this.hostname=_hostname;
        this.user = user;
        dis=new DataInputStream(socket.getInputStream());
        thread=new Thread(this,"SERVICE");
        thread.start();
    }
    catch(Exception e){
        e.printStackTrace();
        System.out.println("service constructor"+e);
    }
}

public void run()
{
    byte[] data;
    while(!done)
    {
        try {
            data = new byte[MAX_MESSAGE_SIZE];
            dis.read(data);
            Message message = ((Message)ChatUtils.bytesToObject(data));
            Server.processClientMessage(message);
        }
        catch(Exception e) {
            e.printStackTrace();
            done = true;
            Server.removeUser(user);
            Message message = new Message(CLIENT_LOGOUT);
            user.isOnline = OFFLINE;
            message._user = user;
            Server.writeToClients(message);
            try {
                socket.close();
            } catch(Exception se) {
                se.printStackTrace();
                System.out.println("ERROR CLOSING SOCKET "+se);
            }
            //System.out.println("SERVICE THREAD EXCEPTION"+e);
        }
    }//END WHILE
}
  } 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T14:08:47.050

我觉得

```
ssocket= new ServerSocket(SERVER_PORT,BACKLOG); 
```

正在做这个问题。使用版本

```
ssocket= new ServerSocket(SERVER_PORT,BACKLOG,LOCAL_INET_ADDRESS); 
```

并将服务器绑定到某个恒定的本地 IP。现在使用调制解调器中的端口转发，将所有请求转发到该本地 IP。确保防火墙没有阻止您使用该端口。由于防火墙可能允许本地网络但不允许网络。

# c++ - 将动态大小的数据读入 char*？

> ID：10816544
> 
> 赞同：4
> 
> 时间：2012-05-30T12:42:13.853
> 
> 标签：c++, char

我想知道下面的代码是如何工作的。

```
#include <iostream>
using namespace std;
int main()
{
    char* buffer = new char(NULL);
    while(true)
    {
        cin >> buffer;
        cout << buffer;
        cout << endl;
    }
    return 0;
} 
```

我可以输入任意数量的任意大小的文本，它会将其打印回给我。这是如何运作的？它是否为我动态分配空间？

此外，如果我输入一个空格，它将在新行上打印下一部分文本。然而，这可以通过使用`gets(buffer);`(unsafe) 来解决。

另外，这段代码“合法”吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-30T12:44:59.700

这根本不安全。它正在重写缓冲区之后发生的任何内存，然后读取它。这有效的事实是巧合。这是因为您的 cin/cout 操作不会说“哦，指向一个字符的指针，我应该只写一个字符”而是“哦，你有足够的空间分配给我”。

改进#1：

`char* buffer = new char(10000)`或者干脆`char buffer[10000]`；

现在您可以毫无问题地安全地编写较长的段落。

改进#2：

`std::string buffer;`

为了在评论中回答您的问题，C++ 完全是为了让您犯下大的内存错误。如评论中所述，这是因为它是一种“不要为不需要的东西付费”的语言。有些人确实需要在他们的代码中进行这种级别的优化，尽管您可能不是其中之一。

但是，它也为您提供了很多无需考虑内存的方法。我会坚定地说：如果您使用`new`and`delete`或 char[] 而不是因为您使用的是您熟悉的需要它们的设计模式，或者因为您使用的是需要它们的 3rd-party 或 C 库，那么有一种更安全的方法。

一些可以节省 80% 时间的指南：

- 不要使用字符 []。使用字符串。

- 不要使用指针来传递或返回参数。按引用传递，按值返回。

- 不要使用数组（例如 int[]）。使用向量。您仍然必须检查自己的界限。

只需这三个，您就可以编写“相当安全”的非 C 类代码。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-30T12:48:17.800

这`std::string`是为了：

```
std::string s;

while (true)
{
    std::cin >> s;
    std::cout << s << std::endl;
} 
```

`std::string`将为您动态分配空间，因此您不必担心会覆盖其他地方的内存。

# php - Chrome - 在网站中使用保存为 PDF 功能

> ID：10816547
> 
> 赞同：5
> 
> 时间：2012-05-30T12:42:28.190
> 
> 标签：php, html, google-chrome, pdf

Chrome 允许用户按 Ctrl + P 并选择“保存为 PDF”。

是否可以通过 html 按钮拥有此功能？

我希望用户只需点击一个按钮并直接转到另存为 PDF 提示符（其中文件名由 PHP 设置，而不是由 Chrome 自动设置）。所以用户基本上只是点击按钮并点击提示窗口上的保存。

这可能吗？我可以跳过前面的步骤吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T12:44:32.183

不，这是不可能的。

但是，您可以让用户选择将 HTML 文件输出下载为 PDF 文件。周围有一些图书馆，Prince 是最好的但价格昂贵，所以请查看[DOMPDF](http://code.google.com/p/dompdf/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T12:46:49.563

当您的用户可以在浏览中按 ctrl+P 时，生成页面（在服务器上）的 PHP 进程已经关闭。

除了 PHP 对浏览器没有直接控制这一事实之外。它只是以 HTML/CSS 的形式向他们发送信息，在这种情况下很重要**JavaScript**。

使用 JavaScript，您可以触发浏览器的正常打印行为，但您无法控制它。

另一种方法是在服务器上生成 PDF 并将其作为文件发送到浏览器。在这种情况下，浏览器将询问用户是否要打开它，或者询问用户是否要下载它。

我个人用[fPDF](http://www.fpdf.org/)定制过各种开源电商软件的PDF发票。例如[PrestaShop](http://www.prestashop.com/en/download)。

您真正需要做的就是从 (fPDF](http://www.fpdf.org/) 下载该库，但是查看它的实际效果并能够更改/调整工作版本可能会对您有所帮助，因此您可以寻找PDF 发票在新的 PrestaShop 安装文件夹内的**类**文件名是 PDF.php 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-01-18T20:02:05.693

我失去了几个小时试图在服务器上转换为 pdf 没有运气，因为我的视图包含一些执行主要渲染的 jquery 函数。我想提供一个使用浏览器保存为 pdf 的按钮，但后来选择在客户端使用 javascript 来渲染为 pdf。在某些情况下，这可能不是最佳解决方案，但在我的情况下看起来是最明智的解决方案。

我刚开始使用 html2pdf.js 有很多库，到目前为止它运行良好。

# javascript - Jquery计数选择了一个项目的选择框

> ID：10816550
> 
> 赞同：2
> 
> 时间：2012-05-30T12:42:37.393
> 
> 标签：javascript, jquery

我想知道是否有一种更有效的方法来计算用户的选择：

这是页面上多次出现的选择下拉菜单：

```
<select class="span2 jquery-countable" name="category[7]">
    <option></option>
    <option value="1">1\. vote</option>
    <option value="2">2\. vote</option>
    <option value="3">3\. vote</option>
    <option value="4">4\. vote</option>
</select> 
```

这是我的 js 计算选择：

```
$(document).ready(function () {

    $('#selected-count').html('You choose ' + getCount() + ' entries');

    function getCount() {
        prio1 = $('.jquery-countable option:selected[value="1"]').length;
        prio2 = $('.jquery-countable option:selected[value="2"]').length;
        prio3 = $('.jquery-countable option:selected[value="3"]').length;
        prio4 = $('.jquery-countable option:selected[value="4"]').length;

        return prio1 + prio2 + prio3 + prio4;
    }

    $('.jquery-countable').change(function () {
        $('.jquery-countable option:selected').each(function () {
            $('#selected-count').html('You choose ' + getCount() + ' entries');
        })
    })
}); 
```

我的目标是计算用户所做的所有非空选择？！

有没有更有效的方法？

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-30T12:50:19.330

这将返回您希望的非空的选定项目的数量：

```
function getCount(){
   return $("select.jquery-countable option:selected[value!='']").length;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T12:51:16.080

这是一种方法

```
$(document).ready(function () {

    $('#selected-count').html('You choose ' +0 + ' entries');

    $('.jquery-countable').change(function () {
        var count = 0;
        $('.jquery-countable').each(function () {
            if($.trim($(this).val()).length > 0)
                count++;
        });
        $('#selected-count').html('You choose ' +count + ' entries');
    })
});​ 
```

[工作小提琴](http://jsfiddle.net/joycse06/HZpPv/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T12:53:20.393

尝试这样的事情

```
$("select").change(function(){           
   var count = $("select.jquery-countable option:selected[value!='']").length;
   console.log(count);
}); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-30T12:47:19.727

是的，只需关闭 [value=#] 即可。更通用的选择器将返回一个选定值的数组，在选择的情况下它应该只包含 1。

```
function getCount() {
    return $('.jquery-countable option:selected').length;
} 
```

这将计算页面上“选定”选项的总数，这些选项位于带有 jquery-countable 类的选择中。

# c# - 更改状态 C# 时的 Checkboxlist 事件

> ID：10816552
> 
> 赞同：0
> 
> 时间：2012-05-30T12:42:45.413
> 
> 标签：c#, checkboxlist

在 c# 中，我有一个复选框列表。现在，每当其中一个复选框的状态发生变化时（例如从选中到未选中或从未选中到选中），我都想做一些事情。为此我需要哪个事件？问题是一个简单的 clickEvent 不起作用，因为就像我需要在复选框上单击两次以选中或取消选中它。（它首先选择它，然后它检查或取消选中）。

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T12:46:58.977

您要查找的事件是 SelectedIndexChanged：

[ASP.NET](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.listcontrol.selectedindexchanged.aspx)或[Winforms](http://msdn.microsoft.com/en-us/library/system.windows.forms.listbox.selectedindexchanged.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T12:45:53.237

使用`OnSelectedIndexChanged`事件。
看：[MSDN](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.checkboxlist.aspx)

# java - OutputStream 和 Writer 有什么区别？

> ID：10816554
> 
> 赞同：13
> 
> 时间：2012-05-30T12:42:46.567
> 
> 标签：java, outputstream

`OutputStream`有人可以解释一下和之间的区别`Writer`吗？我应该使用这些课程中的哪一个？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-30T12:49:30.247

流在字节级别工作，它们可以读取（[InputStream](http://docs.oracle.com/javase/7/docs/api/java/io/InputStream.html)）和写入（[OutputStream](http://docs.oracle.com/javase/7/docs/api/java/io/OutputStream.html)）字节或字节列表到流中。

Reader/Writers 在流的顶部添加了字符的概念。由于字符只能通过使用编码转换为字节，因此读取器和写入器具有编码组件（可以自动设置，因为 Java 具有默认编码属性）。读取（[Reader](http://docs.oracle.com/javase/7/docs/api/java/io/Reader.html)）或写入（[Writer](http://docs.oracle.com/javase/7/docs/api/java/io/Writer.html)）的字符通过编码自动转换为字节并发送到流中。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-30T12:44:25.600

**OutputStream**类**逐字节**写入目标，而**Writer类****逐字符**写入目标

 *** * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-30T12:46:12.847

An`OutputStream`是可以写入信息的流。这是相当普遍的，所以有专门`OutputStream`用于特殊目的的，比如写入文件。流只能写入字节数组。

`Writer`s 提供了更大的灵活性，因为它们可以在考虑特殊编码的同时写入字符甚至字符串。

拿哪一个真的取决于你想写什么。如果你已经有字节，你可以直接使用流。如果您有字符或字符串，如果要将它们写入流，则需要自己将它们转换为字节，或者您需要使用`Writer`为您完成这项工作的 a。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-30T12:45:37.230

`OutputStream`使用裸字节，而`Writer`使用*编码*字符。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-30T12:48:03.487

Reader/Writer 类层次结构是面向字符的，Input Stream/Output Stream 类层次结构是面向字节的。基本上有两种类型的流。用于处理字节流的字节流和用于处理字符流的字符流。在字节流中，输入/输出流是层次结构顶部的抽象类，而写入器/读取器是抽象的字符流层次结构顶部的类。

[更多细节在这里](http://java.sun.com/docs/books/tutorial/essential/io/charstreams.html)

干杯！！！**

# hadoop - 我的 hadoop 配置有什么问题？

> ID：10816559
> 
> 赞同：0
> 
> 时间：2012-05-30T12:43:10.763
> 
> 标签：hadoop

我已经完成了 hadoop 所需的所有工作，但它似乎有问题，例如：

我有一个类 Hello.class，当我使用命令“java Hello”时它可以正常工作，但是当我尝试使用命令“hadoop Hello”时它报告“无法加载或找到主类”，但是当我使用“jar”命令将Hello.class更改为Hello.jar，但是，我使用命令“hadoop jar Hello.jar Hello”，这次它可以正常工作，就像我使用命令“java Hello”一样

我的配置有什么问题？

在文件 etc/profile 中添加了以下内容：

```
export JAVA_HOME=/usr/jdk1.7.0_04
export HADOOP_INSTALL=/usr/hadoop-1.0.1
export PATH=$PATH:$JAVA_HOME/bin:$HADOOP_INSTALL/bin
export CLASS_PATH=.:$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar 
```

我已将“export JAVA_HOME=/usr/jdk1.7.0_04”添加到文件“hadoop-env.sh”中

我已经相应地更改了 core-site.xml、hdfs-site.xml、mapred-site.xml

有没有人有同样的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T12:48:24.890

该`hadoop Hello`命令运行 hadoop 并在当前类路径中查找名为 Hello 的类 - 它不包含您的类。

将你的类捆绑到一个 jar 中并运行`hadoop jar myjar.jar Hello`告诉 hadoop 将 jar 文件 myjar.jar 添加到类路径中，然后运行名为 Hello 的类（现在在类路径中）

如果要将类添加到类路径中，请配置`HADOOP_CLASSPATH`环境变量

# c++ - 静态成员函数中的静态变量同名

> ID：10816564
> 
> 赞同：1
> 
> 时间：2012-05-30T12:43:26.797
> 
> 标签：c++, static

> **可能重复：**
> [系统如何识别不同函数中的同名静态变量？](https://stackoverflow.com/questions/2756940/how-are-static-variables-with-the-same-name-in-different-functions-identified-by)

编译器如何区分具有相同名称但在两个不同（静态）成员函数中定义的两个局部静态变量？

```
class Type
{
    public:
        static void fun()
        {
            static bool sameName = false;

            // work with sameName

        }
        static void moreFun()
        {
            static bool sameName = false;

            // work with sameName
        }
}; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T12:47:42.133

它与范围有关。

sameName 存在于两个不同的作用域中/在这种情况下是两个函数作用域

所以在内部，变量可能被称为 fun.sameName 和 moreFun.sameName （名称只是我发明的任意名称，但显示了原理）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T13:14:56.847

在 C++ SPEC（例如：N3337）中说：

> 3 关键字 static 可用于声明具有静态存储持续时间的局部变量。
> 
> （第 62 页；第 3.7.1 节静态存储持续时间）

在您的情况下，变量`static bool sameName`属于 function 的范围`fun`。而另一个变量`static bool sameName`则属于函数的作用域`moreFun`。这两个静态变量属于不同的范围。`static`关键字只影响持续时间，而不是影响范围。

# jquery - 将 jQuery 与 Sitecore 一起使用

> ID：10816566
> 
> 赞同：1
> 
> 时间：2012-05-30T12:43:30.227
> 
> 标签：jquery, sitecore

我正在尝试在我创建的 Web 控件上制作 jQuery 幻灯片放映。我可以让幻灯片放映在 IE 9 中打开兼容模式，但我无法让它在 Chrome 或 Firefox 中正常工作。

我对 jQuery 不是很有经验，所以我可能遗漏了一些明显的东西。我不确定使用 Sitecore 作为 CMS 是否与我的问题有关。

这是我在网上找到并一直在玩的一些示例代码。任何人都可以帮忙吗？

谢谢！垃圾

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>

<script type="text/javascript">
$(document).ready(function () {

    var currentPosition = 0;
    var slideWidth = 500;
    var slides = $('.slide');
    var numberOfSlides = slides.length;
    var slideShowInterval;
    var speed = 3000;

    slideShowInterval = setInterval(changePosition, speed);

    slides.wrapAll('<div id="slidesHolder"></div>')

    slides.css({ 'float': 'left' });

    $('#slidesHolder').css('width', slideWidth * numberOfSlides);

    (function changePosition() {
        if (currentPosition == numberOfSlides - 1) {
            currentPosition = 0;
        } else {
            currentPosition++;
        }
        moveSlide();
    })(jQuery);

    (function moveSlide() {
        $('#slidesHolder')
              .animate({ 'marginLeft': slideWidth * (-currentPosition) });
    })(jQuery);

});
</script>

<div id="slideshow">
 <div id="slideshowWindow">
    <div class="slide">
             <img src="../../images/slider_1.jpg" />
             <div class="slideText">
                 <h2 class="slideTitle">Slide 1</h2>
                 <p class="slideDes">Lorem ipsum dolor sit amet, 
                 consectetur adipisicing elit, sed do eiusmod tempor 
                 incididunt ut labore et dolore magna aliqua.</p>
                 <p class="slideLink"><a href="#">click here</a></p>
             </div><!--/slideText-->
        </div><!--/slide-->
    <div class="slide">
         <img src="../../images/slider_2.jpg" />
                 <div class="slideText">
                 <h2 class="slideTitle">Slide 2</h2>
                 <p class="slideDes">Lorem ipsum dolor sit amet, 
                 consectetur adipisicing elit, sed do eiusmod tempor 
                 incididunt ut labore et dolore magna aliqua.</p>
                 <p class="slideLink"><a href="#">click here</a></p>
             </div><!--/slideText-->
    </div><!--/slide-->
    <div class="slide">
         <img src="../../images/slider_3.jpg" />
                 <div class="slideText">
                 <h2 class="slideTitle">Slide 3</h2>
                 <p class="slideDes">Lorem ipsum dolor sit amet, 
                 consectetur adipisicing elit, sed do eiusmod tempor 
                 incididunt ut labore et dolore magna aliqua.</p>
                 <p class="slideLink"><a href="#">click here</a></p>
             </div><!--/slideText-->
    </div><!--/slide-->
 </div><!--/slideshowWindow--> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T17:05:05.210

您应该注意，页面编辑器（在预览模式下）会为“jQuery.noconflict.js”注入一个脚本标签，该标签以：window.$sc = jQuery.noConflict();

这不是很好，因为它覆盖了每个人在编写 jQuery('.myclass') 时都在使用的 window.jQuery 变量

jQuery 标准功能仍然可以正常工作。但是...在注入之前未加载的任何模块和 jQuery 扩展都将不起作用，因为它们是由不再由“window.jQuery”引用的 jQuery 实例加载的。

“jQuery.noconfact.js”被注入到 body 标签的正下方。这意味着在预览模式中，正文中任何位置的脚本标记中对 jQuery 的所有引用都将使用 Sitecore noconflict 实例，而不是您认为的未加载模块的实例！

简而言之：不要使用 jQuery 变量，也不要使用 $ ...在自己的命名空间中创建自己的 jQuery 变量

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T12:49:13.573

根据您使用的 Sitecore 版本，可能会有

> [...与大多数页面编辑器（包括设计器和调试器）使用的 Prototype.js 冲突。可以通过调用“jQuery.noConflict()”覆盖 $-function 来简单地解决它](http://sitecoreblog.alexshyba.com/2009/01/jquery-conflicts-with-pageeditor.html)

一旦你克服了这个 Sitecore 细微差别，问题就出在你的 javascript/css 代码上。诚然，你不是一个 jQuery 人，我会考虑利用一个预制的解决方案来制作幻灯片，例如[http://slidesjs.com](http://slidesjs.com)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T18:01:54.507

值得注意的是，使用 jQuery 根本不需要 $，它只是一个快捷方式。如果您用 jQuery() 替换所有 $() 实例，它应该可以在 Sitecore 中正常工作。只是原型使用的 $ 是冲突的。此外，马克关于包装的评论也很方便。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-16T21:22:55.900

为了让您的生活更轻松，将您的代码包装在一个匿名函数中并传入 jQuery 变量。如果您正在编写一些其他人将使用的代码，例如 jQuery 插件，这可能更明显，但可以帮助您节省时间。

添加匿名函数并传入 jQuery 变量将防止以后 $ 变量出现问题。

```
 <script type="text/javascript">

    (function ($) {
            $(document).ready(function () {
                // Do some awesome stuff...
            });
        })(jQuery);

    </script> 
```

# java - 在运行时删除 XSL 输出文件生成

> ID：10816575
> 
> 赞同：1
> 
> 时间：2012-05-30T12:44:04.260
> 
> 标签：java, exception, xslt, runtime

我正在编写使用 XSL 读取 XML 文件的文本输出文件。

在这里，我正在尝试检查源 XML 中是否有特定内容的天气，并将该内容写入文件（如果有）。

但是如果内容不可用（不满足“<XSL:if>”条件），那么输出文件将是一个空文件。

所以我想添加一个 else 条件并在那个 else 条件中避免在运行时创建 XSL 输出文件。

任何机构有任何线索？

<xsl:message terminate="yes"> 不会有帮助，因为它确实会生成输出，但只会终止 XSL 的进一步处理。

即使在创建文件后不删除文件，任何机构都可以帮助甚至建议在 java 代码中采用任何其他方法。[通过阅读它们并识别空文件]

目前我正在使用 java 来读取创建的空文件并明确删除它们。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T12:59:02.050

**我将举两个例子来说明如何做到这一点——第二个是我推荐的：**

**假设我们有这个 XML 文档：**

```
<nums>
  <num>01</num>
  <num>02</num>
  <num>03</num>
  <num>04</num>
  <num>05</num>
  <num>06</num>
  <num>07</num>
  <num>08</num>
  <num>09</num>
  <num>10</num>
</nums> 
```

**我们想从中产生另一个，其中`num`偶数的元素被“删除”。**

**一种方法是**：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="/*">
     <nums>
       <xsl:apply-templates/>
     </nums>
 </xsl:template>

 <xsl:template match="num">
  <xsl:choose>
   <xsl:when test=". mod 2 = 1">
     <num><xsl:value-of select="."/></num>
   </xsl:when>
   <!-- <xsl:otherwise/> -->
  </xsl:choose>
 </xsl:template>
</xsl:stylesheet> 
```

**产生了想要的结果**：

```
<nums>
   <num>01</num>
   <num>03</num>
   <num>05</num>
   <num>07</num>
   <num>09</num>
</nums> 
```

**请注意**：对于“不做任何事情”，您甚至不需要`<xsl:otherwise>`它，它已被注释掉。

**更好的解决方案**：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="node()|@*">
     <xsl:copy>
       <xsl:apply-templates select="node()|@*"/>
     </xsl:copy>
 </xsl:template>

 <xsl:template match="num[. mod 2 = 0]"/>
</xsl:stylesheet> 
```

这会产生相同的正确结果。

**在这里，我们使用模板匹配`num`具有偶数值和空主体的元素来覆盖身份规则——它执行“删除”。**

**请注意**：

这里我们根本不使用任何“if-then-else”显式指令——只是 Xtemplate 模式匹配，这是 XSLT 最显着的特性。

# wpf - 图像缩放在功能区中看起来很糟糕

> ID：10816577
> 
> 赞同：5
> 
> 时间：2012-05-30T12:44:13.027
> 
> 标签：wpf, image, render, ribbon, antialiasing

我正在基于 MS RibbonControlsLibrary ( *3.5.41019.1* ) 以编程方式填充功能区 (WPF )。所有图像（最显眼的大图像）看起来都非常糟糕并且“像像素一样”：

![来自 2 Ribbon 的屏幕截图](../Images/10d5aab6dc1f517dd5b9018fe44e0ea2.png)

*   *顶部屏幕截图*来自“ pixly”功能区**（图像缩放看起来很糟糕）**
*   *底部屏幕截图*取自基于 WinForms 的具有相同源图像的窗口中的同一区域（**图像缩放看起来不错）**
*   所有图像均以**32 位 PNG 48x48 格式保存**

我试图将 BitmapScalingMode 设置为“ *HighQuality* ”而没有任何效果，源代码：

```
BitmapImage img = new BitmapImage();
try
{
    Uri uri = new Uri("pack://application:,,,/UIMainWindow;component/Resources/" + iPictureName);                
    img.BeginInit();
    img.SetValue(BitmapImage.CacheOptionProperty, BitmapCacheOption.OnLoad);
    RenderOptions.SetBitmapScalingMode(img, BitmapScalingMode.HighQuality);
    img.UriSource = uri;
    img.EndInit();
    img.Freeze();
}
catch (Exception ex)
{
    throw new Exception("Creation of image failed: " + ex.Message, ex);
} 
```

**问题** 为什么图像的缩放看起来很糟糕？我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-03-16T14:08:46.563

上面的其他答案都不适合我，所以我开始了自己的调查。将图像调整为 32x32*几乎*可以解决问题，但我们的用户使用不同的 DPI 设置，图像在他们的机器上无法正确缩放。我还应该注意，我正在使用 System.Windows.Controls.Ribbon 程序集，它的行为可能与 RibbonControlsLibrary 略有不同。

我发现 RibbonButton 的默认 ControlTemplate 已明确指定 NearestNeighbor 作为位图缩放选项。好消息是，通过将样式放入 Window 的资源中，很容易覆盖此控件模板。有点坏的消息是控件模板非常冗长。我将系统上 RibbonButton 的默认 ControlTemplate 转储到一个文件中，并更改了位图缩放选项。

首先，如果您还没有此命名空间声明，则需要在文件顶部声明它：

```
xmlns:s="clr-namespace:System;assembly=mscorlib" 
```

然后将此 Style 放入 Window 的资源中以覆盖 RibbonButton 外观：

```
<Style TargetType="RibbonButton">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="RibbonButton">
                <Border BorderThickness="{TemplateBinding Border.BorderThickness}" CornerRadius="{TemplateBinding RibbonControlService.CornerRadius}" BorderBrush="{TemplateBinding Border.BorderBrush}" Background="{TemplateBinding Panel.Background}" Name="OuterBorder" SnapsToDevicePixels="True">
                    <Border BorderThickness="{TemplateBinding Border.BorderThickness}" Padding="{TemplateBinding Control.Padding}" CornerRadius="{TemplateBinding RibbonControlService.CornerRadius}" BorderBrush="#00FFFFFF" Name="InnerBorder">
                        <StackPanel Name="StackPanel">
                            <Image Source="{TemplateBinding RibbonControlService.LargeImageSource}" Name="PART_Image" Width="32" Height="32" Margin="{DynamicResource {ComponentResourceKey TypeInTargetAssembly=Ribbon, ResourceId=LargeImageMargin}}" HorizontalAlignment="{TemplateBinding Control.HorizontalContentAlignment}" VerticalAlignment="Center" RenderOptions.BitmapScalingMode="HighQuality" />
                            <Grid Name="Grid" HorizontalAlignment="Center" VerticalAlignment="Center">
                                <RibbonTwoLineText TextAlignment="Center" LineHeight="13" LineStackingStrategy="BlockLineHeight" Text="{TemplateBinding RibbonControlService.Label}" Name="TwoLineText" Margin="1,1,1,0" HorizontalAlignment="Center" VerticalAlignment="Top" />
                            </Grid>
                        </StackPanel>
                    </Border>
                </Border>
                <ControlTemplate.Triggers>
                    <DataTrigger Binding="{Binding Path=ControlSizeDefinition.ImageSize, RelativeSource={RelativeSource Mode=Self}}" Value="Large">
                        <Setter Property="FrameworkElement.MinWidth">
                            <Setter.Value>
                                <s:Double>44</s:Double>
                            </Setter.Value>
                        </Setter>
                        <Setter Property="FrameworkElement.Height">
                            <Setter.Value>
                                <s:Double>66</s:Double>
                            </Setter.Value>
                        </Setter>
                        <Setter Property="FrameworkElement.MinHeight" TargetName="Grid">
                            <Setter.Value>
                                <s:Double>26</s:Double>
                            </Setter.Value>
                        </Setter>
                        <Setter Property="RibbonTwoLineText.HasTwoLines" TargetName="TwoLineText">
                            <Setter.Value>
                                <s:Boolean>True</s:Boolean>
                            </Setter.Value>
                        </Setter>
                    </DataTrigger>
                    <DataTrigger Binding="{Binding Path=ControlSizeDefinition.ImageSize, RelativeSource={RelativeSource Mode=Self}}" Value="Small">
                        <Setter Property="FrameworkElement.Height">
                            <Setter.Value>
                                <s:Double>22</s:Double>
                            </Setter.Value>
                        </Setter>
                        <Setter Property="FrameworkElement.Margin" TargetName="PART_Image">
                            <Setter.Value>
                                <Thickness>1,0,1,0</Thickness>
                            </Setter.Value>
                        </Setter>
                        <Setter Property="Image.Source" TargetName="PART_Image">
                            <Setter.Value>
                                <Binding Path="SmallImageSource" RelativeSource="{RelativeSource Mode=TemplatedParent}" />
                            </Setter.Value>
                        </Setter>
                        <Setter Property="FrameworkElement.Width" TargetName="PART_Image">
                            <Setter.Value>
                                <s:Double>16</s:Double>
                            </Setter.Value>
                        </Setter>
                        <Setter Property="FrameworkElement.Height" TargetName="PART_Image">
                            <Setter.Value>
                                <s:Double>16</s:Double>
                            </Setter.Value>
                        </Setter>
                        <Setter Property="FrameworkElement.HorizontalAlignment" TargetName="TwoLineText">
                            <Setter.Value>
                                <x:Static Member="HorizontalAlignment.Left" />
                            </Setter.Value>
                        </Setter>
                        <Setter Property="FrameworkElement.Margin" TargetName="TwoLineText">
                            <Setter.Value>
                                <Thickness>1,1,1,1</Thickness>
                            </Setter.Value>
                        </Setter>
                        <Setter Property="StackPanel.Orientation" TargetName="StackPanel">
                            <Setter.Value>
                                <x:Static Member="Orientation.Horizontal" />
                            </Setter.Value>
                        </Setter>
                    </DataTrigger>
                    <MultiDataTrigger>
                        <MultiDataTrigger.Conditions>
                            <Condition Binding="{Binding Path=ControlSizeDefinition.ImageSize, RelativeSource={RelativeSource Mode=Self}}" Value="Small" />
                            <Condition Binding="{Binding Path=IsInQuickAccessToolBar, RelativeSource={RelativeSource Mode=Self}}" Value="True" />
                        </MultiDataTrigger.Conditions>
                        <Setter Property="FrameworkElement.Height">
                            <Setter.Value>
                                <s:Double>NaN</s:Double>
                            </Setter.Value>
                        </Setter>
                    </MultiDataTrigger>
                    <DataTrigger Binding="{Binding Path=ControlSizeDefinition.IsLabelVisible, RelativeSource={RelativeSource Mode=Self}}" Value="False">
                        <Setter Property="UIElement.Visibility" TargetName="TwoLineText">
                            <Setter.Value>
                                <x:Static Member="Visibility.Collapsed" />
                            </Setter.Value>
                        </Setter>
                    </DataTrigger>
                    <DataTrigger Binding="{Binding Path=ControlSizeDefinition.ImageSize, RelativeSource={RelativeSource Mode=Self}}" Value="Collapsed">
                        <Setter Property="UIElement.Visibility" TargetName="PART_Image">
                            <Setter.Value>
                                <x:Static Member="Visibility.Collapsed" />
                            </Setter.Value>
                        </Setter>
                    </DataTrigger>
                    <Trigger Property="UIElement.IsMouseOver">
                        <Setter Property="Panel.Background" TargetName="OuterBorder">
                            <Setter.Value>
                                <Binding Path="MouseOverBackground" RelativeSource="{RelativeSource Mode=TemplatedParent}" />
                            </Setter.Value>
                        </Setter>
                        <Setter Property="Border.BorderBrush" TargetName="OuterBorder">
                            <Setter.Value>
                                <Binding Path="MouseOverBorderBrush" RelativeSource="{RelativeSource Mode=TemplatedParent}" />
                            </Setter.Value>
                        </Setter>
                        <Setter Property="Border.BorderBrush" TargetName="InnerBorder">
                            <Setter.Value>
                                <SolidColorBrush>#80FFFFFF</SolidColorBrush>
                            </Setter.Value>
                        </Setter>
                        <Trigger.Value>
                            <s:Boolean>True</s:Boolean>
                        </Trigger.Value>
                    </Trigger>
                    <Trigger Property="UIElement.IsKeyboardFocused">
                        <Setter Property="Panel.Background" TargetName="OuterBorder">
                            <Setter.Value>
                                <Binding Path="FocusedBackground" RelativeSource="{RelativeSource Mode=TemplatedParent}" />
                            </Setter.Value>
                        </Setter>
                        <Setter Property="Border.BorderBrush" TargetName="OuterBorder">
                            <Setter.Value>
                                <Binding Path="FocusedBorderBrush" RelativeSource="{RelativeSource Mode=TemplatedParent}" />
                            </Setter.Value>
                        </Setter>
                        <Setter Property="Border.BorderBrush" TargetName="InnerBorder">
                            <Setter.Value>
                                <SolidColorBrush>#80FFFFFF</SolidColorBrush>
                            </Setter.Value>
                        </Setter>
                        <Trigger.Value>
                            <s:Boolean>True</s:Boolean>
                        </Trigger.Value>
                    </Trigger>
                    <Trigger Property="ButtonBase.IsPressed">
                        <Setter Property="Panel.Background" TargetName="OuterBorder">
                            <Setter.Value>
                                <Binding Path="PressedBackground" RelativeSource="{RelativeSource Mode=TemplatedParent}" />
                            </Setter.Value>
                        </Setter>
                        <Setter Property="Border.BorderBrush" TargetName="OuterBorder">
                            <Setter.Value>
                                <Binding Path="PressedBorderBrush" RelativeSource="{RelativeSource Mode=TemplatedParent}" />
                            </Setter.Value>
                        </Setter>
                        <Setter Property="Border.BorderBrush" TargetName="InnerBorder">
                            <Setter.Value>
                                <SolidColorBrush>#00FFFFFF</SolidColorBrush>
                            </Setter.Value>
                        </Setter>
                        <Trigger.Value>
                            <s:Boolean>True</s:Boolean>
                        </Trigger.Value>
                    </Trigger>
                    <Trigger Property="RibbonControlService.IsInControlGroup">
                        <Setter Property="Border.BorderBrush" TargetName="OuterBorder">
                            <Setter.Value>
                                <Binding Path="Ribbon.BorderBrush" RelativeSource="{RelativeSource Mode=TemplatedParent}" />
                            </Setter.Value>
                        </Setter>
                        <Setter Property="Border.BorderThickness" TargetName="OuterBorder">
                            <Setter.Value>
                                <Thickness>0,0,1,0</Thickness>
                            </Setter.Value>
                        </Setter>
                        <Setter Property="Border.CornerRadius" TargetName="OuterBorder">
                            <Setter.Value>
                                <CornerRadius>0,0,0,0</CornerRadius>
                            </Setter.Value>
                        </Setter>
                        <Setter Property="Border.CornerRadius" TargetName="InnerBorder">
                            <Setter.Value>
                                <CornerRadius>0,0,0,0</CornerRadius>
                            </Setter.Value>
                        </Setter>
                        <Trigger.Value>
                            <s:Boolean>True</s:Boolean>
                        </Trigger.Value>
                    </Trigger>
                    <Trigger Property="UIElement.IsEnabled">
                        <Setter Property="UIElement.Opacity" TargetName="PART_Image">
                            <Setter.Value>
                                <s:Double>0.5</s:Double>
                            </Setter.Value>
                        </Setter>
                        <Setter Property="TextElement.Foreground" TargetName="OuterBorder">
                            <Setter.Value>
                                <SolidColorBrush>#FF9E9E9E</SolidColorBrush>
                            </Setter.Value>
                        </Setter>
                        <Trigger.Value>
                            <s:Boolean>False</s:Boolean>
                        </Trigger.Value>
                    </Trigger>
                    <DataTrigger Binding="{Binding Path=(SystemParameters.HighContrast)}" Value="True">
                        <Setter Property="TextElement.Foreground" TargetName="OuterBorder">
                            <Setter.Value>
                                <DynamicResource ResourceKey="{x:Static SystemColors.MenuTextBrushKey}" />
                            </Setter.Value>
                        </Setter>
                        <Setter Property="Panel.Background" TargetName="OuterBorder">
                            <Setter.Value>
                                <SolidColorBrush>#00FFFFFF</SolidColorBrush>
                            </Setter.Value>
                        </Setter>
                        <Setter Property="Border.BorderBrush" TargetName="OuterBorder">
                            <Setter.Value>
                                <SolidColorBrush>#00FFFFFF</SolidColorBrush>
                            </Setter.Value>
                        </Setter>
                        <Setter Property="Border.CornerRadius" TargetName="OuterBorder">
                            <Setter.Value>
                                <CornerRadius>0,0,0,0</CornerRadius>
                            </Setter.Value>
                        </Setter>
                    </DataTrigger>
                    <MultiDataTrigger>
                        <MultiDataTrigger.Conditions>
                            <Condition Binding="{Binding Path=IsMouseOver, RelativeSource={RelativeSource Mode=TemplatedParent}}" Value="True" />
                            <Condition Binding="{Binding Path=(SystemParameters.HighContrast)}" Value="True" />
                        </MultiDataTrigger.Conditions>
                        <Setter Property="Border.BorderBrush" TargetName="OuterBorder">
                            <Setter.Value>
                                <DynamicResource ResourceKey="{x:Static SystemColors.ControlLightBrushKey}" />
                            </Setter.Value>
                        </Setter>
                    </MultiDataTrigger>
                    <MultiDataTrigger>
                        <MultiDataTrigger.Conditions>
                            <Condition Binding="{Binding Path=IsMouseOver, RelativeSource={RelativeSource Mode=TemplatedParent}}" Value="True" />
                            <Condition Binding="{Binding Path=IsEnabled, RelativeSource={RelativeSource Mode=Self}}" Value="False" />
                            <Condition Binding="{Binding Path=(SystemParameters.HighContrast)}" Value="True" />
                        </MultiDataTrigger.Conditions>
                        <Setter Property="Border.BorderBrush" TargetName="OuterBorder">
                            <Setter.Value>
                                <DynamicResource ResourceKey="{x:Static SystemColors.GrayTextBrushKey}" />
                            </Setter.Value>
                        </Setter>
                    </MultiDataTrigger>
                    <MultiDataTrigger>
                        <MultiDataTrigger.Conditions>
                            <Condition Binding="{Binding Path=IsDropDownOpen, RelativeSource={RelativeSource Mode=TemplatedParent}, FallbackValue=false}" Value="True" />
                            <Condition Binding="{Binding Path=IsEnabled, RelativeSource={RelativeSource Mode=Self}}" Value="False" />
                            <Condition Binding="{Binding Path=(SystemParameters.HighContrast)}" Value="True" />
                        </MultiDataTrigger.Conditions>
                        <Setter Property="Border.BorderBrush" TargetName="OuterBorder">
                            <Setter.Value>
                                <DynamicResource ResourceKey="{x:Static SystemColors.ControlLightBrushKey}" />
                            </Setter.Value>
                        </Setter>
                    </MultiDataTrigger>
                    <MultiDataTrigger>
                        <MultiDataTrigger.Conditions>
                            <Condition Binding="{Binding Path=IsMouseOver, RelativeSource={RelativeSource Mode=Self}}" Value="True" />
                            <Condition Binding="{Binding Path=(SystemParameters.HighContrast)}" Value="True" />
                        </MultiDataTrigger.Conditions>
                        <Setter Property="Panel.Background" TargetName="OuterBorder">
                            <Setter.Value>
                                <DynamicResource ResourceKey="{x:Static SystemColors.HighlightBrushKey}" />
                            </Setter.Value>
                        </Setter>
                        <Setter Property="Border.BorderBrush" TargetName="OuterBorder">
                            <Setter.Value>
                                <DynamicResource ResourceKey="{x:Static SystemColors.ControlLightBrushKey}" />
                            </Setter.Value>
                        </Setter>
                        <Setter Property="Border.CornerRadius" TargetName="OuterBorder">
                            <Setter.Value>
                                <CornerRadius>0,0,0,0</CornerRadius>
                            </Setter.Value>
                        </Setter>
                        <Setter Property="Border.BorderBrush" TargetName="InnerBorder">
                            <Setter.Value>
                                <SolidColorBrush>#00FFFFFF</SolidColorBrush>
                            </Setter.Value>
                        </Setter>
                        <Setter Property="TextElement.Foreground" TargetName="OuterBorder">
                            <Setter.Value>
                                <DynamicResource ResourceKey="{x:Static SystemColors.HighlightTextBrushKey}" />
                            </Setter.Value>
                        </Setter>
                    </MultiDataTrigger>
                    <MultiDataTrigger>
                        <MultiDataTrigger.Conditions>
                            <Condition Binding="{Binding Path=IsKeyboardFocused, RelativeSource={RelativeSource Mode=Self}}" Value="True" />
                            <Condition Binding="{Binding Path=(SystemParameters.HighContrast)}" Value="True" />
                        </MultiDataTrigger.Conditions>
                        <Setter Property="Panel.Background" TargetName="OuterBorder">
                            <Setter.Value>
                                <DynamicResource ResourceKey="{x:Static SystemColors.HighlightBrushKey}" />
                            </Setter.Value>
                        </Setter>
                        <Setter Property="Border.BorderBrush" TargetName="OuterBorder">
                            <Setter.Value>
                                <DynamicResource ResourceKey="{x:Static SystemColors.ControlLightBrushKey}" />
                            </Setter.Value>
                        </Setter>
                        <Setter Property="Border.CornerRadius" TargetName="OuterBorder">
                            <Setter.Value>
                                <CornerRadius>0,0,0,0</CornerRadius>
                            </Setter.Value>
                        </Setter>
                        <Setter Property="Border.BorderBrush" TargetName="InnerBorder">
                            <Setter.Value>
                                <SolidColorBrush>#00FFFFFF</SolidColorBrush>
                            </Setter.Value>
                        </Setter>
                        <Setter Property="TextElement.Foreground" TargetName="OuterBorder">
                            <Setter.Value>
                                <DynamicResource ResourceKey="{x:Static SystemColors.HighlightTextBrushKey}" />
                            </Setter.Value>
                        </Setter>
                    </MultiDataTrigger>
                    <MultiDataTrigger>
                        <MultiDataTrigger.Conditions>
                            <Condition Binding="{Binding Path=IsPressed, RelativeSource={RelativeSource Mode=Self}}" Value="True" />
                            <Condition Binding="{Binding Path=(SystemParameters.HighContrast)}" Value="True" />
                        </MultiDataTrigger.Conditions>
                        <Setter Property="Panel.Background" TargetName="OuterBorder">
                            <Setter.Value>
                                <DynamicResource ResourceKey="{x:Static SystemColors.HighlightBrushKey}" />
                            </Setter.Value>
                        </Setter>
                        <Setter Property="Border.BorderBrush" TargetName="OuterBorder">
                            <Setter.Value>
                                <DynamicResource ResourceKey="{x:Static SystemColors.ControlDarkBrushKey}" />
                            </Setter.Value>
                        </Setter>
                        <Setter Property="Border.CornerRadius" TargetName="OuterBorder">
                            <Setter.Value>
                                <CornerRadius>0,0,0,0</CornerRadius>
                            </Setter.Value>
                        </Setter>
                        <Setter Property="TextElement.Foreground" TargetName="OuterBorder">
                            <Setter.Value>
                                <DynamicResource ResourceKey="{x:Static SystemColors.HighlightTextBrushKey}" />
                            </Setter.Value>
                        </Setter>
                    </MultiDataTrigger>
                    <MultiDataTrigger>
                        <MultiDataTrigger.Conditions>
                            <Condition Binding="{Binding Path=IsInControlGroup, RelativeSource={RelativeSource Mode=Self}}" Value="True" />
                            <Condition Binding="{Binding Path=(SystemParameters.HighContrast)}" Value="True" />
                        </MultiDataTrigger.Conditions>
                        <Setter Property="Border.BorderBrush" TargetName="OuterBorder">
                            <Setter.Value>
                                <DynamicResource ResourceKey="{x:Static SystemColors.ControlLightLightBrushKey}" />
                            </Setter.Value>
                        </Setter>
                    </MultiDataTrigger>
                    <MultiDataTrigger>
                        <MultiDataTrigger.Conditions>
                            <Condition Binding="{Binding Path=IsEnabled, RelativeSource={RelativeSource Mode=Self}}" Value="False" />
                            <Condition Binding="{Binding Path=(SystemParameters.HighContrast)}" Value="True" />
                        </MultiDataTrigger.Conditions>
                        <Setter Property="TextElement.Foreground" TargetName="OuterBorder">
                            <Setter.Value>
                                <DynamicResource ResourceKey="{x:Static SystemColors.GrayTextBrushKey}" />
                            </Setter.Value>
                        </Setter>
                    </MultiDataTrigger>
                </ControlTemplate.Triggers>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-11T17:21:25.150

我有同样的问题，我创建了自己的用户控件来解决这个问题。

我是这样做的：

```
<ribbon:Ribbon>
        <ribbon:RibbonTab Header="File">
            <ribbon:RibbonGroup Header="File">
                <views:ImageButton Command="{Binding LoadCommand}" Caption="Open" SourceImage="/Images/save.png"/>
            </ribbon:RibbonGroup>
        </ribbon:RibbonTab>
    </ribbon:Ribbon> 
```

图像按钮用户控件 ImageButton.xaml

```
<UserControl Name="control"

 <Button Command="{Binding Command, ElementName=control}" Style="{x:Null}">
    <StackPanel>
        <infrastructure:AutoGreyableImage Width="32" Source="{Binding SourceImage, ElementName=control}"/>
        <TextBlock Text="{Binding Caption, ElementName=control}"/>
    </StackPanel>
</Button> 
```

图像按钮用户控件 ImageButton.xaml.cs

```
public partial class ImageButton : UserControl
{
    public static DependencyProperty CommandProperty = DependencyProperty.Register(
      "Command", typeof(ICommand), typeof(ImageButton));
    public static DependencyProperty SourceProperty = DependencyProperty.Register(
      "SourceImage", typeof(string), typeof(ImageButton));
    public static DependencyProperty CaptionProperty = DependencyProperty.Register(
      "Caption", typeof(string), typeof(ImageButton));

    public ICommand Command
    {
        get
        {
            return (ICommand)GetValue(CommandProperty);
        }
        set
        {
            SetValue(CommandProperty, value);
        }

    }
    public string SourceImage
    {
        get
        {
            return (string)GetValue(SourceProperty);
        }
        set
        {
            SetValue(SourceProperty, value);
        }

    }
    public string Caption
    {
        get
        {
            return (string)GetValue(CaptionProperty);
        }
        set
        {
            SetValue(CaptionProperty, value);
        }

    }
    public ImageButton()
    {
        InitializeComponent();
    }
} 
```

对于 AutogreyableImage，我使用[了这篇文章](https://stackoverflow.com/questions/959558/how-can-i-make-a-wpf-image-disableable)

这是类的复制粘贴

```
 using System.Windows.Controls;
    using System.Windows.Media;
    using System.Windows.Media.Imaging;  

/// <summary>
    /// Class used to have an image that is able to be gray when the control is not enabled.
    /// Author: Thomas LEBRUN (http://blogs.developpeur.org/tom)
    /// </summary>
    public class AutoGreyableImage : Image
    {

        /// <summary>
        /// Initializes a new instance of the <see cref="AutoGreyableImage"/> class.
        /// </summary>
        static AutoGreyableImage()
        {
            // Override the metadata of the IsEnabled property.
            IsEnabledProperty.OverrideMetadata(typeof(AutoGreyableImage), new FrameworkPropertyMetadata(true, new PropertyChangedCallback(OnAutoGreyScaleImageIsEnabledPropertyChanged)));
        }

        /// <summary>
        /// Called when [auto grey scale image is enabled property changed].
        /// </summary>
        /// <param name="source">The source.</param>
        /// <param name="args">The <see cref="System.Windows.DependencyPropertyChangedEventArgs"/> instance containing the event data.</param>
        private static void OnAutoGreyScaleImageIsEnabledPropertyChanged(DependencyObject source, DependencyPropertyChangedEventArgs args)
        {
            var autoGreyScaleImg = source as AutoGreyableImage;
            var isEnable = Convert.ToBoolean(args.NewValue);
            if (autoGreyScaleImg != null)
            {
                if (!isEnable)
                {
                    // Get the source bitmap
                    var bitmapImage = new BitmapImage(new Uri(autoGreyScaleImg.Source.ToString()));
                    // Convert it to Gray
                    autoGreyScaleImg.Source = new FormatConvertedBitmap(bitmapImage, PixelFormats.Gray32Float, null, 0);
                    // Create Opacity Mask for greyscale image as FormatConvertedBitmap does not keep transparency info
                    autoGreyScaleImg.OpacityMask = new ImageBrush(bitmapImage);
                }
                else
                {
                    // Set the Source property to the original value.
                    autoGreyScaleImg.Source = ((FormatConvertedBitmap)autoGreyScaleImg.Source).Source;
                    // Reset the Opcity Mask
                    autoGreyScaleImg.OpacityMask = null;
                }
            }
        }
    } 
```

我希望这会帮助你和其他人

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T12:54:48.817

您使用什么操作系统？- WPF 看起来不如 XP 好（Vista 和 7 不是问题）。我相信这是由于 XP 和较新的操作系统之间的抗锯齿默认设置不同。

将 XAML 中的宽度和高度设置为 48 以匹配图像大小（同时检查拉伸参数）。

使用 48x48 32 位 PNG，图像应该看起来不错。

由于带状条没有被拉伸，矢量图形是多余的。

如果上述方法没有帮助，请尝试将[对齐设置为设备像素](http://msdn.microsoft.com/en-us/library/aa970908.aspx)并设置[LayoutRounding](http://msdn.microsoft.com/en-us/library/system.windows.frameworkelement.uselayoutrounding.aspx)。

正如我在评论中建议的那样，您可以将图像调整为显示大小，但是，它应该在 XAML 中明确设置，以确保相同。

您还可以通过将高度或宽度设置为 32 并使用[ScaleTransform](https://stackoverflow.com/questions/1738956/disabling-antialiasing-on-a-wpf-image)来让 WPF 显式调整图像大小。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-30T12:48:57.610

尝试使用[矢量图形](http://en.wikipedia.org/wiki/Vector_Graphics)。有很多工具可以用来生成这种图像的 xaml 等价物，你可以看看这篇[文章](http://wrb.home.xs4all.nl/Articles/Article_SVGToXAML_01.htm)，它可能会有所帮助。

# git - Git可以显示选定行的历史记录吗？

> ID：10816578
> 
> 赞同：20
> 
> 时间：2012-05-30T12:44:18.220
> 
> 标签：git

我有一个大文件，在中间的某个地方，有一个我知道已经修改过几次的函数。`git annotate`或`blame`将显示每一行的最新提交，但如果我是对的，它将*仅*显示最近的提交，而不是之前影响该行的其他提交的列表。

那么在 Git 中是否有一个命令，我可以在其中说诸如**show me commits 之类的影响文件 XYZ 中第 250..260 行的内容**？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-30T13:06:53.803

正如[Git 中的一条评论所建议的那样——如何查看方法/函数的更改历史记录？](https://stackoverflow.com/q/4781405/11343)， 正在做

```
git gui blame <file> 
```

然后右键单击一行并选择*Blame Parent Commit 可以满足*我的需要。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-03-21T06:25:09.817

phpStorm 可以做到这一点。选择行 -> 右键单击​​ -> Git -> 显示历史选择

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-02-28T08:10:18.270

```
git show $(git blame XYZ -L 250,260 | awk '{print $1}') 
```

[每一行代码总是被记录在案。](http://mislav.uniqpath.com/2014/02/hidden-documentation/)通过[@mislav](https://stackoverflow.com/users/11687/mislav)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-03-21T07:55:58.487

选择行->右键单击-> Git->注释

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-30T12:50:58.477

我认为这是不可能的。你需要围绕 git blame 编写一个脚本。您可以[在 GitHub 上找到此类脚本的 bash 示例](https://github.com/renard/git-line-history)。

# model-view-controller - 有时 MVC 回发数据在 IE 8、7、6 中格式错误

> ID：10816579
> 
> 赞同：0
> 
> 时间：2012-05-30T12:44:19.167
> 
> 标签：model-view-controller, internet-explorer, post, asp.net-mvc-4

大约 5% 的访问者无法成功发布网络表单。控制器中返回的数据（属性）为空。如果我查看 Request.Form 集合，我发现它有一个具有此值的键：

```
Key:-----------------------------7dc123b1036c 
Content-Disposition: form-data; name
Value:"mac" BByYu99xL2QUkiC_y-JuZ2a3Ut6ZuUC781 -----------------------------7dc123b1036c-- 
```

我只在此回发中发送一个隐藏字段，并将其命名为“mac”。任何想法为什么以这种方式返回？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T09:15:41.853

解决方案：我删除了“multipart/form-data”的加密标签，突然 IE 发布得很好。

# php - 读取目录php中的所有文件

> ID：10816580
> 
> 赞同：0
> 
> 时间：2012-05-30T12:44:24.680
> 
> 标签：php, cakephp

今天是个好日子

我有个问题。我的 webroot/files 中有一个文件夹，其中包含一些文档，主要是 doc 文件。我想阅读文件的所有内容。例如，如果有 2 个文件，即 users.docx 和funds.docx。我希望能够打开每个文件，读取其内容并将它们写入单个文档。

到目前为止，我的代码只写入了第一个文件，但新写入的文件的大小与两个读取文件的大小相同。

```
function writeToFile($insId,$path,$hospital){
         $data = '';
        $my_file  =  WWW_ROOT . 'files' . DS . 'instructions' . DS . $insId . DS ."Final Report ".$insId.".rtf";

                            $handle = fopen($my_file, 'w')or die('Cannot open file:  '.$my_file); //implicitly creates file
                            foreach($hospital as $h){
                            $data .= file_get_contents($path.'/'.$h, false);
                            $data .= "\n";
                            echo($h."\n");
                            }
                            file_put_contents($my_file, $data);
                           fclose($handle);
     } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T23:51:19.013

docx 文件实际上是一个目录，因此如果您想实际访问构成该文件的 xml，则需要打开该目录。但是，目录的内容非常复杂，由许多不同的文件组成。

您不太可能找到每个文件的正确部分并将它们组合在一起，然后使用脚本制作一个有效的文件。

# c# - 在位图图像中设置背景颜色

> ID：10816582
> 
> 赞同：5
> 
> 时间：2012-05-30T12:44:28.423
> 
> 标签：c#, wpf, image, bitmap

我想将我的画布保存为图像。它可以工作，但背景颜色是黑色。我必须如何添加才能改变颜色？

我使用这段代码：

```
Size size = new Size(surface.Width, surface.Height);

surface.Measure(size);
surface.Arrange(new Rect(size));

// Create a render bitmap and push the surface to it
RenderTargetBitmap renderBitmap =
    new RenderTargetBitmap((int)size.Width, (int)size.Height, 96d, 96d,
                           PixelFormats.Pbgra32);
renderBitmap.Render(surface);

// Create a file stream for saving image
using (FileStream outStream = new FileStream(filename, FileMode.Create))
{
    BmpBitmapEncoder encoder = new BmpBitmapEncoder();
    // push the rendered bitmap to it
    encoder.Frames.Add(BitmapFrame.Create(renderBitmap));
    // save the data to the stream
    encoder.Save(outStream);
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-30T13:38:35.057

**试试这个**

```
Size size = new Size(surface.Width, surface.Height);

surface.Measure(size);
surface.Arrange(new Rect(size));

// Create a render bitmap and push the surface to it
RenderTargetBitmap renderBitmap =
    new RenderTargetBitmap((int)size.Width, (int)size.Height, 96d, 96d,
                           PixelFormats.Pbgra32);

DrawingVisual drawingVisual = new DrawingVisual();
using (DrawingContext drawingContext = drawingVisual.RenderOpen())
{
    VisualBrush visualBrush = new VisualBrush(surface);
    drawingContext.DrawRectangle(visualBrush, null, 
      new Rect(new Point(), new Size(size.Width, size.Height)));
}

renderBitmap.Render(drawingVisual);

// Create a file stream for saving image
using (FileStream outStream = new FileStream(filename, FileMode.Create))
{
    BmpBitmapEncoder encoder = new BmpBitmapEncoder();
    // push the rendered bitmap to it
    encoder.Frames.Add(BitmapFrame.Create(renderBitmap));
    // save the data to the stream
    encoder.Save(outStream);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T13:22:45.923

尝试`PixelFormats.Default`or`PixelFormats.Bgra32`或`PixelFormats.Rgb24`代替`PixelFormats.Pbgra32`.

**P**代表预乘——假设每个通道都预先乘以 alpha。

[MSDN 参考](http://msdn.microsoft.com/en-us/library/system.windows.media.pixelformats.aspx)

# ftpwebrequest - 为什么我的 ListDirectory ftp-request 会抛出异常

> ID：10816593
> 
> 赞同：0
> 
> 时间：2012-05-30T12:45:14.180
> 
> 标签：ftpwebrequest

我有以下代码：

```
var listDirectoryFtpRequest = (FtpWebRequest) WebRequest.Create(directoryUri);
listDirectoryFtpRequest.Method = WebRequestMethods.Ftp.ListDirectory;
listDirectoryFtpRequest.Credentials = /* my credentials */;
listDirectoryFtpRequest.KeepAlive = false;
listDirectoryFtpRequest.UsePassive = true;
listDirectoryFtpRequest.UseBinary = true;

using (var response = listDirectoryFtpRequest.GetResponse())
{
    return true;
} 
```

存储在 中的目录`directoryUri`确实存在。

我的 ftp 服务器有以下日志

```
(022102) 30.05.2012 08:32:18 - **USER** (213.235.245.89)> 230 Logged on
(022102) 30.05.2012 08:32:19 - **USER** (213.235.245.89)> OPTS utf8 on
(022102) 30.05.2012 08:32:19 - **USER** (213.235.245.89)> 200 UTF8 mode enabled
(022102) 30.05.2012 08:32:20 - **USER** (213.235.245.89)> PWD
(022102) 30.05.2012 08:32:20 - **USER** (213.235.245.89)> 257 "/" is current directory.
(022102) 30.05.2012 08:32:21 - **USER** (213.235.245.89)> CWD /21792543/2/
(022102) 30.05.2012 08:32:21 - **USER** (213.235.245.89)> 250 CWD successful. "/21792543/2" is current directory.
(022102) 30.05.2012 08:32:22 - **USER** (213.235.245.89)> TYPE I
(022102) 30.05.2012 08:32:22 - **USER** (213.235.245.89)> 200 Type set to I
(022102) 30.05.2012 08:32:23 - **USER** (213.235.245.89)> PASV
(022102) 30.05.2012 08:32:23 - **USER** (213.235.245.89)> 227 Entering Passive Mode (10,40,31,10,229,112)
(022102) 30.05.2012 08:32:27 - **USER** (213.235.245.89)> NLST
(022102) 30.05.2012 08:32:27 - **USER** (213.235.245.89)> 150 Connection accepted
(022102) 30.05.2012 08:32:27 - **USER** (213.235.245.89)> 226 Transfer OK
(022102) 30.05.2012 08:32:29 - **USER** (213.235.245.89)> disconnected. 
```

不过我得到以下异常：

```
System.Net.WebException: The underlying connection was closed: The server committed a protocol violation.
   at System.Net.FtpWebRequest.SyncRequestCallback(Object obj)
   at System.Net.FtpWebRequest.RequestCallback(Object obj)
   at System.Net.CommandStream.InvokeRequestCallback(Object obj)
   at System.Net.CommandStream.Abort(Exception e)
   at System.Net.FtpWebRequest.FinishRequestStage(RequestStage stage)
   at System.Net.FtpWebRequest.GetResponse()
   at **MYCLASS**.**MYMETHOD** 
```

为什么？...我该如何解决这个问题？

PS .：我在这里发现[了另一个](https://stackoverflow.com/questions/9815919/the-underlying-connection-was-closed-the-server-committed-a-protocol-violation)类似症状的问题。但是我真的必须去`KeepAlive = true`-hack 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T06:55:02.830

哦，亲爱的…….Net 实现直到 3.5 才修复——也许是 4.0……无论如何：我使用[System.Net.FtpClient](http://netftp.codeplex.com/)来修复我的上传/下载/请求……

# python - Python：非常基本，无法弄清楚为什么它不拆分为列出的较大数字而是拆分为单个整数

> ID：10816595
> 
> 赞同：1
> 
> 时间：2012-05-30T12:45:22.057
> 
> 标签：python

在这里非常快速的问题，其他一些人帮助我解决了另一个问题，但我无法让他们的任何代码工作，因为我不了解这里非常基本的东西。

```
8000.5   16745     0.1257
8001.0   16745     0.1242
8001.5   16745     0.1565
8002.0   16745     0.1595
8002.5   16745     0.1093
8003.0   16745     0.1644 
```

我有一个这样的数据文件，当我输入

```
f1 = open(sys.argv[1], 'rt')
for line in f1:
    fields = line.split()
    print list(fields [0]) 
```

我得到输出

```
['1', '6', '8', '2', '5', '.', '5']
['1', '6', '8', '2', '6', '.', '0']
['1', '6', '8', '2', '6', '.', '5']
['1', '6', '8', '2', '7', '.', '0']
['1', '6', '8', '2', '7', '.', '5']
['1', '6', '8', '2', '8', '.', '0']
['1', '6', '8', '2', '8', '.', '5']
['1', '6', '8', '2', '9', '.', '0'] 
```

而我本来希望通过试用 print list(fields) 之类的东西来获得类似的东西

```
[16825.5, 162826.0 ....] 
```

我在这里缺少什么明显的东西？

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-30T12:48:13.227

删除`list`; `.split()`已经返回一个列表。

您正在将字段的*第一个*元素转换为列表：

```
>>> fields = ['8000.5', '16745', '0.1257']
>>> fields[0]
'8000.5'
>>> list(fields[0])
['8', '0', '0', '0', '.', '5'] 
```

如果您想将第一列作为列表，您可以随时构建一个列表：

```
myfirstcolumn = []
for line in f1:
    fields = line.split()
    myfirstcolumn.append(fields[0]) 
```

这可以简化为列表理解：

```
myfirstcolumn = [line.split()[0] for line in f1] 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-30T12:49:45.763

最后一个命令是问题所在。

`print list(fields[0])`从拆分列表中获取第零个项目，然后将其转换为列表。

由于您已经有一个字符串列表，因此第零个项目是一个字符串，当应用于它`['8000.5','16745','0.1257']`时，它会转换为单个元素的列表。`list()`

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-30T12:57:48.613

您的第一个问题是您应用于`list`字符串：

```
list("123") == ["1", "2", "3"] 
```

其次，您`print`在文件中的每行一次，但似乎您想收集每行的第一项并一次打印它们。

第三，在 Python 2 中，调用中没有“t”模式`open`（文本模式是默认模式）。

我想你想要的是：

```
with open(sys.argv[1], 'r') as f:
    print [ line.split()[0] for line in f ] 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-30T12:49:06.877

问题是您将*正确*提取的*第一个*字段转换为.*`list`*

 *这是打印第一列的解决方案：

```
with open(sys.argv[1]) as f1:
   first_col = []
   for line in f1:
      fields = line.split()
      first_col.append(fields[0])

   print first_col 
```

给出：

```
['8000.5', '8001.0', '8001.5', '8002.0', '8002.5', '8003.0'] 
```

而不是`f1 = open(sys.argv[1], 'rt')`考虑使用`with`which 将在您完成或发生异常时关闭文件。`rt`另外，由于[open()](http://docs.python.org/library/functions.html#open)默认为`r`ead 和`t`ext 模式，因此我离开了。

最后，这也可以使用[列表理解](http://docs.python.org/tutorial/datastructures.html#list-comprehensions)来编写：

```
with open(sys.argv[1]) as f1:
   first_col = [line.split()[0] for line in f1] 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-30T13:14:48.533

其他人已经很好地回答了这个问题，您看到的行为是因为您在`list`字符串上使用。 `list`将获取您可以迭代的任何对象并将其转换为列表 - 一次一个元素。这并不奇怪，只是对象甚至不必有`__iter__`方法（字符串就是这种情况）——关于 SO 有很多帖子，`__iter__`所以我不会关注那部分。

无论如何，请尝试以下代码并查看它打印出来的内容：

```
>>> def enlighten_me(obj):
...     print (list(obj))
...     print (hasattr(obj))
...
>>> enlighten_me("Hello World") 
>>> enlighten_me( (1,2,3,4) )  
>>> enlighten_me( {'red':'wagon',1:5} ) 
```

当然，您可以尝试使用集合、列表、生成器的示例......任何您可以迭代的东西。

Levon 发布了一个关于如何在阅读文件时创建列的好答案。我将使用内置的 zip 函数演示同样的事情。

```
rows=[]
for row in myfile:
    rows.append(row.split())

#now rows is stored as [ [col1,col2,...] , [col1,col2,...], ... ] 
```

此时我们可以通过（Levon 的回答）得到第一列：

```
column1=[]
for row in rows:
    column1.append(row[0]) 
```

或更简洁地说：

```
column1=[row[0] for row in rows]  #<-- This is called a list comprehension 
```

但是如果你想要所有的列呢？（如果你不知道有多少列呢？）。这是一份工作`zip`。

`zip`将迭代作为输入并将它们匹配起来。换句话说：

```
zip(iter1,iter2) 
```

将获取 iter1[0] 并将其与 iter2[0] 匹配，并将 iter1[1] 与 iter2[1] 匹配，依此类推——如果您考虑一下，这有点像拉链。但是， zip 可以接受的不仅仅是 2 个参数......

```
zip(iter1,iter2,iter3) #results in [ [iter1[0],iter2[0],iter3[0]] , [iter1[1],iter2[1],iter3[1]], ... ] 
```

现在，我们需要的最后一个难题是使用星号运算符解包参数。如果我有一个功能：

```
def foo(a,b,c):
    print a
    print b
    print c 
```

我可以这样调用该函数：

```
A=[1,2,3]
foo(A[0],A[1],A[2]) 
```

或者，我可以这样称呼它：

```
foo(*A) 
```

希望这是有道理的——星号获取列表中的每个元素并在将其传递给 foo 之前“解包”它。

因此，将这些部分放在一起（记得回到行列表），我们可以解压缩行列表并将其传递给 zip，它将匹配每行（即列）中的相应索引。

```
columns=zip(*rows) 
```

现在要获得第一列，我们只需：

```
columns[0]  #first column 
```

对于列表列表，我喜欢将其`zip(*list_of_lists)`视为一种穷人的转置。

希望这对您有所帮助。*

# html - 3x3 网格在某些宽度下表现奇怪

> ID：10816596
> 
> 赞同：0
> 
> 时间：2012-05-30T12:45:28.673
> 
> 标签：html, css, css-float

我有一个响应式 3x3 视频缩略图网格，它使用漂亮的照片到灯箱 vimeo 剪辑。它在某些分辨率下效果很好，但是当您调整浏览器窗口的宽度时，它会迅速从 3x3 变为这种废话。
![什么？](../Images/774ca98241c450e672bbac25835d2bb6.png)

这是有问题的 CSS。

```
 .thumb
{
float: right;
width: 25%;
height: auto;
margin: 2%;
}
    .maincontent
{
margin:0 auto;
width:90%;
float:right;
} 
```

如果重要的话，还有一个 HTML 片段。

```
 <div class="maincontent">
    <a href="http://vimeo.com/428525" rel="prettyPhoto" title="">
       <img class="thumb" src="http://ftfrmedia.com/images/thumbnails/Overview-thumb.jpg" alt="Company Overview" width="60" />
       </a> 
```

我真的被难住了...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T12:59:49.317

我认为这是浮动`.thumb`和`img`.

更换浮动`display: inline-block`应该可以解决问题：

```
.thumb {
    height: auto;
    margin: 2em;
    width: 25%;
}

img {
    display: inline-block;
    *display: inline;        /* IE7 hack as it does not */
    *zoom: 1;                /* support display: inline-block */  
    height: 3em;
    margin-left: 0.5em;
    margin-right: 0.5em;
    margin-top: -1.6em;
    width: 3em;
} 
```

**更新**

**正如下面@DaveHaigh**所指出的，不需要`display: inline-block`在 img 元素上使用，因为它已经接受了 height 和 width 属性。

因此，只需移除浮动即可解决此问题。如果您想保持图像从右到左的流动，那么您可以添加`direction: rtl`到它们的父级：

```
.maincontent {
    direction: rtl;
} 
```

这样做的缺点是它也会从右到左排列任何文本，但这在您的网站中似乎不是问题，因为您没有在`.maincontent`元素中使用任何文本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T13:04:12.637

`.thumb`删除and上的浮动`img`。并且还将`margin: 2em;`on替换`.thumb`为百分比值，例如`2%`。

# c++ - C++：命名空间——如何在头文件和源文件中正确使用？

> ID：10816600
> 
> 赞同：100
> 
> 时间：2012-05-30T12:45:39.017
> 
> 标签：c++, namespaces, header-files

考虑一对两个源文件：接口声明文件（`*.h`或`*.hpp`）及其实现文件（`*.cpp`）。

让`*.h`文件如下所示：

```
namespace MyNamespace {
  class MyClass {
  public:
    int foo();
  };
} 
```

我已经看到了在源文件中使用命名空间的两种不同做法：

`*.cpp`展示练习#1：

```
#include "MyClass.h"
using namespace MyNamespace;

int MyClass::foo() { ... } 
```

`*.cpp`展示练习#2：

```
#include "MyClass.h"
namespace MyNamespace {

  int MyClass::foo() { ... }

} 
```

**我的问题：**这两种做法之间有什么区别吗？一种被认为比另一种更好吗？

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2012-05-30T12:52:08.287

从代码可读性的角度来看，出于这个原因，我认为使用#2 方法可能更好：

您一次可以是`using`多个命名空间，并且写在该行下方的任何对象或函数都可以属于这些命名空间中的任何一个（除非命名冲突）。将整个文件包装在一个`namespace`块中更加明确，并且允许您在 .cpp 文件中声明属于该命名空间的新函数和变量

* * *

## 回答 #2

> 赞同：58
> 
> 时间：2012-05-30T13:30:47.237

最清楚的是您没有显示的选项：

```
int MyNamespace::MyClass::foo()
{
    //  ...
} 
```

它也很冗长；对大多数人来说太多了。由于`using namespace`这是名称冲突的一个原因，至少在我的经验中，并且应该避免，除非在非常有限的范围和地方，我通常使用你的＃2。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2016-06-01T20:57:40.070

> 这两种做法有什么区别吗

是的。[#1 和 #2 分别是using 指令](http://en.cppreference.com/w/cpp/language/namespace#Using-directives)和[命名空间定义](http://en.cppreference.com/w/cpp/language/namespace#Namespaces)的示例。在这种情况下，它们实际上是相同的，但会产生其他后果。例如，如果您在 旁边引入一个新标识符`MyClass::foo`，它将具有不同的范围：

#1：

```
using namespace MyNamespace;
int x;  // defines ::x 
```

#2：

```
namespace MyNamespace {
  int x;  // defines MyNamespace::x
} 
```

> 一个被认为比另一个更好？

#1 优点：更简洁一些；更难在不经意间无意中引入某些东西`MyNamespace`。缺点：可能会无意中引入现有的标识符。

#2 优点：更清楚的是现有标识符的定义和新标识符的声明都属于`MyNamespace`. 缺点：更容易无意中将标识符引入`MyNamespace`.

对 #1 和 #2 的批评是，当您可能只关心`MyNamespace::MyClass`. 这是严厉的，它传达的意图很差。

#1 的一种可能替代方法是[使用声明](http://en.cppreference.com/w/cpp/language/namespace#Using-declarations)，其中仅包含您感兴趣的标识符：

```
#include "MyClass.h"
using MyNamespace::MyClass;

int MyClass::foo() { ... } 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2016-06-04T12:26:59.173

我还想补充一点，如果您由于某种原因决定在 cpp 文件中实现模板专业化并且仅仅依靠`using namespace`您将遇到以下问题：

```
// .h file
namespace someNameSpace
{
  template<typename T>
    class Demo
    {
      void foo();
    };
}

// .cpp file
using namespace someNameSpace;

template<typename T>
void Demo<T>::foo(){}

// this will produce
// error: specialization of 'template<class T> void someNameSpace::Demo<T>::foo()' in different namespace [-fpermissive]
template<>
void Demo<int>::foo(){} 
```

否则，如果您应用#2 方法，这会很好。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-12-07T06:39:36.157

I'd like to add one more way, using *using-declaration*:

```
#include "MyClass.h"
using MyNamespace::MyClass;

int MyClass::foo() { ... } 
```

This way saves you from typing namespace name many time if class have many functions

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-08-21T15:09:35.457

我认为*实践#1*根本不是正确的 C++ 代码。此代码片段定义 ::MyClass::foo 符号，其中真正的全限定名称是 ::MyNamespace::MyClass::foo。

要了解命名空间，您可以阅读草案的第 7.3 节，比如说标准[http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2013/n3690.pdf](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2013/n3690.pdf)

这个概念从 1998 年左右开始就已经很老了，因此您可以使用 B.Stroustroup 的任何标准或书籍来了解它。

在 C++ 语言中，**命名空间**是一个命名范围。与类定义相反，命名空间可以向其添加新功能。

构造**“使用命名空间 NS；”** 在 C++ 中被称为 using-directive，在我的实践中它可以用于多个目标：

1.  您可以在另一个命名空间中使用此指令来组合（混合）来自不同命名空间的名称。
2.  在编译单元的上下文中，它会将同义词附加到命名空间**NS**中的所有变量。

要定义符号，您可以使用两种机制 - 您可以通过在 C++ 源文件中的全局命名空间中操作来对所有命名空间使用显式限定。

或者您可以打开命名空间并向其添加定义（练习 #2）。

# msbuild - MSBuild 使用 %(RecursiveDir) 作为文件名的一部分

> ID：10816601
> 
> 赞同：3
> 
> 时间：2012-05-30T12:45:41.667
> 
> 标签：msbuild, msbuild-4.0

作为构建脚本的一部分，我们从子目录复制用户消息文件，并希望将子目录的名称附加到消息文件中。即味精\0\message.std > 味精\message0.std

我试过使用

```
<Copy SourceFiles="@(MessageFiles)" 
DestinationFiles="@(MessageFiles->'$(BuildRoot)\%(Filename)%(RecursiveDir)%(Extension)'"/> 
```

但是，这会尝试将文件复制到 ..\message0.std。

无论如何要从 %(RecursiveDir) 抑制尾随 '\' 或以另一种方式组成目标名称？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-30T14:57:49.077

您可以执行以下操作：

```
<Target Name="DoIt">
    <ItemGroup>
        <MessageFiles2 Include="@(MessageFiles)">
            <SubDir>$([System.IO.Path]::GetFileName($([System.IO.Path]::GetDirectoryName(%(MessageFiles.RecursiveDir)))))</SubDir>
        </MessageFiles2>
    </ItemGroup>

    <Message Text="@(MessageFiles2->'$(BuildRoot)\%(Filename)%(SubDir)%(Extension)')"/>

</Target> 
```

或者，如果你想让那些试图维持你的工作的人大吃一惊：

```
<Target Name="DoIt">
    <Message Text="@(MessageFiles->'$(BuildRoot)\%(Filename)$([System.IO.Path]::GetFileName($([System.IO.Path]::GetDirectoryName($([System.String]::Copy('%(MessageFiles.RecursiveDir)'))))))%(Extension)')"/>
</Target> 
```

这不是一个完整的解决方案，但您可以从这里开始。另请注意，如果`RecursiveDir`为空，即您的消息文件直接位于根文件夹中，则上述两个示例都会中断。[您可以在MSBuild 属性函数](http://blogs.msdn.com/b/visualstudio/archive/2010/04/02/msbuild-property-functions.aspx)博客文章
中找到更多信息。

作为处理问题的另一种方法，您始终可以创建[自定义任务](http://msdn.microsoft.com/en-us/library/t9883dzc.aspx)。

# cvs - cvs [结帐中止]：客户端太旧，无法结帐到 /tmp/test1

> ID：10816608
> 
> 赞同：1
> 
> 时间：2012-05-30T12:46:04.287
> 
> 标签：cvs

这里有什么想法吗？如果我给它一个目录名而不是路径，它通常可以工作：

```
cvs -d HOST1:/repository checkout -Pd temp file.py 
```

它不能这样工作：

```
cvs -d HOST1:/repository checkout -Pd /tmp/test1 file.py 
```

# ios - 表格中的复选框

> ID：10816611
> 
> 赞同：1
> 
> 时间：2012-05-30T12:46:16.903
> 
> 标签：ios, xcode, checkbox

我想在表格中为每个表格行添加一个复选框（或者如果复选框是一个更好的名称）。一个简单的小框，用于标记是否读取了一行。只是为了记住。当我关闭应用程序时，当然要保存。如果应用程序更新，也仍然保持不变。

有没有简单的方法可以做到这一点？
周围有样品吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T13:31:52.873

在下面的代码中，我使用了一个代码来制作待办事项列表，这里我使用了两个`NSMutableArray` **itsToDoTitle**和**itsToDoChecked**来填充表格行..我希望这会对你有所帮助..

您可以拥有**itsToDoTitle**和**itsToDoChecked**数组，`NSUserDefaults`或者您可以写入一些属性文件，以便再次拥有相同的列表。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    NSString *CellIdentifier = @"ToDoList";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil) 
    {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault
                                       reuseIdentifier:CellIdentifier] autorelease];

        cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;
    }

    cell.textLabel.text = [itsToDoTitle objectAtIndex:indexPath.row];
    cell.textLabel.font = [UIFont systemFontOfSize:14.0];
    cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;
    cell.selectionStyle = UITableViewCellSelectionStyleBlue;

    BOOL checked =  [[itsToDoChecked objectAtIndex:indexPath.row] boolValue];
    UIImage *image = (checked) ? [UIImage imageNamed:@"checked.png"] : [UIImage imageNamed:@"unchecked.png"];

    UIButton *button = [UIButton buttonWithType:UIButtonTypeCustom];
    CGRect frame = CGRectMake(0.0, 0.0, image.size.width, image.size.height);
    button.frame = frame;   // match the button's size with the image size
    button.tag = indexPath.row;
    [button setBackgroundImage:image forState:UIControlStateNormal];

    // set the button's target to this table view controller so we can interpret touch events and map that to a NSIndexSet
    [button addTarget:self action:@selector(checkButtonTapped:event:) forControlEvents:UIControlEventTouchUpInside];
    cell.accessoryView = button;

    return cell;
}

- (void)tableView:(UITableView *)tableView accessoryButtonTappedForRowWithIndexPath:(NSIndexPath *)indexPath
{   

    BOOL checked = [[itsToDoChecked objectAtIndex:indexPath.row] boolValue];
    [itsToDoChecked removeObjectAtIndex:indexPath.row];
    [itsToDoChecked insertObject:(checked) ? @"FALSE":@"TRUE" atIndex:indexPath.row];
    UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath];
    UIButton *button = (UIButton *)cell.accessoryView;

    UIImage *newImage = (checked) ? [UIImage imageNamed:@"unchecked.png"] : [UIImage imageNamed:@"checked.png"];
    [button setBackgroundImage:newImage forState:UIControlStateNormal];

    UIBarButtonItem *backButton = [[UIBarButtonItem alloc] initWithTitle:@"Save"
                                                                   style:UIBarButtonItemStylePlain target:self action:@selector(saveChecklist:)];
    self.navigationItem.rightBarButtonItem = backButton;
    [backButton release];

} 
```

# mysql - MySql：需要 SQL 来按一些规则选择消息

> ID：10816614
> 
> 赞同：0
> 
> 时间：2012-05-30T12:46:30.227
> 
> 标签：mysql, except

我有三个表，需要获取用户 PETER 不是发件人和不是收件人的消息。

表“消息”

```
idMessage  | bodyText          | idUserSender
---------------------------------------------
1          | This is message 1 | 2
2          | This is message 2 | 1
3          | This is message 3 | 1 
```

表“用户”

```
idUser     | name
-------------------
1          | John
2          | Peter
3          | Marco 
```

表'messageRecipients'

```
idMessage  | idUserRecipient
----------------------------
1          | 1
1          | 3
2          | 1
2          | 3
3          | 2
3          | 3 
```

所以结果集应该是：

```
idMessage  | bodyText          | idUserSender
---------------------------------------------
2          | This is message 2 | 1 
```

我试过：

```
SELECT * FROM messages AS M
LEFT JOIN
(
    SELECT * FROM users WHERE idUser <> 2
) AS allUsersWithoutPeter ON M.idUserSender = allUsersWithoutPeter.idUser
GROUP BY M.idMessage 
```

并且收到了 Peter 不是发件人的消息，但不知道如何排除 Peter 也是收件人的消息，并且只收到 Peter 不包括在内的消息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T12:52:38.077

```
select 
  m.*
from
  messages m
join
  users u on u.idUser != m.idUserSender and u.name='Peter'
join
  messageRecipients mr on mr.idMessage = m.idMessage and mr.idUserRecipient != u.idUser 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T12:51:48.887

```
SELECT m.* FROM Messages m
JOIN messageRecipients r ON
r.idMessage = m.idMessage
    AND r.idUserRecipient <> 2
WHERE m.idUserSender <> 2 
```

您当然可以参数化此查询以排除任何`idUser`

# android - 如何从同一活动中按钮上的 OnClickListener 内部获取 FragmentActivity 中的 TextView 引用

> ID：10816619
> 
> 赞同：1
> 
> 时间：2012-05-30T12:46:56.927
> 
> 标签：android, button, android-activity, textview, listener

让我解释一下，我有这个`Activity`，那里有 a`Button`和 a `TextView`。我必须为此按钮创建一个侦听器（不能是内部类或私有类），让我们调用`ButtonListener`. 我需要`TextView`从`Activity`内部更改`ButtonListener`. 我怎么做？

活动 -->`Button b, TextView t`

```
b.setOnClickListener(ButtonListener listener) 
```

listener --> `onClick()`{ //这里需要改变TextView }

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T13:21:18.540

```
public class YourActivity extends Activity {

ImageView    button     = null;
TextView     text       = null;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.yourlayoutxml);

    text       = (TextView)  findViewById(R.id.id_TextView);
    button     = (ImageView) findViewById(R.id.id_ImageView);

    button.setOnClickListener(new OnClickListener() 
    {
            @Override
            public void onClick(View v) 
            {
                    //here you can manage your TextView     
                    text.doSomething();
            }
      }                         );
}
} 
```

希望这有帮助。

# php - 警告：非法偏移类型 [CORE\Cake\Model\Model.php，第 2734 行] 在 PHP 中单击登录时出现

> ID：10816620
> 
> 赞同：2
> 
> 时间：2012-05-30T12:46:58.290
> 
> 标签：php, cakephp

我使用 Cake Php 创建了一个简单的登录表单。当我点击登录按钮时，会出现一个警告

```
Illegal offset type [CORE\Cake\Model\Model.php, line 2734 
```

我使用链接作为参考 [http://bakery.cakephp.org/articles/SeanCallan/2007/04/17/simple-form-authentication-in-1-2-xx](http://bakery.cakephp.org/articles/SeanCallan/2007/04/17/simple-form-authentication-in-1-2-x-x)

Login.ctp的代码

## 登录

```
<?php echo $this->Form->create('User', array('action' => 'login'));?>
    <?php echo $this->Form->input('username');?>
    <?php echo $this->Form->input('password');?>
    <?php echo $this->Form->submit('Login');?>
<?php echo $this->Form->end(); ?> 
```

2.模态文件

find(array('username' => $data['username'], 'password' => md5($data['password'])), array('id', 'username')); if(empty($user) == false) return $user['User']; 返回假；} } ?>

3.控制器文件

```
<?php 
App::uses('AppController', 'Controller');
class UsersController extends AppController
{
    var $name = "Users";
    var $helpers = array('Html', 'Form');
      var $components = array("Auth"); 
    function index()
    {

    }

    function beforeFilter()
    {
        $this->__validateLoginStatus();
    }

    function login()
    {
        if(empty($this->data) == false)
        {
            if(($user = $this->User->validateLogin($this->data['User'])) == true)
            {
                $this->Session->write('User', $user);
                $this->Session->setFlash('You\'ve successfully logged in.');
                $this->redirect('index');
                exit();
            }
            else
            {
                $this->Session->setFlash('Sorry, the information you\'ve entered is incorrect.');
                exit();
            }
        }
    }

    function logout()
    {
        $this->Session->destroy('user');
        $this->Session->setFlash('You\'ve successfully logged out.');
        $this->redirect('login');
    }

    function __validateLoginStatus()
    {
        if($this->action != 'login' && $this->action != 'logout')
        {
            if($this->Session->check('User') == false)
            {
                $this->redirect('login');
                $this->Session->setFlash('The URL you\'ve followed requires you login.');
            }
        }
    }

}

?> 
```

为什么会这样。我是新来的。PHP 聊天室中的一些开发人员建议我不要使用 Cake PHP。任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T13:05:13.843

非法偏移类型意味着您试图使用对象或数组来索引数组：

```
$x = stdClass;
$a = array(1,2,3,4);
$a[$x]; // illegal offset type 
```

检查您的代码，寻找您接受用户输入的可能位置（即使您认为它只是一个值，也可能是一组值）并将其用于某些只需要一个值的函数中。

如果 Cake 内部函数需要一个值并试图将其用作数组的偏移量，则会出现此消息。

## 观测值

我在您的代码中唯一注意到传递参数（而不是文字字符串值）的地方是：

```
$this->User->validateLogin($this->data['User'])) 
```

在 $this->data['User'] 上做一个**var_dump**看看里面有什么，也许它是一个数组，你应该只提取 $this->data['User']['id'] 我不知道，我没怎么玩过Cake。

# aptana - 如何在 Aptana Studio 3 中禁用烦人的点击声音？

> ID：10816626
> 
> 赞同：0
> 
> 时间：2012-05-30T12:47:22.013
> 
> 标签：aptana, aptana3

我在 Apatana Studio 3 中使用 PyDev，我注意到每当在项目目录中更新文件时（即刷新包资源管理器时），都会发出令人讨厌的虚拟点击声。由于我的项目生成文件的速度相当慢，因此每次调试时都会听到几声点击声。

那么，我该如何禁用它呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T14:24:24.097

这可能与 Eclipse 有关，而不是真正的 Aptana Studio 3（所以，看看：[如何在 Eclipse 中关闭哔声？](https://stackoverflow.com/questions/331757/how-to-turn-off-the-beep-sound-in-eclipse)）

# eclipse - JNDI 上下文中的 Jetty 绑定数据源

> ID：10816627
> 
> 赞同：3
> 
> 时间：2012-05-30T12:47:27.453
> 
> 标签：eclipse, jetty, datasource, jndi

我想以编程方式将 DataSource 对象绑定到（eclipse）码头的 JNDI 上下文。我需要用于测试目的。这是我现在拥有的一段代码：

```
server = new Server(SERVER_PORT);
webAppContext = new WebAppContext();
webAppContext.setResourceBase(".");
webAppContext.setContextPath("/" + SERVER_CONTEXT);
webAppContext.addEventListener(prepareServletContextListener());
webAppContext.addFilter(GuiceFilter.class, "/*", null);
webAppContext.addServlet(DefaultServlet.class, "/");
Resource r = new Resource(webAppContext,"jdbc/testDS",createDataSource());

server.setHandler(webAppContext);
server.start(); 
```

当然，与 Resource 的行不起作用。我不知道如何以编程方式绑定它以获得类似于：

```
<New id="DSTest" class="org.eclipse.jetty.plus.jndi.Resource">
 <Arg></Arg>
 <Arg>jdbc/DSTest</Arg>
 <Arg>
    <New class="com.mysql.jdbc.jdbc2.optional.MysqlConnectionPoolDataSource">
       <Set name="Url">jdbc:mysql://localhost:3306/databasename</Set>
       <Set name="User">user</Set>
       <Set name="Password">pass</Set>
    </New>
 </Arg>
</New> 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T09:01:48.313

您需要将定义的资源对象作为属性添加到服务器对象。以下应该有效：

```
Resource r = new Resource("jdbc/testDS",createDataSource());
server.setAttribute("myDs", r); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-11T12:50:51.353

我遇到了同样的问题，这是我解决它的方法：

```
 server = new Server(PORT);
    WebAppContext context = new WebAppContext();
    context.setContextPath(CONTEXT);
    context.setConfigurationClasses(new String[] { "org.eclipse.jetty.plus.webapp.PlusConfiguration",
            "org.eclipse.jetty.webapp.FragmentConfiguration" });
    // A filter needed by Guice, but this is independent
    context.addFilter(GuiceFilter.class, "/*", 0);
    PGSimpleDataSource simpleDataSource = new PGSimpleDataSource();
    simpleDataSource.setDatabaseName("db-name");
    simpleDataSource.setUser("user");
    simpleDataSource.setPassword("pwd");
    String jndiName = "jdbc/myDS";
    Resource resource = new Resource("java:comp/env/" + jndiName, simpleDataSource);
    server.setHandler(context);
    // an event listener (because I use Guice, but this is independent)
    GuiceServletConfig guiceServletConfig = new GuiceServletConfig();
    context.addEventListener(guiceServletConfig);
    server.start(); 
```

这需要具有以下附加库：

*   码头-jndi
*   码头加

我在 Embedded Jetty 7 (7.6.10.v20130312) 上测试了这段代码

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-11-14T21:54:36.857

这个话题很老，但我遇到了同样的问题。不幸的是，现有的答案没有提供任何解决方案。

当您创建一个`Resource`指定的实例时`DataSource`，当请求 JNDI 资源时，Jetty 将不会提供此实例。相反，构造函数`Resource`尝试将实例转换为某种“配方”（`javax.naming.Reference`准确地说），它告诉如何使用完全相同的内部结构构建新的配置实例。

它在基本类的情况下运行良好，但无法重新创建复杂的数据结构（`List<String>`在我的情况下它失败了）。所以你最终没有得到：

*   完全相同的实例（正如您对单例的期望）
*   实例的完全等价物（正如您期望的正常工作的 JNDI）

我已经实现了一个包装器，它允许提供在创建`Resource`.

```
import java.util.Hashtable;
import javax.naming.Context;
import javax.naming.Name;
import javax.naming.Reference;
import javax.naming.spi.ObjectFactory;

public class ExistingInstanceReference extends Reference implements ObjectFactory {

    private Object instance;

    private static final long serialVersionUID = -2718709718400909747L;

    public ExistingInstanceReference() {
        super(null);
    }

    public ExistingInstanceReference(Object instance) {
        super(instance.getClass().getName(), ExistingInstanceReference.class.getName(), null);
        this.instance = instance;
    }

    @Override
    public Object getObjectInstance(Object obj, Name name, Context nameCtx, Hashtable<?, ?> environment) throws Exception {
        if (obj == null) {
            return null;
        }
        ExistingInstanceReference reference = (ExistingInstanceReference) obj;
        return reference.instance;
    }

} 
```

请注意，此实现不符合`Serializable`接口，因为`instance`变量可能包含不可序列化的对象。

用法：

```
Resource r = new Resource(webAppContext, "jdbc/testDS", new ExistingInstanceReference(createDataSource())); 
```

请将此解决方案视为一种解决方法，因为真正的问题仍需在 Jetty 的源代码中修复。不幸的是，我没有时间追查这种不当行为的根源。

另外，我必须设置，因为 webapp 的类加载器在我的设置中`webAppContext.setParentLoaderPriority(true)`没有看到类。`ExistingInstanceReference`

# android - Android 谷歌地图在后台加载

> ID：10816642
> 
> 赞同：3
> 
> 时间：2012-05-30T12:48:08.343
> 
> 标签：android, google-maps

是否可以在后台加载谷歌地图？并且在加载时在带有进度条的操作栏中显示它？

现在我有一个 MapActivity，当我启动它需要一些时间。但我只在它持续几秒钟后看到黑屏......（这不会发生在我的 Galaxy Nexus 上，所以我想这与设备的速度有关......）

* * *

## 回答 #1

> 赞同：-3
> 
> 时间：2012-05-30T12:51:35.013

您可以使用

```
 AsyncTask<Uri, Void, ContactInfo> task = new AsyncTask<Uri, Void, ContactInfo>() {

            @Override
            protected ContactInfo doInBackground(Uri... uris) {

                         // here your code for loading maps
                return ;
            }

            @Override
            protected void onPostExecute(ContactInfo result) {

            }
        };

        task.execute(); 
```

# css - 使用 css 将文本环绕在 div 周围（在文本中间）

> ID：10816647
> 
> 赞同：5
> 
> 时间：2012-05-30T12:48:20.667
> 
> 标签：css, html, text, css-float

如何将文本包裹在 div 周围。使用 css 将 div 留在文本正文的中间？

草图：

```
text text text text 
text text text text 
text text text text 
text text text text 
+-------+ text text 
+       + text text 
+  div  + text text 
+       + text text 
+-------+ text text 
text text text text 
text text text text 
text text text text 
text text text text 
```

注意：从 HTML 的角度来看，div 位于文本之前。

```
<div></div> [... text...] 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-30T13:00:04.480

其他答案是正确的，因为您需要浮动`<div>`（例如`div { float: left; margin: 10px 0 10px 10px; }`，但是请记住，为了使`<div>`出现在您的内容*中间*，它必须*在内容本身*中。

当使用像这样的浮点数时，你必须记住你必须在你想要环绕它的内容`<div>` *之前插入右边。*所以，在这种情况下，有一段文本，插入`<div>`，然后再有几个段落。当您浮动 时`<div>`，它会出现在您的内容中间。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-30T12:56:23.023

你需要浮动你的div。例如，您可以像这样设置 div 的样式：

```
float:left;
margin:10px; //To leave a gap around the div 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-30T12:54:47.107

你需要的是`float property`. 试试下面这个例子：

```
.youDiv {
float: left;
} 
```

# mysql - Mysql分组第一最后一行

> ID：10816648
> 
> 赞同：0
> 
> 时间：2012-05-30T12:48:21.333
> 
> 标签：mysql

我有一个这样的数据库表：

```
id     date                     value    minute
1      20100201 00:00:01.909    xxx      0   
2      20100201 00:00:02.408    xxx      0
3      20100201 00:01:02.412    xxx      1 
4      20100201 00:01:02.909    xxx      1 
5      20100201 00:01:02.921    xxx      1   
6      20100201 00:01:02.955    xxx      1
7      20100201 00:02:01.903    xxx      2
8      20100201 00:02:25.332    xxx      2
9      20100201 00:03:12.003    xxx      3
10     20100201 00:04:12.003    xxx      4 
```

...

我希望结果是：

```
id    date                      value1   minute
1      20100201 00:00:01.909    xxx      0   
2      20100201 00:00:02.408    xxx      0
3      20100201 00:01:02.412    xxx      1
6      20100201 00:01:02.955    xxx      1
7      20100201 00:02:01.903    xxx      2
8      20100201 00:02:25.332    xxx      2
9      20100201 00:03:12.003    xxx      3 
```

我想查询它并返回每分钟的第一个和最后一个数字的 id，如果只有 1 条记录，则每分钟返回 1 条记录（所以上面的 id 为 1、2、3、6、7、8、9）。

我尝试使用按 id ASC 排序的 group - 按分钟分组，但它似乎在分组后排序，所以这不起作用。

有人有什么想法吗？我就不信做不到！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T13:27:11.487

试试这个查询 -

```
SELECT t1.* FROM test_table t1
  JOIN (
    SELECT MIN(id) min_id, MAX(id) max_id FROM test_table
      GROUP BY TIME_TO_SEC(TIME(date)) DIV 60) t2
  ON t1.id = t2.min_id OR t1.id = t2.max_id 
```

如果`date`字段不是 DATETIME 或 TIMESTAMP，则应修改 GROUP BY。另外，我建议您按确切的分钟分组（例如 - 按年分组，day_of_year，minute_of_day）。

# sql-server-2008 - 我可能通过同时运行 SELECT 和 INSERT 和 SELECT 来锁定我的 SQL Server 表

> ID：10816653
> 
> 赞同：2
> 
> 时间：2012-05-30T12:48:32.633
> 
> 标签：sql-server-2008, sql-server-2008-r2

我在 SQL Server 2008 R2 中有一张表，其中包含不同公司的“职位”。

我有一个函数 GET_KEY，它通过在表上执行 SELECT MAX 创建一个位置编号。[我不能使用身份增量，因为职位编号需要是特定公司的第一个可用编号]

```
SELECT @v_position_no = max(POSITION_NO) + 0.01 
FROM POSITIONS WHERE COMPANY_NO = @p_company_no 
```

我有一个复制 position 的功能`COPY_POS`。

我想复制现有职位两次，但要为每个职位分配一个适当的职位编号。

我跑`GET_KEY`，然后`COPY_POS`，然后`GET_KEY`，然后`COPY_POS`

但是，职位表会锁定。我几乎可以肯定（这是合乎逻辑的）这是因为`GET_KEY`和之间存在冲突`COPY_POS`。[只有当我尝试并`GET_KEY`连续`COPY_POS`两次时才会出现此问题]

* * *

**我试过的...**

1.  我尝试将每个`GET_KEY`and包含`COPY_POS`在`BEGIN TRAN`and中`COMMIT TRAN`，但这没有用。

2.  整个存储过程都包含在一个`BEGIN TRY`和`END TRY`我尝试删除它，但这也没有工作......

有没有人有任何想法？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T12:57:32.707

只需`WITH (nolock)`在 Select 语句中添加一个！

```
SELECT @v_position_no = max(POSITION_NO) + 0.01 
FROM POSITIONS WITH (nolock) WHERE COMPANY_NO = @p_company_no 
```

# javascript - 在Javascript中从另一行的属性设置一行的属性（onClick）

> ID：10816654
> 
> 赞同：0
> 
> 时间：2012-05-30T12:48:35.683
> 
> 标签：javascript, attributes, onclick, copy

我有一个小问题。我需要复制一行的属性，并将它们放入我创建的新行中。

我要复制的确切属性是 onClick 属性

我试过这样做：

```
newRow.setAttribute("onClick",oldRow.getAttribute("onClick"));
or
newRow.onClick = getAttribute("onClick"); 
```

当我发出警报以查看每一行的属性时，新行的警报不会返回任何内容，而旧行的警报会返回如下内容：

```
function onClick()
{
    addTable(this,7,Project_1,....  //Over 100 lines of data 
} 
```

如何复制属性？先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T13:10:51.773

一个演示：http: [//jsfiddle.net/6gzzp/](http://jsfiddle.net/6gzzp/)

相关代码：

```
document.getElementById("two").onclick = document.getElementById("one").onclick;​ 
```

# c++ - Qt 创建者 - `qMain` 的多重定义错误

> ID：10816655
> 
> 赞同：2
> 
> 时间：2012-05-30T12:48:47.383
> 
> 标签：c++, qt

我开始使用 QT creator 制作 GUI 来完成我的作业，但是我遇到了这个错误，我无法找到它的原因，我也无法理解它的含义。我想它两次看到我的主要功能，但我不知道为什么......请帮助我修复这个错误：

错误：

```
Makefile.Debug:155: warning: overriding commands for target `debug/main.o'
    Makefile.Debug:142: warning: ignoring old commands for target `debug/main.o'
    debug/main.o: In function `Z5qMainiPPc':
    D:\c++\Labs\GUI_r/../../../info/qt/Desktop/Qt/4.8.1/mingw/include/QtGui/qwidget.h:494: multiple definition of `qMain(int, char**)'
    debug/main.o:D:\c++\Labs\GUI_r/main.cpp:7: first defined here
    collect2: ld returned 1 exit status 
```

代码：

```
#include <QtGui/QApplication>
#include "mainwindow.h"
#include "controller.h"
#include "StudentRepository.h"

int main(int argc, char *argv[])
{
    QApplication a(argc, argv);

    StudentRepository *stre = new StudentRepository();
    Controller *c = new Controller(stre);
    MainWindow w(c);
    w.show();

    return a.exec();
} 
```

编辑：删除长代码 - 不是错误的原因。检查答案它很有用。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-30T13:26:45.510

该链接错误的原因是代表 QT 创建者的 awkawrd 行为。我在 projectName.pro -

```
QT       +=    core gui

TARGET = GUI_r
TEMPLATE = app

SOURCES += main.cpp\
        mainwindow.cpp \
    main.cpp \                   /////// Double call of main.cpp
    StudentRepository.cpp \
    controller.cpp

HEADERS  += mainwindow.h \
    controller.h \
    StudentRepository.h \
Student.h \
ui_mainwindow.h \        /////Double call of ui_mainwindow.h 
ui_mainwindow.h

FORMS    += mainwindow.ui 
```

谢谢，我希望这篇文章对 QTcreator 的其他新用户有用。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-30T12:51:21.977

也许您的项目包含另一个带有 main.js 的源文件。某处文件重复。检查 .pro 文件中的“SOURCES =”和 main.cpp。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-30T12:54:18.963

每个程序只能有**一个** `QApplication`！

检查您的类（Controller、StudentRepository、MainWindow）并确保它们也没有声明`QApplication`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-30T12:55:34.793

它确实看到了 的两个定义`qMain`，而不是您的主要定义。

您可能已经获取了一个示例程序并通过添加代码对其进行了修改。重新创建这些步骤并查看它何时停止工作。编写代码时，请尽可能多地进行编译，以便在引入错误后立即发现这些错误。

# doctrine - 学说：与连接表的多对多关系：如何添加 WHERE 条件

> ID：10816657
> 
> 赞同：2
> 
> 时间：2012-05-30T12:48:56.637
> 
> 标签：doctrine, doctrine-orm, many-to-many, conditional-statements

我有三张桌子：

```
Clients: (id, name, ...)

Files: (id, filename, type, data) 
```

并加入表：

```
Clients2Files (id, id_clients, id_files, created_at, deleted_at) 
```

在 php 类客户端中，我想访问所有客户端的文件，但只能访问尚未删除的文件（在 sql 中，WHERE deleted_at IS NULL）

现在我有这样的代码（在实体类客户端中），它选择所有（甚至已删除）文件：

```
/**                                                                         
* @ManyToMany(targetEntity="File")                                          
* @JoinTable(name="Clients2Files",                                  
*      joinColumns={@JoinColumn(name="id_clients", referencedColumnName="id")},
*      inverseJoinColumns={@JoinColumn(name="id_files", referencedColumnName="id")}
*      )                                                                    
*/                                                                          
private $files; 
```

我怎样才能`WHERE deleted_at IS NULL`在这个学说代码中添加条件？仅选择未“删除”的文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T13:02:38.033

您添加的注释实际上并没有“选择”任何东西。他们所做的只是告诉 Doctrine 您的对象及其关系。你想做的是：

```
$qb = $em->createQueryBuilder();
$qb->select('clients, files')
   ->from('Clients', 'clients')
   ->join('c.files', 'files')
   ->where('files.deleted_at IS NULL'); 
```

如果您发现自己经常这样做，并且正在使用 Doctrine 2.2+，您可以查看过滤器： http: [//docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/filters.html](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/filters.html)

# php - Symfony 2：儿童班

> ID：10816664
> 
> 赞同：1
> 
> 时间：2012-05-30T12:49:14.350
> 
> 标签：php, class, symfony

我正在尝试使用 2 个类：`Activity`和`Mandate`. A`Mandate`是一个`Activity`（所以一个孩子）

我想通过单击带有授权 ID 的链接来删除授权。

所以这是我的行动：

```
public function eraseAction($id = null)
{
    $em = $this->container->get('doctrine')->getEntityManager();

    if (isset($id)) 
    {
        // existing user edition : let's load its data
        $mandate = $em->find('MyAppToolsBundle:Activity', $id);

        if (!$mandate)
        {
            $message = 'Error while deleting the record';
        }
        else
        {
        $mandate->setErase(true);
        }
    }
    else
    {
        $message = 'erreur';
    }

    return $this->container->get('templating')->renderResponse('MyAppToolsBundle:Admin:mandate.html.twig',array(
    'message' => $message));    
} 
```

我的问题是我只能用他的父 Activity 搜索我的任务（因为我在任务中没有属性 ID）但是 setErase 方法仅用于任务，所以我有一个错误..

我必须通过在 Activity 中查找来搜索任务，但是我无法使用仅在 Mandate 类上创建的方法。

这是我的课堂活动：

```
 <?php
    namespace MyApp\ToolsBundle\Entity;
    use Doctrine\ORM\Mapping as ORM;
    use Symfony\Component\Validator\Constraints as Assert;

    /**
     * @ORM\Entity
     */
    class Activity
    {
        /**
         * @ORM\GeneratedValue
         * @ORM\Id
         * @ORM\Column(type="integer")
         */
        private $id;

        /**
         * @ORM\OneToMany(targetEntity="MyApp\ToolsBundle\Entity\Hour", mappedBy="activity")
         */
         protected $hour;

        /**
         * @ORM\Column(type="string",length="255")
         * @Assert\NotBlank()
         * @Assert\MinLength(2)
         */    
        private $name;

        /**
         * @ORM\Column(type="string",length="20")
         * @Assert\NotBlank()
         */    
        private $color;

        /**
         * Get id
         *
         * @return integer 
         */
        public function getId()
        {
            return $this->id;
        }

        /**
         * Set name
         *
         * @param string $name
         */
        public function setName($name)
        {
            $this->name = $name;
        }

        /**
         * Get name
         *
         * @return string 
         */
        public function getName()
        {
            return $this->name;
        }

        /**
         * Set color
         *
         * @param string $color
         */
        public function setColor($color)
        {
            $this->color = $color;
        }

        /**
         * Get color
         *
         * @return string 
         */
        public function getColor()
        {
            return $this->color;
        }
        public function __construct()
        {
            $this->hours = new \Doctrine\Common\Collections\ArrayCollection();
        }

        /**
         * Add hours
         *
         * @param Furter\OutilGestionBundle\Entity\Hour $hours
         */
        public function addHour(\MyApp\ToolsBundle\Entity\Hour $hours)
        {
            $this->hours[] = $hours;
        }

        /**
         * Get hours
         *
         * @return Doctrine\Common\Collections\Collection 
         */
        public function getHours()
        {
            return $this->hours;
        }

        /**
         * Get hour
         *
         * @return Doctrine\Common\Collections\Collection 
         */
        public function getHour()
        {
            return $this->hour;
        }
    } 
```

还有我的任务课：

```
<?php
namespace MyApp\ToolsBundle\Entity;
use Doctrine\ORM\Mapping as ORM;
use Symfony\Component\Validator\Constraints as Assert;

/**
 * @ORM\Entity
 */
class Mandate extends Activity
{

    /**
    * @ORM\Column(type="date")
    */
    private $startdate;

    /**
    * @ORM\Column(type="date")
    */
    private $enddate;

    /**
    * @ORM\Column(type="boolean")
    */
    private $erase = 0;

    /**
     * @ORM\OneToMany(targetEntity="MyApp\ToolsBundle\Entity\Hour", mappedBy="activity")
     */
     protected $hour;

    /**
     * @ORM\OneToOne(targetEntity="MyApp\ToolsBundle\Entity\Client")
     */
    private $client;

    /**
     * Set startdate
     *
     * @param date $startdate
     */
    public function setStartdate($startdate)
    {
        $this->startdate = $startdate;
    }

    /**
     * Get startdate
     *
     * @return date 
     */
    public function getStartdate()
    {
        return $this->startdate;
    }

    /**
     * Set enddate
     *
     * @param date $enddate
     */
    public function setEnddate($enddate)
    {
        $this->enddate = $enddate;
    }

    /**
     * Get enddate
     *
     * @return date 
     */
    public function getEnddate()
    {
        return $this->enddate;
    }
    /**
     * @var MyApp\ToolsBundle\Entity\Hour
     */
    private $hours;

    public function __construct()
    {
        $this->hours = new \Doctrine\Common\Collections\ArrayCollection();
    }

    /**
     * Add hours
     *
     * @param MyApp\ToolsBundle\Entity\Hour $hours
     */
    public function addHour(\MyApp\ToolsBundle\Entity\Hour $hours)
    {
        $this->hours[] = $hours;
    }

    /**
     * Get hours
     *
     * @return Doctrine\Common\Collections\Collection 
     */
    public function getHours()
    {
        return $this->hours;
    }

    /**
     * Get hour
     *
     * @return Doctrine\Common\Collections\Collection 
     */
    public function getHour()
    {
        return $this->hour;
    }

    /**
     * Set client
     *
     * @param MyApp\ToolsBundle\Entity\Client $client
     */
    public function setClient(\MyApp\ToolsBundle\Entity\Client $client)
    {
        $this->client = $client;
    }

    /**
     * Get client
     *
     * @return MyApp\ToolsBundle\Entity\Client 
     */
    public function getClient()
    {
        return $this->client;
    }

    /**
     * Set erase
     *
     * @param boolean $erase
     */
    public function setErase($erase)
    {
        $this->erase = $erase;
    }

    /**
     * Get erase
     *
     * @return boolean 
     */
    public function getErase()
    {
        return $this->erase;
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T22:23:15.267

谢谢您的帮助 ！我终于找到了我的问题！

我不知道你必须穿上`@MappedSuperclass`超类而不是 Entity ！

它的工作！

多么美好的一天！

# c# - Worksheet.Name 导致 OutOfMemoryException

> ID：10816670
> 
> 赞同：7
> 
> 时间：2012-05-30T12:49:32.077
> 
> 标签：c#, excel, vsto, add-in, out-of-memory

# .Net4 C# VSTO4 Excel 插件：

以下函数被非常频繁地调用，比如说每秒：

```
 /// <summary>
    /// Gets a unique identifier string of for  the worksheet in the format [WorkbookName]WorksheetName
    /// </summary>
    /// <param name="workbook">The workbook.</param>
    /// <param name="worksheet">The worksheet.</param>
    /// <returns>
    /// A unique worksheet identifier string, or an empty string.
    /// </returns>
    public static string GetWorksheetUniqueIdentifier(Workbook workbook, dynamic worksheet)
    {
        if (workbook == null) return string.Empty;
        if (worksheet == null) return string.Empty;//Note: Worksheet can also be a diagram!

        return string.Format("[{0}]{1}", workbook.Name, worksheet.Name);
    } 
```

**过了一会儿，我收到以下异常：**

```
System.OutOfMemoryException
   at System.Collections.Generic.Dictionary`2.Resize()
   at System.Collections.Generic.Dictionary`2.Insert(TKey key, TValue value, Boolean add)
   at Microsoft.CSharp.RuntimeBinder.Semantics.SYMTBL.InsertChildNoGrow(Symbol child)
   at Microsoft.CSharp.RuntimeBinder.Semantics.SymFactoryBase.newBasicSym(SYMKIND kind, Name name, ParentSymbol parent)
   at Microsoft.CSharp.RuntimeBinder.Semantics.SymFactory.CreateLocalVar(Name name, ParentSymbol parent, CType type)
   at Microsoft.CSharp.RuntimeBinder.RuntimeBinder.PopulateLocalScope(DynamicMetaObjectBinder payload, Scope pScope, ArgumentObject[] arguments, IEnumerable`1 parameterExpressions, Dictionary`2 dictionary)
   at Microsoft.CSharp.RuntimeBinder.RuntimeBinder.BindCore(DynamicMetaObjectBinder payload, IEnumerable`1 parameters, DynamicMetaObject[] args, DynamicMetaObject& deferredBinding)
   at Microsoft.CSharp.RuntimeBinder.RuntimeBinder.Bind(DynamicMetaObjectBinder payload, IEnumerable`1 parameters, DynamicMetaObject[] args, DynamicMetaObject& deferredBinding)
   at Microsoft.CSharp.RuntimeBinder.BinderHelper.Bind(DynamicMetaObjectBinder action, RuntimeBinder binder, IEnumerable`1 args, IEnumerable`1 arginfos, DynamicMetaObject onBindingError)
   at Microsoft.CSharp.RuntimeBinder.CSharpInvokeMemberBinder.FallbackInvokeMember(DynamicMetaObject target, DynamicMetaObject[] args, DynamicMetaObject errorSuggestion)
   at System.Dynamic.DynamicMetaObject.BindInvokeMember(InvokeMemberBinder binder, DynamicMetaObject[] args)
   at System.Dynamic.InvokeMemberBinder.Bind(DynamicMetaObject target, DynamicMetaObject[] args)
   at System.Dynamic.DynamicMetaObjectBinder.Bind(Object[] args, ReadOnlyCollection`1 parameters, LabelTarget returnLabel)
   at System.Runtime.CompilerServices.CallSiteBinder.BindCore[T](CallSite`1 site, Object[] args)
   at System.Dynamic.UpdateDelegates.UpdateAndExecute3[T0,T1,T2,TRet](CallSite site, T0 arg0, T1 arg1, T2 arg2)
   at CallSite.Target(Closure , CallSite , Object , Object )
   at TestAddIn.ExcelAccessor.GetWorksheetUniqueIdentifier(Workbook workbook, Object worksheet)
   at TestAddIn.ExcelAccessor.GetCurrentWorksheetUniqueIdentifier()
   at TestAddIn.ExcelAccessor.timerExcelObserver_Tick(Object sender, EventArgs e)-------------------------------------------------------------------------------------------------------- 
```

调用代码是：

```
 private static Timer timerExcelObserver = new Timer();

...

  timerExcelObserver.Tick += new EventHandler(this.timerExcelObserver_Tick);
  timerExcelObserver.Interval = 1000;
  timerExcelObserver.Start();

...

  private void timerExcelObserver_Tick(object sender, EventArgs e)
  { 
    ...
    var updatedWorksheetIdentifierString = GetCurrentWorksheetUniqueIdentifier();
    ...
  }

  public static string GetCurrentWorksheetUniqueIdentifier()
  {
      return GetWorksheetUniqueIdentifier(ExcelApplication.ActiveWorkbook, ExcelApplication.ActiveSheet);
  } 
```

* * *

**我不知道为什么我会得到一个例外！**

在 GetWorksheetUniqueIdentifier 中进行“使用”可能会有所帮助吗？

```
using(worksheet)
{
   return string.Format("[{0}]{1}", workbook.Name, worksheet.Name);
} 
```

有人有答案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T23:15:32.913

尝试显式释放 COM 对象：

```
public static string GetCurrentWorksheetUniqueIdentifier()
{
    var workbook = ExcelApplication.ActiveWorkbook;
    var worksheet = ExcelApplication.ActiveSheet;

    try
    {
        return GetWorksheetUniqueIdentifier(workbook, worksheet);
    }
    finally
    {
        if (workbook != null &&
            Marshal.IsComObject(workbook))
            Marshal.ReleaseComObject(workbook);

        if (worksheet != null && 
            Marshal.IsComObject(worksheet))
            Marshal.ReleaseComObject(worksheet);
    }
} 
```

众所周知，这可以修复某些与 Office 相关的方案中的内存问题。

# stored-procedures - 在 Crystal Reports 中使用 SQL 视图作为数据源？

> ID：10816672
> 
> 赞同：1
> 
> 时间：2012-05-30T12:49:38.680
> 
> 标签：stored-procedures, view, crystal-reports, datasource

我在我的应用程序中使用 Crystal Reports。现在，我在我的 SQL Server 数据库中创建了一个 SQL 视图。我可以将此视图用作 Crystal Reports 的数据源吗？

我知道我们可以使用存储过程作为 Crystal Reports 的数据源，但我不知道我们可以使用视图作为数据源。

任何人都可以给我一些关于相同的想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T13:39:56.763

在 SQL Server 管理器中：

*   确保正确设置了授权（可能是 SELECT 到 PUBLIC）

在水晶报表中：

*   选择数据库 | 数据库专家...
*   展开所需的数据库节点
*   展开“查看”节点
*   选择所需的视图

您可以将视图链接到其他视图，也可以链接到表。

# asp.net - 格式化 GridView

> ID：10816674
> 
> 赞同：0
> 
> 时间：2012-05-30T12:49:55.030
> 
> 标签：asp.net, vb.net, gridview, format

我有一个带有自动生成列的gridview，我以编程方式设置了我想格式化列宽。这是我在后面的代码中为我的 gridview 编写的代码...

```
If Not Page.IsPostBack Then
    Dim budgetTable As New DataTable("Budgets")

    budgetTable.Columns.Add("Approval Date", GetType(Date))
    budgetTable.Columns.Add("Total Amount", GetType(String))
    budgetTable.Columns.Add("Comments", GetType(String))
    budgetTable.Columns.Add("Initials", GetType(String))

    Try
        For i As Integer = 0 To 0
            Dim tableRow As DataRow = budgetTable.NewRow()
            tableRow("Approval Date") = Date.Today
            tableRow("Total Amount") = ""
            tableRow("Comments") = ""
            tableRow("Initials") = ""
            budgetTable.Rows.Add (tableRow)
        Next
        Session("BudgetsTable") = budgetTable
        BindData()
    Catch ex As Exception

    End Try
End If 
```

这是html端的gridview：

```
<asp:GridView ID="gvOLIAdj" runat="server" CssClass="td8" CellPadding="4" ForeColor="#333333" PageSize="2" ViewStateMode="Enabled">
    <AlternatingRowStyle BackColor="White" ForeColor="#284775" />

    <Columns>
        <asp:CommandField EditText="Add" ShowEditButton="True" />
    </Columns>

    <EditRowStyle BackColor="#999999" />
    <FooterStyle BackColor="#003399" Font-Bold="True" ForeColor="White" />
    <HeaderStyle BackColor="#003399" Font-Bold="True" ForeColor="White" />
    <RowStyle BackColor="#F7F6F3" ForeColor="#333333" />
    <SelectedRowStyle BackColor="#E2DED6" Font-Bold="True" ForeColor="#333333" />
    <SortedAscendingCellStyle BackColor="#E9E7E2" />
    <SortedAscendingHeaderStyle BackColor="#506C8C" />
    <SortedDescendingCellStyle BackColor="#FFFDF8" />
    <SortedDescendingHeaderStyle BackColor="#6F8DAE" />
</asp:GridView> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T13:28:50.450

**- 编辑 -**

（在阅读了 OP 的评论后删除了旧内容，因为这无济于事）

尝试使用 RowDataBound 事件来设置宽度（或任何其他属性）。

未经测试的代码：

```
Protected Sub gvOLIAdj_RowDataBound(ByVal sender As Object, ByVal e As System.Web.UI.WebControls.GridViewRowEventArgs) Handles gvOLIAdj.RowDataBound
    If (e.Row.RowType = DataControlRowType.Header) Then
        e.Row.Cells(0).Width = 100  '100 pixels
        e.Row.Cells(1).Width = 50
        e.Row.Cells(2).Width = 200
        e.Row.Cells(3).Width = 150
    End If
End Sub 
```

如果上述方法不起作用，请尝试将其设置为`e.Row.RowType = DataControlRowType.DataRow`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T13:32:50.563

我会使用样式表来完成它：

```
.td8 td:nth-child(3) {
    width: 100px;
} 
```

假设您希望第三列为 100px。这是一个 CSS3 选项，因此它只适用于较新的浏览器。

**编辑：** 阅读您对@Pradeep Kumar 所做的评论，您可能过早将宽度应用于列。`Page_PreRender`在绑定和创建 GridView 之后，尝试在事件中进行这些更改。**请记住，在**RowItemCreated 事件完全完成之前，GridView 中的列不存在。

# liferay - 使用 IN 运算符的 Liferay 自定义 sql

> ID：10816676
> 
> 赞同：4
> 
> 时间：2012-05-30T12:50:09.217
> 
> 标签：liferay

我正在使用 Liferay 6.1、Tomcat 和 MySQL。我有一个用于列表 portlet 的 custom-sql 语句。custom-sql 使用两个参数：groupId 数组和结果限制。

```
SELECT
count(articleId) as count,
...
FROM comments
WHERE groupId IN (?)
GROUP BY articleId
ORDER BY count DESC 
LIMIT 0, ? 
```

我的 FinderImpl 类有这个方法：

```
 public List<Comment> findByMostCommented(String groupIds, long maxItems) {

    Session session = null;
    session = openSession();

    String sql = CustomSQLUtil.get(FIND_MOST_COMMENTS);

    SQLQuery query = session.createSQLQuery(sql);
    query.addEntity("Comment", CommentImpl.class);

    QueryPos queryPos = QueryPos.getInstance(query);
    queryPos.add(groupIds);
    queryPos.add(maxItems);

    List<Comment> queryResult = query.list();

    return queryResult;
} 
```

这将返回 0 个结果。如果我删除 WHERE IN()，它会起作用。

IN 是一个有效的运算符吗？如果没有，如何在不同的组内搜索？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-30T14:51:18.910

也许hibernate正在引用您的groupIds字符串（大概是形式，`"1,2,3,4"`当hibernate将其转换为sql时，它会为您加上引号？

您可能想尝试这样的事情（来自 Liferay 本身）：

```
String sql = CustomSQLUtil.get(FIND_BY_C_C);

sql = StringUtil.replace(sql, "[$GROUP_IDS$]", groupIds); 
```

并包含`([$GROUP_IDS$])`在`(?)`你的 SQL 中

# javascript - 带有外部 src 加载的动态脚本

> ID：10816678
> 
> 赞同：1
> 
> 时间：2012-05-30T12:50:31.017
> 
> 标签：javascript

有时我在加载一些广告脚本时遇到问题。如果外部服务器没有响应，则整个页面等待响应并停止加载。我怎样才能告诉那些问题脚本在之后开始执行：

1.  整个页面被加载。
2.  加载所有其他脚本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T12:52:30.490

使用 javascript 声明的 DEFER 属性：

```
<script src="script.js" type="text/javascript" defer="defer"></script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T12:54:44.133

你需要推迟你的脚本。这将允许在下载此脚本时加载页面的其余部分。

这是如何做到的：

```
<script src="yourscript.js" defer="defer" type="text/javascript"></script> 
```

更多阅读 - [http://www.websiteoptimization.com/speed/tweak/defer/](http://www.websiteoptimization.com/speed/tweak/defer/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T12:56:07.383

使用`defer`并不能保证它会延迟加载和运行。您可以控制希望此脚本开始加载和执行的确切时间，方法是将其动态添加到页面，方法是将`<script>`以下内容放在您要加载和运行的所有其他内容之后：

```
var head=document.getElementsByTagName('head')[0]
var script=document.createElement('script')
script.setAttribute('type', 'text/javascript')
script.setAttribute('src', "http://your-script.com/address-here.js")
head.appendChild(script) 
```

# java - 为什么文件系统存储比 SQL 数据库快

> ID：10816681
> 
> 赞同：4
> 
> 时间：2012-05-30T12:50:39.793
> 
> 标签：java, mysql, post, filesystems, storage

扩展[这个线程](https://stackoverflow.com/questions/522957/what-is-the-best-format-to-store-images-in-a-database/522983)- 我只想知道为什么从文件系统而不是 MySQL 数据库中检索文件更快。如果要对这两者进行基准测试，看看哪一个会在 10 分钟内检索到最多的数据（多种类型的数据）——哪一个会赢？

如果文件系统真的更快，那么为什么不将所有内容存储在文件系统中并用 csv 或 xml 替换数据库呢？

**编辑1：**

[我为 java 的备用存储选项](https://stackoverflow.com/questions/41233/java-and-sqlite)找到了一个很好的资源

**编辑2：**

我正在寻找具有 SQL 数据库服务器引擎（或至少其中一些）功能的 Java API/Jar，它使用 XML 进行数据存储（最好）。如果您知道什么，请在下面发表评论。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-30T12:54:01.063

归根结底，数据库***只是***将数据存储在文件系统中。除了原始数据之外，所有**有用**的东西都让您决定使用数据库。

如果您可以使用 CSV 复制数据库系统的功能、可伸缩性、稳健性、完整性等，并且*仍然*使其比关系数据库执行得更快，那么是的，我建议您按照自己的方式进行操作。

不过，你需要几年的时间才能到达那里。

当然，关系系统并不是存储数据的唯一方式。有面向对象的数据库系统（[db4o](http://www.db4o.com/)、[InterSystems Cache](http://www.intersystems.com/cache/)）和基于文档的系统（[RavenDB](http://ravendb.net/)）。

性能也与您正在使用的数据的样式和数量以及您打算如何处理它有关——我什至不打算讨论这个问题，它太开放了。

我也不会开始下面的讨论：如果内存真的比文件系统快，为什么不把所有东西都存储在内存中呢？:-)

这似乎也类似于我很久以前回答的另一个问题：

[C# 真的比 C++ 慢吗？](https://stackoverflow.com/questions/5326269/is-c-sharp-really-slower-than-say-c/5326301#5326301)

基本上，事情并不总是*仅仅*为了性能而做的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-30T12:54:18.537

MySQL 使用文件系统与计算机上的其他所有内容相同。要检索单个数据或数据表，没有比直接从文件系统更快的方法了。MySQL 只是添加到该文件系统拉取的一小部分开销。

如果您需要进行一些智能选择、匹配某些行或过滤该数据，MySQL 将比大多数其他选项更快地做到这一点。数据库服务器为您提供文件系统无法提供的计算和数据操作能力。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T13:05:21.907

当您拥有混合/结构化数据时，DBMS 是唯一的解决方案。例如。尝试将所有客户的姓名、姓氏和国家/地区存储到您的数据库中，但仅限于 1981 年出生并居住在罗马的客户。如果您将这些数据保存到文件系统上的文件中，如何在不扫描所有文件的情况下轻松获取所需数据，以及如何加入返回的数据？

DBMS 给您的远不止这些。许多 DBMS 将数据存储到文件中。

这个抽象层将使您以一种非常容易、标准和结构化的方式检索数据。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-07-26T16:25:42.357

不同之处在于所需数据的位置。

在文件系统中，定位所需数据意味着搜索所有现有数据，直到找到为止。

数据库提供索引，无论数据量如何，几乎可以立即（在约 12 次比较内）找到所需的数据。

我们想要的是一个索引文件系统——幸运的是，我们拥有它们。它们被称为数据库。

# restlet - 我可以在 Restlet 框架中关闭注销吗？

> ID：10816684
> 
> 赞同：2
> 
> 时间：2012-05-30T12:50:51.317
> 
> 标签：restlet, restlet-2.0

我有一些使用 Restlet 框架的代码。它正在将一个错误写入我的 log4j 日志文件：

```
2012-05-30 12:16:42,169 3278917 ERROR [STDERR] (Thread-97:) 30-May-2012 12:16:42 org.restlet.engine.http.connector.HttpClientHelper start
INFO: Starting the default HTTP client 
```

有什么办法可以关闭此日志记录吗？我看到有一个`Client.getLogger()`，但我看不到使用它来关闭注销的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T07:53:13.567

您可以依赖常规 Java 日志记录配置 (java.util.logging)。Restlet Framework 提供了一种以编程方式调整这些属性的简单方法。例如调用：

```
org.restlet.engine.Engine.setLogLevel(Level.OFF); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T22:21:20.680

嗨，它可能有点晚了，但对我来说，下面的代码做到了：

```
ClientResource resource = new ClientResource();
resource.getLogger().setLevel(Level.WARNING); //<-- important 
```

我省略了资源配置和执行，因为它们并不重要；-)

# javascript - 更改 JavaScript 并删除旧的

> ID：10816687
> 
> 赞同：0
> 
> 时间：2012-05-30T12:51:02.453
> 
> 标签：javascript, jquery, html

在我的 HTML 头中，我包含了这个脚本：

```
<script id="mode" type="text/javascript" src="article.js"></script> 
```

通过单击按钮，我想将脚本的源更改为customers.js，使其看起来像这样：

```
<script id="mode" type="text/javascript" src="customers.js"></script> 
```

关键是我不想再将 article.js 包含在我的页面中，所以我不能只使用`.append()`.

因此，单击文章按钮 ->**仅**包含 article.js，单击客户按钮 ->**仅**包含 customers.js。

我试图用这种方式用 jQuery 解决这个问题，但我似乎没有工作......：

```
$("#btArticle").click(function(){
  $("#mode").attr("src","article.js");
});

$("#btCustomers").click(function(){
  $("#mode").attr("src","customers.js");
}); 
```

你知道我的错误在哪里吗？

**更新：** customers.js 和 article.js 中有同名的方法。所以它们都有一个 onSave() 方法，当我之前单击客户按钮时，我希望执行customers.js 的onSave() 方法，而不是articles.js 中的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T12:53:29.900

> 关键是我不想再将 article.js 包含在我的页面中，所以我不能只使用`.append()`.

一旦脚本被下载和评估，它留下的任何东西都会保留下来，除非明确删除；它们没有链接到`script`元素本身，删除它不会对它们产生任何影响。

摆脱`article.js`周围的东西的唯一方法是删除或覆盖它创建和保留的每一个东西。

具体例子：

```
// article.js
var foo = "bar";
jQuery(function($) {
    $(".stuff").click(function() {
        alert("You clicked stuff!");
    });
}); 
```

如果`article.js`处理了上面列出的内容，您可以删除`script`加载它的元素，这**不会**影响`foo`全局变量或它连接的事件处理程序。

如果您想拥有可以卸载的脚本，请让他们使用带有单个全局符号的模块模式，他们通过分配给属性 on 来添加`window`，例如：

```
// article.js
window.articleScript = (function() {
    var foo = "bar";
    jQuery(function($) {
        $(".stuff").bind("click.article", function() {
            alert("You clicked stuff!");
        });
    });

    function remove() {
        $(".stuff").unbind("click.article");
        try {
            delete window.articleScript;
        }
        catch (e) { // Early IEs throw incorrectly on the above
            window.articleScript = undefined;
        }
    }

    return {
        remove: remove
    };
})(); 
```

然后，您可以通过执行以下操作将其删除：

```
articleScript.remove(); 
```

* * *

重新评论您对该问题的评论：

> 也许我应该提到两个文件中都有同名的方法。

如果你有全局函数声明，`customers.js`它使用与全局函数声明相同的名称`articles.js`，当你加载时`customers.js`，它将替换那些函数。

所以如果你有这个`articles.js`：

```
function foo() {
    alert("Articles!");
} 
```

...这在`customers.js`：

```
function foo() {
    alert("Customers!");
} 
```

你有一个按钮：

```
<input type="button" onclick="foo();" value="Foo"> 
```

当您加载了 just`articles.js`和 not`customers.js`时，单击该按钮会为您提供“文章！”。如果您然后加载`customers.js`，单击按钮将为您提供“客户！”。

这是有效的，因为事件处理程序*调用* `foo()`，但事件处理程序本身*不是* `foo`。该`onclick`属性为您创建一个隐藏的事件处理程序。等效的 jQuery 将是：

```
$("input[type='button'][value='Foo']").click(function() {
    foo();
}); 
```

请注意，只是做`.click(foo)`会做一些非常不同的事情：它将连接当时指向的函数*作为*`foo`事件处理程序。即使您稍后更改指向的内容（通过加载），也不会改变旧函数作为处理程序连接的事实。*`foo``customers.js`*

 *FWIW，从问题和您的评论来看，我想我建议您坐下来查看您针对此页面/应用程序的策略。所有这些代码的进出交换似乎都是一个设计问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T12:53:53.817

您实际上并没有加载和运行相应的脚本，您只是更改了该标签的源代码。用于`.getScript()`加载和运行相应的 JavaScript 文件：

[http://api.jquery.com/jQuery.getScript/](http://api.jquery.com/jQuery.getScript/)*

# c++ - 如何在 gdb 中配置 stl-view？

> ID：10816691
> 
> 赞同：0
> 
> 时间：2012-05-30T12:51:27.257
> 
> 标签：c++, gdb

我在 $HOME 目录中创建了一个新文件 .gdbinit。当我执行 gdb 命令时，出现以下错误。

```
bld05 abc /users/abc 25 > gdb
GNU gdb Red Hat Linux (6.3.0.0-1.132.EL4rh)
Copyright 2004 Free Software Foundation, Inc.
GDB is free software, covered by the GNU General Public License, and you are
welcome to change it and/or distribute copies of it under certain conditions.
Type "show copying" to see the conditions.
There is absolutely no warranty for GDB.  Type "show warranty" for details.
This GDB was configured as "x86_64-redhat-linux-gnu"./users/abc/.gdbinit:1: Error in sourced command file:
Undefined command: "TL".  Try "help". 
```

我不知道出了什么问题。谁能告诉我？

.gdbinit 文件包含[http://www.yolinux.com/TUTORIALS/src/dbinit_stl_views-1.03.txt](http://www.yolinux.com/TUTORIALS/src/dbinit_stl_views-1.03.txt)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T21:13:18.720

在 2012 年使用 gdb 6.3 没有多大意义（Mac 除外）。获取更新的内容，例如 7.5。这也将在 C++ 中更好地工作。

此外，要在 gdb 中加载程序，请使用 gdb --args /your/binary arg1 arg2

# sql - 如何根据表中的多列获取唯一记录

> ID：10816696
> 
> 赞同：1
> 
> 时间：2012-05-30T12:51:47.537
> 
> 标签：sql

考虑下表：

```
primaryKey   id    activity   template  creator   created
1            1      3           5         x       2011-10-13
2            2      4           2         y       2011-10-15  
3            2      4           7         z       2011-10-24
4            2      4           7         u       2011-10-29 
```

从这里我想检索具有 和 的唯一组合的`id`记录。如果存在这些字段的两个或多个独特组合，我想采用其中的第一个。`activity``template`

作为上表数据的示例，我需要的输出是

```
primaryKey   id    activity   template  creator  created
1            1      3           5         x       2011-10-13
2            2      4           2         y       2011-10-15  
3            2      4           7         z       2011-10-24 
```

（由于记录 3 和 4 具有相同的组合，我只想记录 3，因为它是第一次出现）

我可以使用单个 SQL 语句执行此操作吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-30T13:06:31.313

```
SELECT primarykey, id, activity, template, creator, created FROM (
    SELECT *, row_number() OVER (partition BY id, activity, template ORDER BY created) as rn FROM table
) a 
WHERE rn = 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T12:56:37.193

这适用于 MS SQL Server。

更新了，因为我犯了一个小错误！

```
SELECT DISTINCT 
        ROW_NUMBER() OVER (ORDER BY 
                                id    
                            ,   activity   
                            ,   template  
                            ,   creator  
                            ,   created ) PrimaryKey

    ,   id    
    ,   activity   
    ,   template  
    ,   creator  
    ,   created 
    FROM 
    [TABLE_NAME]
    GROUP BY 

        id    
    ,   activity   
    ,   template  
    ,   creator  
    ,   created 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T13:02:23.493

我认为这应该工作 -

```
SELECT * 
FROM TABLE
WHERE 
 primaryKey in 
 (
   SELECT min(primarkyKey) from TABLE 
      group by id, activity, template
 ) 
```

在这里，通过 group by 获得内部查询中所需列的第一个不同。然后每个不同记录的主键的最小值用于从外部查询中获取所有列。

# php - 模态窗口不关闭

> ID：10816698
> 
> 赞同：2
> 
> 时间：2012-05-30T12:51:52.833
> 
> 标签：php, javascript

我的 php 脚本中有两个函数，它们位于 QandA2Table.php 中，但它们的按钮位于 previousquestions.php 页面中，因为模式窗口显示该页面的详细信息。

无论如何，我下面有两个按钮，分别是“关闭”按钮和“添加”按钮：

```
<div id="previouslink">
<button type="button" id="close" onclick="return parent.closewindow();">Close</button>

</div>

<?php 

      $output = "";

        while ($questionrow = mysql_fetch_assoc($questionresult)) {
$output .= "
<table>
      <tr>
      <td id='addtd'><button type='button' class='add'>Add</button></td>
      </tr>";
        }
        $output .= "        </table>";

        echo $output;

  }

}

?> 
```

我遇到的问题是关闭模式窗口。当我单击“关闭”按钮时，它会关闭模态窗口，这很棒，但是如果我单击“添加”按钮，则它不会关闭模态窗口。为什么是这样？

下面是两个按钮功能：

```
function closewindow() {     

    $.modal.close(); 
    return false;
} 

         $(".add").on("click", function(event) {
        console.log("clicked");

        var theQuestion = $("td:first-child", $(this).parent()).text();

        if ($('.activePlusRow').length > 0) {
            $('.activePlusRow').next('.textAreaQuestion').val(theQuestion);
        }
        parent.closewindow();
        return true;
    }); 
```

下面是iframe：

```
function plusbutton() { 
    // Display an external page using an iframe 
    var src = "previousquestions.php"; 
    $.modal('<iframe src="' + src + '" style="border:0;width:100%;height:100%;">');
    return false;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T23:36:33.390

如果我没有误会你。原因和解决方法很简单

您的模态容器页面（您在其中创建 iframe）具有这些功能，对吗？

closewindow() 和函数 plusbutton()

在他们旁边你也有

```
$(".add").on("click", function(event) {
    ............... 
```

如果我理解正确，则在主 html 中的部分事件捕手？

所以你不能指望 $(".add").on("click", function(event) .... 被 iframe 内的按钮触发。

您可以简单地将 $(".add").on("click", function(event) 转换为函数

改变那个

```
$(".add").on("click", function(event) {
    console.log("clicked");

    var theQuestion = $("td:first-child", $(this).parent()).text();

    if ($('.activePlusRow').length > 0) {
        $('.activePlusRow').next('.textAreaQuestion').val(theQuestion);
    }
    parent.closewindow();
    return true;
}); 
```

至

```
function add_function {
    console.log("clicked"); 
```

//通过添加框架 id 引用更改这部分以适应您的内容层次结构。// 我不知道你将在 td:first-childs parent 中解析的数据。var theQuestion = document.frames["the_frame"].$("td:first-child", $(this).parent()).text();

```
 if ($('.activePlusRow').length > 0) {
        $('.activePlusRow').next('.textAreaQuestion').val(theQuestion);
    }
    parent.closewindow();
    return true;
} 
```

并在 iframe 内容中更改此行

```
<td id='addtd'><button type='button' class='add'>Add</button></td> 
```

至

```
<td id='addtd'><button type='button' class='add' onclick="parent.add_function();" >Add</button></td> 
```

并在 plusbutton 函数的 iframe 创建者行中添加一个 id

```
 $.modal('<iframe if="the_frame" src="' + src + '" style="border:0;width:100%;height:100%;">'); 
```

# c++ - OpenCV中的自适应算法实现

> ID：10816699
> 
> 赞同：-1
> 
> 时间：2012-05-30T12:51:55.970
> 
> 标签：c++, opencv

我曾与 kmeans 合作过，并想使用自适应方法。你知道 OpenCV 中的任何库或方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T15:18:22.080

您可能想尝试 OpenCV 中的函数 k-最近邻。以下是如何使用它的示例：

```
#include "ml.h"
#include "highgui.h"

int main( int argc, char** argv )
{
    const int K = 10;
    int i, j, k, accuracy;
    float response;
    int train_sample_count = 100;
    CvRNG rng_state = cvRNG(-1);
    CvMat* trainData = cvCreateMat( train_sample_count, 2, CV_32FC1 );
    CvMat* trainClasses = cvCreateMat( train_sample_count, 1, CV_32FC1 );
    IplImage* img = cvCreateImage( cvSize( 500, 500 ), 8, 3 );
    float _sample[2];
    CvMat sample = cvMat( 1, 2, CV_32FC1, _sample );
    cvZero( img );

    CvMat trainData1, trainData2, trainClasses1, trainClasses2;

    // form the training samples
    cvGetRows( trainData, &trainData1, 0, train_sample_count/2 );
    cvRandArr( &rng_state, &trainData1, CV_RAND_NORMAL, cvScalar(200,200), cvScalar(50,50) );

    cvGetRows( trainData, &trainData2, train_sample_count/2, train_sample_count );
    cvRandArr( &rng_state, &trainData2, CV_RAND_NORMAL, cvScalar(300,300), cvScalar(50,50) );

    cvGetRows( trainClasses, &trainClasses1, 0, train_sample_count/2 );
    cvSet( &trainClasses1, cvScalar(1) );

    cvGetRows( trainClasses, &trainClasses2, train_sample_count/2, train_sample_count );
    cvSet( &trainClasses2, cvScalar(2) );

    // learn classifier
    CvKNearest knn( trainData, trainClasses, 0, false, K );
    CvMat* nearests = cvCreateMat( 1, K, CV_32FC1);

    for( i = 0; i < img->height; i++ )
    {
        for( j = 0; j < img->width; j++ )
        {
            sample.data.fl[0] = (float)j;
            sample.data.fl[1] = (float)i;

            // estimates the response and get the neighbors' labels
            response = knn.find_nearest(&sample,K,0,0,nearests,0);

            // compute the number of neighbors representing the majority
            for( k = 0, accuracy = 0; k < K; k++ )
            {
                if( nearests->data.fl[k] == response)
                    accuracy++;
            }
            // highlight the pixel depending on the accuracy (or confidence)
            cvSet2D( img, i, j, response == 1 ?
                (accuracy > 5 ? CV_RGB(180,0,0) : CV_RGB(180,120,0)) :
                (accuracy > 5 ? CV_RGB(0,180,0) : CV_RGB(120,120,0)) );
        }
    }

    // display the original training samples
    for( i = 0; i < train_sample_count/2; i++ )
    {
        CvPoint pt;
        pt.x = cvRound(trainData1.data.fl[i*2]);
        pt.y = cvRound(trainData1.data.fl[i*2+1]);
        cvCircle( img, pt, 2, CV_RGB(255,0,0), CV_FILLED );
        pt.x = cvRound(trainData2.data.fl[i*2]);
        pt.y = cvRound(trainData2.data.fl[i*2+1]);
        cvCircle( img, pt, 2, CV_RGB(0,255,0), CV_FILLED );
    }

    cvNamedWindow( "classifier result", 1 );
    cvShowImage( "classifier result", img );
    cvWaitKey(0);

    cvReleaseMat( &trainClasses );
    cvReleaseMat( &trainData );
    return 0;
} 
```

[http://opencv.willowgarage.com/documentation/cpp/k_nearest_neighbors.html](http://opencv.willowgarage.com/documentation/cpp/k_nearest_neighbors.html)

如果你想在 C++ 中使用它，这个网站上有一个很棒的教程：

[http://aishack.in/tutorials/knearest-neighbors-in-opencv/](http://aishack.in/tutorials/knearest-neighbors-in-opencv/)

# c# - C# 动态 LINQ：在字典索引器上使用 Sum 进行选择

> ID：10816700
> 
> 赞同：4
> 
> 时间：2012-05-30T12:51:56.977
> 
> 标签：c#, linq, select, dynamic-linq

我正在使用动态 LINQ 创建一个 groupby 并动态选择。我的项目是键/值集合（字典），因此它们不包含任何属性（这是设计要求，无法更改）。我能够在[另一个问题](https://stackoverflow.com/questions/10797997/how-to-build-group-by-dynamically-on-a-list-of-dictionaries/10813933#10813933)中解决 groupby 部分，但它似乎不适用于 select 方法。

我的代码如下：

```
 private void GetValuesGroupedBy(List<Dictionary<string, object>> list, List<string> groupbyNames, List<string> summableNames)
    {
        // build the groupby string
        StringBuilder groupBySB = new StringBuilder();
        groupBySB.Append("new ( ");
        bool useComma = false;
        foreach (var name in groupbyNames)
        {
            if (useComma)
                groupBySB.Append(", ");
            else
                useComma = true;

            groupBySB.Append("it[\"");
            groupBySB.Append(name);
            groupBySB.Append("\"]");
            groupBySB.Append(" as ");
            groupBySB.Append(name);
        }
        groupBySB.Append(" )");

        // and now the select string
        StringBuilder selectSB = new StringBuilder();
        selectSB.Append("new ( ");
        useComma = false;
        foreach (var name in groupbyNames)
        {
            if (useComma)
                selectSB.Append(", ");
            else
                useComma = true;

            selectSB.Append("Key.")
                //.Append(name)
                //.Append(" as ")
                .Append(name);
        }
        foreach (var name in summableNames)
        {
            if (useComma)
                selectSB.Append(", ");
            else
                useComma = true;

            selectSB.Append("Sum(")
                .Append("it[\"")
                .Append(name)
                .Append("\"]")
                .Append(") as ")
                .Append(name);
        }
        selectSB.Append(" )");

        var groupby = list.GroupBy(groupBySB.ToString(), "it");
        var select = groupby.Select(selectSB.ToString());
    } 
```

选择字符串的 Key 部分没问题，但 Sum 部分不起作用。假设我想要的键称为值，我尝试过：

*   “总和（值）”：ParseException：预期表达式

*   "Sum(\"value\")" : ParseException: 表达式预期

*   “Sum(it[\"value\"])”：ParseException：不存在适用的聚合方法“Sum”

*   “Sum(it[value])”：ParseException：“字典”类型中不存在属性或字段“值”

*   "Sum([\"value\"])" : ParseException: 表达式预期

但都失败了。有任何想法吗？

谢谢！肖恩

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-05T21:49:41.787

我自己也遇到过这个问题；问题是`Sum()`将列视为类型`object`（可以应用于`Convert()`，`Max()`甚至，但不是`Sum()`），因此失败了；请注意，它说没有**适用**的聚合函数。

解决方案是使用内联转换为整数。动态 LINQ 支持这种转换，并且可以在您的示例中按以下方式完成：

```
selectSB.Append("Sum(")
    .Append("Convert.ToInt32(") // Add this...
    .Append("it[\"")
    .Append(name)
    .Append("\"]")
    .Append(")") // ... and this
    .Append(") as ")
    .Append(name); 
```

如果您的列不是`int`类型，我相信`ToInt64`( `bigint`)`ToDouble()`和 and一样有效`ToDecimal()`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T13:12:59.867

你有正确的语法（我的测试字段是“一”和“二”）

```
new ( Key.One, Sum(it["Two"]) as Two ) 
```

但是没有 linq 方法 Sum(object)，你需要告诉它它是 Summing (int、float、decimal 等)

最简单的方法是将字典定义更改为 Dictionary<'string, int> 假设您正在对整数求和。

# c++ - 用于并行计算的 C++ + openmp：如何在 Visual Studio 中设置？

> ID：10816701
> 
> 赞同：4
> 
> 时间：2012-05-30T12:51:59.503
> 
> 标签：c++, parallel-processing, openmp

我有一个 C++ 程序，它创建一个对象，然后调用该对象的 2 个相互独立的函数。所以它看起来像这样：

```
Object myobject(arg1, arg2);
double answer1 = myobject.function1();
double answer2 = myobject.function2(); 
```

我想让这两个计算并行运行以节省计算时间。我已经看到这可以使用 openmp 完成，但无法弄清楚如何设置它。我发现的唯一示例是将相同的计算（例如“hello world！”）发送到不同的核心，输出是“hello world！”的 2 倍。在这种情况下我该怎么做？

我使用 Windows XP 和 Visual Studio 2005。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T13:56:03.643

您应该研究`sections`OpenMP 的构造。它是这样工作的：

```
#pragma omp parallel sections
{
   #pragma omp section
   {
      ... section 1 block ...
   }
   #pragma omp section
   {
      ... section 2 block ...
   }
} 
```

鉴于团队中至少有两个线程，这两个块可能会并行执行，但由实现决定如何以及在何处执行每个部分。

有一个使用 OpenMP 任务的更简洁的解决方案，但它要求您的编译器支持 OpenMP 3.0。MSVC 仅支持 OpenMP 2.0（即使在 VS 11 中！）。

您应该在项目设置中明确启用 OpenMP 支持。如果您从命令行进行编译，选项是`/openmp`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T12:35:11.490

如果您的代码所需的内存不是很多，您也可以使用 MPI 库。为此，首先从本教程[在 Visual Studio 中编译 MPI 程序](http://www.cs.utah.edu/~delisi/vsmpi/) 或从此处在您的 Visual Studio 上安装 MPI：[MS-MPI with Visual Studio 2008](http://blogs.msdn.com/b/risman/archive/2009/01/04/ms-mpi-with-visual-studio-2008.aspx) use this mpi hello world code：

```
#include<iostream>
#include<mpi.h>
using namespace std;

int main(int argc, char** argv){

int mynode, totalnodes;

MPI_Init(&argc, &argv); 
MPI_Comm_size(MPI_COMM_WORLD, &totalnodes);
MPI_Comm_rank(MPI_COMM_WORLD, &mynode);

cout << "Hello world from process " << mynode;
cout << " of " << totalnodes << endl;

MPI_Finalize();
return 0;
} 
```

对于您的基本代码，将您的函数添加到其中并使用此示例 if 语句声明每个进程的作业：

```
if(mynode== 0 ){function1}
if(mynode== 1 ){function2} 
```

function1 和 function2 可以是任何你喜欢同时执行的东西；但请注意，这两个功能相互独立。而已！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T14:04:20.367

第一部分是让 OpenMP 与 Visual Studio 2005 一起运行，它已经很老了。这需要做一些事情，但在[这个问题](https://stackoverflow.com/questions/865686/openmp-in-visual-studio-2005-standard)的答案中有描述。

一旦完成，如果您有两种真正完全独立的方法，那么执行这种简单形式的任务并行就相当容易了。注意限定符；如果这些方法正在*读取*相同的数据，那没关系，但是如果它们正在更新另一个方法使用的*任何*状态，或者调用任何其他这样做的例程，那么事情就会中断。

只要方法完全独立，您就可以使用这些[部分](https://computing.llnl.gov/tutorials/openMP/#SECTIONS)（[任务](http://bisqwit.iki.fi/story/howto/openmp/#TaskDirectiveOpenmp%203%200Only)实际上是更现代的 OpenMP 3.0 执行此操作的方法，但您可能无法获得 OpenMP 3.0 对如此旧的编译器的支持）；您还将看到人们滥用并行 for 循环来实现此目的，这至少具有让您控制线程分配的优势，因此即使我不能真正推荐它，我也将其包括在此处以保持完整性：

```
#include <omp.h>
#include <stdio.h>
#include <unistd.h>
#include <stdlib.h>

int f1() {
    int tid = omp_get_thread_num();
    printf("Thread %d in function f1.\n", tid);
    sleep(rand()%10); 
    return 1;
}

int f2() {
    int tid = omp_get_thread_num();
    printf("Thread %d in function f2.\n", tid);
    sleep(rand()%10); 
    return 2;
}

int main (int argc, char **argv) {

    int answer;
    int ans1, ans2;

    /* using sections */
#pragma omp parallel num_threads(2) shared(ans1, ans2, answer) default(none)
    {
#pragma omp sections 
        {
#pragma omp section
            ans1 =  f1();

#pragma omp section
            ans2 =  f2();
        }  

#pragma omp single
        answer = ans1+ans2;

    }  

    printf("Answer = %d\n", answer);

    /* hacky appraoch, mis-using for loop */
    answer = 0;
#pragma omp parallel for schedule(static,1) num_threads(2) reduction(+:answer) default(none)
    for (int i=0; i<2; i++)  {    
        if (i==0)
            answer += f1();
        if (i==1)
            answer += f2();
    }

    printf("Answer = %d\n", answer);

    return 0;
} 
```

运行这个给出

```
$  ./sections 
Thread 0 in function f1.
Thread 1 in function f2.
Answer = 3
Thread 0 in function f1.
Thread 1 in function f2.
Answer = 3 
```

# objective-c - Sharekit Facebook 错误

> ID：10816710
> 
> 赞同：0
> 
> 时间：2012-05-30T12:52:30.703
> 
> 标签：objective-c, facebook, sharekit

我正在使用 ShareKit。

它与 Twitter API 一起正常工作，但在 Facebook API 中出现错误。

在 SHKConfig 中

```
#define SHKFacebookKey              @"my Facebook Key"
#define SHKFacebookSecret           @"my Facebook Secret" 
```

错误图片

![脸书错误](../Images/240335c11490f6e3cc0f6a3ed398663c.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T13:30:57.007

您可能正在使用旧的原始共享工具包，其中包含过时版本的 Facebook iOS sdk (FBConnect)。我建议您使用更新[的 ShareKit 2.0](https://github.com/ShareKit/ShareKit)。它的安装发生了很大的变化，所以请确保您仔细遵循[install wiki](https://github.com/ShareKit/ShareKit/wiki/Installing-sharekit)。如果您决定使用它，最好的办法是从头开始阅读新的 ShareKit。

# ruby-on-rails - RSpec 和 Factory 的意外测试失败

> ID：10816712
> 
> 赞同：1
> 
> 时间：2012-05-30T12:52:39.130
> 
> 标签：ruby-on-rails, ruby, rspec, factory

RoR 控制器：

```
def destroy 
    Page.find(params[:id]).destroy 
    @pagechildren =  Page.where("parent_id = ?", params[:id]) 
    @pagechildren.update_all({parent_id: -1}) if @pagechildren.count > 
0 
    flash[:success] = 
t('activerecord.errors.controllers.message.attributes.page.page_destroy_suc cess') 
    redirect_to pages_path 
  end 
```

测试 RSpec

```
 it "should remove parent_id from children" do 
       @page2 = Factory(:page) 
       @pagechild = Factory(:page) 
       @pagechild[:parent_id] = @page2.id 
       lambda do 
          delete :destroy, :id => @page2 
        end.should 
change(@pagechild, :parent_id).from(@page2.id).to(-1) 
      end 
```

代码工作正常（），但

Код все корректно обрабатывает（捕获 'id' 删除页面，并且所有子项的 parent_id 更改为 -1）。但是 rspec 测试失败了。

工厂：

```
Factory.define :page do |page| 
  page.name "Name example page" 
  page.title "Title example page" 
  page.content "Content example page" 
  page.metadescription "metadescription example page" 
  page.metakeywords "metakeywords example page" 
  page.head "head example page" 
  page.ismenu true 
  page.order_id -1 
  page.parent_id -1 
end 
```

测试是红色的=（怎么了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T13:34:54.240

您的代码将更新数据库中的所有子项。但不是你的测试实例:)试试这个：

```
it "should remove parent_id from children" do 
       @page2 = Factory.create(:page) 
       @pagechild = Factory.create(:page) 
       @pagechild[:parent_id] = @page2.id 
       delete :destroy, :id => @page2 
       @pagechild.reload.parent_id.should == -1
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T13:32:32.327

尝试

```
delete :destroy, :id => @page2.id 
```

如果它仍然不起作用，则显示 rspec 输出。

# jquery - JQuery 验证显示错误后的回调

> ID：10816714
> 
> 赞同：2
> 
> 时间：2012-05-30T12:52:48.240
> 
> 标签：jquery, jquery-validate

我有一个在 iframe 内运行的表单，并使用出色的[postmessage 插件](http://benalman.com/projects/jquery-postmessage-plugin/)来允许在父页面中动态设置 iframe 的高度。这工作得很好，在页面加载时，iframe 文档正文的 outerHeight 用于设置 iframe 的高度。但是，当验证 iframe 中的表单时，显示的错误消息会导致表单的高度发生变化，我需要对此事件做出反应。我曾尝试在插件中使用无效回调，但它似乎在显示错误消息之前触发，因此报告高度没有变化。

该表单是使用 ASP.net MVC 构建的，所有验证都是使用数据模型注释设置的

我在文档中看不到另一个选项，我可以使用另一个事件吗？或者有没有办法监控 JQuery 所做的 DOM 更改？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T14:53:23.877

我通过使用以下插件监控 DOM 的变化来解决这个问题：[https ://gist.github.com/378546](https://gist.github.com/378546)

所需要做的就是将事件附加到正文，例如：

```
$('body').bind('domchanged', function () {
    //code to execute when domchanges
}); 
```

值得注意的是，这将针对显示的每条错误消息触发，因此如果有多个错误将被多次调用。

# jsf-2 - 它在动态菜单中不起作用“actionExpression”。PrimeFaces

> ID：10816715
> 
> 赞同：0
> 
> 时间：2012-05-30T12:52:51.020
> 
> 标签：jsf-2, primefaces

我的代码是这样的：

```
<h:form>

<p:accordionPanel>
    <p:tab title="TAB 1">
    <h:panelGrid columns="2" cellpadding="10">
        <p:menu model="#{usuarioSesion.miMenu}" />
    </h:panelGrid>
    </p:tab>
    <p:tab title="TAB 2">
    <h:panelGrid columns="2" cellpadding="10">
            Ayuda
    </h:panelGrid>
    </p:tab>            
</p:accordionPanel>

</h:form> 
```

我的托管 bean 就像：

```
@ManagedBean(name = "usuarioSesion")
@SessionScoped
public class UsuarioCtrl implements Serializable{

    private DefaultMenuModel miMenu;

    @SuppressWarnings("unused")
    @PostConstruct
    private void init(){
        FacesContext facesContext = FacesContext.getCurrentInstance();
        Application application = facesContext.getApplication();
        ExpressionFactory expressionFactory = application.getExpressionFactory();
        ELContext elContext = facesContext.getELContext();

        miMenu = new DefaultMenuModel();
        Submenu submenu;
        submenu = new Submenu();
        submenu.setId("idCabecera");
        submenu.setLabel("Operaciones");

        MenuItem item = new MenuItem();
        item.setValue("Organismos");
        item.setId("idOrganismo");
        item.setActionExpression(expressionFactory.createMethodExpression(elContext, "#{usuarioSesion.listar2}", String.class, new Class[0]));
        item.setAjax(false);
        item.setAsync(false);
        submenu.getChildren().add(item);

        MenuItem item2 = new MenuItem();
        item2.setId("idAplicacion");
        item2.setValue("Aplicacion");
        item2.setActionExpression(expressionFactory.createMethodExpression(elContext, "#{usuarioSesion.listar1}", String.class, new Class[0]));
        item2.setAjax(false);
        item2.setAsync(false);
        submenu.getChildren().add(item2);

        miMenu.addSubmenu(submenu);

    }

    public String listar1(){
        .....
    }

    public String listar2(){
        .....
    } 
```

当我单击菜单项时运行此代码时，永远不会执行 listar1()、listar2() 方法。

是什么原因？

但是使用此代码：

```
<h:form>
      <h:panelGrid columns="2" cellpadding="10">
         <p:menu model="#{usuarioSesion.miMenu}" />
   </h:panelGrid>
</h:form> 
```

菜单工作正常。为什么？？？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-01T02:23:36.897

解决方法：我发现添加：

```
<h:panelGrid columns="2" cellpadding="10" style="display:none">
    <p:menu model="#{usuarioSesion.miMenu}" />
</h:panelGrid> 
```

到您的表格，解决问题。最终的表单内容将是：

```
<h:form>
<p:accordionPanel>
    <p:tab title="TAB 1">
    <h:panelGrid columns="2" cellpadding="10">
        <p:menu model="#{usuarioSesion.miMenu}" />
    </h:panelGrid>
    </p:tab>
    <p:tab title="TAB 2">
    <h:panelGrid columns="2" cellpadding="10">
            Ayuda
    </h:panelGrid>
    </p:tab>            
</p:accordionPanel>
<h:panelGrid columns="2" cellpadding="10" style="display:none">
    <p:menu model="#{usuarioSesion.miMenu}" />
</h:panelGrid>
</h:form> 
```

# java - 在java中，如果我们在创建对象的同时定义一个类，那么这样的类叫什么？

> ID：10816717
> 
> 赞同：1
> 
> 时间：2012-05-30T12:52:53.870
> 
> 标签：java

如果在java中我们有一个像下面代码中的类**A**，它的特殊名称是什么？

```
public static void main(String args[])
{ obj= new A()
           { ....
           };
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-30T12:56:12.697

这是一个**匿名内部类**。

这是关于这些内部类的简短教程：[http ://www.roseindia.net/javatutorials/anonymous_innerclassestutorial.shtml](http://www.roseindia.net/javatutorials/anonymous_innerclassestutorial.shtml)

# android - 关于自定义视图边距

> ID：10816719
> 
> 赞同：2
> 
> 时间：2012-05-30T12:52:55.113
> 
> 标签：android, view, margin

MyView 扩展了 View，并在 onDraw() 中绘制了一个圆圈。但是，如果我将边距设置为其父布局，它通常会被剪裁：

```
<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_marginBottom="10dp"
    android:layout_marginLeft="0dp"
    android:layout_marginRight="0dp"
    android:layout_marginTop="10dp"
    ... >

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="RAM" />

        <my.ui.ClockView2
            android:padding="5dp"
            android:id="@+id/ram_cv"
            android:layout_width="100dp"
            android:layout_height="100dp"
            android:layout_weight="1"
            android:visibility="visible" /> 
```

我试图计算边距，但只得到了填充：

```
 _availableWidth = getWidth() - getPaddingLeft() - getPaddingRight();
    _availableHeight = getHeight() - getPaddingTop() - getPaddingBottom(); 
```

有没有办法避免这种情况，提前谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-22T14:17:41.023

看起来您正在从您的视图中执行此操作，因此请尝试以下操作：

```
 MarginLayoutParams lp = (MarginLayoutParams) getLayoutParams();
        int[] mymargin = {
                lp.leftMargin,
                lp.rightMargin,
                lp.topMargin,
                lp.bottomMargin,
        }; 
```

# java - 如何在没有实际完成的情况下关闭活动？

> ID：10816721
> 
> 赞同：5
> 
> 时间：2012-05-30T12:53:08.230
> 
> 标签：java, android

我想要：

```
open 1, 2, 3 activities
1 > 2 > 3  

back to #2
1 > 2

open #4 activity
1 > 2 > 4

back to #2
1 > 2

restore #3 activity
1 > 2 > 3 
```

“恢复”是指打开以前关闭的活动而不重新创建。我怎样才能做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-30T12:56:53.690

```
open 1, 2, 3 activities
1 > 2 > 3  

back to #2
1 > 2          // call startActivity for 2, don't call finish() in 3

open #4 activity
1 > 2 > 4

back to #2
1 > 2

restore #3 activity
1 > 2 > 3      // call startActivity for 3 with intent as Intent.setFlags(Intent.FLAG_ACTIVITY_REORDER_To_FRONT); 
```

# java - 在数组列表中，添加新变量并用新值替换现有值

> ID：10816722
> 
> 赞同：3
> 
> 时间：2012-05-30T12:53:08.880
> 
> 标签：java, android, arraylist

在数组列表中，当使用添加新变量时

```
 pointList.add(i , coord); 
```

新变量被添加并用新值替换现有值。如何停止这些替换变量？

```
for(int i=0;i<coordinateArray.length();i++)
        {
            brokenArray= coordinateArray.getJSONObject(i);  
            x=brokenArray.getInt("x");
            y=brokenArray.getInt("y");

            Log.d("x", " "+i+ " "+x );
            Log.d("y", " "+i+ " "+y );

            coord.set(x, y);
            pointList.add(i , coord);

            Log.d("pointList", pointList.toString());
        } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-30T12:58:08.573

根据您提供的代码，您`coord.set(x, y)`每次都在同一个对象上使用。将对象添加到 a`List` *不会复制它*。

Java 按值传递引用，而不是按值传递对象；当您调用 时`pointList.add(i, coord)`，您正在向列表中添加对该对象的引用`coord`，而不是该`coord`对象的新副本。

相反，您*必须*每次通过循环创建一个新的`Point`或任何对象。`Coordinates`您不能`coord`像在此处那样重用该对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T13:00:14.780

这是错误。

```
 coord.set(x, y); 
```

您正在将循环中的值设置为同一个对象。

在循环内创建坐标对象并添加它。

```
for(int i=0;i<coordinateArray.length();i++)
    {
        brokenArray= coordinateArray.getJSONObject(i);  
        x=brokenArray.getInt("x");
        y=brokenArray.getInt("y");

        Log.d("x", " "+i+ " "+x );
        Log.d("y", " "+i+ " "+y );
        Coordinate coord = new Coordinate ();
        coord.set(x, y);

        pointList.add(i , coord);

        Log.d("pointList", pointList.toString());
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T13:49:46.217

这解决了问题:)

```
 for(int i=0;i<coordinateArray.length();i++)
        {
            brokenArray= coordinateArray.getJSONObject(i);  
            x=brokenArray.getInt("x");
            y=brokenArray.getInt("y");

            Log.d("x", " "+i+ " "+x );
            Log.d("y", " "+i+ " "+y );
            Point coord = new Point();
            coord.set(x, y);
            pointList.add(i , coord);
            coord=null;
            Log.d("pointList", pointList.toString());
        } 
```

# android - 在应用计费市场界面

> ID：10816723
> 
> 赞同：1
> 
> 时间：2012-05-30T12:53:11.243
> 
> 标签：android, in-app-billing

我正在应用购买中实施。

还有一些问题我找不到答案。

有没有办法知道市场 UI 何时消失，有时它发生在之前

IN_APP_NOTIFY 有时在之后。

# c#-4.0 - 如何为 EventLog 分配多个日志

> ID：10816724
> 
> 赞同：1
> 
> 时间：2012-05-30T12:53:12.110
> 
> 标签：c#-4.0, event-log

我正在使用 EventLog 类使用以下代码从系统获取事件日志

```
 EventLog myLog = new EventLog();           

            myLog.Log = "System";
            //myLog.Log = "Application";            
            myLog.MachineName = ".";

            int LogCount = myLog.Entries.Count; 
```

但是，通过使用上面的代码，我一次只能为“应用程序”或“安全”获取 1 个日志的数据。如何获取两个日志名称的日志数据？

# c# - NDesk.Options - 检测无效参数

> ID：10816728
> 
> 赞同：6
> 
> 时间：2012-05-30T12:53:21.990
> 
> 标签：c#, command-line-arguments

我正在使用[NDesk.Options](http://www.ndesk.org/Options)解析 C# 命令行程序的命令行参数。它工作正常，除了我希望我的程序不成功退出并显示帮助输出，如果用户包含我没想到的参数。

我正在解析选项：

```
var options = new OptionSet {
    { "r|reset",  "do a reset", r => _reset = r != null },
    { "f|filter=",  "add a filter", f => _filter = f },
    { "h|?|help",  "show this message and exit",  v => _showHelp = v != null },
};

try
{
    options.Parse(args);
}
catch (OptionException)
{
    _showHelp = true;
    return false;
}
return true; 
```

使用此代码，如果我不正确地使用参数，例如在它之后指定`--filter`without `=myfilter`然后 NDesk.Options 将抛出一个 OptionException 并且一切都会好起来的。但是，如果我传入一个与我的列表不匹配的参数（例如`--someOtherArg`. 但这不会发生。解析器只是忽略了这一点并继续卡车运输。

有没有办法用 NDesk.Options 检测意外的参数？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-30T13:03:30.763

该`OptionSet.Parse`方法返回 a 中无法识别的选项`List<string>`。您可以使用它来报告未知选项。

```
try
{
    var unrecognized = options.Parse(args);
    if (unrecognized.Any())
    {
        foreach (var item in unrecognized) 
            Console.WriteLine("unrecognized option: {0}", item);
        _showHelp = true;
        return false;
    }
}
catch (OptionException)
{
    _showHelp = true;
    return false;
}
return true; 
```

# php - 如何更新用户插入的值（使用 javascript 和 php）？

> ID：10816731
> 
> 赞同：0
> 
> 时间：2012-05-30T12:53:27.690
> 
> 标签：php, javascript, ajax

我有一个变量，我在 php 中调用并默认显示在用户的输入字段中，以进行一些计算，但用户可以更改值。我正在使用 javascript 来获取值，但它没有更新。它的值始终保持默认值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T13:34:11.457

嗯……这里有几件事……

首先，我们没有任何代码。所以我们不知道你想做什么。

因此，我假设您正在谈论某种全局变量（如果您只是`$foo = 10`在脚本中的某个位置声明，您将无法获取它；脚本在页面输出时已完成解析）。

因此，假设您拥有`$_COOKIE['some_value']`要更改的变量。这个想法是你对一些将更新它的 php 文件进行 ajax 调用。所以你可能有

```
//change_value.php

setcookie($_GET['cookie_name'], $_GET['new_value']); 
```

您可以使用库（此处为 jQuery）进行 ajax 调用

```
$.ajax({
  url: 'change_value.php',
  data: 'cookie_name=bar&new_value=' + new_value //new value is a variable in javascript,
  success: function(data) {
    alert("Success");
  }
}); 
```

您可以在此处阅读有关 jQuery 的更多信息[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

上面的示例还取回了 . 输出的任何返回数据`change_value.php`。因此，您可以更新 change_value.php 以更改指定的值，然后无论如何输出（新）值（这样您就可以抓住它）。

当然，您可以使用 cookie 直接使用 javascript 执行此操作，但这只是一个示例。如果您有会话，则可以使用相同的方法。

# search - 是否可以在typo3 solr 搜索结果中向未登录用户显示访问受限页面？

> ID：10816732
> 
> 赞同：4
> 
> 时间：2012-05-30T12:53:29.660
> 
> 标签：search, solr, typo3

如果当前登录的用户无权查看此页面（或根本没有登录），t3solr的[默认行为是隐藏具有访问限制的结果。](http://www.typo3-solr.com/en/solr-for-typo3/development-model/indexing/frontend-user-group-access-restrictions/)

我们的客户想要不同的行为：结果应该显示出来，但要在视觉上突出显示（例如，通过添加一个 css 类）。（尚未登录的）用户可以在搜索结果摘录中“预览”所需内容的摘要（取笑他）并单击链接。然后他将看到登录页面并在登录后重定向到他的目标页面（最后一部分已经是默认的typo3行为）。

有谁知道当前的 t3solr 是否可行？我认为几年前我上次使用 indexed_search 时它是可能的，所以我认为 t3solr 也可能支持这一点。

不，我还没有“只是”尝试过，因为设置整个东西比以前在这里问需要更长的时间。另外，我不确定是否必须为 t3solr 的早期访问版本付费才能获得此（可能的）功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T11:20:34.963

TYPO3 扩展 Apache Solr 的两个版本在对页面和内容元素的访问权限方面是相同的。

您所说的要求不会开箱即用，因为我们将扩展设计为非常严格地只显示您可以看到的结果。

当然有一种方法可以规避需要更改我们在扩展中的 solr 访问过滤器的行为。或者通过在内容级别分配访问权限并让插件仅显示戏弄部分。

我们通常在这里监控有关 TYPO3 的 solr 的问题：

新闻：//lists.typo3.org:119/typo3.projects.solr

# powershell - 使用PowerShell的用户帐户“有效权限”

> ID：10816735
> 
> 赞同：0
> 
> 时间：2012-05-30T12:53:41.420
> 
> 标签：powershell, windows-server-2008, user-accounts, user-permissions

我需要比较 AD 用户权限（一个用户可以“取消设置”一个属性而另一个不能，两者都可以更改它）。

如何转储/比较`user account > Security > Advanced > Effective Permissions`使用 powershell 访问（并选择用户帐户）时找到的用户帐户“有效权限”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T13:45:24.620

为 Active Directory使用[Quest Free PowerShell 命令](http://www.quest.com/powershell/activeroles-server.aspx)很简单：

```
Get-QadPermission useraccountname -Inherited 
```

或更好的方法：

```
Get-QADUser -Name useraccountname -SecurityMask DACL | Get-QADPermission -Inherited -SchemaDefault 
```

这将返回为用户“useraccountname”分配的所有有效权限继承或显式

可以用 进行比较`compare-object`。一个非常简单的例子：

```
compare-object (Get-QADPermission userA -Inherited | select Rights) (Get-QADPermission userB -Inherited | select rights) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T19:47:14.413

我们曾经遇到过类似的情况，需要知道谁可以删除我们的一个主要 OU，因此我们认为也许应该将 ACL 转储到 OU 上，并查找对该对象具有删除权限的每个人。当然 dsacls 在这方面很有帮助，我们可以轻松地将 ACL 转储到它上面。

**但是**，当我们开始查看 ACL 时，我们发现它有将近 60 个权限条目，其中大约有六个拒绝条目，其中一些是直接的，另一些是继承的。我们最初没有考虑拒绝，并提出了一个大约 200 名可以删除 OU 的用户的列表，但这似乎不对（；它似乎太高了。）然后，我们意识到我们必须将拒绝与允许！

因此，我们将所有拒绝权限和所有允许权限都展平，但随后我们必须弄清楚哪些拒绝将适用，因为其中一些是继承的，而且我相信继承的那些不会否定任何直接允许，所以花了一些更艰苦的工作，在做的时候我们意识到一些继承的权限不适用于对象，所以我们必须从头开始！

最后，我们几乎放弃了，当我问我们的一位企业管理员时，他说我们需要做的是确定我们 OU 的**有效权限**，他将我们指向Active Directory 用户和计算机快照中的**有效权限选项卡**-在。

因此，我们启动了 ADUC 并导航到“有效权限”选项卡，并认为只需在某处单击“确定”即可。但是，我们很快意识到需要我们单独输入每个人的姓名。现在，我们的环境中有近 2000 人，所以我们无法将 2000 人的名字一一列出。另一件事是，即使对于一个人，它也会向我们显示该人的所有有效权限，并且在技术方面，我们必须进一步完善。

然后我们认为我们应该给 Powershell 一个机会，并查看了许多使用 Powerhsell 执行此操作的选项，但是使用 Powershell 确定 AD 中的有效权限并不容易，这令人失望。特别是，我们尝试了 Quest 的免费 PowerShell 命令**Get-QadPermission** useraccountname 和**Get-QADUser** -Name useraccountname，但我们很失望地看到这仅检索为给定用户指定的所有权限的列表。它没有透露授予用户的*有效权限。*我们发现自己必须从它返回的结果开始，然后手动尝试确定有效权限，这不值得我们花时间。

所以，我们几乎放弃了希望，但在退出之前，我们认为我们只需要在 Google 上搜索“ **Active Directory 有效权限工具**”，希望一定有一些东西可以为我们做到这一点。我很高兴我们这样做了，因为我们找到了一个可以完全满足我们需要的工具：找出我们 OU 的有效权限并让我们能够导出这些有效权限 -

[http://www.paramountdefenses.com/goldfinger_capabilities_true_effective_permissions_for_active_directory.html](http://www.paramountdefenses.com/goldfinger_capabilities_true_effective_permissions_for_active_directory.html)

我们发现此工具（称为*AD 的金手指*）能够确定 Active Directory 对象的有效权限，并提供输出以便我们可以轻松查看对特定权限具有“有效权限”的所有用户的列表一个东西。例如，我们能够使用它来确定和枚举在我们感兴趣的 OU 上拥有“有效删除访问”权限的所有管理员的列表。

事实证明，它对我们很有帮助，也许它对你也有帮助。我只是想我会分享这个，因为我一直是**dsacls**路线，我不希望你经历我们在尝试手动执行此操作时所经历的同样痛苦。手动操作太痛苦了。

# php - 可变动态跨度重叠

> ID：10816736
> 
> 赞同：0
> 
> 时间：2012-05-30T12:53:48.643
> 
> 标签：php, html

```
$lines = file("res_example.txt");

$resArr = array();
foreach ($lines as $line_num => $line) {
  $columns = explode("\t", $line);
  $raws = $columns['1'];
  $hits = $columns['2'];
  $names = $columns['0'];
  $models = $columns['3'];
  $colors = $columns['4'];
  $allModels[$models] = 1;
  $resArr[] = array(
    name => $names,
    score => $raws,
    hit => $hits,
    model => $models,
    color => $colors
  );
}

$seqArr = array('A', 'T', 'C', 'G');
$randseq = array();

for ($i = 0; $i < 1000; $i++) {
  $randseq[] = $seqArr[array_rand($seqArr)];
}

$res = "";

echo "<div id=\"coltext\" style=\"font-family:monospace;\">";

foreach ($allModels as $modName => $value) {

  echo "<input ModelName=$modName type=\"checkbox\"
  checked==\"TRUE\" onclick=\"toggle.apply(this)\" />$modName";

}

echo "<hr />";
$score = rawtransform($raw);
foreach ($randseq as $index => $nuc) {
  $index = $index + 1;
  foreach ($resArr as $hitArr) {
    $hit = $hitArr['hit'];
    $raw = $hitArr['score'];
    $model = $hitArr['model'];
    $colval = $hitArr['color'];
    $score = rawtransform($raw);

    $color = getcolor($score, $colval);

    if (($hit+3) == $index) { 
      echo "</span>";
    }
    if ($hit == $index) { 
      echo "<span class=$model Title=\"position:$index,score:$raw\"
      style=\"background:$color;\" color=\"$color\">";
      //problem when theres overlap !? 
    }

  }

  echo $nuc;

  if (($index%50)==0){
    echo"<br />";
  }
}

echo "</div>";

function rawtransform($raw) {
  return (int)($raw/50)-9;
}

function getcolor($score,$ArrayModelval)
{
switch ($score){
// working.  test each color. 
case 1: /*500-550(Raw Score)*/
        $col=$ArrayModelval;
            return"hsl( $col,100%,90%)";
    break;
case 2: //550-600
        $col=$ArrayModelval;
            return "hsl( $col,100%,85%)";
    break;
case 3: //600-650
        $col=$ArrayModelval;
            return "hsl( $col,100%,85%)";
    break;
case 4: //650-700
        $col=$ArrayModelval;
            return"hsl( $col,100%,80%)";
    break;
case 5: //700-750
        $col=$ArrayModelval;
            return"hsl( $col,100%,70%)";
    break;
case 6: //750-800
        $col=$ArrayModelval;
            return "hsl( $col,100%,60%)";
    break;
case 7: //800-850
        $col=$ArrayModelval;
            return "hsl( $col,100%,50%)";
    break;
case 8: //850-900;
        $col=$ArrayModelval;
            return "hsl( $col,100%,50%)";
    break;
case 9: //900-950
        $col=$ArrayModelval;
            return "hsl( $col,100%,40%)";
    break;
case 10: //950-1000
        $col=$ArrayModelval;
    return "hsl($col,100%,40%)";
    break;

   }
} 
```

大多数情况下都是我想要的：我想为`$hit`在外部文件上定义了 - 的随机序列的部分着色。我唯一的问题是当有任何重叠时，即如果两个命中在彼此的 3 个碱基内，则跨度被拉长并着色，就好像它的一个跨度一样。

外部文件具有开始跨度的位置，该跨度具有可变颜色，具体取决于外部文件中给出的分数。基本上，如果我有 3 个结果，其中 2 个具有几乎相同的命中 (+-1) 和另一个不同的命中，我只会看到两个部分着色，谁能看到我的问题是什么？抱歉，我知道我的措辞可能很糟糕，但很难解释。谢谢。

```
>chr1:2198584545754_genome_1000+    500 1000    Model1  0
>chr2:2198581212154_genome_1000+    510 992     Model2  180
>chr3:2115151215754_genome_1000+    520 990     Model3  330  
>chr4:2198584545754_genome_1000+    530 980     Model3  330 
>chr5:1218455145754_genome_1000+    540 970     Model2  180
>chr6:1231354645454_genome_1000+    550 960     Model1  0
>chr7:1231213211134_genome_1000+    600 950     Model3  330
>chr7:1231213211134_genome_1000+    650 940     Model3  330 
```

javascript:

```
function toggle() {
var div= document.getElementById('coltext');
var modName=this.getAttribute('ModelName');
var spans=div.getElementsByTagName('span');
var spans_l=spans.length;
while (spans_l--){
    span=spans[spans_l];
    if(span.getAttribute('class')==modName && this.checked==true){
        var color= span.getAttribute('color');

        span.style.background=color;
    }
    if(span.getAttribute('class')==modName && this.checked==false){
        span.style.background="white";
    }
}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T09:32:23.563

试穿这个尺寸。它通过使用 FIFO 堆栈`$currentHits`来处理命中边界来工作。我还添加了一些辅助函数来处理颜色生成——如果你改变你的`getcolor()`函数以返回一个数组而不是一个 CSS 字符串，其中一个可以被删除，从而提高效率。

~~我无法对此进行测试，因为我没有您的`getcolor()`或`rawtransform()`函数的源代码 - 如果您将这些添加到问题中，我确信可以进行进一步的改进并且我可以正确测试代码。~~此外，最好看看你的 CSS`Model1`等`Model2`类的样子。

*编辑：现在包括* `getcolor()`*/*`rawtransform()` *功能和（至少部分）[测试](http://codepad.viper-7.com/GQnHLi)*

```
<?php

  function rawtransform ($raw) {
    return (int) ($raw / 50) - 9;
  }
  function getcolor ($score, $h) {
    switch ($score) {
      // working.  test each color. 
      case 1: /*500-550(Raw Score)*/
        $l = 90;
        break;
      case 2: case 3: //550-650
        $l = 85;
        break;
      case 4: //650-700
        $l = 80;
        break;
      case 5: //700-750
        $l = 70;
        break;
      case 6: //750-800
        $l = 60;
        break;
      case 7: case 8: //800-900;
        $l = 50;
        break;
      case 9: case 10: default: //900-1000 / out of range
        $l = 40;
        break;
    }
    return array(
      'h' => $h,
      's' => 100,
      'l' => $l
    );
  }

  function hsl_average_color () {
    // Takes an unlimited number of arguments, calculates the average HSL value and returns a CSS string
    $args = func_get_args();
    $h = $s = $l = array();
    foreach ($args as $arg) {
      $h[] = $arg['h'];
      $s[] = $arg['s'];
      $l[] = $arg['l'];
    }
    return sprintf('hsl(%d, %d%%, %d%%)', (int) round(array_sum($h) / count($h)), (int) round(array_sum($s) / count($s)), round(array_sum($l) / count($l)));
  }

  $fileName = 'res_example.txt';

  // Open the file
  if (!$fp = fopen($fileName, 'r')) {
    // Handle file read errors here
    die("Unable to open file $fileName");
  }

  // Loop the file data and build an associative array
  $resArr = array();
  while (($line = fgetcsv($fp, 0, "\t")) !== FALSE) {

    // You didn't declare $allModels as an empty array before the loop
    // Should you have?
    $allModels[$line[3]] = 1;

    // Note that I have dropped the hit key and instead keyed the outer
    // array by this value. I have added an end key to track the end of
    // a hit
    $resArr[$line[2]] = array(
      'name' => $line[0],
      'score' => $line[1],
      'end' => $line[2] + 4,
      'model' => $line[3],
      'color' => getcolor(rawtransform($line[1]), $line[4])
    );

  }

  // Close the file
  fclose($fp);

  // Generate a random sequence
  $seqArr = array('A', 'T', 'C', 'G');
  $randseq = array();
  for ($i = 0; $i < 1000; $i++) {
    $randseq[] = $seqArr[array_rand($seqArr)];
  }

  // $res appears to do nothing in you code
  // $res = "";

  // Open the <div>
  echo '<div id="coltext" style="font-family:monospace;background-color:#000000;color:#FFFFFF;">'."\n";

  // Iterate over $allModels and echo checkboxes
  foreach ($allModels as $modName => $value) {

    // ModelName is a non-standard HTML attribute, are you sure you meant to do this?
    echo '<input ModelName="'.$modName.'" type="checkbox" checked="checked" onclick="toggle.apply(this);" />'.$modName."\n";

  }

  echo "<hr />\n";

  // This line does nothing useful here
  // $score = rawtransform($raw);

  // An array to track the current hits
  $currentHits = array();

  foreach ($randseq as $index => $nuc) {

    // Increment $index
    $index++;

    // Track whether we are in a hit/reached a boundary
    $boundary = FALSE;
    $inHit = (bool) count($currentHits);

    // Check whether we are at the end of the lowest hit in the stack
    if ($inHit && $index == $currentHits[0]['end']) {
      $boundary = TRUE;
      array_shift($currentHits);    
    }

    // Check whether we are at the start of a new hit
    if (isset($resArr[$index])) {
      $boundary = TRUE;
      $currentHits[] = $resArr[$index];    
    }

    // If we reached a boundary
    if ($boundary) {

      // Close a hit    
      if ($inHit) {
        echo "</span>";
      }

      // Open a hit
      if (count($currentHits)) {

        // Get the current color value
        $colors = array();
        foreach ($currentHits as $hit) $colors[] = $hit['color'];
        $color = call_user_func_array('hsl_average_color', $colors);

        // Start a new span
        echo '<span class="'.$currentHits[0]['model'].'" title="position:'.$index.',score:'.$currentHits[0]['score'].'" style="color: '.$color.';">';

      }

    }

    // Print the character
    echo $nuc;

    // Split into 50 character chunks        
    if (!($index % 50)){
      echo"<br />\n";
    }

  }

  // Close the last span if one is still open
  if (count($currentHits)) {
    echo "</span>";
  }

  // Close the <div>        
  echo "</div>\n"; 
```

# java - Java 单元测试无法访问 ResourceBundle

> ID：10816737
> 
> 赞同：5
> 
> 时间：2012-05-30T12:53:52.570
> 
> 标签：java, unit-testing, junit, easymock, resourcebundle

我正在创建一个 Java 单元测试来测试我最近更改的一些代码。但是，我正在测试的方法实例化了一个使用 ResourceBundle 的类……</p>

```
ResourceBundle.getBundle("businessVariables").getString("product.name")); 
```

资源文件位于 web 包中`Mycompany_web/src/main/webapp/WEB-INF/classes/businessVariables.properties`

我的测试位于我的 xml 包中`Mycompany_xml/src/test/java/uk/co/mycompany/xmlapi/RequestProcessorTestNew.java`

在正常运行时资源包是可访问的，但在我的单元测试运行时不可访问。它会抛出这个错误……</p>

```
Testcase: testCreateInitialStatusResponse(uk.co.mycompany.xmlapi.RequestProcessorTestNew):  Caused an ERROR
null
java.lang.reflect.InvocationTargetException
    at uk.co.mycompany.xmlapi.RequestProcessorTestNew.testCreateInitialStatusResponse(RequestProcessorTestNew.java:62)
Caused by: java.lang.ExceptionInInitializerError
    at uk.co.mycompany.xmlapi.RequestProcessorImpl.createInitialStatusResponse(RequestProcessorImpl.java:812)
Caused by: java.util.MissingResourceException: Can't find bundle for base name businessVariables, locale en_US 
```

我应该怎么办？我可以让我的测试以某种方式查看资源包吗？我可以在某个地方创建一个代码能够以某种方式看到的模拟资源文件吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-30T13:00:01.550

如果您已经根据 Maven 原型构建了项目结构，那么您的资源包最好位于 Mycompany_xml/src/test/resources 中。然后，您可以使用 mvn test 从项目主目录（即 Mycompany_xml 目录）运行单元测试。

在打包战争时，使用 maven-assembly-plugin 将资源包从 Mycompany_xml/src/test/resources 复制到战争中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T14:04:19.143

添加

```
Mycompany_web/src/main/webapp/WEB-INF/classes/ 
```

到您的单元测试正在运行的类路径。

# android - 带有 MyAdapter 的 ListView，其中包含两个 TextView 和 CheckBox

> ID：10816738
> 
> 赞同：2
> 
> 时间：2012-05-30T12:53:52.620
> 
> 标签：android, checkbox, android-listview

我在将列表项 isChecked 状态与相同原始中的复选框同步时遇到问题。我能够在列表项中设置“已选中”状态，但不知道如何设置复选框的“已选中”状态。我认为 mainListView.setItemChecked 应该做的工作，但它没有。

这是我正在使用的代码：

```
public class Reservation_Activity extends ListActivity  {
int total=0;
private name_price[] lv_arr = {};
private ListView mainListView = null;
final String SETTING_TODOLIST = "todolist";
TextView total_tv;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.reservation);

    total_tv = (TextView) findViewById(R.id.total_sum);
    Button btnSave = (Button) findViewById(R.id.btnSave);
    btnSave.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {

            Toast.makeText(getApplicationContext(),
                    " You clicked Save button", Toast.LENGTH_SHORT).show();

        }
    });

    Button btnClear = (Button) findViewById(R.id.btnClear);
    btnClear.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
            total=0;
            total_tv.setText("Pick and Send");
            Toast.makeText(getApplicationContext(),
                    " You clicked Clear button", Toast.LENGTH_SHORT).show();

            ClearSelections();
        }
    });

    // Prepare an ArrayList of todo items
    ArrayList<name_price> listTODO = PrepareListFromXml();
    this.mainListView = getListView();
    mainListView.setCacheColorHint(0);

    // Bind the data with the list
    lv_arr = (name_price[]) listTODO.toArray(lv_arr);

    mainListView.setAdapter(new MyAdapter(this,android.R.layout.simple_list_item_multiple_choice,lv_arr));

    mainListView.setItemsCanFocus(false);
    mainListView.setChoiceMode(ListView.CHOICE_MODE_MULTIPLE);

    mainListView.setOnItemClickListener(new OnItemClickListener() {
        @Override
        public void onItemClick(AdapterView<?> arg0, View arg1, int position,long arg3) {
            name_price item = (name_price) mainListView.getItemAtPosition(position);

            if(mainListView.isItemChecked(position))
            {
                mainListView.setItemChecked(position, false);
                total = total - item._price;
            }  else  {
                mainListView.setItemChecked(position, true);
                total += item._price;
            }

            total_tv.setText("Total: " + total);

        }

    });

}

private void ClearSelections() {
    total=0;
    // user has clicked clear button so uncheck all the items

    int count = this.mainListView.getAdapter().getCount();

    for (int i = 0; i < count; i++) {
        this.mainListView.setItemChecked(i, false);
    }
}

private ArrayList<name_price> PrepareListFromXml() {
    ArrayList<name_price> todoItems = new ArrayList<name_price>();
    XmlResourceParser todolistXml = getResources().getXml(R.xml.order_items);
    int id=0;

    int eventType = -1;
    while (eventType != XmlResourceParser.END_DOCUMENT) {
        if (eventType == XmlResourceParser.START_TAG) {

            String strNode = todolistXml.getName();
            if (strNode.equals("item")) {
                todoItems.add(new name_price(id,todolistXml.getAttributeValue(null, "title"), Integer.parseInt(todolistXml.getAttributeValue(null, "price"))));
                id++;
            }
        }

        try {
            eventType = todolistXml.next();
        } catch (XmlPullParserException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }
    return todoItems;
}

public class MyAdapter extends ArrayAdapter<name_price> {
    name_price[] items;

    public MyAdapter(Context context, int textViewResourceId,
            name_price[] objects) {
        super(context, textViewResourceId, objects);
        this.items = objects;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        LayoutInflater inflater = getLayoutInflater();
        View row = inflater.inflate(R.layout.list_raw_resevation, parent, false);

        TextView name,price;

        CheckBox ckbx = (CheckBox) row.findViewById(R.id.UpdateCheckBox);

        ckbx.setChecked(mainListView.isItemChecked(position));

        name = (TextView) row.findViewById(R.id.res_name);
        name.setText(items[position]._name);
        price = (TextView) row.findViewById(R.id.res_price);
        price.setText(Integer.toString(items[position]._price));

        return row;
    }

    public name_price getItem(int position) {
        return items[position];
    }

}
}

class name_price {
public String _name;
public int _price;
public int _id;
public CheckBox ckbx;

public name_price(int id, String name, int price)
{
    this._id=id;
    this._name = name;
    this._price = price;
}

public name_price() {
    // TODO Auto-generated constructor stub
}

} 
```

我想我应该根据[这个](http://www.mousetech.com/blog/?p=74)更改 mainListView.setOnItemClickListener 中特定复选框的选中状态，但我找不到办法。

此外，这是原始布局和列表布局（其他人使用）：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="?android:attr/listPreferredItemHeight"
android:padding="6dip">

<LinearLayout
    android:layout_width="0dip"
    android:layout_height="fill_parent"
    android:layout_weight="1"
    android:orientation="horizontal" >

    <TextView
        android:id="@+id/res_name"
        android:layout_width="fill_parent"
        android:layout_height="match_parent"
        android:layout_weight="1"
        android:layout_gravity="center_horizontal"
        android:gravity="center|left"
        android:singleLine="true"
        android:text="lalalalalalalalalallaallllaaaa"
        android:textColor="#ffffff" />

    <TextView
        android:id="@+id/res_price"
        android:layout_width="wrap_content"
        android:layout_height="match_parent"
        android:layout_gravity="center"
        android:layout_marginRight="10dp"
        android:gravity="center"
        android:text="90"
        android:textColor="#ffffff"
        android:textSize="15dp" />
</LinearLayout>

<CheckBox android:text="" 
          android:id="@+id/UpdateCheckBox" 
          android:layout_width="wrap_content" 
          android:layout_height="wrap_content"
          android:focusable="false"  />
</LinearLayout> 
```

列表布局：

```
<!--?xml version="1.0" encoding="utf-8"?-->
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical" android:layout_width="fill_parent" 
    android:layout_height="fill_parent" android:background="#81BEF7" 
    android:scrollbars="vertical">
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android" 
    android:id="@+id/Buttonlayout" android:orientation="horizontal" 
    android:layout_width="fill_parent" android:layout_height="wrap_content" 
    android:height="32dp" android:gravity="left|top" android:background="#2B60DE" 
    android:paddingTop="2dp" android:paddingBottom="2dp">
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android" 
    android:id="@+id/Buttonlayout2" android:orientation="horizontal" 
    android:layout_height="wrap_content" android:gravity="left|center_vertical" 
    android:layout_width="wrap_content" android:layout_gravity="left|center_vertical">

<TextView android:id="@+id/total_sum" android:layout_width="fill_parent" 
    android:layout_height="fill_parent" android:textStyle="bold" 
    android:textColor="#FFFFFF" android:text="@string/list_header" 
    android:textSize="15sp" android:gravity="center_vertical" 
    android:paddingLeft="5dp">
</TextView>
</LinearLayout>

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android" 
    android:id="@+id/Buttonlayout22" android:orientation="horizontal" 
    android:layout_height="wrap_content" android:gravity="right" 
    android:layout_width="fill_parent" android:layout_gravity="right|center_vertical">

<Button android:id="@+id/btnSave" android:layout_width="wrap_content" 
    android:layout_height="wrap_content" android:text="Send" android:textSize="15sp" 
    android:layout_marginLeft="10px" android:layout_marginRight="10px" 
    android:layout_marginBottom="2px" android:layout_marginTop="2px" 
    android:height="15dp" android:width="70dp">
</Button>

<Button android:id="@+id/btnClear" android:layout_width="wrap_content" 
    android:layout_height="wrap_content" android:text="Clear" android:textSize="15sp" 
    android:layout_marginLeft="10px" android:layout_marginRight="10px" 
    android:layout_marginBottom="2px" android:layout_marginTop="2px" 
    android:height="15dp" android:width="70dp">
</Button>

</LinearLayout>
</LinearLayout>

<TableLayout android:id="@+id/TableLayout01" android:layout_width="fill_parent" 
    android:layout_height="fill_parent" >
<TableRow>
    <ListView android:id="@android:id/list" android:layout_width="wrap_content" 
        android:textColor="#000000" android:layout_height="wrap_content">
    </ListView>
</TableRow>
</TableLayout>
</LinearLayout> 
```

谢谢！是

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T16:07:26.163

早上好，我知道这应该可以解决您的问题：

```
public class Reservation_Activity extends ListActivity {
int total = 0;
private name_price[] lv_arr = {};
private ListView mainListView = null;
final String SETTING_TODOLIST = "todolist";
TextView total_tv;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.list_raw_resevation);

    total_tv = (TextView) findViewById(R.id.total_sum);
    Button btnSave = (Button) findViewById(R.id.btnSave);
    btnSave.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {

            Toast.makeText(getApplicationContext(),
                    " You clicked Save button", Toast.LENGTH_SHORT).show();

        }
    });

    Button btnClear = (Button) findViewById(R.id.btnClear);
    btnClear.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
            total = 0;
            total_tv.setText("Pick and Send");
            Toast.makeText(getApplicationContext(),
                    " You clicked Clear button", Toast.LENGTH_SHORT).show();

            ClearSelections();
        }
    });

    // Prepare an ArrayList of todo items
    ArrayList<name_price> listTODO = PrepareListFromXml();
    this.mainListView = getListView();
    mainListView.setCacheColorHint(0);

    // Bind the data with the list
    lv_arr = (name_price[]) listTODO.toArray(lv_arr);

    mainListView.setAdapter(new MyAdapter(this,
            android.R.layout.simple_list_item_multiple_choice, lv_arr));

    mainListView.setItemsCanFocus(false);
    mainListView.setChoiceMode(ListView.CHOICE_MODE_MULTIPLE);

    mainListView.setOnItemClickListener(new OnItemClickListener() {
        @Override
        public void onItemClick(AdapterView<?> arg0, View arg1,
                int position, long arg3) {
            name_price item = (name_price) mainListView
                    .getItemAtPosition(position);

            if (mainListView.isItemChecked(position)) {
                total = total - item._price;
            } else {
                total += item._price;
            }
            mainListView.setItemChecked(position,
                    mainListView.isItemChecked(position));
            item.ckbx.setChecked(mainListView.isItemChecked(position));
            total_tv.setText("Total: " + total);
                }
            });
        }
        private void ClearSelections() {
            total = 0;
            int count = this.mainListView.getAdapter().getCount();
            for (int i = 0; i < count; i++) {
                this.mainListView.setItemChecked(i, false);
            }
        }
        private ArrayList<name_price> PrepareListFromXml() {
            ArrayList<name_price> todoItems = new ArrayList<name_price>();
            XmlResourceParser todolistXml = getResources().getXml(R.xml.order_items);
            int id = 0;
            int eventType = -1;
            while (eventType != XmlResourceParser.END_DOCUMENT) {
                if (eventType == XmlResourceParser.START_TAG) {
                    String strNode = todolistXml.getName();
                    if (strNode.equals("item")) {
                        todoItems.add(new name_price(id, todolistXml.getAttributeValue(null, "title"),Integer.parseInt(todolistXml.getAttributeValue(null,"price"))));
                        id++;
                    }
                }
                try {
                    eventType = todolistXml.next();
                } catch (XmlPullParserException e) {
                    e.printStackTrace();
                } catch (IOException e) {
                    e.printStackTrace();
                }
            }
            return todoItems;
        }
        public class MyAdapter extends ArrayAdapter<name_price> {
            name_price[] items;
            View row;
            CheckBox ckbx;
            public MyAdapter(Context context, int textViewResourceId,name_price[] objects) {
            super(context, textViewResourceId, objects);
            this.items = objects;
        }
        @Override
        public View getView(final int position, View convertView, ViewGroup parent) {
            LayoutInflater inflater = getLayoutInflater();
            row = inflater.inflate(R.layout.reservation, parent, false);
            TextView name, price;
            ckbx = (CheckBox) row.findViewById(R.id.UpdateCheckBox);
            ckbx.setChecked(mainListView.isItemChecked(position));
            ckbx.setOnClickListener(new View.OnClickListener() {
                @Override
                public void onClick(View v) {
                    name_price item = (name_price) mainListView.getItemAtPosition(position);
                    if (ckbx.isChecked()) {
                        total = total - item._price;
                    } else {
                        total += item._price;
                    }
                    mainListView.setItemChecked(position,ckbx.isChecked());
                    total_tv.setText("Total: " + total);
                }
            });
            items[position].setCkbx(ckbx);
            name = (TextView) row.findViewById(R.id.res_name);
            name.setText(items[position]._name);
            price = (TextView) row.findViewById(R.id.res_price);
            price.setText(Integer.toString(items[position]._price));
            return row;
        }
        public name_price getItem(int position) {
            return items[position];
        }
    }
} 
```

和：

```
class name_price {
public String _name;
public int _price;
public int _id;
public CheckBox ckbx;

public name_price(int id, String name, int price) {
    this._id = id;
    this._name = name;
    this._price = price;
}

public void setCkbx(CheckBox ckbx) {
    this.ckbx = ckbx;
}
} 
```

# android - 软键盘打开时是否可以触发事件

> ID：10816742
> 
> 赞同：1
> 
> 时间：2012-05-30T12:54:02.873
> 
> 标签：android

我想在 android 中打开或关闭软键板时通知（事件侦听器）？是否可以 ？如果可能的话，请告诉我的方式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T12:57:28.940

你可以这样实现：

```
public static InputMethodManager imm = null;
            if(!(imm==null)){

            imm.getEnabledInputMethodList();
            imm.toggleSoftInput(InputMethodManager.SHOW_FORCED,1);

            // here do whatever you want to do
            }else
            {

            } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T13:41:02.253

检测键盘当前是否打开：

```
InputMethodManager imm = 
    (InputMethodManager)getSystemService(Context.INPUT_METHOD_SERVICE);

//keyboard is visible       
if(imm != null) {
    //do something, e.g., hide the keyboard like so : 
    //imm.hideSoftInputFromWindow(mEditText.getWindowToken(), 0);
    //or fire an event like so:
    //mButton.performClick();
} else {
    //do something
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-21T12:31:38.713

```
 setContentView(mView);
  mView.getViewTreeObserver().addOnGlobalLayoutListener(
    new OnGlobalLayoutListener() {
    @Override
    public void onGlobalLayout() {
        Rect r = new Rect();
        mView.getWindowVisibleDisplayFrame(r);
            int heightDiff = mView.getRootView().getHeight()
                        - (r.bottom - r.top);
        if (heightDiff > 100) {
        //Keybord Action change
                    }
    }
}); 
```

# google-maps - 谷歌从一个标记映射多个测地线路径

> ID：10816744
> 
> 赞同：1
> 
> 时间：2012-05-30T12:54:12.017
> 
> 标签：google-maps, google-maps-api-3

我正在尝试创建一个谷歌地图，它将显示多条测地线，这些测地线从一个标记到地图上的 2 个或更多单独的标记。我可以在地图上放置多个标记，但我无法弄清楚如何从地图上的一个标记开始有 2 条或更多路径。目前这是它的显示方式

![当前地图](../Images/7801d65009e282df562abd5ddeb93179.png)

这是我为地图编辑的脚本

```
<script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?sensor=false&libraries=geometry"></script>
<script type="text/javascript">

  var geodesicPoly1;
  var geodesicPoly2;
  var marker1;
  var marker2;
  var marker3;

  function initialize() {
    var myOptions = {
      zoom: 4,
      center: new google.maps.LatLng(39.0997, -94.5786),
      mapTypeId: google.maps.MapTypeId.ROADMAP
    };

    var map = new google.maps.Map(document.getElementById('map_canvas'), myOptions);

    marker1 = new google.maps.Marker({
      map: map,
      draggable: false,
      position: new google.maps.LatLng(33.7490, -84.3880)
    });

    marker2 = new google.maps.Marker({
      map: map,
      draggable: false,
      position: new google.maps.LatLng(33.4484, -112.0740)
    });

    marker3 = new google.maps.Marker({
      map: map,
      draggable: false,
      position: new google.maps.LatLng(37.9577, -121.2908)
    });

    var geodesicOptions = {
      strokeColor: '#77bf44',
      strokeOpacity: 1.0,
      strokeWeight: 3,
      geodesic: true,
      map: map
    };

    geodesicPoly1 = new google.maps.Polyline(geodesicOptions);
    update();

    geodesicPoly2 = new google.maps.Polyline(geodesicOptions);
    update2();
  }

  function update() {
    var path = [marker1.getPosition(), marker2.getPosition()];
    geodesicPoly1.setPath(path);

    var heading = google.maps.geometry.spherical.computeHeading(path[0], path[1]);
    document.getElementById('heading').value = heading;
    document.getElementById('origin').value = path[0].toString();
    document.getElementById('destination').value = path[1].toString();
  }

  function update2() {
    var path = [marker1.getPosition(), marker3.getPosition()];
    geodesicPoly2.setPath(path);

    var heading = google.maps.geometry.spherical.computeHeading(path[0], path[1]);
    document.getElementId('heading').value = heading;
    document.getElementId('origin').value = path[0].toString();
    document.getElementId('destination').value = path[1].toString();
  }

  google.maps.event.addDomListener(window, 'load', initialize);

</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T13:48:33.727

折线只能在两点之间绘制。您需要创建多个折线变量。

```
<html>
<head>
<script src='http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js' type='text/javascript'></script>
  <script type="text/javascript"
    src="https://maps.googleapis.com/maps/api/js?sensor=false&libraries=geometry"></script>
  <script type="text/javascript">

    var geodesicPoly1;
    var geodesicPoly2;
    var marker1;
    var marker2;
    var marker3;
    var heading = "cat";
    var map;

    function initialize()
    {
      var myOptions = {
        zoom: 4,
        center: new google.maps.LatLng(39.0997, -94.5786),
        mapTypeId: google.maps.MapTypeId.ROADMAP
      };

      map = new google.maps.Map(document.getElementById('map_canvas'),
          myOptions);

      marker1 = new google.maps.Marker({
        map: map,
        draggable: false,
        position: new google.maps.LatLng(33.7490, -84.3880)
      });

      marker2 = new google.maps.Marker({
        map: map,
        draggable: false,
        position: new google.maps.LatLng(33.4484, -112.0740)
      });

      marker3 = new google.maps.Marker({
        map: map,
        draggable: false,
        position: new google.maps.LatLng(37.9577, -121.2908)
      });

      var geodesicOptions = {
        strokeColor: '#77bf44',
        strokeOpacity: 1.0,
        strokeWeight: 3,
        geodesic: true,
        map: map
      };
      geodesicPoly1 = new google.maps.Polyline(geodesicOptions);
      geodesicPoly2 = new google.maps.Polyline(geodesicOptions);

      update();
      update2();

    }

    function update() {
      var path = [marker1.getPosition(), marker2.getPosition()];

      geodesicPoly1.setPath(path);
      var heading = google.maps.geometry.spherical.computeHeading(path[0],
          path[1]);
      document.getElementById('heading').value = heading;
      document.getElementById('origin').value = path[0].toString();
      document.getElementById('destination').value = path[1].toString();
    }

    function update2() {
      var path2 = [marker1.getPosition(), marker3.getPosition()];

      geodesicPoly2.setPath(path2);
      var heading2 = google.maps.geometry.spherical.computeHeading(path2[0],
          path2[1]);
      document.getElementById('heading').value = heading;
      document.getElementById('origin').value = path2[0].toString();
      document.getElementById('destination').value = path2[1].toString();
    }

    google.maps.event.addDomListener(window, 'load', initialize);
  </script>
</head>
<body >
    <div id="map_canvas" style='height:500px; width:800px;'></div>
    <div id='heading'></div>
    <div id='origin'></div>
    <div id='destination'></div>
</body>
</html> 
```

![在此处输入图像描述](../Images/6bfa945a0f7a2e88532c6366ed8d5595.png)

# wordpress - 从 wordpress 主题的顶部栏中删除该行

> ID：10816748
> 
> 赞同：0
> 
> 时间：2012-05-30T12:54:20.300
> 
> 标签：wordpress

**现在正在解决以下问题：**

我是第一次在 wordpress 上工作，目前我只面临一个添加顶部栏的小问题，该顶部栏将来自以下代码。在简单的 html 中，它工作得非常好，但是当我将此代码放在 index.php 页面顶部的索引文件中时，它会产生一些错误。我想要做的是顶部栏应该出现在主题中使用的所有其他页面上，并且看起来非常好请让我知道哪个是放置以下代码的有效位置。

注意：我默认使用 wordpress 主题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T12:59:59.027

如果您的意图是为编辑器显示选项，您应该查看 WordPress 工具栏： [http ://wp.smashingmagazine.com/2012/03/01/inside-the-wordpress-toolbar/](http://wp.smashingmagazine.com/2012/03/01/inside-the-wordpress-toolbar/)

如果要编辑所有用户的标题。主题将有一个 header.php，您可以对其进行编辑。[推荐的方法是在子主题](http://codex.wordpress.org/Child_Themes)中进行更改。

# c# - 如何从activex或dll调用Javascript函数

> ID：10816749
> 
> 赞同：2
> 
> 时间：2012-05-30T12:54:25.127
> 
> 标签：c#, javascript, html, activex

我发现了类似的问题[，如何在 c# 中从 activex 或 dll 调用 java 脚本函数，](https://stackoverflow.com/q/2296492/1058346)但这并没有为我提供解决方案。然后我继续搜索，最后我得到了 msdn 链接

[http://msdn.microsoft.com/en-us/library/ms171712.aspx](http://msdn.microsoft.com/en-us/library/ms171712.aspx)

**从 Internet Explorer 中托管的 UserControl 访问 DOM**

创建您自己的 UserControl 类的自定义派生类。有关详细信息，请参阅如何：创作复合控件。

将以下代码放入 UserControl 的 Load 事件处理程序中：

```
 HtmlDocument doc = null;

    private void UserControl1_Load(object sender, EventArgs e)
    {
        if (this.Site != null)
        {
            doc = (HtmlDocument)this.Site.GetService(typeof(HtmlDocument));
        }
    } 
```

不幸的是，我仍然无法在我的班级中获取 DOM 对象。我试图看看我在 this.Site 中得到了什么，所以我把它放在了一个消息框上

```
 MessageBox.Show(this.Site.ToString()); 
```

这让我觉得奇怪的是

```
System.Windows.Forms.Control+AxSourcingSite 
```

请帮我..

# java - 在groovy中定义类实现接口但不能调用方法

> ID：10816751
> 
> 赞同：0
> 
> 时间：2012-05-30T12:54:36.077
> 
> 标签：java, interface, groovy, cuke4duke

我在 grails 项目中使用 cuke4duke。features/support/env.groovy 有

```
import org.openqa.selenium.htmlunit.HtmlUnitDriver
import org.openqa.selenium.JavascriptExecutor
import com.gargoylesoftware.htmlunit.BrowserVersion
import com.gargoylesoftware.htmlunit.ConfirmHandler
import com.gargoylesoftware.htmlunit.Page
...    
this.metaClass.mixin(cuke4duke.GroovyDsl)
...
public class ConfirmationHandler implements ConfirmHandler {

   boolean handleConfirm(Page page, String message) {
      called = true
      if (text == null || text.length()==0) {
         return answer
      }
      if (message.contains(text)) {
         return answer
      } 
      throw new RuntimeException("Expected '${text}' in confirmation message but got '${message}'")    
   }
   public String text = null
   public boolean answer = false
   public boolean called = false
}
...
Before() {
...
     browser = new HtmlUnitDriver(BrowserVersion.FIREFOX_3_6)
     confirmation = new ConfirmationHandler()
     browser.setConfirmHandler((ConfirmHandler) confirmation) // ERROR !
...
} 
```

似乎该类已正确编译，但 groovy 无法调用 setConfirmHandler ，因为它需要一个 ConfirmHandler ......但提供的对象的类实现了接口！我检查了“confirmation instanceof ConfirmHandler”打印为真。

注意：HtmlUnit 包是用 Java 编写的。

有任何想法吗？（这是堆栈跟踪的顶部）

> [INFO] org.codehaus.groovy.runtime.InvokerInvocationException：groovy.lang.MissingMethodException：没有方法签名：org.openqa.selenium.htmlunit.HtmlUnitDriver.setConfirmHandler（）适用于参数类型：（ConfirmationHandler）值：[ConfirmationHandler @6c08bae7] (NativeException)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T13:00:33.187

你不需要这样做：

```
browser.getWebClient().setConfirmHandler( confirmation ) 
```

因为我看不到 HtmlUnitDriver 有一个`setConfirmHandler`方法......

# function - 如何将所有单元格的内容附加到“.jpg”列中？

> ID：10816755
> 
> 赞同：3
> 
> 时间：2012-05-30T12:54:48.013
> 
> 标签：function, append, concatenation, openoffice-calc

例如，“A”列中的一个单元格有文本`american-carbide`，我需要在它后面加上“.jpg”作为结果`american-carbide.jpg`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T13:09:21.947

`=CONCATENATE(A1;".jpg")`应该做的伎俩。

# android - “评价此应用” - 手机上 Google Play 商店应用中的链接

> ID：10816757
> 
> 赞同：290
> 
> 时间：2012-05-30T12:54:52.873
> 
> 标签：android, android-intent, google-play

我想在 Android 应用程序中放置一个“评价此应用程序”链接，以便在用户手机上的 Google Play 商店应用程序中打开应用程序列表。

1.  我必须编写什么代码才能在手机上的 Google Play 商店应用程序中创建`market://`或`http://`打开链接？
2.  你把代码放在哪里？
3.  有没有人有这个的示例实现？
4.  您是否必须指定放置`market://`or`http://`链接的屏幕，以及哪个最好使用 - `market://`or `http://`？

* * *

## 回答 #1

> 赞同：591
> 
> 时间：2012-05-30T13:01:49.877

我使用以下代码从我的应用程序打开 Play 商店：

```
 val uri: Uri = Uri.parse("market://details?id=$packageName")
            val goToMarket = Intent(Intent.ACTION_VIEW, uri)
            // To count with Play market backstack, After pressing back button, 
            // to taken back to our application, we need to add following flags to intent. 
            goToMarket.addFlags(Intent.FLAG_ACTIVITY_NO_HISTORY or
                    Intent.FLAG_ACTIVITY_NEW_DOCUMENT or
                    Intent.FLAG_ACTIVITY_MULTIPLE_TASK)
            try {
                startActivity(goToMarket)
            } catch (e: ActivityNotFoundException) {
                startActivity(Intent(Intent.ACTION_VIEW,
                        Uri.parse("http://play.google.com/store/apps/details?id=$packageName")))
            } 
```

选项 2：是使用 resolveActivity 而不是 try..catch

```
if (sendIntent.resolveActivity(getPackageManager()) != null) {
     startActivity(chooser);
} else {
    openUrl();
} 
```

* * *

## 回答 #2

> 赞同：54
> 
> 时间：2015-09-22T15:14:32.343

这是一个有效且最新的代码:)

```
/*
* Start with rating the app
* Determine if the Play Store is installed on the device
*
* */
public void rateApp()
{
    try
    {
        Intent rateIntent = rateIntentForUrl("market://details");
        startActivity(rateIntent);
    }
    catch (ActivityNotFoundException e)
    {
        Intent rateIntent = rateIntentForUrl("https://play.google.com/store/apps/details");
        startActivity(rateIntent);
    }
}

private Intent rateIntentForUrl(String url)
{
    Intent intent = new Intent(Intent.ACTION_VIEW, Uri.parse(String.format("%s?id=%s", url, getPackageName())));
    int flags = Intent.FLAG_ACTIVITY_NO_HISTORY | Intent.FLAG_ACTIVITY_MULTIPLE_TASK;
    if (Build.VERSION.SDK_INT >= 21)
    {
        flags |= Intent.FLAG_ACTIVITY_NEW_DOCUMENT;
    }
    else
    {
        //noinspection deprecation
        flags |= Intent.FLAG_ACTIVITY_CLEAR_WHEN_TASK_RESET;
    }
    intent.addFlags(flags);
    return intent;
} 
```

把代码放在`Activity`你想调用它的地方。
当用户单击按钮对应用程序进行评分时，只需调用该`rateApp()`函数。

* * *

## 回答 #3

> 赞同：31
> 
> 时间：2015-04-26T12:53:21.530

我总是使用这段代码：

```
startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse("market://details?id=PackageName"))); 
```

* * *

## 回答 #4

> 赞同：26
> 
> 时间：2020-08-13T22:25:50.287

# Kotlin 解决方案（2020 年 Google 的应用内评论 API）：

您现在可以立即使用 Google 提供的应用内评论 API。

首先，在您的`build.gradle(app)`文件中，添加以下依赖项（完整的设置可以在[这里](https://developer.android.com/guide/playcore#java-kotlin)找到）

```
dependencies {
    // This dependency is downloaded from the Google’s Maven repository.
    // So, make sure you also include that repository in your project's build.gradle file.
    implementation 'com.google.android.play:core:1.8.0'
    implementation 'com.google.android.play:core-ktx:1.8.1'
} 
```

创建一个方法并将此代码放入其中：

```
val manager = ReviewManagerFactory.create(context)
val request = manager.requestReviewFlow()
request.addOnCompleteListener { request ->
    if (request.isSuccessful) {
        // We got the ReviewInfo object
        val reviewInfo = request.result
        val flow = manager.launchReviewFlow(activity, reviewInfo)
        flow.addOnCompleteListener { _ ->
          // The flow has finished. The API does not indicate whether the user
          // reviewed or not, or even whether the review dialog was shown. Thus, no
         // matter the result, we continue our app flow.
        }
    } else {
        // There was some problem, continue regardless of the result.
    }
} 
```

[来源](https://developer.android.com/guide/playcore/in-app-review/kotlin-java#kotlin)

[![在此处输入图像描述](../Images/6d6607b276d58c3e6370b1df6469bd51.png)](https://i.stack.imgur.com/pvqPq.png)

* * *

## 回答 #5

> 赞同：22
> 
> 时间：2014-08-04T14:30:59.583

这是如果您在 Google Play 商店和 Amazon Appstore 中发布您的应用程序。我还处理用户（尤其是在中国）没有应用商店和浏览器的情况。

```
public void goToMyApp(boolean googlePlay) {//true if Google Play, false if Amazone Store
    try {
       startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse((googlePlay ? "market://details?id=" : "amzn://apps/android?p=") +getPackageName())));
    } catch (ActivityNotFoundException e1) {
        try {
            startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse((googlePlay ? "http://play.google.com/store/apps/details?id=" : "http://www.amazon.com/gp/mas/dl/android?p=") +getPackageName())));
        } catch (ActivityNotFoundException e2) {
            Toast.makeText(this, "You don't have any app that can open this link", Toast.LENGTH_SHORT).show();
        }
    }
} 
```

* * *

## 回答 #6

> 赞同：10
> 
> 时间：2012-05-30T13:09:57.343

您始终可以从[PackageManager类调用](http://developer.android.com/reference/android/content/pm/PackageManager.html)[getInstalledPackages()](http://developer.android.com/reference/android/content/pm/PackageManager.html#getInstalledPackages%28int%29)并检查以确保安装了市场类。您还可以使用[queryIntentActivities()](http://developer.android.com/reference/android/content/pm/PackageManager.html#queryIntentActivities%28android.content.Intent,%20int%29)来确保您构建的 Intent 能够被某些东西处理，即使它不是市场应用程序。这实际上可能是最好的事情，因为它是最灵活和最健壮的。

您可以通过以下方式检查市场应用程序是否存在

```
Intent intent = new Intent();
intent.setAction(Intent.ACTION_VIEW);
intent.setData(Uri.parse("market://search?q=foo"));
PackageManager pm = getPackageManager();
List<ResolveInfo> list = pm.queryIntentActivities(intent, 0); 
```

如果列表至少有一个条目，那么市场就在那里。

您可以使用以下命令在您的应用程序页面上启动 Android Market，它更加自动化：

```
Intent i = new Intent(Intent.ACTION_VIEW);
i.setData(Uri.parse("market://details?id=" + getPackageName()));
startActivity(i); 
```

如果你想在你的模拟器上测试这个，你可能没有安装市场：有关更多详细信息，请参阅这些链接：

[如何在 Google Android Emulator 中启用 Android Market](http://www.howtogeek.com/howto/21862/how-to-enable-the-android-market-in-the-google-android-emulator/)

[在 Android 模拟器上安装 Google Play](http://www.piotrbuda.eu/2012/05/installing-google-play-on-android.html)

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2015-07-16T21:52:00.100

我使用这种方法让用户评价我的应用程序：

```
public static void showRateDialog(final Context context) {
    AlertDialog.Builder builder = new AlertDialog.Builder(context)
            .setTitle("Rate application")
            .setMessage("Please, rate the app at PlayMarket")
            .setPositiveButton("RATE", new DialogInterface.OnClickListener() {
                @Override
                public void onClick(DialogInterface dialog, int which) {
                    if (context != null) {
                        String link = "market://details?id=";
                        try {
                            // play market available
                            context.getPackageManager()
                                    .getPackageInfo("com.android.vending", 0);
                        // not available
                        } catch (PackageManager.NameNotFoundException e) {
                            e.printStackTrace();
                            // should use browser
                            link = "https://play.google.com/store/apps/details?id=";
                        }
                        // starts external action
                        context.startActivity(new Intent(Intent.ACTION_VIEW, 
                                Uri.parse(link + context.getPackageName())));
                    }
                }
            })
            .setNegativeButton("CANCEL", null);
    builder.show();
} 
```

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2018-06-18T11:06:23.563

**Play 商店评分**

```
 btn_rate_us.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                Uri uri = Uri.parse("market://details?id=" + getPackageName());
                Intent goToMarket = new Intent(Intent.ACTION_VIEW, uri);
                // To count with Play market backstack, After pressing back button,
                // to taken back to our application, we need to add following flags to intent.
                goToMarket.addFlags(Intent.FLAG_ACTIVITY_NO_HISTORY |
                        Intent.FLAG_ACTIVITY_NEW_DOCUMENT |
                        Intent.FLAG_ACTIVITY_MULTIPLE_TASK);
                try {
                    startActivity(goToMarket);
                } catch (ActivityNotFoundException e) {
                    startActivity(new Intent(Intent.ACTION_VIEW,
                            Uri.parse("http://play.google.com/store/apps/details?id=" + getPackageName())));
                }
            }
        }); 
```

* * *

## 回答 #9

> 赞同：6
> 
> 时间：2019-02-10T09:51:48.257

一个科特林版本

```
fun openAppInPlayStore() {
    val uri = Uri.parse("market://details?id=" + context.packageName)
    val goToMarketIntent = Intent(Intent.ACTION_VIEW, uri)

    var flags = Intent.FLAG_ACTIVITY_NO_HISTORY or Intent.FLAG_ACTIVITY_MULTIPLE_TASK
    flags = if (Build.VERSION.SDK_INT >= 21) {
        flags or Intent.FLAG_ACTIVITY_NEW_DOCUMENT
    } else {
        flags or Intent.FLAG_ACTIVITY_CLEAR_TASK
    }
    goToMarketIntent.addFlags(flags)

    try {
        startActivity(context, goToMarketIntent, null)
    } catch (e: ActivityNotFoundException) {
        val intent = Intent(Intent.ACTION_VIEW,
                Uri.parse("http://play.google.com/store/apps/details?id=" + context.packageName))

        startActivity(context, intent, null)
    }
} 
```

* * *

## 回答 #10

> 赞同：5
> 
> 时间：2020-08-13T22:20:50.033

# Java 解决方案（2020 年 Google 的应用内评论 API）：

您现在可以立即使用 Google 提供的应用内评论 API。

首先，在您的`build.gradle(app)`文件中，添加以下依赖项（完整的设置可以在[这里](https://developer.android.com/guide/playcore#java-kotlin)找到）

```
dependencies {
    // This dependency is downloaded from the Google’s Maven repository.
    // So, make sure you also include that repository in your project's build.gradle file.
    implementation 'com.google.android.play:core:1.8.0'
} 
```

将此方法添加到您的`Activity`：

```
void askRatings() {
    ReviewManager manager = ReviewManagerFactory.create(this);
    Task<ReviewInfo> request = manager.requestReviewFlow();
    request.addOnCompleteListener(task -> {
        if (task.isSuccessful()) {
            // We can get the ReviewInfo object
            ReviewInfo reviewInfo = task.getResult();
            Task<Void> flow = manager.launchReviewFlow(this, reviewInfo);
            flow.addOnCompleteListener(task2 -> {
                // The flow has finished. The API does not indicate whether the user
                // reviewed or not, or even whether the review dialog was shown. Thus, no
                // matter the result, we continue our app flow.
            });
        } else {
            // There was some problem, continue regardless of the result.
        }
    });
} 
```

然后你可以简单地调用它使用

```
askRatings(); 
```

[来源](https://developer.android.com/guide/playcore/in-app-review/kotlin-java#java)

[![在此处输入图像描述](../Images/4ebb5f97a80c9f6ea760fc4291b2699c.png)](https://i.stack.imgur.com/nDukv.png)

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2016-04-28T11:18:07.787

你可以用这个，它对我有用

```
public static void showRateDialogForRate(final Context context) {
    AlertDialog.Builder builder = new AlertDialog.Builder(context)
            .setTitle("Rate application")
            .setMessage("Please, rate the app at PlayMarket")
            .setPositiveButton("RATE", new DialogInterface.OnClickListener() {
                @Override
                public void onClick(DialogInterface dialog, int which) {
                    if (context != null) {
                        ////////////////////////////////
                        Uri uri = Uri.parse("market://details?id=" + context.getPackageName());
                        Intent goToMarket = new Intent(Intent.ACTION_VIEW, uri);
                        // To count with Play market backstack, After pressing back button,
                        // to taken back to our application, we need to add following flags to intent.
                        goToMarket.addFlags(Intent.FLAG_ACTIVITY_NO_HISTORY |
                                Intent.FLAG_ACTIVITY_CLEAR_WHEN_TASK_RESET |
                                Intent.FLAG_ACTIVITY_MULTIPLE_TASK);
                        try {
                            context.startActivity(goToMarket);
                        } catch (ActivityNotFoundException e) {
                            context.startActivity(new Intent(Intent.ACTION_VIEW,
                                    Uri.parse("http://play.google.com/store/apps/details?id=" + context.getPackageName())));
                        }

                    }
                }
            })
            .setNegativeButton("CANCEL", null);
    builder.show();
} 
```

* * *

## 回答 #12

> 赞同：4
> 
> 时间：2017-05-14T04:38:55.600

关于基于 getPackageName() 策略实现的所有答案的一点是，如果您使用相同的代码库构建具有不同应用程序 ID 的多个应用程序（例如，一个白标产品）。

* * *

## 回答 #13

> 赞同：4
> 
> 时间：2021-01-22T05:53:37.113

**从现在开始，您可以使用[Google 的 In App Rating 功能](https://developer.android.com/guide/playcore/in-app-review)。**

**[这是 Kotlin/Java 集成官方指南](https://developer.android.com/guide/playcore/in-app-review/kotlin-java#java)**

> Google Play 应用内评论 API 可让您提示用户提交 Play 商店评分和评论，而无需离开您的应用或游戏。
> 
> 通常，应用内审核流程（见图 1）可以在应用的整个用户旅程中随时触发。在流程中，用户可以使用 1 到 5 星系统对您的应用程序进行评分并添加可选评论。提交后，评论将发送到 Play 商店并最终显示。

[![sc](../Images/8f4501778b0c59b777b40588186fc1fb.png)](https://i.stack.imgur.com/hjZWC.jpg)

* * *

## 回答 #14

> 赞同：3
> 
> 时间：2013-02-20T03:21:40.723

另一种可能对您有用的方法是 Linkify。如果我有一个要求用户对应用程序评分的 TextView，我可以链接文本中的几个单词，以便突出显示它们，当用户触摸它们时，Play 商店就会打开，准备好供他们查看：

```
class playTransformFilter implements TransformFilter {
   public String transformUrl(Matcher match, String url) {
        return "market://details?id=com.qwertyasd.yourapp";
   }
}

class playMatchFilter implements MatchFilter {
    public boolean acceptMatch(CharSequence s, int start, int end) {
        return true;
    }
}
text1 = (TextView) findViewById(R.id.text1);
text1.setText("Please rate it.");
final Pattern playMatcher = Pattern.compile("rate it");
Linkify.addLinks(text1, playMatcher, "", 
                   new playMatchFilter(), new playTransformFilter()); 
```

* * *

## 回答 #15

> 赞同：3
> 
> 时间：2019-12-06T12:31:25.987

[我通过结合这个](https://stackoverflow.com/a/32720632)和[这个](https://stackoverflow.com/a/10816981)答案来使用以下方法，而不*使用*基于异常的编程，并且还支持 API 21 之前的意图标志。

```
@SuppressWarnings("deprecation")
private Intent getRateIntent()
{
  String url        = isMarketAppInstalled() ? "market://details" : "https://play.google.com/store/apps/details";
  Intent rateIntent = new Intent(Intent.ACTION_VIEW, Uri.parse(String.format("%s?id=%s", url, getPackageName())));
  int intentFlags   = Intent.FLAG_ACTIVITY_NO_HISTORY | Intent.FLAG_ACTIVITY_MULTIPLE_TASK;
  intentFlags      |= Build.VERSION.SDK_INT >= 21 ? Intent.FLAG_ACTIVITY_NEW_DOCUMENT : Intent.FLAG_ACTIVITY_CLEAR_WHEN_TASK_RESET;
  rateIntent.addFlags(intentFlags);
  return rateIntent;
}

private boolean isMarketAppInstalled()
{
  Intent marketIntent = new Intent(Intent.ACTION_VIEW, Uri.parse("market://search?q=anyText"));
  return getPackageManager().queryIntentActivities(marketIntent, 0).size() > 0;
}

// use
startActivity(getRateIntent()); 
```

* * *

由于`FLAG_ACTIVITY_CLEAR_WHEN_TASK_RESET`API 21 不推荐使用意图标志`@SuppressWarnings("deprecation")`，因此我在 getRateIntent 方法上使用该标记，因为我的应用程序目标 SDK 低于 API 21。

* * *

我还尝试了他们网站上建议的*官方* [Google 方式](https://developer.android.com/distribute/marketing-tools/linking-to-google-play#android-app)（2019 年 12 月 6 日）。据我所知，如果未安装 Play Store 应用程序，它无法处理此情况：

```
Intent intent = new Intent(Intent.ACTION_VIEW);
intent.setData(Uri.parse(
    "https://play.google.com/store/apps/details?id=com.example.android"));
intent.setPackage("com.android.vending");
startActivity(intent); 
```

* * *

## 回答 #16

> 赞同：3
> 
> 时间：2020-06-10T17:07:13.393

在您的活动类中声明一个方法。然后复制并粘贴下面的代码。

```
private void OpenAppInPlayStore(){

    Uri uri = Uri.parse("market://details?id=" + this.getPackageName());
    Intent goToMarket = new Intent(Intent.ACTION_VIEW, uri);
    // To count with Play market backstack, After pressing back button,
    // to taken back to our application, we need to add following flags to intent.
    goToMarket.addFlags(Intent.FLAG_ACTIVITY_NO_HISTORY |
            Intent.FLAG_ACTIVITY_NEW_DOCUMENT |
            Intent.FLAG_ACTIVITY_MULTIPLE_TASK);
    try {
        startActivity(goToMarket);
    } catch (ActivityNotFoundException e) {
        startActivity(new Intent(Intent.ACTION_VIEW,
                Uri.parse("http://play.google.com/store/apps/details?id=" + this.getPackageName())));
    }

} 
```

现在从代码的任何位置调用此方法。

按照我的实际项目中的下图进行操作。

[![在此处输入图像描述](../Images/be048db0490fc32c3351d2b744e14bc6.png)](https://i.stack.imgur.com/dcGfw.jpg)

* * *

## 回答 #17

> 赞同：2
> 
> 时间：2015-11-05T08:34:54.007

您可以使用这个简单的代码在您的活动中对您的应用进行评分。

```
try {
    Uri uri = Uri.parse("market://details?id=" + getPackageName());
    Intent goToMarket = new Intent(Intent.ACTION_VIEW, uri);
    startActivity(goToMarket);
} catch (ActivityNotFoundException e) {
    startActivity(new Intent(Intent.ACTION_VIEW,
    Uri.parse("http://play.google.com/store/apps/details?id=" + getPackageName())));
} 
```

* * *

## 回答 #18

> 赞同：2
> 
> 时间：2018-09-29T08:39:17.347

```
import android.content.ActivityNotFoundException;
import android.content.Context;
import android.content.Intent;
import android.net.Uri;
import android.os.Build;
import android.support.annotation.StringRes;
import android.widget.Toast;

public class PlayStoreLink {

public void checkForUpdate(Context context, int applicationId) 
{
    try {
        context.startActivity(new Intent(Intent.ACTION_VIEW,
                Uri.parse(context.getString(R.string.url_market_details)
                        + applicationId)));
    } catch (android.content.ActivityNotFoundException anfe) {
        try {
            context.startActivity(new Intent(Intent.ACTION_VIEW,
                    Uri.parse(context.getString(R.string.url_playstore_app)
                            + applicationId)));
        } catch (Exception e) {
            Toast.makeText(context,
                    R.string.install_google_play_store,
                    Toast.LENGTH_SHORT).show();
        }
    }
}

public void moreApps(Context context, @StringRes int devName) {
    try {
        context.startActivity(new Intent(Intent.ACTION_VIEW,
                Uri.parse(context.getString(R.string.url_market_search_app)
                        + context.getString(devName))));
    } catch (android.content.ActivityNotFoundException anfe) {
        try {
            context.startActivity(new Intent(Intent.ACTION_VIEW,
                    Uri.parse(context.getString(R.string.url_playstore_search_app)
                            + context.getString(devName))));
        } catch (Exception e) {
            Toast.makeText(context,
                    R.string.install_google_play_store,
                    Toast.LENGTH_SHORT).show();
        }
    }
}

public void rateApp(Context context, int applicationId) {
    try {
        Uri uri = Uri.parse(context.getString(R.string.url_market_details)
                + applicationId);
        Intent intent = new Intent(Intent.ACTION_VIEW, uri);
        int flags = Intent.FLAG_ACTIVITY_NO_HISTORY | Intent.FLAG_ACTIVITY_MULTIPLE_TASK;
        if (Build.VERSION.SDK_INT > Build.VERSION_CODES.KITKAT_WATCH)
            flags |= Intent.FLAG_ACTIVITY_NEW_DOCUMENT;
        else
            flags |= Intent.FLAG_ACTIVITY_CLEAR_WHEN_TASK_RESET;
        intent.addFlags(flags);
        context.startActivity(intent);
    } catch (ActivityNotFoundException e) {
        checkForUpdate(context, applicationId);
    }
}
} 
```

```
<string name="install_google_play_store" translatable="false">Please install google play store and then try again.</string>
<string name="url_market_details" translatable="false">market://details?id=</string>
<string name="url_playstore_app" translatable="false">https://play.google.com/store/apps/details?id=</string>
<string name="url_market_search_app" translatable="false">market://search?q=pub:</string>
<string name="url_playstore_search_app" translatable="false">http://play.google.com/store/search?q=pub:</string>
<string name="app_link" translatable="false">https://play.google.com/store/apps/details?id=</string> 
```

devName 是 Play 商店中开发者帐户的名称

* * *

## 回答 #19

> 赞同：2
> 
> 时间：2021-04-23T01:43:13.437

自这个答案以来已经过去了很多时间，现在有一种方法可以将 GOOGLE PLAY 审查窗口附加到您的应用程序

[https://developer.android.com/guide/playcore/in-app-review](https://developer.android.com/guide/playcore/in-app-review)

```
// In your app’s build.gradle file:
...
dependencies {
    // This dependency is downloaded from the Google’s Maven repository.
    // So, make sure you also include that repository in your project's build.gradle file.
    implementation 'com.google.android.play:core:1.10.0'

    // For Kotlin users also add the Kotlin extensions library for Play Core:
    implementation 'com.google.android.play:core-ktx:1.8.1'
    ...
} 
```

然后每当您想显示费率弹出窗口时

```
final ReviewManager manager = ReviewManagerFactory.create(context);
final Task<ReviewInfo> request = manager.requestReviewFlow();
request.addOnCompleteListener(task -> {
    if (task.isSuccessful()) {
        // We can get the ReviewInfo object
        ReviewInfo reviewInfo = task.getResult();
        Task<Void> flow = manager.launchReviewFlow(context, reviewInfo);
flow.addOnCompleteListener(task -> {
    // The flow has finished. The API does not indicate whether the user
    // reviewed or not, or even whether the review dialog was shown. Thus, no
    // matter the result, we continue our app flow.
});
    } else {
        // There was some problem, log or handle the error code.
        @ReviewErrorCode int reviewErrorCode = ((TaskException) task.getException()).getErrorCode();
    }
}); 
```

正如评论中所说，API 不会让您知道用户给出的评级

此外，谷歌对使用此 api 有严格的指导方针，允许您显示窗口的频率是有限的，并且您不得诱导用户给您一个好评。您可以在上面的链接中查看完整的文档和指南

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2020-09-26T10:06:40.793

这是我使用`BuildConfig`该类的版本：

```
Intent marketIntent = new Intent(Intent.ACTION_VIEW, uri);

marketIntent.addFlags(Intent.FLAG_ACTIVITY_NO_HISTORY | Intent.FLAG_ACTIVITY_MULTIPLE_TASK);

if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.LOLLIPOP) {
    marketIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_DOCUMENT);
}

try {
    startActivity(marketIntent);
} catch (ActivityNotFoundException e) {
    startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse("https://play.google.com/store/apps/details?id=" + BuildConfig.APPLICATION_ID)));
} 
```

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2021-01-05T08:01:16.813

[In-App Review API 是Google](https://developer.android.com/guide/playcore/in-app-review)于 2020 年 8 月推出的一项期待已久的功能，就像[Apple](https://developer.apple.com/app-store/ratings-and-reviews/)在 2016 年为 iOS 应用所做的那样。

使用此 API，用户无需离开即可查看和评价应用程序。谷歌建议开发者不要强迫用户一直评价或评论，因为这个 API 会为每个用户在一次应用程序的特定使用情况下分配配额。当然，开发人员不能在他们的任务中间用一个有吸引力的弹出窗口来打断用户。

爪哇

```
In Application level (build.gradle)

       dependencies {
            // This dependency from the Google Maven repository.
            // include that repository in your project's build.gradle file.
            implementation 'com.google.android.play:core:1.9.0'
        }

boolean isGMSAvailable = false;
int result = GoogleApiAvailability.getInstance().isGooglePlayServicesAvailable(this);
isGMSAvailable = (com.google.android.gms.common.ConnectionResult.SUCCESS == result);
  if(isGMSAvailable)
  {
    ReviewManager manager = ReviewManagerFactory.create(this);
    Task<ReviewInfo> request = manager.requestReviewFlow();
    request.addOnCompleteListener(task -> {
      try {
        if (task.isSuccessful())
        {
           // getting ReviewInfo object
            ReviewInfo reviewInfo = task.getResult();
            Task<Void> flow = manager.launchReviewFlow(this, reviewInfo);
            flow.addOnCompleteListener(task2 -> {
                // The flow has finished. The API does not indicate whether the user
                // reviewed or not, or even whether the review dialog was shown. Thus,
                // no matter the result, we continue our app flow.
                   });
        } else 
        {
            // There was some problem, continue regardless of the result
           // call old method for rating and user will land in Play Store App page
           Utils.rateOnPlayStore(this);       
        }
        } catch (Exception ex)
        {
            Log.e("review Ex", "review & rate: "+ ex);
                 }
                });
    }
    else
    {
       // if user has not installed Google play services in his/her device you land them to 
       // specific store e.g. Huawei AppGallery or Samsung Galaxy Store 
       Utils.rateOnOtherStore(this);
    } 
```

科特林

```
val manager = ReviewManagerFactory.create(context)
val request = manager.requestReviewFlow()
request.addOnCompleteListener { request ->
    if (request.isSuccessful) {
        // We got the ReviewInfo object
        val reviewInfo = request.result
    } else {
        // There was some problem, continue regardless of the result.
    }
}

//Launch the in-app review flow

val flow = manager.launchReviewFlow(activity, reviewInfo)
flow.addOnCompleteListener { _ ->
    // The flow has finished. The API does not indicate whether the user
    // reviewed or not, or even whether the review dialog was shown. Thus, no
    // matter the result, we continue our app flow.
} 
```

用于测试`FakeReviewManager`

```
//java
ReviewManager manager = new FakeReviewManager(this);

//Kotlin
val manager = FakeReviewManager(context) 
```

# android - ListView中的Android Spinners，我必须使用ViewHolder吗？

> ID：10816765
> 
> 赞同：2
> 
> 时间：2012-05-30T12:55:36.307
> 
> 标签：android, android-listview, android-spinner

我有一个`Spinners`问题`ListView`。我有一个`ListView`带有`CheckBox`一个标签和两个的`Spinners`。这些`Spinner`是从 SQLite 填充的，并且工作正常。我没有使用该`ViewHolder`方法，因为到目前为止，当`ListView`单击该行时，`CheckBoxes`已选中或未选中，并且更改会立即保存到数据库中。选中该行时，该行变为`Spinners`可见，但未选中该行时不可见。

所以我没有设法找到解决方案的问题是我不知道如何获得实际`Spinner`的，甚至不知道如何获得`ListItem`点击`Spinner`所在的行。`Activity`延伸`ListActivity`。_ 任何人都知道我可以在不使用 a 的情况下做到这一点，`ViewHolder`还是必须使用 a `ViewHolder`？

这是声明和填充的代码`ListView`：

```
mSsCursor = mDbHelper.fetchAllSsPlaylistSs(mPlId);
        startManagingCursor(mSsCursor);

        String[] from = new String[]{"pl_selected", BTDbAdapter.KEY_NAME, BTDbAdapter.KEY_NAME2};

        int[] to = new int[]{R.id.pl_selected, R.id.name, R.id.name2};

        mAllSs = new SimpleCursorAdapter(this, R.layout.pl_edit_ss_row, mSsCursor, from, to);
        mAllSs.setViewBinder(new SimpleCursorAdapter.ViewBinder() {
        //custom handling of setting the value
        public boolean setViewValue(View view, Cursor cursor, int columnIndex) {
            if(columnIndex == 3) {
                    ViewGroup row = (ViewGroup)view.getParent().getParent();
                    mSId = cursor.getInt(0);
                    if (cursor.getInt(3) > 0) {
                        mCheckBox = (CheckBox) row.findViewById(R.id.pl_selected);
                        mCheckBox.setChecked(true);
                        mTSpin = (Spinner) row.findViewById(R.id.pl_t_spin);
                        mMSpin = (Spinner) row.findViewById(R.id.pl_m_spin);
                        mtvT = (TextView) row.findViewById(R.id.pl_t);
                        mtvM = (TextView) row.findViewById(R.id.pl_m);
                        mTSpin.setVisibility(View.VISIBLE);
                        mtvT.setVisibility(View.VISIBLE);
                        mMSpin.setVisibility(View.VISIBLE);
                        mtvM.setVisibility(View.VISIBLE);
                        //set the values in the t spinner
                        PopulateTSpinner(cursor.getInt(4));
                        //set the values in the m spinner
                        PopulateMSpinner(cursor.getInt(5));
                    }
                    else {
                        mCheckBox = (CheckBox) row.findViewById(R.id.pl_selected);
                        mCheckBox.setChecked(false);
                        mTSpin = (Spinner) row.findViewById(R.id.pl_t_spin);
                        mMSpin = (Spinner) row.findViewById(R.id.pl_m_spin);
                        mtvT = (TextView) row.findViewById(R.id.pl_t);
                        mtvM = (TextView) row.findViewById(R.id.pl_m);
                        mTSpin.setVisibility(View.GONE);
                        mtvT.setVisibility(View.GONE);
                        mMSpin.setVisibility(View.GONE);
                        mtvM.setVisibility(View.GONE);
                    }                   
                    return true;
            }
            return false;
        }
    });
    setListAdapter(mAllSs); 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T15:31:42.947

我不知道我是否理解您的问题：如果您的应用流程是：

> 显示数据列表（`CheckBox`+ `TextView`（`Spinners`隐藏））->
> 用户单击一行（`Spinners`显示带有（个人）数据的该行）->
> 用户在其中选择某些`Spinners`内容-> 将该选择保存在数据库中

那么我认为您应该使用自定义适配器并自己处理行创建+数据绑定（我不明白您将如何为 设置侦听器`Spinners`）。下面是一个关于如何执行此操作的小示例（尽管可能不是一个很好的方法）：

```
public class CustomAdapter extends SimpleCursorAdapter {

        private LayoutInflater mInflater;

        public CustomAdapter(Context context, int layout, Cursor c,
                String[] from, int[] to) {
            super(context, layout, c, from, to);
            mInflater = LayoutInflater.from(context);
        }

        @Override
        public void bindView(View view, Context context, Cursor cursor) {
            ViewHolder holder = (ViewHolder) view.getTag(); // the holder
                                                            // pattern
            // set the text for the TextView in your row
            holder.name
                    .setText(cursor.getString(cursor.getColumnIndex("name")));
            // status of the CheckBox from the database
            int status = cursor.getInt(cursor.getColumnIndex("pl_selected"));
            // set the CheckBox status
            holder.ckb.setChecked((status > 0) ? true : false);
            // get the id of this particular row, we'll use this later in the
            // Spinner's listeners
            long theId = cursor.getLong(cursor.getColumnIndex("_id"));
            // see if it is time to show the Spinners
            if (status > 0) {
                // it is time to show the Spinners. Here you would do stuff
                // like: setting up the Spinner's adapters + setting the
                // listener
                // I used a Spinner with entries set in the xml layout(so my
                // selection result is a String)
                holder.spin1.setVisibility(View.VISIBLE);
                holder.spin2.setVisibility(View.VISIBLE);
                // set theId as a tag so you know which Spinner was acted on
                holder.spin1.setTag(new Long(theId));
                holder.spin1
                        .setOnItemSelectedListener(new OnItemSelectedListener() {

                            @Override
                            public void onItemSelected(AdapterView<?> parent,
                                    View view, int position, long id) {
                                Long realRowId = (Long) parent.getTag();
                                // I don't know
                                ContentValues cv = new ContentValues();
                                // the column where I saved the spinner selected
                                // item is called "saved_item"
                                cv.put("saved_item", (String) parent
                                        .getItemAtPosition(position));
                                // mDb is my SQLiteDatabase instance
                                mDb.update("tbl", cv, "_id = ?",
                                        new String[] { String
                                                .valueOf(realRowId) });
                                // I don't know how you saved the data, the
                                // above is just an example
                            }

                            @Override
                            public void onNothingSelected(AdapterView<?> parent) {

                            }
                        });
                // also implement the second Spinner like the first one
            } else {
                // required to prevent a recycled View from causing damage
                holder.spin1.setVisibility(View.GONE);
                holder.spin2.setVisibility(View.GONE);
            }
        }

        @Override
        public View newView(Context context, Cursor cursor, ViewGroup parent) {
            View v = mInflater.inflate(R.layout.adapters_listspinner_row,
                    parent, false);
            ViewHolder holder = new ViewHolder();
            holder.spin1 = (Spinner) v.findViewById(R.id.spinner1);
            holder.spin1.setFocusable(false);
            holder.spin2 = (Spinner) v.findViewById(R.id.spinner2);
            holder.spin2.setFocusable(false);
            holder.name = (TextView) v.findViewById(R.id.textView1);
            holder.ckb = (CheckBox) v.findViewById(R.id.checkBox1);
            holder.ckb.setFocusable(false);
            v.setTag(holder);
            return v;
        }

        class ViewHolder {
            Spinner spin1, spin2;
            TextView name;
            CheckBox ckb;
        }

    } 
```

此外，所需的`onListItemcClick`方法：

```
@Override
    protected void onListItemClick(ListView l, View v, int position, long id) {
        // manage the CheckBox state
        CheckBox ckb = (CheckBox) v.findViewById(R.id.checkBox1);
        ckb.setChecked(!ckb.isChecked());
        ContentValues cv = new ContentValues();
        cv.put("pl_selected", ckb.isChecked() ? 1 : 0);
        mDb.update("tbl", cv, "_id = ?",
                new String[] { String.valueOf(id) });
        // requery the database so the changes are seen by the adapter, this is horrible! 
        Cursor re = mDb.query("tbl", null, null, null, null, null, null);
        mAllSs.changeCursor(re);
    } 
```

作为建议，也许您可​​以修改应用程序的布局并将其`Spinners`移出`ListView`行外。

# android - Facebook 访问令牌存储在 android 应用程序中

> ID：10816773
> 
> 赞同：4
> 
> 时间：2012-05-30T12:56:24.247
> 
> 标签：android, facebook, facebook-graph-api, access-token

由于facebook现在停止了离线访问，我如何存储/获取新的访问令牌。我已经尝试了很多。代码如下。我必须在[https://graph.facebook.com/me/friends?access_token=中提供访问令牌](https://graph.facebook.com/me/friends?access_token=)

```
String url = "https://graph.facebook.com/oauth/access_token?client_id=appid&client_secret=secretid&grant_type=fb_exchange_token&fb_exchange_token=access_token";

            HttpClient httpclient = new DefaultHttpClient();
            HttpGet httpget = new HttpGet(url);

            try{
                HttpResponse response = httpclient.execute(httpget);

                HttpEntity entity = response.getEntity();
                is = entity.getContent();

                BufferedReader reader = new BufferedReader(new InputStreamReader(is,"iso-8859-1"),8);
                StringBuilder sb = new StringBuilder();
                String line = null;

                while ((line = reader.readLine()) != null) {

                     sb.append(line + "\n");

                }   

                is.close();
                result=sb.toString();
                result = result.split("=")[1];
                AppLog.logger(result);

            }
            catch(Exception e)
            {
                AppLog.logger("Error in JSON");
            } 
```

如何兑换代币？？请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T12:21:56.457

为什么不使用[Android 版 Facebook SDK](http://developers.facebook.com/docs/mobile/android/build/)？

# ruby-on-rails-3 - 为什么 rails 3.2 使用两个记录器，ActiveSupport::TaggedLogging 和 ActiveSupport::BufferedLogger？

> ID：10816777
> 
> 赞同：5
> 
> 时间：2012-05-30T12:56:39.577
> 
> 标签：ruby-on-rails-3, logging

看来我们可以访问 Rails 应用程序中的 Rails.logger 和 logger。我知道这两个记录器是不同的，但是在 TaggedBufferedLogger 上创建并拥有一个记录器实例不是理想的选择。为什么有两个实例，什么是使用哪个实例的合适时间？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-31T06:52:49.230

BufferedLogger 是默认的 Rails 记录器。它的目的是使日志记录线程安全。或者，如果您想“标记”您的日志输出，您可以将此记录器包装到 TaggedBufferedLogger 中并使用它。

直接来自 weblog.rails

```
Tagged logger

When you’re running a multi-user, multi-account application, it’s a great help to be able to filter the log by who did what. Enter the TaggedLogging wrapper. It works like this:  

Logger = ActiveSupport::TaggedLogging.new(Logger.new(STDOUT))
Logger.tagged("BCX") { Logger.info "Stuff" } # Logs "[BCX] Stuff"
Logger.tagged("BCX") do
  Logger.tagged("Jason") do
    Logger.info "Stuff" # Logs "\[BCX\] \[Jason\] Stuff"
  end
end 
```

# mysql - 有条件地导入 MySQL 转储文件

> ID：10816778
> 
> 赞同：0
> 
> 时间：2012-05-30T12:56:44.510
> 
> 标签：mysql, phpmyadmin, backup, restore

我有一个表（CATEGORIES）中两个完整字段（ID 和 COUNT）的 SQL 备份文件，我需要将它们导入到另一个备份数据库上的另一个相同表中，其中 COUNT 当前默认为 0。

恢复时，我收到一条错误消息，表明 ID 确实存在，这是真的，但我需要恢复/更新的只是将每个 COUNT 放入相应的 ID 字段中。如何使用 mysqldump 或通过 phmyadmin 完成此操作。

备份 SQL 文件包含超过一百万对值（ID、COUNT）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T13:15:47.363

您可能希望将替换选项与 mysqldump 一起使用：

[http://dev.mysql.com/doc/refman/5.1/en/mysqldump.html#option_mysqldump_replace](http://dev.mysql.com/doc/refman/5.1/en/mysqldump.html#option_mysqldump_replace)

就像是

```
mysqldump --replace -uroot -p123456 mydb > export.sql 
```

# c - 在具有循环的链接列表中查找联结节点

> ID：10816782
> 
> 赞同：1
> 
> 时间：2012-05-30T12:57:04.673
> 
> 标签：c, algorithm, linked-list

> **可能重复：**
> [在单链表中查找循环](https://stackoverflow.com/questions/10275587/finding-loop-in-a-singly-linked-list)

给定的是一个链接列表，其中有一个循环。

我想找出循环从哪里开始（两个节点指向的节点）。

请以最小的复杂性为此提出解决方案。

# jquery - 使用逗号对带有值的 jquery 输入字段求和

> ID：10816784
> 
> 赞同：0
> 
> 时间：2012-05-30T12:57:15.387
> 
> 标签：jquery, input

我正在使用此脚本根据类对输入字段求和，并将结果返回到指定的 id。

尽管我正在努力解决两个功能主义者，但这很有效：

`.replace(',',''));`只能处理一个逗号，即 1,000 但不能处理多个 1,000,000

我希望返回的结果每隔三个数字放回逗号，`.replace(/(\d)(?=(\d\d\d)+(?!\d))/g, "$1,");`什么都不做？

```
$(document).ready(function () {
    $(this).keyup(function () {
        var sum = 0;
        var column2 = $('.left')
        jQuery.each(column2, function (number) {
            sum += parseFloat($(this).val().replace(',', ''));
        });
        $('#total').val(sum).replace(/(\d)(?=(\d\d\d)+(?!\d))/g, "$1,");
    });
}); 
```

我已经护目镜并试图找到答案，但找不到任何有效的方法。

非常感谢，

山姆

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T13:14:56.333

您可以使用以下代码执行此操作

```
$(document).ready(function(){
  $('#sumup').on('click',function(){ 
    var sum = 0;
    var column2 = $('.sum')
    jQuery.each(column2,function(number){
      sum += parseFloat($(this).val().replace(/\,/g,'') || 0);
      });
    $('#total').text(sum.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g, "$1,"));
  });
});​ 
```

[工作小提琴](http://jsfiddle.net/joycse06/tCXbW/17/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T13:10:08.947

`g`对所有替换使用（全局）修饰符

```
sum += parseFloat($(this).val().replace(/,/g,'')); 
```

例如

```
var x = '1,000,000';

x.replace(/,/g,''); // output: 1000000 
```

并在每三位数中加上逗号，请在替换中尝试此操作

```
/\B(?=(\d{3})+(?!\d))/g, ',' 
```

IE

```
$('#total').val(sum.toString.replace(/\B(?=(\d{3})+(?!\d))/, "$1,"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T13:11:15.987

最初如何删除逗号：

```
sum += parseFloat($(this).val().replace(/,/g, '')); 
```

然后，一旦你得到你的总和：

```
$('#total').val(sum.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ',')); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-16T10:00:47.183

我喜欢 Joy 的解决方案，但添加了一些更改以消除对 SUM 按钮的需要，而是在用户离开表单的组件字段时重新计算，这对最终用户来说更具交互性和方便性：

```
$(document).ready(function(){
  $('#sumup1,#sumup2,#sumup3,#sumup4,#sumup5,#sumup6').on('change',function(){ 
    var sum = 0;
    var column2 = $('.sum')
    jQuery.each(column2,function(number){
      sum += parseFloat($(this).val().replace(/\,/g,'') || 0);
      });
    $('#total').text(sum.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g, "$1,"));
  });   
}); 
```

HTML是：

```
<table>
<tr>
<td><input type="text" id="sumup1" class="sum" value="1,000,000"></td>
</tr>
<tr>
<td><input type="text" id="sumup2" class="sum" value="1,000,000"></td>
...
</table>

<div id="total">6,000,000</div> 
```

# django - django 表单保存中的完整性错误

> ID：10816792
> 
> 赞同：1
> 
> 时间：2012-05-30T12:57:38.603
> 
> 标签：django, django-models, django-forms

嘿伙计们，我有我的模型：

```
class Rule(models.Model):
    Ruleinfo = models.CharField(max_length=5,null=False)
    Ispname  = models.CharField(max_length=5,null=False)
    priority = models.ForeignKey('Priority',related_name ="priority1")
    From  =    models.IPAddressField(null=True)
    To = models.IPAddressField(null=True)
    def __unicode__(self):
        return u'%s %s %s %s %s %s %s %d' % (self.Ruleinfo, self.Ispname, self.priority,
                                      self.From, self.To)

class Priority(models.Model):  
    priority =  models.IntegerField(null = True)
    ispname = models.ForeignKey('Rule' ,related_name="ispname1")
    rule = models.ForeignKey('Rule',related_name="rule1") 
```

这是我的表格

```
class RuleInfoForm(ModelForm):
     Ruleinfo = forms.CharField(max_length=5)   
     Ispname  = forms.CharField(max_length=5)
     priority = forms.IntegerField()
     From  =       forms.IPAddressField()   
     To    =       forms.IPAddressField()
     class Meta:
        model = Rule
        fields = ("Ruleinfo","Ispname","priority","From","To") 
```

我将此表格保存在我的视图中，如下所示

```
def multiwanrule_info(request):
    data = {}
    try:
       form = RuleInfoForm(request.POST)
    except:
        pass
    if form.is_valid():
        rl_frm = form.save(commit=False)
        rl_frm.save()
    else:

        form = RuleInfoForm() 
        data['form'] = form    
    return render_to_response('networking.html',data) 
```

但我收到完整性错误，即

```
networking_rule.priority_id may not be NULL 
```

为什么我收到此错误？为什么它不像其他桌子那样自动采取

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T16:36:41.223

你的问题出在这里：

```
 rl_frm = form.save(commit=False)
 rl_frm.save() 
```

`null=True`由于您的中没有`ForeignKey`，因此需要有效的外键；你还没有通过这里。

所以你应该设置`ForeignKey`to `null=True`，然后可能分配它：

```
 r1_frm.priority.pk = 1 # some primary key to a valid Priority object
 r1_frm.save() 
```

# java - 读写文件，但覆盖文件

> ID：10816799
> 
> 赞同：2
> 
> 时间：2012-05-30T12:58:19.337
> 
> 标签：java, filewriter

我试图弄清楚为什么这不起作用。显示的所有文件实际上都存在。'logging.toString()' 是一个 .txt 文件，它读取日志中的所有文本，并使用我要添加的字符串将其写回。虽然当我这样做时，它会覆盖它。但我不想那样。帮助？

```
 try{
        FileWriter fstream = new FileWriter(logging.toString());
        BufferedWriter out = new BufferedWriter(fstream);
        FileInputStream fstreams = new FileInputStream(logging);
        BufferedReader br = new BufferedReader(new InputStreamReader(fstreams));
        String strLine;
        while ((strLine = br.readLine()) != null){
            htmlTextArea = htmlTextArea + strLine + "\n";
        }
        out.write(htmlTextArea + logto);
        out.close();
    } catch (Exception ex){} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T13:00:49.553

为什么不呢？您没有传递附加标志：

[FileWriter（字符串文件名，布尔附加）](http://docs.oracle.com/javase/6/docs/api/java/io/FileWriter.html#FileWriter%28java.lang.String,%20boolean%29)

API 文档是您的朋友；它们通常有助于理解行为。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T13:01:50.130

更改此行

```
FileWriter fstream = new FileWriter(logging.toString()); 
```

至

```
FileWriter fstream = new FileWriter(logging.toString(), true); 
```

这样，您就告诉 Java 您希望追加该文件。FileWriter 的 Javadocs 中有更多内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T13:01:24.577

因为这`FileWriter`就是实施的方式。

如果要追加，则应使用不同的构造函数：[`new FileWriter( logging.toString(), true );`](http://docs.oracle.com/javase/6/docs/api/java/io/FileWriter.html#FileWriter%28java.lang.String,%20boolean%29)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-30T13:01:29.890

如果您想向文件中添加内容但不覆盖它，请使用

```
FileWriter fstream = new FileWriter(logging.toString(),true); 
```

# linux - 从用户空间的程序调用内核模块函数

> ID：10816801
> 
> 赞同：23
> 
> 时间：2012-05-30T12:58:23.527
> 
> 标签：linux, user-interface, module, linux-kernel, kernel

我开发了一个内核模块和一些功能。现在我需要在用户空间开发一个程序并调用内核模块中的一些函数。

我还需要在用户空间访问我的程序的内核模块中的一些全局变量。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-05-30T13:06:33.013

linux-kernel 模块和用户空间程序交互的完整概述[http://wiki.tldp.org/kernel_user_space_howto](http://wiki.tldp.org/kernel_user_space_howto) “*内核空间，用户空间接口*”由 Ariane Keller （它来自 2008-09-28，但大约 2.6内核；唯一的主要新方法是[relayfs](http://relayfs.sourceforge.net/)）

没有列出从用户空间到内核空间的普通函数调用，只有 syscall（添加新的 syscall 并不容易）和 upcall（反向调用）。

最简单的接口之一是 ioctl；但在创建 procfs、sysfs 或类似文件之前，您不能开始使用 ioctl。

其他是 sysctl; 但 sysctl 更适合读取/写入全局变量。（很难通过 sysctl 接口传递多个参数）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-30T13:14:46.170

您似乎错过了内核和用户空间分离的重点。如果您的用户程序可以直接修改内核内部的数据，那将很快导致灾难。

用户程序只有一种传统方式可以显式地向内核请求服务 - [***`make a system call`***](http://www.kernel.org/doc/man-pages/online/pages/man2/syscall.2.html).

还有一些*陷阱*和一些特定于 Linux 的用户级内核通信机制，但这些与这里无关。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-31T12:13:46.893

正如其他海报所提到的，内核空间和用户空间之间有明显的区别。所以不，你不能直接从用户空间调用内核函数。我认为在用户空间和内核空间之间发送消息的最简单方法是通过 netlink 套接字。netlink 套接字允许您轻松地在用户级别和内核级别之间传递任意数据结构。

是的 ioctl，系统调用是可行的替代方案，它们在传递任意信息方面不如 netlink 套接字灵活。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-30T13:43:31.500

您需要安装一个新内核才能使用新调用，除非您已经有一些更新内核的机制... [http://www.cyberciti.biz/tips/how-to-patch-running-linux -kernel.html](http://www.cyberciti.biz/tips/how-to-patch-running-linux-kernel.html)

# c# - 在字典或相关集合中查找“下一个可用”键

> ID：10816803
> 
> 赞同：4
> 
> 时间：2012-05-30T12:58:24.667
> 
> 标签：c#, .net, linq, c#-4.0, collections

我想编写一个 linq 扩展（或自定义字典、排序列表列表或任何最好的解决方案），它允许我向集合添加一个值，其键是“下一个可用”。

例如：

```
int CreatedKey = IncrementDictionary.AddNext(myCustomer); 
```

如果当前存在的key如下：

```
1
2
8
4
3 
```

然后它将 myCustomer 添加到具有 5 键的字典中，并返回该键。

你怎么看？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-30T13:15:30.133

```
public static int AddNext(this Dictionary<int, string> dict)
{
    int min = dict.Keys.Min();
    int max = dict.Keys.Max();

    return Enumerable.Range(min, max-min).Except(dict.Keys).First();   
} 
```

用它作为

```
int result = new Dictionary<int, string>(){ {1, "a"}, {2, "a"}, 
                                            {8, "a"}, {4, "a"}, 
                                                      {3, "a"}}.AddNext(); 
```

这里`result`是5。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-30T15:54:27.017

您可以使用带有 Extension 方法的[SortedList来添加到下一个自动检索的键。](http://msdn.microsoft.com/en-us/library/ms132319)

假设数据结构是任何对象，带有数字键，

以下是 SortedList 的 ExtensionMethod

```
public static class SortedListExtensions
{
    ///Add item to sortedList (numeric key) to next available key item, and return key
    public static int AddNext<T>(this SortedList<int, T> sortedList, T item)
    {
        int key = 1; // Make it 0 to start from Zero based index
        int count = sortedList.Count;

        int counter=0;
        do
        {
            if (count == 0) break;
            int nextKeyInList = sortedList.Keys[counter++];

            if (key != nextKeyInList) break;

            key = nextKeyInList +1;

            if (count == 1 || counter == count  ) break;

            if (key != sortedList.Keys[counter])
                break;

        } while (true);

        sortedList.Add(key, item);
        return key;
    }

} 
```

它可以像下面这样使用

```
 SortedList<int, string> x = new SortedList<int, string>();

        x.Add(4, "BCD");
        x.Add(6, "BCD");

        x.AddNext("a");
        x.AddNext("b");
        x.AddNext("c");
        x.AddNext("d");
        x.AddNext("e");

        foreach (var item in x)
            Console.WriteLine(item.Key + " " + item.Value); 
```

输出是

```
 1 a
        2 b
        3 c
        4 BCD
        5 d
        6 BCD
        7 e 
```

您可以使用字典或任何其他数据结构。在这种情况下，将需要双循环。在 SortedList 的情况下，搜索键时会保存一个循环。[`SortedList.Add`](http://msdn.microsoft.com/en-us/library/ms132330)此循环由使用 BinarySearch 算法的函数在内部使用。

二进制搜索比循环所有元素（对于更大尺寸的数据）更快。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-30T13:11:45.117

这是我的解决方案比第一个更短，但您可以从中有所了解。

```
 Dictionary<int, string> x = new Dictionary<int, string>();
        x.Add(1, "a");
        x.Add(2, "a");
        x.Add(3, "a");
        x.Add(4, "a");
        x.Add(8, "a");
        Console.WriteLine((x.Keys.Where(k => !x.Keys.Contains(k + 1)).Min() + 1).ToString()); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-30T13:21:18.123

您是否正在寻找这样的东西（它显然只能包含 1000 个元素）？可能有许多其他解决方案，但很难说出您到底想做什么。无论如何，这可能是一个起点。

```
public class IncrementDictionary : Dictionary<int, object>
{
    private bool[] usedKeys = new bool[1000];

    public new void Add(int key, object value)
    {
        base.Add(key, value);
        usedKeys[key] = true;
    }

    public new void Clear()
    {
        base.Clear();
        usedKeys = new bool[1000];
    }

    public new object this[int key] 
    {
        get
        {
            return base[key];
        }
        set
        {
            base[key] = value;
            usedKeys[key] = true;
        }
    }

    public new bool Remove(int key)
    {
        usedKeys[key] = false;
        return base.Remove(key);
    }

    public int AddNext(object anObj)
    {
        int newKey = -1;
        for (int i = 1; i < 1000; i++)
            if (!usedKeys[i])
            {
                newKey = i;
                break;
            }
        if (newKey > 0)
            this.Add(newKey, anObj);
        return newKey;
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-03-30T14:07:28.223

嗯......这是一个老问题，但我想回答。

Nikhil Agrawal 的代码可能会有所改进，考虑到如果您有一个空集合，您必须指定最小值是多少。所以代码变成了：

```
 public static int FirstFree(Dictionary<int, Guid> dict, int minumum)
    {
        int min = dict.Count == 0
            ? minumum                       //use passed minimum if needed
            : dict.Keys.Min();              //use real minimum
        int max = dict.Count > 1
            ? dict.Keys.Max() + 2           //two steps away from maximum, avoids exceptions
            : min + 2;                      //emulate data presence
        return Enumerable.Range(min, max).Except(dict.Keys).First();
    } 
```

但是，如果您在定义的范围内工作，您还应该知道是否有空间来存储值。这可以是这样的：

```
public static int? FirstFree(Dictionary<int, Guid> dict, int min, int max)
    {
        if (max <= min)
            throw new Exception($"Specified range is invalid (must be max > min)");
        if (max - min + 1 == dict.Count)
            //no space left
            return null;
        return Enumerable.Range(min, max).Except(dict.Keys).First();
    } 
```

如果你不喜欢 nullable-int，你可以检查 result 是否是允许的最小值。显然，如果您指定 min=int.MinValue，我知道它不起作用，但在这种情况下，问题是此方法创建的巨大集合！

```
public static int FirstFree(Dictionary<int, Guid> dict, int min, int max)
    {
        if (max <= min)
            throw new Exception($"Specified range is invalid (must be max > min)");
        if (max - min + 1 == dict.Count)
            //no space left
            return int.MinValue;
        return Enumerable.Range(min, max).Except(dict.Keys).First();
    } 
```

# php - 如何在php中获取html字段值

> ID：10816805
> 
> 赞同：-3
> 
> 时间：2012-05-30T12:58:42.827
> 
> 标签：php, html, hidden-field

我做了一个隐藏的html字段 `<input type="hidden" name="t" id="t" value="something">`

```
<? // value here?> 
```

我如何在不提交页面的情况下获得此值

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T13:01:35.553

> 我如何在不提交页面的情况下获得此值

如果不提交 from，就无法在 PHP 中获取它的值，而是使用 JavaScript 来获取它的值。

**例子：**

```
alert(document.getElementById('t').value); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T13:01:17.290

你不能。PHP是服务器端。这意味着，一旦页面完成加载，PHP 的工作就完成了。

您可以使用 AJAX 将表单值发送到您的 PHP 脚本，这将在后台 - 无需提交或刷新。

编辑：您的意思是要问，生成页面后如何获取隐藏输入的值？

# regex - 如何解析未分隔的电子邮件地址字符串？

> ID：10816806
> 
> 赞同：-3
> 
> 时间：2012-05-30T12:58:48.147
> 
> 标签：regex, email

我有一串如下的电子邮件

“test@test.comtest.test1@test.comtest@yahoo.co.intest1.test2@support.yahoo.com”

我想将其转换为一组有效的电子邮件地址。我一直在尝试通过使用正则表达式来解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T13:08:54.610

总结一下大家的评论，

您确实需要更好地划分数据。例如，您可能会这样做：

> test@test.com;test.test1@test.com;test@yahoo.co.in;test1.test2@support.yahoo.com

这样做可以让您拆分答案`;`以获得*可能的*电子邮件地址列表。但是，请看这个 SO 接受的关于[使用 regex 验证电子邮件地址的问题的](https://stackoverflow.com/questions/201323/how-to-use-a-regular-expression-to-validate-an-email-addresses)答案。电子邮件地址的格式和可能性如此之多，仅使用正则表达式就很难对其进行验证。

这是使用上述字符串[进行定界的示例。](http://jsfiddle.net/NZ7tK/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T15:35:00.003

如果您*能*保证：

1.  所有电子邮件都以“test”或其他已知字符串开头，或
2.  数据集中所有可能的域都是已知的。

如果你能做出一些保证，那么你可以在 Ruby 中做这样的事情：

```
emails = "test@test.comtest.test1@test.comtest@yahoo.co.intest1.test2@support.yahoo.com"

# Test for a known string ending in a known domain.
emails.scan /(test.*?[.](?:com|in))/

# Test for known domains with positive lookbehind.
emails.scan /(?<=^|com|in).*?(?:com|in)/ 
```

换句话说，如果它是夹具数据，请修复您的夹具以具有合理的分隔符。这将花费更少的时间并且更不容易出错。

另一方面，如果它是真实数据，那么您不太可能将它们分开。将任意域名与任意尾随邮箱名称区分开来是不切实际的。

# asp.net-mvc-2 - knockout.js ASP.NET 数据绑定到下拉列表 (Visual Studio 2008)

> ID：10816807
> 
> 赞同：1
> 
> 时间：2012-05-30T12:58:49.387
> 
> 标签：asp.net-mvc-2, data-binding, knockout.js

我正在尝试将值绑定到 ASP.NET DropDownList 但服务器抱怨它无法识别数据绑定属性：

```
<%=Html.DropDownList("accountSiteInstanceId", ViewData["degreePrograms"] as SelectList, new { @data-bind = "value: DegreeProgramId" } ) %> 
```

我收到以下错误：编译器错误消息：CS0746：无效的匿名类型成员声明器。必须使用成员分配、简单名称或成员访问来声明匿名类型成员。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-30T16:57:59.213

问题是破折号。使用基于字典的符号：

```
<%= Html.DropDownList("accountSiteInstanceId", ViewData["degreePrograms"] as SelectList, new Dictionary<string, object>
                {
                        {"data-bind", 
                        "DegreeProgramId"}
                }) %> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-09T16:39:04.983

将破折号更改为下划线，它将在运行时将其转换回破折号。

# header - 标头过期不起作用

> ID：10816808
> 
> 赞同：5
> 
> 时间：2012-05-30T12:58:50.527
> 
> 标签：header, apache2

最后`httpd.conf`几行是：

```
ExpiresActive On
<FilesMatch "\.(ico|pdf|flv|jpg|jpeg|png|gif|js|css|swf)$">
    ExpiresDefault "access plus 3 days"
</FilesMatch> 
```

当我运行 YSlow 时，它说我所有的 CSS 文件（和其他文件）都没有设置过期时间。CSS 文件位于子目录中，但我相信`"\."`无论子目录如何，都应该匹配所有文件。

Apache 是为虚拟主机设置的，但上述指令不在`httpd.conf`.

`LoadModule expires_module modules/mod_expires.so`文件中有一个指令`.conf`。

该站点位于运行 AWS Linux 和 Apache2 的 AWS 上。在检查它是否有效之前，我重新启动了 apache。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-01T06:49:24.043

在回答您的问题时，这在我的 httpd.conf 中对我有用：

```
LoadModule expires_module /usr/lib/apache2/modules/mod_expires.so
ExpiresActive On

<filesMatch "\.(ico|pdf|flv|jpg|jpeg|png|gif|js|css|swf)$">
ExpiresDefault "access plus 3 days"
</filesMatch> 
```

这里有几件事可以尝试：

1) 确保 mod_expires.so 是您认为的位置。您可以通过在终端中使用它来查看包含哪些模块：`apache2 -M`.

2）确保您的指令适用于您感兴趣的文件（即不会被`.htaccess`更远的文件覆盖）

3) 确保`LoadModule`指令在您的 httpd.conf 文件中

4）在你的`FilesMatch`正则表达式中，你应该用反斜杠转义点，否则你匹配任何字符。不是一个大问题，但您最终会将规则应用于非静态页面，例如`"site.com/politico"`（注意`ico`结尾）。

# iphone - NSScanner scanUpToCharactersFromSet 给出了 BAD ACCESS

> ID：10816809
> 
> 赞同：0
> 
> 时间：2012-05-30T12:58:53.370
> 
> 标签：iphone, objective-c, ipad, nsscanner

```
NSString*test=[NSString stringWithString:inputString]; 
NSScanner*scan;
BOOL pass= [scan scanUpToCharactersFromSet:[[NSCharacterSet alphanumericCharacterSet] invertedSet] intoString:&test]; 
```

最后一行使应用程序因访问不当而崩溃。它与地址符号有关`&`吗？我不清楚为什么它需要这种类型的语法。

我试图简单地检查我的 BOOL 是否`inputString`包含任何非字母数字字符。如果是，`pass`则变为 YES。

更新：我看到我完全不了解扫描仪。我理解这个输出：

```
NSString*test=@"Hello"; // this should cause my BOOL to be NO since no characters are scanned
NSScanner*scanix=[NSScanner scannerWithString:test];
BOOL pass= [scanix scanUpToCharactersFromSet:[[NSCharacterSet alphanumericCharacterSet] invertedSet] intoString:nil];
NSLog(@"pass is %i for %@",pass, test); 
```

日志中的结果：`pass is 1 for Hello`

我想知道实际上测试字符串是否包含非字母数字字符。我如何将这样的测试纳入其中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T13:03:19.507

您应该使用要解析的字符串初始化扫描仪，

```
 NSScanner *scan =[NSScanner scannerWithString:mystring]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T13:08:20.070

您正在混淆目标字符串和源字符串。您的来源是`test`. 此外，您的扫描仪未初始化。

```
NSScanner *scan = [NSScanner scannerWithString:test];
BOOL didScanCharacters = [scan scanUpToCharactersFromSet:
   [[NSCharacterSet alphanumericCharacterSet] invertedSet] 
   intoString:nil]; 
```

发生 EXC_BAD_ACCESS 错误是因为您正在向不存在的对象发送消息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T13:24:59.567

> 我想知道实际上测试字符串是否包含非字母数字字符。我如何将这样的测试纳入其中？

如果这是您的唯一目标，则无需使用 NSScanner。您可以简单地使用 NSString 的`-rangeOfCharacterFromSet:`方法：

```
NSCharacterSet *nonAlphanumeric = [[NSCharacterSet alphanumericCharacterSet] invertedSet];
pass = ([test rangeOfCharacterFromSet:nonAlphanumeric].location != NSNotFound); 
```

# html - Flash 文件在 html 页面中不起作用

> ID：10816813
> 
> 赞同：2
> 
> 时间：2012-05-30T12:59:33.650
> 
> 标签：html, actionscript-3, flash, slideshow

我有一个包含 Flash 幻灯片的页面。最近，它停止工作了。如果我直接访问该文件，那么一切都很好，但是当我想在我的 HTML 页面中加载幻灯片时不起作用。谁能看到并帮助我为什么它停止工作？

这是页面的位置：[https ://www.sanmar.com/help/flash/order_data_export_slideshow.jsp](https://www.sanmar.com/help/flash/order_data_export_slideshow.jsp)

直接路径仍然有效： http: [//www.sanmar.com/help/flash/quickbooks.swf](http://www.sanmar.com/help/flash/quickbooks.swf)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T13:09:15.427

通过 SSL 运行它是一个问题，因为某些内容没有以安全的方式返回。这可能与未以安全模式发回的标头有关。如果你在 Chrome 中运行它，你会收到一个警告，指出并非一切都是安全的。

来自 Adob​​e 的一些信息：[Flash Player 问题 - 安全套接字](http://helpx.adobe.com/flash-player/kb/flash-player-issues-secure-sockets.html)

[编辑] 我注意到的另一件事是在代码中使用 http 引用了 Adob​​e 的下载区域，例如

```
<p>
    <script type="text/javascript">
AC_FL_RunContent( 'codebase','http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=9,0,28,0','width','600','height','487','src','quickbooks','quality','high','pluginspage','http://www.adobe.com/shockwave/download/download.cgi?P1_Prod_Version=ShockwaveFlash','movie','quickbooks' ); //end AC code
</script><noscript><object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=9,0,28,0" width="600" height="487">
      <param name="movie" value="quickbooks.swf" />
      <param name="quality" value="high" />
      <embed src="quickbooks.swf" quality="high" pluginspage="http://www.adobe.com/shockwave/download/download.cgi?P1_Prod_Version=ShockwaveFlash" type="application/x-shockwave-flash" width="600" height="487"></embed>
    </object></noscript>
  </p> 
```

以及底部附近的图片链接：

```
<div><img alt="DCSIMG" id="DCSIMG" width="1" height="1" src="http://wt.sanmar.com/dcsairxqntlbtj3wwflz3plo1_4d5g/njs.gif?dcsuri=/nojavascript&amp;WT.js=No&amp;WT.tv=8.6.0"/></div> 
```

确保将所有这些引用更改为**https**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T13:48:28.507

您正在尝试访问 https 服务器，但从 http 刷新请求内容。下面的链接工作正常

[http://www.sanmar.com/help/flash/order_data_export_slideshow.jsp](http://www.sanmar.com/help/flash/order_data_export_slideshow.jsp)

如果域是 http，则可以将 swf 资源路径更改为 http，如果您使用的是 https 请求，则可以将其更改为 https。资源的相对路径会解决它。

# python - 寻找更pythonic的逻辑解决方案

> ID：10816816
> 
> 赞同：6
> 
> 时间：2012-05-30T12:59:51.360
> 
> 标签：python, logic

我在[Coding Bat](http://codingbat.com/python)中做一些练习题，遇到了这个..

```
Given 3 int values, a b c, return their sum. However, if one of the values is the same as another of the values, it does not count towards the sum. 

lone_sum(1, 2, 3) → 6
lone_sum(3, 2, 3) → 2
lone_sum(3, 3, 3) → 0 
```

我的解决方案如下。

```
def lone_sum(a, b, c):
   sum = a+b+c
   if a == b:
     if a == c:
         sum -= 3 * a
     else:
         sum -= 2 * a
   elif b == c:
     sum -= 2 * b
   elif a == c:
     sum -= 2 * a
   return sum 
```

有没有更蟒蛇的方式来做到这一点？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-30T13:09:10.267

另一种适用于任意数量参数的可能性：

```
from collections import Counter

def lone_sum(*args):
    return sum(x for x, c in Counter(args).items() if c == 1) 
```

请注意，在 Python 2 中，您应该使用`iteritems`来避免构建临时列表。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-30T13:04:59.600

对于任意数量的参数，一个更通用的解决方案是

```
def lone_sum(*args):
    seen = set()
    summands = set()
    for x in args:
        if x not in seen:
            summands.add(x)
            seen.add(x)
        else:
            summands.discard(x)
    return sum(summands) 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-05-30T14:12:13.427

怎么样：

```
def lone_sum(*args):
      return sum(v for v in args if args.count(v) == 1) 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-30T13:10:07.640

可以使用 defaultdict 筛选出多次出现的任何元素。

```
from collections import defaultdict

def lone_sum(*args):
  d = defaultdict(int)
  for x in args:
    d[x] += 1

  return sum( val for val, apps in d.iteritems() if apps == 1 ) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-02-16T15:50:29.883

```
def lone_sum(a, b, c):
    z = (a,b,c)
    x = []
    for item in z:
        if z.count(item)==1:
            x.append(item)
    return sum(x) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-06-05T04:11:04.243

我在 Codingbat 上试过这个，但它不起作用，虽然它在代码编辑器上起作用。

def lone_sum(a, b, c): s = set([a,b,c]) 返回 sum(s)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-06-15T13:36:37.280

与您所拥有的方法非常相似：

```
def lone_sum(a, b, c):

  if a != b and b != c and c != a:
    return a + b + c

  elif a == b == c:
    return 0 

  elif a == b:
    return c
  elif b == c:
    return a
  elif c == a:
    return b 
```

因为如果 2 个值相同，代码将自动返回剩余的值。

# trigger.io - forge.prefs 和 localStorage 有什么区别？

> ID：10816822
> 
> 赞同：3
> 
> 时间：2012-05-30T13:00:14.843
> 
> 标签：trigger.io

在最近的版本中，引入了 forge.prefs。除了 forge.prefs 接受回调之外，此功能似乎与 localStorage API 非常相似。

使用一个比另一个有什么优势？操作上有什么区别？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T10:06:06.270

forge.prefs 的实现使用设备的本机存储实现，例如 iOS 上的 NSUserDefaults 和[Android上的](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsuserdefaults_Class/Reference/Reference.html)[SharedPreferences](http://developer.android.com/reference/android/preference/package-summary.html)。

其确切的后果取决于平台，但这里的主要目标是增加存储量的上限 - 默认情况下，某些设备也没有持久的 localStorage IIRC ...

# c# - 从 c# 套接字读取确切的字节数

> ID：10816823
> 
> 赞同：1
> 
> 时间：2012-05-30T13:00:18.197
> 
> 标签：c#, .net, sockets, asynchronous, network-programming

我正在使用 C# 套接字（异步模式），需要从流中读取确切的字节数才能正确解析消息。由于我们系统中的消息非常长，因此 socket.EndRead 操作返回的字节数似乎少于 socket.BeginRead 中请求的字节数。只有在读取确切的字节数时才有机会完成 c# 套接字标记操作？？？正在使用 NetworkStream 吗？？？\

```
IAsyncRes ar = socket.BeginRead(1Mb byte message)
ar.Handle.Wait() // --> will signal ONLY when 1Mb us read !!!!
socket.EndRead() 
```

升级版：

我已经用 c# 迭代器解决了它。（此处未显示运行 irator 循环并负责执行 MoveNext 的线程）

```
protected IEnumerator<IAsyncResult> EnumReceiveExact(byte[] array)
        {

            int offset = 0;

            while (offset < array.Length)
            {
                SocketError err = SocketError.Success;
                IAsyncResult ar = _socket.BeginReceive(array, offset, array.Length - offset, SocketFlags.None, out err, null, null);
                Console.WriteLine("{0}:err:{1}", this, err);
                if (err != SocketError.Success)
                {
                    _socket.Close();
                    throw new Exception("Error " + err);
                }

                yield return ar;
                while (!ar.IsCompleted)
                {
                    yield return ar;
                }

                offset += _socket.EndReceive(ar, out err);
                if (err != SocketError.Success)
                {
                    _socket.Close();
                    throw new Exception("Error " + err);
                }

            }

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T10:07:51.360

与枚举器的良好调用，尽管我希望您的外部代码不仅仅是在 asyncresults 上调用 WaitOne，因为这会阻塞正在运行的线程。

如果您喜欢这种异步编码风格，请查看 NuGet 上的 Wintellect AsyncEnumerator - 它也使用迭代器，使代码非常高效，并添加了更简单的方法来处理取消和异常，同时确保所有 APM 结束方法都被调用。

我之前通过以下方式解决了确切的读取问题：

1) 为在套接字上发送的数据添加长度前缀
2) 使用以下方法定义一个在 Socket 上工作的辅助类：

```
public IAsyncResult BeginRead(AsyncCallback callback)
// Calculate whether to read length header or remaining payload bytes
// Issue socket recieve and return its IAsyncResult

public MemoryStream EndRead(IAsyncResult result)
// Process socket read, if payload read completely return as a memorystream
// If length header has been recieved make sure buffer is big enough
// If 0 bytes recieved, throw SocketException(10057) as conn is closed

public IAsyncResult BeginSend(AsyncCallback callback, MemoryStream data)
// Issue sends for the length header or payload (data.GetBuffer()) on the first call

public Boolean EndSend(IAsyncResult result)
// Process bytes sent, return true if payload sent completely.
// If 0 bytes sent, throw SocketException(10057) 
```

所以它仍然需要在循环中调用，但看起来像一个正常的异步操作，例如通过 asyncenumerator 调用（没有取消检查和异常处理）：

```
do
{
    socketHelper.BeginSend(ae.End(1, ar => socketHelper.EndSend(ar)), sendData);
    yield return 1;
    doneSend = socketHelper.EndSend(ae.DequeueAsyncResult());
} 
while (!doneSend); 
```

# javascript - 更改 iframe 中的内容时，加载图标不会重新出现

> ID：10816824
> 
> 赞同：0
> 
> 时间：2012-05-30T13:00:22.363
> 
> 标签：javascript, iframe, loading

我有一个显示图表的 iframe，由表单控制。我已经包含在脚本中以在 iframe 加载时显示加载 gif。但是，此 gif 仅在 iframe 首次加载时出现。但是，当我在表单中进行更改以显示我想查看的数据时，iframe 会重新加载以显示新图形，但“正在加载”的 gif 不会重新出现。我怎样才能解决这个问题？这是我已经拥有的加载 gif 的代码：

```
<form id="form1" runat="server">
    <div id="divLoading">
    <img src="images/loading.gif" alt="" />
    </div>
    <div id="divFrameHolder" style="display:none"> 
<iframe src="grafiek.php" width="800" height="400" name="grafiek" onload="hideLoading()" frameborder="0" marginwidth="0" marginheight="0" scrolling="no" align="middle" allowtransparency="true"></iframe> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T13:03:07.130

由于您在 iframe 的 onload 属性中有一个 hideLoading，因此您的加载在 iframe 的第一次加载后被隐藏。然后您更改 iframe，但就像加载图标不在 iframe 中一样，它不再显示。更改 iframe 时尝试再次显示。

你实际上是这样做的：

*   加载 iframe，首次显示加载图标
*   显示 iframe 时，隐藏加载（onload 属性中的 hideLoading 方法）
*   更改 iframe 源：图标不再显示，因此不会出现

你应该做：

*   加载 iframe，首次显示加载图标
*   显示 iframe 时，隐藏加载（onload 属性中的 hideLoading 方法）
*   更改 iframe 源：在更改 iframe 之前，再次显示加载图标

# c# - 从 Outlook 2010 中的选定邮件项获取信息

> ID：10816828
> 
> 赞同：3
> 
> 时间：2012-05-30T13:00:35.797
> 
> 标签：c#, outlook, ms-office

我想为 Outlook 2010 编写一个加载项。想法是 - 用户在文件夹中选择一个邮件项目，然后按下功能区上的按钮启动加载项。加载项从所选项目中获取信息，对其进行处理并显示结果。尝试获取所选项目的检查器时遇到问题。我试过了：

```
Outlook.Inspector Point = this.Application.ActiveInspector().CurrentItem as Outlook.Inspector;
Outlook.MailItem mailItem = Point.CurrentItem as Outlook.MailItem; 
```

当然，这不会检查当前项目是否实际上是邮件项目，但这是以后的事情。我的问题是，当我尝试运行程序时，我得到 NullReferenceException。我在网上找到的唯一可行的例子是[事件处理](http://msdn.microsoft.com/en-us/library/cc668191.aspx#Y684)。但我想在按钮按下时开始加载..

我试图在 .NET 3.5 而不是 4

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-30T14:12:50.003

这[`ActiveInspector()`](http://msdn.microsoft.com/en-us/library/ff863939.aspx)是当用户双击窗口中的邮件项时打开的[`Explorer`](http://msdn.microsoft.com/en-us/library/ff860356.aspx)窗口。如果用户只是[`MailItems`](http://msdn.microsoft.com/en-us/library/ff861332.aspx)在阅读窗格中查看 - 您将没有活动的检查器窗口（*因此是`NullReferenceException`*）。

您可能正在寻找[`Explorer.Selection`](http://msdn.microsoft.com/en-us/library/ff861267.aspx)以访问当前选定的[`MailItems`](http://msdn.microsoft.com/en-us/library/ff861267.aspx).

```
 Outlook.Selection selection = this.Application.ActiveExplorer().Selection; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-01T16:20:20.973

Globals.ThisAddIn.Application 获取 Application 对象。这可能是您的空引用，功能区类中的“this”上没有 Application 对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T21:51:19.750

这是帮助我解决 Outlook 互操作问题的链接：http: [//msdn.microsoft.com/en-us/library/ff184621.aspx](http://msdn.microsoft.com/en-us/library/ff184621.aspx) - 它也显示了如何枚举当前选定的项目。

# php - Mysql unix时间戳选择

> ID：10816829
> 
> 赞同：1
> 
> 时间：2012-05-30T13:00:44.513
> 
> 标签：php, mysql

我有带有订单列表的表格。每个订单都有订单日期（时间戳 1331182800）。对于每个订单，用户可以选择按 30、60 或 90 天（`reorder`字段 (int)）自动重新订购。我需要用于 cron 的 sql 来选择所有具有订单日期 = 日期 + 重新排序的订单。（日期顺序 + 30 或 60 或 90 天）。你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T13:05:56.957

```
SELECT * FROM orders o WHERE DATE_FORMAT(DATE_SUB(NOW(), INTERVAL o.reorder DAY), '%d/%m/%Y') = DATE_FORMAT(FROM_UNIXTIME(o.date), '%d/%m/%Y') 
```

编辑以跳过比较的秒数。我没有 MYSQL 引擎，所以仍然可能出现一些错误，如果是这样的话，我很抱歉给您带来不便......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T13:03:32.027

像这样的东西应该工作：

```
SELECT * FROM orders WHERE `date` < UNIX_TIMESTAMP() - reorder*86400; # returns all orders, `date` field of which is older than 90 days ago 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T13:05:18.007

时间戳是从 1970 年 1 月 1 日起经过的秒数，因此为了将时间戳值转换为天数，需要将其乘以 60 * 60 * 24 (= 86400)

# c++ - 功能工作定时器

> ID：10816830
> 
> 赞同：0
> 
> 时间：2012-05-30T13:00:48.350
> 
> 标签：c++, sockets, function, timer

我有一个从套接字接收数据的函数，我需要在 5 秒后停止函数而不创建额外的线程。我的代码：

```
void TestReceive()
{
 //how to stop code below when 5 second passed&
 size_t received = 0;
 while (received < 4)
 {
  ssize_t r = read(fd, buffer, 4);
  if (r <= 0) break;
  received += r;
 }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T13:03:11.537

使用 select()，这将阻塞，直到可以读取某些内容或最多在 timeval 中指定的时间，如下所示。

```
int select(int nfds, fd_set *readfds, fd_set *writefds, fd_set *exceptfds, struct timeval *timeout); 
```

select() 不会读取或写入，它的作用是针对一组描述符（readfds、writefds 和/或exceptfds），它将等待/阻塞，直到发生以下情况之一：

*   有一个可供读取的描述符
*   有一个准备写入的描述符
*   其中一个描述符有异常，就像它已关闭一样
*   如果指定了超时，则当配置的时间到期时

如果您只需要“等待”（睡眠）5 秒钟，然后读取，您可以睡眠（`usleep()`在 linux 上）5 秒钟，然后通过设置套接字选项或调用 select() 进行非阻塞读取最小超时并检查是否有要读取的内容。

这是一个相关的问题。[C++ select() 函数如何在 Unix 操作系统中工作？](https://stackoverflow.com/questions/3838112/how-c-select-function-works-in-unix-oss)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T13:08:56.617

正如@Brady 建议的那样， select() 将起作用

您还可以设置套接字选项 `setsockopt(s, SOL_SOCKET, SO_RCVTIMEO ...`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T13:06:06.817

记录循环开始前的当前时间。在每次迭代中 - 检查是否已经过了 5 秒 - 如果是 -**中断；**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-30T13:45:05.633

我会推荐以下方法：

*   将当前时间测量为 var 说 startTime；
*   环形
*   使用超时（选择）从您的套接字读取。让超时为**startTime + 5 秒 - 现在**
*   迭代直到超时匹配（或超时很少应用）

这种方法使用超时而不是单独的线程

# java - 在 SQL 查询中匹配 ArrayList 和 Byte Array

> ID：10816833
> 
> 赞同：0
> 
> 时间：2012-05-30T13:00:52.890
> 
> 标签：java, sql, jpa

我正在实现一个程序java和jpa。我想比较搜索功能中的 ArrayList。在我的数据库表中，我保留了字符串字节数组的数据。

我在我的函数中使用 ArrayList 的参数，但我不知道如何编写查询。如果我使用 IN，似乎我必须创建一个循环并使用循环从表中选择数据。因为它在字符串和字符串列表之间进行比较，而不是在字符串列表和字符串列表之间进行比较。任何人都可以给我一些建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T15:08:17.030

如果您的 ArrayList 不是太大，您可以构建您的语句以将其用作 UNION 表：

```
SELECT * FROM MyTable AS A INNER JOIN (
        SELECT 'ALVal1' AS Val
        UNION ALL
        SELECT 'ALVal2' AS Val
        UNION ALL
        ...
        ) AS B
    ON A.MyVal = B.Val 
```

但我可能会在这里显示我缺乏 jpa ......你能建立自己的陈述吗？

# java - 使用数据文件部署 Java 应用程序、Java Applet 和 Android 应用程序的正确方法是什么？

> ID：10816834
> 
> 赞同：2
> 
> 时间：2012-05-30T13:00:52.933
> 
> 标签：java, android, deployment, frameworks, applet

我是 Java 游戏开发的开始，我只有 C++ 计算机游戏开发的经验。我现在正在制作的游戏将通过可下载版本 (Win/Linux) 和浏览器 - 小程序版本 (Win/Linux) 用于计算机，我也想让它可用于 Android 手机。

我知道我在处理计算机和安卓系统时会遇到一些麻烦，尤其是使用 OpenGL 部分，但我不想通过学习许多用于游戏数据加载的系统来增加自己的工作量。

因此，我正在寻找任何**库或系统**如何加载游戏内容，如关卡、纹理、模型，这些内容**可用于多个系统（本地、Applet 或 Android**版本）的差异最小。

我正在考虑将纯文本文件和图像打包到 jar 中，但我不确定这是否是正确的方法，我不想开始做坏事，然后重写很多代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T13:42:12.493

适用于 Java 应用程序和小程序

1.  [使用Java Web Start](https://stackoverflow.com/tags/java-web-start/info)部署它们（适用于 Windows、*nix**和 OS X**）
2.  将应用程序资源放入运行时类路径上的 Jars
3.  `URL`通过从获取访问资源`Class.getResource(String)`

对 Android 开发人员不太熟悉，但我怀疑第 2 点是相同的“将它们添加到运行时类路径”，可能使用`Context`or访问它们`AssetManager`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T13:04:14.507

[Unity](http://unity3d.com/)我被称为，它基本上是平台独立的。希望这就是你要找的

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T14:30:13.007

如果您要进入 android dev，请查看名为 AIDE 的应用程序。它代表 Android Integrated Devolopment Envlriment 或 Android IDE。我使用它，它对动态测试非常有帮助。

装在罐子里的照片将是一个聪明的主意。

# data-recovery - 如何从损坏的 Lacie 1TB NAS (Neil Poulton) 中恢复数据？

> ID：10816835
> 
> 赞同：1
> 
> 时间：2012-05-30T13:00:53.907
> 
> 标签：data-recovery, nas

我的 Lacie NAS 1TB 驱动器出现了一个大问题，它似乎根本无法读取任何文件——我什至无法连接到它。现在我已经将它和它拆开，并尝试使用一个空闲的 SATA 端口将它放入我的计算机中。我可以看到驱动器的唯一地方是在计算机管理 - >磁盘管理下。HDD 上似乎共有 7 个分区，其中一个分区大小为 930GB（这似乎是我所有数据所在的分区）。尽管 Windows (Win7) 告诉我有 100% 的可用空间 - 这似乎不对。

我怎样才能从这个驱动器中恢复我的数据？

Lacie 使用什么文件系统？

非常感谢你的帮助？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T13:28:16.140

我的看法是，与大多数 NAS 一样，它使用 Linux Ext3 文件系统。如果这是真的，你不应该在 Windows 下对它做任何事情。您无法从那里修复它，而且您肯定会使事情变得更糟（一个很好的例子是声称磁盘或分区充满数据的系统是空的）。

我的建议是将此磁盘连接到具有 Linux 系统的计算机并尝试那里可用的许多磁盘修复工具。或者您可以尝试任何可用的磁盘修复工具（甚至是 Windows 版本），如果它提供了使用修复工具创建可引导 CD 并仅从那里访问损坏的磁盘（系统重新启动后）的选项。**在 Windows 下什么都不做**！

您可以考虑的名称（程序、工具和软件）包括：“Acronis True Image Home”、“Easeus Partition Master”、“Partition Recovery”和“PowerQuest Drive Image”。这适用于提供（或不提供）可引导版本的程序。您还可以考虑“Clonezilla Live”、“Hiren's BootCD”、“gParted Live CD”等。

我在我的 QNAP TS-210 上遇到了类似的问题并选择了冒险的方式。那就是：对磁盘不做任何事情，从头开始重新安装 NAS 系统（固件）。它就像一个魅力，虽然在那个过程中我被警告过很多次，我可能会丢失我所有的数据，所以这有点像一个心碎的时刻，等着看，如果我的 2,2 有什么遗漏TB数据！:]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-11T16:54:40.040

您 (C/SH) 应该取出硬盘驱动器并从基于 Linux 的操作系统中检查它。

我自己使用来自 Lacie 的损坏的 NETWORKSPACE 2 就这样做了。这对我来说很好，我可以将所有想要的文件复制到另一个 NTFS 格式的驱动器。

我使用 Linux MINT 并将 Lacie HD 放入计算机中，然后将所有内容复制到连接到计算机的 USB 硬盘上。

# java - Java 返回错误的图像类型

> ID：10816836
> 
> 赞同：0
> 
> 时间：2012-05-30T13:01:07.400
> 
> 标签：java

你好 Stack Overflow 的同胞们。当涉及到我的方法时，我有很多错误。我有一个应该将四个整数和图像转换为裁剪图像的类。我的问题不在于作物的坐标，而在于争论。

```
Cannot find sumbol = method GetSubImage(int, int, int, int, java.awt.Image); Maybe you meant: GetSubImg(int, int, int, int, BufferedImage) or GetSubImg(int, int, int, int, Image) 
```

但是，我使用的是最后一种方法，但它认为它是 java.awt.image 而不是 Image。我使用的是图像，而不是 java.awt.Image。

```
Image Playah = CrusLib.ImgLoad("H:/ZeldaMap/Sprites/Link.png");
CrusLib.GetSubImage(x * 18, y * 18, 18, 24, Playah); 
```

当然，CrusLib 是之前创建的。有人知道可能出了什么问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T13:15:38.860

您能否发布您的导入语句，您正在传递 java.awt.Image，检查您的 GetSubImage 以了解它所期望的图像。同时，请不要通过命名像“GetSubImage”这样的方法来杀死java。请更改为“getSubImage”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T12:35:35.693

很抱歉这篇文章的家伙，但这似乎是一个简单的错误，大多数编码人员在他们的职业生涯中至少经历过一次。

在它给我的错误中，它没有读取方法“GetSubImage”，但它识别出“GetSubImg”。不同之处在于我有一个额外的 a 和 e。感谢那些试图提供帮助的人！:)

# android - fclose 在 android 和 linux 上的工作方式不同

> ID：10816837
> 
> 赞同：5
> 
> 时间：2012-05-30T13:01:07.837
> 
> 标签：android, linux, fclose, android-ndk, freopen

以下程序：

```
#include <stdlib.h>
#include <stdio.h>
#include <sys/stat.h>
#include <sys/types.h>

int main() {
  fclose( stderr );
  printf( "%d\n", fileno( stderr ) );
  return 0;
} 
```

`-1`在 ubuntu 11.04 和`2`ICS 4.0.3 模拟器上显示。找不到有关此问题的任何信息 - 我可以使此代码在两个平台上类似地工作吗？`freopen`on`stderr`有同样的问题。

**更新：**

以前的小程序演示了我遇到的实际问题的原因：如果我尝试`freopen` `stderr`在不存在的目录中归档，在 linux 上`stderr`是关闭的，但在 android 上它保持打开状态！甚至更多 - 如果我在这个打开的`stderr`文件中写入 smth 然后`fopen`在其他文件上执行，我打印到`stderr`的文本将写入这个打开的文件。

所以，这个程序：

```
#include <stdlib.h>
#include <stdio.h>
#include <sys/stat.h>
#include <sys/types.h>

# define LOGD( ... ) printf( __VA_ARGS__ ); printf( "\n" )

# ifdef ANDROID
#   define HOMEDIR "/data/data/com.myapp/" // for android
# else
#   define HOMEDIR "/home/darkmist/" // for linux
# endif

# define _T( x ) x

void TestFreopen_mkdir() {
  int mkdirres = mkdir( HOMEDIR "1.d", 0777 );
  LOGD(_T("TestFreopen mkdirres=0x%08x"),mkdirres);
}

void TestFreopen() {
  LOGD(_T("TestFreopen begin"));

  LOGD(_T("TestFreopen stderr=0x%08x"),fileno(stderr));
  fprintf(stderr,"fprintf_1 to stderr\n");

  // TestFreopen_mkdir(); // case 1

  if ( NULL == freopen( HOMEDIR "1.d/1", "w", stderr ) ) {
    LOGD( "freopen failed" );
    if ( -1 != fileno( stderr ) ) {
      fclose( stderr );
      LOGD( "freopen closed" );
    }
  }

  LOGD(_T("TestFreopen stderr=0x%08x"),fileno(stderr));
  fprintf(stderr,"fprintf_2 to stderr\n");

  TestFreopen_mkdir(); // case 2

  FILE* fopen_file = fopen( HOMEDIR "1.d/2", _T( "wb" ) );

  LOGD(_T("TestFreopen fopen_file=0x%08x"),fileno(fopen_file)); // same as for reopened stderr!!

  fprintf(stderr,"fprintf_3 to stderr\n");
  fprintf(fopen_file,"fprintf_1 to fopen_file\n");
  fflush(fopen_file);

  LOGD(_T("TestFreopen end"));
}

int main() {
  TestFreopen();
  return 0;
} 
```

在 linux 上显示：

```
$ ./a.out
TestFreopen begin
TestFreopen stderr=0x00000002
fprintf_1 to stderr
freopen failed
TestFreopen stderr=0xffffffff
TestFreopen mkdirres=0x00000000
TestFreopen fopen_file=0x00000002
TestFreopen end

$ cat ~/1.d/2 
fprintf_1 to fopen_file 
```

这在android上：

```
$ adb push ./a.out /data/data/com.myapp
573 KB/s (34635 bytes in 0.058s)

$ adb shell run-as com.myapp /data/data/com.myapp/a.out
TestFreopen begin
TestFreopen stderr=0x00000002
fprintf_1 to stderr
freopen failed
freopen closed
TestFreopen stderr=0x00000002
TestFreopen mkdirres=0x00000000
TestFreopen fopen_file=0x00000002
TestFreopen end

$ adb shell run-as com.myapp cat /data/data/com.myapp/1.d/2
fprintf_3 to stderr
fprintf_1 to fopen_file 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-13T16:38:42.720

在我看来，您期望正式声明为文件指针在关闭后的未定义行为在具有非常不同 C 库的设备上是相同的。

一旦您以设计为失败的方式调用 freopen() ，将来使用该文件指针的尝试就不能依赖于获得一致的结果。

您发现了一些有趣的结果，剩余的部分仍然可以用于意外结果，但问题不在于它们不会导致某种异常，问题是您试图在语言中使用无效的文件指针并没有宣传自己有保障措施。

问题不在于系统，而在于您的程序滥用系统。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-31T18:40:41.337

在任何平台上关闭 stderr 后尝试使用它都没有任何意义。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-18T20:26:29.787

`fclose()`**是libc提供的一个函数，所以libc的不同实现可能会有不同的行为，因为fclose()**之后的文件描述符的状态是不确定的

Ubuntu 使用 eglibc，而 android 使用仿生作为标准 libc。

* * *

## eglibc

查看**fclose()**的 eglibc 2.15 源代码，我们有：

**来自 iofclose.c ：**

```
...
_IO_acquire_lock (fp);
if (fp->_IO_file_flags & _IO_IS_FILEBUF)
    status = INTUSE(_IO_file_close_it) (fp);
else
    status = fp->_flags & _IO_ERR_SEEN ? -1 : 0;
... 
```

您正在关闭 strerr，将执行第一条语句。查看以下函数：

**来自 fileops.c**：

```
fp->_flags = _IO_MAGIC|CLOSED_FILEBUF_FLAGS;
fp->_fileno = -1;
fp->_offset = _IO_pos_BAD;

return close_status ? close_status : write_status; 
```

如您所见，eglibc 将显式设置 fileno 为 -1。

* * *

## 仿生

Bionic 以自己的方式处理文件，从**fileno()**开始，它返回**fp->_file**：

**来自 stdio.h**

```
#define __sfileno(p)    ((p)->_file) 
```

**来自文件号.c**

```
int
fileno(FILE *fp)
{
        int ret;

    FLOCKFILE(fp);
        ret = __sfileno(fp);
        FUNLOCKFILE(fp);
        return (ret);
} 
```

查看**fclose()**的仿生源代码，我们有：

**来自 fclose.c**

```
int
fclose(FILE *fp)
{
        int r;

        if (fp->_flags == 0) {  /* not open! */
                errno = EBADF;
                return (EOF);
        }
        FLOCKFILE(fp);
        WCIO_FREE(fp);
        r = fp->_flags & __SWR ? __sflush(fp) : 0;
        if (fp->_close != NULL && (*fp->_close)(fp->_cookie) < 0)
                r = EOF;
        if (fp->_flags & __SMBF)
                free((char *)fp->_bf._base);
        if (HASUB(fp))
                FREEUB(fp);
        if (HASLB(fp))
                FREELB(fp);
        fp->_r = fp->_w = 0;    /* Mess up if reaccessed. */
        fp->_flags = 0;         /* Release this FILE for reuse. */
        FUNLOCKFILE(fp);
        return (r);
} 
```

**来自 wcio.h**

```
#define WCIO_FREE(fp) ((void)(0)) 
```

**从本地.h**

```
#define HASUB(fp) (_UB(fp)._base != NULL)
#define FREEUB(fp) { \
        if (_UB(fp)._base != (fp)->_ubuf) \
                free(_UB(fp)._base); \
        _UB(fp)._base = NULL; \
} 
```

如您所见， fp->_file 在 fclose() 过程中保持不变。**这实际上不是一个错误，因为fclose()**之后文件描述符的状态尚未确定，但这应该阐明在 Ubuntu 和 Android 中执行程序之间的区别。

为了使您的代码可移植，您应该避免关闭 stderr 或在关闭它后将其重新打开到 /dev/null 之类的位置。

# iphone - 在 iPad 中设置下拉菜单

> ID：10816840
> 
> 赞同：0
> 
> 时间：2012-05-30T13:01:17.447
> 
> 标签：iphone, ios, xcode, ipad, xcode4

我正在查看应用程序屏幕截图，并对其 iPAD 的设置选项印象深刻。看截图

![在此处输入图像描述](../Images/ca3de63345f00d878f1da31e3e151138.png)

谁能告诉我这个设置下降是如何为 iPAD 实现的？我通常将用户带到一个全新的页面/视图控制器，在其中定义一个静态表和选项。我不知道如何在同一个视图控制器中实现它，就像他们拥有它的方式一样。是否有任何示例/示例代码可用？或如何在 Xcode 4.0 中创建一个的步骤？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T13:03:52.813

这是一个`UIPopoverController`。看一下[文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIPopoverController_class/Reference/Reference.html)，创建一个真的很容易。本质上，您只需将普通视图控制器放入其中并从矩形或工具栏按钮呈现它。如果您的视图控制器没有填满整个屏幕高度，您还应该设置它的`contentSizeForViewInPopover`属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T13:03:52.877

看看[这](http://www.raywenderlich.com/1056/ipad-for-iphone-developers-101-uipopovercontroller-tutorial)会帮助你我想。有一个示例可以学习如何操作。[这里](http://ulapp.us/ipad-app-video-ipad-app-tutorial-uipopovercontroller/)还有一个视频教程。

# javascript - 向选择的插件添加/委托/绑定更改事件？

> ID：10816841
> 
> 赞同：1
> 
> 时间：2012-05-30T13:01:24.077
> 
> 标签：javascript, jquery, binding, jquery-chosen

我正在为我的选择器使用插件。它被称为[选择](http://harvesthq.github.com/chosen/)。我正在尝试为以下任何内容添加一个侦听器，但我觉得该插件正在阻止任何事情发生。理想情况下，我想添加一个事件，以便每次有人将“标签”添加到多选组时，都会调用一个方法。然而，事实证明这比它应该的要困难得多。到目前为止，我已经尝试了以下方法：

```
//detect when input field changes
$(".chzn-choices").find("input").change(function () { alert("lol I worked"); });

//detect when option is clicked (I dont think this works as a click event is already     binded to these and something is preventing the default
$(".chzn-drop").delegate("li", "click", function () { alert("clicked"); }); 
```

有人知道我可以在这里尝试什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T16:25:25.480

见[http://harvesthq.github.com/chosen/](http://harvesthq.github.com/chosen/)

表单字段更改

使用表单域时，您通常希望在选择或取消选择某个值后执行一些行为。每当用户在 Chosen 中选择一个字段时，它都会在原始表单字段上触发一个“更改”事件*。那让你做这样的事情：

```
$("#form_field").chosen().change( … ); 
```

# spring - Spring 3 ActiveMQ 错误 - 无法识别 AMQ 标记

> ID：10816850
> 
> 赞同：2
> 
> 时间：2012-05-30T13:02:04.360
> 
> 标签：spring, activemq

**描述：** 基于下面列出的其他类似问题，我的 Spring 文件中似乎存在命名空间问题或错误链接以生成此错误。我测试了每个链接，但每个链接似乎都有效。寻找我可能错过的想法和建议É

**Spring文件中的错误：** cvc-complex-type.2.4.c：匹配的通配符是严格的，但找不到元素'amq：connectionFactory'的声明

类似问题： [StackoverFlow 发布](https://stackoverflow.com/questions/9786192/org-xml-sax-saxparseexception-cvc-complex-type-2-4-c-the-matching-wildcard-is)

弹簧配置文件：

```
<beans 
 xmlns="http://www.springframework.org/schema/beans"
 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
 xmlns:aop="http://www.springframework.org/schema/aop"
 xmlns:context="http://www.springframework.org/schema/context"
 xmlns:jms="http://www.springframework.org/schema/jms"
 xmlns:amq="http://activemq.apache.org/schema/core"
 xsi:schemaLocation="http://www.springframework.org/schema/beans
        http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
        http://www.springframework.org/schema/context
        http://www.springframework.org/schema/context/spring-context-3.0.xsd
        http://www.springframework.org/schema/jms 
        http://www.springframework.org/schema/jms/spring-jms.xsd
        http://activemq.apache.org/schema/core 
        http://activemq.apache.org/schema/core/activemq-core-5.6.0.xsd">

    <amq:connectionFactory  id="connectionFactory" brokerURL="tcp://localhost:61616" />

    <amq:queue id="topic" physicalName="spitter.alert.topic" />

    <!-- *****JMS TEMPLATE**** -->
    <bean   id="jmsTemplate"
            class="org.springframework.jms.core.JmsTemplate">
        <property name="connectionFactory" ref="connectionFactory"/>
        <property name="defaultDestinationName" value="spittle.alert.topic"/>
    </bean>

    <bean id="spittleHandler" class="com.habuma.spitter.alerts.SpittleAlertHandler" />

    <jms:listener-container connection-factory="connectionFactory">
        <jms:listener destination="spitter.alert.topic" ref="spittleHandler"
            method="processSpittle" />
    </jms:listener-container>
</beans> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-13T10:38:53.980

我遇到了同样的问题，在尝试了命名空间声明的顺序后，它已经解决了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T18:56:03.823

由 Sully6768 在上面的评论中提供的答案：

上面的代码没有问题。

由开发工作区中的配置设置引起的问题。

# html - css标签宽度不生效

> ID：10816853
> 
> 赞同：127
> 
> 时间：2012-05-30T13:02:23.860
> 
> 标签：html, css, label

我有一个通用表单，我想对其进行样式设置以对齐标签和输入字段。出于某种原因，当我为标签选择器指定宽度时，没有任何反应：

HTML：

```
<form id="report-upload-form" method="POST" action="" enctype="multipart/form-data">
    <p>
        <label for="id_title">Title:</label> 
        <input id="id_title" type="text" class="input-text" name="title"></p>
    <p>
        <label for="id_description">Description:</label> 
        <textarea id="id_description" rows="10" cols="40" name="description"></textarea></p>
    <p>
        <label for="id_report">Upload Report:</label> 
        <input id="id_report" type="file" class="input-file" name="report">
    </p>
</form> 
```

CSS：

```
#report-upload-form {
    background-color: #316091;
    color: #ddeff1;
    font-weight:bold;
    margin: 23px auto 0 auto;
    border-radius:10px;
    width: 650px;
    box-shadow:  0 0 2px 2px #d9d9d9;
}

#report-upload-form label {
    padding-left:26px;
    width:125px;
    text-transform: uppercase;
}

#report-upload-form input[type=text], 
#report-upload-form input[type=file],
#report-upload-form textarea {
    width: 305px;
} 
```

输出：

![在此处输入图像描述](../Images/649e63b96495c6f75eff675f82c6f7fb.png)

[jsFiddle](https://jsfiddle.net/uL0tnhr9/)

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：238
> 
> 时间：2012-05-30T13:06:26.103

做`display: inline-block`：

```
#report-upload-form label {
    padding-left:26px;
    width:125px;
    text-transform: uppercase;
    display:inline-block
} 
```

[http://jsfiddle.net/aqMN4/](http://jsfiddle.net/aqMN4/)

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2012-05-30T13:05:13.103

采用`display: inline-block;`

**解释：**

是一个内联元素，这`label`意味着它只有需要的大小。

将`display`属性设置为`inline-block`或`block`以使`width`属性生效。

**例子：**

```
#report-upload-form {
    background-color: #316091;
    color: #ddeff1;
    font-weight: bold;
    margin: 23px auto 0 auto;
    border-radius: 10px;
    width: 650px;
    box-shadow: 0 0 2px 2px #d9d9d9;

}

#report-upload-form label {
    padding-left: 26px;
    width: 125px;
    text-transform: uppercase;
    display: inline-block;
}

#report-upload-form input[type=text], 
#report-upload-form input[type=file],
#report-upload-form textarea {
    width: 305px;
}
```

```
<form id="report-upload-form" method="POST" action="" enctype="multipart/form-data">
    <p><label for="id_title">Title:</label> <input id="id_title" type="text" class="input-text" name="title"></p>
    <p><label for="id_description">Description:</label> <textarea id="id_description" rows="10" cols="40" name="description"></textarea></p>
    <p><label for="id_report">Upload Report:</label> <input id="id_report" type="file" class="input-file" name="report"></p>
</form>
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-05-30T13:05:02.330

我相信标签是内联的，所以它们没有宽度。也许尝试使用“显示：块”并从那里开始。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-05-30T13:09:08.130

首先将其设为一个块，然后向左浮动以停止将下一个块推入新行。

```
#report-upload-form label {
                           padding-left:26px;
                           width:125px;
                           text-transform: uppercase;
                           display:block;
                           float:left
} 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-05-30T13:05:25.257

给风格

```
display:inline-block; 
```

希望这会有所帮助'

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2012-05-30T13:05:37.557

`label`的默认`display`模式是`inline`，这意味着它会根据内容自动调整大小。要设置宽度，您需要设置`display:block`然后进行一些处理以使其正确定位（可能涉及`float`）

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-04-14T02:36:17.477

```
 label
    {
    display: inline-block;
    } 
```

将为您提供更改标签宽度和自定义对齐表单的灵活性。干杯

# javascript - 使用 html5、css3 和 js 沿圆形绘制矩形

> ID：10816864
> 
> 赞同：2
> 
> 时间：2012-05-30T13:03:17.120
> 
> 标签：javascript, html, css

我必须使用 html5、css3 和 js 沿着一个圆圈绘制 32 个矩形。你可以通过这张图片看到我的目标：

[![我的目标](../Images/118809eeaed46c4318df41a1c9b67760.png)](https://i.stack.imgur.com/YV3mt.png) .

我设计的解决方案是在 js 中创建“a for”，每次增加旋转、坐标和 z-index 都会生成 32 个矩形。我试过了，但是太复杂了。

请帮我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T13:29:22.973

这将创建一个像您的图片一样的画布 - 根据需要调整变量：

```
var canvas = document.getElementById('c');
var ctx = canvas.getContext('2d');

var w = canvas.width;
var h = canvas.height;

var r1 = Math.min(w, h) * 0.4;    // outer radius
var r0 = r1 - 40;                 // inner radius

var n = 32;                       // number of blocks

var theta = 2 * Math.PI / n;
var phi = theta * 0.45;           // relative half-block width

ctx.save();
ctx.fillStyle = '#c0c0c0';
ctx.translate(w / 2, h / 2);      // move to center of circle

for (var i = 0; i < n; ++i) {
    ctx.beginPath();
    ctx.arc(0, 0, r0, -phi, phi);
    ctx.arc(0, 0, r1, phi, -phi, true);
    ctx.fill();
    ctx.rotate(theta);            // rotate the coordinates by one block
}

ctx.restore();
​ 
```

[http://jsfiddle.net/alnitak/qxZ5b/](http://jsfiddle.net/alnitak/qxZ5b/)的工作示例

**编辑**这是不正确的（OP 想要单独的 DOM 元素，而不是画布），但留在这里供参考。有关基于 DOM 的方法，请参阅我的[其他答案](https://stackoverflow.com/a/10819173/6782)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T13:09:55.667

这并不完美，但它得到了一些非常相似的东西......

```
div {
   width: 200px;
   height: 200px;
   border: 10px dotted #E5E5E5;
   border-radius: 200px;    
}​ 
```

[js小提琴](http://jsfiddle.net/SVZYG/)。

![例子](../Images/9835846762bacf873c527a313886672d.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T15:14:10.927

这是一个新版本，已更新以显示 OP 要求每个矩形都有一个实际的 DOM 元素，而不是单个画布：

```
var n = 32;

for (var i = 0; i < n; ++i) {
    var d = document.createElement('div');
    var r = 360 * i / n;
    var s = 'translate(200px,200px) rotate(' + r + 'deg) translate(0px, -180px)';

    d.setAttribute('class', 'box');
    d.setAttribute('style', '-webkit-transform:' + s);

    var t = document.createTextNode(i);
    d.appendChild(t);

    document.body.appendChild(d);
}​ 
```

[http://jsfiddle.net/alnitak/CFAyf/](http://jsfiddle.net/alnitak/CFAyf/)的工作演示，其中包含一些额外的（和必要的）CSS

注意：您需要使用浏览器检测来设置正确的`-transform`样式属性。所示示例适用于 Chrome 和 Safari。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-21T20:10:51.133

你可以只用 CSS 来做到这一点。为另一个项目做了它，它适用于 ie9+ 和所有现代浏览器。

这将创建一个带有单独 DOM 元素、可点击和不可点击的圆圈。

```
<div class="wrapper" id="wrapper">
             <ul>
            <li><a href="#"><span class=""></span></a></li>
            <li><a href="#"><span class=""></span></a></li>
            <li><a href="#"><span class=""></span></a></li>
            <li><a href="#"><span class=""></span></a></li>
            <li><a href="#"><span class=""></span></a></li>
            <li><a href="#"><span class=""></span></a></li>
            <li><a href="#"><span class=""></span></a></li>
            <li><a href="#"><span class=""></span></a></li>
            <li><a href="#"><span class=""></span></a></li>
            <li><a href="#"><span class=""></span></a></li>
            <li><a href="#"><span class=""></span></a></li>
            <li><a href="#" ><span class=""></span></a></li>
             </ul>
            <div class="content"><p id="timeFirst"></p><br /><p>till</p><br /><p class="timeLast"></p></div>
            </div>
            </div> 
```

和CSS

```
.csstransforms .wrapper {
      display: block;
      font-size:1em;
      width: 10em;
          height: 10em;
          border-radius: 50%; 
          position: relative;
      overflow: hidden;
      margin: 0 auto;
      z-index: 99;
 }
.csstransforms .wrapper li
{
    list-style: none;
    position:absolute;
    overflow:hidden;
    -webkit-transform-origin: 100% 100%;
    -moz-transform-origin: 100% 100%;
    -ms-transform-origin: 100% 100%;
    -o-transform-origin: 100% 100%;
    transform-origin: 100% 100%;
    width: 10em;
    height: 10em;
    top: 50%;
    left: 50%;
    margin-top: -10em;
    margin-left: -10em;
    border-bottom: 1px solid white; 
}
.csstransforms .wrapper li a
{
    display: block;
    width: 10.5em;
    height: 10.5em;
    position: absolute;
    top:50%;
    left:50%;
    bottom: -7.5em;
    right: -7.5em;
    background-color: #D9D9D9; 
    text-align: center;
    -webkit-transform: skew(-60deg) rotate(-90deg) scale(2);
    -moz-transform: skew(-60deg) rotate(-90deg) scale(2);
    -ms-transform: skew(-60deg) rotate(-90deg) scale(2);
    -o-transform: skew(-60deg) rotate(-90deg) scale(2);
    transform: skew(-60deg) rotate(-90deg) scale(2);
}
.wrapper .content
{   
    position: absolute;
    width: 8em;
    height: 8em;
    border-radius: 50%;
    background-color:#FFFFFF;
    top:10%;
    left:10%;
    z-index: 25;
}
.csstransforms .wrapper li a:hover,
.csstransforms .wrapper li a:focus,
.csstransforms .wrapper li a:active
{
    background-color: #919191;
    cursor: pointer;
}
.csstransforms .wrapper li:nth-child(9) a
{
    background-color: #F9F9F9;
    cursor: default;

}
.csstransforms .wrapper li:nth-child(9) a:hover,
.csstransforms .wrapper li:nth-child(9) a:focus,
.csstransforms .wrapper li:nth-child(9) a:active
{
    background-color: #F9F9F9;
    cursor: default;

}
.active /*Later for use with JS */
{
    background-color:#32ADCF;
}
.csstransforms .wrapper li:first-child {
  -webkit-transform: rotate(30deg) skew(60deg);
  -moz-transform: rotate(30deg) skew(60deg);
  -ms-transform: rotate(30deg) skew(60deg);
  -o-transform: rotate(30deg) skew(60deg);
  transform: rotate(30deg) skew(60deg);

}

.csstransforms .wrapper li:nth-child(2) {
  -webkit-transform: rotate(60deg) skew(60deg);
  -moz-transform: rotate(60deg) skew(60deg);
  -ms-transform: rotate(60deg) skew(60deg);
  -o-transform: rotate(60deg) skew(60deg);
  transform: rotate(60deg) skew(60deg);

}

.csstransforms .wrapper li:nth-child(3) {
  -webkit-transform: rotate(90deg) skew(60deg);
  -moz-transform: rotate(90deg) skew(60deg);
  -ms-transform: rotate(90deg) skew(60deg);
  -o-transform: rotate(90deg) skew(60deg);
  transform: rotate(90deg) skew(60deg);
}
.csstransforms .wrapper li:nth-child(4) {
  -webkit-transform: rotate(120deg) skew(60deg);
  -moz-transform: rotate(120deg) skew(60deg);
  -ms-transform: rotate(120deg) skew(60deg);
  -o-transform: rotate(120deg) skew(60deg);
  transform: rotate(120deg) skew(60deg);
}
.csstransforms .wrapper li:nth-child(5) {
  -webkit-transform: rotate(150deg) skew(60deg);
  -moz-transform: rotate(150deg) skew(60deg);
  -ms-transform: rotate(150deg) skew(60deg);
  -o-transform: rotate(150deg) skew(60deg);
  transform: rotate(150deg) skew(60deg);
}

.csstransforms .wrapper li:nth-child(6) {
  -webkit-transform: rotate(180deg) skew(60deg);
  -moz-transform: rotate(180deg) skew(60deg);
  -ms-transform: rotate(180deg) skew(60deg);
  -o-transform: rotate(180deg) skew(60deg);
  transform: rotate(180deg) skew(60deg);
}
.csstransforms .wrapper li:nth-child(7) {
  -webkit-transform: rotate(210deg) skew(60deg);
  -moz-transform: rotate(210deg) skew(60deg);
  -ms-transform: rotate(210deg) skew(60deg);
  -o-transform: rotate(210deg) skew(60deg);
  transform: rotate(210deg) skew(60deg);
}
.csstransforms .wrapper li:nth-child(8) {
  -webkit-transform: rotate(240deg) skew(60deg);
  -moz-transform: rotate(240deg) skew(60deg);
  -ms-transform: rotate(240deg) skew(60deg);
  -o-transform: rotate(240deg) skew(60deg);
  transform: rotate(240deg) skew(60deg);
}
.csstransforms .wrapper li:nth-child(9) {
  -webkit-transform: rotate(270deg) skew(60deg);
  -moz-transform: rotate(270deg) skew(60deg);
  -ms-transform: rotate(270deg) skew(60deg);
  -o-transform: rotate(270deg) skew(60deg);
  transform: rotate(270deg) skew(60deg);
}
.csstransforms .wrapper li:nth-child(10) {
  -webkit-transform: rotate(300deg) skew(60deg);
  -moz-transform: rotate(300deg) skew(60deg);
  -ms-transform: rotate(300deg) skew(60deg);
  -o-transform: rotate(300deg) skew(60deg);
  transform: rotate(300deg) skew(60deg);
}
.csstransforms .wrapper li:nth-child(11) {
  -webkit-transform: rotate(330deg) skew(60deg);
  -moz-transform: rotate(330deg) skew(60deg);
  -ms-transform: rotate(330deg) skew(60deg);
  -o-transform: rotate(330deg) skew(60deg);
  transform: rotate(330deg) skew(60deg);
}
.csstransforms .wrapper li:nth-child(12) {
  -webkit-transform: rotate(360deg) skew(60deg);
  -moz-transform: rotate(360deg) skew(60deg);
  -ms-transform: rotate(360deg) skew(60deg);
  -o-transform: rotate(360deg) skew(60deg);
  transform: rotate(360deg) skew(60deg);
   z-index:-1; /* Last element index set to minus to fix a bug in IE9+ */

} 
```

使用 32 个矩形为您旋转的公式将是 360/32 = 11.25 作为中心角。然后，您需要使用公式 90 - x（其中 X 是您的中心角）使矩形倾斜以适合您的中心角，即 78,75。如果您想要矩形内的内容，您需要使用您用来倾斜列表项的相反值将它们向后倾斜。使用公式 90 -(x/2) 旋转列表项的内容，其中 x 是圆心角。所以对你来说这将是 90 -(11,25/2) = 84.4

***已编辑***

添加了一个有效的 JS fiddle，以便人们可以看到它有效。[http://jsfiddle.net/AaJ94/](http://jsfiddle.net/AaJ94/)

# android - 滚动后在选择网格项上获取空指针异常

> ID：10816870
> 
> 赞同：1
> 
> 时间：2012-05-30T13:03:51.177
> 
> 标签：android, android-gridview

在进行滚动（垂直）后单击时，我得到空指针异常而不是 TextView。供您参考，我使用以下代码：

集合图像.xml：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
     >
    <GridView
    android:id="@+id/gridView"
    android:layout_width="fill_parent" 
    android:layout_height="fill_parent"
    android:numColumns="3"
    android:verticalSpacing="10dp"
    android:horizontalSpacing="10dp"
    android:columnWidth="120dp"
    android:gravity="center" />
</RelativeLayout> 
```

适配器_griditem.xml：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
   android:layout_width="wrap_content"
   android:layout_height="wrap_content"
   android:orientation="vertical"
   android:gravity="center" >

   <TextView
       android:id="@+id/grid_item_text"
       android:layout_width="wrap_content"
       android:layout_height="wrap_content"
       android:gravity="center_horizontal"
       android:textColor="#FFFFFF" />

</LinearLayout> 
```

扩展 BaseAdapter 类的 ImageAdapter 的 getView 函数

```
public View getView(int position, View convertView, ViewGroup parent) {
    View MyView = convertView;
    try{
        Image cached = images[position];
        if(convertView == null) {
            MyView = LayoutInflater.from(mContext).inflate(R.layout.adapter_griditem, null);
        }
        title = (TextView)MyView.findViewById(R.id.grid_item_text);

        if(cached.thumb == null) {

            // no cached thumb, 

        } else {
            title.setTag(images[position].fullPath);
            title.setText(imageCollection[position]);
            title.setCompoundDrawablesWithIntrinsicBounds(null, new BitmapDrawable(cached.thumb), null, null);
        }
    }catch (Exception e) {
        e.printStackTrace();
    }
    return MyView;
} 
```

活动时（两个功能）：

```
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState){
    return inflater.inflate(R.layout.collection_image, container, false);
}

@Override
public void onResume(){
    imageAdapter = new ImageAdapter(getActivity().getApplicationContext(), collectionCount, mTag, imageCollection, mType);

        View fragmentView = getView();    
        mGridView = (GridView) fragmentView.findViewById(R.id.gridView);
        mGridView.destroyDrawingCache();
        mGridView.setAdapter(imageAdapter);

        mGridView.setOnItemClickListener(new OnItemClickListener() {
            public void onItemClick(AdapterView<?> parent, View v, int position, long id) {
                TextView mtext = (TextView) parent.getChildAt(position).findViewById(R.id.grid_item_text); 
                if(mtext != null){
                    String imageURL = (String) mtext.getTag();
                    gridHandler(imageURL);
                }
            }
        });

} 
```

请问有人吗？？

编辑1：

日志猫===

```
05-30 18:17:23.371: E/AndroidRuntime(512): FATAL EXCEPTION: main
05-30 18:17:23.371: E/AndroidRuntime(512): java.lang.NullPointerException
05-30 18:17:23.371: E/AndroidRuntime(512):  at com.tftus.greetz.fragments.DisplayCardsFragment$1.onItemClick(DisplayCardsFragment.java:71)
05-30 18:17:23.371: E/AndroidRuntime(512):  at android.widget.AdapterView.performItemClick(AdapterView.java:282)
05-30 18:17:23.371: E/AndroidRuntime(512):  at android.widget.AbsListView.performItemClick(AbsListView.java:1032)
05-30 18:17:23.371: E/AndroidRuntime(512):  at android.widget.AbsListView$PerformClick.run(AbsListView.java:2447)
05-30 18:17:23.371: E/AndroidRuntime(512):  at android.widget.AbsListView$1.run(AbsListView.java:3065)
05-30 18:17:23.371: E/AndroidRuntime(512):  at android.os.Handler.handleCallback(Handler.java:587)
05-30 18:17:23.371: E/AndroidRuntime(512):  at android.os.Handler.dispatchMessage(Handler.java:92)
05-30 18:17:23.371: E/AndroidRuntime(512):  at android.os.Looper.loop(Looper.java:126)
05-30 18:17:23.371: E/AndroidRuntime(512):  at android.app.ActivityThread.main(ActivityThread.java:3997)
05-30 18:17:23.371: E/AndroidRuntime(512):  at java.lang.reflect.Method.invokeNative(Native Method)
05-30 18:17:23.371: E/AndroidRuntime(512):  at java.lang.reflect.Method.invoke(Method.java:491)
05-30 18:17:23.371: E/AndroidRuntime(512):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:841)
05-30 18:17:23.371: E/AndroidRuntime(512):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:599)
05-30 18:17:23.371: E/AndroidRuntime(512):  at dalvik.system.NativeStart.main(Native Method) 
```

“DisplayCardsFragment.java:71”的代码

TextView mtext = (TextView) parent.getChildAt(position).findViewById(R.id.grid_item_text);

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T13:10:45.913

我认为它没有得到 xml 文件的引用，所以空指针异常

```
TextView mtext = (TextView)v.findViewById(R.id.grid_item_text); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T13:23:01.847

换行试试

```
 TextView mtext = (TextView) parent.getChildAt(position).findViewById(R.id.grid_item_text); 
           by 
 TextView mtext = (TextView) v.findViewById(R.id.grid_item_text); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T06:25:46.497

`OnItemClickListener`本身提供`itemview`. 当您使用`gridView.Child`它时，它将仅返回当前项目，但并非所有这就是您遇到问题的原因.....

采用：

```
v.findViewById(R.id.itemid); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-02T10:43:01.447

你替换

```
TextView mtext = (TextView)v.findViewById(R.id.grid_item_text); 
```

经过

```
TextView mtext = (TextView)v; 
```

在adapter_griditem.xml 中：

```
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
   android:id="@+id/grid_item_text"
   android:layout_width="wrap_content"
   android:layout_height="wrap_content"
   android:gravity="center_horizontal"
   android:textColor="#FFFFFF" /> 
```

# javascript - JQuery 灯箱不工作。显示控制台中的 Chrome 报告错误

> ID：10816875
> 
> 赞同：0
> 
> 时间：2012-05-30T13:04:00.833
> 
> 标签：javascript, jquery, plugins

当我单击通常会显示此类灯箱的单词时，我的页面没有显示我的 JQuery 灯箱插件时遇到问题。该站点在 Dreamweaver 中运行良好，但在 Umbraco 中没有显示灯箱。帮助将不胜感激。

Chrome:Show Console 报告错误：

```
> Failed to load resource: the server responded with a status of 404
> (Not Found) http://localhost:56526/Scripts/jquery.fancybox-1.3.4.css
> Uncaught SyntaxError: Unexpected token ILLEGAL 1059.aspx:116

<!-- #BeginEditable "doctitle" -->
<title>Innex Design</title><!--Umbraco Page Field will get inserted here to dynamically change title of page-->

  <!--SCRIPTS AND STYLESHEETS -->
  <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4/jquery.min.js"></script>
   <script type="text/javascript" src="/Scripts/script.js"></script>
  <link rel="stylesheet" type="text/css" href="/Scripts/jquery.fancybox-1.3.4.css" media="screen" />    
 <link rel= "stylesheet" href="/css/style.css" />

  <!--JAVASCRIPT -->
  <script type="text/javascript" src="/Scripts/jquery.mousewheel-3.0.4.pack.js"></script>
  <script type="text/javascript" src="/Scripts/jquery.fancybox-1.3.4.pack.js"></script>
  <script type="text/javascript">

$(document).ready(function() {

      $(".various1").fancybox({
        'titlePosition'    : 'inside',
        'transitionIn'    : 'none',
        'transitionOut'    : 'none'
      });
    });
function MM_swapImgRestore() { //v3.0
  var i,x,a=document.MM_sr; for(i=0;a&&i<a.length&&(x=a[i])&&x.oSrc;i++) x.src=x.oSrc;
}
function MM_preloadImages() { //v3.0
  var d=document; if(d.images){ if(!d.MM_p) d.MM_p=new Array();
    var i,j=d.MM_p.length,a=MM_preloadImages.arguments; for(i=0; i<a.length; i++)
    if (a[i].indexOf("#")!=0){ d.MM_p[j]=new Image; d.MM_p[j++].src=a[i];}}
}

function MM_findObj(n, d) { //v4.01
  var p,i,x;  if(!d) d=document; if((p=n.indexOf("?"))>0&&parent.frames.length) {
    d=parent.frames[n.substring(p+1)].document; n=n.substring(0,p);}
  if(!(x=d[n])&&d.all) x=d.all[n]; for (i=0;!x&&i<d.forms.length;i++) x=d.forms[i][n];
  for(i=0;!x&&d.layers&&i<d.layers.length;i++) x=MM_findObj(n,d.layers[i].document);
  if(!x && d.getElementById) x=d.getElementById(n); return x;
}

function MM_swapImage() { //v3.0
  var i,j=0,x,a=MM_swapImage.arguments; document.MM_sr=new Array; for(i=0;i<(a.length-2);i+=3)
   if ((x=MM_findObj(a[i]))!=null){document.MM_sr[j++]=x; if(!x.oSrc) x.oSrc=x.src; x.src=a[i+2];}
}
    </script>  

  <!--CSS SCRIPT-->
<style type="text/css">
body {
  background-repeat: repeat-x;
}
</style>
</head>

  <body onload="MM_preloadImages('/media/57/architectureBLACK.png','/media/446/interior-designBLACK.png','/media/732/project-managementBLACK.png','/media/253/cost-managementBLACK.png','/media/714/PlanningBLACK.png','/media/922/SurveyingBLACK.png','/media/333/energy-assessmentsBLACK.png','/media/506/landscape-architectureBLACK.png','/Images/DESIGNANDBUILD.png')"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T13:05:54.530

我以前见过这个，它是一个特殊的“空白”字符，它让 Chrome 很生气。

请在文本编辑器中打开您的文件，转到导致问题的行，删除所有空格并保存。你应该很高兴。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T13:07:48.797

至于`Uncaught SyntaxError: Unexpected token ILLEGAL 1059.aspx:116`您可能想查看有关该错误的[先前线程。](https://stackoverflow.com/questions/5733275/chrome-uncaught-syntax-error-unexpected-token-illegal)

另一个错误`Failed to load resource: the server responded with a status of 404`，确保如果你去那个 URL 你得到那个 css 文件

# php - 使用PHP在sql查询中插入NULL

> ID：10816877
> 
> 赞同：1
> 
> 时间：2012-05-30T13:04:07.683
> 
> 标签：php, mysql

我想使用两个数组 1 作为列和另一个作为值来构建查询。我在第一个数组中有 3 个整数列，我不想将 0 作为默认值存储，所以我想设置 NULL，我想检查是否为它输入了任何值，如果没有输入，我想为其设置 NULL。但是当我创建查询时，我看不到 NULL，我只看到 null 被空白替换。似乎 PHP 正在剥离 NULL 字？

```
$set_null = array("asst_phone","mailing_zip","other_zip");

    foreach($columns as $key=>$col){
    if(in_array($col,$set_null) && $values[$key] == ""){
       $val[$key] = NULL;
    }
    else    
       $val[$key] = "'".$values[$key]."'";
    }
    $query_vals = "";
    foreach($val as $qval){
      if($qval == "") $query_vals .= NULL;
        $query_vals .= $qval;
            }
    echo $query_vals; 
```

它生成如下查询

```
INSERT INTO zoho_contacts (`contactid`,`smownerid`,`contact_owner`,`lead_source`,`first_name`,`last_name`,`accountid`,`account_name`,`email`,`title`,`department`,`phone`,`home_phone`,`other_phone`,`fax`,`mobile`,`date_of_birth`,`assistant`,`asst_phone`,`reports_to`,`smcreatorid`,`created_by`,`modifiedby`,`modified_by`,`created_time`,`modified_time`,`mailing_street`,`other_street`,`mailing_city`,`other_city`,`mailing_state`,`other_state`,`mailing_zip`,`other_zip`,`mailing_country`,`other_country`,`description`,`email_opt_out`,`skype_id`,`salutation`,`add_to_quickbooks`,`secondary_email`) values ('418176000000052001','418176000000047003','','','','','418176000000047027','','','','','02164 25452132','','','','9798659821','','',,'','418176000000047003','','418176000000047003','','','','','','','','','',,,'','','','','','Mr.','','') 
```

我的mysql列结构

列属性 = NULL => 是的，默认 => NULL，对吗？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T13:05:37.430

代替

```
$val[$key] = NULL; 
```

和

```
$val[$key] = 'NULL'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T13:06:48.780

在 php 中，NULL 需要被引用（如果你希望它在这个查询中工作）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T13:30:31.387

对所有值使用 mysql_escape_string 可能是一个更好的主意。

```
if($val != "")
$val= "".mysql_escape_string($val)."";
else
$val = "NULL"; 
```

# javascript - 指令“范围”中需要值属性

> ID：10816878
> 
> 赞同：15
> 
> 时间：2012-05-30T13:04:09.880
> 
> 标签：javascript, angularjs

我正在经历创建指令的过程。在经历了一些起起落落之后，我创建了指令 ( widget ) 并最终确定了指令将采用的各种属性。

我使用了各种可用的选项，如属性、绑定、评估、表达式等。

我的想法是，如果你想创建一个通用组件，你永远无法知道人们将如何将值传递给组件。

这是一个插图...

您正在创建一个新的元素组件..说

```
<hello name="__ARGUMENT__"></hello> 
```

hello 的 name 属性是其中唯一的变量。如果您将其公开......这些是人们可能使用此组件的可能场景。

情况1 ：

```
<hello name="angular"></hello> 
```

案例2：

```
<hello name="{{name}}"></hello> 
```

案例3：

```
<div ng-repeat="name in names">
    <hello name="name"></hello> 
</div> 
```

现在..针对不同的场景..我已经了解提供的各种选项。我想不出你会想要“属性”的单一场景，因为它是从组件到模板的简单直接替换值..

在您的指令定义中，如果您将名称定义为“评估”而不是“属性”

如果属性：

```
<hello name="angular"></hello> 
```

如果评估：

```
<hello name="'angular'"></hello> 
```

注意额外的单引号..

据我所知，评估涵盖了属性的作用。而且，使用评估似乎是比仅仅属性更好的选择，因为它涵盖了更多场景！

如果有人可以解释为什么属性首先存在？更多选择=更多混乱.. :)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-30T16:49:32.927

我们很清楚这种混乱，并将在未来清理它。

# linq - LINQ to Entity VB - 将 Long 转换为包含或喜欢的字符串

> ID：10816880
> 
> 赞同：1
> 
> 时间：2012-05-30T13:04:12.977
> 
> 标签：linq, entity

我阅读了很多条目，但我没有找到解决我的（特殊？）问题的方法。开始了。

我有一个搜索字符串，它是一个数字和一个类型为（bigint，Null）的表列。

我试过了：

1.

```
Dim suche = "2012"
Dim nummern = (From t In entity.Table Where SqlFunctions.StringConvert(CDbl(t.TicketNr)).Trim.Contains(suche)
                          Select t.TicketNr Order By TicketNr Descending).ToList 
```

这里的问题是，即使没有“修剪”，双重转换也没有找到长数字 20120000000000 例如，因此结果不完整。因此，LINQ to Entity 似乎没有解决方案，我用 LIKE 尝试了 E-SQL。

2.

```
Dim suche = "%2012%"
Dim nummern = entity.Table.Where("it.longnumber LIKE @suche", New ObjectParameter("suche", suche)) 
```

导致类似的转换错误。如果表“longnumber”是一个字符串，那么上面给出的解决方案可以正常工作！

:)。

**解决方案有时是如此简单！：**

```
(From t In entity.Table Where SqlFunctions.StringConvert(CDbl(t.TicketNr), 15, 0).Contains(suche)
                           Select t.TicketNr Order By TicketNr Descending).ToList 
```

您必须使用 StringConvert 重载 ;)。

但是，如果有人会沿着这个线程出现并且知道如何去做，那么像 (2) 中的 e-SQL 解决方案会很好！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T06:16:32.117

**解决方案有时就是这么简单！！！：**

```
(From t In entity.Table Where SqlFunctions.StringConvert(CDbl(t.TicketNr), 15, 0).Contains(suche)
                           Select t.TicketNr Order By TicketNr Descending).ToList 
```

您必须使用 StringConvert 重载 ;)。

e-sql 中的解决方案，如（2）中的解决方案会很好，如果有人会沿着这个线程出现并知道如何去做！

# visual-studio-2010 - 将多个项目中的多个功能部署为单个 wsp 包 - Visual Studio 2010 支持

> ID：10816882
> 
> 赞同：0
> 
> 时间：2012-05-30T13:04:21.330
> 
> 标签：visual-studio-2010, sharepoint, wsp

我有 SharePoint 工作流项目 X 和 SharePoint 事件接​​收器项目 Y。我在工作流项目中有 featureX，在 evet 接收器项目 Y 中有 featureY。我想在单个 wsp 包中部署这两个项目。我可以将 featureY 添加到工作流项目 X 吗？或者我应该创建具有功能的第三个项目并以某种方式导入功能 - 事件处理程序和工作流？如果是 - 如何使用 VS 2010 做到这一点？提前感谢您的回答。

我在以下链接中找到了答案。

[https://sharepoint.stackexchange.com/questions/12103/multiple-sharepoint-projects-in-one-solution-how-to-package-correctly](https://sharepoint.stackexchange.com/questions/12103/multiple-sharepoint-projects-in-one-solution-how-to-package-correctly)

**解决方案是创建新的（空）SharePoint 项目并在包查看器中打开文件 Package.package。然后，您可以将解决方案中的所有功能从/移到包中。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T06:50:30.353

我在下面的链接中找到了答案。

[https://sharepoint.stackexchange.com/questions/12103/multiple-sharepoint-projects-in-one-solution-how-to-package-correctly](https://sharepoint.stackexchange.com/questions/12103/multiple-sharepoint-projects-in-one-solution-how-to-package-correctly)

解决方案是创建新的（空）SharePoint 项目并在包查看器中打开文件 Package.package。然后，您可以将解决方案中的所有功能从/移到包中。

# javascript - 无法在 jQuery 日历上禁用特定日期

> ID：10816885
> 
> 赞同：0
> 
> 时间：2012-05-30T13:04:28.867
> 
> 标签：javascript, jquery, asp.net, jquery-ui

我正在开发一个 asp.net 应用程序，我需要禁用从数据库中获取的某些日期。

jsFiddle Works 上的以下脚本虽然它只突出显示特定日期但不会禁用日期，因为它仍然是可点击的。

**HTML：**

```
<input id="txtBookDate" type="text" /> 
```

**JavaScript：**

```
var holiDays = [[2012, 06, 06, 'New Years Day'], [2012, 06, 14, 'Pongal'], [2011, 12, 25, 'Christmas Day']];
$(function () {
    $('#txtBookDate').datepicker({
        dateFormat: "yy-mm-dd",
        minDate: "+2d",
        maxDate: "+30d",
        beforeShowDay: setHoliDays
    });

    // set holidays function which is configured in beforeShowDay
    function setHoliDays(date) {
        for (i = 0; i < holiDays.length; i++) {
            if (date.getFullYear() == holiDays[i][0]
      && date.getMonth() == holiDays[i][1] - 1
      && date.getDate() == holiDays[i][2]) {
                return [true, 'holiday', holiDays[i][3]];
            }
        }
        return [true, ''];
    }
}); 
```

[http://jsfiddle.net/Skjrn/14/](http://jsfiddle.net/Skjrn/14/)

如果有人可以解决这个问题，我将不胜感激，因为数组中提到的 make 不可点击。

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T13:14:27.810

这是因为您在检查假期时作为第一个参数传递真实。

见[http://jsfiddle.net/gRoberts/Skjrn/16/](http://jsfiddle.net/gRoberts/Skjrn/16/)

```
 function setHoliDays(date) {
        for (i = 0; i < holiDays.length; i++) {
            if (date.getFullYear() == holiDays[i][0]
      && date.getMonth() == holiDays[i][1] - 1
      && date.getDate() == holiDays[i][2]) {
                return [false, 'holiday', holiDays[i][3]]; // changed from [true, 'holiday', holiDays[i][3]];
            }
        }
        return [true, ''];
    } 
```

# iphone - 方向仅在相机叠加视图中处于横向模式

> ID：10816888
> 
> 赞同：1
> 
> 时间：2012-05-30T13:04:51.427
> 
> 标签：iphone, ipad, camera

我只想在横向模式下打开 Cameraoverlay 视图......但是这段代码给了我 BAD_Excess..

```
{      
self.imagePickerController = [[[UIImagePickerController alloc] init ] autorelease];
imagePickerController.view.frame=CGRectMake(0, 0, 1024, 768);
self.imagePickerController.delegate = self;
[[UIDevice currentDevice] setOrientation:UIInterfaceOrientationLandscapeRight];

//Set Notifications so that when user rotates phone, the orientation is reset to landscape.
[[UIDevice currentDevice] beginGeneratingDeviceOrientationNotifications];

//Refer to the method didRotate:   
[[NSNotificationCenter defaultCenter] addObserver:self
                                         selector:@selector(didRotate:)
                                             name:@"UIDeviceOrientationDidChangeNotification" object:nil];

//Set the picker source as the camera   
self.imagePickerController.sourceType = UIImagePickerControllerSourceTypeCamera;

//Bring in the picker view   
[self presentModalViewController:self.imagePickerController animated:YES];
} 
```

请解决这个问题...谢谢提前

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T13:07:31.750

转到产品>编辑方案>启用僵尸

这将为您提供有关您的异常的更多描述。

# regex - 来自控制台的 Postgresql 查询

> ID：10816898
> 
> 赞同：2
> 
> 时间：2012-05-30T13:05:28.587
> 
> 标签：regex, postgresql, console

我有这样的事情：

```
UPDATE table SET column=REGEXP_REPLACE(column, E'\[(.*)\]$', ''); 
```

此查询一切正常，但是当我想从控制台执行此操作时存在问题，如下所示：

```
psql -U postgres db -c "UPDATE table SET column=REGEXP_REPLACE(column, E'\\[(.*)\\]$', '');" 
```

我认为转义某些字符存在问题，但我无法处理。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T20:58:24.200

假设一个类 Unix 的 shell，作为通过`-c`复杂的多级引用传递查询的替代方法，它可以使用[heredoc](http://en.wikipedia.org/wiki/Here_document)语法在标准输入中以其原始形式传递：

```
$ psql db << EOF
UPDATE table SET column=REGEXP_REPLACE(column, E'\[(.*)\]$', '');
EOF 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T13:18:33.800

我发现正确的方法是：

```
UPDATE table SET column=REGEXP_REPLACE(column, E'\\\[(.*)\\\]$', ''); 
```

我尝试转义 $ 符号，但这根本没有帮助。我知道一个“\”是 bash 用来逃避另一个需要 db 来逃避下一个的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T13:14:02.507

我认为问题出在`$`. 尝试：

```
postgres db -c "UPDATE table SET column=REGEXP_REPLACE(column, E'\\[(.*)\\]\$', '');" 
```

评估在双引号内传递的参数。这意味着它可以识别 bash 特殊字符，例如`$`，但不是简单引号内的参数。

# android - Android ListView 类似 iOS UITableView

> ID：10816902
> 
> 赞同：1
> 
> 时间：2012-05-30T13:05:34.507
> 
> 标签：android, listview, android-layout, android-listview

我想在 Android 中创建一个类似于 iOS 组件 UITableView 的 ListView。我设法创建了分段的 ListView，但是如何在右侧创建一个字母列表？

![UITable 视图](../Images/04ee76c2e36bee398536b7c26f47d136.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T13:06:39.187

您可以使用相对布局中的另一个列表来创建它............

请在以下位置找到代码

[http://hello-android.blogspot.in/2010/11/sideindex-for-android.html](http://hello-android.blogspot.in/2010/11/sideindex-for-android.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T13:56:21.330

您可以使用快速滚动。它不一样，但相似。调用[`setFastScrollEnabled(true)`](http://developer.android.com/reference/android/widget/AbsListView.html#setFastScrollEnabled%28boolean%29)您的列表视图并让您的列表适配器实现[`SectionIndexer`](http://developer.android.com/reference/android/widget/SectionIndexer.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T13:48:26.197

参考这个图书馆....完美的一个

[https://github.com/woozzu/IndexableListView](https://github.com/woozzu/IndexableListView)

# c# - IIS7 根据请求停止提供文件，但允许 ajax 回调

> ID：10816903
> 
> 赞同：0
> 
> 时间：2012-05-30T13:05:34.560
> 
> 标签：c#, jquery, asp.net, iis-7, privacy

基本上我有点迷茫，我需要让 jQuery 回调能够通过 ajax 帖子访问 Web 函数。

```
$.ajax({
         type: "POST",
         url: "/Methods/Credit.asmx/PaymentHoldingDocument1",
         data: "{iCredits: " + $('#creditAmount').val() + ", iClientId: " + window.iUserId + "}",
         contentType: "application/json; charset=utf-8",
         dataType: "json"
        }); 
```

然后，这会更新目录 \Payment\Holding\1.txt 中的文档，但我不希望人们在创建文档后能够查看文档，因此我想在创建文档后将其隐藏。在 web.config 中使用以下内容，我已经能够阻止人们查看该文件，但它也阻止了 Web 方法对其进行写入。

```
<security>
   <requestFiltering>
      <hiddenSegments>
         <add segment="\Payment\" />
      </hiddenSegments>
   </requestFiltering>
 </security> 
```

有什么我想念的吗？还是我不能做的事情？

也删除`IUSR`或`IIS_USR`不是一个选项，因为这也会阻止我写入文件。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T15:21:25.147

您是否尝试过通过在 IIS 中创建请求过滤器来拒绝 *.txt 文件？这样可以防止下载 web.config 文件之类的内容。

# java - 如何在 Java 中检索行 POST 数据？

> ID：10816904
> 
> 赞同：0
> 
> 时间：2012-05-30T13:05:36.713
> 
> 标签：java, spring, file-upload

我们一直在使用 ExtJS 小部件“多个文件上传”来一次上传多个文件。UI 方面一切正常，但是当我们在 Spring 的操作中遇到错误时。我想知道如何在 Java 中检索行 POST 数据？

**用户界面：** ExtJS

**控制器：**

```
 @RequestMapping(value = "views/upload.action", method = RequestMethod.POST)
public @ResponseBody String create(FileUploadBean uploadItem, BindingResult result) throws IOException{
    ExtJSFormResult extjsFormResult = new ExtJSFormResult();
    File file = new File(uploadItem.getFile().getOriginalFilename()); 
    uploadItem.getFile().transferTo(file);
    LOGGER.info("file is : "+ file);
    copyFile(file, uploadItem);
    try{
        dis.close();
        fis.close();
    }
    catch(IOException ioe){
        ioe.printStackTrace();
        LOGGER.error("IOException"+ ioe.getMessage());
    }catch(MultipartException ml){ml.printStackTrace();}

  if (result.hasErrors()){
        for(ObjectError error : result.getAllErrors()){
            LOGGER.info("Error: " + error.getCode() +  " - " + error.getDefaultMessage());
        }
        //set extjs return - error
        extjsFormResult.setSuccess(false);
        return extjsFormResult.toString();
    }
    //set extjs return - sucsess
    extjsFormResult.setSuccess(true);
    return extjsFormResult.toString();
} 
```

**堆栈跟踪：**

```
May 30, 2012 6:47:51 PM org.apache.catalina.core.StandardWrapperValve invoke
SEVERE: Servlet.service() for servlet [appServlet] in context with path [/Login] threw exception [Request processing failed; nested exception is java.lang.NullPointerException] with root cause java.lang.NullPointerException at com.mpm.common.controller.FileUploadController.create(FileUploadController.java:55)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:601)
at org.springframework.web.bind.annotation.support.HandlerMethodInvoker.invokeHandlerMethod(HandlerMethodInvoker.java:176)
at org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.invokeHandlerMethod(AnnotationMethodHandlerAdapter.java:436)
at org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.handle(AnnotationMethodHandlerAdapter.java:424)
at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:790)
at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:719)
at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:669)
at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:585)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:304)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:224)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:164)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:100)
at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:929)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:405)
at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:279)
at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:515)
at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:302)
at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
at java.lang.Thread.run(Thread.java:722) 
```

谢谢卡皮尔

# events - 在 Safari 中获取扩展程序卸载事件

> ID：10816909
> 
> 赞同：9
> 
> 时间：2012-05-30T13:05:55.790
> 
> 标签：events, uninstallation, safari-extension, browser-extension

Safari 浏览器扩展有没有办法检测自己的卸载？

我想向 Google Analytics 发送一个事件来跟踪我的扩展程序的卸载率。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-07-26T06:15:32.077

在开发论坛上四处搜寻后，我发现 Safari 显然没有此类事件（与 Chrome 不同），或者如果有的话，它们是无证的（因此不打算使用）。我认为你最好的选择是：

a) 通过[Apple 的错误报告和功能请求站点请求该功能](https://bugreport.apple.com)

b) 设置一个外部服务，可以监控 ~/Library/Safari/Extensions 或 Extensions.plist 文件以进行删除（考虑到安全风险，这可能非常困难）

c) 通过每天或其他时间间隔 ping 一次外部服务来跟踪活动用户群。然后可以通过活动的下降来估计删除/不活动率。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-26T09:42:34.060

您可以在全局文件脚本中注册 window.onunload 事件以检测何时卸载扩展。最好将 addEventListener() 与“卸载”一起使用，因为 safari 可能会使用该事件来清除扩展存储。还要确保在扩展更新或重新加载的情况下检测事件是否触发，因为在这些情况下，全局页面也会被卸载。

```
window.addEventListener("unload", function() {
  //handle uninstall event
}); 
```

# c# - 在属性窗口中更改时自定义属性不会保存

> ID：10816916
> 
> 赞同：3
> 
> 时间：2012-05-30T13:06:11.527
> 
> 标签：c#, datagridviewcolumn

我已经为 DataGridView 创建了一个自定义列，原因是我想在列中添加一个属性（类型）。我右键单击 DataGridView 并选择“编辑列...”。然后，当我选择作为我的自定义列类型的列时，我可以编辑属性，但是如果我在编辑后喜欢“确定”，然后再次转到“编辑列...”，我分配给我的属性的值离开了。

这是我的代码：

```
public class CustomColumn : DataGridViewColumn
{
    [DisplayName("Type")]
    [Category("Custom Property")]
    public String type { get; set; }

    public CustomColumn()
        : base(new DataGridViewTextBoxCell())
    {
    }
} 
```

以及属性窗口的图像：

[![属性窗口的图像](../Images/690cb792836c4735b557488e678ebb82.png)](https://i.stack.imgur.com/5ZnmZ.png)

有人可以告诉我我做错了什么，或者我需要添加什么以便当我更改属性窗口中的值时，该值被分配给属性？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-30T13:43:58.780

我认为您需要覆盖该`Clone()`方法才能使其正常工作：

```
public class CustomColumn : DataGridViewColumn {

  public CustomColumn()
    : base(new DataGridViewTextBoxCell()) {
  }

  [DisplayName("Type")]
  [Category("Custom Property")]
  public String type { get; set; }

  public override object Clone() {
    CustomColumn copy = base.Clone() as CustomColumn;
    copy.type = type;
    return copy;
  }
} 
```

请参阅[覆盖的 DataViewColumn 上的自定义属性不保存](http://connect.microsoft.com/VisualStudio/feedback/details/91324/custom-properties-on-overridden-dataviewcolumn-do-not-save)

# internet-explorer - 为 Internet Explorer 开发扩展 - 初学者面前的一大障碍

> ID：10816917
> 
> 赞同：2
> 
> 时间：2012-05-30T13:06:12.860
> 
> 标签：internet-explorer, internet-explorer-9, bho, browser-extension

我是扩展开发的初学者。我最近开发了一个**chrome 扩展**，现在我想继续为**internet explorer**做同样的事情。
我尽我最大的努力获取任何文档来制作**IE 扩展**，但现在我没有。糟糕的链接和文档没有给我任何清晰的想法，例如**IE 扩展如何工作**，**它的架构是什么** 或**如何构建一个简单的 IE 扩展**。
我已经看过这个相关的问题[How to get started with development Internet Explorer extensions?](https://stackoverflow.com/questions/5643819/developing-internet-explorer-extensions) 但它的解释性较差，难以理解。
基本上我想使用**javascript 和 IE api 或其他东西**开发一个 IE 扩展，就像我在**chrome 扩展**中所做的那样。
所以请指导我或至少为我提供一些IE 扩展的**“hello word”**示例。
:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T22:24:01.447

我正在使用 CrossRider API 大约 4 个月，我认为它非常好。他们最近发布了对 IE 的后台代码支持，以及 HTTP 请求控制 API，因此现在您实际上可以实现几乎所有您想要跨浏览器的功能

您可以创建自己的基于 crossrider 的扩展并非常轻松地运行 hello world 代码。只需注册并克隆他们的 hello world 应用程序： [http ://crossrider.com/apps/14648/ide](http://crossrider.com/apps/14648/ide)

![Crossrider 克隆按钮](../Images/ca11415df35db21b13bb7fc78f0bd784.png)

关于防病毒警告，我们对 IE 扩展的 EXE 安装程序几乎没有警告（就像您可能制作的任何新 EXE，特别是如果它有 BHO DLLS 时），但他们一直密切关注这一点，他们很快就会删除警告。

# c++ - 摆脱在 Qt QGlWidget 中绘制实体对象的 glut 函数

> ID：10816918
> 
> 赞同：0
> 
> 时间：2012-05-30T13:06:13.590
> 
> 标签：c++, qt, glut, qglwidget

我需要在 QGlWidget 中以 3D 方式绘制球体、圆柱体和圆锥体。

现在我正在使用 glutSolidSphere、glutSolidCone 和 gluQuadric 的可怕技巧来绘制圆柱体。

我只想使用一个框架进行 3D 绘图——在本例中为 Qt——并摆脱所有那些 Glut 函数。

在 Qt <= 4.6 中是否有一些 Qt 类可以做到这一点？

这样做还可以让我在没有 glut 库的情况下重新分发我的可执行文件，并摆脱 glutInit 函数！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T13:16:50.730

> 在 Qt <= 4.6 中是否有一些 Qt 类可以做到这一点？

构建原语？不，但是它们很容易自己构建。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T13:19:17.870

不，我不知道。

[QGLSphere](http://qt-project.org/doc/qt-5.0/qglsphere.html)和[QGLCylinder](http://qt-project.org/doc/qt-5.0/qglcylinder.html)出现在 5.0 文档中（尽管它声称在 4.8 中引入）。

如果您绝对必须坚持使用 4.6，那么您可以尝试自己实现这些类，但如果您正在做任何 3D 的事情，那么您最好还是迁移到 5.0。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T13:42:41.547

如果您当时没有迁移到 Qt 5，请使用一些 glut 实现的源代码来查找原语的构造方式。

# android - Android 中的 Intent 问题

> ID：10816923
> 
> 赞同：1
> 
> 时间：2012-05-30T13:06:33.920
> 
> 标签：android, eclipse, button, android-intent

```
final Button OptButton = (Button) findViewById(R.id.OptButton);
        OptButton.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                Intent OptionsSc = new Intent(this, OptionsActivity.class);
                startActivity (OptionsSc);
            }
        }); 
```

Eclipse 不断强调该`new Intent(this, OptionsActivity.class);`部分，我不明白为什么。以前，对 OptionsActivity 的调用被分配给硬件搜索按钮，一切正常。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-30T13:07:55.837

在您的情况下`this`，它不是指有效的`Context`（就像您`this`在 an 中使用时一样`Activity`），而是指匿名内部类类（方法声明`OnCLickListener`在哪里）。`onClick`相反，您应该使用：

```
Intent OptionsSc = new Intent(YourActivityName.this, OptionsActivity.class); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T13:09:36.757

这是因为您在 onClickListener**类**中，并且您**this**指的是当前类的对象，这里使用 getApplicationcontext 或 YourActivityName.this

这应该可以解决您的问题:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T13:09:49.700

在您的按钮单击侦听器中编写以下代码...

```
 Intent intent = new Intent (Main.this,Second.class);
  StartActivity(intent); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-30T13:10:53.053

尝试任何一种这样的，

```
 Intent OptionsSc = new Intent(YourActivity.this, OptionsActivity.class);
                startActivity (OptionsSc); 
```

或者

```
startActivity(new Intent(YourActivity.this, OptionsActivity.class)); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-30T13:22:57.230

你可以这样使用；

```
Context c= MyActivityName.this;
Intent OptionsSc = new Intent(c, OptionsActivity.class); 
```

# c# - 使用 C# 的 Linq 库进行排序

> ID：10816927
> 
> 赞同：0
> 
> 时间：2012-05-30T13:06:49.060
> 
> 标签：c#, .net, linq

我正在使用 .NET Framework 3.5 创建一个 C# 2010 应用程序。

我有一个包含几列和几行的datagridview [显然]。我将此 datagridview 的行保存在 form 的结构中`List<string[]>`。我也有一个`List<double>`包含系数的。我想使用 `System.LINQ`库按系数对结构进行排序。我尝试了以下方法：

> ```
> var linq_Query_rowrates =
>     from rw in rows
>     orderby matchrate descending
>     select rw; 
> ```

这会在查询中的行下划线并显示以下错误：

> 错误 1 ​​找不到源类型“ `System.Collections.Generic.List<string[]>`”的查询模式的实现。' `OrderByDescending`' 未找到。您是否缺少对“”的引用`System.Core.dll`或“”的 using 指令`System.Linq`？

**是否可以使用 LINQ 库对这种结构进行排序，如果可以，如何排序？**

注意：我知道有很多其他方法可以做到这一点，我只是对使用 LINQ 库感兴趣。

注意：matchrate 不是行的成员，但使用行的成员也不起作用。

后期编辑：也许应该是这样的？

```
 var linq_Query_rowrates =
            from rw in rows
            join rate in matchrate
            on matchrate equals rows
            orderby matchrate descending
            select rw; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T13:07:57.907

假设`matchrate`是 的成员`rw`，则需要使用以下语法：

```
var linq_Query_rowrates =
    from rw in rows
    orderby rw.matchrate descending
    select rw; 
```

**更新**

理想情况下，您将有一个用于您的费率关系的导航属性，因此您的查询将如下所示：

```
var linq_Query_rowrates =
    from rw in rows
    orderby rw.rate.matchrate descending
    select rw; 
```

另一种选择是执行连接。但是 LINQ 中的连接很难看，我尽量避免使用它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T13:36:19.437

这很丑，但它是 Linq：

```
 List<string[]> rows = null;
            List<double> coefficients = null;

            rows
                .Select((row, index) => new { Row = row, Index = index })
                .Join(coefficients
                            .Select(
                                (coefficient, index) => new { Coefficient = coefficient, Index = index }), 
                                x => x.Index, 
                                x => x.Index, 
                                (rowIndex, coefIndex) => new { Row = rowIndex.Row, Coefficient = coefIndex.Coefficient })
                .OrderBy(x => x.Coefficient)
                .Select(x => x.Row); 
```

不过我还没有测试过。应该可以将其转换为查询形式。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-30T14:02:52.473

如果您的系数集合旨在与您的字符串 [] 集合链接，那么为什么要构建 2 个单独的、不相关的列表？当然，只构建一个非常简单的结构来保存所有信息以确保每行总是有适当的系数会更加健壮。它还使排序非常简单。

```
public struct CoefficientRow
{
    public double Coefficient;
    public string[] Cells;

    public CoefficientRow(double c, string[] cells)
    {
        this.Coefficient = c;
        this.Cells = cells;
    }
} 
```

排序变得轻而易举...

```
List<CoefficientRow> rows = new List<CoefficientRow>();
//populate the list...
var orderedRows = rows.OrderBy(cr => cr.Coefficient);
//or
var orderedRows = rows.OrderByDescending(cr => cr.Coefficient); 
```

将它们插入到 datagridview 中也很容易：

```
foreach(var row in rows)
    this.dgvDataView.Rows.Add(row.Cells); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-31T20:51:21.810

如果您可以使用 .Net4，则 user676571 的回答简化为：

```
IEnumerable<string> query = rows
  .Zip(coefficients, (r, c) => new {row = r, coef = c})
  .OrderByDescending(x => x.coef)
  .Select(x => x.row); 
```

# javascript - OpenLayers + Liferay Portlet

> ID：10816929
> 
> 赞同：1
> 
> 时间：2012-05-30T13:06:57.360
> 
> 标签：javascript, liferay, openlayers, portlet

我是 Liferay 和 Portlet 开发的新手，我试图在 Portlet 中显示 OpenLayers 地图，但没有成功。

这是我的 view.jsp

```
<%@ taglib uri="http://java.sun.com/portlet_2_0" prefix="portlet" %>
<%@ taglib uri="http://liferay.com/tld/liferay-ui" prefix='liferay-ui' %>
<%@ page import="javax.portlet.PortletPreferences" %>
<script src="http://dev.openlayers.org/releases/OpenLayers-2.11/lib/OpenLayers.js" type="text/javascript"></script>

<p>My Map</p>

<div style="width:100%; height:100%" id="map"></div>
<script defer="defer" type="text/javascript">
    var map = new OpenLayers.Map('map');
    var wms = new OpenLayers.Layer.WMS( "OpenLayers WMS",
        "http://vmap0.tiles.osgeo.org/wms/vmap0", {layers: 'basic'} );
    map.addLayer(wms);
    map.zoomToMaxExtent();
</script> 
```

地图已分配给 div，但不显示。有谁知道为什么？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T21:18:52.347

疯狂猜测：您确定页面上只有一个 id="map" 吗？我宁愿去

```
<div ... id="<portlet:namespace/>map">
 ... var map = new OpenLayers.Map('<portlet:namespace/>map'); 
```

# php - 如何在 symfony2 中包含文件（类）

> ID：10816930
> 
> 赞同：1
> 
> 时间：2012-05-30T13:06:59.757
> 
> 标签：php, symfony

我想使用 php 导入和查看 excel 文件，所以我找到了一个库类 [php-excel-reader](http://code.google.com/p/php-excel-reader/ "php excel阅读器")

当我们使用 php 时，我们只是在页面中包含文件`include("nameoffile.php");`

我不知道如何使用 symfony 做到这一点。我应该在哪里进口？怎么做？`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T13:57:50.807

这是针对 PHPExcel 而不是读者的，但原理是相同的。无需实际包含文件。它们可以自动加载。

添加到您的 autoload.php：

```
$loader->registerPrefixes(array(
    'Twig_Extensions_' => $ws.'Symfony/vendor/twig-extensions/lib',
    'Twig_'            => $ws.'Symfony/vendor/twig/lib',
    'Zend_'            => $ws.'ZendFramework-1.11.11/library',
    'PHPExcel'         => $ws.'PHPExcel/Classes' // Change to support the reader
)); 
```

之后，您可以执行以下操作：

```
$reader = new \Spreadsheet_Reader(); 
```

请注意，处理非命名空间库需要前导斜杠。

我通过使用服务稍微抽象了一些东西：

```
/* ==================================================
 * Wrap interface to the excel spreasheet processing
 */
namespace Zayso\CoreBundle\Component\Format;

class Excel
{
    public function newSpreadSheet()
    {
        return new \PHPExcel();
    }
    public function newWriter($ss)
    {
        return \PHPExcel_IOFactory::createWriter($ss, 'Excel5');
    }
    public function load($file)
    {
        return \PHPExcel_IOFactory::load($file);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T13:18:11.450

您可以创建需要文件的服务。您在官方文档中有[一个示例。](http://symfony.com/doc/current/book/service_container.html#requiring-files)

# c# - 如何对 lock 语句进行单元测试？

> ID：10816932
> 
> 赞同：11
> 
> 时间：2012-05-30T13:07:20.580
> 
> 标签：c#, unit-testing, locking

我将如何编写单元测试以确保获得锁？

例如：

```
public void AddItem(object item)
{
    lock (_list)
    {
        _list.Add(item)
    }
} 
```

有没有办法确保`lock`语句运行？

**编辑**：我不是想证明线程安全（我会假设），只是调用了 lock() 语句。

例如，我可以通过在工厂函数`new object()`中替换一条语句来测试它。`CreateObject()`

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-30T13:16:39.933

对多个线程进行单元测试总是很棘手，应该小心处理。

在您的情况下，我不会打扰测试`lock`关键字，原因与您不为`new`.

`Assert.IsNotNull(new object());`

此外，您似乎将其封装为线程不安全的集合以使其成为线程安全的。与其重新发明轮子，不如考虑使用**[线程安全的集合](http://msdn.microsoft.com/en-us/library/dd997305.aspx)**。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-01T04:57:24.157

请参阅 Jon Skeet 对类似问题的回答：[How to test if a thread is hold a lock on an object in C#?](https://stackoverflow.com/a/2407965/445901) ：

> 我不相信有。您可以做一些非常糟糕的事情，例如调用 Monitor.Wait(monitor, 0) 并捕获 SynchronizationLockException，但这非常可怕（理论上可以“捕获”另一个线程正在等待的脉冲）。编辑：在 .NET 4.5 中，这可用于 Monitor.IsEntered。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-01T04:21:13.697

与测试任何其他事物的方式相同：编写一个没有它就失败的测试。换句话说，首先确定你写锁的原因，然后写一个测试来说明这个原因。我认为原因是线程安全：如果是这样，请编写多线程测试。如果是其他原因，请正确进行该测试。

如果您真的非常想测试调用锁而不是锁导致的行为，请封装：

```
public class MyLock : IDisposable
{
    private object _toLock;

    public MyLock(object toLock)
    {
        _toLock = toLock;
        Monitor.Enter(_toLock);
    }

    public virtual void Dispose()
    {
        Monitor.Exit(_toLock);
    }
} 
```

当然，你也必须制作一个可模拟的工厂。对我来说似乎做得过火了，但在您的上下文中可能是有道理的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-30T13:37:21.683

如果您编写了 Lock 语句（它的作用类似于 System.Threading.Lock 语句），那么我可以理解您为什么要测试它。

在这种情况下，您需要一个 _list 类，您已经为该类实现了 .Add 方法，如果您使用依赖注入注入 IList 来设置 _list，这将容易得多。您需要使用实现 .Add() 方法的 IList 的虚拟实例。

如果你有一个虚拟的 .Add() 调用休眠一段时间（比如 5 秒），你可以通过启动一个线程来调用 .AddItem() 方法进行测试，这个线程将锁定 .Add() 调用通过 .AddItem() 方法，主线程可以在调用 .AddItem 方法之前等待 3 秒。

如果锁有效，第二个线程会在执行 .Add 之前延迟 2 秒，如果锁无效，它会立即调用。

这是混乱和不确定的，所以如果你运行足够多的时间（数百万次），你会得到一个错误的结果。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-30T13:24:21.803

不确定对锁进行单元测试是正确的方法，而是应该`AddItem`正确测试该功能。但是，您可以做几件事：

1）使用反射获取对 的引用`_list`，将其锁定在您的测试中，并尝试调用`AddItem`

2) 添加一种`internal`测试方法，该方法可以锁定`_list`并暂停一段合理的时间（2 秒？）。如果您[使您的内部结构对您的测试程序集可见，您](http://devlicio.us/blogs/derik_whittaker/archive/2007/04/09/internalsvisibleto-testing-internal-methods-in-net-2-0.aspx)可以在一个线程上调用测试方法并`AddItem`在另一个线程上调用。请记住，这不是万无一失的，因为从技术上讲，测试可能由于某种原因被阻塞足够长的时间，以使初始锁定到期。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-30T13:21:44.707

你需要一个小程序来模拟线程的读写......

在一个新线程中创建 10,000 个项目并添加它们，而在另一个线程中阅读然后休眠一段时间。

然后在主等待两个线程退出，你应该根据测试调用添加和没有调用删除的次数得到结果......

例如，当 i % 2 == 0 然后在生产者线程中删除而不是添加......这也应该影响消费者线程......

请参阅[如何等待线程完成 .NET？](https://stackoverflow.com/questions/1584062/how-to-wait-for-thread-to-finish-with-net/2228508#2228508)

# ruby-on-rails-3 - 如何每四个小时在后台运行一次太阳黑子重新索引

> ID：10816934
> 
> 赞同：0
> 
> 时间：2012-05-30T13:07:30.857
> 
> 标签：ruby-on-rails-3, bash, crontab, sunspot-rails, sunspot-solr

我想每四个小时执行一次 rake sunspot:reindex RAILS_ENV=production 命令。为了实现这一点，我使用 shell 编程编写了简单的 bash 脚本。我将在终端中成功运行，但如果我尝试在 crontab 中运行它，则它无法正常工作。正在使用的操作系统是centos。

这是我的 bash 脚本代码

```
#!/bin/bash
#export PATH=/bin:/sbin:/usr/bin:/usr/sbin:/usr/local/bin:/usr/local/sbin
export PATH=/usr/local/rvm/gems/ruby-1.9.2-p290/bin:/usr/local/rvm/gems/ruby-1.9.2-p290@global/bin:/usr/local/rvm/rubies/ruby-1.9.2-p290/bin:/usr/local/rvm/bin:/usr/kerberos/sbin:/usr/kerberos/bin:/usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin:/usr/X11R6/bin:/root/bin:
echo "started"
cd /var/www/html/spotchase2
pwd
source /usr/local/rvm/environments/ruby-1.9.2-p290
bundle install
if [ "$?" = 0 ]; then
    echo `date`
fi
source /usr/local/rvm/environments/ruby-1.9.2-p290
#/usr/local/rvm/gems/ruby-1.9.2-p290/bin/rake sunspot:reindex RAILS_ENV=production
rake sunspot:reindex RAILS_ENV=production
if [ "$?" = 0 ]; then
    echo "complete"
fi 
```

请帮我解决这个问题。

**编辑**

我正在重定向输出一个文本文件。在那个文本文件中，我才刚刚开始，捆绑安装和日期。我没有收到完整的消息，因此我知道它不起作用，并且在该文本文件上没有收到任何错误。

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T14:41:07.863

通常，我使用[when gem](https://github.com/javan/whenever)来处理这样的事情。我不必编写 bash 脚本，一个 rake 脚本就足够了。`Whenever`将为 crontab 生成正确的语法。

在我的项目中，我有几个脚本需要一直在后台运行。这是生成 contab 文件的命令。

```
whenever --update-crontab --set environment=production --load-file config/schedule_client.rb --user ubuntu 
```

它会生成这样的东西。

```
0 2 * * * /bin/bash -l -c 'source /home/ubuntu/.rvm/scripts/rvm && cd /var/www/yoolk_statistics_api && RAILS_ENV=production bundle exec rake statistics:generate_clienst --silent >> log/client.log 2>&1' 
```

为了确保我的 crontab 始终工作，我将输出重定向到日志文件，以便我可以看到它是否正在运行。在我的 ubuntu 服务器中，我通常检查`syslog file`调试。

# php - 做一个换行。PHP 转 Excel

> ID：10816936
> 
> 赞同：2
> 
> 时间：2012-05-30T13:07:40.800
> 
> 标签：php, css, excel

在我的 php 文件中，我有一个简单的表格：

```
 <head>
     <style><!-- styles go here--></style>
 </head>
 <body>
     <table border="1" align="center">
         <thead>
             <tr>
                 <th rowspan=3>Three words here</th>
                 <th rowspan=3>Full Name</th>
                 <!-- other headers ... -->
             </tr>
             <tr></tr>
             <tr></tr>
         </thead>
         <tr>
             <td width="50px">content</td>
             <!-- other definitions ... -->
         </tr>
     </table>
 </body> 
```

使用头功能

```
header("Content-type: application/vnd.ms-excel");
header("Content-Disposition: attachment; filename=summary.xls"); 
```

我将`*.php`文件导出为`*.xls`格式。然后我发现`Excel`没有为表头做自动换行。它通过其内容设置`<th>`元素宽度而不包装它。为什么？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T13:11:15.167

简单的回答：不！

Excel 能够读取 HTML 文件（即使这不是 xls 文件，您也可以对它撒谎）。Excel 的 HTML 导入可以读取一些样式元素，但它不是一个成熟的 html/css 解析器。

正确设置所有元素样式的唯一方法是创建真正的 xls 或 xlsx 文件

# ruby-on-rails - Mongoid 排序和 update_all

> ID：10816945
> 
> 赞同：0
> 
> 时间：2012-05-30T13:07:59.060
> 
> 标签：ruby-on-rails, ruby-on-rails-3, mongodb, mongoid

我有一个 jquery sortable 在我的模型控制器中调用 data-update-url ，一切都很好并且函数被调用。我的排序功能

```
def sort
        params[:documents].each_with_index do |id, index|
            Document.update_all({position: index+1}, {id: id})
        end
        render nothing: true
    end 
```

现在我正在使用 mongoid，我知道在 SQL 中做我想做的事情并不完全灵活。在用户以他想要的方式拖动列表中的元素后，我希望更新位置，以便用户列表的顺序通过会话保持不变。上面的函数是我开始的一个模板，所以我可以从正确的方向开始（从 railscasts）我的第一个问题是 params[:documents].each_with_index，我得到了一个

```
NoMethodError (undefined method `each_with_index' for nil:NilClass):
  app/controllers/documents_controller.rb:16:in `sort' 
```

所以我确定 params[:document] 不是我想要传递给 each_with_index 方法的东西，但我不确定要尝试什么？

更新 document.js.coffee

```
jQuery ->
  $('#documents').sortable(
    update: ->
      $.post($(this).data('update-url'), $(this).sortable('serialize'))); 
```

相应的erb

```
<ul id="documents" data-update-url="<%= sort_documents_url %>">
  <% @documents.each do |document| %>
    <%= content_tag_for :li, document do %>
      <%= render document %>
    <% end %>
  <% end %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T13:45:21.220

```
def sort
    params[:documents].each_with_index do |id, index|
      doc = Document.find_by_id(id)
      doc.update_attribute(:position, index) if doc
    end
    render nothing: true
end 
```

# c# - 在组合上设置 DataSource 时不要触发 SelectedIndexChanged 事件

> ID：10816946
> 
> 赞同：1
> 
> 时间：2012-05-30T13:08:03.600
> 
> 标签：c#, combobox, datasource, selectionchanged

在组合上设置 DataSource 时我有一个小问题。

我有一个辅助方法，我传入一个组合和一个默认项。

在此方法中，设置了组合的 DataSource 以触发 SelectionChanged 事件。Selectionchanged 事件然后再次调用此帮助器方法，以便可以根据从第一个组合中选择的 ID 设置另一个组合的 DataSource。然后再重复此过程 6 次组合，每次调用数据库以获取新数据。

在此方法中设置 DataSource 后，我使用传入的 defaultItem 设置组合的 SelectedValue。然后这会导致链再次启动，当然还有所有数据库调用。

解决这个问题的最佳方法是什么？

我试过使用 SelectionChangeCommitted 事件，但这并没有启动链。

提前致谢。

我正在使用 C#.Net 4.0

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T11:21:51.273

我使用以下代码通过加载数据 (DataSource=...) 与实际选择更改来区分组合框 SelectionChanged 事件的原因。

```
 private void comboBoxSomeList_SelectionChanged(object sender, SelectionChangedEventArgs e)
    {

        // Ignore changes that are made during initialization
        if (e.AddedItems.Count != e.RemovedItems.Count)
            return;
        ... 
```

请注意，我不能 100% 确定这是否适用于您的特定情况，但很容易检查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T13:17:09.950

这不是最漂亮的，但我通常通过在类中设置某种 manualSelectionChangeInProgress 成员字段来处理这个问题，所以我会在设置 SelectedValue 之前将其设置为 true，之后设置为 false，然后在启动之前检查字段值您试图避免的整个数据源过程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T19:36:29.893

我从 Microsoft 看到的示例通过仅在您完成加载数据后挂钩选择更改事件来处理此问题。因此，不要使用设计器来连接事件，而是自己处理它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-30T13:46:01.157

在使用传入的 defaultItem 设置组合的 SelectedValue 之前尝试取消事件处理程序，然后再将其挂钩。不漂亮但是...

编辑：

我从您下面的评论中得知，因为您对六个组合使用相同的辅助方法，您无法挂钩/取消挂钩事件，因为您无法分辨每次处理的是哪一个组合。没错，一开始我并没有注意到这一点。

我重新阅读了您的问题，并注意到我最初忽略了一些东西，“使用 SelectionChangeCommited 不会启动链”。好吧，没错，SelecttionChangeCommited 仅在用户更改组合选择时触发。

回顾一下，您需要从辅助方法中开始更改，当组合数据源更改时（但不是在设置默认值时）以及当用户更改组合的选定值之一时（链将开始从那个组合开始）。我认为您可以保留您的辅助方法并使用 OnDataSourceChanged （用于在更改数据源时从辅助方法中触发链）和 OnSelectionChangeComitted （用于在用户更改选择时触发链）的组合。您甚至不需要为每个组合编写两个句柄，因为这两个事件具有相同的签名，因此您可以将它们挂钩到相同的方法。也就是说，现在为每个组合连接到 SelectionChanged 的​​方法可能会同时连接到 SelectionChangeCommited 和 DataSourceChanged。希望这可以帮助。

# asp.net-mvc - 从其他局部视图更新局部视图 mvc

> ID：10816948
> 
> 赞同：0
> 
> 时间：2012-05-30T13:08:09.393
> 
> 标签：asp.net-mvc

我有两个部分观点，一个是 for `SEARCH`，一个是 for `SEARCHRESULTS`。

我想在部分视图表单`SEARCHRESULTS`上单击“搜索”按钮时进行更新。`SEARCH`

`SEARCHRESULTS`需要从`SEARCH`局部视图向其提供表单数据。

我不完全确定该怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T13:11:50.273

您可以使用 AJAX 表单并最初将 SEARCH 部分视图加载到 div 中。然后设置 ajax 表单以发布到您的控制器，然后让该控制器操作返回 SEARCHRESULTS 部分。控制器操作应该有一个与之关联的模型，其中包含 SAERCHRESULTS 表单值。

在您看来，类似的东西应该起作用：

```
@using (Ajax.BeginForm(new AjaxOptions { UpdateTargetId = "targetDiv" }))
{

} 
```

# c# - 带有事件的类的序列化

> ID：10816949
> 
> 赞同：21
> 
> 时间：2012-05-30T13:08:10.907
> 
> 标签：c#, class, events, serialization, serializable

我有一个这样的课程：

```
public delegate void ChangedEventHandler(object sender, EventArgs e);
[Serializable]
public class valueDouble
{
    public event ChangedEventHandler Changed;
    public double value
    {
        get { return _value; }
        set 
        {
            _value = value;
            if (Changed != null)
            {
                Changed(this, EventArgs.Empty);
            }
        }
    }
    private double _value = 0;
} 
```

我还有另一个不可序列化的类（StepPulseblaster）并添加了一个事件处理程序

```
valDouble.Changed += new ChangedEventHandler(sc_PropertyChanged); 
```

当我尝试序列化 valueDouble 类时，会出现错误：

```
The Type StepPulseblaster is not marked as serializable 
```

当我评论该行时

```
valDouble.Changed += ... 
```

不会再有错误了。

我如何序列化一个连接了一些事件的类？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2015-05-27T13:23:05.197

你应该做：

```
[field: NonSerialized]
public event ChangedEventHandler Changed; 
```

如[MSDN](https://docs.microsoft.com/en-us/dotnet/api/system.nonserializedattribute?view=netframework-4.8#remarks)中所述：

> 要将 NonSerializedAttribute 类应用于事件，请将属性 location 设置为**field**。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-05-14T14:24:15.267

NonSerialized 属性仅适用于字段，因此要使用它，您必须调整代码以使用字段。

尝试像这样创建您的活动：

```
[NonSerialized]
private ChangedEventHandler _changed;
public event ChangedEventHandler Changed
{
    add { _changed += value; }
    remove { _changed -= value; }
} 
```

然后在 value 属性中使用字段，而不是属性：

```
public double value
{
    get { return _value; }
    set 
    {
        _value = value;
        if (_changed != null)
        {
            _changed(this, EventArgs.Empty);
        }
    }
}
private double _value = 0; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T13:19:15.123

要么将 StepPulseBlaster 标记为可序列化，要么使用 XmlIgnore 属性来防止 Changed 被序列化。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-30T13:15:40.733

使用该[`[NonSerialized]`](http://msdn.microsoft.com/en-us/library/system.nonserializedattribute.aspx)属性来避免事件的序列化。

# javascript - 禁用谷歌地图的“放大”功能

> ID：10816953
> 
> 赞同：2
> 
> 时间：2012-05-30T13:08:23.420
> 
> 标签：javascript, google-maps-api-3

我根据他们的位置在谷歌地图上列出我的用户。但我不希望它放大到其他人可以看到他们住在哪条街道上的程度。有没有办法在以下 Google 地图代码中禁用“放大”功能？

谢谢！

```
function initialize() {
    var data = <%=Data%>;
    var center = new google.maps.LatLng(48.404840395764175, 2.6845264434814453);
    var map = new google.maps.Map(document.getElementById('map'), {
        zoom: 2,
        center: center,
        mapTypeId: google.maps.MapTypeId.ROADMAP
    });

    var markers = [];
    for (var i = 0; i < data.users.length; i++) {
        var location = data.users[i];
        var latLng = new google.maps.LatLng(location.latitude, location.longitude);
        var marker = new google.maps.Marker({ position: latLng });
        markers.push(marker);
    }
    var markerCluster = new MarkerClusterer(map, markers);
}
google.maps.event.addDomListener(window, 'load', initialize); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-30T13:10:51.273

您可以向传递给构造函数的[选项对象](https://developers.google.com/maps/documentation/javascript/reference#MapOptions)`minZoom`添加和`maxZoom`属性：`Map`

```
var map = new google.maps.Map(document.getElementById('map'), {
    zoom: 2,
    center: center,
    mapTypeId: google.maps.MapTypeId.ROADMAP,
    maxZoom: 10
}); 
```

从文档中`maxZoom`：

> 将在地图上显示的最大缩放级别。如果省略或设置为 null，则使用当前地图类型的最大缩放。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-15T23:49:42.170

当鼠标悬停在地图上时，这可用于禁用滚动。

```
scrollwheel: false 
```

# macos - Qt Mac App Store 应用程序因文件系统要求而被拒绝

> ID：10816958
> 
> 赞同：2
> 
> 时间：2012-05-30T13:08:48.733
> 
> 标签：macos, qt, store

我有一个提交给 Apple Mac App Store 的 Qt 应用程序。它因写入〜/Library/Preferences/com.mycompany.myapp而被拒绝

这是我收到的消息：

```
2.30

The application accesses the following location(s):

'~/Library/Preferences/com.nourayn.AlMosaly.plist'

The application may be 

* creating files
* writing files
* opening files for Read/Write access (instead of Read-Only access)

in the above location(s). 
```

如何解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-30T15:56:26.313

我假设您正在使用 QSettings 保存您的应用程序设置。您的代码可能如下所示：

```
QApplication app;
app.setOrganizationDomain("nourayn.com");
app.setApplicationName("AlMosaly");
QSettings settings; // this creates a .plist file under ~/Library/Preferences
                    // which is non-MacAppStore-friendly 
```

相反，您可以使用明确指定的文件名创建 QSettings：

```
app.setOrganizationDomain("nourayn.com");
app.setApplicationName("AlMosaly");
QSettings settings(yourAppDataFolder+"/settings.plist", QSettings::NativeFormat);
                    // this writes to the file you specified 
```

如果您在应用程序的多个位置使用 QSettings，这样做可能会稍微简化一些事情：

```
// in main.cpp
app.setProperty("SettingsFileName", yourAppDataFolder+"/settings.plist");

// in someotherfile.cpp
QString settingsFileName = qApp->property("SettingsFileName").toString();
QSettings settings(settingsFileName, QSettings::NativeFormat); 
```

此外，如果您在 ~/Library/ 中有一个 com.trolltech.plist 文件（存储 Qt 全局设置），您可能需要迁移到 Qt 4.8.1。更多信息在这里：http: [//qt-project.org/doc/qt-4.8/qsettings.html#chang-the-location-of-global-qt-settings-on-mac-os-x](http://qt-project.org/doc/qt-4.8/qsettings.html#changing-the-location-of-global-qt-settings-on-mac-os-x)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T15:19:53.460

苹果开发者文档解释了使用文件系统时允许的内容。您可以选择使用 API 调用为您处理它，否则您的位置和命名数量有限。[在这里详细阅读](http://developer.apple.com/library/mac/releasenotes/General/SubmittingToMacAppStore/_index.html#//apple_ref/doc/uid/TP40010572-CH16-SW9)

```
Your application may write to the following directories:
~/Library/Application Support/<app-identifier>
~/Library/<app-identifier>
~/Library/Caches/<app-identifier> 
```

如果您使用的是 QSettings，它将选择系统位置来存储首选项，那么您可能需要更改该方法以更直接地控制目标。

对于 QSettings，请阅读有关如何在平台/范围基础上将路径更改为首选位置的文档：http: [//qt-project.org/doc/qt-4.8/qsettings.html#setPath](http://qt-project.org/doc/qt-4.8/qsettings.html#setPath)

```
QSettings::setPath(QSettings::IniFormat, QSettings::UserScope, 
                    "/path/to/location"); 
```

# python - 在 Rails 项目中设置 Python 环境

> ID：10816962
> 
> 赞同：0
> 
> 时间：2012-05-30T13:09:04.707
> 
> 标签：python, ruby-on-rails, ruby, deployment, scrapy

我有一个 Ruby on Rails 项目，使用 Python + Scrapy 抓取网页，我想分发和部署 Rails 项目，并自动安装所有 Python 可执行文件和库。

部署环境默认提供低于 2.6 的 Python 版本，我希望用户不要依赖操作系统并安装 Python 可执行文件。

所以，基本上我想在我的 Rails 项目中实现一个 Python virtualenv。

关于如何做到这一点的任何想法？

*我使用 Capistrano 来部署我的 Rails 项目。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T14:00:26.790

您的所有 (DTAP) 环境是否都使用相同的操作系统和处理器架构？

如果没有，我不建议在您的项目中附带 Python 解释器。为什么不在您的环境中编译更新版本的 Python 并将其安装在一些非标准路径中，例如 /opt/python27/（或类似路径）。

然后，只需使用该解释器在所有环境中创建一个 virtualenv。

接下来，您将项目从您的 virtualenv（没有 bin、include 等）部署到目标环境的 virtualenv。

我从未使用过 Capistrano（我自己是 Python 开发人员），但我假设它可以将目录从一个环境（或 VCS）复制到另一个环境。

# php - 如何使用 PHP 删除上下文中不可读的字符？

> ID：10816966
> 
> 赞同：2
> 
> 时间：2012-05-30T13:09:14.060
> 
> 标签：php, special-characters, zend-search-lucene, file-conversion, read-unread

嗨，我正在向 zend_lucene_search 提供上下文，它可以搜索到特殊字符的单词，之后就无法搜索了。

例如：

```
 very well to the other job boards � one of the main things that has impressed is the variety of the applications, especially with regards to the background of the candidates" manoj � Head 
```

如果我搜索“板”，我可以得到它，但如果我在不可读的字符之后搜索一个或任何字符串，我就无法搜索它。

如何删除这些，我想得到纯文本。

我在将 .docx/pdf 文件转换为文本时得到了这些字符。

或者

让我知道如何只向 zend_search_lucene 提供文本。

请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T13:23:37.937

您可以使用以下`preg_replace`函数调用从字符串中删除所有非 ASCII（所谓的特殊）字符：

```
$replaced = preg_replace('/[^\x00-\x7F]+/', '', $str);
// produces this converted text:
//    "very well to the other job boards  one of the main things that has impressed
// is the variety of the applications, especially with regards to the background of the
// candidates" manoj  Head" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T13:16:10.430

您可能需要转换正在处理的字符串的字符集以匹配当前 HTML 文档的字符集。

例如，如果您的 HTML 文档使用 UTF-8，那么您可以通过 utf8_encode() 运行您的字符串。否则，如果您不确定要使用哪个字符集，请尝试使用 [mb_convert_encoding()](http://php.net/manual/en/function.mb-convert-encoding.php)并使用一些更常见的字符集。

# .net - Moonshine（Sundown C 库的 .NET Markdown 包装器）无法正确处理非英文字符

> ID：10816971
> 
> 赞同：0
> 
> 时间：2012-05-30T13:09:29.627
> 
> 标签：.net, markdown

如果我在非英文字符上使用 Moonshine (https://github.com/brandonc/moonshine) - 例如，如果我运行以下文本

```
The following is italic Arabic text: *مرحبا، كيف حالك اليوم؟* 
```

通过 github 项目中提供的带有参数的控制台应用程序

扩展 = Sundown.MarkdownExtensions.NoIntraEmphasis | Sundown.MarkdownExtensions.FencedCode | Sundown.MarkdownExtensions.AutoLink smartypants = false

输出是：

```
<p>The following is italic Arabic text: <em>?????? ??? ???? ??????</em></p> 
```

我怎样才能让它正确地传回去？

谢谢
穆斯塔法

**编辑**：

所以我注意到在 Moonshine.cs 包装器中，传递给 Sundown 库的缓冲区是这样定义的：

```
[StructLayout(LayoutKind.Sequential, CharSet = CharSet.Ansi)]
struct buf
{
    [MarshalAs(UnmanagedType.LPStr)]
    public string data;     /* actual character data */
    public uint size;       /* size of the string */
    public uint asize;      /* allocated size (0 = volatile buffer) */
    public uint unit;       /* reallocation unit size (0 = read-only buffer) */
    public int @ref;        /* reference count */
}; 
```

其中`Charset`被定义为`Ansi`并且`string data`被封送为`LPStr`. 不幸的是，将其更改为

```
[StructLayout(LayoutKind.Sequential, CharSet = CharSet.Unicode)]
struct buf
{
    [MarshalAs(UnmanagedType.LPWStr)]
    public string data;     /* actual character data */
    public uint size;       /* size of the string */
    public uint asize;      /* allocated size (0 = volatile buffer) */
    public uint unit;       /* reallocation unit size (0 = read-only buffer) */
    public int @ref;        /* reference count */
}; 
```

没有帮助，因为现在收到的输出是错误编码的文本：

```
瀼吾栀攀 昀漀氀氀漀眀椀渀最 椀猀 戀漀氀搀 䄀爀愀戀椀挀 琀攀砀琀⼼㹰༊ҧÄȪ 
```

再次感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T22:06:13.740

我们从来没有找到一个干净的解决方案来解决这个问题，最终转换为 MarkdownDeep ( [https://github.com/toptensoftware/markdowndeep](https://github.com/toptensoftware/markdowndeep) )，它的性能类似于 Moonshine，与 UTF8 配合良好，并且不需要我们使用 32 位模式在我们的应用程序池上或将我们的应用程序编译为目标 x86，这对我们来说效果更好。

谢谢
穆斯塔法

# javascript - 在表格元素中创建假选择效果

> ID：10816974
> 
> 赞同：1
> 
> 时间：2012-05-30T13:09:36.357
> 
> 标签：javascript, jquery, html, css

所以我想要这个：

![在此处输入图像描述](../Images/233373ce988c9fdffb416690310792a8.png)

但不是选择元素，我需要它位于一个 div 元素中，该元素包含一个表格，每行有两个表格单元格。所以整个 tr> 应该以类似的方式点亮。

如何在 css 中做这样的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T13:14:50.000

您应该更改 tr 的类，这样操作起来会容易得多。

**CSS**

```
.selected td {
   background-color: red;
   color: white;
} 
```

**JS**

```
$('#id-of-your-table tr td').click(function(){
  $('#id-of-your-table tr').removeClass('selected');
  $(this).parent().addClass('selected');
}); 
```

就是这样。请记住，我已经从每个 tr 中删除了每个类，因此只能选择一个。如果您想要多行，而不仅仅是删除每行调用 removeClass 的行，然后您可以使用 jQuery 选择器访问所有行。

```
$('#id-of-your-table tr.selected') 
```

你将拥有所有选定的行。

这里是用于选择和取消选择表格行以及多选的JS。

**JS**

```
$('#id-of-your-table tr td').click(function(){
  if($(this).parent().hasClass('selected'))
     $(this).parent().removeClass('selected');
  else
     $(this).parent().addClass('selected');
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T14:23:09.370

[这](http://jsfiddle.net/BF3NE/6/)是我制作的一个 jsFiddle。希望这就是你所需要的`:)`

# xml - 如何使用 XInclude 从另一个 XML 引用 XML id，而 Webstorm 不会将其标记为错误？

> ID：10816979
> 
> 赞同：2
> 
> 时间：2012-05-30T13:09:54.583
> 
> 标签：xml, xsd, webstorm, xinclude, idref

我有以下 XML 文件：

**主文件**

```
<?xml version="1.0" encoding="utf-8" standalone="no"?>
<template_structure xmlns:xi="http://www.w3.org/2001/XInclude"    
                    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    xsi:noNamespaceSchemaLocation="template_structure_validator.xsd">
    <xi:include href="parameter_definitions.xml" parse="xml"/>
    <parameters>
        <parameter idref="first_param" value="10"/>
    </parameters>
</template_structure> 
```

**参数定义.xml**

```
<parameter_definitions xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                       xsi:noNamespaceSchemaLocation="template_structure_validator.xsd">
    <def_parameter id="first_param" advanced="true">
        <description>
            first parameter
        </description>
    </def_parameter>
    <def_parameter id="second_param" advanced="true">
        <description>
            second parameter
        </description>
    </def_parameter>
</parameter_definitions> 
```

**模板结构验证器.xsd：**

```
<xs:element name="parameter_definitions">
    <xs:complexType>
        <xs:sequence>
            <xs:element ref="def_parameter" minOccurs="0" maxOccurs="unbounded"/>
        </xs:sequence>
    </xs:complexType>
</xs:element>
<xs:element name="def_parameter">
    <xs:complexType>
        <xs:sequence>
            <xs:element ref="description"/>
        </xs:sequence>
        <xs:attribute name="id" use="required" type="xs:ID"/>
        <xs:attribute name="advanced" use="required" type="xs:boolean"/>
    </xs:complexType>
</xs:element>
<xs:element name="parameters">
    <xs:complexType>
        <xs:sequence>
            <xs:element minOccurs="0" maxOccurs="unbounded" ref="parameter"/>
        </xs:sequence>
    </xs:complexType>
</xs:element>
<xs:element name="parameter">
    <xs:complexType>
        <xs:attribute name="idref" use="required" type="xs:IDREF"/>
                    <xs:attribute name="value" use="required" type="xs:string"/>
    </xs:complexType>
</xs:element>
<xs:element name="js_template_structure">
    <xs:complexType>
        <xs:sequence>
            <xs:element ref="parameter_definitions"/>
            <xs:element ref="parameters"/>
        </xs:sequence>
    </xs:complexType>
</xs:element> 
```

当我使用 Webstorm 加载它们时，我`"first_param" is unresolved`在主文件中出现错误。我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T21:35:51.560

IDREF 要求为属性指定的值也在文档中的其他位置指定为 ID 属性值。IDREF 值必须作为 ID 值出现在别处：

```
 <xs:attribute name="id" type="xs:ID" use="required"/>
 <!--...-->
 <xs:attribute name="idref" use="required" type="xs:IDREF"/> 
```

# c# - 无法中断 global.asax / Application_Start

> ID：10816986
> 
> 赞同：28
> 
> 时间：2012-05-30T13:10:11.047
> 
> 标签：c#, asp.net-mvc-3, visual-studio-2010, visual-studio-debugging

我在 的第一行有一个断点`Application_Start()`，但 Visual Studio 不会中断它。

Visual Studio 已将自身附加到 IIS 工作进程：

> 自动附加到机器“SRD00510”上的进程“[2092] w3wp.exe”成功。

我在家庭控制器中的断点确实有效。

**更新**

我试过了：

*   `iisreset`
*   重新启动视觉工作室
*   重新启动。
*   尝试重新安装 aspnet ( `aspnet_regiis -i`)

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2014-10-01T08:50:50.597

阅读您的问题，我假设您使用 IIS 进行调试，而不是 Visual Studio 开发服务器。

在这种情况下，调试应用程序启动很棘手，因为它只在应用程序池启动或回收时调用一次。当 Visual Studio 附加到进程时，Application_Start 已经在运行。

诀窍是让应用程序池在不终止您所附加的进程的情况下循环使用。

请执行下列操作：

1.  在 Visual Studio（必须以管理员身份运行）中，在 global.asax.cs 中设置断点并照常开始调试 (F5)。该页面在您的 Web 浏览器中打开，但未命中断点。
2.  现在的诀窍：使用文本编辑器，从 IIS 提供服务的位置打开 web.config，更改它（例如在某处输入一个空行）并保存它。与在 IIS 中回收应用程序池相比，这允许应用程序池回收（并因此在下次调用网站时通过 global.asax.cs 中的 Application_Start 运行）而不会终止您所附加的进程。
3.  在您的网络浏览器中，重新加载页面。断点现在应该被击中！

这对我有用（IIS 7.5，VS2015）。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-05-30T13:20:37.043

将此行放在 Application_Start() 中。

```
Debugger.Break(); 
```

这将显示一个对话框，允许您选择调试器。您可能需要重新启动应用程序池。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-05-30T13:13:09.993

`Application_Start()`仅在应用程序启动时运行一次。重新启动应用程序的一些事情是：

*   web.config 更改
*   回收工作进程 - 您可以在 IIS 管理器中或通过`iisreset`在命令行运行来执行此操作。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-09-09T06:19:14.253

我的解决方案是切换到使用“Visual Studio 开发服务器”来处理应用程序类（Global.asax）问题。完成后，我切换回 IIS。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-10T14:15:11.990

我假设您是通过单击 Visual Studio 中的“调试”按钮来加载应用程序的？这就是我正在做的事情（在 VS 2012 中）并看到了类似的问题。第一次按下该按钮会启动应用程序并正确命中断点。但在我停止调试应用程序本身之后，它似乎继续运行。因此，未来的调试尝试只是附加到现有进程。
“停止调试”按钮旁边有一个“重启”按钮，所以我认为点击它至少会改变一些事情。调试应用程序未显示在 IIS 管理器中，因此我无法将其停止。同样， iisreset 也没有捕捉到它。

到目前为止，我唯一想到的就是更改一行代码，从而迫使 Visual Studio 触发构建，然后它会杀死现有的 proc 并重新开始。如果我只想多次穿过那里，那有点烦人。

我不认为这是一个合适的“答案”，但它可能是一个有用的解决方法，直到有人提出真正的答案。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-09-09T06:26:46.110

我之前通过这样做解决了这个问题：

1.  在我的解决方案上运行清理（右键单击解决方案节点并单击清理）
2.  关闭解决方案
3.  文件 - >在Visual Studio上退出
4.  如果您有多个 Visual Studio 实例正在运行，则退出所有实例。确保“devenv.exe”未列在任务管理器的进程中
5.  删除用户选项文件 (.suo)，通常与解决方案 (.sln) 文件位于同一目录中
6.  回收 IIS 工作进程，或者如果使用开发服务器，则终止该进程

现在打开您的解决方案并试一试。（保持你的手指交叉:)）

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-04-08T05:27:53.680

每当您第一次运行应用程序，或者说启动应用程序时，都会有一个 ASP.Net 开发服务器 - 端口 [端口号] 启动，

`Application_Start()`在应用程序过程中运行一次。

如果您想达到断点，您必须停止 ASP.Net 开发服务器端口并再次运行您的应用程序。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-10-01T09:16:13.200

如果 [2092] w3wp.exe 是您创建的服务，请尝试以下操作：停止服务 -> 重建服务项目 -> 启动重建服务 -> 尝试调试

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-03-30T17:47:31.503

如果使用 IISEXPRESS 不是一种选择，正如@David Perlman 提到的那样，我会选择 Logger。Log4Net 或 NLog 都很好。从长远来看，最好有一个记录器，例如在生产环境中。

```
namespace DataService
{
    using NLog;
    public class Global : System.Web.HttpApplication
    {
        private Logger log; 
        protected void Application_Start(object sender, EventArgs e)
        {
            LogManager.LoadConfiguration("nlog.config");
            log = LogManager.GetCurrentClassLogger(); 
            log.Error($"Read this line in the log specified in nlog.config");
        } 
```

# php - Zip文件下载，但无效？

> ID：10816988
> 
> 赞同：1
> 
> 时间：2012-05-30T13:10:22.763
> 
> 标签：php, download

我使用此代码使用户能够下载 zip 文件：

```
if(file_exists($filename)){
         header("Content-Disposition: attachment; filename=".basename(str_replace(' ', '_', $filename)));
         header("Content-Type: application/force-download");
         header("Content-Type: application/octet-stream");
         header("Content-Type: application/download");
         header("Content-Description: File Transfer");
         header("Content-Length: " . filesize($filename));
         flush();

         $fp = fopen($filename, "r");
         while (!feof($fp))
         {
             echo fread($fp, 65536);
             flush();
         }
         fclose($fp);
     exit;
} 
```

下载文件时，它仅下载 25,632 KB 的数据。但是 zip 文件是 26,252 KB...

为什么浏览器获得全部 25MB 但随后停止？

我检查了`Content-Length`标题以确保它是正确的并且它是......

## 编辑

在firefox中，当我下载文件时，它显示'of 25mb' 所以浏览器认为25mb是完整的数量......但是，echo'd时的内容长度是26252904？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2016-03-12T09:55:03.010

在你的代码之前添加这个

```
ob_clean();
ob_end_flush(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-30T13:53:45.870

您的`header('Content-Type ...)`电话没有用，因为只有最后一个电话会发送到浏览器。

下载由 触发`Content-Disposition: attachment`。`Content-Type: application/zip`如果您要发送 zip 文件，则应发送实际文件。

最后，您的读取循环是不必要的。

综上所述，您的代码应如下所示：

```
if (file_exists($filename)) {
    $quoted_filename = basename(addcslashes($filename, "\0..\37\"\177"));
    header("Content-Disposition: attachment; filename=\"{$quoted_filename}\"");
    header('Content-Type: application/zip');
    header('Content-Length: '.filesize($filename));
    readfile($filename);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T13:24:25.277

使用单个 MIME 类型来表示数据。

在这种情况下，使用`application/octet-stream`就可以了。这是您事先不知道 MIME 的时候。当你知道它，你必须把它。不要使用多个内容类型标头。

通常，当浏览器不知道如何处理特定的 MIME 时，它会触发下载过程。此外，使用`Content-disposition: Attachment; ..`确保它。

有一个简单`readfile($filename)`的方法会将文件的字节发送到请求进程，如下所示：

```
header("Content-disposition: attachment;filename=" . basename($filename);
readfile($filename); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-30T14:07:45.007

我有类似的问题。该文件在 Firefox 中下载良好，但在 IE 中没有。似乎 Apache 正在压缩文件，而 IE 无法解压缩，因此文件已损坏。解决方案是在 Apache 中禁用 gzip。您还可以检查 PHP 是否没有即时压缩并禁用它。对于 Apache，您可以尝试：

```
SetEnv no-gzip 1 
```

对于 PHP，在 .htaccess 中：

```
php_flag zlib.output_compression on 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-30T14:39:08.163

这个答案绝不是真正的答案。

但是我确实让它工作了......我只是将 Content-Length 设置为 30000000。因此它认为该文件比实际大小要大，然后它会全部下载。

我知道丑陋的黑客，但我找不到其他方法

# xcode - 在 xcode 中链接不同的 dylib

> ID：10816990
> 
> 赞同：1
> 
> 时间：2012-05-30T13:10:30.050
> 
> 标签：xcode, xcode4, xcode4.3

我有两个版本的 dylibs（调试和发布），我在 xcode4 中链接到我的应用程序。由于“使用二进制文件链接库”可以选择一次仅链接一个库，因此我需要在“其他链接器选项”中链接我的库。问题是我总是用下一个选项得到“找不到库”：“-Lbuild/Debug -lmylib_d.dylib”。我 100% 确定路径是正确的，我 100% 确定该文件存在。相同的选项在同一文件夹中的 gcc 上工作正常。我的问题是什么？

# regex - 以 1 开头的八位长数字的正则表达式验证器

> ID：10816991
> 
> 赞同：0
> 
> 时间：2012-05-30T13:10:35.143
> 
> 标签：regex, asp.net-mvc-3, data-annotations

我知道我可以使用`[Required]`,`[StringLength]`注释来验证空字符串和长度要求，但也想使用相同的正则表达式来验证它们。我没有尝试过，因为我对正则表达式不是很好。

正则表达式应该验证

1.空字符串（不应该）

2.字符长度 (8)

3.整数

4.起始编号（应为1）

这是代码：

```
 [DisplayName("Account Number:")]
 [RegularExpression("", 
             ErrorMessage = "An eight digit long number starting with 1 required")]
 public string accountNo { get; set; } 
```

提前致谢 ！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-30T13:13:14.347

使用这个正则表达式 `^1\d{7}$`

或者

```
^1[0-9]{7}$ 
```

或者，在紧要关头，

```
 ^1[0-9][0-9][0-9][0-9][0-9][0-9][0-9]$ 
```

示例代码：

```
using System.Text.RegularExpressions;
 Regex RegexObj = new Regex(@"^1\d{7}$");
 bool  result=   RegexObj.IsMatch("" ); 
```

--result 具有错误值

如果您不想允许空字符串，则将以下属性放在该字段上。

```
[Required(AllowEmptyStrings = false)] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-30T15:51:46.633

根据[MSDN 上的文档](http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.regularexpressionattribute%28v=vs.95%29.aspx)，一个空字符串总是通过正则表达式验证器，如果你想确保他们输入了一些东西，你应该使用一个必需的属性。或者，您可以从正则表达式派生自己的自定义数据注释属性，并自己处理空条件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T13:19:17.953

要确保空字符串有效，请添加一个设置为的`[Required]`属性。这可以防止被分配，但允许空字符串。`AllowEmptyStrings``true``null`

至于正则表达式，Romil 的表达式应该可以正常工作。

```
[DisplayName("Account Number:")]
[Required(AllowEmptyStrings = true)]
[RegularExpression(@"^1\d{7}$", 
         ErrorMessage = "An eight digit long number starting with 1 required")]
public string accountNo { get; set; } 
```

**编辑**如果您还想*防止*验证空字符串，只需省略`AllowEmptyStrings`设置（因为它默认为`false`）。

```
[DisplayName("Account Number:")]
[Required]
[RegularExpression(@"^1\d{7}$", 
         ErrorMessage = "An eight digit long number starting with 1 required")]
public string accountNo { get; set; } 
```

# python - Python Pandas: Data Downsampling

> ID：10816994
> 
> 赞同：1
> 
> 时间：2012-05-30T13:10:38.183
> 
> 标签：python, pandas, downsampling

My data looks like this:

```
TEST
2012-05-01 00:00:00.203 OFF 0
2012-05-01 00:00:11.203 OFF 0
2012-05-01 00:00:22.203 ON 1
2012-05-01 00:00:33.203 ON 1
2012-05-01 00:00:44.203 OFF 0
TEST
2012-05-02 00:00:00.203 OFF 0
2012-05-02 00:00:11.203 OFF 0
2012-05-02 00:00:22.203 OFF 0
2012-05-02 00:00:33.203 ON 1
2012-05-02 00:00:44.203 ON 1
2012-05-02 00:00:55.203 OFF 0 
```

Ultimately, I want to be able to *downsample* data like this to individual days, using, mean, min, max -values, for example. I cannot get it to work for my data and get this error:

```
TypeError: unhashable type: 'list' 
```

Perhaps it has something to do with the date format in the data frame since an index line looks like this:

```
[datetime.datetime(2012, 5, 1, 0, 0, 0, 203000)]   OFF  0 
```

Can anyone help. My code so far is this:

```
import time
import dateutil.parser
from pandas import *
from pandas.core.datetools import *

t0 = time.clock()

filename = "testdata.dat"

index = []
data = []

with open(filename) as f:
    for line in f:
        if not line.startswith('TEST'):
            line_content =  line.split(' ')

            mydatetime =  dateutil.parser.parse(line_content[0] +  " " + line_content[1])

            del line_content[0] # delete the date
            del line_content[0] # delete the time so that only values remain

            index_row = [mydatetime]
            data_row = []
            for item in line_content:
                data_row.append(item)

            index.append(index_row)
            data.append(data_row)

df = DataFrame(data, index = index)
print df.head()
print df.tail()

print
date_from =  index[0] # first datetime entry in data frame
print date_from
date_to =  index[len(index)-1] #last datetime entry in date frame
print date_to

print date_to[0] - date_from[0]
dayly= DateRange(date_from[0], date_to[0], offset=datetools.DateOffset())
print dayly

grouped = df.groupby(dayly.asof)
#print grouped.mean()
#df2 = df.groupby(daily.asof).agg({'2':np_mean})

time2 = time.clock() - t0
print time2 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T14:03:23.310

I do not have any experience with `pandas` but from what I can make out from your code,

```
df = DataFrame(data, index = index) 
```

and the error, it seems that the `index` is not supposed to be a mutable object like python lists. Maybe this will work:

```
df = DataFrame(data, index = tuple(index)) 
```

Also it doesn't seem obvious that your `index_row` & `data_row` are lists themselves & you are appending them in `index` & `data` lists.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T14:41:42.003

You'd better leave all the date-time interpolation to `pandas` and just feed it with a clean input stream. Then you can separate fields using `read_fwf` (for fixed-width formatted lines). For example:

```
import pandas
import StringIO

buf = StringIO.StringIO()
buf.write(''.join(line
    for line in open('f.txt')
    if not line.startswith('TEST')))
buf.seek(0)

df = pandas.read_fwf(buf, [(0, 24), (24, 27), (27, 30)],
        index_col=0, names=['switch', 'value'])
print df 
```

Output:

```
 switch  value
2012-05-01 00:00:00.203    OFF      0
2012-05-01 00:00:11.203    OFF      0
2012-05-01 00:00:22.203     ON      1
2012-05-01 00:00:33.203     ON      1
2012-05-01 00:00:44.203    OFF      0
2012-05-02 00:00:00.203    OFF      0
2012-05-02 00:00:11.203    OFF      0
2012-05-02 00:00:22.203    OFF      0
2012-05-02 00:00:33.203     ON      1
2012-05-02 00:00:44.203     ON      1
2012-05-02 00:00:55.203    OFF      0 
```