# StackOverflow 问答 10389000-10389999

# java - 禁用在 JTextPane 中选择范围

> ID：10389000
> 
> 赞同：0
> 
> 时间：2012-04-30T18:56:50.997
> 
> 标签：java, swing, selection, jtextpane

我有一个 JTextPane，我希望用户能够正常编辑，但我不希望用户选择一系列字符；我只想要一个光标。我该怎么做？使用 JTextPane 的 setSelectionStart 和 setSelectionEnd 大部分时间都有效，但并非总是如此。

```
boolean selectionAlreadyHandled = false;
JTextPane jtextpane;

public void caretUpdate (CaretEvent evt)
  {
  if (selectionAlreadyHandled)
    {
    selectionAlreadyHandled = false;
    return;
    }

  int pos = evt.getDot();
  if (pos != evt.getMark())
    {
    selectionAlreadyHandled = true;
    if (pos < evt.getMark())
      jtextpane.setSelectionEnd(pos);
    if (pos > evt.getMark())
      jtextpanel.setSelectionBegin(pos);
    }

  //Event handling
  return;
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T19:05:16.127

这应该可以做到。如果没有，我不知道会不会有什么

```
 public class MyTextPane extends JTextPane {
  public void setSelectionStart(int spot) {
    super.setSelectionStart(spot);
    super.setSelectionEnd(spot);
  }

  public void setSelectionEnd(int spot) {
    super.setSelectionStart(spot);
    super.setSelectionEnd(spot);
  }

  public void select(int start, int end) {
    super.select(start, start);
  }
} 
```

# java - 如何将 null 传递给需要 long 或 int 的方法？

> ID：10389001
> 
> 赞同：28
> 
> 时间：2012-04-30T18:56:54.650
> 
> 标签：java

可能是愚蠢的问题，但我怎样才能传递`null`给采用`long`or的方法`int`？

**例子：**

```
TestClass{
  public void iTakeLong(long id);
  public void iTakeInt(int id);
} 
```

现在我如何将 null 传递给这两种方法：

```
TestClass testClass = new TestClass();
testClass.iTakeLong(null); // Compilation error : expected long, got null
testClass.iTakeInt(null);   // Compilation error : expected int, got null 
```

想法、建议？

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-04-30T18:58:10.967

问题是`int`并且`long`是原语。您不能传递`null`给原始值。

您当然可以在您的方法签名中使用包装类`Integer`和`Long`代替。`long``int`

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-04-30T18:58:32.390

你不能——没有这样的价值。如果您可以更改方法签名，则可以改为采用引用类型。Java 为每个原始类提供了一个不可变的“包装器”类：

```
class TestClass {
  public void iTakeLong(Long id);
  public void iTakeInt(Integer id);
} 
```

现在您可以传递空引用*或*对包装器类型实例的引用。自动装箱将允许您编写：

```
iTakeInt(5); 
```

在该方法中，您可以编写：

```
if (id != null) {
    doSomethingWith(id.intValue());
} 
```

或使用自动拆箱：

```
if (id != null) {
    doSomethingWith(id); // Equivalent to the code above
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-04-30T19:09:02.913

您可以将 null 强制转换为将编译的非原始包装类。

```
TestClass testClass = new TestClass();
testClass.iTakeLong( (Long)null); // Compiles
testClass.iTakeInt( (Integer)null);   // Compiles 
```

`NullPointerException`但是，这会在执行时抛出一个。帮助不大，但知道您可以将包装器等效于将原语作为参数的方法传递是很有用的。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-04-30T19:35:44.553

根据您有多少这样的方法，以及多少次调用，您还有另一种选择。

*您可以编写包装器方法*（注意，不是类型包装器（int => Integer），而是包装您的方法），而不是在整个代码库中分发空检查：

```
public void iTakeLong(Long val) {
    if (val == null) { 
        // Do whatever is appropriate here... throwing an exception would work
    } else {
        iTakeLong(val.longValue());
    }
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-04-30T18:58:56.050

使用包装类：

```
 TestClass{
    public void iTakeLong(Long id);
    public void iTakeInt(Integer id);
    public void iTakeLong(long id);
    public void iTakeInt(int id);
 } 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-04-30T18:58:15.023

你不能这样做。原始类型不能`null`在 Java 中。

如果要通过`null`，则必须将方法签名更改为

```
public void iTakeLong(Long id);
public void iTakeInt(Integer id); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-04-10T17:02:08.637

将值类型转换`Long`为如下所示将使编译错误消失，但最终会以`NullPointerException`.

```
testClass.iTakeLong((Long)null) 
```

一种解决方案是使用 type`Long`而不是 original `long`。

```
public void iTakeLong(Long param) { } 
```

其他解决方案是使用`org.apache.commons.lang3.math.NumberUtils`

```
testClass.iTakeLong(NumberUtils.toLong(null)) 
```

# java - Android 保存图片并阅读

> ID：10389004
> 
> 赞同：0
> 
> 时间：2012-04-30T18:57:19.953
> 
> 标签：java, android

你有一个位图（来自字节数组）。我想将其保存为内部存储中的 PNG 文件。

然后我想将此图像加载到 webview ？

我怎样才能做到这一点 ？

# ruby-on-rails - 监控版本控制的最佳方法 - ROR

> ID：10389006
> 
> 赞同：1
> 
> 时间：2012-04-30T18:57:25.927
> 
> 标签：ruby-on-rails, git

我目前有一个正在运行的应用程序。我想为它添加一堆新功能，但在完全完成之前不想通过heroku上传它。新功能的东西非常广泛，因此它将通过多个 git 分支完成。

我的问题是，我如何继续构建应用程序，同时保持现有应用程序运行并能够在现场站点上到处修复小问题，而不会显示 WIP 内容？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T19:09:07.317

查看

[http://nvie.com/posts/a-successful-git-branching-model/](http://nvie.com/posts/a-successful-git-branching-model/)

热修复分支解决了您的问题。“合并”/将生产复制到热修复分支。测试更改。当测试通过时，将变更合并到生产中，并将变更合并到开发中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T19:12:14.660

您应该部署另一个应用程序副本，作为您的测试/登台环境。在开发时部署到它。完成开发后，合并所有内容以掌握并部署到生产环境。

另外，请阅读@MarlinPierce 发布的链接。它改变了我的生活:)

# jquery - JsTree - 通过单击父节点展开

> ID：10389007
> 
> 赞同：13
> 
> 时间：2012-04-30T18:57:30.243
> 
> 标签：jquery, jstree

我正在使用 JsTree。现在，树的元素只有在单击父节点的 NEXT 图标时才会展开。我怎样才能使它在单击父节点时树也会扩展？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-01T04:52:58.757

完整的命令列表可以在这里找到：http://www.jstree.com/documentation/core 下面是close_node和open_node监听点击事件的粗略实现。

```
.jstree({...}).delegate(".jstree-open>a", "click.jstree", function(event){
    $.jstree._reference(this).close_node(this,false,false);
}).delegate(".jstree-closed>a", "click.jstree", function(event){
    $.jstree._reference(this).open_node(this,false,false);
}); 
```

# linux - 执行 grails -version 时在 VM 初始化期间发生错误

> ID：10389008
> 
> 赞同：0
> 
> 时间：2012-04-30T18:57:39.327
> 
> 标签：linux, jvm, heap-memory, grails-2.0

我正在尝试在 Linux 中将 Grails 1.3.7 升级到 Grails 2.0.3。我收到如下消息： 键入命令**grails -version时****在 VM 初始化期间发生错误**

 **这就是我所做的

1.  wget [http://dist.springframework.org.s3.amazonaws.com/release/GRAILS/grails-2.0.3.zip](http://dist.springframework.org.s3.amazonaws.com/release/GRAILS/grails-2.0.3.zip)
2.  解压 grails-2.0.3.zip
3.  mv grails-2.0.3 /usr/share
4.  在 /etc/profile GRAILS_HOME=/usr/share/grails-2.0.3 中，然后是 export GRAILS_HOME，然后是添加 PATH 环境变量。
5.  关闭会话
6.  重新启动会话。类型化的 grails -version
7.  **VM 初始化期间发生错误无法为对象堆保留足够的空间**

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T13:22:06.657

我已经通过创建如下的**GRAILS_OPTS**环境变量来解决它并将其添加到**/etc/profile**：

```
export GRAILS_OPTS="-server -Xmx512M -XX:MaxPermSize=512m -Dfile.encoding=UTF-8" 
```**

# javascript - 全屏视频介绍 HTML5？

> ID：10389013
> 
> 赞同：2
> 
> 时间：2012-04-30T18:58:12.200
> 
> 标签：javascript, jquery, flash, html

好的，所以我需要全屏加载视频作为网站的介绍。我可以在 HTML5 中执行此操作还是需要使用 Flash？

有人可以解释或指出一些关于如何做到这一点的好资源。

我需要加载网站并在没有播放器控件或任何东西的情况下播放 5 秒的剪辑，然后直接进入主站点。

就像这个例子：[http ://www.firecrackerfilms.com/](http://www.firecrackerfilms.com/)

谢谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T19:06:54.677

如果你需要设置背景视频试试这个

`position:fixed`在视频上使用，将其设置为**100%** `width/height`，并在其上添加负片`z-index`，使其出现在所有内容的后面。

如果您查看[VideoJS](http://videojs.com/)，控件只是 html 元素。

HTML

```
<video id="background" src="video.mp4" autoplay> 
```

CSS

```
#video_background {
  position: fixed;
  top: 0;
  left: 0;
  bottom: 0;
  right: 0;
  z-index: -1000;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T19:15:36.297

您示例**中的页面不是全屏的，甚至也不是 full-viewport**，[它是一个黑色背景的小视频](http:///wp-content/uploads/2011/06/00_FCF_Sting_220percent.mp4)，与页面的黑色背景融为一体。*如果你能侥幸做到这一点，那将奏效。*

如果您在意，您将[永远无法](http://developer.apple.com/library/safari/#documentation/AudioVideo/Conceptual/Using_HTML5_Audio_Video/Device-SpecificConsiderations/Device-SpecificConsiderations.html#//apple_ref/doc/uid/TP40009523-CH5-SW1)在 iPad 上自动播放 HTML5 视频介绍，因为 iOS 禁止`autoload`并且`autoplay`除非它们是由手指触摸屏幕触发的。但是话又说回来，它无论如何都无法播放 Flash。

如果您希望 HTML5 视频是全视口的，例如，在 4:3 显示器中观看的 16:9 视频，您将使视频全高并丢失视频的侧面。对于相反的情况也是如此。这将保持视频的纵横比，但需要注意的是您会丢失部分视频内容以隐藏溢出。

如果您不关心宽高比，则可以按照@coder 的建议制作视频`height: 100%`和。`width: 100%`

出于这个原因，使用他们在您的示例网站上所做的事情可能更容易，并使视频融入背景。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T19:05:49.030

我认为用户请求它不可能实现真正的全屏。至少在闪存中这是不可能的。

如果您的意思是填充整个视口，则可以通过使用 css 来调整视频元素的大小，但需要注意的是，如果您将宽度和高度设置为与视频的纵横比不匹配的内容，则视频不会被拉伸填满盒子。取而代之的是，视频保留了正确的纵横比，并在视频元素内加了信箱。视频将在视频元素内尽可能大地渲染，同时保持纵横比。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-30T19:04:29.573

这是一个关于 html5 与 Flash 视频及其优缺点的好帖子： [HTML 5 <video> 标签与 Flash 视频。优缺点都有什么？](https://stackoverflow.com/questions/1086886/html-5-video-tag-vs-flash-video-what-are-the-pros-and-cons)

就我个人而言，我更喜欢 html5，因为您可以在几乎所有类型的设备（如 iphone 或 ipad 等）上观看视频）。

但是html5没有flash视频强大。

您还应该考虑到一些用户在他们的浏览器中禁用了 javascript 或 flash 配置。

# c++ - 不同系统上的错误位置

> ID：10389015
> 
> 赞同：2
> 
> 时间：2012-04-30T18:58:13.967
> 
> 标签：c++, c, std, errno

我对我应该在我的程序中使用什么实现 errno() 感到困惑。

据我所知，标准的 errno() 是在 errno.h 中定义的。但是，Visual Studio 在 stdlib.h 中也有 errno()。也许这是不正确的，但对我来说 stdlib.h 的 errno() 比 errno.h 的快。但 errno() 也在 stddef.h 中定义。

我应该使用哪一个？`#ifdef _WIN32 #include <stdlib.h> #else #include <errno.h> #endif`?

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-30T19:04:26.567

在 C 中使用`errno.h`，在 C++ 中使用`cerrno`标头。

`errno`为了方便起见，可以在其他标题中定义，但为了最大程度的可移植性，您应该使用上面的标题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T19:06:18.893

不确定 Windows，但在 Linux/Unix 上，`errno`在`errno.h`.

# sql - 在哪里存储交叉引用的 SQL 值？

> ID：10389019
> 
> 赞同：2
> 
> 时间：2012-04-30T18:58:26.750
> 
> 标签：sql, join

我正在构建一个包含两个表的电影数据库，一个包含电影名称，另一个包含演员姓名。如何交叉引用数据？

例如，电影名称表中的条目应该包含每部电影的演员列表，还是演员名称表中的条目应该包含演员的电影列表？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T19:00:06.283

您将需要一个连接两者的附加表，并且至少包含电影 ID 和演员 ID 作为其列。假设您的`Actors`表已`actor_id`作为其主键，并且`Movies`已`movie_id`作为其主键。该表还可以包括关于特定于该电影的演员的信息，例如，角色的姓名或其他与角色相关的信息。

```
CREATE TABLE actors_in_movies (
  /* Use whatever auto increment keyword is needed for your RDBMS */
  id INT NOT NULL PRIMARY KEY <auto increment>,
  actor_id INT,
  movie_id INT,
  character_name VARCHAR(),
  other_character_info VARCHAR(),
  character_best_quote TEXT,
  FOREIGN KEY (actor_id) REFERENCES actors (actor_id),
  FOREIGN KEY (movie_id) REFERENCES actors (movies_id)
); 
```

### 要查询一个演员出现的所有电影，

使用一些东西来达到以下效果：

```
SELECT
  actors.*,
  movies.name
FROM
  actors 
  JOIN actors_in_movies ON actors.actor_id = actors_in_movies.actor_id
  JOIN movies ON movies.movie_id = actors_in_movies.movie_id
WHERE actors.actor_id = <some actor id> 
```

### 要查询特定电影中的所有演员，

使用一些东西来达到以下效果：

```
SELECT
  actors.*
FROM
  actors 
  JOIN actors_in_movies ON actors.actor_id = actors_in_movies.actor_id
  JOIN movies ON movies.movie_id = actors_in_movies.movie_id
WHERE movies.movie_id = <some movie id> 
```

要将演员添加到电影中，请在表中插入一行`actors_in_movies`：

```
INSERT INTO actors_in_movies (actor_id, movie_id) VALUES (..., ...); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T18:59:55.977

使用交叉表！有一个只有两列的表：movieID、actorID。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T19:00:09.310

你应该有第三张桌子，一张叫做`ActorInMovie`. 该表应有 2 列。`ActorID, MovieID`.

这样，您将能够拥有多对多 rel。

# javascript - 在循环中附加事件

> ID：10389021
> 
> 赞同：3
> 
> 时间：2012-04-30T18:58:30.593
> 
> 标签：javascript, events, javascript-events, event-handling

我正在做的是使用循环在类上附加事件，并且在事件处理程序代码中使用索引值。这是我的代码：

```
var classElements=document.getElementsByClassName("a");
for(var i=0; i<4; i++)
{
    classElements[i].onClick=function(){
       alert("Clicked button : "+i);
    }
} 
```

每当我单击任何按钮时，它都会发出警报

```
Clicked Button : 4 
```

可能是什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T19:02:47.100

JavaScript 关闭对象并在稍后调用它时对其进行评估。在它被调用时，`i`是 4。

我想你想要这样的东西：

```
var classElements=document.getElementsByClassName("a");
for(var i=0; i<4; i++)
{
    classElements[i].onClick=function(j) { 
       return function(){
          alert("Clicked button : "+j);
       };
    }(i);
} 
```

编辑：显示命名函数以使代码更清晰

```
var classElements=document.getElementsByClassName("a");
for(var i=0; i<4; i++)
{
    var makeFn = function(j) { 
       return function(){
          alert("Clicked button : "+j);
       };
    };
    classElements[i].onClick = makeFn(i);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T19:02:52.467

您需要一个闭包来捕获`i`. 正如娄所说，这是由于事后评估。

```
var classElements=document.getElementsByClassName("a");
for(var i=0; i<4; i++)
    classElements[i].onclick = (function(i){
          return function(){ alert("Clicked button : " + i) }; 
       })(i); 
```

# nsis - NSIS 滚动许可证欢迎屏幕

> ID：10389025
> 
> 赞同：2
> 
> 时间：2012-04-30T18:58:38.487
> 
> 标签：nsis

我的安装程序在与滚动许可证插件交互时遇到问题。安装程序在没有插件的情况下工作得很好，这就是插件让我包含的内容：

```
!

include MUI.nsh

!define MUI_PAGE_CUSTOMFUNCTION_SHOW LicenseShow
!insertmacro MUI_PAGE_LICENSE "EULA.txt"

unction LicenseShow
 ScrollLicense::Set /NOUNLOAD
FunctionEnd

Function .onGUIEnd
 ScrollLicense::Unload
FunctionEnd

Section A 
Section End 
```

我遇到的问题就在这里。如果欢迎页面显示在许可证页面之前，它将无法进入下一个屏幕，因为它正在寻找滚动条和接受按钮。如果我删除 WELCOME 页面，一切正常。有没有人有这个插件的经验？或者我怎样才能让插件忽略 MUI_PAGE_WELCOME？

```
!insertmacro MUI_PAGE_WELCOME <--- If I remove this Welcome page everything works great!
!insertmacro MUI_PAGE_LICENSE "eula.rtf" 
!insertmacro MUI_PAGE_DIRECTORY
!insertmacro MUI_PAGE_INSTFILES
!insertmacro MUI_PAGE_FINISH
!insertmacro MUI_UNPAGE_CONFIRM
!insertmacro MUI_UNPAGE_INSTFILES 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T19:22:28.927

尝试移动线路：

```
!define MUI_PAGE_CUSTOMFUNCTION_SHOW LicenseShow 
```

在该行下方（更具体地说，直接在 MUI_PAGE_LICENSE 行上方）：

```
!insertmacro MUI_PAGE_WELCOME 
```

我使用了 ScrollLicense 插件提供的 ExampleCheckBox.nsi 并重现了您的行为：

```
!define MUI_PAGE_CUSTOMFUNCTION_SHOW LicenseShow
!insertmacro MUI_PAGE_WELCOME
!insertmacro MUI_PAGE_LICENSE ExampleCheckBox.nsi 
```

当我将 !define 行移到 MUI_PAGE_WELCOME 之后，问题就消失了。

```
!insertmacro MUI_PAGE_WELCOME
!define MUI_PAGE_CUSTOMFUNCTION_SHOW LicenseShow
!insertmacro MUI_PAGE_LICENSE ExampleCheckBox.nsi 
```

我不熟悉这个插件，但我怀疑有某种副作用会禁用下一个显示页面的下一步按钮......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T19:23:40.237

我认为您缺少的是示例需要如何适应其他 MUI 页面的“流程”。

```
!include MUI.nsh

;;this goes before the License page if you want it first.
!insertmacro MUI_PAGE_WELCOME

;;now add the example stuff
!define MUI_PAGE_CUSTOMFUNCTION_SHOW LicenseShow
!insertmacro MUI_PAGE_LICENSE "EULA.txt" ;;update for what file you want to include!

Function LicenseShow
    ScrollLicense::Set /NOUNLOAD
FunctionEnd

Function .onGUIEnd
    ScrollLicense::Unload
FunctionEnd

;;now continue with the rest of the pages
;;and we *don't* repeat the MUI_PAGE_LICENSE
!insertmacro MUI_PAGE_DIRECTORY
!insertmacro MUI_PAGE_INSTFILES
!insertmacro MUI_PAGE_FINISH
!insertmacro MUI_UNPAGE_CONFIRM
!insertmacro MUI_UNPAGE_INSTFILES 
```

# javascript - 需要有关 CSS 的帮助以正确放置这些元素

> ID：10389026
> 
> 赞同：1
> 
> 时间：2012-04-30T18:58:44.857
> 
> 标签：javascript, css

我有一个我似乎无法弄清楚的css问题。我有一个指向应用程序的链接 [这里][1]。

要使用该应用程序，只需选择一个文件（用于快速上传的小文件），然后单击“上传”按钮上传文件。然后您会看到您上传的文件的名称、删除按钮和下方的水平线。

但是我想要的是文件的名称像现在一样保持在左侧，移动删除按钮以在框内对齐右侧，除了使用水平线之外，可以使用虚线替换吗？

下面是附加文件名、删除按钮和水平线的代码：

```
<ul class='listImage' align='left'> 
```

下面是显示文件名、删除按钮和水平线的代码：

```
 $('.listImage').append(htmlEncode(imagefilename) + '<button align="right" type="button" class="deletefileimage">Delete</button><br/><hr/>'); 
```

下面是 listImage 和删除按钮的当前 css：

```
.deletefileimage{
    font-size:12px;
    font-weight:bold;   
}

.listImage{
    font-size:12px;
    text-align:left;
    margin:0;
    padding-left:0;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T19:06:45.257

代替

```
<button align="right" type="button" class="deletefileimage">Delete</button> 
```

和

```
<button style="float:right" type="button" class="deletefileimage">Delete</button> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T19:12:28.393

`align='left'` 属性对浏览器功能不利，请使用`float:left; float:right;`

# objective-c - NSOutputStream 刷新

> ID：10389032
> 
> 赞同：2
> 
> 时间：2012-04-30T18:59:02.053
> 
> 标签：objective-c, flush, nsstream

我想使用 Objective-C 中的 NSOutputStream 发送小包。

我有这个用户有同样的问题： [Cocoa NSOutputStream send to a connection](https://stackoverflow.com/questions/2589070/cocoa-nsoutputstream-send-to-a-connection)

答案是在字符串末尾添加“\n”。我试过了，但它不起作用。

你们中有人看到我的问题吗？编码可能是问题吗？

```
// Append the line break
theMessage = [theMessage stringByAppendingString:@"\n"];

// Create the data object
NSData *d = [theMessage dataUsingEncoding:NSASCIIStringEncoding];

// Send the message
[self.outputStream write:[d bytes] maxLength:[d length]] 
```

编辑：我通过从 NSNetservice-Object 调用此方法来获取输出流：

```
CFStreamCreatePairWithSocketToHost(NULL, url, port, &inputStream, &outputStream); 
```

Edit2：问题是，如果我非常快地发送大量消息，服务器将消息作为一个字符串接收，而不是两个分开的

# opengl - gl_FragCoord 中的 1/w 坐标代表什么？

> ID：10389040
> 
> 赞同：5
> 
> 时间：2012-04-30T18:59:32.227
> 
> 标签：opengl, fragment-shader

gl_FragCoord 变量存储四个分量： (x, y, z, **1/w** )

**w**坐标是什么，为什么存储为**1/w**？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-30T21:28:52.733

GLSL 和 OpenGL 规范在这方面是不必要的混淆。OpenGL 规范更容易理解：`gl_FragCoord`存储窗口空间顶点位置的 X、Y 和 Z 分量。X、Y 和 Z 值按照计算窗口空间位置的描述进行计算（尽管像素中心和左上角原点可以修改 X 和 Y 值）。这在`Coordinate Transforms`规范的部分中进行了描述。

的 W 分量`gl_FragCoord`是 (1 / W [c] )，其中 W [c]是*剪辑空间*顶点位置。它`gl_Position.w`来自您的顶点着色器。

保留 W [c]的唯一有用目的是进行[反向转换`gl_FragCoord`](http://www.opengl.org/wiki/Compute_eye_space_from_window_space)以恢复剪辑空间位置。如该页所示，这需要乘以 W [c]。但由于`gl_FragCoord`只存储这个值的倒数，它现在需要除以`gl_FragCoord.w`。

因此，我们可以假设 OpenGL 以这种方式存储它，因为 OpenGL 不允许有太多意义 ;) 看，OpenGL 规范的每个部分都必须有一些有点荒谬的东西。XYZ 组件太有意义了，所以他们决定让它存储你实际想要的值的倒数。

好的，从技术上讲，这是 3D Labs 创建 GLSL 时的历史产物。我确信他们这样做纯粹是出于自私的硬件原因，但我没有真正的证据。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T21:24:39.820

齐次坐标由**(x, y, z, w)**给出，投影到：**(x/w, y/w, z/w)**。`gl_FragCoord`存储此投影，但不是存储最后一个组件的 (无用) **(w/w) = (1)**，而是存储**(1/w)**，以保留有用的信息。

# mysql - Rails sql查询，过滤上千条记录，汇总一列

> ID：10389046
> 
> 赞同：1
> 
> 时间：2012-04-30T19:00:22.553
> 
> 标签：mysql, ruby-on-rails-3, activerecord, sum

我有一个包含数千行的数据库表。我想运行一份报告，基本上列出所有在我们这里花费超过 2,000 英镑的客户。

该表有很多列，但我感兴趣的列如下：

```
======================================================
|  ClientKey | PVID | ShortText           | Payments |
======================================================
|  13276     | 76668| Paid by PET HEALTH  | 56.79    |
|  12893     | 62368| Paid by PET HEALTH  | 42.79    |
|  23782     | 87468| Paid by PET HEALTH  | 26.29    |
|  23246     | 79868| Paid by PET HEALTH  |-16.52    |
====================================================== 
```

我需要按 ClientKey 对行进行分组并总结 Payments 列。然后我需要通过删除 Payments 列总和小于 2,000 英镑的任何内容来过滤它们。我还需要忽略 PVID 为 44444 的任何行。

到目前为止，我知道我将需要类似于以下内容：

```
@clinical = Clinical.where("ShortText LIKE 'Paid by PET HEALTH' AND PVID != 44444") 
```

这负责过滤行以排除 PVID 为 44444 的任何内容，并且仅显示 ShortText 包含由 PET HEALTH 支付的行。

我不知道如何总结每个 ClientKey 的支付列。

我想要的最终结果是能够做到这一点：

```
Client Key 13276 has spent £99,999 so far.
Client Key 21342 has spent £3,200 so far.
Client Key 32312 has spent £2,110 so far. 
```

任何帮助和/或指针将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T05:34:32.770

你可以试试：

```
Clinical.select("ClientKey as client_key, sum(Payments) as total_payments").group("ClientKey").where("ShortText LIKE 'Paid by PET HEALTH' AND PVID != 44444") 
```

有关分组的更多信息，请参阅[rails 指南 - ActiveRecord 查询接口](http://guides.rubyonrails.org/active_record_querying.html#group)

# objective-c - 获取静态表格视图的行数

> ID：10389050
> 
> 赞同：1
> 
> 时间：2012-04-30T19:00:30.840
> 
> 标签：objective-c, cocoa-touch, storyboard

我有一个使用情节提要创建的静态表格视图。我想在代码中获取它的行数。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T19:03:52.960

我所知道的最好的是：

```
NSInteger rows = 0;
for (NSInteger i = 0; i < [myTable numberOfSections]; ++i)
{
    rows += [myTable numberOfRowsInSection:i];
} 
```

# c++ - 从密码过滤器通过 MSMQ 发送消息

> ID：10389055
> 
> 赞同：0
> 
> 时间：2012-04-30T19:00:41.090
> 
> 标签：c++, msmq, change-password

我用 C++ 编写了一个基本的 MSMQ 发送/接收。在测试应用程序中，我创建、打开、发送和接收。它可以正常工作。但是，当我尝试从 Windows 密码过滤器 dll（当有人尝试更改密码时调用）中创建（私有队列）或对队列执行任何基本操作时，它会挂起。有没有人有同样的经历？谷歌搜索并没有改变太多。两者都独立工作，但是问题是在集成时出现的。在两台机器上试过，结果一样。对此的想法表示赞赏。

操作系统：XP，带 SP3

# c# - 我怎么能在 Linq 中做到这一点？

> ID：10389056
> 
> 赞同：0
> 
> 时间：2012-04-30T19:00:44.153
> 
> 标签：c#, linq

我有一种感觉，以下可能是暴行，也许这就是它不起作用的原因。所以我在这里，寻求你的帮助。:-)

另外请帮我编辑这个问题。我不知道什么是合适的标题或更好的表述方式。（就像你现在可能已经猜到的那样，英语不是我的母语）。

考虑一个像这样的类：

```
public class Order
{
  public int FareCode;
  public int Quantity;
} 
```

然后是一个 Linq 查询，如：

```
var orders = new []{ new Order {...}, ...};
var fareCodes = orders.Select(o => o.FareCode).ToArray();
using(var dc = new datacontext())
{
  var query = dc.Fares
              .Where(f => fareCodes.Contains(f.FareCode))
              .Select(f => new {
                Fare = f,
                Quantity = orders.Single(o => o.FareCode == f.FareCode).Quantity //<-- This is not right!
              })
} 
```

所以`Quantity = Orders.Single(o => o.FareCode == f.FareCode).Quantity`不对。那么实现这一目标的另一种选择是什么？

更新：它不起作用的原因是因为运行时抛出了这个异常：本地序列不能在查询运算符的 LINQ to SQL 实现中使用，除了 Contains() 运算符

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T19:03:29.577

根据您的最后评论，请尝试以下解决方案：

```
var query = Fares
        .Where(f => fareCodes.Contains(f.FareCode)).ToList()
        .Select(f => new
                         {
                             Fare = f,
                             Quantity = Orders.Single(o => o.FareCode == f.FareCode).Quantity
                         }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T19:48:51.440

因此，对于每个`Order`，您都希望将其更改`FareCode`为关联的`Fare`，并对每个的数量求和，而不会影响`Fare`每个单个的数据上下文`Order`。

我会在`Orders`列表和列表中使用 GroupBy/ToDictionary 组合：`ToDictionary()``Fares`

```
// generates a dictionary of fare codes and total quantity of orders per fare code
var fareQuantities = Orders.GroupBy(o => o.FareCode).ToDictionary(og => og.Key, og => og.Sum(o => o.Quantity));

using(var dc = new datacontext())
{
    var query = dc.Fares
        .Where(f => fareQuantities.Keys.Contains(f.FareCode))
        .ToDictionary(f => f, f => fareQuantities[f.FareCode]);
    // query is now a dictionary of fares and the total quantities of each fare ordered
} 
```

希望有帮助。

# c# - 在 C# 中将位图转换为二维字节数组？

> ID：10389064
> 
> 赞同：0
> 
> 时间：2012-04-30T19:01:45.447
> 
> 标签：c#, arrays, image, 2d

我一直在使用 AForge.NET 框架开发一个项目。在我的项目中，我一直在尝试从灰度位图中获取 2D 字节数组。在本网站和其他论坛上发布了一些关于此主题的解决方案。但我还没有得到真正的结果。例如，我使用了该代码：

```
public static byte[] ImageToByte2(Image img)
{
    byte[] byteArray = new byte[0];
    using (MemoryStream stream = new MemoryStream())
    {
        img.Save(stream, System.Drawing.Imaging.ImageFormat.Png);
        stream.Close();

        byteArray = stream.ToArray();
    }
    return byteArray;
} 
```

在这个“MemoryStream”方法之后，我考虑过将这个字节数组转换为 2D。但是，当我使用 4*8 位图测试此代码示例时，它会将 1100 个值返回到 byteArray。这正常吗？我在哪里失踪？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T19:10:02.740

.NET`Image`类用作两种图像的接口：`Bitmap`图像和`Metafile`图像。后者由一系列用于绘制某些东西的指令组成，而不是像位图这样的像素数组。如果您看一下[Bitmap 类本身](http://msdn.microsoft.com/en-us/library/system.drawing.bitmap.aspx)，就会发现有一对`LockBits`方法可以让您提取图像的像素数据。在`Bitmap`该类的链接参考的底部，甚至还有一个如何执行此操作的示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-01-05T09:18:20.100

请使用以下方法

```
public static byte[,] ImageTo2DByteArray(Bitmap bmp)
    {
        int width = bmp.Width;
        int height = bmp.Height;
        BitmapData data = bmp.LockBits(new Rectangle(0, 0, width, height), ImageLockMode.ReadOnly, PixelFormat.Format24bppRgb);

        byte[] bytes = new byte[height * data.Stride];
        try
        {
            Marshal.Copy(data.Scan0, bytes, 0, bytes.Length);
        }
        finally
        {
            bmp.UnlockBits(data);
        }

        byte[,] result = new byte[height, width];
        for (int y = 0; y < height; ++y)
            for (int x = 0; x < width; ++x)
            {
                int offset = y * data.Stride + x * 3;
                result[y, x] = (byte)((bytes[offset + 0] + bytes[offset + 1] + bytes[offset + 2]) / 3);
            }
        return result;
    } 
```

# java - 与导航 LinkedList 混淆或跟踪 LL 中的先前元素

> ID：10389065
> 
> 赞同：0
> 
> 时间：2012-04-30T19:01:48.840
> 
> 标签：java, algorithm, data-structures, linked-list

我正在努力实现 LinkedList 及其对我来说非常新的主题。在处理不同类型的 LinkedList 问题时，我遇到了遍历 LinkedList 以跟踪先前元素的一般错误。一些老式的遍历方式是

> 列表 L = L.next

问题来了。就像我想跳过列表中的一些元素，然后删除下一组元素，然后再次跳过问题。为此，我想遍历 LL 直到跳过点，现在 traverse 引导我思考 L = L.next ，然后我再次陷入递归。

请向我解释一下这个问题以及如何处理这种情况。请在我的理解中将其视为一个笨蛋，因此我无法进一步前进，只需一点点光就会引导我对问题进行分类。

*我很新这种实现*

我的链表-

```
 MyList list_Sort = new MyList(9);
        list_Sort.next = new MyList(8);
        list_Sort.next.next = new MyList(8);
        list_Sort.next.next.next = new MyList(7);
        list_Sort.next.next.next.next = new MyList(5);
        list_Sort.next.next.next.next.next = new MyList(4);
        list_Sort.next.next.next.next.next.next = new MyList(6);
        list_Sort.next.next.next.next.next.next.next = new MyList(3);
        list_Sort.next.next.next.next.next.next.next.next = new MyList(1);
        list_Sort.next.next.next.next.next.next.next.next.next = new MyList(2);

9-->8-->8-->7-->5-->4-->6-->3-->1-->2-->TAIL 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T19:12:23.177

哇！！这当然不是遍历 a 的方式`LinkList`。如果你有`10000`节点你不能写`.next` `9999`时间:-)

如果您不确定，请尽量不要使用递归。循环更容易使用。使用循环：

```
while(current.next != null)
{
    //do your stuff
    current = current.next;
} 
```

如果我没记错的话，你曾经问过如何排序`0s and 1s`。你在那儿做同样的事情。您使用指针来跟踪您的节点。只需遍历要删除的节点之前的那个节点（使用`current`指针）。然后在此处放置一个指针以供参考。然后继续遍历（使用`present`指针）直到要删除的节点。现在只需在前面再跳一跳，这样您就可以准确地指向要删除的节点的下一个节点。现在做：

```
current.next = present; 
```

沃拉！！完成

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T19:12:43.667

您可以通过以下逻辑遍历到您不想跳过的第一个元素

```
List tmp = L;
while (tmp != null && doSkip(tmp.data)) {
  tmp = tmp.next;
} 
```

然后转到您不想删除的第一个元素：

```
List tmp2 = tmp;
while (tmp2 != null && doDelete(tmp2.data)) {
  tmp2 = tmp2.next;
} 
```

然后通过将下一个 from 链接到第一个 no-delete 元素来删除 和 之间的元素`tmp`：`tmp2``tmp`

```
tmp.next = tmp2; 
```

在这里`doSkip()`并`doDelete()`分别评估您是要跳过还是删除元素。如果逻辑涉及评估序列，您可能需要保留一些状态。

这种方法使用迭代遍历（不是递归），我认为它更适合这个问题

# sharepoint - 如何以编程方式赋予当前用户站点管理员权限

> ID：10389070
> 
> 赞同：0
> 
> 时间：2012-04-30T19:02:11.103
> 
> 标签：sharepoint, sharepoint-2007

我们希望在页面加载中授予用户站点管理员权限，并在 finally 块中将其删除。我们使用的是sharepoint 2007，具体的实现方式是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T19:43:30.913

我建议使用[SystemAccount实例化](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.spsite.systemaccount%28v=office.12%29.aspx)[SPSite](http://msdn.microsoft.com/en-us/library/ms436101%28v=office.12%29.aspx) ，而不是临时授予用户访问权限：

```
SPSite site = web.Site;
Guid id = web.ID;
SPUtility.ValidateFormDigest();
using (SPSite systemSite = new SPSite(site.ID, site.SystemAccount.UserToken))
{
    using (SPWeb systemWeb = systemSite.OpenWeb(id))
    {
        // perform as site administrator
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T08:33:44.623

我建议在您的代码中以提升的权限运行。这将为您临时执行的代码提供更高的权限。确保您打开您的站点、Web 和列表对象在此委托下打开。请参阅下面的 MSDN[文章](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.spsecurity.runwithelevatedprivileges.aspx)和示例。

```
SPSecurity.RunWithElevatedPrivileges(delegate()
{
   using (SPSite site = new SPSite(web.Site.ID))
   {
     // implementation details omitted
   }
}) 
```

# animation - 游戏AI在世界中的位置

> ID：10389072
> 
> 赞同：2
> 
> 时间：2012-04-30T19:02:18.207
> 
> 标签：animation, artificial-intelligence

我有一个关于控制游戏中 AI 角色位置的问题。

在大多数游戏中，玩家的动画都是就位的，所以角色的位置就在我们手中。

但是当看AI动画时，它们并不到位。例如，当一个人工智能向前移动时，他的动画在局部空间中移动了一步。如果我们想循环这个动画，一步后角色回到第一个位置。我们需要人工智能在世界上向前发展。

我的问题是：如何更新 ai 角色在世界空间中的位置？

您可以在这里找到更多信息。[http://udn.epicgames.com/Three/RootMotion.html](http://udn.epicgames.com/Three/RootMotion.html)

虚幻引擎如何使用根骨骼的移动来移动它自己在世界上的演员。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T21:46:32.837

角色的动画不应该定义他们的位置如何变化，只定义他们的动作，所以它不会在本地空间中移动。
例如，在行走动画中，角色移动它的腿，也许是它的手臂，但它不会向前移动。这使得循环和连接动画更容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T19:39:51.083

Isn't it the exact same as what your character would do?

Note that the animation itself has nothing to do with "moving" in the game world. What's important is that the engine synchronizes translation of the model and playing of the animation so it looks as if the "walk" animation moved the character forward.

The animation must contain meta-data that tells the engine how much translation/velocity changes are produced or this must be hard-coded in the engine for specifically named animations and all animators must match their animations to the translations the engine will produce.

# vb6 - vbFromUnicode 是什么意思？

> ID：10389080
> 
> 赞同：3
> 
> 时间：2012-04-30T19:02:50.730
> 
> 标签：vb6

我正在浏览一些旧的 VB6 代码，我遇到了如下语句 -

```
 TempArray() = StrConv(PassedString, vbFromUnicode) 
```

这是什么意思？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-30T19:17:15.273

它接受一个 unicode 字符串（VB 中的任何字符串都是 Unicode）并将其转换为字节数组，使用非 unicode 程序的当前系统代码页。

*   如果是*单字节*代码页（例如英语和西欧 1252） ，则每个字符将有一个字节
*   如果是*多字节*代码页（例如简体中文） ，每个字符可能有多个字节

在该代码页中找不到的字符将替换为问号 ( `?`)。

# python - 我如何使表单集成为必需的

> ID：10389081
> 
> 赞同：1
> 
> 时间：2012-04-30T19:02:51.157
> 
> 标签：python, django, django-forms

如何使 django formset 中的所有表单都需要？我正在使用`RequiredFormSet`. 但它不起作用。我错过了什么吗？谢谢

```
class RequiredFormSet(BaseFormSet):
    def __init__(self, *args, **kwargs):
        super(RequiredFormSet, self).__init__(*args, **kwargs)
        for form in self.forms:
            form.empty_permitted = False
        #self.forms[0].empty_permitted = False

class RecipeIngredientForm(CustomModelForm):
    class Meta:
        model = RecipeIngredient
    def clean(self):
        ingredient = self.cleaned_data['ingredient']
        unit = self.cleaned_data['unit']
        if ingredient.ing_type in (ingredient.TYPE_WET, ingredient.TYPE_DRY) and not unit:
            raise forms.ValidationError('unit missing for %s.' % ingredient.name)
        return self.cleaned_data
 RecipeIngredientFormSet = formset_factory(RecipeIngredientForm, formset=RequiredFormSet) 
```

更新：这里[追溯](http://dpaste.org/6pD8s/)，这是[我的观点](http://dpaste.org/YxVfQ/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T19:47:54.720

```
ingredient = self.cleaned_data.get('ingredient')
unit = self.cleaned_data.get('unit') 
```

这不会引发`KeyError`

UPD。

```
def clean(self):
    ingredient = self.cleaned_data.get('ingredient')
    unit = self.cleaned_data.get('unit') 
    if ingredient is not None and ingredient.ing_type in (ingredient.TYPE_WET, ingredient.TYPE_DRY) and not unit:
        raise forms.ValidationError('unit missing for %s.' % ingredient.name)
    return self.cleaned_data 
```

# mysql - MySQL删除所有字段的前两个字符

> ID：10389083
> 
> 赞同：18
> 
> 时间：2012-04-30T19:02:59.637
> 
> 标签：mysql, substring

我有一些看起来像这样的数据：

```
C:10
R:200
N/A
E:3
N/A
N:77 
```

我正在尝试删除每行的前两个字符，并跳过`N/A`我一直试图弄清楚如何做到这一点`SUBSTRING`但没有运气的行。

```
UPDATE d1
SET d1_val = SUBSTRING(d1_val, 1, LENGTH(d1_val)2) 
```

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-04-30T19:06:28.503

尝试

```
UPDATE d1
SET d1_val = SUBSTRING(d1_val, 3)
WHERE d1_val <> 'N/A' 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-30T19:18:05.870

关于多次执行的更安全的查询正在使用`LIKE '_:%'`：

```
UPDATE d1
SET d1_val = SUBSTRING(d1_val, 3)
WHERE d1_val LIKE '_:%' 
```

在前一次查询运行之后，它将改变每一行看起来像`C:10`, `E:100`etc. 但不是。`10``100`

（假设之前总是有一个字母`:`。如果更多 - 使用`LIKE '%:%'`）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-06-12T17:42:50.433

采用`SUBSTRING(column_name, character_to_remove)`

解决方案，

```
SUBSTRING(d1_val, 3) 
```

注意：您可以在 SELECT 或 UPDATE 语句中使用它

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-03-22T13:57:07.677

```
UPDATE d1
SET d1_val = SUBSTRING_INDEX(d1_val , ":",-1); 
```

也完成这项工作，保持“N/A”不变。

# c++ - 使用 Makefile 为 iPhone 模拟器编译

> ID：10389084
> 
> 赞同：0
> 
> 时间：2012-04-30T19:03:00.497
> 
> 标签：c++, objective-c, ios, xcode, makefile

我正在尝试使用由 Qt 框架中的 qmake 工具生成的通用 Makefile 编译静态库。当我在没有 Objective-C 代码的情况下编译它时，一切正常：

```
//#import <Foundation/NSString.h>
int get_int()
{
   return 1;
}
#if 0
NSString* get_string()
{
   return [NSString stringWithString:@"MyString!"];
}
#endif 
```

如果我启用 Objective-C 代码，我会收到以下错误：

```
/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin/gcc -c -pipe -fmessage-length=0 -fexceptions -miphoneos-version-min=5.1 -arch i386 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.1.sdk -fobjc-abi-version=2 -fobjc-legacy-dispatch -g -arch x86_64 -Xarch_x86_64 -Wall -W -DDARWIN_NO_CARBON -DQT_NO_AUDIO_BACKEND -I/usr/local/Qt4.8/mkspecs/qpa/macx-iphonesimulator-g++ -I. -I/usr/include -I/home/luca/Android/android-ndk-r7c/platforms/android-5/arch-arm/usr/include -I. main.mm -o main.o
In file included from /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.1.sdk/System/Library/Frameworks/Foundation.framework/Headers/NSObjCRuntime.h:149,
                 from /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.1.sdk/System/Library/Frameworks/Foundation.framework/Headers/NSObject.h:5,
                 from /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.1.sdk/System/Library/Frameworks/Foundation.framework/Headers/NSString.h:8,
                 from main.mm:4:
/usr/include/objc/objc.h:119: error: expected initializer before ‘__AVAILABILITY_INTERNAL__IPHONE_5_0’
/usr/include/objc/objc.h:121: error: expected initializer before ‘__AVAILABILITY_INTERNAL__IPHONE_5_0’
/usr/include/objc/objc.h:123: error: expected initializer before ‘__AVAILABILITY_INTERNAL__IPHONE_5_0’
In file included from /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.1.sdk/System/Library/Frameworks/Foundation.framework/Headers/NSObjCRuntime.h:149,
                 from /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.1.sdk/System/Library/Frameworks/Foundation.framework/Headers/NSObject.h:5,
                 from /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.1.sdk/System/Library/Frameworks/Foundation.framework/Headers/NSString.h:8,
                 from main.mm:4:
/usr/include/objc/objc.h:119: error: expected initializer before ‘__AVAILABILITY_INTERNAL__IPHONE_5_0’
/usr/include/objc/objc.h:121: error: expected initializer before ‘__AVAILABILITY_INTERNAL__IPHONE_5_0’
/usr/include/objc/objc.h:123: error: expected initializer before ‘__AVAILABILITY_INTERNAL__IPHONE_5_0’
lipo: can't open input file: /var/folders/vg/w8jfpsk12679f8w964bnjzs00000gn/T//ccasR3kI.out (No such file or directory)
make: *** [main.o] Error 1 
```

这是我使用的 Makefile：

```
#############################################################################
# Makefile for building: libAndroidTest.a
# Generated by qmake (2.01a) (Qt 4.8.1) on: Mon Apr 30 19:26:19 2012
# Project:  AndroidTest.pro
# Template: lib
# Command: /usr/bin/qmake -spec /usr/local/Qt4.8/mkspecs/qpa/macx-iphonesimulator-g++ -o Makefile AndroidTest.pro
#############################################################################

####### Compiler, tools and options

CC            = /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin/gcc
CXX           = /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin/g++
DEFINES       = -DDARWIN_NO_CARBON -DQT_NO_AUDIO_BACKEND
CFLAGS        = -pipe -fmessage-length=0 -fexceptions -miphoneos-version-min=5.1 -arch i386 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.1.sdk -g -gdwarf-2 -arch x86_64 -Xarch_x86_64 -fPIC -Wall -W $(DEFINES)
CXXFLAGS      = -pipe -fvisibility=hidden -fvisibility-inlines-hidden -pipe -fmessage-length=0 -fexceptions -miphoneos-version-min=5.1 -arch i386 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.1.sdk -g -gdwarf-2 -arch x86_64 -Xarch_x86_64 -fPIC -Wall -W $(DEFINES)
INCPATH       = -I/usr/local/Qt4.8/mkspecs/qpa/macx-iphonesimulator-g++ -I. -I/usr/include -I/home/luca/Android/android-ndk-r7c/platforms/android-5/arch-arm/usr/include -I.
AR            = /usr/bin/ar cq
RANLIB        = /usr/bin/ranlib -s
QMAKE         = /usr/bin/qmake
TAR           = tar -cf
COMPRESS      = gzip -9f
COPY          = cp -f
SED           = sed
COPY_FILE     = cp -f
COPY_DIR      = cp -f -R
STRIP         = 
INSTALL_FILE  = $(COPY_FILE)
INSTALL_DIR   = $(COPY_DIR)
INSTALL_PROGRAM = $(COPY_FILE)
DEL_FILE      = rm -f
SYMLINK       = ln -f -s
DEL_DIR       = rmdir
MOVE          = mv -f
CHK_DIR_EXISTS= test -d
MKDIR         = mkdir -p
export IPHONEOS_DEPLOYMENT_TARGET = 5.1

####### Output directory

OBJECTS_DIR   = ./

####### Files

SOURCES       =  
OBJECTS       = main.o
DIST          = /usr/local/Qt4.8/mkspecs/common/unix.conf \
        /usr/local/Qt4.8/mkspecs/common/mac.conf \
        /usr/local/Qt4.8/mkspecs/common/gcc-base.conf \
        /usr/local/Qt4.8/mkspecs/common/gcc-base-macx.conf \
        /usr/local/Qt4.8/mkspecs/common/g++-base.conf \
        /usr/local/Qt4.8/mkspecs/common/g++-macx.conf \
        /usr/local/Qt4.8/mkspecs/qpa/common/g++-base-macx-iphone.conf \
        /usr/local/Qt4.8/mkspecs/qconfig.pri \
        /usr/local/Qt4.8/mkspecs/modules/qt_webkit_version.pri \
        /usr/local/Qt4.8/mkspecs/features/qt_functions.prf \
        /usr/local/Qt4.8/mkspecs/features/qt_config.prf \
        /usr/local/Qt4.8/mkspecs/features/exclusive_builds.prf \
        /usr/local/Qt4.8/mkspecs/features/default_pre.prf \
        /usr/local/Qt4.8/mkspecs/features/mac/default_pre.prf \
        /usr/local/Qt4.8/mkspecs/features/mac/dwarf2.prf \
        /usr/local/Qt4.8/mkspecs/features/debug.prf \
        /usr/local/Qt4.8/mkspecs/features/default_post.prf \
        /usr/local/Qt4.8/mkspecs/features/mac/default_post.prf \
        /usr/local/Qt4.8/mkspecs/features/mac/x86_64.prf \
        /usr/local/Qt4.8/mkspecs/features/mac/objective_c.prf \
        /usr/local/Qt4.8/mkspecs/features/static.prf \
        /usr/local/Qt4.8/mkspecs/features/staticlib.prf \
        /usr/local/Qt4.8/mkspecs/features/warn_on.prf \
        /usr/local/Qt4.8/mkspecs/features/qt.prf \
        /usr/local/Qt4.8/mkspecs/features/unix/thread.prf \
        /usr/local/Qt4.8/mkspecs/features/moc.prf \
        /usr/local/Qt4.8/mkspecs/features/mac/rez.prf \
        /usr/local/Qt4.8/mkspecs/features/mac/sdk.prf \
        /usr/local/Qt4.8/mkspecs/features/resources.prf \
        /usr/local/Qt4.8/mkspecs/features/uic.prf \
        /usr/local/Qt4.8/mkspecs/features/yacc.prf \
        /usr/local/Qt4.8/mkspecs/features/lex.prf \
        /usr/local/Qt4.8/mkspecs/features/include_source_dir.prf \
        AndroidTest.pro
QMAKE_TARGET  = AndroidTest
DESTDIR       = 
TARGET        = libAndroidTest.a

####### Custom Compiler Variables
QMAKE_COMP_QMAKE_OBJECTIVE_CFLAGS = -pipe \
        -fmessage-length=0 \
        -fexceptions \
        -miphoneos-version-min=5.1 \
        -arch \
        i386 \
        -isysroot \
        /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.1.sdk \
        -fobjc-abi-version=2 \
        -fobjc-legacy-dispatch \
        -g \
        -arch \
        x86_64 \
        -Xarch_x86_64 \
        -Wall \
        -W

first: all
####### Implicit rules

.SUFFIXES: .o .c .cpp .cc .cxx .C

.cpp.o:
    $(CXX) -c $(CXXFLAGS) $(INCPATH) -o "$@" "$<"

.cc.o:
    $(CXX) -c $(CXXFLAGS) $(INCPATH) -o "$@" "$<"

.cxx.o:
    $(CXX) -c $(CXXFLAGS) $(INCPATH) -o "$@" "$<"

.C.o:
    $(CXX) -c $(CXXFLAGS) $(INCPATH) -o "$@" "$<"

.c.o:
    $(CC) -c $(CFLAGS) $(INCPATH) -o "$@" "$<"

####### Build rules

all: Makefile $(TARGET) 

staticlib: $(TARGET)

$(TARGET):  $(OBJECTS) $(OBJCOMP) 
    -$(DEL_FILE) $(TARGET)
    $(AR) $(TARGET) $(OBJECTS)
    $(RANLIB) $(TARGET)

Makefile: AndroidTest.pro  /usr/local/Qt4.8/mkspecs/qpa/macx-iphonesimulator-g++/qmake.conf /usr/local/Qt4.8/mkspecs/common/unix.conf \
        /usr/local/Qt4.8/mkspecs/common/mac.conf \
        /usr/local/Qt4.8/mkspecs/common/gcc-base.conf \
        /usr/local/Qt4.8/mkspecs/common/gcc-base-macx.conf \
        /usr/local/Qt4.8/mkspecs/common/g++-base.conf \
        /usr/local/Qt4.8/mkspecs/common/g++-macx.conf \
        /usr/local/Qt4.8/mkspecs/qpa/common/g++-base-macx-iphone.conf \
        /usr/local/Qt4.8/mkspecs/qconfig.pri \
        /usr/local/Qt4.8/mkspecs/modules/qt_webkit_version.pri \
        /usr/local/Qt4.8/mkspecs/features/qt_functions.prf \
        /usr/local/Qt4.8/mkspecs/features/qt_config.prf \
        /usr/local/Qt4.8/mkspecs/features/exclusive_builds.prf \
        /usr/local/Qt4.8/mkspecs/features/default_pre.prf \
        /usr/local/Qt4.8/mkspecs/features/mac/default_pre.prf \
        /usr/local/Qt4.8/mkspecs/features/mac/dwarf2.prf \
        /usr/local/Qt4.8/mkspecs/features/debug.prf \
        /usr/local/Qt4.8/mkspecs/features/default_post.prf \
        /usr/local/Qt4.8/mkspecs/features/mac/default_post.prf \
        /usr/local/Qt4.8/mkspecs/features/mac/x86_64.prf \
        /usr/local/Qt4.8/mkspecs/features/mac/objective_c.prf \
        /usr/local/Qt4.8/mkspecs/features/static.prf \
        /usr/local/Qt4.8/mkspecs/features/staticlib.prf \
        /usr/local/Qt4.8/mkspecs/features/warn_on.prf \
        /usr/local/Qt4.8/mkspecs/features/qt.prf \
        /usr/local/Qt4.8/mkspecs/features/unix/thread.prf \
        /usr/local/Qt4.8/mkspecs/features/moc.prf \
        /usr/local/Qt4.8/mkspecs/features/mac/rez.prf \
        /usr/local/Qt4.8/mkspecs/features/mac/sdk.prf \
        /usr/local/Qt4.8/mkspecs/features/resources.prf \
        /usr/local/Qt4.8/mkspecs/features/uic.prf \
        /usr/local/Qt4.8/mkspecs/features/yacc.prf \
        /usr/local/Qt4.8/mkspecs/features/lex.prf \
        /usr/local/Qt4.8/mkspecs/features/include_source_dir.prf
    $(QMAKE) -spec /usr/local/Qt4.8/mkspecs/qpa/macx-iphonesimulator-g++ -o Makefile AndroidTest.pro
/usr/local/Qt4.8/mkspecs/common/unix.conf:
/usr/local/Qt4.8/mkspecs/common/mac.conf:
/usr/local/Qt4.8/mkspecs/common/gcc-base.conf:
/usr/local/Qt4.8/mkspecs/common/gcc-base-macx.conf:
/usr/local/Qt4.8/mkspecs/common/g++-base.conf:
/usr/local/Qt4.8/mkspecs/common/g++-macx.conf:
/usr/local/Qt4.8/mkspecs/qpa/common/g++-base-macx-iphone.conf:
/usr/local/Qt4.8/mkspecs/qconfig.pri:
/usr/local/Qt4.8/mkspecs/modules/qt_webkit_version.pri:
/usr/local/Qt4.8/mkspecs/features/qt_functions.prf:
/usr/local/Qt4.8/mkspecs/features/qt_config.prf:
/usr/local/Qt4.8/mkspecs/features/exclusive_builds.prf:
/usr/local/Qt4.8/mkspecs/features/default_pre.prf:
/usr/local/Qt4.8/mkspecs/features/mac/default_pre.prf:
/usr/local/Qt4.8/mkspecs/features/mac/dwarf2.prf:
/usr/local/Qt4.8/mkspecs/features/debug.prf:
/usr/local/Qt4.8/mkspecs/features/default_post.prf:
/usr/local/Qt4.8/mkspecs/features/mac/default_post.prf:
/usr/local/Qt4.8/mkspecs/features/mac/x86_64.prf:
/usr/local/Qt4.8/mkspecs/features/mac/objective_c.prf:
/usr/local/Qt4.8/mkspecs/features/static.prf:
/usr/local/Qt4.8/mkspecs/features/staticlib.prf:
/usr/local/Qt4.8/mkspecs/features/warn_on.prf:
/usr/local/Qt4.8/mkspecs/features/qt.prf:
/usr/local/Qt4.8/mkspecs/features/unix/thread.prf:
/usr/local/Qt4.8/mkspecs/features/moc.prf:
/usr/local/Qt4.8/mkspecs/features/mac/rez.prf:
/usr/local/Qt4.8/mkspecs/features/mac/sdk.prf:
/usr/local/Qt4.8/mkspecs/features/resources.prf:
/usr/local/Qt4.8/mkspecs/features/uic.prf:
/usr/local/Qt4.8/mkspecs/features/yacc.prf:
/usr/local/Qt4.8/mkspecs/features/lex.prf:
/usr/local/Qt4.8/mkspecs/features/include_source_dir.prf:
qmake:  FORCE
    @$(QMAKE) -spec /usr/local/Qt4.8/mkspecs/qpa/macx-iphonesimulator-g++ -o Makefile AndroidTest.pro

dist: 
    @$(CHK_DIR_EXISTS) .tmp/AndroidTest1.0.0 || $(MKDIR) .tmp/AndroidTest1.0.0 
    $(COPY_FILE) --parents $(SOURCES) $(DIST) .tmp/AndroidTest1.0.0/ && $(COPY_FILE) --parents main.mm .tmp/AndroidTest1.0.0/ && $(COPY_FILE) --parents main.mm .tmp/AndroidTest1.0.0/ && (cd `dirname .tmp/AndroidTest1.0.0` && $(TAR) AndroidTest1.0.0.tar AndroidTest1.0.0 && $(COMPRESS) AndroidTest1.0.0.tar) && $(MOVE) `dirname .tmp/AndroidTest1.0.0`/AndroidTest1.0.0.tar.gz . && $(DEL_FILE) -r .tmp/AndroidTest1.0.0

clean:compiler_clean 
    -$(DEL_FILE) $(OBJECTS)
    -$(DEL_FILE) *~ core *.core

####### Sub-libraries

distclean: clean
    -$(DEL_FILE) $(TARGET) 
    -$(DEL_FILE) Makefile

check: first

mocclean: compiler_moc_header_clean compiler_moc_source_clean

mocables: compiler_moc_header_make_all compiler_moc_source_make_all

compiler_objective_c_make_all: main.o
compiler_objective_c_clean:
    -$(DEL_FILE) main.o
main.o: main.mm
    /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin/gcc -c $(QMAKE_COMP_QMAKE_OBJECTIVE_CFLAGS) $(DEFINES) $(INCPATH) main.mm -o main.o

compiler_moc_header_make_all:
compiler_moc_header_clean:
compiler_rcc_make_all:
compiler_rcc_clean:
compiler_image_collection_make_all: qmake_image_collection.cpp
compiler_image_collection_clean:
    -$(DEL_FILE) qmake_image_collection.cpp
compiler_moc_source_make_all:
compiler_moc_source_clean:
compiler_rez_source_make_all:
compiler_rez_source_clean:
compiler_uic_make_all:
compiler_uic_clean:
compiler_yacc_decl_make_all:
compiler_yacc_decl_clean:
compiler_yacc_impl_make_all:
compiler_yacc_impl_clean:
compiler_lex_make_all:
compiler_lex_clean:
compiler_clean: compiler_objective_c_clean 

####### Compile

####### Install

install:   FORCE

uninstall:   FORCE

FORCE: 
```

似乎缺少一些 CFLAG 或 DEFINE。知道是什么导致了这个错误吗？

# git - 如何正确地将远程 github 存储库合并到本地

> ID：10389087
> 
> 赞同：0
> 
> 时间：2012-04-30T19:03:28.513
> 
> 标签：git, github, repository

我目前在两个地点工作，并且在保持两台机器上的本地存储库最新方面遇到了问题。一旦我在一台机器上提交并推送更改到 github，如果我尝试将 repo 拉到另一台本地机器上，我不可避免地会出错。我确定我做错了什么，在两台本地机器之间实现与我的远程存储库相关的无缝工作流的正确程序是什么。这与我正在处理的 master 和分支有关。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T19:05:42.590

在开发过程中，您通常希望将本地更改重新定位到远程 HEAD。

假设您在本地没有未提交的更改，只需使用`git pull --rebase`.
如果您确实有未提交的更改，请提交它们或`git stash`它们，然后变基，然后使用`git stash pop`.

# 3d - 如何使用 matplotlib 将 3d 数据单位转换为显示单位？

> ID：10389089
> 
> 赞同：2
> 
> 时间：2012-04-30T19:03:42.740
> 
> 标签：3d, matplotlib

这可能有点疯狂，但我正在尝试使用 matplotlib v1.1.0 创建 3d 散点图的可点击图像映射。我已经阅读了如何为 2d 绘图（参见[此博客](http://hackmap.blogspot.com/2008/06/pylab-matplotlib-imagemap.html "这里")），但 3d 让我感到困惑。基本问题是我不知道如何获取 3d 轴的显示坐标。

在 2d 情况下，为了让点击点正确位于散点上方，您需要将每个散点从数据单位转换为显示单位。[使用ax.transData](http://matplotlib.sourceforge.net/users/transforms_tutorial.html)似乎相当简单。我希望这也适用于 3d 轴，但似乎不行。例如，这是我试图做的：

```
# create the plot
from mpl_toolkits.mplot3d import Axes3D
fig = pylab.figure()
ax = fig.add_subplot(111, projection = '3d')
x = y = z = [1, 2, 3]
sc = ax.scatter(x,y,z)
# now try to get the display coordinates of the first point
sc.axes.transData.transform((1,1,1)) 
```

然而，最后一行给了我一个“无效的顶点数组”错误。它仅在您将两个点的元组传递给它时才有效，例如 (1,1)，但这对于 3d 绘图没有意义。一定有一种方法可以将 3d 投影转换为 2d 显示坐标，但是在互联网上捣毁了几个小时后我找不到它。有谁知道如何正确地做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T05:32:04.263

您可以使用`proj3d.proj_transform()`将 3D 坐标投影到 2D。调用`ax.get_proj()`获取变换矩阵：

```
import pylab
from mpl_toolkits.mplot3d import Axes3D
from mpl_toolkits.mplot3d import proj3d
fig = pylab.figure()
ax = fig.add_subplot(111, projection = '3d')
x = y = z = [1, 2, 3]
sc = ax.scatter(x,y,z)

#####################    
x2, y2, _ = proj3d.proj_transform(1, 1, 1, ax.get_proj())
print x2, y2   # project 3d data space to 2d data space
print ax.transData.transform((x2, y2))  # convert 2d space to screen space
#####################
def on_motion(e):
    # move your mouse to (1,1,1), and e.xdata, e.ydata will be the same as x2, y2
    print e.x, e.y, e.xdata, e.ydata  
fig.canvas.mpl_connect('motion_notify_event', on_motion)
pylab.show() 
```

# html - 在智能手机上停止下载图像

> ID：10389090
> 
> 赞同：5
> 
> 时间：2012-04-30T19:03:44.893
> 
> 标签：html, css, image, responsive-design, smartphone

我正在为一家公司开发一个响应式网站，其中全尺寸网站有一个幻灯片，背景中有图像（用 Backstretch 完全填满屏幕）。由于图像的大小非常大（大约 300k），我正在寻找一种方法来阻止在智能手机上查看网站时加载图像。

我已经通过媒体查询应用`display: none`并`visibility: hidden`在 backstretch div 上。它隐藏了图像，但似乎仍在下载它们。有没有一种聪明的方法可以让浏览器完全忽略它们？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-01T10:14:28.873

如果您通过 CSS 设置图像，那么有一种方法。

如果您将 div 设置为 display:none 它仍然会下载，但是如果您将父 div 设置为显示 none 那么它不会加载，直到媒体查询触发设置

**CSS**

```
.parent {display:block;}
.background {background-image:url(myimage.png);}

@media only screen and (max-width:480px) {
.parent {display:none;}
} 
```

**HTML**

```
<div class="parent">
   <div class="background"></div>
</div> 
```

Tim Kadlec 的帽子提示 - [http://timkadlec.com/2012/04/media-query-asset-downloading-results/](http://timkadlec.com/2012/04/media-query-asset-downloading-results/)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-06T05:09:46.947

另一种选择是采用移动优先的方法，为移动设备定义默认样式，并在媒体查询中覆盖这些样式以获得更大的屏幕宽度。

像下面这样的东西会阻止图像被下载到移动设备上，并且还避免了对不必要的包装 div 的需要：)

HTML：

```
<div class="container">
    <!-- slideshow container -->
</div> 
```

CSS：

```
/* default to no background image */
.container {
    background-image: none; 
}

/* add it in for wider screens */
@media screen and (min-width: 500px) {
    .container {
        background-image: url(myimage.png);
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-30T19:12:01.817

`visibility`与`display`是否下载图像无关。您唯一能做的就是将所有图像作为背景图像，并使用媒体查询将它们完全排除在您的备用样式表中。

# mysql - 在单击提交按钮时提交 $_GET 变量

> ID：10389094
> 
> 赞同：0
> 
> 时间：2012-04-30T19:03:55.180
> 
> 标签：mysql, variables, button, get, submit

我正在尝试将包含用户 ID 的变量发送到另一个页面。

第一页是用户输入详细信息的表单页面，一旦单击提交按钮，详细信息就会输入到表格中，

接下来，第一页重定向到用户要求上传其显示图片的页面，并存储该图片的路径，我需要该页面上的 id，即图像上传页面上的 ID。

有人可以告诉我如何实现这一目标吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T19:08:15.563

在我看来，您实际上可能会问如何从您通过 mysql 添加的最近插入的照片中获取最后插入的 id。在这种情况下，您可以使用

```
$lastId = mysql_insert_id ($yourConnection); 
```

（详情在[http://php.net/manual/en/function.mysql-insert-id.php](http://php.net/manual/en/function.mysql-insert-id.php)）
（如果你使用 mysqli [http://www.php.net/manual/en/mysqli.insert- id.php](http://www.php.net/manual/en/mysqli.insert-id.php) )

找到身份证。在插入之后和关闭连接之前执行此操作。然后在重定向时传递 id：

```
header('Location: yournextpage.php?id=' . $lastId); 
```

然后 id 将作为 GET 变量提供：$_GET['id']

或者，如果您询问如何从表单中获取 id（假设为 PHP），请执行以下操作：

```
<form method="get" action="yournextpage.php">
    <input type="text" name="id">User ID here</input>
    <input type="submit" value="Continue"></input>
</form> 
```

第一个输入框的值将存储为 $_GET['id'] 或任何您拥有的 'name' 属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T19:09:58.467

传统上，当您重定向到第二个页面时，您会在 URL 上传递 ID。所以，而不是这个为你的重定向：

```
header('Location: /upload-image.php', TRUE, 303); 
```

你这样做（其中 $id 是当前表单的 ID）：

```
header("Location: /upload-image.php?id=$id", TRUE, 303); 
```

在上传图像页面上，您只需使用`$_GET['id']`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T19:07:21.527

传统上 $_POST 用于此目的，但如果您想使用 $_GET 您可以更改表单方法。

# ios - 选中时向表格单元格添加滑动视图

> ID：10389095
> 
> 赞同：4
> 
> 时间：2012-04-30T19:04:04.803
> 
> 标签：ios, uitableview

我有一个动态表视图，其中包含从数据库填充的单元格。当一个单元格被选中时，用户应该可以选择很少的其他选项。我知道在选择单元格时如何推送另一个视图，但我不喜欢这种图形化方法。例如，如果同一个单元格可以翻转并显示选项（然后翻转）可能会更好。或者整个单元格可以从屏幕上滑出以显示选项，或者另一个视图可以从单元格中向下滑动然后向上滑动。

这些解决方案中哪一个最容易做到？谁能指出我正确的方向？我当然不需要代码，我是来学习的，我只需要知道要看什么。到目前为止，我已经阅读了一些关于子类化 UITableViewCell 的内容，但是，老实说，我还没有得到它。任何输入将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-30T19:19:45.183

您将使用具有前景和背景视图以及 UIPanGestureRecognizer 的 UITableViewCell 子类。此识别器将触发滑动并处理前景视图的移动。

也就是说，你会在这里找到一个实现：[https ://github.com/spiliams/sparrowlike](https://github.com/spilliams/sparrowlike)

重要的位：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"CustomCell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    // Configure the cell...
    UIPanGestureRecognizer *panGestureRecognizer = [[UIPanGestureRecognizer alloc] initWithTarget:self action:@selector(handlePan:)];
    [panGestureRecognizer setDelegate:self];
    [cell addGestureRecognizer:panGestureRecognizer];

    return cell;
}

#pragma mark - Gesture recognizer delegate
- (BOOL)gestureRecognizerShouldBegin:(UIPanGestureRecognizer *)panGestureRecognizer
{
    CustomCell *cell = (CustomCell *)[panGestureRecognizer view];
    CGPoint translation = [panGestureRecognizer translationInView:[cell superview] ];
    return (fabs(translation.x) / fabs(translation.y) > 1) ? YES : NO;
}

#pragma mark - Gesture handlers

-(void)handlePan:(UIPanGestureRecognizer *)panGestureRecognizer
{
    float threshold = (PAN_OPEN_X+PAN_CLOSED_X)/2.0;
    float vX = 0.0;
    float compare;
    NSIndexPath *indexPath = [self.tableView indexPathForCell:(CustomCell *)[panGestureRecognizer view] ];
    UIView *view = ((CustomCell *)panGestureRecognizer.view).frontView;

    switch ([panGestureRecognizer state]) {
        case UIGestureRecognizerStateBegan:
            if (self.openCellIndexPath.section != indexPath.section || self.openCellIndexPath.row != indexPath.row) {
                [self snapView:((CustomCell *)[self.tableView cellForRowAtIndexPath:self.openCellIndexPath]).frontView toX:PAN_CLOSED_X animated:YES];
                [self setOpenCellIndexPath:nil];
                [self setOpenCellLastTX:0];
            }
            break;
        case UIGestureRecognizerStateEnded:
            vX = (FAST_ANIMATION_DURATION/2.0)*[panGestureRecognizer velocityInView:self.view].x;
            compare = view.transform.tx + vX;
            if (compare > threshold) {
                [self snapView:view toX:PAN_CLOSED_X animated:YES];
                [self setOpenCellIndexPath:nil];
                [self setOpenCellLastTX:0];
            } else {
                [self snapView:view toX:PAN_OPEN_X animated:YES];
                [self setOpenCellIndexPath:[self.tableView indexPathForCell:(CustomCell *)panGestureRecognizer.view] ];
                [self setOpenCellLastTX:view.transform.tx];
            }
            break;
        case UIGestureRecognizerStateChanged:
            compare = self.openCellLastTX+[panGestureRecognizer translationInView:self.view].x;
            if (compare > PAN_CLOSED_X)
                compare = PAN_CLOSED_X;
            else if (compare < PAN_OPEN_X)
                compare = PAN_OPEN_X;
            [view setTransform:CGAffineTransformMakeTranslation(compare, 0)];
            break;
        default:
            break;
    }
}
-(void)snapView:(UIView *)view toX:(float)x animated:(BOOL)animated
{
    if (animated) {
        [UIView beginAnimations:nil context:nil];
        [UIView setAnimationCurve:UIViewAnimationCurveEaseOut];
        [UIView setAnimationDuration:FAST_ANIMATION_DURATION];
    }

    [view setTransform:CGAffineTransformMakeTranslation(x, 0)];

    if (animated) {
        [UIView commitAnimations];
    }
} 
```

# iphone - 在 UIScrollView 中循环图像

> ID：10389097
> 
> 赞同：0
> 
> 时间：2012-04-30T19:04:10.700
> 
> 标签：iphone, uiscrollview

我在数组中有一些图像，并将图像添加到滚动视图中，但我想在任何给定时间在屏幕上只显示 3 个图像。屏幕两侧有箭头，中间有 3 个图像，单击箭头后，下一个图像替换第三个图像，第三个图像替换第二个图像，第二个替换第一个图像，第一个离开屏幕。

任何帮助将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T19:15:30.280

听起来您想要类似于分页的行为，除了您按滚动视图边界的一小部分而不是整个页面进行分页。

也许你可以创建一个 UIScrollViewDelegate，实现这个方法：

```
- (void)scrollViewDidEndDecelerating:(UIScrollView *)scrollView 
```

如果该位置不是图像宽度的倍数，则将该位置设置为最近的边界。如果您有太多图像要一次全部加载到滚动视图中，那么您将不得不做一些额外的技巧。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T21:58:12.407

在去年的 WWDC 上，有一个关于这个主题的会议。如果您已注册开发者计划，请查看`Session 104 - Advanced Scroll View Techniques`WWDC11。

# vb.net - 如何捕获托管我的 vb.net 类库工具的应用程序的应用程序关闭事件？

> ID：10389102
> 
> 赞同：0
> 
> 时间：2012-04-30T19:04:28.877
> 
> 标签：vb.net, arcobjects, arcmap

我有一组工具，它们作为类库构建，在主应用程序（ESRI 的 ArcMap）中托管/引用。我想管理用户在未保存/未管理的编辑待处理时可能会在主应用程序上拉下 pin 的情况。我尝试处理 Application.ThreadExit 事件但没有成功。是否有访问.Net 中托管应用程序关闭的最佳实践？这甚至可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T12:36:48.860

ArcMap 中当前打开的文档有一个事件处理程序。看看这里：

[http://help.arcgis.com/en/sdk/10.0/arcobjects_net/componenthelp/index.html#/BeforeCloseDocument_Event/000v000000pn000000/](http://help.arcgis.com/en/sdk/10.0/arcobjects_net/componenthelp/index.html#/BeforeCloseDocument_Event/000v000000pn000000/)

您可以听取`BeforeCloseDocument_Event`并开发一些逻辑来处理关闭文档的情况（关闭应用程序时关闭文档）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T21:27:42.927

由于典型的 WinForms 应用程序在主窗体关闭之前不会关闭，因此您可以让类库处理宿主应用程序的主窗体 FormClosing 事件。要防止应用程序关闭，您可以将 FormClosingEventArgs 对象的“Cancel”属性设置为 true。

# ruby-on-rails - 如何分析我的 Rails 应用程序的内存分配热点并将调用树从热点导航回我的代码？

> ID：10389105
> 
> 赞同：1
> 
> 时间：2012-04-30T19:04:35.033
> 
> 标签：ruby-on-rails, ruby, macos, memory-management

我正在调整我的 rails 应用程序以减少创建的对象数量。我一直在使用[MemProf](https://github.com/ice799/memprof)和 Ruby 1.8 MRI 并因此进行了一些改进。

现在我已经调整了完全存在于我自己的代码中的瓶颈，我需要更多的东西。虽然由第三方代码行创建的对象计数是一个很好的提示，但它并不能帮助我将我的代码与对象创建相关联。理想情况下，我能够将调用树从热点导航到我的代码。

那里有更好的工具吗？我看过[ruby​​-prof](http://ruby-prof.rubyforge.org/)，我在生产中使用 REE。

[Ruby Memory Validator](http://www.softwareverify.com/ruby-memory-hotspot.php)看起来很合理，但它需要 Windows 操作系统。

您使用什么来调整 Rails 应用程序的对象创建行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T21:01:03.137

使用分析器并生成树输出。然后可以使用[kcachegrind](http://kcachegrind.sourceforge.net/html/Home.html)对其进行分析，它不是特定于 ruby​​ 的，但提供了极好的深入细节。

查看 [性能测试 Rails 应用程序](http://guides.rubyonrails.org/performance_testing.html)

# jpa - EJB 找不到可选包，因此在其中找不到持久性单元

> ID：10389107
> 
> 赞同：1
> 
> 时间：2012-04-30T19:04:41.680
> 
> 标签：jpa, weblogic, ejb-3.0, weblogic11g, persistence.xml

**环境**

*   WebLogic 11g（随后是 Java EE 5 和 EJB 3.0）
*   一个 EJB 包含的 JAR 也包含所有持久性实体。它工作得很好（有一个使用 EJB 的 Web 应用程序，它按预期工作）。我决定将实体分离到另一层，为此我创建了另一个模块并将其部署为可选包。所以现在我有两个 JAR 文件，顺便说一下，我分别部署而不是作为一个应用程序的一部分；持久性 JAR 和 EJB JAR。

**问题**

在部署 EJB 期间，我收到以下错误（告诉我未找到可选包）：

*无法部署 EJB：来自 BLayer-1.0.0-SNAPSHOT.jar 的 StocksBean：在 BLayer-1.0.0-SNAPSHOT.jar 范围内没有名为“internalAppsPU”的持久性单元可用
。可用的持久性单位：[]*

**更多信息**

持久性模块的 JAR 清单

```
Manifest-Version: 1.0
Archiver-Version: Plexus Archiver
Created-By: Apache Maven
Built-By: bm03043
Build-Jdk: 1.6.0_18
Extension-Name: com.amir.persistence
Implementation-Version: 1.0.0
Specification-Version: 1.6 
```

持久性模块 JAR 的 META-INF 文件夹中的 persistence.XML

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence xmlns="http://java.sun.com/xml/ns/persistence"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/persistence
    http://java.sun.com/xml/ns/persistence/persistence_1_0.xsd"
    version="1.0">
    <persistence-unit name="internalAppsPU" transaction-type="JTA">
        <provider>org.eclipse.persistence.jpa.PersistenceProvider</provider>
        <jta-data-source>InternalAppsDS</jta-data-source>
        <class>com.xx.persistence.Stock</class>
        <properties>
            <property name="eclipselink.logging.level" value="FINE" />
        </properties>
    </persistence-unit>
</persistence> 
```

EJB的代码

```
package com.xx.bll;

// bunch of imports //

@Stateless(name="StocksBean", mappedName="Internal-BLayer-StocksBean")
public class StocksBean implements Stocks {

   @PersistenceContext(unitName = "internalAppsPU")
   private EntityManager em;

   // SNIP //
} 
```

EJB 的 JAR 清单

```
Manifest-Version: 1.0
Archiver-Version: Plexus Archiver
Created-By: Apache Maven
Built-By: bm03043
Build-Jdk: 1.6.0_18
Extension-List: PLayer
PLayer-Extension-Name: PersistenceLayer
PLayer-Implementation-Version: 1.0.0-SNAPSHOT
PLayer-Specification-Version: 1.6 
```

请注意以下事项：

*   **InternalAppsDS**数据源之前在 WebLogic 中进行了配置。
*   在某些时候，我的印象是**Extension-List**中的名称必须与部署为可选包的 JAR 文件的名称相匹配。但是当我阅读更多时，我意识到这是不正确的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T18:47:30.617

所以答案是使用与库中相同的扩展名。

# couchdb - CouchDB：根据时间戳返回最新类型的文档

> ID：10389110
> 
> 赞同：2
> 
> 时间：2012-04-30T19:04:53.027
> 
> 标签：couchdb, mapreduce, couchapp

我有一个系统接受来自各种独特来源的状态更新，并且每次状态更新都会创建一个具有以下结构的新文档：

```
{
 "type": "status_update",
 "source_id": "truck1231",
 "timestamp": 13023123123,
 "location": "Boise, ID"
} 
```

数据纯粹是示例，但可以理解。

现在，这些文档每隔一小时左右生成一次。一小时后，我们可能会插入：

```
{
 "type": "status_update",
 "source_id": "truck1231",
 "timestamp": 13023126723,
 "location": "Madison, WI"
} 
```

我感兴趣的只是查看每个独特来源的最新更新。我目前正在通过以下地图来做到这一点：

```
function(doc) {
  if (doc.type == "status_update") {
    emit(doc.source_id, doc);
  }
} 
```

并减少：

```
function(keys, values, rereduce) {
  var winner = values[0];
  var i = values.length;
  while (i--) {
    var val = values[i];
    if (val.timestamp > winner.timestamp) winner = val;
  }
  return winner;
} 
```

并将数据作为 reduce 查询`group=true`。这可以按预期工作，并仅提供最新更新的键控结果。

问题是它非常慢，需要我`reduce_limit=false`在 CouchDB 配置中进行。

感觉必须有一种更有效的方法来做到这一点。更新同一个文档不是一种选择——即使在这种情况下我不需要它，历史也很重要。在客户端处理数据也不是一种选择，因为这是一个 CouchApp，并且系统中的文档数量实际上非常大，并且不适合通过网络发送它们。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T01:20:38.473

CouchDB map/reduce 是*增量*的，这基本上意味着结果总是被缓存，因此对同一视图的后续请求（即使使用不同的搜索参数）“免费”（或以对数时间）运行。

但是，对于 reduce 组，这并不完全正确。有时必须在运行中重新减少部分结果。也许这就是你要打的。

取而代之的是，使用数组作为键发出这样的行的地图视图（即没有 reduce 函数）怎么样：

```
// Row diagram (pseudo-code, just to show the concept).
// Key                    , Value
// [source_id, timestamp] , null // value is not very important in this example
["truck1231", 13023123123], null
["truck1231", 13023126723], null
["truck5555", 13023126123], null
["truck6666", 13023000000], null 
```

注意源的所有时间戳如何“聚集”在一起。（实际上，他们[整理](http://wiki.apache.org/couchdb/View_collation)。）要查找 的最新时间戳`"truck1231"`，只需请求该“丛”中的最后一行。为此，请使用`limit=1`参数从末尾开始进行降序查询。要指定“结束”，请使用`{}`“高键”值作为键中的第二个元素（有关详细信息，请参阅排序规则链接）。

```
?descending=true&limit=1&startkey=["truck1231",{}] 
```

（实际上，由于您的时间戳是整数，您可以发出它们的否定，例如`-13023123123`。这将简化您的查询，但我不知道，这对我来说似乎是在玩火。）

为了生成这些类型的行，我们使用这样的 map 函数：

```
function(doc) {
  // Emit rows sorted first by source id, and second by timestamp
  if (doc.type == "status_update" && doc.timestamp) {
    emit([doc.source_id, doc.timestamp], null) // Using `doc` as the value would be fine too
  }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-01T08:02:47.300

[`_stats`您可以使用内置的 reduce 函数](http://wiki.apache.org/couchdb/Built-In_Reduce_Functions)获取每个源的最新时间戳，然后执行另一个查询以获取文档。以下是观点：

```
"views": {
  "latest_update": {
    "map": "function(doc) { if (doc.type == 'status_update') emit(doc.source_id, doc.timestamp); }",
    "reduce": "_stats"
  },
  "status_update": {
    "map": "function(doc) { if (doc.type == 'status_update') emit([doc.source_id, doc.timestamp], 1); }"
  }
} 
```

首先使用 查询`latest_update`，`group=true`然后`status_update`使用类似（正确的 url 编码）查询：

```
keys=[["truck123",TS123],["truck234",TS234],...]&include_docs=true 
```

其中 TS123 和 TS234 是 的`max`返回值`latest_update`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-30T21:28:30.507

我怀疑它之所以慢只是因为您发出了整个文档，这意味着需要存储和移动大量数据来计算您的最终值。尝试发出时间戳：

```
function(doc) {
  if (doc.type == "status_update") {
    emit(doc.source_id, [doc._id,doc.timestamp]);
  }
}

function(keys, values, rereduce) {
  var winner = values[0];
  var i = values.length;
  while (i--) {
    var val = values[i];
    if (val[1] > winner[1]) winner = val;
  }
  return winner;
} 
```

这应该可以`[id,timestamp]`为每个键提供一对，而不会太慢或不必在视图中存储太多数据。

在客户端获得标识符列表后，使用批量 GET API 发送第二个请求：

```
_all_docs?keys=[id1,id2,id3,...,idn]&include_docs=true 
```

这将在一个请求中获取所有文档。

# java - 如何使用两个 webapps 设置 Eclipse 项目，并且还能够进行热交换

> ID：10389111
> 
> 赞同：0
> 
> 时间：2012-04-30T19:04:54.370
> 
> 标签：java, eclipse, ant

如果一个项目有两个 webapps，并且两个 webapps 使用相同的 DAO、Service 等子项目，那么在 Eclipse 中设置“输出”文件夹的最佳方法是什么，以便我可以同时将两个 webapps 部署到 Jetty/Tomcat，以及也可以同时调试（使用热插拔）？

可能吗？还是我应该只将一个 webapp 设为“主要”webapp，并让辅助 webapp 使用 DAO 和 Serice 层的 Jar？（即子项目只有一个输出文件夹）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T19:47:21.447

最简单的就是在 Eclipse 中使用两个 web 项目，并让它们都依赖于服务层，dao 项目。

# perforce - 禁用 Perforce“同步进度”栏

> ID：10389116
> 
> 赞同：2
> 
> 时间：2012-04-30T19:05:09.593
> 
> 标签：perforce

我刚刚升级到 P4V 的 2012.1 版本，由于关键错误修复等。但是，这个新版本坚持每次同步时都会在单独的窗口中显示一个弹出进度条，这真的很烦人，而且往往会在不方便的时候偷走焦点。有什么方法可以停靠或禁用它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-12-08T14:01:40.100

我知道我正在重新提出一个非常古老的问题，但是您可以启用不显示进度条的并行同步。

在 `Edit > Preferences > Server Data`选择**启用并行同步下**

希望这可以帮助某人...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T15:28:42.443

对于耗时超过 5 秒的同步，会显示进度条。没有禁用它的选项，但您可以通过电子邮件发送 Perforce 支持来提交增强请求。

# c# - ProcessStartInfo - 在控制台窗口和文件中打印输出（C#）

> ID：10389119
> 
> 赞同：2
> 
> 时间：2012-04-30T19:05:17.920
> 
> 标签：c#, process, console, processstartinfo

在我的 C# 应用程序中，我使用以下 ProcessStartInfo 调用 Process.Start(myPSI)：

```
ProcessStartInfo startInfoSigner = new ProcessStartInfo();
startInfoSigner.CreateNoWindow = false;
startInfoSigner.UseShellExecute = false;
startInfoSigner.FileName = pathToMyEXE;
startInfoSigner.WindowStyle = ProcessWindowStyle.Hidden;
startInfoSigner.WindowStyle = ProcessWindowStyle.Minimized;

startInfoSigner.RedirectStandardOutput = true; 
```

这会在运行应用程序时打开一个新的控制台窗口，并且不会产生任何输出（因为它已被重定向）。我读取 exe 进程标准输出并将其写入文件。

有没有办法在这个新的控制台窗口中仍然显示信息，并将其写入文件（不修改 pathToMyEXE 可执行文件）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T19:10:28.793

此代码应该为您提供有关如何完成任务的基本概念：

```
class Tee
{
    private readonly string m_programPath;
    private readonly string m_logPath;
    private TextWriter m_writer;

    public Tee(string programPath, string logPath)
    {
        m_programPath = programPath;
        m_logPath = logPath;
    }

    public void Run()
    {
        using (m_writer = new StreamWriter(m_logPath))
        {

            var process =
                new Process
                {
                    StartInfo =
                        new ProcessStartInfo(m_programPath)
                        { RedirectStandardOutput = true, UseShellExecute = false }
                };

            process.OutputDataReceived += OutputDataReceived;

            process.Start();
            process.BeginOutputReadLine();
            process.WaitForExit();
        }
    }

    private void OutputDataReceived(object sender, DataReceivedEventArgs e)
    {
        Console.WriteLine(e.Data);
        m_writer.WriteLine(e.Data);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T19:22:30.600

您需要`RedirectStandardOutput = true`为了处理[OutputDataReceived](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&frm=1&source=web&cd=1&ved=0CCUQFjAA&url=http://msdn.microsoft.com/en-us/library/system.diagnostics.process.outputdatareceived.aspx&ei=juaeT6boIsbDgAe8qInrDQ&usg=AFQjCNFgwBUi35oswc3vJFDlVwLNsAwJ7A)事件。在事件处理程序中执行日志记录并将数据写回控制台。

```
private void OutputDataReceived(object sender, DataReceivedEventArgs e) 
{ 
         logger.log(someString);//write to the file
         Console.WriteLine(e.Data);//still display the info in this new console window
} 
```

# html - 什么是 HTML5“元数据元素”？

> ID：10389120
> 
> 赞同：3
> 
> 时间：2012-04-30T19:05:24.160
> 
> 标签：html

大家下午好

我刚刚意识到这段代码[验证](http://validator.w3.org/)为 100% 有效的 HTML5：

```
<!doctype html>
<html>
  <title>asd</title>
  <script src="Js.js"></script>
  <script>alert('1');</script>
</html> 
```

[MDN](https://developer.mozilla.org/en-US/)声明`<script>`标签的允许父元素是：

> 接受元数据元素的任何元素，或接受短语内容的任何元素。（[来源](https://developer.mozilla.org/en/HTML/Element/script)）

我想知道有人知道元数据元素是什么意思吗？*措辞内容*是什么意思？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T19:07:25.380

> 属于元数据内容类别的元素修改文档其余部分的表示或行为，设置到其他文档的链接，或传达其他带外信息。
> 
> 属于这一类的元素是`<base>`, `<command>`, `<link>`, `<meta>`, `<noscript>`, `<script>`,`<style>`和`<title>`。

来源：[https ://developer.mozilla.org/en/HTML/Content_categories#Metadata_content](https://developer.mozilla.org/en/HTML/Content_categories#Metadata_content)

`<head>`您的文档即使没有也可以验证的原因`<body>`是它们在 HTML5 中成为可选的。实际上，even`<html>`是可选的，因此以下代码也是有效的 HTML5：

```
<!doctype html>
<title>asd</title>
<script src="Js.js"></script>
<script>alert('1');</script> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T14:48:04.253

这是一个链接，定义了元数据元素和短语元素的含义。希望能弄清楚哪个是哪个。[http://www.w3.org/TR/html-markup/common-models.html#common.elem.metadata](http://www.w3.org/TR/html-markup/common-models.html#common.elem.metadata)

# java - 从 JSP 站点中选择条目，使用 SQL 和 JBDC 从数据库中删除条目

> ID：10389124
> 
> 赞同：-2
> 
> 时间：2012-04-30T19:05:34.743
> 
> 标签：java, jsp, jdbc

我需要一些帮助来创建一个删除我的 SQL 数据库中的条目/行的方法。为此，我使用 JBDC、JSP 和 java。我已经有了一个适用于我的 JSP 站点的 add 方法。问题是我不确定是否需要创建一个对象来完成这项工作。到目前为止，这是我的代码 JSP（removeMatch.jsp）：

```
 <div class="content">

    <%
        String databaseId = request.getParameter("id");
        String matchDate = request.getParameter("matchDate");
        String matchTime = request.getParameter("matchTime");
        String meetingTime = request.getParameter("meetingTime");
        String series = request.getParameter("series");
        String opponent = request.getParameter("opponent");
        String matchLocation = request.getParameter("matchLocation");

        if (matchDate != null && matchTime != null && meetingTime != null && series != null && opponent != null && matchLocation != null) {
            int intSeries = Integer.parseInt(series);
            Match match = new Match(matchDate, matchTime, meetingTime, intSeries, opponent, matchLocation);

            //cast string to long value
            long longDatabaseId = Long.parseLong(databaseId);
            match.setDatabaseId(longDatabaseId);

            //remove the match
            MatchMapper.removeMatch(match);

            //Test in console, they don't print the same values that are connected to the databaseId:
                System.out.println(databaseId);
                System.out.println(matchDate);
                System.out.println(matchTime);
                System.out.println(meetingTime);
                System.out.println(series);
                System.out.println(opponent);
                System.out.println(matchLocation);
        }
    %>

    <h3>Vælg de kampe som du vil slette og dermed fjerne fra
        databasen:</h3>
    <form action="removeMatch.jsp" method="post">
        <fieldset>
            <table border="1">
                <tr>
                <!-- TABEL PASSER IKKE OVER ENS!!!! -->

                    <th></th>
                    <th>Dato</th>
                    <th>Modstander</th>
                    <th>Spilletid</th>
                    <th>Mødetid</th>
                    <th>Spillested</th>
                    <th>Serie</th>
                </tr>
                <%
                    ArrayList<Match> matches = MatchMapper.getAllMatches();
                    for (Match m : matches) {
                %>
                <tr>
                    <td><input type="checkbox" name="id" value=<%=m.getDatabaseId()%>></td>
                    <td><input type="hidden" name="matchDate" value=<%=m.getDate()%>><%=m.getDate()%></td>
                    <td><input type="hidden" name="matchTime" value=<%=m.getMatchStart()%>><%=m.getMatchStart()%></td>
                    <td><input type="hidden" name="meetingTime" value=<%=m.getMeetingTime()%>><%=m.getMeetingTime()%></td>
                    <td><input type="hidden" name="series" value=<%=m.getSeries()%>><%=m.getSeries()%></td>
                    <td><input type="hidden" name="opponent" value=<%=m.getOpponent()%>><%=m.getOpponent()%></td>
                    <td><input type="hidden" name="matchLocation" value=<%=m.getLocation()%>><%=m.getLocation()%></td>
                </tr>
                <%
                    }
                %>
            </table>

            <a href="matchTable.jsp"><input type="submit" value="Slet Kampe" /></a>

        </fieldset>
    </form>
</div> 
```

这个想法是用户检查他想要删除的行，然后另一个java文件中的一个方法删除数据库中的行（removeMatch（）@MatchMapper.java）：

```
 public static void removeMatch(Match match) {
    Connection con = null;
    try {
        con = JDBCConnectionFactory.getInstance().getNewConnection();
        // creates empty string
        String sql = "";
        // if Match  exists in database, then prepare to call
        // a DELETE FROM table_name WHERE some_column=some_value statement (matchDate and opponent)
        if (match.isInDatabase()) {
            sql = "DELETE FROM matches WHERE ID = ?) "
                    + "VALUES (?)";
        }
        // if Match doesn't exist in database, then prepare to make an
        // return 
        else {
            System.out.println("Kamp findes ikke i databasen");
        }

        PreparedStatement prep = con.prepareStatement(sql);
        prep.setLong(1, match.getDatabaseId());
        // if the match already exists in database, then get the id (so it
        // won't create a new id)
        if (match.isInDatabase()) {
            prep.setLong(2, match.getDatabaseId());
        }
        // execute insert/update
        prep.executeUpdate();

    } catch (SQLException e) {
        e.printStackTrace();
    } finally {
        JDBCConnectionFactory.getInstance().closeConnection(con);
    }

} 
```

我可以获得正确的databaseId，但我的测试打印到控制台继续打印databaseId为“1”的行的值。可能有一种方法可以传递正确的值，但我无法弄清楚。另一个问题是 removeMatch 不会删除匹配项，事实上，它不会对数据库进行任何更改。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T14:50:39.877

首先，您的 DELETE sql 看起来是错误的：

```
sql = "DELETE FROM matches WHERE ID = ?) " // Why is there a closing parenthesis?
          + "VALUES (?)";      // Why are you using VALUES in a DELETE? 
```

我会用

```
sql = "DELETE FROM matches WHERE ID = ? "; 
```

这将消除对这些行的需要：

```
if (match.isInDatabase()) {
    prep.setLong(2, match.getDatabaseId());
} 
```

最后，为了解决您无法更改数据库的问题，我将`try`以此结束您的块：

```
con.commit(); 
```

如果您将自动提交设置为 ，则这可能不是必需的`true`。我不是要批评你，但看起来这是你第一次编写 JDBC 代码。如果是这种情况，我强烈建议您阅读[本教程](http://docs.oracle.com/javase/tutorial/jdbc/index.html)。它为您提供了 JDBC 原理的所有基本解释。

# c++ - 客户端到服务器延迟估计 - 通过 UDP

> ID：10389126
> 
> 赞同：0
> 
> 时间：2012-04-30T19:05:43.400
> 
> 标签：c++, sockets

我的作业是编写让客户端到服务器延迟估计的函数。我需要从客户端发送“几点了？”的 50 个请求。并且比从服务器接收 50 个响应（通过 getTickCount()） - 并且比计算平均值。问题是由于某种原因，第二个 recv 函数崩溃了，我不知道为什么。这是我的代码的一部分（来自我的客户）：

```
 WSAData wsaData; 
if (NO_ERROR != WSAStartup(MAKEWORD(2,2), &wsaData))
{
    cout<<"Time Client: Error at WSAStartup()\n";
}
SOCKET connSocket = socket(AF_INET, SOCK_DGRAM, IPPROTO_UDP);
if (INVALID_SOCKET == connSocket)
{
    cout<<"Time Client: Error at socket(): "<<WSAGetLastError()<<endl;
    WSACleanup();
    return;
}

sockaddr_in server;
sockaddr serverr;
int server_len = sizeof(server);
server.sin_family = AF_INET; 
server.sin_addr.s_addr = inet_addr("127.0.0.1");
server.sin_port = htons(TIME_PORT);

int bytesSent = 0;
int bytesRecv = 0;
string sendBuff;
char recvBuff[255];

        for (i=0 ; i<50;++i) 
    {   
        bytesSent = sendto(connSocket,sendBuff.c_str() , (int)strlen(sendBuff.c_str()), 0, (const sockaddr *)&server, sizeof(server));
        if (SOCKET_ERROR == bytesSent)
        {
            cout<<"Time Client: Error at sendto(): "<<WSAGetLastError()<<endl;
            closesocket(connSocket);
            WSACleanup();
            return;
        }
    }
    for (i=0 ; i<50;++i) 
    {
         bytesRecv = recv(connSocket, recvBuff, 255, 0);
        if (SOCKET_ERROR == bytesRecv)
        {
            cout<<"Time Client: Error at recv(): "<<WSAGetLastError()<<endl;
            closesocket(connSocket);
            WSACleanup();
            return;
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T20:54:52.523

您是否尝试过切换到 recvfrom？由于您使用的是 sendto，因此它的镜像功能应该更有意义。

此外，如果您在处理单个接收之前发送 50 个请求，您的延迟将不会有任何好处。您的平均值应根据多个单个发送/接收对计算

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2020-08-18T09:02:40.153

定义两个整数变量（开始，结束）在处理从服务器发送的for循环中的错误后添加此代码

```
 recvBuff[bytesRecv] = '\0'; //for handling null terminated to the answer

            if (i == 0)
            {
                start = atoi(recvBuff);
            }
            if(i == 50){
            end = atoi(recvBuff);
            }

        cout << endl << "Time Client: Delay Estimation:       " << (end - start) / 50<< " ms " << endl; 
```

# sencha-touch-2 - 使用和加载 Sencha Touch 2 的扩展（“插件”）？

> ID：10389127
> 
> 赞同：2
> 
> 时间：2012-04-30T19:05:43.787
> 
> 标签：sencha-touch-2

刚开始使用 Sencha Touch 2，需要集成 Leaflet 插件[https://github.com/VinylFox/Ext.ux.touch.Leaflet/tree/master/src](https://github.com/VinylFox/Ext.ux.touch.Leaflet/tree/master/src)。

我刚刚开始使用 Sencha，但无法在文档中找到插入和引用此类扩展的位置。这样做所需的文件结构和参考代码是什么？它只是去任何地方，我在 app.js 中引用它吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T20:56:40.550

Sencha 文档不是很明确，但有人能够阐明 Ext.Loader 以及它如何适应更大的图景。

以上面的 Leaflet 扩展为例，`Ext.Loader`它基本上是加载外行人可能称之为“插件”的工具。

[http://www.sencha.com/blog/using-ext-loader-for-your-application/](http://www.sencha.com/blog/using-ext-loader-for-your-application/)

因此，`app.js`您可以通过`Ext.Loader`以下方式加载插件：

```
Ext.Loader.setConfig({
    enabled : true,
    paths   : {
        'Ext.Leaflet': './Ext.ux.touch.Leaflet/Ext.ux.touch.Leaflet.js'
    }
});
Ext.require('Ext.Leaflet'); 
```

# c# - 使用一个 Kinect For Windows 进行两个并行进程

> ID：10389132
> 
> 赞同：5
> 
> 时间：2012-04-30T19:05:49.573
> 
> 标签：c#, parallel-processing, kinect

我正在尝试让 Microsoft Kinect for Windows 用于演示。对于骨骼跟踪，我使用了一款名为 FAAST 的软件，它似乎运行良好，但它没有任何语音识别功能。我编写了自己的软件来利用 Kinect 的语音识别功能，但我发现我无法同时运行这两个进程。使用 C# 中的代码可以解决这个问题吗？我希望它可以修改我的 C# 语音识别代码，但我不知道从哪里开始，也无法在互联网上找到帮助。

首先，有谁知道是否可以用一个 kinect 同时运行两个进程？如果是，我如何确保我的 kinect 进程允许这样做？

我不知道我的代码的哪一部分对你有用，所以我现在不会费心提供任何东西。但是，如果您需要代码示例，我很乐意提供它们。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T04:56:50.343

据我所知，一次只有一个应用程序可以通过 SDK 使用 Kinect。如果您可以将它仅用作麦克风，并且只需点击“音频输入”而不是通过 SDK，也许您可​​以解决这个问题。

另一种选择（如果你有 FAAST 的源代码）是将他们的东西和你的东西一起编译到一个应用程序中。根据收集的评论，我猜情况并非如此。

# javascript - 到节点服务器的 HTTPRequest 在 IE 8 中有效，但在 IE 7 中无效

> ID：10389136
> 
> 赞同：1
> 
> 时间：2012-04-30T19:06:14.487
> 
> 标签：javascript, node.js, httprequest

试图为拥有 IE 7 的用户找到解决方法。基本上在我的客户端 javascript 应用程序中，下面的代码向运行 node.js 的服务器发出 httprequest，如果客户端有 IE8 但它在 IE7 中不成功，我会获得成功的连接. 想法？

```
var myxmlhttp;
doRequest();

function doRequest() {
    var url = "http://someserver:8000/" + username;
    myxmlhttp = CreateXmlHttpReq(resultHandler);

    if (myxmlhttp) {
        XmlHttpGET(myxmlhttp, url);
    } else {
        alert("An error occured while attempting to process your request.");
        // provide an alternative here that does not use XMLHttpRequest
    }
}

function resultHandler() {
    // request is 'ready'
    if (myxmlhttp.readyState == 4) {
        // success
        if (myxmlhttp.status == 200) {
            alert("Success!");
            // myxmlhttp.responseText is the content that was received
        } else {
            alert("There was a problem retrieving the data:\n" + req.status.text);
        }
    }
}

function CreateXmlHttpReq(handler) {
    var xmlhttp = null;

    if (window.XMLHttpRequest) {
        xmlhttp = new XMLHttpRequest();
    } else if (window.ActiveXObject) {
        // users with activeX off
        try {
            xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
        } catch (e) {}
    }

    if (xmlhttp) xmlhttp.onreadystatechange = handler;

    return xmlhttp;
}

// XMLHttp send GEt request
function XmlHttpGET(xmlhttp, url) {
    try {
        xmlhttp.open("GET", url, true);

        xmlhttp.send(null);
    } catch (e) {}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T20:00:51.903

不确定，但您需要调整`CreateXmlHttpReq`函数以处理不同类型的 Microsoft 的 ActiveXObjects

```
function CreateXmlHttpReq(handler) {
    var xmlhttp = null;

    if (window.XMLHttpRequest) {
        xmlhttp = new XMLHttpRequest();
    } else if (window.ActiveXObject) {
        var types = ["Msxml2.XMLHTTP.6.0", "Msxml2.XMLHTTP.3.0", "Microsoft.XMLHTTP"];

        for (var i = 0; i < types.length; i++) {
            try {
                xmlhttp = new ActiveXObject(types[i]);
                break;
            } catch(e) {}
        }
    }

    if (xmlhttp) {
         xmlhttp.onreadystatechange = handler;
    }

    return xmlhttp;
} 
```

# trigger.io - 使用 TriggerIO 和 ImpactJS 的教程？

> ID：10389137
> 
> 赞同：2
> 
> 时间：2012-04-30T19:06:16.677
> 
> 标签：trigger.io

有没有人试过这个？有没有这方面的教程？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T16:08:35.307

尽管我不知道有谁在 Trigger.io 中使用 Impact，但在标准浏览器中运行的任何东西都应该可以作为 Trigger Forge 应用程序正常运行。

我已经在现有的 Android 和 iPhone 浏览器中尝试了他们的[Drop 演示](http://impactjs.com/drop/)，它运行良好：作为 Forge 应用程序也应该没问题！

# jquery - jQuery空字段验证只检查第一次出现？

> ID：10389151
> 
> 赞同：0
> 
> 时间：2012-04-30T19:06:47.643
> 
> 标签：jquery, forms, validation

我有以下验证代码，如果第一个文本输入或菜单留空，它会正确突出显示表单中的所有问题区域。

但是，如果您填写第一个文本输入并从第一个选择框中进行选择，则此验证会让您错误地通过。

我已经包含了用于搜索空文本字段和选择菜单的 jquery。但如果我需要粘贴整个内容，请告诉我。

```
// create error flag
var error = 0;

// check required text fields for empty values, add class 'problem' to cells with inputs that have problems
if (!$('#register-form .required input').val()) {
    $('.required input:text[value=""]').parent().addClass("problem");
    error++;
    console.log('errors: ' + error + '; required text input missing a value.')
}

// check required select menus for default selections, add class 'problem' to cells with select menus that have problems
if (!$('#register-form .required select option:selected').val()) {
    $('.required select option:selected[value=""]').parent().parent().addClass("problem");
    error++;
    console.log('errors: ' + error + '; required select box missing a value.')
} 
```

但是如果我（仅）满足第一个文本输入或从一组必需的菜单中选择菜单，则此验证失败。

我显然需要这个验证来检查每一个文本输入和一个单元格内部的每个 .required 类

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T19:09:49.243

```
$('#register-form .required').each(function() {

  var $input = $('input[type="text"]', this),
      $select = $('select', this);

  if(!$.trim($input.val())) {
     $input.parent().addClass("problem");
      error++;
      console.log('errors: ' + error + '; required text input missing a value.')

  }

  if(!$select.val()) {
      $select.parent().parent().addClass("problem");
      error++;
      console.log('errors: ' + error + '; required select box missing a value.'
  }

}); 
```

# php - 正则表达式将相对 URL 更改为绝对 URL

> ID：10389153
> 
> 赞同：3
> 
> 时间：2012-04-30T19:06:50.233
> 
> 标签：php, regex, preg-replace

我需要查看一个 HTML 字符串，`<img>`并将属性为相对地址的所有标签更改`src`为绝对 URL。所以这：

```
<img src="puppies.jpg"> 
```

需要变成：

```
<img src="http://sitename.com/path/puppies.jpg"> 
```

同时忽略其属性已经是绝对`<img>`的标签。`src`

我正在使用 PHP，并假设我需要通过`preg_replace()`. 帮助！谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-30T19:10:30.480

这*不是*正则表达式的工作。这是 XML/DOM 解析器的工作。

我会给 DOMDocument 一个机会。

```
$DOM = new DOMDocument;
$DOM->loadHTML($html);

$imgs = $DOM->getElementsByTagName('img');
foreach($imgs as $img){
    $src = $img->getAttribute('src');
    if(strpos($src, 'http://sitename.com/path/') !== 0){
        $img->setAttribute('src', "http://sitename.com/path/$src");
    }
}

$html = $DOM->saveHTML(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T19:13:43.897

> 这不是正则表达式的工作。这是 XML/DOM 解析器的工作。

不，不是。如果只想给每个src属性加前缀，最好用简单的字符串函数，别想xml、regex或dom解析……</p>

```
$str = str_replace('<img src="', '<img src="http://prefix', $str); 
```

之后您可以清理错误的链接（已经是绝对链接）

```
$str = str_replace('<img src="http://prefixhttp://', '<img src="http://', $str); 
```

如果可以避免，请不要使用 regexp/dom 破坏您的代码。

# php - 从安卓手机在服务器上发帖

> ID：10389155
> 
> 赞同：2
> 
> 时间：2012-04-30T19:06:54.087
> 
> 标签：php, android, latitude-longitude

它已经很久了，经过大量研究后，我无法找到我真正想要的解决方案。我制作了一个 GPS 跟踪应用程序。现在我想将我从手机获得的坐标发布到我的本地主机服务器。而且它也每 5 分钟发布一次坐标。我使用 WAMP 制作了一个服务器。

PHP 脚本

```
?php

echo 'Hello, world!';

$con = mysql_connect("localhost","root","");
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }

mysql_select_db("ric_db", $con);

$devid = $_POST["devid"];
$latitude = $_POST["latitude"];
$longitude = $_POST["longitude"];

$sql = "INSERT INTO  `ric_db`.`locations` (
`id` ,
`devid` ,
`latitude` ,
`longitude` ,
`service`
)
VALUES (
NULL ,  '$devid',  '$latitude',  '$longitude',  '$service'
);";
if (!mysql_query($sql,$con))
  {
  die('Error: ' . mysql_error());
  }

mysql_close($con);

?> 
```

Java 文件

```
@Override 

public void onCreate(Bundle savedInstanceState) 

{ 

super.onCreate(savedInstanceState); 

setContentView(R.layout.main); 

/* Use the LocationManager class to obtain GPS locations */ 

LocationManager mlocManager = (LocationManager)getSystemService(Context.LOCATION_SERVICE); 

LocationListener mlocListener = new MyLocationListener(); 

mlocManager.requestLocationUpdates( LocationManager.GPS_PROVIDER, 0, 0, mlocListener); 

} 

/* Class My Location Listener */ 

public class MyLocationListener implements LocationListener 

{ 
 Context context;
public void onLocationChanged(Location loc) 

{ 
StringBuilder sb = null;
   String result = null;
   InputStream is = null;

double latitude = loc.getLatitude(); 

    double longitude = loc.getLongitude(); 
   Toast.makeText(context, "Latitude:" +latitude + "Longitude:" +longitude, 5000).show();
  TelephonyManager telephonyManager = (TelephonyManager)context.getSystemService(Context.TELEPHONY_SERVICE);
     String Devid = telephonyManager.getDeviceId();

//this is JSON part to put your information inside it
String postData = "{\"request\":{\"type\":\"locationinfo\"},\"userinfo\":{\"Devid\":\""+Devid+"\",\"latitude\":\""+latitude+"\",\"longitude\":\""+longitude+"\"}}";

String url="http://localhost/mehul/store.php";

List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(3);
nameValuePairs.add(new BasicNameValuePair("Devid", Devid));
nameValuePairs.add(new BasicNameValuePair("latitude", Double.toString(latitude) )); 
nameValuePairs.add(new BasicNameValuePair("longitude", Double.toString(longitude))); 

HttpClient httpclient = new DefaultHttpClient();

HttpPost httppost = new HttpPost(url);

httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

HttpResponse response = httpclient.execute(httppost);

HttpEntity http_entity = response.getEntity();

Log.i("postData", response.getStatusLine().toString());
BufferedReader br = new BufferedReader(
new InputStreamReader(http_entity.getContent()));
String res = br.readLine();
System.out.println(res);

}

public void onProviderDisabled(String arg0) {
// TODO Auto-generated method stub

}
public void onProviderEnabled(String provider) {
// TODO Auto-generated method stub

}
public void onStatusChanged(String provider, int status, Bundle extras) {
// TODO Auto-generated method stub

} 
```

请一些人帮我解决这个...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T19:48:24.533

不要`localhost`在您的 url 中使用，而是使用服务器的 IP 地址。而且你的 PHP 脚本有错误的开始标签：`?php`而不是`<?php`

如果这没有帮助，请评论您会遇到什么错误...

# r - 在 R 中按名称从循环或 lapply 调用列表

> ID：10389164
> 
> 赞同：2
> 
> 时间：2012-04-30T19:07:13.697
> 
> 标签：r, list, call, lapply

我正在尝试使用“按”调用的输出，该调用很容易转换为列表……但有时列表仍然不符合我的要求

```
a = list('1'=c(19,3,4,5), '4'=c(3,5,3,2,1,6), '8'=c(1,3))

 for (i in c(1,8,4)){
    # would like to do something like this
     a[["i"]]      # calling list elements by name rather than # 
     }

 #ideally the output would be something like this

>19,3,4,5 
>1,3
>3,5,3,2,1,6 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-30T19:10:57.340

列表名称必须是字符串；它们不能是数字。您需要转换`i`为字符串。您可以使用`as.character`or`paste`并且您可以在循环开始时或在循环内部执行它。

```
a = list('1'=c(19,3,4,5), '4'=c(3,5,3,2,1,6), '8'=c(1,3))

# convert inside loop
for (i in c(1,8,4)) {
  print(a[[as.character(i)]])
}
# convert at initiation
for (i in as.character(c(1,8,4))) {
  print(a[[i]])
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T19:37:22.837

如果您只是循环遍历列表的元素以对每个元素执行某些操作（我意识到您的示例已简化），那么请考虑执行此操作的 apply 系列函数：

```
lapply(a, print) 
```

交互输入时会打印两次，因为它们打印在 内部`lapply`，然后`lapply`打印返回值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-30T19:37:32.520

您可以在没有索引的情况下遍历列表：

```
for (ai in a) {
    print(ai)
} 
```

除非您需要元素的名称，否则这很好。

# facebook - 如何知道我的 Facebook 评论框的 ID？

> ID：10389176
> 
> 赞同：1
> 
> 时间：2012-04-30T19:08:15.240
> 
> 标签：facebook, facebook-graph-api

我正在使用 Facebook 的评论社交插件。我如何知道评论框的 ID，以便我可以在打开的图表上使用它来获取评论？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T22:50:09.360

根据[文档](https://developers.facebook.com/docs/reference/plugins/comments/)，您不需要 ID，只需要 URL，因为可以在以下位置检索评论 `https://graph.facebook.com/comments/?ids=[URL WITH THE COMMENTS PLUGIN]`- 我认为您不需要该调用的访问令牌

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T23:02:06.470

除了@Igy 写的内容之外，没有评论插件的评论框ID之类的东西，正如它在[fql comments_info table doc的文档中所说的那样。](http://developers.facebook.com/docs/reference/fql/comments_info/)：

> 注意：此表包含 app_id 到旧版 fb:comments 使用的 XID 的映射。它不包含当前评论插件的地图，该插件不使用 XID。

但是，您可以使用图形对象的 id，即评论框的页面。例如，也可以使用[fql 评论表](http://developers.facebook.com/docs/reference/fql/comment/)找到评论：

```
SELECT text, xid
FROM comment
WHERE object_id="PAGE_ID" 
```

[您可以通过使用调试工具](http://developers.facebook.com/tools/debug)调试页面来找到 PAGE_ID 。我添加到选择中的*“xid”*列只是为了确认我关于*“xid”的第一点，如果你尝试这种方法来获取评论（使用*[Graph API Explorer](http://developers.facebook.com/tools/explorer)很容易）你会注意到所有*“xid”*值是空字符串（“”）。

# c# - 如何管理 C 和 C# 之间的缓冲区

> ID：10389178
> 
> 赞同：6
> 
> 时间：2012-04-30T19:08:17.157
> 
> 标签：c#, xcode, memory-management, interop, unity3d

## 问题

我有一个通过 System.Runtime.Interop 调用 C 函数的 C# 脚本。我设法调用了 C 函数，但在管理 C 和 C# 之间的缓冲区时遇到问题。

在我的情况下，C 是（数据）生产者，C# 是消费者。

我的问题是当我在 C# 中读取数据时，有时我得到正确的值，但有时我得到 NULL。

这个问题已经解决了。我在这里粘贴我的错误方法和我的正确方法与您分享。

## 背景

**C# 代码是一个统一脚本（Mono 开发的一部分），C 代码在 Xcode 中，这意味着我不能在我的 C 代码中使用 .Net 框架函数。**

## 错误的方法（不时给我NULL）

这是我的 C 代码（写入缓冲区并从缓冲区读取）：

```
static char InteropBF[INTEROP_BUFFER_SIZE];
static int mutex = 0;
// for the c code to put its message in buffer
void PutToBuffer(char* name, char* content)
{
    while (mutex>0);
    mutex++;
    strcat(InteropBF, name);
    strcat(InteropBF, ",");
    strcat(InteropBF, content);
    strcat(InteropBF, ",");
    printf("Interop Buffer: %s\n", InteropBF);
    mutex--;
}

// for the C# code to poll and read from C
void* ReadFromBuffer(void* temp)
{
    while (mutex>0);
    mutex++;
    strcpy(temp, InteropBF);
    // memcpy(temp, InteropBF, INTEROP_BUFFER_SIZE);
    strcpy(InteropBF, "");
    mutex--;
    return temp;
} 
```

我将函数 ReadFromBuffer() 暴露给 C#：

```
[DllImport ("CCNxPlugin")]
public static extern IntPtr ReadFromBuffer(IntPtr temp); 
```

然后，我这样调用函数：

```
 IntPtr temp = Marshal.AllocCoTaskMem(8912);
        CCN.ReadFromBuffer(temp);
        string news = Marshal.PtrToStringAuto(temp);
        if(news != "")
        {
            print (news);
        }
        Marshal.FreeCoTaskMem(temp); 
```

使用此代码，我有时会获得正确的缓冲区内容，但更频繁地我会从 Marshal.PtrToStringAuto 函数中获得 NULL。

## 正确的方法（非常感谢大家！）

我想粘贴我在这里找到的工作代码和参考资料——

C函数：

```
struct bufnode
{
    char* name;
    char* content;
    struct bufnode *next;
};

struct bufnode* bufhead = NULL;
struct bufnode* buftail = NULL;
// for the c code to put its message in buffer
void PutToBuffer(char* name, char* content)
{
    struct bufnode *temp = malloc(sizeof(struct bufnode));
    temp->name = malloc(256);
    temp->content = malloc(256);
    strcpy(temp->name,name);
    strcpy(temp->content,content);
    temp->next = NULL;

    if (bufhead == NULL && buftail == NULL) {
        bufhead = temp;
        buftail = temp;
    }
    else if(bufhead != NULL && buftail != NULL){
        buftail->next = temp;
        buftail = temp;
    }
    else {
        printf("Put to buffer error.\n");
    }    
}

// for the C# code to poll and read from C
struct bufnode* ReadFromBuffer()
{
    if (bufhead != NULL && buftail != NULL) {
        // temp->name = bufhead->name;
        // temp->content = bufhead->content;
        // temp->next = NULL;
        struct bufnode* temp = bufhead;
        if (bufhead == buftail) {
            bufhead = NULL;
            buftail = NULL;
        }
        else {
            bufhead = bufhead->next;
        }

        return temp;
    }
    else if(bufhead == NULL && buftail == NULL)
    {
        return NULL;
    }
    else {
        return NULL;
    }
} 
```

C# 包装器：

```
[StructLayout (LayoutKind.Sequential)]
public struct bufnode 
{
    public string name;
        public string content;
        public IntPtr next;
}

[DllImport ("CCNxPlugin")]
public static extern IntPtr ReadFromBuffer(); 
```

在 C# 中调用函数：

```
 CCN.bufnode BufNode;
        BufNode.name = "";
        BufNode.content = "";
        BufNode.next = IntPtr.Zero;

        IntPtr temp = CCN.ReadFromBuffer();
        if(temp != IntPtr.Zero)
        {
            BufNode = (CCN.bufnode)Marshal.PtrToStructure(temp, typeof(CCN.bufnode));
            print(BufNode.name);
            print(BufNode.content);
            Marshal.FreeCoTaskMem(temp);
        } 
```

## 概括

1.  char[] 似乎不是 C 和 C# 之间的良好缓冲区（至少在我使用 Unity-Mono 和 Xcode 的情况下）。我的建议是在结构中组织数据并将结构作为参数或作为返回值传递给 C#。我找到了关于传递类和结构的很好的文档，但我还没有找到任何关于单独传递 char 数组的信息。所以我想将 char[] 包装在结构或类中总是更好。
2.  AC struct 可以编组为 C# 类或 C# 结构。将包装**类**作为参数传递给非托管函数将起作用。将包装**结构**作为参数传递给非托管函数也可以。从非托管函数返回指向**结构的指针是可以的。****从非**托管函数返回指向**类**的指针是不行的。（找到了一个很棒的教程：[http](http://www.mono-project.com/Interop_with_Native_Libraries#Summary) ://www.mono-project.com/Interop_with_Native_Libraries#Summary ）

 *** * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T19:25:36.040

您正在传回一个堆栈变量。该变量可以在从方法返回时在 C/C++ 中“收集”或释放——这将在它到达 PtrToStringAuto 时随机导致内存损坏。这可以解释为什么它*有时*为空。您需要分配传回 C# 代码的内存，并且该代码需要释放内存（或者 C/C++ 需要以某种方式执行此操作）。

您可以在 c/c++ 中使用 CoTaskMemAlloc 和在 C# 中使用 Marshal.FreeCoTaskMem 释放它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T20:20:14.187

尝试传入 ac# 字符串类型并`SysAllocString`在 C++ 中使用：

```
// for the C# code to poll and read from C
void ReadFromBuffer(BSTR* pstrRet)
{
    while (mutex>0);
    mutex++;

    *pstrRet=SysAllocString(InteropBF)

    strcpy(InteropBF, "");
    mutex--;
}

//calling from c# 
string news ="";
ReadFromBuffer(out news);
if(news != "")
{
    print (news);
} 
```

否则，您可以尝试在 c# 中为您的返回值创建一个足够大小的字节数组，并将指向内存的底层指针传递给您的 xcode。像这样：

```
// for the C# code to poll and read from C
unsigned int ReadFromBuffer(char* pstrRet, unsigned int cbSize)
{
    unsigned int uiRet;

    while (mutex>0);
    mutex++;

    uiRet=strlen(InteropBF);

    if (uiRet > 0 && cbSize > uiRet) 
    {    
        strcpy(pstrRet, InteropBF);
    }
    else //error
    {        
        uiRet=0;
    }

    strcpy(InteropBF, "");
    mutex--;

    return uiRet;
}

//calling from c# 
[DllImport ("CCNxPlugin")]
public static extern UInt32 ReadFromBuffer(IntPtr pData, UInt32 cbData);
.
.
. 

String news;
UInt32 cbData=INTEROP_BUFFER_SIZE; //you need to define this in c# ;)
Byte[]  abyData=new byte[cbData];

try
{     
    //kindly request GC gives us a data address & leaves this memory alone for a bit
    GCHandle oGCHData = GCHandle.Alloc(abyData, GCHandleType.Pinned);
    IntPtr pbyData = oGCHData.AddrOfPinnedObject();

    UInt32 cbCopied=ReadFromBuffer(pbyData, cbData);

    oGCHData.Free();

    if(cbCopied > 0)
    { 
        System.Text.Encoding enc = System.Text.Encoding.ASCII;
        news = enc.GetString(abyData,0,cbCopied);
    }
}
catch (Exception e)
{
    System.Diagnostics.Debug.WriteLine(e);
} 
```**

# java - 关于Eclipse中生成的serialVersionUID

> ID：10389180
> 
> 赞同：11
> 
> 时间：2012-04-30T19:08:23.603
> 
> 标签：java, eclipse, serialversionuid

有没有办法在 Eclipse 中串行生成 serialVersionUID？串行我的意思是，如果一个可序列化类的serialVersionUID = 1L，那么当我生成另一个类的serialVersionUID 时，这将是serialVersionUID = 2L。

如果我手动指定 1L、2L、3L 等，这会产生任何问题吗？

Eclipse 提供了一个选项来选择“添加生成的序列版本 ID”，这个选项可以安全选择吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-30T19:13:18.697

不，它不会在您的两种情况下产生任何问题：

*   您可以手动增量指定它
*   您可以让 Eclipse 为它们分配随机生成的值
*   您可以将它们全部保留`1L`用于不同的课程

序列 UID 的目的是禁止在不同版本中对相同的类进行序列化和反序列化，尤其是在没有前向兼容性的情况下（例如，新版本的类不能通过以前的定义进行序列化/反序列化）。

这种情况很少发生，尤其是在处理您自己的项目时，这些项目不属于依赖序列化的大型框架的一部分。所以你可以安全地做任何你想做的事。

您希望同一类具有不同序列的情况是，当您正在更新一个类并且您希望使用 SAME 类的先前声明来禁止它的序列化时。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T19:13:34.190

让我反过来回答你的问题：

添加生成的序列号版本号...安全吗？答案：是的

如果您手动指定 1L、2L、3L，那就是个问题：没有比将它们全部设为 1 或任何其他数字更多的问题

串行生成序列 ID：答案是没有内置机制来执行此操作。您问这个问题的事实使我相信您不知道 serialVersionUID 的用途。即使您已经阅读了它的作用，您也应该再次阅读它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-01T01:05:13.677

你根本不应该这样做。这个想法是`serialVersionUID`通过遵守对象序列化规范的对象版本控制部分中的规则，在类的演变过程中尽可能长时间地保持常量。

你的“编程风格”与它无关。这是将事物用于其设计目的的问题。它不是为您使用它的目的而设计的。源代码控制系统可以为您做到这一点。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-30T19:12:55.767

java序列化支持所有类都具有相同的serialVersionUID

这用于版本控制，以便旧定义的序列化对象与新版本不兼容

查看[http://java.sun.com/developer/technicalArticles/Programming/serialization/](http://java.sun.com/developer/technicalArticles/Programming/serialization/)了解详情（向下滚动到“版本控制”）

# php - jquery mobile发布表单内容但不会打印

> ID：10389184
> 
> 赞同：1
> 
> 时间：2012-04-30T19:08:39.297
> 
> 标签：php, jquery, forms, mobile, submit

我的代码有一个奇怪的问题。我正在尝试为用户创建一个表单来编辑他们的个人资料信息。这是一个简单的形式，如下面的源代码。

我使用模板，每个页面都将输入 index.php 并构建页面。

问题是这样的：我在索引中放置了一个 print_r 来打印 _POST 以查看是否发布了任何内容。但是当我提交表单时，什么都没有发布。当我将 print_r 放在模板中时，print_r 突然出现，好像没有任何问题并且表格已发布。:S

我尝试将操作设置为不同的页面，但没有效果。

我也有一个登录表单，出于某种原因，该表单可以正常工作。但是当我将它放在 edit_profile 模板中时，它会停止工作。

这是 edit_profile 页面的源代码。

```
<!DOCTYPE html>
<html>

    <head>

        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
        <title>edit profile</title>

        <link rel="stylesheet" href="/style/jquery.mobile-1.0.1.css">
        <link rel="stylesheet" href="/style/main.css">

        <script src="/js/jquery-1.7.1.js"></script>
        <script src="/js/jquery.mobile-1.0.1.min.js"></script>
        <script src="/js/global.js"></script>

    </head>

    <body>

       <section data-role="page" id="edit_profile">

            <header data-role="header" id="header" data-position="fixed">
                <h1>edit profile</h1>

                <nav id="main_navigation" data-role="navbar">
                    <ul>
                        <li><a href="/"  >Home</a></li>
                        <li><a href="/news.html"  >News</a></li>
                        <li><a href="/about.html"  >about</a></li>
                        <li><a href="/contact.html"  >Contact</a></li>
                    </ul>
                </nav>

            </header>

            <div data-role="content">

               <h2>edit profile</h2>

               <form action="/account/edit_profile.html" method="post" >
                   <input type="hidden" name="edit" value="edit" />
                   <label for="username">Username:</label>
                   <input type="text" name="username" id="username" value="some username"/>

                   <label for="password">Password:</label>
                   <input type="password" name="password" id="password"/>

                   <label for="email">E-mail:</label>
                   <input type="email" name="email" id="email" value="example@example.com"/>

                   <label for="firstname">Firstname:</label>
                   <input type="text" name="firstname" id="firstname" value="some firstname"/>

                   <label for="lastname">Lastname:</label>
                   <input type="text" name="lastname" id="lastname" value="some lastname"/>

                   <label for="city">City:</label>
                   <input type="text" name="city" id="city" value="some city"/>

                   <label for="adres">Adress:</label>
                   <input type="text" name="adres" id="adres" value="some adres"/>

                   <label for="zip">Zip:</label>
                   <input type="text" name="zip" id="zip" value="some zip"/>

                   <div data-role="controlgroup" data-type="horizontal">
                       <a href="/account.html" data-role="button" data-icon="back">Back</a>
                       <button type="submit" data-icon="check">Save</button>
                   </div>

               </form>

             </div>

       <footer data-role="footer" data-position="fixed">

           <div data-role="controlgroup" data-type="horizontal">
               <a href="/" data-role="button" data-icon="home">Home</a>
               <a href="/account.html" data-role="button" data-icon="grid">Account</a>
               <a href="/logout.html" data-role="button" data-icon="gear" >Logout</a>
           </div>

        </footer>

    </section>

   </body>
   </html> 
```

希望你们能帮助我。如果有任何问题，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T19:28:47.570

您的 HTML 看起来不错，它应该是 jQM 就绪的。我使用过 jQM/php/MySQL，所以我知道它的一些怪癖。

我建议现在通过在工作时将您的评论/$_POST 检查写入文本文件来避免该问题（在 php 脚本中调用一个执行此操作的函数，这是我通常采用的方式），以防止类似这样的问题。我发现 jQM 在隐藏 HTML 并显示自己的样式时动态加载页面内容存在可变问题。有时页面内容是直接从 DOM 加载的，完全避免了你的 php 脚本......

# objective-c - UIButton 不可点击

> ID：10389185
> 
> 赞同：3
> 
> 时间：2012-04-30T19:08:50.710
> 
> 标签：objective-c, ios, cocoa-touch, uibutton

我在其他帖子中搜索过，但找不到解决方案。

我有一个无法点击的 UIButton。当我点击时，它不会变暗。问题不在于选择器方法。

有人能帮我吗？！这是代码：

```
- (void)drawRect:(CGRect)rect
{

    UIScrollView *scroll = [[UIScrollView alloc] initWithFrame:CGRectMake(0, 0, 320, 436)];

    UIView *detailsView = [[UIView alloc] init];

// I have other components here and after the UIButton

    UIButton *btnOpenPDF = [UIButton buttonWithType:UIButtonTypeCustom];
    [btnOpenPDF setBackgroundImage:[UIImage imageNamed:@"btnVisualizarPdf"] forState:UIControlStateNormal];
    [btnOpenPDF setFrame:CGRectMake(35, totalHeight, 249, 30)];
    btnOpenPDF.userInteractionEnabled = YES;
    [btnOpenPDF addTarget:self action:@selector(openPdf:) forControlEvents:UIControlEventTouchDown];

    [detailsView addSubview:btnOpenPDF];

    [scroll addSubview:detailsView];

    [self addSubview:scroll];

} 
```

上面的代码在 UIView 中，它通过 UIViewController 通过方法 -loadView() 调用。

下面是openPdf的方法：

```
- (IBAction)openPdf:(id)sender{
// Creates an instance of a UIWebView
    UIWebView *aWebView = [[UIWebView alloc] initWithFrame:CGRectMake(0, 0, 320,450)];

// Sets the scale of web content the first time it is displayed in a web view
    aWebView.scalesPageToFit = YES;
    [aWebView setDelegate:self];

//Create a URL object.
    NSURL *urlString = [NSURL URLWithString:[NSString stringWithFormat:@"http://portalarp.com.br/portal/%@",[[[[[[[delegateFunctions products] objectAtIndex:[delegateFunctions selectedProductIndex]] objectForKey:@"ata"] objectForKey:@"nm_arquivo"] objectForKey:@"text"] stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]] stringByReplacingOccurrencesOfString:@"\t" withString:@""]]];

//URL Requst Object
    NSURLRequest *requestObj = [NSURLRequest requestWithURL:urlString];

//load the URL into the web view.
    [aWebView loadRequest:requestObj];

    [self addSubview:aWebView];
    [aWebView release];
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-30T19:13:46.407

`drawRect`放置此代码是一个奇怪的地方。它被调用来绘制视图，并且可以想象被调用很多——你不应该在那里构建视图。例如，`drawRect`当您触摸按钮时可能会调用（重绘它）

如果这是在 UIView 中，则可能`init`是放置此代码的更好位置。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-02T07:25:58.013

我认为问题是滚动视图..没有转发触摸事件..尝试执行以下操作：

```
scroll.userInteractionEnabled = YES;
scroll.exclusiveTouch = YES; 
```

# android - 在屏幕上对角线布局视图

> ID：10389189
> 
> 赞同：0
> 
> 时间：2012-04-30T19:09:10.260
> 
> 标签：android, android-layout

我目前已经实现了一个自定义 ViewGroup 类，它试图在屏幕上均匀地和对角地定位项目（带有可绘制对象的按钮）。

不幸的是，如果项目太大，它们往往会重叠以确保所有内容都适合屏幕。

我希望有一种更简单的方法可以使用已经存在的布局（API8+）来实现这一点，或者如果有一些简单的东西，我可以在我的 ViewGroup 类中进行更改以使子视图更小以避免重叠。（比如让每个子视图都需要精确的大小，均匀布局不重叠）

这是我的 onMeasure 课程（没有做任何特别的事情。让孩子们自己测量）

```
@Override
    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) { 

        measureChildren(widthMeasureSpec, heightMeasureSpec);

         int width = MeasureSpec.getSize(widthMeasureSpec);
         int height = MeasureSpec.getSize(heightMeasureSpec);

        setMeasuredDimension(width, height);
    } 
```

编辑：如果我更改 onMeasure 以手动将孩子测量到一定的宽度/高度，他们会被剪裁。看起来子视图（或其可绘制对象）实际上并未自行缩放以适应测量值。

```
@Override
    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {

        int width = MeasureSpec.getSize(widthMeasureSpec);
        int height = MeasureSpec.getSize(heightMeasureSpec);

        int newChildWidth = width / getChildCount();
        int newChildHeight = height / getChildCount();

        final int size = getChildCount();
        for (int i = 0; i < size; ++i) {
            View child = getChildAt(i);

            child.measure(MeasureSpec.EXACTLY | newChildWidth, MeasureSpec.EXACTLY | newChildHeight);
        }

        setMeasuredDimension(width, height);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T19:45:54.957

到目前为止，您的想法是正确的，如果您希望子视图精确地对角布局，那么封闭的工作就是`ViewGroup`为它们提供`MeasureSpec`实现这一点的方法，并`MeasureSpec.EXACTLY`告诉每个子视图有多大。您也可以将其替换为`MeasureSpec.AT_MOST`允许内容较少的孩子更小，他们永远不会超过您提供的大小，而`EXACTLY`每次都使它们的大小相同。

您现在描述的问题是如果没有一些`View`定制就无法真正解决的问题。Android 视图完全按照“将视图调整为其内容的大小”而不是“将内容调整为视图的大小”的范式运行。因此，如果您告诉 a`Button`小于绘制其文本/图像内容所需的空间，它将简单地剪辑。该规则的一个例外是`ImageView`。如果您想规避这一点，您将需要`Button`根据给定的规范自定义以调整文本大小和可绘制`onMeasure()`

另一个可能的选择`ViewGroup`是使用子静态转换，因为无论如何您都在进行自定义。通过调用`setStaticTransformationsEnabled(true)`您的`ViewGroup`和覆盖`getChildStaticTransformation()`，您可以将比例因子应用于希望大于您的特定大小的每个子视图。这种转换类似于动画的工作方式，因此整个视图将按比例缩小。

高温高压

# java - 长时间等待后socket连接失败

> ID：10389193
> 
> 赞同：0
> 
> 时间：2012-04-30T19:09:23.603
> 
> 标签：java, sockets

给定 ip 和端口的套接字连接失败的一些原因是什么？有没有办法解决这个问题？在某些情况下，我会遇到套接字连接失败。但我等了几分钟后才知道。有没有办法找出连接是否会在更短的时间内失败？

```
try{
        socketConn = new Socket(this.ip, this.port);
    }catch (IOException e){
        System.err.println("Failed creating a Socket Connection in Peer constructor for " +id +
                " with IP: " +ip+" and on port: "+port);

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T19:48:29.833

从一个未连接的开始，`Socket`并在其方法上`SocketAddress`提供一个超时值。`long``connect()`

设置它实际上非常重要，否则您的连接操作将无限期阻塞（默认情况下）

[套接字 Javadoc](http://docs.oracle.com/javase/1.5.0/docs/api/java/net/Socket.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T19:43:03.353

连接超时经常发生服务器响应缓慢。检查网络连接和服务器。

# perl - 我认为在 perl 中的 Telnet 输入缓冲区问题

> ID：10389195
> 
> 赞同：3
> 
> 时间：2012-04-30T19:09:27.277
> 
> 标签：perl, stdin, telnet

所以在过去的一个月里，我一直在编写一个脚本来对 HP procurve 开关进行主清除。我与惠普内部人员交谈过，他们使用的系统与我完全不同，所以他们没有帮助。我相信我已经弄清楚了。这是我的脚本我应该做的：

1.  建立 telnet 连接到交换机
2.  通过 SNMP 陷阱重新启动交换机到连接的 APC
3.  等待来自交换机的输入以识别它已准备好访问扩展引导 ROM
4.  访问扩展 bootrom。
5.  将目录更改为紧凑型闪存卡
6.  在交换机上运行 list 命令并将其转储到数组
7.  对阵列中的每个项目运行 foreach 以确定什么是固件、文件和文件夹 A) 忽略固件 B) 将每个文件添加到主删除阵列 C) 对文件夹中的文件运行类似的 foreach 并将它们添加到主删除数组，然后是文件夹（用于删除目的）
8.  运行 foreach 删除主删除数组中的所有项目以清除开关
9.  重新启动并在交换机上设置基本信息。

**更新**

好的，所以我无法`$telnet->buffer_empty;`100% 地工作，所以我决定调用第二个列表命令并将其转储到垃圾文件中。下面是我的脚本，到目前为止，它正在我测试过的 10 个开关上运行。我的夜班将打破开关并测试这个重置脚本。

对于任何有兴趣的人，这个脚本被用在 HP Procurve 交换机上，根据我的研究，它适用于大多数人，但不是全部。

```
#!/usr/bin/perl
$| = 1;

use Net::Telnet;
use Net::SNMP;
use strict;
use CGI;

#variabls for power, connections and systemname
my $power_host     = ('Power-APC');
my $power_port     = ('Power-APC-Port');
my $system_name    = ('system-name');
my $console_server = ('Console-Server');
my $console_mgmtA  = ('Console-ManagementA');
my $match;
my ($garbage, $trash);
my $master_value;
my $telnet;
my @array;
my @master_array;

checkForNull("Console-Server",$console_server,1);
checkForNull("Console-ManagementA",$console_mgmtA,1);
checkForNull("Power_Host",$power_host,1);
checkForNull("Power_Port",$power_port,1);
checkForNull("System_Name", $system_name,1);

#Starting reset script
print("Please wait while $system_name resets.\n");
print("Please do not interact with any consoles open to this device\n");
print("The reset will take approximitly 5 minutes\n");

#establishing Telnet connection
$telnet = new Net::Telnet (Timeout=>120, Errmode=>'return', Port => $console_mgmtA);

$telnet->open($console_server);
sleep(1);

#executing reboot via SNMP
print("Deleting configuration files.\n");

   my ($snmp, $error) = Net::SNMP->session(
      -hostname  => shift || "$power_host",
      -community => shift || 'private',
      -port      => shift || 161
   );
   if (!defined($snmp)) {
      printf("ERROR: %s.\n", $error);
      exit 1;
   }
   my $sysx = ".1.3.6.1.4.1.318.1.1.12.3.3.1.1.4.$power_port";
   my $result = $snmp->set_request(
      -varbindlist => [$sysx, INTEGER, '3']
   );
   $snmp->close;

$telnet->waitfor(match=> '/Profiles/');
$telnet->cmd(string => '0', prompt => '/=>/');
#shift to compact flash card
$telnet->cmd (string=> 'cd cfa0', prompt => '/=>/');
my $garbage_output = $telnet -> cmd (string => 'ls', prompt => '/=>/');
$telnet->buffer_empty;

#propigates primary array with file list
undef @array;
@array = $telnet->cmd(string => 'ls', prompt => '/=>/');

#determines what should be deleted
foreach my $item (@array) {
    #cleans up the files for use in the if statement
   chomp ($item);
   #determines if it's a folder, passes folder name to sub
   if ($item=~ /\//) {
       subfolders ($item);
       #adds folder AFTER files in dir to ensure deletion
       push(@master_array, "rmdir $item");
   }
   #finds and ignores the primary and secondary firmware

   elsif ($item =~ /btm.swi|secondary.swi/) {
   }
   else {
    #adds all files to the master deletion list
    push(@master_array,"rm $item");
   }

#deletes all files listed in the master array
foreach $master_value (@master_array){
$telnet -> print ("$master_value");
}

#reboot switch
$telnet->print('boot');
$telnet->put(chr(13));
sleep(120);

#looking for ready screen
$telnet->waitfor(match=> '/continue/');
sleep (1);
$telnet->put(chr(13));
sleep (1);
$telnet->put(chr(13));
$telnet->waitfor(match=> '/continue/');
$telnet->put(chr(13));
$telnet->print('config');
$telnet->put(chr(13));
$telnet->print("hostname $system_name\n");
$telnet->print('lldp run');
$telnet->put(chr(13));
$telnet->print('wr mem');
$telnet->put(chr(13));
$telnet->print('boot');
$telnet->put(chr(13));
$telnet->print('y');

print("$system_name has been reset to factory settings.\n");
}

#add all files in folders to master deletion list
sub subfolders {
 my @subfolder_contents;
 my $subfolder = $_[0];
 my $file;

 @subfolder_contents = $telnet ->cmd(string => "ls $subfolder", prompt => '/=>/');
 foreach $file (@subfolder_contents){
  chomp ($file);
    push(@master_array, "rm $subfolder$file");
 }
};

sub checkForNull {
    my $name = $_[0];
    my $param = $_[1];
    my $required = $_[2];

    if($param eq "") {
        if ($required == 1) {
            print("\nSorry, no '$name' specified for this device, cannot continue.\n");
            exit 1;
        }
    }
# else {
 #       print("\n$name: $param\n");
  #  }
}

exit; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T05:04:43.330

有一个`$telnet->buffer_empty`可以满足您的要求，但我认为这不是您的问题（尽管尝试一下）。

您确定您的提示不会太快匹配吗？换句话说，是否有一些命令输出恰好也包含'=>'？最好的调试方法是 through `$telnet->dump_log('/tmp/some_file')`，它为您提供进出连接的所有内容的十六进制转储（更重要的是，读取和写入 Net::Telnet 的确切顺序可以让您知道它是否匹配以及在哪里匹配太早了）。

如果您过早地与 '=>' 提示匹配，请尝试使正则表达式更严格一些。添加 '\z' 来检查字符串的结尾将是一个好的开始，但如果在 '=>' 之后有一个空格（如 '/=> ?\z/' 之类的东西），请小心。（但是，当然，'\z' 并不是真正的“结束”，而是 Net::Telnet 迄今为止收集到的任何内容。因此，如果输出中间的一个不幸的数据包恰好以 '=> ' 结尾，那么它也会打破更严格的正则表达式）

此外，您的长序列“打印”看起来很可疑，因为 print 在返回之前不会等待提示。更好的做法是始终设置 Net::Telnet 对象的“提示”字段，然后使用 ->cmd 将在返回之前等待提示。

# c++ - 我可以修改并排程序集搜索顺序吗？

> ID：10389197
> 
> 赞同：2
> 
> 时间：2012-04-30T19:09:46.717
> 
> 标签：c++, windows, visual-studio-2005, side-by-side, winsxs

我有一个 Windows、C++ 软件项目（使用 Visual Studio 2005、SP1 构建），它具有以下（简化的）文件布局：

```
{App. Root Directory}
|-- bin
|   |-- Microsoft.VC80.CRT
|   +-- Microsoft.VC80.MFC
+-- utils 
```

**bin**和**utils**目录中都有各种可执行文件。**这些可执行文件中的每一个都依赖于我们存储在bin**中的并行程序集（C++ 运行时 DLL），但出于各种原因，我们将它们隔离到这些单独的文件夹中（例如，**utils**文件夹中的 exe 是补充工具到我们的主要应用程序，并且不经常运行）。这种文件组织的直接结果是，**utils**文件夹中的应用程序无法在尚未安装适当的并行程序集的系统上运行（它们失败并显示通常*的“系统无法执行指定的程序”*错误信息）。

**我的问题：**有没有办法告诉**utils**文件夹中的应用程序明确地在`..\bin`文件夹中查找适当的并排程序集？Microsoft的[Assembly Searching Sequence](http://msdn.microsoft.com/en-us/library/aa374224.aspx)文章没有提到这是否可能。有没有一种聪明的方法可以解决这些应用程序的运行时要求？

**我看到的潜在选择：**

1.  将并行程序集的副本放入**utils**文件夹中。这可以在运行时完成（以防止我们的应用程序安装包膨胀），但看起来有点脏。
2.  静态链接运行时 DLL。***我不想这样做！***
3.  让最终用户安装通常的可再发行包。***我也不想这样做。***

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T20:42:33.443

我的第一反应是，从`.\bin`文件夹中分离实用程序有什么实际好处？我自己有强迫症倾向，我理解整洁的感觉，但是一旦可以明显地看到它对您部署应用程序的能力产生负面影响，继续练习似乎有点毫无意义。

也就是说，这实际上在技术上是可行的。为此，您可以使用 app.config 文件中的[探测 privatePath](http://msdn.microsoft.com/en-us/library/windows/desktop/aa374182%28v=vs.85%29.aspx)元素。应用程序配置文件的工作方式与应用程序清单类似，但它们不能作为资源嵌入：在与 exe 相同的文件夹中创建一个文件，使用 exe 的全名（包括 exe 扩展名）并附加`.config`.

```
<!-- acme.exe.config -->
<configuration>   
  <windows>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
      <probing privatePath="bin;..\bin" />
    </assemblyBinding>
  </windows>
</configuration> 
```

有许多警告使该解决方案可能不可行 - 任何指定自己的依赖程序集的 dll 都需要具有包含`probing privatePath`元素的应用程序配置文件。此外，`probing`仅在 Windows NT 6.0 (Vista) 中添加了对节点的支持，因此如果您仍需要以 XP 为目标，则此解决方案不合适。

# sql - sql / sqlplus - 如何查看架构

> ID：10389203
> 
> 赞同：1
> 
> 时间：2012-04-30T19:10:06.313
> 
> 标签：sql, sqlplus

我只是想知道 - 是否有命令可以查看我创建的数据库的架构？

*   使用 SqlPlus

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T05:15:54.097

`DESCRIBE`将是一个不错的选择。

[http://docs.oracle.com/cd/B19306_01/server.102/b14357/ch12019.htm](http://docs.oracle.com/cd/B19306_01/server.102/b14357/ch12019.htm)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T20:21:26.497

Oracle 有许多存储所谓的“数据字典”的视图。几乎所有的数据库对象都存储在这里，可以使用常规 SQL 进行查询。

[Oracle 的网站上](http://www.oracle.com/pls/tahiti/tahiti.catalog_views)有一个很好的数据字典视图列表。

对于初学者，请查看 USER_ALL_TABLES 视图或 DBA_ALL_TABLES 视图。

# vim - 显示当前 键设置？

> ID：10389205
> 
> 赞同：132
> 
> 时间：2012-04-30T19:10:20.203
> 
> 标签：vim

我在使用 VIM 时遇到问题，我的命令都不起作用。

有没有办法我可以看到我`<leader>`目前的设置？

* * *

## 回答 #1

> 赞同：125
> 
> 时间：2012-04-30T19:15:06.620

要查看当前为 定义的当前值`<leader>`，请使用：

```
:let mapleader 
```

产生如下输出：

> 地图领袖，

如果之前没有设置，它可能是未定义的，默认为反斜杠`\`

* * *

## 回答 #2

> 赞同：90
> 
> 时间：2013-02-28T18:19:19.370

默认`mapleader`不设置，特殊字符串`"<Leader>"`表示`\`.

如果你这样做：

```
:echo mapleader 
```

你会得到

```
Undefined variable: mapleader
Invalid expression: mapleader 
```

如果您想将特殊字符串设置`"<Leader>"`为不同的键，例如`","`许多人推荐的，请执行以下操作：

```
:let mapleader="," 
```

然后

```
:echo mapleader
, 
```

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2015-03-17T13:07:42.950

幸运的是，`map`扩展`<key_name>`了 LHS 和 RHS 中的值。`<Leader>`即使它是默认值，您也可以利用它来查看值。

```
:nmap temp :echo('your leader is "<Leader>"')<Esc>| execute 'normal temp'| nunmap temp 
```

请注意，如果您将其放入您的文件中`.vim/vimrc`，它将因“按 ENTER 或键入命令继续”而暂停。如果您知道如何解决此问题，请发表评论。

# java - 在命题逻辑程序中解析括号

> ID：10389213
> 
> 赞同：1
> 
> 时间：2012-04-30T19:10:36.873
> 
> 标签：java, parsing, recursion, parentheses

我正在将命题逻辑语句翻译成合取范式。我遇到的问题是解析可能复杂的括号级别。我需要解决的问题是正确的顺序，我认为在向外移动之前应该先使用递归来解决内括号，但我不知道如何实现我的想法。该程序是用 Java 编写的。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T19:27:39.940

您能否举例说明您要转换为 CNF 的语句？我在想你的意思是在开始的逻辑语句中有括号，但这会有所帮助。

与此同时，我会说你不需要递归......但堆栈会非常有帮助:) 将项目及其数学运算推入堆栈，然后将它们弹出并在适当的时候对它们进行操作。由于是家庭作业，我不会详细介绍，但您会发现您将 push-push-push-pop-multiply-push-push-pop-add-pop-divide... 使用堆栈作为一种专注于当前操作的方式。

对 Postfix Notation 的调查也是相关的，可能会有所帮助……甚至关于它的维基百科文章也会给你一些想法（尽管那里绝对有更多面向计算机科学的文章）。

*免责声明：在我的示例中，我没有考虑这些推送和弹出的数量或顺序：)*

**更新**

您不需要多次传递数据，并且可以即时转换为 CNF。

你正朝着正确的方向前进，所以一些帮助/提示：

*   使用两个堆栈，一个用于操作数，一个用于运算符。
*   当您有两个操作数和一个运算符时，您弹出操作数，应用运算符，然后将结果作为新的（合并的）操作数推回
*   后缀的优点是您可以即时进行转换...例如，当您遇到 → 时，将 ¬ 应用于操作数堆栈并将 ⋁ 压入运算符堆栈

减少您的示例：

```
F→(E⋀(A→B)) 
```

转换的第一步看起来像这样（我假设您已经掌握了底层逻辑转换规则，并且这只是您正在制定的代码）：

```
F→(E⋀(A→B))
¬F⋁(E⋀(A→B))
¬F⋁(E⋀(¬A⋁B)) 
```

在 CNF 后缀中，它将如下所示：

```
F¬EA¬B⋁⋀⋁     // (Parentheses are obviated in postfix notation) 
```

要到达那里，请从左到右一次通读您的初始逻辑语句...将操作数推入操作数堆栈，并将运算符推入操作数堆栈。

在应用运算符时，从操作数堆栈中弹出所需的操作数，应用运算符，然后将生成的字符串作为新的操作数推回堆栈。

右括号或较低优先级的操作会触发 pop-apply-push。整个事情看起来像这样：

```
 Operand        Operator
                                       Stack          Stack
                                     ----------     ----------
Read F:  Push onto Operand stack     F ........      ..........

Read →:  On-the-fly conversion (→ becomes ¬⋁)
  Unary Operator ¬ pops F from Operands; applies it; pushes back to Operands
                                     ¬F .......      ..........   
  Push ⋁ onto the op-stack           ¬F .......      ⋁ .......    

Read (:  Discard    

Read E:  Push onto Operands stack    ¬F E ....       ⋁ ...... 
Read ⋀:  Push onto Operators stack   ¬F E ....       ⋁⋀ .....

Read (:  Discard                    
Read A:  Push onto Operands stack    ¬F E A ..       ⋁⋀ .....

Read →:  On-the-fly conversion (→ becomes ¬⋁)
  Unary Operator ¬ pops A from Operands; applies; pushes back to Operands
                                     ¬F E ¬A .       ⋁⋀ .....
  Push ⋁ onto Operators stack        ¬F E ¬A .       ⋁⋀⋁ ....

Read B:  Push onto Operands stack    ¬F E ¬A B       ⋁⋀⋁ ....

Read ):  Triggers Operators/Operands pop; applies; pushes back to Operands 
        (After, there are three operands on the Operands stack)
                                     ¬F E (¬A⋁B)    ⋁⋀ ....

Read ):  Triggers Operators/Operands pop; applies; pushes back to Operands
        (After, there are two operands on the Operands stack)
                                     ¬F (E⋀(¬A⋁B))  ⋁ ....

No more reads:  Final Operators/Operands pop/apply/push (result is output)
                                    ¬F⋁(E⋀(¬A⋁B)) 
```

**注意事项和注意事项：**

这只是一个正确方向的开始……您将不得不处理诸如运算符优先级之类的问题（即您是稍后推送并采取行动，还是立即弹出并采取行动）。你会发现你的决定是基于你读到的下一个字符（而不是右括号，正如我上面暗示的那样）。

听起来比它更复杂......上面的伪代码不会超过 12-15 行。但是，有些复杂性我没有解决... <--> 函数必须以类似于上面 → 的方式建模...您必须采用这种思路并实现所有转换规则。

隐含的括号可能会绊倒你，例如

```
6 * (8 * 6) + 4 
```

是真的

```
(6 * (8 * 6)) + 4 
```

如果您没有正确处理运算符优先级，您可能会得到类似的结果

```
686*4+* 
```

这给了你 312，而不是正确的答案 (292)。

如果您在阅读本文中的 unicode 逻辑符号时遇到问题，请告诉我；我可以用标准字符重做它，但它在 uni 中读起来好多了:)

HTH，
詹姆斯

PS：一个漂亮的小程序说明后缀在这里： http:
[//fac-web.spsu.edu/cs/faculty/bbrown/web_lectures/postfix/](http://fac-web.spsu.edu/cs/faculty/bbrown/web_lectures/postfix/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T19:34:44.427

看看这个：

[递归下降解析器](http://en.wikipedia.org/wiki/Recursive_descent_parser)

[JavaCC](http://en.wikipedia.org/wiki/JavaCC)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T19:23:22.433

伪代码：

```
parseRestOfString (int openParens, String rest) { 
    c = rest (0);
    if (c == ')' && openParens == 0) ... 
```

这给你一个提示吗？

# mysql - 如何为插入 mysql 的每一行更新子查询？

> ID：10389214
> 
> 赞同：3
> 
> 时间：2012-04-30T19:10:39.203
> 
> 标签：mysql, insert, max, subquery

我的查询如下所示：

```
INSERT INTO table1 (lfd, somedata)
select (select max(lfd) + 1 from table1), somedata from table2 
```

Table2 有多行。所以我想将多行插入table1。这可行，但 lfd 为所有插入的行设置为相同的数字。

因此，如果插入的第一行的 max(ldf) + 1 为“2”，那么接下来的所有行也为“2”。这是不正确的，因为下一行的 max(lfd) + 1 当然应该返回“3”。

如何告诉 mysql 重新评估每个插入的子查询？

我无法触及表结构，因为我将数据从一个 php-gallery 迁移到另一个不同的 php-gallery。表的结构在应用程序的控制之下。

在 Oracle 中，我将简单地定义一个序列并在子选择中选择 squeencename.nextval。- 我很确定这会起作用，但据我所知，mysql 不提供序列，对吧？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T19:16:40.360

~~只需定义`lfd`为[自动增量列](http://dev.mysql.com/doc/refman/5.5/en/example-auto-increment.html)。那么你就不必费心了`select max(...) ...`。~~

这是一种不同的方法：

```
insert into table1 (lfd, somedata)
select 
  (
    select count(*) + (select count(*) from table1) 
    from table2 l
    where l.lfd <= r.lfd
  ),
  r.somedata
from table2 r; 
```

这是如何工作的：

1.  从 1 到 n对行进行排名`table2`（其中 n 是 中的行数`table2`）
2.  将初始值添加`max(lfd)`到等级中，因此值将是唯一的

注意事项：这是一个 n**2 查询，所以如果你有一个大数据集，这可能需要一段时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T19:55:46.133

试试这个：

```
SELECT MAX(lfd) + 1 INTO @i FROM table1;

INSERT INTO table1 (lfd,col1,...)
SELECT @i:=@i+1,somedata,... FROM SomeTable; 
```

本质上，这只会使用一个变量作为序列，用表中的当前最大 id 对其进行初始化。

`table1`请注意，如果在此查询运行时插入行，您可能会遇到并发问题。

# actionscript-3 - AIR for iOS：360° 全景查看器

> ID：10389217
> 
> 赞同：0
> 
> 时间：2012-04-30T19:11:02.087
> 
> 标签：actionscript-3, flash, air, panoramas, 360-degrees

我正在使用 AIR for iOS 开发一个 iOS 应用程序，现在要求我添加对 360° 全景图像的支持。

有一些 Flash 全景播放器可用，但它们会创建 SWF 文件，我无法将其编译到我的 iOS 应用程序中（我假设？）

有哪些选项可以将交互式 360° 全景图添加到我的 AIR for iOS 应用程序中？

//编辑：查看器应支持具有适当失真的球形全景图

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T20:09:56.033

我不确定你的意思......你不能得到这些现有全景图的源代码吗？如果没有，并且您可以只是一个 SWF，那么只需将 SWF 作为一个 MovieClip 类实例嵌入到您的应用程序中，据我所知，即使在 iOS 上也应该没问题。

# javascript - Facebook Javascript api未加载

> ID：10389219
> 
> 赞同：2
> 
> 时间：2012-04-30T19:11:08.900
> 
> 标签：javascript, facebook, facebook-graph-api, facebook-javascript-sdk

这是我的代码：

```
<!DOCTYPE html>
<html xmlns:fb="https://www.facebook.com/2008/fbml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <title>New JavaScript SDK & OAuth 2.0 based FBConnect Tutorial |     
Thinkdiff.net</title>
</head>

<body>

<div id="fb-root"></div>

<script>

  window.fbAsyncInit = function() {
  FB.init({
  appId      : '154062364721089', // App ID
  channelUrl : '//WWW.YOUR_DOMAIN.COM/channel.html', // Channel File
  status     : true, // check login status
  cookie     : true, // enable cookies to allow the server to access the session
  xfbml      : true,  // parse XFBML
  oauth: true
  });

  // Additional initialization code here

   alert('Api loaded');

   FB.login(function(response)
   {
    console.log(response);
   });

   };

  // Load the SDK Asynchronously
 (function(d){
 var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
 if (d.getElementById(id)) {return;}
 js = d.createElement('script'); js.id = id; js.async = true;
 js.src = "connect.facebook.net/en_US/all.js";
 ref.parentNode.insertBefore(js, ref);
 }(document));

</script>

test

</body>
</html> 
```

但是当我在浏览器中打开这个文件时，Facebook api 不会加载。我只看到屏幕上印有“测试”。我相信浏览器应该联系 facebook 以加载 api - 我认为这将被称为浏览器底部的连接消息，这不会发生。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T19:38:54.033

Parse errors in your JavaScript should be the first things to address. Your code is missing a comma between the last two dictionary elements within the FB.init() call (xfbml and oauth)

**Edit** The code as you have it works fine for me in IE and Chrome, except when you run it from your local machine (i.e. double click an HTML file on your disc) due to the '//' in the URL when loading the API

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T19:15:18.673

听起来您希望 Facebook 自动提示用户连接/允许/登录到应用程序。为此，您需要在 fb api 初始化之后添加以下内容（代码在 之后`// Additional initialization code here`）...

```
// Additional initialization code here

alert('Api loaded');

FB.login(function(response)
{
    console.log(response);
}); 
```

编辑：另外，尝试删除`<script>`引用并使用 facebook 文档中的异步代码 - [https://developers.facebook.com/docs/reference/javascript/](https://developers.facebook.com/docs/reference/javascript/)

```
 (function(d){
     var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
     if (d.getElementById(id)) {return;}
     js = d.createElement('script'); js.id = id; js.async = true;
     js.src = "//connect.facebook.net/en_US/all.js";
     ref.parentNode.insertBefore(js, ref);
   }(document)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-19T01:15:08.220

不确定这是否完全相关，找到了这个线程，因为我在该行之后得到了“js is not defined”：`js = d.createElement('script'); js.id = id; js.async = true;`

原来解决方案是行：`if (d.getElementById(id)) {return;}`需要一个尾随`;`，而不是行括号内：

```
if (d.getElementById(id)) {return;}; 
```

和

```
if (d.getElementById(id)) {return}; 
```

工作，而：

```
if (d.getElementById(id)) {return;} 
```

抛出错误..

# java - 有一种方法可以知道 json 代表的是哪种类型？

> ID：10389223
> 
> 赞同：0
> 
> 时间：2012-04-30T19:11:25.890
> 
> 标签：java, json, gson

假设我有两个对象：Person 和 ReqSingUp，而 ReqSingUp 包含 Person。

现在，如果我尝试：

```
Person p=new Person("dan","lala");
ReqSingUp reqSingUp=new ReqSingUp(p);
String s = gson.toJson(reqSingUp,ReqSingUp.class);
Object o = gson.fromJson(s, Object.class);

if (o instanceof ReqSingUp) {
    System.out.println("it's ReqSingUp");
}
if (o instanceof Person ) {
    System.out.println("it's person");
} 
```

它不满足任何条件（not`instanceof ReqSingUp`和 not `instanceof Person` ）。

有没有办法知道它是哪种类型？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T19:17:48.380

不，没有办法直接知道它。

这是因为 JSon 文件中包含的信息不直接包含关于在其中序列化的对象的任何类型信息。这就是为什么您通常在读取 JSon 文件时提供类的原因，如

```
fromJSon(myObject, MyClass.class) 
```

即使在读取任意类型或泛型对象的集合时，这也确实会产生问题。

# vb.net - OleDbDataAdapter 填充数据表

> ID：10389224
> 
> 赞同：1
> 
> 时间：2012-04-30T19:11:36.097
> 
> 标签：vb.net, oledbdataadapter

关于填写的问题`OleDbDataAdapter`。

我有：

```
Dim cmd As OleDbCommand = New OleDbCommand(myQuery), myConnection)
Dim da As OleDbDataAdapter = New OleDbDataAdapter()
Dim dtDonnees As DataTable = New DataTable()
da.Fill(dtDonnees) 
```

填充需要太多时间。
20 行需要 20 秒。
而对于 130 000 则需要更多时间（但不是 130 000 秒）。
但无论如何，20秒太多了。

为什么要花这么多时间？

* * *

问题第 2 部分：我可以跳过填充吗？

我的意思是，在填充数据表之后，我为每一行数据表做一个并转换成一个实体：

```
Dim returnList As New List(Of myObject)(dtDonnees.Rows.Count)
For Each rowDonnee As DataRow In dtDonnees.Rows
   returnList.Add(New myObject(rowDonnee))'set every data of the row into my new object
Next 
```

我可以通过每一行`OleDbDataAdapter`吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T19:58:37.453

如果您想尝试，您可以使用此方法跳过 DataAdapter 填充（假设不需要 DataTable）。不确定您能否在性能上获得很多。

```
Dim cmd As OleDbCommand = New OleDbCommand(myQuery, myConnection) 
Dim reader As OleDbDataReader = cmd.ExecuteReader()
while reader.Read()
   returnList.Add(New myObject(reader))
end while 
```

当然，在您的对象的构造函数中，您应该读取数据并设置对象的内部状态

```
Public Class myObject

   Dim myData As String
   ' other internal var to keep state of this object instance

   Public Sub New(ByVal reader as OleDbDataReader)
       myData = reader.GetString(0)
       ' read and initialize other internal data.
   End Sub
End Class 
```

# javascript - 使用 Socket.IO 发送给 Room/Channel 中的用户子集

> ID：10389237
> 
> 赞同：3
> 
> 时间：2012-04-30T19:12:47.237
> 
> 标签：javascript, node.js, socket.io

我正在使用具有聊天功能的 Node (Express) 和 Socket.IO 构建一个 Web 应用程序。因为在页面上打开一个新选项卡会建立一个新的套接字连接，所以我需要根据 Express 会话 ID 将单个用户的所有实例分组到他们自己的房间中，以使针对该用户的所有消息都出现在所有重复的选项卡中。这是他们可能已经登录的任何其他房间/频道的补充。至少，用户订阅了两个聊天室：实际的“真实”房间，以及使用 sessionID 的他们自己的频道。

问题是我的 sessionID 的所有套接字也在更一般的房间中（并且需要从其他用户那里获取消息）。当我发送一般聊天消息时，我想省略与发送用户对应的任何套接字，因为他们已经通过自己的渠道收到了消息。我已经着手制作了一个包含该会话的 socketID 列表的数组散列，以 sessionID 为键。我已经看到了一些用于指定异常列表的不同语法，但似乎没有一个对我有用。

相关代码，为简洁起见省略了某些部分：

```
var sessionSockets = {};
io.sockets.on('connection', function(socket){
    if(!io.sockets.manager.rooms["/" + sessionID]) {
        sessionSockets[sessionID] = [];
        //send message indicating log on to all sockets except for my session
    }
    socket.join(sessionID); //create private channel for all sockets of the same sessionID
    sessionSockets[sessionID].push(socket.id);
    socket.on('chat', function(data){
        var payload = {
            message: data.msg,
            from:    data.user
        };

        //send back as personal message to all sockets for this session
        io.sockets.in(sessionID).emit('me',payload);

       //send to everyone else as regular message; WHAT SYNTAX?   
       io.sockets.in('').except(sessionSockets[sessionID]).emit('chat', payload);
    }
} 
```

tl;dr：如何在不手动比较数组的情况下向频道/房间中的一部分用户发送消息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T04:53:16.337

使用 socket.join('room') 然后使用 socket.in(socket.room).broadcast.emit 向房间发射。

这是您可以将客户分组到房间中并向房间发出特定示例的方式

# python - 用于获取受 DES/kerberos 保护的 URL 的 Python 脚本

> ID：10389240
> 
> 赞同：2
> 
> 时间：2012-04-30T19:13:13.033
> 
> 标签：python, authentication, python-3.x, kerberos, urllib

我有一个 Python 脚本，它每天从 URL 自动下载一次。

最近，保护 URL 的身份验证已更改。为了让它与 Internet Explorer 一起工作，我必须通过在某处的注册表项中添加 SupportedEncryptionTypes“0x7FFFFFFF”来为 Kerberos 启用 DES。然后当我浏览到该站点时，它会提示我在 IE 中输入我的域/用户/密码。

我之前工作的python代码是：

```
 def __build_ntlm_opener(self):
    passman = HTTPPasswordMgrWithDefaultRealm()
    passman.add_password(None, self.answers_url, self.ntlm_username, self.ntlm_password)

    ntlm_handler = HTTPNtlmAuthHandler(passman)

    opener = urllib.request.build_opener(ntlm_handler)
    opener.addheaders= [
        #('User-agent', 'Mozilla/5.0 (Windows NT 6.0; rv:5.0) Gecko/20100101 Firefox/5.0')
        ('User-agent', 'Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 6.0)')
    ]

    return opener 
```

现在代码在使用开瓶器时因简单的 401 而失败：

```
urllib.error.HTTPError: HTTP Error 401: Unauthorized 
```

我对 Kerberos 或 DES 了解不多，但从我目前看到的情况来看，我无法确定 urllib 是否支持使用这些。

是否有任何第 3 方库或技巧可以让我再次使用它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T21:07:29.830

您可以尝试使用 selenium 的 webdriver 直接驱动浏览器。当我想抓取动态生成的网站时，我有时会这样做。这是打开页面并输入密码的代码示例

```
from selenium import webdriver

b = webdriver.Chrome()
b.get('http://www.example.com')
username_field = b.find_element_by_id('username')
username_field.send_keys('my_username')
password_field = b.find_element_by_id('password')
password_field.send_keys('secret')
login_button = b.find_element_by_link_text('login').click() 
```

这将使您通过网站的典型登录屏幕。然后

```
b.page_source 
```

会给你页面的源代码。即使它主要是用 Javascript 生成的。

源码解析很简单：[http ://code.google.com/p/selenium/source/browse/trunk/py/selenium/webdriver/remote/webelement.py](http://code.google.com/p/selenium/source/browse/trunk/py/selenium/webdriver/remote/webelement.py)

# ruby-on-rails - 连接多态表

> ID：10389246
> 
> 赞同：0
> 
> 时间：2012-04-30T19:13:24.640
> 
> 标签：ruby-on-rails, activerecord

我有销售各种类型产品（绘画、歌曲、书籍等）的卖家。

我有一个购买表，它具有使用 product_id 和 product_type 的多态产品关联，其中 product_type 将是绘画、歌曲、书籍等。

我想查询卖方，以获取他们所有已购买产品的列表，但我得到了这个：

Purchase.joins(:product).limit(10).offset(9000)

```
Hirb Error: Can not eagerly load the polymorphic association :product 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T17:56:34.437

这就是我现在的做法：

```
class Seller < User
  def sales
    Purchase.where("(product_id in (?) AND product_type = 'Book') OR (product_id IN (?) AND product_type = 'Song')", books.collect(&:id), songs.collect(&:id))
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T18:52:20.600

由于您确实具有多个表继承，因此您可以拥有一个带有多态外键的产品表，该表中的每个产品记录都是如此。使用 products 表处理产品、卖家和购买之间的关系。如果您需要特定项目的详细信息，例如书名，取消引用产品中的外键，并获取书籍记录。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T19:48:06.000

你没有说，但你必须有类似的东西：

```
class Purchase
  belongs_to :product, :polymorphic => true
end
class Painting
  has_many :purchases, :as => :product
end
class Song
  has_many :purchases, :as => :product
end
class Book
  has_many :purchases, :as => :product
end 
```

由于 Purchase 类中的 :product 关联是多态的，因此它不知道需要在搜索中连接的所有表是什么。ActiveRecord 怎么会知道加入绘画、歌曲和书籍，但不加入其他表？它不知道，所以它不能进行连接。

# ruby - 跨子模块和类共享变量

> ID：10389250
> 
> 赞同：3
> 
> 时间：2012-04-30T19:13:37.483
> 
> 标签：ruby

我正在尝试为自学目的构建一个简单的小模板解析器。

我如何构建“模块化”的东西并在其中共享数据？数据不需要从外部访问，它只是内部数据。这是我所拥有的：

```
# template_parser.rb
module TemplateParser
  attr_accessor :html
  attr_accessor :test_value

  class Base
    def initialize(html)
      @html = html
      @test_value = "foo"
    end

    def parse!
      @html.css('a').each do |node|
        ::TemplateParser::Tag:ATag.substitute! node
      end
    end
  end
end

# template_parser/tag/a_tag.rb
module TemplateParser
  module Tag
    class ATag
      def self.substitute!(node)
        # I want to access +test_value+ from +TemplateParser+
        node = @test_value # => nil
      end
    end
  end
end 
```

**根据 Phrogz 的评论进行编辑，**
我目前正在考虑类似的事情：

```
p = TemplateParser.new(html, *args) # or TemplateParser::Base.new(html, *args)
p.append_css(file_or_string)
parsed_html = p.parse! 
```

不应该有太多暴露的方法，因为解析器应该解决非一般问题并且不可移植。至少在这个早期阶段不会。我试图从 Nokogiri 那里窥探一下结构。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T20:36:32.993

使用您提供的示例代码，我建议使用组合将实例传递`TemplateParser::Base`给`parse!`方法，如下所示：

```
# in TemplateParser::Base#parse!
::TemplateParser::Tag::ATag.substitute! node, self

# TemplateParser::Tag::ATag
def self.substitute!(node, obj)
  node = obj.test_value
end 
```

您还需要将`attr_accessor`调用移动到`Base`类中才能正常工作。

```
module TemplateParser
  class Base
    attr_accessor :html
    attr_accessor :test_value
    # ...
  end
end 
```

考虑到这是一个试图访问不同类实例属性的类方法这一事实，我现在能想到的任何其他访问`test_value`方式都会相当复杂。`parse!`

以上假设每个实例`@test_value`都需要是唯一的。`TemplateParser::Base`如果不是这种情况，您可以通过使用类或模块实例变量来简化该过程。

```
module TemplateParser
  class Base
    @test_value = "foo"
    class << self
      attr_accessor :test_value
    end
    # ...
  end
end

# OR

module TemplateParser
  @test_value = "foo"
  class << self
    attr_accessor :test_value
  end
  class Base
    # ...
  end
end 
```

然后根据实现使用`TemplateParser::Base.test_value`OR设置或检索值。`TemplateParser.test_value`

另外，为了说明这一点，我假设您在此处包含的伪代码不能准确地反映您的真实应用程序代码。如果是这样，那么该`substitute!`方法是实现简单赋值的一种非常圆的方法。只需`node = test_value`在内部使用`TemplateParser::Base#parse!`并跳过往返行程。我相信你知道这一点，但它似乎至少值得一提......

# sql - 选择每列值的 30%

> ID：10389260
> 
> 赞同：0
> 
> 时间：2012-04-30T19:14:37.127
> 
> 标签：sql, sql-server, random

假设我们有一个表，其列“A”的值从 0 到 N。我想为列“A”选择具有相同值的每行 30%。

```
So if I have this:
A|  B
-------
0 hello
0 test
0 hi
1 blah1
1 blah2
1 blah3
1 blah4
1 blah5
1 blah6

Result:
A|  B
-------
0 hello
1 blah1
1 blah4 
```

它可以是 blah1 或任何其他不是 blah4 的 blah，而 blah4 可以是任何其他不是 blah1 的 blah，基本上它可以是随机的或跳过的。

顺便说一句，实际的表很大，说的是 TB，所以要考虑性能。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-30T19:31:04.087

尝试这样的事情：

```
DECLARE @YourTable table (A int, b varchar(10))
INSERT @YourTable VALUES (0, 'hello') --OP's data
INSERT @YourTable VALUES (0, 'test')
INSERT @YourTable VALUES (0, 'hi')
INSERT @YourTable VALUES (1, 'blah1')
INSERT @YourTable VALUES (1, 'blah2')
INSERT @YourTable VALUES (1, 'blah3')
INSERT @YourTable VALUES (1, 'blah4')
INSERT @YourTable VALUES (1, 'blah5')
INSERT @YourTable VALUES (1, 'blah6')

;WITH NumberedRows AS
(   SELECT 
        A,B,ROW_NUMBER() OVER (PARTITION BY A ORDER BY A,B) AS RowNumber
        FROM @YourTable
)
, GroupCounts AS
(   SELECT
        A,MAX(RowNumber) AS MaxA
        FROM NumberedRows
        GROUP BY A
)
SELECT
    n.a,n.b
    FROM NumberedRows           n
        INNER JOIN GroupCounts  c ON n.A=c.A
    WHERE n.RowNUmber<=(c.MaxA+1)*0.3 
```

输出：

```
a           b
----------- ----------
0           hello
1           blah1
1           blah2

(3 row(s) affected) 
```

**根据 Andriy M 评论中的好主意进行**编辑****

 **```
;WITH NumberedRows AS
(   SELECT 
        A,B,ROW_NUMBER() OVER (PARTITION BY A ORDER BY A,B) AS RowNumber
            ,COUNT(*) OVER (PARTITION BY A) AS TotalOf
        FROM @YourTable
)
SELECT
    n.a,n.b
    FROM NumberedRows            n
    WHERE n.RowNumber<=(n.TotalOf+1)*0.3
    ORDER BY A 
```

输出：

```
a           b
----------- ----------
0           hello
1           blah1
1           blah2

(3 row(s) affected) 
```

**编辑**这里是“随机”行，使用 Andriy M 的想法：

```
DECLARE @YourTable table (A int, b varchar(10))
INSERT @YourTable VALUES (0, 'hello') --OP's data
INSERT @YourTable VALUES (0, 'test')
INSERT @YourTable VALUES (0, 'hi')
INSERT @YourTable VALUES (1, 'blah1')
INSERT @YourTable VALUES (1, 'blah2')
INSERT @YourTable VALUES (1, 'blah3')
INSERT @YourTable VALUES (1, 'blah4')
INSERT @YourTable VALUES (1, 'blah5')
INSERT @YourTable VALUES (1, 'blah6')

;WITH NumberedRows AS
(   SELECT 
        A,B,ROW_NUMBER() OVER (PARTITION BY A ORDER BY newid()) AS RowNumber
        FROM @YourTable
)
, GroupCounts AS (SELECT A,COUNT(A) AS MaxA FROM NumberedRows GROUP BY A)
SELECT
    n.A,n.B
    FROM NumberedRows           n
        INNER JOIN GroupCounts  c ON n.A=c.A
    WHERE n.RowNUmber<=(c.MaxA+1)*0.3
    ORDER BY n.A 
```

输出：

```
a           b
----------- ----------
0           hi
1           blah3
1           blah6

(3 row(s) affected) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T20:07:29.797

这仅使用一个子查询，因此一次通过您的集合。

```
SELECT a
    , b
FROM 
    (
        SELECT A
            , b
            , ROW_NUMBER()
                OVER(    PARTITION BY A
                        ORDER BY b
                    ) r
            , COUNT(b)
                OVER(    PARTITION BY A
                    ) ct
        FROM @YourTable
    ) n
WHERE n.r <= n.ct * 0.3 
```

就像这样做一样，尽管如果少于 10 个并且“额外”被发布到第一个垃圾箱，这总是返回前 3 个。：

```
SELECT A
    , b
FROM 
    (
        SELECT A
            , b
            , NTILE(10)
                OVER(   PARTITION BY a
                        ORDER BY b
                    ) tens                          
        FROM @YourTable

    ) n
WHERE tens <= 3; 
```**

# javascript - 谷歌 API JS 文件

> ID：10389261
> 
> 赞同：0
> 
> 时间：2012-04-30T19:14:43.330
> 
> 标签：javascript, api, e-commerce

在构建 Google Commerce Search 搜索表单时，Google 指示我们包含的一段代码位于以下地址：

[http://ajax.googleapis.com/ajax/libs/googleapis/0.0.4/googleapis.min.js](http://ajax.googleapis.com/ajax/libs/googleapis/0.0.4/googleapis.min.js)

我收到一个似乎来自这个 javascript 文件的 javascript 错误，我想知道这是否是所述 javascript 文件的最新版本？如果没有，有人可以告诉我这个 google api JS 文件的最新版本在哪里吗？

PS 我无法从谷歌得到任何结论，即这是该文件的正确、最新版本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T20:15:53.353

如果您正在关注 google 搜索 API - 这是查找最新信息的位置： [https ://developers.google.com/custom-search/v1/overview](https://developers.google.com/custom-search/v1/overview)

如果您需要一些其他 API，请在以下位置查看它们的新位置： [https](https://developers.google.com/) ://developers.google.com/ ，您将在那里获得所有（许多）API 的列表。

# jquery - 尝试禁用大型表单的重复提交时，如何消除延迟？

> ID：10389262
> 
> 赞同：0
> 
> 时间：2012-04-30T19:14:48.807
> 
> 标签：jquery, asp.net-mvc-3, form-submit

我正在尝试禁用大型表单上的重复提交点击：

```
$(document).ready(function () {
  $('#loading').hide();
  $('form').bind('submit', function (e) {
     $('#loading').show();
     $(this).find('input:submit').attr('disabled', 'disabled');
  });
}); 
```

我也试过了：

```
 $('input:submit').click(function () {
     $(this).attr('disabled', true);
  }); 
```

但是，在单击提交和禁用按钮之间存在明显的延迟 - 几秒钟。

有没有办法消除这种延迟，或者至少确定原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T19:22:39.657

如果它是一个*非常*大的表单（并且忘记了用户体验），请尝试使用 ID/属性选择器语法来查找提交按钮。使用您正在使用的选择器在 DOM 中工作可能会很困难。

注意[文档](http://api.jquery.com/submit-selector)：

> 因为 :submit 是一个 jQuery 扩展而不是 CSS 规范的一部分，所以使用 :submit 的查询不能利用原生 DOM querySelectorAll() 方法提供的性能提升。为了在现代浏览器中获得更好的性能，请改用 [type="submit"]。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T19:16:35.993

不应该……你在其他地方有问题。

这是一个没有延迟的[实时示例](http://jsfiddle.net/jackdent/bq3Jy/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T19:54:51.563

克里斯，

用这些内容覆盖提交，并不是说它是完美的，而是让 UI 有机会收集它的想法:)：

```
$('input:submit').click(function (e) {
    var outerItem = this;
    e.preventDefault();
    $(this).attr('disabled', 'disabled');
    setTimeout(function () { outerItem.submit(); }, 10);
    return false;
}); 
```

免责声明；未经测试，所以请注意购买者..

进一步参考：[http ://api.jquery.com/submit/](http://api.jquery.com/submit/)

# mysql - 为配置文件mysql查询找到正确的线程

> ID：10389263
> 
> 赞同：1
> 
> 时间：2012-04-30T19:14:53.160
> 
> 标签：mysql, user-profile

我正在尝试编写一个查询，该查询将为用户配置文件找到最匹配的讨论。

这里有两个表：

线程表 - 每个线程都用数字 tagid 标记（在单独的列 tagid1、tagid2...tagid10 中）。每个 tagid 基本上是线程中出现的关键字。我们也有突出（在单独的列中 - prominence1、prominence2...prominence10） - 这是关键字在线程中出现的次数。

```
For example: 
threadid 123
tagids 1234, 12345, 12234, 11232, 11232, 112343, 1123224
prominence 2, 3, 1, 4, 5, 6, 2 
```

用户表 - 每个用户 ID 都标有数字 tagids（在单独的列 tagid1、tagid2...tagid10 中），这些数字 tagids 对用户来说是最突出的（在单独的列中 - prominence1、prominence2...prominence10）。这里的突出度是根据用户参与具有特定标签的线程的次数来计算的。

```
For example:
userid 12334
tagids 1234, 5654, 45476, 4553, 44653, 6456432, 645645
prominence 6, 3, 2, 5, 2, 6, 1 
```

如果我们有这两组数据 - 如果我必须显示最佳匹配线程列表，我如何为每个用户配置文件找到最佳匹配线程？

请帮助，我需要一些方向来寻找最佳匹配所需的逻辑。

# ruby-on-rails - ( this AND this) OR ( this AND this) 的 Arel 语法

> ID：10389266
> 
> 赞同：4
> 
> 时间：2012-04-30T19:15:08.917
> 
> 标签：ruby-on-rails, arel

我将如何在 Arel （这个和这个）或（这个和这个）中做到这一点

上下文是 rails 3.0.7

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-02T12:42:46.290

迈克的回答基本上就是你要找的

```
class Model < ActiveRecord::Base
  def self.this_or_that(a1, a2, a3, a4)
    t = Model.arel_table
    q1 = t[:a].eq(a1).and(t[:b].eq(a2))
    q2 = t[:c].eq(a3).and(t[:d].eq(a4))
    where(q1.or(q2))
  end
end 
```

我在 Arel 上整理的一些[幻灯片](http://www.slideshare.net/flah00/activerecord-arel)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T14:27:05.973

你需要下拉到更原始的 AREL

```
t = Model.arel_table
a = (t[:a].eq(nil).and(t[:b].eq(nil)))
b = (t[:a].not_eq(nil).and(t[:b].not_eq(nil)))
Model.where(a.and(b)) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-30T19:27:35.817

我会把这一切都放在一个 where 块中。例如，这是一个基于类似复杂“where”子句的“范围”：

```
class Foo < ActiveRecord::Base
  def self.my_complex_where(args)
    where("(col1 = ? AND col2 = ?) OR (col3 = ? AND col4 = ?)", 
          args[:val1], args[:val2], args[:val3], args[:val4])
  end
end 
```

或者，您可以使用以下符号来执行此操作：

```
class Foo < ActiveRecord::Base
  def self.my_complex_where(args)
    where("(col1 = :val1 AND col2 = :val2) OR (col3 = :val3 AND col4 = :val4)", 
          :val1 => args[:val1], 
          :val2 => args[:val2], 
          :val3 => args[:val3],
          :val4 => args[:val4])
  end
end 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-30T22:53:46.453

除了已经给出的答案，您可能还想看看 gem ' [squeel](http://erniemiller.org/projects/squeel/) '

例子：

```
Person.where{(name =~ 'Ernie%') & (salary < 50000) | (name =~ 'Joe%') & (salary > 100000)} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-30T19:19:23.817

我不知道辅助方法，但你[总是可以下拉到（几乎）纯 SQL](http://guides.rubyonrails.org/active_record_querying.html#array-conditions)：

```
Client.where("orders_count = ? AND locked = ?", params[:orders], false) 
```

# css - 如何将外部 CSS 类应用于使用 dojo.create 创建的跨度？

> ID：10389268
> 
> 赞同：1
> 
> 时间：2012-04-30T19:15:10.880
> 
> 标签：css, dojo

我正在使用 dojo.create 在我的网页中创建一个跨度，并且需要对其应用 CSS。我可以在 dojo 参考中看到如何对其应用样式，但我宁愿通过外部样式表应用它（我需要设置很多属性，我不想内联）。

因此，鉴于下面的示例代码，我将如何为 printSpan 类应用 CSS？

```
var node = dojo.create("span", {innerHTML:_text, id:"printSpan", class:"printSpan"}, map); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T19:17:27.450

你可以在你的外部样式表中这样写：

```
.printSpan { color: red; } 
```

这称为[类选择器](http://www.w3.org/TR/CSS2/selector.html#class-html)。

顺便说一句，您的代码应该是：

```
{ innerHTML : _text, id : "printSpan", "class" : "printSpan" } 
```

请注意，冒号在`"class"`字符串内部，尽管它应该在外部并且`printSpan`是不同的字符串。

# facebook-graph-api - 离线访问。7 月 5 日之后，将桌面应用程序。如果与访问令牌相关联的用户从 FB 注销，是否能够访问 FB 数据？

> ID：10389270
> 
> 赞同：2
> 
> 时间：2012-04-30T19:15:30.043
> 
> 标签：facebook-graph-api, facebook-fql, offline, facebook-authentication

情况对我来说仍然不清楚 - 2012 年 7 月 5 日之后，如果与访问令牌相关联的用户从 Facebook 注销，桌面应用程序是否能够访问 Facebook 数据？在这里谈论的是完全删除离线访问还是仅限制离线访问 60 天？

文档 - [https://developers.facebook.com/roadmap/offline-access-removal/](https://developers.facebook.com/roadmap/offline-access-removal/)没有给出明确的答案（恕我直言）。引用：“一旦启用迁移设置，桌面应用程序将自动返回具有较长到期时间的用户 access_tokens。但是，如果不让用户再次登录您的应用，就无法获得长期用户 access_token。”</p>

截至 4 月 30 日，我可以为桌面应用程序请求具有“offline_access”权限的访问令牌（使用 URL：[https://graph.facebook.com/oauth/authorize?client_id=APPLICATION_ID&redirect_uri=http://www.facebook。 com/connect/login_success.html&scope=manage_pages,read_stream,publish_stream,offline_access](https://graph.facebook.com/oauth/authorize?client_id=APPLICATION_ID&redirect_uri=http://www.facebook.com/connect/login_success.html&scope=manage_pages,read_stream,publish_stream,offline_access) )。一切正常。即使用户注销。尽管为应用程序启用了“删除离线访问权限”。

您的回答将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T19:29:06.387

刚刚完成了一个补丁来适应这些变化。至少根据我的经验，我们在一个 Web 应用程序中工作，其中更新访问令牌就像将所有内容更改为 Javascript SDK 并依赖浏览器的登录状态一样简单。这似乎是一种更合乎逻辑的方法，而不是在每个操作中交叉检查服务器端保存的长期访问令牌以查看它是否仍然有效。

从本质上讲，桌面实施将会发生的情况是访问令牌在默认情况下的寿命会更长，但仍需要在 60 天期限结束时进行续订。您的应用程序中应该有逻辑，将在对它采取行动之前检查访问令牌的有效性（或者只是尝试失败并提示失败），然后提示用户登录并重新验证 access_token 是否已过期。只要这个逻辑到位，过期的访问令牌就会触发重新验证。

如果您的应用收到短期访问令牌...

> 如果您想刷新仍然有效的长寿命 access_token，您必须先获取一个新的短寿命用户 access_token，然后调用下面的相同端点。返回的 access_token 将有一个新的长寿命到期时间，但是，access_token 本身可能与之前授予的长寿命 access_token 相同，也可能不同。

短期访问令牌（仅持续一个会话直到注销）将需要使用该文章中记录的端点转换为 60 天、长期到期的访问令牌。配置为新设置的桌面应用程序将默认接收此类，但仍需要在 60 天后使用新登录重新生成这些应用程序。

我同意这实现起来要笨拙得多，尤其是对于桌面应用程序，但从 facebook 的角度来看，它肯定要安全得多。如果您开始将访问令牌视为临时而非永久访问凭据，并开始更改逻辑以通过 curl 或其他一些 http post 机制检查有效性，而不是引用您的数据库，那么您将更轻松地使用调整。不要让您的架构假设保存的访问令牌的存在保证访问，并确保将它们交叉检查到 facebook 端点并在必要时提示重新登录。

# java - 将 Java 对象排序到桶中，然后在桶中排序的算法

> ID：10389274
> 
> 赞同：0
> 
> 时间：2012-04-30T19:15:43.567
> 
> 标签：java, algorithm, sorting, predicate

我需要一个`ArrayList<Conference> conferences`，其中`Conference`包含一个`public Date beginDate`参数，并按如下方式排序：首先，将会议分成代表唯一月份的存储桶`beginDate`，然后`beginDate`在存储桶中对其自身进行排序。我确信这是一个常见的需求，所以我希望这里有人能提供一些建议。

我的想法如下。请告诉我为什么它是次优的:)

1.  创建一个`HashMap<Date, ArrayList<Conference>>`.
2.  迭代`conferences`并使用一个特殊的静态函数来查找他们的月份的第一天`beginDate`，检查是否有一个`ArrayList<Conference>`for that `Date`。然后将它们添加到`ArrayList`那个`Date`（应该都是一样的，因为`first_day_of_month(any_day_in_month)`是一样的。
3.  遍历每个`ArrayList`成员`HashMap`并使用标准排序过程对`ArrayList`按日期进行排序。

这似乎比必要的复杂，但请让我知道它为什么不好以及可以做些什么来解决它。

编辑：另外，如果重要的话，我最终需要将所有这些添加`ArrayList`回一个`ArrayAdapter`将进入 commonsware 的`MergeAdapter`... :(

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T19:25:04.557

如果您从一开始就按日期排序，那么无论哪种方式，月份的条目都将是后续的。在初始排序之后，您可以遍历所有条目并在条目是新月份的第一个条目时进行人工“拆分”。我什至不确定您是否需要进行这种区分（也许是因为这个问题有点含糊）。

所提出算法的总复杂度为`O(nlog n)`，其中`n`为元素个数，当然没有更好的解决方案。

**注意**顺便说一句，此算法在操作复杂性方面优于您提出的算法。

# spring - 双（调度程序）bean初始化

> ID：10389276
> 
> 赞同：3
> 
> 时间：2012-04-30T19:15:57.667
> 
> 标签：spring, spring-mvc, web-config

我的应用程序中有 2 个上下文，一个是“spring”（Web+MVC），第二个是“rpc”（只是 RPC 服务）。它们都从“spring”目录继承配置（有 4 个文件：app-config.xml、infrastructure-config.xml、integration-config.xml 和 security-config.xml）。

app-config.xml 包含 Quartz 调度器的初始化。

所以，如果我启动我的应用程序，就会有两个 Quartz Scheduler 线程，并且所有计划的服务都会被调用两次。那是因为我将 app-confix.xml 的设置继承到两个上下文中吗？

我认为在父配置中定义的 bean 只初始化一次，并在继承该父配置的上下文之间共享。

感谢您的任何建议:)。

我的 web.xml 中的示例。

```
<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>
        /WEB-INF/spring/*-config.xml
    </param-value>
</context-param>

<servlet>
    <servlet-name>rpc</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <load-on-startup>0</load-on-startup>
</servlet>

<servlet-mapping>
    <servlet-name>rpc</servlet-name>
    <url-pattern>/rpc/*</url-pattern>
</servlet-mapping>

<servlet>
    <servlet-name>spring</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>

<servlet-mapping>
    <servlet-name>spring</servlet-name>
    <url-pattern>/web/*</url-pattern>
</servlet-mapping> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T08:54:38.710

在您的配置中，将创建两个独立的上下文。只是他们使用相同的文件这一事实并不会导致 spring 创建一个共同的父上下文。

您需要做的是在 web.xml 中设置一个 contextLoaderListener - 给它一个公共配置文件，然后将它从 servlets 配置中排除。侦听器将创建根上下文并将其绑定到 servlet 上下文 - 然后两个 servlet 将作为父上下文链接到该上下文。

# css - 打开关闭复选框样式

> ID：10389277
> 
> 赞同：0
> 
> 时间：2012-04-30T19:16:08.307
> 
> 标签：css

我正在尝试将一个全新的模板转换为我的登录脚本，由于某种原因，复选框的文本“ON”没有像模板一样正确对齐，而且在打开时似乎没有右边框被选中。我一直在尝试匹配元素和 css 以进行故障排除，但没有任何运气。

[http://www.kansasoutlawwrestling.com/kowmanager/login](http://www.kansasoutlawwrestling.com/kowmanager/login)

[http://themeforest.net/item/zice-admin-colorful-admin-templates/full_screen_preview/1980638](http://themeforest.net/item/zice-admin-colorful-admin-templates/full_screen_preview/1980638)

我尝试按照下面两个人的建议更改填充，但我宁愿不更改 css，因为它适用于模板，如果不更改我的 css，它不应该工作。

还有其他想法吗？

我希望有人能看到一些东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T19:19:46.560

跨度上有一个`13px`填充设置。取下它，它会正确对齐。

`zice.style.css`它在您文件的第 1187 行：

```
label.iPhoneCheckLabelOn span {
    padding-left:13px
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T19:20:27.380

将此声明更改为此值：

```
label.iPhoneCheckLabelOn span {
  padding-left: 1px;
} 
```

# objective-c - 按下“新建”按钮时 -[UITableView _endCellAnimationsWithContext:] 中的断言失败

> ID：10389279
> 
> 赞同：1
> 
> 时间：2012-04-30T19:16:15.437
> 
> 标签：objective-c, uitableview

我的应用程序编译得很好，但是当我点击头文件中的“新建”按钮时，它崩溃了，返回了这个崩溃消息：

```
2012-04-30 11:44:40.599 Homepwner[13233:f803] *** Assertion failure in -[UITableView _endCellAnimationsWithContext:], /SourceCache/UIKit_Sim/UIKit-1914.84/UITableView.m:1021
2012-04-30 11:44:40.601 Homepwner[13233:f803] *** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'Invalid update: invalid number of sections.  The number of sections contained in the table view after the update (1) must be equal to the number of sections contained in the table view before the update (1), plus or minus the number of sections inserted or deleted (1 inserted, 0 deleted).'
*** First throw call stack:
(0x13cd022 0x155ecd6 0x1375a48 0x9ae2cb 0x9c103 0xa76d2 0xa7711 0x39ff 0x13cee99 0x1a14e 0x1a0e6 0xc0ade 0xc0fa7 0xc0266 0x3f3c0 0x3f5e6 0x25dc4 0x19634 0x12b7ef5 0x13a1195 0x1305ff2 0x13048da 0x1303d84 0x1303c9b 0x12b67d8 0x12b688a 0x17626 0x294d 0x28b5)
terminate called throwing an exception(lldb) 
```

一直在查看我的 ItemsViewController.m 但无法找出问题所在，因为我没有更改任何 UITableView 方法。

你能告诉我有什么问题吗？提前致谢。

项目视图控制器.m

```
#import "ItemsViewController.h"
#import "BNRItemStore.h"
#import "BNRItem.h"

@implementation ItemsViewController // Incomplete implementation

-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
  DetailViewController *detailViewController = [[DetailViewController alloc]init];

  NSArray *items = [[BNRItemStore sharedStore]allItems];
  BNRItem *selectedItem = [items objectAtIndex:[indexPath row]];

  //Give detail view controller a pointer to the item object in a row
  [detailViewController setItem:selectedItem];

  // Push it onto the top of the navigation controller's stack
  [[self navigationController]pushViewController:detailViewController animated:YES];
}

-(id)init
{
  // Call the superclass's designated initializer
  self = [super initWithStyle:UITableViewStyleGrouped];
  if (self) {
    UINavigationItem *n = [self navigationItem];

    [n setTitle:@"Homepwner"];

  }
  return self;
}

-(id)initWithStyle:(UITableViewStyle)style
{
  return [self init];
}

-(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
  return [[[BNRItemStore sharedStore]allItems]count];
}

-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

  // Check for a reusable cell first, use that if it exists
  UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"UITableViewCell"];

  // If there is no reusable cell of this type, create a new one
  if (!cell) {
    cell = [[UITableViewCell alloc]initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"UITableViewCell"];
  } 

  // Set the text on the cell with the description of the item
  // that is at the nth index of items, where n = row this cell
  // will appear in on the tableview
  BNRItem *p = [[[BNRItemStore sharedStore]allItems]objectAtIndex:[indexPath row]];

  [[cell textLabel]setText:[p description]];

  return cell;
}

-(UIView *)headerView
{
  // If we haven't loaded the headerView yet
  if (!headerView) {
    //Load HeaderView.xib
    [[NSBundle mainBundle]loadNibNamed:@"HeaderView" owner:self options:nil];
  }
  return headerView;
}

-(UIView *)tableView:(UITableView *)tv viewForHeaderInSection:(NSInteger)sec
{
  return [self headerView];
}

-(CGFloat)tableView:(UITableView *)tv heightForHeaderInSection:(NSInteger)sec
{
  // The height of the header view should be determined from the height of the 
  // view in the XIB file
  return [[self headerView]bounds].size.height;
}

-(IBAction)toggleEditingMode:(id)sender
{
  // If we are currently in editing mode
  if ([self isEditing]) {
    // Change text of button to inform user of state
    [sender setTitle:@"Edit" forState:UIControlStateNormal];
    // Turn off editing mode
    [self setEditing:NO animated:YES];
  } else {
    // Change text of button to inform user of state
    [sender setTitle:@"Done" forState:UIControlStateNormal];
    // Enter editing mode
    [self setEditing:YES animated:YES];
  }
}

-(IBAction)addNewItem:(id)sender
{
  // Create a new BNRItem and add it to the store
  BNRItem *newItem = [[BNRItemStore sharedStore]createItem];
  //Incompatible pointer types initializing 'BNRItem *__strong' with an expression of type 'NSArray*'

  // Figure out where that item is in the array
  int lastRow = [[[BNRItemStore sharedStore]allItems]indexOfObject:newItem];

  NSIndexPath *ip = [NSIndexPath indexPathForRow:lastRow inSection:0];

  // Insert this new row into the table
  [[self tableView]insertRowsAtIndexPaths:[NSArray arrayWithObject:ip] withRowAnimation:UITableViewRowAnimationTop];
}

-(void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath
{
  // If the table view is asking to commit a delete command...
  if(editingStyle == UITableViewCellEditingStyleDelete)
  {
    BNRItemStore *ps = [BNRItemStore sharedStore];
    NSArray *items = [ps allItems];
    BNRItem *p = [items objectAtIndex:[indexPath row]];
    [ps removeItem:p];

    // We also remove that row from the table view with an animation
    [tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade];
  }
}

-(void)tableView:(UITableView *)tableView
  moveRowAtIndexPath:(NSIndexPath *)sourceIndexPath 
         toIndexPath:(NSIndexPath *)destinationIndexPath
{
  [[BNRItemStore sharedStore]moveItemAtIndex:[sourceIndexPath row] 
                                     toIndex:[destinationIndexPath row]];
}

-(void)viewWillAppear:(BOOL)animated
{
  [super viewWillAppear:animated];
  [[self tableView] reloadData];
}

@end 
```

# c# - 来自另外两个表的 order by 子句

> ID：10389281
> 
> 赞同：1
> 
> 时间：2012-04-30T19:16:34.917
> 
> 标签：c#, .net, linq

我有一张表格`RecentChanges`，其中包含在我的网站上完成的所有操作的参考。它包含已完成操作的类型（例如编辑、上传等）、修订 ID 外键（引用`Revisions`表中的 ID - 可以为空）和日志 ID 外键（引用表中的 ID）`Logs`表 - 可以为空）。提到的最后两个表都包含操作发生时间的时间戳。

我的问题是，由于时间戳值位于两个单独的表中，我如何对`RecentChanges`表中的结果进行排序以按降序显示？

为了得到一个想法，这里有一段 Linq 查询：

```
var list = (from r in Entity.RecentChanges
            //where clause??
            select r); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T19:36:58.193

像这样的东西？我正在投影到一个匿名类型以帮助排序（您需要在投影中添加您需要的其他字段）：

```
var query = (from c in Entity.RecentChanges
        from l in Entity.Logs
            .FirstOrDefault(log => log.ID == c.LogID).DefaultIfEmpty()
        from r in Entity.Revisions
            .FirstOrDefault(rev => rev.ID == c.RevisionID).DefaultIfEmpty()
        select new
               {
                   ActivityDate = l != null 
                       ? l.Timestamp 
                       : r != null
                           ? r.Timestamp
                           : DateTime.Now. //what if both are null? catching all eventualities here
                   //select your other fields here

               })
        .OrderByDescending(c => c.ActivityDate)
        .ToList(); 
```

# jquery-ui - 是否可以使用 KnockoutJS 模板添加动态 jQuery 选项卡？

> ID：10389283
> 
> 赞同：0
> 
> 时间：2012-04-30T19:16:36.220
> 
> 标签：jquery-ui, knockout.js, jquery-templates

我正在尝试在网页中构建动态显示。该网站是用 ASP.NET MVC 3 构建的，但我不确定这是否重要......

本质上，我有一个基本的“_Editor.cshtml”页面，它使用部分内容使用查询参数在我的显示中呈现特定的编辑器内容。考虑一个图表编辑器（折线图与条形图）。

**_Editor.cshtml**

```
<div id='tabs'>
  <ul> 
    <li><a href='#queryTab'>Define Query</a></li>

    <!-- THIS IS WHERE I NEED TO SHOW ALL OF MY 'CUSTOM' TAB NAMES -->
    <!-- ko template: 'tabNames' -->
    <!-- /ko -->

    <li><a href='#themeTab'>Styles and Themes</a></li>
  </ul>
  <div id='queryTab'>
    <!-- configure db connection, tables, fields, etc... (not important) -->
  </div>

  <!-- THIS IS WHERE I WANT TO SHOW CONTENT FOR MY CUSTOM TABS -->
  <!-- ko template: 'tabContent' -->
  <!-- /ko -->

  <div id='themeTab'>
    <!-- show various style options here (not important) -->
  </div>

</div>

<script type="text/javascript">
  $(function(){
    var vm = { /* define my model here */ };
    ko.applyBindings(vm);

    $("#tabs").tabs();
  });
</script>

@if (Model.EditorType == ChartTypes.Bar) {
  @Html.Partial("_BarChartEditor")

} else if (Model.EditorType == ChartTypes.Line) {
  @Html.Partial("_LineChartEditor")

} 
```

**_BarChartEditor.cshtml**

```
<script id="tabNames" type="text/html">
  <li><a href="#barChartTab">Bar Chart Tab!</a></li>
  <!-- I could have many more tab names here -->
</script>

<script id="tabContent" type="text/html">
  <div id="barChartTab">
    <h1>Add controls for bar chart configuration</h1>
  </div>
  <!-- I would create a div for each tab name above here -->
</script> 
```

**_LineChartEditor.cshtml**

```
<script id="tabNames" type="text/html">
  <li><a href="#lineChartTab">Line Chart Tab!</a></li>
</script>

<script id="tabContent" type="text/html">
  <div id="lineChartTab">
    <h1>Add controls for line chart configurations</h1>
  </div>
</script> 
```

对于冗长的代码丢失感到抱歉（这里花了很长时间才写完，所以请怜悯我）。:) 我想确保我的问题得到理解，因为我使用自定义部分构建编辑器的方式。也许它很笨拙，但它在大多数情况下都有效......

真的，除了标签内容之外，一切都很好。在我能够将我的视图模型绑定到 UI 之前，选项卡渲染似乎正在发生。当调用 'ko.applyBindings()' 方法时，该选项卡会显示在不同的选项卡上。

有没有人尝试过这样做？有人成功了吗？我创建了一个 jsfiddle 来展示一个简单的场景来准确地展示我在说什么：

[http://jsfiddle.net/TrailHacker/j2nhm/](http://jsfiddle.net/TrailHacker/j2nhm/)

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T23:34:50.693

我实际上让它与您的示例一起使用，您的内容模板的结构不正确。它缺少`<div>`标签。

如果您为您的示例修改此内容，请记住 div id 需要与链接的 ref 匹配。您可以将这两个值都放入您的视图模型中，以允许多个自定义选项卡。

[http://jsfiddle.net/tyrsius/UCGRZ/](http://jsfiddle.net/tyrsius/UCGRZ/)

# android - FrameLayout中的透明TextView背景

> ID：10389286
> 
> 赞同：1
> 
> 时间：2012-04-30T19:16:43.100
> 
> 标签：android, background, textview, imageview, android-framelayout

我在 FrameLayout 中的 ImageView 上放置了一个 TextView。我已经为 TextView 尝试了各种 android:background 组合，但总是得到一个透明的灰色背景。我想要一个透明的背景。android:background 属性似乎被忽略了。

```
<HorizontalScrollView
    android:id="@+id/categories_horizontal_scrollview"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:paddingBottom="25dip">
    <LinearLayout
        android:id="@+id/categories_linear_layout"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent">
        <FrameLayout
            android:layout_width="wrap_content" 
            android:layout_height="wrap_content">
        <ImageView  
            android:layout_width="fill_parent" 
            android:layout_height="fill_parent" 
            android:id="@+id/photos_imageview"
            android:scaleType="center"
            android:src="@drawable/photos_ipad" />
        <TextView
            android:layout_width="wrap_content" 
            android:layout_height="wrap_content" 
            android:id="@+id/photos_text"
            android:layout_marginBottom="10dip"
            android:layout_gravity="center_horizontal|bottom"
            android:padding="3dip" 
            android:background="#00000000"
            android:textColor="#ffffffff"
            android:textSize="20dip" 
            />
        </FrameLayout>
              .
              . 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T19:52:01.697

用这个：

```
TextView tv;
tv.setBackgroundColor(0xXX??????); 
```

其中 XX - [00;FF] - 透明度指标。？？？- 一些数字（原色）

希望它有所帮助）））

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T22:57:21.627

正如 Brayden 指出的那样，布局存在问题。我最终将 ImageView 和 TextView 作为单个资源放入 FrameLayout 中，然后在需要的地方动态添加。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-10-28T13:03:47.303

我们使用这样的代码来实现透明背景。

```
android:background="@android:color/transparent" 
```

# java - Netbean 的 Swing 扩展库和 javax.swing 有区别吗？

> ID：10389287
> 
> 赞同：3
> 
> 时间：2012-04-30T19:16:43.937
> 
> 标签：java, netbeans-7

我做了一些谷歌搜索，但我找不到任何专门回答我问题的东西。我想知道它们之间的区别以及各自的优缺点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T19:37:36.463

其实我不完全确定，但我认为这两者之间没有区别，并且nebeans使用我们PC中安装的JDK。但是netbeans 提供了一些设计灵活性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T19:37:43.677

为 NetBeans 的 Matisse GUI 构建器开发的 GroupLayout 已添加到 Java SE 6。如果您使用的是较早的 JDK 版本，则需要原始的非标准库（不是 javax.swing-package）。

另见：[http ://wiki.netbeans.org/FaqFormSwingLayoutLibrary](http://wiki.netbeans.org/FaqFormSwingLayoutLibrary)

# ios4 - Cocos2d 的倒置闪屏

> ID：10389289
> 
> 赞同：2
> 
> 时间：2012-04-30T19:16:48.340
> 
> 标签：ios4, cocos2d-iphone, rotation, splash-screen

我在 iPhone 上使用 cocos2d v1.0.1。我的应用程序只需要支持左右横向。我正在以旋转的纵向模式添加初始图像，因此当初始图像被移除时，我可以加载与其相同的背景图像并执行一些动画，使其看起来无缝。

问题是启动画面总是与我添加的背景图像相反。这与我旋转的肖像图像是向左还是向右旋转无关。

我正在使用 cocos 的默认轮换代码和设置。任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T10:57:32.177

我会建议复制图像并以不同的方式命名。并根据您的需要使用它，而不是使用 default.png。它也给我带来了问题。我没有浪费我的时间，而是用这种方式。希望这可以帮助。:)

# python - 创建循环引用

> ID：10389291
> 
> 赞同：0
> 
> 时间：2012-04-30T19:17:04.417
> 
> 标签：python, reference, initialization, circular-reference

我需要创建几个相互引用（通常是循环引用）的对象。通常，可能涉及多个对象，但这里有一个简单的案例，我只需要一对相互引用的汽车：

```
class Car:
  def __init__(self, position, speed):
    self.position = position
    self.speed = speed
  def set_reference(self, other_car):
    self.other_car = other_car
  # ...

def main():
  # ...
  car1 = Car(pos1, spd1)
  car2 = Car(pos2, spd2)
  car1.set_reference(car2)
  car2.set_reference(car1) 
```

没有引用另一辆车的汽车不是有效对象。所以理想情况下，我想`set_reference`从`__init__`方法内部执行；这将更安全（没有机会使用无效对象）和更清洁（所有初始化都将按`__init__`预期执行）。

是否有任何巧妙的解决方案可以实现这一目标？我不介意一次创建两辆汽车，但每辆汽车都是一个独立的实体，因此它需要本身就是一个实例。

我也知道循环引用对 GC 来说很麻烦。我会处理的。

用例：

每辆车都充当另一辆车的备用车。汽车实例是“智能的”，也就是说，它们可以做很多工作。如果汽车实例不知道它的备份，这很烦人，因为它会阻止汽车完成操作，而无需每次都来自外部的引用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T19:22:33.390

我不认为有一个很好的方法可以将`set_reference()`呼叫转移到`__init__()`，因为另一辆车可能还不存在。我可能会做这样的事情。

```
class Car:
  def __init__(self, position, speed):
    self.position = position
    self.speed = speed
  def set_reference(self, other_car):
    self.other_car = other_car
  @classmethod
  def create_pair(cls, car1_args, car2_args):
    car1 = cls(*car1_args)
    car2 = cls(*car2_args)
    car1.set_reference(car2)
    car2.set_reference(car1)
    return car1, car2

def main():
  car1, car2 = Car.create_pair((pos1, spd1), (pos2, spd2)) 
```

以下是如何将相同的概念扩展为更大的循环引用结构：

```
class Car:
  # ...
  @classmethod
  def create_loop(cls, *args):
    cars = [cls(*car_args) for car_args in args]
    for i, car in enumerate(cars[:-1]):
        car.set_reference(cars[i+1])
    cars[-1].set_reference(cars[0])
    return cars 
```

然后你可以这样称呼它（有任意数量的汽车）：

```
car1, car2, car3 = Car.create_loop((pos1, spd1), (pos2, spd2), (pos3, spd3)) 
```

您应该像这样设置参考：

```
>>> car1.other_car is car2 and car2.other_car is car3 and car3.other_car is car1
True 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T19:32:09.630

我建议将汽车数据结构与引用汽车序列的数据结构分开。 `other_car`看起来并不像严格属于 的数据，`car`而是表示在一些可迭代的汽车序列中。因此，最简单且逻辑上最一致的解决方案是定义一辆汽车，然后将其放入一系列汽车中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T19:26:55.587

如果您真的不想使用工厂方法，那么唯一真正的选择是强制用户事后对其进行配置。（在评论中考虑您所说的可能需要依赖循环的内容）：

```
class Car:
  def __init__(self, position, speed):
    self.position = position
    self.speed = speed

  @staticmethod
  def setup(*args):
    for car, next in zip(args, args[1:]):
      car.other_car = next
    args[-1].other_car = args[0]

def main():
  ...
  car1 = Car(pos1, spd1)
  car2 = Car(pos2, spd2)
  Car.setup(car1, car2) 
```

另一种选择是拆分分组：

```
class CarGroup(list):
    def other_car(self, car):
        index = self.index(car)+1
        index = 0 if index >= len(self) else index
        return self[index]

class Car:
    def __init__(self, position, speed, group):
        self.position = position
        self.speed = speed
        self.group = group
        self.group.append(self)

    @property
    def other_car(self):
        return self.group.other_car(self)

def main():
    ...
    group = CarGroup()
    car1 = Car(pos1, spd1, group)
    car2 = Car(pos2, spd2, group) 
```

# c# - “解析查询时出错。[Token line number = 1, Token line offset = 52,Token in error = Data]”

> ID：10389306
> 
> 赞同：1
> 
> 时间：2012-04-30T19:18:59.067
> 
> 标签：c#, sql

我正在尝试根据前一个 ComboBox 的选择为 ComboBox 选择一组数据。我一直相信这是第二种方法中的 SELECT 语句，但我无法弄清楚它为什么不起作用。当我运行应用程序时收到此错误：“解析查询时出错。[令牌行号 = 1，令牌行偏移量 = 52，错误中的令牌 = 数据]”我尝试使用 Parameter.AddWithValue, cmd.Parameters .Add，并将值设置为字符串也无济于事。有人介意教我如何正确解决这个问题吗？谢谢你。

数据库的设置如下：

城市

*   CityId (PK, int, not null)
*   名称（nchar（20），空）
*   rowguid（唯一标识符，不为空）

公园

*   ParkId (PK, int, not null)
*   CityId (FK, int, not null)
*   名称（nchar（30），空）
*   rowguid（唯一标识符）

这是方法：

```
private void cboCities_SelectedIndexChanged(object sender, EventArgs e)
{
    if (cboCities.SelectedIndex > -1)
    {
        SqlCeConnection cn = new SqlCeConnection(@"Data Source = \Program Files\ParkSurvey\ParkSurvey.sdf; Persist Security Info = False; Password = *");
        cn.Open();
        SqlCeCommand cmd = cn.CreateCommand();
        cmd.CommandText = "SELECT Name FROM [Parks] WHERE CityId =" + cboCities.SelectedValue + "ORDER BY Name ASC";
        SqlCeDataAdapter da = new SqlCeDataAdapter(cmd);
        DataSet ds = new DataSet();
        da.Fill(ds);
        cn.Close();
        cboParks.ValueMember = "ParkId";
        cboParks.DisplayMember = "Name";
        cboParks.DataSource = ds.Tables[0];
        cboParks.SelectedIndex = -1;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T19:26:05.383

我知道您提到您尝试对查询进行参数化，但是如果您现在收到的错误是与您发布的代码一起引发的，那么我认为这与您在“ORDER BY”之前缺少一个空格的事实有关; 否则，执行的查询将类似于：

```
SELECT Name FROM [Parks] WHERE CityId =5ORDER BY Name ASC; 
```

这显然是无效的 SQL。

您的查询应该是：

```
"SELECT Name FROM [Parks] WHERE CityId =" + cboCities.SelectedValue + " ORDER BY Name ASC"; 
```

话虽如此，我会考虑对查询进行参数化以避免 SQL 注入攻击。使用`cmd.Paramters.AddWithValue`是比编写此内联 SQL 语句更好的方法。

您的查询可以写成：

```
"SELECT Name FROM [Parks] WHERE CityId = @CityID ORDER BY Name ASC"; 
```

您可以像这样添加参数：

```
cmd.Parameters.AddWithValue("@CityID",cboCities.SelectedValue); 
```

# php - 需要帮助获取子节点

> ID：10389307
> 
> 赞同：1
> 
> 时间：2012-04-30T19:19:04.667
> 
> 标签：php, xml, xml-parsing, simplexml, nodes

当我将它移动到另一台服务器时，我正在读取我的 XML 并循环遍历子节点，它停止工作，任何关于它为什么会停止的想法..

这是 XML：

```
<masterxmlholder>   
    <userinfo login="user1">
    <rde-idea:lastlogin code="0">Wed Dec 31 17:00:00 MST 1969</rde-idea:lastlogin>
    </userinfo>

    <userinfo login="user2">
    <rde-idea:lastlogin code="4564568522258">Wed Dec 31 17:00:00 MST 1969</rde-idea:lastlogin>
    </userinfo>
</masterxmlholder> 
```

这是我试图与孩子接触的循环

```
foreach ($xml->children() as $user) {
    echo '<tr><td> Name :  </td><td>' . $user['login'] . $user->lastlogin '</td><td>';

}
echo '</table></center>'; 
```

现在我可以从每个子节点中获取要显示的名称属性，但是我无法显示任何子节点的内部节点

这一切都是为了让你知道我想要做什么......但它基本上是为了看看我是如何试图访问子节点的，也许会指出我的缺陷。

谢谢阅读。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T19:28:54.853

`lastlogin`信息实际上是节点的子节点`userinfo`，因此您需要`children()`再次使用该方法来检索信息。请注意，在此示例中，我删除了 XML 命名空间，以便可以初始化`$xml`

```
$xmlstring = <<<XML
<masterxmlholder>   
    <userinfo login="user1">
    <lastlogin code="0">Wed Dec 31 17:00:00 MST 1969</lastlogin>
    </userinfo>

    <userinfo login="user2">
    <lastlogin code="4564568522258">Wed Dec 31 17:00:00 MST 1969</lastlogin>
    </userinfo>
</masterxmlholder>
XML;

$xml = new SimpleXMLElement($xmlstring);
echo '<center><table>';

foreach ($xml->children() as $user) {
    $name = $user['login'];
    foreach ($user->children() as $child ) {
       $lastlogin = $child;
    }
    echo '<tr><td> Name :  </td><td>' . $name . $lastlogin . '</td></tr>';
}
echo '</table></center>'; 
```

我在这里测试了代码：[http ://writecodeonline.com/php/](http://writecodeonline.com/php/)

旁注，我不会使用`center`标签，因为这是将演示与内容混合在一起，这是不受欢迎的。考虑使用[CSS](http://en.wikipedia.org/wiki/Cascading_Style_Sheets)来设置表格的样式和位置。

# algorithm - 如何使用 CUDA 减少二分搜索的分支散度

> ID：10389308
> 
> 赞同：0
> 
> 时间：2012-04-30T19:19:05.017
> 
> 标签：algorithm, cuda, gpgpu, gpu

该应用程序是相交两个排序的整数列表（设置交集），比如 list1 和 list2。

list1 的每个元素都会被分配一个 GPU 线程，并进行二分查找以检查它是否出现在 list2 中。很容易看出，在这个应用程序中会有大量的线程分歧。我想知道是否有任何减少线程分歧的好方法。我正在使用 CUDA 来实现这个应用程序。

我知道有一种叫做 P-ary 搜索的方法，但我的任务是减少二分搜索的线程发散。我也知道有一个叫做推力的图书馆，但似乎没有尝试减少分歧。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T05:11:43.673

如果两个列表都已排序，则二进制搜索不是您可以执行的最佳算法。二分搜索会给出`O(n lg n)`，但只是做一个类似合并的算法，只取交集，是`O(n)`。

这是使用 GPU 的愚蠢算法。我看到的唯一情况是您刚刚在 GPU 中生成了数据。在这种情况下，您希望将问题分解为一堆较小的交叉点，并为每个交叉点分配一个线程。

为此，请选择`k`list1 的等距元素并使用二分搜索在 list2 中找到它们。同样，选择`k`list2 的等距元素并在 list1 中找到它们。您现在`2k`在每个列表中都有范围，其中每个范围最多`N/k`包含元素。现在平行地与这些范围相交。（设置`k`为所需线程数的一半。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-29T17:48:19.800

可能的代码：

```
 bool end = false;
    bool found = false;

    while(!end && !found)
    {
            int diff        = max-min;
            int middle      = min + (diff / 2);

            end             = diff < 1;
            found           = element[middle] == element;
            if (index < elements[middle])
                    max = middle-1;
            else //(index > elements[middle+1])
                    min = middle + 2;
    }
    return found; 
```

警告：此代码可能会因访问超出范围的内存而产生异常

# sql - SQL Server 中的分组查询帮助

> ID：10389309
> 
> 赞同：1
> 
> 时间：2012-04-30T19:19:08.147
> 
> 标签：sql, sql-server, sql-server-2005

我正在尝试按某些人群对我的数据进行排序。我的数据看起来像：

```
Origional_Date  ID      FORM    Total
2012-03-01      1855    3       1283
2012-03-01      2869    4       2306
2012-03-01      5555    4       6440
2012-03-01      5555    3       8373
2012-03-01      2527    3       8476
2012-03-01      922     3       823
2012-03-15      2907    4       1420
2012-03-15      5555    3       2892
2012-03-15      2914    4       5008
2012-03-15      2375    3       4594 
```

到目前为止我的查询是：

```
DECLARE @StartDate smalldatetime, @EndDate smalldatetime, @Web_ID as smallint
    SET @StartDate = '20120301'
    SET @EndDate = '20120331'
    SET @Web_ID = '5555'

SELECT DATEADD(WEEK, DATEDIFF(WEEK, 0, [Origional_Date]), -1) as [Origional_Date]
  ,[ID]
  ,[Form]
  ,SUM([Total]) as [Total]
  FROM mytable
  WHERE [Origional_Date] between @StartDate and @EndDate
    AND [ID] = @Web_ID
  GROUP BY DATEADD(WEEK, DATEDIFF(WEEK, 0, [Origional_Date]), -1), [ID], [Form]
  ORDER BY [Origional_Date], [Form] ASC 
```

我想要做的是显示我的数据，如：

```
Origional_Date  ID      FORM    Total
2012-03-01      Web     3       8373
2012-03-01      Direct  3       10582
2012-03-01      Web     4       6440
2012-03-01      Direct  4       2306
2012-03-15      WEB     3       2892
2012-03-15      Direct  3       4594
2012-03-15      Direct  4       6428 
```

Web 是 ID 5555，而 Direct 是其他任何东西。

我只是不确定如何使用“IF”语句来完成，或者是否需要在“group by”中完成

谢谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T19:28:36.557

使用案例分句

```
select case active
    when 1 then 'Active'
    when 0 then 'Inactive'
    end         
from contract 
```

在您的情况下与此类似：

```
select case [ID]
    when 5555 then 'Web'
    else 'Direct'
    end as [ID]
from mytable 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T19:26:32.577

您可以使用 case 语句来实现这一点。

喜欢

```
SELECT DATEADD(WEEK, DATEDIFF(WEEK, 0, [Origional_Date]), -1) as [Origional_Date]
  ,(CASE WHEN [ID] = 5555 THEN 'Web' ELSE 'Direct' END )
  ,[Form]
  ,SUM([Total]) as [Total]
  FROM mytable
  WHERE [Origional_Date] between @StartDate and @EndDate
    AND [ID] = @Web_ID
  GROUP BY DATEADD(WEEK, DATEDIFF(WEEK, 0, [Origional_Date]), -1), (CASE WHEN [ID] = 5555 THEN 'Web' ELSE 'Direct' END ), [Form]
  ORDER BY [Origional_Date], [Form] ASC 
```

# css - 使用 MVC 3 在 IIS 6 上动态创建 Site.css。在 dev 中工作，prod 失败。为什么？

> ID：10389310
> 
> 赞同：0
> 
> 时间：2012-04-30T19:19:11.957
> 
> 标签：css, asp.net-mvc, model-view-controller, iis-6

我正在使用 MVC 控制器/动作在我的 MVC 3 站点中动态创建 site.css。它的工作方式是我将路由映射到 Site.css，如下所示：

```
routes.MapRoute("CSS", "Content/Site.css", new { controller = "CSS", action = "Index" }); 
```

然后在我的 CSSController 中，我有以下代码：

```
public ActionResult Index() {
    string path = Request.PhysicalPath.Replace("Site.css","SiteStyles.css");
    byte[] data = null;

    try {
        using (FileStream fs = new FileStream(path, FileMode.Open, FileAccess.Read)) {
            data = ProcessCSS(fs);
        }
    } catch (Exception e) {
        Logger.Write(new LogEntry(e.Message, "Error", 99, 1001, System.Diagnostics.TraceEventType.Error, "CSS Error", null));
        throw e;
    }

    return File(data, "text/css","Site.css");
} 
```

ProcessCSS 方法中发生的事情是它通过 SiteStyles.css 并对我定义的一些常量执行查找/替换，以便我可以在顶部定义一组颜色作为命名常量，然后在我需要该颜色的任何地方在站点中，我只使用命名常量。这样我就可以更改一次颜色，它会传播到样式表中所有适当的位置，而无需我去触摸 5-6 个不同的位置。

上面的代码在我的本地环境和运行 IIS6 的 Windows Server 2003 开发服务器上运行良好。但是，当我将它部署到也是运行 IIS6 的 Windows Server 2003 的生产服务器时，没有加载 css，当我尝试浏览到 Site.css（应该通过我的路由映射）时，我得到一个 404 not found错误。如果我去我的开发服务器并获取 Site.css 的输出并在生产服务器上创建一个物理 Site.css 文件，它就可以工作。

知道为什么这在生产服务器上失败了吗？

我向我的 CSSControler 添加了一些日志记录以记录它在哪里寻找 SiteStyles.css 并且日志根本没有在生产服务器上生成，这告诉我服务器完全忽略了映射的路由并且没有执行控制器中的代码.

任何关于从哪里开始的建议表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T20:22:51.177

在我看来，您应该仔细检查生产服务器上的 IIS 配置，以确保应用了必要的映射。

您是在开发服务器上的 IIS 中使用通配符（星号）映射，还是为 .css 扩展定义了映射？您可能需要验证生产服务器是否具有相同的映射。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T20:05:44.517

尝试将写入权限添加到您的 css 所在的文件夹到运行您的池的用户。

# objective-c - 如何将多个视图添加到拆分视图控制器？

> ID：10389317
> 
> 赞同：-3
> 
> 时间：2012-04-30T19:19:50.943
> 
> 标签：objective-c, ios, xcode4

我正在为 iPad 开发一个应用程序，使用拆分视图和情节提要。很久以前我做过一次，但没有写下如何做。我整个早上都在谷歌上搜索，并没有发现任何专门针对我的问题的东西。

我知道有一种方法可以通过将对象拖动到情节提要画布上来添加多个详细视图，并以某种方式（这就是问题）将新对象设置为主对象或细节...

有人知道该怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T17:09:26.510

我放弃了...决定使用标签栏控制器；简单得多。它被否决的事实向我表明，没有人知道答案。

无论如何感谢所有看过它的人。

# c# - 使用 Moq 模拟带有条件参数的方法

> ID：10389319
> 
> 赞同：5
> 
> 时间：2012-04-30T19:20:11.067
> 
> 标签：c#, unit-testing, mocking, moq

我有一个我正在单元测试的类，以验证特定的异常条件是否得到妥善处理。为此，我模拟了内部调用以抛出异常的方法。

我的模拟设置如下所示：

```
fr.CallBase = true;
fr.Setup(m => m.PutFile(It.IsAny<IFileConnection>(), It.IsAny<string>(), It.IsAny<string>()))
    .Throws(new System.IO.IOException("Test Exception", new System.Net.Sockets.SocketException())); 
```

这正是我想要它做的。

但是，现在我想通过仅针对特定值抛出异常来测试连续性。我认为它应该是这样的：

```
fr.Setup(m => m.PutFile(It.IsAny<IFileConnection>(), It.Is<string>(a => a == "foo2.txt"), It.IsAny<string>()))
    .Throws(new System.IO.IOException("Test Exception", new System.Net.Sockets.SocketException())); 
```

...但这似乎不起作用。我究竟做错了什么？

根据请求，整个测试：

```
[Test]
public void ManualRouteInterruptedInDownloadContinuesOn()
{
    var firstRoute = this.UnitOfWork.GetFirstRoute();
    Route r = this.UnitOfWork.GetRouteByID(firstRoute.RouteID);
    r.RegExMatch = "^foo\\d.txt$";
    r.Manual = true;
    r.NotifyOfNewFiles = "me@company.com";
    this.UnitOfWork.Save();

    var fr = new Mock<ManualRouting>(r.RouteID);
    fr.CallBase = true;
    fr.Setup(m => m.GetFile(It.IsAny<IFileConnection>(), It.Is<string>(a => a == "foo2.txt"), It.IsAny<string>()))
        .Throws(new System.IO.IOException("Test Exception", new System.Net.Sockets.SocketException()));

    fr.Object.ExecuteRoute(firstRoute.RouteID);
    Assert.IsTrue(fr.Object.Errors.Count == 1);
    Assert.IsTrue(fr.Object.Matches.Count == 3);
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-02T17:48:39.527

有人在评论中建议我应该尝试

```
It.Is<string>(a => Equals(a, "foo2.txt")) 
```

他列举了仿制药的一些奇怪之处。我不知道它是否与泛型有关，但这种变化确实有效。由于发帖人删除了他的评论，我代替他回答。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T19:38:51.210

内部如何`fr`知道以`GetFile`文件`foo2.txt`名调用？似乎您正在广泛地设置您的测试规范（`^foo\\d.txt$`）但您的模拟是狭隘的（`foo2.txt`），不应该反过来吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T19:36:30.633

我觉得

```
m.PutFile(It.IsAny<IFileConnection>(), "foo2.txt") 
```

应该管用

# ruby - 无法使用 RVM-Capistrano 安装任何 ruby

> ID：10389322
> 
> 赞同：0
> 
> 时间：2012-04-30T19:20:37.723
> 
> 标签：ruby, rvm, centos, rvm-capistrano

我最近安装了 gem rvm-capistrano 以便部署在我的服务器中。首先，我尝试运行`cap deploy:setup`. 似乎安装了 RVM，但由于某些原因（权限或其他），它无法安装 REE：

```
Warning:
*** [err :: myserver.com] Failed to create the file ruby-enterprise-1.8.7-2012.02.tar.gz
[...]

There was an error, please check /usr/local/rvm/log//*.log. Next we'll try to fetch via http.
 ** [out :: myserver.com] Trying ftp:// URL instead. 
```

我没有包括更多，因为无关紧要。

显然在`deploy.rb`sudo 选项中设置为`'root'`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T19:11:50.410

```
adduser #{user} rvm 
```

为我修好了。`#{user}`您的上限部署用户的名称在哪里。

# regex - 如果其中包含特定字符串，则 htaccess mod_rewrite 重定向

> ID：10389325
> 
> 赞同：-1
> 
> 时间：2012-04-30T19:20:39.800
> 
> 标签：regex, apache, .htaccess, mod-rewrite

老开发人员在我的网址中留下了一些奇怪的东西，我想通过 301 重定向来修复它。我想重定向所有带有 perpage/www.domain.com 位的网址，即

`http://www.example.com/products/golf-clubs/Package-Sets/price/under100/grid/perpage/www.domain.com`

到

`http://www.example.com/products/golf-clubs/Package-Sets/price/under100/grid/`

因此，从字面上将所有包含的 url 重定向`perpage/www.domain.com`到没有它的版本。

有任何想法吗 ？

干杯，/马辛

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T19:25:55.273

通过启用 mod_rewrite 和 .htaccess `httpd.conf`，然后将此代码放在您`.htaccess`的`DOCUMENT_ROOT`目录下：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

RewriteRule ^(.*)/perpage/www\.domain\.com/?$ $1/ [L,NC,R=301] 
```

# ruby-on-rails - 当我通过嵌套关联保存无效数据时，它显示为有效？

> ID：10389329
> 
> 赞同：1
> 
> 时间：2012-04-30T19:20:52.643
> 
> 标签：ruby-on-rails

我在注册向导期间通过帐户记录保存了无效的用户记录。我有一些方法可以让我有条件地跳过验证某些用户属性。当我通过关联检查数据的有效性时，它显示为有效，当我自己检查有效性时，它显示为无效。

前任：

```
$ account = Account.new
$ account.users.new(:email => nil)
$ account.save
=> true
$ account.users.last.valid?
=> true
$ User.last == account.users.last
=> true
$ User.last.valid?
=> false 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T19:39:34.353

他们不做同样的事情，因为一个使用内存，另一个使用数据库。

```
account.users.last.valid? 
```

从帐户对象中，获取用户关联（在内存中），获取最后一个元素，检查是否有效。

```
User.last == account.users.last 
```

比较数据库中最后一个用户和 account.users 关联（内存中）中最后一个用户的主键（:id 字段），如果主键相同，则返回 true。

```
User.last.valid? 
```

检查数据库中的最后一个用户是否有效。

尝试以下操作：

```
account.users(true).last.valid? 
```

The true argument reloads the users association from the database.

# visual-studio-2010 - 计算文本文件 VB 中的行数

> ID：10389339
> 
> 赞同：-2
> 
> 时间：2012-04-30T19:21:39.520
> 
> 标签：visual-studio-2010, text-files, counting

我正在寻找一种方法来计算文本文件中的行数，不包括 CRLF，这将是每个说的最后一行。

有没有机会为此提供一个简单的代码示例？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T19:28:01.233

试试这个（虽然我发现它在谷歌搜索你的问题的标题）：

```
IO.File.ReadAllLines("C:\Users\Dan\Desktop\test.txt").Length 
```

如果您担心末尾有空行，则从所有行循环，直到找到有内容的行，然后将其全部删除，直到最后。这很容易，因为：

```
IO.File.ReadAllLines("C:\Users\Dan\Desktop\test.txt") 
```

返回字符串向量。希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T19:33:06.650

试试这个：

```
TextBox1.Text = ""

With OpenFileDialog1
.InitialDirectory = Environment.GetFolderPath(Environment.SpecialFolder.Desktop)
.Filter = "Text Files (*.txt)|*.txt"
If .ShowDialog <> DialogResult.OK Then Exit Sub
End With

Dim intLines As Integer = 0
Dim sr As New IO.StreamReader(OpenFileDialog1.FileName)
Do While sr.Peek() >= 0
TextBox1.Text += sr.ReadLine() & ControlChars.CrLf
intLines += 1
Loop
sr.Close()
MessageBox.Show(intLines, Me.Text) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-07T15:12:13.913

基本上你需要校准 md5#sum 然后检查 HTML 是否链接到 CSS 并确保你打开了 javascript

# php - 在 php 中转换为十六进制与 MSSQL 不同

> ID：10389342
> 
> 赞同：1
> 
> 时间：2012-04-30T19:22:06.727
> 
> 标签：php, sql-server, character-encoding, hex

从[这个问题](https://stackoverflow.com/questions/574805/how-to-escape-strings-in-mssql-using-php)的答案中，我试图通过将字符串转换为十六进制并比较这些值而不是直接和危险地直接使用来自用户的字符串来使我的程序更安全。我修改了该问题的代码以添加转换：

```
function mssql_escape($data) {
    if(is_numeric($data))
        return $data;

    $data = iconv("ISO-8859-1", "UTF-16", $data);

    $unpacked = unpack('H*hex', $data);

    return '0x' . $unpacked['hex'];
} 
```

我这样做是因为在我的数据库中我使用的是 nvarchar 而不是 varchar。现在，当我在 php 端运行它时，它会出现

```
0xfeff00680065006c006c006f00200077006f0072006c00640021 
```

然后我运行以下查询：

```
 declare @test nvarchar(100);
 set @test = 'hello world!';
 select CONVERT(VARBINARY(MAX), @test); 
```

结果是：

```
0x680065006C006C006F00200077006F0072006C0064002100 
```

现在您会注意到这些数字几乎相同。除了尾随零之外，唯一的区别是 feff00。为什么会在那里？我意识到我所要做的就是转变，但我真的很想知道它为什么在那里，而不是仅仅做出假设。谁能向我解释为什么 php 决定在我的十六进制前面抛出 feff00 （黄色！）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-17T21:17:50.243

好吧，安德鲁，我似乎回答了你的很多问题。 [此链接](http://www.joelonsoftware.com/articles/Unicode.html)说明：

> 所以人们不得不想出一个奇怪的约定，在每个 Unicode 字符串的开头存储一个 FE FF；这称为 Unicode 字节顺序标记，如果您正在交换高字节和低字节，它看起来像 FF FE，读取您的字符串的人会知道他们必须每隔一个字节交换一次。呸。并不是每个 Unicode 字符串在开头都有字节顺序标记。

维基百科解释说：

> 如果 16 位单元以大端字节顺序表示，则此 BOM 字符将在字节序列中显示为 0xFE 后跟 0xFF。此序列在文本显示中显示为 ISO-8859-1 字符 þÿ，该文本显示预期文本为 ISO-8859-1。
> 
> 如果 16 位单元使用 little-endian 顺序，则字节序列将具有 0xFF 后跟 0xFE。此序列在文本显示中显示为 ISO-8859-1 字符 ÿþ，该文本显示预期文本为 ISO-8859-1。

所以你用 FEFF 显示的代码，这意味着它是大端表示法。对小端使用 UTF-16LE，SQL 会理解这一点。只要您只使用两个字节，移动前六个十六进制数字只会巧合地起作用。

# php - JSON 数据和 PHP

> ID：10389344
> 
> 赞同：0
> 
> 时间：2012-04-30T19:22:09.947
> 
> 标签：php, json

我正在通过 JSON 和 PHP 从 URL 检索数据。我很难将对象分开并显示数据。PHP 代码似乎一直在工作，直到我进入 for 循环。

```
$jsonurl = 'http://myweb/api.php';
$json = file_get_contents($jsonurl);
$json_output = json_decode($json);
foreach ($json_output->Monitoring AS $monitoring) {
    foreach ($monitoring->Status AS $Status){
        echo $Status->Emailed;
        echo $Status->Status;
    } 
```

这是我的数据结构：

```
 object(stdClass)#12 (1) 
      { ["Monitoring"]=> array(10) { [0]=> object(stdClass)#13 (14) 
            { 
            ["Status"]=> string(30) "HTTP/1.1 302 Moved Temporarily"
            ["Emailed"]=> string(1) "0" } 
            [1]=> object(stdClass)#14 (14) { 
            ["Status"]=> string(30) "HTTP/1.1 302 Moved Temporarily" 
            ["Emailed"]=> string(1) "0" } 
            [2]=> object(stdClass)#15 (14) { 
            ["Status"]=> string(30) "HTTP/1.1 302 Moved Temporarily" 
            ["Emailed"]=> string(1) "0" } 
            [3]=> object(stdClass)#16 (14) { 
            ["Status"]=> string(30) "HTTP/1.1 302 Moved Temporarily"               
            ["Emailed"]=> string(1) "0" }
            } } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T19:29:43.557

首先，您确定您的脚本返回实际的 JSON 字符串吗？你json_encode了吗？

您是否比较了 JSON 之前和解码之后对象的“数据结构”？有什么不同吗？也许它根本与 foreach 循环和 JSON 无关，而问题在于您的各种数据结构，它似乎由多个子对象组成。

另一种方法是通过返回 json_decode($json,true) 并将其视为数组来尝试在该上下文中使用关联数组而不是对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T19:48:07.327

根据您放置的数据结构，您只需要一个 foreach 循环，例如：

```
$jsonurl = 'http://myweb/api.php';
$json = file_get_contents($jsonurl);
$json_output = json_decode($json);
foreach ($json_output->Monitoring AS $Status) {
    echo $Status->Emailed;
    echo $Status->Status;
} 
```

在第一个 foreach 循环中，值（您的代码中的 $monitoring，我刚刚重命名的 $Status 中的值）不是您需要循环的另一个数组。它将包含一个以 Emailed 和 Status 作为键的 std 对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T19:38:56.357

At the outset, make sure you turn error reporting on so you can see what exactly is failing.

An improper format passed to `json_decode` will just return false. It is one of the limitations of PHP's json handling that they are trying to address in the next release by creating a `JSONSerializable` interface. Make sure the return for decode is an instance of `stdClass` (or an array if you have passed the option for an associative array), otherwise the loops will never execute at all.

# sql-server - 如何使用 xquery 拆分 xml 变量？

> ID：10389346
> 
> 赞同：1
> 
> 时间：2012-04-30T19:22:17.803
> 
> 标签：sql-server, tsql, sql-server-2005, xquery

我有一个标量 xml 变量：

```
DECLARED @XML xml =
'<rows>
    <row>
        <column1 attrib="" />
        <column2 attrib="" />
    </row>
    <!-- ... -->
</rows>'; 
```

我想拆分数据，以便将每一行的 xml 分配给表中的新记录：

```
Id | ... | XML
1  |     | '<row><column1 attrib="" /><column2 attrib="" /></row>'
2  |     | etc.
3  |     | etc. 
```

我还没有完全掌握 xquery，所以我在编写一个我想要的插入语句时遇到了麻烦。

```
INSERT into MyTable( [XML])
SELECT @XML.query('row') 
```

现在我知道发生**了一些**事情，但它似乎并没有按照我的意图插入多个新记录，而是将带有空字符串的单个记录插入到`[XML]`列中。

我没有得到什么？

## 澄清

我不是试图使用`value(...)`. 我正在尝试捕获整个`<row>`元素并将其保存到类型的列中`xml`

我已经尝试`nodes(...)`并提出了：

```
INSERT into MyTable([XML])
SELECT C.query('*')
FROM @XML.nodes('rows/row') T(C) 
```

这更接近我想要的，但结果不包括外部`<row>`标签，只包括`<column*>`它包含的元素。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T19:30:44.757

您需要使用[`.nodes(...)`](http://msdn.microsoft.com/en-us/library/ms188282.aspx)将每个投影`<row .../>`为一行，并使用 提取感兴趣的属性[`.value(...)`](http://msdn.microsoft.com/en-us/library/ms178030.aspx)。就像是：

```
insert into MyTable(XML)
select x.value('text()', 'nvarchar(max)') as XML
from @XML.nodes(N'/rows/row') t(x); 
```

`text()`将选择每个`<row .../>`. 您应该使用适当的表达式（例如，`node()`或`@attribute`等，请参阅[XPath 示例](http://msdn.microsoft.com/en-us/library/ms256086.aspx)），具体取决于您想要从行中获得的内容（您的示例根本没有说清楚，所有这些空元素......）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T20:05:27.390

T-SQL Script:

```
SET ANSI_WARNINGS ON;

DECLARE @x XML =
'<rows>
    <row Atr1="11" />
    <row Atr1="22" Atr2="B" />
    <row Atr1="33" Atr2="C" />
</rows>';

DECLARE @Table TABLE(Id INT NOT NULL, [XMLColumn] XML NOT NULL);

INSERT  @Table (Id, XMLColumn)
SELECT  ROW_NUMBER() OVER(ORDER BY @@SPID) AS Id,
        a.b.query('.') AS [XML]
FROM    @x.nodes('//rows/row') AS a(b);

SELECT  *
FROM    @Table t; 
```

Results:

```
Id XMLColumn
-- --------------------------
1  <row Atr1="11" />
2  <row Atr1="22" Atr2="B" />
3  <row Atr1="33" Atr2="C" /> 
```

# php - 如何从我的 html 表单中调用 php 函数？

> ID：10389347
> 
> 赞同：1
> 
> 时间：2012-04-30T19:22:21.470
> 
> 标签：php, html, ajax

我有一个网站模板，我想在那里自定义消息发送者。我看到了[这个表格](http://youhack.me/2010/07/22/create-a-fancy-contact-form-with-css-3-and-jquery/)来帮助实现它。

php 文件如下所示：

```
<?php
echo 'testing php'; 
$name = $_POST['name']; // contain name of person
$email = $_POST['email']; // Email address of sender 
$web = $_POST['web']; // Your website URL
$body = $_POST['text']; // Your message 
$receiver = "myEmail@hotmail.com" ; // hardcorde your email address here - This is the email address that all your feedbacks will be sent to 

$body = "Name:{$name}\n\nWebsite :{$web}\n\nComments:{$body}";
$send = mail($receiver, 'Contact Form Submission', $body, $email);
if ($send) {
    echo 'true'; //if everything is ok,always return true , else ajax submission won't work
}
?> 
```

**更新**

我设法像这样调用 php 文件：

```
<form id="form" method="post" action="ajaxSubmit.php" > 
                <fieldset> 
                <label><input type="text" id="name" name="name" value="Name" onBlur="if(this.value=='') this.value='Name'" onFocus="if(this.value =='Name' ) this.value=''"></label>
                  <label><input type="text" id="email" name="email" value="Email" onBlur="if(this.value=='') this.value='Email'" onFocus="if(this.value =='Email' ) this.value=''"></label> 
                <label><input type="text" id="web" name="web" value="Phone" onBlur="if(this.value=='') this.value='Phone'" onFocus="if(this.value =='Phone' ) this.value=''"></label>
                  <label><textarea id="text" name="text" onBlur="if(this.value==''){this.value='Message'}" onFocus="if(this.value=='Message'){this.value=''}">Message</textarea></label> 
                <input type="reset" /> 
                <input type="submit" /> 
                </fieldset> 
                </form> 
```

但是当我运行它时，我得到以下**错误**

```
Warning: mail() [function.mail]: SMTP server response: 550 The address is not valid. in C:\wamp\www\forSale\dataTable\ajaxSubmit.php on line 17 
```

但后来我检查了变量的值，它们是正确的。这意味着什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T19:35:22.853

除非我缺乏咖啡对我的眼睛开玩笑，否则您没有在这些输入上指定名称属性。$_POST 不包含元素的 ID，而是包含“名称”和“值”属性。

例如：

```
<input type="text" id="name" value="Name" name="name" ... 
```

编辑：要调试这个理论，请尝试在 PHP 文件中输出 $_POST 变量的值

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T19:38:00.343

将属性添加`name="field_name"`到输入字段。这可能会解决问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-01T15:51:34.103

正如我在聊天中所说，您应该尝试从头开始，首先正常提交表单，然后通过使用 javascript 验证它来改进它，然后尝试使用 ajax 提交它。

如果您将表单修改回基础，您将获得：

```
<form id="form" method="post" action="ajaxSubmit.php" >
    <fieldset>
        <input type="text" id="name" name="name" value="Name" 
                    onBlur="if(this.value=='') this.value='Name'" 
                    onFocus="if(this.value =='Name' ) this.value=''" />
        <input type="text" id="email" name="email"  value="Email" 
                    onBlur="if(this.value=='') this.value='Email'"
                    onFocus="if(this.value =='Email' ) this.value=''" />
        <input type="text" id="web" name="web"  value="Phone" 
                    onBlur="if(this.value=='') this.value='Phone'" 
                    onFocus="if(this.value =='Phone' ) this.value=''" />
        <textarea id="text" name="text" value="Message"
                    onBlur="if(this.value==''){this.value='Message'}" 
                    onFocus="if(this.value=='Message') this.value=''}" />  
        <input type="reset" />
        <input type="submit" />
    </fieldset>  
</form> 
```

# objective-c - ios transform.rotation.y 分解窗口

> ID：10389348
> 
> 赞同：0
> 
> 时间：2012-04-30T19:22:24.417
> 
> 标签：objective-c, ios, animation

我的一个连锁动画中有一个奇怪的问题。我的屏幕上的每个块（其中 26 个）都有块对象，当用户按下它们时，我执行翻转。它工作得很好，但我在做这些之前添加了一个比例动画，以使它们在屏幕上大 50%。所以，我的顺序是：

放大延迟（让用户看到大图像）旋转 90%（从视图中删除块） - 使用 transform.rotation.y 更改图像和旋转收缩。

我已经将窗口视图控制器设置为这些块的代表，这样它就可以将一个计数器传递给这些块，这样我就可以将正确的子层放置在顶部（使用 setZposition）。

一切都很好，除非我在屏幕上将 2 个块放在彼此上方/下方，这样放大会导致它们重叠，然后当旋转动画开始时，它立即具有右侧块弹出它下面的块。我尝试将动画更改为 transform.rotation.x 并在块并排时获得相同的行为。

我不确定如果我没有做正确的事情，这是否是一个 iOS 错误。非常感谢任何建议。以下是转出方法：

```
- (void)spinOut:(id)sender
{
    NSTimeInterval animationTime=0.85;

    [UIView animateWithDuration:animationTime
                      delay:0
                    options: UIViewAnimationOptionCurveLinear
                 animations:^{
                     // setup the animation to spin the current view out
                     [CATransaction begin];
                     [CATransaction setDisableActions:YES];
                     CABasicAnimation *spinOut = [CABasicAnimation animationWithKeyPath:@"transform.rotation.y"];
                     [spinOut setDelegate:self];
                     [spinOut setDuration:animationTime];
                     CAMediaTimingFunction *tf = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseIn];
                     [spinOut setTimingFunction:tf];
                     [spinOut setFromValue:[NSNumber numberWithFloat:M_PI * 0.0]];
                     [spinOut setToValue:[NSNumber numberWithFloat:M_PI * 0.5]];
                     [spinOut setRemovedOnCompletion:NO];
                     [spinOut setFillMode:kCAFillModeForwards];

                     // setup variables used to roll in the next view on animation completion.
                     [pageView.layer addAnimation:spinOut forKey:kMyVeryOwnABCsSpinOutKey];

                     [CATransaction commit];
                 }
                 completion:^(BOOL finished){
                     [self setFlipOutAnimationTimer:[NSTimer scheduledTimerWithTimeInterval:animationTime target:self selector:@selector(spinIn:) userInfo:nil repeats:NO]];
                 }];

 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T21:15:49.573

好的 - 这是一个老问题，但我有点想通了这个问题。由于我围绕 Y 轴翻转这些图像，因此我能够更改动画图像的 Z 位置。在我的 startAnimation 方法中，我添加了：

```
 float pageLevelLayerPosition;
  // logic to set the zposition variable 100 more than anything nearby 

  _originalImageViewZPosition = bigImageView.layer.zPosition;
  [bigImageView.layer setZPosition:pageLevelLayerPosition]; 
```

然后在animationDidStop中，我添加了相关的代码行将其重置回0，我正在删除动画。我有一些代码来管理变量，因此我确信这个数字比附近的任何东西都大。

我想如果我进入 3-D 动画，那么我需要更密切地控制它，但这就是导致我的问题的原因。

# spring - Eclipselink 和 Spring 3.1

> ID：10389354
> 
> 赞同：2
> 
> 时间：2012-04-30T19:22:34.680
> 
> 标签：spring, jpa, eclipselink

我已经让 Hibernate 正常工作，但我正在尝试更改为 Eclipselink。我一直在为此寻找解决方案，但没有结果。人们建议把这两个（不要放在一起）

```
<class>no.mesta.driftslogg.model.Person</class>  
<exclude-unlisted-classes>false</exclude-unlisted-classes> 
```

在persistence.xml中

* * *

持久性.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence version="1.0" xmlns="http://java.sun.com/xml/ns/persistence"     xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_1_0.xsd">

<persistence-unit name="cccPersistenceUnit">
    <provider>org.eclipse.persistence.jpa.PersistenceProvider</provider>
    <exclude-unlisted-classes>false</exclude-unlisted-classes>
    <properties>
        <property name="eclipselink.ddl-generation" value="create-tables" />
        <property name="eclipselink.ddl-generation.output-mode" value="database" />
    </properties>
</persistence-unit> 
```

* * *

应用程序上下文.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:context="http://www.springframework.org/schema/context"  xmlns:p="http://www.springframework.org/schema/p"
xsi:schemaLocation="
    http://www.springframework.org/schema/beans
    http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
    http://www.springframework.org/schema/context
    http://www.springframework.org/schema/context/spring-context-3.0.xsd">

<!-- Spring transaction manager -->
<bean id="transactionManager" class="org.springframework.orm.jpa.JpaTransactionManager" p:entityManagerFactory-ref="entityManagerFactory" />

<!-- JPA Hibernate shared entity manager -->
<bean id="entityManager" class="org.springframework.orm.jpa.support.SharedEntityManagerBean" p:entityManagerFactory-ref="entityManagerFactory" /

<bean id="entityManagerFactory" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">

    <property name="dataSource" ref="dataSource" />
    <property name="persistenceUnitName" value="cccPersistenceUnit" />
    <property name="jpaDialect" ref="jpaDialect" />
    <property name="jpaVendorAdapter">
        <bean class="org.springframework.orm.jpa.vendor.EclipseLinkJpaVendorAdapter">
        </bean>
    </property>
    <property name="loadTimeWeaver">
        <bean class="org.springframework.instrument.classloading.SimpleLoadTimeWeaver" />
    </property>
</bean>

<bean id="jpaDialect" class="org.springframework.orm.jpa.vendor.EclipseLinkJpaDialect" />

<bean class="org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor" />

<bean id="jpaVendorAdapter" class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter">
    <property name="generateDdl" value="true" />
    <property name="databasePlatform" value="org.hibernate.dialect.MySQLDialect" />
    <!-- <property name="showSql" value="true" /> -->
</bean>

<bean id="dataSource" class="com.mchange.v2.c3p0.ComboPooledDataSource" destroy-method="close">
    <property name="driverClass" value="com.mysql.jdbc.Driver" />
    <property name="jdbcUrl" value="jdbc:mysql://localhost:3306/driftslogg" />
    <property name="user" value="root" />
    <property name="password" value="root" />
    <property name="acquireIncrement" value="5" />
    <property name="idleConnectionTestPeriod" value="60" />
    <property name="maxPoolSize" value="100" />
    <property name="maxStatements" value="50" />
    <property name="minPoolSize" value="10" />
</bean> 
```

* * *

道类

```
package no.mesta.driftslogg.dao.jpa;

import javax.persistence.EntityManager;
import javax.persistence.PersistenceContext;

import no.mesta.driftslogg.dao.PersonDao;
import no.mesta.driftslogg.model.Person;

import org.springframework.stereotype.Repository;

@Repository
public class PersonDaoJpa implements PersonDao {

protected EntityManager entityManager;

@PersistenceContext
public void setEntityManager(EntityManager entityManager) {
    this.entityManager = entityManager;
}

@Override
public Person save(Person person) {
    if (person.getId() != null) {
        return entityManager.merge(person);
    } else {
        entityManager.persist(person);
    }
    return person;
}

} 
```

* * *

实体类

```
package no.mesta.driftslogg.model;

import javax.persistence.Entity;
import javax.persistence.GeneratedValue;
import javax.persistence.GenerationType;
import javax.persistence.Id;

@Entity
public class Person {

@Id
@GeneratedValue(strategy = GenerationType.IDENTITY)
private Long id;

private String name;

public Long getId() {
    return id;
}

public void setId(Long id) {
    this.id = id;
}

public String getName() {
    return name;
}

public void setName(String name) {
    this.name = name;
}

} 
```

* * *

错误

```
org.springframework.web.util.NestedServletException：请求处理失败；嵌套异常是 java.lang.IllegalArgumentException: Object: Todo [summary=This is a test, description=This is a test] 不是已知的实体类型。
    org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:894)
    org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:778)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:88)
    org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
    com.opensymphony.sitemesh.webapp.SiteMeshFilter.obtainContent(SiteMeshFilter.java:129)
    com.opensymphony.sitemesh.webapp.SiteMeshFilter.doFilter(SiteMeshFilter.java:77)
根本原因

java.lang.IllegalArgumentException: Object: Todo [summary=This is a test, description=This is a test] 不是已知的实体类型。
    org.eclipse.persistence.internal.sessions.UnitOfWorkImpl.registerNewObjectForPersist(UnitOfWorkImpl.java:4169)
    org.eclipse.persistence.internal.jpa.EntityManagerImpl.persist(EntityManagerImpl.java:440)
    no.mesta.driftslogg.dao.jpa.PersonDaoJpa.save(PersonDaoJpa.java:45)
    no.mesta.driftslogg.service.impl.PersonServiceImpl.savePerson(PersonServiceImpl.java:20)
    sun.reflect.NativeMethodAccessorImpl.invoke0（本机方法）
    sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    java.lang.reflect.Method.invoke(Method.java:597)
    org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:318)
    org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:183)
    org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:150)
    org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:110)
    org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
    org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202)
    $Proxy15.savePerson（未知来源）
    no.mesta.driftslogg.controller.HomeController.home(HomeController.java:31)
    sun.reflect.NativeMethodAccessorImpl.invoke0（本机方法）
    sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    java.lang.reflect.Method.invoke(Method.java:597)
    org.springframework.web.method.support.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:212)
    org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:126)
    org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:96)
    org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:617)
    org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:578)
    org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:80)
    org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:900)
    org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:827)
    org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)
    org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:778)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:88)
    org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
    com.opensymphony.sitemesh.webapp.SiteMeshFilter.obtainContent(SiteMeshFilter.java:129)
    com.opensymphony.sitemesh.webapp.SiteMeshFilter.doFilter(SiteMeshFilter.java:77)

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T21:07:16.943

我没有使用 SimpleLoadTimeWeaver（我也无法让它工作），而是使用

```
<context:load-time-weaver/> 
```

这需要使用 spring-instrument 中的 java 代理，因此您必须使用 agument 启动 JVM，告诉它在哪里可以找到它。就像是

```
-javaagent:spring-instrument-3.1.1.RELEASE.jar 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T13:29:19.330

你的错误是在一个“Todo”对象上，而不是一个人。确保您已映射所有相关对象。

你需要把 no.mesta.driftslogg.model.Person 放在你的 persistence.xml 中，你没有这个。

# sql - 更改 SQL Server 中的页面大小是处理“宽”表的最佳选择吗？

> ID：10389360
> 
> 赞同：1
> 
> 时间：2012-04-30T19:22:49.947
> 
> 标签：sql, sql-server, query-optimization

我的应用程序中有多个表，它们都非常宽和非常高。宽度有时来自 10-20 列，具有各种数据类型 varchar/nvarchar 以及 char/bigint/int/decimal。我的理解是SQL中默认的页面大小是8k，但是可以手动更改。此外，varchar/nvarchar 列不受此限制，它们经常（总是？）移动到一个单独的位置，这个过程称为 Row_Overflow。Evenso，MS 文档指出 Row-Overflowed 数据会降低性能。“查询和执行其他选择操作，例如对包含行溢出数据的大记录进行排序或连接会减慢处理时间，因为这些记录是同步处理而不是异步处理的”

他们建议将大列移动到可连接的元数据表中。“然后可以在异步 JOIN 操作中查询”。

我的问题是，是否值得扩大页面大小以容纳宽列，还有其他性能问题吗？如果我没有这样做，而是将表分区为 1 个或多个元数据表，并且这些表在 100MM 记录范围内变得“大”，那么加入分区表不会远远超过好处吗？此外，如果 SQL Server 在单核机器上（或在 SQL Azure 上），我的理解是并行性被禁用，那么考虑到连接不再是异步的，这是否也会消除移动表引入分区的好处？您还有其他推荐的策略吗？

**编辑：**根据下面的精彩评论和一些额外的阅读（我本来应该做的），您不能手动更改 SQL Server 页面大小。此外，相关的 SO 帖子：[我们如何更改 SQL Server 的页面大小？](https://stackoverflow.com/questions/7067365/how-do-we-change-the-page-size-of-sql-server). 来自@remus-rusanu 的其他很好的答案

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-30T19:28:05.020

您无法更改页面大小。

必要时将 varchar(x) 和 (MAX) 移出行 - 也就是说，页面本身没有足够的空间。如果您有很多大值，将它们移动到其他表中然后将它们连接到基表中可能确实更有效 - 特别是如果您并不总是查询该数据。

没有同步和异步读取该行外数据的概念。当您执行查询时，它会同步运行。您可能有并行化，但这是完全不同的事情，在这种情况下不会受到影响。

编辑：为了给您更多实用的建议，您需要向我们展示您的架构和一些实际的数据特征。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-30T19:43:50.320

> 我的理解是SQL中默认的页面大小是8k，但是可以手动更改

“大页面”设置是指内存分配，而不是更改数据库页面大小。请参阅[SQL Server 和大页面说明](http://blogs.msdn.com/b/psssql/archive/2009/06/05/sql-server-and-large-pages-explained.aspx)。恐怕你的理解有点不对劲。

作为一般非特定建议，对于宽固定长度列，最佳策略是部署[row-compression](http://msdn.microsoft.com/en-us/library/cc280576.aspx)。对于`nvarchar`，[Unicode 压缩](http://msdn.microsoft.com/en-us/library/ee240835.aspx)有很大帮助。对于具体的建议，您需要衡量。您遇到的确切性能问题是什么？你是怎么测量的？您是否使用了诸如[等待和队列](http://technet.microsoft.com/en-us/library/cc966413.aspx)之类的方法来识别瓶颈，并且您肯定行大小和行外存储是一个问题？在我看来，您使用了[其他“方法”](http://rusanu.com/2010/03/31/the-bizzaro-guide-to-sql-server-performance/) ...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-30T19:55:30.140

*   您无法更改默认的 8k 页面大小
*   `varchar`并且`nvarchar`被视为任何其他字段，除非是`(max)`这意味着它们将被存储一点点不同，因为它们可以扩展页面的大小，而您不能使用其他数据类型来做到这一点，也是因为这是不可能的

例如，如果您尝试执行此语句：

```
create table test_varchars(
  a varchar(8000),
  b varchar(8001),
  c nvarchar(4000),
  d nvarchar(4001)
) 
```

a 列和 c 列很好，因为它们的长度最大为 8000 字节。

但是，在 b 列和 d 列上会出现以下错误：

> 给列“b”的大小 (8001) 超过了任何数据类型所允许的最大值 (8000)。
> 赋予参数“d”的大小 (4001) 超过了允许的最大值 (4000)。

因为它们都超过了 8000 字节的限制。（记住or`n`前面的意思是unicode，占用双倍空间）`varchar``char`

# facebook-graph-api - Facebook Graph Api——我可以得到“默认”字段加上一些吗？

> ID：10389364
> 
> 赞同：5
> 
> 时间：2012-04-30T19:23:18.443
> 
> 标签：facebook-graph-api

当我向[https://graph.facebook.com/me](https://graph.facebook.com/me)发出请求时——我得到一个包含大量良好数据的大型 JSON 对象。

但是，我还想获取用户的封面照片（如果存在）。有没有办法做到这一点，同时还保留默认字段？

例如：[https](https://graph.facebook.com/me?fields=cover) ://graph.facebook.com/me?fields= cover——只返回封面图片。

如果我使用一个字段，我是否需要准确指定我需要的其他字段？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-30T22:48:09.453

您需要逐项列出您想要的所有字段，或者接受默认值，没有办法获得“默认值+这些其他字段”

# vb.net - 如何为字符串添加下标？

> ID：10389369
> 
> 赞同：0
> 
> 时间：2012-04-30T19:23:28.867
> 
> 标签：vb.net, string, subscript, formulas

我需要在字符串 [变量] 中添加一个下标（字符旁边的一个小数字，例如 2 或 3 - 注意：不是...的幂）。这可能吗？我不希望代码很长，因为我需要处理很多公式，一次一个。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T11:14:31.913

*这可能吗？*否 - 字符串变量不包含格式。

为了实现这一点，您需要向字符串添加某种格式并以可以显示不同格式的方式显示它 - 例如[RichTextBox](http://msdn.microsoft.com/en-us/library/system.windows.forms.richtextbox.aspx)控件

尝试添加 RichTextBox 控件并运行以下行：

```
 RichTextBox1.Rtf = "{\rtf1\fbidis\ansi\ansicpg1252\deff0\deflang2057{\fonttbl{\f0\fswiss\fprq2\fcharset0 Calibri;}{\f1\fnil\fcharset0 Segoe UI;}}\viewkind4\uc1\pard\ltrpar\sa200\sl276\slmult1\f0\fs22 sometext\fs12 subscript\fs22\par\pard\ltrpar\f1\fs17\par}" 
```

我不声称知道这里的所有格式是什么，所以我会让你自己弄清楚 - 希望对你有所帮助......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T19:26:37.553

您将不得不使用字符集下标数字。字符串不包含格式。

[http://www.fileformat.info/info/unicode/char/2082/index.htm](http://www.fileformat.info/info/unicode/char/2082/index.htm)

# html - 使用溢出自动并排浮动文本

> ID：10389370
> 
> 赞同：1
> 
> 时间：2012-04-30T19:23:29.720
> 
> 标签：html, css, overflow

我试图让一个段落显示在另一个段落的右侧，但它目前出现在它的下方。我正在尝试使用溢出自动，但不确定它应该去哪里。

![例子](../Images/9ed1e3d7b094c00b59cdc30d975874d9.png)

```
<div style="padding-left: 5px; padding-right: 5px; float: left;">
    <p style="width: 400px; border-right: 2px solid black;">
        Lorem ipsum dolor sit amet, dui purus nascetur ultrices commodo at morbi, eget nulla.
        Ipsum donec amet, facilisis pellentesque lacinia vel quis lacus leo, mollis sit
        lacinia eros dui in, nullam fermentum sollicitudin viverra. Proin cum. Vel ipsum
    </p>
    <p style="padding-left: 5px;">
        Lorem ipsum dolor sit amet, et felis, viverra at ullamcorper interdum, suspendisse
        ipsum dolor sint, lacinia nec vestibulum dolor per rutrum, lacus consequat. Architecto
        ultricies ut pellentesque sapien eget sed. Mauris justo nonummy euismod consectetuer
        pellentesque. Etiam metus vestibulum lacinia eget vitae amet, volutpat sem integer
    </p>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T19:27:44.247

演示：http: [//jsfiddle.net/rn8k3/](http://jsfiddle.net/rn8k3/)

```
<div style="padding-left: 5px; padding-right: 5px; float: left;">
    <p style="width: 48%; border-right: 2px solid black;float:left;">
        Lorem ipsum dolor sit amet, dui purus nascetur ultrices commodo at morbi, eget nulla.
        Ipsum donec amet, facilisis pellentesque lacinia vel quis lacus leo, mollis sit
        lacinia eros dui in, nullam fermentum sollicitudin viverra. Proin cum. Vel ipsum
    </p>
    <p style="width:48%;padding-left: 5px;float:left;">
        Lorem ipsum dolor sit amet, et felis, viverra at ullamcorper interdum, suspendisse
        ipsum dolor sint, lacinia nec vestibulum dolor per rutrum, lacus consequat. Architecto
        ultricies ut pellentesque sapien eget sed. Mauris justo nonummy euismod consectetuer
        pellentesque. Etiam metus vestibulum lacinia eget vitae amet, volutpat sem integer
    </p>
</div>​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T19:34:25.630

溢出：auto 属于父 div，并且您需要两个浮动元素的宽度。试试这个：

```
<div style="padding-left: 5px; padding-right: 5px; overflow: auto;">
    <p style="float: left; width: 400px; border-right: 2px solid black;">
        Lorem ipsum dolor sit amet, dui purus nascetur ultrices commodo at morbi, eget nulla.
        Ipsum donec amet, facilisis pellentesque lacinia vel quis lacus leo, mollis sit
        lacinia eros dui in, nullam fermentum sollicitudin viverra. Proin cum. Vel ipsum
    </p>
    <p style="float: left; width: 400px; padding-left: 5px;">
        Lorem ipsum dolor sit amet, et felis, viverra at ullamcorper interdum, suspendisse
        ipsum dolor sint, lacinia nec vestibulum dolor per rutrum, lacus consequat. Architecto
        ultricies ut pellentesque sapien eget sed. Mauris justo nonummy euismod consectetuer
        pellentesque. Etiam metus vestibulum lacinia eget vitae amet, volutpat sem integer
    </p>
</div>​ 
```

[小提琴](http://jsfiddle.net/RymfP/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T19:26:27.410

您需要第二段的宽度，我也认为它们也需要浮动。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-30T19:27:21.123

您需要为两个段落设置 a`width`和`float:left`。您不需要`float:left`包装 DIV。

```
<p style="width: 400px; border-right: 2px solid black; float:left;"> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-30T19:40:14.127

`p`第二个标签上不需要宽度的另一个选项：

```
<div style="padding-left: 5px; padding-right: 5px;position:relative; ">
    <p style="width: 400px; border-right: 2px solid black;display: inline-block;">
        Lorem ipsum dolor sit amet, dui purus nascetur ultrices commodo at morbi, eget nulla.
        Ipsum donec amet, facilisis pellentesque lacinia vel quis lacus leo, mollis sit
        lacinia eros dui in, nullam fermentum sollicitudin viverra. Proin cum. Vel ipsum
    </p>
    <p style="padding-left: 5px;display: inline-block;position:absolute;top:0px;right:0px;margin-left:410px;">
        Lorem ipsum dolor sit amet, et felis, viverra at ullamcorper interdum, suspendisse
        ipsum dolor sint, lacinia nec vestibulum dolor per rutrum, lacus consequat. Architecto
        ultricies ut pellentesque sapien eget sed. Mauris justo nonummy euismod consectetuer
        pellentesque. Etiam metus vestibulum lacinia eget vitae amet, volutpat sem integer
    </p>
</div> 
```

# mysql - 有没有办法将整个 MySQL 数据库转换或导出为有效的 CSV 文件？

> ID：10389372
> 
> 赞同：3
> 
> 时间：2012-04-30T19:23:38.353
> 
> 标签：mysql, csv, phpmyadmin

我正在使用一个 1.5 gig 的大型数据库和数百个表/字段。我需要将所有表格转换为 CSV 文件。PhpMyAdmin 不容易做到这一点/超时。

我宁愿使用 shell / mysql 命令或脚本将数据取出并输入 CSV。

笔记：

**我正在寻找导出数据库的所有表 - 一次。我无法为每个表单独生成导出命令。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T19:59:47.817

您可以使用[`mysqldump`](http://dev.mysql.com/doc/refman/5.6/en/mysqldump.html)：

> 该*`mysqldump`*命令还可以生成 CSV、其他分隔文本或 XML 格式的输出。

特别是，请查看以下论点：

*   [`--tab=`***`path`***](http://dev.mysql.com/doc/refman/5.6/en/mysqldump.html#option_mysqldump_tab)
*   [`--fields-[optionally-]enclosed-by`](http://dev.mysql.com/doc/refman/5.6/en/mysqldump.html#option_mysqldump_fields)
*   [`--fields-escaped-by`](http://dev.mysql.com/doc/refman/5.6/en/mysqldump.html#option_mysqldump_fields)
*   [`--fields-terminated-by`](http://dev.mysql.com/doc/refman/5.6/en/mysqldump.html#option_mysqldump_fields)
*   [`--lines-terminated-by`](http://dev.mysql.com/doc/refman/5.6/en/mysqldump.html#option_mysqldump_lines-terminated-by)
*   [`--no-create-info`](http://dev.mysql.com/doc/refman/5.6/en/mysqldump.html#option_mysqldump_no-create-info)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T19:26:16.927

您将需要逐表执行此操作，请参见下文。

```
SELECT *
INTO OUTFILE '/tmp/products.csv'
FIELDS TERMINATED BY ','
ENCLOSED BY '"'
ESCAPED BY '\\'
LINES TERMINATED BY '\n'
FROM products 
```

请注意，该目录必须可由 MySQL 数据库服务器写入。如果不是，您将收到如下错误消息：

```
#1 - Can't create/write to file '/tmp/products.csv' (Errcode: 13) 
```

另请注意，如果文件已存在，它不会覆盖该文件，而是显示以下错误消息：

```
#1086 - File '/tmp/products.csv' already exists 
```

来源：[http ://www.electrictoolbox.com/mysql-export-data-csv/](http://www.electrictoolbox.com/mysql-export-data-csv/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-01-05T05:57:36.080

软件信息：[sql2csv](https://www.convert-in.com/sql2csv.htm)

下载链接exe： http: [//www.convert-in.com/demos/sql2csv.exe](http://www.convert-in.com/demos/sql2csv.exe)

这是我为 Windows 找到的最佳选择。使用该软件，我们可以连接到本地和远程数据库服务器并选择模式。我们可以一次性将所有表格数据提取到有效的 CSV 文件中。

特征 ：

[![在此处输入图像描述](../Images/59164e63a86dee1b1f2f353875349a21.png)](https://i.stack.imgur.com/FLeKG.png)

# asp.net - 数据网格行保存在集合中并显示在另一个页面 asp.net

> ID：10389382
> 
> 赞同：0
> 
> 时间：2012-04-30T19:24:58.253
> 
> 标签：asp.net, session, collections, datatable, rows

我的页面中有一个网格，它有四列，多行 Userid 用户名 stateid 和 statename

我应该使用哪个集合来使用会话将数据发送到另一个页面我的代码是

```
string[] strArray = new string[] {}; 

        foreach (GridViewRow gr in gvCompany.Rows)
        {
           strArray =new string[4] {new[] {gr.Cells[0].Text}.ToString(), new[] {gr.Cells[1].Text}.ToString(), new[] {gr.Cells[2].Text}.ToString(),new[] {gr.Cells[3].Text}.ToString()};

        }
        Session["List"] = strArray;
        Response.Redirect("Tid.aspx?Mode=List"); 
```

在 tid 页面上，我的代码是

```
string[] ls = new string[] { }; 
                  ls =(string[]) Session["List"];
                foreach (string st in ls )
                {
                    //get each cell
                } 
```

但 st 的值是 system.string 而不是 value

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T19:55:43.297

不建议使用字符串 []，因为将来字段越多，保持字段和索引关系没有错误就会变得困难。

您可以创建一个适当的类对象，例如。Company 并将 List 传递给其他类，List 位于 System.Collections.Generic 命名空间中。

# c++ - 没有对“pthread_create”的匹配函数调用

> ID：10389384
> 
> 赞同：4
> 
> 时间：2012-04-30T19:25:08.333
> 
> 标签：c++, xcode, class, pthreads

我正在使用 Xcode 和 C++ 制作一个简单的游戏。问题是以下代码：

```
#include <pthread.h>

void *draw(void *pt) {
    // ...
}

void *input(void *pt) {
    // ....
}

void Game::create_threads(void) {
    pthread_t draw_t, input_t;
    pthread_create(&draw_t, NULL, &Game::draw, NULL);   // Error
    pthread_create(&input_t, NULL, &Game::draw, NULL);  // Error
    // ...
} 
```

但是 Xcode 给了我错误：“ `No matching function call to 'pthread_create'`”。我不知道因为我已经包括在内`pthread.h`了。

怎么了？

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-30T20:14:08.433

正如 Ken 所说，作为线程回调传递的函数必须是 (void*)(*)(void*) 类型的函数。

您仍然可以将此函数包含为类函数，但必须将其声明为静态。您可能需要为每种线程类型（例如draw）使用不同的线程。

例如：

```
class Game {
   protected:
   void draw(void);
   static void* game_draw_thread_callback(void*);
};

// and in your .cpp file...

void Game::create_threads(void) {
   //  pass the Game instance as the thread callback's user data
   pthread_create(&draw_t, NULL, Game::game_draw_thread_callback, this);
}

static void* Game::game_draw_thread_callback(void *game_ptr) {
   //  I'm a C programmer, sorry for the C cast.
   Game * game = (Game*)game_ptr;

   //  run the method that does the actual drawing,
   //  but now, you're in a thread!
   game->draw();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T19:27:42.090

使用 pthread 编译线程是通过提供选项来完成的`-pthread`。例如编译 abc.cpp 将要求您像`g++ -pthread abc.cpp`else 那样编译会给您一个错误，例如`undefined reference to`pthread_create collect2: ld returned 1 exit status` 。必须有一些类似的方式来提供 pthread 选项。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-30T20:05:15.287

您正在传递一个`&Game::draw`需要纯函数指针的成员函数指针（即）。您需要使该函数成为类静态函数。

编辑添加：如果您需要调用成员函数（这很可能），您需要创建一个类静态函数，将其参数解释为 a`Game*`然后在其上调用成员函数。`this`然后，作为 的最后一个参数传递`pthread_create()`。

# visual-studio-2010 - 为每个 Class 文件添加一组命名空间？

> ID：10389386
> 
> 赞同：1
> 
> 时间：2012-04-30T19:25:19.490
> 
> 标签：visual-studio-2010

通常在 VS2010 中工作时，我发现我在*所有文件*中都有我想要的命名空间列表。例如

```
using Common.Logging; 
```

有没有办法可以配置它，最好是在项目或解决方案级别？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T19:30:01.403

确实没有内置的东西可以做到这一点。您可以编辑 C:\Program Files (x86)\Microsoft Visual Studio 10.0\Common7\IDE\ItemTemplatesCache\CSharp\Code\1033 中的 Class.zip 文件，以更改“添加类”创建的默认类中的用法。

如果您想要特定项目/解决方案的内容，您可能需要考虑使用自定义片段而不是“添加类”。

# vim - 未定义变量：mapleader

> ID：10389387
> 
> 赞同：4
> 
> 时间：2012-04-30T19:25:25.713
> 
> 标签：vim

我遇到了一个问题，即没有涉及`<leader>`密钥的命令似乎有效。

```
:let mapleader
=> Undefined variable: mapleader 
```

我`.vimrc`提到`leader`了三遍。它们都是对函数调用的引用。

```
map <leader>n :call RenameFile()<cr>
map <leader>p :PromoteToLet<cr>
nnoremap <leader>. :call OpenTestAlternate()<cr> 
```

这是我在 Github 上[的 .vimrc 的链接。](https://github.com/dtuite/dotfiles/blob/master/.vimrc)

任何人有任何想法可能是什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T19:28:17.227

尝试在你的 .vimrc 中设置你的 mapleader：

```
let mapleader = "," 
```

# asp.net - 通过从字符串解析来加载服务器控件的 ASP.NET 方法是什么

> ID：10389388
> 
> 赞同：0
> 
> 时间：2012-04-30T19:25:27.413
> 
> 标签：asp.net, servercontrol, parsecontrol

我相信我已经看到了这样做的方法，但我不记得了。

我正在尝试使用以下方式加载控件：

```
string str = "<asp:label id=\"myLabel\" runat=\"server\" />";

Control ctrl = SomeMagicalLoadControlMethod(str);
Page.controls.add(ctrl); 
```

有办法吗？

是的，我熟悉 LoadControl 方法，但这不是我需要的。

**更新：**

我想到的方法是*ParseControl*。

为了帮助别人。。

```
Control ctrl = ParseControl("<asp:label id=\"myLabel\" runat=\"server\" />"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T19:28:35.663

我无法想象做像你描述的那样的事情。这样做看起来是一件非常可怕的事情，如果这确实是可能的，我宁愿忘记我看到它并重新考虑我的方法。

# iphone - Xcode Organizer - 显示黄灯的设备

> ID：10389392
> 
> 赞同：0
> 
> 时间：2012-04-30T19:25:36.397
> 
> 标签：iphone

获得开发人员证书以在 iphone 上测试应用程序输入设备标识符，将 iphone 作为管理器中的设备连接，它显示黄灯。在软件版本中，它显示 5.1 已安装在 iphone 设备上。它显示它与此安装的 iOS SDK 不匹配任何支持开发的 iOS 版本。请将设备恢复到下面列出的操作系统版本

Xcode 支持的 iOS 版本 最新 5.0 (9A334) 4.3 (8F190) 4.3 4.2 4.1 4.0.2 4.0.1 4.0

尽管得到了最新版本，但我仍然恢复了 iphone，但仍然有黄灯没有变成绿色，不知道如何解决这个问题。

感谢帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T19:46:07.463

如果您使用的是 xcode 4.2 和基本 SDK 5.0，那么您**将无法**在操作系统版本为 5.1 的手机上测试该应用程序。

一般规则是，如果您希望 XCODE 检测设备进行测试，则手机上的操作系统版本应始终小于或等于 XCODE 支持的基本 SDK（最新）。（目标操作系统也应如此）应用程序版本）

XCODE 4.3 支持 Base SDK 5.1，它仅适用于 LION-X。

希望这会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T19:34:20.810

听起来你没有 Mac OS X Lion。

Apple 不再支持 Snow Leopard 作为开发操作系统。iOS 5.0 是 Snow Leopard 上发布的最终版本。

听起来您的 iPhone 已更新到 v5.1。如果您将操作系统更新到 Lion，您将被允许从苹果的开发者网站安装 v5.1 的 iOS 软件，并像往常一样继续开发和测试您的应用程序。不过很抱歉，这对于 Snow Leopard 是不可能的，这就是为什么您的组织者会说“请将您的 iPhone iOS 恢复到 v5.0，因为这是我唯一可以支持的”

# c++ - 如何在运行时在 C++ 中搜索继承树？

> ID：10389394
> 
> 赞同：0
> 
> 时间：2012-04-30T19:25:47.970
> 
> 标签：c++, inheritance

我有一个模板，它为一个类添加了一个特定的能力：

```
template <Class ReceiverOfAbility>
class Able : public ReceiverOfAbility, SomeOtherClass
{
...
} 
```

然后我有一个标准的树状继承：

```
class Base
{};

class Derived1 : public Base
{};

class Derived2 : public Derived1
{};

... 
```

但是在树的某个地方有一个“向后的分支”

```
class Derived2WithAbility : public Able<Derived2>
{}; 
```

假设我有：

```
 Base* basePointer = new DerivedWithAbility; 
```

如何在运行时强制`basePointer`转换`SomeOtherClass`？`dynamic_cast`不起作用。问题是会有很多派生类，我不知道类在树中的哪个位置继承了这种能力。我需要在树中搜索发生继承的位置`Able`。

有任何想法吗？

编辑：

我尝试过了

```
dynamic_cast<SomeOtherClass*>(dynamic_cast<Derived2WithAbility*>(basePointer)) 
```

但我得到：

```
error: ‘SomeOtherClass’ is an inaccessible base of ‘Derived2WithAbility’ 
```

任何想法为什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-30T19:51:43.067

```
class Able : public ReceiverOfAbility, SomeOtherClass 
```

`SomeOtherClass`是 的**私有**基类`Able<whatever>`。为了`dynamic_cast`工作（即能够`SomeOtherClass`成功施法），它必须是一个公共基础。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T19:41:33.947

我认为扫描你的继承树不是一个好主意。请参阅这篇关于通过 vtables 的帖子，它甚至看起来都无法通过您的代码访问

[http://kaisar-haque.blogspot.com/2008/07/c-accessing-virtual-table.html](http://kaisar-haque.blogspot.com/2008/07/c-accessing-virtual-table.html)

我可以看到这在调试中很有用，但在运行时你不能指望它。

我认为你遇到的是多重继承复杂的原因，你有从多个基类继承的类，因此在这些情况下找到一个公共的基类根来指向你的派生对象可能会变得很麻烦。除了重新考虑你的继承体系之外，我没有真正的答案。您可以使用组合而不是继承并坚持使用单个继承树吗？那会让事情变得简单得多。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-30T19:31:40.007

> 如何在运行时将 basePointer 转换为 SomeOtherClass？dynamic_cast 不起作用。

您必须使用 dynamic_cast。如果它“不起作用”，那么你不能施放。只有当基类至少有一个虚函数时 dynamic_cast 才会起作用（虚析构函数应该可以解决问题）。

> 我需要在树中搜索从 Able 继承的位置。

据我所知，RTTI 不提供类的“继承”信息。但是，您可能能够在调试器中看到继承信息。当然，此信息的可用性取决于调试器。

- 编辑 -

您使用私有继承从 SomeOtherClass 继承。公开继承，它会起作用。

# visual-studio-addins - Visual Studio Addin：如何知道已经打开的文档是否获得焦点？

> ID：10389395
> 
> 赞同：3
> 
> 时间：2012-04-30T19:25:54.057
> 
> 标签：visual-studio-addins

我是 VS Addins 的新手。

虽然，我订阅了 DocumentEvent.DocumentOpened。但另外，我需要检测已经打开的文档是否获得焦点，然后我会阅读它的内容。

如何获得它的专注状态？

谢谢

法鲁克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T07:02:34.700

幸运的是，在玩了一些示例代码之后，我得到了我想要的。它实际上是 EnvDTE.WindowEvents。

在 VS IDE 中，每个 Code Document 也是一个 Window。它有焦点事件：WindowActivated。这是我订阅此活动的代表：

```
WinEvents.WindowActivated += new _dispWindowEvents_WindowActivatedEventHandler(WinEvents_WindowActivated);

void WinEvents_WindowActivated(Window GotFocus, Window LostFocus)        
{            
   Debug.WriteLine("GotFocus: " + GotFocus.Caption );            
   //throw new NotImplementedException();        
} 
```

此致

法鲁克

# mysql - MySQL查询仅通过循环第一次工作

> ID：10389400
> 
> 赞同：1
> 
> 时间：2012-04-30T19:26:31.437
> 
> 标签：mysql

我正在尝试将大约 1000 条记录惰性化到 MySQL 中。但是我在下面的尝试仅在第一个查询中“插入”。之后，我收到“或死”错误消息。我尝试将 if 语句更改为随机数（除五个以外），但它总是在第一次插入后死亡。我究竟做错了什么？

```
$i=0;
foreach(.....){
    if($>5){
        insert($name, $phone);
    }
}

function insert($n, $p){

    $dbhost = "---"; 
    $dbuser = "---";
    $dbpass = "---";
    $dbname = "---";

    $conn = mysql_connect($dbhost, $dbuser, $dbpass) or die ("Error connecting to mysql");
    mysql_select_db($dbname);

    $query ="INSERT INTO foo (name, phone) VALUES ('$n', '$p')";
    mysql_query($query) or die('Error, query failed');  
    mysql_close();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T19:34:53.617

这是你的代码

```
$i=0;
foreach(.....){
    if($>5){
        insert($name, $phone);
    }
}

function insert($n, $p){

    $dbhost = "---"; 
    $dbuser = "---";
    $dbpass = "---";
    $dbname = "---";

    $conn = mysql_connect($dbhost, $dbuser, $dbpass) or die ("Error connecting to mysql");
    mysql_select_db($dbname);

    $query ="INSERT INTO foo (name, phone) VALUES ('$n', '$p')";
    mysql_query($query) or die('Error, query failed');  
    mysql_close();
} 
```

连接到 MySQL 只是为了插入一行，然后[**断开并重新连接是一项非常昂贵的操作**](https://dba.stackexchange.com/a/16973/877)！！！

尝试像这样重新组织它：

```
$dbhost = "---"; 
$dbuser = "---";
$dbpass = "---";
$dbname = "---";
$conn = mysql_connect($dbhost, $dbuser, $dbpass) or die ("Error connecting to mysql");
mysql_select_db($dbname);
$i=0;
foreach(.....){
    if($>5){
        insert($name, $phone);
    }
}
mysql_close();

function insert($n, $p){
    $query ="INSERT INTO foo (name, phone) VALUES ('$n', '$p')";
    mysql_query($query) or die('Error, query failed');  
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T19:28:04.623

您是否收到主键错误？

# php - 我可以将表单中的多个值添加到同一个数组而不将每个值附加为单独的值吗？

> ID：10389406
> 
> 赞同：0
> 
> 时间：2012-04-30T19:27:01.237
> 
> 标签：php, forms

这是我的代码。PHP 正在处理表单。理想的做法是让第一个 [] 充当追加，第二个 [] 将值添加到数组的最后一个位置。

```
<label for="file[]['title']" class="fileTitle">Description:<input type="text" name="file[]['title']"></label>
<label for="file[]['url']" class="fileUrl">Attachment URL:<input type="text" name="file[]['url']"></label> 
```

所以我想我的问题是：在 PHP 中是否有一种简短的形式，用于以与 [] 附加到数组相同的方式将值添加到数组的最后一个位置？

**编辑：**我的问题是真的有没有办法做到这一点而不给数组编号，所以它可以很容易地与 jquery $.clone(); 一起使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T19:31:41.793

您使用 [] 而不是 [1]、[3] 等是否有原因？因为一旦提交了表单，您就可以遍历它，忽略数字，无论它们是什么，并且由于具有相同的索引，键总是一致的。

```
<label for="file[1]['title']" class="fileTitle">Description:<input type="text" name="file[1]['title']"></label>
<label for="file[1]['url']" class="fileUrl">Attachment URL:<input type="text" name="file[1]['url']"></label>
<label for="file[2]['title']" class="fileTitle">Description:<input type="text" name="file[2]['title']"></label>
<label for="file[2]['url']" class="fileUrl">Attachment URL:<input type="text" name="file[2]['url']"></label>

foreach($_POST['file'] as $key=>$object){
   $title=$object['title'];
   $url=$object['url'];
} 
```

# google-maps - 在哪里可以找到有关 Google 地图单一搜索框覆盖范围的信息？

> ID：10389409
> 
> 赞同：0
> 
> 时间：2012-04-30T19:27:20.937
> 
> 标签：google-maps, search, maps, local

在哪里可以找到 Google 地图支持单一搜索框的国家/地区的完整列表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T19:32:33.547

我不确定您到底在问什么，但 Google Maps 提供的 API 覆盖范围列表位于：[Google Maps API Coverage](https://spreadsheets.google.com/spreadsheet/pub?key=0Ah0xU81penP1cDlwZHdzYWkyaERNc0xrWHNvTTA1S1E&gid=0)

# coldfusion - 如何正确使用 Coldfusion 的 FileExist() 方法？

> ID：10389410
> 
> 赞同：5
> 
> 时间：2012-04-30T19:27:23.573
> 
> 标签：coldfusion, file-exists

我根本不使用coldfusion，不过我需要修补一些代码。基本上我正在尝试检查我上传的文件是否存在，如果确实存在，则将变量增加 1。然后重复直到我得到一个唯一的文件名。无论出于何种原因，我都想不出使用 FileExist() 的正确方法。一些论坛建议将它与 len() 一起使用，但那些是从 2006 年开始的，当我这样做时，它似乎总是正确的。此外，当我查看[http://help.adobe.com/en_US/ColdFusion/9.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec22c24-7c66.html](http://help.adobe.com/en_US/ColdFusion/9.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec22c24-7c66.html)它说它返回是或否。我试图以各种方式检查结果，但没有运气。

这是我正在处理的代码部分。application.filepath 只是我的应用程序文件中的一个变量，它存储了 expandpath()。

```
<cffile action="upload" destination="#Application.filePath#ListingsGallery/" filefield="iconImage" nameconflict="makeunique">
<cfset iconPlace = #cffile.serverfile#>
<cfset myExt = listLast(iconPlace,".")>
<cfset i = 1 >
<cfset myVar = false>
<cfloop condition="myVar EQ false">

    <cfset newIconName = "iconPhoto" & i &"."& myExt>
    <cfset iconName = Application.filePath & "ListingsGallery/" & #newIconName#>
<cfoutput>#iconName#</cfoutput><br />//just checking to see if it is the correct path, it is.

    <cfif FileExists(iconName) EQ 'Yes'>
         <cfoutput>#myVar#</cfoutput> //checking the value, it never hits here.
    <cfelse>
             <cfoutput>#myVar#</cfoutput><br /> //checking the value, it always hits here.
    <cfset myVar = true>        
             <cfoutput>#myVar#</cfoutput> //Again check the value.
    </cfif>
<cfset i++>
</cfloop>                     
<cffile action="rename" source="#Application.filePath#ListingsGallery/#iconPlace#" destination="#Application.filePath#ListingsGallery/#newIconName#"> 
```

unix 服务器上的绝对路径类似于 /var/www/website 文件夹名称/ 等......对吗？那是绝对服务器路径，coldfusion 文档似乎至少指定了一个微软绝对服务器路径，所以我假设这是需要的。

编辑--------------- PS：我不能只给你们一个信用，所以我把它给了克鲁格，因为他来了分钟前。哈哈...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-30T20:05:19.423

FileExists() 返回一个布尔值。既然错字已被修复，这应该可以正常工作：

```
<cfif fileExists(TheFile)>
  // do this
<cfelse>
  // do that
</cfif> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-30T20:06:20.440

假设您的 application.Filepath 是您在正确轨道上的正确文件路径。看起来您的上传目录可能位于 Web 根目录下 - 考虑将其移到Web 根目录*之外*以确保安全。看看#expandPath('.')# 作为一种创建没有错别字的有保证的文件路径的方法:) 也使您的代码更便携。

在我看来，上面的代码可以工作。仅供参考 - 你不需要“EQ'YES'。你可以这样做：

```
<Cfif FileExists(iconName)>... 
```

你也可以做

```
condition="NOT myVar"> 
```

在 CF 中有几种处理逻辑代码的方法。

如果您的 fileExists() 从未命中，请仔细查看您的重命名。你在抛出错误吗？

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-30T21:08:57.860

我还不能为答案添加注释，但我想让 OP 知道 CF 在函数中的布尔评估时是无类型的。0 与“no”相同与“false”相同，而任何正数与“yes”相同与“true”相同。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-06-23T17:32:52.077

拥有后端安全性很好，但这应该在前端处理，所以你永远不会得到你不想要的值。新的 HTML5 输入模式将阻止此问题被提交，因此您不必在后端修复此问题。

[http://www.w3schools.com/tags/att_input_pattern.asp](http://www.w3schools.com/tags/att_input_pattern.asp)

# ruby - 难以概念化如何让 LDA-Ruby 读取多个 .txt 文件

> ID：10389414
> 
> 赞同：2
> 
> 时间：2012-04-30T19:27:43.650
> 
> 标签：ruby, nlp, lda

我正在尝试编写一个 Ruby 脚本来查看一组非结构化纯文本文件，并且我正在努力思考处理这些文件的最佳方式。我的主题建模脚本的当前工作版本如下：

```
#!/usr/bin/env ruby -w

require 'rubygems'
require 'lda-ruby'

# Input a directory of files
FILES_DIRECTORY = ARGV[0]

File.open("files.csv", "w") do |f|
  Dir.glob(FILES_DIRECTORY + "*.txt") do |filename|
    file_id = File.basename(filename).gsub(".txt", "")
    text = File.read(filename).clean
    f.puts [file_id, text].join(",")
  end
end

# Read csv
file = File.open("files.csv", "r") { |f| f.read }

# Train topics and infer
corpus = Lda::Corpus.new
corpus.add_document(Lda::TextDocument.new(corpus, file))

lda = Lda::Lda.new(corpus)
lda.verbose = false
lda.num_topics = 20
lda.em('random')
topics = lda.top_words(10)

puts topics 
```

我试图修改的是让这个程序读取纯文本文件的集合而不是单个文件。这并不像将所有文本文件扔到一个文件中那样简单（就像它目前对`files.csv`. （我得出这个结论是因为让这个脚本读取`corpus.txt`包含所有文本的单个文本文件 [例如，] 和`files.csv`文件之间几乎没有差异。）

所以，我的问题是如何让 lda-ruby 以不同的方式遍历这些文本文件？是否应该将文件的内容放入散列中？如果是这样，关于我应该从哪里开始的任何指示？或者，我应该放弃这个并使用不同的 LDA 库吗？

提前感谢您的任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T15:21:54.327

基本上，您只需要在浏览目录之前初始化语料库，然后将每个文件添加到块中的语料库中，就像您之前添加 CSV 文件一样。

```
#!/usr/bin/env ruby -w

require 'rubygems'
require 'lda-ruby'

# Input a directory of files
FILES_DIRECTORY = ARGV[0]

corpus = Lda::Corpus.new 

File.open("files.csv", "w") do |f|
  Dir.glob(FILES_DIRECTORY + "*.txt") do |filename|
    file = File.open(filename, "r") { |f| f.read }
    corpus.add_document(Lda::TextDocument.new(corpus, file))
  end
end

lda = Lda::Lda.new(corpus)
lda.verbose = false
lda.num_topics = 20
lda.em('random')
topics = lda.top_words(10)

puts topics 
```

我知道这是一个相当古老的问题，但我在寻找类似问题的解决方案时发现了这个问题。你的代码帮助了我，所以我认为我的回答可能对你或其他人有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-16T01:21:28.617

如果您有一个要用作文档的文本文件目录，您可以使用以下行来创建您的语料库：

```
corpus = Lda::DirectoryCorpus.new('path/to/directory') 
```

# css - 将 CSS 应用于 jquerymobile 中的 data-role="page"

> ID：10389429
> 
> 赞同：0
> 
> 时间：2012-04-30T19:28:50.700
> 
> 标签：css, jquery-mobile

我有这个页面

```
<head>
<title>Real Life Achievements</title>
<meta name="viewport" content="target-densitydpi=device-dpi, width=device-width">

<link rel="stylesheet" type="text/css" href="frameworks/jquerymobile.css"/> 
    <link rel="stylesheet" type="text/css" href="application.css"/>

<script type="text/javascript" charset="utf-8" src="frameworks/jquery.js"></script>
<script type="text/javascript" charset="utf-8" src="frameworks/jquerymobile.js"></script>

<script type="text/javascript" charset="utf-8">

    document.addEventListener("deviceready", initApp, false);

</script>
</head>
<body>
<div data-role="page" id="start"> 

    ...

</div>
</body> 
```

[我在这里](http://eisabainyo.net/weblog/2011/01/31/top-10-jquery-mobile-code-snippets-that-you-need-to-know/)读到我可以通过这样做为整个 data-role="page" 容器应用样式

```
.ui-page {
   background: #eee;
} 
```

但它不起作用。我的页面背景总是白色的。我不想使用 JQM 样式。如何将我的正文样式应用于 jquery 移动“页面”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T19:38:12.207

`.ui-content`将为 data-role=content 区域设置样式。因此，例如，如果您想为整个页面区域设置样式，您可以这样做：

```
.ui-content, .ui-page{background: #eee;} 
```

请记住，您必须像其他人已经建议的那样将您的 css 移动到 JQM 样式表下方。

这是它工作的一个例子[http://jsfiddle.net/codaniel/7M4Pg/1/](http://jsfiddle.net/codaniel/7M4Pg/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T19:36:19.393

您需要将`application.css`标题移到框架 css 文件下方，因为框架加载会覆盖您的样式。或者，您可以添加`!important`到后台规则，例如`background: #eee !important;`，以防止被以后的样式表覆盖。

# c# - C# string.Replace 不起作用

> ID：10389432
> 
> 赞同：-1
> 
> 时间：2012-04-30T19:29:00.910
> 
> 标签：c#, string, replace

**基本上我们的问题是：我们不能替换这样的字符串：10003* 但是我们可以替换这样的字符串：10003**

我们要替换字符串的一部分，如下所示： 10003* 这是我们的代码：

```
string text = sr2.ReadToEnd();
sr2.Close();
while (loop != lstTxt.Items.Count)
{
    string SelectedItem = lstTxt.SelectedItem.ToString() + "*";

    text = text.Replace(SelectedItem, "tietze111");

    if (lstTxt.SelectedIndex < lstTxt.Items.Count - 1)
        lstTxt.SelectedIndex++;
    loop++;

}

sw2.Write(text); 
```

但它不起作用。当我们在要替换的部分中省略 * 时，它可以工作。但是我们也必须替换 *。你知道我们必须改变什么吗？

当我们使用它时它会起作用：

```
string text = sr2.ReadToEnd();
sr2.Close();
while (loop != lstTxt.Items.Count)
{
    string SelectedItem = lstTxt.SelectedItem.ToString(); // changed

    text = text.Replace(SelectedItem, "tietze111");

    if (lstTxt.SelectedIndex < lstTxt.Items.Count - 1)
        lstTxt.SelectedIndex++;
    loop++;

}

sw2.Write(text); 
```

-- 使用 (var sr2 = new StreamReader(Application.StartupPath + @"\website\Dehler 22 ET.htm", Encoding.Default)) {

```
 using (var sw2 = new StreamWriter(tempFile, true, Encoding.Default)) 
```

我们使用它是因为文件仍然是 ASCII 格式。也许这就是问题所在。我们如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T19:41:00.297

Have you tried?

```
"[\*]" 
```

Or

```
@"[*]" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T19:31:57.627

修复以下行，

```
string SelectedItem = lstTxt.SelectedItem.Value; 
```

你拿的是物品而不是价值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T20:42:10.917

您的问题 * 以其他类型编码。星号 U+002A 的 Unicode 值

你可以试试这个。注意 Char.MinValue 在技术上是一个空值，因为你不能有一个空白 Char。

在你的情况下：`lstTxt.SelectedItem.ToString() + '\u002A'.ToString();`

如果这不起作用，请尝试删除（对 * 使用不同的编码值）以确保您实际上可以在字符串中找到它。

```
SomeString.Replace('\u002A', Char.MinValue); 
```

或者

```
SomeString.Replace('\u002A'.ToString(), String.Empty); 
```

我以前遇到过这样的问题，直到你做对为止，它最终都是一种反复试验的事情。我去年夏天遇到的类似问题[C# String.Replace 没有找到/替换 Symbol (™, ®)](https://stackoverflow.com/questions/7178695/c-sharp-string-replace-not-finding-replacing-symbol)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-30T19:45:02.863

该`String.Replace(String,String)`方法不会对任何字符做任何特殊的事情。您尝试替换的 id 中有一个字符与您尝试匹配的字符不同。我会尝试将星号从数据源复制到您的代码中，看看问题是否仍然存在。

# jquery - Ruby rails - jquery自动完成没有ajax请求

> ID：10389434
> 
> 赞同：0
> 
> 时间：2012-04-30T19:29:03.657
> 
> 标签：jquery, ruby, ruby-on-rails-3, jquery-ui, jquery-ui-autocomplete

在这方面需要一些帮助。我以前从来没有这样做过。我正在使用 rails3-jquery-autocomplete。我想要一个能够提供自动完成列表的文本框。在这种情况下，控制器有一个通过 ldap 搜索的“搜索”方法，不能将本地数据库绑定到此处以获取自动完成列表。“搜索”功能运行良好，因为我可以在不同的 html 表单中使用它来调用 ldap 数据。

首先，当我在文本字段中输入时，我没有看到任何 ajax 调用。也没有可怕的错误。有一个更好的方法吗？选择自动选择选项之一后，它将使用找到的值填充视图上的其他字段。我希望使用本地数据库表和远程 ldap 的自动完成功能相同。

看法 -

```
<%= text_field_tag :idnumber, nil, :maxlength => 11, :size => 20 %> 
```

JS-

```
$(document).ready(function(){
    $('#idnumber').autocomplete(function() {
        $.ajax({
            type: 'POST',
            url: "/users/search",
            data: $('#idnumber').serialize(),
            success: $('#found').html(data)

            /*function(){  },
            error: function(){  },
            success: function(data){   },
            complete: function (){   }*/
        });
    });
}); 
```

# asp.net-mvc - javascript中带有参数的MVC3 url

> ID：10389436
> 
> 赞同：0
> 
> 时间：2012-04-30T19:29:17.003
> 
> 标签：asp.net-mvc, razor

所以我已经为这段代码苦苦挣扎了好几个小时，我觉得这只是错误的引号或没有转义符号的问题，但问题就在这里。我有一个 JSON 调用（在 javascript 中），它加载了一个 URL 列表（文章标题）。然后我将这些 url 动态添加到一个 Div，并使用 document.createElement 构建我的页面。

问题是我无法让来自 JSON 列表的参数在 Razor URL 字符串中工作。

```
var articleTitle = document.createElement("div");
                articleTitle.className = "articleTitle";
                articleTitle.innerHTML = '<a href="@Url.Action("Article", "Content", new { url = ' + article.Url + ', page = 1 }, null)">' + article.Title + '</a>';
                articlewrapper.appendChild(articleTitle); 
```

{ url = ' + article.Url + ', 是这里的问题，我似乎无法获得实际值，链接现在只是打印出 article.Url。article.Title 工作得很好:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T21:01:27.590

javascript 代码中的 article.Url 和 article.Title 是在检索 JSON 吗？我认为您的问题是您将 .NET 代码与来自 javascript 的代码混合在一起。

.NET 将首先在服务器上呈现，然后在 .NET 完成工作后，javascript 将接管客户端。

您可能需要尝试以下方法：

```
<script>
 var sampleAction = @Url.Action("Article", "Content", new { url='[replace]' }, page = 1} null);

 //... OTHER CODE ...

 articleTitle.innerHTML = '<a href=" + sampleAction.replace('[replace]', article.Url) +">' + article.Title + '</a>';
</script> 
```

# algorithm - 如何将 Levenshtein 距离应用于一组目标字符串？

> ID：10389438
> 
> 赞同：3
> 
> 时间：2012-04-30T19:29:21.077
> 
> 标签：algorithm, statistics, mathematical-optimization

*   让`TARGET`是一组我希望被说出的字符串。
*   让`SOURCE`是语音识别器返回的字符串集（即它听到的可能句子）。

我需要一种从`TARGET`. 我阅读了*Levenshtein distance*和*Damerau-Levenshtein distance*，它基本上返回源字符串和目标字符串之间的距离，即将源字符串转换为目标字符串所需的更改次数。

但是，如何将此算法应用于一组目标字符串？

我想我会使用以下方法：

1.  对于属于 的每个字符串`TARGET`，我计算与 中每个字符串的距离`SOURCE`。通过这种方式，我们获得了一个*m×n*矩阵，其中 n 是 的基数，`SOURCE`n 是 的基数`TARGET`。我们可以说第 i 行表示语音识别器检测到的句子相对于第 i 个目标的相似度。
2.  计算每一行上的值的平均值，可以得到第i个目标与语音识别器输出的平均距离。我们称之为，行索引`average_on_row(i)`在哪里。`i`
3.  最后，对于每一行，我计算该行中所有值的标准差。对于每一行，我还执行所有标准差的总和。结果是一个列向量，其中每个元素（我们称之为`stadard_deviation_sum(i)`）引用一个字符串`TARGET`。

与最短关联的字符串`stadard_deviation_sum`可以是用户发音的句子。可以认为是我使用的正确方法吗？或者还有其他方法吗？显然，过高的值表明用户发音的句子很可能不属于`TARGET`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T20:14:28.937

我不是专家，但你的建议没有意义。首先，在实践中，如果不是无限的话，我希望 TARGET 的基数非常大。其次，我不相信 Levensthein 距离或一些类似的相似性度量会有用。

如果 ：

*   你真的可以定义 SOURCE 和 TARGET 集，
*   SOURCE 中的所有字符串都是同样可能的，
*   TARGET 中的所有字符串都是同样可能的，
*   SOURCE 和 TARGET 中的字符串不是字符而是音素，

那么我相信你最好的选择是在 SOURCE 中找到一对 p，在 TARGET 中找到 q，这样距离（p，q）是最小的。特别是因为你不能保证等概率部分，我认为你应该从头开始考虑问题，做一些研究并做出完全不同的设计。语音识别的常用方法是使用隐马尔可夫模型。我会从那里开始。

**回答您的评论：**选择更可能的。如果不考虑概率，那是没有希望的。

[假设以下示例是关于音素，而不是字符]

假设识别的单词是“chees”。目标集是“奶酪”、“国际象棋”。您必须计算 P(cheese|chees) 和 P(chess|chees) 我想说的是，并非每个替换都是等概率的。如果您将概率建模为字符串之间的距离，那么至少您必须允许例如 d("c","s") < d("c","q") 。（混淆 c 和 s 字母很常见，但混淆 c 和 q 并不常见）调整距离计算算法很容易，但很难为所有对提供好的值。

此外，您必须以某种方式估计 P(cheese|context) 和 P(chess|context) 如果我们谈论的是棋盘游戏，国际象棋更有可能。如果我们谈论的是乳制品，奶酪更有可能。这就是为什么您需要大量数据来得出这样的估计。这也是为什么隐马尔可夫模型可以很好地解决这类问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T20:50:00.793

您需要首先计算这些概率：插入、删除和替换的概率。然后使用这些概率的日志作为每次操作的惩罚。

在“上下文无关”的情况下，如果 pi 是插入概率，pd 是删除概率，ps 是替换概率，则观察到相同符号的概率是 pp=1-ps-pd。

在这种情况下，分别使用 log(pi/pp/k)、log(pd/pp) 和 log(ps/pp/(k-1)) 作为插入、删除和替换的惩罚，其中 k 是系统。

本质上，如果您在源和目标之间使用这种距离度量，您将获得在给定源的情况下观察该目标的对数概率。如果您有一堆训练数据（即源-目标对），请为这些概率选择一些初始估计，对齐源-目标对并重新估计这些概率（AKA EM 策略）。

您可以从一组概率开始并假设上下文独立。稍后您可以假设上下文之间存在某种聚类（例如，假设有 k 组不同的字母，其替换率不同......）。

# content-management-system - Hippo CMS 的 RSS 功能可从 facet 获取提要

> ID：10389444
> 
> 赞同：2
> 
> 时间：2012-04-30T19:30:05.980
> 
> 标签：content-management-system, hippocms

我正在研究 Hippo CMS，它有一个[用于 RSS 提要的插件，](http://rss.forge.onehippo.org/) RSS 可以从现有文件夹中获取文档。
但我想实现一个功能，让它从方面而不是真正的文件夹中获取文档。
所以我可以做一些事情`news/2012/published`来得到我想要的。
以前有人试过吗？请分享一些关于我如何做到这一点的想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T23:27:46.080

是的，这应该是可能的。您可以创建一个 hippo:facetnavigation 结构并像这样显示树。接下来，您可能需要修改默认的[RSSFeedBuilder](https://forge.onehippo.org/svn/rss/trunk/rss-hst-component/src/main/java/org/onehippo/forge/rss/components/RSSFeedBuilder.java)组件，以便它可以处理这种结构。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T15:40:12.150

我基于 Hippo 的网站上的 RSS 提要基于方面。我正在使用 ROME 创建提要。

您可以在以下位置找到创建提要的代码： [https ://github.com/jashaj/HippoWeblog/blob/master/site/src/main/java/org/onehippo/forge/weblogdemo/components/FeedCreator.java](https://github.com/jashaj/HippoWeblog/blob/master/site/src/main/java/org/onehippo/forge/weblogdemo/components/FeedCreator.java)

我只使用这些 JSP，因为 HST 组件需要一个呈现模板，并且提要需要具有正确的内容类型标头： [https ://github.com/jashaj/HippoWeblog/tree/master/site/src/main/webapp /WEB-INF/jsp/feeds](https://github.com/jashaj/HippoWeblog/tree/master/site/src/main/webapp/WEB-INF/jsp/feeds)

# apache - Symfony2 - Nginx/FPM 与 Apache

> ID：10389445
> 
> 赞同：1
> 
> 时间：2012-04-30T19:30:06.427
> 
> 标签：apache, symfony, nginx, php

我的 Symfony 缓存有问题。当我使用 Apache 和 Nginx PHP-FPM 测试同一个项目（在开发环境中）时。Apache 快 10 倍。（4900 毫秒与 500 毫秒）

我在几个进程上做了一些“strace”，我已经看到 Apache Symfony 关心缓存。但是使用 Nginx/FPM，Symfony 似乎可以执行所有代码。（不使用应用程序缓存）

symfony 在 Apache 而不是 Nginx 中使用正确的缓存有什么不同？

或者，在 DEV 环境中是否有一些与 Nginx/FPM 相关的特殊配置？

谢谢

= NGINX 配置 =

```
location / { 
    index app.php;
    if (-f $request_filename) {
        break;
    }   
    rewrite ^(.*)$ /app.php last;
}
location ~ (app|app_dev).php {
    include /etc/nginx/nginx-fpm.conf;
    fastcgi_split_path_info ^(.+\.php)(/.+)$;
    fastcgi_param PATH_INFO $fastcgi_path_info;
    fastcgi_param PATH_TRANSLATED $document_root$fastcgi_path_info;
    fastcgi_param HTTPS off;
} 
```

= /etc/nginx/nginx-fpm.conf ==

```
fastcgi_pass   unix:/tmp/php-fpm.sock;
fastcgi_index  index.php;
fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
fastcgi_param  QUERY_STRING       $query_string;
fastcgi_param  REQUEST_METHOD     $request_method;
fastcgi_param  CONTENT_TYPE       $content_type;
fastcgi_param  CONTENT_LENGTH     $content_length;
fastcgi_param  SCRIPT_NAME        $fastcgi_script_name;
fastcgi_param  REQUEST_URI        $request_uri;
fastcgi_param  DOCUMENT_URI       $document_uri;
fastcgi_param  DOCUMENT_ROOT      $document_root;
fastcgi_param  SERVER_PROTOCOL    $server_protocol;
fastcgi_param  GATEWAY_INTERFACE  CGI/1.1;
fastcgi_param  SERVER_SOFTWARE    nginx/$nginx_version;
fastcgi_param  REMOTE_ADDR        $remote_addr;
fastcgi_param  REMOTE_PORT        $remote_port;
fastcgi_param  SERVER_ADDR        $server_addr;
fastcgi_param  SERVER_PORT        80;
fastcgi_param  SERVER_NAME        $server_name;
fastcgi_param  REDIRECT_STATUS    200; 
```

== PHP-FPM ==

```
[global]
pid = /var/run/php5-fpm.pid
error_log = /var/log/php5-fpm.log
include=/etc/php5/fpm/pool.d/*.conf 
```

= /etc/php5/fpm/pool.d/www.conf =

```
[www]
user = www-data
group = www-data
listen = /tmp/php-fpm.sock
pm = dynamic
pm.max_children = 10
pm.start_servers = 4
pm.min_spare_servers = 2
pm.max_spare_servers = 6
pm.status_path = /status
access.log = /var/log/fpm/www.access.log
access.format = %R - %u %t "%m %r%Q%q" %s %f %{mili}d %{kilo}M %C%%
chdir = / 
```

== APC ==

```
extension=apc.so
apc.shm_segments=1
apc.shm_size=512M
apc.enable_cli=1
apc.include_once_override=1
apc.canonicalize=1
apc.stat="0" ; OR 1 it's the same result 
```

== 其他扩展 ==

```
apc.ini
curl.ini
gd.ini
imagick.ini
intl.ini
memcached.ini
memcache.ini
mysqli.ini
mysql.ini
pdo.ini
pdo_mysql.ini
pdo_sqlite.ini
sqlite3.ini
sqlite.ini 
```

# iphone - 如何将标题图像固定在我的选项卡应用程序的顶部？

> ID：10389448
> 
> 赞同：1
> 
> 时间：2012-04-30T19:30:44.170
> 
> 标签：iphone, objective-c

我想创建一个带有始终存在的标题图像的选项卡应用程序，无论哪个选项卡项处于活动状态。

示例是 Foursquare：

![在此处输入图像描述](../Images/2afe6232191fe8028c32842a5773f178.png)

我希望能够放置按钮并在该标题上显示不同的信息。

那是一个简单的导航栏还是其他什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T20:36:48.123

通常，每个选项卡都关联一个 viewController。当您选择“选项卡式应用程序”时，您可以在 xcode 创建的样板文件中注意到它。然后，在每个视图控制器中`viewDidLoad`或在`init`每个视图控制器中，您可以设置：

```
self.navigationItem.titleView=[[UIImageView alloc] initWithImage:[UIImage imageNamed:@"image.png"]]; 
```

然后只需更改`self.navigationItem.leftBarButtonItem`并`self.navigationItem.rightBarButtonItem`使用每个 viewController 上的控件。

**编辑**：

在 appDelegate （在`didFinishLaunchingWithOptions`方法中），如果你想使用导航控制器，你必须设置这样的东西：

```
 UIViewController *viewController1 = [[FirstViewController alloc] initWithNibName:@"FirstViewController" bundle:nil];
 UIViewController *viewController2 = [[SecondViewController alloc] initWithNibName:@"SecondViewController" bundle:nil];
 UINavigationController *myNav1=[[UINavigationController alloc] initWithRootViewController:viewController1];
 UINavigationController *myNav2=[[UINavigationController alloc] initWithRootViewController:viewController2];
 UIImage *navBackgroundImg = [UIImage imageNamed:@"bg_navBar.png"];
 UIImage *tabBackgroundImg = [UIImage imageNamed:@"bg_tabBar.png"];
 [myNav1.navigationBar setBackgroundImage:navBackgroundImg forBarMetrics:UIBarMetricsDefault];//iOS 5 only
 [myNav2.navigationBar setBackgroundImage:navBackgroundImg forBarMetrics:UIBarMetricsDefault];//iOS 5 only
 [[UITabBar appearance] setBackgroundImage:tabBackgroundImg];//iOS 5 only
 self.tabBarController.viewControllers = [NSArray arrayWithObjects:myNav1, myNav2, nil];
 self.window.rootViewController = self.tabBarController; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T20:27:52.127

看起来像一个简单的导航栏，但它们并不简单。您需要在栏上放置/创建 NavigationItem（在放置/创建栏本身之后），然后将 titleView 设置为带有图像的自定义视图。根据文档，左栏按钮（在您的第一个屏幕中关闭）必须为零，否则 titleView 将被忽略。尽管您可以在此自定义视图中放置左侧按钮的按钮。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T17:16:38.747

我发现最简单的方法是写：

```
- (void)viewDidLoad
{
    [[UINavigationBar appearance] setBackgroundImage:
     [UIImage imageNamed:@"UINavigationBar.png"] forBarMetrics:UIBarMetricsDefault];
} 
```

在我的 MainViewController 上，在每个视图控制器上创建的所有导航栏都是这样配置的。

# php - 将版本控制工作字符串添加到 css 文件路径会阻止所有浏览器缓存吗？

> ID：10389451
> 
> 赞同：1
> 
> 时间：2012-04-30T19:30:52.797
> 
> 标签：php, codeigniter, caching, cross-browser

PHP：我正在尝试确定防止 CSS 文件在更改时缓存的最佳方法。我正在使用 IE6/7/8/9、Firefox、Chrome、iPAD 和其他一些未提及的浏览器。代码是带有 CodeIgniter 的 PHP。我正在研究一个 mod 重写规则以提供修改后的路径；/timestamp/file.css 之类的东西。但是，后来我注意到帖子说你可以在 CSS 文件中添加一个工作字符串，浏览器会将它视为一个新文件——只要工作字符串部分发生了变化。此工作字符串方法是否适用于所有浏览器？像 file.css?v=1234567890 这样的东西。如果 v 改变浏览器应该重新缓存？我可以相信这种方法吗？

```
<?php
echo '<link rel="stylesheet" type="text/css" href="file.css?v=' . filemtime('file.css') . '" />';
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T19:35:29.203

是的，它应该。就浏览器而言，不同的查询字符串是完全独立的 URL。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T19:35:58.197

是的，除非 HTML 本身（包括您的 URL）被缓存。

# javascript - javascript中3维数组的范围？

> ID：10389453
> 
> 赞同：1
> 
> 时间：2012-04-30T19:31:02.343
> 
> 标签：javascript, arrays, 3d

我正在尝试基于对象的平面数组在 javascript 中创建一个动态的 3 维数组。遍历数组后，数组似乎是空的。如果我在循环中打印，它似乎可以工作，但它似乎已经消失了，我想将它返回给调用者。帮助 ？

```
//init the 3d array ??
this.teams = [];
for(var i = 0; i < sportsStandings.length; i++) {
  var item = sportsStandings[i];
  if(!this.teams[item.league]) 
    this.teams[item.league] = new Array();

  if(!this.teams[item.league][item.division])
    this.teams[item.league][item.division] = new Array();

  this.teams[item.league][item.division][this.teams[item.league][item.division].length] 
    = new Team(item.teamName, item.wins, item.losses);

  console.log(this.teams); //this prints properly, and i see the 3d array grow
}
console.log('second' + this.teams); //this prints nothing 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T19:39:59.497

I cleaned up the code a bit, there is a couple of other ways to write it.

```
this.teams = [];
var teams = this.teams;
for(var i = 0; i < sportsStandings.length; i++) {

    var ss = sportsStandings[i],
        league = ss.league,
        division = ss.division,
        teamName = ss.teamName,
        wins = ss.wins,
        losses = ss.losses;

    if (!teams[league]) {
        teams[league] = {};
        teams[league][division] = [];
    } else if (!teams[league][division]) {
        teams[league][division] = [];
    }

    var newTeam = new Team(teamName, wins, losses);
    teams[league][division].push(newTeam);
} 
```

# c - 多核插槽有什么好处吗？(Linux)

> ID：10389454
> 
> 赞同：3
> 
> 时间：2012-04-30T19:31:02.967
> 
> 标签：c, linux, multithreading, sockets, kernel

无法为自己找到这样一个问题的答案：

多核机器上的套接字一般有什么好处/提升。我的意思是可能有某种共享访问从以太网卡驱动程序或 smth 传入内核的数据包队列。

我知道当涉及到 API 调用时，可以有多个线程与一个套接字实例一起工作，但是程序员可以通过读取/写入/关闭/选择等调用来同步和正确播放。所以在那个级别我看到了仅在处理分派的数据包和后处理等方面受益......或者在系统调用期间复制数据包并转移到用户空间之前没有速度提升？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T08:58:01.943

多核的好处取决于您的算法如何实现并发。以以太网接收为例，它涉及到 4 个任务。

1.  收到数据包后，NIC 硬件触发中断，CPU 在中断上下文中处理中断。
2.  网络堆栈以软件 irq 机制处理 RX 数据包。软件 irq 请求可以在多个 CPU 上同时运行。在网络堆栈 RX 函数中，它将网络缓冲区传递给套接字并唤醒在套接字处挂起的用户线程。
3.  用户线程唤醒并继续用户应用程序代码接收或处理接收到的网络数据包。

1) 只能在一个 CPU 上运行，2) 可以在多个 CPU 上运行，3) 也可以在多个 CPU 上运行，用于多进程或多线程应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-01-25T19:36:42.020

继@Greg Inozemtsev 的评论之后。具有多个接收队列的 NIC 可以将传入流量过滤到不同的队列中。每个队列都可以向 CPU 生成一个独特的中断，以通知传入的数据包。可以为每个队列分配一个不同的中断，该中断可以分派到一个唯一的 CPU 内核。

[Linux 支持](https://www.kernel.org/doc/Documentation/networking/scaling.txt)内核中的各种技术，例如：

*   RSS：接收端缩放
*   RPS：接收数据包引导
*   RFS：接收流量转向
*   加速接收流转向
*   XPS：传输数据包控制

假设所有数据包都在端口 80 上发往您的机器 IP，并且您已经使用`socket()`并`listen()`在端口 80 上创建了一个套接字。流量从各种源 IP 进入您的 NIC，因此它被散列到多个接收队列中（意味着由于 RSS，硬件中断正在跨多个 CPU 内核传播）。您可以使用本机内核套接字选项 PACKET_FANOUT 将负载分散到应用程序内的多个工作线程中。

如果您查看 3rd 方库[NetMap](http://info.iet.unipi.it/~luigi/netmap/)、[DPDK](http://dpdk.org/)和[VPP](https://fd.io/)，作为示例，这些都可以通过将您降至零副本 RX/TX 来进一步扩大规模，但需要注意您需要编写一些网络协议代码您自己取决于您使用的第 3 方库。

这里有很多事情要考虑，在一个 SO 问题中无法涵盖。回答你原来的问题；是的。尽管我试图提供一些额外的信息。

阅读 RSS/RPS/RFS 等：

[https://blog.cloudflare.com/how-to-receive-a-million-packets/](https://blog.cloudflare.com/how-to-receive-a-million-packets/)

进一步阅读与本机 PACKET_FANOUT 和 PACKET_MMAP 相关的内容：

[http://kukuruku.co/hub/nix/capturing-packets-in-linux-at-a-speed-of-millions-of-packets-per-second-without-using-third-party-libraries](http://kukuruku.co/hub/nix/capturing-packets-in-linux-at-a-speed-of-millions-of-packets-per-second-without-using-third-party-libraries)

[http://yusufonlinux.blogspot.co.uk/2010/11/data-link-access-and-zero-copy.html?m=1](http://yusufonlinux.blogspot.co.uk/2010/11/data-link-access-and-zero-copy.html?m=1)

[https://www.kernel.org/doc/Documentation/networking/packet_mmap.txt](https://www.kernel.org/doc/Documentation/networking/packet_mmap.txt)

进一步阅读 NetMap 作为 3rd 方库的例子

[https://blog.cloudflare.com/single-rx-queue-kernel-bypass-with-netmap/](https://blog.cloudflare.com/single-rx-queue-kernel-bypass-with-netmap/)

进一步阅读 NUMA 和亲和力：

[https://null.53bits.co.uk/index.php?page=numa-and-queue-affinity](https://null.53bits.co.uk/index.php?page=numa-and-queue-affinity)

[https://blog.cloudflare.com/how-to-achieve-low-latency/](https://blog.cloudflare.com/how-to-achieve-low-latency/)

# github - 有没有办法让某人访问 GitHub 问题而不授予他们对源代码的读取权限？

> ID：10389456
> 
> 赞同：10
> 
> 时间：2012-04-30T19:31:32.703
> 
> 标签：github

我们有一个带有私有存储库的 GitHub 组织设置。我们想让我们的一些 Beta 测试人员访问添加和评论问题，但我们不想让他们访问源代码。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T19:36:19.357

我不相信这是可能的，因为问题与提交直接相关。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-28T10:11:08.537

看这里：

[https://help.github.com/articles/issues-only-access-permissions](https://help.github.com/articles/issues-only-access-permissions)

事实上，你可以做你想做的事，你只需要为此目的拥有第二个存储库。

# javascript - 有没有办法检测我是否将鼠标悬停在文本上？

> ID：10389459
> 
> 赞同：4
> 
> 时间：2012-04-30T19:31:42.527
> 
> 标签：javascript, jquery, dom, text, hover

我真正想要的是检测光标何时变为“文本”类型，即当我将鼠标悬停在一段文本上时。我试过查看我悬停的元素类型，但这不太准确，因为我不知道它们实际包含什么。

我知道只有在我之前分配过 CSS 光标属性时才能检测到它。

这可能吗？你会怎么做呢？

编辑：我不想检查我当前是否在特定元素上，我想知道我是否将鼠标悬停在该元素内的任何文本上。一个 div 可以是浏览器的 100% 宽度，但在最左边有一段较短的文本。我不想检测何时将鼠标悬停在元素的任何部分上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T19:34:47.897

无需尝试检测光标是否更改。

您可以使用这种构造简单地检测鼠标是否悬停在您的文本上：

```
document.getElementById('myTextId').onmouseover = function() {
    // do something like for example change the class of a div to change its color :
    document.getElementById('myDivId').className = 'otherColor';
}; 
```

如果您没有 id 而是类或标签，则可以将 getElementById 替换为 getElementsByClassName 或 getElementByTagName （这将返回您将迭代的数组）。

如果你想在离开元素时恢复颜色，我建议你用同样的方式绑定事件onmouseout。

例如，如果您想在任何段落上做某事，您可以这样做：

```
var paras = document.getElementByClassName('p');
for (var i=0; i<paras.length; i++) {
    paras[i].onmouseover = function() {
        // do something like for example change the class of a div to change its color :
        document.getElementById('myDivId').className = 'otherColor';
    };
} 
```

我打算做很多这样的事情，我建议你看看 jquery 及其教程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T19:47:17.047

一种可能的方法是找到 DOM 中的所有文本节点，并将它们包装在具有特定类的 span 中。然后你可以选择那个类并用它做任何你想做的事情：

```
// Wrap all text nodes in span tags with the class textNode
(function findTextNodes(current, callback) {
    for(var i = current.childNodes.length; i--;){
        var child = current.childNodes[i];
        if(3 === child.nodeType)
            callback(child);
        findTextNodes(child, callback);
    }
})(document.body, function(textNode){ // This callback musn't change the number of child nodes that the parent has. This one is safe:
    $(textNode).replaceWith('<span class="textNode">' + textNode.nodeValue + '</span>');
});

// Do something on hover on those span tags
$('.textNode').hover(function(){
    // Do whatever you want here
    $(this).css('color', '#F00'); 
},function(){
    // And here
    $(this).css('color', '#000');
}); 
```

[**JSFiddle 演示**](http://jsfiddle.net/Paulpro/LLddx/1/)

显然，这将在您的 DOM 中填充大量 span 标签，并且您只想在页面加载时执行此操作一次，因为如果再次运行它，它将使 span 数量增加一倍。如果您已经将自定义 css 应用于 span，这也可能会做一些奇怪的事情。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-30T19:38:16.033

如果您正在使用 jQuery（您应该这样做，因为 jQuery 很棒），请执行以下操作：

```
$("#myDiv").mouseover(function() {
    $("#myDiv").css("background-color", "#FF0000");
}); 
```

# iphone - 尝试使用 AdMob 运行应用时出现奇怪的错误

> ID：10389460
> 
> 赞同：1
> 
> 时间：2012-04-30T19:31:46.207
> 
> 标签：iphone, objective-c, ios, xcode

```
 Undefined symbols for architecture i386:
  "_AudioServicesPlaySystemSound", referenced from:
      -[GADWebViewDelegate webView:shouldStartLoadWithRequest:navigationType:] in libGoogleAdMobAds.a(GADWebViewDelegate.o)
  "_OBJC_CLASS_$_MFMailComposeViewController", referenced from:
      objc-class-ref in libGoogleAdMobAds.a(GADOpener.o)
  "_OBJC_CLASS_$_MFMessageComposeViewController", referenced from:
      objc-class-ref in libGoogleAdMobAds.a(GADOpener.o)
ld: symbol(s) not found for architecture i386
 clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

这是什么意思？我需要做什么才能解决这个问题？

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T01:37:52.590

仅供参考 - 我必须添加 AudioToolbox 框架才能编译它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T10:54:55.303

解决方案是添加 AVAudioPlayer 和 MessageUI 框架。就是这样。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-30T19:50:19.833

从哪里获得您正在使用的库，它只编译为在设备上使用..（架构 armv7），当您尝试在模拟器上测试它时（架构 i386）因此出现错误。因此，如果您想在模拟器上对其进行测试，请获取为 i386 编译的库版本。

您还可以使用 lipo 命令组合这两个库并在任何架构上使用它。

希望这会有所帮助.. :)

# bash - 以正确的顺序查找单词

> ID：10389462
> 
> 赞同：1
> 
> 时间：2012-04-30T19:32:00.363
> 
> 标签：bash

我在 bash 中有一些工作要做。它是这样的：

作为第一个参数，您键入单词以按照写入的顺序在文件中找到它，在第二个参数中您键入目录。它必须递归搜索并返回它出现的文件名。

例如：`bash mybash "alice cat" .` 它应该返回包含例如：“alice has a cat”，“alice cat”，但不是“cat has alice”的文件

我做了这样的事情

```
#!/bin/bash
pattern=".*"

for arg in $1; do
    pattern+="${arg}.*"
done

grep -r ${pattern} $2 
```

但它仅逐行搜索，找不到具有以下内容的文件：

“爱丽丝别的东西”

“新线有猫”

但它应该返回它。

一些帮助将不胜感激。

问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T21:42:58.630

做

```
awk '/alice/,/cat/' file 
```

做你想做的事？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T20:12:05.000

如果您删除文件中的换行符，则 grep 将按预期工作。

```
find $2 -type f | while read file; do
  if tr '\n' ' ' < ${file} | grep -q -r ${pattern}; then
    echo ${file}
  fi
done 
```

# javascript - 我将如何控制另一个 JCarousel 中的 JCarousel？

> ID：10389465
> 
> 赞同：1
> 
> 时间：2012-04-30T19:32:24.560
> 
> 标签：javascript, jquery, jcarousel

使用 JCarousel，我目前在另一个轮播中有一个轮播，我可以通过单击我在外部轮播上创建的播放按钮来触发它开始播放幻灯片。这些都是动态加载的。

当我单击更改外旋转木马的幻灯片时，我想让内旋转木马停止动画并返回到它的原始加载位置。

```
Here is what I have currently for manipulating JCarousel:
//outer carousel
$('#carousel').jcarousel({
    auto: 0,
    wrap: 'circular',
    scroll: 1,
    initCallback: carousel_initCallBack,
    itemVisibleInCallback: {
        onBeforeAnimation:  gallerycarousel_itemfirst
}

// Info Box

$('.info').click(function() {
    var itemid = $(this).attr('id').substring(5);
    $.ajax({
        url: 'php/get_case_studies.php?item=' + itemid,
        dataType: 'json',
        success: function(data) {
            var infobox = $('#box_info' + data.data[0].id)
            infobox.html('');
                var content = '<div class="main_sec">'+data.data[0].main_desc+'</div><div class="sec_sec">'+data.data[0].sec_desc+'</div><div class="visit"><span class="box_num"><img src="img/visitor.png" alt="#" /> Visitors:</span>'+data.data[0].visitors+'</div><div class="avg"><span class="box_num"><img src="img/time.png" alt="#"/> Average time on site:</span>'+ data.data[0].avg_time +'</div><a href="'+ data.data[0].url +'" target="_blank" class="link"></a>';
                infobox.append(content);
            $('.box_info').animate({left: '0px'}, 200);
        }
    });     
});

function carousel_initCallBack(carousel) {
    carousel.clip.hover(function() {
        $('.gallery_control').stop().animate({"top": "454px"}, 200);
        carousel.stopAuto();
    }, function() {
        $('.gallery_control').stop().animate({"top": "524px"}, 200);
        $('.box_info').animate({left: '-302px'}, 200 );
        carousel.startAuto();
    });

    $('#gallerycarousel_controls .btn_right').click(function() {
        carousel.next();
        return false;
    });

    $('#gallerycarousel_controls .btn_left').click(function() {
        carousel.prev();
        return false;
    });

    $('.grid').click(function() {
        $('.gallery_control').animate({"top": "524px"}, 200);
        $('#grid_view').fadeIn('slow');
        carousel.stopAuto();
        $('#grid_view').mouseleave(function() {
        $(this).fadeOut('slow');
        carousel.startAuto();
        });
    });

     $('#carousel_slides .btn_item').click(function() {
        carousel.scroll($.jcarousel.intval($(this).attr('id')));
        $('#grid_view').fadeOut('slow');
        $('.gallery_control').animate({"top": "454px"}, 200);
        return false;
    });

    //this is the play button which generates and starts the inner carousel
    $('.play').click(function() {
        var itemid = $(this).attr('id').substring(5);
        $('#int_carousel' + itemid).load('get_slideshow.php?slideshow&item=' + itemid, function() {
            $('#int_carousel' + itemid).jcarousel({
                auto: 3,
                wrap: 'circular',
                scroll: 1
            });
        });
    });
} 
```

我尝试在“carousel_initCallBack”函数中添加一个点击函数，看看我是否可以像这样控制内部轮播：

```
 $('#gallerycarousel_controls .btn_right').click(function() {
        $('#int_carousel' + itemid).stopAuto(); 
    }); 
```

正如我所尝试的那样，上述方法不起作用，这可能不会使内部转盘回到幻灯片的原始位置。

我去过多个不同的论坛，并在互联网上到处搜索，但我仍然无法找到任何可靠的帮助或帮助。我在这方面急需帮助，因为我没有选择。如果有人可以帮助我，我将非常感激。我还是 Web 开发的新手，需要指导。

# java - 在 ArrayList 中存储组件

> ID：10389470
> 
> 赞同：0
> 
> 时间：2012-04-30T19:33:30.630
> 
> 标签：java, swing, loops, arraylist, add

我想将 JButton、JTextField、JTextArea 等组件存储在同一个 ArrayList 中，然后循环遍历它并将每个组件添加到 JFrame。我尝试将它们存储在 ArrayList 中，但是当我遍历它并将它包含的每个组件添加到我的框架中时，框架中什么都没有显示。有谁知道如何做到这一点？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T19:40:56.377

Try declaring the `ArrayList` like this:

```
List<JComponent> = new ArrayList<JComponent>(); 
```

The above works because `JComponent` is a common ancestor for `JButton`, `JTextField`, `JTextArea` - that is, it's a super class common to all JComponents.

It's not clear to me: why do you want to add the components first to an `ArrayList`? add them directly to the `JFrame`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T19:43:05.440

继续这个：

```
public class Example {

public static void main(String[] args) {

    JFrame frame = new JFrame();

    List<Component> components = new ArrayList<Component>();

    components.add(new JButton("test1"));
    components.add(new JButton("test3"));
    components.add(new JButton("test3"));

    frame.setLayout(new FlowLayout());

    for(Component component: components)
        frame.getContentPane().add(component);

    frame.pack();
    frame.setVisible(true);
}
} 
```

*   将布局管理器添加到您的框架
*   调用`pack()`以根据您的组件调整框架的大小
*   设置框架可见

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-30T19:50:21.020

你知道如何使用布局管理器吗？

> 布局管理器是实现 LayoutManager 接口*并确定容器内组件的大小和位置的对象。尽管组件可以提供大小和对齐提示，但容器的布局管理器对容器内组件的大小和位置拥有最终决定权。

[使用布局管理器](http://docs.oracle.com/javase/tutorial/uiswing/layout/using.html)

# c# - C#从数据库中获取数据

> ID：10389471
> 
> 赞同：0
> 
> 时间：2012-04-30T19:33:32.707
> 
> 标签：c#, linq, ado.net

我需要增强 C# 代码的功能。我是 C# 新手，但我有很强的 Java 背景。

我的工作是编写一个新的查询，比如 JDBC，从数据库中获取数据。

在下面的方法中，我没有看到任何 SQL 查询。

这条线是什么意思？这类似于 Hibernate hql 吗？

```
from p in Session.Query<MyObject>() select p 
```

谢谢

代码：

```
 public IPagingList<MyObject> ReadMyObjectItems(int start, int limit, IList<Filter> filters)
        {

            var criteria = Session.CreateCriteria<MyObject>();

            if (limit != -1)
            {
                criteria.SetMaxResults(limit);
                criteria.SetFirstResult(start);
            }

            if (filters != null)
            {
                foreach (var filter in filters)
                {
                    criteria.Add(Restrictions.InsensitiveLike(filter.Field, "%" + filter.Value + "%"));
                }
            }

            IList<MyObject> report = criteria.List<MyObject>();

            int total = (from p in Session.Query<MyObject>() select p).Count();

            var pagedResults = new PagingList<MyObject> { List = report, Total = total };

            return pagedResults;

        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T19:40:22.947

`(from p in Session.Query<MyObject>() select p).Count();`

We are simply getting a count of all the objects.

Refactor this to

`Session.Query<MyObject>().Count()`. It's easier to read and in this case LINQ is unnecessary.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T20:53:49.320

这是[Linq](http://en.wikipedia.org/wiki/Language_Integrated_Query)语法。一种强大的查询形式并入 .Net 和不同的 .Net 框架。
在您的情况下，您似乎正在使用 NHibernate，而该行正在使用 NHibernate Linq。（但周围的代码正在使用 Criteria。）

对于在 NHibernate 中编写查询，您可以选择使用

*   林克
*   高品质
*   标准

它们都有不同的优点和缺点。
NHibernate 将把其中任何一个翻译成 SQL。当您尝试访问它时将获取实际结果，例如读取结果中的项目或将结果转换为列表等。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-30T19:35:54.990

似乎该项目正在使用像 NHibernate 这样的 ORM。您可以在此处获取更多详细信息：http: [//nhibernate.info](http://nhibernate.info)

# javascript - 剪切和粘贴 HTML5 鼠标悬停/单击音效脚本

> ID：10389473
> 
> 赞同：1
> 
> 时间：2012-04-30T19:33:50.713
> 
> 标签：javascript

我正在使用此站点上发布的以下脚本：[http ://www.javascriptkit.com/script/...oundlink.shtml](http://www.javascriptkit.com/script/...oundlink.shtml)

它工作得很好，但我想扩展这个脚本并使用复选框使声音静音。此复选框具有 id: sound。如果选中，我想听到声音，如果未选中，则不应听到声音。

这是我目前用于复选框的代码：代码：

```
function playSound() {
    if (document.getElementById('sound').checked){
        -something needs to be added here to make it work?-
    }
} 
```

任何人都知道如何使这项工作？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T19:39:56.217

功能 muteIt(box) { if (clicksound){ clicksound.muted = box.checked?true:false; } if (mouseoversound){ mouseoversound.muted = box.checked?true:false; } }

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T19:45:20.340

```
<script>

// Mouseover/ Click sound effect- by JavaScript Kit (www.javascriptkit.com)
// Visit JavaScript Kit at http://www.javascriptkit.com/ for full source code

//** Usage: Instantiate script by calling: var uniquevar=createsoundbite("soundfile1", "fallbackfile2", "fallebacksound3", etc)
//** Call: uniquevar.playclip() to play sound   

var html5_audiotypes={ //define list of audio file extensions and their associated audio types. Add to it if your specified audio file isn't on this list:
    "mp3": "audio/mpeg",
    "mp4": "audio/mp4",
"ogg": "audio/ogg",
"wav": "audio/wav"
}

function createsoundbite(sound){
    var html5audio=document.createElement('audio')
    if (html5audio.canPlayType){ //check support for HTML5 audio
        for (var i=0; i<arguments.length; i++){
            var sourceel=document.createElement('source')
            sourceel.setAttribute('src', arguments[i])
            if (arguments[i].match(/\.(\w+)$/i))
                sourceel.setAttribute('type', html5_audiotypes[RegExp.$1])
            html5audio.appendChild(sourceel)
        }
        html5audio.load()
        html5audio.playclip=function(){
                    if (document.getElementById('sound').checked){

                html5audio.pause()
                    html5audio.currentTime=0
                    html5audio.play()

                    }
        }
    return html5audio
}
else{
    return {playclip:function(){throw new Error("Your browser doesn't support    HTML5 audio unfortunately")}}
}
}

//Initialize two sound clips with 1 fallback file each:

var mouseoversound=createsoundbite("whistle.ogg", "whistle.mp3")
var clicksound=createsoundbite("click.ogg", "click.mp3")

</script> 
```

因此，它会检查该框是否被选中。如果是，那么它会播放。如果没有，则不会播放。

# xml - 如何反序列化具有双重实体名称的列表？

> ID：10389474
> 
> 赞同：0
> 
> 时间：2012-04-30T19:33:52.970
> 
> 标签：xml

我有下面列出的xml。我想反序列化为 C# 中的列表<>。有没有办法处理列表实体名称 ASIwizard 和 Wizard 的加倍？如果它只是 ASIwizard 或 Wizard 我可以做到，但我不确定如果每个元素都有一个双重实体名称该怎么办？

```
<ASiwizards>
  <ASiwizard>
    <Wizard>
      <id>1</id>
      <title>Headlight Wizard</title>
      <description>This wizard will help troubleshoot issues related to the headlight functionality of the eBike controller</description>
      <created>2012-04-27 14:35:34</created>
      <modified>2012-04-27 14:35:34</modified>
    </Wizard>
  </ASiwizard>
  <ASiwizard>
    <Wizard>
      <id>2</id>
      <title>Wiring Harness</title>
      <description/>
      <created>2012-04-27 19:11:33</created>
      <modified>2012-04-27 19:11:33</modified>
      </Wizard>
  </ASiwizard>
</ASiwizards> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T19:39:42.357

This should do the trick:

```
var xElement = XElement.Parse(xml);
var items = xElement
  .Elements("ASiwizard")
  .Select(x => x.Element("Wizard"))
  .Select(
    x => new {
      Id = (Int32) x.Element("id"),
      Title = (String) x.Element("title"),
      Description = (String) x.Element("description"),
      Created = (DateTime) x.Element("created"),
      Modified = (DateTime) x.Element("modified")
    }
  )
  .ToList(); 
```

# xcode - XCode、svn、ssh 在 Time Machine 恢复之前工作 - 现在没那么多了

> ID：10389475
> 
> 赞同：1
> 
> 时间：2012-04-30T19:34:04.583
> 
> 标签：xcode, svn

好吧，与其说是关于编程，不如说是关于 svn、ssh 和 XCode..

我的 SSD 死了，所以我插入硬盘并从 Time Machine 中恢复了所有内容。机器运行良好，除了 SVN。它找不到回购。

网址是 svn+ssh://andersprivat@localhost/Library/Subversion/Repository/WriteAssist

repo 似乎在那里（在/Library/Subversion/Repository/WriteAssist）。XCode 要求输入密码，但随后失败。

从 cmdline 使用 svn 时，我得到以下信息：

```
Admins-MacBook-Pro:Classes andersprivat$ svn commit -m "Test" PredictorSettingsModel.m 
svn: Commit failed (details follow):
svn: To better debug SSH connection problems, remove the -q option from 'ssh' in the [tunnels] section of your Subversion configuration file.
svn: Network connection closed unexpectedly 
```

建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T04:49:00.560

Mac 上默认不启用 ssh 守护程序，因此在将用户恢复到全新安装时，您需要启用它。系统设置 -> 共享，启用远程登录。以防万一，您可能希望将其限制为您的个人用户。

# ios - 隐藏键盘ios

> ID：10389476
> 
> 赞同：41
> 
> 时间：2012-04-30T19:34:05.753
> 
> 标签：ios, objective-c, keyboard, iphone-softkeyboard

我有一些文本输入，只要我触摸背景，我就可以隐藏键盘，但只有当我输入第一个文本框名称 textField1 时。现在这段代码应该很简单，但我似乎无法理解。

```
-(IBAction)backgroundTouched:(id)sender {
    [textField1 resignFirstResponder];
    [buildLength resignFirstResponder];
    [buildWidth resignFirstResponder];
    [ridgeWidth resignFirstResponder];
    [rafterWidth resignFirstResponder];
    [hipWidth resignFirstResponder];
    [eaveOverhang resignFirstResponder];
    [spacing resignFirstResponder];
} 
```

* * *

## 回答 #1

> 赞同：189
> 
> 时间：2012-12-21T14:13:03.827

如果您想在点击一个按钮时隐藏键盘并且您的 中有多个，那么`UITextFields`您`view`应该使用：

```
[self.view endEditing:YES]; 
```

点击视图上的任意位置，键盘将消失。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2013-04-05T12:09:06.960

尝试这个：

```
- (void) touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event 
{
     [[self view] endEditing:YES];
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-03-31T07:00:28.430

您还可以遍历视图数组（例如 UIView 的子视图）并手动退出键盘，如果您不想退出父 UIView 中的所有子视图，这很好。

```
- (void)viewDidLoad
{
    self.view.userInteractionEnabled = TRUE;
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
}

-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event{
    //Iterate through your subviews, or some other custom array of views
    for (UIView *view in self.view.subviews)
        [view resignFirstResponder];
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-01T08:50:57.200

您可以尝试`UITouch`方法，并在此设置您的文本字段对象并`resignFirstResponder` 在您触摸屏幕时调用键盘将退出，我希望这对您有用。

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{  
    [currentSelectedTextField resignFirstResponder];
} 
```

# sql-server-2008 - SQL将外键添加到现有列

> ID：10389477
> 
> 赞同：119
> 
> 时间：2012-04-30T19:34:07.190
> 
> 标签：sql-server-2008, foreign-key-relationship

如果我在 SQL Server 2008 中使用以下 SQL 命令来更新具有外键约束的表：

```
ALTER TABLE Employees
ADD FOREIGN KEY (UserID)
REFERENCES ActiveDirectories(id) 
```

**`UserID`**是我在表中的 FK 列`Employees`。我试图**`UserID`**在我的`ActiveDirectories`表中引用。我收到此错误：

> 外键“UserID”在引用表“Employees”中引用了无效列“UserID”。

* * *

## 回答 #1

> 赞同：204
> 
> 时间：2012-04-30T19:37:34.353

错误表明您的员工表中没有 UserID 列。尝试先添加列，然后重新运行语句。

```
ALTER TABLE Employees
ADD CONSTRAINT FK_ActiveDirectories_UserID FOREIGN KEY (UserID)
    REFERENCES ActiveDirectories(id); 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-04-30T19:39:31.677

也许你的列倒了？

```
ALTER TABLE Employees
ADD FOREIGN KEY (UserID)           <-- this needs to be a column of the Employees table
REFERENCES ActiveDirectories(id)   <-- this needs to be a column of the ActiveDirectories table 
```

难道是在表中调用`ID`了该`Employees`列，并且`UserID`在`ActiveDirectories`表中？

那么你的命令应该是：

```
ALTER TABLE Employees
ADD FOREIGN KEY (ID)                   <-- column in table "Employees"
REFERENCES ActiveDirectories(UserID)   <-- column in table "ActiveDirectories" 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-06-23T13:11:19.487

MySQL / SQL Server / Oracle / MS Access：

```
ALTER TABLE Orders
ADD FOREIGN KEY (P_Id)
REFERENCES Persons(P_Id) 
```

要允许命名 FOREIGN KEY 约束并在多个列上定义 FOREIGN KEY 约束，请使用以下 SQL 语法：

MySQL / SQL Server / Oracle / MS Access：

```
ALTER TABLE Orders
ADD CONSTRAINT fk_PerOrders
FOREIGN KEY (P_Id)
REFERENCES Persons(P_Id) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-05-24T00:50:11.860

在将来。

```
ALTER TABLE Employees
ADD UserID int;

ALTER TABLE Employees
ADD CONSTRAINT FK_ActiveDirectories_UserID FOREIGN KEY (UserID)
    REFERENCES ActiveDirectories(id); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-09-14T05:57:04.803

```
ALTER TABLE Faculty 
WITH CHECK ADD  CONSTRAINT FKFacultyBook
FOREIGN KEY FacId
REFERENCES Book Book_Id

ALTER TABLE Faculty 
WITH CHECK ADD  CONSTRAINT FKFacultyStudent 
FOREIGN KEY FacId
REFERENCES Student StuId 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-12-01T10:59:55.550

ActiveDirectories（id）的外键创建方式正确，我认为主要错误是您没有在ActiveDirectories表中提到id的主键

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-11-20T20:08:48.257

如果表已经创建：

首先做：

```
ALTER TABLE `table1_name` ADD UNIQUE( `column_name`); 
```

然后：

```
ALTER TABLE `table1_name` ADD FOREIGN KEY (`column_name`) REFERENCES `table2_name`(`column_name`); 
```

# rally - 链接到附件

> ID：10389478
> 
> 赞同：2
> 
> 时间：2012-04-30T19:34:08.180
> 
> 标签：rally

我正在尝试找出一种方法来提取指向用户故事可能具有的附件的链接，但我无法弄清楚如何。正如我所拥有的，当用户故事有附件时，我在该列中得到的唯一内容是“[object Object]”。

似乎没有太多关于抓取附件的内容，如果有人能阐明任何观点或指出我正确的方向，我一定会很感激！

```
<html>
<head>
   <title>Table</title>
   <meta name="Name" content="App Example: Table" />
   <meta name="Version" content="2010.4" />
   <meta name="Vendor" content="Rally Software" />
   <script type="text/javascript" src="https://rally1.rallydev.com/apps/1.24/sdk.js?loginKey=bignumber"></script>  
   <script type="text/javascript">

     function tableExample() {
       var rallyDataSource = new rally.sdk.data.RallyDataSource('12345', '12345',       'True', 'True');
      function itemQuery() {
         var queryObject = {
           key: 'stories',
           type: 'HierarchicalRequirement',
           fetch: 'FormattedID,Name,ScheduleState,Description,Attachments',
           query: '(Name contains "release")'
         };
         rallyDataSource.findAll(queryObject, populateTable);
      }

      function populateTable(results) {
         var tableDiv = document.getElementById('aDiv');
         var config = { columns: 
             [{key: 'FormattedID', header: 'Formatted ID', width: 100}, 
             {key: 'Name', width: 400}, 
             {key: 'ScheduleState', header: 'Schedule State', width: 200},
             {key: 'Description', width: 800},
             {key: 'Attachments', header: 'Attachment Link', width: 200}]};
        var table = new rally.sdk.ui.Table(config);

     table.addRows(results.stories);
         table.display(tableDiv);

      };
      itemQuery();
     }

     rally.addOnLoad(tableExample);
   </script>
</head>
<body>
   <div id="aDiv"></div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T21:16:52.273

我包含了您的 App 示例的略微修改版本，该版本进行了一些后处​​理以提取每个附件的对象 ID 并将其放入一些 HTML 链接中，这些链接会更新到相关的表格列中。

```
 <html>
        <head>
           <title>Table</title>
           <meta name="Name" content="App Example: Stories with Attachments" />
           <meta name="Version" content="2010.4" />
           <meta name="Vendor" content="Rally Software" />
           <script type="text/javascript" src="https://rally1.rallydev.com/apps/1.29/sdk.js"></script>
           <script type="text/javascript">

             var table = null;

             function tableExample() {
               var rallyDataSource = new rally.sdk.data.RallyDataSource('__WORKSPACE_OID__',
                                                                                    '__PROJECT_OID__',
                                                                                    '__PROJECT_SCOPING_UP__',
                                                                                    '__PROJECT_SCOPING_DOWN__');
              function itemQuery() {
                 var queryObject = {
                   key: 'stories',
                   type: 'HierarchicalRequirement',
                   fetch: 'FormattedID,Name,ScheduleState,Description,Attachments,ObjectID'
                   // query: '(Name contains "release")'
                 };
                 rallyDataSource.findAll(queryObject, populateTable);
              }

              function populateTable(results) {

                  if (table) {
                      table.destroy();
                  }

                 var tableDiv = document.getElementById('aDiv');

                 var config = { 'columnKeys'    : ['FormattedID',  'Name', 'ScheduleState',   'Attachments'],
                                'columnHeaders' : ['FormattedID',  'Name', 'ScheduleState',   'Attachments'],
                                'columnWidths'  : ['100px',        '400px', '85px',           '300px']
                               };
                 table = new rally.sdk.ui.Table(config);
                 table.addRows(results.stories);

                 for (i=0;i<results.stories.length;i++) {

                     myStory = results.stories[i];
                     myAttachments = results.stories[i].Attachments;

                     myAttachmentHTML = "";
                     for (j=0;j<myAttachments.length;j++) {
                         myAttachmentOID = myAttachments[j].ObjectID;
                         myAttachmentName = myAttachments[j].Name;
                         myAttachmentURL = "https://rally1.rallydev.com/slm/attachment/"+
                                 myAttachmentOID + "/" + myAttachmentName;

                         myAttachmentHTML += "<div><a href='" + myAttachmentURL + "'>" +
                                 myAttachmentName + "</a></div>";

                     }
                     table.setCell(i, 3, myAttachmentHTML);
                 }
                 table.display(tableDiv);

              };
              itemQuery();
             }

             rally.addOnLoad(tableExample);
           </script>
        </head>
        <body>
           <div id="aDiv"></div>
        </body>
        </html> 
```

# c# - 如何检查访问该站点的用户是在根页面上还是在任何其他页面上？

> ID：10389479
> 
> 赞同：10
> 
> 时间：2012-04-30T19:34:20.493
> 
> 标签：c#, asp.net-mvc-3, request

基本上我希望在有人访问根页面时使用某种布局：

```
www.foo.com 
```

访问其他任何地方时的另一种布局：

```
www.foo.com/asdf 
```

我*可以*使用不同的 _Layout 文件，但由于唯一的变化是在这里，我发现这会适得其反。

这是我尝试过的，希望它能说明我想要完成的工作：

```
@if (HttpContext.Current.Request.Url.ToString() == "some way to check root?")
{
    @RenderBody()
}   
else
{
    <div id="big-kahuna"> <!-- Literally the only change. -->
        @RenderBody()    
    </div>
} 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-04-30T19:38:15.110

```
if(Request.Url.PathAndQuery == "/") // root; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-13T06:59:46.913

```
if (Request.AppRelativeCurrentExecutionFilePath == "~/") 
```

# pygame - 产生多个相同的精灵

> ID：10389487
> 
> 赞同：2
> 
> 时间：2012-04-30T19:34:32.050
> 
> 标签：pygame

我目前正在开发一款名为 Table Wars 的游戏，这是一款面向两名玩家的回合制策略游戏。进展一直很顺利，直到我遇到了生成单位的问题。

该程序不会产生多个相同的单位，也不会在旧单位死亡后重新产生新单位。

以下是一些可能有帮助的信息：

*   每个类都存储在一个变量中： ( `redI = Red_Infantry()`)
*   所有函数都存储在主循环中。
*   sprite 类具有硬编码的 X 和 Y 值，用于生成单位和移动单位。

我应该怎么办？

根据要求，这是红步兵的课程：

```
class Red_Infantry(pygame.sprite.Sprite):
    def __init__(self):
        pygame.sprite.Sprite.__init__(self)
        self.image, self.rect = load_image('Soldier_red.png', -1)
        self.selected = 0
        self.area = screen.get_rect()
        self.rect.topleft = (100, 300)
        self.health = 100 #Soldiers are have mediocre toughness.
        self.attack_damage = 25
        self.range_maximum = 20 #in pixels, this is melee range
        self.range_minimum = 0
        self.update()
    def update(self):
        if self.health <= 0:
            self.kill() 
```

以及生成这个单元的代码：

```
if spawned_units < 3 and PHASE == 1 and TURN == 'Red':
    if REDGOLD < 10:
        print "Out of money! Moving to Phase 2!"
        PHASE = 2
        spawned_units = 0
    elif event.type == KEYDOWN and event.key == K_1:
        if REDGOLD >= 10 and REDCOMMAND >= 5:
            Sprites.append(redI)
            REDGOLD -= 10
            REDCOMMAND -= 5
            spawned_units = spawned_units + 1
        else:
            print "Not enough gold!" 
```

这与所有单位的风格相似。它第一次正确执行，但在第二次、第三次等等中都没有，这意味着我只能拥有一个士兵。此外，当那个士兵通过 self.kill 死亡时，如果我尝试生成它，它就不会回来。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T16:57:49.063

您发布的生成过程的一部分不会创建任何新实例。除非`redI`在其他地方声明为新的`Red_Infantry`，否则您需要修改代码以在`Red_Infantry`每次要生成士兵时创建一个新实例。

```
sprites.append(Red_Infantry()) 
```

要更新精灵：

```
for sprite in sprites:
    sprite.update() 
```

将移动和其他状态更改放在更新方法中。这是 pygame 所期望的，但如果你愿意，你可以使用不同的风格。要点是你必须有多个实例`Red_Infantry`才能看到多个精灵。

您还可以使用[pygame 的 Group 类](http://www.pygame.org/docs/ref/sprite.html#pygame.sprite.Group)而不是简单的列表来保存精灵。

* * *

这是一个使用`Group`而不是列表的完整示例。在示例中，`Enemy`每次按下一个键时都会生成一个。每个都`Enemy`将其唯一 ID 打印到标准输出。

```
import sys
import random

import pygame
from pygame.locals import *

def main():
    pygame.init()
    screen = pygame.display.set_mode((480, 320))
    enemies = pygame.sprite.Group()
    while True:
        for event in pygame.event.get():
            if event.type == KEYDOWN:
                enemies.add(Enemy(screen))
            elif event.type == QUIT:
                sys.exit()
        enemies.update()
        screen.fill(pygame.Color("black"))
        enemies.draw(screen)
        pygame.display.update()

class Enemy(pygame.sprite.Sprite):

    def __init__(self, screen):
        pygame.sprite.Sprite.__init__(self)
        print "created a new sprite:", id(self)
        self.image = pygame.image.load("sprite.png")
        self.rect = self.image.get_rect()
        self.rect.move_ip(random.randint(0, screen.get_width()),
                          random.randint(0, screen.get_height()))

    def update(self):
        self.rect.move_ip(random.randint(-3, 3), 0)

if __name__ == "__main__":
    main() 
```

# java - Java string.hashcode() 给出不同的值

> ID：10389494
> 
> 赞同：2
> 
> 时间：2012-04-30T19:34:58.850
> 
> 标签：java

我已经被这个问题困住了几个小时了。我已经注释掉了所有认为这与数组越界有关的代码，但这仍在发生。我正在尝试使用扫描仪从文件中读取输入，存储数据并稍后使用哈希码获取该数据。但是散列值不断变化。

```
public static void main(String[] args)
{
    //only prior code is to access data
    char arr[] = new char[25];
    arr = readString.toCharArray();
    int y;
    y = hash(arr);
}

public static int hash(char[] arr)
{
    int get = arr.toString().hashCode();
    System.out.println(y);
    return get; 
} 
```

对于文件，即使每一行都有相同的内容，仍然存在这个问题
。
你好
你好
你好

我已经注释掉了所有其他函数，除了获取数据并对其进行哈希处理，但不确定为什么哈希码具有不同的值。我是否错误地使用了哈希码？还有另一种方法可以做到这一点吗？

编辑*当我在主要功能内对字符串进行哈希处理时，值始终相同，但我检索的值从未相同。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-30T19:42:53.757

问题是这一行：

```
 int get = arr.toString().hashCode(); 
```

您期望 arr.toString() 返回 char[] 中的字符串。它没有。

从[Object.toString()](http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html#toString%28%29)：

> Object 类的 toString 方法返回一个字符串，该字符串由对象作为其实例的类的名称、at 符号字符“@”和对象哈希码的无符号十六进制表示形式组成。换句话说，此方法返回一个等于以下值的字符串：getClass().getName() + '@' + Integer.toHexString(hashCode())

所以 arr.toString() 返回类似 "[C@3e25a5" 的东西，它的值每次都会改变，因此 hashCode() 也会改变。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T19:44:39.523

您必须使用 Arrays.toString(arr) 而不是 arr.toString()

[http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html#toString(char[])](http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html#toString%28char%5B%5D%29)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T19:39:01.103

Yes this is going to print out the same thing every time. Your method is printing the hashCode of key, which is not a function parameter. So presumably you've defined this somewhere in code you haven't shown us... why should its hashCode change?

# javascript - 我可以将 JavaScript 代码注入图像吗？

> ID：10389495
> 
> 赞同：-1
> 
> 时间：2012-04-30T19:35:20.647
> 
> 标签：javascript, html, inject

我的网站中有一个画廊部分，我想上传一张注入 JavaScript 的图片。

当它被模式框打开和放大时，我需要运行 JavaScript。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T19:46:06.497

没有。注射是不可能的。要在加载图像时执行 JavaScript，您可以执行

```
i = new Image();
i.onload = function() {}
i.src = '...'; 
```

# javascript - 将十进制数转换为浮点数并截断它

> ID：10389497
> 
> 赞同：-1
> 
> 时间：2012-04-30T19:35:24.313
> 
> 标签：javascript, floating-point, decimal

我有一个号码

例如：

```
8183 
```

我需要的是将其转换为浮点数-

例如 8183

```
(8183).toFixed(2); 
```

会还给我

```
8183.00 
```

但我需要进一步截断它，所以最终数字将是

```
8.18 
```

所以基本上我需要让它只有 2 个小数位的浮点数。我尝试使用 Math.floor 和 ceil 但无法弄清楚！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-30T19:39:05.743

Well what you're trying to accomplish is not completely clear, but I think that if you start by dividing by 1000, then call `toFixed` on it, it will give you the desired result.

```
var before = 8183;
var after = (before / 1000).toFixed(2); //8.18 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-30T19:40:21.007

You could divide by 10 until you are less than 10:

```
var digits = 8183;
while((digits = digits/10) > 10) {}
digits = digits.toFixed(2); // 8.18 
```

For negative numbers, you could want to store a boolean value and use `Math.abs(digits)`.

For numbers less than 0, you would want to multiple instead of divide.

* * *

If all you really want is scientific notation use [toExponential(2)](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Number/toExponential)

# sql - 如何在我自己的 cms 网站的 phpMyAdmin 中加密我的密码

> ID：10389498
> 
> 赞同：4
> 
> 时间：2012-04-30T19:35:26.633
> 
> 标签：sql, phpmyadmin

我正在为自己的网站创建一个登录系统，以便可以通过表单对其进行更新。我已经手动将自己添加到我称为用户的数据库中的一个表中，尽管永远只有我，并且我添加了我的密码纯文本。但是，我已经阅读了关于散列密码的内容，但据我所知，这只能通过 php 函数完成，我可以只使用 sql 部分在 phpMyAdmin 中完成吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-30T19:45:44.020

如果您编辑表格的结构，应该有一个名为“功能”的列。在那里您可以选择 MD5，并且存储在该字段中的任何值都将变为散列。因此，如果您的表中已经存储了密码，它也会被散列。

像这样：[http ://www.xodino.it/wp-content/uploads/file/ubuntuftp/pureftpd-02.png](http://www.xodino.it/wp-content/uploads/file/ubuntuftp/pureftpd-02.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-30T19:49:08.057

看看这里： [http ://dev.mysql.com/doc/refman/5.1/en/password-hashing.html](http://dev.mysql.com/doc/refman/5.1/en/password-hashing.html)

但是如果你想用 PHP 来做，请看这里。这是一篇关于密码哈希的好文章：http: [//phpsec.org/articles/2005/password-hashing.html](http://phpsec.org/articles/2005/password-hashing.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-14T17:29:28.777

您应该对密码进行加盐，然后对其进行哈希处理。使用 MD5 或 SHA1 的密码不再安全 - 您应该为每个密码生成一个唯一的盐，并使用 Bcrypt 创建一个强哈希。

这篇文章给出了一个不错的解释： [http://www.bentasker.co.uk/blog/security...](http://www.bentasker.co.uk/blog/security/201-why-you-should-be-asking-how-your-passwords-are-stored) 但是自己做一个谷歌搜索会给你很多关于在数据库中存储密码的结果。

您可以将 Type 更改为 BINARY 并将其长度设置为 60。如果您的应用程序将保持私有状态，则可以使用 MD5、SHA1 或 PASSWORD 函数。此处的官方 MySQL 文档中提供了加密和压缩功能的描述：[http://dev.mysql.com/doc/refman/5.5/...](http://dev.mysql.com/doc/refman/5.5/en/encryption-functions.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-22T08:21:09.823

我认为最简单的是编辑你的表格，应该有一个名为“功能”的列。在那里，您可以从下拉列表中选择 MD5，然后单击 GO，存储在该字段中的任何值都将变为散列。因此，如果您的表中已经存储了密码，但是如果您尝试再次将转换后的散列文本更改为 CHAR，它将更改原始密码并且将正确的密码放在 php 端将失败

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-30T19:43:40.030

我可以知道你在这里想要什么吗？您想使用 SQL 来加密您的密码吗？那么，在保存密码之前，你会调用这样的东西吗？

```
select * from user where username='me' and password=md5($mypass) 
```

如果这是您想要的，那取决于您的 SQL 引擎。MySQL 有一个叫做 MD5 的函数来帮助你完成这项工作。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-03-12T07:06:43.117

```
UPDATE Desarrollo.Login SET password = md5('mypassword') WHERE Login.id = 1; 
```

我认为这会有所帮助。

# flash - 如何使用 AS2 创建反向掩码？

> ID：10389504
> 
> 赞同：0
> 
> 时间：2012-04-30T19:35:58.247
> 
> 标签：flash, actionscript-2, mask, masking

> **可能重复：**
> [Flash 反转蒙版](https://stackoverflow.com/questions/2231587/flash-inverted-mask)

所以这里是面具：

```
imageMC.setMask(maskMC); 
```

这将显示被遮罩的区域，而在它之外什么都没有。我需要做的恰恰相反；仅显示未屏蔽区域。我需要用代码动态地做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T23:15:27.897

## 编辑：

尝试使用以下`blendMode`方法：

```
// `mainMC` and `maskMC` are MovieClip objects in the FLA library.

this.attachMovie("mainMC", "main", 10);
main.attachMovie("maskMC", "punchout", 11);

main1.cacheAsBitmap = true;
main.punchout.cacheAsBitmap = true;

main.blendMode = "layer";
main.punchout.blendMode = "erase"; 
```

# log4j - Log4J 日志轮换

> ID：10389505
> 
> 赞同：1
> 
> 时间：2012-04-30T19:36:01.530
> 
> 标签：log4j

我们有一个业务要求保留最近 7 天的日志我们可以使用 log4j 删除旧的 7 天日志吗？

我们正在使用

```
log4j.appender.stdout=org.apache.log4j.RollingFileAppender 
```

请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T01:09:17.430

您可以使用 DailyRollingFileAppender 的增强版本 在 DailyRollingFileAppender -log4j[中使用 MaxBackupIndex](https://stackoverflow.com/q/896530/449161)

否则，您可以创建一个仅删除超过一定年龄的日志的 cron 作业：

```
find /your/log/dir -name "*.log" -ctime +7 -exec rm {} \; 
```

# c++ - 阻止串行端口读取

> ID：10389514
> 
> 赞同：1
> 
> 时间：2012-04-30T19:36:50.380
> 
> 标签：c++, qt, ubuntu, serial-port

我必须在我的项目中阅读许多 (8) 个串行设备。它们是 Pantilt、相机、GPS、指南针等。它们都是 RS232 设备，但它们具有不同的命令结构和行为。例如，只要我打开端口，GPS 就会开始发送数据。PanTilt 和 Camera 只有在我向它们发送特定命令时才会响应。

我使用以下环境

*   操作系统：Ubuntu 11.10
*   语言：C++
*   框架：Qt 4.7

对于 PanTilt 和 Camera，我想开发这样的功能。

```
int SendCommand(string& command, string& response)
{ 
    port.write(command, strlen(command));
    while(1)
    {
       if(response contains '\n') break;
       port.read(response) // Blocking Read
    } 
    return num_of_bytes_read;
} 
```

我想以这种方式实现，因为这个函数将被用作更复杂算法的构建块......

```
SendCoammd("GET PAN ANGLE", &angle);
  if(angle > 60)
     SendCommand("STOP PAN", &stopped?);
     if(stopped? == true)
        SendCommand("REVERSE PAN DIRECTION", &revesed?);
        if(reversed? == true)
           SendCommand("START PAN", &ok); 
```

为了做这样的事情，我需要严格的同步行为。有人知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T19:07:24.533

我发现本教程非常有趣且很有帮助。 [http://www.webalice.it/fede.tft/serial_port/serial_port.html](http://www.webalice.it/fede.tft/serial_port/serial_port.html)

它展示了 boost::asio 如何用于执行同步和异步读/写。

感谢您的帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T19:45:12.477

使用标准文件 API 有什么问题？

```
fd = open("/dev/ttyX");
write(fd, command.cstr(), command.size());
vector v(MAX_SIZE);
read(fd,&v[0], MAX_SIZE); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T19:55:15.573

Qt 中与串行端口的低级通信可以通过[`QExtSerialPort`](http://code.google.com/p/qextserialport/)部分实现[`QIODevice`](http://qt-project.org/doc/qt-4.8/qiodevice.html)接口的库来建立。

您必须自己实现的高级协议。

# iphone - 在情节提要中使用带有标签栏控制器的 Core Data

> ID：10389516
> 
> 赞同：1
> 
> 时间：2012-04-30T19:36:59.170
> 
> 标签：iphone, ios, core-data, storyboard

我正在从视图控制器模态调用选项卡栏控制器，以实现用户可以配置的一系列附加控件和输入。在情节提要中，这很容易做到，但我怎样才能最好地将 Core Data 托管对象上下文传递给选项卡控制器托管的视图控制器？这里最好的设计方法是什么：

1.  忘记情节提要并在代码中完成应用程序的这一部分？这很简单。在将托管对象上下文添加到选项卡控制器之前，我只需将它们传递给每个视图。
2.  将托管对象上下文属性添加到启动选项卡视图控制器的视图控制器？使用每个目标视图控制器中的属性当然可以做到这一点`presentingViewController`，但这似乎不是最初的意图。
3.  通过根视图控制器的某些属性直接通信？我在网上看到过对此的引用，但对此不确定。

Appart 从托管数据上下文中，从`dismissModalViewController`消息返回到返回原始视图不需要其他任何内容。其他一切都通过 Core Data 进行管理。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T20:48:25.890

几个选项：

1.  在期间传递托管对象上下文`prepareForSegue`（您必须访问选项卡视图控制器的`viewControllers`数组以获取您的各个视图控制器）
2.  构建您的应用程序，使核心数据堆栈在全球范围内可用，无论是来自应用程序委托类还是单独的单例。然后，视图控制器可以在需要时请求托管对象上下文。
3.  可能会滥用委托，您将某些对象设置为选项卡栏控制器的委托，该委托*也*恰好保存托管对象上下文 - 然后可以从选项卡栏控制器中的所有视图控制器获得。这只是我刚刚想到的，可能是一个坏主意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T20:52:54.310

当您的主视图控制器收到`-prepareForSegue:`消息时，标签栏控制器和它管理的视图控制器将已经创建。您可以从 segue 本身获取选项卡栏控制器，然后从选项卡栏控制器获取视图控制器数组，如下所示：

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    UITabBarController *tbc = [segue destinationViewController];
    NSArray *controllers = [tbc viewControllers];
    NSLog(@"View Controllers: %@", controllers);
} 
```

现在，您需要进行一些错误检查，以确保目标控制器确实是选项卡栏控制器，但您可以替换为`NSLog()`代码以根据需要配置控制器。出于您的目的，这仅意味着将他们应该操作的托管对象上下文交给他们。

# facebook - Facebook 应用程序错误：https://www.facebook.com/4oh4.php

> ID：10389518
> 
> 赞同：0
> 
> 时间：2012-04-30T19:37:06.587
> 
> 标签：facebook, facebook-php-sdk, facebook-apps

我是开发我的 facebook 应用程序的新手。我知道php，HTML。我的服务器中有一个应用程序：[http](http://www.example.com/app_name) ://www.example.com/app_name 只有一个用 php 编写的文件，即 index.php

我按照 facebook 文档的指示填写了所有必要的画布 URL 和所有内容。现在当我试图访问这个[http://apps.facebook.com/app_name](http://apps.facebook.com/app_name)

我收到此错误：找不到您请求的页面。 [https://www.facebook.com/4oh4.php](https://www.facebook.com/4oh4.php)

谁能帮帮我吗？？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T02:32:16.337

Facebook 的错误跟踪器中有一个关于此问题的当前打开的错误报告：[https ://developers.facebook.com/bugs/325223977546904](https://developers.facebook.com/bugs/325223977546904)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T20:20:13.133

您的应用程序可能需要一段时间才能传播到所有 FB 服务器，因此您可能只需要稍等片刻。您是否以管理员身份登录到应用程序？如果您将其设置为私有，那么如果您不是管理员或测试人员，您将被重定向到 404 页面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-12T20:04:23.533

我有同样的问题，这似乎是暂时的。大约十分钟后，该站点再次开始工作。脸书……叹息。

# image - Wordpress 获取图片 url（目前使用 wp_get_attachment_url）

> ID：10389519
> 
> 赞同：5
> 
> 时间：2012-04-30T19:37:07.363
> 
> 标签：image, wordpress, url, attachment

在 wordpress 中获取图片附件 url 有点麻烦。到目前为止，这是我的代码：

```
<?php // find images attached to this post / page.
            global $post;
            $thumb_ID = get_post_thumbnail_id( $post->ID );
            $args = array(
                'post_type' => 'attachment',
                'post_mime_type' => 'image',
                'numberposts' => -1,
                'orderby' => 'menu_order',
                'order' => 'ASC',
                'exclude' => $thumb_ID,
                'post_parent' => $post->ID
            );
            $images = get_posts($args);
            ?>

            <?php // Loop through the images and show them

            if($images)
            {
            foreach($images as $image)  
            {

            echo  wp_get_attachment_image_url($image->ID, $size='attached-image');

            }
            }

?> 
```

什么都不返回。如果我换掉这个`wp_get_attachment_image_url($image->ID, $size='attached-image');`工作`wp_get_attachment_image($image->ID, $size='attached-image');`正常，但会带来图像而不仅仅是 url。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-30T20:05:25.117

The following code will loop through all image attachments and output the src url. Note that there are two methods shown, depending on your need.

```
<?php

    global $post;
    $args = array( 'post_type' => 'attachment', 'numberposts' => -1, 'post_mime_type' => 'image', 'post_status' => null, 'post_parent' => $post->ID ); 
    $attachments = get_posts($args);
    if ($attachments) {
            foreach ( $attachments as $attachment ) {
                    // Method #1: Allows you to define the image size
                    $src = wp_get_attachment_image_src( $attachment->ID, "attached-image");
                    if ($src) {echo $src[0];}
                    // Method #2: Would always return the "attached-image" size
                    echo $attachment->guid;
            }
    }

?> 
```

# javascript - 如何在greasemonkey中访问本地javascript var

> ID：10389520
> 
> 赞同：1
> 
> 时间：2012-04-30T19:37:11.957
> 
> 标签：javascript, variables, greasemonkey, local

已经一个小时了，我要为这个问题发疯了。

有一个页面，带有javascript函数：

```
<script>
  function foofunction(foo){
      dosomething(foo);
    }
</script> 
```

我已经用一个greasemonkey脚本替换了这个函数：

```
var scriptCode = new Array();

scriptCode.push('function foofunction(foo){    ');
scriptCode.push('    dosomething(foo);             ');
scriptCode.push('    myinjectedcode;               ');
scriptCode.push('}'                                 );

var script = document.createElement('script');
script.innerHTML = scriptCode.join('\n');
scriptCode.length = 0;

document.getElementsByTagName('head')[0].appendChild(script);
//here I have to access to foo value 
```

这行得通。

现在我必须访问我的greasemonkey 脚本中的foo 值，我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T19:49:56.437

为什么要在数组中创建 JavaScript 函数？我假设`foofunction`是一个全局函数，你为什么不在里面创建一个函数`window`（或者`unsafeWindow`，我认为，对于 Greasemonkey）？

```
unsafeWindow.foofunction = function(foo){
    dosomething(foo);
    //myinjectedcode;
} 
```

`foo`是一个局部变量，所以它只存在于`foofunction`函数内部。如果您想在此之外访问它，则需要将其设为全局变量。

```
unsafeWindow.foofunction = function(foo){
    dosomething(foo);
    //myinjectedcode;
    unsafeWindow.myFoo = foo;
}
unsafeWindow.myFoo; // will be set to `foo`, but only after `fooFunction` is ran 
```

问题是，`myFoo`只会在`fooFunction`运行后设置，并且没有好方法让你等到那时。我建议制作一个“回调”功能。

```
unsafeWindow.foofunction = function(foo){
    dosomething(foo);
    //myinjectedcode;
    unsafeWindow.myFooCallback(foo);
}
unsafeWindow.myFooCallback(foo){
    // this will be called with `foo` after `fooFunction` is ran.
} 
```

`fooFunction`但是，这有点毫无意义，因为无论如何您都将代码注入其中。

因此，要回答您的问题，您无法在函数之外获取局部变量的值。既然你无论如何都在注入代码，为什么不把所有与 inside 相关的代码都`foo`放在里面`fooFunction`呢？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T19:46:37.697

[如果您尝试做的是在我建议使用Firebug](http://getfirebug.com/)调试此类关闭脚本的过程中跟踪值，只需在脚本中您想要的任何位置放置一个断点，当它停止时它会为您提供当前值关闭所有正在使用的变量。

# c# - Linq to SQL 多个 DBML 共享类型

> ID：10389521
> 
> 赞同：0
> 
> 时间：2012-04-30T19:37:14.813
> 
> 标签：c#, sql-server, linq-to-sql, datacontext

我需要将数据从一个数据库传输到另一个数据库。目标数据库包含的数据量比源数据库少得多，每个表只是源表列的一个子集。我刚刚创建了目标 DBML，我得到了正确的编译错误，因为 L2S 数据类型（在目标 DBML 中）与源 DBML 中的 L2S 数据类型相同。

有没有办法在数据上下文之间共享这些类型？如果没有，有没有办法将源类型转换为目标类型，这样我就不必在保存到目标数据库之前创建映射器来将每个源类型映射到目标类型？

需要明确的是，在源 DBML 中，我只包含必要的列。这就是为什么源类型和目标类型完全相同，但它们属于它们自己的 DBML。

这个完全相同的表在两个 DBML 中：

![在此处输入图像描述](../Images/58c06ad5f9340436fedf36a15dbd419b.png)

这个问题一直很难正确表达。另一种问这个问题的方法是：“我可以从源表中获取数据，并将其保存到目标数据库中，只使用源 DBML 中的一种类型吗？”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T19:46:20.990

正如@David 建议的那样，在不同的命名空间中创建 DBML，然后使用 Automapper 或编写一些生成映射的代码（根据您的要求，这真的很容易）。

> 有没有办法在数据上下文之间共享这些类型？

不。

> 如果没有，有没有办法将源类型转换为目标类型，这样我就不必在保存到目标数据库之前创建映射器来将每个源类型映射到目标类型？

您必须创建映射 - 然而，这真的很容易（属性具有相同的名称、类型等）。我什至认为没有 Linq2Sql 或任何其他 ORM 会更容易。恕我直言，您应该删除所有约束、FK 等，在 SQL 命令级别复制数据（自己生成此代码），然后重新创建所有约束。

# android - 从内存中删除图像数据

> ID：10389524
> 
> 赞同：2
> 
> 时间：2012-04-30T19:37:25.953
> 
> 标签：android

我必须相信，一旦不再需要它，就有一种方法可以从内存中清除图像数据，但是尽管进行了详尽的搜索，我还是找不到解决方案。stack 和 google android dev list 都充满了关于 OOM 错误的问题，特别是“位图大小超出 VM 预算”，但我仍然没有看到明确的答案。

我了解设备存在硬内存限制，并且我了解加载和显示或缓存大量图像数据是不现实的，但应该避免丢弃不再需要的数据。

例如，想象一下这个非常基本的假设应用程序，它模拟了本地图库应用程序的许多行为：

1.  允许用户细读来自远程服务器的图像的图像库。
2.  该服务器上可能有任意数量的图像。
3.  该应用程序一次显示 1 张图像，并允许用户通过按钮按下或滑动一次返回或前进 1 张图像。
4.  一次最多渲染 3 张图像（因此用户可以在滑动时立即看到当前图像左侧或右侧的一张）。应丢弃所有其他图像数据。
5.  使用 URL.openStream 和 Drawable.createFromStream 或 BitmapFactory.decodeStream 加载图像。流已适当关闭。
6.  图像在获取之前*在服务器上调整大小。*
7.  加载发生在 AsyncTasks 中。不再需要的任务（由于从具有不完整任务的图像中移开）被取消。AyncTask 中的任何引用都是 WeaklyReferenced。
8.  当不再需要任何图像时，将通过以下方式“清除”它：
    *   getBackground().setCallback(null)
    *   侦听器设置为 null
    *   setImageDrawable/位图（空）
    *   删除视图

这个简单的结构考虑到了我所知道的所有建议做法，在某些时候不可避免地会因 OOM 错误而崩溃。使用 BitmapFactory.Options inSampleSize 和 inPreferredConfig 将延迟不可避免的情况，但不会永远延迟，并且会以图像质量为代价。在此示例中，我使用了远程图像，但是存储在 /assets/ 或内部存储器等中的图像存在问题。

我的感觉是，如果我们可以在某一点显示 X 数量的图像数据，并且我们采取所有步骤从内存中删除该图像数据，我们应该能够稍后显示相同数量的数据，而不必补偿已经存在的数据。以前发生过。

由于关于这个问题的问题数量众多，我希望有一个标准的解决方案记录在案，但如果有的话，我找不到它。我看过 Romain Guy 发布的答案，他在其他方面似乎对他的知识非常慷慨，并且在社区中很活跃，他说的是“简单。不要使用太多内存”。好的。告诉我怎么做。

我还应该提到 System.gc 对此没有任何帮助。我也知道 bitmap.recycle，但除非我弄错了，否则不能以这种方式使用它。

我错过了一些基本的东西吗？一旦不再使用图像数据，有没有办法丢弃它？上面缺少什么来创建一个简单的照片库？假设内置画廊应用程序使用框架而不是 NDK，我想必须有一种方法......

蒂亚。

/这个问题也已经发布在 android developer google group list 上。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T19:51:53.403

通过我与[Prime](https://github.com/DHuckaby/Prime)的合作，我发现了一些技巧，其中一个你没有提到。`inPurgeable`当您解码您的位图时，请确保`inInputShareable`在您的`BitmapFactory.Options`. 这会有所帮助，但我建议您查看我在 Prime 中的图像加载实现。我在所有产品中都使用它，没有任何内存问题。我发现 95% 的内存问题来自于`Bitmap`类的错误使用。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-30T20:08:56.860

android开发者网站上有一篇关于位图使用的非常[详细的文章。](http://developer.android.com/training/displaying-bitmaps/index.html)你看了吗？它解释了如何有效地加载、缓存和显示位图以及如何摆脱这个著名的 OutofMemoryError。

还有一个来自图像库[的示例应用程序。](http://developer.android.com/shareables/training/BitmapFun.zip)我想这就是你要找的。

# r - 削减创建表的价值

> ID：10389530
> 
> 赞同：2
> 
> 时间：2012-04-30T19:37:54.400
> 
> 标签：r, aggregate

我有以下类型的数据：

```
 mydata <- data.frame (yvar = rnorm(200, 15, 5), xv1 = rep(1:5, each = 40),
   xv2 = rep(1:10, 20))

table(mydata$xv1, mydata$xv2)

    1 2 3 4 5 6 7 8 9 10
  1 4 4 4 4 4 4 4 4 4  4
  2 4 4 4 4 4 4 4 4 4  4
  3 4 4 4 4 4 4 4 4 4  4
  4 4 4 4 4 4 4 4 4 4  4
  5 4 4 4 4 4 4 4 4 4  4 
```

我想再次列出`yvar`类别。以下是cutkey。
快捷键：

```
 < 10 - group 1
  10-12 - group 2
  12-16 - group 3
  >16 - group 4 
```

因此，对于每个 cutkey 元素，我们将拥有类似于上述类型的表格。我希望每次都有保证金。

```
 < 10 - group 1

  1 2 3 4 5 6 7 8 9 10
  1 4 4 4 4 4 4 4 4 4  4
  2 4 4 4 4 4 4 4 4 4  4
  3 4 4 4 4 4 4 4 4 4  4
  4 4 4 4 4 4 4 4 4 4  4
  5 4 4 4 4 4 4 4 4 4  4

   10-12 - group 2

 1 2 3 4 5 6 7 8 9 10
  1 4 4 4 4 4 4 4 4 4  4
  2 4 4 4 4 4 4 4 4 4  4
  3 4 4 4 4 4 4 4 4 4  4
  4 4 4 4 4 4 4 4 4 4  4
  5 4 4 4 4 4 4 4 4 4  4 
```

依此类推，适用于所有组

（数字肯定会不同）

有简单的方法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-30T19:45:30.870

是的，使用`cut`, `dlply`( **plyr**包) 和`addmargins`:

```
mydata$yvar1 <- cut(mydata$yvar,breaks = c(-Inf,10,12,16,Inf))
> dlply(mydata,.(yvar1),function(x) addmargins(table(x$xv1,x$xv2)))
$`(-Inf,10]`

       1  2  3  4  5  6  7  8  9 10 Sum
  1    0  0  0  0  0  0  2  0  1  0   3
  2    1  1  0  1  0  0  0  0  2  0   5
  3    0  1  0  0  1  1  0  2  0  0   5
  4    0  0  2  0  1  1  0  1  0  0   5
  5    0  1  1  0  1  1  1  0  0  2   7
  Sum  1  3  3  1  3  3  3  3  3  2  25

$`(10,12]`

       1  2  3  4  6  7  8  9 10 Sum
  1    0  0  0  1  2  0  0  0  0   3
  2    0  0  1  0  0  1  0  0  1   3
  3    0  1  0  1  1  2  0  0  1   6
  4    0  1  0  0  0  0  0  0  0   1
  5    1  0  1  1  1  0  1  1  2   8
  Sum  1  2  2  3  4  3  1  1  4  21

$`(12,16]`

       1  2  3  4  5  6  7  8  9 10 Sum
  1    2  3  1  1  1  2  0  3  0  2  15
  2    0  1  0  1  3  3  2  0  0  1  11
  3    3  1  3  1  0  0  0  2  4  1  15
  4    3  2  1  2  2  0  1  1  4  1  17
  5    3  1  1  2  0  1  1  1  1  0  11
  Sum 11  8  6  7  6  6  4  7  9  5  69

$`(16, Inf]`

       1  2  3  4  5  6  7  8  9 10 Sum
  1    2  1  3  2  3  0  2  1  3  2  19
  2    3  2  3  2  1  1  1  4  2  2  21
  3    1  1  1  2  3  2  2  0  0  2  14
  4    1  1  1  2  1  3  3  2  0  3  17
  5    0  2  1  1  3  1  2  2  2  0  14
  Sum  7  7  9  9 11  7 10  9  7  9  85

attr(,"split_type")
[1] "data.frame"
attr(,"split_labels")
      yvar1
1 (-Inf,10]
2   (10,12]
3   (12,16]
4 (16, Inf] 
```

您可以调整`breaks`参数以`cut`获取您想要的值。（尽管您在问题中显示的保证金总和根本不像保证金总和。）

# android - 在 Android 中使用 GridView 的 SectionIndexer

> ID：10389531
> 
> 赞同：3
> 
> 时间：2012-04-30T19:37:59.763
> 
> 标签：android, gridview, android-3.0-honeycomb, adapter, android-4.0-ice-cream-sandwich

是否可以在 Android中使用 a`SectionIndexer`和 a ？`GridView`快速滚动工作正常，我正在使用扩展的自定义适配器`BaseAdapter`。该适配器当前正在实施`SectionIndexer`，并且似乎与在线和 Stack Overflow 上显示的示例相同。这让我想到是否甚至可以使用`GridView`自定义适配器。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T20:28:40.970

```
static class YOUR_ADAPTER extends SimpleCursorAdapter implements SectionIndexer {

private AlphabetIndexer mIndexer;

 YOUR_ADAPTER (Context context, AlbumBrowserActivity currentactivity,
            int layout, Cursor cursor, String[] from, int[] to) {
        super(context, layout, cursor, from, to);

        getColumnIndices(cursor);
    } 

    private void getColumnIndices(Cursor cursor) {
        if (cursor != null) {
            YOUR_COLUMN = cursor.getColumnIndexOrThrow(WHAT_YOU'RE_SORTING);

            if (mIndexer != null) {
                mIndexer.setCursor(cursor);
            } else {
                mIndexer = new AlphabetIndexer(cursor, YOUR_COLUMN, mResources.getString(
                        R.string.fast_scroll_alphabet));
            }
        }
    }

    @Override
    public Object[] getSections() {
        return mIndexer.getSections();
    }

    @Override   
    public int getPositionForSection(int section) {
        return mIndexer.getPositionForSection(section);
    }

    @Override
    public int getSectionForPosition(int position) {
        return 0;
    }
} 
```

**fast_scroll_alphabet`String`**

```
<string name="fast_scroll_alphabet">\u0020ABCDEFGHIJKLMNOPQRSTUVWXYZ</string> 
```

这是一个基本示例，但仅此而已。实现`SectionIndexer`非常简单。

# python - 使用 Python 2.7 为 url() 值解析 CSS

> ID：10389535
> 
> 赞同：0
> 
> 时间：2012-04-30T19:38:11.963
> 
> 标签：python, css

我需要使用 Python 2.7 解析 CSS，但只在 url() 中查找图像请求，例如：

```
background:url(/images/myimg.jpg) 
```

由于我唯一关心的是 url() 中的值，因此我不需要大型 CSS 解析器来分解 CSS 规则中的每个属性（而且我真的没有看到任何可以正确获取 url( ) 值）。

因此，既然这将是自定义代码，那么拆分一大串 CSS 规则并将每个 url() 值收集到一个列表中的最佳方法是什么？

以下是我希望得到的，并且尽可能快速和高效（特别是如果 css 文件为 80K 或更大）

```
css = "body { background:url(/image/body-bg.png) } #content { background-image:url('../graphics/content-bg.jpg') }"

... magic goes here...

urls = [ '/image/body-bg.png', '../graphics/content-bg.jpg' ] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T19:50:51.820

[`cssutils.getUrls`](http://packages.python.org/cssutils/docs/utilities.html#geturls)

# sql - 隐藏一列字符串日期

> ID：10389541
> 
> 赞同：0
> 
> 时间：2012-04-30T19:38:21.167
> 
> 标签：sql, oracle, ms-access

我有 2 列在访问中保存为字符串日期 yyyymmdd。我将表链接到 oracle 数据库，需要在插入时隐藏列，使其看起来像 yyyy/mm/dd。

我在尝试：

```
INSERT INTO TEST
(DATE) Values (20110818, To_DATE("YYYY/MM/DD"))
FROM TEST_DATE 
```

我想将插入时的整个列从访问转换为 oracle

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T19:41:23.660

Try like this

```
INSERT INTO TEST
(DATE) 
SELECT TO_DATE('20110818','YYYYMMDD')
FROM TEST_DATE 
```

# python - 在 table.query 中使用 attributes_to_get 时出现 Boto DynamoDB 错误

> ID：10389543
> 
> 赞同：1
> 
> 时间：2012-04-30T19:38:31.980
> 
> 标签：python, boto, amazon-dynamodb

我已经使用字符串哈希键和范围键设置了 DynamoDB 数据库。这有效：

```
>>> x = table.query(hash_key='asdf@asdf.com', range_key_condition=BEGINS_WITH("20"), 
    request_limit=5)
>>> [i for i in x]
[{u'x-entry-page': ... 
```

这没有，我不知道为什么不：

```
>>> x = table.query(hash_key='asdf@asdf.com', range_key_condition=BEGINS_WITH("20"), 
    attributes_to_get=[u'x-start-time'], request_limit=5)
>>> [i for i in x]
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/Library/Frameworks/Python.framework/Versions/7.2/lib/python2.7/site-packages/boto-2.3.0-py2.7.egg/boto/dynamodb/layer2.py", line 588, in query
    yield item_class(table, attrs=item)
  File "/Library/Frameworks/Python.framework/Versions/7.2/lib/python2.7/site-packages/boto-2.3.0-py2.7.egg/boto/dynamodb/item.py", line 45, in __init__
    raise DynamoDBItemError('You must supply a hash_key')
boto.dynamodb.exceptions.DynamoDBItemError: BotoClientError: You must supply a hash_key 
```

这对我来说意义不大。我显然提供了一个哈希键。我无法仅通过查看 Boto 源来判断问题所在。有问题的属性肯定存在于每条记录中（而不是应该引发错误）。

有什么建议么？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T20:22:55.860

在同事的帮助下，我们搞定了。问题是`attributes_to_get`需要哈希和范围键的名称。所以，这有效：

```
>>> x = table.query(hash_key='asdf@asdf.com', range_key_condition=BEGINS_WITH("20"), 
    attributes_to_get=[u'x-start-time', 'user_id', 'session_time'], request_limit=5)
>>> [i for i in x]
[{u'session_time': u'2012/04/18 09:59:20.247 -0400', u'user_id': u'asdf@asdf.com', 
    u'x-start-time': u'2012/04/18 09:59:20.247 -0400'}, ... 
```

这对我来说似乎是一个（次要）博托问题......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T20:25:09.553

巧合的是，这只是今天早些时候在 boto 中修复的。看：

[https://github.com/boto/boto/issues/656](https://github.com/boto/boto/issues/656)

# android - 让 MonoDroid 和 Db4o 协同工作

> ID：10389544
> 
> 赞同：0
> 
> 时间：2012-04-30T19:38:41.707
> 
> 标签：android, xamarin.android, db4o

我对 MonoDroid 和 db4o 这两个主题都是全新的，但是看看它们的示例代码，我对它们各自的工作方式有了一个很好的了解。尽管如此，我还是不知道如何让它们一起工作。有没有这方面经验丰富的朋友可以和我分享一些知识？我真的很感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T18:01:52.707

我要尝试确保的一件事是同一个文件同时用于读/写。如果您尝试打开一个不存在的文件，db4o 只会打开一个“空”数据库。

# mysql - 存储生日的最佳字段是什么？

> ID：10389560
> 
> 赞同：27
> 
> 时间：2012-04-30T19:39:49.047
> 
> 标签：mysql

我必须将用户的生日（如）存储在我的 mysql 数据库中`12-11-1990`。

我必须使用什么字段类型来存储它？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-04-30T19:41:01.367

要存储日期，您可能应该[使用 date](http://dev.mysql.com/doc/refman/5.1/en/datetime.html)。引用文档：

> DATE 类型用于具有日期部分但没有时间部分的值。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-04-30T19:51:59.787

您可以将其存储为一个`DATE`对象，就像您通常对非重复日期所做的那样。如果您使用的是 MySQL（我相信其他 DBMS 也有此功能），您可以使用 MySQL 函数检索生日，如下[所述](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html)：

```
SELECT * 
FROM table_name 
WHERE 
    MONTH(date_field) = desired_month AND 
    DAY(date_field) = desired_day 
```

在处理数千条记录时，此方法可能会有点慢。如果这是您的情况，您可以使用 3 个单独的 INT 存储生日，每个 INT（年、月、日）一个。然后你像这样搜索生日：

```
SELECT *
FROM table_name
WHERE
   month_field = desired_month AND
   day_field = desired_day 
```

If you use this last method, I'd advise you to also store a DATETIME version of the birthday so that you can build the date without any kind of maneuvers. You can additionally index each one of the 3 fields (non-unique) so it's faster to retrieve them.

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-04-30T19:41:56.297

“日期”应该是好的。

> DATE 类型用于具有日期部分但没有时间部分的值。MySQL 以 'YYYY-MM-DD' 格式检索和显示 DATE 值。支持的范围是“1000-01-01”到“9999-12-31”。

更多细节：[http ://dev.mysql.com/doc/refman/5.5/en/datetime.html](http://dev.mysql.com/doc/refman/5.5/en/datetime.html)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-04-30T19:48:56.310

您应该将日期存储为 DATE。

**并且 Locale**作为 varchar （[PHP](http://php.net/manual/en/class.locale.php)或[Java](http://docs.oracle.com/javase/6/docs/api/java/util/Locale.html)）。

不要忘记语言环境:)

没有什么比在你还没有生日的时候从微博（中文推特）之类的地方收到电子邮件更有趣的了。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-30T19:41:26.497

[DATE](http://dev.mysql.com/doc/refman/4.1/en/datetime.html)太明显了吗？

# sql - PostgreSQL formatting time aggregate function date('date_format')

> ID：10389566
> 
> 赞同：0
> 
> 时间：2012-04-30T19:40:17.093
> 
> 标签：sql, postgresql, plpgsql

Is there any aggregate function to format date & time (however I am interested in interval more) in a custom way like `11:10:45` to `11h 10m 45s` or something like that in PostgreSQL ? or I need to extract the parts or concat them by myself ?

Problem occurs specially with `number of days` in `interval`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T23:32:23.087

你的问题不是很清楚。如果你想找回

> 间隔天数

您可以使用[`EXTRACT`](http://www.postgresql.org/docs/current/interactive/functions-datetime.html#FUNCTIONS-DATETIME-EXTRACT)：

```
SELECT EXTRACT(day from '7 week'::interval) AS d

 d
----
 49 
```

请注意，这会提取给定区间的*子字段。*间隔未标准化或合理化。为了证明间隔首先使用[`justify_interval()`](http://www.postgresql.org/docs/current/interactive/functions-datetime.html#FUNCTIONS-DATETIME-TABLE)

```
SELECT EXTRACT(day from justify_interval('7 week'::interval)) AS d;

 d
----
 19 
```

从 49 天中扣除了一个月的 30 天。

因此，这些表达式返回 0 天：

```
SELECT EXTRACT(day from '24h'::interval);
SELECT EXTRACT(day from '1 months'::interval); 
```

* * *

如果您只想要**日期之间的天数**：

```
SELECT '2012-3-23'::date - '2012-3-1'::date AS d;

 d
----
 22 
```

您只需减去日期即可得到一个整数，表示两者之间的天数。

或在时间戳之间：

```
SELECT EXTRACT (day from '2012-03-25 23:12'::timestamp
                       - '2010-03-01 03:34'::timestamp) AS d;

  d
-----
 755 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T19:46:24.223

查看 to_char 函数的完整文档，它可以做你想做的事

[http://www.postgresql.org/docs/9.1/interactive/functions-formatting.html](http://www.postgresql.org/docs/9.1/interactive/functions-formatting.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T20:19:04.410

尝试设置 PostgreSQL 设置*intervalstyle*的不同值：

```
db=# show intervalstyle ;
 IntervalStyle 
---------------
 postgres

db=# select interval '3 days 11:10:45';
    interval     
-----------------
 3 days 11:10:45

db=# set intervalstyle = 'postgres_verbose';
SET

db=# select interval '3 days 11:10:45';
             interval              
-----------------------------------
 @ 3 days 11 hours 10 mins 45 secs

db=# set intervalstyle = 'iso_8601';
SET

db=# select interval '3 days 11:10:45';
   interval    
---------------
 P3DT11H10M45S 
```

# php - 奇怪的 MySQLi OO 错误

> ID：10389571
> 
> 赞同：1
> 
> 时间：2012-04-30T19:40:34.347
> 
> 标签：php, mysqli

我会尝试再次询问这个问题，但不会输入错误......我正在使用 MySQLi 进行连接，并故意使用错误的连接变量来触发错误。

按预期工作：

```
 $conn = mysqli_connect("localhost","x","x","x");
  if (mysqli_connect_errno()) {
    echo "Couldn't establish database connection blah blah";
  } 
```

这应该完全相同，但它显示“无法获取 MySQLi”警告：

```
 $conn = new mysqli("localhost","x","x","x");
  if ($conn->connect_errno) {
    echo "Couldn't establish database connection blah blah";
  } 
```

当连接细节良好时，这两种方法都很好，尽管这不是重点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T19:44:40.350

这在一些旧版本的 PHP 中不能正常工作。

如果您使用的是 5.2.9 之前的 PHP 版本，`$conn->connect_error`（我认为也是`$conn->connect_errno`）方法无法正常运行，您必须`mysqli_connect_errno()`改用该方法。

[MySQLi 构造函数文档](http://www.php.net/manual/en/mysqli.construct.php)讨论了这一点。

> mysqli->connect_error 属性仅在 PHP 版本 5.2.9 和 5.3.0 中才能正常工作。如果需要与早期 PHP 版本兼容，请使用 mysqli_connect_error() 函数。

```
// May need to use the procedural method, even in OO context...
$conn = new mysqli("localhost","x","x","x");
if (mysqli_connect_error()) {
    die('Connect Error (' . mysqli_connect_errno() . ') '
            . mysqli_connect_error());
} 
```

# javascript - 通过 Android WebView 从 JavaScript 调用 Java 函数

> ID：10389572
> 
> 赞同：78
> 
> 时间：2012-04-30T19:40:36.203
> 
> 标签：javascript, android, android-webview

我想在我的 Android 应用程序中同步调用一些 Java 代码。

我正在使用这个解决方案： [https ://stackoverflow.com/a/3338656](https://stackoverflow.com/a/3338656)

我的Java代码：

```
final class MyWebChromeClient extends WebChromeClient {
        public boolean onJsAlert(WebView view, String url, String message, JsResult result) {
            Log.d("LogTag", message);
            result.confirm();
            return true;
        }
    } 
```

我的 JavaScript 代码：

```
<html>
<script>
function java_request(){
    alert('test');
}
</script>
<body>
<h2>Welcome</h2>
<div id="area"></div>
<form>
<input type="button" value="java_call" onclick="java_request()">
</form>
</body>
</html> 
```

当我点击`java_call`按钮时，按钮进入按下状态。我可以`'test'`在控制台日志中看到。直到这里一切都很正常。

问题是，按钮永远不会回到正常状态。它保持在按下状态。也许JavaScript执行被破坏了或什么？

为什么按钮永远不会恢复到正常状态？

* * *

## 回答 #1

> 赞同：109
> 
> 时间：2012-04-30T19:49:25.140

我认为这不是让 javascript 执行 java 代码的最佳解决方案。看这里：

如果您想向 HTML 公开本机代码以通过 javascript 调用，请围绕您的 Web 视图声明执行以下操作：

```
JavaScriptInterface jsInterface = new JavaScriptInterface(this);
webView.getSettings().setJavaScriptEnabled(true);
webView.addJavascriptInterface(jsInterface, "JSInterface"); 
```

声明类`JavaScriptInterface`：

```
public class JavaScriptInterface {
    private Activity activity;

    public JavaScriptInterface(Activity activity) {
        this.activity = activity;
    }

    @JavascriptInterface
    public void startVideo(String videoAddress){
        Intent intent = new Intent(Intent.ACTION_VIEW);
        intent.setDataAndType(Uri.parse(videoAddress), "video/3gpp"); 
        activity.startActivity(intent);
    }
} 
```

我声明了一个播放视频的函数，但你可以做任何你想做的事情。

`WebView`最后，您通过简单的 javascript 调用在内容中调用它：

```
<video width="320" height="240" controls="controls" poster='poster.gif'
       onclick="window.JSInterface.startVideo('file:///sdcard/test.3gp');" >
   Your browser does not support the video tag.
</video> 
```

该示例取自我的另一个答案，关于播放视频，但应该足够解释。

**编辑**根据@CedricSoubrie 的评论：如果应用程序的目标版本设置为 17 或更高版本，则需要在`@JavascriptInterface`要导出到 Web 视图的每个方法上方添加注释。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-30T16:12:54.350

您的函数返回“真”。这使得您的 HTML 代码的“onclick”属性等于 true，因此按钮保持“已单击”状态。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-03-12T06:11:01.753

“ *YourJavaScriptInterface* ”类中定义的方法，不要忘记用“@JavascriptInterface”注解你要暴露的每个方法，否则不会触发该方法。

例如，以下代码来自 Google Cloud Print JavaScript 接口，用于从 web 视图页面调用：

```
 final class PrintDialogJavaScriptInterface {
        @JavascriptInterface
        public String toString() { return JS_INTERFACE; }

        @JavascriptInterface
        public String getType() {
            return cloudPrintIntent.getType();
        }

        @JavascriptInterface
        public String getTitle() {
            return cloudPrintIntent.getExtras().getString("title");
        }

        @JavascriptInterface
        public String getContent() {
            try {
                ContentResolver contentResolver = getActivity().getContentResolver();
                InputStream is = contentResolver.openInputStream(cloudPrintIntent.getData());
                ByteArrayOutputStream baos = new ByteArrayOutputStream();

                byte[] buffer = new byte[4096];
                int n = is.read(buffer);
                while (n >= 0) {
                    baos.write(buffer, 0, n);
                    n = is.read(buffer);
                }
                is.close();
                baos.flush();

                return Base64.encodeToString(baos.toByteArray(), Base64.DEFAULT);
            } catch (FileNotFoundException e) {
                e.printStackTrace();
            } catch (IOException e) {
                e.printStackTrace();
            }
            return "";
        }

        @JavascriptInterface
        public String getEncoding() {
            return CONTENT_TRANSFER_ENCODING;
        }

        @JavascriptInterface
        public void onPostMessage(String message) {
            if (message.startsWith(CLOSE_POST_MESSAGE_NAME)) {
                finish();
            }
        }
    } 
```

# objective-c - copyWithZone 错误

> ID：10389573
> 
> 赞同：2
> 
> 时间：2012-04-30T19:40:47.667
> 
> 标签：objective-c, memory-management

我正在使用以下代码来实例化视图 SenderPlayerViewController 并传递对象“会话”：

```
- (void)session:(GKSession *)session peer:(NSString *)peerID didChangeState: GKPeerConnectionState)state {
switch (state) {
    case GKPeerStateConnected:
        NSLog(@"Connected Central");
        if ([settings.playerType isEqualToString:@"SENDER"]){                 
            SenderPlayerViewController *myViewController = [[UIStoryboard storyboardWithName:@"MainStoryboard" bundle:NULL] instantiateViewControllerWithIdentifier:@"SenderPlayerViewController"];
            [self.navigationController pushViewController:myViewController animated:YES];
            myViewController.currentSession=session;

        }

        break;            
    case GKPeerStateDisconnected:
        NSLog(@"Disconnected Central");
        self.currentSession = nil;
        break;
}   
} 
```

视图 SenderPlayerViewController 的头文件是：

```
@interface CentralViewController : UIViewController {
Settings *settings;}
@property (nonatomic, copy) GKSession *currentSession;

@end 
```

执行代码时，我收到以下错误：

```
[GKSession copyWithZone:]: unrecognized selector sent to instance 0x9661200 
```

你能帮忙吗！

提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-30T19:45:29.450

```
@property (nonatomic, copy) GKSession *currentSession; 
```

是错的。GKSession 不是可复制的对象。所以你应该通过保留来获取对它的引用：

```
@property (nonatomic, retain) GKSession *currentSession; 
```

# java - Programming trouble Action listeners-FillRect

> ID：10389574
> 
> 赞同：0
> 
> 时间：2012-04-30T19:40:55.377
> 
> 标签：java, action

I am attempting to recreate the game Mastermind in Java GUI format. my trouble stems from the actionlistener not being able to access my NewPanel class i think. Any help would be great, im really stuck on this.

```
 import javax.swing.*;

    import java.awt.BorderLayout;
    import java.awt.Color;
    import java.awt.Dimension;
    import java.awt.Graphics;
    import java.awt.GridLayout;
    import java.awt.event.ActionEvent;
    import java.awt.event.ActionListener;

    public class Mastermind extends JFrame {
        public Mastermind(){
            setLayout(new BorderLayout());
            JPanel p1 = new JPanel();
            JPanel p2 = new JPanel();
            add(p1, BorderLayout.WEST);
            add(p2, BorderLayout.EAST);

            /* PANEL 1 LAYOUT STUFF*/
            JPanel p4 = new JPanel();
            JPanel p5 = new JPanel();

            JButton red = new JButton("RED");
            JButton blue = new JButton("BLUE");

            JLabel HTP = new JLabel("How To Play");
            JLabel htp =new JLabel("<html>Player 2 will have 10<br> "+
                "attempts to correctly<br> guess Player 1's<br> "+
                "Password.The<br> password will consist<br> "+
                "of a 4 length sequence<br> "+
                "of 4 different colors.<br> "+
                "Colors may be used<br> "+
                "more than once or<br> "
                "not at all.</html>");
            htp.getForeground();
            JLabel results = new JLabel("Guesses:");

            p1.setLayout(new BorderLayout());
            p4.setLayout(new BorderLayout());
            p5.setLayout(new GridLayout(1,2));

            p1.add(p4, BorderLayout.NORTH);
            p1.add(p5, BorderLayout.SOUTH);
            p1.add(results, BorderLayout.CENTER);

            p4.add(HTP, BorderLayout.NORTH);
            p4.add(htp,BorderLayout.SOUTH);

            p5.add(red);
            p5.add(blue);
            red.setPreferredSize(new Dimension(80,20));

            /* END PANEL 1 LAYOUT STUFF*/

            /* PANEL 2 LAYOUT STUFF*/

            JPanel p3 = new JPanel();

            JButton green = new JButton("GREEN");
            JButton yellow = new JButton("YELLOW");

            p2.setLayout(new BorderLayout());
            p3.setLayout(new GridLayout(1,2));

            p2.add(p3, BorderLayout.SOUTH);

            p2.add(new NewPanel(), BorderLayout.CENTER);
            p3.add(green);
            p3.add(yellow);

            /* END PANEL 2 LAYOUT STUFF*/

            /* ACTION LISTENER EVENTS */        
            red.addActionListener(new ActionListener() {
                public void actionPerformed(ActionEvent e) {
                    fillRect(Color.red);
                }
            });

            blue.addActionListener(new ActionListener() {
                public void actionPerformed(ActionEvent e) {

                }
            });

            green.addActionListener(new ActionListener() {
                public void actionPerformed(ActionEvent e) {

                }
            });

            yellow.addActionListener(new ActionListener() {
                public void actionPerformed(ActionEvent e) {

                }
            });
}

/* END ACTION LISTENER EVENTS */

public static void main(String[] args) {
            Mastermind frame = new Mastermind();

            frame.setTitle("Mastermind");
            frame.setSize(334, 500);
            frame.setLocationRelativeTo(null);
            frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
            frame.setVisible(true);
}

}
class NewPanel extends JPanel {
    protected void paintComponent(Graphics g) {
        super.paintComponent(g);

        int x,y;

        for(y = 10; y<= 330; y+=35){
            for(x =10; x<=120; x+=35 ){
                g.drawRect(x, y, 25, 25);
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T20:10:20.820

我有盒子可以根据按钮改变颜色。我不知道你想从哪里开始，但这应该是一个好的开始。

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Dimension;
import java.awt.GridLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;

public class Mastermind extends JFrame implements ActionListener{
    NewPanel p1,p2,p3,p4,p5;
    public Mastermind(){
        super();
        setLayout(new BorderLayout());
        p1 = new NewPanel();
        p2 = new NewPanel();
        add(p1, BorderLayout.WEST);
        add(p2, BorderLayout.EAST);

        /* PANEL 1 LAYOUT STUFF*/
        p4 = new NewPanel();
        p5 = new NewPanel();

        JButton red = new JButton("RED");
        JButton blue = new JButton("BLUE");

        JLabel HTP = new JLabel("How To Play");
        JLabel htp =new JLabel("<html>Player 2 will have 10<br> "+
            "attempts to correctly<br> guess Player 1's<br> "+
            "Password.The<br> password will consist<br> "+
            "of a 4 length sequence<br> "+
            "of 4 different colors.<br> "+
            "Colors may be used<br> "+
            "more than once or<br> " +
            "not at all.</html>");
        htp.getForeground();
        JLabel results = new JLabel("Guesses:");

        p1.setLayout(new BorderLayout());
        p4.setLayout(new BorderLayout());
        p5.setLayout(new GridLayout(1,2));

        p1.add(p4, BorderLayout.NORTH);
        p1.add(p5, BorderLayout.SOUTH);
        p1.add(results, BorderLayout.CENTER);

        p4.add(HTP, BorderLayout.NORTH);
        p4.add(htp,BorderLayout.SOUTH);

        p5.add(red);
        p5.add(blue);
        red.setPreferredSize(new Dimension(80,20));

        /* END PANEL 1 LAYOUT STUFF*/

        /* PANEL 2 LAYOUT STUFF*/

        p3 = new NewPanel();

        JButton green = new JButton("GREEN");
        JButton yellow = new JButton("YELLOW");

        p2.setLayout(new BorderLayout());
        p3.setLayout(new GridLayout(1,2));

        p2.add(p3, BorderLayout.SOUTH);

        p2.add(new NewPanel(), BorderLayout.CENTER);
        p3.add(green);
        p3.add(yellow);

        red.addActionListener(this);
        blue.addActionListener(this);
        yellow.addActionListener(this);
        green.addActionListener(this);    

    }
    public void actionPerformed(ActionEvent e) {
        System.out.println(e.getActionCommand());
        if (e.getActionCommand().equals("RED")){
            p1.setRectColor(Color.red);
        }else if (e.getActionCommand().equals("BLUE")){
            p1.setRectColor(Color.blue);
        }
        else if (e.getActionCommand().equals("GREEN")){
            p1.setRectColor(Color.green);
        }
        else if (e.getActionCommand().equals("YELLOW")){
            p1.setRectColor(Color.yellow);
        }
        p1.updateUI();
        p2.updateUI();
        p3.updateUI();
        p4.updateUI();
        p5.updateUI();
    }
}

import java.awt.Color;
import java.awt.Graphics;

import javax.swing.JPanel;

class NewPanel extends JPanel {
    private Color c;
    protected void paintComponent(Graphics g) {
        super.paintComponents(g);
        g.setColor(this.c);
        int x,y;

        for(y = 10; y<= 330; y+=35){
            for(x =10; x<=120; x+=35 ){
                g.drawRect(x, y, 25, 25);
            }
        }
    }
    public void setRectColor(Color c){
        this.c=c;
    }
}

import javax.swing.*;    

public class testRect{

    /**
     * @param args
     */
    public static void main(String[] args) {
        Mastermind frame = new Mastermind();

        frame.setTitle("Mastermind");
        frame.setSize(334, 500);
        frame.setLocationRelativeTo(null);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setVisible(true);
    }
} 
```

# javascript - 如何创建仅在单击容器时显示在光标位置的上下文菜单？

> ID：10389578
> 
> 赞同：0
> 
> 时间：2012-04-30T19:41:15.647
> 
> 标签：javascript, onclick

我尝试使用下面的代码设置仅在单击容器 div 时显示的上下文菜单。但我很混乱。如果它在这里有帮助，那就是小提琴[http://jsfiddle.net/PhilippB/SMKMW/1/](http://jsfiddle.net/PhilippB/SMKMW/1/)。

```
var container = document.getElementById("container");
var contextmenu = document.getElementById("contextmenu");

container.onclick = function() {contextmenu()} ;
contextmenu.style.display = "none";

function contextmenu(event) {
    if (contextmenu.style.display == "none") {
        contextmenu.style.display = "block";
        contextmenu.style.left = event.pageX + "px";
        contextmenu.style.top = event.pageY + "px";
    }
    else {
        contextmenu.style.display = "none";
    }
}​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T19:48:02.990

几个问题：

*   看起来你正在**用一个不必要的函数包装你的点击处理程序**。

    尝试使用以下方法定义您的 onclick 处理程序：

    ```
    container.onclick = contextmenu; 
    ```

*   您还将**处理程序函数和对 DOM 元素的引用命名为相同的**: `contextmenu`。重命名其中之一。

*   您**对显示的比较不正确**（而是一个作业）。它应该是：

    ```
    if (contextmenuElement.style.display == "block") { 
    ```

*   您**对容器样式的初始分配不会将值设置为 string**。它应该是：

    ```
    contextmenu.style.display = 'none'; 
    ```

进行这些更改后，您会注意到您的容器不可点击。那是因为它**没有可见的内容，也没有 width 或 height**。您可能想要设置这些，或者使用 CSS`visibility`而不是`display`隐藏/显示元素。

[这是一个更新的小提琴](http://jsfiddle.net/yNnym/)（我已经向容器添加了显式的高度/宽度属性和背景颜色以查看发生了什么）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T19:52:02.880

你发生了一些奇怪的事情，所以我并不完全清楚你在追求什么。

*   您有 2 个名为“contextmenu”的不同变量。第一个是你做 a`getElementById`的时候，第二个是你定义`contextmenu`函数的时候。
*   您的 JS Fiddle 示例与您上面的示例不匹配，并且在 IF 语句中包含错误（您只使用 1`=`而不是 2）。实际上，您的 JSFiddle 示例与您上面的示例非常不同
*   在您的示例中，里面的唯一内容`container`是`contextmenu`，但是您以 开头`display: none`，因此很难知道要单击什么来显示它。

试试这个更新版本的 JSFiddle ( [http://jsfiddle.net/SMKMW/2/](http://jsfiddle.net/SMKMW/2/) )

```
var container = document.getElementById("container");
var contextmenuElement = document.getElementById("contextmenu");

container.onclick = function() {contextmenu()} ;
contextmenuElement.style.display = 'none';

function contextmenu(event) {

    var container = document.getElementById("container");

    if (contextmenuElement.style.display == "block") {
        contextmenuElement.style.display = "none";
    }
    else {
        contextmenuElement.style.display = "block";
    }

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-30T19:55:27.960

您应该使用引号来包装字符串值：

```
contextmenu.style.display = "none"; 
```

你不应该`name`为 a`Variable`和 a定义一个`Function`：

```
var contextmenu // and function 
contextmenu()  // throw syntax error; 
```

除此之外，当一个元素被隐藏时，你不能点击它，最好创建另一个元素来调用该函数并显示一个隐藏的元素。

# java - 使用泛型泛化不同的实现

> ID：10389579
> 
> 赞同：1
> 
> 时间：2012-04-30T19:41:16.217
> 
> 标签：java, generics, reflection

我有几个非常相似的类（FloatOperand、BooleanOperand、IntegerOperand）。它们仅在调用的“parse”方法（parseFloat、parseBoolean 等）方面有所不同——我可以只用一个 GenericOperand 类替换这个 xxOperand 类吗？（也许通过泛型/反射组合）。

```
public class FloatOperand implements ConditionOperand {
 Float parsedNumber = 0.0f; 
 public FloatOperand parse(String aString) {
 if(!StringUtils.isEmpty(aString)) {
  parsedNumber = Float.parseFloat(aString);
 }
 return this;
}

public int compareTo(ConditionOperand arg) {
  Float someArg = (Float) arg.getWrappedToken();
  return parsedNumber.compareTo(someArg);
}

public Float getWrappedToken() {
    return this.parsedNumber;
}

/************/
public interface ConditionOperand extends Comparable<ConditionOperand> {
/**
 * @param aString
 *            - String representing a number, or a date, or a string.
 */
ConditionOperand parse(String aString);
Object getWrappedToken();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T19:45:34.827

你真的在使用不同的算法，比如`Float.parseFloat`这里。所以从我从这几行中看到的，单独的类似乎没问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T12:34:03.157

由于调用 ，不能用泛型的单个类替换它`Float.parseFloat()`，这不能以泛型方式完成。

但是您可以通过使用带有泛型的抽象类（而不是接口或除了接口之外）来避免重复代码，以避免重复代码，例如：

```
public class ConditionOperand<T extends Comparable<?>> implements Comparable<ConditionOperand<T>> {
  T parsedNumber; 
  public ConditionOperand<T> parse(String aString) {
    if(!StringUtils.isEmpty(aString)) {
      parsedNumber = simpleParse(aString);
    }
    return this;
  }

  public int compareTo(ConditionOperand arg) {
    T someArg = arg.getWrappedToken();
    return parsedNumber.compareTo(someArg);
  }

  public T getWrappedToken() {
    return this.parsedNumber;
  }

  public abstract T simpleParse(String s);
} 
```

然后你有一些非常简单的实现子类，比如

```
public class FloatOperand implements ConditionOperand<Float> {
  public Float simpleParse(String s) {
    return Float.parseFloat(s);
  }
} 
```

# jquery - jquery.post() 处理流程

> ID：10389583
> 
> 赞同：1
> 
> 时间：2012-04-30T19:41:25.533
> 
> 标签：jquery

我有一个页面将 JSON 发布到 cfc，并返回成功/失败消息。构建 JSON 的数组包含已更新的输入字段的 ID。我正在更改元素的背景颜色以提醒用户进行了更新，但是当用户在不离开页面的情况下发布更多更改时就会出现问题。该数组仍然包含上一篇文章中的数据，无论我尝试清除数组的内容或位置，背景的更改都会停止工作。

这是代码：

```
$("input").change(function(){
    theArray.push({
       'id':$(this).attr('id'),
       'value':$(this).val()
    });

});

$("#edit_button").click(function(){
    if(theArray.length >0){
        theArray.push({
           //some processing information to the cfc
        });
        theJson = JSON.stringify(theArray);
        $.post("CFCs/fund_profile.cfc",
            {
                method:"updateProfile",
                data:theJson
            },
            function(data){
            if(data.HASERROR == 1){
                $("#messageDiv").empty().html(data.MESSAGE);
            }
            else{
                $("#messageDiv").empty().html(data.MESSAGE);
                theArray.pop();//removing the cfc processing information
                for(var i = 0; i <= theArray.length; i++){
                    var $el = $("#" = theArray[i].id).parent().parent().css('background','red');
                    setTimeout(function(){
                        $el.css('background','');
                        $("#messageDiv").empty();
                    },5000);
                }
            }
         },
         "json");
        //THIS IS WHERE THE PROBLEM LIES (I THINK)
        //I HAVE TRIED THE FOLLOWING:
        var arrayLen = theArray.length;
        for(var j = 0;j <= arrayLen; j++){
            theArray.pop();
        }//DOESN'T WORK

        theArray.length = 0;
        //DOESN'T WORK

        for(var j = 0;j <= arrayLen; j++){
            theArray.shift();
        }//DOESN'T WORK
    }
}); 
```

如果我删除代码以清除数组，则会发生背景更改，但数组永远不会丢失该元素，并且始终会显示该元素正在更新。如果我保留它，则根本不会发生背景更改。

我敢肯定，我错过了一些简单的事情，但我对此感到沮丧。

有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T19:51:04.377

根据您发布的代码的布局（这并不完全有效，所以我担心它不是您使用的*实际*代码），您在错误的地方处理了 AJAX 调用的后置条件. 它在回调函数*之外*`$.post()`，因此它不会以相同的顺序发生（或不保证会发生）。请记住，AJAX 是*异步*的，因此您的注释表明哪些工作或不工作的代码在回调函数*之前发生。*

我建议`$.post()`尽可能保持回调函数的自主性。与其让它与 JavaScript 中的数组交互，不如让服务器在更新元素的 JSON 响应中返回一个数组。然后回调函数可以自己愉快地与这些元素交互，并且在此期间产生的回调函数的其他实例不会妨碍它。

因此，基本上，您将在`$.post()`回调之外保留您现在拥有的数组的清除，因此它会在 AJAX 调用之后立即发生（并且可能在所有情况下在它返回之前）。您将修改服务器端代码以返回受影响的 ID。传递给回调函数的`data`参数将包含这些 ID，您将使用它与 CSS 交互，而不是`theArray`直接使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T19:56:54.310

在 if/else 语句之后的 post 语句中添加以下内容：

```
theArray = []; 
```

这有效地使数组为空。无需循环遍历它。

此外，正如大卫所指出的，它必须在帖子的成功内部，而不是在它之后。

**编辑：**
您的 for 循环没有完全按照您的预期执行， setTimeout 应该只影响最后一个元素。要解决这个问题，请切换到 a `$.each`，或在 for 循环中创建一个匿名函数。

```
for(var i = 0; i <= theArray.length; i++){
    (function(i){
        var $el = $("#" = theArray[i].id).parent().parent().css('background','red');
        setTimeout(function(){
            $el.css('background','');
            $("#messageDiv").empty();
        },5000);
    })(i);
} 
```

**还有一点需要注意：**
如果有人在第一组数据完成之前向服务器提交了第二组数据，那么由于两种情况都使用相同的数组，事情可能会变得非常混乱。大卫在他的回答中很好地谈到了这一点。也许在单击事件上，您应该立即制作数组的副本，然后清除原始数组，使其保持打开状态以供下次单击使用。

示例（可能有效，未经测试）：

```
var theArray = [];
$("input").change(function() {
    theArray.push({
        'id': $(this).attr('id'),
        'value': $(this).val()
    });

});

$("#edit_button").click(function() {
    var myArray = $.extend([], theArray, true); // get a copy of theArray
    theArray = []; // empty theArray
    if (myArray.length > 0) {
        myArray.push({
            //some processing information to the cfc
        });
        theJson = JSON.stringify(myArray);
        $.post("CFCs/fund_profile.cfc", {
            method: "updateProfile",
            data: theJson
        }, function(data) {
            if (data.HASERROR == 1) {
                $("#messageDiv").empty().html(data.MESSAGE);
            }
            else {
                $("#messageDiv").empty().html(data.MESSAGE);
                myArray.pop(); //removing the cfc processing information
                var $el = $([]);
                for (var i = 0; i <= myArray.length; i++) {
                    $el.add("#" = myArray[i].id);
                }
                $el = $el.parent().parent().css('background','red');
                setTimeout(function(){
                    $el.css('background','');
                    $("#messageDiv").empty();
                },5000);
            }
        }, "json");
    }
}); 
```

**在最后一条语句中编辑**更新的 for 循环，应该更容易理解。

# magento - Magento 交易错误“请指定送货方式”

> ID：10389591
> 
> 赞同：7
> 
> 时间：2012-04-30T19:42:24.273
> 
> 标签：magento, magento-1.5

我们使用 Templates Master 的自定义结帐扩展程序，称为“Firecheckout”。不确定这是否相关，但我想我应该提到它。有时我会看到一封交易失败的电子邮件，原因是“请指定送货方式”。我花了很长时间试图找出这是如何发生的，我迷路了。我已经尝试了我能想到的一切来复制这个问题。根据我所做的事情的组合（从购物车中添加/删除商品，添加/删除更改运输选项的优惠券代码，在移动和桌面网站之间切换等）我已经能够做到结帐页面没有'没有选择运输方式的选项。但是，如果我尝试提交订单，我会在运输方式部分立即收到一条红色消息，上面写着“

搜索代码我发现错误电子邮件是在**_validate**方法中的**TM_FireCheckout_Model_Service_Quote**（扩展**Mage_Sales_Model_Service_Quote**）类中触发的

 **```
$method= $address->getShippingMethod();
$rate  = $address->getShippingRateByCode($method);
if (!$this->getQuote()->isVirtual() && (!$method || !$rate)) {
    Mage::throwException($helper->__('Please specify a shipping method.'));
} 
```

在这种情况下，我猜**$method**或**$rate**是 null 或 false，但为什么/怎么可能呢？我能做些什么来确保这永远不会发生吗？**FireCheckout 的_validate**方法和父类的**_validate**方法之间的唯一区别在于哪些字段被认为是必需的。它不会以任何方式更改地址对象，因此对**getShippingMethod**和**getShippingRateByCode**的后续调用应该与默认安装相同。

如有必要，我可以提供更多详细信息。我基本上是在尝试了解可能触发该错误的原因以及如何重现它，以便最终修补导致该错误的漏洞。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T13:29:11.463

我以前遇到过类似的事情，但不是 Firecheckout。但它也是来自 Apptha 的 Onestepcheckout 扩展，例如 @Lennon。长话短说，是 javascript 处理中的差异破坏了数据。我没有明确的答案给你，但我建议你看看在表单验证和结帐表单上的数据保存之间发生了什么。

你可以做的开始调查是在 FF 上启动 Firebug，观察控制台，看看你的数据是否仍在传递。您还可以创建一个简单的观察者模块来在`controler_action_predispatch`事件中执行以下操作：

```
$request = $observer->getControllerAction()->getRequest();
Mage::log(var_export($request->getParams(),true)); 
```

..或者直接在结帐路线中编辑控制器文件。任何漂浮你的船。

启用日志和`tail -f var/logs/system.log`. 您应该确保请求与日志匹配。这就是我开始解决问题的方式。

同样，这不是针对问题根源的“copypasta”修复或教程，而是分享我如何根据第一手经验诊断问题的经验。

[您可以在http://www.silksoftware.com/magento-module-creator](http://www.silksoftware.com/magento-module-creator)非常快速地创建一个模块

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-29T17:20:43.653

您需要在更改后定义运输方式。例如，在 Firecheckout 的“indexController”中创建一个函数为“saveShippingAction”。您可以每次通过 Ajax 调用此函数来更改客户数据，或者根据您的喜好。

内地：

```
 $customer = Mage::getSingleton('customer/session')->getCustomer();
    $shippingData = $this->getRequest()->getParam('shipping');
    $shippingData['street'] = implode("\n", $shippingData['street']);
    $customerAddress = $customer->getAddresses();
    $customerAddress = end($customerAddress);
    $customerAddress->setIsDefaultShipping(true)->setSaveInAddressBook(true);
    $customerAddress->addData($shippingData)->save(); 
```

在此示例中，我将送货数据记录回客户的最后一个地址，如果您需要为新客户保存，只需为他创建一个地址并保存为送货地址。

我希望能有所帮助，祝你好运。**

# ios - 如何旋转电影？【C4框架】

> ID：10389592
> 
> 赞同：2
> 
> 时间：2012-04-30T19:42:38.557
> 
> 标签：ios, rotation, c4

我正在使用 C4 Alpha，我在画布上添加了一个小电影，但我不知道如何将它旋转到正确的位置。

这是我的代码：

```
-(void)setup {
C4Movie *newMovie = [C4Movie movieNamed:@"IMG_0009.MOV"];
newMovie.center = CGPointMake(384,512);
[self.canvas addMovie:newMovie];
} 
```

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T19:49:37.447

目前，在 C4 alpha api 中，进行旋转的唯一方法是使用 CGAffineTransform()...

因此，您的示例如下所示：

```
-(void)setup {
    C4Movie *newMovie = [C4Movie movieNamed:@"IMG_0009.MOV"];
    newMovie.center = CGPointMake(384,512);
    newMovie.transform = CGAffineTransformMakeRotation(PI);
    [self.canvas addMovie:newMovie];
} 
```

PI 会将您的电影旋转 180 度，PI/2 = 90 等...

# python - 创建 Web 查询表单

> ID：10389594
> 
> 赞同：2
> 
> 时间：2012-04-30T19:42:51.980
> 
> 标签：python, django, forms

我有两个模型：导演和电影。

我想创建一个网络查询表单，以便用户可以搜索“1990 年至 1998 年间导演‘史蒂文·斯皮尔伯格’的所有电影”之类的内容。

只是好奇最好和最简单的方法是什么？

谢谢，

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-30T20:50:26.437

好的，最简单的解决方案就是这样。

我对您的模型结构做了一些假设，因此请进行相应调整。

假设这是我们的models.py

```
from django.db import models

class Director(models.Model):
    name = models.CharField(max_length=128)
    # maybe some other fields...

class Film(models.Model):
    title = models.CharField(max_length=128)
    director = models.ForeignKey(Director)
    created_at = models.DateField() 
```

我们天真的views.py 请记住，我故意省略了许多健全性检查。

```
import datetime
from django.shortcuts import render_to_response
from myapp.models import Film

def search(request):
    # Suppose we support these params -> ('director', 'fromdate', 'todate')
    request_params = request.GET.copy()
    fromdate = datetime.datetime.strptime(request_params['fromdate'], 'some-string-format')
    todate = datetime.datetime.strptime(request_params['todate'], 'some-string-format')
    # Our query is ready to take off.
    film_results = Film.objects.filter(
        director__name=request_params['director'],
        created_at__range=(fromdate, todate)
    )
    return render_to_response('search_results.html', {'results':film_results}) 
```

我们的 search_results.html 模板

```
{% extends some_base.html %}
{% if results }
  {% for film in results %}
    <h3>{{ film.title }}</h3>
    <p>Director: {{ film.director.name }}</p>
    <p>When: {{ film.created_at }}</p>
  {% endfor %}
{% else %}
  <p>Sorry no results for your query</p>
{% endif %} 
```

另请阅读[有关](https://stackoverflow.com/questions/2721782/convert-date-string-to-datetime-object-in-python)从字符串创建日期时间对象的内容

编辑：哦，我忘记了 urls.py 和实际形式:)

在您的 url.py 中，在 urlpatterns 中添加类似的内容。

```
url(r'^search/$', 'myapp.views.search'), 
```

现在实际的搜索表单必须是这样的：

```
<form method='GET', action='/search/'>
... your fields
</form> 
```

如果您愿意，可以通过 django 表单生成它。无论如何，我猜这不会让你走得太远。如果你正在做任何严肃的事情，你可能会看看[haystack](http://haystacksearch.org/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T19:47:07.900

嗯。我不相信任何这样的实用程序存在。如果有一个反向的ModelForm就好了。它将查看字段类型并获取搜索表单的每个字段的数据范围。

我认为现在你被困在创建一个文本框和一个日期选择器范围。并在视图中处理该数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T21:48:09.027

听起来您想让您的用户执行“多面”搜索。[Django Haystack](http://haystacksearch.org/)会让你这样做。他们的文档包含有关[faceting](http://django-haystack.readthedocs.org/en/latest/faceting.html)的信息。

# entity-framework - EF 代码优先迁移 - 忽略属性

> ID：10389595
> 
> 赞同：3
> 
> 时间：2012-04-30T19:42:53.400
> 
> 标签：entity-framework, entity-framework-migrations

我有一个简单的 poco 类，它有一个枚举属性（需要这样我仍然可以让代码首先创建枚举查找表）。我不希望迁移生成器将此列添加到数据库中。是否有属性或其他方式让迁移代码知道忽略该属性？

例子：

```
public class MyPoco
{
    public int MyPocoId { get; set; }
    public int MyPocoTypeId { get; set; }

    public MyPocoTypeEnum MyPocoTypeEnum
    {
        get { return (MyPocoTypeEnum)MyPocoTypeId; }
        set { MyPocoTypeId = (int)value; }
    }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-30T19:50:01.400

您可以使用 NotMappedAttribute

[http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.notmappedattribute(v=vs.103).aspx](http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.notmappedattribute(v=vs.103).aspx)

或者我更喜欢使用流畅的映射，因为它不会因为数据访问问题而使我的域模型混乱。

```
modelBuilder.Entity<MyPoco>().Ignore(p => p.MyPocoTypeEnum); 
```

# html - 将所有内容备份到根文件夹，而不需要多个 ../../

> ID：10389597
> 
> 赞同：0
> 
> 时间：2012-04-30T19:42:57.233
> 
> 标签：html, hyperlink, href, relative-path

有没有其他方法可以做这样的事情：

```
"../../../../index.html" 
```

使用相对链接时？根据我在 google 上找到的一篇文章，您可以`/`在链接的开头使用 a 一直到根文件夹，但是当我尝试这样做时，它似乎不起作用。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T19:45:02.057

使用斜线时，您将转到根目录。

在 Unix 中，您将转到驱动器的根目录，但在 Web 上使用它时，它会转到 Document 根目录。

文档根目录之外的任何内容都无法通过纯 HTML 访问。

# javascript - javascript / DOM - 如何访问对象的属性

> ID：10389601
> 
> 赞同：1
> 
> 时间：2012-04-30T19:43:30.183
> 
> 标签：javascript, dom, object, properties

似乎是一个简单的问题，但我无法得到这个。我有一个我正在尝试使用 javascript 中的 console.log 访问的属性。如果我执行 console.log(intersects) - 我会得到该对象，其中包含其所有属性的列表。其中之一是对象，它有一个名为“s2”的子属性——这是我希望能够在我的日志语句中访问的属性。但如果我尝试：

`console.log(intersects.object.name)`- 我不确定。我附上了 Chrome 中检查器的屏幕截图。知道如何访问它吗？![在此处输入图像描述](../Images/2629f24ba74fbc69ad24f9561a866146.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T19:51:30.007

看起来`intersects`实际上是一个对象数组；试试`intersects[0].object.name`。

（您可以通过检查器中父对象周围的方括号来判断。）

# c# - 如何在不使用自定义提供商的情况下从注册页面中删除此电子邮件字段？会员提供者

> ID：10389604
> 
> 赞同：0
> 
> 时间：2012-04-30T19:43:41.793
> 
> 标签：c#, asp.net, authentication, asp.net-membership, membership-provider

我正在使用会员资格提供商，在 CreateUserWizardStep 的注册页面中有以下字段

```
1-UserName
2-Password
3-Confirm Password
4-Emial 
```

当我创建帐户时，帐户创建成功。用户 AspnetMembership 提供商
但我的问题是我从注册页面中删除了电子邮件字段，它不允许保存。显示消息`'please enter valid email'.`
我如何从注册页面中删除此电子邮件字段。我不想使用自定义提供商 **有人可以给我一些提示以成功删除电子邮件字段吗？**

***我还在 CreateUserWizard 标签中设置了 RequireEmail="false"***

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T20:08:13.567

需要删除电子邮件文本框和`RequiredFieldValidator`createuserwizard 以及 RequireEmail="false"。

从默认模板以下部分需要删除

```
<p>
    <asp:Label ID="EmailLabel" runat="server" AssociatedControlID="Email">E-mail:</asp:Label>
    <asp:TextBox ID="Email" runat="server" CssClass="textEntry"></asp:TextBox>
    <asp:RequiredFieldValidator ID="EmailRequired" runat="server" ControlToValidate="Email" 
            CssClass="failureNotification" ErrorMessage="E-mail is required." ToolTip="E-mail is required." 
            ValidationGroup="RegisterUserValidationGroup">*</asp:RequiredFieldValidator>
</p> 
```

# 编辑

`requiresUniqueEmail="false"`也可以在 web config 中的 providers 部分设置。

来自[MSDN 的参考：](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.createuserwizard.requireemail.aspx)

> 如果 MembershipProvider 属性中指定的成员资格提供程序需要新用户的唯一电子邮件地址，则必须将 RequireEmail 属性设置为 true，以便显示用于输入电子邮件地址的 UI。否则，用户将看到 EmailRequiredErrorMessage 但无法输入电子邮件地址。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T19:48:39.980

你可以这样做：

1.如果您正在`email`为.`createuserwizard``new activation`

2.通过处理 CreatingUser 事件为所有用户分配自定义电子邮件。

例如`noreply@yoursitename.com`

3.禁用`RequiresUniqueEmail`您的`web.config`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T19:51:12.877

我会将 createuserwizard 转换为模板并丢弃电子邮件字段。这该怎么做？见这里： http: [//msdn.microsoft.com/en-us/library/ms178342 (v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/ms178342(v=vs.80).aspx)

# ios - 使用 1 个菜单和许多 UIPopoverController 的基本应用程序的 iOS 设计模式...？

> ID：10389610
> 
> 赞同：1
> 
> 时间：2012-04-30T19:44:24.283
> 
> 标签：ios, design-patterns, uibutton, uipopovercontroller

我目前正在设计一个小型应用程序，其中我有： - 1 个菜单（图形按钮） - 1 个内容（基本上是一个视图）显示为每个按钮的弹出框

用户触摸*UIButton ，使用**Interface Builder*设计的内容（并由其自己的视图控制器驱动）显示在*UIPopoverController*中。用户切换一些*UISwitch*，滑动一些*UISliders*，然后通过单击外部（或在所考虑的 UIPopoverController 内容的*关闭**UIButton*上）关闭*UIPopoverController*

如果用户触摸同一个按钮，当然会出现*UIPopoverController*，之前的值是新修改的

**问题 1：** *在哪里存储数据（我的意思是在运行时）？* 因为，每个精心准备的内容 UI 都有自己的视图控制器，更自然的方式可能是将它们放在那里。但是解散 UIPopoverController 也会解散数据......

**问题 2：** *如何让我的 UIPopoverController 提取最新数据（来自以前的用户或逻辑更改）？*

任何有关最佳实践的线索将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T19:53:52.053

听起来你应该做的是让主视图控制器负责显示弹出框存储数据。一些应该有帮助的事情：

*   在您的主视图控制器中，实现[UIPopoverControllerDelegate 协议](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIPopoverControllerDelegate_protocol/Reference/Reference.html#//apple_ref/doc/uid/TP40009307)并将其作为弹出框的委托。
*   在视图控制器上实现一些属性，允许您获取和设置它们的值（开关的状态、滑块的值等）
*   当弹出框控制器即将关闭时（实现`- (BOOL)popoverControllerShouldDismissPopover:(UIPopoverController *)popoverController`委托方法），从弹出框内的导航控制器中获取要保存的数据。
*   在显示弹出框之前，设置视图控制器上的所有属性，这样它将拥有最新的数据。

# asp.net - 根据在 GridView 行上单击的编辑按钮禁用特定的数据输入对象

> ID：10389612
> 
> 赞同：1
> 
> 时间：2012-04-30T19:44:39.510
> 
> 标签：asp.net, webforms

我有一个 GridView，我希望用户能够根据他们单击的按钮编辑行中的不同数据（每行中有多个编辑按钮）。

例如，如果`editButton1`单击，并且 gridview 进入编辑模式， `dropdownlist1`则应该显示并且`dropdownlist2`应该隐藏。相反，如果`editButton2`单击 ，`dropdownlist2`则应显示并`dropdownlist1`应隐藏。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T19:48:27.353

您需要处理 GridView RowEditing 事件并隐藏/显示所需的下拉菜单。

这是一篇让您入门的文章：http: [//devilswork.wordpress.com/2009/03/27/gridview-row-edit-delete-and-update/](http://devilswork.wordpress.com/2009/03/27/gridview-row-edit-delete-and-update/)

以下是行编辑事件的详细信息：http: [//msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.rowediting.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.rowediting.aspx)

**更新答案：**

您可以使用 RowEditing 事件并使用 sender 对象来获取按钮标识并相应地隐藏。

如果要使用 Command 值，则可以使用 RowCommand 事件：http: [//msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.rowcommand.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.rowcommand.aspx)

您的按钮的命令名称将是编辑。

# android - 另一个片段问题的片段

> ID：10389620
> 
> 赞同：298
> 
> 时间：2012-04-30T19:45:16.983
> 
> 标签：android, android-fragments

当我在另一个片段（我们称之为主片段）上显示一个片段（全屏`#77000000`背景）时，我的主片段仍然对点击做出反应（即使我们没有看到它，我们也可以点击一个按钮）。

**问题**：如何防止点击第一个（主）片段？

**编辑**

不幸的是，我不能只隐藏主要片段，因为我在第二个片段上使用透明背景（因此，用户可以看到位于后面的内容）。

* * *

## 回答 #1

> 赞同：629
> 
> 时间：2013-03-27T15:30:03.380

将`clickable`第二个片段视图的属性设置为 true。视图将捕获事件，以便它不会传递给主片段。所以如果第二个片段的视图是一个布局，这将是代码：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:clickable="true" /> 
```

* * *

## 回答 #2

> 赞同：75
> 
> 时间：2012-04-30T20:07:06.177

解决方案非常简单。在我们的第二个片段（与我们的主要片段重叠）中，我们只需要捕获`onTouch`事件：

```
@Override
public View onCreateView(LayoutInflater inflater,ViewGroup container,Bundle savedInstance){
    View root = somehowCreateView();

    /*here is an implementation*/

    root.setOnTouchListener(new View.OnTouchListener() {
        public boolean onTouch(View v, MotionEvent event) {
            return true;
        }
    });
    return root;
} 
```

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2018-05-19T11:37:38.827

只需添加`clickable="true"`和`focusable="true"`到父布局

```
 <android.support.constraint.ConstraintLayout
      xmlns:android="http://schemas.android.com/apk/res/android"
      xmlns:app="http://schemas.android.com/apk/res-auto"
      android:layout_width="match_parent"
      android:layout_height="match_parent"
      android:clickable="true"
      android:focusable="true">

      <!--Your views-->

 </android.support.constraint.ConstraintLayout> 
```

如果你正在使用`AndroidX`，试试这个

```
 <androidx.constraintlayout.widget.ConstraintLayout
      xmlns:android="http://schemas.android.com/apk/res/android"
      xmlns:app="http://schemas.android.com/apk/res-auto"
      android:layout_width="match_parent"
      android:layout_height="match_parent"
      android:clickable="true"
      android:focusable="true">

          <!--Your views-->

 </androidx.constraintlayout.widget.ConstraintLayout> 
```

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2017-12-20T07:41:00.240

**如果两个片段放置在同一个容器视图中，则在显示第二个片段时应该隐藏第一个片段。**

> 如果想了解更多关于如何解决 Fragment 问题的问题，可以看我的库：[https ://github.com/JustKiddingBaby/FragmentRigger](https://github.com/JustKiddingBaby/FragmentRigger)

```
FirstFragment firstfragment;
SecondFragment secondFragment;
FragmentManager fm;
FragmentTransaction ft=fm.beginTransaction();
ft.hide(firstfragment);
ft.show(secondFragment);
ft.commit(); 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2018-11-21T12:46:26.897

您需要 `android:focusable="true"`添加`android:clickable="true"`

`Clickable`表示它可以被指针设备点击或被触摸设备轻敲。

`Focusable`意味着它可以从键盘等输入设备获得焦点。像键盘这样的输入设备无法根据输入本身决定将其输入事件发送到哪个视图，因此它们将它们发送到具有焦点的视图。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2020-03-15T16:13:45.777

**方法一：**

您可以添加到所有片段布局

```
android:clickable="true"
android:focusable="true"
android:background="@color/windowBackground" 
```

**方法 2：（以编程方式）**

从等扩展所有片段`FragmentBase`。然后将此代码添加到`FragmentBase`

```
@Override
public void onViewCreated(@NonNull View view, @Nullable Bundle savedInstanceState) {
    super.onViewCreated(view, savedInstanceState);
    getView().setBackgroundColor(getResources().getColor(R.color.windowBackground));
    getView().setClickable(true);
    getView().setFocusable(true);
} 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2020-03-18T09:36:57.307

我们中的一些人为这个线程贡献了不止一个解决方案，但我还想提一个其他解决方案。如果您不喜欢像我一样在 XML 中将可点击和可聚焦等于 true 的每个布局的根 ViewGroup。如果你有一个像下面这样的，你也可以把它放在你的基地；

```
override fun onCreateView(
        inflater: LayoutInflater,
        container: ViewGroup?,
        savedInstanceState: Bundle?
    ) : View? {
        super.onCreateView(inflater, container, savedInstanceState)

        val rootView = inflater.inflate(layout, container, false).apply {
            isClickable = true
            isFocusable = true
        }

        return rootView
    } 
```

> 您也可以使用内联变量，但出于个人原因我不喜欢它。

我希望它对那些讨厌布局 XML 的人有所帮助。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2018-08-16T22:12:47.407

可接受的答案将“起作用”，但也会导致性能成本（过度绘制，重新测量方向变化），因为底部的片段仍在绘制中。也许您应该简单地通过标签或 ID 找到片段，并在需要再次显示时将可见性设置为 GONE 或 VISIBLE。

在科特林：

```
fragmentManager.findFragmentByTag(BottomFragment.TAG).view.visibility = GONE 
```

此解决方案优于使用动画时的替代方法`hide()`和`show()`方法。`FragmentTransaction`您只需从`onTransitionStart()`and`onTransitionEnd()`中调用它`Transition.TransitionListener`。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-08-03T06:06:29.257

您可以做的是，您可以通过使用 onClick 属性对前一个片段的布局进行空白单击该主片段的父布局，并且在活动中您可以创建一个函数`doNothing(View view)`并且不要在其中写入任何内容。这将为您完成。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-08-18T07:23:03.673

这听起来像是 DialogFragment 的一个案例。否则，使用 Fragment Manager 提交一个隐藏，另一个显示。这对我有用。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-06-06T06:24:24.577

的添加`android:clickable="true"`对我不起作用。当 CoordinatorLayout 是父布局时，此解决方案不适用于它。这就是为什么我将RelativeLayout 作为父布局，添加`android:clickable="true"`到它并将CoordinatorLayout 放置在这个RelativeLayout 上。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2018-08-22T07:50:32.357

我有多个具有相同 xml 的片段。
花了几个小时后，我删除`setPageTransformer`并开始工作

```
 //  viewpager.setPageTransformer(false, new BackgPageTransformer()) 
```

我有严格的逻辑。

```
public class BackgPageTransformer extends BaseTransformer {

    private static final float MIN_SCALE = 0.75f;

    @Override
    protected void onTransform(View view, float position) {
        //view.setScaleX Y
    }

    @Override
    protected boolean isPagingEnabled() {
        return true;
    }
} 
```

# linq - 通过 Linq 在第一列中选 择带有数据的 Excel 行

> ID：10389623
> 
> 赞同：0
> 
> 时间：2012-04-30T19:45:28.937
> 
> 标签：linq, openxml, openxml-sdk

我试图从 Excel 电子表格中仅选择第一列中包含数据的行。

这是我正在使用的代码：

```
 IEnumerable<Row> dataRows =
          from row in worksheet.Descendants<Row>()
          where (row.RowIndex > 2 
            && row.Descendants<Cell>().First().CellValue != null)
          select row; 
```

当我运行此代码时，调试器告诉我“隐式转换出错。无法转换空对象。”

我无法弄清楚空对象是什么。我假设每一行都有一个非空的第一个单元格（当然，有问题的单元格的 CellValue 可能为空）。

谁能告诉我在这里做错了什么？

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T15:30:37.940

如果行或单元格为空，则*可以*是`null`. 空对象可能来自第一个单元格中没有值的行（并且从未初始化）。

因此，当您运行时`row.Descendants<Cell>().First().CellValue`，`null`对象来自`.First()`，该单元格尚未初始化。

尝试以下操作：

```
IEnumerable<Row> dataRows =
    from row in templateWorksheetPart.Worksheet.Descendants<Row>()
    where (row.RowIndex > 2 
        && row.Descendants<Cell>().First() != null                        
        && row.Descendants<Cell>().First().CellValue != null)
    select row; 
```

# java - 在java中执行与linux管道相同的操作？

> ID：10389632
> 
> 赞同：0
> 
> 时间：2012-04-30T19:45:52.423
> 
> 标签：java

如何在 Java 代码中执行以下操作（不直接调用 shell - 根本不使用管道运算符）？

```
echo path | ./app 
```

这与启动应用程序然后写入 STDIN 相同吗？

我希望能够从 Java 启动一个进程并销毁它（而不用担心子进程）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T19:49:03.343

您可以使用[`ProcessBuilder`](http://docs.oracle.com/javase/6/docs/api/java/lang/ProcessBuilder.html)包装[`Process`类](http://docs.oracle.com/javase/6/docs/api/java/lang/Process.html)以从您的 Java 应用程序启动一个进程，并使用 和 获取其 IO[`Process#getInputStream`](http://docs.oracle.com/javase/6/docs/api/java/lang/Process.html#getInputStream%28%29)流[`Process#getOutputStream`](http://docs.oracle.com/javase/6/docs/api/java/lang/Process.html#getOutputStream%28%29)。

# iphone - 带有两个文本字段和两个按钮的 UIAlertView

> ID：10389635
> 
> 赞同：8
> 
> 时间：2012-04-30T19:46:01.667
> 
> 标签：iphone, objective-c, ios, uialertview

**问题**- 我想要一个 UIAlertView，它包含一个标题、两个带占位符的文本字段和两个按钮。 **到目前为止我所做的**- 我已经使用了这段代码，我得到了我提到的所有这些的确切 UIAlertView 但是当视图被加载时似乎首先出现在底部然后进入视图的中间。

```
 -(void)showalert{
    disclaimerAgreedAlertView = [[UIAlertView alloc] initWithTitle:@"   " 
                                                           message:@"    " 
                                                          delegate:self 
                                                 cancelButtonTitle:@"Cancel" 
                                                 otherButtonTitles:@"Login", nil];

    userNameTextField = [[UITextField alloc] initWithFrame:CGRectMake(20.0, 15.0, 245.0, 25.0)];
    userNameTextField.delegate=self;
    [userNameTextField setBackgroundColor:[UIColor whiteColor]];
    [userNameTextField setKeyboardType:UIKeyboardTypeDefault];
    userNameTextField.placeholder=@"Username";
    userNameTextField.secureTextEntry=NO;
    [disclaimerAgreedAlertView addSubview:userNameTextField];

    passwordTextField = [[UITextField alloc] initWithFrame:CGRectMake(20.0, 45.0, 245.0, 25.0)];
    passwordTextField.delegate=self;
    [passwordTextField setBackgroundColor:[UIColor whiteColor]];
    [passwordTextField setKeyboardType:UIKeyboardTypeDefault];
    passwordTextField.placeholder=@"Password";
    passwordTextField.secureTextEntry=YES;
    [disclaimerAgreedAlertView addSubview:passwordTextField];

    disclaimerAgreedAlertView.tag=99;

    [disclaimerAgreedAlertView show];
    disclaimerAgreedAlertView.frame= CGRectMake(5, 400, 320, 160);

} 
```

**然后我尝试了一些未记录的 api，它们给了我想要的结果，但我担心它可能会导致我的应用程序被拒绝。**

那么，有什么解决办法吗？

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2012-11-29T19:50:58.747

从 iOS 5 开始，可以使用 UIAlertView 的属性**alertViewStyle**来获取不同类型的警报视图，也可以使用文本字段。

可能的值：

*   UIAlertViewStyleDefault
*   UIAlertViewStyleSecureTextInput
*   UIAlertViewStylePlainTextInput
*   UIAlertViewStyleLoginAndPasswordInput

您可以使用**UIAlertViewStyleLoginAndPasswordInput**来获取一个带有两个文本字段的 UIAlertView，然后您可以自定义 textFields 的一些属性：

```
 UIAlertView *av = [[UIAlertView alloc] initWithTitle:@"Your_Title" message:@"Your_message" delegate:self cancelButtonTitle:@"Cancel" otherButtonTitles:@"OK", nil];
[av setAlertViewStyle:UIAlertViewStyleLoginAndPasswordInput];

// Alert style customization 
[[av textFieldAtIndex:1] setSecureTextEntry:NO];
[[av textFieldAtIndex:0] setPlaceholder:@"First_Placeholder"];
[[av textFieldAtIndex:1] setPlaceholder:@"Second_Placeholder"];
[av show]; 
```

您可以访问 UIAlertViewDelegate 的*alertView:clickedButtonAtIndex:*上的文本字段的值。

```
-(void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex{
     NSLog(@"1 %@", [alertView textFieldAtIndex:0].text);
     NSLog(@"2 %@", [alertView textFieldAtIndex:1].text);
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-30T19:54:13.907

y==400 大约是手机屏幕的底部。我想，UIAlertView 从未期望添加子视图或设置它的框架，重置它的框架要居中。你能把最后一行注释掉，看看会发生什么吗？

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-30T19:54:42.017

只需将 show 语句移到您设置警报框架的位置下方

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-30T20:37:16.207

我在我的应用程序中使用[DDAlertPrompt](https://github.com/inamiy/DDAlertPrompt)。这很容易，而且是一个临时课程。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-07-08T09:55:36.533

我出于同样的目的使用以下

```
-(void)alertView {
UIAlertView * alert = [[UIAlertView alloc] initWithTitle:@""
                                                 message:@"Enter User & Password"
                                                delegate:self
                                       cancelButtonTitle:@"Cancel"
                                       otherButtonTitles:@"Login", nil];

alert.alertViewStyle = UIAlertViewStyleLoginAndPasswordInput;
UITextField * alertTextField1 = [alert textFieldAtIndex:0];
alertTextField1.keyboardType = UIKeyboardTypeDefault;
alertTextField1.placeholder = @"User";

UITextField * alertTextField2 = [alert textFieldAtIndex:1];
alertTextField2.keyboardType = UIKeyboardTypeDefault;
alertTextField2.placeholder = @"Password";

[alert show];

} 
```

如果您不在第二个文本字段中使用安全字符，请添加

```
alertTextField2.secureTextEntry=NO; 
```

# entity-framework-4 - 实体框架 4：有没有办法将实体标记为“仅插入”（不使用存储过程）

> ID：10389636
> 
> 赞同：1
> 
> 时间：2012-04-30T19:46:02.493
> 
> 标签：entity-framework-4

我们正在使用 v4 实体框架作为新版本应用程序的一部分，该应用程序包括一些重要的会计功能（支付处理、现金平衡、空头支票处理等）。在我们之前的所有应用程序中，我们制定了一项政策（其中我被告知在银行/会计级别的应用程序中非常常见）至少有一个表，其中包含所有资金的传入“审计跟踪”，只能用新数据写入。

换句话说，进入系统的新信息将触发新实体的创建，该实体将通过我们拥有的任何数据层对象的“插入”操作，并将新行写入基础表中。数据层是有意实现的，*没有*对这些实体进行更新或删除操作；任何更改都会作为新插入的调整行进行跟踪。

对于 EF，我们正在寻找一种方法来实现相同的目标，但在这种情况下，我们显然需要*阻止*EF 允许更新（而不是仅仅不编写函数）。是否有某种方法可以将 EF 模型中的实体指定为“仅插入”？

正如我在标题中提到的：我知道这可以通过将存储过程映射到插入操作而不是更新操作来完成。我们正在寻找其他选项（如果存在），原因有二：

1.  我们还没有任何存储过程，如果可以避免的话，我们希望避免在我们的部署/升级过程中添加另一个元素。
2.  此解决方案依赖于存储过程的“不存在”来指示该表是特殊的。我更喜欢一个依赖于明确断言的解决方案，即“仅插入”是故意的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T20:04:11.357

是的，您最好的选择是将 .AsNoTracking 添加到模型中每个 DbSet 的 getter 中。这将意味着 EF 不会跟踪您从数据库中获得的任何实体（因此不会对它们执行任何回写）。它还具有提高性能的额外好处。

通过强制所有读取为只读，您将消除 EF 中的更新路径。

看看[我在 AsNoTracking 上](http://blog.staticvoid.co.nz/2012/04/entity-framework-and-asnotracking.html)的帖子，以及[EF 网站上的这篇文章](http://blogs.msdn.com/b/adonet/archive/2011/02/05/using-dbcontext-in-ef-feature-ctp5-part-11-load-and-asnotracking.aspx)

# python - Python：将经过的时间（分钟：秒）解析为秒

> ID：10389642
> 
> 赞同：1
> 
> 时间：2012-04-30T19:46:25.597
> 
> 标签：python, parsing, datetime, time

假设我有一个类似于`'2:19.83 blah blah...blah blah'`格式的字符串，`minutes:seconds.centiseconds blah...`并且`blah`可以表示除换行符以外的任何字符序列。

我想解析并得到四舍五入的秒数。所以在上面的例子中，结果是`139`.

做这个的最好方式是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-30T19:54:21.020

我会首先从字符串中获取时间部分

```
>>> newstring=s.split('.',1)[0] 
```

然后我会使用 strptime 阅读它......

```
>>> tt=time.strptime(newstring,"%M:%S") 
```

最后，以秒为单位获取时间。

```
>>> tt.tm_min * 60 + tt.tm_sec 
```

不是 1-liner，但非常简单......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T19:51:50.350

```
sum(x*y for x,y in zip(map(int, re.findall(r'^(\d+):(\d+)', string)[0]), [60,1])) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-30T19:56:32.867

这个怎么样？我承认也许不是特别漂亮，但我认为功能性和易于理解。

给定

```
s = '2:19.83' 
```

和

```
tmp = s.split(':')
min = int(tmp[0])
sec = int(tmp[1].split('.')[0])

total_secs = min * 60 + sec   
print total_secs 
```

产量

```
139 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-30T19:55:46.173

这似乎可以满足您的需要：

```
>>> s = '2:19.83 blah blah...blah blah'
>>> import re
>>> m = re.match(r'(?P<min>\d):(?P<sec>\d{2})\.\d+', s)
>>> if m:
...     seconds = (int(m.group('min')) * 60) + int(m.group('sec'))
...     print seconds
139 
```

# c# - 如何在类中获取和设置超链接

> ID：10389643
> 
> 赞同：1
> 
> 时间：2012-04-30T19:46:25.987
> 
> 标签：c#, xml, api, gridview

我从 Jambase API 获得音乐会的 XML 列表，我还有一个名为 event.cs 的类。我运行一个循环，将 XML 中的数据放入 Event 对象中。然后我将一个gridview 绑定到一个Event 对象的ArrayList。“乐队”、“地点”、“日期”等有一个字符串。

问题是我希望有一列是超链接，都说“信息”，当你点击它时，它就是那个特定事件的 url。我不想显示实际的 URL。我试过这个，但没有运气。

```
 // this is from Event.cs
    public string Venue
     {
       get { return venue; }
       set { venue = value; }
     }

    public HyperLink Info
     {     

        get { return info; }
        set { info = value; }
      } 
```

//这是我将 XML 加载到 ArrayList 中的地方

```
 XmlDocument xmlEvent = new XmlDocument();
             xmlEvent.Load(string.Format("http://api.jambase.com/search?band=       {0}&apikey={1}&n=30", BandName, key));
             ArrayList al = new ArrayList();

             foreach (XmlNode node in xmlEvent.SelectNodes("JamBase_Data/event"))
             {
                Event event1 = new Event();
                 event1.Date = node.SelectSingleNode("event_date").InnerText;
                 event1.Location = node.SelectSingleNode("venue/venue_city").InnerText + ", " + node.SelectSingleNode("venue/venue_state").InnerText;
                 event1.Venue = node.SelectSingleNode("venue/venue_name").InnerText;
                 event1.Info.Text = "more info";
                 event1.Info.NavigateUrl = node.SelectSingleNode("event_url").InnerText;
                 al.Add(event1);

             }
             return al; 
```

# actionscript-3 - 事件冒泡 - 事件是否被克隆？

> ID：10389645
> 
> 赞同：4
> 
> 时间：2012-04-30T19:46:43.627
> 
> 标签：actionscript-3, flash

当一个事件在冒泡设置为 true 的嵌套子级上分派时，事件对象本身是否会为事件在显示堆栈中“冒泡”时遇到的每个显示对象克隆？例如，是否会为场景中的每个显示对象克隆 Event.ENTER_FRAME 事件对象？

在广泛的层面上，我试图确定 Event.clone() 何时发生以及它可能是性能问题，因为太多的事件对象会减慢垃圾收集速度。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T20:06:03.240

~~简单的回答，是的，事件总是被克隆。请参阅[文档以确认](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/events/Event.html#clone%28%29)。~~

我原来的答案是错误的。事件并不总是被克隆。正如@weltraumpirat 指出的那样，文档说这只发生在您手动重新调度事件时。不可能知道 Adob​​e 编写了多少类（如果有的话）这样做，但有可能有些类这样做。我的回答“总是被克隆”仍然是错误的。

但是，这并不意味着事件与您的表现无关。它们仅在您重新分派现有事件时才会被克隆，但如果没有，它们仍会作为新实例被分派，这正是 clone 方法正在做的事情。

最后，我们可以在 Tamarin 源代码中，特别是 globals.as 中看到该`dispatchEvent`方法的实现：

```
public function dispatchEvent(event:Event):Boolean  {
    if (event.target && event.target!=null) {
        return dispatchEventFunction (event.clone());
    } else {
        return dispatchEventFunction (event);
    }
} 
```

如您所见，克隆发生在此处基于是否填充了某些事件属性。我还没有找到填充目标属性的代码，但无论如何你都有它。仅在重新调度现有事件时才调用 clone 方法（至少从我们所见）。我站得更正了。:)

作为旁注，我认为这是 Flash 播放器的一个主要缺陷。Adobe 应该在 VM 中将此作为一种特殊情况，在内部，它只是一个指针，它只是在某个地方需要事件时每次都被传递而不是克隆，特别是考虑到 AVM2 的基本设计是一个事件驱动的系统.

# magento - magento 按位置排序过滤器选项

> ID：10389647
> 
> 赞同：0
> 
> 时间：2012-04-30T19:47:02.677
> 
> 标签：magento

我正在寻找一种方法来更改 Magento 中属性选项的默认顺序。当您从属性打印出过滤器选项时，它始终按字母顺序显示，而不是在管理员中定义的“位置”设置。

我希望能够按位置更改过滤器选项的默认排序，然后按名称。

我已经看到了一些关于堆栈溢出的类似问题——但这些选项在我们的 EE 1.11.2.0 版本中都不起作用。

帮助表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T11:25:53.850

如果你想通过编码改变它的排序选项然后去 app\code\core\Mage\Catalog\Model\Resource\Eav\Mysql4\Product/Collection.php 并在这里打开 addAttributeToSort 函数你可以定义你的排序选项

# file - J2ME 逐字节读取文件

> ID：10389648
> 
> 赞同：2
> 
> 时间：2012-04-30T19:47:02.643
> 
> 标签：file, java-me, jsr75

我遇到过很多站点示例，几乎都是这样的：
[http://www.java2s.com/Code/Java/J2ME/ReadDisplayFile.htm](http://www.java2s.com/Code/Java/J2ME/ReadDisplayFile.htm)
[http://www.roseindia.net/j2me/read-file.shtml](http://www.roseindia.net/j2me/read-file.shtml)
他们仅显示如何从资源文件中读取文件，而不是在文件系统上。
这是我当前的代码：

```
InputStream is;
String path = "file:///root1/photos/a.txt"
try {
     fc = (FileConnection)Connector.open(path,Connector.READ);
     is = fc.openInputStream();
     int a = is.available();
     char buf = 0;
     String buff = new String();
     while (buf!=-1){
           buf=(char)is.read();
           buff+=buf;                      
     }          
 } catch (IOException ex) {} 
```

但它不起作用，并且创建了无限循环。

`is.available();`( `int a`) 返回 0（为什么？）并且 `file:///root1/photos/a.txt`存在并包含：`Hi!Hello!`

我怎样才能让它工作？

**编辑：**我想通了，`(buf!=-1)`在 a 上检查 -1`unsigned char`所以它永远不会是负数。愚蠢的错误。我只是将其更改为 int 并且它有效。抱歉打扰了。如果不被删除，我希望有人会发现这很有用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T08:20:53.870

你最好试试这个

```
InputStream is;
String path = "file:///root1/photos/a.txt"
try {
     fc = (FileConnection)Connector.open(path,Connector.READ);
     is = fc.openInputStream();
     int a = is.available();
     char buf = 0;
     StringBuffer buff = new StringBuffer();
     int i=0;     
     String temp1=null;byte bt[]=null;   
     while ((i=is.read())!=-1){
           bt=new byte[1];
           bt[0]=(byte)i;
           temp1=new String(bt);
           buf.append(temp1);
           temp1=null;
           bt=null;

     }          
 } catch (IOException ex) {} 
```

buf 是具有字符串的字符串缓冲区。

# c# - 可以从 Javascript 文件访问 MVC ViewBag 对象吗？

> ID：10389649
> 
> 赞同：69
> 
> 时间：2012-04-30T19:47:04.957
> 
> 标签：c#, jquery, asp.net-mvc, asp.net-mvc-3, razor

是否可以从 MVC 应用程序中的 javascript 文件执行以下操作？

```
$(function(){
   alert(@ViewBag.someValue);
} 
```

目前它抛出错误：

> 引用未定义的 XML 名称 @ViewBag

* * *

## 回答 #1

> 赞同：103
> 
> 时间：2012-04-30T19:55:43.543

我不相信目前有任何方法可以做到这一点。Razor 引擎不解析 Javascript 文件，仅解析 Razor 视图。但是，您可以通过在 Razor 视图中设置变量来完成您想要的操作：

```
<script>
  var someStringValue = '@(ViewBag.someStringValue)';
  var someNumericValue = @(ViewBag.someNumericValue);
</script>
<!-- "someStringValue" and "someNumericValue" will be available in script -->
<script src="js/myscript.js"></script> 
```

正如乔在评论中指出的那样，如果上面的字符串值中有一个单引号，它就会中断。如果你想让这个完全铁定，你必须用转义的单引号替换所有的单引号。那里的问题是所有突然的斜线成为一个问题。例如，如果你的字符串是“ `foo \' bar`”，并且你替换了单引号，那么会出现“ `foo \\' bar`”，你又回到了同样的问题。（这是链式编码的古老难题。）处理这个问题的最佳方法是将反斜杠和引号视为特殊并确保它们**都**被转义：

```
 @{
      var safeStringValue = ViewBag.someStringValue
          .Replace("\\", "\\\\")
          .Replace("'", "\\'");
  }
  var someStringValue = '@(safeStringValue)'; 
```

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2012-04-30T19:53:25.467

不在 JavaScript 文件中，不。
您的 JavaScript 文件可以包含一个类，您可以在视图中实例化该类的新实例，然后您可以`ViewBag`在类构造函数中传递值。

或者，如果它不是一个类，您唯一的其他选择是`data`在 HTML 元素中使用属性，将它们分配给视图中的属性并在 JS 文件中检索它们。

假设你有这个输入：

```
<input type="text" id="myInput" data-myValue="@ViewBag.MyValue" /> 
```

然后在您的 JS 文件中，您可以使用以下方法获取它：

```
var myVal = $("#myInput").data("myValue"); 
```

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2014-12-30T09:43:49.023

**在 HTML 中：**

```
<input type="hidden" id="customInput" data-value = "@ViewBag.CustomValue" /> 
```

**在脚本中：**

```
var customVal = $("#customInput").data("value"); 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2012-04-30T19:59:41.107

为此，您的 JavaScript 文件需要在服务器端进行预处理。从本质上讲，它必须*成为*某种 ASP.NET 视图，并且`script`引用该文件的标记本质上将引用一个控制器操作，该控制器操作对该视图进行响应。

这听起来像是一罐你不想打开的蠕虫。

由于 JavaScript 是客户端，为什么不直接将值设置为一些客户端元素并让 JavaScript 与之交互。这可能是一个额外的间接步骤，但听起来比创建 JavaScript 视图要少得多。

像这样的东西：

```
<script type="text/javascript">
    var someValue = @ViewBag.someValue
</script> 
```

然后外部 JavaScript 文件可以引用该`someValue`文档范围内的 JavaScript 变量。

甚至：

```
<input type="hidden" id="someValue" value="@ViewBag.someValue" /> 
```

然后您可以访问该隐藏的输入。

除非您想出一些非常巧妙的方法来真正使您的 JavaScript 文件可用作视图。这当然是可行的，而且我不能*轻易*想到你会遇到的任何问题（除了非常丑陋的视图代码，因为视图引擎会对什么是 JavaScript 和什么是 Razor 感到*非常困惑......所以期待**大量*的`<text>`标记） ，因此，如果您找到一种巧妙的方法，那将非常酷，尽管对于以后需要支持代码的人来说可能不直观。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-08-07T06:02:35.973

在您的 .cshtml 文件中使用此代码。

```
 @{
    var jss = new System.Web.Script.Serialization.JavaScriptSerializer();
    var val = jss.Serialize(ViewBag.somevalue); 
    }

    <script>
        $(function () {
            var val = '@Html.Raw(val)';
            var obj = $.parseJSON(val);
            console.log(0bj);
    });
    </script> 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-09-01T02:45:56.650

创建一个视图并将其作为局部视图返回：

```
public class AssetsController : Controller
{
    protected void SetMIME(string mimeType)
    {
        this.Response.AddHeader("Content-Type", mimeType);
        this.Response.ContentType = mimeType;
    }

    // this will render a view as a Javascript file
    public ActionResult GlobalJS()
    {
        this.SetMIME("text/javascript");
        return PartialView();
    }
} 
```

然后在 GlobalJS 视图中添加类似的 javascript 代码（添加 // 将使 Visual Studio intellisense 将其读取为 java-script）

```
//<script>

    $(document).ready(function () {
       alert('@ViewBag.PropertyName');
    }); 

//</script> 
```

然后在您的最终视图中，您可以像这样添加对 javascript 的引用。

```
<script src="@Url.Action("GlobalJS", "Assets")"></script> 
```

然后在您的最终视图控制器中，您可以创建/传递您的 ViewBags，它将在您的 javascript 中呈现。

```
public class MyFinalViewController : Controller
{
    public ActionResult Index()
    {
        ViewBag.PropertyName = "My ViewBag value!";
        return View();
    }
} 
```

希望能帮助到你。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-11-21T10:52:53.393

我注意到，如果您尝试这样做，Visual Studio 的内置错误检测器会变得很愚蠢：

```
var intvar = @(ViewBag.someNumericValue); 
```

因为 @(ViewBag.someNumericValue) 有可能评估为空，这将导致生成以下错误的 JavaScript：

```
var intvar = ; 
```

如果您确定 someNemericValue 将设置为有效的数字数据类型，则可以通过执行以下操作来避免出现 Visual Studio 警告：

```
var intvar = Number(@(ViewBag.someNumericValue)); 
```

这可能会生成以下示例：

```
var intvar = Number(25.4); 
```

它适用于负数。如果该项目不在您的视图包中，则 Number() 评估为 0。

不再有 Visual Studio 警告！但请确保该值已设置并且是数字，否则您将打开可能的 JavaScript 注入攻击或运行时错误的大门。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-12-19T04:54:06.350

在控制器动作中添加：

```
 public ActionResult Index()
        {
            try
            {
                int a, b, c;
                a = 2; b = 2;
                c = a / b;
                ViewBag.ShowMessage = false;
            }
            catch (Exception e)
            {
                ViewBag.ShowMessage = true;
                ViewBag.data = e.Message.ToString();
            }
            return View();    // return View();

        }

in Index.cshtml
Place at the bottom:

<input type="hidden" value="@ViewBag.data" id="hdnFlag" />

@if (ViewBag.ShowMessage)
{
    <script type="text/javascript">

        var h1 = document.getElementById('hdnFlag');

        alert(h1.value);

    </script>
    <div class="message-box">Some Message here</div>
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-10-09T18:01:13.157

对于 CoreMVC 3.1，那将是，

```
@using Newtonsoft.Json
var listInJs =  @Html.Raw(JsonConvert.SerializeObject(ViewBag.SomeGenericList)); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-10-21T12:27:32.947

onclick="myFunction('@ViewBag.MyValue')"

# magento - magento 数据安装 - 正确使用

> ID：10389654
> 
> 赞同：1
> 
> 时间：2012-04-30T19:47:25.153
> 
> 标签：magento

在 Magento 中，我一直在使用数据安装/更新功能在创建新站点时执行以下操作：

1.  创建/编辑 cms 页面
2.  创建/编辑静态块
3.  设置存储配置值
4.  创建类别

我确信前两个是此功能的有效用途，因为我已经看到核心 Magento 代码完全相同。

任何人都可以确认后两个是否是数据安装脚本的有效用途，或者它们是否应该在自定义脚本的其他地方完成

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T20:29:44.713

关于配置值 - 它可以在`config.xml`您的模块文件中完成。
或者，如果`core_config_data`表中已经存在某个值，则绝对应该使用安装/升级脚本来覆盖该值。
关于类别 - 我认为使用 Magento 数据升级设置类别没有任何问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T23:24:37.177

我对安装和升级脚本的解释/理解是 install/upgrade 用于 DDL 修改（添加表、添加列等），而 install-data/upgrade-data 用于填充在表中的数据（任何带有 $model ->保存（））。

按照这种解释，列表中的 3\. 和 4\. 都将适用于数据脚本。

# javascript - JavaScript - 通过 URL 传递变量：#var=val vs ?var=val

> ID：10389659
> 
> 赞同：0
> 
> 时间：2012-04-30T19:47:56.983
> 
> 标签：javascript

我正在尝试通过仅在客户端 javascript 上使用的 URL 传递变量。将它们传递为：

> ?var1=val1&var2=val2

对比

> #var1=val1&var2=val2

?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T19:50:24.550

（`?`查询部分）被发送到服务器，`#`（散列部分）没有。

当使用哈希部分时，它不会重新加载页面。当使用查询部分时，它将重新加载页面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T19:51:51.150

第一个是搜索，第二个是哈希。

搜索被发送到服务器，但哈希不是。

hashchange 有一个事件，但搜索没有。

[https://developer.mozilla.org/en/DOM/window.location](https://developer.mozilla.org/en/DOM/window.location)[在此处输入链接描述](https://developer.mozilla.org/en/DOM/window.location)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T19:50:24.830

第一个`?var1=val1&var2=val2`是查询字符串，让浏览器发出请求。

第二个是一个片段，不做一个新的请求。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-30T19:50:26.227

“#”通常是在页面上点击的链接，用作页面锚点。

“？” 是通过客户端/服务器传递的参数。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-30T19:50:34.360

服务器永远不会看到哈希标签变量，因此无法在服务器上复制状态（因此，搜索机器人不会得到它）

解析标准会稍微容易一些，`?name=value`因为`location.search`它为您提供了 URL 的那部分

更改`?`将导致页面刷新而设置`#`不会

# delphi - 有什么优雅的方法可以消除可停靠控件的闪烁？

> ID：10389664
> 
> 赞同：1
> 
> 时间：2012-04-30T19:48:13.470
> 
> 标签：delphi, delphi-2010, docking

我想在应用程序中添加停靠功能，没有需要，现在我这样做了，但是每当单击并向“停靠站点”或从“停靠站点”拖动面板时，窗口矩形在桌面上被画得很丑（闪烁）帆布。

所以，我的问题是：

*   有什么简单而优雅的方法可以通过覆盖某些方法来克服这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T20:05:01.670

我做了**很多**对接的 UI，到目前为止我发现的唯一方法是使用第三方对接解决方案，例如在 JVCL 中找到的解决方案。

如果您将 a`TJvDockServer`放在主窗体（其他窗体将停靠的那个）上，然后将 a 拖放`TJvDockClient`到上述每个停靠的窗体上，并分配相同的样式（例如`TJvDockVCStyle`），它会完全改变停靠的行为，包括拖动窗口停靠时呈现的矩形。

也许您可以从这些组件中提取所需的代码来绘制您自己的自定义矩形，以在拖动到停靠时表示表单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T01:07:02.037

[官方 RAD Studio Demos SVN Repository](https://radstudiodemos.svn.sourceforge.net/svnroot/radstudiodemos/Delphi/VCL/Docking)上有一个出色的示例项目。这个演示做了*所有*你想要做的关于整齐对接而不闪烁的事情。它完美地再现了 Windows 可以停靠在 RAD Studio IDE 本身中的方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-06T10:38:44.743

emba 代码示例已移动：svn://svn.code.sf.net/p/radstudiodemos/code/branches/RadStudio_XE/Delphi/VCL/Docking

# php - 在多维数组中搜索一个值并在 PHP 中获取它的路径

> ID：10389672
> 
> 赞同：0
> 
> 时间：2012-04-30T19:48:55.127
> 
> 标签：php, multidimensional-array, iterator

这是我的数组：

```
$array = array (
'1' => array(
  'title' => 'Level1',
  'nodes' => array(
   '11' => array('title' => 'sub1_company1'),
   '12' => array('title' => 'sub2_company1'),
   '13' => array(
     'title' => 'sub3_company1',
     'nodes' => array(
       '131' => array('title' => 'item1_sub3_company1'),
       '132' => array('title' => 'item2_sub3_company1'),
      ),
    ),
  ),
),

'2' => array(
  'title' => 'Level2',
  'nodes' => array(
   '21' => array('title' => 'sub1_company2'),
   '22' => array('title' => 'sub2_company2'),
  ),
),

'3' => array(
  'title' => 'Level3',
  'nodes' => array(
   '31' => array('title' => 'sub1_company3'),
   '32' => array(
     'title' => 'sub2_company3',
     'nodes' => array(
       '321' => array('title' => 'item1_sub2_company3'),
       '322' => array(
          'title' => 'item2_sub2_company3',
          'nodes' => array(
            '3221' => array('title' => 'item1_sub3_company3'),
          ),
        ),
      ),
    ),
  ),
),
'4' => array('title' => 'Level4'),); 
```

我需要的是找到 sub2_company1 并获得像面包屑一样的标题。

级别 1 > sub2_company1

或者如果我搜索 item1_sub3_company1 我会得到

级别 1 > sub3_company1 > item1_sub3_company1

到目前为止我做了什么但没有工作：

```
 function breadcrumb($array, $needle) {
  $path = array();

  $array_iterator = new recursiveArrayIterator($array);
  $it = new recursiveIteratorIterator($array_iterator, RecursiveIteratorIterator::SELF_FIRST);

  foreach($it as $key => $value) 
  {
    echo "$key: $value <br>";
    if (!is_array($value)) {
      array_push($path, $value);
    }
    if ($value === $needle) {
      break;
    }
  }

  //$content = '<div id="breadcrumb">' . implode('&nbsp;&#62;&nbsp;', $path) . '</div>';

  return print_r($path, 1);
} 
```

谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T20:09:23.597

您需要一个递归函数，而不是迭代函数。

```
function breadcrumb($tree, $needle, &$result = array()) {

    $result = array();

    if (is_array($tree)) {
        foreach ($tree as $node) {
            if ($node['title'] == $needle) {
                $result[] = $node['title'];
                echo '1-';
                return true;
            } else if (!empty($node['nodes'])) {
                if (breadcrumb($node['nodes'], $needle, $result)){
                echo '2-';
                $result[] = $node['title'];
                return true;
                }
            }
        }
    } else {
        if ($tree == $needle) {
            echo '3-';
            $result[] = $tree;
            return true;
        }
    }
    return false;
}

breadcrumb($array, 'item1_sub3_company3', $result);

print_r($result); 
```

面包屑是倒置的，但是您可以使用 array_shift 而不是 push 并且您会以正确的方式使用它...

# geolocation - 是否有任何 web api 或网站可以根据经度和纬度查找某个位置及其最近的相似位置？

> ID：10389681
> 
> 赞同：0
> 
> 时间：2012-04-30T19:49:29.450
> 
> 标签：geolocation, latitude-longitude

我对一些运动场馆和演出有很多经度和纬度。我想找到一种方法在相同场地附近的位置获得一些类似场地，但我不知道。

我听说在 dbpedia 的帮助下我可以做到这一点，但老实说，我不知道如何根据找到一些最近的场所来查询 dbpedia。

是否有任何 web api/service 网站可以做这样的事情？

PS：我知道如何编写 SPARQL

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T01:36:20.863

您可以按照[http://tinyurl.com/6vx7gga](http://tinyurl.com/6vx7gga)中的示例进行操作，它显示了如何使用主要区域的区域过滤场地。

# sql - 可以在不同的 sqlite 查询上提前退出吗？

> ID：10389684
> 
> 赞同：1
> 
> 时间：2012-04-30T19:49:48.810
> 
> 标签：sql, sqlite, distinct

我需要查询特定 SQLite 表和列中不同项目的数量。但是，有数百万行，我只关心是否有超过 20 个不同的项目。有没有办法通过柜台提前退出不同/组？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T19:58:30.563

LIMIT 必须有效

```
SELECT DISTINCT column1,column2
FROM table
WHERE column3='some value'
LIMIT 20 
```

基于此，[http://www.sqlite.org/lang_select.html](http://www.sqlite.org/lang_select.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T19:58:45.163

```
SELECT DISTINCT field FROM huge_table LIMIT 20; 
```

查看 SQLite[`SELECT`](http://www.sqlite.org/lang_select.html)命令的参考。

# eclipse - 在 Subclipse 中：如何将现有工作区与现有存储库连接

> ID：10389687
> 
> 赞同：5
> 
> 时间：2012-04-30T19:49:59.933
> 
> 标签：eclipse, subclipse

我在 Eclipse 3.72 (Indigo) 中使用 Subclipse 1.6.18 与 SVN 1.6 存储库一起工作。这一切都在 Ubuntu 下运行。

我有一个项目，在我更新我的 Eclipse（我一直在使用 Galileo）及其所有部分之前忘记与 Subversion 断开连接 - 基本上是完全重新安装 Eclipse、Subclipse 等。现在当我去“团队”时，我得到的都是是“应用补丁”。

由于项目有未保存的更改，我想重新连接到 Subversion，以便我可以提交它们。 **[这个堆栈溢出问题](https://stackoverflow.com/questions/1438834/howto-re-attach-subclipse-when-using-a-new-eclipse-on-an-existing-workspace)**似乎有答案，但我不明白答案。（“获胜”的答案也有一个线程的链接，但链接不会转到一个线程）。

那么如何重新连接我的项目与颠覆？提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-01T02:03:08.310

以下方法应该适用于 git、svn 和任何其他团队提供者：

*   如果 eclipse 不知道您现有的项目，请使用 File > Import > ExistingProjectIntoWorkspace

    -- 项目现在应该出现在您的工作区中

*   如果未配置团队提供程序，请使用“项目”> 团队 > ShareProject > SVN/GIT

    -- “项目” > 团队菜单现在应该包含您期望的所有项目

* * *

“项目 > 共享项目”可能不可用。要添加它，请转到“窗口 > 自定义透视图 > 命令组可用性”并选择“团队”

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-30T20:57:36.177

其他 SO 答案是建议它从 Eclipse 中删除项目，但没有在确认对话框中选择“删除文件系统上的内容”选项。这将从 Eclipse 的知识中删除该项目，但将文件保留在您的文件系统中。然后，执行**File > Import > Existing Project into Workspace**以使项目回到 Eclipse 的控制之下。根据该答案，执行此删除并重新导入将为项目恢复 svn 功能-我无法保证该答案的有效性；我只是在解释它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-03T08:40:06.387

我遇到了同样的问题（安装在我的 Eclipse 中的 Subclipse 插件使用了比工作区中当前使用的工作副本格式更新的工作副本格式）。

使用与安装的 Subclipse 相同的工作副本格式的 svn 命令行客户端执行“svn 升级”解决了问题：在下次启动 Eclipse 后，工作区中的项目连接到 Subversion。

如果重启 Eclipse 后项目仍然没有连接，在“包资源管理器”中单击应受颠覆控制的项目子文件夹的上下文菜单中的“属性”菜单项，然后选择“属性”对话框。您应该会看到 Svn-URL、Repository root 和该文件夹的修订版本的值。关闭项目上下文菜单中的对话框后，选择“Team -> Refresh/Cleanup”，项目的所有其他子文件夹应显示正确的 svn 状态。

# vb.net - 通过 vb.net 中的 API 更改键盘语言

> ID：10389690
> 
> 赞同：4
> 
> 时间：2012-04-30T19:50:16.580
> 
> 标签：vb.net

我是 vb.net 的新手，我应该在程序运行时使用 API 函数将键盘语言更改为波斯语（波斯语）（这是一个带有文本框的普通表单）。有人知道我该怎么做吗？任何形式的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-01T01:37:21.190

它很容易。无需使用 api 它内置到 .net 框架中。

```
Dim TypeOfLanguage = New System.Globalization.CultureInfo("fa") ' or "fa-IR" for Farsi(Iran) 
InputLanguage.CurrentInputLanguage = InputLanguage.FromCulture(TypeOfLanguage) 
```

[有关本地化的更多信息..](http://msdn.microsoft.com/en-us/library/ff647353.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-29T15:53:40.133

Would be nice, but **InputLanguage** does not seem to work with WPF. InputLanguage is a Windows Forms type.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T11:04:06.390

```
Dim TypeOfLanguage = New System.Globalization.CultureInfo("fa") ' or "fa-IR" for Farsi(Iran) 
InputLanguage.CurrentInputLanguage = InputLanguage.FromCulture(TypeOfLanguage) 
```

无需使用任何 API 即可正常工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-11-20T04:58:30.383

我创建了一个 prog，它使用命令 My.Computer.Keyboard.SendKeys("en-US text", True) 将字符发送到另一个应用程序，但有时当前输入语言不是 en-US，那么所有字符发送都不正确。在学习了Ezi word之后，我通过修改以下内容解决了：感谢Ezi。

```
Private Sub ipl(lg As String)
    Dim TypeOfLanguage = New System.Globalization.CultureInfo(lg) ' or "fa-IR" for Farsi(Iran) 
    InputLanguage.CurrentInputLanguage = InputLanguage.FromCulture(TypeOfLanguage)
End Sub

Private Sub swlg() 'switch language TH-US
    If InputLanguage.CurrentInputLanguage.Culture.Name <> "en-US" Then
        Do
            ipl("en-US")
        Loop Until InputLanguage.CurrentInputLanguage.Culture.Name = "en-US"
    End If
End Sub 
```

# oracle - 如何验证 student_name 以便只能在其中输入字母字符？

> ID：10389696
> 
> 赞同：-3
> 
> 时间：2012-04-30T19:50:27.510
> 
> 标签：oracle, oracle10g

如何验证表中的`student_name`列`student`只能输入字母字符？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T20:09:21.897

如果“only alpha-characters”表示只有大写和小写字母AZ，你可以使用一个`CHECK`约束来检查是否有非字母字符

```
SQL> ed
Wrote file afiedt.buf

  1  create table student (
  2    student_name varchar2(100),
  3    constraint chk_student_name check( student_name = regexp_replace( student_name, '[^[:alpha:]]', null ))
  4* )
SQL> /

Table created. 
```

这允许您插入`student_name`纯字母的值

```
SQL> insert into student values( 'JustinCave' );

1 row created. 
```

但是如果你插入一些非字母的东西，比如空格，就会引发错误

```
SQL> insert into student values( 'Justin Cave' );
insert into student values( 'Justin Cave' )
*
ERROR at line 1:
ORA-02290: check constraint (SCOTT.CHK_STUDENT_NAME) violated 
```

如果要允许空格和字母字符一起使用，可以修改正则表达式

```
SQL> ed
Wrote file afiedt.buf

  1  create table student (
  2    student_name varchar2(100),
  3    constraint chk_student_name check( student_name = regexp_replace( student_name, '[^([:alpha:]|[:space:])]', null ))
  4* )
SQL> /

Table created.

SQL> insert into student values( 'Justin Cave' );

1 row created.

SQL> insert into student values( 'Justin Cave1' );
insert into student values( 'Justin Cave1' )
*
ERROR at line 1:
ORA-02290: check constraint (SCOTT.CHK_STUDENT_NAME) violated 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T19:54:05.340

您可以使用 Oracle 的[REGEXP](http://www.regular-expressions.info/oracle.html)函数来执行此操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T19:53:08.530

您可能正在寻找检查约束

create table 命令中的语法可能类似于以下内容：

```
... CHECK REGEXP_LIKE (students_name, '^([:alpha:]|[:space:])*$'), ... 
```

到目前为止我在网上找到的例子：

[http://www.w3schools.com/sql/sql_check.asp](http://www.w3schools.com/sql/sql_check.asp)

[http://psoug.org/reference/regexp.html](http://psoug.org/reference/regexp.html)

# c# - 如何创建递归函数来复制所有文件和文件夹

> ID：10389701
> 
> 赞同：7
> 
> 时间：2012-04-30T19:51:00.300
> 
> 标签：c#, .net, winforms, visual-studio-2010, recursion

我正在尝试创建一个函数，它将递归地将源文件夹以及其中的所有文件和文件夹复制到不同的位置。

目前，我必须在主文件夹中定义每个文件夹，这使得代码臃肿和冗余。

这样做更有效的方法是什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-30T20:01:56.397

看看我的问题：

[复制目录的性能](https://stackoverflow.com/questions/10014322/performance-of-copying-directories) 我使用了并行 foreach，它非常快

```
private static void CopyAll(string SourcePath, string DestinationPath)
{

string[] directories = System.IO.Directory.GetDirectories(SourcePath, "*.*", SearchOption.AllDirectories);

Parallel.ForEach(directories, dirPath =>
{
    Directory.CreateDirectory(dirPath.Replace(SourcePath, DestinationPath));
}); 

string[] files = System.IO.Directory.GetFiles(SourcePath, "*.*", SearchOption.AllDirectories);

Parallel.ForEach(files, newPath =>
{
    File.Copy(newPath, newPath.Replace(SourcePath, DestinationPath));
}); 
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-30T19:56:21.190

来源：[C# - 在 c-sharp 中递归地将文件和文件夹从源文件夹复制到目标文件夹](http://dotnetspidor.blogspot.ca/2011/07/c-copy-files-and-folders-recursively.html)

```
public static void CopyFolder(string sourceFolder, string destFolder)  
{  
    if (!Directory.Exists(destFolder))  
        Directory.CreateDirectory(destFolder); 

    string[] files = Directory.GetFiles(sourceFolder);  
    foreach (string file in files)  
    {  
        string name = Path.GetFileName(file);  
        string dest = Path.Combine(destFolder, name);  
        File.Copy(file, dest);  
    }  
    string[] folders = Directory.GetDirectories(sourceFolder);  
    foreach (string folder in folders)  
    {  
        string name = Path.GetFileName(folder);  
        string dest = Path.Combine(destFolder, name);  
        CopyFolder(folder, dest);  
    }  
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-12-26T08:39:22.407

这样做

```
 void Copy(string sourceDir, string targetDir)
 {
   Directory.CreateDirectory(targetDir);
   foreach (var file in Directory.GetFiles(sourceDir))
       File.Copy(file, Path.Combine(targetDir, Path.GetFileName(file)));

   foreach (var directory in Directory.GetDirectories(sourceDir))
       Copy(directory, Path.Combine(targetDir, Path.GetFileName(directory)));
 } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-18T12:43:44.203

在我看来，使用 GetDirectories/GetFiles 有点过时了，我会改用`Directory.EnumerateFileSystemEntries(source);`它，因为它更快。

# ember.js - Ember js：绑定到列表中的字符串

> ID：10389708
> 
> 赞同：0
> 
> 时间：2012-04-30T19:51:45.423
> 
> 标签：ember.js

[http://jsfiddle.net/C3quh/1/](http://jsfiddle.net/C3quh/1/)

我直接绑定到集合中的字符串。尽管数组中的值在文本框中显示为值。更改文本框中的值不会更改数组中的值。我怎么做这个工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T17:01:23.727

您不能绑定到数组中的位置。相反，您应该使用 Ember.Objects 填充您的数组。然后，您可以绑定到每个对象的属性。

# php - 带有时间间隔的php“for循环”

> ID：10389709
> 
> 赞同：1
> 
> 时间：2012-04-30T19:51:45.900
> 
> 标签：php, loops, for-loop

我想找到一种每5分钟执行一次增量的方法，请帮忙

```
example
for ($i=1;$i<=11;$i++) {
echo $i;
} 
```

打印

1.  5分钟后
2.  5分钟后
3.  5分钟后
4.  5分钟后
5.  5分钟后......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T19:52:31.533

[`sleep`](http://us3.php.net/manual/en/function.sleep.php)

或者，你想要一个 cron 工作吗？

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-30T20:24:22.630

```
for ($i=1;$i<=11;$i++) {
sleep(300);
echo $i;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-30T20:20:25.893

如果你想每 5 分钟运行一次脚本，你应该使用 cronjob。如果您使用的是 cPanel 或 DirectAdmin 等控制面板，则可以添加 cronjob。如果您（仅）对机器具有 SSH 访问权限，则使用该`crontab -e`命令并添加以下行：

```
*/5 * * * * /usr/bin/php /location/of/the/script.php 
```

如果您`/usr/bin/php`不是您的 PHP 路径，则创建一个脚本并使用它`<?php phpinfo();`来找出实际位置。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-30T20:27:08.973

在 php 中使用 Cron Jobs 或 Sleep 函数

如果您的服务器上禁用了 cron 作业，则使用免费的在线 cron 作业服务

[http://www.onlinecronjobs.com/](http://www.onlinecronjobs.com/)

# javascript - 如何从javascript中的字符串调用私有函数？

> ID：10389712
> 
> 赞同：4
> 
> 时间：2012-04-30T19:51:51.237
> 
> 标签：javascript, oop

我正在构建一个小的“验证”对象，它基本上公开了一个验证方法，并获取一个元素的 id 和一组验证器，然后返回 true 或 false。

基本上这就是我想要实现的

```
var Validator = function() {
  var no_digits = function( el ) {
      return true;
  }
  var no_uppercase_letters = function( el ) {
      return true;
  }
  return {
     validate: function( element_id, validators ) {

        //here i would like to iterate on the validators array and for each 
        //element of the array i would like to check if a function of the same name 
        // exist and call that function passing the element      

     }
  }
}(); 
```

然后这样称呼它

```
var element_valid = Validator.validate( 'myid', [ "no_digits", "no_uppercase_letters"] ); 
```

其中第二个参数是我想调用的验证器数组。

关于一个好的面向对象方法的任何建议？我想保持验证函数私有，否则我可以这样做

```
var Validator = function() {

    return {
        validate: function(element_id, validators) {
            console.log(this);
            this[validators]();

            // Validator[validators](element_id);     
        },
        no_digits: function(el) {
            alert('hi');
            return true;
        },
        no_uppercase_letters:  function(el) {
            return true;
        }
    }
}(); 
```

但我宁愿将 no_gits 和 no_uppercase_letters 函数保持为私有

var element_valid = Validator.validate('myid', "no_digits");

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T20:36:44.993

```
var valdiate = (function() {  

     var _p={};//toss all private members into a single object.
     _p.list=[];
     _p.init=function(){
       _p.list=[];
     };

    var noDigits = function() {

    };

    //public members. use "this" to reference object followed by the method.
    //however valdiate._p.list won't be accessible to the global scope    
    return {    
        check: function() {
              noDigits();
        },
        fnNaMe1:function(){
              _p.init();
        },
        fnName2:function(){
           return _p.list.slice(0);//return a clone  
        }
    };
})(); 
```

**它被称为“模块模式”。**这种模式在 JavaScript 中通常被称为简单的“**封装”。**闭包是另一种可能，但更具体地说，在这种情况下它纯粹是封装。

封装只是意味着您将某些成员设为私有。在这种情况下什么是私有的？那么`noDigits`在这种情况下，变量是私有的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T20:24:25.423

这种方法行得通吗？
jsFiddle在这里：http: [//jsfiddle.net/FranWahl/KZKwA/](http://jsfiddle.net/FranWahl/KZKwA/)玩。
请注意，我没有实现任何实际验证，但基本框架确实执行了。

```
var Validator = function() {
    return {
        validate: function(element_id, validators) {
            for (var i = 0; i < validators.length; i++) {
                var result = validators[i](element_id);
                alert(result);
                // record results... or do something else with it or break; etc...
            }
        }
    }
}();

var no_digits = function(theValue) {
    // validate no digits are in the given value....
    if(theValue === '1')
    {
        return true;
    }
    else
    {
        return false;
    }
};

var no_uppercase_letters = function(theValue) {
    // validate no uppercase letters are in this value...
    if(theValue === '4')
    {
        return true;
    }
    else
    {
        return false;
    }
};

// I used variables to store the methods but feel free to declare the methods inline instead...
var element_valid = Validator.validate('4', [no_digits , no_uppercase_letters]);​ 
```

# php - 如果值在 foreach 循环中不相等，则尝试做某事，但没有得到预期的结果

> ID：10389713
> 
> 赞同：2
> 
> 时间：2012-04-30T19:51:53.080
> 
> 标签：php, loops, recursion, foreach

我有一个看起来像这样的数据库：

![在此处输入图像描述](../Images/72bca0edd07e6355850a461769d85159.png)

我可以使用以下代码从此菜单生成树：

```
foreach($categories->result_array() as $category):
    $menu_array[$category['id']] = array('name' => $category['name'], 'parent' => $category['parent'], 'id' => $category['id']);
endforeach;

echo '<ul>';
echo $this->tasks->generateCategoriesTree(NULL, $menu_array);
echo '</ul>'; 
```

这是上面代码调用的函数：

```
function generateCategoriesTree($parent, $menu_array, $result = NULL)
{
    foreach($menu_array as $key => $value):
        if ($value['parent'] == $parent):
            $result .= '<li>';
            $result .= '<a href="#">' . $value['name'] . '</a>';
            $result .= '<ul>';
            $result .= $this->generateCategoriesTree($key, $menu_array);
            $result .= '</li></ul>';
          endif;
    endforeach;

    return $result;
} 
```

它会生成一棵如下所示的树：

![在此处输入图像描述](../Images/dc7bac102754a5dab1e903e23c14548e.png)

我现在的问题是让父类别变粗。在我的数据库中，作为父母的行的父列为`NULL`. 我尝试了几件事，例如`if ($value['parent'] !== $parent)`然后应用粗体样式，但这不起作用。老实说，我无法解决这个问题。我将不胜感激你们可以提供的任何帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T20:05:22.573

如果父级等于 NULL，我会将其设为粗体。我不确定语法的使用，因为我通常对 if 结构使用括号。

```
function generateCategoriesTree($parent, $menu_array, $result = NULL)
{
    foreach($menu_array as $key => $value):
        if ($value['parent'] == $parent):
            $result .= '<li>';
            if($value['parent'] == NULL):
                $result .= '<a class="BOLDCLASS" href="#">' . $value['name'] . '</a>';
            else:
                $result .= '<a href="#">' . $value['name'] . '</a>';
            endif;  
            $result .= '<ul>';
            $result .= $this->generateCategoriesTree($key, $menu_array);
            $result .= '</li></ul>';
          endif;
    endforeach;

    return $result;
} 
```

当然，您必须使用一些样式来使**BOLDCLASS**类变为粗体。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T20:05:35.270

交换`generateCategoriesTree`函数声明中的参数，以便`$menu_array`在`$parent`. 所以：

```
function generateCategoriesTree($menu_array, $parent = 0, $result = null) { ... } 
```

请记住也要更改`generateCategoriesTree`函数调用中的参数顺序...

在您的调用函数中：

```
echo $this->tasks->generateCategoriesTree($menu_array); 
```

就`generateCategoriesTree`其本身而言：

```
$result .= $this->generateCategoriesTree($menu_array, $key); 
```

然后简单地测试是否`$parent == 0`并应用粗体样式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T19:55:27.850

对于顶级，你试过这个吗？

```
if ($value['parent'] !== '') 
```

然后，一旦解决了该级别，您就可以使用 OR 运算符。

# sencha-touch-2 - 在对象创建时添加搜索字段键侦听器？

> ID：10389715
> 
> 赞同：0
> 
> 时间：2012-04-30T19:51:55.293
> 
> 标签：sencha-touch-2

在另一个问题中，有人解释了如何为嵌套列表创建通用搜索框。

[如何将搜索栏添加到嵌套列表？](https://stackoverflow.com/questions/10235735/how-to-add-a-search-bar-to-a-nested-list)

如何在创建时向此类添加/设置*keyup侦听器？*我可以在类上添加监听器，但我想在多个屏幕上重用这个类。

```
Ext.define('Sencha.view.SearchBar', {
    扩展：'Ext.Toolbar'，
    xtype : '搜索栏',
    要求：['Ext.field.Text', 'Ext.field.Search'],

    配置：{
        ui: '搜索栏',
        布局：'vbox'，
        cls: '大',

        项目： [
            {
                xtype: '搜索域',
                placeHolder: '搜索...',
                听众：{
                    范围：这个，
                    键：函数（字段）{
                        console.log(field.getValue());
                    }
                }
            }
        ]
    }
});

```

此时我可以将侦听器直接添加到搜索字段吗？

```
var searchBar = nestedList.add({
    停靠：'顶部'，
    xtype: '搜索栏',
    身高：100
});

```

我也尝试添加这样的侦听器，但我认为我需要能够直接访问该字段

```
searchBar.on('keyup', function(field) {
                  console.log("foo...");
                  console.log(field.getValue());
                }， 这）;

```

=====================================

[更新] 将委托添加到类：

```
Ext.define('Sencha.view.SearchBar', {
    扩展：'Ext.Toolbar'，
    xtype : '搜索栏',
    要求：['Ext.field.Text', 'Ext.field.Search'],
    配置：{
        ui: '搜索栏',
        布局：'vbox'，
        cls: '大',

        项目： [
            {
                xtype: '搜索域',
                placeHolder: '搜索...'
            }
        ]
    },
    初始化：函数（）{
        这个.on({
            范围：这个，
            代表：'搜索域'，
            keyup: 'onSearchFieldKeyUp'
        });
    },
    onSearchFieldKeyUp：函数（字段）{
        console.log("基类");
        console.log(field.getValue());
    }
});

```

**接下来用我们自己的方法实例化' *searchbar '来覆盖默认的onSearchFieldKeyUp***

```
var searchBar = this.nestedList.add({
            停靠：'顶部'，
            xtype: '搜索栏',
            身高：75，
            id: '搜索栏 ID'

        });

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T23:04:38.857

`initialize`在类的函数内添加监听器：

```
initialize: function() {
    this.on({
        scope: this,
        delegate: 'searchbar',
        keyup: 'onSearchFieldKeyUp'
    });
},

onSearchFieldKeyUp: function(field) {
    console.log(field.getValue());
} 
```

请注意，我正在使用该`delegate`属性将侦听器添加到搜索字段组件（通过`xtype`）；

# jquery - Jquery 代码在页面加载时运行多次

> ID：10389720
> 
> 赞同：1
> 
> 时间：2012-04-30T19:52:10.630
> 
> 标签：jquery, google-maps-api-3, click

我有以下代码，当一个人单击链接时，此代码运行。但是我还需要在该人访问页面以加载默认地址时首先加载它。所以在这段代码之后我有 $('.viewmap').click();

问题是当我这样做时，会为每个带有类视图的链接运行单击操作。是否可以使用默认值为 0 的 mapid 运行此代码一次，以便我可以重用此函数来默认加载地图，然后如果有人单击带有 viewmap 类的链接之一？还是我必须创建单独的功能？一个用于默认加载，一个用于单击操作？

```
$('.viewmap').click(function() {

    var id = $('#id').text();
    var mapid = $(this).attr('title');

    $.ajax({
        cache:false,
        url:'path/to/script'
        dataType:'json',
        success: function(data) {

            $('#currmap').gMap(
                    {
                        latitude   : data.lat,
                        longitude  : data.lon,
                        address    : data.address,
                        maptype    : 'ROADMAP',
                        zoom       : 8,
                        markers:[{
                                     latitude    : data.lat,
                                     longitude   : data.lon,
                                     address     : data.address,
                                     html        : data.display
                                 }]

                    }

            );

        }

    });

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T19:54:30.637

尝试这个：

```
$('.viewmap:first').click(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T19:54:58.490

尝试将处理代码放在它自己的函数中。然后，您可以在页面加载时直接调用它，也可以在元素上发生单击事件时调用它。尝试这个：

```
function updateMap() {
    var id = $('#id').text();
    var mapid = $(".viewmap").attr('title');

    $.ajax({
        cache:false,
        url:'path/to/script'
        dataType:'json',
        success: function(data) {    
            $('#currmap').gMap({
                latitude   : data.lat,
                longitude  : data.lon,
                address    : data.address,
                maptype    : 'ROADMAP',
                zoom       : 8,
                markers:[{
                    latitude    : data.lat,
                    longitude   : data.lon,
                    address     : data.address,
                    html        : data.display
                }]
            });
        }
    });
}

updateMap();
$('.viewmap').click(updateMap); 
```

这样就避免了必须手动触发导致问题的元素上的单击事件。

# authentication - 是否可以像在 SocialCam 应用程序中一样更改 Facebook 按钮的文本，例如“好的，观看视频”？

> ID：10389722
> 
> 赞同：6
> 
> 时间：2012-04-30T19:52:18.897
> 
> 标签：authentication, facebook-graph-api

我在社交摄像头应用程序上看到了“好的，观看视频”，但仍然没有找到更改它的位置。我在哪里可以更改它？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-30T20:00:46.333

我想这是一个运行 OpenGraph 动作的按钮，而不是普通的 Like 按钮

# c# - Socket单客户端/服务器连接，服务器可以发送多次，客户端只能发送一次

> ID：10389727
> 
> 赞同：0
> 
> 时间：2012-04-30T19:52:53.350
> 
> 标签：c#, sockets, connection, client-server

我编写了一个客户端和服务器应用程序，我需要用它来连接我用 C# 制作的跳棋游戏。我已经让客户端和服务器连接，服务器可以重复发送客户端消息以更新标签，但是当客户端尝试发送消息时它会抛出错误

“发送或接收数据的请求被禁止，因为套接字未连接，并且（当使用 sendto 调用在数据报套接字上发送时）没有提供地址。”

到目前为止，这是我的客户端和服务器。

客户 -

```
public partial class Form1 : Form //main form that establishes connection
{
    Form2 form2 = new Form2();
    Socket sck = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp);
    Socket acc = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp);
    IPEndPoint endPoint;
    static byte[] Buffer { get; set; }
    string text;
    public Form1()
    {
        InitializeComponent(); 
    }

    private void button1_Click_1(object sender, EventArgs e)
    {
        Thread rec = new Thread(recMsg); 
        Thread t = new Thread(ThreadProc);
        t.Start(); //starts a form that will call the sendMsg on a button click
        endPoint = new IPEndPoint(IPAddress.Parse("127.0.0.1"), 8887);

        try
        {   
            sck.Connect(endPoint);
        }
        catch
        {
            Console.WriteLine("unable to connect");
        }
        rec.Start();
        text = textBox1.Text;
        sendMsg(text);
    }
    public void sendMsg(string s)
    {
        //bool x = true;
        //while (true)
        //{
            //Thread.Sleep(500);
            //if (x == true)
            //{
                byte[] msgBuffer = Encoding.ASCII.GetBytes(s);
                sck.Send(msgBuffer); //error comes here when i try to send a message from form2 says it isn't connected and has no address
               // x = false;
            //}
        //} the commented out part doesn't effect how the send works it sends once and can't again, I think the problem is that the thread which establishes the connection dies but don't know how to solve.
    }

    public void recMsg()
    {
        while (true)
        {
            Thread.Sleep(500);
            byte[] Buffer = new byte[255];
            int rec = sck.Receive(Buffer, 0, Buffer.Length, 0);
            Array.Resize(ref Buffer, rec);
            form2.SetText(Encoding.Default.GetString(Buffer));
        }
    }

    private void button2_Click(object sender, EventArgs e)
    {
        sck.Close();
    }
    public void ThreadProc()
    {
        form2.ShowDialog();
    }
} 
```

具有 label1、textbox1 和 button1 的表单 2，主要操作表单将接受输入并调用 Form1 sendMsg()

```
public partial class Form2 : Form
{
    delegate void SetTextCallback(string text);
    Form1 form1;

    public Form2()
    {
        InitializeComponent();
    }

    public void SetText(string text)
    {
        if (InvokeRequired)
        {
            SetTextCallback d = new SetTextCallback(SetText);
            Invoke(d, new object[] { text });
        }
        else
        {
            label1.Text = text;
        }
    }

    private void button1_Click(object sender, EventArgs e)
    {
        form1 = new Form1();
        form1.sendMsg(textBox1.Text);
    }
} 
```

服务器-

```
class Program
{
    static Form1 form1 = new Form1();
    static Form2 form2 = new Form2();
    static byte[] buffer { get; set; }
    static Socket sck, acc;
    static string name;

    static void Main(string[] args)
    {
        if (name == null)
        {
            Thread t = new Thread(ThreadProc);
            t.Start();
        }
        Thread rec = new Thread(recMsg); 
        sck = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp);
        sck.Bind(new IPEndPoint(0, 8887));
        Console.WriteLine("Your local IP address is: " + getIP());
        Console.WriteLine("Awaiting Connection");
        sck.Listen(0);

        acc = sck.Accept();
        Console.WriteLine(" >> Accept connection from client");
        rec.Start();
        sendMsg();
    }

    static string getIP()
    {
        string hostName = System.Net.Dns.GetHostName();
        IPHostEntry ipEntry = System.Net.Dns.GetHostEntry(hostName);
        IPAddress[] addr = ipEntry.AddressList;
        return addr[addr.Length - 1].ToString();
    }

    static void recMsg()
    {
        while (acc.Connected)
        {
            Thread.Sleep(500);
            byte[] Buffer = new byte[255];
            int rec = acc.Receive(Buffer, 0, Buffer.Length, 0);
            Array.Resize(ref Buffer, rec);
            form2.SetText(Encoding.Default.GetString(Buffer));
        }
    }

    public void btnClick(string s)
    {
        name = s;
        Console.WriteLine("Name: " + name);
        System.Threading.Thread r = new System.Threading.Thread(new System.Threading.ThreadStart(ThreadProc2));
        r.Start();
    }
    public void sendMSG(string s)
    {
            try
            {
                buffer = Encoding.Default.GetBytes(s);
                acc.Send(buffer);
            }
            catch (Exception ex)
            {
                Console.WriteLine(ex.ToString());
            }
    }

    static void sendMsg()
        {
            try
            {
                buffer = Encoding.Default.GetBytes(name);
                acc.Send(buffer);
            }
            catch (Exception ex)
            {
                Console.WriteLine(ex.ToString());
            }
    }

    public static void ThreadProc()
    {
        form1.ShowDialog();
    }

    public static void ThreadProc2()
    {
        form2.ShowDialog();
    }
} 
```

Form1 - 要求输入名称的初始表单，此表单可用于构建我的基本服务器，最终将用于跳棋游戏。

```
public partial class Form1 : Form
{
    Program program;

    public Form1()
    {
        InitializeComponent();
    }

    private void button1_Click(object sender, EventArgs e)
    {
        this.Hide();
        program = new Program();
        program.btnClick(textBox1.Text);
    }
} 
```

Form2 用作类似于我的客户端的 Form2 的接口，它基本上有一个标签、文本框和调用 sendMsg() 的按钮

```
public partial class Form2 : Form
{
    delegate void SetTextCallback(string text);
    Program program = new Program();

    public Form2()
    {
        InitializeComponent();
    }

    public void SetText(string text)
    {
        if (InvokeRequired)
        {
            SetTextCallback d = new SetTextCallback(SetText);
            this.Invoke(d, new object[] { text });
        }
        else
        {
            this.label2.Text = text;
        }
    }

    private void button1_Click(object sender, EventArgs e)
    {
        program.sendMSG(textBox1.Text);
    }
} 
```

回顾一下，这个程序将连接，服务器可以多次向客户端发送数据并更新标签。客户端将第一次向服务器发送数据，然后抛出错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T20:21:26.003

为什么不使用异步套接字？这是一些代码：

```
// Server socket
class ControllerSocket : Socket, IDisposable
{
    // MessageQueue queues messages to be processed by the controller
    public Queue<MessageBase> messageQueue = null;

    // This is a list of all attached clients
    public List<Socket> clients = new List<Socket>();

    #region Events
    // Event definitions handled in the controller
    public delegate void SocketConnectedHandler(Socket socket);
    public event SocketConnectedHandler SocketConnected;

    public delegate void DataRecievedHandler(Socket socket, int bytesRead);
    public event DataRecievedHandler DataRecieved;

    public delegate void DataSentHandler(Socket socket, int length);
    public event DataSentHandler DataSent;

    public delegate void SocketDisconnectedHandler();
    public event SocketDisconnectedHandler SocketDisconnected;
    #endregion

    #region Constructor
    public ControllerSocket(int port)
        : base(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp)
    {
        // Create the message queue
        this.messageQueue = new Queue<MessageBase>();

        // Acquire the host address and port, then bind the server socket
        IPHostEntry ipHostInfo = Dns.GetHostEntry(Dns.GetHostName());
        IPAddress ipAddress = ipHostInfo.AddressList[0];
        IPEndPoint localEndPoint = new IPEndPoint(ipAddress, port);
        this.Bind(localEndPoint);
    }
    #endregion

    // Starts accepting client connections
    public void StartListening()
    {
        this.Listen(100);
        this.BeginAccept(AcceptCallback, this);
    }

    // Connects to a client
    private void AcceptCallback(IAsyncResult ar)
    {
        Socket listener = (Socket)ar.AsyncState;
        Socket socket = listener.EndAccept(ar);

        try
        {
            // Add the connected client to the list
            clients.Add(socket);

            // Notify any event handlers
            if (SocketConnected != null)
                SocketConnected(socket);

            // Create an initial state object to hold buffer and socket details
            StateObject state = new StateObject();
            state.workSocket = socket;
            state.BufferSize = 8192;

            // Begin asynchronous read
            socket.BeginReceive(state.Buffer, 0, state.BufferSize, 0,
                ReadCallback, state);
        }
        catch (SocketException)
        {
            HandleClientDisconnect(socket);
        }
        finally
        {
            // Listen for more client connections
            StartListening();
        }
    }

    // Read data from the client
    private void ReadCallback(IAsyncResult ar)
    {
        StateObject state = (StateObject)ar.AsyncState;
        Socket socket = state.workSocket;

        try
        {
            if (socket.Connected)
            {
                // Read the socket
                int bytesRead = socket.EndReceive(ar);

                // Deserialize objects
                foreach (MessageBase msg in MessageBase.Receive(socket, bytesRead, state))
                {
                    // Add objects to the message queue
                    lock (this.messageQueue)
                        messageQueue.Enqueue(msg);
                }

                // Notify any event handlers
                if (DataRecieved != null)
                    DataRecieved(socket, bytesRead);

                // Asynchronously read more client data
                socket.BeginReceive(state.Buffer, state.readOffset, state.BufferSize - state.readOffset, 0,
                    ReadCallback, state);
            }
            else
            {
                HandleClientDisconnect(socket);
            }
        }
        catch (SocketException)
        {
            HandleClientDisconnect(socket);
        }
    }

    // Send data to a specific client
    public void Send(Socket socket, MessageBase msg)
    {
        try
        {
            // Serialize the message
            byte[] bytes = msg.Serialize();

            if (socket.Connected)
            {
                // Send the message
                socket.BeginSend(bytes, 0, bytes.Length, 0, SendCallback, socket);
            }
            else
            {
                HandleClientDisconnect(socket);
            }
        }
        catch (SocketException)
        {
            HandleClientDisconnect(socket);
        }
    }

    // Broadcast data to all clients
    public void Broadcast(MessageBase msg)
    {
        try
        {
            // Serialize the message
            byte[] bytes = msg.Serialize();

            // Process all clients
            foreach (Socket client in clients)
            {
                try
                {
                    // Send the message
                    if (client.Connected)
                    {
                        client.BeginSend(bytes, 0, bytes.Length, 0, SendCallback, client);
                    }
                    else
                    {
                        HandleClientDisconnect(client);
                    }
                }
                catch (SocketException)
                {
                    HandleClientDisconnect(client);
                }
            }
        }
        catch (Exception e)
        {
            // Serialization error
            Console.WriteLine(e.ToString());
        }
    }

    // Data sent to a client socket
    private void SendCallback(IAsyncResult ar)
    {
        try
        {
            Socket socket = (Socket)ar.AsyncState;

            if (socket.Connected)
            {
                // Complete sending the data
                int bytesSent = socket.EndSend(ar);

                // Notify any attached handlers
                if (DataSent != null)
                    DataSent(socket, bytesSent);
            }
            else
            {
                HandleClientDisconnect(socket);
            }
        }
        catch (Exception e)
        {
            Console.WriteLine(e.ToString());
        }
    }

    private void HandleClientDisconnect(Socket client)
    {
        // Client socket may have shutdown unexpectedly
        if (client.Connected)
            client.Shutdown(SocketShutdown.Both);

        // Close the socket and remove it from the list
        client.Close();
        clients.Remove(client);

        // Notify any event handlers
        if (SocketDisconnected != null)
            SocketDisconnected();
    }

    // Close all client connections
    public void Dispose()
    {
        foreach (Socket client in clients)
        {
            if (client.Connected)
                client.Shutdown(SocketShutdown.Receive);

            client.Close();
        }
    }
}

// Client socket

        class ReceiverSocket : Socket
        {
            // MessageQueue queues messages to be processed by the controller
            public Queue<MessageBase> messageQueue = null;

            #region Events
            // Event definitions handled in the controller
            public delegate void SocketConnectedHandler(Socket socket);
            public event SocketConnectedHandler SocketConnected;

            public delegate void DataRecievedHandler(Socket socket, MessageBase msg);
            public event DataRecievedHandler DataRecieved;

            public delegate void DataSentHandler(Socket socket, int length);
            public event DataSentHandler DataSent;

            public delegate void SocketDisconnectedHandler();
            public event SocketDisconnectedHandler SocketDisconnected;

            private IPEndPoint remoteEP = null;
            #endregion

            #region Constructor
            public ReceiverSocket(int port)
                : base(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp)
            {
                // Create the message queue
                messageQueue = new Queue<MessageBase>();

                // Acquire the host address and port
                IPHostEntry ipHostInfo = Dns.GetHostEntry(Dns.GetHostName());
                IPAddress ipAddress = ipHostInfo.AddressList[0];
                remoteEP = new IPEndPoint(ipAddress, port);
            }
            #endregion

            // Connect to the server
            public void Connect()
            {
                this.BeginConnect(remoteEP, ConnectCallback, this);
            }

            // Server connected
            private void ConnectCallback(IAsyncResult ar)
            {
    //            Console.WriteLine("Connect Callback");

                try
                {
                    Socket client = (Socket)ar.AsyncState;
                    if (client.Connected)
                    {
                        client.EndConnect(ar);
    //                    Console.WriteLine("Connect Callback - Connected");

                        // Create an initial state object to hold buffer and socket details
                        StateObject state = new StateObject();
                        state.workSocket = client;
                        state.BufferSize = 8192;

                        // Notify any event handlers
                        if (SocketConnected != null)
                            SocketConnected(client);

                        // Begin asynchronous read
                        client.BeginReceive(state.Buffer, state.readOffset, state.BufferSize - state.readOffset, 0,
                            ReceiveCallback, state);
                    }
                    else
                    {
    //                    Console.WriteLine("Connect Callback - Reconnect");
                        Thread.Sleep(5000);
                        Connect();
                    }
                }
                catch (Exception ex)
                {
                    // Attempt server reconnect
                    Reconnect();
                }
            }

            // Read data from the server
            private void ReceiveCallback(IAsyncResult ar)
            {
                try
                {
                    StateObject state = (StateObject)ar.AsyncState;
                    Socket client = state.workSocket;

                    // Read the socket
                    if (client.Connected)
                    {
                        int bytesRead = client.EndReceive(ar);

                        // Deserialize objects
                        foreach (MessageBase msg in MessageBase.Receive(client, bytesRead, state))
                        {
                            // Add objects to the message queue
                            lock (this.messageQueue)
                                this.messageQueue.Enqueue(msg);
                        }

                        // Notify any event handlers
                        if (DataRecieved != null)
                            DataRecieved(client, null);

                        // Asynchronously read more server data
                        client.BeginReceive(state.Buffer, state.readOffset, state.BufferSize - state.readOffset, 0,
                            ReceiveCallback, state);
                    }
                    else
                    {
                        Reconnect();
                    }
                }
                catch (SocketException)
                {
                    // Attempt server reconnect
                    Reconnect();
                }
            }

            public void Send(MessageBase msg)
            {
                try
                {
                    // Serialize the message
                    byte[] bytes = msg.Serialize();

                    if (this.Connected)
                    {
                        // Send the message
                        this.BeginSend(bytes, 0, bytes.Length, 0, SendCallback, this);
                    }
                    else
                    {
                        Reconnect();
                    }
                }
                catch (SocketException sox)
                {
                    // Attempt server reconnect
                    Reconnect();
                }
                catch (Exception ex)
                {
                    int i = 0;
                }
            }

            private void SendCallback(IAsyncResult ar)
            {
                try
                {
                    Socket client = (Socket)ar.AsyncState;

                    if (client.Connected)
                    {
                        // Complete sending the data
                        int bytesSent = client.EndSend(ar);

                        // Notify any event handlers
                        if (DataSent != null)
                            DataSent(client, bytesSent);
                    }
                    else
                    {
                        Reconnect();
                    }
                }
                catch (SocketException)
                {
                    Reconnect();
                }
            }

            // Attempt to reconnect to the server
            private void Reconnect()
            {
                try
                {
                    // Disconnect the original socket
                    if (this.Connected)
                        this.Disconnect(true);

                    this.Close();

                    // Notify any event handlers
                    if (SocketDisconnected != null)
                        SocketDisconnected();
                }
                catch (Exception e)
                {
    //                Console.WriteLine(e.ToString());
                }
            }
        }

    // Encapsulates information about the socket and data buffer
public class StateObject
{
    public Socket workSocket = null;
    public int readOffset = 0;
    public StringBuilder sb = new StringBuilder();

    private int bufferSize = 0;
    public int BufferSize
    {
        set
        {
            this.bufferSize = value;
            buffer = new byte[this.bufferSize];
        }

        get { return this.bufferSize; }
    }

    private byte[] buffer = null;
    public byte[] Buffer
    {
        get { return this.buffer; }
    }
} 
```

您需要做的就是插入您自己的消息。

请记住，套接字流可能（并且大多数情况下）包含部分消息。因此，最好将消息的长度作为消息的第一个字节发送。您还必须通过在读取之间组装部分消息来相应地管理读取缓冲区。查看以下消息基类。

```
public partial class MessageBase
{
    // Virtual Execute method following the Command pattern
    public virtual string Execute(Socket socket) { return string.Empty; }

    protected virtual bool MustEncrypt
    {
        get { return false; }
    }

    // Binary serialization
    public byte[] Serialize()
    {
        using (MemoryStream stream = new MemoryStream())
        {
            using (DeflateStream ds = new DeflateStream(stream, CompressionMode.Compress, true))
            {
                BinaryFormatter formatter = new BinaryFormatter();
                formatter.Serialize(ds, this);
                ds.Flush();
            }

            byte[] bytes = stream.GetBuffer();
            byte[] bytes2 = new byte[stream.Length];
            Buffer.BlockCopy(bytes, 0, bytes2, 0, (int)stream.Length);
//                Array.Copy(bytes, bytes2, stream.Length);

            if (this.MustEncrypt)
                bytes2 = RijndaelEncrptor.Instance.Encrypt(bytes2);

            // Create a buffer large enough to hold the encrypted message and size bytes
            byte[] data = new byte[8 + bytes2.Length];

            // Add the message size
            BitConverter.GetBytes(bytes2.Length).CopyTo(data, 0);
            BitConverter.GetBytes(this.MustEncrypt).CopyTo(data, 4);

            // Add the message data
            bytes2.CopyTo(data, 8);
            return data;
        }
    }

    static public MessageBase Deserialize(byte[] buffer)
    {
        int length = BitConverter.ToInt32(buffer, 0);
        bool mustDecrypt = BitConverter.ToBoolean(buffer, 4);
        MessageBase b = null;

        try
        {
            b = MessageBase.Deserialize(buffer, 8, length, mustDecrypt);
        }
        catch { }

        return b;
    }

    static public MessageBase Deserialize(byte[] buffer, int offset, int length, bool mustDecrypt)
    {
        // Create a buffer and initialize it with data from
        // the input buffer offset by the specified offset amount
        // and length determined by the specified length
        byte[] data = new byte[length];
        Buffer.BlockCopy(buffer, offset, data, 0, length);
//            Array.Copy(buffer, offset, data, 0, length);

        // Decrypt message
        if (mustDecrypt)
            data = RijndaelEncrptor.Instance.Decrypt(data);

        // Deserialize the binary data into a new object of type MessageBase
        using (MemoryStream stream = new MemoryStream(data))
        {
            using (DeflateStream ds = new DeflateStream(stream, CompressionMode.Decompress, false))
            {
                BinaryFormatter formatter = new BinaryFormatter();
                try
                {
                    return formatter.Deserialize(ds) as MessageBase;
                }
                catch
                {
                    return null;
                }
            }
        }
    }

    static public IEnumerable<MessageBase> Receive(Socket client, int bytesReceived, StateObject state)
    {
        // Total buffered count is the bytes received this read
        // plus any unprocessed bytes from the last receive
        int bufferLen = bytesReceived + state.readOffset;

        // Reset the next read offset in the case
        // this recieve lands on a message boundary
        state.readOffset = 0;

        // Make sure there are bytes to read
        if (bufferLen >= 0)
        {
            // Initialize the current read position
            int readOffset = 0;

            // Process the receive buffer
            while (readOffset < bufferLen)
            {
                // Get the message size
                int length = BitConverter.ToInt32(state.Buffer, readOffset);
                bool mustDecrypt = BitConverter.ToBoolean(state.Buffer, readOffset + 4);

                // Increment the current read position by the length header
                readOffset += 8;

                // Change the buffer size if necessary
                if (length + readOffset > state.Buffer.Length)
                {
                    byte[] oldBuffer = new byte[state.BufferSize];
                    Buffer.BlockCopy(state.Buffer, 0, oldBuffer, 0, state.BufferSize);
//                        Array.Copy(state.Buffer, oldBuffer, state.BufferSize);

                    state.BufferSize = length + readOffset;
                    Buffer.BlockCopy(oldBuffer, 0, state.Buffer, 0, oldBuffer.Length);
//                        Array.Copy(oldBuffer, state.Buffer, oldBuffer.Length);
                }

                // Ensure there are enough bytes to process the message
                if (readOffset + length <= bufferLen)
                    yield return MessageBase.Deserialize(state.Buffer, readOffset, length, mustDecrypt);
                else
                {
                    // Add back the message length
                    readOffset -= 8;

                    // Reorder the receive buffer so unprocessed
                    // bytes are moved to the start of the array
                    Buffer.BlockCopy(state.Buffer, 0, state.Buffer, 0, bufferLen - readOffset);
//                        Array.Copy(state.Buffer, state.Buffer, bufferLen - readOffset);

                    // Set the receive position to the current read position
                    // This is the offset where the next socket read will start
                    state.readOffset = bufferLen - readOffset;
                    break;
                }

                // Update the read position by the message length
                readOffset += length;
            }
        }
    }
} 
```

上面的代码应该可以帮助您。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T14:52:37.813

Figured out a solution to my problem probably isn't the standard way to do it but it works. This is a simple chat application which can be used to connect player vs player games online sending moves back and forth.

SERVER-

```
using System;
using System.Net.Sockets;
using System.Text;
using System.Net;
using System.Threading;
using System.Windows.Forms;

namespace testServer
{
class Program
{
    static Form1 form1 = new Form1();
    static Form2 form2 = new Form2();
    static byte[] buffer { get; set; }
    static Socket sck, acc;
    static string name;

    public void setName(string s)
    {
        name = s;
        string[] asdf = new string[2];
    }

    static string getIP()
    {
        string hostName = System.Net.Dns.GetHostName();
        IPHostEntry ipEntry = System.Net.Dns.GetHostEntry(hostName);
        IPAddress[] addr = ipEntry.AddressList;
        return addr[addr.Length - 1].ToString();
    }

    static void Main(string[] args)
    {
        if (name == null)
        {
            Thread t = new Thread(ThreadProc);
            t.Start();
        } 
        sck = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp);
        sck.Bind(new IPEndPoint(0, 8888));
        Console.WriteLine("Your local IP address is: " + getIP());
        Console.WriteLine("Awaiting Connection");
        sck.Listen(100);

        acc = sck.Accept();
        Console.WriteLine(" >> Accept connection from client");
        sendMsg();
        while (acc.Connected)
        {
            Thread.Sleep(500);
            byte[] Buffer = new byte[255];
            int receive = acc.Receive(Buffer, 0, Buffer.Length, 0);
            Array.Resize(ref Buffer, receive);
            form2.SetText(Encoding.Default.GetString(Buffer));
        }
    }
    public void btnClick(string s)
    {
        name = s;
        Console.WriteLine("Name: " + name);
        System.Threading.Thread r = new System.Threading.Thread(new System.Threading.ThreadStart(ThreadProc2));
        r.Start();
    }
    public void sendMSG(string s)
    {
            try
            {
                buffer = Encoding.Default.GetBytes(s);
                acc.Send(buffer);
            }
            catch (Exception ex)
            {
                Console.WriteLine(ex.ToString());
            }
    }

    static void sendMsg()
        {
            try
            {
                buffer = Encoding.Default.GetBytes(name);
                acc.Send(buffer);
            }
            catch (Exception ex)
            {
                Console.WriteLine(ex.ToString());
            }
    }
    public static void ThreadProc()
    {
        form1.ShowDialog();
    }
    public static void ThreadProc2()
    {
        form2.ShowDialog();
    }
}
} 
```

That is the program class, the other forms are the same as my original post.

CLIENT-

```
using System;
using System.Windows.Forms;
using System.Text;
using System.Net.Sockets;
using System.Threading;

namespace testClient100
{
public partial class Form1 : Form
{
    System.Net.Sockets.TcpClient clientSocket = new System.Net.Sockets.TcpClient();
    NetworkStream serverStream = default(NetworkStream);
    string readData = null;
    string ipaddress;

    public Form1()
    {
        InitializeComponent();
    }

    private void getMessage()
    {
        while (true)
        {
            serverStream = clientSocket.GetStream();
            int buffSize = 0;
            byte[] inStream = new byte[10025];
            buffSize = clientSocket.ReceiveBufferSize;
            serverStream.Read(inStream, 0, buffSize);
            string returndata = System.Text.Encoding.ASCII.GetString(inStream);
            readData = "" + returndata;
            msg();
        }
    }

    private void msg()
    {
        if (this.InvokeRequired)
            this.Invoke(new MethodInvoker(msg));
        else
            textBox1.Text = textBox1.Text + Environment.NewLine + " >> " + readData;
    }

    private void button1_Click_1(object sender, EventArgs e)
    {
        byte[] outStream = System.Text.Encoding.ASCII.GetBytes(textBox2.Text);
        serverStream.Write(outStream, 0, outStream.Length);
        serverStream.Flush();
    }

    private void button2_Click_1(object sender, EventArgs e)
    {
        ipaddress = textBox4.Text;
        readData = "Conected to Chat Server ...";
        msg();
        clientSocket.Connect(ipaddress, 8888);
        serverStream = clientSocket.GetStream();

        byte[] outStream = System.Text.Encoding.ASCII.GetBytes(textBox3.Text);
        serverStream.Write(outStream, 0, outStream.Length);
        serverStream.Flush();

        Thread ctThread = new Thread(getMessage);
        ctThread.Start();
    }

}
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T20:01:51.247

你确实意识到你的代码永远不会从这里退出：

```
public void sendMsg(string s)
{
    bool x = true;
    while (true)
    {
        Thread.Sleep(500);
        if (x == true)
        {
            byte[] msgBuffer = Encoding.ASCII.GetBytes(s);
            sck.Send(msgBuffer);
            x = false;
        }
    }
} 
```

这是一个无限循环，没有中断或返回，也无法退出。怎么样：

```
public void sendMsg(string s)
{
    while (true)
    {
        Thread.Sleep(500);
        byte[] msgBuffer = Encoding.ASCII.GetBytes(s);
        sck.Send(msgBuffer);
    }
} 
```

# php - 在循环中获取作者的最新帖子

> ID：10389729
> 
> 赞同：1
> 
> 时间：2012-04-30T19:53:00.877
> 
> 标签：php, html, wordpress

我需要显示当前作者的最后 5 篇文章`single.php`。这些帖子在表中注册`wp_usermeta`为`meta_key`( `user_posts`) 和`meta_value`( `a:2:{i:0;s:4:"1336";i:1;s:4:"1334";}`)，其中 1336 和 1334 是帖子 ID。

我尝试了很多方法来获取当前作者的更多帖子，但没有找到解决方案。

```
<?php
 $post_ids = get_user_meta($user_id,'user_posts',true); 
 $posts = get_posts(array(
 'author' => get_the_author_id(), 
 'numberposts' => 5,  
 'orderby' => 'post_date', 
 'post__in' => explode(',', $post_ids)));
  if($posts) { echo '<ul>';
    foreach($posts as $post) { ?>
                <li><a href="<?php echo get_permalink($p->ID) ?>" rel="bookmark"  title="Permanent Link to <?php echo $post->post_title; ?>"><?php echo $post->post_title; ?> </a></li>
    <?php }
    echo '</ul>';} ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T18:45:12.637

您可以使用以下代码获取当前作者的最新 5 篇文章`single.php`

您不需要解析该序列化字符串

```
$authorID = get_the_author_meta('ID');

$authors_posts = get_posts( array( 
     'author' => $authorID, 
     'numberposts' => 5,
     'orderby' => 'date'      
   ) 
 ); 
```

[检查 wp codex get_posts](http://codex.wordpress.org/Template_Tags/get_posts)和[get_the_author_meta](http://codex.wordpress.org/Function_Reference/get_the_author_meta)中的两个函数 doc

然后，您可以遍历帖子以获取各个帖子的详细信息。

# keyword - 检查哪个词是真实的和常用的

> ID：10389732
> 
> 赞同：1
> 
> 时间：2012-04-30T19:53:14.810
> 
> 标签：keyword, resource-cleanup

我有一个数据库，其中包含从我的数据构建的 70k 个关键字。问题是，一些（10-15%）的词不是真正常用的关键词。如何检查哪些不是真正的好词，以便我可以清理我的桌子？有人知道吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T19:56:21.297

使用具有 API 的字典类型工具，以便您可以将数据库中的单词与字典工具数据库中的单词进行比较。

编辑：
一旦这样的工具你可能会发现有用的是[dictionary.com的API](http://developer.dictionary.com/)

您可能还想在 Linux 系统上查找以下内容：

```
/usr/share/dict/ 
/var/lib/dict/ 
```

# .net - 向 Datacontext Entity Framework 提交多项更改

> ID：10389734
> 
> 赞同：0
> 
> 时间：2012-04-30T19:53:33.000
> 
> 标签：.net, asp.net-mvc-3, transactions

我正在开发一个应用程序。Net 使用 MVC3 和 Entity Framework 访问 SQL Server 数据库。我需要开发一个视图，在表格中列出产品，用户可以在其中添加、编辑和删除产品，而无需将这些更改记录在 thedb 中，直到单击按钮保存列表。知道有数据层和业务层。我不知道如何处理这种情况！谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T19:45:01.240

我不知道您的问题是否仍然相关，但您可以这样做：

*   使用 Add()、Update() 和 Delete() 对 Entity Framework 保存的内存中对象集合执行所有更改。不要调用 SaveChanges()。
*   将保存按钮绑定到在上下文中调用 SaveChanges() 的方法。现在，您添加/修改/删除的每个实体也将在数据库中更改（如果发生更改，它将回滚所有这些更改）。

听起来像你在找什么。

# asp.net-mvc - 将 asp.net mvc ajax actionlink 重写为 jquery/ajax 语句

> ID：10389740
> 
> 赞同：3
> 
> 时间：2012-04-30T19:53:46.557
> 
> 标签：asp.net-mvc, jquery, actionlink

您将如何仅使用 Jquery + Ajax 重写此语句？此代码显示一个链接。当我单击它时，视图将返回到 StuffPanel id。

```
@{ AjaxOptions options = new AjaxOptions
           {
               InsertionMode = InsertionMode.Replace,
               UpdateTargetId = "StuffPanel",
               OnBegin = "OnBeginWork",
               OnComplete = "OnCompleteWork",
           };}
<p>@Ajax.ActionLink("show stuff", "Index", "Stuff", options)</p> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T20:01:22.403

干得好：

```
<a href="/Index/Stuff" id="action">show stuff</a>

$(function() {
    $('#action').click(function(e) {
        e.preventDefault();
        var url = $(this).attr('href');
        $.ajax({
            url: url,
            beforeSend: OnBeginWork,
            complete: OnCompleteWork,
            success: function(html) {
                $('#StuffPanel').html(html);
            }
        });
    });
}); 
```

我建议您保留 actionLink，因为它所做的只是为您获取正确的路由。给它添加一个ID，这样你就可以更容易地绑定click事件，然后使用click事件回调来触发ajax调用。使用成功函数将 的内容替换为`#StuffPanel`响应。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T20:01:56.927

根据您提供的有限信息，这样的事情应该会让您朝着正确的方向前进：

```
$(function(){   
    $('#id-to-link').on('click',function(e){
        e.preventDefault();
        $.ajax('Index/Stuff',{
            type: 'POST',
            data: '{}',
            dataType: 'html',
            contentType: 'application/json; charset=utf-8',
            success: function(data){
                $('#StuffPanel').html(data);
            }
        });
    });
} 
```

您必须检查回调`data`中的变量。`success`视图中的 HTML 将位于或位于like或类似`data`的某些属性中。此外，您应该给您的链接一个唯一的 ID，以便您可以轻松地将您的点击事件绑定到它。`data``data.d``data.message`

# ruby - 在 Ruby 脚本中执行 shell 脚本命令

> ID：10389742
> 
> 赞同：3
> 
> 时间：2012-04-30T19:53:57.633
> 
> 标签：ruby, linux, bash

我有一个非常基本的问题。我正在运行一个 Ruby 脚本来访问 Linux 中目录的内容。执行 ruby​​ 脚本时，该目录通过命令行传递。

我的问题是如何在 ruby​​ 的命令中使用命令行参数？

我把它设置成这样：

```
usrDirectory = ARGV[0]
lsCmd = `ls -l` 
```

我需要使用类似 ls -l usrDirectory 的东西。我可以像这样将它插入到命令中吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T20:06:34.183

上面是对的，如果你想`ls`输出到标准输出，这让它更干净一点：

```
system("ls", "-l", dir) 
```

这将使 Ruby 将输出打印到您的标准输出，而不是像上面那样将输出放入变量中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T20:13:40.143

你应该能够在不使用 shell 的情况下得到你想要的，例如：

```
usr_dir = "/tmp"
files = Dir["#{usr_dir}/*"]

p files 
```

无论您做什么，在将用户输入的文本作为将被解析和执行的内容的一部分传递给 shell 时都要**非常小心。**例如，如果用户输入（而不是目录名称）会发生什么

> ;rm -rf /*

?

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T19:56:04.887

您可以在命令字符串中使用表达式扩展和转义序列：

```
lsCmd = `ls -l #{usrDirectory}` 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-30T20:10:32.493

你有两个选择。你可以做：

```
lsCmd = `ls -l #{usrDirectory}` 
```

或者

```
command = "ls -l " + usrDirectory
lsCmd = %x[ #{command} ] 
```

# php - 在jquery ot php中提交两次？

> ID：10389746
> 
> 赞同：0
> 
> 时间：2012-04-30T19:54:23.123
> 
> 标签：php, jquery

嗨，我在 php 中有一个表单，它有一个动作，它会自行生成结果给用户，这是我想要的，但是我希望用户可以选择单击一个按钮，然后该按钮将转到谢谢- you.php 页面将信息发送给管理员。

我一直在考虑它，但也许我通过将一种形式放在另一种形式来使其复杂化？

到目前为止，这是我的表格：

```
<?php
$data = array("Benalmadena"=>10,"Fuengirola"=>20,"Mijas"=>30,"La Cala"=>10,"Calahonda"=>15,
"Marbella"=>20,"Puerto Banus"=>25,"San Pedro"=>30,"Estepona"=>40, "Nerja"=>12);

error_reporting(E_ALL);

if(isset($_POST['name']) && isset($_POST['to'])){

ini_set('date.timezone', 'Europe/Madrid');
$now = date("H:i");

$cutoff = "06:00";
$higherthan = "22:00";

$name = $_REQUEST['name'];
$telephone = $_REQUEST['telephone'];
$from = $_REQUEST['from'];
$to = $_REQUEST['to'];
$date = $_REQUEST['date'];
$returndate = $_REQUEST['returndate'];
$people = $_REQUEST['people'];
$return = $_REQUEST['return'];
$myemail = $_REQUEST['myemail'];

include_once('includes/config.php');

$settingsSql = mysql_query("SELECT * FROM transfers_in WHERE location='$to' AND no_passengers='$people'");
$settings        = mysql_fetch_assoc($settingsSql);

echo "From: ".$from." To: ".$settings['location']."<br />";
echo "Number of passengers: ".$settings['no_passengers']."<br />";

ini_set('date.timezone', 'Europe/Madrid');
$now = date("H:i");

$cutoff = "06:00";
$higherthan = "22:00";

echo "Time cost: ".$settings['price']." euros<br /><hr />Total: ";

    function timeCost() {

        $to = $_REQUEST['to'];
        $people = $_REQUEST['people'];
        $return = $_REQUEST['return'];

        include_once('includes/config.php');

        $settingsSql = mysql_query("SELECT * FROM transfers_in WHERE location='$to' AND no_passengers='$people'");
        $settings        = mysql_fetch_assoc($settingsSql);

        //echo $return;

        if ($return == "No"){
            if ((strtotime($now) < strtotime($cutoff)) || (strtotime($now) > strtotime($higherthan))){
                return number_format($settings['price']) + 1.40;
            } else {
                return number_format($settings['price']) + 0.00;
            }
        } elseif ($return == "Yes") {
            if ((strtotime($now) < strtotime($cutoff)) || (strtotime($now) > strtotime($higherthan))){
                return number_format($settings['price']) * 2 + 1.40;
            } else {
                return number_format($settings['price']) * 2 + 0.00;
            }
        }   

    }

    session_start();

    $_SESSION['timeCost'] = timeCost();

    echo timeCost()." in euros<br /><br />";

    echo "<div class='fauxButton' id='sendInfo'></div>";

} else {
?>

<form method="POST" action="#" name="chooseDateForm" id="chooseDateForm">
            <label>Name:</label>
            <input type="text" value="" name="name" />

            <label>Telephone:</label>
            <input type="text" value="" name="telephone" />

            <label>Email:</label>
            <input type="text" value="" name="myemail" />

            <label>From:</label>
            <select name="from">
                <option selected="selected">Malaga</option>
            </select>
            <div class="clr"></div>

            <label>To:</label>
            <select name="to">

<?php foreach ($data as $place => $price){
    echo "<option>{$place}</option>\n";
}
echo '</select>
            <div class="clr"></div>

            <label>Date:</label>
            <input type="text" value="dd/mm/yyyy" id="date" name="date" class="date-pick" />
            <span id="calendar"></span>

            <div id="return-journey">
                <label>Return Date:</label>
                <input type="text" value="dd/mm/yyyy" id="returndate" name="returndate" class="date-pick" />
                <span id="calendar"></span>
            </div>

            <label>Number of people:</label>
            <select id="people" name="people">
                <option value="4">4</option>
                <option value="6">6</option>
                <option value="8">8</option>
            </select>
            <div class="clr"></div>

            <div id="return">
                <label>Is this a return<br />journey?</label>
                <div class="clr"></div>
                <div id="radio-buttons">
                    <input type="radio" name="return" value="Yes" class="radio returning" />Yes<br />
                    <input type="radio" name="return" value="No" class="radio" checked />No
                </div>
            </div>
            <div class="clr"></div>

            <input type="submit" name="submit" class="fauxButton" />            

        </form>';
}
?> 
```

我添加了这个：

```
<div class='fauxButton' id='sendInfo'></div> 
```

但由于表单已经发送，我无法更改 jQuery 中的操作，我对 jQuery 或 PHP 了解不多，所以如果有人可以建议/帮助，请做。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T20:18:33.603

您可以将其添加到您的按钮：

```
OnClick="location.href='http://www.YourUrlGoesHere.com'"
//So it will look like this..
echo "<div class='fauxButton' id='sendInfo' OnClick=\"location.href='http://www.YourUrlGoesHere.com'\"></div>" 
```

# php - 测试定期付款（贝宝 IPN）

> ID：10389750
> 
> 赞同：7
> 
> 时间：2012-04-30T19:54:42.217
> 
> 标签：php, paypal, paypal-ipn, recurring

我正在尝试使用贝宝设置定期支付服务，我的问题是我似乎找不到测试它的方法，我已经设置为每日周期和 1 作为频率，但该帐户似乎仍需要一个月才能完成下次付款，

Paypal 说如果您将其设置为 Day 则需要几分钟，但下一个付款日期设置为一个月甚至不需要一天，有没有人遇到过同样的问题或更好的解决方案来测试它？

谢谢

这是我发送的 NVP：

```
&AMT=19.95
&CURRENCYCODE=USD
&PROFILESTARTDATE=2012-05-30+T9%3A0%3A0
&TOKEN=XX-xxXxxxxxXXxxxxxxX
&BILLINGPERIOD=Day
&BILLINGFREQUENCY=1
&BILLINGTYPE=RecurringPayments
&DESC=\Subscription
&AUTOBILLOUTAMT=AddToNextBilling
&EMAIL=asfjasd@asdfasd.com
&FIRSTNAME=juanito
&LASTNAME=escarcha
&STREET=manzanares
&CITY=gdl
&STATE=jal
&COUNTRYCODE=MX
&ZIP=12345 
```

以下是贝宝返回的内容：

```
(
    [payment_cycle] => Daily
    [txn_type] => recurring_payment_profile_created
    [last_name] => perez
    [next_payment_date] => 03:00:00 May 30, 2012 PDT
    [residence_country] => MX
    [initial_payment_amount] => 0.00
    [currency_code] => USD
    [time_created] => 12:24:08 Apr 30, 2012 PDT
    [verify_sign] => XXXXXXXXXxxxxxxx
    [period_type] =>  Regular
    [payer_status] => unverified
    [test_ipn] => 1
    [tax] => 0.00
    [payer_email] => juan@paypal.com
    [first_name] => juan
    [receiver_email] => test@testcompany.com
    [payer_id] => XXXXXXxxxxxXXX
    [product_type] => 1
    [shipping] => 0.00
    [amount_per_cycle] => 19.95
    [profile_status] => Active
    [charset] => windows-1252
    [notify_version] => 3.4
    [amount] => 19.95
    [outstanding_balance] => 0.00
    [recurring_payment_id] => I-8JXMN6XXXXX
    [product_name] => Subscription
    [ipn_track_id] => 57fbxxXXXXXxx
) 
```

一切似乎都很好，除了贝宝想从今天起一个月后收取下一笔付款

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T15:11:03.677

你发

```
PROFILESTARTDATE=2012-05-30+T9:0:0 
```

下一个付款日期（这里是第一次付款）在这一天。

```
[next_payment_date] => 03:00:00 May 30, 2012 PDT 
```

看来，是对的。我认为您应该更改您的个人资料开始日期。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T20:02:33.383

Paypal 有一个内置的 IPN 测试器工具来帮助调试您的 IPN 监听器并确保它正确记录所有内容。它会将相同的查询变量作为真实的 IPN 通知帖子发送到您的端点，以便您可以模拟真实支付情况下发生的情况。

[https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_admin_IPNTesting#id089BD0L50PF](https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_admin_IPNTesting#id089BD0L50PF)

如果您对定期付款的频率有疑问，则需要在变量中为您第一次订阅贝宝的帖子进行配置。您可以分享您在订阅请求中使用的字段吗？（当然是编辑敏感数据）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T08:03:49.753

CreateRecurringPaymentsProfile 不接受 NOTIFYURL 参数；相反，您需要在您的 PayPal 帐户的个人资料中设置一个 IPN URL。这是将用于定期付款 IPN 消息的 IPN URL。

请访问：[https ://www.paypal-community.com/t5/Merchant-services-Archive/Recurring-payments-IPN/td-p/350104](https://www.paypal-community.com/t5/Merchant-services-Archive/Recurring-payments-IPN/td-p/350104)

# jquery - jQuery Mobile 页面加载问题

> ID：10389751
> 
> 赞同：0
> 
> 时间：2012-04-30T19:54:49.167
> 
> 标签：jquery

我正在使用 jQuery Mobile 构建一个移动网络应用程序。我面临一些非常奇怪的问题。

页面与标准标签相连。每当我点击一个链接时，地址栏中的位置会发生变化，我确实会被重定向到新页面，但为了让页面呈现某些内容，我需要使用 Cntrl+F5 显式刷新它或单击刷新浏览器按钮。我试过 FF11 和 Chrome。这是一个已知的问题？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T20:03:52.737

我相信我确切地知道您正在经历什么，因为我的期望是页面就绪/加载事件会触发。有很多方法可以解决这个问题，例如：

首先，您可以简单地在源页面中添加以下子句以链接到目标页面：

```
rel = "external" 
```

这将导致目标页面刷新并触发那些我认为具有您想要执行的 javascript 代码的页面加载事件。但是，您可能不希望页面表现出这种行为，所以......

另一个选择是向源页面添加一些脚本，当目标页面变为活动（或“活动”）时将触发该脚本：

```
$( '#YourTargetPageName' ).live( 'pageinit', function(event){
  alert( 'Hello from the TargetPage' );
  $('#SomeInputField').val('Changed text in the target page');
}); 
```

在上面的示例代码中，当您链接到目标页面时，它将显示弹出警报并更改所选输入字段的文本。

最后，如果您想在任何页面的开头执行相同的代码，那么您将添加以下脚本：

```
 $(document).delegate('.ui-page', 'pageshow', function () {
   alert( 'Hello from the beginning of every page' );
 }); 
```

您可以在 JQM 文档中探索许多其他选项（公平地说，我只是触及表面，因此有些选项可能更适合您的目的）：

[http://jquerymobile.com/test/docs/api/events.html](http://jquerymobile.com/test/docs/api/events.html)

# java - 无法使用 instanceof 比较两个对象

> ID：10389755
> 
> 赞同：2
> 
> 时间：2012-04-30T19:54:59.410
> 
> 标签：java, oop

当试图比较作为参数传递的两个对象时：第一个作为对象，第二个作为对象数组（相同类型）。得到错误`Incompatible conditional operand types Room and allRooms[]`。我正在尝试循环迭代，`while`直到`thisRoomType`不等于来自`rooms`. 如何解决？

```
public abstract class Room { ...}
public class LightRoom extends Room  {...}
public class DarkRoom extends Room {...} 
```

呼叫者：

```
release(thisRoomType, rooms) 
```

带参数

```
private Room thisRoomType = this; // is defined in DarkRoom and LightRoom 
private Room[] rooms; // is defined in DarkRoom and LightRoom 
```

在方法中：

```
public synchronized void release( Room thisRoom,  Room[] allRooms) {

        try {
            int j = 0;
            while(thisRoom instanceof allRooms[j]){     
                jj++;
            }
                        int nextRoom = jj;
...
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-30T19:59:02.047

试试这个：

```
while (j < allRooms.length && thisRoom.getClass().equals(allRooms[j].getClass())) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T20:13:21.983

你的逻辑是错误的。
`instanceof`预计`ReferenceType`您正在传递**一个对象实例** `allRooms[j]`。这永远行不通。
你应该做的是：

1.  比较`package`名字或
2.  `class`姓名或
3.  与具体类 ( `getClass`) 进行比较。

根据你的需要选择

# clr - CorFlags.exe /32BIT+ 是如何工作的？

> ID：10389756
> 
> 赞同：13
> 
> 时间：2012-04-30T19:55:01.250
> 
> 标签：clr, loader, corflags

我想我的问题是关于[CLR](http://en.wikipedia.org/wiki/Common_Language_Runtime) Loader 的。我想了解[CorFlags.exe](http://msdn.microsoft.com/en-us/library/ms164699%28v=vs.80%29.aspx) `/32BIT+`功能背后的机制。

我们知道，当启动在 64 位 Windows 上设置了*Any CPU*标志的程序集时，它会作为 64 位进程启动。如果`CorFlags /32BIT+`在该程序集上运行，它将作为 32 位进程启动。我认为这是一个令人着迷的功能。

我有很多关于它的问题：

1.  它是如何实施的？
2.  OS Loader 是否参与其中？
3.  是否可以构建一个自定义应用程序（我猜是非托管应用程序），它可以随意加载 32 位或 64 位 CLR？

是否有文章、书籍、博客等解释了此功能的内部工作原理？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-01T01:09:24.653

这在我所知道的任何地方都没有很好的记录，我只能将您指向相关的 MSDN 文章。是的，您的假设是正确的，Windows XP 及更高版本中的加载程序具有托管可执行文件的意识。它会自动加载 .NET 加载程序 shim (c:\windows\system32\mscoree.dll)，相关入口点是[_CorValidateImage()](http://msdn.microsoft.com/en-us/library/4ce9k7xb%28v=vs.90%29.aspx)。链接的 MSDN 文章中的备注部分描述了将 32 位 .exe 文件转换为 64 位进程的机制：

> 在 Windows XP 和更高版本中，操作系统加载程序通过检查通用对象文件格式 (COFF) 标头中的 COM 描述符目录位来检查托管模块。设置位指示受管模块。如果加载器检测到托管模块，它会加载 MsCorEE.dll 并调用 _CorValidateImage，后者执行以下操作：
> 
> *   确认映像是有效的托管模块。
> *   将映像中的入口点更改为公共语言运行时 (CLR) 中的入口点。
> *   对于 64 位版本的 Windows，通过将内存中的图像从 PE32 转换为 PE32+ 格式来修改它。
> *   加载托管模块映像时返回到加载程序。
> 
> 对于可执行映像，操作系统加载程序然后调用 _CorExeMain 函数，而不管可执行文件中指定的入口点。对于 DLL 程序集映像，加载程序调用 _CorDllMain 函数。
> 
> _CorExeMain 或 _CorDllMain 执行以下操作：
> 
> *   初始化 CLR。
> *   从程序集的 CLR 标头中找到托管入口点。
> *   开始执行。
> 
> 卸载托管模块映像时，加载程序调用 _CorImageUnloading 函数。但是，此函数不执行任何操作；它只是返回。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-04-18T19:10:23.463

为了补充 Hans 的答案，还有一些响应该标志的 Windows 内核模式代码。每个加载的可执行文件都有一个`SECTION_IMAGE_INFORMATION`与之关联的内核结构 。这是它的符号信息：

```
 0: kd> dt nt!_SECTION_IMAGE_INFORMATION
           +0x000 TransferAddress           : Ptr64 Void
           +0x008 ZeroBits                  : Uint4B
           +0x010 MaximumStackSize          : Uint8B
           +0x018 CommittedStackSize        : Uint8B
           +0x020 SubSystemType             : Uint4B
           +0x024 SubSystemMinorVersion     : Uint2B
           +0x026 SubSystemMajorVersion     : Uint2B
           +0x024 SubSystemVersion          : Uint4B
           +0x028 GpValue                   : Uint4B
           +0x02c ImageCharacteristics      : Uint2B
           +0x02e DllCharacteristics        : Uint2B
           +0x030 Machine                   : Uint2B
           +0x032 ImageContainsCode         : UChar
           +0x033 ImageFlags                : UChar
           +0x033 ComPlusNativeReady        : Pos 0, 1 Bit
           +0x033 ComPlusILOnly             : Pos 1, 1 Bit
           +0x033 ImageDynamicallyRelocated : Pos 2, 1 Bit
           +0x033 ImageMappedFlat           : Pos 3, 1 Bit
           +0x033 BaseBelow4gb              : Pos 4, 1 Bit
           +0x033 Reserved                  : Pos 5, 3 Bits 
```

标志`ComPlusILOnly`和`ComPlusNativeReady`与 .NET 相关，`ComPlusILOnly`只是告诉程序集是否仅为[CIL](http://en.wikipedia.org/wiki/Common_Intermediate_Language)（不是混合或本机 - 在这种情况下，程序集已经是特定于体系结构的），并且`ComPlusNativeReady`仅在未设置 /32BIT+ 时为 1（[32BITREQ 或 32BITPREF 在较新CorFlags 版本](https://msdn.microsoft.com/en-us/library/ms164699%28v=vs.110%29.aspx)）。在创建过程中`nt!PspAllocateProcess`并基于它们检查这些标志。`32-bit``64-bit`

[我写了](http://debugandconquer.blogspot.co.il/2015/04/the-relationship-between-net-and.html)一些细节。

# java - 从瘦客户端（Web 浏览器）流向已安装并正在运行的应用程序

> ID：10389757
> 
> 赞同：1
> 
> 时间：2012-04-30T19:55:06.207
> 
> 标签：java, web-applications, legacy-code, thick-client, thin-client

所以我正在处理一个大规模的应用程序。我们正在从已安装的 Java 应用程序迁移到基于 Web 的应用程序。在过渡版本期间，我们需要能够在本地安装（并假定正在运行）的应用程序上显示某些屏幕。是否有捷径可寻？

我查看了自定义 URL 处理程序和某种消息传递系统，但对于大量动态的客户端来说，这些似乎都不可行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T19:59:25.660

如何使用 JMS，让 Java 应用程序订阅一个主题。然后服务器可以向 JMS 主题发送一条消息，该消息由 java 应用程序解释以打开特定屏幕？

# javascript - jQuery 限制我正在加载/附加的字符数量？

> ID：10389770
> 
> 赞同：0
> 
> 时间：2012-04-30T19:56:09.690
> 
> 标签：javascript, jquery, html

我正在加载此内容，但是；

-如何限制我加载的字符数量？*（所以它只抓取前 100 个字符）*

- 这是从我网站上的另一个页面附加或加载 html 的好方法吗？

我也想让我的脚本简短而简洁

`if($('#description').length){$("#brief").load("/profile/contact/ #content p");}`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T19:57:55.180

你需要生成一个只输出你需要的内容的后端页面，而不是所有额外的东西。总之，你用`load()`错了。好吧...您正在“正确”地使用它，但是效率很低。

# objective-c - 我应该在删除之前检查一个对象是否存在于集合中吗？

> ID：10389771
> 
> 赞同：3
> 
> 时间：2012-04-30T19:56:10.267
> 
> 标签：objective-c, cocoa, collections

假设我有一个对象`someObject`和一个`NSMutableArray *someArray`. 我不确定是否`someObject`在数组中，但如果是，我想删除它。有两种选择：

**情况1：**

```
if([someArray indexOfObject:someObject] != NSNotFound)
   [someArray removeObject:someObject]; 
```

**案例二：**

```
[someArray removeObject:someObject]; 
```

在情况 2 中，如果数组中不存在对象，则不会发生任何事情。我的问题是，案例 2 是否更有效，因为在案例 1 中，我必须搜索数组并查看它是否存在，如果存在，我将其删除，但我猜测`removeObject:`再次搜索数组以查找该对象？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-30T19:58:52.153

> 但我猜 removeObject: 再次在数组中搜索该对象？

嗯，是的，它必须。如果不查找，就无法在集合中找到对象。*[文档](http://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSMutableArray_Class/Reference/Reference.html#//apple_ref/doc/uid/20000138-BABDAJBB)甚至这样说：

> 此方法用于`indexOfObject:`定位匹配项，然后使用 删除它们`removeObjectAtIndex:`。[...]如果数组不包含`anObject`，则该方法无效（尽管它确实会产生搜索内容的开销）。

如果需要，您当然可以在搜索后立即模仿框架并使用`removeObjectAtIndex:`自己。

* * *

[*这比它可能更快（最坏的情况是 O(log(N)) 而不是 O(N)），因为`NSArray`s[不是数组](http://ridiculousfish.com/blog/posts/array.html)。]

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-30T20:03:28.920

好吧，您的数组不会记住您搜索的每个对象。如果由于某种原因您需要在删除它之前知道它是否存在，您可以避免双重搜索

```
NSUInteger tempIndex = [someArray indexOfObject:someObject];
if (tempIndex != NSNotFound)
   [someArray removeObjectAtIndex:tempIndex]
else
   //in case it wasn't found... 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-30T19:58:49.143

`NSMutableArray`不会（也不能）“记住”您在被要求删除时刚刚搜索了一个对象。因此，调用`indexOfObject`后跟`removeObject`必然比简单地调用`removeObject`本身需要更多的工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-01T02:27:38.010

我会选择案例 2，然后调用 removeObject，因为正如文档所述

> 此方法使用 indexOfObject: 定位匹配项，然后使用 removeObjectAtIndex: 将其删除。因此，匹配是根据对象对 isEqual: 消息的响应来确定的。如果数组不包含对象，则该方法无效（尽管它确实会产生搜索内容的开销）。

所以基本上这两个代码示例是相同的，除了数组可能会在你之后再次检查，因为它不知道你检查过，所以它只是浪费了一些额外的 cpu 时间。但老实说，我现在不会想太多这样的例子，只是开发你的应用程序，当涉及到优化时，看看是什么占用了你所有的 cpu 时间，并在它们开始真正占用时调整这样的案例增加你的 CPU 时间。

# ruby-on-rails - Rails 更新关联模型

> ID：10389772
> 
> 赞同：0
> 
> 时间：2012-04-30T19:56:14.140
> 
> 标签：ruby-on-rails, reference, model

我有以下内容：

```
class Person < ActiveRecord::Base
  has_many :tasks
end

class Task < ActiveRecord::Base
  belongs_to :person
end 
```

我可以毫无困难地为一个人创建新任务，但是在尝试更新任务时会变得很困难。

一开始我对这两个动作都有一个部分：

```
<%= form_for([@person, @person.tasks.build]) do |f| %>
    # Form stuff
    <%= f.submit "Guardar", :class => 'btn'%>
<% end %> 
```

但它在尝试更新时不断创建新对象。所以我为创建和更新创建了单独的表单，第二个是这样的：

```
<%= form_for([@person, @task], :url => {:action => :update} ) do |f| %>
    # Form stuff
    <%= f.submit "Guardar", :class => 'btn'%>
<% end %> 
```

我的问题是，有没有办法只用一种形式来做这两件事？使用单个模型时，它如何知道何时创建或更新？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T19:57:47.493

就在这里。它们被称为嵌套属性。这个 rails cast 介绍了如何在应用程序中实现嵌套属性的基础知识： [http ://railscasts.com/episodes/196-nested-model-form-part-1](http://railscasts.com/episodes/196-nested-model-form-part-1)

# web2py - 如何使 SQLTABLE 结果链接到外部页面？

> ID：10389775
> 
> 赞同：3
> 
> 时间：2012-04-30T19:56:25.663
> 
> 标签：web2py

Web2py 新手，所以我的问题可能不太清楚。我正在尝试制作货运跟踪页面，并且我有一个简单的数据库，其中包含跟踪号和托运人 ID。按照示例，我的应用程序可以显示新记录并将其添加到货件数据库。现在我想添加指向显示记录的链接，这些链接会将您带到承运人的该跟踪号的跟踪页面。跟踪页面 URL 将根据将附加跟踪号的每个发货人的默认字符串创建。如何将结果链接到相应的跟踪页面？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T20:28:56.240

如果您通过 SQLFORM、Crud、SQLTABLE 或 SQLFORM.grid 显示记录，您可以设置跟踪号字段的“represent”属性以显示链接：

```
db.define_table('shipper',
    Field('name'),
    Field('url'),
    format='%(name)s')

db.define_table('shipment',
    Field('tracking_number', represent=lambda value, row: A(value,
        _href=row.shipper.url + value)),
    Field('shipper', db.shipper)) 
```

这假设您将托运人 URL 存储在单独的表中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T18:16:04.780

我把它改成了这个，它几乎可以工作：

```
db.define_table('carrier',
    Field('name',),
    Field('url',),
    format='%(name)s')

db.define_table('shipment',
    Field('shipment_id', represent=lambda value,row: \
        A(value, _href=(row.carrier.url + value, ))),
    Field('carrier', db.carrier)) 
```

ship_id 是一个链接，但它指向 'http://127.0.0.1:8000/tracker/default/www.bing.com/search?q=trumpet'，其中 'www.bing.com/search?q='和 'trumpet' 分别是 carrier.url 和 shipping.shipment_id 值（仅用于测试）。我怎样才能离开'http://127.0.0.1:8000/tracker/default/'？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T19:28:32.220

好的，最终得到：

```
db.define_table('carrier',
    Field('name',),
    Field('url',),
    format='%(name)s')

db.define_table('shipment',
    Field('shipment_id', represent=lambda value,row: \
        A(value, _href=row.carrier.url + value)),
    Field('carrier', db.carrier)) 
```

有两个问题。首先是 href 的语法。我上面添加的答案中的版本没有报错，但是导致链接地址问题。其次，输入的 URL 没有“http://”。这导致了相同的链接地址问题。

# php - php/mysql 防止多列重复条目

> ID：10389780
> 
> 赞同：3
> 
> 时间：2012-04-30T19:56:57.320
> 
> 标签：php, mysql, duplicates

我想提出一个标准做法，以防止任何表在重要的地方出现重复。在大多数情况下，重复是变量的组合，而不是一个。我的主键只是每个字段的唯一 ID，所以我不能使用它们。我一直在做的是先查询表，然后如果相关组合的行数为 0，则进行插入。但是，我已阅读应该可以在多个字段上设置唯一键以强制唯一性。INSERT IGNORE 听起来很可能，但是，我需要在多个列上忽略它。

例如，对于字段 Followers 和 Followed，一个表中可以有多个 Followers 和 Follows，但只能是两者的一种组合。

谁能建议语法首先在多个字段上创建唯一键，然后执行 SQL 插入查询以防止欺骗？非常感谢。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-30T20:03:10.917

您可以简单地在这些列上创建一个多列索引并强制唯一性：请参阅[http://dev.mysql.com/doc/refman/5.0/en/multiple-column-indexes.html](http://dev.mysql.com/doc/refman/5.0/en/multiple-column-indexes.html)上的 MySQL 手册。

例如，在具有列`id`（唯一主键）`colA`和的表中`colB`，您运行：

```
ALTER TABLE table ADD UNIQUE KEY (colA,colB) 
```

就是这样：导致这两列组合中重复条目的任何 INSERT 现在将返回 MySQL 错误，而不是通过。如果使用`INSERT IGNORE`，如果执行它会违反此唯一约束，则不会引发 MySQL 错误，并且您的`INSERT`语句将被悄悄地忽略。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-30T20:11:57.880

要为文本类型创建唯一索引，您可以使用

```
CREATE UNIQUE INDEX indexname ON `tablename` (columnname (100)); 
```

(100) 在 columnname 之后告诉 mysql 只检查前 100 个字节是否唯一，如果您指定 (4) 作为长度，那么两者

```
hello
hello world 
```

与索引相同（实际上都`hell`在索引树中）并且mysql不允许将它们插入到表中。

见这里[http://dev.mysql.com/doc/refman/5.0/en/create-index.html](http://dev.mysql.com/doc/refman/5.0/en/create-index.html)

# ios - uiview 自动调整大小主要在播放电影后以 20 px 的偏移显示

> ID：10389781
> 
> 赞同：2
> 
> 时间：2012-04-30T19:57:14.227
> 
> 标签：ios, ipad

启动 iPad 应用程序时，我可以在没有任何可能的情况下打开它，并且它可以毫无问题地显示一切正常，但我不知道为什么在播放电影后，然后尝试旋转我的 iPad 我的视图大小正在缩小规模并且显示错误 我一直在尝试 2 天但没有任何成功任何想法？有什么建议吗？提前非常感谢
你能看看下面的代码：

```
- (void) moviePlayBackDidFinish:(NSNotification*)notification 
{ 
    MPMoviePlayerController *player = [notification object]; 

     self.isMoviePlaying =FALSE;
    [[NSNotificationCenter defaultCenter] 
     removeObserver:self 
     name:MPMoviePlayerPlaybackDidFinishNotification 
     object:player]; 

    if ([player respondsToSelector:@selector(setFullscreen:animated:)]) 
    { 
        [player.view removeFromSuperview]; 
        NSLog(@"played movie has been removed from the super view  ");
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T20:03:42.313

iPad 和自动旋转存在几个问题，特别是关于状态栏的说明。对于我遇到的问题，`wantsFullscreenLayout`在我的主视图控制器上设置属性来`YES`修复它。不确定它是否会解决您的问题，但可以尝试一下。

# php - 从谷歌日历返回 json 并用 php 解析

> ID：10389782
> 
> 赞同：0
> 
> 时间：2012-04-30T19:57:15.187
> 
> 标签：php, json

```
$current = $_GET['current'];
$future = $_GET['future'];
//$CMD = $_GET['CMD'];

$current = mktime(0,0,0,date("m"),date("d"),date("Y"));
$currentDate = date("Y-m-d",$current);

$future = mktime(0,0,0,date("m"),date("d")+7,date("Y"));
$futureDate = date("Y-m-d", $future);
//need to get the futureDate for URL
//$futrureDate = date("Y-m-d",$_GET['finalDate'])

// build feed URL
$googleURL = "http://www.google.com/calendar/feeds/$userid/private-$magicWord/basic?start-min=$currentDate&start-max=$futureDate/full?alt=json";
//$googleURL = "http://www.google.com/calendar/feeds/$userid/private-$magicWord/basic?alt=json";
//$url = "http://www.google.com/calendar/feeds/developer-calendar@google.com/public/full?alt=json";
$data = file_get_contents($googleURL);
echo $data;
//$json = json_encode($data);
//echo $json;
//By default json_decode returns an stdClass object. You have to give a second parameter for this function TRUE.
$object = json_decode($json,TRUE);
print_r($object->title[1]);

//echo $object->title[0]; 
```

我在哪里将 alt=json 放在带有日期变量的 url 中。当我从 url 中排除日期但它对它们无效时，它工作正常。此外，当我尝试打印特定对象时，我收到一个错误，指出该对象不存在。谢谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T20:02:54.273

尝试 -

```
$googleURL = "http://www.google.com/calendar/feeds/$userid/private-$magicWord/basic?start-min=$currentDate&start-max=$futureDate/full&alt=json"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-01T23:08:13.443

似乎 URL 方案要求提供基本视图，然后添加完整视图。（你只能拥有一个。）

尝试：

```
$googleURL = "http://www.google.com/calendar/feeds/$userid/private-$magicWord/basic?start-min=$currentDate&start-max=$futureDate&alt=json"; 
```

或者

```
$googleURL = "http://www.google.com/calendar/feeds/$userid/private-$magicWord/full?start-min=$currentDate&start-max=$futureDate&alt=json"; 
```

# ruby-on-rails - Rails 3中未保存的选定复选框选项具有许多直通关系

> ID：10389783
> 
> 赞同：1
> 
> 时间：2012-04-30T19:57:19.117
> 
> 标签：ruby-on-rails, parent-child, has-many-through

所以，我有一个模型，任务，它应该允许父母与孩子的关系。这些是模型定义的相关部分：

```
class Task < ActiveRecord::Base

  attr_accessible :relationships_attributes

  has_many :relationships, :foreign_key => "subtask_id", :dependent => :destroy
  has_many :parents, :through => :relationships, :source => "parent"

  has_many :reverse_relationships, :foreign_key => "parent_id", :class_name => "Relationship", :dependent => :destroy
  has_many :subtasks, :through => :reverse_relationships, :source => "subtask"

end 
```

关系模型的定义如下：

```
class Relationship < ActiveRecord::Base

  attr_accessible :parent_id

  belongs_to :parent, :class_name => "Task"
  belongs_to :subtask, :class_name => "Task"

  validates :parent_id, presence: true
  validates :subtask_id, presence: true

end 
```

我想做的是通过使用包含复选框的表单来修改基础“关系”数据库表中存在的条目，该复选框允许为特定任务选择/删除父任务 ID。这是我的 edit.html.erb 文件中用于 check_box_tag 的代码：

```
<p>
  <br>
  <%= f.label :parent_tasks %>
  <% for task in Task.find(:all) %>
  <div>
    <%= check_box_tag "subtask[parent_ids][]", task.id, @task.parent_ids.include?(task.id)%>
    <%= task.id %>
  </div>
  <% end %>
</p> 
```

当按下表单的保存按钮时，不会产生错误，但不会保存在复选框中所做的修改。日志显示这些条目（它不会尝试从关系表中删除/插入）：

```
Started PUT "/dev/tasks/25" for 127.0.0.1 at 2012-04-30 14:59:13 -0400
Processing by Dev::TasksController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"+ShrgdwgD7G1l9iDEuCsZ84d9XCwXh01p3BwJARJScE=", "task"=>{"name"=>"task bla", "description"=>"", "project_id"=>"", "task_status_id"=>"1"}, "subtask"=>{"parent_ids"=>["19", "22"]}, "commit"=>"Save changes", "id"=>"25"}
  User Load (0.8ms)  SELECT "users".* FROM "users" WHERE "users"."remember_token" = 'z7IrWT7R7u7i6nhW26J2Og' LIMIT 1
  Task Load (0.3ms)  SELECT "tasks".* FROM "tasks" WHERE "tasks"."id" = $1 LIMIT 1  [["id", "25"]]
   (0.1ms)  BEGIN
   (0.1ms)  COMMIT
Redirected to http://localhost:3000/dev/tasks
Completed 302 Found in 8ms (ActiveRecord: 1.3ms) 
```

我之前已经为两个不同的模型 User 和 Team 实现了我想要实现的功能，这两个模型有一个联合模型 Teams_users。这是成功保存更改到 teams_users 数据库表的操作的日志：

```
Started PUT "/teams/1" for 127.0.0.1 at 2012-04-30 14:46:11 -0400
Processing by TeamsController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"+ShrgdwgD7G1l9iDEuCsZ84d9XCwXh01p3BwJARJScE=", "team"=>{"name"=>"My team", "user_ids"=>["3", "8", "9", "100", "101"]}, "commit"=>"Save", "id"=>"1"}
  Team Load (0.3ms)  SELECT "teams".* FROM "teams" WHERE "teams"."id" = $1 LIMIT 1  [["id", "1"]]
   (0.1ms)  BEGIN
  User Load (0.4ms)  SELECT "users".* FROM "users" WHERE "users"."id" IN (3, 8, 9, 100, 101)
  User Load (0.4ms)  SELECT "users".* FROM "users" INNER JOIN "teams_users" ON "users"."id" = "teams_users"."user_id" WHERE "teams_users"."team_id" = 1
   (0.2ms)  DELETE FROM "teams_users" WHERE "teams_users"."team_id" = 1 AND "teams_users"."user_id" IN (2, 4)
   (38.3ms)  INSERT INTO "teams_users" ("team_id", "user_id") VALUES (1, 3) RETURNING "id"
  Team Exists (0.4ms)  SELECT 1 FROM "teams" WHERE (LOWER("teams"."name") = LOWER('My team') AND "teams"."id" != 1) LIMIT 1
   (39.9ms)  COMMIT
Redirected to http://localhost:3000/teams/1
Completed 302 Found in 88ms (ActiveRecord: 81.0ms) 
```

我希望使我当前的代码工作所需的修改很小，并且有人能够将我指向它们或我尚未遇到的一些相关帖子:)。

# width - 用省略号设置列的宽度

> ID：10389784
> 
> 赞同：1
> 
> 时间：2012-04-30T19:57:22.437
> 
> 标签：width, webgrid, css

我有一个如下表：

```
 <tr>
                    <th scope="col">
                       Nome Completo
                    </th>
                    <th scope="col">
                        E-Mail
                    </th>
                    <th scope="col">
                        Matrícula
                    </th>
                    <th scope="col">
                        Filial
                    </th>
    </tr>

    <tr>
                    <td class="column50 ellipsis">
                        ANGUS MACGYVER
                    </td>
                    <td class="column150 ellipsis">
                        francisco.voccio@envvio.com
                    </td>
                    <td class="column100 ellipsis">
                    1616161
                    </td>
                    <td class="column100 ellipsis">
                        SÃO PAULO
                    </td>
    </tr> 
```

我希望它具有不同的宽度，具体取决于列。这是我的简化 CSS：

```
.general_webgrid table
{
    table-layout: fixed;
    border-spacing: 1px;
    padding-bottom: 3px;
}
     .general_webgrid table td.column50
        {
            width: 50px;
            max-width: 50px;
        }
    .general_webgrid table td.column150
        {
            width: 150px;
            max-width: 150px;
        }
        .general_webgrid table td.column100
    {
        width: 100px;
        max-width: 100px;
    }

    .ellipsis
    {
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap; 
      } 
```

我希望它具有指定的宽度，如果内容更宽，省略号属性会对其生效。它在 Chrome 中运行良好。但是在 IE 中，我定义的宽度被忽略了，单元格采用了其中内容的宽度。

我正在使用 ASP MVC 3 的 WebGrid。我该怎么做才能让它在 IE 中也能工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T20:07:54.503

尝试添加`width: 100%`到您的`.ellipsis`风格...根据 quirksmode.org 博客 ( [http://www.quirksmode.org/css/textoverflow.html](http://www.quirksmode.org/css/textoverflow.html) ) 上的此帖子，它可能有助于解决您的问题。

# mysql - #1064 - 您的 SQL 语法有错误

> ID：10389790
> 
> 赞同：0
> 
> 时间：2012-04-30T19:57:56.223
> 
> 标签：mysql

我正在尝试根据我的软件中的说明设置表格。这是我输入的：

```
CREATE TABLE `swd_account` (
`pk_account` int(11) NOT NULL auto_increment,
`name` char(16) NOT NULL default '',
`isact` tinyint(4) NOT NULL default '1',
PRIMARY KEY (`pk_account`)
) TYPE=MyISAM;

CREATE TABLE `swd_user` (
`pk_user` int(11) NOT NULL auto_increment,
`fk_account` int(11) NOT NULL default '0',
`email` varchar(40) NOT NULL default '',
`name` varchar(40) default NULL,
`isact` tinyint(4) NOT NULL default '1',
`datereg` date default NULL,
`days` tinyint(4) default '0',
`datelastsend` date default NULL,
`messlastsend` int(11) default NULL,
`countsend` int(11) NOT NULL default '0',
`undelivered` tinyint(4) default NULL,
PRIMARY KEY (`pk_user`),
KEY `fk_account` (`fk_account`,`email`,`isact`),
KEY `email` (`email`)
) TYPE=MyISAM; 
```

这是我收到的信息：

```
Error
SQL query:

CREATE TABLE  `swd_account` (

 `pk_account` INT( 11 ) NOT NULL AUTO_INCREMENT ,
 `name` CHAR( 16 ) NOT NULL DEFAULT  '',
 `isact` TINYINT( 4 ) NOT NULL DEFAULT  '1',
PRIMARY KEY (  `pk_account` )
) TYPE = MYISAM ;

MySQL said: 

#1064 - You have an error in your SQL syntax; 
check the manual that corresponds to your MySQL server 
version for the right syntax to use near 'TYPE=MyISAM' at line 6 
```

任何关于可能出错的建议将不胜感激。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-30T20:07:57.217

It would help if you pointed out which version of MySQL you are using, but assuming it is 5.x, replacing **TYPE** with **ENGINE** (ie ENGINE=MYISAM) should do the trick. This is because TYPE is deprecated in newer versions of MySQL and no longer used.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T20:06:38.427

I bet they meant `ENGINE = MyISAM`.

# highcharts - 将情节线添加到两个 highstock 窗格之一

> ID：10389794
> 
> 赞同：0
> 
> 时间：2012-04-30T19:58:15.037
> 
> 标签：highcharts, highstock

xAxis 上的以下 plotLine 对象正在向两个窗格中添加行我怎样才能使此代码仅在第一个窗格中添加一行？在不影响其他窗格的情况下，对 plotBands 也有同样的影响谢谢

这是代码

```
 xAxis: {

              plotLines: [{
              value: 1180656000000,
                  color: 'green',
                  dashStyle: 'shortdash',
                  width: 2,
                  label: {
                      text: 'prerinse'
                  }
              }, {
                  value: 1256227606000,
                  color: 'red',
                  dashStyle: 'shortdash',
                  width: 2,
                  label: {
                      text: 'postrinse'
                  }
              }]

              },

                  yAxis: [{
                      title: {
                          text: 'OHLC',
                      },

                      height: 200,
                      lineWidth: 2
                  }, {
                      title: {
                          text: 'Volume'
                      },
                      top: 300,
                      height: 100,
                      plotLines: [{value:500}],
                      offset: 0,
                      lineWidth: 2
                  }],

                      series: [{
                          type: 'candlestick',
                          name: 'AAPL',
                          data: ohlc,
                          dataGrouping: {
                              units: groupingUnits
                          }
                      }, {
                          type: 'column',
                          name: 'Volume',
                          data: volume,
                          yAxis: 1,
                          dataGrouping: {
                              units: groupingUnits
                          } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T13:27:49.593

```
series: [{
type: 'candlestick',
name: 'AAPL',
data: ohlc,
dataGrouping: {
units: groupingUnits
}
}, 
{
type: 'column',
name: 'newline',
data: newdata,
yAxis: 1, <-This
dataGrouping: {
units: groupingUnits
},

{
type: 'column',
name: 'Volume',
data: volume,
yAxis: 1,
dataGrouping: {
units: groupingUnits
} 
```

这会将第二个窗格添加到 y 轴。如果将代码中的尖线更改为“xAxis: 0”，则新窗格将添加到 x 轴。

# javascript - 用于在 javascript 中获取 ruby 变量

> ID：10389795
> 
> 赞同：0
> 
> 时间：2012-04-30T19:58:15.037
> 
> 标签：javascript, ruby-on-rails

hy

我在 stackoverflow 或文档上阅读了很多关于此的问题，但我没有找到我的解决方案 snif..

在我的变量 window.description 我可以看到内容（window.description ="<span style="font-weight: bold;" ），他没有显示它，我不明白为什么？

```
 1.< script type="text/javascript">

           window.description  ='<%= @item.description %>';

 document.getElementById('editorResult').innerHTML = "<h2>Code display</h2><pre>" +     window.description+ "</pre>"; 
```

```
 <div id="editorResult">
   editorResult  =>
 </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T20:19:23.483

尝试使用@item.description.html_safe。我的猜测是 rails 正在删除您描述中的 HTML。

您可能会遇到一些转义问题。只需使用 html_safe 和 'escape'/'unescape' 即可。

# c# - 在第一个空格处拆分字符串

> ID：10389805
> 
> 赞同：26
> 
> 时间：2012-04-30T19:59:00.467
> 
> 标签：c#, split

我试图在第一个空格处分割一个字符串，只保留第二个一半。因此，如果输入是“1\. top of steel”，则输出将是“top of steel”。我正在使用这里的几个不同示例，但无法正常工作。想法？谢谢。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-04-30T20:04:21.467

```
var myString = "1\. top of steel";
var newString = myString.Remove(0, myString.IndexOf(' ') + 1); 
```

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2012-04-30T20:07:30.110

这很容易使用`Substring`：

```
string myString = "1\. top of steel";
string newString = myString.Substring(myString.IndexOf(' ') + 1); 
```

这将为您提供一个从第一个空格开始的新字符串。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-30T20:05:20.607

只需使用以下内容，

```
string[] stringTokens = originalString.Split(new char[] {' '}, 2, StringSplitOptions.RemoveEmptyEntries);
if(stringTokens.Length >= 2)
    newString = stringTokens[1]; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-30T20:01:01.903

你可以这样做：

```
string myString = "1\. top of steel"; //replace this with the input
string resultString = myString.IndexOf(' ') > -1
    ? myString.Substring(myString.IndexOf(' ') + 1)
    : myString; 
```

# c# - 在 .NET 3.5 中将类型十进制转换为十六进制（字符串）

> ID：10389807
> 
> 赞同：2
> 
> 时间：2012-04-30T19:59:08.457
> 
> 标签：c#

我正在尝试将十进制转换为十六进制作为字符串。我已经到处寻找解决方案，但我能找到的只是 Int 或 long 到 Hex。使用下面的代码时，我收到“格式说明符无效”错误。

```
 Decimal decValue = 18446744073709551615
    string hexValue = decValue.ToString("X"); 
```

我还研究了将十进制转换为字节数组，然后转换为十六进制，但我也没有做到这一点。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-30T20:05:55.380

由于您使用的是 .NET 3.5，那么适用于 .NET 2.0+ 的[IntX怎么样？](http://intx.codeplex.com/)

```
var intx = new Oyster.Math.IntX(decValue.ToString());
intx.ToString(16); 
```

对于 .NET 4.0+ 使用`System.Numerics`（记得包含`System.Numerics.dll`）

```
Decimal decValue = 18446744073709551615;
var bigValue = new BigInteger(decValue);
bigValue.ToString("X"); 
```

当然，这会忽略任何非整数部分。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T21:04:55.833

由于您使用的是 .NET 3.5，因此您必须手动完成。你可以用一个扩展方法把它包装得漂亮而整洁：

```
public static class DecimalHelper {
public static string ToHexString( this Decimal dec ) {
    var sb = new StringBuilder();
    while( dec > 1 ) {
        var r = dec % 16;
        dec /= 16;
        sb.Insert( 0, ((int)r).ToString( "X" ) );
    }
    return sb.ToString();
    }
} 
```

然后像这样调用它：

```
Decimal dec = 18446744073709551615;
var hex = dec.ToHexString(); 
```

# c# - 使用 HTTPS 和 httpWebRequest

> ID：10389808
> 
> 赞同：15
> 
> 时间：2012-04-30T19:59:13.620
> 
> 标签：c#, asp.net, ssl, https

我将 httpwebrequests 发送到 paypal api 服务器，这使用 https。我做了你通常对 http 请求所做的正常事情，并且它起作用了。我是否需要做任何特别的事情才能正确使用 https，或者在请求 URL 中指定 https 以使其正常工作？

谢谢！

顺便说一句，我的请求是从我的服务器发送的，因此加密它们并不像从客户端计算机发送它们那样重要，但我仍然想正确地做。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-30T20:03:30.280

在使用`HttpWebRequest`. 它不需要对 https 请求进行特殊处理。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-04-30T20:50:02.790

只要证书没有问题，将 URL 更改为 https 就足够*了*。

SSL 将在证书方面检查 3 件事：

1.  证书已颁发给您正在访问的 URI
2.  证书未过期
3.  证书由受信任的机构颁发（例如：威瑞信）

在这些标准中，#3 是最常见的失败检查。您可以以编程方式忽略任何或所有这些错误（风险自负）。[这](https://stackoverflow.com/questions/2675133/c-sharp-ignore-certificate-errors)是有关如何执行此操作的示例。

也就是说，如果这是针对 Paypal api，您不应该有任何证书错误。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-07-13T11:07:51.833

`SetCookies(Uri, string)`如果您使用类服务器的方法，请使用 https`CookieContainer`将拒绝您的请求！要在登录后使用 cookie，您必须使用**单个 cookie 对象**！

# asp.net-mvc - ASP.NET MVC 动态定义 ckfinder baseurl？

> ID：10389810
> 
> 赞同：-1
> 
> 时间：2012-04-30T19:59:18.673
> 
> 标签：asp.net-mvc, ckfinder

我可以在下面的代码中动态定义上传和浏览baseurl到ckfinder吗？（当我创建 ckfinder 时）

```
CKFinder.setupCKEditor(null, '@Url.Content("~/ckfinder/")'); 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T10:57:11.200

在 ckeditor 配置文件中我添加了这个。

```
baseurl="/uploads/images/" + System.Web.Security.Membership.GetUser().ProviderUserKey; 
```

# javascript - 单击按钮但未显示错误消息

> ID：10389813
> 
> 赞同：0
> 
> 时间：2012-04-30T19:59:22.887
> 
> 标签：javascript, jquery, asp.net, postback

一个很奇怪的问题，我有一个aspnet web表单的文本框。我使用 jquery 来验证文本框。如果未通过验证，则文本框会显示红色警告。到目前为止，如果我单击页面中的任何位置并假设我打算输入无效文本进行测试，那么一切都很好。

我的代码：（**更新**）

```
<script type="text/javascript">
    $(document).ready(function () {
        $("#<%=TextUserName.ClientID%>").blur(function () {
            ValidateUserNameAfterBlur();
        });
    });

    function ValidateUserName() {
        $.ajax({ type: "POST",
            url: "../UserNameWebService.asmx/ValidateUserName",
            data: "{'strUsername': '" + $("#<%=TextUserName.ClientID%>").val() + "'}",
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            async: false,
            success: function (data) {
                return data;
            }
        });
    }

    function ValidateUserNameBeforeSubmitting() {
        isValid = ValidateUserName();
        return isValid;
    }

    function ValidateUserNameAfterBlur() {
        isValid = ValidateUserName();
        $('#TextUserNameError').toggle(!isValid);
    }

</script> 
```

其他一些标记代码：

```
 <td class="style4">
            <asp:TextBox ID="TextUserName" runat="server"></asp:TextBox>
        </td>
        <td>
            <span id="TextUserNameError" style="display:none; color:Red; font-weight:bold;">This is not a valid username</span>
        </td> 
```

但是网页上有一个 asp.net 按钮。单击按钮后，错误确实出现了，但很快就消失了。

按钮的代码：

```
 <p>
    <asp:Button ID="btnSave" runat="server" Text="SaveChanges" OnClick="btnSave_Click"
        CssClass="saveButton" ValidationGroup="answer" OnClientClick="return ValidateUserNameBeforeSubmitting();" />
</p> 
```

我相信这是由回发引起的，但没有任何线索。感谢专家的帮助。

**添加图像** ![调试](../Images/83cac8104c7918286ba520baa262825d.png)

和 ![数据.d](../Images/a0e05ae8568545abe09ea13254aa8c55.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T20:11:32.740

我相信你是对的，这是因为当你点击按钮时（我假设它是一个提交按钮？）页面执行回发。当 javascript 验证失败时，防止页面回发的一种简单方法是让 javascript 函数返回“false”。这将阻止页面执行回发。

也就是说，我不确定您为什么要将用户名验证连接到 document.click。似乎您的页面将在用户每次单击页面时执行验证，无论该值是否已更改。

对用户输入的文本执行客户端验证的公认方法是当相关控件失去焦点时。在 JQuery 中，这将是`blur()`. 这样，您的验证仅在用户完成更改控件中的值时运行。

这将是您的按钮代码（注意`OnClientClick`）：

```
<asp:Button ID="btnSubmit" runat="server" OnClientClick="return ValidateUserNameBeforeSubmitting();" /> 
```

您的 javascript 应如下所示：

```
 $(document).ready(function () {
        $("#<%=TextUserName.ClientID%>").blur(function () {
            ValidateUserNameAfterBlur();
        });
    });

    function ValidateUserName() {
        $.ajax({ type: "POST",
            url: "../UserNameWebService.asmx/ValidateUserName",
            data: "{'strUsername': '" + $("#<%=TextUserName.ClientID%>").val() + "'}",
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            async: false,
            success: function (data) {
                return data;
            }
        });
    }

    function ValidateUserNameBeforeSubmitting() {
        isValid = ValidateUserName();
        return isValid;
    }

    function ValidateUserNameAfterBlur() {
        isValid = ValidateUserName();
        //DISPLAY ERROR MESSAGE
    } 
```

[更新]

工作示例 - 值“123”将返回 true 以进行验证。其他所有内容都将返回 false。

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
    <script src="http://ajax.Microsoft.com/ajax/jQuery/jquery-1.4.1.min.js" type="text/javascript"></script>
    <script type="text/javascript">
    $(document).ready(function () {
        $("#TextUserName").blur(function () {
            ValidateUserNameAfterBlur();
        });
    });

    function ValidateUserName() {
        return $("#TextUserName").val() == "123";

//      $.ajax({ type: "POST",
//          url: "../UserNameWebService.asmx/ValidateUserName",
//          data: "{'strUsername': '" + $("#<%=TextUserName.ClientID%>").val() + "'}",
//          contentType: "application/json; charset=utf-8",
//          dataType: "json",
//          async: false,
//          success: function (data) {
//              return data;
//          }
//      });
    }

    function ValidateUserNameBeforeSubmitting() {
        isValid = ValidateUserName();
        $('#TextUserNameError').toggle(!isValid);
         return isValid;
    }

    function ValidateUserNameAfterBlur() {
        isValid = ValidateUserName();
        $('#TextUserNameError').toggle(!isValid);
    }

</script></head>
<body>
    <form id="form1" runat="server">
    <div>
        <asp:TextBox ID="TextUserName" runat="server" />
        <div ID="TextUserNameError" style="display: none;" >Ooops!</div>
        <br />
        <asp:Button UseSubmitBehavior=true ID="btnSubmit" runat="server" OnClientClick="return ValidateUserNameBeforeSubmitting();" />
    </div>
    </form>
</body>
</html> 
```

# python-2.7 - 使用 Python 将制表符分隔的文本文件重新格式化为另一个程序可以使用的格式

> ID：10389820
> 
> 赞同：1
> 
> 时间：2012-04-30T19:59:56.600
> 
> 标签：python-2.7

我有一个程序可以创建 XYZ 文件的输出，但是由于某种原因，输出的文件是 YXZ，我需要切换 x 和 y 列。此外，x 和 y 值在末尾有半球标记。例子：

```
00.000000W  000.000000S 0.000 
```

我需要删除这些半球标记并将这些值乘以 -1 以使它们成为真正的十进制度格式，以便我可以将它们读入我的下一个程序。任何以“S”或“W”结尾的值都需要乘以-1，任何以“N”或“E”结尾的值都可以简单地删除。如果可以做到这一点，它将为我节省无数小时。我可以使用 excel 执行此操作，但有时我的文件太大，无法使用 excel。请任何我能得到的帮助都会很棒。

这是我到目前为止所得到的，它可以切换 X 和 Y 值，但是对于以“S”或“W”结尾的任何值，我坚持删除并乘以 -1。

```
infile="my.txt"
outfile="my_edited.txt"

read_infile=open(infile,'r')
write_outfile=open(outfile,'w')

reader=csv.reader(read_infile, delimiter='\t')
writer=csv.writer(writting, delimiter='\t')

for row in reader:
    writer.writerow([row[1], row[0], row[2]]) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T07:32:49.273

此答案将所有内容都保留为字符串，并假设附加`"-1"`到字符串的开头足以使其为负数。请注意，这`''.join(["Hello, ", "World!"])`实际上是连接字符串的 Pythonic 方式，它`-1`检索字符串中的最后一个字符：`[1,2,3][-1] == 3`.

```
infile="my.txt"
outfile="my_edited.txt"

read_infile=open(infile,'r')
write_outfile=open(outfile,'w')

reader=csv.reader(read_infile, delimiter='\t')
writer=csv.writer(write_outfile, delimiter='\t')

for row in reader:
    lng = row[0][:-1]
    lat = row[1][:-1]

    if row[0][-1] == 'W':
        lng = ''.join(["-1", lng])

    if row[1][-1] == 'S':
        lat = ''.join(["-1", lat])

    writer.writerow([lat, lng, row[2]]) 
```

# python - 生菜循环进口地雷

> ID：10389825
> 
> 赞同：0
> 
> 时间：2012-04-30T20:00:35.817
> 
> 标签：python, import, project, pydev, lettuce

我在 PyDev 中设置了 3 个项目，它们的项目引用列表中都有彼此。出于说明目的：

```
proj_f
    pack_foo
        mod_fooa (contains class Fooa)
        mod_foob (contains class Foob)
    mod_faa (contains class Faa)
    pack_fii
        mod_fiia (contains class Fiia)
        mod_fiib (contains class Fiib)
proj_b
    mod_bar (contains function func_bar)
    pack_baz
        mod_baza (contains class Baza)
        mod_bazb (contains class Bazb)
proj_t
    tester (what I'm running from) 
```

再举一个例子，测试人员：

```
from pack_foo.mod_fooa import Fooa
from pack_fii.mod_fiia import Fiia
from mod_bar import func_bar
func_bar(Fooa(), Fiia()) 
```

和 mod_bar：

```
from pack_foo.mod_fooa import Fooa
from pack_fii.mod_fiia import Fiia
def func_bar(fooa, fiia):
    if not fooa:
        fooa = Fooa()
    if not fiia:
        fiia = Fiia()
    fooa.do_magic()
    fiia.do_magic() 
```

我所看到的是，`ImportError: cannot import name`当我从 tester 调用它们时，来自 foo 的一些导入将进入 mod_bar （至关重要的是，一些但不是全部）。如果我只运行 mod_bar，导入工作正常，如果我从 mod_bar 删除依赖项和导入并从测试器运行它，它工作正常；只有当一个类的子集从 f 导入到 b 和 t 并且我从 t 运行时，它才会中断。我已经尝试阅读有关导入如何工作的文档并在谷歌上搜索解决方案，但我没有找到任何可以指出我正确方向的东西。我有一种感觉，这与 Python 内部的一些晦涩的部分有关，但我不知道那是什么。

`tester`我认为这准确地代表了正在发生的事情，尽管从to的引用`mod_bar`是间接的（`tester`是我在处理代码时用来监视代码的文件，而`mod_bar`实际上是生菜，这会增加一层复杂性地形文件，而其他一些正在调用的模块正在加载生菜`tester`。）任何人都可以为我提供至少一些地方来开始寻找有关如何解决此问题的信息吗？

编辑：

我正在查看更多内容，特别是堆栈跟踪：

```
Traceback (most recent call last):
  File "C:\Python27\Lib\site-packages\lettuce\__init__.py", line 53, in <module>
    terrain = fs.FileSystem._import("terrain")
  File "C:\Python27\Lib\site-packages\lettuce\fs.py", line 74, in _import
    module = imp.load_module(name, fp, pathname, description)
  File "C:\Users\adminsetup\workspace\nytd_lettuce_lib\terrain.py", line 6, in <module>
    from session.session import Session
  ImportError: cannot import name Session 
```

`terrain = fs.FileSystem._import("terrain")`是否会导致`lettuce.__init__()`循环进口让我感到头疼？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T21:26:04.827

所以是的，我得到了一个循环导入。问题是，当你`import lettuce`执行 lettuce.py 时，它会动态导入`terrain`.

发生在我身上的是我有一个 Session 类，它导入 AbstractSession 反过来导入 LoggerManager ，它包含一个`logging.Handler`子类，它将日志消息推送到队列中`world`，因此 logger_manager 确实`import lettuce`可以访问`world`。我还希望我的所有测试都从启动 Session 对象开始，所以我`@beforeeach`在地形中有一个方法可以在每次测试之前启动 Session，这意味着在地形中导入 Session。

当然，这意味着每次我在任何地方的任何文件中导入 Session 时，都会触发整个事件链（Session>AbstractSession>lettuce>terrain>Session），从而在地形尝试加载时使 session.session.Session 未初始化它了。

我认为我最好的解决方法是粘贴与地形中的世界相关联的日志处理程序和日志缓存，然后让地形附加处理程序本身。幸运的是，这对我来说是一个选项，因为日志记录是全局访问。这实际上在一定程度上改善了我的框架的划分，因为核心库中不会有任何关于生菜的代码，这些都将在生菜库中关闭。尽管如此，最好的生菜没有内置这些​​地雷......

tl；博士，如果您想尝试做的不仅仅是真正的基本测试套件，请避免使用生菜。

# php - 为 Wordpress 循环创建 PHP 计数器/规则

> ID：10389826
> 
> 赞同：2
> 
> 时间：2012-04-30T20:00:36.303
> 
> 标签：php, wordpress, loops, twitter-bootstrap

我的 Bootstrap 网格是 910 像素，跨越 15 列。我的 Wordpress 循环中的每个帖子都跨越 5 列。

这是静态代码：

```
<div class="container">     

    <div class="row">

        <div class="span5">
            <p>Post title and image</p>
        </div>

        <div class="span5">
            <p>Post title and image</p>
        </div>

        <div class="span5">
            <p>Post title and image</p>
        </div>

    </div>

</div> 
```

然后大致是循环的样子：

```
<div class="container">     

    <?php theloop; ?>

</div> 
```

除非有更好的方法，否则我想我想告诉 Wordpress 说：

*   制作一个变量 $counter
*   对于每个帖子，将值增加一
*   如果值为 1，则以`div class="row"`
*   如果值为三，则以`</div>`（关闭行）开始帖子
*   达到 3 后将 $counter 重置为零并重新开始

我不知道该怎么做。我之前曾就类似问题寻求过帮助，但我对 PHP 完全陌生，我非常感谢您能清楚地了解故障和解释。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T21:02:29.877

以某种方式尝试如下：

```
 <?php 
 $i=1;
 echo '<div class="row">';
 if (have_posts()) : ?>
           <?php while (have_posts()) :   
           // do stuff ...
           the_post();
           if($i % 3 == 0)
               echo '</div><div class="row">';
           $i++; endwhile; ?>
 <?php endif; ?> 
```

我没有测试它，但不知何故像这样。使用[模](http://php.net/manual/en/language.operators.arithmetic.php)函数。

# visio - 在 Visio 中表示数据拉取和推送

> ID：10389827
> 
> 赞同：2
> 
> 时间：2012-04-30T20:00:44.603
> 
> 标签：visio

我正在尝试创建一个 Visio 图表，用于通过 Web 服务从数据库中提取和推送数据。

在 Visio 中如何表示数据拉取和推送？

谢谢

# ios - 仅支持带摄像头的 iOS 设备的兼容性例程

> ID：10389831
> 
> 赞同：1
> 
> 时间：2012-04-30T20:00:58.443
> 
> 标签：ios, ios5

我正在开发一个在 iOS 设备上使用相机并且需要 iOS5+ 的通用应用程序。

我正在尝试解决全部*多少相机/可能的图像尺寸/视频*兼容问题。在搜索了一下之后，我突然想到有人可能已经以易于访问的形式收集了所有这些东西的数据 - 或者更好的是，编写了一些在运行时使用的例程。我需要做一些标准的事情——弄清楚有多少相机、图像分辨率等。

我知道所有这些信息都可以通过 API 获得，并进行一些挖掘。在我重新发明这个轮子之前，有没有人写过这种东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T20:17:47.960

这应该正是您正在寻找的：

[https://github.com/MugunthKumar/DeviceHelper](https://github.com/MugunthKumar/DeviceHelper)

也就是说，如果您使用的是 UIImagePicker 之类的东西，它有自己的功能，例如：

```
if ([UIImagePickerController isSourceTypeAvailable:UIImagePickerControllerSourceTypeCamera]) 
```

# c# - 试图将手动 DataTable 保存到我的 SQL Server CE 表中

> ID：10389837
> 
> 赞同：2
> 
> 时间：2012-04-30T20:01:33.963
> 
> 标签：c#, sql-server-ce

在我的数据库中，我有一个带有主键标识列的表和 3 个其他列，如下所示。

我想手动创建一个`DataTable`并将其保存到我的 SQL Server CE 数据库中。任何人都可以帮我调整我的代码吗？

```
DataTable table1 = new DataTable("MyTable1");
table1.Columns.Add("LastName");
table1.Columns.Add("FirstName");
table1.Columns.Add("SortColumn");
table1.Rows.Add("Doe", "John", 1);
table1.Rows.Add("Doe", "Mary", 2);

DataSet ds = new DataSet("notCritical1");
ds.Tables.Add(table1);

using (SqlCeConnection con = new SqlCeConnection(TestClickOnceApp.classes.ClassDatabase.m_connectionString))
{
    con.Open();
    SqlCeDataAdapter da = new SqlCeDataAdapter("Select * from MyTable1", con);
    da.Fill(ds, "MyTable1");
    da.Update(ds, "MyTable1");
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T20:27:18.100

您根本不需要数据集。只需使用 an`INSERT`将记录放入数据库中。它应该看起来像这样：

```
using (SqlCeConnection connection = new SqlCeConnection(connectionString)
{
    connection.Open();
    SqlCeCommand command = connection.CreateCommand();

    command.CommandText = "INSERT INTO <TableName> LastName, FirstName, SortColumn VALUES 'Doe', 'John', '1'";
    command.ExecuteNonQuery();

    connection.Close();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T20:19:25.213

我没有 SqlCompact 来测试，但我想你可以写这样的代码

```
using (SqlCeConnection con = new SqlCeConnection(connectionString))   
{   
    con.Open();   
    SqlCeCommand cmd = new SqlCeCommand("Select * from MyTable1 Where 1=0", con);
    SqlCeDataAdapter da = new SqlCeDataAdapter();
    da.SelectCommand = cmd;
    SqlCeCommandBuilder cb = new SqlCeCommandBuilder(da);
    da.Update(table1);
} 
```

无需使用数据集

有关基类方法**DbDataAdapter.Update(DataTable t)**的更多详细信息，请[参见此处](http://msdn.microsoft.com/en-us/library/z1z2bkx2.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T20:13:01.087

如果我理解正确，你就试错了。您必须执行一条 SQL 语句。DataTable / DataSet 不代表数据库本身。也许这可以帮助你[链接](http://arcanecode.com/2007/01/26/create-a-table-in-sql-server-compact-edition-with-c/)

# javascript - 悬停html文本更改上的Jquery

> ID：10389845
> 
> 赞同：0
> 
> 时间：2012-04-30T20:02:12.887
> 
> 标签：javascript, jquery, hover, jquery-hover

我有一个像下面这样的按钮。我有一个按钮列表。当用户单击它时，我运行一个 javascript 函数并发出一个 ajax 请求，如果请求响应成功，则我更改按钮标签的状态属性。我将其从 1 更改为 2。

当属性状态 = 1 时，我希望用户在将鼠标悬停在按钮上时看到一些文本。

当属性 status=2 时，我不希望他在按钮悬停时看到任何内容。

我尝试如下，但在 status=2 之后，悬停时按钮文本仍然会发生变化。我怎样才能解决这个问题？

```
<button onclick="dosomething()" id="someid" status="1">name</button>

<script>
function dosomething(){
    $.ajax({
        type:"GET",
        url:"somefile.php",
        success : function(data) {
            if (data == '200') {
                $('#someid').attr('status', '2');
            }
        },
        error : function() {
            alert('error');
        },
    })
}

$(document).ready(function() {
    updateHoverStates()
});

$(document).change(function () {
    updateHoverStates()
});

function updateHoverStates() {
    $('button[status=1]').hover(
        function () {
            $(this).text('You are hovering');
        },
        function () {
            $(this).text('You are not hovering');
        }
    );
}
</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T20:09:58.937

这可能有效，这样事件在每次调用时都会检查状态属性，而不是在绑定时只检查一次。

```
function updateHoverStates() {
    $('button[status]').hover(
        function () {
            if($(this).attr('status') == '1')
                $(this).text('You are hovering');
        },
        function () {
            if($(this).attr('status') == '1')
                $(this).text('You are not hovering');
        }
    );
} 
```

作为旁注，我相信`data-status`这是一种更好地支持自定义属性的方式，这也将允许使用 of`.data('status')`而不是`.attr('status')`.

或者，您可以使用 CSS 来模拟

```
button[status="1"]:hover {
    //possible attributes here
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T20:15:34.360

jsFiddle：http: [//jsfiddle.net/ajzsv/20/](http://jsfiddle.net/ajzsv/20/)

```
<button onclick="dosomething()" id="someid" status="1">name</button>

<script>
function dosomething()
{
    $('#someid').attr('status', '2');
    $('#someid').unbind('hover');
}

$(document).ready( function()
{
    $('button').each( function()
    {
        $(this).hover(
        function ()
        {
            $(this).text('You are hovering');
        },
        function ()
        {
            $(this).text('You are not hovering');
        });
    });
});
</script>​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T20:04:19.330

`change`事件不会冒泡到文档中，因此`updateHoverStates`可能不会被第二次调用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-30T20:06:47.593

您曾经为与选择器匹配的所有按钮设置了悬停功能`button[status=1]`。您稍后更改了该`status`属性，但这并没有将悬停事件侦听器与这些按钮分离。

在您设置的功能中

```
$('#someid').attr('status', '2'); 
```

您应该手动删除事件侦听器。

```
$('#someid').unbind('hover'); 
```

# ajax - 如何找出启动ajax请求的代码

> ID：10389846
> 
> 赞同：14
> 
> 时间：2012-04-30T20:02:14.460
> 
> 标签：ajax, json, firefox-addon, firebug, httpfox

我有 MVC 视图，其中包含数十个 javascript 文件。有一些从页面发起的 ajax 请求。我想知道调用是从哪个特定的 js 文件发起的。

我花了一些时间探索 Firefox 插件——Firebug 和 HttpFox。两者都显示了 http 请求、标头、cookie 和其他大量信息，但没有关于发起 ajax 请求的来源。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-30T20:07:24.257

我一直在发现一些 Chrome 最新的调试功能非常有用。在启动应用程序或执行相关操作之前，调出检查器 (Ctrl+Shift+I) 并切换到网络选项卡。每个 http 请求都会在 Initiator 列中显示请求的来源。如果 javascript 发起了请求，它会显示文件名和行号，并带有一个可点击的链接以直接访问它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-18T16:56:51.650

chrome 开发者工具中另一个很好的选择是**XHR Breakpoint**。按 F12，选择源选项卡，在右侧的**XHR 断点**下添加一个新的条件断点条件，方法是指定您希望在进行 ajax 调用的 URL 中找到的文本。它将在任何包含 URL 中指定的文本的 ajax 调用上停止。您可以在[此 URL](https://developers.google.com/chrome-developer-tools/docs/scripts-breakpoints)上尝试一下（***在 XHR 上****查找标题***断点）**

# openerp - OpenERP OpenObject 流程

> ID：10389848
> 
> 赞同：1
> 
> 时间：2012-04-30T20:02:25.753
> 
> 标签：openerp

我阅读了有关[流程](http://doc.openerp.com/v6.0/book/7/7_18_Process/index.html)的信息，我认为它们对用户有很大帮助。现在我想为我的实验模块创建一个流程。我正在查看 sale_process.xml 并且第一条记录引用了 sale 模块。我在哪里可以找到`model_sale_order`？

```
<record id="process_process_salesprocess0" model="process.process">
    <field eval="1" name="active"/>
    <field name="model_id" ref="sale.model_sale_order"/>
    <field eval="&quot;&quot;&quot;Sales&quot;&quot;&quot;" name="name"/>
</record> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T17:44:58.123

我相信这是指向`ir_model_data`名称为“model_sale_order”和模块“sale”的记录。该记录又指向`ir_model`sale_order 表的记录，该表的每个字段都有一个子记录。所有这些记录都是根据[`sale_order`类](http://bazaar.launchpad.net/~openerp/openobject-addons/trunk/view/6769/sale/sale.py#L49)中定义的详细信息生成的。每个模型类的关键特性之一是[`_columns`字典](http://bazaar.launchpad.net/~openerp/openobject-addons/trunk/view/6769/sale/sale.py#L199)。[开发人员文档在其关于对象、字段和方法](http://doc.openerp.com/v6.0/developer/2_5_Objects_Fields_Methods/index.html)的章节中有很好的描述。

如果您要向标准“sale.order”模型（继承）添加一些字段，那么您的模块将使用相同的“sale.model_sale_order”记录，并为您的新字段添加更多子记录。添加到流程定义时，您可以继续引用“sale.model_sale_order”。

如果您正在创建一个单独的模型而不是继承，那么不要在您的模型类中使用“sale.order”名称。使用类似“mysale.order”的名称。这将自动生成一个新的“mymodule.model_mysale_order”记录，您可以在流程定义中引用它。

# iphone - 如何知道我的应用使用了多少 iCloud 空间？

> ID：10389852
> 
> 赞同：6
> 
> 时间：2012-04-30T20:02:39.360
> 
> 标签：iphone, objective-c, ios, icloud

有没有办法查看我的应用程序正在备份到 iCloud，以及它消耗了多少内存？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T21:41:56.777

`Settings > iCloud > Storage & Backup > Manage Storage`将向您显示正在备份的总和。

iOS 会备份位于应用程序沙箱中的所有文件，但位于`<Application_Home>/Library/Caches`.

[技术问答 QA1719](http://developer.apple.com/library/ios/#qa/qa1719/_index.html)有更多关于如何在 iOS 5.0.1 及更高版本中**不**备份数据的信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T20:19:55.747

如果你只是想看，你可以进入设置->iCloud->存储和备份->管理存储。

在您的 Mac 上，您可以浏览到“ `~/Library/Mobile Documents`”并查看存储在云中的内容，包括事务日志（iCloud 和 Core Data）或文档（例如 Pages、Keynote）。需要明确的是，它显示了使用 iCloud 共享的 iPhone/iPad 上的内容内容，而不仅仅是使用 iCloud 的 Mac 应用程序。您可能需要在 Mac 上启用 iCloud 才能看到此文件夹。

# objective-c - how to draw all line in a NSMutableArray

> ID：10389859
> 
> 赞同：0
> 
> 时间：2012-04-30T20:03:45.723
> 
> 标签：objective-c, xcode, nsmutablearray, osx-lion

i have a class `NSApplicationDelegate` where i will populate the `NSMutableArray *coordinate` with a lot of coordinate x,y.

how i can tell to the `NSView`class to draw all inside the array? how i can pass the array to NSView class?

thankyou.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T23:58:50.840

这取决于坐标在数组中的存储方式，但您可能需要创建一个`NSBezierPath`：

```
// Maybe make bezPath an instance variable of your view?
NSBezierPath *bezPath = [NSBezierPath bezierPath];

[bezPath setLineWidth:1.0];
// set up other parameters here

[bezPath moveToPoint:NSMakePoint(firstX, firstY)];

// loop over your source coordinates
for (i = 0; i < ... etc ...)
{
    [bezPath lineToPoint:NSMakePoint(source[i].x, source[i].y)];
} 
```

在你的 NSView 的子类的`drawRect:`方法中，你可以有类似的东西：

```
- (void) drawRect:(NSRect) dirtyRect
{
    [[NSColor blackColor] set];
    [bezPath stroke];
} 
```

由于您没有提供足够的信息，因此缺少此代码的大部分内容，但是您应该对[Cocoa 绘图指南](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CocoaDrawingGuide/Introduction/Introduction.html#//apple_ref/doc/uid/TP40003290)有所了解，它可能会引导您朝着正确的方向前进。

# ember.js - Setting the class on a CollectionView item based on the value of the item

> ID：10389860
> 
> 赞同：1
> 
> 时间：2012-04-30T20:04:09.437
> 
> 标签：ember.js

I'm trying to set the class of my itemViewClass view based on an attribute of the value's content.

The code below produces:

```
<span id="ember326" class="ember-view spanValue">
<h5>
<script id="metamorph-32-start" type="text/x-placeholder">
Select
<script id="metamorph-32-end" type="text/x-placeholder">
</h5>
</span> 
```

class is set to 'spanValue' instead of the value from the content.

Any ideas?

thanks.

```
listHeaderView: Ember.CollectionView.create({
classNames: ['jobs-list-header', 'row'],
content: [
    Ember.Object.create({
        span: 'span1',
        label: 'Select'
    }),
    Ember.Object.create({
        span: 'span1',
        label: 'Status'
    }),
    Ember.Object.create({
        span: 'span1',
        label: 'Tax Year'
    }),
    Ember.Object.create({
        span: 'span3',
        label: 'Municipality'
    }),
    Ember.Object.create({
        span: 'span3',
        label: 'School District'
    }),
    Ember.Object.create({
        span: 'span1',
        label: 'Received'
    })
],
itemViewClass: Ember.View.extend({
    tagName: 'span',
    classNames: ['spanValue'],
    spanValue: function() {
        return this.get('content').span
    }.property(),
    template: Ember.Handlebars.compile('<h5>{{content.label}}</h5>')
}) 
```

}),

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T07:32:15.533

这里有几件事。

首先`return this.get('content').span`应该可能使用`return this.getPath('content.span')`或类似的。

但是，您的主要问题在于您应该使用`classNameBindings`，而不是`classNames`在定义 itemViewClass 时。

希望有帮助

# excel - VSTO Excel AddIn Using Enterprise Library Swallowing Exceptions

> ID：10389868
> 
> 赞同：3
> 
> 时间：2012-04-30T20:04:48.110
> 
> 标签：excel, vsto, enterprise-library

I have a VSTO Excel add-in created using VS2010, and I am using exception handling from Enterprise Library 5.0\. It works fine in development, but when I deploy using click once, errors are getting swallowed up by Enterprise Library. I suspect enterprise library is not getting called at all, because I did this:

```
try {
   //..
}
catch (Exception ex)
{
    Globals.ThisAddIn.Application.Cursor = Microsoft.Office.Interop.Excel.XlMousePointer.xlDefault;
    MessageBox.Show("handle error '" + ex.Message + "' with enterprise Policy");
    exManager.HandleException(ex, "Policy");
} 
```

And I get the dialog box, but no error gets logged or displayed or re-thrown.

Does anyone know why the enterprise libraries would fail to load? I checked, and they are strong signed.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T03:42:46.800

这可能是由于记录器配置有问题，如果不可能，请尝试 Debugger.Break 并进入 exManager.HandleException 调用尝试在 exManager.Handleexception 中弹出消息框并检查其中的参数值

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T16:53:13.330

Keith was right, it seems Excel swallows VSTO errors by default. I had to set the environment variable `VSTO_SUPPRESSDISPLAYALERTS` to 0.

# c++ - C++ - 如何编写代码来找到两个超平面的交点

> ID：10389869
> 
> 赞同：0
> 
> 时间：2012-04-30T20:04:57.390
> 
> 标签：c++, linear-algebra, intersection

在 n 维空间中，两个不平行的超平面将在比当前超平面维度低一维的超平面处相交。（两条线在一个点相交，两个平面在一条线上，两个 4D 超平面在一个平面上，等等）我知道至少有一种方法可以找到这个相交发生的位置：

```
v + w + x + y + z = 4
v + 2w + 3x + 4y + 5z = 7
then
v = 4 - w - x - y - z
gives
(4 - w - x - y - z) + 2w + 3x + 4y + 5z = 7
and finally
w + 2x + 3y + 4z = 3
is the hyperplane where the two higher dimensional hyperplanes intersect. 
```

我的问题是，我不完全了解如何将此方法转换为 C++ 程序。有什么建议么？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T20:07:40.030

目的是消除其中一个变量。程序是：

1.  选择要消除的变量之一（假设它是`v`）。
2.  将等式 A 中的所有系数乘以`v`等式 B 中的系数，反之亦然。
3.  从方程 B 的系数中减去方程 A 的系数。
4.  完毕。

# c# - Save HEX data to file

> ID：10389870
> 
> 赞同：0
> 
> 时间：2012-04-30T20:05:00.060
> 
> 标签：c#, file-io, hex

I'm having some problems saving the edited data to the original file... I want to save my string from textBox1 to the file it was loaded from.

Here is my "Load" function:

```
public static string getItemName(int index)
{
    FileStream str = File.OpenRead(Directory.GetCurrentDirectory() + ybi);
    BinaryReader breader = new BinaryReader(str);
    breader.BaseStream.Position = itemSectionStart;
    byte[] itemSection = breader.ReadBytes(itemSectionEnd);

    string itemName = BitConverter.ToString(itemSection, 808 * index + 7, 64).Replace("00", "").Replace("-", "");
    return hex2ascii(itemName);

} 
```

Here is my "Save" function:

```
public static bool setItemName(int index, string _FileName, byte[] _ByteArray)
{
    try
    {
        System.IO.FileStream _FileStream = new System.IO.FileStream(_FileName, System.IO.FileMode.Create, System.IO.FileAccess.Write);
        _FileStream.Write(_ByteArray, 808 * index + 7, _ByteArray.Length);
        _FileStream.Close();
        return true;
    }
    catch (Exception _Exception)
    {
        MessageBox.Show(Convert.ToString(_Exception.Message));
    }
    return false;
} 
```

Now, I think here is where the problem is, in the conversion from my HEX String to ByteArray...

```
private byte[] HexStringToByteArray(string hexString)
{
    int hexStringLength = hexString.Length;
    byte[] b = new byte[hexStringLength / 2];
    for (int i = 0; i < hexStringLength; i += 2)
    {
        int topChar = (hexString[i] > 0x40 ? hexString[i] - 0x37 : hexString[i] - 0x30) << 4;
        int bottomChar = hexString[i + 1] > 0x40 ? hexString[i + 1] - 0x37 : hexString[i + 1] - 0x30;
        b[i / 2] = Convert.ToByte(topChar + bottomChar);
    }
    return b;
}
private void button2_Click(object sender, EventArgs e)
{
    int index = listBox1.SelectedIndex;
    string hex = "";
    foreach (char c in textBox1.Text)
    {
        int tmp = c;
        hex += String.Format("{0:x2}", (uint)System.Convert.ToUInt32(tmp.ToString()));
    }
    writeValuePositions.setItemName(index, save_FileName, HexStringToByteArray(hex.ToUpper()));
} 
```

The byteArray that gets sent to writeValuePositions.setItemName isnt right I think... I get this Exception

```
---------------------------

---------------------------
Offset and length were out of bounds for the array or count is greater than the number of elements from index to the end of the source collection.
---------------------------
OK   
--------------------------- 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T20:27:20.787

试试这个：

```
private void button2_Click(object sender, EventArgs e)
{
    writeValuePositions.setItemName(index, save_FileName, HexStringToByteArray(textBox1.Text);
}

private byte[] HexStringToByteArray(string hexString)
{
   if (String.IsNullOrEmpty(hexString) || hexString.Length % 2 != 0)
   {
      throw new ArgumentException("Invalid parameter.");
   }

   byte[] array = new byte[hexString.Length / 2];

   for (int i = 0; i < hexString.Length / 2; i++)
   {
      array[i] = Convert.ToByte(hexString.Substring(i * 2, 2), 16);
   }
   return array;
} 
```

请记住约翰桑德斯在他的评论中向您提出的建议。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T20:21:27.057

我在 setItemName 中看到您的行存在潜在问题：

`_FileStream.Write(_ByteArray, 808 * index + 7, _ByteArray.Length);`

第二个参数是起始偏移量，第三个参数是要写入的字符总数。看起来您正在编写 808 * index + 7 个字节，并传递了数组的末尾。如果要写出数组的末尾，请从计数中减去偏移量。

# java - 使用事件队列在main()中执行一个简单的方法

> ID：10389873
> 
> 赞同：1
> 
> 时间：2012-04-30T20:05:09.530
> 
> 标签：java, swing, event-dispatch-thread, invokelater

我正在开发一个由某个人作为研究项目的一部分开发的 Java 应用程序。以下是主要方法：

```
 public static void main(String[] args) {
        java.awt.EventQueue.invokeLater(new Runnable() {

            public void run() {
                // Change the name of the application on a mac
                System.setProperty("com.apple.mrj.application.apple.menu.about.name",
                        "XX");

                // Use the top of the screen for the menu on a mac
                if( System.getProperty( "mrj.version" ) != null ) {
                    System.setProperty( "apple.laf.useScreenMenuBar", "true" );
                }

                try {
                    // Use system look and feel
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());

                } catch (Exception e) {
                    System.out.println("Cannot use system's look and feel; using Java's default instead");
                }

                // Create a new instance of XX
                XX.getInstance();
            }
        });

    } 
```

现在，我不明白为什么使用事件队列而不是仅仅使用

```
 public static void main(String[] args) {

        //the MAC stuff!!

        XX.getInstance();        //this line creates the UI and the event handlers
    } 
```

**使用EventQueue**有什么意义吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T20:10:05.540

[`EventQueue.invokeLater()`](http://docs.oracle.com/javase/7/docs/api/java/awt/EventQueue.html#invokeLater%28java.lang.Runnable%29)将在 GUI 线程（调度线程）上运行该 Runnable。您需要从调度线程运行对 GUI 的更新。不过，从您的代码来看，我认为您并不真正需要它，您只需要在后台线程中运行时使用它（例如，在事件的回调中）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T22:24:24.133

Swing（老实说，AWT）是线程敌对的。像绝大多数 GUI 库一样，它不是线程安全的，而且没有任何意义——微同步是不现实的。更糟糕的是，它使用有效的可变静态（实际上使用了一个奇怪的`AppContext`想法）在 AWT 事件调度线程 (EDT) 上运行工作。即使在“实现”之前设置 GUI 时也会发生这种情况。

应该不会有问题吧。也许在某些情况下，也许在 JRE 更新之后，它会带来一些问题。也许它只是一个不合适的插入符号。问题是，您是否甚至必须考虑冒这个风险，或者只是在标准的 Java 风格的冗长样板中拍打？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-01T00:38:34.333

属性应该在[*初始线程*](http://download.oracle.com/javase/tutorial/uiswing/concurrency/initial.html)上设置，然后 GUI 应该安排在*事件分派线程*上构建。[此处](https://stackoverflow.com/a/8956715/230513)显示了替代方法。

```
public static void main(String[] args) {
    // Change the name of the application on a mac
    System.setProperty(
        "com.apple.mrj.application.apple.menu.about.name", "XX");
    // Use the top of the screen for the menu on a mac
    if (System.getProperty("mrj.version") != null) {
        System.setProperty("apple.laf.useScreenMenuBar", "true");
    }

    java.awt.EventQueue.invokeLater(new Runnable() {

        @Override
        public void run() {
            // Create a new instance of XX
            XX.getInstance();
        }
    });
} 
```

# php - 在 PHP/Codeigniter 中使用多种语言进行动态图像选择

> ID：10389876
> 
> 赞同：0
> 
> 时间：2012-04-30T20:05:16.850
> 
> 标签：php, codeigniter

我正在向我的 Codeingiter/PHP 应用程序添加多语言支持，并且我正在尝试确定一种处理图像的好方法。

对于文本，我使用 i18n 和 Codeingiter 的本地语言类。

动态图像选择的建议代码：

```
if ($this->uri->segment(1) == 'br') { Brazilian image link } else { English image link } 
```

对于 CSS 文件中的图像，我计划将它们作为 PHP 文件处理，然后使用与上述相同的代码。

这种方法有任何潜在的缺陷吗？看起来很麻烦，想知道这些是否是一种更有效的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T08:07:29.793

我建议将语言存储在会话中并根据 URI 的段进行修改。`if`在构造函数中执行此操作将为您节省很多`else`代码。

为了动态加载图像，请使用以下命名约定：`imagename_lang.ext`、 IE: `homepage_br.jpg`。

加载将如下所示：`echo "homepage_$this->session->userdata('lang').jpg"`或者如果您首先将其存储在这样的变量中： `echo "homepage_$lang.jpg"`

对于 CSS 中的图像，将 CSS 文件分成三份：

1.  style.css - 存储所有对语言不敏感的样式。
2.  style_en.css - 存储英文版的所有图像。
3.  style_br.css - 存储巴西版本的所有图像。

这样，当您包含适当的 CSS 文件时，您只需对语言进行一次检查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T23:23:28.407

我没有看到任何使用 PHP 或其他脚本语言来获得可变 CSS 的方法。这个页面可能会给你一些想法。

[如何向 CSS 文件添加变量](http://net.tutsplus.com/tutorials/html-css-techniques/how-to-add-variables-to-your-css-files/)

# javascript - gnome 扩展网站如何工作？

> ID：10389885
> 
> 赞同：5
> 
> 时间：2012-04-30T20:05:36.987
> 
> 标签：javascript, ajax, gnome

[http://extensions.gnome.org](http://extensions.gnome.org)是如何工作的？该页面显示了我电脑上的所有扩展程序，您可以通过单击在线安装它们。该网站如何访问操作系统并在我的 shell 上进行更改？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T20:33:09.227

它与自定义的“GNOME Shell 集成”浏览器插件通信。有关胆量，请参见[https://extensions.gnome.org/static/js/dbus.js](https://extensions.gnome.org/static/js/dbus.js)。

请注意，出于明显的安全原因，它可能无法在 GNOME 站点之外运行。

# jquery - uploadify 3.1 completely broken

> ID：10389886
> 
> 赞同：0
> 
> 时间：2012-04-30T20:05:39.637
> 
> 标签：jquery, jquery-plugins, uploadify

Okay, I have used uploadify in the past version 2 and it worked great. Now I installed version 3.1 and copied the implementing code from their website to see if this version (3.1) will work but nothing i get a string of:

Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â

![what im seeing](../Images/a749ec354326a71dd87dc333774eedf2.png)

Now my code is as follows:

```
rel="stylesheet" type="text/css" href="uploadify.css"
script type="text/javascript" src="http://code.jquery.com/jquery-1.7.2.min.js"
script type="text/javascript" src="jquery.uploadify-3.1.min.js"
cript type="text/javascript"

$(function() {

  $('#file_upload').uploadify({

  'swf'      : 'uploadify.swf',

  'uploader' : 'uploadify.php',

  'debug' : true

  // Your options here
  });
}); 
```

What's going on, I know vers 2 has a swfobject.js and this version does not. am I missing something? I like this plugin and would like to use it and contribute to the development, if i can get this to work.

EDIT:

Now im not seeing the string of Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â but still no sign of uplodify working

![enter image description here](../Images/2130eae0849090485304525385421da6.png)

# iphone - 应用对 NSFetchRequests 无响应

> ID：10389887
> 
> 赞同：0
> 
> 时间：2012-04-30T20:05:47.303
> 
> 标签：iphone, ios, core-data, nsmanagedobjectcontext, nsfetchrequest

![核心数据模型](../Images/77236bb43f0974771b210caef0a4ac37.png)

我的第一个 iPad 应用程序中有上述 CoreData 模型。我正在 TableViewController 中构建过滤系统，如下所示。问题是，每当我进行 UI 更改时，切换点击按钮的开关，我的 UI 会在一两秒内变得无响应。我运行了一个非常长的函数，它重新创建照片的获取请求，然后运行更多计数获取以确定是否应该启用控件。我只是不知道如何以有意义的方式将其分开以防止挂起。即使我需要添加一秒钟左右的旋转视图，我也很满意。只是想摆脱滞后。

正如我所提到的，这是我第一次尝试 iOS 开发，所以我将不胜感激任何建议......

![在此处输入图像描述](../Images/05db442694c06345809dede54a5515f9.png)

```
-(void) refilterPhotos {
/*
*   First section builds the NSCompoundPredicate to use for searching my CoreData Photo objects. 
    Second section runs queries so 0 result controls can be disabled.
*/
subpredicates = [[NSMutableArray alloc] init];

NSPredicate *isNewPredicate;
if(newSwitch.on) {
    isNewPredicate = [NSPredicate predicateWithFormat:@"is_new == 1"];
} else {
    isNewPredicate = [NSPredicate predicateWithFormat:@"is_new == 0"];
}

[subpredicates addObject:isNewPredicate];

//Photo Types
PhotoType *photoType;
NSPredicate *photoTypePredicate;
for (UISwitch *photoSwitch in photoSwitches) {
     PhotoType * type = (PhotoType *) photoSwitch.property;
    if([type.selected boolValue] == YES) {
        NSLog(@"photo_type.label == %@", type.label);
        photoType = type;
        photoTypePredicate = [NSPredicate predicateWithFormat:@"photo_type.label == %@", type.label];
        break;
    }
}

//Feed Types
FeedType *feedType;
NSPredicate *feedTypePredicate;
for (UISwitch *feedSwitch in feedSwitches) {
    FeedType * type = (FeedType *) feedSwitch.property;
    if([type.selected boolValue] == YES) {
        NSLog(@"feed_type.label == %@", type.label);
        feedType = type;
        feedTypePredicate = [NSPredicate predicateWithFormat:@"feed_type.label == %@", type.label];
        break;
    }
}

//Markets
NSArray *filteredMarkets = [model.availableMarkets filteredArrayUsingPredicate:[NSPredicate predicateWithFormat:@"selected == 1"]];
for (Market *market in filteredMarkets) {
    [subpredicates addObject:[NSPredicate predicateWithFormat:@"ANY markets.name == %@", market.name]];
}

//Tags
NSArray *filteredTags = [model.availableTags filteredArrayUsingPredicate:[NSPredicate predicateWithFormat:@"selected == 1"]];
for (Tag *tag in filteredTags) {
    NSLog(@"ANY tags.name == %@",tag.name);
    [subpredicates addObject:[NSPredicate predicateWithFormat:@"ANY tags.name == %@", tag.name]];
}

if(photoTypePredicate)
    [subpredicates addObject:photoTypePredicate];
if(feedTypePredicate)
    [subpredicates addObject:feedTypePredicate];
NSPredicate *finished = [NSCompoundPredicate andPredicateWithSubpredicates:subpredicates];//Your final predicate

model.availablePhotos = [model fetchPhotoswithPredicate:finished];
[[self parentViewController] setTitle:[NSString stringWithFormat:@"%d items",[model.availablePhotos count]]];

NSLog(@"FILTERED PHOTOS:::: %d", [model.availablePhotos count]);
[gridVC reloadGrid];   

/**
 *  Filtering Section Here, I'm running count requests for each grouping of controls to ensure if they're selected, results will be returned.
 *  If zero results, I'll disable that control. For the switch-based controls, I need to removed them before running my fetches since there can only be
 *  one switch value per photo.
 */

//Have to remove the existing type predicate since they're exlcusive values
[subpredicates removeObject:isNewPredicate];

//New Toggle
NSPredicate *newRemainderPredicate = [NSPredicate predicateWithFormat:@"is_new == %d",newSwitch.on?0:1];
[subpredicates addObject:newRemainderPredicate];

if([model countPhotoswithPredicate:[NSCompoundPredicate andPredicateWithSubpredicates:subpredicates]]<1) {
    [newSwitch setEnabled:NO];
} else {
    [newSwitch setEnabled:YES];
}

[subpredicates removeObject:newRemainderPredicate];
[subpredicates addObject:isNewPredicate];

[subpredicates removeObject:photoTypePredicate];
//Photo Type Toggles
NSArray *remainderPhotoTypes = [photoSwitches filteredArrayUsingPredicate:[NSPredicate predicateWithFormat:@"on == NO"]];
for( UISwitch*control in remainderPhotoTypes) {
    PhotoType *remainderPhotoType = (PhotoType*)control.property;

    [subpredicates addObject:[NSPredicate predicateWithFormat:@"photo_type == %@", remainderPhotoType]];
    if([model countPhotoswithPredicate:[NSCompoundPredicate andPredicateWithSubpredicates:subpredicates]]<1) {
        //NSLog(@"PHOTOTYPE OFF %@", remainderPhotoType.label);
        control.enabled = NO;
    } else {
        //NSLog(@"PHOTOTYPE ON %@ count = %d", remainderPhotoType.label, [[model fetchPhotoswithPredicate:[NSCompoundPredicate andPredicateWithSubpredicates:subpredicates]] count]);
        control.enabled = YES;
    }
    remainderPhotoType.enabled = [NSNumber numberWithBool:control.enabled];
    [subpredicates removeObject:[NSPredicate predicateWithFormat:@"photo_type == %@", remainderPhotoType]];
}
if(photoTypePredicate)
[subpredicates addObject:photoTypePredicate];

[subpredicates removeObject:feedTypePredicate];
//Feed Type Toggles
NSArray *remainderFeedTypes = [feedSwitches filteredArrayUsingPredicate:[NSPredicate predicateWithFormat:@"on == NO"]];
for( UISwitch*control in remainderFeedTypes) {
    PhotoType *remainderFeedType = (PhotoType*)control.property;

    [subpredicates addObject:[NSPredicate predicateWithFormat:@"feed_type == %@", remainderFeedType]];
    if([model countPhotoswithPredicate:[NSCompoundPredicate andPredicateWithSubpredicates:subpredicates]]<1) {
        control.enabled = NO;
    } else {
        control.enabled = YES;

    }
    remainderFeedType.enabled = [NSNumber numberWithBool:control.enabled];
    [subpredicates removeObject:[NSPredicate predicateWithFormat:@"feed_type == %@", remainderFeedType]];
}
if(feedTypePredicate)
[subpredicates addObject:feedTypePredicate];

NSArray *remainderMarkets = [[model availableMarkets] filteredArrayUsingPredicate:[NSPredicate predicateWithFormat:@"selected == 0"]];
//Markets..many-to-many so I don't remove the existing predicate
for( Market *remainderMarket in remainderMarkets) {
    [subpredicates addObject:[NSPredicate predicateWithFormat:@"ANY markets == %@", remainderMarket]];
     NSInteger countForTag = [model countPhotoswithPredicate:[NSCompoundPredicate andPredicateWithSubpredicates:subpredicates]];

    if(countForTag<1) {
        remainderMarket.enabled = [NSNumber numberWithInt:0];
    } else {
        remainderMarket.enabled = [NSNumber numberWithInt:1];
    }
    [subpredicates removeObject:[NSPredicate predicateWithFormat:@"ANY markets == %@", remainderMarket]];
}

NSArray *remainderTags = [[model availableTags] filteredArrayUsingPredicate:[NSPredicate predicateWithFormat:@"selected == 0"]];
//TAGS..many-to-many so I don't remove the existing predicate 
int tagCounter = 0;
for( Tag *remainderTag in remainderTags) {
    [subpredicates addObject:[NSPredicate predicateWithFormat:@"ANY tags == %@", remainderTag]];
    NSInteger countForTag = [model countPhotoswithPredicate:[NSCompoundPredicate andPredicateWithSubpredicates:subpredicates]];
    if(countForTag<1) {
        NSLog(@"TAG OFF %@", remainderTag.name);
        remainderTag.enabled = 0;
    } else {
        NSLog(@"TAG ON %@ count = %d", remainderTag.name, countForTag);
        remainderTag.enabled = [NSNumber numberWithInt:1];
    }
    [subpredicates removeObject:[NSPredicate predicateWithFormat:@"ANY tags.name == %@", remainderTag.name]];
    tagCounter ++;
} 
//Update the controls with this new data
[self.tableView reloadData]; 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T22:39:48.083

好的，这里有几件事需要考虑。

首先，我会考虑为主要搜索字段创建索引。没有索引，每次搜索都是线性的，因为它必须检查每条记录的值。索引将导致更快的搜索时间。

其次，我会非常小心在复合谓词中进行排序。它将根据顺序过滤它们。因此，您希望首先使您最快、最多过滤谓词。尽快修剪可能的解决方案空间。

通过对前 1-3 个谓词中使用的属性进行索引，您可以获得很多收益。我在底部注意到，当您查询计数时，您仍在使用相同的复合谓词。你真的想要那个吗？另外，在这段代码中

```
//Have to remove the existing type predicate since they're exlcusive values
[subpredicates removeObject:isNewPredicate];
//New Toggle
NSPredicate *newRemainderPredicate = [NSPredicate predicateWithFormat:@"is_new == %d",newSwitch.on?0:1];
[subpredicates addObject:newRemainderPredicate]; 
```

您正在从前面删除 is_new 检查，并将其放在后面。如果您只是检查这一个谓词来切换该开关，而您只关心是否有 0 个或更多，为什么还要使用整个复合谓词？相对于所有其他字段，“切换”是否会打开/关闭？

如果您继续这样做，请记住，它将首先执行所有其他谓词（有些是引用）。尽量让它们保持良好的顺序，以尽可能快地过滤。

第三，使用引用很方便，但是很昂贵。您可以通过单独查询它们来获得更好的性能，然后使用复合谓词过滤内存中的对象。

第四，您应该在单独的线程中执行所有这些查询。这很容易做到，但具体方法取决于您当前的 ManagedObjecttContext 安排。你有一个单一的 MOC，一个父/子关系，一个 UIManagedDocument 吗？基本上，您可以创建一个单独的 MOC，并调用 performBlock 来执行提取。事实上，您可以使用多个 MOC 同时异步触发所有这些获取。

然后，您可以在完成后调用主线程。

最后，您可能需要考虑对数据库进行非规范化。它会导致您使用更多空间，但获取速度会快得多。具体来说，关系字段......您可以将照片/提要标签与照片本身放在一起。这样，在搜索时，您不必进行额外的连接来获取这些记录。

所以，这不是一个简单的答案，而是实现其中的每一个，看看你的性能是否没有显着提高（更不用说你的 UI 响应能力了）。

# mysql - 存储 facebook 令牌的字段类型是什么？

> ID：10389890
> 
> 赞同：3
> 
> 时间：2012-04-30T20:06:18.707
> 
> 标签：mysql, facebook, facebook-graph-api

我创建了一个简单的 facebook 应用程序，我想将 facebook 令牌存储在我的 mysql 数据库中。我必须使用什么字段类型来存储 facebook 令牌？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-30T20:11:51.140

您将希望存储从 facebook 身份验证 API 返回的 access_token 和 user_id，因此如果您需要重新生成访问令牌，您可以使用用户 ID 执行此操作。

请注意，Facebook 将逐步淘汰`offline_access`权限，这是大多数 permament-auth 风格应用程序的支柱，其中访问令牌作为主要身份验证凭据保存到数据库中。这将意味着无限期地依赖一个访问令牌的旧服务器端方法将不再可行。可以在此处找到有关此更改的详细信息：

[https://developers.facebook.com/roadmap/offline-access-removal/](https://developers.facebook.com/roadmap/offline-access-removal/)

就字段类型而言，您可以将两者存储为 mysql VARCHAR(255) 或 TINYTEXT

[Facebook OAuth2 中 access_token 的长度是多少？](https://stackoverflow.com/questions/4408945/what-is-the-length-of-the-access-token-in-facebook-oauth2)

# android - Setting an array in a spinner retrieved from a database

> ID：10389892
> 
> 赞同：0
> 
> 时间：2012-04-30T20:06:20.327
> 
> 标签：android, spinner, token

I'm trying to make a spinner with an array that I retrieve from a database, here goes the code I'm trying to use:

```
 Unit unit;
    int idx = 1;
    ArrayAdapter spinnerArrayAdapter = new ArrayAdapter(this,
            android.R.layout.simple_spinner_item, new Unit[] {   
                unit = connector.getUnit(idx);
                while (connector.getUnit(idx) != null){  
                new Unit(unit.getunitID(), unit.getunitTypeID(), unit.getorganizationID(), unit.getunitName(), unit.getunitAddress());
                unit = connector.getUnit(idx);
                idx++;
                }
                  }); 
```

connector.getUnit(idx) basically retrieves a Unit object from the database, will return a null value if there are not more units to retrieve. The compiler is complaining in:

```
unit = connector.getUnit(idx); 
```

as *"Syntax error, insert ")" to complete VariableInitializer"*

and:

```
idx++; 
```

as *"Syntax error, insert "}" to complete Block"*

I think that would be the right code to do what I want to, but somehow I can't manage to make it work, any idea?

Thanks in advance

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T20:25:24.033

您尝试创建一组 Unit 对象。在 new Unit[] { } 的 "{" 和 "}" 之间，您只能使用用 "," 分隔的 Unit 对象。你有很多不符合这种语法的逻辑。您应该将其全部移到该初始化程序部分之外，并将已创建的 Unit 对象数组提供给 ArrayAdapter 构造函数。

# ruby - Using WIN32OLE_EVENT::message_loop not in Main thread Issue

> ID：10389893
> 
> 赞同：2
> 
> 时间：2012-04-30T20:06:25.580
> 
> 标签：ruby, win32ole, opos, message-loop

I'm trying to create Ruby script that allow me to get OLE events during execution of main script. I've moved WIN32OLE_EVENT::message_loop to another Thread and expect this will call my event handlers simultaneously during execution of other script parts. For example, main goal of this sample script is connect to device and get event messages (just puts it to stdout) during execution of irb console.

```
require 'win32ole'
require 'irb'

sc = WIN32OLE.new("OPOS")

sc.Open("mydevice")
sc.ClaimDevice(5000)
sc.setproperty("DeviceEnabled", true)
sc.DataEventEnabled = true
sc.AutoDisable = true

$loop = true

esc = WIN32OLE_EVENT.new(sc)
esc.on_event() {|*args|
  puts "SIGCAP Event #{args.inspect}"
  $loop = false
}

Thread.new {
    loop do
      WIN32OLE_EVENT::message_loop
      break unless $loop
      sleep 0.5
    end
}

IRB.start
WIN32OLE_EVENT::message_loop 
```

When i execute this script (but you can't run it because some stuff skipped) i got irb console where i can access to objects that manipulate my USB device that connected to Windows and call some methods that fired different events and i expect these events inside esc.on_event block just to see output to stdout. But this block never called. But if i will write 'exit' in irb console i will get my events because last line in sample script **WIN32OLE_EVENT::message_loop**!

Looks like calling message_loop working only in main Thread and calling it inside other thread not give any results.

Any ideas how to get it working? Feel free to ask additional questions. Thanks.

# ruby - Qt Model/View programming examples and tutorials in Ruby

> ID：10389895
> 
> 赞同：2
> 
> 时间：2012-04-30T20:06:33.277
> 
> 标签：ruby, qt, user-interface, qt4, qtruby

I'm learning about Qt Model/View with Ruby and I'm trying run the following code

```
require 'Qt4'

class MyModel < Qt::AbstractListModel

    def initialize(data = [])
        super()
        @data = data
    end

    def rowCount idx
        @data.size
    end

    def data idx, role = Qt::DisplayRole
        if role == Qt::DisplayRole then
            Qt::Variant.new @data
        else Qt::Variant.new
        end
    end
end

if $0 == __FILE__
    app = Qt::Application.new ARGV 
    v = Qt::ListView.new
    m = MyModel.new(['1', '2', '3'])
    v.model = m
    v.show
    app.exec
end 
```

When I run the script what it shows is a list window with three rows empty. What am I doing wrong? On the other hands, I find it hard to learn to model/view programming with ruby due to the poor documentation (All is C++) anyone know if there are tutorials or something?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T06:54:53.083

您是否已经熟悉 Qt、Ruby 和/或 C++？如果是这样，那将对您的旅程有很大帮​​助，因为不幸的是，没有那么多关于 Qt 和 Ruby 的文档可用。

无论如何，问题是您返回的是 Array 而不是所需索引的元素，请参阅[QAbstractItemModel::data](http://qt-project.org/doc/qt-4.8/qabstractitemmodel.html#data)。里面的 idx 参数是一个 QModelIndex，所以只需查找想要的行并像这样返回它：

```
Qt::Variant.new @data[idx.row] 
```

此外，请查看[http://techbase.kde.org/Development/Languages/Ruby](http://techbase.kde.org/Development/Languages/Ruby)以获取有关 Ruby 和 Qt 的一般信息。

# jquery - Unload included javascript files

> ID：10389904
> 
> 赞同：0
> 
> 时间：2012-04-30T20:07:18.503
> 
> 标签：jquery, browser, resources

I use `$.getScript` many times in my page for loading my controllers,

when user click on each link, a javascript file will load with getScript . the user maybe click on several links and many javascript files loading, so the browser get more resource.

How can I cleanup the javascript files from browser after it works done.

# regex - 如何确定是否按下了 F15？

> ID：10389910
> 
> 赞同：1
> 
> 时间：2012-04-30T20:07:54.287
> 
> 标签：regex, perl

我有一个小控制台应用程序，其中包括检查另一个操作的状态。它使用 Term::ReadKey 每秒钟检查一次按键。如果按下 'r' 键，它会刷新显示：

```
{   # generate display ...
    print "Press 'r' to refresh, any other key to exit:  ";
    my $resp = readkey();
    print $resp;
    redo if $resp =~ /r/i;
}
exit;

sub readkey {   
    my $key;
    ReadMode('cbreak');
    while (not defined $key) {
        if (defined ($key = ReadKey(-1)) ) {
            exit if $key =~ /\cC/i; # allow Ctrl-C to behave normally
            return $key;
        } else {
            sleep 1;
        }
    }
    ReadMode('normal');
} 
```

这一切都完全按预期工作。但是，我也使用[咖啡因](http://www.zhornsoftware.co.uk/caffeine/)来防止我的 Win 7 显示器进入睡眠状态。该实用程序通过每 59 秒模拟一次 F15 来工作，因此永远不会启动屏幕保护程序。尽管 Caffeine 的方法非常笨拙，但多年来对我来说效果很好。但是，与 Windows 一样，我的控制台应用程序也会将 F15 的模拟按下读取为真正的按键，从而导致控制台应用程序退出。如果我可以匹配 F15，我可以将其过滤掉。所以，我的问题：

**如何使用 Term::ReadKey 确定是否按下了 F15？**

这是在 Windows 7 Pro、Strawberry 5.12.3、Term::ReadKey v. 2.30.02 上。

（我知道我的问题可能有一个重要的[xy 问题](https://meta.stackexchange.com/questions/66377/what-is-the-xy-problem)组成部分，我欢迎其他解决方案。但是，我很好奇如何做到这一点。我可以明白为什么我可能想看看功能键何时在其他情况下按下。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T06:26:29.527

[很高兴你认识到这是非常 xy :)]

您正在使用以 unix 为中心的模块。使用更合适的模块：例如[Win32::Console](http://search.cpan.org/perldoc?Win32::Console)。

[我之前的回答变成了评论。显然，Stack Overflow 模组希望我的答案是 99% 的[重复内容](https://stackoverflow.com/questions/10172253/how-to-read-in-special-keys-with-win32console/10172610#10172610)？！？]

```
my $con_in = Win32::Console->new(STD_INPUT_HANDLE);
for (;;) {
   my @event = $con_in->Input();

   my $event_type = shift(@event);
   next if !defined($event_type) || $event_type != 1;  # 1: Keyboard

   my ($key_down, $repeat_count, $vkcode, $vscode, $char, $ctrl_key_state) = @event;
   if ($vkcode == VK_F15 && ($ctrl_key_state & SHIFTED_MASK) == 0) {
      if ($key_down) {
         say "<Up> pressed/held down" for 1..$repeat_count;
      } else {
         say "<Up> released";
      }
   }
} 
```

有关键盘事件的更多信息，请参阅[KEY_EVENT_RECORD](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684166%28v=vs.85%29.aspx)。

请参阅[虚拟键代码](http://msdn.microsoft.com/en-us/library/windows/desktop/dd375731%28v=vs.85%29.aspx)以识别键。

* * *

上述代码的标题和定义：

```
use strict;
use warnings;
use feature qw( say );

use Win32::Console qw( STD_INPUT_HANDLE );

use constant {
   RIGHT_ALT_PRESSED  => 0x0001,
   LEFT_ALT_PRESSED   => 0x0002,
   RIGHT_CTRL_PRESSED => 0x0004,
   LEFT_CTRL_PRESSED  => 0x0008,
   SHIFT_PRESSED      => 0x0010,

   VK_F15 => 0x7E,
};

use constant SHIFTED_MASK =>
   RIGHT_ALT_PRESSED |
   LEFT_ALT_PRESSED |
   RIGHT_CTRL_PRESSED |
   LEFT_CTRL_PRESSED |
   SHIFT_PRESSED; 
```

# cuda - how does CUDA schedule its threads

> ID：10389913
> 
> 赞同：0
> 
> 时间：2012-04-30T20:08:06.253
> 
> 标签：cuda

i've got a few questions regarding cuda's scheduling system.

A.When i use for example the foo<<<255, 255>>() function, what actually happens inside of the card? i know that each SM receives from the upper level a block to schedule, and each SM is responsible to schedule its incoming BLOCK, but which part does it? if for example i've got 8 SMs, when each of each contains 8 small CPUs, is the upper level responsible to schedule the remaining 255*255 - (8 * 8) threads?

B.What's the limit of maximum threads that one can define? i mean `foo<<<X, Y>>>();` x,y =?

C. Regarding the last example, how many threads can be inside of one block? can we say that the more blocks / threads we have, the faster the execution will be?

Thanks for your help

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T02:09:51.333

A. 计算工作分配器将块从网格分配到 SM。SM 将块转换为扭曲（WARP_SIZE = 32 在所有 NVIDIA GPU 上）。Fermi 2.0 GPU 每个 SM 都有两个 warp 调度器，它们共享一组数据路径。每个周期每个 warp 调度程序都会选择一个 warp 并向其中一个数据路径发出指令（请不要考虑 CUDA 内核）。在 Fermi 2.1 GPU 上，每个 warp 调度器都有独立的数据路径以及一组共享数据路径。在 2.1 的每个周期中，每个 warp 调度程序都会选择一个 warp 并尝试为每个 warp 发出双重指令。

warp 调度器试图优化数据路径的使用。这意味着单个warp可能会在背靠背循环中执行多个指令，或者warp调度程序可以选择每个周期从不同的warp发出。

每个 SM 可以处理的扭曲/线程数在 CUDA 编程指南 v.4.2 表 F-1 中指定。这从 768 线程扩展到 2048 线程（24-64 经线）。

B. 每次启动的最大线程数由最大 GridDims * 每个块的最大线程数定义。请参阅表 F-1 或参阅 cudaGetDeviceProperties 的文档。

C. 参见与 (B) 相同的资源。线程/块的最佳分布由您的算法分区定义，并受占用计算的影响。基于 SM 上扭曲的问题集大小和在指令屏障处阻塞的时间量（除其他外），存在可观察到的性能影响。对于初学者，我建议每个 SM 至少有 2 个街区，入住率约为 50%。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T20:33:01.203

B. 这取决于您的设备。您可以使用 cuda 功能`cudaGetDeviceProperties`查看设备的规格。常见的最大数量是每个块 y=1024 个线程，每个网格维度 x=65535 个块。

CA 的常见做法是拥有 2 个（128,256,512 等）个线程/块的幂。以这种方式减少大型数组非常有效（请参阅[Reduction](http://www.uni-graz.at/~haasegu/Lectures/GPU_CUDA/Lit/reduction.pdf)）。块和线程的最佳分布实际上取决于您的应用程序和硬件。我个人在 TeslaM2050 上使用 512 个线程/块进行大型稀疏线性代数计算，因为它对我的应用程序来说是最有效的。

# sql - How do I fetch data grouped by month and year including the period with no data?

> ID：10389915
> 
> 赞同：2
> 
> 时间：2012-04-30T20:08:13.287
> 
> 标签：sql, select, null, count

Relatively new to SQL and I am stumped on this little issue. This doesn't seem to be very difficult to do, but I just can't seem to figure it out.

I am trying to get a count of transactions from a table, but I can't seem to get sql to get me to show all of the months instead of only the months and the year that the transactions occured in.

Here is the query:

```
SELECT      YEAR(dbo.countproject.trans_date)   AS [TransYear]
        ,   MONTH (dbo.countproject.trans_date) AS [TransMonth]
        ,   COUNT(Id)                           AS TransNum 
FROM        dbo.countproject
WHERE       dbo.countproject.make_name  = 'Honda'
AND         dbo.countproject.model_name = 'Civic'
AND         dbo.countproject.type       = 'Sale'
AND         dbo.countproject.trans_type LIKE '%%EU'
AND         dbo.countproject.mfr        = '2000'
GROUP BY    YEAR(dbo.countproject.trans_date)
        ,   MONTH(dbo.countproject.trans_date)
ORDER BY    YEAR(dbo.countproject.trans_date) 
```

The query returns the following result set:

```
| TransYear | TransMonth | TransNum |
|-----------|------------|----------|
|  2004     |     1      |     5    |
|  2004     |     3      |     1    |
|  2005     |     4      |     2    | 
```

and so forth....

I am trying to get it to show all the months and years even if the value is NULL.

I tried creating a new table which will have the year and the month as columns to get it to join somehow, but I am lost.

Any help would be appreciated.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T21:15:58.233

如果您正在使用`SQL Server 2005 or above`，则可以使用`Common Table Expressions (CTE)`来获得所需的结果。下面的示例显示了如何获取问题中描述的结果。

[**单击此处查看 SQL Fiddle 中的演示。**](http://sqlfiddle.com/#!6/d091b/1)

*说明*：

*   创建和插入语句创建表并填充一些示例数据。我根据问题中提供的查询创建了表。
*   WITH 子句中的语句正在执行递归表达式。在这种情况下，`SELECT`上述获取表*dbo.countproject*`UNION ALL`中可用的最小和最大日期
**   获取最小日期后，UNION ALL 之后的第二个 SELECT 语句以 1 个月的间隔递增日期，直到递归表达式达到表中可用的最大日期。*   递归 CTE 已生成所有可能的可用日期。此输出在名为*alltransactions*的表中可用。*   我们必须将此 CTE 输出与使用`alltransactions`的实际表连接起来，因为即使没有交易，我们也希望显示所有年份和月份。`countproject``LEFT OUTER JOIN`*   表格`alltransactions`和在日期`countproject`的*年份*和*月份*部分连接。然后，查询在*WHERE*子句中应用必要的过滤器，然后按年和月对数据进行分组，然后按年和月对其进行排序。*   从样本数据中可以看出，表中最早的日期是`2004-07-01`，最晚的日期是`2005-12-01`。因此，输出显示从 2004 年 / 月 07 到 2005 年 / 月 12。*

 *希望有帮助。

*脚本*：

```
CREATE TABLE dbo.countproject
(   
        id          INT         NOT NULL IDENTITY
    ,   trans_date  DATETIME    NOT NULL
    ,   make_name   VARCHAR(20) NOT NULL
    ,   model_name  VARCHAR(20) NOT NULL
    ,   type        VARCHAR(20) NOT NULL
    ,   trans_type  VARCHAR(20) NOT NULL
    ,   mfr         INT         NOT NULL
);

INSERT INTO dbo.countproject (trans_date, make_name, model_name, type, trans_type, mfr) VALUES
    ('1900-01-01', 'Honda',     'Civic',    'Sale', 'EU', 2000),
    ('1900-01-01', 'Toyota',    'Corolla',  'Sale', 'EU', 2000),
    ('2004-07-01', 'Nissan',    'Altima',   'Sale', 'EU', 2000),
    ('2005-12-01', 'Toyota',    'Camry',    'Sale', 'EU', 2000),
    ('2004-04-01', 'Ford',      'Focus',    'Sale', 'EU', 2000),
    ('2005-08-01', 'Honda',     'Civic',    'Sale', 'EU', 2000),
    ('2005-11-01', 'Toyota',    'Camry',    'Sale', 'EU', 2000),
    ('2004-08-01', 'Toyota',    'Corolla',  'Sale', 'EU', 2000),
    ('2005-12-01', 'Honda',     'Civic',    'Sale', 'EU', 2000),
    ('2004-07-01', 'Honda',     'Civic',    'Sale', 'EU', 2000),
    ('2004-11-01', 'Honda',     'Civic',    'Sale', 'EU', 2000),
    ('2005-08-01', 'Honda',     'Civic',    'Sale', 'EU', 2000);

;WITH alltransactions
AS
(
    SELECT      MIN(trans_date) AS continuousdate
            ,   MAX(trans_date) AS maximumdate
    FROM        dbo.countproject
    WHERE           trans_date <> '1900-01-01'
    UNION ALL 
    SELECT      DATEADD(MONTH, 1, continuousdate) AS continuousdate
            ,   maximumdate
    FROM        alltransactions
    WHERE       DATEADD(MONTH, 1, continuousdate) <= maximumdate
)
SELECT          YEAR(at.continuousdate)     AS [Year]
            ,   MONTH(at.continuousdate)    AS [Month]

            ,   COUNT(cp.trans_date)        AS [Count]
FROM            alltransactions at
LEFT OUTER JOIN countproject    cp
ON              YEAR(at.continuousdate)     = YEAR(cp.trans_date)
AND             MONTH(at.continuousdate)    = MONTH(cp.trans_date)
AND             cp.make_name                = 'Honda'
and             cp.model_name               = 'Civic'
and             cp.type                     = 'Sale'
and             cp.trans_type               LIKE '%EU'
and             cp.mfr                      = '2000'
GROUP BY        YEAR(at.continuousdate)
            ,   MONTH(at.continuousdate)
ORDER BY        [Year]
            ,   [Month]; 
```

*输出*：

```
Year   Month  Count
-----  ------ -----
2004      4     0
2004      5     0
2004      6     0
2004      7     1
2004      8     0
2004      9     0
2004     10     0
2004     11     1
2004     12     0
2005      1     0
2005      2     0
2005      3     0
2005      4     1
2005      5     0
2005      6     0
2005      7     0
2005      8     2
2005      9     0
2005     10     0
2005     11     0
2005     12     1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T20:14:43.020

您必须使用 LEFT 或 RIGHT OUTER JOIN！

这是一个简单的示例：[http ://www.w3schools.com/sql/sql_join_left.asp](http://www.w3schools.com/sql/sql_join_left.asp)

你应该自己完成它。

问候

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T20:14:53.967

Alas, the SQL statement can only return the data in the table. If you want all months, you need either a table with the year/month combinations you are intererested in or, preferably, a calendar table with all days and information about them.

With a calendar table, your query have a from clause that looked like:

```
from 
(
   select distinct year(date) as yr, month(date) as mon
   from calendar c
   where date between <earliest> and <latest>
) c 
left outer join CountTable ct
  on c.yr = year(ct.trans_date) 
  and c.mon = month(ct.trans_date) 
```*

# java - SEAM 中的“目标无法访问，标识符‘验证器’解析为空”

> ID：10389919
> 
> 赞同：0
> 
> 时间：2012-04-30T20:08:52.630
> 
> 标签：java, jsf, seam

我正在使用 jboss-seam-2.2.0.GA，authenticator 类来验证登录过程。当我输入用户名和密码并提交页面时，我的日志中收到以下错误消息：

```
application E javax.el.PropertyNotFoundException: /login.xhtml @27,76 action="#{authenticator.login()}": Target Unreachable, identifier 'authenticator' 解析为 null
 javax.faces.el.E​​valuationException: javax.el.PropertyNotFoundException: /login.xhtml @27,76 action="#{authenticator.login()}": Target Unreachable, identifier 'authenticator' 解析为 null
 在 javax.faces.component.MethodBindingMethodExpressionAdapter.invoke(MethodBindingMethodExpressionAdapter.java:101)
 在 com.sun.faces.application.ActionListenerImpl.processAction(ActionListenerImpl.java:102)
 在 javax.faces.component.UICommand.broadcast(UICommand.java:387)

```

以下是代码：

```
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
xmlns:s="http://jboss.com/products/seam/taglib"
xmlns:ui="http://java.sun.com/jsf/facelets"
xmlns:f="http://java.sun.com/jsf/core"
xmlns:h="http://java.sun.com/jsf/html"
xmlns:rich="http://richfaces.org/rich" template="layout/noMenuTemplate.xhtml">
<ui:define name="body">
    <div id="content">
                <h:form id="loginForm">
        <rich:panel>
            <f:facet name="header">Login</f:facet>
            <h:messages />
<div class="dialog"><h:panelGrid columns="2" rowClasses="prop"
                columnClasses="name,value">
                <h:outputLabel for="username">Username</h:outputLabel>
                <h:inputText id="username" value="#{credentials.username}"
                    style="width: 150px;" />
                <h:outputLabel for="password">Password</h:outputLabel>
                <h:inputSecret id="password" value="#{credentials.password}"
                    style="width: 150px;" />
            </h:panelGrid></div>

            <div class="actionButtons"><h:commandButton id="submit"
                styleClass="button" value="Login" action="#{authenticator.login()}" /></div>
        </rich:panel>
        </h:form>
           </div>
</ui:define>
</ui:composition> 
```

*身份验证器.java*

```
@Name("authenticator")
@AutoCreate
public class Authenticator {    
    @Logger Log log;
    @In Identity identity;
    @In Credentials credentials;
    @In Session hibernateSession;

    public Authenticator() {}

    public void login() throws IOException {
        log.debug("calling login method ............... ");

        HttpServletRequest request = (HttpServletRequest) FacesContext.getCurrentInstance().getExternalContext().getRequest();

        StringBuffer location = new StringBuffer(request.getContextPath());
        location.append("/j_security_check?j_username=");
        location.append((credentials.getUsername() != null) ? credentials.getUsername() : "");
        location.append("&j_password=");
        location.append((credentials.getPassword() != null) ? credentials.getPassword() : "");

        log.debug("LOCATION : " + location.toString());

        HttpServletResponse response = (HttpServletResponse) FacesContext.getCurrentInstance().getExternalContext().getResponse();
        response.sendRedirect(response.encodeRedirectURL(location.toString()));      
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T12:36:15.553

您的 Authenticator 类似乎已正确实现。我会在您的日志中进一步搜索，并找出它没有被创建的原因。

另外，我建议从 components.xml 发布相关部分。应该是这样的：

```
<security:identity authenticate-method="#{authenticator.login}"/> 
```

# excel - 如何使用vbscript在Excel中查找特定值的行号

> ID：10389920
> 
> 赞同：11
> 
> 时间：2012-04-30T20:08:53.083
> 
> 标签：excel, vbscript

我有一个打开的 Excel 文件并使用 VB 脚本，我只需要在 Excel 工作表中搜索列“A”，直到它与文本字符串匹配。当脚本找到匹配项时，我想查看找到匹配项的单元格的行号。提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-04-30T20:19:24.083

这是在活动表的 A 列中查找“test2”的第一个实例的 VBA。您可以根据需要调整字符串和工作表。仅当整个单元格匹配时才算作匹配，例如“test2222”不匹配。如果需要，请删除 ,`lookat:=xlWhole`位：

```
Sub FindFirstInstance()
Const WHAT_TO_FIND As String = "test2"
Dim ws As Excel.Worksheet
Dim FoundCell As Excel.Range

Set ws = ActiveSheet
Set FoundCell = ws.Range("A:A").Find(what:=WHAT_TO_FIND, lookat:=xlWhole)
If Not FoundCell Is Nothing Then
    MsgBox (WHAT_TO_FIND & " found in row: " & FoundCell.Row)
Else
    MsgBox (WHAT_TO_FIND & " not found")
End If
End Sub 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-01-31T19:31:30.153

感谢您的样品。下面是VBScript

```
Dim FSO, oExcel, oData, FoundCell, WHAT_TO_FIND, File_Path

WHAT_TO_FIND = "Report Summary"
File_Path = "\\[Server]\[Drive$]\[Folder]\Data.xls"

Set FSO = CreateObject("Scripting.FileSystemObject")
Set oExcel = CreateObject("Excel.Application")
Set oData = oExcel.Workbooks.Open(File_Path)

Set FoundCell = oData.Worksheets("Sheet1").Range("A4:A20000").Find(WHAT_TO_FIND)
If Not FoundCell Is Nothing Then
  MsgBox (WHAT_TO_FIND & " found in row: " & FoundCell.Row)
Else
  MsgBox (WHAT_TO_FIND & " not found")
End If

Set File_Path = nothing
Set WHAT_TO_FIND = nothing
Set FoundCell = nothing
Set oData = Nothing
Set oExcel = Nothing
Set FSO = Nothing 
```

# c# - Automapper Composite DTO 到 ViewModel 的转换

> ID：10389927
> 
> 赞同：0
> 
> 时间：2012-04-30T20:09:32.693
> 
> 标签：c#, automapper

在某些情况下，需要从我们的存储库中返回复合 DTO，其中 DTO 仅具有一些模型属性，并且 DTO 的功能只是作为一个简单的复合对象（返回 Queryable 是不够的，因为比 T 有更多的信息）

例如：

模型：

```
public class Job
{
    int Id { get; set; }
    //more properties
}

public class JobApplication
{
    int Id { get; set; }
    //more properties
} 
```

存储库 `IQueryable<JobAndUserApplication> GetJobAndMatchingUserApplication(int userId)`：：

```
public class JobAndUserApplication
{
    public Job Job { get; set; }
    public JobApplication JobApplication { get; set; }
} 
```

现在 - 我想简单地做（Project 和 To 是 Automapper 功能）：

```
//this allows one efficient query to bring in the subproperties of the composite DTO    
var jobVmList = jobRepository.GetAllJobsAndMatchingJobApplicationByUser(userId)              
                             .Project()
                             .To<JobVM>()
                             .ToList(); 
```

所以我需要一种像这样的映射：

```
Mapper.CreateMap<JobAndUserApplication, JobVM>()
      .ForMember(jvm => jvm, opt => opt.ResolveUsing(src => src.Job));
      //many other .ForMembers that are not relevant right now 
```

我正在尝试将 DTO 的 Job 属性直接映射到 JobVM（共享许多相同的属性）。

我的映射引发以下异常：

成员的自定义配置仅支持类型上的顶级个人成员。

我在做什么错，如何在 JobVM 本身上完成 DTO 的 Job 属性的映射？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T20:42:03.570

Automapper 告诉您，您只能在类的成员（属性）上定义自定义操作，而不是在类本身上。你需要做的是首先创建一个 Job 到 JobVM 的映射：

```
Mapper.CreateMap<Job, JobVM>() 
```

和

```
Mapper.CreateMap<JobAndUserApplication, JobVM>() 
```

确保忽略并设置这两种类型的任何重复属性。然后运行 ​​automapper 两次，首先从子对象：

```
var jobVM = Mapper.Map<Job, JobVM>(jobAndUserApplication.job); 
```

然后从父对象

```
Mapper.Map<JobAndUserApplication, JobVM>(jobAndUserApplication, jobVM ); 
```

或者反过来，取决于你的属性是如何布置的。

快速旁注：我感觉您可能会混淆问题，并且我的代码气味警报正在响起。我会再看一下您的视图模型或域模型，因为这不是我看到的典型问题。（只是我的 0.02 美元 :-)

# desire2learn - 将书签参数与 /users/ 一起使用

> ID：10389935
> 
> 赞同：1
> 
> 时间：2012-04-30T20:10:05.860
> 
> 标签：desire2learn

我一直在查看位于[http://docs.valence.desire2learn.com/res/user.html的文档](http://docs.valence.desire2learn.com/res/user.html)

我正在尝试对从 /users/ 获得的响应数量进行分页。

当我使用“/users/”发送一个 get 时，我收到了 D2L 中所有用户的预期 Json 块。

当我尝试“/users?bookmark=3004”时，我收到 404 错误或找不到路径错误（我在这行代码上尝试了很多变体）

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T14:13:38.583

请注意，路由以斜杠结尾：“/d2l/api/lp/{ver}/users/”。这意味着您的呼叫需要看起来像这样：

```
https://your.lms.domain/d2l/api/lp/1.0/users/?x_b={userId}&x_a={appId}&x_d={userSig}&x_c={appSig}&x_t={timestamp}&bookmark=3004 
```

# c++ - QToolBar 边框 setStyleSheet()

> ID：10389936
> 
> 赞同：4
> 
> 时间：2012-04-30T20:10:13.877
> 
> 标签：c++, qt

我的 QMainWindow 的 Qt::TopToolBarArea 中有许多 QToolBar。我想从不在边缘的边框中删除左右边框。但是，当尝试以下代码时，它最终会擦除 QToolBar 上的所有边框：

toolBar2->setStyleSheet("QToolBar {border-left-style: none; border-right-style: none; }");

我希望它显示为一个连续的工具栏，它们之间没有边界。实现这一目标的正确方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-30T20:51:41.323

你是对的，设计一个或多个边框（包括删除它）最终会删除其余部分。这是因为样式表和 Qt Styles 不能很好地混合，Qt Style 通常会丢失。

你能做的就是把你想看到的边界带回来。此示例指定顶部和底部边框的显示方式，这反过来又删除了左右边框：

```
toolBar2->setStyleSheet("QToolBar {border-bottom: 2px solid black; border-top: 2px solid black;}"); 
```

# extjs - ExtJS - 使用 getForm() 的问题

> ID：10389937
> 
> 赞同：-1
> 
> 时间：2012-04-30T20:10:19.627
> 
> 标签：extjs, extjs3

现在我使用 extjs 3.4 得到这个表单：

```
config = Ext.apply({
    title: 'Fluxo de Reincidencia',
    id: 'formKMLRcd',
    name: 'formKMLRcd',
    border: true,
    bodyStyle: "padding: 10px",
    layout: "form",
    autoScroll: false,
    items: [{
        xtype: "datefield",
        ref: "../extent",
        anchor: "100%",
        fieldLabel: 'Data Inicio',
        emptyText: 'informe a data de inicio',
        name: 'txtRcdDataInicio',
        id: 'txtRcdDataInicio',
        format: 'd/m/Y',
        altFormats: 'd/m/Y',
        allowBlank: false,
        validator: function (value) {
            var date = this.parseDate(this.getValue());
            if (!date) {
                return 'Informe uma data valida';
            }
        }
    } 
```

如何获取表单对象，我尝试使用此表达式但没有成功。

```
var form = Ext.getCmp('formKMLRcd').getForm(); 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T15:00:17.797

您使用 Ext.apply 错误，您必须将要应用指定配置的对象指定为第一个参数（在您的情况下为面板）

# javascript - Textarea charCount - 防止用户粘贴

> ID：10389939
> 
> 赞同：2
> 
> 时间：2012-04-30T20:10:25.257
> 
> 标签：javascript, jquery, html

下面的代码工作正常，除了如果我粘贴一个超过 10 个字符的字符串，它应该只粘贴前 10 个字符。目前它不这样做，如何防止粘贴超过 10 个字符？

[http://jsfiddle.net/qfzkw/2/](http://jsfiddle.net/qfzkw/2/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T21:10:46.237

如前所述，`<textarea maxlength="10">`将适用于少量情况 - 但不是**全部**。

很难确定如何阻止用户（例如在 Firefox 中）进入文本区域、选择浏览器菜单`Edit`然后单击`Paste`. 我真的不知道如何防止这种情况。您可以检查 keydown 事件以防止`ctrl`+ `v`。您可以禁用上下文菜单以禁止右键单击文本区域（尽管恶意用户可以编辑前端 javascript 然后重新启用此功能）。

简而言之，没有通用的方法来防止用户以适当的方式粘贴。

然而，你可以破解一个解决方案（当似乎没有办法继续你真正想要的事情时，这总是我的最爱）。我将要建议的这种方法取决于您运行了多少计时器。如果您有多个动画计时器，谷歌建议您尝试将它们全部折叠到一个计时单元中，其他计时单元来自该计时单元。如果是这种情况，请重构您的计时器。

实现一个全局定时器。实现一个基于该计时器运行 25 毫秒的函数。缓存文本区域的内容。看看这些内容是否发生了变化。

文本区域

```
<textarea id="maintextarea"></textarea> 
```

脚本

```
/*init*/
var globalTimer = new Date();
var cachedText = document.getElementById("maintextarea").value;
var iterationCount = 0;

function cacheText() {
    cachedText = document.getElementById("maintextarea").value;
}

function upDateTimer() {
    globalTimer = new Date();
    var timerTimeout = setTimeout('upDateTimer()', 5);
    timeBasedOperations();
}
upDateTimer();

function timeBasedOperations() {
    iterationCount++;//this will allow timing to occur
    //TODO: Add in other timers calls based on global timer
    if (iterationCount % 5) {//every fifth iteration (hence 25ms)
        checkTextArea();
    }
}

function checkTextArea() {
    var currentText = document.getElementById("maintextarea").value;
    var textArea = document.getElementById("maintextarea");
    if (currentText.length > cachedText.length) {
        //TODO: Add additional logic for catching a paste or text change
        textArea.value = currentText.substr(0, 10);
    }
    cacheText();
} 
```

我认为虽然这实现了一个计时器，但这是一个非常实用的解决方案。它也恰好起作用（*经过测试*）。

:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T20:14:48.153

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T20:15:50.540

您无法从浏览器中窥视剪贴板缓冲区，因此您唯一的选择是像您目前所做的那样将其限制为 10 个字符。使用 maxlength="10" 属性而不是您正在进行的 javascript 字符计数。

```
<textarea maxlength="10"></textarea>​ 
```

# git - 将来自 fork 的提交添加到主题分支

> ID：10389940
> 
> 赞同：1
> 
> 时间：2012-04-30T20:10:27.660
> 
> 标签：git, github

如果`userA`和我都从`userB`. 然后`userA`在他们的主分支中创建一个提交，并且尚未决定向主分支发出拉取请求`userB`。如何`userA`在我的 fork 中将他们的提交 () 添加到我的开发分支（不是我的主分支）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T20:18:35.780

您实际上可以使用一个命令来执行此操作。例如：

```
git pull https://github.com/userA/repo.git master 
```

这会将 userA 的`master`分支合并到您当前的分支中（`git checkout dev`首先在您自己的存储库中使用）。

如果您发现自己经常这样做，您可以[将远程添加](http://schacon.github.com/git/git-remote.html)到本地存储库，允许您使用单个名称引用 userA 的存储库。例如：

```
git remote add userA https://github.com/userA/repo.git
git pull userA master 
```

# c - XMLReadFile 混合了标头属性

> ID：10389943
> 
> 赞同：0
> 
> 时间：2012-04-30T20:10:49.790
> 
> 标签：c, xml

我创建了一个 XGMML 文档（*doc a*），并按照我的意愿（并且需要）设置了 Header 属性，我在 notepad++ 上检查了我得到了所需的格式。当尝试使用 XMLReadFile 打开它并以其他名称 ( *doc b* ) 保存文档时，Header 属性混淆了。

我认为它发生在打开时，因为当我在 chrome 上打开*doc a （好文件）时，Header 的混合方式与在**doc b*上的方式完全相同。所以我认为 chrome 和 XMLReadFile 以相同的方式打开 XGMML 文档（混合 Header），并且在保存时不会发生任何不好的事情。

更重要的是，我不知道打开 XGMML 文档并且不更改 Header 的其他函数 - Header 或任何其他字段不会被更改非常重要（我尝试使用 XMLParseFile 但它似乎导致同样的问题）。

你知道为什么会这样吗？并且您知道打开 XGMML 文档并且不会混淆 Header（或任何其他字段）的功能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T09:28:58.363

假设您将属性称为属性：根据定义，XML 元素的属性没有重要的顺序。请在[此处](http://www.w3.org/TR/REC-xml/#sec-starttags)查看标准。

# matlab - 在 RBF 核的情况下支持向量和准确率之间的关系

> ID：10389944
> 
> 赞同：2
> 
> 时间：2012-04-30T20:10:51.537
> 
> 标签：matlab, kernel, svm, training-data

我正在使用 RBF 内核 matlab 函数。在几个数据集上，随着我继续增加 sigma 值，支持向量的数量增加并且准确性增加。而在一个数据集的情况下，当我增加 sigma 值时，支持向量会减少并且准确度会增加。在 RBF 内核的情况下，我无法分析支持向量与准确性之间的关系。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T21:30:14.230

支持向量的数量与准确性没有直接关系；它取决于数据的形状（以及您的 C/nu 参数）。

较高的 sigma 意味着内核是“更平坦”的高斯，因此决策边界“更平滑”；较低的 sigma 使其成为“更锐利”的峰值，因此决策边界更加灵活，并且如果它们是正确的答案，则能够重现奇怪的形状。如果 sigma 非常高，您的数据点将有非常广泛的影响；如果非常低，它们的影响将非常小。

因此，通常，增加 sigma 值会导致更多的支持向量：对于或多或少相同的决策边界，更多的点将落在边缘内，因为点变得“更模糊”。然而，增加的 sigma 也意味着，松弛变量“移动”点超过边距的代价更高，因此分类器最终可能会得到更小的边距和更少的 SV。当然，它也可能只是给你一个完全不同数量的 SV 的完全不同的决策边界。

在最大限度地提高准确性方面，您应该对许多不同的 C 和 sigma 值进行网格搜索，并选择在训练集上进行 3 折交叉验证时能够提供最佳性能的那个。一种合理的方法是从例如`2.^(-9:3:18)`C 和`median_eval * 2.^(-4:2:10)`;中进行选择。这些数字相当随意，但它们是我过去成功使用的数字。

# mysql - 在 MySQL 中规范化日期，其中一列包含逗号分隔的项目

> ID：10389945
> 
> 赞同：2
> 
> 时间：2012-04-30T20:10:54.500
> 
> 标签：mysql

我有一个数据库，其中一个字段包含我想规范化的逗号分隔列表。该字段看起来像这样......

```
16-BIT, 20 MHz, MICROPROCESSOR, PQFP100 
```

它不会总是有相同数量的逗号分隔项目，但是我唯一关心的项目，我想要拉出和规范化的项目总是最后一个，在上面的“PQFP100”的情况下。

我想我理解将列取出并放入另一个表的 sql，但我不知道如何只选择其中的 PQFP100 部分。这是我到目前为止所拥有的...

```
insert ignore into part_pkg (pkg_name)
select part_desc
from part_raw
group by pkg_name; 
```

我想我需要一些关于'from part_raw'部分的东西，但我什至不知道从哪里开始:)

希望这足够清楚。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T20:21:26.970

如果你选择这个：

```
select substring_index('16-BIT, 20 MHz, MICROPROCESSOR, PQFP100',',',-1) 
```

你会得到这个：

```
PQFP100 
```

所以插入语句必须是这样的：

```
insert ignore into part_pkg (pkg_name)
select substring_index(part_desc',',',-1)
from part_raw
group by pkg_name; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T20:21:56.137

尝试这个：

```
insert ignore into part_pkg (pkg_name)
select SUBSTRING_INDEX(part_desc, ',', -1)
from part_raw
group by pkg_name; 
```

# mysql - 让 MySQL 从多个索引中读取？

> ID：10389946
> 
> 赞同：1
> 
> 时间：2012-04-30T20:10:57.577
> 
> 标签：mysql, indexing, explain

让我们从一个简单的例子开始：

```
CREATE TABLE `test` (
`id` INT UNSIGNED NOT NULL,
`value` CHAR(12) NOT NULL,
INDEX (`id`),
INDEX (`value`)
) ENGINE = InnoDB; 
```

所以 2 列，都被索引。我认为这意味着 MySQL 将不再需要读取实际的表，因为所有数据都存储在索引中。

```
mysql> EXPLAIN SELECT id FROM test WHERE id = 1;
+----+-------------+-------+------+---------------+------+---------+-------+------+-------------+
| id | select_type | table | type | possible_keys | key  | key_len | ref   | rows | Extra       |
+----+-------------+-------+------+---------------+------+---------+-------+------+-------------+
|  1 | SIMPLE      | test  | ref  | id            | id   | 4       | const |    1 | Using index |
+----+-------------+-------+------+---------------+------+---------+-------+------+-------------+ 
```

“使用索引”，非常好。据我了解，这意味着它是从索引中读取数据，而不是从实际表中读取数据。但我真正想要的是“价值”列。

```
mysql> EXPLAIN SELECT value FROM test WHERE id = 1;
+----+-------------+-------+------+---------------+------+---------+-------+------+-------+
| id | select_type | table | type | possible_keys | key  | key_len | ref   | rows | Extra |
+----+-------------+-------+------+---------------+------+---------+-------+------+-------+
|  1 | SIMPLE      | test  | ref  | id            | id   | 4       | const |    1 |       |
+----+-------------+-------+------+---------------+------+---------+-------+------+-------+ 
```

嗯，这次没有“使用索引”。

我认为如果我添加一个涵盖两列的索引可能会有所帮助。

```
ALTER TABLE `test` ADD INDEX `id_value` (`id`,`value`); 
```

现在让我们再次运行之前的选择语句并告诉它使用新索引。

```
mysql> EXPLAIN SELECT id, value FROM test USE INDEX (id_value) WHERE id = 1;
+----+-------------+-------+------+---------------+----------+---------+-------+------+-------------+
| id | select_type | table | type | possible_keys | key      | key_len | ref   | rows | Extra       |
+----+-------------+-------+------+---------------+----------+---------+-------+------+-------------+
|  1 | SIMPLE      | test  | ref  | id_value      | id_value | 4       | const |    1 | Using index |
+----+-------------+-------+------+---------------+----------+---------+-------+------+-------------+ 
```

赞美主，它是从索引中读取的。

但实际上我并不真的需要组合索引来做其他事情。是否可以让 MySQL 从 2 个单独的索引中读取？

任何见解将不胜感激。

**编辑：**好的，还有另一个例子。这个是原始表定义（所以每列都有一个索引）。

```
mysql> EXPLAIN SELECT t1.value
    -> FROM test AS t1
    -> INNER JOIN test AS t2
    -> ON t1.id <> t2.id AND t1.value = t2.value
    -> WHERE t1.id = 1;
+----+-------------+-------+------+---------------+-------+---------+----------+------+-------------+
| id | select_type | table | type | possible_keys | key   | key_len | ref      | rows | Extra       |
+----+-------------+-------+------+---------------+-------+---------+----------+------+-------------+
|  1 | SIMPLE      | t1    | ref  | id,value      | id    | 4       | const    |    1 |             |
|  1 | SIMPLE      | t2    | ref  | value         | value | 12      | t1.value |    1 | Using where |
+----+-------------+-------+------+---------------+-------+---------+----------+------+-------------+ 
```

这肯定必须从两个索引中读取（因为在连接条件中使用了两个字段）但它仍然从实际记录中读取数据，对吗？为什么它不只使用从索引中读取的数据？还是它实际上使用了这些数据而不说“使用索引”？

再次感谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T20:15:39.977

The `key`, `ref` and `rows` columns are more telling for this purpose. In each case, they indicate that MySQL has selected an index, has a value to lookup in that index, and is retrieving only one row from the table as a result. This is what you were after.

In your second query, MySQL still needs to retrieve the `value` from the record even though it has located the record on `id` via an index. If your `WHERE` criterion looked up based on `value`, then that index would have been used and there would have been no need to retrieve the record.

[The manual](http://dev.mysql.com/doc/refman/5.1/en/explain-output.html) on `Using index` `Extra` information:

> The column information is retrieved from the table using only information in the index tree without having to do an additional seek to read the actual row. This strategy can be used when the query uses only columns that are part of a single index.
> 
> If the `Extra` column also says `Using where`, it means the index is being used to perform lookups of key values. Without `Using where`, the optimizer may be reading the index to avoid reading data rows but not using it for lookups. For example, if the index is a covering index for the query, the optimizer may scan it without using it for lookups.
> 
> For `InnoDB` tables that have a user-defined clustered index, that index can be used even when `Using index` is absent from the `Extra` column. This is the case if `type` is [`index`](http://dev.mysql.com/doc/refman/5.5/en/explain-output.html#jointype_index) and `key` is `PRIMARY`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T20:18:36.553

在您的第一个查询中，MySQL 说`using index`因为它可以通过查看索引和单独的索引来回答您的查询。它不需要去表中查找`id`列的对应值，因为这实际上与它已经在索引中得到的相同。

在第二个查询中，MySQL 确实需要查看表以获取正确的值，但它仍在使用索引，正如您在语句的`key`列中看到的那样。`EXPLAIN`

在第三个查询中，MySQL 再次不必再查看表，因为它需要回答您的查询的所有信息都在多列索引中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-30T20:53:46.763

[5.0 的新功能，MySQL 可以通过Index merge](http://dev.mysql.com/doc/refman/5.0/en/index-merge-optimization.html)在一张表上使用多个索引，尽管它们（到目前为止）不如多列[覆盖索引](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CDAQFjAA&url=http://www.mysqlperformanceblog.com/2006/11/23/covering-index-and-prefix-indexes/&ei=JvieT6eSJIaX6AHM8ND0Dg&usg=AFQjCNH_7lY9C-RlyVZlySqXCU8cveILwA&sig2=GmdsvKB7Q78Yp0RdPV80Hw)那么快，因此 MySQL 只会在特殊情况下使用它们。

因此，除了合并索引的情况，MySQL 每个表只使用一个索引。

不要太害怕覆盖索引。他们可以履行双重职责。索引是最左边的前缀，因此您可以对最左边的列或第一和第二列使用多列索引，依此类推。

例如，如果您有多列索引`id_value`( `id`, `value`)，则可以删除索引`id`( `id`)，因为它是多余的。`id_value`索引也可以仅用于 id 列。

此外，在 InnoDB 中，每个索引都会自动包含主键列，因此如果`id`是主键，则上的索引与在 ( , )`value`上的覆盖索引提供相同的好处。`id``value`

每个索引都会对插入和更新索引列产生负面影响。有一个权衡，只有你（和一些测试）可以决定覆盖索引是否适合你。

删除对索引没有太大影响，因为它们只是“标记为删除”，并且只有在系统负载较低时才会被清除。

索引也会占用内存。给定足够的内存，正确配置的 MySQL 服务器会将每个索引加载到内存中。这使得使用覆盖索引的选择非常快。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-30T20:46:35.313

想一想索引是如何工作的。

假设您的`test`表中有 10k 条记录，并且列上有索引`value`。当您使用数据（或显式使用[`ANALYZE`](http://dev.mysql.com/doc/refman/5.5/en/analyze-table.html)命令）填充表时，数据库会保留有关表和所有索引的统计信息。

在您发出查询时，有多种方法可以向您提供数据。在`test`表和`value`列的非常简化的情况下，类似于：

```
SELECT * FROM test WHERE value = 'a string'; 
```

数据库[`query planner`](http://dev.mysql.com/doc/refman/5.5/en/execution-plan-information.html)有 2 个选项：

1.  对整个表执行顺序扫描并过滤结果或
2.  执行索引扫描以查找所需的数据条目。

查询索引有一些性能损失，因为数据库必须在索引中寻找值。如果我们认为您的[`B-tree`](http://dev.mysql.com/doc/refman/5.5/en/index-btree-hash.html)索引处于“良好状态”（即[平衡](http://eternallyconfuzzled.com/tuts/datastructures/jsw_tut_rbtree.aspx)），那么您将在索引中最多 14 次查找中找到您的条目（如 2^14 > 10k，我希望我在这里没有弄错）。因此，为了向您提供 1 行的`a string`价值，数据库必须在索引中执行多达 14 次查找，并在您的表中执行 1 次额外查找。在不幸的情况下，这将意味着系统将执行 15 次随机 I/O 操作以从您的磁盘中读取自定义数据部分。

如果只有一个`value`需要在索引中查找并且您的表非常大，那么索引操作将为您带来显着的性能提升。但是有一点之后索引扫描变得更加昂贵，然后是简单的顺序扫描：

*   当您的表在磁盘上占用非常小的空间时；
*   当您的查询需要查找表中记录总数的大约 10% 时`test`（这个数字`10%`非常近似，不要想当然）。

需要考虑的事项：

*   数字数据类型的比较操作要便宜得多，然后比较字符串；
*   统计准确性；
*   查询索引/表的频率，或者在数据库的共享池中找到所需数据的概率。

这些都会影响性能以及数据库选择交付数据的计划。

所以，索引并不总是好的。

回答您的`to read from 2 separate indexes`问题：您正在寻找的功能称为[`Bitmap index`](http://en.wikipedia.org/wiki/Bitmap_index)，据我所知，它在 MySQL 中不可用。

# javascript - Ember.js：如何访问嵌套视图实例

> ID：10389947
> 
> 赞同：18
> 
> 时间：2012-04-30T20:11:04.260
> 
> 标签：javascript, ember.js

假设我正在定义嵌套视图，就像这样（[JSFiddle 上的代码示例](http://jsfiddle.net/Tx3NP/)）：

```
App.ParentView = Ember.View.extend({
    ChildView: Ember.View.extend({ ... }),
    method: function() {
        this.get('ChildView') // => this is the class, not the instance :(
    }
});​

{{#view App.ParentView}}
    {{#view ChildView}}
        ...
    {{/view}}
{{/view}} 
```

我想避免在父视图和子视图之间绑定很多属性。相反，我想做类似`this.getPath('ChildView.foo')`. 但`this.get('ChildView')`返回我使用 Ember.View.extend 创建的类，而不是实例，因此我无法访问属性。

是否有一种规范的方法可以从父视图的方法内部访问子视图的当前实例？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-05-01T07:39:33.793

您可以通过视图传递`viewName`变量并通过父级访问视图。

见[http://jsfiddle.net/Tx3NP/5/](http://jsfiddle.net/Tx3NP/5/)

```
{{#view App.ParentView}}
  {{#view childView viewName="childViewInstance"}}
     ...
  {{/view}}
{{/view}}
console.log(this.get('childViewInstance.value')); 
```

或者您可以按照@weltraumpirat 的建议进行操作并访问该`this.get('childViews')`阵列。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T20:48:47.487

您可以使用`_childViews`数组：

```
 console.log( this._childViews[0].get('value') ); 
```

*或者*你可以给你的视图一个 id 并简单地使用 jQuery 来访问相应的 HTML 元素。

```
{{#view childView id="childView"}}

console.log( Em.$('#childView')[0].value ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-23T12:58:20.730

其实很简单。

从 2.10.0 开始，如果您在组件内部并且需要查找嵌套组件，只需搜索：

```
 const id = 'my-specific-id-im-looking-for',
    views = this.get('childViews');

  let count = views.length;

  if (count) {
    while (--count) {
      if (views[count].get('elementId') === id) {
        // this is your view. do stuff with it, call methods on it, whatevs;
        break;
      }
    }    
  } 
```

如果您在此之前，请尝试使用组件的方法`forEachChildView`

# ruby-on-rails-3 - Rails 3 应用程序中复杂的（对我而言）数据库查询

> ID：10389955
> 
> 赞同：0
> 
> 时间：2012-04-30T20:12:27.440
> 
> 标签：ruby-on-rails-3

1.  我们数据库中的一条记录跟踪了 A 向 B 赠送礼物的频率。
2.  我们数据库中的另一条记录跟踪人 B 向人 A 赠送礼物的频率。
3.  另一条记录跟踪人 A 向人 C 提供某物的频率。
4.  由于 C 从未向 A 提供过任何东西，因此没有任何记录。
5.  将该模式乘以与 A 有给予和/或接受关系的 50 个人。

用户表有 'id' 和 'name'

礼物表有'giver_id'和'receiver_id'

profile_pictures 有 'user_id' 和 'picture_url'

用户型号：

```
has_one :profile_picture
has_many :gifts 
```

简介图片：

```
belongs_to :user 
```

礼品型号：

```
belongs_to :user 
```

我无法从数据库中提取数组一次。数组需要按名称按字母顺序排列。我开始：

```
parties = Gift.where("giver_id = ? || receiver_id = ?", current_user.id, current_user.id) 
```

并试图向后工作。我尝试让所有用户都包含个人资料图片，并尝试将它们映射到 Gifts 数组。我无法做到这一点。

谢谢您的帮助。

更新：测试数据的当前结果：

```
Clower, Steve
Gallipert, Jay   
Gallipert, Erin
Gallipert, Jay   
Gallipert, Jay
Gallipert, Linda   
Gallipert, Jay
Gallipert, Erin   
Gallipert, Jay
Garrent, Kara   
Gallipert, Jay
Atkal, Andrew   
Gallipert, Jay
Dystrom, Paul   
Gallipert, Jay
Clower, Steve   
Gallipert, Linda
Gallipert, Jay   
Garrent, Kara
Gallipert, Jay 
```

我需要的：

```
Atkal, Andrew
Clower, Steve 
Dystrom, Paul   
Gallipert, Erin   
Gallipert, Jay  
Gallipert, Linda   
Garrent, Kara 
```

我想知道是否唯一的方法是

1.  将所有名称转储到一个数组中
2.  在 Ruby 中对数组进行排序
3.  用排序后的数组重新查询数据库，得到头像

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T07:01:04.483

```
class Gift
  belongs_to :giver, :foreign_key => "giver_id", :class_name => "User"
  belongs_to :receiver, :foreign_key => "receiver_id", :class_name => "User"
end

gifts = Gift.where("giver_id = :id OR receiver_id = :id",:id => current_user.id).includes(:giver => :profile_picture).order('users.name').includes(:receiver => :profile_picture)
# gifts sorted by giver name
# users and profile picture are included in gifts array 
```

使用示例：

```
gifts.each do |gift|
  gift.giver.name # giver name
  gift.giver.profile_picture.picture_url # giver picture url
  gift.receiver.name # receiver name
  gift.receiver.profile_picture.picture_url # receiver picture url
end 
```

更新：

对于测试数据，请尝试以下代码：

```
gifts = Gift.select('giver_id,receiver_id').uniq.includes(:giver => :profile_picture,:receiver => :profile_picture)
gifts.sort!{|x,y| "#{x.giver.name} #{x.receiver.name}" <=> "#{y.giver.name} #{y.receiver.name}"}
gifts.each{|g| puts "#{g.giver.name}, #{g.receiver.name}"} 
```

输出是：

```
Atkal, Andrew
Clower, Steve
Dystrom, Paul
Gallipert, Erin
Gallipert, Jay
Gallipert, Linda
Garrent, Kara 
```

不是很优雅，但很快。也许有人帮助我们通过 SQL 对礼物进行排序。

# c++ - 右值模板参数隐式用作左值，并且 std::forwarding 工作

> ID：10389958
> 
> 赞同：1
> 
> 时间：2012-04-30T20:12:55.213
> 
> 标签：c++, templates, c++11, rvalue-reference, perfect-forwarding

[这个](http://en.cppreference.com/w/cpp/utility/forward)关于用法的例子`std::forward`让我感到困惑。这是我编辑的版本：

```
#include <iostream>
#include <memory>
#include <utility>
using namespace std;

struct A{
    A(int&& n) { cout << "rvalue overload, n=" << n << "\n"; }
    A(int& n)  { cout << "lvalue overload, n=" << n << "\n"; }
};

template<typename> void template_type_dumper();

template<class T, class U>
unique_ptr<T> make_unique(U&& u){
    //Have a "fingerprint" of what function is being called
    static int dummyvar;
    cout<<"address of make_unique::dummyvar: "<<&dummyvar<<endl;
    //g++ dumps two warnings here, which reveal what exact type is passed as template parameter
    template_type_dumper<decltype(u)>;
    template_type_dumper<U>;

    return unique_ptr<T>(new T(forward<U>(u)));
}

int main()
{
    unique_ptr<A> p1 = make_unique<A>(2); // rvalue
    int i = 1;
    unique_ptr<A> p2 = make_unique<A>(i); // lvalue
} 
```

输出是

```
address of make_unique::dummyvar: 0x6021a4
rvalue overload, n=2
address of make_unique::dummyvar: 0x6021a8
lvalue overload, n=1 
```

以及关于引用的警告，以`template_type_dumper`显示在第一个实例化中，`decltype(u) = int&&`and `U = int`，对于第二个`decltype(u) = int&`and `U = int&`。

很明显，正如预期的那样，有两种不同的实例化，但她是我的问题：

1.  怎么可以`std::forward`在这里工作？在第一个实例化中，它的模板参数是显式的`U = int`，它怎么知道它必须返回一个右值引用？如果我`U&&`改为指定会发生什么？
2.  `make_unique`被声明为采用右值引用。怎么会`u`是左值引用？有什么我遗漏的特殊规则吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T20:26:20.627

> `make_unique`被声明为采用右值引用。你怎么能成为左值引用？有什么我遗漏的特殊规则吗？

`make_unique`被声明为引用。需要推断出该参考是什么类型的。如果`foo`传递了类型的左值，`U`则由于引用折叠规则而推断为`foo&`和`U&&`成为`foo&`（基本上，将左值引用与另一个引用“组合”总是会产生左值引用；组合两个右值引用会产生右值引用）。`foo`如果传递了类型的右值，`U`则推导为`foo`和。`U&&``foo&&`

这是支持完美转发的原因之一：`U&&`您可以同时获取左值和右值，并`U`推断为匹配适当的值类别。然后，`std::forward`您可以转发保留相同值类别的值：在第一种情况下，您会得到`std::forward<foo&>`哪个转发左值，而在第二种情况下，您会得到`std::forward<foo>`哪个转发右值。

> 在第一次实例化中，它的模板参数显式为 U = int，它怎么知道它必须返回一个右值引用？

因为返回类型`std::forward<T>`总是`T&&`。如果你通过`int`它返回`int&&`。如果你通过它，它会因为引用折叠规则而再次`int&`返回。`int&`

> 如果我改为指定 U&& 会发生什么？

您将拥有`std::forward<int&&>`并且引用折叠规则`int&& &&`仍然会生成右值引用：`int&&`.

# android - google play 每个帐户的（免费）应用程序的最大数量º

> ID：10389963
> 
> 赞同：4
> 
> 时间：2012-04-30T20:13:29.753
> 
> 标签：android, google-play

我已经购买了一个许可证（帐户）来开发免费的 Android 应用程序。我可以上传的应用程序数量是否有限制？

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-30T20:28:38.930

我在与 Google 的人员环聊时问了这个问题。他们说他们不知道有任何限制。

我的公司现在已经开发了近 300 个应用程序。

# css - 如何调整 Wordpress 二十一十一主题，使页面宽度为 100% 并居中？

> ID：10389965
> 
> 赞同：0
> 
> 时间：2012-04-30T20:13:49.067
> 
> 标签：css, wordpress, width

我正在尝试调整我的 Wordpress 主题，并且我创建了一个基于 211 的子主题。我现在的主要问题是宽度。

请查看我仅使用 HTML 和 CSS 创建的实时示例。这就是我试图让我的 wordpress 主题看起来像： [http ://danapaigetrentlage.com/cfsa-comps/lff-profilepage.html](http://danapaigetrentlage.com/cfsa-comps/lff-profilepage.html)

我希望页面宽度为 100%，以便天空背景和白色环绕从页面水平流出，但我也希望内容在页面内居中。

通过查看我的 wordpress 网站，您可以了解我已经朝着这个目标走了多远：http: [//danapaigetrentlage.com/cfsa-test/](http://danapaigetrentlage.com/cfsa-test/)

您可以看到页面宽度超过 1000px（主题的默认宽度），但仍然不是全宽，并且有一个水平滚动条，而不是内容只是居中。

我只是不确定我在这里做错了什么。有任何想法吗？

谢谢，达娜

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T20:19:47.980

看起来这只是将body的填充设置为0的情况。

```
body {
    padding: 0;
} 
```

# r - R中多个图的常见图例

> ID：10389967
> 
> 赞同：23
> 
> 时间：2012-04-30T20:14:00.743
> 
> 标签：r, legend

我正在使用 R 和 Latex 一起绘制一些情节，并试图为所有人制作一个共同的传说。

我在同一页面上有六个单独的图。我在 R 中分别制作了每个图，然后在 Latex 中使用 \includegraphics 将它们显示在同一页面上。

每个图表都有相同的图例信息，所以我不想在每个图中都有一个图例，我希望在页面底部显示一个水平图例。不幸的是，我无法弄清楚如何在没有情节的情况下制作传奇。一旦我有了一个单独的图例图像，我就会知道如何使用 Latex 将它包含在页面底部。

我试图用来制作图例的代码是

```
plot(1, type = "n", axes=FALSE, xlab="", ylab="")
plot_colors <- c("blue","black", "green", "orange", "pink")

legend(.6,1.3,legend = c("Fabricated Metal", "Iron and Steel", "Paper", 
"Beverages", "Tobacco"), 
       col=plot_colors, lwd=5, cex=.5, horiz = TRUE) 
```

但是，字体太小，图例框的一侧被切断。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-04-30T21:44:18.100

我所说的一个简单的例子：

```
m <- matrix(c(1,2,3,4,5,6,7,7,7),nrow = 3,ncol = 3,byrow = TRUE)

layout(mat = m,heights = c(0.4,0.4,0.2))

for (i in 1:6){
    par(mar = c(2,2,1,1))
    plot(runif(5),runif(5),xlab = "",ylab = "")
}

plot(1, type = "n", axes=FALSE, xlab="", ylab="")
plot_colors <- c("blue","black", "green", "orange", "pink")
legend(x = "top",inset = 0,
        legend = c("Fabricated Metal", "Iron and Steel", "Paper","Beverages", "Tobacco"), 
        col=plot_colors, lwd=5, cex=.5, horiz = TRUE) 
```

![在此处输入图像描述](../Images/d753edc66ed08a3bda0728f2ed1d785b.png)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-30T21:32:35.293

尝试这个，

```
plot_colors <- c("blue","black", "green", "orange", "pink")
text <- c("Fabricated Metal", "Iron and Steel", "Paper", 
"Beverages", "Tobacco")
plot.new()
par(xpd=TRUE)
legend("center",legend = text, text.width = max(sapply(text, strwidth)),
       col=plot_colors, lwd=5, cex=1, horiz = TRUE)
par(xpd=FALSE) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2020-05-13T21:47:33.407

修改代码仅`par`用于对齐底部的图例。

```
 n <- 6
   par(oma = c(4,1,1,1), mfrow = c(2, 3), mar = c(2, 2, 1, 1))
   for (i in 1:n){
      plot(runif(5),runif(5),xlab = '',ylab = '')
   }
   par(fig = c(0, 1, 0, 1), oma = c(0, 0, 0, 0), mar = c(0, 0, 0, 0), new = TRUE)
   plot(0, 0, type = 'l', bty = 'n', xaxt = 'n', yaxt = 'n')
   legend('bottom',legend = c("Fabricated Metal", "Iron and Steel", "Paper", "Beverages", "Tobacco"), col = c("blue","black", "green", "orange", "pink"), lwd = 5, xpd = TRUE, horiz = TRUE, cex = 1, seg.len=1, bty = 'n')
   # xpd = TRUE makes the legend plot to the figure 
```

[![在此处输入图像描述](../Images/a8b97c5be458832e3736152c84e8d4a3.png)](https://i.stack.imgur.com/JHR6l.png)

# hadoop - map-reduce 输出中的“键”重复？

> ID：10389968
> 
> 赞同：-1
> 
> 时间：2012-04-30T20:14:03.993
> 
> 标签：hadoop, mapreduce

众所周知，无论是这

```
public static class SReducer extends MapReduceBase implements Reducer<Text, Text, Text, Text>
     {

        public void reduce(Text key, Iterator<Text> values, OutputCollector<Text, Text> output, Reporter reporter) throws IOException
        {
            StringBuilder sb = new StringBuilder();
            while (key.hasNext()) 
            {
                sb.append(key.next().toString());   
            }
            output.collect(key, new Text(sb.toString()));
        }

     } 
```

或者

```
public static class Reduce extends MapReduceBase implements Reducer<Text, Text, Text, Text> 
    {
        public void reduce(Text key, Iterator<Text> values, OutputCollector<Text, Text> output, Reporter reporter) throws IOException 
        {
            boolean start = true;
            StringBuilder sb = new StringBuilder();
            while (values.hasNext()) 
            {
                if(!start)
                {
                start=false;
                sb.append(values.next().toString());
                }           
            }
            output.collect(key, new Text(sb.toString()));
        }
    } 
```

这是我们用来消除输出中重复“值”的一种 reducer 函数。但是我应该怎么做才能消除重复的“钥匙”？任何想法？谢谢。

PS：更多信息：在我的 <key,values> 对中，键包含链接，值包含单词。但是在我的输出中，每个单词只出现一次，但是我得到了很多重复的链接。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T20:42:22.240

在 中，对于接收到的每个唯一键，`Reducer`都会有一次调用。它将接收该键的所有值。但是，如果您只关心键，并且只关心唯一键，那么就完全忽略这些值。每把钥匙你都会得到一个；用那个（非重复的）键做任何你想做的事。`reduce()``Reducer``reduce()`

# javascript - jQuery/Javascript：在函数中定义全局变量？

> ID：10389969
> 
> 赞同：8
> 
> 时间：2012-04-30T20:14:06.103
> 
> 标签：javascript, jquery, variables, global

我有这个代码：

```
 var one;
        $("#ma1").click(function() {
            var one = 1;
        })
        $("body").click(function() {
            $('#status').html("This is 'one': "+one);
        }) 
```

当我点击正文时，它说：这是'一个'：未定义。如何定义要在另一个函数中使用的全局变量？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-04-30T20:15:44.777

从函数内部删除`var`。

```
 $("#ma1").click(function() {
        one = 1;
    }) 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-04-30T20:15:36.493

If you want to make a global variable bind it to `window` object

```
window.one = 1; 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-04-30T20:16:22.087

```
 var one;//define outside closure

    $("#ma1").click(function() {
        one = 1; //removed var 
    })
    $("body").click(function(e) {
        $('#status').html("This is 'one': "+one);
    }) 
```

# .net - Appfabric 错误：错误代码 :子状态 : 客户端配置文件错误

> ID：10389973
> 
> 赞同：1
> 
> 时间：2012-04-30T20:14:22.810
> 
> 标签：.net, gac, appfabric, azure-appfabric

尝试对应用程序结构使用缓存时出现此错误。我正在按照本文中给出的示例进行[操作](http://msdn.microsoft.com/en-us/magazine/gg983488.aspx)。

错误代码：子状态：客户端配置文件中的错误。

“为 dataCacheClient 创建配置节处理程序时出错：无法加载文件或程序集‘Microsoft.ApplicationServer.Caching.Core’或其依赖项之一。系统找不到指定的文件。(C:\Projects\TestResults\test 2012-04-30 14_51_12\Out\Tests.DLL.config 第 5 行）“这是第 5 行的文本：”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T18:37:00.600

事实证明，这个错误是由两个不同版本的 Windows Azure SDK 的引用引起的。我最终从我的所有项目中使用了对[ServerAppFabric.Client](http://www.nuget.org/packages/ServerAppFabric.Client)的 nuget 引用，这个问题得到了解决。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T06:47:08.847

我想知道您是否使用最新的 Windows Azure SDK（包括 AppFabric）。您可以从[http://www.windowsazure.com/en-us/develop/downloads/](http://www.windowsazure.com/en-us/develop/downloads/)获得它。此外，您引用的文章有点旧。缓存服务的后期 CTP 中有一些重大更改。对于最新版本的缓存教程，我建议您查看[http://msdn.microsoft.com/en-us/wazplatformtrainingcourse_buildingappswithcacheservice_topic3#_Toc310505080](http://msdn.microsoft.com/en-us/wazplatformtrainingcourse_buildingappswithcacheservice_topic3#_Toc310505080)。

此致，

明旭。

# c++ - 二叉树顺序遍历导致堆栈溢出

> ID：10389978
> 
> 赞同：0
> 
> 时间：2012-04-30T20:14:45.127
> 
> 标签：c++, tree, binary-tree, stack-overflow

好的，我有一个读取方法可以正确读取值（全部 7000），（手写 15 个值作为树结构），不会产生任何错误。

但是，当涉及到二叉树的输出时，我使用的是几个网站上所述的方法。

我得到的错误是堆栈溢出，我假设它是由于递归调用并且从未爆发，但我不知道为什么这不起作用。

任何帮助表示赞赏，谢谢。

下面列出的代码：

```
// Read
void BinaryTreeStorage::read(ifstream& _fin)
{
        // Get first line with number of names in it
        string numberOfNamesString;
        getline(_fin, numberOfNamesString);

        // Loop through all the names
        string line;
        int num = 0;
        while (!_fin.eof())
        {
                getline(_fin, line);
                if (line != "")
                {
                        // Insert Value Here
                        if (root != NULL)
                        {
                                insert(line, root);
                        }
                        else
                        {
                                insert(line);
                        }
                }
        }
}

// Write
void BinaryTreeStorage::write(ofstream& _out) const
{
        inorderPrint(_out, root);
}

// inorderPrint
void BinaryTreeStorage::inorderPrint(ofstream& _out, node *_root) const
{
        if (_root != NULL)
        {
                // Inorder
                inorderPrint(_out, root->left);
                _out << root->nodeValue;
                cout << root->nodeValue << " ";
                inorderPrint(_out, root->right);
        }
}

// Insert if root is null
void BinaryTreeStorage::insert(string _nodeValueIn)
{
    if(root!=NULL)
        insert(_nodeValueIn, root);
    else
    {
        root=new node;
        root->nodeValue=_nodeValueIn;
        root->left=NULL;
        root->right=NULL;
    }
}

// Insert when root is not null
void BinaryTreeStorage::insert(string _nodeValueIn, node *leaf)
{
    if(_nodeValueIn< leaf->nodeValue)
    {
        if(leaf->left!=NULL)
            insert(_nodeValueIn, leaf->left);
        else
        {
            leaf->left=new node;
            leaf->left->nodeValue=_nodeValueIn;
            leaf->left->left=NULL;    //Sets the left child of the child node to null
            leaf->left->right=NULL;   //Sets the right child of the child node to null
        }  
  }
  else if(_nodeValueIn>=leaf->nodeValue)
  {
        if(leaf->right!=NULL)
            insert(_nodeValueIn, leaf->right);
        else
        {
            leaf->right=new node;
            leaf->right->nodeValue=_nodeValueIn;
            leaf->right->left=NULL;  //Sets the left child of the child node to null
            leaf->right->right=NULL; //Sets the right child of the child node to null
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T21:26:11.457

您在 BinaryTreeStorage::inorderPrint 中有一个错误，您的参数**_root**没有在预期的地方使用：您总是在**root**上循环。

提示：避免使用相似的名称！

提示：避免*使用 std*以避免错误，除非您在嵌套模板中过于频繁地编写 std::。

提示：不要在名称的开头或结尾使用 _。

提示：不要与 NULL 比较：写 if(n) 而不是 if(n!=NULL)。

提示：不需要时不要嵌套块：

```
void BinaryTreeStorage::inorderPrint(std::ofstream& out, node *n) const
{
    if(!n) return;

    inorderPrint(out, n->left);
    out << n->nodeValue; // no separator??
    std::cout << n->nodeValue << " ";
    inorderPrint(out, n->right);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T20:42:44.050

```
void BinaryTreeStorage::inorderPrint(ofstream& _out, node *_root) const
{
        if (_root != NULL)
        {
                // Inorder
                inorderPrint(_out, root->left); 
```

在上面的代码中，我可以看到已`_root`定义，但您正在`root`调用中使用（上面的最后一行）。我认为这导致了无限循环。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T20:18:29.223

当你构建你的树节点时，你是否确保左右指针被初始化为 NULL？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-30T20:50:24.233

调用树`inorderPrint`的深度与树本身的深度相同。看起来您没有尝试保持树的平衡，因此深度可以与树的大小一样大。

有几种方法可以解决这个问题。您可以确保树始终保持平衡，以便深度与树的大小成对数增长。或者您可以使树[threaded](http://en.wikipedia.org/wiki/Threaded_binary_tree)，这使您可以迭代地访问节点。

# c++ - How to get file suffix in c++?

> ID：10389983
> 
> 赞同：1
> 
> 时间：2012-04-30T20:15:08.093
> 
> 标签：c++

I want to get the suffix(.txt,.png etc.) of a file that I know that exists in some folder. I know that the file name(prefix) is unique in this folder. The language is c++.

thanks

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T20:24:14.653

假设“后缀”是文件扩展名，您可以这样做：

```
char * getfilextension(char * fullfilename)
{
   int size, index;
   size = index = 0;

   while(fullfilename[size] != '\0') {
      if(fullfilename[size] == '.') {
         index = size;
      }
       size ++; 
   }

   if(size && index) {
      return fullfilename + index;
   }
      return NULL;
} 
```

它是 C 代码，但我相信可以很容易地移植到 C++（也许没有变化）。

```
getfilextension("foo.png"); /* output -> .png */ 
```

我希望这对你有帮助。

**更新：**

您将需要扫描目录的所有文件并比较每个不带扩展名的文件是否等于您的目标。

```
 #include <stdio.h>
    #include <unistd.h>
    #include <stdlib.h>
    #include <limits.h>
    #include <dirent.h>
    #include <string.h>

    //.....

    char * substr(char * string, int start, int end)
    {
       char * p = &string[start];
       char * buf = malloc(strlen(p) + 1);
       char * ptr = buf;
       if(!buf) return NULL;

       while(*p != '\0' && start < end) {
          *ptr ++ = *p++;
          start ++;
       }

       *ptr++ = '\0';

       return buf;

    }

    char * getfilenamewithoutextension(char * fullfilename)
    {
       int i, size;
       i = size = 0;

       while(fullfilename[i] != '\0') {
          if(fullfilename[i] == '.') {
             size = i;
          }

          i ++;
       }

       return substr(fullfilename, 0, size);
    }

    char * getfilextension(char * fullfilename)
    {
       int size, index;
       size = index = 0;

       while(size ++, fullfilename[size]) {
          if(fullfilename[size] == '.') {
             index = size;
          }
       }

       if(size && index) {
          return fullfilename + index;
       }
          return NULL;
    }

   char*FILE_NAME;
   int filefilter(const struct dirent * d)
   {
      return strcmp(getfilenamewithoutextension((char*)d->d_name), FILE_NAME) == 0;
   } 
```

接着：

```
 void foo(char * path, char * target)  {
   FILE_NAME = target;
   struct dirent ** namelist;
   size_t dirscount;
   dirscount = scandir(path, &namelist, filefilter, alphasort);

   if(dirscount > 0) {
      int c;
      for(c = 0; c < dirscount; c++) {
            printf("Found  %s filename,the extension is %s.\n", target, getfilextension(namelist[c]->d_name));
            free(namelist[c]);
      }

      free(namelist);
   } else {
      printf("No files found on %s\n", path);
   } 
```

}

和主要代码：

```
int main(int argc, char * argv[])
{

   foo(".", "a"); /* The .(dot) scan the current path */
} 
```

对于包含此文件的目录：

```
a.c  a.c~  a.out
a.o  makefile test.cs 
```

输出是：

```
Found  a filename,the extension is .c.
Found  a filename,the extension is .c~.
Found  a filename,the extension is .o.
Found  a filename,the extension is .out. 
```

注意：该[`scandir()`](http://www.delorie.com/gnu/docs/glibc/libc_275.html)函数是 GNU 扩展/GNU 库的一部分，如果您的编译器上没有此函数，请告诉我，我将为它写一个别名或使用[此](http://opensource.apple.com/source/Libc/Libc-167/gen.subproj/scandir.c)实现（不要忘记阅读许可证） .

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T20:28:09.663

如果您使用的是 Windows，请使用[PathFindExtension](http://msdn.microsoft.com/en-us/library/windows/desktop/bb773587%28v=vs.85%29.aspx)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T20:30:28.427

在 C++ 中没有列出目录内容的标准功能。因此，如果您知道应用程序中允许的扩展名，您可以遍历并查找文件是否存在。

其他选项是使用操作系统特定的 API 或使用类似 Boost 的东西。您还可以使用“ls | grep *filename”或“dir”命令转储并解析输出。

# android - TabHost activity

> ID：10389984
> 
> 赞同：0
> 
> 时间：2012-04-30T20:15:10.710
> 
> 标签：android, android-layout, android-activity, tabs

I have a beach layout of 12 beaches. And i want to add each of them a tabhost with two tabs one info (this is default) and the other map. I have create two activities for each of the two info and map and one third to put together this two? I have to do and for the other 11 beaches?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T20:35:06.607

不确定您拥有什么样的数据，但这总共需要 37 个活动（1 个“主要”活动，每个海滩有 3 个活动）。那样，太复杂了。

相反，将所有海滩数据放入数据库中。然后，当您选择要查看信息的海滩时，将用户移动到两个选项卡视图，并让这些选项卡从数据库中提取特定海滩的地图和信息数据。

仅供参考，您可能不需要两个选项卡中的每一个都需要完整的活动：给每个选项卡一个 View 会更轻量级，除非有特定原因您需要其中的活动。

# python - What are the reasons for not hosting a compiler on a live server?

> ID：10389985
> 
> 赞同：4
> 
> 时间：2012-04-30T20:15:12.937
> 
> 标签：python, deployment, compiler-construction, pip, binaries

Where I currently work we've had a small debate about deploying our Python code to the production servers. I voted to build binary dependencies (like the python mysql drivers) on the server itself, just using `pip install -r requirements.txt`. This was quickly vetoed with no better explanation that "we don't put compilers on the live servers". As a result our deployment process is becoming convoluted and over-engineered simply to avoid this compilation step.

My question is this: What's the reason these days to avoid having a compiler on live servers?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-01T03:13:53.880

一般来说，关于服务器安装的普遍看法是它们应该尽可能地精简。这样做有一些动机，但它们并没有真正将所有这些直接应用于您关于编译器的问题：

*   **尽量减少资源使用。**GCC 可能会占用一点额外的磁盘空间，但可能还不够重要——而且它大部分时间都不会运行，所以 CPU/内存使用不是一个大问题。
*   **尽量减少复杂性**。在您的服务器上构建可能会在您的构建过程中添加更多故障模式（如果您在其他地方构建，那么至少在您弄乱生产服务器*之前*您会发现一些错误），但否则，它不会妨碍您.
*   **最小化[攻击面](https://en.wikipedia.org/wiki/Attack_surface)**。正如其他人指出的那样，当攻击者可以使用编译器时，您可能已经被搞砸了。

在我的公司，我们通常不太关心编译器是否安装在我们的服务器上，但我们也*从不*在我们的服务器上运行`pip`，原因完全不同。我们并不关心包在哪里构建，而是何时以及如何下载它们。

我们当中特别偏执的人会注意到 pip（和 easy_install）会很高兴地从 PYPI 安装包，而无需任何形式的身份验证（没有 SSL，没有包签名，...）。此外，其中许多实际上并未托管在 PYPI 上。pip 和 easy_install 遵循重定向。所以，这里有两个问题：

*   如果 pypi - 或托管您的依赖项的任何其他站点 - 出现故障，那么您的构建过程将失败
*   如果攻击者在尝试下载依赖包时设法对您的服务器执行中间人攻击，那么他将能够在下载中插入恶意代码

所以，我们在第一次添加依赖的时候下载包，尽量确保源是正版的（这不是万无一失的），并将它们添加到我们自己的版本控制系统中。我们确实在单独的构建服务器上构建我们的包，但这并不重要；我们只是发现拥有一个可以快速部署到多个实例的二进制包很有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T20:30:09.143

我建议参考这个[serverfault 帖子](https://serverfault.com/questions/143364/remote-server-security-handling-compiler-tools)。

避免漏洞被远程编译是有意义的

对我来说，就安全性而言，与使用编译器相比，它只会使劫持者的任务更难完成，但这并不完美。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T20:23:40.910

会给服务器带来很大的压力吗？

# javascript - IE7 excanvas drawImage workaround?

> ID：10389987
> 
> 赞同：3
> 
> 时间：2012-04-30T20:15:22.143
> 
> 标签：javascript, internet-explorer-7, excanvas

Ahoy StackOverflow!

I've run into the following problem: on IE7 only, if I call drawImage() after drawing anything to the canvas, excanvas does not draw the image at the desired x,y coordinates. I have looked on the excanvas project page/ google group, and found that there are known issues with the drawImage() function. ( for example: [http://code.google.com/p/explorercanvas/issues/detail?id=104&q=IE7](http://code.google.com/p/explorercanvas/issues/detail?id=104&q=IE7) )

I have tried restoring the identity matrix, as suggested here: [Excanvas vml positioning issue](https://stackoverflow.com/questions/8112496/excanvas-vml-positioning-issue) , though it appears to have had no effect.

Attached is a simple html document demonstrating this issue:

```
<!DOCTYPE HTML>
<html>
<head>
    <script type="text/javascript" src="excanvas.js"></script>
    <script type="text/javascript">
        window.onload = function(){
            var icon, ctx;

            icon        = new Image();
            icon.width  = "20";
            icon.height = "20";
            icon.src    = "http://www.shangalulu.com/resources/images/icons/small/30.png";
            icon.onload = function(){
                var ctx;

                ctx = document.getElementById('the_canvas').getContext('2d');

                ctx.beginPath();
                ctx.moveTo(0,0);
                ctx.lineTo(500,0);
                ctx.lineTo(500,500);
                ctx.lineTo(0,500);
                ctx.lineTo(0,0);
                ctx.moveTo(200,200);
                ctx.lineTo(300,200);
                ctx.lineTo(300,300);
                ctx.lineTo(200,300);
                ctx.lineTo(200,200);
                ctx.moveTo(0,0);
                ctx.lineTo(500,500);
                ctx.moveTo(0,500);
                ctx.lineTo(500,0);
                ctx.stroke();

                ctx.drawImage(icon, 190, 190, 20, 20);
                ctx.drawImage(icon, 240, 240, 20, 20);
                ctx.drawImage(icon, 290, 290, 20, 20);

                return;
            }
        }
    </script>

</head>
<body>
    <canvas id="the_canvas" width="500" height="500"></canvas>
</body>
</html> 
```

If you need the excanvas library to run this, you can grab it from here: [http://code.google.com/p/explorercanvas/](http://code.google.com/p/explorercanvas/)

The above script should do the following:

1.  it should draw an outline of the outer edges of the canvas (so you can see it)
2.  it should draw a 100x100 rectangle in the middle of the canvas.
3.  it should draw two lines that cross through the center of the canvas.
4.  it should draw three images: one on the top left corner of the inner box, one at the center, and one on the bottom right corner of the inner box.

What I would like to know is: Is there a known patch/workaround to this problem?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T16:08:02.177

我也一直在拉头发...

我只能找到一种解决方法，只要您在绘制图像之前不应用转换，它就可以正常工作。这意味着您将 excanvas.js 中的函数**drawImage**替换为该函数：

```
contextPrototype.drawImage = function(image, var_args) {
var dx, dy, dw, dh, sx, sy, sw, sh;

// to find the original width we overide the width and height
var oldRuntimeWidth = image.runtimeStyle.width;
var oldRuntimeHeight = image.runtimeStyle.height;
image.runtimeStyle.width = 'auto';
image.runtimeStyle.height = 'auto';

// get the original size
var w = image.width;
var h = image.height;

// and remove overides
image.runtimeStyle.width = oldRuntimeWidth;
image.runtimeStyle.height = oldRuntimeHeight;

if (arguments.length == 3) {
  dx = arguments[1];
  dy = arguments[2];
  sx = sy = 0;
  sw = dw = w;
  sh = dh = h;
} else if (arguments.length == 5) {
  dx = arguments[1];
  dy = arguments[2];
  dw = arguments[3];
  dh = arguments[4];
  sx = sy = 0;
  sw = w;
  sh = h;
} else if (arguments.length == 9) {
  sx = arguments[1];
  sy = arguments[2];
  sw = arguments[3];
  sh = arguments[4];
  dx = arguments[5];
  dy = arguments[6];
  dw = arguments[7];
  dh = arguments[8];
} else {
  throw Error('Invalid number of arguments');
}
/////////////////////////// MODIFIED BIT ///////////////////////////
var vmlStr = [];
vmlStr.push('<g_vml_:image src="', image.src, '"',
            ' style="position:absolute;',
            ' top:', dy, 'px;',
            ' left:', dx, 'px;',
            ' width:', dw, 'px;',
            ' height:', dh, 'px;"',
            ' cropleft="', sx / w, '"',
            ' croptop="', sy / h, '"',
            ' cropright="', (w - sx - sw) / w, '"',
            ' cropbottom="', (h - sy - sh) / h, '"',
            ' />');
/////////////////////////// END OF MODIFIED BIT ///////////////////////////

this.element_.insertAdjacentHTML('BeforeEnd',
                                vmlStr.join(''));
}; 
```

它所做的只是直接在伪画布内创建一个 VML 图像，而不是像最初那样将其包装在一个组中。出于某种原因，原始代码导致图像周围出现左侧和顶部填充，并且无法弄清楚原因。在我们了解其原因之前，我们将无法找到适当的解决方案......

# gdb - Missing separate debuginfos, use: debuginfo-install glibc-2.12-1.47.el6_2.9.i686 libgcc-4.4.6-3.el6.i686 libstdc++-4.4.6-3.el6.i686

> ID：10389988
> 
> 赞同：59
> 
> 时间：2012-04-30T20:15:24.313
> 
> 标签：gdb, centos

CentOS 6.2 + GNU gdb (GDB) Red Hat Enterprise Linux (7.2-50.el6)

When I debug a simple c++ code with GDB, I saw the following warning:

```
Missing separate debuginfos, use: debuginfo-install glibc-2.12-1.47.el6_2.9.i686 libgcc-4.4.6-3.el6.i686 libstdc++-4.4.6-3.el6.i686 
```

I have tried the following methods and none of them fix the problems:

1.  Search SO

2.  `yum install glibc`

3.  `debuginfo-install glibc-2.12-1.47.el6_2.9.i686 libgcc-4.4.6-3.el6.i686 libstdc++-4.4.6-3.el6.i686`

In fact, when I install those RPM one by one, I just realized that they are installed already.

```
[root@localhost Excluded]# rpm -ivh glibc-2.12-1.47.el6_2.9.i686.rpm 
Preparing...                ########################################### [100%]
    package glibc-2.12-1.47.el6_2.9.i686 is already installed
[root@localhost Excluded]# ls *.rpm
glibc-2.12-1.47.el6_2.9.i686.rpm  libgcc-4.4.6-3.el6.i686.rpm
[root@localhost Excluded]# rpm -ivh libgcc-4.4.6-3.el6.i686.rpm 
Preparing...                ########################################### [100%]
    package libgcc-4.4.6-3.el6.i686 is already installed
[root@localhost Excluded]# rpm -ivh libstdc++-4.4.6-3.el6.i686.rpm 
warning: libstdc++-4.4.6-3.el6.i686.rpm: Header V4 DSA/SHA1 Signature, key ID 192a7d7d: NOKEY
Preparing...                ########################################### [100%]
    package libstdc++-4.4.6-3.el6.i686 is already installed
    file /usr/lib/libstdc++.so.6.0.13 from install of libstdc++-4.4.6-3.el6.i686 conflicts with file from package libstdc++-4.4.6-3.el6.i686 
```

Why GDB cannot find it?

**Question**: Do I have to worry about this issue? If not, how to turn it off? If yes, how to fix it?

Thank you

* * *

## 回答 #1

> 赞同：107
> 
> 时间：2013-06-19T14:57:25.417

`debuginfo-install`是 的命令`yum-utils`，所以

1.  `yum install yum-utils`
2.  `debuginfo-install glibc`
3.  如果警告仍然存在，请编辑`/etc/yum.repos.d/CentOS-Debuginfo.repo`，设置`enabled=1`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-07T07:30:57.940

万一其他人遇到同样的问题，

我已经更新了 glibc，并且以某种方式刷新了旧的 ldconfig 在运行应用程序时遇到了这个错误

> 加载共享库时出错：libjson-c.so.2：无法打开共享对象文件：没有这样的文件或目录

即使在设置之后`LD_LIBRARY_PATH`它也不起作用：

```
LD_LIBRARY_PATH=/usr/local/lib
export LD_LIBRARY_PATH 
```

最后，下面的命令来救援。

```
// Add you library path here.
echo /usr/local/lib >> /etc/ld.so.conf

// And then Run ldconfig to reflect the path
ldconfig 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-11-27T03:34:31.773

接受答案的顺序对我不起作用。

我遵循了评论中的一些提示，这是我在全新安装的 CentOS 7.2 中尝试并成功的方法

1.  从@lkraav 的评论中，我关注了这个 wiki [https://wiki.centos.org/AdditionalResources/Repositories/DebugInfo](https://wiki.centos.org/AdditionalResources/Repositories/DebugInfo)并创建了一个新文件。

> 可以将以下内容附加到`/etc/yum.repos.d/CentOS-Base.repo`或创建新文件，例如`/etc/yum.repos.d/CentOS-Debug.repo`.

2.  我将这些内容从 wiki 粘贴到新`/etc/yum.repos.d/CentOS-Debug.repo`文件中，但`enabled=0`将行编辑为`enabled=1`

3.  我`debuginfo-install`在 gdb 警告中显示了所有内容并成功安装。

# ios - sqlite3_column_text returns only 255 bytes even though there is data in db

> ID：10389989
> 
> 赞同：0
> 
> 时间：2012-04-30T20:15:30.423
> 
> 标签：ios, sqlite, fmdb

Ladies and Gents,

I'm using FMDB in an iOS application. I have some text in columns which exceeds 255 bytes. I use BASE and browse the database file, and I can query the length of the data in the columns... So I know my data is there and that it is longer than 255...

YET, when trying to pull out data from these columns, I always get a C string of exactly 255 bytes, and I have no clue whatsoever why.

Here's some piece of code (basically from - (NSString*)stringForColumnIndex:(int)columnIdx { of FMDB FMResultSet.m, and I can trap the error already there.

```
- (NSString*)stringForColumnIndex:(int)columnIdx {

if (sqlite3_column_type([_statement statement], columnIdx) == SQLITE_NULL || (columnIdx < 0)) {
    return nil;
}

const char *c = (const char *)sqlite3_column_text([_statement statement], columnIdx);

int xx = strlen(c); //added by me, already here it is only 255 bytes

if (!c) {
    // null row.
    return nil;
}
return [NSString stringWithUTF8String:c];
} 
```

What am I missing? I'm using the standard supplied libsqlite3.dylib, FMDB includes sqlite.h. I tried to google similar problems to no avail for hours now.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T21:32:48.473

这既不是 FMDB 也不是 SQLite 限制。我一直使用 FMDB 从我的 SQLite 数据库中返回超过 255 个字符的字符串。我刚刚检查过：

```
 FMResultSet *rs = [fmdb executeQuery:@"select personnel_description from personnel where personnel_id=297"];
    [rs next];
    NSString *test2 = [rs stringForColumnIndex:0];
    NSLog(@"%s len=%d string=%@", __FUNCTION__, [test2 length], test2);
    [rs close]; 
```

我得到了我的 8429 字符串，与 BASE 告诉我的长度相同。

这让我想知道您的数据是否有些奇怪（例如二进制数据而不是字符、DBCS 等）。您是否尝试过作为对象而不是字符串返回并检查它？也许确认它是一个 NSString 而不是一个 NSData 结果集，例如：

```
 id test3 = [rs objectForColumnIndex:0];
    if ([test3 isKindOfClass:[NSString class]])
        NSLog(@"It's a string");
    else
        NSLog(@"It's not"); 
```

如果您真的认为这是 FMDB 问题，您可以尝试在[FMDB 讨论](https://github.com/ccgus/fmdb/issues)中发布此问题。另外，我会确保您拥有最新的 FMDB 代码，您可以从同一站点检索该代码。

# javascript - Check if a value is null?

> ID：10389991
> 
> 赞同：-2
> 
> 时间：2012-04-30T20:15:33.663
> 
> 标签：javascript, html, text, if-statement, null

In javascript, I want to have an if else statement that will change an elements value(a text field in an html form) to zero if nothing is typed in. I had the following:

```
if(document.getElementById('dollarinput').value == null){
    var dollars = 0;
}
else{
    var dollars = parseInt(document.getElementById('dollarinput').value);
} 
```

Something isn't working correctly in the if condition, but I'm not sure what I did wrong.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T20:17:48.300

您需要将变量声明移动到上方`if`并检查空引号，如下所示：

```
var dollars;
if(document.getElementById('dollarinput').value == ''){
    dollars = 0;
}
else{
    dollars = parseInt(document.getElementById('dollarinput').value);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T20:16:57.250

检查它是否是一个空字符串：

```
if(document.getElementById('dollarinput').value == ''){
    var dollars = 0;
} else{
    var dollars = parseInt(document.getElementById('dollarinput').value, 10);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T20:17:21.937

*   输入的值永远不可能`null`！如果没有值，它将是一个空字符串。
*   `alert('' == null);​​ // false`

**固定代码：**

```
if(document.getElementById('dollarinput').value){
    var dollars = 0;
}
else{
    var dollars = parseInt(document.getElementById('dollarinput').value);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-30T20:21:45.760

```
var dollars = 0;
var dollarinput = document.getElementById('dollarinput');
if( ! dollarinput.length )
{
    dollars = parseInt(dollarinput.value);
} 
```

# java - JSF 表中的 JavaScript 错误

> ID：10389996
> 
> 赞同：0
> 
> 时间：2012-04-30T20:15:47.423
> 
> 标签：java, javascript, css, jsf, jsf-2

我有这个 JSF 表：

```
<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"   
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets">
    <h:head>
        <ui:insert name="header">          
            <ui:include src="header.xhtml"/>        
        </ui:insert>
    </h:head>
    <h:body>

        <h1><img src="resources/css/images/icon.png" alt="DX-57" /> History Center</h1>
        <!-- layer for black background of the buttons -->
        <div id="toolbar" style="margin: 0 auto; width:1180px; height:30px; position:relative;  background-color:black">
            <!-- Include page Navigation -->
            <ui:insert name="Navigation">          
                <ui:include src="Navigation.xhtml"/>        
            </ui:insert>

        </div>   

        <div id="logodiv" style="position:relative; top:35px; left:0px;">
            <h:graphicImage alt="Dashboard"  style="position:relative; top:-20px; left:9px;"  value="resources/images/logo_sessions.png" />
        </div>
        <div id="main" style="margin: 0 auto; width:1190px; height:700px; position:absolute;  background-color:transparent; top:105px">

            <div id="mainpage" style="margin: 0 auto; width:1190px; height:500px; position:absolute;  background-color:transparent; top:80px">

                <div id="settingsHashMap" style="width:750px; height:400px; position:absolute;  background-color:r; top:20px; left:1px">

                    <h:form id="form">

                        <ui:debug />

                        <!-- The sortable data table -->
                        <h:dataTable id="dataTable" value="#{SessionsController.dataList}" binding="#{table}" var="item">
                            <!-- Check box -->
                            <h:column>
                                <f:facet name="header">
                                    <h:outputText value="Select" />
                                </f:facet>
                                <h:selectBooleanCheckbox onclick="highlight(this)" value="#{SessionsController.selectedIds[dataItem.id]}" />
                            </h:column>
                            <h:column>
                                <f:facet name="header">
                                    <h:commandLink value="№" actionListener="#{SessionsController.sort}">
                                        <f:attribute name="№" value="№" />
                                    </h:commandLink>
                                </f:facet>
                                <h:outputText value="#{table.rowIndex + SessionsController.firstRow + 1}" />
                            </h:column>
                            <h:column>
                                <f:facet name="header">
                                    <h:commandLink value="Account Session ID" actionListener="#{SessionsController.sort}">
                                        <f:attribute name="sortField" value="Account Session ID" />
                                    </h:commandLink>
                                </f:facet>
                                <h:outputText value="#{item.aSessionID}" />
                            </h:column>
                            <h:column>
                                <f:facet name="header">
                                    <h:commandLink value="User ID" actionListener="#{SessionsController.sort}">
                                        <f:attribute name="sortField" value="User ID" />
                                    </h:commandLink>
                                </f:facet>
                                <h:outputText value="#{item.userID}" />
                            </h:column>
                            <h:column>
                                <f:facet name="header">
                                    <h:commandLink value="Activity Start Time" actionListener="#{SessionsController.sort}">
                                        <f:attribute name="sortField" value="Activity Start Time" />
                                    </h:commandLink>
                                </f:facet>
                                <h:outputText value="#{item.activityStart}" />
                            </h:column>
                            <h:column>
                                <f:facet name="header">
                                    <h:commandLink value="Activity End Time" actionListener="#{SessionsController.sort}">
                                        <f:attribute name="sortField" value="Activity End Time" />
                                    </h:commandLink>
                                </f:facet>
                                <h:outputText value="#{item.activityEnd}" />
                            </h:column>
                            <h:column>
                                <f:facet name="header">
                                    <h:commandLink value="Activity" actionListener="#{SessionsController.sort}">
                                        <f:attribute name="sortField" value="Activity" />
                                    </h:commandLink>
                                </f:facet>
                                <h:outputText value="#{item.activity}" />
                            </h:column>
                        </h:dataTable>

                        <!-- The paging buttons -->
                        <h:commandButton value="first" action="#{SessionsController.pageFirst}"
                                         disabled="#{SessionsController.firstRow == 0}" >
                            <f:ajax render="@form" execute="@form"></f:ajax>
                        </h:commandButton>

                        <h:commandButton value="prev" action="#{SessionsController.pagePrevious}"
                                         disabled="#{SessionsController.firstRow == 0}" >
                            <f:ajax render="@form" execute="@form"></f:ajax>
                        </h:commandButton>

                        <h:commandButton value="next" action="#{SessionsController.pageNext}"
                                         disabled="#{SessionsController.firstRow + SessionsController.rowsPerPage >= SessionsController.totalRows}" >
                            <f:ajax render="@form" execute="@form"></f:ajax>
                        </h:commandButton>   

                        <h:commandButton value="last" action="#{SessionsController.pageLast}"
                                         disabled="#{SessionsController.firstRow + SessionsController.rowsPerPage >= SessionsController.totalRows}" >
                            <f:ajax render="@form" execute="@form"></f:ajax>
                        </h:commandButton>

                        <h:outputText value="Page #{SessionsController.currentPage} / #{SessionsController.totalPages}" />
                        <br />

                        <!-- The paging links -->
                        <ui:repeat value="#{SessionsController.pages}" var="page">
                            <h:commandLink value="#{page}" actionListener="#{SessionsController.page}"
                                           rendered="#{page != SessionsController.currentPage}" >
                                <f:ajax render="@form" execute="@form"></f:ajax>  
                            </h:commandLink>
                            <h:outputText value="#{page}" escape="false"
                                          rendered="#{page == SessionsController.currentPage}" />
                        </ui:repeat>
                        <br />

                        <!-- Set rows per page -->
                        <h:outputLabel for="rowsPerPage" value="Rows per page" />
                        <h:inputText id="rowsPerPage" value="#{SessionsController.rowsPerPage}" size="3" maxlength="3" />
                        <h:commandButton value="Set" action="#{SessionsController.pageFirst}" >
                            <f:ajax render="@form" execute="@form"></f:ajax>
                        </h:commandButton>
                        <h:message for="rowsPerPage" errorStyle="color: red;" />

                    </h:form>                 

                </div>  

                <div id="settingsdivb" style="width:350px; height:400px; position:absolute;  background-color:transparent; top:20px; left:800px">

                </div>  
            </div>   
        </div>

        <script type="text/javascript">
              $("tr").not(':first').hover(
              function () {
                $(this).css("background","#707070");
              },
              function () {
                $(this).css("background","");
              }
            );             

            function highlight(param) { 
            var row = jQuery(param).parent().parent().children();
                row.toggleClass('highlited');
            }       

            $(document).ready(function () {
            $("#tabs").tabs();
            });

            $(window).load(function() {
                    jsf.ajax.addOnEvent(function (data) {
                            if (data.status === "success") {
                                    $("#tabs").tabs();
                            }
                    });
            });
        </script>

    </h:body>
</html> 
```

当我将页面打开到 firefox 时，我在 Firebug 中收到以下错误：

```
$(document).ready(function () {
            $("#tabs").tabs();
            });

            $(window).load(function() {
                    jsf.ajax.addOnEvent(function (data) {
                            if (data.status === "success") {
                                    $("#tabs").tabs();
                            }
                    });
            }); 
```

此 JavaScript 代码中似乎存在错误。我该如何修复代码？

最好的祝愿

**编辑**

这是 Firebug 中的确切错误

```
highlight is not defined 
```

这是 Firebug 中的错误：

```
function onclick(event) {
     highlight(this);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T20:20:52.033

它与表无关...

我在您发布的代码中没有看到任何选项卡...所以删除此 js 代码...

这个 js 代码的目的是基于 html 代码呈现选项卡......我没有看到

```
<h:panelGroup id="tabs" layout="block"> in your page... 
```

顺便问一下，您在 js 中看到的确切错误是什么？

**更新**

它说您的 js 代码中没有名为**highlight**的函数...您应该实现它或确保其位于其中的 js 包含在您的页面中

例如，如果您使用的是 jquery，则以下可能有效...（取决于您传递的变量）

```
function highlight(myThis){
    $(myThis).effect("highlight", {}, 3000);
} 
```