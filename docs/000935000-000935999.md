# StackOverflow 问答 000935000-000935999

# pdf - 如何用 Java 对 PDF（或其他文档）进行数字签名？

> ID：935010
> 
> 赞同：4
> 
> 时间：2009-06-01T14:16:20.607
> 
> 标签：pdf, cryptography, sign

哪些库可用于在 Java 中对文档进行数字签名？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-06-01T14:29:17.710

[iText](http://www.lowagie.com/iText/)可能是我见过的商业或开源的最高质量的 PDF 处理库，它绝对可以用于签署 PDF 文档。

*   [从文档](http://itextpdf.sourceforge.net/howtosign.html#howtosign)中。
*   [描述如何完成的博客条目](http://itext.ugent.be/articles/eid-pdf/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-01T14:47:18.640

因为 PDF 对数字签名有明确的支持，所以签署它们的过程与您可能必须用于“另一个文档”的过程不同，正如[已经指出的那样](https://stackoverflow.com/questions/935010/how-to-digitally-sign-a-pdfor-another-document-in-java/935072#935072)。

如果您的文档格式没有“内置”数字签名支持，您可以将其包装成另一种支持数字签名的格式，例如 S/MIME。[BouncyCastle 的 S/MIME 支持](http://www.bouncycastle.org/docs/mdocs1.5/org/bouncycastle/mail/smime/package-summary.html)很好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-01T14:30:21.513

[iText](http://itextpdf.sourceforge.net/)网站有一个专门针对这种情况的[部分。](http://itextpdf.sourceforge.net/howtosign.html#howtosign)

# asp.net - '覆盖' javascript 函数

> ID：935013
> 
> 赞同：2
> 
> 时间：2009-06-01T14:17:01.477
> 
> 标签：asp.net, javascript, menu

在用户通过 ASP.NET 菜单导航离开之前，我需要添加一些验证。

我注意到这些项目被渲染为使用一个名为 Menu_Key 的 javascript 函数

```
<td id="ctl00_MainMenun1" onmouseover="Menu_HoverStatic(this)" onmouseout="Menu_Unhover(this)" onkeyup="Menu_Key(this)"> 
```

我有一种方法可以覆盖该功能并让菜单执行我的一个，我可以从中验证我需要什么，然后调用原始菜单？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-06-01T14:21:54.043

在最初定义函数后重新定义它，但在 var 中跟踪它，以便以后调用它。您将有效地重命名原始 Menu_Key 函数。

```
var originalMenu_Key = Menu_Key;

Menu_Key = function(t) { 
   // do your validations here

   if ( /* everything validated */ ) {
     originalMenu_Key (t);
   }
}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-01T16:03:57.263

上述解决方案是一个有效的解决方案，但在通常情况下，可以以更灵活的方式进行重新定义

```
var originalMenu_Key = Menu_Key;

Menu_Key = function(t) { 
   // do your validations here

   if ( /* everything validated */ ) {
     return originalMenu_Key.apply(this,argumets);
   }
}; 
```

在这种情况下，函数签名的任何更改都不会破坏包装逻辑。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-01T14:19:21.007

只需在页面底部重新定义函数（技术上在初始声明之后）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-01T14:30:22.217

你有不止一种方法可以做到这一点。取决于你想要什么。

**如果您希望某个功能在现有功能之前运行，请添加此功能。**

```
<td id="ctl00_MainMenun1" onmouseover="Menu_HoverStatic(this)" 
onmouseout="Menu_Unhover(this)" onkeyup="my_Function(); Menu_Key(this);"> 
```

* * *

**如果你想有条件地运行第二个函数，那么添加这个**

```
<td id="ctl00_MainMenun1" onmouseover="Menu_HoverStatic(this)"
onmouseout="Menu_Unhover(this)" onkeyup="my_Function(this);">

function my_Function(sender)
{
  if(valid)
     Menu_Key(sender);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-06-01T14:37:15.353

使用js代码：

```
 $(document).ready(function () {

    $("td").mouseover(function(){
          alert('MouseOver validation content goes here.');
        }).mouseout(function(){
          alert('MouseOut  validation content goes here.');
}); 
```

嗯！

# sql-server - 从 Management Studio 中隐藏 SQL 数据库

> ID：935018
> 
> 赞同：39
> 
> 时间：2009-06-01T14:17:39.510
> 
> 标签：sql-server

登录时如何隐藏您无权访问的数据库`SQL Server 2005 / 2008`？

目前，如果用户连接，他们会看到服务器上的所有数据库，这意味着他们必须扫描列表才能找到他们的数据库。

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2009-09-16T02:23:37.427

经过数小时试图弄清楚如何创建一个只能访问 1 个数据库并且只能看到该数据库的用户帐户。我想我明白了！！！！

1.  创建一个用户帐户（**确保其未映射到任何数据库，否则您将收到最终错误 Msg 15110, Level 16, State 1 并注意建议的解决方案**）

    ```
    USE [master]
    GO
    CREATE LOGIN [us4] 
        WITH PASSWORD=N'123', 
        DEFAULT_DATABASE=[master], 
        CHECK_EXPIRATION=OFF, 
        CHECK_POLICY=OFF 
    ```

2.  右击SQL的上半部分（SQLSERVER名称）>>>`Properties`点击`Permissions`，`user account`然后选择`Deny`查看数据库。

    ```
    use [master]
    GO
    DENY VIEW ANY DATABASE TO [us4] 
    ```

3.  右键单击新创建的数据库，属性，文件，并将所有者更改为新创建的帐户。（**重要说明**： `ALTER ROLE [db_owner] ADD MEMBER [us4]` **不起作用**）

    ```
    USE [dbname]
    GO
    EXEC dbo.sp_changedbowner @loginame = N'us4', @map = false 
    ```

此时，一旦用户登录，他将看到主数据库，tempdb 并且还将看到他是数据库所有者的新数据库。您可能需要转到`Tools>Option`并启用隐藏系统对象的选项，以便您不要'不显示 master、tempdb 等。如果此选项不起作用，您可能还需要 SP1

```
Msg 15110, Level 16, State 1, Line 1
The proposed new database owner is already a user or aliased in the database. 
```

**Msg 15110 的建议解决方案：**要解决上述错误，只需从数据库安全节点中删除用户并重试

希望有帮助...

尼基尔

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2009-06-01T17:59:35.710

这实际上不会以有意义的方式或您可能期望的方式起作用。

您`REVOKE VIEW ANY DATABASE`来自公共角色，但用户必须是数据库的数据库所有者，否则无法看到，但仍然可以访问。

问题是数据库引擎安全缺陷，不太可能在 SQL Server 的当前或未来版本中得到修复。

***Erland Sommarskog 不久前为此***打开了以下连接项，最近`SQL MVP's`.

投票支持连接并帮助使其成为 Microsoft 修复的优先事项：

[连接反馈](https://connect.microsoft.com/SQLServer/feedback/ViewFeedback.aspx?FeedbackID=273830)

基本上权限存储在数据库级别，因此需要枚举每个数据库以确定用户是否具有连接权限以在对象浏览器中显示数据库，这是一项昂贵的任务，以及旧 EM 过去是如何做事的.

提议的解决方案是在服务器级别也维护此信息，这是一个重大变化。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2009-06-01T14:33:05.347

您需要撤销角色 PUBLIC 的“查看任何数据库”权限（SQL SERVER 2005 及更高版本）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-06-22T13:03:09.243

删除*VIEW ANY DATABASE*权限后，将用户作为 Db 所有者添加到 DB

这将仅显示 SSMS 中登录名拥有的数据库。

```
USE master; GO

DENY VIEW ANY DATABASE TO [loginname]; GO

USE [your db]; GO

DROP USER [loginname]; GO

USE master; GO

ALTER AUTHORIZATION ON DATABASE::[your db]TO [loginname]; GO 
```

注意：这要求登录已经存在

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-06-01T14:33:54.550

MS SQL 2005 和 2008 上似乎有一个服务器端设置来限制用户可能看到的数据库。[我在sql-server-performance.com](http://www.sql-server-performance.com/faq/unauthorised_user_ssms_p1.aspx)找到了以下文本

在 SQL Server 2005 中，可以使用已创建的新服务器端角色。VIEW ANY DATABASE 权限是一个新的服务器级权限。被授予此权限的登录名可以查看描述所有数据库的元数据，无论该登录名是否拥有或实际使用特定数据库。请注意 默认情况下，VIEW ANY DATABASE 权限授予公共角色。因此，默认情况下，每个连接到 SQL Server 2005 实例的用户都可以看到该实例中的所有数据库。

# ruby-on-rails - 使用“haml_tag”测试助手

> ID：935021
> 
> 赞同：2
> 
> 时间：2009-06-01T14:18:19.243
> 
> 标签：ruby-on-rails, ruby, testing, haml

```
module FooHelper
  def foo
    haml_tag(:div) do
      haml_content("bar")
    end
  end
end 
```

当我测试这个时，我得到：

NoMethodError：未定义的方法“haml_tag”

此代码完全有效，可在开发/生产环境中使用。

这与在测试环境中正确加载 haml 助手有关。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-06-01T21:44:24.117

看起来 Rails 测试脚手架不包括`Haml::Helpers`在其上下文中。如果您正在使用`Test::Unit`，您可以自己将其包含在测试类中。您还需要[`Haml::Helpers#init_haml_helpers`](http://haml.hamptoncatlin.com/docs/rdoc/classes/Haml/Helpers.html#M000005)在测试设置中运行，以便正确初始化所有 Haml 内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2010-09-13T10:51:16.143

[http://haml-lang.com/docs/yardoc/Haml/Helpers.html#init_haml_helpers-instance_method](http://haml-lang.com/docs/yardoc/Haml/Helpers.html#init_haml_helpers-instance_method)

# sql-server-2005 - 如何将域帐户用户添加到 SQL Server 2005 Windows 身份验证列表？

> ID：935032
> 
> 赞同：1
> 
> 时间：2009-06-01T14:21:00.237
> 
> 标签：sql-server-2005, windows-authentication

我们最近从一个域转移到另一个域，现在我试图弄清楚如何告诉 SQL Server 对新域中的用户进行身份验证以登录到我们的 SQL 数据库。我们使用 SQL Server 2005。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-06-01T14:23:34.523

在企业管理器中，在服务器名称上，右键单击属性和身份验证（或安全性——我管理 SQL Server 已经有一段时间了），并将身份验证模式设置为“混合”。

请注意，您只能从 SQL 服务器所属的任何域信任/可访问的域中将用户添加到数据库。

完成后，您可以在 Add Users 集合中按 DOMAIN\Username 添加用户。只需指定他们的域用户名而不是自定义 SQL 名称。

# date - WebFocus 相关日期格式查询

> ID：935034
> 
> 赞同：1
> 
> 时间：2009-06-01T14:21:05.527
> 
> 标签：date, webfocus

我不确定这是询问 Webfocus 报告工具的正确地方，但是...

我希望 WebFocus 中的日期显示为`day-Month-year`（例如 2078 年 6 月 4 日）。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2010-06-16T13:28:20.933

使用“DMYY”作为格式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-19T16:55:29.510

当您以以下格式添加日期时，WebFOCUS 会理解：

```
&DMY  - ddmmyy 
&DMYY - ddmmyyyy 
&DATEDMYY - dd/mm/yyyy 
```

您还可以使用：

```
D-M-Y  - dd-mm-yy 
```

# wpf - 如何在 WPF 中的模板化 TabItem 上获得关闭按钮？

> ID：935043
> 
> 赞同：2
> 
> 时间：2009-06-01T14:23:25.240
> 
> 标签：wpf, .net-3.5, styles, datatemplate

我有一个s 被编辑的`TabControl`地方。该模板似乎工作正常，因为我想在其中显示的用户控件显示正确。`TabItem``DataTemplat``TabItem`

我不确定如何在其中显示“x”，`TabItem`以便我可以关闭每个选项卡，因为它们是通过模板动态生成的。

作为 WPF 的新手，我开始了解许多概念，但这`TabControl`给我带来了很多麻烦，所以我很可能使模板可用，但不可维护。

这就是我所拥有的，我希望能够关闭每个`TabControl`. 我还需要能够在`TabControl`关闭时触发自定义事件。

```
<UserControl x:Class="Russound.Windows.UI.UserControls.CallLog.CaseReaderWpf"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:CallLog="clr-namespace:Russound.Windows.UI.UserControls.CallLog"
    Height="637" Width="505">

    <UserControl.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="/Russound.Windows;component/UI/RussoundDictionary.xaml"/>
            </ResourceDictionary.MergedDictionaries>
        </ResourceDictionary>
    </UserControl.Resources>

    <TabControl x:Name="tabCases" >
        <TabControl.ItemTemplate>
            <DataTemplate DataType="{x:Type TabItem}">
                <StackPanel>
                    <TextBlock Text="{Binding Path=Id}" />
                </StackPanel>
            </DataTemplate>
        </TabControl.ItemTemplate>
        <TabControl.ContentTemplate>
            <DataTemplate DataType="{x:Type TabItem}">
                <CallLog:CaseReadOnlyDisplay DataContext="{Binding}" />
            </DataTemplate>
        </TabControl.ContentTemplate>
    </TabControl>
</UserControl> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-06-01T15:26:39.933

查看 Josh Smith 的这篇 MSDN 文章。这是您问题的绝佳解决方案。

**[具有模型-视图-视图模型设计模式的 WPF 应用程序](http://msdn.microsoft.com/en-us/magazine/dd419663.aspx)**

[http://msdn.microsoft.com/en-us/magazine/dd419663.aspx](http://msdn.microsoft.com/en-us/magazine/dd419663.aspx)

```
<!-- 
This template explains how to render 
a tab item with a close button.
-->
<DataTemplate x:Key="ClosableTabItemTemplate">
<DockPanel Width="120">
  <Button 
    Command="{Binding Path=CloseCommand}"
    Content="X"
    Cursor="Hand"
    DockPanel.Dock="Right"
    Focusable="False"
    FontFamily="Courier" 
    FontSize="9"
    FontWeight="Bold"  
    Margin="0,1,0,0"
    Padding="0"
    VerticalContentAlignment="Bottom"
    Width="16" Height="16" 
    />
  <ContentPresenter 
    Content="{Binding Path=DisplayName}" 
    VerticalAlignment="Center" 
    />
</DockPanel>
</DataTemplate>

<!--
This template explains how to render the 'Workspace' content area in the main window.
-->
<DataTemplate x:Key="WorkspacesTemplate">
<TabControl 
  IsSynchronizedWithCurrentItem="True" 
  ItemsSource="{Binding}" 
  ItemTemplate="{StaticResource ClosableTabItemTemplate}"
  Margin="4"
  />
</DataTemplate> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-01T14:56:03.177

您将不得不派生自己的选项卡控件。 [谷歌搜索](http://www.google.com/search?q=wpf+tab+close)显示了许多结果，其中许多带有来源，因此您不必重新创建轮子。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-01T15:09:39.813

Josh Smith 为 MSDN 杂志写了一篇文章，其中包含一个带有关闭按钮的选项卡项目的工作示例。该代码基于 MVVM 模式，但您应该能够从选项卡项控件模板中提取相关部分。

我没有 OpenID 登录，因此无法直接发布 URL。谷歌搜索“josh smith mvvm 演示应用程序”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-01T15:20:52.923

不要劫持线程，但您可能想考虑当*每个*选项卡都有一个关闭按钮时，事情看起来有多难看。如果您更喜欢集成到`TabControl`自身中的单个关闭按钮（la Visual Studio），您可以查看我所做的[这篇博客文章](http://kentb.blogspot.com/2009/05/mvvm-infrastructure-activeawarecommand.html)，它作为示例的一部分（但不是文章的重点） ）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-11-05T20:33:19.140

刚好碰到那个。我正在做 MVVM，但使用表单事件会非常相似。无论如何，我使用了 ItemContainerStyle 参数并将其指向具有数据类型限定符的样式，如下所示：

```
 <Style x:Key="TabHeader" TargetType="TabItem">
        <Setter Property="FieldLayoutSettings">
            <Setter.Value>
                <StackPanel Orientation="Horizontial">
                    <TextBlock Text="{Binding HeaderText}"/>
                    <!-- MVVM style -->
                    <Button Content="X" Command="{Binding [ICommandHere]}" />
                    <!--or... Forms style -->    
                    <Button Content="X" Click="EventHandlerHere" />
             </StackPanel>
            </Setter.Value>
            </Setter> 
    </Style>

<TabControl ItemsSource="{Binding Workspaces}"
            ItemContainerStyle="{StaticResource TabHeader}"/> 
```

# ruby-on-rails - 多阶段部署建议？

> ID：935046
> 
> 赞同：5
> 
> 时间：2009-06-01T14:23:40.153
> 
> 标签：ruby-on-rails, git, deployment, capistrano

Web 应用程序的多阶段部署的一些最佳实践和一般理论是什么？

我对使用 Git、Capistrano 和Passenger 部署Rails 应用程序特别感兴趣，并且我发现一些帖子讨论了该过程的具体细节：

*   [Capistrano：多级](http://weblog.jamisbuck.org/2007/7/23/capistrano-multistage)
*   [介绍自动标记器](http://pivotallabs.com/users/jdean/blog/articles/757-introducing-autotagger-easy-multi-stage-deployment-tagging-with-git)

对于每个阶段（测试、分期、生产），我应该考虑哪些因素？阶段是否应该部署到不同的物理服务器？关于多阶段部署的任何提示或建议？有什么我应该注意的障碍吗？

最好的，

雅各布

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-07T05:00:00.143

我总是为每个部署目标创建上限任务并在命令行上使用它们：

```
# deploy.rb
task :stage do
  server 10.0.0.1 ...
end

> cap stage deploy 
```

您还可以在每个目标任务中定义自定义任务，例如在暂存中进行清理但在生产中不进行清理的部署。

由于这些部署目标任务很少非常大，我从来没有真正看到像为多阶段安装上限扩展这样的事情，但我想其他的情况可能会有所不同。

我确实认为生产应该与您的其他环境分开，否则会有危险，分期等过程中的不当行为可能会影响生产性能。

有时我定义上限任务是为了方便暂存，例如爆破数据库并从最近的生产转储中重新加载它。这些任务应通过设置变量等检查其部署目标，并拒绝运行生产以防止深夜打字错误。

在您的 deploy.rb 中放置大量自定义行为是很诱人的，但我发现随着您的环境或 cap api 的变化，这往往会反击并且需要大量的维护工作。

我在大型环境中看到的另一种做法是拥有一个带有结帐的 shell 帐户，该帐户跟踪专门设置为充当 capistrano 控制点的稳定分支。你 ssh 在那里而不是在本地运行 cap 命令。这可以帮助避免本地结帐的 deploy.rb 有您尚未准备好用于部署到生产的修改的问题。这对于 git 和 svn 来说不是什么问题，但是在他们运行 cap 命令的那一刻，仍然必须仔细考虑他们的本地 deploy.rb 是什么。

如今，Heroku 确实让这些事情变得简单，而 EY 和其他公司也不甘落后。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-01T21:16:16.683

最好有两个不同的服务器环境：登台和生产。我总是忽略测试环境。测试环境类似于生产环境，但完成后回滚数据库。在同一台服务器上运行两者可能会对生产环境的性能和稳定性产生负面影响。升级 gem 以在暂存环境中进行测试可能会对生产产生负面影响并导致停机。

您必须非常警惕两台服务器上的 gem 版本相同。如果一个应用程序的版本在暂存中工作但由于这种差异而不能在生产中使用，这可能会带来麻烦。

我总是会打开一个控制台窗口，准备回滚上次部署，以防出现问题。这个过程真的没有比这更多的了。

为自己节省一些钱并购买最便宜的登台服务器。你是唯一会使用它的人，对吧？只需确保它们来自同一提供商即可。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-07-22T02:29:25.977

一年多来，我们一直非常成功地使用 capistrano 多级部署。系统以与 Rails 环境文件几乎相同的方式很好地分离了每个阶段的部署文件。设置和管理非常容易。

# c# - 转发/中继 .NET 事件

> ID：935047
> 
> 赞同：9
> 
> 时间：2009-06-01T14:23:50.233
> 
> 标签：c#, .net, events

我的班级有一个外部对象将订阅的事件：

```
public event EventHandler<MessageReceivedEventArgs> MessageReceived; 
```

但是，在它自己的线程上运行的内部侦听器对象实际上将发起事件。

```
private class Listener
{
    public void Run()
    {
         // events raised here which should be forwarded
         // to parent's MessageReceived
    }
}; 
```

我的倾向是在监听器上创建一个具有相同签名的事件，并在主类中订阅它，以便在 MessageReceived 上引发它。这似乎有点麻烦，所以我想知道是否有一种简洁/惯用的方式来转发这样的事件。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2009-06-01T14:29:44.697

您可以使用事件[添加/删除访问器](http://msdn.microsoft.com/en-us/library/cc713648.aspx)，以便将连接到面向外部事件的事件“转发”到内部侦听器

```
public event EventHandler<MessageReceivedEventArgs> MessageReceived {
   add { this.listener.MessageRecieved += value; }
   remove { this.listener.MessageRecieved -= value; }
} 
```

这意味着您需要在侦听器中创建一个事件，但好处是没有其他管道可以连接该事件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-01T14:28:01.783

你可以用一个事件来做到这一点，或者你可以在你的主类中创建一个名为 ReceiveMessage() 的方法并从侦听器调用它（然后从那里引发事件）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-01T14:54:26.317

正如已经回答的那样，您可以在事件上使用添加和删除处理程序来自定义订阅逻辑。

请注意，这种设计存在问题。您指定您的侦听器在其自己的线程中引发事件。默认情况下，将在引发事件的线程上调用处理程序（在您的情况下，是侦听器的线程）。你有几个选择。

*   如果您不在乎让侦听器的线程执行回调。只需按原样调用事件（但如果事件处理程序需要一段时间才能执行，您的侦听器线程可能会被阻止，或者如果事件处理程序抛出未处理的异常，则只会死掉）
*   如果您希望处理程序在与侦听器线程不同的线程中运行，但不关心在哪个线程中，只要它不在侦听器中：在实际调用处理程序的 OnXXX 方法中，获取事件和队列的调用列表线程池中的每个处理程序。
*   如果您希望在特定线程中调用处理程序：有点棘手，您必须使用一些 SynchronizationContext（Winforms 中的 WindowsSynchronizationContext，其他情况下的自定义等等）

Roy Osherove 的博客文章展示了执行异步调用的几种方法：[http](http://weblogs.asp.net/rosherove/pages/DefensiveEventPublishing.aspx) ://weblogs.asp.net/rosherove/pages/DefensiveEventPublishing.aspx （但我不会对委托使用异步调用，而是直接依赖调用委托的线程池）。

# c# - 如何显示自定义表单窗口工作流自定义活动

> ID：935050
> 
> 赞同：0
> 
> 时间：2009-06-01T14:24:30.310
> 
> 标签：c#, .net, windows, workflow

实现自定义活动时是否可以显示窗口窗体？

例如，当用户在设计器中双击我的活动时，如何显示自定义表单？

或者，当用户单击属性选择中的 ... 时，可能会显示自定义表单。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-07-27T07:55:46.123

我不确定这是否可以做到。

对于我的自定义活动所需的任何交互，我将创建一些依赖属性，当自定义活动被拖到设计器上时，这些属性将出现在自定义活动的属性窗口中。

例如来自自定义电子邮件活动的属性

```
public static DependencyProperty FromProperty = DependencyProperty.Register("From", typeof(string), typeof(SendMailActivity));

[DescriptionAttribute("The email of the sender")]
[CategoryAttribute("Parameters")]
[BrowsableAttribute(true)]
[DesignerSerializationVisibilityAttribute(DesignerSerializationVisibility.Visible)]
public string From
{
    get
    {
        return ((string)(base.GetValue(SendMailActivity.FromProperty)));
    }
    set
    {
        base.SetValue(SendMailActivity.FromProperty, value);
    }
} 
```

# visual-studio-2008 - 如何让 AnkhSVN 记住我的 SVN + SSH 密码？

> ID：935057
> 
> 赞同：3
> 
> 时间：2009-06-01T14:26:19.667
> 
> 标签：visual-studio-2008, svn, ssh, ankhsvn

我希望 AnkhSVN 记住我的 SVN + SSH 密码。到目前为止，我每次操作都必须输入多次。上一个[主题](http://ankhsvn.open.collab.net/ds/viewMessage.do?dsForumId=582&dsMessageId=322660)讨论了 2 个解决方案

1) 通过将 plinkw.exe 重命名为 ssh.exe 并将其移动到 AnkhSVN 搜索 SSH 客户端的文件夹之一来替换默认的 ssh 客户端。

2) 替换配置文件/windows 注册表中的默认ssh 客户端。

我无法使用解决方案 1，因为我不知道从哪里获取 plinkw.exe，而且我的 PuTTY 的 plink.exe 要求将密码作为参数传递。

我无法使用解决方案 2，因为我找不到配置文件或 Windows 注册表项。

你能帮助我吗？

PS：我也在 AnkhSVN 论坛上发过这个： [http ://ankhsvn.open.collab.net/ds/viewMessage.do?dsForumId=582&dsMessageId=323292](http://ankhsvn.open.collab.net/ds/viewMessage.do?dsForumId=582&dsMessageId=323292)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-10-29T21:11:38.483

啊哈！解决了我的问题！

我已将 Visual Studio 设置为“以管理员身份运行”，但通过 Startup 文件夹中的链接调用的 pageant.exe 不是……它仍以登录用户身份运行。一旦我将选美重新配置为“以管理员身份运行”，密码提示就消失了！

编辑：在我这样做之后，TortoiseSVN 开始窃听我的密码。:( 所以，我现在运行了两个选美实例 - 一个作为管理员（用于 Visual Studio/ankhsvn，另一个作为我的登录用户用于 tortoisesvn）。我知道，这很愚蠢，但它一直在工作，直到出现更好的情况。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-01T14:33:15.267

您必须在主机 SSH 服务器上创建一个特殊密钥，然后将公钥复制到您的本地系统。然后，Putty 可以使用此公钥来协商您的凭据，而无需您一遍又一遍地输入它们。

也就是说，这是 Windows 系统上的一个巨大安全漏洞，因为任何拥有该密钥的人都可以访问您的 *nix 系统。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-06-03T21:11:08.327

AnkhSvn 使用与 PuTTY 相关的 plink.exe 的自定义构建。它被修改为在对话框中而不是在控制台窗口中显示密码和证书验证。

实现此目的的最佳方法是使用 SSH 密钥对而不是用户名密码进行连接。您可能需要编辑 Subversion 配置以设置服务器/存储库的特定密钥。这样你也可以使用 svn.exe 进行测试，如果设置是你想要的，这可能会给你更详细的反馈。另请参阅AnkhSvn 邮件列表上有关该主题[的较早帖子。](http://ankhsvn.open.collab.net/ds/viewMessage.do?dsForumId=582&dsMessageId=322660)

如果您在私钥上使用关键字（我建议），您可以使用[Pageant](http://the.earth.li/~sgtatham/putty/0.60/htmldoc/Chapter9.html#pageant)来记住关键字。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2010-02-18T18:59:42.723

我刚刚下载了 AnkhSVN v2.1.7756，我立即遇到了这个问题。看起来它正在记住密码（它正在填写密码框，我只需要单击确定）但它似乎忽略了记住此选项，并且每次都强迫我单击确定。我最终只下载了 SharpSVN（AnkhSVN 中包含的 C# SVN API）v1.6009.1478，它比包含的更新一点。我刚刚从较新的 SharpSVN 复制了 SharpPlink-Win32.svnExe 文件并覆盖了 AnkhSVN 目录中的文件，这为我解决了问题。可能比使用密钥对设置腻子要容易一些，特别是如果您不使用任何其他 SVN 客户端（我不使用 TortoiseSVN）。

# c# - 如何在富文本框中插入 unicode 字符？

> ID：935063
> 
> 赞同：1
> 
> 时间：2009-06-01T14:27:32.440
> 
> 标签：c#, wpf, unicode, richtextbox

我正在编写一个带有 RichTextBox 和一个工具栏（一个非常简单的 RichText 编辑器）的 WPF 应用程序。无论如何，我想在 ToolBar 中放置 6 个 unicode 字符，这些字符可以被点击并插入到 RichTextBox 的任何位置。

这似乎应该是相当简单的事情（没有很多代码隐藏）。是吗，还是我必须编写一些自定义方法来实现这一点？

谢谢，

凯尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-01T14:50:58.663

对我来说，代码隐藏中的事件处理程序似乎是自然的方式。Unicode 字符只是 .NET 中的字符，因此它们可能在 ASCII 字符集之外这一事实并不意味着任何额外的困难。

应该这样做：

```
private void button_Click(object sender, RoutedEventArgs e)
{
    MyRtb.CaretPosition.InsertTextInRun("む");
} 
```

# php - 使用 FastCGI 仅一次将 PHP 应用程序/框架加载到内存中？

> ID：935071
> 
> 赞同：4
> 
> 时间：2009-06-01T14:28:49.677
> 
> 标签：php, performance, apache, fastcgi, lighttpd

我的印象是 FastCGI 允许您在 Web 应用程序中加载一次，然后您只需“提供”FastCGI 一些功能，例如`myHandleHTTPRequest($url)`，然后在请求到来时调用该功能。这样一来，您的应用程序一直在内存中准备就绪，您将获得更好的性能，对吧？

但我开始明白，事实并非如此。还是我弄错了？

在我看来，PHP 正在由 FastCGI 加载，好的，这带来了一些改进，但是*我的*应用程序仍然在每次请求时重新加载。

我想加载我的应用程序（或阅读“框架”）一次（然后每隔 500 个请求左右重新加载一次。）我可以这样做吗？

*编辑*：这个问题已经改写成这个问题：[Custom PHP FastCGI interface](https://stackoverflow.com/questions/935202/custom-php-fastcgi-interface)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-06-01T14:43:30.880

fastcgi 所做的是避免为每个请求生成一个 php 解释器（就像 cgi 一样）。这节省了大量的处理时间，因为 php 解释器保存在内存中，或多或少像 mod_php 一样。

您可以做些什么来提高性能：

1.  使用[APC](http://php.net/apc)或 xcache 等，透明地预编译每个 php 文件，避免每次请求都重新编译。
2.  缓存。Apc 和其他人提供了存储变量的机制，其生命周期甚至跨越请求之间。这可用于在请求之间共享处理过的数据，并将应用程序数据保存在内存中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-01T14:40:28.780

是的，你可以做到这一点，或多或少忘记所有[花哨的 PHP 集成东西](http://www.fastcgi.com/drupal/node/5?q=node/10)（这是给你 General-Purpose-PHP-Interpreter-As-FastCGI 的东西）并将你的应用程序编写为 FastCGI 服务器本身.

这完全是另一个话题，但您可能想[了解 Perl 应用程序如何处理它](http://www.perl.com/doc/manual/html/lib/CGI/Fast.html)以作为指南。

# windows - Eclipse 工作区不保存 (Vista)

> ID：935079
> 
> 赞同：0
> 
> 时间：2009-06-01T14:30:48.330
> 
> 标签：windows, eclipse

我最近升级到 Eclipse 3.4 (Ganymede)，但我在工作区保存和关机/启动时加载时遇到了一些间歇性问题。这些问题似乎是间歇性的，但发生的频率更高。当我启动 Eclipse 时，工作区没有加载以前打开的文件和设置（没有文件打开并且窗口返回到默认位置）。

我怀疑这可能与 Vista 中的 UAC 有关。我在 Windows Vista Business 32 位上运行 Eclipse。

有任何想法吗？至少，查看 Eclipse 是否定期保存工作区可能会有所帮助，因为它应该 - 我可能正在寻找哪些文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-01T14:35:08.557

您可能遇到了虚拟化文件夹问题。UAC 尝试以静默方式阻止应用程序崩溃，但不允许它们写入程序文件等文件夹。尝试以管理员身份运行 eclipse，看看是否遇到同样的问题。如果是这样，请尝试将您的工作区文件夹移动到您的用户目录中，看看是否可以让您完成工作？

# xml - 跨 WCF Web 服务请求序列化通用 XML 数据

> ID：935080
> 
> 赞同：4
> 
> 时间：2009-06-01T14:30:56.770
> 
> 标签：xml, vb.net, wcf, dataset

我有一个向 WCF 服务发送请求的 Web 应用程序。WCF 服务获取一个 LINQ 结果集（anon.ilist）并将其作为回复发送回 Web 应用程序。为了让它快速工作，在 WCF 应用程序中，我使用[copytodatatable](http://blogs.msdn.com/aconrad/archive/2008/01/11/pathetic-plea-for-help.aspx#7103127)并将其发送到数据集中的 Web 应用程序。

然后，我的 Web 应用程序获取 DataSet 并将其写入 xml，执行一些 xslt 并将结果数据显示在屏幕上。完美的。...嗯，不是真的。

我仍然（相对）WCF 新手。我知道发送 DataTables/DataSets 有点麻烦。Web 应用程序需要 xml 格式的数据（用于 xslt 操作），所以我想我会让 WCF Web 服务为我做 DataTable -> xml 工作，然后简单地用一个漂亮的 XmlDocument 回复客户端 webapp。
但是不能序列化 XmlDocument。

通过 wcf 将 XML 数据发送到客户端的最佳方式是什么？

*   数据表包含很多列，并且会经常更改，因此我不想创建自己的对象类（具有像 bazillion 属性）并发送它（因为这是我之前大部分时间所做的wcf，它运作良好......但不适合这种情况）。

*   **编辑**：将它作为字符串发送也可以....但这肯定不是*最好*的解决方案吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-06-01T14:59:51.627

通过 WCF 发送数据集的唯一问题是它不可互操作 - 即您将无法使用来自非 .NET 客户端的数据集。

我曾在几个大型应用程序中工作过，它们通过 WCF 通过网络发送数据集就好了。只要发送方和接收方都在 .NET 上运行，你应该没问题。

如果您仍然不想使用数据集，请考虑创建一个 DataContract 类来保存要通过网络发送的数据。这是跨 WCF 传输数据的经典方式。除非您的 XML 非常复杂（很可能是这样），否则这可能是一个不错的选择。

如果您还没有，我强烈建议您阅读 Juval Lowy 出色的“Programming WCF Services 2nd Edition”的副本。他有一整章是关于跨 WCF 传输信息的。这是 WCF 圣经。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-01T15:52:34.517

您可以简单地返回一个 XmlElement - 可能是 XmlDocument 实例的 DocumentElement 属性。

您不必[使用 XmlSerializer 来执行此操作](http://msdn.microsoft.com/en-us/library/ms733901.aspx)。DataContractSerializer 是默认值，并且会很好地发回 XmlElement。您不需要实现 IXmlSerializable。

一些示例代码如下

服务接口：

```
using System;
using System.Xml;
using System.ServiceModel;
using System.Runtime.Serialization;

namespace Cheeso.Samples.Webservices
{
    [ServiceContract(Namespace="urn:Cheeso.Samples" )]
    public interface IService
    {
        [OperationContract]
        XmlElement Register(String request);
    }
} 
```

请注意，我没有 DataContract（因此也没有 DataMembers），因为我正在发回一个预定义类 (XmlElement) 的实例。

这是服务实现：

```
using System;
using System.Xml;
using System.ServiceModel;

namespace Cheeso.Samples.Webservices._2009Jun01
{

    public class Results
    {
        public int Id;
        public Int64 WorkingSet;
        public String Name;
        public String Title;
    }

    [ServiceBehavior(Name="WcfXmlElementService",
                     Namespace="urn:Cheeso.Samples",
                     IncludeExceptionDetailInFaults=true)]

    public class WcfXmlElementService : IService
    {
        int index = 0;
        public XmlElement Register(string request)
        {
            XmlDocument doc = new XmlDocument();

            // can get the doc from anywhere. We use a LINQ-to-Objects result.

       // do the LINQ thing
       var processInfo =
       from p in System.Diagnostics.Process.GetProcesses()
       select new Results {
           Id = p.Id,
           WorkingSet = p.WorkingSet64,
           Name = p.ProcessName,
           Title = p.MainWindowTitle
           };

       // Note: cannot use an anonymous ilist if we will use XmlSerializer

       // serialize that list into the XmlDocument
       using (XmlWriter writer = doc.CreateNavigator().AppendChild())
       {
       var L = processInfo.ToList();
       XmlSerializer s1 = new XmlSerializer(L.GetType());
       s1.Serialize(writer, L);
       }

       index++;

       // Append some additional elements to the in-memory document.
       XmlElement elem = doc.CreateElement("id");
       elem.InnerText = System.Guid.NewGuid().ToString();
       doc.DocumentElement.AppendChild(elem);

       elem = doc.CreateElement("stamp");
       elem.InnerText = DateTime.Now.ToString("G");
       doc.DocumentElement.AppendChild(elem);

       elem = doc.CreateElement("in-reply-to");
       elem.InnerText = request;
       doc.DocumentElement.AppendChild(elem);

            return doc.DocumentElement;
        }
    }
} 
```

如果您使用的是 .NET，客户端将获得一个 XmlElement。如果您使用的是其他堆栈，则它将只是该堆栈中的 XmlElement 或 XmlNode。

回复消息的 XSD 是通用的，如下所示：

```
<xs:element name="RegisterResponse">
  <xs:complexType>
    <xs:sequence>
      <xs:element minOccurs="0" name="RegisterResult" nillable="true">
        <xs:complexType>
          <xs:sequence>
            <xs:any minOccurs="0" processContents="lax" /> 
          </xs:sequence>
        </xs:complexType>
      </xs:element>
    </xs:sequence>
  </xs:complexType>
</xs:element> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-01T14:54:03.947

方法返回的类需要实现IXmlSerializable。

```
public XmlContent XmlContent()
{
    return new XmlContent();
}

[XmlRoot(ElementName = "div")]
public class XmlContent : IXmlSerializable
{

    #region IXmlSerializable Members

    public System.Xml.Schema.XmlSchema GetSchema()
    {
        return null;
    }

    public void ReadXml(XmlReader reader)
    {
        throw new NotImplementedException();
    }

    public void WriteXml(XmlWriter writer)
    {

    writer.WriteRaw("<p>some text</p>");

    }
    #endregion
} 
```

我还没有找到如何避免序列化根元素（例如，“div”）。

我也尝试将 XML 作为字符串发送，但它没有按预期输出，即“字符串”是 HTML 编码并包装在标签中。这使得解析非常困难。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2009-06-01T14:36:30.940

为什么不尝试将 xml 作为字符串发送？

# asp.net - 将同一列的多个参数传递给 SQL Server 选择 SP

> ID：935083
> 
> 赞同：1
> 
> 时间：2009-06-01T14:31:49.013
> 
> 标签：asp.net, sql, sql-server, sql-server-2005

我在 web.config 中有一个字符串值——例如 2 个由`","`. 我需要动态查询数据库（即我不知道在 web.config 中有多少值可以用逗号分隔）并在表上运行 select 语句，传递这些值并获取所有相关信息，例如：

```
select * from tablename where columnname = string1 string2 string3 etc etc 
```

有些字符串可能只包含 1 个 guid 有些可能包含 10 个

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-06-01T14:33:33.380

查看 Erland Sommarskogs 关于此主题的优秀帖子：

[http://www.sommarskog.se/arrays-in-sql-2005.html](http://www.sommarskog.se/arrays-in-sql-2005.html)

除了将多个值传递给过程的这些方法之外，SQL Server 2008 还将提供[表值参数。](http://www.sqlteam.com/article/sql-server-2008-table-valued-parameters)

马克

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-01T14:38:23.260

你想要一个“IN”条件。如果您*真的*信任您的 web.config 并且可以要求配置的元素也包含在引号中，您可以直接将其放入 sql 语句中：

```
select * from tablename where columnname IN ( "web.config value here" ) 
```

但请注意，这样的动态 sql*非常*危险。另一方面，安全地传递它们可能会很[棘手](http://www.sommarskog.se/arrays-in-sql.html)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-01T15:08:12.093

这是基于 Erland Sommarskogs 的文章：

[http://www.sommarskog.se/arrays-in-sql-2005.html](http://www.sommarskog.se/arrays-in-sql-2005.html)

在你使用我的功能之前，你需要建立一个“帮助”表，每个数据库只需要这样做一次：

```
CREATE TABLE Numbers
(Number int  NOT NULL,
    CONSTRAINT PK_Numbers PRIMARY KEY CLUSTERED (Number ASC)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
DECLARE @x int
SET @x=0
WHILE @x<8000
BEGIN
    SET @x=@x+1
    INSERT INTO Numbers VALUES (@x)
END 
```

使用这个函数来分割你的字符串，它不会循环并且非常快：

```
CREATE FUNCTION [dbo].[FN_ListToTable]
(
     @SplitOn              char(1)              --REQUIRED, the character to split the @List string on
    ,@List                 varchar(8000)        --REQUIRED, the list to split apart
)
RETURNS
@ParsedList table
(
    ListValue varchar(500)
)
AS
BEGIN

/**
Takes the given @List string and splits it apart based on the given @SplitOn character.
A table is returned, one row per split item, with a column name "ListValue".
This function workes for fixed or variable lenght items.
Empty and null items will not be included in the results set.

Returns a table, one row per item in the list, with a column name "ListValue"

EXAMPLE:
----------
SELECT * FROM dbo.FN_ListToTable(',','1,12,123,1234,54321,6,A,*,|||,,,,B')

    returns:
        ListValue  
        -----------
        1
        12
        123
        1234
        54321
        6
        A
        *
        |||
        B

        (10 row(s) affected)

**/

----------------
--SINGLE QUERY-- --this will not return empty rows
----------------
INSERT INTO @ParsedList
        (ListValue)
    SELECT
        ListValue
        FROM (SELECT
                  LTRIM(RTRIM(SUBSTRING(List2, number+1, CHARINDEX(@SplitOn, List2, number+1)-number - 1))) AS ListValue
                  FROM (
                           SELECT @SplitOn + @List + @SplitOn AS List2
                       ) AS dt
                      INNER JOIN Numbers n ON n.Number < LEN(dt.List2)
                  WHERE SUBSTRING(List2, number, 1) = @SplitOn
             ) dt2
        WHERE ListValue IS NOT NULL AND ListValue!=''

RETURN

END --Function FN_ListToTable 
```

您可以将此函数用作连接中的表，这将很快并使用索引：

```
SELECT
    Col1, COl2, Col3...
    FROM  YourTable
        INNER JOIN FN_ListToTable(',',@YourString) s ON  YourTable.ID = s.ListValue 
```

您可以拆分字符串或数字，以下是一些字符串示例：

```
DECLARE @YourString varchar(8000)
SET @YourString='monkey,elephant,dog,bear,zebra'
select * from FN_ListToTable(',',@YourString)

SET @YourString='two words,three words here,four words right here,five is the magic number,six words is even more fun'
select * from FN_ListToTable(',',@YourString)

SET @YourString='Doe, Jane; Smith, Joe; Public, John Q.'
select * from FN_ListToTable(';',@YourString) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-01T14:41:53.300

您不必发送多个参数，只需发送一个字符串

一种可能是将该字符串解析为 SQL 存储过程并构建动态查询

另一种可能性是在每个 '' 处插入字符，并使用下面的代码

```
'aaa','bbb','ccc'

myTable
------------
ID  Name

1   eee
2   aaa
3   ggg
4   hhh
5   bbb

declare @stmt nvarchar(1000)
set @stmt = 'select * from myTable where Name in (''aaa'',''bbb'',''ccc'')'
exec spexecute_sql @stmt 
```

# javascript - 内存最少的 DOM 元素

> ID：935092
> 
> 赞同：2
> 
> 时间：2009-06-01T14:35:06.013
> 
> 标签：javascript, dom

我想使用 Javascript 渲染大约 4000 个奇怪的 DOM 元素。所有 DOM 元素是否在浏览器中消耗相同的内存？例如，在 SPAN、DIV、A 等之间，它们在内存方面是否都相同？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-06-01T14:38:16.833

我怀疑这取决于浏览器/实现。

也许您应该对由 4000 个不同类型元素组成的页面运行一些测试，并查看相对内存消耗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-01T14:53:40.797

我认为 DOM 元素本身之间没有太大区别。

重要的是它们的风格。

输入元素将需要一些内存，因为它附加了本机小部件。一个链接将需要一些内存，因为它附加了一个单击事件处理程序。表格单元格将需要一些内存，因为它的样式允许它自动调整大小。

只需使用您需要的任何东西，看看它是否有效。

如果没有，分页将比搜索要使用的正确 DOM 元素更能帮助您。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-06-01T15:06:08.960

根据您想要添加的内容创建您的标记，而不是根据使用“最有效”的 DOM 元素的一些感知好处。<SPAN> 的用途与 <DIV> 完全不同。当您开始着手处理时，内存消耗的差异将会很小，并且 4,000 个元素并不多（访问任何电子商务网站并解析页面；您最终会得到更多）。

在实际操作中：使用 innerHTML 而不是 DOM 构造函数创建元素可能会更快，这对您的用户来说很重要。有关更多信息，请参阅[本文](http://www.quirksmode.org/dom/innerhtml.html)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-06-01T14:38:01.217

我想一个纯文本节点会使用最少。您实际应该使用什么取决于数据是什么以及您希望如何显示它。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-06-01T15:59:29.837

千万不要使用“TABLE”元素——它比 DIV 或 SPAN 的集合要慢得多，并且需要更多的内存

# ironpython - Ironpython安装问题

> ID：935096
> 
> 赞同：0
> 
> 时间：2009-06-01T14:36:25.370
> 
> 标签：ironpython, .net-3.0

.net 3.0 已安装，但 ironpython 仍然显示“.net 2.0 sp1 is required or later”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-01T14:39:02.883

.NET 3.0 不包括 .NET 2.0SP1。（.NET 2.0 SP1 与 .NET 3.5 SP0 一起发布。）获取 .NET 3.5 SP1 可能是最简单的，它是最新的完全发布版本。

或者，您可以获得包含 .NET 2.0 SP1 的[.NET 3.0 SP1。](http://www.microsoft.com/downloads/details.aspx?FamilyID=EC2CA85D-B255-4425-9E65-1E88A0BDB72A&displaylang=en)

# sql - 树数据结构的数据库结构

> ID：935098
> 
> 赞同：163
> 
> 时间：2009-06-01T14:36:36.133
> 
> 标签：sql, database-design, tree

在数据库中实现可定制的树数据结构（即具有未知级别数的树结构）的最佳方法是什么？

在使用具有自身外键的表之前，我已经这样做了一次。

您还能看到哪些其他实现，这种实现有意义吗？

* * *

## 回答 #1

> 赞同：87
> 
> 时间：2009-06-01T15:02:18.157

您提到最常用的实现，即邻接列表： [https ://blogs.msdn.microsoft.com/mvpawardprogram/2012/06/25/hierarchies-convert-adjacency-list-to-nested-sets](https://blogs.msdn.microsoft.com/mvpawardprogram/2012/06/25/hierarchies-convert-adjacency-list-to-nested-sets)

还有其他模型，包括物化路径和嵌套集：http: [//communities.bmc.com/communities/docs/DOC-9902](http://communities.bmc.com/communities/docs/DOC-9902)

Joe Celko 写了一本关于这个主题的书，从一般的 SQL 角度来看，这是一本很好的参考书（在上面的嵌套集文章链接中提到过）。

此外，Itzik Ben-Gann 在他的“Microsoft SQL Server 2005 内部：T-SQL 查询”一书中对最常见的选项进行了很好的概述。

选择模型时要考虑的主要事项是：

1) 结构变化的频率——树的实际结构变化的频率。一些模型提供了更好的结构更新特性。然而，将结构更改与其他数据更改分开很重要。例如，您可能想要为公司的组织结构图建模。有些人会将其建模为邻接列表，使用员工 ID 将员工链接到他们的主管。这通常是一种次优方法。一种通常效果更好的方法是将组织结构与员工本身分开建模，并将员工作为结构的一个属性进行维护。这样，当员工离开公司时，组织结构本身不需要改变，只需要与离开的员工的关联。

2）树是写重还是读重 - 一些结构在读取结构时工作得很好，但在写入结构时会产生额外的开销。

3）你需要从结构中获取哪些类型的信息——一些结构擅长提供关于结构的某些类型的信息。示例包括查找节点及其所有子节点、查找节点及其所有父节点、查找满足特定条件的子节点的计数等。您需要知道从结构中需要哪些信息来确定最适合的结构您的需求。

* * *

## 回答 #2

> 赞同：62
> 
> 时间：2009-06-01T14:39:17.517

看看[在 MySQL 中管理分层数据](http://mikehillyer.com/articles/managing-hierarchical-data-in-mysql/)。它讨论了在关系数据库中存储和管理分层（树状）数据的两种方法。

第一种方法是邻接列表模型，这就是您所描述的：具有引用表本身的外键。虽然这种方法很简单，但对于某些查询（例如构建整棵树）来说效率可能非常低。

文章中讨论的第二种方法是嵌套集模型。这种方法更加有效和灵活。有关详细说明和示例查询，请参阅文章。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2011-10-14T16:15:07.097

如果您必须使用关系数据库来组织树数据结构，那么 Postgresql 有很酷的 ltree 模块，它提供数据类型来表示存储在分层树状结构中的数据标签。你可以从那里得到这个想法。（有关更多信息，请参阅：[http](http://www.postgresql.org/docs/9.0/static/ltree.html) ://www.postgresql.org/docs/9.0/static/ltree.html ）

通常，LDAP 用于以层次结构组织记录。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-06-01T14:55:10.357

拥有一张带有外键的表对我来说确实很有意义。

然后，您可以使用 SQL 中的公用表表达式或 Oracle 中的 connect by prior 语句来构建您的树。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-08-27T19:19:23.980

如果任何使用**MS SQL Server 2008 及更高版本**的人遇到此问题：SQL Server 2008 及更高版本具有专门为此任务设计的新“hierarchyId”功能。

更多信息，请访问[https://docs.microsoft.com/en-us/sql/relational-databases/hierarchical-data-sql-server](https://docs.microsoft.com/en-us/sql/relational-databases/hierarchical-data-sql-server)

# android - 我如何执行 Dalvik 操作码

> ID：935103
> 
> 赞同：5
> 
> 时间：2009-06-01T14:38:10.373
> 
> 标签：android, assembly, dalvik, opcodes

我想从我在 Android 上的应用程序中直接针对正在运行的 Dalvik VM 实例执行操作码。我正在寻找类似于 C asm 函数的东西。我有一个 dalvik 的操作码列表，但我不熟悉如何直接执行它们，或者将它们写到 .class 文件中，然后从正在运行的应用程序中针对某种 VM CLI 命令（如 dalvikvm）执行它们。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-06-03T15:35:37.387

这是不可能的。有关详细信息，请参阅 youtube 上有关 Dalvik 内部结构的 Google IO 2008 演示文稿。包括 Java 和 MS .NET 的移动 VM 不是完整的 VM，并且由于内存和性能限制，因此遗漏了允许完成您所描述的部分的部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T10:13:35.343

过去这是不可能的，但现在有可能：

[http://android-developers.blogspot.sg/2011/07/custom-class-loading-in-dalvik.html](http://android-developers.blogspot.sg/2011/07/custom-class-loading-in-dalvik.html)

本质上，您可以创建自定义的 dex 文件并加载并执行它。

# css - CSS 0 和 0em 的区别

> ID：935107
> 
> 赞同：17
> 
> 时间：2009-06-01T14:38:38.797
> 
> 标签：css

有没有区别

```
margin: 0; 
```

和

```
margin: 0em; 
```

我什么都没注意到，但我的老师一直告诉我这不一样。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2009-06-01T14:39:30.387

值为0时没有区别。如果是1和1em，是的，有区别，但是0是0，无论单位如何。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2009-06-01T14:43:37.493

0em 文件更大。

* * *

向您的教授证明没有区别的方法是将某些内容设置为 0，将其他内容设置为 0em，然后使用 Firebug 或类似工具检查 DOM。如果我没记错的话，你会看到现在两者都是 0。所以唯一的区别在于源。（但自从我检查以来已经有一段时间了。我可能正在考虑从 jQuery 获取和设置样式。所以在你相信我的话之前先检查一下。）

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-08-22T07:44:16.870

[CSS3 规范](http://www.w3.org/TR/2013/CR-css3-values-20130730/#lengths)是这样说的：

> 对于零长度，单位标识符是可选的

因此，即使 Google 指南、WordPress 指南、Microsoft WebMatrix 以及可能许多其他人说您应该在使用零时省略该单位，但实际上是允许的。因此，这是个人喜好或放入您自己的编码指南的东西。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2009-06-01T14:42:15.810

这就像说0个香蕉和0个苹果不一样。所以在某种程度上，他是对的，但零就是零，所以无论哪种方式，你都会饿死！

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2009-06-01T14:52:36.337

我想知道老师是否试图强调，与其说 0 和 0em 不是同一个值，不如说 CSS 中的默认单位可能不是 em（我相信规范要求非零值附加单位，但是通常假设为 px）。

在具体的例子中，它们显然是相等的。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2009-06-01T14:41:01.820

零就是零就是零。不管单位是否不同。以像素为单位的派生值始终相同：零。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2009-06-02T00:16:44.573

看来你的老师是个白痴。

但也许外表具有欺骗性：你应该问你的老师他们的意思。

我不得不问，你为什么不问你的老师他们第一次说的时候是什么意思？零就是零，无论单位是什么。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2009-09-07T18:14:13.353

带有或不带有相关尺寸单位（em、px 等）的“0”之间肯定存在差异。

虽然在大多数情况下，CSS 将没有单位大小的“0”解释为该属性的默认零单位，但情况并非总是如此（例如 font-size），并且一些验证器会反对需要单位大小的属性当他们遇到不包括该单位的参数时，在他们的规范中。

不同之处在于，没有单位指定的“0”可能会被解释为需要单位大小的属性中的表达式错误。您可能不会注意到差异，因为表达式将被简单地视为“错误语法”并且解释器将跳过它；就像 CSS 中的任何错误语法一样。因此，如果您将“0”指定为单位大小并且默认值为“0em”或“0%”等，那么该属性的结果将保持为“0”。但是，如果您打算更改级联中的先前值，您会注意到它。'0em' 表示，'将先前的值更改为'0em'，但零可能只是说，'忽略此规则'并保留先前的规则有效。这可能根本不是您对赤裸裸的“0”的预期。

这是一个客户端进程，您无法控制特定浏览器现在或将来如何处理“0”和默认解释。

因此，除了告诉任何阅读您的代码的人您肯定打算拥有一个“0”大小的元素以及什么类型的单元是合适的，它实际上可能会影响结果。最好始终使用带零的单位名称。如果您真的很挑剔（就像我一样）或设计 vls 系统和代码（就像我一样），您可能还希望在任何小于 0 的值中放置一个前导零（0.xx...）。这允许以后读者知道你的分数是故意的，而不仅仅是一个错字。

至于那些抱怨“额外打字”的人——我建议你去上打字课。在面试设计师或编码员的工作时，我做的第一件事就是给他们一个打字测试。没有什么比优秀的打字员更能省钱和减少错误了！

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2009-06-23T19:31:24.677

你的老师很固执，因为他或她不愿意承认自己错了。'whatever: 0' 将所有可能的单位，无论是继承的还是其他的，设置为零。0 绝对是零。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2013-03-28T20:19:58.053

这已经被打死了，但是这里……让我们看看“大狗”在上面怎么说。

[谷歌 CSS 指南](http://google-styleguide.googlecode.com/svn/trunk/htmlcssguide.xml#0_and_Units)...

> 除非需要，否则不要在 0 值之后使用单位

[WordPress CSS](http://make.wordpress.org/core/handbook/coding-standards/css/#values)样式指南同样说...

> 0 值不应该有单位，除非必要，例如过渡持续时间。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-06-02T00:32:13.747

0 和 0em 相同，但 x 和 xem 的除 0 以外的任何值都不相同。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2018-12-13T15:12:50.630

和之间有**区别**！`0``0em`

它与`transition`财产有关，但我相信这取决于财产的变化。例如，我认为边距应该没有区别，但至少在 的情况下`line-height`，当值从其他值更改`0`为动画时不会播放，但是当它更改时`0em`它会正常工作。

这可能是一个错误，但我在 Firefox 和 Chromium 中都遇到了相同的行为。

自己检查一下：[https](https://codepen.io/anon/pen/GPoopW?editors=1100) ://codepen.io/anon/pen/GPoopW?editors=1100 。

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2014-03-14T18:31:02.717

谷歌自己的“计算”风格的 Chrome 浏览器包含零值的单位，这符合我个人的偏好，只包含它。

![包括具有零值的单位](https://i.stack.imgur.com/jLRGV.png)

# performance - IO 其他操作性能计数器说明

> ID：935110
> 
> 赞同：10
> 
> 时间：2009-06-01T14:39:03.790
> 
> 标签：performance, winapi, disk, perfmon

我从客户站点收到了性能计数器。我们注意到`\\COMPUTERNAME\Process(PROCESS_NAME)\**IO Other Operations/sec**`.

我想出的计数器的最佳解释是：-

> 进程发出既不是读操作也不是写操作的 I/O 操作（例如，控制函数）的平均速率。此计数器计算进程生成的所有 I/O 活动，包括文件、网络和设备 I/O。此计数器等效于 perfmon 计数器 Process\IO Other Operations/sec。

在[Technet](http://technet.microsoft.com/en-us/library/bb490957.aspx)上，它的描述不会出现。

谁知道这个计数器`(**IO Other Operations/sec**)`实际上是什么？哪个系统调用可能导致此计数器增加以及如何对其进行监视。

我们正在使用 C++。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2021-02-03T02:04:28.203

我认为不存在记录在案的操作列表，因为它太宽泛了。但是，您可以使用[Process Monitor](https://docs.microsoft.com/en-us/sysinternals/downloads/procmon)工具实时了解正在运行的进程执行了哪些操作。如果您观察进程的 I/O 其他操作指标的移动（例如在任务管理器 - 详细信息选项卡中添加了“I/O 其他”列），同时使用进程 PID 上的过滤器运行进程监视器，这应该可以很好地指示哪些操作会影响计数器。

# python - 在 python 脚本中使用easy_install？

> ID：935111
> 
> 赞同：16
> 
> 时间：2009-06-01T14:39:05.007
> 
> 标签：python, setuptools

easy_install python 扩展允许从控制台安装 python 鸡蛋，例如：

```
easy_install py2app 
```

但是是否可以在 python 脚本中访问 easy_install 功能？我的意思是，不调用 os.system("easy_install py2app") 而是将 easy_install 作为 python 模块导入并使用它的本机方法？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2009-06-01T15:05:46.590

当我查看设置工具源时，您似乎可以尝试以下操作。

```
from setuptools.command import easy_install
easy_install.main( ["-U","py2app"] ) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-06-01T15:38:08.590

```
from setuptools.command import easy_install

def install_with_easyinstall(package):
    easy_install.main(["-U", package]).

install_with_easyinstall('py2app') 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-06-01T15:13:47.120

你具体想做什么？除非您有一些奇怪的要求，否则我建议您在 setup.py 中将包声明为依赖项：

```
from setuptools import setup, find_packages
setup(
    name = "HelloWorld",
    version = "0.1",
    packages = find_packages(),
    scripts = ['say_hello.py'],

    # Project uses reStructuredText, so ensure that the docutils get
    # installed or upgraded on the target machine
    install_requires = ['docutils>=0.3'],

    package_data = {
        # If any package contains *.txt or *.rst files, include them:
        '': ['*.txt', '*.rst'],
        # And include any *.msg files found in the 'hello' package, too:
        'hello': ['*.msg'],
    }

    # metadata for upload to PyPI
    author = "Me",
    author_email = "me@example.com",
    description = "This is an Example Package",
    license = "PSF",
    keywords = "hello world example examples",
    url = "http://example.com/HelloWorld/",   # project home page, if any

    # could also include long_description, download_url, classifiers, etc.
) 
```

这里的关键是`install_requires = ['docutils>=0.3']`. 除非用户另外指定，否则这将导致 setup.py 文件自动安装此依赖项。[您可以在此处](http://peak.telecommunity.com/DevCenter/setuptools#declaring-dependencies)找到更多相关文档（请注意 setuptools 网站非常慢！）。

如果您确实有某种无法通过这种方式满足的要求，您可能应该查看[S.Lott 的答案](https://stackoverflow.com/questions/935111/using-easyinstall-inside-a-python-script/935219#935219)（尽管我自己从未尝试过）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2011-05-10T02:19:52.233

关于调用的答案`setuptools.main()`是正确的。但是，如果 setuptools 创建一个 .egg，则脚本在安装后将无法导入模块。在 python 开始时，鸡蛋会自动添加到 sys.path 中。

一种解决方案是使用 require() 将新鸡蛋添加到路径中：

```
from setuptools.command import easy_install
import pkg_resources
easy_install.main( ['mymodule'] )
pkg_resources.require('mymodule') 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2009-06-01T14:57:33.097

我认为您可以通过使用导入 setuptools 来实现。

# asp.net-mvc - 如何告诉 MVC 不要缓存 aspx 或 ascx？

> ID：935114
> 
> 赞同：0
> 
> 时间：2009-06-01T14:40:17.703
> 
> 标签：asp.net-mvc, caching

在网络表单中，我会在 OnInit 方法中执行类似的操作，但是我可以在哪里（以及如何）使用 MVC 执行相同类型的操作？

```
Response.Cache.SetCacheability(HttpCacheability.NoCache) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-06-01T14:42:07.060

您也可以在 MVC 中的控制器操作（通过编写相同的代码行）或添加属性（这是首选）中执行完全相同的操作：

```
[OutputCache(Location=System.Web.UI.OutputCacheLocation.None)]
public ActionResult Index() {
   // ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-01T14:47:58.217

你的意思是MVC应用程序中的非MVC页面，那么同样的方式。如果您的意思是与视图对应的特定操作，则在操作或控制器上使用 OutputCacheAttribute `Location = OutputCacheLocation.None`。

# javascript - 如何从 JavaScript 访问父 iframe

> ID：935127
> 
> 赞同：187
> 
> 时间：2009-06-01T14:43:07.447
> 
> 标签：javascript, iframe

好吧，我有一个 IFrame，它调用同一个域页面。我的问题是我想从这个被调用的页面（来自 JavaScript）访问这个父 iframe 的一些信息。如何访问此 iframe？

详细信息：有几个像这个一样的 iframe，可以加载相同的页面，因为我正在编写 Windows 环境。我打算关闭这个 iframe，这就是为什么我需要知道我应该从他内部关闭哪个。我有一个数组来保存对这些 iframe 的引用。

编辑：动态生成 iframe

* * *

## 回答 #1

> 赞同：152
> 
> 时间：2009-06-01T16:16:08.197

您也可以将名称和 ID 设置为相等的值

```
<iframe id="frame1" name="frame1" src="any.html"></iframe> 
```

这样您就可以在子页面中使用下一个代码

```
parent.document.getElementById(window.name); 
```

* * *

## 回答 #2

> 赞同：103
> 
> 时间：2012-05-28T04:01:53.957

只需[`window.frameElement`](https://developer.mozilla.org/en-US/docs/DOM/window.frameElement)从您的框架页面调用。如果页面不在框架中，那么`frameElement`将是`null`.

另一种方式（在框架内获取窗口元素不那么简单）但为了完整起见：

```
/**
 * @param f, iframe or frame element
 * @return Window object inside the given frame
 * @effect will append f to document.body if f not yet part of the DOM
 * @see Window.frameElement
 * @usage myFrame.document = getFramedWindow(myFrame).document;
 */
function getFramedWindow(f)
{
    if(f.parentNode == null)
        f = document.body.appendChild(f);
    var w = (f.contentWindow || f.contentDocument);
    if(w && w.nodeType && w.nodeType==9)
        w = (w.defaultView || w.parentWindow);
    return w;
} 
```

* * *

## 回答 #3

> 赞同：87
> 
> 时间：2013-03-24T17:17:46.447

我建议使用[postMessage API](https://developer.mozilla.org/en-US/docs/DOM/window.postMessage)。

在您的 iframe 中，调用：

```
window.parent.postMessage({message: 'Hello world'}, 'http://localhost/'); 
```

在包含 iframe 的页面中，您可以侦听如下事件：

```
window.addEventListener('message', function(event) {
      if(event.origin === 'http://localhost/')
      {
        alert('Received message: ' + event.data.message);
      }
      else
      {
        alert('Origin not allowed!');
      }

    }, false); 
```

顺便说一句，也可以调用其他窗口，而不仅仅是 iframe。

[在此处](http://ejohn.org/blog/postmessage-api-changes/)阅读有关 John Resigs 博客上的 postMessage API 的更多信息

* * *

## 回答 #4

> 赞同：31
> 
> 时间：2010-10-10T16:13:31.667

老问题，但我也遇到了同样的问题，并找到了一种获取 iframe 的方法。这只是遍历父窗口的 frames[] 数组并针对运行代码的窗口测试每个帧的 contentWindow 的问题。例子：

```
var arrFrames = parent.document.getElementsByTagName("IFRAME");
for (var i = 0; i < arrFrames.length; i++) {
  if (arrFrames[i].contentWindow === window) alert("yay!");
} 
```

或者，使用 jQuery：

```
parent.$("iframe").each(function(iel, el) {
  if(el.contentWindow === window) alert("got it");
}); 
```

此方法无需为每个 iframe 分配一个 ID，这在您的情况下很好，因为它们是动态创建的。我找不到更直接的方法，因为您无法使用 window.parent 获取 iframe 元素 - 它直接进入父窗口元素（跳过 iframe）。所以遍历它们似乎是唯一的方法，除非你想使用 ID。

* * *

## 回答 #5

> 赞同：22
> 
> 时间：2009-06-01T14:45:42.560

您可以使用它`parent`来访问父页面。所以要访问一个函数，它将是：

```
var obj = parent.getElementById('foo'); 
```

* * *

## 回答 #6

> 赞同：14
> 
> 时间：2012-06-21T13:58:40.017

设置 iframe 的 id 后，您可以从内部文档访问 iframe，如下所示。

```
var iframe = parent.document.getElementById(frameElement.id); 
```

在 IE、Chrome 和 FF 中运行良好。

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2011-11-28T09:29:02.947

也许只是使用

```
window.parent 
```

进入您的 iframe 以获取调用框架/窗口。如果你有多个调用框架，你可以使用

```
window.top 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2009-06-01T16:01:42.693

试试这个，在你的父框架中设置你的 IFRAME，如下所示：

```
<iframe id="frame1" src="inner.html#frame1"></iframe>
<iframe id="frame2" src="inner.html#frame2"></iframe>
<iframe id="frame3" src="inner.html#frame3"></iframe> 
```

请注意，每个帧的 id 作为 src 中的锚点传递。

然后在您的内部 html 中，您可以通过 location.hash 访问它加载的框架的 id：

```
<button onclick="alert('I am frame: ' + location.hash.substr(1))">Who Am I?</button> 
```

然后您可以访问 parent.document.getElementById() 以从 iframe 内部访问 iframe 标记

* * *

## 回答 #9

> 赞同：-2
> 
> 时间：2012-01-16T16:49:06.340

```
// just in case some one is searching for a solution
function get_parent_frame_dom_element(win)
{
    win = (win || window);
    var parentJQuery = window.parent.jQuery;
    var ifrms = parentJQuery("iframe.upload_iframe");
    for (var i = 0; i < ifrms.length; i++)
    {
        if (ifrms[i].contentDocument === win.document)
            return ifrms[i];
    }
    return null;
} 
```

# javascript - 如何从 SharePoint Web 部件访问 onresize 事件？

> ID：935130
> 
> 赞同：0
> 
> 时间：2009-06-01T14:43:34.247
> 
> 标签：javascript, sharepoint, dom-events, moss, wss

我有一些将在 SharePoint Web 部件中执行的 JavaScript。我想在调整窗口大小时执行一个函数。通常我会使用

```
<html>
  <body onresize="resizeFunction();">
  </body>
</html> 
```

但在 SharePoint 中，事情开始变得棘手。我有一个`onload`可以这样使用的功能：

```
_spBodyOnLoadFunctionNames.push('myFunctionName'); 
```

这会在`onLoad`事件中执行。`onResize`事件有类似的东西吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-01T14:57:09.323

您可能会考虑使用外部 javascript 库，例如 jQuery 或原型等。

例如，在 jQuery 中，您可以尝试（未经测试的代码！！）

```
$("window").bind("resize", "myFunctionName");

```

jQuery 文档：[http ://docs.jquery.com/Events/bind](http://docs.jquery.com/Events/bind)

在 SharePoint 中使用 jQuery 的信息：[http ://weblogs.asp.net/jan/archive/2008/11/20/sharepoint-2007-and-jquery-1.aspx](http://weblogs.asp.net/jan/archive/2008/11/20/sharepoint-2007-and-jquery-1.aspx)

编辑：如果您不想使用外部库，请在文档加载时运行一个函数，将另一个函数附加到调整大小事件。就像是：

```
_spBodyOnLoadFunctionNames.push(function() {
    window.onresize = function() {
         /* resize code here */
    }}); 
```

您当然可以使用命名函数。

编辑 2：如上定义您的事件 (window.onresize = ) 仅对一个事件有好处。因此，如果为同一页面上的同一事件以相同的方式指定多个事件处理程序，则最后指定的那个“获胜”。做到这一点的“正确”方法是附加一个事件处理程序，而实现这一点的最简单方法是通过一个库，因为它们透明地处理跨浏览器的差异。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-11-13T14:47:40.587

```
$(window).resize(function(){                
        alert("Ya its workingggg")  ;       
}); 
```

# ruby-on-rails - 持续集成建议？

> ID：935138
> 
> 赞同：6
> 
> 时间：2009-06-01T14:44:43.717
> 
> 标签：ruby-on-rails, ruby, git, testing, continuous-integration

我正在为我的 Rails 应用程序设置一个持续集成服务器（使用 Integrity），我想要建议：

*   大多数人是否设置 CI 以在每次推送到他们的中央 SCM 存储库时构建和测试他们的应用程序，或者仅在推送到他们的暂存分支时？
*   我将使用 CI 服务器自动运行 flay、flog、reek 和 rcov——我应该运行任何其他测试或代码覆盖工具吗？
*   我打算在 Slicehost 上部署我的应用程序。我是否应该在单独的 Slicehost 切片上设置 CI 服务器，该切片设置为与我的生产切片相同（wrt 安装的 gem、库等）？
*   如果我*确实*为 CI 使用单独的切片，那么将 CI 切片用于临时服务器是否有任何危害？

亲切的问候，

雅各布

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-07T12:54:37.193

> 大多数人是否设置 CI 以在每次推送到他们的中央 SCM 存储库时构建和测试他们的应用程序，或者仅在推送到他们的暂存分支时？

取决于项目的团队规模和速度。我在代码的不同分支上工作的人越多，我就越希望 CI 运行得越频繁、越有活力。我建议你从尽可能多的 CI 开始，然后在你认为合适的时候逐渐退出。

> 我将使用 CI 服务器自动运行 flay、flog、reek 和 rcov——我应该运行任何其他测试或代码覆盖工具吗？

metric-fu 涵盖的所有内容都是一个好的开始。如果您的团队有技术作家和/或文档是您交付的一部分，您也可以将 rdoc 放入其中。

> 我打算在 Slicehost 上部署我的应用程序。我是否应该在单独的 Slicehost 切片上设置 CI 服务器，该切片设置为与我的生产切片相同（wrt 安装的 gem、库等）？

如果你能负担得起，是的。通常小型团队和初创企业无法为每项任务都配备专用服务器，但我非常支持隔离。关于相同的设置，尽可能提供一切；设置新服务器应该是快速、简单和自动化的。

> 如果我确实为 CI 使用单独的切片，那么将 CI 切片用于临时服务器是否有任何危害？

唯一的危害是共享资源之间的交叉污染，例如 gem 版本、数据库资源等。如果你有条不紊，你可能会没事，但如果你能负担得起每个环境的单独服务器，我会倾向于更好安全胜于遗憾。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-02T12:31:45.950

我们使用 Rackspace 进行部署和测试。对于开发，我们将三个切片排列如下：

**开发**

托管一个 mercurial 存储库，由开发人员不断更新（通常只是将他们的分支合并到主分支）。测试不会在签到时触发，而是每小时安排一次。该服务器安装了带有测试数据库的 MySQL。

**测试**

托管一个 mercurial 存储库，仅由开发经理更新。用于验收测试，但也有夜间测试运行。此服务器具有带有测试数据库的 MyDQL 安装。

**部署**

成功完成 QA 后，我们将更新从 Test 推送到 Deploy 服务器。此服务器可被视为“setup.exe” - 客户切片应从该切片的备份映像顺利初始化。对此切片的测试实际上围绕着确保这可以发生。

## 新客户设置

Rackspace 允许您复制服务器，因此我们可以返回系统的多个化身。

当需要设置新客户时，我们会从最新版本的 Deploy 初始化他们的新切片，为 HTTPS 添加证书并在 DNS 中注册新切片。

我们还将 /etc/nginx/nginx.conf 和 /etc/mongrel_cluster 等内容存储在版本控制之下。

克里斯

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-02T00:09:40.157

如果您有一个更正式的发布流程，并且有一个单独的测试团队无法像开发人员签入那样快速地进行测试，那么您可能会设置两个构建。(1) 一个非常快速、轻量级的过程，没有永久性工件或存储，每个构建一旦完成就会覆盖前一个构建。这会不断地针对每个集成运行，以告诉开发人员刚刚发生了什么问题。这些仅限内部的构建不受发布经理控制，除了决定何时适合构建类型 (2)，这是一种不太频繁的构建，它运行所有测试（包括手动测试）、创建完整的工件并存储元数据编号和重现构建。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-09T03:34:47.033

我建议您阅读[此](http://blog.martyandrews.net/2009/05/enforcing-ruby-code-quality.html)内容。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-06-01T15:15:35.400

听起来您可能希望将 CI 服务器用于两个目的：

1) 持续集成——这可能是对中央 SCM 回购部分的推动。使用您的 CI 工具来验证开发人员集成其工作的区域是否正常运行。这将为开发团队提供快速反馈。您应该在此处快​​速完成尽可能多的测试。

2) 构建管理 - 针对您的暂存分支，可能已完成构建，因此可以对它们进行更严格的测试和管理以进行进一步的部署。在这里，我会运行您设置的所有测试（以及其他海报建议），并且可能会仔细跟踪这些构建。

如果这是准确的，我肯定会构建两个分支，但是您的测试集合以及维护每个分支的构建结果的方式可能会有所不同。再说一次，如果你能够保持你的主线相当干净，那么单独的 staging 分支会给你带来什么？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-06-01T22:01:22.897

测试和代码覆盖工具——你希望在你的套件中包含尽可能多的这些工具，而不会使你的构建周期陷入困境。例如，如果你添加了太多并且你的构建时间超过了几分钟，那么在每次提交之后继续构建将不会有效率。

在每次提交后构建，IMO，为您的中心和暂存位置。您可能会在这里获得双重覆盖，但如果您有足够的带宽和 CPU，为什么不呢？

我同意使用双切片设置，是的，原因之一是它允许您将第二个切片用作暂存/最终测试区域。此外，如果您从暂存切片部署到生产切片，您可以在切片之间传输信息的同时利用他们的本地网络。这样做要快得多。

希望有帮助:-)

# sql - 如何组合这些查询？

> ID：935139
> 
> 赞同：2
> 
> 时间：2009-06-01T14:44:44.527
> 
> 标签：sql, sql-server-2005-express

我有 5 个查询要一起加入。基本上，他们所做的是浏览数据库并选择租户支付了多少，以及租户欠了多少，这取决于他或她多久前被收费。

我有四个类别
Charge < 30 天
Charge < 60 AND >= 30 天
Charge < 90 AND >= 60 天
Charge > 90 天

我知道如何分别获得所有这些值，但我怎样才能将它们放在一起，再加上租户支付的金额？

以下是我的疑问：
**租户已支付的金额**

```
SELECT TransactionCode, TenantID, SUM(Amount) AS Paid FROM tblTransaction
WHERE Amount > 0
GROUP BY TransactionCode, TenantID 
```

**收费不到 30 天**

```
SELECT TransactionCode, TenantID, SUM(Amount) AS ChargedCurrent FROM tblTransaction
WHERE Amount < 0 AND TransactionDate > DATEADD("dd", -30, GETDATE())
GROUP BY TransactionCode, TenantID 
```

**收费不到 60 天，但超过 29 天**

```
SELECT TransactionCode, TenantID, SUM(Amount) AS ChargedOver30 FROM tblTransaction
WHERE Amount < 0 AND TransactionDate > DATEADD("dd", -60, GETDATE()) AND TransactionDate <= DATEADD("dd", -30, GETDATE())
GROUP BY TransactionCode, TenantID 
```

**收费不到 90 天，但超过 59 天**

```
SELECT TransactionCode, TenantID, SUM(Amount) AS ChargedOver60 FROM tblTransaction
WHERE Amount < 0 AND TransactionDate > DATEADD("dd", -90, GETDATE()) AND TransactionDate <= DATEADD("dd", -60, GETDATE())
GROUP BY TransactionCode, TenantID 
```

**费用超过 89 天**

```
SELECT TransactionCode, TenantID, SUM(Amount) AS ChargedOver90 FROM tblTransaction
WHERE Amount < 0 AND TransactionDate <= DATEADD("dd", -90, GETDATE())
GROUP BY TransactionCode, TenantID 
```

如何通过一个查询获得所有这些？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-06-01T14:50:10.397

可以这样做：

```
SELECT TransactionCode, TenantID, 
SUM(CASE WHEN Amount > 0 then Amount ELSE 0 END) AS Paid,
SUM(CASE WHEN Amount < 0 AND TransactionDate > DATEADD("dd", -30, GETDATE()) THEN Amount ELSE 0 END) AS ChargedCurrent,  
SUM(CASE WHEN Amount < 0 AND TransactionDate > DATEADD("dd", -60, GETDATE()) AND TransactionDate <= DATEADD("dd", -30, GETDATE()) THEN Amount ELSE 0 END) AS ChargedOver30
SUM(CASE WHEN Amount < 0 AND TransactionDate > DATEADD("dd", -90, GETDATE()) AND TransactionDate <= DATEADD("dd", -60, GETDATE()) then Amount Else 0 END) AS ChargedOver60,
SUM(CASE WHEN Amount < 0 AND TransactionDate <= DATEADD("dd", -90, GETDATE()) THEN Amount ELSE 0 END) AS ChargedOver90 
FROM tblTransaction
GROUP BY TransactionCode, TenantID 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-01T14:49:51.990

使用 UNION 将结果集拼接在一起会起作用。您可能希望使用 PIVOT 功能将其转换为单独的列。对不起，我不能更具体，我没有我的笔记，我不知道这些东西的确切语法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-01T14:54:02.793

如果您可以在所有 5 个单独的查询中使查询的投影或形状相同，则可以使用联合不仅将查询组合成单个结果，还可以对结果进行排序。我已经修改了最后一列以保持一致并代表收费的状态，以便您从结果中过滤：

```
SELECT TransactionCode, TenantID, SUM(Amount) [Amount], 'Paid' [Status]
FROM tblTransactionWHERE Amount > 0
GROUP BY TransactionCode, TenantID

union

SELECT TransactionCode, TenantID, SUM(Amount) [Amount], 'Charged Current' [Status]
FROM tblTransactionWHERE Amount < 0 AND TransactionDate > DATEADD("dd", -30, GETDATE())
GROUP BY TransactionCode, TenantID

union

SELECT TransactionCode, TenantID, SUM(Amount) [Amount], 'ChargedOver30' [Status]
FROM tblTransactionWHERE Amount < 0 AND TransactionDate > DATEADD("dd", -60, GETDATE()) AND TransactionDate <= DATEADD("dd", -30, GETDATE())
GROUP BY TransactionCode, TenantID

union

SELECT TransactionCode, TenantID, SUM(Amount) [Amount], 'ChargedOver60' [Status]
FROM tblTransactionWHERE Amount < 0 AND TransactionDate > DATEADD("dd", -90, GETDATE()) AND TransactionDate <= DATEADD("dd", -60, GETDATE())
GROUP BY TransactionCode, TenantID

union

SELECT TransactionCode, TenantID, SUM(Amount) [Amount], 'ChargedOver90' [Status]
FROM tblTransactionWHERE Amount < 0 AND TransactionDate <= DATEADD("dd", -90, GETDATE())
GROUP BY TransactionCode, TenantID

order by 4 --Status 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-06-01T15:01:35.147

这个交叉表查询应该可以工作：

```
SELECT 
Case WHEN Amount > 0 Then Amount Else 0 End as [Total],
Case WHEN Amount < 0 AND TransactionDate > DATEADD("dd", -30, GETDATE())
    Then Amount Else 0 End as [Charge 0-29 Days],
Case WHEN Amount < 0 AND TransactionDate > DATEADD("dd", -60, GETDATE()) AND TransactionDate <= DATEADD("dd", -30, GETDATE()) 
    Then Amount Else 0 End as [Charge 30-59 Days],
Case WHEN Amount < 0 AND TransactionDate > DATEADD("dd", -90, GETDATE()) AND TransactionDate <= DATEADD("dd", -60, GETDATE()) 
    Then Amount Else 0 End as [Charge 60-89 Days],
Case WHEN Amount < 0 AND TransactionDate <= DATEADD("dd", -90, GETDATE())
     Then Amount Else 0 End as [Charge 90+ Days], 
```

FROM tblTransaction GROUP BY TransactionCode、TenantID

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-06-01T14:52:20.207

为每个查询添加一个额外的列

SELECT TransactionCode、TenantID、SUM(Amount) AS ChargedCurrent、30 as [DaysLate] FROM tblTransaction...

然后将所有查询联合起来

# linux - 编写一个中止挂起程序的启动程序

> ID：935141
> 
> 赞同：2
> 
> 时间：2009-06-01T14:45:33.527
> 
> 标签：linux, perl, multithreading

我有一个脚本需要通过 Linux 上的 Perl 定期从具有程序名称的数组中启动程序。问题是有时其中一个程序需要太长时间/挂起并且需要中止。

目前我正在使用`qx/$cmd/`从共享启动队列读取的单独线程启动程序。主线程每 x 秒将一个新元素排入队列。如果队列中有元素，则主线程杀死子线程并启动一个新的子线程。

从功能的角度来看，这很好用，但现在我意识到这会导致内存泄漏。你会如何设计这样一个程序？是否有任何[CPAN](https://en.wikipedia.org/wiki/CPAN)模块可以提供帮助？

主线程如下所示：

```
 if (!$startQueue->pending) {
   $startQueue->enqueue($programList[$i++]);
 }
 else {
   $log->warn("Aborting hanging execution");
   $starterThread->kill('KILL')->detach();
   $log->info("Creating new thread");
   $starterThread = threads->create("starterThread");
 } 
```

子线程是这样的：

```
sub starterThread{
  $SIG{'KILL'} = sub{threads->exit();};
  $log->info("Starter Thread started");
  while() {
    my $programName = $startQueue->dequeue();
    $log->debug("programName:$programName");
    qx/$programName/;
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-01T15:04:04.270

您可以查看[Parallel::ForkManager](http://search.cpan.org/perldoc?Parallel::ForkManager)，它可以让您在任何给定时间管理固定数量的子进程。程序名称数组是在脚本的整个生命周期中保持静态还是不断更新自身？

内存泄漏听起来很可疑；您是否分析过您的脚本并确定kill/enqueue 会导致内存泄漏？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-01T14:54:46.613

像这样的管理器进程的替代方案是带有时间戳的 PID 文件（即内容是`pid` `timestamp`），就像 sendmail 使用的那样。然后你每分钟从cron启动一个新的进程副本，或者其他什么，如果有一个旧进程，新进程要么死掉（如果时间戳是最近的）要么杀死旧进程（如果时间戳是旧的） .

不过，我实际上并不知道为什么您的管理器进程必然会导致内存泄漏。您是否已经确定确实如此？你的理由是什么？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-01T17:02:04.730

通常在程序本身而不是追逐程序中使用警报信号+自我杀戮。

# c++ - Bison 可以解析 UTF-8 字符吗？

> ID：935144
> 
> 赞同：8
> 
> 时间：2009-06-01T14:46:33.353
> 
> 标签：c++, utf-8, bison

我正在尝试制作一个 Bison 解析器来处理 UTF-8 字符。我不希望解析器实际解释 Unicode 字符值，但我希望它将 UTF-8 字符串解析为字节序列。

现在，Bison 生成了以下有问题的代码：

```
 if (yychar <= YYEOF)
    {
      yychar = yytoken = YYEOF;
      YYDPRINTF ((stderr, "Now at end of input.\n"));
    } 
```

问题是 UTF-8 字符串的许多字节都会有负值，而 Bison 将负值解释为 EOF，然后停止。

有没有解决的办法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-06-01T14:50:01.537

`bison`是的， `flex`不。有一次我需要一个 bison 解析器来处理 UTF-8 编码的文件，我最终编写了自己的`yylex`函数。

*编辑*：为了提供帮助，我使用了[glib](https://developer.gnome.org/glib/2.60/glib-Unicode-Manipulation.html)中可用的许多 Unicode 操作（我发现有一个`gunicode`类型和一些文件/字符串操作函数很有用）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-06-01T15:00:49.877

`flex`作为这里的问题，您可能想看看[`zlex`](http://www.cs.binghamton.edu/~zdu/zlex/).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-20T09:38:20.127

这是4年前的一个问题，但我面临同样的问题，我想分享我的想法。

问题是在 UTF-8 中你不知道要读取多少字节。如上所述，您可以使用自己的词法分析器，让它读取整行，或者每次读取 4 个字节。然后从中提取 UTF-8 字符，并读取更多字节以再次完成 4 个字节。

# database - 允许控制使用中文文本

> ID：935153
> 
> 赞同：2
> 
> 时间：2009-06-01T14:48:55.877
> 
> 标签：database, internationalization, cjk

我正在监督一个 asp.old 网络应用程序的大修，以便将订单输入 .net。到目前为止很简单，项目发生了一个有趣的转变，我还需要确保它可以支持中文文本的数据输入。

我现在只是在看数据输入。

我遇到了一个问题，即在某些**条件下，必须只允许以英语输入数据**（当订单涉及中国以外的国家时），以及**允许以中文等输入的其他条件**（当订单仅限本地时）。

数据库目前是单字节存储。关于我如何适应这个的任何建议？目前的想法是 i) 为中文文本维护一个单独的多字节数据库。ii)。首页上的 Javascript 仅强制执行拉丁文本...

当然，我的时间表很短——我只写到 CJKV 的第 11 页。任何指导将不胜感激！谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-06-05T21:59:35.317

我会将其全部移至 UTF8，这将使您的 ASCII 保持为单字节，并允许您输入任何语言（也许您需要添加法语、德语、日语、韩语）......

您可以检测 unicode 中的中文字符，如果国家/地区不是 china/hongkong/taiwan，则会显示错误消息。我也会把它扩展到其他语言和国家。

# apache - Tomcat 关闭时禁用 Apache 503 响应

> ID：935154
> 
> 赞同：2
> 
> 时间：2009-06-01T14:49:07.437
> 
> 标签：apache, tomcat

我们有一些独立的服务器，连接在硬件平衡器后面。每台机器都运行 Apache 2.2、Tomcat 5.0 并`mod_proxy_ajp`作为连接器。

一切正常，但是当 Tomcat 关闭时，Apache 返回错误代码 503（我猜这是预期的）。问题是我们的负载均衡器，它不解释错误代码。它只是想“哦，机器 X 上的服务器已经回答了 -503 blah blah blah，无论如何 - 应我的要求，它似乎正在工作，让我们继续将人员发送到该服务器”。

有没有办法告诉 Apache 在这种情况下不要返回任何东西，而不是 503 错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-01T14:51:18.960

这不可能。你的请求平衡器很糟糕。代替它。

此外，“三层”并不意味着“平衡器、apache 和 tomcat 在它之上”。Balancer 应该直接与 tomcat 对话，并让 apache 从单独的域/服务器提供静态内容。这也将立即解决您的问题。

另外：属于serverfault！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2011-01-19T11:53:03.770

我也有同样的问题。对我来说，最简单的方法是设置 Apache 返回 404 错误。要更改平衡器配置，我必须向通信部门发送请求并等待答复。

# file - 无法浏览某些 pdf 和文档

> ID：935156
> 
> 赞同：0
> 
> 时间：2009-06-01T14:49:31.960
> 
> 标签：file, iis-6, indexing-service

我有一个网站，它使用 Microsoft 索引服务来索引和查询包含 pdf、rtf、mht 和 doc 类型的各种文档的目录。索引和查询运行良好（大部分情况下）；但是，有些文件会加载，而有些则不会。

这是一个使用 IIS 6 运行站点的 Windows Server 2003 机器。

索引目录是站点根目录之外的子目录（即[http://my.domain.com/files/](http://my.domain.com/files/)）。

URL 中的文件路径准确无误；但是，我只能访问每种文件类型的一些文件。我无法访问的文件会给出 404 File Not Found。我可以通过 Windows 资源管理器打开所有文件；但是，尝试通过浏览器通过 http 打开它们是命中注定的。

有没有人遇到过这个问题并知道如何解决它？任何人都知道为什么我可以访问某些文件而不能访问其他文件？有没有人对尝试这个有什么建议（即所有者是否重要或类似的东西？）？

* * *

**编辑：** 这是错误文件的请求和响应标头：

GET /files/file1.pdf HTTP/1.1 接受：image/gif、image/jpeg、image/pjpeg、image/pjpeg、application/x-shockwave-flash、application/xaml+xml、application/vnd.ms-xpsdocument、 application/x-ms-xbap, application/x-ms-application, application/x-silverlight, application/vnd.ms-excel, application/vnd.ms-powerpoint, application/msword, */* Accept-Language: en-us用户代理：Mozilla/4.0（兼容；MSIE 8.0；Windows NT 5.1；Trident/4.0；.NET CLR 1.1.4322；.NET CLR 2.0.50727；.NET CLR 3.0.04506.30；.NET CLR 3.0.04506.590；. NET CLR 3.0.04506.648；.NET CLR 3.5.21022；.NET CLR 3.0.4506.2152；.NET CLR 3.5.30729）接受编码：gzip，放气代理连接：保持活动主机：my.domain.com

HTTP/1.1 404 Not Found Content-Length: 1635 Content-Type: text/html Server: Microsoft-IIS/6.0 X-Powered-By: ASP.NET Date: Mon, 01 Jun 2009 15:38:54 GMT [典型 404页面标记除外]

这是好文件的请求/响应标头：

GET /files/file2.pdf HTTP/1.1 接受：image/gif、image/jpeg、image/pjpeg、image/pjpeg、application/x-shockwave-flash、application/xaml+xml、application/vnd.ms-xpsdocument、 application/x-ms-xbap, application/x-ms-application, application/x-silverlight, application/vnd.ms-excel, application/vnd.ms-powerpoint, application/msword, */* Accept-Language: en-us用户代理：Mozilla/4.0（兼容；MSIE 8.0；Windows NT 5.1；Trident/4.0；.NET CLR 1.1.4322；.NET CLR 2.0.50727；.NET CLR 3.0.04506.30；.NET CLR 3.0.04506.590；. NET CLR 3.0.04506.648；.NET CLR 3.5.21022；.NET CLR 3.0.4506.2152；.NET CLR 3.5.30729）接受编码：gzip，放气代理连接：保持活动主机：my.domain.com

HTTP/1.1 200 OK 内容长度：352464 内容类型：application/pdf 上次修改时间：2009 年 1 月 13 日星期二 15:27:35 GMT 接受范围：字节 ETag：“74ccc5759375c91:2a47” 服务器：Microsoft-IIS/ 6.0 X-Powered-By：ASP.NET 日期：星期一，2009 年 6 月 1 日 15:50:33 GMT

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T07:14:44.773

要解决此问题，请为 Internet Explorer 安装最新的累积安全更新。有关 Internet Explorer 最新累积安全更新的更多技术信息，请访问以下[Microsoft 网站](http://www.microsoft.com/technet/security/current.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-10T04:43:12.317

我发现问题出在 IIS 的配置上。负责遇到此问题的服务器的系统管理员使虚拟目录与被索引的子目录具有相同的名称。当 IIS 解析路径时，文档将从虚拟目录而不是应有的子目录提供。

# vba - VBA 的环境函数代码示例

> ID：935160
> 
> 赞同：20
> 
> 时间：2009-06-01T14:50:44.187
> 
> 标签：vba, environment-variables

我正在为`Environ`VBA 中的函数寻找一些信息或代码示例，以获取当前系统上的用户名。

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2009-06-01T14:55:44.597

`Environ()`获取任何环境变量的值。这些可以通过在命令提示符中执行以下命令来找到：

```
set 
```

如果你想获得用户名，你会这样做：

```
Environ("username") 
```

如果您想获得完全限定的名称，您可以：

```
Environ("userdomain") & "\" & Environ("username") 
```

### 参考

*   微软 | Office VBA 参考 | 语言参考 VBA | [环境功能](https://msdn.microsoft.com/en-us/vba/language-reference-vba/articles/environ-function)
*   微软 | 办公支持 | [环境功能](https://support.office.com/en-us/article/Environ-Function-53940256-e91a-4163-b9ac-79b1dd85e4a5)

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2009-06-02T04:32:02.443

正如 Eric 所提到的，您可以将 environ 与 ComputerName 参数一起使用，如下所示：

```
MsgBox Environ("USERNAME") 
```

一些可能有助于您了解的附加信息：

1.  参数*不*区分大小写。
2.  Environ 函数有一个执行速度稍快的字符串版本。要调用它，请使用美元符号。（例如：Environ$("username")）这将为您带来一点性能提升。
3.  您可以使用此函数检索所有系统环境变量。（不仅仅是用户名。）一个常见的用途是获取“ComputerName”值以查看用户正在从哪台计算机登录。
4.  我不建议在大多数情况下使用它，但知道您也可以使用*index*访问变量有时会很有用。如果使用此语法，则返回参数的名称*和*值。通过这种方式，您可以枚举所有可用的变量。有效值为 1 - 255。

```
 Sub EnumSEVars()
        Dim strVar As String
        Dim i As Long
        For i = 1 To 255
            strVar = Environ$(i)
            If LenB(strVar) = 0& Then Exit For
            Debug.Print strVar
        Next
    End Sub
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-08-06T06:41:21.210

有时当我们使用`Environ()`函数时，我们可能会得到 Library or property not found 错误。使用`VBA.Environ()`或`VBA.Environ$()`来避免错误。

# visual-studio - Visual C++ 运行时库链接器问题

> ID：935161
> 
> 赞同：2
> 
> 时间：2009-06-01T14:50:46.417
> 
> 标签：visual-studio, visual-c++, visual-studio-2005, linker, msvcrt

观察这个接近的场景，即使它看起来和我之前的问题一样。我仍然没有得到答案。**所以请不要报告为重复。**

我有一个项目，它有 10 个依赖项。首先，我在主项目的 C/C++ 代码生成部分中使用 /MTD 选项进行编译，并且它的所有依赖项都已成功构建。

接下来，我将选项从 /MTD 更改为 /MDd，并且所有相关项目都已成功构建。但是对于主项目报如下错误：

* * *

```
LIBCMTD.lib(osfinfo.obj) : error LNK2005: __open_osfhandle already defined in MSVCRTD.lib(MSVCR80D.dll)

LIBCMTD.lib(lseeki64.obj) : error LNK2005: __lseeki64 already defined in MSVCRTD.lib(MSVCR80D.dll)

sqlite3x.lib(sqlite3x_command.obj) : error LNK2005: "protected: wchar_t * __thiscall std::basic_string<wchar_t,struct std::char_traits<wchar_t>,class std::allocator<wchar_t> >::_Myptr(void)" (?_Myptr@?$basic_string@_WU?$char_traits@_W@std@@V?$allocator@_W@2@@std@@IAEPA_WXZ) already defined in msvcprtd.lib(MSVCP80D.dll)

MSVCRTD.lib(MSVCR80D.dll) : error LNK2005: __mkdir already defined in LIBCMTD.lib(mkdir.obj)

MSVCRTD.lib(MSVCR80D.dll) : error LNK2005: __strdup already defined in
LIBCMTD.lib(strdup.obj)

   Creating library Debug/Application.lib and object Debug/Application.exp
LINK : warning LNK4098: defaultlib 'MSVCRTD' conflicts with use of other libs; use /NODEFAULTLIB:library

LINK : warning LNK4098: defaultlib 'LIBCMTD' conflicts with use of other libs; use /NODEFAULTLIB:library 
```

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-06-01T15:03:35.410

您不能混合使用 C 运行时库。如果你有一个编译的库或对象 /MT(anything)，你不能只用 /MD 链接。您需要与线程安全的 MSVCRT 链接。没有如果的和的或但是关于它的。您*不能混合*C 运行时。我一直认为最好使用 /MT，即使在不执行线程的程序中也是如此。

您是否运行了项目清理操作以删除已构建的对象和库？您在这里也依赖于 SQLite，您是否也重建了它？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-01T15:06:30.550

当一堆静态 c++ 库全部链接在一起时，它们都必须有 /MTD 或者它们都必须有 /MDd。您不能将带有 /MTD 的项目与带有 /MDd 的另一个项目链接

这可能是您的链接错误的原因。您仅在主项目上获得它的原因是您的主项目是唯一实际执行链接的项目。请告诉我们它是否解决了您的问题。

我记得我曾经在 /MTD 和 /MDd 上遇到过同样的问题，并且我遇到了非常相似的错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2010-02-09T00:52:39.493

[我在这里](https://stackoverflow.com/questions/949017/how-to-avoid-lnk2005-error-in-visual-studio/2225991#2225991)的回答可能会有所帮助，链接到一些我发现在解决我的这个问题的版本时非常有用的 MSDN 文章。

# java - 将字符串转换为代码

> ID：935175
> 
> 赞同：50
> 
> 时间：2009-06-01T14:54:49.420
> 
> 标签：java

我想知道是否有任何方法可以将 a 转换`String`为 Java 可编译代码。

我在数据库字段中保存了一个比较表达式。我想从数据库中检索它，然后在条件结构中对其进行评估。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2009-06-01T15:31:55.290

如果您使用的是 Java 6，则可以尝试 Java Compiler API。它的核心是[JavaCompiler](http://java.sun.com/javase/6/docs/api/javax/tools/JavaCompiler.html)类。您应该能够`Comparator`在内存中为您的对象构建源代码。

**警告：**我实际上并没有尝试过下面的代码，因为 JavaCompiler 对象在我的平台上不可用，出于某种奇怪的原因......

**警告：**编译任意 Java 代码可能会危害您的健康。

考虑一下自己被警告...

```
String comparableClassName = ...; // the class name of the objects you wish to compare
String comparatorClassName = ...; // something random to avoid class name conflicts
String source = "public class " + comparatorClassName + " implements Comparable<" + comparableClassName + "> {" +
                "    public int compare(" + comparableClassName + " a, " + comparableClassName + " b) {" +
                "        return " + expression + ";" +
                "    }" +
                "}";

JavaCompiler compiler = ToolProvider.getSystemJavaCompiler();

/*
 * Please refer to the JavaCompiler JavaDoc page for examples of the following objects (most of which can remain null)
 */
Writer out = null;
JavaFileManager fileManager = null;
DiagnosticListener<? super JavaFileObject> diagnosticListener = null;
Iterable<String> options = null;
Iterable<String> classes = null;
Iterable<? extends JavaFileObject> compilationUnits = new ArrayList<? extends JavaFileObject>();
compilationUnits.add(
    new SimpleJavaFileObject() {
        // See the JavaDoc page for more details on loading the source String
    }
);

compiler.getTask(out, fileManager, diagnosticListener, options, classes, compilationUnits).call();

Comparator comparator = (Comparator) Class.forName(comparableClassName).newInstance(); 
```

在此之后，您只需将适当的 Java 表达式存储在您的数据库字段中，引用`a`和`b`.

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2015-05-04T19:23:16.293

[关于如何以编程方式编译作为字符串给出的 Java 代码的问题[被问](https://stackoverflow.com/questions/4389232/run-piece-of-code-contained-in-a-string)得非常[频繁](https://stackoverflow.com/questions/13950901/how-to-make-a-string-in-to-code)，而且[形式多种多样](https://stackoverflow.com/questions/14624761/how-to-run-a-java-source-code-inside-a-program)，有时指的是存储在[数据库](https://stackoverflow.com/questions/26217266/execute-java-code-that-is-stored-in-the-database)中或由[用户](https://stackoverflow.com/questions/15881469/how-to-take-in-code-from-user)输入的代码。当我搜索这方面的信息时，我偶然发现了许多这样的问题，并且很失望地看到一般建议是使用外部工具（BeanShell、Groovy...）。Adam Paynter 对这个问题的[回答](https://stackoverflow.com/a/935316/3182664)是最有帮助的，至少可以找出相关的关键字。但即使通过咨询进一步的外部资源（[例如来自 Java2s的示例）](http://www.java2s.com/Code/Java/JDK-6/CompilingfromMemory.htm))，我在仅使用API 实现一个或多个 Java 类（实际*工作*）的纯内存编译方面遇到了困难。`JavaCompiler`]

* * *

所以这里有一个例子，展示了在运行时在内存中编译一个或多个类的整个过程，当它们的源代码以字符串形式给出时。它是围绕一个小型实用程序类构建的`RuntimeCompiler`，它仅接收序列类名称和相应的源代码，然后允许编译这些类并获取`Class`对象。

它是一个可以直接编译和执行的[MCVE——使用](https://stackoverflow.com/help/mcve)*JDK*，**而不是**使用*JRE*，因为后者不包含`JavaCompiler`.

```
import java.io.ByteArrayOutputStream;
import java.io.IOException;
import java.io.OutputStream;
import java.lang.reflect.InvocationTargetException;
import java.lang.reflect.Method;
import java.lang.reflect.Modifier;
import java.net.URI;
import java.util.ArrayList;
import java.util.Arrays;
import java.util.Collections;
import java.util.Comparator;
import java.util.LinkedHashMap;
import java.util.List;
import java.util.Map;

import javax.tools.Diagnostic;
import javax.tools.DiagnosticCollector;
import javax.tools.FileObject;
import javax.tools.ForwardingJavaFileManager;
import javax.tools.JavaCompiler;
import javax.tools.JavaCompiler.CompilationTask;
import javax.tools.JavaFileObject;
import javax.tools.JavaFileObject.Kind;
import javax.tools.SimpleJavaFileObject;
import javax.tools.StandardJavaFileManager;
import javax.tools.ToolProvider;

/**
 * An example showing how to use the RuntimeCompiler utility class
 */
public class RuntimeCompilerExample
{
    public static void main(String[] args) throws Exception
    {
        simpleExample();
        twoClassExample();
        useLoadedClassExample();
    }

    /**
     * Simple example: Shows how to add and compile a class, and then
     * invoke a static method on the loaded class.
     */
    private static void simpleExample()
    {
        String classNameA = "ExampleClass";
        String codeA =
            "public class ExampleClass {" + "\n" + 
            "    public static void exampleMethod(String name) {" + "\n" + 
            "        System.out.println(\"Hello, \"+name);" + "\n" + 
            "    }" + "\n" + 
            "}" + "\n";

        RuntimeCompiler r = new RuntimeCompiler();
        r.addClass(classNameA, codeA);
        r.compile();

        MethodInvocationUtils.invokeStaticMethod(
            r.getCompiledClass(classNameA), 
            "exampleMethod", "exampleParameter");
    }

    /**
     * An example showing how to add two classes (where one refers to the 
     * other), compile them, and invoke a static method on one of them
     */
    private static void twoClassExample()
    {
        String classNameA = "ExampleClassA";
        String codeA =
            "public class ExampleClassA {" + "\n" + 
            "    public static void exampleMethodA(String name) {" + "\n" + 
            "        System.out.println(\"Hello, \"+name);" + "\n" + 
            "    }" + "\n" + 
            "}" + "\n";

        String classNameB = "ExampleClassB";
        String codeB =
            "public class ExampleClassB {" + "\n" + 
            "    public static void exampleMethodB(String name) {" + "\n" + 
            "        System.out.println(\"Passing to other class\");" + "\n" + 
            "        ExampleClassA.exampleMethodA(name);" + "\n" + 
            "    }" + "\n" + 
            "}" + "\n";

        RuntimeCompiler r = new RuntimeCompiler();
        r.addClass(classNameA, codeA);
        r.addClass(classNameB, codeB);
        r.compile();

        MethodInvocationUtils.invokeStaticMethod(
            r.getCompiledClass(classNameB), 
            "exampleMethodB", "exampleParameter");
    }

    /**
     * An example that compiles and loads a class, and then uses an 
     * instance of this class
     */
    private static void useLoadedClassExample() throws Exception
    {
        String classNameA = "ExampleComparator";
        String codeA =
            "import java.util.Comparator;" + "\n" + 
            "public class ExampleComparator " + "\n" + 
            "    implements Comparator<Integer> {" + "\n" + 
            "    @Override" + "\n" + 
            "    public int compare(Integer i0, Integer i1) {" + "\n" + 
            "        System.out.println(i0+\" and \"+i1);" + "\n" + 
            "        return Integer.compare(i0, i1);" + "\n" + 
            "    }" + "\n" + 
            "}" + "\n";

        RuntimeCompiler r = new RuntimeCompiler();
        r.addClass(classNameA, codeA);
        r.compile();

        Class<?> c = r.getCompiledClass("ExampleComparator");
        Comparator<Integer> comparator = (Comparator<Integer>) c.newInstance();

        System.out.println("Sorting...");
        List<Integer> list = new ArrayList<Integer>(Arrays.asList(3,1,2));
        Collections.sort(list, comparator);
        System.out.println("Result: "+list);
    }

}

/**
 * Utility class for compiling classes whose source code is given as
 * strings, in-memory, at runtime, using the JavaCompiler tools.
 */
class RuntimeCompiler
{
    /**
     * The Java Compiler
     */
    private final JavaCompiler javaCompiler;

    /**
     * The mapping from fully qualified class names to the class data
     */
    private final Map<String, byte[]> classData;

    /**
     * A class loader that will look up classes in the {@link #classData}
     */
    private final MapClassLoader mapClassLoader;

    /**
     * The JavaFileManager that will handle the compiled classes, and
     * eventually put them into the {@link #classData}
     */
    private final ClassDataFileManager classDataFileManager;

    /**
     * The compilation units for the next compilation task
     */
    private final List<JavaFileObject> compilationUnits;

    /**
     * Creates a new RuntimeCompiler
     * 
     * @throws NullPointerException If no JavaCompiler could be obtained.
     * This is the case when the application was not started with a JDK,
     * but only with a JRE. (More specifically: When the JDK tools are 
     * not in the classpath).
     */
    public RuntimeCompiler()
    {
        this.javaCompiler = ToolProvider.getSystemJavaCompiler();
        if (javaCompiler == null)
        {
            throw new NullPointerException(
                "No JavaCompiler found. Make sure to run this with "
                    + "a JDK, and not only with a JRE");
        }
        this.classData = new LinkedHashMap<String, byte[]>();
        this.mapClassLoader = new MapClassLoader();
        this.classDataFileManager =
            new ClassDataFileManager(
                javaCompiler.getStandardFileManager(null, null, null));
        this.compilationUnits = new ArrayList<JavaFileObject>();
    }

    /**
     * Add a class with the given name and source code to be compiled
     * with the next call to {@link #compile()}
     * 
     * @param className The class name
     * @param code The code of the class
     */
    public void addClass(String className, String code)
    {
        String javaFileName = className + ".java";
        JavaFileObject javaFileObject =
            new MemoryJavaSourceFileObject(javaFileName, code);
        compilationUnits.add(javaFileObject);
    }

    /**
     * Compile all classes that have been added by calling 
     * {@link #addClass(String, String)}
     * 
     * @return Whether the compilation succeeded
     */
    boolean compile()
    {
        DiagnosticCollector<JavaFileObject> diagnosticsCollector =
            new DiagnosticCollector<JavaFileObject>();
        CompilationTask task =
            javaCompiler.getTask(null, classDataFileManager,
                diagnosticsCollector, null, null, 
                compilationUnits);
        boolean success = task.call();
        compilationUnits.clear();
        for (Diagnostic<?> diagnostic : diagnosticsCollector.getDiagnostics())
        {
            System.out.println(
                diagnostic.getKind() + " : " + 
                diagnostic.getMessage(null));
            System.out.println(
                "Line " + diagnostic.getLineNumber() + 
                " of " + diagnostic.getSource());
            System.out.println();
        }
        return success;
    }

    /**
     * Obtain a class that was previously compiled by adding it with
     * {@link #addClass(String, String)} and calling {@link #compile()}. 
     * 
     * @param className The class name
     * @return The class. Returns <code>null</code> if the compilation failed.
     */
    public Class<?> getCompiledClass(String className)
    {
        return mapClassLoader.findClass(className);
    }

    /**
     * In-memory representation of a source JavaFileObject 
     */
    private static final class MemoryJavaSourceFileObject extends
        SimpleJavaFileObject
    {
        /**
         * The source code of the class
         */
        private final String code;

        /**
         * Creates a new in-memory representation of a Java file
         * 
         * @param fileName The file name
         * @param code The source code of the file
         */
        private MemoryJavaSourceFileObject(String fileName, String code)
        {
            super(URI.create("string:///" + fileName), Kind.SOURCE);
            this.code = code;
        }

        @Override
        public CharSequence getCharContent(boolean ignoreEncodingErrors)
            throws IOException
        {
            return code;
        }
    }

    /**
     * A class loader that will look up classes in the {@link #classData}
     */
    private class MapClassLoader extends ClassLoader
    {
        @Override
        public Class<?> findClass(String name)
        {
            byte[] b = classData.get(name);
            return defineClass(name, b, 0, b.length);
        }
    }

    /**
     * In-memory representation of a class JavaFileObject
     * @author User
     *
     */
    private class MemoryJavaClassFileObject extends SimpleJavaFileObject
    {
        /**
         * The name of the class represented by the file object
         */
        private final String className;

        /**
         * Create a new java file object that represents the specified class
         * 
         * @param className THe name of the class
         */
        private MemoryJavaClassFileObject(String className)
        {
            super(URI.create("string:///" + className + ".class"), 
                Kind.CLASS);
            this.className = className;
        }

        @Override
        public OutputStream openOutputStream() throws IOException
        {
            return new ClassDataOutputStream(className);
        }
    }

    /**
     * A JavaFileManager that manages the compiled classes by passing
     * them to the {@link #classData} map via a ClassDataOutputStream
     */
    private class ClassDataFileManager extends
        ForwardingJavaFileManager<StandardJavaFileManager>
    {
        /**
         * Create a new file manager that delegates to the given file manager
         * 
         * @param standardJavaFileManager The delegate file manager
         */
        private ClassDataFileManager(
            StandardJavaFileManager standardJavaFileManager)
        {
            super(standardJavaFileManager);
        }

        @Override
        public JavaFileObject getJavaFileForOutput(final Location location,
            final String className, Kind kind, FileObject sibling)
            throws IOException
        {
            return new MemoryJavaClassFileObject(className);
        }
    }

    /**
     * An output stream that is used by the ClassDataFileManager
     * to store the compiled classes in the  {@link #classData} map
     */
    private class ClassDataOutputStream extends OutputStream
    {
        /**
         * The name of the class that the received class data represents
         */
        private final String className;

        /**
         * The output stream that will receive the class data
         */
        private final ByteArrayOutputStream baos;

        /**
         * Creates a new output stream that will store the class
         * data for the class with the given name
         * 
         * @param className The class name
         */
        private ClassDataOutputStream(String className)
        {
            this.className = className;
            this.baos = new ByteArrayOutputStream();
        }

        @Override
        public void write(int b) throws IOException
        {
            baos.write(b);
        }

        @Override
        public void close() throws IOException
        {
            classData.put(className, baos.toByteArray());
            super.close();
        }
    }
}

/**
 * Utility methods not directly related to the RuntimeCompiler
 */
class MethodInvocationUtils
{
    /**
     * Utility method to invoke the first static method in the given 
     * class that can accept the given parameters.
     *  
     * @param c The class
     * @param methodName The method name
     * @param args The arguments for the method call
     * @return The return value of the method call
     * @throws RuntimeException If either the class or a matching method
     * could not be found
     */
    public static Object invokeStaticMethod(
        Class<?> c, String methodName, Object... args)
    {
        Method m = findFirstMatchingStaticMethod(c, methodName, args);
        if (m == null)
        {
            throw new RuntimeException("No matching method found");
        }
        try
        {
            return m.invoke(null, args);
        }
        catch (IllegalAccessException e)
        {
            throw new RuntimeException(e);
        }
        catch (IllegalArgumentException e)
        {
            throw new RuntimeException(e);
        }
        catch (InvocationTargetException e)
        {
            throw new RuntimeException(e);
        }
        catch (SecurityException e)
        {
            throw new RuntimeException(e);
        }
    }

    /**
     * Utility method to find the first static method in the given
     * class that has the given name and can accept the given 
     * arguments. Returns <code>null</code> if no such method 
     * can be found.
     * 
     * @param c The class
     * @param methodName The name of the method 
     * @param args The arguments
     * @return The first matching static method.
     */
    private static Method findFirstMatchingStaticMethod(
        Class<?> c, String methodName, Object ... args)
    {
        Method methods[] = c.getDeclaredMethods();
        for (Method m : methods)
        {
            if (m.getName().equals(methodName) &&
                Modifier.isStatic(m.getModifiers()))
            {
                Class<?>[] parameterTypes = m.getParameterTypes();
                if (areAssignable(parameterTypes, args))
                {
                    return m;
                }
            }
        }
        return null;
    }

    /**
     * Returns whether the given arguments are assignable to the
     * respective types
     * 
     * @param types The types
     * @param args The arguments
     * @return Whether the arguments are assignable
     */
    private static boolean areAssignable(Class<?> types[], Object ...args)
    {
        if (types.length != args.length)
        {
            return false;
        }
        for (int i=0; i<types.length; i++)
        {
            Object arg = args[i];
            Class<?> type = types[i];
            if (arg != null && !type.isAssignableFrom(arg.getClass()))
            {
                return false;
            }
        }
        return true;
    }

} 
```

> 编辑回应评论：

为了编译包含在外部 JAR 文件中的类，将 JAR 添加到`classpath`调用应用程序就足够了。然后`JavaCompiler`将选择此类路径以查找编译所需的类。

[似乎有什么魔法。至少，我还没有弄清楚这背后的确切机制，只是用一个例子测试了一下]

附带说明：当然，可以考虑对此类进行*任意扩展。*我的目标是创建一个简单、独立、易于复制和粘贴的示例，以显示整个过程，甚至可能对某些应用程序模式“有用”。

对于更复杂的功能，可以考虑相应地扩展这个类，或者看看例如来自 OpenHFT 项目的[Java-Runtime-Compiler](https://github.com/OpenHFT/Java-Runtime-Compiler)（我在写完这个答案几周后偶然发现了这个）。它在内部基本上使用了相同的技术，但采用了更复杂的方式，并且还提供了专门的机制来处理外部依赖项的类加载器。

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2009-07-12T04:57:08.600

使用 Groovy！

```
Binding binding = new Binding();
GroovyShell shell = new GroovyShell(binding);
Object value = shell.evaluate("for (x=0; x<5; x++){println "Hello"}; return x"); 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2010-04-08T14:29:21.457

您可以使用[BeanShell](http://www.beanshell.org/intro.html)。
关键类是`bsh.Interpreter`.

这是一个简单的例子：

```
Interpreter interpreter = new Interpreter();
Object res = interpreter.eval("your expresion"); 
```

甚至可以定义整个类而不是单个表达式。

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2009-06-01T14:59:13.407

您可以使用类似[BeanShell](http://www.beanshell.org/intro.html)的东西。

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2009-06-01T14:56:55.610

你不能因为java是一种编译语言。

但是，您应该使用`javax.script`api 在运行时执行代码。JVM6 附带 Rhino（javascript 解释器），可通过`javax.script`.

[http://java.sun.com/javase/6/docs/api/javax/script/package-summary.html](http://java.sun.com/javase/6/docs/api/javax/script/package-summary.html)

有`javax.script`兼容的 java 解释器（和 bean shell）可用。

[https://scripting.dev.java.net/](https://scripting.dev.java.net/)

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2011-09-12T14:13:39.447

如果您想生成一段可编译的代码并将字符串转储到那里，Commons Lang 的[StringEscapeUtils.escapeJava可能会有所帮助。](http://commons.apache.org/proper/commons-lang/javadocs/api-2.6/org/apache/commons/lang/StringEscapeUtils.html#escapeJava)

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2009-06-01T15:09:52.760

说这是不可能的是不公平的。这与 Java 服务器页面 (JSP) 的问题非常相似——在他们的情况下，HTML 文件中嵌入了代码，需要编译成 servlet 并执行。如果您真的想使用该机制，我相对确定您可以挖掘[servlet 容器的源代码](http://tomcat.apache.org/svn.html)并弄清楚它们是如何做到的（甚至可能在某种程度上重用它们的机制。）

然而; 这不是一个容易解决的问题（一旦你解决了明显的、直接的问题，你最终不得不处理类加载问题和相关问题。）

使用JDK6 中 的[Java Scripting Platform](http://java.sun.com/developer/technicalArticles/J2SE/Desktop/scripting/)似乎是一个更好的主意。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2009-06-01T15:33:40.887

显然[Java Scripting Platform](http://java.sun.com/developer/technicalArticles/J2SE/Desktop/scripting/)更适合这种情况，但您也可以使用[Java Compiler Api](http://java.sun.com/javase/6/docs/api/javax/tools/JavaCompiler.html)。它提供了从 java 代码中编译 java 源文件的方法。在您的情况下，您可以使用比较表达式制作一个包含类的临时文件，然后您可以加载该文件并使用它。当然，这不是很优雅。查看[http://www.juixe.com/techknow/index.php/2006/12/13/java-se-6-compiler-api/](http://www.juixe.com/techknow/index.php/2006/12/13/java-se-6-compiler-api/)了解使用 Java Compiler Api 的详细信息

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2009-06-01T17:47:42.390

Groovy 也可能是您的选择。

它与[Bean Scripting Framework](http://groovy.codehaus.org/Bean+Scripting+Framework)完美集成，可以很容易地[直接嵌入，并且在语法方面对您来说可能没问题。](http://groovy.codehaus.org/Embedding+Groovy)

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2009-06-01T18:59:33.933

你不应该。真的！

您是否正在发明另一个[企业规则引擎？](http://worsethanfailure.com/Articles/The_Enterprise_Rules_Engine.aspx). 您可能想[阅读](http://thedailywtf.com/Articles/Soft_Coding.aspx)这些[链接。](http://thedailywtf.com/Articles/The-Mythical-Business-Layer.aspx)

考虑一下这样一个事实，即只有足够熟练才能编写代码然后将其插入数据库的人，可能无论如何都拥有一个编辑器和一个编译器......

编译器会捕捉到所有那些讨厌的语法错误，你甚至可以测试代码！请记住，编辑器和编译器，甚至计算机语言的发明都是为了帮助程序员以合理的努力舒适地编写可理解的代码。

当我在做的时候：阅读关于[并发症手套](http://thedailywtf.com/Articles/The_Complicator_0x27_s_Gloves.aspx)的信息！

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2011-05-02T20:07:30.657

您最好将数据库条件信息映射到一个对象，然后在其上实现一个 equals 方法，您可以使用来自 apache commons beanutils 的 BeanPropertyValueEqualsPredicate 或实现 Comparable 。这应该可以满足您的需求，而不会出现将字符串转换为代码的所有神奇编译器或安全问题。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2009-07-22T21:29:14.850

是的，这在很多方面都是可能的。

正如上面提到的，Java 6 允许您在加载代码时解析、操作和重写代码！

解决方案可能会有所不同：

例如，您可以将 DB 表达式编写为 Java 类，并将您的序列化类作为 glob 或 blob 或其他任何名称插入 DB。

或者，您可以使用模板将 Java 类写入文件并将表达式插入其中。然后在运行时编译该类（如 JSP 到 Servlet），然后动态加载该类。

当然，如果尚未在数据库中对其进行编辑，则您希望缓存已编译的类以供将来使用。

然后还有使用集成脚本引擎的选项，例如大多数回复中提到的。

无论您选择什么，也许您都可以使用您的选择、实施、问题、注释、评论等详细信息来更新这篇文章。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2009-06-01T15:39:36.593

将代码片段转换为可执行字节码的一种简单方法是使用 Javassist 库。

您可以调整[http://www.ibm.com/developerworks/java/library/j-dyn0610/](http://www.ibm.com/developerworks/java/library/j-dyn0610/)中描述的技术以满足您的需求。

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2009-06-01T17:39:55.507

如果您从数据库中获取条件，我敢打赌，您很有可能希望使用该条件来*访问*该数据库中的数据。

如果您使用诸如 JPA 或 Hibernate（传统或 JPA）之类的 ORM，您可能能够制定一个动态查询表达式，并将其传递给 createQuery() 方法。这不如能够对任意 Java 代码进行即时编译，但也许这就是您所需要的，并且该特定解决方案不需要任何特殊的包含或操作，因为查询语言编译器是ORM 系统本身的一部分。

当然，如果您确实以这种方式进行动态查询，我建议您以某种方式记录它们，因为如果您的查询字符串现在在垃圾收集器中，那么在事后弄清楚发生了什么问题可能会非常痛苦。

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2009-06-01T19:28:42.767

如果您真正需要做的只是评估存储在数据库中的表达式，您可能需要查看 JEP（Java 表达式解析器）

最新（商业）版本在[这里](http://www.singularsys.com/jep/)。

稍旧的 GPL 版本在[这里](http://sourceforge.net/projects/jep/)

[一些使用示例](http://www.singsurf.org/djep/html/index.html)。

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2009-06-02T15:26:53.087

如果您愿意牺牲需求的“Java 代码”部分，您可以使用[Java 数学表达式评估器](http://lts.online.fr/dev/java/math.evaluator/)库。它允许您指定数学表达式（作为 java.lang.String），为变量添加值，然后计算表达式。

我已经在生产代码中使用它并取得了巨大的成功。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2014-05-15T17:37:09.017

我同时使用了 BeanShell 和 GroovyShell，但在性能方面，如果您 p​​rase 和缓存脚本，GroovyShell 会更快。

# visual-studio - VisualStudio：没有调试输出

> ID：935180
> 
> 赞同：26
> 
> 时间：2009-06-01T14:56:21.307
> 
> 标签：visual-studio, debugging

我正在尝试调试 C# 应用程序。方法：

```
System.Diagnostics.Debug.WriteLine("something"); 
```

应该做的工作，但在输出窗口（设置为“调试”并激活所有选项）我看不到我试图写的一行。任何的想法？谢谢

编辑：我正在使用 VS2008

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2009-06-01T15:14:12.890

Tools-Options-Debugging-General下有一个选项，Redirect all Output Window text to the Immediate Window。确保已禁用。但是，默认情况下不是，所以我怀疑这是你的问题。您也可以只检查您的即时窗口，看看它是否在那里输出。

您可能还想尝试重置所有环境设置。（工具 - 导入和导出设置 - 重置所有设置。）

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2010-04-08T08:07:20.187

同样值得检查 - 在输出窗口中单击鼠标右键，并确保选中“程序输出”。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2009-06-01T15:00:08.910

您是否检查过以确保您在调试模式下进行编译？如果您在零售/发布模式下编译，您将看到此行为。

您应该能够在 Visual Studio 的工具栏上看到此信息。会有一个组合框，上面写着 Release 或 Debug。如果显示 Release，请将其切换到 Debug。

在某些配置文件设置中，默认情况下此组合框不可见。您必须通过项目属性页面访问它。它将位于构建/编译选项卡上。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2009-06-01T15:18:24.600

除了上述建议之外，通过右键单击项目名称并选择*Properties*来查看项目属性。完成后，单击“*构建”选项卡*，然后单击右下角的“*高级”按钮*。启动*Advanced*窗口后，查看*Output 部分*和*Debug Info:*设置。当您处于调试模式时，应将其设置为**full**。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2009-06-01T15:03:22.353

此外，请确保您的输出窗口设置为显示“调试”输出而不是“构建”输出之类的其他内容。

您应该看到它在“调试”输出中加载了所有必需的程序集。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2016-05-19T08:14:31.563

我有同样的问题，通过选择显示调试：

调试 -> 窗口 -> 输出

但是，我的输出现在仍然显示，所以我猜 vs 会隐藏 Debug 直到有实际数据被写出。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2009-06-01T15:00:30.440

您需要将系统显式添加`Console`为 a [`TraceListener`](http://msdn.microsoft.com/en-us/library/system.diagnostics.tracelistener.aspx)，以便输出出现在控制台中。根据微软的[文档](http://msdn.microsoft.com/en-us/library/system.diagnostics.debug.aspx)，这段代码应该可以解决问题。这是 C# 代码，但我提供的链接包含其他 .NET 语言的示例。

```
using System;
using System.Data;
using System.Diagnostics;

class Test
{
    static void Main()
    {
       Debug.Listeners.Add(new TextWriterTraceListener(Console.Out));
       Debug.AutoFlush = true;
       Debug.Indent();
       Debug.WriteLine("Entering Main");
       Console.WriteLine("Hello World.");
       Debug.WriteLine("Exiting Main"); 
       Debug.Unindent();
    }
} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-06-28T11:27:20.630

项目属性下的“启用 Visual Studio 托管进程”-> 调试为我解决了这个问题。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2016-10-25T02:08:15.090

如果您使用快捷方式，请确保您按下`F5`启动调试模式（不是 Ctr+F5）。

> **F5**开始调试
> 
> **CTRL+F5**不调试启动

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-06-29T15:37:23.913

我刚刚在 Visual Studio 2010 和 2017 中遇到了这个问题，这就是我为使其工作所做的工作，但我无法解释为什么它现在可以工作。

我做了什么让它工作。我创建了一个新的 Windows 窗体项目并添加了一个按钮，按下该按钮时执行 Console.WriteLine("Test")。我在输出窗口中看到了“测试”。然后我加载了我的真实项目并添加了一个按钮来执行 Console.WriteLine("Test") ，现在它产生了输出。从那时起，更多的 Console.WriteLine 语句开始起作用。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-01-30T14:05:30.157

在我的 Visual Studio 2017 项目中，输出出现在*即时窗口中*

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2020-01-07T06:01:56.397

如果一切都失败了，请尝试重新启动 Visual Studio。为我工作。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2021-06-14T15:54:44.577

您的调试输出可能会发送到 Visual Studio 外部的新命令提示符，该命令提示符会在您开始调试时打开。如果你全神贯注于 VS 正在做的事情，很容易错过这一点！

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2021-06-15T00:33:03.837

打开项目属性并转到 Linker->System->SubSystem 并将其更改为 Console 怎么样？我的设置为 Windows，但它仍然没有像往常一样显示在“输出”窗格中，但至少您可以看到一些东西。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2021-07-30T17:14:18.627

我的问题是，输出窗口是打开的，但是当我开始调试时，它立即消失了。我发现，在调试时，我必须从 View->output 或 Ctrl+W,O 再次显示它。然后它会留在那里。

# c# - 如何查看 HttpWebRequest 发送的 headers

> ID：935181
> 
> 赞同：7
> 
> 时间：2009-06-01T14:56:33.677
> 
> 标签：c#

我正在使用 HttpWebRequest 抓取网站，但该网站返回错误。当我从浏览器中点击该页面时，该页面工作正常。我想比较它们以查看可能导致错误的原因。我知道如何拦截来自浏览器的请求以检查标头，但是如何查看 HttpWebRequest 发送的数据？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-06-01T14:59:45.760

为了比较您在代码中所做的事情以及浏览器所做的事情，我相信诸如[Fiddler](http://www.fiddler2.com/fiddler2/)之类的 HTTP 调试工具将是最简单的解决方案。

Fiddler 充当客户端和服务器之间的代理，并显示通过 HTTP 协议发送的所有信息。

您可能需要将 .NET 应用程序配置为使用 Fiddler 提供的代理。[此博客文章](http://www.west-wind.com/weblog/posts/596348.aspx)提供了有关该主题的详细信息。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-06-01T14:58:15.497

[http://www.fiddler2.com/fiddler2/](http://www.fiddler2.com/fiddler2/)是处理此类事情的好工具。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-06-01T15:00:19.550

[Firebug](http://www.getfirebug.com/)的 Net 面板将显示所有请求，包括标头。

**编辑**：看到我一发布，您就已经知道如何在浏览器中进行操作了。试试 Headers 属性：

```
HttpWebRequest request = (HttpWebRequest)WebRequest.Create("http://www.stackoverflow.com");
request.Method = "GET";
HttpWebResponse response = (HttpWebResponse) request.GetResponse();
Console.WriteLine(response.Headers); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-09-30T02:00:51.587

您可以通过 Headers 属性从 HTTPWebRequest 获取标头。来自 MSDN：http: [//msdn.microsoft.com/en-us/library/system.net.httpwebrequest.headers.aspx](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.headers.aspx)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2009-06-01T14:58:29.897

不知道有没有通用的解决办法。但是，如果您使用的是 Firefox，那么两个附加组件中的任何一个都会有所帮助：Firebug 或 LiveHTTPHeaders。

# php - PHP MySQL 连接表

> ID：935190
> 
> 赞同：2
> 
> 时间：2009-06-01T14:59:29.350
> 
> 标签：php, mysql

我正在尝试创建一个目录，我有两个表，条目和位置。每个条目都可以有多个位置，所以我假设最好的想法（如果错误则更正）是创建第三个表，我在其中指定“链接”。例子：

```
Marly:France
Karla:Argentina
Smith:USA
Katie:France
Smith:United Kingdom
Katie:USA 
```

当我想列出来自法国的人时，我会进入第三张表并在 location = France 的地方提取名称。到目前为止，我对所做的一切都很好，但现在我需要从法国每个人的每个姓名的条目表中检索数据（根据第三个表）。我很确定我以前见过这样做。任何指针？:D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-01T15:02:05.037

```
SELECT `entry`.*
FROM `entry`
JOIN `entry-locations` ON `entry-locations`.`entry-id` = `entry`.`name`
WHERE `entry-locations`.`location` = 'Aberdeen'

$res = mysql_query('all-that-stuff-above');
while($row = mysql_fetch_assoc($res)) {
    echo $row['name'] . "\n";
}
mysql_free_result($res); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-01T15:08:52.310

```
SELECT
    entryt.name AS name,
    locationt.location AS location
FROM locationt, entryt
WHERE locationt.location = "France" 
```

请记住：更改我在那里使用的名称：

*   我将条目表命名为“entryt”
*   并且位置表为“locationt”

应该与所有居住在法国的人一起返回“姓名”。

很确定这会奏效。不过，如果我错了，请纠正我。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-01T16:00:09.027

`SELECT * FROM entry WHERE name in (SELECT name FROM links WHERE location = 'FRANCE');`

我假设表名是“entry”和“links”，列名是“entry.name”和“links.location”。

# javascript - javascript中的日期问题

> ID：935198
> 
> 赞同：0
> 
> 时间：2009-06-01T15:00:32.653
> 
> 标签：javascript

我对 Javascript 中的日期有疑问。我需要增加 1 天的日期，我正在使用这个：

```
var myDate = new Date();
myDate.setDate(myDate.getDate() + 1); 
```

但是什么时候是 6 月 30 日，增加的日期将是 6 月 31 日，而不是 7 月 1 日。

我怎样才能获得正确的增加数据？？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-06-01T15:05:48.400

不，不会的。试试这个片段，效果很好。

```
var myDate = new Date();
myDate.setDate(30); // it's June as of the writing of this question
                    // so we're setting it to June 30th.
myDate.setDate(myDate.getDate() + 1);
alert(myDate) 
```

**更新：**我在 IE、Firefox、Chrome 和 Safari 中尝试过，效果很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-01T15:12:02.473

如何设置 myDate 的时间：

myDate.setTime(myDate.getTime() + 24 * 60 * 60 * 1000)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-01T15:06:20.113

日期操作可能很困难 - 使用像[Datejs](http://www.datejs.com/)这样的库来为您完成艰苦的工作。

# php - 自定义 PHP FastCGI 接口？（快点？）

> ID：935202
> 
> 赞同：2
> 
> 时间：2009-06-01T15:01:45.333
> 
> 标签：php, apache, fastcgi, lighttpd

如何在 PHP 中构建自己的 FastCGI 接口？

我想做一些类似于[他们在 Perl 中所做的事情](http://www.perl.com/doc/manual/html/lib/CGI/Fast.html)，但在 PHP 中。甚至可能吗？会更快吗？

（也就是说，我希望能够将 Web 应用程序框架加载到内存*中*，然后让 FastCGI 调用我为每个请求提供的方法。所以不是更通用的 PHP 解释器预加载发生在“默认”PHP FastCGI 设置。）

干杯！

（*编辑*：Mongrel 和 RoR 不也在这样做吗？）

好的，我现在制作了一个怪异的图表:)

![替代文字](https://i635.photobucket.com/albums/uu71/drheyw00d/phpfcgi_so.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-01T15:04:21.150

我可能弄错了（为时已晚），但您不只是尝试进行某种形式的缓存吗？不管怎样，FastCGI 接口似乎定义得相当好。所以，应该可以很容易地做任何你想做的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-07-10T04:06:13.970

您*不能**在*PHP*中为*PHP执行此操作，您可以在 C 中为*cgi-sapi*执行此操作，但您可能想改用[APC](http://php.net/apc)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T05:31:49.190

如果你真的决定用 PHP，理论上你可以在[c 中创建一个 php 模块](https://stackoverflow.com/questions/5631231/how-to-write-php-module-in-c)，并在 c 中为[fastCGI 搭建](http://www.fastcgi.com/drupal/)桥梁。

之后我猜测，您将运行一个 PHP 脚本作为独立程序访问 fastCGI，运行一个循环并接受请求。其中您使用 PHP 作为“持久虚拟机”（找不到更好的术语），通过 fastCGI 进行通信。

我确实同意重新加载您的几个依赖库/等，这是一个非常容易被忽视的性能消耗。但是，它可能是有意设计的，以简化 PHP 开发周期。想想没有经验的用户在持久环境中会造成的全局变量混乱。事实上，大多数 fastCGI 设置都会根据负载初始化多个副本/线程。它是一小罐蠕虫。为每个请求开始一个空白的新列表可以简化它。

但是，老实说...如果您担心性能，您不妨考虑 fastCGI C++ / node.js，作为替代品...。为 JavaScript/PHP/C++ 开发后，您的想法绝对是可能的...但是它真的归结为成本效益......值得付出努力吗？等。

PS：你也可以考虑通过 hip-hop 编译你的 PHP 网站。

# web-services - 如何从 C# Web 服务执行 Access 2007 文件中的 SQL 查询？

> ID：935203
> 
> 赞同：1
> 
> 时间：2009-06-01T15:01:58.580
> 
> 标签：web-services, ms-access-2007

我们希望在 IIS 中有一个托管的 C# Web 服务，我可以将它传递给它的方法 SOL Query，然后它对存在于同一服务器中的 Access 2007 DB 文件执行查询，该文件包含 Web 服务并返回数据。

我们已经使用了以下代码

```
<%@ WebService Language="C#" 
  CodeBehind="~/App_Code/Service.cs" 
  Class="Service" %>
using System;
using System.Web;
using System.Web.Services;
using System.Web.Services.Protocols;

using System.Data;
using System.Data.OleDb;
using System.IO;

public class Service : System.Web.Services.WebService
{
    [WebMethod]
    public DataSet ExecuteQuery(string sqlQuery) 
    {
        OleDbConnection conn = new OleDbConnection(
             @"Provider=Microsoft.ACE.OLEDB.12.0;Data Source=" + 
             @"C:\Folder\Database2.accdb;Persist Security Info=False;");

        OleDbDataAdapter da = new OleDbDataAdapter(sqlQuery, conn);
        DataSet ds = new DataSet();
        da.Fill(ds);            
        return ds;
    }

} 
```

但是当我们调用这个方法时，页面只是显示为加载（正在进行），但没有任何数据返回或异常。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-06-01T17:11:22.783

我可以建议对您的设计和代码结构进行一些改进吗？

**1.**重新评估将其设为 Web 服务的原因。你能把它编译成一个类库程序集（.dll）并从其他项目中引用它吗？进行 Web 服务调用的开销或时间成本远大于对另一个库的引用。是的，您必须处理 Access 的配置问题。

**2.**重新考虑您希望每次调用都返回 DataSet 的原因。这是一篇关于 ADO.NET 数据集缺点的优秀文章：[www.4guysfromrolla.com/articles/050405-1.aspx](http://www.4guysfromrolla.com/articles/050405-1.aspx)

**3.**在没有先评估或参数化它的情况下，不要执行给你的任何字符串。我理解创建一个层来为你处理所有数据库查询的愿望，你应该为这个想法喝彩。但是，所呈现的代码会造成更危险的情况，因为它不会检查任何格式错误的语句等。因此建议不要执行传递给您的任何字符串。也许这个网络服务只在你的局域网内，也许你相信所有的调用都是诚实的和非破坏性的。我们可能认为所有的内部活动都是好的，但一旦员工变坏，你就为内部破坏打开了可能性。

当有人像这样调用您的网络服务时会发生什么：

```
ExecuteQuery("DELETE FROM Customers") 
```

或者

```
ExecuteQuery("UPDATE Employee SET Salary = 250000 WHERE ID= 9") 
```

或者

```
ExecuteQuery("SELECT Salary WHERE EmployeePosition = 'CEO'") 
```

**4.**为您希望图层公开的每个功能创建一个新的 Web 方法。例如，代替客户端调用

```
ExecuteQuery("SELECT ID, CustomerName FROM Customers ORDER BY CustomerName") 
```

做这个：

```
public List<Customer> ListAllCustomers() 
```

考虑创建这样的方法：

```
public void UpdateEmployee(Employee emp) 
```

或者

```
public void UpdateEmployeeSalary(string id, double salary) 
```

**5.**将您的 Access 连接字符串放入`app.config`文件中。参考`System.Configuration`和使用`ConfigurationManager`。每次调用查询时加载它。这有点影响性能，但在更改 .mdb 文件的目录路径或名称时，维护工作量实际上为零。

```
 private string GetConnectionString()
        {
           //do some more checking on whether the value exists as well, instead of just returning it!
            return ConfigurationManager.AppSettings["MyAccessDB"].ToString();
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-01T17:15:23.170

还：

```
using (OleDbConnection conn = new OleDbConnection(
         @"Provider=Microsoft.ACE.OLEDB.12.0;Data Source=" + 
         @"C:\Folder\Database2.accdb;Persist Security Info=False;"))
{
    using (OleDbDataAdapter da = new OleDbDataAdapter(sqlQuery, conn))
    {
        DataSet ds = new DataSet();
        da.Fill(ds);            
        return ds;
    }
} 
```

除非您喜欢资源泄漏，否则请执行此操作。

# linux - Bash 自定义

> ID：935206
> 
> 赞同：-2
> 
> 时间：2009-06-01T15:02:41.400
> 
> 标签：linux, bash, customization

当我使用 Linux 时，我还没有定制我使用相当多的 bash shell。所以，我问：你最喜欢的 bash 定制是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-01T15:09:23.790

自定义提示是我的第一个提示。我从不喜欢'$' :)

不过，我自己的提示对我来说非常个人化。一开始它是多线的，很多人不喜欢它，但它很适合我。它还启用了版本控制系统 - 如果您在源代码树中，它将报告 svn 修订/git 分支。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-01T15:05:20.663

我建议看一下`zsh`。

它更强大，如果您询问外壳定制，您已经准备好。

一些杀手级功能是路径扩展：

```
cd /u/l/X<TAB> -> cd /usr/local/X11 
```

和通配符

```
wc -l **/*.xml 
```

（bash3 也这样做，所以有一些改进）

而且它足够聪明，所以

```
for i in .*; do cp $i dotfiles; done 
```

不会让你陷入麻烦或失败。

它有很多选择和一个庞大的完成库。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-01T15:16:45.523

*   一堆别名，有些是为了拼写错误，有些是为了给我默认的行为，有些是为了减少击键次数。
    *   emcas 到 emacs
    *   ls 到 ls -lt
    *   pu 到 pushd
    *   po到popd

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-01T15:21:08.837

对我来说重要的一个是为提示添加一些颜色。这使它在我有两组输出时充当视觉分隔符。我可以很容易地看到一个结束和下一个开始。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-06-04T16:13:43.063

其他提示的设置（续行、选择、执行跟踪）：

```
#---------------------------------------------------
#  set Bash prompts
#---------------------------------------------------
export PS2='continue> '
export PS3='choose: '
export PS4='[$LINENO $SECONDS] ' 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-06-01T15:38:47.360

*   [为命令提示着色](http://lifehacker.com/202042/ask-lifehacker--how-do-i-customize-my-command-line-prompt)
*   启用一些 shell 选项：

    ```
    # Make bash append rather than overwrite the history on disk
    shopt -s histappend
    # Enable cool globbing wildcards
    shopt -s extglob 
    ```

*   添加一些别名：

    ```
    alias ls="ls --color=auto"
    alias hd="hexdump -C" 
    ```

*   着色`grep`输出：

    ```
    export GREP_OPTIONS=--color=auto
    export GREP_COLORS='ms=01;36' 
    ```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-06-06T17:48:12.483

我赞成 zsh 的建议。虽然我很确定其中大多数也可以在 bash 中使用。

注意小写=命令大写=后缀命令约定。（其中一些来自[zsh-lovers 手册页](http://grml.org/zsh/zsh-lovers.html)）

```
alias -g bigfiles="find . -size +50000k -exec ls -lh {} \; | awk '{ print \$8 \": \" \$5 }'"
alias -g f="find . -name"
alias -g G='| egrep'
alias -g g="grep"
alias -g H='| head'
alias -g LL="2>&1 | less"
alias -g L="| less"
alias -g NUL="> /dev/null 2>&1" 
```

作为 ubuntu 用户：

```
alias 'Ag'='sudo apt-get install'
alias 'As'='apt-cache search'
alias 'Ai'='apt-cache show'
alias 'Ar'='sudo apt-get remove'
alias 'Au'='sudo apt-get update;sudo apt-get dist-upgrade' 
```

作为一个红宝石用户

```
alias Gs='gem search --remote'
alias Gg='sudo gem install'
alias Gi='gem specification' 
```

此外，您可能会花一点时间涉水：[http](http://dotfiles.org/.bashrc) ://dotfiles.org/.bashrc 。那里有很多宝石。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-06-06T18:18:48.080

1.  我通常确保设置[Bash Completion](http://www.caliban.org/bash/)，因为我已经习惯了它，以至于当我无法使用 ssh 完成主机名时，它让我很恼火。

2.  我设置了提示命令，以便所有终端窗口的标题都告诉我我所在的主机和目录：

    ```
    export PROMPT_COMMAND='echo -ne "\033]0;${HOSTNAME}:${PWD}\007"' 
    ```

    这样我就不会得到一堆标题为“xterm”或“终端”或类似名称的窗口。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2011-04-23T14:07:16.103

我有很多自定义的东西：首先是：

```
function add
{
cd;
echo "alias $*" >>~/bash/aliases.sh;
source ~/bash/aliases.sh;
cd -;
} 
```

它将别名添加到我的 ~/bash/aliases 文件中，该文件由我的 .bashrc 文件提供。我真正喜欢的其中之一是：

别名程序='回声 $PATH | sed "s/:/ /g" | xargs ls'

它可以与 grep 一起使用来获取各种东西。

我也有这个真的很有帮助：

```
function up
{
    if [ "$1" = "" ];
    then
            cd ..;
        return;
    fi

    NUM_TIMES=$( echo $(($1 - 1)) );

    for ((x=0;$x<=$NUM_TIMES; x++))
    do
        cd ..;
    done;
} 
```

我在我的 ~/bash/functions 文件中，这只是我添加到 bash 中的一些东西

# ms-access - 如何在 MS Access 中填充字段描述

> ID：935207
> 
> 赞同：3
> 
> 时间：2009-06-01T15:02:53.133
> 
> 标签：ms-access, import, schema, field

当通过 ODBC（尤其是 AS/400）链接到外部数据源时，我经常在另一端遇到神秘的字段名称，其中没有可用的数据字典。在极少数情况下，我能够从另一个数据库中获取字段描述，我希望能够一次将它们全部导入，而不是一次将每个描述复制/粘贴到表设计表单中。

我无法在系统表中找到它，所以我不知道这个元数据存储在哪里。关于它在哪里以及是否可以批量更新的任何想法？

更新：我设法使用 OpenSchema 方法读取了模式（参见下面的代码），但这会返回一个只读数据集，使我无法更新描述。

```
Function UpdateFieldDescriptions()
Dim cn As New ADODB.Connection
Dim rs As ADODB.Recordset
Dim rs2 As Recordset
Dim strSQL As String
Dim strDesc As String

Set cn = CurrentProject.Connection
Set rs = cn.OpenSchema(adSchemaColumns)

While Not rs.EOF
    If Left(rs!table_name, 4) <> "MSys" Then
        Debug.Print rs!table_name, rs!column_name, rs!Description
        strSQL = "SELECT Description " & _
            "FROM tblColumnDescriptions a " & _
            "WHERE a.Name = """ & rs!table_name & """ AND " & _
            "a.Column = """ & rs!column_name & """;"
        Set rs2 = CurrentDb.OpenRecordset(strSQL)
        While Not rs2.EOF
            strDesc = rs2.Fields(0)
            rs!Description = strDesc ' <---This generates an error
        Wend
    End If
    rs.MoveNext
Wend

rs.Update
rs.Close
Set rs = Nothing
Set rs2 = Nothing
Set cn = Nothing

End Function 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-08-26T19:08:26.027

使用 DAO 代替 ADO：

```
Sub SetFieldDesc(TblName As String, FldName As String, Description As String)
Dim db As DAO.Database, td As DAO.TableDef, fld As DAO.Field

    Set db = CurrentDb()
    Set td = db.TableDefs(TblName)
    Set fld = td.Fields(FldName)

    On Error Resume Next
    fld.Properties("Description") = Description
    If Err.Number = 3270 Then 'Property not found.'
        fld.Properties.Append fld.CreateProperty("Description", dbText, Description)
    End If
End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-01T16:06:03.660

一些可能有帮助的注释。下面显示来自 adSchemaColumns 的字段描述。

```
 Function ListFieldDescriptions()
   ''List field descriptions
   Dim cn As New ADODB.Connection, cn2 As New ADODB.Connection
   Dim rs As ADODB.Recordset, rs2 As ADODB.Recordset

       Set cn = CurrentProject.Connection

       Set rs = cn.OpenSchema(adSchemaTables, _
           Array(Empty, Empty, Empty, "tablenamehere"))

       While Not rs.EOF
           Debug.Print rs!table_name; "   desc=  "; rs!Description
           Set rs2 = cn.OpenSchema(adSchemaColumns, _
               Array(Empty, Empty, "" & rs!table_name & ""))
           While Not rs2.EOF
               Debug.Print "     " & rs2!Column_Name
               Debug.Print "     " & rs2!Data_Type
               Debug.Print "     " & rs2!Description
               Debug.Print "     " & rs2!Is_Nullable
               rs2.MoveNext
           Wend
       rs.MoveNext
       Wend
       rs.Close
       Set cn = Nothing

   End Function 
```

来自：[http ://wiki.lessthandot.com/index.php/ADO_Schemas](http://wiki.lessthandot.com/index.php/ADO_Schemas)

# fluent-nhibernate - FluentNHibernate - 自动映射忽略属性

> ID：935208
> 
> 赞同：2
> 
> 时间：2009-06-01T15:03:07.580
> 
> 标签：fluent-nhibernate

我有一个基类，其中包含一个名为 IsDirty 的属性。这用于域模型，而不是数据库表中的列。

使用自动映射时，流利的 nhibernate 会尝试将此列添加到表中。解决此问题的一种方法是放入`.ForTypesThatDeriveFrom<Address>(p => p.IgnoreProperty(x => x.IsDirty))`自动映射设置。

问题是，我所有的实体都会这样做，有没有办法说明这一点而不必为每个实体添加这条线？如果我输入`.ForTypesThatDeriveFrom<Entity>(p => p.IgnoreProperty(x => x.IsDirty))`，则尝试将实体转换为地址时会出错。

我也将实体设置为基本类型。

提前致谢， JT

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-13T22:54:36.340

您创建一个派生自该方法的类`DefaultAutomappingConfiguration`并覆盖该`ShouldMap(Member member)`方法。

像这样：

```
public class AutoMapConfiguration : DefaultAutomappingConfiguration
{
    private static readonly IList<string> IgnoredMembers = new List<string> {"IsNew", "IsDeleted"};

    public override bool ShouldMap(Member member)
    {
        return base.ShouldMap(member) && !IgnoredMembers.Contains(member.Name);
    }
} 
```

然后您的流畅配置将如下所示：

```
Fluently.Configure()
    // Database settings
    .Mappings(m => {
        m.AutoMappings.Add(yourMappingAssembly, new AutoMapConfiguration())
    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-30T19:56:56.860

我遇到了同样的问题，除了 NHibernate 抱怨缺少课程。

我相信您可以使用以下约定从类中删除映射属性的部分：

```
public class IgnorePropertiesClassMapConvention : IClassConvention
{
    public bool Accept(IClassMap classMaps)
    {
        return true;
    }
    public void Apply(IClassMap classMap)
    {
        var partsToIgnore = classMap.Parts.OfType<IProperty>()
            .Where(IgnoreProperty).ToList();

        foreach (var part in partsToIgnore)
            ((IList<IMappingPart>)classMap.Parts).Remove(part);

    }

    private bool IgnoreProperty(IProperty property)
    {
        // Your logic would be here
    }
} 
```

我使用的代码有点不同，因为我需要删除的是一个多对一映射：

```
public class IgnorePartsBasedOnReturnTypeClassMapConvention : IClassConvention
{
    public bool Accept(IClassMap classMaps)
    {
        return true;
    }
    public void Apply(IClassMap classMap)
    {
        var partsToIgnore = classMap.Parts.OfType<IManyToOnePart>()
            .Where(IgnorePart).ToList();

        foreach (var part in partsToIgnore)
            ((IList<IMappingPart>)classMap.Parts).Remove(part);

    }
    private bool IgnorePart(IManyToOnePart part)
    {
        return IgnoreProperty(part.Property);
    }

    private bool IgnoreProperty(PropertyInfo propertyInfo)
    {
        var ignoredNamespaces = new []{"namespacesToIgnore"};
        return ignoredNamespaces.Any(namespc => propertyInfo.GetGetMethod().ReturnType.Namespace.StartsWith(namespc));
    }
} 
```

我不确定这是否是最好的方法。我的感觉是，可发现性部分应该被覆盖，甚至可以不为不需要的属性构建部分，但现在这似乎可行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-05-30T04:27:27.637

`OverrideAll`如果您不定义配置，似乎很合适。

```
Fluently
    .Configure()
    .Mappings(x => x.AutoMappings.Add(AutoMap.AssemblyOf<MyEntity>(mapConfig)
            .OverrideAll(ign => ign.IgnoreProperty("MyPropertyToBeIgnored"))
                )) 
```

资料来源：[https ://bernardorezende.wordpress.com/2011/12/12/ignore-property-mapping-with-fluent-nhibernates-automapping-model/](https://bernardorezende.wordpress.com/2011/12/12/ignore-property-mapping-with-fluent-nhibernates-automapping-model/)

# c# - Datagridview 中的 UpdateCellValue()

> ID：935215
> 
> 赞同：2
> 
> 时间：2009-06-01T15:04:59.087
> 
> 标签：c#, .net, datagridview

我正在使用以下代码来更新 DataGridView 的单元格值。这在 DataGridView 的“CellDoubleClick”事件处理程序中调用。

问题是只有在我单击另一个单元格后才会更新单元格。有没有更好的方法来做到这一点？

```
string value = "";
if (_dataGrid1.CurrentRow.Cells[e.ColumnIndex].Value != null)
    value = _dataGrid1.CurrentRow.Cells[e.ColumnIndex].Value.ToString();

FormEdit form = new FormEdit(value); // takes a string value
if (form.ShowDialog() == DialogResult.OK)
{
    _dataGrid1.CurrentRow.Cells[e.ColumnIndex].Value = form.SourceText;
    _dataGrid1.UpdateCellValue(e.ColumnIndex, e.RowIndex);
} 
```

*更改了一些变量名称以保护其身份*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-07-03T22:28:32.363

调用 _dataGrid1.CommitEdit 能解决问题吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-07-03T22:39:37.707

尝试在控件上调用 Refresh。数据可能会更新，但在单击其他地方之前可能不会重绘视觉表示。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-10-29T11:58:34.450

我回到今天的项目，发现我的答案很简单。Suspend/ResumeLayout 是解决方案：

```
if (form.ShowDialog() == DialogResult.OK)
{
    _dataGridView.SuspendLayout();

    _dataGridView.CurrentRow.Cells[e.ColumnIndex].Value = form.TextBoxText;
    _dataGridView.UpdateCellValue(e.ColumnIndex, e.RowIndex);

    _dataGridView.ResumeLayout(true);
} 
```

这是为了双击 gridview 单元格，并使用文本框以模态形式编辑内容。

# java - BIRT / WebSphere / Java 2 安全性

> ID：935218
> 
> 赞同：1
> 
> 时间：2009-06-01T15:05:43.207
> 
> 标签：java, security, websphere

有没有人设法让 BIRT 在打开 Java 2 安全性的 WebSphere 下运行？我在 was.policy 文件中放了什么似乎并不重要，当我尝试生成报告时，我会遇到**大量的安全异常。**

在关闭 Java 2 安全性的情况下运行可以完美运行，但这不是生产环境的选项。

例如：当我的应用程序运行时，我在堆栈跟踪中看到以下内容

```
Permission:

  * : Access denied (java.util.PropertyPermission * read,write)

 org.eclipse.osgi.framework.internal.core.FrameworkProperties  in  {file:/hosting/configs/WebSphereD03/AppServer/installedApps/CD03-crxaiuci5002/DOCGEN.ear/docgen.war/WEB-INF/platform/plugins/org.eclipse.osgi_3.3.1.R33x_v20070828.jar} 
```

堆栈跟踪：

java.security.AccessControlException：访问被拒绝（java.util.PropertyPermission * 读、写）

Birt 被打包到我的 EAR 文件中，所以为了摆脱这个特殊问题，我的 was.policy 文件中有以下条目

```
grant codeBase "file:${application}" {
permission java.util.PropertyPermission "*", "read,write"; 
```

};

这似乎没有任何区别，所以我尝试了

```
grant codeBase "file:/hosting/configs/WebSphereD03/AppServer/installedApps/CD03-crxaiuci5002/DOCGEN.ear/docgen.war/WEB-INF/platform/plugins/org.eclipse.osgi_3.3.1.R33x_v20070828.jar" {
permission java.util.PropertyPermission "*", "read,write"; 
```

};

还是没有运气...

任何人有任何指针？

谢谢

戴夫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-02T08:12:34.790

区分 WebSphere (Java EE) 安全性和 Java 2 安全性

应该为生产应用程序（以及 WebSphere 的管理员）启用 Java EE 安全性。

Java 2 Security 实际上买得很少，而且在 WebSphere 领域并没有得到广泛使用。如果应用程序内隔离非常重要，它可能很有用，但在这种情况下，您还没有通过启用 Java 2 安全性来解决问题。

启用 Java 2 安全性非常痛苦，因为您表示获得一组有用的权限是乏味的。一个有用的技巧：设置系统属性：

```
 com.ibm.websphere.java2secman.norethrow 
```

这将导致在应用程序失败的情况下报告所有权限错误。因此，您知道要授予的全部权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2010-12-02T23:14:03.507

您是否在 was.policy 中有以下行以使 BIRT 在启用了 java 2 安全性的 WAS 实例中运行，

权限 java.util.PropertyPermission "*", "read,write"; 权限 java.security.AllPermission;

谢谢您的帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2010-10-01T10:24:29.727

如果有人再次遇到此问题并且由于任何原因无法禁用 Java 2 安全性，那么我遇到了完全相同的问题并发布在[BIRT 交换论坛上](http://www.birt-exchange.org/org/forum/index.php/topic/20613-birt-26-and-ibm-websphere-can-not-startup-the-osgi-framework/)。Jason Weathersby 找到了解决办法：

> 我怀疑这个问题与将 OSGi 写入 web-inf/platform/configuration 目录有关。你能为此记录一个错误吗？您可以尝试修改 web-inf/platform/configuration 中的 config.ini 添加如下条目：osgi.configuration.area=c:/birtconfigarea 并确保该目录可写。杰森

**编辑：**

事实证明，在测试此修复时，Java2 安全性没有正确地重新启用，因此上述不是修复。但是我相信我找到了一个可怕的解决方法：

将以下内容添加到 config.ini 文件中：

```
eclipse.security=null 
```

在查看了 OSGILauncher 类 (org.eclipse.birt.core) 之后，有一个方法 setupSecurityPolicy()（第 700 行 v2.6.0）可以查找属性 eclipse.security。如果属性为空，它会继续设置一些 OSGIPolicy，这似乎是问题的原因。

**注意：**这会破坏 Tomcat 中的部署，即设置了属性 eclipse.security，BIRT 报告平台无法启动。

# c# - 如何在 C# 中访问系统时钟

> ID：935227
> 
> 赞同：2
> 
> 时间：2009-06-01T15:07:34.667
> 
> 标签：c#

如何在 C# 中访问系统时钟？我想使用系统时钟来延迟时间，而不是使用 thread.sleep();。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2009-06-01T15:09:32.603

```
DateTime time = DateTime.Now; 
```

将为您提供当前时间。

因此，如果您想`sleep`直到某个特定时间，您可以使用`TimeSpan`来计算在那之前的毫秒数。您仍然需要使用`thread.sleep`or better still [`System.Threading.Timer`](http://msdn.microsoft.com/en-us/library/system.threading.timer.aspx)(or [`System.Timers.Timer`](http://msdn.microsoft.com/en-us/library/system.timers.timer.aspx)) 来暂停该过程。

但是，如果您想在特定时间启动一个进程，您最好创建一个单独的应用程序并创建一个计划任务来控制它。这是通过控制面板访问的。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2009-06-01T15:28:46.280

出于延迟目的而不是睡眠的最佳选择是使用[Timer](http://msdn.microsoft.com/en-us/library/system.timers.timer.aspx)。您将其设置为您希望它“滴答”的频率，并在发生这种情况时收到事件。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-06-01T15:09:54.757

您在寻找[DateTime 结构](http://msdn.microsoft.com/en-us/library/system.datetime(vs.71).aspx)和[DateTime.Now 属性](http://msdn.microsoft.com/en-us/library/system.datetime.now(VS.71).aspx)吗？

```
DateTime.Now; 
```

# c++ - 如何从 C++ 中的文件夹中获取文件名

> ID：935231
> 
> 赞同：2
> 
> 时间：2009-06-01T15:08:13.730
> 
> 标签：c++, file

假设我想写 ls 或 dir。如何获取给定目录中的文件列表？与 .NET 的 Directory.GetFiles 等价的东西，以及其他信息。

不确定字符串语法，但是：

```
string[] filePaths = Directory.GetFiles(@"c:\MyDir\"); 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2009-06-01T15:11:34.130

查看[boost::filesystem](http://www.boost.org/doc/libs/1_39_0/libs/filesystem/doc/index.htm)，一个可移植的优秀库。

**编辑**：图书馆的一个例子：

```
int main(int argc, char* argv[])
{
  std::string p(argc <= 1 ? "." : argv[1]);

  if (is_directory(p))
  {
     for (directory_iterator itr(p); itr!=directory_iterator(); ++itr)
     {
       cout << itr->path().filename() << ' '; // display filename only
       if (is_regular_file(itr->status())) cout << " [" << file_size(itr->path()) << ']';
       cout << '\n';
      }
  }
  else cout << (exists(p) : "Found: " : "Not found: ") << p << '\n';

  return 0;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-06-01T15:09:58.110

查看 FindFirstFile 和 FindNextFile API

[http://msdn.microsoft.com/en-us/library/aa364418.aspx](http://msdn.microsoft.com/en-us/library/aa364418.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-01T15:15:31.220

在 Windows 中： [FindFirstFile](http://msdn.microsoft.com/en-us/library/aa364418(VS.85).aspx)、[FindNextFile](http://msdn.microsoft.com/en-us/library/aa364428(VS.85).aspx)和[FindClose](http://msdn.microsoft.com/en-us/library/aa364413(VS.85).aspx)可用于列出指定目录中的文件。

伪代码：

```
 Find the first file in the directory.
 do
   { 
   //

   }while(NextFile);

Close 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2010-06-01T07:12:34.593

[Poco::DirectoryIterator](http://pocoproject.org/docs/Poco.DirectoryIterator.html)是另一种选择

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2009-06-01T15:11:54.643

这完全取决于平台。
如果在 Windows 上，您应该按照建议使用 WINAPI。

# c# - 将 Excel 数据透视表嵌入 C# winforms

> ID：935235
> 
> 赞同：1
> 
> 时间：2009-06-01T15:09:15.523
> 
> 标签：c#, winforms, excel, pivot-table

有谁知道如何在 C# 开发的 win 表单应用程序中嵌入 Excel 数据透视表控件？

表单的原始数据将来自 SQL Server 2000 数据库并加载到 DataTable 中。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-01T20:04:47.513

我不认为您可以将实际的 Excel 数据透视表控件嵌入到您的应用程序中，但您可以引用 Excel 库来操作您的数据，然后将其显示在 DataGridView 或其他第三方控件中。

这是一篇关于链接到 Excel 的好文章：http: [//support.microsoft.com/kb/302096](http://support.microsoft.com/kb/302096)

这是我最喜欢的第三方 Excel 控件： [http ://www.spreadsheetgear.com/](http://www.spreadsheetgear.com/)

希望这可以帮助。

# html - sIFR 删除页面上的所有内容？

> ID：935243
> 
> 赞同：1
> 
> 时间：2009-06-01T15:10:07.830
> 
> 标签：html, sifr

我有一个非常奇怪的错误。当我使用 sIFR 替换单个 h1 元素时，页面上的其他所有内容都会消失。这真的很奇怪。我没有收到任何 javascript 错误。

如果我在 sifr-config 中编辑掉 sIFR.activate 函数，一切都会正常显示...

这是我的代码... HTML：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<title>sIFR test</title>

<link rel="stylesheet" href="css/sifr.css" type="text/css">

<link rel="stylesheet" href="css/index.css" type="text/css">

<script src="js/sifr.js" type="text/javascript"></script>

<script src="js/sifr-config.js" type="text/javascript"></script>

</head>
<body>

<h1>Dette er en overskrift</h1>

<ul class="menu">
<li class="parent active"><a href="#"><span>Main Menu Item 1</span></a>
  <ul>
    <li><a href="#"><span>Sub Menu Item 1</span></a></li>
    <li><a href="#"><span>Sub Menu Item 2</span></a></li>
    <li><a href="#"><span>Sub Menu Item 3</span></a></li>
    <li><a href="#"><span>Sub Menu Item 4</span></a></li>
    <li><a href="#"><span>Sub Menu Item 5</span></a></li>
  </ul>
</li>
<li class="parent"><a href="#"><span>Main Menu Item 2</span></a>
  <ul>
    <li><a href="#"><span>Sub Menu Item 1</span></a></li>
    <li><a href="#"><span>Sub Menu Item 2</span></a></li>
    <li><a href="#"><span>Sub Menu Item 3</span></a></li>
    <li><a href="#"><span>Sub Menu Item 4</span></a></li>
    <li><a href="#"><span>Sub Menu Item 5</span></a></li>
  </ul>
</li>
<li><a href="#"><span>Main Menu Item 3</span></a></li>
<li class="parent"><a href="#"><span>Main Menu Item 4</span></a>
  <ul>
    <li><a href="#"><span>Sub Menu Item 1</span></a></li>
    <li><a href="#"><span>Sub Menu Item 2</span></a></li>
  </ul>
</li>
<li><a href="#"><span>Main Menu Item 5</span></a></li>
</ul>
<br class="clearfloat" />
</body>
</html> 
```

sifr-config.js：

```
var helvetica57 = { src: 'sifr/helveticaNeue57Condensed.swf' };

var helvetica67 = { src: 'sifr/helveticaNeue67Medium.swf' };

sIFR.activate(helvetica57, helvetica67);

sIFR.replace(helvetica67, {

  selector: 'h1',
  css: '.sIFR-root {color: #000000; }'

}); 
```

您可以在此处查看示例：www.runemadsen.com/innovation/sifr

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-01T22:00:56.610

您已添加以下 CSS：

```
.sIFR-active {
  font-family: Verdana;
  visibility: hidden;
} 
```

这隐藏了整个`<html>`元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2010-04-08T16:45:13.210

我有同样的问题，基本上问题是从另一个函数或事件中调用激活。搬出来了，没问题。

# nunit - NUnit：“该进程无法访问该文件......因为它正在被另一个进程使用。”

> ID：935244
> 
> 赞同：26
> 
> 时间：2009-06-01T15:10:26.893
> 
> 标签：nunit

我正在使用 NUnit GUI 版本，当我在其中加载一个测试项目试图测试时，它开始对我感到不安。如果我在 Visual Studio 中进行更改，然后尝试重建解决方案，则会引发错误“无法将文件 obj\Debug\foo.dll 复制到 bin\Debug\foo.dll。进程无法访问文件 bin\ Debug\foo.dll 因为它正被另一个进程使用。”

当然，这是我加载到 GUI 中的 DLL。以前没问题，只是在构建后刷新项目引用，但现在它似乎阻止了它。我怎样才能回到那种行为？

顺便说一句，我尝试过启用/禁用卷影复制设置，结果都一样。

VS2008 SP1 和 NUnit 2.4.8，如果这很重要的话。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2009-06-01T15:59:35.110

想通了：“卷影复制”服务由于某种原因被关闭。重新开机，一切恢复正常。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2011-08-29T11:51:11.887

我只是想补充一点，将 Nunit 项目文件移动到解决方案位置解决了我的问题。我不必更改 nunit 中的任何卷影复制设置或启用卷影复制服务。

请参阅堆栈溢出 - [nunit 锁定 dll](https://stackoverflow.com/questions/5182841/nunit-locking-dll)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-07-09T03:32:40.890

我遇到了与问题中提到的相同的问题。我通过以下方法在我的机器上解决了它：

1.  在 Visual Studio > 解决方案资源管理器中 > 选择导致问题的 dll > 右键单击​​ > 选择属性。在此操作之后，dll 的文件属性现在应该是可见的。
2.  在 dll 的文件属性视图中；将**Copy To Output Directory**设置为*Copy if newer*。

如果您始终将**复制到输出目录**作为*复制*，您将收到问题中提到的编译错误。如果您进行上述更改，它应该会消失，您的 dll 仍将被复制。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2011-07-17T23:01:47.593

我有同样的问题 ：

```
Unable to copy file obj\Debug\foo.dll to bin\Debug\foo.dll. 
The process cannot access the file bin\Debug\foo.dll because it is being used by another process. 
```

就我而言，原因似乎是我在两个程序集中使用了相同的命名空间：

1.  MyNUnitTestLibrary 将测试类“包装”在“命名空间银行 {...}”中
2.  “NUnit 快速入门”也包含“命名空间银行 {...}”中的所有内容

更改命名空间名称之一解决了该问题。我对两个程序集进行了一些更改并重新编译而没有错误

请注意，这两个程序集都包含测试，就像我玩 NUnit 一样。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-06-01T15:34:35.050

我也遇到了这个问题，但我今天正在努力重现它。论坛似乎暗示这是由于您的代码没有返回它正在使用的资源。这敲响了警钟，因为当我遇到这个问题时，我会一直在测试 Xml 阅读器。

这是我[在 asp.net 上找到的链接](http://forums.asp.net/p/1078551/1590137.aspx#1590137)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2011-06-05T20:04:55.403

我遇到了这个问题，经过大量阅读和实验后，我意识到罪魁祸首实际上并不是 NUnit 或我的代码中的任何东西。这是我使用的另一个库，FakeItEasy，一个模拟对象框架，它未能正确释放它的所有资源。

如果您在 NUnit 中使用 FakeItEasy 并遇到此问题，请考虑切换到另一个模拟对象框架。如果你没有使用 FakeItEasy，或者如果从你的项目中删除它并不能解决这个问题，请从测试代码中清点你正在使用的所有 3rd 方库，并考虑它们中的任何一个是否可能正在做类似的事情。

或者，纠缠 NUnit 的创建者明确释放它加载的任何测试程序集所持有的任何资源，或者如果你比我更主动，利用它是一个开源项目的事实并提供一个解决方案这。

# mysql - 在 MySQL DB 中为 Rails 应用程序正确存储 TimeZone 日期

> ID：935248
> 
> 赞同：5
> 
> 时间：2009-06-01T15:11:46.687
> 
> 标签：mysql, ruby-on-rails, date, time, timezone

我正在考虑将我们的 Rails 2.3 应用程序转换为正确处理时区（目前一切都在 UTC 中，这是不正确的，但*很*方便！）。

我在 environment.rb 中有这些设置：

```
config.active_record.default_timezone = :utc
config.time_zone = "UTC" 
```

展望未来，对于我们应用程序中的每个请求，我计划进行以下设置来设置时区：

```
Time.zone = user.time_zone 
```

`user.time_zone`他们选择的偏好在哪里（例如`US Pacific Time`）。

这在应用程序中运行良好，但我的问题与 Rails 然后存储在 MySQL 数据库中的内容有关。如果用户选择 2009 年 6 月 1 日的日期，则该日期会`DATETIME`以 UTC 格式存储在数据库中的字段中，但**带有**时区偏移量。例如，如果用户选择了一个`GMT+6`时区，则选择的日期 2009 年 6 月 1 日最终在数据库中为`2009-06-01 06:00:00 UTC`.

我本来希望这会存储`2009-06-01 00:00:00 UTC`在数据库中。我的想法是正确的还是 Rails 在这里做了一些意想不到的事情？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-06-02T21:59:19.750

这篇博客文章讨论了 Rails 2.1+ 中的本地时区处理：

[http://mad.ly/2008/04/09/rails-21-time-zone-support-an-overview/](http://mad.ly/2008/04/09/rails-21-time-zone-support-an-overview/)

要点是 Rails 将以 UTC 格式将所有记录存储在数据库中，然后转换为用户时区进行显示。这是有道理的：以中性形式存储所有数据，然后在最后一刻将其转换为所需的形式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-02T21:53:23.833

根据您对我的评论的回复，我想说只是根据本地服务器时间存储日期，然后使用 JavaScript 的 Date::toLocaleString() 将其转换为本地时区。几年前我写了一篇关于它的文章，你可以在[这里](http://blog.too-many-secrets.com/2007/08/29/easier-timezone-support-in-rails/)找到。

这篇文章的 JS 是用 MooTools 编写的，但我已经用 jQuery 重写了它，所以我将展示这段代码。

重要部分：

渲染为 HTML 时，使用自 Epoch 以来的毫秒数。

```
<span class="dt"><!-- <%= blah.created_at_epoch_ms %> --><%= blah.created_at %></span> 
```

这需要在您的模型中定义如下方法：

```
def created_at_epoch_ms
    self.created_at.to_i * 1000
end 
```

转换日期的 JS：

```
$(document).ready(function(){
        $('span.dt').each(function(){
                var date = new Date();

                date.setTime(this.firstChild.data);

                $(this).parent().text(date.toLocaleString());
        });
}); 
```

这应该将字符串转换为用户的本地时间，而魔法发生在 toLocaleString() 中。我听说的唯一一个没有实现它的浏览器是 Safari 2.0，它不应该带来太大的问题，因为我认为大多数用户已经继续前进。

[我在我的网站](http://www.too-many-secrets.com/)上使用了这种方法，如果您查看页面的源代码，您可以看到它的作用。发送到浏览器的实际代码如下所示：

```
<!-- 1243484521000 -->2009-05-28 04:22:01 UTC 
```

在我的浏览器（中部时间）中转换为

```
Wednesday, May 27, 2009 11:22:01 PM 
```

如果他们启用了 JS，它将获取评论节点的值，对其进行转换，并将整个字符串（包括 UTC 时间）替换为本地时间。如果 JS 被禁用，他们只会看到服务器看到的时间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-01T15:29:31.190

您需要在设置日期之前在数据对象中设置时区。

# linux - Linux：删除不包含特定行数的文件

> ID：935251
> 
> 赞同：6
> 
> 时间：2009-06-01T15:12:07.687
> 
> 标签：linux

如何删除目录中行数多于或少于指定行数的文件（所有文件都有“.txt”后缀）？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-06-01T15:40:20.337

这个 bash 脚本应该可以解决问题。另存为“rmlc.sh”。

示例用法：

```
rmlc.sh -more 20 *.txt   # Remove all .txt files with more than 20 lines
rmlc.sh -less 15 *       # Remove ALL files with fewer than 15 lines 
```

请注意，如果 rmlc.sh 脚本位于当前目录中，则它受到保护，不会被删除。

* * *

```
#!/bin/sh

# rmlc.sh - Remove by line count

SCRIPTNAME="rmlc.sh"
IFS=""

# Parse arguments 
if [ $# -lt 3 ]; then
    echo "Usage:"
    echo "$SCRIPTNAME [-more|-less] [numlines] file1 file2..."
    exit 
fi

if [ $1 == "-more" ]; then
    COMPARE="-gt" 
elif [ $1 == "-less" ]; then
    COMPARE="-lt" 
else
    echo "First argument must be -more or -less"
    exit 
fi

LINECOUNT=$2

# Discard non-filename arguments
shift 2

for filename in $*; do
    # Make sure we're dealing with a regular file first
    if [ ! -f "$filename" ]; then
        echo "Ignoring $filename"
        continue
    fi

    # We probably don't want to delete ourselves if script is in current dir
    if [ "$filename" == "$SCRIPTNAME" ]; then
        continue
    fi

    # Feed wc with stdin so that output doesn't include filename
    lines=`cat "$filename" | wc -l`

    # Check criteria and delete
    if [ $lines $COMPARE $LINECOUNT ]; then
        echo "Deleting $filename"
        rm "$filename"
    fi 
done 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-06-01T15:33:55.800

玩了一下 0x6adb015 的答案。这对我有用：

```
LINES=10
for f in *.txt; do
  a=`cat "$f" | wc -l`;
  if [ "$a" -ne "$LINES" ]
  then
    rm -f "$f"
  fi
done 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-06-01T15:59:18.730

这一个班轮也应该做

```
 find -name '*.txt' | xargs  wc -l | awk '{if($1 > 1000 && index($2, "txt")>0 ) print $2}' | xargs rm 
```

在上面的示例中，超过 1000 行的文件将被删除。

选择 > 和 < 以及相应的行数。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-06-01T15:15:44.167

试试这个 bash 脚本：

```
LINES=10
for f in *.txt; do 
  if [ `cat "$f" | wc -l` -ne $LINES ]; then 
     rm -f "$f"
  fi
done 
```

（未测试）

**编辑：**使用管道输入 wc，因为 wc 也会打印文件名。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-06-01T15:55:12.740

我的命令行混搭非常生疏，但我认为这样的事情会安全地工作（将“10”更改为 grep 中的任意行数），即使您的文件名中有空格。根据需要进行调整。如果文件名中有换行符，则需要对其进行调整。

```
find . -name \*.txt -type f -exec wc -l {} \; | grep -v "^10 .*$" | cut --complement -f 1 -d " " | tr '\012' '\000' | xargs -0 rm -f 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-11-18T18:22:09.037

这是一个单线选项。`RLINES`是用于删除的行数。

```
rm \`find $DIR -type f -exec wc -l {} \; | grep "^$RLINES " | awk '{print $2}'\` 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-03-04T18:25:51.317

自从提出问题以来，有点晚了。我只是有同样的问题，这就是我想出的，用[乍得坎贝尔的话](https://stackoverflow.com/a/33787463/2486809)

```
find $DIR -name '*.txt' -exec wc -l {} \; | grep -v "$LINES" | awk '{print $2}' | xargs rm 
```

*   第一部分查找 DIR 中以 *.txt 结尾的所有文件并打印行数。
*   第二部分选择所有**没有**所需行数 (LINES) 的文件。
*   第三部分只打印文件名。
*   第四部分删除这些文件。

# sql - 处理“插入表值（）”语句中的标识列？

> ID：935252
> 
> 赞同：39
> 
> 时间：2009-06-01T15:12:51.210
> 
> 标签：sql, sql-server, database, tsql, identity

在 SQL Server 2000 或更高版本中，当使用如下语句时，是否有处理自动生成的主键（身份）列？

```
Insert Into TableName Values(?, ?, ?) 
```

我的目标是根本不使用列名。

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2009-06-01T15:17:52.823

默认情况下，如果您有一个标识列，则*不需要*在 VALUES 部分中指定它。如果您的表是：

```
ID    NAME    ADDRESS 
```

然后你可以这样做：

```
INSERT INTO MyTbl VALUES ('Joe', '123 State Street, Boston, MA') 
```

这将自动为您生成 ID，您根本不必考虑它。如果您`SET IDENTITY_INSERT MyTbl ON`，您可以为 ID 列分配一个值。

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2009-06-01T15:42:07.653

生成列列表的另一个“技巧”是将“列”节点从对象资源管理器拖到查询窗口上。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2009-06-01T16:44:12.473

最佳做法是明确列出列：

```
Insert Into TableName(col1, col2,col2) Values(?, ?, ?) 
```

否则，如果您向表中添加另一列，您的原始插入将会中断。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2009-06-01T15:14:26.400

您有 2 个选择：

1) 指定列名列表（没有标识列）。

2) SET IDENTITY_INSERT tablename ON，后跟为标识列提供显式值的插入语句，然后是 SET IDENTITY_INSERT tablename OFF。

如果您要避免列名列表，也许这个“技巧”可能会有所帮助？：

```
-- Get a comma separated list of a table's column names
SELECT STUFF(
(SELECT 
',' + COLUMN_NAME AS [text()]
FROM 
INFORMATION_SCHEMA.COLUMNS
WHERE 
TABLE_NAME = 'TableName'
Order By Ordinal_position
FOR XML PATH('')
), 1,1, '') 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-06-01T15:42:00.900

由于将代码放在评论中是不切实际的，因此回应您在 Eric 的回答中的评论，即它不适合您......

我刚刚使用默认设置在 SQL 2005 框（抱歉，没有 2000 方便）上运行以下命令，并且它没有错误地工作：

```
CREATE TABLE dbo.Test_Identity_Insert
(
    id  INT IDENTITY NOT NULL,
    my_string   VARCHAR(20) NOT NULL,
    CONSTRAINT PK_Test_Identity_Insert PRIMARY KEY CLUSTERED (id)
)
GO

INSERT INTO dbo.Test_Identity_Insert VALUES ('test')
GO

SELECT * FROM dbo.Test_Identity_Insert
GO 
```

您是否可能在值列表中发送 ID 值？如果您实际上为它传递了一个值，我认为您不能让它忽略该列。例如，如果您的表有 6 列，而您想忽略 IDENTITY 列，则只能传递 5 个值。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-12-13T09:49:27.603

```
set identity_insert customer on
insert into Customer(id,Name,city,Salary) values(8,'bcd','Amritsar',1234) 
```

其中“客户”是表名

# asp.net - ASP.NET：ajaxToolkit 的 HoverMenuExtender 减慢了 GridView 中的排序

> ID：935257
> 
> 赞同：1
> 
> 时间：2009-06-01T15:14:23.920
> 
> 标签：asp.net, gridview, sorting, performance

我在 UpdatePanel 中有一个 GridView，还声明了一个 HoverMenuExtender。GridView 还启用了分页和排序，并且 PageSize 为 25。

现在我正在制作一个实际应用程序的模型，所以我使用了一个只有 20 条记录的模拟数据集。

问题是当我尝试通过单击列来对 gridView 进行排序时，它非常慢。**“排序**”和“**显示**”这 20 行模拟数据大约需要 2-3 秒。但是，我们发现，如果我取出 HoverMenuExtender，一切正常。在这种情况下，排序是即时的，所以问题更多在“**显示**”中，而在“**排序**”中没有。

有没有办法加快 HoverMenuExtender 的渲染速度，还是我应该忘记使用它？

10 倍广告

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-06-01T15:23:14.107

我在 Internet Explorer 中使用 gridviews 和 ajax 动画时遇到了类似的问题。我的最终解决方案是删除动画，因为它在 IE 上无缘无故地慢得离谱（在 Firefox 中运行良好）。

你使用的是什么浏览器？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-09T11:21:23.813

我想这个问题没有真正的解决方案。

我决定不在我的 gridview 中使用这个扩展器。

# gwt - GWT - 发出 GET 请求

> ID：935262
> 
> 赞同：11
> 
> 时间：2009-06-01T15:15:37.960
> 
> 标签：gwt

简单的问题。我需要在 GWT*中发出重定向到新页面*的 GET 请求，但我找不到正确的 API。

有吗？我应该自己简单地形成 URL，然后做[Window.Location.replace](http://google-web-toolkit.googlecode.com/svn/javadoc/1.6/com/google/gwt/user/client/Window.Location.html#replace(java.lang.String))？

（原因是我希望我的搜索页面是可链接的）

谢谢。

（很抱歉，最初我的问题不够清楚）

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-06-01T15:20:03.783

看看 [http://library.igcar.gov.in/readit2007/tutorial/tools/gwt-windows-1.4.10/doc/html/com.google.gwt.http.client.html](http://library.igcar.gov.in/readit2007/tutori/tools/gwt-windows-1.4.10/doc/html/com.google.gwt.http.client.html)

```
public class GetExample implements EntryPoint {

    public static final int STATUS_CODE_OK = 200;

    public static void doGet(String url) {
        RequestBuilder builder = new RequestBuilder(RequestBuilder.GET, url);

        try {
            Request response = builder.sendRequest(null, new RequestCallback() {
                public void onError(Request request, Throwable exception) {
                    // Code omitted for clarity
                }

                public void onResponseReceived(Request request, Response response) {
                    // Code omitted for clarity
                }
            });

        } catch (RequestException e) {
            // Code omitted for clarity
        }
    }

    public void onModuleLoad() {
        doGet("/");
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-20T22:07:12.700

使用 Window.Location.replace 重定向到新页面。

应该使用历史机制来处理多个页面。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-06-01T15:21:44.797

GWT 不禁止您使用常规 servlet。

您可以在“web.xml”文件中声明一个 servlet：

```
<servlet>
    <servlet-name>myServlet</servlet-name>
    <servlet-class>org.myapp.server.MyServlet</servlet-class>
</servlet>

<servlet-mapping>
    <servlet-name>myServlet</servlet-name>
    <url-pattern>/myurl/*</url-pattern>
</servlet-mapping> 
```

然后你可以实现你的 Servlet：

```
public class MyServlet extends HttpServlet {

public void doGet(HttpServletRequest req, HttpServletResponse resp) throws 
        IOException {

      // your code here

}

} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-06-01T15:22:00.397

如果您要打开一个单独的窗口，这很容易：

```
Window.open(url, windowName, "resizable=yes,scrollbars=yes,menubar=yes,location=yes,status=yes"); 
```

否则，`RequestBuilder`请按照 Silfverstrom 的建议使用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-03-29T18:28:15.837

与[ivo 的回答](https://stackoverflow.com/a/935281/4058484)类似。我可以在我的 GWT todomvc 框架中执行此操作，`filter mapping`而不是文件中的 servlet-mapping `web.xml`。

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://java.sun.com/xml/ns/javaee 
              http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
         version="2.5"
         xmlns="http://java.sun.com/xml/ns/javaee">

  <filter>
    <filter-name>guiceFilter</filter-name>
    <filter-class>com.google.inject.servlet.GuiceFilter</filter-class>
  </filter>

  <filter-mapping>
    <filter-name>guiceFilter</filter-name>
    <url-pattern>/myurl/*</url-pattern>
  </filter-mapping>

  <listener>
    <listener-class>com.todomvc.server.ToDoServerInjector</listener-class>
  </listener>

  <!-- Default page to serve -->
  <welcome-file-list>
    <welcome-file>GwtGaeChannelToDo.html</welcome-file>
  </welcome-file-list>

</web-app> 
```

# sql-server - 更新自己的表的更新触发器是否会召回触发器？

> ID：935265
> 
> 赞同：4
> 
> 时间：2009-06-01T15:17:15.490
> 
> 标签：sql-server, sql-server-2005, triggers

我有一张名为 Point 的桌子。该表有两列我们将处理，ActualDepth 和 DesignDepth。当有人更新 ActualDepth 时，我有一个触发器，它将为更新后的所有其他点重新计算 DesignDepths。

那么我的问题是，我的触发器是否会因为同一张表中的其他行已更新而被递归调用？或者，更新发生在触发器中的事实是否足以阻止它。这是我想要的行为。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-06-01T15:25:28.907

取决于系统范围的选项“递归触发器”是否打开。默认情况下它是关闭的。

# asp.net-mvc - ASP.Net MVC 路由

> ID：935269
> 
> 赞同：0
> 
> 时间：2009-06-01T15:17:54.257
> 
> 标签：asp.net-mvc, routes

我正在尝试在我的 ASP.NET MVC C# 应用程序中设置一个简单的路由系统，但它不起作用：/

这是我的根目录“ [http://localhost/Admin/](http://localhost/Admin/) ”或“ [http://localhost/Admin/Home.mvc/Index](http://localhost/Admin/Home.mvc/Index) ”

我有一个 HomeController，它管理一个索引和一个起始页。

在“索引”页面中，我有一个可供选择的客户端列表（按钮或其他），我想在所选客户端的功能中转到“ [http://localhost/StoreV3Admin/](http://localhost/StoreV3Admin/) {client}/Home.mvc/Start” .

我对此进行了一些研究，但我并不完全了解路由系统的工作原理。

首先，可以吗？？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-01T15:32:37.393

我只是把一个简单的 mvc 应用程序放在一起，我能够让你描述的工作正常。

在我的 global.asax.cs 中，在 RegisterRoutes 方法中，我添加了以下路由：

```
routes.MapRoute(
    "Client",
    "{client}/{controller}/{action}/{id}",
    new { client = "Default", controller = "Home", action = "Index", id = "" }
    ); 
```

在我的控制器中，我声明了一个这样的方法：

```
public ActionResult FooBar(string client)
{
    return View();
} 
```

在我看来，我建立这样的链接：

```
<p><%= Html.ActionLink("Client1", "FooBar", "Home", new { client = "Client1"}, null) %></p>
<p><%= Html.ActionLink("Client2", "FooBar", "Home", new { client = "Client2"}, null) %></p>
<p><%= Html.ActionLink("Client3", "FooBar", "Home", new { client = "Client3"}, null) %></p> 
```

生成的标记最终看起来像这样：

```
<p><a href="/Client1/Home/FooBar">Client1</a></p>
    <p><a href="/Client2/Home/FooBar">Client2</a></p>
    <p><a href="/Client3/Home/FooBar">Client3</a></p> 
```

我希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-01T15:26:30.277

我认为您的 MVC 应用程序必须驻留在应用程序根目录中才能正常运行。尝试在 IIS 中创建一个 VirtualDirectory，看看是否有帮助。

为什么你的路线中有一个“.mvc”？你不是说`http://localhost/Admnin/Home/Index`吗？

# asp.net-mvc - 如何对自定义 ActionFilter 进行单元测试？

> ID：935276
> 
> 赞同：6
> 
> 时间：2009-06-01T15:20:35.780
> 
> 标签：asp.net-mvc, unit-testing, action-filter

我一直在尝试找到一些关于此的直接信息，但我一直未能 - 例如，我发现的内容对我来说是模糊的，无法理解正在发生的事情，或者对于错误的事情来说太具体了我找到的用于对 AuthorizeAttribute 进行单元测试的教程。（第三种选择当然是我太笨了，没有意识到我正在阅读我正在寻找的信息……在这种情况下，我仍然需要帮助，因为我很笨：P）

我希望能够测试两件事：

1.  将给定的 ActionFilter 应用于操作（以确保操作满足要求）
2.  给定的 ActionFilter 做了它应该做的事情。

而我一无所知。任何人都可以将我推向正确的方向，以了解我实际需要测试的内容吗？我的 Arrange、Act 和 Assert 部分的测试应该包含什么？

* * *

一个小细节，如果我不够清楚：

我有一个`CustomValidationFilter`应该检查两个提交的表单值是否相同，`ModelStateError`如果不是则添加一个。如果值不同，我想验证错误是否添加了正确的错误消息，并且如果值*相等*（并且非空），*则不添加错误。*

 *我也对 a采取了`Write`行动`GuestbookController`。我想验证过滤器是否应用于此操作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-06-01T15:36:02.977

在测试中使用反射。

```
 var method = typeof(MyController).GetMethod("MyMethod");
   var attribute = method.GetCustomAttributes(typeof(CustomValidationFilter),false);
                         .Cast<CustomValidationFilter>()
                         .SingleOrDefault();

   Assert.IsNotNull( attribute );
   Assert.AreEqual( "value", atttribute.SomeProperty ); 
```

为您的类中的方法创建一个单元测试。使用适当的数据模拟 filterContext 并检查该方法应该设置的任何变量实际上是否符合您的预期。

```
 public void AttributeTest()
 {
     var httpContext = MockRepository.GenerateMock<HttpContextBase>();
     var controller = new FakeController();
     controller.controllerContext = new ControllerContext( httpContext, new RouteData(), controller );
     ...

     attribute.OnActionExecuting( filterContext );

     Assert...

 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-01T15:32:58.767

这是一篇博客文章，描述了如何扩展和单元测试自定义授权过滤器。博客文章详细介绍了您的两个问题，即如何测试给定的 ActionFilter 是否应用于操作以及如何测试 ActionFilter 是否完成了它应该做的事情。

[http://blog.geniar.com/index.php/2009/05/aspnet-mvc-testing-a-custom-authorize-filters/](http://blog.geniar.com/index.php/2009/05/aspnet-mvc-testing-a-custom-authorize-filters/)

# linq-to-entities - 为什么 LINQ to Entities 不支持 SingleOrDefault()？

> ID：935280
> 
> 赞同：0
> 
> 时间：2009-06-01T15:21:35.123
> 
> 标签：linq-to-entities

为什么 LINQ to Entities 不支持`SingleOrDefault()`但要求使用的任何想法`FirstOrDefault()`？

功能会`SingleOrDefault()`被替换吗？通过什么方式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-06-01T15:25:52.713

我不知道为什么它被遗漏了，但你总是可以自己动手。

我在 MSDN 上找到了对这个问题的类似回复，这是基于该代码的实现。

```
public static TElement SingleOrDefault<TElement>
      (this IQueryable<TElement> query)
{
    if (query.Count() == 1)
        return query.First();
    else if (query.Count() == 0)
        return null;
    else
        throw new InvalidOperationException();
}

// Use it like this

Product prod = (from p in db.Product
                where p.ProductID == 711
                select p).SingleOrDefault(); 
```

[资料来源：MSDN](http://social.msdn.microsoft.com/Forums/en-US/adodotnetentityframework/thread/afb292ca-3a61-4a60-8e18-830b92489016)

# mysql - 有没有办法截断 MySQL 模式中的大多数表？

> ID：935284
> 
> 赞同：1
> 
> 时间：2009-06-01T15:22:03.297
> 
> 标签：mysql, truncate

我正在寻找一个查询（或一系列）来截断我的架构中的所有表（有几百个表），除了 4 个特定的表。我该怎么做呢？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-01T15:33:06.770

我相信你必须用你最喜欢的任何语言编写脚本。您可以从 information_schema db 中获取架构中的表列表，然后遍历它们，截断您喜欢的任何内容。

查询将类似于：

```
SELECT table_name FROM information_schema.tables WHERE table_schema = 'test' AND table_name NOT IN ('table1', 'table2'); 
```

**编辑**：这是使用 Perl 的示例：

```
use strict;
use warnings;
use DBI;

my $dbh = DBI->connect("some_dsn");

my $sth = $dbh->prepare(q{SELECT table_name FROM information_schema.tables WHERE table_schema = 'test' AND table_name NOT IN ('table1', 'table2')});
$sth->execute();
$sth->bind_columns(\my $table_name);

while($sth->fetch) { $dbh->do(q{TRUNCATE TABLE } . $table_name) } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-01T15:44:26.000

另一种方法可能是将这四个表复制到新架构中，然后删除原始数据库架构。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-01T16:27:33.343

*nix 单线：

```
for i in `mysql -e "show tables MY_DB" | grep -vE "(table1|table2)"`; do mysql -e"TRUNCATE ${i}" MY_DB; done 
```

# java - 如何为 JCombobox 中的线条制作独特的字体颜色？

> ID：935286
> 
> 赞同：1
> 
> 时间：2009-06-01T15:22:39.037
> 
> 标签：java, swing, jcombobox

我想为 JCombobox 中的行/条目设置字体颜色，每行都是唯一的。所以基本上当你点击下拉箭头时，你应该会看到几行不同的颜色，我想根据它们的属性自己指定颜色。我该怎么做呢？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-01T17:07:17.500

您需要像这样创建自定义 ListCellRenderer：

```
class Renderer extends JLabel implements ListCellRenderer { 
```

并实现这个方法：

```
public Component getListCellRendererComponent(JList list, Object value,
            int index, boolean isSelected, boolean cellHasFocus) {
        // Get the selected index. (The index param isn't
        // always valid, so just use the value.)

        if (isSelected) {
            setBackground(list.getSelectionBackground());
            setForeground(list.getSelectionForeground());
        } else {
            setBackground(list.getBackground());
            setForeground(list.getForeground());
        }

        // Display the text
        String text = (String) value;
        setText(text);

        // Get the source 
```

然后，根据您的来源，使用 this.setForeground(Color color) 设置文本的颜色。最后，

```
return this; 
```

}

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-01T15:32:38.440

您可能必须为您的 JComboBox 提供自定义渲染器，请在此处查看 Sun 的教程：

[http://java.sun.com/docs/books/tutorial/uiswing/components/combobox.html#renderer](http://java.sun.com/docs/books/tutorial/uiswing/components/combobox.html#renderer)

（抱歉没有链接，因为我是新会员，所以还不能发链接）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-18T12:54:16.087

您可以使用`ListCellRenderer`. 您需要为此编写自定义类。这是基于索引设置前景的完整代码（以避免重复）。您还可以为此设置自定义选择背景和背景。请参阅代码中的注释。

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.*;
import java.util.*;
class ListCellRendererDemo2 extends JFrame
{
Hashtable<Integer,Color> table;
JComboBox<String> c;

    public ListCellRendererDemo2()
    {
        createAndShowGUI();
    }

    private void createAndShowGUI()
    {
        setTitle("JComboBox Demo");
        setLayout(new FlowLayout());
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        table=new Hashtable<Integer,Color>();
        table.put(1,Color.RED);
        table.put(2,Color.BLUE);
        table.put(3,Color.GREEN);
        table.put(4,Color.GRAY);

        c=new JComboBox<String>();
        c.addItem("Item 1");
        c.addItem("Item 2");
        c.addItem("Item 3");
        c.addItem("Item 4");
        c.addItem("Item 5");
        c.addItem("Item 6");
        c.addItem("Item 7");
        c.addItem("Item 8");

        c.setRenderer(new MyListCellRenderer(table));

        add(c);
        setSize(400,400);
        setVisible(true);
    }

    public static void main(String args[])
    {
        SwingUtilities.invokeLater(new Runnable(){
            public void run()
            {
                new ListCellRendererDemo2();
            }
        });
    }
}
class MyListCellRenderer extends DefaultListCellRenderer
{
Hashtable<Integer,Color> table;

    public MyListCellRenderer(Hashtable<Integer,Color> table)
    {
        this.table=table;

        // Set opaque for the background to be visible
        setOpaque(true);
    }

    public Component getListCellRendererComponent(JList jc,Object val,int idx,boolean isSelected,boolean cellHasFocus)
    {
        // Set text (mandatory)
        setText(val.toString());

        // Set the foreground according to the selected index
        setForeground(table.get(idx));

            // Set your custom selection background, background
            // Or you can get them as parameters as you got the table
            if(isSelected) setBackground(Color.LIGHT_GRAY);
            else setBackground(Color.WHITE);

    return this;
    }
} 
```

# c++ - $stdin 与使用 swig、C++ 和 Ruby 的 std::istream 兼容

> ID：935290
> 
> 赞同：1
> 
> 时间：2009-06-01T15:24:23.543
> 
> 标签：c++, ruby, stdin, swig, iostream

我在 C++ 中有一个函数，它以 std::istream 作为输入：

```
class Foo {
    Foo(std::istream &);
} 
```

使用 SWIG，我已经将它绑定到 Ruby，但是 Ruby 的 $stdin 变量与 C++ 中的流类之类的东西根本不同，所以我不确定如何 1) 以我的方式将 C++ 类公开给 Ruby可以使用 $stdin，或者 2) 将 $stdin 转换为 C++ 类可以理解的内容。

有人有将 C++ 中的 iostream 绑定到 Ruby 的经验吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-01T17:34:53.893

您可以使用 std::istream 的实例，该实例使用通过 C 接口调用的 $stdin 上的 Ruby 方法实现其操作（例如，使用 rb_funcall）。你不能通过从 std::istream 本身派生一个类来做到这一点，因为它的方法不是虚拟的；相反，您需要从 std::stream_buf 派生并实例化一个使用您的流缓冲区的 istream。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-01T15:36:19.263

也许您可以使用 C 样式**文件描述符**而不是 istream，然后将其“转换”为 C++ 流，

我认为您可以使用此问题中的[答案](https://stackoverflow.com/questions/109449/getting-a-file-from-a-stdfstream)

# java - GridBagLayout 中最轻的间隔组件

> ID：935293
> 
> 赞同：7
> 
> 时间：2009-06-01T15:25:09.063
> 
> 标签：java, user-interface, swing, layout

在 GridBagLayout 中，哪个组件最适合在面板中提供空白空间？理想情况下，我想使用具有以下功能的组件：

1.  低开销
2.  不需要空白空间时没有副作用（即没有最小尺寸）
3.  一个简单的构造函数（无参数）

JPanel 违反了上面的#2。Box 需要一个构造函数参数（上面的#3），在这个简单的情况下，这实际上是不必要的。JLabel 运行良好，但我担心它可能会有一些开销，尽管不可否认它可能非常低。

匿名类似乎也能很好地工作（即“new JComponent() { }”），但是每次我使用它时都会添加一个额外的 .class 文件。我想它不会比任何给定的事件处理程序更多的开销。是否值得为此创建一个从 JComponent 派生的自定义、零实现组件？是否有我缺少的现有组件？

仅供参考 GridBagLayout 是我对我所在团队的限制之一，因此其他布局不是一个选项。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-06-01T18:10:31.713

您提到了 Box，但它可以通过以下四种简单地返回组件的静态方法以“轻量级”方式使用。我一直在使用这些。它们在绘画方面是不可见的。在你的情况下，看起来胶水是要走的路。一个微不足道的构造函数（就像那是一件坏事！），低开销。不需要空间时的副作用完全取决于您布局网格包的方式。

```
panel.add( Box.createHorizontalGlue() );
panel.add( Box.createVerticalGlue() );
panel.add( Box.createHorizontalStrut( int width ) );
panel.add( Box.createVerticalStrut( int width ) ); 
```

JavaDoc在这里：http: [//java.sun.com/javase/6/docs/api/javax/swing/Box.html](http://java.sun.com/javase/6/docs/api/javax/swing/Box.html)

# java - objectarray 中对象字段的总和，都在构造函数中？

> ID：935297
> 
> 赞同：1
> 
> 时间：2009-06-01T15:25:55.350
> 
> 标签：java, arrays, sum

我有两个课，一个是文章课，另一个课是购物车课。购物车由一个包含`article`对象的对象数组组成。

我需要在构造函数中使用 foreach 循环来总结文章的价格。当我在构造函数中编写方法（这可能是错误的）时，它的类型不被接受为双精度。我如何总结对象数组中的对象字段以及如何在构造函数中执行此操作（<- 这看起来是一个糟糕的设计决策，但它是可能类工作的一部分）。

这是我的课程：

```
package org.teubler.sucks.aufgaben;
public class Artikel {
    public enum Warengruppe{
        A, B, C, S
    }
    String name;
    double verkaufspreis;
    Warengruppe Art;

    Artikel(String name, double preis){
        this.name = name;
        this.verkaufspreis = preis;
        this.Art = Warengruppe.S;
    }
    public double getVerkaufspreis() {
        return verkaufspreis;
    }
    public void setWarengruppe(Warengruppe Art) {
        switch(Art){
            case A:Art = Warengruppe.A;
            case B:Art = Warengruppe.B;
            case C:Art = Warengruppe.C;
            default: Art = Warengruppe.S;
        }
    }
} 
```

二等

```
package org.teubler.sucks.aufgaben;
import java.util.Random;
public class Warenkorb {
    String kunde;
    Artikel artikelliste[];
    int sessionid;

    Random s = new Random(); 

    Warenkorb(String kunde, Artikel[] artikel){
        this.kunde = kunde;
        this.artikelliste = artikel;
        this.sessionid = s.nextInt();
        public double gesamtpreis(){
            double summe = 0;
            for(Artikel preis : artikel){
                summe += artikel.getVerkaufspreis();
            }
            return summe;
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-01T15:31:48.363

您正在尝试在构造函数中创建一个额外的*方法*。这不是一个好主意。您还试图通过一个对象来索引一个数组，这是行不通的。最后，您尝试调用`getVerkaufspreis()`,`Object`而不是强类型`Artikel`. 试试这个：

```
Warenkorb(String kunde, Artikel[] artikel){
    this.kunde = kunde;
    this.artikelliste = artikel;
    this.sessionid = s.nextInt();
    double summe = 0;
    for (Artikel preis : artikel) {
         summe += preis.getVerkaufspreis();
    }
} 
```

现在到循环结束时，您将得到总和 - 但您想用它做什么？我怀疑你想为它创建一个字段......

如果您绝对*必须*使用 an`Object[]`而不是 an`Artikel[]`那么您应该在每次迭代中强制转换：

```
Warenkorb(String kunde, Object[] artikel){
    this.kunde = kunde;
    this.artikelliste = artikel;
    this.sessionid = s.nextInt();
    double summe = 0;
    for (Object preis : artikel) {
         summe += ((Artikel)preis).getVerkaufspreis();
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-01T15:32:17.380

首先，你应该有一个数组`Artikel`，而不是`Object`。你不能用`Objects`.

假设您更改`artekelliste`为`Artikel[]`，总和将如下所示：

```
for(Artikel preis : artikelliste){
    summe += artikel.getVerkaufspreis();
} 
```

当您使用增强型 for 循环时，不需要显式数组索引。

此外，您不能将方法放在构造函数中。您需要`gesamtpreis()`退出构造函数，如下所示：

```
Warenkorb(String kunde, Artikel[] artikel){
    this.kunde = kunde;
    this.artikelliste = artikel;
    this.sessionid = s.nextInt();
}
public double gesamtpreis(){
    double summe = 0;
    for(Artikel preis : artikelliste){
        summe += artikel.getVerkaufspreis();
    }
    return summe;
} 
```

附带说明，您永远不能将 an`Object`用作数组索引；等效的标准for循环将是

```
for(int i = 0; i < artikelliste.length; i++) {
    summe += artikelliste[i].getVerkaufspreis();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-01T15:34:09.233

查看您的代码，您在 Warenkorb 构造函数中使用“for”而不是“foreach”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-01T15:35:02.133

将`summe`变量移出构造函数，并在不将其包装在函数中的情况下执行循环。或者，移出整个函数`gesamtpreis`并从构造函数中调用它：

```
double summe;

Warenkorb(String kunde, Object[] artikel){
    this.kunde = kunde;
    this.artikelliste = artikel;
    this.sessionid = s.nextInt();
    this.summe = gesamtpreis();
}

public double gesamtpreis(){
    double _summe = 0;
    for(Object preis : artikelliste){
            _summe += artikelliste[preis].getVerkaufspreis();
    }
    return _summe;
} 
```

# mysql - 模棱两可的“id”字段

> ID：935299
> 
> 赞同：4
> 
> 时间：2009-06-01T15:26:19.373
> 
> 标签：mysql, innodb

我有以下两个表：

```
system
- id
- systemName
- idOrganization

organization
- id
- officeSymbol 
```

我正在运行以下查询并收到一个`id`不明确的错误：

```
SELECT system.systemName, organization.officeSymbol
FROM system
LEFT JOIN (organization)
ON (system.idOrganization = organization.id) 
```

如您所见，我没有选择`id`列。如果我放置`system.id`在要选择的字段列表中，我将不再收到此错误。不幸的是，处理这些数据的方式我无法返回`id`——我们不希望它显示给用户。

此外，如果我添加`GROUP BY system.systemName`我不再收到错误 - 但这似乎不是最佳解决方案。

注意：这`LEFT JOIN`是有意的，因为并非所有系统都将分配给一个组织。

```
SELECT VERSION()
--> 5.0.77-community-log

CREATE TABLE system (
  `id` INT(11) NOT NULL AUTO_INCREMENT,
  `systemName` VARCHAR(45) DEFAULT NULL,
  `idOrganization` INT(11) DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `fk_system_organization` (`idOrganization`),
  CONSTRAINT `fk_system_organization` 
    FOREIGN KEY (`idOrganization`) 
    REFERENCES `organization` (`id`) 
    ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

CREATE TABLE organization (
  `id` INT(11) NOT NULL AUTO_INCREMENT,
  `officeSymbol` VARCHAR(45) DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-06-01T15:47:17.733

测试`5.0.77`：

```
选择版本（）；

版本（）
5.0.77

CREATE TABLE 组织 (
  `id` INT(11) NOT NULL AUTO_INCREMENT,
  `officeSymbol` VARCHAR(45) 默认为空，
  主键（`id`）
) 引擎=InnoDB 默认字符集=latin1；
创建表系统（
  `id` INT(11) NOT NULL AUTO_INCREMENT,
  `systemName` VARCHAR(45) 默认为空，
  `idOrganization` INT(11) 默认 NULL，
  主键（`id`），
  KEY `fk_system_organization` (`idOrganization`),
  约束`fk_system_organization`
    外键（`idOrganization`）
    参考`组织`（`id`）
    ON DELETE NO ACTION ON UPDATE NO ACTION ON 更新 NO ACTION ON DELETE NO ACTION ON UPDATE NO ACTION
) 引擎=InnoDB 默认字符集=latin1；

插入
INTO组织
价值观
        (1, '组织 1'),
        (2, '组织 2');
插入
INTO系统
值（1，“系统 1”，1），
        (2, '系统 2', 2);
选择 system.systemName，organization.officeSymbol
从系统
左连接
        （组织）
开（system.idOrganization = organization.id）；

系统名称办公室符号
系统 1 组织 1
系统 2 组织 2

```

一切正常。

请注意，这`LEFT JOIN`在这里没有用，因为您有一个`FOREIGN KEY`to ，并且对于每个给定`organization`的 总是有一个。`organization``system`

在您对`@Artem Barger`的帖子的评论中，您说：

> 我只选择这 2 个表之间共享的 42 个字段中的 5 个

表和/或查询中是否还有其他字段？

由于您有语法错误，因此每个逗号都可能很重要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-01T15:29:11.690

我不确定发生了什么，因为我对 mySql 不够熟悉，但我总是更喜欢将列命名为 SystemID 和 OrganizationID，而不是一般意义上的“ID”。

以这种方式命名您的列，将导致具有相同名称的 PK-FK 组合：

```
bad PK-FK names       good PK-FK names
system                system
  id                    SystemID
  systemName            systemName
  idOrganization        OrganizationID  <--

organization          organization
  id                    OrganizationID  <--
  officeSymbol          officeSymbol 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-01T15:44:52.990

不知道为什么您的查询会生成：通常您会在执行此操作时收到该错误消息：

```
SELECT id /* This should have been qualified with system. or organization. */
FROM system
LEFT JOIN (organization)
ON (system.idOrganization = organization.id) 
```

您确定该查询确实给了您该错误吗？如果您将其修剪为 SO，您可能已经消除了该错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-01T16:22:12.020

迈克尔，将 id 放在单引号 (`) 中（或像 SQL Server 中的方括号，或任何适用于 mysql 的方括号）有助于解决问题吗？

```
...
ON (system.`idOrganization` = organization.`id`) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-06-01T15:38:53.007

我真的不知道mysql，只知道sqlserver，但是，当使用像“id”这样的字段名和像“system”这样的表名时，我一定要像这样将所有表名和列名括起来。可能值得一试？

```
SELECT
    [system].[systemName],
    [organization].[officeSymbol]
FROM
    [system]
LEFT OUTER JOIN
    [organization]
ON
    [system].[idOrganization] = [organization].[id] 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2009-06-01T15:34:10.620

你有没有尝试过：

```
SELECT system.systemName, organization.officeSymbol
FROM system, organization
WHERE system.idOrganization = organization.id 
```

即使不是所有系统都分配给一个组织，这也应该将这些表正确地连接在一起。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2009-06-01T15:43:11.850

对我来说，你会得到那个错误似乎很奇怪（尽管我的主要经验不是 mysql）。我会尝试给你的表起别名。

```
SELECT s.systemName, o.officeSymbol
FROM system as s
LEFT JOIN (organization as o)
ON (s.idOrganization = o.id) 
```

# rss - actionscript 2 中的 RSS 阅读器

> ID：935306
> 
> 赞同：0
> 
> 时间：2009-06-01T15:29:07.167
> 
> 标签：rss, actionscript-2

我正在尝试制作一个能够读取 RSS 提要并找到该项目的标题和描述的动作脚本程序。我能够将 XML 加载到变量中，但是当我尝试查看 XML 的子节点时，输出告诉我没有。我能够在 ActionScript 3 中找到一个非常好的 RSS 阅读器解释，但我需要使用 ActionScript 2。任何帮助将不胜感激，如果我完全错误地解决这个问题，请告诉我。

```
var foo:XML = new XML();
foo.onLoad = function(success:Boolean) {
    trace(foo);
}
foo.load("http://feeds.nytimes.com/nyt/rss/HomePage");

var myArr:Array = new Array();
myArr = foo.childNodes;
trace(myArr.length); //Prints 0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2010-01-09T05:32:50.227

那是病了。我正在 AS2 中构建 Twitter 提要（谁还需要 AS2？），这完全有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-01T15:46:47.780

在访问数据之前，您需要等待 XML 加载。您必须等待 onLoad 触发才能访问加载的数据。

处理此问题的代码最简单的更改是：

```
var foo:XML = new XML();
foo.onLoad = function(success:Boolean) {
  var myArr:Array = new Array();
  myArr = foo.childNodes;
  trace(myArr.length);
}
foo.load("http://feeds.nytimes.com/nyt/rss/HomePage"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-09-08T04:08:10.473

我像这样编辑你的脚本 `var foo:XML = new XML(); foo.onLoad = function(success:Boolean) { trace(foo); rss.text = foo; } foo.load(" [http://feeds.nytimes.com/nyt/rss/HomePage](http://feeds.nytimes.com/nyt/rss/HomePage) ");

var myArr:Array = new Array(); myArr = foo.childNodes; rss.text = myArr.length;`

并请制作一个动态文本并用 rss 给出实例名称。现在您将获得所有 xml 数据。

# php - PHP：从特定的 XML 节点类型获取文本数组？

> ID：935310
> 
> 赞同：0
> 
> 时间：2009-06-01T15:29:38.663
> 
> 标签：php, xml, php4

我对 PHP 或 XML 并不完全陌生，但我对将 XML 与 PHP 配对是 100% 的新手。我有一个 XML 字符串，它有几个节点，但我唯一感兴趣的是 <keyword> 节点，每个节点的数量不确定，每个节点都包含这样的短语：<keyword>蓝色钻石珠宝</keyword> 例如字符串看起来像这样：

```
<xml>
<pointless_node/>
<seq>
<keyword>diamond ring</keyword>
<keyword>ruby necklace</keyword>
<keyword>mens watch</keyword>
</seq>
<some_node/>
</xml> 
```

我想要一个这样的数组：

```
['diamond ring','ruby necklace','mens watch'] 
```

我尝试查看 PHP 手册，只是感到困惑，不知道该怎么做。有人可以指导我如何做到这一点吗？我正在使用 PHP4。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-03T05:15:20.610

> 这会将 $keywords 转换为对象数组。有没有办法从对象中获取文本？

当然，看看这个。

```
$dom = domxml_open_mem($str);
$keywords = $dom->get_elements_by_tagname('keyword');

foreach($keywords as $keyword) {
    $text = $keyword->get_content();
    // Whatever
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-01T15:35:22.740

见：[http](http://www.php.net/simplexml-element-xpath) : //www.php.net/simplexml-element-xpath 试试下面的xpath和数组构造

```
$string = "<xml>
<pointless_node/>
<seq>
<keyword>diamond ring</keyword>
<keyword>ruby necklace</keyword>
<keyword>mens watch</keyword>
</seq>
<some_node/>
</xml>";

$xml = domxml_open_mem($xmlstr)

$xpath = $xml->xpath_new_context();
$result = xpath_eval($xpath,'//keyword');

foreach ($result->nodeset as $node)
{
     $result[] = $node->dump_node($node);
} 
```

编辑：修改代码以反映 php 4 要求 编辑：修改以说明 xpath_new_context 记录不良的行为（php docs 注释指出了错误）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-01T15:40:07.407

XML_Parser->xml_parse_into_struct() 可能是您正在寻找的。适用于 PHP 版本 >= 4

[http://se.php.net/xml_parse_into_struct](http://se.php.net/xml_parse_into_struct)
[http://www.w3schools.com/PHP/func_xml_parse_into_struct.asp](http://www.w3schools.com/PHP/func_xml_parse_into_struct.asp)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-02T08:40:32.877

我认为最简单的是：

```
$dom = domxml_open_mem($str);
$keywords = $dom->get_elements_by_tagname('keyword'); 
```

# internet-explorer - 如何追踪“此页面包含安全和非安全项目”

> ID：935311
> 
> 赞同：8
> 
> 时间：2009-06-01T15:30:17.460
> 
> 标签：internet-explorer, https

据我所知，没有不安全的项目 --- 当我使用 IE7 或 FireFox 3 浏览该站点时，我没有收到任何此类警告，但如果我使用 IE6 访问该站点，我会收到安全信息对话框“此页面包含安全和非安全项目您要显示非安全项目吗？”

如何追踪该消息的原因？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-06-01T15:34:33.210

**清除缓存**后使用 Fiddler 。它将显示您的网络浏览器从远程站点获取的**所有内容。**寻找任何不是 https 的东西。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-06-02T17:07:45.863

事实证明，它与不安全的流量本身无关，但与其中一个 HTML 男孩所做的黑客行为有关——他们有一个空的 iframe（没有源）放在页面上，所以他们可以然后在上面做一些放置的内容 --- 从代码中删除 iframe，警告对话框消失了。IE7/8 和 FF 不这样做。

添加一个空白.gif 之后，我们可以 https 到那个 gif （真痛苦），现在一切都很好。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-06-01T15:31:10.393

`http://`如果您有一个以而不是开头的链接，`https://`则会标记这些警告。

好消息是，至少一些商业网站（如 Adob​​e，用于 Flash）提供`https://`了重定向到的网站版本，`http://`以便您可以绕过这些警告。

既然你提到了IE6；我还会检查您在 IE6 中的安全级别设置。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-01T15:33:04.290

*   右键单击页面。选择“显示源代码”（或类似的。我没有英文 IE）。
*   在您的代码中搜索“http://”并将其替换为 https://。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-06-01T15:46:57.327

过去，跨站点图像经常给我造成这个问题。

如果您使用的是 Firefox，您可以使用 [HttpFox](https://addons.mozilla.org/en-US/firefox/addon/6647)插件来执行 Eric TenEyck 建议您使用 Fiddler 执行的操作。

另外请确保在您的 IE7 安全设置中将显示混合内容设置为“提示”。

# asp.net - ASP.Net：如果发生错误，是否可以跳过元素的数据绑定？

> ID：935313
> 
> 赞同：2
> 
> 时间：2009-06-01T15:31:14.637
> 
> 标签：asp.net, validation, data-binding, exception-handling

我为我们网站的不同元素使用了很多转发器，我一直想知道是否有办法让转发器在发生异常时跳过一个元素而不是让整个页面崩溃？

特别是，我从另一个使用类似设计的开发人员那里继承了一个系统，但是他没有对他的业务对象进行任何类型的验证，并且缺少一个属性，整个事情都烟消云散了。

有什么建议么？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-01T15:39:43.257

我能提供的最简单的建议是在数据传递给转发器之前检查数据的有效性。我不相信有任何方法可以让股票中继器在错误时跳过数据元素。

另一种方法是构建您自己的中继器，从基础中继器继承，以添加该功能，但我没有提供示例代码。也许其他人可以在那里提供帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-02T16:59:45.780

您是否尝试过在引用属性之前使用 string.isnullorempty("the string") 检查值？

这是一个参考：[MSDN](http://msdn.microsoft.com/en-us/library/system.string.isnullorempty.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-01T15:40:24.113

在我看来，你至少有三个选择。

1.  您可以创建一个继承 System.Web.UI.WebControls.Repeater 的自定义中继器控件，并覆盖数据绑定行为以使其更容易上手（可能会因数据绑定错误而静默失败）。然后，您可以轻松地将标准中继器的所有实例替换为这个新实例。
2.  您可以在数据绑定之前过滤数据源，以预先删除您知道会导致问题的项目。这个选项可能非常费力并且是一个迭代过程。
3.  您可以尝试向业务对象添加默认值，以便您绑定的属性返回默认实例而不是 null（也不好）。

无论如何，这就是我的想法。

一个问题-您说“缺少财产时”。你的意思是他使用的数据绑定语法风格不提供编译时检查并且引用不存在的属性，或者引用为空的属性？

编辑

好的，所以您正在引用为空的属性。如果您有权访问业务对象的代码，则可以修改它们，使它们返回一个新的非空实例（这是我给出的第三个选项）。

你没有说你是否使用.net 3.5，但我假设你是。您可以在每个业务对象上添加一个新属性“IsValidForDataBinding”。在 getter 逻辑中，您可以检查每个必要的属性和子对象以检查有效性、非空性等并返回一个布尔值。当你来绑定你的转发器时，编写一个简单的 linq 语句来过滤掉无效的项目（即 IsValidForDataBinding = false）。话虽如此，我仍然认为编写派生转发器控件可能是您最简单的选择。

# sql-server - 将 CLR SQL Server UDT 从 SQL Server 返回到客户端应用程序？

> ID：935315
> 
> 赞同：0
> 
> 时间：2009-06-01T15:31:49.067
> 
> 标签：sql-server, clr, user-defined-types

这可以做到吗？还是 SQL Server 中的所有 CLR UDT 都只在 SQL Server 中使用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-01T16:01:39.977

是的。UDT 程序集和所有依赖程序集必须已经在客户端上，可以在应用程序文件夹或 GAC 中访问。您的项目必须引用 UDT 程序集字节，或者它必须在运行时加载 UDT，然后再引用 UDT 类型列。此 MSDN 链接解释了[您的 UDT 在 ADO.Net 可以在您的客户端中实例化它们之前必须满足的所有要求](http://technet.microsoft.com/en-us/library/ms131080.aspx)。不用说，您的 UDT 代码不应假定它在 SQL CLR 运行时中运行，即。不应尝试打开“上下文”连接或任何特定于 SQL 的内容。

# django - Django：使用真实对象设置通用（content_type）字段将其设置为无

> ID：935318
> 
> 赞同：1
> 
> 时间：2009-06-01T15:32:21.590
> 
> 标签：django, django-models

更新 3（首先阅读）：

是的，这是由于对象“配置文件”未保存造成的。对于那些获得相同症状的人来说，道德是**“如果在将真实对象分配给它时似乎将 ForeignKey 字段设置为 None，那可能是因为尚未保存其他对象。”**

即使您 100% 确定它已保存，请再次检查；-)

* * *

你好，

我在 Django 的一个类中使用 content_type / 通用外键。

创建类实例的行大致是这样的：

```
tag =  SecurityTag(name='name',agent=an_agent,resource=a_resource,interface=an_interface) 
```

代理和资源都是 content_type 字段。

大多数情况下，这可以按我的预期工作并创建适当的对象。但是我有一个特定的情况，我调用此行来创建一个 SecurityTag，但代理字段的值似乎最终为 None。

现在，在这种特殊情况下，我在前一行中测试 an_agent 的值确实包含一个现有的、已保存的代理类型的 Django.model 对象。它确实如此。

然而，生成的 SecurityTag 记录在该字段中显示为 None。

我对此感到很困惑。我猜想在某个地方，ORM 试图在 an_agent 中提取对象的 id 失败了，但是没有错误消息也没有引发异常。我检查了 an_agent 对象是否已保存并且在其 id 字段中有一个值。

有人见过这样的吗？或者有什么想法？

====

更新： 10 天后，完全相同的错误在新的环境中再次咬我：

这是一些描述“安全标签”对象的代码，它基本上是

a) 某种许可角色（在我们的系统中称为“代理”），它是一个通用的 content_type，

b) 一个资源，它也是一个通用的 content_type，（并且在当前问题中被赋予一个 Pinax“配置文件”），

c）一个“接口”（基本上是一种访问类型......例如，“可查看”或“可编辑”只是一个字符串）

```
class SecurityTag(models.Model) :
    name = models.CharField(max_length='50')
    agent_content_type = models.ForeignKey(ContentType,related_name='security_tag_agent')
    agent_object_id = models.PositiveIntegerField()
    agent = generic.GenericForeignKey('agent_content_type', 'agent_object_id')

    interface = models.CharField(max_length='50')

    resource_content_type = models.ForeignKey(ContentType,related_name='security_tag_resource')
    resource_object_id = models.PositiveIntegerField()
    resource = generic.GenericForeignKey('resource_content_type', 'resource_object_id') 
```

在某个特定的时刻，我这样做：

```
print "before %s, %s" % (self.resource,self.agent)
t = SecurityTag(name=self.tag_name,agent=self.agent,resource=self.resource,interface=self.interface_id)
print "after %s, %s, %s, %s" % (t.resource,t.resource_content_type,type(t.resource),t.resource_object_id) 
```

结果是，之前，“资源”变量*确实*引用了一个配置文件，但之后......

```
before phil, TgGroup object
after None, profile, <type 'NoneType'>, None 
```

换句话说，虽然 t.resource_content_type 的值已设置为“profile”，但其他所有内容均为 None。在我之前遇到这个问题时，我通过重新加载我试图分配给泛型类型的东西来“解决”它。我开始怀疑这是否是某种 ORM 缓存问题......变量“self.resource”是否持有某种代理对象而不是真实的东西？

一种可能性是配置文件尚未保存。但是，此代码作为配置文件的 after_save 信号的结果被调用。（它正在设置默认权限），那么可能是配置文件保存尚未提交还是什么？

更新 2 ：按照下面马修的建议，我添加了

```
print self.resource._get_pk_value() and self.resource.id 
```

说 Profile 没有 _get_pk_value()

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-06-12T14:47:23.330

所以这就是我在通过 Django 代码时注意到的：当您通过构造函数创建模型对象的新实例时，会为任何通用对象引用调用（通过信号）预初始化函数。

它不是直接存储你传入的对象，而是存储类型和主键。

如果你的对象是持久化的并且有一个 ID，这很好，因为当你在以后获取该字段时，它会从数据库中检索它。

但是 - 如果您的对象没有 ID，则获取代码不会返回任何内容，并且 getter 会返回`None`！

您可以在`django.contrib.contenttypes.generic.GenericForeignKey`、`instance_pre_init`和`__get__`函数中看到代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-01T15:52:09.977

这并不能真正回答我的问题或满足我的好奇心，但如果我在尝试在 SecurityTag 构造函数中使用它之前立即将 an_agent 对象从数据库中拉出，它似乎确实有效。

以前我传递的是之前用 get_or_create 制作的副本。这个旧实例是否以某种方式过时或范围过时？

# .net - 如何模拟使用 Scanner (Symbol.Barcode) 的 Windows 移动设备？

> ID：935328
> 
> 赞同：4
> 
> 时间：2009-06-01T15:33:34.303
> 
> 标签：.net, windows-mobile, motorola

有没有办法模拟条码扫描？我的应用程序在装有 Scanner 的 Motorola MC9090 Windows 移动设备上运行。我正在使用 Symbol.Barcode 类在 .net c# 中创建我的应用程序。

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2010-09-16T19:00:30.880

模拟扫描仪就像模拟编程中的任何东西，我猜你看错了问题。无论使用什么“扫描器”，都应该使用接口，而不是实现（参见[SOLID](http://en.wikipedia.org/wiki/Solid_%28Object_Oriented_Design%29)中的“D” ）。这将允许您创建一个单独的实现，它是硬件的模拟版本。

现在在这种情况下，界面中可能不需要很多东西 - 可能是一些设置/初始化、启用/禁用以及数据接收的偶数或委托。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-01T15:49:35.003

这些扫描仪的默认设置是键盘仿真，因此您应该能够只输入您的条形码以获得相同的效果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-04T14:39:25.783

我自己经常使用 MC9090，但还没有找到模拟扫描仪行为的方法。调试事物的唯一方法是直接在测试扫描仪上进行调试。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-16T06:36:07.020

我知道我为此迟到了，但@ctacke 在另一个问题上的回复可能对某人有所帮助。它给了我一个方向。

[使用模拟器进行条码扫描的 Windows Mobile 应用程序](https://stackoverflow.com/questions/15158792/windows-mobile-application-for-barcode-scanning-with-emulator)

# sql-server - SQL Server 游标参考（语法等）

> ID：935336
> 
> 赞同：4
> 
> 时间：2009-06-01T15:34:33.427
> 
> 标签：sql-server, reference, cursors

我不经常使用 SQL Server 游标，但当我使用时，我总是需要查看语法和选项。

所以我想问一下，网络上最好的 SQL Server 游标参考是什么？

我正在寻找解释所有（主要？）选项（IE FAST_FORWARD）的参考，并显示如何使用它的快速片段。（IE 如何通过游标实现循环并使用检查@@FETCH_STATUS 变量的良好做法。）

最好的问候，
弗兰克

**快速更新：**我正在寻找快速参考但足够详细以查看我的选项的平衡。举个例子。MSDN 是一个很好的参考指南，但它有太多的细节。**理想情况下，参考应该是简洁的。**

**进一步更新：**我仍在寻找来源。如果有人发布了符合我*简洁*标准的好的来源，我会接受这个答案......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-01T15:41:25.377

如何在没有游标的情况下执行 SQL Server 逐行操作：
[http ://www.sql-server-performance.com/articles/per/operations_no_cursors_p1.aspx](http://www.sql-server-performance.com/articles/per/operations_no_cursors_p1.aspx)

SQL Server 游标示例（带有替代游标）：
[http ://www.mssqltips.com/tip.asp?tip=1599](http://www.mssqltips.com/tip.asp?tip=1599)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-01T15:39:22.007

我将从 MSDN 帮助页面开始使用光标...

[http://msdn.microsoft.com/en-us/library/ms180169.aspx](http://msdn.microsoft.com/en-us/library/ms180169.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-01T15:41:52.723

我总是在管理工作室中使用内置的“Transact-SQL 参考”帮助。我发现那里的所有示例都足以满足我的需要。

# c# - 从另一个页面类访问页面类

> ID：935340
> 
> 赞同：0
> 
> 时间：2009-06-01T15:35:27.030
> 
> 标签：c#, asp.net

如何从另一个类访问页面类。例如我有：

```
public partial class MyPage : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    { }
} 
```

为什么我不能从 App_Code 文件夹中的另一个类访问它？

```
public class MyClass
{
    public MyClass() {}
    public void DoSomething(object o)
    {
         // The following line won't compile.
         MyPage page = o as MyPage;
    }
} 
```

* * *

我只是想通了（感谢 Fujiy），出于某种原因，网站项目就是这种情况，但 VS 中的 Web 应用程序项目不是问题。如果有人对原因有任何线索，请分享您的想法。谢谢 ：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-06-01T15:42:45.113

我认为您发布的代码没有任何问题，很可能您遇到了**命名空间**问题。

编辑：啊，刚刚注意到你提到这是一个网站项目。自从我决定开始其中一个以来已经有一段时间了 :) 但我相信这源于 App_Code 是运行时编译的事实。需要一个比我更好的人来解释*为什么*会产生问题，但长话短说，我通常会避免网站项目。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-01T15:48:21.273

你可以这样做，afaik：

```
System.Web.UI.Page page = System.Web.HttpContext.Current.Handler as System.Web.UI.Page; 
```

但是要小心你调用它的地方，因为很明显在你的代码中的不同点，页面将不可用。例如，global.asax 中的 Application_Start。

# javascript - Google Maps API - 地图不再显示

> ID：935345
> 
> 赞同：0
> 
> 时间：2009-06-01T15:37:04.050
> 
> 标签：javascript, google-maps, google-maps-markers, driving-directions

我为我工作的一家小公司设置了一个方向页面。它有一些标记，可以让人们从他们所在的地方获得前往该位置的路线。由于某种原因，该页面决定停止在浏览器中出现。我做了我能想到的任何事情，但没有任何效果。我不是最擅长 javascript 但老实说我不知道​​什么是不正确的。我确实尝试重新发布可能导致问题的关键思想，但没有奏效。下面我已经包含了该页面的链接：

alfordmotorsonline.com/directions.html

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-01T15:46:13.753

您的“initialize()”函数似乎没有被调用。尝试添加类似：

```
window.onload = function () {
    initialize();
} 
```

到你的javascript，看看是否有帮助。

# c# - BLL 错误最佳实践

> ID：935346
> 
> 赞同：2
> 
> 时间：2009-06-01T15:37:08.840
> 
> 标签：c#, asp.net, n-tier-architecture, 3-tier, bll

在 BLL 中返回业务规则错误的最佳实践是什么？我应该只引发异常并在表示层中捕获它们，我应该返回某种包含任何异常类型信息的对象吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-01T15:44:32.147

“回归”这个词在这里很棘手。

多层设计的主要优点是正交性。您应该能够从与您当前使用的 UI 完全不同的 UI 调用 BLL 中的类，并以完全不同的方式处理日志记录。

如果能够在没有用户干预或通知的情况下处理异常，您通常应该在 BLL 中这样做。如果需要引起用户注意或记录异常，让它冒泡到 UI，它可以实现通知和日志记录，而无需将此类内容构建到 BLL 中。

# tdd - TDD：从哪里开始第一个测试

> ID：935349
> 
> 赞同：14
> 
> 时间：2009-06-01T15:37:50.463
> 
> 标签：tdd, agile

所以我做了一些单元测试，并且有编写测试的经验，但我还没有完全接受 TDD 作为一种设计工具。

我目前的项目是重新设计一个现有系统，该系统生成序列号作为公司组装过程的一部分。由于查看了现有系统，我对当前的流程和工作流程有所了解。我还列出了新要求以及它们将如何修改工作流程。

我觉得我已经准备好开始编写程序了，我决定强迫自己最终从头到尾做 TDD。

但现在我不知道从哪里开始。（我还想知道我是否已经对用户的程序流程有所了解，从而欺骗了 TDD 过程。）

用户流程实际上是串行的，只是一系列步骤。例如，第一步是：

*   用户提交制造订单号并收到该订单物料清单的可序列化零件号列表

当用户选择其中一个零件编号时，下一步开始。

所以我想我可以把这第一步作为起点。我知道我想要一段代码，它接受制造订单号并返回零件号列表。

```
// This isn't what I'd want my code to end up looking like
// but it is the simplest statement of what I want
IList<string> partNumbers = GetPartNumbersForMfgOrder(string mfgOrder); 
```

阅读 Kent Becks 的示例书，他谈到了挑选小型测试。这似乎是一个相当大的黑匣子。它需要一个制造订单存储库，我必须爬取产品结构树才能找到该制造订单的所有适用部件号，而且我什至根本没有在代码中定义我的域模型。

因此，一方面这似乎是一个糟糕的开始——一个非常普遍的高级功能。另一方面，我觉得如果我从较低级别开始，我真的只是在猜测我可能需要什么，这似乎是反 TDD。

* * *

作为旁注...这是您使用故事的方式吗？

作为装配工，我想获得制造订单上的零件编号列表，以便我可以选择要序列化的零件编号

说实话，汇编程序永远不会这么说。装配工想要的只是完成制造订单的操作：

作为装配工，我想用序列号标记零件，以便我可以完成制造订单上的操作

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2009-06-01T16:13:23.330

下面是我将如何开始。假设您完全没有此应用程序的代码。

1.  定义用户故事及其带来的业务价值：“作为用户，我想提交制造订单号和该订单的零件号列表，以便我可以将列表发送到库存系统”
2.  从用户界面开始。创建一个非常简单的页面（假设它是一个 Web 应用程序），其中包含三个字段：标签、列表和按钮。这已经足够了，不是吗？用户可以复制列表并发送到 inv 系统。
3.  使用模式作为设计的基础，例如 MVC。
4.  为从 UI 调用的控制器方法定义一个测试。您在这里测试控制器是否正常工作，而不是数据是否正确：`Assert.AreSame(3, controller.RetrieveParts(mfgOrder).Count)`
5.  编写控制器的简单实现以确保返回某些内容：`return new List<MfgOrder>{new MfgOrder(), new MfgOrder(), new MfgOrder()};`例如，您还需要实现 MfgOrder 的类。
6.  现在您的 UI 可以正常工作了！工作不正确，但工作。因此，让我们期望控制器从服务或 DAO 获取数据。在测试用例中创建一个 Mock DAO 对象，并添加一个期望调用方法“partsDao.GetPartsInMfgOrder()”。
7.  使用该方法创建 DAO 类。从控制器调用方法。你的控制器现在完成了。
8.  创建一个单独的测试来测试 DAO，最后确保它从数据库返回正确的数据。
9.  继续迭代，直到完成所有工作。过一会儿，你就会习惯了。

这里的要点是将应用程序分成非常小的部分，并单独测试这些小部分。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-06-01T15:50:38.730

作为开始测试，这是完全可以的。有了这个，你定义了预期的行为——它应该如何工作。现在，如果您觉得自己比您想要的要大得多。.您可以暂时忽略此测试并编写一个更细粒度的测试，该测试将部分或至少在中途取出。然后是其他测试，这些测试将带您朝着通过第一个大测试的目标前进。在每个步骤中进行红绿重构。

我认为小型测试意味着您不应该在一次测试中测试很多东西。例如，在我使用 D 上的这些参数调用 Method1()、Method2() 和 Method3() 之后，组件 DA、B 和 C 是否处于 state1、state2 和 state3。每个测试都应该只测试一件事。您可以搜索 SO 以获得良好测试的质量。但我认为您的测试是一个小测试，因为它很**短并且专注于一项任务**- “从制造订单中获取零件编号”

**更新**：作为一个 To-Try 建议（来自 Beck 的书中的 AFAIR），您可能想坐下来在一张纸上列出 SUT 的单行测试列表。现在您可以选择最简单的（您有信心能够完成的测试。）以建立一些信心。或者您可以尝试一个您有 80% 的信心但有一些灰色区域（我的选择也是如此）的，因为它会帮助您一路了解 SUT。保留那些你不知道如何进行的最后......希望在更容易完成的时候它会更清楚。当它们变成绿色时，将它们一一清除。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-01T15:44:39.433

我认为你有一个良好的开端，但并不完全这么看。应该产生更多测试的测试对我来说完全有意义，就好像您考虑一下一样，您知道制造订单号或零件号是什么吗？你必须建立那些可能导致其他测试的东西，但最终你会开始我相信的小测试。

这是一个可能需要分解的故事：

*   作为用户，我想提交制造订单号并接收该订单物料清单的可序列化部件号列表

我认为关键是将事物一遍又一遍地分解成小块，从而构建整个事物。这种“分而治之”的技术有时很方便。;)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-06-01T15:50:04.487

好吧，当我第一次尝试 TDD 时，你遇到了完全相同的墙 :)

从那以后，我放弃了它，只是因为它使重构过于昂贵——而且我倾向于在开发的初始阶段进行很多重构。

抛开那些脾气暴躁的话，我发现 TDD 最受监督和最重要的方面之一是它迫使您在实际实现类接口之前定义它们。当您需要将所有零件组装成一个大产品（好吧，组装成子产品;））时，这是一件非常好的事情。在编写第一个测试之前，您需要做的是在编码之前准备好您的域模型、部署模型，最好是准备好一大块类图——仅仅是因为您需要识别不变量、最小值和最大值等.，在您可以测试它们之前。您应该能够从您的设计中在单元测试级别上识别这些。

Soo，根据我的经验（不是一些喜欢将现实世界类比映射到 OO 的作者的经验：P），TDD 应该是这样的：

1.  根据需求规范创建您的部署图（ofc，没有什么是一成不变的）
2.  选择一个用户故事来实施
3.  创建或修改您的域模型以包含此故事
4.  创建或修改你的类图以包含这个故事（包括各种设计类）
5.  识别测试向量。
6.  根据您在第 4 步中创建的界面创建测试
7.  测试测试（！）。这是非常重要的一步。。
8.  实现类
9.  测试类
10.  去和你的同事喝啤酒:)

# sql - 报告服务/支持强大的过滤

> ID：935354
> 
> 赞同：0
> 
> 时间：2009-06-01T15:39:01.413
> 
> 标签：sql, stored-procedures, reporting-services

我正在寻找一种“最佳实践”方法来解决这种常见情况。我认为这个问题最好用一个例子来问。让我们假设以下内容：

*   目标是编写一个“订单摘要”报告，该报告显示基于各种过滤标准的订单列表。
    *   示例：用户想要报告在 X 和 Y 日期之间创建的所有订单
    *   示例：用户想要报告所有状态为“open”的订单
    *   示例：用户想要报告其他用户 XYZ 生成的所有订单
    *   示例：用户想要报告 1000 美元到 10000 美元之间的所有订单
*   这些报告可能会从不同的页面启动，但可能会有一个“高级搜索”页面，允许他们检查/取消检查过滤器并定义参数

*   我想使用远程处理来生成报告

使用通过报表参数和报表过滤器实现的所有这些过滤器创建单个报表变得非常麻烦且难以维护。这让我相信我应该创建一个存储过程，它接受所有可能的过滤器值（如果结果集不应该被参数过滤，则为 NULL）。

你同意这个评价吗？

如果是这样，我不是 TSQL 专家，我想对如何实现这个存储过程有一些一般性的建议。到目前为止，我这样做是这样的：

1.  创建 orderID @resultset 的表变量
2.  最初通过第一个过滤器填充@resultset（我选择了开始和停止日期）
3.  对于每个过滤器：
    *   如果定义了过滤器，则创建一个表变量@tempresultset 并从@resultset WHERE 插入所有记录（过滤器适用）
    *   从@resultset 中删除，插入@resultset 从@tempresultset 中选择orderid
4.  应用所有过滤器后返回@resultset

这只是感觉不正确/高效......有没有更好的方法来解决这个问题？

任何其他关于如何解决这个一般问题的建议或建议将不胜感激。对于似乎应该是一个非常普遍的问题，我对实施此解决方案的正确方法感到有些迷茫。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-06-01T17:03:24.727

经过一番研究，我找到了一种在存储过程中的单个 select 语句中实现这些可选过滤器的好方法：

它看起来像：

```
SELECT ordernumber FROM orders
--Filter #1 - based on Parameter #1
WHERE (@param1 IS NULL) OR (somefield = @param1)
--Filter #2 - based on Parameter #2
AND WHERE (@param2 IS NULL) or (somefield2 = @param2)
--Filter #3 - based on Parameter #3
AND WHERE (@param3 IS NULL) or (somefield3 = @param3) 
```

# java - 如何从部署为 .war 文件并在 Tomcat 5.5 中运行的 servlet 访问配置文件？

> ID：935365
> 
> 赞同：1
> 
> 时间：2009-06-01T15:40:25.190
> 
> 标签：java, tomcat

我正在尝试从 .war 文件中的 servlet 访问配置文件。问题是，默认文件路径是 tomcat 根本身，并且硬编码文件路径似乎也不是一个选项。是否可以通过 ServletContext 或任何 Tomcat 变量获取任何信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-01T16:49:28.130

如果将文件放在特定 webapps 目录 (./webapps/{servlet}/classes) 下的“类”目录中，则可以通过执行以下操作从 Java 类内部访问它：

```
Class.getResourceAsStream(<filename>); 
```

所以如果你在 /webapps/myServlet/classes/conf.xml 有一个 conf 文件

```
Class.getResourceAsStream("conf.xml"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-01T17:33:06.843

甘道夫提供了“正确”的答案。您可以在任何地方安全地使用它。这就是你所需要的。

只是一个警告。有些人认为，因为有一些方法可以从 WAR 中读取数据，这意味着在 WAR 中写入数据也是可以的。从字面上看，有时确实如此。但不总是。而且它几乎从来都不是安全的。

我之所以提到这一点，是因为我继承了一个可以做到这一点的 webapp。在展开的 WAR 目录中存储了整个文件目录树。随之而来的第一个软件升级，“噗！” 所有那些精心上传的数据文件都不见了。

因此，将 WAR 视为只读的。如果您需要编写，请在应用服务器之外指定一个目录。最好作为 web.xml 文件中的可配置参数，这样您就可以使用 JNDI 来查找它，并且可以覆盖它以进行测试，而无需修改源代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-01T16:35:42.093

我完全不确定这是不是“正确”的事情，但在过去，我已经为我的配置文件的路径读取了一个环境变量。

像这样的事情（你应该比这个例子更好地处理异常......但你明白了）：

```
public File getConfigurationFile() {
   String envPath = System.getEnv("CONFIG_FILE"); // Use a better-named variable
   if(envPath == null || envPath.equals("") {
      throw new RuntimeException("CONFIG_FILE environment variable not set.");
   } else {
      File f = new File(envPath);
      if(!f.exists())  {
       throw new RuntimeException("CONFIG_FILE environment variable points to non-existent file");
      } else if(!f.isFile()) {
       throw new RuntimeException("CONFIG_FILE environment variable points to non-file entity.");
      } else if(!if.canRead()) {
       throw new RuntimeException("CONFIG_FILE points to unreadable file.");
      } else {
        return f;
      }
   }
} 
```

# sharepoint - 在 SharePoint 中使用 InfoPath 表单有什么好处？

> ID：935366
> 
> 赞同：3
> 
> 时间：2009-06-01T15:41:05.610
> 
> 标签：sharepoint, infopath

在 SharePoint 中使用 InfoPath 表单有什么好处？

我一直在研究 InfoPath 以了解它如何与 SharePoint 集成。让用户创建自己的表单的想法提供了强大的功能，并且可以使人们能够自己处理一些小请求。但是，除了创建由 InfoPath 表单驱动的表单库之外，InfoPath 似乎很快就会成为一个麻烦和障碍。当然，您可以构建代码以直接与 SharePoint 对象模型对话，但您似乎只能在浏览器中运行您的表单。

如果您要在浏览器中运行所有内容，为什么不直接使用 ASP.NET 表单呢？

此外，除了基本的表单库方法之外，InfoPath on SharePoint 还提供哪些其他好处？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-06-01T16:15:09.493

以下是 InfoPath 表单相对于 ASP.Net 表单的一些优势。当然，这始终取决于您的需求组合、开发人员、用户技能等。

*   对于熟悉 MS Office 的人来说，表单易于创建和修改
*   与 ASP.Net 表单不同，它们直接与 Sharepoint 中的元数据集成
*   Workflow Foundation 可通过 Sharepoint 获得，并且比使用 ASP.Net 表单更简单
*   如果您正在处理基于文档的流程（如工作订单、订单、权限请求），那么拥有文档存储库可能更有意义，而不是根据通过 ASP.Net 表单输入的数据构建报告结构
*   文档已准备好由 BizTalk 中实现的流程使用
*   验证和逻辑在客户端上运行，无需额外编程，多次提供比普通 ASP.Net 表单更好的用户体验

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-06-01T22:26:28.303

我喜欢将 Infopath 表单视为公司存在的古老的“word doc 中的表单”问题的一个很好的解决方案。它使创建和修改表单的任务更接近于关心信息的人。

在 Infopath 中有些任务难以完成，但这同样取决于创建表单的人的知识，而不是技术本身。

对于复杂和/或需要大吞吐量的表单，直接的 ASP.NET 表单*会*更合适。与往常一样，它是关于选择正确的（最便宜的总成本？）技术来解决问题，而不是从周围的任何东西中硬塞一个解决方案。（即，我对 InfoPath 的了解还不够，无法一直轻松地做出决定）。

# c++ - Photoshop 插件选项对话框 UI

> ID：935369
> 
> 赞同：0
> 
> 时间：2009-06-01T15:41:32.773
> 
> 标签：c++, photoshop

我正在为 photoshop 编写一个文件格式插件，我需要弹出一个窗口，其中包含加载和保存选项，例如复选框组合框等，我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-09T19:02:23.730

[Adobe](http://www.adobe.com/devnet/photoshop/)的最新SDK提供了许多使用对话框和窗口的示例。

在`Save`or`Save As`选项上，您的插件需要处理`formatSelectorOptionsStart`参数并在该代码块中打开您的选项对话框。

在`Open`操作上，没有正常的方式来提示选项（您会提示什么样的选项？）但是您可以显示对话框的事件包括：`formatSelectorFilterFile`、、、、和`formatSelectorReadPrepare``formatSelectorReadStart``formatSelectorReadContinue``formatSelectorReadFinish`

这是处理不同选择器的插件的示例入口点：

```
DLLExport MACPASCAL void PluginMain(
  const int16 selector,
  PIPickerParams* pParams,
  intptr_t * data,
  int16 * result)
{
    switch(selector)
    {
        case formatSelectorAbout:
            // display about dialog
            break;
        case formatSelectorReadPrepare:
            // prepare to read in file - adjust memory
            break;
        case formatSelectorReadStart:
            // begin interaction regarding reading 
            // dialog here if needed
            break;
        case formatSelectorReadContinue:
        case formatSelectorReadFinish:
        case formatSelectorOptionsPrepare:
            // handle each appropriately
            break;
        case formatSelectorOptionsStart:
            // HERE is where you'd open your window
            // with options, etc.
            break;
        // etc.
        // etc.
        // etc.
    }
} 
```

# sql - SQL 查询——从同一张表中的 1 条记录更新多条记录

> ID：935370
> 
> 赞同：0
> 
> 时间：2009-06-01T15:41:43.863
> 
> 标签：sql, sql-server, inner-join, sql-update

我们有一张位置表。同一个地方可能在我们的桌子上出现多次（糟糕的设计，不是我们的选择）。我们有人通过并找到每个地方的地址。他们只更新了每个地方的众多实例之一。

这是一个不起作用的查询，但我认为显示了我正在尝试做的事情。

```
update places set address1 = places2.address1 
inner join places places2 ON places.placename = places2.placename 
where (places2.address1 <> '' AND places2.address1 is not null) 
```

有人想在正确的方向上轻推我吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-06-01T15:44:53.083

```
update places set address1 = places2.address1 
from places inner join places places2 ON places.placename = places2.placename 
where (places2.address1 <> '' AND places2.address1 is not null) 
```

# .net - NHibernate 反射优化器 - 它有什么作用？

> ID：935376
> 
> 赞同：14
> 
> 时间：2009-06-01T15:42:25.690
> 
> 标签：.net, nhibernate

我发现每当我禁用 nhibernate 反射优化器时，初始化我的会话工厂会大大加快。这非常适合测试目的。

```
<add key="hibernate.use_reflection_optimizer" value="false" /> 
```

我的问题是这样做的连锁反应是什么，为什么它不是默认设置？一切*似乎*都一样。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-11-19T03:29:34.363

如果您想要的不仅仅是从手册中提到反射优化器的单个段落的复制粘贴，这里有一个很好的讨论[反射](http://jaychapman.blogspot.com/2007/11/nhibernate-access-performance.html)优化器的性能改进，以及对方法的简要讨论。

根据我有限的理解（这全部来自阅读，我没有进行任何实验，因此欢迎更正），不足之处在于实际上有两个反射优化器：

1.  [codedom](https://nhibernate.svn.sourceforge.net/svnroot/nhibernate/trunk/nhibernate/src/NHibernate/Bytecode/CodeDom/BytecodeProviderImpl.cs)，它基本上是生成然后编译的代码（即 nhibernate 为您的实体生成包装器 Getter/Setter 代码，然后编译它）。从外观上看，这只适用于公共成员，并且使用起来可能会*更加*昂贵，因为它天真地生成包装类（无论特定字段是否是公共的），尝试编译它并在失败时抛出异常。

2.  [轻量级代码生成](https://nhibernate.svn.sourceforge.net/svnroot/nhibernate/trunk/nhibernate/src/NHibernate/Bytecode/Lightweight/)，它使用反射的神秘实践来获取/设置值。这对我来说仍然是一个非常新的领域，但个人[对此](http://www.codeproject.com/KB/cs/Dynamic_Code_Generation.aspx)的实验表明，您可以使用 SRE 非常快速地操作私有变量，并且[源](https://nhibernate.svn.sourceforge.net/svnroot/nhibernate/trunk/nhibernate/src/NHibernate/Properties/)至少似乎为基本字段/属性提供发射，而不管访问修饰符。这是默认设置。

至于连锁效应 - 好吧，从[1](http://jaychapman.blogspot.com/2007/11/nhibernate-access-performance.html)中的闪亮图表来看，如果您在开发过程中持续/水合大量重物，它可能会非常重要。如果不是（我猜测您不在测试/开发期间），那么将其关闭似乎很明智。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-06-01T15:45:38.950

从[文档](http://nhforge.org/doc/nh/en/index.html#configuration-optional)中：

> 允许使用运行时生成的类来设置或获取实体或组件的属性，而不是使用运行时反射（系统级属性）。反射优化器的使用会给应用程序带来一定的启动成本，但从长远来看应该会带来更好的性能。您不能在 hibernate.cfg.xml 或应用程序配置文件的部分中设置此属性。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-06-01T15:46:01.197

来自[https://www.hibernate.org/hib_docs/nhibernate/html/session-configuration.html](https://www.hibernate.org/hib_docs/nhibernate/html/session-configuration.html)

允许使用运行时生成的类来设置或获取实体或组件的属性，而不是使用运行时反射（系统级属性）。反射优化器的使用会给应用程序带来一定的启动成本，但从长远来看应该会带来更好的性能。您不能在 hibernate.cfg.xml 或应用程序配置文件的部分中设置此属性。

# python - “__method__”和“方法”之间的区别

> ID：935378
> 
> 赞同：38
> 
> 时间：2009-06-01T15:42:31.820
> 
> 标签：python, methods

`__method__`和`method`和有什么区别`_method__`？

是否有任何或出于某种随机原因，人们认为`__doc__`应该像那样正确，而不是`doc`. 是什么让一种方法比另一种更特别？

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2009-06-01T15:51:12.490

*   `__method`: 私有方法。
*   `__method__`: 特殊的 Python 方法。它们这样命名是为了防止名称冲突。[查看此页面以获取这些特殊方法的列表。](http://www.python.org/doc/2.5.2/ref/specialnames.html)
*   `_method`：这是[Python 风格指南](http://www.python.org/dev/peps/pep-0008/)中推荐的受保护方法的命名约定。

从风格指南：

> *   `_single_leading_underscore`：弱“内部使用”指标。例如`from M import *`，不导入名称以下划线开头的对象。
>     
>     
> *   `single_trailing_underscore_`: 按照惯例使用以避免与 Python 关键字冲突，例如
>     
>     
>     
>     ```
>     Tkinter.Toplevel(master, class_='ClassName') 
>     ```
>     
>     
> *   `__double_leading_underscore`：当命名一个类属性时，调用名称修改（在类`FooBar`中，__boo 变为`_FooBar__boo`；见下文）。
>     
>     
> *   `__double_leading_and_trailing_underscore__`: 存在于用户控制的命名空间中的“神奇”对象或属性。例如`__init__`， `__import__`或`__file__`。永远不要发明这样的名字；仅按记录使用它们。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2009-06-01T18:12:20.947

*   `method`只是一种正常的方法
*   `_method`除非您知道自己在做什么，否则不应调用，这通常意味着您自己编写了该方法。
*   `__method`2 个下划线用于防止名称篡改。像这样的属性或方法可以通过`instance._ClassName__method`. 尽管很多人称其为“私人”，但它*不是*。您永远不应该使用它来阻止某人访问此方法，`_method`而是使用它。
*   `__method__`用于修改实例行为的特殊方法。不要这样命名你自己的方法。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-06-01T15:52:09.917

这些都是约定，因此无论如何都不会强制执行。不过，您通常可以期待：

```
__somename__ 
```

在 python 语言规范本身中定义的东西。不要在你自己的命名中使用它。

```
_somename 
```

这通常应该通过一些不同的机制而不是直接调用。类似于在大多数其他语言中声明私有内容，但不以任何方式强制执行。

```
__somename 
```

这*真的*不应该被直接调用，而是在内部被破坏以阻止你意外地这样做。如果您出于某种原因确实需要调用它，请查看文档以了解如何调用它。

以上任何一项都可以同样适用于函数、变量或类名。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-06-01T15:49:04.283

这些方法被这样命名是为了减少命名冲突的可能性。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-06-01T15:46:23.987

以双下划线开头和前缀的方法通常被标记为表明它们是 Python 语言规范的一部分。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-06-01T15:51:39.057

一些带有双下划线前缀和后缀的方法是特殊的。例如，`__init__`在创建该类的实例时`__str__`调用，并在要打印对象时调用。基本上，它们可以通过特殊方式调用。您可以像使用任何其他方法一样使用它们，也可以通过与它们关联的特殊方式调用它们。

我不知道双下划线全局函数（不属于任何类），但我认为没有。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-06-01T15:54:17.263

`__name__`指示“魔术”方法的模式。这些由各种函数调用，例如

```
str(x) -> x.__str__()
repr(x) -> x.__repr__()
x[0] -> x.__getitem__(0)
etc 
```

单个下划线前缀表示私有属性，并且仅遵循约定。

双下划线前缀启动名称修改，其中名为 __attr 的属性在实例化时更改为 __Class_attr。

您拥有的 _method__ 模式并没有真正用于任何事情。

# java - C 和 C++ 中的 JNI 调用不同？

> ID：935379
> 
> 赞同：31
> 
> 时间：2009-06-01T15:42:41.553
> 
> 标签：java, c++, c, java-native-interface

所以我在 C 中有以下代码，它利用了 Java Native Interface，但是我想将它转换为 C++，但我不确定如何。

```
 #include <jni.h>
 #include <stdio.h>
 #include "InstanceMethodCall.h"

 JNIEXPORT void JNICALL 
 Java_InstanceMethodCall_nativeMethod(JNIEnv *env, jobject obj)
 {
     jclass cls = (*env)->GetObjectClass(env, obj);
     jmethodID mid = (*env)->GetMethodID(env, cls, "callback", "()V");
     if (mid == NULL) {
         return; /* method not found */
     }
     printf("In C\n");
     (*env)->CallVoidMethod(env, obj, mid);
 } 
```

Java程序：

```
 class InstanceMethodCall {
     private native void nativeMethod();
     private void callback() {
         System.out.println("In Java");
     }
     public static void main(String args[]) {
         InstanceMethodCall c = new InstanceMethodCall();
         c.nativeMethod();
     }
     static {
         System.loadLibrary("InstanceMethodCall");
     }
 } 
```

JNI 与 C 和 C++ 交互的区别是什么？任何帮助是极大的赞赏。

谢谢，皮特

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2009-06-01T18:41:20.193

我曾经有书[Essential JNI](https://rads.stackoverflow.com/amzn/click/com/0136798950)。虽然它有点过时，但其中大部分在今天仍然有效。

如果我没记错的话，在 C 中，Java 构造只是指针。因此，在您的代码中，“ `(*env)->`”是取消引用指针以使您可以访问底层方法。

对于 C++，“ `env`”实际上是一个对象——与 C 指针不同的实体。（而JNI实际上可以为你的C++代码提供真实的对象来操作，因为C++实际上是支持对象的。）所以“ `env->`”在C++中有不同的含义，它的意思是“调用”指向的对象中包含的方法`env`。

我相信，另一个区别是许多 C-JNI 函数要求您的参数之一是“ `JNIEnv *env`”。所以在 C 中你可能不得不说`(*env)->foo(env, bar)`. `env`在 c++ 中，不需要第二次引用“ ”，因此您可以改为说“ `env->foo(bar)`”

不幸的是，我面前没有上面的书，所以我不能完全确认这一点！但我认为调查这两件事（特别是在谷歌或其他 JNI 代码中寻找它们）会让你走得很远。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-02-01T11:36:37.633

C 和 CPP 中的 JNI 调用之间的主要区别在于：

C 风格的 JNI 看起来像 (*env)->SomeJNICall(env, param1 ...)

C++ 风格的 JNI 看起来像 env->SomeJNICall(param1 ...)

所以要将其转换为 CPP 你需要做

```
Java_InstanceMethodCall_nativeMethod(JNIEnv *env, jobject obj)
{
    jclass cls = env->GetObjectClass(obj);
    jmethodID mid = env->GetMethodID(cls, "callback", "()V");
    if (mid == NULL) {
        return; /* method not found */
}
printf("In C++\n");
env->CallVoidMethod(obj, mid);
//rest of your code 
```

此外，请确保您的 JNI 函数遵循命名约定。

例子：

```
JNIEXPORT jint JNICALL Java_com_shark_JNITestLib_JNITestLib_startServer(JNIEnv* env, jobject o, jstring inputName, jstring streamName, jstring description) { 
```

可以看到约定是Java_(包名)_(类名)_(方法名)

因为上面的那个是在一个类中使用的

```
package com.shark.JNITestLib

import java.util.stuff;

public class JNITestLib 
{
    static
    {
        System.loadLibrary("myJNIlib");
    }

    public native synchronized int startServer(String inputName, String streamName, String description);

//more class stuff...
} 
```

在使用 JNI 时，我约定将包含 JNI 调用的类命名为与包相同的名称。这就是您看到 JNITestLib 两次的原因（这就是为什么我的 JNI 可以立即工作，因为我总是忘记如何正确命名 JNI 调用）

干杯，希望我帮助:)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-06-01T16:36:11.547

您是否尝试过将 C 代码包装在`extern "C"`. 请参阅[C++ Faq Lite](http://www.parashift.com/c++-faq-lite/mixing-c-and-cpp.html)了解更多信息，以及让您将 C 代码与 C++ 一起使用的其他可能机制。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-06-01T17:41:40.373

自从我接触标准 C++ 以来已经有一段时间了，但无论如何我都会尝试一下。

” `(*env)->`“我觉得很奇怪。那不应该只是“ `env->`”吗？

也许我错了，它应该可以工作，但为什么要让事情变得更复杂呢？

# jquery - Jquery +表单中的动态附加行

> ID：935382
> 
> 赞同：0
> 
> 时间：2009-06-01T15:42:51.570
> 
> 标签：jquery, forms

我正在创建一个表单，该表单在输入任何内容时将输入到表单字段中的数据动态插入到数据库中。我现在正在向表单添加动态行（即，如果用户需要添加额外信息，则复制现有行）。我遇到了两个问题。

我正在使用的代码基于以下内容：

```
function addFormField() {
$("#divTxt").append("<div id='education" + id + "'><input name='name' id='name' type='text' size='20'><a href='#' onClick='removeFormField(\"#education" + id + "\"); return false;'><img src='images/minus.gif' width='10px' border=0></img></a></div>");
} 
```

问题 1：原行（在插入下一行之前）工作正常，但我似乎无法弄清楚为什么新行甚至没有尝试使用输入模糊功能通过 $.post 发送数据。是因为所有这些都具有相同的名称，还是因为实际的 $.post 代码已加载到准备好的文档中，并且在单击事件后出现表单字段时忽略了这一点？

问题 2：要从新添加的行中插入数据，*如果*它们具有相同的名称/ID，我是否需要使用 jquery.each 来遍历表单字段？

好吧，在这一点上任何建议都会很好 - 它的头部抓挠时间！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-01T15:45:38.730

不要使用相同的 ID 和名称，您将朝着正确的方向前进。使用相同的 ID 不是有效的 HTML。

此外，当您发布数据（无论是使用 jQuery.serialize()）还是标准 POST 时，处理信息会容易得多。

```
function addFormField() {
$("#divTxt").append("<div id='education" + id + "'><input name='name' id='name' type='text' size='20'><a href='#' onClick='removeFormField(\"#education" + id + "\"); return false;'><img src='images/minus.gif' width='10px' border=0></img></a></div>");
} 
```

通过查看您的代码：您也可以使用 DOM 来引用您想要删除的字段。希望这消除了对您拥有的 ID 的需求。

这看起来像：

```
function addFormField(index) {
$("#divTxt").append("<div ><input name='name"+index+"' type='text' size='20'><a href='#' onClick='$(this.parentNode).remove()'><img src='images/minus.gif' width='10px' border=0></img></a></div>");
} 
```

# ruby-on-rails - Rails 与 django 文章有什么新的 ruby 吗？

> ID：935389
> 
> 赞同：0
> 
> 时间：2009-06-01T15:44:45.347
> 
> 标签：ruby-on-rails, django

我正在尝试在两者之间做出决定。我不太了解 ruby​​ 或 python。我发现了一些关于 SO 的文章。有推荐的网站吗？谷歌搜索只显示一两个。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-01T15:49:49.400

[我找到了几个。](http://www.google.com/search?q=rails+vs+django&ie=utf-8&oe=utf-8&aq=t&rls=org.mozilla:en-US:official&client=firefox-a) 结果第一页上链接的大多数（如果不是全部）文章应该提供足够的信息来帮助您做出明智的决定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-02T15:08:37.023

[SO搜索](https://stackoverflow.com/search?q=[django]+ror)似乎提供了足够的指针。

具体来说[，这个问题](https://stackoverflow.com/questions/91846/rails-or-django-or-something-else/644311#644311)有很多有趣的答案

# c# - 将 DataList 绑定到对象的方法而不是属性

> ID：935395
> 
> 赞同：1
> 
> 时间：2009-06-01T15:45:49.760
> 
> 标签：c#, asp.net, datalist

我有一个看起来像这样的类：

```
public class Person
{
  public string Name { get; set; }

  public string Thing() { 
    ...
  }

  ...

} 
```

如果我有一个`IList<Person>`用作 DataList 控件的数据源的，并且 DataList 看起来像这样：

```
<asp:DataList runat="server" RepeatColumns="1" ID="Profiles">
    <ItemTemplate>                                  
        <%#Eval("Name") %>          
    </ItemTemplate>
</asp:DataList> 
```

如何将数据源的`Name`属性替换为对数据源对象的`Thing()`方法的调用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-06-01T15:47:42.663

```
<%#((Person)Container.DataItem).Thing()%> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-01T15:48:00.713

使用属性。该属性将是“名称”（或其他），该属性上的“Getter”将是您希望用来生成值的方法。虽然您*可以*从这里调用函数，但我认为使用属性会更好。

# c# - 在 Visual Web Developer Express 中测试对 Web 服务不可用的输入字段

> ID：935400
> 
> 赞同：1
> 
> 时间：2009-06-01T15:46:31.337
> 
> 标签：c#, asp.net, web-services, visual-studio-express, visual-web-developer

我有一个 Web 服务，我正在尝试在 Visual Web Developer Express Edition（Service Pack 1）中进行测试。我正在使用来自 SVN 存储库的两个不同分支上的两个不同网站，但代码基本相同。Web 服务是相同的代码，但其他功能存在一些代码差异。

我的问题是，当以调试模式（即 MyWebService.asmx）进入 Web 服务规范页面时，应该有用于输入该 Web 服务参数的文本字段。在这些网站之一上，这些字段可用。另一方面，它们不可用。我不明白为什么/如何在两种设置之间存在任何差异。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-01T15:51:55.190

只有当 HTTP POST 可用作提交选项时，您才会获得字段，如果您的提交参数中有复杂类型，则 HTTP POST 可能无法处理它们，因此不会启用......然后字段将不会不能出现在帮助页面上。

# rss - 下载 Atom Rss Feed 的源代码

> ID：935404
> 
> 赞同：0
> 
> 时间：2009-06-01T15:47:06.080
> 
> 标签：rss, atom-feed

我有一个呈现 rss 提要的链接，有没有办法让 firefox 显示此链接的来源，而不是弹出“添加实时书签”对话框？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-01T16:02:52.020

`view-source`对于每个 URL，您可以通过添加两个魔术词来打开版本：

```
view-source:http://lebkowski.name/show/blog.atom 
```

适用于任何 URL/内容类型。仅基于壁虎。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-01T15:49:35.580

您可以对 Content-Type 撒谎并声称它是 text/plain。

我可能更倾向于创建源代码的 HTML 版本（带有语法突出显示）——但这取决于你想要非标准行为背后的原因。

值得指出的是，Firefox 3（至少）不显示对话框，它显示了一个 XSLTed-to-HTML 版本的提要，其中包括许多订阅选项（在顶部）。查看 → 源代码按您的预期工作，因此最终用户可以根据需要轻松访问源代码。

# continuous-integration - 在原始机器上持续集成和运行构建？

> ID：935417
> 
> 赞同：2
> 
> 时间：2009-06-01T15:49:28.340
> 
> 标签：continuous-integration

这个问题的两个部分。

1）作为我们持续集成构建过程的一部分，我想安装所有东西，就好像它是一台原始机器一样。马丁福勒论文：[http://martinfowler.com/articles/continuousIntegration.html](http://martinfowler.com/articles/continuousIntegration.html)

他的意思是我们进行每个（集成）构建（干净的机器）并安装所有必要的软件以使构建工作吗？我猜这就是他所说的“单一命令”构建的意思。

2）这很好地引导我进入下一个问题。是否可以通过命令行全部使用 Powershell/Dos 安装程序？例如，我将如何安装 WinRar 和可能的 MySQL？（Winrar 是一个简单的例子，MySql 很复杂）。

无论如何，我很想听听真实世界的 CI 从业者的意见，以及他们如何处理他们的构建过程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-01T15:56:00.913

在我构建的最新 CI 环境中，我在单个目录树下安装和配置了工具链和 SDK，然后创建了树的[ImageX WIM](http://technet.microsoft.com/en-us/library/cc722145.aspx)映像。然后，每个干净的构建都会挂载映像，从版本控制检查源，构建它们，运行测试等。卸载时，请记住不要将更改提交回映像，以便映像文件保持干净。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-01T22:07:46.113

[对于我们使用Zed](http://www.hericus.com/)进行的每个构建，我们都确保一个完全干净的*工作*环境，但假设整个工具链和实用程序应用程序已经安装在机器上。

如果您真的想达到原始机器的水平，那么我会同意laalto并研究VM。设置您的 VM 库以表示您的产品集所需的不同构建环境/配置，并在您需要构建不同产品时按需加载/启动它们。

我认为始终从干净的工作目录构建非常重要，但我会质疑始终尝试从裸操作系统开始并为每次构建从头开始安装所有内容的真正价值。

# ruby-on-rails - 如果我将 named_scope 与 :join 一起使用，它正在创建新对象

> ID：935421
> 
> 赞同：0
> 
> 时间：2009-06-01T15:49:42.567
> 
> 标签：ruby-on-rails, ruby, named-scope

免责声明：我最初接触 Ruby on Rails 确实是几年前的事了，现在我重新开始使用它，很多东西对我来说都是新的。其中之一是命名范围。它们看起来很棒，但我没有得到我期望的结果。这是一个例子：

```
class User
  has_many logs
  named_scope :logged_in, :joins => ['logs'], :conditions => ['logs.logout_at IS NULL']
end

Class Log
  belongs_to user
end 
```

据我了解，做一个

```
User.logged_in 
```

应该与做一个完全相同

```
User.find(:all, :joins => ['logs], :conditions => ['logs.logout_at IS NULL']) 
```

但相反，我得到了不同的对象。展示：

```
real = User.find_by_name('admin')
  #<User id:12345, name: 'admin' ... >
fake = User.logged_in.find_by_name('admin')
  #<User id: 54321, name: 'admin' ... > 
```

所以我的问题是：这个新对象到底是从哪里来的，我如何让 named_scope 给我原来的对象？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-06-01T17:55:03.173

```
named_scope :logged_in, 
            :conditions => ["logs.logout_at IS NULL"], 
            :include => :logs 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-01T16:10:53.783

看起来您有多个名为“admin”的用户

试试这个：

```
User.find_all_by_name('admin') 
```

# sql-server-2005 - SSRS 报告交互式查看器中的格式丢失

> ID：935423
> 
> 赞同：3
> 
> 时间：2009-06-01T15:49:58.590
> 
> 标签：sql-server-2005, reporting-services, reportingservices-2005

我有一个 SSRS 报告，其中包含两个运行良好的子报告。最近我在报告中添加了一些额外的表格部分，当报告显示在交互式查看器中时，我开始看到一个问题。数据很好，但最后两个表格部分的格式没有出现在查看器中。

格式实际上在倒数第二个报告中途停止工作。但是，当我打印报告（或导出为 PDF）时，所有格式都存在并且报告打印正常。

我尝试将报表拆分为更多子报表，使用不同的数据运行，但它仍然无法在交互式查看器中正确显示。报表和子报表确实有很多格式和表格部分，我想知道 RDL 文件是否太大而无法存储在内存中，或者它们是否确实存储在内存中。

主报表的 RDL 文件大小为 61 kB，子报表的 RDL 文件大小分别为 2612 kB 和 2608 kB。RDL 文件有大小限制吗？有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-06-01T20:40:07.223

我找到了解决我的问题的方法。如果我将报告直接呈现为 PDF，则报告将不会显示在交互式查看器中，而只会显示为正确显示的 PDF。这是通过在我从允许用户输入参数的 C# 程序调用 URL 时将“&rs:Format=PDF”添加到我的 URL 来完成的。然后用户可以打印报告，并且永远不会在交互式查看器中看到丢失的格式。这对我有用，但是，我仍然想知道是否有另一个答案可以让它在交互式查看器中正确查看，或者我是否已经超出了一些内存限制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-01T20:16:54.447

如果您将报告拆分为其组成部分，它是否显示正常？如果你说你最近添加了一些新的部分/子报告，如果你删除它们，它看起来又没问题。

您可能发生了一些奇怪的重叠，在报表设计器中，当报表符合时检查警告标签，看看它是否为您提供任何线索

# hibernate - JPA/Hibernate Parent-Child - Parent 和 Child 的 DAO 还是只是 Parent？

> ID：935426
> 
> 赞同：0
> 
> 时间：2009-06-01T15:50:08.513
> 
> 标签：hibernate, jpa

对于父子实体关系，何时（以及为什么）只为父级使用 DAO 接口，何时为子级创建 DAO？对我来说，如果孩子必须属于父母并且不应该作为孤儿存在，那么只为父母创建 DAO 是有意义的。

所以如果我想删除一个孩子，我会修改父母的孩子集，并调用 parentDAO.update(parent)。

此外，一般来说，是否有一些关于 Hibernate 最佳实践的好网站/书籍（即不学习 Hibernate 或开始示例）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-06-08T20:07:55.780

是否为子实体实现 DAO 取决于您的用例。例如，虽然用户实体可能不存在于帐户父级之外，但您可能希望重新激活用户并为父级帐户提供可导航性。

我发现 Manning 的[Hibernate in Action](http://www.manning.com/bauer/)为更高级的东西提供了一个很好的“食谱”类型参考。

# c# - 有什么方法可以确保函数是 JIT 编译的？

> ID：935430
> 
> 赞同：0
> 
> 时间：2009-06-01T15:51:23.207
> 
> 标签：c#, compilation, jit

我有一个函数，我想确保它是编译的 JIT（即在它被调用之前）。是否有可以确保这一点的属性或程序集设置？如果不是，那我怎么能保证一个函数是 JIT 编译的呢？

谢谢！

**编辑：**

我想这样做是为了防止我的应用程序由于缺少引用的程序集而崩溃。如果我的函数是 JIT 编译的，我可以将引用缺失程序集的函数调用包装在 try...catch 块中并优雅地处理这种情况。

据我了解，有时整个类（甚至整个应用程序）可能会被 Jitted - 这会导致我无法捕捉到的错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-01T16:21:30.023

如果我没看错，你会担心第一次编译类/方法时会发生错误。这需要对边界的认识。它可以通过额外的层获得。

如果 SuspectType 出现问题（即未加载所需的程序集），则下面的 try/catch 没有用，因为 Scenario1() 本身的 Jitting 将失败。

```
void Scenario1()
{
   try
   {
     var x = new SuspectType();
     ...
   }
   catch (..) { ... }    
} 
```

可以改写为

```
void Scenario1a()
{
   try
   {
      Scenario1b();
   }
   catch (..) { ... }    

}

void Scenario1b()
{
     var x = new SuspectType();
     ...
} 
```

但是，根据 Jon Skeet 的评论，我不确定这是否适用于 CFx。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-01T16:16:53.237

我可能回答错了问题，但看起来您主要希望能够拦截程序集加载失败（整个类被 JITted 击败了调用周围的 try/catch 保护，但这是在方法调用周围使用显式保护的副作用） .

如果您想捕捉程序集解析问题，而不是在每个可能的调用中指定一个 try/catch，您可以只监听全局 AssemblyResolve 事件并响应程序集加载失败（我们在这里讨论的是 .Net 程序集，本机 dll必须使用不同的机制来跟踪负载故障）。

```
static void Main()
{
    AppDomain.CurrentDomain.AssemblyResolve += OnResolveFailure;
    //...
}

static Assembly OnResolveFailure(object sender, ResolveEventArgs args)
{
    //Do something here...
} 
```

这样做的缺点是你不能做很多事情，除了在其他地方寻找程序集（或记录错误）。这种捕获负载故障的方式不提供解决失败时的特定和优雅的逻辑。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-01T18:47:13.473

这是您的应用程序需要自己解决的问题，还是您现在正在调试某种程序集加载问题？

如果是后者，请查看融合日志。这是由在运行时探测和加载程序集的子系统生成的日志。

这是一篇文章：[http ://www.hanselman.com/blog/BackToBasicsUsingFusionLogViewerToDebugObscureLoaderErrors.aspx](http://www.hanselman.com/blog/BackToBasicsUsingFusionLogViewerToDebugObscureLoaderErrors.aspx)

# java - Java：从通用列表/集合派生

> ID：935437
> 
> 赞同：1
> 
> 时间：2009-06-01T15:52:42.880
> 
> 标签：java, list, generic-list

我对 Java 语言的理解有点问题

```
public class PhonebookEntryList extends List<PhonebookEntry>
{
    public PhonebookEntryList(String filename) throws IOException
    {
        //loadListFromFilename(filename);
    }

    public void saveListToFilename(String filename) throws IOException
    {
        //Do something to save it to a file
    }
} 
```

我不能这样做，因为 List 是一个通用类型（当然）。我知道这意味着什么，但目前我想不出这个问题的解决方案。

你能帮我解决吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-06-01T15:55:47.887

不，您唯一的问题是您正在`extend`使用`interface`; 你必须`implement`改为。

```
public class PhonebookEntryList implements List<PhonebookEntry> 
```

应该管用; 或者您可能更喜欢扩展一个具体的类：

```
public class PhonebookEntryList extends ArrayList<PhonebookEntry> 
```

或者

```
public class PhonebookEntryList extends LinkedList<PhonebookEntry> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-06-01T15:56:22.507

你不能这样做，因为 List 是一个接口。但！您不应该扩展或实现 List 类来创建 PhonebookEntryList，这是设计错误。

你应该做：

```
public class PhonebookEntryList
{
    private List<PhonebookEntry> entries;

    public PhonebookEntryList(String filename) throws IOException
    {
        //loadListFromFilename(filename);
    }

    public void saveListToFilename(String filename) throws IOException
    {
        //Do something to save it to a file
    }
} 
```

即你的 PhonebookEntryList 应该包含一个列表而不是继承它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-01T15:55:57.467

`List<T>`是一个接口，而不是一个类，所以你不能从它继承。但是，您可以从泛型类型继承，提供类型参数，如果您希望创建，例如，具有特定类型的特定行为的特定类型的集合。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-01T15:58:13.020

如果您查看[JavaDoc for`List`](http://java.sun.com/javase/6/docs/api/java/util/List.html)，您会看到（正如其他人提到的）它是一个接口，而不是一个类。您最可能想要做的是在“所有已知的实现类”中查看同一个 JavaDoc 页面，您会看到`AbstractList`. 扩展这个。或者，扩展其中一个非抽象`List`实现。

注意：大多数情况下，当有人开始扩展 Java Collection 类之一时，您会走错路。通常，最好使用类中现有的集合之一并代理您需要的任何集合样式的请求。或返回您的收藏的不可修改的代理：

```
public class MyClass {
  private final List<PhonebookEntry> myList = new LinkedList<PhonebookEntry>();

  public List<PhonebookEntry> getList() {
    return Collections.unmodifiableList(myList);
  }
} 
```

通常，最好仅在您打算具有与要扩展的类不同的行为时才扩展类。继承比组合更脆弱。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-06-01T15:59:34.423

[`List<T>`](http://java.sun.com/javase/6/docs/api/java/util/List.html)是一个接口。

如果你想`extend`上课，你必须选择一个实现（[`ArrayList<T>`](http://java.sun.com/javase/6/docs/api/java/util/ArrayList.html)也许）：`extends ArrayList<PhonebookEntry>`

如果您想将`List`代码更改为：`implements List<PhonebookEntry>`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-06-01T16:00:02.863

您的问题是您正在尝试扩展接口而不是实现它。

构图就是你想要的。创建一个包装列表的类（或实现该接口的东西）

并添加功能。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-06-01T16:08:25.827

我应该提到 List 是一个接口而不是一个类吗？不。我想你现在明白了。

然而，我想指出，通常最好不要在列表类中嵌入持久性机制。有一种叫做访问者模式的东西效果更好。通过将实际的持久性代码放在一个单独的类中，应用程序的整体逻辑复杂性得到了降低（以额外的类为代价），并且您的电话簿变得自由，可以在依赖于看起来不错的持久性机制的地方使用当您第一次设计代码时，它看起来不再那么好了。例如，如果您想让电话簿成为 ORM 引用数据库中的一个项目。

# python - 将类实例转换为子类

> ID：935448
> 
> 赞同：3
> 
> 时间：2009-06-01T15:55:54.253
> 
> 标签：python, class, subclass, boto

我正在使用[boto](http://code.google.com/p/boto/)来管理一些[EC2](http://aws.amazon.com/ec2/)实例。它提供了一个实例类。我想对它进行子类化以满足我的特殊需求。由于 boto 提供了一个查询接口来获取您的实例，因此我需要在类之间进行转换。该解决方案似乎可行，但更改类属性似乎很狡猾。有没有更好的办法？

```
from boto.ec2.instance import Instance as _Instance

class Instance(_Instance):
    @classmethod
    def from_instance(cls, instance):
        instance.__class__ = cls
        # set other attributes that this subclass cares about
        return instance 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-06-01T20:03:39.997

我不会继承和转换。我认为选角从来都不是一个好政策。

相反，请考虑使用 Wrapper 或 Façade。

```
class MyThing( object ):
    def __init__( self, theInstance ):
        self.ec2_instance = theInstance 
```

现在，您可以`MyThing`根据需要进行尽可能多的子类化，并且您根本不需要进行强制转换`boto.ec2.instance.Instance`。它在您的对象中仍然是一个或多或少的不透明元素。

# objective-c - 如何正确获取对另一个类的引用？

> ID：935452
> 
> 赞同：0
> 
> 时间：2009-06-01T15:56:16.373
> 
> 标签：objective-c, iphone

我在 Appdelegate 中初始化了一些类，但是当我在另一个类中从 Appdelegate 中获取此类实例时，它具有“新鲜”状态。

我在 AppDelegate 中有以下内容：

界面：

```
@property (nonatomic, retain) DataController *dataController; 
```

执行：

```
@synthesize dataController;
- (id)init {
    if (self = [super init]) {
        DataController *controller = [[DataController alloc] init];
        self.dataController = controller;
        [controller release];
        NSLog(@"items: %d",[self.dataController numberOfItems]);
    }
    return self;
} 
```

此时 DataControlelr 类从数据库中加载对象。日志输出显示“项目：10”。

我有需要使用 DataController 的 TableViewController。

TableViewController 标头：

```
@interface TableViewController : UITableViewController {
    DataController *dataController;
}

@property (retain) DataController *dataController;
@end 
```

执行：

```
-(id)init{
    if (self =[super init]) {
        DataController *dc  =[(AppDelegate *)[[UIApplication sharedApplication] delegate] dataController];
        [dc retain];
        dataController = dc;
        NSLog(@"items: %d",[self.dataController numberOfItems]);
    }
    return self;
} 
```

这里总是说 DataController 有 0 个项目。“新鲜”状态。

日志输出总是

> 项目：10
> 
> 项目：0

似乎分配该类会以某种方式创建对新初始化的 DataController 的引用？

如何正确引用另一个类？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-01T16:15:18.260

首先要检查的是确保`dc`第二个类中的变量不为零——这将导致调用它的任何方法“返回”0。

从这两个方法中打印出应用程序委托的地址也可能很有用——以防万一该`-init`方法是由该类的某个错误分配的第二个实例引起的，而常规版本尚未初始化以同样的方式（或正在使用`-initWithCoder:`等）

对于在 nib 文件中创建或分配的对象的初始化，一个有用的经验法则是用于`-awakeFromNib`执行大多数初始化任务。一个推论是应用程序委托可以设置其状态以响应该`-applicationDidFinishLaunching:`方法。在这种情况下，如果在某处分配了 AppDelegate 类的第二个实例，则只有*真正*设置为应用程序委托的实例才会收到`-applicationDidFinishLaunching:`.

归根结底，单步调试调试器并查看调用堆栈应该会告诉您某些事情是否没有按照应有的方式发生。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-01T16:56:08.467

`dataController = dc`您在 TableViewController 中的分配可能有问题吗？在您使用的日志语句中`self.dataController`，您的分配应该直接在它上面`self.dataController = dc`吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-01T17:40:46.707

我找到了问题所在。坦克给吉姆！

将赋值从 -init 移至 -awakefromnib，现在 DataController 有效。

我的错误是，在最初将代码放入 -viewDidLoad 和 -viewWillAppear 之后，这是错误的，我认为在 -init 中是分配的位置。

# tsql - 编写递归存储过程

> ID：935455
> 
> 赞同：1
> 
> 时间：2009-06-01T15:57:05.377
> 
> 标签：tsql, variables, recursion, list

基本上我在存储过程中想要的是返回一个表列表，将此列表存储在一个变量中；我需要遍历列表中的每个项目以递归调用此存储过程。最后，我需要一个由这个递归构建的整体 listOfTables。非常感激任何的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-01T16:04:40.837

你可以使用`CTE`'s：

```
WITH  q (column1, column2) (
        SELECT  *
        FROM    table
        UNION ALL
        SELECT  *
        FROM    table
        JOIN    q
        ON      …
        )
SELECT   *
FROM     q 
```

但是，有不同的限制：您不能使用聚合、分析函数、`TOP`子句等。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-01T15:59:40.070

如果您使用的是 SQL2005 或更高版本，则应该查看[Common Table Expressions](http://msdn.microsoft.com/en-us/library/ms186243.aspx)（不确定它们是否可以在您的特定情况下提供帮助，但它是大多数递归查询的重要替代方案）。递归过程的嵌套深度不能超过 32 层，而且不是很优雅。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-01T16:05:53.613

您是在递归之后还是只是在所有表中循环？如果您使用的是 Sql Server 2005 并且想要遍历所有表，您可以在 SP 中使用表变量，请尝试以下几行：

```
declare @TableList as table (
    ID int identity (1,1),
    TableName varchar(500)
)

insert into @TableList (TableName)
select name
from sys.tables

declare @count int
declare @limit int
declare @TableName varchar(500)

set @count = 1
select @limit = max(ID) from @TableList

while @count <= @limit
    begin
        select @TableName = TableName from @TableList where ID = @count
        print @TableName --replace with call to SP

        set @count = @count + 1
    end 
```

将 替换`print @TableName`为对 SP 的调用，如果您不希望它在数据库中的每个表上运行，则将查询更改`select name from sys.tables`为仅返回您之后的表

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-01T16:14:05.547

CTE 很可能会满足您的要求。

如果您确实必须使用存储过程而不是查询，那么您所要做的就是遍历表列表，然后您可以使用您选择的代码来遍历表列表并调用该过程。并且宏已经在我输入大声笑时发布了如何做到这一点。正如 Mehrdad 已经告诉你的那样，SQL Server 允许的嵌套调用级别的数量是有限的，而且相当浅。从您的解释中我不相信您需要递归调用，它看起来更像是对列表的简单迭代，但是如果您确实需要递归，请记住 CS 101 类：*[任何递归算法都可以转换为非递归一种是使用循环迭代和堆栈](http://en.wikipedia.org/wiki/Recursion_(computer_science))*。

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2009-06-01T16:18:59.070

存储过程非常有用。但。

我最近不得不在一个严重依赖存储过程的系统上工作。这是一场噩梦。一半的业务逻辑使用一种语言（在本例中为 Java），另一半在数据库中的存储过程中。更糟糕的是，一半的应用程序处于源代码控制之下，而另一半是由于永久丢失而导致的数据库崩溃（糟糕的备份过程）。另外，我拥有的所有用于扫描、分析和维护源代码的可爱小工具都不能与数据库中的源代码一起使用。

我不是天生的反存储过程，但是哦，它们是如何被滥用的。当您需要对来自多个来源的数据执行规则时，存储过程非常适合，并且没有更好的方法可以将繁重的记录访问从网络服务器（并转移到 DBMS 服务器上）卸载。但在大多数情况下，我宁愿使用视图而不是存储过程和业务逻辑的应用程序编程语言。我知道这会让一些事情变得更复杂一些。但它可以让生活变得更轻松。

# asp.net - asp.net 本地化：报告缺失的翻译

> ID：935462
> 
> 赞同：0
> 
> 时间：2009-06-01T15:58:28.417
> 
> 标签：asp.net, localization

是否有可能以某种方式连接到本地化引擎以生成丢失翻译的日志？

我们有一个本地化的网络应用程序，但并非所有的键都有翻译。在缺少翻译的情况下，默认（在这种情况下为英语）将为用户显示。能够记录这些“失败”会很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-01T16:48:41.157

当然，您需要创建自定义资源提供程序。MSDN 上[的一些示例：扩展 ASP.NET 2.0 资源提供者模型](http://msdn.microsoft.com/en-us/library/aa905797.aspx#exaspnet20rpm_topic3)

# c - 段错误发生在什么时候？

> ID：935463
> 
> 赞同：3
> 
> 时间：2009-06-01T15:58:41.040
> 
> 标签：c, segmentation-fault

以下代码是否在数组 [10] = 22 或数组 [9999] = 22 处出现段错误？
我只是想弄清楚整个代码是否会在出现段错误之前执行。（在 C 语言中）。

```
#include <stdio.h>
int main(){

int array[10];
int i;
for(i=0; i<9999; ++i){
    array[i] = 22;
}    
return 0;    
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-06-01T16:02:46.280

这取决于......如果数组 [9] 之后的内存是干净的，那么什么都*不会*发生，直到一个人到达被占用的内存段。

试用代码并添加：

```
 printf("%d\n",i); 
```

在循环中，您将看到它何时崩溃和燃烧。我得到了各种结果，范围从 596 到 2380。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-06-01T16:08:11.663

使用[调试器](http://www.gnu.org/software/gdb/documentation/)？

```
$ gcc -g seg.c -o so_segfault
$ gdb so_segfault
GNU gdb 6.8-debian
Copyright (C) 2008 Free Software Foundation, Inc.
License GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.  Type "show copying"
and "show warranty" for details.
This GDB was configured as "i486-linux-gnu"...
(gdb) run
Starting program: /.../so_segfault 
Program received signal SIGSEGV, Segmentation fault.
0x080483b1 in main () at seg.c:7
7       array[i] = 22;
(gdb) print i
$1 = 2406
(gdb) 
```

事实上，如果你再次运行它，你会发现对于相同的 i 值，段错误不会总是发生。可以肯定的是，当 i>=10 时会发生这种情况，但是无法确定 i 的值会导致崩溃，因为这不是确定性的：它取决于内存的分配方式。如果内存在 array[222] 之前是空闲的（也就是没有其他程序使用它），它会一直持续到 i=222，但是对于 i>=10 的任何其他值，它也可能会崩溃。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2009-06-01T16:54:33.507

答案是也许。C 语言没有说明在这种情况下应该发生什么*。*这是未定义的行为。编译器不需要检测问题、做任何事情来处理问题、终止程序或其他任何事情。所以它什么也不做。

您写入不属于您的内存，实际上可能会发生以下三种情况之一：

*   你可能很幸运，只是得到一个段错误。如果您点击了未分配给您的进程的地址，则会发生这种情况。操作系统会检测到这一点，并向您抛出错误。
*   您可能会碰到真正未使用的内存，在这种情况下不会*立即*发生错误。但是如果内存被分配并稍后使用，它会覆盖你的数据，如果你希望它仍然在那里，你会得到一些很好的延迟操作错误。
*   您可能会遇到已经实际用于其他用途的数据。你覆盖它，很快，当需要原始数据时，它会读取你的数据，然后会出现不可预测的错误。

越界写作：只是不要这样做。当它发生时，C 语言不会做任何事情来告诉你，所以你必须自己留意它。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-06-01T16:16:10.757

您的代码何时以及是否崩溃是不确定的。这取决于您在哪个平台上运行代码。

`array`是一个堆栈变量，因此您的编译器将为它保留`10 * sizeof(int)`堆栈上的字节。根据编译器如何安排其他局部变量以及堆栈增长的方式，`i`可能会紧随`array`. 如果您按照 Daniel 的建议将`printf`语句放入其中，您可能会注意到一个有趣的效果。在我的平台上，when `i = 10`，`array[10] = 22`clobbers`i`和下一个任务是 to `array[23]`。

当用户代码试图触摸它无权访问的页面时，就会发生分段冲突。在这种情况下，如果您的堆栈足够小以至于 9999 次迭代用完堆栈，您将得到一个。

如果您已经`array`在堆上分配（通过使用`malloc()`），那么当您跑出页面边界的末尾时，您将获得一个 SIGSEGV。即使是 10 字节的分配也会返回一整页。页面大小因平台而异。请注意，一些 malloc 调试器可以尝试标记数组越界情况，但除非您在页面末尾运行时涉及硬件，否则您不会获得 SIGSEGV。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-06-01T16:09:20.833

您的代码将在哪里出现段错误取决于您使用的编译器、运气以及相关程序的其他链接细节。您很可能*不会*为`i == 10`. 即使那在您的数组之外，您几乎可以肯定仍然会在该位置为您的进程分配内存。但是，当您不断超出数组边界时，您最终会留下分配给进程的内存，然后出现段错误。

但是，如果您写入超出数组边界，您可能会覆盖同一堆栈帧中的其他自动变量。如果这些变量中的任何一个是指针（或稍后使用的数组索引），那么当您引用这些现已损坏的值时，您可能会出现段错误。（取决于损坏的确切值以及您现在是否要引用未分配给您的进程的内存。）

这不是非常确定的。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-06-01T16:16:24.330

访问进程外的专用内存时会发生分段错误，这不容易预测。当 i == 10 它在数组之外..但可能仍然在进程的内存中。这取决于进程内存是如何分配的，这是无法（通常）知道的（取决于操作系统的内存管理器）。所以段错误可能发生在 i = 10 - 9999 中的任何一个，或者根本不发生。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-06-01T16:04:33.813

我建议使用 GDB 来调查此类问题：[http ://www.gnu.org/software/gdb/documentation/](http://www.gnu.org/software/gdb/documentation/)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-06-01T16:15:26.467

更一般地说，您可以通过使用调试器找出 Linux 系统中发生分段错误的位置。例如，要使用 gdb，请使用 -g 标志编译带有调试符号的程序，例如：

```
gcc -g segfault.c -o segfault 
```

然后，使用您的程序和使用 --args 标志的任何参数调用 gdb，.g.：

```
gdb --args ./segault myarg1 myarg2 ... 
```

然后，当调试器启动时，键入`run`，您的程序应该会一直运行，直到它收到 SIGSEGV，并且应该告诉您它在收到该信号时在源代码中的位置。

# multithreading - 并行化：pthreads 还是 OpenMP？

> ID：935467
> 
> 赞同：44
> 
> 时间：2009-06-01T15:59:22.163
> 
> 标签：multithreading, optimization, pthreads, openmp

科学计算领域的大多数人在共享内存并行化方面使用 OpenMP 作为准标准。

是否有任何理由（除了可读性）在 pthreads 上使用 OpenMP？后者似乎更基本，我怀疑它可能更快更容易优化。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2009-06-01T16:10:52.567

它基本上归结为您希望对并行化进行何种级别的控制。如果您想要做的只是添加一些#pragma 语句并很快拥有代码的并行版本，那么 OpenMP 非常棒。如果你想用 MIMD 编码或复杂的队列来做真正有趣的事情，你仍然可以用 OpenMP 来做这一切，但在这种情况下使用线程可能要简单得多。OpenMP 在可移植性方面也有类似的优势，因为许多不同平台的编译器现在都支持它，就像 pthreads 一样。

所以你是绝对正确的——如果你需要对并行化进行微调控制，请使用 pthreads。如果您想以尽可能少的工作进行并行化，请使用 OpenMP。

不管你决定走哪条路，祝你好运！

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2009-06-20T14:24:46.607

另一个原因：OpenMP 是基于任务的，Pthreads 是基于线程的。这意味着 OpenMP 将分配与内核数相同的线程数。因此，您将获得*可扩展*的解决方案。使用原始线程来做到这一点并不是一件容易的事。

第二种意见：OpenMP 提供缩减功能：当您需要在线程中计算部分结果并将它们组合时。您可以仅使用单行代码来实现它。但是使用原始线程你应该做更多的工作。

想想您的需求并尝试理解：OpenMP 是否足以满足您的需求？您将节省大量时间。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2009-12-29T20:41:15.093

OpenMP 需要一个支持它的编译器，并且可以使用编译指示。这样做的好处是，在没有 OpenMP 支持的情况下编译时（例如 PCC 或 Clang/LLVM，截至目前），代码仍然可以编译。另外，看看[Charles Leiserson 写的关于 DIY 多线程](https://software.intel.com/en-us/articles/the-folly-of-do-it-yourself-multithreading)的文章。

Pthreads 是库的 POSIX 标准（[IEEE POSIX 1003.1c](http://opengroup.org/onlinepubs/009695399/basedefs/pthread.h.html)），而[OpenMP 规范](http://openmp.org/wp/openmp-specifications/)将在编译器上实现；话虽如此，有多种 pthread 实现（例如 OpenBSD rthreads、NPTL）和许多支持 OpenMP 的编译器（例如带有 -fopenmp 标志的 GCC，MSVC++ 2008）。

只有当有多个处理器可用并且代码针对可用处理器的数量进行了优化时，Pthreads 才对并行化有效。因此，OpenMP 的代码更易于扩展。您也可以混合使用 OpenMP 编译的代码和使用 pthread 的代码。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-22T11:56:26.197

您的问题类似于“我应该编程 C 还是程序集”的问题，C 是 OpenMP，程序集是 pthread。

使用 pthreads，您可以进行更好的并行化，更好地适应您的算法和硬件。不过，这将是很多工作。

使用 pthreads 也更容易生成并行性较差的代码。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-06-13T22:32:24.507

> 是否有任何理由（除了可读性）在 pthreads 上使用 OpenMP？

迈克有点提到这一点：

> OpenMP 在可移植性方面也有类似的优势，因为现在许多不同平台的编译器都支持它，就像 pthreads 一样

[Crypto++](http://www.cryptopp.com/)是跨平台的，意味着可以在 Windows、Linux、OS X 和 BSD 上运行。它使用 OpenMP 在操作可能很昂贵的地方提供线程支持，例如模幂和模乘（以及可以执行并发操作的地方）。

Windows 不支持 pthread，但现代 Windows 编译器确实支持 OpenMP。因此，如果您想要移植到非 *nix 的，那么 OpenMP 通常是一个不错的选择。

* * *

正如迈克还指出的那样：

> 如果您想要做的只是添加一些#pragma 语句并很快拥有代码的并行版本，那么 OpenMP 非常棒。

下面是 Crypto++ 使用 Tweaked Roots 预计算 Rabin-Williams 签名中使用的一些值的示例，如 Bernstein 在[RSA 签名和 Rabin-Williams 签名中所述...](http://cr.yp.to/sigs/rwsota-20080131.pdf)：

```
void InvertibleRWFunction::Precompute(unsigned int /*unused*/)
{
    ModularArithmetic modp(m_p), modq(m_q);

    #pragma omp parallel sections
    {
        #pragma omp section
            m_pre_2_9p = modp.Exponentiate(2, (9 * m_p - 11)/8);
        #pragma omp section
            m_pre_2_3q = modq.Exponentiate(2, (3 * m_q - 5)/8);
        #pragma omp section
            m_pre_q_p = modp.Exponentiate(m_q, m_p - 2);
    }
} 
```

这符合 Mike 的观察 - 细粒度控制和同步并不是真正需要的。并行化用于加快执行速度，而源代码中的同步是免费的。

如果 OpenMP***不可***用，则代码简化为：

```
m_pre_2_9p = modp.Exponentiate(2, (9 * m_p - 11)/8);
m_pre_2_3q = modq.Exponentiate(2, (3 * m_q - 5)/8);
m_pre_q_p = modp.Exponentiate(m_q, m_p - 2); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-08-02T10:37:58.710

当您需要并行执行*相同的任务*（即在多个数据上）时，OpenMP 是理想的选择，它是一种 SIMD 机器（单指令多数据）。

当您想要并行执行（完全不同的）任务时需要 Pthreads，例如，在一个线程中读取数据并在另一个线程中与用户交互。

请参阅此页面：

[http://berenger.eu/blog/c-cpp-openmp-vs-pthread-openmp-or-posix-thread/](http://berenger.eu/blog/c-cpp-openmp-vs-pthread-openmp-or-posix-thread/)

# c# - 将用户控件转换为服务器控件

> ID：935468
> 
> 赞同：7
> 
> 时间：2009-06-01T15:59:26.280
> 
> 标签：c#, .net, user-controls, servercontrols

我想知道是否有人有将用户控件转换为 Web 控件的经验？

理想情况下，我想将一些设计工作交给其他人，他们会给我布置精美的用户控件。然后，我可以完成转换、编译、测试和部署的过程。

在 MS 提出神奇的“转换为服务器控制”选项之前，我似乎很容易从头开始重写。有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-06-01T16:06:09.383

您是否有理由*必须*将这些用户控件转换为服务器控件？请记住，可以将[用户控件编译为程序集](http://www.nathanblevins.com/Articles/Compile-a-Web-User-Control-into-a-DLL-.Net-c-.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-01T16:16:42.037

你是对的，这里没有灵丹妙药，但既然你已经有了一个用户控制，那就没那么难了。

1.  确保所有属性、事件等都在后面的代码中设置，因为完成后不会有任何标记
2.  创建一个新的服务器控件
3.  将所有事件处理和属性设置代码粘贴到新控件中
4.  覆盖每个子控件的 Render 方法调用传入提供的 HtmlTextWriter 的 RenderControl 方法

    ```
    protected override void Render(HtmlTextWriter writer)
    {
        TextBox box = new TextBox();
        //Set all the properties here
        box.RenderControl(writer);
        base.Render(writer);
    } 
    ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-22T15:32:08.010

我搜索了几个小时，发现了很多关于它的博客。

唯一对我有用的是这篇文章[https://blogs.msdn.microsoft.com/davidebb/2005/10/31/turning-an-ascx-user-control-into-a-redistributable-custom-control/](https://blogs.msdn.microsoft.com/davidebb/2005/10/31/turning-an-ascx-user-control-into-a-redistributable-custom-control/)。

它说具有给定限制**的自包含**，但没有提到代码隐藏必须包含在`ascx`文件中。

我使用了一个网站项目（不是 Web 应用程序！）并且必须将后面的代码**内联到 ascx 文件中，并且只使用控制指令，例如：**

```
<%@ Control Language="C#" ClassName="MyPackage.MyControl"%> 
```

所以基本上我只剩下一个文件供用户控制。当代码隐藏是一个单独的文件时，当我引用最终的 dll 时，所有控件的位置都为空。

我还尝试了[http://blog.janjonas.net/2012-04-06/asp_net-howto-user-control-library-compile-dll-file](http://blog.janjonas.net/2012-04-06/asp_net-howto-user-control-library-compile-dll-file)但通过反射找不到 ascx 文件。

# wcf - Silverlight 的最佳数据访问层

> ID：935479
> 
> 赞同：0
> 
> 时间：2009-06-01T16:01:13.643
> 
> 标签：wcf, web-services, silverlight-3.0, silverlight-2.0, ria

Silverlight 2 和 3 应用程序的最佳数据访问层策略是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-06-01T16:31:02.533

由于您在浏览器中运行，因此不应从客户端执行任何 DataAccess。客户端通常调用 Web 服务或 wcf 服务，并且该服务在选择如何进行数据访问方面有很大的自由度。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-06-04T08:53:48.227

如果您使用的是 Silverlight 3，您可以查看 .NET RIA 服务，它创建一个 DAL 包装器并提供对方法客户端的轻松访问。DAL 本身，取决于您如何定义该术语，可以是 EF、Linq2SQL、POCO 等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-12T16:17:27.000

如果您在同一个域中并且注意安全性，则可以使用 ADO.NET 实体数据服务。这里有一些资源

[http://www.microsoft.com/uk/msdn/screencasts/screencast/308/adonet-data-services-a-basic-silverlight-client.aspx](http://www.microsoft.com/uk/msdn/screencasts/screencast/308/adonet-data-services-a-basic-silverlight-client.aspx)

[http://msdn.microsoft.com/en-us/library/cc838234(VS.95).aspx](http://msdn.microsoft.com/en-us/library/cc838234(VS.95).aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-01T16:49:53.480

对于我处理过的每个需要数据访问的 Silverlight 应用程序，我都使用了 Web 服务（用 WCF 编写）。我所有的业务和数据访问逻辑都在这些服务中强制执行……让 Silverlight 做它最擅长的事情，即界面！

您可能还想查看[ADO.NET 数据服务](http://msdn.microsoft.com/en-us/data/bb931106.aspx)。根据我在 MIX09 周围听到的消息，应该会有一些很酷的东西从那里出来。

# c# - 用户控制事件未到达其处理程序

> ID：935481
> 
> 赞同：0
> 
> 时间：2009-06-01T16:01:35.173
> 
> 标签：c#, asp.net, controls

我正在尝试创建一个用户控件来包装 Membership API（一组自定义 Gridview 以更好地显示数据），并且虽然代码和控件在页面中运行良好，但当我将它们移动到 .ascx 时，事件停止向它发射。

```
<%@ Control Language="C#" AutoEventWireup="true" CodeBehind="CustomMembership.ascx.cs" Inherits="CCGlink.CustomMembership" %>
<asp:Panel ID="mainPnl" runat="server">
<asp:Label 
    id="lblError"
    ForeColor="Red" 
    Font-Bold="true"
    runat="server" />
<asp:GridView
    id="grdUsers"
    HeaderStyle-cssclass="<%# _headercss %>"
    RowStyle-cssclass="<%# _rowcss %>"
    AlternatingRowStyle-cssclass="<%# _alternatingcss %>"
    OnRowUpdating="grdUsers_RowUpdating"
    OnRowDeleting="grdUsers_RowDeleting"
    OnRowCancelingEdit="grdUsers_cancelEdit"
    autogeneratecolumns="false"
    allowsorting="true"
    AllowPaging="true"
    EmptyDataText="No users..."
    pagesize="<%# PageSizeForBoth %>"
    runat="server">
<!-- ...columns... -->
</asp:GridView>
<asp:Button
    id="btnAllDetails"
    onclick="btnAllDetails_clicked"
    text="Full Info"
    runat="server" />
<asp:GridView 
    DataKeyNames="UserName"
    HeaderStyle-cssclass="<%# _headercss %>"
    RowStyle-cssclass="<%# _rowcss %>"
    AlternatingRowStyle-cssclass="<%# _alternatingcss %>"
    id="grdAllDetails"
    visible="false"
    allowsorting="true"
    EmptyDataText="No users in DB."
    pagesize="<%# PageSizeForBoth %>"
    runat="server" />
<asp:Button
    id="btnDoneAllDetails"
    onclick="btnAllDetails_clicked"
    text="Done."
    Visible="false"
    runat="server" />
</asp:Panel> 
```

但是，前两个控件（gridview grdUsers 和按钮 btnAllDetails）中的任何事件都不会发生，我已经在调试器中验证了这一点。如果它们在 aspx 页面中出现得很好，为什么它们会在移动到 ascx 时死掉？

我现在在 aspx 中的代码是：

```
 <div class="admin-right">
    <asp:ScriptManager ID="sm1" runat="server" />
    <h1>User Management</h1>
    <div class="admin-right-users">
    <asp:UpdatePanel ID="up1" runat="server">
    <ContentTemplate>
        <cm1:CustomMembership
            id="showUsers" 
            PageSizeForBoth="9" 
            AlternatingRowStylecssclass="alternating"
            RowStylecssclass="row"
            DataSource="srcUsers"
            HeaderStylecssclass="header" 
            runat="server" />
    </ContentTemplate>
    </asp:UpdatePanel>
    </div> 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-06-02T18:53:57.923

[http://forums.asp.net/t/1102183.aspx](http://forums.asp.net/t/1102183.aspx)

这说明 CommandField 中的 ButtonType="Image" 存在问题。将条目更改为“链接”可解决此问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-01T20:12:56.030

您还没有说您是在构建网站还是 Web 应用程序 - 如果您正在构建 Web 应用程序，您是否在将控件移动到用户控件时检查了 .designer 文件是否已正确更新？

# php - 为什么以及如何在这个示例 PHP 代码中使用异常？

> ID：935490
> 
> 赞同：23
> 
> 时间：2009-06-01T16:03:26.717
> 
> 标签：php, exception, exception-handling, error-handling

我一直想知道为什么要在我的 PHP 中使用异常。我们来看一个简单的例子：

```
class Worker
{
 public function goToWork()
 {
  return $isInThatMood ?
  // Okay, I'll do it.
  true : 
  // In your dreams...
  false;
 }
}

$worker = new Worker;
if (!$worker->goToWork())
{
 if (date('l',time()) == 'Sunday')
  echo "Fine, you don't have to work on Sundays...";
 else
  echo "Get your a** back to work!";
}
else
 echo "Good."; 
```

我有理由对这种代码使用异常吗？为什么？代码将如何构建？

那么可能产生错误的代码呢：

```
class FileOutputter
{
 public function outputFile($file)
 {
  if (!file_exists($file))
   return false;
  return file_get_contents($file);
 }
} 
```

为什么我会在上述情况下使用异常？我有一种感觉，异常可以帮助您识别问题的类型，发生的问题，真的吗？

那么，我是否在这段代码中适当地使用了异常：

```
class FileOutputter
{
 public function outputFile($file)
 {
  if (!file_exists($file))
   return throw new Exception("File not found.",123);
  try
  {
   $contents = file_get_contents($file);
  }
  catch (Exception $e)
  {
   return $e;
  }
  return $contents;
 }
} 
```

还是说很穷？现在底层代码可以做到这一点：

```
$fo = new FileOutputter;
try
{
 $fo->outputFile("File.extension");
}
catch (Exception $e)
{
 // Something happened, we could either display the error/problem directly
 echo $e->getMessage();
 // Or use the info to make alternative execution flows
 if ($e->getCode() == 123) // The one we specified earlier
  // Do something else now, create "an exception"
} 
```

还是我完全迷失在这里？

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2009-06-01T16:12:19.103

## 我什么时候应该使用异常？

您使用异常来表示**异常**情况；也就是说，阻止方法履行其合同的事情，不应该发生在那个级别。

例如，您可能有一个方法，`Record::save()`它将对记录的更改保存到数据库中。如果由于某种原因无法做到这一点（例如，发生数据库错误，或数据约束被破坏），那么您可以抛出异常以指示失败。

## 如何创建自定义异常？

异常通常被命名为表明错误的性质，例如，`DatabaseException`. 您可以子类`Exception`化以这种方式创建自定义命名的异常，例如

```
class DatabaseException extends Exception {} 
```

（当然，您可以利用继承为该异常提供一些额外的诊断信息，例如连接详细信息或数据库错误代码。）

## 什么时候*不应该*使用异常？

再考虑一个例子；一种检查文件是否存在的方法。如果文件不存在，这可能*不会引发异常，因为该方法的目的是执行所述检查。*但是，打开文件并执行某些处理的方法*可能会*引发异常，因为文件应该存在等。

最初，并不总是很清楚某事什么时候是例外，什么时候不是例外。像大多数事情一样，随着时间的推移，经验会告诉你什么时候应该和不应该抛出异常。

## 为什么要使用异常而不是返回特殊的错误代码等？

异常的有用之处在于它们会立即跳出当前方法并向上调用堆栈，直到它们被捕获和处理，这意味着您可以将错误处理逻辑移到更高的位置，尽管理想情况下不会太高。

通过使用清晰的机制来处理失败案例，当发生错误时，您会自动启动错误处理代码，这意味着您可以避免处理必须检查的各种魔法哨兵值，或者更糟糕的是，全局错误标志区分一堆不同的可能性。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-06-01T16:11:23.190

我不是 PHP 程序员，但这看起来类似于 C#。

通常，如果这是一个不归路，你会想抛出错误。然后，您将能够记录一些事情以表明不可能发生的事情。

如果您可以判断该文件不存在，那么您可以这么说。在我看来，没有必要也抛出异常。

现在，如果找到了文件并且您正在处理它，并且说只上传了一半文件并且您无法毫无例外地告诉您，那么最好有。

我会说避免捕获所有异常“catch (Exception $e)”并按合同设计是一种很好的设计实践，就像您在前面的示例中所做的那样。首先，我会更具体地说明抛出的异常类型，然后在需要时从那里开始工作。否则，请远离 try->catch 和异常。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-06-01T18:02:02.633

**您决不能仅仅因为您调用了`file_exists()`**! 该功能`file_exists`不会打开文件，因此文件可能随时被删除、重命名或移动！

```
class FileOutputter
{
    public function outputFile($file)
    {
        if (!file_exists($file))
            return false;
        ///<--- file may be deleted right here without you knowing it
        return file_get_contents($file);//<-- then this will throw an error
            //if you don't catch it, you're program may halt.
    }
} 
```

我相信这更好：

```
class FileOutputter
{
    public function outputFile($file)
    {
        try{
            if (!file_exists($file))
                return false;
            return file_get_contents($file);
        }catch(Exception e){
            check_what_went_wrong_and_go_to_plan_B();
        }
    }
} 
```

（*编辑*：实际上尝试从头开始打开文件可能会更好。如果你成功了，那么你对文件有一个“锁定”，它不会消失。如果没有，然后捕获异常，看看是什么出错。

话又说回来，您可能会觉得这种级别的冗余只是愚蠢的。在那种情况下，我认为您根本不需要担心`try/catch`:)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-06-01T16:48:48.630

请注意，您的文件输出器代码无效，因为 file_get_contents($file) 不会引发异常。但是，如果文件不存在或由于某种原因无法访问，它会发出警告。此外，您正在从 outputFile 返回一个异常，而您可能应该只是让错误传播到调用堆栈。

但是，您可以在 php 中注册错误处理程序以在发生错误时抛出异常：

```
function exception_error_handler($errno, $errstr, $errfile, $errline ) {
    throw new ErrorException($errstr, 0, $errno, $errfile, $errline);
}
set_error_handler("exception_error_handler"); 
```

这样，任何导致错误的标准函数调用都会抛出异常。

因此，我会将 FileOutputter 更改为此（添加了上面的代码段）：

```
class FileOutputter
{
 public function outputFile($file)
 {
  if (!file_exists($file))
   throw new Exception("File not found.",123);

   return file_get_contents($file);  
 }
} 
```

调用代码则基本相同。

基本上规则是在发生错误时不返回异常 - 如果需要，您可以捕获它，并抛出自定义异常，但让异常上升到调用堆栈，直到您想要使用它。

# .net - 下拉列表和 gridview 行索引/选定值问题

> ID：935493
> 
> 赞同：0
> 
> 时间：2009-06-01T16:04:00.740
> 
> 标签：.net, asp.net, vb.net, gridview, drop-down-menu

我有一个带有以编程方式创建的下拉列表的网格视图。我想
访问选定的值和该行的 ID。我在***Gridview_RowDataBound***中创建了下拉列表，我可以使用单元格中的文本，但我的 addHandler 从未被触发。我在哪里给它添加处理程序。我相信我可以在 RowCreated 中为其分配 addhandler，但是如果在 rowdatabound 中创建按钮，我将如何设置添加处理程序？

```
Dim deptvalue As String
    Dim i As Integer = 0

    Dim ddlmgr As New DropDownList
    ddlmgr.AutoPostBack = True
    AddHandler ddlmgr.SelectedIndexChanged, AddressOf ddlmgr_SelectedIndexChanged
    ddlmgr.Items.Clear()
    ddlmgr.Items.Insert(0, "--Select a Manager--")
    ddlmgr.AppendDataBoundItems = True
    ddlmgr.DataTextField = "Name"
    ddlmgr.DataValueField = "number"
    ddlmgr.DataSource = SqlDataSource2
    ddlmgr.DataBind()

    deptvalue = e.Row.Cells(0).Text
    ddlmgr.Attributes.Add("onchange", "setDepart('" & deptvalue & "')")

    If e.Row.RowType <> DataControlRowType.Pager And e.Row.RowType <> DataControlRowType.Header And e.Row.RowType <> DataControlRowType.Footer Then
        e.Row.Cells(2).Controls.Add(ddlmgr)
    End If

    If e.Row.RowType <> DataControlRowType.Pager And e.Row.RowType <> DataControlRowType.Footer Then
        e.Row.Cells(0).Style.Add("display", "none")
    End If 
```

它最适合 Rowdata 绑定，因为我的下拉列表项不重复，但我需要能够使用我创建的 addhandler。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-01T18:56:25.593

我没有动态创建下拉列表，而是将控件添加到了gridview。通过这样做，我可以访问 Selected 值。然后我通过在下拉列表中添加一个 onchange 属性来设置隐藏值的值，该下拉列表将隐藏值设置为隐藏字段中的文本。以下是在 Gridview_RowDatabound 中：

```
 For i As Integer = 0 To GridView1.Rows.Count - 1

        Dim ddl As DropDownList = GridView1.Rows(i).FindControl("ddlmgr")
        Dim deptvalue As String = GridView1.Rows(i).Cells(0).Text

        ddl.Attributes.Add("onchange", "setDepart('" & deptvalue & "')")
    Next 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-01T16:18:45.983

不使用单元格文本，为什么不直接使用来自 rowDatabound 的 e.item.DataItem 来获取实际值？

# ruby-on-rails - 如何避免同一用户的多个答案？

> ID：935502
> 
> 赞同：2
> 
> 时间：2009-06-01T16:06:28.510
> 
> 标签：ruby-on-rails

我正在开发一个基于问题和答案的应用程序，并且我想防止注册用户对同一个问题发布多个答案。

我怎样才能做到这一点？放置此代码（即控制器、模型）的最佳位置在哪里？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-06-01T16:15:47.700

您需要进行两项检查，一项是在加载问题时查看该用户是否有答案。如果是这样，请不要向他出示答案表格。

第二，提交问题时，检查该用户是否已经有答案，如果有，则不要提交。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-01T16:18:21.240

获取用户ID，获取问题ID。检查是否有来自与问题 ID 对应的用户 ID 的答案。如果存在，说不！如果它不存在，则继续发布答案...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-01T16:24:16.153

您希望模型中的 validates_uniqueness_of 验证遵守规则 - [http://api.rubyonrails.org/classes/ActiveRecord/Validations/ClassMethods.html#M002110](http://api.rubyonrails.org/classes/ActiveRecord/Validations/ClassMethods.html#M002110)

我也同意 Ólafur 的观点，如果用户已经添加了答案，您不应该给用户添加答案的按钮。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-06-01T16:26:48.400

你有一个 question_id 和一个 user_id，那有什么问题呢？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-06-02T09:19:49.240

我终于写了这段代码：

```
 # Reply model
validates_uniqueness_of :user_id, :scope => :question_id

# Helper method
def user_has_replied(user, question)
  Reply.find( :first, :conditions => {:user_id => user.id, :question_id => question.id} )
end 
```

# linq-to-entities - linq to entity和linq to sql之间的区别

> ID：935505
> 
> 赞同：3
> 
> 时间：2009-06-01T16:06:50.227
> 
> 标签：linq-to-entities

> **可能重复：**
> [实体框架与 LINQ to SQL](https://stackoverflow.com/questions/8676/entity-framework-vs-linq-to-sql)

linq to entity 和 linq to sql 有什么区别？

为什么 linq to entity 应运而生？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-01T16:12:45.157

linq to sql 已停止。

linq to entity 是 MS 的新事物，将替换他们的 linq to sql 东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-01T16:18:20.053

Linq to SQL 用于使用 SQL Server 的直接查询，而不管使用实体框架。

Linq to Entities 是在使用 Microsoft 的实体框架时使用的 Linq，与数据库服务器无关。

# unit-testing - AspNetDevelopmentServerHost 属性的最佳实践是什么？

> ID：935506
> 
> 赞同：4
> 
> 时间：2009-06-01T16:06:55.517
> 
> 标签：unit-testing, web-applications, tfs, build-process

我们有一个 Web 应用程序项目（实际上有几十个......），它附有一个测试项目。在测试项目中，我有一个简单的单元测试，它练习了几种方法。

在本地运行，单元测试执行并工作。

但是，当我们的 TFS 构建服务器尝试执行测试时，它会失败并显示有关 AspNetDevelopmentServerHost 属性的路径无效的错误。其他团队成员可以很好地执行它。

问题是我的 TFS 工作区的根设置为 c:\projects\ 一个团​​队成员的设置为 c:\tfs2008\ TFS 构建服务器另一方面将 pathToWebRoot 变量设置为“c:\blahblah \Release_PublishedWebsites..." 这会导致路径错误。

由于我们拥有的项目数量众多，我不能让每个人在每次切换项目时都重置环境变量。

那么，关于在团队环境中对 Web 项目进行单元测试的最佳实践是什么？[MSDN 站点文章](http://msdn.microsoft.com/en-us/library/ms404875(VS.80).aspx)在真正的微软时尚中没有什么帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-11-30T23:55:38.643

您应该在or属性 `%pathtowebroot%\\WebSiteName` 的 ，<code>pathToWebApp 参数中指定字符串。`AspNetDevelopmentServer``AspNetDevelopmentServerHost`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-10T13:07:16.673

我们用：

```
<TestMethod(), _
 HostType("ASP.NET"), _
 AspNetDevelopmentServerHost("$(SolutionDir)\\MyWebProject", "/"), _
 UrlToTest("http://localhost:44444/")>
 Public Sub Test()
     AssertStuff();
 End Sub 
```

这`$(SolutionDir)`意味着它在每个人的环境中都可以正常工作，并且所有测试都可以签入。我们每次自动创建新测试时都必须更改它，但无论如何我们正在编写测试，所以这不是太难.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-12-14T17:51:21.000

可以在构建期间设置环境变量以更改路径并使其在本地环境中仍然工作。

*   [如何：参数化 Web 性能测试 Web 服务器的 URL](http://msdn.microsoft.com/en-us/library/ms184806.aspx)
*   [在团队环境中测试网站和 Web 服务](http://msdn.microsoft.com/en-us/library/ms243136%28VS.80%29.aspx)

# css - Firefox 扩展显示内联 css 类或 id 定义？

> ID：935509
> 
> 赞同：1
> 
> 时间：2009-06-01T16:08:16.217
> 
> 标签：css, firefox, firefox-addon

我使用 Firebug 和 Web Developer Firefox 扩展。我正在寻找并且我不确定它们是否存在于这些扩展中的一个功能是，当我查看网页源时，我想单击一个类或 id 名称，它会在某处显示该类或 id 的定义。不是 css 继承层次结构。只是特定的类或 id（如果存在）

例如：

.....我点击“标题”，我得到了css定义，或者它告诉我没有。我想过滤 css 树层次结构以仅显示该类。

任何扩展都可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-06-01T16:24:40.757

[Firebug](http://getfirebug.com/) [可以做到这一点](http://getfirebug.com/html.html)。打开 HTML 选项卡，选择您感兴趣的元素。查看样式选项卡下的萤火虫窗口的右侧框。在那里，您将看到通过 id、class 或任何其他类型的选择器应用于元素的每种样式。您还可以查看布局选项卡以查看所选元素的偏移量、边距、填充和宽度。

例如，在 StackOverflow 上，当我单击*body*元素时，我看到以下内容：

```
body {           /* File: all.css?v=3496 (row 1) */
    background:#FFFFFF none repeat scroll 0 0;
    color:#000000;
    font-family:Arial,Helvetica,sans-serif;
    font-size:80%;
    text-align:center;
}
body {           /* File: all.css?v=3496 (rad 1) */
    line-height:1;
}
/* + A lot of reset styles for all elements */ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2010-03-31T19:47:36.883

这不是从源头做的（我不相信），而是在页面上做的。CSSViewer 会有帮助吗？

[https://addons.mozilla.org/en-US/firefox/addon/2104](https://addons.mozilla.org/en-US/firefox/addon/2104)

# java - 如何避免 ResultSet 是 Java 中的关闭异常？

> ID：935511
> 
> 赞同：29
> 
> 时间：2009-06-01T16:09:13.283
> 
> 标签：java, sql, exception

一旦我的代码进入我的`while(rs.next())`循环，它就会产生`ResultSet`is closed 异常。是什么导致了这个异常，我该如何纠正它？

**编辑：**我注意到在我的代码中我正在`while(rs.next())`与另一个嵌套循环`(rs2.next())`，两个结果集都来自同一个数据库，这是一个问题吗？

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2009-06-01T16:24:12.503

听起来您在从第一条语句遍历结果集之前在同一连接中执行了另一条语句。如果您嵌套处理来自同一个数据库的两个结果集，那么您做错了。这些集合的组合应该在数据库端完成。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2009-07-27T14:23:11.770

这可能是由多种原因引起的，包括您使用的驱动程序。

a) 一些驱动程序不允许嵌套语句。根据您的驱动程序是否支持 JDBC 3.0，您应该在创建 Statement 对象时检查第三个参数。例如，我在使用 JayBird 驱动程序到 Firebird 时遇到了同样的问题，但代码在 postgres 驱动程序中运行良好。然后我将第三个参数添加到 createStatement 方法调用并将其设置为 ResultSet.HOLD_CURSORS_OVER_COMMIT，并且代码也开始在 Firebird 上正常工作。

```
static void testNestedRS() throws SQLException {

    Connection con =null;
    try {
        // GET A CONNECTION
        con = ConexionDesdeArchivo.obtenerConexion("examen-dest");
        String sql1 = "select * from reportes_clasificacion";

        Statement st1 = con.createStatement(
                ResultSet.TYPE_SCROLL_INSENSITIVE,
                ResultSet.CONCUR_READ_ONLY, 
                ResultSet.HOLD_CURSORS_OVER_COMMIT);
        ResultSet rs1 = null;

        try {
            // EXECUTE THE FIRST QRY
            rs1 = st1.executeQuery(sql1);

            while (rs1.next()) {
                // THIS LINE WILL BE PRINTED JUST ONCE ON
                                    // SOME DRIVERS UNLESS YOU CREATE THE STATEMENT 
                // WITH 3 PARAMETERS USING 
                                    // ResultSet.HOLD_CURSORS_OVER_COMMIT
                System.out.println("ST1 Row #: " + rs1.getRow());

                String sql2 = "select * from reportes";
                Statement st2 = con.createStatement(
                        ResultSet.TYPE_SCROLL_INSENSITIVE,
                        ResultSet.CONCUR_READ_ONLY);

                // EXECUTE THE SECOND QRY.  THIS CLOSES THE FIRST 
                // ResultSet ON SOME DRIVERS WITHOUT USING 
                                    // ResultSet.HOLD_CURSORS_OVER_COMMIT

                st2.executeQuery(sql2);

                st2.close();
            }
        } catch (SQLException e) {
            e.printStackTrace();
        } finally {
            rs1.close();
            st1.close();
        }

    } catch (SQLException e) {

    } finally {
        con.close();

    }

} 
```

b）您的代码中可能存在错误。请记住，您不能重用 Statement 对象，一旦您对同一个语句对象重新执行查询，与该语句关联的所有打开的结果集都将关闭。确保您没有关闭该语句。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2009-06-01T16:23:58.743

此外，您只能从每个语句中打开一个结果集。因此，如果您同时遍历两个结果集，请确保它们在不同的语句上执行。在一个语句上打开第二个结果集将隐式关闭第一个。 [http://java.sun.com/javase/6/docs/api/java/sql/Statement.html](http://java.sun.com/javase/6/docs/api/java/sql/Statement.html)

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2009-06-01T16:13:08.447

异常表明您的结果已关闭。`ResultSet.close()`您应该检查您的代码并查找您发出呼叫的所有位置。还要寻找`Statement.close()`和`Connection.close()`。当然，其中一个在被调用之前`rs.next()`被调用。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2009-06-01T16:13:16.107

您可能已经关闭了 the`Connection`或`Statement`that made the `ResultSet`，这也将导致`ResultSet`关闭。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2009-06-01T16:24:14.063

正确的 jdbc 调用应该类似于：

```
try { 
    Connection conn;
    Statement stmt;
    ResultSet rs; 

    try {
        conn = DriverManager.getConnection(myUrl,"",""); 
        stmt = conn.createStatement(); 
        rs = stmt.executeQuery(myQuery); 

        while ( rs.next() ) { 
            // process results
        } 

    } catch (SqlException e) { 
        System.err.println("Got an exception! "); 
        System.err.println(e.getMessage()); 
    } finally {
        // you should release your resources here
        if (rs != null) { 
            rs.close();
        }

        if (stmt != null) {
            stmt.close();
        }

        if (conn != null) {
            conn.close();
        }
    }
} catch (SqlException e) {
    System.err.println("Got an exception! "); 
    System.err.println(e.getMessage()); 
} 
```

只有在从结果集中获得结果后，您才能关闭连接（或语句）。最安全的方法是分`finally`块进行。但是`close()`也可能会疼痛`SqlException`，因此会出现另一个`try-catch`障碍。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2014-01-22T13:10:47.287

我得到了同样的错误一切都是正确的，只有我使用相同的语句接口对象来执行和更新数据库。分离后，即使用语句接口的不同对象来更新和执行查询后，我解决了这个错误。即摆脱这个不要使用相同的语句对象来更新和执行查询。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2012-06-07T10:06:10.537

检查您是否已将执行此代码的方法声明为`static`. 如果是`static`，则可能有其他线程正在重置`ResultSet`.

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2018-03-22T17:53:54.253

确保在运行 rs.next 之前关闭了所有的语句和结果集。**最后**保证这一点

```
public boolean flowExists( Integer idStatusPrevious, Integer idStatus, Connection connection ) {
    LogUtil.logRequestMethod();

    PreparedStatement ps = null;
    ResultSet rs = null;
    try {
        ps = connection.prepareStatement( Constants.SCRIPT_SELECT_FIND_FLOW_STATUS_BY_STATUS );
        ps.setInt( 1, idStatusPrevious );
        ps.setInt( 2, idStatus );

        rs = ps.executeQuery();

        Long count = 0L;

        if ( rs != null ) {
            while ( rs.next() ) {
                count = rs.getLong( 1 );
                break;
            }
        }

        LogUtil.logSuccessMethod();

        return count > 0L;
    } catch ( Exception e ) {
        String errorMsg = String
            .format( Constants.ERROR_FINALIZED_METHOD, ( e.getMessage() != null ? e.getMessage() : "" ) );
        LogUtil.logError( errorMsg, e );

        throw new FatalException( errorMsg );
    } finally {
        rs.close();
        ps.close();
    } 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2019-04-30T16:24:11.047

抛出A`ResultSetClosedException`有两个原因。

1.) 您打开了另一个与数据库的连接，但没有关闭所有其他连接。

2.) 您的 ResultSet 可能没有返回任何值。因此，当您尝试从 ResultSet 访问数据时，java 会抛出一个`ResultSetClosedException`.

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-09-16T20:29:38.533

当使用 ResultSet 而不是在 @Transactional 方法中时，也会发生这种情况。

```
ScrollableResults results = getScrollableResults("select e from MyEntity e");
while (results.next()) {
   ...
}
results.close(); 
```

如果 MyEntity 与其他实体有热切的关系。第二次调用 results.next() 会引发 ResultSet is closed 异常。

因此，如果您在具有急切关系的实体上使用 ScrollableResults，请确保您的方法以事务方式运行。

# xcode - MacOS 开发人员如何导航大型代码库

> ID：935516
> 
> 赞同：1
> 
> 时间：2009-06-01T16:11:12.537
> 
> 标签：xcode, macos

我是 MacOS 开发的新手。我想知道开发人员如何在 MacOS 上的大型代码库中导航代码？例如网络套件？我在 XCode 中内置了 webkit (c++)，但源代码导航不是那么好。我正在寻找类似 Eclipse 中的 Java 源代码导航的东西。例如显示类层次结构，例如特定方法的调用者？

任何人有任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-01T17:30:24.320

我认为您正在寻找的是`Groups & Files`侧栏中的“项目符号”项。

如果你双击它，会有更多的视图/过滤器，比如只显示你的项目的类：

[项目符号 http://img25.imageshack.us/img25/6709/symbolbrowserwebkit.png](http://img25.imageshack.us/img25/6709/symbolbrowserwebkit.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-01T17:19:45.097

[TextMate](http://macromates.com/)（商业程序）有一个项目浏览器，它比仅仅使用 XCode 来获得一个概览要好。要浏览许多文件以查看大型项目的布局，您需要一个好的文件管理器，例如[PathFinder](http://www.cocoatech.com/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2011-10-19T03:42:27.947

类浏览器可能会有所帮助。项目->类浏览器或Command+Shift+C

# iphone - 带有页面的 UIScrollView 内的 UIDatePicker

> ID：935521
> 
> 赞同：4
> 
> 时间：2009-06-01T16:12:25.857
> 
> 标签：iphone, objective-c, uidatepicker, scrollview

我有一个 2 页的 UIScrollView，我可以在它们之间水平滚动。但是，在我的一个页面上，我有一个 UIDatePicker，并且滚动视图正在拦截垂直触摸事件，因此我无法再操作日期选择器（除了通过单击或点击）。有没有办法告诉 ScrollView 将垂直触摸事件发送到日期选择器，但将水平触摸事件发送到滚动视图以切换页面？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2010-04-21T10:50:47.397

实际上，有一个比 Bob 建议的简单得多的实现。这对我来说非常有效。如果您还没有，您将需要子类化您的 UIScrollview，并包含此方法：-

```
- (UIView*)hitTest:(CGPoint)point withEvent:(UIEvent *)event
{
    UIView* result = [super hitTest:point withEvent:event];

    if ([result.superview isKindOfClass:[UIPickerView class]])
    {
         self.canCancelContentTouches = NO;  
         self.delaysContentTouches = NO;
    }
    else 
    {
         self.canCancelContentTouches = YES; // (or restore bool from prev value if needed)
         self.delaysContentTouches = YES;    // (same as above)
    }
    return result;
} 
```

我使用的原因`result.superview`是获得触摸的视图实际上是一个 UIPickerTable，它是一个私有 API。

干杯

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-07-02T07:13:03.740

我认为这个问题有两个部分。第一个是确定用户的意图，第二个是获得正确的控制以响应该意图。

## 确定意图

我认为重要的是要清楚用户的意图。想象一下这样的场景：用户开始触摸屏幕并将手指向左移动很远，但也向上移动了一点。用户可能打算滚动视图，根本不打算更改日期。滚动视图和更改日期都是不好的，尤其是当它移出屏幕时。因此，为了确定用户的意图，我建议使用以下算法：

当用户开始触摸屏幕时，记录起始位置。当用户的手指开始从该位置移开时，控件根本不应该做出反应。一旦触摸从起始位置移动超过某个阈值距离，确定它是水平移动还是垂直移动。如果它垂直移动，则用户打算更改日期，因此忽略移动的水平部分，只更改日期。如果它更水平地移动，则用户打算滚动视图，因此忽略移动的垂直部分并仅滚动视图。

## 执行

为了实现这一点，您需要在 UIScrollView 或日期选择器之前处理事件。可能有几种方法可以做到这一点，但特别想到一种方法：制作一个名为 ScrollingDateMediatorView 的自定义 UIView。将 UIScrollView 设置为此视图的子视图。覆盖 ScrollingDateMediatorView 的 hitTest:withEvent: 和 pointInside:withEvent: 方法。这些方法需要执行通常会发生的相同类型的命中测试，但如果结果是日期选择器，则返回 self。这有效地劫持了指定给日期选择器的任何触摸事件，允许 ScrollingDateMediatorView 首先处理它们。然后在各种 touches* 方法中实现上述算法。具体来说：

在 touchesBegan:withEvent 方法中，保存起始位置。

在 touchesMoved:withEvent 中，如果尚不知道用户的意图，则确定触摸是否已从起始位置移动得足够远。如果有，确定用户是否打算滚动或更改日期，并保存该意图。如果用户的意图是已知的并且是更改日期，则向日期选择器发送touchesMoved:withEvent 消息，否则向UIScrollView 发送touchesMoved:withEvent 消息。您必须在 touchesEnded:withEvent 和 touchesCancelled:withEvent 中做一些类似的工作，以确保其他视图获得适当的消息。这两种方法都应该重置保存的值。

一旦你让它正确传播事件，你可能不得不尝试一些用户测试来调整移动阈值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2011-08-20T20:02:06.577

真棒帮助山姆！我用它来创建一个简单的类别来调整方法（因为我在 UITableViewController 中执行此操作，因此必须做一些非常混乱的事情来子类化滚动视图）。

```
#import <UIKit/UIKit.h>

@interface UIScrollView (withControls)

+ (void) swizzle;

@end 
```

主要代码：

```
#import </usr/include/objc/objc-class.h>
#import "UIScrollView+withControls.h"

#define kUIViewBackgroundImageTag 6183746
static BOOL swizzled = NO;

@implementation UIScrollView (withControls)

+ (void)swizzleSelector:(SEL)orig ofClass:(Class)c withSelector:(SEL)new;
{
    Method origMethod = class_getInstanceMethod(c, orig);
    Method newMethod = class_getInstanceMethod(c, new);

    if (class_addMethod(c, orig, method_getImplementation(newMethod),
                        method_getTypeEncoding(newMethod))) {
        class_replaceMethod(c, new, method_getImplementation(origMethod),
                            method_getTypeEncoding(origMethod));
    } else {
        method_exchangeImplementations(origMethod, newMethod);
    }
}

+ (void) swizzle {
    @synchronized(self) {
        if (!swizzled) {

            [UIScrollView swizzleSelector:@selector(hitTest:withEvent:)
                                  ofClass:[UIScrollView class]
                             withSelector:@selector(swizzledHitTest:withEvent:)];
            swizzled = YES;
        }
    }
}

- (UIView*)swizzledHitTest:(CGPoint)point withEvent:(UIEvent *)event {
    UIView* result = [self swizzledHitTest:point withEvent:event]; // actually calling the original hitTest method

    if ([result.superview isKindOfClass:[UIPickerView class]]) {
        self.canCancelContentTouches = NO;  
        self.delaysContentTouches = NO;
    } else {
        self.canCancelContentTouches = YES; // (or restore bool from prev value if needed)
        self.delaysContentTouches = YES;    // (same as above)
    }
    return result;
}

@end 
```

然后，在我的 viewDidLoad 方法中，我刚刚调用了

```
[UIScrollView swizzle]; 
```

# crystal-reports - 如何在水晶报告中隐藏空白秒？

> ID：935529
> 
> 赞同：0
> 
> 时间：2009-06-01T16:14:20.710
> 
> 标签：crystal-reports

我的报告中有几个分组，并且基于公式，有时没有显示父分组的行。如果没有显示行，如何隐藏父分组？我将 SupressIfBlank 设置为 true ，但这似乎没有任何作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-01T16:30:37.167

我有点生疏，所以请耐心等待......

在组总计的部分属性中，有一个“抑制”设置，其中一个选项是一个让您编写公式的按钮（在我使用的最新版本中，如果空白则为蓝色，如果有则为红色写的公式）。单击此按钮，它将带您进入公式编辑器。写一些计算行数并返回布尔值的东西：零行为真，非零行为假。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-01T16:30:39.913

根据我在网上找到的[这个类似的问题](http://www.tech-archive.net/Archive/VB/microsoft.public.vb.crystal/2006-03/msg00166.html)，CR 似乎没有内置这个功能。那里提供的选项如下：

1.  重组报表的查询，以便在缺少详细记录时不返回组标题。就像您将公式下推到查询本身一样，这样标题就永远不会返回。
2.  计算每个标头的详细记录数。因此，您为标题的抑制字段制定了一个公式，如果详细计数为 0，则将其抑制。

其中任何一个都应该适用于大多数报告。不过，不知道如何实现它们的细节。

# xml - 如何使用 Microsoft XMLDOM 对内存中的 XML 进行排序？

> ID：935530
> 
> 赞同：0
> 
> 时间：2009-06-01T16:14:42.800
> 
> 标签：xml, sorting, msxml

除了使用 XSLT...

如何使用 Microsoft XMLDOM 对内存中的 XML 进行排序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-01T16:37:37.613

除了使用 XSLT 对 XML 进行排序之外，我不熟悉任何方法。

为什么 XSLT 不是一个选项？这很简单，不应该是性能破坏者。您可以在加载 XSLT 文档后缓存 FreeThreadedDOMDocument 对象，以避免每次都解析和编译 XSLT 文档。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-01T17:06:17.190

AFAIK，如果不使用 XSLT 将数据移动到新的（排序的）列表，就无法对内存中的 XML 进行排序。您可以将节点复制到排序列表，然后将节点按新顺序放回。确切的技术在一定程度上取决于您的开发软件。

# tfs - Scrum for Team System 是管理 Scrum 流程的好工具吗？

> ID：935535
> 
> 赞同：2
> 
> 时间：2009-06-01T16:15:28.073
> 
> 标签：tfs, scrum

我们已经使用传统的白板和 PostIt 笔记进行了几次冲刺，并准备继续将流程集成到我们的团队系统环境中。我们正在考虑的一种工具是 Conchango 的“团队系统 Scrum”（[http://www.scrumforteamsystem.com/en/](http://www.scrumforteamsystem.com/en/)）

有没有人在现实世界的 scrum 过程中尝试过这个工具？你的经历是积极的还是消极的？您认为该工具值得支付许可费吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-06-01T19:13:16.197

我们使用 Scrum For Team System 并喜欢它。它在合并 TFS 和 Scrum 流程方面确实做得很好。

我们还得到了任务板（您必须支付的部分），并且也非常喜欢。

即使使用 Scrum for Team System，通过 Visual Studio 进行的 TFS 也不适用于计划会议（尽管它可以用于站立会议）任务板在可视化剩余工作和移动它方面有很大帮助。

在我们获得任务板之前，我们会在计划会议上使用便笺，然后将它们输入到 TFS。即使任务板很好，如果你在计划会议上没有至少 2 个人在工作，那是不够的。我们有 3 台笔记本电脑供 5 + 1 人（scrum master）团队使用，效果很好。如果您没有，那么我仍然会考虑做便笺。

任务板允许您刷新并查看其他人正在输入的内容。我们将一台计算机连接到投影仪，以便其他人可以看到正在发生的事情。然后，我们所有人都像在便条上一样进行头脑风暴，但笔记本电脑上的人将数据输入到 TFS 中。

对我们来说，效果很好！

稍后注意：如果您确实选择了 Scrum For Team System 模板，那么我强烈建议您阅读流程指南。在我们坐下来阅读之前，我们必须弄清楚一些事情。尤其是关于如何处理缺陷（即，什么时候是 Bug，什么时候是 Sprint Back Log Item，回到“In Progress”）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-02T05:40:26.963

模板是免费的。只有任务板应用程序的费用不高。您可以在没有任务板的情况下使用模板，但我强烈建议您也使用它。我认为我的团队最大的优势是 ScrumForTeamSystem 模板集成到了 VS 中，并提供了与其他开发环境的无缝连接。

我们喜欢将 PBI 附加到签入并让它们显示在 Daily Build 报告中的能力。

如果你缺少你需要的东西，你可以启动 VS 模板编辑器，根据自己的喜好调整模板。对我们来说，我们在 PBI 模板中添加了“请求者”字段和“测试状态”字段。

让我们烦恼的两个缺点是 PBI 的“状态”与 SBI 的“状态”不同（PBI 上没有准备好测试）。我们在功能级别而不是任务级别进行测试/验证，并且想要跟踪 PBI 状态，因此我们必须添加自己的自定义字段。第二个问题是在 Sprint 级别没有针对 PBI 燃尽/上升的开箱即用报告。所以你看不到你在传递故事方面的表现，只有任务。你必须自己做。

我们并没有真正使用“Bug”模板（我们提供完美的代码:)）。不，真的，没有像 sprint 中的工作错误这样的东西。所以我们记录错误的唯一时间是客户在生产代码中发现它没有像宣传的那样工作的问题。

正如 Vaccano 所说，它在会议环境中的速度不如白板或便利贴，但如果你有几个人非常擅长使用该工具和几台笔记本电脑，你就可以让它工作。

我评估了几个产品，ScrumForTeamSystem 的简单性和价格无可匹敌。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-08T16:41:44.853

就像其他人所说的那样，请注意 Conchango 模板处理错误的方式非常不同。未发布的待办事项没有错误的想法不仅仅是一个建议；从字面上看，**没有办法**跟踪影响当前 sprint 工作的错误。我发现这个缺点超过了优点。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-08-08T05:09:22.337

如果您正在搜索在线白板，您可以查看 Scrum 工具[Agilo](http://www.agile42.com/cms/pages/agilo/)。它是专门为没有机会在“真正的”白板上工作的分布式团队构建的。有关快速信息，您可以观看此[视频。](http://www.youtube.com/watch?v=un6waqaiIJ0)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2010-06-29T17:39:10.630

VS 2010 模板的 3.0 版本改变了工具对 Scrum 建模的方式，以非常有效地支持多团队项目和大型项目中的典型交互。

无论版本如何，它目前都是我在 Microsoft 环境中的 Scrum 项目的默认答案。如前所述，任务板和（新的）ScrumMaster 的工作台也非常有价值！

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2010-12-17T15:06:45.733

我们构建了 Urban Turtle，它通过直观的 Web 界面扩展了 Microsoft ALM 平台，并简化了您的敏捷项目管理。通过直接在 Web 访问中提供任务板和计划板，您无需同步任何内容。安装是一个简单的过程。2 分钟安装到 Web 访问服务器上。在客户端桌面上无需设置任何内容。

不要相信我的话，看看微软的 Brian Harry 对产品的评价：

[http://blogs.msdn.com/b/bharry/archive/2010/10/21/urban-turtle-3-5-released.aspx](http://blogs.msdn.com/b/bharry/archive/2010/10/21/urban-turtle-3-5-released.aspx)

看看网站并将您的反馈发送给我

urbanturtle.com

多米尼克丹尼斯产品负责人。

# ios - 我可以使用哪些工具来制作 iPhone 应用截屏视频？

> ID：935540
> 
> 赞同：42
> 
> 时间：2009-06-01T16:16:34.890
> 
> 标签：ios, iphone, video

我需要为我的 iPhone 应用程序制作演示视频截屏视频……我指的[是](http://www.reddit.com/iphone/)Reddit iPhone 应用程序（右边的那个，不是 YouTube 视频）。

我假设最好的方法是使用屏幕录制实用程序录制模拟器，有人有其他方法吗？您成功使用了哪些工具？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2009-06-01T19:19:31.600

对于[此处](http://www.sunsetlakesoftware.com/picubed)的截屏视频，我在 iPhone 模拟器中运行了应用程序，并使用[ScreenFlow](http://www.telestream.net/screen-flow/overview.htm)将其全部记录下来。我不能高度推荐 ScreenFlow，因为它确实简化了整个过程。ScreenFlow 记录您的整个屏幕，但它提供了出色的编辑功能，可将视频裁剪为相关的 320 x 480（或 480 x 320）部分，以及淡入和淡出标题图形或字体。我还使用[SimFinger](http://github.com/atebits/SimFinger/tree/master)只是为了提供一个好的光标，但我看到 ScreenFlow 的最新版本现在内置了该功能。

对于麦克风，我实际上使用了 Rock Band 的 USB 麦克风。这是一款非常出色的[罗技麦克风](https://rads.stackoverflow.com/amzn/click/com/B0001H9L3O)，只要您将其插入 Mac 即可识别。

我需要对 MP4 输出进行一些后期处理，以确保视频可以在 iPhone 上本地播放。我使用 VisualHub 和 iMovie 制作了具有所有正确设置的 MP4 视频，以便在设备上播放。两者都有简单的 iPhone 导出配置文件。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-03-26T13:01:06.357

我很惊讶没有人提到 QuickTime 的内置截屏功能。这里[有一个关于如何在没有任何额外工具的情况下在 Mac OS 上制作“体面”的截屏视频的小指南](http://www.makeuseof.com/tag/quick-screencasting-using-quicktime-x-in-mac-snow-leopard/)。

和很多人提到的[SIMBL](http://www.culater.net/software/SIMBL/SIMBL.php)一起使用会有更好的效果。它不是一个截屏应用程序，而是一个让你的 iOS 截屏看起来更好的工具。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2009-06-01T16:26:36.607

Tweetie 的作者最近写了一篇[关于](http://atebits.tumblr.com/post/197564349/not-your-average-iphone-screencast)他所做的文章，以及他编写的一个名为[SimFinger](http://github.com/atebits/SimFinger/tree/master)的工具。是的，它确实记录了模拟器。如果我正在制作 iPhone 截屏视频，我会从那里开始。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2011-02-17T16:39:21.097

如果您可以在模拟器中拍摄，[SimFinger](http://github.com/atebits/SimFinger/tree/master)和[ScreenFlow就很棒。](http://www.telestream.net/screen-flow/overview.htm)

如果您必须在设备上拍摄（例如，当使用加速度计、GPS、相机等时），您目前必须求助于越狱世界。应用程序“Display Recorder”在 Cydia 商店中售价 5 美元，允许创建 iPhone 屏幕内容的 AVI 电影。这适用于所有应用程序。有一个[YouTube 视频](http://www.youtube.com/watch?v=F7m9YG2ZcYo)显示它。然后可以通过内置的网络服务器将电影文件上传到 YouTube 或从 iPhone 上下载。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2011-01-10T07:09:06.093

您可以尝试其中一种为数不多的集成解决方案。我知道一个叫“capsim”，还有一个叫“sound stage”

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2011-11-09T19:51:34.487

如果您不需要记录多点触控或加速度计，ScreenFlow 和“Snapz Pro X”等屏幕捕获应用程序可以正常工作。但是，如果这样做，则必须选择另一种解决方案。使用摄像机拍摄或使用 iSimulator，然后使用 ScreenFlow 和“Snapz Pro X”等应用程序记录模拟器。有关如何安装 iSimulator 的信息，请参阅[http://bobueland.com/cocos2d/?p=358](http://bobueland.com/cocos2d/?p=358)

另一个解决方案（我还没有测试过）是使用屏幕镜像。那就是如果你有 iPad2 或 iPhone4S。您需要购买 Apple Digital AV Adapter（截至 2011 年 11 月为 39 美元），然后您可以将 iPad 或 iPhone 屏幕镜像到外部屏幕上。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2010-01-13T10:05:14.710

对于带有 iPhone 广告效果的免费 Mac OS X 屏幕录制，您可以使用 Screenium 演示应用程序为您的 iPhone 模拟器录制完美的 30 秒视频，不受限制或叠加。一旦你开始从你的应用程序中赚钱，整个产品都很便宜。编码为 iPhone 格式提供了良好的轻量级输出。关闭 SimFinger 的鼠标。[您可以在3k Top Chinese Characters](http://www.pocketpowersoftware.com/3k/)观看示例视频。绝对使用 SimFinger 来添加逼真的光泽，以及用户期望的 iPhone 设备反射。

从长远来看，我将购买 iSimulate iPhone 应用程序，看看与 iPhone 的触摸屏交互而不是鼠标驱动截屏是否可以提供更流畅、更逼真的结果（如果您使用加速度计或多点触控，这也有优势）。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2010-05-04T09:07:48.563

我要使用的解决方案是 SimFinger 提供“手指”和 SnapZ Pro X 进行录制。[我从一本即将出版的关于 HTML 5](http://diveintohtml5.info/video.html)的书中读到了一段精彩的摘录，这使我确信我应该采取额外的步骤，将 SnapZ Pro 的 .mov 输出转码为 Ogg，以便在不支持 .mov 文件的浏览器中查看。获取 XiphQT Quicktime 组件（我会链接到它，但我目前无法发布多个链接 - 转到 xiph.org），QuickTime Player 7 将为您进行转码 - 不需要 QuickTime Pro！

ScreenFlow 看起来很棒，但我已经拥有 SnapZ Pro，目前无法证明 99 美元的合理性，因为我可以用我所拥有的以及一些免费下载来做到这一点。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2011-03-14T23:23:49.757

我在[这里](http://davidbeckblog.com/2009/10/iphone-screen-capture/)为 iPhone Simulator Capture 使用了这个免费的解决方案，这是一个[SIMBL](http://www.culater.net/software/SIMBL/SIMBL.php)插件，通过从 iPhone 模拟器捕获屏幕来工作。它有点原始，但价格很划算。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-05-25T17:52:09.193

对于任何想要使用免费提供的工具创建截屏视频的人，我知道有两种方法：

**一**：可以使用[CamTwist](http://camtwiststudio.com/)和[Adob​​e Flash Media Live Encoder](http://www.adobe.com/products/flash-media-encoder.html)创建 FLV 文件。详细信息[在我的博客上](http://whackylabs.com/rants/?p=538)。

**二**：可以使用[Jing](http://www.techsmith.com/jing.html)创建swf文件。 [这是我博客上的截屏视频之一](http://whackylabs.com/rants/?p=500)。另请注意，我没有在我的博客上显示完整的 iPhone 屏幕，但您可以轻松做到这一点。

# .net - .NET 枚举字符串值的符号常量

> ID：935544
> 
> 赞同：3
> 
> 时间：2009-06-01T16:17:14.000
> 
> 标签：.net, vb.net, enums, constants

我有一个我正在使用 VB.NET Windows 应用程序处理的相当无意义的代码列表。对于我为处理这些代码而编写的业务逻辑，我想使用有意义的常量（如`ServiceNotCovered`or `MemberNotEligible`）而不是原始代码（如`"SNCV"`and `"MNEL"`）。

据我所知，枚举只能映射到数值，而不是字符串。所以我能想到的最好的方法是一个静态类，它将常量公开为静态只读字符串字段，这些字段在内部设置为等于代码值，如下所示。

```
Public Class MyClass

    private _reasonCode as String()
    Public Property ReasonCode() As String
        'Getter and Setter...
    End Property

    Public Class ReasonCodeEnum
        Private Sub New()
        End Sub
        Public Shared ReadOnly ServiceNotCovered As String = "SNCV"
        Public Shared ReadOnly MemberNotEligible As String = "MNEL"
        'And so forth...
    End Class

End Class

'Calling method
Public Sub ProcessInput()
    Dim obj As New MyClass()
    Select Case obj.ReasonCode
        Case MyClass.ReasonCodeEnum.ServiceNotCovered
            'Do one thing
        Case MyClass.ReasonCodeEnum.MemberNotEligible
            'Do something different
        'Other enum value cases and default
    End Select
End Sub 
```

在上面的示例中，如果我可以定义`MyClass.ReasonCode`为具有 type会很好`ReasonCodeEnum`，但是我必须创建`ReasonCodeEnum`一个非静态类并给它一种设置和返回值的方法。

我想知道是否有一种方法可以使用内置的 Enum 功能来完成我正在做的事情，或者如果没有，这种类型的事情是否有任何标准设计模式。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-06-01T16:18:53.767

您可以将字符串放在字典中并找到等效`enum`值，而不是大`Select Case`语句：

```
Public Enum ReasonCode
    ServiceNotCovered
    MemberNotEligible
End Enum

Private mapping As New Dictionary(Of String, ReasonCode)
' Add the required mappings and look up the dictionary... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-01T16:30:39.897

两个选项建议自己：

1）使用枚举并为每个值添加描述属性。然后，您可以相当轻松地构建从值到描述的映射。

好处：

*   仍然是值类型
*   可以在 switch 语句中使用

缺点：

*   不是真的OO

2) 不要使用 .NET 枚举 - 使用更像 Java 枚举的东西。这基本上涉及使用私有构造函数编写公共不可变类并提供公共（只读）共享属性/字段。这里有一些 C# 来说明我的意思 - 希望你在阅读 C# 方面比我在编写 VB 方面做得更好 :)

```
public sealed class Reason
{
    public static readonly Reason ServiceNotCovered = new Reason("SNCV");
    public static readonly Reason MemberNotEligible = new Reason("MNEL");

    private readonly string code;

    private Reason(string code)
    {
        this.code = code;
    }

    public string Code
    {
        get { return code; }
    }
} 
```

现在，不幸的是，您无法打开它（至少在 C# 中没有——我不知道 VB 的 Select 是否更灵活），但是无论您在哪里切换，*都*值得考虑是否可以在枚举本身中提供相同的功能。这是一种很好的面向对象的思考方式。不同的原因可以通过多态性提供不同的功能。例如：

```
public class Reason
{
    public static readonly Reason ServiceNotCovered = new ServiceReason();
    public static readonly Reason MemberNotEligible = new EligibilityReason();

    private readonly string code;

    private Reason(string code)
    {
        this.code = code;
    }

    public string Code
    {
        get { return code; }
    }

    public abstract void DoSomething();

    private class ServiceReason : Reason
    {
        internal ServiceReason() : base("SVNC") {}

        public override void DoSomething()
        {
            // Whatever
        }
    }

    private class EligibiltyReason : Reason
    {
        internal EligibiltyReason() : base("MNEL") {}

        public override void DoSomething()
        {
            // Do something else
        }
    }
} 
```

然后，您可以通过创建与组一样多的派生类型将具有相似行为的不同原因“分组”在一起 - 调用者不必知道任何关于它们的信息。

这一切都假设 VB 的访问控制与 C# 的工作方式相同，嵌套类型能够访问其外部类的私有成员（特别是构造函数）。

就代码而言，这是一个相当冗长的解决方案，但它确实有助于在类型本身中保持与“枚举”相关的所有决策。但是，就它作为引用类型而言，还有另一个缺点-因此您需要以正常方式检查无效性。另一方面，枚举也不提供任何对错误值的真正防御——`Enum.IsDefined`如果你想检查一个参数，你必须使用它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-01T16:33:56.683

虽然它没有解决将字符串值分配给枚举的问题，但我认为这可能会像其他人指出的那样通过简单的字典来解决

```
Dictionary<string, MyEnum> StringEnumMap; 
```

您应该查看google code中的[Stateless 项目](http://code.google.com/p/stateless/)（我的首选）或codeplex 上的[Simple State Machine来封装逻辑。](http://simplestatemachine.codeplex.com/)它的冗长令人惊叹，我认为它可以完美地满足您的需求。来自无状态项目主页的示例：

```
var phoneCall = new StateMachine<State, Trigger>(State.OffHook);

phoneCall.Configure(State.OffHook)
    .Allow(Trigger.CallDialed, State.Ringing);

phoneCall.Configure(State.Ringing)
    .Allow(Trigger.HungUp, State.OffHook)
    .Allow(Trigger.CallConnected, State.Connected);

phoneCall.Configure(State.Connected)
    .OnEntry(t => StartCallTimer())
    .OnExit(t => StopCallTimer())
    .Allow(Trigger.LeftMessage, State.OffHook)
    .Allow(Trigger.HungUp, State.OffHook)
    .Allow(Trigger.PlacedOnHold, State.OnHold);

phoneCall.Configure(State.OnHold)
    .SubstateOf(State.Connected)
    .Allow(Trigger.TakenOffHold, State.Connected)
    .Allow(Trigger.HungUp, State.OffHook)
    .Allow(Trigger.PhoneHurledAgainstWall, State.PhoneDestroyed); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-06-02T18:47:58.777

您可以使用我在此处发布的代码在 VB.Net 中模拟任何类型的自定义枚举：
[使用反射获取类型的静态字段值](https://stackoverflow.com/questions/940002/getting-static-field-values-of-a-type-using-reflection/940340#940340)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-07-03T19:37:44.323

作为一个学习项目 最初的问题和小组的反应非常好。除了有一个使问题过于复杂的特定原因之外，为什么不直接使用常量呢？

```
Const ServiceNotCovered As String = "SNCV"
Const MemberNotEligible As String = "MNEL" 
```

上面的代码是一个简单的静态实现。如果在实际使用中更改或添加新值是可取的，并且/或者您希望不必重新编译 - 那么从外部数据资源设置值是另一种简单的选择。

另一种选择是简单地设置可以随意更改的字符串值。无论是简单的字符串、数组、字典还是其他许多方法——这里的基本概念是在代码中使用简单的描述性词语供程序员参考——用户（并且应该）完全不知道这种编码约定。

因此，这实际上是程序员的选择，仅受可重用性、更改频率、他人理解以及值的预期可变性水平等因素的限制。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-06-01T16:27:13.033

创建通用字典，其中键是字符串（或枚举），值是委托。按键调用字典，您可以执行绑定到它的操作。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-06-01T16:58:40.880

您可以有两个枚举，一个带有隐蔽常量，例如“NA”，另一个带有描述性常量，例如“NotAvailable”。含义相同的常量应该映射到相同的整数。枚举和整数之间的转换很容易，所以剩下的问题是如何在枚举和字符串之间轻松转换。

就是这样：

```
using System.ComponentModel;
...
EnumConverter conv = new EnumConverter( typeof( MyEnum ) );
...
conv.ConvertToString( ... );
conv.ConvertFromString( ... ); 
```

不能保证这会很快工作，但它会让你免于大型 switch 语句。

# sql - MySQL 通过查询转储

> ID：935556
> 
> 赞同：247
> 
> 时间：2009-06-01T16:19:17.353
> 
> 标签：sql, mysql, database

`mysqldump`单人可以吗`SQL query`？

我的意思是转储**整个**数据库，就像`phpmyadmin`您导出到`SQL`

* * *

## 回答 #1

> 赞同：320
> 
> 时间：2009-06-01T17:35:21.553

不是mysqldump，而是mysql cli ...

```
mysql -e "select * from myTable" -u myuser -pxxxxxxxxx mydatabase 
```

如果需要，您可以将其重定向到文件：

```
mysql -e "select * from myTable" -u myuser -pxxxxxxxx mydatabase > mydumpfile.txt 
```

更新：原始帖子询问他是否可以通过查询从数据库中转储。他问的和他的意思是不同的。他真的只想mysqldump所有表。

```
mysqldump --tables myTable --where="id < 1000" 
```

* * *

## 回答 #2

> 赞同：272
> 
> 时间：2010-02-18T14:57:38.893

这应该工作

```
mysqldump --databases X --tables Y --where="1 limit 1000000" 
```

* * *

## 回答 #3

> 赞同：89
> 
> 时间：2013-02-25T00:29:46.917

使用 where 查询转储表：

```
mysqldump mydatabase mytable --where="mycolumn = myvalue" --no-create-info > data.sql 
```

转储整个表：

```
mysqldump mydatabase mytable > data.sql 
```

笔记：

*   将`mydatabase`、`mytable`和 where 语句替换为您想要的值。
*   默认情况下，`mysqldump`将在其输出中包含`DROP TABLE`和`CREATE TABLE`语句。因此，如果您希望在从保存的数据文件恢复时**不删除表中的所有数据，请**确保使用该`--no-create-info`选项。
*   您可能需要在上面的示例命令中添加适当`-h`的`-u`、 和`-p`选项，以便分别指定所需的数据库主机、用户和密码。

* * *

## 回答 #4

> 赞同：77
> 
> 时间：2010-04-28T10:24:03.160

您可以像这样将查询转储为 csv：

```
SELECT * from myTable
INTO OUTFILE '/tmp/querydump.csv'
FIELDS TERMINATED BY ','
ENCLOSED BY '"'
LINES TERMINATED BY '\n' 
```

* * *

## 回答 #5

> 赞同：39
> 
> 时间：2011-08-19T18:06:29.330

您可以在 mysqldump 上使用 --where 选项来生成您正在等待的输出：

```
mysqldump -u root -p test t1 --where="1=1 limit 100" > arquivo.sql 
```

test.t1 中最多 100 行将从数据库表中转储。

* * *

## 回答 #6

> 赞同：13
> 
> 时间：2018-03-03T01:34:28.160

如果要将最后 n 条记录导出到文件中，可以运行以下命令：

```
mysqldump -u user -p -h localhost --where "1=1 ORDER BY id DESC LIMIT 100" database table > export_file.sql 
```

上面将最后 100 条记录保存到 export_file.sql 中，假设您要从中导出的表具有自动递增的 id 列。

您将需要更改用户、本地主机、数据库和表值。您可以选择更改 id 列和导出文件名。

* * *

## 回答 #7

> 赞同：9
> 
> 时间：2017-02-07T03:00:34.440

MySQL Workbench 在 GUI 中也巧妙地具有此功能。只需运行查询，单击导出/导入旁边的保存图标：

[![在此处输入图像描述](https://i.stack.imgur.com/6quCf.png)](https://i.stack.imgur.com/6quCf.png)

然后在列表中选择“SQL INSERT statements (*.sql)”。

[![在此处输入图像描述](https://i.stack.imgur.com/niYIb.png)](https://i.stack.imgur.com/niYIb.png)

输入名称，单击保存，确认表名，您将获得转储文件。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2014-10-20T10:01:44.570

结合上面的大部分内容是我真正的实际示例，根据 Meterid 和时间戳选择记录。我多年来一直需要这个命令。执行得非常快。

```
mysqldump -uuser -ppassword main_dbo trHourly --where="MeterID =5406 AND TIMESTAMP<'2014-10-13 05:00:00'" --no-create-info --skip-extended-insert | grep  '^INSERT' > 5406.sql 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-11-11T08:50:17.057

mysql 导出查询结果命令行：</p>

```
mysql -h120.26.133.63 -umiyadb -proot123 miya -e "select * from user where id=1" > mydumpfile.txt 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-10-12T12:33:47.947

如果您想从表中转储特定字段，这可能很方便

1/ 使用您的查询创建临时表。

```
create table tmptable select field1, field2, field3 from mytable where filter1 and fileter2 ; 
```

2/转储整个临时表。然后你有你的转储文件与你的特定领域。

```
mysqldump -u user -p mydatabase tmptable > my-quick-dump.sql 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2022-01-09T10:57:53.647

要转储特定表，

```
mysqldump -u root -p dbname -t tablename --where="id<30" > post.sql 
```

# css - 删除 Safari/Chrome 文本输入/文本区域发光

> ID：935559
> 
> 赞同：349
> 
> 时间：2009-06-01T16:22:06.857
> 
> 标签：css, cross-browser

我想知道当我使用 CSS 单击文本输入/文本区域时是否可以删除默认的蓝色和黄色发光？

* * *

## 回答 #1

> 赞同：636
> 
> 时间：2009-06-01T16:25:59.367

**编辑（11 年后）：除非您要提供后备以指示哪个元素处于活动状态，否则不要这样做。否则，这会损害可访问性，因为它实质上会删除显示文档中哪个元素具有焦点的指示。想象一下，作为一个键盘用户，并不真正知道可以与什么元素进行交互。让可访问性在这里胜过美学。**

```
textarea, select, input, button { outline: none; } 
```

尽管如此，有人认为保持发光/轮廓实际上有利于可访问性，因为它可以帮助用户查看当前关注的元素。

您还可以使用伪元素 ':focus' 仅在用户选择输入时定位输入。

演示：[https ://jsfiddle.net/JohnnyWalkerDesign/xm3zu0cf/](https://jsfiddle.net/JohnnyWalkerDesign/xm3zu0cf/)

* * *

## 回答 #2

> 赞同：94
> 
> 时间：2011-07-21T17:48:44.850

这种影响也可能发生在非输入元素上。我发现以下工作是更通用的解决方案

```
:focus {
  outline-color: transparent;
  outline-style: none;
} 
```

* * *

**更新：**您可能不必使用`:focus`选择器。如果你有一个元素，比如说`<div id="mydiv">stuff</div>`，并且你在这个 div 元素上得到了外发光，就像正常一样应用：

```
#mydiv {
  outline-color: transparent;
  outline-style: none;
} 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2009-06-02T07:15:48.960

在基于 webkit 的浏览器中调整 textarea 大小：

在 textarea 上设置 max-height 和 max-width 不会删除视觉调整大小句柄。尝试：

```
resize: none; 
```

（是的，我同意“尽量避免做任何破坏用户期望的事情”，但有时它确实有意义，即在 Web 应用程序的上下文中）

从头开始自定义 webkit 表单元素的外观：

```
-webkit-appearance: none; 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2014-08-29T20:43:15.280

[卡尔·W](https://stackoverflow.com/a/6780405/578288)：

> 这种影响也可能发生在非输入元素上。我发现以下工作是更通用的解决方案
> 
> ```
> :focus {
>   outline-color: transparent;
>   outline-style: none;
> } 
> ```

我将解释这一点：

*   `:focus`意味着它对焦点元素进行样式设置。因此，我们正在对焦点元素进行样式设置。
*   `outline-color: transparent;`表示蓝色光芒是透明的。
*   `outline-style: none;`做同样的事情。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2015-11-20T04:51:58.043

我在一个`div`有点击事件的地方遇到了这种情况，经过 20 次搜索后，我发现这个片段拯救了我的一天。

```
-webkit-tap-highlight-color: rgba(0,0,0,0); 
```

*这将禁用 webkit 移动浏览器中的默认按钮突出显示*

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2016-06-28T06:14:34.020

这是**关心可访问性**的人的解决方案。

请不要`outline:none;`用于禁用焦点轮廓。如果你这样做，你正在扼杀网络的可访问性。有一种可行的方法来做到这一点。

查看我写的[这篇文章，以解释如何以一种可访问的方式删除边框。](https://www.sitebase.be/disable-focus-outline-without-breaking-accessibility/)

简而言之，这个想法是仅在我们检测到键盘用户时才显示轮廓边框。一旦用户开始使用他的鼠标，我们就会禁用轮廓。结果，您将获得两者中最好的。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2014-06-26T23:50:32.087

如果您想从 Bootstrap 中的按钮中移除发光（我认为这不一定是糟糕的 UX），您需要以下代码：

```
.btn:focus, .btn:active:focus, .btn.active:focus{
  outline-color: transparent;
  outline-style: none;
} 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2019-11-19T01:30:13.170

这个解决方案对我有用。

```
input:focus {
    outline: none !important;
    box-shadow: none !important;
} 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2015-03-31T10:09:15.507

有时它也会发生按钮然后使用下面来删除外线

```
input:hover
input:active, 
input:focus, 
textarea:active,
textarea:hover,
textarea:focus, 
button:focus,
button:active,
button:hover
{
    outline:0px !important;
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-07-15T09:35:29.987

```
<select class="custom-select">
        <option>option1</option>
        <option>option2</option>
        <option>option3</option>
        <option>option4</option>
</select>

<style>
.custom-select {
        display: inline-block;
        border: 2px solid #bbb;
        padding: 4px 3px 3px 5px;
        margin: 0;
        font: inherit;
        outline:none; /* remove focus ring from Webkit */
        line-height: 1.2;
        background: #f8f8f8;

        -webkit-appearance:none; /* remove the strong OSX influence from Webkit */

        -webkit-border-radius: 6px;
        -moz-border-radius: 6px;
        border-radius: 6px;
    }
    /* for Webkit's CSS-only solution */
    @media screen and (-webkit-min-device-pixel-ratio:0) { 
        .custom-select {
            padding-right:30px;    
        }
    }

    /* Since we removed the default focus styles, we have to add our own */
    .custom-select:focus {
        -webkit-box-shadow: 0 0 3px 1px #c00;
        -moz-box-shadow: 0 0 3px 1px #c00;
        box-shadow: 0 0 3px 1px #c00;
    }

    /* Select arrow styling */
    .custom-select:after {
        content: "▼";
        position: absolute;
        top: 0;
        right: 0;
        bottom: 0;
        font-size: 60%;
        line-height: 30px;
        padding: 0 7px;
        background: #bbb;
        color: white;

        pointer-events:none;

        -webkit-border-radius: 0 6px 6px 0;
        -moz-border-radius: 0 6px 6px 0;
        border-radius: 0 6px 6px 0;
    }
</style> 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2014-02-19T15:36:47.560

我发现删除“推拉门”类型的输入按钮上的轮廓很有帮助，因为轮廓没有覆盖推拉门图像的右“盖”，使得焦点状态看起来有点不稳定。

```
input.slidingdoorbutton:focus { outline: none;} 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2015-08-03T22:10:43.410

我只需要从我的文本输入字段中删除这种效果，我无法让其他技术正常工作，但这对我有用；

```
input[type="text"], input[type="text"]:focus{
            outline: 0;
            border:none;
            box-shadow:none;

    } 
```

在 Firefox 和 Chrome 中测试。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2017-01-25T07:17:05.357

当然！您也可以使用 * 从所有 HTML 元素中删除蓝色边框

```
*{
    outline-color: transparent;
    outline-style: none;
  } 
```

和

```
 *{
     outline: none;   
   } 
```

# jquery - 你如何关闭一个 jQuery Simplemodal？

> ID：935573
> 
> 赞同：23
> 
> 时间：2009-06-01T16:26:05.233
> 
> 标签：jquery, ajax, simplemodal

我想使用 ASP.Net MVC 从提交表单并接收结果（AJAX）后自动调用的 JavaScript 函数关闭 Simplemodal 窗口。如何关闭 jQuery Simplemodal？

我是这样打开的：

```
$("#popup").modal() 
```

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2009-06-01T17:45:37.167

您有 2 个选项：

1) 将关闭类 (simplemodal-close) 放在模态数据中的元素上，SimpleModal 将自动将关闭函数绑定到该元素上的单击事件。

以上面的示例为例，您需要：

```
<div id="foo" style="display:none">
  <p>Form HTML</p>
  <span class="simplemodal-close">Close</span>
</div> 
```

2）当您想以编程方式关闭对话框时，请调用：

```
$.modal.close(); 
```

！

-Eric（SimpleModal作者）

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-06-01T16:54:43.037

就叫close吧。

```
$("#popup").close(); 
```

如果您正在为 ajax 完成而这样做，您需要添加一个回调。您可能想要检查失败。

```
var foo = $("#popup").modal();

$.ajax({url:url, success:function(){
    foo.close();
}}); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-02-15T22:59:45.840

如果以上方案都不起作用，也可以尝试触发关闭按钮的点击事件（只要放在弹出元素内即可）。

```
$( ".simplemodal-close" ).trigger( "click" ); 
```

或失败，使用Javascript。

```
document.getElementById('closeModalButton').click(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2010-10-15T02:00:16.403

```
$.modal.close(); 
```

或者您可以使用以下命令

```
setTimeout('goto_previous_page()', 1000); 
```

# c# - 更改操作系统信息、更改分辨率信息、IE Webbrowser Control .NET C#

> ID：935578
> 
> 赞同：1
> 
> 时间：2009-06-01T16:26:41.957
> 
> 标签：c#, winforms, operating-system, webbrowser-control, resolution

我最近创建了一个自动浏览器窗口窗体应用程序，此时浏览各个地方只是为了好玩。但是我在访问 tracemyip.org 时注意到，他们可以获得与我的操作系统和分辨率相关的信息。浏览这些类型的网站时，有没有办法只改变我的分辨率和操作系统的外观？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-02T00:54:36.587

生成页面时，浏览器名称、版本和操作系统信息由浏览器本身通过用户代理字符串提供。[您可能会发现 Microsoft 在用户代理](http://msdn.microsoft.com/en-us/library/ms537503(VS.85).aspx)上的 MSDN 页面很有趣。如果您在 C# 中使用 Web 浏览器控件，则可以根据需要覆盖用户代理字符串。

如果您使用 Firefox，您可以使用 user-agent 附加组件以类似的方式覆盖 user-agent。我不确定您是否或如何更改其他浏览器中的用户代理。

至于屏幕分辨率，快速查看页面源代码会显示以下 Javascript：

```
<script type="text/JavaScript">
     document.write(screen.width+'x'+screen.height);
</script> 
```

我怀疑浏览器会直接从操作系统获取“屏幕”变量信息——我不确定你将如何覆盖这些值，我也不确定你是否想要！

# architecture - Facebook 内容和所有权

> ID：935590
> 
> 赞同：0
> 
> 时间：2009-06-01T16:28:12.067
> 
> 标签：architecture, facebook, photo, ownership

我正在开发一个从 facebook 导入照片的应用程序。它为用户创建了一些“自动相册”，包括一个名为“我的照片”的相册，我认为这很容易解释（是的，“你被标记的照片”是由 facebook 提供的）。

无论如何，我如何在我的应用程序中处理这些照片的所有权？我...

1.  将这些照片的所有权授予用户（属于他们自己，但由其他 Facebook 用户“拥有”），或者...
2.  为真正的所有者创建虚拟帐户，以防他们使用我的应用程序？

谢谢

PS - 也可以两者都做，该应用程序已经支持照片的多个所有者

**更新**：我知道 facebook 已经提供了这个功能，这就是我开始获取内容的方式:)

此外，我们**只存储 ID**，问题是将照片（按 ID）与我们网站上的多个所有者相关联是否是个好主意

该站点将照片关联起来，因为它允许用户对它们进行各种操作，例如聚合（来自许多网络）、创建单个 RSS 提要、链接到数码相框等。我只是认为这不相关问题：/

再次感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-06-01T16:33:10.537

这个功能已经存在于 Facebook 中，我相信它是一个名为“标记照片”的相册。此外，您的问题听起来像是将它们存储在 Facebook 之外或离线存储在用户的计算机上。这是另一个灰色区域，因为用户所在的任何照片都不是用户拍摄的，并且可能没有版权。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-01T16:44:42.130

根据 facebook 开发者 wiki，您不能将 facebook 用户数据存储超过 24 小时，除非您特别提示用户提供扩展权限。所以你不应该自己存储照片。您可以存储照片 ID，但如果您只是存储 ID，您可能不会问这个问题。

您可以通过专门要求用户将照片导入您的应用程序来解决此问题，但我不认为这比提示扩展权限更好，并且您将处于合法的灰色区域。

[http://wiki.developers.facebook.com/index.php/Storable_Information](http://wiki.developers.facebook.com/index.php/Storable_Information)

# c# - 如何使 WPF 应用程序在屏幕上居中？

> ID：935599
> 
> 赞同：125
> 
> 时间：2009-06-01T16:30:36.653
> 
> 标签：c#, wpf, screen-positioning

我想在主屏幕上启动我的 WPF 应用程序。我知道我必须设置 myWindow.Left 和 myWindow.Top，但是我从哪里获得这些值？

我发现`System.Windows.Forms.Screen.PrimaryScreen`，这显然不是 WPF。是否有 WPF 替代方案可以为我提供屏幕分辨率或类似的东西？

* * *

## 回答 #1

> 赞同：183
> 
> 时间：2011-05-24T13:44:20.597

**xml**

```
<Window ... WindowStartupLocation="CenterScreen">... 
```

* * *

## 回答 #2

> 赞同：159
> 
> 时间：2011-02-18T16:30:14.477

把它放在你的窗口构造函数中

```
WindowStartupLocation = System.Windows.WindowStartupLocation.CenterScreen; 
```

> .NET Framework 支持：4、3.5、3.0
> 
> .NET Framework 客户端配置文件受以下版本支持：4、3.5 SP1

* * *

## 回答 #3

> 赞同：49
> 
> 时间：2009-06-01T16:37:10.110

您仍然可以使用 WPF 应用程序中的 Screen 类。您只需要从您的应用程序中引用 System.Windows.Forms 程序集。完成后，（并在下面的示例中引用 System.Drawing）：

```
Rectangle workingArea = System.Windows.Forms.Screen.PrimaryScreen.WorkingArea; 
```

...工作得很好。

您是否考虑过将主窗口属性 WindowStartupLocation 设置为 CenterScreen？

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2009-06-04T03:34:50.567

PresentationFramework 中的 SystemParameters 类呢？它有一个[WorkArea](http://msdn.microsoft.com/en-us/library/system.windows.systemparameters.workarea.aspx)属性，这似乎是您正在寻找的。

但是，为什么不设置 Window.WindowStartupLocation 工作？CenterScreen 是枚举值之一。是否需要调整居中？

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2011-09-05T06:53:53.750

您不需要`System.Windows.Forms`从应用程序中引用程序集。相反，您可以使用`System.Windows.SystemParameters.WorkArea`. 这相当于`System.Windows.Forms.Screen.PrimaryScreen.WorkingArea`！

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2017-04-28T11:45:02.150

```
var window = new MyWindow(); 
```

对于屏幕中心使用：

```
window.WindowStartupLocation = System.Windows.WindowStartupLocation.CenterScreen; 
```

对于父窗口的中心使用：

```
window.WindowStartupLocation = System.Windows.WindowStartupLocation.CenterOwner; 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2020-04-24T20:29:57.653

I prefer to put it in the WPF code.

In `[WindowName].xaml` file:

```
<Window x:Class=...
...
WindowStartupLocation ="CenterScreen"> 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2009-06-01T16:39:12.247

没有等效的 WPF。`System.Windows.Forms.Screen`仍然是 .NET 框架的一部分，但可以从 WPF 中使用。

有关更多详细信息，请参阅[此问题](https://stackoverflow.com/questions/254197/how-can-i-get-the-active-screen-dimensions/254241#254241)，但您可以通过使用[`WindowInteropHelper`](http://msdn.microsoft.com/en-us/library/system.windows.interop.windowinterophelper.aspx)类来包装 WPF 控件来使用与屏幕相关的调用。

# iphone - Core Data：是否可以使用 Core Data 构建桌面应用程序来为 iPhone 应用程序创建数据模型？

> ID：935603
> 
> 赞同：4
> 
> 时间：2009-06-01T16:30:43.827
> 
> 标签：iphone, cocoa, cocoa-touch, core-data

我目前正在决定是否使用 Core Data 来管理我的 iphone 应用程序中的数据。

该应用程序涉及将一个相当大的内容库放在一起，这些内容需要本地化并且具有相当少的关系。我想到使用核心数据的一个好处是，我或许可以构建一个桌面客户端来管理应用程序的数据，然后将生成的文件与 iPhone 应用程序打包以用作其内容数据库。

由于我对核心数据的了解相当有限，我想知道这是否可能？他们是否有任何最佳实践可以为我指明方向？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-01T17:06:42.633

这基本上是对这个问题的欺骗：

[为核心数据应用提供基础数据？](https://stackoverflow.com/questions/928177/provide-base-data-for-core-data-application/928390#928390)

简短的回答是 - 是的。我做到了，苹果做到了。效果很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-01T17:05:06.723

Core Data 定义了与数据库交互的接口，而不是存储本身。您可以使用 XML、二进制或 SQLite 作为存储文件。如果您想要一个快速而简单的解决方案，您可以使用基本的 SQLite 应用程序（例如 Menial's Bases）来创建数据库。然后，您可以将其添加到您的 XCode 项目以供 iPhone 使用。如果你打算让你的 iPhone 客户使用桌面客户​​端，你可以使用你 iPhone 项目中大部分相同的 Core Data 代码。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2009-09-19T08:11:35.223

现在包含核心数据，开始一个 SDK 3.0。

# wpf - 与 DataContext 的数据绑定

> ID：935606
> 
> 赞同：1
> 
> 时间：2009-06-01T16:30:45.060
> 
> 标签：wpf, data-binding, datacontext

我在这里做错了什么？我正在尝试`DataTemplate`使用对象内部的集合创建一个`DataContext`，如下所示：

C＃：

```
namespace StackOverflowTests
{
    /// <summary>
    /// Interaction logic for Window1.xaml
    /// </summary>
    public partial class Window1 : Window
    {
        public Window1()
        {
            InitializeComponent();

            this.DataContext = new People();
        }
    }

    class People
    {
        public List<Person> PersonList { get; set; }

        public People()
        {
            this.PersonList = new List<Person>()
            {
                new Person(){FirstName = "Carlo", LastName = "Toribio" },
                new Person(){FirstName = "Guy", LastName = "Incognito" }
            };
        }
    }

    class Person
    {
        public string FirstName { get; set; }
        public string LastName { get; set; }
    }
} 
```

XAML：

```
 <Window x:Class="StackOverflowTests.Window1"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Window1" x:Name="window1" Height="300" Width="300">
        <Window.Resources>
            <DataTemplate x:Key="peopleTemplate">
                <StackPanel>
                    <TextBlock Text="First Name" FontWeight="Bold" />
                    <TextBlock Text="{Binding PersonList.FirstName}" />
                    <TextBlock Text="Last Name" FontWeight="Bold" />
                    <TextBlock Text="{Binding PersonList.LastName}" />
                </StackPanel>
            </DataTemplate>
        </Window.Resources>
        <Grid x:Name="gridMain">
            <ItemsControl ItemsSource="{Binding}" ItemTemplate="{StaticResource peopleTemplate}" />
        </Grid>
    </Window> 
```

通过使用继承自 的类，我已经更容易做到这一点`Collection<T>`，但由于许多原因，我无法这样做来解决这个问题。非常感谢任何建议。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-06-01T16:34:39.850

试试这个：

```
<Grid x:Name="gridMain">
   <ItemsControl ItemsSource="{Binding PersonList}" ItemTemplate="{StaticResource peopleTemplate}" />
 </Grid> 
```

# c# - 如何从 Windows 窗体创建仅消息窗口？

> ID：935608
> 
> 赞同：4
> 
> 时间：2009-06-01T16:31:17.103
> 
> 标签：c#, .net, window-handles

我正在尝试在 winforms 应用程序中创建一个仅消息窗口来接收来自 MFC 库类的窗口消息。

我尝试过 subclassing `NativeWindow`，并在构造函数中请求这样的窗口句柄：

```
CreateParams cp = new CreateParams();
cp.Parent = (IntPtr)HWND_MESSAGE;
this.CreateHandle(cp); 
```

但我得到一个 Win32Exception 抛出消息“错误创建窗口句柄”。如何从 Windows 窗体创建仅消息窗口？是否使用`NativeWindow`了正确的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-12-15T20:43:14.293

我知道这是 7.5 岁，但以防万一有人发现这个，我想我会回应。我使用了 Microsoft 的[TimerNativeWindow 代码](https://referencesource.microsoft.com/#System.Windows.Forms/winforms/Managed/System/WinForms/Timer.cs,7681525c85c5d4bc)并删除了计时器功能。我最终使用了这种方法：

```
 public class MyNativeWindow : NativeWindow
    {
        private readonly string _caption;
        private const int WmClose = 0x0010;

        [SuppressMessage("Microsoft.Reliability", "CA2006:UseSafeHandleToEncapsulateNativeResources")]
        private static readonly HandleRef HwndMessage = new HandleRef(null, new IntPtr(-3));

        [DllImport("user32.dll", CharSet = CharSet.Auto)]
        [ResourceExposure(ResourceScope.None)]
        private static extern IntPtr PostMessage(HandleRef hwnd, int msg, int wparam, int lparam);

        [DllImport("user32.dll", ExactSpelling = true, CharSet = CharSet.Auto)]
        [ResourceExposure(ResourceScope.Process)]
        private static extern int GetWindowThreadProcessId(HandleRef hWnd, out int lpdwProcessId);

        [DllImport("kernel32.dll", ExactSpelling = true, CharSet = CharSet.Auto)]
        [ResourceExposure(ResourceScope.Process)]
        private static extern int GetCurrentThreadId();

        public MyNativeWindow(string caption)
        {
            _caption = caption;
        }

        public bool CreateWindow()
        {
            if (Handle == IntPtr.Zero)
            {
                CreateHandle(new CreateParams
                {
                    Style = 0,
                    ExStyle = 0,
                    ClassStyle = 0,
                    Caption = _caption,
                    Parent = (IntPtr)HwndMessage
                });
            }
            return Handle != IntPtr.Zero;
        }

        public void DestroyWindow()
        {
            DestroyWindow(true, IntPtr.Zero);
        }

        private bool GetInvokeRequired(IntPtr hWnd)
        {
            if (hWnd == IntPtr.Zero) return false;
            int pid;
            var hwndThread = GetWindowThreadProcessId(new HandleRef(this, hWnd), out pid);
            var currentThread = GetCurrentThreadId();
            return (hwndThread != currentThread);
        }

        private void DestroyWindow(bool destroyHwnd, IntPtr hWnd)
        {
            if (hWnd == IntPtr.Zero)
            {
                hWnd = Handle;
            }

            if (GetInvokeRequired(hWnd))
            {
                PostMessage(new HandleRef(this, hWnd), WmClose, 0, 0);
                return;
            }

            lock (this)
            {
                if (destroyHwnd)
                {
                    base.DestroyHandle();
                }
            }
        }

        public override void DestroyHandle()
        {
            DestroyWindow(false, IntPtr.Zero);
            base.DestroyHandle();
        }
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-01T20:19:23.430

试试看：

```
[DllImport("user32.dll")]
static extern IntPtr SetParent(IntPtr hWndChild, IntPtr hWndNewParent);

static IntPtr HWND_MESSAGE = new IntPtr(-3);

protected override void OnHandleCreated(EventArgs e)
{
    base.OnHandleCreated(e);
    SetParent(this.Handle, HWND_MESSAGE);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2010-08-02T10:35:15.820

我担心您必须从 a 派生`Form`，并强制窗口不可见。

另一种方法（在类库可修改的情况下）是在没有窗口的情况下运行消息泵（请参阅[Application.Run](http://msdn.microsoft.com/it-it/library/ms157900.aspx)和[Application.AddMessageFilter ，或者如果您更喜欢使用](http://msdn.microsoft.com/it-it/library/system.windows.forms.application.addmessagefilter.aspx)[PeekMessage](http://msdn.microsoft.com/en-us/library/ms644943(VS.85).aspx) & Co的 pinvokes ）。

[在这种情况下，您可以使用PostThreadMessage](http://msdn.microsoft.com/en-us/library/ms644946(VS.85).aspx)发送消息，方法是让线程 id 运行 Application.Run，​​但实际上您无法与应用程序消息泵线程同步，因为它不等待消息确认。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-01T16:40:47.737

我相信您还需要指定一个窗口类。

# windows - 批处理参数：%1 之后的所有内容

> ID：935609
> 
> 赞同：50
> 
> 时间：2009-06-01T16:31:23.953
> 
> 标签：windows, parameters, batch-file, arguments

**复制：**

*   [有没有办法指示批处理文件中的最后 n 个参数？](https://stackoverflow.com/questions/761615/is-there-a-way-to-indicate-the-last-n-parameters-in-a-batch-file)
*   [如何从第 N 个位置获取批处理文件参数？](https://stackoverflow.com/questions/382587)

**澄清：**我知道循环方法 - 这甚至在命令扩展之前就有效；我希望有一些有趣和无证的东西，比如 %~*1 或其他什么 - 就像那些记录在[http://www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/percent.mspx ?mfr=true](http://www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/percent.mspx?mfr=true)。

* * *

在 Windows 批处理文件中（启用了所谓的“命令扩展”），%1 是第一个参数，%2 是第二个参数，等等。%* 是连接的所有参数。

我的问题：例如，有没有办法在 %2 之后获取所有内容？

我找不到这样的东西，这对我正在做的事情会有帮助。

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2014-11-04T10:29:47.527

有一个更短的解决方案（单线）利用`for`循环的标记化功能：

```
:: all_but_first.bat
echo all: %*
for /f "tokens=1,* delims= " %%a in ("%*") do set ALL_BUT_FIRST=%%b
echo all but first: %ALL_BUT_FIRST% 
```

输出：

```
> all_but_first.bat foo bar baz
all: foo bar baz
all but first: bar baz 
```

* * *

脚注：是的，这个解决方案有问题。几乎与使用批处理文件编写的任何内容相同。现在是 2021 年。使用 Powershell 或任何其他实际的脚本语言。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2009-06-01T16:50:18.223

我不确定是否有直接命令，但您始终可以使用简单的循环和移位来获得变量中的结果。就像是：

```
@echo 关闭
设置 RESTVAR=
转移
：循环1
如果 "%1"=="" 转到 after_loop
设置 RESTVAR=%RESTVAR% %1
转移
转到循环1

:after_loop
回声%RESTVAR%

```

让我知道它是否有帮助！

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2017-08-30T20:32:20.390

以下内容适用于带有“、=、''的 args。基于 Dmitry Sokolov 的回答。修复了第二个 arg 与第一个 arg 相同时的问题。

```
@echo off
echo %*
set _tail=%*
call set _tail=%%_tail:*%1=%%
echo %_tail% 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2017-04-30T01:01:36.350

以下将适用于带有`"`,`=`的args `' '`（与@MaxTruxa 答案相比）

```
echo %*
set _all=%*
call set _tail=%%_all:*%2=%%
set _tail=%2%_tail%
echo %_tail% 
```

测试

```
> get_tail.cmd "first 1" --flag="other options" --verbose
"first 1" --flag="other options" --verbose
--flag="other options" --verbose 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2009-06-01T16:37:21.297

您可以为此使用 SHIFT。它删除 %1 并将所有其他参数降低一格。此脚本输出 %2 之后的所有参数（因此它输出 %3、%4...），直到其中一个为空（因此它是最后一个）：

```
@echo off

SHIFT
SHIFT

:loop
if "%1" == "" goto end
echo %1
SHIFT
goto loop

:end 
```

编辑：删除了使用 %* 的示例，因为这不起作用 - %* 始终输出所有参数

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2009-06-01T16:43:10.243

基于 schnaader 的回答，我认为如果您想要 %1 连接后的所有内容，可以这样做。

```
@echo off

SHIFT

set after1=

:loop
if "%1" == "" goto end
set after1=%after1% %1
SHIFT
goto loop

:end

echo %after1% 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2018-07-10T21:54:50.970

Sebi，这是[语法](https://ss64.com/nt/syntax-replace.html)！有一种行为，批量吃不双引号的等号，这会在上面的脚本中造成麻烦。如果你不想跳过，我已经根据 Raman Zhylich 答案和 strlen.cmd 进行了修改：

```
@ECHO OFF
SETLOCAL enableDelayedExpansion

SET _tail=%*
SET "_input="
SET /A _len=0

:again
SET "_param=%1"
SET "_input=%_input%%1"
FOR /L %%i in (0,1,8191) DO IF "!_param:~%%i,1!"=="" (
    REM skip param
    SET /A _len+=%%i
    REM _len can't be use in substring
    FOR /L %%j in (!_len!,1,!_len!) DO (
        REM skip param separator
        SET /A _len+=1
        IF "!_tail:~%%j,1!"=="=" (SET "_input=%_input%=" & SHIFT & goto :again)
    )
) & goto :next
:next
IF %_len% NEQ 0 SET _tail=!_tail:~%_len%!

ENDLOCAL & SET "_input=%_input%" & SET "_tail=%_tail%" 
```

# clickonce - 发布模式下的 ClickOnce 不会发布

> ID：935610
> 
> 赞同：0
> 
> 时间：2009-06-01T16:31:37.137
> 
> 标签：clickonce, release

只是用 ClickOnce 做一些测试/原型设计。有谁知道为什么我可以在设置为“调试”模式时使用 CLickOnce 发布，但在设置为“发布”模式时不能发布？

我什至没有收到后者的错误消息。输出文件夹保持为空，因为没有发生任何事情。一旦我切换到调试模式并进行发布，一切都很好。

任何想法？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-06-13T19:55:42.083

抱歉，不，但您应该尝试创建一个从发布配置复制设置的新配置，并尝试发布该配置。或者甚至从头开始创建一个新配置，设置与发布配置相同的标志。

如果其中任何一项工作，您甚至可以删除 Release 并将新的重命名为 Release。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2010-04-02T07:11:07.033

\bin\release 文件夹中有什么东西吗？它应该包含部署中的二进制文件和所有内容，包括 app.publish 文件夹。

# javascript - IE8 - window.open() - “不支持这样的接口”

> ID：935614
> 
> 赞同：7
> 
> 时间：2009-06-01T16:33:54.623
> 
> 标签：javascript, internet-explorer-8

当我从 JavaScript 调用 window.open() 时，我收到带有消息“行：xxx 错误：不支持此类接口”的错误对话框

谷歌把我带到了可以追溯到 IE4 的网站，说我需要在几个 DLL 上运行 regsrvr32。

有更好的解决方案吗？

编辑：请求的确切代码

```
<html><head>
<script type="text/javascript">
function windowOpen() {
    window.open("http://localhost/mysite/mypage.asp", "myWindowName", "");
}
</script></head>
<body>
<button onclick="windowOpen();return false;">Hi There</button>
</body></html> 
```

EDIT2：提供的答案都可以追溯到 IE4/Win95 天。我的意思是，认真的？？无论如何，我在 IE8 (!!!) 中禁用了平滑滚动，并且还尝试注册 Shoban 提到的 kb 文章中列出的控件，但尝试注册 shdocvw.dll 时出错（模块“shdocvw.dll”已加载但找不到入口点 DllRegisterServer。请确保“shdocvw.dll”是有效的 DLL 或 OCX 文件，然后重试。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T09:00:08.703

首先，尝试以下方法，看看问题是否消失：

**选项1**

**第 1 步：修复 IE**

在以管理员身份运行的命令提示符中复制并粘贴以下内容，然后按：

```
"%systemroot%\system32\regsvr32.exe" "C:\Program Files\Internet Explorer\ieproxy.dll" 
```

如果您正在运行 64 位 Windows，请尝试以下操作：

`"%systemroot%\system32\regsvr32.exe" "C:\Program Files> (x86)\Internet Explorer\ieproxy.dll`"

**选项 2**

如果上述方法不起作用，请尝试以下两个步骤。

**第 1 步：重新注册所有 DLL**

以管理员身份打开命令提示符。键入以下命令：

```
FOR /R C:\ %G IN (*.dll) DO "%systemroot%\system32\regsvr32.exe" /s "%G" 
```

此时您可能会弹出一些错误窗口，只需将它们全部忽略并在命令提示符停止搅拌时关闭它们。

**第 2 步：修复 IE**

在以管理员身份运行的命令提示符中复制并粘贴以下内容，然后按：

```
"%systemroot%\system32\regsvr32.exe" "C:\Program Files\Internet Explorer\ieproxy.dll" 
```

如果您正在运行 64 位 Windows，请尝试以下操作：

`"%systemroot%\system32\regsvr32.exe" "C:\Program Files> (x86)\Internet Explorer\ieproxy.dll`"

资料来源：

*   [http://social.technet.microsoft.com/Forums/en-US/w7itproui/thread/99e4ab4f-165d-4691-90dd-ab41a05d26a2](http://social.technet.microsoft.com/Forums/en-US/w7itproui/thread/99e4ab4f-165d-4691-90dd-ab41a05d26a2)

*   [http://forums.techguy.org/all-other-software/568737-solved-internet-explorer-wont-start.html](http://forums.techguy.org/all-other-software/568737-solved-internet-explorer-wont-start.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-11-25T11:24:24.797

检查是否安装了任何工具栏。我遇到了同样的问题，这是因为我运行了 fiddler http 调试代理

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-18T05:59:33.320

On Win10 x64 with IE11 this solved my problem:

```
 regsvr32 "C:\Windows\SysWOW64\ieproxy.dll" 
```

# c# - SortedList 和 SortedDictionary 有什么区别？

> ID：935621
> 
> 赞同：284
> 
> 时间：2009-06-01T16:35:45.853
> 
> 标签：c#, .net, generics, sortedlist, sorteddictionary

[`SortedList<TKey,TValue>`](https://msdn.microsoft.com/en-us/library/ms132319(v=vs.110).aspx)a和 a之间有什么真正的实际区别[`SortedDictionary<TKey,TValue>`](https://msdn.microsoft.com/en-us/library/f7fta44c(v=vs.110).aspx)吗？在任何情况下您会专门使用一种而不是另一种吗？

* * *

## 回答 #1

> 赞同：321
> 
> 时间：2009-06-01T16:38:04.353

是的 - 它们的性能特征显着不同。调用它们可能会更好`SortedList`，`SortedTree`因为这更能反映实现。

查看每个文件的 MSDN 文档 ( [`SortedList`](http://msdn.microsoft.com/en-us/library/ms132319.aspx), [`SortedDictionary`](http://msdn.microsoft.com/en-us/library/f7fta44c.aspx))，了解在不同情况下不同操作的性能细节。这是一个很好的总结（来自`SortedDictionary`文档）：

> `SortedDictionary<TKey, TValue>`泛型类是具有 O(log n) 检索的二叉搜索树，其中 n 是字典中元素的数量。在这方面，它类似于 `SortedList<TKey, TValue>`泛型类。这两个类具有相似的对象模型，并且都具有 O(log n) 检索。这两个类的不同之处在于内存使用和插入和删除速度：
> 
> *   `SortedList<TKey, TValue>`使用的内存少于`SortedDictionary<TKey, TValue>`.
>     
>     
> *   `SortedDictionary<TKey, TValue>`对未排序的数据具有更快的插入和删除操作，O(log n) 而不是 O(n) for `SortedList<TKey, TValue>`.
>     
>     
> *   如果列表是从排序的数据中一次性填充的，`SortedList<TKey, TValue>`则比 `SortedDictionary<TKey, TValue>`.

（`SortedList`实际上维护一个排序数组，而不是使用树。它仍然使用二进制搜索来查找元素。）

* * *

## 回答 #2

> 赞同：121
> 
> 时间：2014-05-20T20:14:29.703

如果有帮助，这是一个表格视图...

从**性能**的角度来看：

```
+------------------+---------+----------+--------+----------+----------+---------+
| Collection       | Indexed | Keyed    | Value  | Addition |  Removal | Memory  |
|                  | lookup  | lookup   | lookup |          |          |         |
+------------------+---------+----------+--------+----------+----------+---------+
| SortedList       | O(1)    | O(log n) | O(n)   | O(n)*    | O(n)     | Lesser  |
| SortedDictionary | O(n)**  | O(log n) | O(n)   | O(log n) | O(log n) | Greater |
+------------------+---------+----------+--------+----------+----------+---------+

  * Insertion is O(log n) for data that are already in sort order, so that each 
    element is added to the end of the list. If a resize is required, that element
    takes O(n) time, but inserting n elements is still amortized O(n log n).
    list.
** Available through enumeration, e.g. Enumerable.ElementAt. 
```

从**实现**的角度来看：

```
+------------+---------------+----------+------------+------------+------------------+
| Underlying | Lookup        | Ordering | Contiguous | Data       | Exposes Key &    |
| structure  | strategy      |          | storage    | access     | Value collection |
+------------+---------------+----------+------------+------------+------------------+
| 2 arrays   | Binary search | Sorted   | Yes        | Key, Index | Yes              |
| BST        | Binary search | Sorted   | No         | Key        | Yes              |
+------------+---------------+----------+------------+------------+------------------+ 
```

*粗略*地说，如果您需要原始性能`SortedDictionary`可能是更好的选择。如果您需要更少的内存开销并且索引检索`SortedList`更适合。[有关何时使用 which 的更多信息，请参阅此问题。](https://stackoverflow.com/questions/1376965/when-to-use-a-sortedlisttkey-tvalue-over-a-sorteddictionarytkey-tvalue)

您可以[在此处](http://msdn.microsoft.com/en-us/library/5z658b67%28v=vs.110%29.aspx)、[此处](http://www.growingwiththeweb.com/2013/02/what-data-structure-net-collections-use.html)、[此处](http://www.codethinked.com/an-overview-of-system_collections_generic)、[此处](http://diranieh.com/NetDataStructures/NET/Collections.htm)和[此处](http://people.cs.aau.dk/%7Enormark/oop-csharp/html/notes/collections_themes-dictionary-sect.html)阅读更多内容。

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2013-02-23T05:53:48.467

我打开了 Reflector 来看看这个，因为似乎有点困惑`SortedList`。它实际上不是二叉搜索树，**它是键值对的排序（按键）数组**。还有一个`TKey[] keys`变量与键值对同步排序并用于二进制搜索。

这是一些来源（针对 .NET 4.5）来支持我的声明。

**私人会员**

```
// Fields
private const int _defaultCapacity = 4;
private int _size;
[NonSerialized]
private object _syncRoot;
private IComparer<TKey> comparer;
private static TKey[] emptyKeys;
private static TValue[] emptyValues;
private KeyList<TKey, TValue> keyList;
private TKey[] keys;
private const int MaxArrayLength = 0x7fefffff;
private ValueList<TKey, TValue> valueList;
private TValue[] values;
private int version; 
```

**SortedList.ctor(IDictionary, IComparer)**

```
public SortedList(IDictionary<TKey, TValue> dictionary, IComparer<TKey> comparer) : this((dictionary != null) ? dictionary.Count : 0, comparer)
{
    if (dictionary == null)
    {
        ThrowHelper.ThrowArgumentNullException(ExceptionArgument.dictionary);
    }
    dictionary.Keys.CopyTo(this.keys, 0);
    dictionary.Values.CopyTo(this.values, 0);
    Array.Sort<TKey, TValue>(this.keys, this.values, comparer);
    this._size = dictionary.Count;
} 
```

**SortedList.Add(TKey, TValue) : 无效**

```
public void Add(TKey key, TValue value)
{
    if (key == null)
    {
        ThrowHelper.ThrowArgumentNullException(ExceptionArgument.key);
    }
    int num = Array.BinarySearch<TKey>(this.keys, 0, this._size, key, this.comparer);
    if (num >= 0)
    {
        ThrowHelper.ThrowArgumentException(ExceptionResource.Argument_AddingDuplicate);
    }
    this.Insert(~num, key, value);
} 
```

**SortedList.RemoveAt(int) : 无效**

```
public void RemoveAt(int index)
{
    if ((index < 0) || (index >= this._size))
    {
        ThrowHelper.ThrowArgumentOutOfRangeException(ExceptionArgument.index, ExceptionResource.ArgumentOutOfRange_Index);
    }
    this._size--;
    if (index < this._size)
    {
        Array.Copy(this.keys, index + 1, this.keys, index, this._size - index);
        Array.Copy(this.values, index + 1, this.values, index, this._size - index);
    }
    this.keys[this._size] = default(TKey);
    this.values[this._size] = default(TValue);
    this.version++;
} 
```

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2009-06-01T16:39:21.060

查看[SortedList 的 MSDN 页面](http://msdn.microsoft.com/en-us/library/ms132319.aspx)：

从备注部分：

> `SortedList<(Of <(TKey, TValue>)>)`泛型类是具有检索功能的二叉搜索树，`O(log n)`其中`n`是字典中元素的数量。在这方面，它类似于`SortedDictionary<(Of <(TKey, TValue>)>)`泛型类。这两个类具有相似的对象模型，并且都具有`O(log n)`检索功能。这两个类的不同之处在于内存使用和插入和删除速度：
> 
> *   `SortedList<(Of <(TKey, TValue>)>)`使用的内存少于`SortedDictionary<(Of <(TKey, TValue>)>)`.
> *   `SortedDictionary<(Of <(TKey, TValue>)>)`与for`O(log n)`相比，对未排序的数据具有更快的插入和删除操作。`O(n)``SortedList<(Of <(TKey, TValue>)>)`
>     
>     
> *   如果列表是从排序的数据中一次性填充的，`SortedList<(Of <(TKey, TValue>)>)`则比`SortedDictionary<(Of <(TKey, TValue>)>)`.

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2014-05-30T08:09:17.960

这是性能如何相互比较的直观表示。

![](https://i.stack.imgur.com/iKQdX.png)

* * *

## 回答 #6

> 赞同：11
> 
> 时间：2016-06-06T15:11:00.943

关于这个话题已经说得够多了，但是为了简单起见，这是我的看法。

**在以下情况下应使用**排序字典-****

 ***   需要更多的插入和删除操作。
*   未排序的数据。
*   密钥访问就足够了，不需要索引访问。
*   内存不是瓶颈。

另一方面，应在以下情况下使用**排序列表：**

*   需要更多的查找和更少的插入和删除操作。
*   数据已经排序（如果不是全部，大多数）。
*   需要索引访问。
*   内存是一种开销。

希望这可以帮助！！

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-11-15T14:36:47.767

索引访问（这里提到）是实际的区别。如果需要访问后继者或前驱者，则需要 SortedList。SortedDictionary 无法做到这一点，因此您在如何使用排序（first / foreach）方面受到了相当大的限制。

# .net - 如何在 64 位机器上通过 Wow64 加载所有 .Net dll

> ID：935624
> 
> 赞同：0
> 
> 时间：2009-06-01T16:36:42.000
> 
> 标签：.net, 64-bit

我有一台 64 位机器和一堆编译为 Any CPU 的 .Net 二进制文件。默认情况下，它们都加载为 64 位。我想我记得一种设置机器级别标志的方法，这样所有的任何 CPU .Net dll 都会被默认处理为 32 位而不是 64 位，但我似乎再也找不到它了。有人可以指出我正确的方向吗，谢谢。

（我知道我可以通过 CorFlags 单独修复每个问题，但我正在寻找机器级别的设置。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-06-01T16:50:55.057

有一个注册表项应该执行此操作。

看到这个问题：

[强制 .NET 应用程序以 32 位运行的环境变量](https://stackoverflow.com/questions/619155/environment-variable-to-force-net-applications-to-run-as-32bit)

# asp.net-mvc - 曾经必须自己部署 MVC？您是否需要在部署站点安装 Visual Studio？

> ID：935632
> 
> 赞同：4
> 
> 时间：2009-06-01T16:38:16.040
> 
> 标签：asp.net-mvc, deployment

我在 MVC 1.0 的系统要求中看到，您需要在部署站点安装一些 Visual Studio 2008。

这真的有必要吗？

[http://www.microsoft.com/downloads/details.aspx?FamilyID=53289097-73ce-43bf-b6a6-35e00103cb4b&displaylang=en](http://www.microsoft.com/downloads/details.aspx?FamilyID=53289097-73ce-43bf-b6a6-35e00103cb4b&displaylang=en)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-06-01T16:45:01.227

当然 Visual Studio 仅适用于开发环境。要部署 MVC 网站，您只需要包含几个 DLL。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-06-01T16:46:42.953

您需要安装 Visual Studio 来**开发**ASP.Net MVC 站点。要部署它们，您只需要确保 MVC 程序集可用。Phil Haack[很好地概述](http://haacked.com/archive/2008/11/03/bin-deploy-aspnetmvc.aspx)了您需要了解的内容。

# ruby-on-rails - 代表Rails中代码枚举列表的表格？

> ID：935635
> 
> 赞同：0
> 
> 时间：2009-06-01T16:40:00.810
> 
> 标签：ruby-on-rails, database

我已经查看了类似的问题，但我仍然对 Rails 中的一个简单案例感到有些困惑。

假设我有一个名为`Employee`. 员工的一个属性是 their `security_clearance`，它是一个字符串，可以是`None`、`Some`或`Full`。没有其他值是有效的。在其他应用程序中，我可能会将此`Employees`表表示为具有该表的外键的`SecurityClearances`表，该表正好有三行。该`SecurityClearances`表具有标题为`code`（例如`SEC_CLEARANCE_NONE`、、`SEC_CLEARANCE_SOME`...）和`value`（“无”、“某些”、“完整”）的列。

我想如何在 Rails 中做到这一点？我要`has_one :security_clearance`继续`Employee`吗？这似乎不太对劲。`belongs_to :employee``SecurityClearance`

在任何地方都输入 None、Some 和 Full 的字符串文字似乎不是最佳选择，特别是因为要显示的值可能会更改（例如，`Some`代码的字符串可能会更改为`low clearance`）。

* * *

### 更新：

现在我再想一想，难道我真的只想要一个`belongs_to :security_clearance`on Employee 吗？那会成功的，对吧？员工需要知道他们的安全许可级别是多少，但安全许可级别与特定员工无关。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-02T19:29:10.317

[还可以查看 GiraffeSoft 的 Enum Fields 插件： http](http://giraffesoft.ca/blog/2009/02/17/floss-week-day-2-the-enum-field-rails-plugin.html) ://giraffesoft.ca/blog/2009/02/17/floss-week-day-2-the-enum-field-rails-plugin.html

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-01T16:44:00.120

看看这个插件：http: [//github.com/mlightner/enumerations_mixin/tree/master](http://github.com/mlightner/enumerations_mixin/tree/master)

`has_enumerated :security_clearance`除了缓存 SecurityClearance 模型等之外，它还允许您像这样定义它。

但是，如果没有插件，您对关系的看法是正确的。

# git-svn - 为什么 git-svn dcommit 在我的 git repo 中留下重复的提交？我可以阻止它这样做吗？

> ID：935638
> 
> 赞同：8
> 
> 时间：2009-06-01T16:40:08.143
> 
> 标签：git-svn

我典型的 git-svn 工作流程是：

```
git checkout -b story-xyz
git commit -a -m "work"
git commit -a -m "more work"
git checkout master
git svn fetch
git merge remotes/trunk
git checkout story-xyz
git rebase master (sometimes with -i)
git checkout master
git merge story-xyz 
```

在这一点上，我的分支`master`和`story-xyz`分支指向同一个提交，一个或多个提交在`remotes/trunk`. 从那以后的一切都`remotes/trunk`在一个线性历史中。

```
last svn commit [remotes/trunk] <--- work <--- more work [master, story-xyz] 
```

然后我跑

```
git svn dcommit 
```

我希望看到之间的提交`remotes/trunk`并`master`成为 Subversion 修订版，并最终得到一个带有 的线性历史记录`remotes/trunk`，`master`并且`story-xyz`都指向最新的修订版，如下所示：

```
last svn commit <--- work <--- more work [master, story-xyz, remotes/trunk] 
```

我的 Subversion 修订版运行良好，但我最终得到了两个分支的结构。分支的公共根是我提交之前的 Subversion HEAD。两个分支都包含相同的提交系列，因为它们包含相同的差异。分支`story-xyz`位于一个分支的头部，而另一个分支`remotes/trunk`位于`master`：

```
last svn commit <--- work <--- more work [master, remotes/trunk]
                  |
                  \- work <--- more work [story-xyz] 
```

我在运行之前的 git 提交`git svn dcommit`位于较低的分支 ( `story-xyz`) 上，其中包含我的 git 提交消息、git 用户名和电子邮件以及 git 提交时间戳。上层分支的提交是新的 git 提交。他们使用我的 Subversion 用户名、我运行时的时间戳`dcommit`，并且提交消息具有`git-svn-id`附加到它们的字段。

这一切都好，我可以继续工作。问题是我查看`gitk`并看到看起来像未合并的分支`story-xyz`。很难区分我已合并回的故事分支`master`和未合并的故事分支。最明显的发现方法是重复提交消息。我可以删除`story-xyz`分支，但感觉就像我没有正确使用 git 并且我丢失了一些历史记录。

我是否错过了会阻止`git-svn`这样做的东西？或者这只是与 Subversion 交互削弱 git 的力量和自由的方式之一？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-06-01T19:12:25.687

我不认为你真的错过了什么。不过，您可能正在做一些不必要的工作。在这种情况下，您有两个指向“更多工作”提交的指针，并且您要求 git-svn 移动其中一个。另一个仍然留在原处。

你真的不需要`master`分支。Git-svn 不关心你提交的分支。IIRC，它使用它可以在当前提交的祖先中找到的第一个 svn-remote。

我将提供另一个版本的工作流程：

```
git checkout -b story-xyz remotes/trunk
git commit -a -m "work"
git commit -a -m "more work"
git svn fetch
git rebase remotes/trunk (with -i, perhaps)
git svn dcommit 
```

这应该给你一棵没有额外分支的树。不过，您需要小心快进合并。

# macos - 用户指定的数据存储在 MacOS 的什么位置

> ID：935640
> 
> 赞同：2
> 
> 时间：2009-06-01T16:40:43.243
> 
> 标签：macos

我将 app .app 文件安装到 /Applications 文件夹。你能告诉我用户指定的数据存储在哪里吗？如何清除卸载我的应用程序及其用户特定数据？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-06-01T16:41:51.587

不幸的是，这取决于应用程序。不过，有时它位于 ~/Library/ 文件夹中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-01T16:45:29.757

[AppTrap](http://konstochvanligasaker.se/apptrap/)应该可以解决问题。

它在后台运行，并且在“系统偏好设置”中有一个偏好设置窗格。将应用程序放到垃圾文件夹中，它会询问您是否也希望删除关联的应用程序文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-01T16:46:17.447

只需让用户这样做。例如[AppCleaner](http://www.freemacsoft.net/AppCleaner/)。

否则，只需在您的首选项中提供一种方法来重置它们。无需删除 plist 文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-01T17:12:23.063

[AppDelete](http://www.reggieashworth.com/appdelete)是一个免费的卸载和清理程序。

[FSEventer](http://www.fernlightning.com/doku.php?id=software:fseventer:start)是一个免费程序，用于查看程序自身的安装位置。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-06-03T22:06:13.427

大多数信息都存储在 /Library/ 中，但有时您可能会发现应用程序将其数据存储在 .app 包本身的内容中，或者在 /Applications/ 的子​​文件夹中。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-06-08T09:18:43.770

这应该让你知道在哪里看。

[在哪里放置应用程序文件](https://developer.apple.com/documentation/MacOSX/Conceptual/BPFileSystem/Articles/WhereToPutFiles.html#//apple_ref/doc/uid/TP40001411-BAJHCHJI)

# ruby-on-rails - Accepts_nested_attributes_for 子关联验证失败

> ID：935650
> 
> 赞同：71
> 
> 时间：2009-06-01T16:43:27.467
> 
> 标签：ruby-on-rails, validation, activerecord, nested

我在我的 Rails 模型之一中使用了accepts_nested_attributes_for，我想在创建父级后保存子级。

该表单完美运行，但验证失败。为简单起见，请想象以下内容：

```
class Project < ActiveRecord::Base
  has_many :tasks
  accepts_nested_attributes_for :tasks
end

class Task < ActiveRecord::Base
  belongs_to :project

  validates_presence_of :project_id
  validates_associated :project
end 
```

我正在运行：

```
Project.create!(
  :name => 'Something',
  :task_attributes => [ { :name => '123' }, { :name => '456' } ]
) 
```

保存项目模型后，任务的验证失败，因为它们没有 project_id（因为项目尚未保存）。

Rails 似乎遵循以下模式：

*   验证项目
*   验证任务
*   保存项目
*   保存任务

模式应该是：

*   验证项目
*   通过：保存项目并继续...
*   验证任务
    *   通过：保存任务
    *   失败时：删除项目（可能回滚？）

所以我的问题归结为：如何让 Rails 运行 project_id=（或 project=）方法并在保存父（项目）后对子（任务）进行验证，但不保存父（项目）模型如果任何子（任务）无效？

有任何想法吗？

* * *

## 回答 #1

> 赞同：163
> 
> 时间：2011-01-24T14:26:42.040

使用`:inverse_of`和`validates_presence_of :parent`。这应该可以解决您的验证问题。

```
 class Dungeon < ActiveRecord::Base
     has_many :traps, :inverse_of => :dungeon
   end

   class Trap < ActiveRecord::Base
     belongs_to :dungeon, :inverse_of => :traps
     validates_presence_of :dungeon
   end 
```

[http://apidock.com/rails/ActiveModel/Validations/HelperMethods/validates_presence_of](http://apidock.com/rails/ActiveModel/Validations/HelperMethods/validates_presence_of)

[https://github.com/rails/rails/blob/73f2d37505025a446bb5314a090f412d0fceb8ca/activerecord/test/cases/nested_attributes_test.rb](https://github.com/rails/rails/blob/73f2d37505025a446bb5314a090f412d0fceb8ca/activerecord/test/cases/nested_attributes_test.rb)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2009-09-16T01:15:17.930

**将此答案用于 Rails 2，否则请参阅下面的`:inverse_of`答案**

**如果关联的项目有效，您可以通过不**检查 project_id来解决此问题。

```
 class Task < ActiveRecord::Base
  belongs_to :project

  validates_presence_of :project_id, :unless => lambda {|task| task.project.try(:valid?)}
  validates_associated :project
end 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2010-03-10T03:06:03.110

仅验证关系，而不是 ID：

```
class Task < ActiveRecord::Base
  belongs_to :project

  validates_presence_of :project
end 
```

填充关联后，ActiveRecord 将认为验证已成功，无论模型是否保存。您可能还想研究自动保存，以确保始终保存任务的项目：

```
class Task < ActiveRecord::Base
  belongs_to :project, :autosave => true

  validates_presence_of :project
end 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2010-03-09T11:22:56.103

不幸的是，上述建议都不适用于 Rails 2.3.5。

在我的情况下，如果两个项目都是使用嵌套属性创建的，则任务中的项目始终为零。只有当我删除 validates_presence_of 时，创建才会成功。单元测试和日志显示一切都已正确创建。

所以我现在倾向于向数据库而不是 Rails 添加约束，因为这似乎首先更可靠。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-06-08T14:50:26.797

您可以只创建项目并仅在通过验证时添加项目：

```
tasks = params.delete(:task_attributes)
if Project.create(params)
  Project.update_attributes(:task_attributes => tasks)
end 
```

再见

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-08-03T16:53:30.187

与 bigo 的建议相反，先保存父对象然后保存子对象并不总是可以接受的。通常，您要确保所有对象在开始保存之前都经过验证。这使用户有机会重新编辑输入表单并更正任何错误。

您描述的问题将在 Rails 3.0 中修复。我会发布指向 Lighthouse 票证的链接，但 stackoverflow.com 不允许这样做，因为我是新用户 (#fail)。但是暂时，你可以使用插件“ [parental_control](http://github.com/h-lame/parental_control) ”，它会修复你的“bug”。

# c# - 与 XAML 一起动态加载代码隐藏？

> ID：935655
> 
> 赞同：1
> 
> 时间：2009-06-01T16:44:37.623
> 
> 标签：c#, wpf, wvvm

[与我之前提出的这个](https://stackoverflow.com/questions/910814/loading-xaml-at-runtime)问题相关，我想知道是否也可以动态加载与 XAML 文件配对的代码隐藏文件。它可以以这种方式工作还是将两者都编译成DLL会更好？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-01T19:33:33.130

Actually, it's the code-behind that loads the XAML file. The designer generates a hidden file that binds all of your named elements and events to the class. (Notice the 'partial' keyword on your class in the code-behind.) It functions similar to the file that the WinForms designer generates, only it's a bit harder to find. You can find them in the "obj/debug/" folder along with the compiled BAML.

As for actually answering your quetion, it would be better to compile them to a DLL. It may not be impossible to set up a library that can connect a XAML to a special class that has methods to dynamically access elements, but there's nothing like that now as far as I know.

# visual-studio-2008 - 决定源代码控制软件

> ID：935659
> 
> 赞同：4
> 
> 时间：2009-06-01T16:45:39.557
> 
> 标签：visual-studio-2008, svn, version-control, perforce

我目前在家里的电脑和工作的电脑上本地使用 Perforce，我对此非常满意。但我想与我的同事分享 SCM 之爱，我们即将（可能）添加第三位开发人员。由于包含第三人，我们无法继续使用 Perforce 的免费版本。我不反对付钱，但 900 美元的座位对我工作的公司来说太贵了。

现在，我知道在 StackOverflow 上有大量 SVN 的追随者，我尊重这一点。但是当我以前研究它时，我并不关心某些方面。例如在 Perforce 中，如果我尝试签入需要同步或合并的文件，它会在签入之前提示我这样做，并且我会获得一个可视化工具来控制合并。IIRC，在 SVN 中，当您签入文件时，它会自动为您合并，这可能与您期望的结果不太一样。不过，我坦率地承认我可能记错了。

另外，我似乎记得SVN是基于文件夹而不是基于文件的？在我当前的工作环境中，这可能真的很可怕，因为我继承了一些没有文件夹结构的应用程序。

当然，它绝对必须插入到 Visual Studio 2008 中。

鉴于这些要求，您还会推荐 SVN 还是推荐其他产品？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-06-01T16:51:03.683

在 Subversion 中，提交时不会在本地合并 - 更新时会在本地合并。（提交时有一个服务器端合并，但这不是一回事。）但是，您必须先保持最新，然后才能提交。这是一个微妙但重要的区别。

当 Subversion 对更改有信心时，它会为您合并，但会留下适当的冲突以手动合并。我还没有看到很多自动执行的错误合并。

是的，如果您需要 VS 支持，我仍然会推荐 Subversion（我个人推荐[VisualSVN](http://www.visualsvn.com/) - 不是免费的，但非常便宜）。我喜欢 Git，但我知道它没有很好的 VS 集成。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-03T16:54:50.983

我是 Perforce 的长期用户并且非常喜欢它，但我可以理解许可费用对于一家小公司来说可能有点过高。

在我看来，使用 Perforce 的主要原因是：

*   成熟的合并跟踪。SVN 还没有完全实现。
*   一流的支持团队（我似乎总是在一个小时左右得到回复）
*   速度。

话虽如此，我认为如果你愿意在上述领域稍微降低你的期望，SVN 将是一种简单的方法，至少目前是这样。我可能会因为那句话而被激怒，但就这样吧。您只需要根据时间和金钱来决定您愿意支付的费用 - 如果您是分支和合并的重度用户，那么 Perforce 分支/合并功能可能会得到回报。

如果您正在开发 OSS，要考虑的另一件事是 Perforce 实际上为开源开发提供免费许可。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-01T16:55:36.673

> 另外，我似乎记得SVN是基于文件夹而不是基于文件的？

svn 为每个文件夹存储一个 .svn 存储库，但您可以在文件夹中添加单个文件。它还具有根据扩展名自动查找/忽略文件的良好规则。

[Ankhsvn 进行](http://ankhsvn.open.collab.net/)视觉工作室集成，我个人更喜欢[tortoiseSVN](http://tortoisesvn.tigris.org/)与资源管理器的集成，但这仅取决于您的工作方式。

附言。在服务器端，您可以让 SVN 将更改存储在单个文件或 BSD 类型的数据库中，检查最适合您的文档，但这不会影响客户端。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-06-01T16:55:42.570

有关 git + Visual Studio 的讨论，请参见先前的线程： [Using Git with Visual Studio](https://stackoverflow.com/questions/507343/using-git-with-visual-studio)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-06-01T17:01:38.367

> 我目前在家里的电脑和工作的电脑上本地使用 Perforce，我对此非常满意

对我来说看起来像 DVCS（分布式版本控制）。Git 或 Mercurial 肯定会有所帮助，因为它们会随着开发人员的数量很好地扩展。只需定义一个中央存储库。Git 实际上可以[与 VisualStudio 一起工作](https://stackoverflow.com/questions/507343/using-git-with-visual-studio)

> 在 Perforce 中，如果我尝试签入需要同步或合并的文件，它会在签入之前提示我这样做

在同一分支上处理同一文件时也是如此。使用 DVCS 工具，您可以创建本地分支并控制何时要合并当前分支中的其他工作（变基）或只是将您的工作合并到一个公共分支（合并）。

因此，在这种情况下，我会推荐 DVCS 工具而不是中央存储库工具。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-06-01T17:02:46.053

我们是一家开发商店，使用 MS sourcesafe 很长一段时间，然后因为超过一定大小时出现很多问题而放弃它。

现在我们只使用svn。我还没有看到太多不正确的自动合并，但是如果文件的同一部分在两个地方都发生了更改，它会检测到冲突并让您手动合并。我很想知道您是否可以停止自动合并并完全控制。

合并分辨率窗口非常好，它可以让您立即手动合并。

我们在 vs 2008 上使用 Ankhsvn，有时使用乌龟 svn。我们测试了视觉 svn，但发现 Ankhsvn 足够好（虽然我不确定它是否支持文件重命名和合并历史记录！）

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-06-01T16:54:41.867

[SourceGear Vault](http://www.sourcegear.com/vault/)与 VS 2008 完美集成，满足您的所有要求。

每个座位 249 美元（提供批量折扣），如果文件需要合并，它会提示您。另外，它有一个很棒的 Diff/Merge 工具。

它对单个用户免费，因此请试一试，看看它是否符合您的要求。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-06-01T16:58:32.910

我同意乔恩·斯基特的观点。（不是每个人吗？！） - ;-)

SVN 仍然是您的绝佳选择。你可以使用像[TortoiseSVN](http://tortoisesvn.tigris.org/)这样的可视化工具来处理你与 SVN 的交互，如果你想从浏览器访问/浏览 repos ，包括像[ViewVC这样的存储库 Web 客户端是一个不错的选择。](http://www.viewvc.org/)

SVN 还内置了一堆可扩展性。您可以将各种自定义操作添加到任何 pre-commit 或 post-commit 事件（以及更多）。

Jon 提到的 Visual SVN 或[Ankh SVN](http://ankhsvn.open.collab.net/)都是 Visual Studio 集成的可行解决方案。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-09-11T14:01:34.567

Re-Perfoce vs SVN：如果你想拥有 Perforce 的合并跟踪功能以及 Subversion 的所有其他功能，Mercurial 看起来相当不错。

# wcf - WCF - 将 MVC 框架从 WinForms 移动到 Silverlight 的 SOA

> ID：935663
> 
> 赞同：0
> 
> 时间：2009-06-01T16:46:34.547
> 
> 标签：wcf, silverlight

我想将我的 MVC 模式（BLL 和 DAL - POCO）从 WinForms 环境移动到 Silverlight 环境。当我开始这个过渡时，我是否必须为我的 POCO 做任何额外的事情来消耗 WCF，即将它们向下移动，例如对它们进行序列化？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-06-01T16:50:19.393

是的。类必须用 [DataContract] 修饰，属性用 [DataMember] 修饰。WCF 使用“选择加入”系统，您必须说明类的哪些部分需要序列化。

# c# - 可以从 C# 调用 C++ 代码吗？

> ID：935664
> 
> 赞同：94
> 
> 时间：2009-06-01T16:46:38.307
> 
> 标签：c#, .net, c++, unmanaged, managed

是否可以从 .NET 语言（如 C#）中调用 C++ 代码（可能编译为代码库文件 (.dll)）？

具体来说，诸如 RakNet 网络库之类的 C++ 代码。

* * *

## 回答 #1

> 赞同：97
> 
> 时间：2009-06-01T16:56:26.953

调用 C++ 的一种简单方法是在 C++/CLI 中创建包装程序集。在 C++/CLI 中，您可以像编写本机代码一样调用非托管代码，但您可以从 C# 调用 C++/CLI 代码，就好像它是用 C# 编写的一样。该语言基本上被设计为与现有库的互操作，作为其“杀手级应用程序”。

例如 - 使用 /clr 开关编译它

```
#include "NativeType.h"

public ref class ManagedType
{
     NativeType*   NativePtr; 

public:
     ManagedType() : NativePtr(new NativeType()) {}
     ~ManagedType() { delete NativePtr; }

     void ManagedMethod()
      { NativePtr->NativeMethod(); } 
}; 
```

然后在 C# 中，添加对 ManagedType 程序集的引用，并像这样使用它：

```
ManagedType mt = new ManagedType();
mt.ManagedMethod(); 
```

查看[此博客文章](https://web.archive.org/web/20140806022309/http://blogs.msdn.com/b/borisj/archive/2006/09/28/769708.aspx)以获取更多解释的示例。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2009-06-01T16:55:32.803

P/Invoke 是一项不错的技术，除了加载目标 DLL 文件的问题外，它工作得相当好。我们发现最好的方法是创建本地函数的静态库并将其链接到依赖它的托管 C++（或 C++/CLI）项目。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2009-06-01T16:50:38.050

我不熟悉你提到的图书馆，但总的来说有几种方法可以做到：

*   [P/Invoke](https://docs.microsoft.com/en-us/dotnet/standard/native-interop/pinvoke)到导出的库函数
*   添加对 COM 类型库的引用（以防您处理 COM 对象）。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2009-06-01T16:54:20.370

是的，它被称为[P/Invoke](https://docs.microsoft.com/en-us/dotnet/standard/native-interop/pinvoke)。

这是一个很好的资源站点，用于将它与 Win32 API 一起使用：

[http://www.pinvoke.net/](http://www.pinvoke.net/)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-06-01T16:49:10.457

当然是。[这篇文章](http://www.codeguru.com/csharp/csharp/cs_data/article.php/c4217)是一个很好的例子，说明你可以做些什么来开始这件事。

我们使用 C# 在 Windows Mobile 设备上使用[P/Invoke](http://msdn.microsoft.com/en-us/magazine/cc164123.aspx)执行此操作。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-06-01T16:51:54.650

用于执行此操作的技术称为[P/Invoke](http://en.wikipedia.org/wiki/Platform_Invocation_Services)；您可以搜索有关该主题的文章。请注意，它是用于从 C# 调用 C，而不是 C++。因此，您需要将 C++ 代码包装在 DLL 导出的 C 包装器中。

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2010-11-25T19:39:00.077

你考虑过 Apache Thrift 吗？

[http://thrift.apache.org/](http://thrift.apache.org/)

这似乎是一个非常巧妙的解决方案。

# java - 有条件地在 JSP 中按用户呈现

> ID：935666
> 
> 赞同：2
> 
> 时间：2009-06-01T16:47:03.453
> 
> 标签：java, spring, jsp, spring-mvc, spring-security

我正在尝试制作一个简单的论坛，只是为了掌握 Spring Security 和 MVC 框架的窍门。

为简单起见，让我们有一个 JSP 来查看论坛帖子，如下所示：

```
<body>
    ...

    Title: ${forumPost.title} <br>
    Author: ${forumPost.author.name} <br>
    Message: {forumPost.message} <br>

    <security:authorize ifAnyGranted="ROLE_ADMIN">
        Edit: <a href="/edit">Edit</a>
    </security:authorize>

    ...
</body> 
```

我的问题是：管理员不仅应该能够编辑这篇文章，而且原作者也应该能够。因此，我只希望ROLE_ADMIN 和原作者能够看到Edit 链接。但是我不确定如何使用*security:authorize*标签按用户过滤，或者我是否需要以不同的方式进行此操作。

任何建议将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-06-01T17:43:10.620

假设您有一个位于此页面后面的控制器，我将简单地添加一个类似于（半伪代码）的`canEditPost`字段：`ModelAndView`

```
private boolean isAdmin() {
    Authentication currentAuthObj = SecurityContextHolder.getContext().getAuthentication();
    List<GrantedAuthority> authorities = Arrays.asList(currentAuthObj.getAuthorites());
    for (GrantedAuthority auth : authorities) {
        if ("ROLE_ADMIN".equals(auth.getAuthority())) {
            return true;
        }
    }
    return false;
}

boolean currentUserIsAuthor = ...;

modelAndView.addObject("canEditPost", 
    Boolean.valueOf(currentUserIsAuthor || isAdmin()); 
```

然后在您看来，只需引用 $canEditPost。

通常，视图只引用模型中的一个简单标志比让视图/模板执行实际逻辑要好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-01T17:14:34.760

您的`Author`对象是否`equals`以每个作者都是独一无二的方式实现？

如果是这样，您可以简单地检查是否`Author`与当前用户相同（您将有两组标签）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-01T18:15:14.780

@matt b 的回答是一个很好的方法，可能是我最终会做的。但我发现了另一种更复杂的方法，但可以实现我在这篇文章中提出的内容。

我做了一些阅读，发现您可以在域对象级别处理安全性，并且本质上为角色或任意对象（例如当前用户 ID）赋予读/写/删除权限。在此示例中，我将授予当前用户 id 访问域对象的权限，在本例中是一个 ForumPost 对象，该对象在数据库中具有自己的唯一 id。

然后，当前用户 ID 将被授予读写访问权限，这可以（通过 XML 配置）定义为各种自定义角色（我相信正确的术语实际上是 Voter）。然后我可以命名这个选民***MESSAGE__EDIT***。

因此，在我的 JSP 中，我可以使用以下内容：

*安全性：授权 ifAnyGranted="MESSAGE_EDIT"*

它会（再次通过 XML 配置）获取当前用户 ID 并根据当前域对象（在本例中为 ForumPost 对象）授予访问权限。

这比听起来要多得多，但绝对可以完成。

在 Spring Security Reference Documentation ( [http://static.springframework.org/spring-security/site/reference/html/springsecurity.html](http://static.springframework.org/spring-security/site/reference/html/springsecurity.html) ( 出于某种原因链接域对象安全部分现在已损坏））。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-01T18:18:55.897

你可以有条件

```
<% if(mycondition.isTrue()){ %>
<security:authorize ifAnyGranted="ROLE_ADMIN">
    Edit: <a href="/edit">Edit</a>
</security:author
<% }%> 
```

# c# - 不可变类型的哈希码

> ID：935669
> 
> 赞同：5
> 
> 时间：2009-06-01T16:47:44.887
> 
> 标签：c#, .net, immutability

关于哈希码的不可变类型是否有任何考虑？

我应该在构造函数中生成一次吗？

您如何明确哈希码是固定的？我是不是该？如果是这样，使用名为 HashCode 的属性而不是 GetHashCode 方法会更好吗？会有什么缺点吗？（考虑到两者都可以，但建议使用该属性）。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2009-06-01T17:06:17.097

> 关于哈希码的不可变类型是否有任何考虑？

不可变类型是最容易正确散列的类型；大多数哈希码错误发生在对可变数据进行哈希处理时。最重要的是哈希和相等是一致的；如果两个实例比较相等，则它们应该具有相同的哈希码。（反过来不一定正确；具有相同散列的两个实例不必相等。）

> 我应该在构造函数中生成一次吗？

这是一种性能优化技术；通过这样做，您可以用增加的空间消耗（用于存储计算值）换取可能的时间减少。我*从不*进行性能优化，除非它们是由现实的、以客户为中心的性能测试驱动的，这些测试根据记录的目标仔细衡量两个选项的性能。如果您精心设计的实验表明 (1) 不这样做会导致您错过目标，并且 (2) 这样做会导致您实现目标，那么您应该这样做。

> 您如何明确哈希码是固定的？

我不明白这个问题。不断变化的哈希码是例外，而不是规则。哈希码总是应该是不变的。如果对象的哈希码发生变化，那么该对象可能会在哈希表中“丢失”，因此每个人都应该假设哈希码保持稳定。

> 使用名为 HashCode 的属性而不是 GetHashCode 方法会更好吗？

您的对象的哪个消费者会说“好吧，我可以调用 GetHashCode()，这是一种保证适用于所有对象的方法，但我将调用这个 HashCode getter，它做同样的事情”？你心里有这样的消费者吗？

如果您没有任何功能消费者，则不要提供该功能。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-06-01T16:53:53.820

我通常不会在构造函数中生成它，但在决定是否缓存它之前，我还想了解更多关于预期用途的信息。

您是否期待少数实例被大量散列并且需要很长时间来计算散列？如果是这样，缓存可能是合适的。如果您期待大量潜在的“丢弃”实例，我不会打扰缓存。

有趣的是，.NET 和 Java 在这方面对 String 做出了不同的选择——Java 缓存哈希，.NET 没有。鉴于许多字符串实例*从未*被散列，而那些*被*散列的实例通常只被散列一次（例如在插入散列表时），我认为我赞成.NET 在这里的决定。

基本上你是在用内存+复杂性来换取速度。正如迈克尔所说，在使您的代码更复杂之前进行测试。当然，在某些情况下（例如对于类库），您无法准确预测实际使用情况，但在许多情况下，您会有一个不错的主意。

不过，您当然不需要单独的财产。除非有人更改对象的状态，否则哈希码应始终保持不变 - 如果您的类型是不可变的，则您已经禁止这样做，因此用户不应期望任何更改。只需覆盖`GetHashCode()`.

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-06-01T16:50:30.797

我会`getHashCode`在第一次调用时生成一次哈希码，然后将其缓存以供以后调用。这样可以避免在不需要时在构造函数中调用它。

如果您不希望`getHashCode`为每个值对象调用很多次，则可能根本不需要缓存该值。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-06-01T16:54:19.700

好吧，您必须有一个 GetHashCode() 覆盖方法，因为这就是消费者检索您的哈希码的方式。大多数哈希码都是相当简单的算术运算，可以快速执行。您是否有理由相信缓存结果（有内存成本）会给您带来显着的性能提升？

从简单开始 - 即时生成哈希码。如果您认为缓存它会看到性能改进，请先进行测试。

法规要求我在这一点上参考“过早的优化是万恶之源”的报价。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-06-01T18:20:04.990

根据我的个人经验，我知道**开发人员非常擅长误判性能问题**。

因此，建议在 GetHashCode() 中动态计算哈希码时，**让一切尽可能简单。**

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-06-01T18:15:14.217

一般来说，计算 HashCode 应该很快。所以缓存不应该是一种优化，也不值得麻烦。

如果分析确实表明 GethashCode 需要大量时间，那么也许您应该缓存它，作为修复。

但我不认为这是正常做法的一部分。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-06-01T16:51:27.363

为什么需要确保哈希码是固定的？哈希码的语义是对于对象的任何给定状态，它始终是相同的值。由于您的对象是不可变的，因此这是给定的。如何选择实现 GetHashCode 由我们决定。

让它成为一个返回的私有字段是一种选择——它小巧、简单、快速。

# html - 在 Windows Mobile 6.0 上渲染 HTML 表格

> ID：935670
> 
> 赞同：1
> 
> 时间：2009-06-01T16:48:39.083
> 
> 标签：html, windows-mobile

我正在尝试呈现要在 Windows Mobile 6.0 设备上显示的 HTML 表格。我使用移动设备模拟器查看输出。这是我的html，我错过了什么吗？该表在其自己的行上显示每个单元格。

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//WAPFORUM//DTD XHTML Mobile 1.0//EN"
           "http://www.wapforum.org/DTD/xhtml-mobile10.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" >
<head><title>

</title></head>

<body> 
   <form name="form1" method="post" action="Default.aspx" id="form1"> 
      <div>   
        <input type="hidden" name="__VIEWSTATE" id="__VIEWSTATE" 
              value="/wEPDwULLTE2MTY2ODcyMjlkZAKh+guFjex39kxMbH4g4N/KD/cn" /> 
      </div>

      <div> <ul><li>Test</li><li>Blah12</li></ul>

      <table border="1">
        <tbody>
         <tr><td>Row 1, Col 1</td><td>Row 1, Col 2</td></tr>
         <tr><td>Row 2, Col 1</td><td>Row 2, Col 2</td></tr>
        </tbody> 
      </table> 

      </div> 
    </form> 
</body> 
</html> 
```

@DanHerbert 的回答是用户可以将手机上的浏览器切换到“桌面”模式。这个问题的第二部分是否有一个元标记来指示移动设备使用“桌面”模式而不是“列”模式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-01T16:55:32.727

尝试更改浏览器的查看模式。

*如果您使用默认的“单列*”（或者可能称为“单列”）视图，Windows mobile 将尝试“优化”表格布局。

您应该确保浏览器设置为使用“*桌面*”模式，否则列将显示不正确。

**更新：**
要通过元标记执行此操作，请将以下内容添加到您的页面：

```
<meta name="MobileOptimized" content="width"> 
```

取自微软的文档：

[`http://msdn.microsoft.com/en-us/library/ms890014.aspx`](http://msdn.microsoft.com/en-us/library/ms890014.aspx)

# powershell - 在 PowerShell 中调用时，New-QADUser CmdLet 不添加 UserPrincipalName

> ID：935675
> 
> 赞同：0
> 
> 时间：2009-06-01T16:48:55.387
> 
> 标签：powershell

我正在尝试使用 CSV 文件、PowerShell 和 Quest 的 AD CmdLets 将用户导入 AD。添加用户时，不会添加 UserPrincipleName。

**这是一个示例 CSV：**

* * *

名字、姓氏、显示名称、SamAccount、用户主体名称、电子邮件

FirstA,LastA,"First Last",FLastAL.ou1,FLastAL.ou1@clients.domain.local,FLastA@outemail.com First2A,Last2A,"First2 Last",FLast2AL.ou1,FLast2AL.ou1@clients.domain.local ,FLast2A@outemail.com

* * *

**这是 PowerShell 代码段：**

```
$Users = Import-Csv $UserFile
foreach ($User in $Users)
{
    New-QADUser -FirstName $User.FirstName -LastName $User.LastName -DisplayName $User.DisplayName -SamAccountName $User.SamAccount -Name $User.SamAccount -UserPrincipalName $User.UserPrincipalName -ParentContainer "OU=$OUName,OU=Customers,DC=clients,DC=domain,DC=local"
} 
```

另外，既然 ServerFault 已经上线，这可能是一个更好的问题吗？我觉得它肯定处于灰色地带。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-06-02T13:30:18.313

FWIW，我检查了最新的 QAD 版本（v1.2）并且它有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-02T16:49:10.630

我认为问题在于我们使用的是不使用 RUS 的 Exchange 2007。当我使用 Exchange 2007 CmdLets 做同样的事情时，一切正常。

# asp.net - ASP.NET 中的开源图像托管或文件共享网站

> ID：935676
> 
> 赞同：2
> 
> 时间：2009-06-01T16:49:00.113
> 
> 标签：asp.net, open-source

我想知道是否有任何免费的开源或付费软件来托管在 ASP.NET 中开发的图像（如 tinypic.com imageshack.us）或文件共享（4shared.com 或 rapidshare.com）。

如果我必须开发相同的东西，我如何删除 IIS 中上传的 2 GB 限制？

这个问题既包含编程问题，也包含非编程问题。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-12T03:01:54.883

[xigla](http://www.xigla.com/afilesend/features.htm)是一个用于快速共享站点的 ASP.NET 解决方案。

[另一个](http://asp.software.informer.com/download-asp-file-sharing-templates/)具有前景链接的链接聚合站点。

[Sharepoint](http://sharepoint.microsoft.com/Pages/Default.aspx)也很不错。

[Nuke Transfer](http://www.snowcovered.com/Snowcovered2/Default.aspx?tabid=242&PackageID=14107)是 DotNetNuke 的文件共享模块。

对于大多数这些解决方案，**文件大小限制来自实际的 IIS 配置**，而不是来自软件。 **[Chris Bunk](http://www.chrisbunk.com/archives/2005/05/overcoming_iis.html)**描述了一种修改 IIS 配置以**允许上传大于 2 GB**的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-10T03:49:31.080

我使用了[Gallery](http://gallery.menalto.com/) - 一个基于 Web 的开源相册管理器。您可以在 Web 服务器上拥有任意数量的画廊，并且每个画廊可以包含任意数量的相册。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-09T11:49:57.327

我为您找到了 2 个网站

1.  [ASP.net 图像库](http://www.hotscripts.com/category/asp-net/scripts-controls/image-galleries/)有一个用于图像管理的开源脚本列表

2.  [负载](http://www.hotscripts.com/listing/i-load-2008/)

正如其他人所说，上传 sie 与编程无关。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-01T16:57:56.530

我推荐亚马逊 S3。它有一个 web 服务接口，虽然我没有这方面的经验，但它应该可以在 ASP 中使用。它的价格非常合理，非常稳定，而且一旦你开始工作，它的网络服务就坚如磐石。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-06-09T02:18:42.600

我很确定[SkyDrive](http://skydrive.live.com/)使用 ASP.NET，但它不是开源的。

您可能需要创建某种外部程序（.Net、Java 或 Flash）来上传大于 2 GB 的文件。或者，您可以创建浏览器扩展。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-06-09T02:35:47.527

您不能上传大于 2 GB 的文件。如果要上传总大小超过 2 GB 的文件，请将文件分开，然后分批上传小于 2 GB 的文件。

请注意，浏览器也有 2GB 的限制。[http://www.motobit.com/help/scputl/pa98.htm](http://www.motobit.com/help/scptutl/pa98.htm)

如果你“真的”需要超过 2GB 的文件上传 http 工具，我建议创建一个 OCX 组件或应用程序，在上传到服务器之前在内部拆分文件。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-06-09T12:38:18.510

我之前测试过[Gallery Server Pro](http://www.galleryserverpro.com/)。这是一个非常好的图片库解决方案，具有大量内置功能。它还能够托管数千张图像，唯一真正的限制是您拥有它的硬盘。

但是如前所述，2gb 的限制来自服务器端。

# c++ - 模拟按住一个键

> ID：935693
> 
> 赞同：0
> 
> 时间：2009-06-01T16:52:07.707
> 
> 标签：c++, winapi, keypress, simulate

我在用着：

```
keybd_event(0x41, 0, 0, 0); 
```

0x41 是一个'a'。但这只会在屏幕上打印一个“a”。我需要它来**按住**键。当我打电话时

```
keybd_event(0x41, 0, KEYEVENTF_KEYUP, 0); 
```

它必须释放密钥。

那可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-01T17:45:43.673

[您可以用SendInput](http://msdn.microsoft.com/en-us/library/ms646310(VS.85).aspx)替换`keybd_event`呼叫。您可以在事件系统允许的范围内插入尽可能多的击键事件。该函数返回成功插入的事件数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-01T17:01:36.743

你想达到什么目的？打算保持按下的键应该已经在您的第一行中这样做了。

[这是](http://msdn.microsoft.com/en-us/library/ms646304(VS.85).aspx)keybd_event() 的文档。也许它会帮助回答你的问题。（也许您需要 GetKeyboardState() 方法？）

如果您只是尝试反复敲击一个键，那么循环第一次调用要比尝试让系统自动重复更容易。您可以在系统信息 API 函数中找到要使用的适当延迟。

# asp.net - 只读访问 Web 服务调用中的会话？

> ID：935695
> 
> 赞同：13
> 
> 时间：2009-06-01T16:52:46.940
> 
> 标签：asp.net, web-services, webforms, session-state

我们有一个 .net asmx Web 服务，它从 javascript（使用 ASP.Net AJAX）调用，并且需要访问 Session。

```
[WebMethod(true)]
public string DoSomethingOnTheServer() { } 
```

我们遇到了会话被读/写请求锁定的问题。有什么方法可以将 Web 服务方法标记为需要对 Session 进行只读访问？

谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2017-06-29T09:39:18.583

这是一个非常古老的线程，但我在寻找相同问题的答案时偶然发现了它。

我在其他地方找到了答案，并将其留给我所在的其他互联网：

在 Global.asax 中，您可以为每个请求指定该请求对会话对象的访问权限，以及它是否应该阻止。

```
private void Application_BeginRequest(object sender, EventArgs e)
{
    // This will set the session to read only for asmx services
    // This will make the asmx services non blocking for other requests as it doesnt lock the session object
    if (Context.Request.Path.Contains(".asmx/"))
    {
        Context.SetSessionStateBehavior(SessionStateBehavior.ReadOnly);
    }
} 
```

这样 asmx 服务始终只有对会话的只读访问权限，不会阻塞其他请求

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2010-10-06T11:10:38.117

这个[http://msdn.microsoft.com/en-us/library/aa480509.aspx](http://msdn.microsoft.com/en-us/library/aa480509.aspx)页面似乎表明答案是“否” - 您不能将 WebSerivce 标记为具有`EnableSessionState=ReadOnly`.

> 如果您从同一个进程同时进行 Web 服务调用，则请求将在服务器上序列化，以便在任何时候只执行一个请求。与支持对 HttpSessionState 对象的只读访问（允许同时处理多个请求）的 .ASPX 页面不同，ASP.NET Web 服务没有这种功能。所有启用会话的 Web 方法调用都具有读/写访问权限，并将在每个会话中进行序列化。

警告：那篇文章很旧（2002 年）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-03T17:28:21.953

根据 WebMethod 属性的[MSDN 文档](http://msdn.microsoft.com/en-us/library/byxd99hx.aspx)，有几个可能的属性，所以我不确定 WebMethod 属性中的“真实”值会做什么。

你有没有尝试过：

```
[WebMethod(EnableSession=true)] 
```

根据[this document](http://msdn.microsoft.com/en-us/library/aa480509.aspx)，您应该可以完全访问会话。

# sql-server - 如何在 SQL Server 中自动存储来自 Oracle 的数据（按计划）

> ID：935697
> 
> 赞同：1
> 
> 时间：2009-06-01T16:52:53.040
> 
> 标签：sql-server, oracle, automation, scheduled-tasks

你好，我是新来的，很抱歉，如果我的问题太基本了。但是，也许您有一些建议，例如链接，它们可以帮助我......我试图找到一些有用的东西几天，但目前没有结果。

我在分布式环境中工作。我在数百英里之外有一台 Oracle 服务器，而我附近有一台 MS SQL 服务器。我正在使用 Visual Web Developer 2008 Express 编写应用程序。我需要一些来自 Oracle 的数据。每次我需要从中获取一些数据时，都不值得查询 Oracle 服务器。我宁愿每晚运行一次 Oracle 查询，并将结果存储在一些本地（SQL Server）表中。我假设，我应该通过标准 Windows 调度程序（Windows Server 2008）运行查询。我有基本的连接——我可以从本地 Visual Studio 打开 Oracle 数据库。

问题是：

1.  如何编写从 Oracle 获取数据并将它们放入 SQL Server 表的查询/过程/函数（可能在每次查询运行之前重新创建）？
2.  如何从命令行运行这样的查询（或以其他方式从调度程序运行）
3.  哪些命名约定适用？在 VS 中，我使用类似 //IP.IP.IP.IP/Name 的东西和一个带密码的用户。

感谢您的任何帮助或建议。

问候， 马特奥

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-01T16:52:53.150

我建议您与 Oracle 和 SQL Server 数据库的 DBA 交谈，因为您可能需要牢记其他注意事项。（数据完整性、安全性、所有权等）

您可以遵循的一种方法是实施 DTS（对于旧数据库）或 SSIS（对于新版本的 SQL Server）进程，以按照您想要的时间表复制数据。（这几乎就是他们建造的目的。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-15T18:49:29.410

我们在谈论多少数据？如果您每天需要传输的数量很少，您可以用您选择的语言编写一个愚蠢的提取和插入脚本。如果“同步”会占用太多资源，您只需要寻找更好的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-01T23:20:39.037

谢谢...

我是 SQL Server 的 DBA，它只为我的应用程序服务。对于 Oracle，我只想读取数据，并且我有足够的权限并与 DBA 达成一致。安全性、所有权和完整性目前不是问题。我只需要一些技术建议如何按计划将数据从 Oracle 获取到 MSSQL 表。

我使用 MS SQL Server 2008 Express SP1。我非常接近解决我的问题 - 我已经建立了连接，一切都已安装并正常工作。我只是不知道如何运行查询，该查询会定期从 Oracle 获取数据并放入 MSSQL，而无需手动交互。

我有一些编程经验，但在数据库方面经验不多（创建复杂的 SQl 查询除外）。因此，一些示例或详细描述的链接会有所帮助。我不确定命名约定、过程、函数和查询之间的差异、运行数据库自动化过程的命令行选项等等。我也不确定 MS SQL Server 2008 Express 版本中提供了哪些机制或技术。

# eclipse - 如何在 Eclipse 中设置 ${user} 以获得正确的@author 标签？

> ID：935711
> 
> 赞同：152
> 
> 时间：2009-06-01T16:55:54.627
> 
> 标签：eclipse

> **可能重复：**
> [如何更改 Eclipse 模板中使用的 ${user} 变量的值](https://stackoverflow.com/questions/246192/how-to-change-the-value-of-user-variable-used-in-eclipse-templates)

我正在使用 Eclipse，每次创建代码时，@author 都设置为 ${user} 的值。不幸的是，${user} 似乎包含我的 Windows 登录 ID。有没有办法通过 Eclipse 覆盖它？我找不到选项。

* * *

## 回答 #1

> 赞同：184
> 
> 时间：2009-06-01T17:05:40.933

我不确定 Eclipse 本身是否有办法。但据我所知，`${user}`使用`user.name`环境变量的值；因此，您可以传入`-Duser.name=My Name`eclipse.ini 来覆盖它。

或者，如果您愿意，可以修改快捷方式以指向：

```
C:/java/eclipse/eclipse.exe -vmargs -Duser.name="cleverUserNameToUseInSourceCode" 
```

如[本博客条目](http://morlhon.net/blog/2005/09/07/eclipse-username/comment-page-1/)所示。

![@作者 ${用户}](https://i.stack.imgur.com/5ui4a.png)

* * *

## 回答 #2

> 赞同：182
> 
> 时间：2009-06-01T17:03:42.217

```
Windows > Preferences > Java > Code Style > Code Templates > Comments 
```

选择`Types`并编辑模板以插入另一个值（现在可能是固定值，或者按照 mmyers 的建议更改[user.name 属性）](http://dev.eclipse.org/newslists/news.eclipse.tools.jdt/msg18308.html)

```
/**
 * @author myUserValue
 *
 * ${tags}
 */ 
```

![代码模板首选项](https://i.stack.imgur.com/YbSRQ.png)

# sql - 数据库系统架构讨论

> ID：935716
> 
> 赞同：0
> 
> 时间：2009-06-01T16:57:16.983
> 
> 标签：sql, architecture

我想开始讨论数据库系统的实现。

我正在为一家拥有超过 ca 的数据库系统的公司工作。过去 10 年。

让我试着描述一下它在做什么以及它是如何实现的：

该系统分为 3 个主要部分，由 3 个不同的团队处理。

1.  条目：条目团队负责为系统创建 GUI。后台是一个巨大的 MS SQL 数据库（大约 100 个表），GUI 是使用 .NET 创建的。有不同的 GUI 应用程序，每个应用程序都有许多不同的选项卡来填写相应的表格。例如，如果将新列添加到数据库中，则该列将手动添加到 GUI 应用程序中。

2.  数据流：数据流团队的目的是进行数据计算并为报告团队准备数据。这是通过多个级别完成的。让我试着更详细地解释一下这个过程：数据流团队使用来自条目数据库的数据通过事务复制复制到另一个服务器和另一个数据库（这个数据包含来自所有客户端的信息）。然后每小时一次，一个自写的应用程序检查输入表中的更改行（使用 ChangedDate 列），然后为每个输出表调用一个存储过程，使用 1-N 个输入表计算新数据。之后，再次使用事务复制将数据复制到另一台服务器上的另一个数据库。这里调用另一个存储过程来计算额外的新输出表。此存储过程使用 SQL 作业启动。从那里数据被拆分到不同的数据库，每个数据库都是特定于客户的。此复制是使用另一个使用 .NET bulkcopy 命令（在客户端进行过滤）的自行编写的应用程序完成的。这些客户特定数据库通过另一个自行编写的应用程序复制到其他服务器上的不同客户特定报告数据库，该应用程序将报告数据库与客户特定数据库进行比较以计算数据差异。仅复制数据差异（因为报告数据库以前在客户端服务器上运行）。这整个过程由另一个自行编写的应用程序进行编排，以控制例如事务复制是否在开始调用存储过程的作业之前完成...... 此外，这里还安排了不同客户端之间的同步。该过程可以通过一个自写的监控工具以图形方式显示，您可以想象它看起来非常复杂......所有这些组件的状态都被记录下来，并且可以由另一个自写的应用程序查看。如果添加了新的列或表，则必须手动更改所有这些组件。对于部署，安装说明是使用 MS Word 编写的。（大约 10 人在这个团队中工作）对于部署，安装说明是使用 MS Word 编写的。（大约 10 人在这个团队中工作）对于部署，安装说明是使用 MS Word 编写的。（大约 10 人在这个团队中工作）

3.  报告：报告团队创建了自己的用 .NET 编写的平台，以允许客户通过 GUI 创建自定义报告。这些报告可通过 Web 访问。

最大的表有大约 100 万行。所以，我希望我没有忘记任何重要的事情。

好吧，我想讨论的是其他人如何实现这种情况，我无法想象每个公司都编写自己的自定义应用程序。实际上允许对数据库进行快速计算的可能性是什么（在使用 T-SQL 之后）。我不知何故错过了我以前的公司习惯的面向对象编程的链接，但我们从来没有处理过这么多数据，也许为了快速计算，这就是这样做的方法......或者有可能吗使用例如 LINQ 或 BizTalk Server 来创建算法和计算，甚至可能以图形方式？问题只是如何将现有的米长存储过程转换为新格式...将来我们想使用数据仓库，但这需要一段时间，所以也许可以有一个单独的步骤来简化流程.

任何意见表示赞赏。

谢谢丹尼尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-01T19:07:36.397

最好的建议是先了解 SQL 是如何工作的，然后在现有架构的上下文中做这件事听起来是一个很好的开始方式（因为从表面上看，你所描述的一切听起来都不合理.)

无论您尝试在上面放置什么抽象（LINQ、Biztalk 等等），最终都会解析为纯 SQL。而且它们几乎总是会增加开销和复杂性。

您的 OO 范例是不可转移的。基于你对 SQL 后果的牢牢把握，任何关于抽象的建议都需要得到坚定的辩护。

这将需要一段时间，但这一切都值得了解，无论是专业的还是个人的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-01T18:24:57.040

你到底为什么要将现有的工作复杂的存储过程（可以调整性能）转换为 LINQ（或者我误解了你）？因为你个人不喜欢t-sql？不是一个足够好的理由。他们太慢了吗？然后可以调整它们（这是您真的不想在 LINQ 中尝试做的事情）。使用 SSIS 可以使该过程变得更好，但是与 SSIS 一样复杂以及重写该过程所需的时间量，我不确定这样做是否真的会有所收获。

“我不知何故错过了面向对象编程的链接......” 关系数据库不是面向对象的，如果你试图像对待它们一样对待它们，它们就不能很好地执行。学习在访问数据库时考虑集合而不是对象。您来自一个用户一次插入一条记录的心态，但这不是处理大量数据传输所需的心态。对于这些类型的事情，使用数据库来处理问题比以面向对象的方式做事情要好。一旦您拥有大量数据和大量报告，人们对性能的兴趣就会远远超过您过去使用某些可能对性能不太好的工具时所习惯的兴趣。不管你喜不喜欢 T-SQL，它就是 SQL Server'

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-01T18:48:11.210

我目前正在重新设计一个复杂的系统，该系统正在从 Focus（数据库和语言）转移到数据仓库（单独的团队）和处理（我的团队）和报告（单独的团队）。

合并当前流程 - 在 Focus 语言和 Focus 数据库中加载和管理数据，然后报告（并保留历史数据）

在新进程中，DW 被加载，然后我们的进程开始。我们的流程完全用 SQL 编码，一百万行的事实表（一个月）相对较小。我们有一些每月数据为 2500 万行的提要。生成的一些统计表超过 2 亿行（一个月）。处理可能需要每月几个小时，端到端。我们使用表来存储中间结果，并确保索引策略适合处理。除了由于极差的标量 UDF 性能而实现为从数据库返回到自身的 SSIS 流之外，整个系统都实现为一系列 T-SQl SP。

我们还有一个流程监控系统，类似于您正在讨论的内容，并且将依赖项放在一个表中，以确保每个流程只有在满足其所有先决条件时才运行。我最近移植了 MSAGL，以图形方式显示来自 .NET Windows 应用程序的进程并与进程交互（以前我使用 graphviz 生成静态图像）。因此，新系统具有更清晰的依赖信息以及有关流程性能的良好信息，因此可以将精力集中在性能最慢的瓶颈上。

如果没有明确的战略、现有系统的良好库存以及大量的时间和金钱预算，我不会计划对任何复杂系统进行任何重新设计。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-01T17:42:40.463

从你所说的声音来看，你有一个三步过程。

1.  输入数据
2.  分析数据
3.  报告数据

第一步和第三步需要由“用户”完成。因此，每个团队都需要一个 GUI 来完成手头的任务，否则，他们将直接在 SQL Server 上工作，并且需要广泛的 SQL 知识。对于这些项目，我认为您的组织采用的方法没有任何问题，您正在构建一个定制的系统来报告手头的数据。在这方面可能值得考虑的唯一项目是公共库团队之间的标准化和所使用的技术。

你的中间步骤似乎有点长，有很多活动部件。但是，我曾在许多大型报告系统上工作过，而这确实是绕过它的唯一方法。在不了解您的组织和运营的确切性质的情况下。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-06-01T19:32:24.083

通过“快速计算”，您必须意味着“快速检索”数据仓库（关系型和其他方面）在数学方面的速度很快，因为答案是预先计算好的。SQL，除非您使用 CLR 存储过程，否则在数学方面通常相当慢。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-06-01T20:17:50.500

您将很难用其他任何东西击败 BCP 和 SQL 的性能。如果更新例程因为循环遍历表而冗长而臃肿，那么我肯定明白您为什么要使用 .NET。但是您可能会通过弄清楚如何将它们全部重写并基于 SET 来提高性能。BCP不会被打败。当我使用 SQL Server 2000 时，BCP 通常比 DTS 快。一般来说，SSIS（由于所有数据类型检查）似乎比 DTS 慢得多。如果你扼杀表现，毫无疑问人们会来找你。尽管如此，如果您正在逐行执行大量复杂计算，则将其优化为 CLR 存储过程，甚至是从 SQL Server 调用以进行处理的 .NET 应用程序可能会加快速度。当然，如果您是行处理并且您设法重写查询以进行集合处理，您可能会获得更大的速度。但取决于计算的复杂程度，.NET 可能会有所帮助。

现在，如果前端更改可以立即更新和传播数据，那么您可能希望将内容更改为 .NET，以便在更改行后立即重新计算并更新所有客户端。但是，如果更改了很多行或数据库非常庞大，那么您将降低性能。如果该操作需要批量完成，那么当前完成的方式可能是最好的。

我唯一可能会想到的是，除了表名和/或列名之外，可能有很多看起来完全相同的重复 SQL。如果是这样，您可能可以使用.NET 与 SQL-SMO（或 DMO，如果使用 SQL Server 2000）结合使用代码生成它。

这是我经常看到的加载数据仓库的示例

假设某些行表加载了来自源的数据

从源中选择更改的行到临时表中
查看是否有任何重要的列已更改
，如果是，则终止现有行（或将其克隆到某个历史表中）
插入/更新新行

我经常看到每个表中的一个查询，唯一的变化是表/列名，可能是对键列的引用。您可以轻松地从 SQL Server 中获取列定义和键定义，然后制作一个 .NET 程序来创建 INSERT/SELECT/ETC。在最坏的情况下，您可能只需要为重要的列存储某种类型的表，其中包含 TABLE_NAME、COLUMN_NAME。然后，您不必纠结于复杂的 ETL 过程和 20 或 200 个更新查询，而只需关注 UPDATE 和一个查询。对事情完成方式的任何更改都可以一次性完成并应用于所有查询。

特别是我的猜测是，如果您还没有将这种技术应用于各个客户端数据库，那么您可以将其应用于各个客户端数据库。除了数据库/服务器名称之外，可能所有查询/批量复制脚本都相同或几乎相同。所以你可以根据 CLIENTs 表或其他东西自动生成它们......

# iphone - 如何在 NSURLConnection 中使用 HTTPS？

> ID：935722
> 
> 赞同：0
> 
> 时间：2009-06-01T16:59:13.640
> 
> 标签：iphone, https, nsurlconnection

我对 HTTPS 感兴趣`NSURLConnection`。是否可以发送请求、响应质询并加载安全 URL？

还有什么可以`NSURLConnection`通过 HTTPS 完成的吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-06-01T18:12:04.487

```
NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:[NSURL URLWithString:@"http://monsite/mapage.php"]
cachePolicy:NSURLRequestReloadIgnoringLocalCacheData
timeoutInterval:60.0];
[request setHTTPMethod:@"POST"];
[request setHTTPBody:[[NSString stringWithFormat:@"score=222"] dataUsingEncoding:NSUTF8StringEncoding]];
[[UIApplication sharedApplication] setNetworkActivityIndicatorVisible:YES];
NSURLConnection *connection = [[NSURLConnection alloc] initWithRequest:request delegate:self]; 
```

然后为 NSURLConnection 实现适当的委托方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-02T16:48:39.133

NSUrlConnection 开箱即用，支持 HTTPS。你不必做任何特别的事情。

# emacs - 在 emacs 中查找制表符

> ID：935723
> 
> 赞同：66
> 
> 时间：2009-06-01T16:59:14.733
> 
> 标签：emacs

如何在 emacs 中找到制表符？

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2009-06-01T17:01:28.333

```
C-s C-q <TAB> 
```

Cs 开始一个增量搜索，然后 Cq 运行quoted-insert，它会插入您按字面输入的下一个字符。然后，按 TAB 键将插入一个制表符。继续按 Cs 以转到下一个制表符。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2009-06-01T17:12:02.673

只需按如下方式组合键：

```
C-s TAB 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2009-06-03T03:51:43.253

我使用[空白模式](http://www.emacswiki.org/emacs/WhiteSpace)突出显示 .emacs 文件中具有以下内容的所有选项卡：

```
;whitespace http://www.emacswiki.org/emacs/WhiteSpace 
(require 'whitespace)
(setq whitespace-style '(tabs tab-mark)) ;turns on white space mode only for tabs
(global-whitespace-mode 1) 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2009-06-01T17:02:36.757

点击`C-s`开始增量搜索，然后键入`C-q C-i`以搜索文字制表符。

如果要可视化制表符，可以将以下内容添加到`~/.emacs`文件中以使制表符着色：

```
; Draw tabs with the same color as trailing whitespace
(add-hook 'font-lock-mode-hook
  '(lambda ()
     (font-lock-add-keywords
       nil
        '(("\t" 0 'trailing-whitespace prepend))
     )
   )
) 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-10-11T21:10:20.233

在某些版本的 emacs 中，你可以简单地做

```
C-s <TAB> 
```

`<TAB>`tab 键的行程在哪里。

如果这不起作用，`C-i`是 的同义词`<TAB>`，因此要搜索标签，请执行

```
C-s C-i 
```

此外，`C-q <TAB>`与 的含义相同`C-i`，因此您还可以使用

```
C-s C-q <TAB> 
```

此外，`C-i`or`C-q <TAB>`可用于在其他没有制表键的情况下插入制表符。例如，如果您将 emacs 设置为[将制表符自动扩展为空格](http://www.gnu.org/software/emacs/manual/html_node/eintr/Indent-Tabs-Mode.html)，您仍然可以`C-i`在编辑时插入制表符。

# debugging - 在发布模式下从 pdb 获取行号

> ID：935726
> 
> 赞同：8
> 
> 时间：2009-06-01T17:00:47.367
> 
> 标签：debugging, line, pdb-files

调试器（或 CLR 异常处理程序）是否可以使用 pdb 显示在发布模式下发生异常的行？

发布模式下的代码经过优化，并不总是遵循“原始”代码的顺序和逻辑。

令人惊讶的是，即使在发布模式下，调试器也可以逐步浏览我的代码。优化应该使导航非常不舒服。

能否请您为我澄清这两点？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-06-01T17:47:19.253

我不太熟悉如何使用 CLR 完成此操作，但它可能与使用本机代码完成的方式非常相似。当编译器生成机器指令时，它会向 pdb 添加条目，基本上说“当前地址 X 处的指令来自 foo.cpp 中的第 25 行”。

调试器知道当前正在执行的程序地址。因此它在 pdb 中查找某个地址 X，并发现它来自 foo.cpp 中的第 25 行。使用它，它能够“逐步”通过您的源代码。

无论 Debug 还是 Release 模式，这个过程都是一样的（前提是在 Release 模式下完全生成了一个 pdb）。但是，您是对的，由于优化，调试器通常在发布模式下不会“线性”地通过代码。它可能会意外跳到不同的行。这是由于优化器改变了指令的顺序，但它并没有改变地址到源行的映射，所以调试器仍然能够遵循它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-01T18:06:35.293

[@Not Sure] 几乎是对的。*编译器*尽最大努力识别与当前机器代码指令密切匹配的适当行号。

PDB 和调试器对优化一无所知；PDB 文件本质上将机器代码中的地址位置映射到源代码行号。在优化的代码中，并不总是可以将汇编指令与特定的源代码行完全匹配，因此编译器会将其手头最接近的内容写入 PDB。这可能是“之前的源代码行”，或“封闭上下文（循环等）的源代码行”或其他内容。

无论如何，调试器基本上会在 PDB 映射中找到最接近当前 IP（指令指针）的条目（如“之前或等于”）并突出显示该行。

有时匹配不是很好，那就是当您看到突出显示的区域在整个地方跳跃时。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-01T17:11:11.833

调试器会尽力猜测问题发生的位置。它不能保证 100% 准确，并且使用完全优化的代码，它通常会不准确 - 我发现不准确的地方从几行到完全错误的调用堆栈不等。

调试器对优化代码的准确程度实际上取决于代码本身以及您正在进行哪些优化。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-01T17:52:41.400

参考以下 SO 问题：

[在发布模式下显示 .NET 程序集的堆栈跟踪中的行号](https://stackoverflow.com/questions/628565/display-lines-number-in-stack-trace-for-net-assembly-in-release-mode)

# php - 使用 PHP+MySQL 的服务器进程

> ID：935729
> 
> 赞同：2
> 
> 时间：2009-06-01T17:01:17.680
> 
> 标签：php, multithreading, timer-jobs

我是网络编程新手，我正在使用 PHP + MySQL 开发一个简单的约会应用程序。有没有一种简单的方法可以在计时器上添加后台进程（例如，发送每日约会提醒）？这可以用另一种语言轻松完成，但我希望它只使用 PHP 在共享主机上运行。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-06-01T17:07:01.353

您的主人可能会也可能不会同意这一点。您可以编写一个 PHP 脚本以在命令行上使用，并创建一个 crontab 条目以定期运行它。如果您没有对 PHP 解释器的命令行访问权限，您可以编写脚本以在 Web 服务器中运行并使用 wget 或 curl 访问它，也可以使用 crontab 条目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-01T18:05:55.700

我在一个无法设置 cron 作业的地方工作，所以我创建了一个页面，当查看它时，它会检查自上次执行作业列表以来的时间。如果自上次运行作业以来的时间超过设定的阈值，它将运行作业列表。然后我在一台我知道一直打开并连接到互联网的计算机上设置了一个计划作业，并且每 10 分钟打开一次页面。一直工作得很好。在堆栈溢出播客节目中从 Joel 那里得到了这个想法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-01T17:56:55.777

如果你有一个 Linux 虚拟主机，你也许可以使用 cronjob（定期自动运行脚本）——即使在共享主机上也是如此。一些具有共享虚拟主机的虚拟主机允许您通过 cPanel（或它们使用的任何东西）创建 cronjobs。

这真的是你最好的选择，而不是在服务器上创建一个后台进程，网络主机可能不会很友好。所以一定要检查一下你是否可以使用cron。

# c# - 在 Visual Studio 中调试期间如何停止所有异常的执行？

> ID：935741
> 
> 赞同：3
> 
> 时间：2009-06-01T17:03:24.400
> 
> 标签：c#, visual-studio-2008, build

在我的代码中，我目前有一个异常处理设置，它将异常记录到文本文件中。但是，当我调试代码时，我宁愿不处理异常并让执行停止，也不愿读取文件、设置断点等。有没有一种简单的方法可以使用 Build 和 Release 配置来做到这一点（一些就像我可以用来注释掉一些异常处理代码的预处理器指令一样）？

事实证明，有一个比原始问题更好的解决方案，请参阅第一个答案。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-06-01T17:10:05.453

C# 确实有可用于此目的[的预处理器指令（例如 if、define 等...）。](http://msdn.microsoft.com/en-us/library/4y6tbswk.aspx)

但是，您也可以在 Visual Studio 中修改“调试 -> 异常...”下的设置，以便每次抛出异常时调试器都会中断（在执行到 catch 块之前）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-06-01T17:08:29.947

尝试这样的事情：

```
if ( System.Diagnostics.Debugger.IsAttached )
    System.Diagnostics.Debugger.Break();
else 
    LogException(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-01T17:10:47.700

```
#if DEBUG
// Something
#else
// Something else
#endif 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-10-22T15:35:00.060

看看这个 ：

[http://dotnetgalactics.wordpress.com/2009/10/22/user-unhandled-checkbox-not-shown-in-exceptions-window/](http://dotnetgalactics.wordpress.com/2009/10/22/user-unhandled-checkbox-not-shown-in-exceptions-window/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-06-03T15:19:02.567

我会犹豫使用预处理器指令。我想您想要一些可以轻松应用于您的整个解决方案的东西，而*不是*在您的代码中粘贴预处理器指令。

在之前的答案中，乔尔的答案很好。但是，您可以通过转到 Debug/Exceptions 并确保选中“Common Language Runtime Exceptions”行中的复选框来完成相同的操作。默认情况下通常选择用户未处理。

# vb.net - 更改 Crystal 报表参数

> ID：935751
> 
> 赞同：0
> 
> 时间：2009-06-01T17:05:43.163
> 
> 标签：vb.net, crystal-reports, parameters

有一个用 Visual Basic、.NET 3.5 (VS2008) 编写的应用程序......并在 Crystal Reports 2008 中创建了报表......一切正常......我用这样的代码传递参数值......

```
Dim SParams as new hashtable
SParams.add(paramname1,paramvalue1)
SParams.add(paramname2,paramvalue2)
SParams.add(paramname3,paramvalue3)
....
For Each Param As ParameterField In rep.ParameterFields
            If SParams.ContainsKey(Param.Name.ToUpper) Then
                rep.SetParameterValue(Param.Name, SParams(Param.Name.ToUpper))
            Else
                rep.SetParameterValue(Param.Name, Param.DefaultValues())
            End If
Next
... and it works fine... 
```

我想在运行时在报表查看器中显示报表时更改一些参数值......用户应该能够修改这些值。我怎样才能做到这一点？类似于 Crystal Reports 设计器预览。从 CR 预览中是否可以更改值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-01T17:40:28.783

我过去解决这个问题的一种方法是创建我自己的“参数输入”屏幕，让用户指定他们的自定义值。提交后，该流程会运行自己的自定义查询并将结果集注入到 Crystal Report 中。然后，该报告仅用作数据的呈现机制。

这样做的好处是您可以将 Crystal Report 配置为使用 XSD 源作为其数据模型，该模型充当数据外观的空骨架。然后在表单后面的代码中，您可以执行以下简单操作：

```
Dim crResults As New ReportDocument
Dim dtReportData As New DataTable

crResults.Load("PathToReport", OpenReportMethod.OpenReportByTempCopy)
dtReportData = RunStoredProcedure(ReportInfo.ProcedureName, ReportInfo.Parameters)
crResults.SetDataSource(dtReportData) 
```

注意： RunStoredProcedure 是我设置的自定义函数，用于调用存储过程并传入要绑定的参数的 HashTable，但您可以通过任何方式滚动此函数，以获取存储结果的 DataTable。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-03T00:17:44.883

感谢您的帮助...我得到了答案...这是代码

```
Private Sub SetParameters(ByVal Params As Hashtable)
    rep.DataDefinition.ParameterFields.Reset() ' rep is the ReportDocument
    ' rep.Refresh()
    For Each Param As ParameterField In rep.ParameterFields
        If Params.ContainsKey(Param.Name.ToUpper) Then
            rep.SetParameterValue(Param.Name, Params(Param.Name.ToUpper))
        Else
            rep.SetParameterValue(Param.Name, Param.DefaultValues())
        End If
    Next
    SetReport(rep)
End Sub

Public Sub SetReport(ByVal rpt As ReportDocument)
    RP_Viwer.Hide()
    RP_Viwer.ReportSource = rpt
    RP_Viwer.Zoom(75)
    RP_Viwer.Refresh()
    RP_Viwer.ShowLastPage()
    Lbl_TotalPageCount.Text = "/" & RP_Viwer.GetCurrentPageNumber()
    RP_Viwer.ShowFirstPage()
    RP_Viwer.Show()
End Sub 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-02T17:49:02.623

我可能分配错了问题。看...我创建了水晶报表文档（发票）...该文档有许多参数te名称，地址，电话，税率和其他...并已绑定到Datatable，其中包括有关商品、数量、成本和其他信息......这一切都很好......我用这个代码做的。

```
Dim rptobj As New rpt_Invoice ' my invoice sceleton
Using tblInvoice As New DataTable
'DataTable to bind
tblInvoice.Columns.Add("ANAME", GetType(String))
tblInvoice.Columns.Add("CNT", GetType(Double))
tblInvoice.Columns.Add("CNTSTR", GetType(String))
tblInvoice.Columns.Add("OUT_PR", GetType(Double))
For Each row As Datagridviewrow In rowCol
    Dim Drow As Data.DataRow = tblInvoice.NewRow
    Drow.Item("ANAME") = DBNullBug(row.Cells("ANAME").Value)
    Drow.Item("CNT") = row.Cells("DECCNT").Value
    Drow.Item("CNTSTR") = row.Cells("CNT").Value
    Drow.Item("OUT_PR") = row.Cells("SOLD_PR").Value
    tblInvoice.Rows.Add(Drow)
Next
'Params to pass 
Dim RPTParams As New Hashtable
RPTParams.Add("NDS", OPT.Item.NDSValue)
RPTParams.Add("INVOICENUM", "")
RPTParams.Add("INVOICEHIMQ", "")
RPTParams.Add("KATPASHT1", "Director")
RPTParams.Add("KATPASHT2", "Accountant")
RPTParams.Add("VCHPASHT1", "Director")
RPTParams.Add("VCHPASHT2", "Accountant")
RPTParams.Add("ADATE", CDate(Now))
RPTParams.Add("INFO", "")
RPTParams.Add("ORDER_ID", Order_Id)
Dlg_RepPreview.STable = tblInvoice
Dlg_RepPreview.SParams = RPTParams
Dlg_RepPreview.rep = rptobj
Dlg_RepPreview.ShowDialog()
End Using 
```

而名为“Dlg_RepPreview”的表格有rep变量（reportdocument）和STable（DataTable），SParams为Hashtable（带参数的hashtable）。

在 Form_Load 我写了这段代码

Private Sub Dlg_Rep_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load RP_Viwer.ReportSource = rep ' RP_Viwer 是我的 ReportViewer If STable IsNot Nothing Then rep.SetDataSource(STable) ' setup datasource End If For Each Param As ParameterField In rep.ParameterFields ' set parametervalues If SParams.ContainsKey(Param.Name.ToUpper) Then rep.SetParameterValue(Param.Name, SParams(Param.Name.ToUpper)) Else rep.SetParameterValue(Param.Name, Param.DefaultValues( )) End If Next RP_Viwer.Zoom(75) RP_Viwer.Refresh() End Sub

在这种形式中，我有一个按钮。当用户单击该按钮时，打开对话框表单，报告中包含所有参数和值（无数据源）。用户可以更改数据源（等货物、数量、成本）以外的参数值（等地址、电话、姓名）。我不能那样做。我尝试像这样简单的代码：

```
rep.SetParameterValue(Param.Name, Param.value)
rep.Refresh()
RP_Viwer.Refresh() 
```

但是这段代码不起作用......我该怎么办？？？

# .net - 如何为 WCF 中的 [WebGet] 方法发出裸 XML？

> ID：935757
> 
> 赞同：10
> 
> 时间：2009-06-01T17:06:32.010
> 
> 标签：.net, wcf, xml-serialization

如何定义 [OperationContract] [WebGet] 方法以返回存储在字符串中的 XML，而不用 HTML 编码字符串？

该应用程序使用 WCF 服务返回已存储为字符串的 XML/XHTML 内容。XML 不对应于通过 [DataContract] 的任何特定类。它旨在由 XSLT 使用。

```
[OperationContract]
[WebGet]
public XmlContent GetContent()
{
   return new XmlContent("<p>given content</p>");
} 
```

我有这堂课：

```
[XmlRoot]
public class XmlContent : IXmlSerializable
{
    public XmlContent(string content)
    {
        this.Content = content;
    }
    public string Content { get; set; }

    #region IXmlSerializable Members

    public System.Xml.Schema.XmlSchema GetSchema()
    {
        return null;
    }

    public void ReadXml(XmlReader reader)
    {
        throw new NotImplementedException();
    }

    public void WriteXml(XmlWriter writer)
    {

        writer.WriteRaw(this.Content);
    }
    #endregion
} 
```

但是当序列化时，有一个根标签来包装给定的内容。

```
<XmlContent>
  <p>given content</p>
</XmlContent> 
```

我知道如何更改根标记的名称 ([XmlRoot(ElementName = "div")])，但如果可能的话，我需要省略根标记。

我也尝试过 [DataContract] 而不是 IXmlSerializable，但它似乎不太灵活。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-06-01T18:12:36.983

返回一个 XmlElement。您不需要 IXmlSerializable。您不需要包装类。

示例服务接口：

```
namespace Cheeso.Samples.Webservices._2009Jun01
{
    [ServiceContract(Namespace="urn:Cheeso.Samples.Webservices" )]
    public interface IWebGetService
    {
        [OperationContract]
        [WebGet(
                BodyStyle = WebMessageBodyStyle.Bare,
                    RequestFormat = WebMessageFormat.Xml,
                    ResponseFormat = WebMessageFormat.Xml,
                    UriTemplate = "/Greet/{greeting}")]
        XmlElement Greet(String greeting);
    }
} 
```

服务实现：

```
namespace Cheeso.Samples.Webservices._2009Jun01
{
    [ServiceBehavior(Name="WcfWebGetService",
                     Namespace="urn:Cheeso.Samples.WebServices",
                     IncludeExceptionDetailInFaults=true)]

    public class WcfWebGetService : IWebGetService
    {
        public XmlElement Greet (String greeting)
        {
            string rawXml = "<p>Stuff here</p>";
            XmlDocument doc = new XmlDocument();
            doc.Load(new System.IO.StringReader(rawXml));
            return doc.DocumentElement;
        }
    }
} 
```

另请参阅这个类似的问题，但没有 WebGet 扭曲：
[serializing-generic-xml-data-across-wcf-web-service-requests](https://stackoverflow.com/questions/935080/serializing-generic-xml-data-across-wcf-web-service-requests)。

# mysql - 以原子方式将一个 MySQL 表复制到另一个表上？

> ID：935760
> 
> 赞同：8
> 
> 时间：2009-06-01T17:06:58.483
> 
> 标签：mysql

我正在尝试“以原子方式”将一张表复制到另一张表上。基本上我想定期更新一个表，这样如果另一个进程正在更新表，从表中读取的进程不会得到不完整的结果。

为了提供一些背景信息，我想要一个充当游戏排行榜的表格。此排行榜将通过一个单独的过程每隔几分钟更新一次。我的想法如下：

表 SCORES 包含可公开查看的排行榜，当用户查看排行榜时将读取该排行榜。该表每隔几分钟更新一次。更新排行榜的过程将创建一个包含新排行榜的 SCORES_TEMP 表。创建该表后，我想“原子地”将其所有内容复制到 SCORES。我想我想做的是：

```
TRUNCATE TABLE SCORES;
INSERT INTO SCORES SELECT * FROM SCORES_TEMP; 
```

我想替换 SCORES 中的所有内容。我不需要维护我的主键或自动递增值。我只想从 SCORES_TEMP 中引入所有数据。但是我知道如果有人在这两条语句完成之前查看分数，那么排行榜将是空白的。我怎样才能原子地做到这一点，这样它就不会显示空白或不完整的数据？谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-06-01T17:14:42.670

使用[重命名表](http://dev.mysql.com/doc/refman/5.0/en/rename-table.html)

```
RENAME TABLE old_table TO backup_table, new_table TO old_table; 
```

它是原子的，适用于所有存储引擎，并且不必重建索引。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-01T17:12:19.600

在 MySQL 中，由于[TRUNCATE 的行为，](http://dev.mysql.com/doc/refman/5.1/en/truncate.html)我认为您需要：

```
BEGIN TRANSACTION;
DELETE FROM SCORES;
INSERT INTO SCORES SELECT * FROM SCORES_TEMP;
COMMIT TRANSACTION; 
```

我不确定有没有办法让 DDL 操作事务始终有效。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-06-01T17:13:02.780

您可以使用交易（for `InnoDB`），

```
BEGIN TRANSACTION;
DELETE FROM SCORES;
INSERT INTO SCORES SELECT * FROM SCORES_TEMP;
COMMIT; 
```

或`LOCK TABLES`（对于`MyISAM`）：

```
LOCK TABLES;
DELETE FROM SCORES;
INSERT INTO SCORES SELECT * FROM SCORES_TEMP;
UNLOCK TABLES; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-01T17:12:28.913

我不知道热门的 MySQL 处理事务，但在 T-SQL 中你可以写

```
BEGIN TRAN
DELETE FROM SCORES
INSERT INTO SCORES SELECT * FROM SCORES_TEMP
COMMIT TRAN 
```

这样，您的操作将是“原子的”，但不是即时的。

# java - 如何在多个参数上动态构建 JDO 查询

> ID：935762
> 
> 赞同：4
> 
> 时间：2009-06-01T17:07:13.087
> 
> 标签：java, google-app-engine, jdo, google-cloud-datastore

可以很容易地使用 JDO 语法来查询多个参数，如下所示：

```
//specify the persistent entity you're querying and you filter usign params
query = pm.newQuery(MyClass.class, " customer == paramCustomer && date >= paramStartDate && date <=paramEndDate ");

// declare params used above
query.declareParameters("com.google.appengine.api.users.User paramCustomer, java.util.Date paramStartDate, java.util.Date paramEndDate"); 

//pass the object declared as params
MyClassList = (List<MyClass>) query.execute(user, startDate, endDate); 
```

使用过滤器以编程方式构建字符串很简单：

```
"customer == paramCustomer && date >= paramStartDate && date <=paramEndDate" 
```

另一个带有 params 声明的字符串：

```
"com.google.appengine.api.users.User paramCustomer, java.util.Date paramStartDate, java.util.Date paramEndDate" 
```

不是立即提出一个策略来执行查询，具体取决于过滤器中的哪些参数（并且已被声明），因此您最终会得到一些非常丑陋的临时级联 if-else 语句查询执行的可能排列（所有参数，只有第一个，只有第二个，第一个和第二个等......）：

```
MyClassList = (List<MyClass>) query.execute(user, startDate, endDate); 
```

我确信这是一项常见的任务，并且其他人正在以更通用和更有效的方式进行。

有什么建议吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-06-10T21:19:24.763

我在方法中找到了解决方案[`query.executeWithArray`](http://db.apache.org/jdo/api20/apidocs/javax/jdo/Query.html#executeWithArray%28java.lang.Object%5B%5D%29)

这样，我可以动态构建过滤器和参数声明，将实际对象加载到对象数组中，然后将其传递给上述方法。

另一个重要的方法是[`executeWithMap`](http://db.apache.org/jdo/api20/apidocs/javax/jdo/Query.html#executeWithMap%28java.util.Map%29)您可以使用它来按名称绑定参数。

# c# - C# 包装器接口错误：E_NOINTERFACE

> ID：935768
> 
> 赞同：5
> 
> 时间：2009-06-01T17:09:12.910
> 
> 标签：c#, com, rcw

我正在尝试为我拥有的 COM 对象（名为 SC_COM.dll）生成 C# 包装器，但在将其与 Visual Studio 2008（运行 Vista）链接时遇到了一些问题。我需要使用 COM DLL 进行无需注册的操作——我正在使用清单文件让 Visual Studio 知道 SC_COM.dll，这似乎可以正常工作。我使用 TblImp.exe 生成了我在 Visual Studio 2008 中引用的类型库 (SC_COMtlb.dll)，因此我可以与我需要的 DLL 进行早期绑定。DLL 都与清单和可执行文件位于同一目录中。

这是问题所在：当我实例化对象并尝试在 C# 中调用其方法之一时，它会引发以下错误：

> 检测到错误：无法将“SC_COMtlb.SCAccessObjClass”类型的 COM 对象转换为接口类型“SC_COMtlb.ISCUploader”。此操作失败，因为 IID 为“{C677308A-AC0F-427D-889A-47E5DC990138}”的接口的 COM 组件上的 QueryInterface 调用因以下错误而失败：不支持此类接口（来自 HRESULT 的异常：0x80004002 (E_NOINTERFACE)） .

我不完全确定这个错误意味着什么——我已经对错误代码进行了搜索，它似乎是一个相对普遍的 C# 错误。那么我是要在这里以错误的方式链接 COM 对象，还是我可能遗漏了其他一些重要步骤？

我可能应该注意到，我不完全确定我生成的类型库 (S\C_COMtlb.dll) 如何知道实际的 COM DLL 在哪里，因为它没有在系统中注册——我假设它只是看起来相同目录。这可能是问题所在，如果是这样，我怎样才能更好地将两者联系起来？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-06-29T15:38:41.460

尝试将此添加到您的 App.exe.manifest：

```
<comInterfaceExternalProxyStub 
  name="ISCUploader" 
  iid="{C677308A-AC0F-427D-889A-47E5DC990138}"
  proxyStubClsid32="{00020424-0000-0000-C000-000000000046}"
  baseInterface="{00000000-0000-0000-C000-000000000046}"
  tlbid = "{PUT-YOUR-TLB-GUID-HERE}" /> 
```

可以从 Visual Studio 生成的 Native.Namespace.Assembly.Name.manifest 中找到 TLBID，如下所示：

```
<typelib tlbid="{A-GUID-IS-HERE--USE-IT}"
  version="1.0" helpdir="" resourceid="0" flags="HASDISKIMAGE" /> 
```

我为此努力了很长一段时间，但我找到了这些有用的参考资料并将其拼凑在一起，它对我有用：

*   [为什么在创建支持该接口的对象时会得到 E_NOINTERFACE？](http://blogs.msdn.com/oldnewthing/archive/2004/12/13/281910.aspx)
*   [免注册 Skype4Com 和多线程公寓](http://forum.skype.com/index.php?showtopic=243771)
*   [COM 组件的免注册激活：演练](http://msdn.microsoft.com/en-us/library/ms973913.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-01T17:56:50.207

哪个版本的 Windows？从 Windows Vista 开始，内部清单会覆盖外部清单。默认情况下，C# 可执行文件具有内部清单，这意味着您的`whatever.exe.manifest`文件将被忽略。

如果您转到 C# EXE 的属性页面，您会看到“应用程序选项卡”上有一个“图标和清单”部分。将“清单”设置为清单文件的名称，它将被嵌入而不是默认的。

如果这不起作用，您可能必须使用 MT.EXE 执行一些构建后步骤，以便将您的外部清单与默认内部清单合并，并将合并的清单放回 .EXE 文件中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-01T18:59:42.917

错误代码意味着 Visual Studio*认为*某个对象应该实现某个接口，但是当我尝试“连接”到该接口时，该对象响应它不知道它。

我猜问题出在 SC_COM.dll 中。TLBIMP.EXE 从存储在 DLL 中的元数据中提取类和接口信息，并为类构建包装器。

例如，如果 SC_COM 是用 C++ 编写的，如果 DLL 的创建者在 IDL 文件中指出一个类实现了该接口，但实际代码不支持该接口，则可能发生这种情况。

这是此 DLL 可能存在的另一个常见问题来源：有时您有一个实现 ISomething2 接口的类，该接口派生自 ISomething 接口，但该类实现仅识别 ISomething2。如果实现派生接口，则还必须识别其基接口。这是一个常见的错误。

您是否拥有（并控制）该 DLL 的源代码？

# wpf - WPF 密码框插入符号

> ID：935769
> 
> 赞同：4
> 
> 时间：2009-06-01T17:09:53.097
> 
> 标签：wpf, caret, passwordbox

有没有办法隐藏或移动 PasswordBox 的插入符号？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-06-02T06:17:00.897

在 .NET 3.5 SP1 或更早版本中，没有明确的方法来指定 WPF 文本框/密码框插入符号的颜色。

但是，有一种方法可以从视图中指定（或在这种情况下删除）插入符号（通过 hack）。插入符号颜色是 TextBox/PasswordBox 的背景颜色的反色。因此，您可以使背景颜色为“透明黑色”，这将欺骗系统使用白色插入符号（不可见）。

代码（简单）如下：

```
<PasswordBox Background="#00000000" /> 
```

有关此问题的更多信息，请查看以下链接：

*   [http://cloudstore.blogspot.com/2008/09/changeing-caret-colour-in-wpf.html](http://cloudstore.blogspot.com/2008/09/changing-caret-colour-in-wpf.html)
*   [http://blogs.msdn.com/llobo/archive/2007/02/08/chang-caret-color-in-textbox.aspx](http://blogs.msdn.com/llobo/archive/2007/02/08/changing-caret-color-in-textbox.aspx)

请注意，在 .NET 4.0 中，插入符号将是可定制的。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-03-20T12:43:54.230

您可以尝试这样的事情来设置 PasswordBox 中的选择：

```
private void SetSelection(PasswordBox passwordBox, int start, int length)
{ 
    passwordBox.GetType()
               .GetMethod("Select", BindingFlags.Instance | BindingFlags.NonPublic)
               .Invoke(passwordBox, new object[] { start, length }); 
} 
```

之后，像这样调用它来设置光标位置：

```
// set the cursor position to 2... or lenght of the password
SetSelection( passwordBox1, 2, 0); 

// focus the control to update the selection 
passwordBox1.Focus(); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-05-07T16:28:48.203

要选择 Passwordbox，我使用以下代码：

```
private Selection GetSelection(PasswordBox pb)
{
    Selection result = new Selection();
    PropertyInfo infos = pb.GetType().GetProperty("Selection", BindingFlags.NonPublic | BindingFlags.Instance);

    object selection = infos.GetValue(pb, null);

    IEnumerable _textSegments = (IEnumerable)selection.GetType().BaseType.GetField("_textSegments", BindingFlags.NonPublic | BindingFlags.Instance).GetValue(selection);

    object first_textSegments = _textSegments.Cast<object>().FirstOrDefault();

    object start = first_textSegments.GetType().GetProperty("Start", BindingFlags.Instance | BindingFlags.NonPublic).GetValue(first_textSegments, null);
    result.start = (int) start.GetType().GetProperty("Offset", BindingFlags.Instance | BindingFlags.NonPublic).GetValue(start, null);

    object end = first_textSegments.GetType().GetProperty("End", BindingFlags.Instance | BindingFlags.NonPublic).GetValue(first_textSegments, null);
    result.length = (int)start.GetType().GetProperty("Offset", BindingFlags.Instance | BindingFlags.NonPublic).GetValue(end, null) - result.start;

    return result;
}

struct Selection
{
    public int start;
    public int length;
} 
```

在 .net 4.0 测试，希望对你也有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-02-26T11:37:56.380

在 .NET 4.5.2 上通过 .xaml 解决此问题的解决方案：

```
 <PasswordBox Style="{DynamicResource PinEntry}"> 
```

然后在 PinEntry 样式下的样式文件中，您可以执行以下操作：

```
 <Style x:Key="PinEntry" TargetType="{x:Type PasswordBox}">
       ...
       <Setter Property="CaretBrush" Value="Transparent"/>
       ...
    </Style> 
```

这实际上是我使用样式的实现，您可以修改代码以满足您的需求。希望能帮助到你。

# html - 浮动在容器 div 上的两列 CSS 设置

> ID：935785
> 
> 赞同：0
> 
> 时间：2009-06-01T17:12:33.080
> 
> 标签：html, css

我有一个非常简单的两列设置，如下所示。

但是，在我设置了两列的示例一中，#left 和 #right div 将浮动在 #posts 容器上方。

示例 2 不会像这样浮动，但不是我正在寻找的两列设置。建议？

```
div#posts 
{
   width: 700px;  
   margin: 0 auto;  
   margin-top: 5px;
   margin-bottom: 0px;  
   padding: 5px;  
   border: 1px solid #CCC;  
   background-color: #EEE;  
} 

div#left {
   float:left;
   width:100px;
   background:#EEE;
}

div#right {
   float:right;
   width:500px;
   background:#EEE;
}

<!-- example 1 

<div id="posts">
    <div id="left">post</div>
    <div id="right">post</div>
</div>

<!-- example 2

<div id="posts">
    <div>post</div>
    <div>post</div>
</div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-06-01T17:29:45.320

只需添加`overflow: auto;`到您的`div#posts`规则。

`overflow`将该属性设置为`auto`的副作用是导致该元素在所有现代浏览器中都包含浮点数。唯一一次（我知道）这可能会导致问题是如果存在一些限制（可用空间有限、显式宽度/高度和超大内容等）这使得自动滚动条不受欢迎，但这并不常见. （事实上​​，在这些情况下，自动滚动条通常是一件好事。*）*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-01T17:14:16.633

[编辑：好的，忘记那个]

解决此问题的正确方法是在 Posts div 中添加一个 div，但在具有 clear: both; 属性的列之后。

前任：

```
<div id="posts">
    <div id="left">post</div>
    <div id="right">post</div>
    <div style="clear: both;"></div>
</div> 
```

大多数人为此保留了一个 .clear 类（.clear { clear: both; } ）。它经常出现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-03T22:08:00.460

`Overflow:auto`如果它是跨浏览器兼容的，那将是一个优雅的解决方案。如果我没记错的话，它会在 IE6/7 上给你带来一些问题。

有关溢出自动/隐藏的更多信息 [http://www.wickham43.supanet.com/tutorial/scrollingdivs.html](http://www.wickham43.supanet.com/tutorial/scrollingdivs.html)

# objective-c - 您如何在大纲视图中制作文本单元格以显示父行有多少个子项？

> ID：935787
> 
> 赞同：0
> 
> 时间：2009-06-01T17:13:44.637
> 
> 标签：objective-c, cocoa, core-data

您如何使作为大纲视图（连接到 NSTreeController）中的顶级父行的行在文本单元格中显示它有多少个子级？

如果这有点令人困惑，这里是我的意思的图片。

[![替代文字](https://i.stack.imgur.com/5U8x9.jpg)](https://i.stack.imgur.com/5U8x9.jpg)
[（来源：[sourceforge.net](http://allusions.sourceforge.net/articles/images/ordered.jpg)）]

我说的是圆圈中一行右侧的数字，它显示了父母有多少孩子。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-06-01T18:39:16.390

您可以创建一个自定义 NSCell 子类来显示子计数（您可以使用模型对象本身作为单元格的对象值，而不是提供单独的字符串或图像），或者在大纲视图的数据源方法中只包括计数和标题字符串。当然，如果您希望它完全像屏幕截图一样绘制，则必须使用第一个选项。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-01T18:11:18.687

自定义单元格，在该列或第二列上。

# .net - .NET 3.5 和 SP1 安装问题 - 单个安装程序

> ID：935790
> 
> 赞同：0
> 
> 时间：2009-06-01T17:14:22.903
> 
> 标签：.net, installation, .net-3.5

这会安装 .NET 3.5 和 SP1 吗？
[http://www.microsoft.com/downloads/details.aspx?FamilyID=ab99342f-5d1a-413d-8319-81da479ab0d7&displaylang=en](http://www.microsoft.com/downloads/details.aspx?FamilyID=ab99342f-5d1a-413d-8319-81da479ab0d7&displaylang=en)

还是没有单个安装程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-01T17:17:51.310

页面下方

完整包 要下载完整包而不是引导程序，请单击以下链接：http: [//download.microsoft.com/download/2/0/e/20e90413-712f-438c-988e-fdaa79a8ac3d/dotnetfx35.exe](http://download.microsoft.com/download/2/0/e/20e90413-712f-438c-988e-fdaa79a8ac3d/dotnetfx35.exe)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-01T17:19:31.197

是的，这将安装完整的 3.5 框架和 SP1。

文件如此之小的原因是它是“网络引导程序”安装程序。它将启动安装过程，确定您需要哪些文件，然后下载适当的文件作为安装的一部分。

如果您需要预先安装完整的安装程序，请查看页面底部提供的[此链接。](http://download.microsoft.com/download/2/0/e/20e90413-712f-438c-988e-fdaa79a8ac3d/dotnetfx35.exe)

# .net - 如何判断谁登录了 SQL Server

> ID：935791
> 
> 赞同：8
> 
> 时间：2009-06-01T17:14:31.827
> 
> 标签：.net, sql-server

我正在设计一个应用程序，我正在寻找最好的方法来告诉谁当前登录到 SQL Server。我将使用 SSMS 中内置的活动监视器，它显示访问服务器的所有进程的列表 - 非常酷。

但是，如果在我的 .NET 代码中，每次我访问数据库时它都使用一个单独的连接，那么我将如何知道谁当前登录了？如果用户当时只是在看屏幕而不是从数据库中检索数据，那么他们不会正确显示吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2009-06-01T17:21:45.860

在 MSSQL 服务器中，您可以运行以下命令...

```
exec sp_who2 
```

这将为您提供很多信息，包括谁登录、应用程序名称、当前命令等等。

谢谢

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2009-06-01T17:20:58.670

也许，也许不是。您是正确的，登录到您的应用程序不需要用户登录到数据库 - 事实上，这个概念并不存在。活动监视器（以及有用的 sp_who2）将仅显示活动连接 - 那些正在使用的连接。

如果您使用池连接（“Pooled=true”，我相信，在您的连接字符串中），则该图片会发生变化。这样做，“关闭”的客户端连接将保持活动状态，您将在监视器中看到该连接。 [本文](http://www.pythian.com/news/1270/sql-server-understanding-and-controlling-connection-pooling-fragmentation)对此有更多详细信息。

不过，如果我是你，我会设计一种不同的方式来跟踪活跃用户，这种方式不依赖于池连接。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-06-01T18:04:16.170

DMV sys.dm_exec_sessions 可用于查找连接的会话。如果它正在运行，您可以将其加入到 sys.dm_exec_requests 以获取请求信息，或者要获取可以加入到 sys.dm_exec_connections 的连接特定信息。session_id 用于所有连接。

我个人会在旧的 sp_who 存储过程上使用 DMV。正如其他人指出的那样，如果连接关闭，您将看不到它，因此如果您想在连接之间进行跟踪，则必须考虑另一种缓存连接信息的方法。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-06-01T17:21:12.553

我想你正在寻找`sp_who`或`sp_who2`

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-06-01T17:16:31.623

您的断言是正确的，不执行数据库操作的用户将不可见。您确实需要手动存储某种“登录用户”信息。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-06-01T17:19:50.510

你是对的。如果编码正确，将在保存或检索数据时创建连接，然后立即关闭。

假设您对谁登录到应用程序而不是谁登录到数据库服务器更感兴趣，您可以将会话信息保存在数据库中，包括用户 ID。然后您可以简单地查询会话数据库以发现谁在线。根据您使用的开发技术，可能会有更好的解决方案。

# pdf-generation - JasperReports 可以在报告中包含 pdf 吗？

> ID：935802
> 
> 赞同：2
> 
> 时间：2009-06-01T17:19:26.097
> 
> 标签：pdf-generation, jasper-reports, itext

是否可以在 JasperReport 中包含现有的 pdf 文件？

我们真的想将新数据附加到现有报告而不重新生成现有报告。我们将导出回pdf。我正在考虑使用 iText 的 PdfCopy 合并两个 pdf，但希望 JasperReports 可能有更简单的方法......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-01T18:03:51.757

我不认为你可以在 JasperReports 中做到这一点，但在[iText](http://www.lowagie.com/iText/)中它会相当简单。

生成 JasperReport，然后使用[PdfCopy](http://www.1t3xt.info/api/index.html?com/lowagie/text/pdf/PdfCopy.html)将新报告附加到原始报告（反之亦然）。

# visual-studio - 仅包含文件且没有内置输出的项目文件

> ID：935806
> 
> 赞同：7
> 
> 时间：2009-06-01T17:19:45.207
> 
> 标签：visual-studio

如何制作一个只有一些数据文件并且没有内置输出的项目文件（VS 2008）？

我可以创建一个空项目并将我的数据文件添加到其中（将其复制到输出文件夹），但是在我进行构建后它会生成一个 EmptyProject.dll。我只想要输出目录中的数据文件，而不是一些空的 DLL 或 EXE。

我希望数据文件成为这个项目中唯一的东西，因为该项目将在几个解决方案中共享。

我们的应用程序是 C#。我们所有的普通代码项目都是 C#。

数据文件是模式 (XSD)。我希望这些模式位于输出文件夹中，但我不希望它们包含在现有项目中。我想要一个名为“Schemas”的项目，它除了 XSD 文件之外什么都没有，除了将 XSD 文件复制到输出文件夹之外什么都不做。我希望在项目文件中使用这个，以便可以在多个解决方案中引用相同的模式项目。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-06-01T17:25:22.470

我不知道如何抑制 .dll 文件的创建。但是......这是一个简单的解决方法。在项目属性的 Build Events 选项卡中，编写将删除文件的 Post-build 事件命令行。就像是：

删除路径\文件名.dll

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-09-03T07:43:17.793

扩展斯科特的答案：

1.  创建一个*空项目类型的新项目*
2.  在 Properties->Application 中，将*Output type*更改为*Class Library*
3.  在 Properties->Build->Advanced 中，将*Debug Info*更改为*None*
4.  在 Properties->Build Events 中，将*Post-build event 命令行*设置为`del $(TargetPath)`

这样，该项目仅创建一个 DLL，该 DLL 将被删除。同时，尊重数据文件上的“复制到输出目录”设置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-01T17:24:37.727

如果您不构建项目，您需要一个项目做什么？

1.  您可以使用解决方案文件夹来“存储”文件...
2.  为什么不禁用为所有配置构建此项目（使用配置管理器） - 这样它就不会构建。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-06T02:08:43.190

好东西。扩展 Scott > Daniel 的回答：

*   安全删除所有引用和属性 (AssemblyInfo.cs)
*   如果它是一个 node/grunt/gulp 项目，那么您可以在 Build Events > *Post-build event 命令行中调用它 * 例如：`gulp build`或`gulp clean`
*   也许您可以将删除或 obj 和 bin 输出文件夹添加到您的 node/grunt/gulp 清理脚本中，以减轻对 `del $(TargetPath)`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-08-28T17:35:38.093

可能另一种方法是通过替换来编辑 csproj 文件：

```
 <Import Project="$(MSBuildToolsPath)\Microsoft.CSharp.targets" /> 
```

有了这个：

```
 <Target Name="Build" />
  <Target Name="Rebuild" /> 
```

然后构建不会创建任何东西。它对我有用。相同的一般想法应该适用于任何 xxproj 文件。只需将`<Import Project...>`标签替换为`<Target...>`标签。

我很想知道这是否会导致任何问题或对任何人都不起作用。

# search - 如何从谷歌搜索中聚合数据

> ID：935809
> 
> 赞同：3
> 
> 时间：2009-06-01T17:19:52.617
> 
> 标签：search, aggregate

我正在尝试将 google/movies 搜索的电影时间汇总为可用的格式，例如 json 或 xml

[http://www.google.com/movies?q=movie+times&sc=1&mid=&hl=en&oi=showtimes&ct=change-location&near=new+york](http://www.google.com/movies?q=movie+times&sc=1&mid=&hl=en&oi=showtimes&ct=change-location&near=new+york)

Google AJAX api 似乎不适用于此，因为您无法进行电影搜索。

有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-01T17:26:10.283

查找称为[网络抓取](http://en.wikipedia.org/wiki/Web_scraping)的技术。

基本上，您必须使用一些服务器端脚本来获取结果页面，然后从中提取数据，以格式化方式（json、xml 等）呈现。正则表达式或 DOM/XML 解析器可能会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-01T17:41:01.450

[这个人](http://www.mzzt.net/2009/01/14/opensearch-google-in-windows-7/)有一个 PHP 脚本，可以将 Google 结果转换为 RSS。

# c# - 条码 128 大小限制。最紧凑的条码字体？

> ID：935814
> 
> 赞同：0
> 
> 时间：2009-06-01T17:22:48.760
> 
> 标签：c#, .net, crystal-reports, barcode

我正在生成一个条形码标签并将其作为 .pdf 发送给用户（这是一个网络应用程序）。用户已经购买了只有 2 英寸宽的条码标签。我想使用一个图像，这样我就不必在将使用该网站的所有用户机器上安装字体。如果我使用来自 IDeautomation.com 的字体，我可以获得足够小的条形码，但我更愿意使用使用[BarCodeRenderer生成的图像](http://barcoderender.codeplex.com/) 或其他一些开源项目，但我无法获得足够小的条形码，因为系统具有大约 20 个字符长度的预先存在的 ID。什么是最小的条形码字体（我尝试使用 128，因为 IDS 是字母数字）以及如何调整生成图像的大小以使其适合我可用的宽度？（其他想法或图书馆这样做也被接受为答案）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-06-01T19:20:15.637

IDautomation 有几个产品。

具体来说，他们有一个[带有 Code 128 校验和计算器的 Crystal 报表](http://www.idautomation.com/fonts/tools/crystal/)。它绕过了对字体的需求并直接在报告中生成字体，可以直接转到 PDF。我能够使用此功能的最小尺寸约为 12 磅字体。具体来说，他们已经分解了 Code 128 字体规范，以允许您使用最小的条形码。据我回忆，这不会呈现为字体或图像。

或者，我记得他们有一个可以将字体呈现为图像的产品。

另一种可能有用的产品是[烧烤](http://barbecue.sourceforge.net/)。也许你可以沿着这条线找到一些东西。

尝试打印和读取小条形码时影响的其他因素是：

*   您在条形码中编码的值有多长。20个字符很多..有什么办法可以连接它，或者以某种方式缩小它？我过去使用的技巧包括使用哈希值（或记录号），它可以链接到我需要的所有值。您可以获得的条形码越短，您可以制作的越小并且仍然非常清晰。

*   条形码会随着时间变长吗？如果是这样，您可能需要更宽的标签，或考虑使用不同的格式。我开始非常喜欢其中的一些二维条码。

*   标签材料。我已经看到使用彩色或过于闪亮的标签而不是白色、哑光标签的问题，这使得阅读变得更加困难。

*   条形码阅读器可以产生很大的不同。使用基于激光的阅读器而不是基于光学的阅读器将为您提供更高的条形码阅读分辨率。这意味着您可以从更远的地方阅读它们，或者阅读更小的内容。Symbol 有一些很棒的 150 美元的基于激光的条码扫描仪。

我工作的条码打印和读取系统已经完成了几百万次打印和读取中小尺寸条码的工作，所以我希望上面的一些痛苦和学习对我有所帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-01T17:39:03.263

我所做的是获取条形码并通过缩小它来使其适合我想要的宽度。然后发生的情况是高度对大多数读者来说不够好，所以我复制了图像并将其复制到它上面，所以它现在是我想要的宽度，并且是生成器高度的两倍。这使得大多数常见的现成条形码阅读器更具可读性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-01T17:50:35.707

如果您的条形码仅包含偶数个数字，您可以很容易地切换到 Code C 变体以将它们缩小到一半大小。

在 PDF 中生成一个小的条形码作为图像很容易出错，因为您无法优化打印机的网点大小。您的条码宽度将偏离正负半个点；你的酒吧越宽，这将是一个更少的问题。我使用过 203 DPI 的标签打印机，它们几乎不可能支持通用图像。字体更好，因为它们可以被暗示为点的精确倍数。我不知道是否有任何商业条形码字体有必要的提示，但我想至少其中一种有。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-01T17:29:27.520

我很幸运使用[Data Matrix](http://en.wikipedia.org/wiki/Data_matrix_(computer))格式，因为您可以拥有不同数量的数据，并且您可以根据需要调整条码的大小。

以下是一些可能有帮助的链接：

[libdmtx](http://www.libdmtx.org/)

[Aspose.BarCode 用于 .NET 和 Java](http://www.aspose.com/community/files/53/visual-components/aspose.barcode-for-.net-and-java/default.aspx)

[Pure PostScript 中的条码编写器](http://www.terryburton.co.uk/barcodewriter/)

# iphone - UITableView 中总是缺少一行

> ID：935821
> 
> 赞同：0
> 
> 时间：2009-06-01T17:25:41.720
> 
> 标签：iphone, uitableview, sdk

我以编程方式创建了一个 UITableView（不使用 XIB）。它读取一个包含 NSDictionary 对象的 NSMutableArray 的 *.plist 文件。我遇到的问题是：当我在 UITableView 中显示对象时，它永远不会在第 0 行显示对象。我知道这一点，因为我得到以下 NSLog 输出：

```
2009-06-01 10:02:34.566 Color[784:20b] array count = 4
2009-06-01 10:02:34.570 Color[784:20b] row = 3: Air
2009-06-01 10:02:34.570 Color[784:20b] row = 2: Earth
2009-06-01 10:02:34.571 Color[784:20b] row = 1: Water
2009-06-01 10:02:34.571 Color[784:20b] row = 0: Fire 
```

在这种情况下，我将看到一张有水、土和空气（但没有火）的桌子。如果我添加另一个对象，则会出现 Fire，但不会出现新对象。因此，它*始终*是第 0 行的对象。

以下是一些相关代码：

```
@interface LoadViewController : UITableViewController <UITableViewDelegate, UITableViewDataSource> {
    NSMutableArray *loadedObjects;
}

- (void)viewWillAppear:(BOOL)animated {
    self.loadedObjects = [self getCurrentData];
    NSLog(@"array count = %d", [self.loadedObjects count]); 
    [self.tableView reloadData];
    [super viewWillAppear:animated];
}

-(NSInteger)tableView:(UITableView*)tableView numberOfRowsInSection:(NSInteger)section {
    return [self.loadedColors count];
}

-(UITableViewCell*)tableView:(UITableView*)tableView cellForRowAtIndexPath:(NSIndexPath*)indexPath {
    static NSString *Identifier = @"Identifier";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:Identifier];
    if(cell == nil) {
        cell = [[[UITableViewCell alloc] initWithFrame:CGRectZero reuseIdentifier:Identifier] autorelease];
        cell.showsReorderControl = YES;
    }
    NSUInteger row = [indexPath row];
    NSDictionary *obj = [self.loadedObjects objectAtIndex:row];
    cell.text = [obj objectForKey:@"Name"];
    NSLog(@"row = %d: %@", row, [obj objectForKey:@"Name"]);
    return cell;
} 
```

在代码片段中，您还可以看到我对 NSLog 的输出。

当我从 NIB 填充 UITableViews 时，我从未遇到过这个问题。任何建议表示赞赏。

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-02T00:02:08.517

我觉得有点愚蠢，但也许这对其他人有用......

我在描述中没有提到（因为我认为它不相关）是我还实例化了 UINavigationBar 以在右上角有一个 Edit 按钮。简而言之，导航栏遮挡了表格中的第一条记录。

我看不到这个的原因是因为我这样做了：

```
[self.tableView addSubview:navBar]; 
```

所做的就是将导航栏“粘贴”到表格上，因此滚动无法显示丢失的行。当我将该行更改为：

```
[self.appDelegate.window addSubview:navBar]; 
```

我可以将第一条记录从导航栏下方拖出，因为它们随后成为同级视图。

我为这个放错地方的问题道歉。

# mysql - MYSQL - 在表中生成子集序列

> ID：935823
> 
> 赞同：3
> 
> 时间：2009-06-01T17:26:02.220
> 
> 标签：mysql, sequence, subset

我有下表

```
Id   Value
1     3
1     12
1     67
2     7
2     99
5     30
5     33
5     4
5     87
5     12
5     1 
```

我想更新它以拥有这张桌子。

```
Id  UniqueIdBySubSet    Value
1           1             3
1           2             12
1           3             67
2           1             7
2           2             99
5           1             30
5           2             33
5           3             4
5           4             87
5           5             12
5           6             1 
```

我在 SO 上找到了完美的线程，但它是针对 mssql 的。我使用 mysql 4.1.10。

另一个线程可以在这里找到：[为表的子集生成序列](https://stackoverflow.com/questions/492375/generating-sequences-for-subsets-of-a-table)。

有谁知道我如何在 mysql 中做到这一点？

谢谢你，让-弗朗索瓦

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-06-01T17:36:20.630

```
SET  @r := 0;
SET  @id := 0;
UPDATE  mytable m
SET     m.UniqueIdBySubSet = IF(@id = id, @r := @r + 1, @r := (@id := id) - id)
ORDER BY
        id, value; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-01T17:32:38.437

编写一个快速脚本来完成它。php.ini 中的代码应该少于 10 行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-01T17:33:23.693

我想你会发现[这篇文章](http://www.kavoir.com/2009/05/mysql-update-multiple-rows-with-one-single-query.html)很有用。简而言之：您不能只在一个查询中执行此操作，但您可以在两个查询中执行此操作（将数据加载到新表中并执行插入语句）。

# unit-testing - 您如何为需要复制被测代码的代码编写测试？

> ID：935827
> 
> 赞同：3
> 
> 时间：2009-06-01T17:29:30.360
> 
> 标签：unit-testing

我正在努力将尽可能多的逻辑移出自定义控件，以便对其进行单元测试以减少手动测试负担。我遇到了被测方法产生复杂结果的情况；编写一个计算结果的测试用例将涉及将本质上是被测代码的内容写入测试本身。

例如，我有一个`GeometryGenerator`基于类的属性创建 WPF 几何图形的类。在一种配置中，生成`PathGeometry`由一个组成的一个`ArcSegment`。我可以根据测试参数计算弧的属性应该是什么，但这个计算与我试图测试的代码相同。这似乎会使测试无效；如果计算中存在错误，则测试中将存在错误，如果方法中的计算发生更改，则可能必须在测试中更改。

这种情况我该怎么办？我想出的唯一方法是手动计算我的测试用例的结果并将这些值硬编码到测试中。这是一种可接受的方法吗（如果我在实施之前编写测试，我会做的事情）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-06-01T17:42:50.790

> 我想出的唯一方法是手动计算我的测试用例的结果并将这些值硬编码到测试中。这是一种可接受的方法吗（如果我在实施之前编写测试，我会做的事情）？

是的，这很典型。出于单元测试的目的，您必须假设您用来计算结果的*公式是正确的。*这是您正在测试的软件实现。

您预先计算了一些手动计算的结果，以确保您没有使用被测代码来生成测试数据（单元测试中的一个非常糟糕的罪过）。只需确保记录测试用例，以便了解预期值代表什么以及它们来自何处。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-01T17:34:53.377

手工计算和硬编码在生产代码中不好，但对于良好的单元测试至关重要。

您通常希望为代码的每个“状态”编写一个测试。例如，我经常使用正输入、负输入和零输入编写测试，以确保代码按预期工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-01T17:35:00.493

通常，我会制作一个自记录但经过硬编码的幻数，例如

const int expectedResult = 2*4/someConstant; // 也许是评论。

测试的读者可以推断出这些值是什么，或者您可以在必要时添加额外的注释。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-01T17:33:47.793

“单元测试”实际上应该只是测试一个单元。因此，理想情况下，您将为您的 进行单独的单元测试`GeometryGenerator`，为您的班级进行另一个单元测试，为您`PathGeometry`的 进行第三次测试`ArcSegment`，等等。

通过分别测试每个单元，您可以获得某种信心，当您使用给定的一组输入对它们调用给定的操作时它们的`GeometryGenerator`行为方式（当字段`ArcSegment`设置为 1 时的行为方式与它的行为方式）当相同的字段设置为 0 等时）。

如果您的单元测试开始看起来像是在复制现有代码来测试某个功能，那么恐怕您的单元测试是错误的，并且有一个更简单有效的解决方案可供您使用。

# coldfusion - 找不到 ColdFusion 组件或接口 fuseboxWriter

> ID：935829
> 
> 赞同：1
> 
> 时间：2009-06-01T17:29:49.657
> 
> 标签：coldfusion, fusebox

我正在使用 FuseBox 5 运行 ColdFusion 8.1。我最初在 Apache 中配置了动态虚拟主机，以便我的域指向：

```
C:\websites\www.example.com
C:\websites\dev.example.com
C:\websites\legacy.example.com 
```

如果我们将来添加更多域，我希望文件夹结构如下：

```
C:\websites\example.com\www
C:\websites\example.com\dev
C:\websites\example.com\legacy
C:\websites\newexample.com\www
C:\websites\newexample.com\admin 
```

使用 ColdFusion 中的域/子域结构时出现以下错误：

```
Could not find the ColdFusion Component or Interface fuseboxWriter.

Ensure that the name is correct and that the component or interface exists.
Stack Trace:
coldfusion.runtime.CfJspPage$NoSuchTemplateException: Could not find the ColdFusion Component or Interface fuseboxWriter.
    at coldfusion.runtime.TemplateProxyFactory.getResolvedFile(TemplateProxyFactory.java:1173)
    at coldfusion.runtime.TemplateProxyFactory.getTemplateFileHelper(TemplateProxyFactory.java:1346)
    at coldfusion.runtime.TemplateProxyFactory.resolveName(TemplateProxyFactory.java:1289)
    at coldfusion.cfc.ComponentProxyFactory.getProxy(ComponentProxyFactory.java:38)
    at coldfusion.runtime.ProxyFactory.getProxy(ProxyFactory.java:65)
    at coldfusion.runtime.CFPage.createObjectProxy(CFPage.java:4707)
    at coldfusion.runtime.CFPage.CreateObject(CFPage.java:4552)
    at cffuseboxApplication2ecfc339686346$funcCOMPILEREQUEST.runFunction(C:\websites\www.example.com\fb5core\fuseboxApplication.cfc:378)
    at coldfusion.runtime.UDFMethod.invoke(UDFMethod.java:418)
    at coldfusion.filter.SilentFilter.invoke(SilentFilter.java:47)
    at coldfusion.runtime.UDFMethod$ReturnTypeFilter.invoke(UDFMethod.java:360)
    at coldfusion.runtime.UDFMethod$ArgumentCollectionFilter.invoke(UDFMethod.java:324)
    at coldfusion.filter.FunctionAccessFilter.invoke(FunctionAccessFilter.java:59)
    at coldfusion.runtime.UDFMethod.runFilterChain(UDFMethod.java:277)
    at coldfusion.runtime.UDFMethod.invoke(UDFMethod.java:192)
    at coldfusion.runtime.TemplateProxy.invoke(TemplateProxy.java:448)
    at coldfusion.runtime.TemplateProxy.invoke(TemplateProxy.java:308)
    at coldfusion.runtime.CfJspPage._invoke(CfJspPage.java:2272)
    at cffusebox52ecfm1351851183.runPage(C:\websites\example.com\www\fb5core\fusebox5.cfm:196)
    at coldfusion.runtime.CfJspPage.invoke(CfJspPage.java:196)
    at coldfusion.tagext.lang.IncludeTag.doStartTag(IncludeTag.java:370)
    at coldfusion.runtime.CfJspPage._emptyTcfTag(CfJspPage.java:2661)
    at cfindex2ecfm588071849.runPage(C:\websites\example.com\www\index.cfm:3)
    at coldfusion.runtime.CfJspPage.invoke(CfJspPage.java:196)
    at coldfusion.tagext.lang.IncludeTag.doStartTag(IncludeTag.java:370)
    at coldfusion.runtime.CfJspPage._emptyTcfTag(CfJspPage.java:2661)
    at cfApplication2ecfc827193789$funcONREQUEST.runFunction(C:\websites\example.com\www\Application.cfc:36)
    at coldfusion.runtime.UDFMethod.invoke(UDFMethod.java:418)
    at coldfusion.runtime.UDFMethod$ReturnTypeFilter.invoke(UDFMethod.java:360)
    at coldfusion.runtime.UDFMethod$ArgumentCollectionFilter.invoke(UDFMethod.java:324)
    at coldfusion.filter.FunctionAccessFilter.invoke(FunctionAccessFilter.java:59)
    at coldfusion.runtime.UDFMethod.runFilterChain(UDFMethod.java:277)
    at coldfusion.runtime.UDFMethod.invoke(UDFMethod.java:192)
    at coldfusion.runtime.TemplateProxy.invoke(TemplateProxy.java:448)
    at coldfusion.runtime.TemplateProxy.invoke(TemplateProxy.java:308)
    at coldfusion.runtime.AppEventInvoker.invoke(AppEventInvoker.java:74)
    at coldfusion.runtime.AppEventInvoker.onRequest(AppEventInvoker.java:243)
    at coldfusion.filter.ApplicationFilter.invoke(ApplicationFilter.java:269)
    at coldfusion.filter.RequestMonitorFilter.invoke(RequestMonitorFilter.java:48)
    at coldfusion.filter.MonitoringFilter.invoke(MonitoringFilter.java:40)
    at coldfusion.filter.PathFilter.invoke(PathFilter.java:86)
    at coldfusion.filter.ExceptionFilter.invoke(ExceptionFilter.java:70)
    at coldfusion.filter.ClientScopePersistenceFilter.invoke(ClientScopePersistenceFilter.java:28)
    at coldfusion.filter.BrowserFilter.invoke(BrowserFilter.java:38)
    at coldfusion.filter.NoCacheFilter.invoke(NoCacheFilter.java:46)
    at coldfusion.filter.GlobalsFilter.invoke(GlobalsFilter.java:38)
    at coldfusion.filter.DatasourceFilter.invoke(DatasourceFilter.java:22)
    at coldfusion.CfmServlet.service(CfmServlet.java:175)
    at coldfusion.bootstrap.BootstrapServlet.service(BootstrapServlet.java:89)
    at jrun.servlet.FilterChain.doFilter(FilterChain.java:86)
    at coldfusion.monitor.event.MonitoringServletFilter.doFilter(MonitoringServletFilter.java:42)
    at coldfusion.bootstrap.BootstrapFilter.doFilter(BootstrapFilter.java:46)
    at jrun.servlet.FilterChain.doFilter(FilterChain.java:94)
    at jrun.servlet.FilterChain.service(FilterChain.java:101)
    at jrun.servlet.ServletInvoker.invoke(ServletInvoker.java:106)
    at jrun.servlet.JRunInvokerChain.invokeNext(JRunInvokerChain.java:42)
    at jrun.servlet.JRunRequestDispatcher.invoke(JRunRequestDispatcher.java:286)
    at jrun.servlet.ServletEngineService.dispatch(ServletEngineService.java:543)
    at jrun.servlet.jrpp.JRunProxyService.invokeRunnable(JRunProxyService.java:203)
    at jrunx.scheduler.ThreadPool$DownstreamMetrics.invokeRunnable(ThreadPool.java:320)
    at jrunx.scheduler.ThreadPool$ThreadThrottle.invokeRunnable(ThreadPool.java:428)
    at jrunx.scheduler.ThreadPool$UpstreamMetrics.invokeRunnable(ThreadPool.java:266)
    at jrunx.scheduler.WorkerThread.run(WorkerThread.java:66) 
```

不知道我还能添加多少。Apache 的行为符合预期，但 ColdFusion 中的某些内容不喜欢子文件夹设置。我认为[这个解决方案](http://www.aliaspooryorik.com/blog/index.cfm/e/posts.details/post/solve-the-could-not-find-the-coldfusion-component-issue-71)会起作用，但错误似乎与我的不同。感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-01T18:07:40.237

我注意到堆栈跟踪中的路径不匹配，特别是 cffuseboxApplication2ecfc339686346$funcCOMPILEREQUEST.runFunction 指向旧文件夹，而所有其他路径都指向新文件夹。我执行了 fusebox.parseall=true 和 fusebox.loadclean=true 并且该站点现在按预期运行。

# wix - 始终在小升级中更新文件（如何）

> ID：935834
> 
> 赞同：3
> 
> 时间：2009-06-01T17:33:02.833
> 
> 标签：wix, windows-installer, installation, installshield

我正在使用 InstallShield Pro X 创建安装包。升级工作正常。但是，产品经理希望升级替换升级中的所有文件，即使文件上的创建日期！= 修改日期也是如此。

我看到要做到这一点，我需要设置 REINSTALLMODE=vamus 而不是 vomus。但是，我不知道如何告诉 InstallShield 我希望它使用该设置。默认情况下 setup.exe 总是将 vomus 传递给 Windows 安装程序。

InstallShield 项目中有一个名为 ReinstallModeText 的属性，我将其从 omus 更改为 amus 但似乎没有任何效果。

那么，我如何在安装项目中设置什么，以便当 setup.exe 检测到运行升级时它会发送 REINSTALLMODE=vamus？谢谢。

更新：尝试将以下内容添加到发布部分的 MSI 命令行值：

重新安装模式=vamus

这没有用。Setup.exe 没有在命令行上设置 REINSTALL=ALL 我做了什么。我将其添加到 MSI 命令行，升级按预期工作。但是，如果是新安装，这些属性仍在设置中并且安装程序失败，这不是问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-07-03T18:21:05.193

**不要**将 REINSTALLMODE 设置为**amus**或**vamus**（**强制覆盖文件**）。这些设置适用于 MSI 中的所有组件，因此理论上可以降级系统文件或至少共享文件 -*这通常涉及通过合并模块包含的文件*。[**将REINSTALLMODE**](http://msdn.microsoft.com/en-us/library/aa371182%28v=vs.85%29.aspx)设置为**emus**通常是安全的（**用较低或相等的版本号替换文件**）。如果您尝试在具有[Windows 资源保护](https://msdn.microsoft.com/en-us/library/cc185681.aspx)（[维基百科](http://en.wikipedia.org/wiki/Windows_File_Protection)）的较新版本的 Windows 上覆盖受系统保护的文件，即使这也会触发**文件替换错误**)（Windows Server 2008 和 Vista 以上）。在较旧的 Windows 版本上，该文件可能会被覆盖，然后通过[Windows 文件保护功能](https://support.microsoft.com/en-us/kb/222193/)从 dllcache 以正确的版本恢复，前提是该功能有一个美好的一天。曾经（并且现在）有一个用于系统文件检查的相关工具：[System File Checker](http://en.wikipedia.org/wiki/System_File_Checker)。

如果您对即使已被编辑过的文件也应该被替换的问题，您可以使用**RemoveFile 表**来安排在安装期间删除文件（然后将重新安装）。

**真正的解决方案**是将 %ProgramFiles% 中的安装文件夹视为只读，并且不让应用程序保存任何设置或更改任何文件。所有配置文件都应转到用户配置文件或 alluser 配置文件，应用程序 EXE 文件应负责复制到配置文件位置。

在这里查看[我的答案](https://stackoverflow.com/questions/1032101/c-deployement-retaining-files-over-an-installation/1061469#1061469)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-09-18T17:09:30.023

在进一步调查和测试更多选项时，我认为最好的答案是除了产品版本之外修改产品代码，并将其作为主要升级版本，首先删除以前的版本，然后安装新文件。

这样做的主要问题是安装程序需要更长的时间才能运行。我也认为你不能将它作为一个补丁发布，但我在这方面可能是错误的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-03T03:13:11.130

我手边没有 IS X，但在更高版本的 InstallShield 中，您将转到“Releases”，突出显示您的版本，转到“Setup.exe”部分，然后有一个名为“MSI Command Line Arguments”的字段。在那里，您将指出您希望 Setup.exe 传递给 Windows Installer 的任何命令行参数。例如 REINSTALLMODE=vamus

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-06-03T03:18:45.330

您提到您将 ReinstallModeText 与“amus”一起使用。您是否尝试过 ReinstallModeText 等于“vamus”。“v”导致安装程序运行源包，而不是缓存包，这可能是你的问题。

# wpf - 获取 Scrollviewer 中子项可用的宽度

> ID：935843
> 
> 赞同：2
> 
> 时间：2009-06-01T17:34:51.570
> 
> 标签：wpf, scrollviewer

如何获取 XAML 中滚动查看器的子级可用的宽度？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-06-01T18:33:23.797

据我所知，没有直接的方法可以做到这一点，因为 WPF 会自动将可用空间传递给子控件的 Measure() 函数，以便它们调整大小以适应可用空间。

请注意，默认情况下，它在垂直方向上传递无穷大，因为内容可以永远垂直滚动。您可以更改滚动条在垂直和水平方向上的可见性，以影响是垂直传递、水平传递还是同时传递无穷大。

在纯 XAML 中确定子控件实际必须布局多宽的最佳方法是创建一个空控件（例如，一个空网格），然后绑定到其 ActualWidth 属性：

```
<ScrollViewer>
    <StackPanel>
        <Grid x:Name="MeasureGrid"/>
        <TextBox Text="{Binding ElementName=MeasureGrid, Path=ActualWidth}"/>
    </StackPanel>
</ScrollViewer> 
```

除了显示控件实际可用的宽度之外，我在 XAML 中看不到此信息的任何其他用途 - 我能想到的所有其他方案都可以隐式使用此信息。您能否向我们提供有关您要完成的工作的更多信息？

# sql-server - SQL Server Management Studio - 在表列表中使用多个过滤器？

> ID：935849
> 
> 赞同：43
> 
> 时间：2009-06-01T17:35:48.337
> 
> 标签：sql-server, sql-server-2005, sql-server-2008, ssms

在 Management Studio 中，您可以右键单击表组来为表列表创建过滤器。有没有人想出一种在过滤器中包含多个表的方法？例如，我希望显示所有带有“ `br_*`”和“ `tbl_*`”的表格。

有人知道怎么做吗？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2009-06-01T17:39:46.583

**不**，你不能这样做。当我们第一次使用 Management Studio 时，我已经尝试了所有你能想到的所有可能的组合：`_`, `%`, `*`, `"`, `'`, `&&`, `&`, `and`, `or`, `|`, `||`, 等等...

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-06-01T18:12:45.953

您也许可以将自己的插件滚动到 SMSS 中，这样您就可以做您正在寻找的事情：

[编写 SQL Server Management Studio 2005 加载项的黑魔法](http://jcooney.net/post/2007/11/26/The-Black-Art-of-Writing-a-SQL-Server-Management-Studio-2005-Add-In.aspx)

[使用加载项扩展 SQL Server 2005 Management Studio 中的功能](http://aspalliance.com/1374_Extend_Functionality_in_SQL_Server_2005_Management_Studio_with_Addins.all)

第一个专门用于搜索和显示具有给定名称的所有模式对象，因此您可以扩展您正在查找的内容。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-08-07T07:36:31.527

我正在使用 SQL Server Management Studio v17.1，它的过滤器构造中有一个 SQL 注入错误，因此您实际上可以逃避默认值

```
tbl.name like '%xxx%' 
```

并编写您自己的查询（有一些限制）。例如，为了过滤以“_arch”、“_hist”、“_purge”结尾的表，我使用了以下过滤器值

```
_arch') and RIGHT(tbl.name, 5) != N'purge' and RIGHT(tbl.name, 4) != N'hist' and not(tbl.name like N'bbb 
```

您可以使用 SQL Server Profiler 查看构造的查询并根据需要进行调整。

不确定以前的 SQL Management Studio 版本中是否存在相同的错误，或者何时修复，但现在我对结果感到满意。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-06-01T17:50:24.243

起初它看起来可以使用`CONTAINS`查询（例如`"br_*" OR "tbl_*"`），但似乎没有。它似乎只支持一个值，然后传递到一个`LIKE`子句中（例如`'app'`become `'%app%'`）。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-06-05T16:18:14.773

我使用了 Toad for SQL Server（免费软件版本），它具有非常好的过滤选项。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-05-03T12:18:36.810

“sql 注入”方法仍然有效（v17.5），但有一个转折：

```
zzzz' or charindex('pattern1',  name) > 0  or charindex('pattern2', name) > 0 or name like 'zzzz 
```

（我用 'zzzz' 绕过了 '%'）

如果在模式中（或代码中的任何位置）使用了“_”或“%”，则它不起作用，因为在评估之前它将自动被“[_]”或“[%]”替换。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-05-17T13:28:08.053

正如其他人所说，您不能在 SQL Server Management Studio（包括 2014 年）中执行此操作。

如果您只需要以下查询，则以下查询将为您提供过滤后的表列表：

```
SELECT
    CONCAT(TABLE_SCHEMA, '.', TABLE_NAME) AS TABLE_SCHEMA_AND_NAME,
    TABLE_SCHEMA,
    TABLE_NAME
FROM
    INFORMATION_SCHEMA.TABLES
WHERE
    TABLE_SCHEMA IN ('X', 'Y', 'Z') -- schemas go here
ORDER BY
    TABLE_SCHEMA,
    TABLE_NAME; 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2011-03-18T14:47:40.830

幸运的是，我刚刚征服了这一壮举，尽管我的成功很小，因为您可以按模式过滤，这将允许您看到超过 1 个表，但每次您想要更改它时都必须输入过滤器文本。

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2019-04-10T15:28:08.877

自 SSMS 2017 v17.8.1 起，SQL 注入方法（在某种程度上）仍然有效，尽管它在`%`符号周围放置了括号，因此它会按字面意思解释这些符号。

如果您使用的是 Name->Contains 过滤器，Profiler 会显示： ...`AND dtb.name LIKE N'%MyDatabase1%')`

因此，在 Name->Contains 字段中：`MyDatabase1') OR (dtb.name LIKE 'MyDatabase2`对于简单的情况应该这样做。

* * *

## 回答 #10

> 赞同：-2
> 
> 时间：2016-05-26T02:55:32.247

我知道这是旧的，但很高兴知道如果您输入只是输入“过滤器”文本，它就可以工作。跳过`*`或`%`或任何其他标准搜索字符，只需输入`br_`或`tbl_`或任何您想要过滤的内容。

# wcf - 获取 WCF 请求的域名？

> ID：935854
> 
> 赞同：0
> 
> 时间：2009-06-01T17:37:15.370
> 
> 标签：wcf, .net-3.5

如何获取请求者的域名或完整 URL？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-06-02T14:52:32.080

我不确定我是否理解您的问题，但如果您需要调用服务操作的 Windows 用户的域名，请使用以下命令：

```
OperationContext.Current.ServiceSecurityContext.PrimaryIdentity.Name 
```

这将返回“{domain}\{username}”。

试试这个，让我知道你的想法（你可能想将此代码粘贴到 mstest 项目中）：

```
[TestClass]
public class AlternativeCredentials
{
    // Contracts
    [ServiceContract]
    interface IMyContract
    {
        [OperationContract]
        string GetUserName();
    }

    // Service
    [ServiceBehavior(IncludeExceptionDetailInFaults = true)]
    class MyService : IMyContract
    {
        public string GetUserName()
        {
            return OperationContext.Current.ServiceSecurityContext.PrimaryIdentity.Name;
        }
    }

    // Client
    class MyContractClient : ClientBase<IMyContract>, IMyContract
    {
        public MyContractClient() { }
        public MyContractClient(Binding binding, string address) :
            base(binding, new EndpointAddress(address)) { }

        public string GetUserName()
        { return Channel.GetUserName(); }
    }

    #region Host
    static string address = "net.tcp://localhost:8001/" + Guid.NewGuid().ToString();
    static ServiceHost host;

    [ClassInitialize()]
    public static void MyClassInitialize(TestContext testContext)
    {
        host = new ServiceHost(typeof(MyService));
        host.AddServiceEndpoint(typeof(IMyContract), new NetTcpBinding(), address);
        host.Open();
    }

    [ClassCleanup()]
    public static void MyClassCleanup()
    {
        if (host.State == CommunicationState.Opened)
            host.Close();
    }
    #endregion  

    [TestMethod]
    public void UseUserNameCredentials()
    {
        using (MyContractClient proxy =
            new MyContractClient(new NetTcpBinding(), address))
        {
            proxy.ClientCredentials.UserName.UserName = "MyUsername";
            proxy.ClientCredentials.UserName.Password = "MyPassword";

            proxy.Open();
            Assert.AreEqual("EMS\\magood", proxy.GetUserName());
            proxy.Close();
        }
    }
} 
```

# batch-file - 只做如果天...批处理文件

> ID：935858
> 
> 赞同：8
> 
> 时间：2009-06-01T17:38:25.213
> 
> 标签：batch-file, goto

你好，我有一个批处理文件，如下所示：

```
if %day%==monday, tuesday, wednesday, thursday, friday (
goto yes
) else (
goto no
) 
```

现在我知道第一行行不通。

我真正想要发生的事情：

它会自动检查它是哪一天。如果是星期一到星期五，则必须转到“是”，否则（星期六/星期日）就必须转到“否”。

这该怎么做？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-06-04T18:34:39.847

这是一个示例 bat 文件，它将执行此类操作，我相信您可以想到其他方法来使用此示例代码。例如，任何时候您都需要一个“in”列表。棘手的一点是 %date:~0,3% 这表示扩展 %date% 环境变量并从位置 0 开始字符串的开头返回接下来的 3 个字符。您可以从“set /?”中了解更多信息。命令。

示例：**IsWeekDay.bat**

```
@echo off
setlocal

for %%i in (Mon,Tue,Wed,Thu,Fri) do (
    if "%date:~0,3%"=="%%i" goto YES
)

:NO
echo No
goto EOF

:YES
echo Yes

:EOF
endlocal 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-06-01T17:58:17.600

我在网上遇到了这个。经过测试，它可以工作。以整数形式返回日期，您仍然可以使用它。

```
@For /F "tokens=2,3,4 delims=/ " %%A in ('Date /t') do @( 
    Set Month=%%A
    Set Day=%%B
    Set Year=%%C
)

@echo DAY = %Day%
@echo Month = %Month%
@echo Year = %Year% 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-08-29T09:18:59.350

正如[Jay](https://stackoverflow.com/questions/935858/only-do-if-day-batch-file/935944#935944)所提到的， using`date /t`仅适用于该命令输出星期几和日期的语言环境，而不适用于其他语言环境（例如俄语）。如果您不介意将批处理文件与一些 VBScript 混合，这里有一个适用于所有语言环境的解决方案。

诀窍是这个很小的 ​​VBScript 脚本，它将星期几输出为数字（1 = 星期日，2 = 星期一，... 7 = 星期六）：

```
WScript.Echo DatePart("w", Date) 
```

您可以从批处理文件运行此脚本，读取其输出并应用您的逻辑：

```
for /f %%d in ('cscript dayofweek.vbs //nologo') do (
  if %%d==7 goto no   :: Saturday
  if %%d==1 goto no   :: Sunday
)
goto yes 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-01T17:41:15.927

```
IF %day% == monday GOTO YES
IF %day% == tuesday GOTO YES
IF %day% == wednesday GOTO YES
IF %day% == thursday GOTO YES
IF %day% == friday GOTO YES
GOTO NO 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-06-01T17:41:56.410

我没有批处理 fu 来回答所问的问题，但是，假设这是一个 Windows 批处理文件，请考虑使用任务调度程序执行脚本，这将让您设置您所要求的调度类型。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2011-03-03T20:17:29.287

这是一个批处理文件，它以几乎与语言环境无关的方式提取星期几、星期几、月份和年份。

唯一特定于语言环境的事情是星期几的拼写，其余的是语言环境中立的。

所以在英语中，它会`Thu`在星期四返回，但在荷兰语中，它将是`do`（对于 donderdag）。

```
:: http://stackoverflow.com/questions/203090/how-to-get-current-datetime-on-windows-command-line-in-a-suitable-format-for-usi
:: Works on any NT/2k machine independent of regional date settings
::
:: 20110103 - adapted by jeroen@pluimers.com for Dutch locale
:: 20110303 - adapted by jeroen@pluimers.com for day-of-week
:: Dutch will get jj as year from echo:^|date, so the '%%c' trick does not work as it will fill 'jj', but we want 'yy'
:: luckily, all countries seem to have year at the end: http://en.wikipedia.org/wiki/Calendar_date
::            set '%%c'=%%k
::            set 'yy'=%%k
::
:: Also, in Dutch, there is a difference between %date% and date/t: the former will not include
:: the day-of-the-week, but the latter will.
:: That means the if "%date%A" LSS "A" trick does not work with %date%, we need a loop
:: to check if the day-of-the-week needs us to take tokens 2-4 in stead of 1-3:
::      if "%date%A" LSS "A" (set toks=1-3) else (set toks=2-4)
::      for /f "tokens=1" %%t in ('date/t') do (...)
::
:: Another difference between Dutch and English is that the Dutch date/t will prepend the day of the week in a lower case 2-letter form.
:: So the LSS "A" trick needs to be replaced with an LSS "a" trick
::      if "%date%A" LSS "A" (set toks=1-3) else (set toks=2-4)
::        if "%%ta" LSS "a" (set toks=1-3) else (set toks=2-4)
::
:: In addition, date will display the current date before the input prompt using dashes
:: in Dutch, but using slashes in English, so there will be two occurances of the outer loop in Dutch
:: and one occurence in English.
:: This skips the first iteration:
::        if "%%a" GEQ "A"
::
:: echo:^|date
:: Huidige datum: ma 03-01-2011
:: Voer de nieuwe datum in: (dd-mm-jj)
:: The current date is: Mon 01/03/2011
:: Enter the new date: (mm-dd-yy)
::
:: date/t
:: ma 03-01-2011
:: Mon 01/03/2011
::
:: The assumption in this batch-file is that echo:^|date will return the date format
:: using either mm and dd or dd and mm in the first two valid tokens on the second line, and the year as the last token.
::
:: The outer loop will get the right tokens, the inner loop assigns the variables depending on the tokens.
:: That will resolve the order of the tokens.
::
@ECHO off
    set v_day_of_week=
    set v_day=
    set v_month=
    set v_year=

    SETLOCAL ENABLEEXTENSIONS
      for /f "tokens=1" %%t in ('date/t') do (
        set v_day_of_week=%%t
        if "%%ta" LSS "a" (set toks=1-3) else (set toks=2-4)
      )
::DEBUG echo toks=%toks%
      for /f "tokens=2-4 delims=(-)" %%a in ('echo:^|date') do (
::DEBUG echo first token=%%a
        if "%%a" GEQ "A" (
          for /f "tokens=%toks% delims=.-/ " %%i in ('date/t') do (
            set '%%a'=%%i
            set '%%b'=%%j
            set 'yy'=%%k
          )
        )
      )
      if %'yy'% LSS 100 set 'yy'=20%'yy'%
      set Today=%'yy'%-%'mm'%-%'dd'%

    ENDLOCAL & SET day_of_week=%v_day_of_week% & SET v_year=%'yy'%& SET v_month=%'mm'%& SET v_day=%'dd'%

    ECHO Today is Year: [%V_Year%] Month: [%V_Month%] Day: [%V_Day%]
    set datestring=%V_Year%%V_Month%%V_Day%
    echo %datestring%
    echo day of week=%day_of_week%

    :EOF 
```

玩得开心！

——杰伦

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-07-31T16:51:55.760

从[这个答案](https://stackoverflow.com/a/24999111/550712)，我们有

```
wmic path win32_localtime get dayofweek 
```

根据[此线程](http://www.dostips.com/forum/viewtopic.php?t=3815)中的建议对此进行扩展，我们可以设置 dayofweek 变量，如下所示：

```
@echo off
REM Unset dayofweek in case set in a previous execution of this batch file
set dayofweek=
REM Get dayofweek into a variable.  Locale-specific:  0 is either Sunday or Monday.
for /F "skip=1 tokens=*" %%a in ('wmic path win32_localtime get dayofweek') do if not defined dayofweek set dayofweek=%%a
echo %dayofweek% 
```

请注意，0 可以是星期日或星期一，具体取决于您的语言环境。

# delphi - 我可以为它包含的文本设置一个 TMemo 大小吗？

> ID：935859
> 
> 赞同：11
> 
> 时间：2009-06-01T17:38:45.290
> 
> 标签：delphi, tmemo

当您在表单设计器中编辑 TLabel 的标题时，它会为您调整 TLabel 的大小。有什么办法可以让 TMemo 在运行时做到这一点？

我希望能够获取一个 TMemo，为其 .lines.text 属性分配一些东西，然后告诉它自己调整大小并且不超过一定的宽度，尽管它可以达到它想要的高度。有谁知道该怎么做？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-06-01T18:28:09.157

这对我来说很好。添加的常量 (8) 可能会因您是否使用边框和/或斜面而异，请尝试一下。

```
procedure TForm1.Memo1Change(Sender: TObject);
var
  LineHeight: Integer;
  DC: HDC;
  SaveFont : HFont;
  Metrics : TTextMetric;
  Increase: Integer;
  LC: Integer;
begin
  DC := GetDC(Memo1.Handle);
  SaveFont := SelectObject(DC, Memo1.Font.Handle);
  GetTextMetrics(DC, Metrics);
  SelectObject(DC, SaveFont);
  ReleaseDC(Memo1.Handle, DC);
  LineHeight := Metrics.tmHeight;
  Increase := Memo1.Height;
  LC := Memo1.Lines.Count;
  if LC < 1 then
    LC := 1;
  Memo1.Height := LC * LineHeight + 8;
  Increase := Memo1.Height - Increase;
  Memo1.Parent.Height := Memo1.Parent.Height + Increase;
end; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-06-01T18:44:51.530

将`WordWrap`属性设置`TMemo`为 true，将文本转储到其中，计算行数，并将高度设置为行数和行高的乘积，但您需要知道行高。

`TMemo`不公开行高属性，但如果您没有在运行时更改字体或字体大小，则可以在设计时通过实验确定行高。

这是我用来设置`TMemo`行高为 13 像素的高度的代码。我还发现我需要一个小常数来说明`TMemo`' 的顶部和底部边框。我将高度限制为 30 行（396 像素）以将其保留在表单上。

```
// Memo.WordWrap = True (at design time)
Memo.Text := <ANY AMOUNT OF TEXT>;
Memo.Height := Min(19 + Memo.Lines.Count * 13, 396); 
```

如果您绝对必须在运行时从对象中提取行高，那么您可以使用[某人的答案](https://stackoverflow.com/a/936092/5134294)。或者，您可以使用`TRichEdit`，它的`SelAttributes`属性包含一个`Height`给出行高的属性。

-阿尔。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2011-11-04T14:49:35.497

我已经实现了一个自我成长的 TMemo 作为 LiveBindings 的一个很好的例子（我可以为 VCL 中的 LiveBindings 想出的几个有用的例子之一）。

引用我的 Delphi XE2 Development Essentials 课件手册：

“要构建此示例，请将 TMemo 组件放置在 VCL 表单上，打开 LiveBindings 属性，然后选择“New LiveBinding”选项。选择 TBindExpression 选项。在 Object Inspector 中打开 BindExpressionMemo11 并将 SourceComponent 设置为 Memo1 并将 SourceExpression 设置为 Lines。 Count * 22。要在运行时获得更好的结果，请将 SourceExpression 设置为更精确的表达式

Font.Size - 4 + (Lines.Count + 1) * -1 * (Font.Height - 3)

最后，在 TMemo 的 OnChange 事件处理函数中，编写一行代码：

BindingsList1.Notify(Sender, '');

就是这样。编译并运行以查看不断增长的备忘录。

[截屏]

最初，TMemo 控件将有两行高（包含内容的行和下一行），每当我们按下回车键或自动换行将我们推进到下一行时，TMemo 控件的高度就会增加（实际上是向下增长，所以请确保在表格上留出足够的空间让 TMemo 自行扩展）。”

Groetjes，鲍勃·斯沃特

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2011-11-04T13:51:23.347

```
procedure TTmpMessage.edMsgChange (Sender: TObject);
var
    LineHeight : Integer;
    DC         : HDC;
    SaveFont   : HFont;
    Metrics    : TTextMetric;
begin
    DC := GetDC ( TRxRichEdit (Sender).Handle );
    SaveFont := SelectObject ( DC, TRxRichEdit (Sender).Font.Handle );
    GetTextMetrics (DC, Metrics);
    SelectObject (DC, SaveFont);
    ReleaseDC ( TRxRichEdit (Sender).Handle, DC );
    LineHeight := Metrics.tmHeight;
    Height := TRxRichEdit (Sender).Lines.Count * LineHeight + 32;
end; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-04-16T08:51:51.807

为什么不只是：

```
Memo1.Height := Memo1.ContentBounds.Height + 5; 
```

# assembly - 为什么这么小的汇编程序这么慢？

> ID：935863
> 
> 赞同：2
> 
> 时间：2009-06-01T17:39:30.687
> 
> 标签：assembly, x86

我有以下汇编程序，它显示字母“z”然后退出：

```
mov dl, 'z'
mov ah, 2h
int 21h
mov ah, 4Ch
int 21h 
```

我用 NASM 组装它，结果文件只包含这些说明。（10 个字节）我把这个程序的 1000 次调用放在一个批处理文件中，然后 1000 次调用

```
echo z 
```

回声的运行速度提高了大约 10 倍。有谁知道是什么导致这个程序运行如此缓慢？提前致谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-06-01T17:43:11.117

“echo”是命令解释器内置的命令；无需加载代码即可执行该命令。您的程序虽然很小，但每次调用时都需要读入内存并初始化。在它到达那一点之前，命令解释器将搜索 PATH 以查找程序，这需要大量时间。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-06-01T17:45:07.450

可能这与您的代码关系不大，而与底层操作系统的关系更大。

Echo 是命令解释器立即识别的命令。因此，调用 echo 不会启动新进程；回显发生在命令解释器的范围内。

另一方面，启动您的小型汇编程序涉及创建一个新进程和所有隐含的开销。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-06-01T17:44:58.743

我认为 echo 命令可能会内置到 shell 中，因此每次调用都没有加载新程序的开销

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-06-01T18:39:19.557

您的程序使用 DOS API。在现代操作系统上，它必须在虚拟机上运行，​​例如[NTVDM](http://en.wikipedia.org/wiki/NTVDM)或 DOSbox。这可能是导致它变慢的主要原因。

您可以使用此代码创建本机可执行文件，这应该更快：

```
bits 32
global main

extern putchar

section .text
main:
        push 'z'
        call putchar
        pop ecx

        xor eax, eax
        ret 
```

在 Unix 上，您可以使用以下命令编译和执行它：

```
nasm file.asm -f elf
gcc file.o -o file
./file 
```

在 Windows 上，替换`-f elf`为`-f win32`. 如果您使用 Visual Studio 的编译器和链接器，请尝试`cl file.o`在 VS 的命令提示符下使用（未经测试）。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-06-01T17:43:19.963

如果您的程序需要启动 1000 次，则可能会内置 echo，因此没有启动开销。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-06-01T17:44:33.813

Echo 是在命令行批处理脚本的上下文中运行的命令。没有执行外部进程，因此执行速度非常快。

汇编程序的每次执行都需要启动和停止应用程序，该操作有一定的开销。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-06-01T18:09:41.403

尝试运行`strace <your prog>`- 你会看到 shell、链接器等都必须做些什么来执行这个小程序的事件。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2009-06-01T17:45:25.607

程序的调用可能需要从缓存外部加载该程序（也许 echo 已经在缓存中？）以及许多其他复杂性。此外，您正在调用用户空间代码，而 echo 命令可能具有更高的优先级，等等。

# flash - 如何仅在节省 FDT 的基础上进行构建？

> ID：935865
> 
> 赞同：1
> 
> 时间：2009-06-01T17:39:40.377
> 
> 标签：flash, eclipse, actionscript, fdt

是否可以像在 Flash Builder（以前的 Flex Builder）中那样设置 FDT，使其仅在我保存（而不是持续或手动）时构建工作区，如果可以，如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2010-06-21T11:12:18.793

这在 FDT 中是不可能的。我们的增量构建器必须随时运行。否则你不会得到任何自动完成、错误突出显示或其他任何东西。在 FDT 中，一切都建立在实时解析功能上（在构建工作区时完成）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2010-06-21T00:24:30.410

猜测：[菜单] >> 项目 >> 自动构建 >> 取消选中

# java - 从 php 调用 JAX webservices 不起作用

> ID：935870
> 
> 赞同：0
> 
> 时间：2009-06-01T17:40:34.587
> 
> 标签：java, php, web-services

我正在尝试从 php 调用使用 JAX-WS 2.1.4 开发的 Java Web 服务，但它似乎没有按预期工作。传递给该方法的所有参数值都被解释为“null”值，但我从 php 端传递了正确的值。

谁能帮我解决这个问题？

谢谢，玛尼

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-07-27T11:38:53.177

尝试

$soapObj->method(array('arg0' => 'test', 'arg1' => 'test, 'arg2' => 1));

# .net - 从 windowsmobile 设备通过 MSMQ 发送消息时遇到问题

> ID：935893
> 
> 赞同：1
> 
> 时间：2009-06-01T17:46:29.273
> 
> 标签：.net, windows-mobile, msmq

我正在尝试使用 MSMQ 从移动设备向服务器上的远程专用队列发送消息。

发生了什么？移动代码发送消息时，我没有遇到任何错误。如果我查看移动设备上的 msmq 文件夹，它确实为它发送到的远程创建了一个 .oq（出站队列）文件。

我在队列的格式名称中使用 Direct=TCP 和 IP 地址。我已经验证了相同的代码在我的桌面上运行没有问题。消息已正确传递。

我不认为代码是问题。也许我遗漏了一些必须在移动环境中完成的操作，以允许消息离开队列并传递到服务器。

我已经验证或解决问题的事情：

1.  我已验证使用 verify 从 visadm 报告的所有内容都是可以接受的。
2.  为 MSMQ 启用二进制。
3.  日志报告 MSMQ 已启动且没有错误。
4.  所有 SDK 证书都安装在设备上。
5.  发送出站消息时会创建一个 .oq 文件。
6.  邮件上启用了日志和死信。（服务器没有报告无法送达 - 我不相信它曾经连接过）
7.  网络活跃且有效（我可以通过浏览器访问托管在服务器上的网页）
8.  服务器 MSMQ 有效（我可以使用桌面上的相同代码并传递消息）
9.  通过 visadm，MSMQ 的移动设备上的状态报告正确。

我希望有人可能熟悉 Windows Mobile 上的 MSMQ，他们可以就我可能没有检查或启用的内容给我一些建议。

我在设备上使用 .Net CF 3.5 并使用 C# 进行编码，但正如我所说，代码似乎不是问题。

提前感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-01T21:48:02.423

似乎问题在于服务器使用了事务性消息队列。一旦我将 ;XACTONLY 添加到我的消息队列字符串的末尾并更改了 Send 方法以使用 System.Messaging.MessageQueueTransactionType.Single 它就起作用了。你会认为它会抛出一个错误或一些东西让你知道这是需要的。

# c# - TDD - 想用一个假的存储库测试我的服务层，但是怎么做？

> ID：935894
> 
> 赞同：13
> 
> 时间：2009-06-01T17:46:31.363
> 
> 标签：c#, asp.net, asp.net-mvc, repository-pattern

我设计了一个使用存储库模式的应用程序，然后是一个单独的服务层，例如：

 `````
public class RegistrationService: IRegistrationService
{
    public void Register(User user)
    {
        IRepository<User> userRepository = new UserRepository();
        // add user, etc
    }
} 
````  `如您所见，我在 Register 方法中实例化了我的存储库。现在，当我想编写一些单元测试时，我无法真正使用它并将其替换为假存储库，可以吗？

我不想将存储库添加为类变量（并通过构造函数设置它），因为我认为这会使我的代码“臭”（并非所有方法都需要所有存储库，而且我不需要调用层以了解存储库等）。

建议？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2009-06-01T17:51:21.353

您需要使用依赖注入。UserRepository 是 RegistrationService 类的依赖项。为了使您的类可以正确地进行单元测试（即隔离它们的依赖项），您需要“反转”控制您的依赖项创建的内容。目前，您拥有直接控制权，并且正在内部创建它们。只需反转该控件，并允许外部的东西（例如 Castle Windsor 之类的 IoC 容器）注入它们：

```
public class RegistrationService: IRegistrationService
{
    public RegistrationService(IRepository<User> userRepo)
    {
        m_userRepo = userRepo;
    }

    private IRepository<User> m_userRepo;

    public void Register(User user)
    {
        // add user, etc with m_userRepo
    }
} 
```

我想我忘了补充。一旦你允许你的依赖被注入，你就打开了它们被模拟的可能性。由于您的 RegistrationService 现在将其依赖的用户存储库作为其构造函数的输入，因此您可以创建一个模拟存储库并将其传入，而不是实际的存储库。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-06-01T17:50:46.707

依赖注入可以非常方便地处理这些事情：

```
public class RegistrationService: IRegistrationService
{
    public void Register(User user)
    {
        this(user, new UserRepository());
    }

    public void Register(User user, IRepository<User> userRepository)
    {
        // add user, etc
    }

} 
```

这样，您就可以使用 UserRepository 作为默认值，并传入自定义（用于测试的 Mock 或 Stub）IRepository 来满足您的任何其他需要。您可能还想更改第二个注册方法的范围，以防您不想将其公开给所有内容。

一个更好的选择是使用 IoC 容器，它可以为您购买比上述示例更加解耦的语法。你可以得到这样的东西：

```
public class RegistrationService: IRegistrationService
{
    public void Register(User user)
    {
        this(user, IoC.Resolve<IRepository<User>>());
    }

    public void Register(User user, IRepository<User> userRepository)
    {
        // add user, etc
    }

} 
```

那里有许多 IoC 容器，正如其他人的答案所列出的，或者您可以[推出自己的](http://www.dnrtv.com/default.aspx?showNum=126).

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-06-01T17:51:03.087

你应该做的是使用控制反转或依赖注入。

您的类不应绑定到另一个类的实现，尤其是像这样的跨层，而应将表示用户存储库的接口作为构造函数或属性。然后当它运行时，你提供具体的实现并使用它。您可以构建假货，然后实现存储库接口并在测试时提供它们。

有很多 IOC 容器，Unity、Ninject、Castle Windsor 和 StructureMap 等等。

* * *

我只是想明确一点，在您的单元测试期间，我不知道您是否想要实际*使用*IOC 容器。当然，集成测试，但对于单元测试，只需新建您正在测试的对象并在该过程中提供您的假货。IOC 容器至少在 IMO 那里可以在应用程序或集成测试级别提供帮助，并使那里的配置更容易。

您的单元测试可能应该保持“纯粹”，并且只与您尝试测试的对象一起工作。至少这对我有用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-06-01T17:56:39.520

只是为了让每个人都说清楚（或者可能不是），IOC 的基本工作方式是你告诉它用 Y 替换 X。所以你要做的就是接受 IRepository（正如其他人所说）作为参数然后在 IOC 中，您会告诉它用 MockedRepository （例如）替换该特定类的 IRepository。

如果您使用允许 web.config 初始化的 IoC，它会使从 dev 到 prod 的过渡非常顺利。您只需在配置文件中修改适当的参数，您就可以上路了 - 无需接触代码。稍后，如果您决定要移动到不同的数据源 - 您只需将其关闭，然后您就可以开始了。

IoC 是一些有趣的东西。

附带说明一下，如果您只想进行单元测试，您也可以在没有 IOC 注入的情况下执行此操作。您可以通过重载构造函数以接受 IRepository 并以这种方式传递您的模拟存储库来做到这一点。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-06-02T20:13:05.220

我正在做一些事情，嗯，目前几乎是逐字逐句。我正在使用 MOQ 来模拟我的 IUserDataRepository 的代理实例。

从测试的角度来看：

```
//arrange
var mockrepository = new Mock<IUserDataRepository>();
// InsertUser method takes a MembershipUser and a string Role
mockrepository.Setup( repos => repos.InsertUser( It.IsAny<MembershipUser>(), It.IsAny<string>() ) ).AtMostOnce();

//act
var service = new UserService( mockrepository.Object );
var createResult = service.CreateUser( new MembershipUser(), "WebUser" );

//assert
Assert.AreEqual( MembershipCreateUserResult.Success, createResult );
mockrepository.VerifyAll(); 
```

MOQ 也可用于引发特定异常，以便我的 UserService 可以在这些情况下进行测试。

然后就像其他人提到的那样，IoC 将处理所需的依赖。在这种情况下，为 UserService 类创建一个真实的存储库。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-06-01T17:50:07.270

您可以使用 IOC 容器，然后注册不同的存储库。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-06-01T17:51:01.200

我的建议仍然是将存储库移动到类参数，并在需要时使用 IoC 容器注入存储库。这样，代码简单且可测试。

# command-line - wget WIKI，不获取差异页面（被正则表达式排除？）

> ID：935901
> 
> 赞同：5
> 
> 时间：2009-06-01T17:48:37.350
> 
> 标签：command-line, wiki, wget

我正在尝试使用 wget 下载 wiki 的静态镜像。我只想要每篇文章的最新版本（而不是完整的历史或版本之间的差异）。下载整个内容并稍后删除不必要的页面很容易，但这样做会花费太多时间并给服务器带来不必要的压力。

有许多页面我显然不需要，例如：

WhoIsDoingWhat?action=diff&date=1184177979

有没有办法告诉 wget 不要下载和递归包含 'action=diff' 的 URL？或者以其他方式排除与某些正则表达式匹配的 URL？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-06-01T17:55:10.303

```
-R '*action=diff*,*action=edit*' 
```

# java - 从 Java 与 Exchange 2003 对话

> ID：935903
> 
> 赞同：2
> 
> 时间：2009-06-01T17:49:52.963
> 
> 标签：java, .net, exchange-server

从 Java 应用程序与 Exchange 2003 服务器通信时，我有哪些选择？我听说过一些为 Java 提供一些 .NET 服务的项目的参考资料。我想我也听说过 Exchange 2007 公开 Web 服务，但我不确定 2003 年是否可用。

有人做过吗？有什么建议么？

编辑：通过“交谈”，我不仅仅指接收消息，我可以通过 IMAP 来完成......我的意思是访问更特定于 Exchange 的东西，比如联系人。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-06-01T18:10:11.760

您可以使用 WebDAV 访问 Exchange Server 2003： http:
[//msdn.microsoft.com/en-us/library/aa486282 (EXCHG.65).aspx](http://msdn.microsoft.com/en-us/library/aa486282(EXCHG.65).aspx)

这篇 MSDN 文章演示了如何使用 WebDAV 操作联系人：http:
[//support.microsoft.com/kb/296126](http://support.microsoft.com/kb/296126)
（示例代码是用 VB 编写的，但它应该让您了解如何操作。）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-06-01T18:04:07.997

对于 Exchange 2003，您可以使用 WebDav。Apache 有一个旧的 Slide 库来帮助解决这个问题，但你真的不需要它。您可以只使用来自 Apache Commons 的 HttpClient。[链接](http://blogs.msdn.com/dotnetinterop/archive/2008/07/21/connecting-java-to-exchange-over-webdav-with-apache-httpclient.aspx)。

如果您正在使用 Exchange 2007，请通过 Web 服务使用 EWS。更轻松，更丰富。 [链接](http://blogs.msdn.com/dotnetinterop/archive/2008/07/29/connecting-to-exchange-using-jax-ws-part-1.aspx)。

# java - 构造函数参数是一个对象数组

> ID：935905
> 
> 赞同：0
> 
> 时间：2009-06-01T17:50:14.210
> 
> 标签：java, arrays, constructor

我有一个带有这个构造函数的类：

```
Artikel(String name, double preis){
    this.name = name;
    verkaufspreis = preis;
    Art = Warengruppe.S; 
```

我有这个构造函数的第二个类：

```
Warenkorb(String kunde, Artikel[] artikel){
    this.kunde = kunde;
    artikelliste = artikel;
    sessionid = s.nextInt();
    summe = 0;
    for(Artikel preis : artikel){
        summe += preis.verkaufspreis;
    }
} 
```

如何让 Artikel 进入 Warenkorb 和 artikelliste 阵列？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-06-01T17:55:23.750

```
new Warenkorb("Dieter", new Artikel[] {new Artikel("Kartoffel", 0.25))}; 
```

这是你想要做的吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-01T17:55:33.627

这是你想要的吗？

```
Artikel[] artikels = new Artikel[2];
artikels[0] = new Artikel("John Doe", 0);
artikels[1] = new Artikel("Jane Doe", 1);
Warenkorb w = new Warenkorb("something", artikels); 
```

你的问题不是很清楚你想做什么......

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-06-01T19:37:11.157

而且，看起来您无论如何都在使用 Java 1.5+，请尝试使用 Warenkorb 的替代方法：

```
Warenkorb(String kunde, Artikel...artikel){
        this.kunde = kunde;
        artikelliste = artikel;
        sessionid = s.nextInt();
        summe = 0;
        for(Artikel preis : artikel){
                summe += preis.verkaufspreis;
        }
} 
```

像这样写，你可以摆脱丑陋的 Array 表示法并像这样构造一个 Warenkorb：

```
new Warenkorb("Dieter", new Artikel("Kartoffel", 0.25)};
new Warenkorb("Günther", new Artikel("Kartoffel", 0.25), new Artikel("Tomate", 0.25)}; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-06-01T18:03:33.627

使用 Iterable 而不是 Array 的替代方法：

```
Warenkorb(String kunde, Iterable<? extends Artikel> artikel){
    this.kunde = kunde;
    artikelliste = artikel;
    sessionid = s.nextInt();
    summe = 0;
    for(Artikel preis : artikel){
            summe += preis.verkaufspreis;
    }
} 
```

仍然可以使用其他基于数组的语法构造，但也可以：

```
new Warenkorb("Buffy", Arrays.asList(new Artikel("foo",0.0), new Artikel("bar",1.0)); 
```

`Iterable`适用于诸如`ArrayList`或`HashSet`等的任何实现

# .net - AddHandler 没有在 rowdatabound 中触发

> ID：935908
> 
> 赞同：1
> 
> 时间：2009-06-01T17:50:35.770
> 
> 标签：.net, asp.net, vb.net, gridview, drop-down-menu

我正在为 gridview 的代码创建一个下拉列表。我想创建一个 AddHandler，这样我就可以访问 selectedvalue。但是，在这里（Rowdatabound）添加处理程序不会被触发。我该怎么办？

```
Protected Sub GridView1_RowDataBound(ByVal sender As Object, ByVal e As System.Web.UI.WebControls.GridViewRowEventArgs) Handles GridView1.RowDataBound
    ''//------------ Does not fire off add handler -----

    Dim deptvalue As String
    Dim ddlmgr As New DropDownList

    AddHandler ddlmgr.SelectedIndexChanged, AddressOf ddlmgr_SelectedIndexChanged

    ddlmgr.AutoPostBack = True
    ddlmgr.Items.Clear()
    ddlmgr.Items.Insert(0, "--Select a Manager--")
    ddlmgr.AppendDataBoundItems = True
    ddlmgr.DataTextField = "Name"
    ddlmgr.DataValueField = "number"
    ddlmgr.DataSource = SqlDataSource2
    ddlmgr.DataBind()

    ''//deptvalue = GridView1.Rows(i).Cells(0).Text
    deptvalue = e.Row.Cells(0).Text
    ddlmgr.Attributes.Add("onchange", "setDepart('" & deptvalue & "')")

    If e.Row.RowType <> DataControlRowType.Pager And _
       e.Row.RowType <> DataControlRowType.Header And _
       e.Row.RowType <> DataControlRowType.Footer Then
        e.Row.Cells(2).Controls.Add(ddlmgr)
    End If
End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-01T17:59:33.337

这似乎是一种奇怪的做事方式。

看起来您在 gridview 的每个 rowdatabound 事件上绑定了相同的数据。如果每一行中的下拉项都相同并且不受 gridview 行中的任何其他信息的影响，则这是不必要的。相反，在页面加载时，我会将数据存储在字典中（看起来像名称/值数据），然后将其绑定到每个下拉列表。

此外，我不明白为什么您将下拉列表动态添加到每个 gridview 行。为什么不添加控件并连接 OnLoad 事件以绑定上面的数据。您还可以像上面尝试的那样连接 OnSelectedIndexChanged 事件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-01T18:04:49.990

当您的 ddlmgr`SelectedIndexChanged`触发时，将启动新的回发。这意味着您现在正在使用页面类的*全新实例*。您之前创建事件处理程序的旧版本已消失。

为了让事件在您需要时触发，您必须在状态恢复*之前*为新的回发重新创建控件，否则将不会重新建立事件处理程序。

# c# - LINQ to XML：在 Silverlight C# 中推迟选择子项？

> ID：935913
> 
> 赞同：1
> 
> 时间：2009-06-01T17:51:55.097
> 
> 标签：c#, xml, linq, silverlight

我将以下 XML 文档加载到 C# Silverlight 中：

```
<parent>
    <son name="Jim">
        <grandson>Billy</grandson>
        <granddaughter>Sue</granddaughter>
    </son>
    <daughter name="Sally">
    </daughter> 
</parent> 
```

我想做一个 LINQ 查询，以便查询父节点并仅获取“儿子”和“女儿”节点的列表。当我到达“儿子”类型的节点时，我想对其自己的孩子进行另一个查询。

我试过这个：

```
 IEnumerable<XElement> Children =
                    from childNode in parents.Descendants()
                    select (XElement)childNode ;

foreach(XElement childNode in Children){
// other code 
} 
```

但这给了我一切（儿子，女​​儿，孙子，孙女）。

我想做的是这样的：

```
 foreach(XElement childNode in Children){
    switch(childNode.Name.ToString()){
         case "son": 
            // look for "grandson" and "granddaughter" as children of "son" now
            break;
        case "daughter":
           // don't look for anything
           break;
        }
    } 
```

所以基本上，我只想要查询中返回的第一级子级，稍后我会查询其余的。

我不确定它是否应该在原始 LINQ 查询、foreach 条件或什么中完成。我无法控制 XML 文档格式，因此无法将其更改为更好的格式。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-01T18:07:06.587

如果我正确理解您的问题，您需要使用以下[`Elements`](http://msdn.microsoft.com/en-us/library/system.xml.linq.xelement.elements.aspx)功能：

```
 var sons_qry = from son in parents.Elements()
                      select son;

            var grandsons_qry = from grandson in sons_qry.Descendants()
                                select grandson; 
```

# asp.net-mvc - 从页面到局部视图的 asp.net mvc 参数

> ID：935915
> 
> 赞同：6
> 
> 时间：2009-06-01T17:52:19.777
> 
> 标签：asp.net-mvc, parameters

我遇到了问题，我有一个传递参数的 ajax 链接，但是它打开的页面不需要该参数。该页面仅加载2个部分视图，其中一个需要传递给页面的参数才能正确加载数据，另一个只需要加载一个表单，因此不需要该参数。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-06-01T19:37:58.067

为了做你想做的事，你需要将 id 添加到 ViewData 构造中。

```
var sysfunctions= UnisegurancaService.FunctionsRepository.All();
ViewData["NeededID"] = id
return View(sysfunctions); 
```

然后在您呈现部分的视图中

```
<%= Html.RenderPartial("GridFunction", (int)ViewData["NeededID"]) %> 
```

当然按要求施放。

随着第二个参数被推入的任何东西都变成了部分中的 .Model 。我建议也强烈输入你的部分。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-06-01T19:48:10.137

尝试这个：

```
<% Html.RenderPartial("GridFunction", new ViewDataDictionary {{"Id", ViewData["Id"]}}); %> 
```

**更新：**

并将其添加到您的控制器操作中：

```
ViewData["Id"] = Id; 
```

**更新：**

在您的 GridFunction 部分视图中，您可以通过以下方式访问 Id：

```
<%= ViewData["Id"] %> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-01T19:35:41.037

//控制器

```
 public ActionResult EditFunctions(int id)
    {

        var sysfunctions= UnisegurancaService.FunctionsRepository.All();
        return View(sysfunctions);
    }
    // This is the controller (it does no need the parameter "ID") 
```

//这是视图“EditFunctions”

```
<div id="formFunction">
<% Html.RenderPartial("FormFunction"); %>
</div>

<div id="gridFunction">
<% Html.RenderPartial("GridFunction"); %> // The grid needs the ID to work correctly but its in the parent page not in the partial call....and the call is an ajax call
</div> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-01T19:48:21.790

如果页面的某些依赖项需要参数，那么页面需要足够了解才能将数据传入，所以页面应该能够提供数据。或者，更简单地说，只需将参数添加到页面的视图数据并完成它。

# mysql - 随机重新分配表 PK 的值

> ID：935916
> 
> 赞同：1
> 
> 时间：2009-06-01T17:52:32.290
> 
> 标签：mysql, random, primary-key

在 MySQL 5.1 中执行以下操作的最简单方法是什么？

我有一个主键为整数的表，当前从 1 到 220 运行。PK 根据将行写入表的顺序按顺序运行。

我希望能够随机重新分配这个主键值，例如，第 1 行（当前 PK 为 1）变为 19（例如），第 2 行变为 142（例如），第 3 行变为 99（例如）等等等，以便将 1 到 220 之间的所有数字重新分配给 PK。

有没有一种简单的方法可以做到这一点？

谢谢，蒂姆

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-06-01T18:12:11.693

没有简单的方法可以完全在 SQL 中完成。（很可能有一种不值得的复杂方式。）我建议您将其作为应用程序级逻辑的责任。

我还建议，如果这是出于某种“洗牌”类型的目的，请使用辅助唯一键而不是主键。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-14T00:57:08.117

感谢您的回答。但是，我发现一个帖子的回复完全符合我的要求。是这里：

[MySQL查询为每一行分配一个唯一的随机数](https://stackoverflow.com/questions/602952/mysql-query-to-assign-a-unique-random-number-to-each-row)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-01T17:59:04.243

[使用Rand Function](http://dev.mysql.com/doc/refman/5.0/en/mathematical-functions.html#function_rand)更新主键字段。要获得一个整数，您必须将其乘以 100、1000 等（取决于您想要的数字有多大），然后截断剩余的小数。

您的脚本（我假设您会为此编写）需要确保没有生成重复的数字，因此尝试更新失败。我会通过循环来做到这一点，由于 Rand 的工作方式，单个更新语句将不起作用。（至少对于其他 RDBMS）

知道您这样做的原因对我们来说很重要吗？原因可能会改变我的答案......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-01T18:35:02.360

您想为 ID 列分配一个随机值，然后按它排序并根据已排序行中的位置重新分配 ID。

# .net - WinForms TreeView - “选定节点”指示器

> ID：935919
> 
> 赞同：0
> 
> 时间：2009-06-01T17:52:54.283
> 
> 标签：.net, winforms, treeview

在 WinForm 上的 TreeView 中留下一些指示选择哪个 TreeNode 的最佳方法是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-06-01T17:56:22.237

禁用 TreeView 控件上的 HideSelection 标志。默认情况下，当控件失去焦点时，选定的节点高亮显示是隐藏的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-01T17:57:53.077

[复选框](http://msdn.microsoft.com/en-us/library/system.windows.forms.treeview.checkboxes.aspx)，或者如果您想要一种侵入性较小的方式，您可以尝试更改[节点的背景](http://msdn.microsoft.com/en-us/library/system.windows.forms.treenode.backcolor.aspx)。

# objective-c - Cocoa Touch UITabBar 选项卡切换操作

> ID：935921
> 
> 赞同：1
> 
> 时间：2009-06-01T17:54:01.367
> 
> 标签：objective-c, cocoa-touch, uitabbarcontroller

我有一个`UITabBar`带有多个`UITabBarItem`s的。我已经为每一个分配了一个不同的视图控制器。

单击每个按钮时，我想加载一些数据等。因此，我想知道将该代码放在哪里？我尝试在视图控制器中实现`viewWillAppear`和`viewDidLoad`，但那些没有被调用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-01T17:58:52.917

我知道当您将委托分配给 a 时`UINavigationController`，不会调用组件`UIViewController`委托方法。似乎也是如此`UITabBarController`。

我会尝试实现`UITabBarControllerDelegate`协议并实现`tabBar:didSelectViewController:`方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-01T18:05:52.640

你确定你的自定义控制器继承自 UIViewController 吗？

不要忘记 viewWillAppear 的签名是`viewWillAppear:animated:`

我现在正在使用 beta 5，它工作得很好（我也在使用 TabBar）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-12-02T06:54:32.233

在 viewdidappear 函数中编写您的代码。但我没有尝试

# delphi - 如何在服务中使用 FastMM4 内存泄漏报告？

> ID：935922
> 
> 赞同：3
> 
> 时间：2009-06-01T17:54:06.467
> 
> 标签：delphi, memory-leaks, service, fastmm

[如果应用程序作为服务运行， FastMM4](http://sourceforge.net/projects/fastmm/) for Delphi 提供的用于将内存泄漏报告到详细文件的相同技术是否有效？当然，最好的做法是先编写单元测试和一个简单的独立应用程序，然后在服务环境之外找到那里的漏洞。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-06-02T04:22:06.090

正如 Lars Truijens 所说，写入日志文件需要文件系统权限。默认本地系统帐户（即当您没有明确设置帐户或在代码中登录时）对本地文件系统具有完全访问权限，但没有默认网络访问权限。

FWIW - 我通常将我的服务开发为常规的 Windows 应用程序，直到逻辑的主要部分启动并运行且稳定。使用像 SvCom 这样的库，您可以将服务作为常规桌面应用程序或作为服务运行，而无需更改任何代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-01T19:20:52.283

是的，前提是用于运行服务的帐户有足够的权限来写入日志文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-03T07:03:06.530

我现在也面临着同样的挑战。我试过这个，但它不起作用，至少对我来说是这样。该帐户有足够的权限，因为该服务可以编写他自己的专有日志文件。我已打开 FullDebugMode 并添加了 dll，我已通过 IDE 选项打开了 LogMemoryLeakDetailToFile。在代码中，我看到编译器看到了正确的区域，例如，当我引发错误时，编译器会报告它。我也无法调试 FastMM 代码。如果我放一个断点，它将被忽略。我已经搜索了该报告可能会到达的所有本地硬盘，但找不到。我从“管理服务”启动和停止服务，一切顺利，它启动了，但没有报告。如果我对普通的可执行文件做同样的事情，一切顺利。我正在使用 FastMM478 和 Delphi2007。

马克

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-04T10:22:43.493

好的，我发现了有时您看不到任何输出、日志文件或消息框的另一个原因......

如果您没有犯任何错误，则不会创建任何输出。

因此，要测试 FASTMM478 是否可以在您的程序中故意出错，例如：

//创建和不销毁 testToMakeError := TStringList.Create; 对于 I := 0 到 100 做 testToMakeError.Add('foobar');

我只是假设我会在某个地方犯一些错误，并花一天时间试图找出程序没有给我任何反馈的原因。

马克

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-01-18T15:56:03.303

1.  按照 FastMM 自述文件中的说明进行操作
2.  在 FastMM4Options.inc 文件中启用 {.$define NoMessageBoxes}
3.  在 FastMM4Options.inc 文件中禁用 {$define RequireDebuggerPresenceForLeakReporting}
4.  安装/启动服务，停止服务后，您将在输出文件夹中获得 MyApp_MemoryManager_EventLog 文件。

# opencv - 使用 Mathematica 的计算机视觉

> ID：935924
> 
> 赞同：7
> 
> 时间：2009-06-01T17:54:54.233
> 
> 标签：opencv, computer-vision, wolfram-mathematica

这里有人在 Mathematica 上做计算机视觉工作吗？我想知道有哪些外部库可用于执行此操作。内置的图像处理功能是不够的。我正在寻找诸如 SURF、立体、相机校准、多视图几何等之类的东西。

将 OpenCV 打包以在 Mathematica 中使用有多难？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2011-11-19T15:50:40.827

除了现在（版本 8）在 Mathematica 中原生存在的大量图像处理工具之外，其中包括许多 CV 算法，如[查找形态对象](http://reference.wolfram.com/mathematica/guide/MathematicalMorphology.html)、[图像分割](http://reference.wolfram.com/mathematica/guide/SegmentationAnalysis.html)和[特征检测](http://reference.wolfram.com/mathematica/guide/FeatureDetection.html)（见下图），还有新的[LibraryLink](http://reference.wolfram.com/mathematica/guide/LibraryLink.html)功能，这使得使用 DLL 变得非常容易。您无需对 OpenCV 进行太多更改即可从 Mathematica 调用它。只是一些要调用的函数的包装器，你基本上就完成了。

![在此处输入图像描述](https://i.stack.imgur.com/LHarQ.gif)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-12-14T08:44:08.020

我不认为这样的事情存在，但我开始了。

它的优点是您可以执行一些分析方法......例如，而不是无休止地在 openCV 甚至 Matlab 中破解，您可以分析地计算一个量，并看到导致该矩阵的方法在数值上作为输入的函数是不稳定的变量。因此，您不需要破解，因为这毫无意义。

至于包装opencv，这似乎没有意义。正确的程序是根据您在 Mathematica 和纸上的分析来修复 opencv 中的错误实现。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2011-03-12T05:25:21.843

Mathematica[有一套丰富的图像处理工具](http://www.wolfram.com/solutions/industry/image-processing/)，但我不确定计算机视觉功能。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2010-01-05T05:08:50.227

同意 Peter 的观点，我不认为强迫 Mathematica 使用 OpenCV 是一件好事。

所有与我交谈过、阅读过和看过示例的计算机视觉人员都在使用 Matlab 和 Imaging 工具包。要么就是这样，要么使用 OpenCV 兼容语言 + OpenCV。

# python - 创建日志处理程序以连接到 Oracle？

> ID：935930
> 
> 赞同：14
> 
> 时间：2009-06-01T17:55:51.440
> 
> 标签：python, oracle, logging

所以现在我需要创建并实现 Python 日志记录模块的扩展，用于记录到我们的数据库。基本上，我们有几个 python 应用程序（都在后台运行），它们当前记录到文本文件的随机混杂中。这使得几乎不可能找出某个应用程序是否失败。

给我的问题是将所述日志记录移动到文本文件到 oracle DB。表已经定义好了，需要记录的地方，但现在，我正在考虑添加另一个将记录到数据库的日志处理程序。

我正在使用 python 2.5.4 和 cx_Oracle 并且应用程序通常可以作为服务/守护程序或直接应用程序运行。

我只是主要对解决此问题的最佳方法感到好奇。几个问题：

1.  如果 cx_Oracle 发生任何错误，应将这些错误记录到哪里？如果它关闭，最好让记录器退回到默认文本文件？

2.  不久前，我们开始强制人们使用 sys.stderr/stdout.write 而不是 print，因此在最坏的情况下，我们不会遇到 print 被弃用的任何问题。有没有一种方法可以无缝地将所有数千个 sys.std 调用直接通过管道传输到记录器中，并让记录器弥补不足？

3.  在每条记录的消息之后，脚本是否应该自动进行提交？（每秒会有几十个。）

4.  为日志系统实现新处理程序的最佳方法是什么？从基本的 Handler 类继承似乎是最简单的。

任何想法/建议都会很棒。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2009-06-18T18:39:42.183

1.  如果 cx_Oracle 发生错误，最好将这些错误记录到文本文件中。
2.  您可以尝试将 sys.stdout 和 sys.stderr 重定向到类似文件的对象，这些对象将写入它们的内容记录到记录器中。
3.  我猜你确实想在每个事件之后提交，除非你有充分的理由不这样做。或者，您可以缓冲多个事件并每隔一段时间将它们全部写入单个事务中。
4.  下面是一个使用 mx.ODBC 的示例，您可以将其适应 cx_Oracle 而不会有太多麻烦。我认为它应该符合 Python DB-API 2.0。

独立的 Python 日志发行版（在将日志添加到 Python 之前）位于[http://www.red-dove.com/python_logging.html](http://www.red-dove.com/python_logging.html)，尽管 Python 中的日志记录包是最新的，但独立发行版包含一个测试目录，其中包含许多有用的派生处理程序类示例。

```
#!/usr/bin/env python
#
# Copyright 2001-2009 by Vinay Sajip. All Rights Reserved.
#
# Permission to use, copy, modify, and distribute this software and its
# documentation for any purpose and without fee is hereby granted,
# provided that the above copyright notice appear in all copies and that
# both that copyright notice and this permission notice appear in
# supporting documentation, and that the name of Vinay Sajip
# not be used in advertising or publicity pertaining to distribution
# of the software without specific, written prior permission.
# VINAY SAJIP DISCLAIMS ALL WARRANTIES WITH REGARD TO THIS SOFTWARE, INCLUDING
# ALL IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL
# VINAY SAJIP BE LIABLE FOR ANY SPECIAL, INDIRECT OR CONSEQUENTIAL DAMAGES OR
# ANY DAMAGES WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER
# IN AN ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT
# OF OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
#
# This file is part of the standalone Python logging distribution. See
# http://www.red-dove.com/python_logging.html
#
"""
A test harness for the logging module. An example handler - DBHandler -
which writes to an Python DB API 2.0 data source. You'll need to set this
source up before you run the test.

Copyright (C) 2001-2009 Vinay Sajip. All Rights Reserved.
"""
import sys, string, time, logging

class DBHandler(logging.Handler):
    def __init__(self, dsn, uid='', pwd=''):
        logging.Handler.__init__(self)
        import mx.ODBC.Windows
        self.dsn = dsn
        self.uid = uid
        self.pwd = pwd
        self.conn = mx.ODBC.Windows.connect(self.dsn, self.uid, self.pwd)
        self.SQL = """INSERT INTO Events (
                        Created,
                        RelativeCreated,
                        Name,
                        LogLevel,
                        LevelText,
                        Message,
                        Filename,
                        Pathname,
                        Lineno,
                        Milliseconds,
                        Exception,
                        Thread
                   )
                   VALUES (
                        %(dbtime)s,
                        %(relativeCreated)d,
                        '%(name)s',
                        %(levelno)d,
                        '%(levelname)s',
                        '%(message)s',
                        '%(filename)s',
                        '%(pathname)s',
                        %(lineno)d,
                        %(msecs)d,
                        '%(exc_text)s',
                        '%(thread)s'
                   );
                   """
        self.cursor = self.conn.cursor()

    def formatDBTime(self, record):
        record.dbtime = time.strftime("#%m/%d/%Y#", time.localtime(record.created))

    def emit(self, record):
        try:
            #use default formatting
            self.format(record)
            #now set the database time up
            self.formatDBTime(record)
            if record.exc_info:
                record.exc_text = logging._defaultFormatter.formatException(record.exc_info)
            else:
                record.exc_text = ""
            sql = self.SQL % record.__dict__
            self.cursor.execute(sql)
            self.conn.commit()
        except:
            import traceback
            ei = sys.exc_info()
            traceback.print_exception(ei[0], ei[1], ei[2], None, sys.stderr)
            del ei

    def close(self):
        self.cursor.close()
        self.conn.close()
        logging.Handler.close(self)

dh = DBHandler('Logging')
logger = logging.getLogger("")
logger.setLevel(logging.DEBUG)
logger.addHandler(dh)
logger.info("Jackdaws love my big %s of %s", "sphinx", "quartz")
logger.debug("Pack my %s with five dozen %s", "box", "liquor jugs")
try:
    import math
    math.exp(1000)
except:
    logger.exception("Problem with %s", "math.exp") 
```

# c# - 使用 C# 扫描带有向下钻取的驱动器？

> ID：935931
> 
> 赞同：2
> 
> 时间：2009-06-01T17:55:57.960
> 
> 标签：c#, file, comparison

我正在尝试创建一个扫描驱动器的应用程序。不过，棘手的部分是我的驱动器包含一组文件夹，这些文件夹在文件夹中包含文件夹并包含文档。我正在尝试扫描驱动器，拍摄所有文档和文件夹的“快照”，然后转储到 .txt 文件中。
我第一次运行这个应用程序时，输出将是一个包含所有文件夹和文件的文本文件。
我第二次运行此应用程序时，它将获取 2 个文本文件（我第二次运行该应用程序时生成的文件和我第一次运行该应用程序时生成的 .txt 文件）并比较它们...报告什么已被移动/覆盖/删除。

有人有这方面的代码吗？我是这个 C# 东西的新手，任何帮助将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-06-01T19:01:39.700

我们在 80 年代学到的一件事是，如果真的很想使用递归进行文件系统遍历，但是当您这样做时，有人会创建一个具有嵌套级别的文件系统，这会导致您的堆栈溢出。使用基于堆的文件系统遍历要好得多。

这是我拼凑的一门课，就是这样做的。它不是超级漂亮，但它做得很好：

```
using System;
using System.IO;
using System.Collections.Generic;

namespace DirectoryWalker
{
    public class DirectoryWalker : IEnumerable<string>
    {
        private string _seedPath;
        Func<string, bool> _directoryFilter, _fileFilter;

        public DirectoryWalker(string seedPath) : this(seedPath, null, null)
        {
        }

        public DirectoryWalker(string seedPath, Func<string, bool> directoryFilter, Func<string, bool> fileFilter)
        {
            if (seedPath == null)
                throw new ArgumentNullException(seedPath);
            _seedPath = seedPath;
            _directoryFilter = directoryFilter;
            _fileFilter = fileFilter;
        }

        public IEnumerator<string> GetEnumerator()
        {
            Queue<string> directories = new Queue<string>();
            directories.Enqueue(_seedPath);
            Queue<string> files = new Queue<string>();
            while (files.Count > 0 || directories.Count > 0)
            {
                if (files.Count > 0)
                {
                    yield return files.Dequeue();
                }

                if (directories.Count > 0)
                {
                    string dir = directories.Dequeue();
                    string[] newDirectories = Directory.GetDirectories(dir);
                    string[] newFiles = Directory.GetFiles(dir);
                    foreach (string path in newDirectories)
                    {
                        if (_directoryFilter == null || _directoryFilter(path))
                            directories.Enqueue(path);
                    }
                    foreach (string path in newFiles)
                    {
                        if (_fileFilter == null || _fileFilter(path))
                            files.Enqueue(path);
                    }
                }
            }
        }

        System.Collections.IEnumerator System.Collections.IEnumerable.GetEnumerator()
        {
            return GetEnumerator();
        }
    }
} 
```

典型用法是这样的：

```
DirectoryWalker walker = new DirectoryWalker(@"C:\pathToSource\src", null, (x => x.EndsWith(".cs")));
foreach (string s in walker)
{
    Console.WriteLine(s);
} 
```

递归列出所有以“.cs”结尾的文件

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-01T18:21:00.183

比您的文本文件比较更好的方法是使用[FileSystemWatcher Class](http://msdn.microsoft.com/en-us/library/system.io.filesystemwatcher.aspx)。

> 侦听文件系统更改通知并在目录或目录中的文件更改时引发事件。

您可以记录更改，然后根据需要从该日志生成报告。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-01T18:09:41.543

您可以轻松地为此使用 DirectoryInfo/FileInfo 类。

基本上实例化 DirectoryInfo 类的一个实例，指向 c:\ 文件夹。然后使用它的对象遍历文件夹结构。

[http://msdn.microsoft.com/en-us/library/system.io.directoryinfo.aspx](http://msdn.microsoft.com/en-us/library/system.io.directoryinfo.aspx)有很容易翻译的代码。

现在，你问题的另一部分是精神错乱。您可以相对容易地找到两个文件之间的差异，但是将其转换为已移动/删除/等的内容将需要一些相当高级的逻辑结构。毕竟，如果我有两个文件，都名为 myfile.dat，一个位于 c:\foo，另一个位于 c:\notfoo，如果我删除位于c:\foo? 另一个例子是，如果我有一个文件 myfile2.dat 并将其从 c:\bar 复制到 c:\notbar 是否被视为移动？如果我在星期二复制它，然后在星期四删除 c:\bar\myfile2.dat，会发生什么情况——这是移动还是删除？如果我在每个星期一而不是每天运行程序，答案会改变吗？

有一大堆问题，以及它们相应的逻辑结构，您需要考虑 amd 代码才能构建该功能，即使那样，它也不会 100% 正确，因为它没有将文件系统分页为发生变化 - 由于时间、逻辑结构、处理时间、应用程序运行时间或仅仅由于计算机的纯粹反常，您的逻辑中始终存在未正确报告的场景的可能性。

此外，处理时间会随着驱动器的大小呈指数增长。毕竟，您需要对照每个其他文件检查每个文件以确定它的状态，而不是之前的状态。我不想在家里对我的 600+GB 驱动器运行这个，更不用说我在工作服务器上的 40TB 驱动器了。

# firefox - 如何正确设置 Jetpack 状态栏面板的样式？

> ID：935933
> 
> 赞同：2
> 
> 时间：2009-06-01T17:56:27.477
> 
> 标签：firefox, firefox-addon, firefox-addon-sdk

[当我在Mozilla Jetpack](https://jetpack.mozillalabs.com/)中创建状态栏面板时，它看起来像一个无特色的灰色框，会“中断”状态栏，因为它缺少边框/阴影/等。这使它看起来像一个普通的状态栏面板。

我怎样才能让它看起来像其他状态栏面板？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-06-01T17:56:35.167

有两个技巧。更重要的是将你的状态栏 HTML 包装在一对使用CSS 声明`<div>`样式的 s 中：`-moz-appearance`

```
<div style="-moz-appearance:statusbar">
    <div style="moz-appearance:statusbarpanel">
        Your content here
    </div>
</div> 
```

这让我们接近了，但在实际状态栏的左侧有轻微的亮光，当应用于状态栏中间的状态栏面板时非常明显。您可以通过在外部左侧添加 50 像素填充和负边距来解决此问题`<div>`：

```
<div style="-moz-appearance:statusbar;margin-left:-50px;padding-left:50px">
    <div style="moz-appearance:statusbarpanel">
        Your content here
    </div>
</div> 
```

瞧！与普通的无法区分的状态栏面板。如果您的内容都是 HTML，那么您就完成了。但是，如果您希望状态栏面板的文本也匹配，则可以应用一些其他样式。这是使用嵌入式样式表的完整 JavaScript 源代码：

```
jetpack.statusBar.append({
    html: (<><![CDATA[
        <style type="text/css">
            .statusbar {
                font-family: Tahoma;
                font-size: 11px;
                height: 22px;
                -moz-appearance: statusbar;
            }

            .statusbarpanel {
                height: 18px;
                line-height: 17px;
                -moz-appearance: statusbarpanel;
                padding-left: 4px;
                padding-right: 4px;
            }
        </style>

        <div class="statusbar">
            <div class="statusbarpanel">
                Your content here.
            </div>
        </div>
    ]]></>).toString()
}); 
```

（本示例还使用[E4X 来模拟 JavaScript 中的多行字符串](http://userscripts.org/guides/4)。）

# iphone - 免费桥接陷阱

> ID：935934
> 
> 赞同：2
> 
> 时间：2009-06-01T17:56:33.873
> 
> 标签：iphone, objective-c

NS 和 CF 类型之间的免费桥接是否有任何问题？

我不确定我是否做错了，但我似乎无法在 NS Array 中使用像 ABAddressID 这样的 CF 不透明类型。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-06-01T19:33:28.497

There are not too many 'gotchas'. But this is a C based language, so not every item descends from a CFType. For instance an ABRecordID is really just a 32 bit integer. So its not a CFType. To add ABRecordIDs to an array you would do something like this:

NSMutableArray* newArray = [NSMutableArray array];

ABRecordID someID = 24875247; // you get this somewhere from some call

[newArray addObject:[NSNumber numberWithInt:someID]]; // adds an ABRecordID to the array by putting the int into an NSNumber

Then later when you want the number back:

ABRecordID thatID = [[newArray objectAtIndex:0] intValue]; // retrieve the number, then ask for its int value.

If you read the documentation on a CFType, it will always say whether it is toll free bridged with some NS* counterpart.

Quote from the docs: "CFNumber is “toll-free bridged” with its Cocoa Foundation counterpart, NSNumber. This means that the Core Foundation type is interchangeable in function or method calls with the bridged Foundation object. Therefore, in a method where you see an NSNumber * parameter, you can pass in a CFNumberRef, and in a function where you see a CFNumberRef parameter, you can pass in an NSNumber instance. This fact also applies to concrete subclasses of NSNumber. See Integrating Carbon and Cocoa in Your Application for more information on toll-free bridging."

But an int in C is most definitely NOT a CFNumber.

Hope that helps,

--Tom

# c# - 如何使用 global.asax 中的 Server.MapPath()？

> ID：935940
> 
> 赞同：129
> 
> 时间：2009-06-01T17:57:25.493
> 
> 标签：c#, asp.net, global-asax, server.mappath, application-start

我需要使用`Server.MapPath()`来组合我存储在`web.config`.

但是，由于`Server.MapPath()`依赖于当前的 HttpContext （我认为），我无法做到这一点。尝试使用该方法时，即使它“可用”，我也会收到以下异常：

> 服务器操作在此上下文中不可用。

是否有另一种方法可以将 Web 根相对目录映射`~/App_Data/`到完整的物理路径，例如`C:\inetpub\wwwroot\project\App_data\`？

* * *

## 回答 #1

> 赞同：308
> 
> 时间：2009-06-01T18:05:48.383

您可以尝试[System.Web.Hosting.HostingEnvironment.MapPath()](http://msdn.microsoft.com/en-us/library/system.web.hosting.hostingenvironment.mappath.aspx)。

不需要 HttpContext。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2010-02-02T08:32:36.070

使用`AppDomain.CurrentDomain.BaseDirectory`因为`Context`可能返回 null !!

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-01T22:12:34.760

在 Global.asax 中，使用***上下文***对象：

context.Server.mappath()

上下文还允许您访问会话集合、请求对象、响应对象。例如，当您想要记录错误时非常有用

* * *

## 回答 #4

> 赞同：-5
> 
> 时间：2009-06-01T18:08:27.503

您可以尝试 HttpContext.Current.Server.MapPath("/") - 这就是我之前在课堂上引用它的方式。

# language-agnostic - 每个开发人员都应该知道哪些高级软件开发主题？

> ID：935951
> 
> 赞同：43
> 
> 时间：2009-06-01T18:00:24.383
> 
> 标签：language-agnostic

假设您的公司已经给了您时间和金钱来获得关于您一年内可以吃到的许多**高级**编程主题的培训，全权委托。这些主题是什么，您希望如何获得它们？

假设：

*   您仍然有可交付的成果，但您可以在一年中每个月每周进行一次培训。
*   培训可以来自任何地方。IE：课堂、现场讲师、书籍、订阅、播客等。
*   主题可以涵盖任何平台、技术、语言、DBMS、工具集等。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2009-06-01T18:03:22.600

并发/并行编程和多线程，特别是在内存模型和内存一致性方面。我认为，随着我们进入多核/多 CPU 硬件的世界，每个程序员都应该意识到这个领域的注意事项。

为此，我可能会大量使用互联网研究；但是在一所好大学的校园入门可能是一个很好的开始。

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2009-06-01T18:11:20.183

**安全！**

太多的程序员只是构建一些东西，并认为他们可以在完成程序的“主要”部分后添加安全性作为事后的想法。了解更多关于如何保护您的应用程序、如何设计从一开始就安全的软件、如何进行入侵检测等方面的知识，您总能从中受益。

**高级数据库开发**

数据仓库（MDX、OLAP 查询、星型模式、事实表等）、高级性能调整、高级模式和查询模式等总是很有用的。

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2009-06-01T18:04:26.090

以下是我经常发现自己向没有接受足够 CS 培训的初级开发人员解释的三个。所有其他的东西通常比实质更炒作，或者很容易被人接受。但是如果你不知道这三个，你可能会造成很大的伤害：

1.  算法分析，包括[Big O Notation](http://en.wikipedia.org/wiki/Big_O_notation)。
2.  各个层次的 [内聚](http://en.wikipedia.org/wiki/Cohesion_(computer_science))和[耦合](http://en.wikipedia.org/wiki/Coupling_(computer_science))。
3.  [Amdahl 定律](http://en.wikipedia.org/wiki/Amdahl's_law)，以及它与优化的关系。

* * *

## 回答 #4

> 赞同：20
> 
> 时间：2009-06-01T18:35:31.377

国际化问题，特别是因为它听起来不是一个高级主题。但它是。

* * *

## 回答 #5

> 赞同：17
> 
> 时间：2009-06-01T19:31:57.767

可访问性

很多组织都忽略了这一点，但简单的事实是，有大量视力低下或没有视力、色盲或其他差异的人会使浏览网络成为一种非常令人沮丧的体验。如果每个人都至少接受过一点培训，我们可能会得到一些更具包容性的基于 Web 的 UI。

* * *

## 回答 #6

> 赞同：14
> 
> 时间：2009-06-01T18:04:25.840

面向对象的设计模式。

* * *

## 回答 #7

> 赞同：14
> 
> 时间：2009-06-01T18:11:24.177

我想“高级”对每个人来说都是不同的，但我建议以下内容是大多数体面的开发人员（即那些不需要被告知 NP 完整性或设计模式的开发人员）可以从中获得的东西：

*   超越“锁定”的多线程技术以及何时应用它们。
*   通过工具链中的巧妙功能（IDE/文本编辑器、调试器、分析器、shell）进行深入培训，以学习和习惯自己。
*   一些密码学理论和实践经验，了解人们创建的安全方案中的不同常见缺陷。
*   如果他们针对数据库进行编程，请了解其数据库的内部结构以及高级查询组合和调优技术。

* * *

## 回答 #8

> 赞同：11
> 
> 时间：2009-06-01T18:09:34.880

开发人员应该了解 SQL 开发的基础知识以及他们的决策如何影响数据库性能。编写查询是一回事，编写查询、理解解释计划并根据该输出做出设计决策是另一回事。我认为关于 PL/SQL 开发和数据库性能的好课程会非常有益。

* * *

## 回答 #9

> 赞同：10
> 
> 时间：2009-06-01T19:35:18.430

不幸的是，对于大多数开发人员来说，沟通技巧似乎属于“高级主题”部分（当然不包括现在的公司）。获得这项技能的最佳方法：练习。

*   拿起耳机，与某人*交谈*，而不是与邻桌的人聊天或发电子邮件。
*   拿起电话与客户*交谈*，而不是越过围栏发送电子邮件。
*   *在会议上*提问，而不是坐在笔记本电脑屏幕后面叽叽喳喳。**
**   *积极参加*工作中的非技术会议。*   *在公共场合*展示一些东西。*

 *大多数项目不会因为技术原因而失败。他们失败是因为他们无法创建团队。沟通对于团队活力至关重要。

它也不会损害你的职业生涯。

* * *

## 回答 #10

> 赞同：8
> 
> 时间：2009-06-01T18:15:16.353

我参加的最好的课程之一是技术写作课程。它在我的职业生涯中为我提供了很好的帮助。

此外：主题是什么可能无关紧要 - 组织对它感兴趣并为此付费并且开发人员想要去做并且去做的事实是比任何一个特定主题更好的成功/改进指标。

我也认为主题是什么并不重要。开发组织在一个项目中要处理很多事情，以至于培训和工作实施/试错总是会让你有更好的视角——即使尝试/使用新东西的尝试失败了。这种经验可能会对后续项目有更多帮助。

* * *

## 回答 #11

> 赞同：7
> 
> 时间：2009-06-01T18:14:03.207

我是一个书迷，所以我不会真正为指导而烦恼。

不一定按这个顺序，取决于你已经知道的

*   面向对象编程
*   函数式编程
*   数据结构和算法
*   并行处理
*   基于集合的逻辑（本质上是 sql 背后的理论以及如何应用它）
*   构建解析器（我只放了这个，因为它实际上出现在我工作的地方）
*   软件开发方法论

* * *

## 回答 #12

> 赞同：6
> 
> 时间：2009-06-01T18:06:43.920

[NP 完整性](http://en.wikipedia.org/wiki/NP-complete)。具体来说，如何检测问题是否为 NP-Complete，以及如何构建该问题的近似解。

我认为这很重要，因为您不希望开发人员通过获得最佳解决方案来尝试解决[NP 完全问题](http://en.wikipedia.org/wiki/List_of_NP-complete_problems)，除非问题的搜索空间非常小，在这种情况下蛮力是可以接受的。然而，随着搜索空间的增加，解决问题所需的时间呈指数增长。

* * *

## 回答 #13

> 赞同：6
> 
> 时间：2009-06-01T18:46:59.310

我会介绍新技术和趋势。我正在研究/提高技能的一些新技术包括：

*   Microsoft .NET 框架 v3.0/v3.5/v4.0
*   云计算框架（Amazon EC2、Windows Azure 服务、GoGrid 等）
*   设计模式

* * *

## 回答 #14

> 赞同：4
> 
> 时间：2009-06-01T18:03:47.137

我来自基于 MS 的开发人员世界，所以这是我对此的看法

1.  更多关于云计算中的新概念（各种 API 等）。因为该行业已经押注了一段时间。

2.  更多关于 .net 框架的 LinQ

3.  分布式数据库

* * *

## 回答 #15

> 赞同：4
> 
> 时间：2009-06-01T20:32:33.777

重构技术（这也意味着学习编写一组**好的**单元/功能测试）。

知道如何重构是保持代码整洁的最好方法——当你第一次就正确的时候很少见（尤其是在新设计中）。

然而，许多重构需要一组体面的测试来检查重构没有添加意外行为。

* * *

## 回答 #16

> 赞同：3
> 
> 时间：2009-06-01T18:04:15.170

并行计算——学习它的最简单和最好的方法

* * *

## 回答 #17

> 赞同：3
> 
> 时间：2009-06-01T18:13:20.257

**调试**

[David J. Agans 的 Debugging](http://www.debuggingrules.com/)是一本关于该主题的好书。当您处理多线程程序、崩溃、不起作用的算法时，调试可能会非常复杂。等等。每个人都最好擅长调试。

* * *

## 回答 #18

> 赞同：2
> 
> 时间：2009-06-01T18:26:06.900

我会投票支持真实世界的战斗故事。让其他组织的开发人员展示他们的成功和失败。不要将演示文稿局限于您正在使用的技术。对于一个非常复杂的项目，这势必会切入您甚至没有考虑过的“高级”主题。现实世界的成功（和失败）有很多东西可以教。

* * *

## 回答 #19

> 赞同：2
> 
> 时间：2009-06-01T19:24:54.007

前往[Stack Overflow DevDays](http://www.joelonsoftware.com/items/2009/05/12.html)

和[ACCU 会​​议](http://accu.org/index.php/conferences)

* * *

读

*   敏捷软件开发、原则、模式和实践 (Robert C. Martin)
*   清洁代码 (Robert C. Martin)
*   务实的程序员 (Andrew Hunt&David Thomas)

* * *

## 回答 #20

> 赞同：2
> 
> 时间：2009-06-01T19:43:27.480

好吧，如果你在这里，我希望你现在已经掌握了基础知识：

*   OOP 最佳实践
*   设计模式
*   应用安全
*   数据库安全/查询/模式

最值得注意的是，开发人员应该努力学习多种编程语言和学科，以便将他们的技能组合扩展到多个方向。他们不需要成为这些其他技能的专家，但至少对与他们的核心学科的整合有非常敏锐的理解。从长远来看，这将使他们成为更好的开发人员，也让他们能够使用所有可用的工具来创建可以超越单一语言限制的应用程序。

除了编程特定主题之外，您还应该学习如何在敏捷、XP 或其他基于团队的方法下工作，以便在团队环境中工作时更加成功。

* * *

## 回答 #21

> 赞同：2
> 
> 时间：2009-06-01T20:29:40.723

我认为一个高级程序员应该知道如何让你的雇主给你时间和金钱，让你在一年内获得尽可能多的高级编程主题的培训。我还没进阶。:)

* * *

## 回答 #22

> 赞同：2
> 
> 时间：2009-06-01T21:29:06.050

我建议在大学/大学开设人工智能课程。大多数东西都很有趣，容易掌握（至少是基础知识），而且问题的解决方案通常是有创意的。

* * *

## 回答 #23

> 赞同：2
> 
> 时间：2009-06-02T14:37:48.363

银河系漫游指南。

* * *

## 回答 #24

> 赞同：1
> 
> 时间：2009-06-01T18:15:20.677

我希望如何获得培训？我希望有大量的公司时间专门用于自我培训。

* * *

## 回答 #25

> 赞同：1
> 
> 时间：2009-06-01T19:37:17.350

我完全同意 Accessabiitly。我被要求在工作中的网站上查看它，并且确实缺乏关于该主题的良好知识，不仅缺乏 CSS 标准来帮助屏幕阅读器之类的。

然而，我的答案是关于 GUI 设计——要做好这是一件相当困难的事情。有太多糟糕的应用程序可以通过花时间遵循 HCI（人机交互）建议/设计来避免。在制作 GUI 时以 Google/Apple 为灵感 - 而不是通常被推出的数百个按钮/标签组合。

* * *

## 回答 #26

> 赞同：1
> 
> 时间：2009-06-01T21:34:06.740

*   自动化测试：单元测试、功能集成测试、非功能测试
*   编译器详细信息（在某些平台上比在其他平台上更相关）：编译器如何在 X 语言中实现某些常见结构？在字节码解释平台上，JIT 编译是如何工作的？什么可以 JIT 编译（例如，虚拟调用可以 JIT 编译吗？）？
*   基本网络安全
*   来自其他问题领域的常见设计惯用语，而不是您目前工作的领域。

* * *

## 回答 #27

> 赞同：1
> 
> 时间：2009-06-02T22:18:01.427

我建议学习重构、测试驱动开发和各种单元测试框架（NUnit、Visual Test、CppUnit 等）。我还将学习如何将自动化单元测试整合到您的持续集成构建中。

最终，如果你能证明你的代码能做到它声称能做的事情，你就不必在那里回答关于为什么或如何做的问题。如果维护者出现并试图“修复”您的代码，他们会立即知道是否破坏了它。围绕需求（用例）编写的测试向维护者解释了您的用户想要它做什么，并提供了一个如何调用它的工作示例。将单元测试视为功能文档。

测试驱动开发 (TDD) 是一种更新颖的设计方法，它从需求开始，在编写代码之前先编写测试。然后，您编写通过测试所需的足够代码。在编写额外代码（可能永远不需要）之前，你必须停下来，因为如果你发现你真的需要它，你会在以后重构它。

TDD 的酷炫之处在于糟糕的接口（例如具有大量依赖项的接口）也很难为其编写测试。编码员宁愿重构接口以使其更易于测试，这太难了。重构简化了代码，删除了不适当的依赖关系，或者将相关的测试组合在一起以使其更容易测试，从而提高凝聚力。通过让开发人员在编写接口不良的模块时立即明白这一点，开发人员会坚持架构并倾向于紧密内聚和松散耦合的原则。好的界面是自然的结果。作为奖励，一旦你通过了所有的测试，你就知道你已经完成了。

* * *

## 回答 #28

> 赞同：1
> 
> 时间：2009-06-03T21:10:10.437

从表面上看，这似乎是一个很容易回答的问题，只需输入您最喜欢的关于其他开发人员无法正确完成的问题。但是当我阅读答案并仔细思考时，我意识到提出的每一个“高级主题”都包含在我的本科计算机科学课程中——20 年前。而且我怀疑 OO、安全性、函数式编程等概念在那个时候发生了变化。当然工具有，但我认为工具与主题不同。

那么什么是计算机科学中的“高级主题”？谁是 21 世纪的图灵、高德纳、尤登？

我对这个问题没有明确的答案，但我希望看到更多关于并行编程理论的工作，这些工作将使工具能够为开发人员抽象出那些杂乱无章的东西。

* * *

## 回答 #29

> 赞同：1
> 
> 时间：2009-06-05T16:28:51.843

很有趣，没有人提到：

*   调试。
*   您使用的工具和 ide
*   和您正在开发的平台。

如果您非常了解您的工具，并且如果您知道如何轻松调试*其他人*的代码，那么您可以完成更多工作并让您的生活更轻松，那么日常开发会更加有趣。

* * *

## 回答 #30

> 赞同：1
> 
> 时间：2009-06-05T18:33:59.083

源代码控制

* * *

## 回答 #31

> 赞同：1
> 
> 时间：2009-06-05T18:42:01.860

对于 Microsoft .NET 人员

我认为 Silverlight 在接下来的几年甚至很多年里都会变得巨大。

* * *

## 回答 #32

> 赞同：0
> 
> 时间：2011-02-02T02:03:33.033

有趣的是，建议的每个主题（除了极少数）都已包含在我当前的软件工程课程中，尽管并行是一个高级单元。也许那里的知识宽度比我们想象的要有限，相反，每个主题可用的知识深度更有价值。我建议学习一些不正常的东西。我知道我在一家公司实习，那里开设了摄影课程，与业务无关，但它让人们养成了学习的习惯。学习如何再次学习。

# javascript - 通过浏览器以编程方式确定 DPI？

> ID：935954
> 
> 赞同：19
> 
> 时间：2009-06-01T18:01:28.343
> 
> 标签：javascript, mootools, dpi

我想以编程方式确定用户显示器的 DPI，以便以精确的单位数（厘米/英寸）显示网页。我知道这是一个奇怪的要求：它是针对一个可视化研究项目的，它是一种控制。我们目前通过让用户在屏幕上放置一张信用卡并将可调整大小的 div（通过 Mootools）与真实信用卡匹配来做到这一点，瞧，我们可以获得 DPI 并正确显示页面。

谁能想到一种编程方式来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-06-01T18:05:23.843

如果您在 javascript/mootools 中执行此操作，那么[CSS 单元](http://www.w3schools.com/cssref/css_units.asp)是您的朋友。您可以以英寸或厘米，甚至磅（1/72 英寸）为单位指定尺寸。如果您出于某种原因绝对需要 DPI，即使您可以指定这些单位的大小，只需将您正在使用的“可调整大小”的 div 调整为已知大小并根据转换后的像素大小进行计算。

**编辑：**

> *不幸的是，点、厘米和英寸的 CSS 单位在物理上是不正确的。它们只是相对正确的。这是我尝试的第一件事，直到我意识到它不起作用并检查了 CSS 规范......令我沮丧。*——**布兰登·佩尔弗里**

那是个很好的观点; 浏览器倾向于通过假设默认 DPI（我认为是 72 或 96）并使用它来伪造它。

好吧，如果您需要像您要求的那样精确尺寸，那您就不走运了。如果无法读取浏览器所在显示器的当前分辨率以及该显示器的“可视屏幕区域”，您将永远无法获得它。你不可能通过Javascript得到它。

我建议您做出默认假设，即浏览器根据 CSS 单位执行和调整大小。然后，您可以允许您的用户使用您提到的方法“调整大小”，但*前提是有必要*。在单独的页面上执行此操作，并将 DPI 计算存储为用户会话的一部分或作为 cookie。

或者，一旦 Microsoft 修复[了此错误](https://stackoverflow.com/questions/479758/silverlight-device-independent-coordinates)，您就可以使用 Silverlight 的“设备独立单元”进行精确缩放。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-01T18:05:00.193

你不能。DPI 是屏幕像素分辨率和显示器物理尺寸的函数。后者在我知道的任何浏览器界面中都不可用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-01T18:06:38.070

我认为您不会得到精确的结果 - 例如，您可以使用显示器调整图片大小。我宁愿坚持用户驱动的方法，尽管您可以检测屏幕分辨率以进行初步估计。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-01T18:07:37.787

没有在目标计算机上运行代码的浏览器是不可能的。如果您可以在目标计算机上安装一些东西，您可能能够确定足够的显示器来计算它。

# javascript - jquery更改P的innerhtml不起作用

> ID：935956
> 
> 赞同：3
> 
> 时间：2009-06-01T18:01:59.433
> 
> 标签：javascript, jquery

我有一个我认为是使用 jQuery 进行简单选择来更改段落中的一些文本的方法。它以传统方式完美运行，即

```
document.getElementById('message_text').innerHTML = "hello"; 
```

但是对于 jQuery，它不会。我已经检查了 的值，`$('#message_text')`果然我看到了这些项目。

```
$('#message_text').innerHTML = "hello"; 
```

难道我做错了什么？

有人有想法么？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2009-06-01T18:05:13.967

当你做类似`$('#message_text')`你所拥有的事情时，不是一个常规的 DOM 对象，而是一个 jQuery 包装的集合（即使在这种情况下它只是一个元素。）如果你想访问一个特定的 DOM 属性，你可以这样做：

```
$('#message_text')[0].innerHTML = 'whatever';
$('#message_text').get(0).innerHTML = 'whatever'; 
```

但是，在这种情况下这不是必需的，因为 jQuery 有两个函数可以执行您想要的操作：

[`html()`](http://docs.jquery.com/Html)：

```
$('#message_text').html('whatever'); 
```

[`text()`](http://docs.jquery.com/Attributes/text)：

```
$('#message_text').text('whatever'); 
```

两者之间的区别在于，`html()`它将允许 HTML，而`text()`将转义您传递给它的任何 HTML 标记。使用您需要的那个，而不是使用 innerHTML 手动操作 HTML。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-06-01T18:04:56.683

jQuery 函数[`$()`](http://docs.jquery.com/%24)不像返回一个*HTMLElement*对象`getElementById()`，而是一个*jQuery*对象。在那里，您只需拥有[`html()`](http://docs.jquery.com/Html)与`innerHTML`. 所以：

```
$('#message_text').html('hello'); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-06-01T18:03:02.863

`$('#message_text').html('hello')`

jQuery 选择器返回一个数组，而不是一个 DOM 元素节点。

# java - Java擦除错误与方法中不相关的泛型

> ID：935958
> 
> 赞同：11
> 
> 时间：2009-06-01T18:02:48.683
> 
> 标签：java, generics

我已经阅读了与擦除相关的其他问题，但我仍然不清楚为什么会在下面的类中出现编译错误。其他问题涉及实际使用泛型类型的方法，而我只是尝试使用完全相同的签名来实现方法。谁能解释一下？

编译错误 -> 名称冲突：test.Baz 中的 bar(java.util.Set) 和 test.Foo 中的 bar(java.util.Set) 具有相同的擦除，但都不会覆盖另一个

```
import java.util.Set;

public class test {
  public interface Foo<T> {
    public void bar(Set<String> s);
  }

  public abstract class Baz implements Foo {
    public void bar(Set<String> s) {}
  }
} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2009-06-01T18:19:05.427

您是否打算让 Baz 实施`Foo<String>`或实施`Foo<T>`或实施`Foo`？您输入的是最后一个，但这意味着 Bar 实现了“未通用”的 Foo。奇怪的是，这完全关闭了`Foo`' 定义中的泛型，而不仅仅是与`T`.

这意味着在内部`Baz`，该方法`Foo.bar`接受一个参数 just `Set`， not `Set<String>`。

你想要：

```
public abstract class Baz implements Foo {
  public void bar(Set s) {}
} 
```

或者

```
public abstract class Baz<T> implements Foo<T> {
  public void bar(Set<String> s) {}
} 
```

或者

```
public abstract class Baz implements Foo<Void> {
  public void bar(Set<String> s) {}
} 
```

取决于你想要做什么。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-06-01T18:11:17.033

我认为你需要改变这一点：

```
public abstract class Baz implements Foo { 
```

对此：

```
public abstract class Baz implements Foo<T> { 
```

这样你就可以正确地覆盖 function `Foo`。

# iphone - Iphone 个人开发者责任

> ID：935973
> 
> 赞同：3
> 
> 时间：2009-06-01T18:04:55.233
> 
> 标签：iphone

我一直在开发一个使用设备 GPS 上下文显示 Web 内容的小型 iPhone 应用程序。我希望在 AppStore 中免费列出这个应用程序。

如果我将申请列在我的名下，这是否会产生任何相当大的责任考虑？

在此先感谢，本

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-01T18:11:00.620

这是真正属于知识产权律师论坛的问题之一。我不是律师，所以这有点投机，不应被视为法律建议。

一个好的经验法则是，您在公共领域发布的任何内容都可能使您承担法律责任。您是否在申请中填写您的姓名与您是否可以被起诉无关。

开源人员经常包含一些样板文件，相当于“对此应用程序没有明示或暗示的保证，甚至没有承诺它会工作并且不会让你的手机变砖”。这个样板文件的有效性需要律师的观点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-01T22:48:59.133

您似乎在美国，所以答案是“当然可以”。并且以其他方式列出它也可以。您在任何地点、任何时间所做的任何以任何方式影响任何人的行为都可能被视为提起诉讼的理由。如果您需要具体的法律建议，您应该咨询律师。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-01T22:54:28.357

伊纳尔，要么。但是，如果你免费赠送一些东西，一些真诚地旨在帮助其用户的东西——并且如果你解释它是什么，以及你知道的任何风险——我认为你不必担心太多。当然，你不应该。我说，尽你最大的努力让它变得更好、更安全等等，然后让它自由。

# python - Python Mod_WSGI 输出缓冲区

> ID：935978
> 
> 赞同：0
> 
> 时间：2009-06-01T18:05:40.660
> 
> 标签：python, buffer, mod-wsgi, output-buffering

这是一个有点棘手的问题；

我正在使用 python 中的 mod_wsgi 并希望制作一个持续生成 HTML 的输出缓冲区（直到页面完成加载）。

现在我已经设置了我的脚本，以便 Application() 函数为页面代码创建一个单独的“页面”线程，然后立即使用 python 的队列库为输出缓冲区运行一个连续循环。

有没有更好的方法来设置这个？我想过让输出缓冲区成为线程（而不是页面），但问题是 Application() 函数是唯一可以将 HTML 生成给 Apache 的函数，它（据我所知，使这个想法成为不可能）。

我在当前设置中看到的缺点是，如果发生错误，我无法轻易中断缓冲区并退出，而 Page 线程不会继续运行一段时间。

（有点糟糕，mod_wsgi 没有内置的输出缓冲区来处理这个问题，我讨厌加载整个页面然后只发送一次输出，这会导致页面加载速度慢得多）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-01T18:45:04.103

mod_wsgi 应该内置对生成器的支持。因此，如果您使用像 CherryPy 这样的框架，您只需要：

```
def index():
    yield "Some output"
    #Do Somemore work
    yield "Some more output" 
```

每个收益将返回给用户的页面块。

这是 CherrPy 的一些基础知识，关于那里的实现以及它是如何工作的[http://www.cherrypy.org/wiki/ReturnVsYield](http://www.cherrypy.org/wiki/ReturnVsYield)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-01T23:41:08.140

> （有点糟糕，mod_wsgi 没有内置的输出缓冲区来处理这个问题，我讨厌加载整个页面然后只发送一次输出，这会导致页面加载速度慢得多）。

除非您正在执行某种流式传输或异步应用程序，否则您希望在 99.9% 的时间内一次性发送整个页面。我能想到的唯一例外是如果您要发送一个*大*网页（大，我的意思是数百兆字节）。

我提到这一点的原因是要指出，如果您遇到性能问题，可能不是因为您正在缓冲输出。处理此问题的最简单方法是执行以下操作：

```
def Application(environ, start_response):
    start_response('200 Ok', [('Content-type','text/plain')])
    response = []
    response.append('<h1>')
    response.append('hello, world!')
    response.append('</h1>')
    return [''.join(response)] #returns ['<h1>hello, world!</h1>'] 
```

最好的办法是使用可变数据结构（如列表）来保存消息的块，然后将它们连接到一个字符串中，就像我在上面所做的那样。除非您有某种特殊需要，否则这可能是最好的通用方法。

# apache-flex - 使用 ant 任务构建 Flex 图表

> ID：935986
> 
> 赞同：1
> 
> 时间：2009-06-01T18:06:53.497
> 
> 标签：apache-flex, ant, licensing

使用 Flex ant 任务构建我们的应用程序会导致“Flex 数据可视化试用”水印显示在我们的图表中。

我们有 flex builder 的专业许可证，但不知道如何告诉 ant 任务这些。

任何帮助都是极好的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-01T19:34:44.767

请参阅[http://livedocs.adobe.com/flex/3/html/help.html?content=configuring_environment_2.html#212596](http://livedocs.adobe.com/flex/3/html/help.html?content=configuring_environment_2.html#212596) 。它有几个选项，但没有明确用于 ant 任务。

但是，我在 ant 中使用最新版本的 flex 进行了尝试，并且成功了（flex 3.X）：

```
<mxmlc ...>
...
<license product="flexbuilder3" serial-number="000000000000"/>
....
</mxmlc> 
```

# algorithm - 查找相似颜色的图像

> ID：935992
> 
> 赞同：7
> 
> 时间：2009-06-01T18:08:06.147
> 
> 标签：algorithm, image-processing, colors, python-imaging-library

根据@ SO 这里的建议，我已经对一组库存图像的平均颜色进行了分类。
r,g,b = image.convert("RGB").resize((1,1), Image.ANTIALIAS).getpixel((0,0))

现在，我想向用户展示一个色轮，并针对我的目录运行搜索，以查找与所选颜色最匹配的图像。

我已经阅读了这里发布的几个问题，这些问题建议“找到两种颜色之间的距离”，并参考 Flickr Hacks 书。

Flickr Hack 距离算法似乎基本上是：

* * *

diffr = checkImage.r - search_r
diffg = checkImage.g - search_g
diffb = checkImage.b - search_b
distance = (diffr * diffr + diffg * diffg + diffb * diffb)
如果距离 < 阈值则匹配。

* * *

这种方法需要我计算我的搜索颜色和每个图像的颜色指纹之间的距离。我想知道是否有一种方法可以根据所选颜色（中心点）和预定阈值（或搜索半径）以某种方式指定“搜索区域”。然后构造一个类似 SQL 的查询来返回该区域内的所有图像。

这可能吗？？

顺便说一句，我正在使用 PIL 和相关库在 Python 中实现这一点。

谢谢你的帮助！

SR

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-10-21T13:01:37.277

[色差 (Delta E)](http://en.wikipedia.org/wiki/Color_difference) - 两种颜色之间的差异或距离是色彩科学中的一个重要指标。

你可以在[这里](https://github.com/gtaylor/python-colormath/blob/master/colormath/color_diff.py)`Python`找到代码

请注意，您需要在计算之前转换`RGB`为。`Lab``Delta E`

[RGB -> XYZ -> 实验室](https://github.com/gtaylor/python-colormath/blob/master/colormath/color_conversions.py)

附加信息：

[布鲁斯·贾斯汀·林德布鲁姆网站](http://www.brucelindbloom.com/index.html?ColorCalculator.html)

[颜色转换数学和公式](http://www.easyrgb.com/index.php?X=MATH)

[颜色增量/比较数学](http://www.easyrgb.com/index.php?X=DELT)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-06-01T18:49:42.627

您可以通过对每个组件进行比较而不是平方来查找距离来显着节省计算量。

```
if abs(check.r - search.r) < threshold and
   abs(check.g - search.g) < threshold and
   abs(check.b - search.b) < threshold 
```

将它与缓存表结合起来可能就足以满足您正在做的任何事情。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-01T18:31:12.303

如果是我，我会不那么花哨，将搜索缓存在辅助表中，例如：

```
CREATE TABLE `image_search` (
    `id` int not null auto_increment,
    `image_id` int not null,
    `r` tinyint not null,
    `g` tinyint not null,
    `b` tinyint not null,
    `distance` tinyint not null,
    `hit` bool not null,
    PRIMARY KEY (`id`),
    UNIQUE KEY `image_id_by_rgb_by_distance` (`image_id`,`r`,`g`,`b`,`distance`),
    KEY `image_id_by_rgb_by_distance_by_hit` (`image_id`,`r`,`g`,`b`,`distance`,`hit`),
); 
```

从中提取以找到您的匹配项，例如

```
SELECT `image_id`
FROM `image_search`
WHERE `r` = $r
AND `g` = $g
AND `b` = $b
AND `distance` = $distance
AND `hit` = 1 
```

如果你没有得到结果，那么做

```
SELECT `image_id`
FROM `image_search`
WHERE `r` = $r
AND `g` = $g
AND `b` = $b
AND `distance` = $distance 
```

如果没有结果*，*则遍历您的图像目录进行比较并将每个结果（正面或负面）存储在表中。

那么只有在没有缓存结果时才会变慢。如果您的 UI 鼓励用户选择某些有用的预设颜色，您可以预先计算这些颜色并提供更多帮助。

当您将图像添加到目录时，还可以预先计算所有先前执行的搜索的奖励积分。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-01T20:54:18.867

我们可以将颜色视为三维空间中的一个点。现在每个图像将位于由其平均颜色定义的空间点。用户在 3-d 空间中选择一个点，而您想要找到最接近该点的图像。

这并不简单，但是比你或我更聪明的人已经做了很多工作（Don Knuth 称之为“邮局问题”）。像往常一样，一个好的起点是[Wikipedia 。](http://en.wikipedia.org/wiki/Nearest_neighbor_search)

# f# - 用 F# 计算数字列表的笛卡尔积

> ID：935996
> 
> 赞同：6
> 
> 时间：2009-06-01T18:09:25.850
> 
> 标签：f#

我是新手#

我正在尝试计算数字列表的笛卡尔积。我“借”了这个。

```
let xs = [1..99]
let ys = [1..99]
seq {for x in xs do for y in ys do yield x * y} 
```

有没有更好或更优雅的方式？

加里

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-06-01T18:26:38.597

根据 List 模块提供的功能解决问题的另一种可能性是：

```
let xs = [1..99]
let ys = [1..99]
let zs = xs |> List.collect (fun x -> ys |> List.map (fun y -> x*y)) 
```

这避免了对 .concat 的额外调用，并且也应该完成这项工作。

但我会坚持你的解决方案。它应该是最易读的，是真正的比赛赢家。（试着大声读出代码。你的完全可以理解，而诺多林或我的则不是。）

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-06-01T21:32:41.533

免责声明：我没有安装当前 F# 的机器，所以我无法测试我的代码。但是，基本上，如果您`sequence`从 Haskell 中窃取，您可以将程序编写为

```
let cartesian = sequence >> List.map product 
```

并将其运行为

```
cartesian [[1..99]; [1..99]] 
```

以下是如何编写`sequence`. 这是您编写的序列表达式的通用版本。它只处理无限数量的列表：`{ for x in xs do for y in ys do for z in zs ... yield [x;y;z;...] }`.

```
let rec sequence = function
  | [] -> Seq.singleton []
  | (l::ls) -> seq { for x in l do for xs in sequence ls do yield (x::xs) }
// also you'll need product to do the multiplication
let product = Seq.fold_left1 ( * ) 
```

然后你可以把你的程序写成

```
let cartesian xs ys = [xs; ys] |> sequence |> List.map product
// ... or one-argument, point-free style:
let cartesian' = sequence >> Seq.map product 
```

您可能需要将一些`Seq`s 更改为`List`s。

然而，能猜出你的非通用列表理解含义的人数可能比识别名字的人数要多得多`sequence`，所以你可能会更好地使用列表理解。`sequence`不过，只要您想运行整个计算表达式列表，它就会派上用场。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-06-01T18:18:17.333

确实有一种更优雅的方式（至少在函数意义上）来计算笛卡尔积，它使用类中存在的函数`List`。（这里不需要涉及序列或循环，至少不需要直接涉及。）

试试这个：

```
let xs = [1..99]
let ys = [1..99]
xs |> List.map(fun x -> ys |> List.map(fun y -> x * y)) |> List.concat 
```

诚然，它看起来会稍微长一些，虽然在风格上更实用。*``***