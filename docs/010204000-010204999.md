# StackOverflow 问答 10204000-10204999

# jsf - JSF 中的语言切换器实现

> ID：10204001
> 
> 赞同：1
> 
> 时间：2012-04-18T06:29:03.237
> 
> 标签：jsf, primefaces

我有一个复杂的 jsf 页面，其中包含一些在 PrimeFaces 中开发的小部件。到目前为止，应用程序是完全 ajax 化的，这意味着没有提交，但是所有的事件和更新都是通过 Ajax 行为处理的（这不是必须的，而是一个很好的特性）。我还做了一个`SelectOneMenu`切换语言：

```
<h:form>
    <p:panelGrid columns="2" >
        <h:outputText value="#{msgs.SelectLanguage}" />
        <p:selectOneMenu value="#{languageSwitcher.selectedLanguage}" >
            <f:selectItems value="#{languageSwitcher.languages}" ></f:selectItems>
        </p:selectOneMenu> 
    </p:panelGrid>
</h:form> 
```

切换器运行良好。我的问题是如何在选择语言时重新加载翻译的消息。

我已经尝试了这些选项：

**选项1**

在 selectOneMenu 中使用 ajax 更新：

```
<p:ajax update="myFormsTobeUpdated" ></p:ajax> 
```

这很好用，并且是首选的解决方案，因为它是 Ajax，但是

已编辑

此解决方案不会对 PrimeFaces TabView 中的选项卡标题进行 ajax 更新，这是一个阻塞问题，因为需要翻译选项卡标题。

**选项 2**

用 Javascript 完全重新加载页面。我已经尝试过了，但不起作用（不知道为什么）：

```
<p:selectOneMenu value="#{languageSwitcher.selectedLanguage}" onchange="window.location.reload()" > 
```

**选项 3**

在 Java 中完全重新加载页面，如下所述：[https](https://stackoverflow.com/a/1821708/870122) ://stackoverflow.com/a/1821708/870122 （老实说我还没有尝试过，但很快就会这样做！）

欢迎任何建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T12:29:55.660

如果您至少使用 PrimeFaces 3.2，那么您可以使用

```
<p:ajax update="@all" /> 
```

更新整个视图。在此版本之前，`@all`不支持 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-20T17:25:29.203

在您的表格中：

```
<h:selectOneRadio   value="#{localeBean.language}"
                        onchange="submit()">
                        <f:selectItems value="#{collection.listLangs()}" var="s"
                            itemLabel="${s.description}" itemValue="${s.code}" />
                    </h:selectOneRadio> 
```

但您没有收藏（请记住，以您的形式）：

```
<h:selectOneMenu value="#{localeBean.language}"
                                        onchange="submit()">
                                        <f:selectItem itemValue="en" itemLabel="English" /> 
                                        <f:selectItem itemValue="es" itemLabel="Español" />
                                    </h:selectOneMenu> 
```

在 Primefaces 中，使用这个：p:selectOneMenu

* * *

在你的 Bean 中：

```
import java.lang.invoke.MethodHandles;
import java.util.Locale;
import java.util.ResourceBundle;

import javax.annotation.PostConstruct;
import javax.faces.bean.ManagedBean;
import javax.faces.bean.SessionScoped;
import javax.faces.context.FacesContext;

import org.apache.logging.log4j.LogManager;
import org.apache.logging.log4j.Logger;

@ManagedBean
@SessionScoped
public class LocaleBean {

    private static final Logger LOG = LogManager.getLogger(MethodHandles.lookup().lookupClass());

    private Locale locale = FacesContext.getCurrentInstance().getViewRoot().getLocale();

    public Locale getLocale() {
        return locale;
    }

    public String getLanguage() {
        return locale.getLanguage();
    }

    public void setLanguage(String language) {
        LOG.info("Vamos a Cambiar a: " + language);
        locale = new Locale(language);
        LOG.info("Vamos a Cambiar a: " + locale.getDisplayName() + FacesContext.getCurrentInstance().getViewRoot());
        FacesContext.getCurrentInstance().getViewRoot().setLocale(locale);
    }

} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-19T18:43:31.047

由于使用**选项 1**无法对 PrimeFaces TabView 中的选项卡标题进行 ajax 更新，因此我已切换到**选项 2**，即使用 JavaScript 完全重新加载页面。

使其工作的代码是：

```
<h:form id="selectLanguage">
    <p:panelGrid columns="2">
        <h:outputText value="#{msgs.SelectLanguage}" />
        <p:selectOneMenu value="#{languageSwitcher.selectedLanguage}" onchange="document.getElementById('selectLanguage').submit();" >
            <f:selectItems value="#{languageSwitcher.languages}" ></f:selectItems>
        </p:selectOneMenu> 
    </p:panelGrid>
</h:form> 
```

# ffmpeg - 使用ffmpeg文件加密视频精华

> ID：10204004
> 
> 赞同：0
> 
> 时间：2012-04-18T06:29:30.543
> 
> 标签：ffmpeg

我想使用 ffmpeg 创建一个加密的 mxf 文件。谁能告诉我如何使用 ffmpeg 加密 avi/mpeg 文件并将其保存为 mxf 格式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T21:41:42.730

你的用例是什么？

我不知道 ffmpeg 是否可以满足您的需求，但有一些 MXF 工具可以提供帮助，以下是一些可能对您有所帮助的链接：

*   [在http://sourceforge.net/projects/mxflib/](http://sourceforge.net/projects/mxflib/)上查看 mxflib 项目中的 mxfcrypt
*   或者，如果您的用例与 DCP 相关[http://www.cinecert.com/asdcplib/](http://www.cinecert.com/asdcplib/)

问候， 马特

# objective-c - 如何防止 Xcode 每次都重建项目

> ID：10204006
> 
> 赞同：19
> 
> 时间：2012-04-18T06:29:32.177
> 
> 标签：objective-c, xcode, macos, code-signing, mac-app-store

我有一个 Mac OS X 应用程序，它由一个主要目标和一个依赖框架组成。自从在我的 Mac OS X 应用程序上启用代码签名后，我注意到 Xcode 每次运行它都会重新构建主要目标，即使我没有触及任何代码行。

这是一个问题，因为依赖框架需要知道主目标文件的 CRC。每次 Xcode 重建主目标时，CRC 都会发生变化。

在代码签名之前，我会构建一次主目标，生成 CRC，将 CRC 输入到我的框架代码中，然后再次构建主目标。Xcode 只会注意到框架发生了变化，因此它不会重建主要目标。

有什么建议么？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-08-30T15:40:38.713

Xcode 中实际上有一个选项可以在不先构建代码的情况下运行。在 Product > Perform Action 下选择“Run without Building”选项。热键是`ctrl`++ 。`cmd``R`

# windows-phone-7 - wp7 webbrowser 导航事件未触发

> ID：10204013
> 
> 赞同：1
> 
> 时间：2012-04-18T06:30:34.770
> 
> 标签：windows-phone-7, webbrowser-control

我有一个带有超链接的网页 "myapp://mypage?id=123456&name=hello" ，单击该链接应该会触发 webbrowser 导航事件，以便我可以捕获 url 并做一些有意义的事情。这里的问题是导航事件根本没有被触发。我尝试了普通网站，例如：“http://xxxx.com”，它可以工作。那么有没有办法通过 webbrowser 控件来处理用户自定义 url？ps：IsScriptEnabled 是真的谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T23:27:04.360

根据我对此的调查，只有在使用文件、http 和 mailto 协议时尝试超链接时，才会调用 WebBrowser.Navigating。甚至不提供自定义协议。

在网上挖掘自定义扩展让我相信可以实现一些可以解决它的东西，但这样做会让人头疼和痛苦。

如果您确实/确实找到了任何东西，请发布它，因为我有兴趣看到您的解决方案。

# html - 在 HTML 输入字段中显示自定义值格式

> ID：10204016
> 
> 赞同：0
> 
> 时间：2012-04-18T06:30:40.897
> 
> 标签：html

我正在使用表单上的电话号码字段...

```
<label for="phone_no">Phone:</label>
<input name="phone_no" placeholder="(555)867-5309" type="tel" value="<?php print($_POST['phone_no']); ?>"/> 
```

我希望这个数字是一个整数，所以我使用 type="tel"。是否可以“屏蔽”数据（即在不实际更改基础数据的情况下显示其格式）？

这将使我不必以编程方式对其进行更改以显示它，然后对其进行更改以解释它并将其存储在我的数据库中。

PS 我还需要一个类似的 SSN 字段解决方案，所以请不要让你的答案太具体，这样它只适用于电话号码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T07:19:16.927

坦率地说，处理这个问题的最简单方法就是接受电话号码作为字符串，并在将其存储到数据库之前在服务器端去除任何非字母字符。按照您的建议尝试在客户端处理它是值得的，这会带来更多麻烦。

```
function remove_non_numeric($string) {
    return preg_replace('/\D/', '', $string)
} 
```

然后，如果它没有 10 个字符或者您想要验证数据的精确程度，您可以拒绝它。

显示它也不是很困难，但是如果您将电话号码视为字符串，您会发现它更容易做到。

希望这可以帮助。

# json.net - 如何使用 JSON 解析器序列化动态字段名称

> ID：10204017
> 
> 赞同：0
> 
> 时间：2012-04-18T06:30:40.927
> 
> 标签：json.net, json

我正在使用 JSON.Net 序列化我的对象。例如，如果这是我的对象

```
Class MainData
{
   [JsonProperty("keyValues")]
   string val;
} 
```

'val' 的数据是一个键值对字符串，例如 key1:value1。我有一个场景，我不应该在我的最终序列化字符串中获得上面的“keyValues”名称，而是获得一个看起来像这样的序列化字符串

```
{
    "key1":"value1"
} 
```

目前使用我的序列化程序我得到了这个，这不是我需要的

```
{
     "keyValues":"key:value1"
} 
```

有人可以指导我使用任何文档/解决方案来动态分配字段名称，而不是使用对象内部定义的默认变量名称/JSONProperty 名称吗？

提前非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T15:28:37.873

我整天都在为此苦苦挣扎，我所做的是使用字典对象并将其序列化，但是我收到一条错误消息“无法序列化字典”，应该阅读整个消息，“无法序列化字典时键不是字符串或对象”这现在对我有用并给了我一个键/值对

我有以下对象

```
public class Meal {
public int mealId;
public int value;
public Meal(int MealId, int Value) {
mealId = MealId;
value = Value;
} }

public class Crew
{

public Meal[] AllocatedMeals {
get {
return new Meal[]{ 
new Meal(1085, 2),
new Meal(1086, 1) }; } }

public int AllocatedMealTotal {
get {
return this.AllocatedMeals.Sum(x => x.value); } }
} 
```

然后是下面的代码

```
Dictionary<string,string> MealsAllocated = crew.AllocatedMeals.ToDictionary(x => x.mealId.ToString(), x => x.value.ToString());

return new JavaScriptSerializer().Serialize(
new {
Allocated = new {
Total = crew.AllocatedMealTotal,
Values = MealsAllocated } ) 
```

要得到

```
"Allocated":{"Total":3,"Values":{"1085":"2","1086":"1"}} 
```

# samba - 如何在 Samba 中获取工作组名称？

> ID：10204018
> 
> 赞同：1
> 
> 时间：2012-04-18T06:30:46.997
> 
> 标签：samba

给定 IP 或主机名，有没有办法在 Linux 中通过 libsmbclient API 或 Samba 命令获取工作组名称？

我已经知道如何通过 libsmbclient API 浏览工作组、服务器和共享。

有时并非局域网中的所有服务器都可以通过 libsmbclient API 找到。我还不知道根本原因。

# c - 如何在 C 项目中使用 c Sonar 插件

> ID：10204020
> 
> 赞同：1
> 
> 时间：2012-04-18T06:30:52.113
> 
> 标签：c, sonarqube

我的机器上有 sonar2.14，sonar c 插件，sonar-runner-1.0.jar。我可以使用命令 sonar.sh 控制台启动声纳，并在浏览器中使用以下 URL [http://localhost:port_No](http://localhost:port_No)我能够看到 GUI。

我的问题是如何使用这个声纳来分析 C 代码。我应该在编译时使用任何声纳命令吗？例如：对于 java，我们使用 maven 声纳。

同样的，C 有什么命令。请用一个简单的例子详细告诉我。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T06:56:12.387

一切都在[http://www.sonarsource.com/products/plugins/languages/cpp/installation-and-usage/](http://www.sonarsource.com/products/plugins/languages/cpp/installation-and-usage/)上进行了解释，甚至还有一个示例应用程序......你错过了什么？

# javascript - 如何使用 Mocha 测试“正常”（非节点特定）JavaScript 函数？

> ID：10204021
> 
> 赞同：48
> 
> 时间：2012-04-18T06:30:58.317
> 
> 标签：javascript, unit-testing, node.js, mocha.js

这看起来*应该*非常简单；然而，经过两个小时的阅读和试​​错没有成功，我认输并问你们！

我正在尝试将[Mocha](http://visionmedia.github.com/mocha/)与[Should.js](https://github.com/visionmedia/should.js)一起使用来测试一些 JavaScript 函数，但我遇到了范围界定问题。我已将其简化为最基本的测试用例，但我无法使其正常工作。

我有一个名为 的文件`functions.js`，其中仅包含以下内容：

```
function testFunction() {
    return 1;
} 
```

我的`tests.js`（位于同一文件夹中）内容：

```
require('./functions.js')

describe('tests', function(){
    describe('testFunction', function(){
        it('should return 1', function(){
            testFunction().should.equal(1);
        })
    })
}) 
```

此测试失败并显示`ReferenceError: testFunction is not defined`.

我明白为什么，因为我发现的大多数示例要么将对象和函数附加到 Node`global`对象，要么使用导出它们`module.exports`——但是使用这两种方法中的任何一种都意味着我的函数代码会在标准浏览器情况下抛出错误，其中这些对象不存在。

那么如何在不使用特定于节点的语法的情况下访问在我的测试中单独的脚本文件中声明的独立函数呢？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-04-18T12:34:47.387

感谢这里的其他答案，我已经开始工作了。

但是没有提到的一件事——也许是因为它是 Noder 中的常识——你需要将`require`调用的结果分配给一个变量，以便在从测试套件中调用导出的函数时可以引用它。

这是我的完整代码，以供将来参考：

**`functions.js`**：

```
function testFunction () {
    return 1;
}

// If we're running under Node, 
if(typeof exports !== 'undefined') {
    exports.testFunction = testFunction;
} 
```

**`tests.js`**：

```
var myCode = require('./functions')

describe('tests', function(){
    describe('testFunction', function(){
        it('should return 1', function(){
            // Call the exported function from the module
            myCode.testFunction().should.equal(1);
        })
    })
}) 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-04-18T06:54:27.110

```
require('./functions.js') 
```

这没有任何作用，因为您没有导出任何内容。您所期望的`testFunction`是全球可用，基本上与

```
global.testFunction = function() {
    return 1;
} 
```

您只是*无法*绕过导出/全局机制。这是节点的设计方式。没有隐式的全局共享上下文（例如`window`在浏览器上）。模块中的每个“全局”变量都被困在它的上下文中。

你应该使用`module.exports`. 如果您打算与浏览器环境共享该文件，有一些方法可以使其兼容。要快速破解，只需`window.module = {}; jQuery.extend(window, module.exports)`在浏览器中或node.js 中执行`if (typeof exports !== 'undefined'){ exports.testFunction = testFunction }`。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-04-18T06:55:13.720

如果你想通过 require 使任何模块可用，你应该使用

```
module.exports 
```

如你所知 ;）

如果您想通过这样做在 Node 和浏览器中使用模块，有一个解决方案

```
function testFunction() { /* code */ }

if (typeof exports !== 'undefined') {
   exports.testFunction = testFunction
} 
```

通过这样做，您将能够在浏览器和节点环境中使用该文件

# java - java servlet中发生空指针异常

> ID：10204022
> 
> 赞同：0
> 
> 时间：2012-04-18T06:31:02.380
> 
> 标签：java, jsp, servlets, nullpointerexception

我正在开发一个评论论坛，人们会发表评论，并且可以在发布后看到他们的评论，但我得到了`null pointer exception in servlet`。

索引.jsp

```
<form action="Comment" method="post">

  <textarea style="resize: none;" cols="30" rows="3" id="myTextarea" name="myTextarea"></textarea>

</form> 
```

评论小服务程序

```
 try{
    String comment=request.getParameter("myTextarea");

       ArrayList al1=null;
        ArrayList emp_list =new ArrayList();
         al1.add(comment);       
         emp_list.add(al1);                 
         request.setAttribute("empList",emp_list);        
        String nextJSP = "/result.jsp";
       RequestDispatcher dispatcher = getServletContext().getRequestDispatcher(nextJSP);
      dispatcher.forward(request,response);
    }       
    catch(Exception e){       
    out.println("exception"+e);//exception coming 

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T06:33:43.510

`al1`当您尝试添加时，您将为 null：

```
ArrayList al1=null;
ArrayList emp_list =new ArrayList();
al1.add(comment); 
```

尝试将第一行更改为：

```
ArrayList al1 = new ArrayList(); 
```

这将导致将数组列表中的数组列表转发到您的下一个 jsp 页面。这样做可能更简单：

```
ArrayList emp_list =new ArrayList();
emp_list.add(comment); 
```

...并完全删除变量`al1`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T06:32:56.970

您的 al1 数组列表被实例化为空！尝试

```
ArrayList<String> al1 = new ArrayList<String>();
al1.add(comment); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T07:13:44.950

伙计，您正在将引用分配给空值。那就是al1.add()，只要用new分配内存，它就会解决你的问题......享受......

# jquery - 隐藏的'div'中的Jquery验证

> ID：10204024
> 
> 赞同：2
> 
> 时间：2012-04-18T06:31:05.967
> 
> 标签：jquery, html, validation, jquery-plugins, jquery-validate

我是 Jquery 的新手。我正在使用具有 14 个字段的**表单**

**前 7 个字段是可见的**，**接下来的 7 个字段是基于在 div 中单击按钮来切换的，**现在总共有**7 个字段**是**'required'**。前 7 个（可见部分）中的 3 个和切换 div 中的 4 个**。**

问题是，当切换 div 可见时，如果我**错过了 7 个字段中的任何一个，****JQuery**的**验证插件会****显示**所需的消息，但是当 div是隐藏的。**![这是正常情况](../Images/9204c840ad26947b3c306feb240c48fd.png)**

 **即使表单的一部分**被**隐藏**，**如何进行**完整表单的验证** 现在如果我删除文本框**地址 1**的值并隐藏**地址部分**并单击**保存**它不会提示**地址 1****所需**的东西，即使我保持**“必需”** ****![这是条件2](../Images/f244fad72b9afc46ded9f0e9a77ec0e2.png)****

 ******* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-18T06:32:55.023

可能的原因可能是文件中有`ignore: ':hidden'`行`jquery.validate.unobtrusive.js`。只需删除该行。

在 1.9.0 版本之后，这是默认行为。如果文件中不存在该行（我不确定），您可以通过添加手动修复该行

```
$.validator.setDefaults({ ignore: [] }); 
```

正如你[在这里看到的](http://bassistance.de/2011/10/07/release-validation-plugin-1-9-0/)

> 另一个更改应该使带有隐藏元素的表单的设置更容易，这些现在默认情况下被忽略（*选项“ignore”现在默认为“:hidden”*）。从理论上讲，这可能会破坏现有设置。在不太可能的情况下，**您可以通过将忽略选项设置为“[]”（不带引号的方括号）来修复它。**********

# python - 除了 PHP、MySQL、JS、HTML、CSS 还需要学习什么技术

> ID：10204030
> 
> 赞同：-2
> 
> 时间：2012-04-18T06:31:39.853
> 
> 标签：python, ruby, perl, node.js, clojure

所以我在这里，我几乎有一个完整的语言链，用于任何目的：

*   PHP
*   HTML
*   Javascript
*   爪哇
*   CSS
*   SQL

现在我在质疑下一步我应该做什么作为替代或补充。

**我知道没有一种最好的语言，但我希望我至少可以从使用这些语言的人那里获得一些专业知识。**

我的主要关注点是 Web 开发，因此主要有一些技术最近发展得非常快：

*   node.js（是的，基本上是 javascript，但我认为要在服务器端使用 js 需要学习很多东西）
*   红宝石
*   clojure

还有一些已经存在了好几年了：

*   perl
*   Python

但这些只是我目前看到的那些。您对这些语言/技术有何建议？为什么？有什么好处或者我错过了其中的终极明星？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T06:37:54.903

没有终极明星，每种语言都有自己的优缺点。大多数语言的框架几乎是相同的，你可以用你所知道的做几乎所有你需要的事情。这完全取决于您的需求和当前项目。

我是一名使用 PHP 的 Web 开发人员，除了可能像在 Java 中那样制作一个真正的 Singleton （因为脚本的生命周期）之外，我仍然没有遇到任何问题。

Python 很酷，我喜欢它，因为它有很多库和有用的工具，而且语法很方便。

我认为现在对您来说一个好主意是采用 MVC 框架（Cohana、CodeIgniter、Yii 等）并开始使用它并学习它，因为对于更复杂的 Web 应用程序来说，使用框架的经验是好的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T06:41:51.650

我认为你应该学习 NoSql 类型的 DB 和 NoSql Db 的设计，因为这是深度 Web 应用程序中高流量的未来方式......

我建议对以下设计和实施进行一些研究：

Apache Hadoop Cassandra MongoDB couchDB BigTable

甚至可以查看 wiki： [http ://en.wikipedia.org/wiki/NoSQL](http://en.wikipedia.org/wiki/NoSQL)

这是 Facebook、Twitter、Google 等使用的“云”技术。它非常令人印象深刻，但与传统数据库 (RDBMS) 相比，它需要相当多的方法……

这对我来说是自然的进步，当我在目前的工作中被聘为将我的开发“技能”带到云端时 :)更多的钱，它是主流消费者的新兴市场）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T06:45:52.590

我遇到了类似的“下一步是什么语言”的难题并选择了 Ruby。我阅读了大量的 Ruby 与 Python 文章，最后决定在每篇文章中都使用一个简单的应用程序。我使用了 Ruby on Rails 和 Python 的 Django 框架。我真的很喜欢 Rails MVC 模式的使用。它帮助我坚持更好的写作习惯。另外，我找到了一个很好的 IDE（RubyMine），当你整天使用一个工具时，我发现它对了解一个新的框架很有帮助。

# c++ - reinterpret_cast 的有效使用？

> ID：10204032
> 
> 赞同：2
> 
> 时间：2012-04-18T06:31:48.430
> 
> 标签：c++

根据经验，以下工作（gcc 和 VC++），但它是有效且可移植的代码吗？

```
typedef struct 
{
    int w[2];
} A;

struct B
{
    int blah[2];
};

void my_func(B b)
{
    using namespace std;
    cout << b.blah[0] << b.blah[1] << endl;
}

int main(int argc, char* argv[])
{

    using namespace std;

    A a;
    a.w[0] = 1;
    a.w[1] = 2;

    cout << a.w[0] << a.w[1] << endl;

    // my_func(a);                     // compiler error, as expected
    my_func(reinterpret_cast<B&>(a));  // reinterpret, magic?
    my_func(  *(B*)(&a) );             // is this equivalent? 

    return 0;
}
// Output:
// 12
// 12
// 12 
```

*   reinterpret_cast 有效吗？
*   C风格的演员表是否等效？
*   目的是将位于的位`&a`解释为 B 类，这是有效/最佳方法吗？

（题外话：对于那些想知道我*为什么*要这样做的人，我正在处理两个需要 128 位内存的 C 库，并使用具有不同内部名称的结构 - 很像我示例中的结构。我不想要 memcopy，也不想在 3rd 方代码中乱窜。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T06:39:43.327

*在 C++11 中，如果这两种类型是布局兼容*的，这是完全允许的，这对于相同且具有标准布局的结构是正确的。[有关更多详细信息，请参阅此答案](https://stackoverflow.com/a/7762964/5696)。

您还可以在以前版本的 C++ 中将两个结构粘贴在同一个联合中，这有一些保证能够以相同的顺序访问不同的结构类型的相同数据成员（数据成员的“公共初始序列”）。

在这种情况下，是的，C 风格的演员表是等价的，但`reinterpret_cast`可能更惯用。

# java - 如何在操作表单中显示 HTML 内容

> ID：10204038
> 
> 赞同：0
> 
> 时间：2012-04-18T06:32:16.937
> 
> 标签：java, action, struts-1, actionform

我正在编写一个 Struts 动作类，我从中生成一些 HTML 内容并将其添加到 ActionForm 中的一个字段中。如何在 JSP 文件中显示它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T07:21:44.937

我会考虑使用请求对象而不是修改 ActionForm。您可以使用 JSP 中的逻辑和 bean 标记库，并尝试将 HTML 内容分开并将其全部放入 JSP 中。

例如，您可以在您的操作中使用：

```
request.setAttribute("message", "<STRONG>html message</STRONG>"); 
```

在你的 JSP 中是这样的：

```
<logic:present name="message">
  <bean:write name="message" filter="false" />
</logic:present> 
```

但我认为将 html 代码留给负责该代码的 JSP 会是一种更好的方法。一个动作必须做其他事情，并且是一个很好的设计来保持这些任务分开。

考虑一下你的行动：

```
request.setAttribute("message", "html message"); 
```

这适用于您的 JSP：

```
<logic:present name="message">
  <STRONG><bean:write name="message" /></STRONG>
</logic:present> 
```

通过这种方式，您可以将所有 html 代码生成集中在您的 JSP 文件上，并减轻这种负担。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T07:01:19.313

使用 JSP EL。

在行动中：

```
actionForm.setMyHtmlString(someHtml); 
```

在 JSP 中：

```
Here is the HTML : ${fooBarActionForm.myHtmlString} 
```

Struts 将操作表单存储为请求或会话属性。此属性的名称是在 struts-config.xml 文件中赋予操作表单的名称。

# c# - 如何在 SharePoint 中允许匿名用户上传文件

> ID：10204040
> 
> 赞同：1
> 
> 时间：2012-04-18T06:32:21.577
> 
> 标签：c#, sharepoint, sharepoint-2010

我想允许匿名用户在 SharePoint 中上传文件。在做了一些研究之后，我写了这个代码来允许匿名用户上传。但匿名用户无法登录并被要求登录。请帮助我。我的代码有什么问题？

```
 public string CreateSPFilet(string spServerURL, string tempLibrary, string folder, Stream fileStream, bool overwrite)
    {
        string strError = "";
        string fileName = "";
        try
        {                
            if (!SPSite.Exists(new Uri(spServerURL)))
            {
                strError += ERROR01;
            }
            else
            {
                SPSite tempSite = new SPSite(spServerURL);
                SPUserToken systoken = tempSite.SystemAccount.UserToken;
                using (SPSite site = new SPSite(spServerURL, systoken))
                {
                    SPWeb oWebsite = site.OpenWeb();
                    SPSecurity.RunWithElevatedPrivileges(delegate()
                   {
                       using (SPSite elevatedSite = new SPSite(site.ID))
                       {
                           using (SPWeb eevatedWeb = elevatedSite.OpenWeb(oWebsite.ID))
                           {
                               oWebsite.AllowUnsafeUpdates = true;
                               string targetUrl = SPUrlUtility.CombineUrl(oWebsite.ServerRelativeUrl, tempLibrary);
                               SPFolder target = oWebsite.GetFolder(targetUrl);
                               SPFileCollection files = target.Files;
                               SPFile file = target.Files.Add(fileName, fileStream, overwrite);
                               oWebsite.AllowUnsafeUpdates = false;
                           }
                       }
                   });
                }
            } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T08:56:58.190

在最后一个 using 语句中，您需要使用对提升对象的引用而不是其他对象。像这样：

```
eevatedWeb.AllowUnsafeUpdates = true;   
string targetUrl = SPUrlUtility.CombineUrl(eevatedWeb.ServerRelativeUrl, tempLibrary);                                
SPFolder target = eevatedWeb.GetFolder(targetUrl);                                   
SPFileCollection files = target.Files;
SPFile file = target.Files.Add(fileName, fileStream, overwrite);                                
eevatedWeb.AllowUnsafeUpdates = false; 
```

您还需要处理对象 tempSite 和 oWebSite，因为它们不是由您的上述代码处理的。

# django - Django + PostgreSQL 在 datetimefield 上按日期分组

> ID：10204044
> 
> 赞同：1
> 
> 时间：2012-04-18T06:32:41.867
> 
> 标签：django, django-models

我有一个模型，它有一个日期时间字段，我试图在按日期分组时对其进行注释。

例如：

```
order_totals = Transfer.objects.filter(created__range=[datetime.datetime.combine(datetime.date.today(), datetime.time.min) + datetime.timedelta(days=-5), datetime.datetime.combine(datetime.date.today(), datetime.time.max)]).values('created').annotate(Count('id')) 
```

上面的问题是它按日期时间字段的每秒/毫秒分组，而不仅仅是日期。

我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T06:46:00.243

您应该能够通过使用 QuerySet.extra 并在查询中添加一列来解决此问题

例如。

```
qs.filter(...).extra(select={'created_date': 'created::date'}).values('created_date') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-30T17:25:17.947

从[Django 1.8](https://docs.djangoproject.com/en/1.8/releases/1.8/#query-expressions-conditional-expressions-and-database-functions)开始，您还可以使用新的[DateTime 表达式](https://github.com/django/django/blob/1.8.4/django/db/models/expressions.py#L857)（奇怪的是，它没有记录在[内置表达式](https://docs.djangoproject.com/en/1.8/ref/models/expressions/#built-in-expressions)表中）。

```
import pytz
from django.db.models.expressions import DateTime

qs.annotate(created_date=DateTime('created', 'day', pytz.UTC)) 
```

如果要分组`created_date`，只需链接另一个聚合表达式：

```
qs.annotate(created_date=DateTime('created', 'day', pytz.UTC)).values('created_date').annotate(number=Count('id')) 
```

（需要冗余`values`来生成适当的`GROUP BY`. 请参阅Django 文档中的[聚合主题](https://docs.djangoproject.com/en/dev/topics/db/aggregation/#order-of-annotate-and-values-clauses)）。

# php - $_SESSION 在 PHP 中大约 10 分钟后为空

> ID：10204045
> 
> 赞同：1
> 
> 时间：2012-04-18T06:32:42.797
> 
> 标签：php, session

我们目前使用 $_SESSION 来存储我们当前的会话数据（即登录、当前状态等）。该脚本多年来一直运行良好，但我们从旧的 PHP4 服务器更改为 PHP5 服务器。现在经过一段时间（大约 10 分钟，但似乎不一致）后，$_SESSION 被擦除了！（：哦！）。但似乎 PHPSESSID 仍然驻留在 cookie 中，所以 cookie 似乎没有过期......

我的服务器当前设置是：（phpinfo）

[http://jsfiddle.net/6DjcC/1/](http://jsfiddle.net/6DjcC/1/)

这可能是什么原因造成的？我敢肯定，我完全忽略了它的一些小东西，这是主要原因。

我的会话变量：

```
Directive   Local Value Master Value
session.auto_start  Off Off
session.bug_compat_42   On  On
session.bug_compat_warn On  On
session.cache_expire    15400   15400
session.cache_limiter   nocache nocache
session.cookie_domain   no value    no value
session.cookie_httponly Off Off
session.cookie_lifetime 0   0
session.cookie_path /   /
session.cookie_secure   Off Off
session.entropy_file    /dev/urandom    /dev/urandom
session.entropy_length  0   0
session.gc_divisor  100 100
session.gc_maxlifetime  154000  154000
session.gc_probability  0   0
session.hash_bits_per_character 5   5
session.hash_function   0   0
session.name    PHPSESSID   PHPSESSID
session.referer_check   no value    no value
session.save_handler    files   files
session.save_path   /var/lib/php    /var/lib/php
session.serialize_handler   php php
session.use_cookies On  On
session.use_only_cookies    On  On
session.use_trans_sid   0   0 
```

我正在使用以下“非标准扩展”：

-X-调试

-苏霍辛

-e加速器

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T07:17:38.207

我敢打赌，其他应用程序正在清除您的会话。他们似乎共享相同的会话 save_path。

[你使用session_save_path()](http://www.php.net/manual/en/function.session-save-path.php)改变你的 save_path 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T07:15:52.310

您在共享主机上吗？如果是，请尝试更改 session.save_path：[php 中的 session_start() 会弄乱我的用户会话长度吗？](https://stackoverflow.com/questions/6471431/could-session-start-in-php-be-messing-up-my-users-sessions-lengths)

# jquery - 奇怪的jQuery插件问题

> ID：10204046
> 
> 赞同：0
> 
> 时间：2012-04-18T06:32:42.880
> 
> 标签：jquery

## 问题

两个容器的 Options.whatever(options.slideDirection) 值保持不变，而不是例如： slideSpeed : 800 -> container1, slideSpeed : 700 -> container2 当 populateContent() 调用 runSlider() 但如果直接调用 runSlider 则保持正确。

## 脚本调用

```
$('#container1').slide({

        service : "services/service1.json",
        slideInterval : 2000,
        slideSpeed : 800,
        slideDirection : 'right'
});

$('#container2').slide({
        service : "services/service2.json",
        slideInterval : 7000,
        slideSpeed : 200,
        slideDirection : 'left'
}); 
```

## 插入

```
$.fn.slide = function(settings) {

    var options = {

        service : '',
        slideInterval : 5000,
        slideSpeed : 800,
        slideDirection : 'right'
    };

    $.extend(options , settings);

    jQuery.populateContent = function(serviceUrl,elm) {
        $.runSlider(elm);
    });

    jQuery.runSlider = function(el) {
        console.log(options.slideDirection);    //***always option value remains the same, shows left always...
    });

    return $(this).each(function() {

        var self = this;            

        $.populateContent(service,self);  -> calls populateContent() ->runSlider()   -> **Not proper option.slideDirection always remain same           
        //$.setSlider(self);          -> directly calls runSlider() -> **It is proper**  option.slideDirection change

    });

}); 
```

# java - 非静态方法...不能从静态上下文中引用

> ID：10204048
> 
> 赞同：0
> 
> 时间：2012-04-18T06:32:52.640
> 
> 标签：java

这是错误消息

`non static method hero(double,double,double) cannot be reference from a static context`

这是类方法。

```
class MyMath {
  double hero(double n1, double n2, double n3)
  {
    double n4;
    double n5;
    n4 = (n1 + n2 + n3) / 2;
    n5 = Math.sqrt((n4 * (n4 - n1) * (n4 - n2) * (n4 - n3)));
    return n5;
  }
} 
```

这是主程序

```
double length_of_a;
double length_of_b;
double length_of_c;
double area_of_triangle;

area_of_triangle = (double) MyMath.hero(length_of_a,length_of_b,length_of_c); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T06:34:56.437

您的 hero 方法应为

```
static double hero(double n1, double n2, double n3){...} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T06:35:19.647

如果您希望`hero`使用类名调用您的方法，请将其设为`static`. 否则只需创建一个`MyMath`对象并调用该函数。

```
MyMath m = new MyMath();
area_of_triangle = m.hero(length_of_a,length_of_b,length_of_c); //No need to typecast too 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T06:36:25.403

你的方法`hero`不是静态的。这意味着您只能在 class 的实例上调用它`MyMath`。您试图在这里调用它，就好像它是一个静态方法：

```
area_of_triangle = (double) MyMath.hero(length_of_a,length_of_b,length_of_c); 
```

要么制作`hero`方法`static`，要么创建一个实例`MyMath`并调用它的方法。

```
// Solution 1: Make hero static
class MyMath {
    static double hero(double n1, double n2, double n3)
        // ...

// Solution 2: Call hero on an instance of MyMath
MyMath m = new MyMath();

area_of_triangle = m.hero(length_of_a,length_of_b,length_of_c); 
```

注意：`double`不需要将该方法的结果转换为，该方法已经返回一个`double`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-18T06:36:46.213

您的`hero()`方法未设置为静态。您可以`hero()`像这样制作静态方法：

```
static double hero(double n1, double n2, double n3)
{
    ... 
```

或者您可以创建一个 MyMath 的新实例，例如：

```
MyMath newMath = new MyMath(); 
```

然后调用：

```
newMyMath.hero(length_of_a,length_of_b,length_of_c); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-18T06:37:54.763

main 方法是静态的，java 不允许在静态方法中引用非静态 obj。因此，您应该将 hero() 方法设为静态或从非静态方法引用它。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-18T06:36:22.300

您会收到该错误，因为您尝试像访问方法`MyMath.hero`一样访问它`static`。为了解决这个问题，您必须将该方法声明`hero`为`static`或首先创建一个类型的对象`MyMath`并从该对象调用该方法。

# node.js - nodejs express 3.0

> ID：10204055
> 
> 赞同：0
> 
> 时间：2012-04-18T06:33:24.820
> 
> 标签：node.js, express, connect

我有一个 nodejs express 2.0 应用程序，我想在其中使用 express 3.0。请告诉我目前 express 3.0 的状态是什么，是否有 express 3.0 应用程序的示例？

我看到 connect 2.0 已经发布了，我可以和 express 2.0 一起使用吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-18T08:39:08.293

完成后，我自己的应用程序也遇到了同样的问题`npm install express`。

TJ 升级了第 3 版并添加/删除了一些功能（好坏我仍在确定：P）

但是您需要确保在默认应用程序上进行更改的两件事是更改：

`app.register..`

到：

`app.engine`

并且要知道 dynamicHelpers 和 helpers 不再存在。你必须使用

`app.locals.use`

**强烈**推荐阅读他的迁移指南：

[https://github.com/visionmedia/express/wiki/Migrating-from-2.x-to-3.x](https://github.com/visionmedia/express/wiki/Migrating-from-2.x-to-3.x)

TJ 更新了他的一些示例（并且在更新其他示例的过程中），我找到了一个很好的帮手来恢复它

[https://github.com/visionmedia/express/](https://github.com/visionmedia/express/)

# c# - 具有多个 where 参数的 linq to sql 查询

> ID：10204056
> 
> 赞同：12
> 
> 时间：2012-04-18T06:33:28.260
> 
> 标签：c#, sql, asp.net-mvc, linq, entity-framework

我目前正在使用实体框架在 ASP.NET MVC 4 中编写搜索功能。但是，我遇到了一个障碍，我只能找到“坏”的解决方案。

我的搜索函数返回一个包含 4 个参数的模型：

```
String Name
String Street
String Code
String Province

List<Query> query = (from t in Model select t).ToList(); 
```

现在我想过滤我的搜索输入。但是，用户可以决定填写尽可能多的搜索字段。他可以决定使用名称和街道，或名称、街道和省，或...

我能够找到的唯一真正的解决方案包括进行查询`IQueryable`并检查字段是否已填充 a `if`，然后使用 a`.Where`更新查询。由于这目前会给出 m 5 个查询，我想知道是否有更好的解决方案我在这里缺少。

谢谢你帮助我。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-04-18T06:37:32.533

如果我理解你是正确的。你可能想要这样的东西：

```
string Name;
string Street;
string Code;
string Province;
var query=(from t in Model select t);
if(Name!=null)
{
    query=query.Where (q =>q.Name==Name);
}
if(Street!=null)
{
    query=query.Where (q =>q.Street==Street);
}
if(Code!=null)
{
    query=query.Where (q =>q.Code==Code);
}
if(Province!=null)
{
    query=query.Where (q =>q.Province==Province);
}
List<Query> ls = query.ToList(); 
```

`IQueryable`当您添加 where 语句以及执行`ToList()`该 sql时，您将有一个。

**更新**

回答 Luis Hernández 的评论。这就是它的工作原理。在这种情况下，当您从模型中选择时，集合类型为`IQueryable`. 这意味着它尚未针对数据库执行。要执行查询，您需要应用一些最终方法。告诉 linq 它实际上会执行数据库调用。这些是例如

```
ToList()
FirstOrDefault()
SingleOrDefault()
Single()
First()
ToDictionary() 
```

因此，当我们附加 Where 子句而不使用`ToList()`. 没有执行查询。

请尝试在[LinqPad中查询](https://www.linqpad.net/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T06:54:44.633

使用您在此处找到的实体过滤器类：[https ://servicelayerhelpers.codeplex.com/SourceControl/changeset/view/32810#537055](https://servicelayerhelpers.codeplex.com/SourceControl/changeset/view/32810#537055)

所以首先指定您的过滤器，然后将其应用于您的查询。

例子：

```
var filter = EntityFilter
.Where(c => c.Name == came)
.Where(c => c.City == city);

var customers = FindCustomers(filter);

Customer[] FindCustomers(IEntityFilter filter)
{
var query = context.Customers;
query = filter.Filter(query);
return query.ToArray();
} 
```

更多信息：[https ://cuttingedge.it/blogs/steven/pivot/entry.php?id=66](https://cuttingedge.it/blogs/steven/pivot/entry.php?id=66)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T06:53:53.300

你可以尝试这样的事情

```
from cars in tblCars
where (cars.colorID == 1) && (cars.Wieght > 500) && (cars.Active == true)
select cars; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T07:13:14.247

**Arion 的解决方案当然很好**，我尝试使用反射减少重复性，希望对您有所帮助。

```
 Type myType = myObject.GetType();
        IList<PropertyInfo> props = new List<PropertyInfo>(myType.GetProperties());

        foreach (PropertyInfo prop in props)
        {
            object propValue = prop.GetValue(myObject, null);
            if (propValue != null)
            {
                query = query.Where(q => prop.GetValue(q, null) == propValue);
            }
        } 
```

**编辑：**

我已经对其进行了编辑以适用于所有属性。当然，您仍然需要一些东西才能使其工作，但是一旦您了解如何使用它，您就可以将它用作所有代码的实用程序，而不是为每种类型硬编码

# imagemagick - 如何更改 imagemagick 的临时路径？

> ID：10204060
> 
> 赞同：6
> 
> 时间：2012-04-18T06:33:41.363
> 
> 标签：imagemagick

我想将 imagemagick 的临时路径从 C: 中的路径更改为 E 上的路径：

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T06:39:04.323

你的意思是临时图像的路径吗？变量`MAGICK_TEMPORARY_PATH`长什么样？

见：[http ://www.imagemagick.org/script/resources.php](http://www.imagemagick.org/script/resources.php)

# objective-c - UIGraphicsGetImageFromCurrentImageContext() 保留导致崩溃

> ID：10204067
> 
> 赞同：0
> 
> 时间：2012-04-18T06:34:11.357
> 
> 标签：objective-c, ios, uiimage, release, retain

这是一个奇怪的，但我想我只是错过了一些简单的东西。

我有一个名为 Theme 的 Objective C 类。主题从文件中加载我的游戏的所有艺术作品并将它们存储在 NSMutableArray 中。

当应用程序启动时，它会创建一个新的 Theme 对象。加载过程的一部分是这样的：

```
UIImage *image = [self mergeImage: bg toImage: overlay];
[imageArray addObject: image]; 
```

我使用以下代码获取背景图像并将叠加层放在其顶部，创建一个新的 UIImage：

```
- (UIImage *)mergeImage:(UIImage *)image1 toImage:(UIImage *)image2 { 
UIGraphicsBeginImageContext(image1.size);  

[image1 drawInRect:CGRectMake(0, 0, image1.size.width, image1.size.height)];  

[image2 drawInRect:CGRectMake(0, 0, image2.size.width, image2.size.height)];  

UIImage *resultingImage = UIGraphicsGetImageFromCurrentImageContext();  
//[resultingImage retain];

UIGraphicsEndImageContext();  

return resultingImage;
} 
```

所有这些都发生在 Theme 的 init 函数中。这就是问题所在，当我从 [[Theme alloc] init] 调用

```
-(BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions 
```

该应用程序在一秒钟后崩溃，让我没有堆栈或任何东西（我认为它会破坏一些内存并在稍后再次使用它或其他东西时崩溃）。

这是奇怪的部分。如果我不将新合并的图像添加到 imageArray，它永远不会崩溃。我没有图像了，但没有崩溃。另外，如果我不将图像添加到数组中，而是将其保留在 mergeImage 函数中，它确实会崩溃，这让我认为保留这个新制作的图像会导致问题。更奇怪的是，如果我直到稍后在应用程序中调用 mergeImage，在 [Theme init] 和 didFinishLaunchingWithOptions 之外，没关系。

知道为什么吗？在应用首次启动时保留此图像有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T06:41:57.973

试试下面的代码：

```
UIGraphicsBeginImageContext(drawImage.bounds.size); 
[drawImage.layer renderInContext:UIGraphicsGetCurrentContext()]; 
UIImage *viewImage = UIGraphicsGetImageFromCurrentImageContext(); 
UIGraphicsEndImageContext();
return viewImage 
```

谢谢..！

# android - ArrayAdapter：getView 参数变量更改为 final

> ID：10204071
> 
> 赞同：1
> 
> 时间：2012-04-18T06:34:50.960
> 
> 标签：android, listview, android-arrayadapter

我正在开发一个 Android 3.1 应用程序，我对 Android 开发非常陌生。

这是一个在 ListView 中使用的自定义数组适配器：

```
public class FormAdapter extends ArrayAdapter<Form>
{
    private Context context;
    private int layoutResourceId;
    private List<Form> forms;
    public ArrayList<String> checkedItems;
    private Button downloadButton;

    public ArrayList<String> getCheckedItems()
    {
        return checkedItems;
    }

    public FormAdapter(Context context, int textViewResourceId,
            List<Form> objects, Button downloadButton)
    {
        super(context, textViewResourceId, objects);

        this.context = context;
        this.layoutResourceId = textViewResourceId;
        this.forms = objects;
        this.checkedItems = new ArrayList<String>();
        this.downloadButton = downloadButton;
    }

    @Override
    public View getView(final int position, View convertView, ViewGroup parent)
    {
        View row = convertView;
        if (row == null)
        {
            LayoutInflater inflater = ((Activity)context).getLayoutInflater();
            row = inflater.inflate(layoutResourceId, parent, false);
        }

        Form f = forms.get(position);
        if (f != null)
        {
            CheckBox checkBox = (CheckBox)row.findViewById(R.id.itemCheckBox);
            if (checkBox != null)
            {
                checkBox.setText(f.Name);
                checkBox.setOnCheckedChangeListener(new OnCheckedChangeListener()
                {
                    public void onCheckedChanged(CompoundButton buttonView,
                            boolean isChecked)
                    {
                        Form f = forms.get(position);
                        if (isChecked)
                        {
                            checkedItems.add(f.FormId);
                        }
                        else
                        {
                            checkedItems.remove(checkedItems.indexOf(f.FormId));
                        }
                        downloadButton.setEnabled(checkedItems.size() > 0);
                    }
                });
            }
        }

        return row;
    }
} 
```

我`public View getView(int position, View convertView, ViewGroup parent)`必须更改为最后的`position`论点。我已经这样做了，因为我需要在`public void onCheckedChanged(CompoundButton buttonView, boolean isChecked)`方法上使用它。

如果我更改`position`为**final**有什么问题吗？有没有其他方法可以使用`position`on `onCheckedChanged`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T06:38:20.867

没问题。将变量或参数设为 final 意味着您不能为它重新分配值，例如：

```
position = ... 
```

由于您没有在 getView 中为其分配任何值，因此可以。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T06:56:12.663

没问题 VansFannel 实际上不需要声明为 final。final 修饰符仅在我们不想在任何地方更改变量值时才需要。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T06:50:27.363

不，没有。通常`position`仅用于定义应如何创建该特定位置的项目。我还没有看到 getView() 中的位置发生变化。所以你可以安全地这样做。

# ruby-on-rails - 如何在rails中创建给定压缩大小的zip文件

> ID：10204073
> 
> 赞同：0
> 
> 时间：2012-04-18T06:34:58.277
> 
> 标签：ruby-on-rails, size, zip

我有一堆记录需要转换为 XML，然后压缩成一个文件，这样我就可以将它发送到期望所述记录的服务器上。我遇到的问题是服务器只能接受小于给定数量的文件.. 让我们说 10 Megs

```
 require 'zip/zip'    
    Zip::ZipOutputStream.open("tmp/myfile_#{Process.pid}.zip") do |zos|
      i_xml.each_with_index do |xml, index|
        zos.put_next_entry("#{index}.xml")
        zos << xml
      end
    end 
```

上面的代码完美地创建了 zip 文件。但我不知道如何获得压缩后的大小。

我可以为 zip header 和其他东西提供一些余地。所以一旦我知道我的输出有多大，我就可以修补。它只是得到这个大小似乎不在这个类的卡片中。

注意：我已经尝试安装 zipRuby，因为它有一个压缩大小的方法，但这只会让我陷入另一个兔子洞......本机扩展等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T06:45:26.657

在 Zip 库中看不到任何执行此操作的内容，抱歉。

考虑一下，如果可以的话：

*   进一步推动 zipRuby 编译
*   使用简单的 File.read 语句将完成的 zip 文件分成固定大小的块，然后将这些块重新放在服务器上。
*   通过限制添加的文件数量来限制 zip 文件的大小，例如添加文件直到超过文件大小限制，然后删除最后添加的文件并将其添加到新的 zip 文件中

# jquery - 如何使用 Jquery Mobile 实现两级侧边栏导航

> ID：10204074
> 
> 赞同：0
> 
> 时间：2012-04-18T06:35:07.400
> 
> 标签：jquery, html, jquery-mobile

我想使用 JQuery Mobile 在侧边栏中实现两级导航。

通过解释我想要实现的目标，考虑我有 3 个类别链接，并且（例如）每个类别中有 3 个链接

类别 1 - 链接 1 - 链接 2 - 链接 3

类别 2 - 链接 1 - 链接 2 - 链接 3

类别 3 - 链接 1 - 链接 2 - 链接 3

并且希望以某种方式避免让用户必须浏览两个链接才能尝试访问任何一个页面。

我已经尝试了一些使用该路线的途径；

1.  使用 data-role="collapsible"，试图为侧边栏中的每个类别创建标题，用户可以展开其中的任何一个以单击二级链接

2.  使用一系列选择下拉菜单（针对每个类别）和 javascript 在选择任何选项时触发页面更改

问题是，虽然这两种方法在“主要内容”页面中使用时都能很好地工作，但只要我将它们放在内容辅助容器中，它们都不起作用（可折叠的内容总是展开，并且 javascript 似乎没有开火）

任何人都可以建议（a）我遇到的上述问题的解决方案，或（b）给这只猫剥皮的替代方法吗？

编辑：你可以看到我之前的帖子试图解决二级块内的可折叠问题； [是否可以使用 JQuery Mobile 在辅助 div 类中包含可折叠的内容？](https://stackoverflow.com/questions/10067501/is-it-possible-to-have-collapsible-content-inside-a-secondary-div-class-with-jqu)

还有一个带有示例代码的 JSFiddle，位于[http://jsfiddle.net/vinomarky/xfcdF/](http://jsfiddle.net/vinomarky/xfcdF/)，尽管 Fiddle 似乎不适用于辅助 div，因此即使您展开窗口，它也不会正确呈现侧边栏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T12:07:58.413

请参阅我在您之前的帖子中的建议。做你似乎想做的事；

1.  包括您用来在 JS fiddle to fiddle 中定义次要内容的样式表
2.  删除显示折叠内容的部分
3.  删除隐藏可折叠标题的部分

通过： [JSFiddle](http://jsfiddle.net/AssidiousBlue/j8TM6/2/) （请伪造 CSS 中的一些更改 - 它来自我自己的项目

# php - 具有多个数据库连接的 Codeigniter 查询分析器

> ID：10204075
> 
> 赞同：4
> 
> 时间：2012-04-18T06:35:10.257
> 
> 标签：php, codeigniter

我正在使用 codeigniter 2.0++ 或特别是 3.0-dev。问题是我有多个数据库连接，而探查器只显示来自默认连接的查询`$this->db`。

```
class table_m extends CI_Model
{

    function __construct()
    {
        parent :: __construct(); 
        $this->db2 = $this->load->database('production', TRUE);
    }

    function sel_pameran($ukmper=NULL)
    {
        $sql = "SELECT * from table1";

        $query = $this->db2->query($sql);
        return $query->result();
    }
} 
```

此查询不会显示在分析器中，因为它使用`$this->db2`. 那么如何让分析器显示每个执行的查询，不管来自哪个数据库？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T16:20:43.757

看到这个问题。这是一个**更简单的解决方案**。 [当我在模型中加载数据库时，如何在 Codeigniter Profiler 中显示我的数据库查询？](https://stackoverflow.com/questions/11423245/how-can-i-display-my-database-queries-in-the-codeigniter-profiler-when-i-load-my)

只需将数据库存储到主 CI 类，分析器就可以访问它们。

```
function __construct()
{

    parent::__construct();

    $CI =& get_instance();
    if( is_null( $CI->Companies_db ) )
        $CI->Companies_db =& $this->load->database( 'companies', TRUE, TRUE );          

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T02:01:28.650

我有一个类似的问题。我正在使用本地 mysql 数据库并访问远程 Oracle 数据库。Oracle 查询未显示在探查器中。

这篇文章帮助我解决了这个问题：

[http://www.gotphp.com/codeigniter-multiple-database-support/5468/](http://www.gotphp.com/codeigniter-multiple-database-support/5468/)

# python - 绑定ldap服务器时如何指定ldap服务器地址？

> ID：10204079
> 
> 赞同：0
> 
> 时间：2012-04-18T06:35:38.043
> 
> 标签：python, networking, firewall, python-ldap

我正在尝试 ldap 身份验证。我的 ldap 服务器位于 xxxx 。我正在使用 python-ldap。在本地连接服务器：

```
ldap.initialize('ldap://localhost:389') 
```

工作正常，但是当我尝试从另一台机器连接到服务器时，执行以下操作：

```
ldap.initialize('ldap://x.x.x.x:389') 
```

它**不起作用**。我应该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-06-27T19:30:46.570

这是通过解除基于防火墙的限制来解决的。

# asp.net-mvc - MVC3 razor 引擎中快速渲染的最佳方法是什么？foreach 循环或按索引号给出？

> ID：10204080
> 
> 赞同：0
> 
> 时间：2012-04-18T06:35:38.913
> 
> 标签：asp.net-mvc, razor, foreach

我正在开发基于 ASP.NET MVC3 和 Razor 引擎的电子商务网站。
我想展示产品。

例如，仅适用于 5 个产品。

```
@if (Model.Count > 0)
{ 

   @foreach (var @item in Model)
   {
        <text>Product Name:</text>@item.Name
   }
} 
```

或者

```
 @if (Model.Count > 0)
    { 
        <text>Product Name:</text>@Model.Name[0]
        <text>Product Name:</text>@Model.Name[1]
        <text>Product Name:</text>@Model.Name[2]
        <text>Product Name:</text>@Model.Name[3]
        <text>Product Name:</text>@Model.Name[4]
     } 
```

那么哪个是快速渲染的最佳方法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-18T06:57:46.010

您正在进行过早的优化，这是您不应该做的事情。第二个片段比第一个片段快得可以忽略不计，但是，天哪，这很难看。我更喜欢可读性最强的代码。我个人会使用显示模板：

```
@model IEnumerable<MyViewModel>
@if (Model.Count > 0)
{
    @Html.DisplayForModel()
} 
```

然后定义一个自定义显示模板，该模板将为模型的每个元素自动呈现 ( `~/Views/Shared/DisplayTemplates/MyViewModel.cshtml`)：

```
@model MyViewModel
<div>
    Product Name: @Html.DisplayFor(x => x.Name)
</div> 
```

# c# - 运行单元测试时如何获取目录

> ID：10204091
> 
> 赞同：94
> 
> 时间：2012-04-18T06:36:25.957
> 
> 标签：c#, unit-testing, directory

嗨，当运行我的单元测试时，我想获取我的项目正在运行的目录以检索文件。

假设我有一个名为 MyProject 的测试项目。我运行的测试：

```
AppDomain.CurrentDomain.SetupInformation.ApplicationBase 
```

我收到了`"C:\\Source\\MyProject.Test\\bin\\Debug"`。

这与我所追求的很接近。我不想要那`bin\\Debug`部分。

有谁知道我怎么能得到`"C:\\Source\\MyProject.Test\\"`？

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2012-04-18T06:51:30.340

我会做不同的事情。

我建议将该文件作为解决方案/项目的一部分。然后右键单击 -> 属性 -> 复制到输出 = 始终复制。

然后该文件将被复制到您的输出目录中（例如 C:\Source\MyProject.Test\bin\Debug）。

编辑：复制到输出 = 如果更新是更好的选择，则复制

* * *

## 回答 #2

> 赞同：48
> 
> 时间：2013-10-15T04:20:51.027

通常您检索解决方案目录（或项目目录，取决于您的解决方案结构），如下所示：

```
string solution_dir = Path.GetDirectoryName( Path.GetDirectoryName(
    TestContext.CurrentContext.TestDirectory ) ); 
```

这将为您提供测试项目创建的“TestResults”文件夹的父目录。

* * *

## 回答 #3

> 赞同：33
> 
> 时间：2012-04-18T06:54:50.383

```
Directory.GetParent(Directory.GetCurrentDirectory()).Parent.FullName; 
```

这将为您提供所需的目录....

作为

```
AppDomain.CurrentDomain.SetupInformation.ApplicationBase 
```

什么都不给

```
Directory.GetCurrentDirectory(). 
```

看看这个链接

> [http://msdn.microsoft.com/en-us/library/system.appdomain.currentdomain.aspx](http://msdn.microsoft.com/en-us/library/system.appdomain.currentdomain.aspx)

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2018-05-07T02:51:59.477

除了@abhilash 的评论。

这适用于我的 EXE、DLL以及在调试或发布模式**下从不同的 UnitTest 项目进行测试时：**

```
var dirName = Path.GetDirectoryName(Assembly.GetExecutingAssembly().Location.Replace("bin\\Debug", string.Empty)); 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2016-01-08T11:49:27.090

```
/// <summary>
/// Testing various directory sources in a Unit Test project
/// </summary>
/// <remarks>
/// I want to mimic the web app's App_Data folder in a Unit Test project:
/// A) Using Copy to Output Directory on each data file
/// D) Without having to set Copy to Output Directory on each data file
/// </remarks>
[TestMethod]
public void UT_PathsExist()
{
    // Gets bin\Release or bin\Debug depending on mode
    string baseA = AppDomain.CurrentDomain.SetupInformation.ApplicationBase;
    Console.WriteLine(string.Format("Dir A:{0}", baseA));
    Assert.IsTrue(System.IO.Directory.Exists(baseA));

    // Gets bin\Release or bin\Debug depending on mode
    string baseB = AppDomain.CurrentDomain.BaseDirectory;
    Console.WriteLine(string.Format("Dir B:{0}", baseB));
    Assert.IsTrue(System.IO.Directory.Exists(baseB));

    // Returns empty string (or exception if you use .ToString()
    string baseC = (string)AppDomain.CurrentDomain.GetData("DataDirectory");
    Console.WriteLine(string.Format("Dir C:{0}", baseC));
    Assert.IsFalse(System.IO.Directory.Exists(baseC));

    // Move up two levels
    string baseD = System.IO.Directory.GetParent(baseA).Parent.FullName;
    Console.WriteLine(string.Format("Dir D:{0}", baseD));
    Assert.IsTrue(System.IO.Directory.Exists(baseD));

    // You need to set the Copy to Output Directory on each data file
    var appPathA = System.IO.Path.Combine(baseA, "App_Data");
    Console.WriteLine(string.Format("Dir A/App_Data:{0}", appPathA));
    // C:/solution/UnitTestProject/bin/Debug/App_Data
    Assert.IsTrue(System.IO.Directory.Exists(appPathA));

    // You can work with data files in the project directory's App_Data folder (or any other test data folder) 
    var appPathD = System.IO.Path.Combine(baseD, "App_Data");
    Console.WriteLine(string.Format("Dir D/App_Data:{0}", appPathD));
    // C:/solution/UnitTestProject/App_Data
    Assert.IsTrue(System.IO.Directory.Exists(appPathD));
} 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2012-04-18T06:45:34.773

我通常这样做，然后我只是添加`"..\..\"`到路径以到达我想要的目录。

所以你可以做的是：

```
var path = AppDomain.CurrentDomain.SetupInformation.ApplicationBase + @"..\..\"; 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2018-02-06T12:20:42.997

对于 NUnit，这就是我所做的：

```
// Get the executing directory of the tests 
string dir = NUnit.Framework.TestContext.CurrentContext.TestDirectory;

// Infer the project directory from there...2 levels up (depending on project type - for asp.net omit the latter Parent for a single level up)
dir = System.IO.Directory.GetParent(dir).Parent.FullName; 
```

如果需要，您可以从那里导航回其他目录（如果需要）：

```
dir = Path.Combine(dir, "MySubDir"); 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2013-07-10T13:29:06.830

我找到的最佳解决方案是将文件作为嵌入式资源放在测试项目中，并从我的单元测试中获取。有了这个解决方案，我不需要关心文件路径。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-04-18T06:44:53.887

我不确定这是否有帮助，但这看起来会在以下问题中简要介绍。

[Visual Studio 解决方案路径环境变量](https://stackoverflow.com/questions/1041078/visual-studio-solution-path-environment-variable)

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2018-02-23T16:00:49.243

通常，您可以使用它，无论是运行测试、控制台应用程序还是 Web 应用程序：

```
// returns the absolute path of assembly, file://C:/.../MyAssembly.dll
var codeBase = Assembly.GetExecutingAssembly().CodeBase;    
// returns the absolute path of assembly, i.e: C:\...\MyAssembly.dll
var location = Assembly.GetExecutingAssembly().Location; 
```

如果您正在运行 NUnit，则：

```
// return the absolute path of directory, i.e. C:\...\
var testDirectory = TestContext.CurrentContext.TestDirectory; 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2018-10-23T12:25:50.200

我的方法依赖于获取单元测试程序集的位置，然后向上遍历。在以下代码段中，变量`folderProjectLevel`将为您提供单元测试项目的路径。

```
string pathAssembly = System.Reflection.Assembly.GetExecutingAssembly().Location;
string folderAssembly = System.IO.Path.GetDirectoryName(pathAssembly);
if (folderAssembly.EndsWith("\\") == false) {
    folderAssembly = folderAssembly + "\\";
}
string folderProjectLevel = System.IO.Path.GetFullPath(folderAssembly + "..\\..\\"); 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2019-12-13T07:43:27.277

根据[https://github.com/nunit/nunit/issues/742#issuecomment-121964506](https://github.com/nunit/nunit/issues/742#issuecomment-121964506)

对于 NUnit3 ， System.Environment.CurrentDirector 永远不会改变，所以它应该是解决方案的路径。

例如：

```
string szProjectPath = System.Environment.CurrentDirectory + @"\where\your\project\is"; 
```

我更喜欢固定位置而不是 GetParent()。GetParent 的一个缺点是当构建从 AnyCPU 更改为 x86 时，默认路径将从 bin\Debug 更改为 bin\x86\Debug。需要另一个父母，这是脖子上的痛苦。

此外，您仍然可以访问您的测试程序集`TestContext.CurrentContext.TestDirectory`并从中获取输出`TestContext.CurrentContext.WorkDirectory`

编辑：注意：NUnit3 有很多变化。我建议阅读有关[“重大更改”的文档](https://github.com/nunit/docs/wiki/Breaking-Changes)

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2018-04-11T11:31:41.573

你可以这样做：

```
using System.IO;

Path.GetFullPath(Path.Combine(AppDomain.CurrentDomain.SetupInformation.ApplicationBase, @"..\..\")); 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2021-01-31T14:26:00.793

使用 StackTrace

```
 internal static class Extensions
    {
        public static string GetSourceDirectoryName(this Type type)
        {
            StackTrace stackTrace = new StackTrace(true);

            foreach (var frame in stackTrace.GetFrames())
            {
                if (frame.GetMethod() is { } method && method.DeclaringType == type)
                {
                    return Path.GetDirectoryName(frame.GetFileName());
                }
            }

            throw new Exception($"未找到{type.Name}源文件目录&quot;);
        }
    } 
```

# ios - 使用 ARC 的 Objective-C 属性

> ID：10204092
> 
> 赞同：0
> 
> 时间：2012-04-18T06:36:29.193
> 
> 标签：ios, automatic-ref-counting

我正要重构我当前的 iOS 项目以使用 ARC。在使用“重构到 ARC”工具 i xCode 预览将我当前代码迁移到 ARC 的更改后，我可以看到我当前的代码约定可能不适合 ARC。因为它为我的 ivars 添加了很多 __weak / __strong 等。

以下是我目前的约定：

我将所有实例变量定义为私有或受保护的 ivars。以及我为其创建@property 的所有公共变量。

```
@interface TestClass
{
 @private
 NSMutableArray* mArray;
 NSString* mString;
 BOOL mMyBoolean;
}

@property (retain, nonatomic) NSString* string; // public
@end 
```

我总是用@property返回所有对象，以避免处理释放/保留，所以如果我有一个作为引用的私有变量，我只需在实现中创建一个类别。结构（如 mMyBoolean）我只是将定义保留为 ivar。

```
@interface TestClass()
@property (retain, nonatomic) NSmutableArray* mArray;
@end

@implementation TestClass
@synthesize string = mString;
@synthesize mArray;

@end; 
```

但是因为新的 ARC 负责保留/释放，所以我不需要 @property 支持私有变量。

那么什么代码约定更合适呢？我一直在考虑像这样在界面中定义属性：

```
@interface TestClass
{
 @private
 NSMutableArray* mArray;
 BOOL myBoolean;
}

@property (strong, nonatomic) NSString* string;
@end

@implementation TestClass
@synthesize string;
@end 
```

并且不要将类别属性用于私有属性。（我也删除了“m”前缀）并且我没有定义 @property 应该使用的支持 ivar，而是让 xcode 使用它的自动生成？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T07:40:49.513

这更像是一个风格问题，所以......很难客观地回答，但我会投入两分钱。据我所知，你所做的事情没有任何问题。如果你的目标是看看你能做些什么来获得更简洁的代码，那么我将分享我的命名约定（虽然一个人的垃圾是另一个人的宝藏，所以如果你不喜欢它那么......好吧，很难哈哈，你不不必从它拿走任何东西）。

1) iVar 以 m 开头，从不公开。

2) 属性合成为以下划线 (_) 开头的变量名，没有显式支持变量，除非我需要继承的类能够在内部修改只读变量，在这种情况下，我需要将其移动到公共接口（并且我仍然用下划线命名它以向我自己表明它是一个属性变量）。属性旨在通过接口公开一些信息，但由于实现可以访问所有内容，所以它没有意义，我从不在私有接口中使用属性，除非以下情况：

3) 延迟加载的属性，或者具有简单分配给变量之外的逻辑。在这种情况下，如果我只覆盖 getter 或 setter（不是两者），我仍然会综合到 (_) 并覆盖所需的方法（不需要显式变量）。如果我同时覆盖两者，我不会合成，那么显然我需要一个显式的支持变量（不要忘记调用 KVO 方法 ^^）。

我想没有“正确”的方法来做这种事情......唯一似乎普遍的指导方针是

1) 以您**和您的团队**容易理解的方式进行

2）始终如一地做

3) 对于 API，请以仅查看头文件即可轻松理解的方式进行操作。

# validation - 富文本字段的验证公式

> ID：10204099
> 
> 赞同：1
> 
> 时间：2012-04-18T06:36:59.800
> 
> 标签：validation, formula, lotus, richtext

如果用户没有设置值，我有这段代码来验证我的富文本。

```
@If(Attachment1= "" ; @Do(@Prompt([Ok]; "Validation Error"; "Cannot leave blank Attachments."); @Return("")); "");

@If(Attachment2= "" ; @Do(@Prompt([Ok]; "Validation Error"; "Cannot leave blank Attachments."); @Return("")); ""); 
```

问题是，即使富文本有值，它也会不断提示它是空白的。

我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T06:53:45.470

您不能以与验证其他字段相同的方式验证富文本字段。

DeveloperWorks 上的这篇文章提供了三种方法来做到这一点： http: [//www.ibm.com/developerworks/lotus/library/rich-text-field-notes/index.html](http://www.ibm.com/developerworks/lotus/library/rich-text-field-notes/index.html)

# c++ - 模板类中函数的部分特化

> ID：10204100
> 
> 赞同：2
> 
> 时间：2012-04-18T06:37:06.853
> 
> 标签：c++, templates, operator-overloading, specialization

我有一个表示数值数组的模板类。

我希望这个类适用于任何类型的数值（例如 int、double 等）和三种类型的容器（std::vector、std::deque 和 std::list）。

以下是针对我的具体问题的相关实现位：

```
template < typename Numeric_t, typename Container = std::vector<Numeric_t> >
class Array {

  // field member
  Container m_data;

  // other stuff here
  // ...

  // random element access for std::vector and std::deque
  Numeric_t & operator[] (unsigned int index) { return m_data[index]; }

  // random element access for std::list
  Numeric_t & operator [] (unsigned int index) {
    std::list<Numeric_t> :: iterator it = m_data.begin();
    std::advance(it, index);
    return *it;
  }

} 
```

当然，编译器不允许我重载**运算符 []**。

我需要的是一种特定于 std::list 的**运算符 []**的部分特化，但在 C++ 中也不允许部分模板函数特化。

（我知道随机元素访问对于列表来说效率不高，但这不是重点）。

理想情况下，在客户端代码中，我想像这样使用 Array 类：

```
Array < int, std::vector<int> > vec;
Array < int, std::list<int> >   lst;

// fill arrays here
// ...

std::cout << vec[0] << std::endl;
std::cout << lst[0] << std::endl; 
```

经过大量研究，我无法找到可行的解决方案。

解决这个问题的最优雅的方法是什么？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T07:04:23.430

一个干净的解决方案是使用全类模板专业化。可以从一个公共基类派生不同的专业化，以便共享公共代码。

编写一个`ArrayBase`包含所有不依赖于特定容器类型的代码的类，并通过使其受保护或创建`Array`一个朋友类来授予对容器的访问权限。

```
template <class Numeric_t, class Container>
class Array
  : public ArrayBase<Numeric_t, Container>
{
  // Container specific code, generic version that works for all containers.
};

template <class Numeric_t>
class Array<Numeric_t, std::vector<Numeric_t>>
  : public ArrayBase<Numeric_t, std::vector<Numeric_t>>
{
  // Optimized code for std::vector.
} 
```

~~另一种方法：您还可以编写一个包含代码的静态成员函数来访问`idx`容器的第 -th 条目并专门化该函数：~~

 ~~```
template <class Numeric_t, class Container>
class Array
{
  template <class Cont>
  static Numeric_t get(Cont const& container, unsigned int idx)
  {
    std::list<Numeric_t>::iterator it = container.begin();
    std::advance(it, idx);
    return *it;
  }

  template <>
  static Numeric_t get(std::vector<Numeric_t> const& container, unsigned int idx)
  {
    return container[idx];
  }

  public:
    Numeric_t operator[](unsigned int idx) const { return get(m_data, idx); }
}; 
```~~  ~~对不起，这不起作用。我忘了你不能专门化静态成员函数......再次。

另一种选择是使用 SFINAE，但它不是惯用的，在这种情况下我不推荐它。~~

# javascript - 在 ASP.NET AJAX 函数中添加自己的 javascript 函数？

> ID：10204102
> 
> 赞同：0
> 
> 时间：2012-04-18T06:37:19.773
> 
> 标签：javascript, asp.net, ajax

在我正在构建的页面上，我有四个按钮可以显示/隐藏（可见 =“真”|| 可见 =“假”）某些 div。我想要的是在调用 AJAX 函数之前，调用我自己的自定义函数，它将当前可见 div 的不透明度动画为零，然后显示加载图像，最后在 AJAX 函数完成后调用另一个自定义函数，它动画“到be" 显示从零不透明度到 1 并从左到右的 div。我想要完成的是网页中的 windows phone 7 类效果。那么，有什么想法可以做到吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T06:41:37.983

如果您使用的是 Asp.net ajax，那么您可以按照以下步骤来实现

使用这些语句注册您的 javascript 方法。

```
 Sys.WebForms.PageRequestManager.getInstance().add_beginRequest(beginRequestHandle);
    Sys.WebForms.PageRequestManager.getInstance().add_endRequest(endRequestHandle); 
```

注册方法的定义

```
 function beginRequestHandle(sender, Args)
    {
        alert("Begin Request Handle called.");
    }

    function endRequestHandle(sender, Args)
    {
      alert("End Request Handle called.");
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T06:48:17.283

您可以通过在代码中编写自定义 ajax 处理程序来做到这一点。例如，在您的 cs 文件中：

```
[WebMethod]
public static bool CustomAjaxMethod(string arg)
{
  // do work
  return true;
} 
```

然后，在您的 aspx 文件中：

```
<input type="button" value="Do Ajax Call" onclick="doWork();" /> 
```

在javascript中：

```
function doWork() {
  // do your 1st animation here
  PageMethods.CustomAjaxMethod('foo', callback);
}

function callback(result, userContext, methodName) {
  if (methodName == 'CustomAjaxMethod') {
    // may want to check result here
    // do your 2nd animation here 
  }
} 
```

# jquery-plugins - 使用 jquery 在 Fancybox 中导航图像

> ID：10204104
> 
> 赞同：0
> 
> 时间：2012-04-18T06:37:35.743
> 
> 标签：jquery-plugins

在我的网站上，当有人点击图片时，它会放大我希望在照片的两侧出现一个导航箭头，以便人们从照片滚动到另一张照片。单击导航箭头时，照片应该会滚动。我用fancybox来展示画廊。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T09:54:33.347

```
jQuery("#fancybox-left").show();
jQuery("#fancybox-right").show(); 
```

如果您在启动fancybox时没有启动它们，这将显示两个侧箭头。

# php - 如何从 PHP 调用自定义 java 方法？

> ID：10204116
> 
> 赞同：2
> 
> 时间：2012-04-18T06:38:26.137
> 
> 标签：php, php-java-bridge

我是 PHP 和 Java 的新手。目前我正在开发一个在 PHP 代码中调用 java 类及其方法的项目。我正在为此创建一个概念证明。问题是我无法连接我在 java 中创建的自定义类。更重要的是，我不知道该怎么做。我使用 java.inc 和 javabridge.jar 文件连接到系统类，但无法连接到简单类。我遵循的步骤是：

创建了一个 java 包，名为 clsForPHP 的类，它有一个 sum() 方法，它接受 2 个参数并返回整数值。（这是使用 MyEclipse IDE 创建的）现在我试图从 PHP 调用这个函数。我已将包含该包的 jar 文件复制到 PHP 项目。（Eclipse- Helios 是 IDE） $d= new java("clsForPHP.class");

请帮忙！！我进行了很多搜索，但无法找到合适的解决方案。我认为应该将这个包添加到 java.inc 文件中，但我不知道该怎么做。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T21:28:25.653

首先在你的 Unix 机器上安装 Tomcat6 和 Java。很可能您的 Tomcat 将在 8080 端口上。[现在从http://php-java-bridge.sourceforge.net/pjb/](http://php-java-bridge.sourceforge.net/pjb/)下载 JavaBridge.war解压缩它。然后从 WEB-INF/lib 文件夹中复制 JavaBridge.jar 、php-servlet.jar 和 php-script.jar 到 Tomcat 的 lib 文件夹中。然后将 JavaBridge.war 复制到您的 Tomcat6 webapps 文件夹中并重新启动您的 tomcat6 服务，该服务将在您的 webapps 中自动部署 JavaBridge 文件夹

现在尝试浏览[http://localhost:8080/JavaBridge/](http://localhost:8080/JavaBridge/)。如果您开始工作而不是安装 PHP/Java Bridge。第一部分结束。

现在在您的 apache 中制作测试页面，如下所示

```
<?php
      require_once("http://localhost:8080/JavaBridge/java/Java.inc");
      echo java("java.lang.System")->getProperties();
?> 
```

并运行它。如果它有效，那么您可以开始工作。如果它不起作用，那么您的 php.ini 文件有问题。尝试在您的 php.ini 中设置 allow_url_once=on。

现在只需将您的 java jar 文件复制到 tomcat /webapps/JavaBridge/WEB-INF/lib/ 文件夹中，然后始终将以下行放在您希望 java 工作的页面中

```
require_once("http://localhost:8080/JavaBridge/java/Java.inc");
$yourObj = Javav("your java class");
$yourObj->yourMethod();
$yourObj->setProperty("xxx"); 
```

希望这可以帮助你。

如果您仍然有任何问题，请返回。

是的，它会抛出错误，因为您必须没有复制您的 java 编译文件，可能是您在 PHP / Java Bridge 中的 jar 文件。

您可以通过以下两种方式进行操作

1.  如果您已经定义了 CATALINA_HOME，则复制 $CATALINA_HOME/webapps/JavaBridge/WEB-INF/lib
2.  如果你还没有定义你的 CATALINA_HOME 然后复制 /var/lib/tomcat6/webapps/webapps/JavaBridge/WEB-INF/lib

我告诉它的路径假设您已经安装了 tomcat6，可能是您的 tomcat webapps 文件夹可能在不同的路径中。

# java - 使用 Java Web 启动的 Eclipse RCP 应用程序无法启动

> ID：10204126
> 
> 赞同：0
> 
> 时间：2012-04-18T06:38:55.543
> 
> 标签：java, eclipse-rcp, jnlp, java-web-start

我正在尝试使用 Java Web Start 运行 Eclipse RCP 应用程序。但是，我在下载并运行应用程序后遇到此错误：

组件中的 JNLP JREDesc 被忽略：null

之后，应用程序关闭。解决方法是什么？

这是我的主要 JNLP 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<jnlp spec="1.0+" codebase="http://localhost:8080/demoui-webstart/" href="start.jnlp"> 
  <information> 
    <title> Demo UI Application </title>  
    <vendor>Me</vendor>
    <homepage href="http://www.me.org" />
    <description>description</description> 
    <offline-allowed/>
  </information>

  <security>
    <all-permissions/>
  </security>

  <resources>
    <j2se version="1.7+"/>
    <jar href="plugins/org.eclipse.equinox.launcher_1.2.0.v20110502.jar"/>
    <extension name="Wrapper feature" href="features/org.test.webstart.demo.wrapperfeature_0.1.0.jnlp"/>

    <property name="osgi.instance.area" value="@user.home/Application Data/demoui-rcp"/>
    <property name="osgi.configuration.area" value="@user.home/Application Data/demoui-rcp"/>

    <property name="eclipse.application" value="org.test.webstart.demo.plugin.application"/>
  </resources>

  <application-desc main-class="org.eclipse.equinox.launcher.WebStartMain">
    <argument>-nosplash</argument>
  </application-desc>
</jnlp> 
```

org.test.webstart.demo.wrapperfeature_0.1.0.jnlp

```
<?xml version="1.0" encoding="utf-8"?>
<jnlp spec="1.0+" codebase="http://localhost:8080/demoui-webstart/">
    <information>
        <title>Wrapperfeature</title>
        <vendor>Me</vendor>
        <offline-allowed/>
    </information>
    <resources>
        <j2se version="1.7+" />
        <jar href="plugins/org.eclipse.equinox.launcher_1.2.0.v20110502.jar"/>
        <extension href="features/org.test.webstart.demo.feature_0.1.0.jnlp" />
    </resources>
    <component-desc/>
</jnlp> 
```

org.test.webstart.demo.feature_0.1.0.jnlp

```
<?xml version="1.0" encoding="UTF-8"?>
<jnlp spec="1.0+" codebase="http://localhost:8080/demoui-webstart/">
    <information>
        <title>Feature</title>
        <vendor>Me</vendor>
        <offline-allowed/>
    </information>
    <security>
        <all-permissions/>
    </security>

    <resources>
        <j2se version="1.7+" />
        <jar href="plugins/org.test.webstart.demo.plugin_0.1.0.jar"/>
        <extension href="features/org.eclipse.rcp_3.7.2.v20120120-1424-9DB5FmnFq5JCf1UA38R-kz0S0272.jnlp" />
    </resources>
    <component-desc/>
</jnlp> 
```

org.eclipse.rcp_3.7.2.v20120120-1424-9DB5FmnFq5JCf1UA38R-kz0S0272

```
<?xml version="1.0" encoding="UTF-8"?>
<jnlp spec="1.0+" codebase="http://localhost:8080/demoui-webstart/">
    <information>
        <title>Eclipse RCP</title>
        <vendor>Eclipse.org</vendor>
        <offline-allowed/>
    </information>
    <security>
        <all-permissions/>
    </security>
    <component-desc/>
    <resources>
        <j2se version="1.7+" />
    </resources>
    <resources>
        <jar href="plugins/com.ibm.icu_4.4.2.v20110823.jar"/>
        <jar href="plugins/org.eclipse.core.commands_3.6.0.I20110111-0800.jar"/>
        <jar href="plugins/org.eclipse.core.databinding_1.4.0.I20110111-0800.jar"/>
        <jar href="plugins/org.eclipse.core.databinding.observable_1.4.0.I20110222-0800.jar"/>
        <jar href="plugins/org.eclipse.core.databinding.property_1.4.0.I20110222-0800.jar"/>
        <jar href="plugins/org.eclipse.core.databinding.beans_1.2.100.I20100824-0800.jar"/>
        <jar href="plugins/org.eclipse.core.jobs_3.5.101.v20120113-1953.jar"/>
        <jar href="plugins/org.eclipse.core.expressions_3.4.300.v20110228.jar"/>
        <jar href="plugins/org.eclipse.core.runtime_3.7.0.v20110110.jar"/>
        <jar href="plugins/org.eclipse.core.runtime.compatibility.auth_3.2.200.v20110110.jar"/>
        <jar href="plugins/org.eclipse.osgi_3.7.2.v20120110-1415.jar"/>
        <jar href="plugins/org.eclipse.osgi.services_3.3.0.v20110513.jar"/>
        <jar href="plugins/org.eclipse.help_3.5.100.v20110426.jar"/>
        <jar href="plugins/org.eclipse.swt_3.7.2.v3740f.jar"/>
        <jar href="plugins/org.eclipse.jface_3.7.0.v20110928-1505.jar"/>
        <jar href="plugins/org.eclipse.jface.databinding_1.5.0.I20100907-0800.jar"/>
        <jar href="plugins/org.eclipse.ui_3.7.0.v20110928-1505.jar"/>
        <jar href="plugins/org.eclipse.ui.workbench_3.7.1.v20120104-1859.jar"/>
    </resources>
    <resources os="Mac">
        <jar href="plugins/org.eclipse.ui.carbon_4.0.100.I20101109-0800.jar"/>
    </resources>
    <resources os="Mac">
        <jar href="plugins/org.eclipse.ui.cocoa_1.1.0.I20101109-0800.jar"/>
    </resources>
    <resources>
        <jar href="plugins/org.eclipse.update.configurator_3.3.100.v20100512.jar"/>
        <jar href="plugins/org.eclipse.equinox.simpleconfigurator_1.0.200.v20110815-1438.jar"/>
    </resources>
    <resources os="Windows" arch="x86">
        <jar href="plugins/org.eclipse.swt.win32.win32.x86_3.7.2.v3740f.jar"/>
    </resources>
    <resources os="Windows" arch="x86_64">
        <jar href="plugins/org.eclipse.swt.win32.win32.x86_64_3.7.2.v3740f.jar"/>
    </resources>
    <resources os="Linux" arch="x86">
        <jar href="plugins/org.eclipse.swt.gtk.linux.x86_3.7.2.v3740f.jar"/>
    </resources>
    <resources os="Linux" arch="s390x">
        <jar href="plugins/org.eclipse.swt.gtk.linux.s390x_3.7.2.v3740f.jar"/>
    </resources>
    <resources os="Linux" arch="s390">
        <jar href="plugins/org.eclipse.swt.gtk.linux.s390_3.7.2.v3740f.jar"/>
    </resources>
    <resources os="Solaris" arch="sparc">
        <jar href="plugins/org.eclipse.swt.gtk.solaris.sparc_3.7.2.v3740f.jar"/>
    </resources>
    <resources os="Solaris" arch="x86">
        <jar href="plugins/org.eclipse.swt.gtk.solaris.x86_3.7.2.v3740f.jar"/>
    </resources>
    <resources os="Linux" arch="ppc64">
        <jar href="plugins/org.eclipse.swt.gtk.linux.ppc64_3.7.2.v3740f.jar"/>
    </resources>
    <resources os="Linux" arch="x86_64">
        <jar href="plugins/org.eclipse.swt.gtk.linux.x86_64_3.7.2.v3740f.jar"/>
    </resources>
    <resources os="Mac" arch="ppc">
        <jar href="plugins/org.eclipse.swt.carbon.macosx_3.7.2.v3740f.jar"/>
    </resources>
    <resources os="Mac" arch="x86">
        <jar href="plugins/org.eclipse.swt.carbon.macosx_3.7.2.v3740f.jar"/>
    </resources>
    <resources os="Mac" arch="ppc">
        <jar href="plugins/org.eclipse.swt.cocoa.macosx_3.7.2.v3740f.jar"/>
    </resources>
    <resources os="Mac" arch="x86">
        <jar href="plugins/org.eclipse.swt.cocoa.macosx_3.7.2.v3740f.jar"/>
    </resources>
    <resources os="Mac" arch="x86_64">
        <jar href="plugins/org.eclipse.swt.cocoa.macosx.x86_64_3.7.2.v3740f.jar"/>
    </resources>
    <resources os="AIX" arch="ppc">
        <jar href="plugins/org.eclipse.swt.gtk.aix.ppc_3.7.2.v3740f.jar"/>
    </resources>
    <resources os="AIX" arch="ppc64">
        <jar href="plugins/org.eclipse.swt.gtk.aix.ppc64_3.7.2.v3740f.jar"/>
    </resources>
    <resources os="HP-UX" arch="ia64_32">
        <jar href="plugins/org.eclipse.swt.gtk.hpux.ia64_32_3.7.2.v3740f.jar"/>
    </resources>
    <resources>
        <jar href="plugins/org.eclipse.rcp_3.7.2.v201202080800.jar"/>
        <jar href="plugins/org.eclipse.core.contenttype_3.4.100.v20110423-0524.jar"/>
        <jar href="plugins/org.eclipse.equinox.app_1.3.100.v20110321.jar"/>
        <jar href="plugins/org.eclipse.equinox.common_3.6.0.v20110523.jar"/>
        <jar href="plugins/org.eclipse.equinox.ds_1.3.1.R37x_v20110701.jar"/>
        <jar href="plugins/org.eclipse.equinox.util_1.0.300.v20110502.jar"/>
        <jar href="plugins/org.eclipse.equinox.preferences_3.4.2.v20120111-2020.jar"/>
        <jar href="plugins/org.eclipse.equinox.registry_3.5.101.R37x_v20110810-1611.jar"/>
        <jar href="plugins/org.eclipse.equinox.launcher_1.2.0.v20110502.jar"/>
    </resources>
    <resources os="Solaris" arch="sparc">
        <jar href="plugins/org.eclipse.equinox.launcher.gtk.solaris.sparc_1.1.100.v20110505.jar"/>
    </resources>
    <resources os="Solaris" arch="x86">
        <jar href="plugins/org.eclipse.equinox.launcher.gtk.solaris.x86_1.1.100.v20110505.jar"/>
    </resources>
    <resources os="Mac" arch="ppc">
        <jar href="plugins/org.eclipse.equinox.launcher.carbon.macosx_1.1.100.v20110502.jar"/>
    </resources>
    <resources os="Mac" arch="x86">
        <jar href="plugins/org.eclipse.equinox.launcher.carbon.macosx_1.1.100.v20110502.jar"/>
    </resources>
    <resources os="Mac" arch="ppc">
        <jar href="plugins/org.eclipse.equinox.launcher.cocoa.macosx_1.1.101.v20120109-1504.jar"/>
    </resources>
    <resources os="Mac" arch="x86">
        <jar href="plugins/org.eclipse.equinox.launcher.cocoa.macosx_1.1.101.v20120109-1504.jar"/>
    </resources>
    <resources os="Mac" arch="x86_64">
        <jar href="plugins/org.eclipse.equinox.launcher.cocoa.macosx.x86_64_1.1.101.v20120109-1504.jar"/>
    </resources>
    <resources os="Linux" arch="ppc64">
        <jar href="plugins/org.eclipse.equinox.launcher.gtk.linux.ppc64_1.0.100.v20110505.jar"/>
    </resources>
    <resources os="Linux" arch="x86">
        <jar href="plugins/org.eclipse.equinox.launcher.gtk.linux.x86_1.1.100.v20110505.jar"/>
    </resources>
    <resources os="Linux" arch="s390x">
        <jar href="plugins/org.eclipse.equinox.launcher.gtk.linux.s390x_1.1.100.v20110505.jar"/>
    </resources>
    <resources os="Linux" arch="s390">
        <jar href="plugins/org.eclipse.equinox.launcher.gtk.linux.s390_1.1.100.v20110505.jar"/>
    </resources>
    <resources os="Linux" arch="x86_64">
        <jar href="plugins/org.eclipse.equinox.launcher.gtk.linux.x86_64_1.1.100.v20110505.jar"/>
    </resources>
    <resources os="AIX" arch="ppc">
        <jar href="plugins/org.eclipse.equinox.launcher.gtk.aix.ppc_1.1.0.v20110530.jar"/>
    </resources>
    <resources os="AIX" arch="ppc64">
        <jar href="plugins/org.eclipse.equinox.launcher.gtk.aix.ppc64_1.1.0.v20110530.jar"/>
    </resources>
    <resources os="Windows" arch="x86">
        <jar href="plugins/org.eclipse.equinox.launcher.win32.win32.x86_1.1.100.v20110502.jar"/>
    </resources>
    <resources os="Windows" arch="x86_64">
        <jar href="plugins/org.eclipse.equinox.launcher.win32.win32.x86_64_1.1.100.v20110502.jar"/>
    </resources>
</jnlp> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T02:38:13.780

1.7 还没有准备好生产。可能是您在实现中发现了一个错误。

* * *

> 组件中的 JNLP JREDesc 被忽略：null

这是因为声明：

```
 <j2se version="1.7+" /> 
```

在每个扩展中。加载扩展时，JRE 已被选择并正在运行，它取决于*主启动文件*中指定的版本，以确保应用程序的正确版本。（和所有扩展名）。

实际上，我发现令人沮丧的是，这将是一种向扩展用户指示所需最低版本的简单方法。OTOH，您可以改为发表评论。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T15:57:44.503

关于这个问题的几个问题（我有同样的问题）：

*   “组件中的 JNLP JREDesc 被忽略：null”只是一个信息，不是问题。它在多个 jnlp 文件声明一个 j2se 版本时显示。第一个被拿走了。

*   如果 webstart 正在关闭，这可能是由于另一个错误。尝试通过以下方式找出错误：打开文件**$HOME/.java/deployment/deployment.properties**并设置**deployment.javaws.logToFile=true**和**deployment.javaws.logFileName=LOG_FILE**。重新启动您的 webstart 应用程序，然后阅读您的日志文件**LOG_FILE**以查看控制台无法显示的实际问题（因为它关闭得很快）。

*   然后，即使 webstart 机制工作正常，您的 Eclipse RCP 应用程序也可能无法正常工作。在这种情况下，您的 LOG_FILE 显示没有问题，但请注意在您的 jnlp 文件中使用“ **osgi.instance.area ”指定的目录。**在那里查找**.metadata/.log**文件或任何其他日志文件。然后，您应该尝试解决 eclipse rcp 问题，如果这些日志文件中有任何显示。

*   顺便说一句，在可能的情况下，我尝试了一个 Eclipse RCP 4 应用程序。要使用 Webstart 运行 RCP 4 应用程序，您必须将以下属性添加到您的主 jnlp 文件（在资源标签下），以确保以一致的方式加载一些重要的插件：

    ```
    <property name="osgi.bundles"
         value="org.eclipse.core.runtime@4:start,
                org.eclipse.equinox.common@3:start,
                org.eclipse.equinox.ds@2:start,org.
                eclipse.equinox.simpleconfigurator@1:start"> 
    ```

# c - TCP 连接错误 115 Operation in Progress 原因是什么？

> ID：10204134
> 
> 赞同：15
> 
> 时间：2012-04-18T06:39:14.123
> 
> 标签：c, networking, tcp, network-programming, errno

我的应用程序创建了一个 TCP 连接，这工作正常。但是在一个网络服务器中有很多IP说

*   174.XXX
*   54.xxx 像这样

当调用 TCP 连接（非阻塞，超时 60 秒）到 IP`174.X.X.X` 总是成功。但是使用 ip 连接到同一台服务器的 TCP 连接`54.x.x.x` 失败（大多数情况下），errno 115 measn 操作正在进行中。

你能解释一下errno 115的可能原因是什么

操作系统：Linux

我的 TCP 连接代码如下

```
tcp_connect(......)
{

  int iValOpt = 0;  
  int iLength= 0;

  fcnt((int)(long)SockID,F_SETFL_O_NONBLOCK);

  ret = connect (sockID,(struct sockaddr*)pstSockAdr,uiSockLen);

  if (ret < 0)
  {

        if (errno == EINPROGRESS)
        {
                stTv.tv_sec = 60;
                stTv.tv_usec = 0;
                FD_ZERO(&write_fd);
                FD_SET(sockID,&write_fd);

                iLength = sizeof(int);

                if (0 < select (sockID+1) , NULL,&write_fd,NULL,&stTv);

                {
                        if(0 > getsockopt(sockID,SOL_SOCKET,SO_ERROR,(void*)(&iValOpt),&iLength))
                        {
                                return -1
                        }

                        if (0 != iValOpt)
                        {
                                return -1;
                        }

                        return success;
                }

                else
                {
                        return -1;
                }   

        }
        else
        {
                return -1;
        }
    }

   return success;

} 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-04-18T07:23:54.193

根据您的信息：

*   你正试图做`connect()`一个`54.x.x.x`
*   插座是`non-blocking`
*   连接超时是`60 sec`

首先，如果你查看你的`/usr/include/asm-generic/errno.h`，你会看到以下内容：

```
#define EINPROGRESS     115     /* Operation now in progress */ 
```

这意味着套接字上的现有操作正在进行中。既然，你说你正在`connect()`打电话，让我们做一个[`man connect`](http://linux.die.net/man/2/connect)：

```
进展

套接字是非阻塞的，无法完成连接
立即地。可以通过 select(2) 或 poll(2) 完成
选择要写入的套接字。select(2) 后表示
可写性，使用 getsockopt(2) 读取级别的 SO_ERROR 选项
SOL_SOCKET 判断 connect() 是否成功完成
（SO_ERROR 为零）或不成功（SO_ERROR 是常见的一种
此处列出的错误代码，解释了失败的原因）。

```

因此，最好的猜测是 TCP 3 次握手（您`connect()`对`54.x.x.x`IP 地址的调用）花费的时间比预期的要长。由于该`connect()`操作已经在进行中，因此对套接字的任何后续操作都会导致`EINPROGRESS`错误代码。按照手册页中的建议，尝试使用`select()`或`poll()`检查您的套接字是否准备好使用（执行`read()`或`write()`调用）。

您可以通过捕获和分析进出您自己机器的流量和`54.x.x.x`. 帮助您解决此问题的最佳工具称为[WireShark](http://www.wireshark.org)。祝你好运。

![TCP 3 次握手](../Images/df80aa299f6069d8ff4b799017508947.png)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-04-18T06:48:17.453

这似乎是[connect()](http://linux.die.net/man/3/connect)的行为：

> 如果无法立即建立连接并且为套接字的文件描述符设置了 O_NONBLOCK，则 connect() 将失败并将 errno 设置为 [EINPROGRESS]，但连接请求不应中止，并且应异步建立连接。在建立连接之前，对同一套接字的后续调用 connect() 将失败并将 errno 设置为 [EALREADY]。

# php - PHP 登录会话 - 使用标题的“登录”页面（

> ID：10204135
> 
> 赞同：0
> 
> 时间：2012-04-18T06:39:16.010
> 
> 标签：php, mysql, security, session, login

我有一个关于 Sessions 和验证登录用户的问题。

我的问题是关于将用户发送到“登录”页面，即。个人资料页

```
if ($num_rows > 0) {
session_start();
$_SESSION['login'] = "1";
header ("Location: profile.php");
} 
```

这是否意味着只有登录用户才能查看的任何页面都必须具有 php 扩展名。

例如，如果是 profile.html，那么任何知道该文件在哪里的人都可以查看它吗？

那么每个个人资料页面都会有一个 .php 扩展名吗？在这个 php 文件中，是表单的 html 代码之类的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T06:43:55.960

您可以向每个 PHP 页面添加一个短代码，以验证用户是否已登录，如果未登录，则将用户重定向到登录页面（您还可以保存引用以将他带回他想要访问的页面）。

所以简短的回答是肯定的，您需要在每个页面中都使用代码来验证用户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T06:44:34.777

如果你想用 php 编写你的登录系统，每个页面都需要有 php 扩展名，因为如果用户登录，你需要检查每个页面。

如果您不想使用 php，您也可以使用 .htaccess 文件作为登录系统

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T06:54:19.697

为了确保维护单入口点，可以使用 htaccess 来确保不能访问其他文件，并且我们将 index.php 文件隐藏在 url 中。

```
The .htaccess file itself looks like this-

RewriteEngine on

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

RewriteRule ^(.*)$ index.php?rt=$1 [L,QSA]

The .htaccess file will permit access to the site via urls such as
http://www.example.com/news/show

If you do not have mod_rewrite available, the entry to the site will be the same,    except that the URL will contain the values needed such as:
http://www.example.com/index.php?rt=news/show 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-28T17:52:00.967

## 那么每个个人资料页面都应该有一个 .php 扩展名吗？

我会说是的。如果您在每个配置文件页面中使用 php 脚本检查会话全局变量，那么您需要具有 .php 扩展名，因为它是要在您的服务器中运行的脚本。

如果您的个人资料页面没有登录保护，或者您没有使用 php 脚本检查会话全局变量，那么 .html 扩展名适用于个人资料页面。

来源： [使用 Sessions 的登录密码保护页面 | PHP](http://codispatch.blogspot.in/2015/07/php-login-password-protected-page-sessions.html "使用会话登录受密码保护的页面 |  PHP")

# zend-framework - 无法访问在管理模块中制作的表格

> ID：10204138
> 
> 赞同：1
> 
> 时间：2012-04-18T06:39:24.403
> 
> 标签：zend-framework, zend-form

我已经制作了模块管理员。在这个模块中，我在控制器中调用了表单

```
class Admin_AdminController extends Zend_Controller_Action
{

public function indexAction()
{
    //$form = new Application_Form_Login();
    $form = new Admin_Form_Admin();
    $this->view->form = $form;     
}

} 
```

但是在控制器中，它给出错误-> 在 application\modules\Admin\controllers\AdminController.php 中找不到 Class 'Admin_Form_Admin'

我的表单在 application\modules\Admin\forms\Admin.php.Below 是我的表单代码

```
class Admin_Form_Admin extends Zend_Form
{

public function init()
{

    this->setMethod('post');

    /* Form Elements & Other Definitions Here ... */

    $user = $this ->CreateElement('text','username');

    $password = $this->createElement('text','password');

    $login = $this->createElement('submit','button');

    $this->addElements(array($user,
                              $password,
                              $login
                        ));
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T06:49:18.393

这里需要三件事...

1.  您需要引导[模块资源](http://framework.zend.com/manual/en/zend.application.available-resources.html#zend.application.available-resources.modules)

    ```
    ; application.ini
    resources.modules[] = 
    ```

2.  您需要在前端控制器中设置模块目录

    ```
    ; application.ini
    resources.frontController.moduleDirectory = APPLICATION_PATH "/modules" 
    ```

3.  您的管理模块中需要一个引导类

    ```
    <?php
    // application/modules/Admin/Bootstrap.php
    class Admin_Bootstrap extends Zend_Application_Module_Bootstrap {} 
    ```

有了这三件事，您的代码应该可以按原样工作。

# powershell - 如何确保使用 powershell 启用或禁用 wi-fi？

> ID：10204140
> 
> 赞同：1
> 
> 时间：2012-04-18T06:39:33.667
> 
> 标签：powershell, wifi, powershell-2.0

我们正在使用防火墙阻止端口的专用网络。

我们将提出为我们的机器 IP 地址打开端口的请求。

如果启用了 wi-fi，系统将有 2 个 IP 地址，如果我们的连接通过该 IP 地址路由，我们将无法访问专用网络内的机器。

我想知道powershell中是否有任何方法来确保状态（是否启用/禁用了wi-fi）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T06:57:47.037

这一行列出了所有与无线或 wifi 匹配且已启用的网络适配器。

```
get-wmiobject -class win32_networkadapter -namespace root\CIMV2 | where-object {$_.Name -match "Wifi" -or $_.Name -match "wireless" -and $_.name -notmatch "Microsoft Virtual WiFi Miniport Adapter" -and $_.netenabled -eq $true}   | select description, netenabled 
```

这用于禁用：

```
get-wmiobject -class win32_networkadapter -namespace root\CIMV2 | where-object {$_.Name -match "Wifi" -or $_.Name -match "wireless" -and $_.name -notmatch "Microsoft Virtual WiFi Miniport Adapter" -and $_.netenabled -eq $true } | % { $_.disable() } 
```

这用于启用：

```
get-wmiobject -class win32_networkadapter -namespace root\CIMV2 | where-object {$_.Name -match "Wifi" -or $_.Name -match "wireless" -and $_.name -notmatch "Microsoft Virtual WiFi Miniport Adapter" -and $_.netenabled -eq $false } | % { $_.enable() } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T07:12:41.970

如果您启动命令提示符，您可以通过以下方式获取有关 WLAN 的信息：

```
netsh wlan show networks 
```

将输出重定向到`FIND`命令中，您应该一切顺利

```
netsh wlan show networks | FIND "turned off" /I /C 
```

警告：我的窗口没有 en-* 本地化，所以我不确定“关闭”的事情，你可能想在没有`FIND`部件的情况下启动命令，以便查看它返回的消息并相应地调整（如果你启动`netsh`你自己会看到的命令）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-07T13:32:16.570

或者，如果您需要知道 wifi 是否从多台远程计算机连接，您可以将它们列在一个文件中（在本例中是computers.txt）并运行以下脚本

```
$computers = Get-Content %PATH%\Computers.txt
$credentials = Get-Credential -Credential domain\username
     ForEach ($computer in $computers)
{
Write-Host "Computer Name: $computer"
Invoke-Command -ComputerName $computer -Credential $credentials -ScriptBlock {netsh wlan show interfaces} | select-string "State"
} 
```

# python - 去除空格并连接存储在字典中单个键中的多个值

> ID：10204142
> 
> 赞同：0
> 
> 时间：2012-04-18T06:40:06.517
> 
> 标签：python, dictionary, whitespace

我一直在自学python，到目前为止还不算太糟糕。我认为最简单的学习方法就是开始编码，所以我想出了一些相对简单的任务来帮助我。现在我被困住了，无法弄清楚我做错了什么越来越令人沮丧

```
{0: [[1, '.', 0, '-', 8]], 
1: [['.', 3, '.', 2, 0, 0, 1, '-']], 
2: [], 
3: [['.', '.']], 
4: [], 
5: [[2, 0, 1, 2, '-', 0, 1, '-', 1, 9]], 
6: [[1, '.', 0, 0, 9, 5]], etc... 
```

所以我有一本字典，其中每个键都有一个值（即各种货币对的汇率）。我一直在尝试将值转换为单个字符串，例如：

```
0: [[1, '.', 0, '-', 8]] would become 0: '1.0-8'
6: [[1, '.', 0, 0, 9, 5]] would be 6 : '1.0095'
etc... 
```

经过数小时尝试各种方法和谷歌搜索后，我得出的结论是，我对如何实现这一点一无所知。我试过做一个替换，以及各种复杂的循环，将字典变成一个列表，其中键 [值] 作为一个列表，然后尝试使用连接函数等对其进行迭代......这一切都完成了绝对没有！

看起来应该很简单，但我放弃了，我不知道该怎么做，所以希望这里有人能帮我一把。

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T06:46:17.660

单线...

```
>>> {i:(''.join(str(x) for x in j[0]) if j else '') for i,j in d.items()}
{0: '1.0-8', 1: '.3.2001-', 2: '', 3: '..', 4: '', 5: '2012-01-19', 6: '1.0095'} 
```

“以菜鸟友好的方式编写它”，如被问到：

```
d_new = {}
for i,j in d.items():
    if j:
        d_new[i] = ''.join(str(x) for x in j[0])
    else:
        d_new[i] = '' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T06:56:25.003

```
d = {0: [[1, '.', 0, '-', 8]], 6: [[1, '.', 0, 0, 9, 5]]}
for k,v in d.iteritems():
    print str(k)+':'+''.join(str(el) for el in v[0]) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T07:21:01.327

```
>>> from itertools import chain
>>> d = {0: [[1, '.', 0, '-', 8]], 1: [['.', 3, '.', 2, 0, 0, 1, '-']], 2: [], 
3: [['.', '.']], 4: [], 5: [[2, 0, 1, 2, '-', 0, 1, '-', 1, 9]], 6: [[1, '.', 0, 0, 9, 5]]}
>>> {k:''.join(str(el) for el in chain.from_iterable(v)) for k,v in d.items()}
{0: '1.0-8', 1: '.3.2001-', 2: '', 3: '..', 4: '', 5: '2012-01-19', 6: '1.0095'} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T07:25:51.060

另一种方法。这里链负责展开列表和处理空列表。

```
>>> {k:"".join(map(str,chain(*v))) for k,v in spam.items()}
{0: '1.0-8', 1: '.3.2001-', 2: '', 3: '..', 4: '', 5: '2012-01-19', 6: '1.0095'} 
```

很少有直观的方法

`[[1, '.', 0, '-', 8]]`要像使用[itertools.chain](http://docs.python.org/library/itertools.html#itertools.chain)一样解开列表，请使用

```
>>> list(chain(*[[1, '.', 0, '-', 8]]))
[1, '.', 0, '-', 8] 
```

`int`要`str`使用[map](http://docs.python.org/library/functions.html#map)转换列表，请使用（请注意，它也可以与 iterables 一起使用）

```
>>> map(str,[1, '.', 0, '-', 8])
['1', '.', '0', '-', '8'] 
```

要[加入](http://docs.python.org/library/stdtypes.html#str.join)字符串列表，请使用。（请注意，它也可以与可迭代对象一起使用）

```
"".join(['1', '.', '0', '-', '8']) 
```

[字典理解](http://www.python.org/dev/peps/pep-0274/)

# windows-phone-7 - 如何在 windows phone 'mango' 中以编程方式访问硬件密钥

> ID：10204143
> 
> 赞同：1
> 
> 时间：2012-04-18T06:40:08.973
> 
> 标签：windows-phone-7, hardware

我正在搜索我们如何以编程方式访问硬件按钮，即开始、搜索、返回、音量键、windows phone (mango) 中的屏幕锁定。目前我发现除了“返回键”之外没有其他可以在 WP 中以编程方式控制的键。

谢谢高拉夫

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T06:52:08.440

除了“后退”之外，您可以控制的唯一其他键是相机键，您可以通过[PhotoCamera](http://msdn.microsoft.com/en-us/library/microsoft.devices.photocamera%28v=VS.92%29.aspx) API 进行操作。

s

# c++ - 将 WCHAR[260] 转换为 std::string

> ID：10204145
> 
> 赞同：4
> 
> 时间：2012-04-18T06:40:20.720
> 
> 标签：c++, windows, string, wchar

我从 Windows 上的 (PROCESSENTRY32) pe32.szExeFile 获得了 WCHAR[MAX_PATH]。以下不起作用：

```
std::string s;
s = pe32.szExeFile; // compile error. cast (const char*) doesnt work either 
```

和

```
std::string s;
char DefChar = ' ';
WideCharToMultiByte(CP_ACP,0,pe32.szExeFile,-1, ch,260,&DefChar, NULL);
s = pe32.szExeFile; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T06:44:03.310

对于您的第一个示例，您可以这样做：

```
std::wstring s(pe32.szExeFile); 
```

第二：

```
char DefChar = ' ';
WideCharToMultiByte(CP_ACP,0,pe32.szExeFile,-1, ch,260,&DefChar, NULL);
std::wstring s(pe32.szExeFile); 
```

`std::wstring`和`char*`演员一样

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T07:38:42.970

如果缓冲区足够大，您的调用`WideCharToMultiByte`看起来是正确的。`ch`但是，在此之后，您希望将缓冲区 ( `ch`) 分配给字符串（或使用它来构造字符串），而不是 `pe32.szExeFile`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-18T08:52:50.580

[ATL](http://msdn.microsoft.com/en-us/library/87zae4a3%28v=vs.100%29.aspx)有方便的转换类；您可能想要使用其中的一些，例如：

```
std::string s( CW2A(pe32.szExeFile) ); 
```

但是请注意，从 Unicode UTF-16 到 ANSI 的转换可能是*有损*的。如果您不想进行无损转换，则可以**从 UTF-16 转换为 UTF-8**，并将 UTF-8 存储在`std::string`.

如果您不想使用 ATL，可以使用一些方便的免费 C++ 包装器围绕原始 Win32`WideCharToMultiByte`使用[STL 字符串从 UTF-16 转换为 UTF-8](https://msmvps.com/blogs/gdicanio/archive/2011/02/04/conversion-between-unicode-utf-8-and-utf-16-with-stl-strings.aspx)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-12-26T10:50:31.457

```
#ifndef __STRINGCAST_H__
#define __STRINGCAST_H__

#include <vector>
#include <string>
#include <cstring>
#include <cwchar>
#include <cassert>

template<typename Td>
Td string_cast(const wchar_t* pSource, unsigned int codePage = CP_ACP);

#endif // __STRINGCAST_H__

template<>
std::string string_cast( const wchar_t* pSource, unsigned int codePage )
{
    assert(pSource != 0);
    size_t sourceLength = std::wcslen(pSource);
    if(sourceLength > 0)
    {
        int length = ::WideCharToMultiByte(codePage, 0, pSource, sourceLength, NULL, 0, NULL, NULL);
        if(length == 0)
            return std::string();

        std::vector<char> buffer( length );
        ::WideCharToMultiByte(codePage, 0, pSource, sourceLength, &buffer[0], length, NULL, NULL);

        return std::string(buffer.begin(), buffer.end());
    }
    else
        return std::string();

} 
```

并使用此模板如下

```
PWSTR CurWorkDir;
std::string CurWorkLogFile;

CurWorkDir = new WCHAR[length];

CurWorkLogFile = string_cast<std::string>(CurWorkDir);

....

delete [] CurWorkDir; 
```

# hadoop - Hadoop分布式缓存抛出IOException

> ID：10204147
> 
> 赞同：0
> 
> 时间：2012-04-18T06:40:57.040
> 
> 标签：hadoop

使用 hadoop 0.20.2 并尝试通过分布式缓存读取序列化地图

面临编译错误 localFiles = DistributedCache.getLocalCacheFiles(job); ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ 未处理的异常类型 IOException

DRIVER 类片段（/scratch/word_id.ser 是存储在本地系统中的序列化文件）

```
 Job job = new Job(conf, "xml-read");
    DistributedCache.addCacheFile(new URI("/scratch/word_id.ser"),job); 
```

MAPPER 类片段

```
 public class MyParserMapper1 {

    public static class Map extends MapReduceBase implements Mapper<LongWritable, Text, IntWritable, Text> {

    private FileSystem fs;
    private Path[] localFiles;
    HashMap  hash_temp;
    private ObjectInputStream oisc;

    @Override
    public void configure(JobConf job)   {

     localFiles = DistributedCache.getLocalCacheFiles(job);

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T10:17:52.123

您的 IDE 可能对此类事情有一些自动修复规则，但无论如何，您需要将语句包装在 try / catch 块中：

```
@Override
public void configure(JobConf job)   {
  try {
    localFiles = DistributedCache.getLocalCacheFiles(job);
  } catch (IOException ioe) {
    throw new RuntimException(ioe);
  }
} 
```

如果您可以更好地处理异常（即，如果您仍然可以在没有此文件的情况下运行映射器），否则只需包装一个未经检查的异常，如 RuntimeException

# wordpress - 帖子网址重定向的WordPress？

> ID：10204151
> 
> 赞同：0
> 
> 时间：2012-04-18T06:41:24.150
> 
> 标签：wordpress, .htaccess, permalinks

我已将其设置`Permalinks`为 custom `/%postname%/`。例如：一个帖子 id 是 2，它的 url 是

```
 `mysite.com/test.` 
```

我想当用户访问 `mysite.com/?p=2`它时重定向到`mysite.com/test`

我该怎么办？或者有没有插件可以得到，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T07:42:58.333

您不需要任何插件，因为它是默认行为，除非您使用的是非常旧版本的 worpdress。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T07:17:44.913

一点谷歌搜索：

```
http://yoast.com/wordpress/permalink-redirect/ 
```

从页面引用：

> 这样，像这样的 URL：
> 
> ```
> http://www.example.com/page1/?q=ek 
> ```
> 
> 将自动重定向到：
> 
> ```
> http://www.example.com/page1/ 
> ```

# rvm - Capistrano + RVM rvm_install_ruby 与 Rubinius

> ID：10204153
> 
> 赞同：0
> 
> 时间：2012-04-18T06:41:31.140
> 
> 标签：rvm, rubinius, rvm-capistrano

我正在尝试完全自动化我的部署主机的设置，从而避免手动安装 Ruby。

我正在使用`capistrano-rvm`它承诺完成这项工作，但是当 RVM 编译 Rubinius 时我遇到了问题：

```
 ** [out] rbx-2.0.0pre - #configuring
 ** [out] rbx-2.0.0pre - #compiling
*** [err] Error running '/home/app/.rvm/wrappers/ruby-1.8.7-p358/rake install', please read /home/app/.rvm/log/rbx-2.0.0pre/rake.log 
```

的内容`/home/app/.rvm/log/rbx-2.0.0pre/rake.log`是：

```
ERROR: Gem rake is not installed, run `gem install rake` first. 
```

我怎么能？这应该由 RVM 完成，不是吗？

有没有人已经遇到并摆脱了这个问题？

**编辑**

我忘了提到 RVM 之前确实加载和编译`1.8.7`过`rbx`，这似乎是对构建的依赖。也许 RVM 正在一个初始化错误的 gem 集中运行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T10:51:36.990

我以为 2.0.0pre 已经从 rbx 中删除了，看起来您安装了较旧的 RVM，请确保更新 RVM：

```
curl -L get.rvm.io | bash -s stable --auto
rvm reload 
```

这将运行安装程序，该安装程序也会进行更新。

为了确保一切正常使用`rbx-2.0.testing`应该工作的rbx版本。

# c# - c# 中的后期评估？

> ID：10204154
> 
> 赞同：4
> 
> 时间：2012-04-18T06:41:35.673
> 
> 标签：c#, programming-languages, lazy-evaluation

我正在使用 c# 开发一个应用程序。为了使这个应用程序工作，我发现自己做了一些对我选择的语言来说非常不自然的事情。在经历了许多重构和改进之后，我意识到我正在尝试实现的功能实际上是一种“惰性评估”（我认为）。这就是我想要的...

```
// Criteria 1: Lazy evaluation of expressions
int x = LazyEvaluated.New<int>();
int y = LazyEvaluated.New<int>();
int z = LazyEvaluated.New<int>();

z.Assign(x + y);
Assert.ThrowsException(z.Evalutate());
x.Assign(1);
Assert.ThrowsException(z.Evalutate());
y.Assign(2);
Assert.Equals(3, z.Evaluate());
x.Assign(3);
Assert.Equals(5, z.Evaluate());

// Criteria 2: Referencing relative to parent object    
Car myCar = LazyEvaluated.New<Car>();
Engine engineInMyCar = LazyEvaluated.New<Engine>();
double displacementOfMyEngine = LazyEvaluated.New<double>();

engineInMyCar = myCar.Engine;
displacementOfMyEngine = engineInMyCar.Displacement;

Car subaru = new Car(new FlatFourEngine());
Car falcon = new Car(new InlineSixEngine());

myCar.Assign(subaru);
Assert.IsTypeOf<FlatFourEngine>(engineInMyCar.Evaluate());
Assert.IsEqual(2.0, displacementOfMyEngine.Evaluate());

myCar.Assign(falcon);
Assert.IsTypeOf<InlineSixEngine>(engineInMyCar.Evaluate());
Assert.IsEqual(4.0, displacementOfMyEngine.Evaluate()); 
```

这些是我用来说明的简单类定义......

```
public class Car {
    private readonly Engine engine;            
    public Car(Engine engine) { this.engine = engine; }
    public Engine Engine { get { return engine; } }
}

public abstract class Engine {
    public abstract double Displacement { get; }
}        

public class FlatFourEngine : Engine {
    public override double Displacement { get { return 2.0; } }
}

public class InlineSixEngine : Engine {
    public override double Displacement { get { return 4.0; } }
} 
```

我想要这个功能的原因主要是为了分离关注点。为了说明，让我们更进一步地模拟汽车。我的车是由很多零件组成的；发动机、轮胎、内饰等。我的轮胎需要每 2 年由轮胎店更换一次。我的发动机需要由机械师每 6 个月更换一次机油。内部需要每 3 个月由装修人员抽真空一次。能够按照以下方式做一些事情会很好

```
tyreShop.ReplaceTyres(myCar.Tyres, every2Years);
mechanic.ChangeOil(myCar.Engine, every6Months);
detailer.VacuumInterior(myCar.Interior, every3Months); 
```

这种方法的一些原因；

*   我想一劳永逸。一旦我安排了我的汽车的一部分进行维修，我希望它能够持续进行，而无需我提供任何进一步的意见。
*   我不想在我购买新车的那一刻打电话给我的每个服务中心并通知他们。事实上，他们不需要知道我有一辆新车，直到需要维修。如果他们试图维修我的车但它不存在，那么他们可以抛出异常。
*   我希望我的每项服务都尽可能简单和集中。当轮胎店唯一真正关心的是轮胎时，为什么要让轮胎店参考我的整辆车（包括发动机、内饰等）？
*   我不希望轮胎店给我一套新轮胎并强迫我自己将它们安装（分配）到汽车上。

我没有接受过任何正规的 CS 教育，我唯一的编程经验是使用 c 和 c# 语言。我刚刚花了 6 个月的时间来熟悉 c# 和 .Net。在大多数情况下，我真的很喜欢这种语言和总体上的早期评估。但是我现在质疑我是否会更好地用一种不同的语言来解决我的特定问题，并内置对惰性评估的支持。

我的问题是；

1.  如果让我重新开始，解决此类问题的最佳语言是什么？
2.  是否有任何现有的 c# 平台支持延迟评估？
3.  在 c# 中进行这项工作的替代方法是什么？我应该阅读任何特定的设计模式吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-18T06:49:45.660

听起来您*真正*想要的是安排稍后重复执行的操作。我建议代表 - 可能使用 lambda 表达式 - 是最合适的方法：

```
scheduler.Schedule(every3Months, () => tyreShop.ReplaceTyres(myCar)); 
```

这样，唯一需要了解惰性方面的代码就是调度程序本身。您的所有其余代码都可以假定，当您调用一个方法时，您希望立即执行该操作，这更符合 C# 的习惯。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-18T06:44:00.687

.NET 4 具有对延迟初始化的内置支持，`Lazy`请参阅 MSDN 上的文档。 [http://msdn.microsoft.com/en-us/library/dd642331.aspx](http://msdn.microsoft.com/en-us/library/dd642331.aspx)

# sql - 选择结果集行到列转换

> ID：10204159
> 
> 赞同：0
> 
> 时间：2012-04-18T06:41:42.250
> 
> 标签：sql, postgresql, select

我有一个带有can be 之类`remarks`的列的表， 我希望我的查询返回没有子查询的以下列。`id, story_id, like``+1``-1`
`select``story_id, total, n_like, n_dislike``total = n_like + n_dislike`

我目前正在做一个`group by`on `like`and `select`ing `like as like_t, count(like) as total`，这给了我一个输出，比如

```
-- like_t --+ --- total --
    -1      |      2
     1      |      6 
```

并在结果集中返回两行。但我想要的是得到`1`行 where `n_like is 6`and n_dislike is `2`and `total`is`8`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T06:58:05.033

首先，`LIKE`是 PostgreSQL 中的保留字，所以你必须双引号。也许应该为这个专栏选择一个更好的名字。

```
CREATE TABLE testbed (id int4, story_id int4, "like" int2);
INSERT INTO testbed VALUES
    (1,1,'+1'),(1,1,'+1'),(1,1,'+1'),
    (1,1,'+1'),(1,1,'+1'),(1,1,'+1'),
    (1,1,'-1'),(1,1,'-1');

SELECT
    story_id,
    sum(CASE WHEN "like" > 0 THEN abs("like") ELSE 0 END) AS n_like,
    sum(CASE WHEN "like" < 0 THEN abs("like") ELSE 0 END) AS n_dislike,
    count(story_id) AS total
    -- for cases +2 / -3 in the "like" field, use following construct instead
    -- sum(abs("like")) AS total
  FROM testbed
 GROUP BY story_id; 
```

我用于`abs("like")`您将拥有`+2`或`-3`在您的`"like"`专栏中的情况。

# c# - 在 Web 应用程序中配置 Log4Net

> ID：10204171
> 
> 赞同：65
> 
> 时间：2012-04-18T06:42:27.023
> 
> 标签：c#, log4net

我有这段代码和下面的配置文件：

```
ILog log = LogManager.GetLogger(typeof(MyClass));
log.Debug("Testing"); 
```

`TestProj`目录没有创建，如果我创建它，没有`TestLog.txt`文件，没有日志......什么都没有。

任何的想法？

谢谢，

**配置文件**

```
<section name="log4net" type="log4net.Config.Log4NetConfigurationSectionHandler, log4net" />

<log4net debug="true">
<appender name="RollingLogFileAppender" type="log4net.Appender.RollingFileAppender">
  <file value="C:\\TestProj\\TestLog.txt" />
  <appendToFile value="true" />
  <rollingStyle value="Size" />
  <maxSizeRollBackups value="10" />
  <maximumFileSize value="10MB" />
  <staticLogFileName value="true" />
  <layout type="log4net.Layout.PatternLayout">
    <conversionPattern value="%-5p %d %5rms %-22.22c{1} %-18.18M - %m%n" />
  </layout>
</appender>

<root>
  <level value="DEBUG" />
  <appender-ref ref="RollingLogFileAppender" />
</root>
</log4net> 
```

* * *

## 回答 #1

> 赞同：120
> 
> 时间：2012-04-18T06:54:42.947

你需要调用的`Configure`函数`XmlConfigurator`

```
log4net.Config.XmlConfigurator.Configure(); 
```

在您的第一次登录调用之前或在您的 Global.asax 中调用，如下所示：

```
protected void Application_Start(Object sender, EventArgs e) {
   log4net.Config.XmlConfigurator.Configure();
} 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-04-18T07:05:12.667

另一种方法是将此行添加到 Web 应用程序的程序集信息中：

```
// Configure log4net using the .config file
[assembly: log4net.Config.XmlConfigurator(Watch = true)] 
```

类似于史莱克的。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-04-18T07:01:40.943

1：将以下行添加到 AssemblyInfo 类中

```
[assembly: log4net.Config.XmlConfigurator(Watch = true)] 
```

2：确保你不使用`.Net Framework 4 Client Profile`as `Target Framework`（我认为这对你来说是可以的，否则它甚至不会编译）

3：确保您在程序中很早就登录。否则，在某些情况下，它不会被正确初始化（在[log4net FAQ](https://logging.apache.org/log4net/release/faq.html#first-log)上阅读更多内容）。

因此，在 Global.asax 中的应用程序启动期间记录一些内容

```
public class Global : System.Web.HttpApplication
{
    private static readonly log4net.ILog Log = log4net.LogManager.GetLogger(typeof(Global));
    protected void Application_Start(object sender, EventArgs e)
    {
        Log.Info("Startup application.");
    }
} 
```

4：确保您有权在给定路径上创建文件和文件夹（如果文件夹本身也不存在）

5：您给定信息的其余部分看起来还不错

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-18T06:48:03.970

这通常是由于缺少权限。运行本地 IIS 应用程序池的 Windows 帐户可能没有写入应用程序目录的权限。您可以在某处创建一个目录，授予每个人在其中写入的权限，并将您的 log4net 配置指向该目录。如果在那里创建了一个日志文件，您可以修改所需日志目录的权限，以便应用程序池可以写入它。

另一个原因可能是未初始化的 log4net。在 winforms 应用程序中，您通常在应用程序启动时配置 log4net。在 web 应用程序中，您可以动态执行此操作（在您的日志记录组件中，检查您是否可以使用其名称创建特定的 Ilog 记录器，如果不是 -> 调用 configure()）或在 global.asax.cs 中的应用程序启动时再次执行此操作.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-06-20T15:42:01.317

我也有类似的问题。未创建日志。

请检查记录器属性名称是否应与您的 LogManager.GetLogger("name")

```
<logger name="Mylog">
      <level value="All"></level>
      <appender-ref ref="RollingLogFileAppender" />
    </logger>

private static readonly ILog Log = LogManager.GetLogger("Mylog"); 
```

# python - 在 Scipy 错误中为大型数据集绘制树状图

> ID：10204173
> 
> 赞同：15
> 
> 时间：2012-04-18T06:42:45.620
> 
> 标签：python, scipy, cluster-analysis, dendrogram

我正在使用 Scipy 进行层次聚类。我确实设法使用 fcluster 在阈值上获得平坦的集群。但我需要可视化形成的树状图。当我使用 dendrogram 方法时，它适用于 5-6k 用户向量。但我的数据分析器由 16k 个用户向量组成。当我为 16k 用户运行它时，树形图函数会引发以下错误：

```
File "/home/enthought/lib/python2.7/site-packages/scipy/cluster/hierarchy.py", line 2333, in _dendrogram_calculate_info
leaf_label_func, i, labels)
File "/home/enthought/lib/python2.7/site-packages/scipy/cluster/hierarchy.py", line 2205, in _append_singleton_leaf_node
ivl.append(str(int(i)))
RuntimeError: maximum recursion depth exceeded while getting the str of an object 
```

关于为更大的数据服务器可视化树状图的任何想法？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-08-01T21:48:21.043

这可能有点晚了，但是如果您对增加递归限制以颠覆递归深度限制感到满意，您可以这样做。不推荐，也绝对不是“pythonic”，但它可能会为您提供您想要的结果。

```
import sys
sys.setrecursionlimit(10000) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-02-04T22:30:16.837

使用 sys.setrecursionlimit(1000000) 我能够处理一个大矩阵并成功返回一个 seaborn.clustermap 调用。我想这个错误也可以通过升级 scipy 或提供额外的参数并使用 scipy 更周到地构建集群图来解决。

# android - 将数据从 android 传递到站点

> ID：10204174
> 
> 赞同：0
> 
> 时间：2012-04-18T06:42:49.487
> 
> 标签：android

blahNow 我正在做一个安卓应用程序。在我的应用程序中，我必须使用 url 登录。就像...www.blah.com/api/login/username/password。

```
private void sendAccelerationData()
{
    ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(7);
    nameValuePairs.add(new BasicNameValuePair("","test3"));
    nameValuePairs.add(new BasicNameValuePair("","pass3"));
    this.sendData(nameValuePairs);
}

private void sendData(ArrayList<NameValuePair> data)
{
    try
    {
        HttpClient httpclient = new DefaultHttpClient();
        HttpPost httppost = new      
        HttpPost("http://blah.com/api/login/");
        httppost.setEntity(new UrlEncodedFormEntity(data));
        HttpResponse response = httpclient.execute(httppost);
    }
} 
```

但我收到 404 错误。如果我像这样写我的 sendData()

```
HttpPost("http://eesnap.com"); 
```

和 sendAccelerationData() 之类的

```
nameValuePairs.add(new BasicNameValuePair("","api"));
nameValuePairs.add(new BasicNameValuePair("","login"));
nameValuePairs.add(new BasicNameValuePair("","test3"));
nameValuePairs.add(new BasicNameValuePair("","pass3")); 
```

我获得了 200 次成功。如果在浏览器上发布 www.blah.com/api/login/username/password 那么我会在浏览器上得到结果

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T06:46:05.133

尝试：

```
HttpPost("http://www.blah.com/api/login/"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T06:07:16.620

我理解我的错误。在“Get()”方法中，我可以编写类似上面的代码，但在 post 方法中，我必须使用名称值对。

# c# - C# TCP 聊天应用程序线程

> ID：10204175
> 
> 赞同：0
> 
> 时间：2012-04-18T06:42:53.227
> 
> 标签：c#, multithreading, sockets, tcp, p2p

我迫切需要帮助。我基本上创建了一个（将使用）加密来来回发送消息的程序。加密部分工作正常，但是我对 Threads 还很陌生，我一生都无法让应用程序的客户端/服务器部分对齐。聊天程序是使用 TCP 的直接 IP 连接，因此每个主机都是客户端和服务器。当我调试时，我似乎遇到的问题是，当客户端尝试连接服务器线程时，它还没有准备好，或者如果它准备好了，它不会放弃线程以便客户端可以连接！我已经为此工作了几个小时，这非常令人沮丧。我希望有人能提供帮助！我在下面包含了我的代码。这是我的 MainForm 中的代码片段，它构建了客户端和服务器方面：

```
private void InitializeComponent() {

        server = new ServerSide("127.0.0.1",7865);
        servThread = new Thread(new ThreadStart(server.begin));
        client = new ClientSide("127.0.0.1",7865);
        clientThread = new Thread(new ThreadStart(client.begin));
        servThread.Start();
        clientThread.Start();

        //servThread.Join();
        //clientThread.Join(); 
```

}

这是我的服务器端代码：

```
public class ServerSide
{
    String IpString;
    int tcpPort;
    bool goodToGo = false;
    System.Net.IPAddress ipAddress = null;
    public ServerSide(String ip, int tcpPort)
    {
        IpString = ip;
        bool isValidIp = System.Net.IPAddress.TryParse(IpString, out ipAddress);
        if (isValidIp == true) // check if the IP is valid, set the bool to true if so
        {
            goodToGo = true;
        }
        else
        {
            goodToGo = false;
        }
    }

    public void begin()
    {
        try
        {
            IPAddress ipAd = IPAddress.Parse(IpString);

            /* Initializes the Listener */
            TcpListener myList = new TcpListener(ipAd, tcpPort);
            Socket s = null;
            /* Start Listening at the specified port */
            while (true)
            {
                myList.Start();

                if (myList.Pending())
                { 
                        s = myList.AcceptSocket();
                         break;
                }

            }

            String toReceive = "";
                    while (true)
                    {
                        byte[] b = new byte[4096];
                        int k = s.Receive(b);
                        for (int i = 0; i < k; i++)
                            toReceive += Convert.ToString((Convert.ToChar(b[i])));

                        // ASCIIEncoding asen = new ASCIIEncoding();

                        var form = MainForm.ActiveForm as MainForm;
                        if (form != null)
                        {
                            form.messageReceived(toReceive);
                        }
                        toReceive = "";
                    }
                }
        catch (Exception e)
        {
            Console.WriteLine("Error..... " + e.StackTrace);
        }
    }
} 
```

}

客户端代码：

```
 public class ClientSide
{
    private String IpString;
    private int tcpPort;
    private TcpClient tcpInt;
    private static Stream stm;
    private System.Net.IPAddress ipAddress = null;
    private bool goodToGo = false;

    public ClientSide(String ip, int tcpPort)
    {

        IpString = ip;
        this.tcpPort = tcpPort;

        bool isValidIp = System.Net.IPAddress.TryParse(IpString, out ipAddress);
        if (isValidIp == true)
        {
            goodToGo = true;
        }
        else
        {
            goodToGo = false;
        }
    }

    public void begin()
    {
        try
        {
            tcpInt = new TcpClient();
            // Console.WriteLine("Connecting.....");

            tcpInt.Connect(IpString, tcpPort);
            // use the ipaddress as in the server program

            // Console.WriteLine("Connected");

            // String str = Console.ReadLine();
            stm = tcpInt.GetStream();
        }

        catch (Exception e)
        {
            Console.WriteLine("Error..... " + e.StackTrace);
        }
    }

    public void sendMessage(String str)
    {
      //  stm = tcpInt.GetStream();

        ASCIIEncoding asen = new ASCIIEncoding();
        byte[] ba = asen.GetBytes(str);

        stm.Write(ba, 0, ba.Length);

      /**  byte[] bb = new byte[100];
        int k = stm.Read(bb, 0, 100);

        for (int i = 0; i < k; i++)
            Console.Write(Convert.ToChar(bb[i]));*/

    }
} 
```

}

再一次..通常发生的是我的客户端收到主机主动拒绝连接的错误..但我不知道如何计时。我正在寻找如何让我的服务器监听 TCP 连接，但仍然设法转到我的另一个线程来创建 TCP 连接以发送服务器（我目前正在本地主机上测试它）。谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-18T06:54:26.277

在`ServerSide`类的构造函数中，您忘记初始化`tcpPort`成员。因为你忘记了，服务器会尝试监听 0 端口，而客户端会尝试连接 7865 端口，结果会失败。

尝试将此代码添加到`ServerSide`类中的构造函数中。

```
this.tcpPort = tcpPort; 
```

至于线程，如果客户端线程在服务器线程开始侦听之前尝试连接，您可能会遇到问题。您可以使用循环尝试连接多次（例如 10 次），如果不成功则超时（例如 1 秒）。这样，您将重试 10 次并在此之后放弃。

# sql - 访问 2007 时间戳

> ID：10204176
> 
> 赞同：0
> 
> 时间：2012-04-18T06:42:56.270
> 
> 标签：sql, database, ms-access, ms-access-2007

Access 中是否有任何属性可以使用，以便每当编辑 Access 数据库中的任何单元格时，它都用于更新任何其他列的相应单元格。

实际上，如果我正在考虑使用时间戳，它仅适用于插入，不适用于更新，当我编辑任何单元格时，我希望它跟踪已编辑的内容。我无法在 Access 中使用表单，并且 access 2007 不支持存储过程或触发器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T07:39:46.230

> 我正在考虑使用时间戳，它仅适用于插入，不适用于更新...访问 2007 不支持存储过程或触发器

实际上，Access 2007 支持[`CREATE PROCEDURE`](http://office.microsoft.com/en-gb/access-help/create-procedure-statement-HA001231440.aspx)但不支持这样的过程代码；Access`PROCEDURE`由单个 Access SQL 语句组成。

您可以按照以下方式做一些事情：

```
CREATE PROCEDURE UpdateMyStuff
(
 arg_stuff_ID CHAR(10), 
 arg_stuff_name VARCHAR(20) = NULL, 
 arg_stuff_color_code INTEGER = NULL
)
UPDATE MyStuff
   SET stuff_name 
          = IIF( arg_stuff_name IS NULL, stuff_name, arg_stuff_name ),
       stuff_color_code 
          = IIF( arg_stuff_color_code IS NULL, stuff_color_code, arg_stuff_color_code ),   
       stuff_updated_date = NOW()
 WHERE stuff_ID = arg_stuff_ID; 
```

您可以为表编写类似的程序`INSERT`，`DELETE`然后撤销表的更新权限，从而强制用户通过您的程序更新数据，这当然可以确保时间戳得到维护。

IIRC 当前时间戳的值`NOW()`将取自用户的本地计算机，即使数据库文件驻留在服务器计算机上，但这只是 Access 的“乐趣”之一。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T06:52:51.787

不，没有任何内置功能。从支持触发器的数据库引擎使用链接表到外部表。

否则，您可以使用 VBA 使用 Forms 来实现这一点。

# testing - 如何将 Sikuli 脚本导入 Selenium？

> ID：10204179
> 
> 赞同：1
> 
> 时间：2012-04-18T06:43:07.817
> 
> 标签：testing, selenium, automation, sikuli

我正在使用 Selenium，但对于 UI 内容，我使用的是 Sikuli，我想将它们与我的 Selenium 脚本合并，有什么办法可以做到吗？？？

提前致谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T18:04:08.833

Mohd Wasi Hirekudi,

```
 /**
 * Clicks a button. SIKULI Example
 * 
 * @throws FindFailed
 */
public void clickSikuliBtn() throws FindFailed {

    if (debugMode)
        ToolBox.logMessage(new Exception("Entered"));

    // Verify Button present
    // Click the button.
    screen.find("IMG_LIBRARY + Test.png");

    try {

        screen.drag("IMG_LIBRARY + Test.png");
        screen.click("IMG_LIBRARY + Test.png");

    } catch (NoSuchElementException e) {
        fail("Button not found");
    }

    if (debugMode)
        ToolBox.logMessage(new Exception("Leaving"));
} 
```

这是我们如何在测试套件中使用 Sikuli 函数的示例。这完全取决于您如何设置框架。我们有 Pages.java 文件，然后在我们的 Test.java 文件中使用这些文件，这些文件从我们的 TestSuite.java 文件中调用。您在页面上设置方法并在测试中设置特定测试并在套件中运行不同的测试。

您的问题下方引用的链接也提供了一些重要信息供您查看[Question #3666140](https://stackoverflow.com/questions/3666140/how-to-integrate-sikuli-scripts-into-selenium)。有些事情要记住，这完全取决于您正在开发的框架以及您如何设置测试框架。

问候。

# r - 使用带有 C++ 客户端的 Rserve 从 R 中获取不正确的错误代码

> ID：10204181
> 
> 赞同：0
> 
> 时间：2012-04-18T06:43:13.977
> 
> 标签：r, rserve

我有这部分代码：

```
Rconnection *rc = NULL;
rc = new Rconnection();
int stat=rc->connect();

Rmessage *msg=new Rmessage();
Rmessage *cmdMessage=new Rmessage(CMD_eval, "sumwe(2,3)");
int res=rc->request(msg,cmdMessage);
int r = CMD_STAT(msg->head.cmd); 
```

如您所见，我指定了错误的 R 函数名称 sumwe。为此，我通过说“错误：找不到函数“sumwe””进入 Rserve 控制台

但是在检查 r 中的值时，`CMD_STAT(msg->head.cmd);`得到 127(hex 7f)。我期待`#define ERR_unsupportedCmd 0x49 /* unsupported command */`或 `#define ERR_unknownCmd 0x4a /* unknown command */`- 差异。

请帮助我做错了什么。

细节：

```
R version 2.15.0 (2012-03-30)
Rserve version  0.6-8 (338)
Platform Windows(32bit). Rserve running locally. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T00:13:26.357

指的`ERR_unsupportedCmd`是 Rserve QAP1 协议，即`CMD_eval`. 您正在发送有效命令`CMD_eval`，因此 Rserve 不会抱怨 - 错误在 R 中，因此适用常规 R 规则。就 Rserve 而言，R 中止了评估。如果您想要返回 R 错误，您可以使用`try({...}, silent=TRUE)`并得到一个错误作为`try-error`包含错误字符串的类的对象。

# ios - UIWebView 中的函数 loadHTMLString 占用太多内存

> ID：10204183
> 
> 赞同：2
> 
> 时间：2012-04-18T06:43:17.663
> 
> 标签：ios, memory, uiwebview

UIWebView中的函数`loadHTMLString`会占用太多内存，并且会激活`didReceiveMemoryWarning`当前 UIViewController 的。

请问我该如何解决：D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T08:06:26.210

可能是您的 html NSString for loadHTMLString: 太长，我的意思是 NSString 的 loadHTMLString: 大小太大。如果你的 html 字符串中有一些图像 url，它也可能有问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T08:12:42.707

如何将您的 HTML 存储在一个文件中，然后：

```
NSURL *fileURL = [NSURL fileURLWithPath:filePath];
NSURLRequest *request = [NSURLRequest requestWithURL:fileURL];
[webView loadRequest:request]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T08:17:30.107

如果您仅使用 webview 加载一个 html 页面

我认为你应该优化你的页面来解决它

如果你加载了很多页面，你应该在加载另一个页面或 dealloc 之前清理 webview

像这样

```
[webView loadHTMLString: @"" baseURL: nil]; 
```

# c++ - SendNotifyMessage API 是否跨用户会话工作？

> ID：10204196
> 
> 赞同：0
> 
> 时间：2012-04-18T06:44:17.750
> 
> 标签：c++, winapi, sendmessage, usersession

比如说，我有一个 Windows 服务应用程序以及在每个登录的用户会话中运行的窗口客户端应用程序。如果我在每个客户端应用程序中调用 RegisterWindowMessage 并尝试在那里捕获该消息。然后还在服务应用程序中调用具有相同消息名称的 RegisterWindowMessage ，然后在从服务再次调用 SendNotifyMessage 时使用它来通知每个客户端应用程序单个触发事件，这行得通吗？

PS。我使用 C++/MFC 和本机 WinAPI 进行编程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T07:27:30.400

如果您的服务应用程序在系统帐户下运行，则它**无法**向用户帐户的应用程序发送消息。

您可以尝试以下方法：

*   遍历所有会话 (WTSEnumerateSessions) 以获取所有 WindowStation，
*   打开这些站（OpenWindowStation），
*   每站
    *   将您的进程与工作站关联 (SetProcessWindowStation)，
    *   遍历所有工作站桌面（Enumdesktops），
    *   遍历所有窗口（EnumdesktopWindows），直到找到应用程序的窗口之一

不过，您可能会遇到 UAC 的问题。

# dom - IE 和 IE.DomContainer 的区别

> ID：10204202
> 
> 赞同：1
> 
> 时间：2012-04-18T06:44:45.970
> 
> 标签：dom, watin

有什么区别

```
IE.DomContainer.Button(Find.ByText("sometext")).Click(); 
```

和

```
IE.Button(Find.ByText("sometext")).Click(); 
```

?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T07:02:20.117

无 - 除了 DomContainer，您还会在哪里寻找按钮？Button 类使用 DomContainer 和 finder 来获取按钮。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T06:34:50.380

'Button' 实际上是 IE 和 DomContainer 都继承的 'Document' 的虚拟属性。所以是的，这是同一件事（如上一个答案所述）。查看这些类的定义可能是值得的，它可能会阐明事物之间的关系。

# mysql - 查询从 MySQL 到 MS Access 的更改

> ID：10204203
> 
> 赞同：0
> 
> 时间：2012-04-18T06:44:48.660
> 
> 标签：mysql, ms-access

我在 MySQL 中有一个视图，但出于某种原因，我希望它在 MS Access 中写入。我已经导入了必要的表。当我从 MySQL 复制视图定义并将其写入 Access Query Design 时，它在“加入操作”时出现错误。这里有什么问题？

查看 -> qryOccupation

```
 select `a`.`Employee_ID` AS `Employee_ID`,`a`.`Employee_Name` AS `Employee_Name`,`a`.`Flat_No` AS `Flat_No`,`a`.`Area` AS `Area`,`a`.`Building_Name` AS `Building_Name` 
from (`tblallotment` `a` join `tblflat` `f`) 
where ((`a`.`Flat_No` = `f`.`Flat_No`) 
and (`f`.`Status` = 'A') 
and (not(`a`.`Employee_ID` in 
(select `c`.`Employee_ID` 
from (`tblallotment` `a` join `tblcancel_allotment` `c`) 
where ((`a`.`Employee_ID` = `c`.`Employee_ID`) 
and (`c`.`Date_Cancellation` = 0)))))) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T06:58:50.303

```
("SELECT [Department Name], " _
        & "FirstName & Chr(32) & LastName AS Name " _
        & "FROM Departments LEFT JOIN Employees " _
        & "ON Departments.[Department ID] = " _
        & "Employees.[Department ID] " _
        & "ORDER BY [Department Name];") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T07:00:32.263

```
select a.Employee_ID AS Employee_ID,
       a.Employee_Name AS Employee_Name,
       a.Flat_No AS Flat_No,
       a.Area AS Area,
       a.Building_Name AS Building_Name 
from   tblallotment a 
          inner join tblflat f 
            on a.Flat_No = f.Flat_No 
where  f.Status = 'A'
       and (not (a.Employee_ID in 
                (select c.Employee_ID 
                 from   tblallotment a 
                         inner join tblcancel_allotment c 
                            on a.Employee_ID = c.Employee_ID
                  where c.Date_Cancellation = 0))) 
```

# php - 如何使用 simpleload_xml_string 从解析的 XML 中检测新行？

> ID：10204206
> 
> 赞同：0
> 
> 时间：2012-04-18T06:45:00.313
> 
> 标签：php, xml

> **可能重复：**
> [PHP SimpleXML 不保留 XML 属性中的换行符](https://stackoverflow.com/questions/1457333/php-simplexml-doesnt-preserve-line-breaks-in-xml-attributes)

我有以下 XML

```
$xmldatas = '<layer text="name

id"></layer>'; 
```

我已经解析了这个 XML

```
$xml = simplexml_load_string($xmldatas); 
```

但是当我检查 $xml 时，`\n`它被替换为空格。我希望新行在 xml 解析之后保持不变。

但我该怎么做呢？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T13:19:29.967

我认为 xml 不会在标签选项文本中接受换行符。如果您正在生成 xml，也许您想做这样的事情？

```
$xmldatas = '<layer><text>name
id</text></layer>'; 
```

# iphone - 如何替换nsmutablearray中特定索引处的对象，该对象在每个索引处包含多个值

> ID：10204211
> 
> 赞同：0
> 
> 时间：2012-04-18T06:45:13.917
> 
> 标签：iphone, nsmutablearray

我的数组在每个索引处包含 (firstName,lastName, age)。现在我想在索引 1 处更改一个人的年龄。请指导如何做。这是我的代码。

```
 - (void)viewDidLoad {
[super viewDidLoad];
productArray=[[NSMutableArray alloc]init];

PersonDetail *personObj = [[PersonDetail alloc] init];
personObj.firstName = @"Adeem";
personObj.lastName = @"Basraa";
personObj.age = @"5";

[productArray addObject:personObj];
[personObj release];

PersonDetail *personObj = [[PersonDetail alloc] init];
personObj.firstName = @"Ijaz";
personObj.lastName = @"Ahmed";
personObj.age = @"10";

[productArray addObject:personObj];
[personObj release];

PersonDetail *personObj = [[PersonDetail alloc] init];
personObj.firstName = @"Waqas";
personObj.lastName = @"Ahmad";
personObj.age = @"15";
[productArray addObject:personObj];
[personObj release]; 
```

}

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-18T06:51:28.307

```
Person *person = (Person *)[myArray objectAtIndex:1];
person.age = 2; 
```

假设`Person`您的自定义对象存储在数组中

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-18T06:51:18.983

用这个

> ```
> [arrname replaceObjectAtIndex:1 withObject:[NSNumber numberWithInt:13]];//13 is the age you want to change 
> ```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-18T06:56:53.540

您应该使用`NSMutableDictionary`保存姓名、年龄、电话、地址并将此字典添加到您的数组中。

```
[[arry objectAtIndex:1] setObject:@"value" forKey:@"key"]; 
```

像这样你可以改变价值。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-18T06:55:15.593

试试这个

```
 -insertObject:atIndex: or replaceObjectAtIndex:withObject: 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-04-18T07:03:16.733

也许这会对你有所帮助。

```
- (void)viewDidLoad {
[super viewDidLoad];
productArray=[[NSMutableArray alloc]init];

PersonDetail *personObj = [[PersonDetail alloc] init];
personObj.firstName = @"Adeem";
personObj.lastName = @"Basraa";
personObj.phoneNumber = @"123456789";

[productArray addObject:personObj];
[personObj release];

PersonDetail *personObj = [[PersonDetail alloc] init];
personObj.firstName = @"Ijaz";
personObj.lastName = @"Ahmed";
personObj.phoneNumber = @"987654321";

[productArray addObject:personObj];
[personObj release];

PersonDetail *personObj = [[PersonDetail alloc] init];
personObj.firstName = @"Waqas";
personObj.lastName = @"Ahmad";
personObj.phoneNumber = @"45656789";
[productArray addObject:personObj];
[personObj release];
}

- (void)change {

for (int i=0;i<[productArray count];i++) {
          PersonDetail *personObj = (PersonDetail *)[[productArray objectAtIndex:i] retain];
          personObj.phoneNumber = @"New";
    }
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-18T06:51:16.980

假设您`NSMutableArray`由`NSMutableDictionary`对象组成，

**尝试这样的事情：**

```
NSMutableDictionary* entry = [entries objectAtIndex:index];

[entry setValue:@"newAge" forKey:@"Age"]; 
```

# javascript - 撇号在 IE 中未正确呈现

> ID：10204213
> 
> 赞同：2
> 
> 时间：2012-04-18T06:45:21.790
> 
> 标签：javascript

我在 div 中有一些带有撇号的 html 内容，它可以在 IE 以外的所有其他浏览器中正确呈现。您将从屏幕截图中获得清晰的想法

在其他浏览器上

![在此处输入图像描述](../Images/fddb8fcb68624c038ccfd2a57de8efc7.png)

在 IE 上

![在此处输入图像描述](../Images/c0a8a579355b9003e533880348797ac7.png)

我已经进行了足够多的搜索，发现像撇号这样的问题显示为`&apos;`. 我认为这与那个问题不相似。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T06:52:00.793

在您的情况下，没有告知 IE 使用 UTF-8 编码。我相信它在菜单中`View`>`Encoding`但也应该有一个`<meta>`标签在页面中指定它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T06:54:20.950

您的页面需要`utf-8`标题。您的服务器应该提供以下页面：

```
Content-Type: text/html;charset=utf-8 
```

或者您可以将其与元标记一起放置

```
<meta http-equiv="Content-Type" content="text/html;charset=utf-8"> 
```

或者只是使用 html 实体来提供您的内容

```
He&apos;s not feeling well. 
```

# ios - 想要展开折叠 UITableview 部分

> ID：10204217
> 
> 赞同：2
> 
> 时间：2012-04-18T06:45:32.247
> 
> 标签：ios, uitableview

我想扩展`UITableView`我必须展示的部分`UITableViewCells`。我应该怎么做才能实现这一目标？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-18T06:51:29.017

*   一个简单的实现是将部分的单元格高度保持为零。
*   使 viewForSectionHeader 可触摸
*   当您触摸它时，为该部分下的单元格设置适当的高度
*   编写段之间切换的逻辑

或者，

*   在触摸节标题时，重新加载表格，其中包含已触摸节的更新行数。

许多其他方法可以做到这一点。[苹果的例子](http://developer.apple.com/library/ios/#samplecode/TableViewUpdates/Introduction/Intro.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-28T07:52:18.737

根据 Vignesh 的回答，我尝试了第二种解决方案。“在触摸部分标题时，重新加载表格，并更新已触摸部分的行数。”

首先，声明一个数组来存储每个section的isExpanded标签。初始，所有的值都是BOOL NO。表示所有的section行都被折叠了。

那么，在

```
- (UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section 
```

方法，通过以下代码实现 sectionHeader 触摸事件： 因为我使用自定义单元格作为部分标题视图。所以这里是“单元格”，您可以使用自己的视图。

```
cell.tag=section;
UITapGestureRecognizer *recognizer = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(sectionTapped:)];

[cell addGestureRecognizer:recognizer];
cell.userInteractionEnabled=YES; 
```

并且，在点击 sectionHeader 时执行一些操作。

```
- (void)sectionTapped:(UITapGestureRecognizer *)recognizer
{

    NSMutableArray *isSectionTouched=[[NSMutableArray alloc]initWithCapacity:_sectionExpandBool.count];
    isSectionTouched=[_sectionExpandBool mutableCopy];
    if ([[isSectionTouched objectAtIndex:recognizer.view.tag]boolValue]==YES) {
        [isSectionTouched replaceObjectAtIndex:recognizer.view.tag withObject:[NSNumber numberWithBool:NO]];
    }else if ([[isSectionTouched objectAtIndex:recognizer.view.tag]boolValue]==NO){
        [isSectionTouched replaceObjectAtIndex:recognizer.view.tag withObject:[NSNumber numberWithBool:YES]];
    }
    _sectionExpandBool=isSectionTouched;
    [self.tableView reloadData];

 } 
```

不要忘记修改 numberOfRowsInSection 方法。row.count 应该根据 _sectionExpandBool 的值而改变，如果 section 的 ExpandBool 是 YES，应该返回你的数据源的正确数量，否则返回 0。

它按我的预期工作。但是，我有点担心内存泄漏什么的，因为每次点击标题，整个表格视图都会重新加载。

我想知道是否有一些解决方案只重新加载特定部分。谢谢。

# symfony - Symfony2：如何在表单类中获取配置参数

> ID：10204219
> 
> 赞同：3
> 
> 时间：2012-04-18T06:45:38.407
> 
> 标签：symfony, symfony-forms

如果我在控制器内，我可以使用以下方法轻松读取配置参数：

```
$this->container->getParameter('profession'); 
```

但是当我在其他班级时，比如 Form 类型，我怎样才能掌握配置参数？

```
$container = new Container(); 
$container->getParameter('profession'); 
```

上面的代码不应该也不起作用。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-18T18:03:04.610

另一个类似的解决方案是让您的表单类型成为服务并注入所需的参数。然后你的控制器需要做的就是获取服务。用百分号将参数名称括起来。

在 services.xml 中

```
 <service
        id     = "zayso_area.account.create.formtype"
        class  = "Zayso\AreaBundle\Component\FormType\Account\AccountCreateFormType"
        public = "true">
        <argument type="service" id="doctrine.orm.accounts_entity_manager" />
        <argument type="string">%zayso_core.user.new%</argument>
    </service> 
```

如果您真的想要，那么您可以注入完整的容器，尽管不鼓励这样做。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-01-08T07:25:21.973

现在您可以使用 ContainerAwareInterface：

```
class ContactType extends AbstractType implements ContainerAwareInterface
{
        use ContainerAwareTrait;

        public function buildForm(FormBuilderInterface $builder, array $options)
        {
            $builder->add('choice_field', ChoiceType::class, [
                            'choices' => $this->container->get('yourservice')->getChoices()
                          ]);
        }
} 
```

在 services.yml 中：

```
app.contact_type:
    class: AppBundle\Form\ContactType
    calls:
      - [setContainer, ['@service_container']]
    tags:
        - { name: form.type, alias: 'container_aware' } 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-18T09:59:37.803

一个简单的解决方案是为您的 Type 提供一个新变量，您可以在其中存储配置参数的值。您可以将其公开（不推荐）、添加构造函数参数或使用 setter：

```
class MyType extends AbstractType{

    private $profession;

    public function __construct($profession){
        $this->profession = $profession;
    }

    // ...

} 
```

您将在控制器中使用它，如下所示：

```
$myType = new MyType($this->container->getParameter('profession'));
// use mytype with form 
```

毕竟，表单根本不应该知道容器，因为您会将它们捆绑在一起，从而难以测试或更换容器。这将违背容器的整个想法。

另一方面，使用构造函数/设置器来注入参数是相当不错的，因为您在测试时不需要知道它们来自哪里，可以随时更改它们的源，并且如前所述，没有依赖关系到容器。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-05-12T17:13:22.467

在 Symfony 4 中，您应该首先将表单定义为服务，然后`config/services.yaml`将适当的参数传递给它

```
parameters:
    locale: 'en'
    upload_dir: '%kernel.project_dir%/public/uploads/avatars'

services:
    App\Form\FilemanagerType:
        arguments: ['%upload_dir%']
        tags: [form.type] 
```

并在您的表单类中获取参数（此处为上传目录），如下所示

```
class FilemanagerType extends AbstractType
{
    private $upload_dir;
    function __construct(string $upload_dir)
    {
        $this->upload_dir= $upload_dir;
    }
} 
```

我希望它有帮助

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-07-09T09:10:22.303

在 Symfony 4.1 中，您只需要`ParameterBagInterface`在 Form 构造函数中添加：

```
public function __construct(ParameterBagInterface $parameterBag)
{
    $this->parameterBag = $parameterBag;
} 
```

然后获取您的参数：

```
$profession = $this->parameterBag->get('profession'); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-12-18T05:57:54.677

您还可以使用 Setter 注入。来自[http://symfony.com/doc/current/book/service_container.html#optional-dependencies-setter-injection](http://symfony.com/doc/current/book/service_container.html#optional-dependencies-setter-injection)：

如果您有一个类的可选依赖项，那么“setter injection”可能是一个更好的选择。这意味着使用方法调用而不是通过构造函数注入依赖项。该类将如下所示：

```
namespace AppBundle\Newsletter;

use AppBundle\Mailer;

class NewsletterManager
{
    protected $mailer;

    public function setMailer(Mailer $mailer)
    {
        $this->mailer = $mailer;
    }

    // ...
} 
```

通过 setter 方法注入依赖只需要改变语法：

```
# app/config/services.yml
services:
    app.mailer:
        # ...

    app.newsletter_manager:
        class:     AppBundle\Newsletter\NewsletterManager
        calls:
            - [setMailer, ['@app.mailer']] 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-02-06T14:59:16.957

在 Symfony3 中，可以这样完成 -

> 在控制器处

```
$form = $this->createForm(FormType::class, $abc, array('firstargument' => $firstargumentvalue, 'second' => $secondvalue)); 
```

> 在 FormType

```
public function configureOptions(OptionsResolver $resolver)
    {
        $resolver->setDefaults(array('data_class' => abc::class, 'firstargument' => null, 'second' => null));
    }

public function buildForm(FormBuilderInterface $builder, array $options)
    {

        $first = $options['firstargument'];
        $second = $options['second'];
} 
```

您可以在表格中使用上述值

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2019-05-31T02:46:04.993

在 Symfony 4.1 中

```
services:
    # ...
    _defaults:
        bind:
            $projectDir: '%kernel.project_dir%' 
```

```
use Symfony\Component\DependencyInjection\ParameterBag\ParameterBagInterface;

class MessageGenerator
{
    private $params;

    public function __construct(ParameterBagInterface $params)
    {
        $this->params = $params;
    }

    public function someMethod()
    {
        $parameterValue = $this->params->get('parameter_name');
        // ...
    }
} 
```

请参考此[https://symfony.com/blog/new-in-symfony-4-1-getting-container-parameters-as-a-service](https://symfony.com/blog/new-in-symfony-4-1-getting-container-parameters-as-a-service)

# internet-explorer-8 - IE8 文档模式 IE7 标准

> ID：10204227
> 
> 赞同：0
> 
> 时间：2012-04-18T06:46:05.303
> 
> 标签：internet-explorer-8, internet-explorer-7, ie8-browser-mode

我的文档如下所示：

```
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <!--[if lte IE 8]>
        <meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7" />
        <![endif]--> 
```

我正在使用 IE10 来测试所有内容。当我将浏览器模式切换到 IE7 时，页面默认文档模式显示为 IE7 标准。但是，当我切换到 IE8 浏览器模式时，页面默认文档模式是 IE8 标准。为什么元标记不将其更改为 IE7 标准？这与我的浏览器配置有关吗？如何确保从 IE8 浏览我网站的每个人都默认获得 IE7 的文档模式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T07:49:39.860

你隐藏了`meta`标签，所以 IE10 永远不会看到它。您需要删除条件注释包装。

然后，我假设当您将 IE 置于 IE8 浏览器模式时，该操作会强制使用 IE8 渲染器，因此它将忽略 X-UA-Compatible 标头。

# python - 有人有 gevent-socketio 的工作示例吗？

> ID：10204230
> 
> 赞同：4
> 
> 时间：2012-04-18T06:46:20.420
> 
> 标签：python, websocket, socket.io, gevent

bitbucket 和 github 中 gevent-socketio 的所有分支都有不起作用的示例/chat.py。谁能给我找到一个 gevent-socketio 的工作示例？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T03:38:41.767

在以下位置使用新的官方存储库：

*   [https://github.com/abourget/gevent-socketio](https://github.com/abourget/gevent-socketio)

并查看其中的示例应用程序，大多数现在应该是最新的（我认为最近有一个对 chat.py 示例进行了一些修复的提交）

*   [https://github.com/abourget/gevent-socketio/tree/master/examples](https://github.com/abourget/gevent-socketio/tree/master/examples)

还请查看文档：

*   [http://readthedocs.org/docs/gevent-socketio/en/latest/](http://readthedocs.org/docs/gevent-socketio/en/latest/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T07:16:34.713

我在 websockets 上制作。这是代码草案，但它可以工作。

```
import os
from gevent.pywsgi import WSGIServer
import geventwebsocket

class eServer(object):

    def __init__(self):
        path = os.path.dirname(geventwebsocket.__file__)
        agent = "gevent-websocket/%s" % (geventwebsocket.__version__)
        print "Running %s from %s" % (agent, path)
        self.all_socks = []
        self.s = WSGIServer(("", 8000), self.echo, handler_class=geventwebsocket.WebSocketHandler)
        self.broken_socks = []
        self.s.serve_forever()

    def echo(self, environ, start_response):
        websocket = environ.get("wsgi.websocket")
        if websocket is None:
            return http_handler(environ, start_response)
        try:
            while True:
                message = websocket.receive()
                if message is None:
                    break
                self.sock_track(websocket)
                for s in self.all_socks:
                    try:
                        s.send(message)
                    except Exception:
                        print "broken sock"
                        self.broken_socks.append(s)
                        continue
                if self.broken_socks:
                     for s in self.broken_socks:
                         print 'try close socket'
                         s.close()
                        if s in self.all_socks:
                            print 'try remove socket'
                            self.all_socks.remove(s)
                    self.broken_sock = []
                    print self.broken_sock
            websocket.close()
        except geventwebsocket.WebSocketError, ex:
            print "%s: %s" % (ex.__class__.__name__, ex)

    def http_handler(self, environ, start_response):
        if environ["PATH_INFO"].strip("/") == "version":
            start_response("200 OK", [])
            return [agent]
        else:
            start_response("400 Bad Request", [])
            return ["WebSocket connection is expected here."]

    def sock_track(self, s):
        if s not in self.all_socks:
            self.all_socks.append(s)
            print self.all_socks

s = eServer() 
```

和客户的 html 像：

```
<html>
<head>
    <script type="text/javascript" src="http://yandex.st/jquery/1.7.2/jquery.min.js"></script>
    <script type="text/javascript">
    $(function(){
    var socket = new WebSocket("ws://localhost:8000");
    socket.onopen = function(){
        console.log('socket open');
}
    socket.onmessage = function(msg){
        console.log(msg);
        $('#recive').after('<p>'+msg.data+'</p>');
}
    $('#send-btn').click(function(){
        var txt = $('#txt').val();
        console.log(txt);
        socket.send(txt);
    })

});

    </script>
</head>
<body>
    <textarea id="txt"></textarea>
    <input type="button" id="send-btn" value="Send"></input>
    <div id="recive"></div>
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-30T04:55:37.503

what browser do you use. I saw this behavior with IE. both Mozilla and chrome were fine. there were issues with the flashscket protocol which I have fixed so ie should work but the jquery UI does not work that is the issue. don't know enough JS to fix it

# php - 如何使用 javascript 从服务器中检索文件名的名称？

> ID：10204235
> 
> 赞同：0
> 
> 时间：2012-04-18T06:46:38.260
> 
> 标签：php, javascript, jquery

我在下面有一个函数，当文件停止上传时，它会显示一条消息是否上传成功，然后更重要的是使用下面的代码显示上传的文件的名称：

```
 $('.listImage').append(nameimagefile + '<br/>'); 
```

上面的代码检索从文件输入中选择的文件的名称。但是，问题在于我不希望在文件输入中输入文件的名称。相反，我想要上传到服务器的文件的名称。

例如，如果我上传了 2 个都是 tulips.png 的文件，则在服务器中将它们保存并上传为 tulips.png 和 tulips2.png 但是因为我使用的是`$('.listImage').append(nameimagefile + '<br/>');`，它会将两个文件名都显示为“tulips.png”，即不是我想要的。

所以这就是我决定不从输入文件的值中提取文件名的地方，而是从文件中上传时保存的名称。

如何在 javascript 函数中对此进行编码？

javascript 函数和 php 脚本位于单独的页面上，但我确实在 php 脚本中对 javascript 函数使用了回调函数：

下面是表单代码：

```
<form action='imageupload.php' method='post' enctype='multipart/form-data' target='upload_target' onsubmit='stopImageUpload(this);' class='imageuploadform' >
    <p>Image File: <input name='fileImage' type='file' class='fileImage' />
    <input type='submit' name='submitImageBtn' class='sbtnimage' value='Upload' />
    </p> 
    <ul class='list'></ul>
    </form> 
```

下面是获取文件名并在文件成功与否时显示消息的 javascript 函数：

```
 function stopImageUpload(success){

          var nameimagefile = $('.fileImage').val();
          var result = '';
          if (success == 1){
             result = '<span class="msg">The file was uploaded successfully!</span><br/><br/>';
             $('.listImage').append(nameimagefile + '<br/>');
          }
          else {
             result = '<span class="emsg">There was an error during file upload!</span><br/><br/>';
          }

 return true;

} 
```

最后下面是带有 javascript 回调函数的 php 脚本。a它所做的只是上传文件，如果文件存在或不存在于服务器的文件夹中。如果存在，则通过在文件名末尾添加名称来为其赋予不同的文件名，如果不存在，则上传具有相同名称的文件：

```
if( file_exists("ImageFiles/".$_FILES['fileImage']['name'])) {
    $parts = explode(".",$_FILES['fileImage']['name']);
    $ext = array_pop($parts);
    $base = implode(".",$parts);
    $n = 2;

    while( file_exists("ImageFiles/".$base."_".$n.".".$ext)) $n++;
    $_FILES['fileImage']['name'] = $base."_".$n.".".$ext;

    move_uploaded_file($_FILES["fileImage"]["tmp_name"],
    "ImageFiles/" . $_FILES["fileImage"]["name"]);
    $result = 1;

}
    else
      {
      move_uploaded_file($_FILES["fileImage"]["tmp_name"],
      "ImageFiles/" . $_FILES["fileImage"]["name"]);
      $result = 1;

      }

?>

<script language="javascript" type="text/javascript">window.top.window.stopImageUpload(<?php echo $result;?>);</script> 
```

希望这就是您需要的所有信息，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T06:51:24.943

你可以`$_FILES["fileImage"]["name"]`作为参数传递给你的 js 函数。Javascript 是一种客户端语言，因此无法处理服务器上的文件。

# javascript - 如何修改/覆盖由无限 setInterval 调用的 javascript 函数？

> ID：10204239
> 
> 赞同：0
> 
> 时间：2012-04-18T06:46:48.453
> 
> 标签：javascript, xss, intervals

假设我们有这个我无权访问/我无法更改的代码。

```
function f() {
// bad tasks
}
setInterval(f, 10000); 
```

我想修改函数 f 所以我在下面写了这样的东西。

```
window.f = function(){
// good tasks
} 
```

`f()`但是其中的原始功能`bad tasks`仍然每 10 秒运行一次。似乎传入的函数`setInterval`仍然指向原始函数。我该如何阻止它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T07:31:42.040

您的假设是正确的：区间保持对原始`f`.

如果不编辑原始脚本，就无法更改此设置。您所能做的就是清除站点上的所有间隔并开始另一个间隔。请参阅[https://stackoverflow.com/a/8860203/27862](https://stackoverflow.com/a/8860203/27862)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T06:50:35.200

单程：

```
function f() {
    //bad tasks
}

setInterval(function() { f(); }, 10000);

window.f = function() {
    //good tasks
} 
```

这样计时器将不会调用传递给它的旧 f() ，而是调用一个名为 f 的函数。

另一种方式：

```
function f() {
    //bad tasks
}

var interval = setInterval(f, 10000);

function g() {
    //good tasks
}

clearInterval(interval);
setInterval(g, 10000); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T07:49:58.217

不使用`setInterval`，`setTimeout`改为使用。它将为您提供所需的控制。

```
function f() {
 // bad tasks
 fTimeout = setTimeout(f,1000);
}
//start
var fTimeout = setTimeout(f,1000); 
```

现在，如果发生了不好的事情并且您想重写`f`：

```
clearTimeout(fTimeout);
window.f = function() { 
            /* good stuff */ 
            fTimeout = setTimeout(f,1000);
           }
fTimeout = setTimeout(f,1000); 
```

[也可以看看](http://weblogs.asp.net/bleroy/archive/2009/05/14/setinterval-is-moderately-evil.aspx)

# java - 如何安排每小时开始的任务

> ID：10204246
> 
> 赞同：15
> 
> 时间：2012-04-18T06:47:33.523
> 
> 标签：java, scheduled-tasks, scheduling

我正在开发一项服务，该服务假设每小时开始，准确地重复整点（下午 1:00、下午 2:00、下午 3:00 等）。

我尝试了以下操作，但有一个问题是我第一次必须在开始时准确地运行程序，然后这个调度程序会重复它。

```
ScheduledExecutorService scheduler = Executors.newSingleThreadScheduledExecutor();
scheduler.scheduleWithFixedDelay(new MyTask(), 0, 1, TimeUnit.HOURS); 
```

无论我何时运行程序，有什么建议可以重复我的任务吗？

问候， 伊姆兰

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-18T07:34:37.957

我也会为此建议使用[Quartz](http://www.quartz-scheduler.org/)。但是可以使用 initialDelay 参数使上面的代码在一小时开始时首先运行。

```
Calendar calendar = Calendar.getInstance();
ScheduledExecutorService scheduler = Executors.newSingleThreadScheduledExecutor();
scheduler.scheduleAtFixedRate(new MyTask(), millisToNextHour(calendar), 60*60*1000, TimeUnit.MILLISECONDS);

private static long millisToNextHour(Calendar calendar) {
    int minutes = calendar.get(Calendar.MINUTE);
    int seconds = calendar.get(Calendar.SECOND);
    int millis = calendar.get(Calendar.MILLISECOND);
    int minutesToNextHour = 60 - minutes;
    int secondsToNextHour = 60 - seconds;
    int millisToNextHour = 1000 - millis;
    return minutesToNextHour*60*1000 + secondsToNextHour*1000 + millisToNextHour;
} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2016-03-16T09:05:29.913

`millisToNextHour`krishnakumarp 的[答案](https://stackoverflow.com/a/10204932/423991)中的方法可以在 Java 8 中变得更加紧凑和直接，这将导致以下代码：

```
public void schedule() {
    ScheduledExecutorService scheduledExecutor = Executors.newSingleThreadScheduledExecutor();
    scheduledExecutor.scheduleAtFixedRate(new MyTask(), millisToNextHour(), 60*60*1000, TimeUnit.MILLISECONDS);
}

private long millisToNextHour() {
    LocalDateTime nextHour = LocalDateTime.now().plusHours(1).truncatedTo(ChronoUnit.HOURS);
    return LocalDateTime.now().until(nextHour, ChronoUnit.MILLIS);
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-04-18T06:52:52.993

如果你负担得起使用外部库，那么[Quartz](http://www.quartz-scheduler.org/)提供了非常灵活且易于使用的调度模式。例如`cron`，模式应该非常适合您的情况。下面是一个安排某个[Job](http://quartz-scheduler.org/api/2.1.0/org/quartz/Job.html)每小时执行的简单示例：

```
quartzScheduler.scheduleJob(
    myJob, newTrigger().withIdentity("myJob", "group")
                       .withSchedule(cronSchedule("0 * * * * ?")).build()); 
```

查看[教程](http://quartz-scheduler.org/documentation/quartz-2.x/tutorials/)和[示例](http://quartz-scheduler.org/documentation/quartz-2.x/examples/)，找到适合您口味的配方。他们还展示了如何处理错误。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-18T07:09:24.310

如果您在服务中使用spring，则可以直接使用基于注解的调度程序@Schedule注解，该注解将cron表达式作为参数或以毫秒为单位的延迟，只需将此注解添加到您要执行的方法上方，此方法将是执行。享受...........

# java - 如何将经度和纬度转换为点并在绘制多边形时使用这些点

> ID：10204248
> 
> 赞同：0
> 
> 时间：2012-04-18T06:47:48.330
> 
> 标签：java, sql-server, gis, latitude-longitude

我是 GIS 应用程序的新手，我有一个小问题。我正在尝试使用地理坐标绘制多边形，但我需要将这些坐标转换为点，然后才能使用它们绘制多边形。我不知道如何将这些坐标转换为用于多边形的点。我昨天花了所有时间寻找如何做到这一点，但我真的还是不明白。我尝试在 ms sql server 2008 中使用 geography 数据类型，但在检索多边形或转换后的坐标时找不到 java api。请帮助我提供有关如何执行此操作的示例代码。

非常感谢大家！！！

这是我的代码。'代码'

```
double earth=6371;
double focal=500;

double lat= 47.653 ;
double lon = -122.358  ;

double latitude = lat*Math.PI/180;
double longitude = lon*Math.PI/180;

double x = earth * Math.sin(latitude)*Math.cos(longitude);

double y = earth * Math.sin(latitude)*Math.sin(longitude);

double z = earth * Math.cos(latitude);

double projectedX = x*focal /(focal+z);

double projectedY = y * focal / (focal+z);

int magx = (int) Math.round(projectedX * 5); 
int magy = (int) Math.round(projectedY *5);

System.out.println ("MAG X : "+magx);
System.out.println ("MAG Y : "+magy); 
```

我只是将 d mag x 和 y 插入到我的多边形中，但什么也没有出现。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T08:48:33.607

*这是在 SQL Server 中从一组n*坐标创建和检索地理多边形的语法：

```
DECLARE @Polygon geography;
SET @Polygon = geography::STPolyFromText('POLYGON((Lon1 Lat1, Lon2 Lat2, ... Lonn Latn, Lon1 Lat1))', 4326); 
SELECT @Polygon; 
```

（这假设您使用的是相对于 WGS84 基准的地理坐标。如果您不知道这意味着什么，它们可能是。）

# javascript - 授予模块加载其他模块的权限

> ID：10204250
> 
> 赞同：3
> 
> 时间：2012-04-18T06:48:03.167
> 
> 标签：javascript, firefox, firefox-addon-sdk

我想在我的模块中包含工厂模式。我有一个`ServiceFactory.js`看起来像这样的模块：

```
exports.createService = function(serviceName, paramObj){
  return require('Services/'+serviceName).Service.new(paramObj);
}; 
```

该模块应按名称要求其他模块（服务）并创建一个实例。一般`Service.js`看起来是这样的：

```
const Base = require('base').Base;

exports.Service = Base.extend({
    getName: function(){
        return this.name;
    },
    invoke: function(){
        //do something
    },
}); 
```

所有其他服务都扩展了基础服务。我在“lib”的子文件夹“Services”中收集所有服务。当我现在使用`createService`我工厂的方法时，我收到如下错误：“模块：ServiceFactory ...无权加载Service / ...”

有没有办法授予`ServiceFactory`加载我的服务的权限，或者有没有其他方法可以实现我的目标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T07:31:33.280

附加组件 SDK 在打包附加组件时解决所有要求，它不会在运行时发生。我猜这主要是出于性能原因（模块可以从多个位置加载，在扩展运行时搜索这些位置可能很慢）但也有一个安全方面 - 即使模块受到损害（无意中运行代码它是从网页获得的），它仍然无法加载任何其他模块，尤其是`chrome`模块。但最终结果是：您无法动态决定要使用哪些模块，您只能加载源代码中明确需要的模块。

在您的情况下，解决方法是添加一个从未调用但具有所有必要`require()`调用以确保 SDK 解析它们的函数：

```
function dummy()
{
  require("Services/ServiceFoo");
  require("Services/ServiceBar");
  ...
} 
```

拥有此功能`ServiceFactor.js`将确保该`createService()`功能可以需要这些模块。

# linq - 给定 XElement - 按节点名称查找节点文本

> ID：10204252
> 
> 赞同：0
> 
> 时间：2012-04-18T06:48:14.147
> 
> 标签：linq, linq-to-xml, xelement, xmlnode

我已将 XML 文档加载到`XElement`

它看起来有点像这样：

```
<my:myFields xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:my="http://schemas.microsoft.com/office/infopath/2003/myXSD/2012-03-14T05:31:16" xmlns:xd="http://schemas.microsoft.com/office/infopath/2003" xml:lang="en-AU">
<my:header>
    <my:item1></my:item1>
    <my:item2></my:item2>
    <my:item3></my:item3>
</my:header>
<my:header2>
    <my:title1>Blah</my:title1>
    <my:title2>Zlib</my:title2>
    <my:title3>Bleep</my:title3>
</my:header2> 
```

我要做的就是在输入“节点名称”（即“title1”、“title2”、“title3”）的情况下搜索“节点文本”（即“Blah”、“Zlib”或“Bleep”）

我已经尝试过`xeData.Attribute("title1")`以及`xeData.Element("title1")`各种 linq 语句都没有成功。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T07:09:10.050

您需要考虑“标题”元素的命名空间。试试这个：

```
string titleText = xeData.Element(XName.Get("title1", "http://schemas.microsoft.com/office/infopath/2003/myXSD/2012-03-14T05:31:16")).Value; 
```

我在这里假设 xeData 是“标题”元素——如果不是，您必须先弄清楚如何选择它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T09:49:49.017

如果您想在命名空间中查找或创建节点，则使用`XNamespace`作为 LINQ to XML 一部分的对象会有所帮助。这是一个例子：

```
 XElement myFields = XElement.Load("../../XMLFile3.xml");
    XNamespace my = myFields.GetNamespaceOfPrefix("my");
    Console.WriteLine(myFields.Element(my + "header2").Element(my + "title1").Value); 
```

另请参阅[http://msdn.microsoft.com/en-us/library/bb387042.aspx](http://msdn.microsoft.com/en-us/library/bb387042.aspx)。

# jsf-2 - 根据 primefaces 数据表中其他列的值呈现值

> ID：10204253
> 
> 赞同：1
> 
> 时间：2012-04-18T06:48:16.740
> 
> 标签：jsf-2, primefaces

我在primefaces的数据表中显示一些值。

这是代码。

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:f="http://java.sun.com/jsf/core"      
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui">

    <h:head>
        <title>Custom Rendering Data Table Test</title>
    </h:head>
    <h:body>
        <p:layout fullPage="true">
            <p:layoutUnit position="center">
                <p:dataTable var="car" value="#{tableBean.mediumCarsModel}" selection="#{tableBean.selectedCar}" 
                id="carList" paginator="true" rows="10" editable="true">  

        <f:facet name="header">  
            In-Cell Editing  
        </f:facet>

        <p:column selectionMode="multiple" style="width:18px" />  

        <p:column headerText="User Name" style="width:100px">
        <p:graphicImage value="C:\raman\AMAP\POC\primefaces\JSF2.0HelloWorld\WebContent\images\rssLogo.gif"/>    
        <p:graphicImage value="C:\raman\AMAP\POC\primefaces\JSF2.0HelloWorld\WebContent\images\System.gif"/>    
            <p:cellEditor>  
                <f:facet name="output">  
                    <h:outputText value="#{car.username}" />  
                </f:facet>  
                <f:facet name="input">  
                    <p:inputText value="#{car.username}" style="width:100%"/>  
                </f:facet>  
            </p:cellEditor>  
        </p:column> 

        <p:column headerText="Model" style="width:125px">  
            <p:cellEditor>  
                <f:facet name="output">  
                    <h:outputText value="#{car.model}" />  
                </f:facet>  
                <f:facet name="input">  
                    <p:inputText value="#{car.model}" style="width:100%"/>  
                </f:facet>  
            </p:cellEditor>  
        </p:column>  

        <p:column headerText="Year" style="width:125px">  
            <p:cellEditor>  
                <f:facet name="output">  
                    <h:outputText value="#{car.year}" />  
                </f:facet>  
                <f:facet name="input">  
                    <p:inputText value="#{car.year}" style="width:100%" label="Year"/>  
                </f:facet>  
            </p:cellEditor>  
        </p:column>  

        <p:column headerText="Manufacturer" style="width:125px">  
            <p:cellEditor>  
                <f:facet name="output">  
                    <h:outputText value="#{car.manufacturer}" />  
                </f:facet>  
                <f:facet name="input">  
                    <h:selectOneMenu value="#{car.manufacturer}" >  
                        <f:selectItems value="#{tableBean.manufacturers}"  
                            var="man"   
                            itemLabel="#{man}"  
                            itemValue="#{man}" />  
                    </h:selectOneMenu>  
                </f:facet>  
            </p:cellEditor>  
        </p:column>  

        <p:column headerText="Color" style="width:125px">  
            <p:cellEditor>  
                <f:facet name="output">  
                    <h:outputText value="#{car.color}" />  
                </f:facet>  
                <f:facet name="input">  
                    <h:selectOneMenu value="#{car.color}" >  
                        <f:selectItems value="#{tableBean.colors}"  
                            var="color"   
                            itemLabel="#{color}"  
                            itemValue="#{color}" />  
                    </h:selectOneMenu>  
                </f:facet>  
            </p:cellEditor>  
        </p:column>  

        <p:column headerText="Options" style="width:100px">  
            <p:rowEditor />  
        </p:column>  

    </p:dataTable>  
            </p:layoutUnit>
        </p:layout>                        
    </h:body>
</html> 
```

现在，我必须读取年份的值，例如如果年份小于 1990 年，那么我必须显示 rsslogo 图像，否则显示系统图像。

请让我知道如何在primefaces中做到这一点......我是primefaces的初学者，仍处于学习阶段......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T09:21:09.257

使用条件渲染：

```
<p:graphicImage value="path/to/your/image1" rendered="#{car.year lt 1990}/>
<p:graphicImage value="path/to/your/image2" rendered="#{car.year ge 1990}/> 
```

用正确的路径替换`value`属性的内容（您不应使用问题中显示的绝对路径！！）。

关键字的`lt`意思是“小于”和`ge`“大于或等于”。

# marklogic - 超出时间限制，在 Markligic Cts:Search

> ID：10204256
> 
> 赞同：3
> 
> 时间：2012-04-18T06:48:22.293
> 
> 标签：marklogic

我的 marklogic 服务器中有大约 53,00,000 个文档，每个文档包含一条记录。

```
xquery version "1.0-ml";
  declare namespace pa = "http://www.contata.com/pa";  
  let $query :=  
         cts:or-query((  
            cts:element-word-query(  
              xs:QName("pa:name"), "SMITH"  
            ),  
            cts:element-word-query(  
              xs:QName("pa:address-1"),  ""   
            ),  
            cts:element-word-query(  
              xs:QName("pa:address-2"),  ""   
            ),
            cts:element-word-query(   
              xs:QName("pa:address-3"),  ""   
            ),  
             cts:element-word-query(  
              xs:QName("pa:city"),  ""   
            )  
                    )) return   

cts:search(fn:doc(),$query)[5100000 to 5300000] 
```

当我执行上述查询时，需要很长时间才能执行并给出以下错误

[1.0-ml] XDMP-EXTIME: cts:search(fn:doc(), cts:or-query((cts:element-word-query(xs:QName("pa:name"), "SMITH", ( "lang=en"), 1), cts:element-word-query(xs:QName("pa:address-1"), "", ("lang=en"), 1), cts:element-word -query(xs:QName("pa:address-2"), "", ("lang=en"), 1), ...))) -- 超过时间限制

但是当我执行`cts:search(fn:doc(),$query)[1000 to 2000]`它成功执行。

还有一个问题，如果我已经加载了所有文档，那么在从 RecordLoader Utility 加载后如何在它们上创建索引。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T15:23:38.150

查看“未过滤”选项，并考虑使用“搜索：搜索”。

您也可以增加时间限制，但可能不想这样做。使用过滤搜索获得第 500000 个结果需要检查 500000 个文档，这可能需要多达 500000 次磁盘读取。如果您的磁盘每秒可以管理 100 个，那就是 5000 秒。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T07:50:07.190

您正在显示 200.000 个搜索结果。尝试一次少显示。如果您使用查询控制台或 CQ 分析器，您会看到不是 cts:search 花费了这么多时间，而是获得了那些 200k 文档。

！

# php - 错误 503：服务不可用但 localhost 工作正常

> ID：10204257
> 
> 赞同：0
> 
> 时间：2012-04-18T06:48:28.433
> 
> 标签：php

我有一个简单的代码

```
<?php
    echo "Test Message";
?> 
```

该文件的名称是 test.php 当我使用 localhost/test.php 访问此代码时，这可以正常工作 我的计算机有一个本地网络 IP 114.122.23.31。当我尝试使用 114.122.23.31/test.php 访问它时，它显示：503 Service Unavailable 无法连接到服务器 114.122.23.31。我检查了 apache 访问日志并找到

127.0.0.1 - - [18/Apr/2012:12:00:08 +0530] "GET /test.php HTTP/1.1" 200 19 ---- 当我使用 localhost 访问它时。

127.0.0.1 - - [18/Apr/2012:11:58:30 +0530] "GET /favicon.ico HTTP/1.1" 200 18902 ----- 当我使用 IP 访问它时。请帮忙。PS：昨天还好好的。不知道今天发生了什么:-(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T11:56:31.843

我遇到了同样的问题，我无法通过 Xampp 启动 localhost，它显示错误 503。但我通过停止在 IIS 上使用端口 80 的服务解决了这个问题。跟着这些步骤：

1.  开始
2.  右键单击我的电脑
3.  点击管理
4.  单击服务和应用程序
5.  单击 Internet 信息服务 (IIS) 管理器
6.  在 Block IIS 上，找到 HTTP Redirect 和 HTTP Respond Header，右键单击停止该服务。
7.  再次尝试通过 Xampp 控制面板启动 Apache。

希望它有所帮助。

谢谢。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T06:52:18.407

可能是因为 dhcp 租约过期，你的 ip 从昨天开始改变了？
您的服务器是否配置为接受非本地主机 IP 上的连接？

# osx-lion - OS X LION：支持关于文本页面中的 URL 链接

> ID：10204258
> 
> 赞同：0
> 
> 时间：2012-04-18T06:48:37.657
> 
> 标签：osx-lion

我正在开发一个 Mac 应用程序，我需要在其中放置关于屏幕。在“关于”屏幕中有一些文本和 url 链接（电子邮件支持、网站）等要提供。我不知道如何实现接受文本以及 url 和电子邮件链接的视图。我试过 NsTextView，但它不会自动处理这个问题。我搜索了很多，但找不到任何解决方案。

有人可以帮我解决这个问题。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T07:29:26.547

Cocoa 的内置 About 面板将显示 Credits 文件，如果它存在于您的应用程序的资源中。这可以是 Credits.html、Credits.rtf 或 Credits.rtfd。这些文件格式中的任何一种都支持链接。如果文件中有链接，它们将显示为可点击。这还不够吗？

另外，`NSTextView`应该处理链接。但是，它不会自动解释 HTML 字符串。`NSAttributedString`相反，您从应用了属性的某个部分设置其内容`NSLinkAttributeName`。您可以在代码中手动设置它，也可以使用、或方法`NSAttributedString`之一从 HTML 或 RTF构造一个。`-initWithHTML:...``-initWithRTF:...``-initWithRTFD:...`

# c# - 在 wp7 中使用视频画笔应用相机效果

> ID：10204260
> 
> 赞同：0
> 
> 时间：2012-04-18T06:48:41.433
> 
> 标签：c#, windows-phone-7, xaml

我一直在玩一个关于如何使用链接[http://msdn.microsoft.com/en-us/library/hh202982(v=vs.92 ) 从 wp7 相机的实时视频刷提要创建灰度效果的示例).aspx](http://msdn.microsoft.com/en-us/library/hh202982(v=vs.92).aspx)。我想知道是否有人也知道如何创建其他效果，例如棕褐色、偏光、负片等。如果是这样，您能否指出任何可以让我创建此效果的网站或代码？请注意，我对 WP7 中的相机 API 相当陌生，因此任何帮助都会非常有益。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T09:13:24.463

您应该能够重写 ColorToGrey() 方法来实现您想要的效果。

一个快速的谷歌建议你可以做一个[棕褐色的效果](http://www.smokycogs.com/blog/image-processing-in-c-sharp-getting-that-old-time-effect-with-sepia/)或[负面](http://www.gutgames.com/post/Creating-Negative-Images-using-C.aspx)的。

其他提示 样本应该可以直接编辑。请记住设置视频画笔的来源（否则需要很长时间才能弄清楚发生了什么 - 我这样做了）。相机以横向模式安装，因此您可能需要旋转它以使其进入正确的方向。

# android - 自定义适配器 getView 中的 NullPointerException

> ID：10204262
> 
> 赞同：6
> 
> 时间：2012-04-18T06:48:46.037
> 
> 标签：android, nullpointerexception, listadapter

我正在为具有自定义列表的 ListView 编写自定义适配器。

显然，我必须编写`getView`函数。所以这是我的代码：

```
/*1*/ public View getView(int position, View convertView, ViewGroup parent) {
/*2*/    View vi = convertView;
/*3*/    if (convertView == null)
/*4*/        vi = inflater.inflate(R.layout.result_list_item, null);
/*5*/
/*6*/    TextView title = (TextView) vi.findViewById(R.id.tvTitle);
/*7*/    TextView subtitle = (TextView) vi.findViewById(R.id.tvSubTitle);
/*8*/    ImageView image = (ImageView) vi.findViewById(R.id.imageView1);
/*9*/
/*10*/   title.setText(data.get(position).getDescription().toString());
/*11*/   subtitle.setText(data.get(position).getDate().toString());
/*12*/   String img = "http://someLink/" + data.get(position).getId() + "a_t.jpg";
/*13*/   imageLoader.DisplayImage(img, image);
/*14*/   return vi;
/*15*/ } 
```

但是，我注意到在第 6 行，程序因 NullPointer 异常而崩溃。

这是我的崩溃报告：

```
04-18 09:33:32.745: E/AndroidRuntime(2209): FATAL EXCEPTION: main
04-18 09:33:32.745: E/AndroidRuntime(2209): java.lang.NullPointerException
04-18 09:33:32.745: E/AndroidRuntime(2209):     at com.package.mojo.NoPicAdapter.getView(NoPicAdapter.java:46)
04-18 09:33:32.745: E/AndroidRuntime(2209):     at android.widget.AbsListView.obtainView(AbsListView.java:1554)
04-18 09:33:32.745: E/AndroidRuntime(2209):     at android.widget.ListView.measureHeightOfChildren(ListView.java:1264)
04-18 09:33:32.745: E/AndroidRuntime(2209):     at android.widget.ListView.onMeasure(ListView.java:1175)
04-18 09:33:32.745: E/AndroidRuntime(2209):     at android.view.View.measure(View.java:8366)
04-18 09:33:32.745: E/AndroidRuntime(2209):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3138)
04-18 09:33:32.745: E/AndroidRuntime(2209):     at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1017)
04-18 09:33:32.745: E/AndroidRuntime(2209):     at android.widget.LinearLayout.measureVertical(LinearLayout.java:386)
04-18 09:33:32.745: E/AndroidRuntime(2209):     at android.widget.LinearLayout.onMeasure(LinearLayout.java:309)
04-18 09:33:32.745: E/AndroidRuntime(2209):     at android.view.View.measure(View.java:8366)
04-18 09:33:32.745: E/AndroidRuntime(2209):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3138)
04-18 09:33:32.745: E/AndroidRuntime(2209):     at android.widget.FrameLayout.onMeasure(FrameLayout.java:250)
04-18 09:33:32.745: E/AndroidRuntime(2209):     at android.view.View.measure(View.java:8366)
04-18 09:33:32.745: E/AndroidRuntime(2209):     at android.widget.LinearLayout.measureVertical(LinearLayout.java:531)
04-18 09:33:32.745: E/AndroidRuntime(2209):     at android.widget.LinearLayout.onMeasure(LinearLayout.java:309)
04-18 09:33:32.745: E/AndroidRuntime(2209):     at android.view.View.measure(View.java:8366)
04-18 09:33:32.745: E/AndroidRuntime(2209):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3138)
04-18 09:33:32.745: E/AndroidRuntime(2209):     at android.widget.FrameLayout.onMeasure(FrameLayout.java:250)
04-18 09:33:32.745: E/AndroidRuntime(2209):     at android.view.View.measure(View.java:8366)
04-18 09:33:32.745: E/AndroidRuntime(2209):     at android.view.ViewRoot.performTraversals(ViewRoot.java:847)
04-18 09:33:32.745: E/AndroidRuntime(2209):     at android.view.ViewRoot.handleMessage(ViewRoot.java:1868)
04-18 09:33:32.745: E/AndroidRuntime(2209):     at android.os.Handler.dispatchMessage(Handler.java:99)
04-18 09:33:32.745: E/AndroidRuntime(2209):     at android.os.Looper.loop(Looper.java:123)
04-18 09:33:32.745: E/AndroidRuntime(2209):     at android.app.ActivityThread.main(ActivityThread.java:3691)
04-18 09:33:32.745: E/AndroidRuntime(2209):     at java.lang.reflect.Method.invokeNative(Native Method)
04-18 09:33:32.745: E/AndroidRuntime(2209):     at java.lang.reflect.Method.invoke(Method.java:507)
04-18 09:33:32.745: E/AndroidRuntime(2209):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:847)
04-18 09:33:32.745: E/AndroidRuntime(2209):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:605)
04-18 09:33:32.745: E/AndroidRuntime(2209):     at dalvik.system.NativeStart.main(Native Method) 
```

当然，布局和项目本身存在......

有什么想法吗？

更新：当我在调试时查看变量时，我发现它`vi`没有被夸大（`vi == null`），为什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-18T06:53:49.633

改变这个：

```
vi = inflater.inflate(R.layout.result_list_item, null); 
```

对此：

```
vi = inflater.inflate(R.layout.result_list_item, parent, false); 
```

* * *

你的适配器应该是这样的：

```
public class NoPicAdapter extends ArrayAdapter<NewAndCalendar> {

    private ArrayList<NewAndCalendar> data;
    private Activity mActivity;
    private LayoutInflater inflater = null;

    public NoPicAdapter(Activity a, ArrayList<NewAndCalendar> d) {
        super(a, R.layout.no_pic_list_item, d);
        mActivity = a;
        data = d;
        inflater = (LayoutInflater) mActivity
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    }

    @Override
    public View getView(int position, @Nullable View convertView, ViewGroup parent) {
        View vi = convertView;
        if (vi == null)
            vi = inflater.inflate(R.layout.no_pic_list_item, parent, false);
        TextView title = (TextView) vi.findViewById(R.id.noPicTitle);
        TextView subtitle = (TextView) vi.findViewById(R.id.noPicSubtitle);

        title.setText(data.get(position).getmTitle());
        subtitle.setText(data.get(position).getmPubDate());

        return vi;
    }

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T07:05:01.553

尝试这个

> vi = LayoutInflater.from(mActivity).inflate(R.layout.result_list_item, null);

如果 mActivity 是从创建此适配器对象的活动传递的活动上下文。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T06:56:43.900

你在初始化充气机吗？如果不初始化它。

```
inflater = getLayoutInflater(); 
```

或者

```
 inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE); 
```

# git - 拒绝 git commit 的消息与之前的提交相同？

> ID：10204264
> 
> 赞同：2
> 
> 时间：2012-04-18T06:48:57.253
> 
> 标签：git

因此，我偶尔会犯错误，即按下 up 键的次数太多或太少，最终导致我的 repo 中出现额外的提交，然后我必须处理这些提交`git commit -am "changed foo"`。`./foo_test`是否可以让 git 拒绝其消息与先前提交的提交的消息匹配的任何提交？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-18T06:53:31.347

与其直接拒绝它，为什么不直接撤消它呢？

```
# Leaves all changes as 'changes to be committed', but
# uncommits the most recent commit
git reset --soft HEAD~
# Leaves all changes as changed working copy files (ie,
# unstages them as well)
git reset HEAD~
# Lets you edit the most recent commit message 
git commit --amend
# Lets you do bulk surgery on your revision history, deleting
# or merging dozens of commits in one operation
git rebase -i <last good commit, eg origin/mainline> 
```

如果您真的希望这被彻底拒绝，请查看`.git/hooks/prepare-commit-msg`- 您可以在此处添加一个脚本以获取最新的提交消息（通过`git cat-file commit HEAD`）并将其与传入的提交消息进行比较。如果它们匹配，`exit 1`则中止提交。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T06:58:17.030

使用提交后挂钩脚本进行检查。

如果相同，则 git reset --mixed HEAD~1

# python - 需要一个python认证/授权框架

> ID：10204266
> 
> 赞同：6
> 
> 时间：2012-04-18T06:49:03.853
> 
> 标签：python, security, authentication, authorization

我正在编写一个需要身份验证/授权的 Web 应用程序。也就是说，这个网络应用程序将允许用户登录网站并访问匿名用户无法访问的材料。不幸的是，Flask 没有内置的身份验证/授权系统。专家们强烈反对推出自定义系统，所以我不想这样做。是否有一个好的、成熟的身份验证/授权框架可以用于我的应用程序？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T06:56:53.863

看看[**Flask-Auth**](http://packages.python.org/Flask-Auth/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T06:55:22.747

[Fedora Account System](https://fedorahosted.org/fas/)是一个可扩展的基于 JSON 的 authnz 提供程序。[python-fedora](https://fedorahosted.org/python-fedora/)是一个模块，它为一些 Web 框架提供 FAS 身份验证插件，以及用于与之通信的原始 Python 模块。

# macos - Mac 上的 flash cookie 存储在哪里？

> ID：10204275
> 
> 赞同：3
> 
> 时间：2012-04-18T06:49:50.200
> 
> 标签：macos, actionscript-3, flash, apache-flex, air

Mac 上的 flash cookie 存储在哪里？我在谷歌搜索了这个问题。有人说 Flash cookie 是一个 .sol 文件，存储在文件夹 /User's Home Folder/Library/Preferences/Macromedia/Flash Player/ 中。但我在我的 Mac 上找不到这个文件/文件夹。它在哪里？有人可以告诉我如何找到它。谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-18T06:54:09.497

它们存储在 中`~/Library/Preferences/Macromedia/Flash Player/#SharedObjects/<some random string>/`，然后您将拥有每个域名的子文件夹。对于谷歌浏览器，路径是`~/Library/Application Support/Google/Chrome/Default/Pepper Data/Shockwave Flash/WritableRoot/#SharedObjects/<some random string>/`。

请注意，在 Mac OS X Lion 上，Library 文件夹是隐藏的，您需要使用 Finder 中的“转到”菜单或通过终端打开它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T06:57:33.877

如果您使用 Mac OS X 10.7 并且您的整个库文件夹被隐藏，请参阅：[http ://reviews.cnet.com/8301-13727_7-20082044-263/os-x-lion-where-did-my-library-go /](http://reviews.cnet.com/8301-13727_7-20082044-263/os-x-lion-where-did-my-library-go/)

# c# - 循环类引用不好的做法？

> ID：10204277
> 
> 赞同：0
> 
> 时间：2012-04-18T06:50:00.437
> 
> 标签：c#, oop, dependencies

最近有人告诉我如何以 1 类调用 2 类调用 1 类的形式循环引用被认为是非常糟糕的做法，我就是无法理解这一点。我的意思是，如果这些课程在 2 个不同的项目中，我完全理解问题所在，但如果它们在同一个项目中，那会很糟糕吗？在某些情况下......你究竟是如何防止这种情况发生的？

例如：我有某种服务器。客户端连接到它，客户端从套接字派生或持有它，负责网络内容以及帐户ID等一些信息。当有新内容时，该客户端调用数据包处理程序，现在数据包处理程序需要来自客户端的信息，并且必须将信息发回。我将客户端传递给数据包处理程序，因此它可以调用它的发送函数等。

担心这个的人认为这是上面提到的不好的做法，并试图根本不这样做，尽管我很少看到服务器，尤其是大型服务器，将所有数据包处理保留在客户端类中。此外，您可能会比处理程序更进一步，并调用更多类。将所有内容保留在客户端内部是一团糟。那么……*这*真的是不好的做法吗？

如果是，人们将如何绕过它？要完成此操作，您需要在 Client 中或多或少复杂的对象集合，您可以将其传递下来，而无需再次调用 Client 的函数......

就像我说的，我无法真正解决这个“问题”。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-18T07:28:38.123

当人们谈论循环引用时，他们通常会谈论项目/dll 引用。当涉及到解析引用时，这些都是有问题的，并且 Visual Studio 不允许您添加循环引用。

但是你指的不是项目结构，而是架构，这里的事情有点复杂。类相互调用本身并没有错。事实上，这在 .NET 中的回调和事件等功能的设计中是隐含的——当您注册到一个事件时，您实际上是在调用一个类，该类稍后将使用事件处理程序回调您。

但是，这种形式的循环调用是相对解耦的。服务器没有对客户端的显式引用，而只有被调用的订阅客户端列表。如果您没有这样做，而是让数据包处理程序，例如，持有对客户端的显式引用，那么这两个类将紧密耦合 - 数据包处理程序依赖于客户端的特定实现，反之亦然。

为什么这很糟糕？在我看来，这违反了关注点分离原则，这是编程中最基本的概念之一。客户端应该知道如何处理客户端操作，数据包处理程序应该处理数据包操作，两者都不应该知道另一个是如何工作的，并且只能通过定义良好的特定接口进行通信。

让我们采取一个非常精简的假设情况，该情况基于您的 OP，具有循环引用：客户端调用数据包处理程序的`Send()`方法。数据包处理程序现在启动连接，然后发现它需要用户名/密码。它调用客户端上的一个方法来获取它，然后将其发送到服务器，获取响应，然后回调客户端返回它。

在这种情况下，数据包处理程序现在绑定到客户端的实现。它要求客户端有一个 GetCredentials() 方法和一个 MessageReceived 方法来回调它。现在想象一个更加解耦的场景：

客户端首先注册处理程序的 ResponseReceived 事件。现在客户端调用数据包处理程序的 Send() 方法。数据包处理程序需要身份验证，所以它失败了——它抛出一个异常或返回一个错误代码，说“无法连接”。客户端收到此响应，并再次调用，这次使用 Send(username, password) 方法。它成功，获得响应，并引发 ResponseReceived 事件，将响应发送给订阅它的任何人。

这允许在其他上下文中从其他客户端重用数据包处理程序。它允许在内部对客户端或处理程序进行更改，而对其他组件的影响较小。它使代码更简单、更容易维护。这很好。:)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-18T07:29:19.103

在某些情况下，循环类引用一点也不坏。总是存在实例化问题（鸡或蛋）。永远记住，对象之间已经存在两种通信方式。您可以通过调用一个在有新消息时返回的函数来让客户端等待下一条消息。

但这是你应该停下来思考的地方。特别是在以下情况下（还有更多，但这些都在我的脑海中）：

*   当你通知一个班级时，一些动作已经发生**->**让它成为一个事件。
*   当它是一对一的关系时**->**是否应该将类型合并为一个。
*   当您的类扩展另一个的功能时**->**从它继承而不是传递引用。

在您的情况下，客户端 <-> 数据包处理程序。我可能不会在那里保留循环引用。我可能会为这两个类编写一个控制器，作为它们之间信息的代理。我也不会将帐户 ID 存储在客户端对象中。这有点违背我喜欢坚持的单一责任原则。我可能会得到这样的结果：

*   客户端 -> 套接字（负责网络的东西）
*   ClientHandler（负责控制流程）
    *   客户
    *   包处理程序
    *   附加信息
*   包处理程序

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-18T09:48:27.190

同一个*包*中的类应该被认为是高度内聚的（假设你的包结构是正确的！）并且可以有更紧密的耦合。在包中，循环关系（如果需要）是可以的，但将受益于基于*特定接口*的设计（如以前的海报所述）。

*跨包边界*，内聚自然较低，耦合应尽可能低：绝对*没有*循环关系。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T07:03:27.690

You can try to extract the functionalities that A calls on B and the ones that B calls on A and then encapsulate them in a Class Library C, that the other libraries can invoke without problems. Obviously, C mustn't have reference neither to A nor B.

# coffeescript - 我应该如何在咖啡脚本中链接函数调用

> ID：10204281
> 
> 赞同：16
> 
> 时间：2012-04-18T06:50:24.863
> 
> 标签：coffeescript

这个咖啡代码

```
obj
  .func1()
  .func2() 
```

将导致

```
obj.func1().func2(); 
```

这项工作发现。

但是当我输入这个

```
obj
  .func1 "aaa"
  .func2 "bbb" 
```

这将导致

```
obj.func1("aaa".func2("bbb")); 
```

我必须这样输入

```
obj
  .func1('aaa')
  .func2('bbb') 
```

导致 javsscript

```
obj.func1('aaa').func2('bbb'); 
```

当咖啡脚本中的链功能时，有没有办法省略括号？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-12-19T10:05:03.400

这个问题刚刚在[这里](https://github.com/jashkenas/coffee-script/issues/1407)修复。

因此，例如：

```
obj
 .func1 "aaa"
 .func2 "bbb" 
```

将被编译为

```
obj.func1("aaa").func2("bbb"); 
```

您现在可能需要在 npm 中使用 master 分支的最新版本：

```
npm install -g http://github.com/jashkenas/coffee-script/tarball/master 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-04-18T07:57:00.577

暂时没办法。正在进行关于启用它的讨论：

*   [https://github.com/jashkenas/coffee-script/issues/1407](https://github.com/jashkenas/coffee-script/issues/1407)
*   [https://github.com/jashkenas/coffee-script/issues/1495](https://github.com/jashkenas/coffee-script/issues/1495)

# velocity - [ 和 ] 之间的速度参数不起作用

> ID：10204285
> 
> 赞同：0
> 
> 时间：2012-04-18T06:50:29.403
> 
> 标签：velocity

我编写了如下 vm 文件中间的代码。

```
 #foreach($column in $columnList)
    char        $column.getComponentName()[$column.getComponentLen()];                    
    #end 
```

结果

```
char        $column.getComponentName()[$column.getComponentLen()]; 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T15:22:34.707

括号语法仅适用于 Velocity 1.7+，在此之前您必须调用 .get()

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T07:21:24.477

使用[正式的参考符号](https://velocity.apache.org/engine/releases/velocity-1.5/user-guide.html#formalreferencenotation)。也就是说，`{...}`围绕参考：

```
#foreach($column in $columnList)
char        ${column.getComponentName()}[${column.getComponentLen()}];
#end 
```

# c# - 如何使用 C# 正确解析 RAW(Raw Ip) 数据包？

> ID：10204289
> 
> 赞同：2
> 
> 时间：2012-04-18T06:50:59.357
> 
> 标签：c#, pcap, sharppcap, pcap.net

我需要用 C# 解析在 Wireshark 中生成的 pcap 文件。当然，它可以用wireshark打开并按预期显示所有数据包。

我曾尝试使用我在网上找到的两个流行的库（Pcap.Net 和 SharpPcap 的 Packet.net），但都不起作用。

> Pcap.Net 似乎无法解析原始 IP 数据包。我可以从调试器中看到 DataLink 是“RAW (Raw IP)”，当我在调试器中查询其他属性时，我得到几个 `System.NotSupportedException`s 说“PcapDataLink 12 - RAW (Raw IP) is unsupported”

Packet.net 但在尝试解析同一文件时也有类似的错误。

我很惊讶这两个库都对此感到窒息。

我想知道我是否对这些库做错了，因为这是我尝试的第一个 pcap 文件，而且我在看似简单的数据包上遇到错误。

是否有另一个库支持原始 IP 数据包？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T23:27:38.857

你说得对，[Pcap.Net](http://pcapdot.net)不支持它。

我刚刚提交了一个更改集来添加对此的支持，因此下一个版本的 Pcap.Net 将支持内置的此类数据包。

更多细节在[Pcap.Net 论坛的相关讨论中](http://pcapdotnet.codeplex.com/discussions/348962)。

# android - 将时间转换为毫秒并找出 java 或 android 中的时间段

> ID：10204291
> 
> 赞同：0
> 
> 时间：2012-04-18T06:51:02.990
> 
> 标签：android, datetime

我已经像这样输入了更早的时间段，2012-01-18-11-42-24 在数据库中，所以如何将这个时间转换为毫秒，我很困惑，我尝试了很多方法但无法得到这个时间以毫秒为单位。

我的最终目标是找出时间段 2012-04-18-11-42-24 时间和当前时间。请给出这样的想法，如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T07:06:46.753

请查看[DateFormat](http://developer.android.com/reference/java/text/DateFormat.html)和[SimpleDateFormat](http://developer.android.com/reference/java/text/SimpleDateFormat.html)类。他们有一个`parse(String string)`方法可以从它的表示中给你一个`Date`对象`String`。然后，您可以使用`getTime()`方法以毫秒为单位获取时间并进行比较。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T07:03:50.800

尝试这个，

```
public long convertDateToMillis(int day, int month, int year, int hour, int minute)
{
       Calendar c = Calendar.getInstance();
       c.set(year, month, day, hour, minute, 00);    
       return c.getTimeInMillis();    
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T07:12:35.483

```
 SimpleDateFormat outputFormat = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss"); 
 Date c_date=new Date(); //current date 
 Date saved_date=(Date)outputFormat.parse("2012-01-18-11-42-24");   //saved date
 long diffInMs = c_date.getTime() -saved_date.getTime();  //diff between two in milisecond
 long diffInSec = TimeUnit.MILLISECONDS.toSeconds(diffInMs);  //millisecond to second convertion 
```

您可以使用与 saved_date 相同的第二个日期而不是当前日期，并且以相同的方式查找两个日期之间的时间段

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T07:18:05.220

***使用此代码以毫秒为单位获取时间***

```
Date  date1 = new Date(datepicker.getYear() - 1900, datepicker.getMonth(), datepicker.getDayOfMonth(), timepicker.getCurrentHour()*3600000, timepicker.getCurrentMinute()*60000);
Log.i(TAG, date1.toString()); 
```

# jakarta-ee - 如何确保 pjl-comp-filter 与 icefaces 1.8 一起正常工作？

> ID：10204292
> 
> 赞同：1
> 
> 时间：2012-04-18T06:51:03.307
> 
> 标签：jakarta-ee, websphere, gzip, icefaces-1.8

我在 IBM 上有一个 icefaces 1.8 Web 应用程序，我正在使用 pjl-comp-filter 来压缩响应，在将压缩器添加到应用程序后，它似乎没有任何区别，我如何确保压缩器正常工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T16:29:00.507

你添加过滤器了`web.xml`吗？

您应该添加过滤器和过滤器映射。它应该看起来像这样：

```
 <filter>
          <filter-name>CompressingFilter</filter-name>
          <filter-class>com.planetj.servlet.filter.compression.CompressingFilter</filter-class>
   </filter>
   <filter-mapping>
          <filter-name>CompressingFilter</filter-name>
          <url-pattern>/*</url-pattern>
   </filter-mapping> 
```

# .net - 执行程序时出现异常ac#程序

> ID：10204294
> 
> 赞同：0
> 
> 时间：2012-04-18T06:51:09.267
> 
> 标签：.net, visual-studio, com-interop

我有一个程序是.net。当我执行程序时出现此异常。程序应该与财务打印机通信。

> 由于以下错误，检索具有 CLSID {741F1E1B-0D59-4F59-A775-3E1B13721638} 的组件的 COM 类工厂失败：80040154 未注册类（HRESULT 异常：0x80040154 (REGDB_E_CLASSNOTREG)）。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using FiscPrinter = FiscPrnSys.IFiscPrnIface;
using System.Runtime.InteropServices;
public class Class1
{
    public List<String> salesITems = new List<String>();
    public String user;
    public String shop;
    public double total;
    public double subtotal;
    public String tax;
    public short data = (short) 8;
    public short parity = (short)0;
    public short stopbit = (short)1;

    public void PrintBon()
    {
        FiscPrnSys.IFiscPrnIface FiscPrinter = new FiscPrnSys.FiscPrnIface();     (this     where the program is bringing this exemption)
        FiscPrinter.Connect("COM2", 9600, data, parity, stopbit);
        FiscPrinter.TestPrinter((short)48, "1,0,1", "HELLO");
        FiscPrinter.Sale("TEST ITEM 1", "A", 2, 2, 0);
        FiscPrinter.Sale("TEST ITEM 1", "A", 2, 2, 0);
        FiscPrinter.Sale("TEST STOCK ITEMS ZERO VAT", "B", 2, 2, 0);
        FiscPrinter.Sale("Cooking Fat Always Ultra", "B", 2, 2, 0);
        FiscPrinter.PrintFiscalText("TEST STOCK ITEMS VATABLE"); 
        FiscPrinter.Sale("001000124", "A", 2, 2, 0);
        FiscPrinter.PrintFiscalText("Kimbo 1 Kg");
        FiscPrinter.Sale("598699484", "A", 5, 5, 0);
        FiscPrinter.PrintFiscalText("Tily Cooking Fat");
        FiscPrinter.Sale("484949404", "A", 2, 2, 0);
        FiscPrinter.Sale("Always ULtra", "A", 10, 2, 0);
        FiscPrinter.Disconnect();
    }
    public void setUser(String user)
    {
        this.user = user;
    }
    public void setShop(String shop)
    {
        this.shop = shop;
    }
    public void addSaleItem(String item)
    {
        salesITems.Add(item);
    }
    public void setDouble(double pTotal)
    {
        this.total = pTotal;
    }
    public void setSubTotal(double sTotal)
    {
        this.subtotal = sTotal;
    }
    public void setTax(String pTax)
    {
        this.tax = pTax;
    }
 } 
```

这个类被另一个类调用，它是

```
 using System;
 using System.Collections.Generic;
 using System.Linq;
 using System.Text;
 using IncortexLibrary;

 class Program
 {
    static void Main(string[] args)
    {
        Class1 printer = new Class1();
        printer.PrintBon();
    }
 } 
```

输出：

```
 Unhandled Exception: System.Runtime.InteropServices.COMException: Retrieving the
 COM class factory for component with CLSID {741F1E1B-0D59-4F59-A775-3E1B1372163
8} failed due to the following error: 80040154 Class not registered (Exception f
rom HRESULT: 0x80040154 (REGDB_E_CLASSNOTREG)).
 at System.RuntimeTypeHandle.CreateInstance(RuntimeType type, Boolean publicOn
 ly, Boolean noCheck, Boolean& canBeCached, RuntimeMethodHandleInternal& ctor, Bo
  olean& bNeedSecurityCheck)
  at System.RuntimeType.CreateInstanceSlow(Boolean publicOnly, Boolean skipChec
  kThis, Boolean fillCache)
  at System.RuntimeType.CreateInstanceDefaultCtor(Boolean publicOnly, Boolean s
 kipVisibilityChecks, Boolean skipCheckThis, Boolean fillCache)
  at System.Activator.CreateInstance(Type type, Boolean nonPublic)
  at System.Activator.CreateInstance(Type type)
 at IncortexLibrary.Class1.PrintBon() in C:\Documents and Settings\woodley-who
 lesalers\My Documents\bst project\Projects\IncortexLibrary\IncortexLibrary\Class
 1.cs:line 29
    at ConsoleApp.Program.Main(String[] args) in C:\Documents and Settings\woodle
 y-wholesalers\My Documents\bst project\Projects\ConsoleApp\ConsoleApp\Program.cs
 :line 15 
```

这让人头疼。我已经在 system32 中注册了文件 .dll 文件，但它仍然给我带来了问题。这是否意味着我以错误的方式初始化程序。打印机显示为空。请帮助，因为我有试图浏览网络，但没有得到解决方案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T06:55:49.500

这通常是由于权限问题在注册表中设置了完全控制

[http://support.software602.com/kb/view.aspx?articleID=987](http://support.software602.com/kb/view.aspx?articleID=987)

# java - 如何检测用户是否在主屏幕上触摸设备小部件？

> ID：10204304
> 
> 赞同：2
> 
> 时间：2012-04-18T06:51:51.497
> 
> 标签：java, android, opengl-es

从我的安卓模拟器看下面的截图：

[http://imageshack.us/photo/my-images/190/image1zqu.png/](http://imageshack.us/photo/my-images/190/image1zqu.png/)

这是主屏幕的屏幕截图。观察红框内的物体。那是设备的小部件。

描述：
我创建了一个动态壁纸应用程序，它在屏幕上有对象，用户可以通过触摸屏幕上的任何区域作为目标来移动对象。问题是如果用户触摸了设备小部件，即。浏览器按钮，对象将移动到按钮小部件以及打开浏览器。所以我想知道如何检测用户是否正在触摸设备的小部件？

我的目的是防止当用户在屏幕上触摸设备的小部件时对象移动。

注意：我使用 AndEngine 库开发了应用程序，但也欢迎使用 android openGL ES 或任何其他解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T22:12:52.937

您可以为您的小部件的父布局注册一个`pending intent`广播您的小部件`AppWidgetManager`并将指定的额外内容添加到它的意图中，因此当用户触摸您的小部件时，将调用`onReceive`AppWidgetManager 的方法。在 onReceive 方法中，您可以从收到的意图中获取额外内容并检测到它被调用触摸或否。

有关更多详细信息，您可以查看这些页面：
[Detect in android widget a touch event from down to up (or the inverse)](https://stackoverflow.com/questions/8476362/detect-in-android-widget-a-touch-event-from-down-to-up-or-the-inverse)
[Developing-android-home-screenwidgets](http://blog.doityourselfandroid.com/2011/05/24/developing-android-home-screenwidgets/)

# eclipse - Eclipse Perl 远程执行

> ID：10204306
> 
> 赞同：7
> 
> 时间：2012-04-18T06:52:02.070
> 
> 标签：eclipse, perl, epic

这个问题更多的是与eclipse有关而不是编程。但是任何使用过 eclipse 的程序员都应该对我有所帮助。这是我的要求：

*   我在我的 Windows 7 PC 上安装了 eclipse（带有 EPIC）。我没有在 Windows PC 上运行任何 perl 二进制文件，我也不打算安装一个。
*   我在远程 Linux 机器上安装了 perl 和必要的模块。
*   所以，我的问题是，**我可以在我的 windows 7 PC 上使用 eclipse 在远程 Linux 机器上编写/执行/调试 perl 程序**吗？

我已经浏览过以下文章：

[http://www.epic-ide.org/guide/ch06s02.php#N10812](http://www.epic-ide.org/guide/ch06s02.php#N10812)

[在远程项目/文件上运行 Eclipse EPIC Perl 插件](https://stackoverflow.com/questions/8405594/run-eclipse-epic-perl-plugin-on-remote-project-files)

但我无法正确解释上述链接中提供的信息。换句话说，它对我不起作用，或者我的用例与这些链接中描述的不同。

那么，如上所述按照我的要求配置 eclipse 是否可行？如果是，那么请向我提供有关如何实现它的指导。如果没有，那么是否还有其他方法可以实现相同的目标。我很确定一定有人遇到过类似的情况。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-16T09:32:38.960

所以，我在很长一段时间后让它工作，如下所示。我有点学习Eclipse。所以把信息贴在这里，这样我就不会再忘记了:)

1.  在 Windows 上下载 Eclipse

2.  无需安装任何 Windows Perl 二进制文件，如 activestate、strawberry ...等

3.  为 Perl 安装 EPIC 插件：[http ://www.epic-ide.org/guide/ch01s02.php](http://www.epic-ide.org/guide/ch01s02.php)

4.  确保安装了远程系统资源管理器：文件->其他->远程系统资源管理器。

5.  如果在上面的位置没有找到 RSE，那么它没有安装，你需要安装它：[http ://help.eclipse.org/galileo/index.jsp?topic=/org.eclipse.rse.doc.user /gettingstarted/g1installing.html](http://help.eclipse.org/galileo/index.jsp?topic=/org.eclipse.rse.doc.user/gettingstarted/g1installing.html)

6.  打开远程系统资源管理器透视图（窗口->打开透视图->其他->远程系统资源管理器）

7.  创建与 Linux 框的连接：在 RSE 透视图中，单击看起来像倒“T”的图标

8.  按照向导并提供必要的信息。（在此向导中，您必须从 DStore、ssh 和 FTP 中选择几个问题）

9.  我到处都选择了 ssh，因为我不知道 DStore 是什么

10.  完成后，您应该会在左侧看到新连接

11.右键单击“SSH终端”并单击“连接/启动终端”

1.  提供 Linux 用户的密码，您将在下面获得一个 shell。这是你的 Linux 服务器的 ssh shell，你可以像使用 PuTTy 一样使用它。

2.  现在，在左侧，展开您的服务器，您将可以浏览 Linux 服务器的目录结构。您可以创建一个新的 Perl 文件，然后开始编写脚本

3.  在这里，EPIC 插件将从 IDE 的角度为您提供帮助（语法颜色、自动完成......等）

4.  保存文件。

5.  现在，为了执行它，请转到您在上述步骤中打开的 SSH shell 并运行“perl filename.pl”。它会给你输出。

我喜欢这种方法。通过这种方式，您可以在远程 Linux 服务器上运行任何脚本（Perl、python、shell 等），并且可以使用 eclipse 的强大功能来帮助您编写/编辑代码。无需在本地 Windows 机器上安装任何 Perl/python 二进制文件。

谢谢。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T08:26:30.370

1.  检查您是否可以使用 eclipse 在您的 win 框中编写一个简单的 perl 脚本。不需要跑。这是为了确保您可以在没有 perl 解释器的情况下使用史诗。
2.  将所有与 Project 相关的 Perl 源代码从远程机器复制到本地机器。
3.  创建一个 Perl 项目，而不是使用默认位置将其指向本地框中源的位置。
4.  现在您可以浏览项目文件。
5.  单击 Debug->RemotePerlDebug，从这里开始按照您引用的第一个 url 中给出的步骤进行操作。[史诗IDE](http://www.epic-ide.org/guide/ch06s02.php#N10812)

# c# - 如何在 MVC3 中访问私有属性

> ID：10204313
> 
> 赞同：0
> 
> 时间：2012-04-18T06:52:28.283
> 
> 标签：c#, .net, asp.net-mvc-3, protected, access-specifier

我正在使用 Mvc3 和 NHibernate 我有一个名为 Activation code 的类，如下所示：

```
public virtual int LoginAccountId { get; set; }
protected virtual string ActivatedCode { get; set; }
protected virtual DateTime ActivationDate { get; set; } 
```

我想在控制器中访问此字段

```
ActivationCode code=new ActivationCode();
code.ActivatedCode="abc"; 
```

但无法得到它。为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T06:54:17.213

您不能从包含它们的类外部或派生类访问受保护的成员。如果您不更改成员的可见性，从 ActivationCode 类外部访问它的唯一方法是使用反射，但这绝对是可怕的。我建议将其公开或公开允许您修改其值的公共方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T06:54:36.990

该属性`protected`意味着您只能从类内部或它的一个继承内部访问它。

```
public class ActivationCode{
    public virtual int LoginAccountId { get; set; }
    protected virtual string ActivatedCode { get; set; }
    protected virtual DateTime ActivationDate { get; set; }

    public void Foo(){
        var x = this.ActivatedCode; // Valid
    } 
```

}

```
public class Foo{
    new ActivationCode().ActivatedCode //Invalid access
} 
```

您可以将属性从 更改为`protected`与`public`一样`LoginAccountId`。

阅读有关以下内容的[**MSDN**](http://msdn.microsoft.com/en-us/library/bcd5672a%28v=vs.71%29.aspx)文章`protected`：

> **protected**关键字是成员访问修饰符。受保护的成员可以从声明它的类中访问，也可以从从声明该成员的类派生的任何类中访问。
> 
> 仅当通过派生类类型进行访问时，才能在派生类中访问基类的受保护成员。例如，考虑以下代码段：

**更新：**

该类`ActivationCode`应如下所示：

```
public class ActivationCode
{
    public virtual int LoginAccountId { get; set; }
    public virtual string ActivatedCode { get; set; }
    public virtual DateTime ActivationDate { get; set; }
} 
```

# android - android c2dm 第三方应用服务器配置（windows or linux）

> ID：10204314
> 
> 赞同：1
> 
> 时间：2012-04-18T06:52:44.053
> 
> 标签：android, push-notification, android-c2dm

[在 android 中，我正在开发一个用于 c2dm 推送通知。并从http://code.google.com/android/c2dm/](http://code.google.com/android/c2dm/.And)了解推送通知。现在我需要一些关于第三方应用程序服务器的建议。有什么要求以及该第三方应用服务器的配置。

我们可以使用 windows server 作为第三方应用程序服务器吗？使用 linux server 和 windows server 哪个更好？急需帮助..

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T07:00:30.213

[http://souravtechdiary.blogspot.in/2012/03/implementing-push-notifications-for.html](http://souravtechdiary.blogspot.in/2012/03/implementing-push-notifications-for.html)

Hope this helps...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T07:32:50.757

好吧，基本上你可以拿任何你喜欢的服务器。您需要在应用程序服务器上做的所有事情就是提供一个接口来存储设备特定的 C2DM 信息，例如设备注册 ID，并在 Google 的 C2DM 服务器上发送 HTTP-Post 以触发推送通知。

可能的解决方案：

带有 Apache Tomcat 的 Windows Server 和使用 Java 实现的服务器，包括 Servlet 以提供设备注册接口。

# android - 共享首选项编辑器的哪个功能最好调用？

> ID：10204315
> 
> 赞同：0
> 
> 时间：2012-04-18T06:52:44.147
> 
> 标签：android, sharedpreferences

[在Editor](http://developer.android.com/reference/android/content/SharedPreferences.Editor.html) is 给出一行**您在编辑器中所做的所有更改都是批处理的，并且在您调用 commit() 或 apply() 之前不会复制回原始 SharedPreferences**

如果以 commit() 和 apply() 的形式给出，哪个是最好的函数？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T06:58:31.427

`apply()`将立即更新共享首选项的内存缓存，然后在后台线程中将更改写入文件系统。

`commit()`将同步写入更改~~从 UI 线程~~来自调用线程，这很可能是 UI 线程。从 UI 线程执行文件系统访问通常不是一个好主意，因为存在阻塞问题的风险。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T06:56:18.560

如果它是多线程的并且由多个线程编写，那么`commit()`它是同步的方式..或者`apply()`是异步的，所以更快并且应用永远不会通知它是否无法写入.....更多信息请参见[此处](http://developer.android.com/reference/android/content/SharedPreferences.Editor.html#apply%28%29)..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T06:57:34.723

Commit() 返回布尔值，告诉它是否成功， apply() 没有。

# xcode - Mac OS X 在编译项目时想使用系统钥匙串

> ID：10204320
> 
> 赞同：112
> 
> 时间：2012-04-18T06:53:03.587
> 
> 标签：xcode, keychain

当我编译我的 Xcode 项目时，我被要求输入系统管理员用户名和密码。整个消息是

> Mac OS X 想要做出改变。键入管理员的名称和密码以允许此操作。Mac OS X 想要使用系统钥匙串。

有人对此有解决方案吗？

* * *

## 回答 #1

> 赞同：291
> 
> 时间：2013-12-02T09:00:39.170

1.  打开钥匙串访问。
2.  在左上角，解锁钥匙串（如果已锁定）。
3.  从左上角选择系统钥匙串。
4.  找到您的分发证书并单击披露三角形。
5.  双击分发证书下的“私钥”。
6.  在弹出窗口中，转到访问控制选项卡。
7.  选择“允许所有应用程序访问此项目”。
8.  保存更改。
9.  关闭所有窗户。
10.  运行应用程序。

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2013-05-24T12:50:46.370

问题在于左侧面板上“系统”下的钥匙串上的开发人员证书，该证书始终处于锁定状态，需要我的密码才能解锁！

所以只需将开发者证书移动到“登录”，它始终是解锁的。现在你的问题得到解决了。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2016-11-22T07:11:09.793

1.  打开钥匙串访问

2.  单击左侧窗格中的系统

3.  解锁左上方的系统钥匙串（如果已锁定）

4.  按种类对系统项目进行排序，使键位于顶部

5.  寻找不断询问密码的私钥

6.  双击它并选择访问控制

7.  选择“允许所有应用程序访问此项目”

8.  保存更改，锁定系统钥匙串并退出钥匙串应用程序

9.  重新启动不断要求修改钥匙串的应用程序

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-04-27T20:24:54.487

我遇到了这个问题，因为我的登录和系统钥匙串中有重复的证书。通过打开钥匙串访问并从系统中删除所有也在登录中的证书解决了这个问题。希望这可以帮助。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-10-15T15:17:21.013

我发现问题出在配置文件上。我删除了所有以前的配置文件，然后重新安装了我需要的一个。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-05-29T08:27:58.767

将您的私钥从系统移动到登录钥匙串访问。然后将您的开发人员证书移动到登录中。这对我有用。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-12-14T09:19:32.770

就我而言，我去了钥匙串访问，在“钥匙串”（左上角）中选择了“系统”。然后对于每个项目：右键单击，“获取信息”，“访问控制”并在“始终允许这些应用程序访问：”列表中添加 Xcode。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-02-13T00:08:37.003

我遵循了一个类似于@krafter 所做的解决方案，但是，我不需要访问系统钥匙串中的所有内容，我只需要将 xcode 添加到钥匙串 -> 系统 -> “您的配置文件” -> 获取信息下的配置文件中- >访问控制然后只是添加了xcode。这适用于 4.6

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2019-12-17T18:35:27.193

访问控制设置似乎不再保存存储在系统钥匙串中的私钥，因此尝试将 Xcode 添加到白名单对我不起作用。

为了保留访问控制更改，我不得不将私钥 + 证书复制到登录钥匙串。这使 Xcode 在代码签名存档以进行分发时不会打扰我。

请注意，如果更改证书的信任设置（例如始终允许代码签名），Xcode 将停止分发；您**必须**将这些设置为系统默认值。

我希望有比这更好的解决方案，因为这感觉不对。但它现在有效。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-04-18T07:06:08.493

是 - 仅以管理员权限运行 XCode。它需要管理员权限才能执行一大堆任务、安装、调试会话等。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2012-04-18T07:09:02.610

您确定它说“Mac OS X”与开发人员工具无关吗？

如果开发者工具想要在您的 Mac 上启用开发者模式是正常的，因此，您无需在每次启动 Xcode 后的第一次在模拟器中开始调试您的应用程序时输入管理员密码。

但是，如果您没有启用开发人员模式，当它由 Xcode 提供时，请做好准备，每次 Xcode 启动后，每次您在模拟器中启动调试时，Xcode 都会要求输入管理员密码。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2013-10-27T05:56:35.217

您需要将您的 OSx 用户名添加到该`_developer`组。为我工作。

```
sudo dscl . append /Groups/_developer GroupMembership <username> 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2016-06-21T13:23:55.553

Xcode 似乎没有刷新团队选择，因此从目标的常规选项卡中再次选择它解决了它。

# windows-ce - Windows CE 6.0 SQL Server Compact 3.5

> ID：10204322
> 
> 赞同：1
> 
> 时间：2012-04-18T06:53:09.773
> 
> 标签：windows-ce, sql-server-ce-3.5

我想以编程方式在 Windows CE 6.0 下创建一个数据库。它应该使用 SQL Server Compact 3.5。

问题是，我不知道如何从这里开始。我找不到在 Windows CE 下创建和管理 SQL Server 数据库的适当示例。

有没有人有任何例子？或者提示我应该使用什么 API？

提前致谢！

PS 必须用本机代码 C/C++ 制作！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T13:26:07.910

为了在 C++ 中使用 SQL Server Compact，您需要使用 SQLCE OLEDB 提供程序。您可以通过包含适当的头文件并创建相应 COM 类的实例来开始使用它（来自 MSDN 的示例代码）：

```
//Include SLQ CE header files
#include <sqlce_oledb.h>
#include <sqlce_err.h  >
(...)
//create an instance of the SQLCE OLEDB provider
hr = CoCreateInstance(CLSID_SQLSERVERCE, 0, CLSCTX_INPROC_SERVER, IID_IDBProperties, (void**) &pIDBProperties); 
```

有关该过程其余部分的更多详细信息，我认为以下链接将是一个很好的起点：

[如何：使用 OLE DB 创建数据库（以编程方式）使用 OLE DB](http://msdn.microsoft.com/en-us/library/ms172066.aspx)
[创建数据库](http://msdn.microsoft.com/en-us/library/ms174146.aspx)
[构建本机应用程序 (SQL Server Compact)](http://msdn.microsoft.com/en-us/library/bb153747.aspx)
[OLE DB 提供程序参考 (SQL Server Compact)](http://msdn.microsoft.com/en-us/library/ms174142.aspx)

# cruisecontrol.net - Continuous 和 Nightly 构建的最后构建标签版本号不同

> ID：10204325
> 
> 赞同：0
> 
> 时间：2012-04-18T06:53:24.817
> 
> 标签：cruisecontrol.net

我已经在我的 CruiseControl.Net（版本：1.6.7981.1）服务器中配置了两个项目构建 - **Continuous 和 nightly ，以构建相同的项目代码。**

我从 TFS 服务器获取代码并将其存储在两个构建的**同一工作目录**中，并且我在两个项目构建中都应用了 assemblyVersionLabeller。

仅当修改存在且夜间构建 (forcebuild) 在凌晨 5:00 构建时，才会持续构建构建。

**我的问题是**：当夜间构建完成构建时，最后构建标签的修订号必须是连续构建修订号或更高版本。（即，如果我的连续构建标签是 1.0.125.23884，那么在夜间构建完成后，夜间构建标签必须是 xxx23884 或大于 23884，但小于 23875）。

我的 ccnet.config 看起来像这样：

```
<cruisecontrol>

<project name="Myproject-Continuous Build">
   <triggers>
       <intervalTrigger seconds="600" buildCondition="IfModificationExists"/>
   </triggers>

<labeller type="assemblyVersionLabeller">
  <major>1</major>
  <minor>0</minor>
  <incrementOnFailure>false</incrementOnFailure>
</labeller>

<sourcecontrol type="vsts" autoGetSource="true">
  <server>server path</server>
  <username>"username"</username>
  <password>password</password>
  <project>$Project/Source</project>
  <workingDirectory>F:\WD</workingDirectory>
  <cleanCopy>false</cleanCopy>
</sourcecontrol>

  <tasks>
    <msbuild>
      <executable>C:\windows\Microsoft.NET\Framework\v4.0.30319\MSBuild.exe</executable>
      <workingDirectory>F:\FD</workingDirectory>
      <projectFile>"Project.sln"</projectFile>
      <buildArgs>/p:Configuration=Debug /noconsolelogger /v:diag</buildArgs>
      <targets>ReBuild</targets>
    </msbuild>
  </tasks>
</project>

<project name="Myproject-Nightly Build">
   <triggers>
        <scheduleTrigger time="5:00" buildCondition="ForceBuild"/>
   </triggers>

  <labeller type="assemblyVersionLabeller">
     <major>1</major>
     <minor>0</minor>
     <incrementOnFailure>false</incrementOnFailure>
  </labeller>

  <sourcecontrol type="vsts" autoGetSource="true">
     <server>server path</server>
     <username>"username"</username>
     <password>password</password>
     <project>$Project/Source</project>
     <workingDirectory>F:\WD</workingDirectory>
     <cleanCopy>false</cleanCopy>
  </sourcecontrol>

  <tasks>
    <msbuild>
      <executable>C:\windows\Microsoft.NET\Framework\v4.0.30319\MSBuild.exe</executable>
      <workingDirectory>F:\FD</workingDirectory>
      <projectFile>"Project.sln"</projectFile>
      <buildArgs>/p:Configuration=Debug /noconsolelogger /v:diag</buildArgs>
      <targets>ReBuild</targets>
    </msbuild>
  </tasks>

</project>
</cruisecontrol> 
```

求帮助 谢谢|GDG

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T17:30:20.443

你搞混了：内部版本号是第三个元素，而第四个元素是修订号。如果您没有明确指定，则构建号会随着每次成功构建而递增。修订号 - 如果未指定 - 是 LastChangeNumber，由某些 VCS 提供。在[CCNET 文档中查找有关 Assembly Version Labeller 的](http://www.cruisecontrolnet.org/projects/ccnet/wiki/Assembly_Version_Labeller)更多信息。

# jquery - 在页眉中加载页头

> ID：10204329
> 
> 赞同：1
> 
> 时间：2012-04-18T06:53:48.407
> 
> 标签：jquery, load, head

是否可以使用 jQuery 在当前页面的头部加载页面头部？我试过这个，但它似乎不起作用。

```
 jQuery(function() {
    var page = http://www.mysite.com/mypage;
    jQuery('head').load(page +' head');
  }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T07:07:15.357

可以更改头部的内容，但是为什么呢？！

```
$(function() {
  $('head').html('html');
  $('head title').html('new title');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T07:10:28.677

浏览网站意味着您刷新页面，您将无法播放没有故障的声音。

侧面的声音是一个坏主意，但如果你必须......为播放器的 div 制作一个框架，为页面内容制作一个框架。这不是一个好的做法，但它会起作用并且很简单。

# javascript - 如何在 iPhone 上的 Safari 中自动播放媒体？

> ID：10204337
> 
> 赞同：0
> 
> 时间：2012-04-18T06:54:08.187
> 
> 标签：javascript, jquery

我正在尝试让一个视频文件在 iPhone 上的 Safari 中自动播放。但是这个 javascript 在 iPhone 上的 Safari 上不起作用，但在 Android 上就可以了。

```
 window.onload = function () {
                              var pElement = document.getElementById("myVideo");

                              setTimeout(function () {
                                  pElement.load();

                                  setTimeout(function () {
                                      pElement.play();
                                  }, 500);
                              }, 500);
                          }; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T06:58:44.097

**用户通过蜂窝网络控制下载**

在 iOS 上的 Safari（适用于所有设备，包括 iPad）中，用户可能在蜂窝网络上并按数据单位收费，因此禁用了预加载和自动播放。在用户启动数据之前不会加载数据。这意味着 JavaScript play() 和 load() 方法在用户开始播放之前也是不活动的，除非用户操作触发了 play() 或 load() 方法。换句话说，用户启动的播放按钮有效，但 onLoad="play()" 事件无效。

这播放电影：

```
<input type="button" value="Play" onClick="document.myMovie.play()"> 
```

这在 iOS 上没有任何作用：`<body onLoad="document.myMovie.play()">`

# sip - 来自不同域的星号出站呼叫和入站呼叫

> ID：10204343
> 
> 赞同：0
> 
> 时间：2012-04-18T06:54:19.500
> 
> 标签：sip, asterisk, outbound, inbound

如何配置星号（sip 客户端）以向注册到与我的 sip 域不同的 sip 服务器（域）的其他 sip 客户端的出站呼叫？来自注册到与我拥有的域不同的 sip 服务器（域）的 sip 客户端的入站呼叫呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T12:13:16.193

你可以使用类似的东西

为大部分公共域拨打（SIP/用户名@域）。

不幸的是，没有任何方法可以从您的域调用您的域。除非该域的管理员设置呼叫路由。

# ruby-on-rails - 即使没有通过电子邮件链接确认电子邮件，如何配置设计以使用户在注册后登录？

> ID：10204346
> 
> 赞同：3
> 
> 时间：2012-04-18T06:54:21.330
> 
> 标签：ruby-on-rails, ruby, devise

我使用 devise (2.0.4) 来设置用户注册和登录功能。现在我想让用户在注册后能够登录。事件确认电子邮件发送到他的邮箱。只需标记“此用户未确认”即可。如何配置？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T08:27:50.510

我发现这也可以解决问题。选择哪一个？

```
def active_for_authentication?
  true
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T08:00:47.833

Try to add overrided method `confirmation_required?` directly to your User model:

```
class User < ActiveRecord::Base
  ...

  def confirmation_required?
    false
  end
end 
```

# sql-server - SQL Server 2005 - 将 char 列与 int 进行比较

> ID：10204351
> 
> 赞同：4
> 
> 时间：2012-04-18T06:54:35.537
> 
> 标签：sql-server, tsql, debugging, sqldatatypes

我遇到了一个有趣的存储过程，我需要你的帮助来解决这个问题。

基本上，存储过程`SELECT`s`WHERE`的条件是：

```
WHERE SomeType = 2 
```

`SomeType`是一`char(3)`列，其中包含诸如`'1','2','AA','AB'`etc之类的值。

当我在 SSMS 中运行存储过程时，它失败了：

> 消息 245，级别 16，状态 1，第 1
> 行将 varchar 值“AA”转换为数据类型 int 的列的语法错误。

但是，当我通过生产中的应用程序使用该存储过程时，它会毫无问题地返回数据。

我的问题是，这怎么可能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T08:03:01.663

应用程序可能会使用不同的参数调用 SP，因此永远不会执行错误代码。或者应用程序可能会忽略该错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T05:49:25.457

您在评论中说您有`WHERE`未显示的附加条款。

问题可能是不同的执行计划。例如假设你的真实`WHERE`情况是

```
WHERE SomeType = 2 AND Foo = 'X' 
```

你的数据是

```
SomeType Foo
-------- ----
1        X
2        X
AA       Y
AB       Y 
```

然后在一个实例上，它可能会评估 Foo = 'X' 首先离开行

```
SomeType Foo
-------- ----
1        X
2        X 
```

然后它对`IMPLICIT_CAST(SomeType AS INT) = 2`这些过滤的行运行条件，没有问题。

但是，如果顺序颠倒，使其首先评估`SomeType = 2`条件，则需要将值强制转换为，`AA`并且查询将失败。`AB``int`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T14:18:47.360

转换`int`为`Char`，我认为它会正常工作。

# java - Java EE 6 登录模块

> ID：10204358
> 
> 赞同：2
> 
> 时间：2012-04-18T06:55:04.460
> 
> 标签：java, jakarta-ee, login, jaas

我想在我的 Java EE 6 应用程序中添加一个登录模块。

我读过 JAAS，但我不明白如何使用它。你知道一些教程或片段，我可以使用 JAAS 和 Java EE 6 来理解和实现我的登录模块吗？

我使用 glassfish 3.1.2、eclipselink 作为 JPA 实现和 MySQL。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T12:39:42.280

Glassfish 关于登录模块的常见问题解答在那里，但我同意它不是很深。 [http://glassfish.java.net/javaee5/security/faq.html#pluglogin](http://glassfish.java.net/javaee5/security/faq.html#pluglogin)

与 JAAS 框架有两点区别。**领域**和**登录**模块。领域或多或少定义了凭证的存储位置。登录模块或多或少定义了如何验证凭据。

例如，您可以使用用户名/密码登录模块，该模块使用存储在数据库领域中的凭据。或者，您可以有一个使用智能卡身份验证并使用存储在 ActiveDirectory 中的凭据的登录模块。

这就是理论。从常见问题解答中，它说 Glassfish 登录模块必须扩展`com.sun.appserv.security.AppservPasswordLoginModule`，因此仅支持用户名/密码。

但是您可以插入自己的领域，即继承`com.sun.appserv.security.AppservRealm`. 您可以阅读[本文](http://blog.gascoyne.de/archives/5)以了解如何定义和配置 ActiveDirectory 领域。[这](http://docs.oracle.com/cd/E19830-01/819-4721/beabs/index.html)是一篇关于如何使用 Sun App Server（后来成为 Glassfish）创建自定义领域的文章。我希望这部分没有太大变化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T12:39:35.697

我想，你可以试试[这篇](http://server.pramati.com/docstore/1270002/index.htm)文章（你也可以下载 jaastutorial.zip——它对我很有帮助）。但是在本文中没有将其插入 Java EE 应用程序的方法。

# lotusscript - 渲染 JavaScript 图表 FusionCharts.setCurrentRenderer('javascript') 函数显示“融合图表将在此处加载”错误

> ID：10204361
> 
> 赞同：0
> 
> 时间：2012-04-18T06:55:10.467
> 
> 标签：lotusscript

我正在编写一个忽略 Flash 并且仅使用 JavaScript 来显示融合图表的代码，我已经使用 lotusscript 在脚本库中编写了这段代码，该代码将从代理中调用。它给出的融合图表将在此处加载错误

这是以下代码

打印 || 打印 || 打印 ||

```
Print |</head>|
Print | <body>| 
Print |<div id="chartcontainer">Fusion chart will load here!!!!!</div>|
Print | <script type="text/javascript">|
Print |FusionCharts.setCurrentRenderer('javascript');|
Print | var myChart = new FusionCharts("/+ dbCurrent.FilePath +"/Column3D.swf","12345","400","500","0","1","","noScale","EN");|
Print |myChart.setXMLData(sXML);|

Print |myChart.render("chartcontainer");|
Print |</script>| 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T07:05:03.263

检查该`FusionCharts.js`文件是否包含在`<head>`您页面的标签中。

[您可以在FusionCharts 文档](http://docs.fusioncharts.com/charts/contents/?Debug/Basic.html)中阅读有关常规调试的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T09:56:57.367

您是否在第一个打印语句中设置内容类型？打印 {content-type:text-html}

# android - 为什么调用 ArrayAdapter.getView()？

> ID：10204364
> 
> 赞同：0
> 
> 时间：2012-04-18T06:55:21.233
> 
> 标签：android, android-listview, android-arrayadapter

在我的应用程序中，我将 ArrayAdapter 用于 ListView。当我调试应用程序时，我意识到在 ListView 的每个滚动中都会`ArrayAdapter.getView()`被调用。

为什么每次都调用 getView()？因为我在 getView() 中做了很多工作，比如添加事件侦听器、设置图像等等。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T06:57:09.793

它是ListView视图的`default`行为。[**这**](http://android.amberfog.com/?p=296)是一个很好的和完整的解释。`ListView``recycles`[](http://android.amberfog.com/?p=296)

 *** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T06:57:49.380

**调用getView**以在 ListView 中显示列表项。您不应该在 getView 中执行过多的任务（如您所述），否则会降低 ListView 的整体性能。**

# .net - 我可以指定 MSBuild 的输出路径吗 标签？

> ID：10204370
> 
> 赞同：22
> 
> 时间：2012-04-18T06:55:34.273
> 
> 标签：.net, visual-studio-2010, msbuild

是否可以为以下文件的输出指定不同的文件夹？

```
<Content Include="test.stl">
  <CopyToOutputDirectory>PreserveNewest</CopyToOutputDirectory>
</Content> 
```

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2017-12-10T10:50:00.240

可以使用/ items`Link`上的元数据指定不同的输出文件夹：`None``Content`

```
<Content Include="test.stl">
  <Link>some\folder\%(Filename)%(Extension)</Link>
  <CopyToOutputDirectory>PreserveNewest</CopyToOutputDirectory>
</Content> 
```

在包含语句中使用通配符时，这也是保留目录层次结构的方法，即使对于来自项目目录之外的文件也是如此：

```
<Content Include="..\shared\**\*">
  <Link>some\folder\%(RecursiveDir)%(Filename)%(Extension)</Link>
  <CopyToOutputDirectory>PreserveNewest</CopyToOutputDirectory>
</Content> 
```

在使用 2.0.0+ SDK 的基于 SDK 的项目（ASP.NET Core / .NET Core / .NET Standard 项目的默认项目）中，可以使用`LinkBase`元数据实现相同的目的：

```
<Content Include="..\shared\**\*" LinkBase="some\folder" CopyToOutputDirectory="PreserveNewest" /> 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-01T22:52:33.357

您可以，但不能使用“内容”。这取决于项目任务，但大多数你可以破解的内置任务，不值得麻烦或副作用。

有一个基本的老旧路径来处理这个:) 如果你正在做.Net，这也避免了讨厌的 PostBuild cmd shell 方式，并使用实际的构建过程。

我没有看到任何其他像这样的答案，使用 srieght up MSBuild，我认为 OPs 问题的核心是。这是核心概念，也是最短路径，除了找到具有“相对于输出路径”路径参数且没有副作用的项目类型。

1）后期处理风格：

```
<ItemGroup>
  ...
  <MyTargets Include="test.stl"/>
  ...
</ItemGroup> 
```

然后在底部（使用您之后的任何路径）：

```
<PropertyGroup>
  <MyDeployDir>$(SolutionDir)$(Configuration)</MyDeployDir>
  <MyOtherDeployDir>$(SolutionDir)$(Configuration)\Templates</MyDeployDir>
</PropertGroup> 
```

然后您*现有的*MS 构建包括（不要添加这个，在这里作为标记）：

```
<Import Project="$(MSBuildBinPath)\Microsoft.CSharp.targets" /> 
```

然后是“构建后”：

```
<Target Name="AfterBuild">
  <Copy SourceFiles="@(MyTargets)" DestinationFolder="$(MyDeployDir)" SkipUnchangedFiles="true" />
  <Copy SourceFiles="@(MyOtherTargets)" DestinationFolder="$(MyOtherDeployDir)" SkipUnchangedFiles="true" />
  <Copy SourceFiles="@(MyTargets2)" DestinationFolder="$(MyDeployDir)\IHeardYourMomLikesGrapeNuts" SkipUnchangedFiles="true" />
</Target> 
```

根本问题是项目项目默认情况下不做任何事情，它们的类型类似于“内容”或“我的目标”。它的那些类型说会发生什么。您可能能够找到包含所需内容的任务、类型或构建脚本，但就构建期间该文件将发生的情况而言，项目组中的项目没有任何内在特征。以上是特制“任务”的力量之间的平衡，但没有任何麻烦。

一旦你添加

```
 <ItemGroup>
    <MyOutFiles Include="xxx.xxx" /> 
```

一次到项目文件，它将出现在任何文件的 BuildAction 列表中，您可以在其中设置任何文件，而无需手动编辑 proj 文件。

* * *

2) 一步到位

在更高版本的 MSBuild 中，您可以在“AfterBuild”目标中嵌入一个“ItemGroup”，然后执行上述操作或执行其他花哨的操作，而无需触及文件的其余部分。例如，这允许使用简单的 Include 获取构建结果并将其替换到其他地方。这一切都不需要做任何 RoboCopy 或诉诸更复杂的构建目标函数处理。

```
<Target Name="AfterBuild">
  <ItemGroup>
    <MyOutFiles Include="$(OutDir)*.*" />
  </ItemGroup>
  <Copy SourceFiles="@(MyOutFiles)" DestinationFolder="$(SolutionDir)\Application" SkipUnchangedFiles="true" /> 
```

* * *

编辑（由于否决票？，海报评论自删除）：

为了消除可能的方法的歧义并重申，此方法不使用 MSBuild“功能”或替代任务（如“RoboCopy”），而是使用核心功能显示更纯粹的 MSBuild 风格，就像在制作项目任务（如“内容”）时使用的那样本身。

问题是我可以为以下文件指定一个“不同的文件夹”吗？我可以为内容标签执行此操作吗？您可以使用 MSBuild 函数重新路由所有 BuildAction，但我不相信这是问题所在。

你可以做到这一点，如上所示，所以我认为这不会更复杂，并且更容易阅读。下面是简短的形式，让他可以创建自己的 BuildAction，可以随意处理。所以不，您不能告诉“内容”为标记为“内容”的特定文件选择另一个文件夹，但您可以进行另一个相当容易的构建操作。您还可以将元信息注入到指示操作的 StlFiles 标签中，以便您可以在标签本身上设置它，或者像内容一样在流程的早期使用 StlFiles 挂钩，但这更复杂。

```
<StlFiles Include="test.stl" />         
...
<Target Name="AfterBuild">
  <Copy SourceFiles="@(StlFiles)" DestinationFolder="$(SolutionDir)\Release\MyTypes" SkipUnchangedFiles="true" /> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T05:22:45.090

此功能未内置到内容项中。但是您可以通过在项目文件中添加目标来实现它。

在您的项目中，您目前拥有以下内容：

```
<ItemGroup>
  <Content Include="test.stl">
    <CopyToOutputDirectory>PreserveNewest</CopyToOutputDirectory>
  </Content>
</ItemGroup> 
```

假设您希望将一个特定文件复制到其他位置，请将其添加到末尾（在结束“项目”标记之前）：

```
<Target Name="CopyStl" AfterTargets="AfterBuild">
  <!-- One or the other of these Copy tasks should do what you want --> 
  <Copy Condition="'%(Identity)' == 'test.stl'" SourceFiles="@(Content)" SkipUnchangedFiles="true" DestinationFolder="$(OutputPath)\path\under\outputpath" />
  <Copy Condition="'%(Identity)' == 'test.stl'" SourceFiles="@(Content)" SkipUnchangedFiles="true" DestinationFolder="$(MSBuildProjectDirectory)\..\path\outside\project" />
</Target> 
```

如果您想添加更多文件以复制到同一文件夹，请尝试以下操作：

```
<Target Name="CopySomeFiles" AfterTargets="AfterBuild">
  <!-- One or the other of these Copy tasks should do what you want --> 
  <Copy Condition="'%(Identity)' == 'test.stl' AND '%(Identity)' == 'test2.stl'" SourceFiles="@(Content)" SkipUnchangedFiles="true" DestinationFolder="$(OutputPath)\path\under\outputpath" />
  <Copy Condition="'%(Identity)' == 'test.stl' AND '%(Identity)' == 'test2.stl'" SourceFiles="@(Content)" SkipUnchangedFiles="true" DestinationFolder="$(MSBuildProjectDirectory)\..\path\outside\project" />
</Target 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-01T23:07:56.750

无法另外指定输出文件夹 AFAIK，但您可以在构建之前或之后复制文件。

# spring - 在其他 JAR 中定义时未执行 Spring Aspect

> ID：10204374
> 
> 赞同：6
> 
> 时间：2012-04-18T06:55:43.317
> 
> 标签：spring, aspectj, spring-aop

我有一个由两个子项目组成的项目，它们都是 Spring 项目，每个都有一个 applicationContext.xml。

一个是框架项目（最终成为 JAR），一个是实际应用程序（最终成为 WAR，依赖于 JAR 并将 JAR 的 applicationContext.xml 导入它自己的 applicationContext.xml）。

在框架项目中，我为所有公共方法定义了一个方面。

```
@Aspect
@Configurable
public class MyAspect {

    @Autowired
    private SomeBean mBean;

    @Pointcut("execution(public * *(..))")
    public void anyPublicMethod() {
    }

    @Before("anyPublicMethod()")
    public void checkAuthorization(JoinPoint pJoinPoint) {
        mBean.doSomething();
    }
} 
```

我已经在框架的applicationContext.xml中激活了AOP（由实际应用项目的applicationContext.xml导入）。

```
...
    <context:spring-configured />

    <context:component-scan base-package="com.mypackage" />

    <aop:aspectj-autoproxy/>
... 
```

在框架项目中进行测试时，方面会在调用 Spring bean 上的公共方法时按预期执行。

如上所述，框架项目作为依赖项包含在应用程序项目中，但是当在任何 Spring bean 上调用应用程序项目中的匹配方法（任何公共）时，不会执行方面。

我也尝试过使用方面的 XML 配置。这导致相同的行为。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T09:29:01.510

恕我直言，您可以稍微调整方法。

我要做的第一件事是将战争的应用程序上下文的配置委托给 web.xml ：

```
<context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>WEB-INF/classes/spring*.xml</param-value>
</context-param> 
```

其次，我会在你的war文件的应用程序上下文中启用aop，因为这是你想要使用它的地方。目前听起来，您使用 aop 配置导入应用程序上下文只是为了将其放入您的 Web 项目中，这可能是错误的。

最后我假设这些是运行时而不是编译的方面，在后一种情况下，无论依赖关系如何，您都需要在您的战争项目中使用 aspectj 重新编译。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T11:01:34.370

在[Spring MVC webapps](http://static.springsource.org/spring/docs/3.2.0.RELEASE/spring-framework-reference/html/mvc.html#mvc-servlet)中，您实际上有 2 个上下文：根上下文和 servlet 的上下文。请务必在*servlet*的上下文中配置您的方面。事实上，servlet 的上下文“看到”了根——而不是相反：

> 在 Web MVC 框架中，每个 DispatcherServlet 都有自己的 WebApplicationContext，它继承了根 WebApplicationContext 中已经定义的所有 bean。这些继承的 bean 可以在特定于 servlet 的范围内被覆盖，并且您可以在给定的 Servlet 实例本地定义新的特定于范围的 bean。

`[servlet-name]-servlet.xml`因此，如果您希望将方面应用于其 bean，则必须在文件中而不是在其他文件中导入框架配置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T20:39:36.650

我认为你需要让你的方面成为一个组件，让它被春天识别：

[http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/aop.html#aop-at-aspectj](http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/aop.html#aop-at-aspectj)

> 通过组件扫描自动检测方面
> 
> 您可以在 Spring XML 配置中将方面类注册为常规 bean，或者通过类路径扫描自动检测它们 - 就像任何其他 Spring 管理的 bean 一样。但是，请注意 @Aspect 注释不足以在类路径中进行自动检测：为此，您需要添加一个单独的 @Component 注释（或者根据 Spring 组件扫描器的规则，添加一个符合条件的自定义构造型注释）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T04:54:08.177

我就是做这个的：

```
<context:annotation-config/>
<context:component-scan base-package="my.pkg" scoped-proxy="interfaces"/> 
<aop:aspectj-autoproxy proxy-target-class="true" /> 
```

虽然我不知道它是否适用于您的情况....如果您在 github 上设置项目的精简版本会有所帮助。

这不需要任何字节码编织或检测 jvm。只需确保在调用相关方法时使用自动注入的属性，即。

```
@Autowired
private MyType myTypeInstance; // MyType is usually an interface

public void someMethod() {
    // myTypeInstance is actually a proxy object... thereby providing the
    // access point for the weaving stuff. (as far as I understand it)
    myTypeInstance.method();
} 
```

否则，如果您不喜欢 spring 管理的 AOP 类代理，请遵循[这些说明。](http://mojo.codehaus.org/aspectj-maven-plugin/weaveJars.html)

# node.js - 流式传输结果和 res.render nodejs

> ID：10204377
> 
> 赞同：0
> 
> 时间：2012-04-18T06:55:52.207
> 
> 标签：node.js, coffeescript, express

我在 nodejs 中使用 express 和 mysql-native。使用 mysql-native 我从 db 中逐行流式传输结果，如下所示（在咖啡中）：

```
exports.getUser = (username,callback) ->
 query = mysql.query "select * from users where username = #{username}"
 query.on "row", (row)->
  callback row 
```

（显然我会使用准备好的语句，这是一个例子）

这种方法不适用于 res.render 因为每次获得新行时都不能多次调用 res.render

```
database.getUser "username", (result)->
  res.render "people", "data" : result 
```

是否有其他方法可以发送流式数据，或者我是否必须使用套接字将结果流式传输到视图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T08:55:59.813

您可以直接使用您喜欢的模板引擎

```
var row = _.template('<tr><td> <%= id > </td> </tr>');
...
database.getUser "username", (result)->
  res.write( row(result) ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T12:27:00.853

您可能想要使用[Express partials](http://expressjs.com/guide.html#view-partials)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T15:46:17.780

昨晚我在灵感的时刻想出了这个问题，因为我正在流式传输数据，我可以在流结束时收听并运行我的回调。这样我就可以将数据推送到一个数组，然后在回调中使用，如下所示：

```
 query = mysql.query "select * from users where id = 2"
 data = []
 query.on "row", (row)->
   data.push row
 query.on "end", ()->
   callback data 
```

# regex - 验证英国国民保险号码的正则表达式

> ID：10204378
> 
> 赞同：25
> 
> 时间：2012-04-18T06:56:00.200
> 
> 标签：regex, validation

我有以下验证英国国民保险号码的正则表达式

```
^([a-zA-Z]){2}( )?([0-9]){2}( )?([0-9]){2}( )?([0-9]){2}( )?([a-zA-Z]){1}?$ 
```

可接受的值为：

```
AB 12 34 56 A

AB123456A 
```

我希望这个值也被接受。谁能帮我解决这个问题？

```
AB 123456 A

AB 123 456 A

AB 1 2345 6 A

    AB   12   34   56 A    (multiple space anywhere) 
```

即使字符串中有多余的空格或没有空格，RE 也应该可以工作。这可以在RE中做到吗？先感谢您。

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2013-07-22T03:33:54.837

实际上，NIN 不允许 D、F、I、Q、U 或 V 用于前两个字母，也不允许 O 用于第二个字母；除此之外，前缀字母不能是BG、GB、NK、KN、TN、NT和ZZ。后缀字母也可以是 A、B、C 或 D，但如果未知，则可以用空格表示。- [http://en.wikipedia.org/wiki/National_Insurance_number#Format](http://en.wikipedia.org/wiki/National_Insurance_number#Format)

因此，更有效的检查将是（我只提供了一个带有大写字母的版本，可以很容易地更改为小写）：

```
^(?!BG)(?!GB)(?!NK)(?!KN)(?!TN)(?!NT)(?!ZZ)(?:[A-CEGHJ-PR-TW-Z][A-CEGHJ-NPR-TW-Z])(?:\s*\d\s*){6}([A-D]|\s)$ 
```

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2012-04-18T07:11:44.153

**编辑**：Andrew Bauer 修改了我的答案，添加了对我回答时未知的允许/不允许字符的检查。您应该对他的答案进行投票，因为它更完整并且显然可以进行更好的验证。

* * *

如果您不能先​​删除所有空格，则应该可以：

```
^\s*[a-zA-Z]{2}(?:\s*\d\s*){6}[a-zA-Z]?\s*$ 
```

解释：

```
^                 # beginning of string
\s*               # optional leading whitespace
[a-zA-Z]{2}       # match two letters
(?:\s*\d\s*){6}   # six digits, with optional whitespace leading/trailing
[a-zA-Z]?         # zero or one letter
\s*               # optional trailing whitespace (just in case)
$                 # end of string 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-12-03T13:39:50.280

在阅读了这里的所有答案后，我确定这个问题没有明确的答案。

使用我的正则表达式，您将需要从字符串中删除所有空格，但实际上您应该这样做以验证大多数数据。这可以很容易地实现，这里有几个例子。

PHP

`preg_replace('/(\s+)|(-)/', '', $str)`

Javascript

`str.replace(/ /g,'')`

对于基于英国政府建议 ( [http://www.hmrc.gov.uk/manuals/nimmanual/nim39110.htm](http://www.hmrc.gov.uk/manuals/nimmanual/nim39110.htm) ) 的验证，我构建了以下正则表达式。

`/^[A-CEGHJ-PR-TW-Z]{1}[A-CEGHJ-NPR-TW-Z]{1}[0-9]{6}[A-D]{1}$/i`

这是这个正则表达式的解释

```
/                      # Wraps regex
^                      # Beginning of string
[A-CEGHJ-PR-TW-Z]{1}   # Match first letter, cannot be D, F, I, Q, U or V
[A-CEGHJ-NPR-TW-Z]{1}  # Match second letter, cannot be D, F, I, O, Q, U or V
[0-9]{6}               # Six digits
[A-D]{1}               # Match last letter can only be A, B, C or D
$                      # End of string
/i                     # Ending wrapper and i denotes can be upper or lower case 
```

以下是您可以使用的一些测试模式

**经过**

```
AA 11 22 33 A
BB 44 55 66 B
ZZ 67 89 00 C 
```

**失败**

```
AA 11 22 33 E
DA 11 22 33 A
FA 11 22 33 A
AO 11 22 33 A 
```

由于我需要扩展 jQuery validate 以添加这个新的国家保险号码正则表达式，因此我也将其包括在内，因为它可能对某人有用。

```
jQuery.validator.addMethod('nino', function(nino, element) {
            return this.optional(element) || nino.length >= 9 &&
                nino.replace(/ /g,'').match(/^[A-CEGHJ-PR-TW-Z]{1}[A-CEGHJ-NPR-TW-Z]{1}[0-9]{6}[A-D]{1}$/i);
        }, 'Please specify a valid national insurance number'); 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-04-18T07:04:07.940

我认为最好先对其进行规范化（删除所有空白字符：`\s`正则表达式以替换为空字符串），然后进行验证。

```
^[a-zA-Z]{2}[0-9]{6}[a-zA-Z]{1}$ 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-01-13T11:12:31.190

我找到了一个指向政府 xml 文档的链接，其中包含用于验证国民保险的正则表达式：

[A-CEGHJ-NOPR-TW-Z]{2}[0-9]{6}[ABCD\s]{1}

我已经在网上对正则表达式进行了一些测试，并且似乎运行良好，并且只需 4 个步骤。

[https://web.archive.org/web/20121026141031/http://webarchive.nationalarchives.gov.uk/+/http://www.cabinetoffice.gov.uk/media/291296/CitizenIdentificationTypes-v1-4。 xml](https://web.archive.org/web/20121026141031/http://webarchive.nationalarchives.gov.uk/+/http://www.cabinetoffice.gov.uk/media/291296/CitizenIdentificationTypes-v1-4.xml)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-05-23T06:38:55.780

国民保险号或 NINO 有固定格式。

号码的格式是两个前缀字母、六个数字和一个后缀字母。

前两个字母都不能是 D、F、I、Q、U 或 V。第二个字母也不能是 O。不分配前缀 BG、GB、NK、KN、TN、NT 和 ZZ。

在两个前缀字母之后，六位数字从 00 00 00 到 99 99 99 依次发出。最后两位数字决定了在一周中的哪一天支付各种社会保障福利，以及失业申请人何时需要到他们的就业中心签名在。

后缀字母是 A、B、C 或 D。

使用的示例通常是 AB123456C。通常，该数字印有空格以配对数字，如下所示：AB 12 34 56 C。

所以，正则表达式是，

```
[A-CEGHJ-PR-TW-Z]{1}[A-CEGHJ-NPR-TW-Z]{1}\s?[0-9]{2}\s?[0-9]{2}\s?[0-9]{2}\s?[A-DFMP ] 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-03-15T09:40:48.563

```
[RegularExpression(@"^([ACEHJLMOPRSWXYacehjlmoprswxy][A-CEGHJ-NPR-TW-Za-ceghj-npr-tw-z]|Bb[A-CEHJ-NPR-TW-Za-cehj-npr-tw-z]|Gg[ACEGHJ-NPR-TW-Zaceghj-npr-tw-z]|[KTkt][A-CEGHJ-MPR-TW-Za-ceghj-mpr-tw-z]|Nn[A-CEGHJL-NPR-SW-Za-ceghjl-npr-sw-z]|Zz[A-CEGHJ-NPR-TW-Ya-ceghj-npr-tw-y])[0-9]{6}[A-Da-d ]$", ErrorMessage = "NI Number must be in the correct format.")] 
```

*   注意/这将允许用户输入小写值，因为您可能在文本框上有一种将小写转换为大写的样式，在这种情况下，您可能希望 NI 编号的正则表达式也允许小写。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-10-06T16:31:55.767

*   当我四处寻找合适的正则表达式时才发现这个。所以只想分享这个[DWP NINO format-validation](https://github.com/dwp/nino-format-validation)。
*   在引擎盖下，他们使用以下正则表达式 `"(^(?!BG)(?!GB)(?!NK)(?!KN)(?!TN)(?!NT)(?!ZZ)[A-Z&&[^DFIQUV]][A-Z&&[^DFIOQUV]][0-9]{6}[A-D ]$)"`
*   我发现这非常有用并且可以按预期工作旧版本的 maven 还支持以空格结尾的 NINO。
*   项目清单

**Nino Validator 符合以下所有标准。**

*   必须是 9 个字符。
*   前 2 个字符必须是字母。
*   接下来的 6 个字符必须是数字。
*   结尾字符可以是 A、B、C、D 或空格。
*   第一个字符不能是 D、F、I、Q、U 或 V。
*   第二个字符不能是 D、F、I、O、Q、U 或 V。
*   前 2 个字符不能是 GB、NK、TN 或 ZZ 的组合（术语组合包括 GB 和 BG 等）

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-11-05T17:45:51.870

尝试了一下清理它，您可以通过以下方式获得完整的验证：

```
/^(?!BG|GB|NK|KN|TN|NT|ZZ)[A-CEGHJ-PR-TW-Z][A-CEGHJ-NPR-TW-Z](?:\s?\d){6}\s?[A-D]$/i

/^(?!BG|GB|NK|KN|TN|NT|ZZ)(?![DFIQU])[A-Z](?![DFIOQU])[A-Z](?:\s?\d){6}\s?[A-D]$/i 
```

基本断了

```
/                            //start of match
^                            //From start of string
(?!BG|GB|NK|KN|TN|NT|ZZ)     //exclude any starting with any of these combinations
[A-CEGHJ-PR-TW-Z]            //first letter not DFIQU
or (?![DFIQU])[A-Z])        
[A-CEGHJ-NPR-TW-Z]           //second letter not DFIOQU
or (?!=[DFIOQU])[A-Z])
(?:\s?\d){6}                 //six digits (0-9) optionally preceded by a space (non-caputuring)
\s?[A-D]                     //last letter A,B,C or D optionally preceded by a space
/                            //end of match 
i                            //options i - Case Insensitive 
```

根据 Regex101，它使用 PCRE2 以 34 或 38 步执行，第二步较慢，但更易于阅读。

都满足字母组和数字之间的空间

都允许大写或小写

# c - 如何在c中创建链表节点的动态数组？

> ID：10204380
> 
> 赞同：-1
> 
> 时间：2012-04-18T06:56:01.847
> 
> 标签：c

基本上，数组应该在用户输入时初始化。如果`input = 3`，则表示该数组可以分别在索引中存储一个链表`0,1,2`（总共 3 个链表）

```
int input = 3;
list* array[n]//not allowed as n is not constant, also not in heap so can't pass it across functions
list* array[] = (list*) malloc(sizeof(list)*input)//compiler error 
```

准备面试......所以你可以说家庭作业！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T10:35:01.730

链表数组可以是头节点数组（假设是标准链表实现）或指向列表的指针数组。无论哪种情况，您似乎面临的问题是如何动态分配数组。

在堆上动态分配数组的通用语法是

```
type * array = calloc(number_of_elements, sizeof(type)) 
```

因此，纠正代码中的编译错误将是

```
int input = 3;
list ** array = calloc(input, sizeof(list*)); 
```

这是你想要的？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T06:58:35.923

它应该是`list* array = malloc(sizeof(list) * input)`，`malloc`返回新分配的内存位置的基地址。您可以将其用作数组，即您可以访问`array[0]..array[input - 1]`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T10:05:47.130

（单）链表通常是带有指向下一个结构的指针的结构。这种模式使得从该列表中添加、删除和插入内容变得容易，并且仍然保持整个数据使用的灵活性并在运行时进行管理。

在您的情况下，链表将如下所示

```
struct List
{
 // contents of the list
 List* Pointer_to_next_list;
}; 
```

然后，您可以添加用于跟踪每个列表的功能。我建议阅读[Wikipedia::Linked List](http://en.wikipedia.org/wiki/Linked_list)以了解其工作原理。

# android - Android错误：只有创建视图层次结构的原始线程才能触摸其视图

> ID：10204383
> 
> 赞同：1
> 
> 时间：2012-04-18T06:56:18.030
> 
> 标签：android, views

我阅读了其他帖子，但没有解决我的问题。我是安卓新手。我必须连接到 MSSQL，但我收到了原始线程错误。我该如何解决这个问题？谢谢。

这是我的代码：

```
private class MyThread implements Runnable {
    public void run() {

        durumKontrol();
        if (isConnected) {

            new Thread(new Runnable() {

                @Override
                public void run() {
                    // TODO Auto-generated method stub

                    kuyrukKontrol();
                }

            }).start();

        } else {
            Toast toast = Toast
                    .makeText(
                            getApplicationContext(),
                            "Ağa erişilemiyor. Lütfen kablosuz ağın açık olduğundan emin olunuz",
                            Toast.LENGTH_LONG);
            toast.show();
        }

        tick_Handler.postDelayed(tick_thread, firstDelay);
        firstDelay = 10000;
    }

}private void kuyrukKontrol() {
    // TODO Auto-generated method stub

    // Hücrenin sipariş ettiği ve henüz getirilmemiş malzemelerin listesi
    // çekiliyor
    TextView tvIP = (TextView) findViewById(R.id.tvIP);
    tvIP.setText(HatAdi + "-" + HucreNo);

    try {
        Class.forName("net.sourceforge.jtds.jdbc.Driver");
        Connection conn = DriverManager
                .getConnection("jdbc:jtds:sqlserver://x.x.x.x:1433",
                        "xx", "xxxxx");

        Statement query = conn.createStatement();

        // İlk olarak bu forklifte ait teslim edilmeyen bir talep var mı
        ResultSet rs = query
                .executeQuery("select * from MOBILE.dbo.fos_SS where hucreNo = '" + HucreNo + "' and sonDurum != 'T'");
        while (rs.next()) {

            KuyrugaEkle(rs.getString("malzemeNo"),rs.getString("sonDurum"),rs.getString("sonIslemZamani"));

        }

        rs.close();
        conn.close();

    } catch (ClassNotFoundException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (SQLException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

} 
```

在 KuyrugaEkle 函数中，我动态更改布局，并且在该函数中出现错误。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T06:58:29.213

不允许从除 main 之外的线程修改 UI，您可以在 function 中执行此操作`kuyrukKontrol`。使用`Handler`或`runOnUiThread`在主线程上执行它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T07:28:09.557

创建 MyThread 的对象并在 runOnUiThread 方法中使用它

```
MyThread mt = new MyThread(); 
```

获取 Activity 的上下文并使用以下代码

```
Activity a=(Activity)context;
            a.runOnUiThread(mt); 
```

将 Applications 上下文传递给 MyThread 类的构造函数并按照我上面提到的那样使用它。

# jquery - 将 JQuery 从 noConflict 模式恢复到其原始状态

> ID：10204385
> 
> 赞同：1
> 
> 时间：2012-04-18T06:56:21.690
> 
> 标签：jquery

如何将 jQuery 从 noConflict 模式恢复到标准模式。

我想在一侧使用两个版本的 JQuery。

```
<script type="text/javascript">
  window.jqSite = jQuery.noConflict(true);      
</script>
<script type="text/javascript" src="jquery.new.js" charset="utf-8"></script>

<!-- The following code is using $ and jQuery from jquery new -->
<script type="text/javascript" src="some-script.js" charset="utf-8"></script>

<!-- reverting back to original jquery lib used on the site -->
<script type="text/javascript">
  jQuery.noConflict(true)
  $ = jQuery = window.jqSite;
</script> 
```

使用上面的代码，$ 和 jQuery 变量没有正确解析，我得到错误“$ 不是函数”。

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T07:27:33.740

首先，在一个站点上使用两个版本的 jQuery 听起来是个坏主意，随着时间的推移会导致混乱。是否可以修复 some-script.js 以使用与站点其余部分相同版本的 jQuery？

话虽如此，听起来 $ 和 jQuery 引用错误来自 some-script.js。你能把你的真实代码贴在某个地方让我们看看吗？

我能想到的一个问题是，您应该确保 some-script.js 创建对其 jQuery 版本的新引用，以便它创建的引用 jQuery 的任何函数在 window.$ 之后继续使用 jQuery.new.js 中的 jQuery和 window.jQuery 被重置为 window.jqSite。

# python - 在另一个属性上具有排序顺序的 IN 查询的预期结果是什么？

> ID：10204386
> 
> 赞同：-2
> 
> 时间：2012-04-18T06:56:24.753
> 
> 标签：python, google-app-engine, google-cloud-datastore

根据文档...

> IN 运算符还执行多个查询，针对指定列表中的每个项目执行一个查询，所有其他过滤器都相同，并且 IN 过滤器替换为相等 (==) 过滤器。**结果按列表中项目的顺序合并**。

如果另一个属性有排序顺序会发生什么？

```
query = Post.query(Post.tags.IN(['python', 'ruby', 'php'])).order(-Post.views)
results = query.fetch(20) 
```

结果会按照浏览次数降序排列吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T04:27:16.273

是的，结果将按照您指定的顺序排列。如果 SDK 不能为您提供您请求的结果，它不会让您执行查询。

# java - 正则表达式字符组合

> ID：10204389
> 
> 赞同：0
> 
> 时间：2012-04-18T06:56:30.500
> 
> 标签：java, regex

嗨，我想形成像这样的字符组合

字母、数字的组合(2) 特殊字符(1) 最少 6 个字符

我尝试使用

```
((?=.*\\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[@#$%]).{6,}) 
```

但我无法进行上述组合。如何做到这一点。？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T07:02:29.463

你的正则表达式基本上没问题。

您没有提供您正在使用的正则表达式引擎的类型，因此除非它是 Java 或其他不支持逐字字符串的语言，否则您可能需要更改`\\d`为`\d`，或者正则表达式的那部分将尝试匹配文字反斜杠, 后跟一个`d`.

此外，您应该将正则表达式锚定到字符串的开头以提高性能。在 Java 中，该`.matches()` 方法会隐式地为您执行此操作。

然后，目前您的正则表达式只需要一个数字，但需要两个 ASCII 字母（一个小写，一个大写）。这真的是你想要的吗？

我会这样解释您的要求：

```
if (subjectString.matches("(?=.*\\d.*\\d)(?=.*[A-Za-z])(?=.*[@#$%]).{6,}")) {
    // Password matches the criteria
} else {
    // Password doesn't match the criteria
} 
```

# ios - 我们如何在 iOS 4.0 模拟器和 iOS 5.1 中测试 iOS 应用程序

> ID：10204391
> 
> 赞同：1
> 
> 时间：2012-04-18T06:56:32.700
> 
> 标签：ios, osx-lion, osx-snow-leopard, ios5.1

我正在使用 Snow Leopard 开发 iOS 应用程序。现在我打算以 iOS 5.1 为目标，所以我必须升级到 Lion OS X。但我知道 iOS 3.0 到 4.2 版本无法在具有 Lion OS X 的模拟器中进行测试。

有没有其他方法可以在 Lion OS X 中测试 iOS 3.0 到 iOS 5.1 模拟器中的应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T07:03:21.343

If you go Xcode>Preferences>Downloads you can download the iOS ~~4.2~~ 4.3 simulator. Unfortunately you can't test on the iOS 3 simulator. Although it pains me to say it (I have an old device as well as a new one), the vast majority of the market is not on iOS 3, so making it backwards compatible is probably not worth it. If you still want to test it, get yourself an 8 GB iPod Touch 1st Gen from eBay.

# android - 在启动 android 应用程序时创建日志文件

> ID：10204399
> 
> 赞同：0
> 
> 时间：2012-04-18T06:56:57.983
> 
> 标签：android

我想在启动我的 android 应用程序时在 sd 卡中创建一个日志文件，并希望将日志写入该文件。如何完成？如果有人知道请帮助我..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T07:14:54.540

我为此创建了课程：

```
public class Logger {

public void appendLog(String text,String filename)
    {       
       File dir = new File("sdcard/YourFolderName");
       if(!dir.exists())
       {
           dir.mkdirs();
       }

       File logFile = new File("sdcard/YourFolderName/"+filename+".txt");

       if (!logFile.exists())
       {
          try
          {
             logFile.createNewFile();

          } 
          catch (IOException e)
          {
             // TODO Auto-generated catch block

             e.printStackTrace();

          }
       }
       try
       {
          //BufferedWriter for performance, true to set append to file flag

          BufferedWriter buf = new BufferedWriter(new FileWriter(logFile, true)); 

          buf.append(text);

          buf.newLine();

          buf.close();

       }
       catch (IOException e)
       {
          // TODO Auto-generated catch block

           e.printStackTrace();

       }
    } 
```

}

在方法中，您可以传递日志详细信息和 txt 文件名:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T07:18:23.733

```
private File cacheDir;

      if(android.os.Environment.getExternalStorageState().equals(
           android.os.Environment.MEDIA_MOUNTED))

        cacheDir=new File(android.os.Environment.getExternalStorageDirectory(),"MyLog");
     if(!cacheDir.exists())
        cacheDir.mkdirs(); 
```

它将在 SD 卡中为您创建一个目录，您可以创建一个文件并在其中写入您的日志。

```
 File f = new File(cacheDir, filename);   //(File dirPath,String filename) 
```

使用这一行，您可以在目录中创建一个文件并将日志写入该文件...

如果这有助于将其标记为正确:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-27T07:36:12.337

**在 SD 卡中创建日志文件**

使用此方法。只需将消息作为参数传递给此方法。

```
 public static void addRecordToLog(String message){
    //Not in release: Log.d("SmartCalendar", message);
    LogRecord logRecord = new LogRecord(Level.INFO, message);
    FileHandler logger = null;
    if (logger == null) {
        try {
            logger = new FileHandler(Environment.getExternalStorageDirectory() + "/Android" + Environment.getDataDirectory() + "/dwivedi/files/log_"  + new Date().getTime() + ".xml");
        } catch (IOException e) {
            Log.e("SmartCalendar", e.toString());
            // it seems that no dirs on sd card
            File dir = new File(Environment.getExternalStorageDirectory() + "/Android" + Environment.getDataDirectory() + "/dwivedi/files/");
            dir.mkdirs();
            try {
                logger = new FileHandler(Environment.getExternalStorageDirectory() + "/Android" + Environment.getDataDirectory() + "/dwivedi/files/log_"  + new Date().getTime() + ".xml");
            } catch (IOException e1) {
                Log.e("SmartCalendar", e1.toString());
                return;
            }
        } catch (Exception e) {
            Log.e("SmartCalendar", e.toString());
            return;
        }
    }
    logger.publish(logRecord);      
} 
```

**注意：** *不要忘记提供 READ 和 WRITE 外部存储的权限：*

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
<uses-permission android:name="android.permission.READ_EXTERNAL_STORAGE"/> 
```

# string - BAT :~ 字符串语法

> ID：10204402
> 
> 赞同：0
> 
> 时间：2012-04-18T06:57:10.960
> 
> 标签：string, syntax, batch-file

我看到 BAT 文件中经常使用的 ':~' 符号，我认为它在某个位置获得了一个字符，但我找不到任何对此的确认，也找不到如何/何时使用它（它似乎可以得到范围）。

请您对此有所了解，谢谢。

```
SET STRING=C:\MyDocuments\
IF "%STRING:~-1%"=="\" SET STRING=%STRING:~0,-1%
ECHO String: %STRING% 
```

%%A:~-1 也应该工作吗？还是我需要将它括在“”中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T07:02:37.100

类型

```
help set 
```

在命令行中，您将获得完整的描述。有些也记录在`for`命令的帮助中。所以`help for`会给你额外的信息。

这是“帮助集”命令输出的一部分：

```
May also specify substrings for an expansion.

    %PATH:~10,5%

would expand the PATH environment variable, and then use only the 5
characters that begin at the 11th (offset 10) character of the expanded
result.  If the length is not specified, then it defaults to the
remainder of the variable value.  If either number (offset or length) is
negative, then the number used is the length of the environment variable
value added to the offset or length specified.

    %PATH:~-10%

would extract the last 10 characters of the PATH variable.

    %PATH:~0,-2%

would extract all but the last 2 characters of the PATH variable. 
```

# mobile - 如何将手机用作 USB 尤其是诺基亚 S-60 系列

> ID：10204403
> 
> 赞同：1
> 
> 时间：2012-04-18T06:57:19.137
> 
> 标签：mobile, java-me, nokia, samsung-mobile

我正在 Java Netbeans 中进行一个项目，我正在使用手机**诺基亚 E-72**（通过数据线连接到计算机），并且我正在通过手机从/向计算机发送和接收消息。

但问题是，一旦手机连接到计算机，大多数手机都会自动在计算机中安装特定的设备驱动程序（即移动套装），而**我需要在我的代码中将手机用作 USB**，因为端口繁忙如果移动设备未作为 USB 连接，则由相应的移动套件/驾驶员消耗。

**三星 Galaxy S2**带有内置的 TP-Link 类软件，因此当我将 S2 与计算机连接时，我可以选择将手机与三星套装（即 Kies）连接或作为 USB 连接。

我想知道如何为任何其他手机获得同样的东西？

# android - Android：Phonegap SQLite 问题

> ID：10204404
> 
> 赞同：1
> 
> 时间：2012-04-18T06:57:22.430
> 
> 标签：android, sqlite, cordova

我正在尝试使用 Phonegap 将数据插入 SQLite。

当硬编码如下

```
tx.executeSql('DROP TABLE IF EXISTS DEMO');
tx.executeSql('DROP TABLE IF EXISTS DEMO');
tx.executeSql('CREATE TABLE IF NOT EXISTS DEMO (id unique, data)');
tx.executeSql('INSERT INTO DEMO (id, data) VALUES (1, "First row")');
tx.executeSql('INSERT INTO DEMO (id, data) VALUES (2, "Second row")'); 
```

但是当我尝试从如下表格中插入动态值时

```
var third = $('#data').val();
alert(third);
tx.executeSql('INSERT INTO DEMO (id, data) VALUES (3,'+ third +')'); 
```

我在 logcat 中得到一个异常，如下所示

```
04-18 12:20:51.011: I/SqliteDatabaseCpp(7352): sqlite returned: error code = 1, msg = no such column: test, db=/data/data/com.eyepax.phonegap/databases/webview.db 
```

我很迷茫，无法弄清楚问题所在。有人可以帮帮我吗？

完整的js文件如下

```
function onDeviceReadyStorage() {
        var db = window.openDatabase("Database", "1.0", "Cordova Demo", 200000);
        db.transaction(populateDB, errorCB, successCB);

    }

function populateDB(tx) {
     tx.executeSql('DROP TABLE IF EXISTS DEMO');
     tx.executeSql('CREATE TABLE IF NOT EXISTS DEMO (id unique, data)');
     tx.executeSql('INSERT INTO DEMO (id, data) VALUES (1, "First row")');
     tx.executeSql('INSERT INTO DEMO (id, data) VALUES (2, "Second row")');
     var third = $('#data').val();
     alert(third);
     tx.executeSql('INSERT INTO DEMO (id, data) VALUES (3,'+ third +')');
}

function errorCB(err) {
    alert("Error processing SQL: "+err.code);
}

function successCB() {
    alert("success!");
    alert("now query...");
    var db = window.openDatabase("Database", "1.0", "Cordova Demo", 200000);
        db.transaction(queryDB, errorCB);
}

function queryDB(tx) {
        tx.executeSql('SELECT * FROM DEMO', [], querySuccess, errorCB);
       // alert("came to query");
    }

function querySuccess(tx, results) {
        //alert("Query sucess");
        // this will be empty since no rows were inserted.
        console.log("Insert ID = " + results.rows.item(0).data);
        // this will be 0 since it is a select statement
        console.log("Rows Affected = " + results.rowsAffected);
        // the number of rows returned by the select statement
       console.log("Insert ID = " + results.rows.length);
       var htmlString = "<ul>";
       for(var i = 0; i<results.rows.length; i++){
           console.log("Result from DB = " + results.rows.item(i).data);
            htmlString = htmlString + "<LI>"+ results.rows.item(i).data +"</LI>"   
       }
       htmlString = htmlString + "</UL>";

       $('#myDBData').html(htmlString);
    } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-18T07:33:29.147

尝试在变量之前和之后添加“。像这样：

```
tx.executeSql('INSERT INTO DEMO (id, data) VALUES (3,"'+ third +'")'); 
```

**编辑：**

请参阅[下面的评论](https://stackoverflow.com/questions/10204404/android-phonegap-sqlite-issue/10204915?noredirect=1#comment74500026_10204915)。为避免 SQL 注入漏洞，请按照[答案](https://stackoverflow.com/a/26058813/1321873)并使用？占位符而不是直接附加值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-26T11:46:40.307

```
tx.executeSql('INSERT INTO DEMO (id, data) VALUES (3,?)',[third]); 
```

# android - 在android中加载两个webview

> ID：10204411
> 
> 赞同：0
> 
> 时间：2012-04-18T06:57:59.750
> 
> 标签：android, url, android-activity, webview

我有需要在 webview 中加载 url 并在该 webview 中单击按钮的要求，我必须打开一个新的 webview。

我已经为它编写了以下代码，但它不会抛出任何异常加载新页面/webview。

我必须为此使用单一活动。如果您有任何想法，请提供解决方案。

```
public class WebScreen extends Activity{  
    public static final String URL = null;  
    NewWebview mWebView=null;  
    WebView webView=null;  

     /** Called when the activity is first created. */  
    @Override  
    public void onCreate(Bundle savedInstanceState) {  
        super.onCreate(savedInstanceState);  
        setContentView(R.layout.webscreen);  

        String url = getIntent().getExtras().getString("URL");  
        Log.i("URLLL",url);  
        webView = new WebView(this);              
        webView.loadUrl(url);  

        mWebView = new NewWebview(this);  

    }  
}  

public class NewWebview {  

    private Context context;  

    public NewWebview(Context context) {  
        // TODO Auto-generated constructor stub  
        Log.i("","New webViewwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwww");  
        this.context=context;  
        WebView webView=new WebView(context);  
        ((Activity)context).setContentView(R.layout.webscreen);  
        webView.loadUrl("www.google.com");

    }  
} 
```

谢谢斯内哈
_

# java - 存储实体的 ID 生成（App 引擎）

> ID：10204413
> 
> 赞同：0
> 
> 时间：2012-04-18T06:58:02.420
> 
> 标签：java, google-app-engine, jdo

如果我有一个这样定义的实体，它存储在 App 引擎的大表中：

```
@Entity
@Table(name = "users")
public class User implements Serializable{

    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Column(name = "id", nullable = false)
    private Long id; 
    private String username; 
    private String password;
    private String encryptedPassword;
    private String creationDate;
    private String modificationDate;
    private Boolean validated;

        // Code omitted
} 
```

如果我有另一个带有另一个表注释的实体，`@Table(name = "profile")`那么每个实体 ID 是否会相互独立。例如，有一个 ID 为 0 的 User 实体和一个 ID 为 0 的 Profile 实体。

我的意思是，由于实体存储在“大表”中，因此将为所有存储的实体分配顺序 ID。添加此类注释是否解决了实体具有独立 ID 序列的问题？

我想要完成的是每个实体都有自己的 ID，从 0 到 n，每个实体类型都有自己的序列，例如，用户实体将从零开始依次处于 Long 类型，并且与Profile 实体也以 0 开头。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T07:03:19.973

是的，无论您拥有多少实体，自动生成的 id 或序列始终是独立的，对于 PostgreSQL，如果您将数据类型设为 bigint，则必须在数据库中手动创建序列，但如果您将其视为 bigserial无需在数据库服务器中为该表显式创建序列。享受.........

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T04:25:45.807

不，所有种类都有自己的 ID 序列，可能会重叠。您可以使用 allocate_ids API 来分配唯一 ID，但请注意，这仍然不允许您在不知道实体类型的情况下查询实体（我想这就是您要这样做的原因），因为您必须查询每个请找到包含您 ID 的那个。

# javascript - 在 JavaScript 中的另一个函数中定义一个函数

> ID：10204420
> 
> 赞同：95
> 
> 时间：2012-04-18T06:58:23.850
> 
> 标签：javascript

```
function foo(a) {
    if (/* Some condition */) {
        // perform task 1
        // perform task 3
    }
    else {
        // perform task 2
        // perform task 3
    }
} 
```

我有一个结构类似于上面的函数。我想将*任务 3*抽象为一个函数，`bar()`但我希望将此函数的访问限制在`foo(a)`.

为了达到我想要的，改成下面这样对吗？

```
function foo(a) {
    function bar() {
        // Perform task 3
    }

    if (/* Some condition */) {
        // Perform task 1
        bar();
    }
    else {
        // Perform task 2
        bar();
    }
} 
```

如果以上是正确的，`bar()`每次`foo(a)`被调用时都会重新定义吗？（我担心这里会浪费 CPU 资源。）

* * *

## 回答 #1

> 赞同：136
> 
> 时间：2012-04-18T07:00:11.080

是的，你所拥有的是正确的。一些注意事项：

*   `bar`在每次调用函数时创建`foo`，但是：
    *   在现代浏览器上，这是一个非常快的过程。（有些引擎很可能只为它编译一次*代码*，然后每次都在不同的上下文中重用该代码；谷歌的 V8 引擎 [在 Chrome 和其他地方] 在大多数情况下都会这样做。）
    *   根据具体`bar`情况，某些引擎可能会确定它们可以“内联”它，从而完全消除函数调用。V8 做到了这一点，我敢肯定它不是唯一这样做的引擎。当然，只有在不改变代码行为的情况下，他们才能这样做。
*   `bar`每次创建的性能影响（如果有的话）在 JavaScript 引擎之间会有很大差异。如果`bar`是微不足道的，它将从无法检测到相当小。如果您没有`foo`连续调用数千次（例如，从`mousemove`处理程序），我不会担心。即使您是，我也只会在看到速度较慢的引擎出现问题时才会担心。[这是一个涉及 DOM 操作的测试用例](http://jsperf.com/cost-of-creating-inner-function-v2)，这表明存在影响，但影响不大（可能被 DOM 的东西冲淡了）。[这是一个进行纯计算的测试用例](http://jsperf.com/cost-of-creating-inner-function/3)，它显示出更高的影响，但坦率地说，即使是*微秒*的差异，因为即使是 92% 的增长也需要*微秒*几秒钟的发生还是非常非常快的。直到/除非您看到现实世界的影响，否则无需担心。
*   `bar`只能从函数内部访问，并且它可以访问该函数调用的所有变量和参数。这使得这是一个非常方便的模式。
*   请注意，因为您使用了函数*声明*，所以将声明放在哪里（顶部、底部或中间）并不重要——只要它位于函数的顶层，而不是流控制语句内，即语法错误），它是在运行第一行逐步代码之前定义的。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-04-18T07:30:57.780

这就是闭包的用途。

```
var foo = (function () {
  function bar() {
    // perform task 3
  };

  function innerfoo (a) { 
    if (/* some cond */ ) {
      // perform task 1
      bar();
    }
    else {
      // perform task 2
      bar();
    }
  }
  return innerfoo;
})(); 
```

Innerfoo（一个闭包）持有对 bar 的引用，并且只有对 innerfoo 的引用从匿名函数返回，该匿名函数只调用一次以创建闭包。

酒吧不能通过这种方式从外面进入。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-04-18T07:13:21.673

```
var foo = (function () {
    var bar = function () {
        // perform task 3
    }
    return function (a) {

        if (/*some condition*/) {
            // perform task 1
            bar();
        }
        else {
            // perform task 2
            bar();
        }
    };
}()); 
```

闭包保持包含的范围，`bar()`从自执行匿名函数返回新函数将更可见的范围设置为`foo()`。匿名自执行函数只运行一次，所以只有一个`bar()`实例，每次执行`foo()`都会用到它。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-04-18T07:06:17.340

是的，这很好用。

每次输入外部函数时都不会重新创建内部函数，而是重新分配它。

如果您测试此代码：

```
function test() {

    function demo() { alert('1'); }

    demo();
    demo = function() { alert('2'); };
    demo();

}

test();
test(); 
```

它将显示`1`, `2`, `1`, `2`, 不是`1`, `2`, `2`, `2`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-08-08T17:25:39.620

我创建了一个 jsperf 来测试嵌套与非嵌套以及函数表达式与函数声明，我惊讶地发现嵌套测试用例的执行速度比非嵌套快 20 倍。（我预计相反或可以忽略不计的差异）。

[https://jsperf.com/nested-functions-vs-not-nested-2/1](https://jsperf.com/nested-functions-vs-not-nested-2/1)

这是在 Chrome 76、macOS 上。

# java - 试图在linux中设置类路径

> ID：10204421
> 
> 赞同：1
> 
> 时间：2012-04-18T06:58:27.507
> 
> 标签：java

我找到了我的 JRE 的位置

```
/usr/local/jdk1.7.0_03/jre 
```

但是所有类文件都存储在哪里？我应该将类路径设置为什么？

具有空类路径的 Java 是否仍会在安装期间使用的默认目录中查找？

启动时 jar 是否可以包含提前指定类路径的元数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T07:10:03.453

Java 跟踪几个目录以查找程序所需的类。这是搜索的顺序：

```
1) <JDK/JRE>/lib
2) <JDK/JRE>/lib/ext
3) Current directory
4) Additional jars or classes with -cp argument while compiling or executing. 
```

如果它没有找到任何这些目录，那么它会简单地通过`ClassNotFoundException`

```
Can jars when launched contain meta data that specifies the 
class path ahead of time? 
```

答：是的。在编译或构建 jar 时，可以传递几个参数来标记主类（如果它是可执行 jar 以及`META-INF`环境等）。

请通过有关`META-INF`jar 管理信息的链接。[Java 中的 META-INF 信息](http://docs.oracle.com/javase/1.4.2/docs/guide/jar/jar.html#The%20META-INF%20directory)

# linux - linux中等效的Tasklist.exe

> ID：10204433
> 
> 赞同：0
> 
> 时间：2012-04-18T06:59:00.893
> 
> 标签：linux, taskmanager

我想在 Ubuntu Linux 中开发一个任务管理器。我在 Eclipse 中运行的 Windows 中有一个任务管理器。我得到了输出。但是在 Linux 中，“tasklist.exe”查找正在运行的进程的等效方法是什么？

请帮我..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T07:02:05.107

您可以使用该`ps`命令来确定用户、进程、用法和其他琐事。

你不认为top相当于tasklist.exe吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T02:09:24.997

`ps -ef`会让你运行所有的任务

`man ps`将为您提供所有选择

```
import java.io.BufferedReader;
import java.io.InputStreamReader;

public class psef
{

public static void main(String args[]) throws Exception
{

    try
    {
        String line;
        Process p = Runtime.getRuntime().exec("ps -ef");
        BufferedReader input = new BufferedReader(new InputStreamReader(p.getInputStream()));
        while ((line = input.readLine()) != null)
        {
            System.out.println(line);
        }
        input.close();
    }
    catch (Exception err)
    {
        err.printStackTrace();
    }
}
} 
```

# ebean - Ebean 如何检查模型是否已增强？

> ID：10204436
> 
> 赞同：3
> 
> 时间：2012-04-18T06:59:06.407
> 
> 标签：ebean

我定义了一个没有字段的基本模型，并通过 Ebean 的 eclipse 插件对其进行了增强。然后我用java反编译器反编译，发现ebean添加了一些字段和方法：

```
private static String _EBEAN_MARKER = "play.modules.ebean.Model";

protected EntityBeanIntercept _ebean_intercept = new EntityBeanIntercept(this);

protected transient Object _ebean_identity;

public String _ebean_getMarker() {
    return _EBEAN_MARKER;
}

public EntityBeanIntercept _ebean_getIntercept() {
    return this._ebean_intercept;
}

public EntityBeanIntercept _ebean_intercept() {
    if (this._ebean_intercept == null)
        this._ebean_intercept = new EntityBeanIntercept(this);
    return this._ebean_intercept;
}

public void addPropertyChangeListener(PropertyChangeListener listener) {
    this._ebean_intercept.addPropertyChangeListener(listener);
}

public void addPropertyChangeListener(String name, PropertyChangeListener listener) {
    this._ebean_intercept.addPropertyChangeListener(name, listener);
}

public void removePropertyChangeListener(PropertyChangeListener listener) {
    this._ebean_intercept.removePropertyChangeListener(listener);
}

public void removePropertyChangeListener(String name, PropertyChangeListener listener) {
    this._ebean_intercept.removePropertyChangeListener(name, listener);
}

public void _ebean_setEmbeddedLoaded() {}

public boolean _ebean_isEmbeddedNewOrDirty() {
    return false;
}

public Object _ebean_newInstance() {
    return new Model();
} 
```

然后我将这些代码复制到原始模型类中，禁用 Ebean 的增强器，通过 eclipse 编译它。

我认为它应该具有与 Ebean 增强相同的效果。

然后我把它打包成一个jar，放到我的项目中，定义了一个模型类`Article`来扩展它。

但是有一个错误：

```
An unexpected error occured caused by exception PersistenceException:
java.lang.IllegalStateException: Class [class test.Model] is not enhanced 
  and [class models.Article] is - (you can not mix!!) 
```

似乎 Ebean 没有将我的新`Model`课程视为增强型。我想知道 Ebean 如何检查一个类是否被它增强了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T08:37:55.407

Ebean 也为您的 models.Article 类添加了增强功能 - 基本上适用于每个属性/getter/setter。

再次创建这个层次结构（不向模型添加东西）并检查两个对象的结果代码。

# android - 尝试通过意图启动地图活动时出现 NoClassDefFoundError

> ID：10204441
> 
> 赞同：0
> 
> 时间：2012-04-18T06:59:35.290
> 
> 标签：android, android-maps

我是 Android 中 Map View 实现的新手。我正在尝试启动一个包含谷歌地图的新活动（单击按钮）。我似乎正在做[http://developer.android.com/guide/tutorials/views/hello-mapview.html](http://developer.android.com/guide/tutorials/views/hello-mapview.html)中提到的所有事情。但是我收到以下错误：-

```
04-18 12:11:11.332: E/AndroidRuntime(629): FATAL EXCEPTION: main
04-18 12:11:11.332: E/AndroidRuntime(629): java.lang.IllegalStateException: Could not execute method of the activity
04-18 12:11:11.332: E/AndroidRuntime(629):  at android.view.View$1.onClick(View.java:2144)
04-18 12:11:11.332: E/AndroidRuntime(629):  at android.view.View.performClick(View.java:2485)
04-18 12:11:11.332: E/AndroidRuntime(629):  at android.view.View$PerformClick.run(View.java:9080)
04-18 12:11:11.332: E/AndroidRuntime(629):  at android.os.Handler.handleCallback(Handler.java:587)
04-18 12:11:11.332: E/AndroidRuntime(629):  at android.os.Handler.dispatchMessage(Handler.java:92)
04-18 12:11:11.332: E/AndroidRuntime(629):  at android.os.Looper.loop(Looper.java:130)
04-18 12:11:11.332: E/AndroidRuntime(629):  at android.app.ActivityThread.main(ActivityThread.java:3683)
04-18 12:11:11.332: E/AndroidRuntime(629):  at java.lang.reflect.Method.invokeNative(Native Method)
04-18 12:11:11.332: E/AndroidRuntime(629):  at java.lang.reflect.Method.invoke(Method.java:507)
04-18 12:11:11.332: E/AndroidRuntime(629):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
04-18 12:11:11.332: E/AndroidRuntime(629):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
04-18 12:11:11.332: E/AndroidRuntime(629):  at dalvik.system.NativeStart.main(Native Method)
04-18 12:11:11.332: E/AndroidRuntime(629): Caused by: java.lang.reflect.InvocationTargetException
04-18 12:11:11.332: E/AndroidRuntime(629):  at java.lang.reflect.Method.invokeNative(Native Method)
04-18 12:11:11.332: E/AndroidRuntime(629):  at java.lang.reflect.Method.invoke(Method.java:507)
04-18 12:11:11.332: E/AndroidRuntime(629):  at android.view.View$1.onClick(View.java:2139)
04-18 12:11:11.332: E/AndroidRuntime(629):  ... 11 more
04-18 12:11:11.332: E/AndroidRuntime(629): Caused by: java.lang.NoClassDefFoundError: org.sam.LocationActivity
04-18 12:11:11.332: E/AndroidRuntime(629):  at org.sam.SelfDefActivity.showLocator(SelfDefActivity.java:16)
04-18 12:11:11.332: E/AndroidRuntime(629):  ... 14 more 
```

这是 showLocator 方法的样子：-

```
public void showLocator(View view) {
    Intent i = new Intent(SelfDefActivity.this, LocationActivity.class);
    final int result=1;
    startActivityForResult(i, result);
    finish();
} 
```

这就是我的清单的样子：--

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="org.sam"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="10" />

    <uses-permission android:name="android.permission.INTERNET" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@android:style/Theme.NoTitleBar" >
        <activity
            android:name=".SelfDefActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name=".LocationActivity"
            android:label="@string/location_activity" >
            <uses-library android:name="com.google.android.maps" />
        </activity>
    </application>

</manifest> 
```

谁能告诉我哪里出错了？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-18T07:11:51.253

在清单文件中为您的活动添加完整路径

像`android:name="your package name.LocationActivity"`

正如您的活动名称所暗示的那样，您正在检查位置，您应该为此添加权限，如下所示

您的清单应如下所示

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="org.sam"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="10" />

    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>
    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@android:style/Theme.NoTitleBar" >
        <activity
            android:name=".SelfDefActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name=".LocationActivity"
            android:label="@string/location_activity" >   
        </activity>
        <uses-library android:name="com.google.android.maps" />
    </application>

</manifest> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T07:12:41.283

你试试这种类型

```
</application>
         <activity
          ......
          .....

         </activity>

 <uses-library android:name="com.google.android.maps" />

</application> 
```

# jquery - 根据选择器更改css值？

> ID：10204442
> 
> 赞同：1
> 
> 时间：2012-04-18T06:59:36.407
> 
> 标签：jquery, jquery-animate

想知道是否有一种方法可以在没有所有冗余代码的情况下更改此动画的左侧 css 值？

```
$('.recent .view-details-wrapp').css({opacity:0, left:33});
$('.recent .controls-wrapp').hover(function() {
    $(this).find('.view-details-wrapp').stop()
        .animate({left:63}, {queue:false, duration:300, easing:'easeOutCubic'})
        .animate({opacity:'0.99'}, {queue:false, duration:400, easing:'easeOutCubic'});
},function() {
    $(this).find('.view-details-wrapp').stop()
        .animate({left:33}, {queue:false, duration:550, easing:'easeOutSine'})
        .animate({opacity:'0'}, {queue:false, duration:300, easing:'easeOutSine'});
});

$('.featured .view-details-wrapp').css({opacity:0, left:83});
$('.featured .controls-wrapp').hover(function() {
    $(this).find('.view-details-wrapp').stop()
        .animate({left:103}, {queue:false, duration:300, easing:'easeOutCubic'})
        .animate({opacity:'0.99'}, {queue:false, duration:400, easing:'easeOutCubic'});
},function() {
    $(this).find('.view-details-wrapp').stop()
        .animate({left:83}, {queue:false, duration:550, easing:'easeOutSine'})
        .animate({opacity:'0'}, {queue:false, duration:300, easing:'easeOutSine'});
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T07:03:38.137

将值放入变量中。

```
var left = 83;

$('.recent .view-details-wrapp').css({opacity:0, left:left});
$('.recent .controls-wrapp').hover(function() {
$(this).find('.view-details-wrapp').stop()
    .animate({left:(left + 30)}, {queue:false, duration:300, easing:'easeOutCubic'})
    .animate({opacity:'0.99'}, {queue:false, duration:400, easing:'easeOutCubic'});
},function() {
$(this).find('.view-details-wrapp').stop()
    .animate({left:left}, {queue:false, duration:550, easing:'easeOutSine'})
    .animate({opacity:'0'}, {queue:false, duration:300, easing:'easeOutSine'});
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T07:26:10.643

您可以使用`data`属性并将所需的目标值存储在这些属性中。

例如，如果您有这样的标记：

```
<div data-target="0.1"></div>
<div data-target="0.2"></div>
...
<div data-target="0.8"></div>
<div data-target="0.9"></div> 
```

您可以使用单个`hover`-binding 让所有这些 div 淡化为它们相应的值：

```
$('div').hover(function(){
    $(this).fadeTo('fast',$(this).data('target'));
},function(){
    $(this).fadeTo('fast',1);
});​ 
```

观看**[现场演示](http://jsfiddle.net/JDQ55/1/)**

在您的情况下，这可能意味着您将不同的值附加`left`到您的`.recent`和`.feature`元素并在悬停处理程序中检索此数据（触发悬停的元素通常可以通过引用`$(this)`）

关于`data`-attributes 的信息可以在**[MDN找到](https://developer.mozilla.org/en/HTML/Global_attributes#attr-data-%2a)**

或者（如果您不想或不能更改标记）您还可以找出触发处理程序内悬停的元素。因此，如果您有：

```
<div class="foo"></div>
<div class="bar"></div> 
```

你可以做：

```
$('div').hover(function(e){
    var t;
    if ($(e.target).hasClass('foo')){
       t = 0.2;
    } else if ($(e.target).hasClass('bar')){
       t = 0.8;
    }
    $(this).fadeTo('fast',t);
},function(){
    $(this).fadeTo('fast',1);
});​ 
```

`e.target`传递事件的目标在哪里。看**[另一个小提琴](http://jsfiddle.net/SGVSb/2/)**

# android - 如何在 TTS android 中设置更多语言？

> ID：10204443
> 
> 赞同：0
> 
> 时间：2012-04-18T06:59:43.450
> 
> 标签：android, text-to-speech

见下图

![在此处输入图像描述](../Images/3fe73b8289944c36a7eadbc0600adc9c.png)

![在此处输入图像描述](../Images/912d955980273a4b668a0a2f3d0be28a.png)

请看图片..首先我按下点击说话，然后打开单选按钮并选择语言..当我选择英语时，必须转换成英语。只需我选择一种语言，然后转换为相同的蹩脚语言。有可能吗？n 怎么样？

我会等待尽快回答它的紧急情况。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T07:44:07.000

***试试这个***

```
private TextToSpeech mTts;
protected void onActivityResult(
        int requestCode, int resultCode, Intent data) {
    if (requestCode == MY_DATA_CHECK_CODE) {
        if (resultCode == TextToSpeech.Engine.CHECK_VOICE_DATA_PASS) {
            // success, create the TTS instance
            mTts = new TextToSpeech(this, this);
        } else {
            // missing data, install it
            Intent installIntent = new Intent();
            installIntent.setAction(
                TextToSpeech.Engine.ACTION_INSTALL_TTS_DATA);
            startActivity(installIntent);
        }
    }
} 
```

//**并为语言编写此代码**

```
mTts.setLanguage(Locale.US);
mTts.isLanguageAvailable(Locale.UK))

mTts.isLanguageAvailable(Locale.FRANCE))

mTts.isLanguageAvailable(new Locale("spa", "ESP"))) 
```

//***让你的文本发声***

```
String myText1 = "Did you sleep well?";
String myText2 = "I hope so, because it's time to wake up.";
mTts.speak(myText1, TextToSpeech.QUEUE_FLUSH, null);
mTts.speak(myText2, TextToSpeech.QUEUE_ADD, null); 
```

# asp.net-mvc - What is a better way to display data from multiple view models

> ID：10204448
> 
> 赞同：0
> 
> 时间：2012-04-18T07:00:01.990
> 
> 标签：asp.net-mvc

I have two view models

```
public class DataImportViewModel
{
    public WccrViewModel wccrVM { get; set; }
    public string Status                { get; set; }
    public string ValidationResult      { get; set; }
    …
 }

public class WccrViewModel
{
    public double? WccrId  { get; set; }
    public string WccrDesc { get; set; }
} 
```

and my view

```
@model List<Mass.ViewModels.DataImportViewModel>

@using (Html.BeginForm("Validation", "DataImport", FormMethod.Post))
{ 
<input id="ProcessReshop" type="submit" value="Reshop" />

    for (int i = 0; i < 1; i++)
            {
    <div class="display-field">
        @Html.DisplayFor(model=>model[i].wccrVM.WccrId)
    </div>
    <div class="display-field">
        @Html.DisplayFor(model => model[i].wccrVM.WccrId)
    </div>
            } 
```

A table (not shown) is populated with the DataImportViewModel. I want to have the WccrViewModel displayed on top of the Table. I want to be able to access the WccrViewModel without the for loop...but it shows as a good example. How can I use wccrVM.WccrId without the for loop? Thanks in advance...cheers

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T07:38:39.617

另一个包含 DataImportViewModel 和 WccrViewModel 的视图模型类怎么样？

您的视图模型应该针对视图进行定制，如果视图同时调用这两个对象，为什么不创建一个符合其期望的视图模型呢？

# c++ - When do you have permission to use unlink()?

> ID：10204450
> 
> 赞同：0
> 
> 时间：2012-04-18T07:00:21.443
> 
> 标签：c++, c, unix, posix, unlink

I'm trying to predict which files I can delete using unlink().

My understanding so far is that the file must either be writeable to others, or have the same group id or owner id as the executing program.

Are there any other cases? I'm trying to explain how these files are deletable by my program (the program is not running as root nor in the admin group).

```
drwxrwxr-x  4 root  admin    136 Apr 17 23:53 .
drwxrwxr-x  7 root  admin    238 Jan 27 11:49 ..
-rwxrwxr-x  1 root  admin    560 Jan 27 11:49 info.nib
-rwxrwxr-x  1 root  admin  18399 Jan 27 11:49 keyedobjects.nib 
```

Thanks!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T07:02:41.240

Actually, it is the permissions of the *directory* that matter!

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T07:08:01.620

另一种情况是当另一个进程仍然有你要删除的文件时，打开。从手册页[`unlink`](http://linux.die.net/man/2/unlink)

**忙**

> 文件路径名无法取消链接，因为它正在被系统或其他进程使用；例如，它是一个挂载点，或者 NFS 客户端软件创建它以表示一个活动的但在其他方面无名的 inode（“NFS 愚蠢的重命名”）。

另请注意，该进程的有效 UID 应该对包含您要取消链接的文件路径**的目录具有写入权限。**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T07:18:29.547

正如其他人所提到的，该目录必须可由有效用户写入。但是，该文件可以应用扩展权限 (ACL) 以防止其被删除。从您展示的示例中，我认为您使用的是 Mac OS，对吗？在那里您可以[`ls -le`](http://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man1/ls.1.html)用来显示 ACL。[chmod(1) 联机帮助页](http://developer.apple.com/library/mac/#documentation/Darwin/Reference/Manpages/man1/chmod.1.html)告诉您各种权限。如果您想在程序中查询 ACL，您可能应该从阅读[acl(3) 手册页](http://developer.apple.com/library/mac/#documentation/Darwin/Reference/Manpages/man3/acl.3.html)开始。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T07:03:09.830

the directory it resides in should have `+w`

# html - Google Icons not linking... is it just HTML or CSS issue?

> ID：10204452
> 
> 赞同：0
> 
> 时间：2012-04-18T07:00:22.023
> 
> 标签：html, css

on my website [http://www.derekbeck.com/1775/](http://www.derekbeck.com/1775/) I have social media button icons, and strangely, the Google icons don't link, though they have links encoded. I can't figure it out. There are two google buttons: the white one is for the +1 and that doesn't work, the red one is to take you to the google page. Neither works in Google Chrome browser, but the red one works in IE9\. Any ideas? See any CSS or HTML errors?

Thanks for looking! Derek

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T07:36:29.133

Facebook iFrame 是您的问题：

iframe 的高度为：20px；宽度：200px；

改成下面的代码

iframe 的高度为：20px；宽度：74px；

```
<iframe scrolling="no" id="f234707a0d2f204" name="f21e0c9e1942cf6" style="border: medium none; overflow: hidden; height: 20px; width: 74px;" title="Like this content on Facebook." class="fb_ltr" src="http://www.facebook.com/plugins/like.php?api_key=122700491127449&amp;channel_url=http%3A%2F%2Fstatic.ak.facebook.com%2Fconnect%2Fxd_arbiter.php%3Fversion%3D4%23cb%3Dfb3ad41882f634%26origin%3Dhttp%253A%252F%252Fwww.derekbeck.com%252Fff890b510a65%26domain%3Dwww.derekbeck.com%26relation%3Dparent.parent&amp;extended_social_context=false&amp;font=tahoma&amp;href=http%3A%2F%2Fwww.facebook.com%2F1775thebook&amp;layout=button_count&amp;locale=en_US&amp;node_type=link&amp;sdk=joey&amp;send=false&amp;show_faces=false&amp;width=200"></iframe> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T07:08:05.260

这个分..

```
 <div id="connect_widget_4f8e67257c86d8966624510" class="connect_widget button_count"
       style="font-family: &quot;tahoma&quot;, sans-serif">..</div> 
```

是 200px 宽，并出现在 google div 边界的顶部。当您尝试单击 +1 时，您实际上是在单击 facebook div 的不可见区域。在谷歌浏览器中，右键单击 +1 按钮并单击检查元素。这将允许您查看 div 的边界。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T07:11:45.867

在您的 facebook 插件代码中，将宽度从 200px 更改为 85px。

您的 G+ 按钮没有问题。facebook 按钮与其重叠，使其不可点击。

@WhiteboardDev - 建议不要将宽度设置为由插件生成的 div，而是更改插件本身的宽度。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-18T09:40:05.400

There's this div `<div id="connect_widget_4f8e8b1c2eea08763746363" class="connect_widget button_count" style="font-family: &quot;tahoma&quot;, sans-serif">` with a fixed width (200px), that "covers" the google buttons, but it has a transparent background, so you're not seeing it.

solution: give this div `<div class="fb-likebox">` width: 200px;. It's the iframe's container, so it will make the google buttons shift to the right, and let you click them.

# javascript - Canvas shape animation

> ID：10204455
> 
> 赞同：1
> 
> 时间：2012-04-18T07:00:33.760
> 
> 标签：javascript, html

I want to animate shapes in canvas in 3 phase appearance of the shape, moving and disappear and these should execute one after other and stop at specified time so please help me.... I m trying with this code

```
function dummy_animate(){
  //execute it one after other....

   shadow(); 

   setTimeout("fadein_rect()" , 3000);

   move_timer =  setInterval(drawIt1,100);

  timerId_out = setInterval("fadeout()", 300);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T09:39:16.843

画布像电视屏幕一样工作，你应该重绘每一帧，这样你的代码就不起作用了

```
<canvas></canvas>
<style type="text/css">
    body{height:100%;width:100%;margin:0;padding:0;border:0;}
</style>

<script type="text/javascript">
(function () {
    var canvas = document.body.children[0],
    docElem = document.documentElement,

    h = canvas.height = docElem.clientHeight,
    w = canvas.width = docElem.clientWidth,
    ctx = canvas.getContext("2d"),
    timeout = 33,
    hc = h/2,
    wc = w/2,
    spd = 5;

    //console.log( ctx );
    function clear (  ) {
        ctx.fillRect ( 0, 0, w, h );
    }

    function update (  ) {
        clear();
        moveLeft();
    }

    function moveLeft (  ) {
        ctx.beginPath();
        ctx.moveTo ( wc, hc );
        ctx.lineTo ( wc = wc - spd, hc );
        ctx.closePath();
        ctx.stroke();
    }

    function init (  ) {

        ctx.lineWidth = 5;
        ctx.strokeStyle = "rgb(255,255,255)";

        // fade mask style
        // this is a very simply demo so i use this
        ctx.fillStyle = "rgba(0,0,0,0.3)"; 

        setInterval ( update , timeout );
    }

    init();
})()    

</script> 
```

# python - 以干净的 OOP Python 风格重写程序脚本

> ID：10204459
> 
> 赞同：2
> 
> 时间：2012-04-18T07:00:46.200
> 
> 标签：python, coding-style, wmi, implementation

我已经成功编写了一个 Powershell 脚本，它：

*   查询AD获取计算机列表
*   通过WMI查询每台计算机，获取软硬件信息
*   将收集到的数据插入 MySQL 数据库。

该脚本运行良好，但我不喜欢它的实现方式。它是程序性的，并且有很多代码重复，每次我需要更改某些东西时都会造成混乱。

现在，我想问你的是：使用 OOP 在 python 中实现它的最简洁的方法是什么？我想到了类似的东西（伪代码）：

```
Class ADquery
    function get_computers( UO ): return a list of computers in the specified UO

Class Computer
    constructor( computername )
    function query(): connect to the computer and pull the info through WMI
    function print(): print the collected info to the console (debug)
    property RAM
    property CPU
    ... 
```

问题：

1.  为了将收集到的数据保存到数据库中，我是否必须创建另一个对象（例如数据库）并将计算机对象传递给他或将成员函数添加到计算机类（例如 save_db() ）？

2.  如果我选择第二个选项，当我处理多个对象时，这不会导致大量的 MySQL 连接吗？

非常感谢，对不起我的英语不好

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T07:24:27.947

这种架构在我看来是合理的。

1.  你可以做任何一个，我不确定它是否真的会对像这样的小应用程序产生巨大的影响。

2.  潜在的。根据它的实现方式，您可以获得很多连接。如果您正在执行合理数量的插入，我会将它们粘贴在一个列表中并一次全部插入，如果您的代码可以这样做的话。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T07:46:57.233

You could also grab an Object Oriented Design book from the internet or your local bookstore, e.g. [Rumbaugh et al.](https://rads.stackoverflow.com/amzn/click/com/0136298419). I would also recommend reading up on Design Patterns, e.g. the book by [Gamma et. al.](https://rads.stackoverflow.com/amzn/click/com/0201633612). I'm currently doing that, and it is really helpful to look at standard patterns of how to solve a particular problem to shape your thought process about object oriented programming.

ps Your English isn't bad at all (note that I'm also not a native speaker ;)).

# asp.net - Can a users Outlook calendar be displayed on an ASP.NET web page in an Intranet?

> ID：10204462
> 
> 赞同：3
> 
> 时间：2012-04-18T07:01:19.643
> 
> 标签：asp.net, outlook

Is it possible to embed an Outlook calendar on a web page in an Intranet?

If yes, do you just embed a code snippet and configure a few tags eg something that would take less than a day? Or do you have to use an API, render your own HTML etc. which makes it a large job eg more than 2 days. We are experienced developers but have not done something like this before.

![enter image description here](../Images/b1f47cc451dccf636153790ec16aa853.png)

# centos - 找不到linux中的java_home环境变量

> ID：10204463
> 
> 赞同：0
> 
> 时间：2012-04-18T07:01:33.417
> 
> 标签：centos, environment-variables, java-7

我正在尝试在 linux 机器（centos 5.8）中添加 java_home

我将此部分添加到为我的机器中的所有用户设置 JAVA_HOME 和 PATH

> # vi /etc/profile
> 
> 导出 JAVA_HOME=/opt/jdkx.x.x_xx
> 
> 导出 PATH=$PATH:$JAVA_HOME/bin

设置完成后，我尝试使用 echo 命令进行验证

> 回声 $JAVA_HOME

但它没有给我任何路径。我的配置有问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T00:39:48.617

此方法将保留操作系统更新

echo "export JAVA_HOME=/usr/java/default/" > /etc/profile.d/java_home.sh

如果你有更多的 java install 版本，可能会有麻烦。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T08:33:32.247

JAVA_HOME 路径不同，因为我们经常安装不同版本的JDK，也可能安装不同的地方。一旦我试图找到一般的方式。有结果。

首先，查询已安装的jdk包名：`rpm -qa|grep java`

我的结果是：**java-1.6.0-openjdk**

其次，查询这个包的安装位置

```
rpm -ql java-1.6.0-openjdk 
```

大多数文件位于：**/usr/lib/jvm/java-1.6.0-openjdk-1.6.0.0.x86_64/**

去那里确认它是一个真正的JDK目录

第三，`export JAVA_HOME=/usr/lib/jvm/java-1.6.0-openjdk-1.6.0.0.x86_64/`在终端执行。或者为所有用户添加**/etc/bashrc**。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T07:04:13.743

问题已被编辑，答案不再有意义。

留作评论的占位符。

`echo $SHELL`会告诉你你正在使用哪个 shell。很可能是 /bin/bash。

假设 bash，/etc/profile 仅用于登录 shell (bash --login)，而不仅仅是新的交互式 shell。

即如果你

```
sh1% vi /etc/profile
sh1% bash # /etc/profile not read
sh2% echo $JAVA_HOME
sh2%

sh1% vi /etc/profile
sh2% bash --login # /etc/profile should be read.
sh2% echo $JAVA_HOME
/opt/blah/blah/blah
sh2% 
```

# java - 如何使面向android的应用程序修复？

> ID：10204465
> 
> 赞同：0
> 
> 时间：2012-04-18T07:01:45.453
> 
> 标签：java, android

我想让我的android应用程序固定定向，没有人可以通过任何力量改变应用程序的方向。到目前为止，我在清单的活动标签中使用了这些：

```
android:screenOrientation="portrait"
android:configChanges="orientation|keyboardHidden" 
```

它在我的模拟器中工作正常，但在真实设备中，当我按下方向更改按钮时，它的方向正在改变并强制关闭。接下来我该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T07:22:54.610

如果您在清单中定义**android:configChanges="orientation|keyboardHidden"** 则活动不会重新启动，而是会调用**onConfigurationChanged 。**

所以覆盖你的java文件中的onConfigurationChanged方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T07:16:14.827

这放入了mainfest

```
<activity
            android:name=".Assign"
            android:label="@string/app_name"
            android:screenOrientation="portrait" >
</activity> 
```

# c++ - basic_filebuf. Many strange text in output file

> ID：10204466
> 
> 赞同：0
> 
> 时间：2012-04-18T07:01:47.350
> 
> 标签：c++, std

1) I have this code

```
//... many code below
      std::basic_filebuf<char, std::char_traits<char> > streamIn;
      streamIn.open("file.txt", std::ios_base::trunc | std::ios_base::out);
      streamIn.sputn("Hello", 5);
//... 
```

But in file.txt I see many many strange text. Not only Hello. This file also contaqins all my records from DB! I don't know why

2) Can I use **std::basic_filebuf** without file? Like **std::basic_stringbuf**

**Solution for 1) is found**

```
// ...
    std::basic_filebuf<char, std::char_traits<char> > streamIn;
    streamIn.open("file.txt", std::ios_base::out);
    streamIn.sputn(responce.c_str(), responce.size());
    streamIn.close();

    streamIn.open("file.txt", std::ios_base::in);
//... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T07:39:58.907

[如此处](http://msdn.microsoft.com/en-us/library/tzf8k3z8%28v=vs.80%29.aspx)所述，basic_filebuf 是与文件交互的 basic_streambuf。

所以不，我认为没有文件就不能使用它。

您可能想要做的是使用 basic_streambuf 代替，并且您可以控制是否希望它是文件（使用 basic_filebuf）或字符串（使用 basic_stringbuf）。

# facebook - HTTP 400 Error when accessing Friends list in Facebook Graph API

> ID：10204467
> 
> 赞同：3
> 
> 时间：2012-04-18T07:01:50.470
> 
> 标签：facebook, facebook-graph-api

When I access the list of my friends using the URL [https://graph.facebook.com/me/friends?access_token=](https://graph.facebook.com/me/friends?access_token=)... I can see the list of my friends. I can do this programmatically as well.

Now, when I take the ID of any of my friends and replace it with "me" in the above URL, and paste the URL in the browser, I can see my friend's friends. I am unable to do this programmatically because it is giving me an HTTP 400 ERROR.

Does anyone know why this is possible by pasting the URL and not programmatically?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T07:33:53.690

您无法使用 facebook api 获得“朋友的朋友”。

例如，使用 Graph API Explorer尝试简单的[/me/friends ，它应该可以正常工作。](http://developers.facebook.com/tools/explorer?method=GET&path=me/friends)然后，取其中一个 id 并尝试与 FRIEND_ID/friends 相同，你应该得到这个：

```
{
  "error": {
    "message": "(#604) Can't lookup all friends of FRIEN_ID. Can only lookup for the logged in user or the logged in user's friends that are users of your app.", 
    "type": "OAuthException", 
    "code": 604
  }
} 
```

错误本身非常直截了当，并准确地解释了问题所在。至于为什么这会为您转换为 400 错误代码尚不清楚。

* * *

# 编辑

您在浏览器中也看不到“朋友的朋友”，它对您有用的原因（可能）是您检查朋友的用户（USER_ID/friends）安装了访问的应用程序令牌属于，从你到那个 url 的方式我假设应用程序是“Test_console”。

如何检查？从 url (USER_ID/friends?access_token=xxxxx) 复制访问令牌，转到[Facebook 调试器](https://developers.facebook.com/tools/debug)并将令牌粘贴到文本字段中，然后单击“调试”，它将显示有关应用程序的信息。

您检查它的用户可能已经“安装”了该应用程序，如果您为其他用户检查它，当您找到没有“安装”该应用程序的用户时，您会收到该错误。

我希望这可以为您澄清。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T06:00:10.843

我有朋友的朋友（有限）正在使用应用程序。我有同样的问题。虽然回答问题已经很晚了，但它会帮助别人。这就是为什么要回答这个问题。

我们可以得到那些是应用程序用户的朋友的朋友。

$fb_id= 需要朋友的朋友的用户 ID。

试试这个 fql 查询。

> $query="SELECT uid, name, work_history FROM user WHERE uid IN (SELECT uid2 FROM friend WHERE uid1 IN (SELECT uid FROM user WHERE uid IN (SELECT uid2 FROM friend WHERE uid1 = $fb_id ) and is_app_user=1)";

它需要以下要求：

1.  您的朋友需要使用应用程序。
2.  来自应用程序 read_stream、publish_stream、publish_checkins 的权限。

# iphone - How can i terminate my application in iPhone depends on time

> ID：10204468
> 
> 赞同：0
> 
> 时间：2012-04-18T07:01:52.140
> 
> 标签：iphone, objective-c, ios5

Iam displaying time in my application using NSTimer Class starting with 00:00.00 (mm:ss.SS) when my application launched. I want to terminate my application when time reaches to 75:00.00 (mm:ss.SS) in iPhone.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T07:09:33.640

启动计时器后，下一行立即调用以下方法：

```
[self performSelector:@selector(stopTimer) withObject:nil afterDelay:75.0]; 
```

stopTimer 方法应该是这样的：

```
-(void) stopTimer
{
    [timer invalidate];
    timer = nil;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T07:17:31.657

下面的代码片段将为您完成工作。但不建议使用 exit() 方法退出应用程序，因为它看起来应用程序已经崩溃给最终用户。我建议您在 75 分钟后显示警报并要求用户退出应用程序。

```
[NSTimer scheduledTimerWithTimeInterval:270000
                                     target:self
                                   selector:@selector(quitTheApp)
                                   userInfo:nil
                                    repeats:NO];

- (void)quitTheApp
{
    exit(0);
} 
```

# c - Convert char array to a int number in C

> ID：10204471
> 
> 赞同：40
> 
> 时间：2012-04-18T07:02:04.493
> 
> 标签：c, arrays, char, int

I want to convert a char array[] like:

```
char myarray[4] = {'-','1','2','3'}; //where the - means it is negative 
```

So it should be the integer: -1234 using **standard** libaries in **C**. I could not find any elegant way to do that.

I can append the '\0' for sure.

* * *

## 回答 #1

> 赞同：88
> 
> 时间：2012-04-18T07:14:34.530

我个人不喜欢`atoi`功能。我建议`sscanf`：

```
char myarray[5] = {'-', '1', '2', '3', '\0'};
int i;
sscanf(myarray, "%d", &i); 
```

这是非常标准的，它在`stdio.h`图书馆里:)

而且在我看来，它比数字字符串的任意格式提供了更多的自由`atoi`，并且可能还允许在末尾使用非数字字符。

**编辑** 我刚刚在网站上发现了这个奇妙的[问题](https://stackoverflow.com/questions/3420629/convert-string-to-integer-sscanf-or-atoi)，它解释和比较了 3 种不同的方法 -`atoi`和。此外，对（实际上是整个函数系列）有一个很好的更详细的见解。`sscanf``strtol``sscanf``*scanf`

**EDIT2** 看起来不仅仅是我个人不喜欢这个`atoi`功能。这是一个答案的[链接](https://stackoverflow.com/a/1488584/884412)，解释该`atoi`函数已被弃用，不应在较新的代码中使用。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-04-18T07:07:18.120

为什么不只使用atoi？例如：

```
char myarray[4] = {'-','1','2','3'};

int i = atoi(myarray);

printf("%d\n", i); 
```

正如预期的那样给了我：

```
-123 
```

更新：为什么不 - 字符数组不是以空值结尾的。嗬！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-05-23T22:05:55.057

在不将数组转换为字符串的情况下处理字符数组本身并不难。特别是在字符数组的长度已知或很容易找到的情况下。对于字符数组，长度必须在与数组定义相同的范围内确定，例如：

```
size_t len sizeof myarray/sizeof *myarray; 
```

当然，对于您可以使用的字符串`strlen`。

在已知长度的情况下，无论是字符数组还是字符串，都可以通过类似下面的short函数将字符值转换为数字：

```
/* convert character array to integer */
int char2int (char *array, size_t n)
{    
    int number = 0;
    int mult = 1;

    n = (int)n < 0 ? -n : n;       /* quick absolute value check  */

    /* for each character in array */
    while (n--)
    {
        /* if not digit or '-', check if number > 0, break or continue */
        if ((array[n] < '0' || array[n] > '9') && array[n] != '-') {
            if (number)
                break;
            else
                continue;
        }

        if (array[n] == '-') {      /* if '-' if number, negate, break */
            if (number) {
                number = -number;
                break;
            }
        }
        else {                      /* convert digit to numeric value   */
            number += (array[n] - '0') * mult;
            mult *= 10;
        }
    }

    return number;
} 
```

以上只是标准的 char 到 int 的转换方法，包括一些额外的条件。要处理杂散字符，除了`digits`and之外`'-'`，唯一的技巧是明智地选择何时开始收集数字以及何时停止。

如果您`digits`在遇到第一个时开始收集转换`digit`，则在遇到第一个`'-'`或时转换结束`non-digit`。当对（例如`file_0127.txt`）等索引感兴趣时，这使得转换更加方便。

一个简短的使用示例：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

int char2int (char *array, size_t n);

int main (void) {

    char myarray[4] = {'-','1','2','3'}; 
    char *string = "some-goofy-string-with-123-inside";
    char *fname = "file-0123.txt";

    size_t mlen = sizeof myarray/sizeof *myarray;
    size_t slen = strlen (string);
    size_t flen = strlen (fname);

    printf ("\n myarray[4] = {'-','1','2','3'};\n\n");
    printf ("   char2int (myarray, mlen):  %d\n\n", char2int (myarray, mlen));

    printf (" string = \"some-goofy-string-with-123-inside\";\n\n");
    printf ("   char2int (string, slen) :  %d\n\n", char2int (string, slen));

    printf (" fname = \"file-0123.txt\";\n\n");
    printf ("   char2int (fname, flen)  :  %d\n\n", char2int (fname, flen));

    return 0;
} 
```

**注意：**当遇到`'-'`分隔的文件索引（或类似的）时，您可以否定结果。（例如，`file-0123.txt`与`file_0123.txt`第一个将返回`-123`而第二个返回的位置相比`123`）。

**示例输出**

```
$ ./bin/atoic_array

 myarray[4] = {'-','1','2','3'};

   char2int (myarray, mlen):  -123

 string = "some-goofy-string-with-123-inside";

   char2int (string, slen) :  -123

 fname = "file-0123.txt";

   char2int (fname, flen)  :  -123 
```

**注意：**总是存在可能导致问题的极端情况等。这并不是为了在所有字符集等中都 100% 防弹，而是在绝大多数时间工作并提供额外的转换灵活性，而无需初始解析或转换为`atoi`or`strtol`等​​所需的字符串。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-05-23T15:46:13.763

所以，这个想法是将字符数字（在单引号中，例如'8'）转换为整数表达式。例如 char c = '8'; int i = c - '0' //将产生整数 8; 并按照908=9*100+0*10+8的原则将所有转换后的数字相加，循环完成。

```
char t[5] = {'-', '9', '0', '8', '\0'}; //Should be terminated properly.

int s = 1;
int i = -1;
int res = 0;

if (c[0] == '-') {
  s = -1;
  i = 0;
}

while (c[++i] != '\0') { //iterate until the array end
  res = res*10 + (c[i] - '0'); //generating the integer according to read parsed numbers.
}

res = res*s; //answer: -908 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-07-02T20:57:57.010

这不是问题所要问的，但我使用了@Rich Drummond 的答案来处理从标准输入读取的以空值结尾的字符数组。

```
char *buff;
size_t buff_size = 100;
int choice;
do{
    buff = (char *)malloc(buff_size *sizeof(char));
    getline(&buff, &buff_size, stdin);
    choice = atoi(buff);
    free(buff);

}while((choice<1)&&(choice>9)); 
```

# sql-server - SQL-Server: The backup set holds a backup of a database other than the existing

> ID：10204480
> 
> 赞同：562
> 
> 时间：2012-04-18T07:02:41.023
> 
> 标签：sql-server

I am trying to restore a SQL Server backup file for my database, but it is throwing an error as follow:

> The backup set holds a backup of a database other than the existing

My database in SQL Server 2008 and the backup file is in 2005.

What can be the problem?

* * *

## 回答 #1

> 赞同：903
> 
> 时间：2013-02-20T11:41:25.417

我也遇到过这个问题。

解决方案 ：

*   不要创建空数据库并将`.bak`文件恢复到其中。
*   使用通过右键单击 SQL Server Management Studio 的“数据库”分支可访问的**“恢复数据库”**选项，并在提供要恢复的源的同时提供数据库名称。
*   如果其他数据库仍然存在，还要更改“文件”处的文件名。否则你会得到“文件'...'不能被覆盖。它正在被数据库'yourFirstDb'使用”。

* * *

## 回答 #2

> 赞同：203
> 
> 时间：2012-04-18T07:16:03.230

任何一个：

1)`WITH REPLACE`在使用`RESTORE`命令时使用（如果使用 GUI，在选项 -> 覆盖现有数据库 ( `WITH REPLACE`) 下找到）。

2）使用命令`Delete`再次发生冲突并恢复的旧数据库。`RESTORE`

检查[链接](http://blog.sqlauthority.com/2007/09/27/sql-server-fix-error-3154-the-backup-set-holds-a-backup-of-a-database-other-than-the-existing-database/)以获取更多详细信息。

* * *

## 回答 #3

> 赞同：103
> 
> 时间：2014-05-15T08:29:30.187

首先创建一个同名的空白数据库。然后去恢复选项

在左侧窗格的**选项**下不要忘记选择

*   覆盖现有数据库
*   保留复制设置

![在此处输入图像描述](../Images/b9adb4d7eb58300521af088ee3f5d0d1.png)

而已

* * *

## 回答 #4

> 赞同：56
> 
> 时间：2015-12-23T10:31:16.807

遇到同样的问题并通过这样做找到了解决方案，使用 SSMS 2014

```
- 只需选择选项覆盖现有数据库（替换）

```

[![现有数据库>任务>还原>数据库](../Images/e3b21f41d2ce0a74fb330cf9d94f03f3.png)](https://i.stack.imgur.com/XRhmL.png)

* * *

## 回答 #5

> 赞同：41
> 
> 时间：2015-05-08T14:53:24.233

```
USE [master];
GO

CREATE DATABASE db;
GO

CREATE DATABASE db2;
GO

BACKUP DATABASE db TO DISK = 'c:\temp\db.bak' WITH INIT, COMPRESSION;
GO

RESTORE DATABASE db2
  FROM DISK = 'c:\temp\db.bak'
  WITH REPLACE,
  MOVE 'db' TO 'c:\temp\db2.mdf',
  MOVE 'db_log' TO 'c:\temp\db2.ldf'; 
```

* * *

## 回答 #6

> 赞同：33
> 
> 时间：2017-10-11T08:19:46.510

简单的3个步骤：

1-右键单击数据库→任务→还原→数据库

2- 检查`Device`为源并找到**.bak**（或压缩的 .bak）文件

3- 在左窗格中单击`options`并：

*   **选中**覆盖现有数据库。
*   **取消选中**在还原之前进行尾日志备份
*   **检查**关闭与目标数据库的现有连接。

其他选项确实是可选的（当然也很重要）！

* * *

## 回答 #7

> 赞同：33
> 
> 时间：2020-01-15T13:05:11.000

这总是由于版本不兼容造成的。请按照以下步骤解决：

第 1 步：使用您的首选名称创建数据库。（在我们的例子中是 AdventureWorks）

第2步：写点击数据库，然后点击任务>>恢复>>数据库...</p>

[![在此处输入图像描述](../Images/7440ab4d0a70db7069e7a1fbc72aea93.png)](https://i.stack.imgur.com/IkIND.jpg)

第 3 步：在恢复屏幕上转到选项的第三个选项。现在选中复选框“覆盖现有数据库（WITH REPLACE）”</p>

[![在此处输入图像描述](../Images/bf3a3e6a941fdf9e881a9be1bd237290.png)](https://i.stack.imgur.com/HywOw.jpg)

第四步：点击确定。它应该成功地恢复数据库。

注意：当您使用 REPLACE 恢复数据库时，它将覆盖旧数据库。

* * *

## 回答 #8

> 赞同：25
> 
> 时间：2015-02-13T16:17:51.817

这是因为原始文件`.mdf`和文件位于可能，并且此信息保存在备份中！`.ldf``Db``c:\programFile\....`

如果您在安装所在的不同 SQL Server 上创建相同的数据库，`c:\program Files (x86)\ ....`则无法像往常一样还原。您需要重新定位`.mdf`和`.ldf`文件的路径。

所以：

*   在新服务器上创建一个空数据库

*   右键单击空的 Db > 任务 > 还原 > 数据库 > 单击设备选择您的`.bak`文件 > 选择要还原到的 Db

*   单击左侧的文件>选择“将所有文件重新定位到文件夹”
*   单击左侧站点上的选项>单击覆盖

完毕！
希望能帮助到你！

* * *

## 回答 #9

> 赞同：25
> 
> 时间：2017-05-05T07:11:22.597

如果您使用脚本方法并且遇到有关 LDF 和 MDF 文件的错误，**您可以首先使用以下命令查询备份文件**以获取备份集中文件的**逻辑名称（和其他详细信息）：**

```
-- Queries the backup file for the file list in backup set, where Type denotes 
-- type of file. Can be L,D,F or S
-- info: https://docs.microsoft.com/en-us/sql/t-sql/statements/restore-statements-filelistonly-transact-sql
RESTORE FILELISTONLY FROM DISK = 'C:\Temp\DB_backup.bak'
GO 
```

您将获得类似于以下的结果：

[![在此处输入图像描述](../Images/576c75a45ae9403ec626bc0a2e803747.png)](https://i.stack.imgur.com/VlzQ1.png)

然后您可以在查询中使用这些逻辑名称：

```
 -- Script assumes you want MDF and LDF files restored on separate drives. Modify for your scenario
    RESTORE DATABASE DB 
    FROM DISK='C:\Temp\DB_backup.bak'
    WITH REPLACE,
      MOVE 'DB' TO 'E:\MSSQL\Data\DB.mdf', -- "DB" is the mdf logical name from query above
      MOVE 'DB_log' TO 'F:\MSSQL\Logs\DB.ldf'; -- "DB_log" is LDF logical name from query above 
```

更多信息`RESTORE FILELISTONLY` [可以从 SQL Server 文档中找到](https://docs.microsoft.com/en-us/sql/t-sql/statements/restore-statements-filelistonly-transact-sql)。

* * *

## 回答 #10

> 赞同：17
> 
> 时间：2015-04-07T04:15:39.683

我今天遇到了类似的问题。尝试了上述所有解决方案，但没有奏效。所以在这里发布我的解决方案。

> 还原前不要忘记取消选中 Tail-long Backup

![还原前不要忘记取消选中 Tail-long Backup](../Images/e54c255f768d77089c326959a4b24948.png)

希望它也能帮助别人！

* * *

## 回答 #11

> 赞同：11
> 
> 时间：2012-10-23T12:19:27.287

同样重要的是要确保您的**数据库名称与**您尝试恢复的备份中的数据库名称相匹配。如果不匹配，您将收到相同的错误。

* * *

## 回答 #12

> 赞同：11
> 
> 时间：2018-10-15T07:24:58.640

> system.data.sqlclient.sqlerror：备份集包含一个数据库的备份，而不是现有的“Dbname”数据库

我偶然发现了灵魂

1.  不要创建具有相同名称或不同数据库名称的数据库！重要。

2.  右键单击数据库| 任务 > 还原 > 数据库

3.  在“还原源”下选择“从设备”

4.  选择 .bak 文件

5.  在下面的网格视图中选中数据库的复选框

6.  到数据库：“在这里您可以键入新的数据库名称”（例如：DemoDB）

7.  不要从下拉列表中选择现有数据库

8.  现在单击确定按钮，它将创建一个新的数据库并从您的 .bak 文件中恢复所有数据。

[您甚至可以从此链接获得帮助](https://www.c-sharpcorner.com/article/how-to-restore-northwind-database-in-sql-server-in-1-minute/)

希望对解决您的问题有所帮助...

* * *

## 回答 #13

> 赞同：10
> 
> 时间：2014-09-30T08:07:34.773

Before doing anything else, confirm if your backup is Full or Differential. If you're trying to create a new database out of a differential backup, no matter what you do you will encounter the error.

* * *

## 回答 #14

> 赞同：5
> 
> 时间：2017-09-26T06:17:21.910

我也有同样的问题。我的解决方案是：

1.  右键单击数据库。
2.  选择任务，选择恢复数据库。
3.  单击左侧的选项。
4.  检查第一个选项覆盖现有数据库（替换）。
5.  转到常规，选择源和目标数据库。
6.  点击确定，就是这样

* * *

## 回答 #15

> 赞同：4
> 
> 时间：2014-02-26T16:27:45.263

你们中的一些人对此过于复杂。我发现这非常简单。

1) 创建一个与您的 .bak 文件数据库名称同名的数据库！重要

2）右键单击数据库| 任务 > 还原 > 数据库

3）在“恢复源”下选择“从设备”

4) 选择 .bak 文件

5）在下面的gridview中选中数据库的复选框

6）在右侧的“选择页面”下选择“选项”

7）选中标记为“保留复制设置（WITH KEEP_REPLICATION）的复选框

现在回到常规页面并单击确定以恢复数据库......就是这样。

* * *

## 回答 #16

> 赞同：4
> 
> 时间：2013-11-11T15:29:48.580

我只是想解决这个问题。

从以管理员身份运行到在此处和其他地方找到的建议，我都尝试过；最后为我解决的问题是检查“文件”属性选项卡中的“重新定位文件”选项。

希望这对其他人有帮助。

* * *

## 回答 #17

> 赞同：3
> 
> 时间：2013-11-18T19:27:20.397

我不得不在我的本地创建新的数据库进行测试，并且我从我的产品中得到了备份。我首先创建了数据库并尝试在新数据库之上运行 BAK，这为我产生了这个错误。我删除了数据库并将其恢复，同时在恢复屏幕本身中获取新的数据库名称。数据库是在还原时自动创建的。

* * *

## 回答 #18

> 赞同：2
> 
> 时间：2013-12-01T08:19:10.630

我使用生成脚本通过替代方式完成了工作。这确实对我有用，因为由于相同的错误，备份-还原无助于解决问题。

* * *

## 回答 #19

> 赞同：2
> 
> 时间：2015-10-13T07:21:44.993

在选项中，将“还原为”文件名更改为新的数据库 mdf 和 ldf。它引用源数据库 .mdf 和 .ldf 文件。

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2015-02-10T10:54:40.887

您可以恢复到新数据库，验证文件名语法，它将在日志文件中，新的 SQL 版本将是“_log”后缀

广告检查选项选项卡中的覆盖现有数据库标志

法比奥

* * *

## 回答 #21

> 赞同：1
> 
> 时间：2019-12-25T14:04:15.370

这帮助我从系统驱动器导入备份文件

1.  创建一个与您的 .bak 文件数据库名称同名（最好）的数据库
2.  右键单击数据库 > 任务 > 还原 > 数据库
3.  在“还原源”下选择“从设备”
4.  选择 .bak 文件，从系统中选择路径
5.  在下面的列表框中选中数据库的复选框
6.  在右侧的“选择页面”下选择“选项”
7.  选中标记为“保留复制设置（WITH KEEP_REPLICATION）的复选框
8.  选中 Overwrite the existing database(WITH REPLACE) 复选框 现在返回 General 页面并单击 OK 以恢复数据库...

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2015-04-22T01:20:28.553

我试图将生产数据库还原到同一台服务器上的临时数据库。

在我的情况下唯一有效的是恢复到一个新的空白数据库。这很好用，没有尝试覆盖生产文件（如果您只是将生产备份文件恢复到现有的暂存数据库，就会这样做）。然后删除旧数据库并重命名 - 文件将保留新的临时名称，但在我的情况下这很好。

（或者先删除暂存数据库，然后您可以恢复到与暂存数据库同名的新数据库）

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2014-11-18T14:44:51.893

我确定这个问题与文件和文件夹权限有关。

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2022-01-19T07:57:05.793

通常处理 .bak 文件会让人头疼，更直接的方法是使用 sqldump 文件传输数据库。

1.  生成要移动或复制的当前数据库的脚本。
2.  **而不是整个数据库**，选择所有表。
3.  从选项菜单中选择另存为脚本，然后单击高级按钮并设置以下配置（我正在起诉 MSSQL 2016）： [![在此处输入图像描述](../Images/a1db6bca3ea89abd9191b03c0b9695a9.png)](https://i.stack.imgur.com/keAW5.png)
4.  现在，您要在哪里导入这些数据，创建一个新数据库，切换到这个新数据库（我的意思是将其设置为默认值）
5.  最后运行脚本，所有的表和数据都将被导入。

祝你好运。

5.  项目清单

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2019-07-02T18:36:51.757

而不是单击**还原数据库**单击 **还原文件和文件组..**

这在我的 sql server 上工作

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2021-11-24T14:49:36.813

我有同样的问题，但在PS上。我把它留在这里以防有人试图做同样的事情

```
Restore-SqlDatabase -ServerInstance "<your instance name>" -Database "<your db name>" -BackupFile "<backup file route>.bak" -ReplaceDatabase 
```

记得使用`Set-ExecutionPolicy Unrestricted -Force`和导入`import-module sqlps`。完成后不要忘记将执行策略设置回受限。

# c++ - QJson 用什么来解析 JSON 的语法？

> ID：10204482
> 
> 赞同：0
> 
> 时间：2012-04-18T07:02:42.457
> 
> 标签：c++, algorithm, parsing, qjson

我检查了 qjson 库的源代码，它似乎使用了一些`.yy`文件，那是什么？

这样的东西可以用于任何想要的语法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T07:34:12.373

.yy 文件包含生成词法分析器代码的规则。解析器随后使用其输出。[Flex](http://westes.github.io/flex/manual/)是用于构建词法分析器代码的知名工具。之后，您可以使用 Bison 等工具来构建 Parser 代码。所以是的，任何[上下文无关](http://en.wikipedia.org/wiki/Context-free_grammar)的语法都可以使用上述工具进行解析。

# r - I want to run a R code at a specific time

> ID：10204483
> 
> 赞同：5
> 
> 时间：2012-04-18T07:02:51.700
> 
> 标签：r, timer, triggers

I want to run a R code at a specific time that I need. And after the process finished, I want to terminate the R session.

If a code is as below,

```
tm<-Sys.time()
write.table(tm,file='OUT.TXT', sep='\t');
quit(save = "no") 
```

What should I do to run this code at "2012-04-18 17:25:40". I need your help. Thanks in advance.

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-18T07:29:29.370

使用 Windows 的 Task Scheduler 或Linux 下的[cron 作业是最简单的。](http://en.wikipedia.org/wiki/Cron)您可以在此处指定应在您指定的特定时间运行的命令或程序。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-17T17:32:43.753

如果您无法使用 cron 作业服务并且必须在 R 中进行调度，则以下 R 代码显示了如何等待特定时间量以便在预先指定的目标时间执行。

```
stop.date.time.1 <- as.POSIXct("2012-12-20 13:45:00 EST") # time of last afternoon execution. 
stop.date.time.2 <- as.POSIXct("2012-12-20 7:45:00 EST") # time of last morning execution.
NOW <- Sys.time()                                        # the current time
lapse.time <- 24 * 60 * 60              # A day's worth of time in Seconds
all.exec.times.1 <- seq(stop.date.time.1, NOW, -lapse.time) # all of afternoon execution times. 
all.exec.times.2 <- seq(stop.date.time.2, NOW, -lapse.time) # all of morning execution times. 
all.exec.times <- sort(c(all.exec.times.1, all.exec.times.2)) # combine all times and sort from recent to future
cat("To execute your code at the following times:\n"); print(all.exec.times)

for (i in seq(length(all.exec.times))) {   # for each target time in the sequence
  ## How long do I have to wait for the next execution from Now.
  wait.time <- difftime(Sys.time(), all.exec.times[i], units="secs") # calc difference in seconds.
  cat("Waiting for", wait.time, "seconds before next execution\n")
  if (wait.time > 0) {
    Sys.sleep(wait.time)   # Wait from Now until the target time arrives (for "wait.time" seconds)
    {
      ## Put your execution code or function call here
    }
  }
} 
```

# javascript - 提交按钮不调用函数

> ID：10204490
> 
> 赞同：0
> 
> 时间：2012-04-18T07:03:34.790
> 
> 标签：javascript

请原谅协议和/或格式方面的任何潜在失误。我是新来的。单击我的“提交”按钮不会调用函数 cost()。我究竟做错了什么？

```
<html>
<head>

<script type="text/javascript">
function cost() {
mpg = document.getElementById("mpg");
distance = document.getElementById("distance");
gasPrice = document.getElementById("gasPrice");
alert("<p>" + Math.round((distance / mpg) * gasPrice) + "</p>");
}
</script>

<h1>Trip Cost Calculator</h1>
</head>

<p> Enter mpg (miles): </p>
<input type="text" id="mpg">
</input>
</body>

<body>
<p> Enter distance (miles): </p>
<input type="text" id="distance">
</input>
</body>

<body>
<p> Enter gas price (dollars): </p>
<input type="text" id="gasPrice">
</input>
</body>

<body>
</br>
<input type="button" id="submit" value="Submit" onclick="cost()"/>
</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T07:08:57.573

您正在操作对象。使用这样的 value 属性检索值。

```
mpg = document.getElementById("mpg").value;
distance = document.getElementById("distance").value;
gasPrice = document.getElementById("gasPrice").value; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T07:09:35.060

您需要这些元素的价值，而不是它本身的元素：

```
<script type="text/javascript">
function cost() {
mpg = document.getElementById("mpg").value;
distance = document.getElementById("distance").value;
gasPrice = document.getElementById("gasPrice").value;
alert(Math.round((distance / mpg) * gasPrice));
}
</script> 
```

而且您还需要删除所有这些额外的`<body>`标签。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T07:08:58.123

您的身体标签不正确。您还需要关闭`html`标签。此外，使用该`.value`属性访问`input`字段。

```
<html>
<head>

<script type="text/javascript">
 function cost() {
  mpg = document.getElementById("mpg").value;
  distance = document.getElementById("distance").value;
  gasPrice = document.getElementById("gasPrice").value;
  alert("<p>" + Math.round((distance / mpg) * gasPrice) + "</p>");
 }
</script>

<h1>Trip Cost Calculator</h1>
</head>

<body>

<p> Enter mpg (miles): </p>
<input type="text" id="mpg">
</input>
<p> Enter distance (miles): </p>
<input type="text" id="distance">
</input>
<p> Enter gas price (dollars): </p>
<input type="text" id="gasPrice">
</input>
</br>
<input type="button" id="submit" value="Submit" onclick="cost()"/>
</body>
</html> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T07:15:21.407

这里的各种级别都会出错，首先**要确保您拥有有效的 html**。使用 DOM 节点时，始终最好确保您的浏览器可以创建有效的 dom 树，并且最适合使用有效的 html。检查[http://validator.w3.org](http://validator.w3.org)

其次，在您的`cost()`函数中，**您不是获取**输入字段的值，而是获取字段本身。当然，这会导致一些奇怪的行为，这可能解释你认为 cost() 函数没有被执行。可能是但会引发您没有注意到的错误（检查浏览器的调试/错误控制台）

我已经修复了您的示例，检查它，从中学习并阅读网络标准 :)

[http://jsfiddle.net/vyfqC/3/](http://jsfiddle.net/vyfqC/3/)

```
<!DOCTYPE html>
<html>
<head>

    <script type="text/javascript">
    function cost() {
        mpg = document.getElementById("mpg").value;
        distance = document.getElementById("distance").value;
        gasPrice = document.getElementById("gasPrice").value;
        alert("<p>" + Math.round((distance / mpg) * gasPrice) + "</p>");
    }
    </script>

    <title>Trip cost calculator</title>

</head>
<body>

    <h1>Trip Cost Calculator</h1>

    <p> Enter mpg (miles): </p>
    <input type="text" id="mpg" />

    <p> Enter distance (miles): </p>
    <input type="text" id="distance" />

    <p> Enter gas price (dollars): </p>
    <input type="text" id="gasPrice" />

    <input type="button" id="submit" value="Submit" onclick="cost()"/>

</body>
​ 
```

# c++ - 如何检测链接器在使用 VC10 的发布版本中省略了哪些功能？

> ID：10204491
> 
> 赞同：2
> 
> 时间：2012-04-18T07:03:36.920
> 
> 标签：c++, visual-c++

使用 Visual C++ 2010 (Service Pack 1)，有没有办法让链接器输出它在发布模式 X64 构建中丢弃（未调用）的函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T07:28:42.303

我对此表示怀疑。但是，您可以做相反的事情；选项 ，当传递给 时，将导致链接器输出地图；如果直接调用链接器，选项是 . （在这两种情况下，您都可以省略文件名。）这将为您提供可执行文件中所有函数（和其他符号）的列表。`/Fm*filename*``cl``/MAP:*filename*`

链接后，您仍然可以使用`dumpbin`.

# android - 如何将联系人信息保存到电话簿中？

> ID：10204493
> 
> 赞同：1
> 
> 时间：2012-04-18T07:03:41.380
> 
> 标签：android

嘿伙计们，我想将人的详细信息（例如名字姓氏电话号码地址用户网站用户组织）保存到电话簿中，因此请提出一些解决此问题的方法。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-18T07:06:50.957

您可以通过执行此代码将用户信息保存到电话簿中

```
 package com.contacts.in;

import java.util.ArrayList;

import android.app.Activity;
import android.content.ContentProviderOperation;
import android.content.ContentResolver;
import android.content.ContentValues;
import android.content.ContextWrapper;
import android.database.Cursor;
import android.net.Uri;
import android.os.Bundle;
import android.provider.ContactsContract;
import android.provider.ContactsContract.CommonDataKinds.Phone;
import android.provider.ContactsContract.Data;
import android.widget.Toast;

public class CONTACTSAVEDActivity extends Activity {
    String displayName = "XYZ";
    String mobileNumber = "123456";
    String homeNumber = "1111";
    String workNumber = "2222";
    String emailID = "email@nomail.com";
    String company = "bad";
    String jobTitle = "abcd";

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        ArrayList<ContentProviderOperation> ops = 
            new ArrayList<ContentProviderOperation>();

        ops.add(ContentProviderOperation.newInsert(
            ContactsContract.RawContacts.CONTENT_URI)
            .withValue(ContactsContract.RawContacts.ACCOUNT_TYPE, null)
            .withValue(ContactsContract.RawContacts.ACCOUNT_NAME, null)
            .build()
        );

        //------------------------------------------------------ Names
        if(displayName != null)
        {           
            ops.add(ContentProviderOperation.newInsert(
                ContactsContract.Data.CONTENT_URI)              
                .withValueBackReference(ContactsContract.Data.RAW_CONTACT_ID, 0)
                .withValue(ContactsContract.Data.MIMETYPE,
                    ContactsContract.CommonDataKinds.StructuredName.CONTENT_ITEM_TYPE)
                .withValue(
                    ContactsContract.CommonDataKinds.StructuredName.DISPLAY_NAME,     
                    displayName).build()
            );
        } 

        //------------------------------------------------------ Mobile Number                      
        if(mobileNumber != null)
        {
            ops.add(ContentProviderOperation.
                newInsert(ContactsContract.Data.CONTENT_URI)
                .withValueBackReference(ContactsContract.Data.RAW_CONTACT_ID, 0)
                .withValue(ContactsContract.Data.MIMETYPE,
                ContactsContract.CommonDataKinds.Phone.CONTENT_ITEM_TYPE)
                .withValue(ContactsContract.CommonDataKinds.Phone.NUMBER, mobileNumber)
                .withValue(ContactsContract.CommonDataKinds.Phone.TYPE, 
                ContactsContract.CommonDataKinds.Phone.TYPE_MOBILE)
                .build()
            );
        }

                            //------------------------------------------------------ Home Numbers
                            if(homeNumber != null)
                            {
                                ops.add(ContentProviderOperation.newInsert(ContactsContract.Data.CONTENT_URI)
                                        .withValueBackReference(ContactsContract.Data.RAW_CONTACT_ID, 0)
                                        .withValue(ContactsContract.Data.MIMETYPE,
                                                ContactsContract.CommonDataKinds.Phone.CONTENT_ITEM_TYPE)
                                        .withValue(ContactsContract.CommonDataKinds.Phone.NUMBER, homeNumber)
                                        .withValue(ContactsContract.CommonDataKinds.Phone.TYPE, 
                                                ContactsContract.CommonDataKinds.Phone.TYPE_HOME)
                                        .build());
                            }

                            //------------------------------------------------------ Work Numbers
                            if(workNumber != null)
                            {
                                ops.add(ContentProviderOperation.newInsert(ContactsContract.Data.CONTENT_URI)
                                        .withValueBackReference(ContactsContract.Data.RAW_CONTACT_ID, 0)
                                        .withValue(ContactsContract.Data.MIMETYPE,
                                                ContactsContract.CommonDataKinds.Phone.CONTENT_ITEM_TYPE)
                                        .withValue(ContactsContract.CommonDataKinds.Phone.NUMBER, workNumber)
                                        .withValue(ContactsContract.CommonDataKinds.Phone.TYPE, 
                                                ContactsContract.CommonDataKinds.Phone.TYPE_WORK)
                                        .build());
                            }

                            //------------------------------------------------------ Email
                            if(emailID != null)
                            {
                                 ops.add(ContentProviderOperation.newInsert(ContactsContract.Data.CONTENT_URI)
                                            .withValueBackReference(ContactsContract.Data.RAW_CONTACT_ID, 0)
                                            .withValue(ContactsContract.Data.MIMETYPE,
                                                    ContactsContract.CommonDataKinds.Email.CONTENT_ITEM_TYPE)
                                            .withValue(ContactsContract.CommonDataKinds.Email.DATA, emailID)
                                            .withValue(ContactsContract.CommonDataKinds.Email.TYPE, ContactsContract.CommonDataKinds.Email.TYPE_WORK)
                                            .build());
                            }

                            //------------------------------------------------------ Organization
                            if(!company.equals("") && !jobTitle.equals(""))
                            {
                                ops.add(ContentProviderOperation.newInsert(ContactsContract.Data.CONTENT_URI)
                                        .withValueBackReference(ContactsContract.Data.RAW_CONTACT_ID, 0)
                                        .withValue(ContactsContract.Data.MIMETYPE,
                                                ContactsContract.CommonDataKinds.Organization.CONTENT_ITEM_TYPE)
                                        .withValue(ContactsContract.CommonDataKinds.Organization.COMPANY, company)
                                        .withValue(ContactsContract.CommonDataKinds.Organization.TYPE, ContactsContract.CommonDataKinds.Organization.TYPE_WORK)
                                        .withValue(ContactsContract.CommonDataKinds.Organization.TITLE, jobTitle)
                                        .withValue(ContactsContract.CommonDataKinds.Organization.TYPE, ContactsContract.CommonDataKinds.Organization.TYPE_WORK)
                                        .build());
                            }

                            // Asking the Contact provider to create a new contact                  
                            try 
                            {
                                getContentResolver().applyBatch(ContactsContract.AUTHORITY, ops);
                            } 
                            catch (Exception e) 
                            {               
                                e.printStackTrace();
                              //  Toast.makeText(myContext, "Exception: " + e.getMessage(), Toast.LENGTH_SHORT).show();
                            }

    }
} 
```

还要在清单中添加权限

```
<uses-permission android:name="android.permission.READ_CONTACTS"></uses-permission>
<uses-permission android:name="android.permission.WRITE_CONTACTS"></uses-permission> 
```

# user-interface - Makefile for Gtk+ and cuda

> ID：10204494
> 
> 赞同：0
> 
> 时间：2012-04-18T07:03:46.810
> 
> 标签：user-interface, compilation, makefile, cuda, gtk

I'm trying to develop a packet analyzer with CUDA support for pattern matching. I'm using GTK+ for GUI creation but I am not able to compile the GUI file together with the cuda files. How to write makefile for this case?

The project is having two parts: 1\. Analyzer 2\. GUI
Analyzer consists of many .c,.h files and one .cu file.
GUI part has only one file gui.c I have included `packet_analyzer.h` in `gui.c`.

I tried the following makefile

```
all: guitest

guitest: gui.o list.o queue.o Word.o dictionary.o packet_capturer.o rule.o aho-corasick.o aho-corasick_cuda.o packet_analyzer.o
    gcc -lpcap -lpthread `pkg-config --cflags --libs gtk+-2.0` gui.o list.o queue.o Word.o dictionary.o packet_capturer.o rule.o aho-corasick.o aho-corasick_cuda.o packet_analyzer.o

gui.o: gui.c
    gcc -lpcap -lpthread -c `pkg-config --cflags --libs gtk+-2.0` gui.c

list.o : list.c
    gcc -c list.c 

queue.o : queue.c
    gcc -c queue.c  

Word.o : Word.c Word.h
    gcc  -c Word.c  

dictionary.o : dictionary.c 
    gcc  -c dictionary.c  

rule.o : rule.c  rule.h
    gcc  -c rule.c  rule.h

packet_capturer.o : packet_capturer.c
    gcc -lpcap -lpthread -c packet_capturer.c 

aho-corasick.o : aho-corasick.c 
    gcc -lpcap -lpthread -c aho-corasick.c 

aho-corasick_cuda.o : aho-corasick_cuda.cu 
    nvcc -lpcap -lpthread -c aho-corasick_cuda.cu 

packet_analyzer.o : packet_analyzer.c  
    gcc -lpcap -lpthread -c packet_analyzer.c 

clean:
    rm -rf *o guitest 
```

i end up with the following errors:

```
aho-corasick_cuda.o: In function `transfer_tries_from_hosttodevice(int, int, int)':
tmpxft_00001608_00000000-1_aho-corasick_cuda.cudafe1.cpp:(.text+0x37): undefined reference to `cudaMalloc'
tmpxft_00001608_00000000-1_aho-corasick_cuda.cudafe1.cpp:(.text+0x5d): undefined reference to `cudaMalloc'
tmpxft_00001608_00000000-1_aho-corasick_cuda.cudafe1.cpp:(.text+0x86): undefined reference to `cudaMalloc'
tmpxft_00001608_00000000-1_aho-corasick_cuda.cudafe1.cpp:(.text+0xac): undefined reference to `cudaMalloc'
tmpxft_00001608_00000000-1_aho-corasick_cuda.cudafe1.cpp:(.text+0xd5): undefined reference to `cudaMalloc'
aho-corasick_cuda.o:tmpxft_00001608_00000000-1_aho-corasick_cuda.cudafe1.cpp:(.text+0xfb): more undefined references to `cudaMalloc' follow
aho-corasick_cuda.o: In function `transfer_tries_from_hosttodevice(int, int, int)':
tmpxft_00001608_00000000-1_aho-corasick_cuda.cudafe1.cpp:(.text+0x132): undefined reference to `cudaMemcpy'
tmpxft_00001608_00000000-1_aho-corasick_cuda.cudafe1.cpp:(.text+0x166): undefined reference to `cudaMemcpy'
tmpxft_00001608_00000000-1_aho-corasick_cuda.cudafe1.cpp:(.text+0x19d): undefined reference to `cudaMemcpy'
tmpxft_00001608_00000000-1_aho-corasick_cuda.cudafe1.cpp:(.text+0x1d1): undefined reference to `cudaMemcpy'
tmpxft_00001608_00000000-1_aho-corasick_cuda.cudafe1.cpp:(.text+0x208): undefined reference to `cudaMemcpy'
aho-corasick_cuda.o:tmpxft_00001608_00000000-1_aho-corasick_cuda.cudafe1.cpp:(.text+0x23c): more undefined references to `cudaMemcpy' follow
aho-corasick_cuda.o: In function `transfer_packets_from_hosttodevice(void*)':
tmpxft_00001608_00000000-1_aho-corasick_cuda.cudafe1.cpp:(.text+0x3b1): undefined reference to `Queue_dequeue(Queue*)'
tmpxft_00001608_00000000-1_aho-corasick_cuda.cudafe1.cpp:(.text+0x519): undefined reference to `cudaMalloc'
tmpxft_00001608_00000000-1_aho-corasick_cuda.cudafe1.cpp:(.text+0x52b): undefined reference to `cudaMalloc'
tmpxft_00001608_00000000-1_aho-corasick_cuda.cudafe1.cpp:(.text+0x53d): undefined reference to `cudaMalloc'
tmpxft_00001608_00000000-1_aho-corasick_cuda.cudafe1.cpp:(.text+0x56b): undefined reference to `cudaMemcpy'
tmpxft_00001608_00000000-1_aho-corasick_cuda.cudafe1.cpp:(.text+0x58b): undefined reference to `cudaMemcpy'
tmpxft_00001608_00000000-1_aho-corasick_cuda.cudafe1.cpp:(.text+0x5ab): undefined reference to `cudaMemcpy'
aho-corasick_cuda.o: In function `analyze_packets(void*)':
tmpxft_00001608_00000000-1_aho-corasick_cuda.cudafe1.cpp:(.text+0x663): undefined reference to `cudaMalloc'
tmpxft_00001608_00000000-1_aho-corasick_cuda.cudafe1.cpp:(.text+0x683): undefined reference to `cudaMemcpy'
tmpxft_00001608_00000000-1_aho-corasick_cuda.cudafe1.cpp:(.text+0x6dd): undefined reference to `cudaConfigureCall'
tmpxft_00001608_00000000-1_aho-corasick_cuda.cudafe1.cpp:(.text+0x777): undefined reference to `cudaMemcpy'
tmpxft_00001608_00000000-1_aho-corasick_cuda.cudafe1.cpp:(.text+0x78a): undefined reference to `Queue_dequeue(Queue*)'
tmpxft_00001608_00000000-1_aho-corasick_cuda.cudafe1.cpp:(.text+0x7d5): undefined reference to `Queue_enqueue(Queue*, void*)'
tmpxft_00001608_00000000-1_aho-corasick_cuda.cudafe1.cpp:(.text+0x7f3): undefined reference to `cudaFree'
tmpxft_00001608_00000000-1_aho-corasick_cuda.cudafe1.cpp:(.text+0x802): undefined reference to `cudaFree'
aho-corasick_cuda.o: In function `__cudaUnregisterBinaryUtil()':
tmpxft_00001608_00000000-1_aho-corasick_cuda.cudafe1.cpp:(.text+0x824): undefined reference to `__cudaUnregisterFatBinary'
aho-corasick_cuda.o: In function `__device_stub__Z14AC_search_CudaPiS_S_S_S_S_S_S_PhiS_(int*, int*, int*, int*, int*, int*, int*, int*, unsigned char*, int, int*)':
tmpxft_00001608_00000000-1_aho-corasick_cuda.cudafe1.cpp:(.text+0x85c): undefined reference to `cudaSetupArgument'
tmpxft_00001608_00000000-1_aho-corasick_cuda.cudafe1.cpp:(.text+0x87f): undefined reference to `cudaSetupArgument'
tmpxft_00001608_00000000-1_aho-corasick_cuda.cudafe1.cpp:(.text+0x8a2): undefined reference to `cudaSetupArgument'
tmpxft_00001608_00000000-1_aho-corasick_cuda.cudafe1.cpp:(.text+0x8c5): undefined reference to `cudaSetupArgument'
tmpxft_00001608_00000000-1_aho-corasick_cuda.cudafe1.cpp:(.text+0x8e8): undefined reference to `cudaSetupArgument'
aho-corasick_cuda.o:tmpxft_00001608_00000000-1_aho-corasick_cuda.cudafe1.cpp:(.text+0x90b): more undefined references to `cudaSetupArgument' follow
aho-corasick_cuda.o: In function `__sti____cudaRegisterAll_52_tmpxft_00001608_00000000_4_aho_corasick_cuda_cpp1_ii_9958a654()':
tmpxft_00001608_00000000-1_aho-corasick_cuda.cudafe1.cpp:(.text+0xa82): undefined reference to `__cudaRegisterFatBinary'
tmpxft_00001608_00000000-1_aho-corasick_cuda.cudafe1.cpp:(.text+0xae3): undefined reference to `__cudaRegisterFunction'
aho-corasick_cuda.o: In function `cudaError cudaLaunch<char>(char*)':
tmpxft_00001608_00000000-1_aho-corasick_cuda.cudafe1.cpp:(.text._Z10cudaLaunchIcE9cudaErrorPT_[cudaError cudaLaunch<char>(char*)]+0x14): undefined reference to `cudaLaunch'
aho-corasick_cuda.o:(.eh_frame+0x12): undefined reference to `__gxx_personality_v0'
collect2: ld returned 1 exit status
make: *** [guitest] Error 1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T14:57:41.833

You need to link with the CUDA runtime library. Add `-lcudart` to your link command (and CUDA lib path if necessary).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T13:17:31.477

It's the `nvcc -lpcap -lpthread $(ANALYZER) -o packet_analyzer.o` line that's failing, right? With the `-o` option, you're telling it to build a complete executable, not just the object files. It needs a `main` function to do that, which I presume you don't have in any of the $(ANALYZER) files. Instead, try compiling all the sources with the `-c` flag (like you've done with `gcc` for `gui.c`), and then wrap it all together and link it with the other `gcc` command.

# ruby-on-rails-3.1 - 如何为属于另一个模型的模型添加表单错误，rails 3.1

> ID：10204496
> 
> 赞同：1
> 
> 时间：2012-04-18T07:03:48.367
> 
> 标签：ruby-on-rails-3.1

我正在关注[Rails Guides - Getting Started](http://guides.rubyonrails.org/getting_started.html)教程。它创建了一个基本的 Post 模型，以及一个属于 Post 的 Comment 模型。

我已经向 Comment 模型添加了一个简单的验证，它可以工作，但是如果我填写错误，我无法弄清楚如何让表单错误显示出来。

这是我的comment.rb 模型

```
class Comment < ActiveRecord::Base
  validates :body, presence: true
  belongs_to :post
end 
```

这是添加评论的原始表单，位于 posts/show.html.erb

```
<h2>Add a comment:</h2>
<%= form_for([@post, @post.comments.build]) do |f| %>
  <div class="field">
    <%= f.label :commenter %><br />
    <%= f.text_field :commenter %>
  </div>

  <div class="field">
    <%= f.label :body %><br />
    <%= f.text_area :body %>
  </div>

  <div class="actions">
    <%= f.submit %>
  </div>
<% end %> 
```

以及 comments_controller.rb 中的原始创建操作

```
class CommentsController < ApplicationController
  def create
    @post = Post.find(params[:post_id])
    @comment = @post.comments.create(params[:comment])
    redirect_to post_path(@post)
  end
end 
```

我已经尝试了很多东西，但感觉就像在黑暗中摸索一样。有人可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T07:45:28.723

看一下[dynamic_form gem](https://github.com/joelmoss/dynamic_form) - 这曾经是 Rail 本身的一部分，但不久前被提取了。有了它，您可以像这样内联显示错误：

```
<%= f.label :commenter %><br />
<%= f.text_field :commenter %>
<%= f.error_message_on :commenter %> 
```

# sql - 使用链接服务器优化 SQL 查询

> ID：10204498
> 
> 赞同：3
> 
> 时间：2012-04-18T07:03:54.093
> 
> 标签：sql, optimization, linked-server

我有一个 SQL 查询，它用于为报告提取数据。它有效，只是程序提取报告需要太长时间。有什么办法可以优化这个 SQL 吗？这是一个带有多个子查询的 SELECT 查询，使用名为 SYSPROD1 的链接服务器。我已经尝试过，但没有任何成功。这是我的 SQL：

```
Select   
      invMaster.StockCode, prodclass.[Description],  invMaster.LongDesc,
      (select inv.QtyOnHand from SYSPROD1.SysproCompanyD.dbo.InvWarehouse inv where inv.StockCode = invMaster.StockCode and inv.Warehouse = 'P4') as CSSJHB,
      (select inv.QtyOnHand from SYSPROD1.SysproCompanyD.dbo.InvWarehouse inv where inv.StockCode = invMaster.StockCode and inv.Warehouse = 'KK') as KFCJHB,
      (select inv.QtyOnHand from SYSPROD1.SysproCompanyD.dbo.InvWarehouse inv where inv.StockCode = invMaster.StockCode and inv.Warehouse = 'KF') as KFCMIDRAND,
      (select inv.QtyOnHand from SYSPROD1.SysproCompanyD.dbo.InvWarehouse inv where inv.StockCode = invMaster.StockCode and inv.Warehouse = 'QK') as QKJHB,
      (select inv.QtyOnHand from SYSPROD1.SysproCompanyD.dbo.InvWarehouse inv where inv.StockCode = invMaster.StockCode and inv.Warehouse = 'SD') as SDBBLOEM, 
      (select inv.QtyOnHand from SYSPROD1.SysproCompanyD.dbo.InvWarehouse inv where inv.StockCode = invMaster.StockCode and inv.Warehouse = 'SL') as SEQUENCE,
      (select inv.QtyOnHand from SYSPROD1.SysproCompanyD.dbo.InvWarehouse inv where inv.StockCode = invMaster.StockCode and inv.Warehouse = 'PA') as CSSCT,
      (select inv.QtyOnHand from SYSPROD1.SysproCompanyD.dbo.InvWarehouse inv where inv.StockCode = invMaster.StockCode and inv.Warehouse = 'VL') as CSGEORGE

from        
      SYSPROD1.SysproCompanyD.dbo.InvMaster invMaster  join SYSPROD1.SysproCompanyD.dbo.SalProductClass prodclass
      on invMaster.ProductClass = prodclass.ProductClass 

  where prodclass.[Description] in ('WHOLEBIRDS','ABI & OTHER', 'CATERING PORTIONS', 'FILLETED PRODUCTS', 'FRESH PRODUCTS','INDUSTRIAL CATERING', 'IQF PORTIONS', 'LOW VALUE FIXED MASS', 'RED MEAT', 'REJECT EGGS' ,'SUNDRY PRODUCTS','VALUE ADDED')                   
    group by invMaster.StockCode, prodclass.[Description],  invMaster.LongDesc

  order by prodclass.[Description], invMaster.StockCode asc 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T08:45:35.350

您在此处编写的那种链接服务器查询（其中连接了远程服务器上的多个表）通常表现不佳，因为 SQL 引擎无法使用它用来优化本地查询计划的许多技巧；例如，除非用于连接到链接服务器的安全上下文是或角色的成员`sysadmin`，否则[调用服务器无权访问表统计信息](http://msdn.microsoft.com/en-us/library/ms175537%28v=sql.105%29.aspx)。这个查询的计划很可能会在查询执行期间多次拉取 的全部内容，并多次返回调用机器，这就是花费时间的原因。`db_owner``db_ddladmin``SYSPROD1.SysproCompanyD.dbo.InvMaster``SYSPROD1.SysproCompanyD.dbo.SalProductClass``SYSPROD1.SysproCompanyD.dbo.InvWarehouse`

您有几个选项可以尝试提高此查询的性能。一种是将链接服务器上每个表中所需的行插入到临时表或表变量中，然后再将它们加入查询中。

第二，考虑到整个查询可以通过链接服务器上的表来满足，将其创建为该服务器上的视图 - 这意味着所有处理都在那里进行并且应该更有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T07:10:10.837

您可以使用`JOIN`s 对其进行优化：

```
Select    
      invMaster.StockCode, prodclass.[Description],  invMaster.LongDesc, w1.QtyOnHand AS CSSJHB 
```

`..<snip>`

```
from         
      SYSPROD1.SysproCompanyD.dbo.InvMaster invMaster  
join SYSPROD1.SysproCompanyD.dbo.SalProductClass prodclass 
      on invMaster.ProductClass = prodclass.ProductClass
INNER JOIN SYSPROD1.SysproCompanyD.dbo.InvWarehouse w1 on w1.StockCode = invMaster.StockCode AND w1.Warehouse = 'P4' 
```

等等。对`SELECT`.

# apache - Apache自行重启，网站速度极慢

> ID：10204500
> 
> 赞同：0
> 
> 时间：2012-04-18T07:03:55.913
> 
> 标签：apache, security, webserver, intrusion-detection

我遇到了 Apache Web 服务器自行重启的问题，我的网站在管理面板和 FTP 上非常慢，我怀疑我的网站可能已被黑客入侵。

查看我的网站是否被黑客入侵并找出它是谁的最佳方法是什么？我可以采取哪些最佳程序来确保其安全且不会再次发生？

# c++ - 关于google-nacl的非常简单的问题

> ID：10204503
> 
> 赞同：2
> 
> 时间：2012-04-18T07:04:04.047
> 
> 标签：c++, scons, native-code, google-nativeclient

是否正确，从 Pepper 18 开始，我不需要 scons 构建系统来编译，而是使用 gcc(nacl-versions) 和 makefile？

此外，生成的 .nexe 文件是否可以在任何平台的网络服务器上运行，而不仅仅是在它编译的平台上运行？所以比如在mac os下开发编译native代码模块，生成一个32bit和一个64bit的nexe文件。我将加载此模块的网络服务器在 linux 上运行，并且仍将执行 32 位和 64 位版本的模块？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-18T19:15:52.473

**Native Client 构建系统**

没有任何版本的 Native Client SDK 要求特定的构建系统；任何时候都可以使用 SCons、GNU Make、CMake，甚至只是 shell 脚本。换句话说，基于 gcc 和 GNU 工具链的编译器和工具独立于开发人员决定使用的构建系统。

但是，在 Native Client SDK 的 Pepper 版本 17 之前（包括在内），SDK 中的示例附带了 SCons 的构建文件，并且 SCons 包含在 SDK 中。从 Pepper 18 起，情况不再如此。相反，为示例提供的构建文件是用于 GNU Make 的 Makefile。

另请参阅 SDK 的 Pepper 18 版本的[发行说明](https://developers.google.com/native-client/pepper18/sdk/release-notes)。

**交叉编译**

SDK 中提供的工具目前支持 32 位 x86 和 64 位 x86 架构。Web 服务器的平台并不重要，因为 Native Client 模块运行在客户端（即在浏览器中）。这意味着需要考虑两个系统：用户系统和开发人员系统。

在用户系统上，当 Chrome 在页面中遇到 Native Client 模块时，它会获取适用于该客户端上的浏览器的可执行文件（.nexe 文件）。因此，如果 64 位 Windows 上的用户访问该页面，则将获取 64 位二进制文​​件；如果用户使用的是 32 位 Mac，则获取 32 位二进制文​​件。有例外，我将在下面单独处理。Chrome 从清单文件中确定 32 位和 64 位 .nex 的名称。[有关清单文件的描述和示例，](https://developers.google.com/native-client/devguide/coding/application-structure#Manifest)请参阅 Native Client SDK 站点 (www.GoNaCl.com)

开发人员可以而且应该生成 32 位和 64 位可执行文件，而不管用于开发的操作系统和体系结构如何。在 Pepper 18 的示例/目录中运行“make”并查看发出的命令是了解如何执行此操作的便捷方式。例如，“make hello_world_glibc”输出的一部分内容如下：

```
i686-nacl-gcc -o hello_world_x86_32.nexe hello_world.c -m32 -O0 -g -pthread -O0 -g -Wno-long-long -Wall -lppapi 
```

和

```
i686-nacl-gcc -o hello_world_x86_64.nexe hello_world.c -m64 -O0 -g -pthread -O0 -g -Wno-long-long -Wall -lppapi 
```

第一行生成 32 位 .nexe；第二行生成 64 位 .nexe。重要的标志是 -m32/-m64，它指定架构 - 始终构建两者，以便客户端在 32 位和 64 位机器上都可以使用该应用程序。

从长远来看，只需要一种部署格式，并且将添加 ARM 作为直接支持的架构。有关详细信息，请参阅[Portable Native Client](http://www.chromium.org/nativeclient/pnacl/building-and-testing-portable-native-client)项目。

下面是浏览器和客户端架构对 32/64 位的具体匹配：

*   Mac OS（32 位和 64 位）-> 32 位 .nexe（Chrome 是 32 位）
*   Windows（32 位）-> 32 位 .nexe
*   Windows（64 位）-> 64 位 .nexe（Chrome 是 32 位，但会启动 64 位代理进程）
*   Linux（32 位）-> 32 位 .nexe
*   Linux（64 位）-> 32 位 Chrome 获取 32 位 .nexe；64 位 Chrome 获取 64 位 .nexe

因此，作为一般规则，Chrome 会获取与其自己的位时代相匹配的 .nexe - 除了在 64 位 Windows 上，Chrome 会获取 64 位 .nexe，尽管它本身是 32 位。

# asp.net - 图像不显示在 IIS 中的主机上

> ID：10204508
> 
> 赞同：0
> 
> 时间：2012-04-18T07:04:24.500
> 
> 标签：asp.net, iis-7

几天前我在 IIS 上托管了我的网站，它运行良好。然后我将它托管在另一台机器上，它停止显示图像。我在线检查并启用了静态内容选项，依次打开/关闭 Windows 功能；它仍然无法正常工作。有什么输入吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-26T10:30:10.900

可能是您忘记检查静态内容复选框。此[链接](http://gurustop.net/blog/2009/10/12/funny-problem-windows-7-iis-7-5-images-css-not-showing/)包含带有图像的简要说明。

# iphone - 如何将 NSArray 数据分配给 iPhone 中的 NSMutableArray？

> ID：10204510
> 
> 赞同：13
> 
> 时间：2012-04-18T07:04:31.590
> 
> 标签：iphone, objective-c, ios, object, xcode4.2

在我的应用程序中，我有一个包含一些数据的 NSArray。我想获取该数据并将其放入被`NSMutableArray`调用的`subArrayData`. 我能够将我的第一个数组中的数据插入到可变数组中，但是当应用程序运行时，我得到：

> 警告：从“nsarray *”分配给“nsmutablearray *”的不兼容指针类型请帮忙。

以下是我的代码：.h 文件

```
#import <UIKit/UIKit.h>

@interface AddNew : UIViewController
{
    NSMutableArray *subArrayData;;
}
@property(nonatomic ,retain)NSMutableArray *subArrayData; 
```

.m 文件

```
#import "AddNew.h"
#import "DashBoardPage.h"
#import "SubmitYourListing.h"

@implementation AddNew

@synthesize subArrayData;

-(void)accommodationAndTravel
{
    subArrayData =[[NSArray alloc] initWithArray:[NSArray arrayWithObjects:@"Select one",@"Accommodation and travel hospitality",@"Apartments and villas",@"Bed and Breakfast",@"Caravan parks and campsites",@"Hospitality",
                                                  @"Hotels and Motels",@"Snow and Ski lodges",@"Tourist attractions and tourism information",@"Tours and Holidays",@"Travel agents and Services",nil]];

} 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-04-18T07:15:27.160

您可以通过调用 -mutableCopy 方法将任何 NSArray 转换为 NSMutable 数组：

```
NSArray *someArray = ...;
NSMutableArray* subArrayData = [someArray mutableCopy]; 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-04-18T07:12:20.297

更改 .m 文件

```
#import "AddNew.h"
#import "DashBoardPage.h"
#import "SubmitYourListing.h"

@implementation AddNew

@synthesize subArrayData;

-(void)accommodationAndTravel
{
    subArrayData =[[NSMutableArray alloc] initWithArray:[NSArray arrayWithObjects:@"Select one",@"Accommodation and travel hospitality",@"Apartments and villas",@"Bed and Breakfast",@"Caravan parks and campsites",@"Hospitality",
                                                  @"Hotels and Motels",@"Snow and Ski lodges",@"Tourist attractions and tourism information",@"Tours and Holidays",@"Travel agents and Services",nil]];

} 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-04-18T07:06:20.560

只需调用`NSMutableArray`'s 的初始化程序之一，如下所示：

```
subArrayData = [[NSMutableArray alloc] initWithObjects:
                                        @"Select one",
                                        @"Accommodation and travel hospitality",
                                        @"Apartments and villas",
                                        @"Bed and Breakfast",
                                        @"Caravan parks and campsites",
                                        @"Hospitality",
                                        @"Hotels and Motels",
                                        @"Snow and Ski lodges",
                                        @"Tourist attractions and tourism information",
                                        @"Tours and Holidays",
                                        @"Travel agents and Services",
                                        nil]]; 
```

对于处理现有 的情况`NSArray`，您可以进行`mutableCopy`：

```
- (id)initWithArray:(NSArray *)array
{
  self = [super init];
  if (nil != self) {
    subArrayData = [array mutableCopy];
    ... 
```

# java - 实现插入排序，将列表传递给其他类？

> ID：10204517
> 
> 赞同：0
> 
> 时间：2012-04-18T07:05:34.090
> 
> 标签：java, list, linked-list, insertion

我昨天发布了代码的一个版本，但我认为它可以处理一些改进或什么的。事情是我再次卡住了。如您所见，我正在尝试对链表进行排序并将其写回文本文件。第一个问题是，在 Insertion 类中传递什么以及如何传递？第二个问题是如何按字母顺序实现插入排序？我已经看到了许多使用整数和数组进行插入的示例，但我似乎仍然遇到了麻烦。这是我到目前为止的进展。

编辑1：忘记这一点。

编辑 2：如何用我的方法实现 Comparable 并使用字母排序（CompareToIgnoreCase）？

主要的：

```
import java.io.* ;
import java.util.Scanner ;

public class Sort 
{
    public static void main(String[] args) throws Exception 
    {
        File outputFile ;
        Scanner kb = new Scanner (System.in) ; 
        LinkedList list = new LinkedList() ;
        String command ;
        Insertion insertion = new Insertion() ;

        // Create the new text file. If exists, it will continue to the next commands
        do
        {
            outputFile = new File("db.txt") ;

                if(!outputFile.exists())
                {
                    outputFile.createNewFile ();                    
                    System.out.println("The file was created as db.txt");
                    System.out.println("");
                }

        }while (!outputFile.exists()) ;

        // Define which file to stream in from          
        FileInputStream fileIn = new FileInputStream("db.txt") ;
        DataInputStream input = new DataInputStream (fileIn) ;
        BufferedReader br = new BufferedReader (new InputStreamReader (input)) ;
        String line ;

        try
        {               
            // Read each line of the file               
            while ((line = br.readLine()) != null)
            {
                list.add(line) ;
            }       
            input.close() ;
        }catch (Exception e){
            System.err.println("Error. Could not read the file") ;
        }

        //System.out.println (list.toString()) ;

        //Welcome message
        System.out.println("Welcome. \nPlease use the following commands [-i for Insertion Sort, -s for Selection Sort, -m for Merge sort, Exit to terminate]: " );
        System. out.println ("") ;          
        command = kb.next() ;

        do
        {
            if (command.equalsIgnoreCase("-i"))
            {
                insertion.Sort(list, list.size()) ;

                //try
                //{
                    //the "true" argument sets the FileWriter to append mode so that is does not overwrite the first line
                //  BufferedWriter out = new BufferedWriter(new FileWriter("db.txt", true));
                    //out.write(textContent) ;
                    //out.newLine() ;
                    //out.close() ;
                //}catch(IOException e)
                //{
                //  System.out.println("Could not write to file") ;
                //  System.exit(0) ;
                //}

                //System.out.println ("Enter command:") ;
                //command = kb.next() ;

            }

            else if (command.equalsIgnoreCase("-s"))
            {

            }
            else if (command.equalsIgnoreCase("-m"))
            {

            }
            else if (command.equalsIgnoreCase("Exit"))
            {
                System.exit(0) ;
            }
            else 
            {
                System.out.println("Unknown command. Please use -i, -s, -m or EXIT") ;
                command = kb.next() ;
            }
        }while (!command.equalsIgnoreCase("Exit")) ;

    }
} 
```

链表：

```
 import java.lang.* ;

public class LinkedList
{
    //reference to the head node
    public Node head ;
    public int listCount ;

    //LinkedList Constructor
    public LinkedList ()
    {
        //empty list
        head = new Node (null) ;
        listCount = 0 ;
    }

    //add element to the end of the list
    public void add(String data)
    {
        Node temp = new Node (data) ;
        Node current = head ;

        //go to the end of the list
        while (current.getNext() != null)
        {
            current = current.getNext() ;
        }

        // last node\s next reference is set to the last node
        current.setNext(temp) ;
        //increment the number of elements
        listCount++ ; 
    }

    //return the size of the list
    public int size()
    {
        return listCount ;
    }

    public String toString()
    {
        Node current = head.getNext() ;
        String output = " " ;
        while (current != null)
        {
            output += "[" + current.getData().toString() + "]" ;
            current = current.getNext() ;
        }
        return output ;
    }

} 
```

插入：

```
public class Insertion 
{
    public static void Sort (LinkedList listIn, int size)
    {
        int temp, i, j ;
        for (j=1;j<size;j++)
        {
            while(listIn.head)
        }
    }
} 
```

节点类：

```
 public class Node 
    {
        //reference to the next node or null if not any
        Node next ;
        //the entries
        String data ;

        //Node Constructor
        public Node (String dataIn)
        {
            next = null ;
            data = dataIn ;
        }

        //Node constructor in case of the need to point to a certain node
        public Node (String dataIn, Node nextIn)
        {
            next = nextIn;
            data = dataIn ;
        }

        public String getData ()
        {
            return data ;
        }

        public void setData (String dataIn)
        {
            data = dataIn ;
        }

        public Node getNext ()
        {
            return next ;
        }

        public void setNext (Node nextIn)
        {
            next = nextIn ;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T07:10:57.297

> 在 Insertion 类中传递什么以及如何传递？

你是说方法吗？您应该（至少）传入完整的`LinkedList`（而不仅仅是 head `Node`）。

> 第二个问题是如何按字母顺序实现插入排序？

您可以获取其类型 implements 的元素列表[`Comparable`](http://docs.oracle.com/javase/6/docs/api/java/lang/Comparable.html)，或者获取一个单独的[`Comparator`](http://docs.oracle.com/javase/6/docs/api/java/util/Comparator.html)参数，并使用它来比较元素。然后你可以传入一个`StringComparator`for s 列表`String`，一个`IntComparator`for `Integer`s 等等。你所需要的只是实现所需的 Comparator，这通常是微不足道的，因此你可以将你的排序算法重用于你想要的任何类型。

第一种方法更简单，它适用于`String`s 直接开箱即用（正如`String`已经实现的那样`Comparable`）。但是请注意，它仅限于对象类型 - 对于原始类型，例如`int`，您需要第二种方法。再说一次，您不能拥有存储原始类型元素的通用集合。

您可以在以下示例中看到两种泛型`sort`方法的示例[`Collections`](http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html)：

```
public static <T extends Comparable<? super T>> void sort(List<T> list);
public static <T> void sort(List<T> list, Comparator<? super T> c) 
```

如果你想保留你的`LinkedList`非泛型，你可以删除（大部分）泛型绒毛：

```
public static void sort(LinkedList list);
public static void sort(LinkedList list, Comparator<? super String> c) 
```

# iphone - 使用 NSUbiquitousKeyValueStore 类为 xCode 3.2.5 和 xCode 4.3.2 构建 xCode 项目

> ID：10204520
> 
> 赞同：1
> 
> 时间：2012-04-18T07:05:41.470
> 
> 标签：iphone, xcode, nsubiquitouskeyvaluestore

我在 xCode 4.3.2 上有我的 iPhone 项目，它运行良好。它使用 NSUbiquitousKeyValueStore 类，它的基础 SDK 是 iOS 5.0。现在我要在 xCode 3.2.5 上构建我的项目，它显示错误“未定义的符号 NSUbiquitousKeyValueStore”。当然，我知道 iOS 5.0 支持 NSUbiquitousKeyValueStore 类，而 xCode 3.2.5 不支持 iOS 5.0。所以我想在 iOS 5.0 之前禁用这些功能，并在 iOS 5.0 上启用。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T07:40:21.830

围绕使用 5.0 SDK 引入的功能的代码，如下所示：

```
#if __IPHONE_OS_VERSION_MAX_ALLOWED >= 50000
    // Code using NSUbiquitousKeyValueStore goes here
#endif 
```

请注意，这是条件编译。测试是在构建时执行的，而不是在运行时执行的。因此，如果您在没有 5.0 SDK 的旧版本 Xcode 中构建，那么生成的程序将*永远不会*使用`NSUbiquitousKeyValueStore`.，无论您在哪里运行它。没有可行的方法来针对较旧的 SDK 进行构建，但仍使用较新的 SDK 的功能（如果它们在运行时可用）。

编辑添加：有关更多信息，请参阅 Apple 的[SDK 兼容性指南](https://developer.apple.com/library/ios/#documentation/DeveloperTools/Conceptual/cross_development/Introduction/Introduction.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T07:22:51.433

您需要弱链接包含`NSUbiquitousKeyValueStore`该类的框架。然后在你的代码中做类似的事情：

```
if ([NSUbiquitousKeyValueStore class]) {
    // Class wil return non nil uf the class exists.
   NSUbiquitousKeyValueStore *NSUbiquitousKeyValueStore = [NSUbiquitousKeyValueStore new];
} 
```

# python - 本地主机上的 Google 应用引擎数据库访问

> ID：10204521
> 
> 赞同：1
> 
> 时间：2012-04-18T07:05:48.050
> 
> 标签：python, google-app-engine

我是 Python 和 Google App Engine 的新手。我已经在 localhost 上安装了一个现有的 Python 应用程序，它在静态页面上运行良好。但是，当我尝试打开一个正在获取数据的页面时，它会显示一条错误消息：

`BadRequestError: app "dev~sample-app" cannot access app "dev~template-builder"'s data`

`template-builder`是我的在线申请的名称。我认为访问本地主机上的 Google App Engine 数据存在一些问题。我应该怎么做才能让它工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T15:17:52.853

由于您才刚刚开始，我假设您不太关心本地数据存储中的内容。因此，在启动您的应用程序时，将 --clear_datastore 传递给 dev_appserver.py。

怎么了？正如 daemonfire300 所说，您在这里的应用程序 ID 存在冲突。您尝试运行的应用程序的 ID 为“sample-app”。您的数据存储包含“模板生成器”的数据。处理它的最简单方法是清除数据存储（如上所述）。

如果您确实想保留这两个数据，请将 --default_partition=dev~sample-app 传递给 dev_appserver.py （或相反，取决于您要使用的应用程序 ID）。

# android - 未找到 Android 应用程序类错误

> ID：10204524
> 
> 赞同：0
> 
> 时间：2012-04-18T07:05:53.617
> 
> 标签：android

我在包中开发了一个Android项目：`com.anand.eprint`.

该包包含`ePrintActivity.java`和`GmailSender.java`。内部`ePrintActivity`调用`GmailSender`。这是成功的。

我导出了项目，进行了备份并格式化了系统。现在我安装了新的操作系统、eclipse和android环境。

将相同的Android项目导入eclipse。

现在我正在尝试在`Emulators/Android`手机中安装和运行。

我收到错误：`ClassNotFoundError:GmailSender`。

请有人帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T07:18:47.323

按着这些次序。

*   右键单击项目 > Android 工具 > 修复项目属性
*   项目 > 清洁

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T07:46:42.203

那或者您需要在清单中添加活动的声明。

```
 <activity
        android:label="@string/app_name"
        android:name=".ePrinterActivity" >
        <intent-filter >
        </intent-filter>
    </activity>
          <activity
        android:label="@string/app_name"
        android:name=".GmailSender" >
        <intent-filter >
        </intent-filter>
    </activity> 
```

如果它不是活动，则取出 .GmailSender。

# asp.net-mvc - ASP.NET MVC3 - 在表单提交之前显示“更新的”模型值以进行摘要显示

> ID：10204525
> 
> 赞同：1
> 
> 时间：2012-04-18T07:05:56.007
> 
> 标签：asp.net-mvc, asp.net-mvc-3

不管你信不信，我有一个名为的视图`AddEditModule`用于添加或编辑模块。工作流程是一种使用隐藏/显示 div 的导航按钮的向导。

我有一个 ViewModel 被称为`AddEditModuleModel`（说快 10 倍）。在第 1 步和第 2 步中，我使用各种 EditorFor 来显示我的字段。在第 3 步中，我想使用 DisplayFor 来显示我的文本框的**当前值**的摘要（视图中更新的内容，而不是模型中传入的内容）。

在我的 Silverlight 时代，我只需在`'Step1.FirstName'`TextBox 和 ViewModel 属性之间进行双向绑定。在我的摘要中，我可以简单地显示一个也绑定到我的 ViewModel 属性的 TextBlock，或者我可以使用元素绑定将我的 TextBlock.Text 属性绑定到我的 Step1.FirstName.Text 属性。

我知道我不能在 MVC3 中做到这一点，但我不知道如何解决这个问题。我考虑过只是 ajax 发布更新的模块并返回一个名为 的新局部视图`ModuleSummary`或类似的东西，但这似乎有点 hacky（并且不完全确定这是否会弄乱我在页面上上传的文件）。

有什么我想念的吗？

**[编辑-示例代码]**

场景：我正在编辑一个最初标题为“我的模块”的模型。显然在初始加载时，我的 DisplayFor model.title 将设置为“我的模块”。假设在第 1 步中，我将标题更改为“我的新模块标题”。我想知道的是，当我单击按钮以显示摘要以显示我的新标题时，是否有办法“刷新”我的模型。

```
@model CEAcademy.AddEditModuleModel
@using (Html.BeginForm("AddModule", "Module", FormMethod.Post, new { enctype = "multipart/form-data" })) {
@Html.ValidationSummary(false)
<fieldset>
    <legend></legend>  
    <div id="step1">
        <div class="editor-label">
            @Html.LabelFor(model => model.title)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.title)
            @Html.ValidationMessageFor(model => model.title)
        </div>
    </div>
    <div id="summary">
        <div class="display-label">
            @Html.LabelFor(model => model.title)
        </div>
        <div class="display-field">
            @Html.DisplayFor(model => model.title)
        </div>            
    </div>
    <input type="button" id="showSummary" value="Step 2: View Summary" />
</fieldset>
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T09:37:17.883

有人刚刚问了一个类似的问题 [在最终提交之前显示表单数据（确认视图）](https://stackoverflow.com/questions/10194434/display-form-data-before-final-submission-confirmation-view) 我会问你和那个人一样的问题。你需要去服务器吗？在显示摘要之前是否需要做一些额外的验证？如果没有，那么您可以“轻松”地执行此客户端。使用 javascript（jQuery 或其他一些库）显示摘要，然后在最后发布数据。

# xml - 如何在 xsl 中为 xml 中的可选标签包含元素

> ID：10204526
> 
> 赞同：2
> 
> 时间：2012-04-18T07:05:58.463
> 
> 标签：xml, xslt

这是我拥有的xml。

```
 <Parent>
      <child>
         <child1>Ram</Child1>
         <child2>Buss</Child2>
      </child>
   </Parent> 
```

对于这个 xml，我需要有一个 xsl 文件，以便生成孩子 1 和孩子 2 的名称。但是孩子 2 的标签是可选的。所以我只需要在标签出现时获取child2的文本内容，如果出现child2标签，我还必须在child1和child2的文本内容之间添加一个斜杠字符（/）。我如何在 XSL 中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T12:42:44.387

**这可能是最简单和最短的解决方案之一**：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output method="text"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="child2">
     <xsl:value-of select="concat('/', .)"/>
 </xsl:template>
</xsl:stylesheet> 
```

**当应用于提供的（文本，已更正）XML 文档时**：

```
<Parent>
    <child>
        <child1>Ram</child1>
        <child2>Buss</child2>
    </child>
</Parent> 
```

**产生了想要的正确结果：**

```
Ram/Buss 
```

**应用于此 XML 文档时**：

```
<Parent>
    <child>
        <child1>Ram</child1>
    </child>
</Parent> 
```

**再次产生了想要的结果**：

```
Ram 
```

# c# - 具有空访问器或没有访问器的属性之间的区别

> ID：10204527
> 
> 赞同：1
> 
> 时间：2012-04-18T07:06:06.603
> 
> 标签：c#

具有空访问器或没有访问器的属性之间的区别？

```
// Property with empty accessors
public string Name { get; set; }

// Property without accessor
public int Counter; 
```

### 编辑：

编译器声明之外的含义意味着这样

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T07:07:38.587

实际上第二个不是财产，而是公共领域。

C# 中的属性只是两种方法的快捷方式——访问器和修改器（或获取和设置）。所以，当你写一些像

```
private string _name;

public string Name 
{ 
   get { return _name; } 
   set { _name = value;  }
} 
```

编译器实际上会创建两个方法

```
public string get_Name() { return _name; }
public void set_Name(string value) { _name = value; } 
```

当你写

```
public string Name { get; set; } 
```

然后编译器将生成这两种方法并`_name`为您生成后备存储（字段）。

当您不使用`get`and`set`时，它是简单字段（如`_name`），编译器不会生成任何方法。

对于您的第二个问题： [C# 中的字段和属性有什么区别](https://stackoverflow.com/questions/295104/what-is-the-difference-between-a-field-and-a-property-in-c-sharp)

因为属性实际上是一种方法，所以它们可以是抽象的或虚拟的，可以被覆盖。属性可以是接口的一部分。属性可用于数据绑定。您可以向属性添加任何逻辑（例如引发某些事件、延迟加载或执行验证）。您可以定义不同的访问级别来设置和获取属性（例如私有和公共）。对于公共领域来说，这一切都不是真的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-18T07:09:23.377

对于第一个编译器将生成私有字段，例如：

```
private string _name;
public string Name { get {return _name;} set { _name = value; } } 
```

第二个只是一个公共领域。

此外，您可以覆盖派生类中的属性（如果您不能使用字段）。

对 SO 的含义有很好的解释：[为什么公共字段比属性更快？](https://stackoverflow.com/questions/632831/why-are-public-fields-faster-than-properties)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T07:24:19.280

```
public string Name { get; set; } 
```

此语法将创建一个自动属性。这是一个简写，相当于：

```
private string _name;

public string Name
{
    get
    {
        return this._name;
    }

    set
    {
        this._name = value;
    }
} 
```

这与此语法不同：

```
public string Name; 
```

这将创建一个公共字段。

不同之处在于，字段是一块内存，属性实际上是获取或设置实例值的方法的简写。虽然两者似乎具有相同的行为，但它们却有着微妙的不同。

一般来说，您希望使用所有面向公众的值的属性，因为它们是围绕您自己的内部实现的抽象。如果您想稍后将属性的内部 getter 实现更改为更复杂的东西，那么您的类的公共接口不会更改，并且使用您的类的任何东西都看不到更改。

一般来说，您总是希望为您的公共成员使用属性。这样做没有真正的成本，它使您的对象更易于维护。

# c# - 如何在外键项中获得计数？

> ID：10204529
> 
> 赞同：1
> 
> 时间：2012-04-18T07:06:09.000
> 
> 标签：c#, linq, entity-framework, entity-framework-4.1

我需要得到所有`bank`的地方`BankBranches cityId = filter.CityId > 0`

代码：

```
 banks = from bank in banks
            where bank.BankBranches.Where(y => y.CityId == filter.CityId).Count() > 0
            select bank;
    var list = banks.ToList(); 
```

错误：

> 对于类型“System.Linq.IQueryable”[Model.Entities.BankBranch]，不允许从“Model.Entities.BankBranch”访问成员“Int32 CityId”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T07:08:12.727

```
 banks = from bank in banks.Include(p=>p.BankBranches)
            where bank.BankBranches.Where(y => y.CityId == filter.CityId).Count() > 0
            select bank;
    var list = banks.ToList(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T11:06:35.650

```
banks = from bank in banks
        join bankBranche in m_banksRepository.BankBranches on bank.Id equals bankBranche.BankId
        where bankBranche.CityId == filter.CityId
        select bank; 
```

# automapper - 将 umbraco 节点映射到强类型对象

> ID：10204535
> 
> 赞同：3
> 
> 时间：2012-04-18T07:06:21.190
> 
> 标签：automapper, umbraco, valueinjecter

我正在使用 Umbraco 4.7.1，我正在尝试将内容节点映射到一些自动生成的强类型对象。我曾尝试同时使用 valueinjecter 和 automapper，但 OOTB 它们都没有映射我的属性。我猜这是因为 Umbraco 节点（cms 文档）上的所有属性都是这样检索的：

```
node.GetProperty("propertyName").Value; 
```

我的强类型对象的格式是 MyObject.PropertyName。那么如何将使用方法和以小写字符开头的字符串检索的节点上的属性映射到 MyObject 上属性以大写字符开头的属性？

**更新** 我设法创建了以下代码，通过在 Umbraco 源代码中挖掘以获取有关如何将字符串属性转换为强类型属性的一些灵感，按预期映射 umbraco 节点：

```
 public class UmbracoInjection : SmartConventionInjection
{
    protected override bool Match(SmartConventionInfo c)
    {
        return c.SourceProp.Name == c.TargetProp.Name;
    }

    protected override void Inject(object source, object target)
    {
        if (source != null && target != null)
        {

            Node node = source as Node;

            var props = target.GetProps();
            var properties = node.Properties;

            for (int i = 0; i < props.Count; i++)
            {
                var targetProperty = props[i];
                var sourceProperty = properties[targetProperty.Name];
                if (sourceProperty != null && !string.IsNullOrWhiteSpace(sourceProperty.Value))
                {
                    var value = sourceProperty.Value;
                    var type = targetProperty.PropertyType;
                    if (targetProperty.PropertyType.IsValueType && targetProperty.PropertyType.GetGenericArguments().Length > 0 && typeof(Nullable<>).IsAssignableFrom(targetProperty.PropertyType.GetGenericTypeDefinition()))
                    {
                        type = type.GetGenericArguments()[0];
                    }
                    targetProperty.SetValue(target, Convert.ChangeType(value, type));
                }
            }
        }
    }
} 
```

如您所见，我使用 SmartConventionInjection 来加快速度。映射 16000 个对象仍然需要大约 20 秒。这可以更快地完成吗？

谢谢

托马斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T07:42:39.140

使用 ValueInjecter 你会做这样的事情：

```
public class Um : ValueInjection
{
    protected override void Inject(object source, object target)
    {
        var node = target as Node;
        var props = source.GetProps();
        for (int i = 0; i < props.Count; i++)
        {
            var prop = props[i];
            target.GetProperty(prop.Name).Value;

        }
    }
} 
```

# .net - 更新到 2.10.1 后 webApp 不起作用

> ID：10204538
> 
> 赞同：1
> 
> 时间：2012-04-18T07:06:39.100
> 
> 标签：.net, linux, mono, ubuntu-10.04

我是 Ubuntu 10.04 LTS 的新手

## 当我运行 Web 应用程序时发生错误：

“/mywebApp”应用程序中的服务器错误

你调用的对象是空的

说明：HTTP 500。处理请求时出错。

堆栈跟踪：

**System.NullReferenceException：对象引用未设置为 System.Web.SessionState.SessionInProcHandler.GetItemInternal 处的对象实例（System.Web.HttpContext 上下文，System.String id，System.Boolean& 锁定，System.TimeSpan& lockAge，System.Object& lockId, System.Web.SessionState.SessionStateActions&actions, Boolean Exclusive) [0x00000] in :0**
版本信息: Mono Runtime Version: 2.10.8.1 (Debian 2.10.8.1-1~dhx1~lucid1); ASP.NET 版本：2.0.50727.1433

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T08:55:21.093

A solution is to use out-process session state:

1.  Open a console and type "asp-state4" to start the server.
2.  Open your web.config and add under `<system.web>`:

    ```
    <sessionState mode="StateServer"
        stateConnectionString="tcpip=localhost:42424"
        stateNetworkTimeout="100"/> 
    ```

# java - 更改 eclipse.ini 中的内存设置导致无法创建 JVM

> ID：10204540
> 
> 赞同：5
> 
> 时间：2012-04-18T07:06:46.963
> 
> 标签：java, eclipse, jvm

我有以下问题。当我尝试在`eclipse.ini`文件中为 JVM 提升内存时，总是会出现`Could not create Java Virtual Machine`异常。

我当前的内存设置是

```
-Xms1024m
-Xmx1024m
-Xmn256m
-Xss2m 
```

我想提高他们

```
-Xms2048m 
-Xmx2048m
-Xmn512m
-Xss2m 
```

我在 32 位 Java、JDK 1.6 上运行。我有一台 12GB 内存的 64 位机器。我不使用 64 位 Java 的原因是我们在开发应用程序的过程中遇到了一些问题，所以我们切换回 32 位。

非常感谢您的建议。

**编辑**

好的，这是我的堆栈跟踪，它发生在我尝试运行 Eclipse 时。另请注意，我`Xms`仅将参数设置为 512M，但它在设置为 1024M 时有效，但对于一个（甚至是大型）网络应用程序来说似乎太多了。

![在此处输入图像描述](../Images/180cd08a83cec7c82d651c8c871442d0.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-18T07:12:07.927

一方面，您永远不应该将您的 Xms 设置为与 Xmx 相同的数量，因为这将有效地导致垃圾收集器在您的 Java VM 内存完全用完之前永远不会运行。将 Xmx 设置为您要分配给 Java 应用程序和 VM 的最大内存，并将 Xms 设置为 VM 应该使用的最大内存量，而不需要过多地进行垃圾收集。您可能会发现这将解决您的问题。

# c# - 我在哪里可以查看 Microsoft.ReportingServices.QueryDesigners.dll？

> ID：10204542
> 
> 赞同：0
> 
> 时间：2012-04-18T07:06:48.197
> 
> 标签：c#, visual-studio-2010

我需要添加“`MiscUtilities"`所以我正在搜索 dll `Microsoft.ReportingServices.QueryDesigners.dll`，我可以在哪里看到这个我看过 C:\Program Files

\Reference Assemblies\Microsoft\Framework\v3.5 和 C:\Program Files\Microsoft Visual Studio 8\Common7\IDE\PrivateAssemblies 广告无法查看我可以查看的位置

为了得到那个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T07:16:27.773

```
%PROGRAMFILES%\\Microsoft SQL Server\\100\\Tools\\Binn\\VSShell\\Common7\\IDE\\Microsoft.ReportingServices.QueryDesigners.dll 
```

# cocoa-touch - 如何将帧*和*从一个 UIView 传输到另一个而不失真？

> ID：10204544
> 
> 赞同：1
> 
> 时间：2012-04-18T07:06:54.453
> 
> 标签：cocoa-touch, uiview, cgaffinetransform, cgrect

我有一个 UIView，它可能应用了缩放和/或旋转变换。我的控制器创建一个新控制器并将视图传递给它。新控制器创建一个新视图并尝试将其放置在与传递的视图相同的位置和旋转中。它通过转换原始视图的框架来设置位置和大小：

```
CGRect frame = [self.view convertRect:fromView.frame fromView:fromView.superview];
ImageScrollView *isv = [[ImageScrollView alloc]initWithFrame:frame image:image]; 
```

这很好用，完美复制了缩放的大小和位置。但是，如果对 应用了旋转变换`fromView`，则它*不会*传输。

所以我添加了这一行：

```
isv.transform = fromView.transform; 
```

这很好地处理了旋转以及缩放变换。结果是缩放变换有效地应用*了两次*，因此结果视图太大了。

那么如何在不加倍比例的情况下将位置（原点）、比例*和*旋转从一个视图转移到另一个视图？

* * *

**编辑**

这是一个更完整的代码示例，其中原始 UIImageView ( `fromView`) 用于调整 UIScrollView（ImageScrollView 子类）的大小和位置：

```
CGRect frame = [self.view convertRect:fromView.frame fromView:fromView.superview];
frame.origin.y += pagingScrollView.frame.origin.y;
ImageScrollView *isv = [[ImageScrollView alloc]initWithFrame:frame image:image];
isv.layer.anchorPoint = fromView.layer.anchorPoint;
isv.transform = fromView.transform;
isv.bounds = fromView.bounds;
isv.center = [self.view convertPoint:fromView.center fromView:fromView.superview];
[self.view insertSubview:isv belowSubview:captionView]; 
```

这是 ImageScrollView 中的全部配置：

```
- (id)initWithFrame:(CGRect)frame image:(UIImage *)image {
    if (self = [self initWithFrame:frame]) {
        CGRect rect = CGRectMake(0, 0, frame.size.width, frame.size.height);
        imageLoaded = YES;
        imageView = [[UIImageView alloc] initWithImage:image];
        imageView.frame = rect;
        imageView.contentMode   = UIViewContentModeScaleAspectFill;
        imageView.clipsToBounds = YES;
        [self addSubview:imageView];
    }
    return self;
} 
```

[正如您在这个丑陋的视频](https://vimeo.com/40800069)中看到的那样，看起来好像变换导致`imageView`放大了太大。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-18T07:17:00.923

将第一个视图的`bounds`、`center`和复制`transform`到第二个视图。

您的代码不起作用，因为它`frame`是*从*、和. setter尝试通过反转过程来做正确的事情，但是当设置非身份时，它不能总是正确工作。`bounds``center``transform``frame``transform`

[文档](https://developer.apple.com/library/ios/documentation/UIKit/Reference/UIView_Class/UIView/UIView.html#//apple_ref/occ/instp/UIView/frame)在这一点上非常清楚：

> 如果变换属性不是恒等变换，则该属性的值是未定义的，因此应该被忽略。
> 
> ...
> 
> 如果 transform 属性包含非恒等变换，则 frame 属性的值未定义且不应修改。在这种情况下，您可以使用 center 属性重新定位视图并使用 bounds 属性调整大小。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-03-30T03:48:25.870

假设 viewA 是包含框架和变换的第一个视图，并且您希望将这些值传递给 viewB。

因此，您需要**在通过 transform 之前获取 viewA 的原始帧并将其传递给 viewB**。否则，当您添加变换时，viewB 的框架将再更改 1 次。

要获取原始帧，只需将 viewA.transform 转换为**CGAffineTransformIdentity**

这是代码

```
CGAffineTransform originalTransform = viewA.transform; // Remember old transform
viewA.transform = CGAffineTransformIdentity; // Remove transform so that you can get original frame
viewB.frame = viewA.frame; // Pass originalFrame into viewB
viewA.transform = originalTransform; // Restore transform into viewA
viewB.transform = originalTransform; // At this step, transform will change frame and make it the same with viewA 
```

之后，viewA 和 viewB 将在 superView 上具有相同的 UI。

# tcl - 如何从csv文件中读取数据

> ID：10204545
> 
> 赞同：1
> 
> 时间：2012-04-18T07:06:57.247
> 
> 标签：tcl

我有一个 csv 文件 Book1.csv。我想读取数据以便在我的脚本中使用它。我无法以行列格式阅读。假设我有一个名为“7-slot”的列并且有数据“1 2 3 4 5”等等。不知道怎么读。从谷歌和stackoverflow搜索但没有得到。

```
package require csv
package require struct::matrix

# Load the file into a matrix
struct::matrix data
set f [open Book1.csv]
csv::read2matrix $f data , auto
close $f 
```

这段代码我取自stackoverflow onlt。我是 TCL 新手，所以学习这些东西

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T10:07:53.440

啊，我认为缺少的是在读取矩阵之前向矩阵添加列。

这个片段：

```
package require csv
package require struct::matrix

struct::matrix m
m add columns 3
set f [open foo.csv]
csv::read2matrix $f m ,
close $f
puts [m serialize] 
```

为`foo.csv`包含而产生

```
1,2,3
"aaa","bbb","ccc" 
```

此打印输出：

```
2 3 {{1 2 3} {aaa bbb ccc}} 
```

我将其解析为“2 行 3 列的矩阵，然后是表示每个行和列值的列表列表。

# vb.net - 关于 SQL Server 中的 Crystal Reports？

> ID：10204546
> 
> 赞同：0
> 
> 时间：2012-04-18T07:06:58.370
> 
> 标签：vb.net, sql-server-2008, crystal-reports-2008

我想为特定的工程师安装详细信息创建一个水晶报表。在该报告中，我不想显示特定工程师的安装细节。

报告模型如下所示：

```
totalnoofinstallation  assignto  c_address   c_mobileno  package_det frm_date    to_date
  3                     FE01      Ramnagar    232345      xx         25-04-2012 05-04-2012 
```

SQL Server 表数据如下所示：

```
p_id  assignto c_address C _mobileno  package_det  frm_date      to_date
 1      FE01    Ramnagar    232345      xx         25-04-2012    05-04-2012
 2      FE01    kknagar     232345     xx         03-04-2012    04-04-2012
 3      FE01    colony      232345      xx         01-02-2012    23-02-2012 
```

我的程序是

```
create procedure sp_fldinstallationdeatils
(
   @assign varchar(20),
   @frmdate1 varchar(20),
   @todate1 varchar(20)
)
as
begin
   select 
      count(*) as tonofoinstallation, Assignto, 
      customer_address, customer_contactno, package_details, frmdate, todate   
   from 
      installation2 
   where 
      assignto='FE01' and frmdate ='25-04-2012' and todate= '05-04-2012' 
   group by 
      Assignto, customer_address, customer_contactno, package_details, frmdate, todate 
end 
```

但我的报告只显示（我想在我的报告中显示安装总数为 3）

```
totalnoof installation
 1 
```

我不喜欢创建另一个程序来计算安装细节的总数。我在现有程序中进行了哪些更改以显示 totalnoofinstallation 的详细信息？请帮助我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T18:04:43.357

```
select 
  count(*) as tonofoinstallation, Assignto, 
  customer_address, customer_contactno, package_details, frmdate, todate   
from 
  installation2 
where 
  assignto='FE01' and frmdate ='25-04-2012' and todate= '05-04-2012' 
```

条件 " and frmdate ='25-04-2012' and todate= '05-04-2012' " 将导致 sql 根据您提供的数据仅返回一行。

# windows-phone-7 - 如何在 WP7 中进行文件操作

> ID：10204548
> 
> 赞同：0
> 
> 时间：2012-04-18T07:07:02.360
> 
> 标签：windows-phone-7, windows-phone-7.1

我正在开发一个 Windows Phone 应用程序。在这个应用程序中，我正在下载一些文件并将它们存储在隔离存储中。我需要打开这些文件。为此，我尝试了不同的方法，但我做不到。

[这里](https://stackoverflow.com/questions/7142678/open-docx-in-windows-phone-7-programmatically)也提出了同样的问题。

答案说我无法从隔离存储中打开文件。但是我在我的 Windows Phone（hotmail 客户端）的邮件客户端中尝试了同样的方法。我向我的电子邮件发送了一些 .doc、.ppt、.pdf、.xls 并尝试通过邮件客户端在我的手机中打开这些附件。我可以打开手机中的文件。我也需要在我的应用程序中做同样的事情。如何在我的应用程序中执行此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T07:41:00.533

您将无法从隔离存储中打开这些类型的文件。第三方应用程序无法启动查看这些文件类型所需的外部应用程序。邮件客户端是在第三方应用程序受保护的沙箱之外运行的本机应用程序。

您可以使用的一种解决方案是将文件上传到外部服务器并使用 WebBrowserTask 类启动它。我不会提供上传文件所需的代码，因为这取决于您的环境，但是一旦上传，您可以通过以下方式启动它：

```
WebBrowserTask webBrowserTask = new WebBrowserTask();
webBrowserTask.URL = "http://www.foo.com/bar.pdf";
webBrowserTask.Show(); 
```

我应该提到，这仅适用于外部文件。如果您尝试引用独立存储中的文件，它将不起作用。您需要将文件上传到某处。

# javascript - 如何避免未声明的变量破坏 Intellisense？

> ID：10204551
> 
> 赞同：1
> 
> 时间：2012-04-18T07:07:06.853
> 
> 标签：javascript, visual-studio-2010, dojo, intellisense

是的，我已经可以看到沿着“然后使用声明的变量”的行的即将到来的评论线索。但请多多包涵。

情况是我有一堆适度的 JS 文件，每个文件都包含一个 Dojo 小部件。小部件包含对命名空间中各种函数的调用，`dojo`但由于`dojo`不存在于小部件文件的范围内，因此 Intellisense 会中断。

这里`CTRL`+`[space]`自动完成包括`this.a`并且`this.b`如预期的那样：

```
new Object({
    a: NaN,
    b: function YesToIntellisense()
    {
        console.log(this.a); // CTRL+[space] includes this.a and this.b
    }
}); 
```

这里`CTRL`+`[space]`自动完成缺少`this.a`和`this.b`：

```
new Object({
    a: dojo.foo(),
    b: function NonIntellisense()
    {
        console.log(this.a); // CTRL+[space] does *not* include this.a and this.b
    }
}); 
```

**如何避免未声明的变量在 VS2010 中破坏 Intellisense？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T07:33:55.500

您需要`/// <reference path="path-to/dojo-file.js" />`在这个 javascript 文件的顶部添加一个标签。请参阅[http://blogs.msdn.com/b/webdevtools/archive/2007/11/06/jscript-intellisense-a-reference-for-the-reference-tag.aspx](http://blogs.msdn.com/b/webdevtools/archive/2007/11/06/jscript-intellisense-a-reference-for-the-reference-tag.aspx)和[http://msdn.microsoft.com /en-us/library/bb385682.aspx](http://msdn.microsoft.com/en-us/library/bb385682.aspx)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-18T07:19:36.920

我不确定VS2010。我使用 Aptana Studio 3，这就是我修复它的方法：

1.  （在 Aptana 中）有一个名为“Project Natures”的设置。我通常在这里检查`Web`,`JavaScript`和`PHP`。看看VS2010有没有这样的设置。

2.  为了避免诸如“使用未声明的变量”之类的 JavaScript 警告，我只需将 js 文件的第一行设置为：

    `/*global var1: false, var2: false, var3:false....*/`

看看你是否可以在 VS2010 中找到等价物。

对不起，如果答案没有帮助。我只会发表评论，但我没有足够的代表。祝你好运！

# c# - 转换绑定列表 列出 C＃

> ID：10204554
> 
> 赞同：15
> 
> 时间：2012-04-18T07:07:24.223
> 
> 标签：c#, bindinglist

如何将 BindingList 转换为 List ？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-04-18T07:11:42.187

试试这个

```
List<int> list = yourBindingList.ToList(); 
```

int 是你的类型 =)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-11-19T20:52:27.380

如果您使用的是 .NET 2.0，那么这就是解决方案：

```
public List<T> ToList()
{
    return new List<T>(this); // this - is a BindingList compatible object
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-09-26T08:55:18.253

列表列表 = yourBindingList.Cast().ToList();

# java - “标记”代码提交到 SVN 的最佳方式是什么？

> ID：10204559
> 
> 赞同：1
> 
> 时间：2012-04-18T07:07:45.420
> 
> 标签：java, svn

我是 Java 域中 SVN 工具的新手。我们有一种情况，我们为以前的客户开发了一个应用程序，现在我们将为另一个客户定制这个应用程序。问题是我们需要将错误修复从以前的系统导入到新系统，因为在生产中引入了错误/更改。我们需要不时地这样做。但是，我们不想进行所有更改，只进行最关键的更改和错误修复，因此我们需要对更改进行“分组”并能够识别它们。我们召开分类会议，决定将哪些项目导入新系统。

在 Microsfot TFS 中，例如可以创建一个错误工作项并将所有相关代码更改链接到该工作项并创建一个搁置。然后我们可以对所有相关的更改进行分组并将它们导入到我们的新系统中。

在这种情况下，我们没有 SVN 的这种奢侈。所以我猜以前系统的维护团队需要以某种方式“标记”或“标记”他们的提交，以表明这个提交修复了错误 #1523 或类似的东西。

1）在 SVN 中标记提交以指示指向系统中某个更改的链接的最佳方法是什么？（标签、标签、标记等）。2) 如果我们以某种方式标记代码更改，例如参考某些错误，我们如何轻松查询与某个 mar 相关的所有提交？例如“给我所有标有错误 #1522 的提交”？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T07:12:55.713

最好的方法是从您当前的开发状态创建一个分支并将更改放在该分支上（命名约定与跟踪系统有关）。而且您可以决定合并分支或仅合并其中的一部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T07:21:51.457

我知道的唯一方法是提交消息。您可以使用命令行 grep-fu 在`svn log`命令输出中搜索您想要的提交。或者，您可以编写一个使用 的结果搜索提交的实用程序`svn log --xml`，或者您可以使用您喜欢的 SVN GUI 客户端，该客户端可以内置此实用程序。

例如，TortoiseSVN 在日志窗口中有一个过滤框，允许搜索在其消息中包含给定文本的提交。请参阅[此处的屏幕截图](http://tortoisesvn.net/docs/release/TortoiseSVN_en/tsvn-dug-showlog.html)。

# php - drupal模块未列出

> ID：10204560
> 
> 赞同：1
> 
> 时间：2012-04-18T07:07:47.023
> 
> 标签：php, drupal

生产服务器中的模块列表有问题

当我在生产网站中添加新模块时。它没有显示列表中的模块。因此，复制并更改 settings.php 本地机器上的 mysql 值。当它执行时，它会在列表中显示添加的模块。

在这篇文章之前，我采取了一些调试措施，它们是：-

检查站点/所有/模块的 755 权限 - 正确的模块版本检查 - 正确。本地和生产网站清除了缓存表。

如果有人可以帮助我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T01:43:56.767

在页面`admin/user/permissions`中，您是否发现每个模块的“管理模块名称”权限都分配给了管理员用户？

# bash - 'if -e' 和 'if -f' 的区别

> ID：10204562
> 
> 赞同：68
> 
> 时间：2012-04-18T07:07:51.230
> 
> 标签：bash, if-statement

`if`检查文件的条件有两个开关：`-e`和`-f`.

这两者有什么区别？

* * *

## 回答 #1

> 赞同：95
> 
> 时间：2012-04-18T07:18:05.850

请参阅：[http ://tldp.org/LDP/Bash-Beginners-Guide/html/sect_07_01.html](http://tldp.org/LDP/Bash-Beginners-Guide/html/sect_07_01.html)

我相信那些不是“如果开关”，而是“测试开关”（因为你必须在 [] 括号内使用它们。

但不同的是：

`[ -e FILE ]`如果 FILE 存在，则为真。

这对于目录和目录都将返回**true**。`/etc/hosts``/dev/null`

`[ -f FILE ]`如果 FILE 存在并且是常规文件，则为真。这将返回**true** for`/etc/hosts`和**false** for `/dev/null`（因为它不是常规文件），并且**false** for`/dev`因为它是一个目录。

* * *

## 回答 #2

> 赞同：49
> 
> 时间：2012-04-18T07:10:19.047

```
$ man bash

       -e file
              True if file exists.
       -f file
              True if file exists and is a regular file. 
```

常规文件不是目录、符号链接、套接字、设备等。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-04-18T08:22:39.733

if 语句实际上使用程序“test”进行测试。您可以通过两种方式编写 if 语句：

```
if [ -e filename ]; 
```

或者

```
if test -e filename; 
```

如果您知道这一点，您可以轻松地查看“test”的手册页以找出不同测试的含义：

```
man test 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-04-18T07:11:22.720

`-e`检查*任何*类型的文件系统对象；`-f` *仅*检查常规文件。

# mysql - 如何运行 sql 查询以从不同的 joomla 组件返回数据

> ID：10204563
> 
> 赞同：0
> 
> 时间：2012-04-18T07:07:54.263
> 
> 标签：mysql, model-view-controller, joomla, components

我正在尝试自定义 Joomla 组件的源文件。

在引入 Joomla MVC 模型之前，我能够在一个组件 Kunena 1.0 中运行 SQL 查询，以从另一个组件中选择数据。例如 Sobi2。

但是，Kunena 1.5 [MVC 模型] 引入后，我不知道如何/在哪里添加 SQL 查询以从 Sobi2 中选择数据。

我相信我需要在 /models/ 或 /func/ 文件夹的文件中添加一些代码。但是有人可以就我如何实现这一目标提供更详细的帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T20:19:12.973

数据交互由模型完成，您会在模型文件夹中找到 Kunena 模型。

查询 SOBI2 数据库与以前相同，MVC 实际上不会影响您执行此操作的方式。

要了解 MVC，请查看：

[http://docs.joomla.org/Developing_a_Model-View-Controller_Component_-_Part_1](http://docs.joomla.org/Developing_a_Model-View-Controller_Component_-_Part_1)

有关如何在模型中查询数据库的示例，请查看：

[http://docs.joomla.org/How_to_use_the_database_classes_in_your_script](http://docs.joomla.org/How_to_use_the_database_classes_in_your_script)

简单来说，Controller 指向适当的视图（view.html.php），然后这个视图与模型交互，然后指向一个模板文件（通常位于 view/tmpl 文件夹中。

希望这可以帮助。

# asp.net-mvc-3 - 如何在 mvc3 中将值从一个动作传递到另一个具有不同视图的动作

> ID：10204567
> 
> 赞同：0
> 
> 时间：2012-04-18T07:08:22.460
> 
> 标签：asp.net-mvc-3, model-view-controller, viewbag

嗨，我正在 MVC3 中开发一个应用程序。我被困在一个地方。

我认为有 2 个字段不属于我的课程。我只是使用它们来填充下拉列表 2 个字段是州和地区。但我想在另一个视图中显示两个字段的选定值。

我使用 ViewBag 进行了尝试，但这不起作用并给了我 Null。

这是在 Create get 方法中：

```
int stateid = Convert.ToInt32(formcollection["ProvincialState.ProvincialStateID"]);
int districtid =  Convert.ToInt32(formcollection["District.DistrictID"]);

ProvincialState state = new AddressService().FetchStateByStateId(stateid);
District district = new  AddressService().FetchDistrictByDistrictId(districtid);

ViewBag.State = state.ProvincialStateName;
ViewBag.District = district.DistrictName; 
```

这是在详细信息视图中：

```
 string data1 = ViewBag.State;
 string data2 = ViewBag.District;
 ViewBag.State = data1;
 ViewBag.District = data2; 
```

我不能使用 Create 的 post 方法，因为我只需要在另一个视图上显示这些数据。或者如果是他们的任何方法，我可以在同一视图中显示数据。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T11:09:40.507

ViewBag 就像 ViewData。为了在页面之间获取信息，您应该将该信息存储在会话中。您可以通过 2 种方式做到这一点：

使用会话变量，例如：

```
this.Session["SessionVariable"] = value; 
```

或者使用 this.TempData 对象：

```
this.TempData["SessionVariable"] = value; 
```

这两者的区别在于，TempData 对象在读取时会从会话中删除。

TempData 只是会话的包装器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T09:39:16.700

除了模型之外，您还可以将此字段发送到您的操作，然后将其存储在会话中，例如：

```
public class SomeController: Controller
{
    [HttpPost]
    public ActionResult DoSomething(MyModel model, int state, int district)
    {
        // validating model...
        // ...

        Session["state"] = state;
        Session["district"] = district;
        // some other logic...
    }
} 
```

# ios4 - UIImagePickerController 设置背景图像，不起作用

> ID：10204571
> 
> 赞同：1
> 
> 时间：2012-04-18T07:08:28.867
> 
> 标签：ios4, background, uiimagepickercontroller

我正在编写一个 iPhone 应用程序，用户应该可以在其中选择他自己相册中的应用程序内背景图片。

我正在尝试使用 UIImagePickerController 启用此功能。

此时，我收到要求我选择图片的框，然后保存图片。但在那之后，当我想使用选择的图像作为背景时，使用这种代码（这与我在开始时设置默认背景的方式相同）：

```
 UIColor *backGrndPict=[[UIColor alloc] initWithPatternImage:
                           [UIImage imageNamed:pngPath]];
    self.view.backgroundColor=backGrndPict; 
```

没有任何效果。我只是得到一个白色的背景。

感谢您的任何提示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T04:45:43.217

米歇尔，为了澄清起见，您是将用户选择的图片保存为`.png`文件还是保存在`UIImage`? 如果您确实使用了该`UIImage`方法，请尝试仔细检查`UIImage`. 同样，它可能不像这样简单，但这就是我对我的应用程序所做的并且遇到了完全相同的问题。如果您确实将其保存为`.png`文件，您是否进行了错误检查？此外，我在屏幕上加载了我的 iOS 模拟器的“应用程序”文件夹，我必须验证相关文件的可用性和完整性。另外，我有时也会在路上滑倒。由于忘记使用保存的路径（我的应用程序保存的文件，几乎总是在文档文件夹下）与保存捆绑图像的应用程序的默认捆绑路径，我已经多次弄乱了路径. 希望能帮助到你。

# jsf - 标签库支持命名空间：http://richfaces.org/rich，但没有为名称定义标签：subTable

> ID：10204589
> 
> 赞同：2
> 
> 时间：2012-04-18T07:09:35.400
> 
> 标签：jsf, richfaces

使用 Jsf，我正在尝试制作一个包含子表的表（如本例）

[http://livedemo.exadel.com/richfaces-demo/richfaces/dataTable.jsf?c=dataTable](http://livedemo.exadel.com/richfaces-demo/richfaces/dataTable.jsf?c=dataTable)

这是我的代码

```
<rich:dataTable id="tableExample" cellpadding="0" cellspacing="0" width="700" border="0" var="var" value="#{myBean.list}" headerClass="capcalera" styleClass="taula">

                <rich:column>
                    <f:facet name="header">ID</f:facet>
                    <h:outputText value="${var.idSollicitud}" />

                </rich:column>
                <rich:column>
                    <f:facet name="header">Codi OVT</f:facet>
                    <h:outputText value="${var.codeTest}" />
                </rich:column>

<rich:subTable
                        onRowMouseOver="this.style.backgroundColor='#F8F8F8'"
                        onRowMouseOut="this.style.backgroundColor='#000000'"

                        var="expense" 

                        value="#{peticioService.list}">

                            <rich:column>
                                <f:facet name="header">HEADER SUBTABLE</f:facet>
                                <h:outputText value="HELLO"/>
                            </rich:column>                  

                    </rich:subTable>

            </rich:dataTable> 
```

但是，然后我收到此错误消息：

```
Tag Library supports namespace: http://richfaces.org/rich, but no tag was defined for name: subTable 
```

我读过rich:subTable 自richfaces 3.0.0 以来可用，但在我的maven 配置中我有4.0 版本。

我错过了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-18T12:22:24.940

它已在 RichFaces 4.0 中删除。您拥有的展示链接适用于 RichFaces 3.3.3。

检查以下文档：

*   [所有可用 RichFaces 4.0 组件的概述](http://docs.jboss.org/richfaces/latest_4_0_X/Component_Reference/en-US/html_single/)
*   [现场展示所有可用的 RichFaces 4.0 组件](http://richfaces-showcase.appspot.com/)
*   [从 RichFaces 3.3.x 到 4.0 的迁移指南](https://community.jboss.org/wiki/RichFacesMigrationGuide33x-4xMigration)

迁移指南的[“迭代组件”](https://community.jboss.org/wiki/RichFacesMigrationGuide33x-4xMigration-ComponentsMigration-RichIterationComponents)部分讲述了以下内容：

```
----------------+---------------------------+------------------------------------
RichFaces 3.3.3 | RichFaces 4.x             | Changes
----------------+---------------------------+------------------------------------
subTable        | not implemented for Final | n/a. But that lightweight variant
                |                           | should be discussed and implemented
                |                           | in future. 
```

在 RichFaces 4.x 中您可以获得的最接近的是[`<rich:collapsibleSubTable>`](http://richfaces-showcase.appspot.com/richfaces/component-sample.jsf?demo=subTableToggleControl&skin=blueSky).

# struts2 - 在 s:iterator 标记中，我具有一组指向相应数据的超链接。我需要知道点击了哪个链接

> ID：10204591
> 
> 赞同：2
> 
> 时间：2012-04-18T07:09:42.953
> 
> 标签：struts2

在 s:iterator 标记中，我有一组指向相应数据的超链接。我需要知道点击了哪个链接

这是我的代码：

```
<s:iterator value="datasFinal" status="reportStatus">
<tr class="<s:if test="#reportStatus.odd == true ">odd</s:if><s:else>even</s:else>">

<td align="center"><s:property value="#reportStatus.count" /></td>
<td align="center"><a href="javascript:submit('')">
<s:set name="index" value="#reportStatus.index" scope="session"/>
<s:property value="reportName" /> </a></td>
</tr>
<s:hidden name="reportName" value="%{reportName}"/>                                 
</s:iterator> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T06:53:55.267

我得到了解决方案，谢谢你 RAO 和 Dave。

```
<s:iterator value="datasFinal" status="reportStatus">
<tr class="<s:if test="#reportStatus.odd == true ">odd</s:if><s:else>even</s:else>">

<td align="center"><s:property value="#reportStatus.count" /></td>
<td align="center"><a href="javascript:submit('${reportName}')">
<s:set name="index" value="#reportStatus.index" scope="session"/>
<s:property value="reportName" /> </a></td>
</tr>                               
</s:iterator> 
```

通过将此提交给java脚本，我得到点击了哪个链接......

# c - 我怎么知道 exit() 函数是如何工作的？

> ID：10204593
> 
> 赞同：2
> 
> 时间：2012-04-18T07:09:56.430
> 
> 标签：c, linux

我编写了一个小程序来了解 exit() 函数在 Linux 中的工作原理。

```
#include <unistd.h>

int main()

{
    exit(0);
} 
```

然后我用 gcc 编译了程序。

```
gcc -o  example -g -static example.c 
```

在 gdb 中，当我设置断点时，我得到了这些行。

```
Dump of assembler code for function exit:
0x080495a0 <+0>:    sub    $0x1c,%esp
0x080495a3 <+3>:    mov    0x20(%esp),%eax
0x080495a7 <+7>:    movl   $0x1,0x8(%esp)
0x080495af <+15>:   movl   $0x80d602c,0x4(%esp)
0x080495b7 <+23>:   mov    %eax,(%esp)
0x080495ba <+26>:   call   0x80494b0 <__run_exit_handlers>
End of assembler dump.

(gdb) b 0x080495a3
Function "0x080495a3" not defined.
Make breakpoint pending on future shared library load? (y or [n]) y
Breakpoint 1 (0x080495a3) pending.

(gdb) run
Starting program: /home/jack/Documents/overflow/example
[Inferior 1 (process 2299) exited normally] 
```

程序不会在断点处停止。为什么？我使用 -static 编译程序，为什么断点会挂起，直到库加载到内存中？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-18T07:12:43.340

您要求 gdb 中断一个名为`0x080495a3`. 您需要`b *0x080495a3`改用。

```
(gdb) help break
Set breakpoint at specified line or function.
break [LOCATION] [thread THREADNUM] [if CONDITION]
LOCATION may be a line number, function name, or "*" and an address. 
```

正如帮助所说， The`*`告诉 gdb 这是您要中断的地址。

从你的例子：

```
Function "0x080495a3" not defined.
Make breakpoint pending on future shared library load? (y or [n]) y
Breakpoint 1 (0x080495a3) pending. 
```

“待定”意味着断点正在等待，直到`0x080495a3`从共享库加载调用的函数。

* * *

您可能还对以下内容感兴趣`break-range`：

```
(gdb) help break-range
Set a breakpoint for an address range.
break-range START-LOCATION, END-LOCATION
where START-LOCATION and END-LOCATION can be one of the following:
 LINENUM, for that line in the current file,
 FILE:LINENUM, for that line in that file,
 +OFFSET, for that number of lines after the current line
         or the start of the range
 FUNCTION, for the first line in that function,
 FILE:FUNCTION, to distinguish among like-named static functions.
 *ADDRESS, for the instruction at that address.

The breakpoint will stop execution of the inferior whenever it executes
an instruction at any address within the [START-LOCATION, END-LOCATION]
range (including START-LOCATION and END-LOCATION). 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-18T07:12:29.583

看起来您正试图在名为`0x080495a3`. 而是尝试`b *0x080495a3`向 GDB 指示您要在特定地址处中断。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T07:33:00.630

0x080495a3 是您愿意应用断点的行的地址。但是 gdb 的格式是 b（函数名或行号）。所以你有两种方法可以做到这一点。

1）在您的 gdb 会话开始后执行 l 。它将列出 C 中的代码。然后使用其他行号应用断点

2）如果要使用地址，使用b *0x080495a3的方式设置断点。

这样你就可以在线停止

0x080495a3 <+3>: 移动 0x20(%esp),%eax

# mysql - 与默认或动态类别关联的元素的最佳数据库设计？

> ID：10204601
> 
> 赞同：1
> 
> 时间：2012-04-18T07:10:39.957
> 
> 标签：mysql, database-design

所以假设有一张`showrooms`桌子，一张`cars`桌子，一张`trucks`桌子和一张`categories`桌子（不要介意命名，你应该得到图片）。1 个陈列室可以有更多类别，1 个类别可以有更多与之关联的汽车/卡车。

我的问题是所有内容都是动态添加的，而且必须为每个陈列室分配默认类别（例如：主类别）。

每次动态添加陈列室时，我是否应该生成默认类别（例如：showroom_id:1|category:main 用于类别表）？或者我应该制作一个`default_cars`（不再有类别关联）表和一个`custom_cars`（关联到自定义类别）表？还是有其他想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T10:39:11.077

要授予数据库表的一致性，必须按以下顺序填充：

陈列室（1）-> 类别（2）-> 汽车/轨道（3）

您的样本并不全面，但让我假设您的意思是汽车应该始终具有正确的类别。在这种情况下，每次插入新`showroom`的时，您都会附加此默认类别集。在同一笔交易中完成。作为类别的模板，您可以使用：

*   陈列室的 NULL 参考 (showroom_id: **NULL** |category:main )
*   或独立表（template_category）

# java - 加密xml文件

> ID：10204603
> 
> 赞同：3
> 
> 时间：2012-04-18T07:10:51.830
> 
> 标签：java, .net, xml, encryption-asymmetric, x509certificate2

```
makecert -r -pe -n "CN=CERT_SIGN_TEST_CERT" -b 01/01/2010 -e 01/01/2012 -sky exchange -ss my 
```

使用此命令，我生成证书并从中导出 .pfx 文件，此 pfx 文件用于加密 xml 文件

> 在 .net 中使用 EncryptedXml、X509Certificate2、RSACryptoServiceProvider 和 XmlDocument 类

我加密以下xml

```
<Test><Name>Foo</Name><CardNo>123</CardNo></Test> 
```

如下：

```
<EncryptedData Type="http://www.w3.org/2001/04/xmlenc#Element" xmlns="http://www.w3.org/2001/04/xmlenc#"><EncryptionMethod Algorithm="http://www.w3.org/2001/04/xmlenc#aes256-cbc" /><KeyInfo xmlns="http://www.w3.org/2000/09/xmldsig#"><EncryptedKey xmlns="http://www.w3.org/2001/04/xmlenc#"><EncryptionMethod Algorithm="http://www.w3.org/2001/04/xmlenc#rsa-1_5" /><KeyInfo xmlns="http://www.w3.org/2000/09/xmldsig#"><X509Data><X509Certificate>MIICFzCCAYCgAwIBAgIQK5IFtxwNaJhGzXuDf92TgzANBgkqhkiG9w0BAQQFADAfMR0wGwYDVQQDHhQARgBpAG4AYQBsAF8AQwBlAHIAdDAeFw0wOTEyMzExODMwMDBaFw0xMjEyMzExODMwMDBaMB8xHTAbBgNVBAMeFABGAGkAbgBhAGwAXwBDAGUAcgB0MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQC1Wx11luboMbT1swXV/56j2RYRhR81n9hF3b6tfof1zHRorg7DIP3hvnVtqDF+WxAjn1um97DHtxWf3solthbIHC9cGtqxUhZhgdd0aVAuiKTBbTgnOWdEqTErenrHOzlZnD9iDzOm3OYVLKN+3hKJmjlhTp0sFsu4AIbXlxZVHQIDAQABo1QwUjBQBgNVHQEESTBHgBBDXPlnSZ5zUyVbxJzJO12goSEwHzEdMBsGA1UEAx4UAEYAaQBuAGEAbABfAEMAZQByAHSCECuSBbccDWiYRs17g3/dk4MwDQYJKoZIhvcNAQEEBQADgYEAiubZJZdF3Y9ItOl7LTyixcbuebs50GLFsTeMslS3usq6psXcUEFJntXJ5vXOSe/vp6E6A5AwW4MtPfnB1kzach4T4+WlWeaDHoyj6y5j+n7P6B/X6ZhkQ8MCiGhZ/fTOt7CDisnFVG9gvoH2LUEs1QkiByDq6jii3TUAMN9YQdA=</X509Certificate></X509Data></KeyInfo><CipherData><CipherValue>Vyml+mtbeL5bE6EWKNqHfnE1xEkbJglcxbjH3Y7pj9BtXVImAI/SbBdLHatyjIAei7qUfhcn+qYC7WAh48XR78BgqCdJX7O5lfZjVSVeVaQUwl1Bdirdz7RYuveIjDtEIM80W4tB6rq2nOgYNkisxhhwIl7EiCQtT42bSGCKFic=</CipherValue></CipherData></EncryptedKey></KeyInfo><CipherData><CipherValue>ezVeQlBGZRbHqitB2mmHuMvifGB9IhG1g0CWmL8iz37JIIw7x5cGbb5Ap8iy24ACu8TJpwgAGIUWnUTDSZ//kWLzCa3G5HL+jT/RHn+zypk=</CipherValue></CipherData></EncryptedData> 
```

至于加密是使用 w3c 标准完成的。我如何在 java 上解密这个 xml 文件。我已经使用 .pfx 文件来加密文件。在 .net 中，我可以使用以下方法解密文件：

```
 EncryptedXml encXml = new EncryptedXml(xmlEncDoc);  
encXml.DecryptDocument(); 
```

我如何在java中解密，我应该将pfx文件传递给java端吗？因为加密的 xml 文件中有标签。

你的建议是appriciated。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T18:57:25.507

您是否可以控制 XML 消息的发送者和接收者？最好遵循 XML[签名](http://www.w3.org/Signature/)的 W3 标准。Java 6 包括对数字签名的完全支持，并且有一个很好的[教程](http://java.sun.com/developer/technicalArticles/xml/dig_signature_api/)来解释如何做到这一点。

# jquery - 在 jQuery 中使用带有变量的 $ 背后有什么具体原因吗

> ID：10204606
> 
> 赞同：54
> 
> 时间：2012-04-18T07:11:04.207
> 
> 标签：jquery

我知道这是一个愚蠢的问题，但我对此有点困惑。例如，如果我有一个带有 ID: 的输入，`rad1`那么下面的代码行之间有什么区别吗？

```
var $a = $('#rad1') 
```

或者

```
var a = $('#rad1') 
```

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2012-04-18T07:13:44.483

**不，没有真正的区别。**

这只是一个约定，可以帮助您记住它`a`不是 DOM 元素，而是一个 jQuery 对象。

```
var a = document.getElementById('a');
a.innerHTML  //fine

var $a = $('#a');
$a.html()   // fine 
```

哦，顺便说一句，既不是好的变量名`a`也不`$a`是好的变量名……您应该使用有意义的变量名而不是 abc 字符。

* * *

在同一个站点上阅读[jQuery 信息标签：](https://stackoverflow.com/tags/jquery/info)

**变量命名约定**

jQuery 包装的变量通常以“$”开头，以区别于标准 JavaScript 对象。

```
var $this = $(this); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-18T07:13:25.767

它只是为了表明它是一个 Jquery 变量。

声明`$a`您正在显示您的变量用于 JQuery 对象，这只是一个符号。所以最易读的事情是用 $ 表示法声明 Jquery 变量

```
var $obj=$("#obj"); 
```

和没有 $ 符号的 DOM 元素

```
var obj = document.getElementById("obj"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T07:13:33.200

没有区别。这只是一个编码约定，可帮助识别该变量表示一个 jquery 包装的对象。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-18T07:13:48.740

没有区别，它只是编码约定，[检查一下](http://www.bennadel.com/blog/1778-Using-Variable-In-jQuery-Code-Is-Just-Hungarian-Notation.htm)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-02-24T11:42:41.173

组合也可以正常工作：

您还可以执行以下操作来显示`<div>`：

```
function getCompTable(divId){
  var $d = $('#' + divId);
  $d.show();
} 
```

**用法**

```
getCompTable('compListDiv'); // compListDiv - is a div id="" 
```

约西列夫

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-02-22T12:17:59.217

我认为这种情况应该说明记住（当然，分配'$'）jquery和简单的javascript变量的原因：

```
<form id='myform' >
  <input id="name" type="text" value="Peter" />
</form>

 <script>

 $(document).ready(function(){
      var name = document.getElementById('name');
  var $name = $('#name');

  console.log(name.value);   // javascript's properties are available 
       console.log($name.value);  //it is undefined  (worth of notice)

  console.log(name.val());   // error!  name.val is not a function !  (jquery function will not be available)
  console.log($name.val());    // jquery functions are available

});

 </script> 
```

# visual-studio - 如何知道要杀死哪个 Visual Studio 实例？

> ID：10204611
> 
> 赞同：4
> 
> 时间：2012-04-18T07:11:30.783
> 
> 标签：visual-studio, windows-7

我打开了几个 Visual Studio 实例，它们在任务管理器中显示为 devenv.exe。我需要杀死其中一个。我怎么知道哪个是哪个？使用 Windows 7 64 位。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-18T07:14:00.940

在任务管理器中，如果您转到应用程序选项卡，您可以根据名称右键单击要杀死的实例，然后单击“转到进程”。它应该选择您要杀死的进程。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-18T07:14:00.090

使用[进程资源管理器](http://technet.microsoft.com/en-us/sysinternals/bb896653)而不是任务管理器。

除其他外，它允许您检查特定进程中的所有打开句柄和/或搜索 DLL 和句柄 - 这些工具中的任何一个都可以帮助您识别特定实例，如果说您正在寻找一个特定的实例已打开一个特定文件。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-18T07:18:02.060

使用来自 sysinternals 的[进程资源管理器。](http://technet.microsoft.com/en-us/sysinternals/bb896653)从“属性”对话框（“作业”选项卡）中，您将知道要杀死哪一个。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-18T07:14:41.130

下载 Process Explorer 并将 Cross-air 拖到卡住的窗口上。 [http://technet.microsoft.com/de-de/sysinternals/bb896653](http://technet.microsoft.com/de-de/sysinternals/bb896653)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-09-16T11:34:25.567

将 Visual Studio 的一个实例中的一个选项卡分离到新窗口。此实例将在任务管理器中的名称旁边显示 (2)。我认为这是区分它们的最快方法。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-06-03T13:12:59.153

我要做的是：

*   删除`bin and obj`项目源中的文件夹（一些调试箱项目将保持跳过它们）
*   清除bin中剩余的文件（剩下的是正在运行的进程）
*   转到任务管理器进程并搜索要删除的剩余项目的名称，然后结束每个进程
*   您现在可以清除所有 bin 文件并重建

# android - 从超链接打开谷歌地图

> ID：10204612
> 
> 赞同：30
> 
> 时间：2012-04-18T07:11:40.957
> 
> 标签：android, google-maps

我正在尝试专门为android用户设计一个网页，所以我想知道是否有一种超链接格式可以像调用功能一样打开谷歌地图，例如

```
<a href="tel:0766551121"> Call me now </a> 
```

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-04-18T07:37:23.283

如果“打开 Google Maps”是指原生 Android Google Maps 应用程序，而不是在 Android 浏览器中打开链接，那么根据[Geo Intents](https://developer.android.com/guide/components/intents-common.html#Maps)，您可以使用以下[Geo URI](http://en.wikipedia.org/wiki/Geo_URI)格式来触发将在设备到给定位置或查询：

*   地理：纬度，经度
*   地理：纬度，经度？z=缩放
*   geo:0,0?q=我的+街道+地址
*   geo:0,0?q=企业+附近+城市

对于谷歌街景，您可以使用：

*   google.streetview:cbll=lat,lng&cbp=1,yaw,,pitch,zoom&mz=mapZoom

有关可用选项的详细信息，请参阅[官方 Google Maps Intents 文档](https://developers.google.com/maps/documentation/android-api/intents)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-04-18T07:14:12.937

使用[GEO URI](http://en.wikipedia.org/wiki/Geo_URI)在超链接上打开地图，点击如下：

```
<a href="geo:37.786971,-122.399677;u=35">open map</a> 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-11-21T07:49:20.850

我要使用@Mnemonic Flow

*   地理：纬度，经度
*   地理：纬度，经度？z=缩放
*   geo:0,0?q=我的+街道+地址
*   geo:0,0?q=企业+附近+城市

创建你的 Uri

**例子**

**第 1 步：**创建链接，如

```
Uri uri; 
```

*   地理：纬度，经度

    `uri = Uri.parse("geo:47.6,-122.3")`

*   地理：纬度，经度？z=缩放

    `uri = Uri.parse("geo:47.6,-122.3?z=11")`

*   geo:0,0?q=我的+街道+地址

    `uri = Uri.parse("geo:0,0q=The+Eldorado+Park,+Rampar+Mota,+Gujarat,+India")`

*   geo:0,0?q=企业+附近+城市

    `uri = Uri.parse("geo:0,0q=The+Eldorado+Park,+Rampar+Mota,+Gujarat,+India")`

**步骤 1**创建方法如下

```
public void showMap(Uri geoLocation) {
    Intent intent = new Intent(Intent.ACTION_VIEW);
    intent.setData(geoLocation);
    if (intent.resolveActivity(getPackageManager()) != null) {
        startActivity(intent);
    }
} 
```

像这样打电话

```
showMap(uri); 
```

**第 2 步：**在清单文件中添加意图过滤器

```
<activity YourActivity>
    <intent-filter>
        <action android:name="android.intent.action.VIEW" />
        <data android:scheme="geo" />
        <category android:name="android.intent.category.DEFAULT" />
    </intent-filter>
</activity> 
```

# tfs - TFS2010 - 记录自定义构建活动

> ID：10204616
> 
> 赞同：1
> 
> 时间：2012-04-18T07:11:45.870
> 
> 标签：tfs, build

我们有一个自定义构建活动，它执行我们的构建。我们使用自定义活动，因为我们使用的编译器非常特殊，而且系统很旧，我们不想重写整个东西以便它与 MSBuild 一起工作。但是，存储库由 TFS 管理，构建应由 TFS 触发。

在自定义构建活动中，我想记录状态。目前，我正在使用这段 C# 代码执行此操作：

```
private void LogMessage(String message, CodeActivityContext context)
        {
           BuildInformationRecord<BuildMessage> record =
             new BuildInformationRecord<BuildMessage>()
             {
                 Value = new BuildMessage()
                    {
                        Importance = BuildMessageImportance.High,
                        Message = message,
                    },
             };

            context.Track(record);
        } 
```

它可以工作，但是有一个大问题：我们的自定义构建活动需要大约 6 个小时才能执行（正如我所说，这是一个古老且大型的软件项目）。问题是日志消息仅在构建操作完成后才会出现在 TFS 构建摘要中。因此，经过 6 个小时的构建，所有日志消息都会立即出现。

我们想要的是消息在记录时显示。这样构建人员就可以看到当前构建在哪里，也可以看到发生了什么。

到目前为止，我实施的一种解决方法是让自定义构建活动使用与工作流基础部分共享的消息队列。然后，在工作流基础中，我创建了一个并行语句，它执行构建，同时清空消息队列并显示它们。这是该构造的屏幕截图：

![在此处输入图像描述](../Images/7e027b32c6dfe631cf2d394e6cdf2d1f.png)

然而，结果相当令人失望。这就是结果：

![在此处输入图像描述](../Images/481c9515f548a786c8ea1c52af787008.png)

红色的是实际的构建日志消息，它周围的一切都只是 while 循环和其他的东西......

是否可以关闭这些日志消息？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T09:15:22.007

您可以尝试在 Build Process Template XAML 上设置以下属性（无法通过设计器完成）以抑制消息：

```
mtbwt:BuildTrackingParticipant.Importance="None" 
```

我的模板中的示例：

```
<InvokeMethod DisplayName="Delete File" mtbwt:BuildTrackingParticipant.Importance="None" ... /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-18T12:50:37.573

`mtbwt:BuildTrackingParticipant.Importance="Low"/"None"`只控制通话（我猜）。而是使用 `mtbwt:BuildTrackingParticipant.TrackingOption="None"`，这似乎完全摆脱了呼叫中的所有跟踪消息。

# flash - 在 Samsung SmartTV 或 LG Netcast 上播放 AAC、MP3

> ID：10204624
> 
> 赞同：1
> 
> 时间：2012-04-18T07:12:19.633
> 
> 标签：flash, html, rtmp, samsung-smart-tv, television

您知道是否有可能在三星 SmartTV 或 LG NetCast 平台上播放 AAC 或 MP3（甚至 WMA 或 OGG）icecast 广播流？理想情况下使用 HTML 组件或三星/LG 内置播放器甚至嵌入式 Flash 播放器的 HTML？

如果上述任何格式都不可能，我们仍然可以使用 flv/rtmp，我想它应该可以很好地用于电视上的嵌入式 Flash 播放器，不是吗？

无论如何，我们的首选是icecast AAC/MP3。

问候， STeN

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T06:16:06.353

是的，这是可行的。

最近我发布了类似问题的答案，所以去检查一下： [在三星智能电视上播放声音](https://stackoverflow.com/questions/10006593/playing-sounds-on-samsung-smart-tv/10138625#10138625)

这里是文档的直接链接：http: [//www.samsungdforum.com/Guide/View/Developer_Documentation/Technical_Notes/Player/Detailed_player_specification](http://www.samsungdforum.com/Guide/View/Developer_Documentation/Technical_Notes/Player/Detailed_player_specification)

# jquery - 如何在 jquery 移动 web 应用程序中使用 jqplot 图表

> ID：10204626
> 
> 赞同：1
> 
> 时间：2012-04-18T07:12:25.480
> 
> 标签：jquery, mobile, jqplot

我想在 jQuery 移动网络应用程序中创建图表。我正在使用`jqPlot`图表，但无法创建图表。我正在使用以下代码：

```
 <html>
    <head>
        <script type="text/javascript" src="@Url.Content("~/Scripts/app/jquery.mobile-1.0b2.min.js")"></script>
        <script type="text/javascript"src="@Url.Content("~/Scripts/jquery.jqplot.min.js")"></script>
        <link rel="stylesheet" type="text/css" href="@Url.Content("~/Content/jquery.jqplot.min.css" )"/>
        <link rel="stylesheet" href="@Url.Content("~/Content/jquery.mobile-1.0b2.css")" />
        <link rel="stylesheet" href="@Url.Content("~/Content/jquery.mobile-1.0b2.min.css")" />

        <script type="text/javascript">
            $('#index').live('pageinit', function (event) {
                alert("jqplotchart");
                $.jqplot('container', [[[1, 2], [3, 5.12], [5, 13.1], [7, 33.6], [9, 85.9], [11, 219.9]]]);
            });
        </script>
    </head>
    <body>
        <div id="index" data-role="page">
            <div id="container" style="height: 400px; min-width: 600px">
            </div>
        </div>
    </body>
    </html> 
```

为了检查 jQuery，我还在函数中添加了一个警报，但它也没有显示警报。也许是因为我`pageinit()`以错误的方式使用该事件？请建议我如何使用该`pageinit()`事件或者我是否需要使用其他事件来创建图表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T10:10:01.033

这可能不再需要答案，但如果我几天前看到这个问题，我会发现答案很有用。

有两个问题：

1.  在包含 jquery mobile javascript 之前，您需要包含“jquery.mobile-xxxmin.js”。
2.  jqPlot 不喜欢'pageinit'。您需要改用“pageshow”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-10T08:10:26.787

**有一种更简单的方法（在我的情况下有效）：**

-**首先：**在任何页面之外（例如在*正文*标签下方）删除您的*绘图容器 div ：*

 *```
<body>
<div id="plotContainer"></div>
... 
```

-**然后：在***$(document).ready(function(){ ... **here** ... })*中设置绘图（图表）；并隐藏它，使其不会在页面之间显示：

```
$("#jqxChart").jqxChart(settings);
$("#jqxChart").hide(); 
```

-**最后：**只需复制 div 与页面内的情节：

```
<script>
$('#page_ID').bind('pageshow', function(data) { 
$("#jqxChart").appendTo("#ID_of_DIV_you_want");
$("#jqxChart").show();  
$('#jqxChart').jqxChart('refresh');
});
</script> 
```

希望这可以帮助！！！*

# iphone - 带有 facebook 连接的 iphone 应用程序的架构

> ID：10204632
> 
> 赞同：2
> 
> 时间：2012-04-18T07:12:46.010
> 
> 标签：iphone, ios, design-patterns, architecture

我正在开发一个 iphone 应用程序，我想就什么是最好的架构寻求建议。

基本上，该应用程序实现了 facebook 连接以供用户登录。用户将能够选择他们可以向其发送消息/发送照片的朋友（想想whatsapp）。我将有一个服务器，我打算用它来存储他们发送的消息和照片。分离组件的最佳方法是什么？而且，处理向我的服务器发送数据并从中读取数据的逻辑是否应该了解有关 facebook 连接组件的任何信息？

有没有人对这样的应用程序的最佳架构有任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T20:06:45.530

划分数据访问是一种被广泛接受的做法，在您的情况下，数据访问是：

*   连接到FB
*   连接到您的数据库服务器

理想情况下，您的域逻辑不应该知道它从哪里获取数据（Web 服务、数据库、FB、G+ 等）。它应该知道的是它正在获取数据，以及它应该如何处理这些数据。

解决从域层抽象数据访问层的一些常见模式是：

*   [存储库](http://martinfowler.com/eaaCatalog/repository.html)
*   [数据映射器](http://martinfowler.com/eaaCatalog/dataMapper.html)

上面的链接指向 Martin Fowler 的博客，但在 google 或 stackoverflow 上进行一些搜索应该会更清楚：

*   [数据访问层设计模式](https://stackoverflow.com/questions/1055710/data-access-layer-design-patterns)
*   [Microsoft Article](http://msdn.microsoft.com/en-us/magazine/dd569757.aspx)，但与任何现代 OOP 语言相关（甚至提到 ruby​​）。

# javascript - 使用 .Net 的彗星提示

> ID：10204635
> 
> 赞同：1
> 
> 时间：2012-04-18T07:13:06.647
> 
> 标签：javascript, html, json, wcf, comet

我有一个显示一些数据的网站。它由以下部分构成： - 一个 Web 应用程序，显示数据。（ASP.Net 应用程序，但我不使用服务器端功能来显示数据；它是纯 HTML 和 JavaScript） - 以 Json 格式提供数据的服务。（WCF）

客户端请求数据并接收并显示它们。现在我想改变流程以便在推送基础策略中工作。我搜索了一下，发现 Comet 是一个不错的选择，但在我的案例中没有找到实用的样本。一些示例有带有 php 的客户端（服务器端）等等。现在我想要一些关于以客户端是纯 JavaScript 和 HTML 并且服务器是 WCF 的方式使用彗星的提示（服务器将 Json 推送到 JavaScript ）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T07:23:14.523

看看[nComet](http://ncomet.codeplex.com/) 它是彗星的 asp.net 实现，不确定它是否是 wcf，但我原以为大部分代码都是可重用的。

或者更好[的戳](http://www.pokein.com/Help/Documentation.aspx)

# perl - 为什么在警报信号处理程序中不死杀死进程？

> ID：10204637
> 
> 赞同：3
> 
> 时间：2012-04-18T07:13:13.143
> 
> 标签：perl, die

从如何指定 Perl 系统调用的超时限制？

```
eval { 
    local $SIG{ALRM} = sub { die "alarm\n" }; # NB: \n required 
    alarm $timeout; 
    $nread = sysread SOCKET, $buffer, $size; 
    alarm 0; 
}; 
if ($@) { 
    die unless $@ eq "alarm\n";   # propagate unexpected errors 
    # timed out 
} 
else { 
    # didn't 
} 
```

如果发生超时，应该`sub { die "alarm\n" };` 导致进程结束。我想我无法理解`die`。这个[http://www.cs.cf.ac.uk/Dave/PERL/node111.html](http://www.cs.cf.ac.uk/Dave/PERL/node111.html)说“die() 函数用于退出脚本并显示一条消息供用户阅读”。但是，在上述脚本的情况下，该脚本将处理#timed out 中的代码。sysread 也继续工作。我有一个休眠 30 秒的 perl 脚本，而不是 sysread。我的超时设置为 10 秒。正如预期的那样，#timed out 中的代码已执行，但脚本继续休眠。任何输入表示赞赏

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-18T09:48:02.470

[`die`](http://perldoc.perl.org/functions/die.html)不会导致进程结束，它会引发异常。

现在，如果没有捕获到异常，则结束一个进程，但是您有适当的[代码](http://perldoc.perl.org/functions/eval.html)来捕获这个异常。

该过程不会结束，因为您明确阻止它结束。

* * *

由于您不太清楚自己得到了什么行为，因此可能还有另一种可能性：您正在使用 Windows 构建的 Perl。

这`alarm`是一个 Unix 系统调用。这是非常有目的的（在经过一定时间后发送信号）在 Windows 上没有任何意义，因为 Windows 没有信号。

Perl`alarm`在某种程度上进行了模拟，但只是以非常有限的方式。`sleep`很可能是唯一可以被`alarm`. 否则，仅在语句之间检查超时。

所以它不会中断`sysread`，但是一旦`sysread`返回，Perl 会注意到超时时间已过，然后模拟一个信号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T07:54:10.270

从**人警报**

```
 alarm() arranges for a SIGALRM signal to be delivered to the calling process in seconds seconds. 
```

在传递**sigalarm**之前，执行到达 else 块。**在sysread**之前插入**STDIN** ，以便**sigalarm**触发产生预期结果。

 ***** * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T08:27:04.523

> “我有一个休眠 30 秒的 perl 脚本，而不是 sysread。我的超时设置为 10 秒。正如预期的那样，#timed out 中的代码已执行，但脚本继续休眠。”

真的吗？

```
#!/usr/bin/perl
use strict;
use warnings FATAL => qw(all);

eval {
    open my $fh, '<', $0 || die;
    local $SIG{ALRM} = sub {
        print STDERR "hello!\n";
        die "bye!";
    };
    alarm 3;
    while (<$fh>) {
        print $_;
        sleep 1;
    }
    close $fh;
};

if ($@) {
    print "HERE: $@\n";
} 
```

输出：

```
#!/usr/bin/perl
use strict;
use warnings FATAL => qw(all);
hello!
HERE: bye! at ./test.pl line 9, <$fh> line 3. 
```

在预期的 3 秒内结束；如果我只使用“sleep 100”而不是读取文件，情况仍然如此。请注意，*如果您生成子进程，则*警报不会杀死该子进程，并且父进程必须等待。在这种情况下，“你好！” 当警报触发时，信号处理程序中将出现，但捕获骰子的 eval 将在子进程完成之前完成。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-24T11:50:14.720

在将 Linux Perl 脚本移植到 Windows 时，我遇到了同样的问题。

我通过...解决了

创建非阻塞套接字

```
$recsock = IO::Socket::INET->new(
                             LocalPort => 68,
                             Proto => "udp",
                             Broadcast => 1,
                            Blocking => 0,
                             ) or die "socket: $@"; 
```

将 $continue 变量添加到超时句柄

```
# Timeout handle
$SIG{ALRM} = sub { 
    print "timeout\n";
    $continue = 1;
}; 
```

并在超时发生时检查 $continue 是否变为真：

```
 alarm($timeout);
     while(1){
         $recsock->recv($newmsg, 1024);
         eval {
            $packet = Net::Package->new($newmsg); 
             ...
        };
        sleep 0.1;
        last if ($continue);
    }
    alarm(0); 
```****

# iphone - 在 iphone/ipad 的 tokbox 上录制对话

> ID：10204645
> 
> 赞同：0
> 
> 时间：2012-04-18T07:13:37.027
> 
> 标签：iphone, video, recording

我尝试使用[http://codethink.no-ip.org/wordpress/archives/673](http://codethink.no-ip.org/wordpress/archives/673)中的以下代码，然后将其放入 OpenTok 的 The OpenTokHello 示例应用程序中，它似乎并没有像我想象的那样实际录制视频。

我将 ScreenCaptureView 设为所有内容的新“超级视图”，然后确保将视频流视图添加到该视图中。当我播放视频时，应该播放流媒体视频的地方是空白的。

关于我做错了什么的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T00:59:01.677

完全披露：我编写了一些 OpenTok iOS SDK 并为 TokBox 工作。

这个 ScreenCaptureView 的实现可能不适用于我们的 SDK，因为我们所有的视频渲染都是在 UIView 的上下文之外完成的。您必须抓住视图的渲染层才能恢复屏幕的那部分。

根据您尝试录制对话的原因，我建议您选择

1.  在 QuickTime 中使用屏幕截图并在模拟器中运行您的应用程序（更容易）
2.  等待 iOS 上的 OpenTok 归档支持，这将在几个月后提供（也很容易，但不适合不耐烦的人）
3.  从 CoreGraphics 捕获订阅者的渲染输出（不太容易）

# java - JSF复合组件的相互更新

> ID：10204646
> 
> 赞同：0
> 
> 时间：2012-04-18T07:13:39.847
> 
> 标签：java, design-patterns, jsf-2, composite-component

我有疑问如何更新同一页面上的其他复合组件。如果我输入客户 ID 并单击“搜索”按钮，则应在数据库中搜索客户，如果存在，则系统继续根据客户 ID 搜索案例库。反之亦然。

对于此示例，假设关系 Customer:Case 是 1:1。

main_page.xhtml

```
<h:body>
    <ui:composition template="/WEB-INF/template/layout.xhtml">
        <ui:define name="content">
            <custom:component_customer
                customerId="#{mainPageController.customer.id}"
                searchCustomer="#{mainPageController.searchCustomer}"
            />
            <custom:component_case
                caseaseId="#{mainPageController.case.caseId}"
                searchCase="#{mainPageController.searchCase}"
            />
        </ui:define>
    </ui:composition>
</h:body> 
```

component_customer.xhtml

```
<composite:interface>
    <composite:attribute name="customerId" type="java.lang.Long"/>
    <composite:attribute name="searchCustomer" method-signature="void searchCustomer()"/>
</composite:interface>

<composite:implementation>
    <h:form>
        <h:inputText id="id" value="#{cc.attrs.customerId}"/>
        <h:commandButton value="Search" action="#{cc.attrs.searchCustomer}"/>
    </h:form>
</composite:implementation> 
```

组件案例.xhtml

```
<composite:interface>
    <composite:attribute name="caseId" type="java.lang.Long"/>
    <composite:attribute name="searchCase" method-signature="void searchCase()"/>
</composite:interface>

<composite:implementation>
    <h:form>
        <h:inputText id="id" value="#{cc.attrs.caseId}"/>
        <h:commandButton value="Search" action="#{cc.attrs.searchCase}"/>
    </h:form>
</composite:implementation> 
```

MainPageController.java

```
@ManagedBean
@ViewScoped
public class MainPageController {

@EJB
private CaseLogic caseLogic;
@EJB
private CustomerLogic customerLogic;

private Customer customer = new Customer();
private Case case = new Case();

// getter & setters

public void searchCustomer() {
}

public void searchCase() {
} 
```

1）有一些通用的“JSF”解决方案吗？

2）或者我应该尝试以某种方式在java代码中实现设计模式观察者？但是存在许多观察者（Customer，Case，...）的许多主题（MainPageController，SecondPageController，...）的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T10:45:36.813

用面板 abs 包裹组件案例给它一个 ID。将该 ID 作为更新属性输入搜索。在命令按钮中使用该属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T19:59:17.883

我只能通过实现观察者设计模式来实现更新复合组件（不同的是，主题负责注册其观察者）：

主题

```
public abstract class Subject {
    private final List<Observer> observerList = new ArrayList<>();

    public void registerObserver(final Observer observer) {
        observer.setSubject(this);
        observerList.add(observer);
    }

    public List<Observer> getObserverList() {
        return observerList;
    }

    public abstract void notifyObservers(final Observer observer);
} 
```

具体主题

```
@ManagedBean
@ViewScoped
public class MainPageController extends Subject {
    @ManagedProperty(value = "#{caseComponent}")
    private CaseComponent caseComponent;
    @ManagedProperty(value = "#{customerComponent}")
    private CustomerComponent customerComponent;
    private final String customerComponentId = "MainPageCustomer";
    private final String caseComponentId = "MainPageCase";

    @Override
    public void notifyObservers(final Observer changed) {
        for (Observer observer : getObserverList()) {
            observer.update(changed);
        }
    }

    // is invoked by JSF framework thanks to @ManagedProperty injection
    public void setCaseComponent(CaseComponent caseComponent) {
        this.caseComponent = caseComponent;
        registerObserver(this.caseComponent);
    }

    // is invoked by JSF framework thanks to @ManagedProperty injection
    public void setCustomerComponent(CustomerComponent customerComponent) {
        this.customerComponent = customerComponent;
        registerObserver(this.customerComponent);
    }

    public String getCustomerComponentId() {
        return customerComponentId;
    }

    public String getCustomerComponentId() {
        return customerComponentId;
    }
} 
```

观察者

```
public interface Observer {
    public abstract void setSubject(Subject subject);
    public abstract void update(Observer changed);
} 
```

具体观察者（CustomerComponent）

```
@ManagedBean
@ViewScoped
public class CustomerComponent implements Observer {

    @EJB
    private CustomerLogic logic;
    private Subject subject;
    // backing bean property
    private Customer customer = new Customer();

    @Override
    public void setSubject(final Subject subject) {
        this.subject = subject;
    }

    @Override
    public void update(final Observer changed) {
        if (changed instanceof CustomerComponent) {
            // do nothing, in this case the customer was updated yet
            // in public void searchCustomer() method
        } else if (changed instanceof DeliverySiteComponent) {
            DeliverySiteComponent deliverySiteComponent = (DeliverySiteComponent) changed;
            searchCustomer(deliverySiteComponent.getDeliverySite());
        }
   }

    public Customer getCustomer() {
        return customer;
    }

    public void setCustomer(final Customer customer) {
        this.customer = customer;
    }

    public void searchCustomer() {
        customer = logic.find(customer);
        if(customer != null && customer.getId() != null) {
            subject.notifyObservers(this);
        }
    }

    private void searchCustomer(final DeliverySite deliverySite) {
        customer = logic.find(deliverySite);
    }
} 
```

具体观察者（CaseComponent）

```
@ManagedBean
@ViewScoped
public class CaseComponent implements Observer {
    ...
} 
```

main_page.xhtml（这里设置了id来强制JSF框架创建MainPageController的实例）

```
<h:body>
    <ui:composition template="/WEB-INF/template/layout.xhtml">
        <ui:define name="content">
            <custom:component_customer
                id="#{mainPageController.customerComponentId}"
                customerId="#{customerComponent.customer.id}"
                searchCustomer="#{customerComponent.searchCustomer}"
            />
            <custom:component_case
                id="#{mainPageController.caseComponentId}"
                caseaseId="#{caseComponent.case.caseId}"
                searchCase="#{customerComponent.searchCase}"
            />
        </ui:define>
    </ui:composition>
</h:body> 
```

所以，现在我让每个复合组件都只与它的托管 bean 连接。

# java - Java抽象类型类编译时检查

> ID：10204650
> 
> 赞同：0
> 
> 时间：2012-04-18T07:13:49.893
> 
> 标签：java, class, time, compilation, abstract

是否有可能在编译时检查 classType 是否指向抽象类型？可以进行运行时检查：

```
void foo(Class<? extends SubType> classType) {
    Modifier.isAbstract(classType.getModifiers()); 
}

foo(AbstractType.class);    // this should pass
foo(NotAbstractType.class); // this should fail 
```

如果在编译时也可以这样做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T07:27:59.340

您可以编写自己的 @MustBeAbstract 注释，然后编写一个注释处理器，强制任何具有该注释的类都是抽象的。

请参阅有关注释处理的这个问题：[Java 中的注释处理是什么？](https://stackoverflow.com/questions/2146104/what-is-annotation-processing-in-java)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T07:25:08.843

据我所知，没有自动解决方案。

但是，如果您事先知道传递给方法 foo 的类列表，则可以实现手动解决方案。IE

```
private ArrayList<Class> abstractTypes = new ArrayList<>();

void foo(Class<? extends SubType> classType) {
    boolean isAbstract = false;
    for(Class c: abstractTypes)
       if((classType.getName()).equals(c.getName()){
          isAbstract = true;
          break;
       }

    //Do something else...   
} 
```

# hadoop - 在分布式 Hadoop 上设置 HBase 时出错，ZooKeeperServer 未运行

> ID：10204652
> 
> 赞同：1
> 
> 时间：2012-04-18T07:13:54.177
> 
> 标签：hadoop, hbase, apache-zookeeper

我正在尝试在 Hadoop 上设置 HBase，并且一直在关注[Michael G. Noll](http://www.michael-noll.com/tutorials/running-hadoop-on-ubuntu-linux-multi-node-cluster/)和[这里](http://openwires.blogspot.com/p/hbase-multiple-node-setup-guide.html)的各种优秀教程。基本上一切都很好，我的 Hdfs 和 MapRed 在 Web 界面上运行良好，它显示我有 2 个节点（我的 NameNode 既是 NameNode 又是 DataNode，但这只是为了测试目的）。

当我安装 HBase 时，我遇到了问题，我得到了很多不同的错误。我最新的一个在我的从节点的日志文件中

```
INFO org.apache.zookeeper.server.NIOServerCnxn: Closed socket connection for client /10.2.xx.xx:43089 (no session established for client)
INFO org.apache.zookeeper.server.NIOServerCnxn: Exception causing close of session 0x0 due to java.io.IOException: ZooKeeperServer not running 
```

但是当我输入

```
$ zkServer.sh status 
```

它说显示了两台机器正在运行的模式！任何人都知道这是什么问题。或者有没有人知道我可以遵循的另一个指南/教程来设置它？我已经尝试按照 HBase 文档在分布式 HDFS 上设置 HBase，但它也不起作用。

感谢您提供的任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T10:20:46.740

是否在 Qorum 中配置了两个 zookeepers 服务器？如果是这样，他们是否设法相互连接并投票决定谁是领导者（这应该都在两台服务器的日志中）。

Zookeeper 可能正在运行，但如果它们无法相互通信（例如防火墙规则或错过配置），那么 Zookeeper 将不会接受即将到来的客户端连接

# regex - Reg Ex 用于偶数个 0 和 1

> ID：10204653
> 
> 赞同：7
> 
> 时间：2012-04-18T07:13:54.573
> 
> 标签：regex

我正在尝试创建一个正则表达式来确定字符串（任何长度）是否与正则表达式模式匹配，使得字符串中 0 的数量是偶数，而字符串中 1 的数量是偶数。谁能帮我确定一个正则表达式语句，我可以尝试用它来检查这个模式的字符串吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-18T07:39:51.703

**所以完全重新制定了我的答案以反映所有的变化：**

此正则表达式将匹配所有只有零和一且数量相等的字符串

```
^(?=1*(?:01*01*)*$)(?=0*(?:10*10*)*$).*$ 
```

[在 Regexr 上](http://regexr.com?30m98)查看

我在这里使用[积极的前瞻性断言](http://www.regular-expressions.info/lookaround.html)。前瞻断言的最大优点是，它检查完整的字符串，但不匹配它，所以两个前瞻都从一开始就检查字符串，但是对于不同的断言。

1.  `(?=1*(?:01*01*)*$)`确实检查等量的 0（包括 0）

2.  `(?=0*(?:10*10*)*$)`确实检查等量的 1（包括 0）

3.  `.*`然后确实匹配字符串

这些前瞻检查：

```
(?=
    1*    # match 0 or more 1
    (?:   # open a non capturing group
        0     # match one 0
        1*    # match 0 or more 1
        0     # match one 0
        1*    # match 0 or more 1
    )
    *     # repeat this pattern at least once
    $     # till the end of the string
) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-26T17:26:53.980

所以，我想出了一个解决问题的办法：

```
(11+00+(10+01)(11+00)\*(10+01))\* 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-18T07:40:39.333

对于偶数组 0，您可以使用以下正则表达式来确保 0 的数量是偶数。

```
^(1*01*01*)*$ 
```

但是，我认为问题是既有偶数个 0，也有偶数个 1。由于可以为该问题构造一个非确定性有限自动机 (NFA)，因此解决方案是正则的，并且可以使用正则表达式表示。NFA 通过下面的机器表示，S1 是启动/退出状态。

```
S1 ---1----->S2
|^ <--1----- |^
||           ||
00           00
||           ||
v|           v|
S3----1----->S4
  <---1------ 
```

从那里开始，有一种方法可以将 NFA 转换为正则表达式，但距离我的计算课程已经有一段时间了。下面有一些注释似乎有助于解释将 NFA 转换为正则表达式所需的步骤。

[http://www.cs.uiuc.edu/class/sp09/cs373/lectures/lect_08.pdf](http://www.cs.uiuc.edu/class/sp09/cs373/lectures/lect_08.pdf)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-18T07:18:20.633

### 重新更新

* * *

**试试这个：** *[查看这个演示：[http](http://regexr.com?30m7c) ://regexr.com?30m7c ]*

```
^(00|11|0011|0110|1100|1001)+$ 
```

~~**暗示 ：**~~

~~偶数可以被 2 整除，因此 - 在二进制中 - 它们总是以零结尾 ( `0`)~~

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-18T07:56:26.817

不是正则表达式（这很可能是不可能的，虽然我无法证明：通过泵引理的矛盾证明失败），但“正确”的解决方案是一起避免复杂和低效的正则表达式并使用一些东西像（在 Python 中）：

```
def even01(string):
     return string.count("1") % 2 == 0 and string.count("0") % 2 == 0 
```

或者如果字符串必须只包含`1`s 和`0`s：

```
import re
def even01(string):
     return not re.search("[^01]",string) and \
            string.count("1") % 2 == 0 and string.count("0") % 2 == 0 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-05-09T18:47:19.550

```
^(0((1(00)*1)*0|1(11|00)*01)|1((0(11)*0)*1|0(11|00)*10))*$ 
```

如果我没有忽略任何事情，这将匹配任何位字符串，其中 0 的数量为偶数且 1 的数量为偶数，仅使用基本的正则表达式运算符 ( `*`, `^`, `$`)。如果像这样写的话，看它是如何工作的会稍微容易一些：

```
^(0((1(00)*1)*0
   |1(11|00)*01)
 |1((0(11)*0)*1
   |0(11|00)*10))*$ 
```

下面的测试代码应该说明正确性——我们将模式匹配的结果与一个函数进行比较，该函数告诉我们一个字符串是否有偶数个 0 和 1。测试所有长度为 16 的位串。

```
import re

balanced = lambda s: s.count('0') % 2 == 0 and s.count('1') % 2 == 0

pat = re.compile('^(0((1(00)*1)*0|1(11|00)*01)|1((0(11)*0)*1|0(11|00)*10))*$')

size = 16
num = 2**size
for i in xrange(num):
    binstr = bin(i)[2:].zfill(size)
    b, m = balanced(binstr), bool(pat.match(binstr))
    if b != m:
        print "balanced('%s') = %d, pat.match('%s') = %d" % (binstr, b, binstr, m)
        break
    elif i != 0 and i % (num / 10) == 0:
        # Python 2's `/` operator performs integer division
        print "%d percent done..." % (100 * i / num + 1) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-08-31T23:01:19.233

如果你试图*在*同一个句子中解决（以 ^ 开头，以 $ 结尾），你就陷入了大麻烦。:-)

您可以确保您有偶数个 0（使用`^(1*01*01*)*$`，如@david-z 所述）**或者**您可以确保您有偶数个 1：

```
^(1*01*01*)*$|^(0*10*10*)*$ 
```

它也适用于长度较小的字符串，例如“00”或“101”，都是有效的字符串。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-07-23T14:15:22.647

我在业余时间也一直在研究前瞻和回顾，使用前瞻可以解决问题，同时考虑单个 1 和/或单个 0。所以，表达式也应该适用于 11,1111,111111,... 也适用于 00,0000,000000,....

```
^(((?=(?:1*01*01*)*$)(?=(?:0*10*10*)*$).*)|([1]{2})*|([0]{2})*)$ 
```

适用于所有情况。因此，如果字符串仅包含 1 或仅 0：

```
([1]{2})*|([0]{2})* 
```

如果它包含 0 和 1 的混合，则正向前瞻将处理该问题。

```
((?=(?:1*01*01*)*$)(?=(?:0*10*10*)*$).* 
```

将它们结合起来，它考虑了所有具有偶数个 0 和 1 的字符串。

# .net - powershell 或 net 发送带有身份验证的电子邮件

> ID：10204657
> 
> 赞同：2
> 
> 时间：2012-04-18T07:14:01.817
> 
> 标签：.net, email, powershell

我正在使用 powershell cmdlet

```
send-mailmessage `
                    -SmtpServer 192.168.170.56 `
                    -to "<dex@dex.com>" `
                    -from "SFRBsendingScr <ms@pri.com>" `
                    -subject "(test) PRIMFRB transfer $date" `
                    -body "$teloadmin" -BodyAsHtml `
                    -ErrorAction Stop 
```

用于发送电子邮件，但我们的 smtp 服务器 (LotusNotes) 需要身份验证才能从我们公司发送电子邮件。我可以添加身份验证，还是有其他方法可以做到这一点？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T10:55:39.757

正如我评论的那样，您可以添加`-credential`参数来`send-mailmessage` 喜欢`-credential (get-credential)`并使用有效的用户名和密码填充它

# android - 在android中实现服务的正确方法

> ID：10204658
> 
> 赞同：0
> 
> 时间：2012-04-18T07:14:11.920
> 
> 标签：android, android-service, aidl

在音乐播放器的上下文中，到目前为止，我已经看到服务以两种不同的方式实现。

在第一种方法`.aidl`中，创建一个文件并生成一个存根，并通过将其绑定到主活动来实现服务。

在第二种方法中，主要活动只是一个 UI，从 UI 启动播放器时，整个音乐播放活动总是在后台完成（此方法在 android 开发人员网站上使用）。

而且我注意到使用aidl 是一种非常流行的方法，即使android 开发者网站建议使用另一种方法。那么使用一种方法比另一种方法有什么优势吗？一种方法更胖还是更有效？还有其他更好的方法我还没有遇到过吗？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T08:09:31.707

AIDL 更多的是在进程之间进行通信，而服务是 android 运行进程而不会被杀死的方式。

AIDL（Andoid 接口定义语言） 这里已经有一个问题可以帮助您理解 AIDL [何时使用基于aidl 的服务？](https://stackoverflow.com/questions/3335214/when-to-use-an-aidl-based-service)

这是来自 Andoid 文档的服务 [http://developer.android.com/reference/android/app/Service.html](http://developer.android.com/reference/android/app/Service.html)

这是关于 AIDL [http://developer.android.com/guide/developing/tools/aidl.html的文档](http://developer.android.com/guide/developing/tools/aidl.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T07:44:05.620

如果您尝试播放应该在 UI 之外的单独线程上运行的音乐，我会使用 Async 任务。

[http://developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)

查看受保护的方法部分，该部分将显示更新 UI 所需调用的所有函数。

干杯

# ios - 如何在情节提要上更改标签栏背景颜色和标签栏项目颜色

> ID：10204661
> 
> 赞同：3
> 
> 时间：2012-04-18T07:14:23.790
> 
> 标签：ios, storyboard, uitabbar, uitabbaritem

我是一个新的学习者。我用标签栏控制器创建了一个新的故事板。我想更改背景颜色、项目颜色和文本颜色。我搜索了一遍，但我发现只有通过编码改变颜色。如果我使用故事板，自定义这些的必要步骤是什么。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-18T07:25:08.843

寻找这张图片，如果它可以帮助你

![在此处输入图像描述](../Images/cf925d99920f90175a5937cf8c68e38f.png)

我已将标签栏的颜色更改为“组表视图背景颜色”。还有其他选项可以帮助您编辑项目颜色和文本颜色。

不要忘记选择要更改属性的项目

# wordpress - 默认显示 WP Gallery

> ID：10204662
> 
> 赞同：0
> 
> 时间：2012-04-18T07:14:23.843
> 
> 标签：wordpress, gallery

我正在创建用于创建图库帖子的自定义帖子类型。我拿出的其中一件事是“编辑器”部分，因为我有自己的上传器。由于 HTML 编辑器已经消失（现在不能使用简码），是否有一个 wp 函数相当于`[gallery]`简码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T08:13:26.403

知道了。这是其他想要做同样事情的人的代码。把这个宝贝扔到你的主题模板文件里试试看。

```
$images = get_children(array('post_parent'=>$post->ID, 'post_type'=>'attachment', 'post_mime_type' => 'image'));
foreach($images as $image){
    echo wp_get_attachment_link($image->ID);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T09:55:17.073

为此，您可以使用 wordpress 函数 make

```
gallery_shortcode(array('orderby'=>ID)); 
```

设置好帖子后一定要调用它

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T15:46:01.540

根据[Codex 关于`[gallery]`直接在模板文件中输出短代码内容](http://codex.wordpress.org/Gallery_Shortcode)的建议，我将使用[`do_shortcode()`](http://codex.wordpress.org/Function_Reference/do_shortcode)：

```
<?php do_shortcode( '[gallery]' ); ?> 
```

你甚至可以传递接受的参数：

```
<?php do_shortcode( '[gallery columns="4" size="medium"]' ); ?> 
```

# ruby-on-rails - windows下如何安装zipruby

> ID：10204665
> 
> 赞同：0
> 
> 时间：2012-04-18T07:14:46.230
> 
> 标签：ruby-on-rails, rubygems, zip, installation

我一直在尝试将 zipruby 安装在我的windoz 盒子上，但几乎没有什么快乐。我正面临着这个消息。

```
Installing zipruby (0.3.6) with native extensions C:/RailsInstaller/Ruby1.9.2/li
b/ruby/site_ruby/1.9.1/rubygems/installer.rb:533:in `rescue in block in build_ex
tensions': ERROR: Failed to build gem native extension. (Gem::Installer::Extensi
onBuildError) 
```

我通常会用谷歌搜索东西，在这种情况下有，但我看不到答案。关于红宝石的本机扩展主题似乎没有什么真正的话题。至少不是我发现的，尽管我很想错。

有人在 Windows 盒子上安装了这个 gem 吗？如果您遇到问题，您是如何解决/解决问题的？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T23:34:52.127

*<-- 我正在编辑这个答案。如果我最终破解它，我会有一个任何人都可以找到的日志......包括我-->*

* * *

我尝试过的步骤（到目前为止）不起作用

1.  下载 zlib-1.2.3-src.exe 并运行安装。
2.  安装后（我什么都没做）运行 gem install。
    w:\ruby> gem install zipruby -- --with-opt-dir="C:\Program Files\GnuWin32\src\zlib\1.2.3\zlib-1.2.3"

以上没有用，我似乎没有更接近

* * *

似乎通往某个地方的步骤..**但最终让我失望了**

1.  安装了两个文件。[http://rubyforge.org/frs/download.php/75848/rubyinstaller-1.9.3-p125.exe](http://rubyforge.org/frs/download.php/75848/rubyinstaller-1.9.3-p125.exe)和[https://github.com/downloads/oneclick/rubyinstaller/DevKit-tdm-32-4.5.2- 20111229-1559-sfx.exe](https://github.com/downloads/oneclick/rubyinstaller/DevKit-tdm-32-4.5.2-20111229-1559-sfx.exe) 我仍在努力完成安装，但我会保持这个答案流畅。

我现在在哪里.. 就在我开始的地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T14:19:42.787

[从 RubyForge 可以下载适用于 Windows](http://rubyforge.org/frs/?group_id=6124)的gem 文件，它们适用于我在 Windows 7 上安装的 Ruby 1.9.2

```
gem install path.to\downloaded.gemfile 
```

# javafx - 从路径值创建路径？

> ID：10204666
> 
> 赞同：0
> 
> 时间：2012-04-18T07:14:52.327
> 
> 标签：javafx, javafx-2

我可以使用它的值创建一个路径吗？

```
 Path p=new Path();
 p.getElements().add(new MoveTo(mouse.getX(), mouse.getY()));
 System.out.Print(p); 
```

这将打印

> 路径@29f12030

我可以再次将其转换为路径吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T08:24:29.687

我认为您应该在应用架构的上下文中详细说明通过网络发送数据的目的。给出一些关于它的基本细节。据我了解，您希望`Path`通过网络发送一个实例并能够在另一端处理它。如果是这样，
请查看[序列化 API](http://java.sun.com/developer/technicalArticles/Programming/serialization/)。阅读有关它的帖子[“如何使用 java 通过网络传输对象”](https://stackoverflow.com/q/3124702/682495)。扩展`Path`或将其包装到另一个类中，然后实现 Serializable。
- 或者，请参阅[用于 XML 绑定的 Java 体系结构 (JAXB)](http://jaxb.java.net/)。基本上通过使用它，您可以将对象转换/编组为 XML 字符串并通过网络传输，然后对其进行解组。这是[你好世界的例子](http://www.mkyong.com/java/jaxb-hello-world-example/)。
- 或者，实现您自己的编码/解码机制来传输`Path`对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T18:10:19.877

你已经创建了一个路径，它仍然是一个路径，你不需要转换它。

当您调用时，`System.out.print(p)`您调用对象上的默认`toString`函数`p`，该函数会打印对您的 Path 的内部 Java 引用（例如`Path@29f12030`）。如果您`toString`使用自己的实现覆盖默认方法，如下面的示例所示，您的打印语句将显示路径的值。

```
public class PrintPath extends Application {
  public static void main(String[] args) throws Exception { launch(args); }
  @Override public void start(final Stage stage) throws Exception {
    Path p = new PrintedPath();
    p.getElements().add(new MoveTo(100, 150));
    System.out.println(p);
    stage.setScene(new Scene(new StackPane()));
    stage.show();
  } 

  class PrintedPath extends Path {
    @Override public String toString() {
      StringBuilder b = new StringBuilder();
      for (PathElement e: getElements()) {
        if (e instanceof MoveTo) {
          MoveTo m = (MoveTo) e;
          b.append("M").append(m.getX()).append(" ").append(m.getY()).append(" ");
        }
        // logic to display other path element types could be added here . . .
      }
      return "Path{ " + b.toString() + "}";
    }
  }
} 
```

# matlab - 添加向量的元素

> ID：10204671
> 
> 赞同：1
> 
> 时间：2012-04-18T07:15:19.620
> 
> 标签：matlab, vector

如何将向量中的元素添加到先前的元素中。例如：

```
data = [1,3,5,6,7,9];
newData = [1,4,9,15,22,31]; 
```

我如何从数据中获取新数据？我想保留第一个元素，然后将其添加到第二个，将这些组合添加到第三个，依此类推。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T07:18:37.770

试试[cumsum](http://www.mathworks.ch/help/techdoc/ref/cumsum.html)函数：

```
newData = cumsum(data) 
```

# iphone - 我为 iPhone 应用程序使用哪个编译器

> ID：10204679
> 
> 赞同：0
> 
> 时间：2012-04-18T07:15:42.787
> 
> 标签：iphone, compiler-construction, app-store

我对 iPhone 应用程序开发非常陌生。我还没有找到关于 Xcode 中编译器使用的好文章。我使用哪个编译器来编译应用程序以及 APP 商店将接受什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T15:48:09.963

构建应用程序的首选方法是使用 Apple 的 Xcode。旧版本的 Xcode 使用 gcc。当前版本的 Xcode 支持 llvm 或 llvm-gcc。Apple 目前似乎允许使用任何发出合法静态 ARM 代码的编译器，并且只调用 Apple 的公共 API（包括 Adob​​e Flash 套件中的一种此类工具）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T07:26:37.423

Xcode 使用 LLVM 编译器。不过，您不必担心要使用哪个编译器。只需安装 Xcode 并在其中开发您的应用程序。Xcode 会为您处理编译和其他构建步骤。

# asp.net - asp.net/C# 中的本地化国家/地区名称缺失国家/地区

> ID：10204685
> 
> 赞同：1
> 
> 时间：2012-04-18T07:16:01.150
> 
> 标签：asp.net

我正在使用以下代码来显示本地化的国家/地区名称（该国家/地区的语言名称），但大多数国家/地区都缺少，例如津巴布韦：

```
Dictionary<string, string> objDic = new Dictionary<string, string>();

                foreach (CultureInfo ObjCultureInfo in CultureInfo.GetCultures(CultureTypes.SpecificCultures))
                {
                    RegionInfo objRegionInfo = new RegionInfo(ObjCultureInfo.Name);
                    if (!objDic.ContainsValue(objRegionInfo.TwoLetterISORegionName.ToLower()))
                    {
                        objDic.Add(objRegionInfo.NativeName, objRegionInfo.TwoLetterISORegionName.ToLower());
                    }
                }

                var obj = objDic.OrderBy(p => p.Key);
                foreach (KeyValuePair<string, string> val in obj)
                {
                    cmbCountry.Items.Add(new ListItem(val.Key, val.Value.ToUpper()));
                } 
```

它显示了 245 个国家中的 127 个，请建议我解决这个问题。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T07:23:54.553

我认为您需要更改此行：

```
CultureInfo.GetCultures(CultureTypes.SpecificCultures) 
```

对此：

```
CultureInfo.GetCultures(CultureTypes.AllCultures) 
```

这将适用于所有文化。如果您看到 msdn：

> CultureTypes.AllCultures ，它返回所有中性和特定文化、安装在 Windows 操作系统中的文化以及用户创建的自定义文化。
> 
> CultureTypes.SpecificCultures ，返回所有特定的文化。

参考[这里](http://msdn.microsoft.com/en-us/library/system.globalization.cultureinfo.getcultures.aspx)

# iphone - 启动远程程序时出错：没有这样的文件或目录

> ID：10204686
> 
> 赞同：13
> 
> 时间：2012-04-18T07:16:01.547
> 
> 标签：iphone, objective-c, xcode

任何人都对此有想法

`Error launching remote program: No such file or directory (/Users/muself/Library/Developer/Xcode/DerivedData/myproject-hlelojuljidnnagbdqzliazpdgmn/Build/Products/Debug-iphoneos/myproject.app/myproject).`

该项目在以前的 Xcode 版本中运行良好。我刚刚将 Xcode 更新到版本 4.3.2 (4E2002)，错误开始出现。

我在网上搜索过，并尝试了很多选项，例如

退出 Xcode，清除 Derived Data 文件夹，重新启动 Xcode。重命名项目，重置设备等我也在另一台机器上尝试过，但没有奏效，出现同样的问题。

但有一件事我还有其他一些项目，它们运行良好。

感谢您至少阅读本文。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-08-01T14:38:17.097

First try restarting Xcode. If it doesn't work, then try hard reset of your device. This happens to me when I change the bundle identifier of my app. **This solution,I found of the above problem its working fine for me.:)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T20:37:44.003

检查您的部署目标。我正在运行 Xcode 4.5，它给了我这条神秘的信息，而原因是我的 iPad 运行的是 5.1.1 版本，而我的应用程序的部署目标设置为 6.0。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T11:52:30.103

您是否尝试过“验证设置”（项目设置底部的按钮）？你在你的应用程序中使用了一些静态库吗？– ***Vov4yk***

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-02T12:43:19.847

我也遇到同样的问题。下面的解决方案对我有用。这真的很烦人。此错误发生在许多不同的情况下。有时重新启动 Xcode，可以解决问题。如果没有，请按照下列步骤操作：

1.  断开您的设备。

2.  从您的设备中删除该应用程序。

3.  退出xcode（不要只是简单地关闭窗口，退出它）

4.  删除派生数据文件夹（~/Library/Developer/Xcode/DerivedData/APPNAME -gbrvhlvwmpiobxdujegtghggrffp - 或类似的东西）

5.  现在启动 Xcode，连接设备并运行项目。它应该可以正常工作。

资料来源：[http ://dhilipsiva.com/2012/07/24/xcode-could-not-launch-app-no-such-file-or-directory-error.html](http://dhilipsiva.com/2012/07/24/xcode-could-not-launch-app-no-such-file-or-directory-error.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-24T08:57:55.683

当我将构建配置设置为临时设置时，我看到了这一点。在我把它放回调试后它工作得很好。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-03T20:32:28.050

设备的硬重置为我修复了它。即关闭电源并重新打开。退出 Xcode、断开连接、重新连接设备等都没有。

错误发生在我创建了一个具有重复的捆绑标识符的新项目到另一个项目之后。两个应用程序可以在设备上/在 Xcode 中共存，但这似乎确实导致了上述问题。

# c# - Html.EditorFor() 中的过滤器列表

> ID：10204696
> 
> 赞同：2
> 
> 时间：2012-04-18T07:16:52.077
> 
> 标签：c#, asp.net-mvc-3

我只是想知道在将其用于集合时是否有办法将过滤器应用于@Html.EditorFor()。

假设我有以下代码： **EditorTemplates/Foo**

```
@model Foo
@Html.EditorFor(f = f.FooDetails) 
```

**EditorTemplates/FooDetail**

```
@model FooDetail
@Html.LabelFor(f => f.Group)

@Html.LabelFor(f => f.Name)
@Html.Editorfor(f => f.Name) 
```

我的第一个想法是：

```
@Html.EditorFor(f = f.FooDetails.Where(x => x.Group == group) 
```

然而，在尝试过之后，我被提醒生活并不总是简单的，它返回了一个 InvalidOperationException，因为“模板只能用于字段访问、属性访问、单维数组索引或单参数自定义索引器表达式。”

关于如何正确解决手头问题的任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-05T14:01:16.337

`Html.EditorFor`有一个[重载](http://msdn.microsoft.com/en-us/library/ff406462%28v=vs.108%29.aspx)，允许您指定其他视图数据。您可以通过此参数传递条件。

所以你的 EditorFor 变成了这样：

```
@Html.EditorFor(f = f.FooDetails, new { Group = group}) 
```

你的编辑器模板*变成这样：

```
@model FooDetail

@if ((string)ViewData["Group"] == Model.Group) {
    @Html.LabelFor(f => f.Group)
    @Html.LabelFor(f => f.Name)
    @Html.Editorfor(f => f.Name)
} 
```

*这假设组是一个字符串，根据需要更改类型

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T14:02:01.507

解决它的一种方法是在`Html.EditorFor`.

而不是使用`@Html.EditorFor(f = f.FooDetails.Where(x => x.Group == group))`，你可以说：

```
 var filteredFooDetails = Model.FooDetails.Where(x => x.Group == group));
    @Html.EditorFor(f => filteredFooDetails); 
```

*编辑*

正如评论所提到的，这将破坏模型绑定。为了能够从另一端获取值，您的控制器方法必须同时接受模型和`filteredFooDetails`. 在模型对象上使用该属性可能会导致其他开发人员感到困惑。他们怎么知道`FooDetails`这个特定`model`对象可能只是整体的一个子集？

另一方面，如果这些都不重要，您也可以只使用变量名`fooDetails`而不是`filteredFooDetails`模型绑定来获取它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-22T15:58:42.230

我在尝试解决类似问题时查看了这个问题。我需要创建一个按类别排序的网格，同时按类别过滤主模型集合以显示在每个类别标题下。我为整个视图模型创建了一个编辑器模板，并从视图中调用 Html.DisplayForModel()。

页面视图模型

```
namespace GoodHousekeeping.MVC.Models
{
  public class ViewIngredientPageModel
  {
    public IEnumerable<ViewIngredientModel> ViewIngredientModels { get; set; }
    public IEnumerable<ViewIngredientCategoryModel> 
                          ViewIngredientCategoryModels { get; set; }
  }
} 
```

查看模型

```
namespace GoodHousekeeping.MVC.Models
{
  public class ViewIngredientModel
  {
    public int? IngredientId { get; set; }

    [DisplayName("Ingredient Name")]
    public string Name { get; set; }

    public int IngredientCategoryId { get; set; }

    #region navigation

    public ViewIngredientCategoryModel IngredientCategory { get; set; }

    #endregion
  }
} 
```

主视图

```
@model GoodHousekeeping.MVC.Models.ViewIngredientPageModel

@Html.DisplayForModel() 
```

EditorTemplate - 这是我们处理整个视图模型并进行过滤的地方。文件名是 shared/editortemplates 文件夹中的 ViewIngredientPageModel.cshtml。我正在为每个项目调用标准编辑器模板，以显示在类别标题下。

```
@model GoodHousekeeping.MVC.Models.ViewIngredientPageModel
@foreach (var category in Model.ViewIngredientCategoryModels)
{
    <p>@category.IngredientCategoryName</p>
    var category1 = category;
    var viewIngredientModels = (from i in Model.ViewIngredientModels
                 where i.IngredientCategoryId == category1.IngredientCategoryId
                 select i);

    @Html.DisplayFor(m => viewIngredientModels)
} 
```

# android - 列表视图的无休止滚动

> ID：10204698
> 
> 赞同：0
> 
> 时间：2012-04-18T07:16:58.363
> 
> 标签：android, json, listview

我有一个使用自定义适配器的列表视图，现在我希望它显示前五个条目并在我向下滚动时加载其他条目，最简单的方法是什么？

如果我的列表代码是

```
public class Second extends Activity  {

static final String Li_nk="LinkName:";
static final String Image_name="ImageName:";
//ListView list;
public final static String AUTH = "authentication";
static final String KEY_THUMB_URL = "thumb_image";      //Uri.decode("http://zeesms.info/android_app_images/Koala.jpg");
//JSONObject j2;
String wrd;
//ArrayList<HashMap<String,String>> mylist;
@Override
public void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    Intent i2=getIntent();
     wrd=i2.getStringExtra("entrd");
    Log.v("keyis",wrd);

    final Handler handler = new Handler();
    Runnable runable = new Runnable() {

        @Override
        public void run() {

            //call the function
            LoadData();
            //also call the same runnable
            handler.postDelayed(this, 40000);
        }
    };
    handler.postDelayed(runable, 10);

}public void LoadData(){

     JSONObject j2=JSONfunctions.getJSONfromURL("/webservice_search.php?keyword="+wrd+"&format=json");
     ArrayList<HashMap<String,String>> mylist = new  ArrayList<HashMap<String,String>>();

     try{JSONArray jray=j2.getJSONArray("listings");
        for(int i=0;i<jray.length();i++){
            Log.v("state","json data being read");
            JSONObject j3= jray.getJSONObject(i);
            String first=j3.getString("listing");
            Log.v("sublist", first);
            JSONObject j4=j3.getJSONObject("listing");
            String sec=j4.getString("links");

            int maxLength = (sec.length() < 30)?sec.length():27;
            sec.substring(0, maxLength);
            String cutsec=sec.substring(0,maxLength);
            Log.v("links are",cutsec);
            String img=j4.getString("image_name");
            Log.v("image name is ",img);
            //Uri dimg=Uri.parse("http://zeesms.info/android_app_images/Koala.jpg");
            HashMap<String,String> map=new HashMap<String,String>();

            map.put("Id",String.valueOf(i));
            map.put(Li_nk,cutsec);
            map.put(Image_name,j4.getString("image_name"));

            map.put(KEY_THUMB_URL,"http://zeesms.info/android_app_images/"+img);

             mylist.add(map);

        }

        }
        catch(JSONException e){

            Log.e("loG_tag","Error parsing"+e.toString());
        }
     LazyAdapter adapter = new LazyAdapter(this,mylist);
     adapter.notifyDataSetChanged();
    // list.setSelection(positionToMove);

        ListView list=(ListView)findViewById(R.id.lv1);
         list.setEmptyView(findViewById(R.id.empty));
         list.setAdapter(adapter);

        // list.setStackFromBottom(true);
            list.setItemsCanFocus(false);
           // list.smoothScrollToPosition(3,5);
            list.setOnItemClickListener(new AdapterView.OnItemClickListener(){

                @Override
                public void onItemClick(AdapterView<?> parent, View view,
                        int position, long id) {
                    //Toast.makeText(getApplicationContext(),"Click ListItem Number " + position, Toast.LENGTH_LONG).show();
                    Intent myIntent = new Intent(Intent.ACTION_VIEW, Uri.parse("http://www.riffre.com/"));
                    startActivity(myIntent);
                }

            });
           list.setOnScrollListener(new OnScrollListener(){

            @Override
            public void onScroll(AbsListView view, int firstVisibleItem,
                    int visibleItemCount, int totalItemCount) {
                // TODO Auto-generated method stub

            }

            @Override
            public void onScrollStateChanged(AbsListView view,
                    int scrollState) {
                // TODO Auto-generated method stub

            }

           });
} 
```

并且扩展 baseadapter 的适配器类的代码是

```
public class LazyAdapter extends BaseAdapter {
private Activity activity;
private ArrayList<HashMap<String, String>> data;
private static LayoutInflater inflater=null;
public ImageLoader imageLoader; 

public LazyAdapter(Activity a, ArrayList<HashMap<String, String>> d) {
    activity = a;
    data=d;
    Collections.reverse(d);
    inflater = (LayoutInflater)activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    imageLoader=new ImageLoader(activity.getApplicationContext());
}

@Override
public int getCount() {
    // TODO Auto-generated method stub
    return data.size();
}

@Override
public Object getItem(int position) {
    // TODO Auto-generated method stub
    return position;
}

@Override
public long getItemId(int position) {
    // TODO Auto-generated method stub
    return position;
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {
    View vi=convertView;
    if(convertView==null)

        vi = inflater.inflate(R.layout.custom_row_view1, null);

    TextView title = (TextView)vi.findViewById(R.id.linkname); // merchnts name
    TextView artist = (TextView)vi.findViewById(R.id.imagename); // address
    //TextView duration = (TextView)vi.findViewById(R.id); // distance
   ImageView thumb_image=(ImageView)vi.findViewById(R.id.mClogo); // logo

    HashMap<String, String> jsn = new HashMap<String, String>();
    jsn = data.get(position);

    // Setting all values in listview
   title.setText(jsn.get(Second.Li_nk));
   artist.setText(jsn.get(Second.Image_name));
    //duration.setText(song.get(CustomizedListView.KEY_DURATION));
    imageLoader.DisplayImage(jsn.get(Second.KEY_THUMB_URL), thumb_image);
    return vi;
}

} 
```

我有一个不同的类来解析列表中的 json 数据。那么实现无限滚动的最简单方法是什么？

任何帮助将不胜感激...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T07:25:55.423

如果您从网络加载项目（因此预计会有时间延迟），请检查此库项目：[https ://github.com/chrisbanes/Android-PullToRefresh](https://github.com/chrisbanes/Android-PullToRefresh)

这是一个很棒的下拉刷新列表视图项目，但它也提供从底部下拉刷新的功能。因此，您可以使用该功能加载更多项目。但是此功能需要用户明确的拉动操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T05:14:05.333

通过将我的列表声明为全局变量找到了解决方案。无论如何感谢您的帮助。

# php - 教义查询不同的相关实体

> ID：10204700
> 
> 赞同：10
> 
> 时间：2012-04-18T07:17:01.210
> 
> 标签：php, doctrine-orm, dql

我可能忽略了一些非常简单的东西，只是盯着它看太多了，但我无法让这个 DQL 查询工作。我得到一个例外说明：

```
Cannot select entity through identification variables without choosing at least one root entity alias. 
```

这是我的查询。用户与组具有多对一的关系。请注意，这是一个单向关系！这对你来说可能没有意义，但它在我们的领域逻辑中是有意义的。

```
SELECT DISTINCT g
FROM Entity\User u
LEFT JOIN u.group g
WHERE u.active = :active 
```

你能告诉我我在这里想念什么吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-30T15:24:04.193

由于这是搜索错误消息*“无法通过...选择实体”*时的第一次 Google 匹配，因此尽管该主题是几个月前发布的，但我还是决定做出回应。

诀窍是使用 JOIN ... WITH ...（如 SQL 中的 JOIN ... ON ...）。

我收到了这段代码的消息：

```
SELECT ro, COUNT(ro)
FROM FH\MailerBundle\Entity\Recipient r
JOIN r.selectedOption ro
GROUP BY ro.id 
```

我通过这段代码解决了这个问题：

```
SELECT ro, COUNT(ro)
FROM FH\MailerBundle\Entity\RecipientOption AS ro
JOIN FH\MailerBundle\Entity\Recipient AS r WITH r.selectedOption = ro
GROUP BY ro.id 
```

我需要为这两个实体指定完整的命名空间和类。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-18T13:22:31.967

您需要从`root entity alias`.. 中选择，这意味着您不能*仅从*要加入的表中选择，就像在普通 sql 中一样。所以应该这样做：

```
SELECT DISTINCT g
FROM Entity\Group g
INNER JOIN g.user u
WHERE u.active = :active 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-04-19T05:49:00.003

我通过子选择解决了这个问题：

```
SELECT g
FROM Entity\Group
WHERE g.id IN (
    SELECT DISTINCT g2.id
    FROM Entity\User u
    LEFT JOIN u.group g2
    WHERE u.active = :active
) 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-05-16T14:30:01.363

我遇到了类似的问题，并通过多次`from`调用解决了它，如下所示：

```
$this->getDoctrine()->createQueryBuilder()
    ->from('ProjectMainBundle:Group', 'g')
    ->from('ProjectMainBundle:User', 'u')
    ->select('distinct(g)')
    ->where('u.group = g')
    ->andWhere('u.active = :active')
    ->.... 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-23T10:08:15.280

您可以使用 DQL 的新**WITH**关键字来执行此操作：

```
SELECT DISTINCT g
FROM Entity\User u
LEFT JOIN Entity\Group g
WITH u in g.users
WHERE u.active = :active 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-08-31T15:34:34.890

我用这个

```
$qb = $this->createQueryBuilder('o')
           ->select('DISTINCT IDENTITY(o.user)') 
```

# android - 如何离线读取 .OSM 文件并在地图上绘图

> ID：10204702
> 
> 赞同：2
> 
> 时间：2012-04-18T07:17:15.587
> 
> 标签：android, map, offline

我是 .OSM 文件的新手。我想从地图上的**.OSM**文件中绘制纬度和经度，但它应该是离线的。我不想下载地图图像，或者简而言之我不想使用**INTERNET**

作为 XML 格式的**.OSM**文件，因此我们可以轻松地从中获取纬度和经度，但主要是如何在离线模式下将其绘制在地图上。

我已经对此进行了搜索，我只是发现第一次将地图（访问区域）的图像存储到 sdcard 和其他时间只是从 sdcard 中获取数据并显示图像..

但我想**完全** *离线*

谢谢。

# floating-point - MIPS中浮点数的乘法

> ID：10204706
> 
> 赞同：0
> 
> 时间：2012-04-18T07:17:40.820
> 
> 标签：floating-point, mips, multiplication

如何将 mips 中的两个浮点数相乘？我写了以下代码：

```
mul.s $f0,$f1,$f0

mflo $f0 
```

但它在第二个语句中给出了错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T11:45:43.617

`$f0`已经包含结果；不需要第二个语句。

# asp.net - Microsoft OCS 是否可以嵌入到 asp.net 网页中。需要多长时间？

> ID：10204711
> 
> 赞同：0
> 
> 时间：2012-04-18T07:18:03.730
> 
> 标签：asp.net, ocs

有人告诉我，Microsoft OCS 有点像 Windows Messenger。

是否可以通过插入和配置一些标准代码将其添加到网页中，这样我们最终会得到如下内容：

![在此处输入图像描述](../Images/f78b9d71a1e0d79f16376c6b3f07d727.png)

我知道有一个 OCS API，但我不想花几天时间从这里拼凑一个 OCS 应用程序。

我希望有一个组件可以让我将整个应用程序粘贴在网页上并将其配置为正确运行。我认为如果可能的话，这将花费不到 2 天的时间。有人可以建议这是否适合有经验的开发人员吗？

我了解该网页需要位于带有 Active Directory 的 Intranet 中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T14:07:27.107

有点是和否的答案，这......没有简单的方法将整个客户端嵌入网页中，但您可以嵌入重要的东西 - 联系人列表以及他们的存在，以及点击通话功能。这种方法依赖于安装了 Communicator、Office 和 IE 的最终用户。

[在此处](https://stackoverflow.com/questions/3984514/integrate-microsoft-office-communicator-2007-in-asp-net-page/4015576#4015576)查看我对 NameCtrl 的回答。如果您显示多个联系人，则涉及一些 javascript 和状态跟踪，因此 2 天感觉还不错。

值得记住的是，如果网页本身确定要显示哪个联系人列表，这将起作用。如果需要从用户的 Communicator 中提取联系人列表，则网页不支持此操作（出于安全原因，Communicator API 的某些部分被标记为 NotScriptable）。您需要使用[Office Communicator 自动化 API](http://msdn.microsoft.com/en-us/library/bb758805%28office.12%29.aspx)，并围绕它创建一个 .net COM 互操作包装器。我在[这里](https://stackoverflow.com/questions/4325808/mygroups-not-implemented-in-communicator-uiautomation/4327134#4327134)详细介绍了一个解决方法（这个例子讨论了 Silverlight，但它*应该*与 javascript 相同）。我会在原来的 2 之上再给这个几天。

还值得牢记的是，这种方法适用于 OCS，并且在客户升级到 Lync Server 2010 时将继续有效。如果他们已经在 Lync Server 2010 上，那么更简单的方法是使用[Silverlight 控件](http://msdn.microsoft.com/en-us/library/hh378617.aspx)。这种方法可能只有一天。

# c# - 对于大量客户端和大量数据，WCF 怎么样？

> ID：10204715
> 
> 赞同：4
> 
> 时间：2012-04-18T07:18:08.073
> 
> 标签：c#, wcf, performance

有没有人统计过使用 WCF 和 20000 个客户端？

只是不知道加载20000+客户端的性能，谁能给我一个真实的数据？

而且，对于每个客户端，我们都会传输几Kb到100MB的数据，WCF是否适合以良好的性能完成呢？

此外，是否有任何消息平台足以让我们以低成本使用？

只需要纯粹的.net 平台。

有人对此有一些见解吗？

非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T07:36:51.337

您可以使用[WCF Load Test 自行检查](http://wcfloadtest.codeplex.com/)。

> 此工具采用 WCF 跟踪文件和 WCF 客户端代理或 WCF 接口协定，并生成 C# 单元测试，该测试重放在跟踪文件中找到的相同调用序列。然后可以使用单元测试对目标进行负载测试。

这是[使用 WCF Load Test 的一个非常好的演练](http://blogs.msdn.com/b/mcsuksoldev/archive/2010/12/03/generating-load-tests-for-wcf-services-with-the-wcf-load-test-tool.aspx)。这里的[答案](https://stackoverflow.com/questions/221973/load-testing-wcf-service-hosted-on-iis)也可能对您有所帮助。

# string - 使用多个加密字符串进行 XOR 解密

> ID：10204717
> 
> 赞同：0
> 
> 时间：2012-04-18T07:18:12.483
> 
> 标签：string, xor, encryption

问题是我有 11 个加密字符串，每个字符串大约 100 个字符。我不是在这里写字符串，因为我不想要完整的解决方案，我只需要我应该遵循的方式。

11 个字符串与一个密钥字符串进行异或运算。我不知道加密密钥，但我应该能够解密其中一个。我可以用 java 或 C 编写它。大写字母可能会提供一些关于空格的信息。（如果你用空格对小写进行异或，它将是大写，反之亦然。）

我应该遵循哪种方式？你有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T12:54:32.603

没有人回答我的问题，所以我在回答我自己的问题。这里：这使答案可读，您可以猜出密码的缺失部分。

```
public class ThisIsTheOne {
    public static void main(String[] args){     

        char [][] strings = {{0x31,0x5c,0x4e,0xea,0xa8,0xb5,0xf8,0xaa,0xf9,0x17,0x41,0x45,0xbf,0x43,0xe1,0x78,0x4b,0x8f,0xa0,0x0d,0xc7,0x1d,0x88,0x5a,0x80,0x4e,0x5e,0xe9,0xfa,0x40,0xb1,0x63,0x49,0xc1,0x46,0xfb,0x77,0x8c,0xdf,0x2d,0x3a,0xff,0x02,0x1d,0xff,0xf5,0xb4,0x03,0xb5,0x10,0xd0,0xd0,0x45,0x54,0x68,0xae,0xb9,0x86,0x22,0xb1,0x37,0xda,0xe8,0x57,0x55,0x3c,0xcd,0x88,0x83,0xa7,0xbc,0x37,0x52,0x0e,0x06,0xe5,0x15,0xd2,0x2c,0x95,0x4e,0xba,0x50,0x25,0xb8,0xcc,0x57,0xee,0x59,0x41,0x8c,0xe7,0xdc,0x6b,0xc4,0x15,0x56,0xbd,0xb3,0x6b,0xbc,0xa3,0xe8,0x77,0x43,0x01,0xfb,0xca,0xa3,0xb8,0x3b,0x22,0x08,0x09,0x56,0x09,0x87,0x81,0x5f,0x65,0x28,0x67,0x64,0x70,0x3d,0xe0,0xf3,0xd5,0x24,0x40,0x0a,0x19,0xb1,0x59,0x61,0x0b,0x11,0xef,0x3e},
                             {0x23,0x4c,0x02,0xec,0xbb,0xfb,0xaf,0xa3,0xed,0x18,0x51,0x0a,0xbd,0x11,0xfa,0x72,0x4f,0xcd,0xa2,0x01,0x8a,0x1a,0x83,0x42,0xcf,0x06,0x4b,0xbd,0xe5,0x48,0xb1,0x2b,0x07,0xdf,0x44,0xba,0x71,0x91,0xd9,0x60,0x6e,0xf4,0x08,0x1f,0xfd,0xe5,0xad,0x46,0xa5,0x06,0x9d,0x9f,0x7f,0x54,0x3b,0xed,0xb9,0xc8,0x61,0xbf,0x29,0xc7,0xe2,0x05,0x13,0x2e,0xda,0x93,0x82,0xb0,0xbc,0x2c,0x5c,0x4b,0x45,0xf9,0x19,0xcf,0x3a,0x9f,0x1c,0xb7,0x41,0x51,0xf6,0xd5,0x51,0xf4,0x48,0x0c,0x82,0xb2,0xcb,0x24,0xcc,0x5b,0x02,0x8a,0xa7,0x6e,0xb7,0xb4,0xab,0x24,0x17,0x1a,0xb3,0xcd,0xad,0xb8,0x35,0x6f},
                             {0x32,0x51,0x0b,0xa9,0xa7,0xb2,0xbb,0xa9,0xb8,0x00,0x5d,0x43,0xa3,0x04,0xb5,0x71,0x4c,0xc0,0xbb,0x0c,0x8a,0x34,0x88,0x4d,0xd9,0x13,0x04,0xb8,0xad,0x40,0xb6,0x2b,0x07,0xdf,0x44,0xba,0x6e,0x9d,0x8a,0x23,0x68,0xe5,0x1d,0x04,0xe0,0xe7,0xb2,0x07,0xb7,0x0b,0x9b,0x82,0x61,0x11,0x2b,0xac,0xb6,0xc8,0x66,0xa2,0x32,0xdf,0xe2,0x57,0x52,0x7d,0xc2,0x93,0x98,0xf5,0xf3,0x25,0x1a,0x0d,0x47,0xe5,0x03,0xc6,0x6e,0x93,0x5d,0xe8,0x12,0x30,0xb5,0x9b,0x7a,0xfb,0x5f,0x41,0xaf,0xa8,0xd6,0x61,0xcb},
                             {0x32,0x51,0x0b,0xa9,0xaa,0xb2,0xa8,0xa4,0xfd,0x06,0x41,0x4f,0xb5,0x17,0xb5,0x60,0x5c,0xc0,0xaa,0x0d,0xc9,0x1a,0x89,0x08,0xc2,0x06,0x4b,0xa8,0xad,0x5e,0xa0,0x6a,0x02,0x90,0x56,0xf4,0x7a,0x8a,0xd3,0x30,0x6e,0xf5,0x02,0x1e,0xaf,0xe1,0xac,0x01,0xa8,0x11,0x97,0x84,0x7a,0x5c,0x68,0xa1,0xb7,0x87,0x69,0xa3,0x7b,0xc8,0xf4,0x57,0x54,0x32,0xc1,0x98,0xcc,0xb4,0xef,0x63,0x59,0x02,0x56,0xe3,0x05,0xcd,0x3a,0x95,0x44,0xee,0x41,0x60,0xea,0xd4,0x5a,0xef,0x52,0x04,0x89,0xe7,0xda,0x7d,0x83,0x54,0x02,0xbc,0xa6,0x70,0xbd,0xa8,0xeb,0x77,0x52,0x00,0xb8,0xda,0xbb,0xba,0x24,0x6b,0x13,0x0f,0x04,0x0d,0x8e,0xc6,0x44,0x7e,0x2c,0x76,0x7f,0x3d,0x30,0xed,0x81,0xea,0x2e,0x4c,0x14,0x04,0xe1,0x31,0x5a,0x10,0x10,0xe7,0x22,0x9b,0xe6,0x63,0x6a,0xaa},
                             {0x3f,0x56,0x1b,0xa9,0xad,0xb4,0xb6,0xeb,0xec,0x54,0x42,0x4b,0xa3,0x17,0xb5,0x64,0x41,0x8f,0xac,0x0d,0xd3,0x5f,0x8c,0x08,0xd3,0x1a,0x1f,0xe9,0xe2,0x4f,0xe5,0x68,0x08,0xc2,0x13,0xf1,0x7c,0x81,0xd9,0x60,0x7c,0xee,0x02,0x1d,0xaf,0xe1,0xe0,0x01,0xb2,0x1a,0xde,0x87,0x7a,0x5e,0x68,0xbe,0xa8,0x8d,0x61,0xb9,0x3a,0xc5,0xee,0x0d,0x56,0x2e,0x8e,0x95,0x82,0xf5,0xef,0x37,0x5f,0x0a,0x4a,0xe2,0x0e,0xd8,0x6e,0x93,0x5d,0xe8,0x12,0x30,0xb5,0x9b,0x73,0xfb,0x43,0x02,0xcd,0x95,0xd7,0x70,0xc6,0x5b,0x40,0xaa,0xa0,0x65,0xf2,0xa5,0xe3,0x3a,0x5a,0x0b,0xb5,0xdc,0xab,0xa4,0x37,0x22,0x13,0x0f,0x04,0x2f,0x8e,0xc8,0x5b,0x7c,0x20,0x70},
                             {0x32,0x51,0x0b,0xfb,0xac,0xfb,0xb9,0xbe,0xfd,0x54,0x41,0x5d,0xa2,0x43,0xe1,0x69,0x5e,0xca,0xbd,0x58,0xc5,0x19,0xcd,0x4b,0xd2,0x06,0x1b,0xbd,0xe2,0x4e,0xb7,0x6a,0x19,0xd8,0x4a,0xba,0x34,0xd8,0xde,0x28,0x7b,0xe8,0x4d,0x07,0xe7,0xe9,0xa3,0x0e,0xe7,0x14,0x97,0x9c,0x7e,0x11,0x23,0xa8,0xbd,0x98,0x22,0xa3,0x3e,0xca,0xf5,0x12,0x47,0x2e,0x8e,0x8f,0x8d,0xb3,0xf9,0x63,0x5c,0x19,0x49,0xe6,0x40,0xc6,0x21,0x85,0x4e,0xba,0x0d,0x79,0xec,0xcf,0x52,0xff,0x11,0x12,0x84,0xb4,0xcc,0x61,0xd1,0x19,0x02,0xae,0xbc,0x66,0xf2,0xb2,0xe4,0x36,0x43,0x4e,0xac,0xc0,0xab,0xa9,0x38,0x22,0x0b,0x08,0x48,0x00,0xc2,0xca,0x4e,0x69,0x35,0x22,0x64,0x35,0x73,0xb2,0xc4,0xce,0x35,0x05,0x0b,0x0c,0xf7,0x74,0x20,0x1f,0x0f,0xe5,0x2a,0xc9,0xf2,0x6d,0x71,0xb6,0xcf,0x61,0xa7,0x11,0xcc,0x22,0x9f,0x77,0xac,0xe7,0xaa,0x88,0xa2,0xf1,0x99,0x83,0x12,0x2b,0x11,0xbe,0x87,0xa5,0x9c,0x35,0x5d,0x25,0xf8,0xe4},
                             {0x32,0x51,0x0b,0xfb,0xac,0xfb,0xb9,0xbe,0xfd,0x54,0x41,0x5d,0xa2,0x43,0xe1,0x69,0x5e,0xca,0xbd,0x58,0xc5,0x19,0xcd,0x4b,0xd9,0x0f,0x1f,0xa6,0xea,0x5b,0xa4,0x7b,0x01,0xc9,0x09,0xba,0x76,0x96,0xcf,0x60,0x6e,0xf4,0x0c,0x04,0xaf,0xe1,0xac,0x0a,0xa8,0x14,0x8d,0xd0,0x66,0x59,0x2d,0xed,0x9f,0x87,0x74,0xb5,0x29,0xc7,0xea,0x12,0x5d,0x29,0x8e,0x88,0x83,0xf5,0xe9,0x30,0x5f,0x4b,0x44,0xf9,0x15,0xcb,0x2b,0xd0,0x5a,0xf5,0x13,0x73,0xfd,0x9b,0x4a,0xf5,0x11,0x03,0x9f,0xa2,0xd9,0x6f,0x83,0x41,0x4a,0xaa,0xf2,0x61,0xbd,0xa2,0xe9,0x7b,0x17,0x0f,0xb5,0xcc,0xe2,0xa5,0x3e,0x67,0x5c,0x15,0x4c,0x0d,0x96,0x81,0x59,0x69,0x34,0x77,0x7e,0x22,0x75,0xb3,0x81,0xce,0x2e,0x40,0x58,0x2a,0xfe,0x67,0x65,0x0b,0x13,0xe7,0x22,0x87,0xff,0x22,0x70,0xab,0xcf,0x73,0xbb,0x02,0x89,0x32,0x83,0x6f,0xbd,0xec,0xfe,0xce,0xe0,0xa3,0xb8,0x94,0x47,0x3c,0x1b,0xbe,0xb6,0xb4,0x91,0x3a,0x53,0x6c,0xe4,0xf9,0xb1,0x3f,0x1e,0xff,0xf7,0x1e,0xa3,0x13,0xc8,0x66,0x1d,0xd9,0xa4,0xce},
                             {0x31,0x5c,0x4e,0xea,0xa8,0xb5,0xf8,0xbf,0xfd,0x11,0x15,0x5e,0xa5,0x06,0xb5,0x60,0x41,0xc6,0xa0,0x0c,0x8a,0x08,0x85,0x4d,0xd2,0x1a,0x4b,0xbd,0xe5,0x4c,0xe5,0x68,0x01,0xd9,0x43,0xba,0x70,0x8b,0x8a,0x35,0x74,0xf4,0x0c,0x00,0xff,0xf9,0xe0,0x0f,0xa1,0x43,0x9f,0xd0,0x65,0x43,0x27,0xa3,0xbf,0xc8,0x60,0xb9,0x2f,0x89,0xee,0x04,0x13,0x2e,0xcb,0x92,0x98,0xf5,0xfd,0x2d,0x5e,0x4b,0x45,0xe4,0x0e,0xcc,0x3b,0x9d,0x59,0xe9,0x41,0x7d,0xf7,0xc9,0x5b,0xba,0x41,0x0e,0x9a,0xa2,0xca,0x24,0xc5,0x47,0x4d,0xa2,0xf2,0x76,0xba,0xa3,0xac,0x32,0x59,0x18,0xb2,0xda,0xad,0xa4,0x3d,0x67,0x12,0x15,0x04,0x41,0xc2,0xe0,0x4f,0x65,0x65,0x51,0x7f,0x31,0x7d,0xa9,0xd3},
                             {0x27,0x19,0x46,0xf9,0xbb,0xb2,0xae,0xad,0xec,0x11,0x18,0x41,0xa8,0x1a,0xbc,0x30,0x0e,0xca,0xa0,0x1b,0xd8,0x06,0x9d,0x5c,0xc9,0x10,0x05,0xe9,0xfe,0x4a,0xad,0x6e,0x04,0xd5,0x13,0xe9,0x6d,0x99,0xde,0x25,0x69,0xbc,0x5e,0x50,0xee,0xec,0xa7,0x09,0xb5,0x0a,0x8a,0x98,0x7f,0x42,0x64,0xed,0xb6,0x89,0x6f,0xb5,0x37,0xd0,0xa7,0x16,0x13,0x2d,0xdc,0x93,0x8f,0xb0,0xf8,0x36,0x48,0x0e,0x06,0xed,0x0f,0xcd,0x6e,0x97,0x59,0xf4,0x04,0x62,0xf9,0xcf,0x57,0xf4,0x56,0x41,0x86,0xa2,0xc1,0x77,0x8f,0x15,0x43,0xef,0xa2,0x70,0xbd,0xa5,0xe9,0x33,0x42,0x1c,0xbe,0x88,0xa4,0xa5,0x22,0x22,0x19,0x0f,0x47,0x1e,0x9b,0xd1,0x5f,0x65,0x2b,0x65,0x3b,0x70,0x71,0xae,0xc5,0x9a,0x27,0x05,0x08,0x1f,0xfe,0x72,0x65,0x1d,0x08,0xf8,0x22,0xc9,0xed,0x6d,0x76,0xe4,0x8b,0x63,0xab,0x15,0xd0,0x20,0x85,0x73,0xa7,0xee,0xf0,0x27},
                             {0x46,0x6d,0x06,0xec,0xe9,0x98,0xb7,0xa2,0xfb,0x1d,0x46,0x4f,0xed,0x2c,0xed,0x76,0x41,0xdd,0xaa,0x3c,0xc3,0x1c,0x99,0x41,0xcf,0x11,0x0a,0xbb,0xf4,0x09,0xed,0x39,0x59,0x80,0x05,0xb3,0x39,0x9c,0xcf,0xaf,0xb6,0x1d,0x03,0x15,0xfc,0xa0,0xa3,0x14,0xbe,0x13,0x8a,0x9f,0x32,0x50,0x3b,0xed,0xac,0x80,0x67,0xf0,0x3a,0xdb,0xf3,0x57,0x5c,0x3b,0x8e,0xdc,0x9b,0xa7,0xf5,0x37,0x53,0x05,0x41,0xab,0x0f,0x9f,0x3c,0xd0,0x4f,0xf5,0x0d,0x66,0xf1,0xd5,0x59,0xba,0x52,0x0e,0x89,0xa2,0xcb,0x2a,0x83},
                             {0x32,0x51,0x0b,0xa9,0xba,0xbe,0xbb,0xbe,0xfd,0x00,0x15,0x47,0xa8,0x10,0xe6,0x71,0x49,0xca,0xee,0x11,0xd9,0x45,0xcd,0x7f,0xc8,0x1a,0x05,0xe9,0xf8,0x5a,0xac,0x65,0x0e,0x90,0x52,0xba,0x6a,0x8c,0xd8,0x25,0x7b,0xf1,0x4d,0x13,0xe6,0xf0,0xa8,0x03,0xb5,0x4f,0xde,0x9e,0x77,0x47,0x2d,0xbf,0xf8,0x9d,0x71,0xb5,0x7b,0xdd,0xef,0x12,0x13,0x36,0xcb,0x85,0xcc,0xb8,0xf3,0x31,0x5f,0x4b,0x52,0xe3,0x01,0xd1,0x6e,0x9f,0x52,0xf9,0x04}};

        char[][] answer = new char [11][83];    
        int k=0, l=0;   
        int i = 0, j=0;
        int count = 0; 
        for (i=0; i<=10; i++){
            for (j=0; j<=82; j++){
                if (j>82 || l>82) break; 
                count = 0;
                l=j;
                for (k=0;k<=10;k++) { 
                    if (i==k){
                        k++;
                    }
                    if (j>82 || l>82 || i >10 || k>10) break; 
                    char temp = (char) (strings [i][j] ^ strings[k][l]);
                    if (temp == 32  || (temp > 64 && temp <91) || (temp >96 && temp <123) ) {
                        count++;
                        if (count>4)        
                            answer[i][j] = ' ';         
                        else
                            answer[i][j] = (char) (temp ^ ' ');     
                    }
                }
            }
        }
        for (i=0; i<=10; i++){
            System.out.print("\nString "+ i+"- ");
            for (j=0; j<=82; j++) {
                l = j;                                          
                System.out.print(answer[i][j]);                 
            }
        }
    }
} 
```

# java - Java - 执行控制台

> ID：10204722
> 
> 赞同：1
> 
> 时间：2012-04-18T07:18:24.300
> 
> 标签：java, console, cmd, exec, runtime.exec

我想用 Java 创建一个完整的跨平台控制台。

我遇到的问题是当我使用`cd`命令时，路径被重置。例如，如果我这样做`cd bin`，那么`cd ../`，我将从我的应用程序目录执行第一个，并从同一目录执行第二个。

如果我想去一​​个特定的文件夹并执行一个程序，我必须这样做：

`cd C:\mydir & cd bin & start.exe`

我想要做的是将此 cmd 拆分为不同的部分：

`cd C:\mydir`然后`cd bin`然后`start.exe`

我怎样才能做到这一点？有没有办法存储当前`cd`路径然后使用它？

* * *

这是我使用的代码：

```
String[] cmd_exec = new String[] {"cmd", "/c", cmd};

Process child = Runtime.getRuntime().exec(cmd_exec);

BufferedReader in = new BufferedReader(new InputStreamReader(child.getInputStream()));
StringBuffer buffer = new StringBuffer();
buffer.append("> " + cmd + "\n");

String line;
while ((line = in.readLine()) != null)
{
    buffer.append(line + "\n");
}
in.close();
child.destroy();
return buffer.toString(); 
```

它执行命令，然后返回控制台的内容。（这暂时适用于 Windows）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T07:52:36.780

如果要从特定目录运行命令，请使用`ProcessBuilder`而不是`Runtime.exec`. `directory`您可以在开始该过程之前使用该方法设置工作目录。不要尝试使用该`cd`命令 - 你没有运行 shell，所以它没有意义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T07:46:22.530

如果你做 cd 你不想执行它。您只想检查相对路径是否存在，然后更改

```
File currentDir 
```

到那个目录。所以我建议你把你的命令分成三个：cd、dir/ls 和其他东西。正如我所提到的，cd 通过使用 File currentDir 更改目录，dir 应该只获取 currentDir 的文件夹和文件并列出它们，然后其余的你应该按照你知道的那样执行。

请记住，您可以通过 "".split("&"); 拆分命令字符串；这样你就可以做到 "cd C:\mydir & cd bin & start.exe".split("&"); => {"cd C:\mydir", "cd bin", "start.exe"} 然后你可以按顺序执行它们。

祝你好运。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T08:29:01.613

感谢[Mads](https://stackoverflow.com/users/609579/mads)，我能够做到这一点：

这是我使用的代码：

```
if (cmd.indexOf("cd ") >= 0)
{
    String req_cmd = cmd.substring(0, 3);
    String req_path = cmd.substring(3);
    if (req_path.startsWith(File.separator) || req_path.substring(1, 2).equals(":"))
        path = req_path;
    else
        if (new File(path + cmd.substring(3)).exists())
            path += cmd.substring(3);
        else return "[Error] Directory doesn't exist.\n";

    if (!path.endsWith(File.separator)) path += File.separator;

    cmd = req_cmd + path;
}
else cmd = "cd " + path + " & " + cmd; 
```

然后你可以执行命令调用：

```
Runtime.getRuntime().exec(new String[] {"cmd", "/c", cmd}); 
```

不要忘记在你的类中添加这个属性：

```
private static String path = System.getProperty("user.dir") + File.separator; 
```

# c# - IE 无法使用 C# Selenium 脚本，而 Firefox 运行良好

> ID：10204725
> 
> 赞同：0
> 
> 时间：2012-04-18T07:18:34.617
> 
> 标签：c#, internet-explorer, firefox, selenium, webdriver

脚本：

```
IWebDriver ie = new InternetExplorerDriver();
IWebDriver ff = new FirefoxDriver();
string baseURL = "http://xxxxxxxxxxxx";
ISelenium iesele = new WebDriverBackedSelenium(ie, baseURL);
ISelenium ffsele = new WebDriverBackedSelenium(ff, baseURL); 
```

baseURL的页面有2个框架，上框架是一个警告页面，我想选择“同意”然后点击“确定”关闭它。IE的脚本不起作用，可以发现复选框和按钮的对象，但是“选择”和“单击”不起作用。但在火狐下，它可以工作，上框关闭成功。脚本：IE

```
iesele.Start();
iesele.Open(baseURL);
iesele.SelectFrame("UpperFrame");
iesele.FindElement(By.Name("agree")).Click();
iesele.FindElement(By.CssSelector("ok")).Click(); 
```

火狐

```
ffsele.Start();
ffsele.Open(baseURL);
ffsele.SelectFrame("UpperFrame");
ffsele.FindElement(By.Name("agree")).Click();
ffsele.FindElement(By.CssSelector("ok")).Click(); 
```

有谁知道为什么 IE 不能正确执行这个脚本？我应该设置一些 IE8 吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T09:20:09.120

每个浏览器呈现页面的方式不同，Selenium 驱动程序也不同（因此不同的浏览器可能无法使用完全相同的脚本）。

您可能会发现[此](https://stackoverflow.com/a/9486482/1077279)类似问题的答案很有用。特别是，尝试选择并单击目标元素的父元素（例如 a `<div>`）而不是元素本身。此外，尝试使用`MouseDown()`后跟`MouseUp()`而不是`Click()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T07:30:36.450

嗯，我已经四处寻找您的问题；也许您也有与此 stackoverflow 问题相同的问题：

[Selenium 2.0b3 IE WebDriver，点击不触发](https://stackoverflow.com/questions/5574802/selenium-2-0b3-ie-webdriver-click-not-firing)

在这里，在您的元素上注册实际的 click() 之前，给定的框架似乎需要获得焦点（通过 click()）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T02:31:14.617

有几次我发现 Firefox 可以查找元素并与之交互，但 IE 会在不同的地方失败。大多数情况下，我输入“等待元素”，IE 问题就解决了。我认为 IE 有时创建元素的速度会慢一些（或者以不同的顺序做事？），所以有时当您打算单击它时该元素不存在。这可能不是你的问题，但它似乎经常发生在我身上！

编辑：我也使用 Chrome，当 IE 失败时，FF 和 Chrome 经常工作。

# java - Robolectric 打印日志或控制台消息

> ID：10204729
> 
> 赞同：0
> 
> 时间：2012-04-18T07:18:52.963
> 
> 标签：java, android, robolectric

我用 Robolectric 写了一个小测试。有一个问题 - 没有消息写入测试控制台。在经过测试的代码中有很多类似的代码

```
Log.d("bla","bla") 
```

或者

```
System.out.println("bla") 
```

但无论如何，没有输出。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T07:58:30.427

I think the part of the code where you have applied log is not executing.so thats why log is not coming.

# php - 使用同一数据表中的 ajax 填充下拉列表

> ID：10204730
> 
> 赞同：2
> 
> 时间：2012-04-18T07:18:53.493
> 
> 标签：php, mysql, jquery, drop-down-menu

我有一个 5 列的 mysql 数据库表。

> **id、A 列、B 列、C 列、D 列**

我用这些值填充了数据表，因此每列都有 2 个（不同的）值。

```
columnA 1, columnB 1, columnC 1, columnD 1
columnA 1, columnB 1, columnC 1, columnD 2
...
columnA 2, columnB 2, columnC 2, columnD 2 
```

我希望该用户可以从下拉列表中选择这些值。当他/她从 A 列中选择第一个数据时，B 列的值会根据所选值出现在另一个选择框中。等等..所以我想我需要使用 ajax-jquery。这是我用过的脚本，

```
<script type="text/javascript">
$(document).ready(
function() {
    $(".columnA").change(
    function() {
        var columnA=$(this).val();
        var dataString = 'columnA='+ columnA;
        $.ajax (    {
                        type: "POST",
                        url: "ajax_try.php",
                        data: dataString,
                        cache: false,
                        success: function(html)
                        {
                            $(".columnB").html(html);
                        }    
                    }               
                );

                }
        );
});
</script> 
```

和php代码。

```
<?php
    //index.php
    include('db.php');
    $sql=mysql_query("SELECT ID, columnA FROM try GROUP BY columnA");
    while($row = mysql_fetch_array($sql))
    {
    $id = $row['id'];
    $columnA = $row['columnA'];
    echo '<option value="'.$id.'">'.$columnA.'</option>';
    } 
?>

<?php
   //ajax_try.php
   include('db.php');
   if($_POST['columnA'])
   {
      $columnA = $_POST['columnA'];
      $sql = mysql_query("SELECT ID, columnB from try WHERE columnA = '$columnA' GROUP BY columnB");

      while($row = mysql_fetch_array($sql))
      {
         $id = $row['id'];
         $columnB = $row['columnB'];
         echo '<option value="'.$id.'">'.$columnB.'</option>';
      }
   }
?> 
```

我得到了 columnA 的值，但是当我选择其中一个时，什么也没有发生。而且我不知道如何使用ajax绑定其他下拉列表..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T07:48:11.110

我建议在这里调试的最佳方法是使用以下方法：

1) 更改警报以查看是否正在调用函数

2) 使用 file_put_contents(..) 调试 php 端并查看实际执行的 SQL 是什么？

3) 提醒您使用 Ajax 收到的数据，看看您是否收到了？

如果您使用上述 3 种方法正确调试，您应该很容易发现哪里出了问题？

祝你好运。

# android - 根据设备（移动设备或PC）更改html的装饰器

> ID：10204731
> 
> 赞同：0
> 
> 时间：2012-04-18T07:19:12.923
> 
> 标签：android, spring-mvc

我有一个 spring mvc web 应用程序，我需要为移动设备提供一些页面的访问权限。但问题是我需要为移动视图应用不同的装饰器集。（即当用户使用移动设备访问该页面时，会获得不同的视图，而不是 pc 中该 html 视图的视图）。在这里，我使用的是站点网格。有没有可以克服这种情况的通用方法？我有一个计划使用用户 get 请求标签来过滤设备。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T07:25:57.040

是的，您只能使用 User-Agent 来决定

如果你使用 PHP，你可以看看 [这个](http://code.google.com/p/php-mobile-detect/)

或者您可以将正则表达式代码用于像这样的其他语言

```
protected $phoneDevices = array(     
        'iPhone' => '(iPhone.*Mobile|iPod|iTunes)',            
        'BlackBerry' => 'BlackBerry|rim[0-9]+',
        'HTC' => 'HTC|Desire',
        'Nexus' => 'Nexus One|Nexus S',
        'DellStreak' => 'Dell Streak',
        'Motorola' => '\bDroid\b.*Build|HRI39|MOT\-',
        'Samsung' => 'Samsung|GT-I9100|GT-I9000|GT-I9020|SCH-A310|SCH-A530|SCH-A570|SCH-A610|SCH-A630|SCH-A650|SCH-A790|SCH-A795|SCH-A850|SCH-A870|SCH-A890|SCH-A930|SCH-A950|SCH-A970|SCH-A990|SCH-I100|SCH-I110|SCH-I400|SCH-I405|SCH-I500|SCH-I510|SCH-I515|SCH-I600|SCH-I730|SCH-I760|SCH-I770|SCH-I830|SCH-I910|SCH-I920|SCH-LC11|SCH-N150|SCH-N300|SCH-R300|SCH-R400|SCH-R410|SCH-T300|SCH-U310|SCH-U320|SCH-U350|SCH-U360|SCH-U365|SCH-U370|SCH-U380|SCH-U410|SCH-U430|SCH-U450|SCH-U460|SCH-U470|SCH-U490|SCH-U540|SCH-U550|SCH-U620|SCH-U640|SCH-U650|SCH-U660|SCH-U700|SCH-U740|SCH-U750|SCH-U810|SCH-U820|SCH-U900|SCH-U940|SCH-U960|SCS-26UC|SGH-A107|SGH-A117|SGH-A127|SGH-A137|SGH-A157|SGH-A167|SGH-A177|SGH-A187|SGH-A197|SGH-A227|SGH-A237|SGH-A257|SGH-A437|SGH-A517|SGH-A597|SGH-A637|SGH-A657|SGH-A667|SGH-A687|SGH-A697|SGH-A697|SGH-A707|SGH-A717|SGH-A727|SGH-A737|SGH-A747|SGH-A767|SGH-A777|SGH-A797|SGH-A817|SGH-A827|SGH-A837|SGH-A847|SGH-A867|SGH-A877|SGH-A887|SGH-A897|SGH-A927|SGH-C207|SGH-C225|SGH-C417|SGH-D307|SGH-D347|SGH-D357|SGH-D407|SGH-D415|SGH-D807|SGH-E105|SGH-E315|SGH-E316|SGH-E317|SGH-E335|SGH-E635|SGH-E715|SGH-I577|SGH-I607|SGH-I617|SGH-I627|SGH-I637|SGH-I677|SGH-I717|SGH-I727|SGH-I777|SGH-I827|SGH-I847|SGH-I857|SGH-I897|SGH-I907|SGH-I917|SGH-I927|SGH-I937|SGH-I997|SGH-N105|SGH-N625|SGH-P107|SGH-P207|SGH-P735|SGH-P777|SGH-Q105|SGH-R225|SGH-S105|SGH-S307|SGH-T109|SGH-T119|SGH-T139|SGH-T209|SGH-T219|SGH-T229|SGH-T239|SGH-T249|SGH-T259|SGH-T309|SGH-T319|SGH-T329|SGH-T339|SGH-T349|SGH-T359|SGH-T369|SGH-T379|SGH-T409|SGH-T429|SGH-T439|SGH-T459|SGH-T469|SGH-T479|SGH-T499|SGH-T509|SGH-T519|SGH-T539|SGH-T559|SGH-T589|SGH-T609|SGH-T619|SGH-T629|SGH-T639|SGH-T659|SGH-T669|SGH-T679|SGH-T709|SGH-T719|SGH-T729|SGH-T739|SGH-T749|SGH-T759|SGH-T769|SGH-T809|SGH-T819|SGH-T839|SGH-T919|SGH-T919|SGH-T929|SGH-T939|SGH-T939|SGH-T959|SGH-T989|SGH-V205|SGH-V206|SGH-X105|SGH-X426|SGH-X427|SGH-X475|SGH-X495|SGH-X497|SGH-X507|SGH-ZX10|SGH-ZX20|SPH-A120|SPH-A400|SPH-A420|SPH-A460|SPH-A500I|SPH-A560|SPH-A600|SPH-A620|SPH-A660|SPH-A700|SPH-A740|SPH-A760|SPH-A790|SPH-A800|SPH-A820|SPH-A840|SPH-A880|SPH-A900|SPH-A940|SPH-A960|SPH-D600|SPH-D700|SPH-D710|SPH-D720|SPH-I300|SPH-I325|SPH-I330|SPH-I350|SPH-I500|SPH-I600|SPH-I700|SPH-L700|SPH-M100|SPH-M220|SPH-M240|SPH-M300|SPH-M305|SPH-M320|SPH-M330|SPH-M350|SPH-M360|SPH-M370|SPH-M380|SPH-M510|SPH-M540|SPH-M550|SPH-M560|SPH-M570|SPH-M580|SPH-M610|SPH-M620|SPH-M630|SPH-M800|SPH-M810|SPH-M850|SPH-M900|SPH-M910|SPH-M920|SPH-M930|SPH-N200|SPH-N240|SPH-N300|SPH-N400|SPH-Z400|SWC-E100',
        'Sony' => 'E10i|SonyEricsson|SonyEricssonLT15iv',
        'Asus' => 'Asus.*Galaxy',
        'Palm' => 'PalmSource|Palm', // avantgo|blazer|elaine|hiptop|plucker|xiino
        'GenericPhone' => '(mmp|pocket|psp|symbian|Smartphone|smartfon|treo|up.browser|up.link|vodafone|wap|nokia|Series40|Series60|S60|SonyEricsson|N900|\bPPC\b|MAUI.*WAP.*Browser|LG\-P500)'
);
// List of tablet devices.
protected $tabletDevices = array(
    'BlackBerryTablet' => 'PlayBook|RIM Tablet',
    'iPad' => 'iPad.*Mobile',
    'Kindle' => 'Kindle|Silk.*Accelerated',
    'SamsungTablet' => 'SAMSUNG.*Tablet|Galaxy.*Tab|GT-P1000|GT-P1010|GT-P6210|GT-P6800|GT-P6810|GT-P7100|GT-P7300|GT-P7310|GT-P7500|GT-P7510|SCH-I800|SCH-I815|SCH-I905|SGH-I777|SGH-I957|SGH-I987|SGH-T849|SGH-T859|SGH-T869|SGH-T989|SPH-D710|SPH-P100',
    'MotorolaTablet' => 'xoom|sholest',
    'AsusTablet' => 'Transformer|TF101',
    'NookTablet' => 'NookColor|nook browser|BNTV250A|LogicPD Zoom2',
    'AcerTablet' => 'Android.*(A100|A101|A200|A500|A501|A510|W500|W500P|W501|W501P)',
    'GenericTablet' => 'Tablet|ViewPad7|LG\-V909|MID7015|BNTV250A|LogicPD Zoom2|\bA7EB\b|CatNova8|A1_07|CT704|CT1002|\bM721\b',
);
// List of mobile Operating Systems.
protected $operatingSystems = array(
    'AndroidOS' => '(android.*mobile|android(?!.*mobile))',
    'BlackBerryOS' => '(blackberry|rim tablet os)',
    'PalmOS' => '(avantgo|blazer|elaine|hiptop|palm|plucker|xiino)',
    'SymbianOS' => 'Symbian|SymbOS|Series60|Series40|\bS60\b',
    'WindowsMobileOS' => 'IEMobile|Windows Phone|Windows CE.*(PPC|Smartphone)|MSIEMobile|Window Mobile|XBLWP7',
    'iOS' => '(iphone|ipod|ipad)',
    'FlashLiteOS' => '',
    'JavaOS' => '',
    'NokiaOS' => '',
    'webOS' => '',
    'badaOS' => '\bBada\b',
    'BREWOS' => '',
);
// List of mobile User Agents.
protected $userAgents = array(      
  'Chrome' => '\bCrMo\b',
  'Dolfin' => '\bDolfin\b',
  'Opera' => '(Opera.*Mini|Opera.*Mobi)',  
  'Skyfire' => 'skyfire',      
  'IE' => 'ie*mobile',
  'Firefox' => 'fennec|firefox.*maemo',
  'Bolt' => 'bolt',
  'TeaShark' => 'teashark',
  'Blazer' => 'Blazer',
  'Safari' => 'Mobile*Safari',
  'Midori' => 'midori',
  'GenericBrowser' => 'NokiaBrowser|OviBrowser'
); 
```

它很容易重复使用:)

# c# - 垃圾收集 - 是否需要？

> ID：10204734
> 
> 赞同：0
> 
> 时间：2012-04-18T07:19:33.543
> 
> 标签：c#, winforms, garbage-collection

一般来说，垃圾收集是一种很好的做法，因为它可以释放资源。如何在以下代码的`keepingTime`方法中实现正确的垃圾回收？或者，事实上，我什至需要？！

`System.Timers.Timer`允许 IDisposable 接口，所以 'using' 是一个选项，但不是在下面，因为计时器的范围需要扩展到`myTimer_Elapsed`订阅 Timer Elapsed 事件的方法。我已经进行了两次垃圾收集尝试，但都失败了，因为计时器没有停留足够长的时间！

*由于其他原因*，我之前在[HERE中讨论过此代码](https://stackoverflow.com/questions/10170448/introducing-timer-means-its-multi-threaded/10174831#10174831)

```
public partial class AirportParking : Form
{

    //>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
    //instance variables of the form
    System.Timers.Timer myTimer;

    private const string EvenText = "hello";
    private const string OddText = "hello world";

    static int tickLength = 100; 
    static int elapsedCounter;
    private int MaxTime = 5000;
    private TimeSpan elapsedTime; 
    private readonly DateTime startTime = DateTime.Now; 
    //<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

    public AirportParking()
    {
        InitializeComponent();
        lblValue.Text = EvenText;
        keepingTime();
    }

    //method for keeping time
    public void keepingTime() {

        myTimer = new System.Timers.Timer(tickLength);
        myTimer.Elapsed += new ElapsedEventHandler(myTimer_Elapsed);
        myTimer.AutoReset = true;
        myTimer.Enabled = true;
        myTimer.Start();

        //ATTEMPT_1.tried the following unsuccessfully
        //using (System.Timers.Timer myTimer = new System.Timers.Timer(tickLength))
        //{
        //    myTimer.Elapsed += new ElapsedEventHandler(myTimer_Elapsed);
        //    myTimer.AutoReset = true;
        //    myTimer.Enabled = true;
        //    myTimer.Start();
        //}

        //ATTEMPT_2.tried the following unsuccessfully
        //myTimer.Elapsed += new ElapsedEventHandler(myTimer_Elapsed);
        //myTimer.AutoReset = true;
        //myTimer.Enabled = true;           
        //try
        //{
        //    myTimer.Start();
        //}
        //finally
        //{
        //    myTimer.Dispose();
        //}

    }

    private void myTimer_Elapsed(Object myObject,EventArgs myEventArgs){

        elapsedCounter++;
        elapsedTime = DateTime.Now.Subtract(startTime);

        if (elapsedTime.TotalMilliseconds < MaxTime)
        {
            this.BeginInvoke(new MethodInvoker(delegate
            {
                this.lblElapsedTime.Text = elapsedTime.ToString();

                if (elapsedCounter % 2 == 0)
                    this.lblValue.Text = EvenText;
                else
                    this.lblValue.Text = OddText;
            }));
        }
        else {myTimer.Stop();}
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T07:24:04.380

`OnClosing`如果这不是主表单，或者顺便说一下，一个始终可见的表单， 请在表单的事件上处理您的计时器。

伪代码可能如下所示：

```
public partial class AirportParking : Form
{
  .....
  .....

  protected override void OnClosing(...)
  {
       myTimer.Dispose();
  }
} 
```

如果这是一些“长期运行”的形式，你应该在你不再需要它的时候添加对 timere 的处理，但我想你已经知道了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T07:25:26.080

唯一需要处理计时器资源的地方是回调函数`myTimer_Elapsed`。在你做的地方`myTime.Stop();`你也可以做`myTimer.Dispose();`。

但是，当应用程序的这一部分超出范围时，无论如何都会清除所有这些变量。只要计时器最终停止，一旦它被取消引用，它就会被 GC 收集。

`using`块（和你的 current `Dispose()`）不起作用的原因是你一创建计时器就扔掉它！你必须让它在后台运行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T10:05:34.367

虽然垃圾收集是一种很好的做法，但在这种情况下，当您关闭表单或实例死亡时，它会自动完成。

我真正担心的唯一一次是 SQL 阅读器，因为你必须确保它们在完成后关闭，否则会导致各种问题。

# c++ - OpenCV：带有 CSV 文件的特征脸

> ID：10204739
> 
> 赞同：1
> 
> 时间：2012-04-18T07:19:55.443
> 
> 标签：c++, opencv, csv, face-recognition

我在这个问题上苦苦挣扎了很长一段时间，也许这里的某个人可能会对出了什么问题提出建议。我正在尝试使用 libfacerec 从该站点在 OpenCV 中实现 Eigenfaces：**https** ://github.com/bytefish/libfacerec我正在将 OpenCV-2.3.1 与 Visual Studio 2010 一起使用

示例代码使用来自此站点的 orl_faces 数据集：http://www.cl.cam.ac.uk/research/dtg/attarchive/facedatabase.html**并**使用 csv 文件加载这些图像。在此文件中，列出了所有 400 张图像（40 个不同人的 10 张图像）的所有路径，并为每个人附加了一个标签。两个条目由“ **;** ”分隔。我在下面添加了这个 csv 文件的几行：

```
C:/Users/PIMMES/Documents/libraries/orl_faces/s1/1.pgm;0
C:/Users/PIMMES/Documents/libraries/orl_faces/s1/2.pgm;0
...
C:/Users/PIMMES/Documents/libraries/orl_faces/s2/1.pgm;1
C:/Users/PIMMES/Documents/libraries/orl_faces/s2/2.pgm;1
...
etc 
```

我在下面添加了一段代码，它应该加载图像数据。这与 libfacerec 网站 /src 文件夹中的 main.cpp 文件中列出的代码完全相同：

```
void read_csv(const string& filename, vector<Mat>& images, vector<int>& labels, char separator = ';')
{
    std::ifstream file(filename.c_str(), ifstream::in);
    if (!file) throw std::exception();
    string line, path, classlabel;

    while (getline(file, line))
{
        stringstream liness(line);
        getline(liness, path, separator);
        getline(liness, classlabel);
        images.push_back(imread(path, 0));
        labels.push_back(atoi(classlabel.c_str()));
    }
}

int main(int argc, const char *argv[])
{
    // check for command line arguments
    if(argc != 2)
    {
        cout << "usage: " << argv[0] << " <csv.ext>" << endl;
        exit(1);
    }

    // path to your CSV
    string fn_csv = string(argv[1]);

    // images and corresponding labels
    vector<Mat> images;
    vector<int> labels;

    // read in the data
    try
    {
        read_csv(fn_csv, images, labels);
    }
    catch (exception& e)
    {
        cerr << "Error opening file \"" << fn_csv << "\"." << endl;
        exit(1);
    }

    // get width and height
    int width = images[0].cols;
    int height = images[0].rows;

    // get test instances
    Mat testSample = images[images.size() - 1];
    int testLabel = labels[labels.size() - 1];
    ...
    etc.
} 
```

整个项目构建良好，没有任何错误，但是当我尝试运行时发生崩溃。我进入 Debug 模式并发现**vector< Mat > 图像**和**vector< int > 标签**（不要介意空格，因为没有它们，它不会在此处正确显示）仍然为 0，这意味着没有加载数据。但是，当我打印变量高度和宽度时，两者都显示为 140（来自 orl_faces 的所有图像都是 140x140 像素）

所以我的问题是，出了什么问题？为什么在填充高度和宽度时两个向量都没有填充？

**编辑：**似乎两个向量都在我的另一台电脑上正确填充（矢量图像 [400]，矢量标签 [400]。但是程序仍然崩溃并且在运行调试时我发现此错误：

Test.exe 中 0x77c415de 处未处理的异常：0xC0000005：访问冲突写入位置 0x00000000。

它位于 mat.hpp 文件中，当单步执行该文件时，向量 v 显示以下错误：[size] CXX0030：错误：无法评估表达式 [容量 CXX0030：错误：无法评估表达式

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T22:27:37.570

我很确定问题是这样的。

您正在链接库：

```
opencv_core231.lib
opencv_highgui231.lib
opencv_imgproc231.lib 
```

然后在 Visual Studio 中使用调试配置进行构建。看到问题了吗？如果您想这样做，请切换到`opencv_core231d.lib`库。但是：由于某些神秘的原因，OpenCV2.3.1 超级包没有附带`tbb_debug.dll`，因此 Debug 构建将失败。如果您正在使用 superpack 并想使用 libfacerec，则在 Visual Studio 中激活发布构建配置，构建并运行，一切都会正常工作。

我已经写了一个教程，应该很容易理解：[http](http://www.bytefish.de/blog/opencv_visual_studio_and_libfacerec) ://www.bytefish.de/blog/opencv_visual_studio_and_libfacerec 。滚动到最底部以查看 Windows 中的特征脸。所以你看，它确实有效。

# matlab - 从形成非凸面的点创建 N 维中的 delaunay 三角剖分（5-D 情况下的 DelaunayTri）

> ID：10204741
> 
> 赞同：0
> 
> 时间：2012-04-18T07:20:06.020
> 
> 标签：matlab, triangulation, delaunay

我想为大于 3 维（4-6）的情况建立三角测量。我有代表非凸面的点。对于 2D 和 3D 案例，DelaunayTri 是一种可行的方法。更高维度呢？

（原问题是用线性超平面逼近一些非线性超曲面）

问候， 安德烈

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T10:08:07.937

使用 delaunayn()，查看 matlab 文档： http: [//www.mathworks.com/help/techdoc/ref/delaunayn.html](http://www.mathworks.com/help/techdoc/ref/delaunayn.html)它解释得很好。

# android - 在 Android 应用中显示可点击的饼图

> ID：10204743
> 
> 赞同：3
> 
> 时间：2012-04-18T07:20:11.343
> 
> 标签：android

谁能告诉我是否可以在我们的应用程序中显示饼图。我们是否需要使用任何第三方 api。我想在图表中的每个切片上显示带有点击事件的饼图。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T07:25:20.310

希望这能有所帮助：[GraphView](http://www.jjoe64.com/p/graphview-library.html) 是一个在 Android 上创建图表的库。在同一页面上，您可以找到代码示例。源代码[在这里](https://github.com/jjoe64/GraphView)

其他选项是：[achartengine](http://code.google.com/p/achartengine/)

相关问题： [https ://stackoverflow.com/questions/424752/any-good-graphing-packages-for-android](https://stackoverflow.com/questions/424752/any-good-graphing-packages-for-android)

希望能帮助到你！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-12T14:18:19.830

您可以将 AChartEngine 用于可点击的饼图。可以在[此处](http://code.google.com/p/achartengine/source/browse/trunk/achartengine/demo/org/achartengine/chartdemo/demo/chart/PieChartBuilder.java)找到显示此用法的示例。

# jquery-ui - jquery UI 可通过多个alsoResize 调整大小

> ID：10204744
> 
> 赞同：0
> 
> 时间：2012-04-18T07:20:13.977
> 
> 标签：jquery-ui

我在以下方面遇到了一些困难。我有一个可调整大小的对象。代码如下所示：

```
var alsoresizablevar1;
var alsoresizablevar2;

object.resizable({
    handles: {se: object.find(".resize")},
    alsoResize: alsoresizablevar1, alsoresizablevar2
}); 
```

如何将 2 个变量添加到 alsoResize 选项，以便它们与原始对象一起调整大小？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T07:22:56.457

为调整大小的元素创建一个事件监听器并调整alsoresizablevar1 和alsoresizablevar2 的大小。

你想做什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T06:43:49.927

您最好根据原始对象的更改大小手动处理 resizable.stop 事件并调整相关对象的大小。例如，我在一个简单的项目中实现了它，通过拖放手动调整页面部分的大小。

```
$("#selector").resizable(
    {
        stop: function (e, ui)
        {
            var changedHeight = ui.size.height - ui.originalSize.height;
            var changedWidth = ui.size.width - ui.originalSize.width;

                    // update related objects' size based on above values.
        }
    }); 
```

# ruby-on-rails - 在 Rails 中搜索的一般设置，如何从初始化文件访问变量

> ID：10204745
> 
> 赞同：0
> 
> 时间：2012-04-18T07:20:38.877
> 
> 标签：ruby-on-rails, full-text-search, initializer, indextank, searchify

如何从初始化文件访问变量？

我的初始化程序文件夹中有一个名为 search.rb 的文件

```
api_client = IndexTank::Client.new 'http://:xxyyzz@xv9v.api.searchify.com'
index = api_client.indexes 'idx' 
```

但是，在我的控制器中，每当我尝试索引新创建的课程时，rails 都会给我一个错误

```
undefined method `document' for nil:NilClass 
```

我的控制器是...

```
def create
    index.document(@lesson.id).add({:text => @lesson.content })
end 
```

这也是索引我的文档的坏方法吗？每当它们被创建时？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T18:59:50.190

您可能会发现查看 Kidpollo 的 Tanker gem 很有用 - [https://github.com/kidpollo/tanker](https://github.com/kidpollo/tanker)

这是用于导轨的第 3 方 IndexTank 宝石。您实际上不必使用它 - 如果需要，您可以继续使用 indextank gem。但是查看 Tanker gem 的源代码可能有助于找出在 rails 下编写代码的最佳方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T13:18:38.927

看起来索引对象未初始化。

不，这不是索引文档的好方法。但是，我建议在特殊索引模型中移动索引，该模型将处理特定索引的所有索引逻辑。把索引想象成数据库表。

# windows - 在复制命令中使用设置变量

> ID：10204746
> 
> 赞同：0
> 
> 时间：2012-04-18T07:20:40.513
> 
> 标签：windows, batch-file, dos

如何使用设置变量在 bat 文件中复制文件。

[运行.bat]

```
set MY_WORKSPACE=workspace1.0.1
copy /Y /V D:\%MY_WORKSPACE%\webapp\target\app-generic.war C:\Opt\jboss-4.2.3.GA\server\default\deploy\ 
```

在上面的例子中，%MY_WORKSPACE% 是无效的，但是我可以通过使用 'echo' 查看该值

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T13:05:07.187

这是您向我们展示的整个批处理文件吗？

我有一种模糊的感觉，你正在用一个块做一个`set`或类似的语句，例如`copy``if`

```
if foo==bar (
  set MY_WORKSPACE=workspace1.0.1
  copy ...
) 
```

在这种情况下，您需要延迟扩展才能使变量更改生效，因为括号中的块被解析为单个命令，并且所有变量都在*解析*时替换，而不是在运行命令时替换。因此`%MY_WORKSPACE%`，一旦块运行，它将是空的。

您可以通过使用解决此问题

```
setlocal enabledelayedexpansion 
```

在批处理文件的顶部并使用`!MY_WORKSPACE!`而不是`%MY_WORKSPACE%`它将在运行命令之前扩展变量，而不是在解析时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T07:22:53.253

试试这个方法：

```
set MY_WORKSPACE="workspace1.0.1" 
```

# javascript - facebook like 按钮不会出现在我定义的位置

> ID：10204748
> 
> 赞同：-5
> 
> 时间：2012-04-18T07:20:48.083
> 
> 标签：javascript, facebook

因为今天facebook like按钮没有出现在我一直在我的网站上看到的位置，FB有问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T12:13:36.357

xfbml 版本也有同样的问题。我们没有更改我们网站上的任何内容，但按钮出现的不是以前。

在我们的例子中，我们将按钮居中，突然它出现了某种右对齐，但我们无法在代码中找到导致它的确切问题。

但是我们可以用这个 css 修复它：

```
.div-around-the-button iframe {left:0;} 
```

由于 Facebook 定位 iframe 绝对值，因此这个 css 将它放回我们想要的位置。但是在其他情况下可能完全不同。

# php - 如何在php中并排组合两个多维数组

> ID：10204749
> 
> 赞同：0
> 
> 时间：2012-04-18T07:20:49.070
> 
> 标签：php

我有 2 个多维数组：

```
array1[0][0] = 'yes';
array1[0][1] = 'no';
array1[1][0] = 'gilbert';
array1[1][1] = 'duncan'; 
```

和

```
array2[0][0] = 'good';
array2[0][1] = 'bad';
array2[1][0] = 'vegetables';
array2[1][1] = 'chocolate'; 
```

我想从这 2 个数组中创建一个新数组，这样：

```
array3[0][0] = 'yes';
array3[0][1] = 'no';
array3[0][2] = 'good';
array3[0][3] = 'bad';
array3[1][0] = 'gilbert';
array3[1][1] = 'duncan';
array3[1][2] = 'vegetables';
array3[1][3] = 'chocolate'; 
```

我正在使用 PHP。我如何做到这一点。PHP`array_merge()`将一个数组附加到另​​一个数组。我想要的是创建一个并排的两个数组的新数组。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T07:32:20.913

您只需要步行即可。您已经定义了一种相当具体（且有趣）的方式来合并它们。我可能会推荐这样的功能：

```
function my_combine_arrays()
{
    // This lets us accept N arrays as an input.
    $arrList = func_get_args();
    $retval = array();
    foreach ($arrList as $array)
    {
        // Note the $key here.  If the arrays have different key types
        // like an assoc, you may have issues.
        foreach ($array as $key=>$arrsub)
        {
           foreach ($arrsub as $arritem)
           {
               $retval[$key][] = $arritem;
           }
        }
    }
    return $retval;
} 
```

# javascript - jQuery 中的基本 JSON 解析

> ID：10204754
> 
> 赞同：0
> 
> 时间：2012-04-18T07:21:04.273
> 
> 标签：javascript, jquery, json

我对此很陌生，所以有人可以提供一个非常基本的例子吗？

假设位于[http://www.example.org/test.json](http://www.example.org/test.json)的文件是这样的：

```
{
   "test":{
      "example":"Test",
      "another":"Text"
   },
   "blah":123
} 
```

HTML是这样的：

```
<div id="whatever"></div> 
```

我将如何从文件中提取“测试”并`.append`使用`#whatever`jQuery？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T07:24:40.043

尝试：

```
$.getJSON('http://www.example.org/test.json', function(data) {
  $('#whatever').append(data.test.example);
}); 
```

# css - 使内容属性文本可选择

> ID：10204756
> 
> 赞同：3
> 
> 时间：2012-04-18T07:21:18.807
> 
> 标签：css

我有一个很酷的工具提示可以使用一些数据属性，如下所示： [http ://www.frequency-decoder.com/demo/css-tooltips/](http://www.frequency-decoder.com/demo/css-tooltips/)

但问题是工具提示中的文本不可选择，即使我添加了属性：

```
cursor: text; 
```

知道如何使该工具提示可选吗？

谢谢

更新：这似乎也无济于事：

```
-webkit-touch-callout: all;
-webkit-user-select: all;
-khtml-user-select: all;
-moz-user-select: all;
-ms-user-select: all;
user-select: all; 
```

值：无 | 正文 | 切换 | 元素 | 元素 | 全部 | 继承

参考：

[如何使用 CSS 禁用文本选择突出显示？](https://stackoverflow.com/questions/826782/css-rule-to-disable-text-selection-highlighting)

[http://www.w3.org/TR/2000/WD-css3-userint-20000216#user-select](http://www.w3.org/TR/2000/WD-css3-userint-20000216#user-select)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T07:56:43.023

这不是执行此操作的工具提示。

尝试使用 jQuery 进行类似的操作（随机谷歌搜索：http: [//jquerytools.org/demos/tooltip/index.html](http://jquerytools.org/demos/tooltip/index.html)）

或者看看这个网站的工具提示脚本汇编 [http://www.1stwebdesigner.com/css/stylish-jquery-tooltip-plugins-webdesign/](http://www.1stwebdesigner.com/css/stylish-jquery-tooltip-plugins-webdesign/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T07:45:15.340

没有办法让它可选择。提示必须仅存在于元素的 :hover 上。我很难将鼠标移到提示本身上。

顺便说一句，我建议从 css 中删除动画（并使不透明度：1）它更好且响应迅速。

# iphone - 将 SecKeyRef（公钥）转换为 NSString

> ID：10204761
> 
> 赞同：3
> 
> 时间：2012-04-18T07:21:54.053
> 
> 标签：iphone, ios, security, cryptography

我正在使用[在磁盘上保存 SecKeyRef 设备生成的公钥/私钥对](https://stackoverflow.com/questions/5988735/saving-seckeyref-device-generated-public-private-key-pair-on-disk)这个例子，但是我在 sanityCheck 中不断得到 -25300。谁能告诉我出了什么问题或这个错误意味着什么？谢谢

SecKeyRef 公钥；SecKeyRef 私有密钥；

```
CFDictionaryRef keyDefinitions;
CFTypeRef keys[2];
CFTypeRef values[2];

keys[0] = kSecAttrKeyType;
values[0] = kSecAttrKeyTypeRSA;

keys[1] = kSecAttrKeySizeInBits;
int iByteSize = 2048;
values[1] = CFNumberCreate(NULL, kCFNumberIntType, &iByteSize);

keyDefinitions = CFDictionaryCreate(NULL, keys, values, sizeof(keys) / sizeof(keys[0]), NULL,NULL );

OSStatus status = SecKeyGeneratePair(keyDefinitions,&publicKey, &privateKey);
status = SecItemCopyMatching((CFDictionaryRef)publicKey, (CFTypeRef *)&publicKeyBits);//<--where error occur. 
```

# asp.net-mvc-3 - URL 处的对象具有 og:type 的“网站”。属性 'recipe' 需要 og:type 的对象

> ID：10204762
> 
> 赞同：0
> 
> 时间：2012-04-18T07:22:00.983
> 
> 标签：asp.net-mvc-3, facebook-graph-api

我已经实现了 FB 时间线集成，我已经使用以下代码在时间线上成功发布：

```
FB.api('/me/_recpbox:cook', 'post', { recipe: 'http://samples.ogp.me/187362391384273' }, function (response) {
if (!response || response.error) {
alert(response.error.message);
} else {
alert('Post ID: ' + response.id);
}
}); 
```

这里的 URL 来自 fb 应用程序设置，（Open Graph Dashboard 页面在您的操作旁边有一个“获取代码”链接）

我必须提供自己的路径和图像，目前出现的图像是我为我的应用程序设置的图像，可以告诉我如何提供自己的 URL 和图像。我试过给我的网站路径，但它说：

```
Object at URL has og:type of 'website'. The property 'recipe' requires an object of og:type 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T09:39:39.080

您为配方对象提供的 URL 的头部必须有适当的 og 标记。有关更多信息，请参阅[http://developers.facebook.com/docs/opengraph/tutorial/](http://developers.facebook.com/docs/opengraph/tutorial/)。

请特别注意第 4 步中的“创建对象页面”部分：发布操作。

还有一点需要注意的是，你提供的 URL 必须可以被 Facebook 访问，否则你会得到同样的错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-14T13:32:18.780

如果您收到错误“URL 处的对象具有 og:type of 'x'。该属性需要 og:type 'y' 的对象，那么您可能有错误的[ogen 图元标记](https://developers.facebook.com/docs/opengraph/using-objects/)组合。url的页面`og:url`必须拥有这个权利`og:type`

# php - 令人困惑的定位问题

> ID：10204766
> 
> 赞同：0
> 
> 时间：2012-04-18T07:22:05.350
> 
> 标签：php, html, css, drupal

**仅适用于 CHORME 和 Firefox**

考虑以下链接[http://indivar.biz/deva/node/41](http://indivar.biz/deva/node/41)然后悬停选项卡“培训计划”，它将打开子菜单。打开的子菜单在“即将到来的节目”下方打开，紫色框下方的标题。而需要的是正确打开紫色盒子上方。

那么，请您告诉我，这个问题将如何解决。子菜单在主页上工作正常，但在内部页面上。

感谢巴尔卡尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T07:44:28.913

将此添加到您的 CSS 中。

```
#background-bg {
  {
   position: relative;
    z-index: 100;
  }
#content > .wrapper {
  {
   position: relative;
    z-index: 10;
  } 
```

尽管建议不要使用 ID 进行样式设置，但您可以使用此补丁。不会有问题的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T07:34:27.843

在这个类 .node-type-page #background-bg z-index 为 0，将其增加到 1 或更多，问题将得到修复

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T07:53:03.043

wrapere 相对位置和 z-index 像这样

```
#content  >  .wrapper {
        margin: 0 auto;
        position: relative;
        width: 960px;
        z-index: -1;
    } 
```

# sql-server - DTS 包不复制文件夹中的所有文件

> ID：10204767
> 
> 赞同：1
> 
> 时间：2012-04-18T07:22:09.710
> 
> 标签：sql-server, sql-server-2008-r2

我有一个在 SQL 2008 R2 中开发的包，它根据日期从某个位置复制文件，因为文件名附加了一个日期。当从 BIDS 中运行时，包运行良好并返回请求的文件，但是当使用任务计划程序自动执行此操作时，包不会复制所有文件。我的环境是 SSIS 2008 R2，我从批处理文件触发包的原因是因为运行包的盒子没有数据库服务器，只有客户端工具。无论包是如何触发的，我如何确保我的包返回所有请求的文件。

提前致谢

# ios - 安全 mp_init 和 init 内存泄漏

> ID：10204779
> 
> 赞同：1
> 
> 时间：2012-04-18T07:23:07.343
> 
> 标签：ios, memory, memory-leaks

我构建了一个 iPad 应用程序并使用 XCode 对其进行分析，我在 Security 框架中遇到了内存泄漏，以下是 Instruments 中的一些：

```
Leaked Object   #   Address Size    Responsible Library Responsible Frame
Malloc 128 Bytes,4  < multiple >    512 Bytes   Security    mp_init
 Malloc 128 Bytes,  0x824aa70   128 Bytes   Security    mp_init
 Malloc 128 Bytes,  0x824a9f0   128 Bytes   Security    mp_init
 Malloc 128 Bytes,  0x824a970   128 Bytes   Security    mp_init
 Malloc 128 Bytes,  0x824a8f0   128 Bytes   Security    mp_init

Leaked Object   #   Address Size    Responsible Library Responsible Frame
Malloc 16 Bytes,4   < multiple >    64 Bytes    Security    init
 Malloc 16 Bytes,   0x824a550   16 Bytes    Security    init
 Malloc 16 Bytes,   0x824a540   16 Bytes    Security    init
 Malloc 16 Bytes,   0x82493d0   16 Bytes    Security    init
 Malloc 16 Bytes,   0x8237ca0   16 Bytes    Security    init 
```

和一些细节：

```
#   Category    Event Type  Timestamp   RefCt   Address Size    Responsible Library Responsible Caller
0   Malloc 128 Bytes    Malloc  00:02.240.888   1   0x824aa70   128 Security    mp_init

#   Category    Event Type  Timestamp   RefCt   Address Size    Responsible Library Responsible Caller
0   Malloc 16 Bytes Malloc  00:02.240.886   1   0x824a550   16  Security    init 
```

我在我的应用程序中使用 ASIHTTP、FMDatabase 和其他一些框架（我认为它们不会导致问题），并且在“Link Binary With Libraries”中没有安全框架，所以我不知道出了什么问题。

任何人都可以找出可能导致泄漏的原因吗？

# php - 如何阻止 Iphone 缓存在线 XML 文件

> ID：10204782
> 
> 赞同：0
> 
> 时间：2012-04-18T07:23:16.013
> 
> 标签：php, iphone, xml, caching, no-cache

症状：读取更新的在线 XML 文件会提供缓存副本，直到应用程序重新启动。在 Mac 上的 Firefox 中，它显示更新的版本。

部分问题可能是我从以 .php 结尾的 URL 中初始化了一个 URL？这是一个以 Apple Plist 1.0 格式返回 XML 数据的脚本。一切正常，我检查了每次按下应用程序中的刷新按钮时都会调用 initWithContentsOfURL。

但是我似乎无法在应用程序中做更多的事情来确保在用户按下我的刷新按钮时加载未缓存的数据。

我还可以在应用程序中更改某些内容以使其丢弃缓存的数据吗？或者是向 XML 添加一些无缓存元标记的唯一选择（这甚至可能吗？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T07:30:42.257

添加缓存拦截器：

```
NSURL *url = [NSURL URLWithString:[NSString stringWithFormat:@"http://domain/xml.php?_cacheBuster=%.0f", [[NSDate date] timeIntervalSince1970]]]; 
```

# objective-c - 从我的应用程序启动应用程序的特殊 API

> ID：10204785
> 
> 赞同：10
> 
> 时间：2012-04-18T07:23:24.040
> 
> 标签：objective-c, ios, ipad

[我在这里](https://stackoverflow.com/questions/10193563/how-to-launch-an-app-inside-an-application)问了一个问题，但答案引导我打开一个新话题。很快，我想从我的应用程序在 Appstore 上启动一个免费应用程序，但我想启动的应用程序没有[URL Scheme](http://developer.apple.com/library/ios/#featuredarticles/iPhoneURLScheme_Reference/Introduction/Introduction.html)。我的另一个问题的评论说使用一些特殊的 API，如 SBSLaunchApplicationWithIdentifier 或 UIDocumentInteractionController 之类的类[使其](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIDocumentInteractionController_class/Reference/Reference.html)成为可能。谁能帮助我如何从我的应用程序启动应用程序。提前致谢

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-18T14:11:18.567

我先说**这个方法只是越狱！**它使用 Apple 可以在未来版本中随时**停止支持的私有 API！**

让我们开始吧，这个方法使用`[UIApplication launchApplicationWithIdentifier:suspended:]`私有方法：

```
[[UIApplication sharedApplication] launchApplicationWithIdentifier:@"com.apple.Preferences" suspended:NO]; 
```

从我测试的结果来看，**从不以 root 身份运行**的应用程序调用此方法是没有用的，显然 SpringBoard（或 LaunchServices）只允许 root 应用程序使用此方法启动其他应用程序。

所以，首先你需要越狱你的 iPhone，然后你需要让你的应用程序以 root 身份运行。

要让您的应用程序以 root 身份运行，您需要将其放在 /Applications/YourApp.app 中，而不是通常的 /User/Applications/ *UUID* /YourApp.app 中。

您可以使用 Cydia 安装 OpenSSH 并使用 SSH 访问手机的外壳。

然后，将您的应用程序放在正确的位置后，您需要设置权限，例如：

![在此处输入图像描述](../Images/8084d3fabd9a77d3ed2f41f0733099a5.png)

我会使用与 Cydia 相同的：

```
chown -R root:wheel /Applications/YourApp.app 
```

接下来，一个小技巧。二进制文件将需要[setuid 位](http://en.wikipedia.org/wiki/Setuid)：

```
chmod 4755 /Applications/YourApp.app/YourApp 
```

最后一步，SpringBoard 不会使用 setuid 位打开应用程序，而是打开一个脚本（可以打开另一个应用程序）！只需将二进制文件的名称更改为 YourApp_ 之类的名称：

```
mv /Applications/YourApp.app/YourApp /Applications/YourApp.app/YourApp_ 
```

并使用以下脚本在您的应用文件夹中创建一个名为 YourApp 的新文件：

```
#!/bin/bash
CrrDir=$(dirname "$0")
exec "${CrrDir}"/YourApp_ 
```

现在，只需重新启动（Cydia 中有一个应用程序），您就可以开始了。

抱歉，如果这看起来很难，其实不是，我不记得我在哪里学到的，但那是很久以前的事了。此方法适用于所有 iOS 版本，我刚刚使用 iOS 5.1 对其进行了测试。

同样，**如果您这样做，您的应用将不会被 Apple 批准**。

# c# - 代码性能：SQL Server Query vs C#.Net Web 应用程序

> ID：10204790
> 
> 赞同：6
> 
> 时间：2012-04-18T07:23:48.793
> 
> 标签：c#, asp.net, sql-server, performance

我正在编写一个复杂的逻辑来计算销售额和客户奖金。我有数百万条记录来计算奖金。

我想要专家意见，以便数学运算不会花费太多时间在网页上显示结果。

那么我需要在哪里编写计算部分？在 SQL Server 查询（使用存储过程和函数）或 ASP.NET 和 C#.Net（业务逻辑层）中？

哪一个是最佳实践？在数据库服务器上处理还是在应用程序服务器上处理？

问候

莫辛JK

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-18T07:31:31.587

如果您有数百万条记录，那么我建议您在 SQL Server 中编写计算部分，因为业务层中的计算将花费更多时间。

以下是提高性能的建议 -

*   编写存储过程
*   创建索引以更快地获取记录
*   如果操作用于大量记录，则使用临时表

你可以在网上搜索一下T-SQL的其他性能优化技术。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T07:27:41.307

> 我有数百万条记录来计算奖金

我认为最好在数据库中计算它以避免将大量数据从数据库传递到应用程序。

# ios4 - 如何更改单个按钮的检查图像？

> ID：10204792
> 
> 赞同：0
> 
> 时间：2012-04-18T07:23:54.427
> 
> 标签：ios4, ios5, uibutton, switch-statement

我实现了检查按钮图像的代码。现在我想在单击时更改该按钮中的图像，但每当我单击时，它只显示单个图像。这里我是这样实现的

-

```
(IBAction)name:(id)sender{

currenttagvalue = [sender tag];int count = 0;

switch (currenttagvalue) {
        case 1:

            if (count == 0)
{

 [level1 setImage:[UIImage imageNamed:@"one_time_selected.png"] 

forState:UIControlStateNormal];  

count++'

}

 if (count == 1)

{

 [level1 setImage:[UIImage imageNamed:@"two_time_selected.png"] 

forState:UIControlStateNormal];  

count++'

}

 if (count == 2)
{

 [level1 setImage:[UIImage imageNamed:@"one_time_selected.png"] 

forState:UIControlStateNormal];  

count++'

}

 if (count == 2)
{

 [level1 setImage:[UIImage imageNamed:@"three_time_selected.png"] 

forState:UIControlStateNormal];  

count++'

} 
```

提前感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T08:40:05.983

`count`将值声明为`static`，例如：

```
static int count; 
```

# php - 代码点火器 htaccess

> ID：10204797
> 
> 赞同：1
> 
> 时间：2012-04-18T07:24:23.693
> 
> 标签：php, .htaccess, codeigniter

我在 codeigniter 1.7 上有一个大应用程序，我将其更新到 2.1，但我有一个问题（404 页面未找到）我当前的 htaccess 是：

```
rewriteEngine on
Options +FollowSymLinks

rewriteRule ^admin(.*) index.php/admin$1
rewriteRule ^supervisor/([0-9]+)(.*) index.php/supervisor_$1/$2
rewriteRule ^(login|logoff)(.*) index.php/base/$1$2
rewriteRule ^(files|attachment|meeting|thread|attachments|profile|search|roles|cat)(.*) index.php/moder/$1$2
rewriteRule ^(about|contact|new_majlis|stats)(.*) index.php/page/$1$2
rewriteRule ^(2.2-release-notes)(.*) index.php/page/release_notes 
```

你能帮我么 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T17:21:29.573

首先，应该在您的`application/config/routes.php`文件中完成这样的路由。我建议添加以下条目：

```
$route['supervisor/(:num)/(:any)'] = 'supervisor/$1/$2'; // This also looks hackish
$route['login/(:any)'] = 'base/$1';
$route['logoff/(:any)'] = 'base/$1';

$route['about/(:any)'] = 'page/about/$1';
$route['contact/(:any)'] = 'page/contact/$1';
$route['new_majlis/(:any)'] = 'page/new_majlis/$1';
$route['stats/(:any)'] = 'page/stats/$1';
$route['2.2-release-notes/(:any)'] = 'page/stats/$1'; 
```

我还假设您想要拥有“漂亮”的页面；**/admin**而不是**/index.php/admin**

对于您的`.htaccess`文件，您可以将以上所有内容替换为：

```
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php/$1 [NC,L,QSA] 
```

这将确保 CodeIgniter 正在处理所有请求。

* * *

**对于您的 404 错误：**

樱桃采摘你的`config.php`。很多事情都发生了变化，所以最好使用 vanilla 2.1 版本并用您之前配置的 1.7 版本的变量填充它。这同样适用于您`application/config`文件夹中的其他一些文件。

更改日志对细节非常有用：[http ://codeigniter.com/user_guide/changelog.html](http://codeigniter.com/user_guide/changelog.html)

# php - 用于比较两个逗号分隔值的 Mysql 查询

> ID：10204798
> 
> 赞同：1
> 
> 时间：2012-04-18T07:24:25.107
> 
> 标签：php, mysql

我面临着获得价值的小问题。

在我的数据库中，值为**48,53,40**，我得到的值为**48,40,53**。我想比较两个值并显示输出。两者的价值相同。只是顺序不同。

谁能帮我？？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T08:26:40.083

使用`match-against` `with boolean mode`并记住在列上放置全文索引以使查询快速。

如-

```
select * from temp_new where match(b) against('+48 +53 +40' in boolean mode); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T07:33:01.057

我想你把它们放在一个字符串中。

您可以爆炸字符串，然后使用`in_array()`：

```
<?php
$foo = '48,53,40';
$bar = '48,40,53';

function are_equal($foo, $bar, $separator = ','){
    $foo = explode($separator, $foo);
    $bar = explode($separator, $bar);

    foreach($foo as $number){
        if(!in_array($number, $bar)){
            return FALSE;
        }
    }

    return TRUE;
}

var_dump(are_equal($foo, $bar)); 
```

但是，在这种情况下，数据库重新设计当然是健康的！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T07:52:53.277

您应该使用 array_diff 而不是自己发明。

[http://php.net/manual/en/function.array-diff.php](http://php.net/manual/en/function.array-diff.php)

# cocoa - animationDidStop:finished: 未调用

> ID：10204801
> 
> 赞同：0
> 
> 时间：2012-04-18T07:24:39.413
> 
> 标签：cocoa, core-animation, caanimation

我正在尝试使用顶部的滑动动画将视图替换为另一个视图。我有点遵循[http://gentlebytes.com/2011/09/auto-layout-in-lion/](http://gentlebytes.com/2011/09/auto-layout-in-lion/)中发布的指南，但没有 NSConstraints。

不幸的是，我的动画的委托方法 animationDidStop:finished: 在动画结束时没有被调用。

这是我的代码：

```
- (void)slideViewControllerFromTop:(NSViewController *)controller {
[self replacePlaceholderViewWith:controller block:^(NSView *placeholder, NSView *currentView, NSView *newView) {
    NSRect initialFrameNewView = NSMakeRect(placeholder.bounds.origin.x, 2*placeholder.bounds.size.height - newView.frame.size.height - DISTANCE_FROM_TOP, placeholder.bounds.size.width, newView.frame.size.height);
    [newView setFrame:initialFrameNewView];
    NSRect finalFrameNewView = NSMakeRect(placeholder.bounds.origin.x, placeholder.bounds.size.height - newView.frame.size.height - DISTANCE_FROM_TOP, 0.91*placeholder.bounds.size.width, newView.frame.size.height);

    NSRect finalFrameCurrentView = NSMakeRect(currentView.frame.origin.x, currentView.frame.origin.y-placeholder.bounds.size.height, currentView.frame.size.width, currentView.frame.size.height);

    CABasicAnimation *animation = [CABasicAnimation animation];
    animation.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseInEaseOut];
    [animation setDelegate:self];
    [animation setDuration:0.5];
    animation.removedOnCompletion = YES;

    [newView setAnimations:[NSDictionary dictionaryWithObject:animation forKey:@"frame"]];
    [currentView setAnimations:[NSDictionary dictionaryWithObject:animation forKey:@"frame"]];

    [placeholder addSubview:newView];
    [NSAnimationContext beginGrouping];
    [[newView animator] setFrame:finalFrameNewView];
    [[currentView animator] setFrame:finalFrameCurrentView];
    [NSAnimationContext endGrouping];
}];
}

- (void)replacePlaceholderViewWith:(NSViewController *)controller block:(GBPlaceholderReplaceBlock)handler {
    if (controller == self.currentViewController) return;
    self.previousViewController = self.currentViewController;
    self.currentViewController = controller;
    NSView *placeholderView = self.contentView;
    NSView *currentView = self.contentView.subviews.lastObject;
    NSView *newView = self.currentViewController.view;
    handler(placeholderView, currentView, newView);
}

- (void)animationDidStop:(CABasicAnimation *)anim finished:(BOOL)flag {
    if (!flag || self.contentView.subviews.count < 2) return;
    [[self.contentView.subviews objectAtIndex:0] removeFromSuperview];
    self.previousViewController = nil;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T07:37:10.550

尝试替换这两个

```
[newView setAnimations:[NSDictionary dictionaryWithObject:animation forKey:@"frame"]];
[currentView setAnimations:[NSDictionary dictionaryWithObject:animation forKey:@"frame"]]; 
```

到

```
[newView.layer addAnimation:animation forKey:@"frame"];
[currentView.layer addAnimation:animation forKey:@"frame"]; 
```

并且不要忘记`#import <QuartzCore/QuartzCore.h>`在您的类文件顶部添加。

# javascript - 如何在浏览器位置更改时保留 HTML 元素

> ID：10204804
> 
> 赞同：0
> 
> 时间：2012-04-18T07:24:47.940
> 
> 标签：javascript, jquery, html, xhtml

有没有办法在页面更改位置时保留一些**HTML 元素的**. 就像一个`div`不会被*重新渲染*但保持它的状态。

您可以在**Facebook 聊天**中找到类似的示例，您可以看到聊天窗口不会更改其位置或`InnerHtml`当您导航到另一个页面时。

**PS：我不知道从哪里开始，所以任何文档都会受到赞赏。如果解决方案是XHTML**而不是*HTML5*，那就太好了

 ** * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-18T07:33:16.280

更改时`window.location`，页面会自动完全重新渲染。所以，从这个角度来看，答案是否定的。但是，可以通过使用来获得这种效果`AJAX`。使用 ajax 在页面不重新加载或更改位置时向服务器发出请求（`window.location`始终相同）。这是一个很好的链接`AJAX`：

[http://www.w3schools.com/ajax/default.asp](http://www.w3schools.com/ajax/default.asp)

如果您仍然希望页面更改其位置，在您发出 ajax 请求并更新页面上的内容后，您可以使用 javascript 的 history.pushState 函数。但是你必须找到一种方法让它跨浏览器（又名让它在 IE 中工作）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-18T07:35:47.277

我不确切知道 facebook 聊天是如何工作的，但我知道所有聊天消息都存储在数据库中，因此您可以稍后通过消息访问它们。

我的假设是设置了一个 Session 变量，让 facebook 的 UI 知道你打开了哪些聊天，或者它也可能存储在数据库中。无论哪种情况，您都必须使用一些外部脚本才能执行此操作。为方便起见，假设您将使用 PHP，并将数据存储在 SESSION 变量中。

```
/* Storing the variable */
$users = array('user123', 'user456', 'user789');
$_SESSION['chat_windows_open'] = $users;
/* Retrieving the values */
foreach($_SESSION['chat_windows_open'] as $chat) {
/* Use $chat to get the username, query the DB for 
the message content, and echo it in whatever form you
wish. */
} 
```*

# error-handling - asp.net MVC4 中的错误处理 - IIS7.5

> ID：10204814
> 
> 赞同：0
> 
> 时间：2012-04-18T07:25:29.867
> 
> 标签：error-handling, elmah, asp.net-mvc-4

我正在使用以下代码将用户重定向到我的 asp.net mvc4 应用程序中的错误页面，并使用 ELMAH 将错误作为电子邮件发送：

```
protected void Application_Error()
        {
            Exception lastException = Server.GetLastError();
            //add user specific details
            lastException.Data["MachineName"] = Environment.MachineName;
            lastException.Data["ClientIP"] = Request.UserHostAddress.ToString();
            if (Request.ServerVariables["REMOTE_HOST"] != null)
            {
                System.Net.IPHostEntry host = new System.Net.IPHostEntry();
                host = System.Net.Dns.GetHostEntry(Request.ServerVariables["REMOTE_HOST"]);
                lastException.Data["ClientMachineName"] = host.HostName;
            }

            IController errorController;

            HttpException httpException = lastException as HttpException;
            RouteData routeData = new RouteData();
            //Try catch the error, as NLog throws error in Release mode
            System.Diagnostics.EventLog _eventLog = new System.Diagnostics.EventLog("Application", Environment.MachineName, ConfigurationManager.AppSettings[Constants.EventLogSource]);
            _eventLog.WriteEntry(lastException.ToString(), System.Diagnostics.EventLogEntryType.Error);

            //Possible reason for null is the the server error may not be a proper http exception
            if (httpException == null)
            {
                //Call target Controller
                errorController = new ErrorController();
                routeData.Values.Add("controller","Error");
                routeData.Values.Add("action", "Index");
                Response.Clear();
            }
            else
            //It's an Http Exception, Let's handle it.   
            {
                switch (httpException.GetHttpCode())
                {
                    case 404:
                        //Page not found.
                        //Call target Controller
                        errorController = new UserController();
                        routeData.Values.Add("controller", "User");
                        routeData.Values.Add("action", "PageNotFound");
                        break;
                    case 302:
                        //Page Temporarily Moved
                        //Call target Controller
                        errorController = new UserController();
                        routeData.Values.Add("controller", "User");
                        routeData.Values.Add("action", "PageNotFound");
                        break;
                    case 500:
                        //Server error.
                        //Call target Controller
                        errorController = new ErrorController();
                        routeData.Values.Add("controller","Error");
                        routeData.Values.Add("action", "Index");
                        break;
                    //Here you can handle Views to other error codes.           
                    //I choose to redirect to Signin
                    default:
                        //Call target Controller
                        errorController = new ErrorController();
                        routeData.Values.Add("controller","Error");
                        routeData.Values.Add("action", "Index");
                        break;
                }
            }
            //Pass exception details to the target error View.  
            routeData.Values.Add("error", lastException);
            //Clear the error on server.  
            Server.ClearError();
            //Call target Controller and pass the routeData.  
            errorController.Execute(new RequestContext(new HttpContextWrapper(Context), routeData));
        } 
```

它在 LOCAL 中完美返回错误，但是当从服务器（Windows Server 2008 R2，IIS 7.5）时，它在 ELMAH 发送的电子邮件中返回 page not found 错误。

**本地错误：（这是完美的）**

```
System.Web.HttpCompileException: c:\Projects\MVC4\Views\Home\Demo.cshtml(15): error CS0103: The name 'ResolveUrl' does not exist in the current context

Generated: Wed, 18 Apr 2012 07:21:05 GMT 
```

**服务器错误：（这是不正确的）**

```
System.InvalidOperationException: The view 'Error' or its master was not found or no view engine supports the searched locations. The following locations were searched: ~/Views/Home/Error.aspx ~/Views/Home/Error.ascx ~/Views/Shared/Error.aspx ~/Views/Shared/Error.ascx ~/Views/Home/Error.cshtml ~/Views/Home/Error.vbhtml ~/Views/Shared/Error.cshtml ~/Views/Shared/Error.vbhtml

Generated: Wed, 18 Apr 2012 07:19:11 GMT

System.InvalidOperationException: The view 'Error' or its master was not found or no view engine supports the searched locations. The following locations were searched:
~/Views/Home/Error.aspx
~/Views/Home/Error.ascx
~/Views/Shared/Error.aspx
~/Views/Shared/Error.ascx
~/Views/Home/Error.cshtml
~/Views/Home/Error.vbhtml
~/Views/Shared/Error.cshtml
~/Views/Shared/Error.vbhtml
   at System.Web.Mvc.ViewResult.FindView(ControllerContext context)
   at System.Web.Mvc.ViewResultBase.ExecuteResult(ControllerContext context)
   at System.Web.Mvc.ControllerActionInvoker.InvokeActionResult(ControllerContext controllerContext, ActionResult actionResult)
   at System.Web.Mvc.ControllerActionInvoker.InvokeAction(ControllerContext controllerContext, String actionName)
   at System.Web.Mvc.Controller.ExecuteCore()
   at System.Web.Mvc.ControllerBase.Execute(RequestContext requestContext) 
```

关于这个实现有什么问题的任何建议？

# c++ - 强制 makefile 构建源两次

> ID：10204817
> 
> 赞同：0
> 
> 时间：2012-04-18T07:25:44.133
> 
> 标签：c++, makefile

我有以下生成文件：

```
all: a.out b.out
.PHONY: gen_hdr1
gen_hdr1:
    #call script 1 that generates x.h
    rm a.o #try to force rebuild of a.cpp

.PHONY: gen_hdr2
gen_hdr2:
    #call script 2 that generates x.h
    rm a.o #try to force rebuild of a.cpp

b.out: gen_hdr2 a.o
    g++ -o b.out a.o

a.out: gen_hdr1 a.o
    g++ -o a.out a.o
*.o : *.cpp
    g++ -c $< -o $@ 
```

a.cpp 包含 xh

我想做的事：

1.  删除 ao 如果存在
2.  为 App A 生成 xh
3.  编译.cpp
4.  构建应用程序 A
5.  删除 ao 如果存在
6.  为 App B 生成 xh
7.  再次编译 a.cpp
8.  构建应用程序 B

运行makefile的输出是：

```
#call script 1 that generates x.h
rm -f a.o #try to force rebuild of a.cpp
g++    -c -o a.o a.cpp
g++ -o a.out a.o
#call script 2 that generates x.h
rm -f a.o #try to force rebuild of a.cpp
g++ -o b.out a.o
g++: a.o: No such file or directory
g++: no input files
make: *** [b.out] Error 1 
```

基本上，在构建 App B 时找不到 ao。如何强制 make 系统重建它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T07:50:51.580

解决这类问题的好方法是使用单独的构建对象文件夹，每个目标多一个子文件夹。

因此，您将拥有类似的东西：

```
build/first/a.o: src/a.cpp gen/a.h
    # Do you stuff in here
gen/a.h:
    # Generate you .h file if needed

build/second/a.o: src/a.cpp gen/a.h
    # Same thing 
```

使用此解决方案，您将在 build 文件夹中拥有所有构建对象，因此 clean 命令更简单一些：

```
clean:
    rm -rf build/*
    rm -rf gen/*
    rm -rf bin/* 
```

您应该确保的唯一一件事是该目录在构建之前存在，但这不是一项艰巨的工作:)

如果你必须生成两个版本的啊，你可以使用相同的设计（gen/first & gen/second 文件夹）。

希望它有帮助，如果我错过了什么，请告诉我

# for-loop - 我的 Bat 文件中奇怪的 For-In-Do 结果

> ID：10204818
> 
> 赞同：1
> 
> 时间：2012-04-18T07:25:45.673
> 
> 标签：for-loop, batch-file, set

我想知道为什么 _STR 没有设置为新的 %%A？谢谢。

```
FOR /f "tokens=1 delims=" %%A IN ('dir /b C:\test') DO (
    ECHO %%A
    SET _STR=%%A
    ECHO TEST : %_STR%
REM IF "%%A:~-1"=="/" ECHO %%A  
) 
```

我的输出看起来像这样......

file1.txt
测试：文件夹
3 文件 2.txt
测试 ：文件
夹3 文件 夹1 测试：文件夹 3 文件夹 2 测试：文件夹 3 文件夹 3 测试 ：文件 夹3

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T07:35:20.993

_STR 将设置为新的 %%A，但您不能以这种方式回显它。
因为在括号块中，所有百分比变量都在解析时展开，在执行开始之前。
为避免这种情况，您可以使用延迟扩展或 CALL 技巧。

```
Setlocal EnableDelayedExpansion
FOR /f "tokens=1 delims=" %%A IN ('dir /b C:\test') DO (
    ECHO %%A
    SET _STR=%%A
    ECHO TEST : !_STR!
    call ECHO TEST2 : %%_STR%%
) 
```

# javascript - 在对象创建时添加事件处理程序不起作用？

> ID：10204820
> 
> 赞同：1
> 
> 时间：2012-04-18T07:25:53.677
> 
> 标签：javascript, jquery, javascript-objects, dom-events

我有以下内容：

```
MycheckModal.__construct = function(element){
this.blackout = $("<div class='modal-backdrop'></div>")
    .attr("style", 'left:0px;top:0px;position:absolute;background:black')
    .css("opacity", "0.5")
    .css("height", $(document).height() + 'px')
    .css("width", $(document).width() + 'px')
    .css("z-index", "5000");

this.blackout.live("click", function(){
    MycheckModal.__destruct();
});

}

MycheckModal.__destruct = function(){
    this.element = null;
    this.url = null;
    this.blackout.fadeOut(150, function(){ 
        MycheckModal.blackout.remove();
        MycheckModal.blackout = null;
        } );
    this.modal.fadeOut(150, function(){ 
        MycheckModal.modal.remove();
        MycheckModal.modal = null;
        } );    
} 
```

这是一个更大的代码，但你明白了。无论如何 - 事件处理程序没有注册，但是 - 当我显式注册它时 - 在构造函数之外 - 它工作正常。

有什么想法我需要做什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T07:50:45.740

我不知道为什么，但尝试使用“点击”而不是“直播”。

```
this.blackout.click(function() {
    MycheckModal.__destruct();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T07:51:36.077

```
this.blackout.on("click", function(){
    MycheckModal.__destruct();
}); 
```

# excel - 在 Google 文档的列中重复公式

> ID：10204822
> 
> 赞同：0
> 
> 时间：2012-04-18T07:25:55.487
> 
> 标签：excel, spreadsheet, google-docs

我已经为此挣扎了很长时间。我需要在列的每个单元格中输入相同的公式。但是，它会在拖动或复制时更改公式。例如 =J2 变为 =J3 =J4 等等。我只需要在每个单元格中设置 =J2。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T07:30:30.977

尝试`=$J$2`代替`=J2`

$ 符号保持引用原样，即在拖动时不会更改它。

HTH。

# iphone - UIPickerView 的自定义外观；

> ID：10204825
> 
> 赞同：0
> 
> 时间：2012-04-18T07:26:05.770
> 
> 标签：iphone, uipickerview, uipickerviewcontroller

我想要一个 UIPickerView 在下面的设计中；

[http://dl.dropbox.com/u/53051470/Screen%20shot%202012-04-18%20at%2012.02.36%20PM.png](http://dl.dropbox.com/u/53051470/Screen%20shot%202012-04-18%20at%2012.02.36%20PM.png) *（对不起，作为新用户，不能在这里粘贴图片）*

我也阅读了关于同一主题的其他问题，并尝试实现 pickerView:viewForRow:forComponent:reusingView: 方法，但没有得到实际结果；

要求就像选择的值应该显示在带有复选标记图像的绿色条中，并以白色显示；此外，当用户开始滚动选择器时，进入绿色条内的任何值都应该变成绿色，离开绿色条的任何值都应该变成黑色；

有什么建议吗？

亲切的问候;

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T11:17:04.240

UIPickerView 多选行为，无需在pickerview前面添加其他视图，使用：[https ://github.com/alexleutgoeb/ALPickerView](https://github.com/alexleutgoeb/ALPickerView)

高度赞赏改进！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T08:07:24.527

你应该使用该方法

```
- (UIView *)pickerView:(UIPickerView *)pickerView viewForRow:(NSInteger)row forComponent:(NSInteger)component reusingView:(UIView *)view 
```

并决定哪一行是突出显示的

```
- (UIView *)pickerView:(UIPickerView *)pickerView viewForRow:(NSInteger)row forComponent:(NSInteger)component reusingView:(UIView *)view
{   
        // i use a UILabel instead of your **custom UIView** , you may add a tick in you custom view

        UILabel *testRow = view?(UILabel *)view:[[[UILabel alloc] initWithFrame:CGRectMake(0,0, 140, 40)] autorelease];
        testRow.font = [UIFont fontWithName:[testArray objectAtIndex:row] size:16];
        testRow.text = [fontsArray objectAtIndex:row];
        testRow.backgroundColor = [UIColor clearColor];

        if ( row == selectedRow )
        {
            testRow.backgroundColor = [UIColor greenColor];
        }

        return testRow;
} 
```

不要忘记将 showSelectionIndicator 设置为 NO

```
pickView.showsSelectionIndicator = NO; 
```

# java - 尽可能晚地或在它们所属的最近的大括号处声明局部变量？

> ID：10204828
> 
> 赞同：6
> 
> 时间：2012-04-18T07:26:26.307
> 
> 标签：java, android, oop, variables, methods

我正在为我的组织制定一些编程实践标准。这样做我遇到了“这个问题的标题”这个问题

有些人认为最好尽可能晚地声明变量，有些人认为将它们放在方法起始大括号的顶部是件好事。

Oracle Standard 还说要尽早声明它们。我也赞成在它们所属的最接近的花括号中声明它们。

担忧是

1.  代码可读性

2.  表现

3.  不易出错

欢迎任何评论。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-18T08:48:37.147

这就是麦康奈尔在他的必读书籍 Code Complete 2 中所说的：

> *理想情况下，声明和定义每个变量靠近它的使用位置。声明建立变量的类型。定义为变量分配一个特定的值。在支持它的语言（例如 C++ 和 Java）中，变量的声明和定义应靠近它们首次使用的位置。*

他还建议让变量保持活动的时间尽可能短，并尽量减少范围。

对我来说重要的是遵循命名约定（Sun 的 Java 代码约定被广泛使用）。至于他们首先在哪里声明，出于性能原因，我会尽可能延迟声明（声明一个您可能不使用的 var 有点浪费）。除非您事先知道它肯定会被使用，否则您可以将它与其他 var 分组以提高可读性。我认为这就是[JCC 所说的](http://www.oracle.com/technetwork/java/javase/documentation/codeconventions-141270.html#16817)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T07:36:23.017

对于代码代码可读性，我发现在块的开头声明变量是最佳选择。
当通过代码时，您总是知道在哪里查找声明，而不必在代码行之间查找。在查看方法时，最好先查看声明的变量，然后再查看代码。我认为它就像一本食谱中的食谱，您将所需的成分与食谱说明分开列出。

至于性能，我看不出这会有什么不同。虽然延迟声明可能会通过仅在块末尾需要时创建变量来节省一点内存，但您将使用与在块开头声明时相同的内存量。

我会说容易出错的原因与可读性相同。

在所需的最小范围内声明并在块的开头声明。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T08:03:35.670

我认为“代码可读性”是这里唯一重要的一点。如果变量声明得更接近它们的使用位置，那么代码肯定更易读。

但是，有时，为了防止新程序员在语言之间转换时出现“错误”，可能会采用特定风格的编码方法。例如，JavaScript 具有功能范围，而 Java 具有块范围。如果 Java 程序员不了解 JavaScript 的功能范围，他可能会在 JavaScript 中遇到问题。因此，对于 JavaScript，为了避免潜在的错误，建议在函数/方法的开头声明所有内容。

就像我上面提到的，“性能”不应该是一个问题。但是，如果您选择在更接近使用它们的位置声明变量，它可能有助于减少变量的声明和初始化成本。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T08:43:52.690

好问题Javanator，根据我的分析

代码可读性：

在方法启动中声明变量的好习惯，因为易于维护，并且更少混淆。

表现：

情况1：

如果我们在方法开头声明变量并且方法有数百个语句，我们最后需要 10 个变量，然后 50 个语句不必要地为这些变量占用内存。

如果我们在方法中需要 20 个变量并且我们在开头声明了，如果我们在最开始的语句中遇到任何异常，就会不必要地占用内存。

案例2：

如果我们在需要的地方声明变量，它会提供更多的性能。

# mysql - MySQL选择引用或不引用的数字

> ID：10204829
> 
> 赞同：0
> 
> 时间：2012-04-18T07:26:31.837
> 
> 标签：mysql, select, quotes

编写 MySQL 选择查询的正确方法是什么，例如

```
SELECT * FROM table users WHERE status = 1 AND salary = 2000.00 
```

或者

```
SELECT * FROM table users WHERE status = '1' AND salary = '2000.00' 
```

1.  当我引用整数或小数时，它应该有引号吗？
2.  他们在 phpMyAdmin 中使用的这个引号字符是有什么特殊用途还是只是装饰性的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T07:31:09.253

1.  如果列是 INTEGER，则不必在整数周围加上引号。MySQL 明白这一点。然而，**如果你这样做并不重要**：MySQL 可以自动在数据类型之间转换，并且这种转换的额外成本可以忽略不计。（与例如在具有不同数据类型的列上连接两个表时不同，其中需要对数百万行进行转换 - 这很昂贵）。

2.  phpMyAdmin 在模式/表/列名称周围放置反引号 ` 以避免混淆。例如，一个名为的表`my.table`需要这些反引号才能访问，否则 MySQL 不知道是否`my`是模式和`table`表名。

    由于这个确切的原因`my.table`，表名的选择是不明智的——某个地方的某个人一定会犯错。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T07:30:18.370

取决于数据类型`salary`。如果它按应有的方式存储，那么没有引号就可以了。

否则（糟糕的设计或其他）引号是必要的，以避免隐式转换（这是不好的）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T07:34:56.050

如果列的数据类型是 char 或 varchar 那么你应该使用引号让 MySQL 明白它是字符类型。对于整数、数字，无需使用引号。如果薪水是数字类型，则不需要引号。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-18T07:48:34.300

仅当值不是数字时才需要引号，因此对于字符串、日期等，您需要引用。

并且 phpmyadmin 添加了反引号，以便像我妈妈这样的用户一直添加它们来打扰我

# java - 如何在java中进行连接池？

> ID：10204832
> 
> 赞同：4
> 
> 时间：2012-04-18T07:26:44.223
> 
> 标签：java, oracle, servlets, jdbc, connection-pooling

我试图理解`connection pooling in java`，我`jsp, servlet and tomcat 6 server`在我的应用程序中使用。我在 a 中编写了以下代码`java class dbconnection.java`：

我在 Windows Xp OS 中使用类型 4 jdbc 与 oracle 10g EE 连接

```
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.SQLException;

    public class dbconnection {   
     public Connection con = null;    
      public Connection getConnection() throws Exception, SQLException
       {
         try
           {
          Class.forName("oracle.jdbc.driver.OracleDriver");
           con=DriverManager.getConnection("jdbc:oracle:thin:@localhost:1521:abc","abc", "abc");           
           }
           catch(Exception e)
           {          
           }
        return con;
        }
    public void removeConnection() throws SQLException
  {
    con.close();
  }
 } 
```

然后我`connection`在 servlet 中检索如下：

```
try{
 dbconnection db= new dbconnection();

 Connection con=db.getConnection();
 }
 catch(Exception e){
 } 
finally{
 db.removeConnection();//removes connection
} 
```

是否`connection pooling`需要某些配置`tomcat server`或其他什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-05T10:09:02.970

连接**池**通过提前执行创建连接的工作来运行。对于 JDBC 连接池，在应用程序服务器启动时会创建一个连接对象池。客户端可以访问连接池中的连接对象，并在数据库工作完成后将对象返回到池中。

上下文.xml

```
 <Resource name="jdbc/TestDB" auth="Container" type="javax.sql.DataSource" 
maxActive="100" maxIdle="30" maxWait="10000" username="root" password="" 
driverClassName="com.mysql.jdbc.Driver"               
url="jdbc:mysql://localhost:3306/cdcol"/> 
```

//这应该添加到服务器上下文，xml文件中。例如，如果您使用的是 apache 服务器，则 context.xml 将在 C:\apache-tomcat-6.0.26\conf\Context.xml 中找到

web.xml

```
 <resource-ref>
      <description>DB Connection</description>
      <res-ref-name>jdbc/TestDB</res-ref-name>
      <res-type>javax.sql.DataSource</res-type>
      <res-auth>Container</res-auth>
  </resource-ref> 
```

//这个应该在本地项目的web.xml中添加。（不在服务器的 web.xml 中）。

```
Context ctx=new InitialContext();
          Context envContext = (Context)ctx.lookup("java:comp/env");
          DataSource ds=(DataSource)envContext.lookup("jdbc/TestDB");//TestDB is the Database Name
          con=ds.getConnection();
          stmt = con.createStatement(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-18T07:30:47.537

您可以获取第三方库，也可以使用 Java EE 容器（例如，JBoss 或 WebSphere）为您提供的连接池。

为此，您需要配置和使用 JNDI 数据源。

以下是 Tomcat 的详细信息：

*   [http://people.apache.org/~fhanik/jdbc-pool/jdbc-pool.html](http://people.apache.org/~fhanik/jdbc-pool/jdbc-pool.html)

*   [http://www.tomcatexpert.com/blog/2012/01/24/using-tomcat-7-jdbc-connection-pool-production](http://www.tomcatexpert.com/blog/2012/01/24/using-tomcat-7-jdbc-connection-pool-production)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T07:31:44.520

连接池是所有主要 Web 和应用程序服务器中可用的功能。您可以找到使用 Tomcat 进行配置的简单示例。[Tomcat 连接池](http://onjava.com/onjava/2006/04/19/database-connection-pooling-with-tomcat.html)

但是，如果您想编写自己的连接池，那么可以编写一些库。[Apache DBCP](http://commons.apache.org/dbcp/)

# asp.net-mvc - 业务验证与层中的 DataAnnotations 并排

> ID：10204833
> 
> 赞同：1
> 
> 时间：2012-04-18T07:26:45.393
> 
> 标签：asp.net-mvc, asp.net-mvc-3, validation, data-annotations

我有一个采用 3 层方法的 MVC 3 应用程序。我的数据层包含 edmx 文件和 t4 模板，每次我的 edmx 文件更改时，它都会使用基本的 DataAnnotations 生成我的实体。

此外，我正在利用以下内容来允许对现有实体和属性进行额外验证。这个允许我将自动生成的 DataAnnotations 与自己的书面注释结合起来。

```
[MetadataType(typeof (PersonMetaData))]
public partial class Person
{
}

public class PersonMetaData
{
    [RegularExpression(@"(\w|\.)+@(\w|\.)+", ErrorMessage = "Email is invalid")] public string Name;
} 
```

更进一步，我发现以下文章[http://www.howmvcworks.net/OnModelsAndViewModels/ExtendingTheModelBinderForEnhancedValidation](http://www.howmvcworks.net/OnModelsAndViewModels/ExtendingTheModelBinderForEnhancedValidation)

这允许我使用现有的 ASP.NET MVC 逻辑并在需要时实现自己的验证方法。这个例子对我有用。

不幸的是，因为我有一个 3 层应用程序并且想要在业务逻辑（而不是在数据层）中验证我的实体，所以如果不创建循环依赖项，我就无法将对业务逻辑的任何调用放入 Validate 方法中。

有没有更好的方法来组合自动生成的 DataAnnotations、自己的验证扩展、业务逻辑中的验证和 IBindingValidatable 方法？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T17:57:16.090

您应该在业务层中保留业务逻辑规则产生的验证，并且只在 UI 层中包含数据输入验证。

因此，例如验证电子邮件地址条目，根据某些正则表达式属于 UI 层，但确保电子邮件地址对于您的系统是唯一的，应该在业务逻辑中完成。

我希望这有帮助。

# android - 从 ListActivity 更改 ListView 行的背景颜色

> ID：10204834
> 
> 赞同：1
> 
> 时间：2012-04-18T07:26:45.673
> 
> 标签：android, listview, background, row

我有一个列表活动，我希望其中一个选项菜单项导致我的 ListView 中的第一行更改其背景颜色。我的代码不起作用，我怀疑这是因为我不知道 ListView.getChildAt() 返回的确切内容。我如何才能准确地确定该方法返回的列表行布局的哪些元素？

我的 ListActivity 中的相关代码：

```
mItemsAdapter = new SimpleCursorAdapter(this, R.layout.items_row, mItemsCursor, from, to, TAG);
setListAdapter(mItemsAdapter);

View newView = mListView.getChildAt(0);
newView.setBackgroundColor(getResources().getColor(R.color.some_color)); 
```

`items_row.xml`是一个包含两个 TextView 和一个 ImageView 的 LinearLayout，并且`to`是其中一个 TextView 的资源 ID。ListView 按原样显示光标信息，但由于`setBackgroundColor`某种原因，该行不执行任何操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T07:40:48.600

这将包含您想知道的有关 Android 中列表视图的所有信息。如果列表视图项中有 UI 对象，则可能需要实现持有者模式。

[http://www.vogella.com/articles/AndroidListView/article.html](http://www.vogella.com/articles/AndroidListView/article.html)

支架图案朝向中间。

干杯

# java - getJSON JavaScript 函数返回未定义的对象

> ID：10204837
> 
> 赞同：1
> 
> 时间：2012-04-18T07:26:48.793
> 
> 标签：java, javascript, jquery, json

这是我的**JavaScript**代码：

```
// action when item file is clicked
$("li span.file").click(function(){

    // get the ID
    console.log($(this).attr('id'));

    $.getJSON('BomItemToJSON', function(data) {
        $.each(data, function(i, item) {
            var id = item.id;
            var description = item.description;

            formObject = document.forms['itemForm'];
            formObject.elements['itemId'].value = id;
            formObject.elements['itemDescription'].value = description;
        });
    });

}); 
```

这是我的**servlet**的一部分：

```
protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {

        utx.begin();

        BomHandling bh = new BomHandling(em, utx);

        BomItem item = bh.getBomItem(63788);
        Gson gson = new Gson();
        String json = gson.toJson(item);

        System.out.println("Json: " + json);

        response.setContentType("application/json");
        response.setCharacterEncoding("UTF-8");
        response.getWriter().write(json);
        utx.commit();
    } 
```

它返回：

```
Json: {"itemId":63788,"modules":[],"deprecated":false,"partNumber":"SG-XPCIE8SAS-E-Z","description":"4 GB Memory Expansion (2 x 2GB) low-profile FBDIMMs, Gen 2, 1.8 V, for Sun SPARC Enterprise, RoHS 6\. (For Factory Integration Only)","quantity":0,"unitPriceDollar":"$350.00","discount":"10%","totalDollar":"$0.00","itemClass":"Server","itemType":"HW","vendor":"Sun"} 
```

从控制台日志我知道这个 servlet 被称为：

```
[09:22:11.633] GET http://localhost:8084/xxx/BomItemToJSON [HTTP/1.1 200 OK 80ms] 
```

这是我的**表格**：

```
<div id="itemdetail">
    <form name="itemForm">
        ID: <input type="text" name="itemId" value="" size="100"></input>
        Description: <input type="text" name="itemDescription" value="" size="100"></input>
    </form>
</div> 
```

如何将 JSON 对象中的 itemId 和描述插入到我的表单中？现在它总是'未定义'。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T07:31:42.443

你不需要每个。您的 JSON 只是一个对象，而不是一个数组。

我认为你的代码应该是这样的：

```
// action when item file is clicked
$("li span.file").click(function(){

    // get the ID
    console.log($(this).attr('id'));

    $.getJSON('BomItemToJSON', function(data) {
        alert('entered getJSON()');
        var id = data.itemId;
        var description = data.description;

        alert('description: ' + description);

        formObject = document.forms['itemForm'];
        formObject.elements['itemId'].value = id;
        formObject.elements['itemDescription'].value = description;

        alert('done with javascript');
    });

}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T07:31:49.993

JSON 对象应包含在括号内：`{ Json: { ... } }` 如果您尝试使用[jsonLint](http://jsonlint.com/)验证您的 json，您会注意到错误

# android - How to Call a function when click a tab of tabActivity insted of call an Activity

> ID：10204840
> 
> 赞同：1
> 
> 时间：2012-04-18T07:27:09.620
> 
> 标签：android, tabactivity

Sorry for my English. Much to learn.

I have a TabActivity in my app. I would like that one of the buttons show a context menu when it is clicked.

I managed to call a method on click one of the tabs. But in the same time the tab calls and activity. This one closes the current one which it doesn't make good impression.

An example:

Adding the tabs to the tabhost

```
 intent = new Intent().setClass(this, NewsActivity.class).setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
    spec = tabHost.newTabSpec(TAB_NEWS).setIndicator(getString(R.string.tab_news), res.getDrawable(R.drawable.ic_tab_news)).setContent(intent);
    tabHost.addTab(spec); 
```

If I don't pass and intent gives error.

```
 intent = new Intent().setClass(this, NewsActivity.class).setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
    spec = tabHost.newTabSpec(TAB_NEWS).setIndicator(getString(R.string.tab_news), res.getDrawable(R.drawable.ic_tab_news)).setContent(intent);
    tabHost.addTab(spec); 
```

To Call the method I use the next listener on the tab

```
tabHost.getChildAt(1).setOnTouchListener(new OnTouchListener() {

        @Override
        public boolean onTouch(View v, MotionEvent event) {

            //Somethig to do
            e
            return false;
        }
    }); 
```

Thank you very much.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T07:49:35.947

In the tab's OnTouchListener, first check if the touch event is a click and not just any touch. If you don't want the tab to change when you click it, return true in onTouch. Example:

```
tabHost.getChildAt(1).setOnTouchListener(new OnTouchListener() {

        @Override
        public boolean onTouch(View v, MotionEvent event) {
            int action = event.getAction();

            if(action == MotionEvent.ACTION_UP)
            {
                //Something to do

                return true; // do this if you dont want the tab to change
            }
            return false;
        }
    }); 
```

# c# - 如何为 C# 项目模板的每个实例生成唯一 ID？

> ID：10204841
> 
> 赞同：0
> 
> 时间：2012-04-18T07:27:14.280
> 
> 标签：c#, .net, visual-studio, guid

我想为 Visual Studio 开发一个 C# 模板。我需要为使用此模板生成的每个项目分配不同的 GUID（对于同一项目的多个构建，它应该保持相同）。我相信已经有一些机制可以做到这一点（[assembly: Guid] 属性或我不知道的项目 guid）。那么正确的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T19:36:26.817

导航到 VS 安装目录，然后深入到 Common7\IDE\ProjectTemplates\CSharp\Windows\1033\ClassLibrary.zip。您将在那里找到 assemblyinfo.cs 的模板版本。将其复制到您自己的模板 .zip 文件中。请注意，1033 是英文，它可能与您的代码页不同。

文件中的相关行是

```
 [assembly: Guid("$guid1$")] 
```

当您从模板创建项目时，IDE 会用适当的替换替换 $dollars$ 之间的文件部分。模板参数在[此处记录](http://msdn.microsoft.com/en-us/library/eehb4faa%28v=vs.100%29.aspx)。

# c# - SqlNotificationEvent 多次通知即使是在数据库中的单个插入

> ID：10204847
> 
> 赞同：0
> 
> 时间：2012-04-18T07:27:53.537
> 
> 标签：c#, sql-server, performance, sqlcachedependency

`SqlNotificationEvent`多次通知即使是在数据库中的单个插入。

即使对于表中的单个插入/更新/删除，事件也会多次通知`e.Type == SqlNotificationType.Change`，任何人都可以帮助解释为什么会发生这种情况。对于表中的单个更改，它应该只通知一次。

```
static class Program
{
    private static string mStarterConnectionString = "Data Source=localhost;Database=SqlDependencyTest;Persist Security Info=false;Integrated Security=false;User Id=startUser;Password=startUser";
    private static string mSubscriberConnectionString = "Data Source=localhost;Database=SqlDependencyTest;Persist Security Info=false;Integrated Security=false;User Id=subscribeUser;Password=subscribeUser";
    public const string CACHE_KEY = "APPCACHEKEY";

    /// <summary>
    /// The main entry point for the application.
    /// </summary>
    [STAThread]
    static void Main()
    {
        Application.EnableVisualStyles();
        Application.SetCompatibleTextRenderingDefault(false);

        // Starting the listener infrastructure...
        SqlDependency.Start(mStarterConnectionString);

        // Registering for changes... 
        RegisterForChanges();

        Application.Run(new SqlCache());

        // Quitting...
        SqlDependency.Stop(mStarterConnectionString);
    }

    public static DataTable RegisterForChanges()
    {
        DataTable dataTable = new DataTable();

        // Connecting to the database using our subscriber connection string and
        // waiting for changes...
        SqlConnection oConnection = new SqlConnection(mSubscriberConnectionString);
        oConnection.Open();
        try
        {
            using (SqlCommand oCommand = new SqlCommand("dbo.GetUsers", oConnection))
            //using (SqlCommand oCommand = new SqlCommand("SELECT ID, Name FROM dbo.Users", oConnection))
            {
                oCommand.CommandType = CommandType.StoredProcedure;
                SqlDependency oDependency = new SqlDependency(oCommand);
                oDependency.OnChange += new OnChangeEventHandler(OnNotificationChange);
                using (SqlDataAdapter adapter = new SqlDataAdapter(oCommand))
                    adapter.Fill(dataTable);
            }

            AppMain.Cache.Insert(CACHE_KEY, dataTable, null, Cache.NoAbsoluteExpiration, TimeSpan.FromSeconds(60));
        }
        finally
        {
            oConnection.Close();
        }
        return dataTable;
    }

    public static void OnNotificationChange(object caller, SqlNotificationEventArgs e)
    {
        if (e.Type == SqlNotificationType.Change)
            RegisterForChanges();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T07:38:09.990

您可以使用[SqlNotificationEventArgs](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlnotificationeventargs.aspx)对象的[SqlNotificationInfo](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlnotificationinfo.aspx)对象并检查它是否为 Insert、Update 或 Delete 并忽略其余部分。

```
public static void OnNotificationChange(object caller, SqlNotificationEventArgs e)
{
    if (e.Type == SqlNotificationType.Change && (e.Info == SqlNotificationInfo.Insert || e.Info == SqlNotificationInfo.Delete || e.Info == SqlNotificationInfo.Update))
    {
        SqlDependency dependency =(SqlDependency)sender;
        dependency.OnChange -= OnNotificationChange;
        RegisterForChanges();
    }
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-02-28T16:11:30.283

我遇到了与问题中描述的相同的问题。我能够确定问题是由创建多个`SqlCommand`实例引起的（类似于您在`using (SqlCommand oCommand = new SqlCommand("dbo.GetUsers", oConnection))`内部`RegisterForChanges()`的 .

我更改了代码以声明对`SqlCommand`和`SqlConnection`对象的实例引用，并仅`SqlDependency`在`RegisterForChanges()`方法中实例化新实例。

```
void RegisterForChanges()
{
  _sqlCommand.Notification = null;
  _sqlConnection.Open();
  SqlDependency dependency = new SqlDependency(_sqlCommand);
  dependency.OnChange += dependency_OnChange;
  _sqlCommand.ExecuteNonQuery(); // or ExecuteReader and parse the results, etc
  _sqlConnection.Close();
} 
```

# xmpp - xmpp协议中传输的多次注册

> ID：10204850
> 
> 赞同：0
> 
> 时间：2012-04-18T07:28:14.457
> 
> 标签：xmpp, gateway

我正在研究 xmpp 协议，我遇到了[网关](http://xmpp.org/extensions/xep-0100.html)概念，其中它允许与使用另一个协议（如 msn、aim、yahoo 等）的服务进行通信。据我所知，我相信它只允许一个注册一次特定的网关。例如，我一次只能注册 1 个 msn 帐户。我不确定它是否真的如此。

是否可以为特定网关注册多个帐户以及如何注册？请帮助我..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T08:48:39.737

那是真实的。我知道的所有网关（例如[频谱](http://spectrum.im/)）每个实例只允许一个注册。但是您可以运行 smae 网关类型的多个实例，例如：

```
icq1.jabberserver.com
icq2.jabberserver.com 
```

也就是说，额外运行多个网关组件到不同的 IM 网络，例如

```
gtalk.jabberserver.com
irc.jabberserver.com
icq.jabberserver.com
msn.jabberserver.com
... 
```

您还可以在服务器上运行同一[网关组件](http://xmpp.org/extensions/xep-0100.html)的多个实例。请注意，这是 XMPP 服务器的（内部和/或[外部](http://xmpp.org/extensions/xep-0114.html)）组件，而不是单个 XMPP 服务器！

# ios - 没有检查单元格时如何隐藏“下一个”栏按钮？

> ID：10204857
> 
> 赞同：0
> 
> 时间：2012-04-18T07:29:17.187
> 
> 标签：ios, xcode, checkbox, tableview

当没有检查单元格时，如何隐藏“下一个”barbuttonitem。但是当我检查最少 1 个单元格时，下一个按钮应该可用。

这是我的选择行：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
    NSManagedObjectContext *context = [app managedObjectContext];
    StandortCell *cell = (StandortCell *)[tableView cellForRowAtIndexPath:indexPath];
    Standort *standort=[self.fetchedResultsController objectAtIndexPath:indexPath];
    NSLog(@"Ausgewaehlte Standort %@",standort.ort);

    if (cell.checkButton.hidden==YES){
        cell.checkButton.hidden=NO;
        UIBarButtonItem *myWeiter = [[UIBarButtonItem alloc] initWithTitle:@"Weiter" style:UIBarButtonItemStyleBordered target:self action:@selector(nextPressed:)];
        UIBarButtonItem *myMapButton = [[UIBarButtonItem alloc]initWithTitle:@"Karte" style:UIBarButtonItemStyleBordered target:self action:@selector(mapPressed:)]; 

        NSArray *myButtonArray = [[NSArray alloc] initWithObjects:myWeiter,myMapButton,nil];

        self.navigationItem.rightBarButtonItems = myButtonArray;
    }else {
        cell.checkButton.hidden=YES;
        self.navigationItem.rightBarButtonItem = nil;
        UIBarButtonItem *myMapButton = [[UIBarButtonItem alloc]initWithTitle:@"Karte" style:UIBarButtonItemStyleBordered target:self action:@selector(mapPressed:)]; 

        NSArray *myButtonArray = [[NSArray alloc] initWithObjects:myMapButton,nil];

        self.navigationItem.rightBarButtonItems = myButtonArray;
    }    

    if ([[standort valueForKey:@"ortcheck"] boolValue]) {
        [standort setValue:[NSNumber numberWithBool:NO] forKey:@"ortcheck"];

    } else {

        [standort setValue:[NSNumber numberWithBool:YES] forKey:@"ortcheck"];

    }

    NSError *error = nil;
    if (![context save:&error]) {

        NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
        abort();
    }

} 
```

当我尝试我的代码时，nextbutton 消失，但是当我选择多个单元格并取消选择一个时，nextbutton 消失。当没有选择单元格时它应该消失

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T07:33:57.827

构建视图后，添加按钮：

```
- (void)viewDidLoad {
    UIBarButtonItem *myWeiter = [[UIBarButtonItem alloc] initWithTitle:@"Weiter" style:UIBarButtonItemStyleBordered target:self action:@selector(nextPressed:)];
    UIBarButtonItem *myMapButton = [[UIBarButtonItem alloc]initWithTitle:@"Karte" style:UIBarButtonItemStyleBordered target:self action:@selector(mapPressed:)]; 

    NSArray *myButtonArray = [[NSArray alloc] initWithObjects:myWeiter,myMapButton,nil];

    self.navigationItem.rightBarButtonItems = myButtonArray;
} 
```

选择一行时，应始终可见按钮（因为至少有1个选择）：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
    self.navigationItem.rightBarButtonItem.enabled = YES;
} 
```

当一行被取消选择时，这将被调用，如果没有选定的行禁用右栏按钮：

```
- (void)tableView:(UITableView *)tableView didDeselectRowAtIndexPath:(NSIndexPath *)indexPath {
    if ([tableView indexPathsForSelectedRows] == nil) {
        self.navigationItem.rightBarButtonItem.enabled = NO;
    }
} 
```

# silverlight - WP7 Bing地图控件慢拖时不可移动

> ID：10204859
> 
> 赞同：0
> 
> 时间：2012-04-18T07:29:19.197
> 
> 标签：silverlight, windows-phone-7, bing, bing-maps

我使用 WP7 Bing 地图控件来显示地图。我想在地图上进行精确拖动。但是当我缓慢拖动地图时（小于 4-5 毫米/秒），地图并没有移动。我尝试使用 Bingmap 应用程序，效果很好 - 当我缓慢拖动时，地图正在移动。有没有办法让 Bing 地图控件像 Bingmap 应用程序一样正常工作？请帮我。非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T08:35:01.773

您可能希望将地图的 CacheMode 设置为 BitmapCache，这应该会提高性能，如以下博客文章中所述：-

[http://mindre.net/Article/windows_phone_7__cachemode_and_why_it_matters](http://mindre.net/Article/windows_phone_7__cachemode_and_why_it_matters)

# c# - WCF 身份验证不起作用

> ID：10204864
> 
> 赞同：3
> 
> 时间：2012-04-18T07:29:58.013
> 
> 标签：c#, wcf, wcf-security

我已经`userNamePasswordValidationMode`在我的 WCF 应用程序中实现了我的自定义，如下所示：

```
<system.serviceModel>
    <bindings>
        <wsHttpBinding>
            <binding>
                <security mode ="Message">
                    <message clientCredentialType="UserName"/>
                </security>
            </binding>
        </wsHttpBinding>
    </bindings>
    <behaviors>
        <serviceBehaviors>
            <behavior>
                <serviceMetadata httpGetEnabled="True"/>
                <serviceCredentials>
                    <userNameAuthentication userNamePasswordValidationMode="Custom" customUserNamePasswordValidatorType="MyProject.Validator.MyValidator, MyProject" />
                </serviceCredentials>
            </behavior>
        </serviceBehaviors>
    </behaviors>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true" aspNetCompatibilityEnabled="true" />
</system.serviceModel> 
```

这不会引发任何错误，但是当我在客户端中引用我的服务并设置用户名/密码凭据时，即使我输入了错误的密码，我的方法仍然会被调用：

```
Testing.myAPIClient.client = new Testing.myAPIClient();
client.ClientCredentials.UserName.UserName = "test";
client.ClientCredentials.UserName.Password = "wrongpassword";

Console.WriteLine(client.StockQuery("123"));
Console.ReadLine(); 
```

该方法`StockQuery`仍然被调用，并且代码`MyValidator`甚至没有被调用：

```
public class MyValidator : UserNamePasswordValidator
    {
        public override void Validate(string userName, string password)
        {
            using (var ax = new AXConnector())
            {
                if (!(bool)ax.CallStaticClassMethod("OnlineUsers", "validateLogon", userName, password))
                {
                    throw new UnauthorizedAccessException("Not Authorised");
                }
            }
        }
    } 
```

## 编辑

这是我的 app.config：

```
 <system.serviceModel>
    <bindings>
        <basicHttpBinding>
            <binding name="BasicHttpBinding_IMyAPI" closeTimeout="00:01:00"
                openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"
                allowCookies="false" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
                maxBufferSize="65536" maxBufferPoolSize="524288" maxReceivedMessageSize="65536"
                messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered"
                useDefaultWebProxy="true">
                <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
                    maxBytesPerRead="4096" maxNameTableCharCount="16384" />
                <security mode="None">
                    <transport clientCredentialType="None" proxyCredentialType="None"
                        realm="" />
                    <message clientCredentialType="UserName" algorithmSuite="Default" />
                </security>
            </binding>
        </basicHttpBinding>
    </bindings>
    <client>
        <endpoint address="http://myServer:89/MyAPI.svc" binding="basicHttpBinding"
            bindingConfiguration="BasicHttpBinding_IMyAPI" contract="Testing.IMyAPI"
            name="BasicHttpBinding_IMyAPI" />
    </client>
</system.serviceModel> 
```

## 编辑 2

服务接口：

```
[ServiceContract]
public interface IMyAPI
{
    string UserName { [OperationContract] get; [OperationContract] set; }
    string Password { [OperationContract] get; [OperationContract] set; }

    [OperationContract]
    bool StockQuery(string partNo);

    [OperationContract]
    decimal PriceQuery(string partNo, string accNo);
} 
```

服务等级：

```
[AspNetCompatibilityRequirements(RequirementsMode = AspNetCompatibilityRequirementsMode.Required),
ServiceBehavior(InstanceContextMode = InstanceContextMode.PerSession, ConcurrencyMode = ConcurrencyMode.Single)]
public class MyAPI : IMyAPI
{
    public string UserName { get; set; }
    public string Password { get; set; }
    public MyAPI()
    {
        this.CheckSecurity();
    }

    private void CheckSecurity()
    {
        if (this.UserName != "test" && this.Password != "123")
        {
            throw new UnauthorizedAccessException("Not Authorised");
        }
    }

    // StockQuery and PriceQuery methods...
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T08:34:44.740

您的客户端`Security.Mode`设置为`"None"`它应该是`"Message"`的。

```
<security mode ="Message">
    <message clientCredentialType="UserName"/>
</security> 
```

**编辑：**您可能需要[证书](http://msdn.microsoft.com/en-us/library/aa702761.aspx)才能使用它。您可以按照[此演练](http://msdn.microsoft.com/en-us/library/aa354513.aspx)进行操作，但不建议在生产中使用它。

^([1])另一种选择是实施您自己的安全性。这是一个基本的例子。

## WCF 服务

`ServiceBehavior`在您的服务中，将其更改为`InstanceContextMode`to`PerSession`和`ConcurrencyMode`to`Single`

```
[ServiceBehavior(InstanceContextMode = InstanceContextMode.PerSession, ConcurrencyMode = ConcurrencyMode.Single)]
public class SomeService : ISomeService
{ 
    // ...
} 
```

在您的服务中添加一个`Username`和`Password`属性。

```
public string UserName { [OperationContract] get; [OperationContract] set; }
public string Password { [OperationContract] get; [OperationContract] set; } 
```

添加用于检查安全性的私有方法。

```
public void CheckSecurity()
{
    if ((this.UserName == null || this.Password == null) ||
        this.UserName == "username" && this.Password == "password"))
    {
        throw new FaultException("Unknown username or incorrect password.");
    }
} 
```

然后在您的每个服务中调用该`CheckSecurity`方法^([2])~~类构造函数~~方法。

```
public void SomeServiceMethod()
{
    this.CheckSecurity();
    // some method code
} 
```

## 客户端应用程序

在您的客户端应用程序代码中，为每个实例设置服务用户名和密码，或者创建一个将为您执行此操作的静态类。

您也可以尝试在用户名和密码中使用加密来增加安全性。

^([1] 取自我在[如何在 WCF 服务上设置密码？](https://stackoverflow.com/questions/5187031/how-to-put-a-password-on-a-wcf-service/9884770#9884770))
^([2] 您需要`CheckSecuirty`在每个服务方法的开头调用该方法。)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-08-26T18:36:59.480

我们遇到了多年来一切正常的问题，但现在我们正在转移到一个环境，在负载均衡器后面一切都被 SSL 卸载，因此我们不再能够依赖传输。我遇到了与 OP 描述的所有相同的问题。

我们仍在使用正则规则 basicHttpBinding。让它这样工作：

创建了一个解析标头 XML 的类：

```
[DataContract(Namespace = "http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd", Name = "Security")]
public partial class SecurityHeaderType
{
    [XmlElement(Namespace = "http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd")]
    [DataMember]
    public UsernameToken UsernameToken { get; set; }
}

public class UsernameToken : IXmlSerializable
{
    public string Username { get; set; }
    public string Password { get; set; }

    public XmlSchema GetSchema()
    {
        throw new NotImplementedException();
    }

    public void ReadXml(XmlReader reader)
    {
        Dictionary<string, string> secDictionary;
        string xml = reader.ReadOuterXml();

        using (var s = GenerateStreamFromString(xml))
        {
            secDictionary =
                XElement.Load(s).Elements()
                    .ToDictionary(e => e.Name.LocalName, e => e.Value);
        }

        Username = secDictionary["Username"];
        Password = secDictionary["Password"];

    }

    public Stream GenerateStreamFromString(string s)
    {
        var stream = new MemoryStream();
        var writer = new StreamWriter(stream);
        writer.Write(s);
        writer.Flush();
        stream.Position = 0;
        return stream;
    }

    public void WriteXml(XmlWriter writer)
    {
        throw new NotImplementedException();
    }
} 
```

我按照@john-isaiah-carmona 的用户名/密码字段示例，然后像这样写信给他们：

```
public void CheckSecurity()
{
    if (OperationContext.Current.IncomingMessageHeaders.FindHeader("Security", "http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd") != -1)
    {
        var securityHeader = OperationContext.Current.IncomingMessageHeaders.GetHeader<SecurityHeaderType>("Security", "http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd");
        Username = securityHeader.UsernameToken.Username;
        Password = securityHeader.UsernameToken.Password;
    }
    else
        throw new FaultException("Unknown username or incorrect password.");
} 
```

# xsd - 在 C# 中使用 .ashx 文件

> ID：10204869
> 
> 赞同：0
> 
> 时间：2012-04-18T07:30:21.703
> 
> 标签：xsd

我需要在 C# 中使用/解析 .ashx 文件。我可以使用 xsd.exe 创建强类型 C# 类并将其添加到我的项目中。但是 .ashx 的架构可能随时更改。

所以，我不想使用像 xsd 这样的命令行实用程序来创建 C# 类。

有什么方法可以从 .ashx 动态创建 C# 类并使用该类来解析 .ashx 内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T12:24:28.643

I assume that what you need to parse/consume is the XML produced by the .ashx handler.

There is no way I know of to generate a class directly using .NET functions - you could call `xsd.exe` and then load and compile the generated code - quite a hack.

# javascript - 我应该使用 if-then-else or and or 运算符来检查 Javascript 中的空值吗

> ID：10204871
> 
> 赞同：1
> 
> 时间：2012-04-18T07:30:35.297
> 
> 标签：javascript, performance, if-statement, readability, or-operator

今天这个问题出现在我正在从事的项目中。“问题”是我在提供给我的数据中存在一些不确定性，并且我正在构建我的应用程序。这意味着有时可能存在某些值，但有时不存在。因为我希望我的上层有一些一致性，所以我编写了一些“清理”方法来创建我想要的一致性。

但是......什么更好？

```
var myNewData = {};
myNewData['somevalue'] = (myOldData.somevalue) ? myOldData.somevalue : ''; 
```

或者

```
var myNewData = {};
myNewData['somevalue'] = myOldData.somevalue || ''; 
```

还有……为什么更好？是性能吗？可读性？只是好奇。

编辑：要清楚。'somevalue' 属性不一定必须在旧数据中。有时是有时不是。

EDIT2：当然，如果我知道我的旧数据的值包含非字符值（数字、布尔值等），我将默认为它的适当值（0、true 等）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T07:40:14.617

您应该以可读性为目标，并且对于这种情况`||`显然胜出。

Javascript 中的性能很难预测，因为它在不同的实现之间可能会有很大差异，有时结果显然完全不合逻辑（正式需要三个查找的东西可能比需要一个查找的东西更快，因为可能是运行时引擎专门为此而设计代码路径）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T07:37:39.360

问题在于：

```
myNewData['somevalue'] = myOldData.somevalue || ''; 
```

就是说，如果`myOldData.somevalue`持有一个可接受的虚假值，你仍然会得到空字符串。

因此，对于第一个，您至少可以进行严格检查以进行更好的控制：

```
(myOldData.somevalue !== false) ? myOldData.somevalue : ''; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T07:38:48.057

我认为两者都一样好。

但是，请注意它们仅适用于包含字符串值的映射。如果旧地图包含值`false`,`null`或`0`，它们将被转换为空字符串。

因此，我倾向于更喜欢通用案例：

```
myNewData['somevalue'] = (myOldData.somevalue != undefined) ? myOldData.somevalue : ''; 
```

但是，如果您只处理字符串，那么短片`myOldData.somevalue || ''`对我来说看起来简洁明了。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-18T07:40:54.950

如果 myOldData.someValue 为 false（null、undefined、0、'' 等），两者都会产生 ''，但第一个很容易受到复制/粘贴错误的影响。尽可能使用第二种形式，并且在将所有错误答案合并为默认值时是可以容忍的。

请注意，如果基础对象 -- `myOldData`-- 可以为 null 或未定义，这是一个完全不同的球类游戏，您需要执行以下操作：

```
myNewData.somevalue = ( myOldData && myOldData.someValue ) || ''; 
```

这假设它`myOldData`是一个对象。如果它是一个字符串或数字，这里可能会发生不好的事情。（而且无端的括号总是一个好主意。）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-18T08:16:36.170

我对此指令进行了性能测试：

```
myNewData['somevalue'] = (myOldData.somevalue) ? myOldData.somevalue : ''
myNewData['somevalue'] = (myOldData.somevalue) || '' 
```

作为奖励，*旧* `if`的：

```
if (myOldData.somevalue)
    myNewData['somevalue'] = myOldData.somevalue
else
    myNewData['somevalue'] = ''; 
```

无论是否为`myOldData.somevalue`空。对于这样的测试：

```
for (i = 0; i < 10; ++i) {
    for (j = 0; j < 100000000; ++j) {
        result = empty || "";
    }
} 
```

外循环是计算一个平均值（时序代码省略）。这些是我的结果（索引越低性能越好）：

```
代码 | 空 | 不是空的
      | IE9 铬 | IE9 铬
-------------------------------------------------- ----
?: | 1435.1 551.1 | 1636.1 706.1
|| | 1450.3 488 | 1623.7 706.4
如果 | 1436.2 491 | 1642.6 653.6
-------------------------------------------------- ----

```

所以我想性能不是这里的重点（无论如何，如果要测试的变量更复杂，更好的测试应该检查什么）。

可读性是非常基于意见的。我个人更喜欢`||`它，因为它足够清晰且更短，但是如果您选择 C ​​程序员，他可能不会喜欢它，而 C# 程序员会理解它就像*他的* `??`操作员...

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-18T07:40:59.273

没有不同。

性能？微不足道。

可读性？你可以自己说，什么是容易读给你和你的同事的。我更喜欢短一点的。

第二个更好，因为您不需要重复相同的事情，并且出错的机会更少。同时，对于以前使用静态类型语言的人来说，这并不常见。

# java - Hibernate 不会驱逐查询缓存（不可重复读取问题）

> ID：10204876
> 
> 赞同：3
> 
> 时间：2012-04-18T07:30:48.980
> 
> 标签：java, spring, hibernate, ehcache, query-cache

我是 java/spring/hibernate 的新手，经过几年的 .Net 编程，我真的爱上了 java。

现在我正在使用 Spring（MVC，声明性事务）和 Hibernate（3.6，作为缓存提供者 - ehCache 2.5）开发 Web 应用程序。我有一些只读和读写实体，我想使用 Hibernate 第二缓存和查询缓存进行缓存。

当我对只读实体使用缓存时，一切都很好。我添加了读写实体并使用 jMeter 运行性能测试。对于读写实体，我面临不可重复读取的问题。例如，有几个并发线程读取和写入实体表。

线程 3 获取查找值：

```
16:34:45,304 DEBUG [http-bio-8080-exec-3] cache.StandardQueryCache:        (StandardQueryCache.java:136) - cached query results were not up to date
16:34:45,304 DEBUG [http-bio-8080-exec-3] hibernate.SQL:(SQLStatementLogger.java:111) - select virtualdev0_.virtual_device_class_id as virtual1_45_,     virtualdev0_.virtual_device_class as virtual2_45_, virtualdev0_.sitebox_id as sitebox3_45_, virtualdev0_.timestamp as timestamp45_ from virtual_device_class virtualdev0_ where     virtualdev0_.sitebox_id=? 
```

它发现缓存不是最新的并加载实体，将它们添加到二级缓存，物化并返回......从这里一直持续到16:34:45,826

同时线程 9 删除实体之一并更新二级缓存 + 时间戳：

```
16:34:45,799 DEBUG [http-bio-8080-exec-9] hibernate.SQL:(SQLStatementLogger.java:111) - delete from virtual_device_class where virtual_device_class_id=?
16:34:45,814 DEBUG [http-bio-8080-exec-9] cache.UpdateTimestampsCache:(UpdateTimestampsCache.java:95) - Invalidating space [virtual_device_class], timestamp: 5466792287494145 
```

线程 3 继续做家务活动，最后将查询结果添加到查询缓存中（注意时间戳将高于线程 9 的删除操作的时间戳）：

```
16:34:45,826 DEBUG [http-bio-8080-exec-3] cache.StandardQueryCache:(StandardQueryCache.java:96) - caching query results in region: org.hibernate.cache.StandardQueryCache; timestamp=5466792287543296 
```

因此，此时已删除的 ID 将在查询缓存中，并且查询缓存将被视为是最新的。

```
16:34:45,852 DEBUG [http-bio-8080-exec-9] cache.UpdateTimestampsCache:(UpdateTimestampsCache.java:122) - [virtual_device_class] last update timestamp: 5466792287494145, result set timestamp: 5466792287543296 
```

因此，当您再次尝试进行查找时，它将在查询缓存中查找，然后开始从第二个缓存中实现实体。

```
16:34:45,852 DEBUG [http-bio-8080-exec-9] cache.StandardQueryCache:(StandardQueryCache.java:140) - returning cached query results 
```

但已删除的项目不会存在，因此将完成对 db 的查询。

```
16:34:45,863 DEBUG [http-bio-8080-exec-9] loader.Loader:(Loader.java:2022) - loading entity: [com.test.models.VirtualDeviceClass#0b2f363f-fbb9-4d17-8f86-af86ebb5100c]
16:34:45,873 DEBUG [http-bio-8080-exec-9] hibernate.SQL:(SQLStatementLogger.java:111) - select virtualdev0_.virtual_device_class_id as virtual1_45_0_, virtualdev0_.virtual_device_class as virtual2_45_0_, virtualdev0_.sitebox_id as sitebox3_45_0_, virtualdev0 
```

因为我使用的是 Load 方法，所以如果在 db 中找不到实体，它会引发异常。在我的情况下，实体很少会更新它可能会发生，这让我很担心。我对如何尝试克服这个问题的想法很少：

a）在数据库中将 trx 隔离级别设置为可重复读取（但是不要认为这会有所帮助，因为在从数据库读取数据后会添加到缓存逻辑）b）手动强制标准查询缓存驱逐实体删除/更新 c）做根本不使用查询缓存（尝试路由大多数数据库查询以使用第二个缓存）

以前有人遇到过这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T12:52:51.927

我已经迁移到 Hibernate 4，它现在工作正常。

此问题可能与方法中删除的同步块有关`SessionFactory.getQueryCache(String regionName)`

[链接到休眠问题](https://hibernate.onjira.com/browse/HHH-5945)

# java - 使用 Spring 如何在 HIbernate 初始化之后但在应用程序启动之前执行代码？

> ID：10204878
> 
> 赞同：0
> 
> 时间：2012-04-18T07:30:51.553
> 
> 标签：java, spring, hibernate

如果应用程序以一些空数据库表启动，我想使用应用程序 API 将一些数据插入数据库。我该怎么做？

我正在使用 Spring 3.1，Hibernate 4.1.1。

[编辑]

感谢 AlexR，答案是 sublcas `ContextLoaderListener`，调用 super ，`contextInitialized`然后做你需要做的任何事情：

```
public class MyContextLoaderListener extends ContextLoaderListener {

    public void contextInitialized(final ServletContextEvent event) {

        super.contextInitialized(event);
        // ... doStuff();
    }

} 
```

您可能还需要在 web.xml 而不是 Spring 中将其连接起来：

```
<listener>
    <listener-class>com.example.MyContextLoaderListener</listener-class>
</listener> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T07:39:39.083

您可以使用弹簧上下文侦听器。看看： http: [//fusesource.com/docs/framework/2.2/deploy_guide/CXFServletDeploySpring.html](http://fusesource.com/docs/framework/2.2/deploy_guide/CXFServletDeploySpring.html)

[http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/web/context/ContextLoaderListener.html](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/web/context/ContextLoaderListener.html)

[http://forum.springsource.org/showthread.php?88896-Spring-MVC-3-is-ContextLoaderListener-needed](http://forum.springsource.org/showthread.php?88896-Spring-MVC-3-is-ContextLoaderListener-needed)

# javascript - 通过 android 浏览器中的 javascript 重定向打开应用程序的 google play 详细信息页面

> ID：10204879
> 
> 赞同：10
> 
> 时间：2012-04-18T07:30:54.207
> 
> 标签：javascript, android, redirect, google-play

如果我的网站在 Android 设备上打开，我希望我的网站重定向到 Google Play 市场中的特定应用。我按照[http://developer.android.com/guide/publishing/publishing.html](http://developer.android.com/guide/publishing/publishing.html)上的说明进行操作：

```
"Display the details screen for a specific application: http://play.google.com/store/apps/details?id=<package_name>". 
```

与用户积极点击的链接一起使用效果很好：

```
<a href="http://play.google.com/store/apps/details?id=<package_name>">Download app</a> 
```

但是，如果我使用 javascript 检测设备并尝试重定向浏览器自动将 http://... 更改为 https://... 并且用户被重定向到 Google Play 网站而不是 Google Play 应用程序电话。

```
if(navigator.userAgent.toLowerCase().indexOf("android") > -1) {
    if(confirm("Download app?")) {
        window.location.href= "http://play.google.com/store/apps/details?id=<package_name>";
    }
} 
```

有什么办法可以改变这种行为，我的测试设备是带有 android 2.3.3 的三星 Galaxy？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-18T12:02:00.007

This seems to work. The redirect opens the Google Play app while using the default browser, but translates the link to https:// play.google... when using chrome

```
if(navigator.userAgent.toLowerCase().indexOf("android") > -1) {
    if(confirm("Download app?")) {
        window.location.href= "market://details?id=<packagename>";
    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-08-18T11:00:17.577

如果您想**重定向**到**Google Play 应用程序**，请尝试从服务器执行此操作。

客户端尝试将不起作用。

PHP 示例

```
 header("Location: market://details?id=com.your.app"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-05-02T04:59:04.983

如果接受的答案不起作用或无法在 Chrome 中打开并出现此错误

> 错误：ERR_UNKNOWN_URL_SCHEME

像这样将 window.location.href 更改为 window.location

```
if(navigator.userAgent.toLowerCase().indexOf("android") > -1) {
 if(confirm("Download app?")) {
    window.location= "market://details?id=<packagename>";
 }
} 
```

# bash - 如何在期望中返回不匹配的字符串

> ID：10204882
> 
> 赞同：1
> 
> 时间：2012-04-18T07:31:07.840
> 
> 标签：bash, return, tcl, expect

在我的脚本中，我想返回不匹配的字符串。我试过`puts $expect_out(buffer)`了，但它没有用，并给了我以下错误

```
can't read "expect_out(buffer)": no such variable
    while executing
"puts "out is $expect_out(buffer)" " 
```

# 代码

```
expect {
     -nocase -re "$arg3" { exit 0 } 
    timeout  { puts "Does not matched, output is $expect_out(buffer)" ; exit 2 }"
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T21:27:37.117

该`expect_out`数组在匹配发生之前不存在，因此如果您之前没有在代码中匹配期望调用并且您实际上达到了超时子句，您会收到`no such variable`错误消息。

> **期待手册页**
> 
> “在匹配模式（或 eof 或 full_buffer）时，任何匹配的和以前不匹配的输出都保存在变量 expect_out(buffer) 中。最多 9 个正则表达式子字符串匹配项保存在变量 expect_out(1,string) 到 expect_out(9, string). 如果在模式之前使用 -indices 标志，则 10 个字符串的开始和结束索引（以适合 lrange 的形式）存储在变量 expect_out(X,start) 和 expect_out(X,end) 中，其中X 是一个数字，对应于缓冲区中的子字符串位置。0 指的是匹配整个模式的字符串，它是为 glob 模式和正则表达式模式生成的。

您可以通过测试`info exists expect_out`并使用打印出数组键/值（如果存在）`array names expect_out`。

您可以通过 自己明确设置值`set expect_out(key) value`，但是（据我所知）无法最初检索不匹配的字符串，`log_file expectoutput.txt`如果超时，则使用并读回它。

# php - PHP：控制或可以突出两个字符串差异的东西？

> ID：10204891
> 
> 赞同：-1
> 
> 时间：2012-04-18T07:31:45.480
> 
> 标签：php, comparison, highlight

我想比较 2 个字符串并使用 php 控件以视觉方式显示差异。它应该类似于可以突出差异的文本区域。是否有标准 PHP 附带的东西或可以轻松添加的东西？这是一个例子，它不需要那么复杂，但类似的东西：[http ://rdxsoft.com/images/uploads/winmerge.jpg](http://rdxsoft.com/images/uploads/winmerge.jpg)

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T07:42:27.727

您可以使用[Text_Diff](http://pear.php.net/package/Text_Diff)梨包。

**更新**：我刚刚从[xdiff pecl 扩展](http://pecl.php.net/package/xdiff)中找到了这个原生 php 函数[xdiff_string_diff](http://bd.php.net/manual/en/function.xdiff-string-diff.php)。

# javascript - 刷新jquery选项卡中的表单字段

> ID：10204893
> 
> 赞同：0
> 
> 时间：2012-04-18T07:31:52.847
> 
> 标签：javascript, jquery, html, forms

如何重置可能**动态**生成并位于 jQuery 选项卡中的表单字段？当用户从一个选项卡移动到另一个选项卡时，应重置带有表单文本字段的第一个选项卡，并在重新访问选项卡时重置字段。

使用过的功能：

```
resetForm(formId){
    $(’#’+formId)[0].reset();
} 
```

问题是该选项卡包含动态创建的表单字段（在添加更多时生成）。

在这种情况下，我们如何删除清除表单字段。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T07:40:10.740

这将清除所有表单值：

```
$('input:text, input:password, input:file, select, teaxarea').val(''); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T07:42:42.690

您可以为所有输入定义一个通用类，并根据 onfocus 或 blur 等事件重置它们的值。例如

```
document.getElementsByClassName("myclass").onfocus = function() {

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T07:52:46.800

我会在您动态添加到表单的字段中添加一些类。例如：“动态添加”。因此，当您移动到另一个选项卡时，我会执行以下操作：

```
 var form_values;
    $( ".selector" ).tabs({
        select: function(event, ui) { 
            if (ui.index != 0) { //if I didn't clicked on the first tab
                save_form_fields();
                $( ".dynamically_added" ).remove();
                $("#" + formId).reset();
            }
            else {
                add_dynamic_fields();
                restore_form_values();
            }
        }
    }); 
```

我没有测试代码，但我希望它有所帮助。如果没有，请告诉我，我会想到别的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T07:46:16.053

如果我理解正确，您想清除在表单中动态创建的字段吗？

那么这是你需要的吗？

```
resetForm(formId) { 
    $("input, textarea, select", $("#" + formId)).val(''); // Or .text('');
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-18T07:44:40.307

想象一下你有：

```
<div id="container>
    <form ...>
    ... dynamically generated forms etc
    <form ...>
</div> 
```

然后您可以像这样选择此容器内的所有表单：

```
$('#container form').each(function(){
        $(this)[0].reset();
    }); 
```

这将为所有选定的表单触发给定函数，其中 $(this) 是当前表单。

# haskell - “<-”和相关值

> ID：10204897
> 
> 赞同：6
> 
> 时间：2012-04-18T07:32:11.220
> 
> 标签：haskell, monads

假设我编写了以下惊人的代码：

```
func = do
  a <- Just 5
  return a 
```

这很没有意义，我知道。在这里，`a`是`5`，并`func`返回`Just 5`。

现在我重写了我很棒的（但毫无意义的）函数：

```
func' = do
  a <- Nothing
  return a 
```

这个函数返回`Nothing`，但到底是`a`什么？没有什么可以从`Nothing`值中提取的，但是当我做这样的事情时，程序不会发牢骚：

```
func'' = do
  a <- Nothing
  b <- Just 5
  return $ a+b 
```

我只是很难看到实际发生的事情。是什么`a`？换句话说：`<-` *实际上*做了什么？说它“从右侧提取值并将其绑定到左侧”显然过于简单化了。我没有得到什么？

谢谢 ：）

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-18T07:49:06.460

让我们尝试对最后一个示例的 do-notation 进行脱糖。

```
func'' = Nothing >>= (\a -> Just 5 >>= (\b -> return $ a+b)) 
```

现在，让我们看看 >>= 是如何为 Maybe 定义的。它在前奏曲中：

```
instance  Monad Maybe  where
    (Just x) >>= k   =  k x
    Nothing  >>= k   =  Nothing
    return           =  Just
    fail s           =  Nothing 
```

很`Nothing >>= foo`简单`Nothing`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-18T07:55:23.880

答案在于 的`Monad`实例的定义`Maybe`：

```
instance Monad Maybe where
   (Just x) >>= k      = k x
   Nothing  >>= _      = Nothing
   (Just _) >>  k      = k
   Nothing  >>  _      = Nothing
   return              = Just 
```

您的`func''`翻译为：

```
Nothing >>= (\a -> (Just 5 >>= (\b -> return (a+b)))) 
```

从定义中`(>>=)`可以看出，第一个`Nothing`只是线程化的结果。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-04-18T07:50:32.713

让我们看一下`Maybe`monad的定义。

```
instance Monad Maybe where
  return = Just

  Just a  >>= f = f a
  Nothing >>= _ = Nothing 
```

并`do`在您的函数中对 -notation 进行脱糖：

```
func' =
  Nothing >>= \a ->
  return a 
```

`>>=`is的第一个参数`Nothing`，从上面的定义我们可以看到它`>>=`忽略了第二个参数。所以我们得到：

```
func' = Nothing 
```

由于该函数`\a -> ...`永远不会被调用，因此`a`永远不会被分配。所以答案是：`a`甚至没有达到。

* * *

至于去糖`do`符号，这里是它如何完成的一个快速草图（我做了一个简化 - 处理`fail`，即不匹配的模式）：

```
do {a; rest} → a >> do rest 
```

请注意，`>>`通常以`>>=`as的形式实现`a >>= \_ -> do rest`（即第二个函数只是忽略参数）。

```
do {p <- a; rest} → a >>= \p -> do rest

do {let x = a; rest} → let x = a in do rest 
```

最后：

```
do {a} = a 
```

这是一个例子：

```
main = do
  name <- getLine
  let msg = "Hello " ++ name
  putStrLn msg
  putStrLn "Good bye!" 
```

脱糖：

```
main =
  getLine >>= \name ->
  let msg = "Hello " ++ name in
  putStrLn msg >>
  putStrLn "Good bye!" 
```

* * *

为了让那些好奇的人更完整，这里是`do {p <- a; rest}`（直接取自 Haskell 报告）的“正确”翻译：

```
do {pattern <- a; rest} → let ok pattern = do rest
                              ok _       = fail "error message"
                          in  a >>= ok 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-18T07:57:06.923

`Nothing`并不是真正的“无”，它实际上是`Maybe`monad 中某些东西的可能值：

```
data Maybe t = Nothing | Just t 
```

也就是说，如果你有某种类型`Maybe t`的东西`t`，它可以有值`Just x`（`x`类型的东西在哪里`t`）*或* `Nothing`; 从这个意义上说`Maybe`，只是扩展`t`为具有更多可能的值，`Nothing`. （它有其他属性，因为它是一个[monad](http://blog.sigfpe.com/2006/08/you-could-have-invented-monads-and.html)，但这并不真正关心我们，除了`do`and的语法糖`<-`。）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-19T01:51:52.457

让我们举个例子：

```
func = do
  a <- Just 5
  return a 
```

就像在其他编程语言中一样，您可以将其分为两部分，分别对应“到目前为止已经完成的工作”和“尚未完成的工作”。例如，我们可以在`Just 5`and

```
a <- ...
return a 
```

在许多流行的编程语言中，您希望`Just 5`将 填充到变量`a`中并且代码将继续。

Haskell 做了一些不同的事情。“其余代码”可以被认为是一个函数，它描述了`a`如果你有一个值可以做什么。然后将此函数应用于`Just 5`. 但它不是直接应用的。它使用 apply 的任何定义来`>>=`应用，具体取决于表达式的类型。对于`Maybe`,`>>=`被定义为在处理 时`Just X`，将“其余代码”函数应用于`X`. 但它也被定义为在处理`Nothing`“其余代码”时，函数会被简单地忽略并`Nothing`返回。

我们现在可以解释你的另一个例子

```
func'' = do
  a <- Nothing
  b <- Just 5
  return $ a+b 
```

将其分解为`Nothing`：

```
 a <- ...
  b <- Just 5
  return $ a+b 
```

正如我在上面所说的，这段代码可以被认为是一个应用于一个可能值的函数`a`。但它被用于`Nothing`并且在这种情况下`>>=`被定义为忽略“其余代码”而只是 return `Nothing`。这就是你得到的结果。

# php - 修补 PHP 5.3.10 以支持 sybase_next_result()

> ID：10204898
> 
> 赞同：3
> 
> 时间：2012-04-18T07:32:12.473
> 
> 标签：php, patch, sap-ase

数据库管理系统 Sybase ASE 支持多个结果集，但 PHP 中的 Sybase 实现不支持。有一个关于此问题的错误报告，并且该报告中还提供了一个补丁 (https://bugs.php.net/bug.php?id=48675)。该补丁适用于 5.2.9 版，我已尝试将其添加到 5.3.10 版。源代码生成时没有警告或错误，并且测试新函数“sybase_next_result()”不会产生致命错误“调用未定义函数”。这表明该功能已实现，但未按预期工作。

配置是：

```
configure --disable-isapi --enable-debug-pack --without-mssql --without-pdo-mssql --without-pi3web --with-mcrypt=static --disable-static-analyze --enable-cli --with-sybase-ct=%SYBASE%\%SYBASE_OCS% 
```

当有多个结果集显示“Sybase：意外结果，正在取消当前...”时，会在“sybase_query()”上显示一条通知。检索第一个结果集。即使没有补丁，也会返回此通知。

数据库中返回多个结果集的存储过程的数量是巨大的，'sybase_next_result()' 将是最好的解决方案。简而言之，我在 PHP 5.3.10 中为 Sybase 寻找与 'mssql_next_result()' (http://se2.php.net/manual/en/function.mssql-execute.php) 等效的版本。

值得注意的是，Sybase 实现的其他部分已经到位，并且似乎按预期工作。

我的测试环境是 WAMP 服务器（Windows 7、Apache 2.21、MySQL 5.5.20、PHP 5.3.10），Sybase ASE 是 15.7.0 版。

有没有人已经“解决”了这个问题？

关于//乔纳斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T13:32:33.547

**更新：**

一位同事给了我使用“OutputDebugString()”(http://msdn.microsoft.com/en-us/library/windows/desktop/aa363362(v=vs.85).aspx) 并使用 DebugView 捕获的说明（http://technet.microsoft.com/en-us/sysinternals/bb896647）。

从这里我可以说'sybase_next_result()'被调用但是块

```
if (sybase_ptr->active_result_index) {
    ...
} 
```

没有运行。这可能是正确的（如我所见）。

该行

```
retcode = ct_results(sybase_ptr->cmd, &restype); 
```

总是将“retcode”设置为“CS_FAIL”。这可能是因为早先

```
ZEND_FETCH_RESOURCE2(sybase_ptr, sybase_link *, sybase_link_index, id, "Sybase-Link", le_link, le_plink); 
```

以 'retcode' 变为 'CS_FAIL' 的 sutch 方式设置 'sybase_ptr'。

# msbuild - 如何在使用 msdeploy 或 msbuild 发布之前删除文件？

> ID：10204899
> 
> 赞同：2
> 
> 时间：2012-04-18T07:32:12.907
> 
> 标签：msbuild, batch-file, teamcity, publish, msdeploy

我正在使用 msdeploy 通过 teamcity 在远程服务器上发布。问题是 msdeploy 不会在发布之前删除 IIS 站点目录中的文件。任何人都可以告诉如何在使用 msdeploy 发布之前删除文件，还是我必须编写一个批处理脚本来删除目录然后重新创建它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T07:42:12.593

有关您可以启用/禁用的额外 msdeploy 规则，请参阅[http://technet.microsoft.com/en-us/library/dd568992(WS.10).aspx](http://technet.microsoft.com/en-us/library/dd568992(WS.10).aspx)。我认为您需要“DoNotDeleteRule”，但我不确定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-09-14T07:32:46.223

对于删除文件夹中的文件，但不删除文件夹，我找到了具有同步功能的解决方案。我将一个空文件夹与目标文件夹同步。

我的命令是：

```
msdeploy.exe -verb:sync -source:contentPath="path to empty folder here" -dest:contentPath="folder to cleanup",computerName=%msdeploy_Server_Url_here%?site=%IIS_Site_Name_here%,userName=%msdeploy_user_name_here%,password=%msdeploy_user_pwd_here%,authType=basic -allowUntrusted=true 
```

# android - 如何突出显示 Textview 的字符串中的字符？

> ID：10204901
> 
> 赞同：1
> 
> 时间：2012-04-18T07:32:17.357
> 
> 标签：android, string, textview

String = "这是样本"

我想在String中单独增加SAMPLE的大小以突出显示，但需要在单个字符串中，这是在TextView中设置的。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-18T07:45:42.650

```
textView.setText(Html.fromHtml("This is <font color='#707070' size='20'>
            SAMPLE</font>")); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-18T07:36:41.843

试试这个：

```
String str = "This is <b>SAMPLE</b>";
yourTextView.setText(Html.fromHtml(str), BufferType.SPANNABLE); 
```

此外，您可以使用 html 标签装饰您的字符串 (str) 以改变外观。

或者在不使用 html 内容的情况下突出显示部分文本，请阅读[此内容](https://stackoverflow.com/questions/2120035/highlight-text-in-textview-or-webview)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T07:37:00.523

`Html.fromHtml()`中`setText()`的使用`TextView`。支持的 Html 标签可以在这里找到[TextView 支持的 Html 标签](http://commonsware.com/blog/Android/2010/05/26/html-tags-supported-by-textview.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T07:37:17.900

我认为如果您将文本作为 html 传递，并将突出显示的部分包含在 html`<bold>`标记中，我认为这是可能的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-18T09:06:14.503

你有两个选择：

1，在 HTML 中格式化您的字符串并使用 HTML.from("Your text");

2、使用spannable。完整的指南可以在 [这里找到链接](http://blog.stylingandroid.com/archives/177)

# mysql - 用户设置的数据库设计

> ID：10204902
> 
> 赞同：58
> 
> 时间：2012-04-18T07:32:19.783
> 
> 标签：mysql, sql-server, database, database-design, relational-database

在设计用于存储用户设置的表时，以下哪个选项（如果有）被认为是最佳实践？

（选项1）

```
USER_SETTINGS
-Id
-Code (example "Email_LimitMax")
-Value (example "5")
-UserId 
```

（选项 2）

为每个设置创建一个新表，例如，通知设置需要您创建：

```
"USER_ALERT_SETTINGS"
-Id
-UserId
-EmailAdded (i.e true)
-EmailRemoved 
-PasswordChanged
...
...

"USER_EMAIL_SETTINGS"
-Id
-UserId
-EmailLimitMax
.... 
```

（选项 3）

```
"USER"
-Name
...
-ConfigXML 
```

* * *

## 回答 #1

> 赞同：113
> 
> 时间：2012-04-19T12:34:37.580

其他答案巧妙地概述了您各种选择的利弊。

我相信您的选项 1（财产袋）是大多数应用程序的最佳整体设计，特别是如果您针对财产袋的弱点建立了一些保护措施。

请参阅以下 ERD：

![属性包 ERD](../Images/e62319e8b1d36e2279859257cdabf781.png)

在上面的 ERD 中，该`USER_SETTING`表与 OP 非常相似。不同之处在于，此设计没有 varchar`Code`和`Value`列，而是对一个`SETTING`表定义了允许的设置（代码）和两个互斥列的值的 FK。一个选项是可以接受任何类型的用户输入的 varchar 字段，另一个是合法值表的 FK。

该`SETTING`表还有一个标志，指示用户设置应该由 FK 定义还是由不受约束的 varchar 输入定义。您还可以在 中添加一个`data_type`来`SETTING`告诉系统如何编码和解释`USER_SETTING.unconstrained_value`. 如果您愿意，您还可以添加`SETTING_GROUP`表格来帮助组织用户维护的各种设置。

这种设计允许您围绕您的设置制定规则。这方便、灵活且易于维护，同时避免了混战。

* * *

**编辑：**更多细节，包括一些例子......

请注意，上面的 ERD 已经增加了更多的列详细信息（SETTING 上的范围值和 ALLOWED_SETTING_VALUE 上的列）。

以下是一些示例记录以供说明。

```
SETTING:
+----+------------------+-------------+--------------+-----------+-----------+
| id | description      | constrained | data_type    | min_value | max_value |
+----+------------------+-------------+--------------+-----------+-----------+
| 10 | Favourite Colour | true        | alphanumeric | {null}    | {null}    |
| 11 | Item Max Limit   | false       | integer      | 0         | 9001      |
| 12 | Item Min Limit   | false       | integer      | 0         | 9000      |
+----+------------------+-------------+--------------+-----------+-----------+

ALLOWED_SETTING_VALUE:
+-----+------------+--------------+-----------+
| id  | setting_id | item_value   | caption   |
+-----+------------+--------------+-----------+
| 123 | 10         | #0000FF      | Blue      |
| 124 | 10         | #FFFF00      | Yellow    |
| 125 | 10         | #FF00FF      | Pink      |
+-----+------------+--------------+-----------+

USER_SETTING:
+------+---------+------------+--------------------------+---------------------+
| id   | user_id | setting_id | allowed_setting_value_id | unconstrained_value |
+------+---------+------------+--------------------------+---------------------+
| 5678 | 234     | 10         | 124                      | {null}              |
| 7890 | 234     | 11         | {null}                   | 100                 |
| 8901 | 234     | 12         | {null}                   | 1                   |
+------+---------+------------+--------------------------+---------------------+ 
```

从这些表格中，我们可以看到一些可以确定的用户设置是最喜欢的颜色、项目最大限制和项目最小限制。最喜欢的颜色是字母数字的选择列表。项目最小和最大限制是设置了允许范围值的数字。该`SETTING.constrained`列确定用户是从相关`ALLOWED_SETTING_VALUE`的 s 中挑选，还是需要输入 s `USER_SETTING.unconstrained_value`。允许用户使用其设置的 GUI 需要了解提供哪个选项以及如何强制执行 the`SETTING.data_type`和 the`min_value`和`max_value`限制（如果存在）。

使用这种设计，您可以表格驱动允许的设置，包括足够的元数据，以对用户选择（或输入）的值强制执行一些基本的约束/健全性检查。

**编辑：示例查询**

下面是一些示例 SQL，使用上述数据列出给定用户 ID 的设置值：

```
-- DDL and sample data population...
CREATE TABLE SETTING
    (`id` int, `description` varchar(16)
     , `constrained` varchar(5), `data_type` varchar(12)
     , `min_value` varchar(6) NULL , `max_value` varchar(6) NULL)
;

INSERT INTO SETTING
    (`id`, `description`, `constrained`, `data_type`, `min_value`, `max_value`)
VALUES
    (10, 'Favourite Colour', 'true', 'alphanumeric', NULL, NULL),
    (11, 'Item Max Limit', 'false', 'integer', '0', '9001'),
    (12, 'Item Min Limit', 'false', 'integer', '0', '9000')
;

CREATE TABLE ALLOWED_SETTING_VALUE
    (`id` int, `setting_id` int, `item_value` varchar(7)
     , `caption` varchar(6))
;

INSERT INTO ALLOWED_SETTING_VALUE
    (`id`, `setting_id`, `item_value`, `caption`)
VALUES
    (123, 10, '#0000FF', 'Blue'),
    (124, 10, '#FFFF00', 'Yellow'),
    (125, 10, '#FF00FF', 'Pink')
;

CREATE TABLE USER_SETTING
    (`id` int, `user_id` int, `setting_id` int
     , `allowed_setting_value_id` varchar(6) NULL
     , `unconstrained_value` varchar(6) NULL)
;

INSERT INTO USER_SETTING
    (`id`, `user_id`, `setting_id`, `allowed_setting_value_id`, `unconstrained_value`)
VALUES
    (5678, 234, 10, '124', NULL),
    (7890, 234, 11, NULL, '100'),
    (8901, 234, 12, NULL, '1')
; 
```

现在 DML 提取用户的设置：

```
-- Show settings for a given user
select
  US.user_id 
, S1.description 
, S1.data_type 
, case when S1.constrained = 'true'
  then AV.item_value
  else US.unconstrained_value
  end value
, AV.caption
from USER_SETTING US
  inner join SETTING S1
    on US.setting_id = S1.id 
  left outer join ALLOWED_SETTING_VALUE AV
    on US.allowed_setting_value_id = AV.id
where US.user_id = 234 
```

[在SQL Fiddle](http://sqlfiddle.com/#!9/ef7c9/5)中看到这个。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-04-18T16:12:33.073

选项 1（如前所述，“财产包”）很容易实现 - 很少进行前期分析。但它有很多缺点。

1.  如果要限制 UserSettings.Code 的有效值，则需要一个用于有效标签列表的辅助表。因此，您要么 (a) 没有对 UserSettings.Code 进行验证——您的应用程序代码可以转储任何值，从而错过捕捉错误的机会，或者您必须在新的有效标签列表中添加维护。

2.  UserSettings.Value 可能有一个字符串数据类型来容纳可能进入它的所有不同值。因此，您丢失了真正的数据类型——整数、布尔值、浮点数等，以及 RDMBS 在插入不正确值时将执行的数据类型检查。再一次，你给自己买了一个潜在的 QA 问题。即使对于字符串值，您也失去了限制列长度的能力。

3.  您不能根据代码在列上定义 DEFAULT 值。因此，如果您希望 EmailLimitMax 默认为 5，则不能这样做。

4.  同样，您不能在 Values 列上放置 CHECK 约束来防止无效值。

5.  属性包方法失去了对 SQL 代码的验证。在命名列方法中，如果 Blah 不存在，“从 UserSettings where UserID = x 中选择 Blah”的查询将收到 SQL 错误。如果 SELECT 在存储过程或视图中，则在应用 proc/view 时会出现错误——在代码投入生产之前。在属性包方法中，您只会得到 NULL。因此，您丢失了数据库提供的另一个自动 QA 功能，并引入了一个可能未被检测到的错误。

6.  如前所述，查找适用于多个标签的条件的 UserID 的查询变得更难编写——它需要为每个正在测试的条件加入表中。

7.  不幸的是，Property Bag 是对应用程序开发人员的邀请，他们只需将新代码粘贴到属性包中，而无需分析它将如何在应用程序的其余部分中使用。对于大型应用程序，这成为“隐藏”属性的来源，因为它们没有正式建模。这就像使用纯标记值而不是命名属性来构建对象模型：它提供了一个逃生阀，但是您缺少编译器为您提供的强类型命名属性的所有帮助。或者喜欢在没有模式验证的情况下进行生产 XML。

8.  列名方法是自记录的。表中的列列表告诉任何开发人员可能的用户设置是什么。

我用过财产袋；但只是作为一个逃生阀，我经常后悔。我从来没有说过“哎呀，我希望我把那个明确的列变成一个属性包。”</p>

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2013-08-27T05:16:59.910

考虑这个简单的例子。

> 如果您有 2 个表，**UserTable**（包含用户详细信息）和 **SettingsTable**（包含设置详细信息）。然后创建一个新表**UserSettings**用于关联 UserTable 和 SettingsTable，如下所示

![用户设置数据库设计](../Images/19dd2c34a87706f5c7273b393e895c55.png)

希望你能从这个例子中找到正确的解决方案。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-04-18T08:39:17.870

每个选项都有其位置，选择取决于您的具体情况。我正在比较以下每个选项的优缺点：

选项 1：优点：

*   可以处理许多选项
*   可以轻松添加新选项
*   可以开发通用接口来管理选项

选项 1：缺点

*   添加新选项后，使用新选项更新所有用户帐户会更加复杂
*   选项名称可能会失控
*   允许的选项值的验证更复杂，需要额外的元数据

选项 2：优点

*   每个选项的验证比选项 1 更容易，因为每个选项都是一个单独的列

选项 2：缺点

*   每个新选项都需要更新数据库
*   有了许多选项，数据库表可能会变得更难使用

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-04-18T13:18:00.733

很难评估“最佳”，因为它取决于您要运行的查询类型。

选项 1（通常称为“属性包”、“名称值对”或“实体-属性-值”或 EAV）可以轻松存储您事先不知道其架构的数据。但是，它使运行常见的关系查询变得困难——有时甚至是不可能的。例如，想象一下运行相当于

```
select count(*) 
from USER_ALERT_SETTINGS 
where EmailAdded = 1 
and Email_LimitMax > 5 
```

这很快就会变得非常复杂，特别是因为您的数据库引擎可能无法以数字有意义的方式比较 varchar 字段（因此 "> 5" 可能无法按您期望的方式工作）。

我会计算出您想要运行的查询，并查看哪种设计最能支持这些查询。如果您所要做的只是检查单个用户的限制，那么属性包就可以了。如果您必须报告所有用户，则可能不是。

JSON 或 XML 也是如此 - 可以存储单个记录，但会使查询或报告所有用户变得更加困难。例如，假设搜索电子邮件地址“bob@domain.com”的配置设置 - 这将需要搜索所有 XML 文档以找到节点“电子邮件地址”。

# mysql - phpMyAdmin：“选择要显示的字段”不显示

> ID：10204904
> 
> 赞同：1
> 
> 时间：2012-04-18T07:32:23.933
> 
> 标签：mysql, phpmyadmin

在相关表中插入记录时（通过外键约束），我想在 phpmyadmin 的下拉框中显示更多列。

我创建了两个表：

*   tab1 与列 id (int), name (char)。
*   tab2 列 id (int), idTab1 (int, FK)。

tab2.idTab1 与 tab1.id 相关。

问题是在插入选项卡中可视化下拉框时，它仅显示可用的 tab1.id 记录，如 1 -、2 -、...

我想知道如何在下拉框中的每个 tab1.id 记录旁边显示 tab1.name。有人告诉我使用“选择要显示的字段”，但此选项不显示。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-16T15:16:10.893

这确实是您想要的“选择要显示的**列**”（肯定是 phpMyAdmin 4+）。可以通过两种方式找到：

1.  “设计器”页面（主菜单）。该选项位于顶部图标之一中；
2.  “关系视图”页面，可以通过“结构”页面（主菜单）访问。关系视图的链接位于表格字段的正下方。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T08:55:32.923

您可以使用 phpmyadmin 的设计器来执行此操作。在可视化设计器中创建外键关系后，您可以选择在使用外键将值插入表时显示哪一列（图标“选择要显示的列”）。

[这是一个不错的小教程](http://www.ubuntu-center.de/1399/der-designer-von-phpmyadmin/)，其中还包含您的问题的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T10:20:32.960

您可以降低[`ForeignKeyMaxLimit`](http://imxserver/phpmyadmin/Documentation.html#cfg_ForeignKeyMaxLimit)to`0`以始终显示外键选择的弹出窗口。*可以直接在 phpMyAdmin（主页 -> 更多设置 -> 主框架 [Tab] -> 编辑模式 [Tab] -> 外键限制*）或安装的配置文件中以每个会话为基础更改此设置。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-01-11T01:11:38.763

可以试试`Show/Hide table list`

转到 phpmyadmin -> Designer -> `Left Bar(Show/Hide table list)`-> 这样您就可以选中/取消选中要显示的表

# android - android中的onSaveInstanceState错误

> ID：10204905
> 
> 赞同：1
> 
> 时间：2012-04-18T07:32:36.687
> 
> 标签：android

我在 Android 活动中显示视图，它通过 http 加载数据并通过线程导航视图。

它工作得很好。但是当它正在加载数据并且我按下它时它已经崩溃了。我的错误代码如下。我还实现了 onSaveInstanceState() 和 onRestoreInstanceState()。

做需要，谢谢。

```
@Override
public void onSaveInstanceState(Bundle savedInstanceState){     
    super.onSaveInstanceState(savedInstanceState);
}

@Override 
public void onRestoreInstanceState(Bundle savedInstanceState){
    super.onRestoreInstanceState(savedInstanceState);
}
 ------------------------------------------------------------------------------------------------
 java.lang.RuntimeException: Unable to pause activity {com.sample.android/com.sample.android.SampleActivity}: java.lang.NullPointerException
 at android.app.ActivityThread.performPauseActivity(ActivityThread.java:3354)
 at android.app.ActivityThread.performPauseActivity(ActivityThread.java:3311)
 at android.app.ActivityThread.handlePauseActivity(ActivityThread.java:3294)
 at android.app.ActivityThread.access$2500(ActivityThread.java:126)
 at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2045)
 at android.os.Handler.dispatchMessage(Handler.java:99) 
 at android.os.Looper.loop(Looper.java:123)
 at android.app.ActivityThread.main(ActivityThread.java:4633)
 at java.lang.reflect.Method.invokeNative(Native Method)
 at java.lang.reflect.Method.invoke(Method.java:521)
 at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:858)
 at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)
 at dalvik.system.NativeStart.main(Native Method)
 Caused by: java.lang.NullPointerException
 at android.support.v4.view.ViewPager.onSaveInstanceState(ViewPager.java:507)
 at android.view.View.dispatchSaveInstanceState(View.java:6068)
 at android.view.ViewGroup.dispatchSaveInstanceState(ViewGroup.java:1180) 
 at android.view.ViewGroup.dispatchSaveInstanceState(ViewGroup.java:1184)
 at android.view.ViewGroup.dispatchSaveInstanceState(ViewGroup.java:1184)
 at android.view.ViewGroup.dispatchSaveInstanceState(ViewGroup.java:1184)
 at android.view.ViewGroup.dispatchSaveInstanceState(ViewGroup.java:1184)
 at android.view.View.saveHierarchyState(View.java:6051) 
 at com.android.internal.policy.impl.PhoneWindow.saveHierarchyState(PhoneWindow.java:1490)
 at android.app.Activity.onSaveInstanceState(Activity.java:1086)
 at com.yoke.android.SampleActivity.onSaveInstanceState(YokeActivity.java:352)
 at android.app.Activity.performSaveInstanceState(Activity.java:1036)
 at android.app.Instrumentation.callActivityOnSaveInstanceState(Instrumentation.java:1180)
 at android.app.ActivityThread.performPauseActivity(ActivityThread.java:3336) 
```

# windows-7 - 从 windows 7 发送打印到 windows XP 的打印机更改了假脱机文件的格式

> ID：10204911
> 
> 赞同：2
> 
> 时间：2012-04-18T07:33:12.383
> 
> 标签：windows-7, printing, windows-xp, .emf, spooler

我有这个奇怪的问题

我在 Windows XP 上安装了一台打印机，我像这样“winprint---> NT EMF 1.003”配置了打印处理器

所以 .spl 文件是一个 EMF 格式文件。

现在我将这台打印机共享到我的办公室局域网。

当我从另一台 Windows XP 电脑发送打印时没有问题。

当我从 Windows 7 电脑发送时，.spl 文件是 pcl3 格式。为什么？

我尝试用两种方法将这台打印机安装到 Windows 7 电脑上。

a) 添加打印机--> 网络打印机或连接到另一台计算机的打印机。在这种情况下，当我打印时，.spl 文件仅在 Windows XP 机器中以 pcl3 格式创建。

b) 添加打印机--> 连接到计算机的本地打印机。然后我创建一个新的本地端口，即共享打印机的网络路径。在这种情况下，当我打印时，在 windows 7 中创建了一个 .spl 文件，即 EMF 格式！！！！！！，在 windows XP 中创建另一个文件，即 pcl3 格式。

为什么会这样？当我从 Windows 7 打印到共享打印机时，我想在 Windows XP 中创建一个 emf 格式的 .spl 文件。

# wpf - 在 wpf 中设置两个宽度相等的子元素，每个子元素占 50%

> ID：10204919
> 
> 赞同：13
> 
> 时间：2012-04-18T07:33:45.487
> 
> 标签：wpf

如果我在堆栈面板中有两个元素：

```
<StackPanel Margin="2,2,2,2" Orientation="Horizontal">
      <TextBlock Grid.Column="0" Text="{Binding Name}" />
      <TextBox Grid.Column="1" Text="{Binding Age}"/>
</StackPanel> 
```

如何将它们设置为宽度为 50%、50%？

提前致谢。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-04-18T07:45:09.880

回答您的评论

```
<Grid>
   <!-- Define Columns -->
   <Grid.ColumnDefinitions>
      <ColumnDefinition Width="*"/>
      <ColumnDefinition Width="*"/>
   </Grid.ColumnDefinitions>    

   <TextBlock Grid.Column="0" Text="{Binding Name}" />
   <TextBox Grid.Column="1" Text="{Binding Age}"/>
</Grid> 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-04-18T07:40:25.287

使用带有 2 列的 UnformGrid 或带有 2 列的 Grid

```
<UniformGrid Columns="2">
     <TextBox></TextBox>
     <TextBox></TextBox>
</UniformGrid> 
```

或者

```
 <Grid>
    <Grid.ColumnDefinitions>
        <ColumnDefinition></ColumnDefinition>
        <ColumnDefinition></ColumnDefinition>
    </Grid.ColumnDefinitions>
    <TextBlock Grid.Column="0"
               Text="{Binding Name}" />
    <TextBox Grid.Column="1"
             Text="{Binding Age}" />

</Grid> 
```

# finalbuilder - FinalBuilder 7 - 日志文件在哪里？

> ID：10204920
> 
> 赞同：1
> 
> 时间：2012-04-18T07:33:45.717
> 
> 标签：finalbuilder

我确实找到了一个名为 XXX.fbl7 的文件，其类型名为“FinalBuilder 日志文件”。如果这是文件，我该如何打开它？一旦我从 Windows 资源管理器中单击它，我就会得到“在命令行上指定的项目文件未找到或无效”

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T21:57:56.490

在桌面应用程序中，Tools->Options->Logging 部分有一个选项卡，可让您将日志导出为文本、xml 和 HTML。![最终生成器选项屏幕](../Images/cdc7ea2792aca02d72224816873cd5b1.png)

在最终构建器项目中，您还可以使用最终构建器操作以您想要的格式创建单独的日志文件。![将日志导出到文件操作](../Images/c53e5909ee680f685c97ed7a1e553226.png)

就我个人而言，我只是使用 Final Builder Server Notification 选项让我知道什么时候发生了故障，然后转到 Web 服务器并查看网页中的完整日志。![最终生成器服务器通知](../Images/e8f8bfc19af4010609293765fc27f151.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T07:38:06.887

Final Builder 日志文件是二进制文件。如果没有安装产品，您将无法打开它们。据我记得，有一个选项可以将它们导出为文本文件。但是我已经好几年没用FB了，所以我可能错了。

# jquery - 是否可以在 jquery 幻灯片中以 % 设置宽度和高度

> ID：10204921
> 
> 赞同：0
> 
> 时间：2012-04-18T07:33:48.773
> 
> 标签：jquery, drupal, slideshow

我在 drupal 工作..我使用 jquery 制作了幻灯片，但是图像在不同的浏览器中显示不同的大小。是否可以以％设置宽度和高度

```
<script src="http://test/sites/js/jqFancyTransitions.1.8.min.js" type="text/javascript"></script>
<script>
$('#ft').jqFancyTransitions({
    effect: 'zipper', // wave, zipper, curtain
    width: 682, // width of panel
    height: 268, // height of panel
    strips: 20, // number of strips
    delay: 2500, // delay between images in ms
    stripDelay: 50, // delay beetwen strips in ms
    titleOpacity: 0.7, // opacity of title
    titleSpeed: 1000, // speed of title appereance in ms
    position: 'alternate', // top, bottom, alternate, curtain
    direction: 'fountainAlternate', // left, right, alternate, random, fountain, fountainAlternate
    navigation: false, // prev and next navigation buttons
    links: false // show images as links
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T10:52:08.040

试试这个

```
width : screen.width * (desired percentage/100),
height: screen.height * (dsired percentage/100), 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T07:39:18.630

我看不到您可以直接在插件代码中，但是您可以省略宽度和高度线并使用 css 从样式表中设置相关图像的样式，并在此处以百分比设置尺寸

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T07:44:09.077

```
// set panel
        $('#'+el.id).css({
            'background-image':'url('+img[el.id][0]+')',
            'width': params.width,
            'height': params.height,
            'position': 'relative',
            'background-position': 'top left'
            }); 
```

例如：

```
// set panel
        $('#'+el.id).css({
            'background-image':'url('+img[el.id][0]+')',
            'width': a%,
            'height': b%,
            'position': 'relative',
            'background-position': 'top left'
            }); 
```

这是来自 jqFancyTransitions.1.8.js 的相关代码

您可以尝试将`params.width`和`params.height`值替换为百分比，而不是全部，而是在`//set panel`您的参数上分配 css 的位置。然而，这两个变量也在代码的其他地方使用。除非您尝试一下，否则您可能永远不知道它们会产生什么影响。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T07:44:45.273

我看不出更改为如何`% width & height`使您的图像在不同的浏览器上具有相同的大小。

定义`width & height`in`px`是在所有浏览器中具有相同大小的最佳选择。

但如果你真的想要，你应该修改那个函数参数并设置如下：

```
 $.....
   $width: '80%', // width of panel
   $height: '60%', // height of panel
   $..... 
```

# c - 用 C 编写数据库抽象层的好策略

> ID：10204925
> 
> 赞同：3
> 
> 时间：2012-04-18T07:34:01.457
> 
> 标签：c, api, postgresql, rdbms, libpq

我需要用 C 语言为 PostgreSQL ( **libpq** ) 的数据库访问 API 和可能的其他一些关系数据库管理系统编写一个数据库抽象层。

我正在考虑在**pqsql**和可能的其他数据库系统中编写我自己的现有函数的抽象。**编写这样的数据库抽象 API 时要考虑的最佳策略是什么？**

到目前为止，我最喜欢的写作计划可能是：

1.  为感兴趣的任何特定数据库系统定义标头、函数和包装器。
2.  当使用第一个连接调用（函数）时，检查并**确定**它适用于哪个**关系数据库管理系统**。
3.  包括用于数据库抽象的正确方法和定义集。

但这种处理方式可能**一次只**允许使用**一个关系数据库管理系统**。这对于数据库抽象层来说很常见吗？

**可以考虑哪些其他选择？**

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-18T11:23:12.700

不要重新发明这个轮子。

它已经重复地完成了，虽然最流行的系统 ( [ODBC](http://en.wikipedia.org/wiki/ODBC) ) 无疑是丑陋的，但它已经为您听说过的每个数据库编写了抽象。通过[UnixODBC](http://www.unixodbc.org/)项目，它也存在于 UNIX 和 POSIX UNIX 上，例如 Mac OS X。

[libdbi](http://libdbi.sourceforge.net/)是一个不那么丑陋但支持更窄数据库的替代方案。您不会像 ODBC 那样从供应商那里获得 libdbi 的驱动程序。

怎么反复？

如果 C++ 没问题，我听说过的另一个很好的数据库抽象层是诺基亚（曾经是 TrollTech）提供的[Qt 框架的](http://qt.nokia.com/) [数据库接口](http://qt-project.org/doc/qt-4.8/database.html)。它的主要优点是*已经**编写*和测试过。主要的缺点是，如果您的应用程序核心不是基于 C++ 和 Qt 的，它会有点笨拙。

其他 C++ 选项（我没有亲自使用过）是[sqlapi++](http://www.sqlapi.com/)、[dtemplatelib](http://dtemplatelib.sourceforge.net/)和[SOCI](http://soci.sourceforge.net/)。

如果此时您想知道为什么所有这些数据库抽象层都是为 C++ 编写的，也许这是一个提示。如果你用 C 编写一个 DB 抽象层，我敢打赌你会通过函数指针的结构重新发明 C++ 虚方法，并且最终可能会创建几乎和[GObject](http://en.wikipedia.org/wiki/GObject)一样丑陋的东西，在这种情况下，你不妨使用[libgdb / gnome -分贝](http://www.gnome-db.org/)。为了避免虚假虚拟方法垃圾，您可以通过运行时库路径在链接时选择您的 DB 层，并只提供一堆普通的旧函数，但我不知道为什么当有这么多现有函数时你会这样做选项就在身边。

顺便说一句，如果事实证明您根本不需要 DB 抽象，只需要一个更好的接口（因为您主要针对 Pg），请查看[libpqtypes](http://libpqtypes.esilo.com/)（纯 C，没有 C++，非常便携），也称为“什么libpq 应该是”。即使您要添加一个抽象层，也可能值得在 libpqtypes 上进行，而不仅仅是 libpq。

如果 ODBC、libdbi、libpqtypes、Qt 等不适合您，您需要定义原因，并创建一组更具体的标准来满足。

[或者：如果您的设计允许，您可能需要考虑使用具有 DB 抽象层（如Python](http://www.python.org/dev/peps/pep-0249/) ( [psycopg](http://initd.org/psycopg/) )、[Ruby](http://ruby-dbi.rubyforge.org/)、[Perl](http://dbi.perl.org/)或[Java](http://docs.oracle.com/javase/6/docs/technotes/guides/jdbc/) ( [JDBC](http://en.wikipedia.org/wiki/Java_Database_Connectivity) )）的嵌入式高级语言进行数据库访问和相关工作。所有这些都有自己被广泛采用和经过良好测试的数据库抽象层，您可以从中受益，同时仍然用 C 编写大部分程序。或者，就此而言，您可以只用 C 编写程序的性能关键部分作为库并从您选择的语言中使用它，并使用已经为您编写的健全的数据库抽象层。

数据库抽象很难。真的很难。数据库抽象使用起来并不可怕，性能不错，并且足够灵活以使用数据库，因为比愚蠢的行存储更难 - 迟早，你需要的不仅仅是一个愚蠢的行存储。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-18T08:51:40.307

我不确定您是在寻找更具体的东西还是只是一般的想法。我看到完成类似事情的常用方法是定义一个包含指向所有相关函数的函数指针的通用结构。

```
struct dbms {
    int (*connect)(const char *cs);
    int (*disconnect)(void);
    int (*query)(...);
    ...
} 
```

然后对于每个 DBMS，用指向与该 DBMS 相关的函数的指针填充这个数组。然后，您将此指针保存到某个地方适当初始化的结构，并使用它来调用（直接或从某种包装函数）...

每当我看到我想知道为什么不简单地使用 c++ 和虚拟方法。

# c# - .NET 在绘制到图形时缩放图像

> ID：10204928
> 
> 赞同：5
> 
> 时间：2012-04-18T07:34:26.777
> 
> 标签：c#, .net, bitmap, png

我想制作一个将 png 图像合并为一个 png 的程序。所有的图像都是 78px 高，120px 宽，所以我创建了一个 1200x78 的位图（我需要合并 10 个图像）它合并，但是结果 png 中的每个图像都被缩放大约 x2。为什么？

这是我的代码：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Security;
using System.Drawing.Imaging;

namespace WindowsFormsApplication1
{
    public partial class Form1 : Form
    {
        OpenFileDialog openFileDialog1;
        Bitmap bitmap;

        public Form1()
        {
            InitializeComponent();
            openFileDialog1 = new OpenFileDialog();
            openFileDialog1.Multiselect = true;
            openFileDialog1.Filter =
        "Images (*.PNG;*.JPG;*.GIF)|*.PNG;*.JPG;*.GIF|" +
        "All files (*.*)|*.*";
            openFileDialog1.Title = "Select images to merge";

            bitmap = new Bitmap(1200, 78);
        }

        private void button1_Click(object sender, EventArgs e)
        {
            DialogResult dr = this.openFileDialog1.ShowDialog();

            if (dr == System.Windows.Forms.DialogResult.OK)
            {
                // Read the files
                int shift = 0;
                foreach (String file in openFileDialog1.FileNames)
                {
                    // Create a PictureBox.
                    try
                    {
                        PictureBox pb = new PictureBox();
                        Image loadedImage = Image.FromFile(file);
                        pb.Height = loadedImage.Height;
                        pb.Width = loadedImage.Width;
                        pb.Image = loadedImage;
                        flowLayoutPanel2.Controls.Add(pb);

                        paintToBitmap(loadedImage, shift);

                        shift += loadedImage.Width;
                    }
                    catch (SecurityException ex)
                    {
                        //  The user lacks appropriate permissions to read files, discover paths, etc.
                        MessageBox.Show("Security error\n\n" +
                           "Error message: " + ex.Message + "\n\n" +
                            "Details (send to Support):\n\n" + ex.StackTrace
                        );
                    }
                    catch (Exception ex)
                    {
                        // Could not load the image - probably related to Windows file system permissions.
                        MessageBox.Show("!!!");
                    }
                }

                saveImage();
            }
        }

        private void paintToBitmap(Image image, int shift)
        {           
            Graphics graphics = Graphics.FromImage(bitmap);
            graphics.DrawImage(image, new Point(shift, 0));
        }

        private void saveImage()
        {
            bitmap.Save("d:\\result.png", System.Drawing.Imaging.ImageFormat.Png);
        }

        private void flowLayoutPanel2_Paint(object sender, PaintEventArgs e)
        {

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T07:54:31.313

尝试将您的代码更新为此

```
graphics.DrawImage(image, new Rectangle(shift, 0,120,78)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T07:54:10.733

似乎它试图使图片适应您的“粉红狗：P”图像的大小。当你用背景填充图像时，它会以不同的方式产生。看到这个：

![http://i.stack.imgur.com/3eVEu.png](../Images/4995b665cbc26d42b94fac3e8c65b678.png) ![http://i.stack.imgur.com/DaygF.png](../Images/f1330e481c1b91950c60ec9ecfea7ee3.png) ![http://i.stack.imgur.com/xwEve.png](../Images/4daf72a569cd1c855c2827ae5376edf4.png)

所以，问题似乎出在你图片的隐形背景上。

# objective-c - UIImage 没有显示在 iPad 设备上，但它显示在 iPad 模拟器上

> ID：10204930
> 
> 赞同：1
> 
> 时间：2012-04-18T07:34:35.803
> 
> 标签：objective-c, ios, ipad, ios5, uiimage

这是我正在使用的代码。请记住，这在模拟器中工作得很好。但是，当我在 iPad 设备上测试时运行相同的代码时，它不会加载图像。为什么会这样？

```
SDWebImageManager *manager = [SDWebImageManager sharedManager];
NSURL *url = [NSURL URLWithString:@"http://www.mywebsite.net/folder/Photos/thumbnails/IMG_1780.JPG"];
UIImage *cachedImage = [manager imageWithURL:url];

if (cachedImage)
{
    // Use the cached image immediatly
}
else
{
    // Start an async download
    [manager downloadWithURL:url delegate:self];
}

UIButton *button = [[UIButton alloc] initWithFrame:CGRectMake(80+196, 5, 192, 192)];
[button setImage:cachedImage forState:UIControlStateNormal];
[button addTarget:self action:@selector(imageSelected:) forControlEvents:UIControlEventTouchUpInside];
[cell addSubview:button];
return cell; 
```

我将不胜感激任何帮助！谢谢！

编辑：修改后的代码，仍然可以在 Sim 中使用，但不能在设备上使用。

```
 - (void)webImageManager:(SDWebImageManager *)imageManager didFinishWithImage:(UIImage *)image
{
    // Do something with the downloaded image
    //testImage = image;
    testButton = [[UIButton alloc] initWithFrame:CGRectMake(80+196, 5, 192, 192)];
    [testButton setImage:image forState:UIControlStateNormal];
    [testButton addTarget:self action:@selector(imageSelected:) forControlEvents:UIControlEventTouchUpInside];

}
    SDWebImageManager *manager = [SDWebImageManager sharedManager];
    NSURL *url = [NSURL URLWithString:@"http://www.mywebsite.net/album/Photos/thumbnails/IMG_1780.JPG"];
    UIImage *cachedImage = [manager imageWithURL:url];
    [self webImageManager:manager didFinishWithImage:cachedImage];
    if (cachedImage)
    {
        // Use the cached image immediatly
        //[self webImageManager:manager didFinishWithImage:cachedImage];
        UIButton *button = [[UIButton alloc] initWithFrame:CGRectMake(80+196, 5, 192, 192)];
        [button setImage:cachedImage forState:UIControlStateNormal];
        [button addTarget:self action:@selector(imageSelected:) forControlEvents:UIControlEventTouchUpInside];
        [cell addSubview:testButton];
    }
    else
    {
        // Start an async download
        [manager downloadWithURL:url delegate:self];
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T07:45:31.790

从未使用过 SDWebImageManager，但只是快速浏览了一下，看起来你做的一切都是正确的！另一方面，它不起作用，所以......

我曾经遇到过类似的问题，经过大量的头发撕裂后，我最终发现设备和模拟器上使用的文件系统是不同的——在你的 iPad 上，我相信它是区分大小写的，但在模拟器上不一样。仔细检查文件名的大小写，它可能会有所不同。

编辑-另外，我假设您正在尝试使用缓存的图像（这就是它立即出现的原因），但是如果您正在下载一个，那么我希望您的按钮初始化代码为时过早。

另一个编辑 - 代表！

你知道使用 SDWebImageManager 的委托吗？它可能有一个在图像下载时调用的方法 - 您需要在设置按钮的类中实现 SDWebImageManager 委托协议等 - 将有一个类似 -(void)imageDidFinishDownloading:(UIImage *)myImage 您必须包含它，这就是您需要将图像放入按钮的地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T12:53:58.873

写一个新答案比编辑我的上一个答案更容易。

这是一些可能有用的代码 -

```
-(void)webImageManager:(SDWebImageManager *)imageManager didFinishWithImage:(UIImage *)image {

    // unless you have a way to know which row it's going into, we'll just add it to the end of the array

    [downloadedImages addObject:image];

    [myTable reloadData];

}

-(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    return [downloadedImages count];
}

-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
    }

    NSInteger row = indexPath.row;

    UIImage *theImage = [downloadedImages objectAtIndex:row];

    UIButton *testButton = [[[UIButton alloc] initWithFrame:CGRectMake(80+196, 5, 192, 192)] autorelease];
    testButton.tag = row; // so we know which row the pressed button is in

    [testButton setImage:theImage forState:UIControlStateNormal];
    [testButton addTarget:self action:@selector(imageSelected:) forControlEvents:UIControlEventTouchUpInside];

    [cell.contentView addSubview:testButton];

    return cell;

}

-(void)imageSelected:(UIButton *)pressedButton {

    NSInteger row = pressedButton.tag;

    // now you know which row was pressed...
} 
```

在此处更改您的代码（不要将其放在 tableView:cellForRowAtIndexPath: 方法中！） -

```
SDWebImageManager *manager = [SDWebImageManager sharedManager];
NSURL *url = [NSURL URLWithString:@"http://www.mywebsite.net/folder/Photos/thumbnails/IMG_1780.JPG"];
UIImage *cachedImage = [manager imageWithURL:url];

if (cachedImage) {

    // Use the cached image immediately
    [downloadedImages addObject:cachedImage];

    [myTable reloadData];

} else {
    // Start an async download
    [manager downloadWithURL:url delegate:self];
} 
```

显然这是非常基本的 - 你需要添加东西来重置表格，或者如果图像超过几个，则将图像写入文件。希望能帮助到你！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T07:38:04.290

可能有点太明显了，但是，你检查过你的 iPad 是否有互联网连接吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T07:38:13.597

当您尝试创建 UIButton 时，异步下载可能未完成。最后一段代码应该在下载完成后在`if`语句内部调用（据我从这段代码中可以看出）。

# neural-network - 人工神经网络：选择初始神经元

> ID：10204933
> 
> 赞同：2
> 
> 时间：2012-04-18T07:34:46.423
> 
> 标签：neural-network

如何选择初始结构（神经元和它们之间的连接）？我的书只说明我们在训练网络之前一开始就给连接随机权重。

我认为我们会在训练期间像这样添加神经元：

1.  从一个完全空的网络开始
2.  我在训练期间生成的第一个值将不存在
3.  添加一个神经元来对应这个值，权重随机

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T07:58:19.640

What you are after is a self-organizing ANN. Usually, the way the connections are organized is man-made into a model that the developer thinks will have sufficient power to perform the computation neccessary. You can of course start with a random selection of nodes with random connections, but the evolution of such a network will probably take a lot longer time than a standard two or three layer network.

So, yes, you are right in that you would use a similar approach when doing a self-organizing network. Keep track of two sets of genetic algorithms, one for the structure and one for the weights (or combine the two in some devious way) and evolve as you please.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T20:27:46.927

我不相信这个问题是关于自组织或 GA 进化的人工神经网络。听起来更像是关于最常见的 ANN：感知器（单层或多层），在这种情况下，网络的结构：层数和层大小，必须在开始时手动选择. 初始化权重的一个简单的初始经验法则是简单地选择 -1.0 和 1.0 之间的均匀随机值。

# python - 使用 beautifulsoup提取标签之间的数据

> ID：10204935
> 
> 赞同：1
> 
> 时间：2012-04-18T07:34:57.707
> 
> 标签：python, beautifulsoup

我有这个 html 数据，我需要对其进行解析以从中提取数据。但是它有这么多标签，而且数据对我来说也很难导航。从下面的 Html 数据中，我需要创建一个 python 字典列表，如下所示：

> [{“学校”：“孩子们玩”}，{“地点”：“纽约”}，{“级别”：“四个”}，{“国家”：“美国”}，{“课程级别”：“简单的”}]

```
<div class="quick">
 <strong>School</strong><br /> Childs play <br /><br />
 <strong>Place</strong><br />
 <a href="Search.aspx?Menu=new&amp;Me=">newyork</a><br /><br />
 <strong>Level</strong><br />four<br /><br />
 <strong>Country</strong><br />USA<br /><br />
 <strong>Level Of Course</strong><br />Easy<br /><br />
</div> 
```

我尝试使用beautifulsoup，但没有成功。请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T07:59:38.283

Unfortunately, the HTML is not ideally constructed for parsing, but it is possible to extract the data into a meaningful Python dictionary.

```
from BeautifulSoup import BeautifulSoup
soup = BeautifulSoup(htmlString)

raw_data = soup.find(**{"class": "quick"}).contents
data = [x for x in raw_data if not hasattr(x, "name") or not x.name == "br"] 
```

Using `if not hasattr(x, "name") or not x.name == "br"` first checks to make sure that the item is an instance of `NavigableString` and then checks that the element is not a `<BR>` tag.

`data` will then be of the format `[<KEY>, <VALUE>, <KEY>, <VALUE>]` from which it should be fairly trivial to extract the data.

# facebook - 如何强制 facebookexternalhit 重新访问？

> ID：10204940
> 
> 赞同：4
> 
> 时间：2012-04-18T07:35:37.917
> 
> 标签：facebook

我正在通过发布它们来玩 Facebook 链接。在第一次来自包含“facebookexternalhit”的用户代理的访问将访问您的网站并查找[一些元标记](http://developers.facebook.com/docs/share/)。

到目前为止效果很好。但是，如果我尝试重新发布链接，则不会发生任何后续呼叫。如何触发让 facebook 再次读取页面？

我可以使用一些 API 调用来触发更新吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T07:42:39.100

在[Like Button](http://developers.facebook.com/docs/reference/plugins/like/)的文档中它说：

> **Facebook 什么时候抓取我的页面？**
> 
> Facebook 需要抓取您的页面以了解如何在网站周围显示它。
> 
> Facebook 每 24 小时抓取一次您的页面，以确保属性是最新的。当 Open Graph 页面的管理员单击 Like 按钮以及将 URL 输入 Facebook URL Linter 时，该页面也会被抓取。Facebook 会观察您 URL 上的缓存标头 - 它会按优先顺序查看“过期”和“缓存控制”。但是，即使您指定更长的时间，Facebook 也会每 24 小时抓取一次您的页面。
> 
> 爬虫的用户代理是：“facebookexternalhit/1.1 (+http://www.facebook.com/externalhit_uatext.php)”

Linter 现在被称为[Facebook 调试器](http://developers.facebook.com/tools/debug)，当您将它用于 url 时，它将清除 facebook 缓存中相同的 url，然后缓存新结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-16T21:23:58.693

您可以使用的一个技巧是简单地将“随机”GET 参数附加到您共享的 URL。它不会对页面内容产生任何影响，但会导致 Facebook 的爬虫机器人重新访问您的网站。

原始网址：

```
http://example.com
http://example.com?param=1 
```

将强制“重新访问”的新 URL：

```
http://example.com?cache_buster=784932789532
http://example.com?param=1&cache_buster=784932789532 
```

# user-controls - 复合控件的设计时支持

> ID：10204941
> 
> 赞同：0
> 
> 时间：2012-04-18T07:35:43.567
> 
> 标签：user-controls, datagridview, c#-2.0, design-time

我正在创建一个包含两个滚动条的特定 DataGridView 控件，以便我可以控制它们的大小和可见性。因此，我创建了一个包含 DataGridView 和 2x2 TableLayoutPanel 内的两个滚动条的用户控件。

我面临的问题是，当我将控件添加到 Windows 窗体时，我无法设置我的 DataGridView 的 DataSource 或从设计视图定义列样式，因为我在使用通用 DataGridView 时使用的链接（出现在 DataGridView 右上角的那个小白色箭头）没有出现。

在进行一些测试时，我看到如果我从 DataGridView 继承我的控件，则会出现该链接。但如果我这样做，我想我只能扩展 DataGridView 的功能，但我需要我的控件是一个复合控件。

所以，这就是我的问题：我怎样才能在我的自定义控件上获得这些设计时功能？我对列布局和数据源特别感兴趣。

此致。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T08:01:15.300

如果您正在执行*用户控件*（具有 .ascx 代码隐藏文件的控件），似乎无法控制： [如何在设计器中隐藏 UserControl 的内部控件？](https://stackoverflow.com/questions/3669582/how-to-hide-the-inner-controls-of-a-usercontrol-in-the-designer)

如果你正在做一个*WebControl*（一个从没有 .ascx 文件的 WebControl 中引入的类），你可以创建自己的设计器，并且可能以某种方式输出两个控件的设计器。看看： http: [//msdn.microsoft.com/en-us/library/12yydcke.aspx](http://msdn.microsoft.com/en-us/library/12yydcke.aspx)它解释了如何创建一个 webcontrol 及其设计器。

usercontrols/webcontrols 的一些事情似乎很容易，但很难实现......

希望这可以帮助！

# django - Python 的 Django 无法连接到 Oracle 11g

> ID：10204942
> 
> 赞同：0
> 
> 时间：2012-04-18T07:35:45.293
> 
> 标签：django, oracle11g, database-connection, python-2.7

我是 Python 的新手，正在尝试使用 Django 快速构建网站。

以下是我执行的步骤（Win 7）：

*   安装 Python 2.7
*   安装 Django 1.4
*   创建了一个项目和应用程序
*   使用“”启动服务器`python manage.py startserver`并使用“http://127.0.0.1:8000”访问基本页面。
*   现在想为我的项目配置我的 Oracle 11g 数据库。因此，安装`cx_Oracle 5.1-11g`并尝试了 ' `python manage.py syncdb`'，但由于**cx_Oracle.DatabaseError: ORA-24315: 非法属性类型**而失败。
*   即使从 python 解释器也得到了同样的错误。

    ```
    import cx_Oracle
     connection=cx_Oracle.Connection('python_user','python_user','(DESC..string..)') 
    ```

* * *

```
 Traceback (most recent call last):
       File "<stdin>", line 1, in <module>
    cx_Oracle.DatabaseError: ORA-24315: illegal attribute type 
```

*   根据我的故障排除，我正在使用正确的凭据和库。

任何帮助表示赞赏..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T17:51:12.617

主要问题是以下版本应该相互兼容。

`Python 2.7`, `Django 1.4`,`Oracle DB 11g (which I connect to)`和 lib`cx_Oracle 5.0.3+-11g`应该兼容`Oracle Xe 11.2`（之前是 10.2）。

安装正确的版本并将 ORACLE_HOME 设置为 ' `C:/oraclexe/.../11.2.0/server`' 后，它开始连接，没有任何问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T09:06:02.413

通过引发显式异常来检查*哪个*属性失败可能会帮助您朝着正确的方向前进

```
try:
    connection=cx_Oracle.Connection('python_user','python_user','(DESC..string..)')
except cx_Oracle.DatabaseError, e:
    print e[0].context
    raise 
```

# android - 在 android 模拟器 2.0 中出现以下异常

> ID：10204946
> 
> 赞同：0
> 
> 时间：2012-04-18T07:35:58.417
> 
> 标签：android, android-xml, android-inflate

我只在 andorid 模拟器 2.0 上遇到了奇怪的异常

```
java.lang.RuntimeException: Unable to start activity ComponentInfo{com.markupartist.android.example.pulltorefresh/com.markupartist.android.example.pulltorefresh.PullToRefreshActivity}: android.view.InflateException: Binary XML file            line #10: Error inflating class com.markupartist.android.widget.PullToRefreshListView
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
at android.app.ActivityThread.access$2300(ActivityThread.java:125)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:123)
at android.app.ActivityThread.main(ActivityThread.java:4627)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:521)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
at dalvik.system.NativeStart.main(Native Method)
Caused by: android.view.InflateException: Binary XML file line #10: Error inflating     class com.markupartist.android.widget.PullToRefreshListView
at android.view.LayoutInflater.createView(LayoutInflater.java:513)
at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:565)
at android.view.LayoutInflater.rInflate(LayoutInflater.java:618)
at android.view.LayoutInflater.inflate(LayoutInflater.java:407)
at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:198)
at android.app.Activity.setContentView(Activity.java:1647)
at     com.markupartist.android.example.pulltorefresh.PullToRefreshActivity.onCreate(PullToRefresh    Activity.java:21)
at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
... 11 more
Caused by: java.lang.reflect.InvocationTargetException
at com.markupartist.android.widget.PullToRefreshListView.    (PullToRefreshListView.java:54)
at java.lang.reflect.Constructor.constructNative(Native Method)
at java.lang.reflect.Constructor.newInstance(Constructor.java:446)
at android.view.LayoutInflater.createView(LayoutInflater.java:500)
... 21 more
Caused by: android.content.res.Resources$NotFoundException: Resource ID #0x7f030002
at android.content.res.Resources.getValue(Resources.java:892)
at android.content.res.Resources.loadXmlResourceParser(Resources.java:1869)
at android.content.res.Resources.getLayout(Resources.java:731)
at android.view.LayoutInflater.inflate(LayoutInflater.java:318)
at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
at     com.markupartist.android.widget.PullToRefreshListView.init(PullToRefreshListView.java:80)
... 25 more 
```

当我在 andorid 1.6、2.01、2.1、2.2、2.3、4.0 上测试时，它完全可以工作，这是 2.0 的模拟器错误吗？请给我一些关于此的信息谢谢

# cvs - cvs rtag：[07:34:59] 等待 cvsuser 锁定

> ID：10204963
> 
> 赞同：5
> 
> 时间：2012-04-18T07:37:30.740
> 
> 标签：cvs

当我执行 rtag 时，进程相当慢，消息 cvs rtag: [07:34:59] waiting for cvsuser's lock in ...; 是什么原因造成的以及如何解决这个问题？提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-18T19:27:16.783

通过 Google 搜索“cvs waiting for lock”会返回大量结果。这是我看到的第一个结果，它涵盖了您需要的所有内容：

*   [http://durak.org/sean/pubs/software/cvsbook/CVS-says-it-is-waiting-for-a-lock_003b-what-does-that-mean_003f.html](http://durak.org/sean/pubs/software/cvsbook/CVS-says-it-is-waiting-for-a-lock_003b-what-does-that-mean_003f.html)

但本质上，其他人正处于 CVS 操作的中间。等待它完成。

如果您知道情况并非如此（例如，您与该用户交谈），那么他们的 cvs 操作失败并留下了一个锁定文件。删除它。有关详细信息，请参阅链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-08T23:44:19.497

Burhan Ali 提供的链接中的信息已过时。cvs 的最新版本似乎将锁存储在 $CVSROOT/locks/project/directory... 所以如果消息是“Waiting for foo's lock in /home/cvs/myproject/html”，则锁文件在 /home/cvs /locks/myproject/html 的所有者为 foo。锁定文件的名称以#cvs 开头，但那里似乎只有锁定文件。

# matlab - Matlab：当另一个函数调用时从回调函数获取GUI句柄值

> ID：10204965
> 
> 赞同：3
> 
> 时间：2012-04-18T07:37:38.530
> 
> 标签：matlab, matlab-guide

我是 MATLAB GUI 编程的新手，所以我的问题与此有关。

假设我使用 GUIDE 创建了一个 GUI。在创建函数中

```
MyGUI_OpeningFcn(hObject, eventdata, handles, varargin) 
```

我调用另一个函数，

```
SamplingRate_Callback(handles.SamplingRate, eventdata, handles) 
```

定义为

```
function SamplingRate_Callback(hObject, eventdata, handles) 
```

SamplingRate_Callback 设置了一些变量，

```
handles.a = 1;
handles.b = 2;
handles.c = 3; 
```

`handles`结构在函数内正确更新`SamplingRate_Callback`。我遇到的问题是，除非我将功能更改为

```
function handles = SamplingRate_Callback(hObject, eventdata, handles), 
```

我无法将数据返回给调用函数，`MyGUI_OpeningFcn`. 我试过使用`guidata(gcf, handles)`and `guidata(hObject, handles)`，但都不起作用。

你能解释一下这个问题吗？

另外，我不确定何时使用`guidata(gcf, handles)`vs. `guidata(hObject, handles)`。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T07:48:40.103

根据数据的含义，您可以使用**getappdata**和**setappdata**将数据保存到对象本身或从对象本身加载数据（我通常使用将绘制数据的轴）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T08:08:00.827

你如何调用`SamplingRate_Callback`你的`MyGUI_OpeningFcn`函数？在我看来，您还没有定义返回值，`values`在这种情况下就是这样。

修复将是这样的：

```
function [handles] = SamplingRate_Callback(hObject, eventdata, handles) 
```

然后你会这样打电话`SamplingRate_Callback`：`MyGUI_OpeningFcn`

```
handles = SamplingRate_Callback(handles.SamplingRate, eventdata, handles); 
```

# model-view-controller - 身份验证模型适合 MVC 框架的什么位置？

> ID：10204967
> 
> 赞同：3
> 
> 时间：2012-04-18T07:37:48.593
> 
> 标签：model-view-controller

假设我的模块接受用户名和密码并返回 true 或 false 以指示成功或失败。这更像是一个模型还是一个控制器？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T12:22:53.757

它真的不需要存在于控制器中。如果需要，它可以在类库中。您需要有一个最终提示用户输入凭据的控制器操作/视图，但验证逻辑不需要存在于控制器操作中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T07:44:01.870

用户名、密码和成功指示器将是模型的一部分，

该模型将在视图中对客户端可见，

模型将由控制器处理。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-06T21:03:08.347

身份验证是来自模型层的服务结构，它利用域对象和数据存储结构（通常是数据映射器）。至少，它必须与`User`域对象以及持久存储（如 SQL）和 cookie 交互。它还可能需要与会话进行数据交换。

此外，当控制器将用户登录详细信息发送到模型层时，它不应该收到任何重播。该部分应该由当前视图处理，它从模型层请求用户状态。

**PS**我希望您不是将 IE 称为“互联网”而将 ASP.NET MVC 框架称为“MVC”的人之一。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T07:40:30.623

这将是来自控制器的动作。

# python - python if条件“and”关键字问题

> ID：10204968
> 
> 赞同：1
> 
> 时间：2012-04-18T07:38:01.540
> 
> 标签：python, string, if-statement

我只是尝试调用此代码

```
uname=""
passwd="jhj"
if uname =="":print "uname"
if passwd=="":print "passwd"
if not uname and passwd:
    print "either" 
```

输出是：

```
uname
either 
```

它不应该是“uname”吗？我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T07:40:35.270

简单的修复将是

```
if not uname and not passwd: 
```

因为它评估为

```
if (not uname) and (not passwd): 
```

或者

```
if not (uname or passwd): 
```

但是，如果既不提供`uname`也不`password`提供（它将打印所有三个），这将无法正常工作。

您可以将逻辑更改为此仅`print`执行一个构造的构造：

```
uname = ""
passwd = "jhj"

if not (uname or passwd):
    print "either"
elif not uname:
    print "uname"
elif not passwd:
    print "passwd" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-18T07:42:00.887

你在这里做的是：

```
if (not uname) and passwd: 
```

如果要检查它们是否都是错误的，则需要执行以下操作：

```
if not uname and not passwd: 
```

注意：

```
if not (uname and passwd): 
```

不是一回事，好像一个项目是True，整个事情都会评估为假。如果你想用 one 来做`not`，正确的逻辑是：

```
if not (uname or passwd): 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T07:43:14.263

您想要的是将`not`in`if not uname and passwd`应用于 uname 和 passwd：

`if not uname and not passwd`

或者：

`if not any((uname, passwd))`

# wix - 重大升级回滚

> ID：10204976
> 
> 赞同：2
> 
> 时间：2012-04-18T07:38:23.197
> 
> 标签：wix

在 WIX 项目中，我有一个自定义操作，可以在 SQL 服务器上使用一些数据，在某些情况下会失败。如果我安装了 1.0 版本并且我想升级到 2.0 并且自定义操作失败，则调用回滚，但是代替 1.0 二进制文件/注册表项/服务，所有数据都被删除并且我没有安装任何内容。在回滚版本 1.0 后我必须更改它以保持安装和工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T13:27:10.450

您应该将[RemoveExistingProducts](http://msdn.microsoft.com/en-us/library/windows/desktop/aa371197%28v=vs.85%29.aspx)放在 InstallExecute 操作和 InstallFinalize 操作之间。

# lotusscript - 富文本字段文件大小限制

> ID：10204978
> 
> 赞同：0
> 
> 时间：2012-04-18T07:38:34.997
> 
> 标签：lotusscript, richtext

有没有办法将文件附件限制为富文本字段。例如，我有一个名为“temp”的富文本，我想限制用户只能将 1mb 文件附加到它。这对莲花有可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T09:50:32.470

不是直接的。如果您使用标准 RichtextItems，则无法在附件导入之前检查文件大小。

您可以制作自己的导入按钮，在将文件附加到 Richtextlite 字段之前检查文件大小。

或者您可以在用户保存附件后检查大小。

# xml - IXMLDocument.SaveToFile() 使用制表符而不是空格来缩进

> ID：10204982
> 
> 赞同：7
> 
> 时间：2012-04-18T07:38:44.233
> 
> 标签：xml, delphi, delphi-2010, indentation, auto-indent

我有一个 XML 文件，它最初是使用空格缩进格式化的（每个嵌套项目 2 个空格）。

当我使用 IXMLDocument 加载和保存此文件时，空格缩进将更改为制表符（代码 #9）。

这是代码：

```
 var
   FileName: String;
   Document: IXMLDocument;
 ...
 Document := XMLDoc.LoadXMLDocument(FileName);
 Document.SaveToFile(FileName); 
```

我尝试使用`NodeIndentStr`属性 - 没有结果：

```
 Document := XMLDoc.LoadXMLDocument(FileName);
 Document.NodeIndentStr := '  ';
 Document.SaveToFile(FileName); 
```

也使用`FormatXMLData`过 - 没有结果：

```
 Document := XMLDoc.LoadXMLDocument(FileName);
 Document.XML.Text := XMLDoc.FormatXMLData(Document.XML.Text);
 Document.Active := True;
 Document.SaveToFile(FileName); 
```

如何使用空格缩进而不是制表符来保存？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-18T09:48:41.020

有一个选项`IXMLDocument`可以告诉解析器保留空白。

像这样使用它：

```
Document.ParseOptions := 
  Document.ParseOptions+[poValidateOnParse]+[poPreserveWhiteSpace]; 
```

免责声明：我没有尝试过。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-01T18:40:38.003

我不确定有什么不同，但*Document.ParseOptions + [poValidateOnParse, poPreserveWhiteSpace];* 我无法访问。

类似的工作：

```
var
    xmlDoc: IXMLDOMDocument2;

xmlDoc := CreateOleObject('Microsoft.XMLDOM') as IXMLDOMDocument2;
xmlDoc.validateOnParse := True;
xmlDoc.preserveWhiteSpace := True; 
```

# c++ - 无法使用 ncurses 确定终端大小

> ID：10204985
> 
> 赞同：4
> 
> 时间：2012-04-18T07:38:50.047
> 
> 标签：c++, macos, ncurses

我正在尝试处理调整大小信号（SIGWINCH）

```
void Server::resizeSignalHandler(int a)
{
signal(SIGWINCH, SIG_IGN);

endwin();
initscr();
refresh();
clear();

int x,y;
getmaxyx(stdscr, y, x);

wmove(upScreen, 0, 0);
wmove(downScreen, y/2, 0);
wresize(upScreen, y/2, x);
wresize(downScreen, y/2, x);
wclear(upScreen);
wclear(downScreen);
waddstr(upScreen, "test1");
waddstr(downScreen, "test2");
wrefresh(upScreen);
wrefresh(downScreen);
refresh();

signal(SIGWINCH, Server::resizeSignalHandler);

}
Server::Server()
{
//ncurses screen initialization
initscr();

if (!upScreen) {
    upScreen = newwin(0, 0, 1, 1);
}
if (!downScreen) {
    downScreen = newwin(0, 0, 1, 1);
}
//adjusting screen when user resize terminal
signal(SIGWINCH, Server::resizeSignalHandler);

//configuring screens
Server::resizeSignalHandler(0);

waddstr(Server::upScreen, "lalfasdfsafd as");
waddstr(downScreen, "supreme!");
wrefresh(Server::upScreen);
wrefresh(downScreen);
} 
```

当我调试这段代码时，在 resizeSignalHandler var x,y 中总是相同的（大小没有改变）。我还尝试使用 ioctl 确定大小，但没有任何改变。

我发现在我之前很多人都有这个问题 [http://www.mail-archive.com/arch@archlinux.org/msg11253.html](http://www.mail-archive.com/arch@archlinux.org/msg11253.html) 有时，他们解决了这个问题（更改 /etc/profile ;O（原文如此！）） ，但有时不是。是否有任何替代 mac os x 终端，也许 ncurses 专用于 xterm 和类似的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-10-20T21:24:06.863

那是因为你得到的值`getmaxyx`是由监听的信号处理程序自己更新的`SIGWINCH`。您需要使用以下内容保存指向旧信号的指针：

```
old_callback = signal(SIGWINCH, Server::resizeSignalHandler); 
```

然后调用它`resizeSignalHandler`：

```
old_callback(a); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-16T11:39:31.353

`getmaxyx(...)`由于自定义`SIGWINCH`信号处理程序，给出了错误（未更新）的终端尺寸。

您可以使用`ioctl(fileno(stdout), TIOCGWINSZ, struct winsize*)`获取更新的终端参数。但这不会更新`getmaxyx(...)`.

要更新`getmaxyx(...)`数据，您应该调用`resize_term(size.ws_row, size.ws_col)`

因此信号处理程序代码应如下所示：

```
void on_terminal_resize(int n) {
    struct winsize size;

    if (ioctl(fileno(stdout), TIOCGWINSZ, &size) == 0) {
        resize_term(size.ws_row, size.ws_col);
    }
    // Your code goes here...
    signal(SIGWINCH, on_terminal_resize);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T09:32:32.247

我不确定，但我认为您必须致电`ioctl(1, TIOCGWINSZ, struct winsize*)`以获取更新的终端参数。见`man tty_ioctl`。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-18T09:22:28.447

我没有mac机器，无法测试。但我想伪终端 bash 正在更新 $LINES 和 $COLUMNS 上运行，但这些更新不会传递给您的程序分配到的伪终端。这是因为你说 WINCH 信号被捕获，但那些参数没有更新。一种解决方法是在信号处理程序中执行`"/usr/X11/bin/resize"`/ `"/usr/bin/resize"` 。可能这会正确更新 $LINES 和 $COLUMNS。

# .net - 最容易在 .net 中找到两个时间戳之间的完整日历年、月、日和小时

> ID：10204986
> 
> 赞同：2
> 
> 时间：2012-04-18T07:38:55.873
> 
> 标签：.net, algorithm, datetime

我想做的如下

给定两个日期，例如 1998 年 3 月 2 日和 2011 年 9 月 25 日。如何将间隔拆分为

1.  1998年3月2日至1998年3月31日（30天）
2.  1998 年 4 月 1 日至 1998 年 12 月 31 日（9 个月）
3.  1999 年 1 月 1 日至 2010 年 12 月 31 日（11 年）
4.  2011 年 1 月 1 日至 2011 年 8 月 31 日（8 个月）
5.  2011 年 9 月 1 日至 2011 年 9 月 25 日（30 天）

    但是，如果任何间隔不存在，我们不想强制包含它，即结果不会总是天/月/年/月/天，例如

    给定开始日期 = '1998-02-01' 和结束日期 = '2011-03-31'，预期结果是（月/年/月）

    1998-02-01 ==> 1998-12-31 1999-01-01 ==> 2010-12-31 2011-01-01 ==> 2011-03-31

    给定开始日期 = '1998-02-01' 和结束日期 = '1998-03-31'，预期结果是（2 个月）

    1998-02-01 ==> 2011-03-31

    给定开始日期 = '1998-01-05' 和结束日期 = '1998-02-03'，预期结果是（天/天）
    1998-01-05 ==> 2011-01-31 1998-02-01 ==> 2011-02-03

如果我的描述没有意义，请查看以下内容。我正在尝试完成相同但在.net

[在任意时间范围内找到最佳日/月/年间隔的算法？](https://stackoverflow.com/questions/7164722/algorithm-to-find-optimal-day-month-year-intervals-to-in-an-arbitrary-timeframe)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T07:55:44.040

你可以这样做：

```
DateTime startDate = new DateTime(1998, 3, 2);
DateTime endDate = new DateTime(2011, 9, 25);

DateTime firstMonth = new DateTime(startDate.Year, startDate.Month, 1).AddMonths(1);
DateTime firstYear = new DateTime(startDate.Year + 1, 1, 1);
DateTime lastYear = new DateTime(endDate.Year, 1, 1);
DateTime lastMonth = new DateTime(endDate.Year, endDate.Month, 1);

Console.WriteLine("{0:yyyy-MM-dd} - {1:yyyy-MM-dd}", startDate, firstMonth.AddDays(-1));
Console.WriteLine("{0:yyyy-MM-dd} - {1:yyyy-MM-dd}", firstMonth, firstYear.AddDays(-1));
Console.WriteLine("{0:yyyy-MM-dd} - {1:yyyy-MM-dd}", firstYear, lastYear.AddDays(-1));
Console.WriteLine("{0:yyyy-MM-dd} - {1:yyyy-MM-dd}", lastYear, lastMonth.AddDays(-1));
Console.WriteLine("{0:yyyy-MM-dd} - {1:yyyy-MM-dd}", lastMonth, endDate); 
```

输出：

```
1998-03-02 - 1998-03-31
1998-04-01 - 1998-12-31
1999-01-01 - 2010-12-31
2011-01-01 - 2011-08-31
2011-09-01 - 2011-09-25 
```

# actionscript-3 - AS3 for 循环实例名称 + i

> ID：10204987
> 
> 赞同：1
> 
> 时间：2012-04-18T07:38:59.350
> 
> 标签：actionscript-3, flash, for-loop

我有一些 AS3（我是新手！），我可以让代码工作的唯一方法是非常文字化并一遍又一遍地复制它，所以我想知道是否有人能够提供更优雅的解决方案？

我保证我会从中吸取教训——我只是无法让 for 循环工作，因为在尝试使用 for 循环中的整数来构建名称时，动态影片剪辑没有被它们的实例名称识别（如果这有意义的话?)...

到目前为止，这是我的（庞大的）代码，我希望它能够满足 50 次点击，而不仅仅是我这里的 6 次：

```
import flash.display.*
pic.addEventListener(MouseEvent.CLICK,addNewPoint);

var n:Number = 0;

function addNewPoint(e:MouseEvent):void {
    n++;
    pointNo.text = String(n);
    // Create a new MovieClip
    var nextPoint:MovieClip = new newPoint();

    // Add the new MovieClip to the MainTimeline
    // so that we can see it.
    addChild(nextPoint);
    nextPoint.name = "mc"+pointNo.text;

    // Set the location of the new MovieClip
    nextPoint.x = e.target.mouseX;
    nextPoint.y = e.target.mouseY;

    //Draw the line between points
    if (n == 1) {
        var joinPoints:MovieClip = new MovieClip();
        this.addChild(joinPoints);
        joinPoints.graphics.lineStyle(0.5,0xFF0000);
        joinPoints.graphics.moveTo(this.getChildByName("mc1").x, this.getChildByName("mc1").y);
    }else if (n == 2) {
        var joinPoints:MovieClip = new MovieClip();
        this.addChild(joinPoints);
        joinPoints.graphics.lineStyle(0.5,0xFF0000);
        joinPoints.graphics.moveTo(this.getChildByName("mc1").x, this.getChildByName("mc1").y);
        joinPoints.graphics.lineTo(this.getChildByName("mc2").x, this.getChildByName("mc2").y);
    }else if (n == 3) {
        var joinPoints:MovieClip = new MovieClip();
        this.addChild(joinPoints);
        joinPoints.graphics.lineStyle(0.5,0xFF0000);
        joinPoints.graphics.moveTo(this.getChildByName("mc1").x, this.getChildByName("mc1").y);
        joinPoints.graphics.lineTo(this.getChildByName("mc2").x, this.getChildByName("mc2").y);
        joinPoints.graphics.lineTo(this.getChildByName("mc3").x, this.getChildByName("mc3").y);
    }else if (n == 4) {
        var joinPoints:MovieClip = new MovieClip();
        this.addChild(joinPoints);
        joinPoints.graphics.lineStyle(0.5,0xFF0000);
        joinPoints.graphics.moveTo(this.getChildByName("mc1").x, this.getChildByName("mc1").y);
        joinPoints.graphics.lineTo(this.getChildByName("mc2").x, this.getChildByName("mc2").y);
        joinPoints.graphics.lineTo(this.getChildByName("mc3").x, this.getChildByName("mc3").y);
        joinPoints.graphics.lineTo(this.getChildByName("mc4").x, this.getChildByName("mc4").y);
    }
    else if (n == 5) {
        var joinPoints:MovieClip = new MovieClip();
        this.addChild(joinPoints);
        joinPoints.graphics.lineStyle(0.5,0xFF0000);
        joinPoints.graphics.moveTo(this.getChildByName("mc1").x, this.getChildByName("mc1").y);
        joinPoints.graphics.lineTo(this.getChildByName("mc2").x, this.getChildByName("mc2").y);
        joinPoints.graphics.lineTo(this.getChildByName("mc3").x, this.getChildByName("mc3").y);
        joinPoints.graphics.lineTo(this.getChildByName("mc4").x, this.getChildByName("mc4").y);
        joinPoints.graphics.lineTo(this.getChildByName("mc5").x, this.getChildByName("mc5").y);
    }
    else if (n == 6) {
        var joinPoints:MovieClip = new MovieClip();
        this.addChild(joinPoints);
        joinPoints.graphics.lineStyle(0.5,0xFF0000);
        joinPoints.graphics.moveTo(this.getChildByName("mc1").x, this.getChildByName("mc1").y);
        joinPoints.graphics.lineTo(this.getChildByName("mc2").x, this.getChildByName("mc2").y);
        joinPoints.graphics.lineTo(this.getChildByName("mc3").x, this.getChildByName("mc3").y);
        joinPoints.graphics.lineTo(this.getChildByName("mc4").x, this.getChildByName("mc4").y);
        joinPoints.graphics.lineTo(this.getChildByName("mc5").x, this.getChildByName("mc5").y);
        joinPoints.graphics.lineTo(this.getChildByName("mc6").x, this.getChildByName("mc6").y);
    }
}

pic.addEventListener(MouseEvent.CLICK, addNewPoint);

function fillDriveway(eventObject:MouseEvent) {
    var joinPoints:MovieClip = new MovieClip();
    this.addChild(joinPoints);
    if (n == 3) {
        var joinPoints:MovieClip = new MovieClip();
        this.addChild(joinPoints);
        joinPoints.graphics.lineStyle(0.5,0xFFFFFF);
        joinPoints.graphics.beginFill(0xFFFFFF, 0.2);
        joinPoints.graphics.moveTo(this.getChildByName("mc1").x, this.getChildByName("mc1").y);
        joinPoints.graphics.lineTo(this.getChildByName("mc2").x, this.getChildByName("mc2").y);
        joinPoints.graphics.lineTo(this.getChildByName("mc3").x, this.getChildByName("mc3").y);
        this.getChildByName("mc1").visible=false;
        this.getChildByName("mc2").visible=false;
        this.getChildByName("mc3").visible=false;
    }else if (n == 4) {
        var joinPoints:MovieClip = new MovieClip();
        this.addChild(joinPoints);
        joinPoints.graphics.lineStyle(0.5,0xFFFFFF);
        joinPoints.graphics.beginFill(0xFFFFFF, 0.2);
        joinPoints.graphics.moveTo(this.getChildByName("mc1").x, this.getChildByName("mc1").y);
        joinPoints.graphics.lineTo(this.getChildByName("mc2").x, this.getChildByName("mc2").y);
        joinPoints.graphics.lineTo(this.getChildByName("mc3").x, this.getChildByName("mc3").y);
        joinPoints.graphics.lineTo(this.getChildByName("mc4").x, this.getChildByName("mc4").y);
        this.getChildByName("mc1").visible=false;
        this.getChildByName("mc2").visible=false;
        this.getChildByName("mc3").visible=false;
        this.getChildByName("mc4").visible=false;
    }else if (n == 5) {
        var joinPoints:MovieClip = new MovieClip();
        this.addChild(joinPoints);
        joinPoints.graphics.lineStyle(0.5,0xFFFFFF);
        joinPoints.graphics.beginFill(0xFFFFFF, 0.2);
        joinPoints.graphics.moveTo(this.getChildByName("mc1").x, this.getChildByName("mc1").y);
        joinPoints.graphics.lineTo(this.getChildByName("mc2").x, this.getChildByName("mc2").y);
        joinPoints.graphics.lineTo(this.getChildByName("mc3").x, this.getChildByName("mc3").y);
        joinPoints.graphics.lineTo(this.getChildByName("mc4").x, this.getChildByName("mc4").y);
        joinPoints.graphics.lineTo(this.getChildByName("mc5").x, this.getChildByName("mc5").y);
        this.getChildByName("mc1").visible=false;
        this.getChildByName("mc2").visible=false;
        this.getChildByName("mc3").visible=false;
        this.getChildByName("mc4").visible=false;
        this.getChildByName("mc5").visible=false;
    }else if (n == 6) {
        var joinPoints:MovieClip = new MovieClip();
        this.addChild(joinPoints);
        joinPoints.graphics.lineStyle(0.5,0xFFFFFF);
        joinPoints.graphics.beginFill(0xFFFFFF, 0.2);
        joinPoints.graphics.moveTo(this.getChildByName("mc1").x, this.getChildByName("mc1").y);
        joinPoints.graphics.lineTo(this.getChildByName("mc2").x, this.getChildByName("mc2").y);
        joinPoints.graphics.lineTo(this.getChildByName("mc3").x, this.getChildByName("mc3").y);
        joinPoints.graphics.lineTo(this.getChildByName("mc4").x, this.getChildByName("mc4").y);
        joinPoints.graphics.lineTo(this.getChildByName("mc5").x, this.getChildByName("mc5").y);
        joinPoints.graphics.lineTo(this.getChildByName("mc6").x, this.getChildByName("mc6").y);
        this.getChildByName("mc1").visible=false;
        this.getChildByName("mc2").visible=false;
        this.getChildByName("mc3").visible=false;
        this.getChildByName("mc4").visible=false;
        this.getChildByName("mc5").visible=false;
        this.getChildByName("mc6").visible=false;
    }
}

btn1.addEventListener(MouseEvent.CLICK, fillDriveway);

function undoit(eventObject:MouseEvent) {
    if(n > 0) {
        this.removeChild(this.getChildAt(this.numChildren -1));
        this.removeChild(this.getChildAt(this.numChildren -1));
        n--;
        pointNo.text = String(n);
    }
}

undo.addEventListener(MouseEvent.CLICK, undoit); 
```

**编辑 - - - - - - - - - - - - - - - - - - - - - -

感谢 Eduardo - 完成的代码如下所示：**

```
import flash.display.*

pic.addEventListener(MouseEvent.CLICK,addNewPoint);

var n:Number = 0;

function addNewPoint(e:MouseEvent):void {
    n++;
    pointNo.text = String(n);
    // Create a new MovieClip
    var nextPoint:MovieClip = new newPoint();

    // Add the new MovieClip to the MainTimeline
    // so that we can see it.
    addChild(nextPoint);
    nextPoint.name = "mc"+pointNo.text;

    // Set the location of the new MovieClip
    nextPoint.x = e.target.mouseX;
    nextPoint.y = e.target.mouseY;

    //Draw the line between points
    var joinPoints:MovieClip = new MovieClip();
    this.addChild(joinPoints);
    joinPoints.graphics.lineStyle(0.5,0xFF0000);
    joinPoints.graphics.moveTo(this.getChildByName("mc1").x, this.getChildByName("mc1").y);
    for(var i:int=2; i<=n; ++i){
      joinPoints.graphics.lineTo(this.getChildByName("mc"+i).x, this.getChildByName("mc"+i).y);
    }
}

pic.addEventListener(MouseEvent.CLICK, addNewPoint);

function fillDriveway(eventObject:MouseEvent) {
    var joinPoints:MovieClip = new MovieClip();
    this.addChild(joinPoints);
    joinPoints.graphics.lineStyle(0.5,0xFFFFFF);
    joinPoints.graphics.beginFill(0xFFFFFF, 0.2);
    joinPoints.graphics.moveTo(this.getChildByName("mc1").x, this.getChildByName("mc1").y);
    for(var i:int=2; i<=n; ++i){
      joinPoints.graphics.lineTo(this.getChildByName("mc"+i).x, this.getChildByName("mc"+i).y);
    }
}

btn1.addEventListener(MouseEvent.CLICK, fillDriveway); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T07:44:54.043

您可以通过执行以下操作来简化 if：

```
var joinPoints:MovieClip = new MovieClip();
this.addChild(joinPoints);
joinPoints.graphics.lineStyle(0.5,0xFF0000);
joinPoints.graphics.moveTo(this.getChildByName("mc1").x, this.getChildByName("mc1").y);
for(var i:int=2; i<=numpoints; ++i){
  joinPoints.graphics.lineTo(this.getChildByName("mc"+i).x, this.getChildByName("mc"+i).y);
} 
```

这将处理第一组如果，第二组可以以类似的方式处理

# java - Oracle SQL / Java：从查询中获取返回数据集的大小

> ID：10204996
> 
> 赞同：0
> 
> 时间：2012-04-18T07:39:46.643
> 
> 标签：java, sql, oracle

是否可以知道 SQL 语句返回的数据集的大小（以字节为单位）

如果从查询本身我可以得到数据的大小，那就太好了。我发现了类似使用 SQL Plus 的东西，但我无法在我的 Java 代码中使用它。

我知道Java可能有办法做到这一点，任何人都可以指导我如何做到这一点。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T07:44:09.740

[文档](http://docs.oracle.com/javase/7/docs/api/java/sql/ResultSet.html)：

> 一个`ResultSet`对象维护一个指向其当前数据行的游标。最初，光标位于第一行之前。next 方法将光标移动到下一行，并且因为它在 ResultSet 对象中没有更多行时返回 false，所以可以在 while 循环中使用它来遍历结果集。

`ResultSet`不是集合，它只是用于以行方式获取数据的游标的抽象。

那么，究竟需要什么？存储结果所需的内存量？数据库中数据的大小？...？**为什么会好看？**

您始终可以`SELECT COUNT(*) FROM`使用某个平均行大小来估计结果大小......`SELECT COUNT(*)`您可以使用更复杂的方式代替使用：转到最后一个元素`ResultSet.last()`并获取行号：`ResultSet.getRow()`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T07:46:01.310

> 我知道Java可能有办法做到这一点，任何人都可以指导我如何做到这一点。

我很确定答案是没有简单的方法可以做到这一点。

JDBC 抽象对您隐藏了数据库驱动程序的实现细节，并且用于对结果集进行编码的字节数是特定于驱动程序的。

一旦结果集被具体化到 Java 堆中，理论上就可以找出它的大小。但在实践中，您必须遍历结果集中的每个堆节点......这不是一个简单的问题。

* * *

> COUNT() 方法为我们提供查询的行数，有没有办法将其转换为字节？

一句话，没有。甚至在理论上也没有。