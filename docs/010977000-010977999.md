# StackOverflow 问答 10977000-10977999

# python - Matplotlib 热图，垂直底部标签

> ID：10977005
> 
> 赞同：2
> 
> 时间：2012-06-11T08:57:42.917
> 
> 标签：python, matplotlib, pyqt, pyqt4

我想将热图的**底部**标签设为垂直。默认是水平的。下面给出一个例子；

![在此处输入图像描述](../Images/bd9db1134ad933198b6f82a9f9124408.png)

有没有办法做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-12T06:09:28.753

它可以用

```
plt.xticks(width, heightList, rotation='vertical') 
```

# svn - SVN：commit-access-control.cfg 的问题

> ID：10977006
> 
> 赞同：2
> 
> 时间：2012-06-11T08:57:50.547
> 
> 标签：svn

我是 SVN 的新手，正在努力学习它。我已经设置了 SVN 服务器，我可以签入/签出

来自它的文件。作为下一步，我正在尝试对其进行访问控制，并尝试添加一些提交挂钩

防止一些不需要的签到。

这是我的 svn 存储库：

```
/svnrepos/repo1
/svnrepos/repo2
/svnrepos/test    >>>>>>> My test repository for playing around with SVN 
```

现在我正在尝试使用预提交执行以下操作：

```
1\. Preventing some users to check-in to a directory or any of its sub-folders
2\. Preventing some files (say .class files) to be checked in by all users 
```

这是我的环境：

```
Perl: v5.14.2 (linux 32-bit )
SVN: 1.7.4  (r1295709)
OS: Linux svnserver 2.6.18-164.el5 #1 SMP Tue Aug 18 15:51:54 EDT 2009 i686 i686 i386 GNU/Linux 
```

我正在使用命令“svnserve -d -r /svnrepos --log-file /var/log/svn.log”运行 svn 服务器

现在我正在尝试为存储库/svnrepos/test 提供访问限制。我正在尝试编辑 commit-access-control.cfg 文件以提供访问限制。以下是此配置文件的内容：

```
[Make everything read-only for all users]
match   = .*
access  = read-only

[Make test project read-write for admin users ]
match  = ^trunk/svnrepos/test/samplefile.txt
users  = PR111319
access = read-write 
```

以下匹配模式似乎不起作用：

```
match=^trunk/svnrepos/test/samplefile.txt
match=^/svnrepos/test/samplefile.txt
match=/svnrepos/test/samplefile.txt
match=/test/samplefile.txt
match=^/samplefile.txt 
```

无论我给出什么匹配模式，在提交文件 samplefile.txt 时都会出现以下错误：

```
org.apache.subversion.javahl.ClientException: A repository hook failed
svn: Commit failed (details follow):
svn: Commit blocked by pre-commit hook (exit code 1) with output:
/svnrepos/test/hooks/commit-access-control.pl: user `PR111319' does not have permission to commit to 

these paths:
  /
  samplefile.txt 
```

但是，如果我将匹配项指定为 .* ，那么我就可以成功提交它。由此，我很清楚问题出在“匹配”上

以下是预提交文件的内容：

```
68 REPOS="$1"
69 TXN="$2"
70
71 # Make sure that the log message contains some text.
72 SVNLOOK=/opt/CollabNet_Subversion/bin/svnlook
73 $SVNLOOK log -t "$TXN" "$REPOS" | \
74    grep "[a-zA-Z0-9]" > /dev/null || exit 1
75
76 # Check that the author of this commit has the rights to perform
77 # the commit on the files and directories being modified.
78 /opt/ActivePerl-5.14/bin/perl "$REPOS/hooks/commit-access-control.pl" "$REPOS" "$TXN" "$REPOS/hooks/commit-access-control.cfg" || exit 1
79
80 # All checks passed, so allow the commit.
81 exit 0 
```

如果您需要更多信息，请告诉我。

谢谢和问候， Parasuraman.R

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T14:25:18.630

第一件事：

*   您只有一个 Subversion 存储库。

我只想说清楚。您的所有*存储库*都将在同一个钩子下。因此，除非您的钩子允许，否则`repos1`没有人可以承诺。`repos2`

尝试使用该`svnlook`命令，因为这是钩子脚本正在使用的。这将为您提供有关如何在预提交挂钩的配置文件中指定文件的更好线索：

```
$ svnlook changed -r $revision $repository_directory 
```

是执行命令`$repository_directory`时包含存储库的目录。`svnadmin create`您需要为其提供相对路径或完整路径。这`$revision`是您正在查看的 Subversion 修订版的修订版号。尝试几个不同的版本，看看有什么改变你可以通过这个命令获得最新的版本：

```
$ svnlook youngest $repository_directory 
```

您会注意到`/`文件名的前面没有，并且指定了完整路径。

* * *

我想提出几点建议：

*   由于您是 Subversion 的新手，所以暂时忘记`pre-commit`钩子。尝试在没有钩子的情况下使用 Subversion 一段时间，并了解它是如何流动的。

*   您已`trunk`在您的钩子中指定，但我没有`truck`在您的存储库中看到。我感觉您不太了解标准 Subversion 存储库结构的工作原理。

Subversion 的默认用法是在*存储库*`trunk`的根目录中拥有三个名为、`tags`和`branches`的目录（是的，这些是目录名称）。在您的情况下，您可能需要以下目录，因为您将单个存储库视为三个独立的存储库：

 **   `repos1/trunk`
*   `repos1/tags`
*   `repos1/branches`
*   `repos2/trunk`
*   `repos2/tags`
*   `repos2/branches`
*   `test/trunk`
*   `test/tags`
*   `test/branches`

您创建了存储库，然后在您的任何开发人员可以在存储库上获得他们肮脏的小爪子之前，您创建了这九个目录。然后将存储库中的所有文件放在这九个目录之一下。

同样，没有理由必须这样做。如果你从不分支或标记你的代码，你真的不必这样做。目录甚至不必命名为`trunk`,`branches`和`tags`. 它们可以被命名为`main`, `branches`,`labels`或`moe`, `larry`,`curly`用于所有 Subversion 关心。

但是，其他人都使用`trunk`,`branches`和`tags`, 并且由于我是那种如果其他人都这样做的话会从屋顶跳下来的人，我建议你也遵循标准命名约定。

大多数开发都在该*存储库*`trunk`的目录下进行。如果您需要创建一个分支，您可以将下面的文件复制到具有特定分支名称的目录中。例如，我需要为 1.3 版创建一个错误修复分支：*`trunk``branches`*

 *```
$ svn cp svn://localhost/repos1/trunk svn://localhost/repos1/branches/1.3-bug-fixes 
```

要在发布时标记文件，只需在目录下复制您所做工作的`tags`目录：

```
$ svn cp svn://localhost/repos1/trunk svn://localhost/repos1/tags/1.3
$ svn cp svn://localhost/repos1/branches/1.3-bug-fixes svn://localhost/repos1/tags/1.3.1 
```

这就是 Subversion 进行标记和分支的方式。它与大多数版本控制系统不同，但它有很多不错的优势（它很简单，很容易通过`svn ls`命令找到标签和分支的名称，它为您提供了分支和标签的完整历史记录。）

*   一旦你更好地理解了 Subversion 是如何工作的以及存储库是如何工作的，你就可以尝试创建一个 pre-commit 钩子。我谦虚地建议你使用我的[pre-commit hook](https://github.com/qazwart/SVN-Precommit-Kitchen-Sink-Hook)。与您正在使用的不同，它正在积极维护并且有据可查。此外，它还有很多漂亮的功能。**

# java - 通过变量从哈希图中获取密钥

> ID：10977012
> 
> 赞同：0
> 
> 时间：2012-06-11T08:58:13.733
> 
> 标签：java, hashmap

嗨，我是 java 新手，我希望我能找到问题的答案。我正在尝试使用 hashmap 编写一个程序，我从包含印地语字符（印度语言）的文件中获取输入，将每个字符映射到第一个 hashmap我得到相应的值（每个字符的 unicode 值），然后将该值带到另一个哈希图中，从中我得到相应的值（不同语言中相同字符的 unicode 值）这应该被带到第三个哈希图中并检索相应的键（对应字符）..前两个映射工作正常，但是当映射到第三个哈希图时，它返回 null 而不是卡纳达语（印度语言）中的字符键。这个程序是将一种语言的文件转译为另一种语言.

对象 x=kannadahash.get("w"); 是我得到 null 而不是字符的部分

我写的代码：

任何其他以不同方式执行此操作的建议也将受到欢迎提前谢谢你..

```
import java.util.*;
import java.util.Properties;
import java.io.BufferedReader;
import java.io.File;
import java.io.FileReader;
import java.util.HashMap;
import java.util.Iterator;
import java.util.Set;
import java.util.Enumeration;
import java.util.Collections;

public class Hashmap1 {

    public static void main(String[] args) throws Exception

                HashMap hindihash=new HashMap();
                hindihash.put("अ",905);
                hindihash.put("आ",906);
                HashMap kannadahash=new HashMap();
                kannadahash.put("ಅ","C85" );
                kannadahash.put("ಆ","C86");
                HashMap hkhash = new HashMap();
                hkhash.put(905,"C85" );
                hkhash.put(906,"C86");
                File f = new File("D:/Hello.txt");
                if (!f.exists() && f.length() < 0)
                 {
                        System.out.println("The specified file does not exist");
                 } 
                else 
                 {
                        FileReader fr = new FileReader(f);
                        BufferedReader reader = new BufferedReader(fr);
                        String st = " ";
                        while ((st = reader.readLine()) != null)
                        {
                            Object v = hindihash.get(st);  
                            Object w=hkhash.get(v);
                               if(w!=null)
                                 {
                                     System.out.println(" "+w.toString());
                                 }
                                else
                                {
                                   System.out.println("There is no key named  " +
                                    "in the HashMap.");
                                }

                             Object x=kannadahash.get("w");

                             if(x!=null)
                             {
                                 System.out.println(" "+x.toString());
                             }
                           else
                             {
                                   System.out.println("There is no key named  " +
                                   "in the HashMap.");
                             }
                        }

                     } 

                  } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T09:38:23.540

你有很多问题正在发生..

首先，您缺少 main 方法中的左括号。

其次，您应该真正在 HashMap 中使用泛型，如下所示：

```
HashMap<String, Integer> hindihash = new HashMap<String, Integer>(); 
```

这样你在使用 .get(); 时就不必担心处理对象了。您知道 HashMap 会将 String 值映射到 Integer 值。类型安全很重要。

第三，这个 if 语句将无法正常工作：

```
if (!f.exists() && f.length() < 0) 
```

虽然 length() 检查不是必需的，但我可以理解您为什么需要它。如果用户有一个名为“Hello.txt”的空文件，那么您可能希望将该文件视为不存在。没关系，但是当文件不存在时 f.length() 返回 0，而不是 -1。因此，您的 if 语句无法正确触发。

第四，您的 kannadahash HashMap 似乎是倒退的。अ = 905\. hkhash.get(905) = "C85"。kannadahash.get("C85") 不存在。也许你的意思是：

```
kannadahash.put("C85", "ಅ" ); 
```

这样，hindihash.get("अ") = 905、hkhash.get(905) = "C85" 和 kannadahash.get("C85") 返回 ಅ。

第五，如果您的目标是“音译”整个文件，这将不起作用：

```
while ((st = reader.readLine()) != null) 
```

如您所知，这将一次读取文件的每一行。您想使用 BufferedReader 的 .read() 方法单独读取文件的每个字符。或者，您可以使用 for 循环遍历您使用 .readLine() 读入的整行，但在这种情况下，您最好只使用 .read()。

第六，您的调试 System.out.println()'ss 缺少要打印的变量，但现在这并不是非常重要。

最后，就像其他人提到的那样：

```
Object x=kannadahash.get("w"); 
```

应该

```
Object x=kannadahash.get(w); 
```

您还应该努力改进变量名称和间距。这很重要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T09:09:18.343

我认为应该是

`Object x = kannadahash.get(w);`

这是因为`"w"`指的是字符串而不是变量`w`

V

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T09:18:01.597

kannadahash 不应该倒置吗？据我了解，您想查找印地语以获取其代码，然后使用 hkhash 将该代码转换为另一个代码，然后使用该代码从 kannadahash 检索适当的字符，因此 kannadahash 的键应该是 unicode 值，而不是那些角色。例如：

```
HashMap kannadahash=new HashMap();
kannadahash.put("C85", "ಅ");
kannadahash.put("C86", "ಆ"); 
```

此外，正如其他回答者指出的那样，您正在执行 get("w")，但是我怀疑您的意思是 `Object x=kannadahash.get(w);`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-11T11:21:49.870

嗨，这个问题可能是由于您在解决方案中实现的复杂逻辑造成的。

单张地图就足够了，你存储印地语和卡纳达语之间关系的地图。我不是那种语言的专家，也不知道彼此之间的任何关系。因此，我将专注于涉及关联图的解决方案，其中一个角色可以分配给另一个角色。但是您可以调查语言属性以找到更好的关系，并且可能使用数组就足够了。

因此，地图将仅存储 Unicode，其中 key 为`Hindi`(Devanagari) 且 value 为 `Kannada`.

```
Map<Intger,Integer> hindiToHannada = new HashMap<Intger,Integer>();

   hindiToHannada.put(0x905,0xC85); //0x stand for hex
   hindiToHannada.put(0x906,0xC86); //Observation 1 
```

然后我们需要正确读取文件。

```
BufferedReader in = new BufferedReader(new InputStreamReader(stream, encoding)); 
```

其中流是文件，编码可以是“UTF-8”

你的主要问题在这里：

```
Object v = hindihash.get(st); 
```

st`st = reader.readLine()`自然是，您不会在地图中存储线。

```
String line; 
StringBuilder newLine = new StringBuilder();

while ((line = reader.readLine()) != null) {
  newLine.delete(0,newLine.length());
  newLIne.ensureCapacity(line.length();

  for(int pos = 0; len = line.length(); pos < len; pos++) {

   char c = line.charAt(pos);

   if(isHindi(c)) {
       newLine.append(transforToHannada(c));
    } else {
       newLine.append(c);
    }
  }
} 
```

观察 1\. 对于前两个符号，我们看到一些相关性，它们在 895 中的 ASCII 表位置不同，您应该检查此规则是否适用于其他字符。然后不需要地图，只需要验证 sing 是印地语（简单 if ），如果为真，则只需向其添加 985。

[UTF-8 表](http://www.utf8-chartable.de/unicode-utf8-table.pl)

# c# - 从日历中获取静态日期

> ID：10977016
> 
> 赞同：0
> 
> 时间：2012-06-11T08:58:39.860
> 
> 标签：c#, .net, datetime, calendar

我想在每个月的第 20 天运行一些进程（C# 类）。我怎样才能做到这一点。他们有什么方法吗？或需要运行循环或其他东西..有人可以告诉我这样做的方法吗？如果您有任何示例，那将是一个真正的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T09:03:58.303

您是否考虑过使用**Windows 任务计划程序**？

> 任务计划程序是 Microsoft Windows 的一个组件，它提供了在预定义时间或指定时间间隔后计划程序或脚本启动的能力。它最初是在 Windows 95 Plus 中引入的！打包为系统代理，但在 Windows 98 中重命名为任务计划程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T09:44:06.420

因为这是一个编程 QA 站点，所以我希望添加到 @JakubKonecki 提出的解决方案（如果您可以完全控制您的工作环境，这就是要走的路）。
但是，如果您更喜欢通过代码添加任务调度，则可以使用[codeplex 上此项目中](http://taskscheduler.codeplex.com/)的 TaskScheduler 库。
它使用起来非常简单，并且允许删除您添加到任务计划程序服务中的内容

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-06-11T09:03:48.807

我觉得您需要创建 Windows 服务，这将使用计时器事件进行调度。

请通过[http://www.codeguru.com/csharp/.net/cpp_managed/windowsservices/article.php/c6919/Using-Timers-in-a-Windows-Service.htm](http://www.codeguru.com/csharp/.net/cpp_managed/windowsservices/article.php/c6919/Using-Timers-in-a-Windows-Service.htm)了解更多详细信息。

# java - 网格包布局未按我想要的方式显示

> ID：10977017
> 
> 赞同：3
> 
> 时间：2012-06-11T08:58:40.290
> 
> 标签：java, swing, user-interface, layout-manager, gridbaglayout

所以我有 6 个面板，它们都使用了网格布局。我用gridbaglayout把它们放在一起，这是我想要的设计

![布局](../Images/159be8ceb88da325fb968756658b1dec.png)

原来它变得一团糟“第二个”面板变得离右边更远了第三个面板被挤到了左边，这是一场灾难。这是我的网格包布局代码

```
 c.gridx = 0; c.gridy = 0;
    add (first,c); 

    c.gridx = 2; //so that the second panel starts from the center and is divided evenly with the first panel
    add(second,c);

    c.gridx = 0; c.gridy = 1;
    add(third,c);

    c.gridx = 1; 
    add(fourth,c);

    c.gridx = 2;
    add(fifth,c);

    c.gridx = 3;
    add(sixth,c); 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-11T11:58:37.570

正如您所写，您忘记指定要占用`c.gridx = 0 and c.gridy = 0`多少列。`JPanel`为了指定这一点，您应该使用`c.gridwidth = 2`，它告诉布局这`JPanel`需要两列的空间。

要获得这样的输出：

![GRIDBAGLAYOUT示例](../Images/2c362900f2d9d53ff4d4c4f8a45e9ce9.png)

这是一个小的工作示例：

```
import java.awt.*;
import javax.swing.*;
// http://stackoverflow.com/questions/10968853/two-jpanels-in-jframe-one-under-other
public class GridBagLayoutExample
{
    // http://stackoverflow.com/questions/10977017/grid-bag-layout-not-displaying-the-way-i-want
    private void displayGUI()
    {
        JFrame frame = new JFrame("GridBagLayout Example");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        JPanel contentPane = new JPanel();
        contentPane.setLayout(new GridBagLayout());

        GridBagConstraints gbc = new GridBagConstraints();
        gbc.anchor = GridBagConstraints.FIRST_LINE_START;
        gbc.fill = GridBagConstraints.BOTH;
        gbc.gridx = 0;
        gbc.gridy = 0;
        gbc.gridwidth = 2;
        gbc.weightx = 0.5;
        gbc.weighty = 0.2;

        JPanel topLeftPanel = new JPanel();
        topLeftPanel.setOpaque(true);
        topLeftPanel.setBackground(Color.DARK_GRAY);
        contentPane.add(topLeftPanel, gbc);

        gbc.gridx = 2;

        JPanel topRightPanel = new JPanel();
        topRightPanel.setOpaque(true);  
        topRightPanel.setBackground(Color.BLUE);
        contentPane.add(topRightPanel, gbc);

        gbc.gridwidth = 1;
        gbc.gridx = 0;
        gbc.gridy = 1;
        gbc.weightx = 0.25;
        gbc.weighty = 0.8;

        JPanel firstPanel = new JPanel();
        firstPanel.setOpaque(true);
        firstPanel.setBackground(Color.RED);
        contentPane.add(firstPanel, gbc);

        gbc.gridx = 1;

        JPanel secondPanel = new JPanel();
        secondPanel.setOpaque(true);
        secondPanel.setBackground(Color.GREEN.darker());
        contentPane.add(secondPanel, gbc);

        gbc.gridx = 2;

        JPanel thirdPanel = new JPanel();
        thirdPanel.setOpaque(true);
        thirdPanel.setBackground(Color.WHITE);
        contentPane.add(thirdPanel, gbc);

        gbc.gridx = 3;

        JPanel fourthPanel = new JPanel();
        fourthPanel.setOpaque(true);
        fourthPanel.setBackground(Color.MAGENTA);
        contentPane.add(fourthPanel, gbc);

        frame.setContentPane(contentPane);
        frame.setSize(200, 300);
        frame.setLocationByPlatform(true);
        frame.setVisible(true);
    }

    public static void main(String... args)
    {
        SwingUtilities.invokeLater(new Runnable()
        {
            public void run()
            {
                new GridBagLayoutExample().displayGUI();
            }           
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-11T09:26:23.000

这是（另一种）替代嵌套布局。面板 3 到 6 将获得额外的高度，额外的宽度将平均分配给所有 6 个面板。

![六面板嵌套](../Images/53fa74ca9d9e7bd3150f4ed3b9e5cfc6.png)

```
import java.awt.*;
import javax.swing.*;
import javax.swing.border.LineBorder;
import javax.swing.border.TitledBorder;

public class SixPanelNested {

    SixPanelNested() {
        JPanel gui = new JPanel(new BorderLayout());
        gui.setBorder(new TitledBorder("BorderLayout()"));

        JPanel north = new JPanel(new GridLayout(1,0));
        north.setBorder(new TitledBorder("GridLayout(1,0)"));
        gui.add(north, BorderLayout.NORTH);
        for (int ii=1; ii<3; ii++) {
            JLabel l = new JLabel("Panel " + ii);
            l.setBorder(new LineBorder(Color.BLACK));
            north.add(l);
        }

        JPanel south = new JPanel(new GridLayout(1,0));
        south.setBorder(new TitledBorder("GridLayout(1,0)"));
        gui.add(south);
        for (int ii=3; ii<7; ii++) {
            JLabel l = new JLabel("Panel " + ii);
            l.setBorder(new LineBorder(Color.BLACK));
            south.add(l);
        }

        JOptionPane.showMessageDialog(null, gui);
    }

    public static void main(String[] args) throws Exception {
        SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                new SixPanelNested();
            }
        });
    }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-11T09:03:11.393

I am not familiar enough with the `GridBagLayout` to quickly spot what you can improve to your code to fix this. But another approach might be possible, using nested `BorderLayout`s.

Panels 'first', 'third' and 'fourth' can be placed inside one `JPanel` `A`with a `BorderLayout` in the `NORTH`, `WEST` and `EAST` respectively. The same can be done for the panels 'second', 'fifth' and 'sixth' in a JPanel `B`.

Then you group those 2 panels (`A` and `B`) in another panel with a `BorderLayout` in the `WEST` and `EAST`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-11T09:14:02.753

添加这个：

`c.gridwidth = 2;`

在添加 FIRST 和 SECOND 面板之前，在添加其他面板之前将 gridwidth 设置回 1。或者，您可以按照上面的建议将它们进一步分开。您可以为每一行使用两个 FlowLayout，并将这两个添加到另一个具有 NORTH/SOUTH 的 BorderLayout 的面板。

# ios - 在 iOS 中创建 PDF：线条和矩形

> ID：10977021
> 
> 赞同：1
> 
> 时间：2012-06-11T08:58:46.227
> 
> 标签：ios, pdf

我已经在 iOS 下主要使用 [NSString drawAtPoint] 创建了一些 PDF。

我的问题是：如何绘制线条和矩形？
以及如何绘制灰色框/框架作为背景层以在其中包含文本？

编辑：好的，我发现了一些关于绘制矩形的东西：renderInContext。尽管如此，这段代码： `UILabel *lbl = [[UILabel alloc] initWithFrame:CGRectMake(100, 240, 300, 150)];
[lbl setBackgroundColor:[UIColor redColor]];
[[lbl layer] renderInContext:currentContext];` 

正在以正确的宽度/高度绘制 UILabel 但在错误的原点 (0, 0)！
知道为什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T09:15:23.113

请参阅[http://www.raywenderlich.com/6581/how-to-create-a-pdf-with-quartz-2d-in-ios-5-tutorial-part-1](http://www.raywenderlich.com/6581/how-to-create-a-pdf-with-quartz-2d-in-ios-5-tutorial-part-1)和[http://www.raywenderlich.com /6818/how-to-create-a-pdf-with-quartz-2d-in-ios-5-tutorial-part-2](http://www.raywenderlich.com/6818/how-to-create-a-pdf-with-quartz-2d-in-ios-5-tutorial-part-2)获取一些示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-07T17:40:38.020

简短的回答是：因为这就是`renderInContext:`工作原理——它在当前上下文中的上下文当前位置（默认为 (0,0)）绘制你的层（-tree）。）

如果您根据下表中的图形上下文来考虑，并且您在桌子上有一块**固定的、不可移动**的带有 [方形] 切口的纸板，然后您在切口中绘制，您想要做的就是*移动下面的表*（上下文），以便在所需的位置绘制。

你用`CGContextTranslateCTM`. 因此，对于您上面的标签，代码将如下所示：

**（警告**：在浏览器中输入的代码，未检查是否完全准确。）

```
CGContextTranslateCTM(ctx, -100, -240);  // Note how you're moving /negative/ because you're moving the table, not the cardboard.
[[lbl layer] renderInContext:currentContext]; 
```

祝你好运！

# c++ - 为什么 ReadFile() 不返回 0 ？程序试图永远从管道中读取数据

> ID：10977024
> 
> 赞同：1
> 
> 时间：2012-06-11T08:59:01.717
> 
> 标签：c++, winapi, console, mingw, pipe

代码：

这是来自更大的 MS 示例（[http://msdn.microsoft.com/en-us/library/ms682499(VS.85).aspx](http://msdn.microsoft.com/en-us/library/ms682499(VS.85).aspx)）。当然，我之前尝试过整个示例，我在下面的剪辑是我将其剥离到问题的地方。问题是如果我得到的只是`1`. 如何发出没有更多数据要读取的信号？

（编译器是 MiGW。）

看起来 MS 示例已损坏，这是其中的评论之一：*父进程需要关闭在 CreateProcess() 调用后传递给子进程的句柄。不这样做会导致父级在 ReadFile() 上永远等待。*

```
#include <iostream>
#include <windows.h>
using namespace std;

int main() { 
  cout << "\n->Start of parent execution.\n";
  SECURITY_ATTRIBUTES saAttr;
  saAttr.bInheritHandle = TRUE;
  saAttr.lpSecurityDescriptor = NULL;
  HANDLE g_hChildStd_OUT_Rd = NULL;
  HANDLE g_hChildStd_OUT_Wr = NULL;
  CreatePipe(&g_hChildStd_OUT_Rd, &g_hChildStd_OUT_Wr, &saAttr, 0);

  STARTUPINFO siStartInfo;
  PROCESS_INFORMATION piProcInfo;

  ZeroMemory( &siStartInfo, sizeof(STARTUPINFO) );
  siStartInfo.hStdOutput = g_hChildStd_OUT_Wr;
  siStartInfo.dwFlags |= STARTF_USESTDHANDLES;

  CreateProcess(NULL,
    (char*)"cmd /c dir",     // command line
    NULL,          // process security attributes
    NULL,          // primary thread security attributes
    TRUE,          // handles are inherited
    0,             // creation flags
    NULL,          // use parent's environment
    NULL,          // use parent's current directory
    &siStartInfo,  // STARTUPINFO pointer
    &piProcInfo);  // receives PROCESS_INFORMATION

  CHAR chBuf[4096];
  DWORD dwRead;

  // ~~~~~~this loop here~~~~~- how to break out of it ?
  while(true) {
    cout << "ReadFile: " << ReadFile( g_hChildStd_OUT_Rd, chBuf, 4096, &dwRead, NULL) << endl;
  }

  cout << "\n->End of parent execution.\n";
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T09:11:28.387

你试过所有的代码吗？MSDN 有一些句柄继承的东西。看起来管道的写端没有关闭，所以 ReadFile 认为如果它等待会有更多的读取。

编辑：

“关闭句柄（g_hChildStd_OUT_Wr）；” 使读取在读取所有内容后终止，因此问题显然是子进程终止后写入端永远不会完全关闭。但是 MSDN 示例似乎不需要它，因此您需要更仔细地查看为什么会这样。

# runtime - MPI runtime-error:unable to read the cmd header on the pmi context, error = -1

> ID：10977026
> 
> 赞同：1
> 
> 时间：2012-06-11T08:59:12.323
> 
> 标签：runtime, mpi, mpich

I have a poblem with mpich2\. I've written program in C++ using MPI. The program has been compiled successfully, but when I try to run the program I get an

```
 error:unable to read the cmd header on the pmi context, error = -1. 
```

I have tried to reinstall the mpich, but the problem wasn't solved.

Does someone know how to solve the problem? Thanks!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T03:33:03.327

您的系统中有多个来自不同供应商的 mpiexec.exe 文件。例如，一个来自`c:\program files\mpich2\bin`和一个来自`c:\program files\microsoft hpc pack 2008 r2\bin`。

尝试禁用其中之一。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-19T00:17:40.780

就我而言，这种类型的消息是由 AVAST shield 引起的。我禁用了它，一切都开始顺利进行。

# wso2 - Can not using attribute to correlate message using wso2 bpel

> ID：10977030
> 
> 赞同：0
> 
> 时间：2012-06-11T08:59:31.107
> 
> 标签：wso2, bpel

I use Wso2 BPS to write an asynchronous workflow. To correlate the request and the callback I use an element in the request and an attribute in the callback. The definitions of the correlator is:

*   For the request

    < bpws:property name="correlatorProp" type="xs:string"/> < bpws:propertyAlias propertyName="tns:correlatorProp" messageType="ws-drt:pushIn" part="params">

    < bpws:query>< ![CDATA[/drt-type:resources/res:resource/res:uuid]]>< / pws:query>
    < /bpws:propertyAlias>

*   For the callback:

    < bpws:propertyAlias propertyName="tns:correlatorProp" messageType="ws-dpalert:pushIn" part="params"> < bpws:query>< ![CDATA[@conversationId]]>< /bpws:query>
    < /bpws:propertyAlias>

Then I test this workflow with the below request/callback

*   Request < soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/"> < soapenv:Body> < type:push xmlns:res="http://esa.int/sais-dpc/schema/resource" timestamp="2001-12-17T09:30:47.0Z" sequenceNumber="1" lastResponse="true"> < type:resources> < res:resource> < res:uuid>40000< /res:uuid>
    < /type:resources> < /type:push> < /soapenv:Body> < /soapenv:Envelope>

*   Callback:

< soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/"> < soapenv:Body> < p:push xmlns:p="http://esa.int/sais-dpc/service/specification/dp-alert-provider/type" conversationId="40000" sequenceNumber="0" lastResponse="true"> < p:alertsRef>40000< /p:alertsRef> < /p:push> < /soapenv:Body> < /soapenv:Envelope>

But the engine failed to correlate the two messages. Is there any body have experience that issue?

Thanks,

Minh Tri.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T17:04:37.960

我能够重现此问题并创建了一个[jira](https://wso2.org/jira/browse/CARBON-13440)来跟踪该问题。我们将在 WSO2 BPS 的未来版本中解决此问题。

目前唯一的解决方法是使用元素值作为相关属性别名。

# php - 创建表并立即复制数据

> ID：10977031
> 
> 赞同：0
> 
> 时间：2012-06-11T08:59:31.263
> 
> 标签：php, mysql, copy, create-table

我有一个名为“累积”的用户表，这些用户可以申请更高级别的权限。此应用程序向管理员（我）发送一封电子邮件，我对其进行审核。数据还保存在称为应用程序的数据库中。在电子邮件中，我为自己提供了两个接受/拒绝用户的链接。在接受的情况下，我对其中的一小部分有疑问，但我不明白为什么它不起作用：

下面是几行 PHP/mysql 代码，显示了问题似乎出现的位置：

```
$create = mysql_query("CREATE TABLE $schoolname LIKE johns_hopkins_university");
$activated1 = mysql_query("UPDATE cumulative SET schoolname='$schoolname' WHERE id='$id'");
$activated2 = mysql_query("UPDATE applications SET role='Accept' WHERE id='$id'");
$captain = mysql_query("
        INSERT INTO $schoolname
        SELECT *, 'Captain', 'Admin'
        FROM cumulative 
        WHERE email='$email'") or die("Copy Query didn't work"); 
```

首先，新表 ( `$schoolname`) 的创建工作。接下来，在累积用户表和申请人表上表示此激活效果很好，但不起作用的是，当我尝试将信息从累积表复制到新表时，它不会这样做。我已经包含了 die 函数，但它没有被触发，并且据说正在处理副本，但新表中没有结果行。

除了我上面的方法之外，是否还有其他方法可以创建数据并将数据添加到新表中？有不同的潜在问题吗？

# java - 如何在 freemarker 模板中使用控件？

> ID：10977032
> 
> 赞同：0
> 
> 时间：2012-06-11T08:59:33.637
> 
> 标签：java, freemarker

我曾经使用 VS.NET，但现在我需要编辑一些 java mvc 页面。

它使用 freemarker 模板 - 我了解如何获取数据以查看，但如何将数据发布回服务器？

我需要带有简单文本框的控制器示例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T09:11:11.503

Freemarker 是一个通用的模板引擎，所以你必须使用纯 HTTP 表单提交。

放入您的模板：

```
<form method="post" action="/process">
  <input type="text" name="myData" />
  <input type="submit" />
</form> 
```

确保您有`http://<domain>/process`URL 的服务器端处理程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T09:50:06.477

如果你想处理表单（或任何现实世界的网页开发），首先你需要选择一个 Web 应用程序框架，如 Stripes、Spring 等。FreeMarker 只是一个简单的模板引擎。表单或任何与 Web 相关的功能必须由框架提供，通常由特定于框架的 FreeMarker 指令提供。

# eclipse - How to: prevent accidental closing of Eclipse Ant view OR make view remember contents on reopening?

> ID：10977034
> 
> 赞同：1
> 
> 时间：2012-06-11T08:59:50.073
> 
> 标签：eclipse, ant

I use a lot of projects and ant buildfiles in Eclipse, and every now and then I close the Ant view tab by accident. After I reopen the view, I have to add the previous content (dozens of buildfiles) again manually, which is kinda uncomfortable.

I'd guess the right way to avoid this situation would be:

1.  Some option to prevent the accidental closing of views, like marking them fixed in a perspective, getting a confirmation dialog when clicking the close button etc. I guess this would be a nice feature, but didn't find anything like this, but still if there exists one such feature in Eclipse, please tell me how to find it.

2.  A feature specifically for the ant view, so it can remember it's contents after closing / reopening. This also seems to be a nice feature, but so far looks nonexistent. If you know about such a feature, please give me some directions.

3.  Some other solution I can't even guess...

The above options pretty much look like feature requests, which should be sent towards the Eclipse dev. team, but I still hold some hope that these features already exist and I just failed to find them.

# iphone - 如何在iphone应用程序中将背景颜色设置为pdf视图

> ID：10977037
> 
> 赞同：0
> 
> 时间：2012-06-11T09:00:12.853
> 
> 标签：iphone, xcode, uiview

我正在使用以下[教程](http://www.ioslearner.com/generate-pdf-programmatically-iphoneipad/)创建 pdf对我有用

但它显示pdf的白色背景我想给背景颜色怎么做

我已经看过所有的代码，但是没有任何选项可以提供颜色，无论如何都可以提供颜色。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T09:31:09.437

在 do while 循环中使用这些代码行.... 这里 pdfpageFrame 是您的 Pdfpage 的框架。

```
CGContextRef currentContext = UIGraphicsGetCurrentContext();
CGContextSetFillColorWithColor(currentContext, [UIColor redColor].CGColor );
CGContextFillRect(currentContext, pdfpageFrame); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T09:06:30.620

在drawBorder之前，执行以下操作：

```
 CGContextRef currentContext = UIGraphicsGetCurrentContext();
  CGContextSetFillColorWithColor(currentContext, [UIColor colorWithRed:1.0 green:1.0 blue:0.0 alpha:1.0].CGColor);
  CGContextFillRect(currentContext, pdfpageFrame); 
```

# wpf - WPF 从 Converter 访问视图模型

> ID：10977038
> 
> 赞同：3
> 
> 时间：2012-06-11T09:00:20.817
> 
> 标签：wpf, viewmodel, converter

我有一个标签，可以将用户插入的代码转换为描述。为此，我在转换器内使用字典。每次调用 Converter throw a Service 时都会填写此字典。这是一件非常丑陋的事情，我想在我的视图模型中有这本字典，但我不知道如何从转换器访问它。

有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T09:04:12.953

在您的视图中，将字典绑定为资源（由 ViewModel 提供）。将转换器更改为 an`IMultiValueConverter`并使用 a`<MultiBinding>`将其绑定到您需要用于查找的值以及您正在查找的字典。

有关[采用](http://msdn.microsoft.com/en-us/library/system.windows.data.imultivalueconverter.aspx)多个输入值的转换器的更多信息，以及使用带有`<MultiBinding>`.

或者，正如 GazTheDestroyer 建议的那样，将其放入您的 ViewModel 中。

```
class MyViewModel : INotifyPropertyChanged
{

   public MyViewModel()
   {
      // Call service to populate _dictionary here...
   }

   private Dictionary<string, string> _dictionary;
   private string _code;

   public string Code
   {
      get { return _code; }
      set
      {
         _code = value;
         Description = _dictionary[_code];
         if (PropertyChanged != null)
            PropertyChanged(this, new PropertyChangedEventArgs("Description"));
      }
   }

   public string Description { get; set; }
} 
```

而不是通过转换器绑定，而是绑定到 Description 属性。

**更新**

若要回答有关更新的问题，您需要稍微更改 XAML 中的绑定以更改 UpdateSourceTrigger。Text 属性的默认设置是在控件失去焦点时更新，这将在每次值更改时更改为：

```
<TextBox Text="{Binding Code,UpdateSourceTrigger=PropertyChanged}" /> 
```

进一步阅读可在[http://msdn.microsoft.com/en-us/library/system.windows.data.binding.updatesourcetrigger.aspx](http://msdn.microsoft.com/en-us/library/system.windows.data.binding.updatesourcetrigger.aspx)

您可能需要在此处添加一些错误验证 - 每次击键都会更改 Description 的值，因此您可能希望在 ViewModel 中包含一些逻辑，以便仅在有要使用的值时更改值，或者将不使用的值变灰对应（半成品）代码。这些都是可用性方面的东西，您可以四处寻找最适合您的应用程序的东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T09:11:58.790

如果将它放在视图模型中，则不需要转换器。

只需`Code`在 VM 中公开一个属性并将标签绑定到该属性。然后在`Code`设置器中，您使用字典来更新您的`Description`属性。

# xml - 为什么我会得到以及如何从关于我的唯一字段的 solr 结果中删除重复项？

> ID：10977041
> 
> 赞同：3
> 
> 时间：2012-06-11T09:00:31.233
> 
> 标签：xml, solr

我正在使用 Solr 3.6.0 进行全文搜索。我在 schema.xml 中定义了以下字段：

```
<field name="productNumber" type="ngramtext" indexed="true" stored="true" required="true" />  
<field name="additionalTextData" type="text_en" indexed="true" stored="true"/> 
```

我还定义了以下字段类型：

```
<fieldType name="ngramtext" class="solr.TextField" positionIncrementGap="100">
    <analyzer type="index">
        <tokenizer class="solr.KeywordTokenizerFactory"/>
        <filter class="solr.LowerCaseFilterFactory"/>
        <filter class="solr.NGramFilterFactory" minGramSize="2" maxGramSize="3" />
    </analyzer>
    <analyzer type="query">
        <tokenizer class="solr.KeywordTokenizerFactory"/>
        <filter class="solr.LowerCaseFilterFactory"/>
    </analyzer>
</fieldType> 
```

这将创建一个大小为 2 和 3 的标记并将它们放在索引中。非常适合搜索[SKU](http://en.wikipedia.org/wiki/Stock-keeping_unit)。现在他们进入同一个索引，我知道这可能会产生性能问题。但是我决定在出现性能问题时处理这个问题。对于我现在拥有的数据集，速度非常快（主观来说:)）

我还有以下内容：

```
<uniqueKey>productNumber</uniqueKey> 
```

在 solrconfig.xml 中，我为每个“df”部分放置了附加文本数据：

```
="df">="df">additionalTextData< 
```

当我执行以下查询时：

select?indent=on&version=2.2&q=productNumber:12&fq=&start=0&rows=10000&fl=productNumber,additionalTextData&wt=json&explainOther&hl.fl

或者

select?indent=on&version=2.2&q=productNumber:12&fq=additionalTextData:*&start=0&rows=10000&fl=productNumber,additionalTextData&wt=json&explainOther&hl.fl

**我得到了 2345 个结果，其中一些是重复的。我通过一些 productNumber 搜索，我可以看到它两次或 3 次。为什么会这样？我该如何克服呢？**

**EDIT1：**
我还发现添加：

```
<filter class="solr.RemoveDuplicatesTokenFilterFactory" /> 
```

在所有其他过滤器之后的 ngramtext fieldType 中，并不能解决问题。

**根据mbonaci的解决方案1：**
而不是：

```
<field name="productNumber" type="ngramtext" indexed="true" stored="true" required="true" /> 
```

地方：

```
<field name="productNumber" type="string" indexed="true" stored="true" required="true" />
<field name="productNumberCopyField" type="ngramtext" indexed="true" stored="true" required="true" /> 
```

在字段标签后添加：

```
<copyField source="productNumber" dest="productNumberCopyField" /> 
```

并且，指定以下查询：

select?indent=on&version=2.2&q= **productNumberCopyField** :12&fq=additionalTextData:*&start=0&rows=10000&fl=productNumber,additionalTextData&wt=json&explainOther&hl.fl

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T11:16:57.700

没错，索引分析器将创建 ngram，但 Solr 将使用该 ngram 来形成唯一键。这对你有意义吗？多值唯一键？

例如，如果您有产品密钥`tis876a`，您最终会得到`ti is s8 87 76 6a tis is8 s87 876 76a`最终结果。这就是你唯一的钥匙。

因此，只需使用类型`lowercase`的复制字段（它没有标记化，只是小写）并`tis876a`用作您的产品密钥（当然，如果它实际上是数据模型中的唯一字段）。

# c# - 使用正则表达式查找和替换

> ID：10977046
> 
> 赞同：0
> 
> 时间：2012-06-11T09:01:11.093
> 
> 标签：c#, regex

我正在尝试查找并替换一个字符串，当有人将其作为搜索查询输入时，如果他们拼错了代码，例如 Z0000ECEL 写为 Z000ECEL，它将替换为 Z00+ECEL，这样它会找到最接近的代码即使他们拼写错误，它仍然可以找到它，我目前正在使用：

```
 if (Regex.IsMatch(searchWords[0], "^[a-z]+z00+", RegexOptions.IgnoreCase))
        {
            Regex.Replace(searchWords[0], "[0]+", "*0", RegexOptions.IgnoreCase);
        } 
```

我不想在字符串的开头放置通配符，因为这会带来很多结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T09:33:58.080

这是在做你想做的事吗？

```
Regex.Replace(searchWords[0], "0{3,}", "00*"); 
```

这将用“00 *”替换3个或更多零

您也可以将其与您的第一张支票结合使用

```
Regex.Replace(searchWords[0], "(?<=^[a-z]+z)0{3,}", "00*", RegexOptions.IgnoreCase); 
```

这涉及一个lookbehind断言，所以只有在有before的`0{3,}`情况下才会被替换。`^[a-z]+z`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T09:33:36.140

也许您正在寻找：

```
str = Regex.Replace(str, "(?i)(^[a-z]+0)0+", "$1+"); 
```

# ruby-on-rails - Install rails assets in a ruby gem

> ID：10977052
> 
> 赞同：0
> 
> 时间：2012-06-11T09:01:39.643
> 
> 标签：ruby-on-rails, ruby, rubygems, gem

I am transforming a ruby plugin to a ruby gem. In the plugin I was able to run

```
rake gem_name:install 
```

This would install javascript and images into the rails assets directory. Can I automate this, so when i include the gem in mijn gemfile, this is all included automatically?

What is the way of doing this?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T11:17:22.647

You don't need install your styles and scripts into the rails app in rails 3.1 and 3.2.

Just put them into `app/assets`, `lib/assets` or `vendor/assets`; and add `Rails::Engine` class to you gem (it can be empty).

[Guides](http://guides.rubyonrails.org/asset_pipeline.html#adding-assets-to-your-gems)

# text - Filtered text query

> ID：10977053
> 
> 赞同：0
> 
> 时间：2012-06-11T09:01:46.770
> 
> 标签：text, filter, elasticsearch

I am doing the following query in elasticsearch: `{"size":20000,"query":{"filtered":{"query":{match_all:{}},"filter":{"or":[{"term":{CATEGORY:"diamonds"}},{"term":{CATEGORY:"fashion"}}]}}}}`

This works fine. What I need now is that the `CATEGORY` has names such as `Men Clothing` and `Men Accessories`. So I want to do a text query. But when I replaced term with `text`, it didnt work for me. What to do?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T08:14:15.233

我找到了解决方案。只需将 CATEGORY 索引为 not_analyzed，然后运行术语查询。有效。

# open-source - Free tool to connect to mondrian/olap and view pivot-table + charts on my website

> ID：10977055
> 
> 赞同：2
> 
> 时间：2012-06-11T09:01:54.397
> 
> 标签：open-source, jasper-reports, pivot-table, pentaho, mondrian

I played with few open source BI projects: Pentaho, JasperSoft, icCube or SpagoBI. I managed to fill them with my data and view some reports or do analysis. But now the thing i really need is to skip their interfaces and call just MDX queries with some filters to Mondrian server and view data on my website with my own NAVIGATION. Something like MDX viewer.

E.G. On my website I've got around 10000 items somehow embedded in the vertical navigation menu hierarchy (impossible to make analysis view to all of them separately) and I want to view pivottable and charts for every item - based on the item selected I would call an MDX query and apply the filter ('where' with selected item). The thing is, i dont need to slice and dice there, just drilldown.

I suppose i need some alternatives to JPivot, but really running like embedded apps not whole report makers. Something like OpenI, but its not any more distributed like standalone platform yet like plugin for Pentaho or JasperSoft, again. icCube tends to provide JS library to cover such functionality, but due to comments doesn't seem to be for free use.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T09:21:28.880

Saiku 可能会满足您的需求。它可以作为插件与 Penthao BI Server 一起使用。

[http://analytical-labs.com/](http://analytical-labs.com/)

# nhibernate - 在 NHibernate 映射文件中加入以第三个为条件的两个表

> ID：10977056
> 
> 赞同：0
> 
> 时间：2012-06-11T09:01:54.817
> 
> 标签：nhibernate, nhibernate-mapping

我有以下表格：

```
foo {
    id;
    catColorId;
}

bar {
    fooId;
    catTypeId;
    barName;
}

cat {
     catColorId;
     catTypeId;
     priority;
} 
```

`bar`表具有复合 ID`fooId, catTypeId`
`cat`表具有复合 ID`catColorId, catTypeId`

我想将它们映射到：

```
class Foo {
    int Id;
    IList<Bar> BarList { get; set; }
} 
```

`BarList`应按 cat.priority 排序

任何想法如何在 .hbm.xml 中映射它？

**更新：**

如果我能得到映射，那将是完美的，当填写 Foo.BarList 时，会生成查询（或它的一些变体）：

```
select 
    b.fooId, 
    b.catTypeId,
    b.barName,
from
    join foo as f 
    join bar as b on f.id = b.fooId
    join cat as c on f.catColorId = c.catColorId and b.catTypeId = c.catTypeId
where
    f.id = @fooId
order by 
    c.priority 
```

我对最后一次加入有困难：`b.catTypeId = c.catTypeId`
你如何在 hbm 标记中定义这种限制？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T07:13:38.863

您的示例严格来说是一个`Many-To-Many`映射。

```
public class Foo {
    public virtual int Id { get; set; }
    public virtual IList<Cat> Cats { get; set; }
}

// there is no Bar entity in this example; it is a cross-reference table used by nhibernate, but there is no entity in your domain

public class Cat {
    public virtual int Id { get; set; }
    public virtual IList<Foo> Foos { get; set; }
} 
```

映射：

```
<?xml version="1.0" encoding="utf-8" ?>
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2"
    assembly="Models"
    namespace="Models">
    <class name="Foo" table="foo">
        <id name="Id" column="Id">
            <generator class="identity" />
        </id>
        <bag name="Cats" table="bar">
            <key column="FooId"></key>
            <many-to-many column="CatId" class="Cat" />
        </bag>
    </class>
</hibernate-mapping>

<?xml version="1.0" encoding="utf-8" ?>
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2"
    assembly="Models"
    namespace="Models">
    <class name="Cat" table="cat">
        <id name="Id" column="Id">
            <generator class="identity" />
        </id>
        <bag name="Foo" table="bar">
            <key column="CatId"></key>
            <many-to-many column="FooId" class="Foos" />
        </bag>
    </class>
</hibernate-mapping> 
```

但是，如果 Foos 和 Cats 之间的关系比关系更有意义（例如，您需要向 Bar 添加其他属性），您将执行以下操作：

```
public class Foo {
    public virtual int Id { get; set; }
    public virtual IList<Bar> Bars { get; set; }
}

public class Bar
{
    public virtual Foo Foo { get; set; }
    public virtual Cat Cat { get; set; }
}

public class Cat {
    public virtual int Id { get; set; }
    public virtual IList<Bar> Bars { get; set; }
}
// you can get all Cats for a Foo via Foo.Bars and vice versa 
```

映射：

```
<?xml version="1.0" encoding="utf-8" ?>
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2"
    assembly="Models"
    namespace="Models">
    <class name="Foo" table="foo">
        <id name="Id" column="Id">
            <generator class="identity" />
        </id>
        <bag name="Bars" inverse="true">
            <key column="CatId"></key>
            <one-to-many class="Bar"/>
        </bag>
    </class>
</hibernate-mapping>

<?xml version="1.0" encoding="utf-8" ?>
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2"
    assembly="Models"
    namespace="Models">
    <class name="Cat" table="cat">
        <id name="Id" column="Id">
            <generator class="identity" />
        </id>
        <bag name="Bars" inverse="true">
            <key column="FooId"></key>
            <one-to-many class="Bar"/>
        </bag>
    </class>
</hibernate-mapping>

<?xml version="1.0" encoding="utf-8" ?>
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2"
    assembly="Models"
    namespace="Models">
    <class name="Bar" table="bar">
        <composite-id>
          <key-many-to-one class="Foo" name="Foo" column="FooId" />
          <key-many-to-one class="Cat" name="Cat" column="CatId" />
        </composite-id>
    </class>
</hibernate-mapping> 
```

对不起，如果我的 HBM 标记生锈了；我习惯于通过代码进行映射。

# javascript - xmlhttprequest 和 set-cookie & cookie

> ID：10977058
> 
> 赞同：18
> 
> 时间：2012-06-11T09:01:59.953
> 
> 标签：javascript, cookies, xmlhttprequest, setcookie, cors

我想我误解了使用 xmlhttprequest 管理 cookie。我有一个响应`XMLHttpRequest`用 javascript 制作的服务器，我的服务器返回,`Allow-Control-Access-Origin`和具有正确值的标头。`Access-Control-Allow-Headers``Access-Control-Expose-Headers``Access-Control-Allow-Credentials`

我正在使用javascript在服务器中进行摘要身份验证，没问题，我`WWW-Authenticate`从服务器接收到好的标头，我处理并向服务器发送带有所有摘要响应的授权标头，一切正常。问题是，当摘要挑战成功时，我的服务器返回一个 Set-Cookie 标头，我必须获取它并添加到我所有 xhr 请求的其余部分。浏览器（使用 Chromium 和 Chrome）不允许我访问标题：

```
xhr.getResponseHeader("Set-Cookie"); 
```

好的，在[XMLHTTPREQUEST Level 2](http://www.w3.org/TR/XMLHttpRequest/)中它说：“从响应中返回所有标题，除了那些字段名称为 Set-Cookie 或 Set-Cookie2 的标题”好的，所以我不能接受，但是有什么方法？将 Chrome Api 用于 cookie（目前我没有读到关于它的注意事项），但我想尽可能采用标准方式。与：

```
xhr.withCredentials = true; 
```

意味着浏览器会自动获取 set-cookie 并发送 cookie 标头？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-12T15:01:39.890

来自 CORS 规范[http://www.w3.org/TR/cors/#make-a-request-steps](http://www.w3.org/TR/cors/#make-a-request-steps)：

> 每当应用发出请求步骤时，使用手动重定向标志设置从原始源源获取请求 URL，如果设置了省略凭据标志，则设置块 cookie 标志。使用方法请求方法，实体主体请求实体主体，包括作者请求标头，如果省略凭据标志未设置，则包括用户凭据。如果源源是全局唯一标识符，则排除 Referer 标头。

正如您所说 - 如果您使用`withCredentials`.

# jquery - 提交后隐藏表格

> ID：10977062
> 
> 赞同：0
> 
> 时间：2012-06-11T09:02:08.317
> 
> 标签：jquery

我正在使用这个[表单插件](http://jquery.malsup.com/form/#html)

但是对于我的生活，我无法弄清楚在提交表单后如何进行大量的 DOM 操作。

```
$('.save-form').each(function() {
    $(this).ajaxForm({
        beforeSubmit: function() {      
            //
        },
        success: function(data) {
            //
        }
    });
}); 
```

我试过`$(this).find('div').hide();`但无济于事。

HTML：

```
<form method="post" class="save-form">
    <!-- inputs are here -->
    <div>I want to hide this as well as the parent, "save-form".</div>
</form>
<form method="post" class="save-form">
    <!-- inputs are here -->
    <div>I want to hide this as well as the parent, "save-form".</div>
</form>
<form method="post" class="save-form">
    <!-- inputs are here -->
    <div>I want to hide this as well as the parent, "save-form".</div>
</form> 
```

是的，我有不止一个“保存表单”实例

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T09:03:57.023

做：

```
$('[class=save-form]').each(function() {
    $(this).ajaxForm({
        beforeSubmit: function() {      
            //
        },
        success: function(data) {
            $('[class=save-form]').hide();
        }
    });
}); 
```

请注意，它将隐藏包装集中的内容`$('[class=save-form]')`。您可能需要根据需要调整选择器。

* * *

顺便说一句，您可以使用：

```
$('.save-form') 
```

代替：

```
$('[class=save-form]') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T09:06:28.210

如果您`this`在调用之前存储对的引用，`ajaxForm`您将能够在事件处理程序中使用它：

```
$('[class=save-form]').each(function() {
    var form = $(this);
    $(this).ajaxForm({
        beforeSubmit: function() {      
            //
        },
        success: function(data) {
            form.hide();
        }
    });
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-11T09:07:50.853

*每个*接受两个参数。使用它们。

```
$('[class=save-form]').each(function(index, form) {
    $(this).ajaxForm({
        beforeSubmit: function() {      
            //
        },
        success: function(data) {
            $(form).find('div').hide();
        }
    });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-11T09:19:30.397

不确定这是否是答案，但你能把它包裹在一个 div 周围并隐藏它吗？似乎最简单的方法。

# java - jdbc ResultSet 关闭

> ID：10977064
> 
> 赞同：4
> 
> 时间：2012-06-11T09:02:11.453
> 
> 标签：java, jdbc

我有以下来源。

在 insertMessage(..) 中，它调用 selectMessage 来检查是否存在重复记录。

但是会出现这个错误。在我的大脑中，它工作得很好，因为数据源给了我新的连接......也许

```
java.sql.SQLException: ResultSet closed
    at org.sqlite.RS.checkOpen(RS.java:63)
    at org.sqlite.RS.findColumn(RS.java:108)
    at org.sqlite.RS.getString(RS.java:317)
    at org.apache.commons.dbcp.DelegatingResultSet.getString(DelegatingResultSet.java:263)
    at org.apache.commons.dbcp.DelegatingResultSet.getString(DelegatingResultSet.java:263)
    at org.springframework.context.support.CachedMessageSourceDao.selectMessage(CachedMessageSourceDao.java:68)
    at org.springframework.context.support.CachedMessageSourceDao.insertMessage(CachedMessageSourceDao.java:94)
    at MessageSourceDemo.main(MessageSourceDemo.java:11) 
```

* * *

```
public String selectMessage(String code, String language) {
    Connection conn = null;
    PreparedStatement pstmt = null;
    ResultSet rs = null;
    String value = null;

    String sql = "SELECT code, value, language FROM " + TABLE + " where code=? and language=? and flag = '" + FLAG_OK + "'";

    try {
        conn = dataSource.getConnection();
        conn.setAutoCommit(true);
        pstmt = conn.prepareStatement(sql);
        pstmt.setString(1, code);
        pstmt.setString(2, language);
        rs = pstmt.executeQuery();
        rs.next();

        String _code = rs.getString("code");
        String _value = rs.getString("value");
        String _language = rs.getString("language");
        Locale _locale = new Locale(_language);
        value = _value;

    } catch(SQLException ex) {

        ex.printStackTrace();

    } finally {

        try {
            if(rs != null);
            if(pstmt != null) pstmt.close();
            if(conn != null) conn.close();
        } catch (SQLException e) {
            e.printStackTrace();
        }

    }
    return value;
}

public synchronized void insertMessage(String code, String value, String language) throws SQLException {
    //Duplicate Message Check
    **if(selectMessage(code, language) != null) throw new SQLException("Duplicate message exists for code: " + code + " and" + "language: " + language);**

    String sql = "INSERT INTO " + TABLE + " (code, value, language, flag) values (?, ?, ?, '" + FLAG_OK + "')";

    Connection conn = null;
    PreparedStatement pstmt = null;

    try {
        conn = dataSource.getConnection();
        conn.setAutoCommit(true);
        pstmt = conn.prepareStatement(sql);
        pstmt.setString(1, code);
        pstmt.setString(2, value);
        pstmt.setString(3, language);
        pstmt.execute();

    } catch(SQLException ex) {

        ex.printStackTrace();

    } finally {

        try {

            if(pstmt != null) pstmt.close();
            if(conn != null) conn.close();

        } catch (SQLException e) {

            e.printStackTrace();

        }

    }

    notifyMessageChange(); //Realtime apply to MessageSource
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-11T09:05:56.627

您`resultset`可能没有任何记录，这就是`next()`关闭它的原因。

[next()](http://docs.oracle.com/javase/1.4.2/docs/api/java/sql/ResultSet.html#next())返回一个布尔值，检查它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T09:08:10.413

检查`rs.next();`它的值必须返回 false。你需要这样做。

```
 if(rs.next()){
       //get data

   } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-11T09:17:43.737

您应该检查`rs.next`返回的内容。如果是，则`false`表示没有获取任何内容。

现在，如果您使用`if(rs.next)`，那么您只考虑`ResultSet`返回的第一行。如果查询返回超过 1 行并且您想考虑所有行，则使用`while(rs.next)`.

同样，即使您`while(rs.next)`在代码上方添加，`_code, _value, _language _locale`也会在`ResultSet`. 所以你必须相应地修改你的代码。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-11T09:10:00.380

您不能只添加`rs.next()`，因为`ResultSet`可以为空，因此您必须添加条件并测试结果是否`next()`为有效行，否则返回 false。

```
conn = dataSource.getConnection();
        conn.setAutoCommit(true);
        pstmt = conn.prepareStatement(sql);
        pstmt.setString(1, code);
        pstmt.setString(2, language);
        rs = pstmt.executeQuery();
        if (rs.next())

        String _code = rs.getString("code");
        String _value = rs.getString("value");
        String _language = rs.getString("language");
        Locale _locale = new Locale(_language);
        value = _value;
    } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-11T09:10:20.223

取而代之的是——

```
rs.next();
String _code = rs.getString("code");
String _value = rs.getString("value");
String _language = rs.getString("language"); 
```

用这个 -

```
while(rs.next()) //or use if(if there is only one row in resultset)
{
    String _code = rs.getString("code");
    String _value = rs.getString("value");
    String _language = rs.getString("language"); 
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-11T09:11:26.120

请参阅此[页面](http://docs.oracle.com/javase/1.4.2/docs/api/java/sql/ResultSet.html#next%28%29)。

```
public boolean next()
                 throws SQLException
    Moves the cursor down one row from its current position. A ResultSet cursor is initially positioned before the first row; the first call to the method next makes the first row the current row; the second call makes the second row the current row, and so on.
    ***If an input stream is open for the current row, a call to the method next will implicitly close it.*** A ResultSet object's warning chain is cleared when a new row is read.

    Returns:
    true if the new current row is valid; false if there are no more rows
    Throws:
    SQLException - if a database access error occurs 
```

# c# - 条码（代码 128）字体出现问题，无法扫描

> ID：10977068
> 
> 赞同：7
> 
> 时间：2012-06-11T09:02:27.433
> 
> 标签：c#, .net, barcode

[使用3 of 9](http://www.squaregear.net/fonts/free3of9.shtml)条码很容易生成`Font()`

```
Font f = new Font("Free 3 of 9", 80);
this.Font = f;

Label l = new Label();
l.Text = "*STACKOVERFLOW*";
l.Size = new System.Drawing.Size(800, 600);
this.Controls.Add(l);

this.Size = new Size(800, 600); 
```

它的工作。我看到了条形码，我可以扫描它。现在我想使用其他东西，比如[Code 128](http://en.wikipedia.org/wiki/Code_128)为此我需要安装字体（完成）并更改

`Font f = new Font("Free 3 of 9", 80);`到`Font f = new Font("Code 128", 80);`

之后，我在窗口上看到一个条形码。问题是我无法扫描它。我认为那是因为我没有为条形码使用正确的**开始**和**停止**标签。据我了解，必须始终有一个开始/停止字符或其他字符。对于 3 of 9 是代码 128 的 *，我不确定。在 wiki 上有**Start Code A**所以我试过了

`Font f = new Font("<Start Code A>test<Stop>", 80);`，`Font f = new Font("<Start Code A>test<Stop Code A>", 80);`等等...我无法扫描输出。因为扫描仪找不到开始和停止字符。有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-24T17:47:56.437

Code 128 完全可以用字体表示。虽然它比 3 of 9 更棘手，因为您必须在末尾包含一个校验和字符，该校验和字符需要根据条形码的内容动态计算。还有 3 个不同的版本，每个版本都有不同的起始字符。

换句话说，条形码需要像这样布置：

```
[start char][barcode][checksum][stop char] 
```

code128 的好处是它比 3 of 9 简洁得多。

[这个页面](http://en.wikipedia.org/wiki/Code_128)帮助我制定了计算校验和的算法。

该算法的一个非常一般的概述是：

1.  条形码的每个字符都会根据字符是什么以及它在条形码中的位置分配给它一个特定的值。

2.  将上述 1) 中的所有值相加。

3.  获取上面 2) 中总和的模数 103 值。

4.  在大多数情况下，校验和字符将是 ASCII 码：（模数加 32），如上面 3) 中确定的。

有一些细微差别，我最终需要在所有事物的 javascript 中创建这个算法（没有问题）。为了我自己的未来参考并展示一些细微差别，这就是它的样子：

```
/*
 * This is the variable part of my barcode, I append this to a 
 * static prefix later, but I need to perform logic to compute the 
 * checksum for this variable. There is logic earlier that enforces 
 * this variable as a 9 character string containing only digits.   
 */ 
var formIncrement = // a 9 char "digit" string variable

/*
 * Dynamically compute the total checksum value (before modulus) 
 * for the variable part of my barcode, I will need to get a modulus 
 * from this total when I am done. If you need a variable number of 
 * characters in your barcodes or if they are not all digits 
 * obviously something different would have to be done here.  
 */ 
var incrementCS = ((parseInt(formIncrement.charAt(0)) + 16) * 7) +
                  ((parseInt(formIncrement.charAt(1)) + 16) * 8) +
                  ((parseInt(formIncrement.charAt(2)) + 16) * 9) +
                  ((parseInt(formIncrement.charAt(3)) + 16) * 10) +
                  ((parseInt(formIncrement.charAt(4)) + 16) * 11) +
                  ((parseInt(formIncrement.charAt(5)) + 16) * 12) +
                  ((parseInt(formIncrement.charAt(6)) + 16) * 13) +
                  ((parseInt(formIncrement.charAt(7)) + 16) * 14) + 
                  ((parseInt(formIncrement.charAt(8)) + 16) * 15);

/*
 * 452 is the total checksum for my barcodes static prefix (600001), 
 * so it doesn't need to be computed dynamically, I just add it to 
 * the variable checksum total determined above and then get the 
 * modulus of that sum:  
 */ 
var checksum = (452 + incrementCS) % 103

var barcode = "š600001" + formIncrement

/*
 * The 0 and the 95 - 102 cases had to be defined explicitly because 
 * their checksum figures do not line up with the javascript char 
 * codes for some reason (see the code 128 definition table in the 
 * linked page) otherwise we simply need to get the charCode of the 
 * checksum + 32\. I also tack on the stop char here. 
 */ 
switch (checksum) {
    case 0 :
    barcode += "€œ";
    break;
    case 95 :
    barcode += "‘œ";
    break;
    case 96 :
    barcode += "’œ";
    break;
    case 97 :
    barcode += "“œ";
    break;
    case 98 :
    barcode += "”œ";
    break;
    case 99 :
    barcode += "•œ";
    break;
    case 100 :
    barcode += "–œ";
    break;
    case 101 :
    barcode += "—œ";
    break;
    case 102 :
    barcode += "˜œ";
    break;
    default :
    barcode += String.fromCharCode(checksum + 32) + "œ";
}

return barcode; 
```

您可能会注意到我的示例中的开始和停止字符 (š, œ) 似乎与链接页面上显示的不匹配。如果我记得我认为这是因为我有一些非标准的 code128 字体并且这些字符被翻译成正确的字符。

**编辑**

我检查了我的文档。看起来我从[这里](http://freebarcodefonts.dobsonsw.com/code128font-download.html)得到了字体。使用该字体并使用上面的算法，我刚刚制作了一个 code128b 条形码，`test`它的`štestwœ`扫描结果很好。您的校验和算法似乎工作正常，因为我们都有，`w`但是如果您获得以下信息，您的起始码和停止码似乎已关闭：`ÌtestwÎ`。

我特意寻找我正在使用的相同条形码字体，因为我感觉不同品牌的 code128 字体可能会实现不同的字符来表示开始和停止条形码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T09:08:39.550

查看 Barcode128的[Wikipedia 页面](http://en.wikipedia.org/wiki/Code_128)，我认为您应该根据**Bar Code Widths**段落和表格使用 ASCII 码 208-210 来分隔一个块。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-06-25T08:52:37.857

## 规格

[维基百科的 Code 128 页面](http://en.wikipedia.org/wiki/Code_128)对规范的解释如下：

Code 128 条码有七个部分：

1.  安静区域
2.  开始符号
3.  编码数据
4.  复选符号（必填）
5.  停止符号
6.  最终柱（通常被认为是停止符号的一部分）
7.  安静区域

校验符号是根据所有符号的加权和（模 103）计算得出的。

## 数据编码

除了我们需要提供开始和停止符号以及检查符号的数据之外，该字体将处理所需的区域和线条。

[校验位计算](https://en.wikipedia.org/wiki/Code_128#Check_digit_calculation)部分解释了校验和是通过将起始代码“值”与每个符号的“值”乘以其在条形码字符串中的位置的乘积来计算的。然后将乘积之和以 103 为模。由于本例中的起始码值为 103，其中 103 为 0，因此可以忽略它，我们只需对数据符号进行计数即可。

使用[免费条形码字体@ dobsonsw](http://freebarcodefonts.dobsonsw.com/code128font-download.html)，它是 Code 128B 或 Code set B，字体支持 95 个字符，ASCII 字符 32 到 127。要显示校验符号，还有 9 个额外的溢出字符，它们是乱序的，需要占。

正如@egerardus 得出的那样，这种特殊字体使用非标准的开始（`353`）和停止（`339`）符号以及不同范围的溢出字符（`8216, 8217, 8220, 8221, 8226, 8211, 8212, 0732, 8364`）。

## 执行

以下是条码数据编码的工作 C# 实现。

```
private string BarcodeEncode(string value)
{
    int[] overChars = { 8216, 8217, 8220, 8221, 8226, 8211, 8212, 732, 8364 };
    char[] valueChars = value.ToCharArray();
    int[] checksumVals = new int[value.Length];

    for (int n = 0; n < valueChars.Length; n++)
    {
        checksumVals[n] = (((byte)valueChars[n]) - 32) * (n + 1);
    }

    int checksum = checksumVals.Sum() % 103;
    char check = (char)(checksum + 33);
    if (checksum > 93)
        check = (char)overChars[checksum - 94];

    string start = ((char)353).ToString();
    string stop = ((char)339).ToString();

    return start + value + check.ToString() + stop;
} 
```

其次是等效的 JavaScript 实现。

```
function barcodeEncode(value) {
    var overChars = [8216, 8217, 8220, 8221, 8226, 8211, 8212, 732, 8364];
    var checksum = [...value]
            .map((i, n) => (i.charCodeAt(0) - 32) * ++n)
            .reduce((a, b) => a + b, 0) % 103;
    return String.fromCharCode(353) + value
        + (checksum < 94
            ? String.fromCharCode(checksum + 33)
            : String.fromCharCode(overChars[checksum - 94]))
        + String.fromCharCode(339);
} 
```

开心！

# javascript - get mouse position on jquery.media object

> ID：10977070
> 
> 赞同：0
> 
> 时间：2012-06-11T09:02:36.167
> 
> 标签：javascript, jquery, mouse, media

I am trying to get the current mouse position in `javascript` with this simple sample code:

```
$(document).mousemove(function(e){
    console.log(e.pageX +', '+ e.pageY);
}); 
```

This works fine but I want to get the current mouse position on elements like `<object>`. Namely I am using jQuery Media Plugin `jQuery.media.js` which generates the proper media element depending on the browser used. With [demos like this](http://jquery.malsup.com/media/video.html) the console stops logging as long as I stay on the media element. For instance I copy pasted this code:

```
<script type="text/javascript" src="jquery-1.7.2.min.js"></script>
<script type="text/javascript" src="jquery.media.js"></script>
<script>
$(document).ready(function(){
    $('.media').media();
});
$(document).mousemove(function(e){
    console.log(e.pageX +', '+ e.pageY);
});
</script>
</head>
<body>
    <a class="media {width:480, height:280}" href="http://malsup.github.com/video/simpsons.mov">MOV File (video)</a> 
</body> 
```

Can I use a different event? Or is this media element not part of `$(document)`?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T09:45:09.050

插件渲染的 DOM 元素不是标准的 DOM 元素。他们不必向浏览器发送任何事件。如果它是您尝试显示的电影，请使用 HTML5`<video>`标记 - 它应该正确触发所有标准 DOM 事件。如果这不是一个选项，您可以尝试`div`在电影上放置一个透明的。它应该正确触发所有事件。这里唯一的缺点是电影本身不可点击（控件等）。

# javascript - 内容更改时的引导模式调整大小

> ID：10977074
> 
> 赞同：6
> 
> 时间：2012-06-11T09:03:09.717
> 
> 标签：javascript, resize, twitter-bootstrap, modal-dialog, onchange

我有一个包含表单的引导模式窗口。如果用户提交表单，它会通过 Ajax 进行验证。如果有任何错误，它会显示在模式中的表单上方（无需重新加载页面）。

因此，我需要一种在内容更改时调整模式大小的方法。有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-11T09:18:38.260

您是否尝试过不设置 div 的高度？

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-22T14:35:23.413

我也有同样的问题。我只是删除了最大高度。

```
.modal-body {
  overflow-y: auto;
  /*max-height: 400px;*/
  padding: 15px;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-31T07:02:50.837

由于后一个答案建议编辑核心 css 定义，我不鼓励这样做，这是不好的做法。在**whatever.css**中，您可以使用CSS Point Score 来覆盖它，如下所示：

```
div.modal-body {
    overflow-y: auto;
    max-height: none;
    padding: 15px;
} 
```

# c# - Problems with creating ZIP file in c#

> ID：10977080
> 
> 赞同：1
> 
> 时间：2012-06-11T09:03:40.967
> 
> 标签：c#, zip, sharpziplib

I am trying to create zip file by this code, but nothing works, the constractor of ZipFile doesnt get **()** only overloading with arguments, and i don't have the `SAVE` method? **Whats wrong?**

```
 using (ZipFile zip = new ZipFile())
        {
            zip.AddEntry("C://inetpub//wwwroot//Files//Wireframes//" + url, zip.Name);
            zip.AddDirectory("C://inetpub//wwwroot//Files//Wireframes//" + url);
            zip.Save(downloadFileName);
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T10:25:07.460

要使用 SharpZipLib 压缩整个目录，您可以尝试以下方法：

```
 private void ZipFolder(string folderName, string outputFile)
    { 
        string[] files = Directory.GetFiles(folderName);
        using (ZipOutputStream zos = new ZipOutputStream(File.Create(outputFile)))
        {
            zos.SetLevel(9); // 9 = highest compression
            byte[] buffer = new byte[4096];
            foreach (string file in files)
            {
                ZipEntry entry = new ZipEntry(Path.GetFileName(file));
                entry.DateTime = DateTime.Now;
                zos.PutNextEntry(entry);
                using (FileStream fs = File.OpenRead(file))
                {
                   int byteRead;
                   do
                   {
                        byteRead = fs.Read(buffer, 0,buffer.Length);
                        zos.Write(buffer, 0, byteRead);
                   }
                   while (byteRead > 0);
                }
            }
            zos.Finish();
            zos.Close();
        } 
```

如您所见，我们的代码与您的示例完全不同。
正如我在上面的评论中所说，您的示例似乎来自[DotNetZip](http://dotnetzip.codeplex.com/) 如果您希望使用该库，您的代码将是：

```
using (ZipFile zip = new ZipFile())                    
{                        
    zip.AddFile("C://inetpub//wwwroot//Files//Wireframes//" + url);
    zip.AddDirectory("C://inetpub//wwwroot//Files//Wireframes//" + url, "WireFrames");
    zip.Save(downloadFileName);                    
} 
```

编辑：在某个目录中添加所有 PNG 文件

```
using (ZipFile zip = new ZipFile())                    
{                        
    string  filesPNG = Directory.GetFiles("C://inetpub//wwwroot//Files//Wireframes//" + url, "*.PNG);
    foreach(string file in filesPNG)
        zip.AddFile(file);
    zip.Save(downloadFileName);                    
} 
```

# javascript - How to check if my parentNode is a html tag - YUI

> ID：10977081
> 
> 赞同：5
> 
> 时间：2012-06-11T09:03:48.527
> 
> 标签：javascript, yui

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-11T09:07:48.383

抓取父节点，获取其节点名称，然后与您想要的节点名称进行比较。为了确保某个东西是一个链接（而不是某种其他类型的锚点），请测试它是否具有填充的 href 属性。

```
node.parentNode.nodeName.toLowerCase() === 'a' && node.parentNode.href !== ""; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T03:17:34.277

如果您使用的是 YUI，那么`imgNode.ancestor().test('a')`.

# c# - Creating c# object at runtime with dynamic fields and attributes

> ID：10977087
> 
> 赞同：0
> 
> 时间：2012-06-11T09:04:09.933
> 
> 标签：c#

I'm using an ORM sytem (sqlite-net) for my android application. I want to be able to create my DB mapping classes dynamically, and be able to add attributes to members, is this possible? I would need to create something like this dynamically:

```
class ConfigData
{
    [PrimaryKey, AutoIncrement]
    public int id { get; set; }
    [MaxLength(20)]
    public string ip { get; set; }
    [MaxLength(128)]
    public string port { get; set; }
} 
```

Thanks in advance.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T09:17:09.223

也许反射命名空间是你可能使用的，这里有一个例子： http: [//mironabramson.com/blog/post/2008/06/Create-you-own-new-Type-and-use-it-on-run-时间-(C).aspx](http://mironabramson.com/blog/post/2008/06/Create-you-own-new-Type-and-use-it-on-run-time-(C).aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T09:07:11.353

在 C# 4.0 中可以使用动态类型。

# scala - Scala/Play：编写将值添加到流中的 Enumeratee

> ID：10977090
> 
> 赞同：3
> 
> 时间：2012-06-11T09:04:19.140
> 
> 标签：scala, playframework, playframework-2.0, enumerator, iterate

我想写一个 enumeratee，它只将一个 Input.El 推入 iteratee，然后返回剩余的 iteratee。我称它为 prepend，因为它只是通过为其添加一个值来更改流。这是我的尝试：

```
object Enumeratees {
  def prepend[T](toPrepend: T) = new Enumeratee[T, T] {
    def applyOn[A](inner: Iteratee[T, A]): Iteratee[T, Iteratee[T, A]] = {
      val prepended = Iteratee.flatten(inner.feed(Input.El(toPrepend)))
      Done(prepended, Input.Empty)
    }
  }
} 
```

当我现在通过

```
Enumerator(1,2,3,4) |>> (Enumeratees.prepend(0)  &>> Iteratee.foreach[Int]{i=>println(i)}) 
```

它只打印应该添加的 0 。枚举器中的其他值将被忽略。如果我还覆盖了枚举对象的 &> 方法（转换方法），我可以让它工作：

```
def prepend[T](toPrepend: T) = new Enumeratee[T, T] {
  def applyOn[A](inner: Iteratee[T, A]): Iteratee[T, Iteratee[T, A]] = {
    val prepended = Iteratee.flatten(inner.feed(Input.El(toPrepend)))
    Done(prepended, Input.Empty)
  }

  override def transform[A](inner: Iteratee[T,A]): Iteratee[T,A] =
    Iteratee.flatten(inner.feed(Input.El(toPrepend)))
} 
```

但这不是一个非常干净的方法，因为 applyOn 方法仍然无效。我想我弄错了 applyOn 方法的含义。在我看来，它应该返回一个返回原始迭代的迭代，然后在原始迭代上继续输入。

上面的转换方法应该解释我想从我的被枚举者那里得到什么行为。如何通过覆盖 applyOn 而不是转换来实现此行为？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-11T13:35:41.603

您可以将 prepend Enumeratee 编辑为如下所示：

```
object Enumeratees {
  def prepend[T](toPrepend: T) = new Enumeratee[T, T] {
    def applyOn[A](inner: Iteratee[T, A]): Iteratee[T, Iteratee[T, A]] = {
      val prepended = Iteratee.flatten(inner.feed(Input.El(toPrepend)))
      Enumeratee.passAlong[T](prepended)
    }
  }
} 
```

或者你在应用 Enumeratee 和 Enumerator 之后得到原始的 Iteratee，类似于[Scala：Getting original iteratee after application enumeratee（play 文档中的示例无法编译）](https://stackoverflow.com/questions/10968637/scala-getting-original-iteratee-after-applying-enumeratee-example-from-play-do/10968790#comment14322714_10968790)

`&>>`当外部完成时将结束内部迭代。这是唯一能够获得的方法，`Iteratee[EOuter,AInner]`因为 Enumeratee 主要是关于适应。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T10:28:51.230

关于什么

```
Enumerator(1,2,3,4) |>>
Iteratee.flatten( Enumerator(0) |>> Iteratee.foreach[Int]{i=>println(i)} ) 
```

或者

```
Enumerator(1,2,3,4) |>> (Enumeratees.prepend2(0) &> Iteratee.foreach[Int]{i=>println(i)}) 
```

# visual-c++ - Unable to read the security descriptor from service

> ID：10977091
> 
> 赞同：0
> 
> 时间：2012-06-11T09:04:20.233
> 
> 标签：visual-c++, acl, dacl

I unable to read security descriptor of a folder from service.

The folder is created by a Limited user. Administrators Group is **Denied** "Read and Execute" control. Limited user & System user has full access. I have an elevated token privileged for - "SE_SECURITY_NAME", "SE_BACKUP_NAME", "SE_RESTORE_NAME" and "SE_DEBUG_NAME".

GetNamedSecurityInfo fails with Error Code 5 (Access Denied).

Full marks for anybody that can even be remotely of help. Thanks in advance.

-- Varun

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T15:49:33.840

一个潜在的原因可能是，令牌的安全描述符（代表您的服务）的权限具有所需的权限，但这些权限尚未**启用**。

# ruby-on-rails - Tracking user changes profile with devise

> ID：10977092
> 
> 赞同：0
> 
> 时间：2012-06-11T09:04:20.303
> 
> 标签：ruby-on-rails, tracking

I want to track changes: if user changes comething in his profile he will see another link.

Here is my code in view:

```
 <% if current_user.changed?%>
      <%= link_to  "Add another website to your Print-it-Green account", commit_new_website_path %>
     <%else%>
        <%=  submit_tag "Generate Print-it-Green code", :class => "btn wide"%>
<%end%> 
```

or this is wrong and I should try something else ?

# javascript - 禁用 iframe 中的输入字段

> ID：10977095
> 
> 赞同：0
> 
> 时间：2012-06-11T09:04:24.607
> 
> 标签：javascript, iframe

我有一个 iframe 加载带有输入文本的表单，是否可以在表单加载到 iframe 时禁用所有输入？没有在所有输入字段中插入禁用命令？谢谢 F。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T09:09:39.510

如果 iframe 内容与主页面来自同一个域，您可以简单地使用 jquery ：

```
$(iframe).find('input').attr('disabled', 'disabled'); 
```

如果没有 jquery，您必须遍历表单及其输入：

```
for (var i=0; i<iframe.forms.length; i++) {
    var form = iframe.forms[i];
    for (var j=0; j<form.elements.length; j++) {
        form.elements[j].disabled = true;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T09:10:59.193

使用 JQuery，无论主页的域如何：（将其包含在 iframe 中，假设您控制源）。

```
if (window!=window.top) {
    $('input').attr('disabled', 'disabled');
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T09:11:27.227

是的，你可以做到

首先为您的表单提供一个 id 并基于该 id 值禁用所有输入字段

$(# id.input).attr("disabled","disabled");

# workbench - setting automatic pk to autoincrement in workbench

> ID：10977097
> 
> 赞同：2
> 
> 时间：2012-06-11T09:04:39.380
> 
> 标签：workbench

I am working in workbench and when i create a table workbench creates PK atribute for me. Is there any way i could make this attribute be set to autoincrement value as well?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-12-11T06:45:38.010

是的。在数据库下，选择`Alter Table`有问题的表。检查`AI`您正在使用的列旁边的复选标记`primary key`（PK 和 NN 也应检查）。

[![自动增量复选标记](../Images/eeac5cf5c52248e2ecf94102f9cb62a5.png)](https://i.stack.imgur.com/5rxBE.png)

# xslt - How to preserve white space in XSLT variable pass to a href?

> ID：10977098
> 
> 赞同：0
> 
> 时间：2012-06-11T09:04:40.340
> 
> 标签：xslt

I have xslt variable:

```
<xsl:variable name="sRemarks">
<xsl:value-of select="remarks"/>
</xsl:variable> 
```

I want to pass and view the variable sRemarks in anchor href code but the value have a white space and an enter space.

sample output;

```
Hello!

Hi! 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T09:10:12.647

~~你得到空格是因为变量中有空格。让它成为单行...~~

 ~~```
<xsl:variable name="sRemarks"><xsl:value-of select="remarks"/></xsl:variable> 
```~~ 

或者选择它

```
<xsl:variable name="sRemarks" select="remarks" /> 
```

 ~~**更新**

如果您实际上希望空格/回车符保留在 HREF 中，则需要对链接进行“urlencode”。

取自[这里](http://www.jonmiles.co.uk/2009/02/url-encoding-with-xslt/)，如果您使用 XSLT 2，“fn:encode-for-uri”应该可以工作。

**第二次更新**

正如迈克尔所指出的，我的答案的第一部分是不正确的，不应该选择变量内的间距（除非你有`xml:space="preserve"`）。~~

# regex - Regex how to get particular search within quotes

> ID：10977099
> 
> 赞同：1
> 
> 时间：2012-06-11T09:04:49.950
> 
> 标签：regex

I need to get a particular id from the quotes.

Input string is below

```
thecodeis = "3468337910"; 
```

expecting the output to be below

> 3468337910

I tried with couple of options but the closest I got was `.*`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T09:15:37.187

在**蟒蛇**：

```
string = 'thecodeis = "34688337910";'
pattern =  'thecodeis\s*=\s*"([0-9]+)";'
re.findall(pattern, string)   // return ['34688337910'] 
```

如果您的输入字符串具有不同的格式，请`pattern`改用：

```
pattern = '"([0-9])+"' 
```

它将返回页面中引号之间的所有数字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T09:07:35.540

你的正则表达式很接近

```
".*" 
```

但是，如果您只想要数字，则应将其捕获在带括号的组中

```
"(.*)" 
```

您使用什么语言？也许我们可以帮助语法

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T09:14:51.037

使用`\d+`- 它将捕获字符串中的*至少一位数字*。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-11T09:12:35.683

您应该能够使用 "([\d])" 因为这将在字符串中找到任何数字。

如果您可以提供更多详细信息，例如您尝试在哪种语言中执行此操作，或者它是否适用于 .htaccess 文件，那么您应该得到更具体的回复。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-11T09:46:46.287

**用这个**

```
"([^"]+?)" 
```

**解释**

```
<!--
"([^"]+?)"

Options: case insensitive

Match the character “"” literally «"»
Match the regular expression below and capture its match into backreference number 1 «([^"]+?)»
   Match any character that is NOT a “"” «[^"]+?»
      Between one and unlimited times, as few times as possible, expanding as needed (lazy) «+?»
Match the character “"” literally «"»
--> 
```

# php - Foursquare API 用于场地用户图像错误

> ID：10977100
> 
> 赞同：23
> 
> 时间：2012-06-11T09:04:51.627
> 
> 标签：php, api, foursquare

Foursquare API 将用户的照片标签分为前缀和后缀。但是，如果我将它们合并以形成完整的图像 URL 并将其粘贴到我的浏览器中，则会出现错误，指出图像无法显示，因为它包含错误。是因为服务器暂时不可用还是其他原因？

我正在使用 API 获取场地详情。

我得到了这样的数据

```
user: {

id: "26534686"
firstName: "Bobbi"
lastName: "E."
photo: {
    prefix: "https://irs3.4sqi.net/img/user/"
    suffix: "/K4VCI4MXHWFUGXOF.jpg"
}
}
visibility: "public" 
```

但是当我调用这个网址[https://irs3.4sqi.net/img/user/K4VCI4MXHWFUGXOF.jpg](https://irs3.4sqi.net/img/user/K4VCI4MXHWFUGXOF.jpg)给我错误。

有什么线索吗？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-06-12T09:30:13.093

我不知道它是否有权为 Foursquare 指明道路。但是我调查过 Foursquare 创建的缩略图大小为 30 x 30 和 110 x 110 等。

我为小图像形成了这样的图像路径

```
user->photo->prefix.'30x30'.user->photo->suffix; 
```

对于更大的尺寸

```
user->photo->prefix.'110x110'.user->photo->suffix; 
```

那就是我将它们与（30x30）和（110x110）连接起来。

这样上图就变成了 [https://irs3.4sqi.net/img/user/30x30/K4VCI4MXHWFUGXOF.jpg](https://irs3.4sqi.net/img/user/30x30/K4VCI4MXHWFUGXOF.jpg) 和 [https://irs3.4sqi.net/img/user/110x110/K4VCI4MXHWFUGXOF.jpg](https://irs3.4sqi.net/img/user/110x110/K4VCI4MXHWFUGXOF.jpg)直到现在都有效。

希望这会奏效，直到他们改变这一点。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-12-12T20:37:18.640

根据现在更新的[Foursquare 文档：](https://developer.foursquare.com/docs/responses/photo.html)

> 要组装可解析的照片 URL，请使用前缀 + 大小 + 后缀，例如[https://irs0.4sqi.net/img/general/300x500/2341723_vt1Kr-SfmRmdge-M7b4KNgX2_PHElyVbYL65pMnxEQw.jpg](https://irs0.4sqi.net/img/general/300x500/2341723_vt1Kr-SfmRmdge-M7b4KNgX2_PHElyVbYL65pMnxEQw.jpg)。
> 
> size 可以是以下之一，其中 XX 或 YY 是 36、100、300 或 500 之一。
> 
> *   XXYY
> *   original：原始照片的大小
> *   capXX：以 XX 的宽度或高度（以较大者为准）为照片加盖。按比例缩放另一个 - 较小的尺寸
> *   widthXX：强制宽度为 XX 并按比例缩放高度
> *   heightYY：强制高度为 YY 并按比例缩放宽度

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-06-11T13:27:00.357

这是foursquare 在6 月9 日所做的更改，请在此处查看google 组的AK 公告：[https ://groups.google.com/forum/#!topic/foursquare-api/MpNpdO5zARU](https://groups.google.com/forum/#!topic/foursquare-api/MpNpdO5zARU)

要修复它，在您的请求中将“v”更改为低于 20120609 的值，20120608 将起作用并返回带有用户图片缩略图的 url（json 字符串）。

目前还没有关于如何使用前缀/后缀的文档。他们可能会在有的时候发布。

发现你也可以通过[prefix]/original/[suffix]访问它，然后使用较新的版本（>20120609）

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-03-08T16:07:36.007

这是我在使用类别图片 url 时使用的格式

前缀-> [https://ss3.4​​sqi.net/img/categories_v2/nightlife/karaoke_](https://ss3.4sqi.net/img/categories_v2/nightlife/karaoke_)

卡拉 OK 是图像名称，后跟下划线，然后是图像大小。

后缀 -> .png

然后添加有效尺寸。我使用 64 支持多种尺寸

所以[https://ss3.4​​sqi.net/img/categories_v2/nightlife/karaoke_64.png](https://ss3.4sqi.net/img/categories_v2/nightlife/karaoke_64.png)

# ruby-on-rails-3 - 在 Rails 3 中使用数组格式的 find_by_sql

> ID：10977104
> 
> 赞同：9
> 
> 时间：2012-06-11T09:05:08.697
> 
> 标签：ruby-on-rails-3, activerecord, model, find-by-sql

美好的一天，伙计们！

我在 rails 3 中使用**find_by_sql()**来获取记录，如下所示。

```
@list=Email.find_by_sql(["SELECT * FROM Emails WHERE sent_id=?",params[:id]]) 
```

如果多个参数适用于同一属性，如何修改同一语句，例如：

```
@list=Email.find_by_sql(["SELECT * FROM Emails WHERE (sent_id=? OR from_id=?)",params[:id],params[:id]]) 
```

在这里，**sent_id**和**from_id**属性都接收相同的参数**params[:id]**

那么，除了传递相同的**params[:id]**两次之外，是否有任何机制可以根据顺序传递参数？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-06-11T14:36:44.873

您可以使用哈希来命名插值，如下所示：

```
@list = Email.find_by_sql(["SELECT * FROM Emails WHERE (sent_id = :id OR from_id = :id)", {:id => params[:id]}]) 
```

# windows-phone-7 - 如何在wp7中动态绑定列表框中的图像源？

> ID：10977105
> 
> 赞同：0
> 
> 时间：2012-06-11T09:05:31.570
> 
> 标签：windows-phone-7

我的代码：

```
<ListBox.ItemTemplate>
                        <DataTemplate>
                            <StackPanel>
                                <Image Height="100" Width="105" Source="{Binding Icon}" VerticalAlignment="Top" OpacityMask="White" Stretch="Fill" />
                                <TextBlock Text="{Binding Name}" Style="{StaticResource PhoneTextSubtleStyle}"
                              Width="110" TextAlignment="Center"/>
                                <Image  Source="{Binding ImageSrc}" Height="20" Width="20"  VerticalAlignment="Top" HorizontalAlignment="Right" Margin="0,-50,15,0" Stretch="Fill"  />

                            </StackPanel>
                        </DataTemplate>
                    </ListBox.ItemTemplate>

    interestrates = (from rts in xmlDocu.Descendants("Friend")

                                     select new SampleCheckedData
                                     {

                                         Id = (string)rts.Element("userid"),
                                         Name = (string)rts.Element("name"),
                                         Icon = (string)rts.Element("imageurl"),
                                         VisibleStatus = (string)rts.Element("visiblestatus"),
                                         AppStatus = (string)rts.Element("loginstatus"),

                                     }).ToList<SampleCheckedData>();

                    this.lstImages.ItemsSource = interestrates; 
```

我能够正确绑定名称和图标。但是我需要将 Imagesrc 图像设置为好像 visiblestatus，Appstatus 展位是真实的，然后需要绑定一种类型的图像，否则需要通过代码绑定另一种类型的图像。如何实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T14:10:17.983

只需使用一个名为 ImageSrc 的属性，如下所示：

```
public class SampleCheckedData
{

//... your properties

        public Uri ImageSrc
        {
            get
            {
               if ((bool.Parse(this.VisibleStatus) && (bool.Parse(this.AppStatus))
                {
                if (!string.IsNullOrEmpty(this.Icon))
                    return new Uri(this.Icon, UriKind.Absolute); //or whatever image
                }
                else
                {
                    return new Uri("/Images/YourOtherImage.png", UriKind.Relative);
                }

            }
        }
} 
```

它应该工作。至少这是我用来绑定图像的方式......

注意：我假设 Icon 属性具有图像的绝对路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T21:50:37.557

只是为了添加到@josemiguel.torres，image.Source 是 ImageSource 类型，因此您不想返回 Uri，而是希望这样做：

```
return new BitmapImage(new Uri(this.Icon, UriKind.Absolute)); 
```

# objective-c - NSString 到 NSDecimal 的转换

> ID：10977109
> 
> 赞同：0
> 
> 时间：2012-06-11T09:05:59.747
> 
> 标签：objective-c

我需要将 NSString 转换为 NSDecimalNumber 。我试过这段代码

```
 payment.subTotal =[NSDecimalNumber decimalNumberWithString:str1]; 
```

其中 str1 是我的 NSString 来自其他一些类，它带有来自文本字段的数字。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T09:17:42.407

尝试这个：

```
NSDecimalNumber* dec = (NSDecimalNumber *)str1; 
```

# python - 从 django 到 mysql 过程的键/值映射

> ID：10977114
> 
> 赞同：1
> 
> 时间：2012-06-11T09:06:11.063
> 
> 标签：python, mysql, django, stored-procedures

我的 django web 应用程序的会话中有一个键/值映射。例子：

```
3 = YES
4 = NO
9 = YES 
```

我想将这些键和值传递给 mysql 程序。实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T09:26:57.303

[MySQL 不支持将数组传递给存储过程](http://dev.mysql.com/doc/refman/5.5/en/faqs-stored-procs.html#qandaitem-B-4-1-17)，因此您不能直接这样做。

如果已知键的最大值，则可以创建一个带有许多参数的存储过程。在您的示例中，您可以创建一个具有 9 个参数的过程，为第三个和第九个参数传递 YES，为第四个参数传递 NO，为其余参数传递 NULL。丑陋，但它的工作原理。

如果您不能这样做，那么您可以创建一个新表，其中会话 ID、键和值作为列，并将会话 ID 作为参数传递给您的存储过程。然后您可以选择存储过程中的键/值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T09:25:25.533

您可以直接使用 django[执行 sql 查询。](https://docs.djangoproject.com/en/dev/topics/db/sql/#executing-custom-sql-directly)

# linux - 改变 html 通过 shell 脚本

> ID：10977115
> 
> 赞同：1
> 
> 时间：2012-06-11T09:06:13.163
> 
> 标签：linux, bash, shell

我有以下 html，我想`<p> Text </p>`根据我的 shell 脚本中的 var 更改更改部分。

```
<div id="demo"><p> Text </p></div> 
```

我一直在尝试使用以下功能，但它似乎不起作用，而且我需要它来获取更改`<p> Text </p>`部分中的任何内容，因为它会定期更改

```
fnChangeTxt()
{
        sed -i 's/<div id="'$1'"><p>*.*</<div id="'$1'"><p>'$2'</' /var/www/html/alarm.html
} 
```

调用函数

```
fnChangeTxt 'demo' 'Next' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T13:46:15.623

你需要改变你的报价。为了便于阅读，我建议对`s`命令使用不同的分隔符 - 一个不太可能出现在您正在修改的文本中的分隔符。这将使读者不太可能因为在使用 HTML 的东西中看到奇怪位置的斜线而感到困惑。

```
fnChangeTxt() 
{
     sed -i "s|<div id=\"$1\"><p>.*<|<div id=\"$1\"><p>$2<|" /var/www/html/alarm.html;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T10:26:30.120

对于初学者来说，单引号将防止用提供的输入替换变量。

其次，您只`.*`需要匹配“一切”。（实际上“任何字符的出现次数为 0 次”）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T11:36:39.377

`sed`真的不需要：

```
#!/bin/bash

new='some stuff'

while read
do
    echo ${REPLY/<p>*<\/p>/<p> $new </p>}

done << '__END__'
<div id="demo"><p> Text </p></div> 
<div id="demo"><p> Text </p></div> 
__END__ 
```

给出：

```
<div id="demo"><p> some stuff </p></div>
<div id="demo"><p> some stuff </p></div> 
```

用您的文件名替换此处的文档。

# java - Java：多线程邮件应用程序泄漏内存

> ID：10977116
> 
> 赞同：0
> 
> 时间：2012-06-11T09:06:14.310
> 
> 标签：java, multithreading, memory-leaks

我有一个自己编写的 Java 应用程序——一个小邮件监视器。它与一个 MySQL 数据库一起工作，该数据库有一个定期在其他地方填充的表。它查看表格并在记录出现在表格中时发送邮件。

我的问题是，应用程序泄漏内存。我很确定它没有，因为我使用的所有东西的范围似乎都消失了，使所有使用的对象都可以垃圾回收。但过了一会儿（取决于我通过的 -Xmx），应用程序停止并出现 OutOfHeapSpace 错误。

我无法发布整个代码，因为它不再是我的了，但我尝试使用伪代码重新创建它。

```
Main:
  Startup
  Create .lock file (FileChannel)
  Instantiate Main Class

Constructor Main:
  Class.ForName for the MySQL driver
  Read properties file (settings)
  Create connection object (MySQL)
  Fetch unsent mail ids (ArrayList)
  while(true)
    while have more mail ids
      new Thread(Top Mail ID, MySQL Connection object, Sleep Time, Blacklist);
    end while
    if have no more mail ids in ArrayList:
      sleep for a number of seconds (usually 300)
    end if
  end while

Constructor Thread:
  Prepare Statement
  New Thread(this).start();
  Sleep

Thread run():
  Select Record by passed Mail ID
  Extract everything (Sender, Receiver, Subject etc.)
  Check Blacklist, return if matched
  Extract Attachments as blobs 
```

到目前为止我已经尝试过：

jvisualvm 向我展示了内存如何随时间变化。我看到的是堆中的一条锯齿线：分配和收集内存定期发生，但是，在收集之后分配的内存总是比上次收集后多一点。线程的数量似乎很好，它总是下降到标准数量。

jvisualvm 中的信息量对我来说太多了。那里列出了我无法识别的线程，我创建的线程没有列为我的类，因此很难确定究竟什么是“我的”代码。

任何人都可以在我的伪代码中识别出任何常见的多线程错误，或者推荐任何可以让我更容易确定泄漏的工具吗？

谢谢你。

编辑1：通过传递给所有线程的连接对象的数据访问在其自身上同步。

编辑 2：我检查了无法发送的邮件数量（因为这些邮件保留在数据库中），大约有 10 个。

编辑3：我找到了Eclipse Memory Analyzer，安装了它，它暗示了这个问题。似乎在保留一个连接对象的同时使用 PreparedStatements 会保留在其中运行过该连接的所有 PreparedStatements 的 HashMap，因此将所有选择的数据添加到其中。我依靠 PreparedStatement 超出范围并被收集。如果这能解决问题，我将重写并尝试。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T09:27:50.047

从您的伪代码来看，您似乎正在为每封要发送的电子邮件创建一个线程，这似乎并不那么有效。我知道您提到线程数是“正常的”，但代码似乎另有说明。您是否可以尝试使用线程池，这样您的线程工作人员数量有限，并通过某种作业队列将工作传递给他们。

你知道是否有一些错误可能导致线程无法完成或让它们“挂起”？这可能是内存泄漏，因此请查看您的错误处理代码。

过去我使用过`jprofiler`并取得了一些成功，也许它会是一个有用的选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T11:53:02.787

如果这对任何人都感兴趣，我修复了内存问题。

该应用程序实际上并没有泄漏内存。当我传递相同的连接对象时，它似乎将针对它运行的每个准备好的语句的结果保存在一个大的哈希图中。因此，内存使用量不断上升。我通过使用 jvisualvm 创建的堆转储并加载到 Eclipse 内存分析器中发现了这一点。

我重写了应用程序以使用线程池（缓存），为每个线程打开一个专用连接，并在每个线程结束时关闭连接。

# javascript - 使用咖啡脚本/javascript“抛出错误”或“抛出新错误（错误）”？

> ID：10977120
> 
> 赞同：9
> 
> 时间：2012-06-11T09:06:32.333
> 
> 标签：javascript, error-handling, coffeescript

我有以下咖啡脚本代码：

```
try
   do something
catch error
   log something
   throw error 
```

我应该使用`throw new Error(error)`而不是`throw error`吗？

有什么区别？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-11T09:15:16.377

与 C# 或 Java 等其他语言相同：

*   `throw error`抛出相同的错误对象
*   `throw new Error(error)`将其包装到一个新的 Error 对象中。后者用于，例如，在 Java 中，当您需要将已[检查的异常](https://stackoverflow.com/questions/6115896/java-checked-vs-unchecked-exception-explaination)转换为未检查的异常时。在 JavaScript 中，您不需要包装异常，因为这会使堆栈跟踪变得更长且不那么漂亮。

**编辑**：还有一些安全隐患。这是一个例子：

```
function noWrap() {
    try {
        var o = {}; o.nonexistingMethod();
    } catch (error) {
        throw error;
    }
}

function wrap() {
    try {
        var o = {}; o.nonexistingMethod();
    } catch (error) {
        throw new Error(error);
    }
} 
```

调用`noWrap()`会产生以下错误消息：

```
"TypeError: Object #<Object> has no method 'nonexistingMethod'"
// with error.arguments === ['nonexistingMethod', o] 
```

调用`wrap()`会产生以下错误消息：

```
"Error: TypeError: Object #<Object> has no method 'nonexistingMethod'"
//  with error.arguments === undefined 
```

因此，正如您所看到的，通过使用包装 Error 对象，我们可以隐藏`arguments`原始错误。假设您正在编写以下内容之一：

*   某种图书馆
*   将加载到您不拥有的页面上的脚本（例如，某种喜欢或推文按钮）
*   页面上加载了一些第三方脚本（社交按钮、广告、跟踪代码等）的脚本

在上面列出的所有这些情况下，为了保持安全*，您应该包装您的* `Error` *对象*。否则，您可能会意外泄漏对内部对象、函数和变量的引用。

**编辑 2**：关于堆栈跟踪。两种变体都保留了它们。这是[一个工作示例](http://jsfiddle.net/listochkin/tJzCF/)，我在 Chrome 中得到以下堆栈跟踪：

```
// No wrapping:
TypeError: Object #<Object> has no method 'nonexistingMethod'
    at noWrap (http://fiddle.jshell.net/listochkin/tJzCF/show/:22:23)
    at http://fiddle.jshell.net/listochkin/tJzCF/show/:37:5
    at http://fiddle.jshell.net/js/lib/mootools-core-1.4.5-nocompat.js:3901:62
    at http://fiddle.jshell.net/js/lib/mootools-core-1.4.5-nocompat.js:3915:20

// Wrapping:
Error: TypeError: Object #<Object> has no method 'nonexistingMethod'
    at wrap (http://fiddle.jshell.net/listochkin/tJzCF/show/:32:15)
    at http://fiddle.jshell.net/listochkin/tJzCF/show/:44:5
    at http://fiddle.jshell.net/js/lib/mootools-core-1.4.5-nocompat.js:3901:62
    at http://fiddle.jshell.net/js/lib/mootools-core-1.4.5-nocompat.js:3915:20 
```

# algorithm - 这个算法流符号的名称是什么？

> ID：10977122
> 
> 赞同：3
> 
> 时间：2012-06-11T09:06:40.723
> 
> 标签：algorithm, flow, notation

我在我的编程笔记中发现了这一点，但在右侧找不到对算法流程图的引用。这个符号的名称是什么？

![带块的算法流程](../Images/4c906e2058366f241ea35eef4c885d83.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T09:12:38.570

它被称为**结构**图或 **Nassi-Shneiderman 图**。

有关更多信息，请查看相应的[维基百科文章](http://en.wikipedia.org/wiki/Structogram)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T09:12:37.227

对我来说看起来像一个[Nassi-Shneiderman](http://en.wikipedia.org/wiki/Nassi%E2%80%93Shneiderman_diagram)图。

# php - PHP Gearman客户端

> ID：10977124
> 
> 赞同：0
> 
> 时间：2012-06-11T09:07:03.327
> 
> 标签：php, gearman

我正在研究 Gearman 客户端-工作者脚本。我们可以将 Gearman 回调方法声明为受保护的或私有的吗？IE

```
$this->gearmanClient->setCompleteCallback(array($this, 'JobComplete'));
$this->gearmanClient->setFailCallback(array($this, 'JobFailCallBack')); 
```

与“JobComplete”方法等一起使用的最佳访问运算符是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T10:21:27.833

在 PHP 中，私有/受保护的回调只有在从正确的上下文（例如，在有权访问这些回调的类中）调用时才能访问 - 请参阅[此处](https://stackoverflow.com/questions/1028035/can-i-use-private-instance-methods-as-callbacks)进行讨论。

在您的情况下， GearmanClient 类将无法访问回调（除非您围绕它做了一些非常奇怪的抽象）。所以答案是否定的，你不能。

至于访问运算符的问题（如果我理解正确的话——是使用对象回调还是类回调），我猜答案是——这取决于。如果您的回调将提供有关特定对象的数据，那么该对象接收回调是有意义的。如果它是您的应用程序将仅存储在 DB 中的通用消息，那么静态类接口也可以做到这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T13:35:16.373

我们当然可以。只需将其包裹在闭包周围：

```
$this->gearmanClient->setCompleteCallback(function () {
    $this->JobComplete();
}); 
```

# html - 打开到 Web 套接字的连接

> ID：10977125
> 
> 赞同：-1
> 
> 时间：2012-06-11T09:07:05.853
> 
> 标签：html, google-chrome, ubuntu, websocket

我尝试在 google chrome (15.0.874.106 (Developer Build 107270 Linux) Ubuntu 10.04) 中使用 Web 套接字运行以下 html 页面

[运行 Web Socket 客户端编程](https://stackoverflow.com/questions/10907927/running-web-socket-client-side-programming/10908019#comment14223890_10908019)

但我得到的输出是“断开连接或连接关闭”

如何解决这个问题并打开连接？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T13:20:04.687

尝试使用当前版本的 Chrome（我们现在最多 20 个）。不同版本的 Chrome 支持[不同版本的 WebSocket 协议](http://en.wikipedia.org/wiki/WebSocket#Browser_support)。您可能正在尝试连接到运行该协议的更新版本的服务器。

# android - WindowsPhone7芒果中是否有类似AlarmManager（Android）的东西，它会在闹钟响起时启动应用程序？

> ID：10977126
> 
> 赞同：1
> 
> 时间：2012-06-11T09:07:05.987
> 
> 标签：android, windows-phone

WindowsPhone7 芒果中是否有类似 AlarmManager(Android) 的东西，它会在闹钟响起时启动应用程序？就像在 android 我们有[http://developer.android.com/reference/android/app/AlarmManager.html](http://developer.android.com/reference/android/app/AlarmManager.html) 但在 WindowsPhone7 我们有这个[http://msdn.microsoft.com/en-us/library/hh202965(v= vs.92).aspx](http://msdn.microsoft.com/en-us/library/hh202965(v=vs.92).aspx)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T09:11:51.943

不，您不能仅在用户点击通知时按时间执行应用程序

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T12:00:57.650

在 Windows Phone 7 中启动应用程序的唯一方法是响应用户操作。

其中包括：
- 从应用程序列表
启动 - 从活动磁贴
启动 - 通过点击为/从该应用程序发送的 toast 消息
启动 - 通过点击从该应用程序创建的提醒中显示的 UI 启动

# objective-c - 调试是唯一在 Objective C 程序中使用 iVar 有意义的情况吗？

> ID：10977131
> 
> 赞同：2
> 
> 时间：2012-06-11T09:07:33.327
> 
> 标签：objective-c, ios, macos

在我开发的最初几天，我开始总是在我编写的每个程序中创建实例变量。但是在了解了属性的力量之后，我觉得我们不需要使用 iVars。

但是有时当我不得不调试代码时，由于缺少 iVar，我发现调试自定义实体的值很困难。

现在我计划在所有自定义接口实现上使用 iVar。

请确认我一直在做的事情是否是一个好的做法，是否有取舍？

我们需要在 Objective C 中使用 iVar 是否还有其他原因？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-11T09:13:31.567

您不是通过使用属性来“不使用”iVar（大多数情况下）。您只是让编译器为您生成它们。我经常将私有和受保护的 iVar 用于我不想暴露给外部无关类（标志等）的东西。属性只是 iVar 加上定义的 getter（可能还有 setter）。我不明白您认为通过避免明确的 iVar 可以获得什么。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-11T09:16:57.837

首先，您的属性总是由实例变量支持，除非您有一些动态运行时的东西（例如使用 的子类`NSManagedObject`）或者该属性完全使用自定义 getter/setter 实现。

当您合成一个属性时，会为您创建一个实例变量。您可以在声明中显式声明实例变量`@interface {}`，但不再需要这样做。

通常，您应该更喜欢使用属性而不是实例变量，但在某些情况下您必须直接访问实例变量。例如，`init`方法的最佳实践是避免使用属性访问器来设置对象，因为子类可以覆盖属性访问器并尝试在对象完全初始化之前做一些事情。自定义 getter/setter 方法也需要直接使用实例变量。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-11T09:14:25.157

当您声明属性和 @synthesize 语句时，编译器将注意在访问器方法中创建实例变量。请参阅此链接以获取更多信息[我应该在 Objective-C 中使用 ivars 吗？](https://stackoverflow.com/q/9010647/705559)

# objective-c - 从 dateFromString 方法的 NSDateFormatter 获取错误的日期？

> ID：10977133
> 
> 赞同：1
> 
> 时间：2012-06-11T09:07:38.103
> 
> 标签：objective-c, ios, nsstring, nsdate, nsdateformatter

我正在尝试`NSDate`从 string 获取对象。我使用休闲代码

```
NSString *st1=@"4:39 AM";
NSDateFormatter *dateFormatter=[[NSDateFormatter alloc] init];
[dateFormatter setDateFormat:@"hh:mm a"];
NSDate *dateobj=[dateFormatter dateFromString:st1];
NSLog(@"Date from string 4:39 AM is %@",dateobj); 
```

但它给出了错误的输出，例如

**来自字符串 4:39 AM 的日期是 1969-12-31 23:09:00 +0000**

`NSDate`从这种类型的字符串中获取对象的确切方法是什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T09:09:22.663

不要将你的结果基于 NSLoging `NSDate`，因为记录它会给你 GMT 的时间 请参考我对这个问题的回答[NSDateFormatter 给我提前 4 小时的时间](https://stackoverflow.com/questions/10974496/nsdateformatter-giving-me-time-4-hours-ahead/10974601#10974601)

例如，如果您想`UILocalNotification`在凌晨 4:39 触发 a，您可以执行以下操作

```
NSCalendar* myCalendar = [NSCalendar currentCalendar];
NSDateComponents* components = [myCalendar components:NSYearCalendarUnit|NSMonthCalendarUnit|NSDayCalendarUnit 
                                             fromDate:[NSDate date]];
//4:39 Am
[components setHour: 4]; //4 am
[components setMinute: 39];//39 minutes
[components setSecond: 0];// 0 seconds
NSDate *myDate = [myCalendar dateFromComponents:components];

NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
[formatter setDateFormat:@"MMMM dd, yyyy h:mma"];  
NSString *str = [formatter stringFromDate:myDate];

NSLog(@"date is %@", myDate); //This will log the correct data but in GMT time zone
NSLog(@"date is %@", str); //This will log the correct data

UILocalNotification *notification = [[UILocalNotification alloc] init];
notification.fireDate = myDate; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T09:15:42.050

这是对的。您确实只指定了时间而不是日期。这样，日期被假定为计算机时代 1970/1/1（计算机零时间）的开始。`NSLog`然后根据您的时区 (GMT-5) 显示它。

如果你想要一个更好的答案，你必须指定你想要的输出。代码是正确的，结果也是正确的。

# php - 将数据插入一个表并更新另一个表

> ID：10977137
> 
> 赞同：0
> 
> 时间：2012-06-11T09:07:56.137
> 
> 标签：php, insert

我有 2 张不同的桌子`project`和`payments`. 当我插入付款时，我希望将表中的值`flag`更改`project`为与(是表中的另一个单元格) 和 的`paid`值`$money inserted`完全相同的值。`cost``cost``project``$order = proj_name`

代码来了！

```
 <?php
 include("connect.php");
 // define variables
 $name = $_POST['name'];
 $order = $_POST['order'];
 $money = $_POST['money'];
 $date = $_POST['date'];

 $sql="INSERT INTO payments VALUES
 ('','$name','$order','$money','$date')";

 $s="UPDATE project SET flag='payed' WHERE proj_name='$order' AND cost like '%money%'";
 mysql_query($s);
 echo '<center>' ."Payment stored successfully". '</center>';
 echo '<center>'."<a href='payments_edit.php'>View Changes</a>".'</center>';

 if (!mysql_query($sql,$con))
  {
  die('Error: ' . mysql_error());
  }

mysql_close();?> 
```

如果您想了解更多信息，请告诉我:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T09:28:39.777

你`$`在`AND cost like '%money%'`. 它应该是`AND cost like '%$money%'`

# wpf - 为 WPF 的 XAML 上的 TextBlock 分配 SystemColor 前景

> ID：10977139
> 
> 赞同：2
> 
> 时间：2012-06-11T09:08:00.567
> 
> 标签：wpf, xaml, textblock, systemcolors

我正在尝试为 WPF 的 XAML 上的 TextBlock 分配一些 SystemColor 前景。主要想法是使应用程序更易于访问，即在高对比度下也能很好地被看到。

我尝试了以下代码，但它对显示的颜色没有任何影响：

```
 <StackPanel Orientation="Horizontal"                        
        Background="{DynamicResource {x:Static SystemColors.HotTrackBrush}}">
        <TextBlock Text="my app" 
                   HorizontalAlignment="Left"                                               
                   Style="{StaticResource MainPageText}"
                   VerticalAlignment="Center"
                   TextWrapping="Wrap"
                   x:Name="Title"/>
  </StackPanel> 
```

我对此很陌生，所以你能告诉我你认为是什么问题吗？

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-11T09:14:51.900

要接收动态更改通知，您需要使用`HotTrackBrushKey`.

```
<StackPanel Orientation="Horizontal"                         
            Background="{DynamicResource {x:Static SystemColors.HotTrackBrushKey}}"> 
```

没有动态变化通知

```
<StackPanel Orientation="Horizontal"
            Background="{x:Static SystemColors.HotTrackBrush}"> 
```

如需参考，请参阅：[SystemColors 参考](http://blogs.msdn.com/b/wpf/archive/2010/11/30/systemcolors-reference.aspx)

# python - Appengine Python 中的并发请求

> ID：10977143
> 
> 赞同：7
> 
> 时间：2012-06-11T09:08:22.210
> 
> 标签：python, performance, google-app-engine, concurrency, python-2.7

官方 appengine 文档说，如果我们在 app.yaml 中将 threadsafe 属性设置为 true，那么 appengine 将处理并发请求。

官方链接： [https ://developers.google.com/appengine/docs/python/python27/newin27#Concurrent_Requests](https://developers.google.com/appengine/docs/python/python27/newin27#Concurrent_Requests)

*   如果我们将线程安全属性设置为 true，这是否意味着应用程序将更快（比 2.5）？官方文档/博客这么说，但我正在寻找真实世界的经验。

*   在高层次上，它在内部是如何工作的？我们的应用程序会被初始化并为每个请求生成一个新的 theread 吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-12T23:12:10.723

每个请求您仍然只有一个线程 - 您无法生成。

关闭线程安全后，Appengine 只会将一个请求路由到一个实例。因此，如果每秒请求数乘以处理请求的时间接近 1，Appengine 将启动一个新实例来处理它们。这要花钱。启用线程安全后，Appengine 可以将多个请求路由到一个实例。

这是否对您有帮助取决于您的应用程序和您的流量：

1.  首先，计算每秒入站请求/平均延迟。如果这远低于 1，那么无论哪种方式，线程安全都不会产生太大影响。
2.  检查您的应用程序以了解它在等待 API（例如数据存储或 URL 获取）上花费了多少时间。如果这是一个很大的比例，那么线程安全将有助于让您的实例倒计时。如果没有，它不会有太大帮助。

简单的规则是打开线程安全，除非您的应用程序非常需要处理（很少有 API 等待）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-11T09:20:04.420

1.  这并不意味着您的应用程序会变得更快，请求仍然由单个线程提供服务。
2.  当应用程序是线程安全的时，每个实例现在可以产生多个线程，每个线程将服务于一个请求，与非线程安全的情况相反，其中每个实例都有一个线程服务请求。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-13T04:29:10.413

在每个请求的基础上，Python 2.5 仍然比 Python 2.7 快一点。这部分是由于每个人的成熟程度。App Engine 使用不同的机制来支持它们中的每一个。Python 2.7 的优势在于它能够支持并行请求，而不是以 Python 2.5 处理负载峰值所需的速度启动新实例。

“它是如何在内部工作的”这个问题你可能不会在这里得到答案，但在过去一年的 Google I/O 上，有一些谈话暗示了我们做什么以及为什么。在 youtube.com 上搜索“应用引擎”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-08-23T21:46:24.830

我在这里添加一个答案，因为我们当前的实际结果与我们的预期相反。

在持续的性能下降之后，我们尝试将我们的（Python）应用程序切换回非线程安全模式，并且非常惊讶地看到我们的性能提高了大约 10 倍。所以我们把它关掉了。我们的 GAE 支持团队无法解释这是怎么回事。上次我们进行分析时，我们的 I/O 与数据存储非常相关，理论上应该仍然可以从多线程中获得很多提升。

所以根据我们的经验......不仅不要假设线程安全会更快，它可能会慢得多。如果有人知道这是怎么回事，请分享。

# javascript - 如何通过双击从 Kendo Grid 中获取行 ID

> ID：10977144
> 
> 赞同：2
> 
> 时间：2012-06-11T09:08:26.167
> 
> 标签：javascript, asp.net-mvc, kendo-ui, kendo-grid, telerik-grid

我目前正在测试 Kendo UI MVC Extensions Beta。我正在尝试实现双击 - 编辑，但我不知道如何获取 rowId。

JavaScript：

```
$('#GridPedidos table tr').live('dblclick', function () {
    alert(' grid dbl clicked');
}); 
```

看法：

```
@(Html.Kendo().Grid(Model) _
.Name("GridPedidos") _
    .Columns(Sub(column)
                 column.Bound(Function(item) item.idPedidoDocumentacao).Width("5%")
                 column.Bound(Function(item) item.descEstadoPedidoDoc).Width("25%")
                 column.Bound(Function(item) item.descTipoPedidoDoc).Width("25%")
                 column.Bound(Function(item) item.data).Width("25%").Format("{0:dd-MM-yyyy}")
                 column.Command(Function(item) item.Destroy()).Width("10%")
             End Sub) _
    .DataSource(Sub(ds)
                    ds.Ajax().ServerOperation(False).Read(Sub(s)
                                                              s.Action("GetListaGrid", "listaPedidos")
                                                          End Sub).Create(Sub(s)
                                                                              s.Action("detalhePedido", "Pedidos")
                                                                          End Sub).Model(Sub(m)
                                                                                             m.Id(Function(p) p.idPedidoDocumentacao)
                                                                                         End Sub).Destroy(Sub(d)
                                                                                                              d.Action("apagaPedido", "listaPedidos")
                                                                                                          End Sub)
                End Sub) _
    .Selectable()
) 
```

我可以使用此功能检测双击，但是如何获取 id？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-12T16:29:14.923

我已经使用客户端 api 和 MVC 扩展的等效项完成了这个示例。

创建一个网格 div，在运行时创建一个网格。

```
<div id="grid" style="width: 400px;"></div> 
```

创建了一个行模板，以便我可以给元素一个 id 标签。

```
<script id="rowTemplate" type="text/x-kendo-tmpl">
  <tr>
      <td id="EmployeeId">
        ${ EmployeeID }
      </td>
      <td>
        ${ FirstName }
      </td>
      <td>
        ${ LastName }
      </td>
  </tr>
</script> 
```

初始化网格并绑定数据。

```
<script>
  $(document).ready(function () {
      $("#grid").kendoGrid({
          columns: [
              "EmployeeID"
              ,{
                  field: "FirstName",
                  title: "First Name"
              },{
                  field: "LastName",
                  title: "Last Name"
              }
          ],
          dataSource: {
              data: [
                  {
                      EmployeeID: 0,
                      FirstName: "Joe",
                      LastName: "Smith"
                  }, {
                      EmployeeID: 1,
                      FirstName: "Jane",
                      LastName: "Smith"
                  }
              ],
              schema: {
                  model: {
                      id: "EmployeeID",
                      fields: {
                          EmployeeID: {type: "number" },
                          FirstName: { type: "string" },
                          LastName: { type: "string" }
                      }
                  }
              },
              pageSize: 10
          },
          scrollable: {
              virtual: true
          },
          sortable: true,
          pageable: true,
          rowTemplate: kendo.template($("#rowTemplate").html())
      });

      //Add a double click event that will return the text in the EmployeeId column.
      $('#grid table tr').dblclick(function () {
          alert($(this).find("td[id=EmployeeId]")[0].innerText);
      });
  });
</script> 
```

- 编辑 -

我还继续创建了一个 MVC 扩展示例，方法与模板路由相同。

型号类：

```
public class Employee
{
    public int EmployeeId { get; set; }
    public string Name { get; set; }
} 
```

查看代码：

```
<script type="text/javascript">
    function OnDataBound() {
        $('#OtherGrid table tr').dblclick(function () {
                alert($(this).find("span[id=EmployeeId]")[0].innerText);
        });
    }
</script>

@(Html.Kendo().Grid<Employee>()
     .Name("OtherGrid")
     .Columns(columns =>
     {
         columns.Bound(p => p.EmployeeId).ClientTemplate("<span id=\"EmployeeId\">#: EmployeeId #</span>");
         columns.Bound(p => p.Name);
     })
     .DataSource(dataSource => dataSource
         .Ajax() // Specify that the data source is of ajax type
         .Read(read => read.Action("GetEmployees", "Home")) // Specify the action method and controller name
     )
     .Events(e => e.DataBound("OnDataBound"))
) 
```

控制器：

```
public ActionResult GetEmployees([DataSourceRequest]DataSourceRequest request)
{
    List<Employee> list = new List<Employee>();
    Employee employee = new Employee() { EmployeeId = 1, Name = "John Smith" };
    list.Add(employee);
    employee = new Employee() { EmployeeId = 2, Name = "Ted Teller" };
    list.Add(employee);

    return Json(list.ToDataSourceResult(request));
} 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T07:49:17.683

我用这个js实现了我想要的

```
$('#GridPedidos table tr').live('dblclick', function () {
var grid = $("#GridPedidos").data("kendoGrid");
var dItem = grid.dataItem($(this));

if (dItem != null) {
    detalhePedido(dItem.id);
} 
```

});

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-30T21:16:57.007

要通过双击打开编辑模式，您需要使用网格注册双击事件，如下所示：

```
var grid = $("#grid").data("kendoGrid");
grid.element.delegate("tbody>tr", "dblclick", function () {
    grid.editRow($(this));
}); 
```

# java - 请求响应模式及其用法

> ID：10977145
> 
> 赞同：5
> 
> 时间：2012-06-11T09:08:26.437
> 
> 标签：java, web-services, soap, jax-ws

我正在阅读有关 Web 服务中的消息交换模式 (MEP) 的内容。
我遇到了一个名为`Solicit Response`.

我用谷歌搜索了它，但没有找到关于它及其用法的太多信息。
谁能给我有关此及其使用场景的详细信息。

提前致谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-11T09:27:23.340

请求/响应操作是服务端点发送消息并期望接收响应消息作为响应的操作。

![在此处输入图像描述](../Images/dbf98aab8d523b3522c006fc0edfc291.png)

*   这与请求/响应操作相反，因为服务端点正在启动操作（请求客户端），而不是响应请求。
*   请求/响应类似于通知消息传递，不同之处在于客户端应响应 Web 服务。
*   对于这种类型的消息，元素首先声明一个标签，然后是一个消息定义——与请求/响应操作完全相反。

此操作的一个示例可能是向客户端发送订单状态并接收回收据的服务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-03-04T09:32:35.533

**solicit-response**操作包括一个`output`元素，即服务器对客户端的请求，然后是一个元素`input`，即客户端对服务器的响应。

**图：请求-响应消息模式**
[![在此处输入图像描述](../Images/dd918cf31297519ad1b3ac8c15368c13.png)](https://i.stack.imgur.com/cfi5R.gif)

请求/响应的示例 WSDL 操作类型。该操作由一条`output`消息和一条`input`消息组成。

```
<operation name="weatherUpdateRenew">
  <output message="tns:RenewRequest"/>
  <input message="tns:RenewResponse"/>
</operation> 
```

[资源](http://docs.roguewave.com/hydraexpress/4.3.0/html/rwsfexpwsfabricationug/9-2.html)

# c# - GetlastInput 和 Tickcount

> ID：10977149
> 
> 赞同：2
> 
> 时间：2012-06-11T09:08:41.087
> 
> 标签：c#

我有一个控制台应用程序的以下代码片段，如果空闲时间超过 5 秒，我想锁定我的计算机。

问题：5 秒后根本没有任何反应

```
 public static uint GetIdleTime()
    {
        LASTINPUTINFO lastInPut = new LASTINPUTINFO();
        lastInPut.cbSize = (uint)System.Runtime.InteropServices.Marshal.SizeOf(lastInPut);
        GetLastInputInfo(ref lastInPut);

        return ((uint)Environment.TickCount - lastInPut.dwTime);
    }

    public static long GetTickCount()
    {
        return Environment.TickCount;
    }

    public static long GetLastInputTime()
    {
        LASTINPUTINFO lastInPut = new LASTINPUTINFO();
        lastInPut.cbSize = (uint)System.Runtime.InteropServices.Marshal.SizeOf(lastInPut);
        if (!GetLastInputInfo(ref lastInPut))
        {
            throw new Exception(GetLastError().ToString());
        }
        return lastInPut.dwTime;
    }

private static Timer timer;
    private static uint idle = 0;
    static void Main(string[] args)
    {
        timer = new Timer();
        timer.Enabled = true;
        timer.Interval = 1000;
        timer.Start();

        idle += GetIdleTime();            
        System.Threading.Thread.Sleep(6000);
        if (idle > 5000)
        {
            LockWorkStation();
        }
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T09:20:52.190

你的代码有一两处奇怪的地方。计时器没有做太多，您正在累积空闲时间，并且您在计算空闲时间 6 秒后测试空闲时间而不重新计算它。

试试这个：

```
 public static uint GetIdleTime()
    {
        LASTINPUTINFO lastInPut = new LASTINPUTINFO();
        lastInPut.cbSize = (uint)System.Runtime.InteropServices.Marshal.SizeOf(lastInPut);
        GetLastInputInfo(ref lastInPut);

        return ((uint)Environment.TickCount - lastInPut.dwTime);
    }

    public static long GetTickCount()
    {
        return Environment.TickCount;
    }

    [StructLayout(LayoutKind.Sequential)]
    struct LASTINPUTINFO
    {
        public static readonly int SizeOf = Marshal.SizeOf(typeof(LASTINPUTINFO));

        [MarshalAs(UnmanagedType.U4)]
        public UInt32 cbSize;
        [MarshalAs(UnmanagedType.U4)]
        public UInt32 dwTime;
    }

    [DllImport("user32.dll")]
    static extern bool GetLastInputInfo(ref LASTINPUTINFO plii);
    [DllImport("user32.dll", SetLastError = true)]
    static extern bool LockWorkStation();

    static int GetLastInputTime()
    {
        int idleTime = 0;
        LASTINPUTINFO lastInputInfo = new LASTINPUTINFO();
        lastInputInfo.cbSize = (uint)Marshal.SizeOf(lastInputInfo);
        lastInputInfo.dwTime = 0;

        int envTicks = Environment.TickCount;

        if (GetLastInputInfo(ref lastInputInfo))
        {
            int lastInputTick = (int)lastInputInfo.dwTime;

            idleTime = envTicks - lastInputTick;
        }

        return ((idleTime > 0) ? (idleTime / 1000) : 0);
    }

    private static uint idle = 0;
    static void Main(string[] args)
    {
        while (!Console.KeyAvailable)
        {
            System.Threading.Thread.Sleep(500);
            idle = GetIdleTime();
            Console.WriteLine(idle);
            if (idle > 5000)
            {
                LockWorkStation();
            }
        }
    } 
```

# android - 在警报对话框中显示进度条

> ID：10977150
> 
> 赞同：13
> 
> 时间：2012-06-11T09:08:44.557
> 
> 标签：android

我的应用程序中有一个用于登录身份验证的警报对话框。在发送请求时，我想显示一个进度条，如果响应成功则想关闭。如果有人知道，请帮助我。我使用以下代码：

```
final AlertDialog.Builder alert = new AlertDialog.Builder(this);
LinearLayout login = new LinearLayout(this);
TextView tvUserName = new TextView(this);
TextView tvPassword = new TextView(this);
TextView tvURL = new TextView(this);
final EditText etUserName = new EditText(this);
final EditText etPassword = new EditText(this);
final EditText etURL = new EditText(this);
login.setOrientation(1); // 1 is for vertical orientation
tvUserName.setText(getResources().getString(R.string.username));
tvPassword.setText(getResources().getString(R.string.password));
tvURL.setText("SiteURL");
login.addView(tvURL);
login.addView(etURL);
login.addView(tvUserName);
login.addView(etUserName);
login.addView(tvPassword);
etPassword.setInputType(InputType.TYPE_CLASS_TEXT
| InputType.TYPE_TEXT_VARIATION_PASSWORD);
login.addView(etPassword);
alert.setView(login);
alert.setTitle(getResources().getString(R.string.login));
alert.setCancelable(true);
alert.setPositiveButton(getResources().getString(R.string.login),
new DialogInterface.OnClickListener() {
    public void onClick(final DialogInterface dialog,
    int whichButton) {
        strhwdXml = etURL.getText().toString();
        strUserName = etUserName.getText().toString();
        XmlUtil.username = strUserName;
        strPassword = etPassword.getText().toString();
        if ((strUserName.length() == 0)
        && (strPassword.length() == 0)
        && (strhwdXml.length() == 0)) {
            Toast.makeText(
            getBaseContext(),
            getResources().getString(
            R.string.userPassword),
            Toast.LENGTH_SHORT).show();
            onStart();
            } else {
            final SharedPreferences prefs = PreferenceManager
            .getDefaultSharedPreferences(getApplicationContext());
            SharedPreferences.Editor prefsEditor = prefs
            .edit();
            try {
                StringBuffer inStreamBuf = new StringBuffer();
                inStreamBuf = XmlUtil
                .getLoginAuthResponse(strUserName,
                strPassword, strhwdXml);
                strXmlResponse = inStreamBuf.toString();
                Log.e("Response:", strXmlResponse);
                String parsedXML = ParseResponse(strXmlResponse);
                if (parsedXML
                .equalsIgnoreCase(getResources()
                .getString(R.string.success))) {
                } 
```

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-06-11T09:15:58.680

使用它可能更容易

```
ProgressDialog dialog = ProgressDialog.show(MyActivity.this, "", 
                        "Loading. Please wait...", true); 
```

[您可以在此处](http://developer.android.com/guide/topics/ui/dialogs.html#ProgressDialog)阅读有关进度对话框的更多信息

取消将是

```
 dialog.dismiss(); 
```

> 此类在 API 级别 26 中已弃用。ProgressDialog 是一个模式对话框，可防止用户与应用程序交互。您应该使用 ProgressBar 之类的进度指示器，而不是使用此类，它可以嵌入到应用程序的 UI 中。或者，您可以使用通知来通知用户任务的进度。有关详细信息，请[单击此处](https://developer.android.com/reference/android/app/ProgressDialog)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2019-08-26T07:31:04.400

由于`ProgressDialog`该类已被弃用，这里有一个简单的显示`ProgressBar`方式`AlertDialog`：

1.  在您的活动中添加字段：

    ```
    AlertDialog.Builder builder;
    AlertDialog progressDialog; 
    ```

2.  在 Activity 中添加 getDialogProgressBar() 方法：

    ```
    public AlertDialog.Builder getDialogProgressBar() {

      if (builder == null) {
        builder = new AlertDialog.Builder(this);

        builder.setTitle("Loading...");

        final ProgressBar progressBar = new ProgressBar(this);
        LinearLayout.LayoutParams lp = new LinearLayout.LayoutParams(
            LinearLayout.LayoutParams.WRAP_CONTENT,
            LinearLayout.LayoutParams.WRAP_CONTENT);
        progressBar.setLayoutParams(lp);
        builder.setView(progressBar);
      }
      return builder;
    } 
    ```

3.  初始化`progressDialog`：

    ```
    progressDialog = getDialogProgressBar().create(); 
    ```

4.  每当您想使用实用方法时显示/隐藏 AlertDialog：

    `progressDialog.show()`和`progressDialog.dismiss()`

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-12-05T16:20:15.430

如果您希望显示进度条，请尝试以下步骤，您也可以将整个代码复制并粘贴到代码的相关部分，它应该可以工作。

```
//the first thing you need to to is to initialize the progressDialog Class like this

final ProgressDialog progressBarDialog= new ProgressDialog(this);

//set the icon, title and progress style..

progressBarDialog.setIcon(R.drawable.ic_launcher);

progressBarDialog.setTitle("Showing progress...");

progressBarDialog.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);

    //setting the OK Button
    progressBarDialog.setButton(DialogInterface.BUTTON_POSITIVE, "OK", new DialogInterface.OnClickListener(){
        public void onClick(DialogInterface dialog,
                int whichButton){
            Toast.makeText(getBaseContext(),
                    "OK clicked!", Toast.LENGTH_SHORT).show();
        }
    });

    //set the Cancel button
    progressBarDialog.setButton(DialogInterface.BUTTON_NEGATIVE, "Cancel", new DialogInterface.OnClickListener(){
        public void onClick(DialogInterface dialog, int whichButton){
            Toast.makeText(getApplicationContext(), "Cancel clicked", Toast.LENGTH_SHORT).show();
        }
    });
//initialize the dialog..
progressBarDialog.setProgress(0);

//setup a thread for long running processes
new Thread(new Runnable(){
    public void run(){
        for (int i=0; i<=15; i++){
            try{
                Thread.sleep(1000);
                progressBarDialog.incrementProgressBy((int)(5));
            }
            catch(InterruptedException e){
                e.printStackTrace();
            }
        }
        //dismiss the dialog
        progressBarDialog.dismiss();
     }
   });

//show the dialog
progressBarDialog.show(); 
```

取消按钮应关闭对话框。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-11T10:33:07.927

试试下面的代码

```
 private class DownloadingProgressTask extends
        AsyncTask<String, Void, Boolean> {

    private ProgressDialog dialog = new ProgressDialog(ShowDescription.this);

    /** progress dialog to show user that the backup is processing. */

    /** application context. */

    protected void onPreExecute() {
         this.dialog.setMessage("Please wait");
         this.dialog.show();
    }

    protected Boolean doInBackground(final String... args) {
        try {
            // write your request code here

            **StringBuffer inStreamBuf = new StringBuffer();
            inStreamBuf = XmlUtil
            .getLoginAuthResponse(strUserName,
            strPassword, strhwdXml);
            strXmlResponse = inStreamBuf.toString();
            Log.e("Response:", strXmlResponse);
            String parsedXML = ParseResponse(strXmlResponse);
            if (parsedXML
            .equalsIgnoreCase(getResources()
            .getString(R.string.success))) {**

              return true;
        } catch (Exception e) {
            Log.e("tag", "error", e);
            return false;
        }
    }

    @Override
    protected void onPostExecute(final Boolean success) {

        if (dialog.isShowing()) {
            dialog.dismiss();
        }

        if (success) {
            Toast.makeText(ShowDescription.this,
                    "File successfully downloaded", Toast.LENGTH_LONG)
                    .show();
            imgDownload.setVisibility(8);
        } else {
            Toast.makeText(ShowDescription.this, "Error", Toast.LENGTH_LONG)
                    .show();
        }
    }

} 
```

并在 onclick 事件中调用它

```
new DownloadingProgressTask().execute(); 
```

# oracle - 无法使用 TOAD 连接到数据库？

> ID：10977159
> 
> 赞同：0
> 
> 时间：2012-06-11T09:09:26.720
> 
> 标签：oracle, oracle10g, toad

尝试使用 TOAD 连接时出现错误：

```
ora 12154 tns could not resolve the connect identifier specified(myDBname) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T09:16:30.257

您可能错误地命名了服务器...

如果您使用本地命名（TNSNAMES.ORA 文件）：确保“TNSNAMES”列为 Oracle Net 配置文件 (SQLNET.ORA) 中 NAMES.DIRECTORY_PATH 参数的值之一 验证 TNSNAMES.ORA 文件是否存在并且位于正确的目录中并且可以访问。检查用作连接标识符的网络服务名称是否存在于 TNSNAMES.ORA 文件中。确保 TNSNAMES.ORA 文件中的任何位置都没有语法错误。查找不匹配的括号或杂散字符。TNSNAMES.ORA 文件中的错误可能使其无法使用。

尝试在 tnsnames.ora 中使用 Oracle 服务器的 IP（而不是名称），并检查您是否有权限。你能ping通服务器吗？

# java - 如果我们定义自己的构造函数，那么java如何将实例变量初始化为其默认值

> ID：10977162
> 
> 赞同：5
> 
> 时间：2012-06-11T09:09:42.757
> 
> 标签：java, default-value, default-constructor

Java 使用默认构造函数为实例变量分配默认值。但是如果我们定义自己的构造函数，那么java如何给出默认值（因为当我们编写构造函数时，则不会添加默认构造函数）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-11T09:10:45.823

> ***Java 使用默认构造函数为实例变量分配默认值。***

不，不是。它在执行*任何*构造函数之前自动为所有成员分配默认值。

> ***但是如果我们定义自己的构造函数，那么java如何给出默认值（因为当我们编写构造函数时，则不会添加默认构造函数）。***

它仍然为所有成员分配默认值。

```
class Test {

    int i;
    Object ref;

    Test() {
        System.out.println(i);
        System.out.println(ref);
    }

    public static void main(String[] args) {
        new Test();
    }
} 
```

**输出：**

```
0
null 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T09:26:46.820

这是使用创建对象时发生的情况`new`；见[JLS 12.5](http://docs.oracle.com/javase/specs/jls/se7/html/jls-12.html#jls-12.5)

1.  对象的空间在堆上分配，对象的大小和类与对象相关联。

2.  对象的所有字段都设置为默认值；即`null`或引用类型，原始类型为零或假。

3.  `super`or参数（如果有的话）的参数表达式`this`被计算，构造函数链被递归调用。

4.  如果它们尚未被评估（通过`this`链接），则此类的任何实例字段初始化程序和任何初始化程序块都将按顺序进行评估/执行。

5.  执行构造函数主体的其余部分（如果有）以完成对象初始化。

无论是显式声明的构造函数还是默认构造函数，都使用相同的过程。默认构造函数只是调用的构造函数的简写`super()`。

所以 ....

> Java 使用默认构造函数为实例变量分配默认值。

实际上，在此之前分配了默认值，并且（确实）初始化程序等在执行（空）默认构造函数*之前*执行。

默认构造函数不负责进行默认初始化。所以它没有被调用的事实并不重要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T09:36:36.390

aioobe 的回答是对的。我只想说为什么/怎么会这样：

无论您是否拥有默认构造函数或自己的构造函数，java 编译器都会为每个构造**实例初始化“方法”****`<init>`** （称为 void ，带有构造函数的参数 - 如果您想查看反编译的字节码）。

每个`<init>`“方法”的结构是：

*   调用另一个构造函数
*   实例变量初始化器（您的实例变量初始化器，以及实例初始化器）
*   构造函数体。

更多细节可以在[JLS 和 JVMS](http://docs.oracle.com/javase/specs/)以及[这篇精彩的介绍](http://www.artima.com/designtechniques/initializationP.html)中找到。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-11T09:55:15.810

```
public class DefaultValue {

    private boolean BOOLEAN;

    private byte BYTE;

    private  short SHORT;

    private  int INT ;

    private  long LONG;

    private  float FLOAT;

    private  double DOUBLE;

    private  char CHAR;

    private  Object OBJECT;

    public DefaultValue() {
        System.out.println("I did nothing!");
    }

    public static void main(String args[]) {
        DefaultValue dv = new DefaultValue();
        System.out.println(dv.BOOLEAN);
        System.out.println(dv.BYTE);
        System.out.println(dv.SHORT);
        System.out.println(dv.INT);
        System.out.println(dv.LONG);
        System.out.println(dv.FLOAT);
        System.out.println(dv.DOUBLE);
        System.out.println(dv.CHAR);
        System.out.println(dv.OBJECT);
    }

}
```

我重写了默认构造函数。虽然我在构造函数中什么也没做，但变量是分配的。

# php - 在 MySQL 数据库 (PHP) 中获取一天中的下一个日期

> ID：10977163
> 
> 赞同：0
> 
> 时间：2012-06-11T09:09:44.197
> 
> 标签：php, mysql, date, time

我在数据库中有一系列每周事件以及它们发生的日期（完整形式，例如：“星期一”、“星期二”等）。我已经成功地将事件打印在`while`按今天、明天等排序的循环中，但我想将日期放在每个事件旁边的括号中。

我认为这可能是（模拟代码）的情况：

```
$today = date("l");
$todays_date = date("j M");

if (day == $today) {
    $date = $todays_date;
    }

else if (day == $today + 1) {
    $date = $todays_date + 1;
    }

else if (day == $today + 2) {
    $date = $todays_date + 2;
    }

etc... 
```

但我不太确定。如果我可以只在数据库中保存日期，那将是理想的，但这似乎与 MySQL 的宗旨背道而驰。

另外，我想理想地将日期格式化为：6 月 11 日。

**编辑**

大概它也必须以某种方式适应我的`while`循环：

```
if($result && mysql_num_rows($result) > 0) { 
    while ($row = mysql_fetch_array($result)) { 
        $items[] = array($row[0]);
        echo "<option>" . $row[0] . "</option>";
        }         
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T09:11:43.003

你可以使用[strtotime](http://php.net/strtotime)吗？

```
echo "Today: ".date("j M");
echo "Tomorrow: ".date("j M", strotime("+1 day")); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T09:12:02.813

您可以使用[`strtotime`](http://php.net/strtotime)：

```
echo strtotime("+1 day"); 
```

# ios - 如何从 AVCaptureVideoPreviewLayer 中获取 UIImage？

> ID：10977168
> 
> 赞同：4
> 
> 时间：2012-06-11T09:09:58.803
> 
> 标签：ios, uiimage, avfoundation, opengl-es-2.0, calayer

我已经[从 CALayer 尝试过这个解决方案 CGImage（或 UIImage）](https://stackoverflow.com/questions/3816527/cgimage-or-uiimage-from-a-calayer)

但是我什么也没得到。

就像问题说的那样，我正在尝试从相机的预览层获取 UIImage 。我知道我可以捕获静止图像或使用 outputsamplebuffer，但我的会话质量视频设置为照片，因此这两种方法中的任何一种都很慢并且会给我一个大图像。

所以我认为可以直接从预览层获取图像，因为这正是我需要的大小并且已经对其进行了操作。我只是不知道如何让这个图层绘制到我的上下文中，以便我可以将它作为 UIImage 获取。

也许另一种解决方案是使用 OpenGL 将这一层直接作为纹理？

任何帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-03-06T09:17:27.863

[从这个技术问答](https://developer.apple.com/library/ios/qa/qa1817/_index.html#//apple_ref/doc/uid/DTS40014134)中引用苹果：

> 答：从 iOS 7 开始，UIView 类提供了一个方法 -drawViewHierarchyInRect:afterScreenUpdates:，它允许您将整个视图层次结构的快照呈现为在屏幕上可见到位图上下文中。在 iOS 6 及更早版本中，如何捕获视图的绘图内容取决于底层的绘图技术。这个新方法 -drawViewHierarchyInRect:afterScreenUpdates: 使您能够将接收者视图及其子视图的内容捕获到图像中，而不管视图使用何种绘图技术（例如 UIKit、Quartz、OpenGL ES、SpriteKit、AV Foundation 等）被渲染

根据我关于 AVFoundation 的经验，如果您在托管预览层的视图上使用该方法，您将只能获得视图的内容而没有预览层的图像。使用 `-snapshotViewAfterScreenUpdates:`将返回一个承载特殊层的 UIView。如果您尝试从该视图制作图像，您将什么也看不到。
我知道的唯一解决方案是`AVCaptureVideoDataOutput`and `AVCaptureStillImageOutput`。每个人都有自己的限制。第一个不能与`AVCaptureMovieFileOutput`采集同时工作，后者会产生快门噪音。

# ruby-on-rails - 如何使用 HAML 生成 simple_form 视图？

> ID：10977171
> 
> 赞同：3
> 
> 时间：2012-06-11T09:10:12.173
> 
> 标签：ruby-on-rails, twitter-bootstrap, haml, simple-form

我正在学习 HAML 并使用 twitter bootstrap 和 simple_form。例如，当我运行此代码时

```
rails g scaffold product name --no-stylesheets
rake db:migrate
rails g bootstrap:themed products -f 
```

它产生很少的 erb 视图。

有没有办法使用 simple_form 生成器生成 haml-views 而不是 erb？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-11T09:25:08.227

包含在您的 gemfile 中 `gem "haml-rails"` ，它将默认视图格式设置为 haml

# ant - 使用 ANT 替换 xml 中的值

> ID：10977175
> 
> 赞同：0
> 
> 时间：2012-06-11T09:10:15.090
> 
> 标签：ant, xml-parsing

我想替换以下 xml 的 <DefineConstants> 节点处的 ProductVersion 值。必须保留该行的剩余部分。例子：

```
<DefineConstants>XXXXX;ProductVersion=20.323.23;YYYYY</DefineConstants> 
```

到

```
<DefineConstants>XXXXX;ProductVersion=21.58.44;YYYYY</DefineConstants> 
```

我试过了，`replaceregexp`但它改变了剩余的内容。

```
<replaceregexp file="${basedir}\Installer.wixproj"
     match="ProductVersion=([0-9].*);(.*)"
     replace="ProductVersion=${SpaceVersion};\1"
     byline="true"
/> 
```

你能指导我在这方面做错了什么吗？

XML:

```
<?xml version="1.0" encoding="utf-8"?>
<Project ToolsVersion="4.0" DefaultTargets="Build" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
   <PropertyGroup>
      <Configuration Condition=" '$(Configuration)' == '' ">Debug</Configuration>
      <Platform Condition=" '$(Platform)' == '' ">x86</Platform>
      <ProductVersion>3.5</ProductVersion>
      <ProjectGuid>{6bc0a85b-9c15-41e6-874b-5fe07e5338e6}</ProjectGuid>
      <SchemaVersion>2.0</SchemaVersion>
      <OutputName>Installer</OutputName>
      <OutputType>Package</OutputType>
      <WixTargetsPath Condition=" '$(WixTargetsPath)' == '' AND '$(MSBuildExtensionsPath32)' != '' ">$(MSBuildExtensionsPath32)\Microsoft\WiX\v3.x\Wix.targets</WixTargetsPath>
      <WixTargetsPath Condition=" '$(WixTargetsPath)' == '' ">$(MSBuildExtensionsPath)\Microsoft\WiX\v3.x\Wix.targets</WixTargetsPath>
   </PropertyGroup>
   <PropertyGroup Condition=" '$(Configuration)|$(Platform)' == 'Debug|x86' ">
      <OutputPath>bin\$(Configuration)\</OutputPath>
      <IntermediateOutputPath>obj\$(Configuration)\</IntermediateOutputPath>
      <DefineConstants>Debug;</DefineConstants>
      <WixVariables>
      </WixVariables>
   </PropertyGroup>
   <PropertyGroup Condition=" '$(Configuration)|$(Platform)' == 'Release|x86' ">
      <OutputPath>bin\$(Configuration)\</OutputPath>
      <IntermediateOutputPath>obj\$(Configuration)\</IntermediateOutputPath>
      <DefineConstants>SourceDir=$(SolutionDir)XSSE\;ProductVersion=3.3.1.75;ProductName=XSSE;ToolchinShortcut=XSSEToolchinShortcut;ExtensionDir=XSSE;ManifestFileName=extension.vsixmanifest;PkageDefFileName=XSSE.ToolchainProvider.pkgdef;REGKEY=Software\Microsoft\XSSE;</DefineConstants>
      <WixVariables>XYZ=123;</WixVariables>
   </PropertyGroup>
   <ItemGroup>
      <Compile Include="filefragment.wxs" />
      <Compile Include="Product.wxs" />
   </ItemGroup>
   <ItemGroup>
      <WixExtension Include="WixUIExtension">
         <HintPath>$(WixExtDir)\WixUIExtension.dll</HintPath>
         <Name>WixUIExtension</Name>
      </WixExtension>
   </ItemGroup>
   <Import Project="$(WixTargetsPath)" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T09:32:30.483

我认为没有必要在产品版本之后尝试捕获该行的其余部分。

你不必担心这一点。如果您的正则表达式单独留下其余文本，您可以只替换 ProductVersion。

我在这方面取得了成功：

```
<replaceregexp file="${basedir}\Installer.wixproj"
    match="ProductVersion=[0-9]+\.?[0-9]+\.?[0-9]+\.?[0-9]+\.?;"
    replace="ProductVersion=${SpaceVersion};"
    byline="true"
    /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T09:30:31.307

您需要使用`\2`而不是`\1`.

```
<replaceregexp file="${basedir}\Installer.wixproj"
       match="ProductVersion=([0-9].*);(.*)"
       replace="ProductVersion=${SpaceVersion};\2"
       byline="true"
        /> 
```

独立测试：

```
<project default="test">

    <property name="SpaceVersion" value="a.b.c"/>

    <target name="test">
      <replaceregexp file="test.xml"
         match="ProductVersion=([0-9].*);(.*)"
         replace="ProductVersion=${SpaceVersion};\2"
         byline="true"
       />
    </target>
</project> 
```

更改文件与原始文件的比较：

```
$diff test.xml test.xml.0
2c2
<     <DefineConstants>XXXXX;ProductVersion=a.b.c;YYYYY</DefineConstants>
---
>     <DefineConstants>XXXXX;ProductVersion=20.323.23;YYYYY</DefineConstants> 
```

# jquery - NodeJS + jQuery：POST 后重定向：客户端或服务器 - 哪个更好？

> ID：10977176
> 
> 赞同：0
> 
> 时间：2012-06-11T09:10:16.837
> 
> 标签：jquery, node.js, redirect, post

我试图通过 jQuery 发布后重定向到指定页面。这是我的邮政编码：

```
$.post("/addcompany", {
name: $('#company_name').val(),
phone: $('#company_phone').val(),
email: $('#company_email').val(),
suppliers: JSON.stringify(suppliers),
}, function(){
    alert('after post'); 
    window.location.href = '/companies';
    }
); 
```

这是我在 NodeJS 上的后端代码：

```
app.post('/addcompany',function(req,res){
db.collection("companies",function(err,collection){
    collection.insert( {
        "name":req.body.name,
        "email":req.body.email,
        "phone":req.body.phone,
        "suppliers" : JSON.parse(req.body.suppliers)
    });
});
res.redirect('/companies');
}); 
```

问题是，如果我在 jQuery 脚本和 NodeJS 后端代码中都没有重定向到“/companies”，我的重定向将不起作用。我应该在哪里放置重定向代码？这是否正常，我必须将它放置两次 - 在服务器和客户端上？谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-11T09:48:10.293

在这种情况下，您应该只在前端重定向。为了正确实现这一点，我认为您应该`res.send()`在后端拥有（空的 200 响应，让客户端知道服务器端一切正常）。

如果你想在服务器端重定向而不是你不应该使用 Ajax，只需简单的旧 post 请求。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-11T11:14:11.727

发送重定向代码以响应 AJAX 请求不会自动使浏览器执行任何操作；您的客户端响应处理程序必须查看结果代码并在看到结果代码时自行进行重定向。我实际上建议这样做，而不是`window.location.href`在客户端代码中自动更改为固定 URL，这仅仅是因为您的服务器端代码最终可能需要在错误条件下做出不同的响应（对于客户端代码来说，这不是一个好主意）假设对服务器的请求一切正常）。

# facebook-graph-api - 关于 Facebook Graph api 的一些问题

> ID：10977178
> 
> 赞同：1
> 
> 时间：2012-06-11T09:10:22.813
> 
> 标签：facebook-graph-api, search

我一直在对 facebook graph api 进行广泛的研究，但仍有几个我不清楚的问题。

1.  我在 FACEBOOK API 中搜索了这个问题，但没有找到关于在哪里可以找到“Facebook 限制”的好信息（例如，每天发送消息、搜索、创建活动、邀请）？

2.很抱歉在论坛上再次提出这个问题，但我真的很想知道是否有新的方法可以解决我的问题。关于通过graph api而不是使用发送对话框向朋友发送私人消息？

1.  有没有办法将发送对话框中的“收件人，消息”字段填充为默认值？

2.  可以通过api邀请朋友参加活动吗？

3.  我如何在没有得到朋友特别许可的情况下阅读朋友墙上的帖子/评论？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T09:15:02.597

> 我在 FACEBOOK API 中搜索了这个问题，但没有找到关于在哪里可以找到“Facebook 限制”的好信息（例如，每天发送消息、搜索、创建活动、邀请）？

真的没有——除了我还没有看到用于搜索用户提要的已知 API。

> 2.很抱歉在论坛上再次提出这个问题，但我真的很想知道是否有新的方法可以解决我的问题。关于通过graph api而不是使用发送对话框向朋友发送私人消息？
> 
> 有没有办法将发送对话框中的“收件人，消息”字段填充为默认值？
> 
> 可以通过api邀请朋友参加活动吗？

一切皆有可能——在任何客户端上，如果你有一个 oauth 令牌，你总是可以向用户发送消息，而不会冒泡 To, Message 对话框。或者，如果您在服务器上有它们，您的客户端可以要求服务器以非交互方式发布这些消息！

在尝试阅读提要之前，您需要某些授权权限。Facebook 确实记录了您拥有的默认应用程序权限。

> 我如何在没有得到朋友特别许可的情况下阅读朋友墙上的帖子/评论？

# xcode - 在 xcode 4 中重命名工作区

> ID：10977179
> 
> 赞同：1
> 
> 时间：2012-06-11T09:10:23.833
> 
> 标签：xcode

有人知道如何在 Xcode 4 中重命名工作区（不是工作区中的项目）吗？它可能很简单，但找不到它......

提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-11T09:16:05.733

找到它...只需重命名文件系统中的文件...

# wcf - WCF Restful服务解析json中的枚举导致错误

> ID：10977180
> 
> 赞同：0
> 
> 时间：2012-06-11T09:10:27.950
> 
> 标签：wcf, wcf-rest

我有一个基于 WCF 的宁静服务，如下所示：（FeedbackInfo 类只有一个`enum`成员 - ServiceCode。）

```
[OperationContract]
[WebInvoke(Method = "GET", BodyStyle = WebMessageBodyStyle.WrappedRequest, RequestFormat = WebMessageFormat.Json, ResponseFormat = WebMessageFormat.Json)]
public List<FeedbackInfo> GetFeedbackInfoList(ServiceCode code)
{
    return ALLDAO.GetFeedbackInfoList(code);
}

[OperationContract]
[WebInvoke(Method = "POST", BodyStyle = WebMessageBodyStyle.WrappedRequest, RequestFormat = WebMessageFormat.Json, ResponseFormat = WebMessageFormat.Json)]
public int? CreateFeedback(FeedbackInfo feedback)
{
    return ALLDAO.CreateFeedback(feedback);
} 
```

我将使用 jquery ajax 来调用这两个方法，如下所示：

```
$.ajax({
    type: "GET",
    url: "/Service/ALL.svc/GetFeedbackInfoList",
    datatype: "text/json",
    data: { "code": "Info"},
});

var feedbackInfo = { feedback: {
    ServiceCode: "Info"
}};
$.ajax({
    type: "POST",
    contentType: "application/json; charset=utf-8",
    url: "/Service/ALL.svc/CreateFeedback",
    datatype: "text/json",
    data: JSON.stringify(feedbackInfo),
}); 
```

第一次调用将成功执行，而第二次调用给我一个错误：值“Info”无法解析为“Int64”类型。我想知道为什么在第二次调用中不能解析同一个枚举？仅仅因为枚举类型被用作类的成员？

**编辑：** FeedbackInfo 和 ServiceCode 如下所示：

```
public class FeedbackInfo
{
    public int ID { get; set; }
    public string Title { get; set; }
    public ServiceCode ServiceCode { get; set; }
}
[DataContract]
public enum ServiceCode
{
    [EnumMember]
    Info,
    [EnumMember]
    Error
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-07-12T10:43:22.760

我已经组合了一个使用该`Newtonsoft.Json`库的更好的解决方案。它修复了枚举问题，也使错误处理变得更好。这是相当多的代码，所以你可以在 GitHub 上找到它：[https ://github.com/jongrant/wcfjsonserializer/blob/master/NewtonsoftJsonFormatter.cs](https://github.com/jongrant/wcfjsonserializer/blob/master/NewtonsoftJsonFormatter.cs)

您必须添加一些条目才能`Web.config`使其正常工作，您可以在此处查看示例文件： [https ://github.com/jongrant/wcfjsonserializer/blob/master/Web.config](https://github.com/jongrant/wcfjsonserializer/blob/master/Web.config)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T09:15:03.763

枚举被序列化为整数，因此您需要使用 ServiceCode: 1 （或其他），或者，在*FeedbackInfo*类中添加自定义属性以从给定的字符串值反序列化枚举。即，像这样：

```
public string ServiceCode { 
    get {
        return ServiceCodeEnum.ToString();
    }
    set {
        MyEnum enumVal;
        if (Enum.TryParse<MyEnum>(value, out enumVal))
            ServiceCodeEnum = enumVal;
        else
            ServiceCodeEnum = default(MyEnum);
    }
}

private MyEnum ServiceCodeEnum { get; set; } 
```

# visual-studio-2010 - 在 Visual Studio 中显示/隐藏特定监视器

> ID：10977181
> 
> 赞同：0
> 
> 时间：2012-06-11T09:10:39.087
> 
> 标签：visual-studio-2010, multiple-monitors

是否可以快速隐藏 Visual Studio 中特定监视器上的内容？与您可以轻松隐藏左侧或右侧面板的 Norton Commander 类似，我想快速隐藏其中一台显示器上的所有面板以查看它们的后面。有可能吗，也许有插件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T12:21:04.730

是的你可以。为此，您需要**Visual Studio Professional**和**Productivity Power Tools**扩展。（您可以使用 VS2010 Extension Manager 安装它）

PPT 允许**浮动选项卡井**：您可以将浮动文档窗口停靠在单独的监视器上，就像工具窗口一样。现在还有一个选项允许您默认打开文档为浮动。

每个选项卡组都有一个最小化按钮。您可以在不最小化选项卡浮动面板的情况下最小化主窗口，反之亦然。

就我而言，我的主窗口在左侧，浮动选项卡在右侧。如果我想在我的右显示器后面看到，我只需最小化选项卡组。这样我就可以在主窗口中看到代码以及右侧选项卡后面的任何内容。

更多信息：http: [//blogs.msdn.com/b/visualstudio/archive/2010/06/10/document-well-2010-plus.aspx](http://blogs.msdn.com/b/visualstudio/archive/2010/06/10/document-well-2010-plus.aspx)

希望这可以帮助。

# c# - 从 Java 调用 C# dll

> ID：10977200
> 
> 赞同：5
> 
> 时间：2012-06-11T09:11:40.100
> 
> 标签：c#, java, dll, java-native-interface

我是一名 Java 开发人员。但是，出于某种原因，我必须借助 C# 来完成我的任务。我在下面提到了用于创建 DLL 的 C# 代码。必须在我的 Java 程序中使用该 DLL 才能完成必要的工作。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using Microsoft.Office.Interop.Word;

namespace Yrl.Tracingtool
{
public class DocxUtil
{
    public Application Jump(string fileName)
    {

        object fileNameAsObject = (object)fileName;
        Application wordApplication;
        try
        {
            wordApplication = new Application();
            object readnly = false;
            object missing = System.Reflection.Missing.Value;
            wordApplication.Documents.Open(ref fileNameAsObject, ref missing, ref readnly, ref missing,
                                            ref missing, ref missing, ref missing, ref missing,
                                            ref missing, ref missing, ref missing, ref missing,
                                            ref missing, ref missing, ref missing, ref missing);
            object what = Microsoft.Office.Interop.Word.WdGoToItem.wdGoToPage;
            object which = Microsoft.Office.Interop.Word.WdGoToDirection.wdGoToFirst;
            object count = 3;

            wordApplication.Selection.GoTo(ref what, ref which, ref count, ref missing);

            return wordApplication;
        }
        catch (Exception ex)
        {
            //LogEntry log = new LogEntry();
            //log.Categories.Add("Trace");
            //log.Message = ex.ToString();
            //Logger.Write(log, "Trace");
            throw new System.IO.FileLoadException("File cannot be opened");
        }
        finally
        {
            wordApplication = null;
        }
    }
}
} 
```

我也查看过这个论坛和其他论坛，但大多数都在谈论在 JNI 调用中使用 C++ 或 C DLL 文件。如果有人知道从 Java 调用 C# DLL，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T09:23:08.080

我们使用[ICE](http://www.zeroc.com/index.html)在 .NET 和 Java 应用程序之间进行通信。这不完全是您所需要的，但可能会有所帮助。

另外我建议使用谷歌搜索*“.NET Java 桥”* - 有几个框架（jni4net、JNBridge 等）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T09:18:39.197

您可能必须使用 JNI。

*JNI 是 Java Native Interface 的缩写。使用 JNI，我们可以从 Java 调用用其他语言编写的函数*

看看下面

[http://www.codeproject.com/Articles/2876/JNI-Basics-1](http://www.codeproject.com/Articles/2876/JNI-Basics-1)

# c# - Microsoft Surface 2 中 ElementMenu 的不同行为

> ID：10977204
> 
> 赞同：0
> 
> 时间：2012-06-11T09:11:49.663
> 
> 标签：c#, wpf, visual-studio-2010, menu, pixelsense

我正在按照本[教程](http://codepronet.blogspot.fr/2009/05/elementmenu-in-microsoft-surface.html)在 Microsoft Surface 2 上创建一个 ElementMenu。

本教程是为 Microsoft Surface 1 制作的，结果显示了这个 scrrenshot

![在此处输入图像描述](../Images/6ed5d28e45e15e0d28effde0f8d0314b.png)

我在 Microsoft Surface 2 中做了同样的事情，我得到了这个结果：

![在此处输入图像描述](../Images/7bdd1a8d60b0610c13d5b1f81ebcbef9.png)

这是 Microsoft Surface 2 上 ElementMenu 的正常行为吗？

我是否需要做其他事情才能获得相同的结果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T09:49:46.260

这似乎是正常行为，显然不能通过使用样式或控件模板来更改。该问题已[在 Microsoft Social 上](http://social.msdn.microsoft.com/Forums/en/surfaceappdevelopment/thread/de4219f9-f761-4ebe-b63b-94f5e955daf0)进行了讨论。

# javascript - jQuery/JavaScript：新附加行的 id

> ID：10977207
> 
> 赞同：1
> 
> 时间：2012-06-11T09:11:58.340
> 
> 标签：javascript, jquery, forms, html-table

我的网页中有一个 html 表格。它充满了我数据库中的信息。

它有这样的结构：

```
Id- Title –Author
1 – Africa – John Smith
2- Europe- Martin Coole 
```

该表位于表单内，并有一个“添加更多”按钮。

当您点击该按钮时，会显示一个模式窗口，您可以使用以下方法将另一个标题作者行附加到表中：

```
//inside of the addRow function
    $('#myTable').append(“&lt;tr><td>..”); 
```

该表还为每一行提供了一个编辑和删除按钮。onclick 有：

```
//For the edit button
 editRow(id, value1, value2);
//For the delete button
 deleteRow(id); 
```

我的问题来了，ids。

来自数据库的信息有一个固定的 id（1 和 2），但我应该如何处理附加了“添加更多”按钮的行的 id？

到目前为止，我所做的是从数据库行中获取最后一个 id 并将其放入表中的隐藏字段中，然后放入我的 js 文件中：

```
var lastID = $('#lastID').val();
var i = 1;
var newId = parseInt (lastID)+i; 
```

newId 为 3，如果添加了一行，则有效，但如果通过“添加更多”按钮添加第二行，我在 newId 中再次添加了 3 :((

我怎样才能解决这个问题？如何将连续的 id 添加到新附加的行中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T09:16:26.743

在你的函数中`editRow`写：

```
var lastID = $('#lastID').val();

// Do your insertion stuff
// ...

// After insertion, raise lastID by 1
$('#lastID').val(++lastID); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T09:16:27.853

保留页面上最后插入的 id 是个坏主意；这是一种竞争条件。有一些方法可以应用：

## 立即提交

在内部`addRow()`您直接与服务器通信并添加它；服务器插入记录后，它将返回 id，您可以将其插入表中。

**优点**

*   用户可以关闭浏览器，添加的行仍将被保存。

**缺点**

*   如果要添加多条记录，服务器通信可能会减慢数据输入速度。
*   特此每次编辑/删除都需要进行服务器往返。

## 延迟提交

您可以简单地标记新记录，以便在迭代它们以构建 AJAX 请求时，可以将两个单独的列表发送到服务器；一个包含现有的（减去已删除的）和一个仅包含新的。

然后服务器将处理其余的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T09:17:01.503

在追加新行期间，将 lastId 变量增加 1。

一个可能更好的解决方案是通过检查表中的所有行并更新变量来重新计算最后一个 Id。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-11T09:22:03.280

如果，正如您在评论中所说，您将整个页面一起提交，类似于“保存所有内容”的操作，那么新添加的行不应该**有**ID。不要陷入试图将最后一个已知的 Id 增加 1 的陷阱，因为 2 个并发用户最终会覆盖彼此的记录。

对于新行，删除按钮很明显，它只是将新添加的行从表中删除。对于更新，只需更新该行中的数据。这些新行可以被赋予一个 id ，`0`这样当您提交页面时，您就知道哪些是新的 (Id=0) 哪些是更新的 (Id>0)。

# java - 将新文件添加到目录时更新 JTabbedPane

> ID：10977214
> 
> 赞同：0
> 
> 时间：2012-06-11T09:12:42.343
> 
> 标签：java, swing, jtabbedpane, java-5, changelistener

我的情况如下：带有几个选项卡的 GUI。每个选项卡都显示我的主目录中特定目录中的文件内容。其中一些目录在创建 GUI 时存在，而另一些则不存在。在通过 FTP 的选项卡之一中，我得到一些文件并将其添加到主目录。

注意：我使用的是 java 5。

如何让每个选项卡都知道 FTP 已将新文件添加到属于该选项卡的目录中？

```
public class ScannerPanel extends JPanel implements ChangeListener {

    private void initGUI()      {
        setPreferredSize(new Dimension(700, 400));
        JTabbedPane tabbedPane  = new JTabbedPane();

        tabbedPane.addTab("FTP", IconLib.ICON_16X16_DATA,new FtpTabPanel (this),"FTP");
        tabbedPane.addTab("PCS", IconLib.ICON_16X16_THUM,new PcsTabPanel (this),"PCS");
        tabbedPane.addTab("Car", IconLib.ICON_16X16_PAPE,new CarTabPanel (this),"Car");
        tabbedPane.addTab("Pic", IconLib.ICON_16X16_RETI,new PicTabPanel (this),"Pic");

        tabbedPane.addChangeListener(this);
        add(tabbedPane);
    }

    public void stateChanged(ChangeEvent e) {
           //detect new file has been added to directory
          // update the content of tab
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T09:26:10.827

看看['Watching a directory'](http://docs.oracle.com/javase/tutorial/essential/io/notification.html)教程，其中包含很多有用的信息并建议使用`WatchService`. 对于文件系统监视服务，可以使用[`FileSystem#newWatchService`](http://docs.oracle.com/javase/7/docs/api/java/nio/file/FileSystem.html#newWatchService%28%29)方法

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T13:53:39.243

您可以尝试[http://jpathwatch.wordpress.com/](http://jpathwatch.wordpress.com/)这个应该适用于 Java 5。

> jpatchwatch 是一个用于监视目录更改的 Java 库。它使用主机平台的本机操作系统功能来实现这一点，以避免轮询。

或者您当然可以编写自己的轮询：使用 Thread.sleep 等待，读取目录，将结果与之前的列表进行比较……但是如果轮询间隔非常短，这可能会导致 I/O 密集。另请参阅：[Java 6 的 WatchService](https://stackoverflow.com/questions/7968488/watchservice-for-java-6)

# grails - 如何在 sts 中添加 grails-support 扩展？

> ID：10977217
> 
> 赞同：0
> 
> 时间：2012-06-11T09:12:51.647
> 
> 标签：grails, sts-springsourcetoolsuite

使用了springsource工具套装（STS）。用于开发 grails poject.i 的 IDE 按照 springsource.com 的说明添加 grails 支持扩展。它没有安装。我有一条消息不与存储库通信，然后另一次我收到超时消息。如何添加 grails 支持？

[http://grails.org/STS+Integration](http://grails.org/STS+Integration)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T16:37:02.413

你在防火墙后面。您必须通过 Preferences -> General -> Network Connections 专门设置您的连接属性。

# java - 在 JNA 回调函数中处理 va_list 参数

> ID：10977219
> 
> 赞同：2
> 
> 时间：2012-06-11T09:12:58.663
> 
> 标签：java, callback, jna, variadic-functions, libgphoto2

从本机库接收到的 va_list 参数，如何使用 Java 处理它？

我正在使用一个有助于通过回调函数进行日志记录的 C 库。该库是[libghoto2](http://gphoto.org/proj/libgphoto2/)，我正在使用 JNA 包装器[libgphoto2-java](http://code.google.com/p/gphoto2-java/)来访问其功能。有关应如何进行日志记录的示例，请参[见此 C 文件](http://fossies.org/unix/privat/libgphoto2-2.4.14.tar.gz%3aa/libgphoto2-2.4.14/examples/preview.c)`errordumper`中的方法。

我已经设法使用库的[`gp_log_add_func`](http://gphoto.org/doc/api/gphoto2-port-log_8h.html#93c15da75612eccac26bf835e5ee75ca). 唯一的问题是，回调函数的签名包含一个`va_list`我不知道如何处理的参数。

正如[前面的 C 示例](http://fossies.org/unix/privat/libgphoto2-2.4.14.tar.gz%3aa/libgphoto2-2.4.14/examples/preview.c)所示，`va_list args`直接传递到`vfprintf`. 阅读[`vfprintf`手册](http://www.thinkage.ca/english/gcos/expl/c/lib/vfprin.html)会很清楚，它是某种可迭代的数据结构，已经“用`va_start`宏初始化”并且在迭代之后需要使用`va_arg`清理`va_end`。但是我发现防止 JVM 崩溃的唯一方法是使`args`参数类型为`com.sun.jna.Pointer`while a `String[]`or`Object[]`更合适。

**如何从此 va_list 中获取数据？**

注意为了访问[gp_log_add_func](http://gphoto.org/doc/api/gphoto2-port-log_8h.html#93c15da75612eccac26bf835e5ee75ca)，我添加了一些 Java 代码：

org.gphoto2.jna.GPhoto2Native 的*补充*：

```
int gp_log_add_func(int logLevel, LogFunc func, Pointer data); 
```

创建*org.gphoto2.jna.LogFunc*：

```
public interface LogFunc extends Callback {
    public static final int GP_LOG_ERROR = 0;
    public static final int GP_LOG_VERBOSE = 1;
    public static final int GP_LOG_DEBUG = 2;
    public static final int GP_LOG_DATA = 3;
    public static final int GP_LOG_ALL = GP_LOG_DATA;

    //the args argument is a va_list 
    public void log(int logLevel, String domain, String format, Pointer args, Pointer data);
} 
```

*org.gphoto2.jna.LogFunc*的实现和使用：

```
LogFunc callback = new LogFunc() {
        public void log(int logLevel, String domain, String format, Pointer args, Pointer data) {
            System.out.println("[" + domain + "] " + format);
            System.out.println(args.toString());
        }
};
GPhoto2Native.INSTANCE.gp_log_add_func(LogFunc.GP_LOG_ALL, callback, null); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T22:41:53.710

这是一个示例 varargs 实现，其中包含一些关于 varargs 宏正在做什么的提示：

```
int printf(const char* fmt, ...) {
  va_list argp;

  va_start(argp, fmt); // usually something like: argp = (char *)&fmt - sizeof(void *);

  int arg1 = va_arg(argp, int); // *(int *)argp; argp += sizeof(int);
  void *arg2 = va_arg(argp, void*); // *(void **)argp; argp += sizeof(void *);
  float arg3 = va_arg(argp, float); // *(float *)argp; argp += sizeof(float);

  va_end(argp); // no-op

} 
```

所以它基本上是一堆使用堆栈指针的指针算术。带有 JNA 的有问题的部分是您无法访问堆栈指针，并且您可能需要在本机级别扩展 JNA 的回调机制以专门处理可变参数回调以提供堆栈指针。

即使这样也可能存在问题。正如您从上面的示例中看到的那样，您实际上需要可变参数函数签名的最后一个命名参数的地址才能访问可变参数。一般来说，这将是非常棘手的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-03-21T22:39:55.230

也许它可能与这里的作者无关，但对于像我一样遇到这个问题的任何新人来说可能会有用。大多数这些问题都与日志记录回调有关，在这种情况下，使用 C 和另一个 JNA 调用对我们有利可能很容易。

例如，如果需要提供一个具有 C 签名的回调函数，`log_write(const char* format, va_list args);`则可以有一个 JNA 回调，该回调将再次调用 C 的 vsprintf 以构造最终字符串。

```
public interface CLib extends Library {
  CLib INSTANCE = (CLib) Native.loadLibrary((Platform.isWindows() ? "msvcrt" : "c"), CLib.class);
  int vsprintf(byte[] buffer, String format, Pointer va_list);
} // interface CLib

public static String format(final String format, final Pointer va_args) {
  CLib jnaLib = CLib.INSTANCE;
  byte[] buffer = new byte[2048];
  jnaLib.vsprintf(buffer, format, va_args);
  return new String(buffer);
}
```

# php - 将数组添加到未合并相同索引的数组中

> ID：10977221
> 
> 赞同：0
> 
> 时间：2012-06-11T09:13:14.163
> 
> 标签：php, arrays

> **可能重复：**
> [将两个数组与数字键组合在一起，而不覆盖旧键](https://stackoverflow.com/questions/4176541/combine-two-arrays-with-numerical-keys-without-overwriting-the-old-keys)

好的，伙计们，正在寻找这个没有运气 - 它总是只指向`array_merge`或`array_push`或`array_combine`对我的目的无用的功能。

这是两个数组（编号索引）：

```
Array (
    [0] => 12345
    [1] => "asdvsdfsasdfsdf"
    [2] => "sdgvsdfgsdfbsdf"
)
Array (
    [0] => 25485
    [1] => "tyjfhgdfsasdfsdf"
    [2] => "mojsbnvgsdfbsdf"
) 
```

我需要创建一个“加入”（联合）数组，所以它看起来像：

```
Array (
    [0] => 12345
    [1] => "asdvsdfsasdfsdf"
    [2] => "sdgvsdfgsdfbsdf"
    [3] => 25485
    [4] => "tyjfhgdfsasdfsdf"
    [5] => "mojsbnvgsdfbsdf"
) 
```

因为我在这个问题上一无所获，所以我自己尝试了（$arr1 和 $arr2 是两个小数组）：

```
$result_array = $arr1;
foreach($arr2 as $v) {
    $result_array[] = $v;
} 
```

当然，这可以正常工作，但我不喜欢这种方法 - 想象一下第二个数组中不会只有 3 个元素的情况......

**问题**：有没有更好的方法或者充其量是一些内置功能（我不知道）？？？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-11T09:15:41.300

[`array_merge`](http://php.net/manual/en/function.array-merge.php)当您使用数字键时，将毫无问题地工作......请参阅文档中的以下说明

> 如果输入数组具有相同的字符串键，则该键的后一个值将覆盖前一个。**但是，如果数组包含数字键，则后面的值不会覆盖原始值，而是会被追加**。

强调我的

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T09:19:25.187

数组合并适用于您的数字索引数组：

```
<?php

$arrayOne = array(
     0 => 12345
    ,1 => "asdvsdfsasdfsdf"
    ,2 => "sdgvsdfgsdfbsdf"
);
$arrayTwo =  array(
     0 => 25485
    ,1 => "tyjfhgdfsasdfsdf"
    ,2 => "mojsbnvgsdfbsdf"
);

$arrayMerged = array_merge($arrayOne, $arrayTwo);

print_r($arrayMerged);

?> 
```

输出：

```
Array
(
    [0] => 12345
    [1] => asdvsdfsasdfsdf
    [2] => sdgvsdfgsdfbsdf
    [3] => 25485
    [4] => tyjfhgdfsasdfsdf
    [5] => mojsbnvgsdfbsdf
) 
```

# sharepoint - 如何使用 ListTool > Items > Change Item Order 按存储顺序在 SPGridView 中显示项目

> ID：10977222
> 
> 赞同：2
> 
> 时间：2012-06-11T09:13:15.607
> 
> 标签：sharepoint

我有一个共享点链接列表。我正在以编程方式在 SPGridView 中显示链接列表的项目。

我正在使用以下代码来阅读列表

```
SPList spList = myWeb.Lists["MyListNameHere"]; 
```

并将 SpList 分配为按原样显示项目的 SPGridView 的数据源。

但我想在 SPGridView 中以与通过 List Tool > Items > Change Item Order 设置的顺序相同的顺序显示项目

SPGridView 项的顺序应始终反映链接列表项中设置的当前顺序。

如何实现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T14:57:34.520

订单存储在名为 Order 的隐藏列中。使用 SPDataSource 控件作为数据源，将 listID 设置为列表并将选择查询设置为：

```
 <OrderBy>
      <FieldRef Name="Order" />
   </OrderBy> 
```

应该这样做

# ios - 使用 AVURLAsset 播放远程视频文件

> ID：10977223
> 
> 赞同：2
> 
> 时间：2012-06-11T09:13:18.587
> 
> 标签：ios, video, avurlasset

我想使用 AVURLAsset 播放视频文件，但在服务器上不是本地文件。我读过 AVURLAsset 不能直接用于远程文件。我阅读了堆栈溢出的另一个链接

[AVURLAsset 无法加载远程文件](https://stackoverflow.com/questions/4934886/avurlasset-cannot-load-with-remote-file)

此链接有一些使用 AVURLAsset 播放远程文件的方法，但我无法完全理解。我的观察员没有被调用。有人可以帮帮我吗？其实我不想使用 AVPlayer 播放视频出于某些原因。我从 AVAsset 抓取帧，然后在 OpenGL 中将它们渲染为纹理，所以我只需要通过 AVURLAsset 来执行此操作。

这是要查看的代码

```
-(void) startPlayer
   { 
    NSURL *url=[NSURL fileURLWithPath:@"http://gamooz.com/wildlife.mp4"]; 
    pItem = [AVPlayerItem playerItemWithURL:url]; 
    player = [AVPlayer playerWithPlayerItem:pItem];
    [player play]; 
    pItem addObserver:self forKeyPath:@"status" options:0 context:nil]; 
   }

 -(void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:    (NSDictionary *)change context:(void *)context 
   { 
     NSLog(@"heyy"); 
     if ([keyPath isEqualToString:@"status"])
        {
          AVPlayerItem *pItemTemp = (AVPlayerItem *)object; 
          if (pItemTemp.status == AVPlayerItemStatusReadyToPlay) 
             { 
                ///now i can use playerItem asset
                 asset = (AVURLAsset *)pItemTemp.asset; 
             }
        } 
   } 
```

但观察者永远不会被调用。这是为什么？

此外，我将观察者代码放在其他一些函数中，并尝试检查 playerItem 是否准备好播放

```
 -(void) checkForPlayer
   {
  if (pItem.status == AVPlayerItemStatusReadyToPlay) 
   {
     asset = (AVURLAsset *)pItem.asset;
   }
   } 
```

它永远不会提供等于就绪的状态。

# c - 错误：../../mono/io-layer/handles-private.h:362

> ID：10977224
> 
> 赞同：0
> 
> 时间：2012-06-11T09:13:20.910
> 
> 标签：c, debian

我在 Debian 6 操作系统中执行我的应用程序。时不时有一个例外：

> 错误：../../mono/io-layer/handles-private.h:362:_wapi_handle_share_release：断言失败：（info->handle_refs > 0）堆栈跟踪：
> 
> at (wrapper managed-to-native) System.IO.MonoIO.Close (intptr,System.IO.MonoIOError&) <0x00004> at (wrapper managed-to-native) System.IO.MonoIO.Close (intptr,System.IO .MonoIOError&) <0x00004> at System.IO.FileStream.Dispose (bool) <0x00094> at System.IO.Stream.Close () <0x0001b> at System.IO.Stream.Dispose () <0x00019> at (wrapper remoting -invoke-with-check) System.IO.Stream.Dispose () <0x00053> at Sarum.Logger.Log.WriteToFile (Sarum.Logger.SLogMessage,bool) <0x0077d> at Sarum.Logger.Log.WriteLineAsync () < 0x00212> 在（包装器运行时调用）对象*.runtime_invoke_void_this_*（对象，intptr，intptr，intptr）<0x00040>

**本机堆栈跟踪：**

> /usr/bin/cli() [0x80d5b19] [0xdf6600] /lib/libc.so.6(abort+0x182) [0x13d962] /lib/libglib-2.0.so.0(g_assertion_message+0x13f) [0xc9232f] /lib /libglib-2.0.so.0(+0x6198d) [0xc9298d] /usr/bin/cli() [0x81df0da] /usr/bin/cli() [0x81e2d22] /usr/bin/cli() [0x81e2eb6] /usr /bin/cli() [0x8161dc0] [0xa1c6f8] [0xa1c625] [0xa1c584] [0xa1c752] [0x5711ec] [0x2c59ce] [0x2c41b3] [0x2832b1] /usr/bin/cli() [0x8064428] /usr/bin/cli (mono_runtime_invoke+0x40) [0x812d4e0] /usr/bin/cli(mono_runtime_delegate_invoke+0x34) [0x812d764] /usr/bin/cli() [0x81284bf] /usr/bin/cli() [0x81f5e3e] /usr/bin/cli () [0x82089a5] /lib/libpthread.so.0(+0x57b0) [0x9857b0] /lib/libc.so.6(克隆+0x5e) [0x1dc0be]

**来自 gdb 的调试信息：**

> ==================================================== ===============
> 执行本机代码时收到 SIGABRT。这通常表示单声道运行时或您的应用程序使用的本机库之一中存在致命错误。==================================================== ================
> 
> ** (/usr/local/bin/cserver/WadJet.CentralServer.exe:8141): 警告 **: process_set_termination_details: 错误查找进程句柄 0x403

为什么会这样以及如何与之抗争？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T12:51:53.790

似乎有很多人报告了困扰旧版本 Mono 的类似错误。您可能首先想尝试按照**[此处](https://stackoverflow.com/a/9715521/200272)**的建议更新 Mono 。

# c# - 在 P/Invoke 中为固定字符串传递什么？

> ID：10977231
> 
> 赞同：5
> 
> 时间：2012-06-11T09:13:51.973
> 
> 标签：c#, pinvoke, pinning

假设这个 C 函数：

```
void do_something(const char* str) 
```

它将字符串存储在某处以供*以后参考*。

此外，我在 C# 中有这个签名来调用这个函数：

```
[DllImport("NativeLib")]
static extern void do_something(string str); 
```

现在，将字符串传递给此方法时我需要做什么：

*   我是否需要固定字符串（用`GCHandle.Alloc()`）（或者编组器创建副本）？
*   如果我确实需要固定它，我是否传递“原始”字符串（即我传递给的字符串`GCHandle.Alloc()`）？还是我需要传递的返回值`GCHandle.AddrOfPinnedObject()`？
*   在这种情况下是`string`正确的数据类型（for ）吗？`do_something`还是我应该`IntPtr`改用？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-11T12:31:36.047

通过互操作边界存储指针是一个非常糟糕的主意，尽你所能修改 C 代码以制作字符串的副本。

按照赞成的答案中的建议固定字符串不起作用，pinvoke marshaller 必须将字符串转换为 char* 并在进行本机调用后释放转换后的字符串，从而使指针无效。您必须自己编组字符串。将参数声明为 IntPtr 并使用 Marshal.StringToHGlobalAnsi() 创建指针值。

或者使用 Marshal.StringToCoTaskMemAnsi()，它从 COM 堆中分配。这是你真正的问题，没有很好的场景来释放字符串。C 代码无法释放字符串，因为它不知道它是如何分配的。您的 C# 代码无法释放字符串，因为它不知道 C 代码何时使用指针完成。这就是复制字符串如此重要的原因。如果您只进行几次此调用，您可以忍受内存泄漏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T11:41:01.017

鉴于非托管代码将存储指针而不是复制字符串，我建议您使用 GCHandle.Alloc() 手动创建字符串的副本并将其作为 IntPtr 传递。

然后，您将能够管理传递的内存块的生命周期，只有在完成后才释放它（通过 GCHandle）。

# javascript - 使用 javascript 库 draw2d 的连接链接选择不准确

> ID：10977232
> 
> 赞同：0
> 
> 时间：2012-06-11T09:13:52.957
> 
> 标签：javascript, hyperlink, connection, selection, draw2d

我想使用 draw2d 库实现图形设计器。在演示中，单击任何连接链接都是准确的，否则在我的应用程序中单击链接不准确，因为大多数时候没有选择连接（VectorFigure 等元素没有选择问题）。我的应用程序和演示之间的唯一区别是名为“paintarea”的 div 容器；事实上，我没有使用专用的框架，因此paintarea 不会从 x=0 和 y=0 开始。任何人都可以帮助我吗？非常重要...在此先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T09:24:26.023

您是否使用了滚动容器/div？

有时用户将paintarea 包含在另一个可滚动的DIV 中。在这种情况下，您应该使用[setViewPort](http://www.draw2d.org/draw2d/resources/jsdoc/draw2d/Canvas.html#setViewPort) ...或检查[Viewport](http://www.draw2d.org/draw2d/resources/demo/demo/970_viewport/index.html) Demo。

# mysql - 如何加入数据库名称派生自当前表中的字段的数据库和表？

> ID：10977235
> 
> 赞同：2
> 
> 时间：2012-06-11T09:14:00.283
> 
> 标签：mysql, database, select, search

我目前有一个存储主数据库的数据库服务器，并且该数据库中的表具有类似于下面的结构

公司.companyInfo

```
ID | Name     | databaseName | otherinfo
---+----------+--------------+----------
0  | companyA | databaseA    | Extra1
1  | companyB | databaseB    | Extra2 
```

公司数据库如下

数据库A.users

```
userID | Name    | Password  |  extra
-------+---------+-----------+---------
0      | user1   | pass1     | other1
1      | user2   | pass2     | other2 
```

和 databaseB 类似。

我想要做的是从用户表之一获取用户信息，但要从主数据库链接

所以我想做的是某种子选择来获取所有用户详细信息，但是将数据库名称提供给来自 Companies.companyInfo 表查询的子选择。

我被卡住了..请帮忙！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T09:25:49.833

目前尚不完全清楚您要追求什么，但原则上不能使用表达式（包括表查找中的字段值）作为标识符（例如表或列的名称）。

一种解决方法是从包含所需查询的字符串中“准备”一条语句；可以通过将表达式连接到其中来代替标识符来构造这样的字符串：

```
SELECT CONCAT(
  'SELECT * FROM `', REPLACE(databaseName, '`', '``'), '`.users'
) INTO @qry FROM companies.companyInfo WHERE ID = 1;

PREPARE stmt FROM @qry;
EXECUTE stmt; 
```

但是，使用一个查询在应用程序中获取数据库名称可能同样容易`SELECT`，然后执行相同的连接以从那里发出第二个查询。

综上所述，也许您的数据结构需要进一步规范化？为什么不将所有数据库合并为一个，每个表中的一列指示每条记录与哪个公司相关？

# c# - 使用 linq foreach 更新 2 个字段

> ID：10977237
> 
> 赞同：22
> 
> 时间：2012-06-11T09:14:07.197
> 
> 标签：c#, linq

我可以一次使用 linq foreach 循环更新 2 个字段吗？示例片段：我有一个包含名称、电子邮件、创建时间、上次更新时间字段的用户数据。我必须为所有用户重置 CreateTime 和 LastUpdateTime。

要更新我正在使用 2 个调用，如下所示

```
users.ForEach(x => x.CreateTime= DateTime.Now.AddMonths(-1));
users.ForEach(x => x.LastUpdateTime = DateTime.Now); 
```

相反，我可以使用 linq foreach 循环一次完成吗？

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2012-06-11T09:16:43.887

首先，假设这是`List<T>.ForEach`，这*不是*使用 LINQ。但是，是的，您可以使用语句体创建 lambda 表达式：

```
users.ForEach(x => {
    x.CreateTime = DateTime.Now.AddMonths(-1);
    x.LastUpdateTime = DateTime.Now;
}); 
```

但是，您可能*还*希望对所有更新使用一个一致的时间：

```
DateTime updateTime = DateTime.Now;
DateTime createTime = updateTime.AddMonths(-1);

users.ForEach(x => {
    x.CreateTime = createTime;
    x.LastUpdateTime = updateTime;
}); 
```

不过，目前还不清楚*为什么*要以这种方式实现它。我建议改用`foreach`循环：

```
DateTime updateTime = DateTime.Now;
DateTime createTime = updateTime.AddMonths(-1);

foreach (var user in users)
{
    user.CreateTime = createTime;
    user.LastUpdateTime = updateTime;
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-11T09:16:43.673

它实际上不是linq，但你可以尝试

```
users.ForEach(x => { x.CreateTime = DateTime.Now.AddMonths(-1);
                     x.LastUpdateTime = DateTime.Now; }); 
```

# javascript - 预加载器不预加载并再次加载页面

> ID：10977238
> 
> 赞同：1
> 
> 时间：2012-06-11T09:14:13.020
> 
> 标签：javascript, jquery

我找到了这个不错的 jQuery[预加载器/进度条](http://www.gayadesign.com/diy/queryloader2-preload-your-images-with-ease/)，但我无法让它按预期工作。问题是它首先加载我的页面，在我的整个页面加载后，0%-100% 栏会快速显示，之后它会再次重新加载我的页面。所以它不会在页面加载之前显示进度条，它也会第二次加载页面。

这是我的实现代码：

```
<head>
    <script src="js/jquery-1.7.2.min.js" type="text/javascript"></script>
    <script src="js/jquery.queryloader2.js" type="text/javascript"></script>
    <script type="text/javascript">
        $(document).ready(function () {
            $("body").queryLoader2();
        });
    </script>
</head>
<body>
    My content...No other reference in here for the Jquery preloader
</body> 
```

感谢您提前提供任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T09:56:48.190

我在这里可能*非常非常错误*，但在我看来：

1.  插件有缺陷。
2.  您的页面中有一些导致重定向的问题。

我创建**[了一个测试小提琴](http://jsfiddle.net/eFvqW/2/)**并发现了以下内容：

1.  **如果页面上没有图像，则**`completeImageLoading();` **永远不会调用**插件的私有函数，因为它仅绑定到图像元素。当没有图像 -> 没有绑定 -> 没有触发 -> 没有完成 -> 你保持覆盖 0% 时，正如未运行的小提琴所证明的*那样*（当页面未运行时，jsfiddle 看不到相关图像） .
2.  该插件不考虑远程图像。因此，如果您像这样声明它们`<img src="http://example.com/image.jpg">`- 那么它将无法工作，因为插件无法识别它们。事实上，它`$.ajax`用于加载图像，显然，在尝试访问另一个域时会产生错误。
3.  该插件不会重新加载页面（至少在 Google Chrome 中）......在小提琴中检查您的控制台输出。每次单击运行时，它会显示一次消息。

**建议：**

1.  确保您**至少提供了一张*相对*或*背景*图像**（尽管我没有测试过背景...）以使插件正常工作。
2.  向我们展示更多代码。小提琴演示了**该插件不会导致页面重新加载**（至少在 Chrome 中......您是否使用其他浏览器？）。一定是你制造的东西干扰了这里。
3.  **为插件指定一些选项**（当没有选项时表现得很奇怪）。

* * *

**关于预加载器的编辑**

关于预加载器......如果显示进度对您来说不是强制性的，那么您可以使用一个`window.onload`技巧。在 DOM 准备就绪`$(...)`时，您可以创建一个不透明的页面叠加层，其中包含“请稍候...”消息和一些动画（如果您喜欢的话）。然后等待**[window.onload 事件](https://developer.mozilla.org/en/DOM/window.onload)**，该事件*“在文档加载过程结束时触发......当文档中的所有对象都在 DOM 中，并且所有图像和子帧都已完成加载时”。*触发时`window.onload`，您只需移除叠加层，瞧——页面已准备就绪！

**关于预加载器的编辑 2**

其实，你甚至不需要`$(...)`……我到底在想什么？只需在您的 html 中创建您的叠加层（一个具有唯一 id 的简单 div），对其进行样式设置以使其充满屏幕并为其提供`z-index:1337`CSS 属性以使其覆盖整个页面。然后，在 window.onload 上：

```
window.onload = function () {
    // Grab a reference to your overlay element:
    var overlay = document.getElementById('myOverlay');
    // Check if the overlay really exists
    // and if it is really appended to the DOM,
    // because if not - removeChild throws an error
    if (overlay && overlay.parentNode && overlay.parentNode.nodeType === 1) {
        // Remove overlay from DOM:
        overlay.parentNode.removeChild(overlay);
        // Now trash it to free some resources:
        overlay = null;
    }
}; 
```

当然，它并不是真正的预加载器，而只是一种模仿。

这是**[一个你可以玩的工作小提琴](http://jsfiddle.net/DZy75/1/)**。

PS我个人不欣赏预加载器，但这只是我......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T09:27:11.527

试试这个（删除 document.ready 事件并简单地调用它）：-

```
<script type="text/javascript">         
            $("body").queryLoader2();
</script> 
```

# php - 即使在放置 ob_start() 之后，标头函数也不起作用；

> ID：10977245
> 
> 赞同：-1
> 
> 时间：2012-06-11T09:14:51.563
> 
> 标签：php, function, header

> **可能重复：**
> [PHP 已发送的标头](https://stackoverflow.com/questions/8028957/headers-already-sent-by-php)

我的 php 文件中有以下代码。我想使用下面的代码中清楚的标头函数从这个页面重定向。我**确保没有 echo 命令**，并且**还放置了 ob_start(); 在文件的开头，**但我收到以下错误：

*警告：无法修改标头信息 - 标头已由 /hermes/bosweb/web054/b548/ipg.psdingcampsduscom/facebook_registration_plugin/store_user_data.php:1 中的 /hermes/bosweb/web054/b548/ipg.psdingcampsduscom/ 发送facebook_registration_plugin/store_user_data.php 在第 171 行*

这是代码：

```
<?php ob_start();
            define('FACEBOOK_APP_ID', 'xxxxxxxx');
            define('FACEBOOK_SECRET', 'xxxxxxxxxx');
            // No need to change function body
            function parse_signed_request($signed_request, $secret) {
                list($encoded_sig, $payload) = explode('.', $signed_request, 2);
                // decode the data
                $sig = base64_url_decode($encoded_sig);
                $data = json_decode(base64_url_decode($payload), true);
                if (strtoupper($data['algorithm']) !== 'HMAC-SHA256') {
                    error_log('Unknown algorithm. Expected HMAC-SHA256');
                    return null;
                }
                // check sig
                $expected_sig = hash_hmac('sha256', $payload, $secret, $raw = true);
                if ($sig !== $expected_sig) {
                    error_log('Bad Signed JSON signature!');
                    return null;
                }
                return $data;
            }
            function base64_url_decode($input) {
                return base64_decode(strtr($input, '-_', '+/'));
            }
            if ($_REQUEST) {
                $response = parse_signed_request($_REQUEST['signed_request'],
                                FACEBOOK_SECRET);
header("location: fbwe/step2.php?name=".$name."&email=".$email."&gender=".$gender."&arts=".$cb1."&act=".$cb2."&cooking=".$cb3."&dance=".$cb4."&designing=".$cb5."&fashion=".$cb6."&interior=".$cb7."&modeling=".$cb8."&photography=".$cb9."&poetry=".$cb10."&programming=".$cb11."&reading=".$cb12."&sketching=".$cb13."&singing=".$cb14."&sports=".$cb15."&stunting=".$cb16."&videography=".$cb17."&other=".$cb18);

                // Connecting to Database

            } else {
                //echo '$_REQUEST is empty';
            }
            ?> 
```

谁能弄清楚出了什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T09:25:43.230

在使用 header 函数之前应该记住的几件事。

1.  在 header 函数之前不应该有 echo 或 print 语句。
2.  页面顶部和底部不应有空格，即页面应以 . 开头`<?php`和结尾`?>`。这些标签前后不能有空格。

# cognos - 在 Cognos 报告的外发电子邮件中包含一个链接

> ID：10977249
> 
> 赞同：0
> 
> 时间：2012-06-11T09:15:04.357
> 
> 标签：cognos

我正在尝试安排报告并通过电子邮件将链接发送给收件人。但是当我向编辑器添加超链接时，它会将其作为纯文本。我正在使用以下格式：

```
<a href="LINK HERE">Click Here</a> 
```

有谁知道这是否可能？如果 Cognos 会采用比编辑器中显示的更多的 HTML 属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T16:35:33.800

试试这个并确保从工具箱中拖动 HTML 项目

```
 <a href="mailto:someone@example.com?Subject=Subject Goes Here">Send Mail</a> 
```

# image - 在 GWT 中显示图像

> ID：10977250
> 
> 赞同：0
> 
> 时间：2012-06-11T09:15:08.247
> 
> 标签：image, gwt, widget

我创建了一个小部件来显示幻灯片。在 Firefox 中，一切都很好，但在 chrome 中没有任何反应。多次刷新后，幻灯片显示。我不知道为什么。你能给我一些想法吗？Tks 这是我的 GWT 客户端：

```
public SlideClient() {
    super();
    setStyleName("flexslider");
    setHeight("100%");
    setWidth("100%");

}

@Override
public void updateFromUIDL(UIDL uidl, ApplicationConnection client) {
    this.client = client;
    this.paintableId = uidl.getId();
    listImage = Arrays.asList(uidl.getStringArrayAttribute("listImage"));
    listUrl = Arrays.asList(uidl.getStringArrayAttribute("listUrl"));

    loadImage();
    checkImagesLoadedTimer.run();
}

public void display() {
    m.setStyleName("slides");
    m.setHeight("100%");
    m.setWidth("100%");
    add(m);
}

public native void slideshow() /*-{
$wnd.$('.flexslider').flexslider({slideshowSpeed: 2000});
}-*/;

public native String getURL(String url)/*-{
return $wnd.open(url,
'target=_blank')
}-*/;

private Timer checkImagesLoadedTimer = new Timer() {

    @Override
    public void run() {

        if (loadedImageElements.size() == toLoad) {
            display();
        } else {
            add(new Label("đang load "+loadedImageElements.size()));
            checkImagesLoadedTimer.schedule(2000);
        }
    }
};

private void loadImage() {
    for (String tmp : listImage) {
        AbsolutePanel panel = new AbsolutePanel();
        final Image ima = new Image(tmp);
        add(new Label("before put"));
        ima.addLoadHandler(new LoadHandler() {

            @Override
            public void onLoad(LoadEvent event) {
                loadedImageElements.put(toLoad+"", ima);
                slideshow();
                add(new Label("đang put "+loadedImageElements.size()));
            }
        });
        add(new Label("after put"));

        panel.add(ima);
        m.add(panel);

        if (toLoad != 0) {
            panel.setVisible(false);
        }
        toLoad++;

    }

} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T09:21:39.503

您是否实施了图像加载器来在图像显示之前准备图像？一个干净的解决方案是将图像元素作为不可见的实例添加到页面根目录，等待它们加载，然后在其他地方使用它们。

您还应该查看有关 ImageBundling 的教程：[ImageResource](https://developers.google.com/web-toolkit/doc/latest/DevGuideClientBundle#ImageResource)

这是您要求的我的一个图像加载器类的一小部分摘录，尽管有不同的方法可以实现这一点：

```
private HashMap<String,ImageElement> loadedImageElements = new HashMap<String,ImageElement>();
private int toLoad = 0;

private void loadImage(final String name, String url){
    final Image tempImage = new Image(url);             
    RootPanel.get().add(tempImage);

    ++toLoad;

    tempImage.addLoadHandler(new LoadHandler(){
        public void onLoad(LoadEvent event) {               
            loadedImageElements.put(name,ImageElement.as(tempImage.getElement()));
            tempImage.setVisible(false);                
        }           
    });
} 
```

图像 url 是通过指向图像真实位置的 ClientBundle-Interface 检索的。我还实现了一个在后台运行的计时器，以检查是否所有图像都已加载：

```
private Timer checkImagesLoadedTimer = new Timer(){
    public void run() {
        System.out.println("Loaded " + loadedImageElements.size() + "/" + toLoad + " Images.");
        if(loadedImageElements.size() == toLoad){
            buildWidget();
        }else{              
            checkImagesLoadedTimer.schedule(50);
        }
    }       
}; 
```

一切准备就绪后，就会创建原始的小部件/页面。

但正如我所说，有很多方法可以实现图像加载器。尝试不同的实现并选择最适合您需求的一种。

# html - 具有恒定高度可变宽度的 Div

> ID：10977253
> 
> 赞同：1
> 
> 时间：2012-06-11T09:15:17.060
> 
> 标签：html, css

有一个宽度为 500 像素，高度为 50 像素的 Div。在这个 Div 里面有很多（比如 50 个）宽度为 50px 和高度为 50 px 的小 Div。现在我想要一个水平滚动而不是垂直滚动。我如何强制那些小 div 水平溢出而不是垂直溢出

小div的数量也可以改变。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T09:18:21.783

将以下 CSS 分配给外部`DIV`：

```
white-space: nowrap;
overflow-x: scroll; 
```

[请参阅this fiddle](http://jsfiddle.net/KXe9b/1/)的示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T09:17:25.110

尝试将子 div 设置为`display: inline-block`，然后将父 div 设置为`white-space: nowrap`。

希望有帮助:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T10:01:39.093

主 div 样式定义

```
 float : left; 
 overflow : scroll; 
```

# qt - Qt 等宽字体

> ID：10977259
> 
> 赞同：3
> 
> 时间：2012-06-11T09:15:30.737
> 
> 标签：qt, font-size

我需要限制自定义小部件`setFont()`，使其仅接受固定宽度的字体。

但是，我找不到如何以编程方式定义特定是否`QFont`是固定宽度的。有这种可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T09:55:27.630

也许**[`bool QFontInfo::fixedPitch()`](http://doc.qt.nokia.com/4.7-snapshot/qfontinfo.html#fixedPitch)**是您正在寻找的功能：

```
void MyWidet::setFont ( const QFont& font )
{
    QFontInfo fontInfo(font);
    if(fontInfo.fixedPitch())
        QWidget::setFont(font);

    // Otherwise ignore..
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T09:32:19.573

添加`YourWidget->setStylesheet("QWidget{font: 10pt "Ubuntu";}");`

这样，您可以将小部件大小限制为 10pt 和 Ubuntu 类型的字体，除非您以编程方式在其他地方更改它。

# c - 使 C 源代码中的大常量更具可读性？

> ID：10977260
> 
> 赞同：8
> 
> 时间：2012-06-11T09:15:31.193
> 
> 标签：c, embedded, readability, microprocessors

我正在为微处理器编写一些代码。
它有几个大的、关键的常数。

`#define F_CPU 16000000UL`

在这种情况下，这是 CPU 频率。在赫兹。

事实上，如果不手动在数字上使用光标，很难判断这是 1,600,000、160,000,000 还是 16,000,000。

如果我把逗号放在数字`#define F_CPU 16,000,000UL`中，它会截断常数。

我使用过一些具有特定数字分隔符的深奥语言，旨在使大量数字更具可读性（例如`16_000_000`，主要用于 MCU 的语言）。大的“幻数”在嵌入式东西中相当普遍，因为需要它们来描述 MCU 如何与现实世界对话的各个方面。

C中有这样的东西吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-11T09:22:27.133

是的，C 确实有预处理器分隔符：`##`

所以你可以写

`#define F_CPU 16##000##000UL`

其含义与 16000000UL*完全相同。*（与 16*1000*1000 等其他结构不同，您需要小心不要将它们放在乘法可能导致问题的地方。）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-11T09:19:33.300

也许是这样的？

```
#define MHz(x) (1000000 * (x))
...
#define F_CPU MHz(16) 
```

另外，我不喜欢`#define`s。通常最好有`enum`s 或常量：

```
static const long MHz = 1000*1000;
static const long F_CPU = 16 * MHz; 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-11T09:20:44.470

一种可能性是这样写：

```
#define F_CPU (16 * 1000 * 1000) 
```

或者

```
#define MHz (1000*1000)
#define F_CPU (16 * MHz) 
```

编辑：其他人建议的 MHz(x) 可能会更好

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-06-11T09:19:17.963

您可以将常量写为计算的结果（`16*1000*1000`例如）。更好的是，您可以定义另一个宏 ，`MHZ(x)`并将您的常量定义为`MHZ(16)`，这将使代码更具自我记录性 - 以创建名称空间冲突概率为代价。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-12T14:40:48.810

```
// constants.h
#define Hz   1u              // 16 bits
#define kHz  (1000u  *  Hz)  // 16 bits
#define MHz  (1000ul * kHz)  // 32 bits

// somecode.h
#define F_CPU (16ul * MHz)   // 32 bits 
```

笔记：

*   `int`在 8 位 MCU 上是 16 位。
*   16 位文字将尽可能优化为 8 位文字（使用 8 位指令）。
*   有符号整数文字是危险的，特别是在与位运算符混合时，这在嵌入式系统中很常见。默认情况下使所有内容都未签名。
*   考虑使用变量表示法或注释来指示常量是 32 位，因为 32 位变量在大多数 8 位上非常非常慢。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-05-29T09:15:04.833

另一种方法是在更通用的宏中使用 ## 预处理器运算符

```
#define NUM_GROUPED_4ARGS(a,b,c,d) (##a##b##c##d)
#define NUM_GROUPED_3ARGS(a,b,c)   (##a##b##c)

#define F_CPU NUM_GROUPED_3ARGS(16,000,000UL)

int num = NUM_GROUPED_4ARGS(-2,123,456,789); //int num = (-2123456789);
int fcpu = F_CPU; //int fcpu = (16000000UL); 
```

这在某种程度上是所见即所得，但不能免于误用。例如。你可能会抱怨编译器

```
int num = NUM_GROUPED_4ARGS(-2,/123,456,789);  //int num = (-2/123456789); 
```

但它不会。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-11T09:24:57.047

您可以使用科学计数法：

```
#define F_CPU 1.6e+007 
```

或者：

```
#define K 1000

#define F_CPU (1.6*K*K) 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-06-22T17:45:22.920

将常量定义为：

```
#define F_CPU_HZ 16000000UL 
```

这样你就知道里面有什么类型的数据。在我们的软件中，我们有一些外围设备需要设置各种预分频器，所以我们有`#defines`这样的：

```
#define SYS_CLK_MHZ    (48)
#define SYS_CLK_KHZ    (SYS_CLK_MHZ * 1000)
#define SYS_CLK_HZ     (SYS_CLK_KHZ * 1000) 
```

# jquery - jQuery bassistance 验证，如何防止打印到 console.log

> ID：10977272
> 
> 赞同：0
> 
> 时间：2012-06-11T09:16:15.183
> 
> 标签：jquery, jquery-validate

运行验证插件时，我可以看到它打印到 Firebug 中的控制台（即使我有`debug: false`）。

在 IE9/IE8 中运行应用程序时会失败，除非处于调试模式，即 shift+F12。在调试模式下，我可以看到它打印到 IE 控制台并且应用程序实际工作。

如何配置插件以停止打印到控制台（我假设 IE 在不处于调试模式时无法处理此问题）？或者这是验证插件中的一个错误，所以我必须自己删除这些行？

该插件正在从插件中的 defaultShowErrors 打印。

这是我的验证码示例：

```
function registerAccountValidation(){
    $("#registerform").validate({ 
        errorContainer: "#messageBox1",
        errorLabelContainer: "#messageBox1 ul",
        wrapper: "li", 
        debug:false,
        rules: {     
            owner_first_name: "required",
            owner_surname: "required",
            owner_email: { // compound rule 
                email: true,
                required: true,
                remote: "http://" + hostname +  "/modules/core/account/is_available.php"
            }, 
            email2: { 
                equalTo: "#email"
            },
            username: {
                required: true,
                remote: "http://" + hostname +  "/modules/core/account/is_available.php"
            },
            password: {
                required: true
            },
            password2: {
                equalTo: "#password"
            },                                
            owner_phone_number: "required",
            company_address: "required",
            zipcode: "required",
            city: "required",
            country: {
                required: true
            },
            company_name:{
                required: true,
                remote: "http://" + hostname +  "/modules/core/account/is_available.php"
            },
            company_link: {
                required: true,
                remote: "http://" + hostname +  "/modules/core/account/is_available.php",
                alpha: true
            }
        }, 
        messages: { 
            owner_first_name: {
                required: "First name is missing"
            },
            owner_surname: "Surname is missing",
            owner_email: { // compound rule 
                email: "Please specify a correct e-mail address" ,
                required: "E-mail is missing",
                remote: "E-mail address already registered"
            }, 
            email2: { 
                equalTo: "E-mail addresses must be equal"
            },
            username: {
                required: "Username is missing",
                remote: "Username is already registered"
            },
            password: {
                required: "Password is missing"
            },
            password2: {
                equalTo: "Passwords must be equal"
            },
            owner_phone_number: "Phone number is missing",
            company_address: "Address is missing",
            zipcode: "Zip code is missing",
            city: "City is missing",
            country: {
                required: "Country is missing"
            },
            company_name: {
                required: "Company name is missing",
                remote: "Company name already registered"
            },
            company_link: {
                required: "Link is missing",
                remote: "Link is already registered",
                alpha: "Must only contain a-z and A-Z and no blank space"
            }
        }
    }); 
} 
```

* * *

**更新**

在插件中删除打印到控制台实际上可以解决问题。但我更喜欢以正式的方式进行，如果有的话。不想在将来更新插件时遇到问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T09:25:01.487

如果一个快速而肮脏的解决方案就足够了，您可以为没有真正的浏览器定义一个虚拟的 console.log：

```
if(!(window.console && window.console.log)){
    window.console = {
        log: function(){}
    };
} 
```

如果很难找到实际问题，这至少会使错误消失。

# csrf - 即使我可以做到这一点，csrf-tokens 是否有效？

> ID：10977273
> 
> 赞同：1
> 
> 时间：2012-06-11T09:16:16.153
> 
> 标签：csrf

我一直在玩 chrome 的控制台。

我发现我可以通过以下方式访问我的源代码的文本版本：

```
document.scripts[2].outerText 
```

（数字“2”取决于主要源代码在哪里）

在那之后，我所要做的就是：

```
temp = document.scripts[2].outerText;
temp.indexOf("csrf_token") 
```

和其他几件事来获得 csrf_token

这是否意味着如果我可以做 xss（或在网站上运行自定义 JS），那么 csrf 令牌可能会失败？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T09:17:57.163

> 这是否意味着如果我可以做 xss（或在网站上运行自定义 JS），那么 csrf 令牌可能会失败？

是的。如果存在允许攻击者执行 XSS 的安全漏洞，则可以绕过 CSRF 保护（就像许多其他事情一样）。

诀窍是防御各种攻击。:)

# c - 套接字文件描述符自动更改

> ID：10977276
> 
> 赞同：3
> 
> 时间：2012-06-11T09:16:28.163
> 
> 标签：c, sockets, networking, file-descriptor

我尝试使用 RAW 套接字编程捕获所有接近我的 NIC 的 UDP 数据包。在这里，我遇到了一个奇怪的问题。当我的程序运行时，我的套接字描述符会自动更改。这是代码：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <netinet/ip.h>
#include <netinet/udp.h>
#include <netinet/tcp.h>
#include <sys/types.h>
#include <sys/socket.h>
#include <errno.h>
#include <arpa/inet.h>

int main () {

int sockfd = socket (PF_INET, SOCK_RAW, IPPROTO_UDP);
if (sockfd < 0) {
    perror ("socket failed");
    return -1;
}

char *buf = malloc (8192);
memset (buf, 0, 8192);
if (!buf) {
    perror ("calloc failed\n");
    return -1;
}

int ret_recv;
i:
while ((ret_recv = recv (sockfd, buf, 8192, 0)) > -1) {
    printf ("%d\n", ret_recv);
    struct iphdr *iph = (struct iphdr *) buf;
    //struct udphdr *udph = (struct udphdr *) (buf + sizeof (struct iphdr));
    struct tcphdr *tcph = (struct tcphdr *) (buf + sizeof (struct iphdr));
    char ip[4];
    printf ("source ip: %s\n", inet_ntop (AF_INET, &iph->saddr, ip, sizeof (struct sockaddr_in)));
    printf ("dest ip: %s\n", inet_ntop (AF_INET, &iph->daddr, ip, sizeof (struct sockaddr_in)));
    //printf ("port: %d\n", ntohs (udph->source));
    printf ("port: %d\n", ntohs (tcph->source));
}
perror ("recv failed");
//goto i;
return 0;
} 
```

在我的输出中，不是无限循环的数据包信息打印，而是只打印一个信息包。所以我检查了gdb。我用过`display sockfd`。socket调用后，sockfd的值为7。然后在while循环中，执行dest ip的printf后，sockfd的值变为808988216。所以recv失败，出现“bad file descriptor”错误。我找不到实际出了什么问题。

提前致谢 ：-）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T09:28:16.253

这是缓冲区溢出：

```
char ip[4];
    printf ("source ip: %s\n", inet_ntop (AF_INET, &iph->saddr, ip, sizeof (struct sockaddr_in))); 
```

缓冲区不够大，无法容纳 IP 地址的字符串形式。此外，第四个论点是`inet_ntop()`对可用空间撒谎，应该是：

```
char ip[INET_ADDRSTRLEN];
printf ("source ip: %s\n", inet_ntop (AF_INET, &iph->saddr, ip, sizeof ip)); 
```

# dll - 没有 cygwin1.dll 的 Libx264？

> ID：10977280
> 
> 赞同：0
> 
> 时间：2012-06-11T09:16:31.597
> 
> 标签：dll, cygwin, mingw, msys, libx264

我已经由 MinGW 和 Msys 构建了 libx264-125.dll。但是，libx254-125.dll 需要调用 cygwin1.dll 和 cyggcc_s-1.dll 才能运行。谁能告诉我如何构建静态 libx264-125.dll 感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T09:30:25.427

如果您使用 MSYS 和 MinGW GCC 构建 x264，它不依赖于 Cygwin dll。确保构建过程中使用的“gcc”是 MinGW 的，而不是 Cygwin 可执行文件。

# android - 裁剪谷歌地图

> ID：10977285
> 
> 赞同：1
> 
> 时间：2012-06-11T09:16:52.473
> 
> 标签：android, xml

是否可以在将 Google 地图集成到应用程序之前对其进行裁剪？

例如，当我启动应用程序时，我的城市将是唯一可见的区域。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T10:50:06.367

无法裁剪区域或地图的任何部分，
您可以在用户查看您的应用程序时最初显示您的区域并禁用在地图内导航`setClickable(false);`

```
 mapView.setBuiltInZoomControls(false);
    List<overlay> mapOverlays = mapView.getOverlays();

    GeoPoint point = new GeoPoint(latitudeE6, longitudeE6);
    OverlayItem overlayitem = new OverlayItem(point, "This is my area");
    itemizedOverlay.addOverlay(overlayitem);
    mapOverlays.add(itemizedOverlay);
    MapController mapController = mapView.getController();
    mapController.animateTo(point);
    mapController.setZoom(6); 
```

你所在`latitudeE6, longitudeE6`地区的纬度和经度在哪里

# android - 在android中退出时清除应用程序缓存

> ID：10977288
> 
> 赞同：14
> 
> 时间：2012-06-11T09:17:01.987
> 
> 标签：android, caching

我想要做的是在应用程序退出时清除应用程序的缓存。

这个任务我可以通过这个步骤手动完成。

**< 应用程序 --> 管理应用程序 --> “我的应用程序” --> 清除缓存>>**

但我想通过在应用程序退出时编程来完成这项任务..请帮帮我..

提前致谢..

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-11T09:22:23.503

试试这个——

```
import java.io.File;

import android.app.Activity;
import android.content.Context;
import android.os.Bundle;

public class HelloWorld extends Activity {

   /** Called when the activity is first created. */
   @Override
   public void onCreate(Bundle *) {
      super.onCreate(*);
      setContentView(R.layout.main);
   }

   @Override
   protected void onStop(){
      super.onStop();
   }

   //Fires after the OnStop() state
   @Override
   protected void onDestroy() {
      super.onDestroy();
      try {
         trimCache(this);
      } catch (Exception e) {
         // TODO Auto-generated catch block
         e.printStackTrace();
      }
   }

   public static void trimCache(Context context) {
      try {
         File dir = context.getCacheDir();
         if (dir != null && dir.isDirectory()) {
            deleteDir(dir);
         }
      } catch (Exception e) {
         // TODO: handle exception
      }
   }

   public static boolean deleteDir(File dir) {
      if (dir != null && dir.isDirectory()) {
         String[] children = dir.list();
         for (int i = 0; i < children.length; i++) {
            boolean success = deleteDir(new File(dir, children[i]));
            if (!success) {
               return false;
            }
         }
      }

      // The directory is now empty so delete it
      return dir.delete();
   }

} 
```

请参考这些链接 -

*   [如何通过代码清除应用程序的数据缓存](https://stackoverflow.com/questions/4553238/how-to-clear-data-cache-of-the-application-through-code)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-06-11T09:21:09.180

要清除应用程序数据请尝试这种方式。我认为它对你有帮助。

```
public void clearApplicationData() 
{
    File cache = getCacheDir();
    File appDir = new File(cache.getParent());
    if (appDir.exists()) {
        String[] children = appDir.list();
        for (String s : children) {
            if (!s.equals("lib")) {
                deleteDir(new File(appDir, s));Log.i("TAG", "**************** File /data/data/APP_PACKAGE/" + s + " DELETED *******************");
            }
        }
    }
}

public static boolean deleteDir(File dir) 
{
    if (dir != null &amp;&amp; dir.isDirectory()) {
        String[] children = dir.list();
        for (int i = 0; i < children.length; i++) {
            boolean success = deleteDir(new File(dir, children[i]));
            if (!success) {
                return false;
            }
        }
    }
    return dir.delete();
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-12-24T22:07:19.050

只是澄清一下，答案可以正常工作，除非您必须将 Application 上下文传递给***trimCache***而不是 Activity 上下文（以避免内存泄漏），因为***trimCache***是一种静态方法。

```
 @Override
   protected void onDestroy() {
      super.onDestroy();
      try {
         trimCache(getApplicationContext()); //if trimCache is static
      } catch (Exception e) {
        e.printStackTrace();
      }
 } 
```

但是，否则，您可以将***trimCache 设为***非静态，并且无需传递任何 Context。

```
public void trimCache() {
   try {
     File dir = getCacheDir();
     if (dir != null && dir.isDirectory()) {
        deleteDir(dir);
     }
  } catch (Exception e) {
     // TODO: handle exception
  }
} 
```

# objective-c - writeToFile 给出 NSUnderlyingError=0x6a3d450 “操作无法完成。是一个目录”

> ID：10977295
> 
> 赞同：2
> 
> 时间：2012-06-11T09:17:23.607
> 
> 标签：objective-c, ios, cocoa, grand-central-dispatch, writetofile

我正在尝试将文件写入 GCD 中的路径，但它不起作用。不断收到错误“NSUnderlyingError=0x6a3d450”操作无法完成。是目录”

```
dispatch_queue_t downloadQueue = dispatch_queue_create("flickr downloader", NO); 

dispatch_async(downloadQueue, ^{

    NSString* name = [photoDictionary valueForKey:@"title"];
    path = [path stringByAppendingPathComponent:id];

    if(![manager fileExistsAtPath:path]){
        if([manager createDirectoryAtPath: path withIntermediateDirectories:NO attributes:nil error:nil]){ //create intermediate directories
            data = [NSData dataWithContentsOfURL:[FlickrFetcher urlForPhoto:photoDictionary format:FlickrPhotoFormatOriginal]];  
            NSError *error = nil;
            BOOL success = [data writeToFile:path options:NSDataWritingAtomic error:&error];
            if (!success) {
                NSLog(@"Failed to write to file with error: %@", [error description]);
            }

            if([data writeToFile: path atomically:YES]){
                NSLog(@"data written to file");
            }   
        }
    }
    else{
        if([manager fileExistsAtPath:path]){
            data = [manager contentsAtPath:path];
        }
    }

    dispatch_async(dispatch_get_main_queue() , ^{
        sender.navigationItem.rightBarButtonItem = item;
        sender.photoData = data;
        sender.photoName = name; 
        //call the segue
        [sender performSegueWithIdentifier:segueTitle sender:sender];
    });       

});

dispatch_release(downloadQueue); 
```

我遇到的问题是 [data writeToFile: path atomically:YES] 永远不会执行。但是，确实创建了数据路径，当我“po data”时，程序有点挂起，所以我猜想在调用 writeToFile 时数据没有完全获取。但是我无法准确定位问题，也不知道如何解决。任何建议都将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T20:32:55.747

您的代码正在您尝试下一步创建文件的路径上创建一个目录。将其取出或创建父目录

# c++ - 排序列表 - 最好的方法

> ID：10977300
> 
> 赞同：1
> 
> 时间：2012-06-11T09:17:31.113
> 
> 标签：c++, list, sorting

我有一个清单

```
std::list<Selector> _selectorList; 
```

我确实解析了一些东西，我得到了一个智能指针和一个与智能指针相关的优先级。我实现了一个结构来保存这两个参数，如下所示。

```
struct Selector
{
    int priority;
    SmartPointer *selector;
} 
```

将进行 n 次解析，结果 n 结构实例将被推回列表中。最后，我应该根据结构中优先级变量的降序对列表进行排序。目前，我打算这样做。

```
_selectorList.sort(); 
```

如果我必须使用一个列表（仅此而已）来存储解析返回的智能指针，还有比这更好的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T09:33:50.263

就像 larsman 告诉你的那样，使用指向 SmartPointer 的指针很可能是错误的。由于智能指针用于避免内存泄漏，因此引用计数器在对象复制或分配时更新，因此 SmartPointer * 可能没用。

对于更好的方法，您可以重用 std::list::sort 而不是重新实现自己的排序操作。唯一要做的就是让您的 Selector 实现比较运算符，以便能够对您的列表进行排序。看看[这里](http://www.cplusplus.com/reference/algorithm/sort/)。

# android - RESTful 实现逻辑？

> ID：10977301
> 
> 赞同：0
> 
> 时间：2012-06-11T09:17:32.050
> 
> 标签：android, ajax, json, apache, rest

我有一个在线 mysql 数据库。我知道要从 android 应用程序连接到它，我需要使用 REST Web 服务。从我到现在的理解是，我必须使用 REST webservice + JSON 和 Jquery 来处理所有事情。但我不明白的事情是：

*   我需要在我的 mysql Web 主机域上进行任何编码吗？
*   这个 REST Web 服务需要在我的 android 应用程序中编码吗？
*   我是否需要一个 apache http 客户端，并且需要在我的应用程序或网络主机上进行编码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T09:29:47.640

您混淆了数据库访问、服务器端代码和 REST。

最好不要直接从客户端连接到数据库，尤其是“位置多样化”的数据库。

您的架构可能看起来像

Android 应用程序 ---HTTPS REST 动词 ---> 服务器上的 RESTful Web 服务，在 Apache、Tomcat 等上使用软管。 --- 数据访问，无论是通过 PDO、JDBC、JPA 还是其他方式 ---> mySQL。

RESTful 部分确实是可选的，如果你使用 URL，你可以调用任何你喜欢的东西。

# wpf - XAML - 子窗口的用户重新排序（基本上是可用于 XAML 的 jquery UI）

> ID：10977303
> 
> 赞同：0
> 
> 时间：2012-06-11T09:17:37.433
> 
> 标签：wpf, xaml, jquery-ui-sortable

我在 WPF 应用程序中有一个 Grid，它包含 3 个 groupbox，并且在它们之间有 grid-splitters。我想允许用户按照他的意愿重新排序这 3 个组框，因此允许将组框映射到 {left,center,right} 位置。

在 web 开发世界中，我会使用 jQuery UI sortable 来解决这个问题。

有什么可以解决WPF中网格的这个任务吗？或者任何其他提供相同功能的容器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T09:23:36.837

您可以在网格中创建 3 列，并通过更改`Grid.Column`附加属性对项目进行重新排序。您的初始 XAML 将如下所示：

```
<Grid>
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="Auto"/>
        <ColumnDefinition Width="Auto"/>
        <ColumnDefinition Width="Auto"/>
    </Grid.ColumnDefinitions>
    <Border Grid.Column="0"> <!-- contains 1st groupbox --> </Border>
    <Border Grid.Column="1"> <!-- contains 2nd groupbox --> </Border>
    <Border Grid.Column="2"> <!-- contains 3rd groupbox --> </Border>
</Grid> 
```

如果您需要通过拖放移动部件，则需要手动实现它，至少我不知道有任何框架允许它开箱即用。

# android - 在单个应用程序中使用多个地图视图

> ID：10977308
> 
> 赞同：1
> 
> 时间：2012-06-11T09:18:20.083
> 
> 标签：android, google-maps, android-mapview, android-tabhost

我的应用程序包含选项卡布局（TabHost，TabSpec）。
我在我的应用程序中使用了两个地图视图。因此，如果我在一个 map_activity 中启用卫星视图，然后转到另一个 map_activity，则其他地图也会显示在卫星视图中，如果我将一个 map_activity 拖向美国，则其他地图视图也会自动拖向美国，无论它之前指向哪里。

我一般来说，如果我们使用 android:process=":map1" 和 android:process=":map2" 在不同的进程中运行两个活动，那么我们可以解决上述问题。[我在这里](https://stackoverflow.com/a/3380655/1085742)提到......

但是我们如何在标签栏（TabHost，TabSpec）应用程序中解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T11:10:43.753

这不是一个完美的解决方案，但它会完成工作，整理一下。

在您需要地图视图的那些选项卡中，您可以在代码中创建它：

```
 mMapView = new MapView(this, MAPS_KEY);
    mMapView.setClickable(true);
    LayoutParams params = new LinearLayout.LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.WRAP_CONTENT);
    mMapView.setLayoutParams(params);
    FrameLayout mapFrame = (FrameLayout) findViewById(R.id.map_container);
    mapFrame.addView(mMapView); 
```

xml 是不言自明的（如果不只是请求）。

这种方法的问题在于，当 mapview 被实例化时，它会记住旧位置，因此您需要将地图移动到您希望它所在的新位置。可以这样做：

```
mMapView.getController().animateTo(location);
                        mMapView.getController().setZoom(GlobalValues.EMERGENCY_MAP_ZOOM_LVL); 
```

# java - 使用弱/软的 Guava CacheBuilder 或 MapMaker

> ID：10977315
> 
> 赞同：10
> 
> 时间：2012-06-11T09:18:38.087
> 
> 标签：java, caching, guava

我不习惯处理 Java 中的软引用和弱引用，但我理解这个原理，因为我习惯于处理像 Gemfire 这样的数据网格，当内存已满时，它会为 hdd 功能提供溢出，可能使用软引用或类似的东西猜测。

我在番石榴中不明白的是，它提供了使键变软/弱的方法，以及使值变软/弱的方法。

我只是想知道创建具有非软值的软键有什么意义？我的意思是，当开始收集软引用时，我们无法再通过它的键找到条目，那么为什么我们希望这些值保留在映射中呢？

有人可以给我们一些用例：

*   弱键/软值
*   弱键/正​​常值
*   软键/弱值
*   软键/正常值

谢谢

* * *

**编辑** 我不确定我的问题是否足够精确，所以我想知道的是：

*   收集密钥时（弱/软），值会发生什么（非弱/软）
*   当一个值被收集（弱/软）时，键会发生什么
*   缺少部分（键或值）的条目是否保留在缓存中？
*   当您希望此类条目保留在缓存中时，是否有任何用例。

* * *

**编辑：** 正如 Kevin Bourillon 的回答所讨论的，最后我想我明白为什么使用软键没有任何意义。原因如下：

```
static class KeyHolder {
    final private String key;
    public KeyHolder(String key) {
        this.key = key;
    }
    public String getKey() {
        return key;
    }
    @Override
    public boolean equals(Object o) {
        KeyHolder that = (KeyHolder)o;
        boolean equality = this.getKey().equals(that.getKey());
        return equality;
    }
    @Override
    public int hashCode() {
        return key != null ? key.hashCode() : 0;
    }
    @Override
    public String toString() {
        return "KeyHolder{" +
                "key='" + key + '\'' +
                '}';
    }
}

public static void main(String[] args) {
    System.out.println("TESTING WEAK KEYS");
    testMap( new MapMaker().weakKeys().<KeyHolder,String>makeMap() );

    System.out.println("\n\n");
    System.out.println("TESTING SOFT KEYS");
    testMap(new MapMaker().softKeys().<KeyHolder, String>makeMap());

    System.out.println("\n\n");
    System.out.println("TESTING SOFT REFERENCES");
    KeyHolder key1 = new KeyHolder("toto");
    KeyHolder key2 = new KeyHolder("toto");
    SoftReference<KeyHolder> softRef1 = new SoftReference<KeyHolder>(key1);
    SoftReference<KeyHolder> softRef2 = new SoftReference<KeyHolder>(key2);
    System.out.println( "equals keys? " + key1.equals(key2) );
    System.out.println( "equals ref? " + softRef1.equals(softRef2) );
}

private static void testMap(Map<KeyHolder,String> map) {
    KeyHolder strongRefKey = new KeyHolder("toto");
    KeyHolder noStrongRefKey = new KeyHolder("tata");
    map.put(strongRefKey,"strongRef");
    map.put(noStrongRefKey,"noStrongRefKey");
    // we replace the strong reference by another key instance which is equals
    // this could happen for exemple in case of serialization/deserialization of the key
    noStrongRefKey = new KeyHolder("tata");
    System.gc();
    System.out.println( "strongRefKey = " + map.get(strongRefKey) );
    System.out.println( "noStrongRefKey = " + map.get(noStrongRefKey) );
    System.out.println( "keyset = " + map.keySet() );
} 
```

此代码产生输出：

```
TESTING WEAK KEYS
strongRefKey = strongRef
noStrongRefKey = null
keyset = [KeyHolder{key='toto'}]

TESTING SOFT KEYS
strongRefKey = strongRef
noStrongRefKey = null
keyset = [KeyHolder{key='tata'}, KeyHolder{key='toto'}]

TESTING SOFT REFERENCES
toto == toto -> true
equals keys? true
equals ref? false 
```

如您所见，对于（已弃用）软键映射，包含“tata”的 KeyHolder 仍然存在于映射中。但是请注意，我仍然无法使用新创建的键“ `new KeyHolder("tata");`” 找到我的条目**这是因为，我的键有意义地等于，但它们周围的引用包装器不等于，因为它们的等于方法在 Guava 中没有被覆盖！** 在这种情况下，是的，softKeys 没有任何意义，因为您绝对需要保留对该密钥的身份引用才能检索它。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-11T14:55:41.237

`softKeys`从来没有意义，所以我们删除了该方法。`softValues`是软引用有意义的唯一方法，假设值实例也不能以缓存之外的其他方式访问。

然后使用`weakKeys`基本上归结为您是否想要密钥的身份平等。如果键覆盖`equals`并且您需要*该*相等行为，则不能使用它。如果您想要身份，那么`weakKeys`您就是如何获得身份的，这也是有道理的，因为一旦对密钥的所有其他引用都已被 GC 处理，则无论如何都无法查找该条目，因此不妨将其删除.

I actually am not entirely clear on when `weakValues` is useful, and was going to look into it. It would probably be a case where `weakKeys` is not an option (say, `Integer` keys), and where the values are ordinarily strongly referenced through other means, like some sort of session object, but when *that* object goes away, it signifies that no one will be looking for this in the cache anymore. It seems slightly farfetched when I put it that way, though.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T09:33:41.103

非 Guava WeakHashMap 基于弱键并在不再使用键时丢弃整个条目。因此，没有“留在地图中的价值”。这是我从这种数据结构中直观地期望的那种行为，我强烈怀疑 Guava 的行为方式相同，对于收集的软引用也是如此。

请注意，Java Collections 库仅提供弱键/正常值映射，而不是弱键/软值或弱键/弱值，因为用户可以自己包装值（但不能像在不应该期望哈希图对实际键和对键的弱引用以相同的方式工作）。

我自己曾经使用过 WeakHashMap 将可能被其他地方的机制过时的对象与与该机制无关的信息关联起来（准确地说：可能被某些碰撞破坏的移动球与其最近运动的信息）。这些值是专门为该映射创建的，而不是在其他地方引用（除了在本地方法中，只能在它们的键仍然存在时调用）。因此，除了对值的正常引用之外，没有必要使用任何东西，因为当键过时时，该值将变为未引用且可被垃圾回收。

# graphics - 如何将 XBMC 与帧缓冲区一起使用？

> ID：10977318
> 
> 赞同：4
> 
> 时间：2012-06-11T09:18:42.630
> 
> 标签：graphics, framebuffer, xbmc

我们为带有英特尔显卡的机顶盒主板交叉编译了 XBMC。当我运行 XBMC 时，我们收到以下错误：

10:20:09 T:3053991728 M:527937536 错误：CXRandR::Query - 无法打开 xrandr xml 10:20:09 T:3053991728 M:527945728 注意：设置 SDL 10:20:09 T:3053991728 M:529735680 致命: XBAppEx: 无法初始化 SDL: DirectFBCreate: 初始化错误！

我确实有所有相关的库，并且通过 LD_LIBRARY_PATH 链接了相同的库，有人知道如何配置 XBMC 以使用 FrameBuffers。

在这方面的任何快速帮助都会有很大帮助。

提前致谢，

# cordova - 与本机代码的电话差距

> ID：10977320
> 
> 赞同：0
> 
> 时间：2012-06-11T09:18:52.660
> 
> 标签：cordova, cross-platform

我从 PhoneGap 开始，并完全在 Phonegap 中构建了一个简单的应用程序 - HTML5 和 JS。

我的问题是 -
**1.**我可以组合两个“子应用程序” - 一个用 PhoneGap 编写，另一个用本机编写，并将其组合到 1 个应用程序中。
**2.**是否可以说应用程序中的 1 个屏幕是使用本机代码（我们在 Android 中编写的 XML）和 PhoneGap（HTML5）中的其他屏幕完成的？

我该怎么做这些？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T10:17:57.253

Cordova (PhoneGap) 上的当前版本仅支持 iOS。将支持在 Android 上执行此操作，但我不知道它将在哪个版本中发布。

***编辑***

iOS 文档 - [https://github.com/apache/incubator-cordova-ios/blob/master/guides/How%20to%20Use%20Cordova%20as%20a%20Component.md](https://github.com/apache/incubator-cordova-ios/blob/master/guides/How%20to%20Use%20Cordova%20as%20a%20Component.md)

Android - [http://mail-archives.apache.org/mod_mbox/incubator-callback-commits/201205.mbox/%3C20120516183628.9B15F163EE@tyr.zones.apache.org%3E](http://mail-archives.apache.org/mod_mbox/incubator-callback-commits/201205.mbox/%3C20120516183628.9B15F163EE@tyr.zones.apache.org%3E)

此邮件列表帖子讨论了从 v1.8 开始的 Android 功能，该功能现已发布。

# c# - TextBox 对齐文本

> ID：10977322
> 
> 赞同：3
> 
> 时间：2012-06-11T09:19:06.810
> 
> 标签：c#, textbox, justify

是否可以在 TextBox 中**对齐**（而不是居中）文本？我知道

```
txt.TextAlign = HorizontalAlignment.Left; 
```

例如，但是否可以左右证明它的合理性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T11:35:34.337

我认为 OP 的目的是这个[http://en.wikipedia.org/wiki/Justification_(typesetting](http://en.wikipedia.org/wiki/Justification_(typesetting) ) 然后在这个标题下查看

> 对齐（左右齐平）

恐怕没有简单的方法可以做到这一点。您需要按照 Damith 的建议为它创建一个自定义控件，即使这样也不容易，因为每次输入一个字母时，您的文本间距都会缩小并且看起来很有趣。如果您想做一个只读文本框，可以这样做，但是如果您希望用户向其中添加文本......我认为您需要一个真正的充分理由来花时间来实现这一点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T21:07:46.777

这是一个滑坡，正如已经指出的那样，确实需要自定义控件。但是，如果您像我一样只想显示文本框数据，例如在 About Box 或其他对话框中，则可以通过使用 PictureBox 并将其呈现给它，同时保持实际文本框隐藏。需要用特殊代码替换空格以指示间距的像素宽度。作为数十个打印机驱动程序的老手，这对我来说已经是老生常谈了。我将在下面提供执行此操作的代码，但我不确定它在此网页上的呈现效果如何。也许他们可以重新格式化它，或者如果他们要求，我会将直接代码发送给他们。虽然我是一名汇编程序和 C/C++ 开发人员，但我已经爱上了 VB.NET 并用 VB 编写了它（我可以在两个小时内编写过去用 C++ 需要两周时间的东西）。

要使用这个由 JustifyTextBox() 方法和 JustifyText_Paint() 事件组成的代码，只需将所需的 TextBox 放置在所需的位置并将其格式化。然后通过向它提供您的文本框来调用 JustifyTextBox() 方法，例如 JustifyTextBox(Me.MyTextBox)，然后您就可以进入 rwaces 了。它负责所有 PictureBox 对象的创建和绘画工作。您可以根据需要将其应用于任意数量的文本框。它不依赖于一个对象（这会在很多方面击败面向对象的范式）。

以下是所需的两种方法：

```
'*******************************************************************************
' Method Name : JustifyTextBox
' Copyright (c) David Ross GOben March 10, 2013\. All rights reserved.
'
' Purpose     : Reformat spacing in a textbox to allow for variable spacing, exactly
'             : as a printer driver will process spacing for justification.
'             : Having written many dozens of printer drivers over the years, this
'             : is old hat. By the way, though you can do this with a RichTextBox,
'             : you really should consider interpreting the RTF code to properly
'             : render everything else, otherwise, if you were to simply replace
'             : the TextBox casting to a RichTextBox, it would only process the
'             : data from its Text property, so pretty text and coloring and font
'             : typeface, size, and enhancements will not display in the PictureBox.
'*******************************************************************************
' Set up your code to use the JustifyTextBox() method and the JustifyText_Paint() event like this:
'
'    JustifyTextBox(TextBoxObjectToJustify)    'create a PictureBox control to justify the text, and hide this TextBox
'                                              'This will also link the created PictureBox's Paint() event to JustifyText_Paint
'-------------------------------------------------------------------------------
' NOTE: You can duplicate the above code for as many text boxes as you require.
'       Also, there is no need to render them ReadOnly, because the user will not
'       be able to access them through the user itnerface.
'*******************************************************************************
Private Sub JustifyTextBox(ByRef TxtBox As TextBox)
    Dim picImage As PictureBox = New PictureBox                             'create a PictureBox object (The textBox data will be painted to this)
    With picImage
        .Location = TxtBox.Location                                         'locate the PictureBox to the provided TextBox control
        .Size = TxtBox.Size                                                 'size it to the textbox boundaries
        .Tag = TxtBox                                                       'save a reference to the textbox for use during printing
        .Parent = TxtBox.Parent                                             'set parent so it will display when the parent is displayed
        AddHandler picImage.Paint, AddressOf JustifyText_Paint              'attach an event handler to the picture box's paint event
        TxtBox.Visible = False                                              'render the associated textbox invisible
    End With
    '=======================================================================
    With TxtBox
        Dim TextSize As Size = TextRenderer.MeasureText("W y", .Font)       'get pixel width of "W y"
        Dim Yinc As Int32 = TextSize.Height                                 'get vertical spacing to increment lines
        Dim SpcSize As Int32 = TextSize.Width                               'save measurement (we will adust the Space Size variable property in a second)
        TextSize = TextRenderer.MeasureText("Wy", .Font)                    'get pixel width of "Wy", without the space
        SpcSize = SpcSize - TextSize.Width - 1                              'compute the width of a space (drop 1 more for proper rendering)
        Dim SpcInit As Int32 = 128 + SpcSize                                'initial size of space and ecoding of space codes (spacing size + 128)

        Dim CurlineIdx, NxtLineIdx, cAsc As Int32                           'used variables
        Dim LastLine As Int32 = .GetLineFromCharIndex(Len(.Text))           'get the last line index of the TextBox, offset from zero

        Dim Result As String = Nothing                                      'init encoded result
        Dim Txt As String = Nothing                                         'string to hold each line of text in the TextBox
        Dim Tmptext As String                                               'copy of Txt that is altered

        For Idx As Int32 = 0 To LastLine                                    'process each line (offset from 0)
            CurlineIdx = .GetFirstCharIndexFromLine(Idx)                    'get start of the indicated line number line
            If Idx = LastLine Then                                          'at the last line of text data in the TextBox (if so, we do not need to justify it?
                Txt = RTrim(.Text.Substring(CurlineIdx))                    'yes, so simply grab the text of the line from the start character index to the end of the text data
                Tmptext = Txt                                               'make a copy to TmpText
            Else                                                            'otherwise... grab the current line of text from the TextBox
                NxtLineIdx = .GetFirstCharIndexFromLine(Idx + 1)            'not the last line, so get the index to the start of the next line
                Txt = RTrim(.Text.Substring(CurlineIdx, NxtLineIdx - CurlineIdx)) 'grab the text of the current line. Also remove any trailing spaces
                If Len(Txt) <> 0 AndAlso VB.Right(Txt, 2) = vbCrLf Then     'does the current line end with CR/LF?
                    Tmptext = RTrim(VB.Left(Txt, Len(Txt) - 2))             'yes, so strip CR/LF and strip any spaced leading them. There is no need to justify this line
                ElseIf Len(Txt) = 0 Then                                    'otherwise, if the text notains NO data...
                    Tmptext = Nothing                                       'then simply make the line blank and do nothing else
                Else                                                        'otherwise... we have to encode the line to justify it
                    Tmptext = Txt                                           'get a copy of this string, which we will use to encode
                    TextSize = TextRenderer.MeasureText(Tmptext, .Font)     'get its current size
                    Dim SpcNeeded As Int32 = .Width - TextSize.Width        'compute number of pixels to add
                    If SpcNeeded > 0 Then                                   'do we need to add spacing? (allow for negative result)
                        Tmptext = Join(Split(Tmptext, " "), Chr(SpcInit))   'yes, so first replace spaces with special code for point-size spacing
                        Dim Idy As Int32 = 1                                'init column start index (used to skip over leading spaces)
                        Do While Asc(Mid(Tmptext, Idy, 1)) > 127
                            Idy += 1                                        'skip past leading spaces (indent)
                        Loop
                        '---------------------------------------------------
                        Dim AddedSpacing As Boolean = False                 'set up a flag to deterct if we added any spacing to the line
                        Do While SpcNeeded <> 0                             'now loop through and add a pixel to each space in the text until there are none left to add
                            For Idz As Int32 = Idy To Len(Tmptext)          'scan through line data
                                cAsc = Asc(Mid(Tmptext, Idz, 1))            'get code
                                If cAsc > 127 Then                          'special space character?
                                    cAsc += 1                               'add 1 pixel to its size
                                    Mid(Tmptext, Idz, 1) = Chr(cAsc)        'stuff result back
                                    AddedSpacing = True
                                    SpcNeeded -= 1                          'drop 1 from count of spacing needed
                                    If SpcNeeded = 0 Then                   'have we added all the spaces we need?
                                        Exit For                            'yes, so do not add any more
                                    End If
                                End If
                            Next
                            If Not AddedSpacing Then                        'if we could not add any space...
                                Exit Do                                     'then exit the loop
                            End If
                            AddedSpacing = False
                            '-----------------------------------------------
                        Loop                                                'loop through the line again to add additional spacing
                    End If
                End If
            End If
            '---------------------------------------------------------------
            Result &= vbCrLf & Tmptext                                      'add TmpText data, manipulated or not, to the Result accumulator string
        Next                                                                'process the next line of code
        .Text = Mid(Result, 3)                                              'stuff the result back to the TextBox for storage, less the leading CR+LF
    End With
End Sub

'*******************************************************************************
' Method Name : JustifyText_Paint
' Purpose     : Draw text from a textbox onto a PictureBox control (created in the
'             : setup code), using special spacing codes inserted by JustifyTextBox().
'             :
' NOTE        : A reference to the associated Textbox is stored in the PictureBox's Tag property
'*******************************************************************************
' NOTE: You may notice that we seem to add 1 pixel to the width of the space character,
'       below, but we subtracted 1 pixel in the the JustifyTextBox() method. This is
'       originally subtracting 1\. It also allows the right margin to reamin at its
'       straightest. I realize that this actually has to do something with the margins
'       applied in the TextRender.MeasureText() process, and even though I have tried to
'       set theTextFormatFlags to NoPadding and in various other ways, and even none
'       at all (as it is now), it dors not make one bit of difference, at all. However,
'       on average, with or without using the TextFormatFlags, if we subtract a pixel from
'       the space size and subtract 6 (typical margin of 3 pixels on either side) from
'       measuring each word, the alignment is about perfect. However, a side effect is
'       that some long words seem to almost butt up against a fllowing word. A hack around
'       that is to simply manually insert an extra space between these words in the textbox.
'*******************************************************************************
Private Sub JustifyText_Paint(sender As Object, e As PaintEventArgs)
    With DirectCast(DirectCast(sender, PictureBox).Tag, TextBox)
        Dim TextSize As Size = TextRenderer.MeasureText("X y", .Font)               'get size of sample text
        Dim Yinc As Single = CSng(TextSize.Height)                                  'keep height for adding lines in the picturebox
        Dim SpcSize As Single = CSng(TextSize.Width)                                'save the length result
        TextSize = TextRenderer.MeasureText("Xy", .Font)                            'grab the same text, but without the space (drop 1 more for proper rendering)
        SpcSize = SpcSize - CSng(TextSize.Width + 1)                                'compute space width (we are actually subtracting an addtional pixel)
        Dim txtMargin As Single = CSng(.Margin.Left + .Margin.Right)                'compute the margin allowance (MeasureText adds this to the width)
        Dim PosnX As Single = CSng(e.ClipRectangle.Left)                            'start postion to draw text in the picturebox
        Dim PosnY As Single = CSng(e.ClipRectangle.Top)

        Dim Tmptxt As String = Nothing                                              'init temporary text holder
        Dim Brsh As New SolidBrush(.ForeColor)                                      'get the brush for the text color to use from the textbox
        For Idx As Int32 = 1 To Len(.Text)                                          'scan each character in the master text
            Dim iChar As Int32 = Asc(Mid(.Text, Idx, 1))                            'grab the cascii code for the currently indexed character
            Select Case iChar
                Case Is > 127                                                       'special spacing character?
                    If Len(Tmptxt) <> 0 Then                                        'yes, so dump the temp text if it has accumulated data
                        TextSize = TextRenderer.MeasureText(Tmptxt, .Font)          'first grab the size of the text
                        e.Graphics.DrawString(Tmptxt, .Font, Brsh, PosnX, PosnY)    'then draw it
                        PosnX += CSng(TextSize.Width - txtMargin)                   'then bump the x offset, less the margin allowance
                        Tmptxt = Nothing                                            'clear the temp text buffer
                    End If
                    PosnX += CSng((iChar And 127))                                  'finally, bump the x offset by the spaceing code (pixel count + 128)
                Case 13                                                             'vbCr?
                    If Len(Tmptxt) <> 0 Then                                        'yes, so dump the temp text if it has accumulated data
                        e.Graphics.DrawString(Tmptxt, .Font, Brsh, PosnX, PosnY)    'then draw it
                        Tmptxt = Nothing                                            'clear the temp text buffer
                    End If
                    PosnX = CSng(e.ClipRectangle.Left)                              'reset the X offset to the left side
                    PosnY += Yinc                                                   'bump the line index to the next line position
                Case 32                                                             'Space?
                    If Len(Tmptxt) <> 0 Then                                        'yes, so dump the temp text if it has accumulated data
                        TextSize = TextRenderer.MeasureText(Tmptxt, .Font)          'first grab the size of the text
                        e.Graphics.DrawString(Tmptxt, .Font, Brsh, PosnX, PosnY)    'then draw it
                        PosnX += CSng(TextSize.Width - txtMargin)                   'then bump the x offset, less the margin allowance
                        Tmptxt = Nothing                                            'clear the temp text buffer
                    End If
                    PosnX += SpcSize                                                'bump index by a space size
                Case 10                                                             'vbLf? If so, ignore it
                Case Else                                                           'normal character
                    Tmptxt &= Chr(iChar)                                            'add the character to the temp text buffer
            End Select
        Next

        If Len(Tmptxt) <> 0 Then                                                    'dump the temp text if it has accumulated data
            e.Graphics.DrawString(Tmptxt, .Font, Brsh, PosnX, PosnY)                'then draw it
        End If
        Brsh.Dispose()                                                              'finally, dispose of the used brush resource
    End With
End Sub 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T09:41:45.847

可以给中心对齐以在左和右对齐

```
textBox1.TextAlign = HorizontalAlignment.Center; 
```

# c# - 当应用程序未在 UserInteractive 模式下运行时显示模式对话框或表单

> ID：10977323
> 
> 赞同：0
> 
> 时间：2012-06-11T09:19:08.633
> 
> 标签：c#, asp.net

大家好，当我的网站处于活动状态时尝试显示打印预览对话框时出现此错误

```
PrintPreviewDialog ppdlg = new PrintPreviewDialog();

ppdlg.ShowDialog(); 
```

我该如何解决这个错误

完全错误

`Showing a modal dialog box or form when the application is not running in UserInteractive mode is not a valid operation. Specify the ServiceNotification or DefaultDesktopOnly style to display a notification from a service application.`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T09:26:01.857

在 asp.Net 中，您不能使用 PrintPreviewDialog 类，因为它是 windows 窗体的一部分。asp.net 代码在服务器端运行。

如果你想用 asp.net 弹出一个打印对话框，你必须在客户端做。

这可以通过结合用于打印的自定义 css 和一些 javascript 来实现。这是一个很好的起点：[http ://www.javascriptkit.com/dhtmltutors/cssmedia.shtml](http://www.javascriptkit.com/dhtmltutors/cssmedia.shtml)

# php - 如果visit_date <今天的日期php mysql，则更新“状态”单元格

> ID：10977324
> 
> 赞同：0
> 
> 时间：2012-06-11T09:19:11.177
> 
> 标签：php, mysql

我有一个包含度假目的地的表格，其中包含一个 visit_date 列和一个状态列。访问日期是他们计划去/或去过该目的地的时间。当这些假期被插入数据库时​​，我写了这个来确定人们是否正在或已经在这次旅行中。

```
$date = $_POST['date']; 
$today = date("Y/m/d");  

if($date<$today){
$status="been";
}else{
$status="going";
} 
```

但是我需要做的是编写一个在插入之后运行的脚本，以更新旧假期计划的状态，如果 visit_date 小于今天的日期，如昨天、上周等。

这就是我到目前为止所拥有的

```
$result = mysql_query("SELECT * FROM trips");

while($row = mysql_fetch_array($result))
  {
  //echo $row['visit_date'];

  if ($row['visit_date'] < $today){
      echo "this trip has already happened";
      //code to update status if trip already happened

  }
  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T09:27:40.950

你可以做：

```
UPDATE trips
SET status = 'been'
WHERE status = 'going' AND visit_date < NOW() 
```

但你知道什么会更好吗？摆脱`status`柱子。然后，每当您需要选择行程并想了解其状态时，请使用`IF`如下条件语句：

```
SELECT
    trip_id,
    IF(visit_date < NOW(), 'been', 'going') AS status,
    ...
FROM trips 
```

# php - 来自csv的键值数组，电子表格中只有两列

> ID：10977325
> 
> 赞同：0
> 
> 时间：2012-06-11T09:19:11.800
> 
> 标签：php, csv

我有一个用 Open Office 电子表格生成的 csv，分隔符是逗号，文本包装器是“。

我只想列在我的电子表格中，因为它是一些键值列表，例如：

```
a -> b
aa -> bb
aaa -> bbb 
```

所以我的电子表格只有两列，每一行包含一个键值对，一个单元格中的每个键，一个单元格中的每个值。但是当我使用

```
if ($_FILES ['userfile'] ['error'] == UPLOAD_ERR_OK &&
    is_uploaded_file ( $_FILES ['userfile'] ['tmp_name'] )) {

        $csvfile = file_get_contents ( $_FILES ['userfile'] ['tmp_name'] );
    }

    $dict = str_getcsv($csvfile); 
```

然后 var_dump $dict ，我得到

```
array(4) { [0]=> string(1) "a" [1]=> string(6) "b "aa"" [2]=> 
            string(8) "bb "aaa"" [3]=> string(3) "bbb" } 
```

请参阅索引 1，其中第一个值“b”和第二个键“aa”存储在一个索引中。

OpenOffice 在值后面没有逗号，也就是在新行之前。如何避免两个字符串出现在一个索引中？我可以以某种方式告诉 str_getcsv，当两个“彼此跟随时，它也是一个分隔符？或者我可以添加始终包含 # 的第三列并说“如果它包含 #，它是一个换行符？（我试过了，但无法管理..）或者甚至有一个函数，它需要 csv 中的键、值、换行符？

这样做的正确方法是什么？我敢肯定人们经常这样做，但我不知道如何用谷歌搜索它。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T09:24:52.250

怎么用`fgetcsv()`？ [http://www.php.net/manual/en/function.fgetcsv.php](http://www.php.net/manual/en/function.fgetcsv.php)

它逐行读取，链接中有一个示例。

# java - java-处理xml并修改它以创建新的xml

> ID：10977331
> 
> 赞同：0
> 
> 时间：2012-06-11T09:19:27.853
> 
> 标签：java, xml, parsing

在我正在开发的 java 应用程序中，需要获取现有的 XML，然后对该 xml 进行更改，并提供原始和新的 xml 作为输出。

您推荐哪种解析器，以便它使用最少的内存？我可以在哪里执行以下操作 -

(a) 轻松获取 xml 的一部分，并将其插入到同一 XML 中的另一个位置？

(b) 更改部分 xml 中的一些属性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T09:26:27.840

如果文档很大，您可以查看 SAX，否则只需使用[dom4j](http://dom4j.sourceforge.net/)之类的 DOM 解析器为例。

使用任何 DOM 解析器，您都可以复制一个节点并将其附加到文档树的其他位置。

例如使用 dom4j，您可以使用它[`Element.createCopy`](http://dom4j.sourceforge.net/dom4j-1.6.1/apidocs/org/dom4j/Element.html#createCopy%28%29)来复制元素，并将其添加到其他地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T09:48:03.223

这是一个庞大的 Java 解析器列表供您选择。他们中的大多数都有能力做你需要的——XML解析、选择/过滤/复制/移动节点、修改属性、XML文件读/写能力等。每个都有自己的优点缺点——主要的选择标准是速度和表现：

[JDOM](http://www.jdom.org/)
[XMLBeans](http://xmlbeans.apache.org/)
[Xerces](http://xml.apache.org/xerces-j/)
[Apache Betwixt](http://commons.apache.org/betwixt/)
[XStream](http://xstream.codehaus.org/)
[StAX](http://stax.codehaus.org/)
[JAXB](https://jaxb.dev.java.net/)
[XP 解析器](http://www.jclark.com/xml/xp/index.html)
[kXML](http://kobjects.org/kxml/index.php)
[JiBX：将 XML 绑定到 Java 代码](http://jibx.sourceforge.net/)
[woodstox](http://woodstox.codehaus.org/)
[VTD-XML 1.5](http://vtd-xml.sf.net)
[Zeus](http://zeus.objectweb.org/)
[Skaringa](http://skaringa.sourceforge.net/)
[Lycia](http://code.google.com/p/lycia/)
[Piccolo XML 解析器](http://piccolo.sourceforge.net/)
[NanoXML](http://nanoxml.cyberelf.be/)
[NekoPull](http://www.apache.org/~andyc/neko/doc/pull/index.html)
[XOM](http://www.cafeconleche.org/XOM/)
[dom4j](http://www.dom4j.org/guide.html)
[Jakarta Commons Digester](http://jakarta.apache.org/commons/digester/)
[JOX](http://www.wutka.com/jox.html)
[KBML](http://koala.ilog.fr/kbml/)
[X2JB](http://x2jb.sourceforge.net/)
[Staxmate](http://staxmate.codehaus.org/)

Ref1：http: [//java-source.net/open-source/xml-parsers](http://java-source.net/open-source/xml-parsers)

Ref2：[Java 的最佳 XML 解析器](https://stackoverflow.com/questions/373833/best-xml-parser-for-java)

# mysql - 将乐高设计与零件和零件数量相匹配的 SQL 查询

> ID：10977332
> 
> 赞同：4
> 
> 时间：2012-06-11T09:19:29.320
> 
> 标签：mysql, sql

我正在尝试找到最快/不太复杂的方法来获得以下问题的结果。

我有一个（例如）乐高套件的数据库，其中每个套件都有一个描述和所需的乐高部件列表以及它们的数量。用户可以插入他的乐高积木集合，然后询问他可以用他的积木构建什么套件，如果他购买其他积木，他还可以积木什么（也许第一个限制是他只能购买一种类型的积木）。

我所拥有的大致是这样的：

```
LegoDesign
- id
- name

LegoBlock
- id
- type
- weight
- description

LegoBlockForDesign
- LegoDesign.id
- LegoBlock.id
- numberOfPiecesNeeded

Collection
(- User.id)
- LegoBlock.id
- quantityAvailable 
```

例如，数据库包含用于 StarWar 的死星的 LegoDesign。LegoBlock 包含一长串“2x2 黑色方块”或“小轮子”等。LegoBlockForDesign 将 LegoBlocks 分配给死星的 LegoDesign（例如 1000 个“2x2 黑色方块”）。Table 集合包含用户拥有的部分。现在这里的问题是我必须使用用户拥有的部件查询设计，这意味着首先检查 LegoBlock.id 然后检查 numberOfPiecesNeeded 因为我可以有一些 2x2 黑色方块但不足以构建死亡星星。这是第一个查询。第二个应该检查包含我拥有的块以及我的收藏中没有的一些块的设计。这意味着我应该检查我拥有但数量少于正确数量的乐高积木，以及没有我拥有的积木的设计。后者需要一个可以手动设置的限制。我正在考虑让用户在购买件数的限制（即最多 30 件）或件件的难度限制（即没有“特殊块”可购买，例如仅存在一些特殊的轮子或角色）之间进行选择在特定的设计中（例如星球大战的角色）。

我不完全确定它可以在 SQL 中完成，特别是因为我必须检查数量而不仅仅是块的存在。

编辑：我添加了 LegoBlock.type 和 LegoBlock.weight。这样我可以定义 type = common,rare,unique 来定义普通或特定的部分（比如可以定义为稀有的星球大战角色。我不想购买这些作品，因为它们只能用于星球大战'设计）。重量可以用来优先考虑（我喜欢蓝色，所以我更愿意看到我必须购买蓝色件的设计）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T10:02:44.567

试试这个查询......这将为您提供乐高设计，其中用户拥有所有积木和积木数量：

```
SELECT
    c.id, c.name
FROM
    Collection a
INNER JOIN
    LegoBlockForDesign b ON 
        a.LegoBlock.id = b.LegoBlock.id AND
        a.quantityAvailable >= b.numberOfPiecesNeeded
INNER JOIN
    LegoDesign c ON b.LegoDesign.id = c.id
INNER JOIN
    (
        SELECT LegoDesign.id, COUNT(1) AS totalneeded
        FROM LegoBlockForDesign
        GROUP BY LegoDesign.id
    ) d ON c.id = d.LegoDesign.id
WHERE
    a.User.id = <userid here>
GROUP BY
    c.id, c.name, d.totalneeded
HAVING 
    COUNT(1) = d.totalneeded 
```

**编辑 2：**此查询将检索用户可以根据他们当前的集合构建的所有设计以及希望购买它们的用户选择的其他乐高积木：

```
SELECT 
    a.id, a.name
FROM
    (
        SELECT
            c.id, c.name, NULL AS notInCollection
        FROM
            Collection a
        INNER JOIN
            LegoBlockForDesign b ON a.LegoBlock.id = b.LegoBlock.id
        INNER JOIN
            LegoDesign c ON b.LegoDesign.id = c.id
        WHERE
            a.quantityAvailable >= b.numberOfPiecesNeeded AND
            a.User.id = <userid here>
        UNION ALL
        SELECT
            d.id, d.name, 1 AS notInCollection
        FROM
            LegoDesign d
        INNER JOIN
            LegoBlockForDesign e ON d.id = e.LegoDesign.id
        WHERE
            e.LegoBlock.id IN (<comma sepd list of legoblockids here>)
    ) a
INNER JOIN
    (
        SELECT LegoDesign.id, COUNT(1) AS totalneeded
        FROM LegoBlockForDesign
        GROUP BY LegoDesign.id
    ) b ON a.id = b.LegoDesign.id
GROUP BY 
    a.id, a.name, b.totalneeded
HAVING 
    COUNT(1) = b.totalneeded AND 
    COUNT(a.notInCollection) > 0 
```

`UNION ALL`代表包含那些特定选定块的设计的行上的基本大头钉，以便`HAVING COUNT(*)`外部可以考虑它们。`notInCollection`FROM 子选择中的字段是一个标志，指示该部件是否已经在用户的收藏中......因此`HAVING COUNT(f.notInCollection) > 0`不包括用户已经在他/她的收藏中拥有所有部件的设计。`NOT IN (<1st query as subquery>)`这比做你也可以做的要高效得多。

该查询假定用户先前已呈现并且只能从他/她还没有的乐高块列表中进行选择，否则 UNION 中将出现重复，这将导致结果丢失。

您还可以输入一个乐高积木列表，以便用户可以选择多个乐高积木，以查看随着他们选择更多积木而可以构建的设计数量不断增加。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T09:33:24.117

**第一个查询。** 这将为您提供积木名称，以及所需部件与用户拥有的积木块类型之间的差异（如果用户有足够或超过需要，则为 0）。

如果您不想要所有详细信息，这可以用作子查询

```
select lbd.legoBlock_id, lb.Description, Greatest(lbd.NumberOfPiecesNeeded - Coalesce(c.quantityAvailable, 0), 0)
from legoBlockForDesign lbd
inner join LegoBlock lb on lb.Id = lbd.LegoBlock_id

left join Collection c on c.legoBlock_id = lbd.legoBlock_id
where lbd.LegoDesign_id = <the design id queried>
and c.User_Id = <the user id queried>
-- if you want only the blocks with missing quantity
--and Greatest(lbd.NumberOfPiecesNeeded - Coalesce(c.quantityAvailable, 0), 0) > 0 
```

第二个查询很难回答，因为我不知道您要使用哪些过滤器（“特殊块”没有出现在模型中，我假设它在 LegoBlock 表中，只需确认）。“丢失的件数”是什么意思？它是全局的（30 = 15 2*2 + 10 3*1 + 5 125*3）吗？

好吧，使用数量过滤器，您可以执行类似的操作

**第二次查询**

```
select ld.Id, ld.Description, Sum(Greatest(lbd.NumberOfPiecesNeeded - Coalesce(c.quantityAvailable, 0), 0)) missingPieces
from legoDesign ld
inner join LegoBlockDesign lbd on lbd.LegoDesign_Id = ld.Id
inner join LegoBlock lb on lb.Id = lbd.LegoBlock_id
left join Collection c on c.legoBlock_id = lbd.legoBlock_id
where c.User_Id = <the user id queried>
group by ld.Id, ld.Description
--Filter on quantity
-- having Sum(Greatest(lbd.NumberOfPiecesNeeded - Coalesce(c.quantityAvailable, 0), 0))<=30
--ORDER BY the "less missing pieces"
--ORDER BY Sum(Greatest(lbd.NumberOfPiecesNeeded - Coalesce(c.quantityAvailable, 0) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T17:07:54.647

第一个查询 - 通过查看设计中使用的块剩余 0 个或更多块的设计，我们可以得到用户可以从他的收藏中构建的设计。

```
 select design 
  from    (select lb.*, ld.id ,lbfd.numberOfPiecesNeeded numberOfPiecesNeeded,
                  ld.name design 
           from LegoDesign ld, LegoBlock lb ,LegoBlockForDesign lbfd 
           where ld.id=lbfd.id 
           and lb.id=lbfd.lbid ) a 
  left outer join Collection coll
        on coll.legoblock_id = a.legoblock_id 
        and coll.user_id=`<USER_ID> `
  group by a.legodesign_id 
  having min(coalesce(coll.quantityAvailable,0)-a.numberOfPiecesNeeded)>=0; 
```

对于第二个查询，`having`像这样更改子句`sum(a.numberOfPiecesNeeded-coalesce(coll.quantityAvailable,0)) between 1 and x`将给出设计，其中我们在完成设计所需的最大件数为 x 。我们可以将这些数据与 LegoBlockForDesign 和 Legoblock 在同一查询中加入，以获得每个单独的块数

# c++ - 使用循环整数定义变量：c++

> ID：10977336
> 
> 赞同：1
> 
> 时间：2012-06-11T09:19:50.390
> 
> 标签：c++

我有一个运行在`i`. 对于每次迭代，我希望它创建一个名称为的变量，`var_i`即如果我的循环运行`i=0`到`i=4`，它应该创建变量 ，如`var_0`、`var_1`、和。如何在 C++ 中做到这一点？`var_2``var_3``var_4`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T09:21:06.510

你不能，变量名必须在编译时知道。您不能在运行时创建新的变量名称。

**如果您的变量是连续的，则**另一种方法**是使用 a`std::map`或 a 。`std::vector`**

 **```
std::map<int,int> int_;
std::vector<int> vint_;
vint_.resize(5);
for ( int i = 0 ; i <= 4 ; i++ )
{
   int_[i] = i;
   vint_[i] = i;
} 
```

您的变量将是`int_[0]`or `vint_[0]`through `int_[4]`or `vint_[4]`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T09:21:13.640

您不能在运行时创建变量。改为使用`std:vector`，这样你会得到`var[0]`,`var[1]`等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-06-02T22:53:00.877

您还可以使用所需大小的数组并在循环中使用默认值对其进行初始化

```
int var[4];
for(int i=0; i < 4; i++){
    var[i] = 0;
} 
```**

# php - 如何使用 PHP gmdate 函数将 00:00:23 转换为 00:23

> ID：10977337
> 
> 赞同：0
> 
> 时间：2012-06-11T09:19:53.983
> 
> 标签：php

我有这段代码可以在我的应用程序中显示视频持续时间。

```
$duration = 23; // seconds
$duration = gmdate("H:i:s", $duration); 
```

上面的代码输出 00:00:23 但小时字段不是必需的，因为它只有 23 秒，我希望它显示 00:23 秒，例如，如果视频长度超过小时，它应该显示 01： 24:19

任何的想法？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T09:23:32.377

试试这个：

```
$duration = gmdate($duration >= 3600 ? 'H:i:s' : 'i:s', $duration); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T09:23:16.483

> 上面的代码输出 00:00:23 但小时字段不是必需的，因为它只有 23 秒，我希望它显示 00:23 秒，例如，如果视频长度超过小时，它应该显示 01： 24:19

一个简单的 if 怎么样？

```
<?php
$duration = $duration >= ( 60 * 60 ) ? gmdate( 'H:i:s', $duration ) : gmdate( 'i:s', $duration );
echo $duration; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T09:23:29.580

```
$duration = gmdate( ($duration >= 3600 ? "H:i:s" : "i:s"), $duration); 
```

# php - 执行sql语句时php中未定义的索引

> ID：10977344
> 
> 赞同：1
> 
> 时间：2012-06-11T09:20:26.087
> 
> 标签：php

在 php 中执行此查询时出现错误：

```
SELECT hit.timestamp, 
       hit.id, 
       config.Name, 
       hit.meter_id, 
       levels.LevelName, 
       pos.sm_pos, 
       hit.hit_value 
FROM   hit 
       INNER JOIN config 
               ON hit.id = config.id 
       INNER JOIN levels 
               ON hit.meter_id = levels.id 
       INNER JOIN POS 
               ON pos.id = hit.id 
       INNER JOIN controllers 
               ON pos.controller_id = controllers.id; 
```

问题是我在我的选择语句中的每一列上都得到了未定义的索引，除了第一个。拳头没有给我错误，它正常给我数据。其他人给出错误。

知道有什么问题吗？我需要改变什么？

[编辑：使用DataTables](http://datatables.net/development/server-side/php_mysql)脚本时使用此查询。使用此脚本时，完整的 php 代码是这样的：

```
<?php
    /*
     * Script:    DataTables server-side script for PHP and MySQL
     * Copyright: 2010 - Allan Jardine
     * License:   GPL v2 or BSD (3-point)
     */

    /* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
     * Easy set variables
     */

    /* Array of database columns which should be read and sent back to DataTables. Use a space where
     * you want to insert a non-database field (for example a counter or static image)
     */
    $aColumns = array( 'hit.timestamp','hit.id', 'config.Name', 'hit.meter_id','levels.LevelName','pos.sm_pos','hit.hit_value'  );

    /* Indexed column (used for fast and accurate table cardinality) */
    $sIndexColumn = "hit.id";

    /* DB table to use */
    $sTable = "hit 
       INNER JOIN config 
               ON hit.id = config.id 
       INNER JOIN levels 
               ON hit.meter_id = levels.id 
       INNER JOIN POS 
               ON pos.id = hit.id 
       INNER JOIN controllers 
               ON pos.controller_id = controllers.id";

    /* Database connection information */
    $gaSql['user']       = "";
    $gaSql['password']   = "";
    $gaSql['db']         = "";
    $gaSql['server']     = "localhost";

    /* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
     * If you just want to use the basic configuration for DataTables with PHP server-side, there is
     * no need to edit below this line
     */

    /* 
     * MySQL connection
     */
    $gaSql['link'] =  mysql_pconnect( $gaSql['server'], $gaSql['user'], $gaSql['password']  ) or
        die( 'Could not open connection to server' );

    mysql_select_db( $gaSql['db'], $gaSql['link'] ) or
        die( 'Could not select database '. $gaSql['db'] );

    /* 
     * Paging
     */
    $sLimit = "";
    if ( isset( $_GET['iDisplayStart'] ) && $_GET['iDisplayLength'] != '-1' )
    {
        $sLimit = "LIMIT ".mysql_real_escape_string( $_GET['iDisplayStart'] ).", ".
            mysql_real_escape_string( $_GET['iDisplayLength'] );
    }

    /*
     * Ordering
     */
    $sOrder = "";
    if ( isset( $_GET['iSortCol_0'] ) )
    {
        $sOrder = "ORDER BY  ";
        for ( $i=0 ; $i<intval( $_GET['iSortingCols'] ) ; $i++ )
        {
            if ( $_GET[ 'bSortable_'.intval($_GET['iSortCol_'.$i]) ] == "true" )
            {
                $sOrder .= $aColumns[ intval( $_GET['iSortCol_'.$i] ) ]."
                    ".mysql_real_escape_string( $_GET['sSortDir_'.$i] ) .", ";
            }
        }

        $sOrder = substr_replace( $sOrder, "", -2 );
        if ( $sOrder == "ORDER BY" )
        {
            $sOrder = "";
        }
    }

    /* 
     * Filtering
     * NOTE this does not match the built-in DataTables filtering which does it
     * word by word on any field. It's possible to do here, but concerned about efficiency
     * on very large tables, and MySQL's regex functionality is very limited
     */
    $sWhere = "";
    if ( isset($_GET['sSearch']) && $_GET['sSearch'] != "" )
    {
        $sWhere = "WHERE (";
        for ( $i=0 ; $i<count($aColumns) ; $i++ )
        {
            if ( isset($_GET['bSearchable_'.$i]) && $_GET['bSearchable_'.$i] == "true" )
            {
                $sWhere .= $aColumns[$i]." LIKE '%".mysql_real_escape_string( $_GET['sSearch'] )."%' OR ";
            }
        }
        $sWhere = substr_replace( $sWhere, "", -3 );
        $sWhere .= ')';
    }

    /* Individual column filtering */
    for ( $i=0 ; $i<count($aColumns) ; $i++ )
    {
        if ( isset($_GET['bSearchable_'.$i]) && $_GET['bSearchable_'.$i] == "true" && $_GET['sSearch_'.$i] != '' )
        {
            if ( $sWhere == "" )
            {
                $sWhere = "WHERE ";
            }
            else
            {
                $sWhere .= " AND ";
            }
            $sWhere .= $aColumns[$i]." LIKE '%".mysql_real_escape_string($_GET['sSearch_'.$i])."%' ";
        }
    }

    /*
     * SQL queries
     * Get data to display
     */
    $sQuery = "
        SELECT SQL_CALC_FOUND_ROWS ".str_replace(" , ", " ", implode(", ", $aColumns))."
        FROM   $sTable
        $sWhere
        $sOrder
        $sLimit
    ";
    $rResult = mysql_query( $sQuery, $gaSql['link'] ) or die(mysql_error());

    /* Data set length after filtering */
    $sQuery = "
        SELECT FOUND_ROWS()
    ";
    $rResultFilterTotal = mysql_query( $sQuery, $gaSql['link'] ) or die(mysql_error());
    $aResultFilterTotal = mysql_fetch_array($rResultFilterTotal);
    $iFilteredTotal = $aResultFilterTotal[0];

    /* Total data set length */
    $sQuery = "
        SELECT COUNT(".$sIndexColumn.")
        FROM   $sTable
    ";
    $rResultTotal = mysql_query( $sQuery, $gaSql['link'] ) or die(mysql_error());
    $aResultTotal = mysql_fetch_array($rResultTotal);
    $iTotal = $aResultTotal[0];

    /*
     * Output
     */
    $output = array(
        "sEcho" => intval($_GET['sEcho']),
        "iTotalRecords" => $iTotal,
        "iTotalDisplayRecords" => $iFilteredTotal,
        "aaData" => array()
    );

    while ( $aRow = mysql_fetch_array( $rResult ) )
    {
        $row = array();
        for ( $i=0 ; $i<count($aColumns) ; $i++ )
        {
            if ( $aColumns[$i] == "version" )
            {
                /* Special output formatting for 'version' column */
                $row[] = ($aRow[ $aColumns[$i] ]=="0") ? '-' : $aRow[ $aColumns[$i] ];
            }
            else if ( $aColumns[$i] != ' ' )
            {
                /* General output */
                $row[] = $aRow[ $aColumns[$i] ];
            }
        }
        $output['aaData'][] = $row;
    }

    echo json_encode( $output );
?> 
```

输出时的最后一部分正在使用`$row[] = $aRow[ $aColumns[$i] ];`，我认为这是问题所在，因为我在 select 语句中使用 table.column 类型。有趣的是，我在 select 语句中的第一列正在走下坡路，我得到了这些值。其他人给我未定义的索引。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T09:45:20.500

此问题已通过使用DataTables 示例脚本的[修改版本和](http://pastebin.com/HuPgcPmy)[关于 SO chat 的进一步讨论](https://chat.stackoverflow.com/rooms/12475/undefined-index-in-php-when-executing-sql-statement)得到解决。

一旦有时间，我会以正确答案的形式完整地写下来给未来的访客。

* * *

简而言之：

DataTables[示例 PHP 脚本](http://datatables.net/development/server-side/php_mysql)不支持在其字段列表机制中使用列别名或 MySQL 函数调用的可能性。这使得任何执行 JOIN 或对结果应用某种形式的数据转换的查询都无法在不进行修改的情况下完成。

上面链接的修改版本使用正则表达式来安全地使用字段别名，但仍然不允许函数调用，这是在这种情况下产生所需结果所真正需要的。这已通过将一些转换工作替换为 PHP 来解决，并进行一些额外的修改以将用户定义的日期范围应用于返回的结果。

通过查看上面的链接，可以看到具体做了什么以及为什么做的全部细节。

* * *

如果我从这个过程中拿走了对未来访问者可能有用的一件事，那就是：

> **如果您需要的不仅仅是与 DataTables 一起使用的最简单的查询，那么您最好确保您了解后端代码的每一行以及它如何与前端交互。**
> 
> 提供的示例脚本确实是一个很好的起点，但它们的功能绝不是详尽无遗的，您需要准备好修改甚至完全重写它们以达到您想要的结果。

# node.js - 基准 socket.io

> ID：10977345
> 
> 赞同：6
> 
> 时间：2012-06-11T09:20:42.517
> 
> 标签：node.js, websocket, socket.io, benchmarking

我想对我的 socket.io 服务器进行基准测试。我想测试服务器可以处理多少并行连接和消息。

但是当我用大约 200 个 websocket 启动基准测试时，我的 socket.io 服务器在几分钟后崩溃了。

我尝试使用 node.js 的集群模块将进程共享给核心。当我使用集群模块时，一些连接会在一段时间后断开。

我用于测试的服务器是亚马逊云上的虚拟服务器，具有以下属性：

*   7 GB 内存
*   20 个 EC2 计算单元（8 个虚拟内核，每个内核有 2.5 个 EC2 计算单元）
*   1690 GB 的实例存储
*   64位平台
*   I/O 性能：高
*   API 名称：c1.xlarge

这是基准客户端的代码：

```
var fs = require('fs');
var io = require("socket.io-client");
var host = "http://localhost:3000";
var timeLog = fs.createWriteStream(__dirname+'/public/time.log',{flags:'a',mode:0666,   encoding:'encoding'});
var count = 200;
var sockets = [];
var total = 0;
var countTime = 0; 
var echo = exports;
echo.start = function() {
    fs.writeFile('public/time.log',"",function(err){
        if(err) throw err;
    });

    for(var i=0;i<count;i++){
        var socket = io.connect(host,{"force new connection":true});
        sockets.push(socket);
        //console.log(i);
        socket.on("message",function(message){
            countTime++;
            time = new Date().getTime()-message;
            total+=time;
            timeLog.write(time+"\n");
            socket.send(new Date().getTime());
        });
        socket.on("disconnect",function(){
            console.log("disconnect");
        });
    }

    parallelSockets();
    var j = 0;
}

function parallelSockets(){
    for(var i = 0 ;i<count;i++){
        sockets[i].send(new Date().getTime());
    }
} 
```

这里是socket.io-server的代码：

```
socket.on('message',function(message){
    start = new Date().getTime();
    socket.send(message);
    end = new Date().getTime() - start;
    logfile.write(end+"\n");
}); 
```

socket.io 上是否有任何安全机制可以阻止如此多的并行消息和连接形成客户端？

有谁能够帮我？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T10:23:41.807

我对 Socket.IO 和 SockJS 服务器实现进行了基准测试。

[这是结果](http://mrjoes.github.com/2011/12/15/sockjs-bench.html)

[测试套件](https://github.com/mrjoes/sock-benchmarking)

用 Java 编写，支持 3 种传输：Socket.IO 0.7+、SockJS 0.2+、原始 Websockets。没有已编译的二进制文件，但您可以让 Eclipse 编译它或只使用命令行 javac。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-11T09:44:54.073

我自己没有对 Socket.IO 进行基准测试，但我知道 2 个可能对您有帮助的好资源，因此请查看它们：

*   [http://drewww.github.com/socket.io-benchmarking/](http://drewww.github.com/socket.io-benchmarking/)
*   [http://blog.mixu.net/2011/11/22/performance-benchmarking-socket-io-0-8-7-0-7-11-and-0-6-17-and-nodes-native- tcp/](http://blog.mixu.net/2011/11/22/performance-benchmarking-socket-io-0-8-7-0-7-11-and-0-6-17-and-nodes-native-tcp/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-22T18:49:14.503

你可以检查Akinji

它打开到服务器的并发套接字并监听给定的消息并打印它们

[http://github.com/sonsuzdongu/akinji](http://github.com/sonsuzdongu/akinji)

```
python akinji.py -c 100 --host localhost --port 3000 --waitFor 100 --on "some msg" 
```

# c++ - 树总和线程c ++

> ID：10977349
> 
> 赞同：-1
> 
> 时间：2012-06-11T09:20:47.337
> 
> 标签：c++, multithreading, boost-thread

我有一棵带有数字和布尔值的树，以查看数字是否已求和，这是代码：

```
#include <iostream>
#include <string>
#include <boost/thread.hpp>
#include <boost/lambda/bind.hpp>

using namespace std;

class ThreadBase
{
private:
    boost::shared_ptr<boost::thread> m_thread_ptr;

public:
    ThreadBase() : m_thread_ptr() { }
    virtual ~ThreadBase() { }
    virtual void run() = 0;

    void start()
    {
        if (m_thread_ptr == NULL)
        {
            m_thread_ptr.reset(
                new boost::thread(
                    boost::lambda::bind(&ThreadBase::run, this)));
        }
        else
        {
            throw std::runtime_error("multiple start");
        }
    }

    void join()
    {
        if (m_thread_ptr)
        {
            m_thread_ptr->join();
        }
    }
};

struct NodeT
{
    int key_value;
    NodeT *left;
    NodeT *right;
    bool done;
};

class Btree
{
public:
    Btree();
    ~Btree();
    void insert(int key);
    NodeT *search(int key);
    void destroy_tree();
    void inOrder(NodeT *leaf);
    NodeT *root;
    void display(NodeT *leaf, string where);

private:
    void destroy_tree(NodeT *leaf);
    void insert(int key, NodeT *leaf);
    NodeT *search(int key, NodeT *leaf);
};

Btree::Btree()
{
    cout << "creating tree" << endl;
    root=NULL;
}

Btree::~Btree()
{
    cout << "deleting tree end" << endl;
    destroy_tree() ;

}

void Btree::destroy_tree(NodeT *leaf)
{
    if (leaf != NULL)
    {
        destroy_tree(leaf->left);
        destroy_tree(leaf->right);
        delete leaf;
        cout << "tree deleted " << leaf->key_value << endl;
    }
}

void Btree::insert(int key, NodeT *leaf)
{
    if (key < leaf->key_value)
    {
        if (leaf->left != NULL)
            insert(key, leaf->left);
        else
        {
            cout << "creating new node to insert with less value" << key << endl;
            leaf->left = new NodeT;
            leaf->left->key_value=key;
            leaf->left->left=NULL;   //sets the left child to null
            leaf->left->right=NULL;  //sets the right child to null
        }
    }
    else if (key >=leaf->key_value)
    {
        if (leaf->right != NULL)
            insert(key, leaf->right);
        else
        {
            cout << "creating node with more or equal value" << key << endl;
            leaf->right = new NodeT;
            leaf->right->key_value=key;
            leaf->right->left=NULL; //sets the left node to null
            leaf->right->right=NULL; //sets the right node to nulll
        }
    }
}
NodeT *Btree::search(int key, NodeT *leaf)
{
    cout << "searching node" << key << endl;
    if (leaf != NULL)
    {
        if(key == leaf->key_value)
        {
            cout << "finded in first attempt " << endl;
            return leaf;
        }
        if(key < leaf->key_value)
        {
            cout << "looking again with less value to the left" << endl;

            return search(key, leaf->left);
        }
        else
        {
            cout << "looking again more value to the right" << endl;
            return search(key, leaf->right);
        }
    }
    else
    {
        cout << "not found" << endl;
        return NULL;
    }
}

void Btree::insert(int key)
{
    if (root != NULL)
        insert(key, root);
    else
    {
        cout << "inserting new node private func" << key << endl;
        root=new NodeT;
        root->key_value=key;
        root->right=NULL;
        root->left=NULL;
    }

}

NodeT *Btree::search(int key)
{
    cout << "searhing node private func" << endl;
    return search(key, root);
}

void Btree::destroy_tree()
{
    cout << "deleting tree public" << endl;
    destroy_tree(root);
}

void Btree::inOrder(NodeT *leaf)
{
    if(leaf!= NULL)
    {
        inOrder(leaf->left);
        cout << "search inorder" << leaf->key_value << endl;
        inOrder(leaf->right);
    }
}

void Btree::display(NodeT *leaf, string where)
{
    cout << where << endl;
    if (leaf != NULL)
    {
        cout << leaf->key_value << " t or f"<< leaf->done << endl;
        display(leaf->left, "left");
        display(leaf->right, "rigth");
    }
}

class MyThread : public ThreadBase
{
public:
    void run()
    {

    }

    int sum( Btree *ptrRoot)
    {
        //pointer to next node or to parent
        NodeT *next = ptrRoot->root;

        //if we are in some root we should be here so leave
        if (next->left == NULL && next->right == NULL)
        {
            return 0;
        }
        //we are in a parent with 2 nodes
        else if(next->left->left != NULL && next->right->right != NULL && next->left->done == false && next->right->done == false)
        {
            //sum values and put it into this node and set bool to true
            //to not go again

            next->key_value = next->left->key_value + next->right->key_value;
            next->left->done = true;
            next->right->done = true;
            //all good
            return 0;
        }
        //we are in a parent with 1 node the right one
        else if(next->left->left == NULL && next->right->right != NULL && next->right->done == false)
        {
            //sum value + 0 and set flag to true
            next->key_value = next->right->key_value + 0;
            next->right->done = true;
            //all is good
            return 0;
        }
        //we are in a parent with the left node
        else if (next->left->left != NULL && next->right->right == NULL && next->left->done == false)
        {
            //sum value + 0 and set flag to true
            next->key_value = next->left->key_value + 0;
            next->left->done = true;
            //all is good
            return 0;
        }

        cout << "we are at here " << next->key_value << endl;
        return 0;
    }
};

int THREADS_HOW_MANY = 0;

int main()
{
    cout << "Trees example" << endl;
    cout << "make yoir choice" << endl;
    cout << "1 insert 2 delete 3 search" << endl;
    Btree bt;
    bt.insert(10);
    bt.insert(15);
    bt.insert(4);
    bt.insert(2);
    bt.insert(8);
    bt.search(4);
    bt.search(2);
    bt.search(20);
    bt.inOrder(bt.root);
    bt.display(bt.root, "root");

    cout << "end everyrhing" << endl;
    MyThread mt;
    mt.start();
    mt.run();
    mt.sum(&bt);
    THREADS_HOW_MANY = boost::thread::hardware_concurrency();
    std::cout << THREADS_HOW_MANY << std::endl;

    return 0;
} 
```

我想要做的是去所有的树，看看有假的叶子，然后在父节点和父节点等中求和，直到根，这必须是线程的，所以1个线程将前2个和另一个相加下一个广告无限，现在我想我要说的有点不对劲，因为函数 sum 还没有完成，所以你能给一些提示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T09:30:57.567

您将从不同的线程到达同一个节点，因此您需要在访问 node.done 时使用锁定或使用“无锁”技术，例如 node.done 成员的比较和交换。在对节点求和之前，您需要修改代码以更改“完成”的值。

# drupal - Drupal 7 - FAPI 多步表单 - 清除 form_state 值 - 添加其他选项

> ID：10977351
> 
> 赞同：1
> 
> 时间：2012-06-11T09:20:53.280
> 
> 标签：drupal, drupal-7, drupal-fapi, drupal-form-submission

我正在 Drupal 7 - FAPI 中创建一个多步骤表单。

在主 hook_form() 中，处理了对不同步骤的重定向。

```
function hook_form($form, &$form_state) { 
    if (empty($form_state['storage']['step'])) {
        $form_state['storage']['step'] = 0;
    }  

    switch($form_state['storage']['step']) {
        case 0:
          $form=  _step_0($form, $form_state);
        break;
        case 1:
          $form =  _step_1($form, $form_state);
        break;
        case 2:
          $form =  _step_2($form, $form_state);
        break;
        case 3:
          $form =  _step_3($form, $form_state);
        break;
        case 99:
          $form =  _step_end($form, $form_state);
        break;
    }
    return $form;
} 
```

在第 2 步中，我有一个可选按钮“添加”，它将 form_values 保存到存储中并重新加载相同的表单（第 2 步）。但是当它重新加载此表单时。以前的表单值被表示为默认表单值，而不是需要的空白（新）表单。

```
function inschrijven_form_submit($form, &$form_state) {
    switch ($form_state['storage']['step']) {

        case 0:
          switch($form_state['values']['op']) {
            case 'Next' :
              ....
              $form_state['storage']['step'] = 1;
            break;
          }
        break;

        case 1:
          switch($form_state['values']['op']) {
            case 'Next' :
              ....
              $form_state['storage']['step'] = 2;
            break;
          }
        break;

        case 2:
            switch($form_state['values']['op']) {
                case 'Next' :
                    ....
                    $form_state['storage']['step'] = 3;
                break;

                case 'Add another' :
                    $form_state['rebuild'] = TRUE;
                    ....
                    $form_state['storage']['step'] = 2;
                    return;
                break;

        .....

    }
} 
```

我尝试在每次提交后手动清除 form_state['values'] 但没有成功。谁能实现这个多步添加另一个功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T18:46:30.773

您正在寻找的函数是 form_set_value($element, $value, &$form_state)。

表单 api 有点棘手。我在使用 FAPI 时推断 $form_state 始终反映传递到表单中的 $form 变量。$form_state 只是让获取值变得容易。每当您切换到另一个验证时，似乎 $form_state 都会从“$form”的值更新。

如果您使用 form_set_value，您应该能够在验证之间传递状态。

干杯! [http://api.drupal.org/api/drupal/includes!form.inc/function/form_set_value/7](http://api.drupal.org/api/drupal/includes!form.inc/function/form_set_value/7)

# typo3 - 错字3使用自定义字段更改默认标题？

> ID：10977352
> 
> 赞同：0
> 
> 时间：2012-06-11T09:20:55.293
> 
> 标签：typo3

我用扩展 kickstarter 创建了一个全新的内容元素类型。我创建了新的标题字段并且不使用默认标题字段。

现在的问题是：在后端，列表或正常页面中，我的内容元素列表是“默认+插件名称”。如何更改它从我的自定义标题输入中获取条目？

谢谢你，彼得

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T13:27:07.997

我认为您可以像这样做一样使用页面模块[的钩子](http://doxygen.frozenkiwi.com/typo3/html/de/dbd/interfacetx__cms__layout__tt__content__drawItemHook.html)`tt_news`。

```
$GLOBALS['TYPO3_CONF_VARS']['SC_OPTIONS']['cms/layout/class.tx_cms_layout.php']['list_type_Info']['9']['tt_news'] = 'EXT:tt_news/lib/class.tx_ttnews_cms_layout.php:tx_ttnews_cms_layout->getExtensionSummary'; 
```

# iphone - 如何通过推文确定推特应用程序？

> ID：10977358
> 
> 赞同：0
> 
> 时间：2012-06-11T09:21:10.410
> 
> 标签：iphone, twitter

我已将 Twitter 集成到以前的开发人员的 iPhone 应用程序中。还有推特消费者密钥和秘密。我可以通过此应用发布推文，并在推文下方看到“通过 MyApp”之类的文字。现在我需要更改这个 twitter 应用程序设置，但不知道这个应用程序属于哪个 twitter 帐户。有没有办法通过一些应用程序的推文来确定 Twitter 帐户？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T09:25:20.143

您无法从使用者密钥和秘密中获取登录详细信息。您必须联系以前的开发人员以获取在[dev.twitter.com](http://dev.twitter.com)上使用的用户名和密码。

或者，您可以创建自己的新开发者帐户。

# string - Groovy：${} 内变量的嵌套求值

> ID：10977361
> 
> 赞同：6
> 
> 时间：2012-06-11T09:21:26.510
> 
> 标签：string, groovy, gstring

我有一种方法可以在 Groovy 中对“$-Strings”进行嵌套评估，例如

```
def obj = {["name":"Whatever", "street":"ABC-Street", "zip":"22222"]}
def fieldNames = ["name", "street", "zip"]

fieldNames.each{ fieldname ->
  def result = " ${{->"obj.${fieldname}"}}"  //can't figure out how this should look like
  println("Gimme the value "+result);
} 
```

结果应该是：

```
Gimme the value Whatever
Gimme the value ABC-Street
Gimme the value 22222 
```

我解决这个问题的尝试要么没有给出正确的结果（例如，只是 obj.street}，要么根本不会编译。到目前为止，我似乎还没有理解整个概念。但是，看到这个：[http:// groovy.codehaus.org/Strings+and+GString](http://groovy.codehaus.org/Strings+and+GString)我相信这应该是可能的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T10:01:42.500

那个页面怎么样让你认为它是可能的？没有任何嵌套示例。

AFAIK 默认情况下是不可能的；内的表达式`${}`不会被重新评估。无论如何，这将是危险的，因为将其无限深并炸毁堆栈真的很容易。

在这种情况下，无论如何都没有必要。

*   做`obj`一个实际的地图，而不是一个闭包，并且
*   `[]`对字段名称使用法线贴图访问

```
def obj = [ "name": "Whatever", "street": "ABC-Street", "zip": "22222" ]
def fieldNames = ["name", "street", "zip"]

fieldNames.each { println "Gimme the value ${obj[it]}" }

Gimme the value  -> Whatever
Gimme the value  -> ABC-Street
Gimme the value  -> 22222 
```

*编辑*可能我误解了，您*故意*制作`obj`封闭而不是地图，尽管我不明白为什么。

# iphone - 如何在 iphone sdk 中将 twitter 与自定义登录（如意见实验室）集成？

> ID：10977363
> 
> 赞同：0
> 
> 时间：2012-06-11T09:21:34.750
> 
> 标签：iphone, twitter, twitter-oauth, sharekit

嗨，我想将 twitter 应用程序与自定义登录和自定义窗口集成我已经使用了 twitter+oath 有点 Api 我想像[opinionlab](http://itunes.apple.com/us/app/opinionlab-feedback/id341889514?mt=8)一样实现并在这两个应用程序中[推送交易](http://itunes.apple.com/in/app/push-a-deal/id418897508?mt=8)你可以看到自定义 twitter 集成（尊重 GUI）我如何集成像这样[请参考我已经提出的问题以获取更多详细信息](https://stackoverflow.com/questions/10947723/how-to-tweet-with-some-prepopulated-text-in-twitter-in-iphone-sdk) ![我从意见实验室添加了一些图片并推送了交易申请。](../Images/588974e5b7357b0fbe7edf79c2f65fad.png)这是示例图像任何人都可以指导我如何像这样集成我已经看到了很多示例。但我无法正确理解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T19:37:55.130

我是真正编写 OpinionLab 应用程序的人。这只是一个网络视图。向它发送 URL，例如[https://twitter.com/share?text=](https://twitter.com/share?text=(Fill)（在此处填写您的文本）

# hadoop - sqoop-import 失败，hive 无法显示表

> ID：10977364
> 
> 赞同：1
> 
> 时间：2012-06-11T09:21:35.713
> 
> 标签：hadoop, hive, sqoop

我尝试使用 Hadoop 将数据库从 mysql 导入 Hive，并使用来自 sqoop 的“--hive import”命令自动创建表并加载数据到 hive。

我使用下面的命令通过 sqoop 执行导入

```
./sqoop-import --connect jdbc:mysql://localhost/paman -table bibis -m 1 -hive-import 
```

执行此命令时：

```
hadoop@dewi:/opt/sqoop/bin$ ./sqoop-import --connect jdbc:mysql://localhost/paman -table bibis -m 1 -hive-import
12/06/11 16:08:47 INFO tool.BaseSqoopTool: Using Hive-specific delimiters for output. You can override
12/06/11 16:08:47 INFO tool.BaseSqoopTool: delimiters with --fields-terminated-by, etc.
12/06/11 16:08:47 INFO tool.CodeGenTool: Beginning code generation
12/06/11 16:08:47 ERROR sqoop.Sqoop: Got exception running Sqoop: java.lang.RuntimeException: Could not load db driver class: com.mysql.jdbc.Driver
java.lang.RuntimeException: Could not load db driver class: com.mysql.jdbc.Driver
    at com.cloudera.sqoop.manager.SqlManager.makeConnection(SqlManager.java:597)
    at com.cloudera.sqoop.manager.GenericJdbcManager.getConnection(GenericJdbcManager.java:51)
    at com.cloudera.sqoop.manager.MySQLManager.execute(MySQLManager.java:201)
    at com.cloudera.sqoop.manager.SqlManager.getColumnTypesForRawQuery(SqlManager.java:177)
    at com.cloudera.sqoop.manager.SqlManager.getColumnTypes(SqlManager.java:161)
    at com.cloudera.sqoop.orm.ClassWriter.generate(ClassWriter.java:908)
    at com.cloudera.sqoop.tool.CodeGenTool.generateORM(CodeGenTool.java:82)
    at com.cloudera.sqoop.tool.ImportTool.importTable(ImportTool.java:337)
    at com.cloudera.sqoop.tool.ImportTool.run(ImportTool.java:423)
    at com.cloudera.sqoop.Sqoop.run(Sqoop.java:144)
    at org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:65)
    at org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:79)
    at com.cloudera.sqoop.Sqoop.runSqoop(Sqoop.java:180)
    at com.cloudera.sqoop.Sqoop.runTool(Sqoop.java:218)
    at com.cloudera.sqoop.Sqoop.main(Sqoop.java:228)
hadoop@dewi:/opt/sqoop/bin$ 
```

我的 sqoop 命令有什么问题？还是 sqoop 或 hive 中还有其他配置？

请帮帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-06T13:07:08.927

首先，sqoop 检查位置的罐子

```
$SQOOP_HOME/lib 
```

您必须将 mysql-connector jar 添加到此位置。您必须在 sqoop 导入命令中包含 --hive-table 参数，如下所示。

```
./sqoop-import --connect jdbc:mysql://localhost:<port_number>/paman -table bibis -m 1 -hive-import --hive-table hive_table_name 
```

这里 hive_table_name 是动态创建的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-08T08:25:11.913

我还尝试将 $HADOOP_CLASSPATH 变量设置为指向我的 SQOOP jar，然后一切正常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T09:47:07.463

根据错误日志，sqoop 命令似乎无法加载 MySQL JDBC 驱动程序。您应该检查 $SQOOP_HOME/lib 路径中是否有 MySQL JDBC 驱动程序。

希望这可以帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-04T06:59:11.983

Hadoop 需要知道 mysql 连接器 jar 的位置。

例如，复制如下

```
sudo cp mysql-connector-java-5.1.24-bin.jar /usr/local/Cellar/hadoop/1.1.2/libexec/lib/ 
```

它对我有用。

另一种方法：

尝试使用 -libjar 参数指定额外的 Jar 文件。这是 Sqoop 传递给框架的通用 Hadoop 参数。

```
bin/sqoop import -libjars /path/to/mysql-connector-java-5.1.24-bin.jar --connect "..." 
```

# php - 如何检查xml远程url是否存在，如果不存在则使用缓存的本地文件

> ID：10977367
> 
> 赞同：2
> 
> 时间：2012-06-11T09:22:02.853
> 
> 标签：php, xml, file-exists

我一直在使用下面的脚本通过欧洲银行免费远程 xml 文件自动转换货币值。我的问题是，有时`http://www.ecb.europa.eu`xml 文件会出现问题，因此自动货币转换会出错。

```
<?php
/*

File: currencyexchange.php
Author: Gary White
Last modified: July 6, 2005

Copyright (C) 2005, Gary White

This program is free software; you can redistribute it and/or
modify it under the terms of the GNU General Public License
as published by the Free Software Foundation; either version 2
of the License, or (at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
included GNU General Public License for more details. If you 
received this file without the gpl.txt file, you may view it at:
http://www.gnu.org/copyleft/gpl.html

See the readme.txt file for usage.

July 6, 2005 added the RON, Romania New Leu, to the currency list.

*/

// this simply gets an array of possible currency countries and names
$allCurrencies=getCurrencyNames();
class currencyExchange{
    /////////////////////////////////////////////////////////////////////////////////////////
    // Public Properties
    // Note that these properties are public, but the values are all generated internally.
    // You should consider them read only during normal usage.
    // The only one you may want to access would be the $localFile property, if you wanted
    // to change the name of the local file used to cache a copy of the data.
    /////////////////////////////////////////////////////////////////////////////////////////

    // $Supplier property will be the European Central Bank, assuming we get the data
    var $Supplier="";
    // $Date property is the date of the exchange rate publication
    var $Date="";
    // $Rates property is an associative array of rateobj objects with the three letter identifier as the array keys
    var $Rates=array();
    // $Source property will be either "Local" or "Remote" depending on where the data comes from
    var $Source="";
    // $Error property will contain any error messages generates along the way
    var $Error="";
    // $localFile property is the file name used to cache a local copy of the XML file
    var $localFile="currencies_local.xml";
    // $url property is the URL of the XML file at the European Central Bank
    var $url="http://www.ecb.europa.eu/stats/eurofxref/eurofxref-daily.xml";

    /////////////////////////////////////////////////////////////////////////////////////////
    // Public Methods
    /////////////////////////////////////////////////////////////////////////////////////////
    function getData(){
        $olderr=error_reporting(0);
        $this->Source="Local";
        if(file_exists($this->localFile)){
            // load it
            $this->xml=@file_get_contents($this->localFile);
            $this->parse();

            // check if it's a weekend
            // what day of the week is it?
            $weekday=date("w");
            // if it's a Sunday or Saturday
            if($weekday==0 || $weekday==6){
                // go back to last Friday
                $date=date("Y-m-d",strtotime("last Friday"));
            } else {
                $date=date("Y-m-d");
            }
            // if the date in the local file is not the same
            // as our current date, or last Friday for weekends
            if($this->Date!=$date){

                // clear the data
                $this->clearData();

                // get the remote file
                $this->xml=$this->getRemoteFile($this->url);

                if($this->parse()){
                    $this->Source="Remote";
                    // write the remote file data to a local copy of the file
                    $this->saveLocalCopy();
                }
            } // if we have a local copy
        }else{
            $this->xml=$this->getRemoteFile($this->url);

            if($this->xml)
                // write the remote file data to a local copy of the file
                $this->saveLocalCopy();
        }
        if(!$this->xml)
            $this->error="Failed to get data";
        else{
            $this->parse();
        }
        // sort our rates on the keys
        ksort($this->Rates);
        error_reporting($olderr);
        return count($this->Rates);
    }

    function getRemoteFile($url){

        $curl_handle = curl_init();
        // Where should we get the data?
        curl_setopt ($curl_handle, CURLOPT_URL, $url);
        // This says not to dump it directly to the output stream, but instead
        // have it return as a string.
        curl_setopt ($curl_handle, CURLOPT_RETURNTRANSFER, 1);
        // the following is optional, but you should consider setting it
        // anyway. It prevents your page from hanging if the remote site is
        // down.
        curl_setopt ($curl_handle, CURLOPT_CONNECTTIMEOUT, 1);
        // Now, YOU make the call.
        $buffer = curl_exec($curl_handle);
        // And tell it to shut down (when your done. You can always make more
        // calls if you want.)
        curl_close($curl_handle);
        // This is where iï¿½d probably do some extra checks on what i just got.
        // Paranoia pays dividends.

        return $buffer;
    }

    function Convert($from, $to, $amount=1){
        // Converts from one currency to another. The method expects at least two
        // parameters. The first param , $from, it the three letter identifier for
        // the currency you are converting from. The second param, $to, is the 
        // three letter identifier for the currency you are converting to. The final
        // param, $amount, is the amount of the $from currency to convert. If omitted
        // the amount defaults to 1 and the function will return the amount of $to
        // currency that corresponds with 1 unit of the $from currency.
        if(array_key_exists($from, $this->Rates) && array_key_exists($to, $this->Rates)){
            return ($amount * (($this->Rates[$to]->rate)/($this->Rates[$from]->rate)));
        }else{
            $this->Error->Error = "";
if (!array_key_exists($from, $this->Rates))
      $this->Error->Error.="$from is not a recognized currency identifier ";
if (!array_key_exists($from, $this->Rates))
      $this->Error->Error.="$to is not a recognized currency identifier";
            return false;
        }
    }

    function setBaseCurrency($currency){
        // This function converts all currencies to be based on one unit of
        // $base currency. It's only really useful if you want to output a 
        // table of conversion factors.

        // get a factor to do our conversion based on our base currency
        $factor=$this->Rates[$currency]->rate;
        // modify the rates based on the base currency
        foreach(array_keys($this->Rates) as $k){
            $rate=$this->Rates[$k]->rate / $factor;
            $this->Rates[$k]->rate=$rate;
        }
        return (count($this->Rates)>0);
    }

    /////////////////////////////////////////////////////////////////////////////////////////
    // Private Methods
    // You should not need to call any of the following methods.
    /////////////////////////////////////////////////////////////////////////////////////////
    function clearData(){
        $this->Supplier="";
        $this->Date="";
        $this->Rates=array();
        $this->Source="";
        $this->xml="";
    }

    function saveLocalCopy(){
        $fp=fopen($_SERVER['DOCUMENT_ROOT'].$this->localFile,"w") or die("failed to write file");
        fwrite($fp,$this->xml);
        fclose($fp);
        $this->parse();
        $this->Source="Remote";
    }

    function parse(){
        if($this->xml){
            $this->parser = xml_parser_create();
            @xml_set_object($this->parser, $this);
            @xml_set_element_handler($this->parser, "startElement", "endElement");
            @xml_set_character_data_handler($this->parser, "characterData");
            $this->Rates['EUR']=new rateobj();
            $this->Rates['EUR']->rate=1.00;
            $this->Rates['EUR']->currency="Euro";
            xml_parse($this->parser, $this->xml, true)
                or die(sprintf("XML error: %s at line %d", 
                    xml_error_string(xml_get_error_code($parser)), 
                    xml_get_current_line_number($parser)));
            xml_parser_free($this->parser);
        }
    }

    function currencyExchange(){
        $dir=pathinfo($_SERVER['PHP_SELF']);
        $dir=$dir['dirname'];
        $this->localFile="$dir/$this->localFile";
    }

    function startElement($parser, $name, $attrs) {
        global $allCurrencies;
        $this->temp="";
        $gwCurrencyExch=&$GLOBALS['gwCurrencyExch'];
        if($name=="CUBE"){
            if(array_key_exists("TIME",$attrs)){
                $this->Date=$attrs["TIME"];
            }
            if(array_key_exists("CURRENCY",$attrs)){
                $this->Rates[$attrs["CURRENCY"]]=new rateobj();
                $this->Rates[$attrs["CURRENCY"]]->rate=$attrs["RATE"];
                $this->Rates[$attrs["CURRENCY"]]->currency=$allCurrencies[$attrs["CURRENCY"]];
            }
        }
    }

    function characterData($parser, $data){
        $this->temp.=$data;
    }

    function endElement($parser, $name) {
        switch($name){
            case "GESMES:NAME":
                $this->Supplier=$this->temp;
                break;
            case "GESMES:SUBJECT":
                $this->Report=$this->temp;
                break;
        }
        $temp="";
    }

} // end of ratelist class

class gwSocket{
    var $ClassName="gwSocket";
    var $Version="0.6";

    var $error="";
    var $headers;
    var $maxRedirects=3;
    var $page="";
    var $result="";
    var $redirects=0;
    var $userAgent="Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.0)";

    function getUrl( $url ) {
        $retVal="";
        $url_parsed = parse_url($url);
        $scheme = $url_parsed["scheme"];
        $host = $url_parsed["host"];
        $port = $url_parsed["port"]?$url_parsed["port"]:"80";
        $user = $url_parsed["user"];
        $pass = $url_parsed["pass"];
        $path = $url_parsed["path"]?$url_parsed["path"]:"/";
        $query = $url_parsed["query"];
        $anchor = $url_parsed["fragment"];

        if (!empty($host)){

            // attempt to open the socket
            if($fp = fsockopen($host, $port, $errno, $errstr, 2)){

                $path .= $query?"?$query":"";
                $path .= $anchor?"$anchor":"";

                // this is the request we send to the host
                $out = "GET $path ".
                    "HTTP/1.0\r\n".
                    "Host: $host\r\n".
                    "Connection: Close\r\n".
                    "User-Agent: $this->userAgent\r\n";
                if($user)
                    $out .= "Authorization: Basic ".
                        base64_encode("$user:$pass")."\r\n";
                $out .= "\r\n";

                fputs($fp, $out);
                while (!feof($fp)) {
                    $retVal.=fgets($fp, 128);
                }
                fclose($fp);
            } else {
                $this->error=$errstr;
            }
            $this->result=$retVal;
            $this->headers=$this->parseHeaders(trim(substr($retVal,0,strpos($retVal,"\r\n\r\n"))));
            $this->page=trim(stristr($retVal,"\r\n\r\n"))."\n";
            if(isset($this->headers['Location'])){
                $this->redirects++;
                if($this->redirects<$this->maxRedirects){
                    $location=$this->headers['Location'];
                    $this->headers=array();
                    $this->result="";
                    $this->page="";
                    $this->getUrl($location);
                }
            }
        }
        return (!$retVal="");
    }

    function parseHeaders($s){
        $h=preg_split("/[\r\n]/",$s);
        foreach($h as $i){
            $i=trim($i);
            if(strstr($i,":")){
                list($k,$v)=explode(":",$i);
                $hdr[$k]=substr(stristr($i,":"),2);
            }else{
                if(strlen($i)>3)
                    $hdr[]=$i;
            }
        }
        if(isset($hdr[0])){
            $hdr['Status']=$hdr[0];
            unset($hdr[0]);
        }
        return $hdr;
    }

} // end of gwSocket class

class rateobj{
    var $currency="";
    var $rate=0;
}

function getCurrencyNames(){
    $retVal['AED']="United Arab Emirates Dirham";
    $retVal['AFA']="Afghanistan Afghani";
    $retVal['ALL']="Albania Leke";
    $retVal['ARS']="Argentina Peso";
    $retVal['ATS']="Austria Schilling*";
    $retVal['AUD']="Australia Dollar";
    $retVal['BBD']="Barbados Dollar";
    $retVal['BDT']="Bangladesh Taka";
    $retVal['BEF']="Belgium Franc*";
    $retVal['BGN']="Bulgaria Leva";
    $retVal['BHD']="Bahrain Dinar";
    $retVal['BMD']="Bermuda Dollar";
    $retVal['BRL']="Brazil Reai";
    $retVal['BSD']="Bahamas Dollar";
    $retVal['CAD']="Canada Dollar";
    $retVal['CHF']="Switzerland Franc";
    $retVal['CLP']="Chile Peso";
    $retVal['CNY']="China Yuan Renminbi";
    $retVal['COP']="Colombia Peso";
    $retVal['CRC']="Costa Rica Colone";
    $retVal['CYP']="Cyprus Pound";
    $retVal['CZK']="Czech Republic Koruny";
    $retVal['DEM']="Germany Deutsche Mark*";
    $retVal['DKK']="Denmark Kroner";
    $retVal['DOP']="Dominican Republic Peso";
    $retVal['DZD']="Algeria Dinar";
    $retVal['EEK']="Estonia Krooni";
    $retVal['EGP']="Egypt Pound";
    $retVal['ESP']="Spain Peseta*";
    $retVal['EUR']="Euro";
    $retVal['FIM']="Finland Markkaa*";
    $retVal['FJD']="Fiji Dollar";
    $retVal['FRF']="France Franc*";
    $retVal['GBP']="United Kingdom Pound";
    $retVal['GRD']="Greece Drachmae*";
    $retVal['HKD']="Hong Kong Dollar";
    $retVal['HRK']="Croatia Kuna";
    $retVal['HUF']="Hungary Forint";
    $retVal['IDR']="Indonesia Rupiahs";
    $retVal['IEP']="Ireland Pounds*";
    $retVal['ILS']="Israel New Shekel";
    $retVal['INR']="India Rupee";
    $retVal['IQD']="Iraq Dinar";
    $retVal['IRR']="Iran Rial";
    $retVal['ISK']="Iceland Kronur";
    $retVal['ITL']="Italy Lire*";
    $retVal['JMD']="Jamaica Dollar";
    $retVal['JOD']="Jordan Dinar";
    $retVal['JPY']="Japan Yen";
    $retVal['KES']="Kenya Shilling";
    $retVal['KRW']="South Korea Won";
    $retVal['KWD']="Kuwait Dinar";
    $retVal['LBP']="Lebanon Pound";
    $retVal['LKR']="Sri Lanka Rupee";
    $retVal['LTL']="Lithuanian Lita";
    $retVal['LVL']="Latvian Lat";
    $retVal['LUF']="Luxembourg Franc*";
    $retVal['MAD']="Morocco Dirham";
    $retVal['MTL']="Malta Liri";
    $retVal['MUR']="Mauritius Rupee";
    $retVal['MXN']="Mexico Peso";
    $retVal['MYR']="Malaysia Ringgit";
    $retVal['NLG']="Dutch (Netherlands) Guilder*";
    $retVal['NOK']="Norway Kroner";
    $retVal['NZD']="New Zealand Dollar";
    $retVal['OMR']="Oman Rial";
    $retVal['PEN']="Peru Nuevos Sole";
    $retVal['PHP']="Philippines Peso";
    $retVal['PKR']="Pakistan Rupee";
    $retVal['PLN']="Poland Zlotych";
    $retVal['PTE']="Portugal Escudo*";
    $retVal['QAR']="Qatar Riyal";
    $retVal['ROL']="Romania Lei";
    $retVal['RON']="Romania New Leu";
    $retVal['RUB']="Russia Ruble";
    $retVal['SAR']="Saudi Arabia Riyal";
    $retVal['SDD']="Sudan Dinar";
    $retVal['SEK']="Sweden Kronor";
    $retVal['SGD']="Singapore Dollar";
    $retVal['SIT']="Slovenia Tolar";
    $retVal['SKK']="Slovakia Koruny";
    $retVal['THB']="Thailand Baht";
    $retVal['TND']="Tunisia Dinar";
    $retVal['TRL']="Turkey Lira*";
    $retVal['TRY']="Turkey New Lira";
    $retVal['TTD']="Trinidad and Tobago Dollar";
    $retVal['TWD']="Taiwan New Dollar";
    $retVal['USD']="United States Dollar";
    $retVal['VEB']="Venezuela Bolivare";
    $retVal['VND']="Vietnam Dong";
    $retVal['XAF']="CFA BEAC Franc";
    $retVal['XAG']="Silver Ounce";
    $retVal['XAU']="Gold Ounce";
    $retVal['XCD']="Eastern Caribbean Dollar";
    $retVal['XDR']="IMF Special Drawing Right";
    $retVal['XOF']="CFA BCEAO Franc";
    $retVal['XPD']="Palladium Ounce";
    $retVal['XPF']="CFP Franc";
    $retVal['XPT']="Platinum Ounce";
    $retVal['ZAR']="South Africa Rand";
    $retVal['ZMK']="Zambia Kwacha";
    return $retVal;
}
?> 
```

我想修改此代码以首先检查 `var $url="http://www.ecb.europa.eu/stats/eurofxref/eurofxref-daily.xml";`（远程 URL）是否存在（站点或链接在线），如果不存在（站点或链接离线），然后使用`var $localFile="currencies_local.xml";`（本地文件）代替..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T09:25:19.993

我会使用：

`$http_status = curl_getinfo($curl_handle, CURLINFO_HTTP_CODE);`

检查状态码。任何 >= 400 都可能是坏消息，所以使用缓存。

# linux - 将帧保存到文件（linux 脚本）

> ID：10977372
> 
> 赞同：1
> 
> 时间：2012-06-11T09:22:21.683
> 
> 标签：linux, shell, framebuffer

我想捕获屏幕的当前帧并将其保存到图像文件（.png、.bmp 等）我必须通过 shell 脚本来执行此操作..我搜索了很多但找不到任何可以管理的命令在没有安装任何第三方软件的情况下这样做..请帮帮我...我需要至少保持第三方软件的参与

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T09:30:44.277

您可以通过运行以下命令获取帧缓冲区的原始数据：

```
cat /dev/fb0 > screen.raw 
```

然后，您将需要一些工具将数据转换为所需的格式，例如`png`. Imagemagick 有该工具`convert`，它应该可以帮助您解决问题。

或者使用这个工具[fbgrab](http://hem.bredband.net/gmogmo/fbgrab/)。

# android - 滚动查看超出屏幕大小的项目

> ID：10977376
> 
> 赞同：0
> 
> 时间：2012-06-11T09:22:28.947
> 
> 标签：android, android-listview, scrollview

我有一个显示屏幕，其中的项目超出了容量。我想让它可滚动但无法弄清楚 XML。我有以下代码

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView android:id="@+id/scrollView1"
    android:layout_width="fill_parent" android:layout_height="fill_parent"
    xmlns:android="http://schemas.android.com/apk/res/android"    

    <LinearLayout 
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Auto Settings"
        android:textAppearance="?android:attr/textAppearanceLarge" />

    //more items
    </LinearLayout>
</ScrollView> 
```

它在第一个线性布局中引发错误。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T09:29:12.933

这是普通的 XML 语法错误。用终止您的`ScrollView`标签`>`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T10:21:27.263

你可以试试这段代码

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@drawable/bg_1"
    android:orientation="vertical" >

  <ScrollView
    android:id="@+id/ScrollView1"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_margin="10dp" >

    <RelativeLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerInParent="true" >

        <ImageButton android:id="@+id/imageUser"
            android:layout_width="108dip"
            android:layout_height="81dip"
            android:layout_marginTop="10dp"
            android:background="@drawable/bg_profile" />

        // more items
    </RelativeLayout>
  </ScrollView>
</RelativeLayout> 
```

# asp.net - ListItem.Attributes.Add 不起作用

> ID：10977378
> 
> 赞同：2
> 
> 时间：2012-06-11T09:22:39.630
> 
> 标签：asp.net, custom-attributes, listitem

我正在尝试将自定义属性添加到列表项，但它没有添加它

我的代码是这个

```
ListItem item = new ListItem(teamMemberGroup.Name, teamMemberGroup.ID);
item.Attributes.Add("teammembergroup", "true");

ddlTeamGroups.Items.Add(item);
ddlTeamGroups1.Items.Add(item); 
```

它只是在 Html 中添加选项文本和值，但没有属性！我的下拉菜单在更新面板内，但我认为更新面板没有出错，因为我不是在寻找回发，但它只是关于第一页加载加载

任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T09:31:56.380

您使用添加的属性

```
item.Attributes.Add("teammembergroup", "true"); 
```

将仅针对客户端添加到列表项中，它不会为服务器端维护其属性集合。如果您想查看添加的属性，您可以转到页面的“查看源代码”，并可以在呈现的下拉列表控件中看到添加的属性。

# android - Android - 如何创建控件以从我的手机联系人中选择联系人？

> ID：10977381
> 
> 赞同：0
> 
> 时间：2012-06-11T09:22:49.443
> 
> 标签：android

我想在用户表单上创建一个控件，这样每当我点击它时，我的手机联系人列表就会显示为与 android 联系人应用程序相同的搜索、索引和分组功能，我会选择任何联系人并返回到我的表单。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T09:27:08.113

您可能想看看这个：[如何调用 Android 联系人列表？](https://stackoverflow.com/questions/866769/how-to-call-android-contacts-list?answertab=active#tab-top)

基本上分为三个步骤。

1.  在您的清单中添加读取联系人权限
2.  以正确的意图调用联系人选择器，然后`startActivityForResult(..)`
3.  收听 Contacts Intent 的结果。并以您想要的任何方式处理它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T09:29:31.133

用户 Android 联系 ContentProvider 以访问电话联系号码和其他信息。

谢谢

# symfony - 应用程序中的两个不同的 FOSUser

> ID：10977384
> 
> 赞同：2
> 
> 时间：2012-06-11T09:23:07.883
> 
> 标签：symfony, fosuserbundle

我遇到了 FOSUserBundle 的问题。

在我的 Symfony2 应用程序中，我想实现两个不同的用户。我有一个实体用户，用于基本用户，一个实体 UserPro 有更多信息。

我的问题是我想用这两个实体配置我的包：

```
fos_user:
    db_driver:     orm
    firewall_name: main
    user_class:    Btp\UserBundle\Entity\User

fos_userpro:
    db_driver:     orm
    firewall_name: pro
    user_class:    Btp\UserProBundle\Entity\UserPro 
```

因此，在我的 security.yml 中使用 fos_user 和 fos_userpro 作为提供者。

我不确定这是否可能。我收到一个错误：

> 没有扩展能够加载“fos_userpro”的配置（在 /..../app/config/config.yml 中）。寻找命名空间“fos_userpro”，找到“框架”，“安全”，...

而且在查看FOSUserBundle文件的时候，感觉fos_user不是配置变量，是直接写成字符串的。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T10:08:03.113

您可能应该[在此处查看此（官方）页面](https://github.com/FriendsOfSymfony/FOSUserBundle/blob/master/Resources/doc/command_line_tools.md)

如前所述，您的问题可能取决于角色。

例如，您可以像这样创建一个普通用户：

```
php app/console fos:user:create testuser 
```

或具有管理员权限的用户，如下所示：

```
php app/console fos:user:create adminuser --super-admin 
```

我建议您阅读文档以获取有关角色的更多选项和详细信息。

问候

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T10:18:53.673

在您的情况下，您需要创建 4 个不同的实体，用户注册、用户注册、用户和组。有关更多详细信息，您需要查看 symfony2 安全性。

[点击链接](http://symfony.com/doc/current/cookbook/security/entity_provider.html)

在 user-registration,user-proregistration 中，您需要一个额外的字段 user_id 来将这两个实体与用户相关联。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-23T15:33:23.203

您正在尝试重新定义 FOSUser 设置。取而代之的是，您需要创建单独的防火墙和提供程序（如果您愿意，可能是编码器）。[检查这个答案](https://stackoverflow.com/a/7089698/309268)

`fos_user`是 FOSUser 捆绑包中的硬编码键，基于它们加载的设置。您不能只是发明自己的配置并期望它能够工作。认为它等同于`doctrine`或`twig`或`swiftmailer`在你的`config.yml`

此外`fos_user.firewall_name`，仅在 FOSBundle 中的注册侦听器中用于自动登录并在注册后重定向用户（如果启用）。

`fos_user.user_class`用于创建和验证表单，在注册期间创建新用户（您可以使用挂钩在此处添加您的功能）以及在简单的配置文件管理中是 FOSUser 的一部分。理论上，在您的情况下应该可以使用某种抽象用户实体类，或者简单地使用`User`实体并声明您的`Entity\UserPro`扩展`Entity\User`。

# c++ - 调用 C++ 成员函数指针：this-pointer 已损坏

> ID：10977388
> 
> 赞同：5
> 
> 时间：2012-06-11T09:23:21.377
> 
> 标签：c++, function, pointers, member, void

我需要将一些成员函数指针转换为`void*`指针（因为我需要将它们推送到 Lua 堆栈，但问题与 Lua 无关）。

我使用`union`. 但是，当我将成员函数指针转换为 a`void*`并再次转换回来，然后尝试使用类的实例调用指针时，`this`指针会损坏。`void*`奇怪的是，如果我将指针转换回 C 风格的函数指针，并将指向类的指针作为它的第一个参数，那么这个问题就不会发生。

这是演示问题的一段代码：

```
#include <iostream>
using namespace std;

class test
{
    int a;

    public:
        void tellSomething ()
        {
            cout << "this: " << this << endl;
            cout << "referencing member variable..." << endl;
            cout << a << endl;
        }
};

int main ()
{
    union
    {
        void *ptr;
        void (test::*func) ();
    } conv1, conv2;

    union
    {
        void *ptr;
        void (*func) (test*);
    } conv3;

    test &t = *new test ();

    cout << "created instance: " << (void*) &t << endl;

    // assign the member function pointer to the first union
    conv1.func = &test::tellSomething;

    // copy the void* pointers
    conv2.ptr = conv3.ptr = conv1.ptr;

    // call without conversion
    void (test::*func1) () = conv1.func;
    (t.*func1) (); // --> works

    // call with C style function pointer invocation
    void (*func3) (test*) = conv3.func;
    (*func3) (&t); // --> works (although obviously the wrong type of pointer)

    // call with C++ style member function pointer invocation
    void (test::*func2) () = conv2.func;
    (t.*func2) (); // `this' is the wrong pointer; program will crash in the member function

    return 0;
} 
```

那就是输出：

```
created instance: 0x1ff6010
this: 0x1ff6010
referencing member variable...
0
this: 0x1ff6010
referencing member variable...
0
this: 0x10200600f
referencing member variable...
zsh: segmentation fault (core dumped)  ./a.out 
```

这是编译器（GCC）中的错误吗？我知道`void*`和（成员）函数指针之间的这种转换不符合标准，但奇怪的是，它在转换`void*`为 C 风格的函数指针时有效。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-11T10:17:38.750

将这两行添加到您的代码中，答案将一目了然：

```
cout << "sizeof(void*)=" << sizeof(conv1.ptr) << endl;
cout << "sizeof(test::*)=" << sizeof(conv1.func) << endl; 
```

原因很简单。考虑：

```
class Base1
{
 public:
 int x;
 void Foo();
 Base1();
};

class Base2
{
 public:
 float j;
 void Bar();
 Base2();
};

class Derived : public Base1, public Base2
{
 Derived();
}; 
```

当您调用`Foo`a`Derived`时，`this`指针必须指向`Base1::x`。但是当你调用`Bar`a`Derived`时，`this`指针必须指向`Base2::j`! 因此，指向成员函数的指针必须同时包含函数的地址和“调整器”，以更正`this`指针以指向函数期望作为`this`指针的正确类型的类的实例。

您正在丢失调整器，导致`this`指针随机调整。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T10:20:58.350

奇怪的是，在这里（在 VS2005 下），第 1 次和第 3 次调用工作正常，但第 2 次（使用 conv3）失败，因为 this 被破坏了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T10:24:34.917

在我看来，就好像在您的实现中，`size(void*)`指向成员函数类型的实例的第一个字节`void (test::*) ()`恰好发生在这种情况下，是内存中函数的地址。作为实现细节，该函数是可调用的，就好像它是`this`作为第一个参数的自由函数一样。这就是为什么`conv3`似乎有效。

`sizeof(void*)`但是，当您尝试将这些第一个字节复制到指向成员函数类型的不同实例中时，您的运气已经耗尽。其余部分中的未初始化垃圾`conv2`，一旦被解释为初始代码地址之后的指向成员函数的其余部分，就会出错。我怀疑那里有一些标志和偏移量，用于记录有关虚拟功能以及多重继承和虚拟继承的信息。当该信息不正确时，事情就会出错。

# android - 获取有关 Android 中所有类型的外部存储的信息

> ID：10977394
> 
> 赞同：2
> 
> 时间：2012-06-11T09:23:39.623
> 
> 标签：android, android-sdcard

大多数设备只有一个内部存储和一个外部存储（通常是 SD 卡，并且是可移动的）。

API 有一些方法，您可以询问外部存储是否[可移动](http://developer.android.com/reference/android/os/Environment.html#isExternalStorageRemovable%28%29)，并[获取其路径](http://developer.android.com/reference/android/os/Environment.html#getExternalStorageDirectory%28%29)。从 API 11 开始，我认为还可以检查外部存储是否实际上是设备的一部分（通过[isExternalStorageEmulated](http://developer.android.com/reference/android/os/Environment.html)）。

但是，有些设备（如 Galaxy S/S2/S3）有多个外部存储，每个都可以移动或不可移动，并且每个都有自己的路径。对于此类设备，出于某种原因“ [isExternalStorageEmulated](http://developer.android.com/reference/android/os/Environment.html#isExternalStorageEmulated%28%29) ”返回true；我什至不确定这意味着什么，因为它具有两种类型的外部存储。

如何获取有关所有外部存储的信息，例如以下内容（前两个对我来说最重要）：

*   小路
*   是可移动的
*   存储类型（例如：sdcard、内部设备、HDD...）
*   连接类型（usb、读卡器、挂载文件...）。我认为这是不可能的，因为已经有一个用于[USB的 API](http://developer.android.com/guide/topics/usb/index.html)

# extjs - 如何在extjs mvc的网格中将控制器事件添加到href

> ID：10977395
> 
> 赞同：3
> 
> 时间：2012-06-11T09:23:43.763
> 
> 标签：extjs, extjs-mvc, extjs4.1

在我的 extjs 网格“cutterGrid”中，我有一个具有以下输出的渲染器

```
<a href="#" class="myclass">Product 1</a> 
```

在我的控制器上，我有以下内容

```
 '#cutterGrid':{
        cellclick :this.onCutterSelectRow
    }, 
```

这可行，但显然这可以单击整行。我只想在特定的单元格上使用它。

这是我网格中的字段

```
 {
                            xtype:'gridcolumn',
                            dataIndex:'CutterNumber',
                            text:'Cutter',
                            renderer: renderCutter,
                            flex:1,
                            sortable: true
                        }, 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T16:56:11.917

cellclick 事件将几个参数传递给您的函数 - 其中之一是 EventObject

```
cellclick( Ext.view.Table this, HTMLElement td, Number cellIndex, Ext.data.Model record, HTMLElement tr, Number rowIndex, Ext.EventObject e, Object eOpts ) 
```

在您的功能中，您应该能够做到这一点：

```
function onCutterSelectRow(table, td, cellIndex, record, tr, rowIndex, e, eOpts)
{
    var target = e.getTarget();
    //test HtmlElement target to be your anchor, by class name and element.
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T12:01:31.050

订阅`ahref`事件的问题是您需要等到 HTML 元素呈现后才订阅它。当我的表单上有一个需要收听的链接时，我做了这样的事情：

```
{
   xtype: 'box',
   autoEl: '<a href='#'>Link</a>',
   listeners: {
      render: function(e) {
         e.getEl().down('a').on('click', function() {
            console.log('GOTCHA!');
         }, e);
      }
   }
} 
```

# android - 通过 facebook sdk 将视频上传到 facebook 但不显示

> ID：10977396
> 
> 赞同：1
> 
> 时间：2012-06-11T09:23:43.930
> 
> 标签：android, facebook

目前，我正在创建一个将视频上传到 facebook 的应用程序。我使用 facebook sdk，代码如下：

```
 AsyncFacebookRunner mfacebook=new AsyncFacebookRunner(facebook);
   mfacebook.request("me/videos", parameters, "POST", new fbRequestListen(), null); 
```

我上传视频成功..但是视频数量增加但它没有显示在 Facebook 的视频目录中..只有视频目录中有一个视频:(

图片参考： ![在此处输入图像描述](../Images/0cb73847b8e97fee57ec5cf0fcd77e63.png)

[http://nn8.upanh.com/b4.s29.d2/4577cd2da1157eb014d4529407c148b7_45985628.video1.png](http://nn8.upanh.com/b4.s29.d2/4577cd2da1157eb014d4529407c148b7_45985628.video1.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T10:26:54.210

我不清楚您所说的“视频目录中的视频”是什么意思，但我会尝试一下：

如果您的意思是`/videos`用户的连接，当您在上传后使用 GET 请求访问时，不包含新上传的视频，这有两个原因：

1.  该视频需要一段时间才能处理，并且在处理完成之前无法通过 API 访问
2.  该`/videos`连接仅包括用户被标记的视频，而不包括用户拥有或上传的视频。

您应该保存来自视频上传调用的回调，即视频 ID - 一旦处理完成，就可以通过 API 访问它。

在 Graph API 中，您可以在以下位置获取用户上传视频的列表`/me/videos/uploaded`

您还可以通过 FQL 访问用户上传的视频列表： `SELECT vid, owner, title, description, thumbnail_link, embed_html, updated_time, created_time FROM video WHERE owner=me()`

# c++ - 拦截 WinAPI 调用并修改返回值

> ID：10977398
> 
> 赞同：2
> 
> 时间：2012-06-11T09:23:58.443
> 
> 标签：c++, winapi

我已经看到诸如[RunAsDate 之](http://www.nirsoft.net/utils/run_as_date.html)类的应用程序可以修改系统功能，并且仅针对某些软件，以便当它们运行并调用 OS 方法时，这些调用返回改变的值。

> RunAsDate 拦截返回当前日期和时间（GetSystemTime、GetLocalTime、GetSystemTimeAsFileTime）的内核 API 调用，并将当前日期/时间替换为您指定的日期/时间。

现在我很想做同样的事情，只是我希望我能改变`GetMonitorInfo`。一切都很好，除了我不知道从哪里开始。有人可以指出我正确的方向吗？

如果没有防病毒软件检测到这一点，则加分。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-11T09:46:38.283

常见的解决方案是[Microsoft Detours](http://research.microsoft.com/en-us/projects/detours/)。显然，任何好的防病毒程序都会*检测到*它，但是你有一个合理的机会可以容忍 Detours，因为它来自 Microsoft。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-11T09:27:08.737

您可以为该特定功能安装**挂钩。**这是有关如何执行此操作的[教程。](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644960%28v=vs.85%29.aspx)

# jquery - 使用 touchstart 在 iphone/ipad 上关闭 jQuery Tools 工具提示

> ID：10977400
> 
> 赞同：1
> 
> 时间：2012-06-11T09:24:04.327
> 
> 标签：jquery, ipad, tooltip, touchstart

如果检测到 iphone/ipad/ipod，我将运行以下代码：

```
$('.tooltip-trigger').tooltip({offset: [20, -110],relative:true, events: { def: 'touchstart,blur'} }); 
```

我通过声明 def:'touchstart' 使初始触摸工作而不是悬停，但是这些框不会关闭并调用另一个 touchstart，如 def:'touchstart，touchstart' 不起作用。def: 'toggle' 也没有，这对我来说似乎是合乎逻辑的。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-25T17:37:29.703

我做了同样的事情。就是这样：

```
var isiPad = navigator.userAgent.match(/iPad/i) != null; 
```

我的工具提示功能如下所示：

```
$(function() {
    $(document).tooltip({
        items: "[data-fn]",
          content: function() {
              var element = $( this );
              if ( element.is( "[data-fn]" ) ) {
              var s = element.attr('data-fn');
              var fn = /* some text content */

              if (isiPad) fn += "<div align=right'><a href='#' class='ipadTooltipHack'>close</a></div>";
              return fn;
              } 
          }     
       });
}); 
```

最后我添加了这个：

```
$('.ipadTooltipHack').tooltip('close'); 
```

似乎工作。

我尝试在工具提示功能中添加一个隐藏：选项以在 10 秒后自动隐藏，但随后您无法再次打开该工具提示，直到打开另一个工具提示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T12:47:25.970

我通过在智能手机和平板电脑的工具提示上放置一个关闭按钮解决了这个问题

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-05T15:45:41.403

我无法复制 Bill Nobes 和 nlsbshtr 的解决方案，按下“关闭”链接也导航到页面顶部。我将其更改为更简单的解决方案。

这是基于 jQuery 和 Modernizr.touch 函数来检测我们是否在触摸设备上。它使用标准**标题**标签，并使用推荐的单击关闭方法关闭打开的工具提示。

```
$(function() {
    $( '.tooltip-trigger' ).tooltip(
    {
        content: function() {
            var element = $( this );
            var s = element.attr('title');
            if ('' == s)
                return null;
            if (Modernizr.touch) // using Modernizr to detect touch devices.
                s += "&lt;div align=right'>&lt;a href=\"javascript:$('.tooltip-trigger').tooltip('close');\" class='touchTooltipHack'>close&lt;/a>&lt;/div>";
            return s;
        } 
    });
}); 
```

替换 `.tooltip-trigger`为您选择的类。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-09T21:22:46.290

user2956826 的回答遵循 jqueryui 的建议[-](http://bugs.jqueryui.com/ticket/8850)即： -

> Safari Mobile 7.0+（也可能是更早的版本）存在一个错误，即点击事件不会在通常不具有交互性的元素上触发

...详细[在这里](https://developer.mozilla.org/en-US/docs/Web/Events/click#Safari_Mobile)

但是，包含的 HTML 特殊字符似乎在浏览器中按字面意思显示，我需要用双引号内的非 html 等效字符替换它们。在 align=right 周围的同一行中还（微不足道地）缺少一个单引号，所以我有例如。

```
 s += "<div align='right'><a href=\"javascript:$('.tooltip-trigger').tooltip('close');\" class='touchTooltipHack'>close</a></div>"; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-12-14T00:56:13.133

好吧，刚刚在同一个问题中运行，但还有一个要求 - 因为我有多个工具提示，我至少需要在打开新工具提示时关闭打开的工具提示。有了这个简单的实现，也许会帮助别人

```
var $tooltipCaller = $('.tooltip');

  $tooltipCaller.tooltip({
    open: function (e, ui) {
      $tooltipCaller.not(this).tooltip('close');
    }
  }); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-11-18T09:07:15.207

对我来说，这有效：

添加CSS：

`.ui-tooltip{cursor:pointer;}`

添加jquery：

```
$('body').on('click','.ui-tooltip', function(){
   $(this).hide();
}); 
```

之后，即使在 iPad 上单击，工具提示也会关闭。

# java - 哪些方法可以实现为“正确”的 DAO 类？

> ID：10977401
> 
> 赞同：3
> 
> 时间：2012-06-11T09:24:04.543
> 
> 标签：java, spring, design-patterns, jdbc

我知道这个问题的标题不是很有描述性，但我不知道如何更好地解释这个问题......

我想知道您对在 DAO 类的实现过程中出现的疑问的看法。

我正在实现一个`CustomerDAO`必须提供对我的应用程序数据库中相关数据的访问的类。我已经像往常一样实现了经典的 CRUD 方法，但是现在我需要实现一些方法来提供检索到的使用“特定”查询的数据。

我的意思是：

```
SELECT [...] FROM CUSTOMERS WHERE <CUSTOMER_PROPERTY_1> = 'X' AND <CUSTOMER_SOME_DATE> > ? AND <CUSTOMER_SOME_DATE> < ? 
```

所以我的问题是，要遵循的正确方法或“最佳实践”是什么？实现许多特定方法，例如`getCustomersByXPropertyBetweenDates()`或尝试泛化查询并实现更“通用”（不是 Java 意义上的）方法？

注意我使用的是纯 JDBC，`JdbcTemplate`由 Spring Framework v 3.1 提供

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T10:04:08.237

您将如何进行您列出的“通用”查询？另外，选词不好。

我只会有单独的查询，分开。不要尝试做任何聪明的事情，你有一个特定的查询保持简单不要尝试适应另一个查询。

如果您想要适当的通用性[，我建议您使用 ORM](https://stackoverflow.com/a/10173413/106261)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T09:38:13.767

我认为这是更多的业务驱动的决定。如果您有与不同方法相关的单独业务操作，则可以创建特定方法。如果您有业务操作“高级搜索表单”，其中包含搜索条件的字段包，则使用表单数据创建一个特殊的“查询”实体类更有意义，然后通过DAO实现将其转换为sql查询。

另外，请查看[查询 dsl](http://blog.mysema.com/2011/01/querying-in-sql-with-querydsl.html)，它可能会简化很多 DAO 层。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T10:58:19.787

实现一个抽象 DAO 类，该类定义/实现所有 DAO 的通用方法（CRUD）。在特定的 DAO 接口中定义业务方法并在 DAO 类中实现。

```
public interface IDAO< T extends Serializable>{

   T save( final T entity );
   T update( final T entity);
   void delete( final long id );
   void deleteAll();
   T findOne( final long id );
   List< T > findAll();

}

public abstract class AbstractDAO< T extends Serializable > implements IDAO< T >{

protected abstract JdbcTemplate getTemplate();

protected abstract T save(T entity);

    ...

} 
```

客户 DAO 接口将定义业务特定方法

```
public interface ICustomerDAO extends IDAO<Customer>
{
   public List<Customer> findDormantCustomers();

} 
```

客户 DAO 实现将如下所示。

```
public class CustomerDAO extends AbstractDAO<Customer> implements ICustomerDAO{

public Customer save(Customer customer){
   getTemplate().insert(...);
   return customer;
}

    public List<Customer> findDormantCustomers(){
       ...
       return;
    }
} 
```

# c# - 我用来随机排序列表。我可以对 Enumerable 做同样的事情吗？

> ID：10977402
> 
> 赞同：2
> 
> 时间：2012-06-11T09:24:11.040
> 
> 标签：c#, list, random, ienumerable

这是我在 List 中随机排序第一个 N 元素的代码：

```
int upper = 1;
if (myList.Count > 1)
{
    Random r = new Random();
    upper = Math.Min(maxNumberOfPackets, myList.Count);
    for (int i = 0; i < upper; i++)
    {
        int randInd = r.Next(i, myList.Count);
        var temp = myList[i];
        myList[i] = myList[randInd];
        myList[randInd] = temp;
    }
} 
```

好吧，现在我有“必要性”只使用 Enumerable（出于某种原因；所以我不想将它转换为 Enumerable）。

据您所知，我可以对 Enumerable 做同样的事情吗？我认为痛苦是在 X 位置访问元素......

我很好奇...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-11T09:27:55.007

对于`IEnumerable[<T>]`源，您通常应该只假设它们可以被读取一次，当然在您使用它之前您无法可靠地知道长度。随机化它通常需要缓冲。你也可以这样做：

```
var list = source.ToList(); 
```

并且只需使用您现有的列表随机代码。`IEnumerable[<T>]`如果您想保持输入和输出相似，您当然可以再次返回该列表。

如果你**真的**想，你可以从头开始：

```
static IEnumerable<T> ScrambleStart(this IEnumerable<T> source,
        int numberToScramble)
{
  using(var iter = source.GetEnumerator()) {
    List<T> list = new List<T>();
    while(iter.MoveNext()) {
        list.Add(iter.Current);
        if(list.Count == numberToScramble) break;
    }
    ScrambleList(list); // your existing code
    foreach(var item in list) yield return item;
    while(iter.MoveNext()) {
        yield return iter.Current;
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-11T09:28:38.707

`IEnumerable`表示“仅向前游标”，它可能返回流式传输的数据（例如来自数据库）。因此，为了能够订购一个可枚举（无论它是否是随机的），确实意味着您需要缓存它，仅仅是因为您需要拥有所有值才能确定排序。也就是说，您可以`Enumerable.OrderBy`为此使用运算符，但同样，它会在幕后为您进行缓存。

```
var r = new Random();

IEnumerable sorted = myList.OrderBy(i => r.Next()); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-11T09:35:10.963

您应该使用[Reservoir sampling](http://en.wikipedia.org/wiki/Reservoir_sampling)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-11T10:01:55.380

下面的实现将从原始输入产生一个（伪）随机序列。（除了 Random 是伪随机之外）伪性是基于猜测序列的长度，这在大多数情况下当然是错误的。对于长度小于 maxJump 长度的序列，它将是随机的。如果事实证明元素的数量是 maxJump 值的一半或更多，它将增加以允许更高程度的随机性。

```
public IEnumerable<T> Randomize(this IEnumerable<T> source,int maxJump = 1000){
    var cache = new List<T>();
    var r = new Random();
    var enumerator = source.GetEnumerator();
    var totalCount = 1;
    while(enumerator.MoveNext()){
       var next = r.Next(0,maxJump);
       if(next < cache.Count){
          //the element we are searching for is in the cache
          yield return cache[next];
          cache.RemoveAt(next);
       } else {
         next = next - cache.Count;
         do{
          totalCount++;
          if(next == 0){
             //we've found the next element so yield
             yield return enumerator.Current;
          } else {
             //not the element we are looking for so cache
             cache.Insert(r.Next(0,cache.Count),enumerator.Current);
          }
          --next;
        }while(next > 0 && enumerator.MoveNext());
        //if we've reached half of the maxJump length
        //increase the max to allow for higher randomness
        if("*totalCount == maxJump){
            maxJump *= 2;
        }
      }
    }
    //Yield the elements in the cache
    //they are already randomized
    foreach(var elem in cache){
          yield return elem;
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-11T09:30:03.560

您总是必须以`IEnumerable`某种方式消耗您的随机化它，因此您可以调用`.ToList()`它并使用您的排序方法。

考虑一个`IEnumerable`可以有无限数量的项目的事实。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-11T09:45:35.890

这可行，但对于要从中随机选择相对少量元素的大型序列来说效率极低（因为它遍历源序列的每个元素）。

```
/// <summary>Randomly selects items from a sequence.</summary>
/// <typeparam name="T">The type of the items in the sequence.</typeparam>
/// <param name="sequence">The sequence from which to randomly select items.</param>
/// <param name="count">The number of items to randomly select from the sequence.</param>
/// <param name="sequenceLength">The number of items in the sequence among which to randomly select.</param>
/// <param name="rng">The random number generator to use.</param>
/// <returns>A sequence of randomly selected items.</returns>
/// <remarks>This is an O(N) algorithm (N is the sequence length).</remarks>

public static IEnumerable<T> RandomlySelectedItems<T>(IEnumerable<T> sequence, int count, int sequenceLength, System.Random rng)
{
    if (sequence == null)
    {
        throw new ArgumentNullException("sequence");
    }

    if (count < 0 || count > sequenceLength)
    {
        throw new ArgumentOutOfRangeException("count", count, "count must be between 0 and sequenceLength");
    }

    if (rng == null)
    {
        throw new ArgumentNullException("rng");
    }

    int available = sequenceLength;
    int remaining = count;
    var iterator  = sequence.GetEnumerator();

    for (int current = 0; current < sequenceLength; ++current)
    {
        iterator.MoveNext();

        if (rng.NextDouble() < remaining/(double)available)
        {
            yield return iterator.Current;
            --remaining;
        }

        --available;
    }
} 
```

# python - 具有计算值和非计算值的元组列表？

> ID：10977405
> 
> 赞同：1
> 
> 时间：2012-06-11T09:24:22.780
> 
> 标签：python, list, mapping, tuples, immutability

my s 的前两个元素`tuple`被计算（见下文），但我希望它们是 3- `tuple`s 而不是 2- `tuple`s，最后一个元素设置为`1`。

```
from itertools import permutations

if __name__ == '__main__':
    alphabet='abcdefghijklmnopqrstuvwxyz'
    print list(permutations(alphabet,2)) 
```

[输出](http://ideone.com/jagv6)：

```
[('a', 'b'), ('a', 'c'), ('a', 'd'), ('a', 'e'), ('a', 'f'), ('a', 'g'), ('a', 'h'), ('a', 'i'), ('a', 'j'), ('a', 'k'), ('a', 'l'), ('a', 'm'), ('a', 'n'), ('a', 'o'), ('a', 'p'), ('a', 'q'), ('a', 'r'), ('a', 's'), ('a', 't'), ('a', 'u'), ('a', 'v'), ('a', 'w'), ('a', 'x'), ('a', 'y'), ('a', 'z'), ('b', 'a'), ('b', 'c'), ('b', 'd'), ('b', 'e'), ('b', 'f'), ('b', 'g'), ('b', 'h'), ('b', 'i'), ('b', 'j'), ('b', 'k'), ('b', 'l'), ('b', 'm'), ('b', 'n'), ('b', 'o'), ('b', 'p'), ('b', 'q'), ('b', 'r'), ('b', 's'), ('b', 't'), ('b', 'u'), ('b', 'v'), ('b', 'w'), ('b', 'x'), ('b', 'y'), ('b', 'z'), ('c', 'a'), ('c', 'b'), ('c', 'd'), ('c', 'e'), ('c', 'f'), ('c', 'g'), ('c', 'h'), ('c', 'i'), ('c', 'j'), ('c', 'k'), ('c', 'l'), ('c', 'm'), ('c', 'n'), ('c', 'o'), ('c', 'p'), ('c', 'q'), ('c', 'r'), ('c', 's'), ('c', 't'), ('c', 'u'), ('c', 'v'), ('c', 'w'), ('c', 'x'), ('c', 'y'), ('c', 'z'), ('d', 'a'), ('d', 'b'), ('d', 'c'), ('d', 'e'), ('d', 'f'), ('d', 'g'), ('d', 'h'), ('d', 'i'), ('d', 'j'), ('d', 'k'), ('d', 'l'), ('d', 'm'), ('d', 'n'), ('d', 'o'), ('d', 'p'), ('d', 'q'), ('d', 'r'), ('d', 's'), ('d', 't'), ('d', 'u'), ('d', 'v'), ('d', 'w'), ('d', 'x'), ('d', 'y'), ('d', 'z'), ('e', 'a'), ('e', 'b'), ('e', 'c'), ('e', 'd'), ('e', 'f'), ('e', 'g'), ('e', 'h'), ('e', 'i'), ('e', 'j'), ('e', 'k'), ('e', 'l'), ('e', 'm'), ('e', 'n'), ('e', 'o'), ('e', 'p'), ('e', 'q'), ('e', 'r'), ('e', 's'), ('e', 't'), ('e', 'u'), ('e', 'v'), ('e', 'w'), ('e', 'x'), ('e', 'y'), ('e', 'z'), ('f', 'a'), ('f', 'b'), ('f', 'c'), ('f', 'd'), ('f', 'e'), ('f', 'g'), ('f', 'h'), ('f', 'i'), ('f', 'j'), ('f', 'k'), ('f', 'l'), ('f', 'm'), ('f', 'n'), ('f', 'o'), ('f', 'p'), ('f', 'q'), ('f', 'r'), ('f', 's'), ('f', 't'), ('f', 'u'), ('f', 'v'), ('f', 'w'), ('f', 'x'), ('f', 'y'), ('f', 'z'), ('g', 'a'), ('g', 'b'), ('g', 'c'), ('g', 'd'), ('g', 'e'), ('g', 'f'), ('g', 'h'), ('g', 'i'), ('g', 'j'), ('g', 'k'), ('g', 'l'), ('g', 'm'), ('g', 'n'), ('g', 'o'), ('g', 'p'), ('g', 'q'), ('g', 'r'), ('g', 's'), ('g', 't'), ('g', 'u'), ('g', 'v'), ('g', 'w'), ('g', 'x'), ('g', 'y'), ('g', 'z'), ('h', 'a'), ('h', 'b'), ('h', 'c'), ('h', 'd'), ('h', 'e'), ('h', 'f'), ('h', 'g'), ('h', 'i'), ('h', 'j'), ('h', 'k'), ('h', 'l'), ('h', 'm'), ('h', 'n'), ('h', 'o'), ('h', 'p'), ('h', 'q'), ('h', 'r'), ('h', 's'), ('h', 't'), ('h', 'u'), ('h', 'v'), ('h', 'w'), ('h', 'x'), ('h', 'y'), ('h', 'z'), ('i', 'a'), ('i', 'b'), ('i', 'c'), ('i', 'd'), ('i', 'e'), ('i', 'f'), ('i', 'g'), ('i', 'h'), ('i', 'j'), ('i', 'k'), ('i', 'l'), ('i', 'm'), ('i', 'n'), ('i', 'o'), ('i', 'p'), ('i', 'q'), ('i', 'r'), ('i', 's'), ('i', 't'), ('i', 'u'), ('i', 'v'), ('i', 'w'), ('i', 'x'), ('i', 'y'), ('i', 'z'), ('j', 'a'), ('j', 'b'), ('j', 'c'), ('j', 'd'), ('j', 'e'), ('j', 'f'), ('j', 'g'), ('j', 'h'), ('j', 'i'), ('j', 'k'), ('j', 'l'), ('j', 'm'), ('j', 'n'), ('j', 'o'), ('j', 'p'), ('j', 'q'), ('j', 'r'), ('j', 's'), ('j', 't'), ('j', 'u'), ('j', 'v'), ('j', 'w'), ('j', 'x'), ('j', 'y'), ('j', 'z'), ('k', 'a'), ('k', 'b'), ('k', 'c'), ('k', 'd'), ('k', 'e'), ('k', 'f'), ('k', 'g'), ('k', 'h'), ('k', 'i'), ('k', 'j'), ('k', 'l'), ('k', 'm'), ('k', 'n'), ('k', 'o'), ('k', 'p'), ('k', 'q'), ('k', 'r'), ('k', 's'), ('k', 't'), ('k', 'u'), ('k', 'v'), ('k', 'w'), ('k', 'x'), ('k', 'y'), ('k', 'z'), ('l', 'a'), ('l', 'b'), ('l', 'c'), ('l', 'd'), ('l', 'e'), ('l', 'f'), ('l', 'g'), ('l', 'h'), ('l', 'i'), ('l', 'j'), ('l', 'k'), ('l', 'm'), ('l', 'n'), ('l', 'o'), ('l', 'p'), ('l', 'q'), ('l', 'r'), ('l', 's'), ('l', 't'), ('l', 'u'), ('l', 'v'), ('l', 'w'), ('l', 'x'), ('l', 'y'), ('l', 'z'), ('m', 'a'), ('m', 'b'), ('m', 'c'), ('m', 'd'), ('m', 'e'), ('m', 'f'), ('m', 'g'), ('m', 'h'), ('m', 'i'), ('m', 'j'), ('m', 'k'), ('m', 'l'), ('m', 'n'), ('m', 'o'), ('m', 'p'), ('m', 'q'), ('m', 'r'), ('m', 's'), ('m', 't'), ('m', 'u'), ('m', 'v'), ('m', 'w'), ('m', 'x'), ('m', 'y'), ('m', 'z'), ('n', 'a'), ('n', 'b'), ('n', 'c'), ('n', 'd'), ('n', 'e'), ('n', 'f'), ('n', 'g'), ('n', 'h'), ('n', 'i'), ('n', 'j'), ('n', 'k'), ('n', 'l'), ('n', 'm'), ('n', 'o'), ('n', 'p'), ('n', 'q'), ('n', 'r'), ('n', 's'), ('n', 't'), ('n', 'u'), ('n', 'v'), ('n', 'w'), ('n', 'x'), ('n', 'y'), ('n', 'z'), ('o', 'a'), ('o', 'b'), ('o', 'c'), ('o', 'd'), ('o', 'e'), ('o', 'f'), ('o', 'g'), ('o', 'h'), ('o', 'i'), ('o', 'j'), ('o', 'k'), ('o', 'l'), ('o', 'm'), ('o', 'n'), ('o', 'p'), ('o', 'q'), ('o', 'r'), ('o', 's'), ('o', 't'), ('o', 'u'), ('o', 'v'), ('o', 'w'), ('o', 'x'), ('o', 'y'), ('o', 'z'), ('p', 'a'), ('p', 'b'), ('p', 'c'), ('p', 'd'), ('p', 'e'), ('p', 'f'), ('p', 'g'), ('p', 'h'), ('p', 'i'), ('p', 'j'), ('p', 'k'), ('p', 'l'), ('p', 'm'), ('p', 'n'), ('p', 'o'), ('p', 'q'), ('p', 'r'), ('p', 's'), ('p', 't'), ('p', 'u'), ('p', 'v'), ('p', 'w'), ('p', 'x'), ('p', 'y'), ('p', 'z'), ('q', 'a'), ('q', 'b'), ('q', 'c'), ('q', 'd'), ('q', 'e'), ('q', 'f'), ('q', 'g'), ('q', 'h'), ('q', 'i'), ('q', 'j'), ('q', 'k'), ('q', 'l'), ('q', 'm'), ('q', 'n'), ('q', 'o'), ('q', 'p'), ('q', 'r'), ('q', 's'), ('q', 't'), ('q', 'u'), ('q', 'v'), ('q', 'w'), ('q', 'x'), ('q', 'y'), ('q', 'z'), ('r', 'a'), ('r', 'b'), ('r', 'c'), ('r', 'd'), ('r', 'e'), ('r', 'f'), ('r', 'g'), ('r', 'h'), ('r', 'i'), ('r', 'j'), ('r', 'k'), ('r', 'l'), ('r', 'm'), ('r', 'n'), ('r', 'o'), ('r', 'p'), ('r', 'q'), ('r', 's'), ('r', 't'), ('r', 'u'), ('r', 'v'), ('r', 'w'), ('r', 'x'), ('r', 'y'), ('r', 'z'), ('s', 'a'), ('s', 'b'), ('s', 'c'), ('s', 'd'), ('s', 'e'), ('s', 'f'), ('s', 'g'), ('s', 'h'), ('s', 'i'), ('s', 'j'), ('s', 'k'), ('s', 'l'), ('s', 'm'), ('s', 'n'), ('s', 'o'), ('s', 'p'), ('s', 'q'), ('s', 'r'), ('s', 't'), ('s', 'u'), ('s', 'v'), ('s', 'w'), ('s', 'x'), ('s', 'y'), ('s', 'z'), ('t', 'a'), ('t', 'b'), ('t', 'c'), ('t', 'd'), ('t', 'e'), ('t', 'f'), ('t', 'g'), ('t', 'h'), ('t', 'i'), ('t', 'j'), ('t', 'k'), ('t', 'l'), ('t', 'm'), ('t', 'n'), ('t', 'o'), ('t', 'p'), ('t', 'q'), ('t', 'r'), ('t', 's'), ('t', 'u'), ('t', 'v'), ('t', 'w'), ('t', 'x'), ('t', 'y'), ('t', 'z'), ('u', 'a'), ('u', 'b'), ('u', 'c'), ('u', 'd'), ('u', 'e'), ('u', 'f'), ('u', 'g'), ('u', 'h'), ('u', 'i'), ('u', 'j'), ('u', 'k'), ('u', 'l'), ('u', 'm'), ('u', 'n'), ('u', 'o'), ('u', 'p'), ('u', 'q'), ('u', 'r'), ('u', 's'), ('u', 't'), ('u', 'v'), ('u', 'w'), ('u', 'x'), ('u', 'y'), ('u', 'z'), ('v', 'a'), ('v', 'b'), ('v', 'c'), ('v', 'd'), ('v', 'e'), ('v', 'f'), ('v', 'g'), ('v', 'h'), ('v', 'i'), ('v', 'j'), ('v', 'k'), ('v', 'l'), ('v', 'm'), ('v', 'n'), ('v', 'o'), ('v', 'p'), ('v', 'q'), ('v', 'r'), ('v', 's'), ('v', 't'), ('v', 'u'), ('v', 'w'), ('v', 'x'), ('v', 'y'), ('v', 'z'), ('w', 'a'), ('w', 'b'), ('w', 'c'), ('w', 'd'), ('w', 'e'), ('w', 'f'), ('w', 'g'), ('w', 'h'), ('w', 'i'), ('w', 'j'), ('w', 'k'), ('w', 'l'), ('w', 'm'), ('w', 'n'), ('w', 'o'), ('w', 'p'), ('w', 'q'), ('w', 'r'), ('w', 's'), ('w', 't'), ('w', 'u'), ('w', 'v'), ('w', 'x'), ('w', 'y'), ('w', 'z'), ('x', 'a'), ('x', 'b'), ('x', 'c'), ('x', 'd'), ('x', 'e'), ('x', 'f'), ('x', 'g'), ('x', 'h'), ('x', 'i'), ('x', 'j'), ('x', 'k'), ('x', 'l'), ('x', 'm'), ('x', 'n'), ('x', 'o'), ('x', 'p'), ('x', 'q'), ('x', 'r'), ('x', 's'), ('x', 't'), ('x', 'u'), ('x', 'v'), ('x', 'w'), ('x', 'y'), ('x', 'z'), ('y', 'a'), ('y', 'b'), ('y', 'c'), ('y', 'd'), ('y', 'e'), ('y', 'f'), ('y', 'g'), ('y', 'h'), ('y', 'i'), ('y', 'j'), ('y', 'k'), ('y', 'l'), ('y', 'm'), ('y', 'n'), ('y', 'o'), ('y', 'p'), ('y', 'q'), ('y', 'r'), ('y', 's'), ('y', 't'), ('y', 'u'), ('y', 'v'), ('y', 'w'), ('y', 'x'), ('y', 'z'), ('z', 'a'), ('z', 'b'), ('z', 'c'), ('z', 'd'), ('z', 'e'), ('z', 'f'), ('z', 'g'), ('z', 'h'), ('z', 'i'), ('z', 'j'), ('z', 'k'), ('z', 'l'), ('z', 'm'), ('z', 'n'), ('z', 'o'), ('z', 'p'), ('z', 'q'), ('z', 'r'), ('z', 's'), ('z', 't'), ('z', 'u'), ('z', 'v'), ('z', 'w'), ('z', 'x'), ('z', 'y')] 
```

试图有效地做到这一点：

```
[('a', 'b', 1), ('a', 'c', 1), ('a', 'd', 1), ('a', 'e', 1), ('a', 'f', 1), ('a', 'g', 1), ('a', 'h', 1), ('a', 'i', 1), ('a', 'j', 1), ('a', 'k', 1), ('a', 'l', 1), ('a', 'm', 1), ('a', 'n', 1), ('a', 'o', 1), ('a', 'p', 1), ('a', 'q', 1), ('a', 'r', 1), ('a', 's', 1), ('a', 't', 1), ('a', 'u', 1), ('a', 'v', 1), ('a', 'w', 1), ('a', 'x', 1), ('a', 'y', 1), ('a', 'z', 1), ('b', 'a', 1), ('b', 'c', 1), ('b', 'd', 1), ('b', 'e', 1), ('b', 'f', 1), ('b', 'g', 1), ('b', 'h', 1), ('b', 'i', 1), ('b', 'j', 1), ('b', 'k', 1), ('b', 'l', 1), ('b', 'm', 1), ('b', 'n', 1), ('b', 'o', 1), ('b', 'p', 1), ('b', 'q', 1), ('b', 'r', 1), ('b', 's', 1), ('b', 't', 1), ('b', 'u', 1), ('b', 'v', 1), ('b', 'w', 1), ('b', 'x', 1), ('b', 'y', 1), ('b', 'z', 1), ('c', 'a', 1), ('c', 'b', 1), ('c', 'd', 1), ('c', 'e', 1), ('c', 'f', 1), ('c', 'g', 1), ('c', 'h', 1), ('c', 'i', 1), ('c', 'j', 1), ('c', 'k', 1), ('c', 'l', 1), ('c', 'm', 1), ('c', 'n', 1), ('c', 'o', 1), ('c', 'p', 1), ('c', 'q', 1), ('c', 'r', 1), ('c', 's', 1), ('c', 't', 1), ('c', 'u', 1), ('c', 'v', 1), ('c', 'w', 1), ('c', 'x', 1), ('c', 'y', 1), ('c', 'z', 1), ('d', 'a', 1), ('d', 'b', 1), ('d', 'c', 1), ('d', 'e', 1), ('d', 'f', 1), ('d', 'g', 1), ('d', 'h', 1), ('d', 'i', 1), ('d', 'j', 1), ('d', 'k', 1), ('d', 'l', 1), ('d', 'm', 1), ('d', 'n', 1), ('d', 'o', 1), ('d', 'p', 1), ('d', 'q', 1), ('d', 'r', 1), ('d', 's', 1), ('d', 't', 1), ('d', 'u', 1), ('d', 'v', 1), ('d', 'w', 1), ('d', 'x', 1), ('d', 'y', 1), ('d', 'z', 1), ('e', 'a', 1), ('e', 'b', 1), ('e', 'c', 1), ('e', 'd', 1), ('e', 'f', 1), ('e', 'g', 1), ('e', 'h', 1), ('e', 'i', 1), ('e', 'j', 1), ('e', 'k', 1), ('e', 'l', 1), ('e', 'm', 1), ('e', 'n', 1), ('e', 'o', 1), ('e', 'p', 1), ('e', 'q', 1), ('e', 'r', 1), ('e', 's', 1), ('e', 't', 1), ('e', 'u', 1), ('e', 'v', 1), ('e', 'w', 1), ('e', 'x', 1), ('e', 'y', 1), ('e', 'z', 1), ('f', 'a', 1), ('f', 'b', 1), ('f', 'c', 1), ('f', 'd', 1), ('f', 'e', 1), ('f', 'g', 1), ('f', 'h', 1), ('f', 'i', 1), ('f', 'j', 1), ('f', 'k', 1), ('f', 'l', 1), ('f', 'm', 1), ('f', 'n', 1), ('f', 'o', 1), ('f', 'p', 1), ('f', 'q', 1), ('f', 'r', 1), ('f', 's', 1), ('f', 't', 1), ('f', 'u', 1), ('f', 'v', 1), ('f', 'w', 1), ('f', 'x', 1), ('f', 'y', 1), ('f', 'z', 1), ('g', 'a', 1), ('g', 'b', 1), ('g', 'c', 1), ('g', 'd', 1), ('g', 'e', 1), ('g', 'f', 1), ('g', 'h', 1), ('g', 'i', 1), ('g', 'j', 1), ('g', 'k', 1), ('g', 'l', 1), ('g', 'm', 1), ('g', 'n', 1), ('g', 'o', 1), ('g', 'p', 1), ('g', 'q', 1), ('g', 'r', 1), ('g', 's', 1), ('g', 't', 1), ('g', 'u', 1), ('g', 'v', 1), ('g', 'w', 1), ('g', 'x', 1), ('g', 'y', 1), ('g', 'z', 1), ('h', 'a', 1), ('h', 'b', 1), ('h', 'c', 1), ('h', 'd', 1), ('h', 'e', 1), ('h', 'f', 1), ('h', 'g', 1), ('h', 'i', 1), ('h', 'j', 1), ('h', 'k', 1), ('h', 'l', 1), ('h', 'm', 1), ('h', 'n', 1), ('h', 'o', 1), ('h', 'p', 1), ('h', 'q', 1), ('h', 'r', 1), ('h', 's', 1), ('h', 't', 1), ('h', 'u', 1), ('h', 'v', 1), ('h', 'w', 1), ('h', 'x', 1), ('h', 'y', 1), ('h', 'z', 1), ('i', 'a', 1), ('i', 'b', 1), ('i', 'c', 1), ('i', 'd', 1), ('i', 'e', 1), ('i', 'f', 1), ('i', 'g', 1), ('i', 'h', 1), ('i', 'j', 1), ('i', 'k', 1), ('i', 'l', 1), ('i', 'm', 1), ('i', 'n', 1), ('i', 'o', 1), ('i', 'p', 1), ('i', 'q', 1), ('i', 'r', 1), ('i', 's', 1), ('i', 't', 1), ('i', 'u', 1), ('i', 'v', 1), ('i', 'w', 1), ('i', 'x', 1), ('i', 'y', 1), ('i', 'z', 1), ('j', 'a', 1), ('j', 'b', 1), ('j', 'c', 1), ('j', 'd', 1), ('j', 'e', 1), ('j', 'f', 1), ('j', 'g', 1), ('j', 'h', 1), ('j', 'i', 1), ('j', 'k', 1), ('j', 'l', 1), ('j', 'm', 1), ('j', 'n', 1), ('j', 'o', 1), ('j', 'p', 1), ('j', 'q', 1), ('j', 'r', 1), ('j', 's', 1), ('j', 't', 1), ('j', 'u', 1), ('j', 'v', 1), ('j', 'w', 1), ('j', 'x', 1), ('j', 'y', 1), ('j', 'z', 1), ('k', 'a', 1), ('k', 'b', 1), ('k', 'c', 1), ('k', 'd', 1), ('k', 'e', 1), ('k', 'f', 1), ('k', 'g', 1), ('k', 'h', 1), ('k', 'i', 1), ('k', 'j', 1), ('k', 'l', 1), ('k', 'm', 1), ('k', 'n', 1), ('k', 'o', 1), ('k', 'p', 1), ('k', 'q', 1), ('k', 'r', 1), ('k', 's', 1), ('k', 't', 1), ('k', 'u', 1), ('k', 'v', 1), ('k', 'w', 1), ('k', 'x', 1), ('k', 'y', 1), ('k', 'z', 1), ('l', 'a', 1), ('l', 'b', 1), ('l', 'c', 1), ('l', 'd', 1), ('l', 'e', 1), ('l', 'f', 1), ('l', 'g', 1), ('l', 'h', 1), ('l', 'i', 1), ('l', 'j', 1), ('l', 'k', 1), ('l', 'm', 1), ('l', 'n', 1), ('l', 'o', 1), ('l', 'p', 1), ('l', 'q', 1), ('l', 'r', 1), ('l', 's', 1), ('l', 't', 1), ('l', 'u', 1), ('l', 'v', 1), ('l', 'w', 1), ('l', 'x', 1), ('l', 'y', 1), ('l', 'z', 1), ('m', 'a', 1), ('m', 'b', 1), ('m', 'c', 1), ('m', 'd', 1), ('m', 'e', 1), ('m', 'f', 1), ('m', 'g', 1), ('m', 'h', 1), ('m', 'i', 1), ('m', 'j', 1), ('m', 'k', 1), ('m', 'l', 1), ('m', 'n', 1), ('m', 'o', 1), ('m', 'p', 1), ('m', 'q', 1), ('m', 'r', 1), ('m', 's', 1), ('m', 't', 1), ('m', 'u', 1), ('m', 'v', 1), ('m', 'w', 1), ('m', 'x', 1), ('m', 'y', 1), ('m', 'z', 1), ('n', 'a', 1), ('n', 'b', 1), ('n', 'c', 1), ('n', 'd', 1), ('n', 'e', 1), ('n', 'f', 1), ('n', 'g', 1), ('n', 'h', 1), ('n', 'i', 1), ('n', 'j', 1), ('n', 'k', 1), ('n', 'l', 1), ('n', 'm', 1), ('n', 'o', 1), ('n', 'p', 1), ('n', 'q', 1), ('n', 'r', 1), ('n', 's', 1), ('n', 't', 1), ('n', 'u', 1), ('n', 'v', 1), ('n', 'w', 1), ('n', 'x', 1), ('n', 'y', 1), ('n', 'z', 1), ('o', 'a', 1), ('o', 'b', 1), ('o', 'c', 1), ('o', 'd', 1), ('o', 'e', 1), ('o', 'f', 1), ('o', 'g', 1), ('o', 'h', 1), ('o', 'i', 1), ('o', 'j', 1), ('o', 'k', 1), ('o', 'l', 1), ('o', 'm', 1), ('o', 'n', 1), ('o', 'p', 1), ('o', 'q', 1), ('o', 'r', 1), ('o', 's', 1), ('o', 't', 1), ('o', 'u', 1), ('o', 'v', 1), ('o', 'w', 1), ('o', 'x', 1), ('o', 'y', 1), ('o', 'z', 1), ('p', 'a', 1), ('p', 'b', 1), ('p', 'c', 1), ('p', 'd', 1), ('p', 'e', 1), ('p', 'f', 1), ('p', 'g', 1), ('p', 'h', 1), ('p', 'i', 1), ('p', 'j', 1), ('p', 'k', 1), ('p', 'l', 1), ('p', 'm', 1), ('p', 'n', 1), ('p', 'o', 1), ('p', 'q', 1), ('p', 'r', 1), ('p', 's', 1), ('p', 't', 1), ('p', 'u', 1), ('p', 'v', 1), ('p', 'w', 1), ('p', 'x', 1), ('p', 'y', 1), ('p', 'z', 1), ('q', 'a', 1), ('q', 'b', 1), ('q', 'c', 1), ('q', 'd', 1), ('q', 'e', 1), ('q', 'f', 1), ('q', 'g', 1), ('q', 'h', 1), ('q', 'i', 1), ('q', 'j', 1), ('q', 'k', 1), ('q', 'l', 1), ('q', 'm', 1), ('q', 'n', 1), ('q', 'o', 1), ('q', 'p', 1), ('q', 'r', 1), ('q', 's', 1), ('q', 't', 1), ('q', 'u', 1), ('q', 'v', 1), ('q', 'w', 1), ('q', 'x', 1), ('q', 'y', 1), ('q', 'z', 1), ('r', 'a', 1), ('r', 'b', 1), ('r', 'c', 1), ('r', 'd', 1), ('r', 'e', 1), ('r', 'f', 1), ('r', 'g', 1), ('r', 'h', 1), ('r', 'i', 1), ('r', 'j', 1), ('r', 'k', 1), ('r', 'l', 1), ('r', 'm', 1), ('r', 'n', 1), ('r', 'o', 1), ('r', 'p', 1), ('r', 'q', 1), ('r', 's', 1), ('r', 't', 1), ('r', 'u', 1), ('r', 'v', 1), ('r', 'w', 1), ('r', 'x', 1), ('r', 'y', 1), ('r', 'z', 1), ('s', 'a', 1), ('s', 'b', 1), ('s', 'c', 1), ('s', 'd', 1), ('s', 'e', 1), ('s', 'f', 1), ('s', 'g', 1), ('s', 'h', 1), ('s', 'i', 1), ('s', 'j', 1), ('s', 'k', 1), ('s', 'l', 1), ('s', 'm', 1), ('s', 'n', 1), ('s', 'o', 1), ('s', 'p', 1), ('s', 'q', 1), ('s', 'r', 1), ('s', 't', 1), ('s', 'u', 1), ('s', 'v', 1), ('s', 'w', 1), ('s', 'x', 1), ('s', 'y', 1), ('s', 'z', 1), ('t', 'a', 1), ('t', 'b', 1), ('t', 'c', 1), ('t', 'd', 1), ('t', 'e', 1), ('t', 'f', 1), ('t', 'g', 1), ('t', 'h', 1), ('t', 'i', 1), ('t', 'j', 1), ('t', 'k', 1), ('t', 'l', 1), ('t', 'm', 1), ('t', 'n', 1), ('t', 'o', 1), ('t', 'p', 1), ('t', 'q', 1), ('t', 'r', 1), ('t', 's', 1), ('t', 'u', 1), ('t', 'v', 1), ('t', 'w', 1), ('t', 'x', 1), ('t', 'y', 1), ('t', 'z', 1), ('u', 'a', 1), ('u', 'b', 1), ('u', 'c', 1), ('u', 'd', 1), ('u', 'e', 1), ('u', 'f', 1), ('u', 'g', 1), ('u', 'h', 1), ('u', 'i', 1), ('u', 'j', 1), ('u', 'k', 1), ('u', 'l', 1), ('u', 'm', 1), ('u', 'n', 1), ('u', 'o', 1), ('u', 'p', 1), ('u', 'q', 1), ('u', 'r', 1), ('u', 's', 1), ('u', 't', 1), ('u', 'v', 1), ('u', 'w', 1), ('u', 'x', 1), ('u', 'y', 1), ('u', 'z', 1), ('v', 'a', 1), ('v', 'b', 1), ('v', 'c', 1), ('v', 'd', 1), ('v', 'e', 1), ('v', 'f', 1), ('v', 'g', 1), ('v', 'h', 1), ('v', 'i', 1), ('v', 'j', 1), ('v', 'k', 1), ('v', 'l', 1), ('v', 'm', 1), ('v', 'n', 1), ('v', 'o', 1), ('v', 'p', 1), ('v', 'q', 1), ('v', 'r', 1), ('v', 's', 1), ('v', 't', 1), ('v', 'u', 1), ('v', 'w', 1), ('v', 'x', 1), ('v', 'y', 1), ('v', 'z', 1), ('w', 'a', 1), ('w', 'b', 1), ('w', 'c', 1), ('w', 'd', 1), ('w', 'e', 1), ('w', 'f', 1), ('w', 'g', 1), ('w', 'h', 1), ('w', 'i', 1), ('w', 'j', 1), ('w', 'k', 1), ('w', 'l', 1), ('w', 'm', 1), ('w', 'n', 1), ('w', 'o', 1), ('w', 'p', 1), ('w', 'q', 1), ('w', 'r', 1), ('w', 's', 1), ('w', 't', 1), ('w', 'u', 1), ('w', 'v', 1), ('w', 'x', 1), ('w', 'y', 1), ('w', 'z', 1), ('x', 'a', 1), ('x', 'b', 1), ('x', 'c', 1), ('x', 'd', 1), ('x', 'e', 1), ('x', 'f', 1), ('x', 'g', 1), ('x', 'h', 1), ('x', 'i', 1), ('x', 'j', 1), ('x', 'k', 1), ('x', 'l', 1), ('x', 'm', 1), ('x', 'n', 1), ('x', 'o', 1), ('x', 'p', 1), ('x', 'q', 1), ('x', 'r', 1), ('x', 's', 1), ('x', 't', 1), ('x', 'u', 1), ('x', 'v', 1), ('x', 'w', 1), ('x', 'y', 1), ('x', 'z', 1), ('y', 'a', 1), ('y', 'b', 1), ('y', 'c', 1), ('y', 'd', 1), ('y', 'e', 1), ('y', 'f', 1), ('y', 'g', 1), ('y', 'h', 1), ('y', 'i', 1), ('y', 'j', 1), ('y', 'k', 1), ('y', 'l', 1), ('y', 'm', 1), ('y', 'n', 1), ('y', 'o', 1), ('y', 'p', 1), ('y', 'q', 1), ('y', 'r', 1), ('y', 's', 1), ('y', 't', 1), ('y', 'u', 1), ('y', 'v', 1), ('y', 'w', 1), ('y', 'x', 1), ('y', 'z', 1), ('z', 'a', 1), ('z', 'b', 1), ('z', 'c', 1), ('z', 'd', 1), ('z', 'e', 1), ('z', 'f', 1), ('z', 'g', 1), ('z', 'h', 1), ('z', 'i', 1), ('z', 'j', 1), ('z', 'k', 1), ('z', 'l', 1), ('z', 'm', 1), ('z', 'n', 1), ('z', 'o', 1), ('z', 'p', 1), ('z', 'q', 1), ('z', 'r', 1), ('z', 's', 1), ('z', 't', 1), ('z', 'u', 1), ('z', 'v', 1), ('z', 'w', 1), ('z', 'x', 1), ('z', 'y', 1)] 
```

（我很高兴它嵌套`list`而不是嵌套 3- `tuple`）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T09:28:31.203

之前`print a`，插入

```
 a = [(x, y, 1) for x, y in a] 
```

或者，更换

```
list(permutations([alphabet[i],alphabet[i+1]])) 
```

和

```
[(alphabet[i], alphabet[i+1], 1), (alphabet[i+1], alphabet[i], 1)] 
```

**编辑**：根据您的新要求，最简单的解决方案是

```
[(x, y, 1) for x, y in permutations(alphabet, 2)] 
```

对于一般长度- *k*排列，这变为

```
[p + (1,) for p in permutations(alphabet, k)] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T09:27:40.820

您可以将最后一行更改为：

```
print [x + (1,) for x in a] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T09:32:37.233

您可以遍历每个生成的排列并附加静态 1：

```
from itertools import permutations

if __name__ == '__main__':
    alphabet='abcdefghijklmnopqrstuvwxyz'
    a=[]
    for i in xrange(len(alphabet)-1):
        a+=[x + (1,) for x in permutations([alphabet[i],alphabet[i+1]])]
    print a 
```

或者，为了更明确一点：

```
from itertools import permutations

if __name__ == '__main__':
    alphabet='abcdefghijklmnopqrstuvwxyz'
    a=[]
    for i in xrange(len(alphabet)-1):
        a+=[(l1, l2, 1) for (l1, l2) in permutations([alphabet[i],alphabet[i+1]])]
    print a 
```

两种变体都能产生所需的输出，并且效率接近您的`list(generator)`原始输出。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-11T10:09:47.047

我目前的解决方案，以防有人仍然感兴趣：

```
[x + (1,) for x in list(permutations(alphabet,2))+[(alpha, alpha) for alpha in alphabet]] 
```

如果有更有效的方法来做到这一点，仍然会感兴趣......

# c - 宏替换

> ID：10977411
> 
> 赞同：1
> 
> 时间：2012-06-11T09:25:00.970
> 
> 标签：c, linux, macros

我写了以下代码：

```
#define GATE(name, num)do{\
  name##list[num] = #name;\
}while(0)

char* name[] = {"hello", "world", "byebye"};

int i;
for(i = 0; i < 3; i++)
{
    GATE(name[i],0);
} 
```

* * *

显然，我无法得到我想要`GATE(name[0],0)`的被`hellolist[0] = "hello"`, 但是替换的东西`name[0]list[0] = "hello"`，这可能导致 gcc 错误。

我想知道如何使用宏制作我想要的东西？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-11T09:27:51.793

不，这是不可能的。预处理器在编译器启动之前进行文本替换。因此预处理器*实际上从未看到字符串 "hello"* - 因此它不能发出`hellolist`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T11:43:09.563

我不认为你可以按照你想要的方式做你想做的事。但是，通过修改宏我相信你可以得到你想要的。尝试以下操作：

```
#define GATE(source_arr, source_index, list_index)do{\
  source_arr##list[list_index] = source_arr[source_index];\
  }while(0)    

char *name[] = {"hello", "world", "byebye"};

int i;

for(i = 0; i < 3; i++)
{
  GATE(name, i, 0);
} 
```

请注意，这仍然不会从源数组中复制文字文本（例如“hello”） - 它只会复制一个指针（我假设 namelist 是一个指针数组）。如果您需要“he​​llo”等保持不变，您可能需要修改声明`name`以包含`const`。另请注意，我修改了 GATE 宏的第一个参数的标题，以避免与同名变量混淆。希望这会有所帮助。

分享和享受。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T09:35:08.233

在编译之前首先进行预处理，因此您的预期输出不会像上面 cnicutar 提到的那样出现。

要了解究竟发生了什么，您可以使用 gcc 中的“-E”选项和 MSVC 编译器的 /E 选项运行文件并查看预处理器输出。

# iphone - 如何在 Instruments 上跟踪 UI 事件

> ID：10977414
> 
> 赞同：0
> 
> 时间：2012-06-11T09:25:15.010
> 
> 标签：iphone, ios, xcode, instruments

我正在开发一个 iPhone 应用程序，我想查看其中触发的事件，例如，当点击屏幕时，我想查看仪器内部触发的事件并了解对象如何通信彼此。
我尝试使用 Instruments 来捕获使用 cocoa 事件的事件，但它没有产生任何结果。这个过程是我的应用程序。我不确定哪个分析工具可以告诉我我需要什么。
有任何想法吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T09:27:24.307

如果您想利用事件系统，您可以创建一个自定义子类`UIWindow`并覆盖该`sendEvent:`方法。然后您可以使用 Xcode 调试器检查事件对象。我过去用它来记录触摸事件之类的事情。

使用 Instruments 工具做这种事情是不可能的。

# android - 如何在android上创建简单的日历

> ID：10977422
> 
> 赞同：25
> 
> 时间：2012-06-11T09:25:37.100
> 
> 标签：android, calendar

我的 android 应用程序需要简单的日历，我可以从中选择一个日期，并根据选择的日期从数据库中读取数据。我很难找到好的简单的日历示例。有人有简单日历的源代码吗？谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-11T09:48:13.620

使用源代码示例检查这些链接，您会对此有所了解：

[安卓日历小部件](https://github.com/dharmin007/Android-Calendar-Widget)

[Android-Calendar-GridView-Adapter](https://github.com/jrdnull/Android-Calendar-GridView-Adapter)

[安卓日历提供者测试](http://code.google.com/p/android-calendar-provider-tests/source/checkout)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-11T09:32:38.377

日历 API 从 Android 4.0 开始可用。

创建新事件是通过 Intents 完成的，不需要任何许可。设置事件的属性是通过 Intent extras 完成的。如果应该创建事件，将提示用户。

例如，以下内容将提示用户是否应使用某些详细信息创建事件。

```
 Intent intent = new Intent(Intent.ACTION_INSERT);
 intent.setData(CalendarContract.Events.CONTENT_URI);
 startActivity(intent); 
```

如果此事件重复等，您还可以添加日期和时间。有关示例，请参见编码中的注释。

```
 Intent intent = new Intent(Intent.ACTION_INSERT);
 intent.setType("vnd.android.cursor.item/event");
 intent.putExtra(Events.TITLE, "Learn Android");
 intent.putExtra(Events.EVENT_LOCATION, "Home suit home");
 intent.putExtra(Events.DESCRIPTION, "Download Examples");

 // Setting dates
 GregorianCalendar calDate = new GregorianCalendar(2012, 10, 02);
 intent.putExtra(CalendarContract.EXTRA_EVENT_BEGIN_TIME, calDate.getTimeInMillis());
 intent.putExtra(CalendarContract.EXTRA_EVENT_END_TIME, calDate.getTimeInMillis());

 // Make it a full day event
 intent.putExtra(CalendarContract.EXTRA_EVENT_ALL_DAY, true);

// Make it a recurring Event
intent.putExtra(Events.RRULE, "FREQ=WEEKLY;COUNT=11;WKST=SU;BYDAY=TU,TH");

// Making it private and shown as busy
intent.putExtra(Events.ACCESS_LEVEL, Events.ACCESS_PRIVATE);
intent.putExtra(Events.AVAILABILITY, Events.AVAILABILITY_BUSY); 
```

更多关于[这篇文章](http://www.vogella.com/articles/AndroidCalendar/article.html)

以及更多日历 API 教程

*   [移动 tut plus 教程](http://mobile.tutsplus.com/tutorials/android/android-essentials-adding-events-to-the-user%E2%80%99s-calendar/)

*   [官方日历文档](http://developer.android.com/reference/java/util/Calendar.html)

*   这是另一个很好的[简单日历示例](http://w2davids.wordpress.com/android-simple-calendar/)教程。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-15T10:27:24.233

这是您可以通过的示例日历应用程序。 [http://droidwalk.blogspot.in/2012/11/android-calendar-sample.html#more](http://droidwalk.blogspot.in/2012/11/android-calendar-sample.html#more)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-06-11T09:30:55.317

您应该使用 DatePicker... 因为这是用户可以选择日期并根据该日期从数据库中读取数据的唯一简单方法...但是，您还应该表现出您的努力...

# r - 总是在内部对结果数据帧进行拆分

> ID：10977424
> 
> 赞同：5
> 
> 时间：2012-06-11T09:25:39.160
> 
> 标签：r

我只是想知道我是否可以确定 split() 总是对结果进行排序？排序规则是什么？该示例有效，但我没有在帮助页面中找到相应的行。抱歉，如果我误读了帮助。

```
 dat.exmpl <- data.frame(cbind(a=11:20, b=rep(3,10)), fac = c(2,1))
 split(dat.exmpl, dat.exmpl$fac)
 dat.exmpl <- data.frame(cbind(a=11:20, b=rep(3,10)), fac=rep(c("blueb","bluea")))
 split(dat.exmpl, dat.exmpl$fac) 
```

ExtraQ：有没有办法保持提供的订单？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T10:06:14.270

的排序顺序`split`是分组变量的因子顺序。因此，如果您的分组变量是一个因素，那么该因素的水平保持不变。

一个示例：修改您的数据，使其`fac`具有以下级别`c("blueb","bluea")`：

```
dat.exmpl <- data.frame(
  a=11:20, 
  b=rep(3,10), 
  fac=factor(rep(c("blueb","bluea")), levels=c("blueb","bluea"))
) 
```

那么 的结果与`split`的级别的顺序相同`fac`：

```
split(dat.exmpl, dat.exmpl$fac)
$blueb
   a b   fac
1 11 3 blueb
3 13 3 blueb
5 15 3 blueb
7 17 3 blueb
9 19 3 blueb

$bluea
    a b   fac
2  12 3 bluea
4  14 3 bluea
6  16 3 bluea
8  18 3 bluea
10 20 3 bluea 
```

# jquery - jQuery选项卡 - 在选项卡内打开分页链接

> ID：10977430
> 
> 赞同：0
> 
> 时间：2012-06-11T09:25:50.243
> 
> 标签：jquery, user-interface, tabs

我有以下 jQuery UI 选项卡设置：

```
$(function() {
    $('#tabs').tabs({
        ajaxOptions: {
            type:'post',
            async: false,
            error: function( xhr, status, index, anchor ) {
                $( anchor.hash ).html(
                    "Couldn't load this tab." );
            }
        },
        load: function(event, ui) {
            $(ui.panel).delegate('a', 'click', function(event) {
                $(ui.panel).load(this.href);
                event.preventDefault();
            });
        }
    });     
}); 
```

这可以加载标签：

```
<div id="tabs">
        <ul>
          <li><a href="div-s.php">Summary</a></li>
          <li><a href="content.php?div=Production">Products</a></li>
          <li><a href="content.php?div=Digital">Recordings</a></li>
          <li><a href="login.php">Login</a></li>
          <li><a href="resources.html">Resources</a></li>
        </ul>
    </div> 
```

我的第一个标签`div-s.php`包含分页。我希望在同一个选项卡中打开分页链接，但是当我点击它们时，浏览器实际上将我重定向到`div-s.php?pagenum=2`

请问我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T15:32:54.607

`ajaxOptions`这是发生的事情：当您在属性映射中启用时，jquery.tab 插件会“关闭”您的选项卡链接。

因此，当您单击某个选项卡时，内容将由 AJAX 请求加载并插入到选项卡面板中。如果您不向它们添加事件侦听器或任何类型的脚本，则选项卡内容中的所有 HTML 元素都将像普通元素一样工作。然后，当您加载具有分页链接的内容并单击其中一个时，您将单击重新加载所有页面的普通链接，因为您的选项卡面板不是内框。

**解决方案：**

您在`load`属性中设置的功能什么都不做，但只需稍作修改即可强制在选项卡面板内的链接中加载 ajax :)

```
$(".ui-tabs-panel.ui-widget-content").delegate('a', 'click', function(event) {
  event.preventDefault();
  $(this).closest('.ui-tabs-panel.ui-widget-content').load(this.href);
}); 
```

完成:) 运行标签插件后执行此功能，所有链接元素`.ui-tabs-panel.ui-widget-content`将强制他们自己的标签重新加载自己的href

# mysql - MySQL 游标不工作

> ID：10977431
> 
> 赞同：3
> 
> 时间：2012-06-11T09:25:51.563
> 
> 标签：mysql, stored-procedures, cursor

我对这个问题发疯了。

下面的存储过程打开一个游标，然后遍历结果以进行一些插入。

用于游标的 select 语句在游标外部（在 sql 窗口中）使用时有效。但是它在游标中*不起作用*，游标打开时返回NULL！

请注意，此代码位于存储过程中，它本身由另一个打开另一个游标的存储过程调用。不确定是否有此信息。很有用。

```
DECLARE location VARCHAR(255);                      -- location
DECLARE isLocationDone BOOL DEFAULT FALSE;   -- status flag
DECLARE curLocation CURSOR FOR
    SELECT `LOCATION` AS loc FROM `mfdtemp`.`opexstk_tmp`
    WHERE `client` = in_client AND DATE(`rentdat`) < in_date
    ORDER BY loc;
DECLARE 
    CONTINUE HANDLER FOR SQLSTATE '02000' SET isLocationDone = TRUE;

OPEN curLocation;

label_location_loop: LOOP

    FETCH curLocation INTO location;

    IF isLocationDone THEN
        CLOSE curLocation;
        LEAVE label_location_loop;
    END IF;

    INSERT INTO t01_stock_report_htry (
        t01date, t01client, t01desc 
    ) 
    VALUES (in_date, in_client, CONCAT_WS('', 'Stack ', location)
    );

END LOOP; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T09:32:30.097

为什么不直接使用[`INSERT ... SELECT`](http://dev.mysql.com/doc/en/insert-select.html)？

```
INSERT INTO t01_stock_report_htry (t01date, t01client, t01desc)
  SELECT   in_date, in_client, CONCAT('Stack ', LOCATION)
  FROM     mfdtemp.opexstk_tmp
  WHERE    client = in_client AND DATE(rentdat) < in_date
  ORDER BY LOCATION 
```

# javascript - 为什么 iOS 上 Phonegap 中的新日期不返回任何内容？

> ID：10977434
> 
> 赞同：0
> 
> 时间：2012-06-11T09:26:06.243
> 
> 标签：javascript, ios, date, cordova

这是 Javascript 中的一个示例，它在 Android 上运行良好，但不适用于 iOS。我不知道为什么？

```
showTime = function(timeId, time_incoming) {
    var curTime = new Date();
    var time_in = new Date(time_incoming);
    var curTimeStr = curTime.format('yy/mm/dd');
    var inTimeStr = time_in.format('yy/mm/dd');
    if (curTimeStr === inTimeStr)
    {
       $("#" + timeId).text(curTimeStr);
    }
    else
    {
        $("#" + timeId).text(inTimeStr);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T09:28:45.927

`Date`JavaScript 中的对象没有任何`format`功能。

另外，重新这一行：

```
var time_in = new Date(time_incoming); 
```

你还没有说是什么`time_incoming`，但如果它是一个字符串，你需要确保它是一个实际支持的格式的字符串。许多浏览器添加了支持的格式，但您不能依赖它。官方支持的唯一字符串格式是[ISO 8601 的简化形式](http://ecma-international.org/ecma-262/5.1/#sec-15.9.1.15)，但这是相对较新的（仅在几年前指定）并且不存在于旧浏览器中。所有桌面浏览器也支持`yyyy/mm/dd`（带有斜杠，而不是破折号），即使没有指定。所以如果`time_incoming`是一个字符串，你可能需要自己解析它。

# html - Mangeto 模板文件无法应用

> ID：10977442
> 
> 赞同：0
> 
> 时间：2012-06-11T09:26:31.203
> 
> 标签：html, magento, xhtml

为 Magento 制作了一个模板，您可以在此处看到：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="<?php echo $this->getLang() ?>" lang="<?php echo $this->getLang() ?>">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
</head>
<body>
<div id="main_container">
<div id="top_gray"></div>
<div id="header"><?php echo $this->getChildHtml('header') ?></div>
<div id="left_container"></div>
<div id="center_container"></div>
<div id="right_container"></div>
<div id="clear"</div>
<div id="footer"></div>
</div>
</body>
</html> 
```

并将其保存为 test.phtml 并将其放在 /mytheme/template/page 目录中。然后我进入 app 目录中我的主题的 page.xml 文件并进行了以下更改：

```
<!--
Default layout, loads most of the pages
-->

<default translate="label" module="page">
    <label>All Pages</label>
    <block type="page/html" name="root" output="toHtml" template="page/test.phtml"> 
```

这应该将我的“骨架模板”应用于包括主页在内的整个网站。但事实并非如此。主页仍在使用另一个模板文件进行布局。此外，如果我进入管理部分和 CMS，然后选择主页然后设计，则在布局下，下拉列表不包括提及我的 test.phtml 模板。我禁用了缓存。

有什么想法我在这里做错了吗？非常感谢任何帮助，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T09:40:12.410

也许您必须修改 local.xml 文件而不是 page.xml ？这对我有用：

```
 <?xml version="1.0" encoding="UTF-8"?>
<layout>  
    <default>       
       ...  
        <reference name="root">     
            <action method="setTemplate">
                <template>page/your-template.phtml</template>  
                <!-- Mark root page block that template is applied --> 
                <action method="setIsHandle">
                    <applied>1</applied>
                </action>      
            </action>           
        </reference>
    ...
    </default>
</layout> 
```

# c++ - 数据突然从 Boost shared_array/ptr 中删除

> ID：10977445
> 
> 赞同：2
> 
> 时间：2012-06-11T09:26:50.813
> 
> 标签：c++, boost, std

我在使用 Boost 共享指针时遇到了一些问题。指针指向的数据在不确定的时间突然被删除。在当前程序中（我尝试了许多其他变体），在 case case 之后，在循环恰好运行了 172 行之后（表中有 1000 行），数据`boost::shared_array<TableFieldsMap> retArray`在 switch 构造中突然被删除。`MYSQL_TYPE_DOUBLE`但仅当该方法被调用两次时。第一次运行完美。

具体来说，我将问题定位为在分配给 retArray 时使用的 map-key。当我使用硬编码字符串时它可以工作。但不是本地 shared_array (fieldNameArray) 的值（我首先有 scoped_array，但我理解这不应该工作），而不是本地变量 (tmpIndex)。

```
retArray[rowIndex]["value"] = boost::lexical_cast<long double>(row[i]); // This works.
// This doesn't work: retArray[rowIndex][fieldNameArray[i]] = boost::lexical_cast<long double>(row[i]);
// This doesn't work either: retArray[rowIndex][tmpIndex.c_str()] = boost::lexical_cast<long double (row[i]); 
```

这是标题类：

```
#ifndef DATABASE_H
#define DATABASE_H

#include <map>
#include <string>
#include <iostream>
#include <vector>
using namespace std;

#include <glog/logging.h>
#include <boost/lexical_cast.hpp>
#include <boost/smart_ptr.hpp>
#include <boost/variant.hpp>

#include <mysql.h>

#include <cppconn/driver.h>
#include <cppconn/exception.h>
#include <cppconn/resultset.h>
#include <cppconn/statement.h>
#include <cppconn/prepared_statement.h>

#include "../globals/globals.hpp"
#include "../exception/cassandra_exception.hpp"

struct mapCompare
{
    bool operator()(char const * a, char const * b)
    {
        return (strcmp(a, b) < 0);
    }
};

typedef map<const char*, boost::variant<short, int, long double, char*>, mapCompare > TableFieldsMap;

struct DataSet
{
    unsigned int rowCount;
    boost::shared_array<TableFieldsMap>data;
};

class Database
{
private:
    MYSQL *connection;

public:
    Database();
    ~Database();

    bool connect(const char *, const char *, const char *, const char *);
    DataSet select(const char*);
};

#endif 
```

*   和代码：

    ```
    #include "database.hpp"
    Database::Database()
    {
        DLOG(INFO) << "::Database";
    }

    Database::~Database()
    {
        DLOG(INFO) << "~Database";

        if (connection) mysql_close(connection);
    }

    bool Database::connect(const char* server, const char* user, const char* password, const char* database)
    {
        DLOG(INFO) << ">> connect";

        connection = mysql_init(NULL);

        if (!connection)
        {
            cout << "Error" << endl;
            return (false);
        }

        if (!mysql_real_connect(connection, server, user, password, database, 0, NULL, 0))
        {
            cout << "Database init error (" << mysql_error(connection) << ")" << endl;
        }

        if (!connection)
        {
            cout << "Connection Failed!" << endl;
            return (false);
        }

        return (true);
    }

    DataSet Database::select(const char* query)
    {
        DLOG(INFO) << ">> select";

        MYSQL_RES *resultSet;
        MYSQL_ROW row;
        unsigned int fieldCount;
        MYSQL_FIELD* field;

        // Query database.
        if (mysql_query(connection, query)) throw MyException(string("Database select error (") + mysql_error(connection) + ")");

        // Handle result-set.
        resultSet = mysql_store_result(connection);
        if (resultSet == NULL) throw MyException(string("Database select error. Result-set is empty (") + mysql_error(connection) + ")");

        // Initialize return array.
        unsigned int rowCount = mysql_num_rows(resultSet);
        boost::shared_array<TableFieldsMap> retArray(new TableFieldsMap[rowCount]);

        // Obtain field names and types.
        fieldCount = mysql_num_fields(resultSet);
        boost::shared_array<const char *> fieldNameArray(new const char* [fieldCount]);
        boost::scoped_array<enum_field_types> fieldTypeArray(new enum_field_types[fieldCount]);
        unsigned int fieldIndex = 0;
        while ((field = mysql_fetch_field(resultSet)))
        {
            fieldNameArray[fieldIndex] = field -> name;
            fieldTypeArray[fieldIndex++] = field -> type;
        }

        // Fix?
        string tmpIndex;

        // Load data from result-set.
        unsigned int rowIndex = 0;
        while ((row = mysql_fetch_row(resultSet)) != NULL)
        {
            // Fields of the row.
            for (unsigned int i = 0; i < fieldCount; i++)
            {
                if (row[i] == NULL) throw MyException("Database error. Null.");

                switch (fieldTypeArray[i])
                {
                    // Medium int & Integer.
                    case MYSQL_TYPE_INT24 :
                    case MYSQL_TYPE_LONG :
                    retArray[rowIndex][fieldNameArray[i]] = boost::lexical_cast<int>(row[i]);
                    break;

                    case MYSQL_TYPE_DOUBLE :
                    try
                    {
                    retArray[rowIndex]["value"] = boost::lexical_cast<long double>(row[i]); // This works.
                    }
            catch (boost::bad_lexical_cast exception)
                    {
                        DLOG(ERROR) << "Error reading the phi table from database. Cast error. (" << rowIndex << ", " << row[i] << ")" << endl;
                        throw MyException("Error reading the phi table from database. Cast error.");
            }

                    // tmpIndex = string(fieldNameArray[i]);
                    // This doesn't work: retArray[rowIndex][fieldNameArray[i]] = boost::lexical_cast<long double>(row[i]);
                    // This doesn't work either: retArray[rowIndex][tmpIndex.c_str()] = boost::lexical_cast<long double>(row[i]);
                    break;

                case MYSQL_TYPE_VARCHAR :               // 15
                case MYSQL_TYPE_VAR_STRING :            // 253
                case MYSQL_TYPE_STRING :                // 254
                retArray[rowIndex][fieldNameArray[i]] = row[i];
                break;

                    case MYSQL_TYPE_DECIMAL :               // 0
                    case MYSQL_TYPE_TINY :                  // 1
                    case MYSQL_TYPE_SHORT :                 // 2
                    case MYSQL_TYPE_FLOAT :                 // 4
                    case MYSQL_TYPE_NULL :                  // 6
                    case MYSQL_TYPE_TIMESTAMP :             // 7
                    case MYSQL_TYPE_LONGLONG :              // 8
                    case MYSQL_TYPE_DATE :                  // 10
                    case MYSQL_TYPE_TIME :                  // 11
                    case MYSQL_TYPE_DATETIME :              // 12
                    case MYSQL_TYPE_YEAR :                  // 13
                    case MYSQL_TYPE_NEWDATE :               // 14
                    case MYSQL_TYPE_BIT :                   // 16
                    case MYSQL_TYPE_NEWDECIMAL :            // 246
                    case MYSQL_TYPE_ENUM :                  // 247
                    case MYSQL_TYPE_SET :                   // 248
                    case MYSQL_TYPE_TINY_BLOB :             // 249
                    case MYSQL_TYPE_MEDIUM_BLOB :           // 250
                    case MYSQL_TYPE_LONG_BLOB :             // 251
                    case MYSQL_TYPE_BLOB :                  // 252
                    default:
                    DLOG(FATAL) << "Database error. Unsupported datatype";
                    throw MyException("Database error. Unsupported datatype");
                    break;
                }
            rowIndex++;
            }
        }

        mysql_free_result(resultSet);

        DataSet retStruct;
        retStruct.rowCount = rowCount;
        retStruct.data = retArray;

        return (retStruct);
    } 
    ```

...

下面是调用方法：

```
 include "My_database.hpp"

    MyDatabase::MyDatabase(string server, string user, string password, string database)
    {
        DLOG(INFO) << "::MyDatabase (1)";

        init(server.c_str(), user.c_str(), password.c_str(), database.c_str());
    }

    MyDatabase::MyDatabase(const char* server, const char* user, const char* password, const char* database)
    {
        DLOG(INFO) << "::MyDatabase (2)";

        init(server, user, password, database);
    }

    MyDatabase::~MyDatabase()
    {
        DLOG(INFO) << "~MyDatabase";
    }

    void MyDatabase::init(const char* server, const char* user, const char* password, const char* database)
    {
        DLOG(INFO) << ">> init";

        connect(server, user, password, database);
    }

    boost::shared_array<long double>MyDatabase::loadPhiTable()
    {
        DLOG(INFO) << ">> LoadPhiTable";

        // Select from database.
        DataSet selectData = select("SELECT value FROM phi");
        boost::shared_array<TableFieldsMap>phiArray = selectData.data;
        unsigned int rowCount = selectData.rowCount;

        // Initialize return array.
        boost::shared_array<long double> retArray(new long double[rowCount]);

        unsigned int i = 0;
        try
        {
            for (i = 0; i < rowCount; i++) retArray[i] = boost::get<long double>(phiArray[i]["value"]);
        }
        catch (boost::bad_get exception)
        {
            throw MyException(string("Error reading the phi table. Conversion error. (index: ") + boost::lexical_cast<string>(i) + ", value: " + boost::lexical_cast<string>(phiArray[i]["value"]) + ")");
        }

        return (retArray);
    } 
```

任何其他建议也将不胜感激。我的第一个 C++ 程序。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T12:03:55.367

问题是

```
boost::shared_array<const char *> fieldNameArray = ...; 
```

不拥有数组的元素，因此当间接数据消失时，它们将作为悬空指针留下。`mysql_fetch_field`如果间接返回的指针指向池数据，这可能发生在 MySQL API 中。

最简单的解决方法是更改`fieldNameArray`​​为包含`std::string`.

# php - 访问 JSON php 数组以在 Google 图表中使用

> ID：10977446
> 
> 赞同：1
> 
> 时间：2012-06-11T09:26:54.673
> 
> 标签：php, html, json

我想知道您是否可以帮助我，我正在尝试从 php 中的表中提取数据（状态和值），将其保存到数组（并将其编码为 JSON），然后使用编码的 JSON 数组添加我正在尝试创建的饼图中的行。谁能指导我如何成功地做到这一点？我想我遗漏了几条关键线。

任何帮助表示赞赏。

提前致谢！

```
<?
// Connection to the database 
$db = mysql_connect("localhost", "root", "elves") or die("Could not connect");
mysql_select_db("wlp_FIX001");

// Selecting the data
$s = "SELECT * FROM `lu_opportunity_status`";
$m = mysql_query($s) or die("$s dies - " . mysql_error());

while ($row = mysql_fetch_array($m)) {

    $oppStatusName = $row['status'];

    $s1 = "SELECT `lu_opportunity_status`.`status`, SUM(`opportunities`.`value`) AS `totalvalue` FROM `opportunities` LEFT JOIN `lu_opportunity_status` ON `opportunities`.`status` = `lu_opportunity_status`.`id` WHERE `lu_opportunity_status`.`status` = '$oppStatusName'";
    $m1 = mysql_query($s1) or die("$s1 dies - " . mysql_error());

    $oppStageTotals = array();

    while ($row1 = mysql_fetch_array($m1)) {

        $oppStatus = $row1['status'];
        $oppValue = $row1['totalvalue'];
        $oppStageTotals[] = array("status" => $oppStatus, "oppValue" => $oppValue);
    }
    //print_r($oppStageTotals);
    $encoded_oppStageTotals =  json_encode($oppStageTotals);
    //echo $encoded_oppStageTotals;
}
?>
<html>
    <head>
        <TITLE>Form Scaff Charts</TITLE>
        <!--<link rel="stylesheet" media="print" title="Printer-Friendly Style" 
         type="text/css" href="print.css">-->
        <!--Load the AJAX API-->
        <script type="text/javascript" src="https://www.google.com/jsapi"></script>

        <script type="text/javascript">
            var encoded_oppStageTotals = <?php echo json_encode($encoded_oppStageTotals); ?>
            var oppStageTotals = new Array();

            oppStageTotals = encoded_oppStageTotals;
            // Load the Visualization API and the piechart package.
            google.load("visualization", "1", {packages:["corechart"]});
            google.load('visualization', '1.0', {'packages':['corechart']});
            google.load('visualization', '1', {packages:['table']});

            // Set a callback to run when the Google Visualization API is loaded.
            google.setOnLoadCallback(drawChart);

            // Callback that creates and populates a data table, 
            // instantiates the pie chart, passes in the data and
            // draws it.
            function drawChart() {
                // Create the data table.
                var data = new google.visualization.DataTable();
                data.addColumn('string', 'Status');
                data.addColumn('number', 'Value');

                var len = jsonarray.length;
                data.addRows(len);

                // Need some stuff here to do it??

                // Set chart options
                var options = {'title':'Opportunities',
                    'width':300,
                    'height':300};

                // Instantiate and draw our chart, passing in some options.
                var chart = new google.visualization.PieChart(document.getElementById('chart_div'));

                function selectHandler() {
                    var selectedItem = chart.getSelection()[0];
                    var selectedItem2 = chart.getSelection()[1];
                    if (selectedItem) {
                        var topping = data.getValue(selectedItem.row, 0);
                        var amount = data.getValue(selectedItem.row, 1);
                    }
                }

                google.visualization.events.addListener(chart, 'select', selectHandler);    
                chart.draw(data, options);
            }
        </script>
        <style>
            body {
                margin:0px;
                padding:0px;
            }

            .container {
                width: 210mm;
                height: 297mm;
                margin-left: auto;
                margin-right: auto;
            }

            @media print
            {
                .container {
                    position: absolute;
                    top: 0px;
                    bottom: 0px;
                    left: 0px;
                    right: 0px;
                }

                iframe {
                    /*      float:left;
                display: block;*/
                }

            }
        </style>
    </head>
    <body>
        <div class="container">
            <div id="chart_div" class=span4></div>
        </div>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T09:33:06.413

我看起来您缺少一个分号来终止此处的 javascript 行（我添加了它）：

```
var encoded_oppStageTotals = <?php echo json_encode($encoded_oppStageTotals); ?> ; 
```

# python - PyQt4.QtWebKit 和渲染多个网站

> ID：10977447
> 
> 赞同：0
> 
> 时间：2012-06-11T09:26:56.413
> 
> 标签：python, pyqt

如何使用 QtWebkit 渲染多个页面并使用自定义 python 代码处理每个页面？

现在我有：

```
class FetchThumb(object):
    def __init__(self):
        self.app = QApplication(sys.argv)
        self.web = QWebView()
        self.app.connect(self.web, SIGNAL("loadFinished(bool)"), self.loadFinished)

    def fetch(self, url, options, callback):
        self.options = options
        self.url = url
        self.callback = callback
        self.web.load(QUrl(url))
        self.app.exec_()

    def loadFinished(self, status):
        print "URL %s loaded, status is ok? %s" % (self.url, status)

        # do something with result...

        # exit event loop
        self.app.quit() 
```

我叫它一次：

```
fetcher = FetchThumb()
fetcher.fetch(args[-1], options, callback or default_callback) 
```

作品。但是如果我想再次使用“fetch”，Qt 就不再响应了。我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T19:01:50.710

在`loadFinished`你打电话`self.app.quit()`。这会导致事件循环在第一页完成加载时停止。`self.app.quit()`解决方法是在您完成所有页面之前不调用。

# java - 一份声明的费用是多少

> ID：10977450
> 
> 赞同：5
> 
> 时间：2012-06-11T09:26:59.527
> 
> 标签：java, sql, jdbc

如果我一次只使用一个`Statement`，是否值得将它与我的`Connection`. 我已经缓存了连接，所以我可以几乎不花钱缓存语句。

本质上，我想我是在问创建声明是否有任何成本/开销。我完全理解创建准备好的语句的好处。我`Connection.createStatement()`这里专门说一下。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T09:48:20.770

声明的成本不能独立于其他因素来量化；例如数据库、JDBC 驱动程序、语句中的 SQL 等等。

您可以肯定在创建语句（或 PreparedStatement）和第一次执行它时会有开销。但是，它很有可能不会对整个应用程序的性能产生重大影响。如果不是，那么实现缓存代码将只是浪费精力。

您不应该猜测这是否（或不是）将是一个值得的优化。您*应该做*的是让您的程序正常工作，然后对其进行分析，然后使用分析数据来确定需要优化的内容。如果花费大量时间执行相同的查询，那么缓存*可能*会有所帮助，也可能不会。尝试一下，看看它是否会对性能产生可衡量的影响。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T11:16:59.463

对开源 jdbc 驱动程序 ( [jtds](http://jtds.svn.sourceforge.net/viewvc/jtds/branches/jTDS%201.2%20%28stable%29/src/main/net/sourceforge/jtds/jdbc/JtdsStatement.java?revision=1120&view=markup) ) 的一些研究表明，创建的每个 Statement 都有以下对象开销。我试图计算`Statement`每次我想查询数据库而不是保存一个缓存并重用它时创建一个新数据库的成本：

1.  A `Connection`- 大概缓存得如此微不足道。
2.  A `TdsCore`- 看起来像一个协议实现，但它被缓存得如此微不足道。
3.  一个`ResultSet`。
4.  一个`ArrayList`批量项目。
5.  一个`ArrayList`开`ResultSet`s。
6.  列元数据。

因此，看起来`Statement`s 成本的最高比例涉及已运行的任何查询留下的内容。

# vtd-xml - vtd-xml：Autopilot：在 Autopilot 中注册功能

> ID：10977451
> 
> 赞同：0
> 
> 时间：2012-06-11T09:27:00.437
> 
> 标签：vtd-xml

Java VTD-XML 具有以下 API

```
class AutoPilot{
    declareVariableExpr(java.lang.String varName, java.lang.String varExpr);
} 
```

如何在 VTD-XML 自动驾驶仪中注册功能？

例如，我想评估以下表达式：

```
concat("abc-",getCurrentDateTime()); 
```

我希望 Autopilot 让我注册一个调用的函数`getCurrentDateTime()`并让我在表达式评估中使用它。

如何在 Autopilot 中注册功能？如果是的话，你能指点我一些例子吗？

问候，

维马尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-05-13T23:33:25.060

VTD-XML 不允许您定义要在 XPath 评估中使用的函数……但这听起来像是 v 2.13 中需要考虑的一个有趣的特性

# mapping - Knockout Mapping - 在 JSON 加载后重新绑定数据

> ID：10977452
> 
> 赞同：4
> 
> 时间：2012-06-11T09:27:03.140
> 
> 标签：mapping, knockout.js

我正在使用带有映射插件的 Knockout。
在服务器返回 JSON 数据之前初始化页面有问题。

在场景中一切正常：
1\. 获取 JSON
2\. 执行`VM = ko.mapping.fromJS(result);`
3\. 执行`ko.applyBinding(VM);`

但是，如果 JSON 需要一些时间才能返回（例如 10 秒），我的页面需要在返回 json 之前进行初始化。但是，如果我`ko.applyBinding(VM);`使用空 VM ( `let say VM = {};`) 而不是调用 JSON，然后再次重新绑定它 - 它就行不通了。

所以我的问题是 - 如何用淘汰赛重新绑定模型？我不想更改单个 observable 的值，而是重新绑定整个 VM（视图模型），因为我的数据结构需要从 JSON 映射 - 在 JSON 返回之前它是未知的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T11:03:27.387

我相信您所描述的问题是事情不会立即在您的模板中呈现（并且实际上会给出错误），并且当来自服务器的数据到达时，该错误会阻止重绘。

如果是这种情况，我通常处理这个问题的方式是有一个*知道*数据何时加载的 observable，并`if`基于这个 observable 将有问题的模板代码包装在一个中。

更新：您更有可能替换 VM 的值。这不再是绑定到界面元素的对象。

您可以只使用`ko.mapping.fromJS`呼叫的替代形式。

```
ko.mapping.fromJS(result, {}, VM); 
```

# android - 适用于 Android 的纯 c++ 应用程序及其性能

> ID：10977454
> 
> 赞同：7
> 
> 时间：2012-06-11T09:27:08.643
> 
> 标签：android, c++, performance

我可以为 Android 编写纯 C++ 应用程序吗？（例如，使用 NDK？）

考虑到功能上没有区别，纯 Android C++ 应用程序是否比 Android Java 应用程序更快并且消耗更少的内存？仅凭我的猜测，我猜是肯定的，因为 C++ 应用程序不会进行垃圾收集，这会导致帧速率打嗝。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-11T09:36:05.893

是的，是的，尽管谷歌说：

*“使用本机代码不会自动提高性能，但总是会增加应用程序的复杂性……如果您编写本机代码，您的应用程序仍会打包到 .apk 文件中，并且它们仍会在设备上的虚拟机内运行。基本的 Android 应用程序模型不会改变。”*

来自[http://developer.android.com/sdk/ndk/index.html](http://developer.android.com/sdk/ndk/index.html)

（就我个人而言，我不同意用 C++ 自动编写比 Java 更复杂的程序，我什至会说这对于熟练的 C++ 程序员来说恰恰相反）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-12-22T07:18:40.200

好吧，不，你不能在安卓设备上做纯 C++。

没有理由这样做。您仍然在与您的 java 代码相同的虚拟机中运行。因此，除非您需要压缩这些微小的性能，否则您将使用 c++ 编写消耗 CPU 的过程并通过 Java 代码调用它们。

听起来您正在制作游戏，然后只需将 OpenGL ES 与 java 一起使用，然后将繁重的计算卸载到计算着色器中。

# sql - 数据库中标识列的命名约定

> ID：10977457
> 
> 赞同：3
> 
> 时间：2012-06-11T09:27:17.707
> 
> 标签：sql, sql-server, database, naming-conventions, database-schema

当表中的标识列被称为 like 等时，命名约定背后的意义是什么`UserID`，`ProductID`而不仅仅是一个`ID`？有什么优点和缺点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T09:30:39.360

较长名称的一个优点是：当您在具有许多表（例如连接）的复杂查询中使用列时，您不必为列添加前缀即可知道它们来自哪个表，并且您还可以最大限度地减少列名歧义的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T12:43:23.530

*任何*代码约定主要具有的同一点：一致性。虽然可以争论赞成和反对`Id`vs. `EntityId`，但没有明确的赢家。我不会说这是[您需要与之抗争](http://37signals.com/svn/posts/3179-you-only-get-one-chance-to-be-a-beginner)的情况之一……更重要的是坚持组织规则并保持命名一致。

# .net - Objective-C UUID 是否与 .NET 兼容

> ID：10977460
> 
> 赞同：2
> 
> 时间：2012-06-11T09:27:27.597
> 
> 标签：.net, objective-c, guid, uuid

是在 Objective-c 中使用 CFUUIDCreate 创建的 UUID (GUID)，与 Microsoft .NET 框架中创建的 GUID 兼容。

即，如果我构建一个使用 CFUUIDCreate 生成 id 的 iOS 系统，我是否总是能够在 .NET 上下文中使用它们？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T09:42:25.907

UUID/GUID 只是一个 128 位整数。因此，它本质上与平台无关。

当表示为字符串时，似乎两者都`CFUUIDCreateString()`使用`System.Guid.NewGuid().ToString()`几乎相同的格式。

唯一的区别是`CFUUIDCreateString()`使用大写字母表示十六进制数字（`"6027EC11-8084-4678-A250-53D534AEFD4A"`），而 .NET 版本默认使用小写字母（`"9245fe4a-d402-451c-b9ed-9c1a04247482"`）。

# javascript - 为什么我的“PURE JAVASCRIPT BASED”离线文件不支持“onload”事件？

> ID：10977461
> 
> 赞同：1
> 
> 时间：2012-06-11T09:27:29.420
> 
> 标签：javascript, dom-events, onload, html-editor

我的 PC 上有一个离线“htm”文件，用于测试 HTML 代码。它就像一个 HTML 编辑器。它编译 HTML 代码。但我有一个问题。它支持各种 CSS 和 JavaScript 以及基于 JavaScript 的库，如 jQuery，但不支持事件，`onload, $(document).ready()`我不知道为什么？我已经尝试了很多关于它的事情，但无能为力。

所以看看我的编辑器的源代码：

```
<html>
 <script type="text/javascript">
  function ShowResult()
  {
    my_window = window.open("about:blank", "mywindow1");
    my_window.document.write(x);
    if(my_window.document.title=="")
    {
      my_window.document.title="No title was specified"
    }
  }
 </script>
 <body>
   <textarea style="height:400px;width:750px;overflow:auto;" onblur="x=this.value">
   </textarea><br />
   <button onclick="ShowResult()">see result!</button>
 </body>
</html> 
```

请告诉我我犯了什么错误？为什么我的文件不支持“onload”事件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T09:31:46.643

您正在已加载的页面的上下文中执行代码。

像 jsfiddle 这样的系统通过动态生成页面并将其加载到 iframe 中来处理这个问题。

您需要某种服务器端脚本来执行此操作。我建议安装本地网络服务器（即 Wampserver）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T09:50:01.000

您需要初始化 x：

```
<html> 
 <script type="text/javascript">
  x = ""; 
  function ShowResult() 
  { 
    my_window = window.open("about:blank", "mywindow1"); 
    my_window.document.write(x); 
    if(my_window.document.title=="") 
    { 
      my_window.document.title="No title was specified" 
    } 
  } 
 </script> 
 <body> 
   <textarea style="height:400px;width:750px;overflow:auto;" onblur="x=this.value"> 
   </textarea><br /> 
   <button onclick="ShowResult()">see result!</button> 
 </body> 
</html> 
```

# javascript - 我怎么能继续重新发送这个 ajax 请求？

> ID：10977464
> 
> 赞同：0
> 
> 时间：2012-06-11T09:27:37.193
> 
> 标签：javascript, ajax, json, setinterval

我尝试使用 setinterval 让我的 ajax 请求每 2 秒发送一次，但它不断使页面崩溃，所以我认为出了点问题！

这是我的代码：

```
 var fburl = "http://graph.facebook.com/http://xzenweb.co.uk?callback=?";

        //getting facebook api content
        $.getJSON(fburl, function(data){

        var name = data["shares"];
        var dataString = 'shares='+name;

        //sending share count data to server
        $.ajax({
        type: "POST",
        url: "index.php",
        data: dataString,
        cache: false,

        success: function(html)
        {
        $("#content").html(html);
        }
    });
return false;   
}); 
```

我是 ajax 和 javascript 的新手，如果你能帮助我，我将不胜感激:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T09:43:20.263

为 $.getJson 提供回调函数

```
function test(){
         $.getJSON(fburl, 
              function(data) {
                  //your method
              }); 
         setInterval("test()",2000);
      } 
```

**更新答案::**

```
<script>

$(document).ready(function(){
    test();
  });

function test(){
    $.getJSON("http://graph.facebook.com/http://xzenweb.co.uk?callback=?", 
         function(data) {
         var name = data["shares"];
            var dataString = 'shares='+name;

            $.ajax({
                type: "POST",
                url: "index.php",
                data: dataString,
                cache: false,

                success: function(html)
                {
                $("#content").html(html);
                }
            });
            return false;  
         }); 
    setTimeout("test()",5000);
 }

</script>

<body>
<div id="content">Hello</div>
</body> 
```

# python - django 强制形式 is_valid

> ID：10977468
> 
> 赞同：0
> 
> 时间：2012-06-11T09:27:46.053
> 
> 标签：python, django, forms

当我的表单有一个复选框为 True 时，我想强制 my_form.is_valid() 返回有效响应。但是每次都无效...

```
def clean(self):
    if self.cleaned_data.get("replay_transaction") == True:
        #what i need to do to ignore all other field verification (card number, cvv, ...)?
    else:
        self.cleaned_data 
```

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T09:31:53.570

编写一个自定义函数来验证字段并调用它而不是 form.is_valid()

# javascript - 谷歌分析未定义默认值？

> ID：10977469
> 
> 赞同：1
> 
> 时间：2012-06-11T09:27:47.270
> 
> 标签：javascript, google-analytics

这是我发送给 Google Analytics 的内容：

```
// Default values?
var label = undefined;
var action = undefined;

// Assign some values
label = 'something';
action = 666;

// Send GA event
window._gaq.push(['_trackEvent','My Category', 'My Event Name', label, action]); 
```

我的问题是：我是否正确地分配了未定义的默认值，因为有时我的标签和操作变量不包含任何内容？事件是否仍能在所有浏览器中正确发送？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T09:35:21.340

只是不要设置它们并发送一个 2 项数组。

官方文档中有例子：[https ://developers.google.com/analytics/devguides/collection/gajs/methods/gaJSApi_gaq#_gaq.push](https://developers.google.com/analytics/devguides/collection/gajs/methods/gaJSApi_gaq#_gaq.push)

```
_gaq.push(['t2._setAccount', 'UA-65432-2']);
_gaq.push(['t2._setDomainName', 'foo.com']);
_gaq.push(['t2._trackPageview']); 
```

# c# - 键入 C# 组合框但显示不同的值

> ID：10977476
> 
> 赞同：1
> 
> 时间：2012-06-11T09:28:03.067
> 
> 标签：c#, combobox

我想对数据库进行查询，该数据库将显示 customerID（身份）以及名字和姓氏。

在组合框中，我想显示名字和姓氏，但选择时 - 值是客户 ID。customerID 将作为另一个查询的主题来自动填充 Windows 窗体。

到目前为止，这就是我所拥有的-我知道这`combobox.Items.Add`部分是错误的-这就是我遇到问题的地方。

```
conn = new SqlConnection();
conn.ConnectionString = "my connection string";

SqlDataAdapter da = new SqlDataAdapter("Select * from Customer", conn);
DataTable dt = new DataTable();

da.Fill(dt);

for (int i = 0; i < dt.Rows.Count; i++) 
{
    comboSelectCust.Items.Add(dt.Rows[i]["FName" + "Surname"]);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T09:39:10.380

既然您为此使用了 DataTable，为什么不将它与 DisplayMember 和 ValueMember 绑定呢？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T09:42:27.683

这是伪代码如何使用`DataSource`，`DisplayMember`和`ValueMember`：

```
SqlDataAdapter da = new SqlDataAdapter("Select FName || Surename as FullName, customerID from Customer", conn);
DataTable dt = new DataTable();

da.Fill(dt);

comboSelectCust.DataSource = dt;
comboSelectCust.DisplayMember = "FullName";
comboSelectCust.ValueMember = "customerID"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T09:36:18.667

您可以使用*ComboBoxItem的**Tag*属性来设置值（*Content*是设置显示文本的属性）：

 **```
comboSelectCust.Items.Add(new ComboBoxItem() { 
    Content = dt.Rows[i]["FName"] + dt.Rows[i]["Surname"], 
    Tag = dt.Rows[i]["customerId"]
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-11T09:38:55.880

```
for (int i = 0; i < dt.Rows.Count; i++) 
{
   comboSelectCust.Items.Add(new KeyValuePair<string, int>(dt.Rows[i]["FName"].ToString() +  dt.Rows[i]["Surname"].ToString(), Convert.ToInt32(dt.Rows[i]["customerId"].ToString()));
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-11T09:55:11.173

试试这个看看

```
conn = new SqlConnection();
conn.ConnectionString = "my connection string";

SqlDataAdapter da = new SqlDataAdapter("Select (FName+' '+Surname) As Name,customerID from Customer", conn);
DataTable dt = new DataTable();

da.Fill(dt);

comboSelectCust.DisplayMember = "Name";
comboSelectCust.ValueMember = "customerID";
comboSelectCust.DataSource = dt; 
```

我更改了查询并添加了显示成员和 valuemeber 属性并将数据表分配为数据源**

# .net - MySql - 如何诊断连接被拒绝的原因？

> ID：10977477
> 
> 赞同：4
> 
> 时间：2012-06-11T09:28:05.277
> 
> 标签：.net, mysql

我正在努力将一个应用程序部署到我们的实时服务器上，该应用程序使用 Connector/Net 6.4.4 将我们的 .NET 应用程序连接到 MySql 并引发以下异常：

> 从流中读取失败。内部异常：尝试读取流的末尾。

迄今为止的研究表明，MySql 正在阻止连接。我们对 MySql 比较陌生，所以不太了解可用的诊断工具。

如何诊断连接失败的具体原因？

**更新：**

Dmitry Scriptin - 测试结果集很小，我已经设置了执行最低限度的特定测试查询。josnidhin - 错误日志一无所获。Alex Lynch - 连接是本地的。

是否保留了任何其他可能超出标准错误日志的日志？

PS这是mysql v 5.1.11

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T10:33:11.510

从 MySQL 5.6.5 开始，表 performance_schema.host_cache 显示连接失败的原因，以及每个可能的根本原因的详细信息。

见： [http ://dev.mysql.com/doc/refman/5.6/en/host-cache-table.html](http://dev.mysql.com/doc/refman/5.6/en/host-cache-table.html)

# validation - XHTML 1.1 严格扩展

> ID：10977478
> 
> 赞同：1
> 
> 时间：2012-06-11T09:28:08.503
> 
> 标签：validation, xhtml, doctype, dtd

今天我遇到了一个新问题。

大多数人可能已经知道， a:target="_blank" 不是 validate XHTML Strict。但今天我想在网站上添加 iPod、iPhone 和 iPad 的图标。为此需要的代码是：

```
<link rel="apple-touch-icon" href="logo_144.png" sizes="144x144" /> 
```

正如您可能猜到的那样，属性大小也无效。最大的问题是XHTML1.1是必须的。所以我不能去 HTML5 或过渡。我发现我可以使用自定义 DTD，这不是首选。我还发现可以添加一些自定义 DTD 行来扩展原始文件。代码是：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd" [
    <!ATTLIST link sizes CDATA #IMPLIED >
]> 
```

这显然没有完成这项工作，将“]>”打印到页面中，给了我更多错误，例如没有字符集。我试图将“PUBLIC”更改为“SYSTEM”，但没有任何运气。

有正确的方法吗？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T09:33:14.503

> 有正确的方法吗？

不。

您可以使用 XHTML 1.1（没有 XHTML 1.1 Strict 之类的东西），也可以在元素上使用带有`sizes`属性的东西。`link`

如果您使用自定义 DTD，那么您将不再使用 XHTML 1.1（您正在使用您的自定义语言）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T22:25:54.670

您始终可以使用类型而不是大小。

```
<link rel="apple-touch-icon" type="72x72" href="/theme/mobile/72x72.png" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-16T23:04:56.480

根据您的喜好，有两种正确的方法可以做到这一点。

您上面的示例看起来是正确的，我不确定您正在尝试使用哪个浏览器打印`]>`- 它可能是 ATTLIST 末尾的额外空间：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd" [
    <!ATTLIST link sizes CDATA #IMPLIED>
]> 
```

另一个——可能稍微简单一点——的选择是选择[HTML5 的 XML 序列化（通常称为 XHTML5）](http://www.w3.org/TR/html5/the-xhtml-syntax.html#the-xhtml-syntax)；由于在 HTML5 中添加了 size 属性，这似乎是最有意义的。使用它，您可以完全排除 doctype，因为[HTML5 验证器选择 RELAX NG Schema 进行验证而不是 DTD](http://about.validator.nu/#no-dtd)，但通常建议保留 doctype，以便使用[HTML5 Polyglot与 IE8 及以下版本兼容。](http://dev.w3.org/html5/html-xhtml-author-guide/)

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-08T23:37:03.640

如果您想抑制属性大小验证错误以验证文档的其余部分，您可以`<!ATTLIST link sizes CDATA #IMPLIED>`在验证时即时插入。这是一个`xmllint`例子：

```
sed '/<!DOCTYPE/ {
        s/\([^>]*\)/\1 [<!ATTLIST link sizes CDATA #IMPLIED>]/
    }
    ' input.html | \
xmllint --noout --valid - 2>/dev/null || \
echo "Not valid: input.html" 
```

# exception-handling - 在什么级别以及如何适当地捕获异常

> ID：10977482
> 
> 赞同：0
> 
> 时间：2012-06-11T09:28:22.607
> 
> 标签：exception-handling

我知道这是主观的，但应该在最低级别或更高级别捕获异常。我问是因为我通常这样做

```
try 
{
 //..
}
catch
{
 //LOG
} 
```

所以当我实现一些“低级”功能时，比如

```
std::string read_from_file(const std::string& file_name); 
```

我不确定我应该怎么做：
1）让调用者处理异常。
2) catch (log?) and rethrow
3) catch 和 change 函数，使得 bool 是返回类型（try 中的最后一行是 return true；catch 中的最后一行是 return false；）。我不喜欢这个，但我已经看过很多次了。
4）？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T09:33:53.900

在可以真正处理它的水平或没有其他地方可以扔它的情况下抓住它。

捕获和重新抛出不会处理任何事情，除非您的目的是将异常包装在更具有说明性的东西中（例如，Spring 持久性通过查看 SQL 错误代码将 SQLException 包装成更有意义的东西）。

有时没有其他地方可去。任何用户都不应该看到堆栈跟踪，因此控制器应该捕获所有内容并重定向到友好的错误页面。

您可以捕获和更改返回类型，但用户正在丢失信息。“真/假”不会告诉他们与堆栈跟踪相同的信息。为捕获的异常发回“成功”对我来说并不合适。

如果您无法处理异常，请将其冒泡到可以处理的层。如果你能处理它，就这样做。

# sql-server - 包含数据长度的扩展 TYPE_NAME 函数

> ID：10977483
> 
> 赞同：0
> 
> 时间：2012-06-11T09:28:24.760
> 
> 标签：sql-server, sql-server-2008, tsql, datalength

我正在考虑创建格式的功能

```
FULL_TYPE_NAME(type_id, max_length) 
```

以字符串格式返回数据类型和长度，例如：

```
FULL_TYPE_NAME (231,-1) 
```

会返回：

```
nvarchar(max) 
```

在我这样做之前，我想检查 tsql 是否已经有这样的功能（我还没有找到），或者那里的某种灵魂是否有现成的我可以使用的功能。如果没有，那么我会写一个并在这里发布。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T10:08:54.010

一个艰难的开始会是这样的：

```
CREATE FUNCTION udf_GetDataTypeAsString
    (
      @user_type_id INT ,
      @Length INT
    )
RETURNS VARCHAR(50)
AS 
    BEGIN
        DECLARE @ReturnStr VARCHAR(50)

        IF @Length = -1 
            SELECT  @ReturnStr = UPPER(name) + '(MAX)'
            FROM    sys.types
            WHERE   user_type_id = @user_type_id
        ELSE 
            SELECT  @ReturnStr = UPPER(name) + '(' + CONVERT(VARCHAR, @Length) + ')'
            FROM    sys.types
            WHERE   user_type_id = @user_type_id

        RETURN @ReturnStr

    END
GO

SELECT dbo.udf_GetDataTypeAsString(167, -1)
--#### Returns VARCHAR(MAX)
SELECT dbo.udf_GetDataTypeAsString(231, 24)
--#### Returns NVARCHAR(24) 
```

请注意，这仅对 char 数据类型非常有用，并且仅处理长度，如果要使用精度（小数等），则需要实现更多逻辑

此外，您可能希望添加验证以仅允许某些用户类型的 -1 长度

（出于好奇——你为什么要这样做？）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T13:43:44.427

这是我的功能。感谢 HeavenCore 的起点

```
CREATE FUNCTION dbo.full_type_name (
 @User_Type_Id int,
 @Length int) 
RETURNS varchar (50) 
AS
BEGIN
    DECLARE @Returnstr varchar (50) ;

    --Handle invalid values for @Length
    IF (@Length = 0 OR @Length < -1 OR @Length > 8016 OR @Length IS NULL) 
        BEGIN
            SET @Returnstr = NULL;
        END;
    ELSE
        BEGIN
            SELECT @Returnstr = TYPE_NAME (@User_Type_Id) ;
            --unicode characters occupy two bytes
            IF ((@Returnstr = 'nvarchar' OR @Returnstr = 'nchar') AND @Length > 0) 
                BEGIN
                    SET @Length = (@Length / 2);
                END;

           SELECT @Returnstr = @Returnstr + CASE
           WHEN @Returnstr LIKE '%varchar' AND @Length < 0 
              THEN('(' + 'max' + ')') 
           WHEN @Returnstr LIKE '%char' AND @Length >= 0 
              THEN ('(' + CAST(@Length AS varchar + ')') 
           ELSE ''
         END;
        END;
    RETURN @Returnstr;
END; 
```

我打了电话

```
Select name, 
  user_type_id, 
  max_length, 
  dbo.full_type_name(ty.user_type_id, ty.max_length) as [full_type_name] 
from sys.types as ty 
```

对其进行测试（仅目视检查）非常感谢任何改进建议

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T11:38:44.203

这是我的最终功能。我认为它涵盖了所有内容，但请随时纠正我。稍后我将发布此功能的测试脚本

```
CREATE FUNCTION dbo.full_type_name (
 @User_Type_Id int,
 @Length smallint = NULL,
 @Precision tinyint = NULL,
 @Scale tinyint = NULL) 
RETURNS varchar (50) 
AS
BEGIN
  DECLARE
  @Returnstr varchar (50) = NULL,
  @True bit = 1,
  @False bit = 0,
  @Params_Ok bit = 1;

SELECT @Params_Ok = CASE
  --non unicode text
  WHEN ((@User_Type_Id = 165 OR @User_Type_Id = 167 
      OR @User_Type_Id = 173 OR @User_Type_Id = 175) 
     AND ((@Length < -1) OR (@Length = 0) OR (@Length > 8000))) THEN @False
     --unicode text
     WHEN ((@User_Type_Id = 231 OR @User_Type_Id = 239) 
      AND ((@Length < -1) OR (@Length = 0) OR (@Length > 4000))) THEN @False
     --decimal and numeric                          
     WHEN ((@User_Type_Id = 106 OR @User_Type_Id = 108) 
      AND (((@Precision IS NULL) AND (@Scale IS NOT NULL)) 
      OR ((@Precision IS NOT NULL) AND (@Scale IS NULL)) 
      OR (@Precision <=0) OR (@Scale <0) 
      OR (@Precision <= @Scale))) THEN @False
      --float
      WHEN ((@User_Type_Id = 62) AND ((@Precision <= 0) 
        OR (@Precision > 53))) THEN @False
      --time, datetime2 and datetimeoffset
      WHEN ((@User_Type_Id BETWEEN 41 AND 43) 
        AND ((@Precision < 0) OR (@Precision > 7))) 
          THEN @False
      END;
IF(@Params_Ok = @False) 
    BEGIN
        RETURN NULL;
    END;

SELECT @Returnstr = CASE
                      WHEN(@User_Type_Id = 129)THEN 'geometry'
                      WHEN(@User_Type_Id = 130)THEN 'geography'
                      ELSE TYPE_NAME (@User_Type_Id) 
                    END;

--nvarchar and nchar characters occupy two bytes
IF ((@Returnstr = 'nvarchar' OR @Returnstr = 'nchar') AND @Length > 0) 
    BEGIN
        SET @Length = (@Length / 2);
    END;

SELECT @Returnstr = @Returnstr + CASE
  WHEN ((@Returnstr LIKE '%varchar' OR @Returnstr = 'varbinary') 
    AND @Length < 0) 
    THEN('(' + 'max' + ')') 
  WHEN (((@Returnstr LIKE '%char') OR (@Returnstr LIKE '%binary')) 
    AND @Length >= 0) 
    THEN ('(' + CAST(@Length AS varchar) + ')') 
  WHEN ((@Returnstr = 'decimal' OR @Returnstr = 'numeric') 
    AND @Precision IS NOT NULL) 
    THEN ('(' + CAST(@Precision AS varchar) + ',' 
      + CAST(@Scale AS varchar) + ')') 
  WHEN (@Returnstr = 'float' AND @Precision IS NOT NULL) 
    THEN ('(' + CAST(@Precision AS varchar) + ')') 
  --time, datetime2 and datetimeoffset
  WHEN ((@User_Type_Id BETWEEN 41 AND 43) 
    AND (@Precision IS NOT NULL)) 
    THEN ('(' + CAST(@Precision AS varchar) + ')') 
  ELSE ''
 END;
 RETURN @Returnstr;
END; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-13T14:51:41.257

这是我为任何有兴趣的人测试我的功能的脚本。

```
--unit test script for dbo.full_type_name
DECLARE
 @Datatypes varchar (max) = '',
 @User_Type_Ids varchar (max) = '',
 @Lengths varchar (max) = '',
 @Precisions varchar (max) = '',
 @Scales varchar (max) = '',
 @Ret_Datatypes varchar (max) = '',
 @Utid_Index int = 0,
 @Length_Index int = 0,
 @Precision_Index int = 0,
 @Scale_Index int = 0,
 @Utid_Substr varchar (40) = '',
 @Length_Substr varchar (40) = '',
 @Precision_Substr varchar (40) = '',
 @Scale_Substr varchar (40) = '',
 @Length smallint = NULL,
 @Precision tinyint = NULL,
 @Scale tinyint = NULL,
 @Count smallint = 0,
 @Ispass bit = 0;

SELECT @Datatypes = COALESCE (@Datatypes + ',', '') + sys.types.name
  FROM sys.types
  WHERE(system_type_id < 242) 
  ORDER BY name;

--remove delimter at start of the string
SELECT @Datatypes = SUBSTRING (@Datatypes, 2, LEN (@Datatypes)) ;

SET @Datatypes = @Datatypes + ',nvarchar(10),nvarchar(max),nchar(20),char(20),
  varchar(max),varchar(10),decimal(10,5),numeric(8,4),float(4),datetime2(2),
  time(4),datetimeoffset(3),varbinary(max)';

SELECT @User_Type_Ids = COALESCE (@User_Type_Ids + ',', '') 
   + CAST(sys.types.user_type_id AS varchar (3)) 
 FROM sys.types
 WHERE(system_type_id < 242) 
 ORDER BY name;
--remove delimter at start of the string
SELECT @User_Type_Ids = SUBSTRING (@User_Type_Ids, 2, LEN (@User_Type_Ids)) ;

SELECT @User_Type_Ids = @User_Type_Ids + ',231,231,239,175,167,167,106,108,62,42,41,43,165';

SELECT @Lengths = '8,null,1,null,3,8,8,10,17,8,null,null,892,16,4,8,null,
  16,17,null,4,4,2,4,8016,256,16,5,8,1,16,null,null,-1';

--now add the remainimg lengths
  SELECT @Lengths = @Lengths + ',20,-1,40,20,-1,10,17,17,8,8,5,10,-1';

WHILE(@Count < 34)  --don't use values from sys.types
  BEGIN
    SELECT @Precisions = @Precisions + ',' + 'null';
    SELECT @Scales = @Scales + ',' + 'null';
    SET @Count = @Count + 1;
  END;

--remove delimter at start of the string
SELECT @Precisions = SUBSTRING (@Precisions, 2, LEN (@Precisions)) ;
--now add the remaining precisions
SELECT @Precisions = @Precisions + ',null,null,null,null,null,null,10,8,4,2,4,3,null';

--remove delimter at start of the string
SELECT @Scales = SUBSTRING (@Scales, 2, LEN (@Scales)) ;
--now add remaining scales
SELECT @Scales = @Scales + ',null,null,null,null,null,null,5,4,null,null,null,null,null';

--Now call our new function for each set of parameters in turn and concatenate the result

--use a while loop to step though comma seperated pseudo arrays
WHILE @User_Type_Ids <> ''
  BEGIN
    --Find index of next commas
    SET @Utid_Index = CHARINDEX (',', @User_Type_Ids) ;
    SET @Length_Index = CHARINDEX (',', @Lengths) ;
    SET @Precision_Index = CHARINDEX (',', @Precisions) ;
    SET @Scale_Index = CHARINDEX (',', @Scales) ;
    IF @Utid_Index > 0
        BEGIN
            -- @utid_substr is substring from start of @CsRoles to character preceding the comma
            SET @Utid_Substr = LEFT (@User_Type_Ids, @Utid_Index - 1) ;
            SET @Length_Substr = LEFT (@Lengths, @Length_Index - 1) ;
            SET @Precision_Substr = LEFT (@Precisions, @Precision_Index - 1) ;
            SET @Scale_Substr = LEFT (@Scales, @Scale_Index - 1) ;
            --now remove this substring and its trailing comma from @CsRoles
            SET @User_Type_Ids = RIGHT (@User_Type_Ids, LEN (@User_Type_Ids) - @Utid_Index) ;
            SET @Lengths = RIGHT (@Lengths, LEN (@Lengths) - @Length_Index) ;
            SET @Precisions = RIGHT (@Precisions, LEN (@Precisions) - @Precision_Index) ;
            SET @Scales = RIGHT (@Scales, LEN (@Scales) - @Scale_Index) ;
        END;
    ELSE
        --last element, has no trailing comma
        BEGIN
            SET @Utid_Substr = @User_Type_Ids;
            SET @Length_Substr = @Lengths;
            SET @Precision_Substr = @Precisions;
            SET @Scale_Substr = @Scales;
            --ensure that we will exit the WHILE loop
            SET @User_Type_Ids = ''; --to ensure break out of while loop
        END;

    IF(@Length_Substr = 'null') 
        BEGIN
            SET @Length = NULL;
        END;
    ELSE
        BEGIN
            SET @Length = CAST(@Length_Substr AS smallint);
        END;
    IF(@Precision_Substr = 'null') 
        BEGIN
            SET @Precision = NULL;
        END;
    ELSE
        BEGIN
            SET @Precision = CAST(@Precision_Substr AS tinyint);
        END;

    IF(@Scale_Substr = 'null') 
        BEGIN
            SET @Scale = NULL;
        END;
    ELSE
        BEGIN
            SET @Scale = CAST(@Scale_Substr AS tinyint);
        END;

    --now call our function
    SET @Ret_Datatypes = @Ret_Datatypes + ',' 
       + ISNULL (jc_utils.jpwfn_0001_full_type_name (CAST(@Utid_Substr AS int), 
       @Length, @Precision, @Scale) , 'NULL') ;

END; --End of WHILE loop

--Now compare the concatenated return values with the expected vlaues
--remove delimter at start of the string
SELECT @Ret_Datatypes = SUBSTRING (@Ret_Datatypes, 2, LEN (@Ret_Datatypes)) ;

IF(@Ret_Datatypes = @Datatypes) 
  BEGIN
    SET @Ispass = 1;
  END;

--Now test for known fail conditions
--all these should return null
--invalid lengths 
IF(@Ispass = 1) 
  BEGIN
    SET @User_Type_Ids = '165,165,165,167,167,167,173,173,173,
      175,175,175,231,231,231,239,239,239,106,106,106,106,
      108,108,108,108,62,62,41,42,43';
    SET @Lengths = '0,8001,-2,0,8001,-2,0,8001,-2,0,8001,-2,0,
      4001,-2,0,4001,-2,-2,80,null,0,-2,80,null,0,0,null,0,0,0';
    SET @Precisions = 'null,null,null,null,null,null,null,null,
      null,null,null,null,null,null,null,null,
      null,null,null,2,0,1,null,2,0,1,0,54,8,8,8';
    SET @Scales = 'null,null,null,null,null,null,null,null,
      null,null,null,null,null,null,null,null,
      null,null,1,null,2,2,1,null,2,2,null,null,0,0,0';

    WHILE @User_Type_Ids <> ''
        BEGIN
            --Find index of next commas
            SET @Utid_Index = CHARINDEX (',', @User_Type_Ids) ;
            SET @Length_Index = CHARINDEX (',', @Lengths) ;
            SET @Precision_Index = CHARINDEX (',', @Precisions) ;
            SET @Scale_Index = CHARINDEX (',', @Scales) ;
            IF @Utid_Index > 0
                BEGIN
                    SET @Utid_Substr = LEFT (@User_Type_Ids, @Utid_Index - 1) ;
                    SET @Length_Substr = LEFT (@Lengths, @Length_Index - 1) ;
                    SET @Precision_Substr = LEFT (@Precisions, @Precision_Index - 1) ;
                    SET @Scale_Substr = LEFT (@Scales, @Scale_Index - 1) ;
                    --now remove this substring and its trailing comma 
                    SET @User_Type_Ids = RIGHT (@User_Type_Ids, LEN (@User_Type_Ids) 
                        - @Utid_Index) ;
                    SET @Lengths = RIGHT (@Lengths, LEN (@Lengths) - @Length_Index) ;
                    SET @Precisions = RIGHT (@Precisions, 
                       LEN (@Precisions) - @Precision_Index) ;
                    SET @Scales = RIGHT (@Scales, LEN (@Scales) - @Scale_Index) ;
                END;
            ELSE
                --last element, has no trailing comma
                BEGIN
                    SET @Utid_Substr = @User_Type_Ids;
                    SET @Length_Substr = @Lengths;
                    SET @Precision_Substr = @Precisions;
                    SET @Scale_Substr = @Scales;
                    --ensure that we will exit the WHILE loop
                    SET @User_Type_Ids = ''; --to ensure break out of while loop
                END;

            IF(@Length_Substr = 'null') 
                BEGIN
                    SET @Length = NULL;
                END;
            ELSE
                BEGIN
                    SET @Length = CAST(@Length_Substr AS smallint);
                END;
            IF(@Precision_Substr = 'null') 
                BEGIN
                    SET @Precision = NULL;
                END;
            ELSE
                BEGIN
                    SET @Precision = CAST(@Precision_Substr AS tinyint);
                END;

            IF(@Scale_Substr = 'null') 
                BEGIN
                    SET @Scale = NULL;
                END;
            ELSE
                BEGIN
                    SET @Scale = CAST(@Scale_Substr AS tinyint);
                END;

            --now call our function
            SET @Ret_Datatypes = dbo.full_type_name (CAST(@Utid_Substr AS int), 
               @Length, @Precision, @Scale) ;
            IF(@Ret_Datatypes IS NOT NULL) 
                BEGIN
                    SET @Ispass = 0;
                    BREAK;
                END;
            ELSE
                BEGIN
                    SET @Ispass = 1;
                END;

        END; --End of WHILE loop
  END;
IF(@Ispass = 1) 
  BEGIN
    PRINT 'pass';
  END;
ELSE
  BEGIN
    PRINT 'fail';
    PRINT @Datatypes;
    PRINT @Ret_Datatypes;
  END; 
```

# javascript - SCRIPT5：使用 XMLHttpRequest 在 ie 上访问被拒绝错误

> ID：10977490
> 
> 赞同：1
> 
> 时间：2012-06-11T09:28:39.890
> 
> 标签：javascript, xmlhttprequest, internet-explorer-9

我有一个 XMLHttpRequest 的 SCRIPT5 错误，即使有这个问题我也无法解决这个问题：[SCRIPT5: Access is denied in IE9 on xmlhttprequest](https://stackoverflow.com/questions/5793831/script5-access-is-denied-in-ie9-on-xmlhttprequest)

这是我的代码：

```
function getXDomainRequest()
{
        var xdr = null;

if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
    xdr=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
    xdr=new ActiveXObject("Microsoft.XMLHTTP");
  }
        return xdr;        
}

function sendData()
{
        var xdr = getXDomainRequest();
        xdr.onload = function() 
        {
                var xml = xdr.responseXML; 
                var prod = xml.documentElement.getElementsByTagName("produit");          
        }
        xdr.open("GET", "http://www.mysite.tm.fr/page.php?var1="+ var1 +"");
        xdr.send();
} 
```

任何帮助将非常非常非常感谢！

精度：遥远的网站返回给我一个这样的 XML 内容：

```
<liste>
<produits>
<produit>...</produit>
<produit>...</produit>
<produit>...</produit>
</produits>
</liste> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T09:47:58.273

IE9 不支持 XHR 的 CORS。IE10 会。[来源](http://blogs.msdn.com/b/ie/archive/2012/02/09/cors-for-xhr-in-ie10.aspx)。

但是，IE8/9 支持带有[XDomainRequest](http://blogs.msdn.com/b/ieinternals/archive/2010/05/13/xdomainrequest-restrictions-limitations-and-workarounds.aspx)的 CORS 。

# android - 无法从视频中检索图像

> ID：10977493
> 
> 赞同：0
> 
> 时间：2012-06-11T09:29:06.180
> 
> 标签：android, media

我正在使用类`getFrameAtTime()`方法`MediaMetadataRetriever`来获取位于视频（mp4）中特定时间的帧。当视频分辨率较低时，例如 480 x 270，这可以正常工作。但如果我使用同一视频的高清版本 (1280 x 720)，则会出现错误。有什么出路吗？

日志猫：

06-11 08:24:45.714: D/dalvikvm(511): GC_EXTERNAL_ALLOC 释放 41K，53% 释放 2550K/5379K，外部 1625K/2137K，暂停 120ms

06-11 08:24:46.974: E/MediaMetadataRetrieverJNI(511): getFrameAtTime: videoFrame 是一个空指针

代码是这样的：

```
package com.asin.amit;

import java.io.BufferedOutputStream;
import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.io.IOException;

import android.app.Activity;
import android.graphics.Bitmap;
import android.graphics.Bitmap.CompressFormat;

import android.media.MediaMetadataRetriever;
import android.os.Bundle;
import android.util.Log;
import android.widget.ImageView;
import android.widget.TextView;
import android.widget.Toast;

public class AsinActivity extends Activity {
/** Called when the activity is first created. */
private MediaMetadataRetriever mediam;
private Bitmap bmp;
private int g;

private ImageView myImageView;
private TextView tv ;

@Override

public void onCreate(Bundle savedInstanceState) {

    try {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        mediam = new MediaMetadataRetriever();
        String str= "/sdcard/DCIM/wdc.mp4";
        mediam.setDataSource(str);

    } catch (Exception e) {
        // handle any errors
        Log.e("HelloWorld", "1", e);  // log the error
        // Also let the user know something went wrong
        Toast.makeText(
                getApplicationContext(),
                e.getClass().getName() + " " + e.getMessage(),
                Toast.LENGTH_LONG).show();
    }

    try {
        bmp=mediam.getFrameAtTime();

    } catch (Exception e) {
        // handle any errors
        Log.e("HelloWorld", "2", e);  // log the error
        // Also let the user know something went wrong
        Toast.makeText(
                getApplicationContext(),
                e.getClass().getName() + " " + e.getMessage(),
                Toast.LENGTH_LONG).show();
    }

} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T23:33:44.083

这是我的错误。我正在使用从互联网下载的视频。但是，如果您使用手机拍摄的视频，它会起作用。

# ruby-on-rails - 如果提交不成功，则无法显示带有错误的模式 [设计]

> ID：10977494
> 
> 赞同：0
> 
> 时间：2012-06-11T09:29:06.020
> 
> 标签：ruby-on-rails, devise, twitter-bootstrap, modal-dialog, registration

如果提交不成功，我的问题是显示错误的模式。

我应该尝试 AJAX 还是没有它也可以完成？

我应该覆盖注册控制器吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T10:55:02.313

例如：

具有一些验证的模型用户：

```
class User < ActiveRecord::Base
  validates :name,        :uniqueness => { :case_sensitive => false },
                          :presence => true
  validates :email,       :uniqueness => { :case_sensitive => false },
                          :presence => true,
  ...
end 
```

我使用共享部分来显示阻止保存表单中数据的错误：

_error_messages.html.erb

```
<% if object.errors.any? %>
  <div id="error_explanation">
  <h3><%= pluralize(object.errors.count, "error") %>
    prohibited this <%= object.class.to_s.underscore.humanize.downcase %>
    from being saved:</h3>
  <p>There were problems with the following fields:</p>
  <ul>
  <% object.errors.full_messages.each do |msg| %>
    <li><%= msg %></li>
  <% end %>
  </ul>
  </div>
<% end %> 
```

在表单中创建或编辑新用户：

```
<%= form_for(@user) do |f| %>
  <%= render 'shared/error_messages', :object => f.object %>
  <div class="field">
    <%= f.label :name %><br />
    <%= f.text_field :name %>
  </div>
... 
```

# jquery - 响应ajax请求jsonp后继续处理

> ID：10977497
> 
> 赞同：0
> 
> 时间：2012-06-11T09:29:13.183
> 
> 标签：jquery, ajax, json, jsonp

```
var getPageInhalt : function (id){
    var restmethod = "http://localhost:1212/getPageById/"+id+"/jsonp.aspx?callback=?";

    $.ajax({
        url: restmethod,
        type: "GET",
        contentType: "application/json",
        async: false,                        
        dataType: 'jsonp',
        cache: false,
        error: function(){
            return false;
        },
        success: function(data){ 
            console.log(data); --> balblal
            return data;
        }
    });
}

console.log(getPageInhalt(2));-->undefined ????? 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T09:32:38.923

虽然我不同意同步 AJAX（*从技术上讲它是矛盾的 ..*），但您将不得不从`getPageInhalt`函数中返回值，而不是从 ajax 回调中返回值。

```
var getPageInhalt = function (id){
    var restmethod = "http://localhost:1212/getPageById/"+id+"/jsonp.aspx?callback=?",
        resultValue;

    $.ajax({
        url: restmethod,
        type: "GET",
        contentType: "application/json",
        async: false,                        
        dataType: 'jsonp',
        cache: false,
        error: function(){
            resultValue = false;
        },
        success: function(data){ 
            console.log(data); //--> balblal
            resultValue = data;
        }
    });

    return resultValue;
} 
```

**这是一个演示** [http://jsfiddle.net/gaby/qHY7g/](http://jsfiddle.net/gaby/qHY7g/)

# linux - 在 linux 上安装具有不同用户帐户的应用程序

> ID：10977498
> 
> 赞同：0
> 
> 时间：2012-06-11T09:29:17.140
> 
> 标签：linux, unix, permissions, access-rights

`linux`我有关于在操作系统上安装应用程序的基本问题。我将以 oracle db 安装为例来表达我的问题。在安装 oracle 数据库时，我创建了一个名为的用户组`dba`，该组中的用户名为`ora112`. 所以这个用户被允许安装数据库。所以我的问题是如果`ora112`uses`umaks`设置为`077`，那么没有其他用途将能够配置 oracle 数据库。为什么我们需要遵循这种做法。它是在`Linux`. 请与我分享您的经验。提前感谢您调查此问题

`Java`说我以这种方式安装应用程序。`Java`那么由于此访问限制，属于不同用户帐户的其他应用程序将无法在此计算机上运行。

安装应用程序时使用的默认权限是什么。是`770`吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T09:32:47.577

我认为您误用了`umask`s 的权限。如果您使用 770 权限安装数据库，则`dba`组中的任何人都可以在那里做他们需要做的事情。

在另一个主题上，如果用户`ora112`将 umask 设置为 077，那么当他创建一个新文件时，他将默认使用权限 700 创建它。这意味着您必须手动 chmod 所有 ora112 创建的内容才能让其他组成员`dba`修改它。

再次注意 umask 与实际安装的权限有何不同！

# hibernate - 数据库中的数据不是最新的（EJB 3.1，HibernatePersistence）

> ID：10977499
> 
> 赞同：0
> 
> 时间：2012-06-11T09:29:19.090
> 
> 标签：hibernate, jpa, transactions, ejb, jta

技术：EJB 3.1、JSF、JBoss 7.1.1

有一个工作 CRUD 的项目。问题：

在一个浏览器中，带有实体列表的表格被打开。在另一个也是。每个表都是最新的。一个实体被编辑并保留。在 DB 中，我们可以看到正确的数据状态。

在另一个浏览器中，我们刷新并重新加载数据，但没有最后一次更改。屏幕上是以前的数据（数据不是最新的）。但是在登录/注销后，我们可以看到最后编辑的数据（数据是最新的）。

我认为原因是 JPA - 缓存。

我需要建议如何在当前会话期间从数据库中获取实际数据。

持久性.xml

```
 <persistence-unit name="MyEntityManager">

        <provider>org.hibernate.ejb.HibernatePersistence</provider>

        <jta-data-source>java:jboss/datasources/MydataSource</jta-data-source>
        <properties>

            <property name="hibernate.hbm2ddl.auto" value="create-drop"/>
            <property name="hibernate.dialect"value="org.hibernate.dialect.PostgreSQLDialect"/>
            <property name="hibernate.transaction.manager_lookup_class"
                      value="org.hibernate.transaction.JBossTransactionManagerLookup"/>
            <property name="hibernate.connection.autocommit" value="true"/>
            <property name="hibernate.connection.characterEncoding" value="utf8"/>

            <property name="hibernate.c3p0.min_size" value="5"/>
            <property name="hibernate.c3p0.max_size" value="20"/>
            <property name="hibernate.c3p0.timeout" value="1800"/>
            <property name="hibernate.c3p0.max_statements" value="50"/>

        </properties>

    </persistence-unit> 
```

DAO 类

```
@Named("userDao")
@Stateful
@TransactionManagement(TransactionManagementType.BEAN)
public class UserDaoBean implements UserDAO, Serializable {

    private static final long serialVersionUID = -2486674295685504650L;

    @PersistenceContext(name = "MyEntityManager", type = PersistenceContextType.EXTENDED)
    private EntityManager em;

   private User getUser(String user) {
        try {
            return (User) em.createNamedQuery(Queries.GET_User).setParameter("User", user.No).getSingleResult();
        } catch (NoResultException ex) {
            return null;
        }
    }

    @Override

    public void addUser(User user) throws Exception {
        em.persist(user);
        em.flush();
    }

    @Override
    public void update(User user) throws Exception {
        User tmpUser = getUser(user.getUser());
        if (tmpUser == null) {
            addUser(user);
            return;
        }
        tmpUser.setUser(user.getUser());
        tmpUser.setUsere(user.getUser());
        em.persist(tmpUser);
        em.flush();
    } 
```

我尝试添加额外的

```
 userTransaction.begin();
  //removal or updating
  userTransaction.commit(); 
```

但 `em.flush();`它不起作用。

提前感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T09:39:43.260

您正在使用扩展的持久性上下文 ( `type = PersistenceContextType.EXTENDED`)。这就是规范对它们的描述：

> 容器管理的扩展持久性上下文只能在有状态会话 bean 的范围内启动。它从创建声明对 PersistenceContextType.EXTENDED 类型的实体管理器的依赖关系的有状态会话 bean 开始存在，并且被称为绑定到有状态会话 bean。通过 PersistenceContext 注释或 persistence-context-ref 部署描述符元素声明对扩展持久性上下文的依赖。当有状态会话 bean 的 @Remove 方法完成（或者有状态会话 bean 实例被销毁）时，容器将关闭持久性上下文。

因此，此持久性上下文的第一级缓存在有状态会话 bean 的生命周期内保持活动状态。在这种情况下，我认为没有理由使用扩展的持久性上下文。使用无状态会话 bean 和普通的持久化上下文，用户将从数据库中重新加载，而不是从持久化上下文的一级缓存中重新加载。

# iphone - 如何加速 JqueryMobile + Phonegap 应用程序

> ID：10977510
> 
> 赞同：6
> 
> 时间：2012-06-11T09:30:24.240
> 
> 标签：iphone, jquery-mobile, cordova

我用 JqueryMobile 和 Phoenagap 开发了一个 iPhone 应用程序。我用代码缩小了所有文件，删除了未使用的文件，但应用程序仍然很慢。问题是。如果我点击按钮转换将启动 appdrox。1 秒后。我想更快地进行页面转换。

我还禁用了未使用的部分设备（相机等），但它仍然很慢。

有人可以帮我解决这个问题吗？

我在 iPhone 4g 上测试。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-06-12T03:56:57.500

## 提高性能的指针

缓存 jQuery 对象

```
Ex: var header = $('#header'); 
```

考虑以下替代方案：

*   jQuery.each()
*   。显示（）
*   。隐藏（）
*   .toggle()

更改`display:none`为要快得多。也许只是使用`addClass('hidden')`和`removeClass('hidden')`

尽量减少使用慢的 jQuery 方法 O(n^2)

*   消除（）
*   html()
*   空的（）

以下方法也很昂贵：

*   附加（）
*   前置（）
*   前（）
*   后（）

这些操作方法背后的过程如下：清理输入字符串，将字符串转换为 DOM 片段并将其注入 DOM。

优化选择器：

按表现顺序：

*   id（由于唯一性）
*   标签
*   名称，类（都需要检查每个 DOM 元素的属性）

获取具体的，最好选择父母的 id 开始：

```
 $('#test p.description').removeClass('hidden');
    instead of 
    $('.description').removeClass('hidden'); 
```

尽可能使用子选择器而不是后代选择器：

```
 $('div > p').hide(); or $('div').children('p'); 
    instead of
    $('div p').hide(); or $('div').find('p'); 
```

在上下文中使用查找：

```
 $('div').find('p');
    instead of
    $('div', 'p'); 
```

使用 .filter() 而不是使用标签选择器：

```
 $('div.name').filter(':input');
    instead of
    $('div.name :input'); 
```

记忆：

```
var myFunc = function (param) {
    if (!myFunc.cache.hasOwnProperty(param)) {
            var result = {};
            // ... expensive operation ...
            myFunc.cache[param] = result;
    }
    return myFunc.cache[param];
};

// cache storage
myFunc.cache = {}; 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-23T05:59:01.930

虽然 Brett Holt 的回答提供了许多让您的应用程序更高效的重要提示，但我认为您所说的延迟问题的部分原因与呈现您的应用程序的 WebKit 引擎有关。*在注册点击之前有一个约 300 毫秒*的内置延迟，以允许双击事件。

根据我的研究，共识似乎是绑定到 ' `vclick`' 事件而不是 ' `click`'。`vclick`一旦你点击你的对象应该会触发。

我在我的应用程序中使用了一个名为[jquery.touchToClick](https://github.com/cargomedia/jquery.touchToClick)的库，它会自动处理将`click`事件转换为`vclick`. 这显着加快了我的点击事件。但请记住，它可能不是解决此问题的最有效方法。

我还看到`jquery.touchToClick`了其他库，例如[LightningTouch](https://github.com/trott/LightningTouch)，但我还没有尝试过。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-23T21:54:18.667

这对我来说很有帮助，它减少了 hoverDelay 并使 UI 在触摸屏设备上更具响应性。

```
$(document).on("mobileinit", function(){
    $.mobile.buttonMarkup.hoverDelay = 0;
}); 
```

你也可以禁用转场，遗憾的是这让 jQueryMobile 很快。

```
$(document).on("mobileinit", function(){
    $.mobile.defaultPageTransition   = 'none';
    $.mobile.defaultDialogTransition = 'none';
}); 
```

# php - Zend 框架：使用 setFromArray() 转义表单输入

> ID：10977511
> 
> 赞同：0
> 
> 时间：2012-06-11T09:30:24.930
> 
> 标签：php, zend-framework, zend-form, sql-injection, zend-db

我一直在考虑提高我的一些网站的安全性和稳定性，我一直在检查的一件事是逃避用户的所有输入（我应该这样做）。

在很多情况下，我使用标准 Zend_Db_Table_Row setFromArray() 方法，即

```
$myForm = new Form_MyForm();
$myTable = new Model_DbTable_MyTable();

if ($this->getRequest()->isPost()) 
{
    if ($myForm->isValid($_POST))
    {
        $myRow = $myTable->createRow();
        $myRow->setFromArray($_POST);
        $myRow->save();
    }
} 
```

正如预期的那样，这工作正常。但是我不知道输入是否在此代码的任何位置被转义（就像用户的所有输入都应该在放在数据库附近的任何地方之前）。我在 Zend 中使用 quoteInto()，但也在外部使用 mysqli_real_escape_string()。

有谁知道在上面的示例中用户输入是否被转义（准备好用于数据库），如果没有，如果我想继续使用 setFromArray() 方法，我该如何转义它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T09:36:03.553

setFromArray 没有过滤变量。采用

```
$form->getValues() ; // not directly the $_POST 
```

这将根据您的表单规则进行过滤/验证。

其他选项是 filter_var 手动 POST 或 Zend_Filter。

setFromArray() 只是用值填充行对象，而 save() 不进行验证检查，它进行更新。因此，您应该在此之前进行转义/验证，并且不是自动的。您可以将过滤器添加到表单本身，然后使用 getFiltredValues/getUnfilteredValues。我认为唯一的自动转义发生在使用 Zend_Select 并且您将参数绑定到 ?

# tabs - 关于 API 的画布宽度

> ID：10977524
> 
> 赞同：0
> 
> 时间：2012-06-11T09:31:19.677
> 
> 标签：tabs, width, facebook-apps

我的 API 有一点问题：

当我通过链接访问它时：[http](http://apps.facebook.com/325997004142754/) ://apps.facebook.com/325997004142754/如您所见，页面显示正确（宽度良好）。

我在我的页面标签（我公司的页面）中添加了这个 API，当我使用这个标签（url = [http://www.facebook.com/jmj.automobiles/app_325997004142754](http://www.facebook.com/jmj.automobiles/app_325997004142754)）访问它时，页面的显示现在是错误的（宽度不好） ...

如何拥有相同的页面宽度？这两个 API 的 url 有什么区别？

PS：我公司的页面：www.facebook.com/jmj.automobiles

非常感谢 ！

罗曼。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T09:53:14.760

检查您的应用程序不是使用静态 CSS 构建的和/或您没有使用与页面标签 URL 相同的 Canvas 回调，因为它们的大小不同，并且如果您的代码不期望它看起来会很奇怪。

*   页面选项卡应用的 iFrame 宽度为 Narrow (520px) 或 Wide (810px)

*   画布应用的 iFrame 宽度为 Fixed (760px) 或 Fluid（扩展到用户浏览器的宽度）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T09:41:13.003

也许你忘了调整大小？

[FB.Canvas.setSize](https://developers.facebook.com/docs/reference/javascript/FB.Canvas.setSize/)：

> 每当您需要调整大小时调用它。这通常意味着，在页面加载后，以及每当您的内容大小发生变化时。

```
// should be called when you know that your app's size changed
FB.Canvas.setSize(); 
```

[FB.Canvas.setAutoGrow](https://developers.facebook.com/docs/reference/javascript/FB.Canvas.setAutoGrow/)

> 如果您知道您的内容会改变大小，但您不知道何时更改，此功能很有用。会有一点延迟，所以如果你知道你的内容何时改变大小，你应该自己调用 setSize （并节省用户的 CPU 周期）。

```
// should be called when you can't predict size changes
FB.Canvas.setAutoGrow(); 
```

# ios4 - 使用 ALAsset 库从库中选择视频并将该视频转换为数据类型

> ID：10977530
> 
> 赞同：2
> 
> 时间：2012-06-11T09:32:00.480
> 
> 标签：ios4

我正在使用`ALAssert`库从 iPhone 库中选择视频，并且我正在设置该视频文件的属性，例如。

```
 (void)selectedAssets:(NSArray*)_assets {

NSMutableArray *returnArray = [[[NSMutableArray alloc] init] autorelease];

for(ALAsset *asset in _assets) {

    NSMutableDictionary *workingDictionary = [[NSMutableDictionary alloc] init];

    [workingDictionary setObject:[asset valueForProperty:ALAssetPropertyType] forKey:@"UIImagePickerControllerMediaType"];

    [workingDictionary setObject:[UIImage imageWithCGImage:[[asset defaultRepresentation] fullScreenImage]] forKey:@"UIImagePickerControllerOriginalImage"];

    [workingDictionary setObject:[[asset valueForProperty:ALAssetPropertyURLs] valueForKey:[[[asset valueForProperty:ALAssetPropertyURLs] allKeys] objectAtIndex:0]] forKey:@"UIImagePickerControllerReferenceURL"];

    [workingDictionary setObject:[[asset defaultRepresentation]url] forKey:@"UIImagePickerControllerMediaURL"];

    [returnArray addObject:workingDictionary];        
    [workingDictionary release];    
}

[self popToRootViewControllerAnimated:NO];
[[self parentViewController] dismissModalViewControllerAnimated:YES];

if([delegate respondsToSelector:@selector(elcImagePickerController:didFinishPickingMediaWithInfo:)]) {
    [delegate performSelector:@selector(elcImagePickerController:didFinishPickingMediaWithInfo:) withObject:self withObject:[NSArray arrayWithArray:returnArray]];
} 
```

}

我在这里设置，但我认为这不是我所做的所有`UIImagePickerControllerMediaURL`设置的权利。`UIImagePickerControllerMediaURL`

我如何`UIImagePickerControllerMediaURL`为选定的视频提供属性。并将该视频转换`MediaURL`为数据类型。

# android - 每隔三个应用程序从嵌入文件中读取 android 上的 pdf

> ID：10977531
> 
> 赞同：2
> 
> 时间：2012-06-11T09:32:00.547
> 
> 标签：android, pdf

例如，我很难在 adobe 上阅读我的 pdf。我有文档查看器，它似乎在我购买之前已经安装在我的手机上（我认为它是一个默认的 android 应用程序）。有了它，我的代码就可以正常工作了。但我见过崩溃，可能是没有文档查看器的人。

所以我用 adobe reader 测试了我的代码，它崩溃了！

有人可以解释一下我的代码有什么问题（和/或）给我 Gplay 链接让我的用户下载它。

```
public Intent readPdf(String name, int res) {
    final String extStorageDirectory = Environment
            .getExternalStorageDirectory().toString();
    final String festivalDirectory_path = extStorageDirectory
            + Constants.PDF_STORAGE_PATH;
    File pdfOutputFile = new File(festivalDirectory_path, "/");
    if (pdfOutputFile.exists() == false) {
        pdfOutputFile.mkdirs();
    }
    File pdfFile = new File(pdfOutputFile, name);
    // AssetManager assetManager = getAssets();
    InputStream in = null;
    try {
        // InputStream in = assetManager
        // .open("cartecannesplus01pdf.pdf");
        in = getResources().openRawResource(res);

        OutputStream out = new FileOutputStream(pdfFile);
        byte[] buffer = new byte[1024];
        int bufferLength = 0;
        while ((bufferLength = in.read(buffer)) > 0) {
            out.write(buffer, 0, bufferLength);
        }
        out.flush();
        out.close();
    } catch (Exception e) {
        Log.e("tag", e.getMessage());
    }
    Uri path = Uri.fromFile(pdfFile);

    Intent intent = null;
    if (Utils.appInstalledOrNot(me, "com.adobe.reader")) {
        intent = new Intent(Intent.ACTION_VIEW);
        intent.setDataAndType(path, "application/pdf");
        intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
    } else {
        intent = new Intent(Intent.ACTION_VIEW);
        intent.setData(Uri.parse("market://details?id=com.adobe.reader"));
    }

    return intent;

} 
```

谢谢 ！

雷诺

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T11:54:40.820

我发现了问题：参数中的名称必须以 .pdf 结尾

如果不是，则 adobe reader 无法读取 pdf，因为它适用于我尝试过的所有其他 pdf 阅读器！

谢谢大家 ！

# java - 如何在clojure中将图像背景添加到JTable

> ID：10977532
> 
> 赞同：0
> 
> 时间：2012-06-11T09:32:10.173
> 
> 标签：java, clojure, clojure-java-interop

我在 clojure 中编写了这个程序来将背景图像添加到 JTable。我被这个`prepareRenderer`功能困住了。似乎 clojure 无法处理第一个参数`rd`（等效 Java `TableCellRenderer rd`）。我可能在这里做错了，如果有人可以帮助我解决这个问题，我将非常感激。要运行该程序，只需将其保存到一个`tabletest.clj`文件并在 clojure 提示符下键入：

```
(load-file "tabletest.clj") 
```

如果您注释掉该`prepareRenderer`函数，您可以在不看到背景图像的情况下成功运行代码。

请为 JTable 背景提供您自己的图像文件。该程序如下所列：

```
 (import '(javax.swing JFrame JTable JPanel JScrollPane)
            '(javax.swing.table DefaultTableModel TableCellRenderer)
            '(java.awt Component BorderLayout Dimension Image))
    (import javax.imageio.ImageIO)
    (import java.io.File)

    (defn tabletest []
         (let [tableData (to-array-2d [
                       ["numbers" "67890" "This"]
                               ["mo numbers" "2598790" "is"]
                               ["got Math" "2598774" "a"]
                               ["got Numbers" "1234567" "Column"]
                               ["got pi" "3.1415926" "Apple"]
                                  ])
               colNames (to-array ["Col Labels" "Go" "Here"])
               frame (JFrame. "Table Example")
               panel (JPanel.)
               sP (JScrollPane.)
               dataModel (DefaultTableModel. tableData colNames)
               table (proxy [JTable] [dataModel]
                 (prepareRenderer [rd row col] ; problem starts here
                      (proxy-super rd row col) ; Don't know how to translate
                                                       ; Java code below to clojure:
                  (.setOpaque this false)  ;if (c instanceof JComponent)
                                ; ((JComponent)c).setOpaque(false);

                  this
                 )
                 (paintComponent [g2d]
                  ;(proxy-super paintComponent g2d)
                  (def image (ImageIO/read (File. "GreenCar.png")))
                  (.drawImage g2d image 0 0 this)
                  (proxy-super paintComponent g2d)
                         )
                    )
              ]

              (.setCellSelectionEnabled table true)
              (.setOpaque table false)
              (.setPreferredSize sP (Dimension. 300 150))
              (.setView (.getViewport sP) table)
              (.add panel sP)
              (doto frame
                  (.setLayout (BorderLayout.))
                  (.add panel BorderLayout/CENTER)
                  (.setSize 400 200)
                  (.setVisible true)
              )
          )
      )

      (tabletest) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T16:38:51.633

错误是行：

```
 (proxy-super rd row col) 
```

正确的编码方式是：

```
 (def c (proxy-super prepareRenderer [rd row col])) 
```

和行：

```
 (.setOpaque this false)
 this 
```

替换为：

```
 (if (instance? JComponent c)
     (.setOpaque c false))
 c 
```

# c# - 加密 c# 和 Cookie

> ID：10977534
> 
> 赞同：-1
> 
> 时间：2012-06-11T09:32:22.790
> 
> 标签：c#, cookies, encryption

我正在寻找最后不使用“=”加密字符串的算法。

为什么会这样？我用它在cookie中存储数据，字符串中的'='与cookie中的'='冲突。

有人有想法吗？谢谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T09:43:00.823

`=`字符串末尾的不是来自加密，而是来自使用 base64 编码。

您可以改用十六进制格式：

```
string encoded = BitConverter.ToString(data).Replace("-",""); 
```

该字符串仅包含字符 0-9 和 AF，因此不会引起任何冲突。

# linux - 重命名多个文件 - linux/ubuntu

> ID：10977543
> 
> 赞同：1
> 
> 时间：2012-06-11T09:32:57.577
> 
> 标签：linux, unix, ubuntu, directory, rename

我需要从目录中的图像文件中删除“_1331045422”。

例如，我的图像文件名如下所示：**message-16-error_1331045422.png**

我实际上运行了一个以这种方式重命名所有图像文件的脚本。我还有其他文件（名称正确的图像文件、js 文件和 css 等名称正确）

请帮助我使用“_1331045422”重命名所有图像文件的命令，而不会影响其他人。

编辑：我不仅有文件名错误的 .png 文件。也有 gif 和 jpeg。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T10:05:22.107

您可以使用重命名命令：

`rename 's/_\d+(\..{1,3})/$1/g' *`

如果您有扩展名超过三个字符的文件，您可以更改 {} 之间的范围。

请注意，在某些系统上，重命名命令有点不同。看看这里： [https ://superuser.com/questions/70217/is-there-a-linux-command-like-mv-but-with-regex](https://superuser.com/questions/70217/is-there-a-linux-command-like-mv-but-with-regex)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T09:40:28.557

在尝试之前备份您的文件！！

```
#!/bin/bash
for i in *.png; 
    do mv $i `echo $i | sed  "s/_[0-9]\+\.png^/\.png/"`
done 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T09:42:10.800

```
#!/usr/bin/python
# message-16-error_1331045422.png --> message-16-error.png
# Usage: python foo.py dir_to_change
import os, sys
dir=sys.argv[1]
for file in os.listdir(dir):
    if not file.endswith('.png'):
        continue
    new, end = file.rsplit('_', 1)
    new=u'%s.png' % new
    file_old=os.path.join(dir, file)
    file_new=os.path.join(dir, new)
    os.rename(file_old, file_new) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-07T08:18:48.840

使用[rnm](https://github.com/neurobin/rnm)：

```
rnm -rs '/_\d+(\.)(png|gif|jpg|jpeg)/\1\2/' * 
```

更多示例[在这里](https://neurobin.org/docs/unix/rnm/)。

# c# - 使用 lambda 更新对象的值

> ID：10977549
> 
> 赞同：2
> 
> 时间：2012-06-11T09:33:22.930
> 
> 标签：c#, lambda, ienumerable

我有这个 IEnumerable 类型的 Question.. 类 Question 具有属性 Question(string) 和 Id(int)

我想要做的是，如果 IEnumerable 中任何对象的问题的长度> 25，那么“子字符串”它并添加“...”

所以我的想法是这样的：

```
ienumQuestions.Where(e=>e.Question.Length > 25).Change(e.Question=>e.Question.Substring(25)+"..."); 
```

现在我不确定该语法是否 100% 正确，但我希望你明白这一点..

有没有办法做到这一点？..我真的不想为此创建一个循环..因为我根本不喜欢循环:)

提前致谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-11T09:37:30.120

## 谨慎接近

您可以使用 LINQ 中著名的`ForEach`扩展方法来遍历每个项目并相应地对其进行操作。本质上它与您描述的方法相同`Change`，并且可能看起来像这样：

## `ForEach`LINQ 扩展方法

```
public static void ForEach<TSource>(this IEnumerable<TSource> source, Action<TSource> action)
{
    foreach(TSource item in source)
    {
        action(item);
    }
} 
```

## 执行

```
ienumQuestions.Where(e => e.Question.Length > 25).ForEach(e =>
{
    e.Question = e.Question.Substring(0, 25) + "...";
});

// or
ienumQuestions.ForEach(e =>
{
    if (e.Question.Length > 25)
    {
        e.Question = e.Question.Substring(0, 25) + "...";
    }
}); 
```

## 论证和额外阅读

我个人不喜欢使用`ForEach`LINQ 扩展直接更新对象的方法，我更喜欢仅将其用于参考目的。我强烈建议在采用它之前阅读[“foreach vs ForEach”](http://blogs.msdn.com/b/ericlippert/archive/2009/05/18/foreach-vs-foreach.aspx)，因为它本质上违背了 LINQ 的原则，因为它直接修改集合中的对象，而这正是 LINQ 最初不打算做的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T09:55:54.383

LINQ中没有`Change`扩展，两者`IEnumerable`都是`String`不可变的（级别略有不同），因此无法更改。

我猜你想要一个像这样的截断扩展，

```
IEnumerable<string> Truncate<T>(
    this IEnumerable<T> source,
    Func<T, string> stringAccessor,
    int length,
    string suffix)
{
    var strings = source.Select(stringAccesor);
    return strings.Select(s =>
        {
            if (s.Length < length)
            {
                return s;
            }

            return string.Format(
                "{0}{1}",
                s.SubString(0, length),
                suffix)
        });
} 
```

你可以这样称呼

```
var truncatedQuestions = ienumQuestions.Truncate(q => q.Question, 25, "..."); 
```

# c# - 调整 ID3 标签图片大小

> ID：10977553
> 
> 赞同：0
> 
> 时间：2012-06-11T09:33:39.440
> 
> 标签：c#, wpf, id3, taglib-sharp

嗨，我正在制作一个小应用程序，它将加载一些 .mp3 歌曲并将其封面**调整**为所需的字节大小。
我认为最好的办法是改变实际分辨率，直到它不会低于要求。但我真的不知道如何操作或如何保存 ID3 pic'。

歌曲从*OpenFileDialog*加载，所需大小从简单的*textBox*加载。
我正在使用 taglib# 和 C#(WPF)，但如果有更好的库来解决这个问题，我不会抗拒。

这是我的示例，它真正调整了图片的大小，但它缩短了它。

```
private void MenuItem_Click(object sender, RoutedEventArgs e)
{
            int size;
            try
            {                
                size = int.Parse(textBox1.Text);
            }
            catch (FormatException)
            {
                MessageBox.Show("Enter requiered size!", "Err");
                return;
            }

            Microsoft.Win32.OpenFileDialog dlg = new Microsoft.Win32.OpenFileDialog();         
            dlg.DefaultExt = ".mp3";
            dlg.Filter = "mp3 files (.mp3) | *.mp3";
            dlg.Multiselect = true;

            Nullable<bool> result = dlg.ShowDialog();            

            if (result == true)
            {
                foreach (string file in dlg.FileNames)
                {
                    var song = TagLib.File.Create(file);
                    if (song.Tag.Pictures.Length > 0)
                    {
                        // var bin = (byte[])(song.Tag.Pictures[0].Data.Data);                                                
                        song.Tag.Pictures[0].Data.Resize(size);
                    }
                }
            }            
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T23:06:34.617

该`Data`属性是一个`ArrayList<byte>`表示原始图像文件。通过砍掉最后一个字节来减小大小就像通过删除最后一半或将一本书切成两半来缩小 MP3。您需要获取图像数据，将其转换为图像表示（例如 a `System.Drawing.Image`），缩放该图像，将其转换为字节数组，然后将其存储回图片属性中。它看起来像：

```
MemoryStream inputStream = new MemoryStream(song.Tag.Pictures[0].Data.Data);
Image picture = Image.FromStream(inputStream);
// Scale the image: http://www.codeproject.com/Articles/2941/Resizing-a-Photographic-image-with-GDI-for-NET
MemoryStream ouputStream = new MemoryStream();
picture.Save(outputStream, imageFormat);
song.Tag.Pictures[0].Data = outputStream.ToArray(); 
```

您必须在如何调整图像大小、如何选择输出格式等方面做一些工作。

# android - 显示列表的所有产品

> ID：10977561
> 
> 赞同：1
> 
> 时间：2012-06-11T09:33:59.510
> 
> 标签：android, listview, view

我正在尝试在我的数据库列表中显示活动中的所有产品。我使用了 NewView 和 BindView。我没有向我展示所有元素（条形码、格式、标题、价格），而是只看到最后一个，价格。任何解决方案表示赞赏！:) 这是代码的一部分：

```
 Cursor cursor = db.rawQuery("select * from " + PRODUCT_TABLE, null);

        setListAdapter(new CursorAdapter(this, cursor, true) {

        @Override
        public View newView(Context context, Cursor cursor, ViewGroup parent){

            TextView textView = new TextView(ProdottiSelectionActivity.this);
            textView.setText(cursor.getString(cursor.getColumnIndex("barcode")));
            textView.setText(cursor.getString(cursor.getColumnIndex("format")));
            textView.setText(cursor.getString(cursor.getColumnIndex("title")));
            textView.setText(cursor.getString(cursor.getColumnIndex("price")));
            return textView;
        }

        @Override
        public void bindView (View view, Context context, Cursor cursor){

            TextView textView = (TextView) view;
            textView.setText(cursor.getString(cursor.getColumnIndex("barcode")));
            textView.setText(cursor.getString(cursor.getColumnIndex("format")));
            textView.setText(cursor.getString(cursor.getColumnIndex("title")));
            textView.setText(cursor.getString(cursor.getColumnIndex("price")));

            }
        }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T10:08:08.997

使用 textView.append() 而不是 setText

# c - 表达式必须是指向完整对象类型的指针

> ID：10977563
> 
> 赞同：4
> 
> 时间：2012-06-11T09:34:35.770
> 
> 标签：c, pointers, multidimensional-array

我正在尝试使用两个整数访问多维数组的值。该数组在另一个源文件中声明。我在问题源文件的顶部使用了外部声明。

在声明它的文件中，我可以访问这些值。但是，当我复制并粘贴同一行代码时，编译器会通知我表达式必须是指向完整对象类型的指针。

我是 C 和指针的新手，所以我真的不知道发生了什么。我会很感激任何想法。

```
extern struct piece board[8][8];

void move()
{

    char row;
    int column;
    int rowNumber = 0;
    printf("row: ");
    scanf("%c",&row);
    fflush(stdin);
    printf("column: ");
    scanf("%d",&column);
    column--;
    switch(row)
    {
    case 'A': rowNumber = 0; break;
    case 'B': rowNumber = 1; break;
    case 'C': rowNumber = 2; break;
    case 'D': rowNumber = 3; break;
    case 'E': rowNumber = 4; break;
    case 'F': rowNumber = 5; break;
    case 'G': rowNumber = 6; break;
    case 'H': rowNumber = 7; 
    }
    printf("\n your row is %d and column is %d",rowNumber,column);

     struct piece temp = &board[rowNumber][column];

} 
```

和数组本身：

```
struct piece board[8][8] = {{{0,0,blackRook,"Rook"},{0,1,blackKnight,"Knight"},         {0,2,blackBishop,"Bishop"},{0,3,blackQueen,"Queen"},{0,4,blackKing,"King"}, {0,5,blackBishop,"Bishop"},{0,6,blackKnight,"Knight"},{0,7,blackRook,"Rook"}},
          {{1,0,blackPawn,"Pawn"}, {1,1,blackPawn,"Pawn"},{1,2,blackPawn,"Pawn"},{1,3,blackPawn,"Pawn"},{1,4,blackPawn,"Pawn"},{1,5,blackPawn,"Pawn"},{1,6,blackPawn,"Pawn"},{1,7,blackPawn,"Pawn"}},
                            {0},{0},{0},{0},

                             {{6,0,whitePawn,"Pawn"},{6,1,whitePawn,"Pawn"},{6,2,whitePawn,"Pawn"},{6,3,whitePawn,"Pawn"},{6,4,whitePawn,"Pawn"},{6,5,whitePawn,"Pawn"},{6,6,whitePawn,"Pawn"},{6,7,whitePawn,"Pawn"}},
                            {{7,0,whiteRook,"Rook"},{7,1,whiteKnight,"Knight"},{7,2,whiteBishop,"Bishop"},{7,3,whiteQueen,"Queen"},{7,4,whiteKing,"King"},{7,5,whiteBishop,"Bishop"},{7,6,whiteKnight,"Knight"},{7,7,whiteRook,"Rook"}}}; 
```

抱歉格式化，它在 Visual Studio 中看起来更好。前两个和最后两个数组都填充了结构块 - 其余为 0。空值似乎不会在我的代码中的其他任何地方引起任何问题。

编辑 - 这是件定义：

```
struct piece
{
    int row;
    int column;
    int weight;
    char name[20];

}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T09:45:43.937

除了`&board[r][c]`是类型`struct piece *`而不是类型之外，`struct piece`您还需要包含定义`piece`. 编译器告诉您它没有足够的关于`struct piece`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T09:42:23.360

我猜你的错误发生在这里：

```
struct piece temp = &board[rowNumber][column]; 
```

你忘记了 * 后面的部分

```
struct piece* temp = &board[rowNumber][column]; 
```

应该管用。

您还应该包括定义片段结构的标题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T09:37:59.543

下面的行是不正确的。temp 根本不是指针变量。

```
struct piece temp = &board[rowNumber][column]; 
```

如果您只想为数组的一个元素提供一个指针，那么

```
struct piece *temp = &board[rowNumber][column]; 
```

如果要为整个二维数组创建一个指针，那么它应该是

```
struct piece (*temp)[][8] = &board; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-10-25T20:26:15.070

Extern 是不够的，您还必须包含声明结构的 .h 。

# java - 尝试/捕获后的 Java 返回类型

> ID：10977569
> 
> 赞同：0
> 
> 时间：2012-06-11T09:35:10.757
> 
> 标签：java, android, return, try-catch

我想从我创建的方法中返回 String 类型的数据。Eclipse 说需要在 try catch 块之后指定返回类型...当我这样做时，Eclipse 然后告诉我我需要将字符串数据声明为局部变量...这里出了什么问题？

```
private String ReadData() {
    try {
        FileInputStream fis = null;
        InputStreamReader isr = null;
        String data = null;
        fis = KVOContact.this.openFileInput("data.txt");
        isr = new InputStreamReader(fis);
        char[] inputBuffer = new char[fis.available()];
        isr.read(inputBuffer);
        data = new String(inputBuffer);
        isr.close();
        fis.close();

    } catch (IOException ioe) {
        Log.e("KVOContact", "IOError" + ioe);
    }
    return data;
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-11T09:37:21.023

你在块`data`内声明。`try`它超出了该块之外的范围。

您*可以*将声明移到`try`块之前 - 但我个人认为完全删除块可能更有意义`catch`，并声明该方法可以 throw `IOException`。您还应该关闭您的`FileInputStream`and `InputStreamReader`in`finally`块，以便在抛出异常时不会让它们保持打开状态。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-11T09:36:58.917

`data`变量仅限于`try`子句的范围。而是在外面声明它`try`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T09:37:50.893

您需要对代码进行一些更改：

```
private String ReadData() {
    String data = null;
    try {
        FileInputStream fis = null;
        InputStreamReader isr = null;        
        fis = KVOContact.this.openFileInput("data.txt");
        isr = new InputStreamReader(fis);
        char[] inputBuffer = new char[fis.available()];
        isr.read(inputBuffer);
        data = new String(inputBuffer);
        isr.close();
        fis.close();
    } catch (IOException ioe) {
        Log.e("KVOContact", "IOError" + ioe);
    }
    return data;
} 
```

您需要声明一个不在 try 块内的 String 数据变量，否则在 try catch 块之外不会看到它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-11T09:39:24.300

是的，您还需要`return`在 catch 部分使用语句，研究以下代码，

```
private String ReadData() 
{
     try
     {
     .
     .
     . 
     return stringVariable;
     }
     catch ( IOException ioe )
     {
         Log.e("KVOContact", "IOError" + ioe);
         return NULL;
     }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-11T09:37:35.373

将 return data 语句放在 try 块本身内。

仅当 try 块内发生某些错误时才会调用 catch ，否则会执行 try 并将调用返回到它的来源。

# java - Java移动矩形更快？

> ID：10977579
> 
> 赞同：4
> 
> 时间：2012-06-11T09:36:10.653
> 
> 标签：java, awt, java-2d

所以我正在尝试用java制作流行的游戏乒乓球。我已经制作了播放器矩形并设置了动作监听器，因此我准备好在屏幕上上下移动播放器。但是我遇到了一个问题。当我移动玩家时，我可以选择每次移动 X 像素。

但是，如果我将要移动的 X 像素设置为 1。那么玩家移动得太慢了。如果我将 X 像素设置为 10，那么他会跳过 9 像素，动画看起来很粗糙。我怎样才能平滑动画并仍然快速移动？

这是一些代码：

```
public void keyPressed(KeyEvent e) {
                if(e.getKeyCode() == keyUp){
                    playerYCordinate -= 10;
                }else if(e.getKeyCode() == keyDown){
                    playerYCordinate += 10;
                }
                repaint();
            }

            public void keyReleased(KeyEvent e) {
                if(e.getKeyCode() == keyUp){

                }else if(e.getKeyCode() == keyDown){

                }
                repaint();
            } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T09:38:50.420

不要依赖系统提供的键重复功能。它们可能以低速率发生（这会导致您描述的问题）并且取决于系统键盘设置。

我建议您使用`keyPressed`来启动`Timer`和`keyReleased`停止它。

计时器可以安排`TimerTask`每 20:th 毫秒左右执行一次，这可以更新坐标并调用`repaint()`. （不要担心调用`repaint()`太频繁。如果 EDT 跟不上，它会将连续调用重绘为单个绘制。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T09:37:54.760

> 我怎样才能平滑动画并仍然快速移动？

一种技术是沿着移动对象的路径绘制半透明版本的移动对象，如果每次移动的像素更少。

EG 用于 10 像素的移动，以 10% 的不透明度为移动的第一个像素绘制一个版本，第二个移动的像素为 20%，以此类推。

![移动块](../Images/b133117362df6191bd26532871bf1e54.png)

```
import java.awt.*;
import java.awt.event.*;

import javax.swing.*;

public class MovingBlock {

    MovingBlock() {
        final JPanel gui = new JPanel() {

            private static final long serialVersionUID = 1L;
            int x = 0;
            int step = 60;

            public void paintComponent(Graphics g) {
                super.paintComponent(g);
                Graphics2D g2 = (Graphics2D)g;
                x+=10;
                Color fg = getForeground();
                for (int ii=x-step; ii<x; ii+=4) {
                    double transparency = (double)(x-ii)/(double)step;
                    Color now = new Color(
                            fg.getRed(),
                            fg.getGreen(),
                            fg.getBlue(),
                            (int)(255*(1-transparency)));
                    g2.setColor(now);
                    g2.fillRect(ii, 3, 5, 10);
                }
                if (x>getWidth()) {
                    x=0;
                }
            }
        };
        gui.setBackground(Color.BLACK);
        gui.setForeground(Color.GREEN.darker());
        gui.setPreferredSize(new Dimension(400,16));

        ActionListener listener = new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent ae) {
                gui.repaint();
            }
        };
        Timer timer = new Timer(20, listener);
        timer.start();

        JFrame f = new JFrame("Moving Block");
        f.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
        f.setContentPane(gui);
        f.pack();
        f.setLocationByPlatform(true);
        f.setVisible(true);
    }

    public static void main(String[] args) throws Exception {
        SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                new MovingBlock();
            }
        });
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-11T10:25:21.800

在游戏中，传统上使用游戏循环来控制应用程序，而不是驱动 Swing 的事件驱动系统。

你可以有一个存储桨运动的变量，比如一个带有`UP`,`DOWN`和的枚举`STATIONARY`。您的关键监听器将设置此变量的值，然后游戏循环将检查该变量并相应地更新桨的位置。

这种技术将应用程序的速度与其运行环境的速度解耦。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-11T10:25:06.793

*   不要`KeyListener`用于`Swing JComponents`

*   使用[KeyBinding](https://stackoverflow.com/a/7940227/714968) _`Swing JComponents`

*   不要画到`JFrame`那里`JPanel`，用方法`paintComponent()`代替`paint()`，你的动作会流畅自然

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-11T09:39:34.023

只要您依靠按键来控制矩形，您就只能在 keyrepeat 事件进入时（或用户可以键入的速度）移动。要么听听鼠标移动之类的其他声音，要么将键盘配置为更高的重复率。

# jquery - jqGrid 分组 - 在页面导航上停用客户端排序

> ID：10977583
> 
> 赞同：2
> 
> 时间：2012-06-11T09:36:22.493
> 
> 标签：jquery, jqgrid

我正在使用带有*loadOnce:true*的网格，以便对服务器只有一个查询。数据在服务器端排序（多列排序）。在客户端禁用排序。

在激活分组功能之前，导航工作正常。

通过激活分组功能，第一页就OK了。但是当我使用导航按钮转到下一页时，数据会根据分组列在客户端进行排序（即使使用*groupDataSorted:true*）。

```
rowTotal: 10000,
gridview: true,
scroll: false, 
loadonce: true,

pgbuttons: true,
pginput: true,
rowNum: 100,
rowList: '',
datatype: 'json',
mtype: 'GET',

grouping: true,
groupingView : { 
      groupField : ['prodNo'],
      groupSummary: [true],
      groupColumnShow: [false],           
      groupText: ['({1})'],
      showSummaryOnHide: true,
      groupDataSorted : true,
      groupCollapse: false
    },
jsonReader: {root: 'list', userdata : 'list'},
url:'...' 
```

我的情况有点特殊，因为我根据“名称”和“日期”列对服务器端的数据进行排序，但根据另一个“prodNo”列对行进行分组。但是我不明白为什么排序是在页面导航上完成的。

有没有办法在页面导航上禁用这种客户端排序？

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T10:10:29.633

如果您使用`loadonce: true`并且用户单击“下一页”按钮，则将使用*本地*数据`grindexes`（这是`index`您用于分组的列的属性值`groupField`）。`prodNo`因此，解决您的问题的最简单方法是在列中实现自定义排序。

您可以先尝试将自定义排序添加到“prodNo”列的定义中

```
sorttype: function () {
    return 1; // any constant value
} 
```

该函数`sorttype`将在本地数据排序期间调用。如果它返回与上面示例相同的结果，那么所有数据将被解释为相同，我希望不会进行额外的排序。

如果由于某种原因该方法不起作用，您可以实施另一种排序

```
sorttype: function (cellValus, rowData) {
    ...
} 
```

例如，如果您希望本地数据将根据其他列“名称”和“日期”进行排序，您可以从`sorttype`“prodNo”列中返回类似的值

```
sorttype: function (cellValus, rowData) {
    // probably the data need be converted in the sortable form yyyy-mm-dd
    return rowData.name + '_' + rowData.data;
} 
```

# android - 如何从图库中将图像存储在 SQLite 数据库中

> ID：10977584
> 
> 赞同：1
> 
> 时间：2012-06-11T09:36:23.050
> 
> 标签：android, image, sqlite

我已经尝试使用此代码将图像从画廊上传到我的应用程序中的 sqllite 数据库，但是当我的应用程序尝试打开画廊时，它会出现强制关闭错误，我不知道问题出在哪里。请帮助我和thanx

```
public class ImagggggggActivity extends Activity { 

    private static final int SELECT_PICTURE = 1;
    private String selectedImagePath; 
    private ImageView img; 

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);    
        setContentView(R.layout.main);  

         ((Button) findViewById(R.id.button1)) 
         .setOnClickListener(new OnClickListener() { 

             public void onClick(View arg0) { 

                 // in onCreate or any event where your want the user to 
                 // select a file 
                 Intent intent = new Intent(); 
                 intent.setType("image/*"); 
                 intent.setAction(Intent.ACTION_GET_CONTENT); 
                 startActivityForResult(Intent.createChooser(intent, 
                         "Select Picture"), SELECT_PICTURE); 
             } 
         }); 
} 

public void onActivityResult(int requestCode, int resultCode, Intent data) { 
 if (resultCode == RESULT_OK) { 
     if (requestCode == SELECT_PICTURE) { 
         Uri selectedImageUri = data.getData(); 
         selectedImagePath = getPath(selectedImageUri); 
     } 
 } 
} 

public String getPath(Uri uri) { 
 String[] projection = { MediaStore.Images.Media.DATA }; 
 Cursor cursor = managedQuery(uri, projection, null, null, null); 
 int column_index = cursor 
         .getColumnIndexOrThrow(MediaStore.Images.Media.DATA); 
 cursor.moveToFirst(); 
 return cursor.getString(column_index); 
}} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T09:39:33.237

使用 BLOB 数据类型，我们可以将图像存储在 SQLite 数据库中。实际存储在数据库中的数据是构成图像或文件的字节。

至于从图库中获取图片，请看[这里](https://stackoverflow.com/a/2508138/715269)，您似乎忘记了“超级”电话。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T10:04:29.563

**通过按钮单击导入表单设备**

```
Intent sdintent = new Intent(Intent.ACTION_PICK);
sdintent.setType("image/*");
startActivityForResult(sdintent, SD_REQUEST); 
```

获取图像形式的 sd 卡

```
if (requestCode == SD_REQUEST) {
Uri selectedImage = data.getData();
String[] filePathColumn = { MediaStore.Images.Media.DATA };

Cursor cursor = getContentResolver().query(selectedImage,
                filePathColumn, null, null, null);
cursor.moveToFirst();

int columnIndex = cursor.getColumnIndex(filePathColumn[0]);
String filePath = cursor.getString(columnIndex);
cursor.close();

Bitmap yourSelectedImage = BitmapFactory.decodeFile(filePath);

testimage.setImageBitmap(yourSelectedImage);
ByteArrayOutputStream stream = new ByteArrayOutputStream();
yourSelectedImage.compress(Bitmap.CompressFormat.PNG, 100, stream);
byteArray = stream.toByteArray();
} 
```

保存图片

```
DatabaseAdapter dbHelper = new DatabaseAdapter(Profiles.this);

       dbHelper.open();
       dbHelper.createUserProfiles( byteArray);
       dbHelper.close(); 
```

现在在 DatabaseAdapter.java

定义

```
 public static final String U_PIC = "picture"; 
```

然后

```
private long createUserTableContentValues(long id,byte[] byteImage) {
        ContentValues values = new ContentValues();
        values.put(ID, id);
        values.put(U_PIC, byteImage);
return database.insert(IMAGE_INSERT, null, values);
} 
```

我想这可能对你有帮助......

其他资源： [http ://www.helloandroid.com/tutorials/store-imagesfiles-database](http://www.helloandroid.com/tutorials/store-imagesfiles-database)

[http://www.coderanch.com/t/507054/Android/Mobile/Storing-image-database](http://www.coderanch.com/t/507054/Android/Mobile/Storing-image-database)

[http://hi.baidu.com/_java/blog/item/971e142a13afe6305243c12f.html](http://hi.baidu.com/_java/blog/item/971e142a13afe6305243c12f.html)

[http://www.tutorialforandroid.com/2009/10/how-to-insert-image-data-to-sqlite.html](http://www.tutorialforandroid.com/2009/10/how-to-insert-image-data-to-sqlite.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T10:26:05.607

```
db.execSQL("CREATE TABLE images (" 
    + "_id INTEGER PRIMARY KEY AUTOINCREMENT," 
    + "data BLOB," 
    + "hash BLOB UNIQUE" 
    + ");"); 
```

> 要将图像转换为 BLOB，请使用以下代码：（请注意，我们在此处压缩图像）

```
 private byte[] getBitmapAsByteArray(Bitmap bitmap)
 { 
   ByteArrayOutputStream outputStream = new ByteArrayOutputStream(); 
   // Middle parameter is quality, but since PNG is lossless, it doesn't matter 
   bitmap.compress(CompressFormat.PNG, 0, outputStream); 
   return outputStream.toByteArray(); 
} 
```

# php - 带有查询字符串的 Jquery ajax 上传器

> ID：10977585
> 
> 赞同：0
> 
> 时间：2012-06-11T09:36:23.833
> 
> 标签：php, jquery, ajax

我使用以下插件来上传进度条

[http://blog.stevensanderson.com/2008/11/24/jquery-ajax-uploader-plugin-with-progress-bar/](http://blog.stevensanderson.com/2008/11/24/jquery-ajax-uploader-plugin-with-progress-bar/)

```
jQuery(document).ready( function () { 
         $(".flupload").makeAsyncUploader({
        upload_url: "upload_logo_file.php?pid="+($(this).attr("id")), 
        flash_url: 'swfupload.swf',
        button_image_url: 'blankButton.png'
    });

    }); 
```

在我的 html 表单中，我使用了流动

```
<input type="file" id="1550" name="1550" class="flupload" />
<input type="file" id="1552" name="1552" class="flupload" /> 
```

上传进度条在这里工作正常。但我的问题是：我想通过 'Upload_url' 参数传递 id（1550 或 1552）。

为此使用了以下

```
upload_url: "upload_logo_file.php?pid="+($(this).attr("id")), 
```

但是使用 ($(this).attr("id")) 时未在此处检索 Id

如何在此处获取当前 ID。

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T09:44:42.700

您的 id 不是有效的 html id。改用自定义`data`属性，如下所示：

```
<input type="file" data-id="1550" name="1550" class="flupload" /> 
```

和

```
upload_url: "upload_logo_file.php?pid="+$(this).data("id"), 
```

# templates - Yii框架，为不同的部分分配不同的模板

> ID：10977590
> 
> 赞同：1
> 
> 时间：2012-06-11T09:36:41.760
> 
> 标签：templates, yii

我正在开发一个使用 Yii 框架的 CMS，该网站有一个每个人都可以看到的前端，以及一个供登录用户使用的后端。这两个我有不同的模板。但是我不知道如何为我的后端分配不同的模板。

这是我的 config/main.php，我添加的模板适用于整个网站。

```
return array(

    'theme'=>'cola_theme',
    ...
); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T09:46:34.767

如果您使用不同的主题，您可以更新 webapp 的[主题](http://www.yiiframework.com/doc/api/1.1/CWebApplication#theme-detail)属性，使用：

```
Yii::app()->theme = 'case_sensitive_theme_name'; 
```

或者，如果您只想使用不同的布局，您可以在后端可用的操作中更新控制器的[布局属性，即：](http://www.yiiframework.com/doc/api/1.1/CController#layout-detail)

```
$this->layout='//layouts/backend_layout'; 
```

`layouts`文件夹在哪里`protected/views/`。

更多关于[主题](http://www.yiiframework.com/doc/guide/1.1/en/topics.theming)和[布局](http://www.yiiframework.com/doc/guide/1.1/en/basics.view#layout)。

# matlab - 如何在 Excel 中调整图表对象的大小和位置？

> ID：10977591
> 
> 赞同：1
> 
> 时间：2012-06-11T09:36:48.687
> 
> 标签：matlab, vba, excel

我正在编写一个 Matlab 函数来将图表定位在 Excel 工作表（工作簿）中。我正在使用以下代码来调整它的大小和位置。

```
Excel.ActiveSheet.ChartObjects.Width=400;
Excel.ActiveSheet.ChartObjects.Height=250;
Excel.ActiveSheet.ChartObjects.Left=50;
Excel.ActiveSheet.ChartObjects.Top=200; 
```

如您所见，位置、大小是硬编码的。我想将图像放置在可以指定单元格地址或放置图表的范围的位置。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T09:46:54.650

我从来没有工作过，`matlab`但看看这样的事情是否对你有帮助。顺便说一句，我不确定`()`和`.Top``.Left`

以下代码应将图表定位在 B2

```
rRange = e.Activesheet.get('Range', 'B2');
Excel.ActiveSheet.ChartObjects.Left = rRange.Left();
Excel.ActiveSheet.ChartObjects.Top = rRange.Top(); 
```

# fonts - 如果我使用 Google 网络字体，Google 可以跟踪我吗？

> ID：10977593
> 
> 赞同：19
> 
> 时间：2012-06-11T09:37:02.583
> 
> 标签：fonts, tracking, privacy, google-webfonts

通过使用谷歌网络字体可以/谷歌

*   处理网页的文本（尽管 robots.txt 不允许）
*   跟踪网页的访问者，并（理论上）识别他们
*   跟踪对网页所做的更改（尽管 robots.txt）

当然，除非知道他们的字体和 css 文件会再次下载。:)

我认为谷歌自然会/可以计算和跟踪我网页的访问者数量，对吗？

编辑：“我”、“我的”——我在这里尝试将这些术语用作“一般来说”

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-11T09:41:42.220

Google 可以肯定地计算您的用户并跟踪他们的 IP 地址、浏览器版本等。由于字体位于不同的域中，它将无法访问用户 cookie。

通过使用网络字体，您不会与字体提供商共享任何内容，但您的用户可能会向提供商提供引用地址（包含字体请求的页面的 URL，即使用字体）。如果您的页面是公开的并且不需要身份验证，那么除了最佳做法外，没有什么可以阻止 Google 阅读此引荐来源网址。如果它需要身份验证，那么 Google 应该无法获取文本。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-06-22T19:47:13.087

[谷歌在他们的谷歌字体 API 文档](https://developers.google.com/fonts/faq#what_does_using_the_google_fonts_api_mean_for_the_privacy_of_my_users)中回答了这个问题。

解释基本信息：

*“Google Fonts API 旨在将最终用户数据的收集、存储和使用限制在有效提供字体所需的范围内。”*

*“[...] 字体请求与您在使用其他经过身份验证的 Google 服务（例如 Gmail）时发送到 google.com 的任何凭据是分开的，并且不包含任何凭据。”*

*“字体文件本身会被缓存一年 [...] 当数百万个网站都链接到相同的字体时，它们会在访问第一个网站后被缓存，[结果] 网站访问者向 Google 发送的请求很少： "*

# java - Android - Android4.0 中的 MediaPlayer 异常

> ID：10977595
> 
> 赞同：2
> 
> 时间：2012-06-11T09:37:03.627
> 
> 标签：java, android, mediarecorder, video-recording

我在我的 Android 应用程序中使用视频录制。它在`Android2.2`和`Android2.3`设备中运行良好，但应用程序在`Android4.0`.

**这是我的代码：**

```
 class VideoPreview extends SurfaceView implements SurfaceHolder.Callback
  {
  MediaRecorder recorder;
  SurfaceHolder holder = null; 
  FileOutputStream fileout; 
 public VideoPreview(Context context,MediaRecorder temprecorder) {
 super(context);
    recorder= temprecorder;
    holder= getHolder();
    holder.addCallback(this);
    holder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);
   }
  public void surfaceCreated(SurfaceHolder holder){
    }
  public void surfaceDestroyed(SurfaceHolder holder)
  {
      if(recorder!=null)
      {
    recorder.release();
    Log.d("Video Preview", "Exception1");
    recorder = null;
      }
  }

  //surfaceChanged : This method is called after the surface is created.
  public void surfaceChanged(SurfaceHolder holder, int format, int w, int h)
  {
  }
  public void  stop(){

      if(recorder!=null)
      {
      recorder.release();
      recorder = null;
      }        
  }
    @Override 
    public boolean onKeyDown (int keyCode, KeyEvent event){ 

         return false; 

    } 

  public boolean start()  {     
      String state = android.os.Environment.getExternalStorageState(); 
      String path = Environment.getExternalStorageDirectory().getAbsolutePath() +"/myvideo.mp4";
      File fname = new File(path);
      if (!state.equals(Environment.MEDIA_MOUNTED)) return false;
      File directory = new File(path).getParentFile(); 
      if(!directory.exists() && !directory.mkdirs())   return false; 

          if (recorder == null)    
            recorder = new MediaRecorder();         

           int out_format = MediaRecorder.OutputFormat.MPEG_4;
           //THREE_GPP;
          recorder.setVideoSource(MediaRecorder.VideoSource.CAMERA);    
          recorder.setAudioSource(MediaRecorder.AudioSource.MIC); 
            recorder.setOutputFormat(out_format); 
            recorder.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_NB);
            recorder.setVideoEncoder(MediaRecorder.VideoEncoder.MPEG_4_SP);
            //recorder.setMaxDuration(20000); 
            //recorder.setVideoSize(352,288);   // 352, 288 m_recorder.setVideoSize(320, 240); 176,144
            recorder.setVideoFrameRate(15);
            recorder.setOutputFile(fname.getPath());                
           /* videoview = (VideoView) findViewById(R.id.videosurface);
            SurfaceHolder holder = videoview.getHolder();
            mediarecorder.setPreviewDisplay(holder.getSurface());*/             
            recorder.setPreviewDisplay(holder.getSurface());
            try {
                Thread.sleep(6000);
            } catch (InterruptedException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            if (!Recorder_Prepare())
            return false;
            else
            return true;
      }    

private boolean Recorder_Prepare()
    {

        try {
            if (recorder != null){
            recorder.prepare();
            Log.d("Video Preview", "Exception2");
            recorder.start();     
            Log.d("Video Preview", "Exception3");
            }
        }
            catch (IllegalStateException e) {
                return false;
            }
            catch (IOException e) { 
                return false;
            }
            return true;            
    }             
  } 
```

这是我的`logcat`抛出异常，`recorder.start();`如下所示：

```
 06-11 13:54:54.926: E/MediaRecorder(22582): start failed: -19
      06-11 13:54:54.961: E/AndroidRuntime(22582): FATAL EXCEPTION: Thread-2201
      06-11 13:54:54.961: E/AndroidRuntime(22582): java.lang.RuntimeException: start failed.
      06-11 13:54:54.961: E/AndroidRuntime(22582):  at android.media.MediaRecorder.start(Native Method)
      06-11 13:54:54.961: E/AndroidRuntime(22582):  at  com.Myapp.VideoPreview.Recorder_Prepare(VideoPreview.java:106)
      06-11 13:54:54.961: E/AndroidRuntime(22582):  at com.Myapp.VideoPreview.start(VideoPreview.java:94)
      06-11 13:54:54.961: E/AndroidRuntime(22582):  at com.Myapp.videoRecord$1.run(videoRecord.java:94)
      06-11 13:54:54.961: E/AndroidRuntime(22582):  at java.lang.Thread.run(Thread.java:856) 
```

我在[Samsung Nexus S](http://www.google.com/search?q=Samsung%20Nexus%20S&hl=en&rls=com.microsoft%3aen-US%3a%7Breferrer%3asource?%7D&prmd=imvnsr&source=lnms&tbm=isch&ei=crvVT6OnOceqrAek7dH8Dw&sa=X&oi=mode_link&ct=mode&cd=2&ved=0CFsQ_AUoAQ&biw=1024&bih=653)中验证了该应用程序，但它没有`SDCard`支持。我用谷歌搜索了 4 个小时来解决问题，但找不到解决方案。**上述程序中是否有任何不推荐使用的方法？**请帮我解决问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T10:37:19.380

Android 4.0 引入了新的运行时检查，以确保您不会做一些愚蠢的事情，比如在主线程上访问网络。

您是否在做一些愚蠢的事情，例如在主线程上访问网络？您的媒体是否通过网络流式传输，您`VideoPreview.start()`从哪里调用您的方法？

# actionscript-3 - 错误 #1034 与 Childs

> ID：10977603
> 
> 赞同：0
> 
> 时间：2012-06-11T09:37:32.227
> 
> 标签：actionscript-3, function, drag-and-drop, addeventlistener, addchild

编辑：哇，我没有意识到我做了这么多非常错误的事情。这是我自己编写的第一个代码，没有使用学校提供的东西。猜猜我在几节课后试图咬得比我能咀嚼的更多。

在谷歌搜索答案然后复制我认为需要的代码部分（强调“思想”）后，我得到了大部分内容。

还有办法“保存”代码吗？还是最好放弃它并重新开始？无论哪种方式，那么正确的方法是什么？

另外，我会问我的老师是否可以。但是我们不再和他一起上课，因此这个人不再可用（或者至少不回复我的电子邮件。）我自己做这个是为了另一个学校作业。所以这就是我转向互联网的原因。

谢谢你解释你所做的一切。我很感激你花时间这样做:)

现在，继续回答您的一些问题，并提出新问题：

只有第一个符号称为符号 1，其他符号都有“真实”名称。当我开始这个项目并保持这种状态时，我忘记了改变它，因为我确切地知道它是什么，因为它是唯一一个这样称呼的。

*.. 你知道如果计数器等于 5 会产生什么样的名字吗？“半圆 15”。* 是的，我意识到这一点。现在我看到它是这样的，同意这不是一个很好的写下来的方式。在命名我的 HalfCircle1-4 时没有考虑足够的问题。

*你认为它有什么作用？* 好吧，让我尝试更清楚地解释它：当您拖放副本时，您不能再移动/选择它。我希望用户能够选择它，这样他就可以随意多次拖放它。所以，我认为这意味着我必须将 eventListeners 添加到我制作的所有副本中？这就是我在这里想要做的。另外，感谢您的错误解释。那么，这更像是它吗？：

```
function makeListeners(copy:DisplayObject):void
{
    var i = this.numChildren;
    i.addEventListener(MouseEvent.CLICK, moveCopy);
} 
```

我还将 makeListeners 调用移到了我制作副本的地方。所以它应该只运行一次，当你制作副本时，对吧？

*你为什么使用索引 3 作为“最新的孩子”索引？这没有任何意义。* 我用谷歌搜索了如何做到这一点，我相信它告诉我“索引”是您想要将孩子添加到的“层”（因为没有更好的词）？我将它添加到 3，以便它们位于我的其他一些图像之上和其他一些图像之下。它似乎是这样工作的，尽管现在我也开始质疑这一点。

这是我现在所拥有的（删除了其他数字，以便更容易查看代码）。这给了我一个新的错误 TypeError: Error #1006: value is geen functie。在 rondje1/makeListeners() 在 rondje1/dragRondje(): 所以我意识到这是不对的。但这至少比以前更正确吗？

```
import flash.display.*;
import flash.events.MouseEvent;
import flash.ui.Mouse;

var counter=1;
var copy;

//Copy dan drag and drop Rondje
buttonRondje.addEventListener(MouseEvent.CLICK, dragRondje);
function dragRondje(event:MouseEvent):void
{
    this["rondje"+ (counter)]=new block;
    this["rondje"+(counter)].x=mouseX-45;
    this["rondje"+ (counter)].y=mouseY-45;
    copy = addChildAt(this["rondje"+(counter)], 3);
    counter++;
    copy.startDrag();       
    makeListeners(copy);
}

//DROP
stage.addEventListener(MouseEvent.MOUSE_UP, dropEverything);
function dropEverything(event:MouseEvent):void
{
    stopDrag();
}

//Remove latest child
buttonRemoveChild.addEventListener(MouseEvent.CLICK, removeNewestChild);
function removeNewestChild(event:MouseEvent):void
{
    var i = 0;
    i = this.numChildren;
    if (i > 10 )
    {
        this.removeChildAt(3);
    }
}

function makeListeners(copy:DisplayObject):void
{
    var i = this.numChildren;
    i.addEventListener(MouseEvent.CLICK, moveCopy);
}

function moveCopy(event:MouseEvent):void
{
    trace('move copy!');
} 
```

ORINIAL POST 我正在为一个学校项目制作一些“拖放”的东西，但我遇到了一个问题。

现在我已经设置好了，当你点击一个按钮时，你开始从库中拖动一个符号的副本。当您单击应用程序中的某个位置时，您会再次将其放下。我遇到的问题是允许用户选择此副本以再次拖动它的代码。

它给了我这个错误：

> TypeError：错误＃1034：类型强制失败：无法将块@2a308041 转换为flash.events.Event。在 rondje1/dropEverything ()

这是我制作副本的代码：

```
//Copy dan drag and drop Rondje
buttonRondje.addEventListener(MouseEvent.CLICK, dragRondje);
function dragRondje(event:MouseEvent):void
{
    this["rondje"+ (counter)]=new block;
    this["rondje"+(counter)].x=mouseX-45;
    this["rondje"+ (counter)].y=mouseY-45;
    copy = addChildAt(this["rondje"+(counter)], 3);
    counter++;
    copy.startDrag();       
} 
```

代码放在哪里，并将事件监听器添加到副本中：

```
//DROP
stage.addEventListener(MouseEvent.MOUSE_UP, dropEverything);
function dropEverything(event:MouseEvent):void
{
    stopDrag();
    makeListeners(copy);
} 
```

添加监听器的代码：

```
function makeListeners(e:Event):void
{
    var i = 0;
    i = this.numChildren;
    for (i = this.numChildren;i<10;i++)
    {
        this.addEventListener(MouseEvent.CLICK, moveCopy);
    }
}

function moveCopy(event:MouseEvent):void
{
    trace('move copy!');
} 
```

符号设置如下：

*   名称：符号 1
*   类型：电影剪辑
*   为 ActionScript 导出 -> 选中
*   在第 1 帧中导出 -> 选中
*   类：块
*   基类：flash.display.MovieClip

我真的不明白为什么我在这里遇到错误：S 希望这里有人可以帮助我。我会永远感激不尽。在此先感谢，XX

ps：完整代码如下：

```
import flash.display.*;
import flash.events.MouseEvent;
import flash.ui.Mouse;

var counter=1;
var copy;

//Copy dan drag and drop Rondje
buttonRondje.addEventListener(MouseEvent.CLICK, dragRondje);
function dragRondje(event:MouseEvent):void
{
    this["rondje"+ (counter)]=new block;
    this["rondje"+(counter)].x=mouseX-45;
    this["rondje"+ (counter)].y=mouseY-45;
    copy = addChildAt(this["rondje"+(counter)], 3);
    counter++;
    copy.startDrag();       
}

//Copy dan drag and drop HalfCircle1
buttonHalfCircle1.addEventListener(MouseEvent.CLICK, dragHalfCircle1);
function dragHalfCircle1(event:MouseEvent):void
{
    this["HalfCircle1"+(counter)]=new HalfCircle1;
    this["HalfCircle1"+(counter)].x=mouseX - 45;
    this["HalfCircle1"+(counter)].y=mouseY - 55;
    copy = addChildAt(this["HalfCircle1"+(counter)], 3);
    counter++;
    copy.startDrag();   
}

//Copy dan drag and drop HalfCircle2
buttonHalfCircle2.addEventListener(MouseEvent.CLICK, dragHalfCircle2);
function dragHalfCircle2(event:MouseEvent):void
{
    this["HalfCircle2"+(counter)]=new HalfCircle2;
    this["HalfCircle2"+(counter)].x=mouseX - 45;
    this["HalfCircle2"+(counter)].y=mouseY - 55;
    copy = addChildAt(this["HalfCircle2"+(counter)], 3);
    counter++;
    copy.startDrag();   
}

//Copy dan drag and drop HalfCircle3
buttonHalfCircle3.addEventListener(MouseEvent.CLICK, dragHalfCircle3);
function dragHalfCircle3(event:MouseEvent):void
{
    this["HalfCircle3"+(counter)]=new HalfCircle3;
    this["HalfCircle3"+(counter)].x=mouseX - 45;
    this["HalfCircle3"+(counter)].y=mouseY - 5;
    copy = addChildAt(this["HalfCircle3"+(counter)], 3);
    counter++;
    copy.startDrag();   
}

//Copy dan drag and drop HalfCircle4
buttonHalfCircle4.addEventListener(MouseEvent.CLICK, dragHalfCircle4);
function dragHalfCircle4(event:MouseEvent):void
{
    this["HalfCircle4"+(counter)]=new HalfCircle4;
    this["HalfCircle4"+(counter)].x=mouseX - 45;
    this["HalfCircle4"+(counter)].y=mouseY - 5;
    copy = addChildAt(this["HalfCircle4"+(counter)], 3);
    counter++;
    copy.startDrag();   
}

//Copy dan drag and drop Streep
buttonStreep.addEventListener(MouseEvent.CLICK, dragStreep);
function dragStreep(event:MouseEvent):void
{
    this["streep"+(counter)]=new Streep;
    this["streep"+(counter)].x=mouseX - 2;
    this["streep"+(counter)].y=mouseY - 5;
    copy = addChildAt(this["streep"+(counter)], 3);
    counter++;
    copy.startDrag();   
}

//DROP
stage.addEventListener(MouseEvent.MOUSE_UP, dropEverything);
function dropEverything(event:MouseEvent):void
{
    stopDrag();
    makeListeners(copy);
}

//Remove latest child
buttonRemoveChild.addEventListener(MouseEvent.CLICK, removeNewestChild);
function removeNewestChild(event:MouseEvent):void
{
    var i = 0;
    i = this.numChildren;
    if (i > 10 )
    {
        this.removeChildAt(3);
    }
}

function makeListeners(e:Event):void
{
    var i = 0;
    i = this.numChildren;
    for (i = this.numChildren;i<10;i++)
    {
        this.addEventListener(MouseEvent.CLICK, moveCopy);
    }
}

function moveCopy(event:MouseEvent):void
{
    trace('move copy!');
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T10:07:57.170

您的代码可以改进。如果学校学会了你这样编码和命名东西，你应该生气。名为“符号 1”的符号未完成，就像使用荷兰名称进行编码一样。我会建议使代码更干净。

```
 this["HalfCircle1"+(counter)] 
```

.. 你知道如果计数器等于 5 会产生什么样的名字吗？*“HalfCircle15”*。

仔细看看这个函数：

```
function makeListeners(e:Event):void
{
    var i = 0;
    i = this.numChildren;
    for (i = this.numChildren;i<10;i++)
    {
        this.addEventListener(MouseEvent.CLICK, moveCopy);
    }
} 
```

你认为它有什么作用？首先，将 i 设置为 0。然后将其设置为当前影片剪辑中的子项数。这可以是任何数字。所以首先将其设置为 0 是没有意义的。但是为什么你想从 3 循环到 10 并且不使用 index`i`呢？你只是多次做同样的事情。在听众的情况下，这是不好的做法。您将相同的侦听器多次添加到同一个对象（？！） 1 个相同类型的侦听器应该足够了，否则它会矫枉过正并且会产生不必要的效果。

对我来说，不清楚您要做什么，但我想您的意思是向特定对象添加侦听器，因为您使用的是 numChildren。

## 解决错误

```
makeListeners(copy); 
```

该函数`makeListeners`需要一个`Event`as 参数，您正在发送`copy`，它是一个`DisplayObject`. 这会导致错误。您可能应该更改`e:Event`为`copy:DisplayObject`，这将隐藏错误。

在您的代码中，您似乎在每次拖动/单击时都不断添加侦听器，但没有一个被删除。这意味着如果您单击 10 次，则 moveCopy 可以称为 100 次（！）这将在单击时增加。您应该使用某种 call-once init 函数添加一次侦听器。

```
// add child at certain index
copy = addChildAt(this["HalfCircle4"+(counter)], 3);

// and..
this.removeChildAt(3); 
```

我想知道你为什么使用索引 3 作为“最新的孩子”索引？

抱歉，也许这条评论不是很有帮助，也不是问题的答案，但您的代码可以在几个方面进行改进。如果它已经因为黑魔法而工作，但它充满了漏洞和不那么干净的代码。

### 你应该去找你的老师，告诉他你需要帮助。你在学校。

# 更新：

我认为这足以创建一个复制和拖动剪辑应用程序：

```
import flash.display.*;
import flash.events.MouseEvent;

var _lastClip:MovieClip;

// add a listener to all buttons. 
buttonRondje.addEventListener(MouseEvent.CLICK, handleClick);
buttonHalfCircle1.addEventListener(MouseEvent.CLICK, handleClick);
buttonHalfCircle2.addEventListener(MouseEvent.CLICK, handleClick);
buttonHalfCircle3.addEventListener(MouseEvent.CLICK, handleClick);
buttonHalfCircle4.addEventListener(MouseEvent.CLICK, handleClick);
buttonStreep.addEventListener(MouseEvent.CLICK, handleClick);

function handleClick(event:Event):void
{
     var clip:MovieClip;
             trace("Clicked on: " + clip);
             // based on which clip is clicked, we deside which object should be created.
     switch(event.currentTarget)
     {
         case buttonRondje:
         {
             clip = new Circle();
             break;
         }
         case buttonHalfCircle1:
         {
             clip = new HalfCircle1();
             break;
         }
         case buttonHalfCircle2:
         {
             clip = new HalfCircle2();
             break;
         }
         case buttonHalfCircle3:
         {
             clip = new HalfCircle3();
             break;
         }
         case buttonHalfCircle4:
         {
             clip = new HalfCircle4();
             break;
         }
         case buttonStreep:
         {
             clip = new Streep();
             break;
         }
    }

    // Move to mouse. It would be better to move the center points inside the clips so we don't need custom offsets here
    clip.x = mouseX;
    clip.y = mouseY;
    clip.startDrag();

    this.addChildAt(clip, 3);

    // remember the latest added clip
    this._lastClip = clip;
}

stage.addEventListener(MouseEvent.MOUSE_UP, handleMouseUp);

function handleMouseUp(event:MouseEvent):void
{
     // if you where dragging, stop it
     if(this._lastClip)
     {
         this._lastClip.stopDrag();
     }
} 
```

# css - 如何为两个单独的列应用公共 css 属性

> ID：10977605
> 
> 赞同：1
> 
> 时间：2012-06-11T09:37:39.620
> 
> 标签：css

我有两列，即“right_col”和“left-col”，它们都有不同的背景颜色。问题是，左列会有动态数据，所以它总是在变化，右列是静态的。每当左列高度增加时背景也适用于那个程度的高度，但右列有静态数据，我需要对右列应用相同的高度，因为左列不是恒定的，取决于左列的高度，右列的高度也会增加，这样它的背景会自动应用到那个程度，似乎很好。我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T09:50:14.623

您可以为此使用**display:table-cell**属性。像这样写：

```
.left,.right{
    display:table-cell;
} 
```

检查这个[http://jsfiddle.net/7nSqX/](http://jsfiddle.net/7nSqX/) 。

它可以工作到 IE8 及更高版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T09:51:19.363

你可以用jquery轻松做到这一点-

```
$(document).ready(function(){
    var left = $('#left_col'),
        right = $('#right_col'),
        left_height = left.css('height');
    right.css('height',left_height);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T09:44:09.080

有很多不同的解决方案，所以我建议重新[比较一些技术](http://www.vanseodesign.com/css/equal-height-columns/)- 选择最适合您需求的技术。

我会选择最后一个（*“偏移列和容器”*）——与[matthewjamestaylor.com 上的这篇文章](http://matthewjamestaylor.com/blog/equal-height-columns-cross-browser-css-no-hacks)中解释的方法相同。

# mysql - 优化 SELECT 和 WHERE 子句中的存储函数调用

> ID：10977607
> 
> 赞同：9
> 
> 时间：2012-06-11T09:37:48.623
> 
> 标签：mysql, stored-functions

我有一个具有以下结构的 SQL 查询：

```
SELECT *, storedfunc(param, table.field) as f 
FROM table 
WHERE storedfunc(param, table.field) < value 
ORDER BY storedfunc(param, table.field); 
```

有没有办法优化这个消除几个函数调用？还是 MySQL 在幕后进行这样的优化？事实上，该函数被声明为确定性的。

我还需要提到函数参数部分来自选定表的列。我稍微更改了示例以反映这一点。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-11T09:52:18.710

重写并测试哪一个执行得更快：

```
SELECT *, storedfunc(param, table.column) AS f 
FROM table 
WHERE storedfunc(param, table.column) < value 
ORDER BY f ;

SELECT *
FROM
  ( SELECT *, storedfunc(param, table.column) AS f 
    FROM table 
  ) AS tmp
WHERE f < value 
ORDER BY f ; 
```

在 MySQL 中，你甚至可以这样写（**警告：不是标准的 SQL**语法）：

```
SELECT *, storedfunc(param, table.column) AS f 
FROM table 
HAVING f < value 
ORDER BY f ; 
```

# php - 带有模型数据的 Codeigniter 助手

> ID：10977609
> 
> 赞同：2
> 
> 时间：2012-06-11T09:37:53.783
> 
> 标签：php, codeigniter

我希望创建一个名为“导航”的助手，而不是将重复的数据粘贴到我的控制器中，这将用于每个控制器并加载到导航子视图中。

目前，在每个控制器中，我都添加了以下代码。

```
// Get Subcategories
$subcat1 = $this->Categories_model->get_artstyles();
$subcat2 = $this->Categories_model->get_artsubjects();
$subcat3 = $this->Categories_model->get_media();
$subcat4 = $this->Categories_model->get_photography();

$this->view_data['sub_cat1'] = $subcat1->result();
$this->view_data['sub_cat2'] = $subcat2->result();
$this->view_data['sub_cat3'] = $subcat3->result();
$this->view_data['sub_cat4'] = $subcat4->result(); 
```

所以我想做的就是把它修剪下来，然后把这些数据作为助手加载。所以最终我在每个控制器中所做的就是加载帮助程序。

如果您觉得这是错误的做法，请提出建议，因为我对 CI 及其方式仍然有些不确定。

这 4 个子目录变量都想成为全局变量。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T09:54:38.830

如果此数据与您的所有控制器相关，您应该像这样扩展 CI_Controller：

```
class MY_Controller extends CI_Controller {
     protected $view_data;

     public function __construct() {
         parent::__construct();         
                 $this->load->helper('nav');
                 $this->view_data = load_navigation();
     }
} 
```

将此文件放在`core`目录中并像这样扩展所有控制器：

```
class CONTROLLER_NAME extends MY_Controller 
```

[在这里](http://codeigniter.com/user_guide/general/core_classes.html)阅读更多。

在辅助函数中：

```
function load_navigation() {
         $CI =& get_instance();
         $CI->load->model('Categories_model');
         $result['sub_cat1'] = $CI->Categories_model->get_artstyles()->result();
         $result['sub_cat2'] = $CI->Categories_model->get_artsubjects()->result();
         $result['sub_cat3'] = $CI->Categories_model->get_media()->result();
         $result['sub_cat4'] = $CI->Categories_model->get_photography()->result(); 
         return $result; 
```

}

编辑：

为了将变量加载到视图中：

```
$data['view_data'] = $this->view_data;
$this->load->view('MY_VIEW', $data); 
```

在视图中，您可以像这样访问它：`$view_data`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T09:43:31.800

您可以使用 html 模板系统，并将其作为标准的默认 html 模板。

我使用[Williams Concepts的模板库](http://williamsconcepts.com/ci/codeigniter/libraries/template/)

# windows-phone-7 - 使用 Microsoft Face SDK 实现凸出效果

> ID：10977617
> 
> 赞同：1
> 
> 时间：2012-06-11T09:38:23.720
> 
> 标签：windows-phone-7

我正在尝试实现面部凸出等效果（例如凹凸效果），以​​便在相机开启时以及与保存的图像集成。

我尝试使用`MeshWarp`提供的静态方法`SDK`，但无法弄清楚它的用法。

有人可以帮我解释如何使用网格扭曲`MLSD`吗？一些例子会有很大帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T06:48:50.083

这是 Microsoft.FaceSdk.Image.Warp 命名空间参考的摘录。

> MeshWarp 算法接受一个源图像和两个二维坐标数组。第一个数组 S，指定源图像中控制点的坐标。第二个数组 D，指定它们在目标图像中的对应位置。S 和 D 必须具有相同的维度才能建立一一对应关系。请参阅 George Wolberg 所著的 Digital Image Warp 中第 7.5 章的“2-pass warping”。

Face SDK 中的 MLSD 文档链接到 MathWorks.com 上过时的内容页面，新链接可在[此处](http://www.mathworks.com/matlabcentral/fileexchange/12249-moving-least-squares)找到。

Microsoft Face SDK 是微软亚洲研究院的一个相对较新的项目，因此现阶段的文档有点稀缺。希望这可以为您提供更多信息。

# configuration - ckeditor 从选项卡中删除特定属性

> ID：10977618
> 
> 赞同：0
> 
> 时间：2012-06-11T09:38:25.843
> 
> 标签：configuration, ckeditor, widget

在 ckeditor init 中，要删除对话框选项卡，可以执行以下操作：

```
CKEDITOR.on( 'dialogDefinition', function( ev )
   {
      // Take the dialog name and its definition from the event data.
      var dialogName = ev.data.name;
      var dialogDefinition = ev.data.definition;

      // Check if the definition is from the dialog we're interested in
      if ( dialogName == 'link' )
      {
        dialogDefinition.removeContents( 'advanced' );
      }
   }); 
```

这将从链接对话框中删除“高级”选项卡。

还可以从选项卡中删除特定属性，执行以下操作：

```
 var infoTab = dialogDefinition.getContents( 'info' );

     // Remove unnecessary widgets from the 'Link Info' tab.         
     infoTab.remove( 'linkType');
     infoTab.remove( 'protocol'); 
```

所以这很好用，但我的问题是我找不到属性名称的详细列表，例如上面示例中的“linkType”或“protocol”。

基本上我想从图像对话框中删除，例如，宽度、高度、css类和高级选项卡中的id等，但我在ckeditor文档中找不到这些属性的名称，有人知道我在哪里吗能找到这个吗？或者给个清单？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T14:43:17.697

您可以按照 HowTos 中的说明使用开发人员工具插件：http: [//docs.cksource.com/CKEditor_3.x/Howto/Field_Names](http://docs.cksource.com/CKEditor_3.x/Howto/Field_Names)

# java - 如何杀死由 Ant 启动的失控 Java 进程？

> ID：10977619
> 
> 赞同：3
> 
> 时间：2012-06-11T09:38:37.577
> 
> 标签：java, ant, kill

如果我从 ant 脚本启动分叉的 java 进程并终止 ant 进程，它不会终止 java 进程。无论是从 IDE 还是从命令行运行它都是如此。

```
<target name="myTarget" >
  <java classname="path.to.MyClass" 
        fork="yes" 
        failonerror="true" 
        maxmemory="128M">
    <classpath refid="run" />
  </java>
</target> 
```

有没有办法把这些联系起来，让杀ant进程就杀java进程？

我看过以下[问答](https://stackoverflow.com/questions/7864683/how-to-kill-ant-forked-process)- 但这似乎侧重于如何手动终止 java 进程。我不想这样做，因为我有许多其他 java 应用程序正在运行，并且在 TaskManager 中找到要杀死的正确 java.exe 进程并不总是直截了当的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-29T10:07:19.857

不幸的是，这似乎是一个长期存在的已知问题。

当 Ant 任务终止时，不会触发分叉的 Java 进程关闭挂钩。（这似乎是自 Java 1.4 以来的一个问题（！））

以供参考：

*   [Ant 错误](https://issues.apache.org/bugzilla/show_bug.cgi?id=8510)报告
*   Java非[错误报告](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=4485742)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T09:52:02.707

如果设置`fork`为“no”，将使用相同的 VM，因此杀死 ant 进程也会杀死这个特定的 java 进程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T15:23:05.553

杀死进程的跨平台解决方案将涉及一些工作。请参阅[强制终止子进程的 Java 工具/方法](https://stackoverflow.com/questions/4912282/java-tool-method-to-force-kill-a-child-process/6032734#6032734)。

对于 Windows XP 及更高版本，以下批处理脚本可能会有所帮助：

```
for /f "skip=1 usebackq" %%h in (`wmic process where "Name like 'java%%.exe' and CommandLine like '%%path.to.MyClass%%'" get ProcessId ^| findstr .`) do taskkill /F /T /PID %%h 
```

此脚本使用内置 WMIC 命令来查找`path.to.MyClass`在命令行中某处具有的任何正在运行的 java*.exe 进程的进程 ID。如果您需要 WMIC 更具体地匹配您的特定 Java 进程，请使用 WMIC 帮助模式列出的属性：

```
wmic process get /? 
```

`taskkill`将在给定根进程 ID (/PID) 的情况下杀死进程树 (/T)。

# mysql - MySQL 1045 错误 - 访问被拒绝 - 非常顽固

> ID：10977621
> 
> 赞同：2
> 
> 时间：2012-06-11T09:38:39.733
> 
> 标签：mysql, ruby-on-rails, ruby-on-rails-3, macos, mysql-error-1045

我有以下情况试图为我的 Rails 3 项目启动 MySQL：

```
> mysql
> SHOW GRANTS for 'root'@'localhost'
ERROR 1044 (42000): Access denied for user ''@'localhost' to database 'mysql'

> mysql -u root -p
ERROR 1045 (28000): Access denied for user 'root'@'localhost' (using password: YES)

> mysql -u root
ERROR 1045 (28000): Access denied for user 'root'@'localhost' (using password: NO)

> mysql -u root test
ERROR 1045 (28000): Access denied for user 'root'@'localhost' (using password: NO)

> mysqladmin --no-defaults -u root version
mysqladmin: connect to server at 'localhost' failed
error: 'Access denied for user 'root'@'localhost' (using password: NO)'

> mysqld_safe --skip-grant-tables
120611 05:27:06 mysqld_safe Logging to '/usr/local/mysql/data/SS-iMac.local.err'.
touch: /usr/local/mysql/data/SS-iMac.local.err: Permission denied
120611 05:27:06 mysqld_safe Starting mysqld daemon with databases from /usr/local/mysql/data
/usr/local/mysql/bin/mysqld_safe: line 107: /usr/local/mysql/data/SS-iMac.local.err: Permission denied
rm: /tmp/mysql.sock: Permission denied
/usr/local/mysql/bin/mysqld_safe: line 144: /usr/local/mysql/data/SS-iMac.local.err: Permission denied
120611 05:27:06 mysqld_safe mysqld from pid file /usr/local/mysql/data/SS-iMac.local.pid ended
/usr/local/mysql/bin/mysqld_safe: line 107: /usr/local/mysql/data/SS-iMac.local.err: Permission denied

> sudo mysqld_safe --skip-grant-tables
120611 17:04:36 mysqld_safe Logging to '/usr/local/mysql-5.5.25-osx10.6-x86_64/data/SS-iMac.local.err'.
120611 17:04:36 mysqld_safe Starting mysqld daemon with databases from /usr/local/mysql-5.5.25-osx10.6-x86_64/data
120611 17:06:16 mysqld_safe mysqld from pid file /usr/local/mysql-5.5.25-osx10.6-x86_64/data/SS-iMac.local.pid ended 
```

我一直在阅读我能找到的关于这个主题的每一个问答，但我一直遇到障碍。

* * *

### SS-iMac.local.err 的内容

以下代码的副本每 10 秒添加一次。

```
120612 17:12:19 mysqld_safe mysqld from pid file /usr/local/var/mysql/SS-iMac.local.pid ended
120612 17:12:29 mysqld_safe Starting mysqld daemon with databases from /usr/local/var/mysql
120612 17:12:29 [Warning] Setting lower_case_table_names=2 because file system for /usr/local/var/mysql/ is case insensitive
120612 17:12:29 [Warning] One can only use the --user switch if running as root

120612 17:12:29 InnoDB: The InnoDB memory heap is disabled
120612 17:12:29 InnoDB: Mutexes and rw_locks use GCC atomic builtins
120612 17:12:29 InnoDB: Compressed tables use zlib 1.2.3
120612 17:12:29 InnoDB: Initializing buffer pool, size = 128.0M
120612 17:12:29 InnoDB: Completed initialization of buffer pool
120612 17:12:29 InnoDB: highest supported file format is Barracuda.
120612 17:12:29  InnoDB: Waiting for the background threads to start
120612 17:12:30 InnoDB: 1.1.8 started; log sequence number 1595675
120612 17:12:30 [Note] Server hostname (bind-address): '0.0.0.0'; port: 3306
120612 17:12:30 [Note]   - '0.0.0.0' resolves to '0.0.0.0';
120612 17:12:30 [Note] Server socket created on IP: '0.0.0.0'.
120612 17:12:30 [ERROR] Can't start server: Bind on TCP/IP port: Address already in use
120612 17:12:30 [ERROR] Do you already have another mysqld server running on port: 3306 ?
120612 17:12:30 [ERROR] Aborting

> ps
 PID TTY           TIME CMD
3497 ttys001    0:00.03 -bash
3506 ttys002    0:00.03 -bash

> mysqladmin shutdown
mysqladmin: connect to server at 'localhost' failed
error: 'Can't connect to local MySQL server through socket '/tmp/mysql.sock' (2)'
Check that mysqld is running and that the socket: '/tmp/mysql.sock' exists! 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-19T18:21:21.277

sudo mysqld_safe --skip-grant-tables 这终于有效

# php - 在 LOAD DATA LOCAL INFILE 中收到错误消息

> ID：10977627
> 
> 赞同：2
> 
> 时间：2012-06-11T09:39:06.997
> 
> 标签：php, mysql, load-data-infile

我有这个错误：

```
Error message is :: "Error occured during query execution: (LOAD DATA LOCAL INFILE '/tmp/3sch.jofcial.txtgymCN5' REPLACE INTO TABLE `prod_sch` FIELDS TERMINATED BY ',' IGNORE 1 LINES (No_ ,Model_Code,Model_Name ,Lot_No_ ,Start_Seq_No_ ,Quantity ,Lot_Quantity ,Line_Code ,Line_Name ,@var10, Shift_No1,@var12,Shift_No2,@var14,Production_Mngm_Type,Model_Group,Model_Category,Actual_Results,MPS_Mngm_Code, Production_Mngm_Code,Comment) SET Production_Start_Date=STR_TO_DATE(@var10,'%m/%d/%Y'), Production_Finish_Date=STR_TO_DATE(@var12,'%m/%d/%Y'), Due_date=STR_TO_DATE(@var14,'%m/%d/%Y')): The used command is not allowed with this MySQL version"; 
```

尝试此语法后：

```
$temp_file = tempnam(sys_get_temp_dir(), '3sch.jofcial.txt');  // make temporary file name
$fp = fopen($temp_file, "wb");          // open temprary file
if (!$fp) die(_ERROR14);
fwrite($fp, $httpfile);                         // copy to temporary file from schedule file
fclose($fp);
chmod($temp_file, 0644);                        // file mode change for read only

$sql="TRUNCATE TABLE `prod_sch`";
$res=mysql_query($sql) ;//or _doError(_ERROR30 . ' (<small>' . htmlspecialchars($sql) . '</small>): ' . mysql_error() );  // submit SQL to MySQL $
$sql="LOAD DATA LOCAL INFILE '".$temp_file."' REPLACE INTO TABLE `prod_sch` FIELDS TERMINATED BY ',' IGNORE 1 LINES "; // FIELDS ENCLOSED BY '\"'$
$sql.="(No_ ,Model_Code,Model_Name ,Lot_No_ ,Start_Seq_No_ ,Quantity ,Lot_Quantity ,Line_Code ,Line_Name ,@var10, ";
$sql.="Shift_No1,@var12,Shift_No2,@var14,Production_Mngm_Type,Model_Group,Model_Category,Actual_Results,MPS_Mngm_Code, ";
$sql.="Production_Mngm_Code,Comment) ";
$sql.="SET Production_Start_Date=STR_TO_DATE(@var10,'%m/%d/%Y'), ";
$sql.="Production_Finish_Date=STR_TO_DATE(@var12,'%m/%d/%Y'), ";
$sql.="Due_date=STR_TO_DATE(@var14,'%m/%d/%Y')";

$res=mysql_query($sql) or _doError(_ERROR30 . ' (<small>' . htmlspecialchars($sql) . '</small>): ' . mysql_error() );  // submit SQL to MySQL and$
unlink($temp_file); 
```

将备份文件还原到新服务器后会发生此错误。从错误消息中我可以看到临时文件已经创建。

* * *

**编辑**

我尝试过：

`mysql --load-infile -u root -p pwd DBname`

然后尝试将上面的查询放在里面`>mysql`，这个查询可以工作。但是，为什么如果我使用 php 它没有呢？

尝试编辑 /etc/mysql/my.cnf: `add local-infile = 1` 仍然无法工作。这是[php页面](http://pastebin.com/N2jpTdvW)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-12T08:05:19.357

**问题解决了**

只是改变：

```
$dbc=mysql_connect(_SRV, _ACCID, _PWD) or die(_ERROR15.": ".mysql_error()); 
```

进入 ：

```
$dbc=mysql_connect(_SRV, _ACCID, _PWD,false,128) or die(_ERROR15.": ".mysql_error()); 
```

Tadaaa ...所有错误都消失了！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T09:54:05.450

从[这里](http://dev.mysql.com/doc/refman/5.0/en/load-data-local.html)：

> 如果[`LOAD DATA LOCAL`](http://dev.mysql.com/doc/refman/5.0/en/load-data.html)在服务器或客户端中禁用，则尝试发出此类语句的客户端会收到以下错误消息：
> 
> `ERROR 1148: The used command is not allowed with this MySQL version`

# php - 使用 PHP 上传 Doc 文件

> ID：10977629
> 
> 赞同：0
> 
> 时间：2012-06-11T09:39:17.517
> 
> 标签：php, doc

我在使用 php 上传 doc 文件时遇到问题。我可以成功上传PDF文件。但是，一旦我尝试上传 doc 文件，我就会遇到错误

```
Array ( [name] => Array ( [0] => OSP_Internal staffs login_04062012.docx ) [type] => Array ( [0] => ) [tmp_name] => Array ( [0] => ) [error] => Array ( [0] => 1 ) [size] => Array ( [0] => 0 ) ) 
```

正如我们所看到的，`tmp_name`其余的专家都是空的。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T09:43:33.450

错误设置为 1，这意味着文件太大。

> UPLOAD_ERR_INI_SIZE 值：1；上传的文件超过了 php.ini 中的 upload_max_filesize 指令。

[http://www.php.net/manual/en/features.file-upload.errors.php](http://www.php.net/manual/en/features.file-upload.errors.php)

您可以通过在 .htaccess 中设置它来解决它

```
php_value upload_max_filesize 20M
php_value post_max_size 20M 
```

# java - 从 double 中减去 double 后精度损失

> ID：10977638
> 
> 赞同：2
> 
> 时间：2012-06-11T09:39:44.467
> 
> 标签：java, floating-point, floating-point-precision

> **可能的重复：**
> [在 java 中使用 Doubles 保持精度](https://stackoverflow.com/questions/322749/retain-precision-with-doubles-in-java)

好的，所以我有以下代码块：

```
int rotation = e.getWheelRotation();
if(rotation < 0)
    zoom(zoom + rotation * -.05); 
else if(zoom - .05 > 0)
    zoom(zoom - rotation * .05);

System.out.println(zoom); 
```

现在，zoom 变量是 double 类型，最初设置为 1。所以，我希望结果类似于 1 - .05 = .95; .95 - .05 = .9；.9 - .05 = .85；等等。但当我打印结果时，情况似乎并非如此，如下所示：

*   0.95
*   0.8999999999999999
*   0.8499999999999999
*   0.7999999999999998
*   0.7499999999999998
*   0.6999999999999997

希望有人能够清楚地解释。我搜索了互联网，当我们以二进制形式存储浮点数时，我读到它与一些限制有关，但我仍然不太明白。解决我的问题并不重要，但我想了解这种行为。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T09:43:19.413

Java 使用[IEEE-754](http://en.wikipedia.org/wiki/IEEE_754-2008)浮点数。它们并不完全精确。著名的例子是：

```
System.out.println(0.1d + 0.2d); 
```

...输出`0.30000000000000004`.

你所看到的只是这种不精确的症状。`double`您可以通过使用而不是提高精度`float`。

如果您正在处理财务计算，您可能更[`BigDecimal`](http://docs.oracle.com/javase/7/docs/api/java/math/BigDecimal.html)喜欢`float`或`double`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-11T09:55:17.727

`float`并且`double`精度有限，因为它的小数部分表示为 2 的一系列幂，例如 1/2 + 1/4 + 1/8 ...如果你有一个像 1/10 这样的数字，它必须是近似的。

出于这个原因，每当您处理浮点时，您必须使用合理的舍入，否则您会看到小错误。

例如

```
System.out.printf("%.2f%n", zoom); 
```

为了最大限度地减少轮次误差，您可以改为计算旋转次数并将该`int`值除以 20.0。这样你不会看到舍入错误，而且速度更快，幻数更少。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T09:42:55.517

`float`并且`double`有精度问题。我建议您看一下[BigDecimal](http://docs.oracle.com/javase/7/docs/api/java/math/BigDecimal.html)类。那应该解决精度问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-11T10:00:38.410

由于十进制数（以及整数）可以有无数个可能的值，因此它们不可能使用标准格式精确映射到位。计算机通过限制数字可以假设的范围来规避这个问题。

例如，`int`java 中的 an 不能表示大于`Integer.MAX_VALUE`或 2^31 - 1 的任何值。

对于十进制数，逗号后面的数字也有问题，也可能是无限的。这可以通过不允许所有十进制值来解决，而是限制为（智能选择的）可能性数量，基于 2 的幂。这会自动发生，但通常无需担心，您可以将 0.899999 的结果解释为 0.9。如果您确实需要明确的精度，您将不得不求助于其他可能有其他限制的数据类型。

# wso2 - 带有 Carbon Studio 添加限制策略的 WSO2 ESB 代理服务

> ID：10977639
> 
> 赞同：0
> 
> 时间：2012-06-11T09:39:50.443
> 
> 标签：wso2, wso2esb, wso2carbon, policy, throttling

我使用 Carbon Studio 创建了一个代理服务，该服务有一个节流策略，然后部署在 WSO2 ESB 中，但是当通过管理控制台访问时，该服务的节流被禁用。是否可以在 Carbon Studio 中启用节流？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T07:00:21.737

目前 Carbon Studio 和 Developer Studio 不支持通过 IDE 设置策略。政策支持在 Developer Studio [1] 的路线图中。

为此，您需要使用管理控制台。

[1]。[https://wso2.org/jira/browse/TOOLSROADMAP-1](https://wso2.org/jira/browse/TOOLSROADMAP-1)

谢谢并恭祝安康，

哈沙娜

# mysql - 使用 group by 子查询的 order by 不起作用

> ID：10977640
> 
> 赞同：0
> 
> 时间：2012-06-11T09:39:50.567
> 
> 标签：mysql, group-by, sql-order-by, subquery

我在 mysql 中有一个简单的统计查询。我让它使用 php 工作，但热衷于将它保存在数据库中，所以我在这里发现了另一个问题。多亏了它，我现在可以在 mysql 中使用它了。

我需要获得每天提交的记录总数。

我有运行的总工作，但无论我改变什么，它都不会按天订购。

它将按运行总计列排序，而不是按天排序。

任何输入表示赞赏。

```
SET @runtot:=0;
SELECT
   q1.`Day` AS 'Days of month',
   q1.`Record count` AS 'Record count',
   (@runtot := @runtot +  q1.`Record count`) AS 'rt'
FROM
   (SELECT
    FROM_UNIXTIME(tr.`tr_last_update`, '%e') AS 'Day',
    COUNT(tr.tr_id_pk) AS 'Record Count'
    FROM records_table AS tr
    GROUP BY FROM_UNIXTIME(tr.`tr_last_update`,'%e')
) AS q1
ORDER BY 'Days of month';

Days of month   Record count    rt
10                  13          13
11                  2           15
7                   255         270
8                   173         443
9                   166         609 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T09:43:33.670

它被视为一个字符串。尝试转换为 int：

```
SELECT
q1.`Day` AS 'Days of month',
...
ORDER BY CAST(q1.`Day` AS signed integer) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T09:51:24.260

除非我大错特错，否则您的整个查询是否与以下内容相同：

```
SELECT   DAYOFMONTH(FROM_UNIXTIME(tr_last_update)) AS `Days of month`,
         COUNT(tr_id_pk)                           AS `Record Count`,
         @runtot := @runtot + COUNT(tr_id_pk)      AS rt
FROM     records_table, (SELECT @runtot:=0) AS z
GROUP BY `Days of month`
ORDER BY `Days of month` 
```

# mvvm - 如果未加载视图，则视图模型中事件的订阅方法不会调用

> ID：10977641
> 
> 赞同：0
> 
> 时间：2012-06-11T09:39:57.653
> 
> 标签：mvvm, prism

我有一个订阅事件“NavigationCompletedEvent”的视图模型。此视图模型需要在没有视图的情况下加载到内存中。订阅代码是事件就像

```
 var navigationCompletedEvent = eventAggregator.GetEvent<NavigationCompletedEvent>();
        navigationCompletedEvent.Subscribe(OnNavigationCompleted, ThreadOption.UIThread); 
```

我已经在模块中明确创建了这个视图模型的对象，比如

```
 // Register other view objects with DI Container (Unity)
        var container = ServiceLocator.Current.GetInstance<IUnityContainer>();
        container.RegisterInstance(typeof(ModuleCTaskButtonViewModel), 
            new ModuleCTaskButtonViewModel(), new ExternallyControlledLifetimeManager()); 
```

但是当我从其他视图模块引发事件时，不会调用 subscribe 方法。

如果视图也加载到内存中，它工作正常。对此有任何想法吗？我怎样才能实现它？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T18:29:11.633

默认情况下，事件聚合器的订阅是弱引用。为了让您的视图模型保持活动状态，如果没有其他人引用它，您必须使用对订阅函数的重载，该函数接受一个布尔值来指示您想要使用强引用。

虽然，也许我不知道的你的 Unity 咒语会保持所需的寿命......但是，你的实验结果表明不会......

# ios - 使用响应写入多个低功耗蓝牙特性值

> ID：10977649
> 
> 赞同：5
> 
> 时间：2012-06-11T09:40:29.037
> 
> 标签：ios, core-bluetooth, bluetooth-lowenergy, characteristics

*蓝牙核心规范 V4.0 卷*。*3 G 部分第 4.9.3 节*规定，对于具有响应的特征值的写入，使用属性协议*写入请求*程序。

*Bluetooth Core Spec V4.0 Vol 3 Part F 第 3.3.2 节*描述，

> 一旦客户端向服务器发送请求，在收到响应 PDU 之前，该客户端不得向同一服务器发送其他请求。

我想使用 CoreBluetooth 在 iOS 应用程序中写入多个响应值。我必须自己管理这个规范吗？或者我可以简单地使用[`- writeValue:forCharacteristic:type`](http://developer.apple.com/library/ios/documentation/CoreBluetooth/Reference/CBPeripheral_Class/translated_content/CBPeripheral.html#//apple_ref/occ/instm/CBPeripheral/writeValue:forCharacteristic:type:)一次写入所有值，iOS 管理每个请求仅在前一个请求处理后发送？

我以某种方式猜测 iOS 会管理它，因为根据*蓝牙核心规范 V4.0 Vol 3 Part F 第 3.4.5.2 节*，*写入响应*不包含指向书面特征的链接。但是，该[`- peripheral:didWriteValueForCharacteristic:error`](http://developer.apple.com/library/ios/documentation/CoreBluetooth/Reference/CBPeripheralDelegate_Protocol/translated_content/CBPeripheralDelegate.html#//apple_ref/occ/instm/CBPeripheralDelegate/peripheral:didWriteValueForCharacteristic:error:)方法表明 iOS 以某种方式跟踪响应链接到的特征。

有人可以确认或否认这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T18:59:48.487

我认为在与 CB 打交道时，您无需过多担心 ATT/GATT。原因是许多使用 CB 的人无法访问蓝牙核心 4.0 规范，他们也不希望阅读它们。

CB 知道如何关联特征的原因是协议规定每个命令和响应都是配对的。当您发送命令时，您将收到响应。

因此，您可以多次使用 writeValue，CB 会为您正确排队调用，即它会在下一次写入之前等待 ATT 层的响应。并且委托回调保证与执行写入的顺序相同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-04T15:59:10.443

我能够编写“带有响应的多个请求”，即

[自外设] writeValue:valueToWrite forCharacteristic:dataPointCharacteristic type:CBCharacteristicWriteWithResponse];

集中在一起——实际上我发送了其中的 14 个——并且他们都在延迟后返回了回复。但是 - 写入响应不包含写入特征的数据 - 即 - 只有特征内的值在响应中无效。

似乎接近注释“根据蓝牙核心规范 V4.0 第 3 部分 F 部分第 3.4.5.2 节，写入响应不包含指向书面特征的链接”，但有一个区别是只有 [characteristc 值]不正确 - 但 ios 在内部处理了排序。因此，使用写响应（即 BLE 确认）来连接排序逻辑以处理接下来要执行的一系列步骤似乎并不可行。

所以 - 要点是 - 如果您要求 BLE 向外围设备“writeWithReponse”消息“Do Task #1”，则来自外围设备的 BLE 响应是“OK！”。响应并没有告诉您外围设备收到消息“执行任务 #1”，而是类似于 -*是的，我明白了您的意思。我懒得重复你发给我的确切命令*:)

# c# - 如何使用 Sharpen 转换 Java 枚举

> ID：10977652
> 
> 赞同：1
> 
> 时间：2012-06-11T09:40:34.077
> 
> 标签：c#, java, converter, sharpen-tool

我正在尝试使用versant的[锐化转换器将未绑定的 id ldap java sdk 源代码转换为 c#。](http://community.versant.com/Blogs/db4o/tabid/197/entryid/95/Default.aspx)但是，我收到一个与具有多个构造函数的 java 枚举类相关的异常，并且似乎与*普通*的.NET 枚举不同。

错误消息如下：

```
ERROR: /sharpened/src/com/unboundid/asn1/ASN1Messages.java:240: Enum can contain
only fields and a private constructor. 
```

Java 类如下所示：

```
enum ASN1Messages
{
  /**
   * ASN.1 Boolean elements must have a value whose length is exactly one byte.
   */
  ERR_BOOLEAN_INVALID_LENGTH("ASN.1 Boolean elements must have a value whose length is exactly one byte."),

  /**
   * Unable to decode the provided byte array as an ASN.1 BER element:  {0}
   */
  ERR_ELEMENT_DECODE_EXCEPTION("Unable to decode the provided byte array as an ASN.1 BER element:  {0}"), 
```

这个类有问题的方法是：

```
/**
   * Retrieves a localized version of the message.
   * This method should only be used for messages which do not take any arguments.
   *
   * @return  A localized version of the message.
   */
  public String get()
  {
    String s = MESSAGE_STRINGS.get(this);
    if (s == null)
    { 
```

使用锐化工具解决此问题的最佳方法是什么？

完整的类文件源代码如下：

/* * 版权所有 2012 UnboundID Corp. * 保留所有权利。 *//* * 版权所有 (C) 2012 UnboundID Corp. * * 本程序为免费软件；您可以根据自由软件基金会发布的 GNU 通用公共许可证（仅限 GPLv2）* 或 GNU 宽通用公共许可证（仅限 LGPLv2.1）* 的条款重新分发和/或修改它。* * 分发此程序是希望它有用，* 但没有任何保证；甚至没有对特定用途的适销性或适用性的默示保证。有关详细信息，请参阅 * GNU 通用公共许可证。* * 您应该已收到一份 GNU 通用公共许可证 * 连同此程序；如果没有，请参阅[http://www.gnu.org/licenses](http://www.gnu.org/licenses)。*/ 包 com.unboundid.asn1;

```
import java.text.MessageFormat;
import java.util.ResourceBundle;
import java.util.concurrent.ConcurrentHashMap;

/**
 * This enum defines a set of message keys for messages in the
 * com.unboundid.asn1 package, which correspond to messages in the
 * unboundid-ldapsdk-asn1.properties properties file.
 * <BR><BR>
 * This source file was generated from the properties file.
 * Do not edit it directly.
 */
enum ASN1Messages
{
  /**
   * ASN.1 Boolean elements must have a value whose length is exactly one byte.
   */
  ERR_BOOLEAN_INVALID_LENGTH("ASN.1 Boolean elements must have a value whose length is exactly one byte."),

  /**
   * Unable to decode the provided byte array as an ASN.1 BER element:  {0}
   */
  ERR_ELEMENT_DECODE_EXCEPTION("Unable to decode the provided byte array as an ASN.1 BER element:  {0}"),

  /**
   * The decoded length of {0,number,0} does not match the number of bytes remaining in the provided array ({1,number,0}).
   */
  ERR_ELEMENT_LENGTH_MISMATCH("The decoded length of {0,number,0} does not match the number of bytes remaining in the provided array ({1,number,0})."),

  /**
   * Invalid value length of {0,number,0} for an ASN.1 enumerated element.  Enumerated element values must have a length between 1 and 4 bytes.
   */
  ERR_ENUMERATED_INVALID_LENGTH("Invalid value length of {0,number,0} for an ASN.1 enumerated element.  Enumerated element values must have a length between 1 and 4 bytes."),

  /**
   * Invalid value length of {0,number,0} for an ASN.1 integer element.  Integer element values must have a length between 1 and 4 bytes.
   */
  ERR_INTEGER_INVALID_LENGTH("Invalid value length of {0,number,0} for an ASN.1 integer element.  Integer element values must have a length between 1 and 4 bytes."),

  /**
   * Invalid value length of {0,number,0} for an ASN.1 long element.  Long element values must have a length between 1 and 8 bytes.
   */
  ERR_LONG_INVALID_LENGTH("Invalid value length of {0,number,0} for an ASN.1 long element.  Long element values must have a length between 1 and 8 bytes."),

  /**
   * ASN.1 null elements must not have a value.
   */
  ERR_NULL_HAS_VALUE("ASN.1 null elements must not have a value."),

  /**
   * The end of the input stream was reached before the first length byte could be read.
   */
  ERR_READ_END_BEFORE_FIRST_LENGTH("The end of the input stream was reached before the first length byte could be read."),

  /**
   * The end of the input stream was reached before the full length could be read.
   */
  ERR_READ_END_BEFORE_LENGTH_END("The end of the input stream was reached before the full length could be read."),

  /**
   * The end of the input stream was reached before the full value could be read.
   */
  ERR_READ_END_BEFORE_VALUE_END("The end of the input stream was reached before the full value could be read."),

  /**
   * The element indicated that it required {0,number,0} bytes to hold the value, but this is larger than the maximum of {1,number,0} bytes that the client has been configured to accept.
   */
  ERR_READ_LENGTH_EXCEEDS_MAX("The element indicated that it required {0,number,0} bytes to hold the value, but this is larger than the maximum of {1,number,0} bytes that the client has been configured to accept."),

  /**
   * The element indicated that it required {0,number,0} bytes to encode the multi-byte length, but multi-byte lengths must be encoded in 1 to 4 bytes.
   */
  ERR_READ_LENGTH_TOO_LONG("The element indicated that it required {0,number,0} bytes to encode the multi-byte length, but multi-byte lengths must be encoded in 1 to 4 bytes."),

  /**
   * Unable to decode the provided byte array as a sequence:  {0}
   */
  ERR_SEQUENCE_BYTES_DECODE_EXCEPTION("Unable to decode the provided byte array as a sequence:  {0}"),

  /**
   * Unable to decode the provided byte array as a sequence because the decoded length of an embedded element exceeds the number of bytes remaining.
   */
  ERR_SEQUENCE_BYTES_DECODE_LENGTH_EXCEEDS_AVAILABLE("Unable to decode the provided byte array as a sequence because the decoded length of an embedded element exceeds the number of bytes remaining."),

  /**
   * Unable to decode the provided ASN.1 element {0} as a sequence:  {1}
   */
  ERR_SEQUENCE_DECODE_EXCEPTION("Unable to decode the provided ASN.1 element {0} as a sequence:  {1}"),

  /**
   * Unable to decode the provided ASN.1 element {0} as a sequence because the decoded length of an embedded element exceeds the number of bytes remaining.
   */
  ERR_SEQUENCE_DECODE_LENGTH_EXCEEDS_AVAILABLE("Unable to decode the provided ASN.1 element {0} as a sequence because the decoded length of an embedded element exceeds the number of bytes remaining."),

  /**
   * Unable to decode the provided byte array as a set:  {0}
   */
  ERR_SET_BYTES_DECODE_EXCEPTION("Unable to decode the provided byte array as a set:  {0}"),

  /**
   * Unable to decode the provided byte array as a set because the decoded length of an embedded element exceeds the number of bytes remaining.
   */
  ERR_SET_BYTES_DECODE_LENGTH_EXCEEDS_AVAILABLE("Unable to decode the provided byte array as a set because the decoded length of an embedded element exceeds the number of bytes remaining."),

  /**
   * Unable to decode the provided ASN.1 element {0} as a set:  {1}
   */
  ERR_SET_DECODE_EXCEPTION("Unable to decode the provided ASN.1 element {0} as a set:  {1}"),

  /**
   * Unable to decode the provided ASN.1 element {0} as a set because the decoded length of an embedded element exceeds the number of bytes remaining.
   */
  ERR_SET_DECODE_LENGTH_EXCEEDS_AVAILABLE("Unable to decode the provided ASN.1 element {0} as a set because the decoded length of an embedded element exceeds the number of bytes remaining."),

  /**
   * The ASN.1 stream reader has already read beyond the end of this sequence (expected sequence of length {0} to end at {1} bytes into the stream, but {2} bytes have already been read from the stream).
   */
  ERR_STREAM_READER_SEQUENCE_READ_PAST_END("The ASN.1 stream reader has already read beyond the end of this sequence (expected sequence of length {0} to end at {1} bytes into the stream, but {2} bytes have already been read from the stream)."),

  /**
   * The ASN.1 stream reader has already read beyond the end of this set (expected set of length {0} to end at {1} bytes into the stream, but {2} bytes have already been read from the stream).
   */
  ERR_STREAM_READER_SET_READ_PAST_END("The ASN.1 stream reader has already read beyond the end of this set (expected set of length {0} to end at {1} bytes into the stream, but {2} bytes have already been read from the stream).");

  /**
   * The resource bundle that will be used to load the properties file.
   */
  private static final ResourceBundle RESOURCE_BUNDLE;
  static
  {
    ResourceBundle rb = null;
    try
    {
      rb = ResourceBundle.getBundle("unboundid-ldapsdk-asn1");
    } catch (Exception e) {}
    RESOURCE_BUNDLE = rb;
  }

  /**
   * The map that will be used to hold the unformatted message strings, indexed by property name.
   */
  private static final ConcurrentHashMap<ASN1Messages,String> MESSAGE_STRINGS = new ConcurrentHashMap<ASN1Messages,String>();

  /**
   * The map that will be used to hold the message format objects, indexed by property name.
   */
  private static final ConcurrentHashMap<ASN1Messages,MessageFormat> MESSAGES = new ConcurrentHashMap<ASN1Messages,MessageFormat>();

  // The default text for this message
  private final String defaultText;

  /**
   * Creates a new message key.
   */
  private ASN1Messages(final String defaultText)
  {
    this.defaultText = defaultText;
  }

  /**
   * Retrieves a localized version of the message.
   * This method should only be used for messages which do not take any arguments.
   *
   * @return  A localized version of the message.
   */
  public String get()
  {
    String s = MESSAGE_STRINGS.get(this);
    if (s == null)
    {
      if (RESOURCE_BUNDLE == null)
      {
        return defaultText;
      }
      else
      {
        try
        {
          s = RESOURCE_BUNDLE.getString(name());
        }
        catch (final Exception e)
        {
          s = defaultText;
        }
        MESSAGE_STRINGS.putIfAbsent(this, s);
      }
    }
    return s;
  }

  /**
   * Retrieves a localized version of the message.
   *
   * @param  args  The arguments to use to format the message.
   *
   * @return  A localized version of the message.
   */
  public String get(final Object... args)
  {
    MessageFormat f = MESSAGES.get(this);
    if (f == null)
    {
      if (RESOURCE_BUNDLE == null)
      {
        f = new MessageFormat(defaultText);
      }
      else
      {
        try
        {
          f = new MessageFormat(RESOURCE_BUNDLE.getString(name()));
        }
        catch (final Exception e)
        {
          f = new MessageFormat(defaultText);
        }
      }
      MESSAGES.putIfAbsent(this, f);
    }
    synchronized (f)
    {
      return f.format(args);
    }
  }

  /**
   * Retrieves a string representation of this message key.
   *
   * @return  A string representation of this message key.
   */
  @Override()
  public String toString()
  {
    return get();
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T10:20:34.120

我想知道 Sharpen 是否支持这样的枚举实现。这是源代码，据我了解，一旦在 enum 中找到公共方法，它似乎就会抛出异常：

```
private boolean processEnumType(TypeDeclaration node) {
    if (!isEnum(node)) {
        return false;
    }
    final CSEnum theEnum = new CSEnum(typeName(node));
    mapVisibility(node, theEnum);
    mapJavadoc(node, theEnum);
    addType(theEnum);

    node.accept(new ASTVisitor() {
        public boolean visit(VariableDeclarationFragment node) {
            theEnum.addValue(identifier(node.getName()));
            return false;
        }

        @Override
        public boolean visit(MethodDeclaration node) {
            if (node.isConstructor() && isPrivate(node)) {
                return false;
            }
            unsupportedConstruct(node, "Enum can contain only fields and a private constructor.");
            return false;
        }
    });
    return true;
} 
```

**但是**，这个链接[http://tracker.db4o.com/browse/COR-496](http://tracker.db4o.com/browse/COR-496)似乎证实这适用于公共吸气剂。也就是说，如果您尊重这种结构：

```
enum ASN1Messages {
    /**
     * ASN.1 Boolean elements must have a value whose length is exactly one byte.
     */
    ERR_BOOLEAN_INVALID_LENGTH("ASN.1 Boolean elements must have a value whose length is exactly one byte."),

    /**
     * Unable to decode the provided byte array as an ASN.1 BER element:  {0}
     */
    ERR_ELEMENT_DECODE_EXCEPTION("Unable to decode the provided byte array as an ASN.1 BER element:  {0}"),;

    private String s;

    ASN1Messages(String s) {
        this.s = s;
    }

    /**
     * Retrieves a localized version of the message.
     * This method should only be used for messages which do not take any arguments.
     *
     * @return A localized version of the message.
     */
    public String get() {
        return s;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T10:44:32.007

根据您的枚举声明，您`private`的枚举构造函数上有修饰符。我认为这是无效的。试试这个构造函数：

```
ASN1Messages(final String defaultText) {
  this.defaultText = defaultText;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-18T09:29:01.510

这些`get()`方法似乎包括输出`String`与每个枚举值对应的方法。

我在上面的代码上运行了 Sharpen，但是注释掉了`get()`and方法。此转换成功，但与值`toString()`关联的字符串*不会*传输到 C# 文件。`enum`

 *因此，如果通过合理的努力可以做到这一点，我建议将 Java 代码拆分为一个没有关联字符串的*纯* 文件，以及一个包含用于转换和实现功能`enum`的映射的静态帮助程序`enum`类。`String``get`

如果`enum`包含在重构的`get`方法签名中，

```
ASN1MessagesHelper.get(ASN1Messages mess) 
```

之后修改获得的 C# 代码仍然可以模仿要调用的 Java 功能`get()`：`enum`

```
ASN1MessagesHelper.Get(ASN1Messages mess) 
=> ASN1MessagesHelper.Get(this ASN1Messages mess) 
```*

# asp.net - 访问 ASP.NET 应用程序时出现 HTTP 400 'Request Header too long' 错误

> ID：10977655
> 
> 赞同：1
> 
> 时间：2012-06-11T09:40:46.503
> 
> 标签：asp.net, ajaxcontroltoolkit, http-status-code-400

我们的网站是一个使用 AjaxControlToolkit 的 ASP.net 4.0 webforms 网站。它在上周在线没有问题，但从今天开始，我们的一个客户在从 Firefox 访问该站点时收到“HTTP 错误 400。请求标头的大小太长”。它适用于 IE。查看日志，我看到请求在 URL 后附加了很长的垃圾：

> ... Statistics.aspx _TSM_HiddenField_ = ctl00_scriptManager_HiddenField＆_TSM_CombinedScripts _ = ;; AjaxControlToolkit，+版本= 4.1.51116.0，+文化=中立，+公钥= 28f01b0e84b6d53e：DE-DE：fd384f95-1b49-47cf-9b47-2fa2a921a36a：475a4ef5：effe2a26： 8e94f951:1d3ed089:addc6819:5546a2b:d2e10b12:37e2e5c9:5a682656:c7029a2:e9e598a9

URL 应该只是 .../Statistics.aspx。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-11T09:54:17.037

我发现了问题：网站上的 cookie 太多。删除它们解决了这个问题。

该问题与 AjaxControlToolkit 无关。很抱歉用不相关的细节误导了社区。

**编辑：** 我个人在 Firefox 中使用[Firebug的](https://addons.mozilla.org/en-us/firefox/addon/firebug/)[Firecookie](https://addons.mozilla.org/en-us/firefox/addon/firecookie/)插件清理了 cookie ，但您可以通过按 Ctrl+Shift+Del 并选择“Cookies”来清理 cookie。

# dotnetnuke - 如何将新的 ascx 页面添加到 dotnetnuke 模块？

> ID：10977657
> 
> 赞同：0
> 
> 时间：2012-06-11T09:40:58.463
> 
> 标签：dotnetnuke

我想为我的模块创建一个网络服务。dot netnuke 模块中主要有三个页面。1）编辑 2）设置 3）查看页面。我怎样才能在 dotnenuke 模块中再添加一页说 webservice 。当编辑和设置页面出现时，我想在管理按钮中获取此页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T23:15:33.930

您可以将其他 ASCX 文件添加到您的项目，但您需要使用 DotNetNuke“注册”它们，您可以通过 HOST EXTENSIONS 页面上的模块定义手动执行此操作，或者您可以更新 .DNN 清单文件以包含新的ASCX 注册。

要使用管理按钮（操作菜单）链接到它们，您需要添加一个新的操作项，调用该 ASCX 文件的 URL。

# perl - else 比 elsif 慢吗？

> ID：10977661
> 
> 赞同：6
> 
> 时间：2012-06-11T09:41:12.743
> 
> 标签：perl, if-statement, microbenchmark

为什么这里的`sub` `eins`with the`else`比`sub` `zwei`with the 慢`elsif`？

```
#!/usr/bin/env perl
use warnings;
use 5.012;
use Benchmark qw(:all);

my $d = 0;
my $c = 2;

sub eins {
    if ( $c == 1) {
        $d = 1;
    }
    else {
        $d = 2;
    }
}

sub zwei {
    if ( $c == 1) {
        $d = 1;
    }
    elsif ( $c == 2 ) {
        $d = 2;
    }
}

sub drei {
    $d = 1;
    $d = 2 if $c == 2;
}

cmpthese( -5, {
    eins => sub{ eins() },
    zwei => sub{ zwei() },
    drei => sub{ drei() },
} ); 
```

* * *

```
 Rate eins drei zwei
eins 4167007/s   --  -1% -16%
drei 4207631/s   1%   -- -15%
zwei 4972740/s  19%  18%   --

        Rate eins drei zwei
eins 4074356/s   --  -8% -16%
drei 4428649/s   9%   --  -9%
zwei 4854964/s  19%  10%   --

        Rate eins drei zwei
eins 3455697/s   --  -6% -19%
drei 3672628/s   6%   -- -14%
zwei 4250826/s  23%  16%   --

        Rate eins drei zwei
eins 2832634/s   --  -8% -19%
drei 3088931/s   9%   -- -12%
zwei 3503197/s  24%  13%   --

        Rate eins zwei drei
eins 3053821/s   -- -17% -26%
zwei 3701601/s  21%   -- -10%
drei 4131128/s  35%  12%   --

        Rate eins drei zwei
eins 3033041/s   --  -2% -12%
drei 3092511/s   2%   -- -10%
zwei 3430837/s  13%  11%   -- 
```

* * *

```
Summary of my perl5 (revision 5 version 16 subversion 0) configuration:

Platform:
    osname=linux, osvers=3.1.10-1.9-desktop, archname=x86_64-linux
    uname='linux linux1 3.1.10-1.9-desktop #1 smp preempt thu apr 5 18:48:38 utc 2012 (4a97ec8) x86_64 x86_64 x86_64 gnulinux '
    config_args='-de'
    hint=recommended, useposix=true, d_sigaction=define
    useithreads=undef, usemultiplicity=undef
    useperlio=define, d_sfio=undef, uselargefiles=define, usesocks=undef
    use64bitint=define, use64bitall=define, uselongdouble=undef
    usemymalloc=n, bincompat5005=undef
Compiler:
    cc='cc', ccflags ='-fno-strict-aliasing -pipe -fstack-protector -I/usr/local/include -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64',
    optimize='-O2',
    cppflags='-fno-strict-aliasing -pipe -fstack-protector -I/usr/local/include'
    ccversion='', gccversion='4.6.2', gccosandvers=''
    intsize=4, longsize=8, ptrsize=8, doublesize=8, byteorder=12345678
    d_longlong=define, longlongsize=8, d_longdbl=define, longdblsize=16
    ivtype='long', ivsize=8, nvtype='double', nvsize=8, Off_t='off_t', lseeksize=8
    alignbytes=8, prototype=define
Linker and Libraries:
    ld='cc', ldflags =' -fstack-protector -L/usr/local/lib'
    libpth=/usr/local/lib /lib/../lib64 /usr/lib/../lib64 /lib /usr/lib /lib64 /usr/lib64 /usr/local/lib64
    libs=-lnsl -lndbm -lgdbm -ldb -ldl -lm -lcrypt -lutil -lc -lgdbm_compat
    perllibs=-lnsl -ldl -lm -lcrypt -lutil -lc
    libc=/lib/libc-2.14.1.so, so=so, useshrplib=false, libperl=libperl.a
    gnulibc_version='2.14.1'                                                                                                                                                                 
Dynamic Linking:                                                                                                                                                                           
    dlsrc=dl_dlopen.xs, dlext=so, d_dlsymun=undef, ccdlflags='-Wl,-E'                                                                                                                        
    cccdlflags='-fPIC', lddlflags='-shared -O2 -L/usr/local/lib -fstack-protector'                                                                                                           

Characteristics of this binary (from libperl): 
Compile-time options: HAS_TIMES PERLIO_LAYERS PERL_DONT_CREATE_GVSV
                        PERL_MALLOC_WRAP PERL_PRESERVE_IVUV USE_64_BIT_ALL
                        USE_64_BIT_INT USE_LARGE_FILES USE_LOCALE
                        USE_LOCALE_COLLATE USE_LOCALE_CTYPE
                        USE_LOCALE_NUMERIC USE_PERLIO USE_PERL_ATOF
Built under linux
Compiled at May 24 2012 20:53:15
%ENV:
    PERL_HTML_DISPLAY_COMMAND="/usr/bin/firefox -new-window %s"
@INC:
    /usr/local/lib/perl5/site_perl/5.16.0/x86_64-linux
    /usr/local/lib/perl5/site_perl/5.16.0
    /usr/local/lib/perl5/5.16.0/x86_64-linux
    /usr/local/lib/perl5/5.16.0
    . 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T17:46:31.827

[这是每个人的答案，但它是有用的信息，不适合评论。]

首先，我们并排看一下编译后的形式，如果`$c == 2`，“zwei”的执行路径是“eins”的纯超集。（标有“*”。）

```
*1  <0> enter                            *1  <0> enter
*2  <;> nextstate(main 4 -e:2) v:{       *2  <;> nextstate(main 4 -e:2) v:{
*3  <#> gvsv[*c] s                       *3  <#> gvsv[*c] s
*4  <$> const[IV 1] s                    *4  <$> const[IV 1] s
*5  <2> eq sK/2                          *5  <2> eq sK/2
*6  <|> cond_expr(other->7) vK/1         *6  <|> cond_expr(other->7) vK/1
 7      <0> enter v                       7      <0> enter v
 8      <;> nextstate(main 1 -e:3) v:{    8      <;> nextstate(main 1 -e:3) v:{
 9      <$> const[IV 1] s                 9      <$> const[IV 1] s
 a      <#> gvsv[*d] s                    a      <#> gvsv[*d] s
 b      <2> sassign vKS/2                 b      <2> sassign vKS/2
 c      <@> leave vKP                     c      <@> leave vKP
            goto d                                   goto d
                                         *e  <#> gvsv[*c] s
                                         *f  <$> const[IV 2] s
                                         *g  <2> eq sK/2
                                         *h  <|> and(other->i) vK/1
*e  <0> enter v                          *i      <0> enter v
*f  <;> nextstate(main 2 -e:6) v:{       *j      <;> nextstate(main 2 -e:6) v:{
*g  <$> const[IV 2] s                    *k      <$> const[IV 2] s
*h  <#> gvsv[*d] s                       *l      <#> gvsv[*d] s
*i  <2> sassign vKS/2                    *m      <2> sassign vKS/2
*j  <@> leave vKP                        *n      <@> leave vKP
*d  <@> leave[1 ref] vKP/REFC            *d  <@> leave[1 ref] vKP/REFC 
```

问题是，我可以重现你的结果！（为 x86_64-linux-thread-multi 构建的 v5.16.0）

```
 Rate drei eins zwei
drei  8974033/s   --  -3% -19%
eins  9263260/s   3%   -- -16%
zwei 11034175/s  23%  19%   --

           Rate drei eins zwei
drei  8971868/s   --  -1% -21%
eins  9031677/s   1%   -- -20%
zwei 11333871/s  26%  25%   -- 
```

这不是一个小的差异（这可能是 CPU 缓存的结果），并且它可以在不同的运行之间重现（因此它不是影响基准测试的另一个应用程序）。我难住了。

每次迭代，减少4*次操作需要**多*花 22 纳秒（1/9031677 秒 - 1/11333871 秒）。我预计它会减少大约 100 ns。

 ** * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-11T09:50:39.850

您必须检查生成的特定 Perl 版本的操作码。有趣的是，当从调试器运行时，结果是不同的：

```
 Win64, Activeperl 5.14.2, from debugger environment:
           Rate zwei eins drei
 zwei 130806/s   --  -0%  -1%
 eins 130957/s   0%   --  -0%
 drei 131612/s   1%   1%   -- 
```

没有调试器，`eins`速度最快（正如人们对代码所期望的那样）：

```
 Win64, Activeperl 5.14.2 :
           Rate drei zwei eins
 drei 3402015/s   --  -5% -13%
 zwei 3585171/s   5%   --  -8%
 eins 3916856/s  15%   9%   -- 
```

实际上，我在这里没有找到`zwei`比以下更快的系统`eins`：

```
 Linux x64, Perl 5.12.1:
           Rate drei zwei eins
 drei 2439279/s   -- -13% -15%
 zwei 2797316/s  15%   --  -3%
 eins 2875184/s  18%   3%   -- 
```

* * *

**附录**：

在阅读了 ikegami 的帖子后，我在 Win64 上尝试了 Strawberry 5.16，然后瞧：

```
 Perl v5.16.0, MSWin32-x64-multi-t
           Rate eins drei zwei
 eins 3954005/s   --  -3% -10%
 drei 4084178/s   3%   --  -7%
 zwei 4406707/s  11%   8%   -- 
```

我们去，`elsif/zwei` **更快**。

那么，这似乎是与 5.16.0 相关的问题？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T08:22:46.000

I think the best answer may well be: "Who cares?"

This is micro-benchmarking of the most premature kind. If profiling finds that the biggest reason for real code being slow is using `else` instead of `elsif` then I have a very fine hat that I would be loath to lose, but which I would devour in a heartbeat.

Personally I'd write `$d = ($c == 1) ? 1 : 2` and not care tuppence about its performance.*

# blackberry - 如何确定黑莓智能手机上是否有任何正在进行的网络使用？

> ID：10977670
> 
> 赞同：3
> 
> 时间：2012-06-11T09:41:48.590
> 
> 标签：blackberry

我正在编写一个应用程序，仅当其他应用程序/系统没有持续使用网络时才需要执行某些任务。

右上角有一个可爱的小箭头显示它，但当然，我需要以编程方式检查它。API 中是否有任何功能可以让我这样做？

我正在为 BB OS 6.0 开发。我已经搜索了 Stack Overflow 和谷歌，但没有运气。我将不胜感激指出我正确的方向。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T13:30:18.813

这是由操作系统和 AFAIK 控制的，无法从您的应用程序代码中检查它。但正如您所指出的，右上角有那个箭头。如果您可以截取屏幕截图并且顶部栏出现在其中，则您可以在给定的瞬间检测到网络活动。

使用 API，您唯一能做的就是检查连接性。如果没有覆盖，则可以确定没有网络流量（但同时不能使用网络）。您还可以使用`RadioInfo`类计算发送或接收数据包的数量。

# java - 找不到正确的 rsync 参数以传递给 Java Runtime exec 以忽略文件夹

> ID：10977672
> 
> 赞同：0
> 
> 时间：2012-06-11T09:42:08.633
> 
> 标签：java, unix, rsync, runtime.exec

我想使用 Runtime.exec() 从 Java 调用 rsync 并且我想忽略隐藏的文件/文件夹。该命令很简单，并且在命令行中就像一个魅力。

```
rsync -r --exclude=".*" source destination 
```

我尝试了很多很多不同的组合来正确分解这些参数，以便作为 String[] 传递给 exec()。我失败了，我可能快要失去理智了。

我尝试过的一些例子

```
String[]{ "rsync", "-r", "--exclude", "=", ".*", source, destination});
String[]{ "rsync", "-r", "--exclude", "=", "\".*\"", source, destination});
String[]{ "rsync", "-r", "--exclude=\".*\"", source, destination}); 
```

大多数情况下，我以[退出 23](http://wpkg.org/Rsync_exit_codes)（即“由于错误导致的部分传输”）结束，传输完成，但包含隐藏文件/文件夹。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T10:41:13.523

如前所述`".*"`，由外壳评估。最好将所有选项放在一个文件中并执行`rsync @myfile`.

*顺便说一句，我想知道原始命令是否排除`.*`了子目录中的目录。*

# jquery - jQuery .next() 不起作用？

> ID：10977674
> 
> 赞同：3
> 
> 时间：2012-06-11T09:42:20.417
> 
> 标签：jquery, jquery-selectors

我正在尝试将 jQuery[`.next()`](http://api.jquery.com/next/)与选择器一起使用，似乎我错过了一些东西。

我的代码：

```
<div>1</div>
<span>2</span>
<div class="dd">3</div>
<div>4</div> 
```

```
$('div').next(".dd").css('color','red'); 
```

如果我将跨度更改为 div 它可以工作，但这种方式不行！

有什么帮助吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T09:43:35.470

我应该使用[nextAll()](http://api.jquery.com/nextAll/)而不是 next

```
$('div').nextAll(".dd").css('color','red'); 
```

[演示工作](http://jsfiddle.net/sssonline2/fm5VR/)

# cllocationmanager - 应用程序终止后接收位置更新

> ID：10977679
> 
> 赞同：5
> 
> 时间：2012-06-11T09:42:44.957
> 
> 标签：cllocationmanager, cllocation

我需要一直跟踪用户位置（但不要耗尽电池）。我了解在应用程序终止后获取更新的唯一方法是使用 startMonitoringSignificantLocationChanges。

来自 Apple 关于 startMonitoringSignificantLocationChanges 的位置感知编程指南：

> 如果您启动此服务并且您的应用程序随后终止，则系统会在新事件到达时自动将应用程序重新启动到后台。在这种情况下，传递给 application:didFinishLaunchingWithOptions: 应用程序委托方法的选项字典包含键 UIApplicationLaunchOptionsLocationKey 以指示您的应用程序是由于位置事件而启动的。**重新启动后，您仍然必须配置位置管理器对象并调用此方法以继续接收位置事件。当您重新启动位置服务时，当前事件会立即传递给您的委托。此外，即使在您启动位置服务之前，您的位置管理器对象的位置属性也会填充最新的位置对象。**

如果有人可以在代码中演示（举个例子）我应该使用哪些方法，我会很高兴

在下面的代码中，我正在尝试： - 在 appdelegate 启动位置管理器，该管理器对显着的监视器更改更新和启动日期进行分析。- 在 didUpdateToLocation 中，我正在调用 stopupdating - 在 didFinishLaunchingWithOptions 中，当我检查是否有 UIApplicationLaunchOptionsLocationKey 以了解我是否在后台并由于重要的监视器位置更新而启动时。- 如果是这样，我再次调用 startMonitoringSignificantLocationChanges（不知道为什么......）并开始一个 UIBackgeoundTaskIdentifier 来调用 startupdating 方法。

```
LocationController.m : 
+ (LocationController*)sharedInstance {
    @synchronized(self) {
        if (sharedCLDelegate == nil) {
            [[self alloc] init];
        }
    }
    return sharedCLDelegate;
}

- (id)init
{
    self = [super init];
    if (self != nil) {
        self.locationManager = [[[CLLocationManager alloc] init] autorelease];
        self.locationManager.delegate = self;
        self.locationManager.desiredAccuracy = kCLLocationAccuracyNearestTenMeters;
        [self.locationManager startUpdatingLocation];
        [self.locationManager startMonitoringSignificantLocationChanges];

    }
    return self;
}
- (void) startMonitoringSignificantLocationChanges
{
    [self.locationManager startMonitoringSignificantLocationChanges];
}
- (void) stopMonitoringSignificantLocationChanges
{
    [self.locationManager stopMonitoringSignificantLocationChanges];
}
-(void) start{
    [self.locationManager startUpdatingLocation];
}
- (void)locationManager:(CLLocationManager *)manager 
    didUpdateToLocation:(CLLocation *)newLocation 
           fromLocation:(CLLocation *)oldLocation{
    if ( abs([newLocation.timestamp timeIntervalSinceDate: [NSDate date]]) < 30) {
        self.lastLocation = newLocation;
        [self updateLocation]; //sending location to server
        [self.locationManager stopUpdatingLocation];
    }
}
- (void)locationManager:(CLLocationManager*)manager
       didFailWithError:(NSError*)error{
    [self.locationManager stopUpdatingLocation];
}

AppDelegate.h : 

@interface AppDelegate : NSObject <UIApplicationDelegate> {
    UIBackgroundTaskIdentifier bgTask;
}

AppDelegate.m : 

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {    
        id locationValue = [launchOptions objectForKey:UIApplicationLaunchOptionsLocationKey];
        if (locationValue) {
            [[LocationController sharedInstance] startMonitoringSignificantLocationChanges];
            UIApplication *app  = [UIApplication sharedApplication];
            bgTask = [app beginBackgroundTaskWithExpirationHandler:^{ 
                [app endBackgroundTask:bgTask]; 
                bgTask = UIBackgroundTaskInvalid;
            }];
            [[LocationController sharedInstance] start]; //startupdating
            return YES;
        }
    else { 
            [[LocationController sharedInstance] init];
    }
}
-(void) applicationDidEnterBackground:(UIApplication *) application
{
    NSLog(@"entered background Mode");
}

-(void) applicationDidBecomeActive:(UIApplication *) application
{
    NSLog(@"application Did Become Active");
} 
```

谢谢你。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-02T05:20:20.327

使用您的课程，这就是我要做的。

在您的 AppDelegate.m 中，当您的应用程序处于前台或后台时，我会移动 CLLocationManager 以在前台/后台运行以匹配。我这样做的原因是因为如果应用程序在后台时没有将 CLLocationManager 移动到后台，则不会向 CLLocationManager 的回调发送位置更新

```
- (void)applicationDidEnterBackground:(UIApplication *) application {
    [[LocationController sharedInstance] stop];
    [[LocationController sharedInstance] startMonitoringSignificantLocationChanges];
    NSLog(@"entered background Mode");
}

- (void)applicationDidBecomeActive:(UIApplication *) application {
    [[LocationController sharedInstance] stopMonitoringSignificantLocationChanges];
    [[LocationController sharedInstance] start];
    NSLog(@"application Did Become Active");
} 
```

因此，假设您的应用程序然后移动到后台，一段时间后，iOS 认为它使用了太多内存并终止了您的应用程序。

几分钟后，iOS 会收到位置更新，并重新启动您的应用程序，让它知道它由于位置服务而重新启动。然后您需要重新启动后台定位服务，因为这将是您的应用程序必须这样做的唯一机会。

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {    
    if ([launchOptions objectForKey:UIApplicationLaunchOptionsLocationKey]) {
        [[LocationController sharedInstance] startMonitoringSignificantLocationChanges];
    }
    return YES;
} 
```

哦，最后一个更改，我不确定为什么在您的`locationManager:didUpdateToLocation:fromLocation:`方法中您要停止位置服务，因为当您这样做时，没有更多的更新通过。让它运行，然后每次发生位置更改时，您都可以将其发送到服务器。

```
- (void)locationManager:(CLLocationManager *)manager 
    didUpdateToLocation:(CLLocation *)newLocation 
           fromLocation:(CLLocation *)oldLocation {

    if ( abs([newLocation.timestamp timeIntervalSinceDate: [NSDate date]]) < 30) {
        self.lastLocation = newLocation;
        [self updateLocation]; //sending location to server

} 
```

# backbone.js - 委派活动

> ID：10977680
> 
> 赞同：0
> 
> 时间：2012-06-11T09:42:51.913
> 
> 标签：backbone.js, backbone-views

我有整个集合的主干视图（“可点击”类别的列表）。我可以在视图的每个项目上委托事件，以便我可以找到已单击的类别吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T12:38:15.853

这是一个可能有帮助的帖子。基本上，您在项目视图中使用 data-* 属性来存储然后检索单击的项目的 id：

*   [Backbone.js：获取点击元素的模型](http://lostechies.com/derickbailey/2011/10/11/backbone-js-getting-the-model-for-a-clicked-element/)

如果您更愿意直接上代码，这里是帖子中用来演示[的 jsFiddle 。](http://jsfiddle.net/derickbailey/sh6Dv/14/)希望有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T09:58:55.057

我没有回答你的问题（不，我想），但想分享我的方法：一个通用的集合视图组件，它使用其他视图呈现集合。它可以像下面的示例一样简单，也可以更复杂（监听添加/删除/重置事件并做出相应的反应）。

```
var CollectionView = Backbone.View.extend({
    render : function() {
        this.options.collection.each(function(model) {
            this.$el.append((new this.options.view({model : model})).el);
        }, this);
    }
}) 
```

# java - 插件java版本和项目java版本

> ID：10977685
> 
> 赞同：-1
> 
> 时间：2012-06-11T09:43:10.080
> 
> 标签：java, eclipse, eclipse-plugin

我正在编写一个与 java 1.5 兼容的 eclipse 插件。如果任何使用 java 1.5 或更低或更高版本的人安装此插件，它会正常工作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T13:23:56.757

`Bundle-RequiredExecutionEnvironment: J2SE-1.5`如果你的目标是 java 1.5，你应该在你的插件 MANIFEST.MF 中包含一个语句。这既是文档，也是 OSGi 运行时关于该捆绑包中有效内容的说明。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T09:46:46.553

不可以。如果您使用较低版本中不可用的 java 1.5 特定库调用，则它不适用于较低版本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T09:47:01.910

这取决于您的插件使用什么功能。某些函数最终被标记为已弃用并在未来的版本中被删除，这可能会在较新版本的 Java 运行您的代码时导致问题。

另一方面，新功能往往会从一个版本添加到下一个版本，因此在您的情况下，旧版本可能会崩溃，因为您的应用程序使用的某些功能根本不存在。

最多只能指定一个最低 Java 版本，最终即使这样也会导致问题。

# android - 开始拨打电话并在n秒后关闭android

> ID：10977691
> 
> 赞同：1
> 
> 时间：2012-06-11T09:43:22.237
> 
> 标签：android, user-interface

我想开发一个应用程序，调用一个打开我家大门的 gsm 工具。我需要从一个 android 应用程序开始呼叫我的门禁号码，然后在 3/4 秒后关闭它。

这是可能的？

另外，我可以开发我的应用程序的最佳方式是在通话期间使用关闭、扬声器等按钮来屏蔽通话而不查看标准通话 ui。

单击“打开门”按钮并留在应用程序界面会很好。

谢谢

# java - 如何在 JPA 2 中创建映射为实体类的 3 或 4 路多对多关联

> ID：10977702
> 
> 赞同：0
> 
> 时间：2012-06-11T09:43:47.083
> 
> 标签：java, hibernate, jakarta-ee, jpa, spring-data

我正在使用 spring 3.1、hibernate 4.0.1.FINAL 和 spring-data-jpa 1.0.2.RELEASE。所以假设我有一个`many-to-many`between`class A`并且`class B`我映射为`ABMap`. 我还有另一个多对多之间的`class C` 映射`class D`为`CDMap`. 我有一个`ABMapID`带有 @Embeddable 注释的类

```
@Embeddable
public class ABMapID{
   private String aID;
   private String bID;
}
//... setters and getters 
```

所以映射本身在下面

```
 @Entity
 public class ABMap {

 @Id
@AttributeOverrides({
  @AttributeOverride(name = "aID", column = @Column(name = "a_id",insertable = false, updatable = false)),
  @AttributeOverride(name = "bID", column = @Column(name = "b_id", insertable = false,updatable = false))
})
private ABMapID ID;
@ManyToOne(targetEntity = A.class)
@JoinColumn(name = "a_id",insertable = false,updatable = false)
private A a;

@ManyToOne(targetEntity = B.class)
@JoinColumn(name = "b_id", insertable = false, updatable = false)
private B b;
//.... setters and getters  
} 
```

现在假设我们要更改`ABMap`由`ACDMap`aID`ACDMapID`和 CDMapID（它本身由 cID、dID 组成）组成的位置。所以我的新关联 ID 是 ACDMapID

```
 @Embeddable
 public class ACDMapID {
  private String aID;
  private CDMapID cdmapID;

} 

and the entity is mapped like so

@Entity
public class ACDMap {
   @Id
@AttributeOverrides({
  @AttributeOverride(name = "aID", column = @Column(name = "a_id",insertable = false, updatable = false)),
  @AttributeOverride(name = "cdmapID", column = @Column(name = "dcmap_id", insertable = false,updatable = false))
})
  private ACDMapID ID;

} 
```

所以运行这个给我这个错误

> 原因：org.hibernate.AnnotationException：从 ACDMap 引用 CDMap 的外键具有错误的列数。应该是 2

有没有办法进行映射？更可取的是，我想保持 CDMap 原样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T23:12:35.807

我想我会试一试，这是结果（没有尝试过，所以它是纯理论的）。

```
@Entity
public class A
{
    @Id
    private Long id;

    @ManyToMany
    @JoinTable(name = "A_B", joinColumns={
        @JoinColumn(name = "a_id")
    }, inverseJoinColumns = {
        @JoinColumn(name = "b_id")
    })
    private Collection<B> collectionOfB;

    @ManyToMany
    @JoinTable(name = "A_C_D", joinColumns={
        @JoinColumn(name ="a_id")
    }, inverseJoinColumns = {
        @JoinColumn(name = "c_id"),
        @JoinColumn(name = "d_id")
    })
    private Collection<ACD> collectionOfCD;
}

@Entity
public class B
{
    @Id
    private Long id;

    @ManyToMany(mappedBy = "collectionOfB")
    private Collection<A> collectionOfA;
}

@Entity
public class C
{
    @Id
    private Long id;

    @ManyToMany
    @JoinTable(name = "C_D", joinColumns={
        @JoinColumn(name = "c_id")
    }, inverseJoinColumns = {
        @JoinColumn(name = "d_id")
    })
    private Collection<D> collectionOfD;
}

@Entity
public class D
{
    @Id
    private Long id;

    @ManyToMany(mappedBy = "collectionOfD")
    private Collection<C> collectionOfC;
}

@Entity
@Table(name = "C_D")
public class CD
{
    @EmbeddedId
    private CDPK key;

    @MapsId("cId")
    @ManyToOne
    private C c;

    @MapsId("dId")
    @ManyToOne
    private D D;
}

@Embeddable
public class CDPK
{
    @Column(name = "c_id")
    private Long cId;
    @Column(name = "d_id")
    private Long dId;
} 
```

我真的不确定这是否有效，因为有一个`Entity`using the table`C_D`和一个`JoinTable`using the same table。

如果它有效，数据库将如下所示：

```
| A  |       | A_B         |      | B  |
| id |------<| a_id | b_id |>-----| id |
  |
  |
  |     | A_C_D              |
  \----<| a_id | c_id | d_id |
                 \/     \/
                 |      |
                 |      |
    | C  |     | C_D         |      | D  |
    | id |----<| c_id | d_id |>-----| id | 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T10:47:02.570

您似乎不了解 JPA 的概念。您不应该以编程方式处理 ID，而是处理对象。

您需要基于可嵌入对象中的 id 的动态关联。也许这样的构造可以用普通的 Hibernate，但它肯定不在 JPA 中。

JPA 的全部意义在于让您处理对象，而不是数据库关系。一旦你开始混合这两个方面，地狱就会崩溃，所以 JPA 的人决定不支持这种混合，我不能责怪他们。

# parsing - 如何从封闭标签中删除标签

> ID：10977707
> 
> 赞同：0
> 
> 时间：2012-06-11T09:44:09.423
> 
> 标签：parsing, jsoup

```
 <td align="center" nowrap=""><img border="0" src="bus0.gif" /><font style="color:darkblue;">030-

 FP</font><br />將到站&lt;/td> 
```

对于上面的 HTML，我想使用 JSoup 删除 img 和 font 标签以及 font 标签的封闭文本。我该怎么做呢？

谢谢！

编辑：我想删除 img 和 font 标签，所以输出将是

```
 <td align="center" nowrap="">將到站&lt;/td> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T11:55:51.160

```
//Assuming that you have a Document variable called doc
String img = doc.select("img").attr("src");
String font = doc.select("font").text(); 
```

并仔细查看 API。大约需要 10 分钟才能发现这一点。

# objective-c - 禁用空格字符虚拟键盘iOS

> ID：10977710
> 
> 赞同：0
> 
> 时间：2012-06-11T09:44:15.733
> 
> 标签：objective-c, user-interface, keyboard

当用户编辑输入文本时，我想在我的 iOS 应用程序的虚拟键盘上禁用空格字符。

用户应输入**昵称**。所以我想删除所有空格字符。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T09:47:34.873

尝试修改标准键盘需要在未来的 iOS 版本中采取危险的途径进入私有 API 和损坏的应用程序。

我认为对您来说最好的解决方案是实现`textField:shouldChangeCharactersInRange:replacementString:`方法`UITextFieldDelegate`并用空字符串替换空白字符。

一旦实现了这一点，按下空格键就什么也不做。

# visual-studio-2010 - 使用 Visual Studio 2005 提升建筑

> ID：10977714
> 
> 赞同：2
> 
> 时间：2012-06-11T09:44:27.820
> 
> 标签：visual-studio-2010, boost, visual-studio-2005

我正在尝试构建，当我默认运行它时`boost`，我已经安装了两者`visual studio 2005`并`visual studio 2010`安装在我的机器上。我如何强制它建立`bootstrap.bat``visual studio 2010``visual studio 2005`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T18:16:53.147

在 bjam（或 b2）命令行上尝试添加以下“toolset=msvc-8.0”

# java - 使用 jnlp 启动时，Hibernate 在尝试连接到 db 时冻结

> ID：10977715
> 
> 赞同：0
> 
> 时间：2012-06-11T09:44:36.220
> 
> 标签：java, hibernate, jnlp

我创建了一个可运行的 jar，我可以使用“java -jar abc.jar”或使用 jnlp 来启动它：

```
<?xml version="1.0" encoding="utf-8"?>
<jnlp
  spec="6.0+"
  codebase="host"
  href="abc.jnlp">
  <information>
    <title>abc</title>
    <vendor>def</vendor>
    <homepage href=""/>
    <description>def</description>
    <description kind="short">def</description>
    <icon href="images/swingset2.jpg"/>
    <icon kind="splash" href="images/splash.gif"/>
    <association mime-type="application-x/swingset2-file"  extensions="swingset2"/> 
    <shortcut online="false">
      <desktop/>
      <menu submenu="My Corporation Apps"/>
    </shortcut>
  </information>
  <security>
      <all-permissions/>
  </security>
  <resources>
    <j2se version="1.6+" java-vm-args="-esa -Xnoclassgc"/>
    <jar href="lib/abc.jar"/>
  </resources>
  <application-desc />
</jnlp> 
```

但是，只要调用“Persistence.createEntityManagerFactory()”，应用程序就会在使用 jnlp 启动时冻结。“java -jar”启动的应用程序运行良好。

最后的日志输出是：[org.hibernate.connection.DriverManagerConnectionProvider.getConnection(DriverManagerConnectionProvider.java:132)] - 打开新的 JDBC 连接

可能是什么问题呢？我已经在同一台电脑上尝试了这两种方法，甚至 jnlp 和 jar 都位于电脑上而不是远程服务器上，所以连接应该是可能的。

# c# - 将大数据导出到excel时出错

> ID：10977717
> 
> 赞同：0
> 
> 时间：2012-06-11T09:44:40.867
> 
> 标签：c#, asp.net, exception

我正在使用一些代码从 gridview 导出数据。假设如果我的内容很小，它会完美地导出数据。但是网格有一些大量的数据，然后它显示以下消息“抛出了'system.outofmemoryexception'类型的异常。”。请帮我解决这个错误。我无法解决这个问题......

这是我的部分代码：

```
 Sales_GridView.RenderControl(htw);//Error in this line
      Response.Write(sw.ToString());   
      Response.End(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T11:30:27.020

工作表大小为 65,536 行 x 256 列，因此在将数据导出到 Excel 时检查行

# sql-server - 从 SQL-Server 2005 升级到 SQL-Server 2008 时如何更新冲突解决程序

> ID：10977728
> 
> 赞同：6
> 
> 时间：2012-06-11T09:45:22.577
> 
> 标签：sql-server, sql-server-2008, sql-server-2005, merge-replication, resolver

我们最近从 SQL Server 2005 升级到 SQL Server 2008（R2、SP1）。此升级包括一些发布，其中所有表都使用基于“后来获胜”原则的默认冲突解决程序发布。它的智能名称是“Microsoft SQL Server DATETIME (Later Wins) Conflict Resolver”，对应的 dll 文件是 ssrmax.dll。

众所周知，一旦使用冲突解决程序发布表，以后使用该表的所有发布都必须使用相同的冲突解决程序。很公平，但是，当将以前发布的表添加到新发布中，并指定要用于该表的相同冲突解决程序时，我们会收到一条错误消息：

```
use [myDb]
exec sp_addmergearticle 
    @publication = N'myDb_Pub', 
    @article = N'Tbl_blablabla', 
    @source_owner = N'dbo', 
    @source_object = N'Tbl_blablabla', 
    @type = N'table', 
    @description = N'', 
    @creation_script = N'', 
    @pre_creation_cmd = N'drop', 
    @schema_option = 0x000000000C034FD1, 
    @identityrangemanagementoption = N'none', 
    @destination_owner = N'dbo', 
    @force_reinit_subscription = 1, 
    @column_tracking = N'false', 
    @article_resolver = N'Microsoft SQL Server DATETIME (Later Wins) Conflict Resolver', 
    @subset_filterclause = N'', 
    @resolver_info = N'ddmaj', 
    @vertical_partition = N'false', 
    @verify_resolver_signature = 0, 
    @allow_interactive_resolver = N'false', 
    @fast_multicol_updateproc = N'true', 
    @check_permissions = 0, 
    @subscriber_upload_options = 0, 
    @delete_tracking = N'true', 
    @compensate_for_errors = N'false', 
    @stream_blob_columns = N'false', 
    @partition_options = 0
GO 
```

这是我们得到的错误：

```
The article '...' already exists in another publication with a different article resolver. 
```

通过尝试了解机器如何不将相同的冲突解决程序视为“相同的冲突解决程序”，我发现注册表中有两个具有相同名称、不同版本的冲突解决程序：

2005 版：

*   文件 ssrmax.dll，
*   版本 2005.90.4035.0，
*   cls_id D604B4B5-686B-4304-9613-C4F82B527B10

2008 版：

*   文件 ssrmax.dll，
*   版本 2009.100.2500.0，
*   cls_id 77209412-47CF-49AF-A347-DCF7EE481277

我检查了我们的 2008 服务器是否将第二个服务器视为“可用的自定义解析器”（我通过运行 sp_enumcustomresolvers 得到了这个）。问题是这两个参考都在注册表中可用，所以我猜旧出版物确实参考了 2005 版，而新出版物试图参考 2008 版，这确实与以前的不同。

所以问题是：我怎样才能让服务器只考虑这两个版本中的一个，并且（当然）不必删除并重新创建现有的出版物（这将使我们的生活在接下来的两周内变成地狱）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T14:20:06.213

好吧..所以没有人得到答案。但我想我（终于）明白了。你猜怎么着......它在元模型中的某个地方（像往常一样）！

*   向订阅添加项目时，存储过程要使用的新冲突解决程序引用来自 [distribution].[MSmerge_articleresolver] 表
*   但是，对于现有订阅，以前的冲突解决程序引用存储在发布数据库的系统表中，即 [sysmergearticles]、[sysmergeextendedarticlesview] 和 [sysmergepartitioninfoview]

因此，一方面，我们有一个项目最初使用 SQLSERVER 2005 发布，其中发布引用了 2005 冲突解决程序，根据发布数据库元模型。另一方面，机器将尝试将相同的项目添加到新出版物中，这一次默认引用分发数据库中可用的冲突解决程序，这确实与 2005 年的不同......

为了说明这一点，您可以检查以下内容

```
USE distribution
go
SELECT article_resolver, resolver_clsid
  FROM [MSmerge_articleresolver] WHERE article_resolver like '%Later Wins%'
  GO 
```

然后，

```
USE myPublicationDatabase
go
SELECT article_resolver, resolver_clsid
  FROM [sysmergearticles] WHERE article_resolver like '%Later Wins%'
  GO
 SELECT article_resolver, resolver_clsid
  FROM [sysmergeextendedarticlesview] WHERE article_resolver like '%Later Wins%'
  GO
 SELECT article_resolver, resolver_clsid
  FROM [sysmergepartitioninfoview] WHERE article_resolver like '%Later Wins%'
  GO 
```

所以看来我应该更新分发数据库中的引用或发布数据库中的引用。试一试吧！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-02T17:55:38.653

谢谢，在重新发布者上有类似的东西，其中订阅者文章的 CLSID 在服务器上没有意义（使用 Regedit 查找）但是当尝试将文章添加到出版物时会产生上述错误。

使用它试图获取的 clisd 更新了订阅文章的 sysMergeArticles 表的 resolver_clsid 字段

```
{

declare @resolver_clsid  nvarchar(50)

 exec sys.sp_lookupcustomresolver N'Microsoft SQL Server DATETIME (Earlier Wins) Conflict Resolver', @resolver_clsid OUTPUT

 select @resolver_clsid 

} 
```

然后可以添加文章

# android - 工作线程与主线程通信

> ID：10977729
> 
> 赞同：2
> 
> 时间：2012-06-11T09:45:24.947
> 
> 标签：android, multithreading, handler

我正在开发一个 Android 应用程序。

这个应用程序将有一个服务器来启动一个 DatagramSocket 作为服务器。它将等待传入消息。当套接字收到消息时，我将处理它。

要启动 UDP 服务器套接字，我将使用本地服务。该服务将有一个工作线程，我将在其中收听传入的消息。

这是我**未完成**的本地服务实现：

```
public class UDPSocketBackgroundService extends Service
{
    private static final String TAG = "UDPSocketBackgroundService";
    private ThreadGroup myThreads = new ThreadGroup("UDPSocketServiceWorker");
    private Handler mServiceHandler;

    @Override
    public void onCreate()
    {
        super.onCreate();
        Log.v(TAG, "in onCreate()");
    }

    @Override
    public IBinder onBind(Intent arg0)
    {
        try
        {
            new Thread(myThreads, new UDPServerThread("X", 8888)).start();
        }
        catch (IOException e)
        {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        return null;
    }
} 
```

这也是我**未完成**的Worker Thread 实现：

```
public class UDPServerThread extends Thread
{
    private static final int MESSAGE_SIZE = 256;

    protected DatagramSocket socket = null;
    protected boolean end = false;

    public UDPServerThread(String serverName, int port) throws IOException
    {
        super(serverName);
        socket = new DatagramSocket(port);
    }

    public void run()
    {
        while (!end)
        {
            try
            {
                byte[] buf = new byte[MESSAGE_SIZE];

                // Wait an incoming message.
                DatagramPacket packet = new DatagramPacket(buf, buf.length);
                socket.receive(packet);
                // TODO: Notify Service with packet received
            }
            catch (IOException e)
            {
                // TODO Mensaje de error.
                e.printStackTrace();
            }
        }
    }
} 
```

这些类有自己的文件（它们位于不同的文件中）。

这里：

```
socket.receive(packet);
//TODO: Notify Service with packet received 
```

如何通知服务我们已收到数据包？我也想发送该数据包以提供服务。

[这里](http://techtej.blogspot.com.es/2011/02/android-passing-data-between-main.html)有一个关于如何从主线程到工作线程进行通信的示例。但是，我不需要那个，我正在寻找一个关于如何从工作线程到服务进行通信的示例。

我找到了这个[例子](http://codinghard.wordpress.com/2009/05/16/android-thread-messaging/)，但我不太了解它，因为在那个例子中，两个类都在同一个文件中声明它。

如您所见，我是 Android 开发的新手。

如果您知道更好的方法，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T10:23:35.247

创建 UDPServerThread 时，可以传入对 UDPSocketBackgroundService 的引用，然后在收到数据包时调用它的方法（例如 processPacket()）。这个 processPacket() 方法需要使用某种同步。

以下是相关函数的一小段代码摘录：

```
public class UDPSocketBackgroundService extends Service
{
    ....
    @Override
    public IBinder onBind(Intent arg0)
    {
        try
        {
            new Thread(myThreads, new UDPServerThread(this, "X", 8888)).start();
            // Notice we're passing in a ref to this  ^^^
        }
        ...
    }
    public void processPacket(DatagramPacket packet)
    {
        // Do what you need to do here, with proper synchronization
    }
}

public class UDPServerThread extends Thread
{
    private static final int MESSAGE_SIZE = 256;

    protected DatagramSocket socket = null;
    protected boolean end = false;
    protected UDPSocketBackgroundService = null;

    public UDPServerThread(UDPSocketBackgroundService service, String serverName, int port) throws IOException
    {
        super(serverName);
        this.service = service;
        socket = new DatagramSocket(port);
    }

    ...

    public void run()
    {
        while (!end)
        {
            try
            {
                byte[] buf = new byte[MESSAGE_SIZE];

                // Wait an incoming message.
                DatagramPacket packet = new DatagramPacket(buf, buf.length);
                socket.receive(packet);
                service.processPacket(packet);
            }
            ...
        }
        ...
    }
} 
```

请注意，采用这种方法，UDPSocketBackgroundService 现在与 UDPServerThread “紧密耦合”。一旦你得到这个工作，你可以考虑用一个更优雅的设计来重构它，减少耦合，但现在这应该让你开始:)

# c# - 程序在执行时挂起

> ID：10977746
> 
> 赞同：0
> 
> 时间：2012-06-11T09:46:38.223
> 
> 标签：c#, algorithm, console

我在执行程序时遇到问题，然后在执行过程中挂起。我基本上想知道是什么原因造成的。

```
for (long i = maxNumber; i > 2; i--)
{
    IsPrime = true;
    for (long g = 2; g < i; g++)
    {
        long temp = i % g;
        if (temp == 0)
        {
            IsPrime = false;                            
            break;
        }
    }
    if (IsPrime == true)
    {
        largestPrimeFactor = i;                        
        break;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T09:51:22.050

该算法可能不会挂起。根据它的值，`maxnumber`它可能需要**很**长时间才能通过循环。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T09:59:57.020

如果我尝试正确，您的代码正在尝试找到 0 和 maxNumber 之间的最大素数。使用 Eratosthenes 筛法找出介于 0 和 maxNumber 平方根之间的所有素数。然后，您可以从 maxNumber 迭代到 0，以获得一个不能被您刚刚找到的所有素数整除的数字。

编辑：试过这个

```
 var sqrtMax = (int)Math.Sqrt(maxNumber);
            var primeCandidates = Enumerable.Range(2, sqrtMax-1)
             .ToDictionary(number => number, isComposite => false);

            foreach (var number in primeCandidates.Keys.ToArray())
            {
                if (primeCandidates[number])
                {
                    continue;
                }
                Parallel.ForEach(Enumerable.Range(2, sqrtMax / number - 1).Select(times => number * times),multiples=>
                    primeCandidates[multiples] = true);
            }
            var primeList = primeCandidates.Where(number => !number.Value).Select(pair=>pair.Key).ToArray();
            var maxPrime = maxNumber;

            while (primeList.AsParallel().Any(prime=> maxPrime%prime==0))
            {
                maxPrime--;
            } 
```

对于 maxNumber = 600881475134，它在不到 3 秒的时间内找到 maxPrime（并行化是因为我认为这需要很长时间）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T10:34:13.710

您的程序“挂起”，因为您发布的循环正在使用它的线程。这意味着在循环完成之前您不能执行任何其他命令。
如果您想防止这种行为，请改用不同的线程来执行您的代码。

不同的算法可能会提高性能，但最终您仍会遇到“挂起”，具体取决于执行所需的时间。

# linux - 从命令行将图像复制到剪贴板

> ID：10977748
> 
> 赞同：7
> 
> 时间：2012-06-11T09:46:42.063
> 
> 标签：linux, bash, imagemagick, screenshot, clipboard

我正在使用 ImageMagick 将屏幕的一部分复制到一个临时文件（something.png）中。我现在想直接从命令行将此文件的内容粘贴到剪贴板中。

到目前为止，我的脚本如下所示：

```
#!/bin/bash

TMPFILE=$(mktemp)
FORMAT='.PNG'
SCREENSHOT_FILE=${TMPFILE}${FORMAT}

mv "$TMPFILE" "$SCREENSHOT_FILE"
import "$SCREENSHOT_FILE"
cat "$SCREENSHOT_FILE" | parcellite
rm "$SCREENSHOT_FILE" 
```

Parcellite 非常适合命令行复制和粘贴，但我无法让它与图像一起使用。我认为这不是parcellite的特征。那我怎么能这样做呢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-12T13:53:56.023

看看[`xclip`](http://linux.die.net/man/1/xclip)，尤其是`xclip-copyfile`和`xclip-pastefile`。

```
 xclip -i < yourfile.png 
```

# asp.net-mvc-3 - Asp.net mvc3 应用程序在浏览器中显示项目目录内容而不是主页

> ID：10977752
> 
> 赞同：0
> 
> 时间：2012-06-11T09:46:48.253
> 
> 标签：asp.net-mvc-3, configuration

我已将 Asp.Net MVC3 应用程序从另一个来源复制到我的开发机器。现在我想运行应用程序，但是当我运行应用程序时，浏览器会显示项目目录内容而不是应用程序主页。我想在 IIS 配置中有一些错误，但我不知道什么是不正确的。那么，有什么问题呢？
UPD：我确实发现设置窗口中的“使用本地 IIS Web 服务器”单选按钮被选中（而不是默认的“使用 Visual Studio 开发服务器”）。М可能是这个选项影响吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T10:04:20.457

您是否将 IIS 中的文件夹配置为应用程序？在我看来，您刚刚克隆了一个文件夹并期望它“正常工作”。

右键单击 IIS 中的文件夹，然后选择“转换为应用程序”。在出现的对话框中，您需要将应用程序池更改为“ASP .Net v4”。

一旦你完成了它应该工作。

# ruby-on-rails - 如何翻译无表模型的属性？

> ID：10977761
> 
> 赞同：2
> 
> 时间：2012-06-11T09:47:26.587
> 
> 标签：ruby-on-rails, internationalization, active-attr

[RailsCast #326 ActiveAttr](http://railscasts.com/episodes/326-activeattr)解释了如何创建无表模型。

[正如rails docs](http://guides.rubyonrails.org/i18n.html#translations-for-active-record-models)中对基于表格的属性所解释的那样，如何翻译属性？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T15:45:36.243

**而不是**通过 ActiveRecord（例如`de.activerecord.attributes.message.subject: Betreff`），必须引用 ActiveModel（例如`de.activemodel.attributes.message.subject: Betreff`）。

[——斯蒂芬默多克在此评论](https://stackoverflow.com/questions/3689730/contact-us-functionality-in-rails-3/3691310#comment14336116_3691310)中概述

# .net - reduce 和 reduceBack 有什么区别吗

> ID：10977762
> 
> 赞同：5
> 
> 时间：2012-06-11T09:47:29.233
> 
> 标签：.net, f#

我正在从 msdn 学习 f# 并查看并尝试 reduce 和 reduce ，我找不到任何区别，签名是相同的

`('T -> 'T -> 'T) -> 'T list -> 'T`

并且它们都在空列表上抛出相同的错误，那么为什么有 2 个，应该有一些区别

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-11T10:12:55.107

其他人已经解释了差异 - 他们以不同的顺序减少元素。

对于可以与`reduce`or一起使用的大多数操作，`reduceBack`差异实际上并不重要。用更数学的术语来说，如果您的操作是[*关联*](http://en.wikipedia.org/wiki/Associative_property)的（例如数字操作、max、min 或 sum 函数、列表连接等），那么两者的行为相同。

您可以很好地看到差异的一个示例是构建一棵树，因为这准确地显示了评估的工作原理：

```
type Tree = 
  | Leaf of int
  | Node of Tree * Tree

[ for n in 0 .. 3 -> Leaf n]
|> List.reduce (fun a b -> Node(a, b))

[ for n in 0 .. 3 -> Leaf n]
|> List.reduceBack (fun a b -> Node(a, b)) 
```

这是你得到的两棵树（但请注意，如果你将它们展平，那么你会得到相同的列表！）

```
 reduce        reduceBack
-------------------------------------
tree:       /\              /\
           /\ 3            0 /\
          /\ 2              1 /\
         0  1                2  3
-------------------------------------
flat:    0 1 2 3          0 1 2 3 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-11T09:54:51.903

请查看 MSDN 文档，[reduce](http://msdn.microsoft.com/en-us/library/ee370239)和[reduceBack](http://msdn.microsoft.com/en-us/library/ee353624)。

因为`reduce`它指定：

> 如果输入函数是 f 并且元素是 i0...iN，那么它计算 f (... (f i0 i1) i2 ...) iN。

因为`reduceBack`它指定：

> 如果输入函数为 f 且元素为 i0...iN，则此函数计算 f i0 (...(f iN-1 iN))。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-11T10:11:27.933

它们的主要区别在于评估顺序。虽然`reduce`从第一个元素到最后一个元素，`reduceBack`但顺序相反。请注意，当前元素和累加器之间的顺序也颠倒了`reduceBack`。

一个示范性的例子可能是：

```
let last xs = List.reduce (fun _ x -> x) xs   
let first xs = List.reduceBack (fun x _ -> x) xs 
```

# emacs - Emacs DNS 查询

> ID：10977763
> 
> 赞同：1
> 
> 时间：2012-06-11T09:47:29.307
> 
> 标签：emacs, dns

我注意到，当我的网络出现故障时，Emacs 的启动速度要慢得多。跟踪它，它显示了 emacs 如何尝试解析主机名：S

任何人都知道如何禁用此功能？为什么emacs需要主机名？

此外，如果某些模块使用 dns 或任何网络查询，我会尽量减少 .emacs 并仔细检查。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T10:51:57.133

[最近在这里](http://www.linuxquestions.org/questions/linux-software-2/emacs-freezes-doing-dns-lookup-877625/)讨论了一个非常相似的问题。

# objective-c - 在 UIImageView 的图像上方绘制贝塞尔曲线

> ID：10977765
> 
> 赞同：2
> 
> 时间：2012-06-11T09:47:35.860
> 
> 标签：objective-c, ios, cocoa-touch, ipad, uibezierpath

如何在 UIImageView 的图像上方绘制贝塞尔曲线。我在图像视图的角落使用 UIBezierCurve 对 UIImageView 进行子类化并绘制圆圈。但是，一旦我将图像放在 UIImageView 中，圆圈的内部部分就会被图像重叠。那么有没有什么解决方案可以让我在 uiimageview 的 UIimage 上绘制 UIBezier 路径？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T10:32:20.543

您可以尝试使用实例方法对简单的子类进行子类化`UIView`并自己绘制图像。它应该看起来像这样：`drawInRect:``UIImage`

```
- (void)drawRect:(CGRect)dirtyRect {
    // note you can get image from anywhere
    UIImage *image = [UIImage imageNamed:@"MyImage"];

    [image drawInRect:self.bounds];

    // now that image is drawn, everything
    // past this point will be drawn on top of it
    ...
} 
```

# knockout.js - 使用 Knockout，如何根据可观察值的任意值触发函数？

> ID：10977768
> 
> 赞同：2
> 
> 时间：2012-06-11T09:47:44.390
> 
> 标签：knockout.js

我是 Knockout 的新手，尽管我以前使用过可观察模式库，但我不知道如何设置函数来观察 ViewModel 中的值并在该值更改时触发。

情况是这样的：当下拉列表的值为“其他”时，我希望启用模式弹出窗口。我正在使用 Twitter 引导程序“下拉列表”（实际上是一个锚点列表），每个锚点都`click`绑定到 ViewModel 上的一个名为`setDetail`. `setDetail`设置名为 的可观察属性的值`problem`。

我的想法是放一个函数来观察的值，`problem`以保持逻辑分离。有没有办法做到这一点，或者我应该把代码放在`setDetail`函数中？

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-11T09:58:14.760

是的，您可以显式订阅 observable。

文档[可在此处获得](http://knockoutjs.com/documentation/observables.html)，搜索 Explicitly subscribing to observables。

你会做类似的事情：

```
function ViewModel() {
  this.problem = ko.observable();
  this.problem.subscribe(function(newValue) {
    if (newValue === 'other') {
      // trigger modal
    }
  });
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T10:11:51.973

给定HTML，这是一种方法

```
<div> 
    <select data-bind="options: dropdownOptions, selectedOptions: problem" ></select>        
</div> 
```

​</p>

和javascript..

```
var ViewModel = function() {
    var self = this;
    this.problem = ko.observable();
    this.dropdownOptions = ko.observableArray(["1","2","3","other"]);                        

    this.problem.subscribe((function(selectedOption) {
        if(selectedOption == "other") {
            alert(self.problem());            
        }
    }));
}

ko.applyBindings(new ViewModel());
​ 
```

或小提琴：http: [//jsfiddle.net/keith_nicholas/pb5ja/2/](http://jsfiddle.net/keith_nicholas/pb5ja/2/)

# iphone - 数组中两点之间的最大距离

> ID：10977769
> 
> 赞同：2
> 
> 时间：2012-06-11T09:47:48.637
> 
> 标签：iphone, objective-c, ios, cocoa-touch

假设我有一个带有 CGPoints 的数组（用**NSValues**包装**）**。我怎样才能得到彼此最远的两个点。我的意思是这**两点之间的距离最大**？我可以每两点检查一次，但这看起来效率不高。有没有更好的方法来做到这一点？

感谢帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-11T10:00:09.233

如果没有太多点（最多 1000，但如果是密集的，大约 100），请使用朴素的蛮力方法 O(n ² )。

我还没有阅读详细信息，但最大距离可能可以用[凸包算法](http://en.wikipedia.org/wiki/Convex_hull)+[旋转卡尺](http://en.wikipedia.org/wiki/Rotating_calipers)在 O(nlog n) 中计算。

# sql - 更改列类型而不丢失数据

> ID：10977771
> 
> 赞同：26
> 
> 时间：2012-06-11T09:48:02.613
> 
> 标签：sql, database, sql-server-2008, column-types

我正在研究一个 SQL 数据库，我有一个名为“价格”的列。创建数据库时，将“价格”列设置为`NVARCHAR`我需要将其类型更改为`decimal(18, 2)`不丢失数据库中的数据。这应该由 SQL 脚本完成

我想创建一个新列，将数据移动到它，删除旧列，然后重命名新创建的列。

有人可以帮我举个例子来说明如何做到这一点吗？SQL中还有一个函数可以将字符串解析为十进制吗？

谢谢

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-06-11T09:51:57.483

您不需要添加两次新列，只需在更新新列后删除旧列即可：

```
ALTER TABLE table_name ADD new_column_name decimal(18,2)

update table_name
set new_column_name = convert(decimal(18,2), old_column_name)

ALTER TABLE table_name DROP COLUMN old_column_name 
```

请注意，如果`old_column_name`不是数字，则`convert`可能会失败。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-11T12:17:41.837

就像是

```
Alter Table [MyTable] Add Column NewPrice decimal(18,2) null

Then

Update [MyTable] Set NewPrice = Convert(decimal(18,2),[Price]) Where Price is not null 
```

如果上述方法失败，那么您需要加强它以处理有趣的事情

一旦你很高兴删除旧列并使用 Alter Table 重命名新列`sp_rename`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-04-10T05:46:19.590

如果您只想更改列的数据类型，您可以这样做=>

```
Alter Table YourTableName
Alter Column ColumnName DataType 
```

我已经在 SQL Server 2012 及其工作上对此进行了测试。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-11T09:54:08.113

您可以使用 Management Studio 直观地进行这些更改。然后，使用“生成更改脚本”按钮来获取您所做更改的脚本。确保在原始 ddbb 的副本中进行所有测试，以防出现问题。

# javascript - 获取动态字符串的属性

> ID：10977781
> 
> 赞同：0
> 
> 时间：2012-06-11T09:49:07.720
> 
> 标签：javascript, jquery, dom, attributes

我有这个容器：

```
 <Div id="ListContainer"> 
```

我将这些数据附加到它：

```
 ' <a class="lesson" subjectID="'+sbj_ID+'"><b>
  <span class="lesson_subject">' + sbj_Name + '</span></b></a> '; 
```

我想将 sbj_ID & sbj_Name 的值放入一个变量中。

```
 localStorage['SubjectID']= "value of sbj_ID";
    localStorage['SubjectName']="value of sbj_Name"; 
```

但我无法访问它们。

我试过 ：

```
 $('#ListContainer').find('.lesson').attr('subjectID')
     $('#ListContainer .lesson').children[0].getAttribute('SubjectID')
     $('#ListContainer .lesson').children[2].innerHTML; 
```

但他们没有工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T09:53:35.623

我不知道您是如何附加字符串的，但以下是一个工作示例：

```
var sbj_ID = 3;
var sbj_Name = "test";

var str = '<a class="lesson" subjectID="'+sbj_ID+'"><b><span class="lesson_subject">' + sbj_Name + '</span></b></a>';

$("#ListContainer").append(str);

alert($('#ListContainer').find('.lesson').attr('subjectID')); 
```

[**-- 看演示 --**](http://jsfiddle.net/8KkUc/)

我也不确定如何`LocalStorage`使用，但您应该将变量设置为值，而不是您使用的字符串：

```
localStorage['SubjectID']= sbj_ID;
localStorage['SubjectName']= sbj_Name; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T09:52:08.580

试试这个

```
localStorage['SubjectID']= $('.lesson').attr('subjectID');

localStorage['SubjectName']=$('.lesson_subject').text(); 
```

或者

```
 localStorage['SubjectName']=$('.lesson_subject').html(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T09:56:40.717

这应该工作

```
localStorage['SubjectID'] = $('.lesson').attr('subjectID');
localStorage['SubjectName'] = $('.lesson_subject').text(); 
```

# c++ - 如何使用格式说明符创建字符串？

> ID：10977782
> 
> 赞同：2
> 
> 时间：2012-06-11T09:49:15.600
> 
> 标签：c++, string

我想创建一个公共 api，它将一个字符串作为参数，并将这个字符串放在我在该 Api 中的另一个字符串中放置格式说明符的位置。

```
e.g. string PrintMyMessage( const string& currentValAsString)
     {
          string s1("Current value is %s",currentValAsString);
          return s1;
     } 
```

目前我正在关注构建错误。

```
1>d:\extra\creatingstrwithspecifier\creatingstrwithspecifier\main.cxx(8): error C2664: 'std::basic_string<_Elem,_Traits,_Ax>::basic_string(const std::basic_string<_Elem,_Traits,_Ax> &,unsigned int,unsigned int)' : cannot convert parameter 2 from 'const std::string' to 'unsigned int'
1>          with
1>          [
1>              _Elem=char,
1>              _Traits=std::char_traits<char>,
1>              _Ax=std::allocator<char>
1>          ]
1>          No user-defined-conversion operator available that can perform this conversion, or the operator cannot be called 
```

我只是想知道什么是完成这项任务的更好方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T09:56:54.540

正如在[这个相当相似的问题](https://stackoverflow.com/q/10410023/1025391)中所讨论的那样，您可以使用[Boost 格式库](http://www.boost.org/doc/libs/1_49_0/libs/format/doc/format.html)。例如：

```
std::string PrintMyMessage( const string& currentValAsString )
{
  boost::format fmt = boost::format("Current value is %s") % currentValAsString; 
  // note that you could directly use cout:
  //std::cout << boost::format("Current value is %s") % currentValAsString;
  return fmt.str();
} 
```

在另一个问题的答案中，您还可以找到其他方法，例如使用字符串流、snprintf 或字符串连接。

这是一个完整的通用示例：

```
#include <string>
#include <iostream>
#include <boost/format.hpp>

std::string greet(std::string const & someone) {
    boost::format fmt = boost::format("Hello %s!") % someone;
    return fmt.str();
}

int main() {
    std::cout << greet("World") << "\n";
} 
```

或者，如果您不能或不想使用 Boost：

```
#include <iostream>
#include <string>
#include <vector>
#include <cstdio>

std::string greet(std::string const & someone) {
    const char fmt[] = "Hello %s!";
    std::vector<char> buf(sizeof(fmt)+someone.length());
    std::snprintf(&buf[0], buf.size(), fmt, someone.c_str());
    return &buf[0];
}

int main() {
    std::cout << greet("World") << "\n";
} 
```

这两个示例都产生以下输出：

```
$ g++ test.cc && ./a.out
Hello World! 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T10:01:52.033

```
string PrintMyMessage( const string& currentValAsString)
{
    char buff[100];
    sprintf(buff, "Current value is %s", currentValAsString.c_str());

    return buff;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T10:04:54.297

```
string PrintMyMessage(const char* fmt, ...)
{
    char buf[1024];
    sprintf(buf, "Current value is ");

    va_list ap;
    va_start(ap, fmt);
    vsprintf(buf + strlen(buf), fmt, ap);

    return buf;
}

string str = PrintMyMessage("Port is %d, IP is :%s", 80, "192.168.0.1"); 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-06-11T10:04:10.940

你可以简单地写这个：

```
return  "Current value is " + currentValAsString; 
```

# asp.net - 如何在 aspx 页面中生成 SSRS RDL 报告文件？

> ID：10977783
> 
> 赞同：0
> 
> 时间：2012-06-11T09:49:21.483
> 
> 标签：asp.net, visual-studio-2010, reporting-services

我想在 aspx 页面中显示 SSRS 报告文件 rdl 文件。我在我创建`web application`的相同解决方案中构建了一个，`Report server project`现在我想在我的 Web 应用程序 .aspx 页面中显示此报表服务器项目的 rdl 文件。如何在 aspx 页面上显示此 rdl 文件以及如何将参数从 aspx 页面传递到此 rdl 报告？

我不需要将 rdl 转换为 rdlc。

我正在使用 VS2010 和 sql server 2012 报告服务。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T21:12:45.843

如果您不“需要”（想要？）使用 RDLC，则需要设置[ReportViewer](http://msdn.microsoft.com/en-us/library/ms251771) for [Remote Processing](http://msdn.microsoft.com/en-us/library/ms252075.aspx)。您需要在报表服务器上部署和运行报表，您应该可以通过 Web 界面进行检查。

# mysql - 如何在mysql中特定时间后获得X小时？

> ID：10977786
> 
> 赞同：0
> 
> 时间：2012-06-11T09:49:38.977
> 
> 标签：mysql, loops

例如，给定 1339372800，即星期一，2012 年 6 月 11 日 00:00:00 GMT，我想得到接下来的 X 小时，包括 1339372800。所以接下来的 3 小时，结果将是

```
+------------+
| 小时 |
+------------+
| 1339372800 |
| 1339376400 |
| 1339380000 |
+------------+

```

我想我需要创建一个循环，但我不知道如何从那开始。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T09:58:40.517

您可以使用数字[表在 mysql 中创建一个“数字表”，](https://stackoverflow.com/q/9751318/11963)其中包含相当长的时间，并查询：

```
SELECT hour
FROM hours
WHERE hour >= 1339372800
ORDER BY hour ASC
LIMIT 3 
```

这使得查询变得非常容易，并且表也不应该太大。（10 年内少于 90k 行。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T09:59:25.133

尝试：

```
SELECT * 
FROM table
WHERE 
hours between 1339372800 and DATE_SUB(1339372800, INTERVAL 3 HOUR) 
```

# gtk - GtkButton 与 Image- 左对齐

> ID：10977788
> 
> 赞同：0
> 
> 时间：2012-06-11T09:50:00.177
> 
> 标签：gtk

我正在创建一个带有图像的按钮。我想让它左对齐并且按钮边缘没有间隙。然而，尽管我将按钮对齐到文本的左侧，但图像和按钮边框之间存在一个小的“固定”间隙。我怎样才能将差距归零？

这是代码：

```
 GtkWidget *button;
  GtkWidget *buttonImage;

  GtkSettings *default_settings = gtk_settings_get_default();
  g_object_set(default_settings, "gtk-button-images", TRUE, NULL);

  buttonImage = gtk_image_new();
  gtk_image_set_from_file(GTK_IMAGE(buttonImage),"icon.jpg");

  button= gtk_button_new_with_label("Click");
  gtk_button_set_relief ((GtkButton *)button, GTK_RELIEF_NONE);
  gtk_button_set_image((GtkButton *)button, buttonImage);
  gtk_button_set_image_position((GtkButton *)button, GTK_POS_LEFT); 
```

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T03:36:48.770

主题可能会添加一些填充和/或边框空间。这变得复杂，因为不同的用户可能出于不同的原因有不同的主题。因此，保留这些特定于主题的设置通常是一个好主意。话虽如此，在某些情况下您需要覆盖这些设置。例如，一个文本编辑器的选项卡有一个 GtkButton 和一个 GTK_STOCK_CLOSE 按钮。此按钮需要删除所有填充和边框，以便它只是其图像的大小。您可以根据需要调整此技术。

在 GTK+3 中，这可以通过 GtkCssProvider 和 GtkStyleContext 完成。

```
 const gchar data[] = * { "
    "-GtkButton-default-border : 0; "
    "-GtkButton-default-outside-border : 0; "
    "-GtkButton-inner-border: 0; "
    "-GtkWidget-focus-line-width : 0; "
    "-GtkWidget-focus-padding : 0; "
    "padding: 0; "
    "}";

context = gtk_widget_get_style_context (GTK_WIDGET(button));
provider = gtk_css_provider_new ();
gtk_css_provider_load_from_data (provider, data, -1, NULL);
gtk_style_context_add_provider (context,
                                GTK_STYLE_PROVIDER (provider),
                                GTK_STYLE_PROVIDER_PRIORITY_APPLICATION); 
```

该代码可能不太正确，但它应该为您指明正确的方向。我只在 Python 中实现了这种技术。

如果您正在为 GTK+ 2 进行开发，我以前这样做的方法是`gtk_widget_set_size_request()`在回调函数中调用`GtkButton`.

# typo3 - 将内容元素的标题设置为页面标题

> ID：10977791
> 
> 赞同：0
> 
> 时间：2012-06-11T09:50:06.463
> 
> 标签：typo3, typoscript

我有一些子页面，其中在 HTML H1 中有一个带有标题的单个内容元素。

如何将此内容元素的标题设置为页面标题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T13:03:17.570

为此，我们使用了印刷标记。只需在您的页面模板中定义它，然后用这样的标题填充它：

```
PAGE-TITLE = TEXT
PAGE-TITLE.field = nav_title // subtitle // title 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T16:14:34.647

而不是依赖于内容元素（CE）（*事实上*可能存在或不存在并且可以设置任何标题或不），最好......使用迈克尔的建议并在所选分支上使用修改后的模板，并`###PAGE-TITLE###`在之前放置标记您在 ContentElements 中渲染的标记。

在这种情况下，您无需修改`<title>`​​标签的创建方式，并且您可以确定该标题始终存在，并且您可以确定始终存在某个标题。

当然，您需要将第一个 CE 的默认标头设置为`hidden`（或将其留空），但是您可以使用 PageTS 对整个分支执行此操作。

# asp.net - 当 web.config 中的 DEBUG=FALSE 时，在调试模式下编译的 .Net 程序集（类库）会降低 ASP.NET 的性能

> ID：10977792
> 
> 赞同：3
> 
> 时间：2012-06-11T09:50:07.880
> 
> 标签：asp.net

我已阅读 Scott Guthie 的文章 [Don't run production ASP.NET Applications with debug=”true” enabled](http://weblogs.asp.net/scottgu/archive/2006/04/11/Don_1920_t-run-production-ASP.NET-Applications-with-debug_3D001D20_true_1D20_-enabled.aspx)但我仍然不确定我们是否在调试模式下编译我们的 asp.net 网站引用的类库（并且在Bin 目录）这会影响性能还是将它们重新编译为非调试？我们在 web.config 中设置了 DEBUG=FALSE。

谢谢理查德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T09:53:35.930

编译为调试的程序集将在其中包含调试工具。它将比发布版本更慢且更大。您的 ASP.NET 站点无法控制程序集本身。

# android - 如何从 Fragment 收集价值/数据

> ID：10977797
> 
> 赞同：1
> 
> 时间：2012-06-11T09:50:18.910
> 
> 标签：android, android-fragments

ok 直截了当，我正在使用 ViewPager，而且我有多个片段。每个片段都有自己的形式

```
+=================+
|    Fragment1    |
+=================+
| Name (EditText) |
===================
| ID No (EditText)|
===================

+=================+ 
|    Fragment2    |
+=================+ 
| Name (EditText) |
=================== 
| ID No (EditText)|
=================== 
```

我在 FragmentActivity 中有一个按钮，而不是在 Fragment 中。如何将所有这些 EditText 添加/收集到来自 fragmentActivity 的列表中？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T12:04:24.450

给每个片段一个唯一的标签，例如片段1有标签“frag1”，片段2有标签“frag2”，在你的FragmentActivity中，你可以使用它们的标签访问片段，如下所示：

```
Fragment1 fragment1 = (Fragment1)getFragmentManager().findFragmentByTag("frag1");
Fragment2 fragment2  = (Fragment2)getFragmentManager().findFragmentByTag("frag2"); 
```

现在您可以访问 fragment1/fragment2 中的编辑文本，

```
EditText editText1 = (EditText) fragment1.getView().findViewById(R.id.editText); 
```

然后，你可以得到文本，editText1.getText();

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T12:09:28.070

另一种可能性是，如果您不想使用 getView 和 findViewById 并且（我真的不知道哪个性能更高，如果有人对此有所了解，我很乐意对其进行解释:)）：

```
class MyFirstFragment extends Fragment { 
    ... 
    private EditText someEditText; 
    ...
    public Object doSomethingAndGetMeSomething() {
        return somePreviouslyDefinedData;
    }
} 
```

您只需将标签收到的片段直接转换为这个 java 类：

```
MyFirstFragment firstFrag = (MyFirstFragment) getFragmentManager().findFragmentByTag("frag1"); 
```

并调用你定义的一些函数，让它执行你想要的任何任务。

不确定哪种方式在性能方面更好，因为在这种方式中，您在创建视图时必须保持对视图的引用，而在另一种方式中，您只需搜索它..？

# opencv - 如何找到增强现实的相机矩阵？

> ID：10977800
> 
> 赞同：7
> 
> 时间：2012-06-11T09:50:29.830
> 
> 标签：opencv, 3d, augmented-reality, pose-estimation

我想在 x,y,z 米 wrt 相机上增加一个虚拟对象。OpenCV 具有相机校准功能，但我不明白我如何准确地给出以米为单位的坐标

我尝试在 Unity 中模拟相机，但没有得到预期的结果。

我将投影矩阵设置如下，并在 z = 2.415 + 0.5 创建一个单位立方体。哪里 2.415 是眼睛和投影平面之间的距离（针孔相机模型） 由于立方体的面位于前剪切平面并且它的尺寸是单位不应该覆盖整个视口吗？

```
 Matrix4x4 m = new Matrix4x4();
    m[0, 0] = 1;
    m[0, 1] = 0;
    m[0, 2] = 0;
    m[0, 3] = 0;

    m[1, 0] = 0;
    m[1, 1] = 1;
    m[1, 2] = 0;
    m[1, 3] = 0;

m[2, 0] = 0;
    m[2, 1] = 0;
    m[2, 2] = -0.01f;
    m[2, 3] = 0;

    m[3, 0] = 0;
    m[3, 1] = 0;
    m[3, 2] = -2.415f;
    m[3, 3] = 0; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-11T13:29:47.770

校准的全局比例（即 3D 空间坐标的测量单位）由您使用的校准对象的几何形状决定。例如，当您在 OpenCV 中使用平面棋盘的图像进行校准时，校准过程的输入是 3D 点 P 的对应对 (P, p) 及其图像 p，即 3D 的 (X, Y, Z) 坐标点用毫米、厘米、英寸、英里等表示，具体取决于您使用的目标尺寸（以及成像它的光学器件），图像的 2D 坐标以像素为单位。校准例程的输出是以这些度量单位表示的 3D 坐标“转换”为像素的参数集（投影矩阵 P 的分量和非线性失真参数 k）。

如果您不知道（或不想使用）校准目标的实际尺寸，您可以捏造它们但保持它们的比率不变（例如，即使真实长度，正方形仍然是正方形它的一面可能是未知的）。在这种情况下，您的校准将在未知的全球范围内确定。这实际上是常见的情况：在大多数虚拟现实应用程序中，您并不真正关心全局范围是多少，只要结果在图像中看起来正确即可。

例如，如果您想在安吉丽娜·朱莉的视频中添加一对更蓬松的 3D 嘴唇，并将它们与原始视频合成，以使全新的假嘴唇保持附着并在她的脸上看起来“自然”，您只需要重新缩放假嘴唇的 3D 模型，使其与嘴唇图像正确重叠。模型是离渲染合成的 CG 相机 1 码还是 1 英里，这完全无关紧要。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-13T19:32:27.123

要找到增强对象，您需要找到相机姿势和方向。这与寻找相机外在因素相同。您还必须首先计算相机内在函数（称为 calibraiton）。

OpenCV 允许您完成所有这些工作，但并非易事，它需要您自己完成。我给你一个线索，你首先需要在场景中识别出你知道它看起来如何的东西，这样你就可以通过分析这个物体来计算相机的位姿，称之为标记。您可以从典型的基准开始，它们很容易被发现。

看看这个[线程](https://stackoverflow.com/q/9320479/1524433)。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-14T11:35:01.457

我最终手动测量了视野。了解 FOV 后，您可以轻松创建投影矩阵。无需担心单位，因为最终投影的形式为（ X*d/Z, Y*d/Z ）。无论 X、Y、Z 的单位是什么，X/Z 的比率都保持不变。

# netty - 当使用 netty 的多连接时，帧解码器可能会抛出 IndexOutOfBoundsException

> ID：10977802
> 
> 赞同：0
> 
> 时间：2012-06-11T09:50:38.253
> 
> 标签：netty, indexoutofboundsexception

当我使用 netty 的多连接时。服务器的帧解码器可能会抛出 IndexOutOfBoundsException。我检查一下。是否有必要将“ChannelBuffer cumulation”更改为 threadlocal 参数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T10:53:35.627

您必须使用新的 FrameDecoder ber 通道实例，因为它没有标记为 @Sharable。

所以只需使用这样的东西：

```
public void MyChannelPipelineFactory implements ChannelPipelineFactory {
    public ChannelPipeline getPipeline() {
        ChannelPipeline cp = ..
        cp.addLast("framer", new MyFrameDecoderSubClass());
        ..
        ..
        return cp;
    }
} 
```

# android - Android Blackmart 保护

> ID：10977806
> 
> 赞同：-3
> 
> 时间：2012-06-11T09:50:47.290
> 
> 标签：android, protection

什么是黑市？似乎它是 Android 的替代市场商店，您可以在其中免费安装付费应用程序。

如何保护我的应用程序免受 Blackmart 的侵害？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T09:57:50.423

1.  使用特定于市场的许可标准来确保用户购买了您的应用。如果它没有被许可，那么你可以删除它。
    [Android 许可库](http://developer.android.com/guide/market/licensing/index.html)
    ![您的应用程序通过许可证验证库和 Google Play 客户端启动许可证检查，该客户端处理与 Google Play 服务器的通信。](../Images/5283ca1d114c5b09a4da7a7ae8e5f384.png)
2.  构建您自己的身份验证过程，您可以在其中为每个用户分配他/她自己的 ID，并根据您的服务器验证它们。这需要先注册。
    参考：[https ://developers.google.com/accounts/docs/MobileApps](https://developers.google.com/accounts/docs/MobileApps)
3.  如果您对第三方登录没问题，请使用 Open-id，例如 Google/Facebook/Twitter。 ![Google Open Id 图](../Images/17701fb7b186dbce8e7208f798ab7388.png)

参考：[https ://developers.google.com/accounts/docs/OpenID](https://developers.google.com/accounts/docs/OpenID)

# php - 如何拼接数组以在特定位置插入数组？

> ID：10977812
> 
> 赞同：11
> 
> 时间：2012-06-11T09:51:29.367
> 
> 标签：php, array-splice

```
$custom = Array(
            Array(
                'name'  =>  $name1,
                'url'   =>  $url1
            ),
            Array(
                'name'  =>  $name_a,
                'url'   =>  $url_a
            )
        ); 
```

我正在尝试将数组与以下内容拼接：

```
$bread_elem = array('name' => 'Golf', 'url' => $slug . $parent_slug);
array_splice($custom, 1, 0, $bread_elem); 
```

我希望我的数组成为以下内容，并将值`$sale_bread_elem`插入数组中的第一个位置。我看不出我做错了什么。

```
$custom = Array(
            Array(
                'name'  =>  $name1,
                'url'   =>  $url1
            ),
            Array(
                'name'  =>  'Golf',
                'url'   =>  $slug . $parent_slug
            ),
            Array(
                'name'  =>  $name_a,
                'url'   =>  $url_a
            )
        ); 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-06-11T09:53:04.777

[`array_splice`^(*Docs*)](http://php.net/array_splice)需要插入一个*元素数组*。所以这个电话实际上应该是

```
array_splice($custom, 1, 0, array($bread_elem)); 
```

# html-table - 使用 scriptaculous 在表格之间拖动表格行

> ID：10977813
> 
> 赞同：0
> 
> 时间：2012-06-11T09:51:35.510
> 
> 标签：html-table, drag-and-drop, scriptaculous

我在一个页面中有几个类似的表格，并且使用 scriptaculous，我想将一行从一个表格拖放到另一个表格。我已经可以用代码做到这一点：

```
new Draggable('some-id'). 
```

其中 'some-id' 是表行 ID。

但是，没有可见的拖动，这对用户交互不利......

将相同的代码应用于简单的 div 效果很好，这让我相信这是拖动表格行的问题。

编辑：

例如：

```
<table>
<tr id="drag_tr"><td>Drag</td></tr>
</table>

<div id="drag_div">some content</div>

<script type="text/javascript">
new Draggable("drag_tr")
new Draggable("drag_div")
</script> 
```

在这段代码中，div 将有一个视觉拖动（即 div 将跟随光标），而表格行不会，即使我知道它正在被拖动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T02:47:51.047

所以这是`<div>`s vs`<tr>`的问题

a`<div>`可以有一个绝对位置，允许 div 移动鼠标所在的任何位置，但 a`tr`位于表格中，因此不能在页面上移动

这是一个 jsfiddle 来说明（tr 是绿色，div 是红色）

[http://jsfiddle.net/PUHPH/](http://jsfiddle.net/PUHPH/)

无论您为 tr 输入什么坐标，它都不会从页面的左上角移动 - 但 div 会移动到您放置的任何位置

# android - 通知用户非市场应用程序更新的最佳方式？

> ID：10977818
> 
> 赞同：0
> 
> 时间：2012-06-11T09:51:56.153
> 
> 标签：android, xml, dom, sax

我正在为我的工作场所制作一个简单的公交车时刻表应用程序，人们对此很感兴趣，但我不想大量通过电子邮件向每个人发送简单的更新。现在我正在寻找一个包含最新版本信息的 XML 文件并在启动时对其进行解析，然后只显示一个要更新的警报对话框，但是，我无法让 SAX 工作，我可能会查看 DOM 解析器但两者似乎都是获取单个值的过于复杂的方法。

从字面上看，这就是 XML 包含的所有内容：

```
<newversion>1.2</newversion> 
```

还有其他方法吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T09:58:11.437

你真的不需要这样做。您可以简单地将文本文件放在服务器上，甚至免费托管也可以。每当您更新应用程序时，将文件的内容更新为版本号。每次您的应用程序启动时，它都可以读取文件的内容。由于它只包含版本号，因此您可以直接将其与您应用的当前版本进行比较。如果当前版本号小于文件中的版本号，则给用户一个更新通知。这是获取文件内容的基本代码：

```
 InputStream is = new URL("http://<my_server>/version.txt").openStream();
        BufferedReader in = new BufferedReader(new InputStreamReader(is));
        String serverVersion = in.readLine();
        in.close();
        if (serverVersion.isEmpty())
        {
            //couldn't get the file. Do some error management here.
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T09:58:37.447

改用 JSON 怎么样？解析它很容易，比解析 xml 简单得多（恕我直言），如果你有问题的话。

或者您只需为这些数据使用一个简单的字符串，因为它是非结构化的。

# mono - 是否需要编译mono-develop 3.1.0版本的Monodevelop的旧版本？

> ID：10977827
> 
> 赞同：0
> 
> 时间：2012-06-11T09:52:44.307
> 
> 标签：mono, monodevelop

当我从终端中的源代码编译 Monodevelop 3.1.0 for macosx 时，它失败了。但是当我使用 Monodevelo 2.8.2 打开“MonoDevelop.mdw”时，使用“运行”函数构建它，然后它运行了。但是为什么？

## 错误如下：

```
Last login: Tue Jun 12 09:22:05 on console
starmatoMacBook-Pro:~ star$ cd /Users/star/Surer/DevKits/Mono/mono-monodevelop-git/monodevelop
starmatoMacBook-Pro:monodevelop star$ make runcd main && make run
PATH="/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/usr/X11/bin" PKG_CONFIG_PATH="/Users/star/Surer/DevKits/Mono/mono-monodevelop-git/monodevelop/local-config:/usr/local/lib/pkgconfig:/usr/local/share/pkgconfig:" LD_LIBRARY_PATH="" DYLD_FALLBACK_LIBRARY_PATH="" MONO_GAC_PREFIX="/usr/local:" MONODEVELOP_LOCALE_PATH="./build/locale" MONO_ADDINS_REGISTRY="./build/bin" UBUNTU_MENUPROXY=0 exec -a "monodevelop" /usr/bin/mono --debug ./build/bin/MonoDevelop.exe
ERROR [2012-06-12 10:18:40Z]: Error setting process name
System.DllNotFoundException: libc.dylib
  at (wrapper managed-to-native) MonoDevelop.Core.Runtime:prctl (int,byte[],intptr,intptr,intptr)
  at MonoDevelop.Core.Runtime.unixSetProcessName (System.String name) [0x00000] in /Users/star/Surer/DevKits/Mono/mono-monodevelop-git/monodevelop/main/src/core/MonoDevelop.Core/MonoDevelop.Core/Runtime.cs:257 
  at MonoDevelop.Core.Runtime.SetProcessName (System.String name) [0x00010] in /Users/star/Surer/DevKits/Mono/mono-monodevelop-git/monodevelop/main/src/core/MonoDevelop.Core/MonoDevelop.Core/Runtime.cs:240 
ERROR [2012-06-12 10:18:41Z]: Error initialising GLib logging.
System.DllNotFoundException: libglib-2.0.0.dylib
  at (wrapper managed-to-native) GLib.Marshaller:g_malloc (uintptr)
  at GLib.Marshaller.StringToPtrGStrdup (System.String str) [0x00000] in <filename unknown>:0 
  at GLib.Log.SetLogHandler (System.String logDomain, LogLevelFlags flags, GLib.LogFunc logFunc) [0x00000] in <filename unknown>:0 
  at MonoDevelop.Ide.Gui.GLibLogging.set_Enabled (Boolean value) [0x00030] in /Users/star/Surer/DevKits/Mono/mono-monodevelop-git/monodevelop/main/src/core/MonoDevelop.Ide/MonoDevelop.Ide/GLibLogging.cs:50 
  at MonoDevelop.Ide.IdeStartup.Run (MonoDevelop.Ide.MonoDevelopOptions options) [0x00056] in /Users/star/Surer/DevKits/Mono/mono-monodevelop-git/monodevelop/main/src/core/MonoDevelop.Ide/MonoDevelop.Ide/IdeStartup.cs:88 
FATAL ERROR [2012-06-12 10:18:41Z]: MonoDevelop failed to start. Some of the assemblies required to run MonoDevelop (for example gtk-sharp, gnome-sharp or gtkhtml-sharp) may not be properly installed in the GAC.
System.TypeInitializationException: An exception was thrown by the type initializer for Gtk.Application ---> System.DllNotFoundException: glibsharpglue-2
  at (wrapper managed-to-native) GLib.Thread:glibsharp_g_thread_supported ()
  at GLib.Thread.get_Supported () [0x00000] in <filename unknown>:0 
  at Gtk.Application..cctor () [0x00000] in <filename unknown>:0 
  --- End of inner exception stack trace ---
  at MonoDevelop.Ide.IdeStartup.Run (MonoDevelop.Ide.MonoDevelopOptions options) [0x0007e] in /Users/star/Surer/DevKits/Mono/mono-monodevelop-git/monodevelop/main/src/core/MonoDevelop.Ide/MonoDevelop.Ide/IdeStartup.cs:95 
  at MonoDevelop.Ide.IdeStartup.Main (System.String[] args) [0x0004f] in /Users/star/Surer/DevKits/Mono/mono-monodevelop-git/monodevelop/main/src/core/MonoDevelop.Ide/MonoDevelop.Ide/IdeStartup.cs:503 
make[1]: *** [runmd] Error 255
make: *** [run] Error 2
starmatoMacBook-Pro:monodevelop star$ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T22:19:04.387

您的 DYLD_LIBRARY_FALLBACK_PATH 环境变量已损坏。您可以使用以下方法修复它：

```
export DYLD_LIBRARY_FALLBACK_PATH="/Library/Frameworks/Mono.framework/Versions/Current/lib:/lib:/usr/lib:$DYLD_LIBRARY_FALLBACK_PATH" 
```

# iphone - 在 UITableView 的详细文本标签中连接两个字符串

> ID：10977830
> 
> 赞同：0
> 
> 时间：2012-06-11T09:52:50.953
> 
> 标签：iphone, uitableview, ios5, sdk

嗨，我有这行代码。

```
cell.detailTextLabel.text = [[self->jsonArray objectAtIndex:indexPath.row] objectForKey:@"city"]; 
```

我想使用两个 objectForKeys。我有一个“城市”和“州”键，我希望它们放在那个详细的文本标签中。我该怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-11T09:58:46.930

```
cell.detailTextLabel.text = [NSString stringWithFormat:@"%@, %@",
                             [[self->jsonArray objectAtIndex:indexPath.row] objectForKey:@"city"], 
                             [[self->jsonArray objectAtIndex:indexPath.row] objectForKey:@"state"]]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T10:02:25.400

```
NSString *city = [[self->jsonArray objectAtIndex:indexPath.row] objectForKey:@"city"];
NSString *state =[[self->jsonArray objectAtIndex:indexPath.row] objectForKey:@"state"];
cell.detailTextLabel.text = [NSString stringWithFormat:@"city is : %@  state is: %@", city, state]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T09:56:25.433

尝试这个：

```
cell.detailTextLabel.text = [NSString stringWithFormat:@"%@ %@",[[self->jsonArray objectAtIndex:indexPath.row] objectForKey:@"city"],[[self->jsonArray objectAtIndex:indexPath.row] objectForKey:@"state"]]; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-11T09:56:15.260

你可以这样做：

```
NSString *city = [[self->jsonArray objectAtIndex:indexPath.row] objectForKey:@"city"];
NSString *state = [[self->jsonArray objectAtIndex:indexPath.row] objectForKey:@"state"];
NSString *combined = [NSString stringWithFormat:@"%@ (%@)", city, state];
cell.detailTextLabel.text = combined; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-11T09:59:13.870

你尝试过这样的事情吗？

```
NSString *city = [[self->jsonArray objectAtIndex:indexPath.row] objectForKey:@"city"];
NSString *state = [[self->jsonArray objectAtIndex:indexPath.row] objectForKey:@"state"];
cell.detailTextLabel.text = [[NSString alloc]initWithFormat:@"%@ %@",city,state]; 
```

# c# - 在创建动态表时应用 Css 样式

> ID：10977834
> 
> 赞同：3
> 
> 时间：2012-06-11T09:53:14.573
> 
> 标签：c#, css, asp.net

这是我的问题：

*   当我在 C# 中创建表格时，我想为每个单元格添加不同的 CSS 样式。

    而（DR.Read（））{

    ```
     TableRow linha1 = new TableRow();
        cel1 = new TableCell();
        cel2 = new TableCell();
        cel3 = new TableCell();
        cel4 = new TableCell();

        cel1.Controls.Add(new LiteralControl(DR.GetValue(0).ToString()));
        cel2.Controls.Add(new LiteralControl(DR.GetValue(1).ToString()));
        cel3.Controls.Add(new LiteralControl(DR.GetValue(2).ToString()));
        cel4.Controls.Add(new LiteralControl(DR.GetValue(3).ToString()));

        linha1.Controls.Add(cel1);
        linha1.Controls.Add(cel2);
        linha1.Controls.Add(cel3);
        linha1.Controls.Add(cel4);
        Tab_artigos_all.Controls.Add(linha1);
    } 
    ```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-11T09:57:49.397

它实际上很容易。

```
cel1.Style["CSSPROPERTY"] = "SomeValue" 
```

或者

```
cel1.Attributes.Add("class", "CSSCLASSNAME"); 
```

应该这样做

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-11T09:56:56.287

试试这个

```
cel1.Attributes.Add("class", "className"); 
```

或者

```
cel1.Style.Add("background-color", "red"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-12-21T14:24:12.197

我当然喜欢上面的答案。但您也可以使用以下格式

```
cel1.Style(HtmlTextWriterStyle.FontSize) = 9 
```

例如。如果您在 Visual Studio 中， 自动完成下拉菜单显然会为您提供与**HtmlTextWriterStyle一起使用的可能值列表。**

# visual-studio-2010 - Windows 属性值中的“文件版本”是 FILEVERSION 而不是“FileVersion”

> ID：10977836
> 
> 赞同：5
> 
> 时间：2012-06-11T09:53:18.163
> 
> 标签：visual-studio-2010, visual-c++

所以产品管理部门规定我们的软件应该有 3 组数字的版本号，而不是通常的 4 组（例如 1.2.3 而不是 1.2.3.4）

这很容易在“关于”对话框和 UI 的其他地方完成，但我遇到了 Windows 属性的问题。

当我将 VERSIONINFO 块中的值更改为：

```
FILEVERSION 1,2,3
PRODUCTVERSION 1,2,3

VALUE "FileVersion", "1.2.3"
VALUE "ProductVersion", "1.2.3" 
```

我最终在 Windows 7 的 exe 的“属性”>“详细信息”选项卡中得到以下内容：

文件版本：1.2.3.0 产品版本：1.2.3

将值更改为完全不同表示“文件版本”取自 FILEVERSION，因此始终格式化为 4 位组值，但“产品版本”取自“ProductVersion”。

有没有办法指定“文件版本”应该取自“文件版本”字符串值？如果我删除 FILEVERSION 块，我最终会得到 0.0.0.0 的“文件版本”。

我通过创建一个空的 Win32 控制台应用程序在 VS2010 中重现了这种行为，然后添加了默认版本资源：

```
VS_VERSION_INFO VERSIONINFO
 FILEVERSION 1,0,1
 PRODUCTVERSION 1,0,2
 FILEFLAGSMASK 0x3fL
#ifdef _DEBUG
 FILEFLAGS 0x1L
#else
 FILEFLAGS 0x0L
#endif
 FILEOS 0x40004L
 FILETYPE 0x1L
 FILESUBTYPE 0x0L
BEGIN
    BLOCK "StringFileInfo"
    BEGIN
        BLOCK "080904b0"
        BEGIN
            VALUE "CompanyName", "TODO: <Company name>"
            VALUE "FileDescription", "TODO: <File description>"
            VALUE "FileVersion", "1.0.3"
            VALUE "InternalName", "VersionT.exe"
            VALUE "LegalCopyright", "Copyright (C) 2012"
            VALUE "OriginalFilename", "VersionT.exe"
            VALUE "ProductName", "TODO: <Product name>"
            VALUE "ProductVersion", "1.0.4"
        END
    END
    BLOCK "VarFileInfo"
    BEGIN
        VALUE "Translation", 0x809, 1200
    END
END 
```

导致同样的问题： [属性 http://media.use.com/images/s_1/4ba4e5b1b235179b1c9a.jpg](http://media.use.com/images/s_1/4ba4e5b1b235179b1c9a.jpg)

这张图片可能很小，所以我只是确认它说文件版本 1.0.1.0 产品版本 1.0.4

在我告诉产品管理这是我们能做的最好的事情之前，有没有办法让 Windows 显示“FileVersion”字符串值？我已经阅读了 MSDN 上的 VERSIONINFO 文档，但看不到任何可以设置的标志。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T12:36:54.753

在构建和安装[我在 CodeProject 找到的这个 shell 扩展](http://www.codeproject.com/Articles/118909/Windows-7-File-properties-Version-Tab-Shell-Extens)之后，这似乎是由于 Windows 7 只显示了 versioninfo 属性的一个子集，我无法改变它。FileVersion 字符串存在于 exe 中，只是未显示在默认属性对话框中。

# ajax - 移动网站上的 AJAX

> ID：10977837
> 
> 赞同：0
> 
> 时间：2012-06-11T09:53:30.940
> 
> 标签：ajax, mobile, smartphone

我有一个移动网站，我想通过 javascript/ajax 跟踪点击次数。

我想我可以使用 jquery 发送跟踪信息，当我成功返回时，我可以适当地重定向用户。我可以做到这一点没问题，但我不想使用 jquery，因为它是一个小网页，加载到 JS 库中似乎是最重要的。

发布 http 请求的最佳方式是什么？它需要在所有现代智能手机网络浏览器上运行。

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T10:46:57.247

jquery-1.7.2.min.js 只有 93kb，并且预装了所有 XHR 功能，应该可以在所有浏览器中使用。

否则，您将需要手工烘焙自己的 XHR 并考虑浏览器

例如 FF、Chrome 和 Safari 可以启动新的 XMLHttpRequest 对象，但 IE 需要一个新的 ActiveXObject("Microsoft.XMLHTTP")

# c++ - 标量到长转换

> ID：10977838
> 
> 赞同：1
> 
> 时间：2012-06-11T09:53:30.967
> 
> 标签：c++, opencv, computer-vision

我计算了灰度图像的像素值总和并将总和存储在 "long" 中，当我尝试将此值与另一个 long 进行比较时，如下所示：

```
 if (sum == Original_Sum[0])
     sum1++;
//original sum is array of type long 
```

我收到此错误：

> 错误 C2440：“正在初始化”：无法从“cv::Scalar (__cdecl *)(cv::InputArray)”转换为“double”

铸造或`.val[0]`没有工作，有什么建议吗？提前致谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T13:07:09.993

这是你声明这些变量的方式吗？

```
long Original_Sum[1];
long sum;
long sum1; 
```

因为如果它们是这样声明的，那么据我所知，您的代码没有任何问题

此外， .val 不是 long 类型的成员

# cuda - 错误：在此过程中设备处于活动状态时无法设置

> ID：10977842
> 
> 赞同：0
> 
> 时间：2012-06-11T09:53:41.187
> 
> 标签：cuda

我从内核收到错误：在此过程中设备处于活动状态时无法设置。

你能给我建议是什么意思吗？

内核是`cudaMemset()`. 内核应该比`cudaMemset()`.

核心：

```
__global__ void kernelMemSet ( float *sSum, float *cSum, int length ){

int idx = blockIdx.x * blockDim.x + threadIdx.x;
int idy = blockIdx.y * blockDim.y + threadIdx.y;

int tid = idx*length + idy;

cSum[idx] = 0.0f;
sSum[idx] = 0.0f;
} 
```

内核被循环调用，错误只发生在第一次调用，第二次调用内核时，第三次，......没有错误。

错误是否可能是由调用`cudaSetDevice()`before引起的`cudaGLSetDevice()`？- 发现它们是相互排斥的，但这不是导致问题的原因。

# android - Android - TextView 的画廊奇怪行为

> ID：10977846
> 
> 赞同：0
> 
> 时间：2012-06-11T09:53:51.797
> 
> 标签：android, textview, gallery, flip

我正在使用下面有两个 textView 的图库小部件。

我添加了一个 onItemSelectedListener 来动态更改 textView 值：

```
 mGallery.setOnItemSelectedListener(new OnItemSelectedListener() {
        @Override
        public void onItemSelected(AdapterView<?> arg0, View arg1,
                int position, long arg3) {
            TextView titleView= (TextView) findViewById(R.id.titleView);
            TextView descriptionView= (TextView) findViewById(R.id.descriptionView);
            titleView.setText(title[position]);
            descriptionView.setText(description[position]);           
    } 
```

但是当我翻到画廊时，出现了问题。动画不流畅，如果我删除“setText”语句，则可以正常工作。我只有在 Android 4.0 上才有这个问题。

有办法解决吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T10:12:59.853

前段时间我遇到了同样的问题。在我看来，它是画廊中的一个错误。我通过延迟 400 毫秒发布更新（快照恢复的持续时间）以一种 hack´ish 的方式解决了它。并将 setCallbackDuringFling 设置为 false，这样它就不会在停止之前触发。

```
mGallery.setCallbackDuringFling (false);

mGallery.setOnItemSelectedListener(new OnItemSelectedListener() {
    @Override
    public void onItemSelected(AdapterView<?> arg0, View arg1,
            int position, long arg3) {

   mGallery.postDelayed(new Runnable() {

        @Override
        public void run() {
                TextView titleView= (TextView) findViewById(R.id.titleView);
                TextView descriptionView= (TextView) findViewById(R.id.descriptionView);
                titleView.setText(title[position]);
                descriptionView.setText(description[position]);   
        }
    }, 400);

} 
```

# javascript - Button.OnClientClick 和 GridView.RowCommand 奇怪的行为

> ID：10977847
> 
> 赞同：0
> 
> 时间：2012-06-11T09:53:55.477
> 
> 标签：javascript, asp.net, events

我正忙于创建一个页面，并注意到需要调用`GridView.RowCommand`网格视图事件的网格视图单元格内的按钮的奇怪行为。

当我设置`OnClientClick=""`而不是 ``OnClientClick="javascript:DoMethod()" `the`RowCommand` 时不会触发。该函数可以不包含任何内容，因为我还注意到该方法内的任何脚本都不会被执行。

有人可以向我解释为什么会这样吗？难道我做错了什么？我已经对此进行了广泛的谷歌搜索，但找不到解释。

提前感谢您的解决方案和建议。

问候

有关此页面的更详细代码和对先前问题的参考，请参阅[未触发按钮单击事件](https://stackoverflow.com/questions/10969690/button-click-event-on-modal-popup-inside-a-grid-view-not-firing)和[JavaScript 对象预期错误](https://stackoverflow.com/questions/10976203/javascript-object-expected-error-in-dopostback)

编码：

```
function addAcc(a,b) {
            var btn = document.getElementById(a);                
        };
<asp:Button ID="btnAddAcc" runat="server" Text="Add Account" 
     OnClientClick="javascript:addAcc(this.id,<%# CType(Container, GridViewRow).RowIndex %>)" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T09:58:06.430

也许这个问题的答案正是您要寻找的：[在 RowDataBound 中设置 OnClientClick 后事件未触发](https://stackoverflow.com/questions/2092954/event-not-firing-after-setting-onclientclick-in-rowdatabound)

# android - 通过 wifi 流式传输语音 - android

> ID：10977848
> 
> 赞同：0
> 
> 时间：2012-06-11T09:53:57.427
> 
> 标签：android

我正在研究入门电话​​。入门电话通过 rtsp 协议向我发送语音和视频，因此我可以简单地从设备上的摄像头获取语音和视频。但我不知道如何向该设备发送语音。有什么可以帮助我同时发送和接收音频（比如电话）吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T10:00:23.570

如果我理解正确，您需要视频通话。就像 sipdroid 应用程序一样。这是一个开源项目，看这个项目中的 VideoCamera.java 类。

[http://code.google.com/p/sipdroid/](http://code.google.com/p/sipdroid/)

# magento - Magento-无法在前端登录确定数量的客户

> ID：10977855
> 
> 赞同：0
> 
> 时间：2012-06-11T09:54:35.667
> 
> 标签：magento, login

几天前，我在线商店的一些客户抱怨我他们无法登录您的帐户部分。后来几个小时在谷歌中寻找我可以找到一般问题。

例如在这个链接中：

[http://www.magentocommerce.com/answers/discussion/900/Customers-cant-login-some-hours-after-register/p1](http://www.magentocommerce.com/answers/discussion/900/Customers-cant-login-some-hours-after-register/p1)

在某些页面上说我解决了这个问题：

1.  去后台
2.  搜索客户
3.  点击保存客户，因为客户页面没有任何客户日期更改。

很好，这解决了我的问题，但是这是针对特定客户的解决方案。

error.log 中的错误是：

```
 [error] [client x.x.x.x] PHP Fatal error:  Allowed memory size of 201326592 bytes exhausted (tried to allocate 84 bytes) in /var/www/domain/lib/Zend/Db/Statement/Pdo.php on line 290, referer: http://www.domain.com/customer/account/login/ 
```

我认为这是数据库维护的问题，然后当您单击保存客户时 Magento 运行一些 SQL 以重新启动表的自动增量，并且工作正常。

我在获得错误开始方面取得了进展，我尝试在之前/之后找到 sql 之间的差异。

1.  使用 mysqldump 创建数据库的副本
2.  添加到 git
3.  解决问题，用上面的方法
4.  使用 mysqldump 创建另一个数据库副本（我确定在副本之间的这段时间内没有新客户端）。
5.  用 git 查看差异

我可以看到 AUTOINCREMENTS 的不同之处：

```
 /*!40000 ALTER TABLE `core_session` ENABLE KEYS */;
@@ -5592,3 +5592,3 @@ CREATE TABLE `cron_schedule` (
   KEY `scheduled_at` (`scheduled_at`,`status`)
-) ENGINE=InnoDB AUTO_INCREMENT=192949 DEFAULT CHARSET=utf8;
+) ENGINE=InnoDB AUTO_INCREMENT=192955 DEFAULT CHARSET=utf8;<br /><br />   /*!40000 ALTER TABLE `customer_address_entity` ENABLE KEYS */;
@@ -5796,3 +5796,3 @@ CREATE TABLE `customer_address_entity_varchar` (
   CONSTRAINT `FK_CUSTOMER_ADDRESS_VARCHAR_ENTITY_TYPE` FOREIGN KEY (`entity_type_id`) REFERENCES `eav_entity_type` (`entity_type_id`) ON DELETE CASCADE ON UPDATE CASCADE
-) ENGINE=InnoDB AUTO_INCREMENT=44118 DEFAULT CHARSET=utf8;
+) ENGINE=InnoDB AUTO_INCREMENT=44121 DEFAULT CHARSET=utf8;<br /><br /> /*!40000 ALTER TABLE `customer_entity` ENABLE KEYS */;
@@ -6001,3 +6001,3 @@ CREATE TABLE `customer_entity_int` (
   CONSTRAINT `FK_CUSTOMER_INT_ENTITY_TYPE` FOREIGN KEY (`entity_type_id`) REFERENCES `eav_entity_type` (`entity_type_id`) ON DELETE CASCADE ON UPDATE CASCADE
-) ENGINE=InnoDB AUTO_INCREMENT=12841 DEFAULT CHARSET=utf8;
+) ENGINE=InnoDB AUTO_INCREMENT=12843 DEFAULT CHARSET=utf8;<br /><br />@@ -6069,3 +6069,3 @@ CREATE TABLE `customer_entity_varchar` (
   CONSTRAINT `FK_CUSTOMER_VARCHAR_ENTITY_TYPE` FOREIGN KEY (`entity_type_id`) REFERENCES `eav_entity_type` (`entity_type_id`) ON DELETE CASCADE ON UPDATE CASCADE
-) ENGINE=InnoDB AUTO_INCREMENT=44866 DEFAULT CHARSET=utf8;
+) ENGINE=InnoDB AUTO_INCREMENT=44870 DEFAULT CHARSET=utf8;<br /><br /> 
```

如何使用 Magento 解决这个一般问题？，如何维护数据库以在我的商店中成功登录客户？

我的 Magento 版本 1.5.1.0

非常感谢，我认为这是一个重要的问题。社区的解决方案非常有趣

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T10:24:21.527

来自[http://www.magentocommerce.com/system-requirements](http://www.magentocommerce.com/system-requirements)

memory_limit 不小于256Mb（最好是512）

# c++ - 如何让文本显示在 Qt 的 TextBrowser 中？

> ID：10977858
> 
> 赞同：1
> 
> 时间：2012-06-11T09:54:43.403
> 
> 标签：c++, linux, user-interface, qt4

我是 C++ 新手，甚至是 Linux 上的 Qt 新手。谁能给我一个关于如何在 Qt 的文本浏览器中显示文本的一般概念？由于我正在从事的项目的座位性质，我无法发布我的代码。我所需要的只是基本了解如何执行与插槽和信号相关的操作。

我的应用程序是这样的：我从 CSV 文件中获取输入，计算排序数，然后在输出窗口中显示计数的单词数以及文本行。它在控制台 C++ 程序中运行良好。但是，当我在 Qt 中对其进行编码时，它不起作用。

欢迎任何建议或帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-18T20:09:03.653

很抱歉我之前问的不好的问题。事实证明这是我的配置问题。

# linux - bash 中的 if else 错误

> ID：10977860
> 
> 赞同：-3
> 
> 时间：2012-06-11T09:54:59.097
> 
> 标签：linux, bash

```
i=0
EDA="xx7p2"
while read line
do
    echo "i is --- $i"
    echo " PACKAGE IS - --$EDA--"
    #echo $line "\n"
    if (( $i > 0 ))
    then
        package=$(echo $line | awk '{print $1}')
        echo "EDA PACKAGE IN LOOP IS ---$Eda_package---"
        if [ "$package" == "$EDA" ] ; then
            #then
            well_bias=$(echo $line | awk '{print $2}')
            biasmap=$(echo $line | awk '{print $3}')
            unified=$(echo $line | awk '{print $4}')
            echo "eda pack --$package bias is --$wel biasmap is --$biasmap  unified-           --$unified"
        fi
    fi
    i=$((i+1))
done < config.list 
```

这里即使两个变量相同，第二个 if 语句中的语句也不会执行。我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T11:37:08.957

制作一个简化版本的问题，以便将其确定下来。我无法使用此示例脚本重现您的问题：

```
#!/bin/bash
i=$1
a=$2
while read line
do
    if (( $i > 0 ))
    then
        echo "1st if "+$i
        if [ "$a" == "foo" ] ; then
            echo "2nd if"
        fi
    fi
    i=$((i+1))
done < nfoo.sh 
```

调用 nfoo.sh 并调用它`./nfoo.sh 4 bar, ./nfoo.sh -4 bar, ./nfoo.sh 4 foo and ./nfoo.sh -4 foo`。

您的错误可能在包分配中吗？对于这样一个简单的任务，您不需要 awk。对于一个单词，只提取第一个单词，你会使用`echo ${line/ */}`while I see nothing wrong in your awk-statement。

由于您提取了更多参数，因此我建议使用一个数组：

```
#!/bin/bash
i=$1
a=$2
while read line
do
    if (( $i > 0 ))
    then
        arr=($line)
        echo "1st if "+$i
        if [ "if" == "${arr[0]}" ] ; then
            echo "2nd if: " $line
        fi
    fi
    i=$((i+1))
done < nfoo.sh 
```

顺便说一句：标题在说什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T10:10:22.503

**更新**：基于以下小脚本的更多测试：

将变量`$`作为字符串的一部分`package`对我来说是个问题。如果我用 a 转义它，`\$`我可以让它与下面提到的正确比较运算符一起工作。

使用它进行比较（注意之前/之后的*空格*`=`）

```
 if [ "$package" = "$EDA" ] ; then 
```

没有空格，表达式似乎总是评估为真。（另外，顺便说一句，`==`在之前/之后使用不带空格将导致`[: 11: $EDAx: unexpected operator`）

我使用这个小脚本进行测试，您可以使用它来验证自己的构造，希望对您有所帮助。如图所示，这可以正常工作

```
#!/bin/bash

package="\$EDA"
echo $package

if [ "$package" = "\$EDA" ] ; then
    echo "The same"
else
    echo "Not the same"
fi 
```

*注意1*：我添加了`else`以确定比较的结果，因为您的脚本不包含任何`else`

*注意2*：明确指定要运行的shell而不是依赖于一些外部隐式环境设置总是更好，所以我建议你将它添加`#!/bin/bash`到你的脚本中，它肯定不会受到伤害。

[Advanced Bash-Scripting Guide](http://tldp.org/LDP/abs/html/index.html)中 的[其他](http://tldp.org/LDP/abs/html/comparison-ops.html)比较运算符显示：

> **字符串比较**
> 
> =
> 
> 等于
> 
> 如果 [ "$a" = "$b" ]
> 
> **请注意构成 = 的空格**。
> 
> if [ "$a"="$b" ] 不等价于上述。
> 
> == 等于
> 
> 如果 [ "$a" == "$b" ]
> 
> 这是 = 的同义词。

# javascript - 如何打开 或者 通过 JavaScript？

> ID：10977863
> 
> 赞同：0
> 
> 时间：2012-06-11T09:55:04.060
> 
> 标签：javascript, jsf-2, dialog, primefaces, icefaces-3

我需要在我用鼠标单击的区域打开 ace:dialog 或 p:dialog（因为 IceFaces 是 PrimeFaces 的一个分支，并且它是相同的标签和属性），但我不知道该怎么做这与 JavaScript。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T12:54:46.960

一般：要打开对话框，只需调用 onclick="mydialog.show();" 在应该可以点击的html元素上..

如果您想在“点击位置”显示对话框，也许您应该编写自己的 javascript 方法来设置位置..

或者更简单，使用对话框的属性“onShow”来设置“位置”，这也是对话框的一个属性。

看看这里.. [http://res.icesoft.org/docs/v3_latest/ace/tld/ace/dialog.html](http://res.icesoft.org/docs/v3_latest/ace/tld/ace/dialog.html)

# php - 由 SQL 数据库加载的 3 行组成的 PHP 表

> ID：10977868
> 
> 赞同：0
> 
> 时间：2012-06-11T09:55:18.227
> 
> 标签：php, sql, html-table, rows

我有一个加载了不同教堂信息的数据库，我试图将数据库中的所有信息插入到一个包含 3 行的 PHP 表中。

我希望每个单元格的结构是：

```
Church Name
Image
Pastor Name 
```

我可以轻松地将所有数据插入到表中，但无法将其显示为 3 行。

```
echo("<table>");
while($row = mysql_fetch_array($rs))
{
        echo("<tr>");
        echo("<td>");
        echo("<a href='" . $row['website'] . "'>" . $row['churchName'] . "</a><br>");
        echo("<img src=\"" . $row['image'] . "\"><br>");
        echo($row['pastorName'] . "<br><br>");
        echo("</td>");
        echo("<td>");
        echo("<a href='" . $row['website'] . "'>" . $row['churchName'] . "</a><br>");
        echo("<img src=\"" . $row['image'] . "\"><br>");
        echo($row['pastorName'] . "<br><br>");
        echo("</td>");echo("<td>");
        echo("<a href='" . $row['website'] . "'>" . $row['churchName'] . "</a><br>");
        echo("<img src=\"" . $row['image'] . "\"><br>");
        echo($row['pastorName'] . "<br><br>");
        echo("</td>");
        echo("</tr>");

}
echo("</table>"); 
```

这样做会导致我有 3 行结构正确，但数据重复。我知道我没有更改 id，但不知道我应该怎么做

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T10:13:54.983

您正在重复行上的数据。如果要每行显示 3 个项目，则需要添加一个计数器和一个语句来绘制表格换行符，如下所示：

```
$int_Col = 1;
echo("<table>");
while($row = mysql_fetch_array($rs))
{
    if ($int_Col == 1) {
       echo("<tr>");
    }

    echo("<td>");
    echo("<a href='" . $row['website'] . "'>" . $row['churchName'] . "</a><br>");
    echo("<img src=\"" . $row['image'] . "\"><br>");
    echo($row['pastorName'] . "<br><br>");
    echo("</td>");

    if ($int_Col == 3) { 
        echo("</tr>");
        $int_Col = 1;
    } else {
      $int_Col++;
    }
}

if ($int_Col > 1) { 
   echo("<td colspan='". (3 - $int_Col) ."'>&nbsp;</td></tr>");
}
echo("</table>"); 
```

最后一次检查 ($int_Col > 1) 应确保使用空单元格正确呈现表格 - 应跨越未在当前行上绘制的正确数量的单元格。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T10:15:46.593

澄清一下，我认为这里有两个“行”的定义。

*   MySQL 表行
*   HTML 表格行

我相信您是在将 3 个 MySQL 表行放入一个 HTML 表行之后。

使用以下命令每 3 个 MySQL 行拆分 HTML 行：

```
$i = 0;
while($row = mysql_fetch_array($rs))
{
    // whatever you're already doing(ish)

    $i++;
    if($i % 3 == 0)
    {
         echo('</tr><tr>');
    }
} 
```

如果 MySQL 行的总数不完全除以 3，则需要进行一些额外的检查，因为在这种情况下，您将在表格末尾填充一两个空单元格。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T10:10:12.680

如果我的代码正确，您将为数据库中的每一行创建 3 行。mysq_fetch 将为每一行运行循环，因此循环的正确内容是：

```
 echo("<tr>");
    echo("<td>");
    echo("<a href='" . $row['website'] . "'>" . $row['churchName'] . "</a><br>");
    echo("<img src=\"" . $row['image'] . "\"><br>");
    echo($row['pastorName'] . "<br><br>");
    echo("</td>");
    echo("</tr>"); 
```

# c# - 我是否必须在 MonoTouch 的 UITableViewSource 中为 GetCell() 和 GetViewForHeader() 的返回值保留明确的引用？

> ID：10977871
> 
> 赞同：2
> 
> 时间：2012-06-11T09:55:22.453
> 
> 标签：c#, ios, uitableview, xamarin.ios

我记得在 MonoTouch 中（仍然是？）有必要保留对`UITableViewCells`返回的显式引用`UITableViewSource.GetCell()`以避免收集托管单元格。机智关于这个问题，我有一些问题：

*   从 MonoTouch 5.2.12 开始：是否仍然需要`ArrayList()`与创建并返回 GetCell() 的托管单元格保持一致？
*   如果我使用 Storyboards 和动态单元原型，我从不明确创建`UITableViewCell`但`DequeueReusableCell()`仅使用。这个案子怎么办？
*   怎么样`GetViewForHeader()`？我是否必须保留对从该方法返回的视图的引用？还是 MonoTouch 在内部处理这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T16:27:36.550

据我所知，唯一需要保存对单个单元格的引用的情况是，如果您对它们都有一个委托*并且*该单元格不是自定义类。

如果您将 UITableViewCell 子类化，则不需要保存任何引用。

如果你没有设置任何委托，你也不应该需要持有任何引用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T14:54:18.397

如果有任何帮助，MonoTouch.Dialog 也不会保留对 Cell 的引用，至少我记得没有看到！只是制造它并传递它。（也发布在问题上）

考虑一下，您不应该保留对单元格的引用，因为它们被设计为可重用....因此您可能无法在下一次 GetCell / GetCellForReuse 类型调用中获得相同的单元格。

# php - 有没有办法同时使用 GET 和 POST ？

> ID：10977874
> 
> 赞同：9
> 
> 时间：2012-06-11T09:55:33.953
> 
> 标签：php

我需要用这两种方法一起传递一些数据（ GET 和 POST ）。我写了这个方法，但不知道是否安全：

```
<form method="post" action="profile.php?id=<?php echo $_SESSION['id']; ?>" enctype="multipart/form-data">
<input type="text" size="40" name="title" >
<textarea name="description" rows="2" cols="30"></textarea>
<input id="starit" name="submit" value="Create" type="submit" />
</form>

<?php 
a= $_GET['id'];
b= $_POST['title'];
c= $_POST['description'];
?> 
```

这段代码安全吗？还是有其他方法可以做到这一点？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-11T09:57:31.813

这不是一个组合的 GET 和 POST 请求；相反，它是一个带有查询参数的 POST 请求。

您所写的将是正确的方法。始终确保您获得预期的字段：

```
if (isset($_GET['id'], $_POST['title'], $_POST['description']) {
  // go ahead
} 
```

顺便说一句，确保你逃避你的输出：

```
<form method="post" action="profile.php?id=<?php echo rawurlencode($_SESSION['id']); ?>"> 
```

如果您不上传文件，则无需设置`enctype`.`<form>`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-11T10:02:22.887

您可以同时使用两者并使用 REQUEST 而不是 GET 或 POST 获取，使用相同的参数名称，默认情况下它将获取“请求顺序”顺序 GET 然后 POST。

[http://php.net/request-order](http://php.net/request-order)

它在 php.ini 中

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T09:59:12.187

这个更好 ：

```
<form method="post" action="profile.php?id=<?php echo urlencode($_SESSION['id'])); ?>"> 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2018-03-03T06:35:45.440

不要在表单条件中写入方法属性并在输入中添加**formmethod=" "**属性...例如：

```
<input type="submit" formmethod="get"  name="inputGet" value="updateGet" >
<input type="submit" formmethod="post" name="inputPost" value="updatePost" > 
```

# regex - perl 正则表达式匹配失败

> ID：10977876
> 
> 赞同：5
> 
> 时间：2012-06-11T09:55:39.177
> 
> 标签：regex, perl

我想匹配两个不同的字符串，输出应该是 $1 和 $2，根据我在这个例子中，如果 $a 是 'xy abc'，那么 $1 应该是 'xy abc' 而 $2 应该是 'abc'，但是 'abc ' 部分售价为 3 美元。你能帮我写一个正则表达式，$1 应该有整个字符串，$2 应该有第二部分。我正在使用 perl 5.8.5。

```
my @data=('abc xy','xy abc');
foreach my $a ( @data) {
    print "\nPattern= $a\n";
    if($a=~/(abc (xy)|xy (abc))/) {
        print "\nMatch: \$1>$1< \$2>$2< \$3>$3<\n";
    }
} 
```

输出：

```
perl test_reg.pl

Pattern= abc xy

Match: $1>abc xy< $2>xy< $3><

Pattern= xy abc

Match: $1>xy abc< $2>< $3>abc< 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T09:57:58.320

可以通过以下方式完成：

```
(?|(abc (xy))|(xy (abc))) 
```

为什么还要费心捕捉整件事呢？你可以使用`$&`它。

```
my @data = ('abc xy', 'xy abc');
for(@data) {
    print "String: '$_'\n";

    if(/(?|abc (xy)|xy (abc))/) {
        print "Match: \$&='$&', \$1='$1'\n";
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T11:25:58.320

因为只有一个 captures`$2`和`$3`可以定义，所以可以写

```
foreach my $item ( @data) {

  print "\nPattern= $item\n";

  if ($item=~/(abc (xy)|xy (abc))/) {
    printf "Match: whole>%s< part>%s<\n", $1, $2 || $3;
  }
} 
```

这给出了输出

```
Pattern= abc xy
Match: whole>abc xy< part>xy<

Pattern= xy abc
Match: whole>xy abc< part>abc< 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T13:23:52.127

如果您可以接受比`$1`and更多的捕获变量`$2`，则使用匹配的替代分支中的子字符串。

```
for ('abc xy', 'xy abc') {
  print "[$_]:\n";

  if (/(abc (xy))|(xy (abc))/) {
    print "  - match: ", defined $1 ? "1: [$1], 2: [$2]\n"
                                    : "1: [$3], 2: [$4]\n";
  }
  else {
    print "  - no match\n";
  }
} 
```

输出：

```
[abc xy]：
  - 匹配：1：[abc xy]，2：[xy]
[xy abc]：
  - 匹配：1：[xy abc]，2：[abc]
```

# c# - 我们可以使用 Nullable 作为 Metro 风格应用程序的 XAML 中的 DependencyProperty

> ID：10977878
> 
> 赞同：3
> 
> 时间：2012-06-11T09:55:44.283
> 
> 标签：c#, xaml, windows-8, microsoft-metro, winrt-xaml

我正在尝试将`DateTime?`属性用作 DependencyProperty，以便可以在 Metro 风格应用程序的 XAML 中将其绑定。

但是，当应用程序运行时（在调试模式下），我收​​到一个绑定错误，并且日期没有显示在我的控件中：

> 错误：转换器无法将类型 'System.DateTime、mscorlib、Version=4.0.0.0、Culture=neutral、PublicKeyToken=b77a5c561934e089' 的值转换为类型 'DateTime>'；BindingExpression：路径='Model.Date' DataItem='MyProject.Common.ViewModel.TransactionViewModel，MyProject，版本=1.0.0.0，Culture=neutral，PublicKeyToken=null'；目标元素是 'MyProject.Controls.DatePicker' (Name='null'); 目标属性是“SelectedValue”（类型“DateTime>”）。

依赖属性定义如下：

```
public static readonly DependencyProperty SelectedValueProperty =
    DependencyProperty.Register("SelectedValue", 
                                typeof (System.Nullable<System.DateTime>),
                                typeof(DatePicker),
                                PropertyMetadata.Create(default(DateTime?))); 
```

在 XAML 页面中，它用作：

```
<local:DatePicker  
   Margin="0,10" 
   SelectedValue="{Binding Model.Date, Mode=TwoWay}" 
   FontSize="21.333"/> 
```

关于如何解决这个问题并在控件中显示日期并绑定两种方式的任何想法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-11T10:20:51.343

问题是 DatePicker 期望`DateTime`类型不是`DateTime?`Nullable 的语法糖。没有从`DateTime?`to的隐式转换`DateTime`。编写您自己的[IValueConverter](http://blogs.msdn.com/b/bencon/archive/2006/05/10/594886.aspx)。你可以退后一步，问一个问题：你需要 DateTime 吗？您能否将不存在的日期表示为 00/00/00？

另一种选择是在绑定之前转换它，例如

```
DateTime dateTime = nullDateTime ?? new DateTime(0, 0, 0, 0, 0, 0); 
```

# nhibernate - 如何在 NHibernate 3.2 中插入子表时使用生成的 Guid 主键作为外键？

> ID：10977879
> 
> 赞同：1
> 
> 时间：2012-06-11T09:55:45.120
> 
> 标签：nhibernate, insert, foreign-keys, nhibernate-mapping, primary-key

我正在尝试将对象持久化到数据库中。此操作应涉及两个表。

```
[HttpPost]
public ActionResult Create(Report report)
{
    try
    {
        report.Positions = new Iesi.Collections.Generic.HashedSet<Position>();
        var desks = this.session.Query<Desk>().ToList();

        foreach (var desk in desks)
        {
            foreach (var comm in desk.Commodities)
            {
                report.Positions.Add(
                    new Position
                        {
                            Report = report,
                            ReportId = report.Id,
                            Desk = desk,
                            DeskId = desk.Id,
                            Commodity = comm,
                            CommodityId = comm.Id,
                            Value = .0
                        });
            }
        }

        this.session.Save(report);
        return this.RedirectToAction("Index");
    }
    catch
    {
        // some handling
        return this.RedirectToAction("Index");
    }
} 
```

这是我的映射：

```
public class EntityMapping<TKey, TEntity> : ClassMapping<TEntity>
    where TEntity : Entity<TKey>
{
    public EntityMapping()
    {
        this.Id(x => x.Id, mapper => mapper.Generator(Generators.GuidComb));
    }
}

public class PositionMapping : ClassMapping<Position>
{
    public PositionMapping()
    {
        this.Table("REPORTPOSITIONS");
        this.ComposedId(
            x =>
            {
                x.Property(p => p.ReportId);
                x.Property(p => p.DeskId);
                x.Property(p => p.CommodityId);
            });
        this.Version(x => x.Version, mapper => mapper.Generated(VersionGeneration.Always));
        this.Property(x => x.Value, mapper => mapper.Column("Position"));
    }
}

public class ReportMapping : EntityMapping<Guid, Report>
{
    public ReportMapping()
    {
        this.Table("REPORTS");
        this.Property(x => x.ReportDate, mapper => mapper.Type(NHibernateUtil.Date));
        this.Set(
            x => x.Positions,
            mapper =>
            {
                mapper.Key(km => km.Column("ReportId"));
                mapper.Lazy(CollectionLazy.Lazy);
                mapper.Inverse(true);
                mapper.Cascade(Cascade.All | Cascade.DeleteOrphans);
            },
            rel => rel.OneToMany());
    }
} 
```

这是nhibernate使用的sql：

```
INSERT INTO REPORTS
        (ReportDate,
         Id)
VALUES  ('2012-06-11T00:00:00.00' /* @p0_0 */,
         '7f4d8f3d-1175-4713-bd1c-a06d00bfc614' /* @p1_0 */)

INSERT INTO REPORTPOSITIONS
        (Position,
         CommodityId,
         DeskId,
         ReportId)
VALUES  (0 /* @p0_0 */,
         '3a7d80c4-85e9-ba4b-80d2-064f7f0b58b5' /* @p1_0 */,
         'ed7c4e75-7417-a241-a40a-0ff4bfad7172' /* @p2_0 */,
         '00000000-0000-0000-0000-000000000000' /* @p3_0 */) 
```

sql 语句中的 ReportId 是 C# 的默认值（GUID），因为我没有在控制器操作中设置它。NHibernate 为报告表生成 id。当我在控制器动作中设置 ID 时

```
report.Id = Guid.NewGuid(); 
```

sql 使用不同的 id 作为参数：

```
INSERT INTO REPORTS
        (ReportDate,
         Id)
VALUES  ('2012-06-11T00:00:00.00' /* @p0_0 */,
         '6164264e-29cd-4d9c-befd-a06d00c2defd' /* @p1_0 */)

INSERT INTO REPORTPOSITIONS
        (Position,
         CommodityId,
         DeskId,
         ReportId)
VALUES  (0 /* @p0_0 */,
         '3a7d80c4-85e9-ba4b-80d2-064f7f0b58b5' /* @p1_0 */,
         'ed7c4e75-7417-a241-a40a-0ff4bfad7172' /* @p2_0 */,
         '594b2206-7c25-4430-af18-5f2643f6c7bf' /* @p3_0 */) 
```

如何将 NHibernate 生成的 id 用于第二个表？

**更新：**

我试图明确映射 ManyToOne 部分

```
this.ManyToOne(x => x.Report, mapper => mapper.Column("ReportId")); 
```

但有了这个，它甚至不会尝试插入报告位置；

当我改为做这样的事情时

```
this.ManyToOne(x => x.Report, mapper => mapper.Column("foo")); 
```

它创建这个 sql 语句

```
INSERT INTO REPORTS
        (ReportDate,
         Id)
VALUES  ('2012-06-11T00:00:00.00' /* @p0_0 */,
         '4ff74d49-8749-400c-b079-a06d00e0bee5' /* @p1_0 */)

INSERT INTO REPORTPOSITIONS
        (foo,
         Position,
         CommodityId,
         DeskId,
         ReportId)
VALUES  ('4ff74d49-8749-400c-b079-a06d00e0bee5' /* @p0_0 */,
         0 /* @p1_0 */,
         '3a7d80c4-85e9-ba4b-80d2-064f7f0b58b5' /* @p2_0 */,
         'ed7c4e75-7417-a241-a40a-0ff4bfad7172' /* @p3_0 */,
         '00000000-0000-0000-0000-000000000000' /* @p4_0 */) 
```

现在 foo 有正确的密钥。有人可以解释这种行为并提供解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T10:14:38.493

我很可能会将其映射为复合元素并摆脱整个 id 问题。如果你想检查它，你可以创建一个唯一的约束。

```
this.Set(
        x => x.Positions,
        mapper =>
        {
            mapper.Key(km => km.Column(c => 
            {
              c.Name("ReportId");
              c.UniqueKey("ReportDeskCommodity");
            }));
            mapper.Lazy(CollectionLazy.Lazy);
        },
        rel => rel.Component(comp => 
        {
            comp.Parent(p => p.Report);

            comp.Property(
              p => p.DeskId, 
              m => m.Column(c => c.UniqueKey("ReportDeskCommodity")));

            comp.Property(
              p => p.CommodityId, 
              m => m.Column(c => c.UniqueKey("ReportDeskCommodity")));

            comp.Property(
              x => x.Value, 
              m => m.Column("Position"));
        })); 
```

如果没有充分的理由映射键，您实际上可以使其成为多对一。这是对您的域模型的更改。

```
 rel => rel.Component(comp => 
        {
            comp.Parent(p => p.Report);

            comp.ManyToOne(
              p => p.Desk, 
              m => m.Column(c => 
              {
                c.Name("DeskId");
                c.UniqueKey("ReportDeskCommodity");
              }));

            comp.ManyToOne(
              p => p.Commodity, 
              m => m.Column(c => 
              {
                c.Name("CommodityId");
                c.UniqueKey("ReportDeskCommodity");
              }));

            comp.Property(
              x => x.Value, 
              m => m.Column("Position"));
        })); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T05:59:45.077

经过一番摆弄和攀登 NHibernates 陡峭的学习曲线后，我想出了这个解决方案。

```
public class PositionMapping : ClassMapping<Position>
{
    public PositionMapping()
    {
        this.Table("REPORTPOSITIONS");
        this.ComposedId(
            x =>
            {
                x.ManyToOne(p => p.Report, mapper => mapper.Column("ReportId"));
                x.ManyToOne(p => p.Desk, mapper => mapper.Column("DeskId"));
                x.ManyToOne(p => p.Commodity, mapper => mapper.Column("CommodityId"));
            });
        this.Version(x => x.Version, mapper => mapper.Generated(VersionGeneration.Always));
        this.Property(x => x.Value, mapper => mapper.Column("Position"));
    }
} 
```

我将 ComposedId 部分声明为 ManyToOne，并从 Position 实体中删除了 Guid 属性。NHibernate 现在根据表 REPORTPOSITIONS 填充 Position 实体中的 Report、Desk 和 Commodity 属性，并将所有 Positions 保存到该表中。

# android - Eclipse中Android应用程序中的FM

> ID：10977880
> 
> 赞同：-1
> 
> 时间：2012-06-11T09:55:47.807
> 
> 标签：android, eclipse

我在 FM 应用程序中遇到问题。错误在下面的代码中：

```
String tmp=((editText)findViewById(R.id.editText1)).getText().toString(); 
```

该错误表示无法将 editText 解析为类型。这是什么意思以及如何解决它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T10:06:05.433

使用下线

```
EditText mEdttxt1=((EditText)findViewById(R.id.editText1));
String tmp= mEdttxt1.getText().toString(); 
```

代替

```
String tmp=((editText)findViewById(R.id.editText1)).getText().toString(); 
```

# c# - C#，Winforms：如何在打印时隐藏控件并以表格格式显示这些控件的内容？

> ID：10977881
> 
> 赞同：0
> 
> 时间：2012-06-11T09:55:51.843
> 
> 标签：c#, winforms, printing

我有一个销售发票表格。我在表格中使用了 datagridview、文本框、组合框。我有一个打印按钮，当我点击打印按钮时，我想从账单格式中生成相同的内容。&想要隐藏所有控件并希望以表格格式显示类似标签。

我怎样才能做到这一点？

提前致谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T10:26:37.770

Winforms 将无法为您提供帮助。没有灵丹妙药可以做到这一点。使用某些报告工具创建相同格式的报告会简单得多。

也就是说，如果您真的必须采用这种奇怪的方式，则需要使自定义控件继承自您使用的所有控件。覆盖 OnPrint 方法，并根据需要更改控件样式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T10:07:04.727

您说的是“表格格式”！。你的表格格式是什么？

# git - 审查时出现 git 和 gerrit 问题

> ID：10977884
> 
> 赞同：3
> 
> 时间：2012-06-11T09:56:08.117
> 
> 标签：git, ssh, gerrit

我正在使用 git。

当我提交代码时它很好，但在审查期间它的抛出错误

```
$ git review 
```

给我以下错误信息：

```
Is this really what you meant to do?
Type 'yes' to confirm: yes
remote: Resolving deltas: 100% (28/28)
remote: Processing changes: refs: 1, done    
To ssh://name@gerrit.company.info:29418/bdu-celery
! [remote rejected] HEAD -> refs/publish/master/abc_org_uk_geography (change 257 closed)
error: failed to push some refs to 'ssh://venud@gerrit.timetric.info:29418/bdu-celery' 
```

有人可以让我们现在如何解决这个问题

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T07:10:58.623

`git review`看起来它是 git 命令的名称别名。我认为它使用了错误的目的地参考规范。

您可以使用正确的 refs 规范将代码推送到 gerrit 服务器，例如

```
git push gerrit HEAD:refs/for/master 
```

*   **gerrit**是 gerrit git repo 的名称

*   假设您想将工作分支推送到 master

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-26T12:50:55.027

这里的问题很简单，您正试图推动一个封闭的审查——“（更改 257 已关闭）”。

更改 257 由您的提交消息中的更改 ID 标识，例如：

```
commit 67b36a52914afc3098d9da6750bb8f3d4a9561ac
Author: Paul Bourke <foo@bar.com>
Date:   Wed Mar 12 16:45:53 2014 +0000

    Hello World

    Change-Id: I5e6481e8c069591272d1aee5ab1197e94354ba8c 
```

如果您想将此作为新评论提交，请删除 Change-Id 并且 git review 将生成一个新评论：

```
git commit --amend
# delete the Change-Id line and save
git commit --amend 
```

# reporting-services - SQL 报告：重新分区图的百分比？

> ID：10977885
> 
> 赞同：0
> 
> 时间：2012-06-11T09:56:10.097
> 
> 标签：reporting-services, report, reporting, ssrs-2008

我必须创建一个包含一些百分比信息的图形： ![在此处输入图像描述](../Images/b07a59d43a3bf5a0f0ad17c070305ec9.png)

百分比可以在图形中，在饼图之外（但必须在相应部分附近）。

我没有在报表生成器 3.0 中找到如何做到这一点，你知道我该如何做到这一点吗？

实际上我有数字（例如 3300、3000、400，如果需要，我当然可以将它们转换为百分比）。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T17:54:59.007

创建饼图后，在设计模式下右键单击任何饼图，然后选择显示数据标签。您将看到图表上显示的示例值。右键单击其中一个标签并选择系列标签属性 - 然后您可以设置字体、颜色、格式等。默认是在饼图切片内显示。如果您需要控制位置，请选择其中一个示例值，然后在“属性”窗口中查看“位置”属性进行调整。

# android - 如何从联系人列表中获取联系人姓名、电话号码和电子邮件 ID？

> ID：10977887
> 
> 赞同：2
> 
> 时间：2012-06-11T09:56:15.850
> 
> 标签：android

我是 android 新手，我需要获取联系人的详细信息，但详细信息仅包括 3

1.  联系人姓名

2.  联系电话和

3.  电子邮件ID

当我按下按钮时，它将显示我所有联系人的这 3 个详细信息

我正在使用 android Eclair 2.1 版。有什么解决办法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T09:57:59.707

通过以下代码，您可以做到这一点 -

```
public void doLaunchContactPicker(View view) {
    Intent contactPickerIntent = new Intent(Intent.ACTION_PICK,Contacts.CONTENT_URI);
    startActivityForResult(contactPickerIntent, CONTACT_PICKER_RESULT);
}

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) 
{
    if (resultCode == RESULT_OK) {
        switch (requestCode) 
        {
        case CONTACT_PICKER_RESULT:
            Cursor cursor = null;
            String email = "", name = "";
            try {
                Uri result = data.getData();
                Log.v(DEBUG_TAG, "Got a contact result: " + result.toString());

                // get the contact id from the Uri
                String id = result.getLastPathSegment();

                // query for everything email
                cursor = getContentResolver().query(Email.CONTENT_URI,  null, Email.CONTACT_ID + "=?", new String[] { id }, null);

                int nameId = cursor.getColumnIndex(Contacts.DISPLAY_NAME);

                int emailIdx = cursor.getColumnIndex(Email.DATA);

                // let's just get the first email
                if (cursor.moveToFirst()) {
                    email = cursor.getString(emailIdx);
                    name = cursor.getString(nameId);
                    Log.v(DEBUG_TAG, "Got email: " + email);
                } else {
                    Log.w(DEBUG_TAG, "No results");
                }
            } catch (Exception e) {
                Log.e(DEBUG_TAG, "Failed to get email data", e);
            } finally {
                if (cursor != null) {
                    cursor.close();
                }
                EditText emailEntry = (EditText) findViewById(R.id.editTextv);
                EditText personEntry = (EditText) findViewById(R.id.person);
                emailEntry.setText(email);
                personEntry.setText(name);
                if (email.length() == 0 && name.length() == 0) 
                {
                    Toast.makeText(this, "No Email for Selected Contact",Toast.LENGTH_LONG).show();
                }
            }
            break;
        }

    } else {
        Log.w(DEBUG_TAG, "Warning: activity result not ok");
    }
} 
```

而且，还请参考这些链接 -

1.  [获取联系方式](http://www.coderzheaven.com/2011/06/13/get-all-details-from-contacts-in-android/)

2.  [如何阅读联系人](https://stackoverflow.com/a/1780818/940096)

3.  [获取所有联系方式](https://stackoverflow.com/q/9342157/940096)

不要忘记添加所需的权限 -

```
<uses-permission android:name="android.permission.READ_CONTACTS"/> 
```

在你的`AndroidManifest.xml`文件中。而且，只需根据您的需要修改此代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T10:05:12.133

您可以像这样访问地址簿；

```
ContentResolver cr = getContentResolver();
Cursor cur = cr.query(ContactsContract.Contacts.CONTENT_URI, null,null, null,ContactsContract.Contacts.DISPLAY_NAME);
int kisiSayisi =  cur.getCount();

if(kisiSayisi > 0)
{
    int KisiIndex = 0;
    while(cur.moveToNext())
    {
        String id = cur.getString(cur.getColumnIndex(BaseColumns._ID));
        String name = cur.getString(cur.getColumnIndex(ContactsContract.Contacts.DISPLAY_NAME));
        if (Integer.parseInt(cur.getString(cur.getColumnIndex(ContactsContract.Contacts.HAS_PHONE_NUMBER))) > 0)
        {
            Cursor pCur = cr.query(ContactsContract.CommonDataKinds.Phone.CONTENT_URI,null,ContactsContract.CommonDataKinds.Phone.CONTACT_ID+ " = ?", new String[] { id }, null);
            while (pCur.moveToNext())
            {
                String phone = pCur.getString(pCur.getColumnIndex(ContactsContract.CommonDataKinds.Phone.DATA));
                 //String phoneType = pCur.getString(pCur.getColumnIndex(ContactsContract.CommonDataKinds.Phone.TYPE));
                 String dogruGSM = gsmNoKontrol(phone);
                 if(dogruGSM.compareTo("0") != 0){
                        Kisi kisi = new Kisi(KisiIndex, name, dogruGSM, false);
                        MyList.add(kisi);
                        KisiIndex ++;
                 }
             }
             pCur.close();
         }
     }
 } 
```

# mongodb - 由于减号字符，mongodb mapReduce 返回 NaN

> ID：10977888
> 
> 赞同：1
> 
> 时间：2012-06-11T09:56:18.490
> 
> 标签：mongodb, mapreduce, nan

我的目标是创建这样的地图功能

```
map = function () { var key = {key:this.name-1}; emit(key, {count:1}); } 
```

我在 java 代码中传递参数“name-1”。但 mongo 将其视为“名称减 1”。所以 key 变成整数，所以在 map reduce 期间我遇到了 NaN 问题。

地图实际上是这样的

```
map = function () { var key = {key:this.name - 1}; emit(key, {count:1}); } 
```

如何克服这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T07:46:31.410

呸，这终于奏效了。

```
map = function () { var key = {key:this["name-1"]}; emit(key, {count:1}); } 
```

# php - Mongo map 减少和排序

> ID：10977893
> 
> 赞同：1
> 
> 时间：2012-06-11T09:56:31.577
> 
> 标签：php, mongodb

```
collection: users
fields: name, age 
```

我希望在 PHP 中应用一个 map reduce 函数，它将返回用户的计数，按年龄分组并按年龄排序。

我在 PHP 中找不到使用本机 php-mongo 驱动程序来执行此操作的任何好的示例。当然，我不想在客户端进行排序，因为结果可能很大。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T10:16:54.813

我将假设您已经建立了联系，并且已经对收藏夹进行了排序。您将不得不使用[MongoCollection::group()](http://www.php.net/manual/en/mongocollection.group.php)函数来获取结果

```
$keys    = array('age' => 1);
$initial = array('count' => 0);
$reduce  = "function(doc, out) { out.count++; }";

$result = $collection->group($keys, $initial, $reduce);

var_dump($result) 
```

至于排序：MongoDB 不支持对组的结果进行排序，您必须在 php.ini 中进行排序。这是因为 group() 返回单个文档而不是游标，并且在返回之前无法对其进行排序。根据文档：

*“要对分组数据进行排序，只需在返回时在客户端对其进行排序。”*

# c# - 在 asp.net 中发送批量电子邮件的最佳方式

> ID：10977894
> 
> 赞同：5
> 
> 时间：2012-06-11T09:56:32.673
> 
> 标签：c#, asp.net, email, smtp, bulk

我有一个网站，我需要向注册会员发送个性化的电子邮件。这不是广告程序（垃圾邮件），而是不时通知他们他们的状态。必须批量发送的电子邮件数量最多为 3000 封。该网站托管在 windows 2008 Server (VPS) 上，我在 IIS7 上安装了 SMTP。

在花了一些时间阅读了如何实现通过 asp.net 发送大量电子邮件的机制之后，我感到有些困惑。

* * *

从我读到的我可以：

*   在循环中同步或异步（新线程）发送它们
*   准备并将它们放在拾取目录中
*   创建一个将检查现有队列的 Windows 服务
*   从 sql server 2008 发送它们（我有快递）。

你能建议最好的方法吗？

我是否有关于将我的服务器列入黑名单的问题？

有没有更好的方法，这里没有提到，来实现这个？

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-13T19:05:37.847

关于您的服务器被列入黑名单，您“一次”发送多少并不重要，更重要的是“您将它们发送给谁”。如果您将它们发送给不想要它们的用户，并且他们将您报告为垃圾邮件发送者，那么您无疑会被周围众多 DNS 黑名单站点之一列入黑名单。

始终确保人们首先使用双重选择系统选择加入，您发送一封电子邮件，如果他们回复“激活帐户”，那么您可以向他们发送更多电子邮件，如果他们不认为他们输入了错误的地址。

就处理的最佳方式而言，我一直发现最好的方式是编写一个与站点分开运行的小型服务。您真的不想使用与 IIS 服务相同的线程发送电子邮件。

如果你真的想走完整的专业方式。您可能希望实现某种形式的消息队列系统（如 ActiveMQ 或 RabbitMQ），您可以在其中发送消息，并将它们放入队列中，然后您将创建一个 Windows 进程来监听其中一个队列，并在收到电子邮件时在发送出去。这样，如果您的邮件处理器死机，或者运行缓慢等，您可以启动更多处理器，将其连接到同一个队列，并且更多进程共享作业（简单分发）。

一种稍微不那么复杂的方法是使用 FIFO 队列，这很容易在数据库中创建，只需将电子邮件保存到带有日期戳的表中，然后使用 SELECT TOP 10 * FROM OutgoingMail ORDER BY datestamp ASC 发送它们（记住并使用适当的索引）然后使用服务将它们分批发送出去。

如果可能的话，应该从 IIS 中避免异步，因为您不希望应用程序池在您的工作中途回收。

# c# - 如何在 Windows azure 中部署一个 asp.net 网站

> ID：10977899
> 
> 赞同：0
> 
> 时间：2012-06-11T09:56:50.453
> 
> 标签：c#, asp.net, azure

我有一个在 asp.net 2.0 中的 asp.net 网站。如何在 Azure 中部署？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T15:57:33.697

您的问题非常模糊，因为现在可以通过三种方式将 ASP.NET 网站部署到 Windows Azure。：

1.  Windows Azure 网站：

    这是在预览阶段，最近才发布。您可以通过注册 Windows Azure Preview 来创建免费网站，并使用以下提供的信息创建最多 10 个免费共享网站：

    [将 ASP.NET Web 应用程序部署到 Windows Azure 网站和 SQL 数据库](https://www.windowsazure.com/en-us/develop/net/tutorials/web-site-with-sql-database/)

2.  Windows Azure 虚拟机：

    在这种方法中，您可以使用 IIS 创建自己的虚拟机，然后将 ASP.NET 应用程序直接部署到它。虚拟机是持久化的，因此您将部署到虚拟机的任何东西都将持久化。

    [创建运行 Windows Server 2008 R2 的虚拟机](https://www.windowsazure.com/en-us/manage/windows/tutorials/virtual-machine-from-gallery/)

3.  Windows Azure Web 角色

    这是基于 PaaS 的 Windows Azure 云服务，您可以使用 Windows Azure SDK 将应用程序直接部署到 Windows Azure 云，如下所述：

    [将 ASP.NET Web 应用程序部署到 Windows Azure 云服务和 SQL 数据库](https://www.windowsazure.com/en-us/develop/net/tutorials/cloud-service-with-sql-database/)

由于上面有很多信息，您可能会不知所措，我建议您坚持使用选项 #1。注册 Windows Azure Preview 并创建您的“Windows Azure 网站”并从那里开始。

# c++ - 这是一个gdb错误吗？

> ID：10977900
> 
> 赞同：4
> 
> 时间：2012-06-11T09:56:50.967
> 
> 标签：c++, string, gdb

```
 1 #include "string"
 2 using namespace std;
 3 
 4 bool m_bInited = true;
 5 int  m_imaxsize = 100;
 6 
 7 int test()
 8 {
 9     if (!m_bInited)
10     {
11         return -1;
12     }
13 
14     std::string gbkInput = "";
15     std::string utf8Input = "";
16     if (gbkInput.size() > m_imaxsize)
17     {
18         return 1;
19     }
20     return 0;
21 }
22 
23 int main()
24 {
25     test();
26     return 0;
27 } 
```

从第 16 行开始使用 gdb 步骤时，调试顺序为：

第 16 行 -> 第 20 行 -> 第 18 行 -> 第 21 行。

```
 (gdb) b 16
    (gdb) r
    Breakpoint 1, test () at main.cpp:16
    16          if (gbkInput.size() > m_imaxsize)
    (gdb) n
    20          return 0;
    (gdb) n
    18              return 1;
    (gdb) n
    21      } 
```

编译：g++ -g main.cpp -o test

为什么 gdb 显示第 18 行？并且 test() 返回值为 0。

我的 gcc 版本是 4.1.2。GNU gdb Fedora (6.8-37.el5) 或 GNU gdb (GDB) Red Hat Enterprise Linux (7.0.1-37.el5)。两个 gdb 版本都有这个问题。

顺便说一句：如果将第 14 行、第 15 行（这两个字符串 var）移动到第 9 行，就可以了。gdb 不会显示第 18 行！似乎字符串 var 导致了这个错误。

每个人都可以帮助我吗？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T12:51:32.427

此行为是旧版本 gcc/gdb 的“功能”，之前已在此处报告过：[gdb 意外行为：在嵌套 if](https://stackoverflow.com/questions/10701700/gdb-unexpected-behavior-in-nested-if)中。注意：这个问题不能被标记为另一个问题的重复，因为没有令人满意的解决方案。

该语句没有被执行。它只是看起来像。

**附录**
很容易验证语句没有被执行。添加功能

```
int one() {
   return 1;
} 
```

然后`return 1;`用`return one();`gdb 替换它会打印`return one();`，但它不会调用该函数`one()`。显然，在旧版本的 gdb 中，在 if 语句上显示右括号的执行存在问题。

请注意：这只发生在旧版本的 gdb 中，这显然是显示问题而不是程序执行不正确的问题。

# csv - 在列 csv 文件中添加制表

> ID：10977904
> 
> 赞同：0
> 
> 时间：2012-06-11T09:57:02.450
> 
> 标签：csv, sed

我需要用 400 000 行来“解析”一个 cvs 文件。简历看起来像：

```
ADDRESS ZIPCODE TOWN      NAME       DESCRIPTION 
```

我需要像这样分隔第一列：

```
ADDRESS     ZIPCODE     TOWN      NAME       DESCRIPTION 
```

看起来很容易：每次我看到 5 位数字时添加制表（之前和之后）邮政编码（所有地址都是法国邮政编码）。

但我不知道怎么做？我尝试使用 sed commande 行，但找不到好的语法。或者也许 VBA 应该更合适。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T10:37:29.157

```
sed -r 's/( [0-9]{5} )/\t\1\t/' yourFile.csv 
```

**笔记**

*   如果您的 csv格式*确实*很好，那么 column 命令可以很好地解决您的问题。例如，您的描述文本中没有“，”。

*   上面的 sed 行将检查文件的每一行，找到第一个出现的 5 个数字/数字并用 TAB 将其包装起来。我假设您文件中的邮政编码是`[space]number{5}[space]`

*   如果“地址”列中的格式相同，则 sed 行将失败。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T10:14:13.550

使用 column 命令将拆分 .csv 文件的字段，如下所示：

`column -s, -t file.csv`

# layout - GEF：如何自下而上绘制图表

> ID：10977905
> 
> 赞同：1
> 
> 时间：2012-06-11T09:57:02.703
> 
> 标签：layout, position, eclipse-gef, draw2d, bottom-up

我正在尝试在 GEF 编辑器中绘制一棵树。问题是我需要自下而上地绘制它。我有一个用于节点图形的主层和一个用于连接的连接层。主层是 a `FreeformLayer`，根编辑部分是 a `ScalableFreeformLayeredPane`。主层有一个`XYLayout`.

现在我需要找到编辑器的底部边缘（= 视口？？？），以便能够在该位置（主层的底部 y - 标记的高度 = y）绘制图形的底部级别（“令牌”）令牌）。我怎么能得到那个？

我已经尝试这样做，`BorderLayout`以便将标记绘制在编辑器的底部（`BorderLayout.BOTTOM`），并将其上方的节点绘制在 中`BorderLayout.CENTER`，但是我在选择时遇到了麻烦，并且布局远非我想要实现的.

所以基本上我想让所有节点都在一层。我可以设置令牌的位置，但它们上面的节点必须动态计算。我怎样才能做到这一点`XYLayout`？

提前谢谢了！

（或者，如果更容易实现，将标记定位在 y 中心是可以接受的）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T09:40:19.147

您可以查看 Zest Layout Algorithms 以获得一些灵感： http: [//www.eclipse.org/gef/zest/](http://www.eclipse.org/gef/zest/)

# http - 与 RestSharp 的持久 HTTP 连接

> ID：10977907
> 
> 赞同：14
> 
> 时间：2012-06-11T09:57:08.800
> 
> 标签：http, rest, http-headers, keep-alive, restsharp

我正在使用 RestSharp 使用 REST Web 服务，并将在短时间内进行大量调用。

API 的文档强烈建议使用持久的 HTTP 连接来执行此操作，但是我正在努力让这与 RestSharp 一起工作。

我尝试将“Connection: Keep-alive”标头添加到请求中，但是当我这样做时，请求失败并出现以下错误 - “可能无法使用此属性设置 Keep-Alive 和关闭。”

我可以不将此标头与 RestSharp 一起使用，还是我需要做其他事情来启用它？

任何人都可以帮忙吗？谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-19T05:15:56.587

要得到一个好的答案，你需要问一个好问题。它在文档中的什么地方这么说？（链接/参考？）“大容量”有多少请求？此外，如果您发布了有关如何添加`Connection: Keep-Alive`到 http 标头的代码，这里的某人可能能够评论您的技术并帮助您解决特定的编程问题。

此外，`Connection: Keep-Alive`可能已经存在于传出的 HttpRequests 上！使用[Fiddler](http://www.fiddler2.com/fiddler2/)或[WireShark](http://www.wireshark.org/)进行检查。我已经看过一些博客文章，其中包含 RestSharp 请求的wireshark 捕获，这些请求的`Connection: Keep-Alive`标头存在而没有任何额外的配置。例如，在使用 RestSharp 作为消费者测试其他 mvc3 功能时，[Jimmy Bogard](http://lostechies.com/jimmybogard/2011/06/24/model-binding-xml-in-asp-net-mvc-3/)使用已经具有`Connection: Keep-Alive`标头的提琴手捕获他的 RestSharp 请求。

显然，它也是内置 .Net 类（如[System.Net.Webclient](http://msdn.microsoft.com/en-us/library/system.net.webclient)）使用的默认行为`Connection: Keep-Alive`。参考[WebClient 是否使用 KeepAlive？](https://stackoverflow.com/questions/4699013/does-webclient-use-keepalive)

我认为使用保持活动将更多地是关于以最佳方式使用 RestSharp 的代码，而不是关于配置 RestSharp 本身。如果您想确保您的连接被重用，您需要确保您对 RestSharp 的使用允许通过将一个 RestClient 实例保留在范围内并在针对同一主机的多个请求中重用它。

再次使用[Fiddler](http://www.fiddler2.com/fiddler2/)或[WireShark](http://www.wireshark.org/)将帮助您捕获一些 HttpRequest 进行分析。

# c - 在 linux c 应用程序中创建自定义键盘快捷键

> ID：10977908
> 
> 赞同：1
> 
> 时间：2012-06-11T09:57:21.223
> 
> 标签：c, linux, keyboard, shortcuts

我正在尝试处理键盘快捷键，我已经知道如何处理信号，但问题是信号列表没有提供很多选择。所以我想知道是否可以处理快捷键，例如`CTRL+'key'` ，并且`key`可以是任何键盘键，如`A Z E R T Y`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-12-13T20:33:29.113

这是使用 GNU 的示例[**`readline`**](http://tiswww.case.edu/php/chet/readline/rltop.html)。您可以捕获键序列`Ctrl+P`，`Ctrl+G`等。

```
int keyPressed(int count, int key) {

        printf("key pressed: %d\n",key);
        rl_on_new_line();
        return 0;
}

int main() {
        rl_catch_signals = 0;
        rl_bind_keyseq("\\C-g",keyPressed);
        rl_bind_keyseq("\\C-p",keyPressed);
        rl_bind_keyseq("\\C-z",keyPressed);

        while(1) {
                char *line = readline("rl> ");
        } 
```

对于信号字符等[特殊字符](http://www.gnu.org/software/libc/manual/html_node/Special-Characters.html#Special-Characters)`Ctrl+C`，`Ctrl+Z`您将需要`rl_catch_signals=0`. 这样，您可以定义自己的信号处理程序。

我发现的一件事是`rl_bind_keyseq("\\C-z",keyPressed)`不会被调用，即使你`raw`在调用之前将终端置于模式`readline`。相反，终端仍将解释`Ctrl+Z`为`SIGTSTP`.

翻看源码，很明显每次`readline()`被调用，终端设置都会被[重置](https://tiswww.case.edu/php/chet/readline/readline.html#SEC38)。

```
//rltty.c
    #if defined (HANDLE_SIGNALS)
      tiop->c_lflag &= ~ISIG;
    #else
      tiop->c_lflag |= ISIG;
    #endif 
```

除非你想修改`readline`，否则我建议为特殊字符定义信号处理程序。

# ajax - 使用 jQuery AJAX 在客户端调用 Rails 服务器方法

> ID：10977909
> 
> 赞同：0
> 
> 时间：2012-06-11T09:57:21.997
> 
> 标签：ajax, ruby-on-rails-3, jquery

我正在使用 Ruby on Rails，并且我想调用一个控制器方法作为`onclick`我预先存在的链接的事件。

我正在使用 jQuery 和 AJAX 来做同样的事情。但是我对AJAX了解不多。

这是我的代码。

```
<script type="text/javascript">
$("a.browse_history").live("click", function()
{
    alert("i am here");
    $.ajax({     
    url: "/user_profile_controller.rb/save_user_history",     
    type: 'PUT'   
    }); 
});
</script> 
```

在`user_profile_controller.rb`：

```
def save_user_history 
  $doc_list << "hello hi"
end 
```

我的链接是：

```
<a href="http://localhost:3000/documents" id="browse_history" class="browse_history">Click here</a> 
```

但这不起作用..任何解决方案将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T09:23:07.883

谢谢你的回复斯特凡。

我像这样更改了我的代码：

```
<script type="text/javascript">
function u_profile(user,url,query)
{

    $.ajax({     
        type: 'POST' ,
        url: "http://localhost:3000/user_profiles",  
        data : {
            user_profile : {                         
                user_id : user ,                      
                query_term : query,
                visited_url: url
            }                     
        } ,  
        success: function(data){
            alert(data);
        }
    }); 
};  
</script> 
```

我将它作为链接的 onclick 事件调用。

它完全满足了我使用传递的数据在数据库中创建对象的要求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T10:08:11.073

您的网址看起来不对。运行`rake routes`以获取应用程序中现有路线的列表。

应该是这样的

```
 url: "/user_profile/save_user_history" 
```

或者

```
 url: "/user_profiles/save_user_history" 
```

# jquery-mobile - Jquery移动选择菜单覆盖在最右边

> ID：10977911
> 
> 赞同：0
> 
> 时间：2012-06-11T09:57:30.063
> 
> 标签：jquery-mobile, position, overlay, select-menu

我正在使用 jquery 移动选择菜单，其中 data-native-menu 为 false。问题是如果我单击选择菜单，则在最右侧覆盖弹出窗口，而不是在选择菜单控件上方。我将页面最大宽度固定为 400 像素。Jquery mobile 根据屏幕尺寸计算覆盖位置，因此如果我减小选择菜单控件上方的屏幕尺寸覆盖弹出窗口。但是我怎样才能让选择菜单在屏幕最大化模式下覆盖在我的页面大小内？

```
<div style="margin:0 auto;">
<div data-role="page" style="width:400px">

<div data-role="fieldcontain">
    <label for="select-choice-9" class="select">Shipping method(s):</label>
    <select name="select-choice-9" id="select-choice-9" multiple="multiple" data-native-menu="false">
        <option>Choose options</option>
        <option value="standard">Standard: 7 day</option>
        <option value="rush">Rush: 3 days</option>
        <option value="express">Express: next day</option>
        <option value="overnight">Overnight</option>
    </select>
</div>

</div>
</div> 
```

这是图片。灰色区域是页面大小（data-role=page）。因为我有一个更大的显示器，菜单出现在最右边。

![示例图片](../Images/bd24c5547acdde377c63f053275f0061.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T14:04:54.377

设置宽度`fieldContain div`而不是父级`div`

```
<div data-role="page">
<div data-role="fieldcontain" style="width:400px">
    <label for="select-choice-9" class="select">Shipping method(s):</label>
    <select name="select-choice-9" id="select-choice-9" multiple="multiple" data-native-menu="false">
        <option>Choose options</option>
        <option value="standard">Standard: 7 day</option>
        <option value="rush">Rush: 3 days</option>
        <option value="express">Express: next day</option>
        <option value="overnight">Overnight</option>
    </select>
</div>
</div> 
```

# mysql - MySQL加速左外连接/检查空查询

> ID：10977913
> 
> 赞同：3
> 
> 时间：2012-06-11T09:57:31.907
> 
> 标签：mysql, performance, join, null, indexing

我的查询的目的是从表 a 中获取所有行，其中性别 = f 并且用户名在 campid = xxxx 的表 b 中不存在。这是我成功使用的查询：

```
SELECT `id` 
FROM pool 
  LEFT JOIN sent 
    ON  pool.username = sent.username 
    AND sent.campid = 'YA1LGfh9' 
WHERE sent.username IS NULL 
  AND pool.gender = 'f' 
```

问题是查询需要超过 9 分钟才能完成，池表包含超过 1000 万行，并且发送的表最终会变得更大。我为许多列创建了索引，包括用户名和性别。但是，MySQL 拒绝为此查询使用我的任何索引。我什至尝试使用 FORCE INDEX。这是我的池索引和我的查询的 EXPLAIN 输出：

```
+-------+------------+----------+--------------+-------------+-----------+-------------+----------+--------+------+------------+---------+
| Table | Non_unique | Key_name | Seq_in_index | Column_name | Collation | Cardinality | Sub_part | Packed | Null | Index_type | Comment |
+-------+------------+----------+--------------+-------------+-----------+-------------+----------+--------+------+------------+---------+
| pool  |          0 | PRIMARY  |            1 | id          | A         |     9326880 |     NULL | NULL   |      | BTREE      |         |
| pool  |          1 | username |            1 | username    | A         |     9326880 |     NULL | NULL   |      | BTREE      |         |
| pool  |          1 | source   |            1 | source      | A         |           6 |     NULL | NULL   |      | BTREE      |         |
| pool  |          1 | gender   |            1 | gender      | A         |           9 |     NULL | NULL   |      | BTREE      |         |
| pool  |          1 | location |            1 | location    | A         |       59030 |     NULL | NULL   |      | BTREE      |         |
+-------+------------+----------+--------------+-------------+-----------+-------------+----------+--------+------+------------+---------+
6 rows in set (0.00 sec)

mysql> explain SELECT `id` FROM pool FORCE INDEX (username) LEFT JOIN sent ON pool.username = sent.username AND sent.campid = 'YA1LGfh9' WHERE sent.username IS NULL AND pool.gender = 'f';
+----+-------------+-------+------+---------------+------+---------+------+---------+-------------------------+
| id | select_type | table | type | possible_keys | key  | key_len | ref  | rows    | Extra                   |
+----+-------------+-------+------+---------------+------+---------+------+---------+-------------------------+
|  1 | SIMPLE      | pool  | ALL  | NULL          | NULL | NULL    | NULL | 9326881 | Using where             |
|  1 | SIMPLE      | sent  | ALL  | NULL          | NULL | NULL    | NULL |     351 | Using where; Not exists |
+----+-------------+-------+------+---------------+------+---------+------+---------+-------------------------+
2 rows in set (0.00 sec) 
```

另外，这是我发送表的索引：

```
+-------+------------+----------+--------------+-------------+-----------+-------------+----------+--------+------+------------+---------+
| Table | Non_unique | Key_name | Seq_in_index | Column_name | Collation | Cardinality | Sub_part | Packed | Null | Index_type | Comment |
+-------+------------+----------+--------------+-------------+-----------+-------------+----------+--------+------+------------+---------+
| sent  |          0 | PRIMARY  |            1 | primary_key | A         |         351 |     NULL | NULL   |      | BTREE      |         |
| sent  |          1 | username |            1 | username    | A         |         351 |     NULL | NULL   |      | BTREE      |         |
+-------+------------+----------+--------------+-------------+-----------+-------------+----------+--------+------+------------+---------+
2 rows in set (0.00 sec) 
```

你可以看到没有索引没有被使用，所以我的查询花费了非常长的时间。如果有人有涉及重新处理查询的解决方案，请向我展示一个如何使用我的数据结构执行此操作的示例，这样我就不会对如何实现和测试有任何困惑。谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T11:11:01.987

首先，您最初的查询在您放置所有内容时都是正确的……包括营地。通过使用从 Pool 到 Sent 的 LEFT JOIN，然后如前所述将所需的相等性（例如“CAMP”）拉入 WHERE 子句，最终将其转换为 INNER JOIN，因此需要双方都输入。保持原样。

您已经在已发送表上创建了用户名索引，但我会执行以下操作。

在 (CampID, UserName) 上的“已发送”表上构建索引作为复合（即：多键）索引。这样，左连接将针对两个条目进行优化。

在您的“池”表上，尝试对（性别、用户名、id）的 3 个字段进行复合索引。

通过这样做，您可以利用不必浏览包含 10+ 百万条记录的所有实际数据页面。由于索引有列进行比较，它不必查找实际记录并查看列，它可以直接使用索引的列。

另外，为了微笑，我添加了关键字“STRAIGHT_JOIN”，它告诉 MySQL 完全按照我显示的方式查询，不要试图为我思考。很多时候，我发现这可以显着提高查询性能......我很少收到反馈说它没有帮助。

```
SELECT STRAIGHT_JOIN
      p.id
   FROM 
      pool p
         LEFT JOIN sent s
            ON s.campid = 'YA1LGfh9' 
            AND p.username = s.username 
   WHERE 
          p.gender = 'f'
      AND s.username IS NULL 
```

话虽如此，您仍将返回 10+ 百万中的多少条记录……如果池中有 10+ 百万，而单个阵营只有 5,000。你仍然会返回几乎整个集合。

# mysql - 如何更正此 MySQL 数据库设置？

> ID：10977915
> 
> 赞同：0
> 
> 时间：2012-06-11T09:57:34.310
> 
> 标签：mysql

[在运行 PHP/ Drupal](https://en.wikipedia.org/wiki/Drupal)查询时，我的一个 MySQL 数据库当前使用超过 99% 的 CPU 。

我正在调查根本原因是什么。

使用以下分析和配置数据，您能否提出主要数据库设置问题或缺少/不正确的配置？

[`free`](https://linux.die.net/man/1/free)在 Bash 中的输出：

```
 total       used       free     shared    buffers     cached
Mem:          2048       1635        412          0          0          0
-/+ buffers/cache:       1635        412
Swap:            0          0          0 
```

输出`ps auxf`：

```
root      7430  0.0  0.0   9176  1400 ?        S    May30   0:00
/bin/sh /usr/local/mysql/bin/mysqld_safe --user=mysql --datadir=/usr/local/mysql/data --pid-file=/usr/local/mysql/data/db.pid
mysql     7617  0.6 12.3 486900 258956 ?       Sl   May30 114:26  \_ /usr/local/mysql/bin/mysqld --basedir=/usr/local/mysql --datadir=/usr/local/mysql/data --plugin-dir=/usr/local/mysql/lib/plugin --user=mysql --log-error=/usr/local/mysql/data/db.err --pid-file=/usr/local/mysql/data/db.pid --socket=/tmp/mysql.sock 
```

这是`my.cnf`文件：

```
[mysqld]
socket=/tmp/mysql.sock
local-infile=0
tmpdir=/dev/shm
max_allowed_packet=100M 
```

这是输出`sql show status`：

```
SQL result

Host: localhost
Database: db
Generation Time: Jun 11, 2012 at 09:22 AM
Generated by: phpMyAdmin 3.4.7.1 / MySQL 5.5.24
SQL query: SHOW STATUS;
Rows: 310

Variable_name    Value
Aborted_clients    242
Aborted_connects    50
Binlog_cache_disk_use    0
Binlog_cache_use    0
Binlog_stmt_cache_disk_use    0
Binlog_stmt_cache_use    0
Bytes_received    221
Bytes_sent    1421
Com_admin_commands    0
Com_assign_to_keycache    0
Com_alter_db    0
Com_alter_db_upgrade    0
Com_alter_event    0
Com_alter_function    0
Com_alter_procedure    0
Com_alter_server    0
Com_alter_table    0
Com_alter_tablespace    0
Com_analyze    0
Com_begin    0
Com_binlog    0
Com_call_procedure    0
Com_change_db    1
Com_change_master    0
Com_check    0
Com_checksum    0
Com_commit    0
Com_create_db    0
Com_create_event    0
Com_create_function    0
Com_create_index    0
Com_create_procedure    0
Com_create_server    0
Com_create_table    0
Com_create_trigger    0
Com_create_udf    0
Com_create_user    0
Com_create_view    0
Com_dealloc_sql    0
Com_delete    0
Com_delete_multi    0
Com_do    0
Com_drop_db    0
Com_drop_event    0
Com_drop_function    0
Com_drop_index    0
Com_drop_procedure    0
Com_drop_server    0
Com_drop_table    0
Com_drop_trigger    0
Com_drop_user    0
Com_drop_view    0
Com_empty_query    0
Com_execute_sql    0
Com_flush    0
Com_grant    0
Com_ha_close    0
Com_ha_open    0
Com_ha_read    0
Com_help    0
Com_insert    0
Com_insert_select    0
Com_install_plugin    0
Com_kill    0
Com_load    0
Com_lock_tables    0
Com_optimize    0
Com_preload_keys    0
Com_prepare_sql    0
Com_purge    0
Com_purge_before_date    0
Com_release_savepoint    0
Com_rename_table    0
Com_rename_user    0
Com_repair    0
Com_replace    0
Com_replace_select    0
Com_reset    0
Com_resignal    0
Com_revoke    0
Com_revoke_all    0
Com_rollback    0
Com_rollback_to_savepoint    0
Com_savepoint    0
Com_select    0
Com_set_option    2
Com_signal    0
Com_show_authors    0
Com_show_binlog_events    0
Com_show_binlogs    0
Com_show_charsets    0
Com_show_collations    0
Com_show_contributors    0
Com_show_create_db    0
Com_show_create_event    0
Com_show_create_func    0
Com_show_create_proc    0
Com_show_create_table    0
Com_show_create_trigger    0
Com_show_databases    0
Variable_name     Value
Com_show_engine_logs    0
Com_show_engine_mutex    0
Com_show_engine_status    0
Com_show_events    0
Com_show_errors    0
Com_show_fields    0
Com_show_function_status    0
Com_show_grants    0
Com_show_keys    0
Com_show_master_status    0
Com_show_open_tables    0
Com_show_plugins    1
Com_show_privileges    0
Com_show_procedure_status    0
Com_show_processlist    0
Com_show_profile    0
Com_show_profiles    0
Com_show_relaylog_events    0
Com_show_slave_hosts    0
Com_show_slave_status    0
Com_show_status    1
Com_show_storage_engines    0
Com_show_table_status    0
Com_show_tables    0
Com_show_triggers    0
Com_show_variables    0
Com_show_warnings    0
Com_slave_start    0
Com_slave_stop    0
Com_stmt_close    0
Com_stmt_execute    0
Com_stmt_fetch    0
Com_stmt_prepare    0
Com_stmt_reprepare    0
Com_stmt_reset    0
Com_stmt_send_long_data    0
Com_truncate    0
Com_uninstall_plugin    0
Com_unlock_tables    0
Com_update    0
Com_update_multi    0
Com_xa_commit    0
Com_xa_end    0
Com_xa_prepare    0
Com_xa_recover    0
Com_xa_rollback    0
Com_xa_start    0
Compression    OFF
Connections    9376
Created_tmp_disk_tables    1
Created_tmp_files    6
Created_tmp_tables    1
Delayed_errors    0
Delayed_insert_threads    0
Delayed_writes    0
Flush_commands    1
Handler_commit    0
Handler_delete    0
Handler_discover    0
Handler_prepare    0
Handler_read_first    0
Handler_read_key    0
Handler_read_last    0
Handler_read_next    0
Handler_read_prev    0
Handler_read_rnd    0
Handler_read_rnd_next    21
Handler_rollback    0
Handler_savepoint    0
Handler_savepoint_rollback    0
Handler_update    0
Handler_write    20
Innodb_buffer_pool_pages_data    8142
Innodb_buffer_pool_pages_dirty    0
Innodb_buffer_pool_pages_flushed    1269726
Innodb_buffer_pool_pages_free    0
Innodb_buffer_pool_pages_misc    49
Innodb_buffer_pool_pages_total    8191
Innodb_buffer_pool_read_ahead_rnd    0
Innodb_buffer_pool_read_ahead    1306
Innodb_buffer_pool_read_ahead_evicted    8907
Innodb_buffer_pool_read_requests    139892912
Innodb_buffer_pool_reads    308579
Innodb_buffer_pool_wait_free    0
Innodb_buffer_pool_write_requests    5066182
Innodb_data_fsyncs    313257
Innodb_data_pending_fsyncs    0
Innodb_data_pending_reads    0
Innodb_data_pending_writes    0
Innodb_data_read    5084336128
Innodb_data_reads    308981
Innodb_data_writes    658963
Innodb_data_written    22884830208
Innodb_dblwr_pages_written    634863
Innodb_dblwr_writes    19355
Innodb_have_atomic_builtins    ON
Innodb_log_waits    0
Innodb_log_write_requests    3971026
Innodb_log_writes    266658
Innodb_os_log_fsyncs    273603
Variable_name     Value
Innodb_os_log_pending_fsyncs    0
Innodb_os_log_pending_writes    0
Innodb_os_log_written    2077984256
Innodb_page_size    16384
Innodb_pages_created    55793
Innodb_pages_read    310189
Innodb_pages_written    634863
Innodb_row_lock_current_waits    0
Innodb_row_lock_time    185765
Innodb_row_lock_time_avg    476
Innodb_row_lock_time_max    30082
Innodb_row_lock_waits    390
Innodb_rows_deleted    96261
Innodb_rows_inserted    243234
Innodb_rows_read    73669737
Innodb_rows_updated    367966
Innodb_truncated_status_writes    0
Key_blocks_not_flushed    0
Key_blocks_unused    6657
Key_blocks_used    851
Key_read_requests    33873766
Key_reads    3991
Key_write_requests    5515715
Key_writes    11500
Last_query_cost    2.399000
Max_used_connections    22
Not_flushed_delayed_rows    0
Open_files    41
Open_streams    0
Open_table_definitions    400
Open_tables    400
Opened_files    141222
Opened_table_definitions    0
Opened_tables    0
Performance_schema_cond_classes_lost    0
Performance_schema_cond_instances_lost    0
Performance_schema_file_classes_lost    0
Performance_schema_file_handles_lost    0
Performance_schema_file_instances_lost    0
Performance_schema_locker_lost    0
Performance_schema_mutex_classes_lost    0
Performance_schema_mutex_instances_lost    0
Performance_schema_rwlock_classes_lost    0
Performance_schema_rwlock_instances_lost    0
Performance_schema_table_handles_lost    0
Performance_schema_table_instances_lost    0
Performance_schema_thread_classes_lost    0
Performance_schema_thread_instances_lost    0
Prepared_stmt_count    0
Qcache_free_blocks    0
Qcache_free_memory    0
Qcache_hits    0
Qcache_inserts    0
Qcache_lowmem_prunes    0
Qcache_not_cached    0
Qcache_queries_in_cache    0
Qcache_total_blocks    0
Queries    4346053
Questions    5
Rpl_status    AUTH_MASTER
Select_full_join    0
Select_full_range_join    0
Select_range    0
Select_range_check    0
Select_scan    1
Slave_heartbeat_period    0.000
Slave_open_temp_tables    0
Slave_received_heartbeats    0
Slave_retried_transactions    0
Slave_running    OFF
Slow_launch_threads    0
Slow_queries    0
Sort_merge_passes    0
Sort_range    0
Sort_rows    0
Sort_scan    0
Ssl_accept_renegotiates    0
Ssl_accepts    0
Ssl_callback_cache_hits    0
Ssl_cipher
Ssl_cipher_list
Ssl_client_connects    0
Ssl_connect_renegotiates    0
Ssl_ctx_verify_depth    0
Ssl_ctx_verify_mode    0
Ssl_default_timeout    0
Ssl_finished_accepts    0
Ssl_finished_connects    0
Ssl_session_cache_hits    0
Ssl_session_cache_misses    0
Ssl_session_cache_mode    NONE
Ssl_session_cache_overflows    0
Ssl_session_cache_size    0
Ssl_session_cache_timeouts    0
Ssl_sessions_reused    0
Ssl_used_session_cache_entries    0
Ssl_verify_depth    0
Ssl_verify_mode    0
Ssl_version
Table_locks_immediate    5113600
Variable_name     Value
Table_locks_waited    17
Tc_log_max_pages_used    0
Tc_log_page_size    0
Tc_log_page_waits    0
Threads_cached    0
Threads_connected    1
Threads_created    9375
Threads_running    1
Uptime    1074227
Uptime_since_flush_status    1074227 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T10:15:24.460

我还会仔细检查执行了哪些查询以及在哪些表上执行。我不知道 Drupal 是否有某种用于查询的调试/分析模式，但值得一试。

从这些中，也尝试用 EXPLAIN 来检查它们（例如，某些表可能需要索引）。

我知道您的网站在 Drupal 中，至少应该在其核心表上进行了优化。

# c# - 在另一个范围内赋予不同的含义

> ID：10977917
> 
> 赞同：1
> 
> 时间：2012-06-11T09:57:36.707
> 
> 标签：c#, c#-4.0

在这里我有一部分代码。在这里我得到了错误。

错误 >>不能在此范围内声明名为“msg”的局部变量，因为它会给“msg”赋予不同的含义，后者已在“父或当前”范围中用于表示其他内容

但我使用了 SMSHelper 类中的所有东西。那么另一个范围是什么

```
public class SMSHelper
{
    private string msg;
    private string convertToISOfromUtf8(String msg, String to, String from)
    {

        String iso_msg = null;
        if (from.Equals("UTF-8"))
        {
            System.Text.Encoding iso = Encoding.GetEncoding("ISO-8859-1");
            System.Text.Encoding utf8 = Encoding.UTF8;

            byte[] utfBytes = utf8.GetBytes(msg);
            byte[] isoBytes = Encoding.Convert(utf8, iso, utfBytes);
            String msg = iso.GetString(isoBytes);
        } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-11T10:02:25.867

下面标记的三行`<-- this`分别代表一个单独变量的声明，每个变量都具有相同的名称`msg`。因此，它们相互冲突。

```
private string msg; // <-- this
private string convertToISOfromUtf8(String msg // <-- this
{
    // ...
    if (from.Equals("UTF-8"))
    {
        // ...
        String msg // <-- and this
    }
} 
```

以下将起作用：

```
private string _msg;
private string convertToISOfromUtf8(String msg, // ...
{
    // ...
    if (from.Equals("UTF-8"))
    {
        // ...
        _msg = iso.GetString(isoBytes);
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-11T09:59:04.950

您有一个名为的参数`msg`- 您的局部变量不能具有相同的名称。您还拥有同名的类级别变量 - 只要您使用`this.msg`.

我怀疑您不想在最后一行声明一个新变量：

```
String msg = iso.GetString(isoBytes); 
```

此处显示了调用的 3 个变量`msg`：

```
public class SMSHelper
{
private string msg;     // <-- #1
private string convertToISOfromUtf8(String msg /* <-- #2 */, String to, String from)
{

    String iso_msg = null;
    if (from.Equals("UTF-8"))
    {
        System.Text.Encoding iso = Encoding.GetEncoding("ISO-8859-1");
        System.Text.Encoding utf8 = Encoding.UTF8;

        byte[] utfBytes = utf8.GetBytes(msg);
        byte[] isoBytes = Encoding.Convert(utf8, iso, utfBytes);
        String msg = iso.GetString(isoBytes);    // <-- #3
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T10:01:18.383

[局部变量声明](http://msdn.microsoft.com/en-us/library/aa664742%28v=vs.71%29.aspx)（C# 规范的第 8.5.1 节）

从第 8.5.1 节开始：

> 在*local-variable-declaration*中声明的局部变量的范围是发生声明的块。在局部变量的局部变量声明符之前的文本位置引用局部变量是错误的。在局部变量的范围内，声明另一个同名的局部变量或常量是编译时错误

* * *

您已经在方法声明中声明了具有 smae 名称的变量..

现在在方法中，您通过执行再次声明参数

```
String msg = iso.GetString(isoBytes); 
```

导致问题。

这也会产生 smae 错误

```
 private string msg;

    public void test(String msg)
    {
        msg = null;
        string msg = "abc";
    } 
```

这里相同的变量被声明了三次，但实际问题是由相同变量的第三次声明引起的，该变量在相同的范围内，您可以在 sepcification 链接中看到

第二个声明只是隐藏了同名的类级别变量。它不会导致任何错误..

# java - 孪生扫描仪部分扫描

> ID：10977918
> 
> 赞同：1
> 
> 时间：2012-06-11T09:57:39.373
> 
> 标签：java, scanning, twain

我使用 twain 2.1 连接到扫描仪。如何将扫描仪设置为仅扫描页面的一部分而不显示扫描仪的预览页面。我使用了 source.setRegionOfInterest 方法，但它没有完成扫描，并且扫描仪在重新启动之前无法使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T05:42:40.913

要获取的图像区域将始终是一个称为框架的矩形。页面上可能有一个或多个框架。TW_FRAME 结构指定要获取的帧的 Left、Right、Top 和 Bottom 的值。

# mysql - MySQL 多级父子 SP 和 IN 子句

> ID：10977921
> 
> 赞同：3
> 
> 时间：2012-06-11T09:57:51.953
> 
> 标签：mysql, sql

我正在处理`referrals`包含父子关系的表

![在此处输入图像描述](../Images/0825f035d30bdd5c70d3f26ec32517d3.png)

我需要得到父母 -> 孩子 -> 其他孩子 -> ....

对于上表数据，我想要的结果是

![在此处输入图像描述](../Images/f4cccd99c0f8a154e3407c4a7ce14b2d.png)

我从 SOF 看到了一些代码，但不知道它们是如何工作的，并在我的脑海中尝试了一个非常简单的逻辑，但不幸的是，由于一个奇怪的原因它不能正常工作

我已经为它编写了存储过程，但遇到了一个问题`IN CLAUSE`

```
DELIMITER $$

DROP PROCEDURE IF EXISTS `GetHierarchy3`$$

CREATE DEFINER=`root`@`localhost` PROCEDURE `GetHierarchy3`()
BEGIN
    DECLARE idss VARCHAR(225);
    SET @currentParentID := 999999;
    SET @lastRowCount := 0;

  ## A ##   
        INSERT INTO referrals_copy SELECT * FROM referrals WHERE uid1 = @currentParentID;

    SET @lastRowCount := ROW_COUNT();

 ## B ##
        SELECT GROUP_CONCAT(uid2)  INTO @idss FROM referrals WHERE  uid1 = @currentParentID;

    #SELECT @lastRowCount;
    SELECT * FROM referrals_copy;

    WHILE @lastRowCount > 0 DO
    SELECT "here";

        SELECT @idss;
  ## C ##
            INSERT INTO referrals_copy SELECT uid1, uid2 FROM referrals 
                WHERE uid1 IN (@idss);
            SET @lastRowCount := ROW_COUNT();
        #set @ids := NULL;
        SELECT @idss;
        SELECT GROUP_CONCAT(uid2) FROM referrals WHERE  uid1 IN (@idss);
        SELECT @idss;
        SET @lastRowCount := 0;

    END WHILE;

    -- return the final set now
    SELECT 
            *
        FROM referrals_copy;

END$$

CALL GetHierarchy3(); 
```

首先，我在第一个查询中得到我想要的主要父母的孩子`A`，工作正常

然后，将主父级的子级获取到变量`@idss`查询`B`中，工作正常

然后在循环中我使用`idss`查询中的变量来获取其子查询`C`并将它们放入结果表中......这是有问题的部分

这里是我`1111,2222`在变量中的第一次迭代，`idss`这应该会导致在表中插入值`{3333, 4444} child of 1111, and {5555} child of 2222`，但它只放置了`1111`ie的子级，`3333,4444`而不是`5555`

我尝试从查询中替换变量`C`以进行检查，并且它与`1111,2222' within`IN Claues中的值一起工作正常`

关于为什么 IN 子句不接受来自组 concat 的逗号分隔值的任何想法或关于修复此代码的任何想法

问候

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-11T11:03:02.247

试试这个`FIND_IN_SET(uid1,@idss)`

您必须替换此查询部分

`SELECT GROUP_CONCAT(uid2) FROM referrals WHERE uid1 IN (@idss);`

进入这个

`SELECT GROUP_CONCAT(uid2) FROM referrals WHERE FIND_IN_SET(uid1,@idss);`

我希望它对你有用....

# java - 如何对扩展/继承第 3 方类的类进行单元测试

> ID：10977927
> 
> 赞同：5
> 
> 时间：2012-06-11T09:58:00.003
> 
> 标签：java, unit-testing, jmock, sitemesh

我创建了一个扩展第 3 方抽象类的新类。新类调用抽象类中的方法。我遇到的问题是在尝试编写单元测试时，我不确定如何编写测试，因为我不知道 3rd 方类所需的确切细节。

下面的 AbstractDecoratorMapper 是 SiteMesh 特定的类，我必须扩展它才能使 SiteMesh 正常工作。据我从文档中可以看出，我不能使用组合。

```
public final class PartnerDecoratorMapper extends AbstractDecoratorMapper {

    @Override
    public void init(Config config, Properties properties, DecoratorMapper parent) throws InstantiationException {
        super.init(config, properties, parent);
    }

    @Override
    public Decorator getDecorator(HttpServletRequest request, Page page) {
        if (super.getDecorator(request, page).getName().equalsIgnoreCase("default")) {
            return getNamedDecorator(request, "externalPartnerDefault");
        }
        return super.getDecorator(request, page);
    }
} 
```

如果这个工具可以提供任何帮助，我会使用 JMock。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T10:00:31.780

您不需要了解 3rd 方库的详细信息……您只需要模拟它们返回您期望从它们那里得到的东西。

在您继承它的情况下，您可以设置该类，因为它将在生产中使用并调用应该在常规使用中调用的方法。您需要检查的只是结果是否符合您的预期。（您不需要确切知道第 3 方课程在测试中的工作方式）。

为了检查您实现的所有代码是否已执行，您可以使用插件来检查覆盖率，例如 eclemma - [http://www.eclemma.org/](http://www.eclemma.org/)）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-11T11:20:01.477

使用 JMock，据我所知，您无法模拟对被测类的超类的调用。

[这个相关问题](https://stackoverflow.com/questions/622763/can-i-mock-a-super-class-method-call)的答案可能很有用，但主要的答案是切换到支持这个的模拟框架（建议使用[JMockit](http://code.google.com/p/jmockit/)）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-11T11:58:58.773

您可能会问两件事。我会尽力回答这两个问题。

可能的问题 1) 我如何测试我的附加功能？

可能的问题2）我如何测试组合功能是否合适？

让我从问题 1 开始。

我建议一个简单的果皮。这里有一个技术视频：[http](http://www.youtube.com/watch?v=p0tILwRZH5Q) ://www.youtube.com/watch?v=p0tILwRZH5Q （视频是 c# 但在 java 中基本相同）

这意味着您之后将拥有以下代码

```
@Override
public Decorator getDecorator(HttpServletRequest request, Page page) {
    Decorator d = super.getDecorator(request, page);
    return getResolvedDecorator(d, d.getName(), request);

}
public Decorator getResolvedDecorator(Decorator current, String name, HttpServletRequest request) {
    if (name.equalsIgnoreCase("default")) {
        return getNamedDecorator(request, "externalPartnerDefault");
    }
    return current;
} 
```

现在你可以用这样的电话来测试它

```
assertEquals(expected, new PartnerDecoratorMapper().getResolvedDecorator(null, "default", MockHttpServletRequest); 
```

我建议也可能从 HttpServletRequest 中删除数据，以使测试和意图更清晰。

注意：这具有额外的性能优势，即对 super.getDecorator() 的调用只发生一次，因为结果被缓存了。

附加说明：还值得注意的是，init() 的覆盖是不需要的，实际上并没有做任何事情。

问题 2：这是一个更难的问题，因为您没有说明所需的行为是什么。我假设这是一种工厂模式，所以很可能它会以某种方式工作

| http请求质量1 | 页面质量 1| 预期装饰者 | | /mypath/mypage | 状态 = 富 | 我的装饰器 |

（我不知道上面的图表应该包含什么或看起来像什么）一旦你有这种行为，那么测试以确保它会相当简单。

快乐测试，卢埃林

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-11T12:24:13.787

> 因为我不知道第 3 方课程需要的确切细节

任何类型的测试都会比较某事*实际*做了什么和它*应*该做什么。在您知道应该做什么之前，您无法进行测试：“第 3 部分课程需要什么”。

如果你不知道基类需要什么，你怎么能做出任何合理的尝试来编写你的派生类呢？您要扩展的类的 API 文档是怎么说的？

问题可能是没有这样的 API 文档，还是没有提供信息？可能是，尽管该类不是`final`，但它并不是真正打算用作基类。其中任何一个都表明 API 设计不佳，建议您不要费心使用它

还是您不知道**确切**细节的关键困难？这可能是您的方法中的一个缺陷：通常您不能也不能对**确切的**细节做出假设。您的代码应符合文档化 API，并且您不应假设文档化 API 中未说明的任何内容。这可能意味着您无法知道何时调用模板方法或将传递给它们的值是什么。如果基类通过传递声明为实现类`interface`或非`final`类的对象（即指定其*类型*但未指定其*类*）与您的模板方法进行通信，则您无法知道这些对象将具有什么类。

# php - 如果重定向，则跳过输出主 HTML

> ID：10977932
> 
> 赞同：1
> 
> 时间：2012-06-11T09:58:23.903
> 
> 标签：php, performance, optimization, redirect

在主`index.php`文件中，如果用户使用手机，我将重定向用户。但是在发送`Location`标头之后，HTML 的其余部分也将不必要地发送给用户。有没有办法防止这种情况并跳过发送正常的 HTML？

代码如下所示：

```
<?php

if(preg_match(...)){
  header('Location: http://m.mysite.com/');
}

?>

<html>
...normal version of the website...
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T10:00:18.227

总是`exit;`在标题（'Location'）之后，因此操作不会继续。那应该可以解决您的问题。

# joomla - Joomla！用于跟踪用户总登录时间的 Community Builder 扩展

> ID：10977933
> 
> 赞同：0
> 
> 时间：2012-06-11T09:58:34.430
> 
> 标签：joomla, content-management-system

感谢您在忙碌的一天中抽出时间阅读我的帖子。

我的客户要求我跟踪用户登录我们的 Community Builder Joomla 站点的总时间。我正在寻找一个开箱即用的解决方案，所以我不必重新发明轮子。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T17:17:26.370

这不是专门针对社区建设者的，但它确实记录了所有已登录的注册用户、他们的 IP 地址、他们登录的次数、来自哪些国家和城市以及 Joomla 1.5 和 2.5 的其他位n bobs .

[http://extensions.joomla.org/extensions/site-management/analytics/visitors/8946](http://extensions.joomla.org/extensions/site-management/analytics/visitors/8946)

希望这对您有所帮助。问候

# python - 打印列表时python中的Unicode错误

> ID：10977943
> 
> 赞同：1
> 
> 时间：2012-06-11T09:59:09.923
> 
> 标签：python, unicode

编辑： http: [//pastebin.com/W4iG3tjS](http://pastebin.com/W4iG3tjS) - 文件

我有一个用 utf8 编码的文本文件，其中包含一些西里尔文文本。要加载它，我使用以下代码：

```
import codecs
fopen = codecs.open('thefile', 'r', encoding='utf8')
fread = fopen.read() 
```

`fread`将文件转储到屏幕上所有 unicodish（转义序列）。`print fread`以可读的形式显示它（我猜是ASCII）。

然后我尝试拆分它并将其写入一个没有编码的空文件：

```
a = fread.split()
for l in a: 
    print>>dasFile, l 
```

但我收到以下错误消息：`UnicodeEncodeError: 'ascii' codec can't encode characters in position 0-13: ordinal not in range(128)`

有没有办法转储`fread.split()`到文件中？我怎样才能摆脱这个错误？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T10:04:17.487

由于您已通过 打开并读取文件`codecs.open()`，因此已将其解码为 Unicode。因此，要输出它，您需要再次对其进行编码，大概回到 UTF-8。

```
for l in a:
    dasFile.write(l.encode('utf-8')) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T10:04:31.233

print 将使用默认编码，通常是“ascii”。因此，您会在 print 中看到该错误。但是您可以打开一个文件并直接写入它。

```
a = fopen.readlines() # returns a list of lines already, with line endings intact
# do something with a
dasFile.writelines(a) # doesn't add line endings, expects them to be present already. 
```

假设 a 中的行已经编码。

PS。您还应该调查该`io`模块。

# css - 在 LESS 的导入指令中使用变量

> ID：10977944
> 
> 赞同：4
> 
> 时间：2012-06-11T09:59:10.657
> 
> 标签：css, less

我找不到在`import`LESS 指令中使用变量的方法。

我有一个 @cdnUri 变量，它从 JavaScript 中获取它的值：

```
@cdnUri: `window.cdnUri`; 
```

`cdnUri`可以`http://localhost/cdn`处于开发模式或`http://cdn.example.com`生产模式。

我想要的是导入其他带有此 URL 的 LESS 文件。像这样：

```
@import "@{cdnUri}/shared/twitter-bootstrap/less/bootstrap.less" 
```

但它给了我这个错误，因为它不解析来自 url 的变量。

```
Couldn't load http://wordy/ui/frontend/themes/default2/ui/css/@{cdnUri}/ui/shared/js/twitter-bootstrap/less/bootstrap.less (404) 
```

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T11:44:37.673

这不是您问题的直接答案，但 LESS 导入始终与当前文件相关，因此无法从另一个域导入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T13:24:18.303

这是一个已知的 less.js 错误。一年来部分修复它。

这是你想要的：

[LESS CSS，来自变量的@import 路径](https://stackoverflow.com/questions/10676628/less-css-import-path-from-variable)

说说这个bug。

[https://github.com/cloudhead/less.js/pull/1108](https://github.com/cloudhead/less.js/pull/1108)

这是新的来源。

# javascript - 点击文本上的ajax标签

> ID：10977948
> 
> 赞同：-2
> 
> 时间：2012-06-11T09:59:17.413
> 
> 标签：javascript, ajax

我想在带有 onClick 事件的文本字段中显示标签的内容我该怎么做，是否有任何特定的方法可以做到这一点，或者有没有其他方法。

请帮助我是ajax的新手。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T10:05:18.777

不需要ajax，你可以通过使用jquery来做到这一点

在 html 中：

```
 <input type="text" name="txt1" value="" id="txt"/>
  <label for="checking" id="label">checking</label>
  <input type="submit" name="submit" value="Click" id="butt" /> 
```

在 Javascript 中：

```
 $("#butt").click(function(){
     var lab_val = $("#label").text();
     document.getElementByID("txt").value =lab_val;
     // or $("#txt").val(lab_val);
   }); 
```

# facebook - 错误 opengraph 子域

> ID：10977951
> 
> 赞同：0
> 
> 时间：2012-06-11T09:59:29.643
> 
> 标签：facebook, facebook-opengraph

我正在用 opengraph 做一些测试，在我的子域 dev.site.com 上一切正常，所以我激活了它。

我尝试在我的网站 site.com 上使用它，但出现此错误：

{"error":{"message":"(#100) 应用程序不拥有 252217774887165 操作类型","type":"OAuthException","code":100}}

我试图删除一个动作并声明一个新动作（我想可能是因为使用 dev.site url 声明它们）但即使对于未激活的新动作，我仍然会收到此错误。

我在网上没有找到有关此错误的任何信息...

谢谢 ！

# c++ - 如何让 QChar.unicode() 报告组合字符的 utf-16 表示？

> ID：10977955
> 
> 赞同：2
> 
> 时间：2012-06-11T09:59:47.583
> 
> 标签：c++, qt, unicode, qstring, codepoint

我正在尝试为[Code page 437](http://en.wikipedia.org/wiki/Code_page_437)编写编解码器。我的计划是只传递 ASCII 字符并将剩余的 128 个字符映射到一个表中，使用 utf-16 值作为键。

对于某些组合字符（带点的字母、波浪线等），该字符似乎占据了两个 QChar。

打印程序参数的 utf-16 值的测试程序：

```
#include <iostream>
#include <QString>

using namespace std;

void print(QString qs)
{
    for (QString::iterator it = qs.begin(); it != qs.end(); ++it)
        cout << hex << it->unicode() << " ";
    cout << "\n";
}

int main(int argc, char *argv[])
{
    for (int i = 1; i < argc; i++)
        print(QString::fromStdString(argv[i]));
} 
```

一些输出：

```
$ ./utf16 Ç ü é
c3 87 
c3 bc 
c3 a9 
```

我曾预料到

```
c387
c3bc
c3a9 
```

尝试了 QString 中可用的各种规范化形式，但没有人的字节数比默认值少。

由于 QChar 是 2 个字节，它应该能够将上述字符的值保存在一个对象中。为什么 QString 使用两个 QChar？如何获取组合的 unicode 值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T10:54:31.643

1.  `QString::fromStdString`需要一个 ASCII 字符串并且不进行任何解码。改为使用`fromLocal8Bit`。

2.  您的预期输出是错误的。例如，`Ç`是 U+00C7，所以你应该期待 C7，*而不是*C3 87 的 UTF-8 编码！

如果您`main()`进行如下修改，您将获得预期的 Unicode 代码点。对于每个字符，第一行列出了本地编码（此处为：Utf-8），因为`fromStdString`它本质上是一个无操作并且直接传递所有内容。第二行列出了正确解码的 Unicode 代码点索引。

```
$ ./utf16 Ç ü é
c3 87 
c7 
c3 bc 
fc 
c3 a9 
e9 
```

```
int main(int argc, char *argv[])
{
    for (int i = 1; i < argc; i++) {
        print(QString::fromStdString(argv[i]));
        print(QString::fromLocal8Bit(argv[i]));
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T14:17:40.760

只是回避问题。见[`QApplication`Unicode](https://stackoverflow.com/questions/4072016/qapplication-in-unicode)。`QApplication::arguments`考虑到本地约定，已经为您进行了 UTF-16 编码。

# wpf - 另一个 wpf 列表框刷新

> ID：10977960
> 
> 赞同：0
> 
> 时间：2012-06-11T09:59:57.130
> 
> 标签：wpf

由于我是 wpf 的新手，所以我在有关类似主题的网页中迷失了自己。我希望有人可以帮助我解释一些我无法理解的基本内容。

我有一个通过 websocket 连接到服务器的 wpf 应用程序。服务器每 5 秒向我返回一个列表。每个新列表都与旧列表无关。当我得到新列表时，旧列表不再重要。我对他的 ID 感兴趣的玩家（在列表中）的唯一属性。

不知何故，我需要刷新或更新列表框。我以这种方式使用了 observable 集合：

```
private static ObservableCollection<Player> sample;
private static List<Player> sample2 = new List<Player>();
public List<Player> update
{
   set
   {
   sample2 = value;
   sample = new ObservableCollection<Player>((List<Player>) sample2);      
   onPropertyChanged(sample, "ID");
   }
 }

 private void onPropertyChanged(object sender, string propertyName)
 {
   if (this.PropertyChanged != null)
     PropertyChanged(sender, new PropertyChangedEventArgs(propertyName));
 } 
```

调试时，propertychanged 始终为空。我真的迷失了如何更新列表框。

列表框的 xaml 如下所示：

```
<DataTemplate x:Key="PlayerTemplate">
  <WrapPanel>
      <Grid >
        <Grid.ColumnDefinitions x:Uid="5">
          <ColumnDefinition  Width="Auto"/>
          <ColumnDefinition  Width="*"/>
          </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
          <RowDefinition Height="50"/>
          </Grid.RowDefinitions>

        <TextBlock VerticalAlignment="Center" Margin="5" Grid.Column="0" Text="{Binding Path=ID}" FontSize="22" FontWeight="Bold"/>                
      </Grid>                                  
    </WrapPanel> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T10:08:47.003

`sample`没有调用属性，`"ID"`因为`sample`是您的集合，而不是您的`Player`实例。此外，由于您正在完全替换集合，因此使用可观察的集合是没有意义的。试试这个：

```
private ICollection<Player> players = new List<Player>();

public ICollection<Player> Players
{
    get { return this.players; }
    private set
    {
        this.players = value;

        // the collection instance itself has changed (along with the players in it), so we just need to invalidate this property
        this.OnPropertyChanged(this, "Players");
    }
} 
```

# cloud-foundry - 在 CloudFoundry 上设置 jvm 变量

> ID：10977962
> 
> 赞同：2
> 
> 时间：2012-06-11T09:59:58.407
> 
> 标签：cloud-foundry

我有一个使用 jvm 变量的 Java 应用程序。通常，我使用类似 `APP_HOME="-DAPP_HOME=$CATALINA_HOME/myapp"` 的命令来设置它，以便在 Tomcat 上指向我的应用程序结构中的正确文件夹。现在我正在尝试将我的应用程序部署到 MicroCloud 虚拟机。部署后，我使用命令 `vmc env-add myapp APP_HOME="-DAPP_HOME=$HOME/myapp` 设置变量。但问题是该变量设置为 shell 变量而不是 JVM 变量。当我使用时`System.getenv();`，我可以看到我的变量已设置，但是当我使用时`System.getProperty("APP_HOME")`，变量为空。任何人都有这方面的经验并且可以推荐如何将其设置为 CF 上的 JVM 变量？

ps 我阅读了 CloudFoundry Q&A 和 stackoverflow 上的所有现有主题，但我没有看到这个问题的答案......

先感谢您！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T12:53:39.337

关于什么

`vmc env-add myapp JAVA_OPTS="-DAPP_HOME=$HOME/myapp"`

（即将 -DAPP_HOME 作为属性传递给 JVM）

但是，您为什么要这样做 - 为什么仅使用 getenv 获取值而不是查找系统属性是一个坏主意？

# java - GWT i18n HTML 文件

> ID：10977963
> 
> 赞同：2
> 
> 时间：2012-06-11T09:59:58.710
> 
> 标签：java, html, gwt

我已经为 java、UI Binder 提供了 GWT 的 i18n 功能，并尝试为 i18n 提供纯的、非托管在 java HTML 文件中。

在阅读了“[使用 UiBinder 进行声明式布局](https://developers.google.com/web-toolkit/doc/latest/DevGuideUiBinder#Hello_Text_%20Resources)”之后，我实现了一些代码，但没有奏效：

```
<html xmlns:ui="urn:ui:com.google.gwt.uibinder">
<ui:with field='i18n' type='//.exampleConstants'/>
  <head>
   <title>Title of none-hosted HTML file and i18n part: <ui:text from='{i18n.title}'/></title>
 </head>
 <body>
  ...
 </body>
</html> 
```

带有 id 的解决方案（在同一页面上描述：[https](https://developers.google.com/web-toolkit/doc/latest/tutorial/i18n/) ://developers.google.com/web-toolkit/doc/latest/tutorial/i18n/ ）将由 RootPanel 获取，例如：

```
RootPanel.get("appTitle").add(new Label(constants.stockWatcher())); 
```

也没有用，因为我的 HTML 文件没有与 Java 捆绑在一起。

如何在 HTML 文件中执行 i18n？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T10:39:29.220

好吧，这里有一个 Catch-22：HTML 文件不*知道*要使用哪个文本，直到从 Java 代码编译出来的 JavaScript 被加载，这是由页面完成的，所以在加载之后。

您必须使用*标准的 Java Web 应用程序技术*来国际化您的 HTML 页面，例如使其成为 JSP，并从`Accept-Languages`请求标头中检测首选语言。如果您这样做，则生成适当`<meta name="gwt:property" content="locale=XX">`的，以便 GWT 应用程序引导程序（`.nocache.js`文件）也不必猜测它，这可能导致 GWT 应用程序在与生成 HTML 的语言环境不同的语言环境中运行。

# objective-c - 如何启用将文件拖放到 NSTextField 上？

> ID：10977964
> 
> 赞同：2
> 
> 时间：2012-06-11T10:00:02.077
> 
> 标签：objective-c, cocoa

如何启用将文件拖放到 NSTextField 上？

我想当我将文件从文件系统拖放到应用程序中的 NSTextField 时，文件的路径会自动写入该字段。

相反，我不能放弃它，并且该字段仍然是空的。

我添加了这一行：

```
[myTextField registerForDraggedTypes:[NSArray arrayWithObjects:NSFilenamesPboardType, nil]]; 
```

但它不起作用。

我在代表中找不到任何与拖放相关的方法：`NSControlTextEditingDelegate`或 `NSTextFieldDelegate`.

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T10:26:15.697

您将需要[子类化`NSTextField`](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/TextEditing/Tasks/HandlingDrops.html)并覆盖该`-performDragOperation:`方法。[Apple 在其Drag and Drop Programming Topics](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/DragandDrop/Tasks/DraggingFiles.html)中有几个关于如何处理拖放文件的示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-11-21T02:01:01.013

如果您将 NSTextFields 行为设置为可编辑，则无需一行代码即可立即删除文件。Xcode 11，但也适用于早期版本。

[![在此处输入图像描述](../Images/1ac9ababf72e96474244bc405f7f579f.png)](https://i.stack.imgur.com/SeVI2.png)

# r - 将 BigQuery 与 R 结合使用来分析数据

> ID：10977969
> 
> 赞同：8
> 
> 时间：2012-06-11T10:00:31.327
> 
> 标签：r, google-bigquery, google-cloud-storage

我计划使用 Google BigQuery（请随意建议包括 Google 在内的非 Amazon 非 Azure 服务）来执行以下操作 - a）使用 R 进行分析，专门用于数据挖掘、仪表板和文本挖掘。

R 和 Google 平台都是固定的。

我的问题是如何以及在哪里可以找到如何将 R 与 Google Big Query 结合使用。我阅读了 RCurl 文档，但有点困惑。您是否有一个可以使用 R 和 Google BigQuery 完成的简单任务的用例。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-12-17T21:10:07.250

R 有一个新的 BigQuery 客户端：[https](https://github.com/hadley/bigrquery) ://github.com/hadley/bigrquery 。

（以前的答案“google-bigquery-r-client”不再存在）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-15T15:34:34.387

我不知道这是否真实，但您也可以将 BigQuery over JDBC 与 RJDBC 一起使用。检查此项目的 BigQuery JDBC 驱动程序： [https ://code.google.com/p/starschema-bigquery-jdbc/](https://code.google.com/p/starschema-bigquery-jdbc/)

您甚至可以使用查询转换引擎，它将通常的 SQL92 查询转换为与 bigquery 兼容的查询。希望它能解决你的问题。

有关 R 和 JDBC 的更多信息： [http ://www.rforge.net/RJDBC/](http://www.rforge.net/RJDBC/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T10:04:47.020

您可以检查 r 客户端的 Bigquery。 [http://code.google.com/p/google-bigquery-r-client/](http://code.google.com/p/google-bigquery-r-client/)

您可以使用 google-bigquery-r-client 执行 bigquery 并将结果保存在 R 数据框中。

# svn - 源代码管理 (svn) 关于框架升级的最佳实践

> ID：10977971
> 
> 赞同：1
> 
> 时间：2012-06-11T10:00:36.490
> 
> 标签：svn

我们升级了一个旧网站，将其从 .NET 2 移植到 .NET 4。

升级框架的最佳实践是什么？我应该在存储库的根目录中创建另一个项目文件夹（连同旧的），还是应该在旧/现有项目文件夹中创建另一个分支？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T10:05:35.677

你应该同时支持这两个平台吗？如果不是，为什么要打扰？也许只是在升级之前创建一个标签来为修订添加书签，以防万一。

# regex - 如何将数字与grep匹配

> ID：10977979
> 
> 赞同：2
> 
> 时间：2012-06-11T10:01:12.500
> 
> 标签：regex, cygwin, grep

我的日志文件中有一行包含相关构建的版本号。它永远是 1.43.93.* 例如

```
<some text > Version=1.43.98.7488, <more text> 
```

我只想提取版本号。

以下均不返回任何内容：

```
grep -G -m 1 1.43.98\.\d+ mylog.txt
egrep -m 1 "1.43.98\.\d+" mylog.txt 
```

内部版本号出现在日志文件中的多个位置（这就是我传递值为 1 的 -m 标志的原因），但显然我只对第一个匹配项感兴趣。

任何提示将不胜感激。我正在使用 Cygwin（GNU grep 2.6.3）。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-11T10:33:44.770

首先确保它`\d`有效 - 您可能必须设置 -P 选项（perl 正则表达式）并针对简单的东西进行测试。

我花了很多时间想知道为什么我的正则表达式在一个平台上工作，而不是在另一个平台上工作，只是发现一台机器上的 grep 是在没有启用 -P 选项的情况下构建的。所有`\d`的正则表达式都被忽略了，我不得不使用`[:digit:]`或者`[0-9]`代替`:(`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T10:32:43.977

```
grep -o -m 1 1.43.98.[[:digit:]]* a 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T10:19:01.833

我没有 cygwin 环境。以下 grep 行在 linux 下进行了测试。

```
kent$  cat a
<some text > Version=1.43.98.7488, <more text>
<some text > Version=1.43.98.7488, <more text>
<some text > Version=1.43.98.7488, <more text>
<some text > Version=1.43.98.7488, <more text>
<some text > Version=1.43.98.7488, <more text>

kent$  grep -oPm 1 '(?<=Version=)[0-9\.]+(?=,)' a
1.43.98.7488

kent$  grep -V
GNU grep 2.5.3 
```

# java - 迭代器和Listiterator的区别？

> ID：10977992
> 
> 赞同：144
> 
> 时间：2012-06-11T10:02:03.620
> 
> 标签：java, list, iterator, set, listiterator

```
Iterator ite = Set.iterator();
Iterator ite = List.iterator();

ListIterator listite = List.listIterator(); 
```

我们可以`Iterator`用来遍历 a`Set`或 a`List`或 a `Map`。但是`ListIterator`只能用来遍历a `List`，不能遍历a `Set`。为什么？

我知道主要区别在于，使用迭代器，我们只能在一个方向上旅行，但`ListIterator`我们可以在两个方向上旅行。还有其他区别吗？`ListIterator`以及over的任何优势`Iterator`？

* * *

## 回答 #1

> 赞同：157
> 
> 时间：2012-06-11T10:06:41.777

[差异在ListIterator](http://docs.oracle.com/javase/7/docs/api/java/util/ListIterator.html)的 Javadoc 中列出

你可以

*   向后迭代
*   在任何时候获取迭代器。
*   在任何时候添加一个新值。
*   在该点设置一个新值。

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2013-07-30T05:49:27.720

有两个区别：

1.  我们可以使用 Iterator 来遍历 Set 和 List 以及 Map 类型的对象。虽然 ListIterator 可用于遍历 List 类型的对象，但不能用于遍历 Set 类型的对象。

    也就是说，我们可以通过使用 Set 和 List 来获得一个 Iterator 对象，见这里：

    通过使用迭代器，我们可以从 Collection Object 中仅向前检索元素。

    迭代器中的方法：

    1.  `hasNext()`
    2.  `next()`
    3.  `remove()`

    ```
    Iterator iterator = Set.iterator();
    Iterator iterator = List.iterator();
    ```

2.  但是我们只能从 List 接口获取 ListIterator 对象，见这里：

    其中 ListIterator 允许您沿任一方向（向前和向后）遍历。所以它有两种方法`hasPrevious()`， `previous()`除了迭代器之外还有两种方法。此外，我们可以获取下一个或前一个元素的索引（分别使用`nextIndex()` 和`previousIndex()`）

    ListIterator 中的方法：

    1.  有下一个（）
    2.  下一个（）
    3.  以前的（）
    4.  hasPrevious()
    5.  消除（）
    6.  下一个索引（）
    7.  以前的索引（）

    ```
    ListIterator listiterator = List.listIterator();
    ```

    即，我们无法从 Set 接口获取 ListIterator 对象。

参考： - [Iterator 和 ListIterator 有什么区别？](http://kirankumarjava.blogspot.in/2013/06/what-is-difference-between-iterator-and.html)

* * *

## 回答 #3

> 赞同：27
> 
> 时间：2013-12-11T10:30:09.493

> Iterator 是 ListIterator 的超类。

以下是它们之间的区别：

1.  随着`iterator`你只能向前移动，但`ListIterator`你也可以在阅读元素时移动后退。
2.  有了`ListIterator`你可以在遍历的任何时候获取索引，这是`iterator`s 做不到的。
3.  `iterator`您可以仅检查下一个元素是否可用，但您`listiterator`可以检查上一个和下一个元素。
4.  随着`listiterator`您可以在任何时间点添加新元素，同时遍历。不可能`iterator`。
5.  使用`listiterator`时，您可以在遍历时修改元素，而`iterator`.

**迭代器外观：**

```
 public interface Iterator<E> {
    boolean hasNext();
    E next();
    void remove(); //optional-->use only once with next(), 
                         dont use it when u use for:each
    } 
```

**ListIterator 的外观和感觉：**

```
public interface ListIterator<E> extends Iterator<E> {
    boolean hasNext();
    E next();
    boolean hasPrevious();
    E previous();
    int nextIndex();
    int previousIndex();
    void remove(); //optional
    void set(E e); //optional
    void add(E e); //optional
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-01-24T07:53:57.790

以下是iterator和listIterator的区别

迭代器：

```
boolean hasNext();
E next();
void remove(); 
```

列表迭代器：

```
boolean hasNext();
E next();
boolean hasPrevious();
E previous();
int nextIndex();
int previousIndex();
void remove();
void set(E e);
void add(E e); 
```

# c++ - 检查命名事件

> ID：10977995
> 
> 赞同：0
> 
> 时间：2012-06-11T10:02:08.423
> 
> 标签：c++, windows, event-handling

我有一个创建命名事件的过程，使用`::CreateEvent`.

在我的过程中，我想检查事件是否存在，但我不想创建事件以防它不存在。

我该怎么做？

我可以这样做，但是如果事件不存在，则会创建该事件：

```
HANDLE hEvent;
hEvent= ::CreateEvent(NULL, FALSE, FALSE, _T("MyEvent"));
if (::GetLastError() != ERROR_ALREADY_EXISTS)
{
   .......
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T10:07:37.250

`OpenEvent`**如果事件尚不**存在，则不会创建该事件，因此您的代码几乎已经完成了您想要的操作。`NULL`在检查错误代码之前，您需要检查事件句柄：

```
HANDLE hEvent;
hEvent= ::OpenEvent(FALSE, FALSE, _T("MyEvent"));
if (!hEvent) // event does not already exist, or other problem
{
   .......
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T10:23:40.580

```
CString csHandleName = "hEvent";
int nHandleinc(0);
HANDLE hHandleEvent = NULL;
while(!hHandleEvent)
{
    csHandleName.Format("hEvent%d",nHandleinc);
    hHandleEvent = CreateEvent(NULL,TRUE,false,csHandleName);
    if (GetLastError() == ERROR_ALREADY_EXISTS ) 
    {
    CloseHandle( hHandleEvent ); 
    hHandleEvent = NULL;
    }
    nHandleinc++;
} 
```

# javascript - 停止重定向并显示对话框

> ID：10977997
> 
> 赞同：1
> 
> 时间：2012-06-11T10:02:10.593
> 
> 标签：javascript, asp.net-mvc-3

我想显示对话框消息以确认重定向，但我有自己的对话框窗口，因此代码（如下所示）不适合我。

```
window.onbeforeunload = confirmExit;
function confirmExit(e) {
    return "Do you realy want to leave the page, miserable user?";
} 
```

如果我使用，我的菜单会显示，但在我选择任何变体之前页面重定向（是/否）：

```
window.onbeforeunload = confirmExit;
function confirmExit(e) {
    return pcDialog.Show();
} 
```

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T10:04:44.690

这目前是不可能的，并且是一个已知的安全限制。