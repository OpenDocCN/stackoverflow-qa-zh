# StackOverflow 问答 11815000-11815999

# javascript - 如何在不使用 ID 的情况下查找元素

> ID：11815004
> 
> 赞同：0
> 
> 时间：2012-08-05T08:32:00.347
> 
> 标签：javascript

我在数组中有 DOM 元素

```
this.object = 
     <div>
     <span class="color">"color1</span> 
     <span class="text">text1</span>
     </div>

     <div>
     <span class="color">"color2</span> 
     <span class="text">text2</span>
     </div>

     <div>
     <span class="color">"color3</span> 
     <span class="text">text3/span>
     </div>

     <div>
     <span class="color">"color4</span> 
     <span class="text">text4</span>
     </div> 
```

此 DOM 存在于 DOM 数组中（ this.object ）

如何仅更新数组中的第一个跨度或仅第二个跨度，我无法使用我的程序技术问题中的 ID。

我尝试使用 `this.element.children[i]`，但后来我不知道如何找到第一个或第二个跨度

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T08:55:13.707

您将用于`this.element[i]`访问数组中的任何元素，然后您可以访问这些元素的子元素：

```
this.element[0].childNodes[0].innerHTML = "paint one"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T08:41:54.003

您可以使用[querySelectors](https://developer.mozilla.org/en-US/docs/DOM/Document.querySelector)：

```
//find first element with class 'color' within a div
//returns an element Node
[yourdiv].querySelector('.color');
//find all elements with class 'color' within a document
//returns a nodeList
document.querySelectorAll('.color'); 
```

或[getElementsByClassName](https://developer.mozilla.org/en-US/docs/DOM/document.getElementsByClassName)：

```
//find first element with class 'color' within a div
//returns a nodeList with 1 or more elements
[yourdiv].getElementsByClassname('.color')[0];
//find all elements with class 'color' within a document
//returns a nodeList
document.getElementsByClassName('.color'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-05T08:42:07.503

你可以使用`getElementsByClassName()`.

```
document.getElementsByClassName("color")[0]; 
```

但是你必须记住两件事：1.)`getElementsByClassName()`不完全跨浏览器兼容。2.）你有两个知道你的`color`元素在什么位置。`color`如果您仅在示例完美运行后才使用该类。

两个解决问题 1.) 您可以使用以下解决方法：

```
function getElementsByClassName(node, classname) {
    var a = [];
    var re = new RegExp('(^| )'+classname+'( |$)');
    var els = node.getElementsByTagName("*");
    for(var i=0,j=els.length; i<j; i++)
        if(re.test(els[i].className))a.push(els[i]);
    return a;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-05T08:34:09.797

使用 jQuery 来避免任何跨浏览器问题。假设你有 div，使用`div.find('span:eq(1)');`

[工作示例。](http://jsfiddle.net/Ybu6n/)

[多个项目的工作示例](http://jsfiddle.net/Ybu6n/1/)。

显示正在更新的文本的另一个[示例。](http://jsfiddle.net/Ybu6n/2/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-05T08:34:25.997

你应该使用jquery，然后你可以这样写：

```
$('.color').html('updated text') 
```

# java - 为什么以千字节为单位的 C/C++“Hello World”？

> ID：11815005
> 
> 赞同：3
> 
> 时间：2012-08-05T08:32:02.547
> 
> 标签：java, c++, c, executable

> **可能重复：**
> [为什么编译的 Java 类文件比 C 编译的文件小？](https://stackoverflow.com/questions/4838221/why-are-compiled-java-class-files-smaller-than-c-compiled-files)

只是出于好奇，我刚刚用 C、C++ 和 Java 编译了“Hello Worlds”。

Java 类文件非常精简，只有 423B，我理解这是因为运行时不包含在二进制文件中。

然而，C 和 C++ 是 8.5K 和 9.2K。

为什么它们相对较大？我一直假设 stdio 或 iostream 是动态链接的，并且不会增加可执行文件的大小。

那么所有千字节从何而来？通过查看 hexdump，我发现有很多填充，我猜是出于性能原因。为什么二进制格式是这样组织的？

* * *

pmg 的链接非常有帮助！

关于填充，我发现程序段与虚拟内存页面边界（4096 字节）的对齐导致它至少为 8192 字节。

关于 mach-o 二进制格式（适用于 OS X 和 iOS）

> 为获得最佳性能，段应在虚拟内存页面边界上对齐——PowerPC 和 x86 处理器为 4096 字节。要计算段的大小，请将每个段的大小相加，然后将总和四舍五入到下一个虚拟内存页面边界（4096 字节或 4 KB）。使用此算法，段的最小大小为 4 KB，然后以 4 KB 为增量调整大小。

引用[http://developer.apple.com/library/mac/#documentation/DeveloperTools/Conceptual/MachORuntime/Reference/reference.html](http://developer.apple.com/library/mac/#documentation/DeveloperTools/Conceptual/MachORuntime/Reference/reference.html)

下次问之前我会做研究；）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-05T09:08:19.457

这是你测量什么的问题。如果它是原始可执行文件大小，那么除了`main()`.

当我们在这里使用共享动态库时，很大一部分的大小将由管理数据（如符号表、全局偏移表和要链接的共享库的描述）来解释 - 的代码共享库本身不在二进制文件中。

iostream 库是一个相当大的库，并且还具有静态初始化器 - 例如用于初始化`cout`、`cerr`和`cin`对象。这是目标文件必须包含的另一件事。

实际上，大多数额外的大小在应用程序运行时并不驻留在内存中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-05T08:53:39.650

C & C++ 是一个完整的独立程序。Java 只是核心代码，需要另一个程序来运行它。

一个较小的 hello world 是使用 bash 脚本（也需要另一个程序来运行）

```
echo Hello World 
```

总共 17 个字节，换行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-05T08:45:42.683

一个因素是

```
#include <iostream> 
```

这会导致许多标准库与您的程序链接。但是，无需担心。这只是一个初始开销，它不会随着程序的复杂性或代码的长度而增加。无论如何，请尝试使用[UPX](http://upx.sourceforge.net/)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-05T08:35:50.167

因为包含了stdlib。尝试使用 -nostdlib

# java - 使用 PreparedStatement 执行 sql 查询

> ID：11815012
> 
> 赞同：6
> 
> 时间：2012-08-05T08:33:15.137
> 
> 标签：java, sql, servlets, prepared-statement, executequery

我在 servlet 中有以下代码 -

```
 String loginID = request.getParameter("loginId").toString();
            String loginPassword = request.getParameter("loginPassword").toString();
            String strSQLcount = "SELECT COUNT(*) as 'Number Of Match' "
                + "FROM persons " + "WHERE (password =? AND  id =?);";
            PreparedStatement prepareSQL = connection
                    .prepareStatement(strSQLcount);
            prepareSQL.setString(1, loginPassword);
            prepareSQL.setString(2, loginID);
            ResultSet numOfMatchResult = prepareSQL.executeQuery();
            // now we know number of matchs ...
            int numOfMatch = numOfMatchResult.getInt(1); 
```

当运行并到达该行时`int numOfMatch = numOfMatchResult.getInt(1);`，它会引发异常 - `java.sql.SQLException`。我查了一下，发现它是因为`executeQuery()` 没有检索到。尽管我在`persons`使用 MySQL 创建的表中有两个字段 - `id (text)`值“300”和`password (text)`值“500”，但它发生了。`loginID`当然，我会检查它何时`loginPassword`使用相同的 2 个值。我检查了有关与数据库连接的所有其他事情，一切正常..所以我认为问题出在 .sql 语法中`strSQLcount`。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-05T08:39:24.833

您忘记调用`next()`结果集：

```
ResultSet numOfMatchResult = prepareSQL.executeQuery();
int numOfMatch = 0;
if (rs.next() {    
    numOfMatch = numOfMatchResult.getInt(1);
} 
```

如果这不足以解决问题，请粘贴异常的整个堆栈跟踪：它包含有意义的信息。

# android - 想要基于android中另一个类的单选按钮进行活动

> ID：11815013
> 
> 赞同：0
> 
> 时间：2012-08-05T08:33:30.440
> 
> 标签：android, class, android-intent, radio-button

我有 3 类，即第一，第二和第三。头等舱有广播组。但这与那个班级无关，就像第二班和第三班一样，它有一些活动要做。我如何检查二等和三等的一等单选按钮以及如何基于此进行活动..？

# ruby - 基本的 Ruby 时间操作不起作用

> ID：11815014
> 
> 赞同：3
> 
> 时间：2012-08-05T08:33:45.010
> 
> 标签：ruby, irb

我一直在尝试在 irb 中测试一些东西，但它无法识别类似的命令

```
2.weeks.ago 
```

和

```
10.hours.ago 
```

我得到的错误如下：

```
1.9.3p258 :002 > 2.weeks.ago
NoMethodError: undefined method `weeks' for 2:Fixnum
from (irb):2
from /Users/Avneesh/.rvm/rubies/ruby-1.9.3-head/bin/irb:16:in `<main>' 
```

供参考... Ruby 版本：1.9.3p258 操作系统：Mac OS X 10.8

关于为什么会发生这种情况的任何想法？我很确定我不需要/包含任何模块/库。任何帮助，将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-05T08:36:57.340

这些方法在 activesupport gem 中定义。您需要包括 active_support/all

有两种方法：

```
➜  ~  irb -ractive_support/all
1.9.3-p125 :001 > 2.weeks.ago
 => 2012-07-22 14:06:10 +0530 
1.9.3-p125 :002 > exit

➜  ~  irb
1.9.3-p125 :001 > require 'active_support/all'
 => true 
1.9.3-p125 :002 > 2.weeks.ago
 => 2012-07-22 14:06:22 +0530 
1.9.3-p125 :003 > 
```

编辑：正如 Jörg 在评论中指出的那样，您可以只要求`active_support/core_ext/integer/time`包含特定于时间的函数，包括这个。

# python - 在python中导入模块并且无法使用模块中的函数

> ID：11815018
> 
> 赞同：-1
> 
> 时间：2012-08-05T08:33:58.693
> 
> 标签：python, import, module

我导入了一个模块，如下所示：

```
filename = "email"
mymodule = __import__('actions.'+filename) 
```

我遇到的问题是，文件正在立即执行，我更愿意从文件中执行一个特定的函数（这样我就可以通过它发送变量）。

目前，当我添加下面的行（导入脚本时）时，我不会立即关心脚本是否执行，因为我会使用这个`if __name__ == "__main__"`技巧来解决它。

```
mymodule = __import__('actions.'+filename) 
```

但我想要工作的是当我添加下面的行时，我希望执行该函数。但相反，我收到一个错误，即模块没有该功能，即使它存在于脚本中。

```
mymodule.OpenEmail(n) 
```

函数名并不重要，因为当我运行它时，我已经能够让下面的脚本自行工作，但是当我尝试在空闲时导入它并执行上面的行时，我收到一个错误，说模块没有具有该功能（或一些非常相似的错误）。无论如何，下面的代码是我像插件一样使用的示例脚本。但我的主要观点是我能够在 python 中动态导入和执行脚本，但现在我希望能够将变量发送到文件中。如果我能以某种方式让函数像上面那样工作，我相信它会解决我的问题。

```
import webbrowser
def OpenEmail():
    handle = webbrowser.get()
    handle.open('http://gmail.google.com')
OpenEmail()
print "Your email has been opened" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T08:38:07.137

[如文档](http://docs.python.org/library/functions.html#__import__)所述，使用`__import__()`带点的名称且不带`fromlist`参数会返回对最顶层包的引用。您可以使用点表示法或使用`getattr()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T06:49:25.363

很简单，这就是我在 IDLE 中所做的

```
filename = 'actions.email'
mod = __import__(filename)
VAR = getattr(mod, 'email')
VAR.OpenEmail() 
```

让我的电子邮件打开！

# visual-studio-2010 - 数据库测试配置 AllowConfigurationOverride 数据库名称

> ID：11815022
> 
> 赞同：1
> 
> 时间：2012-08-05T08:34:48.203
> 
> 标签：visual-studio-2010, continuous-integration, tfsbuild, dbproj

如何让不同的构建代理针对他们自己的特定实例或数据库名称运行单元测试？.dbunittest.config 文件中是否有任何属性覆盖或变量可用？

我有一个 TFS 2010 构建服务器，默认 4 个构建代理管理一个持续集成解决方案，该解决方案构建一个数据库项目，将其部署在构建服务器上，并使用测试的 app.config 从单独的数据库单元测试项目运行数据库单元测试带有覆盖子句的项目。

LoginName.dbunittest.config 提供对用于测试数据库的连接字符串的控制。似乎构建代理都使用相同的连接字符串，这意味着并行构建是针对同一个数据库进行测试的。

```
App.Config

<DatabaseUnitTesting AllowConfigurationOverride="true"> 
```

```
LoginName.dbunittest.config 

<ExecutionContext ConnectionString="Data Source=(local);Initial Catalog=db_unit_tests" ... />
<PrivilegeContext ConnectionString="Data Source=(local);Initial Catalog=db_unit_tests" ... /> 
```

# ruby-on-rails - 如何在不存储敏感用户数据的情况下维持对 Gmail API 的访问？

> ID：11815024
> 
> 赞同：0
> 
> 时间：2012-08-05T08:35:06.810
> 
> 标签：ruby-on-rails, oauth, oauth-2.0, gmail-imap

在没有用户输入的情况下跨会话访问 Gmail API 的首选方法是什么？例如，用户登录一次，一些相当不敏感的 ID 存储在我的服务器上，我使用该 ID 以及我的应用程序的密钥/密钥来访问用户的邮箱......

我注意到 OAuth 1.0 现在已被 google 弃用（我假设 OAuth 1.0 启用了上述登录机制），那么我们应该使用什么？OAuth 2.0 + IMAP 是否适用于 Gmail？

我正在使用 Rails 3.2.6 后端。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T10:25:29.257

[我在oAuth API 文档](https://developers.google.com/google-apps/gmail/oauth_overview)中没有找到任何关于 oAuth 1.0 被弃用的信息。

但是 oAuth 2.0 似乎也适用于 Gmail：[oAuth 2.0 Playground](https://code.google.com/oauthplayground/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T11:12:34.640

在不存储用户密码的情况下，完全 GMail 访问的唯一方法是使用[IMAP/SMTP 和 OAuth 1](https://developers.google.com/google-apps/gmail/oauth_overview)。使用 OAuth 2，您目前只能访问[Atom Inbox Feed](https://developers.google.com/google-apps/gmail/gmail_inbox_feed)。

虽然 OAuth 1 已被 Google 标记为弃用，但它应该会[在 2015 年 4 月之前得到支持](https://developers.google.com/accounts/terms)。

**更新：**

对 GMail IMAP/SMTP 的 OAuth 2 授权支持刚刚[到来](https://developers.google.com/google-apps/gmail/oauth_overview)，所以现在这是推荐的方式。

# java - Android SDK 安装程序卡在“检测是否已安装 Java SDK”

> ID：11815026
> 
> 赞同：0
> 
> 时间：2012-08-05T08:35:08.780
> 
> 标签：java, android, windows-7, sdk, adk

就像标题所暗示的那样*——Android SDK r20.0.1*安装程序不会通过*“检测是否安装了 Java SDK”*（下图）。

![在此处输入图像描述](../Images/bb82092fc006a0a2db3e03d7a77bbfee.png)

我正在运行*Windows 7 64 位*。

我的步骤：

1.  安装了 32 位和 64 位 Java SDK；
2.  我已经将我的路径（从我的电脑>属性）设置为“C:\Program Files (x86)\Java\jdk1.7.0_05\bin”，它是 64 位版本，最后没有 \bin 和 \ jdk1.7.0_05\jre\bin；
3.  我已将 Java 开发工具包密钥添加到 Wow6432Node；
4.  以管理员身份运行安装程序，但仍然无法检测到该死的东西。

另外，我无法单击返回或下一步或取消。当我这样做时没有任何反应，就像我单击 X 时没有任何反应一样。如果我右键单击并关闭它，它甚至不会关闭，所以我每次都必须调出任务管理器才能关闭它。

注意 - 我不是非常精通技术，因此您希望我做的任何事情（如果有的话）的分步指南将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T10:31:01.190

检测是否安装了 JDK 及其路径是否正确配置，请执行以下操作

*   首先查看安装`java`文件夹的位置是否创建了文件夹。

*   如果要检查其路径是否配置正确，请执行此操作..

转到命令提示符并键入以下内容：

`java -version`

如果你得到类似下面的输出，那么你很高兴，否则认为你没有正确配置它的路径。并且**在输出中，版本号将与此处不同，具体取决于您的 JDK 版本**。

```
java version "1.7.0_03"
Java(TM) SE Runtime Environment (build 1.7.0_03-b05)
Java HotSpot(TM) Client VM (build 22.1-b02, mixed mode, sharing) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T10:55:19.097

尝试单击返回按钮并重新单击安装按钮。这对我有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-05T12:34:52.290

我最近通过将斜杠更改为反斜杠实际上解决了这个问题。

所以代替 C:\MyJavaInstall\Java 使用 C:/MyJavaInstall/Java

我很惊讶，但这是唯一对我有用的东西。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-05T11:59:23.050

Windows 的推荐版本是`JDK 1.6 32 bit`，请确保您只安装了这个作为 JDK 并设置了所有环境路径，尤其是`JAVA_HOME`.

总是不鼓励在 Windows 上为 Android 开发。

# javascript - 滚动文档期间 div 和 screenY 之间的 JS/JQ

> ID：11815029
> 
> 赞同：0
> 
> 时间：2012-08-05T08:36:00.693
> 
> 标签：javascript

我希望 javascript 或 Jquery 函数返回给我 >>> 当我滚动到文档时 div 离 screenY 有多远；

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T11:07:26.227

我为此创建了一个小演示。

请在此处查看。

演示：http: [//jsfiddle.net/codebombs/4sMKW/](http://jsfiddle.net/codebombs/4sMKW/)

检查控制台，在上面的演示中查看 DIV 的 screenY 位置。

在这里，我正在使用此代码：

```
//When document is scrolled
$(document).scroll(function(e) {
    //Get div's y position relative to viewport.
    var y = $('div').offset().top - $('body').scrollTop();
    //Show value in console
    console.log ( y );
}); 
```

让我知道这是否有帮助以及是否需要任何修改。

# iphone - 应用程序在后台时显示计数器

> ID：11815035
> 
> 赞同：1
> 
> 时间：2012-08-05T08:37:09.640
> 
> 标签：iphone, ios, ios5

我正在制作一个一直在侦听 UDP 套接字的应用程序，即使该应用程序在后台也是如此。当某个数据到达抛出套接字时，我想显示从 10 到 0 计数 10 秒的用户计时器。

应用程序在后台时是否可以显示此计数器？

我可以在后台向用户显示任何消息（除了`[[UIApplication sharedApplication] presentLocalNotificationNow:...]`对我不利的消息），例如苹果闹钟吗？

**笔记**

*   我不需要应用程序商店批准该应用程序。我只需要它在家工作。
*   我已经成功地在后台保持通信并且我知道应用程序正在运行

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T17:41:21.067

您可以尝试使用徽章图标，并每秒将数字从 10 更新为 0。我假设您将这些方法放在 中`AppDelegate`，但它们可以放在任何地方。尝试：

**。H**

```
@interface AppDelegate : NSObject <UIApplicationDelegate> {
  int       _countDownNumber;
  NSTimer * _countDownTimer;
} 
```

**.m**

```
- (void)updateTimer; {
  [[UIApplication sharedApplication] setApplicationIconBadgeNumber:_countDownNumber];
  _countDownNumber--;

  if(_countDownNumber < 0){
    [_countDownTimer invalidate];
  }
}

- (void)methodThatStartsTheCountDown; {
  _countDownNumber = 10;
  _countDownTimer = [NSTimer scheduledTimerWithTimeInterval:1.0f target:self selector:@selector(updateTimer) userInfo:nil repeats:YES];
} 
```

希望有帮助！

# mysql - 显示除有 4 个子记录的所有父记录

> ID：11815037
> 
> 赞同：0
> 
> 时间：2012-08-05T08:37:14.670
> 
> 标签：mysql, sql

我需要显示来自父表的 sql 中子记录少于 4 或没有子记录的记录，请需要 SQL 查询。

更多说明：

1.  根本没有父母的孩子记录也很好，所有父母记录都应该显示
2.  如果父记录有 1 到 3 之间的子记录，应该显示
3.  如果父记录正好有 4 个子记录，则不应显示。

架构（一名员工的捐款不能超过 4 次）

客户（client_id，电子邮件）

员工（employee_id，姓名）

捐赠（donation_id、employee_id、client_id）

SQL 我试过了。

```
SELECT * FROM employee left join 
(SELECT donation_id, employee_id, client_id, count(employee_id) as count from donation      GROUP BY employee_id HAVING count <= 4) as d
ON employee.employee_id = d.employee_id 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T08:45:03.673

```
SELECT    a.employee_id, a.name
FROM      employee a
LEFT JOIN (
          SELECT   employee_id, COUNT(*) AS cnt
          FROM     donation
          GROUP BY employee_id
          ) b ON a.employee_id = b.employee_id
WHERE     b.cnt < 4 OR b.employee_id IS NULL 
```

该`WHERE`条款基本上只包括孩子少于 4 个的父母（`b.cnt < 4`）或根本没有孩子的父母（`b.employee_id IS NULL`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T08:52:34.400

```
SELECT e.* 
  FROM employee e 
  LEFT OUTER JOIN (
    SELECT employee_id, count(parent_id) c 
    FROM donation
    GROUP BY employee_id
  ) s 
  ON s.employee_id = employee_id 
  WHERE s.c < 4 OR s.c IS NULL 
```

并添加此索引

```
CREATE INDEX idx_employee_id ON donation (employee_id) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-05T08:54:16.757

您可以只加入表格，按员工分组并过滤少于 4 条记录的组：

```
SELECT   employee.*
FROM     employee LEFT JOIN donation USING (employee_id)
GROUP BY employee_id
HAVING   COUNT(*) < 4 
```

# operating-system - 我的用户名不在 max os x 10.6 的 passwd 文件中

> ID：11815039
> 
> 赞同：-3
> 
> 时间：2012-08-05T08:37:44.757
> 
> 标签：operating-system, max

我的登录名是 'john'，在 linux 中，我应该在 /etc/passwd 文件中看到 john。但是在 max os 10.6 中，我在 /etc/passwd 文件中找不到这样的记录！谁能告诉我为什么以及在哪里可以找到这样的记录！

[这篇](https://superuser.com/questions/191330/users-in-etc-passwd-on-mac-os-x)文章帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T08:45:16.187

在超级用户上查看[这个问题。](https://superuser.com/questions/191330/users-in-etc-passwd-on-mac-os-x)从那里引用：“仅当操作系统处于单用户模式时才查阅 /etc/passwd 文件。OS/X 上帐户信息的“标准”位置是 DirectoryService。”

# java - 在我重新启动 Eclipse 之前，Tomcat 不会更新

> ID：11815040
> 
> 赞同：5
> 
> 时间：2012-08-05T08:38:02.237
> 
> 标签：java, eclipse, jakarta-ee, tomcat, tomcat7

我有tomcat的问题。当我在我的 xhtml 文件中更改某些内容时，tomcat 无法显示更改。它显示更改前的页面。我重新启动tomcat，我清理tomcat工作目录，右键单击服务器并选择清理，但我必须重新启动eclipse才能看到结果。我在谷歌搜索，但我找不到我应该在 tomcat 中执行哪个设置来解决问题。在发布选项卡中，我选择了“资源更改时自动发布”。请帮我。我必须为每次更改重新启动 Eclipse。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T09:30:53.487

请确保您的 XHTML 文件没有被您的浏览器缓存。尝试强制刷新（在 Firefox 上，按 Shift+Refresh 按钮或在 Mac 上按 Command+Refresh）。

您还可以尝试配置 Tomcat 上下文以禁用对静态资源的缓存，如[Apache Tomcat 配置参考](http://tomcat.apache.org/tomcat-6.0-doc/config/context.html)中所述。将 cachingAllowed 属性设置为 false（默认为 true）。

使用 Firebug 检查 HTTP 标头。查看 HTTP 响应中的内容：HTTP 响应代码、Cache-Control 和 Expires 标头。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T14:06:13.163

就像@Sam 所说，确保您的文件没有被浏览器缓存。在 Mac (Command + R) Firefox 和 Chrome (Shift + F5) 上。

如果这不起作用，请双击 Eclipse 上的服务器并转到**Publishing**选项卡。确保将其设置为**在资源更改时自动发布**。

# php - 多次从函数中获取结果可能会导致该函数再次进行查询？

> ID：11815043
> 
> 赞同：3
> 
> 时间：2012-08-05T08:38:22.493
> 
> 标签：php

我有一个从数据库运行查询的功能。然后，它将被其他 2 个函数调用。

```
function query(){
 $query= // get data from database;
return $query;
}

function show_something(){
$data = query();
//do something
}

function show_else(){
$data = query();
//do something else
} 
```

函数 query() 被调用两次。我猜它会在每次调用函数时执行查询工作，除非结果被缓存。如果我错了，有人会纠正我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T08:40:20.697

是的，它会被调用两次。如果需要，您可以使用静态变量缓存结果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-05T08:50:34.660

如果您希望每次都提取相同的查询（即，没有变量更改），那么您最好使用以下几行的对象：

```
class checkSomethingOrOther
{
    public $myVariable;

    public function __get($name)
    {
        if (!array_key_exists($name, $this->myVariable))
        {
            $this->myVariable=query();
        }
        return $this-myVariable;
    }
} 
```

这将简单地检查变量是否被设置，如果没有，它会抓取数据并返回它，否则，只是返回它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-05T08:41:00.117

不，这是正确的；您的函数无条件地执行显式查询，因此每次调用时都会执行它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-05T08:41:41.570

数据库可能在函数调用之间发生了变化。即使他们一个接一个地被立即调用。

所以，是的，查询将运行两次；因为结果可能不同。

除非你实现一些缓存机制。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-05T09:04:41.370

你可以简单地做这样的事情：

*   设置一个指示器来标记查询是第一次还是重复。
*   查询前，检查指标。

**代码：**

```
$fresh = true; // fresh results wanted
function query(){
global $fresh;
if($fresh){
     $query= // get data from database;
     $bar = $query; // cache the $query value for next uses..
     $$fresh = false; // set the indicator that query is cached.
}else{ // this is repeated query
    $query = $bar; //we had set the $bar last time
}
return $query;
}

function show_something(){
//first time query, $query will be fetched from database,
// also $fresh will be set to false
$data = query();
//do something
}

function show_else(){
//repeated query, cached value will be returned.
$data = query();
//do something else
}

$foo = true; // if you want fresh results, set $fresh to true before query
function show_fresh(){
//results will be fresh, because we have set $fresh to true again.
$data = query();
//do something else
} 
```

# iphone - 如何为 NSString 使用 CGAffineTransformMakeRotation

> ID：11815058
> 
> 赞同：-4
> 
> 时间：2012-08-05T08:40:20.647
> 
> 标签：iphone, objective-c

我想为 NSString 使用 CGAffineTransformMakeRotation，我该怎么做？它使用标签，我的函数只需要字符串。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T08:49:23.267

`CGAffineTransformMakeRotation`用于设置 a 的`transform`属性`UIView`，`NSString`不是 a`UIView`所以不能变形，没有旋转的概念

您需要在显示时使用`UILabel`

一个例子：

```
NSString *myString = @"whatever";
CGAffineTransform stringTransform = CGAffineTransformMakeRotation(M_PI / 2.0f);

UILabel *stringLabel = [[UILabel alloc] initWithFrame:labelFrame];
stringLabel.transform = stringTransform;
stringLabel.text = myString;

[self.view addSubview:stringLabel]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T09:57:30.430

您可以像下面的代码一样旋转文本标签：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib
    label = [[UILabel alloc] initWithFrame:CGRectMake(100, 100, 100, 100)];
    label.text = @"fof fof fof";
    [self.view addSubview:label];
}

- (IBAction)rotate:(id)sender {
    CGContextRef context = UIGraphicsGetCurrentContext();
    [UIView beginAnimations:nil context:context];
    [UIView setAnimationDuration:0.5];
    [UIView setAnimationDelegate:self];
    [UIView setAnimationDidStopSelector:@selector(endAnimation)];
    CGAffineTransform rotate = CGAffineTransformMakeRotation(90.0f * (M_PI / 180.0f));
    label.transform = rotate;

    [UIView commitAnimations];  
} 
```

# webgl - 多个 collada 场景

> ID：11815060
> 
> 赞同：1
> 
> 时间：2012-08-05T08:40:56.577
> 
> 标签：webgl, three.js

我有两个 collada 文件（两个不同的场景：“01.dae”和“02.dae”）。我想在动画结束后首先显示 01.dae 我想在同一画布上加载并显示 02.dae。（我正在尝试修改“webgl_loader_collada_keyframe.html”来做到这一点，但到目前为止没有结果。）

我如何处理多个动画 collada 场景？源代码或任何提示或技巧将不胜感激！

* * *

谢谢您的回答。我根据您的 idae 修改了我的代码，但不幸的是它不起作用。你能看看我的代码吗？

这是我的代码：

```
 loader.load( 'pump.dae', function ( collada ) {

        model = collada.scene;
        animations = collada.animations;
        kfAnimationsLength = animations.length;
        model.scale.x = model.scale.y = model.scale.z = 0.125; // 1/8 scale, modeled in cm

        init();
        start();
        animate( lastTimestamp );
        setTimeout(loadSecond,3000);                
    } );

    function loadSecond()
    {           
    loader2.load( 'pump2.dae', function ( collada2 ) 
    {

        scene.remove( model );              
        model2 = collada2.scene;
        animations2 = collada2.animations;
        kfAnimationsLength2 = animations2.length;
        model2.scale.x = model2.scale.y = model2.scale.z = 0.125; // 1/8 scale, modeled in cm

        init2();
        start2();
        animate2( lastTimestamp2 );

        //alert("second loaded");

    } );
    } 
```

...

如您所见，我使用

场景.删除（模型）；

删除之前的场景。

第一个场景显示然后消失，但是新的场景没有加载。你有科为什么？

（注：我不知道我的第一个场景到底有多长。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T19:49:28.037

如果您知道动画有多长，您可以使用 setTimeout 来加载第二个模型。

```
var loader = new THREE.ColladaLoader();
loader.options.convertUpAxis = true;
loader.load('PATH TO MODEL', function colladaReady( collada){
    dae = collada.scene;
    skin = collada.skins[ 0 ];              
    dae.scale.x = dae.scale.y = dae.scale.z = 1;
    dae.updateMatrix();
    scene.add(dae);    
    render(); 
    setTimeout(loadSecond,3000);
});

function loadSecond(){
    var loader = new THREE.ColladaLoader();
    loader.options.convertUpAxis = true;
    loader.load('PATH TO MODEL', function colladaReady( collada){
        ///repeat model loading logic
} 
```

setTimeout 中的时间间隔等于动画的长度。

# algorithm - 使用标志的简单算法

> ID：11815063
> 
> 赞同：1
> 
> 时间：2012-08-05T08:41:18.883
> 
> 标签：algorithm

存在标志定义：

```
flag1=1
flag2=2
flag3=4
flag4=8
...
flagN=2^(N-1)

flag=flag1+flag2+...+flagN 
```

如果`flagI`没有设置，它 eq`0`

我有`flag`。哪种方法可以轻松检查，例如`flag2`定义？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-05T08:50:55.410

请注意，在每个标志中，只有一位设置为 1，其他位设置为 0。

```
flag1 = 000 ... ... 0001
flag2 = 000 ... ... 0010
flag3 = 000 ... ... 0100
// and like this 
```

因此，如果您按位与，`flag & flag2`则只有在定义时结果才会是非零的`flag2`。

```
r = flag & flag2;
if r != 0 then flag2 is defined 
```

您可以对所有标志执行此操作。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-05T12:34:29.997

# 回答你的问题

范围是`flag`多少？如果低于 2^64-1，几乎所有方法都可以。

正如@taskinoor 所发布的，您应该注意到：

> ```
> flag1 = 000 ... ... 0001 
> 
> flag2 = 000 ... ... 0010 
> 
> flag3 = 000 ... ... 0100 
> ```

换句话说，

```
flag[n] = 1 << (n-1) 
```

所以，如果你想检查所有位，一个`for`循环并且`bitwise operation`足够快来解决你的问题。像这样（假设你可以理解*C/C++*并且 flag 小于 2^32，这可以由*C/C++*`unsigned int`中的 an 持有）：

 *```
void check(unsigned int flag)
{
  for (int i = 0; i < 32; ++i)
    if ((flag & (1 << i)) != 0)
      printf("flag%d defined!\n", i+1);
} 
```

`flag`它是 O(k)，其中 k 是二进制类型的长度。对于`unsigned int`，它是 O(32) = O(1)，几乎在恒定时间内。

# 如果您只想计算定义了多少个标志：

我不知道你的目的是什么。如果您只想计算定义了多少个标志并且`flag`小于 2^64，那么以下方法很棒（假设`unsigned int`也是如此）：

```
unsigned int count_bit(unsigned int x)
{
  x = (x & 0x55555555) + ((x >> 1) & 0x55555555);
  x = (x & 0x33333333) + ((x >> 2) & 0x33333333);
  x = (x & 0x0F0F0F0F) + ((x >> 4) & 0x0F0F0F0F);
  x = (x & 0x00FF00FF) + ((x >> 8) & 0x00FF00FF);
  x = (x & 0x0000FFFF) + ((x >> 16)& 0x0000FFFF);
  return x;
} 
```

如果您调用 count_bit(1234567890)，它将返回 12。

让我解释一下这个算法。

该算法基于`Divide and Conquer Algorithm`. 假设有一个 8 位整数 213（二进制 11010101），算法是这样工作的（每次合并两个相邻块）：

```
+-------------------------------+
| 1 | 1 | 0 | 1 | 0 | 1 | 0 | 1 |  <- x
|  1 0  |  0 1  |  0 1  |  0 1  |  <- first time merge
|    0 0 1 1    |    0 0 1 0    |  <- second time merge
|        0 0 0 0 0 1 0 1        |  <- third time ( answer = 00000101 = 5)
+-------------------------------+ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-05T08:47:10.523

```
Boolean isSet (flags, flagN){
   Return (flags & flagN) != 0;
} 
```

Flags 是标志向量，flagN 是你要检查的标志

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-05T09:54:19.967

值得更深入地了解位掩码和标志的概念。然后，您可以使用您的想象力有效地表示状态。（以下仅举例说明）

```
 First -Define the bitmask :          0x0000001c 
```

当您对掩码执行“与”操作时，得到非零值的二进制字符串是什么？

这些是您的有效标志值。

此位掩码的有效标志值： `0x0000001c,0x00000014,0x00000018,0x00000004,0x00000008,etc ..`

因此，在您的应用程序中，如果您可以执行以下操作：

```
flagvariable |= flagvalue1  ->Enable a particular flag.  
if( flagvariable & maskvalue)   :Check if a mask is enabled  : 
```

然后您需要检查的不同情况：

```
if(flagvariable &maskvalue ==flagvalue1)    { do something}
else  
if(flagvariable &maskvalue ==flagvalue2) {do something else}    

flagvariable &= `flagvalue1  : Clear the flag 
```

为了更清楚地了解标志和位掩码，只需进入 gdb 并执行 p /t 并评估上述操作。*

# iphone - tableviewcell 的标签显示错误的值

> ID：11815069
> 
> 赞同：0
> 
> 时间：2012-08-05T08:41:46.780
> 
> 标签：iphone, ios5, xcode4.3

这是我到目前为止制作的表格视图

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return [titleArray count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    CustomCell *cell = (CustomCell *)[tableView dequeueReusableCellWithIdentifier:[CustomCell reuseIdentifier]];
    if (cell == nil)
    {
        [[NSBundle mainBundle] loadNibNamed:@"CustomCell" owner:self options:nil];
        cell = _customCell;
        _customCell = nil;
    }
    button.tag = indexPath.row;
    cell.titleLabel.text = [titleArray objectAtIndex:indexPath.row];
    cell.timerLabel.text =  [timeArray objectAtIndex:indexPath.row];
    time = [[secondArray objectAtIndex:indexPath.row] integerValue];
    NSLog(@"Title %@, time %@, second %@, time %i, tag %d", titleArray, timeArray, secondArray, time, button.tag);
    return cell;
} 
```

这是我迄今为止制作的按钮

```
- (IBAction)onoffBtn:(id)sender
{
    NSIndexPath *indexPath = [_tableView indexPathForCell:(UITableViewCell*)[[sender superview] superview]];
    NSLog(@"My tag is %d time %i, tag %d",indexPath.row, time, button.tag);
} 
```

当我运行它时，我为每个数据放置了 3 个具有不同值的单元格，我的日志如下所示

```
2012-08-05 16:32:59.224 Schedule[960:f803] Title (
    "Title 1",
    "Test 2",
    "Test 3"
), time (
    "5 secs",
    "10 secs",
    "15 secs"
), second (
    5,
    10,
    15
), time 15, tag 2

// after I push onoffBtn, my log is showing below

2012-08-05 16:33:01.409 Schedule[960:f803] My tag is 0 time 15, tag 2
2012-08-05 16:33:05.042 Schedule[960:f803] My tag is 1 time 15, tag 2
2012-08-05 16:33:07.113 Schedule[960:f803] My tag is 2 time 15, tag 2 
```

对于标记，标记显示时间和标记的错误结果，即 15 和 2。如何解决？如果您不介意，请提供代码和解释，因为我想了解。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T09:39:36.247

出了问题的是您在 XCode 的 nib 文件中使用自定义 UITableViewCell 创建了按钮，然后将该按钮连接到视图控制器类的属性。

这不会按您想要的方式工作，因为您的班级中只有一个属性，但您的表中有很多行。所以你会得到你看到的症状。

Apple[在此处](http://developer.apple.com/library/ios/documentation/UserExperience/Conceptual/TableView_iPhone/TableViewCells/TableViewCells.html#//apple_ref/doc/uid/TP40007451-CH7-SW20)推荐的技术是为您在 nib 文件中添加的每个元素提供一个唯一标签（例如，您的按钮是标签 1），然后使用`viewWithTag:`

# android - 向警报对话框添加垂直滚动条

> ID：11815073
> 
> 赞同：0
> 
> 时间：2012-08-05T08:42:33.427
> 
> 标签：android

我正在应用程序中制作警报对话框。由于警报对话框中存在更多文本，我想在警报对话框中放置垂直滚动条。我尝试了很多选项，但没有任何效果。请告诉我如何解决这个问题问题。这是代码：

```
AlertDialog.Builder HelpOnButtonDialog ;
        HelpOnButtonDialog = new AlertDialog.Builder(this);
        TextView HelpOnButtonView = new TextView(this);
        HelpOnButtonView.setSingleLine(false);
        HelpOnButtonView.setTextColor(getResources().getColor(R.color.dark_green));
        HelpOnButtonView.setText("hello");  
        Button HelpOnButton = new Button(this);
        HelpOnButton.setHeight(20);
        HelpOnButton.setWidth(20);
        HelpOnButton.setText("Ok");
        HelpOnButton.setOnClickListener(HelpOnButtonClickListener);
        LinearLayout linearLayout = new LinearLayout(this);
        linearLayout.setLayoutParams( new  LinearLayout.LayoutParams(LinearLayout.LayoutParams.WRAP_CONTENT,
                LinearLayout.LayoutParams.WRAP_CONTENT));
        linearLayout.setOrientation(1); 
        linearLayout.setBackgroundColor(getResources().getColor(R.color.black));
        linearLayout.addView(HelpOnButtonView);
        linearLayout.addView(HelpOnButton);

        ScrollView sv = new ScrollView(this);
        sv.pageScroll(0);
        sv.setBackgroundColor(0);
        sv.setScrollbarFadingEnabled(true);
        sv.setVerticalFadingEdgeEnabled(false);
        sv.addView(linearLayout);
        alertHelp = HelpOnButtonDialog.create();
        alertHelp.setView(sv);
        alertHelp.show(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T11:13:19.230

创建一个自定义对话框，您可以根据需要对其进行自定义。在对话框布局xml文件中

用可滚动的方式围绕您的 RelativeLayout 或 LinearLayout，如下面的代码

```
<ScrollView
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:scrollbars="vertical"
    android:scrollbarAlwaysDrawVerticalTrack="true"
    android:orientation="vertical"
    android:layout_weight="1">

    <!--Your other text views, buttons... etc surrounded by RelativeLayout
or LinearLayout goes here-->

</ScrollView> 
```

当内容超过 dlalog 框大小时，它将显示滚动条。希望对你有帮助 ：）

# php - 即使用户名无效，登录仍会继续

> ID：11815075
> 
> 赞同：0
> 
> 时间：2012-08-05T08:43:11.083
> 
> 标签：php, jquery

我有下面的代码，它将检查用户在被授予访问站点之前是否在数据库中可用，但是当用户输入任何值时，即使他没有在数据库中注册，它也会让他登录。在此代码之后有一个 JQuery 代码，如果字段为空并且它不是默认的文本字段值，我还使用它来防止任何值被输入到该数据库中。但是，每当我登录时，我仍然开始提示输入有效文本并继续登录过程，而不是在我填写必填字段之前阻止我做任何事情。

```
<?php 
    if(isset($_SESSION["owner"])){
        header("Location:index.php");
        exit();
    }
?>
<?php
    require_once("includes/connection.php");
    if(isset($_POST["username"]) && isset($_POST["password"])){
        $owner = $_POST["username"];
        $password = $_POST["password"];
        $query = "SELECT id FROM users WHERE username = '$owner' AND password ='$password' LIMIT 1";
        $sql = mysql_query($query,$connection);
        $existCount = mysql_num_rows($sql);
        if($existCount == 1){   
            while($row = mysql_fetch_array($sql)){
                $id = $row["id"];
            }
            $_SESSION["id"] =$id;
            $_SESSION["owner"] = $owner; 
            $_SESSION["password"] =$password;
            echo"welcome back" .$owner."<a href=\"index.php\"> please continue</a>";
            exit();
        }
        else{
            header("Location:login.php");
            exit();
        }
    }
    require_once("includes/header.php");
?>
<script type='text/javascript' src='http://ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.min.js?ver=3.2.1'></script>
<script type='text/javascript' src='/bobs/admin/javascript/login.js'></script>
<div class="cBoth"></div>
<div id="sep"></div>

<div class="Calign">
<div id="formcontent">

<div class="flotr">
 <h2>Book faster every time</h2> 
 <br/>
 <p class="widthis">Contrary to popular belief, Lorem Ipsum is not simply random text. It has roots in a piece of classical Latin literature from 45 BC, making it over 2000 years old. Richard McClintock, a Latin professor at Hampden-Sydney College in Virginia, looked up one of the more obscure Latin words, consectetur, from a Lorem Ipsum passage, and going through the cites of the word in classical literature, discovered the undoubtable source.</p>
</div><!-- end of flotr div text --->

<div class="flotr">
<div id="errordisplay"></div>
   <fieldset class="spacing">
   <form method="post" action="admin/formProc/formproc.php" id="frmnewuser">
     <h2>New to Travelnstay ?</h2>
     <p class="widthis">A Travelnstay account is required to continue.</p> 
     <p class="formsp">Username</p>
     <p><label><input type="text" name="username" height="15px"  value="Username "id="username"/><label></p>
     <p class="formsp">Email</p>
     <p><label><input type="text" name="email" value="Your Email" id="email"/><label></p>
     <p class="formsp">Re-email</p>
     <p><label><input type="text" name="reemail" value="Retype your Email"  id="reemail"/><label></p>
     <p class="formsp">Password</p> 
     <p><label><input type="password" name="password" id="password"/><label></p>
     <p class="formsp">Re-password</p>
     <p><label><input type="password" name="repassword" id="repassword" /><label></p>
     <p class="formsp"><label><input type="submit" name="newuser" value="SING ME UP"/><label></p>
   </form>
  </fieldset>
</div><!-- end of flotr div sign up--->

<div class="flotl">
   <fieldset class="spacing">
   <form method="post" action="login.php">
   <h2>Sign in</h2>
   <p class="widthis">You need to log in to access your account.</p> 
   <p class="formsp">Username</p>
   <p><input type="text" name="username"  value="username" id="usernamelog"/></p>
   <p class="formsp">Password</p>
   <p><input type="password" name="password"  /></p>
   <p></p>
   <p class="formsp"><label><input type="submit" name="login" value="Login"/><label></p>   
   </form>
   </fieldset>
</div><!-- end of flotl div login--->

 </div>
</div>

<div class="cBoth"><!-- clear Both--></div> 
<!--<script src="/bobs/admin/javascript/formscript.js"></script>-->
<?php require_once("includes/footer.php"); ?> 
```

下一行是 JQuery 代码。

```
$(document).ready(function(){
    //this will waip out anyhting in that text field.    
    $("#usernamelog").click(function(){
        $(this).val("");
        $(this).css("color","#741863");
    });          
    $("input:submit").click(function(){
        var username = $("#usernamelog").val();            
        if((username == "")||(username == "username")){
           alert("Please enter a valid username");
        }          
    });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T08:48:37.057

您必须停止提交过程，从单击处理程序返回 false 应该完成此操作

```
 $("input:submit").click(function(){
    var username = $("#usernamelog").val();

    if((username == "")||(username == "username")){
       alert("Please enter a valid username");
       return false;
    }

  }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T08:47:40.910

您需要使用以下方法防止默认行为`return false`：

```
if(username == "" || username == "username") {
  alert("Please enter a valid username");
  return false;
} 
```

您也可以使用[`preventDefault()`](http://api.jquery.com/event.preventDefault/)，也可以看看 @ [event.preventDefault() 与 return false](https://stackoverflow.com/questions/1357118/event-preventdefault-vs-return-false)

# c - C中字符串内的八进制表示

> ID：11815076
> 
> 赞同：3
> 
> 时间：2012-08-05T08:43:31.973
> 
> 标签：c, octal, number-systems

在给定的程序中：

```
int main() {
  char *p = "\0777";
  printf("%d %d %d\n",p[0],p[1],p[2]);
  printf("--%c-- --%c-- --%c--\n",p[0],p[1],p[2]);
  return 0;  
} 
```

它显示输出为：

> 63 55 0
> --?-- --7-- ----

我可以理解它将**\0** (\077) 之后的前两个字符从**八进制转换为十进制**，但是任何人都可以解释为什么 2 个字符，为什么不是 1 或 3 或任何其他字符？

请解释这背后的逻辑。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-05T11:24:52.053

```
char *p = "\07777"; 
```

这里将字符串文字分配给指向 char 的指针。

```
"\07777" 
```

在这个字符串中使用八进制转义序列，所以前三位数字代表一个八进制数。因为八进制转义序列的规则是——

您只能在八进制转义序列中使用数字 0 到 7。**八进制转义序列永远不能长于三位数字，并且以不是八进制数字的第一个字符终止。**尽管您不需要使用所有三位数字，但您必须至少使用一位。例如，ASCII 退格字符的八进制表示为 \10，字母 A 的表示为 \101，如 ASCII 图表中所示。

所以你的字符串文字存储在内存中，比如

第一个字节为八进制数 077，它只是十进制的 63 和“？” 性格上

第 2 和第 3 个字节分别为字符 '7' 和 '7'

最后一个终止字符'\0'。

所以你的答案是字符串文字的第 1、2、3d 个字节。

有关更多说明，您可以访问此网站

[http://msdn.microsoft.com/en-us/library/edsza5ck.aspx](http://msdn.microsoft.com/en-us/library/edsza5ck.aspx)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-05T09:18:59.490

这只是语言定义八进制转义序列的方式。

八进制转义序列可以是字符常量或字符串文字的一部分，由 a`\`后跟 1、2 或 3 个八进制数字 ( `'0'`.. `'7'`) 组成。

在`"\07777"`中，反斜杠后跟 3 个八进制数字（0、7、7），表示一个字符，其值为`077`八进制或`63`十进制。在 ASCII 或 ASCII 派生编码中，这恰好是一个问号`'?'`。

所以字面量表示一个长度为 3 的字符串，由`'?'`, '7', '7' 组成。

但是你的问题一定有错别字。当我运行你的程序时，我得到的输出是：

```
63 55 55
--?-- --7-- --7-- 
```

如果我将声明更改`p`为

```
char *p = "\0777"; 
```

我得到你描述的输出。请注意，最后`----`实际上是两个连字符，后跟一个空字符，然后是两个连字符。如果您使用的是类 Unix 系统，请尝试通过管道传输程序的输出`cat -v`或`cat -A`。

当您发布代码时，复制并粘贴它非常重要，而不是重新输入它。

（而且你错过`#include <stdio.h>`了顶部的。）

# cocoa - 如何在 Mountain Lion 中显示分享按钮？

> ID：11815077
> 
> 赞同：10
> 
> 时间：2012-08-05T08:43:41.037
> 
> 标签：cocoa, osx-mountain-lion

Mountain Lion 提供了一个内置共享按钮，可显示适合该应用程序的共享服务菜单：

![Safari 6.0 中的共享按钮](../Images/ed2ca9406780f5663b397852856fb615.png)

如何将其插入我的应用程序？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-08-05T10:19:57.557

在 Mountain Lion 上添加分享按钮：

**1)**添加一个`NSButton`被叫，例如，`shareButton`。

**2）**为该按钮添加标准图像：

```
[shareButton setImage:[NSImage imageNamed:NSImageNameShareTemplate]];
[shareButton sendActionOn:NSLeftMouseDownMask]; 
```

**3）**进入“点击动作”，呈现`NSSharingServicePicker`：

```
NSSharingServicePicker *sharingServicePicker = [[NSSharingServicePicker alloc] initWithItems:urls];
sharingServicePicker.delegate = self;

[sharingServicePicker showRelativeToRect:[sender bounds]
                                          ofView:sender
                                   preferredEdge:NSMinYEdge]; 
```

**4)**最终，实现`NSSharingServicePickerDelegate`自定义选择器可用服务的方法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-02-25T23:05:37.537

在 Swift 中，我使用了这个：

```
extension NSSharingService {
    class func shareContent ( content: [AnyObject], button: NSButton ) {
        let sharingServicePicker = NSSharingServicePicker (items: content )

        sharingServicePicker.showRelativeToRect(button.bounds, ofView: button, preferredEdge: NSRectEdge.MaxY)
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T22:39:54.817

请注意，如果您尝试通过 Interface Builder 添加此按钮：

1.  选择按钮
2.  切换到属性检查器
3.  删除按钮标题
4.  插入：NSShareTemplate 作为图像名称。

它在 XCode 中对我来说看起来不正确，但在运行时工作正常。

PS - 这似乎是[您需要使用系统图标字符串值](http://developer.apple.com/library/mac/#documentation/userexperience/conceptual/applehiguidelines/SystemProvidedIcons/SystemProvidedIcons.html)（NSShareTemplate）而不是常量（NSImageNameShareTemplate）的情况。

# php - 在php中将文件从一个文件夹移动到另一个文件夹

> ID：11815078
> 
> 赞同：2
> 
> 时间：2012-08-05T08:43:57.997
> 
> 标签：php, upload

我有点卡在这里。

我希望能够将已经上传到另一个文件夹的文件移动。

例如：

用户上传并转到名为“upload_temp/image.jpg”的临时文件夹，现在我想将其移动到“resources/user_images/profile/image.jpg”

我已经尝试过明显的 rename() ，但由于某种原因这不起作用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-05T09:05:06.807

尝试这个;-

```
chmod ("resources/user_images/profile/image.jpg", 0777);

if (copy("upload_temp/image.jpg","resources/user_images/profile/image.jpg")) {
  unlink("upload_temp/image.jpg");
} 
```

# facebook - 从我的 facebook 应用程序登录到 facebook

> ID：11815079
> 
> 赞同：1
> 
> 时间：2012-08-05T08:43:59.227
> 
> 标签：facebook, codeigniter, login

正在使用 codeigniter 框架开发 Facebook 应用程序，正在使用 php-sdk 函数连接到 facebook 库，如果用户未登录到 facebook，正在使用以下代码将用户引导到登录框

```
$params = array(
        'scope' => 'read_stream, friends_likes'  
        'cancel_url' => 'http://www.facebook.com/',
        'canvas' => 1,
        'fbconnect' => 0,
        'req_perms' => 'publish_stream, read_stream, read_friendlists,email',
        'redirect_uri' => 'http://apps.facebook.com/morganmarket',
        'next' => 'http://apps.facebook.com/morganmarket',
        'display' => 'popup'
    );
    $loginUrl = $this->facebook->getLoginUrl($params);
    echo '<script> window.top.location="' . $loginUrl . '"</script>'; 
```

当我尝试在未登录 Facebook 的情况下使用我的应用程序时，它会将我定向到出现错误的页面的问题

```
 The page you requested was not found.
You may have clicked an expired link or mistyped the address. Some web addresses are case sensitive.

Return home
Go back to the previous page 
```

根据我的代码给出该协议有什么问题，它应该将我引导至 facebook 登录表单，然后引导至我的应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T16:01:10.357

在我的 codeigniter 应用程序中，一切正常 :)

恒星

```
$config['facebook_login_parameters'] = array(
                                        'scope' => 'user_likes, friends_likes, email',
                                        'display' => 'page',

                                        'cancel_url' => 'http://www.facebook.com/',
                                        'redirect_uri' => 'http://apps.facebook.com/amnestyapp/',
                                        'canvas' => 1,
                                        'req_perms' => 'publish_stream, read_stream, read_friendlists,email',
                                        'next' => 'http://apps.facebook.com/amnestyapp/',

                                        ); 
```

丘帕卡布拉

```
class Chupacabra extends CI_Controller {

function index() {
    $this->load->model('fizzlebizzle');
    $result = $this->fizzlebizzle->get_user();

    if ($result['is_true']) {
        $this->session->set_userdata(array('facebook_uid' => $result['facebook_uid'], 'is_logged_in' => TRUE));
        redirect('secure', 'refresh');

    } else {
        //$data['page'] = 'home_view';
        //$this->load->view('template', $data);
        // tu logowanie

        $loginUrl = $this->facebook->getLoginURL($this->config->item('facebook_login_parameters'));
         echo '<script> window.top.location="' . $loginUrl . '"</script>';

    }
}

function logout() {
    $this->auth->logout();
} 
```

}

# php - 通过网站插入新记录时通知android应用程序中的用户

> ID：11815080
> 
> 赞同：0
> 
> 时间：2012-08-05T08:44:09.853
> 
> 标签：php, android, mysql, google-cloud-messaging

我有一个使用 php 和 MySql DB 与网站连接的 android 项目我想在管理员通过网站插入新记录时通知拥有该应用程序的用户。我正在寻找解决方案，我找到了这个 [http://developer.android.com/guide/google/gcm/gs.html](http://developer.android.com/guide/google/gcm/gs.html) 但我不知道，它适合我吗？或者有其他解决方案谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T12:27:24.027

这看起来是通知您的应用程序的好方法 - 您只需在网站上添加代码即可在数据更改时调用 gcm。

另一种解决方案是让您的应用程序定期轮询网站以进行更改，但这在带宽方面成本很高。我会使用 GCM

# grid - 如何使用 Twitter Bootstraps 网格系统在两列之间添加一条线

> ID：11815081
> 
> 赞同：55
> 
> 时间：2012-08-05T08:44:35.713
> 
> 标签：grid, twitter-bootstrap

两列布局，中间有一条线。

```
[                      ] | [                      ]
[                      ] | [                      ]
[                      ] | [                      ]
[     Left Column      ] | [    Right Column      ]
[                      ] | [                      ]
[                      ] | [                      ]
[                      ] | [                      ]
[                      ] | [                      ] 
```

* * *

## 回答 #1

> 赞同：87
> 
> 时间：2015-03-30T08:42:50.723

我的解决方案使用`:before`伪元素在列之间放置一个定位元素。这不再需要任何 HTML 元素，只会应用于类的直接子`.col-*`元素`.border-between`。这应该应用于与 相同的元素`.row`。

**HTML**

```
<div class="row border-between">
  <p class="col-sm-6">This column does not have a border, because it's a first child.</p>
  <p class="col-sm-6">This column has a border to the left</p>
</div> 
```

**CSS**

```
.border-between > [class*='col-']:before {
   background: #e3e3e3;
   bottom: 0;
   content: " ";
   left: 0;
   position: absolute;
   width: 1px;
   top: 0;
}

.border-between > [class*='col-']:first-child:before {
   display: none;
} 
```

* * *

## 回答 #2

> 赞同：67
> 
> 时间：2012-08-06T05:18:36.013

我想我的问题是正确的......这是下面的代码。下面的内联样式仅用于说明。您在 css 文件中应用您的样式。

```
<div class="container">
    <div class="row-fluid">
        <div class="span6" style="padding-right:20px; border-right: 1px solid #ccc;">
            <p>Some Contents Here...</p>
        </div>

        <div class="span6">
            <p>Some Contents Here...</p>
        </div>
    </div>
</div> 
```

上面的代码应该输出[这个图像](https://i.imgur.com/ZiJZU.png)。

![在此处输入图像描述](../Images/1c645456339fa040c34fe5e9328b8634.png)

* * *

## 回答 #3

> 赞同：30
> 
> 时间：2015-12-18T11:28:30.947

基于@Ross Angus 解决方案，我找到了一种适应高度的方法。只需将每列的边界放在彼此的顶部。

```
.grid--borderBetween > [class*='col-']:before,
.grid--borderBetween > [class*='col-']:after {
    background: #b2b2b2;
    bottom: 0;
    content: " ";
    position: absolute;
    width: 1px;
    top: 0;
}
.grid--borderBetween > [class*='col-']:before {
    left: 0;
}
.grid--borderBetween > [class*='col-']:after {
    right: -1px;
}
.grid--borderBetween > [class*='col-']:first-child:before,
.grid--borderBetween > [class*='col-']:last-child:after {
    display: none;
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2019-01-26T00:19:58.160

Bootstrap 4 现在带有[边界实用程序类](https://getbootstrap.com/docs/4.2/utilities/borders/)。因此，如果您使用的是 Bootstrap 4，您可以在需要它们的列上使用这些类。例如，如果您想要 A 列和 B 列之间的边界，您可以在 A 列`border-right`上添加类。

这是一个演示：

```
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/css/bootstrap.min.css" integrity="sha384-GJzZqFGwb1QTTN6wy59ffF1BuGJpLSa9DkKMp0DgiMDm4iYMj70gZWKYbI706tWS" crossorigin="anonymous">

<div class="container">
  <div class="row text-center">
    <div class="col border-right">
      Column A
    </div>
    <div class="col">
      Column B
      <br>
      <br>
      <br>
      Additional content demonstrating that the border stretches to accommodate the height of both columns.
    </div>
  </div>
</div>
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-05T09:55:59.730

基于非常相似的答案：[https ://stackoverflow.com/a/11299934/1478467](https://stackoverflow.com/a/11299934/1478467)

我建议从 2 个角度来解决这个问题：边框或行背景。这是[演示（jsfiddle）](http://jsfiddle.net/Sherbrow/ypQQN/)。

在背景选项的示例下方，唯一的缺点是您无法真正控制线条的宽度，除非您使用复杂的背景。

```
<div class="row myBackground">
        <div class="span6">span6</div>
        <div class="span6">span6</div>
</div> 
```

```
/* Put here the background (color, images, etc.) that you want between the columns */
.row.myBackground { background: #F00; }
/* This is the column background, for example white as the page background */
.row.myBackground > [class*="span"] { background: blue; } 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-02-02T20:09:53.447

扩展 user2136179 提供的 CSS，还可以做下边框。它需要使用 matchHeight 但可以让您的 Bootstrap Grid 看起来像一个表格网格。[看看这个](http://codepen.io/anon/pen/GrdKYr)

```
// See the rest on codepen.io
$(".border-bottom").children("div").matchHeight(); 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-08-05T08:47:24.000

我认为您可以将左列设置为 48% 宽度，右列设置为 48% 宽度，中心 2% div 具有重复背景。你必须自己处理

# sql - 在 Oracle 中创建视图时出错

> ID：11815085
> 
> 赞同：-5
> 
> 时间：2012-08-05T08:45:15.587
> 
> 标签：sql, oracle

我正在尝试创建一个包含列`HospitalCode`、`WardNo`、的视图`BedNo`，`DateLastServiced`并将这些列命名为 Hospital、Ward、Bed 和 Last Serviced。

```
CREATE VIEW HospitalCode, WardNo, BedNo, DateLastServiced  
AS SELECT * FROM BED, WARD 
```

我收到此错误，说我缺少关键字。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T09:02:39.870

您的 SQL 中有三个错误：

1.  您创建视图的语法错误
2.  您在两个表之间没有连接条件
3.  您不指定哪个列属于哪个表。

要定义视图中列的名称，您可以在 CREATE VIEW 语句中的视图名称之后列出它们（如[手册中所述](http://docs.oracle.com/cd/E11882_01/server.112/e26088/statements_8004.htm)）

```
CREATE VIEW MyView1 
(
   hospital,
   Ward, 
   Bed 
   Last_Serviced
)
AS 
SELECT bed.HospitalCode, 
       ward.WardNo, 
       bed.BedNo, 
       ward.DateLastServiced  
FROM BED
  JOIN WARD on bed.bedno = ward.bedno; 
```

由于您没有发布所涉及的两个表的定义，我不得不猜测哪一列来自哪个表。**您将不得不调整选择**以调整缺失的信息。但它应该给你足够的信息

更改视图列名称的另一个选项是使用列别名选择原始列：`bed.HospitalCode as hospital`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T08:52:34.187

您错过了视图名称试试这个：

```
CREATE VIEW MyView1 AS SELECT HospitalCode, WardNo, BedNo, DateLastServiced  
 FROM BED, WARD 
```

我也不确定 SELECT，因为我没有你的表结构。

**更新**

> ORA-00918: 列定义不明确

这个错误表示BED、WARD这两个表都有相同的列名，所以oracle无法确定使用哪一个。

后输出

```
DESCRIBE TABLE BED;
DESCRIBE TABLE WARD; 
```

# jquery - JQUERY CSS如何修改

> ID：11815087
> 
> 赞同：0
> 
> 时间：2012-08-05T08:45:28.053
> 
> 标签：jquery, css

Phill Pafford 提到了这段代码：

[通过 CSS 调整按钮的大小](https://stackoverflow.com/questions/7303035/resizing-a-button-through-css)

这个例子：

[http://jsfiddle.net/3DSGT/](http://jsfiddle.net/3DSGT/)

JS：

```
// For all buttons use something like this
$('.ui-btn').css('width','50%');

// For individual buttons use something like this
$('#theButton1').parent().css('width', '75%');

// Or this for HREF data-role buttons
$('#hrefButton4').css('width', '45%');

// this changes the height for all buttons
$('.ui-btn-text').css('font-size','50px');

// This changes the height for a single element 
$('#hrefButton3').children().children().css('font-size','30px'); 
```

HTML：

```
<div data-role="page" id="home"> 
    <div data-role="content">
        <input type="button" id="theButton1" value="Press Me 1" />
        <input type="button" id="theButton2" value="Press Me 2" />
        <input type="button" id="theButton3" value="Press Me 3" />
        <input type="button" id="theButton4" value="Press Me 4" />
        <br />
        <a href="#" data-role="button" id="hrefButton1">HREF Me 1</a>
        <a href="#" data-role="button" id="hrefButton2">HREF Me 2</a>
        <a href="#" data-role="button" id="hrefButton3">HREF Me 3</a>
        <a href="#" data-role="button" id="hrefButton4">HREF Me 4</a>
    </div>
</div> 
```

我已经尝试过了，但它不起作用：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml">
  <h<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta content="text/html;charset=UTF-8" http-equiv="Content-Type" />
    <title></title>
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.1/jquery.mobile-1.1.1.min.css" />
    <script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
    <script src="http://code.jquery.com/mobile/1.1.1/jquery.mobile-1.1.1.min.js"></script>
    <script type="text/javascript">      

// WIDTH
// For all buttons use something like this
$('.ui-btn').css('width','100%');

// For individual buttons use something like this
$('#theButton1').parent().css('width', '75%');

// Or this for HREF data-role buttons
$('#hrefButton4').css('width', '45%');

// Height of the button
//$('.ui-btn-inner').css('height','50px'); // this changes all buttons, might also need to adjust the vertical alignment for the text as well
$('#theButton2').prev().css('height','50px');

// Height of the font in the button
//$('.ui-btn-text').css('font-size','50px'); // this changes all buttons
$('#hrefButton3').children().children().css('font-size','60px');
​​​
    </script> 

  </head>
  <body>
    <div data-role="page" id="home"> 
    <div data-role="content">
        <input type="button" id="theButton1" value="Press Me 1" />
        <input type="button" id="theButton2" value="Press Me 2" />
        <input type="button" id="theButton3" value="Press Me 3" />
        <input type="button" id="theButton4" value="Press Me 4" />
        <br />
        <a href="#" data-role="button" id="hrefButton1">HREF Me 1</a>
        <a href="#" data-role="button" id="hrefButton2">HREF Me 2</a>
        <a href="#" data-role="button" id="hrefButton3">HREF Me 3</a>
        <a href="#" data-role="button" id="hrefButton4">HREF Me 4</a>
   </div>
</div>
  </body>
</html> 
```

我应该怎么做才能让它工作？在我的情况下，文本保持不变，而不像图像中的那样。

先感谢您。

![在此处输入图像描述](../Images/7ceb0a0418a009781a2227ea0f7af25d.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T08:49:05.870

您运行脚本太早了。

做这个：

```
$(function()
{
    // WIDTH
    // For all buttons use something like this
    $('.ui-btn').css('width','100%');

    // For individual buttons use something like this
    $('#theButton1').parent().css('width', '75%');

    // Or this for HREF data-role buttons
    $('#hrefButton4').css('width', '45%');

    // Height of the button
    //$('.ui-btn-inner').css('height','50px'); // this changes all buttons, might also need to adjust the vertical alignment for the text as well
    $('#theButton2').prev().css('height','50px');

    // Height of the font in the button
    //$('.ui-btn-text').css('font-size','50px'); // this changes all buttons
    $('#hrefButton3').children().children().css('font-size','60px');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T11:11:43.407

这是答案：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta content="text/html;charset=UTF-8" http-equiv="Content-Type" />
    <title></title>
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.1/jquery.mobile-1.1.1.min.css" />
    <script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
    <script src="http://code.jquery.com/mobile/1.1.1/jquery.mobile-1.1.1.min.js"></script>
  </head>
  <body>
    <script type="text/javascript">      
      $(document).ready(function() {
        $('.ui-btn-text').css('font-size','50px')
        $('.ui-btn-inner').css('height','200px');
        });
</script> 
        <a data-corners="false" href="index.html" data-role="button" data-icon="delete"
          data-iconpos="top" data-theme="a">LIVINGROOM</a> </div>
    </div>
  </body>
</html> 
```

# list - 搜索 HABTM 复选框/列表

> ID：11815088
> 
> 赞同：0
> 
> 时间：2012-08-05T08:45:38.477
> 
> 标签：list, cakephp, search, checkbox, has-and-belongs-to-many

我有这个联系表格，它也与其他一些具有 HABTM 关系的表格有关。它们以列表或复选框的形式显示在表单中。我想要的是能够在仍处于表单中的同时搜索它们以选择适用于我在表单中添加的联系人的那些。我不知道该怎么做——在想也许是 Javascript？

当您在朋友列表中搜索时，我所说的一个例子就是 Facebook。

以下是接触模型的 HABTM 关系：

```
 public $hasAndBelongsToMany = array(
    'Company' => array(
        'className' => 'Company',
        'joinTable' => 'companies_contacts',
        'foreignKey' => 'contact_id',
        'associationForeignKey' => 'company_id',
        'unique' => 'keepExisting',
        'dependent' => true,
        'conditions' => '',
        'fields' => '',
        'order' => '',
        'limit' => '',
        'offset' => '',
        'finderQuery' => '',
        'deleteQuery' => '',
        'insertQuery' => ''
    ),
    'Event' => array(
        'className' => 'Event',
        'joinTable' => 'contacts_events',
        'foreignKey' => 'contact_id',
        'associationForeignKey' => 'event_id',
        'unique' => 'keepExisting',
        'dependent' => true,
        'conditions' => '',
        'fields' => '',
        'order' => '',
        'limit' => '',
        'offset' => '',
        'finderQuery' => '',
        'deleteQuery' => '',
        'insertQuery' => ''
    ),
    'Screenoccupation' => array(
        'className' => 'Screenoccupation',
        'joinTable' => 'contacts_screenoccupations',
        'foreignKey' => 'contact_id',
        'associationForeignKey' => 'screenoccupation_id',
        'unique' => 'keepExisting',
        'dependent' => true,
        'conditions' => '',
        'fields' => '',
        'order' => '',
        'limit' => '',
        'offset' => '',
        'finderQuery' => '',
        'deleteQuery' => '',
        'insertQuery' => ''
    ),
    'Tapearchive' => array(
        'className' => 'Tapearchive',
        'joinTable' => 'contacts_tapearchives',
        'foreignKey' => 'contact_id',
        'associationForeignKey' => 'tapearchive_id',
        'unique' => 'keepExisting',
        'dependent' => true,
        'conditions' => '',
        'fields' => '',
        'order' => '',
        'limit' => '',
        'offset' => '',
        'finderQuery' => '',
        'deleteQuery' => '',
        'insertQuery' => ''
    ),
    'Relation' => array(
        'className' => 'Contact',
        'joinTable' => 'contacts_contacts',
        'foreignKey' => 'contact_id',
        'associationForeignKey' => 'related_id',
        'unique' => true,
        'conditions' => '',
        'fields' => '',
        'order' => '',
        'limit' => '',
        'offset' => '',
        'finderQuery' => '',
        'deleteQuery' => '',
        'insertQuery' => ''
    )
); 
```

不知道我需要向你们展示哪些其他代码，所以请让我知道需要哪些代码，我会将它们添加到这个问题中。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T10:01:09.253

您可以使用 jquery 插件为您完成这项工作。

这似乎符合您[的](http://www.erichynds.com/examples/jquery-ui-multiselect-widget/demos/#filter)标准。[选](http://harvesthq.github.com/chosen/)的也不错。

无论如何，做一个 google 搜索以查看所有可用的 jquery 插件，看看是否适合您的需要。

# javascript - 如何对 JavaScript 中的表单帖子的响应做出反应

> ID：11815094
> 
> 赞同：1
> 
> 时间：2012-08-05T08:46:59.067
> 
> 标签：javascript, cordova

我想在 HTML 中创建一个登录屏幕，用户可以在其中填写他的用户名和密码。之后，他将带有提交的数据发送到验证数据的服务器。如果登录正确，他会以 JSON 格式发回一条带有 的消息`id`，如下所示：

```
{"id":"37"} 
```

现在我的问题是：如何在 Javascript 中获取这些信息？我想检查一下`id`，如果没问题，将用户重定向到一个新的 HTML 屏幕。

我正在使用 PhoneGap 创建一个 Android 应用程序，所以我唯一可以使用的是 HTML、CSS 和 JavaScript。要发送`POST`i 使用 HTML`<form>`标记，而不是特殊的 JavaScript。如果我在 Firefox 中测试它可以工作，我填写我的用户名和密码，然后显示带有 的消息`id`。现在我想用 JavaScript 对这个响应做出反应。有人可以帮助我吗？

AJAX 代码：

```
function loadXMLDoc() {
    var xmlhttp;
    if (window.XMLHttpRequest) {
        // code for IE7+, Firefox, Chrome, Opera, Safari
        xmlhttp=new XMLHttpRequest();
    }
    else {
        // code for IE6, IE5
        xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
    }
    xmlhttp.onreadystatechange = function() {
        if (xmlhttp.readyState==4) {
            document.getElementById("myDiv").innerHTML=xmlhttp.responseText;
        }
    };
    xmlhttp.open("POST",url,true);
    xmlhttp.send(login); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T08:49:17.110

JSON 解析器将仅识别 JSON 文本，拒绝所有脚本。在提供原生 JSON 支持的浏览器中，JSON 解析器也比 eval 快得多。预计原生 JSON 支持将包含在下一个 ECMAScript 标准中。

`var myObject = JSON.parse(myJSONtext, reviver);`

可选的**reviver**参数是一个函数，它将在最终结果的每个级别上为每个键和值调用。

现在访问 id 属性，如`myObject.id`

# c# - CCNET Build Publisher 与多源目录

> ID：11815095
> 
> 赞同：1
> 
> 时间：2012-08-05T08:47:06.417
> 
> 标签：c#, asp.net, cruisecontrol.net

我正在使用 CCNet 并想使用构建发布者从多个 sourcedir 复制，是否有任何解决方法可以做到这一点，请记住，我想让构建文件夹标有内部版本号。这是我的代码：

```
 <buildpublisher>
    <sourceDir>D:\CCNETTest1\WebApplication1\WebApplication1</sourceDir>
    <publishDir>C:\inetpub\wwwroot\CI</publishDir>
    <alwaysPublish>false</alwaysPublish>
  </buildpublisher> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T09:45:22.000

你不能在 buildpublisher 中指定多个 sourcedir，所以如果你想，你必须在创建一个包含你想要的所有 sourcedir 的文件夹之前使用

创建 nant 副本：

```
<copy todir="${target.dir}\firstsource">
    <fileset basedir="firstsource">
        <include name="*.*" />
    </fileset>
</copy>
<copy todir="${target.dir}\secondsource">
    <fileset basedir="secondsource">
        <include name="*.*" />
    </fileset>
</copy> 
```

并且在您的所有源代码都在 target.dir 文件夹中之后，使用您的 buildpublisher 但指定 sourceDir ，该文件夹包含您想要的所有文件夹...

```
 <buildpublisher>
    <sourceDir>$(target.dir)</sourceDir>
    <publishDir>C:\inetpub\wwwroot\CI</publishDir>
    <alwaysPublish>false</alwaysPublish>
  </buildpublisher> 
```

# java - Java - 在调用方法中尝试和捕获

> ID：11815100
> 
> 赞同：0
> 
> 时间：2012-08-05T08:47:24.127
> 
> 标签：java

我在Java中有一个基本问题：

我有两种方法：`functionA`& `functionB`。`functionA`调用`functionB`，并`functionB`引发异常。调用`functionB`在 try 范围内`functionA`。

现在我也希望`functionA`它能够捕获范围。

有什么办法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T08:51:35.377

如果抛出异常`methodB`并且您捕获它，则将其传播到的一种方法`methodA`是重新抛出它：

```
void methodB() throws SomeException {
    try {
        //Something that can throw SomeException
    } catch (SomeException e) {
        //rethrow e
        throw e;
    }
}

void methodA() {
    try {
        methodB();
    } catch (SomeException e) {
        //this block will run if methodB throws SomeException
    }
} 
```

但是，如果您需要，您可能根本不应该捕获异常，`methodB`而让它自动传播到`methodA`：

```
void methodB() throws SomeException {
    //Something that can throw SomeException: don't catch it
}

void methodA() {
    try {
        methodB();
    } catch (SomeException e) {
        //this block will run if methodB throws SomeException
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T08:56:24.770

实际上，这就是它通常的工作方式，只要它`functionB`本身没有捕获异常。抛出异常时，会在调用堆栈中冒泡，直到`catch`找到匹配的块。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-05T09:00:31.963

不确定这是否是您想要的

```
 void functionB() throws MyException {
 try{
 .....
}Catch(MyException e){
//do something here;
 throw e;
}
}

void functionA() {
try {
    functionB();
} catch (MYException e) {
    //do something else to A here
}
} 
```

# java - View.OnClickListener() 一个函数或接口

> ID：11815101
> 
> 赞同：8
> 
> 时间：2012-08-05T08:47:31.443
> 
> 标签：java, android, eclipse

View.OnClickListener() 是函数还是接口？当我们尝试在 android 中设置 onclicklistener() 方法时，我们使用 new View.OnClickListener() 并且据我所知，它让我感到困扰，

*   我们不需要初始化包含静态方法的类的对象来使用这些方法。我们为什么这样做？
*   当我们使用 implements 来实现一个接口时，我们不会调用接口的静态方法。

所以有人可以告诉我为什么我们这样做：

*   新的 View.OnClickListener()，用于使用 onclick() 方法？
*   View.OnClickListener 如果是接口，为什么要使用 () 呢？

感谢您的回复..

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-05T09:01:34.367

我不确定我是否理解您所写的有关静态方法的内容。View.OnClickListener 是一个接口：http: [//developer.android.com/reference/android/view/View.OnClickListener.html](http://developer.android.com/reference/android/view/View.OnClickListener.html)

要在视图上设置点击监听器，您需要传递一个实现 OnClickListerner 接口的*实例：http:* [//developer.android.com/reference/android/view/View.html#setOnClickListener(android.view.View.OnClickListener)](http://developer.android.com/reference/android/view/View.html#setOnClickListener(android.view.View.OnClickListener))

在 android 中执行此操作的最常见方法是定义一个匿名内部类 ( [http://docs.oracle.com/javase/tutorial/java/javaOO/innerclasses.html](http://docs.oracle.com/javase/tutorial/java/javaOO/innerclasses.html) )，该类实现 OnClickListener 之类的

```
myView.setOnClickListener(new View.OnClickListener() {
    @Override           
    public void onClick(View v) {
        // Handle view click here           
    }
}); 
```

上面的代码都定义了一个匿名内部类并创建了它的一个实例。相当于先定义一个实现View.OnClickListener的类（如果定义在同一个类中）

```
class MyOnClickListener implements View.OnClickListener {
    @Override           
    public void onClick(View v) {
        // Handle view click here           
    }
} 
```

后来用这个

```
MyOnClickListener listener = new MyOnClickListener();
myView.setOnClickListener(listener); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-09-08T10:34:52.023

[![在此处输入图像描述](../Images/370d806cf86fa1fd9dd3a83825626484.png)](https://i.stack.imgur.com/HXrMK.png)

示例代码，

在内部它的工作原理是这样的，

```
public class MyView{

public stinterface MyInterface{
        public void myOnClick(View view);
    }

}

 public class MyButton{
        View view;

        public void setOnClicker(MyInterface onClicker) {
            onClicker.myOnClick(view);
        }
    }

public class MyExample{

    public void method(){
        MyButton myButton = new MyButton();
        myButton.setOnClicker(new MyInterface() {
            @Override
            public void myOnClick(View view) {

            }
        });
    }
} 
```

# spring-mvc - 如何从 jsp 页面中的 ModelAndView 对象中获取值？

> ID：11815103
> 
> 赞同：1
> 
> 时间：2012-08-05T08:47:54.990
> 
> 标签：spring-mvc

例如：我在控制器类中使用一个方法：

```
public ModelAndView fileupload(HttpServletRequest request, HttpServletResponse response) throws Exception 
```

在我使用的那个方法中

```
Map modelMap = new HashMap(); 
```

然后将值设置为

```
modelMap.put(name,request.getParameter("uname")); 
```

然后在 modelView 对象中我添加对象

```
modelView.addAllObjects(modelMap); 
```

然后将视图设置为

```
modelView.setViewName("salu.jsp"); 
```

然后返回模型视图对象。

它正在显示该 jsp 页面，但我使用 scriptlet 在 jsp 中打印的值如

```
<% String username=request.getAttribute("name"); 
   out.println("name is  "+username); %>. 
```

但它正在打印值为空。告诉我如何获得价值。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-06T06:52:18.327

假设`name`您的控制器中的变量值为`"name"`，只需`${name}`在您的 JSP 中使用。

# java - 更新休眠中的一些列值

> ID：11815104
> 
> 赞同：2
> 
> 时间：2012-08-05T08:47:59.803
> 
> 标签：java, hibernate

我有一个表，其中有 14 列。现在我有一个对象对应于我只有 5 个值要更新的表。
我正在使用 saveOrUpdate 方法来保存/更新行。问题是当我使用此方法更新这 5 列时，所有其他 9 列值都设置为 null。
一种解决方案是我编写更新 sql 查询来做同样的事情，但我想使用 Hibernate API 的不是 sql 查询。
有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-05T08:52:00.220

```
Foo objectToUpdate = (Foo) session.get(Foo.class, idOfObjectToUpdate);
objectToUpdate.setField1(newValue1);
objectToUpdate.setField2(newValue2); 
```

无需调用`saveOrUpdate()`or `merge()`：对象已附加，因此所有内容都在事务结束时刷新并提交。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-03T14:31:21.853

在实体上使用 DynamicUpdate

例子：

```
Query q = session.createQuery("from StockTransaction where tranId = :tranId ");
q.setParameter("tranId", 11);
StockTransaction stockTran = (StockTransaction)q.list().get(0);

stockTran.setVolume(4000000L);
session.update(stockTran); 
```

SQL会像；

```
Hibernate:
    update
        mkyong.stock_transaction
    set
        VOLUME=?
    where
        TRAN_ID=? 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-11T10:06:14.203

使用 Hibernate 5 尝试下面的代码....

```
CriteriaBuilder builder = session.getCriteriaBuilder();
CriteriaUpdate<Vehicle> criteria = builder.createCriteriaUpdate(Vehicle.class);
Root<Vehicle> root = criteria.from(Vehicle.class);
criteria.set(root.get("ownername"), "Ashok Parmar");
criteria.where(builder.equal(root.get("vehicleId"), "123"));
session.createQuery(criteria).executeUpdate(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-11-22T15:29:27.037

在您的实体类上添加 @DynamicUpdate 注释

```
@Entity
@DynamicUpdate
public class Product implements Serializable {

//rest of the codes are omitted for brevity

} 
```

然后更新表的特定列（或列）值

```
Product newProduct = session.get(Product.class, id);//here id is the product_id for which you are gonna update
newProduct.setName("Pencil 2B");//new name
session.update(newProduct); 
```

@DynamicUpdate 将仅更新已修改的列，其余列不会受到影响。

# android - 无法使用 maven 编译系统应用程序（电话）-无法解析 EventLogTags

> ID：11815105
> 
> 赞同：0
> 
> 时间：2012-08-05T08:48:00.140
> 
> 标签：android, maven, android-source

这与我[之前的问题有关。](https://stackoverflow.com/questions/11757285/cannot-compile-android-internal-app-using-maven)我正在尝试`Phone`使用 maven 从 android 4.0.4 构建应用程序（我正在添加 framework_intermediates 作为依赖项，因此解决了内部 apis 问题），我遇到了这个问题。部分日志如下：

```
Phone/src/com/android/phone/CallNotifier.java:[601,32] cannot find symbol
symbol  : variable EventLogTags 
```

（对应的行`CallNotifier.java`是`EventLog.writeEvent(EventLogTags.PHONE_UI_MULTIPLE_QUERY);`：）

```
Phone/src/com/android/phone/InCallScreen.java:[723,28] cannot find symbol
symbol  : variable EventLogTags 
```

（对应的行`InCallScreen.java`是`EventLog.writeEvent(EventLogTags.PHONE_UI_ENTER);`：）

所以......它找不到类EventLogTags。实际上有一个文件`Phone/src/com/android/phone/EventLogTags.logtags`，其内容如下：

```
# See system/core/logcat/event.logtags for a description of the format of this file.

option java_package com.android.phone;

70301 phone_ui_enter
70302 phone_ui_exit
70303 phone_ui_button_click (text|3)
70304 phone_ui_ringer_query_elapsed
70305 phone_ui_multiple_query 
```

显然，这个文件告诉系统使用一些特定的标签来记录系统中的重要事件。我做了一个完整的 grep，但找不到任何定义值的文件`PHONE_UI_ENTER`，`PHONE_UI_MULTIPLE_QUERY`等等。这些只是日志，所以我可以注释掉这些并让它工作。但我不想这样做，因为稍后我需要在整个 aosp 中构建它。所以我的问题是，如何在不修改任何文件的情况下使用 maven 进行编译？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T10:37:54.703

如果需要，Android 构建系统代码会从文件中生成 Java 类`.logtags`。见：[https ://github.com/android/platform_build/blob/master/core/base_rules.mk](https://github.com/android/platform_build/blob/master/core/base_rules.mk)

我想你需要自己破译`make`规则并运行代码生成。

# jquery - 如何为适当的选择选项（使用 DropKick）做出适当的操作？

> ID：11815106
> 
> 赞同：0
> 
> 时间：2012-08-05T08:48:15.327
> 
> 标签：jquery, css, ruby-on-rails

我正在制作报告页面，并希望为适当类型的报告显示适当的列表。

我有月度、年度和总结报告。

这是我的选择，我想对此做出反应：

```
 <div class="select">
        <select name="type" class="default" tabindex="7">
          <option value="monthly">Monthly report</option>
          <option value="yearly">Yearly report</option>
          <option value="summary">Summary</option>
        </select>
  </div> 
```

这是 DropKick 的示例：

```
 $('.change').dropkick({
   change: function (value, label) {
   alert('You picked: ' + label + ':' + value);
  }
}); 
```

我想使用类似的东西：

```
 $('.default').dropkick({
 change: function (value, label) {
if(value=="monthly"){
    $(".monthly").show();
  }
 else if(value="yearly"){
   $("#yearly").show();
 }
 }
}); 
```

但它没有用。我在我的视图中隐藏了 div，其中包含所有这些选择：

```
 <div class="types">
       <div class="monthly">
          ...
        </div>
      <div class="yearly">
        ...
      </div>
  </div> 
```

谁能帮我 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T08:51:34.090

```
$("#yearly").show(); 
```

应该

```
$(".yearly").show(); 
```

因为那个 div 使用`yearly`类，而不是 id。

另外，如果您只想一次显示一个，您可能应该在显示一个之前隐藏另一个 div。

又注意到一件事

```
else if(value="yearly"){ 
```

应该

```
else if(value=="yearly"){
             ^ this 
```

# safari - 为什么在 question2answer 系统的 Safari 内容中显示 css 代码？

> ID：11815107
> 
> 赞同：1
> 
> 时间：2012-08-05T08:48:19.957
> 
> 标签：safari, question2answer

我在我的 Mac 上安装了 question2answer，我通过 Safari 登录并提出问题，发布问题后，我查看问题，内容中有一条奇怪的行：

# next_pages_container { 宽度：5px; 高度：5px；位置：绝对；顶部：-100 像素；左：-100px；z-index：2147483647！重要；} 测试题

但如果我使用 Chrome，它工作正常。

我认为这个代码行是一个 css 代码，我不知道它为什么会显示在内容中。

任何人都可以帮助我吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T08:11:04.547

显然，这是 Safari 的“Evernote Web Clipper”中的一个错误：http: [//discussion.evernote.com/topic/26375-help-clipper-injects-clearly-html-into-my-pages/](http://discussion.evernote.com/topic/26375-help-clipper-injects-clearly-html-into-my-pages/)

剪裁器将代码插入所有可编辑区域。建议的解决方法是禁用限幅器。

# objective-c - Objective c委托自我释放

> ID：11815108
> 
> 赞同：0
> 
> 时间：2012-08-05T08:48:25.590
> 
> 标签：objective-c, ios, delegates, static-methods, nsurlconnectiondelegate

假设我有某种静态类，我的意思是我的静态库的 .h 类，其中包含所有静态函数。一些函数对 Web 服务进行异步请求，并将 NSMutableURLRequest 与 initWithRequest:request 一起使用。因为我想监视来自服务器的数据，所以我创建了一个实现所有 NSURLConnectionDelegate 连接协议的委托，即接受、附加、完成并将其传递给请求。

问题是，由于我的 .h 类中有所有静态方法，并且我没有 NSURLConnectionDelegate 委托作为成员（因为类是静态的），我在哪里释放我的连接委托？主要问题是在 connectionDidFinishLoading 委托方法中对 NSURLConnectionDelegate 进行自我释放是一种常见的做法吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T11:10:28.633

您可以在将委托分配给 NSURLConnection 后立即释放它。从[文档中](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsurlconnection_Class/Reference/Reference.html)：

> 在下载期间，连接保持对委托的强引用。当连接完成加载、失败或被取消时，它会释放该强引用。

这是对象仅持有对其委托的弱引用的一般规则的一个例外。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T08:57:37.883

释放委托不是正常的做法，因为对象保留委托是不正常的。委托通常用`weak`( `__unsafe_unretained`) 属性引用，因此当对象被释放时引用会被安全地破坏。

# android - 编辑项目后使用 ArrayAdapter 刷新 ListView

> ID：11815109
> 
> 赞同：3
> 
> 时间：2012-08-05T08:48:31.323
> 
> 标签：android, listview, android-arrayadapter

我有一个 ListView，它使用 ArrayAdapter 显示从 SQLiteDatabase 中的表中获取的注释列表。

```
public class NotepadActivity extends ListActivity {

protected static final int ADD_NEW_NOTE = 0;
protected static final int EDIT_NOTE = 1;
ArrayAdapter<Note> adapter;
NotesManager manager;
private Note nNoteToDelete;
ArrayList<Note> lstAllNotes;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    findViewById(R.id.btnAddNewNote).setOnClickListener(addNewNote);
    manager = new NotesManager(this);
    lstAllNotes = manager.getAllNotes();
    adapter = new ArrayAdapter<Note>(this, R.layout.note, lstAllNotes);
    setListAdapter(adapter);
    getListView().setOnItemClickListener(editNote);
    registerForContextMenu(getListView());
} 
```

当我点击这个 ListView 中的一个项目时，它会将这个 Note 对象带到 EditNote 活动中：

```
private OnItemClickListener editNote = new OnItemClickListener() {

    @Override
    public void onItemClick(AdapterView<?> parent, View view, int position,
            long id) {
        Note currNote = (Note)parent.getItemAtPosition(position);

        int curr_note_id = currNote.getId();
        String curr_note_title = currNote.getTitle().toString();
        String curr_note_details = currNote.getDetails().toString();

        Intent editNote = new Intent(NotepadActivity.this, EditNote.class);
        editNote.putExtra("CURR_NOTE_ID", curr_note_id);
        editNote.putExtra("CURR_NOTE_TITLE", curr_note_title);
        editNote.putExtra("CURR_NOTE_DETAILS", curr_note_details);

        startActivityForResult(editNote, EDIT_NOTE);

    }
}; 
```

我可以在那里编辑笔记的标题和内容。当我点击保存按钮时，它会将标题字符串和详细信息以及 ID int 发送回主活动：

```
public class EditNote extends Activity implements OnClickListener {

int curr_note_id;
String curr_note_title;
String curr_note_details;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.editnote);

    curr_note_id = getIntent().getExtras().getInt("CURR_NOTE_ID");
    curr_note_title = getIntent().getExtras().getString("CURR_NOTE_TITLE");
    curr_note_details = getIntent().getExtras().getString(
            "CURR_NOTE_DETAILS");

    ((EditText) findViewById(R.id.edtTitle)).setText(curr_note_title);
    ((EditText) findViewById(R.id.edtDetails)).setText(curr_note_details);

    findViewById(R.id.btnSave).setOnClickListener(this);
    findViewById(R.id.btnCancel).setOnClickListener(this);
}

@Override
public void onClick(View v) {

    switch (v.getId()) {
    case R.id.btnSave:
        String strNoteTitle = ((EditText) findViewById(R.id.edtTitle)).getText().toString().trim();
        String strNoteDetails = ((EditText) findViewById(R.id.edtDetails)).getText().toString().trim();

        if (!strNoteTitle.equals("")) {

            Intent data = new Intent();
            data.putExtra("NOTE_ID", curr_note_id);
            data.putExtra("NOTE_TITLE", strNoteTitle);
            data.putExtra("NOTE_DETAILS", strNoteDetails);
            setResult(RESULT_OK, data);
            finish();
        } else {
            ((EditText) findViewById(R.id.edtTitle))
                    .setError("A note must contain a title");
        }

        break;
    case R.id.btnCancel:
        setResult(RESULT_CANCELED);
        finish();
        break;
    }

} 
```

}

并且在主要活动中，如果有更改，它应该使用新标题更新 DB 和 ListView。我的代码确实更新了数据库，但我没有立即看到 ListView 中的更改，只有当我退出应用程序并再次打开它时。这是代码（观看第二种情况，EDIT_NOTE）：

```
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    if (resultCode == RESULT_OK) {
        switch (requestCode) {
        case ADD_NEW_NOTE:
            String noteTitle = data.getExtras().getString("NOTE_TITLE");
            String noteDetails = data.getExtras().getString("NOTE_DETAILS");
            Note nNewNote = new Note(-1, noteTitle, noteDetails);
            adapter.add(nNewNote);
            manager.addNote(nNewNote);
            break;
        case EDIT_NOTE:
            int noteID = data.getExtras().getInt("NOTE_ID");
            noteTitle = data.getExtras().getString("NOTE_TITLE");
            noteDetails = data.getExtras().getString("NOTE_DETAILS");
            nNewNote = new Note(noteID, noteTitle, noteDetails);
            Toast.makeText(NotepadActivity.this, noteTitle + "\n" + noteDetails, Toast.LENGTH_SHORT).show();
            manager.updateNote(nNewNote);           
            break;
        }

    }
    super.onActivityResult(requestCode, resultCode, data);
} 
```

之后 manager.updateNote(nNewNote); 我尝试使用 adapter.notifyDataSetChanged(); 但这不起作用——我没有看到 ListView 的变化。也许我用错了，也许我应该使用其他东西......

那么如何让 ListView 刷新呢？如何在不重新启动应用程序的情况下立即看到更改？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T08:53:04.177

当您从编辑活动返回时，再次设置列表适配器以刷新 ListView。如果您想查看任何更新，则必须每次手动刷新 ListView。希望这可以帮助。

# php - 是否可以忽略 PHP 中的特定错误？

> ID：11815111
> 
> 赞同：3
> 
> 时间：2012-08-05T08:48:46.883
> 
> 标签：php, error-handling

在开发过程中，我使用

```
error_reporting(E_ALL | E_STRICT | E_NOTICE); 
```

有时，虽然很少，但`E_STRICT`我想忽略一些特定的错误。但我不想`E_STRICT`完全关闭。

有没有办法忽略特定的错误，无论是通过错误代码，还是通过字符串比较错误消息本身，尽管它很老套？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-05T09:13:24.493

当然你可以，看看[set_error_handler](http://cz2.php.net/manual/en/function.set-error-handler.php)，你传递你的函数的名字，当一些错误发生时，它将被调用。在那里你可以忽略错误，做你想做的事，或者只是将它们发送到正常的 PHP 错误输出。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-05T09:03:29.047

当您想忽略特定的错误类型时，请使用以下格式

错误报告（E_ALL ^ E_NOTICE）

您可以在[http://www.php.net/manual/en/function.error-reporting.php下找到更多信息](http://www.php.net/manual/en/function.error-reporting.php)

# c# - 不能向 DataSet 添加多于一行

> ID：11815118
> 
> 赞同：1
> 
> 时间：2012-08-05T08:49:33.110
> 
> 标签：c#, dataset

这是代码：

```
DataSet1.CashRow CashRow = MainDataSet.Cash.NewCashRow();
CashRow.SetIdNull();
CashRow.Date = CashItem.Date;
CashRow.Description = CashItem.Description;
CashRow.Amount = CashItem.Amount;
MainDataSet.Cash.Rows.Add(CashRow); 
```

它第一次工作得很好。但是，如果放入一个循环并简单地翻倍，则不会添加更多行。我必须关闭应用程序并重新启动它。

更新：我有一个连接到数据集的 DataGridView。这会导致任何问题吗？这个问题真的很奇怪，一个星期以来一直在尝试解决这个问题。也许还有另一种添加行的方法？

更新 2：找到原因：“System.Data.ConstraintException：列 'Id' 被限制为唯一。值 '' 已经存在。”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T09:08:16.347

尝试这个：

```
DataSet1.CashRow CashRow = MainDataSet.Cash.NewCashRow();
CashRow.Date = CashItem.Date;
CashRow.Description = CashItem.Description;
CashRow.Amount = CashItem.Amount;

MainDataSet.Cash.AddCashRow(CashRow);

CashTableAdapter.Update(MainDataSet); 
```

如果它仍然只更新一行，则将此块作为函数，如下所示：

```
private void CreateCashRow (DateTime date, string description, int amount)
{
   DataSet1.CashRow CashRow = MainDataSet.Cash.NewCashRow();
   CashRow.Date = date;
   CashRow.Description = description;
   CashRow.Amount = amount;

   MainDataSet.Cash.AddCashRow(CashRow);

   CashTableAdapter.Update(MainDataSet);
} 
```

并根据需要多次调用该函数。

您必须确保桌子上有 PrimaryKey

*   我还建议您不要像使用 CashRow 那样对变量和类型使用如此相似的名称。

# visual-studio-2010 - Visual Studio 2010 Phone Express 中的 Visual Studio 调试可视化工具不起作用

> ID：11815119
> 
> 赞同：1
> 
> 时间：2012-08-05T08:49:55.430
> 
> 标签：visual-studio-2010, visual-studio-debugging, windows-phone-7.1.1

我创建了一个简单的 Visual Studio 调试器，它在 Visual Studio 2010 Phone Express 中根本不起作用——它没有出现在选项列表中。我意识到 Express 版本有限制，但根据[这个页面](http://msdn.microsoft.com/en-us/library/sb2yca43.aspx)，列出的所有 Express 版本都支持可视化工具，除了电话版本没有列出。

有关如何在 Phone Express 中加载调试可视化器的任何建议？

# php - 如何在 .htpasswd 文件中使用 md5 密码？

> ID：11815121
> 
> 赞同：2
> 
> 时间：2012-08-05T08:50:31.143
> 
> 标签：php, .htaccess, .htpasswd

您好我正在尝试设置一个`.htaccess`和一个`.htpasswd`文件以查看用户是否可以访问特定目录。当新用户注册时，他们的密码使用 PHP`md5()`函数加密，然后与其他登录信息一起存储在数据库中。我想将他们的一些加密密码`.htpasswd`动态添加到我的文件中，以便他们可以进入子成员部分。我遇到了麻烦，因为该`.htpasswd`文件可以使用使用该`crypt()`功能加密的密码，但我不确定如何让它使用他们的 md5 加密密码。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-05T08:57:19.773

[文档](http://httpd.apache.org/docs/2.2/programs/htpasswd.html)说：

> htpasswd 使用为 Apache 修改的 MD5 版本或系统的 crypt() 例程来加密密码。htpasswd 管理的文件可能包含两种类型的密码；某些用户记录可能具有 MD5 加密的密码，而同一文件中的其他用户记录可能具有使用 crypt() 加密的密码。

`-m`我认为您可以使用参数明确指定 apache 在 htpasswd 文件中使用 md5s 作为密码`htpasswd`

如果您不想或不能使用 htpasswd 工具，您可以从 PHP创建基于*crypt()的密码：*

```
$clearTextPassword = 'some password';
$password = crypt($clearTextPassword, base64_encode($clearTextPassword)); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-03T22:48:21.697

"I think you can explicitly specify apache to use md5s for password in htpasswd file using -m argument to htpasswd"

I just found out the exact opposite in Ubuntu 12.04 and newer, it defaults to md5 and you have to use the -d flag to get it to use Crypt. This might be the case elsewhere too, I can't seem to find a version number for htpasswd.

# android - 列表视图到 SQLite

> ID：11815127
> 
> 赞同：0
> 
> 时间：2012-08-05T08:51:08.770
> 
> 标签：android, sqlite, checkbox, android-listview

我创建了一个显示已安装应用程序的列表视图。它有应用程序图标 + 应用程序名称 + 复选框。我想从此列表中选择应用程序并将应用程序名称存储在 sqlite DB 中我应该如何开始？

喜欢如何识别选定的应用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T12:24:37.930

您需要制作一个自定义 listView 适配器。您可以使每个项目可选择，然后当用户选择应用程序时，您可以调用代码将其插入数据库

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T23:34:36.720

这是我为我的一个应用程序制作的适配器。这是一个课堂考勤功能，显示学生的姓名、照片和几个复选框（一个用于这里，一个用于迟到）。该列表来自一个 SQlite 查询，但我需要对每个单击的复选框做一些事情。

```
public class MyDataAdapter extends SimpleCursorAdapter {
    private Cursor c;
    private Context context;
    private Long classnum;
    private gradeBookDbAdapter mDbHelper;

    public static final int LATE=2;
    public static final int ATTEND=1;
    int idxCol;
    int idx;

    // itemChecked will store the position of the checked items.

    public MyDataAdapter(Context context, int layout, Cursor c, String[] from,
            int[] to, Long mRowId) {
        super(context, layout, c, from, to);
        this.c = c;
        this.context = context;
        mDbHelper = new gradeBookDbAdapter(context);
        mDbHelper.open();
        classnum = mRowId;
        c.moveToFirst();

    }
    public class ViewHolder{
        public TextView text;
        public TextView text2;
        public ImageView image;
        public CheckBox here;
        public CheckBox late;
    }

    public View getView(final int pos, View inView, ViewGroup parent) {
        Bitmap bm;
        ImageView studentPhoto;
        View vi=inView;
        final ViewHolder holder;

        if (inView == null) {
            LayoutInflater inflater = (LayoutInflater) context
                    .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            vi = inflater.inflate(R.layout.show_attendance, null);

            holder=new ViewHolder();
            holder.text=(TextView)vi.findViewById(R.id.stuname);
            holder.text2=(TextView)vi.findViewById(R.id.stuIndex);
            holder.image=(ImageView)vi.findViewById(R.id.icon);
            holder.here=(CheckBox)vi.findViewById(R.id.attend);
            holder.late=(CheckBox)vi.findViewById(R.id.late);
            vi.setTag(holder);

        }
        else
           holder=(ViewHolder)vi.getTag();

        c.moveToPosition(pos);
        int index = c.getColumnIndex(gradeBookDbAdapter.KEY_NAME);
        String name = c.getString(index);
        holder.text.setText(name);
        index = c.getColumnIndex(gradeBookDbAdapter.KEY_ROWID); 
        String Index = c.getString(index);
        holder.text2.setText(Index);

        bm = gradeBookDbAdapter.getStudentPhoto(name);
        if (bm != null) {
            holder.image.setImageBitmap(bm);  
        }           
        else {
            // use icon image
            holder.image.setImageResource(R.drawable.person_icon);
        }

        // pull out existing attend/late fields and set accordingly
        int attend = c.getInt(c.getColumnIndex(gradeBookDbAdapter.KEY_ATTEND));
        if(attend==1){
           holder.here.setChecked(true);
           itemCheckedHere.set(pos, true);
        }
        //else {
        //   holder.here.setChecked(false);
        //   itemCheckedHere.set(pos, false);
        //}

        int late = c.getInt(c.getColumnIndex(gradeBookDbAdapter.KEY_LATE));
        if (late==1){
           holder.late.setChecked(true);
           itemCheckedLate.set(pos, true);
        }
        //else {
        //  holder.late.setChecked(false);
        //    itemCheckedLate.set(pos, false);
        //}

        holder.here.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {

                CheckBox cb = (CheckBox) v.findViewById(R.id.attend);

                if (cb.isChecked()) {
                    itemCheckedHere.set(pos, true); 
                    int Index = new Integer(holder.text2.getText().toString());
                    mDbHelper.updateAttend(Index, classnum, ATTEND, 1, attendDate ); 
                } else if (!cb.isChecked()) {
                    itemCheckedHere.set(pos, false);
                    int Index = new Integer(holder.text2.getText().toString());
                    mDbHelper.updateAttend(Index, classnum, ATTEND, 0, attendDate );
                }
            }
        });
        holder.late.setOnClickListener(new OnClickListener() {

           public void onClick(View v) {
                CheckBox cb = (CheckBox) v.findViewById(R.id.late);

                if (cb.isChecked()) {
                   itemCheckedLate.set(pos, true);
                   int Index = new Integer(holder.text2.getText().toString());
                   mDbHelper.updateAttend(Index, classnum, LATE, 1, attendDate );
                } else if (!cb.isChecked()) {
                   itemCheckedLate.set(pos, false);
                   int Index = new Integer(holder.text2.getText().toString());
                   mDbHelper.updateAttend(Index, classnum, LATE, 0, attendDate );
                }
            }
        });

        holder.here.setChecked(itemCheckedHere.get(pos)); // this will Check or Uncheck the
        holder.late.setChecked(itemCheckedLate.get(pos)); // this will Check or Uncheck the
        // CheckBox in ListView
        // according to their original
        // position and CheckBox never
        // loss his State when you
        // Scroll the List Items.

        return vi;
    }

} 
```

请注意，我有两个稀疏数组“ItemCheckedHere”和“ItemCheckLate”。它们跟踪我选择了哪些项目。Android 不会跟踪并且会重用视图，因此滚动复选框列表将导致复选框被选中或没有这些我用来维持已检查状态的数组，似乎随机未检查。

# c# - 查询对象时如何查看LINQ生成的SQL语句？

> ID：11815128
> 
> 赞同：-2
> 
> 时间：2012-08-05T08:51:12.983
> 
> 标签：c#, linq-to-objects

当我们使用 linq to sql 时，很少有可视化工具向我们展示 linq 生成了什么 sql，但是当我们通过 linq 查询对象时，有没有办法获得类似的 sql 语句。例如

```
string[] names =
        new string[] { "Jon Skeet", "Marc Gravell", "tvanfosson", 
                       "cletus", "Greg Hewgill", "JaredPar" };

    var results = from name in names
                  where name.StartsWith("J")
                  select name; 
```

我们可以从结果中提取 sql 吗？

有人建议使用下面的函数来拥有 sql....

```
public static class MyExtensions
{
public static string ToTraceString<T>(this IQueryable<T> t)
{
    string sql = "";
    ObjectQuery<T> oqt = t as ObjectQuery<T>;
    if (oqt != null)
        sql = oqt.ToTraceString();
    return sql;
}
} 
```

是真的吗？如果是，你能告诉我如何将我的结果转换为**IQueryable**，然后调用**ToTraceString()**方法。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T08:53:01.933

Linq to objects 不会为您生成 SQL。仅当您使用 linq to entity 或 linq to sql 时才会出现这种情况。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-05T09:01:13.290

我很确定您不能对“linq2objects”使用 SQL，因此无法从这些对象中获取 SQL。

Linq 2 对象的工作原理基本上是 sql 中的表扫描。执行时，它会逐行读取源代码行，并对每一行应用过滤器/选择器。例如，请参见[http://blogs.msdn.com/b/wesdyer/archive/2007/01/03/how-linq-to-objects-queries-work.aspx](http://blogs.msdn.com/b/wesdyer/archive/2007/01/03/how-linq-to-objects-queries-work.aspx)。

我假设您对调试查询感兴趣，还有另一个关于堆栈溢出的主题回答了这个问题：[如何调试 LINQ 语句](https://stackoverflow.com/questions/118341/how-to-debug-a-linq-statement)

# silverlight - XDocument - 获取节点值列表

> ID：11815134
> 
> 赞同：2
> 
> 时间：2012-08-05T08:51:48.770
> 
> 标签：silverlight, linq-to-xml

我有一个像这样的 XDocument：

```
<LookupList>
 <ImageInfo1>
  <FieldID>1057</FieldID> 
  <FieldName>Lookup_test</FieldName> 
  <LookupText>open</LookupText> 
 </ImageInfo1>
 <ImageInfo1>
  <FieldID>1057</FieldID> 
  <FieldName>Lookup_test</FieldName> 
  <LookupText>Waiting for input</LookupText> 
 </ImageInfo1>
 <ImageInfo1>
  <FieldID>1057</FieldID> 
  <FieldName>Lookup_NEW_NAME</FieldName> 
  <LookupText>Closed</LookupText> 
 </ImageInfo1>
</LookupList> 
```

我想得到

1.  唯一字段名称的数量和值以及
2.  每个 FieldName 的 LookupText 列表。

有人可以给我一个提示如何去做吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T11:56:56.880

首先，您需要知道如何从 XDocument 中读取元素：

```
public void ReadXDocument(XDocument doc)
{
    foreach (XElement el in doc.Descendants("ImageInfo1"))
    {
        string fieldid = el.Element("FieldID").Value;
        string fieldName = el.Element("FieldName").Value;
        string lookupText = el.Element("LookupText").Value;
    } 
```

一旦你知道了，使用 Linq 来实现你的目标就相对简单了。

这应该会给你一个不同的 FieldNames 列表：

```
 List<String> distinctNames = doc.Descendants("ImageInfo1")
                 .Select(o => o.Element("FieldName").Value)
                 .Distinct().ToList(); 
```

这应该为您提供每个 FieldName 的 LookupText 值的集合

```
 IEnumerable groups = doc.Descendants("ImageInfo1")
                 .GroupBy(o => o.Element("FieldName").Value)
                 .Select(o => new { Key = o.Key, Lookups = o.ToList() });
} 
```

# java - 在java中四舍五入到最接近的0.05的最佳方法

> ID：11815135
> 
> 赞同：5
> 
> 时间：2012-08-05T08:51:54.380
> 
> 标签：java, bigdecimal, rounding

考虑到 10% 的税适用于除食品以外的所有物品。此外，对进口商品征收 5% 的附加税。

如果一张音乐 CD 的成本是 12.49。该项目的税为 1.499。如果一瓶进口香水的成本是 47.50，则该物品的税为 7.125

有一项政策规定，一件物品的税款应四舍五入到最接近的 0.05。因此，1.499 应四舍五入为 1.5，7.125 应四舍五入为 7.25。

上述舍入要求可以使用以下逻辑来实现：

```
 (float) Math.ceil(taxAmount / 0.05f) * 0.05f; 
```

将税收添加到物品的成本中可以得出：

音乐CD：12.49 + 1.5 = 13.99 进口巧克力盒：47.50 + 7.25 = 54.65。

我面临以下输入的问题：

如果进口一盒巧克力的成本是11.85，那么税金就是0.5925

使用四舍五入政策，四舍五入后的税金为 0.6。

当我们添加 11.85 + 0.6 这两个浮点数时，我们得到的结果是 12.450001。与其他输入不同，此特定输入提供了很多小数位，而不是其他输出中的 2 个小数位。

我尝试使用 BigDecimal 而不是 float 来存储所有值，并将比例设置为 2 位小数。这种方法的问题在于，如果未指定舍入策略，bigDecimal 将在某些情况下抛出异常。为 BigDecimal 提供舍入策略会导致使用提供给 BigDecimal 的舍入策略对项目成本和适用税费的总和进行舍入，从而改变所需的输出。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-05T08:56:45.267

你可以使用`long`而不是`double`使用双你可以做

```
double d = Math.round(d * 20) / 20.0; // round up to multiple of 0.05 
```

使用多头（如美分）

```
long l = (l + 3) / 5 * 5; 
```

尽管它通常被认为是使用的最佳实践`int`，`long`或者`BigDecimal`大多数投资银行和基金都在使用`double`，因为一旦您了解如何安全地使用它们，它们使用起来更简单（比 long）和更快（比 BigDecimal）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-05T08:54:38.863

将货币金额存储为整数（例如美分数）。

这是一个常见问题——谷歌会给你很多很好的解释。

这里有一个：[为什么不使用 Double 或 Float 来表示货币？](https://stackoverflow.com/questions/3730019/why-not-use-double-or-float-to-represent-currency)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-22T14:39:49.170

这似乎是一个著名的技术面试问题的一部分关键是要了解您必须计算税款并将该金额四舍五入到 0.05 以计算四舍五入我使用了这个 groovy 脚本

```
import java.math.*

def myRound(BigDecimal d){ 
    def scale = new BigDecimal("0.05")
    def y = d.divide(scale)
    println "y :$y"
//    def q = y.round(new MathContext(0,RoundingMode.UP))
    def q = y.setScale(0,BigDecimal.ROUND_UP)
    println "q :$q (intero)"
    def z = q.multiply(scale)
    println "z :$z"
    return z
}

def taxBy(BigDecimal d,BigDecimal t){ 
    return myRound(d.multiply(t))
}
def importTax(BigDecimal d){ 
    return taxBy(d,new BigDecimal("0.15"))
}

def importBaseTax(BigDecimal b){ 
    return taxBy(d,new BigDecimal("0.05"))
}

ip = new BigDecimal("27.99")
ipt = importTax(ip)

println "${ip}-->${ipt} = ${ip+ipt}" 
```

我希望这很有用！

# ruby-on-rails-3 - 无法将正确的参数传递给 RoR 中的操作

> ID：11815138
> 
> 赞同：2
> 
> 时间：2012-08-05T08:52:22.620
> 
> 标签：ruby-on-rails-3

```
Rails 3.2.2 
```

`ArgumentError missing :action`即使我转到页面，此代码也会引发异常`/my_controller/some_action1`

```
#routes
namespace :my_controller do 
    get 'some_action1'
    get 'some_action2/:some_param1'

  end

#Controller
class MyController < ApplicationController
 def some_action1
 end

 def some_action2
  #handling the ajax request
  respond_to do |format|
     format.js
  end
 end

end

#View /my_controller/some_action1.html.haml
link_to "my_link", {:controller => :my_controller, :action => :some_action2,
                             :some_param1=>123}, :remote=>true, :id=>"unique_id123" 
```

你的意见？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T08:59:56.637

尝试用这些替换您的路线：

```
match '/my_controller/some_action1' => "my_controller#some_action1", :via => :get
match '/my_controller/some_action2/:some_param1' => "my_controller#some_action2", :via => :get 
```

# android - 翻转动画的最佳方法

> ID：11815145
> 
> 赞同：1
> 
> 时间：2012-08-05T08:53:12.107
> 
> 标签：android, android-animation

我有两个位图（原始和翻转一个）。我想用动画来显示翻转。什么是最好的方法？我可以使用 ImageSwitcher/Animator 对象吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T09:09:08.940

这是另一个很好的翻转示例

[http://code.google.com/p/android-3d-flip-view-transition/](http://code.google.com/p/android-3d-flip-view-transition/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T08:57:20.447

几个月前，当我不得不在我的应用程序中制作翻转动画时，我使用了这个 AWESOME 链接。

试试看，它有效：

[http://www.inter-fuser.com/2009/08/android-animations-3d-flip.html](http://www.inter-fuser.com/2009/08/android-animations-3d-flip.html)

# ruby - Ruby gem Mysql2返回日期类型无法解析

> ID：11815150
> 
> 赞同：1
> 
> 时间：2012-08-05T08:54:21.827
> 
> 标签：ruby, mysql2

我得到了哈希格式的结果：“日期”=>#'<'日期：4911851/2,0,2299161>

有人知道如何解析这种格式吗？我想将它解析为一个红宝石 Date 对象并进行进一步处理。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T08:59:46.673

据我所知，结果仍然是一个时间戳对象。只需在 Date 或 DateTime 中使用它即可提取任何数据。

最好的。

# jquery - Vaadin 与 jQuery UI

> ID：11815151
> 
> 赞同：4
> 
> 时间：2012-08-05T08:54:34.027
> 
> 标签：jquery, vaadin

我正在开始一个新的 Java 项目，在我看来，最流行的 UI 技术是 jQuery UI 与 Vaadin（或 GWT）。

是否有关于如何选择最合适的 UI 框架的指南，可以在此处指出的任何优点和优点。

例如，使用 Vaadin 就像开发一个桌面应用程序，类似于开发 Java Swing 应用程序，这与使用 jQuery 不同。

但我将不胜感激有关此的任何其他想法。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-05T17:37:12.277

我喜欢 Vaadin 的地方在于它处理整个客户端的内容以及客户端和服务器之间的通信（保持 UI 刷新等等）。正如您已经提到的，这就像编写 Swing 应用程序一样。Vaadin 为您提供了一堆组件，并且可以使用 GWT 小部件进行扩展。它仍然可以适应。

您不必关心使用 Vaadin 的 HTML 和 JavaScript，因此您可以完全专注于开发您的应用程序。

我希望我的观点能对你有所帮助。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-05T09:54:46.503

我不知道 Vaadin，我知道 Java，在 GWT 中编程过一点，我非常了解 jQuery。所以这是我的 2 美分：

底线是 - 我发现使用纯 HTML/jQuery 开发客户端 GUI 要容易得多。

1.  GWT 承诺支持所有浏览器，jQuery 也支持。
2.  GWT 使您能够使用熟悉的语言（java）而不是学习新的语言（jQuery） - 在这里我们可以讨论，但如果您也熟悉 jQuery，那么这并不是真正的优势，如果不是，那么我认为学习 jQuery 是比学习 GWT 框架要容易得多。
3.  我认为 GWT 给项目增加了很多不必要的复杂性（新的编译器、新的 SDK 集、新的错误、新的调试方式）。
4.  有很多用于调试 javascript/ajax 的工具，当使用 GWT 时，您大多无法使用它们。您将不得不使用可能有点麻烦的 Eclipse 调试机制。
5.  在 GWT 中部署更改需要比常规 HTML/javascript 项目更多的时间，这意味着更长的开发时间。
6.  如果您在应用程序中使用另一个 FW（如 Spring、Hibernate），将它们与 GWT FW 混合可能会造成编码/维护地狱（我说的是经验）。

就像我说的，我不知道 Vaadin，所以我不能对此发表评论，但我强烈建议你至少给 jQuery 一个机会。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-03-30T10:48:26.880

如果您比 Java 更了解 JavaScript 和 jQuery（很多），我建议您使用 jQuery UI。否则，我建议您使用 vaadin。两种框架都有其优点和缺点，并且您是否喜欢其中的一种而不是另一种（例如，对类型化/非类型化语言的偏好）在很大程度上取决于个人喜好。

首先，我认为这两个框架都有一个大社区和很多插件。到目前为止，我总能找到我工作所需的附加组件。

vaadin 的一些优点：

*   您可以为您的 RIA 使用一种语言 (Java)
*   开发是类型安全的 -> 减少错误的主要来源
*   您可以像桌面应用程序一样开发您的应用程序
    *   不必处理客户端代码（JavaScript、jQuery）
    *   不必处理客户端-服务器通信 (AJAX)
*   更容易编写安全的应用程序，因为整个 webapp 状态都存储在服务器上（客户端操作是无用的）
*   您可以直接在 IDE 中调试整个代码
*   使用 Java Persistence API（hibernate 和 co.）以面向对象的方式访问您的数据库

vaadin 的一些缺点：

*   项目的初始设置（使用 webapp 重新加载脚本、调试器设置）比简单的 php/javascript 项目花费更多时间
*   部署时间稍长（重新加载 webapp 大约 5 秒）
*   要使用外部 JS 组件，您需要先编写 Java 包装器；但这并不难（参见[https://vaadin.com/blog/-/blogs/vaadin-7-loves-javascript-components](https://vaadin.com/blog/-/blogs/vaadin-7-loves-javascript-components)）
*   Vaadin 是一个在后台使用 GWT 的高级框架。因此，在 vaadin 的组件中调整特定细节并不像在基于 JavaScript 的 UI 框架中那样容易

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-05T10:20:07.900

jQuery UI 级别太低，不能单独使用（我不会那样做，它不会解决你的 UI 问题），你看到 twitter bootstrap 可以做什么吗？它拥有 jQuery UI 基本上拥有的所有东西和许多常用的插件/组件 - 它是构建的实际框架，并且只有 UI 框架，如果我在 Web 上开发一些东西，至少几年后我将使用它。（响应式设计的可能性等；） - 只是指出这个观点，即使你没有将它包括在你的问题中：http: [//twitter.github.com/bootstrap/](http://twitter.github.com/bootstrap/)

关于 vaadin 和 GWT，我作为一个已经有经验的网络程序员并不觉得需要“桌面应用程序类型的网络编程”，它只会让我更加困惑，所以我不会使用它们，直到我制作某种“桌面软件外观” a-like”页面到网络。（顺便说一句。如果它们与摇摆类似，它们将是一场噩梦，但就像说的那样 - 没有使用过，因为我不需要它们。）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-07-24T00:28:04.250

在 Vaadin 中创建 UI 似乎比在 javascript + HTML 中创建 UI 简单得多——无论框架如何。

# java - MongoDB中的日期：将Date对象插入Mongo数据库时，日期比自身早1天

> ID：11815155
> 
> 赞同：8
> 
> 时间：2012-08-05T08:55:18.347
> 
> 标签：java, mongodb, jodatime, instant

我的日期字符串格式是这样的：**Jan 2, 2012** 在 Instant.parse() 方法之后，instant instance 变成了 2012 年 1 月 1 日的日期，比它早了 1 天，为什么？如果原始日期字符串是 2012 年 1 月 1 日，则即时将是 2011 年 12 月 31 日的日期。

```
String dateString="Jan 1, 2012";
Instant instant = Instant.parse(dateString, new DateTimeFormatterBuilder()
.appendMonthOfYearShortText()
.appendLiteral(" ")
.appendDayOfMonth(1)
.appendLiteral(", ")
.appendYear(4, 4)
.toFormatter());

DateTime dateTime = new DateTime(instant);
Date date = new Date(dateTime.getMillis());

document.append("time", new Date(dateTime.getMillis()));
tagsDbCollection.insert(document); 
```

* * *

我正在使用 MongoDB 来存储这些日期。我已经测试过，它显示格式化日期字符串时 - >即时没有错误。但是当我将这个Date类型的对象插入MongoDB时，MongoDB中的日期字符串变成了提前1天，为什么？

在 MongoDB 中：

```
 /* 0 */
    {
      "_id" : ObjectId("50221a40da74d74053abb445"),
      "time" : ISODate("2011-12-31T14:00:00Z")
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T20:55:46.950

```
final String dateString = "Jan 2, 2012";
final DateTimeFormatter dtf = new DateTimeFormatterBuilder().appendMonthOfYearShortText().appendLiteral(" ").appendDayOfMonth(1).appendLiteral(", ").appendYear(4, 4).toFormatter();
final DateTime jodaDate = dtf.parseDateTime(dateString);
System.out.println(jodaDate);
final Date javaDate = new Date(jodaDate.getMillis());
System.out.println(javaDate); 
```

输出是

```
2012-01-02T00:00:00.000+02:00
Mon Jan 02 00:00:00 EET 2012 
```

接下来为：

```
final String dateString = "Jan 1, 2012"; 
```

输出是：

```
2012-01-01T00:00:00.000+02:00
Sun Jan 01 00:00:00 EET 2012 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T14:24:50.703

Mongo 自 Unix 纪元以来以毫秒为单位存储其日期。

见：[http ://www.mongodb.org/display/DOCS/Dates](http://www.mongodb.org/display/DOCS/Dates)

所以你没有任何时区。但是，如果您使用控制台，.js 解析器会将 UTC 日期转换为您当前的系统时区设置。

你可以测试一下：

*   使用一些日期数据创建一个实体。
*   然后通过控制台查询它。（使用字符串（））
*   然后退出控制台并重新配置系统时区（debian/ubuntu：sudo dpkg-reconfigure tzdata）
*   然后再次进入控制台并查询你的旧数据 => 你得到相同的 UTC 但不同的 toString() 输出

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-30T08:15:12.827

您可以检查 UTC 时区，基本上 mongo 服务器根据 UTC 时区运行

> SimpleDateFormat 格式 = new SimpleDateFormat("dd/MM/yyyy"); format.setTimeZone(TimeZone.getTimeZone("UTC"));

# java - 如何将 java.awt.JobAttributes 中的作业属性赋予 java.awt.print.Printable

> ID：11815158
> 
> 赞同：2
> 
> 时间：2012-08-05T08:56:11.917
> 
> 标签：java, graphics, printing, awt

我想打印。我正在创建图形和打印实例。我正在使用该方法 `java.awt.print.Printable.print(Graphics g, PageFormat pf, int page)` 。我不想显示打印对话框，我通过不调用该方法实现了这一点， `PrinterJob.printDialog()`但我的计算机连接了多台打印机，我的程序将自动打印到我想要​​的打印机，并且不会询问用户。这可以通过 `JobAttributes.setPrinter("printer to be used")`. 但我找不到任何方法将此 JobAttributes 赋予 pint(Graphics g, PageFormat pf, int page) 方法。请帮我。

# objective-c - Objective-C，正确计算 NSTimeInterval？

> ID：11815159
> 
> 赞同：1
> 
> 时间：2012-08-05T08:56:19.280
> 
> 标签：objective-c, macos, nstimer, nstimeinterval

我正在尝试计算（以毫秒为单位）在我的应用程序中完成操作时经过了多少时间。尽管我的应用程序似乎在 NSLog 函数附近崩溃，但我已经阅读了大部分[文档并查看了示例。](http://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSTimer_Class/Reference/NSTimer.html)这里解决的所有答案似乎都是专门针对 iOS 的，我正试图让它与 OSX 一起工作。任何帮助或建议将不胜感激 - 谢谢。

```
- (void)someMethod {

    NSTimeInterval startTime = [[NSDate date] timeIntervalSinceReferenceDate];

    // Do something else
    // Now see how much time went by

    NSTimeInterval endTime = [[NSDate date] timeIntervalSinceReferenceDate];

    double elapsedTime = startTime - endTime;

    NSLog(@"time: %@", elapsedTime);

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T10:07:33.417

另一种方法是获取起始 NSDate。然后要查找经过的时间，请调用`[startDate timeIntervalSinceNow]`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-05T08:59:15.207

您的问题是您正在尝试打印一个对象，`%@`但时间是双倍的。相反，您应该将最后一行更改为

```
NSLog(@"time: %f", elapsedTime); 
```

另请注意，`startTime - endTime`给您一个负时间，因此您可能应该切换顺序以获得正确的持续时间。

# java - 翻转数值的Android希伯来语RTL字符串

> ID：11815170
> 
> 赞同：7
> 
> 时间：2012-08-05T08:57:50.287
> 
> 标签：java, android, hebrew, right-to-left

我想用我的应用名称和当前版本显示一个字符串。应用程序名称是希伯来语，对于某些当我将希伯来语文本与数值结合时，数值会翻转。

```
versionTextView.setText("אפליקציה גרסה "+this.getResources().getString(R.string.app_version)); 
```

例如：应用程序版本为 1.0，在模拟器上显示为 0.1。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-05T09:03:43.087

听起来像是 Android bidi 算法中的一个错误。尝试在数字周围添加从左到右的标记：

```
versionTextView.setText("אפליקציה גרסה "
    + "\u200e"
    + this.getResources().getString(R.string.app_version)
    + "\u200e"
); 
```

（如果这可行，您也许可以消除第二个。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-27T06:50:20.307

我认为你需要使用 dir="RTL" 标签为输出字符串设置样式 - 这将修复希伯来语中数字和特殊字符的方向性

# android - JsonHttpParser 已弃用

> ID：11815172
> 
> 赞同：3
> 
> 时间：2012-08-05T08:58:06.797
> 
> 标签：android, google-api, deprecated, google-places

我正在构建简单的 Android 应用程序，我正在使用 Goolge Places API 获取最近的位置。为此，我使用[了 this](http://code.google.com/p/google-api-java-client/wiki/Setup#google-api-client-android2)。但是当我打电话时：

```
JsonHttpParser parser = new JsonHttpParser(new JacksonFactory()); 
```

它是说**JsonHttpParser 类型已被弃用**，通过在 Eclipse 中的这一行上放置一个 line-through ，但应用程序仍在工作。

我的问题是 -**使用应用程序中不推荐使用的库是否很好。这会在未来引发任何问题吗？**

**编辑：**

我使用 JsonHttpParser 来创建 HttpRequestFactory，例如：

```
public static HttpRequestFactory createRequestFactory(final HttpTransport transport) {
        return transport.createRequestFactory(new HttpRequestInitializer() {
            public void initialize(HttpRequest request) {
                GoogleHeaders headers = new GoogleHeaders();
                headers.setApplicationName("Places-Test");
                request.setHeaders(headers);
                // here it is saying deprecated
                JsonHttpParser parser = new JsonHttpParser(new JacksonFactory());
                request.addParser(parser);
            }
        });
    } 
```

**有没有其他方法可以创建 HttpRequestFactory？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-05T09:08:15.543

**Deprecated 的定义**：注解 @Deprecated 的程序元素是不鼓励程序员使用的程序元素，通常是因为它很危险，或者因为存在更好的替代方案。

您仍然可以在不改变性能的情况下使用已弃用的代码，但弃用方法/类的全部目的是让用户知道现在有更好的使用方法，并且在未来的版本中可能会删除弃用的代码。

今天的弃用意味着明天不会修复错误，除非你自己做。

如果您不介意这一点，则无需担心。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-01T17:30:51.457

看来 Class JsonHttpParser 和 Method HttpRequest 在 1.11 版本中都已弃用。有关详细信息，请参阅[弃用列表](http://javadoc.google-http-java-client.googlecode.com/hg/1.10.2-beta/deprecated-list.html)。

如果要替换 Deprecated JsonHttpParser，而不是：

```
 JsonHttpParser parser = new JsonHttpParser(new JacksonFactory());
            request.addParser(parser); 
```

尝试：

```
 JsonObjectParser parser = new JsonObjectParser(new JacksonFactory());
            request.setParser(parser); 
```

并导入：

```
import com.google.api.client.json.JsonObjectParser; 
```

注意：未经测试。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-11T09:46:22.843

这将不是问题的答案。

但是在**google-http-client-1.5.0-beta.jar**库中，弃用已被删除，并且 JacksonFactory
类也可用。

# asp.net-mvc-3 - MVC3 Razor 视图引擎中的弹出窗口

> ID：11815173
> 
> 赞同：-2
> 
> 时间：2012-08-05T08:58:19.247
> 
> 标签：asp.net-mvc-3

我有代码段：

```
<button class="awe-btn" onclick="<%:Url.Awe().PopupFormAction().Url(Url.Action("create")).Success("create").Title("create dinner") %>">Create</button> 
```

那是 MVC axps 页面我想要 MVC Razor 视图引擎的类似代码。有人建议我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T09:00:29.153

```
<button class="awe-btn" onclick="@Url.Awe().PopupFormAction().Url(Url.Action("create")).Success("create").Title("create dinner")">Create</button> 
```

# jquery - 动态添加图片和悬停事件

> ID：11815178
> 
> 赞同：0
> 
> 时间：2012-08-05T08:59:36.920
> 
> 标签：jquery

我正在尝试找到一种使用悬停功能动态添加图像的方法。谢谢 。

```
<ul id="imagesList">
  <li>No images found</li>
</ul>

$(function(){
            //load image array
            var images = {'image1':'assets/img/linkedin_30px.png','image2':'assets/img/twitter_30px.png'};
            $.each(images, function(){
               ....?
            });
        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T09:04:28.553

看看[事件委托](http://api.jquery.com/on/#direct-and-delegated-events)。这样，您可以将事件处理程序分配在一个地方，并让它与不断变化的 domnode 一起工作。在您的情况下，它可能看起来像这样：

```
$('#imagesList').on('hover', 'img', function(){
    // your hover event handler here
}); 
```

然后您可以创建图像节点：

```
$('#imagesList').html('');
var images = {'image1':'assets/img/linkedin_30px.png','image2':'assets/img/twitter_30px.png'};
$.each(images, function(i, src){
    $('#imagesList').append('<li><img src="'+src+'"></li>');
}); 
```

这是一个演示：http: [//jsfiddle.net/pwGQX/](http://jsfiddle.net/pwGQX/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-04T23:22:47.857

我需要更多细节，但很快，您可以使用 jQuery 的 .hover 事件；

```
 $("#imagesList").hover(
      // prepend the image on hover
      function() {
          $( this ).prepend( $( "<span><img src='image-x.jpg'></span>" ) );
        },
      // Remove the image when mouse leaves
        function() {
          $( this ).find( "span:first" ).remove();
      }
    ); 
```

# c++ - 多维向量串

> ID：11815182
> 
> 赞同：1
> 
> 时间：2012-08-05T09:00:03.923
> 
> 标签：c++

您好，我正在尝试制作一个包装器来处理来自 MySQL 查询的行和列结果。语句的返回数据可以是字符串或 NULL 指针。所以这是我的尝试：

```
class RowWrapper {
public:
    std::vector< std::vector <std::string> > data;
    void SetVector(unsigned int rows, unsigned int columns);
};

void RowWrapper::SetVector(unsigned int rows, unsigned int columns)
{
    for (int x = 0; x > rows; x++)
    {
        std::vector<std::string> p_rows;
        for (int y = 0; y > columns; y++)
        {
            p_rows.push_back(x*y); //Error here
        }
        data.push_back(temp_rows);
    }
} 
```

我的错误是没有重载函数的实例，可能缺少有关向量或字符串的内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T09:13:40.950

只要 x > 行，您的循环就会持续？然后你在增加？我认为这可能会永远运行......或者只要你没有通过最大的 int 值

此外，您的 push_back 将 int 作为参数，并且没有将 int 值作为参数的字符串构造函数。重载函数错误可能是由此引起的？

# javascript - 使用 jquery 代理时删除事件侦听器

> ID：11815187
> 
> 赞同：3
> 
> 时间：2012-08-05T09:00:40.077
> 
> 标签：javascript, jquery, javascript-events

`proxy()`使用 addEventListener 时，我正在使用 jQuery在处理程序内启用范围

```
document.addEventListener('onSomeEvent', $.proxy(myHandler, this)); 
```

现在，通常当我想删除我曾经调用的事件时：

```
document.removeEventListener('onSomeEvent', myHandler, false); 
```

`$.proxy()`在 jquery 中使用该选项时我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-05T09:06:19.823

```
var myHandlerProxied = $.proxy(myHandler, this);
document.addEventListener('onSomeEvent', myHandlerProxied);

document.removeEventListener('onSomeEvent', myHandlerProxied, false); 
```

# ruby-on-rails - 如何在返回最新结果的同时使 Heroku 缓存名称范围

> ID：11815197
> 
> 赞同：1
> 
> 时间：2012-08-05T09:02:15.343
> 
> 标签：ruby-on-rails, ruby, heroku

看起来像 Heroku 缓存范围结果，我的问题是他们如何决定何时缓存、何时刷新范围结果以及如何正确使用范围。在我的代码中，我有一个 Question 模型的名称范围，如下所示

```
class Question < ActiveRecord::Base
  scope :today, where('show_date = ?', Time.now.localtime("-07:00").strftime("%Y-%m-%d"))  
end 
```

它总是开始给我相同的缓存结果。我的猜测是，如果我更改问题数据，结果可能会更新。一个快速的研究给了我一个相关的主题：[在 Heroku 上缓存 named_scope？](https://stackoverflow.com/questions/4721475/cached-named-scope-on-heroku).

我已经将代码更改为：

```
class Question < ActiveRecord::Base
  def self.today
    today_string = Time.now.localtime("-07:00").strftime("%Y-%m-%d");
    where('show_date=?', today_string)                                                                                                                 
  end
end 
```

我想这总是会给我正确的结果而没有任何缓存。但我仍然想知道是否有更好的方法可以从范围缓存中受益，同时获得正确的结果？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T09:41:45.103

范围是在首次加载应用程序时设置的，因此在第一种情况下，您的范围查询将固定为当时的日期，直到应用程序因任何原因重新启动。在这里缓存的是查询定义而不是查询结果。通常，如果您的范围内有一个与时间相关的条件，那么您需要使用 lambda 将查询定义包装在您的范围内，例如：

```
class Question < ActiveRecord::Base
  scope :today, lambda { where('show_date = ?', Time.now.localtime("-07:00").strftime("%Y-%m-%d")) }
end 
```

这将缓存范围定义，但每次调用它时都会执行 lambda 的主体。它不会缓存查询的结果。

# spring - 使用 Spring Security 时，会话超时比预期的要快

> ID：11815201
> 
> 赞同：0
> 
> 时间：2012-08-05T09:02:43.910
> 
> 标签：spring, session, spring-security, web.xml, session-timeout

我正在使用 Spring Security 3.1，但我遇到了会话超时问题。*我在web.xml*
中设置了会话超时，如下所示：

 *```
<session-config>
    <session-timeout>
        45
    </session-timeout>
</session-config> 
```

所以会话应该在 45 分钟后过期。
但是我注意到会话**恰好**在 2 分钟后过期！无论我是否正在使用应用程序。

这些是我的春季安全豆：

```
<bean id="ConcurrentSessionFilterAdmin" class="org.springframework.security.web.session.ConcurrentSessionFilter">
    <property name="sessionRegistry" ref="sessionRegistry"/>
    <property name="logoutHandlers">
        <list>
            <ref bean = "logoutHandler"/>
        </list>
    </property>
    <property name="expiredUrl" value="/admin/login.jsp?error=expiredURL"/>
</bean>
<bean id="sessionRegistry"
    class="org.springframework.security.core.session.SessionRegistryImpl" autowire="byType" />

<bean id="logoutHandler"
    class="org.springframework.security.web.authentication.logout.SecurityContextLogoutHandler">
</bean>

<bean id="securityContextPersistenceFilter"
    class="org.springframework.security.web.context.SecurityContextPersistenceFilter">
    <property name="securityContextRepository" ref="securityContextRepository"/>
</bean>

<bean id="securityContextRepository"
    class="org.springframework.security.web.context.HttpSessionSecurityContextRepository">
    <property name="allowSessionCreation" value="false" />
</bean>
<bean id="logoutFilterAdmin"
    class="org.springframework.security.web.authentication.logout.LogoutFilter">
    <constructor-arg value="/admin/login.jsp" />
    <constructor-arg>
        <list>
            <ref bean="logoutHandler"/>
        </list>
    </constructor-arg>
    <property name="filterProcessesUrl" value="/admin/j_spring_security_logout"></property>
</bean>
<bean id="usernamePasswordAuthenticationFilterAdmin"
    class="org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter">
    <property name="usernameParameter" value="j_username"/>
    <property name="passwordParameter" value="j_password"/>
    <property name="allowSessionCreation" value="false"/>
    <property name="authenticationFailureHandler" ref="authenticationFailureHandlerAdmin"/>
    <property name="authenticationManager" ref="authenticationManager"/>
    <property name="authenticationSuccessHandler" ref="authenticationSuccessHandlerAdmin"/>
    <property name="continueChainBeforeSuccessfulAuthentication" value="false"/>
    <property name="filterProcessesUrl" value="/admin/j_spring_security_check"/>
    <property name="sessionAuthenticationStrategy" ref="sessionAuthenticationStrategy"/>
</bean>
<bean id="authenticationFailureHandlerAdmin"
    class="org.springframework.security.web.authentication.SimpleUrlAuthenticationFailureHandler">
    <property name="defaultFailureUrl" value="/admin/login.jsp?error=loginfailed" />
</bean>
<bean id="authenticationSuccessHandlerAdmin" 
    class="org.springframework.security.web.authentication.SavedRequestAwareAuthenticationSuccessHandler">
    <property name="requestCache" ref="requestCache"/>
    <property name="defaultTargetUrl" value="/admin/index.html"/>
</bean>

<bean id="requestCache" class="org.springframework.security.web.savedrequest.HttpSessionRequestCache"/>

<bean id="sessionAuthenticationStrategy"
    class="org.springframework.security.web.authentication.session.ConcurrentSessionControlStrategy">
    <constructor-arg name="sessionRegistry" ref="sessionRegistry" />
    <property name="maximumSessions" value="1" />
    <property name="migrateSessionAttributes" value="true"/>
</bean>

<bean id="basicAuthenticationFilterAdmin"
    class="org.springframework.security.web.authentication.www.BasicAuthenticationFilter">
    <property name="authenticationDetailsSource" ref="authenticationDetailsSource"/>
    <property name="authenticationEntryPoint" ref="authenticationEntryPoint"/>
    <property name="authenticationManager" ref="authenticationManager"/>
</bean>
<bean id="authenticationDetailsSource"
    class="org.springframework.security.authentication.AuthenticationDetailsSourceImpl"/>
<bean id="requestCacheAwareFilter"
    class="org.springframework.security.web.savedrequest.RequestCacheAwareFilter">
    <constructor-arg ref="requestCache"/>
</bean>

<bean id="securityContextHolderAwareRequestFilter"
    class="org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter">
    <property name="rolePrefix" value="ROLE_"/>
</bean>

<bean id="anonymousAuthenticationFilter"
    class="org.springframework.security.web.authentication.AnonymousAuthenticationFilter">
    <constructor-arg value="KEY"/>
</bean>

<bean id="sessionManagementFilterAdmin" class="org.springframework.security.web.session.SessionManagementFilter">
    <constructor-arg ref="securityContextRepository"/>
    <constructor-arg ref="sessionAuthenticationStrategy"/> 
    <property name="authenticationFailureHandler" ref="authenticationFailureHandlerAdmin"/>
    <property name="invalidSessionStrategy" ref="invalidSessionStrategyAdmin"/>
</bean>
<bean id="invalidSessionStrategyAdmin"
    class="org.springframework.security.web.session.SimpleRedirectInvalidSessionStrategy">
    <constructor-arg value="/admin/login.jsp"/>
    <property name="createNewSession" value="false"/>
</bean>
<bean id="exceptionTranslationFilter"
    class="org.springframework.security.web.access.ExceptionTranslationFilter">     
    <property name="authenticationEntryPoint" ref="authenticationEntryPoint" />
    <property name="accessDeniedHandler" ref="accessDeniedHandler" />
    <property name="requestCache" ref="requestCache"/>
</bean>
<bean id="authenticationEntryPoint"
    class="org.springframework.security.web.authentication.Http403ForbiddenEntryPoint">
</bean>
<bean id="accessDeniedHandler"
    class="org.springframework.security.web.access.AccessDeniedHandlerImpl">
</bean>
 <bean id="filterSecurityInterceptorAdmin"
    class="org.springframework.security.web.access.intercept.FilterSecurityInterceptor">
    <property name="authenticationManager" ref="authenticationManager" />
    <property name="accessDecisionManager" ref="accessDecisionManager" />
    <property name="securityMetadataSource" ref="myFilterInvocationSecurityMetadataSource" />
</bean>
<bean id="myFilterInvocationSecurityMetadataSource" class="com.datx.security.model.MyFilterSecurityMetadataSource" autowire="byName" scope="prototype">
</bean> 
```

两分钟后，我被重定向到`/admin/login.jsp?error=expiredURL`第一个 bean 配置中设置的位置。（这意味着会话已过期）

问题是这些 bean 中的哪一个负责会话过期？我没有设置什么属性导致这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T17:14:19.337

Spring Security 依赖于底层容器，即管理会话超时的容器（请添加有关您正在使用的容器的信息）。但是，我相信如果服务器兼容 Java EE，web.xml 设置通常应该具有更高的优先级。

[此外，可以通过调用HttpSession.setMaxInactiveInterval()](http://docs.oracle.com/javaee/5/api/javax/servlet/http/HttpSession.html#setMaxInactiveInterval%28int%29)方法动态调整单个会话超时，或者可以通过调用[invalidate()](http://docs.oracle.com/javaee/5/api/javax/servlet/http/HttpSession.html#invalidate%28%29)使会话无效。

在某些情况下，Spring Security 可能会使会话无效（例如，在登录后，用户会获得一个新的 HttpSession）。

此外，Spring Security 并发会话控制机制也可能导致会话失效，例如，如果指定了 max-sessions 值。

**您可以通过为org.springframework.security.*命名空间设置****DEBUG**日志记录级别 来检查 Spring Security 何时使会话无效，因为 Spring 通常将此类信息写入记录器。*

# objective-c - 多点触控和 ccTouchesMoved，移动缓慢

> ID：11815205
> 
> 赞同：0
> 
> 时间：2012-08-05T09:03:34.000
> 
> 标签：objective-c, ios, cocos2d-iphone

我有一个乒乓球比赛，我用手指移动桨。当有一根手指时，一切都很顺利。但是当我想控制两个玩家，两个桨时，一个桨移动得很好，但另一个桨移动很慢，如果有的话。当第二个桨开始移动时，我的第一个桨冻结。如何让两个动作都感觉流畅且反应灵敏？

我在我的 Director 中启用了多点触控。

这是我的触摸代码：

```
- (void) ccTouchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{
    UITouch *myTouch = [touches anyObject];
    CGPoint location = [myTouch locationInView:[myTouch view]];
    location = [[CCDirector sharedDirector] convertToGL:location];
    CGRect leftTouchZone = CGRectMake(0, 0, 50, 320);
    CGRect rightTouchZone = CGRectMake(430, 0, 50, 320);

    if (CGRectContainsPoint(leftTouchZone, location))
    {
        CGPoint tempLoc = location;
        tempLoc.x = paddle1.position.x;
        paddle1.position = tempLoc;
    }

    if (CGRectContainsPoint(rightTouchZone, location))
    {
        CGPoint tempLoc = location;
        tempLoc.x = paddle2.position.x;
        paddle2.position = tempLoc;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T16:13:14.357

您不应该查看所有触摸对象而不是抓住任何对象吗？如果您同时移动 2 次触摸，则只有一次会获得 touches 移动事件。

```
- (void) ccTouchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{
    for (UITouch* myTouch in touches)
    {
        CGPoint location = [myTouch locationInView:[myTouch view]];
        location = [[CCDirector sharedDirector] convertToGL:location];
        CGRect leftTouchZone = CGRectMake(0, 0, 50, 320);
        CGRect rightTouchZone = CGRectMake(430, 0, 50, 320);

        if (CGRectContainsPoint(leftTouchZone, location))
        {
            CGPoint tempLoc = location;
            tempLoc.x = paddle1.position.x;
            paddle1.position = tempLoc;
        }

        if (CGRectContainsPoint(rightTouchZone, location))
        {
            CGPoint tempLoc = location;
            tempLoc.x = paddle2.position.x;
            paddle2.position = tempLoc;
        }
    } 
```

# svg - 如何在 SVG 中制作条形图，使动画条向上增长？

> ID：11815207
> 
> 赞同：1
> 
> 时间：2012-08-05T09:03:52.713
> 
> 标签：svg

我正在将条形图制作为 SVG，并且非常希望我的条形图具有动画效果并从 y 轴上的“0”向上增长到相应的值。

让我挣扎的是坐标（0,0）在左上角而不是左下角。在我的“非动画”解决方案中，我根据它们应该有多高给条形图赋予不同的“y”值，如下所示：

```
<svg id="graph" 
        xmlns="http://www.w3.org/2000/svg" 
        xlink="http://www.w3.org/1999/xlink">
    <linearGradient x1="0%" x2="0%" y1="10%" y2="100%" id="gradient">
        <stop style="stop-color:#0000FF" offset="0"></stop>
        <stop style="stop-color:#FFFFFF" offset="1"></stop>
    </linearGradient>
    <rect width="50" height="14" x="0" y="8" fill="url(#gradient)"></rect>
    <rect width="50" height="22" x="55" y="0" fill="url(#gradient)"></rect>
    <rect width="50" height="15" x="110" y="7" fill="url(#gradient)"></rect>
    <rect width="50" height="9" x="165" y="13" fill="url(#gradient)"></rect>
</svg> 
```

这看起来像一个条形图，因为 (y + height) 对于所有矩形都是相同的，但它在概念上是“从上到下”绘制的，从 y 轴的不同点开始并向下增长到相同的 y 值。

现在，当我想为它制作动画时，我显然希望它们“向上”生长，这就是我卡住的地方。

```
<rect width="50" height="14" x="0" y="8" fill="url(#gradient)">
    <animate attributeName="height" from="0" to="14" dur="2s" id="animation"></animate>    
</rect> 
```

这将使矩形从 y=8“向下”增长到 y=22，并且在左上角 (0,0) 的网格中，这是非常有意义的。但是，我真的想做相反的事情，因为似乎“高度”属性的负值被视为 0（或者我可以将高度从 -14 设置为 0）我不确定我会如何做到这一点。

我试过用谷歌搜索，但运气不好。我也很想在不使用图表库的情况下做到这一点。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-06T11:17:37.787

如果您使用 scale(1, -1) 变换包装所有内容，则所有 y 值都乘以 -1，这具有翻转 y 轴的效果。然后，您需要将所有内容翻译下来，以便它们具有正值并且您可以看到它们：

```
<g transform="translate(0, 40) scale(1, -1)">    
  <rect width="50" height="14" x="0" y="0" fill="url(#gradient)">
    <animate attributeName="height" from="0" to="14" dur="2s" fill="freeze"></animate>    
  </rect>
  <rect width="50" height="14" x="55" y="0" fill="url(#gradient)">
    <animate attributeName="height" from="0" to="22" dur="2s" fill="freeze"></animate>    
  </rect>
  <rect width="50" height="14" x="110" y="0" fill="url(#gradient)">
    <animate attributeName="height" from="0" to="15" dur="2s" fill="freeze"></animate>    
  </rect>
  <rect width="50" height="14" x="165" y="0" fill="url(#gradient)">
    <animate attributeName="height" from="0" to="9" dur="2s" fill="freeze"></animate>
  </rect>
</g> 
```

请注意，您需要将所有 y 值设置为相等，并且您可能想要翻转渐变。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T23:24:50.610

替代解决方案，无需翻转任何轴：

```
<svg id="graph" 
        xmlns="http://www.w3.org/2000/svg" 
        xlink="http://www.w3.org/1999/xlink"> 
    <linearGradient x1="0%" x2="0%" y1="10%" y2="100%" id="gradient">
        <stop style="stop-color:#0000FF" offset="0"></stop>
        <stop style="stop-color:#FFFFFF" offset="1"></stop>
    </linearGradient>
    <rect width="50" height="9" x="0" y="9" fill="url(#gradient)"></rect>
    <rect fill="white" opacity="1" x="-1" y="8" width="52">
        <animate attributeName="height" to="0" from="10" dur="2s" id="curtain"></animate>
    </rect>

    ...

</svg> 
```

通过绘制一个实心条，然后在其顶部添加一个白色不透明矩形并让**该**矩形获得动画，它看起来好像条向上生长。

我最终得到了这个解决方案，因为我还需要添加各种标签和文本覆盖（但我没有考虑这部分，因为我认为它不相关）。使用 scale(1 -1) 翻转 svg 会使文本上下颠倒，并且仅翻转 svg 中包含条形的部分意味着必须使用两组不同的坐标，这就是我的代码（这是生成的图表而不是静态 XML）有点乱。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-05T09:15:34.497

我玩弄了你的代码并改变了一些东西。您如何看待以下问题？

```
<svg id="graph" 
    xmlns="http://www.w3.org/2000/svg" 
    xlink="http://www.w3.org/1999/xlink">

    <linearGradient x1="0%" x2="0%" y1="10%" y2="100%" id="gradient">
        <stop style="stop-color:#0000FF" offset="0"></stop>
        <stop style="stop-color:#FFFFFF" offset="1"></stop>
    </linearGradient>

    <rect width="50" height="14" x="0" y="8" xfill="url(#gradient)">
        <animate attributeName="height" from="0" to="14" dur="2s" id="animation1"></animate>    
    </rect>

    <rect width="50" height="22" x="55" y="0" xfill="url(#gradient)">
        <animate attributeName="height" from="0" to="14" dur="2s" id="animation2"></animate>    
    </rect>

    <rect width="50" height="15" x="110" y="7" xfill="url(#gradient)">
        <animate attributeName="height" from="0" to="14" dur="2s" id="animation3"></animate>    
    </rect>

    <rect width="50" height="9" x="165" y="13" xfill="url(#gradient)">
        <animate attributeName="height" from="0" to="14" dur="2s" id="animation"></animate>    
    </rect>

    <rect width="50" height="14" x="0" y="8" fill="url(#gradient)">
        <animate attributeName="height" from="0" to="14" dur="2s" id="animation4"></animate>    
    </rect>
</svg> 
```

祝一切顺利

# zend-framework - 为什么在 indexAction 之后不调用 Zend 插件 postDispatch 方法

> ID：11815215
> 
> 赞同：1
> 
> 时间：2012-08-05T09:05:10.027
> 
> 标签：zend-framework

当我转到控制器索引 URL 时，在输入该控制器的 indexAction 方法之前调用 preDispatch，但之后不调用 postDispatch。为什么它没有被调用，我应该强迫它以某种方式调用 postDispatch？我有两个没有调用 postDispach 方法的插件。如果我到达 URL，例如 admin/listperms postDispatch 被调用并且一切正常。

管理员控制器.php

```
class AdminController extends Application_Controllers_Base {

    public function indexAction() {
        $this->view->headTitle = $this->alias('TITLE_ADMIN_PANEL');
    }

    public function listpermsAction() {
       $this->view->headTitle = $this->alias('TITLE_PERMISSION_LIST');
       $permService = new Application_Services_AdminPermission();
       $perms = $permService->getPermissionList();

       if(!$perms) {
            // TODO: 
       } else {
           $this->view->permList = $perms;
        }

    }
} 
```

Base.php

```
class Application_Controllers_Base extends Zend_Controller_Action {
} 
```

DbLogPlugin.php

```
class Application_Plugin_DbLogPlugin extends Zend_Controller_Plugin_Abstract {

    public function postDispatch(Zend_Controller_Request_Abstract $request) {
        $view = Zend_Controller_Front::getInstance()->getParam('bootstrap')->getResource('view');
        $view->developerLog = $this->getQuerysLogs();   
    }
} 
```

引导程序.php

```
protected function _initAutoload(){
    $autoloader = new Zend_Application_Module_Autoloader(array(
            'namespace' => 'Application_', //'
            'basePath'  => APPLICATION_PATH
    ));
    $autoloader->addResourceType('dao', 'dao', 'Dao');
    $autoloader->addResourceType('services', 'services', 'Services');
    $autoloader->addResourceType('plugins', 'plugins', 'Plugins');
    $autoloader->addResourceType('models', 'models', 'Models');    
    $autoloader->addResourceType('controllers', 'controllers', 'Controllers');

    require_once('controllers/FrontController.php');
        $front = Application_Controllers_FrontController::getInstance();      
        $front->setControllerDirectory(APPLICATION_PATH.'/controllers')
        ->setRouter(new Zend_Controller_Router_Rewrite())
        ->registerPlugin(new Application_Plugin_DbLogPlugin())
        ->registerPlugin(new Application_Plugin_AuthPlugin())
        ->registerPlugin(new Application_Plugin_ViewPlugin());
    return $autoloader;
} 
```

# jquery - 尝试使用 Jquery 加载 XML 时出现 CHROME 中的奇怪错误

> ID：11815218
> 
> 赞同：0
> 
> 时间：2012-08-05T09:05:28.883
> 
> 标签：jquery, xml, google-chrome

嗨，我是 html5 和 jquery 开发的新手。我显然只在 Chrome 上使用 jQuery 加载 XML 时遇到问题。我的网站是：

> [http://shaharmesh.hostingsiteforfree.com/](http://shaharmesh.hostingsiteforfree.com/)

如您所见，“**投资组合”部分在***除*Chrome之外的所有浏览器上都运行良好。当我打开 Chrome JavaScript 控制台时，我看到了这个错误：

> event_bindings: 232
> 加载资源失败：服务器响应状态为 403 (Forbidden) ...

我的代码是：

```
$(document).ready(function()  
    {  
        $.ajax
        ({
            type: "GET",
            url: "../Assets/protfolio.xml",
            dataType: "XML",
            success: xmlParser
         });
    }); 
```

***xmlParser.js**是加载 XML 的 jQuery 脚本*

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T16:29:23.763

您`sandbox`在 iframe 上设置了该属性，导致应用除您设置的限制之外的所有限制。您没有设置`allow-same-origin`，因此来源被视为唯一，并且您遇到了跨域错误。

您可以添加`allow-same-origin`到属性值以使其恢复到相对于原点的正常状态。

[见规格：](http://www.whatwg.org/specs/web-apps/current-work/multipage/the-iframe-element.html#attr-iframe-sandbox)

> 设置属性后，内容将被视为来自唯一来源...

# android - 在 Android 中从一个活动转移到另一个活动

> ID：11815224
> 
> 赞同：1
> 
> 时间：2012-08-05T09:07:18.033
> 
> 标签：android, android-intent, android-activity

以下是我的代码。请告诉我我做错了什么？

```
 package version.nitt;

 import android.app.Activity;
 import android.os.Bundle;
 import android.view.View;
 import android.view.View.OnClickListener;
 import android.widget.Button;
 import android.widget.LinearLayout;
 import version.nitt.R;
 import android.util.Log;
 import android.content.Intent;

 public class versionActivity extends Activity {
private Runnable runnable;
private static final String TAG="WElcome!";
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.startscreen);

    runnable= new Runnable(){
        public void run()
        {
            try
            {
                 Log.v(TAG,"Going to sleep...");  
                Thread.sleep(1000);
                 Log.v(TAG,"Waking up from sleep...");  
            }
            catch(Exception e1)
            {
            }
        }
    };
    try
    {
        Thread t=new Thread(null,runnable);
        t.start();
        final Intent i=new Intent(versionActivity.this,secondActivity.class);
        LinearLayout lin =(LinearLayout) findViewById(R.id.ll);
        lin.setOnClickListener(new OnClickListener()
        {
            public void onClick(View v)
            {
                 finish();
                 startActivity(i);
            }

        });

    }
    catch(Exception e)
    {

    }

        Button button = (Button) findViewById(R.id.cls);
        button.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                finish();
                System.exit(0);
            }
      });

 }
} 
```

如果用户单击屏幕上的任何位置，我正在尝试从一个活动移动到另一个活动。线性布局设置为可点击。应用程序被加载。但是当执行 onClick 以移动到下一个活动时，应用程序被强制关闭。

原木猫：

```
08-05 14:46:37.028: I/Process(1883): Sending signal. PID: 1883 SIG: 9
08-05 14:46:51.479: D/dalvikvm(1915): GC_FOR_ALLOC freed 31K, 4% free 6342K/6595K, paused 64ms
08-05 14:46:51.499: I/dalvikvm-heap(1915): Grow heap (frag case) to 7.279MB for 1080016-byte allocation
08-05 14:46:51.650: D/dalvikvm(1915): GC_FOR_ALLOC freed <1K, 4% free 7396K/7687K, paused 59ms
08-05 14:46:51.819: D/dalvikvm(1915): GC_CONCURRENT freed <1K, 4% free 7396K/7687K, paused 4ms+13ms
08-05 14:46:52.019: D/dalvikvm(1915): GC_FOR_ALLOC freed <1K, 4% free 7396K/7687K, paused 57ms
08-05 14:46:52.031: I/dalvikvm-heap(1915): Grow heap (frag case) to 7.737MB for 480016-byte allocation
08-05 14:46:52.162: D/dalvikvm(1915): GC_FOR_ALLOC freed 0K, 5% free 7865K/8199K, paused 65ms
08-05 14:46:52.439: D/dalvikvm(1915): GC_CONCURRENT freed 1054K, 17% free 6813K/8199K, paused 10ms+5ms
08-05 14:46:52.840: D/dalvikvm(1915): GC_CONCURRENT freed 351K, 15% free 6973K/8199K, paused 8ms+6ms
08-05 14:46:52.840: V/WElcome!(1915): Going to sleep...
08-05 14:46:53.838: V/WElcome!(1915): Waking up from sleep...
08-05 14:47:03.398: D/AndroidRuntime(1915): Shutting down VM
08-05 14:47:03.398: W/dalvikvm(1915): threadid=1: thread exiting with uncaught exception (group=0x40014760)
08-05 14:47:03.428: E/AndroidRuntime(1915): FATAL EXCEPTION: main
08-05 14:47:03.428: E/AndroidRuntime(1915): android.content.ActivityNotFoundException: Unable to find explicit activity class {version.nitt/version.nitt.secondActivity}; have you declared this activity in your AndroidManifest.xml?
08-05 14:47:03.428: E/AndroidRuntime(1915):     at android.app.Instrumentation.checkStartActivityResult(Instrumentation.java:1504)
08-05 14:47:03.428: E/AndroidRuntime(1915):     at android.app.Instrumentation.execStartActivity(Instrumentation.java:1382)
08-05 14:47:03.428: E/AndroidRuntime(1915):     at android.app.Activity.startActivityForResult(Activity.java:3131)
08-05 14:47:03.428: E/AndroidRuntime(1915):     at android.app.Activity.startActivity(Activity.java:3237)
08-05 14:47:03.428: E/AndroidRuntime(1915):     at version.nitt.versionActivity$2.onClick(versionActivity.java:46)
08-05 14:47:03.428: E/AndroidRuntime(1915):     at android.view.View.performClick(View.java:3110)
08-05 14:47:03.428: E/AndroidRuntime(1915):     at android.view.View$PerformClick.run(View.java:11934)
08-05 14:47:03.428: E/AndroidRuntime(1915):     at android.os.Handler.handleCallback(Handler.java:587)
08-05 14:47:03.428: E/AndroidRuntime(1915):     at android.os.Handler.dispatchMessage(Handler.java:92)
08-05 14:47:03.428: E/AndroidRuntime(1915):     at android.os.Looper.loop(Looper.java:132)
08-05 14:47:03.428: E/AndroidRuntime(1915):     at android.app.ActivityThread.main(ActivityThread.java:4123)
08-05 14:47:03.428: E/AndroidRuntime(1915):     at java.lang.reflect.Method.invokeNative(Native Method)
08-05 14:47:03.428: E/AndroidRuntime(1915):     at java.lang.reflect.Method.invoke(Method.java:491)
08-05 14:47:03.428: E/AndroidRuntime(1915):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:841)
08-05 14:47:03.428: E/AndroidRuntime(1915):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:599)
08-05 14:47:03.428: E/AndroidRuntime(1915):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-05T09:18:34.997

```
lin.setOnClickListener(new OnClickListener()
{
    public void onClick(View v)
    {

       Intent i = new Intent(versionActivity.this, secondActivity.class);     
       startActivity(i);
       finish(); //should use the finish if you need to preserve memory
                 //other wise don't use it.
    }

}); 
```

第二步：AndroidManifest.xml

```
<activity  android:name=".secondActivity">
     <intent-filter>
        <action android:name="android.intent.action.MAIN" />                   
     </intent-filter>
</activity> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-05T12:18:30.867

使用这种..将一项活动转移到另一项活动的简单方法

```
 public void onClick(View arg0) {

            Intent intent = new Intent(context, App2Activity.class);
                        startActivity(intent);   

        } 
```

添加 manifest.xml

# javascript - 鼠标悬停在贝塞尔曲线上

> ID：11815227
> 
> 赞同：0
> 
> 时间：2012-08-05T09:07:28.040
> 
> 标签：javascript, html, events, canvas, bezier

是否有任何简单的集成方法来检测曲线上的鼠标悬停事件？我希望将贝塞尔曲线作为可移动和可编辑的元素添加到画布中，我需要一种选择它们的方法。

我宁愿不使用任何外部库（用于教育目的）；

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T09:20:54.840

这个答案是几年前写的，因为 kinetic.js 不再维护并且链接不起作用。

你可以试试concrete.js（[http://www.concretejs.com](http://www.concretejs.com)）。

> 我会检查 kinetic.js 库。它是 html5 画布库，支持包括曲线检测在内的许多功能。您可以在此处尝试一些示例：
> 
> [http://www.html5canvastutorials.com/labs/html5-canvas-curve-detection-tutorial/](http://www.html5canvastutorials.com/labs/html5-canvas-curve-detection-tutorial/)
> 
> [http://www.html5canvastutorials.com/labs/html5-canvas-physics-engine-with-curve-detection/](http://www.html5canvastutorials.com/labs/html5-canvas-physics-engine-with-curve-detection/)
> 
> [http://www.html5canvastutorials.com/labs/html5-canvas-modify-curves-with-anchor-points-using-kineticjs/](http://www.html5canvastutorials.com/labs/html5-canvas-modify-curves-with-anchor-points-using-kineticjs/)
> 
> 如果您不想使用其他库并且仍然有很好的速度，您可以尝试以下方法。

# lua - 谁能告诉我为什么 DIRECTOR 不喜欢这个 lua 文件？

> ID：11815228
> 
> 赞同：-1
> 
> 时间：2012-08-05T09:07:39.533
> 
> 标签：lua, coronasdk

> **可能重复：**
> [导演：“菜单”上的（参数）错误](https://stackoverflow.com/questions/11807401/director-params-error-on-menu)

这适用于模拟器而不是实际设备。返回 Director 错误参数无法加载“菜单”。我使用屏幕混合了导演类，但在模拟器中不会返回错误。就在我安装应用程序和使用介绍屏幕之后。

```
module(..., package.seeall)
new = function ( params )

local localGroup = display.newGroup()

        ------------------
        -- Imports
        ------------------

        local ui = require ( "ui" )

        ------------------
        -- Groups
        ------------------

        ------------------
        -- Display Objects
        ------------------

        local background = display.newImage( "Cand.png" )
        local title      = display.newText( "Director Class", 0, 0, native.systemFontBold, 16 )
        local createdBy  = display.newText( "Created by Stephen", 0, 0, native.systemFontBold, 16 )
        local website    = display.newText( "http://www.joinm.com", 0, 0, native.systemFontBold, 16 )

        ------------------
        -- Link
        ------------------

        local goBlog = function ( event )
                if event.phase == "ended" then
                        system.openURL( "http://www.joinm.com" )
                end
        end
        --

        createdBy:addEventListener( "touch", goBlog )
        website:addEventListener( "touch", goBlog )

        --====================================================================--
        -- BUTTONS
        --====================================================================--

        ------------------
        -- Functions
        ------------------

        local bt01 = function ( event )
                if event.phase == "release" then
                        director:changeScene( "stb01", "moveFromRight" )                        
                end
        end
        --
        local bt02 = function ( event )
                if event.phase == "release" then
                        director:changeScene( "word", "overFromRight" )
                end
        end
        --
        local bt03 = function ( event )
                if event.phase == "release" then
                        director:changeScene( "Hol", "moveFromTop" )
                end
        end
        --
        local bt04 = function ( event )
                if event.phase == "release" then
                        director:changeScene( "cat", "overFromBottom" )
                end
        end
        --
        local bt05 = function ( event )
                if event.phase == "release" then
                        director:changeScene( "Ion", "flip" )
                end
        end
        --
        local bt06 = function ( event )
                if event.phase == "release" then
                        director:changeScene( "ni", "downFlip" )
                end
        end

        ------------------
        -- UI Objects
        ------------------

        local bt01 = ui.newButton{
                                        default = "Bi.png",
                                        over = "Bi.png",
                                        onEvent = bt01,
                                        id = "bt01"
        }
        --
        local bt02 = ui.newButton{
                                        default = "eu.png",
                                        over = "eu.png",
                                        onEvent = bt02,
                                        id = "bt02"
        }
        --
        local bt03 = ui.newButton{
                                        default = "do.png",
                                        over = "do.png",
                                        onEvent = bt03,
                                        id = "bt03"
        }
        --
        local bt04 = ui.newButton{
                                        default = "hp.png",
                                        over = "hp.png",
                                        onEvent = bt04,
                                        id = "bt04"
        }
        --
        local bt05 = ui.newButton{
                                        default = "ca.png",
                                        over = "ca.png",
                                        onEvent = bt05,
                                        id = "bt05"
        }
        --
        local bt06 = ui.newButton{
                                        default = "Ca.png",
                                        over = "Ca.png",
                                        onEvent = bt06,
                                        id = "bt06"
        }

                ------------------
                -- Inserts
                ------------------

                localGroup:insert( background )
                localGroup:insert( title )
                localGroup:insert( createdBy )
                localGroup:insert( website )
                localGroup:insert( bt01 )
                localGroup:insert( bt02 )
                localGroup:insert( bt03 )
                localGroup:insert( bt04 )
                localGroup:insert( bt05 )
                localGroup:insert( bt06 )

                ------------------
                -- Positions
                ------------------

                bt01.x = 105
                bt01.y = 580
                --
                bt02.x = 270
                bt02.y = 580
                --
                bt03.x = 435
                bt03.y = 580
                --
                bt04.x = 610
                bt04.y = 580
                --
                bt05.x = 785
                bt05.y = 580
                --
                bt06.x = 920
                bt06.y = 580
                --

                createdBy.x = 160
                createdBy.y = 440
                --
                website.x = 160
                website.y = 460

                ------------------
                -- Colors
                ------------------

                ------------------
                -- Listeners
                ------------------

        ------------------
        -- Listener
        ------------------

        ------------------
        -- Initiate variables
        ------------------

        ------------------
        -- MUST return a display.newGroup()
        ------------------

        return localGroup;

end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T01:00:55.700

检查图像的文件名。它们区分大小写，尽管 Windows 模拟器没有显示任何错误。

例如，由于您使用`display.newImage( "Cand.png" )`的图像文件必须是“Cand.png”而不是“cand.png”

# c++ - 使用 std 向量作为库中存储的缓冲区以及在另一个库中使用此缓冲区的困难

> ID：11815234
> 
> 赞同：0
> 
> 时间：2012-08-05T09:08:25.213
> 
> 标签：c++, visual-c++, vector, stdvector

我有一个名为 IBuffer 的类，它使用 std::vector 作为无符号字符数据的存储。这个类是我的名为 core.lib 的基础库的一部分。此类的职责是将数据写入缓冲区并从中读取。好的，现在我在另一个库中使用这个类来序列化和反序列化从网络接收到的消息。

当我尝试将新数据推回 std::vector 时，我总是遇到内存访问冲突读取位置 0Xxxxxxx 的问题。因为这里很难写上千行代码，所以我把堆栈跟踪放在这里，希望有人能帮我解决这个问题。

```
 ntdll.dll!@RtlpLowFragHeapFree@8()  + 0x2c bytes    
    ntdll.dll!_RtlFreeHeap@12()  + 0x7e bytes   
    kernel32.dll!_HeapFree@12()  + 0x14 bytes   
    msvcr100d.dll!__free_base()  + 0x29 bytes   
    msvcr100d.dll!__free_dbg_nolock()  + 0x4ae bytes    
    msvcr100d.dll!__free_dbg()  + 0x50 bytes    
    msvcr100d.dll!operator delete()  + 0xb9 bytes   
>   ICore.dll!std::allocator<unsigned char>::deallocate(unsigned char * _Ptr=0x002c7810, unsigned int __formal=1)  Line 182 + 0x9 bytes C++
    ICore.dll!std::vector<unsigned char,std::allocator<unsigned char> >::_Insert_n(std::_Vector_const_iterator<std::_Vector_val<unsigned char,std::allocator<unsigned char> > > _Where=221 'Ý', unsigned int _Count=2, const unsigned char & _Val='')  Line 1375    C++
    ICore.dll!std::vector<unsigned char,std::allocator<unsigned char> >::insert(std::_Vector_const_iterator<std::_Vector_val<unsigned char,std::allocator<unsigned char> > > _Where=221 'Ý', unsigned int _Count=1, const unsigned char & _Val='')  Line 1060   C++
    ICore.dll!Utils::IBuffer::WriteShort(unsigned short data=256)  Line 63 + 0x56 bytes C++
    ICore.dll!Serialization::IBufferWriter::writeUShort(unsigned short data=256)  Line 82   C++
    IRNet.dll!IRNetwork::IStunMessage::AcceptWriter(Serialization::IIWriter * writer=0x0040f080)  Line 340 + 0x2e bytes C++
    IRNet.dll!Serialization::IBufferWriter::WriteObject<IRNetwork::IStunMessage>(const Object::IObject * object=0x002cb5f0)  Line 105 + 0x17 bytes  C++
    IRNet.dll!IRNetwork::IStunMessage::Serialize(Object::SharedPtr<Utils::IBuffer> buffer={...})  Line 769  C++
    IRNet.dll!IRNetwork::IStun::SendUnReliably(IRNetwork::IStunMessage * message=0x002cb5f0)  Line 157  C++
    IRNet.dll!IRNetwork::IStun::SendBind()  Line 61 + 0xc bytes C++
    IRNet.dll!IRNetwork::IStun::Bind(unsigned int localfd=184)  Line 48 C++
    IRNet.dll!IRNetwork::INatContext::StunBind(unsigned int fd=184)  Line 52 + 0xc bytes    C++
    testDhcpv4.exe!TestStunAttribute::Start()  Line 48 + 0x24 bytes C++
    testDhcpv4.exe!wmain(int argc=1, wchar_t * * argv=0x002c71d8)  Line 69  C++
    testDhcpv4.exe!__tmainCRTStartup()  Line 552 + 0x19 bytes   C
    testDhcpv4.exe!wmainCRTStartup()  Line 371  C
    kernel32.dll!@BaseThreadInitThunk@12()  + 0x12 bytes    
    ntdll.dll!___RtlUserThreadStart@8()  + 0x27 bytes   
    ntdll.dll!__RtlUserThreadStart@8()  + 0x1b bytes 
```

**IBUffer.h**

```
#include "stdafx.h"
#include "ICoreConfig.h"
#include "ILMutex.hxx"
#include "ILock.hxx"
#include <vector>
using namespace IThreading;
using namespace std;
namespace Utils
{
/*
#ifdef EXP_STL
#    define DECLSPECIFIER __declspec(dllexport)
#    define EXPIMP_TEMPLATE
#else
#    define DECLSPECIFIER __declspec(dllimport)
#    define EXPIMP_TEMPLATE extern
#endif

    EXPIMP_TEMPLATE template class DECLSPECIFIER std::vector<unsigned char>;*/

    template class ICORE_API std::allocator<unsigned char>;
    template class ICORE_API std::vector<unsigned char,std::allocator<unsigned char> >;
    /// <summary>
    /// 
    /// </summary>
    typedef enum 
    {
        /*Begin Of Buffer*/
        BOB = 0,
        /*End Of Buffer*/
        EOB = 1,
        /*Unknown*/
        UNK = 2
    } BufferState_t;
    class ICORE_API IBuffer
    {
    public:
        IBuffer(void);
        IBuffer(IBuffer* newbuff);
        ~IBuffer(void);
        //Methods
        int Write(const void* data,size_t size);
        int Write(const void** data, size_t sz);
        int Write(size_t position , const void* data,size_t sz);
        int WriteShort(unsigned short data);
        int WriteShort(uint32_t position,unsigned short data);
        int WriteByte(unsigned char data);
        int WriteUInt(unsigned int data);
        int WriteUlong(unsigned long data);

        //************************************
        // Method:    ReadByte
        // FullName:  BufferPool::ReadByte
        // Access:    public 
        // Returns:   unsigned char
        // Qualifier:
        //Description: Read and return one byte of data by starting from begining of buffer
        //************************************
        unsigned char ReadByte();
        unsigned short ReadShort();
        unsigned int ReadUint32();
        unsigned long ReadUlong();
        unsigned char* Read(size_t sz);

        /** Converts a 16-bit value from host to TCP/IP network byte order (big-endian).
        * @param x The 16-bit (in host byte order) value to convert.
        * @retval @a x in TCP/IP network byte order.
        */
        unsigned short HostToNetworkByteOrder(unsigned short x);

        /* Memory alignment hack */
        //************************************
        // Method:    HostToNetworkByteOrder
        // FullName:  BufferPool::HostToNetworkByteOrder
        // Access:    public 
        // Returns:   unsigned short
        // Qualifier:
        // Parameter: const void * px
        // Description: This method used when we want to Pars existing buffer
        //************************************
        unsigned short HostToNetworkByteOrder(const void* px);

        unsigned short NetworkToHostByteOrder(const unsigned short x);

        /** Converts a 32-bit value from host to TCP/IP network byte order (big-endian).
        * @param x The 32-bit (in host byte order) value to convert.
        * @retval @a x in TCP/IP network byte order.
        */
        unsigned long HostToNetworkByteOrder(unsigned long x);

        /* Memory alignment hack */
        //************************************
        // Method:    HostToNetworkByteOrderUL
        // FullName:  BufferPool::HostToNetworkByteOrderUL
        // Access:    public 
        // Returns:   unsigned long
        // Qualifier:
        // Parameter: const void * px
        // Description: this method used when we want to pars existing buffer
        //************************************
        unsigned long HostToNetworkByteOrderUL(const void* px);
        //* parse unsigned int type to byte array as is
        vector<unsigned char> Uint32ToByteArray(unsigned int x);

        uint8_t* ToUInt8ptr();

        unsigned long NetworkToHostByteOrder(const unsigned long x);

/*      IBuffer operator =(const IBuffer &buf);*/
        IBuffer& operator =(IBuffer &Rhs);
        IBuffer& operator =(char* rhs);

        operator char*();
        operator void*();
        operator uint8_t*();

        //************************************
        // Method:    operator++
        // FullName:  BufferPool::operator++
        // Access:    public 
        // Returns:   BufferPool
        // Qualifier:
        // Description: This method increment dataPtr
        //              read one byte , increment dataPtr by one
        //              read short , increment dataPtr by two
        //              read unsigned int increment dataPtr by 4
        //              note : each read function set currPosion in suitable way
        //              we do this because of continuous buffer reading
        //************************************
        void operator ++();
        bool operator<(const IBuffer& buff)
        {
            return this->Size() < buff.Size() ? true : false;
        }

        bool operator==(const IBuffer& buff)
        {
            return this->buffer == buff.buffer;
        }
        //Properties
        bool IsEmpty();
        unsigned char* Value();

        /** Indicates whether we are on a Big Endian host or not.<br>
        * IMPORTANT: Before calling this function, you should initialize the network stack by using
        * @ref tnet_startup().
        * @retval @a true if the program is running on a Big Endian host and @a false otherwise.
        */
        bool IsBigEndian();
        inline unsigned char HI_Uint16(unsigned short x)
        {
            return (((x) >> 8) & 0xFF) ;
        }
        inline unsigned char LOW_Uint16(unsigned short x)
        {
            return ((x) & 0xFF);
        }
        size_t Size() const;
        void SetPtr();

        void CleanUp();

        void Move(int32_t count);
    private:
        inline int GetPosition()
        {
            return currPosition;
        }

        int SetPosition(int newpos);
    public:
        static class _Convert
        {
        public:
            static inline unsigned short ToUShort(const unsigned char* u8_ptr)
            {
                return (((unsigned short)(u8_ptr)[0]) | ((unsigned short)(u8_ptr)[1])<<8);
            }
            static inline unsigned int ToUint32(const unsigned char* u8_ptr)
            {
                return (((unsigned int)(u8_ptr)[3]) | ((unsigned int)(u8_ptr)[2])<<8 | ((unsigned int)(u8_ptr)[1])<<16 | ((unsigned int)(u8_ptr)[0])<<24);
            }

            static inline signed int ToInt32(const unsigned char* u8_ptr)
            {
                return (((signed int)(u8_ptr)[0]) | ((signed int)(u8_ptr)[1])<<8 | ((signed int)(u8_ptr)[2])<<16 | ((signed int)(u8_ptr)[3])<<24);
            }
        protected:

        private:
        } Convert;
        static BufferState_t bstate;
        Mutex mMutex;
    private:        
        vector<unsigned char> buffer;
        vector<unsigned char>::pointer dataPtr;
        int currPosition;
        bool ptrSet;
    };
} 
```

**缓冲区.cpp**

```
 #include "StdAfx.h"
#include "IBufferPool.h"
#include <iostream>
namespace Utils
{

    IBuffer::IBuffer(void) 
        : currPosition(0), ptrSet(false) 
    {
        /*buffer.push_back('\0');*/
        SetPtr();
    }

    IBuffer::IBuffer( IBuffer* newbuff )
        :currPosition(0)
    {
    }

    IBuffer::~IBuffer(void)
    {
        if (GetPosition() != 0)
        {
            dataPtr = buffer.data();
        }

        buffer.clear();
        dataPtr = NULL;
        SetPosition(0);
        /*std::cout<<"Ibuffer Freed \n";*/
    }

    //************************************
    // Method:    WriteByte
    // FullName:  BufferPool::WriteByte
    // Access:    public 
    // Returns:   int
    // Qualifier:
    // Parameter: unsigned char data
    // Description: write data of type byte in to buffer
    //************************************
    int IBuffer::WriteByte(unsigned char data)
    {
        Lock lock(mMutex);
        buffer.push_back(data);
        SetPtr();
        return 0;
    }

    //tested OK
    int IBuffer::WriteShort(unsigned short data)
    {
        Lock lock(mMutex);
        unsigned char temp;
        //first we convert to network byte order
        /*unsigned short tmpData = HostToNetworkByteOrder(data);*/
        //lower byte

        temp = LOW_Uint16(/*tmpData*/data);
        //buffer.push_back(temp);          /// Access violation
        buffer.insert(buffer.end(),1,temp);
        temp = HI_Uint16(/*tmpData*/data);
        //buffer.push_back(temp);          /// Access violation
        buffer.insert(buffer.end(),1,temp);
        SetPtr();
        return 0;
    }

    int IBuffer::WriteShort( uint32_t position,unsigned short data )
    {
        Lock lock(mMutex);
        vector<unsigned char>::pointer pt = buffer.data();
        pt+=position;

        *pt=LOW_Uint16(data);
        pt++;
        *pt=HI_Uint16(data);
        SetPtr();
        return 0;
    }

    int IBuffer::WriteUInt(unsigned int data)
    {
        Lock lock(mMutex);
        //unsigned int and unsigned long both have 4 byte length except that unsigned long can accept floating point numbers

        vector<unsigned char> vt = Uint32ToByteArray(data);

        for each(const unsigned char &i in vt)
        {
            buffer.push_back(i);
        }
        SetPtr();
        return 0;
    }

    int IBuffer::WriteUlong( unsigned long data )
    {
        Lock lock(mMutex);
        return WriteUInt(data);
    }

    vector<unsigned char> IBuffer::Uint32ToByteArray(unsigned int x)
    {
        Lock lock(mMutex);
        vector<unsigned char> arrayOfByte(4);
        for (int i = 0; i < 4; i++)
            arrayOfByte[3 - i] = (x >> (i * 8));
        return arrayOfByte;
    }

    uint8_t* IBuffer::ToUInt8ptr()
    {
        Lock lock(mMutex);
        uint8_t* u8arr = (uint8_t*)this->buffer.data();
        size_t sz = this->buffer.size();
        u8arr[sz] = '\0';
        return u8arr;
    }

    bool IBuffer::IsEmpty()
    {
        if(!buffer.size())
            return true;
        return false;
    }

    unsigned char* IBuffer::Value()
    {
        if(!dataPtr)
        {
            dataPtr = buffer.data();
        }
        return dataPtr;
    }

    unsigned short IBuffer::HostToNetworkByteOrder(unsigned short x)
    {
        Lock lock(mMutex);
        if(IsBigEndian()){
            return x;
        }
        else{
            return ((((unsigned short)(x) & 0xff00) >> 8)       |
                (((unsigned short)(x) & 0x00ff) << 8));
        }
    }

    unsigned short IBuffer::HostToNetworkByteOrder(const void* px)
    {
        Lock lock(mMutex);
        unsigned short y = IBuffer::Convert.ToUShort((const unsigned char*)px);//IRV_TO_UINT16((const unsigned char*)px);
        return HostToNetworkByteOrder(y);
    }

    unsigned long IBuffer::HostToNetworkByteOrder(unsigned long x)
    {
        Lock lock(mMutex);
        if(IsBigEndian()){
            return x;
        }
        else{
            return ((((unsigned int)(x) & 0xff000000) >> 24)    | \
                (((unsigned int)(x) & 0x00ff0000) >> 8)     | \
                (((unsigned int)(x) & 0x0000ff00) << 8)     | \
                (((unsigned int)(x) & 0x000000ff) << 24));
        }
    }

    unsigned long IBuffer::HostToNetworkByteOrderUL(const void* px)
    {
        Lock lock(mMutex);
        unsigned long y = IBuffer::Convert.ToUShort((const unsigned char*)px);
        return HostToNetworkByteOrder(y);
    }

    unsigned long IBuffer::NetworkToHostByteOrder(const unsigned long x)
    {
        Lock lock(mMutex);
        if(IsBigEndian()){
            return x;
        }
        else{
            return ((((unsigned int)(x) & 0x000000ff) << 24)    | \
                (((unsigned int)(x) & 0x0000ff00) << 8) | \
                (((unsigned int)(x) & 0x00ff0000) >> 8)         | \
                (((unsigned int)(x) & 0xff000000) >> 24));
        }
    }

    unsigned short IBuffer::NetworkToHostByteOrder( const unsigned short x )
    {
        Lock lock(mMutex);
        if(IsBigEndian()){
            return x;
        }
        else{
            return ((((unsigned short)(x) & 0x00ff) << 8)       |
                (((unsigned short)(x) & 0xff00) >> 8));
        }
    }

    bool IBuffer::IsBigEndian(){
        /* If LITTLE_ENDIAN or BIG_ENDIAN macros have been defined in config.h ==> use them
        * otherwise ==> dyn retrieve the endianness
        */
        short word = 0x4321;
#if LITTLE_ENDIAN
        return false;
#elif BIG_ENDIAN
        return true;
#else
        return ((*(signed char *)&word) != 0x21);
#endif
    }

/*
    IBuffer IBuffer::operator=( const IBuffer &buf )
    {
        IBuffer bf;
        bf.buffer = buf.buffer;
        return bf;
    }*/

    IBuffer& IBuffer::operator=(IBuffer& Rhs)
    {
        if (this != &Rhs)
        {
            if (this->dataPtr && this->Size()>0 && this->GetPosition()>0)
            {
                delete this;
            }
            buffer=Rhs.buffer;
            dataPtr = Rhs.dataPtr;
            currPosition = Rhs.GetPosition();
        }
        return *this;

    }

    IBuffer& IBuffer::operator=( char* rhs )
    {
        Lock lock(mMutex);
        if (this->buffer.size() != 0)
        {
            this->buffer.clear();
        }
        if (this->currPosition !=0)
        {
            this->currPosition = 0;
        }
        this->Write(rhs,strlen(rhs));
        return * this;
    }

    //Move forward data pointer by one
    void IBuffer::operator++()
    {
        dataPtr++;
        SetPosition(1);
        //dataPtr+=GetPosition();
    }

    //************************************
    // Method:    ReadByte
    // FullName:  BufferPool::ReadByte
    // Access:    public 
    // Returns:   unsigned char
    // Qualifier:
    // Parameter: 
    // Description: read data of type byte and move forward data pointer
    //************************************
    unsigned char IBuffer::ReadByte()
    {
        Lock lock(mMutex);
        unsigned char ret = (*(dataPtr));
        dataPtr++;
        SetPosition(1);
        return ret;
    }

    unsigned short IBuffer::ReadShort()
    {
        Lock lock(mMutex);
        unsigned short ret=/*HostToNetworkByteOrder((unsigned char*)(dataPtr))*/IBuffer::Convert.ToUShort((unsigned char*)(dataPtr));
        dataPtr+=2;
        SetPosition(2);
        return ret;
    }

    unsigned int IBuffer::ReadUint32()
    {
        Lock lock(mMutex);
        //I DON NOT KHNOW MUST CONVERT RECIEVED MESSAGE TO LITTLE ENDIAN OR NOT?
        unsigned int ui=/*HostToNetworkByteOrderUL((unsigned char*)(dataPtr))*/Convert.ToUint32((unsigned char*)(dataPtr));
        dataPtr+=4;
        SetPosition(4);
        return ui;
    }

    unsigned long IBuffer::ReadUlong()
    {
        Lock lock(mMutex);
        return (unsigned long) ReadUint32();
    }

    unsigned char* IBuffer::Read(size_t sz)
    {
        Lock lock(mMutex);
        //return a block of data
        unsigned char* tmp = new unsigned char;
        /*Lock lock(mMutex);*/
        for (int i = 1;i<=sz;i++)
        {
            tmp[i-1] = *dataPtr++;
        }
        //dataPtr +=sz;
        tmp[sz] = '\0';
        SetPosition(sz);
        return tmp;
    }

    IBuffer::operator char*()
    {
        Lock lock(mMutex);
        char* ret = (char*)buffer.data();
        ret[buffer.size()] = '\0';
        return ret;
    }

    IBuffer::operator void*()
    {
        return (void*)buffer.data();
    }

    int IBuffer::Write(const void* data,size_t size )
    {
        Lock lock(mMutex);
        unsigned char* udata = (unsigned char*)data;
        /*Lock lock(mMutex);*/
        for (size_t i=0;i<size;i++)
        {
            buffer.push_back(*udata++);
        }
        SetPtr();
        return 0;
    }

    int IBuffer::Write( const void** data, size_t sz )
    {
        Lock lock(mMutex);
        unsigned char* udata = (unsigned char*)data;
        /*Lock lock(mMutex);*/
        for (size_t i=0;i<sz;i++)
        {
            buffer.push_back(*udata++);
        }
        SetPtr();
        return 0;
    }

    int IBuffer::Write( size_t position , const void* data,size_t sz )
    {
        Lock lock(mMutex);
        unsigned char* udata = (unsigned char*)data;
        vector<unsigned char>::pointer pt = buffer.data();
        /*Lock lock(mMutex);*/
        pt+=position;
        for (size_t i=0;i<sz;i++)
        {
            *pt=(unsigned char)(*udata++);
            pt++;
        }
        SetPtr();
        return 0;
    }

    IBuffer::operator uint8_t*()
    {
        return (uint8_t*) buffer.data();
    }

    void IBuffer::CleanUp()
    {
        if (this->Size() > 0 && this->dataPtr)
        {
            this->buffer.clear();
            this->SetPosition(0);
            this->dataPtr = NULL;
        }
    }

    void IBuffer::SetPtr()
    {
        if (!IsEmpty() /*&& !ptrSet*/)
        {
            dataPtr=buffer.data();
            ptrSet=true;
            bstate = BOB;
        }       
    }

    size_t IBuffer::Size() const
    {
        return buffer.size();
    }

    int IBuffer::SetPosition( int newpos )
    {
        //if before read function take placed then current position must be updated to new position
        //our CURSOR move forward by newpos
        if (currPosition == 0)
        {
            currPosition = newpos;
        } 
        else
        {
            currPosition += newpos;
            if (this->Size() == currPosition)
            {
                bstate = EOB;
            }
        }

        return 0;
    }

    void IBuffer::Move( int32_t count )
    {
        SetPosition(count);
        dataPtr+=count;
    }

    BufferState_t IBuffer::bstate(BOB); 
```

这两个类不是最终的。我只测试看看是否有可能以这种方式使用向量作为缓冲区，我选择与否。我认为这不是一个好主意。

编辑：

> 我通过使用 HeapAlloc 和 HeapRealloc 更改了 Ibuffer 的实现，但我得到了这个例外
> 
> **testDhcpv4.exe 中 0x774a2913 (ntdll.dll) 处未处理的异常：0xC0000374：堆已损坏。**

请帮我。

最好的祝福

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T09:27:14.060

代码太多，但我发现了这个

```
IBuffer::operator char*()
{
    Lock lock(mMutex);
    char* ret = (char*)buffer.data();
    ret[buffer.size()] = '\0';
    return ret;
} 
```

那是未定义的行为（写入超出数组末尾）。

还有一个危险信号是您正试图同时维护一个向量和一个指向它的数据的指针。显然修改向量（例如通过 push_back）可以使指针无效。我没有看到任何让我认为你弄错了的东西，但是因为这样做没有任何好处（只需使用整数并在需要时调用 vector::data() ）你不妨摆脱.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T09:24:09.747

在库边界暴露 C++ 标准库容器可能是危险和脆弱的。

问题是库及其客户端在 STL 对象的存储布局中共享定义不明确的二进制接口。STL - 按照设计 - 并没有抽象出它的大部分内容。这样做会严重影响性能。

当库及其客户端（请记住，它们共享一组通用的头文件）使用不同的存储布局编译时，这可能会咬你一口。

虽然这可能会在编译器（甚至编译器版本）之间发生变化，但真正令人讨厌的问题是有条件编译的代码 - 我怀疑正是这导致了你的问题。

Visual Studio 附带的 STL 实现传统上启用了各种形式的健全性检查 - 例如在迭代器使用时 - 在调试构建中会改变已编译 STL 对象的存储布局。

因此，总而言之，我怀疑您将客户端构建为调试版本，而库处于发布模式（反之亦然）。

# c# - Windows 8 Metro 风格列表框

> ID：11815235
> 
> 赞同：6
> 
> 时间：2012-08-05T09:08:27.287
> 
> 标签：c#, wpf, xaml, windows-8

我正在构建一个 wpf Metro 风格的应用程序，但首先，我需要创建 Windows 8 开始屏幕，如**Windows 7**和**.NetFramework 4.0**中的列表框。

我现在使用 Listbox 和 Wrappanel，但正如你所见，它并不清楚！！！

![在此处输入图像描述](../Images/7d34e9dd70baeab620b5db45753fc979.png)

请帮我填写空白单元格。

**编辑** 更改按钮的位置 ![在此处输入图像描述](../Images/da738dec7fd2a9ae2e6dd31bf470e0e0.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-05T10:25:37.940

看看： http: [//www.codeproject.com/Articles/370650/Simple-Metro-Style-Panorama-Control-for-WPF](http://www.codeproject.com/Articles/370650/Simple-Metro-Style-Panorama-Control-for-WPF) by Sacha Barber

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-30T17:08:00.160

这一点都不是微不足道的......甚至微软的人都告诉我，在我最近的一次培训中......

我建议您阅读以下文章，其中的内容非常接近您的需要！

[http://tozon.info/blog/post/2012/09/01/Variable-sized-grid-items-in-Windows-8-apps.aspx](http://tozon.info/blog/post/2012/09/01/Variable-sized-grid-items-in-Windows-8-apps.aspx)

希望能帮助到你！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T09:32:01.307

[VariableSizeWrapGrid](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/windows.ui.xaml.controls.variablesizedwrapgrid)可以解决问题：

```
<GridView>
  <GridView.ItemsPanel>
    <ItemsPanelTemplate>
      <VariableSizeWrapGrid ItemHeight="100" ItemWidth="150"/>
    </ItemsPanelTemplate>
  </GridView.ItemsPanel>   
</GridView> 
```

结果示例：

![在此处输入图像描述](../Images/e639fda4235528a10d2c43dae0bd9e75.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T12:08:07.373

使用 WrapPanel 进行布局，您就完成了：

```
<ListBox>
  ...
  <ListBox.ItemsPanel>
    <ItemsPanelTemplate>
      <WrapPanel />
    </ItemsPanelTemplate>
  </ListBox.ItemsPanel>
</ListBox> 
```

# asp.net-mvc - asp.net mvc 3 - 从其他控制器调用非操作

> ID：11815242
> 
> 赞同：0
> 
> 时间：2012-08-05T09:10:05.230
> 
> 标签：asp.net-mvc, asp.net-mvc-3

我有 2 个控制器`CustomerController`和`PrivatemessageController`

客户有一个不作为的方法

```
private readonly ICustomerService _customerService; 
public Customer(....)   << autofac Ioc 
{
 }

    [NonAction]
    protected CustomerNavigationModel GetCustomerNavigationModel(Customer customer)
    {
        var model = new CustomerNavigationModel();

        .... _customerSerice...
        return model;
    } 
```

我想从中获得`GetCustomerNavigationModel`价值，`CustomerController`因为我不想为 重新创建相同的方法`PrivateMessageController`，这在 ASP.NET MVC 3.0 中是否可行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T09:20:29.383

这里有两个选择。

1.  将方法设为公共静态：

    ```
     [NonAction]
        public static CustomerNavigationModel GetCustomerNavigationModel(Customer customer)
        {
            var model = new CustomerNavigationModel();

            .... _customerSerice...
            return model;
        } 
    ```

2.  创建一个基本控制器并在那里实现该方法。让您的两个控制器都从您的基本控制器派生：

    ```
    public abstract class MyBaseController : Controller
    {
        [NonAction]
        protected CustomerNavigationModel GetCustomerNavigationModel(Customer customer)
        {
            var model = new CustomerNavigationModel();

            .... _customerSerice...
            return model;
        }
    }

    public class CustomerController : MyBaseController
    {
        ....
    }

    public class PrivatemessageController : MyBaseController
    {
        ....
    } 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T09:20:19.240

将该方法重构为一个单独的类，并从您的控制器中使用该类。您也可以将方法设为静态，然后使用以下方法从*PrivatemessageController*调用它：

```
CustomerController.GetCustomerNavigationModel(customer); 
```

# php - imagettftext函数在php中不起作用

> ID：11815245
> 
> 赞同：1
> 
> 时间：2012-08-05T09:10:12.187
> 
> 标签：php, captcha, imagettftext

我的验证码有以下代码。图像中的线条已生成，但未显示 4 位数字。我认为有一些问题

**imagettftext($image,$font_size,0,15,30,$text_color,'font.TTF',$text);**

代码的功能。我尝试使用 $_server['DOCUMENT_ROOT']; 设置字体文件的路径；但没有工作。

这是代码：

```
 <?php
    session_start();
    header('Content-type: image/jpeg');

    $text= $_SESSION['secure'];

    $font_size =30;
    $image_width= 110;
    $image_height=40;

    $image=imagecreate($image_width,$image_height);
    imagecolorallocate($image, 255, 255, 255);
    $text_color = imagecolorallocate($image, 0, 0, 0);

    for($x=1; $x<=30; $x++){
        $x1 = rand(1,100);
        $x2 = rand(1,100);
        $y1 = rand(1,100);
        $y2 = rand(1,100);
    imageline($image, $x1, $x2, $y1, $y2, $text_color);
    }

    imagettftext($image,$font_size,0,15,30,$text_color,'font.TTF',$text);
    imagejpeg($image);
    ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T09:13:30.517

下面的代码在我的电脑上完美运行

记住字体路径应该是正确的。

输出-![在此处输入图像描述](../Images/22730682395e955e435fe04bfdcc635c.png)

```
<?php

// Set the content-type
header('Content-type: image/png');

// Create the image
$im = imagecreatetruecolor(400, 30);

// Create some colors
$white = imagecolorallocate($im, 255, 255, 255);
$grey = imagecolorallocate($im, 128, 128, 128);
$black = imagecolorallocate($im, 0, 0, 0);
imagefilledrectangle($im, 0, 0, 399, 29, $white);

// The text to draw
$text = 'Testing...';
// Replace path by your own font path
$font = 'arial.ttf';

// Add some shadow to the text
imagettftext($im, 20, 0, 11, 21, $grey, $font, $text);

// Add the text
imagettftext($im, 20, 0, 10, 20, $black, $font, $text);

// Using imagepng() results in clearer text compared with imagejpeg()
imagepng($im);
imagedestroy($im); 
```

# php - 使用 find() 的问题

> ID：11815246
> 
> 赞同：0
> 
> 时间：2012-08-05T09:10:22.747
> 
> 标签：php, mongodb

我有一个在数据库中创建帖子的函数。帖子有自己唯一的 _id，但在创建时，还会获得一个“owner_id”，这是写帖子的用户的 id。

我有一个功能可以完美地显示所有公共帖子，它看起来像这样：

```
public function getPublicPosts()
{
    try
    {
        return $this->getCollection("posts")->find(array("privacy"=>0));
    }
    catch(MongoCursorException $e)
    {
        echo "Posts retrieval failed: ".print_r($e);
    }
} 
```

所以，同样我编写了我的函数来检索用户的帖子，如下所示：

```
public function getUserPosts($user_id)
{
    try
    {
        return $this->getCollection("posts")->find(array("owner_id"=>$user_id));
    }
    catch(MongoCursorException $e)
    {
        echo "Posts retrieval failed: ".print_r($e);
    }
} 
```

getPublicPosts 工作得很好。但是，getUserPosts 返回一个空的 Mongo 光标对象，即使用户的 _id 和帖子的 owner_id 字段完全匹配。在显示帖子的页面上，我已完成以下操作以确保：

```
<?php
     foreach($public_posts as $post):
?>
<?php echo $post['owner_id']; ?><br/>
<?php echo $_SESSION['user_id']; ?> 
```

这给出了 2 个帖子的以下结果：

> 4ffa66f7e3ed570f62000000 4ffa66f7e3ed570f62000000

所以我真的不确定这里发生了什么。我注意到在数据库中，当我插入用户的 id 时，它出现在字段值中

> owner_id {"$oid": "4ffa66f7e3ed570f62000000"}

也许这就是问题所在？当我在显示公共帖子时访问 $posts['owner_id'] 时，这似乎不是问题。我不知道为什么会这样，因为我根本没有将 owner_id 设置为一个数组，只是一个值（用户自己的唯一 _id）

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T07:25:06.860

使用PHP使用文档的_id查询数据库的正确方法是使用上面@Sammaye所述的以下方法

```
$db->users->find(array('_id' => new MongoId($user_id))) 
```

# php - 安排服务器 iOS 推送通知

> ID：11815247
> 
> 赞同：2
> 
> 时间：2012-08-05T09:10:43.387
> 
> 标签：php, ios, push-notification, server-push

我实现了服务器端 iOS 推送通知。

我想知道是否可以像本地一样安排服务器端 iOS 推送通知？

就像是：

```
$body['aps'] = array(
    'alert' => $message,
    'sound' => 'default',
        'schedule' =>  ?
    ); 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T09:12:21.000

不，你不能。您必须在服务器上执行一些逻辑，使其在给定时间发送通知。

请参阅[通知有效负载@APNS Docs](http://developer.apple.com/library/mac/documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/ApplePushService/ApplePushService.html#//apple_ref/doc/uid/TP40008194-CH100-SW1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T11:44:36.697

另一种方法是使用[AlertRocket](http://www.alertrocket.com)或[UrbanAirship](http://www.urbanairship.com)等中间服务之一。它们都有 API，可让您安排稍后的推送，并代表您与 APNS 进行通信。

# jquery - Jquery禁用自动窗口滚动

> ID：11815249
> 
> 赞同：0
> 
> 时间：2012-08-05T09:11:26.863
> 
> 标签：jquery

我创建了一个简单的 Jquery 图像转换查看器，每次加载新照片时，窗口都会自动向上滚动到刚刚加载的新图像的顶部。我试图阻止这种情况，以便转换不会中断用户在页面上的任何位置。

到目前为止，这是我的代码：

```
$(document).ready(function() {

var slideShow = function()
{
current_img = $("#current_img"); // <img> element with src to be changed
height_width = 'width="100%" height="100%"';
photos = new Array('images/home_s1.png','images/home_s2.png', 'images/home_s3.png');
setTimeout(function() { current_img.fadeOut('fast', function() { current_img.attr('src', photos[0]); current_img.fadeIn('slow'); }); }, 0);
setTimeout(function() { current_img.fadeOut('fast', function() { current_img.attr('src', photos[1]); current_img.fadeIn('slow'); }); }, 5000);
setTimeout(function() { current_img.fadeOut('fast', function() { current_img.attr('src', photos[2]); current_img.fadeIn('slow'); }); }, 10000);
setTimeout(function() { slideShow(); }, 15000);
}

$("img").ready(slideShow);

}); 
```

我尝试了多种不同的方法来操作 preventDefault() 函数，我还尝试了加载图像的不同变体（即加载到 html() 而不是 img.attr('src')），但没有运气.. . 对实现这一目标的最有效方法有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T09:27:59.597

您似乎遇到的问题是默认实现`.fadeIn()`并将属性`.fadeOut()`设置为. 这将使元素的高度和宽度为 0，这将导致一种跳跃效果。`display``none`

您应该使用类似的东西`.fadeTo()`，并且在切换图像时不要将不透明度一直降低到 0。像 0.01 这样的值也足够了，不会让 jQuery 将`display`属性更改为`none`.

这是您需要在`setTimeout`回调中执行的操作的示例：

```
setTimeout( function() { 
    current_img.fadeTo( 'fast', 0.01, function() { 
        current_img.attr('src', photos[0]); 
        current_img.fadeTo('slow', 1); 
    }); 
}); 
```

# python - Python：如何在单个 URL 的 2 个修订之间创建差异/补丁文件？

> ID：11815253
> 
> 赞同：2
> 
> 时间：2012-08-05T09:12:20.377
> 
> 标签：python, svn, version-control, diff

我想在单个 SVN URL 的两个修订之间创建一个差异（补丁）文件，包括统一上下文的行。

基本上我需要提供一个 Python 方法来实现以下目标：

第一个（之前）修订版的 SVN 存储库编号的 URL 第二个（之后）修订版的编号

我需要的输出如下：

头修订版中的代码行数 更改的文件数

实际的差异文件。

如何使用 Python 做到这一点？我在这里看到了许多类似的问题，但没有一个专门针对如何在 Python 中实现这一点。任何人都可以建议一些库/代码来帮助实现这一目标吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T09:40:19.877

我注意到[pysvn](http://pysvn.tigris.org/)提供了[diff](http://pysvn.tigris.org/docs/pysvn_prog_ref.html#pysvn_client_diff)方法。我认为这正是你所需要的。

# java - 为什么调试String拼接时会弹出StringBuilders？

> ID：11815255
> 
> 赞同：4
> 
> 时间：2012-08-05T09:12:37.363
> 
> 标签：java, debugging, bytecode

我知道 String 是不可变的，以及何时使用 StringBuilder 或 StringBuffer。我还读到这两个片段的字节码最终会是相同的：

```
//Snippet 1
String variable = "text";
this.class.getResourceAsStream("string"+variable);

//Snippet 2
StringBuilder sb = new StringBuilder("string");
sb.append("text");
this.class.getResourceAsStream(sb.toString()); 
```

但我显然有问题。在 Eclipse 中通过 Snippet 1 进行调试时，我实际上被带到了 StringBuilder 构造函数和 append 方法。我想我缺少有关如何解释字节码以及调试器如何引用源代码中的行的详细信息；如果有人能解释一下，我真的很感激。另外，也许您可​​以指出什么是 JVM 特定的，什么不是（例如，我正在运行 Oracle 的 v6），谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-05T09:18:27.243

> 为什么调试String拼接时会弹出StringBuilders？

因为字符串连接（通过“+”运算符）通常编译为使用 a`StringBuffer`或`StringBuilder`进行连接的代码。JLS 明确允许这种行为。

> *“实现可以选择在一个步骤中执行转换和连接，以避免创建然后丢弃中间字符串对象。为了提高重复字符串连接的性能，Java 编译器可以使用 StringBuffer 类或类似技术来减少通过评估表达式创建的中间字符串对象。”* [JLS 15.18.1](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.18.1)。

（如果您的代码使用 a`StringBuffer`而不是 a `StringBuilder`，可能是因为它是使用非常旧的 Java 编译器编译的，或者因为您指定了非常旧的目标 JVM。`StringBuilder`该类是对 Java 的相对补充。旧版本的 JLS用来`StringBuffer`代替`StringBuilder`，IIRC。）

* * *

> 此外，也许您可​​以指出哪些是 JVM 特定的，哪些不是。

生成的字节码`"string" + variable"`取决于 Java 编译器如何处理连接。（事实上​​，所有生成的字节码在某种程度上都依赖于 Java 编译器。JLS 和 JVM 规范没有规定必须生成哪些字节码。规范更多的是关于程序应该如何表现，以及单个字节码的作用。）

* * *

@supercat 评论：

> 我想知道为什么字符串连接不会使用例如接受两个字符串对象、分配适当组合大小的缓冲区并将它们连接起来的字符串构造函数重载？或者，当连接更多字符串时，需要一个 String[] 的重载？创建一个包含对要连接的字符串的引用的 String[] 应该不会比创建一个 StringBuilder 更昂贵，并且能够一次性创建一个完美大小的后备存储应该是一个简单的性能胜利。

也许......但我会说可能不是。这是一个涉及复杂权衡的复杂领域。为字符串连接选择的实施策略必须在各种不同的用例中都能很好地工作。

我的理解是，最初的策略是在查看了许多方法之后选择的，并进行了一些大规模的静态代码分析和基准测试，以试图找出哪种方法最好。我*想*他们考虑了您提出的所有替代方案。（毕竟，他们是/是聪明人......）

话虽如此，Java 6、7 和 8 的完整源代码库可供您使用。这意味着您可以下载它，并尝试自己的一些实验，看看您的理论是否正确。如果它们是……并且您可以收集确凿的证据证明它们是……然后向 OpenJDK 团队提交补丁。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T09:31:37.370

@StephenC我仍然不相信这个解释。编译器可能会做它想做的任何优化，但是当您通过 Eclipse 进行调试时，源代码视图对编译器代码是隐藏的，它不应该将一段代码跳转到同一源文件中的另一段代码。

问题中的以下描述表明源代码和字节码不同步。即，他没有运行最新的代码。

`When debugging through Snippet 1 in eclipse, I am actually taken to the StringBuffer constructor and to the append method`

和 `how the debugger refers back to the lines in the source code`

# apache-flex - 找不到类 flex

> ID：11815256
> 
> 赞同：0
> 
> 时间：2012-08-05T09:13:05.567
> 
> 标签：apache-flex, class, actionscript

我的 .as 类似乎没有很好地链接，因为我收到以下错误

```
A file found in a source-path must have the same package structure '', as the definition's package, 'MyPlayerd'.    MyPlayerd.as    /MyApp/src  Unknown Flex Problem 
```

这是我的类文件

```
package MyPlayerd
{
public class MyPlayerd
{

    public static var spelerID:String = new String();
    private static var _voornaam:String =  new String();
    public static var famnaam:String = "";
    public static var land:String = "";
    public static var gebdatum:Date;
    public static var speeltsinds:Date;
    public static var gewicht:int = new int();
    public static var win:int=0;
    private static var _loss:int=0;

    public function MyPlayerd()
    {

    }

    public static function get voornaam():String
    {
        return _voornaam;
    }

    public static function set voornaam(value:String):void
    {
        _voornaam = value;
    }

    public static function get loss():int
    {
        return _loss;
    }

    public static function set loss(value:int):void
    {
        _loss = value;
    }

}

 } 
```

我这样导入

```
import MyPlayerd.*; 
```

并像这样创建变量

```
public var p1:MyPlayerd = new MyPlayerd(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T17:03:08.283

> 在源路径中找到的文件必须具有与定义的包“MyPlayerd”相同的包结构“”。

这表示您的`MyPlayerd`类位于名为“MyPlayerd”的包中，但文件在项目中的位置是默认包（没有名称，由上述错误中的空引号表示）。

项目中的包名称和类的位置必须匹配。

解决方案是将`MyPlayerd`类移动到一个名为：`/MyApp/src/MyPlayerd`

或者，从您的类中删除包名称（在第一行）：

```
package
{
    public class MyPlayerd
    {
      // rest of class here
     }
} 
```

# android - javascript代码块中的Jsoup HTML模式匹配？

> ID：11815262
> 
> 赞同：0
> 
> 时间：2012-08-05T09:13:42.490
> 
> 标签：android, parsing, html-parsing, pattern-matching, jsoup

我正在解析 HTML 文档，需要从 javascript 块中提取 location.href= 和 window.location= 之后的 2 个地址。

```
if (countDownTime <= 0){
location.href="http://192.168.2.254:1000/keepalive?06050f020b0b524d";
return;}

function logout(){
window.location="http://192.168.2.254:1000/logout?06050f020b0b524d";
} 
```

我怎么能在 Jsoup 中做到这一点。请发布带有所需导入的代码。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T09:17:17.703

使用这个正则表达式`(?<=(location\.href=")|(window\.location="))(.+?)(?=")`

或者`((location\.href)|(window\.location))="(.+?)"`如果您的正则表达式引擎不支持后向/前瞻，您的值将在正则表达式组中

# amazon-s3 - 蜻蜓在 Model.save 之前添加图像到存储

> ID：11815269
> 
> 赞同：0
> 
> 时间：2012-08-05T09:15:52.783
> 
> 标签：amazon-s3, dragonfly-gem

Dragonfly 文档暗示在保存模型之前不会将任何内容写入数据存储：

> 保存模型时，before_save 回调将数据持久保存到 App 配置的数据存储区

使用 Rails 和 Dragonfly 0.9.12，我有一个带有 的模型文章`image_accessor :image`，我的商店是 S3。以下内容足以在 S3 中存储图像：

1.  浏览器上传图片或提供 image_url。
2.  新模型实例`@article = Article.new(params[:article])`：）

而已。如果我通过添加处理`after_assign :resize_image`，则存储处理后的版本。

这种行为是故意的吗？它导致杂散图像上传到 S3。我并不总是保存`@article`到 db，但我仍然需要 Dragonfly 来调整图像大小。（如果您好奇，我会将其作为嵌入数据发送回浏览器进行预览，使用`Base64.encode64(@article.image.data)`.）

为了进行调查，我断开了互联网以中断商店的运营。这是跟踪的相关部分：

```
dragonfly (0.9.12) lib/dragonfly/active_model_extensions/attachment.rb:179:in `store_job!'
dragonfly (0.9.12) lib/dragonfly/active_model_extensions/attachment.rb:118:in `retain!'
dragonfly (0.9.12) lib/dragonfly/active_model_extensions/class_methods.rb:63:in `block (3 levels) in register_dragonfly_app'
mongoid (3.0.3) lib/mongoid/attributes/processing.rb:102:in `process_attribute'
mongoid (3.0.3) lib/mongoid/attributes/processing.rb:27:in `block in process_attributes'
mongoid (3.0.3) lib/mongoid/attributes/processing.rb:25:in `each_pair'
mongoid (3.0.3) lib/mongoid/attributes/processing.rb:25:in `process_attributes'
mongoid (3.0.3) lib/mongoid/document.rb:147:in `block in initialize'
mongoid (3.0.3) lib/mongoid/threaded/lifecycle.rb:84:in `_building'
mongoid (3.0.3) lib/mongoid/document.rb:142:in `initialize' 
```

我怎样才能解决这个问题？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T22:52:12.343

This is caused by using `<%= f.hidden_field :retained_image %>`.

# file - 使用 Felix 文件安装示例

> ID：11815271
> 
> 赞同：4
> 
> 时间：2012-08-05T09:16:04.130
> 
> 标签：file, installation, apache-felix, spring-dm

我一直在互联网上寻找使用 felix 文件安装的示例……特别是我想知道如何加载此捆绑包广告如何为其提供所需的配置文件。

我想借此机会向您询问其他信息，例如：Felix 文件安装如何与 spring DM 结合使用（有什么问题吗？）？由于我没有固定的目录列表来观看 Felix 文件安装...有没有办法告诉他观看从一开始就不知道的多个目录（例如目录及其所有子目录）？

非常感谢您的帮助，我希望我能够尽可能清楚地向您解释我的担忧

# python - 如何强制我的 virtualenv 看到安装在系统级别的这个编译模块？

> ID：11815272
> 
> 赞同：4
> 
> 时间：2012-08-05T09:17:13.973
> 
> 标签：python, import, gconf

我在 Ubuntu 12.04 上安装了包*python-gconf*并使用它：它是与 gnome 配置工具的 python 绑定，并且没有 pypi 包。

一旦我创建了一个 virtualenv（**没有** `--no-site-packages`），任何导入的尝试`gconf`都会导致`ImportError`.

该`gconf`模块在系统级别可以正常工作，但在虚拟环境中却不行。我调查了一下，打开*python-gconf.deb*告诉我它只是一个 gconf.so 二进制文件。

搜索它告诉我它已安装在*/home/lib/python2.7/dist-packages/gtk-2.0/gconf.so*

我确实试图强迫 Python 手：

```
sudo ln -s /usr/lib/python2.7/dist-packages/gtk-2.0/gconf.so ~/.virtualenvs/appetizer/lib/python2.7/site-packages/ 
```

但这只会导致：

```
>>> import gconf
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ImportError: could not import gobject (error was: 'No module named gobject') 
```

所以我猜它非常依赖于GTK。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-05T10:24:53.040

您应该使用`--system-site-packages`选项创建您的 virtualenv 以使所有系统包可见。当您只需要一个外部包时，将外部包符号链接到 virtualenv 的结构中也适用于大多数情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-01T06:10:31.337

如果您已经创建了虚拟环境，只需`no-global-site-packages.txt`从中删除文件以使其看到系统包。

# java - MySQL Jar 可以工作，但 MSSQL 不行？

> ID：11815276
> 
> 赞同：0
> 
> 时间：2012-08-05T09:18:10.237
> 
> 标签：java, sql-server-2008, jdbc

我的 MySQL-java-jdbc 代码不使用 Class.forName(abcde)。我的代码工作正常。我所做的只是将它`mysql.jar`放到我的 lib 文件夹中，然后代码就可以工作了。

但是，对于 MSSQL，这不起作用，我收到以下错误：

```
java.sql.SQLException: No suitable driver found for jdbc:microsoft:sqlserver://localhost:1433 
```

我同时使用`sqljdbc.jar`和`sqljdbc4.jar`，`java 1.6`和`MSSQL 2008`。

你能告诉我如何找到这个问题的原因吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T09:26:00.237

我认为您的数据库连接 URL 错误。里面应该没有`microsoft`。试试`jdbc:sqlserver://localhost:1433`吧。

另请参阅[SQL Server JDBC 驱动程序的 MSDN 文档](http://msdn.microsoft.com/en-us/library/ms378526.aspx)。

# javascript - 强制 showModalDialog 使用 post 方法

> ID：11815280
> 
> 赞同：0
> 
> 时间：2012-08-05T09:19:08.453
> 
> 标签：javascript, html, http

是否可以强制“showModalDialog”使用“post”方法？我可以看到在很多情况下它使用“Get”方法。

可以在客户端或服务器端配置吗？（我使用的是 Internet Explorer / WebSphere 7.0）

只是为了澄清，我试图从服务器获取一个弹出的 html 页面。有时它使用“GET”，有时它使用“POST”</p>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T09:31:50.100

在您的模式对话框中，放置一个`form`with`method="POST"`和一个提交按钮。当用户单击提交时，它将使用`post`.

如果要使用 ajax，只需在 ajax 调用中定义：

**纯 JavaScript**

```
xmlhttp.open("POST","demo_post.asp",true); 
```

**jQuery**

```
$.ajax({
  type: "POST",
  url: "some.php",
 ... 
```

# android - 不知道为什么“对话框”没有出现？甚至“Toast”语句也没有运行

> ID：11815282
> 
> 赞同：3
> 
> 时间：2012-08-05T09:19:24.233
> 
> 标签：android, android-dialog

我刚开始学习Android，这是我的java文件的代码。我没有更改 XML 文件。运行此代码时，会显示简单的空白活动，没有对话框。需要帮助。

```
package com.example.dialogbox;

import android.app.Activity;
import android.app.AlertDialog;
import android.content.DialogInterface;
import android.os.Bundle;

public class MainActivity extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    Add("Exit App", "Are u sure?");
    Toast.makeText(this, "open", Toast.LENGTH_LONG);
}

public void Add(String title, String msg) {
    Toast.makeText(this, "open", Toast.LENGTH_LONG);
    AlertDialog.Builder builder = new AlertDialog.Builder(this);
    builder.setTitle(title)
            .setMessage(msg)
            .setPositiveButton("Yes",
                    new DialogInterface.OnClickListener() {

                        public void onClick(DialogInterface dialog,
                                int which) {
                            // TODO Auto-generated method stub

                        }
                    })
            .setNegativeButton("No", new DialogInterface.OnClickListener() {

                public void onClick(DialogInterface dialog, int which) {
                    // TODO Auto-generated method stub

                }
            });
    AlertDialog alert = builder.create();

}

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T09:33:22.167

您忘记调用`show()`方法。添加`alert.show()`，您的`Add()`方法将如下所示：

```
public void Add(String title, String msg) {

    System.out.println("heyo");
    AlertDialog.Builder builder = new AlertDialog.Builder(this);
    builder.setTitle(title)
            .setMessage(msg)
            .setPositiveButton("Yes",
                    new DialogInterface.OnClickListener() {

                        public void onClick(DialogInterface dialog,
                                int which) {
                            // TODO Auto-generated method stub

                        }
                    })
            .setNegativeButton("No", new DialogInterface.OnClickListener() {

                public void onClick(DialogInterface dialog, int which) {
                    // TODO Auto-generated method stub

                }
            });
    AlertDialog alert = builder.create();
    alert.show()

} 
```

# c# - XNA 上的消息框和对话框 (C#)

> ID：11815283
> 
> 赞同：0
> 
> 时间：2012-08-05T09:20:02.587
> 
> 标签：c#, xna, xna-4.0, messagebox, dialogresult

我的 XNA 游戏中有以下代码：

```
 private void gameOver()
    {
        if (!m_IsGameOver)
        {
            string message = String.Format("GAME OVER!!!{0}Your score is: {1}",
                        Environment.NewLine, GameScore);
            if (MessageBox.Show(message, "GameOver", MessageBoxButtons.OK) == DialogResult.OK)
            {
                this.Exit();
            }

            m_IsGameOver = true;
        }
    }

    private void gameWon()
    {
        string message = String.Format("You Won!!!{0}Your score is: {1}",
                    Environment.NewLine, GameScore);
        if (MessageBox.Show(message, "You Won!", MessageBoxButtons.OK) == DialogResult.OK)
        {
            this.Exit();
        }
    } 
```

由于某种原因，我收到以下错误：

```
"The name 'MessageBox' does not exist in the current context"  
"The name 'MessageBoxButtons' does not exist in the current context"    
"The name 'DialogResult' does not exist in the current context" 
```

我正在尝试添加“System.Windows ...”，但似乎“System”中没有“windows”...

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-05T09:33:29.123

您似乎正在尝试在 XNA 中使用 WinForms 类。但是，根据文档，XNA 中不包含 WinForms：从[`MessageBox`文档](http://msdn.microsoft.com/en-us/library/system.windows.forms.messagebox.aspx)中可以看出，第一列中没有一个`MessageBox`方法有 XNA 徽标，这意味着 XNA 不支持它们。（相比之下，请参阅 上的[文档`System.Linq.Enumerable`](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.aspx)，其中所有方法旁边都有*X形的 XNA 徽标）。*

对于游戏内的 GUI，存在诸如此类的各种解决[方案](http://xnagui.codeplex.com/)；更多链接包含在[这个](https://stackoverflow.com/questions/5628265/how-can-i-make-a-gui-for-my-c-sharp-xna-game)、[这个](https://stackoverflow.com/questions/4749294/is-there-any-free-xna-ui-library)和[这个 SO 问题](https://stackoverflow.com/questions/1561541/xna-and-gui-controls-eg-xaml-and-xna)以及[这个 MSDN 论坛帖子](http://forums.create.msdn.com/forums/p/15274/79912.aspx)中包含另一个链接列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T09:32:54.127

好的，我找到了解决方案......
非常简单：/
将“System.Windows”添加到项目的“参考”部分:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-06T17:23:08.730

此外，如果您尝试引入 System.Windows.Forms，并且您正在使用 XNA 的密钥，例如 Keys.Up，则会与 System.Windows.Forms 密钥发生名称冲突。

# c++ - 数组和缓存

> ID：11815288
> 
> 赞同：-1
> 
> 时间：2012-08-05T09:21:07.423
> 
> 标签：c++

如果我有一个`char`长度为 80 亿的数组。将其分解为更小的数组会通过改进缓存来提高性能吗？基本上，我将迭代数组并进行一些比较。如果不是，那么使用这种长度的数组的最佳方式是什么。

我正在将二进制形式的文件读入数组，并将对文件的不同部分执行二进制比较。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T09:28:14.573

如果你打算这样做一次，那么只需运行它。编程工作可能不值得花时间。

我假设你想一次又一次地这样做，这就是你想要优化它的原因。知道您的迭代和比较是否需要按顺序进行等肯定会有所帮助？如果没有一些问题域输入，很难在这里进行通用优化。

如果它可以并行完成并且您必须多次执行，我建议您查看 MapReduce 技术来解决这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T09:38:53.747

8 GB 的数据将不可避免地破坏数据的局部性，因此您必须以一种或另一种方式来管理较小的内存，或者您的操作系统将执行虚拟内存的磁盘交换。

然而，还有一个替代方案——所谓的`mmap`. 从本质上讲，这允许您将文件映射到虚拟内存空间，然后您的操作系统负责访问它并将必要的页面加载到 RAM 中，而您对该文件的访问只不过是一个简单的内存寻址。

`mmap`阅读更多关于[http://en.wikipedia.org/wiki/Mmap](http://en.wikipedia.org/wiki/Mmap)

# android - 他们如何做到这一点？动画抽屉旋转可能吗？

> ID：11815289
> 
> 赞同：1
> 
> 时间：2012-08-05T09:21:11.220
> 
> 标签：android, android-layout

他们如何做到这一点？动画抽屉旋转可能吗？

在下面的屏幕截图中，触摸底部的“触摸”圆圈会导致该圆圈围绕自身旋转，然后出现 4 个新的导航按钮，将我带到应用程序中的其他屏幕/活动。我真的很想在我的应用程序中有这个..

是滑动抽屉还是其他策略？顺便说一句，我的目标是 android 2.1 版

![开始](../Images/de1fdf9f6c16c700ab7ea51cb1df91aa.png)

![中间](../Images/771c03dad6b1a40a867974d1d5e78778.png)

![下一个](../Images/8b5a3ace9429be6b547ddc81a8921ebb.png)

![然后](../Images/662c25b8b3c3bc9950a1c5babf10dac9.png)

![提恩](../Images/5d25c7bc0129c4ad98f18d87d43f2eaa.png)

![结尾](../Images/319a22b868125ecd5fb5acdac40f1b63.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T11:10:52.293

它看起来好像主要是一个旋转图像的动画。动画完成后，按钮将被激活。

```
ImageView discsAndButtons = (ImageView) findViewById(R.id.discsAndButtons);

Animation anim = new RotateAnimation(0.0f, 90.0f, 0.0f, 480.0f);
anim.setDuration(600);
anim.setFillAfter(true);
anim.setAnimationListener(this);

discsAndButtons.setAnimation(anim);

...

void onAnimationEnd(Animation animation) {
   ViewGroup buttonLayer = (ViewGroup) findViewById(R.id.buttonLayer);
   buttonLayer.setVisibility(View.VISIBLE);
} 
```

在视觉上，按钮是图像的一部分。但有效按钮可能位于图像上方的单独层上，并且仅在动画完成后才可见（*TOUCH*按钮除外）。

# flash - Flash 演示导航

> ID：11815291
> 
> 赞同：0
> 
> 时间：2012-08-05T09:21:47.683
> 
> 标签：flash, actionscript, actionscript-2

我在 AS2 上设计了一个 Flash 幻灯片放映，我想用键盘键左右（来回）导航扔幻灯片。

我很感激你的建议，

问候，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T10:23:42.000

你为什么使用actionscript 2而不是3。只是好奇。要回答您的问题，您需要使用关键听众。

我找到了这个例子

```
on(keyPress "<Right>"){
gotoAndStop('underwriting');
} 
```

在此页面 [http://www.actionscript.org/forums/showthread.php3?t=97523](http://www.actionscript.org/forums/showthread.php3?t=97523)上。它的工作原理是每次按下右箭头键时都会调用 gotoAndPlay 函数。如果您只想转到特定图像并停止，那么您可以使用 gotoAndStop。这将转到特定帧并停止。然后，您可以再次单击右箭头以转到图库中的下一个图像。

上面显示的特定格式的 keyPress 方法需要在 onEnterFrame 中运行。

要设置 OnEnterFrame 函数，您需要一个侦听器。您可以在构造函数中声明它。

```
 addEventListener(Event.ENTER_FRAME, onEnterFrame); 
```

这是 On Enter 框架，如果您每次按下键时都将 keyPress 放在此处，则此方法将运行。公共函数onEnterFrame（事件：事件）：无效{

```
 } 
```

我希望这些代码段对您有所帮助，并且我已经以一种简单易懂的方式解释了各种组件。如果您需要进一步的帮助，请发表评论，以便我进行更改

我发现这是为了创建幻灯片 [http://www.youtube.com/watch?v=I_BYMYgz6Qk](http://www.youtube.com/watch?v=I_BYMYgz6Qk)

# ios - UIWebView 和 Javascript 的内存泄漏

> ID：11815294
> 
> 赞同：10
> 
> 时间：2012-08-05T09:22:27.500
> 
> 标签：ios, uiwebview, memory-leaks

我正在尝试修复我`UIWebView`造成的一堆泄漏，但找不到它们的来源，也找不到解决方法。我所做的是通过网络请求从 Web 获取一些内容，然后组装我的 HTML 并动态加载它：

```
NSString* body = <some HTML>;
NSString* html = [NSString stringWithFormat:kHTMLTemplate, [self scripts], [self styles], body];
[_webView loadHTMLString:html
               baseURL:[NSURL fileURLWithPath:[[NSBundle mainBundle] bundlePath]]]; 
```

每次有新内容可用时，我都会`loadHTMLString`再次执行以刷新 Web 视图。我重复使用相同的 Web 视图、相同的控制器、相同的一切。

Instruments 显示了一种非常奇怪的模式，其中所有泄漏的对象都是各种大小的通用块，并且*没有一个*附加任何信息：没有负责的库，没有负责的框架等。每次`loadHTMLString`执行时，都会添加新的泄漏。

SO中似乎有几个关于`UIWebView`泄漏内存的线程。我已经尝试了我找到的所有建议（例如，将 设置`NSURLCache`为零或重置它；我尝试释放现有的 UIWebView 并在每次有新数据时分配一个新的，等等）但没有任何帮助。

到目前为止，我的调查得出了一个明确的结果：似乎只有当我加载到视图中的 HTML 包含一些 Javascript 时才会出现泄漏。如果你注意到`html`上面的字符串，它是由几个组件组成的；一个是`[self scripts]`简单返回的函数：

```
return @"<script type='text/javascript' src='jquery-1.4.4.min.js'></script>"
        "<script type='text/javascript' src='jmy.js'></script>"; 
```

如果我删除它，就没有泄漏。但是，一旦我`<script>`向我的 HTML 添加标签，就会出现泄漏。如果我简单地包含 jquery 文件（或任何其他 js 文件，至于这个），它们甚至会出现：

```
return @"<script type='text/javascript' src='jquery-1.4.4.min.js'></script>"; 
```

所以，问题是：有人知道这里发生了什么吗？显然，在我的 HTML 中包含一个 Javascript 文件会`UIWebView`导致内存泄漏。

`UIWebView`当我重用同一个对象或每次我有内容时实例化一个新对象时都会出现泄漏这一事实，这使我认为 javascript 文件的处理方式一定存在`loadHTMLString`导致泄漏的原因。

有谁知道如何解决这个问题？

![在此处输入图像描述](../Images/e56cd458c871cf1e7df13fb738581ac4.png)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-07T15:39:18.380

我终于找到了一些关于正在发生的事情的线索，最重要的是我想分享一个解决方法。

我可以确认一些 javascript 文件的简单包含导致重新加载 Web 视图时出现内存泄漏。我什至尝试用 HTML 内容构建一个文件，然后将其加载到`UIWebView`through`loadRequest`中，然后重新加载通过`reload`; 泄漏总是存在的。我会为此发布一个雷达。

拯救我的是`innerHTML`用来更新网络视图的内容。我没有依赖`reload`or `loadHTMLString`，而是用一个空的主体初始化了我的 web 视图（我的意思是，该`head`部分在那里，包括所有必需的 JS/CSS 文件）然后更新了它的设置`document.body.innerHTML`：

```
body = [body stringByReplacingOccurrencesOfString:@"\"" withString:@"\\\""];
[webView stringByEvaluatingJavaScriptFromString:[NSString stringWithFormat:@"setBody(\"%@\");", body]]; 
```

setBody 定义如下：

```
var setBody = function(body) {
    document.body.innerHTML = body;
} 
```

我获得了两个好处：Web 视图更新变得非常快（这是不更新 DOM 的效果，另一方面，这在整体上并不完全可取），并且在 Instruments 下运行应用程序时没有内存泄漏。缺点是我必须微调应用程序运行良好的几个条件。具体来说：

1.  加载 web 视图（即使是空的正文页面）需要很多时间，因此您必须将其内容的第一次更新同步到 DOM 准备好时；

2.  `webViewDidFinishLoading`似乎不可靠：它在`document.readyState`成为之前执行`complete`；

3.  `document.documentElement.height`，检索页面高度的官方方法似乎也不可靠：解决方法是获取`body`部件的“计算样式”并读取其`height`值。

希望这可以帮助其他发现他的网络视图正在泄漏内存的人。

# javascript - Javascript 内联 onclick 转到本地锚点

> ID：11815295
> 
> 赞同：20
> 
> 时间：2012-08-05T09:22:41.417
> 
> 标签：javascript

我有一个按钮作为图像...

```
<img src="button.png" /> 
```

我在 onclick 中需要一些 javascript，单击时它将导航到本地锚点。例如：

```
<img src="button.png" onclick="navigateTo #page10" /> 
```

我怎样才能做到这一点？

更新：这是我正在使用的代码：

```
onclick="document.location=#goToPage';return false;" 
```

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2015-06-30T01:58:46.393

接受的答案中提出的解决方案有一个重要问题，即它只能使用 1 次。每次连续单击都会附加`#goToPage`到位置，并且窗口不会导航到锚点。

一种解决方案是在添加新锚之前移除锚部分：

```
function goToAnchor(anchor) {
  var loc = document.location.toString().split('#')[0];
  document.location = loc + '#' + anchor;
  return false;
} 
```

使用示例：

```
<a href="#anchor" onclick="goToAnchor('anchor')">Anchor</a> 
```

注意：*锚需要用引号括起来，没有哈希前缀。*

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-08-05T10:20:04.590

看起来`onClick`应该是：

```
onclick="document.location+='#goToPage';return false;" 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-05T09:24:56.617

将其包裹在锚标记中。你不需要使用 JS。

```
<a data-role="none" href="#page10"><img src="button.png" /></a> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-11-28T11:51:44.470

尝试使用 with / slash for root 或 /folder/，这样可以多次使用。

```
onclick="document.location='/#goToPage';return false;" 

onclick="document.location='/folder/#goToPage';return false;" 
```

# python - Python。功能中的功能

> ID：11815296
> 
> 赞同：0
> 
> 时间：2012-08-05T09:22:45.113
> 
> 标签：python, function, return

我是 Python 新手，我对这段代码有疑问：

```
def dirs(currentDir):
    exe = True
    allDirs = os.listdir(currentDir)
    print "Directories in %s:" % currentDir
    for files in allDirs:
        print files
    direc = raw_input("Directory name?:")

    if direc == "--q":
        exe = False
    elif currentDir == "/" and exe == True:
        theDir =  currentDir + direc
        dirs(theDir)
    elif currentDir != "/" and exe == True:
        theDir = currentDir + "/" + direc
        dirs(theDir)
    print "should return" 
```

为什么，当我输入*--q*时，打印*应该返回*多次？如果目录是/home/username/，打印3次，如果目录是/home/，打印2次，以此类推。我还尝试在 if 语句中返回：

```
if direc == "--q":
    return something 
```

但随后什么也没有发生。有任何想法吗？非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T09:30:18.057

在我看来，这与您的函数的递归性有关。如果您在使用程序时输入两个目录，您会期望打印 3 个“应该返回”，因为有 3 个对 dirs() 的调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T12:22:48.990

根据我从您的评论中了解到的情况，这应该是正确的。

```
def dirs(currentDir):
    allDirs = os.listdir(currentDir)
    print "Directories in %s:" % currentDir
    for files in allDirs:
        print files
    direc = raw_input("Directory name?:")

    if direc != "--q":
        theDir =  os.path.join(currentDir, direc)
        return dirs(theDir)
    else:
        return currentDir 
```

**讨论您提供的代码**

请在您的帖子中添加更多信息，代码*应*该做什么。同时，请参阅此处以获取语义等效的函数，它与您的函数执行*完全相同*的操作，但我删除了某些不必要的内容。

```
def dirs(currentDir):
    allDirs = os.listdir(currentDir)
    print "Directories in %s:" % currentDir
    for files in allDirs:
        print files
    direc = raw_input("Directory name?:")

    if direc != "--q":
        theDir =  os.path.join(currentDir, direc)
        dirs(theDir)
    print "should return" 
```

现在，只要你不输入`--q`，它就永远不会打印“应该返回”。

你的程序中的`exe`变量是什么？它什么也没*做*。

如果执行第一个`if`子句，则*不会*执行其他子句，因为`if/elif/.../else`它们是互斥子句。设置`exe = True`后，`exe`将*不再*访问。因此，您可以`exe`完全从您的代码中删除 - 就目前而言。不过，也许您希望它做一些不同于阻止这些`elif`子句执行的事情。

至于`should return`

*   你总会看到*至少*一个`should return`。
*   每次你*不*进入`--q`，你会`should return`再次看到
*   它们都在您输入后打印`--q`，因为它的打印语句在递归调用之后。

此外，我替换了`os.path.join()`适用于所有平台的目录名称处理逻辑。

这是当前的行为：

```
>>> dirs(r"C:\Python27")
Directories in C:\Python27:
DLLs
Doc
include
Lib
libs
LICENSE.txt
NEWS.txt
python.exe
pythonw.exe
README.txt
Removesetuptools.exe
Scripts
setuptools-wininst.log
tcl
Tools
w9xpopen.exe
Directory name?:Doc
Directories in C:\Python27\Doc:
python273.chm
Directory name?:--q
should return
should return 
```

## 递归

比较这两个函数，看看递归调用前后处理输出的效果：

```
def string_foo(text):
    first, rest = text[0], text[1:]
    print first
    if rest:
        string_foo(rest)

def string_bar(text):
    first, rest = text[0], text[1:]
    if rest:
        string_foo(rest)
    print first 
```

输出：

```
>>> string_foo("Hello")
H
e
l
l
o

>>> string_bar("Hello")
o
l
l
e
H 
```

# android - 如何将图像从一个 xml 文件加载到另一个 xml 文件中？

> ID：11815299
> 
> 赞同：0
> 
> 时间：2012-08-05T09:23:07.710
> 
> 标签：android, xml, imageview, android-imageview

我在这里创建一个相机应用程序。我设法单击图像并在 ImageView 中显示。我有一个 ImageButton，单击它可以将您带到另一个页面。在另一页上，我想用一组可滚动的图像显示该图像，例如在 Instagram 上。但我无法将该图像加载到另一个 xml 文件中。请帮忙。

**代码：**

```
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.image_select);

    // Image clicked...
    ImageView ivPic = (ImageView) findViewById (R.id.ivPic);

    // Image button to go to next page...
    ImageButton ib = (ImageButton) findViewById(R.id.ibNext);

    // Not sure if this is right.....
    Drawable iv = ivPic.getDrawable();

    ib.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub
            startActivity(new Intent("com.rating.bar.EFFECTS"));
        }
    }); 
```

}}

在另一个类中，我创建了这个类变量，但我不能使用 iv（它包含图像视图的可绘制对象）。它只接受我认为的整数。我应该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T09:26:46.060

在您的 imagebutton 中读取图像的 URI/路径，并添加到调用下一个活动的意图的附加内容中，并在下一个活动中读取附加内容。

# php - 这是对地穴的好用吗？

> ID：11815300
> 
> 赞同：3
> 
> 时间：2012-08-05T09:23:17.040
> 
> 标签：php, crypt

我正在升级我的身份验证类，替换`md5`为`crypt`存储密码。这是我采取的方法：

```
function crypt_pass($pass, $userID) {
    $salt = $userID .'usesomesillystringforsalt';  // min 22 alphanumerics, dynamic
    $method = (version_compare('5.3.7',PHP_VERSION,'>=')) ? '2y' : '2a'; // PHP 5.3.7 fixed stuff
    if (CRYPT_BLOWFISH == 1) {
        $blowfish_salt = '$'. $method .'$07$'. substr($salt, 0, CRYPT_SALT_LENGTH) .'$';
        return crypt($pass, $blowfish_salt);
    }
    return sha1($pass . $salt);        
} 
```

使每个用户的盐唯一增加了一个步骤，即对提供的用户名进行数据库查找`id`......我认为这是值得的。我错了吗？还有什么我不在这里考虑的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T10:50:02.390

加盐的重点是从相同的密码产生不同的加密字符串。如果你每次都使用相同的盐，这种情况就不会发生，所以你还不如根本不使用盐。您应该为每个密码创建一个随机的新盐，然后将其与加密和加盐的字符串一起存储在数据库中。

# asp.net - 在asp.net中显示时如何在treeview中设置节点被选中？

> ID：11815301
> 
> 赞同：0
> 
> 时间：2012-08-05T09:23:28.807
> 
> 标签：asp.net

我对树视图有一个问题是在将数据绑定到树视图时。我想设置一个子节点是选定节点。例如：我的树视图：

```
 <asp:TreeView ID="TreeView1" runat="server" ImageSet="Arrows" NodeWrap="true">           
         <Nodes>
            <asp:TreeNode Value="Child1" Expanded="True" Text="1">
              <asp:TreeNode Value="Grandchild1" Text="A" />
              <asp:TreeNode Value="Grandchild2" Text="B" />
            </asp:TreeNode>
            <asp:TreeNode Value="Child2" Text="2" />
            <asp:TreeNode Value="Child3" Expanded="True" Text="3">
              <asp:TreeNode Value="Grandchild1" Text="A" />
            </asp:TreeNode>
          </Nodes>

    </asp:TreeView> 
```

当页面加载或我点击页面上的某个按钮时。我想设置一个“”是选中的节点（选中的节点会改变样式什么的）。

我希望有人帮助我！谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T10:10:12.167

如果我正确理解您的问题，那么您可以使用树视图的 OnSelectedNodeChanged 事件。

```
 // Aspx Code
    <asp:TreeView ID="TreeView1" runat="server" ImageSet="Arrows" NodeWrap="true" OnSelectedNodeChanged="Select_Change"  >           
     <Nodes>
        <asp:TreeNode Value="Child1" Expanded="True" Text="1">
          <asp:TreeNode Value="Grandchild1" Text="A" />
          <asp:TreeNode Value="Grandchild2" Text="B" />
        </asp:TreeNode>
        <asp:TreeNode Value="Child2" Text="2" />
        <asp:TreeNode Value="Child3" Expanded="True" Text="3">
          <asp:TreeNode Value="Grandchild1" Text="A" />
        </asp:TreeNode>
      </Nodes>

</asp:TreeView>
// Message is a label in your aspx
// Code Behind
void Select_Change(Object sender, EventArgs e)
{

    Message.Text = "You selected: " + TreeView1.SelectedNode.Text;

} 
```

有关更多详细信息，请访问 msdn [http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.treeview.selectednode.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.treeview.selectednode.aspx)

# html - 如何知道 Html5 拖放中的放置位置

> ID：11815303
> 
> 赞同：1
> 
> 时间：2012-08-05T09:23:58.227
> 
> 标签：html, drag-and-drop, jquery-ui-draggable, jquery-ui-droppable

我正在尝试将 JqueryUi droppable 替换为 html5。

而且我需要知道拖放时可拖动对象的确切位置。

我知道我有鼠标 clientX 和 clientY，但这取决于您开始拖动的位置。

有没有办法获得位置或对象本身？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-01-22T20:44:18.070

```
<script type="text/javascript">
   var dragX;
   var dragY;

    $("body").bind("dragover", function (e) {
        dragX = e.pageX, dragY = e.pageY;
        console.log("x=" + dragX + " and y="+ dragY);
    });

 </script> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-09T08:21:36.700

您必须确定要接受丢弃的目标并在其上连接`dragenter`、`dragover`和事件。如果您还没有，请看一下：[https](https://developer.mozilla.org/en-US/docs/DragDrop/Drag_and_Drop) ://developer.mozilla.org/en-US/docs/DragDrop/Drag_and_Drop 。我记得在那里某处读到，在其中一个事件中，您可以访问拖动元素的 x 和 y 位置。`dragleave``drop`

以下是我在自己的研究中发现的一些额外内容`dragenter`和差异：`dragover`

*   当鼠标在拖动某些东西时进入您的控件时，将调用 DragEnter。
*   当鼠标仍在该矩形中并且仍在拖动时，将调用 DragOver。

矩形是指接收drop的目标元素。[在这里](http://social.msdn.microsoft.com/Forums/en/winforms/thread/be07bcde-6c99-4d68-824e-8ad93e820fe1)找到那些。

# jsf - 在数据表中过滤

> ID：11815305
> 
> 赞同：1
> 
> 时间：2012-08-05T09:24:11.313
> 
> 标签：jsf, primefaces

![我的数据在这里](../Images/564fcb42010cc46204d23a23b85c4d8b.png)

我在[http://www.primefaces.org/showcase-labs/ui/datatableFiltering.jsf](http://www.primefaces.org/showcase-labs/ui/datatableFiltering.jsf)上进行演示，但我想将组合框移动到**新位置**，或者我不希望它出现在新行中，这意味着组合框留在与标题标签相同的行！请帮助我，谢谢所有建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T12:37:59.867

您可以执行以下操作以使过滤器位于同一行中。首先将`filterStyleClass`属性添加到列：

```
<p:column headerText="Manufacturer" filterBy="#{car.manufacturer}"   
          filterOptions="#{tableBean.manufacturerOptions}"  
          filterMatchMode="exact" filterStyleClass="inlineFilter">  
        <h:outputText value="#{car.manufacturer}" />  
    </p:column> 
```

然后添加以下 CSS 规则：

```
.ui-column-filter.inlineFilter {
    display: inline;
    margin-left: 4px;
} 
```

# java - 如何将 AsyncTask 从 Android 移植到 java？

> ID：11815306
> 
> 赞同：20
> 
> 时间：2012-08-05T09:24:24.497
> 
> 标签：java, android, multithreading

[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)对于​​在 Android 中的 UI 线程和其他线程之间进行同步非常有用。所以我已经阅读了它的[源代码](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.1_r2/android/os/AsyncTask.java)并尝试移植到java经典（JDK）但没有成功，因为java中不存在某些类（Message，Handler..）。
我想创建一个具有一些有用功能的类，例如 AsyncTask （可以在主线程和其他线程之间同步）：

```
 doInBackground(Params... params)
    onProgressUpdate(Progress... values)
    onPostExecute(Result result)
    publishProgress(Progress... values)
    onPreExecute()
    onCancelled() 
```

有什么办法可以试试吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2014-02-18T17:57:24.690

同意这`SwingWorker`是最直接的类比`AsyncTask`

如果您不使用 Swing，另一种选择是`ThreadPoolExecutor`：[http ://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ThreadPoolExecutor.html](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ThreadPoolExecutor.html)

这是一篇演示使用`ThreadPoolExecutor`生成多个后台线程的文章：[http ://www.javacodegeeks.com/2013/01/java-thread-pool-example-using-executors-and-threadpoolexecutor.html](http://www.javacodegeeks.com/2013/01/java-thread-pool-example-using-executors-and-threadpoolexecutor.html)

*生成一个在没有*进度更新的情况下运行和完成的单个后台线程（这也是`AsyncTask`Android 中的常见用法）可以很简单：

```
Executors.newSingleThreadExecutor().execute(new Runnable() {
  @Override
  public void run() {
    // do stuff in background
  }
}); 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-08-05T10:25:15.670

**1.** `AsyncTask`是专门为android开发的同步UI线程和Non-UI线程，也叫**Painless threading** .....

**2.** Java 中有一个 AsyncTask 的替代方案，名为`SwingWorker`.

**请参阅此链接以获取不错的基本教程：**

[http://kodejava.org/how-do-i-use-swingworker-to-perform-b​​ackground-tasks/](http://kodejava.org/how-do-i-use-swingworker-to-perform-background-tasks/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-19T18:55:13.547

对于类似的情况，我使用观察者设计模式。生成后台线程后，主线程进入睡眠模式。当后台线程完成异步任务时，它会通过回调消息唤醒主线程。这实质上删除了正在等待回调的同步对象上的块。

# applescript - 如何从终端编辑 iTunes 歌词？

> ID：11815308
> 
> 赞同：1
> 
> 时间：2012-08-05T09:24:33.030
> 
> 标签：applescript, itunes, osascript

我可以使用以下方法获取歌词：

```
osascript -e '''tell application "iTunes" to lyrics of the current track''' 
```

但我该如何设置它们？

我正在尝试使用我的文本编辑器对当前歌词进行更正。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T12:47:00.483

```
osascript -e 'tell application "iTunes" to set lyrics of current track to "hoho"' 
```

感谢 regulus6633

并作为 cli 脚本

```
#!/usr/bin/env osascript
-- update_lyrics <track persisten ID> <lyric file>

on run argv
    try
        set trackPersistentID to item 1 of argv
        set lyricsFile to item 2 of argv

        -- use awk to strip leading empty lines
        set cmdString to "cat " & lyricsFile & " | awk 'p;/^#+$/{p=1}'"
        set newLyrics to do shell script cmdString
    on error
        return "update_lyrics <trackID> <lyricsFile>"
    end try

    tell application "iTunes"
        set mainLibrary to library playlist 1
        try
            set foundTrack to (first file track of mainLibrary whose persistent ID = trackPersistentID)

            set lyrics of foundTrack to newLyrics

        on error err_mess
            log err_mess
        end try
    end tell
end run 
```

# node.js - 防止标签默认行为的服务器端解决方案？

> ID：11815310
> 
> 赞同：0
> 
> 时间：2012-08-05T09:24:47.337
> 
> 标签：node.js, hyperlink, irc

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T09:35:00.733

这是不可能的，因为有大量不同的 IRC 客户端以及它们支持的扩展。IRC 是纯文本服务，符合标准的 IRC 客户端可以简单地显示直接发送给它的消息，而无需应用任何格式。常见的 mIRC 格式化扩展也不支持链接。
这意味着大多数 IRC 客户端将不支持链接（可能自动生成的链接除外）或 javascript。仅仅出于某种原因支持`<a>`标签是非标准行为，我不知道有任何支持它的 IRC 客户端

另一种方法是在机器人输出中放置一条消息，要求用户向机器人发送特定消息以获取更多信息。

**编辑：**回复每个单独的问题

**node.js 应用程序/服务器是否有办法阻止`<a>`IRC 中的标签打开新页面？**
这在很大程度上取决于您的客户对`<a>`标签的支持是什么。如果您的客户端支持`<a>`标签的通用 HTML 属性，那么设置`target="_self"`将执行此操作。您需要提供有关您用于访问服务器的客户端的更多详细信息，以便正确回答此问题。

**或者可能是 IRC 中用于编辑链接外观的方法，所以我实际上可以告诉链接执行 javascript 命令？**
这也高度依赖于客户端。如果我们继续假设客户端支持所有标准的 HTML 属性，那么`<a href="#" onclick="[javascript goes here]; return false" style="[styling for link goes here]">Link Text</a>`它将起作用。同样，您需要提供有关客户的更多详细信息以获得更好的答案

# android - 如何在另一个进程正在运行时以及在检测到停止该正在运行的进程后检测按下的任何按钮

> ID：11815319
> 
> 赞同：0
> 
> 时间：2012-08-05T09:27:03.450
> 
> 标签：android

1.  我有 2 个按钮
2.  当我单击返回按钮时，我将退出延迟 10 秒
3.  如果按下 2 个按钮中的任何一个按钮，那么我想停止退出应用程序。
4.  如果未检测到按下按钮，则继续退出。

公共类 MainActivity 扩展 Activity {

```
int count=0;
boolean pressed;
Button b1,b2;
TextView t1;
Thread t;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    b1= (Button) findViewById(R.id.button1);
    b2= (Button) findViewById(R.id.button2);
    t1 = (TextView) findViewById(R.id.textView2);

    b1.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View arg0) {

            pressed=true;
            t1.setText("Button1 Pressed");
            System.out.println("Button1");

        }
    });
    b2.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View arg0) {

            pressed=true;
            t1.setText("Button2 Pressed");
            System.out.println("Button2");

        }
    });
}
/* (non-Javadoc)
 * @see android.app.Activity#onBackPressed()
 */
@SuppressLint("ParserError")
@Override
public void onBackPressed() {
    System.out.println("Inside Back Button");
    pressed=false;
    t = new Thread(new ABC(), "My Thread");

    t.start();
    System.out.println("OutSide while Loop in BACKBUTTON");
    if(pressed==true){
        System.out.println("Button 1 or 2 Pressed");
        t.interrupt();
        System.out.println("Stopping Thread forcefully");

        count =0;
    }
    if(pressed==false){
        System.out.println("Button 1 or 2 NOT Pressed");
        t.stop();
        super.onBackPressed();
    }
}

public class ABC implements Runnable{

    @Override
    public void run() {
        System.out.println("Inside Thread");
        do{
            count++;
            System.out.println(count);

        }
        while((count <1000) && (pressed==false));
        System.out.println("OutSide while Loop");

    }

} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T09:34:21.370

在这里使用[Handler](http://developer.android.com/reference/android/os/Handler.html)是您最好的解决方案。按下后添加通过[handler.postDelayed(yourRunnableThatCallsFinish, 10000)](http://developer.android.com/reference/android/os/Handler.html#postDelayed%28java.lang.Runnable,%20long%29)调用[Activity.finish()](http://developer.android.com/reference/android/app/Activity.html#finish%28%29)的可运行对象。请务必在按钮的 onClick 事件中调用 [handler.removeCallbacks(SameRunnableObjectThatSendToQueueViaPostDelayed)](http://developer.android.com/reference/android/os/Handler.html#removeCallbacks%28java.lang.Runnable%29)以防止执行该可运行文件。

# jquery - 无法使用 jquery 滑动 div 内容

> ID：11815322
> 
> 赞同：0
> 
> 时间：2012-08-05T09:27:50.673
> 
> 标签：jquery, html, css, slider

我正在尝试将 div 内的图像一张一张地向左移动。但我只能在单击按钮时移动一张图像。我正在寻找在 div 内滑动图像。这是我在 jsfiddle 上的代码。 [http://jsfiddle.net/K2JBg/](http://jsfiddle.net/K2JBg/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T09:39:18.677

## *[jsFiddle 演示](http://jsfiddle.net/K2JBg/2/)*

*   到达最后一张图片后，最好将滑块转到起始位置，因此让我们使用*模数*将计数器转到“0”。
*   不仅仅是移动滑块做一些基本的数学运算：`-300px * the current Counter value`.

每次点击计数器都会增加，但一旦达到图像数量，`4`它将跳回价值`0`-`300px * 0 = 0`这会将您的画廊滑回左侧“0px”。

jQuery：

```
var imgN = $('#slide div img').length; // number of images
var c = 0; // just a Counter
$("#btn").click(function() {
    c = ++c % imgN;      // once it reaches the imgN will turn to '0'
    $("#slide div").animate({left: -300*c }, "fast");   // let's use our math!
}); 
```

修改后的 CSS：

```
 #slide{
        height: 300px;
        width:300px;
        overflow: hidden;
        position:relative;
    }
    #slide div{
        position: absolute;
        left: 0px;
        top:0px;
        width:9000px;    /*make sure to have a big value here if you don't want to do it dynamically with jQUery*/
    }
   #slide img{
        vertical-align: top;
        height: 300px;
        width: 300px;
        float:left;
    } 
```

# c# - 与服务器同步数据后，Windows mobile 5.0 GPS 信息记录和强加在地图上

> ID：11815329
> 
> 赞同：1
> 
> 时间：2012-08-05T09:29:01.250
> 
> 标签：c#, visual-studio-2008, gps, windows-mobile, windows-mobile-gps

我正在寻找将我的 windows mobile 5.0 上的 GPS 信息记录到数据库的最佳解决方案，并且在将 windows mobile 与服务器同步后，我还希望将这些数据强加到地图上，以向我们展示使用这些 co- 的路径坐标，有人可以帮我一些想法吗

谢谢斯里坎特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T00:21:53.820

您可以尝试使用 sdf 文件在移动设备上进行本地存储，然后将 sdf 文件推送到服务器并根据您的要求进行处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T12:27:31.023

您所描述的被称为 GPS Tracker 软件。有许多免费软件 (http://www.freewarepocketpc.net/ppc-tag-gps.html) 和开源项目支持在 Windows Mobile (5) 设备上进行 GPS 跟踪。例如，这个（http://gpstracker.codeplex.com/）怎么样？

如果您打算编写自己的软件，您可以简单地将位置数据保存到纯文本文件或标准 GPX 或 KML 格式中。使用 SQL Server compact（SDF 文件）之类的数据库引擎对我来说看起来太大了。

在 PC 端，您可以将 Google MAPs API 与保存的数据（GPX 或 KML）一起使用。另请参阅 GPSbabel 在这些标准格式之间进行转换。

问候

约瑟夫

# grails - Grails Spring-Security：在控制器下授予权限

> ID：11815330
> 
> 赞同：0
> 
> 时间：2012-08-05T09:29:03.637
> 
> 标签：grails, controller, spring-security, authorization

我是 grails 的新手。我通常在 bootstrap.groovy 中向用户授予权限，如下所示：

```
def roleAdmin = Role.findByAuthority('ROLE_ADMIN') ?: new Role(authority: 'ROLE_ADMIN').save(failOnError: true)

def userMe = User.findByUsername('admin') ?: new User(username: 'jhon',
                password: ('adminme'),enabled: true).save(failOnError:true)

UserRole.create userMe, roleAdmin 
```

如您所见，这是在 bootstrap.groovy 下完成的。现在我想在控制器（即UserController）中执行此操作，这样当我创建新用户时，它也会授予权限。我在想它应该在 UserController 的 def save() 下完成，或者可能不是。

请帮忙。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T13:29:17.117

我假设您已经安装了[Spring-Security-Core](http://grails.org/plugin/spring-security-core/)插件。这段代码应该可以满足您的要求。您将希望将此代码放在控制器中。我把我的放在一个我称之为 AdminController 的控制器中，它处理我的所有管理任务。

```
 def addUser= {

    def userRole = SecRole.findByAuthority('ROLE_USER') ?: new SecRole(authority: 'ROLE_USER').save(failOnError: true)
    def adminRole = SecRole.findByAuthority('ROLE_ADMIN') ?: new SecRole(authority: 'ROLE_ADMIN').save(failOnError: true)

    /*create new user*/
    def user = SecUser.findByUsername("${params.username}") ?: new SecUser (
        username: params.username,
        password: params.password,
        enabled: true,
    ).save()

    /*Assign a user role*/
    if(params.accounttype.equals("User")){
        if (!user.authorities.contains(userRole)) {
            SecUserSecRole.create user, userRole
        }
    }
     /*Assign an admin role*/
    if(params.accounttype.equals("Admin")){
        if (!user.authorities.contains(adminRole)) {
            SecUserSecRole.create user, adminRole
        }
    }
} 
```

在 gsp 上，我制作了一个选择框，允许管理员为用户分配特定角色

```
<g:form controller="admin" action="addUser">
<table>
  <tr>
    <td align ="right"><br>Username: <br></td>
    <td><br><g:textField name="username" value=""/><br></td>
  </tr>
  <tr>
    <td align="right"><br>Password:  <br></td>
    <td><br><g:textField name="password" value=""/><br></td>
  </tr>
  <tr>
    <td align="right"><br>Choose Role:<br></td>
    <td><br><g:select name="accounttype" from='${["User","Admin"]}'/><br></td>
  </tr>
  <tr>
    <td></td>
    <td><br><g:submitButton name="addUser" value="Add User" /></td></td>
  </tr> 
```

更改代码以满足您的需要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T08:04:05.297

你好。如果你想自己创建一些东西，你需要为用户和角色创建控制器。但是它有一个插件：[Spring Security UI](http://grails.org/plugin/spring-security-ui)，它已经拥有你需要管理的一切。

# javascript - 在按钮上显示图像点击 youtube 视频

> ID：11815331
> 
> 赞同：0
> 
> 时间：2012-08-05T09:29:05.447
> 
> 标签：javascript, jquery, html

我在 youtube 视频上使用图像。在图像上单击 (#imageID) 会显示视频。现在我有一个问题如何停止视频，将其反转回起始位置（0:00）并在按钮单击（#stop_replace）时再次在视频上显示图像。

HTML：

```
<div id="ytapiplayer2" style="display:none;">
    <object width="600" height="375">
        <param name="movie" value="http://www.youtube.com/v/WSulgIt-Q_c?fs=1&hl=en_US&rel=0&autoplay=1"></param>
        <param name="allowFullScreen" value="true"></param><param name="allowscriptaccess" value="always"></param>
        <embed src="http://www.youtube.com/v/WSulgIt-Q_c?fs=1&hl=en_US&rel=0&autoplay=1" type="application/x-shockwave-flash" allowscriptaccess="always" allowfullscreen="true" width="600" height="375"></embed>
    </object>
</div>

<img src="image.jpg" id="imageID" />
<img src="button_image.jpg" id="stop_replace" /> 
```

JavaScript/Jquery：

```
$('#imageID').click(function() {
$('#ytapiplayer2').show();
$('#imageID').hide();
}); 
```

jsfiddle 上的代码：http: [//jsfiddle.net/AdUvY/6/](http://jsfiddle.net/AdUvY/6/)。我知道这也可以使用 iframe 来完成，但我需要以这种方式实现它。请问你能帮帮我吗。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T09:59:57.113

我为您创建了一个示例演示。

请检查一下，如果它可以解决您的问题，请告诉我。

演示：http: [//jsfiddle.net/codebombs/Rpgkk/2/](http://jsfiddle.net/codebombs/Rpgkk/2/)

在这里，我使用来自[http://jquery.thewikies.com/swfobject/](http://jquery.thewikies.com/swfobject/)的 jQuery SWFObject 插件。这允许我们编写简单的代码来嵌入 SWF 对象。

此外，在 IE 浏览器中，如果您只是隐藏 SWF 对象，则有可能在后台播放。所以，最好的办法是从 div 中删除完整的播放器，如果你不再需要它的话。

因此，当我不想这样做时，我从播放器 div 中删除了 SWF 对象。

这会自动允许我们在需要时从开始启动播放器。

如果需要任何修改，请告诉我。

# php - PHP array/array_unique 混淆

> ID：11815333
> 
> 赞同：1
> 
> 时间：2012-08-05T09:29:28.037
> 
> 标签：php, arrays, array-unique

我创建了一组图像 URL：

```
$matches = array();

preg_match_all('#(http://[^\s]*?\.jpg)#i',$html, $matches);

$matches2 = array_unique($matches); // get unique

echo "there are ".count($matches2)." items!";

print_r($matches); 
```

计数显示我有一个结果，但是，结果如下所示：

```
there are 1 items!

Array ( [0] => 

Array ( 
[0] => http://testmenow.com/248472104410838590_J3o6Jq50_b.jpg 
[1] => http://testmenow.com/cirrow_1338328950.jpg 
[2] => http://testmenow.com/madi0601-87.jpg 
[3] => http://testmenow.com/swaggirll-4.jpg 
[4] => http://testmenow.com/erythie-35.jpg )) 
```

随后，当我尝试从 URL 中打印出每个图像时，我只得到数组中的第一个图像：

```
foreach ($matches2 as $image) {

echo '<img src='.$image[0].' width=200 height=200>';

} 
```

我需要能够分别打印每个数组项 - 我想我在某个地方混淆了一些东西，但两个小时后......仍然在同一个地方

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-05T09:39:50.010

preg_match_all 为每个子匹配返回一个数组。这意味着它`$matches[0]`是包含您预期结果的数组。您的代码应如下所示：

```
preg_match_all('#http://[^\s]*?\.jpg#i',$html, $matches);
$matches2 = array_unique($matches[0]); // get unique
echo "there are ".count($matches2)." items!";

foreach ($matches2 as $image) {
    echo '<img src='.$image.' width=200 height=200>';
} 
```

您可以省略正则表达式中的括号，因为这已经匹配。

# mysql - mysql选择，如何

> ID：11815334
> 
> 赞同：2
> 
> 时间：2012-08-05T09:29:32.807
> 
> 标签：mysql, wordpress

我需要帮助。我有 2 个带有名称的表`bkeys ( id, bkey, ip, user_id )`和`wp_usermeta`（是的，wordpress 表，感兴趣的字段是`user_id`, `meta_key and` `meta_value`）。我需要的是从 bkeys + meta_value 的值中选择所有行，其中 key 是昵称，因此结果将具有字段 bkey、ip 和 meta_value。问题是，bkeys 表的 ip 和 user_id 可以为 NULL（这意味着任何用户还没有使用键），因此 user_id 为 NULL 的行不会被查询选择

```
SELECT bkeys.bkey, bkeys.ip, wp_usermeta.meta_value
FROM bkeys
LEFT JOIN wp_usermeta ON ( bkeys.user_id = wp_usermeta.user_id )
WHERE meta_key='nickname' 
```

我需要的是选择所有行，即使 user_id 为空。可能吗？如果是，怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T09:34:35.840

尝试移动`meta_key = 'nickname'`到`ON`子句：

```
SELECT bkeys.bkey, bkeys.ip, wp_usermeta.meta_value
FROM bkeys
LEFT JOIN wp_usermeta ON wp_usermeta.user_id = bkeys.user_id
                     AND wp_usermeta.meta_key = 'nickname' 
```

将`LEFT JOIN`s 视为两相滤波：

*   首先，您尝试使用`ON`条件加入一行，否则您加入一个 NULL 行
*   您可以在条件下进一步过滤连接或 NULL 行`WHERE`。

# java - 如何在网页上显示由 PHP 调用的 java 代码生成的图像？

> ID：11815337
> 
> 赞同：1
> 
> 时间：2012-08-05T09:30:23.120
> 
> 标签：java, php, image, exec

我有一个 java jar 文件，它在完成后生成一个图像。我需要从 PHP 服务器调用它。如何在网页上显示图像？`exec()`或`passthru()`不提供返回图像的功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T09:54:51.570

我看到两种可能性：

1.  让您的 Java 程序将图像文件写入 Web 服务器可以读取的位置。然后，您必须将图像创建和图像检索步骤分开。
2.  如果您的 Java 程序可以将图像写入标准输出，那么`passthru()`应该可以工作。要检查这一点，首先手动调用您的 Java 程序并将输出保存到一个文件并查看该文件，例如通过`java your.jar > test.gif`. 如果可行，请使用此 PHP 脚本开始：

    ```
    <?php
        header('Content-Type: image/gif');
        passthru('java your.jar');
    ?> 
    ```

可能存在一些问题，例如 Web 服务器无法访问 java 可执行文件或 jar 文件。如果是这样，请尝试使用绝对路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T09:49:55.257

如果 Java 返回的图像是*有效*图像，那么在 PHP 中您只需要使用该`header()`函数发送一个额外的标头，这样浏览器就知道它是图像而不是常规 HTML。

例如（假设返回的图像是 JPEG 格式）：

```
header('Content-Type: image/jpeg');
readfile('path/to/yourimage.jpg'); 
```

[http://php.net/manual/en/function.header.php](http://php.net/manual/en/function.header.php)

[http://php.net/manual/en/function.readfile.php](http://php.net/manual/en/function.readfile.php)

* * *

`exec()`另一种方法是使用该函数执行 JAR 文件。应该是这样的：

```
header('Content-Type: image/jpeg');
exec('java -jar /path/to/file.jar', $output); 
```

[http://php.net/manual/en/function.exec.php](http://php.net/manual/en/function.exec.php)

# java - Spring 中 ContextLoaderListener 的作用/目的？

> ID：11815339
> 
> 赞同：178
> 
> 时间：2012-08-05T09:30:53.767
> 
> 标签：java, spring, web-applications

我正在学习我的项目中使用的*Spring Framework 。**我在web.xml*文件中找到了 ***ContextLoaderListener***条目。但无法弄清楚它究竟如何帮助开发人员？

 *在[*ContextLoaderListener*](http://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/context/ContextLoaderListener.html)的官方文档中，它说要启动*WebApplicationContext*。关于[*WebApplicationContext*](http://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/context/WebApplicationContext.html) JavaDocs 说：

> 为 Web 应用程序提供配置的接口。

但是我无法理解我使用*ContextLoaderListener*实现了什么，它在内部初始化了*WebApplicationContext*？

**根据我的理解**，*ContextLoaderListener* 读取 Spring 配置文件（在*web.xml*中针对 contextConfigLocation 给出值），对其进行解析并加载该配置文件中定义的*单例 bean 。*同样，当我们要加载*原型 bean*时，我们将使用相同的 web 应用程序上下文来加载它。*因此，我们使用ContextLoaderListener*初始化 web 应用程序，以便我们提前读取/解析/验证配置文件，并且每当我们想要注入依赖项时，我们都可以立即进行，不会有任何延迟。这种理解正确吗？

* * *

## 回答 #1

> 赞同：118
> 
> 时间：2012-08-05T14:50:05.853

你的理解是正确的。这`ApplicationContext`是你的 Spring bean 所在的地方。的目的有`ContextLoaderListener`两个：

1.  将 the`ApplicationContext`的生命周期与`ServletContext`and的生命周期联系起来

2.  自动创建`ApplicationContext`，因此您不必编写显式代码来创建它 - 这是一个方便的功能。

另一个方便的事情`ContextLoaderListener`是它创建一个`WebApplicationContext`并提供对`ServletContext`via [`ServletContextAware`](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/web/context/ServletContextAware.html#setServletContext%28javax.servlet.ServletContext%29)bean 和`getServletContext`方法的访问。

* * *

## 回答 #2

> 赞同：43
> 
> 时间：2014-03-09T00:23:38.383

`ContextLoaderListener`是*可选*的。在这里要说明一点：您可以启动 Spring 应用程序而`ContextLoaderListener`无需`web.xml`配置`DispatcherServlet`.

这是它的样子：

**web.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
    xmlns="http://java.sun.com/xml/ns/javaee" 
    xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" 
    xsi:schemaLocation="
        http://java.sun.com/xml/ns/javaee 
        http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" 
    id="WebApp_ID" 
    version="2.5">
  <display-name>Some Minimal Webapp</display-name>
  <welcome-file-list>   
    <welcome-file>index.jsp</welcome-file>    
  </welcome-file-list>

  <servlet>
    <servlet-name>dispatcher</servlet-name>
    <servlet-class>
      org.springframework.web.servlet.DispatcherServlet
    </servlet-class>
    <load-on-startup>1</load-on-startup>
  </servlet>

  <servlet-mapping>
    <servlet-name>dispatcher</servlet-name>
    <url-pattern>*.do</url-pattern>
  </servlet-mapping>
</web-app> 
```

创建一个名为的文件`dispatcher-servlet.xml`并将其存储在`WEB-INF`. `index.jsp`由于我们在欢迎列表中提到，请将此文件添加到`WEB-INF`.

**调度程序-servlet.xml**

在`dispatcher-servlet.xml`定义你的bean：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans 
    xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:p="http://www.springframework.org/schema/p"
    xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="
        http://www.springframework.org/schema/beans
        http://www.springframework.org/schema/beans/spring-beans.xsd     
        http://www.springframework.org/schema/context     
        http://www.springframework.org/schema/context/spring-context.xsd">

    <bean id="bean1">
      ...
    </bean>
    <bean id="bean2">
      ...
    </bean>         

    <context:component-scan base-package="com.example" />
    <!-- Import your other configuration files too -->
    <import resource="other-configs.xml"/>
    <import resource="some-other-config.xml"/>

    <!-- View Resolver -->
    <bean 
        id="viewResolver" 
        class="org.springframework.web.servlet.view.UrlBasedViewResolver">
      <property 
          name="viewClass" 
          value="org.springframework.web.servlet.view.JstlView" />
      <property name="prefix" value="/WEB-INF/jsp/" />
      <property name="suffix" value=".jsp" />
    </bean>
</beans> 
```

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2016-02-26T20:25:41.917

对于一个简单的 Spring 应用程序，您不必`ContextLoaderListener`在`web.xml`; 您可以将所有 Spring 配置文件放入`<servlet>`：

```
<servlet>
    <servlet-name>hello</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <init-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>classpath:spring/mvc-core-config.xml, classpath:spring/business-config.xml</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
</servlet> 
```

对于一个更复杂的 Spring 应用程序，您`DispatcherServlet`定义了多个，您可以拥有由所有`DispatcherServlet`定义共享的公共 Spring 配置文件`ContextLoaderListener`：

```
<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>classpath:spring/common-config.xml</param-value>
</context-param>
<listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener>

<servlet>
    <servlet-name>mvc1</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <init-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>classpath:spring/mvc1-config.xml</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
</servlet>

<servlet>
    <servlet-name>mvc2</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <init-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>classpath:spring/mvc2-config.xmll</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
</servlet> 
```

请记住，为**根**应用程序上下文`ContextLoaderListener`执行实际的初始化工作。

 **我发现这篇文章很有帮助： [Spring MVC – Application Context vs Web Application Context](http://www.javabeat.net/spring-mvc-application-context/)

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2015-04-22T12:50:13.963

博客“ [ContextLoaderListener 的目的——Spring MVC](https://schoudari.wordpress.com/2012/07/23/purpose-of-contextloaderlistener-spring-mvc/) ”给出了很好的解释。

根据它，Application-Contexts 是分层的，因此 DispatcherSerlvet 的上下文成为 ContextLoaderListener 的上下文的子级。因此，控制器层中使用的技术（Struts 或 Spring MVC）可以独立于根上下文创建的 ContextLoaderListener。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2019-10-27T05:22:18.283

根上下文和子上下文 在进一步阅读之前，请理解——</p>

Spring 一次可以有多个上下文。其中之一将是根上下文，所有其他上下文将是子上下文。

所有子上下文都可以访问根上下文中定义的bean；但相反是不正确的。根上下文不能访问子上下文 bean。

应用上下文：

applicationContext.xml 是每个 Web 应用程序的根上下文配置。Spring 加载 applicationContext.xml 文件并为整个应用程序创建 ApplicationContext。每个 Web 应用程序只有一个应用程序上下文。如果您没有使用 contextConfigLocation 参数在 web.xml 中显式声明上下文配置文件名，Spring 将在 WEB-INF 文件夹下搜索 applicationContext.xml 并在找不到该文件时抛出 FileNotFoundException。

ContextLoaderListener 为根应用程序上下文执行实际的初始化工作。读取“contextConfigLocation”上下文参数并将其值传递给上下文实例，将其解析为可能的多个文件路径，这些路径可以用任意数量的逗号和空格分隔，例如“WEB-INF/applicationContext1.xml, WEB-INF/ applicationContext2.xml”。ContextLoaderListener 是可选的。在这里强调一点：您可以启动 Spring 应用程序而无需配置 ContextLoaderListener，只需使用 DispatcherServlet 的基本最小 web.xml。

DispatcherServlet DispatcherServlet 本质上是一个 Servlet（它扩展了 HttpServlet），其主要目的是处理与配置的 URL 模式匹配的传入 Web 请求。它接受传入的 URI 并找到控制器和视图的正确组合。所以它是前端控制器。

当您在 spring 配置中定义 DispatcherServlet 时，您使用 contextConfigLocation 属性提供一个 XML 文件，其中包含控制器类、视图映射等的条目。

WebApplicationContext 除了ApplicationContext 之外，一个Web 应用程序中还可以有多个WebApplicationContext。简单来说，每个 DispatcherServlet 关联单个 WebApplicationContext。xxx-servlet.xml 文件特定于 DispatcherServlet，Web 应用程序可以配置多个 DispatcherServlet 来处理请求。在这种情况下，每个 DispatcherServlet 都会配置一个单独的 xxx-servlet.xml。但是，applicationContext.xml 对于所有 servlet 配置文件都是通用的。默认情况下，Spring 会从你的 webapps WEB-INF 文件夹中加载名为“xxx-servlet.xml”的文件，其中 xxx 是 web.xml 中的 servlet 名称。如果要更改该文件名的名称或更改位置，请添加带有 contextConfigLocation 作为参数名称的 initi-param。

它们之间的比较和关系：

ContextLoaderListener 与 DispatcherServlet

ContextLoaderListener 创建根应用程序上下文。DispatcherServlet 条目为每个 servlet 条目创建一个子应用程序上下文。子上下文可以访问根上下文中定义的 bean。根上下文中的 bean 不能（直接）访问子上下文中的 bean。所有上下文都添加到 ServletContext。您可以使用 WebApplicationContextUtils 类访问根上下文。

看完Spring文档，理解如下：

a) 应用程序上下文是分层的，WebApplicationContexts 也是如此。请参阅此处的文档。

b) ContextLoaderListener creates a root web-application-context for the web-application and puts it in the ServletContext. This context can be used to load and unload the spring-managed beans ir-respective of what technology is being used in the controller layer(Struts or Spring MVC).

c) DispatcherServlet creates its own WebApplicationContext and the handlers/controllers/view-resolvers are managed by this context.

d) When ContextLoaderListener is used in tandem with DispatcherServlet, a root web-application-context is created first as said earlier and a child-context is also created by DispatcherSerlvet and is attached to the root application-context. Refer documentation here.

当我们使用 Spring MVC 并且也在服务层中使用 Spring 时，我们提供了两个应用程序上下文。第一个使用 ContextLoaderListener 配置，另一个使用 DispatcherServlet

通常，您将在 DispatcherServlet 上下文中定义所有与 MVC 相关的 bean（控制器和视图等），并通过 ContextLoaderListener 在根上下文中定义所有横切 bean，例如安全性、事务、服务等。

有关更多详细信息，请参阅此内容： [https ://siddharthnawani.blogspot.com/2019/10/contextloaderlistener-vs.html](https://siddharthnawani.blogspot.com/2019/10/contextloaderlistener-vs.html)

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2016-06-30T11:41:48.763

ContextLoaderListner 是一个 Servlet 监听器，它将所有不同的配置文件（服务层配置、持久层配置等）加载到单个 spring 应用程序上下文中。

这有助于跨多个 XML 文件拆分 spring 配置。

加载上下文文件后，Spring 会根据 bean 定义创建一个 WebApplicationContext 对象，并将其存储在 Web 应用程序的 ServletContext 中。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2016-08-09T18:51:42.013

基本上，您可以使用 ContextLoaderListner 隔离您的根应用程序上下文和 Web 应用程序上下文。

使用上下文参数映射的配置文件将作为根应用程序上下文配置。使用调度程序 servlet 映射的配置文件的行为类似于 Web 应用程序上下文。

在任何 Web 应用程序中，我们可能有多个调度程序 servlet，因此有多个 Web 应用程序上下文。

但是在任何 Web 应用程序中，我们可能只有一个与所有 Web 应用程序上下文共享的根应用程序上下文。

我们应该在根应用程序上下文中定义我们的公共服务、实体、方面等。控制器、拦截器等位于相关的 Web 应用程序上下文中。

示例 web.xml 是

```
<!-- language: xml -->
<web-app>

    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>
    <context-param>
        <param-name>contextClass</param-name>
        <param-value>org.springframework.web.context.support.AnnotationConfigWebApplicationContext</param-value>
    </context-param>
    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>example.config.AppConfig</param-value>
    </context-param>
    <servlet>
        <servlet-name>restEntryPoint</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <init-param>
            <param-name>contextClass</param-name>
            <param-value>org.springframework.web.context.support.AnnotationConfigWebApplicationContext</param-value>
        </init-param>
        <init-param>
            <param-name>contextConfigLocation</param-name>
            <param-value>example.config.RestConfig</param-value>
        </init-param>       
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>restEntryPoint</servlet-name>
        <url-pattern>/rest/*</url-pattern>
    </servlet-mapping>
    <servlet>
        <servlet-name>webEntryPoint</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <init-param>
            <param-name>contextClass</param-name>
            <param-value>org.springframework.web.context.support.AnnotationConfigWebApplicationContext</param-value>
        </init-param>
        <init-param>
            <param-name>contextConfigLocation</param-name>
            <param-value>example.config.WebConfig</param-value>
        </init-param>       
        <load-on-startup>1</load-on-startup>
    </servlet>  
    <servlet-mapping>
        <servlet-name>webEntryPoint</servlet-name>
        <url-pattern>/</url-pattern>
    </servlet-mapping>

</web-app> 
```

这里配置类 example.config.AppConfig 可用于在根应用程序上下文中配置服务、实体、方面等，这些应用程序上下文将与所有其他 Web 应用程序上下文共享（例如，这里我们有两个 Web 应用程序上下文配置类 RestConfig 和 WebConfig）

PS：这里 ContextLoaderListener 是完全可选的。如果我们这里不提 web.xml 中的 ContextLoaderListener，AppConfig 就不起作用了。在这种情况下，我们需要在 WebConfig 和 Rest Config 中配置我们所有的服务和实体。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2017-10-21T19:05:57.440

[![在此处输入图像描述](../Images/99cdf57bbbe925113629ef9874f4ced8.png)](https://i.stack.imgur.com/hiv9t.gif)这个 Bootstrap 监听器是用来启动和关闭 Spring 的**根**WebApplicationContext。由于 Web 应用程序可以有多个调度程序 servlet，并且每个都有自己的应用程序上下文，其中包含控制器、视图解析器、处理程序映射等但是您可能希望在根应用程序上下文中有服务 bean、DAO bean 并希望在所有子应用程序上下文中使用（由调度程序 servlet 创建的应用程序上下文）。

第二次使用这个监听器是当你想使用 spring security 时。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2016-05-25T16:55:53.170

当您想将 Servlet 文件放在您的自定义位置或使用自定义名称，而不是默认命名约定`[servletname]-servlet.xml`和路径下`Web-INF/`时，您可以使用`ContextLoaderListener`.

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2012-08-05T09:32:08.267

它会给你一个钩子点来放置一些你希望在 Web 应用程序部署时执行的代码

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2015-11-12T07:01:54.223

侦听器类 - 侦听事件（例如，服务器启动/关闭）

ContextLoaderListener -

1.  在服务器启动/关闭期间监听
2.  将 Spring 配置文件作为输入并根据配置创建 bean 并使其准备就绪（在关闭期间销毁 bean）
3.  可以在 web.xml 中像这样提供配置文件

    ```
    <param-name>contextConfigLocation</param-name>  
    <param-value>/WEB-INF/dispatcher-servlet.xml</param-value> 
    ```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2016-08-10T14:50:09.437

在 Spring 框架的上下文中，**ContextLoaderListener**的目的是加载应用程序中的其他 bean，例如驱动应用程序后端的中间层和数据层组件。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2012-08-05T09:40:43.973

你的理解是正确的。我想知道为什么您在 ContextLoaderListener 中看不到任何优势。例如，您需要建立一个会话工厂（来管理数据库）。此操作可能需要一些时间，因此最好在启动时进行。当然，您可以使用 init servlet 或其他方式来完成，但 Spring 方法的优点是您无需编写代码即可进行配置。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2014-05-30T07:15:10.693

如果我们在没有 ContextLoaderListener 的情况下编写 web.xml，那么我们就不能在 spring security 中使用 customAuthenticationProvider 来进行验证。因为 DispatcherServelet 是 ContextLoaderListener 的子上下文，所以 customAuthenticationProvider 是 parentContext 的一部分，即 ContextLoaderListener。所以父上下文不能有子上下文的依赖。因此最好在 contextparam 中编写 spring-context.xml 而不是在 initparam 中编写它。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2015-06-03T00:16:34.803

我相信当您想要拥有多个配置文件或者您拥有**xyz.xml**文件而不是 applicationcontext.xml 时，它的真正用途就出现了，例如

`<context-param><param-name>contextConfigLocation</param-name> <param-value>/WEB-INF/training-service.xml, /WEB-INF/training-data.xml</param-value> </context-param>`

ContextLoaderListener 的另一种方法是使用 ContextLoaderServlet，如下所示

`<servlet> <servlet-name>context</servlet-name> <servlet-class>org.springframework.web.context.ContextLoaderServlet</servlet-class> <load-on-startup>1</load-on-startup> </servlet>`***

# android - 如何将变量传递给broadCastReceiver

> ID：11815354
> 
> 赞同：2
> 
> 时间：2012-08-05T09:33:26.533
> 
> 标签：android, eclipse, broadcastreceiver, android-manifest

我正在做我的最后一个项目，请帮助我，我必须在下周末之前提交它我正在开发一个基于上下文过滤来电的应用程序，首先我想接收来电号码并传递给一个活动在数据库上搜索数字并返回结果，我不知道如何从广播接收器获取变量并再次传递给它，我的意思是获取并将变量传递给只有 1 个广播接收器所以我决定使用 2 个广播接收器，其中一个接收传入的数字并传递给我的主类和我的 mainCalss 在数据库中搜索传入号码并将结果传递给 filterCall 广播类，但我遇到了问题。请帮助我，tHX

这是我的 callActivity 广播类，它接收传入的号码并传递给我的 Mainclass

```
 public class CallblockingActivity extends  BroadcastReceiver {

          Context context = null;
          private static final String TAG = "Phone call";
          private ITelephony telephonyService;
          String incommingNumber;
           Intent intent;
           String n;

        @Override

          public void onReceive(Context context, Intent intent) {
                   Log.v(TAG, "Receving....");
                   TelephonyManager telephony = (TelephonyManager) 
                   context.getSystemService(Context.TELEPHONY_SERVICE);  
                     try {
                         Class c = Class.forName(telephony.getClass().getName());
                         Method m = c.getDeclaredMethod("getITelephony");
                         m.setAccessible(true);
                         telephonyService = (ITelephony) m.invoke(telephony);           
                         Bundle b = intent.getExtras();
                         incommingNumber = b.getString(TelephonyManager.EXTRA_INCOMING_NUMBER);
                         Log.v(TAG, incommingNumber);
                         Intent i = new Intent(context, Mainclass.class);
                         i.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
                         i.putExtra("n",incommingNumber);
                         context.startActivity(i);
                         Log.v(TAG, incommingNumber);

                     }
                     catch (Exception e) {
                      e.printStackTrace();
                     }

            }

  } 
```

这是我的 mainClass，它从 CallBlockingActivity 广播类中获取传入号码并在数据库中搜索并返回一个布尔值

```
 public class Mainclass  extends Activity{
Context context = null;
Boolean isit= false;
String TAG;

   public void onCreate(Bundle savedInstanceState) {
        Log.v(TAG,"onCreate");
        super.onCreate(savedInstanceState);
       setContentView(R.layout.main);

       Intent b= getIntent();
        String incomiingnumber1= b.getStringExtra("n");
        Log.v(TAG,incomiingnumber1 + "incomenuber from broadcast receiver");
        DataBaseBON searching= new DataBaseBON(Mainclass.this);
       searching.open();
        isit= searching.searchnumber(incomiingnumber1);
        String ss= new Boolean(isit).toString();       
       Toast.makeText(getApplicationContext(), ss, Toast.LENGTH_SHORT);
       Log.v(TAG, ss+ "yeeeeeeees it is it");
       searching.close();

      //  I think My problem is here
       Intent in = new Intent(context, FilterCall.class);
       Bundle bb = new Bundle();
       bb.putString("keyvalue", "ss");
       in.putExtras(bb);
       startActivity(in);

   }

} 
```

这是我的过滤器广播类，它拒绝来电或将手机设置为静音模式。

```
public class FilterCall  extends BroadcastReceiver {

private ITelephony telephonyService;
String TAG;
@Override
public void onReceive(Context context, Intent intent) {
    // TODO Auto-generated method stub

    Log.v(TAG, "Filtering...");
    TelephonyManager telephony = (TelephonyManager) 
    context.getSystemService(Context.TELEPHONY_SERVICE);  
      try {
         Class c = Class.forName(telephony.getClass().getName());
         Method m = c.getDeclaredMethod("getITelephony");
          m.setAccessible(true);
          telephonyService = (ITelephony) m.invoke(telephony);          

          String result = intent.getStringExtra("keyvalue");

                if (result=="true") {
                try {
                    telephonyService.silenceRinger();
                    telephonyService.endCall();
                } catch (RemoteException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }

           }

      }
      catch (Exception e) {
       e.printStackTrace();
      }

 }

} 
```

我面临这个问题：

```
 08-05 16:58:50.468: W/IInputConnectionWrapper(1500): showStatusIcon on inactive   InputConnection
    08-05 16:58:50.958: V/(1500): Filtering...
  08-05 16:58:51.118: V/Phone call(1500): Receving....
 08-05 16:58:51.118: V/Phone call(1500): +60172214866
 08-05 16:58:51.138: V/Phone call(1500): +60172214866
   08-05 16:58:51.168: V/(1500): onCreate
 08-05 16:58:51.248: V/(1500): +60172214866incomenuber from broadcast receiver
 08-05 16:58:51.278: I/Database(1500): SQLiteDatabase open path:  /data/data/com.vahid.davoudi/databases/databasebon.db
 08-05 16:58:51.338: V/(1500): trueyeeeeeeees it is it
   08-05 16:58:51.338: I/Database(1500): SQLiteDatabase close path:  /data/data/com.vahid.davoudi/databases/databasebon.db
 08-05 16:58:51.348: A/dalvikvm(1500): Exception!!! threadid=1: thread exiting with         uncaught exception (group=0x4001d858)
 08-05 16:58:51.388: E/AndroidRuntime(1500): FATAL EXCEPTION: main
 08-05 16:58:51.388: E/AndroidRuntime(1500): java.lang.RuntimeException: Unable to start  activity ComponentInfo{com.vahid.davoudi/com.vahid.davoudi.Mainclass}:  java.lang.NullPointerException
   08-05 16:58:51.388: E/AndroidRuntime(1500):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
 08-05 16:58:51.388: E/AndroidRuntime(1500):    at  android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
  08-05 16:58:51.388: E/AndroidRuntime(1500):   at android.app.ActivityThread.access$2300(ActivityThread.java:125)
 08-05 16:58:51.388: E/AndroidRuntime(1500):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
  08-05 16:58:51.388: E/AndroidRuntime(1500):   at android.os.Handler.dispatchMessage(Handler.java:99)
   08-05 16:58:51.388: E/AndroidRuntime(1500):  at android.os.Looper.loop(Looper.java:123)
  08-05 16:58:51.388: E/AndroidRuntime(1500):   at android.app.ActivityThread.main(ActivityThread.java:4627)
  08-05 16:58:51.388: E/AndroidRuntime(1500):   at java.lang.reflect.Method.invokeNative(Native Method)
  08-05 16:58:51.388: E/AndroidRuntime(1500):   at java.lang.reflect.Method.invoke(Method.java:521)
  08-05 16:58:51.388: E/AndroidRuntime(1500):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:858)
  08-05 16:58:51.388: E/AndroidRuntime(1500):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)
  08-05 16:58:51.388: E/AndroidRuntime(1500):   at dalvik.system.NativeStart.main(Native Method)
  08-05 16:58:51.388: E/AndroidRuntime(1500): Caused by: java.lang.NullPointerException
  08-05 16:58:51.388: E/AndroidRuntime(1500):   at android.content.ComponentName.<init>(ComponentName.java:75)
      08-05 16:58:51.388: E/AndroidRuntime(1500):   at android.content.Intent.<init>(Intent.java:2690)
  08-05 16:58:51.388: E/AndroidRuntime(1500):   at com.vahid.davoudi.Mainclass.onCreate(Mainclass.java:39)
 08-05 16:58:51.388: E/AndroidRuntime(1500):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
  08-05 16:58:51.388: E/AndroidRuntime(1500):   at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
   08-05 16:58:51.388: E/AndroidRuntime(1500):  ... 11 more
  08-05 17:03:51.408: W/PrintK(1500): m.vahid.davoudi(1500) sends SIGKILL to        m.vahid.davoudi(1500) 
```

这是我的清单

```
 <?xml version="1.0" encoding="utf-8"?>
 <manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.vahid.davoudi"
android:versionCode="1"
android:versionName="1.0" >

<uses-permission android:name="android.permission.MODIFY_PHONE_STATE" />
<uses-permission android:name="android.permission.CALL_PHONE" />
<uses-permission android:name="android.permission.READ_PHONE_STATE" />
<uses-sdk android:minSdkVersion="8" />

 <application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >
    <activity
        android:name=".Mainclass"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>

    <activity
        android:name=".CallBlockingOrginalActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity
        android:name=".ViewDatabase"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.VIEWDB" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>

    <receiver  android:name=".CallblockingActivity">
        <intent-filter   >
            <action android:name="android.intent.action.PHONE_STATE" />
        </intent-filter>
    </receiver>

    <receiver  android:name=".FilterCall">
        <intent-filter  android:priority="100" >
            <action android:name="android.intent.action.PHONE_STATE" />
        </intent-filter>
    </receiver>
  </application>

 </manifest> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T09:50:00.153

您在 Mainclass.java 的第 39 行有一个 nullPointerException

"b" 可能返回 null

```
Intent b = getIntent(); 
```

添加

```
if(b != null) {
    //code involving the use of b
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T10:02:40.837

对你的问题的一些建议，

1）您不需要在广播接收器中添加那么多代码来获取传入号码。而您可以直接使用下面的代码来获得它。

```
String number = intent.getStringExtra(TelephonyManager.EXTRA_INCOMING_NUMBER); 
```

2）您不需要启动活动来搜索数据库，您可以直接从Receivers on receive方法中搜索数据库中的这个数字（希望您的数据库不是太大，可能需要更多时间导致ANR）

3）您只能在第一个接收器中直接执行您在另一个接收器中所做的事情。它将删除大量代码并使其成为一种好方法。

对于您的代码中的本地问题，您正在使用以下代码发送广播消息

```
//  I think My problem is here
       Intent in = new Intent(context, FilterCall.class);
       Bundle bb = new Bundle();
       bb.putString("keyvalue", "ss");
       in.putExtras(bb);
       startActivity(in); 
```

但是您正在调用 startActivity 而不是 sendBroadcast 方法，因为 FilterCall 是广播接收器。

你应该做这样的事情

```
 Intent in = new Intent("Intent Action which your receiver is listening to");
       in.putExtras("keyvalue", "ss");
      sendBroadcast(in); 
```

# linux - 为什么这里是 sys time 0？

> ID：11815356
> 
> 赞同：3
> 
> 时间：2012-08-05T09:33:29.497
> 
> 标签：linux, time, kernel, sleep, context-switch

当我这样做时`$(time sleep 1)`，我得到了：

```
real    0m1.001s
user    0m0.000s
sys     0m0.000s 
```

我不确定为什么`sys`时间是 0，所以`nanosleep`是从用户空间调用的？

另外，实时是否等于上下文切换时间+实际睡眠时间（1s）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-05T09:39:21.007

因为进程在睡眠时没有执行内核空间代码。内核正在执行其他进程，或者空闲，这两者都不受睡眠进程的影响。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-05T09:46:54.937

查看 time的[手册页](http://unixhelp.ed.ac.uk/CGI/man-cgi?time)，我们可以看到，

1.  **real**：程序终止的时间长度，计算方式为：

    > `*(time at end of program - time at star of program)*`

2.  **user**：由 times(2) 返回的 struct tms 中 tms_utime 和 tms_cutime 值的总和

3.  **sys**：times(2) 返回的 struct tms 中 tms_stime 和 tms_cstime 值的总和

所以你得到有效的结果意味着你的程序持续了 1 秒，在那 1 秒内它使用 0 秒作为用户时间，0 秒作为系统时间。这正是我们应该从程序中得到的。

当一个程序处于休眠状态时，它只是意味着内核不会安排它进行处理，它甚至不会运行 no-ops，它只是不会运行，因此不会消耗系统时间。

# c# - 普通类型转换与指针转换

> ID：11815358
> 
> 赞同：0
> 
> 时间：2012-08-05T09:33:38.257
> 
> 标签：c#, type-conversion

像这样进行转换有什么好处吗

```
int i = 1024;
byte b = (byte)i; 
```

在做这个

```
int i = 1024;
byte b = *((byte*) &i); 
```

我的意思是，如果你想使用第二种方法，你必须使用不安全的代码，这意味着 JIT 不能按照它的意愿优化它（我认为它在内部使用第二种方法）等等。

有人可以解释我何时以及为什么使用第一种/第二种方法吗？

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T09:36:24.363

这两个不是等价的。

第一个是简单的语言定义演员表。其结果定义明确：第一个返回 8 个最低有效位。

第二个实际上是重新解释演员。它返回内存中的前 8 位。这在典型的小端系统上恰好是相同的，但在大端系统上却不同。

在极少数情况下，重新解释转换很有用，但这不是其中之一。您应该始终使用普通类型转换，除非您遇到的问题只能通过重新解释类型转换来解决。

# java - Java艺术与科学第4章练习13

> ID：11815361
> 
> 赞同：0
> 
> 时间：2012-08-05T09:34:51.573
> 
> 标签：java

应该运行一个打印最大和第二大的程序，但在获取第二个值时遇到问题。认为我的布尔表达式是错误的，因为我一直将 0 作为 tempSecond。你能帮我吗？

```
/*
 * File: AddExamIntegers.java
 * --------------------
 * This program takes a list of integers until Sentinel, 
 * then prints the largest and second largest.
 */

import acm.program.*;

public class FindLargest extends ConsoleProgram {

    public void run() {
        println("This program takes a list of integers and then lists the largest and second largest");
        println("");
        println("Enter positive numbers using " + SENTINEL);
        println("to signal the end of the list");

        int tempHigh = 0;
        int tempSecond = 0;

        while (true)    {
            int value = readInt(": ");
            if (value == SENTINEL) break;
                if (tempHigh < value) {
                    tempHigh = value;
                    }
                if ((tempSecond < value) && (tempSecond > tempHigh)) {
                    tempSecond = value;
                    }
        }
        println("The largest value is " + tempHigh);
        println("The second largest value is " + tempSecond);
    }

    private static final int SENTINEL = 0;

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T09:38:55.453

你后者的第二部分 if 永远不会是真的：`tempSecond > tempHigh`

相反，请执行以下操作：

```
 if(tempHigh < value)
        {
            tempHigh = value;
        }
        else if(tempSecond < value)
        {
            tempSecond = value;
        } 
```

# testing - 编码的 UI 和测试 Web 应用程序的旧方法

> ID：11815362
> 
> 赞同：1
> 
> 时间：2012-08-05T09:34:58.297
> 
> 标签：testing, automated-tests, ui-automation, coded-ui-tests, browser-automation

我的项目曾经使用 Microsoft.mshtml 和 SHDocVw.dll 来自动化我们的 Web UI 测试。然后我听说了 CodedUI 测试。所以问题是：

*   这是否意味着我可以放弃 Microsoft.mshtml 和 SHDocVw.dll？
*   CodedUI 与 Microsoft.mshtml 和 SHDocVw.dll 之间有什么联系/区别吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T20:05:55.140

您现有的自动化工具是否有一个内部带有浏览器的应用程序？这就是我之前看到的 SHDocVw.dll 的使用方式。测试将能够与网页的 DOM 交互，并且可以通过这种方式完成很多工作。当然，您仅限于 IE，我相信 Coded UI 也是如此。

我记得编码的 UI 能够测试应用程序和 IE。因此，您应该能够使用 Coded UI 来针对您的旧测试应用程序进行测试，但这并没有什么意义。

不幸的是，我认为如果您迁移到 Coded UI，您将丢失现有的测试代码，但您将拥有一个更大的社区来运行想法等。

我不认为 Coded UI 使用 SHDocVw.dll，因为它与 IE 本身交互，而不是与其中具有“浏览器控件”的表单交互。

如果您不需要跨浏览器覆盖并且您不介意重写现有测试，那么在我看来，CodedUI 将是摆脱自定义解决方案的不错选择。

# ios - adwhril 或 mobclix 的 ios 智能横幅广告

> ID：11815364
> 
> 赞同：0
> 
> 时间：2012-08-05T09:35:10.460
> 
> 标签：ios, iad, adwhirl, mobclix

我正在开发一个免费的应用程序，我目前在其中集成了 iAd。为了最大化我的收入，我想集成 mobclix 或 adwhril，我想集成 iAds 之类的智能横幅，但这两种服务我都找不到智能广告选项。

有人可以帮助我吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T20:46:33.777

考虑使用[AdMob 中介](http://support.google.com/admob/bin/answer.py?hl=en&answer=2413211)而不是 AdWhirl。AdMob 中介支持所有类型的广告格式（包括智能横幅）；AdWhirl 仅支持 320x50 横幅。

# html - 如何解析网页链接的规范 URL

> ID：11815365
> 
> 赞同：0
> 
> 时间：2012-08-05T09:35:13.947
> 
> 标签：html, groovy, url-routing

**背景资料：**

我正在尝试在 Groovy 中构建一个非常简单的网络爬虫。它会在给定一个 URL 地址的情况下下载相关的网页以及从该页面链接的所有页面。

在 HTML 代码中的链接中，有时会缩写 URL 地址。我想到了三种不同的 URL 类型：

*   绝对 URL 地址（例如[http://www.food.com/fruit/orange.html](http://www.food.com/fruit/orange.html)）
*   与 Web 根相关的绝对 URL 地址（例如 /fruit/orange.html）
*   相对URL地址，与当前网页所在目录相关（如../vegetables/carrot.html）

然而，我知道 Web 应用程序可以实现任意 URL 路由，因此 URL 地址可能根本不反映文件系统的结构。

**我的问题：**

当用户单击网页中的链接时，Web 浏览器如何知道要请求哪个 URL？或者，当我的爬虫在网页中找到链接时，它如何知道要下载哪个网页？

任何有关可用 Groovy 库来解析 URL 的提示也将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T09:46:40.360

浏览器根据 URL 规范解析相对 URL（包括相对于服务器根目录的 URL，例如 /fruit/orange.html），请参阅 Internet-standard [STD 66](http://www.rfc-editor.org/rfc/std/std66.txt)，目前是 RFC 3986。除了一般考虑之外，它们还需要考虑帐户`<base href=...>`标签（如果存在）。

这与文件系统无关。如果 URL 碰巧映射到服务器中的文件，那是服务器内部的。

规范 URL 有所不同。使用带有 的`link`元素`rel=canonical`，页面可以指定其规范 URL，例如应该在搜索引擎中使用。参见例如[http://googlewebmastercentral.blogspot.fi/2009/02/specify-your-canonical.html](http://googlewebmastercentral.blogspot.fi/2009/02/specify-your-canonical.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T13:53:51.443

标准库中提供的 java.net.URI 类提供了通过 URI#resolve(String) 方法解析相对引用的方法。

请参阅[javadoc 文档](http://docs.oracle.com/javase/1.5.0/docs/api/java/net/URI.html#resolve%28java.lang.String%29)。

# asp.net - ASP.Net 嵌套中继器逻辑地狱

> ID：11815367
> 
> 赞同：2
> 
> 时间：2012-08-05T09:35:51.403
> 
> 标签：asp.net, sql-server, nested-repeater

寻求有关我遇到的三重嵌套中继器逻辑问题的帮助。

**背景**
我正在构建一个时间表系统，用于预订房间和从 SQL Server 数据库中提取数据的资源。

**表结构**

```
Table 1 - tblrooms  
room_id (INT) PK  
room_name (varchar(50))  
room_resource (INT)  

Table 2 - tblperiods  
period_id (INT) PK  
period_time_start (DATETIME)  
period_time_end (DATETIME)  
period_name (nvarchar(50))  

Table 3 - tblbookings  
booking_id (INT) PK  
period_id (INT)  
room_id (INT)  
booking_status (INT)  
booking_date (DATETIME)  
booking_subject (nvarchar(50)) 
```

问题我大部分情况下都让中继器根据需要提取数据，但是只有第一列被填充，我真的很难弄清楚如何提取预订数据并根据需要构建时间表。**（请参阅我已经开始工作的附件截图）**

**ASPX 页面代码**

```
<asp:Repeater ID="drPeriods" runat="server" OnItemDataBound="drPeriods_OnItemDataBound">

        <HeaderTemplate>
        <table class="table table-striped table-bordered table-condensed">
            <tr>
                <th style="width:16.66%"><asp:Label ID="lblResourceHeader" runat="server" /></th>
        </HeaderTemplate>

         <ItemTemplate>

                <th style="width:16.66%"><asp:Label ID="lblPeriod" runat="server" Text='<%# Eval("period_name") %>' /> - <asp:Label ID="lblPeriodStart" runat="server" Text='<%# Eval("period_time_start") %>' /> to <asp:Label ID="lblPeriodEnd" runat="server" Text='<%# Eval("period_time_end") %>' /></th>

         </ItemTemplate>

         <FooterTemplate>
             </tr> 

             <asp:Repeater ID="drResources" runat="server" OnItemDataBound="drResources_OnItemDataBound">

                    <ItemTemplate>

                    <tr>
                        <td height="50">
                            <asp:Label ID="lblResource" runat="server" Text='<%# Eval("room_name") %>' />
                            <br /><asp:Label ID="lblResourceDetails" runat="server" />
                        </td>
                        <asp:Label ID="lblFreeBooking" runat="server" Visible="false" />

                        <asp:Repeater ID="drBookings" runat="server" OnItemDataBound="drBookings_OnItemDataBound">

                            <ItemTemplate>

                                <td height="50">
                                    <asp:Label ID="lblCellContent" runat="server" />
                                </td>

                            </ItemTemplate>

                        </asp:Repeater>

                    </tr>

                    </ItemTemplate>

                </asp:Repeater>

            </table>

         </FooterTemplate>

     </asp:Repeater> 
```

**代码背后**

```
Namespace Staff

Public Class Rb
    Inherits System.Web.UI.Page
    Private _periodId As Integer

    Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load

        If Not IsPostBack Then

            txtDate.Text = Request.QueryString("d")

            'check for weekend dates, show message if it is.
            Dim iWeekday As Integer = Weekday(Request.QueryString("d"))

            If iWeekday = 1 Or iWeekday = 7 Then

                lblMsg.Text = "<div class='alert alert-info alert-block'><h4 class='alert-heading'><i class='icon-warning-sign'></i>&nbsp;It's the weekend.</h4><p>The date you have choosen is a weekend, resources cannot be booked on weekends.</p></div>"
                lblMsg.Visible = True
                drPeriods.Visible = False

            Else

                Dim objConnection As SqlConnection
                Dim objCommand As SqlCommand
                Dim objDataReader As SqlDataReader

                objConnection = New SqlConnection(System.Configuration.ConfigurationManager.ConnectionStrings("OPSDConnectionString").ConnectionString)

                'Get Periods
                objCommand = New SqlCommand("SELECT period_id, CONVERT(char(5), period_time_start, 108) AS period_time_start, CONVERT(char(5), period_time_end, 108) AS period_time_end, period_name FROM tblrb_periods", objConnection)

                Try
                    objConnection.Open()
                    objDataReader = objCommand.ExecuteReader()

                    If objDataReader.HasRows Then

                        drPeriods.DataSource = objDataReader
                        drPeriods.DataBind()
                        objDataReader.Close()

                    Else

                        drPeriods.Visible = False
                        lblMsg.Text = "<div class='alert alert-error alert-block'><h4 class='alert-heading'><i class='icon-warning-sign'></i>&nbsp;Error!</h4><p>Periods have not yet been setup, please set these up by selecting the periods tab above, if you cannot see this tab please ask the helpdesk administrator to set these up for you.</p></div>"
                        lblMsg.Visible = True
                        objDataReader.Close()

                    End If

                Catch ex As Exception

                    'Inform of the error
                    Elmah.ErrorSignal.FromCurrentContext().Raise(ex)

                Finally
                    objCommand.Dispose()
                    objConnection.Close()
                    objConnection.Dispose()

                End Try

            End If

        End If

    End Sub

    Protected Sub drPeriods_OnItemDataBound(sender As Object, e As System.Web.UI.WebControls.RepeaterItemEventArgs) Handles drPeriods.ItemDataBound

        If e.Item.ItemType = ListItemType.Item Or e.Item.ItemType = ListItemType.AlternatingItem Then

            _periodId = e.Item.DataItem("period_id")

        End If

        If e.Item.ItemType = ListItemType.Header Then

            Dim lblResourceHeader As Label = drPeriods.Controls(0).Controls(0).FindControl("lblResourceHeader")
            Dim layoutView As Integer = Request.QueryString("v")
            Select Case layoutView
                Case 1 ' Rooms
                    lblResourceHeader.Text = "Rooms"
                Case 2 ' Resources
                    lblResourceHeader.Text = "Resources"
                Case 3 ' Both
                    lblResourceHeader.Text = "Rooms &amp; Resources"
                Case Else
                    lblResourceHeader.Text = "Rooms &amp; Resources"
            End Select

        End If

        If e.Item.ItemType = ListItemType.Footer Then

            Dim objConnection As SqlConnection
            Dim objCommand As SqlCommand
            Dim objDataReader As SqlDataReader

            'find repeater in the footer of drPeriods (repeater)
            Dim drResources As Repeater = drPeriods.Controls(drPeriods.Controls.Count - 1).Controls(0).FindControl("drResources")
            Dim layoutView As Integer = Request.QueryString("v")

            'Get Rooms
            objConnection = New SqlConnection(System.Configuration.ConfigurationManager.ConnectionStrings("OPSDConnectionString").ConnectionString)

            Select Case layoutView
                Case 1 ' Rooms
                    objCommand = New SqlCommand("SELECT * FROM tblrb_rooms WHERE room_resource = 1 ORDER BY room_name", objConnection)
                Case 2 ' Resources
                    objCommand = New SqlCommand("SELECT * FROM tblrb_rooms WHERE room_resource = 2 ORDER BY room_name", objConnection)
                Case 3 ' Both
                    objCommand = New SqlCommand("SELECT * FROM tblrb_rooms ORDER BY room_name", objConnection)
                Case Else
                    objCommand = New SqlCommand("SELECT * FROM tblrb_rooms ORDER BY room_name", objConnection)
            End Select

            Try
                objConnection.Open()
                objDataReader = objCommand.ExecuteReader()

                drResources.DataSource = objDataReader
                drResources.DataBind()
                objDataReader.Close()

            Catch ex As Exception

                'Inform of the error
                Elmah.ErrorSignal.FromCurrentContext().Raise(ex)

            Finally
                objCommand.Dispose()
                objConnection.Close()
                objConnection.Dispose()

            End Try

        End If

    End Sub

    Protected Sub drResources_OnItemDataBound(sender As Object, e As System.Web.UI.WebControls.RepeaterItemEventArgs)

        If e.Item.ItemType = ListItemType.Item Or e.Item.ItemType = ListItemType.AlternatingItem Then

            Dim lblResourceDetails As Label = e.Item.FindControl("lblResourceDetails")
            If e.Item.DataItem("room_resource") <> 2 Then
                lblResourceDetails.Text = "[ <a href='#' class='withajaxpopover' title='Room Details' data-load='resourceManagerViewDetails.aspx?id=" & e.Item.DataItem("room_id") & "'>View Room Details</a> ]"
            End If

            Dim objConnection As SqlConnection
            Dim objCommand As SqlCommand
            Dim objDataReader As SqlDataReader
            Dim drBookings As Repeater = e.Item.FindControl("drBookings")
            Dim lblFreeBooking As Label = e.Item.FindControl("lblFreeBooking")

            'Get Bookings
            objConnection = New SqlConnection(System.Configuration.ConfigurationManager.ConnectionStrings("OPSDConnectionString").ConnectionString)
            objCommand = New SqlCommand("SELECT tblrb_bookings.booking_status, tblrb_bookings.booking_subject, tblrb_bookings.booking_notes FROM tblrb_bookings WHERE (tblrb_bookings.room_id = @room_id) AND (tblrb_bookings.booking_date = @booking_date) AND (tblrb_bookings.period_id = @period_id)", objConnection)

            objCommand.Parameters.Add("@room_id", SqlDbType.Int, 10).Value = e.Item.DataItem("room_id")
            objCommand.Parameters.Add("@period_id", SqlDbType.Int, 10).Value = _periodId
            objCommand.Parameters.Add("@booking_date", SqlDbType.DateTime).Value = Request.QueryString("d")

            Try
                objConnection.Open()
                objDataReader = objCommand.ExecuteReader()

                If objDataReader.HasRows Then

                    drBookings.DataSource = objDataReader
                    drBookings.DataBind()
                    objDataReader.Close()

                Else

                    'free period
                    lblFreeBooking.Text = "<td height='50'><div class='alert alert-block alert-success'><h4 class='alert-heading'><i class='icon-ok'></i>&nbsp;Free.</h4><p><a href='#'>Click here to book this resource.</a></p></div></td>"
                    lblFreeBooking.Visible = True

                End If

            Catch ex As Exception

                'Inform of the error
                Elmah.ErrorSignal.FromCurrentContext().Raise(ex)

            Finally
                objCommand.Dispose()
                objConnection.Close()
                objConnection.Dispose()

            End Try

        End If

    End Sub

    Protected Sub drBookings_OnItemDataBound(sender As Object, e As System.Web.UI.WebControls.RepeaterItemEventArgs)

        Dim lblCellContent As Label = e.Item.FindControl("lblCellContent")

        Select Case e.Item.DataItem("booking_status")
            Case 1
                'timetabled
                lblCellContent.Text = "<div class='alert alert-block alert-error'><h4 class='alert-heading'><i class='icon-warning-sign'></i>&nbsp;Timetabled.</h4><p>" & e.Item.DataItem("booking_subject") & "</p></div>"

            Case 2
                'user booked
                lblCellContent.Text = "<div class='alert alert-block'><h4 class='alert-heading'><i class='icon-warning-sign'></i>&nbsp;Booked.</h4><p>" & e.Item.DataItem("booking_subject") & ".</p></div>"

        End Select

    End Sub

    Protected Sub btnDateSelect_Click(sender As Object, e As System.EventArgs) Handles btnDateSelect.Click

        'quick reload of page
        Response.Redirect("resourceManager.aspx?v=" & Request.QueryString("v") & "&d=" & txtDate.Text)

    End Sub

End Class End Namespace 
```

任何人都可以帮助我如何获得所需的布局，以便在构建时间表时，房间和时段包含相应列中每个单元格的正确预订数据。

提前感谢您提供的任何指示，我花了 3 天时间在这上面，我可以用一双新鲜的眼睛来做 :-)

问候，

奥齐

![中继器数据问题](../Images/7749d2d4f240a599bfdde2826f1ce093.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T18:45:42.867

首先，我认为您使控制方式过于复杂。如果您要使用 LINQ 或 EF 进行数据库访问，则可以使用 2 个嵌套中继器来执行此操作，并且不需要复杂的代码。但是，您可以先将查询简化为以下内容：

```
SELECT *
FROM tblperiods p
    CROSS JOIN tblrooms r
    LEFT JOIN tblbookings b ON p.period_id = b.period_id AND r.room_id = b.room_id AND b.booking_date = '2012-08-01' 
```

这将为您提供足够的信息，以便在给定日期的单个查询中生成整个输出。如果您不想使用 EF 或 LINQ-to-SQL，您仍然可以使用一些 LINQ 魔术来按房间进一步将其分开，然后您可以将其用于数据绑定（请原谅​​ C#，VB.NET 是有点生锈！）：

```
DataTable dt = new DataTable();
dt.Fill(objDataReader);          // Loads all data into the DataTable
var groupedRows = dt.Rows.Cast<DataRow>().GroupBy(row => new { RoomId = (int) row["room_id"], RoomName = (string) row["room_name"] });
rpRows.DataSource = groupedRows;
rpRows.DataBind(); 
```

然后你会有这样的中继器：

```
<table>
<thead><tr><th>Rooms &amp; Resources</th>
<asp:Repeater runat="server" id="rpHeader">
    <ItemTemplate>
        <td><%# Eval("period_name") %></td>
    </ItemTemplate>
</asp:Repeater>
</tr></thead>
<asp:Repeater runat="server" id="rpRows">
    <ItemTemplate>
        <tr>
            <th><!-- Put room header stuff here --><%# Eval("Key.RoomName") %></th>
            <asp:Repeater runat="server" DataSource="<%# Container.DataItem %>">
                <ItemTemplate>
                    <td>
                         <!-- Per-booking info -->
                         <asp:Label runat="server" Visible='<%# Eval("booking_id") == DBNull.Value %>'>Not Booked</asp:label>
                         <asp:Label runat="server" Visible='<%# Eval("booking_id") != DBNull.Value %>'>Booked!</asp:label>
                    </td>
                </ItemTemplate>
            </asp:Repeater>
        </tr>
    </ItemTemplate>
</asp:Repeater>
</table> 
```

我没有给出数据绑定标题行的代码，但这只是一个`select * from tbl_periods`

请注意，这些代码都没有经过测试，可能需要对数据绑定进行一些调整。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T18:03:44.390

让我印象深刻的一件事是这条线......

```
Dim drResources As Repeater = drPeriods.Controls(drPeriods.Controls.Count - 1).Controls(0).FindControl("drResources") 
```

尝试用类似的东西替换它

```
Dim drResources As Repeater = e.Item.FindControl("drResources") 
```

（语法可能有点不对劲——我的 VB 很不稳定 :)

在基础工作正常之前，我也会删除`try catch`- 可能正在生成错误，但您永远不会看到它。

# django - 将 Django 升级到 1.4.1

> ID：11815368
> 
> 赞同：2
> 
> 时间：2012-08-05T09:36:07.683
> 
> 标签：django

根据[文档](https://docs.djangoproject.com/en/dev/topics/install/#remove-any-old-versions-of-django)，如果 Django 是手动安装的，`python setup.py install`则需要手动删除该目录。

我通过从 Shell 运行它找到了 Django 的安装位置

```
python -c "import sys; sys.path = sys.path[1:]; import django; print(django.__path__)" 
```

并从中删除了 django 目录`/usr/local/lib/python2.7/dist-packages/django`

此后，我尝试以自动方式安装 1.4.1：

```
sudo pip install Django 
```

令人惊讶的是它拒绝安装它：

```
Requirement already satisfied (use --upgrade to upgrade): Django in /usr/local/lib/python2.7/dist-packages
Cleaning up... 
```

所以我别无选择，只能这样做，即使文档没有反映这一点。

```
sudo pip install Django --upgrade 
```

日志：

```
Downloading/unpacking Django
  Downloading Django-1.4.1.tar.gz (7.7Mb): 7.7Mb downloaded
  Running setup.py egg_info for package Django

Installing collected packages: Django
  Found existing installation: Django 1.4
    Uninstalling Django:
      Successfully uninstalled Django
  Running setup.py install for Django
    changing mode of build/scripts-2.7/django-admin.py from 644 to 755

    changing mode of /usr/local/bin/django-admin.py to 755
Successfully installed Django
Cleaning up... 
```

似乎文档没有提到 django 文件不仅在，`/python2.7/dist-packages/django`而且在`/usr/local/bin/django-admin.py`

我想知道我这样做是否正确，因为文档明确警告：

> 如果您使用这种安装技术，首先删除任何现有的 Django 安装尤为重要。否则，您可能会得到一个损坏的安装，其中包含以前版本的文件，这些文件已经从 Django 中删除。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T11:53:56.350

一切还好。

通常，/usr/local/bin 中只有一个符号链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-19T07:44:34.543

我正在经历这种混乱，这是由于 Django 文档中关于如何安装 Django 的语言不足造成的。请注意，他们确实说过，如果您使用过 python setup.py，那么您必须手动从“site-packages”中删除 Django 内容——而不是像 Kave 那样从“dist-packages”中删除。

您显然可以通过将 Django 拖到站点包中手动安装它（如果您还没有通过 PIP 或 EasyInstall 安装它）。

他们说，如果您使用过 PIP 或 EasyInstall，那么您可以让这些程序为您处理删除。由于 Kave 建议的原因，这可能意味着您在这种情况下不敢进行手动删除。

如果有 Django 的人愿意写作，就好像单词具有精确的含义一样。

我现在不能回去尝试在以前的版本上安装 1.4，因为 1.4 是我开始使用的版本。但是 Kave，也许你和我一样，不记得你是如何安装以前的版本的。那时您可能使用过 EasyInstall 甚至 PIP，从而导致 Django 文件夹被放置在 dist-packages 而不是 site-packages 中。

我在我的旧 Django 版本的 dist-packages 文件夹中找到了一个“egg”信息文件。EasyInstall 使用鸡蛋；简要查看 setup.py 文档表明它没有。

# jsf - java.lang.StringIndexOutOfBoundsException：字符串索引超出范围：com.sun.faces.renderkit.ServerSideStateHelper.getState 处的 -1

> ID：11815371
> 
> 赞同：2
> 
> 时间：2012-08-05T09:36:59.133
> 
> 标签：jsf, indexoutofboundsexception, state-saving

当我在没有它的情况下使用此代码时，`<p:tab>`它会按预期工作，

```
<h:form>
    <p:wizard>
        <p:tab title="Test-1">
            <h:form>
                <p:growl id="msg"/>
                <p:selectOneMenu value="#{studentController.departmentIDgenerate}">
                    <f:selectItems value="#{departmentController.departmentList}" var="deparet" itemLabel="#{deparet.departmentName}" itemValue="#{deparet.departmentId}"/>
                    <p:ajax listener="#{studentController.addMessage}" update="msg"/>
                </p:selectOneMenu>            
            </h:form>
        </p:tab>
        <p:tab title="Test-2">
        </p:tab>
    </p:wizard>
</h:form> 
```

但是当我开始使用时`<p:tab>`，它会引发以下异常：

```
java.lang.StringIndexOutOfBoundsException: String index out of range: -1
    at java.lang.String.substring(String.java:1937)
    at com.sun.faces.renderkit.ServerSideStateHelper.getState(ServerSideStateHelper.java:266)
    at com.sun.faces.renderkit.ResponseStateManagerImpl.getState(ResponseStateManagerImpl.java:100) 
```

这是如何引起的，我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T10:23:20.077

让我们从删除外部`h:form`（包装 的形式`<p:wizard>`）开始，因为你在这里有一个嵌套的形式（这很糟糕）

# mysql - 在 MySQL 中将多行合并为一，无需组 concat

> ID：11815372
> 
> 赞同：0
> 
> 时间：2012-08-05T09:37:19.050
> 
> 标签：mysql, sql

我在 MySQL 中有一个表，我需要在其中加入多行。该表如下所示：

```
Order_ID  |  Item_ID  |  color
1           1           white
1           2           red
2           1           black
2           1           blue 
```

我想根据它们的 Order_ID 组合这些行，这将产生如下所示的结果：

```
Order_ID  |  Item_1_ID  | Item_1_color  | Item_2_ID  | Item_2_color
1           1             white           2            red
2           1             black           1            blue 
```

我知道有一种方法可以通过使用 group concat 将两行合并为一个，但我想这样做，以便每个字段保持分离，而不是像使用 group concat 一样连接。

我也已经尝试过使用语句加入，如下所示：

```
SELECT o.*, o1.* FROM order o INNER JOIN order o1 ON o.Order_ID = o1.Order_ID 
```

但在少数情况下，我想要加入的行太多，超过了 MySQL 中 61 加入的限制。

任何帮助将不胜感激，谢谢。

- -编辑 - -

还有另一个称为 group 的参数，它决定了每个订单的商品数量。该表如下所示：

```
Order_ID   |  group
 1           1
 2           1 
```

因此，如果订单属于同一组，它们将具有相同的列数，但在一组和另一组之间，列数可能不同。而且我的查询仅针对一组，因此列数之间的差异没有问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T10:35:46.570

使用`GROUP BY order_id`，这将对您的结果进行分组，并为您提供您所描述的结果集。

编辑：

根据您尝试完成的工作，我建议您阅读有关数据库规范化的信息。您的表中似乎没有主键，是吗？老实说，您的表结构没有任何意义，您应该将订单存储在一个单独的表中，例如 order_id、user_id...属于这个秩序。

您不想在一行中添加相同的结果，而是将每一行读入一个数组，然后循环遍历该数组。

# .net - 改变屏幕角度.NET

> ID：11815373
> 
> 赞同：0
> 
> 时间：2012-08-05T09:37:46.010
> 
> 标签：.net, windows, screen

有谁知道如何从 .NET Framework 4 更改屏幕角度？（我相信你不能在这个版本的 .NET 中使用 Microsoft.WindowsCE.Forms）。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T10:35:03.900

.NET 没有执行此操作的内置函数。

看看[这篇文章](http://www.dotnetspark.com/kb/1948-change-display-settings-programmatically.aspx)，它描述了如何使用 PInvoke 来操作显示。

# excel - Excel 代码问题的 Outlook 提醒

> ID：11815376
> 
> 赞同：0
> 
> 时间：2012-08-05T09:37:52.267
> 
> 标签：excel, outlook, reminders

我运行以下代码在 Outlook 中创建提醒。

```
' requires a reference to the Microsoft Outlook          x.0 Object Library
Sub RegisterAppointmentList()
' adds a list of appontments to the Calendar in          Outlook
Dim olApp As Outlook.Application
Dim olAppItem As Outlook.AppointmentItem
Dim r As Long
DeleteTestAppointments ' deletes previous test appointments
On Error Resume Next
Set olApp = GetObject("", "Outlook.Application")
On Error GoTo 0
If olApp Is Nothing Then
On Error Resume Next
Set olApp =   CreateObject("Outlook.Application")
On Error GoTo 0
If olApp Is Nothing Then
    MsgBox "Outlook is not available!"
    Exit Sub
End If
End If
r = 5 ' first row with appointment data in the active worksheet
While Len(Cells(r, 5).Formula) > 0
Set olAppItem =     olApp.CreateItem(olAppointmentItem) ' creates a    new appointment
With olAppItem
    ' set default appointment values
    On Error Resume Next
    .Start = Cells(r, 9).Value
    .End = Cells(r, 9)
    .Subject = Cells(r, 2).Value + Cells(r,        3).Value
    .Location = Cells(r, 5).Value
    .Body = Cells(r, 9).Value
    .ReminderSet = True
    .ReminderMinutesBeforeStart = 20160
    .Categories = "TestAppointment" ' add    this to be able to delete the testappointments
    On Error GoTo 0
    .Save ' saves the new appointment to the default folder
End With
r = r + 1
Wend
Set olAppItem = Nothing
Set olApp = Nothing
End Sub

Sub DeleteTestAppointments()
' deletes all testappointments in Outlook
Dim olApp As Outlook.Application
Dim OLF As Outlook.MAPIFolder
Dim r As Long, dCount As Long
On Error Resume Next
Set olApp = GetObject("",     "Outlook.Application")
On Error GoTo 0
If olApp Is Nothing Then
On Error Resume Next
Set olApp = GetObject("Outlook.Application")
On Error GoTo 0
If olApp Is Nothing Then
    MsgBox "Outlook is not available!"
    Exit Sub
End If
End If
Set OLF =    olApp.GetNamespace("MAPI").GetDefaultFolder(olFolderCalendar)
dCount = 0
For r = OLF.Items.Count To 1 Step -1
If TypeName(OLF.Items(r)) = "AppointmentItem" Then
    If InStr(1, OLF.Items(r).Categories, "TestAppointment", vbTextCompare) = 1 Then
        OLF.Items(r).Delete
        dCount = dCount + 1
    End If
End If
Next r
Set olApp = Nothing
Set OLF = Nothing
End Sub 
```

但是，我有一些异常情况；

1.  它并不总是将“主题”设置为相关行的第 2 列和第 3 列中所写的内容。它只是在提醒上返回一个空白。
2.  如果 L 列显示“隔离”或“检查”，我希望它不要创建提醒。任何帮助将不胜感激。

这是 excel 工作簿的链接[http://db.tt/Goqni3uf](http://db.tt/Goqni3uf)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T23:17:13.357

真高兴你做到了 ：）

对于下一个请求，在此条件之间嵌入您的代码

```
While Len(Cells(r, 5).Formula) > 0
    Select Case LCase(Cells(r, 12).Value)
        Case "quarantined", "inspected"
        Case Else
            '
            '~~> Your code to create an appointment
            '
    End Select
Wend 
```

# javascript - 悬停时放大图像但不要放大容器

> ID：11815377
> 
> 赞同：0
> 
> 时间：2012-08-05T09:38:32.593
> 
> 标签：javascript, jquery, css

当图像悬停发生时，我正在尝试找到一种不放大表格的方法。这是我的代码。谢谢

```
<script language="javascript" type="text/javascript">
    //opacity: 0.5, 
    $(document).ready(function () {
        $("#thServer img").hover(function () {
            $(this).stop().animate({ width: 70, height: 70 }, 100);
        }, function () {
            $(this).stop().animate({ width: 50, height: 50 }, 100);
        });
    });

</script>

<table style="border-style: solid">
    <tr>
        <th id="thServer">
            <img src="NewVersion.png" width="50" height="50"></img>
        </th>
    </tr>
    <tr>
        <td>
        </td>
    </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T09:50:22.590

试试这个[css 片段](http://jsfiddle.net/An8RU/1/ "jsFiddle")：

```
#thServer {
  width: 50px;   
  height: 50px;
  position: relative;    
}

#thServer img {
  position: absolute;
  top: 0;
  left: 0;
  margin: 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T10:04:57.520

很容易做到这一点

```
table {
height: 50px;
**table-layout: fixed;**
width: 250px;}  th {
**overflow: hidden;**
white-space: nowrap;} 
```

然后通过jquery使图像位置：绝对

```
<th id="thServer">
        <img src="NewVersion.png" **style="position:absolute;"** width="50" height="50"></img>
    </th> 
```

然后使用 left 和 top 值添加更多样式以将图像定位在正确的位置。

# macos - 将文本从 OS/X 终端复制到剪贴板

> ID：11815382
> 
> 赞同：9
> 
> 时间：2012-08-05T09:39:17.720
> 
> 标签：macos, shell, iterm

我经常不得不从终端复制和粘贴文本。有没有办法将命令的输出重定向到 shell 变量或另一个将输出放在剪贴板中的命令？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-05T09:43:35.993

使用`pbcopy`和`pbpaste`。发送到的任何内容`pbcopy`都会进入剪贴板。运行`pbpaste`将剪贴板的内容发送到标准输出，您可以像所有其他命令一样链接它们。

您可以在此处找到一些示例用法：http: [//osxdaily.com/2007/03/05/manipulating-the-clipboard-from-the-command-line/](http://osxdaily.com/2007/03/05/manipulating-the-clipboard-from-the-command-line/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-06T09:38:43.627

`pbcopy`并`pbpaste`在某些环境中用问号替换非 ASCII 字符。可以通过设置`LC_CTYPE`来避免`UTF-8`。

```
LC_CTYPE=UTF-8 pbpaste 
```

你也可以使用 osascript：

```
osascript -e 'on run {input}
set the clipboard to input
end' "ä"

osascript -e 'the clipboard as text' 
```

# java - 配置分布

> ID：11815385
> 
> 赞同：1
> 
> 时间：2012-08-05T09:39:21.583
> 
> 标签：java, configuration

我正在寻找现有的解决方案来解决将配置分发到 Java 应用程序的问题。

一个简单的例子：将有一个管理所有配置的主应用程序（配置服务器）C。当应用程序 A 启动时，它会注册到服务器 C 并获取正常工作所需的配置。显然，每个应用程序都应该由服务器进行身份验证，并且服务器由应用程序进行身份验证，可能使用证书。服务器保存每个应用程序的配置。

我知道从头开始设计这样的架构应该不难，但我很想知道是否有针对此问题的现有解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T10:39:53.247

有几个 Apache 项目

ZooKeeper [http://zookeeper.apache.org/](http://zookeeper.apache.org/)，用于分布式配置和协调

Commons Configuration [http://commons.apache.org/configuration/](http://commons.apache.org/configuration/)被广泛使用，但我不确定它是否支持相互认证（你会使用数据库配置源）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T19:45:20.727

[您可能需要考虑在Curl](http://curl.haxx.se/)之上构建一个解决方案，这是一个开源的命令行实用程序，可以从 URL 下载文件并将该文件写入标准输出。例如，执行将从指定的 Web 服务器`curl -sS http://someHost/file.cfg`下载。`file.cfg`这些`-sS`选项指示 Curl 打印错误消息，但不打印任何进度诊断。Curl 支持许多协议，包括 HTTP、FTP、LDAP 及其安全变体。

Java 应用程序可以： (1) 执行`Runtime.getRuntime().exec("curl -sS ...")`以使用 Curl 从某处下载配置文件的内容；然后（2）用你喜欢的任何配置解析器解析它。

为了省去你对（1）的重复造轮子，我建议你下载[Config4J](http://www.config4star.org/)的源代码，看看`org.config4j.Util.execCmd()`方法的实现。

# php - php mysql搜索房间可用性需要帮助以获得更好的sql查询

> ID：11815387
> 
> 赞同：0
> 
> 时间：2012-08-05T09:39:42.803
> 
> 标签：php, mysql

我的mysql数据库是：

```
BOOKING_ID, FROM_DATE, TO_DATE,
R1,R2,R3,R4,R5,R6,R7,R8,R9,R10,R11,R12,R13,R14,R15,R16,R17 
```

其中 R1=room1...R17=room17，如果 room1 已预订，则 R1 将设置为 1。

下面是我当前工作的 sql 查询，我以前从未学习过 sql，我需要帮助以获得更好的 sql 查询！

```
for($room=1;$room<=$total_room;$room++)
{
  $result = mysql_query("
    SELECT COUNT(`BOOKING_ID`) AS num 
    FROM $search_for_db_table
    WHERE (    (FROM_DATE <= $search_to_date   AND TO_DATE >= $search_to_date )
            OR (FROM_DATE <= $search_from_date AND TO_DATE >= $search_from_date)
            OR (FROM_DATE >= $search_from_date AND TO_DATE <= $search_to_date )
          ) 
      AND R$room=1 
  ") or die(mysql_error());

  $row = mysql_fetch_assoc($result);

  $numUsers[$room] = $row['num']; 
}

//$numUsers[$room]=="0" means room available for booking... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T09:43:48.973

请了解有关设计数据库的更多信息。与其为每个房间使用一列，不如使用多个表格来获取信息，这样它就更有条理了。

因此，在您制作的表格中制作一个名为“房间”的表格，假设为 15 行。用一列“room_number”表示房间号，一列“available”表示您的 1 或 0。一个简单的 SQL 语句然后显示哪些房间可用。

然后你可以使用：

```
SELECT 'room_number' FROM rooms WHERE available = '0' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T09:57:33.313

然而，如果您不喜欢修改这个“丑陋”的数据模型，您可以使用 1 个查询而不是 17 个查询。只需对所有 17 个字段使用 SUM(。因此 SELECT 子句将是：

```
SELECT SUM(R1) AS sr1, SUM(R2) AS sr2, ...., SUM(R17) as sr17
FROM
WHERE [only with the date restictions] 
```

然后如果结果集的相应列为0则可用，否则被占用。

但同样，对于错误设计的数据模型，这是一个“丑陋”的解决方案。

# javascript - 在脚本标签的源属性中使用全局变量

> ID：11815394
> 
> 赞同：0
> 
> 时间：2012-08-05T09:40:38.107
> 
> 标签：javascript

我运行以下 JavaScript 代码，它提供了来自客户端的参数列表，并调用了一个 Google 融合表 SQL 语句，该语句提供了对回调函数 handleResponse 的响应。

```
<script>

  // get parameter list
  var url = window.location.toString();
  url.match(/\?(.+)$/);
  var params = RegExp.$1;
  var params = params.split("&");
  var queryStringList = {};
  for(var i=0;i<params.length;i++)
  {
    var tmp = params[i].split("=");
    queryStringList[tmp[0]] = unescape(tmp[1]);
  }

  // callback function
  function handleRespose(response)
  {
  }
</script>
<script src="https://www.googleapis.com/fusiontables/v1/query?sql=SELECT data from table&key=myKey&callback=handleRespose"></script> 
```

我的问题是，我怎样才能像这样使用 queryStringList：

```
<script src="https://www.googleapis.com/fusiontables/v1/query?sql=SELECT " + queryStringList["data1"] + "from table&key=myKey&callback=handleRespose"></script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T09:45:42.747

您必须从 JavaScript 加载新的 JS 文件。例如：

```
var fusiontables = document.createElement("script");
fusiontables.setAttribute("src", "https://www.googleapis.com/fusiontables/v1/query?sql=SELECT " + queryStringList["data1"] + "from table&key=myKey&callback=handleRespose");

document.getElementsByTagName("head")[0].appendChild(fusiontables); 
```

这将以编程方式创建一个新`<script>`元素并将其注入页面。请注意，该变量不需要是全局变量来执行此操作。

如果你把它放在一个函数中，你可以像这样使用它：

```
// loadscript.js
function loadscript(url) {
    var script = document.createElement("script");
    script.setAttribute("src", url);
    document.getElementsByTagName("head")[0].appendChild(script);
} 
```

```
<!-- page.html -->
<script src="loadscript.js"></script>
<script>
    var queryStringList = {};
    // ... Do stuff to fill queryStringList ...

    var url = "https://www.googleapis.com/fusiontables/v1/query?sql=SELECT " + queryStringList["data1"] + "from table&key=myKey&callback=handleRespose";
    loadscript(url);
</script> 
```

# heroku - Heroku 上的 Play2.1 快照

> ID：11815396
> 
> 赞同：1
> 
> 时间：2012-08-05T09:40:55.183
> 
> 标签：heroku, playframework

我正在与 Play 对抗！v2.1-SNAPSHOT 并且从 play Promise 转移到 scala futures。我相应地更改了我的代码并在本地运行它 - 使用 sbt 和工头。但是，当我尝试上传到 Heroku 时，我得到：

```
ExecutionContext is not a member of package concurrent
       [error] import scala.concurrent.ExecutionContext.Implicits.global 
```

在我更改代码之前，我在本地运行时遇到了上述错误。我相信 heroku 上的 2.1-SNAPSHOT 版本控制存在问题。从[buildpack](https://github.com/heroku/heroku-buildpack-scala/blob/master/opt/sbt-0.11.0.boot.properties)看，heroku 从类似于[http://s3pository.heroku.com/](http://s3pository.heroku.com/) * 的 repos 加载 jar。我想这是为了缓存。如果是这样，缓存多久清除一次？有人对此有解决方案吗？

**编辑**

看起来，常春藤罐子被缓存，就好像我使用heroku create在heroku中创建一个新堆栈一样，我可以正常部署......所以我的问题是如何清除常春藤缓存？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T12:37:51.577

所解释的问题在于蛞蝓之间的常春藤缓存中。我更改了默认构建包以包含以下内容：

```
# removing SNAPSHOT.jar files to ensure we use latest
for DIR in $CACHED_DIRS ; do
  find $DIR -iname \*SNAPSHOT.jar -exec echo "deleting" {} \; -exec rm {} \;
done 
```

当我进行一些测试时，我的环境可能有点过时，它可能无法完全正常工作。新的 buildpack 在[这里](https://github.com/charroch/heroku-buildpack-scala)

要将 buildpack 添加到您的环境中：

```
heroku config:add BUILDPACK_URL=https://github.com/charroch/heroku-buildpack-scala.git 
```

# c# - 具有通用值的 KeyValuePair

> ID：11815399
> 
> 赞同：-7
> 
> 时间：2012-08-05T09:41:29.177
> 
> 标签：c#, generics

有没有办法以这种方式创建列表？

```
List<string,KeyValuePair<string,T>> lst; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-05T09:45:43.933

首先，[`List<T>`](http://msdn.microsoft.com/en-us/library/6sh2ey19.aspx)只接受一个通用参数，因此您不能同时*指定* `string` *and* `KeyValuePair<string, T>`。正如所指出的，也许你的意思是[`Dictionary<K, V>`](http://msdn.microsoft.com/en-us/library/xfhwa508.aspx)?

通常，`T`只有当您的代码出现在本身接受名为`T`.

如果您希望能够`T`在列表中存储不同的元素（即 的各种类型）；这是不可能的。想象一下，如果每个项目都有不同的`T`，首先打字会有什么优势`T`？您无法对这些值做出任何假设，因为它们的类型是未知的。因此，您所能做的就是指定您的值可能属于的所有类型中最具体的通用基本类型 -`System.Object`如果它们确实不共享任何其他共同特征，则可能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T09:43:55.727

也许：

```
Dictionary<String, Dictionary<String, T>> lst; 
```

# javascript - Javascript 方法以字符串形式返回方法代码

> ID：11815400
> 
> 赞同：1
> 
> 时间：2012-08-05T09:41:35.093
> 
> 标签：javascript, object, methods

我正在尝试使我的对象的方法起作用，但是缺少一些东西-可能非常明显！

我找到了以下主题：[如何在 JavaScript 中为自定义对象创建方法？](https://stackoverflow.com/questions/504803/how-do-you-create-a-method-for-a-custom-object-in-javascript)但无论我尝试什么，我的方法都只是将函数代码作为文字字符串返回。

我还尝试查看对象文字[JavaScript - 对象文字的优点，](https://stackoverflow.com/questions/1600130/javascript-advantages-of-object-literal)但作为 JS 的新手，我看不到如何将初始参数传递给对象！

所以，语境……

我正在创建一个基于日期、时间和位置进行各种天文计算的网页。我有一组年、月、日、小时、分钟、秒、时区、纬度和经度的输入。我将其用作 JS 的学习经验，以及理解计算！

我正在创建一个全局日期对象来保存日期元素，并且我想创建一个计算儒略日数的方法。

我用代码创建了一个小提琴：http: [//jsfiddle.net/AstroDaz/gKQ5f/5/](http://jsfiddle.net/AstroDaz/gKQ5f/5/)

```
function DATE_OBJ (iyear,imonth,iday,idirty,ijd) {
    this.Year = iyear;
    this.Month = imonth;
    this.Day = iday;
    this.Dirty = idirty;
    this.JD = DateJD;
}

function DateJD() {
    var Y = objDate.Year;
    var M = objDate.Month;
    var D = objDate.Day;

    if (M < 3) {
        --Y;
        M +=12;
    }

    if (objDate.Year > 1582) {

      var A = parseInt(Y / 100, 10);
      var B = 2 - A + parseInt(A / 4,10);
      } else {
        if (objDate.Year = 1582 && M > 10) {
          var A = parseInt(Y / 100, 10);
          var B = 2 - A + parseInt(A / 4,10);
          } else {
            if (objDate.Year = 1582 && M = 10 && D >=15) {
              var A = parseInt(Y / 100, 10);
              var B = 2 - A + parseInt(A / 4,10);
              } else var B = 0;
          }
        }

    if (Y < 0) var C = parseInt((365.25 * Y) - 0.75,10);
    else var C = parseInt(365.25 * Y,10);

    var E = parseInt(30.6001 * (M + 1),10);
    this.JD = B + C + E + objDate.Day + 1720994.5;
}

var d = new Date();    
var objDate = new DATE_OBJ (d.getFullYear(),d.getMonth(),d.getDate(),false,0);

document.write(objDate.JD);​ 
```

正如您将看到的，结果是对象的 JD 属性被分配为方法代码的文字字符串，而不是计算的结果！

顺便说一句，如果我将 DateJD 创建为直接函数并调用它，它会起作用并返回正确的结果。

谢谢你的帮助！达兹

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T09:50:58.983

`this.JD = DateJD`您没有分配返回值，而是分配了一个可调用函数。因此，您的计算永远不会执行，而只是分配给成员变量。

如果您更改`DateJD`from的最后一行

```
this.JD = B + C + E + objDate.Day + 1720994.5; 
```

到

```
return B + C + E + objDate.Day + 1720994.5; 
```

然后通过调用它

```
document.write(objDate.JD());​ 
```

它将返回一个数字：http: [//jsfiddle.net/gKQ5f/6/](http://jsfiddle.net/gKQ5f/6/)

如果你在你的“构造函数”中执行你的函数，那么就没有`objDate`可以使用的现有对象，你会得到类似的东西

> 未捕获的类型错误：无法读取未定义的属性“年份”

* * *

顺便说一句，您可能想要更改这些条件：

```
if (objDate.Year = 1582 && M > 10) { 
```

这会将 objDate.Year 分配给 1582，而不是检查它是否相等。
取而代之`objDate.Year == 1582`。

# php - 将php生成的xml转换为json

> ID：11815405
> 
> 赞同：1
> 
> 时间：2012-08-05T09:42:13.443
> 
> 标签：php, xml, json

我想在 php 中加载远程 xml 文件并将其转换为 Json。首先我使用 cUrl 来获取 xml 数据：

xmlparse.php

```
header('Content-Type: text/xml');
$url = 'http://www.example.com/xml.php';
$curl = curl_init($url);
curl_setopt($curl,CURLOPT_COOKIE,'Esperantus_Language_ime=en-US;Esperantus_Language_fa=en-US;PortalAlias=fa;refreshed=true;.ASPXAUTH=;portalrole=;');
curl_setopt($curl,CURLOPT_USERAGENT,$_SERVER['HTTP_USER_AGENT']);
curl_setopt($curl,CURLOPT_HEADER,0);
curl_exec($curl); 
```

执行脚本 xml 时显示。

我使用以下函数将 xml 转换为 json ：

索引.php

```
function Parse ($url) {
  $fileContents= file_get_contents($url);

  //$fileContents = str_replace(array("\n", "\r", "\t"), '', $fileContents);
  //$fileContents = trim(str_replace('"', "'", $fileContents));

  $simpleXml = simplexml_load_string($fileContents);
  $json = json_encode($simpleXml);

  return $json;
}
echo Parse('xmlparse.php'); 
```

但这不起作用并出现错误：

```
Warning: simplexml_load_string() [function.simplexml-load-string]: Entity: line 8: parser error : ParsePI: PI php never end ... in D:\xampp\htdocs\xml\index.php on line 12
Warning: simplexml_load_string() [function.simplexml-load-string]: curl_exec($curl); in D:\xampp\htdocs\xml\index.php on line 12
Warning: simplexml_load_string() [function.simplexml-load-string]: ^ in D:\xampp\htdocs\xml\index.php on line 12
Warning: simplexml_load_string() [function.simplexml-load-string]: Entity: line 8: parser error : Start tag expected, '<' not found in D:\xampp\htdocs\xml\index.php on line 12
Warning: simplexml_load_string() [function.simplexml-load-string]: curl_exec($curl); in D:\xampp\htdocs\xml\index.php on line 12
Warning: simplexml_load_string() [function.simplexml-load-string]: ^ in D:\xampp\htdocs\xml\index.php on line 12
false 
```

如何加载远程 xml 并转换为 json。

# jquery - li被拖动后隐藏ul中的空白

> ID：11815408
> 
> 赞同：2
> 
> 时间：2012-08-05T09:42:58.707
> 
> 标签：jquery, drag-and-drop, draggable, droppable

对不起我的英语:) 我搜索了很长时间的答案，但我认为我做错了 reqewest。

所以，我有一个带有可拖动“li”元素的“ul”列表。我可以把它拖到div elemen。当我将它拖到可放置的地方时，我的“li”列表有一个空的地方。li 的拖拽风格是 chahging.drop 之后，li 元素改变了它的位置，它停留在 droppable 元素中并得到他原来的风格，但是我怎样才能在 ul 列表中隐藏它的空白区域呢？

```
$(document).ready(function(){

$(".spisokznach").draggable({
delay:200, 
scroll: 'true',
opacity:0.80, 
cursorAt:{left:34, bottom : 15}, 
cursor:'move', 
revert:'invalid', 
snap:'.place',
appendTo:'.place',
snapMode:'inner' ,
});

$(".place").droppable({
activeClass: "placehover",
hoverClass: "placehover2",
accept:'.spisokznach',
drop: function(event, ui){
        ui.draggable.draggable('option', 'revert', function(){return false});

         alert("You dropped "+$(ui.draggable).attr('id')+" into "+$(this).attr('id')+" block")
        $(ui.draggable).addClass('new'); 

    },
out: function(event, ui){
       $(ui.draggable).removeClass('new'); 
       ui.draggable.draggable('option', 'revert', function(){
            $(this).data('draggable').originalPosition = {
                top: 0,
                left: 0
            };

            return true;
        });
    },

})
}); 
```

我想要这样的东西：http: [//jsfiddle.net/XelaNimed/sgZE2/](http://jsfiddle.net/XelaNimed/sgZE2/) 拖动一个元素后，空白空间被隐藏，列表变得更近。

# c# - 如何将 Content Picker 字段添加到 orchard ContentType？

> ID：11815409
> 
> 赞同：1
> 
> 时间：2012-08-05T09:43:03.537
> 
> 标签：c#, asp.net-mvc, orchardcms

假设我有一个`ContentType`名为 Product。我想`RelatedProducts`在我的自定义类型（例如：产品）中调用一个字段，以便在管理面板中，当用户正在编辑（或添加新产品）时，`ContentPicker`会为用户显示一个按钮，并且用户单击该按钮并出现产品列表，这使用户能够选择类型产品的内容。

果园中是否有任何实现的模块来完成此任务？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T09:55:14.883

是的，`ContentPicker`字段正是您正在寻找的。启用 ContentPicker 模块（如果尚未启用），将 Content Picker Field 添加到您的内容类型并设置好。

内容选择器模块从 Orchard 1.5 开始可用。

# java - 如何通过 DOM 访问 xml 中的最低级别子节点

> ID：11815410
> 
> 赞同：0
> 
> 时间：2012-08-05T09:43:02.903
> 
> 标签：java, xml, dom

我有 xml 级别的节点，例如：

```
<matrix1>
  <row1>
    <column>679</column>
    <column>9</column>
  </row2>
  <row2>
    <column>78</column>
    <column>29</column>
  </row2>
<matrix1> 
```

我在这里看到了很多类似的东西，但不是像这样更高级的子节点，我可以在解析过程之后在 DOM 中跳过父节点直接访问`<column>679</column>`吗？或将每个级别迭代到最低的孩子以获得数值？感谢您抽出宝贵时间提供帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T10:34:06.187

[XPath](http://www.w3schools.com/xpath/xpath_syntax.asp)表达式可能是您在这里需要的。您可以选择文档中的列节点，无论它们在何处使用此模式：

```
//column 
```

这是一个工作片段：

```
DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
DocumentBuilder builder = factory.newDocumentBuilder();
Document doc = builder.parse(____your XML InputStream____);
XPathFactory xPathfactory = XPathFactory.newInstance();
XPath xpath = xPathfactory.newXPath();
XPathExpression expr = xpath.compile("//column");
NodeList nl = (NodeList) expr.evaluate(doc, XPathConstants.NODESET); 
```

检查[Java XPath API](http://docs.oracle.com/javase/1.5.0/docs/api/javax/xml/xpath/package-summary.html)以获取更多信息。

您还应该检查 XML 输入的语法。matrix1 和 row1 没有结束标记，这是更正后的 XML：

```
<matrix1>
    <row1>
        <column>679</column>
        <column>9</column>
    </row1>
    <row2>
        <column>78</column>
        <column>29</column>
    </row2>
</matrix1> 
```

# c# - 如何将平铺地图变成一堆边界框？

> ID：11815412
> 
> 赞同：1
> 
> 时间：2012-08-05T09:43:09.037
> 
> 标签：c#, xna, bounding-box

我正在尝试使用 xna 进行碰撞检测。我有一个（某种）平台游戏地图，我从二维数组中绘制了一张地图，如下所示：

```
 int[,] map = new int[,] 
{
{0,0,1,0,0,0,0,0,},
{0,0,1,1,0,0,0,0,},
{0,0,0,1,1,0,0,0,},
{0,0,0,0,1,0,0,0,},
{0,0,0,1,1,0,0,0,},
{0,0,1,1,0,0,0,0,},
{0,0,1,0,0,0,0,0,},
{0,0,1,1,1,1,1,1,},
}; 
```

我从[http://xnatd.blogspot.com/2009/02/ok-so-first-part-of-our-tower-defence.html](http://xnatd.blogspot.com/2009/02/ok-so-first-part-of-our-tower-defence.html)获取它，所以它不是实际的，但它是相似的。我还为我的主要角色开设了一门课程，例如带有没有问题的边界框的横向卷轴。

但是，如何获取我的图块集的边界框并检查 mario.boundingbox 是否与它们相交？

我知道我可以`boundingbox.intersects(boundingbox2)`用于交集，但会有很多边界框（可能是它们的二维数组？这可能吗？）我已经尝试了几次但我搞砸了。

我用来绘制的代码与链接中的代码非常相似。我试图制作一个边界框数组并为它们设置一个边界框，因为我知道 x、y 和大小，但我最终在随机点上创建了边界框。

我想我需要知道如何在此代码中创建边界框并稍后使用它们（循环遍历每个 x 和 y 看看是否有任何接触？）：

```
for (int x = 0; x < Width; x++)
{
    for (int y = 0; y < Height; y++)
    {
        int textureIndex = map[y, x];
        if (textureIndex == -1)
            continue;

        Texture2D texture = tileTextures[textureIndex];
        batch.Draw(texture, new Rectangle(
            x * 32, y * 32, 32, 32), Color.White);
    }
} 
```

我很高兴知道是否有另一种方法可以做到这一点，或者我的想法不正确。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T14:16:47.717

首先，我会尝试在没有 Draw() 调用的情况下没有任何游戏逻辑，因为当 XNA 检测到游戏运行缓慢时，它将忽略 Draw()，直到 Update() 调用赶上。

对您来说，这样做的明显缺点是，如果由于某种原因游戏运行缓慢（即用户的硬件不好），甚至不会发生碰撞检测！明显不好=P

一种通用的方法是根据数组/网格获取玩家的位置，并遍历数组的周围正方形以检查该空间中是否有 1，如果有，为其创建一个碰撞矩形并查看它是否与玩家相交；我会尝试为您编写一些代码：

```
for (int i = player.X - 1; i < player.X + 2; i++) // Check in a 3x3 square with player in middle
{
    for (int j = player.Y - 1; j < player.Y + 2; j++)
    {
        if (map[i, j] == 1)
        {
            // Make rectangle, check for collision, do logic if there is one
        }
    }
} 
```

您会希望在更新块中使用它，还需要确保 i 和 j 不会超出网格范围。

**编辑：**

现在我想了想，在每次更新调用时重新创建所有矩形可能是个坏主意。当玩家尝试移动以查看他是否会走进阵列中具有“1”的方格时，您可能会更好地进行检查 - 然后相应地调整/取消移动。

# javascript - 点击事件在javascript中没有被点击

> ID：11815414
> 
> 赞同：0
> 
> 时间：2012-08-05T09:43:32.810
> 
> 标签：javascript, jquery

我有 jquery 点击事件的问题。这是我的应用程序的作用。用户在文本字段中输入名称。当他单击添加按钮时，该名称将出现在内容 div 标记中。此名称还有一个删除按钮。现在的问题是当用户单击删除按钮时，它没有给出任何响应。那么我怎样才能使这项工作呢？

这是我的[代码](http://jsfiddle.net/tSTEK/)

**HTML：**

```
<div class="container">
    <label>Name</label>
    <input type="text" class="name" name="name" />
    <input type="button" class="addBtn" name="add" value="Add" />
</div>
<div class="contents"></div> 
```

**jQuery：**

```
$('.addBtn').click(function() {
    var name = $('.name').val();
    var contents = $('.contents');
    var div = $('<div class="names"></div>');
    div.append(name);
    div.append("<button class='delete'>X</button>");
    contents.append(div);
    $('.name').val('');
});

$('.delete').click(function() {
    console.log('click');
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T09:50:24.430

更好的方法是使用该`on()`函数：

```
$('.addBtn').on('click', function() {
    var name = $('.name').val();
    var contents = $('.contents');
    var div = $('<div class="names"></div>');
    div.append(name).append("<button class='delete'>X</button>");
    contents.append(div);
    $('.name').val('');
});

$(document).on('click', '.delete', function() {
    console.log('click');
});​ 
```

演示：http: [//jsfiddle.net/tSTEK/7/](http://jsfiddle.net/tSTEK/7/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T09:46:02.357

您可以在创建元素时添加点击事件：

```
 div.append("<button class='delete'>X</button>")
            .click(function(){
                console.log('click');
            }); 
```

[更新的小提琴](http://jsfiddle.net/tSTEK/1/)

或者更好的[选择](http://jsfiddle.net/tSTEK/4/)是使用 .live() 或 .on() （取决于您的 jQuery 版本）。

```
$('.delete').live('click', function() {
    console.log('click');
});​

$(document).on('click', '.delete', function() {
    console.log('click');
});​ 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-08-05T09:48:18.243

使用 .live 或 .delegate

```
$('.addBtn').click(function() {
    var name = $('.name').val();
    var contents = $('.contents');
    var div = $('<div class="names"></div>');
    div.append(name);
    div.append("<button class='delete'>X</button>");
    contents.append(div);
    $('.name').val('');
});

$('.delete').live('click', function() {
    console.log('click');
}); 
```

或委托

```
$('.addBtn').click(function() {
        var name = $('.name').val();
        var contents = $('.contents');
        var div = $('<div class="names"></div>');
        div.append(name);
        div.append("<button class='delete'>X</button>");
        contents.append(div);
        $('.name').val('');
    });

    $('.contents').delegate('.delete', 'click', function() {
        console.log('click');
    }); 
```

编辑：不要使用现场使用代替！但据我所知，我仍然会选择代表事业，这是最好的表现

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-08-05T09:49:58.410

您可以使用 Jquery live 方法，然后删除父元素：

```
$('.delete').on('click', function() {
    $(this).parent().remove();
});​ 
```

这是小提琴：

[http://jsfiddle.net/tSTEK/9/](http://jsfiddle.net/tSTEK/9/)

# c++ - strcmp(x, str) 错了？

> ID：11815416
> 
> 赞同：0
> 
> 时间：2012-08-05T09:43:35.597
> 
> 标签：c++

作为一个C++的初学者，我对这一点困惑了很久，程序就是告诉字符串中每个单词出现的次数。

```
#include <iostream>
#include <string>
#include <vector>

using namespace std;

int main()
{
    string x;
    vector<string> str;
vector<int> t;
while (cin >> x)
{
    int k = 0;
    for (int j = 0; j != str.size(); j++)
    {
        if (strcmp(x,str[j]) == 0)
            t[j]++;
        k = 1;
    }
    if (k == 0)
    { 
        str.push_back(x);  
        t.push_back(1);     
    }  

}

for (int i = 0; i != str.size(); i++ )
{
    cout << str[i] << "   " << t[i] << endl;
}

return 0;
} 
```

这是错误：

```
C++\code\3.3.cpp(17) : error C2664: 'strcmp' : cannot convert parameter 1 from 'class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> >' to 'const char *'
        No user-defined-conversion operator available that can perform this conversion, or the operator cannot be called 
```

经过长时间的搜索，我在互联网上没有找到任何结果。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T09:45:56.023

如果 x 和 y 是 C++ 字符串，那么您只需说`x == y`. 您正在尝试`strcmp`在 C++ 对象上使用 C 函数。

如果 y 是 C 风格的字符串，那么相同的代码`x == y`也可以工作，因为 C 风格的字符串会自动转换为 C++ 风格的字符串，但是在这种情况下，这样做可能会更好，`strcmp(x.c_str(), y) == 0`因为这样可以避免自动转换。

只有当 x 和 y 都是 C 风格的字符串时，您才应该这样做`strcmp(x, y) == 0`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T09:48:17.070

该错误是因为 strcmp 期望 a`const char*`与 a 不同`std::string`。`c_str()`您可以在该字符串上检索 const char * 调用方法：

```
if (strcmp(x.c_str(),y) == 0) 
```

除此之外，似乎在您的代码中没有声明“y”参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-05T09:50:34.740

编译器期望 a`const char*`或可转换为`const char*`. 但`std::string`不能隐式转换为`const char*`.

如果你想使用`strcmp`，你必须使用方法`c_str`来获得一个`const char*`。但是在您的情况下，最好使用`==`重载的 std::string 。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-05T09:47:46.523

X 是一个字符串，strcmp 比较 const char* 要将字符串转换为 const char* 使用

```
x.c_str () 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-08-05T09:48:29.743

jahhaj 是对的，但是如果你想在一个字符串上调用一个 C 函数，你可以`string_instance.c_str()`使用`const char *`

# java - 总重量 2.5。Eclipse 插件

> ID：11815417
> 
> 赞同：1
> 
> 时间：2012-08-05T09:43:39.737
> 
> 标签：java, eclipse, gwt, gwt-2.5

如何将 GWT 2.5 安装到 Eclipse Juno 中？在 GWT 的更新站点中，只有 2.4 SDK。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-05T10:20:09.970

**解决方案：**

您只需要从（使用 eclipse `Install new software`）[dl.google.com/eclipse/plugin/4.2安装 eclipse 的 GWT 插件](http://dl.google.com/eclipse/plugin/4.2)

[然后从http://code.google.com/p/google-web-toolkit/downloads/list](http://code.google.com/p/google-web-toolkit/downloads/list)手动下载 GWT SDK

并在 Eclipse-preferences-Google-WebToolkit-SDK 中选择这个 SDK

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T13:37:32.253

2.5 还没有发布，所以还没有 Eclipse 插件。

# javascript - d3.pack() 转换更新

> ID：11815424
> 
> 赞同：3
> 
> 时间：2012-08-05T09:44:30.157
> 
> 标签：javascript, svg, d3.js, transition, circle-pack

我正在尝试在 d3.pack() 上应用过渡。

请查看[http://bl.ocks.org/3263043](http://bl.ocks.org/3263043)

我想用一个新的参数来表示，但是在应用转换时，新的圆圈和它的父母不再保持结构上的“和谐”（一些儿童圈不再被它的父母所包含）。

我通过...应用新值

```
pack.value(function(d) {
    return gScale(d.new_parameter)
    }) 
```

重构包...

```
svg.data([json]).selectAll("g.node").data(pack.nodes) 
```

追加新节点（应该已经与其父节点正确定位）并最后进行圆形过渡（它的新半径应该与新包成正比，所以我不明白错误在哪里......）

有什么想法或参考吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T15:44:24.173

我终于设法让它工作了。[您可以在http://bl.ocks.org/3263043](http://bl.ocks.org/3263043)查看结果

问题是，未转换的节点。

# environment-variables - 执行前加载环境变量

> ID：11815425
> 
> 赞同：9
> 
> 时间：2012-08-05T09:44:31.873
> 
> 标签：environment-variables, supervisord

我打算在环境变量中存储一些应用程序设置，比如MYSQL_URL=mysql://...我使用supervisord来管理应用程序进程。子进程启动前如何加载环境变量？特别是当这些设置发生变化时，我希望重新启动子进程会加载新的设置。

另外我想知道在哪里存储这些环境变量。我可以“导出 $(cat 文件名)”的文件？或者一些更好的方法。我很好奇 Heroku 如何管理它的环境变量。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-08-05T10:02:08.767

您可以在 [ ] 部分的 supervisord 配置中设置每个进程的环境变量`program:x`，这些将在启动时传递给进程：

```
[program:yourprocess]
# ... other settings
environment =
    MYSQL_URL=mysql://,
    OTHER_VAR="some other value" 
```

请注意，您需要在每个变量之间使用逗号。我在上面的例子中也使用了换行符，这些是可选的。如果环境值中有空格，则需要将值括在引号中。

您还可以使用相同的格式为该部分中的*所有*进程设置环境变量。`[supervisord]`

最后但并非最不重要的一点是，在 supervisord 启动时设置的任何环境变量也会传递给 supervisord 管理的进程。有关详细信息，请参阅[有关环境变量的文档部分](http://supervisord.org/subprocess.html#subprocess-environment)。

请注意，如果您更改配置文件中配置的环境变量，您需要向 supervisord 发出信号以重新加载配置并重新启动子进程以使它们获取这些更改：

```
supervisorctl update
supervisorctl restart yourprocess 
```

但是，如果您在 supervisord 之外更改环境变量，则需要一起关闭 supervisord 以获取这些变量：

```
supervisorctl shutdown
supervisord 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T09:54:55.797

根据[文档](http://supervisord.org/configuration.html)，“`supervisord.conf`包含一个名为`[supervisord`全局设置的部分”，例如`environmont`可以设置变量。（在链接页面上，搜索“环境”一词）。

环境变量也可以[按程序设置](http://supervisord.org/subprocess.html#subprocess-environment)。

# django - heroku - django 图像不能在 heroku 中工作，但在本地工作正常

> ID：11815426
> 
> 赞同：1
> 
> 时间：2012-08-05T09:44:42.107
> 
> 标签：django, heroku, django-cms

我是 Django 和 Heroku 的新手。我的安装在本地运行良好，但是当它推送到 Heroku 时，我无法在我的站点中看到 css、js 或图像。

这是我的网址模式：

```
urlpatterns = patterns('',
    # Examples:
    # url(r'^$', 'blog.views.home', name='home'),
    # url(r'^blog/', include('blog.foo.urls')),

    # Uncomment the admin/doc line below to enable admin documentation:
    url(r'^admin/doc/', include('django.contrib.admindocs.urls')),

    # Uncomment the next line to enable the admin:
    url(r'^admin/', include(admin.site.urls)),
    url(r'^comments/', include('django.contrib.comments.urls')),
    url(r'^blog/', include('zinnia.urls')),
    url(r'^', include('cms.urls')),
)

if settings.DEBUG:
    urlpatterns = patterns('',
        (r'^' + settings.MEDIA_URL.lstrip('/'), include('appmedia.urls')),
    ) + urlpatterns 
```

这是我的 settings.py

```
STATIC_ROOT = os.path.join(PROJECT_PATH, "static")

# URL prefix for static files.
# Example: "http://media.lawrence.com/static/"
STATIC_URL = '/static/'

# Additional locations of static files
STATICFILES_DIRS = (
    # Put strings here, like "/home/html/static" or "C:/www/django/static".
    # Always use forward slashes, even on Windows.
    # Don't forget to use absolute paths, not relative paths.
) 
```

请让我知道我哪里出错了。提前致谢。

干杯小号

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2020-04-22T12:53:23.580

要在 Heroku 上提供静态文件，您需要使用额外的应用程序，例如 whitenoise。我遵循了这些步骤，并且能够在 Heroku 上提供图像。

此链接是主要指南： [https ://github.com/codingforentrepreneurs/Guides/blob/master/all/Heroku_Django_Deployment_Guide.md](https://github.com/codingforentrepreneurs/Guides/blob/master/all/Heroku_Django_Deployment_Guide.md)

这些将是参考（我建议也通过参考）：

1) [http://whitenoise.evans.io/en/stable/django.html](http://whitenoise.evans.io/en/stable/django.html)

2) [https://docs.djangoproject.com/en/3.0/howto/static-files/](https://docs.djangoproject.com/en/3.0/howto/static-files/)

3) [https://docs.djangoproject.com/en/3.0/ref/templates/builtins/#std:templatetag-static](https://docs.djangoproject.com/en/3.0/ref/templates/builtins/#std:templatetag-static)

我遇到了你遇到的同样的问题。遵循指南和参考中的步骤对我来说效果很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T12:15:15.113

您的`DEBUG`设置是否设置`True`为 Heroku？如果没有，`appmedia.urls`则不会包括在内。

在相关说明中，`django-appmedia`这不是在 Django 中处理静态资产的最佳方式——从 Django 1.3 开始，有一个名为 contrib 的应用程序`staticfiles`（参见：[https ://docs.djangoproject.com/en/1.4/ref/contrib/ staticfiles/](https://docs.djangoproject.com/en/1.4/ref/contrib/staticfiles/) )，Heroku 希望你会使用该应用程序。

此外，`django-appmedia`似乎希望资产位于`/media/`每个应用程序的目录中，而`staticfiles`期望资产位于每个应用程序的`/static/`文件夹中。

您是否查看过[https://devcenter.heroku.com/articles/django-assets](https://devcenter.heroku.com/articles/django-assets)上有关 Django 和静态资产的 Heroku 文档？

# spring - 在 Spring 中使用 @Autowired 的 NullPointerException

> ID：11815427
> 
> 赞同：0
> 
> 时间：2012-08-05T09:44:48.457
> 
> 标签：spring, autowired, applicationcontext

我尝试使用带有 @Autowired 注释的 Spring 框架来获取 Service 类。

这里我的类（这个类由**WebSocketServlet**调用）需要使用服务（**调用它时我得到 NullPointerException**）：

```
public class SignupWebSocketConnection extends MessageInbound {

    private static final Logger log = LoggerFactory.getLogger(SignupWebSocketConnection.class);

    @Autowired
    private UserService userService;

    @Override
    protected void onOpen(WsOutbound outbound) {
        log.info("Connection done");
    }

    @Override
    protected void onClose(int status) {
        log.info("Connection close");
    }

    @Override
    protected void onBinaryMessage(ByteBuffer byteBuffer) throws IOException {
        log.warn("Binary message are not supported");
        throw new UnsupportedOperationException("Binary message are not supported");
    }

    @Override
    protected void onTextMessage(CharBuffer charBuffer) throws IOException {

        User userTest = new User("log", "pass", "ema");
        userService.create(userTest);

    }
} 
```

这是我的 web.xml ：

```
<context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/applicationContext*.xml</param-value>
    </context-param>
    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener> 
```

这是我的 ApplicationContext.xml ：

```
<bean id="userService" class="service.UserService"> 
```

**如果我尝试通过显式调用 ApplicationContext-test.xml 来使用测试包中的服务（我使用 maven），它工作正常...... ApplicationContext.xml 和 ApplicationContext-test.xml 是相同的（只是数据库的参数变化）**

非常感谢你们所有人：D

编辑 ：

我在 ressources 文件夹中替换了我的 applicationContext.xml 并创建了一个类来测试：

```
 public static void main(String[] args) {
        ApplicationContext ctx = new ClassPathXmlApplicationContext("applicationContext.xml");
        UserService userService = (UserService) ctx.getBean("userService");
        User user = new User("log","pas","emai");
        userService.create(user);
    } 
```

**调用 userService.create() ... 时，我也会得到 NullPointerException**。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T10:10:13.117

当不使用方面/代码编织时，您需要从 Springs 的 ApplicationContext 获取您的 bean（如果该对象已由 Spring 创建，则所有 @Autowired 字段都将被设置），因为 Spring 不知道您使用`new`. 使用 Spring 编写 Web 应用程序的常用方法是使用 DispatcherServlet 和控制器，而不是 Servlet，有关快速教程，请参见[此处](http://www.mkyong.com/spring3/spring-3-mvc-hello-world-example/)的示例。这背后的原因是 Spring 将负责创建所有 @Controller/@Service/etc 注释的类，毫不费力地自动装配标记的字段，处理将请求委托给正确的控制器方法等等。

但是，也可以在 Servlet 中获取应用程序上下文和 bean，但是代码不太干净，不容易测试，从长远来看可能会成为维护的噩梦。例如：

```
 WebApplicationContext springContext = WebApplicationContextUtils.getWebApplicationContext(getServletContext());
   MyBeanFromSpring myBean =(MyBeanFromSpring)springContext.getBean("myBeanFromSpring");
   //Do whatever with myBean... 
```

# ffmpeg - ffmpeg YUV 到 RGB 扭曲的颜色和位置

> ID：11815433
> 
> 赞同：0
> 
> 时间：2012-08-05T09:45:51.123
> 
> 标签：ffmpeg, rgb, yuv

抱歉，由于声誉低，我仍然无法为我的问题发布图片。

我使用 ffmpeg 函数将解码帧从 YUV 转换为 RGB24，但颜色和结果图像严重失真。以下是我的代码片段，框架宽度和高度为 (176, 144)

```
len = avcodec_decode_video2(c, picture, &got_picture, &avpkt);
    if (got_picture) {
            //...

    AVFrame *pFrameRGB = avcodec_alloc_frame();
    // Determine required buffer size and allocate buffer
    int numBytes=avpicture_get_size(PIX_FMT_RGB24, c->width, c->height);
    uint8_t *buffer=(uint8_t *)av_malloc(numBytes*sizeof(uint8_t));
    avpicture_fill((AVPicture *)pFrameRGB, buffer, PIX_FMT_RGB24, c->width, c->height);

    struct SwsContext *img_convert_ctx = sws_getContext(c->width, c->height, PIX_FMT_YUV420P, c->width, c->height, PIX_FMT_BGR24, SWS_BICUBIC, NULL, NULL, NULL);
    sws_scale(img_convert_ctx, picture->data, picture->linesize, 0, picture->height, pFrameRGB->data, pFrameRGB->linesize);
    sws_freeContext(img_convert_ctx);
    // Save the frame to disk
    if(++frame<=5)
        SaveFrame(pFrameRGB, c->width, c->height, frame); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T13:52:19.877

如果我更改为转换为 ARGB，结果很好@@。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T06:13:35.850

也许你无意中选择了`PIX_FMT_BGR24`你的意思`PIX_FMT_RGB24`？

```
struct SwsContext *img_convert_ctx = sws_getContext(c->width, c->height, 
    PIX_FMT_YUV420P, c->width, c->height, PIX_FMT_RGB24, SWS_BICUBIC, 
    NULL, NULL, NULL); 
```

# ios - 检查 NSDate 是否在 EKEventStore 中

> ID：11815442
> 
> 赞同：2
> 
> 时间：2012-08-05T09:47:14.823
> 
> 标签：ios, ios5, eventkit, nscalendar, tapku

我正在尝试检查某个 nsdate 是否在我的 Event Store 中。当前月份的事件存储在一个`NSMutableArray`. 我正在使用这些函数来创建事件存储并在其上获取对象：

```
- (void) viewDidLoad{
[super viewDidLoad];

    self.almacenEventos = [EKEventStore new];
    self.listaEventos = [NSMutableArray new];

    self.calendario = [self.almacenEventos defaultCalendarForNewEvents];

    [self.listaEventos addObjectsFromArray:[self monthEvents]];

}

-(NSArray *) monthEvents{

    NSDate *firstMonthDay = [NSDate firstDayOfCurrentMonth];

    NSDate *lastMonthDay = [NSDate firstDayOfNextMonth];

    NSArray *calendarios = [[NSArray alloc]initWithObjects:self.calendario, nil];

    NSPredicate * predicado = [self.almacenEventos predicateForEventsWithStartDate:firstMonthDay endDate:lastMonthDay calendars:calendarios];

    return [self.almacenEventos eventsMatchingPredicate:predicado];
} 
```

`firstDayOfCurrentMonth`并将`firstDayOfNextMonth`正确返回当前月份的日期。初始化后，`self.listaEventos`拥有所有当月事件。

检查 a 是否`self.almacenEventos`包含 a时会出现问题`NSDate`。我正在使用tapku 日历来显示月份网格。并遵循开发人员和其他第 3 方帮助的所有说明。

我已经调试了代码，试图找到问题所在。“d”是要比较的日期，返回长格式 2012-08-29 00:00:00 +0000。

单个事件的日期格式如下：

```
startDate = 2012-08-04 22:00:00 +0000;
endDate = 2012-08-05 21:59:59 +0000; 
```

所以我被困在这个函数的中间，数组中存在一个给定日期的对象。如果我使用手动日期数组而不是事件数组，它就像一个魅力......那么我在这里做错了什么？是退回的`NSDateComponents`吗？我该怎么做？非常感谢

```
- (NSArray*) checkDate:(TKCalendarMonthView*)monthView marksFromDate:(NSDate*)startDate toDate:(NSDate*)lastDate{

    NSMutableArray *marks = [NSMutableArray array];

    NSCalendar *cal = [NSCalendar currentCalendar];
    [cal setTimeZone:[NSTimeZone timeZoneForSecondsFromGMT:0]];

    NSDateComponents *comp = [cal components:(NSYearCalendarUnit | NSMonthCalendarUnit | NSDayCalendarUnit) fromDate:startDate];

    NSDate *d = [NSDate new];
    d = [cal dateFromComponents:comp];

    // Init offset components to increment days in the loop by one each time
    NSDateComponents *offsetComponents = [[NSDateComponents alloc] init];
    [offsetComponents setDay:1];

    // for each date between start date and end date check if they exist in the data array
    while (YES) {      

        // Is the date beyond the last date? If so, exit the loop.
        // NSOrderedDescending = the left value is greater than the right
        if ([d compare:lastDate] == NSOrderedDescending) {
            break;
        }

        // If the date is in the data array, add it to the marks array, else don't
        if ([self.listaEventos containsObject:d]) {
            [marks addObject:[NSNumber numberWithBool:YES]];
        } else {
            [marks addObject:[NSNumber numberWithBool:NO]];
        }

        // Increment day using offset components (ie, 1 day in this instance)
        d = [cal dateByAddingComponents:offsetComponents toDate:d options:0];
    }

    return [NSArray arrayWithArray:marks];

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T17:56:17.517

该`checkDate:marksFromDate:toDate`方法期望`self.listaEventos`由`NSMutableDictionary`包含以下数组的日期索引`EKEvent`：

```
// There are events on these 4 dates
self.listaEventos = {
    "2012-08-15 00:00:00 +0000" = (...),
    "2012-08-17 00:00:00 +0000" = (...),
    "2012-08-18 00:00:00 +0000" = (...),
    "2012-08-29 00:00:00 +0000" = (...)
} 
```

我会改为`monthEvents`：

```
-(NSMutableDictionary *) monthEvents{
    NSMutableDictionary *retVal;

    NSDate *firstMonthDay = [NSDate firstDayOfCurrentMonth];
    NSDate *lastMonthDay = [NSDate firstDayOfNextMonth];
    NSArray *calendarios = [[NSArray alloc]initWithObjects:self.calendario, nil];
    NSPredicate * predicado = [self.almacenEventos predicateForEventsWithStartDate:firstMonthDay endDate:lastMonthDay calendars:calendarios];

    NSArray *results = [self.almacenEventos eventsMatchingPredicate:predicado];
    // Next add all events to our dictionary indexed by date
    for (EKEvent *evt in events) {
        NSDate *dateKey = [self dateWithoutTime:evt];

        // A date may have multiple events. Get all current events for the date
        NSArray *eventsForDate = [retVal objectForKey:dateKey];
        // If no events were set for the date
        if (![eventsForDate isKindOfClass:[NSArray class]]) {
            // create an array using a factory method
            eventsForDate = [NSArray arrayWithObject:evt];
        } else {
            // append the object to our array of events
            eventsForDate = [eventsForDate arrayByAddingObject:evt];
        }

        // Update the dictionary
        [retVal setObject:eventsForDate forKey:dateKey];
    }

    return retVal;
}

- (NSDate *)dateWithoutTime:(NSDate *)date 
{
    TKDateInformation info = [date dateInformationWithTimeZone:[NSTimeZone systemTimeZone]];
    // lop off hour/minute/seconds so all dates for the day are equal
    info.hour = 0;
    info.minute = 0;
    info.second = 0;

    return [NSDate dateFromDateInformation:info timeZone:[NSTimeZone timeZoneForSecondsFromGMT:0]];
} 
```

# java - 这段代码是否需要 getter 和 setter 才能运行？

> ID：11815449
> 
> 赞同：3
> 
> 时间：2012-08-05T09:48:25.150
> 
> 标签：java, setter, getter

我在下面包含了我的所有代码（5 个课程），用于一个简单的学生数据库。

我与一个相信在*Name*、*Address*和*Student*类中必须包含当前存在的所有 getter 和 setter 的人共同编写了这段代码。我认为代码在没有它们的情况下将起作用，并且它们不是必需的并且应该被删除？如果他们是必要的，有人可以解释为什么或者有人可以确认他们没有必要吗？

### 地址类

```
public class Address {

private String street, area, city, country;

public Address(String street, String area, String city, String country) {
    this.street = street;
    this.area = area;
    this.street = city;
    this.country = country;
}

public void setStreet(String street) {
    this.street = street;
}

public void setArea(String area) {
    this.area = area;
}

public void setCity(String city) {
    this.city = city;
}

public void setCountry(String country) {
    this.country = country;
}

public String street() {
    return street;
}

public String area() {
    return area;
}

public String city() {
    return city;
}

public String country() {
    return country;
}

    /** Returns area, street, city and country concatenated together respectively */
public String toString() {
    return area + ", " + street + ", " + city + ", " + country + ".";
}

    } 
```

### 名称类

```
public class Name{

private String firstName, lastName;

public Name (String firstName, String lastName){
    this.firstName = firstName;
    this.lastName = lastName;
}

public void setFirstName(String firstName){
    this.firstName = firstName;
}

public void setLastName(String lastName){
    this.lastName = lastName;
}

public String getFirstName() {
    return firstName;
}

public String getLastName() {
    return lastName;
}

/** Returns first name concatenated to last name */
public String toString() {
    return firstName + " " + lastName;
}

} 
```

### 学生班

```
 public class Student {
    private Name name; // This is calling from the Name class, giving it the               name 'name'
    private Address address; // This calls from Address, giving it the name 'address'

    private char gender;

    private String course, college;

    private int gradePointAverage, id, age, level;

    public Student(int id, String firstName, String lastName, String street, String area, String city, String country, int age, char gender, String college, String course,  int level, int gradePointAverage){ //This is the list of variables called from the Student class
        this.id = id;
        this.name = new Name(firstName, lastName);
        this.address = new Address(street, area, city, country);
        this.age = age;
        this.gender = gender;
        this.college = college;
        this.course = course;
        this.level = level;
        this.gradePointAverage = gradePointAverage;
    }

    public int getId(){
        return id;
    }

    public String getName(){
        return name.toString();
    }

    public String getAddress(){
        return address.toString();
    }

    public int getAge(){
        return age;
    }

    public char getGender(){
        return gender;
    }

    public String getCollege(){
        return college;
    }

    public int getLevel() {
        return level;
    }

     public String getCourse() {
        return course;
    }

    public int getGradePointAverage() {
        return gradePointAverage;
    }

    public void printStudent() {
        System.out.println("The Student " + name.toString() + " is logged under the student ID number " + id + ".");
        System.out.println("They live at " + address.toString() + " and their age is " + age + ".");
        System.out.println("Their gender is " + gender + ".");
        System.out.println("The student studies at " + college + " attending classes in " + course + ".");
        System.out.println("Their level is " + level + " and the student grade average in points is " + gradePointAverage + ".");
        System.out.println();
    }

    } 
```

### 大学社区班

```
 import java.util.*;

public class CollegeCommunity

    {

    private ArrayList<Student> students; // Setting up an arraylist to store student details

        public CollegeCommunity()

            {
                students = new ArrayList<Student>();
            }

        public void addStudent(Student student) // adds a student.

            {
                students.add(student); // .add method command.
            }

        public void removeStudent(int id) // deleting a student, after being passed id to locate desired student.

            {
                for (int i=0; i<students.size(); i++ ){ // using a loop to decide what student to remove by matching the student ID which was passed to the method with the student ID's on record. Once there's a match, the student will be removed (.remove).
                    if(students.get(i).getId()==id) {
                        students.remove(i);
                    }
                }
            }

        public void showStudent(int id) // same as remove above but instead using print command to view details of particular student.

            {
                for (int i=0; i<students.size(); i++ ){
                    if(students.get(i).getId()==id) {
                        students.get(i).printStudent();
                   }
                }
            }

        public void showAllStudents()

            {
                for (int i=0; i<students.size(); i++ ){ // This loop command will display ALL student details as no specific ID was passed, so it will run as long as value 'i' is less than student.size.
                    int id=students.get(i).getId();
                        showStudent(id);
                }
            }

        public void showStudentsInCourse(String course) // This will show students in a particular course.

            {
                for(int i=0; i<students.size(); i++ ){ // Loop is same as remove but comparing the string course with the course of each student. .equals is used to compare strings.
                    if(students.get(i).getCourse().equals(course)){
                        int id=students.get(i).getId();
                            showStudent(id);
                    }
                }
            }

        public int calculateGradePointAverage() // calculating the grade point average as a percentage

        {
            int total = 0;
            for (int i = 0; i < students.size(); i++ ){
                total = total + students.get(i).getGradePointAverage(); // total is calculated as it loops, each students score (getGradePointAverage).
            }

            total = total / students.size(); // final figure is total divided by the number of students, to give an average score.

            return total;

        }
} 
```

### 测试系统类

```
 import java.util.*;

    public class TestSystem

{
   public static void main(String[] args)

    {

        Scanner sc = new Scanner(System.in);

        Student student;
        CollegeCommunity collegeCommunity = new CollegeCommunity(); // New CollegeCommunity created called 'collegeCommunity'.

        int id, age, level, gradePointAverage; // ints created for student id, age, level of course, and the grade point value

        String fName,lName, street, area, city, country, course, college; // first name, last name strings created

        char gender; // character gender created

        boolean finish = false; // boolean finish has value of False.

            do

             {
                switch(getMenu())

                {

                    case '1':

                        System.out.println();

                        System.out.print("Please enter a new Student ID > ");
                        id = sc.nextInt();
                        sc.nextLine();

                        System.out.println();

                        System.out.print("Please enter the Student's first name > ");
                        fName = sc.nextLine();

                        System.out.println();

                        System.out.print("Please enter the Student's last name > ");
                        lName = sc.nextLine();

                        System.out.println();

                        System.out.print("Please enter the street > ");
                        street = sc.nextLine();

                        System.out.println();

                        System.out.print("Please enter the area > ");
                        area = sc.nextLine();

                        System.out.println();

                        System.out.print("Please enter the city > ");
                        city = sc.nextLine();

                        System.out.println();

                        System.out.print("Please enter the country > ");
                        country = sc.nextLine();

                        System.out.println();

                        System.out.print("Please enter the age > ");
                        age = sc.nextInt();

                        sc.nextLine();

                        System.out.println();

                        System.out.print("Please enter the gender > ");
                        gender = sc.nextLine().charAt(0);

                        System.out.println();

                        System.out.print("Please enter the college > ");
                        college = sc.nextLine();

                        System.out.println();

                        System.out.print("Please enter the course > ");
                        course = sc.nextLine();

                        System.out.println();

                        System.out.print("Please enter level > ");
                        level = sc.nextInt();

                        sc.nextLine();

                        System.out.println();

                        System.out.print("Please enter the average grade in points [0-100] > ");
                        gradePointAverage = sc.nextInt();

                        sc.nextLine();

                        System.out.println();

                        student = new Student(id, fName, lName, street, area, city, country, age, gender, college, course, level, gradePointAverage);
                        collegeCommunity.addStudent(student);

                        break;

                    case '2':

                        System.out.println();

                        System.out.print("Please enter the student ID number > ");
                        id = sc.nextInt();

                        sc.nextLine();
                        // this will delete the student selected
                        collegeCommunity.removeStudent(id);

                        System.out.println();

                        System.out.print("Student " + id + " has been deleted.");

                        System.out.println();
                        System.out.println();

                        break;

                    case '3':

                        System.out.println();

                        System.out.print("Please enter the student ID number > ");
                        id = sc.nextInt();

                        sc.nextLine();
                        // This will allow for the details of the selected student to be displayed. Calls stored data from community college.
                        collegeCommunity.showStudent(id);

                        System.out.println();
                        System.out.println();

                        break;

                    case '4':

                        System.out.println();
                        // This will show all of the students stored in the system.
                        collegeCommunity.showAllStudents();

                        System.out.println();

                        break;

                    case '5':

                        System.out.println();

                        System.out.print("Please enter the course > ");
                        course = sc.nextLine();
                        // This will show students that are enrolled in a chosen course.
                        collegeCommunity.showStudentsInCourse(course);

                        System.out.println();

                        break;

                    case '6':

                        System.out.println();

                        System.out.print("The Average grade score is " + collegeCommunity.calculateGradePointAverage() + "%");

                        System.out.println();

                        break;

                    case 'x':
                    case 'X':

                        finish = true; // boolean value changes to true if X is selected

                        System.exit(0);

                    break;

                        default:

                        System.out.println();

                        System.out.println("That is an invalid selection.");

                        System.out.println("      Please try again");

                    break;

                    }

        }while (!finish);

    }

        public static char getMenu()

            {
                Scanner sc = new Scanner(System.in);

                System.out.println();

                System.out.println("This is your community college menu");
                System.out.println("Please select from the menu options below");

                System.out.println();

                System.out.println("1 Add a Student");

                System.out.println();

                System.out.println("2 Delete a Student");

                System.out.println();

                System.out.println("3 Show details on an individual student");

                System.out.println();

                System.out.println("4 Show details on all students");

                System.out.println();

                System.out.println("5 Shows details on all students on a course");

                System.out.println();

                System.out.println("6 Display the average grade (points)");

                System.out.println();

                System.out.println("X Exit");

                System.out.println();
                System.out.println();

                System.out.print("Please make selection > ");

                return sc.next().charAt(0);
            }

    } 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-05T09:55:58.193

您始终可以将属性设置为默认范围`public`或`protected`使用默认范围并访问它们（前提是该类位于适当的包中）

```
myStudent.age = 9; 
```

也就是说，使用 setter 和 getter 始终是一种好习惯。它简化了对正在设置的值的控制。例如。你可以在你的集合中打勾，这样年龄就不会小于 4

```
public void setAge(int age) throws Exception {
  if (age <= 3) {
    throw new Exception("Age must be more than 3");
  }
  this.age = age;
} 
```

使用属性设置它留给程序员，他们可能会错过代码中某处的检查。稍后进行调试非常棘手。

Setter 和 getter 还有助于添加日志/断点来检查程序的行为。

大多数体面的 IDE 允许您仅根据属性自动编写 setter 和 getter 代码，所以这没什么大不了的。

作为旁注，我通常建议在需要时存储出生日期并计算年龄，因为年龄是一个会发生变化的值，而出生日期不会发生变化，并且您始终可以根据出生日期计算年龄，但不能相反。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T10:01:18.347

我不明白为什么此时它们是必要的，尽管通过删除它们很容易验证。由于 Java 是一种编译语言，如果代码的其他部分正在使用这些方法（除非您的代码的一部分或您使用的框架使用反射），您通常会在编译时得到错误。

也许您正在编写代码的人正计划添加某种需要这些方法的对象关系映射框架？

就个人而言，我会说您永远不应该添加未使用的代码。代码库复杂性的主要贡献者是它拥有的代码行数，因此确实没有理由在其中有任何未使用的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-05T10:10:28.263

支持 SJuan76 的文章，并反驳另一篇文章 - 这需要说：

通过从一开始就建立和使用 getter/setter，您已经使您的代码能够在未来（如果您现在不这样做）进行所有边界检查、日志记录等，而无需客户端代码适应转换为 getter/setter。

这是一个最佳实践，可以为您节省更多时间。

您应该始终考虑您今天编写的代码将在明天为该代码建立接口。第一次就做好/灵活/可维护。

# c++ - 函数指针映射。指向的函数是否必须是静态的？

> ID：11815451
> 
> 赞同：3
> 
> 时间：2012-08-05T09:48:30.187
> 
> 标签：c++, stl, map, static, function-pointers

我昨天才弄清楚函数指针，我正在游戏引擎中实现控制台/命令系统。

我认为使用带有字符串键和函数指针值的映射将消除在运行命令时选择要做什么时对大量 if 语句的需要。

我收到此错误：

```
argument of type
    "void (Game::*)(std::string prop, std::string param)"
is incompatible with parameter of type
    "void (*)(std::string prop, std::string param)" 
```

现在我想我知道这意味着什么了。我可以使用静态函数来解决这个问题，但我希望能够引用`Game`.

然而，函数指针映射必须能够指向任何具有返回 void 和 2 个字符串参数的函数。

首先这可能吗？

如果不是，是否可以通过静态成员函数修改实例变量？我对此不抱太大希望。

一如既往地感谢任何帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-05T10:14:09.567

函数指针很糟糕。除非您绝对被迫，否则永远不要使用它们。相反，更喜欢`std::function<void(std::string, std::string)>`和`std::bind`/lambdas。与函数指针不同，它们可以与任何函数对象一起使用，包括绑定的成员函数。

```
std::unordered_map<std::string, std::function<void()>> command_map;
Game game;
Help helper;
command_map["quit"] = [] { exit(); };
command_map["play"] = [&] { game.play(); };
command_map["help"] = [&] { helper.help(); }; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T09:58:57.323

您可以在映射中放置一个对象和一个函数指针。然后调用函数的静态版本，它只调用传入对象的函数的真实版本。您可以对任意数量的函数重复此操作`Game`。

```
class Game
{
    void yourFunc1(std::string prop, std::string param)
    {
        // do stuff
    }

    void yourFunc1_static(Game* g, std::string prop, std::string param)
    {
        g->yourFunc1( prop, param );
    }
};

struct MapEntry
{
    Game* game;
    void (*func)(std::string prop, std::string param);
};

std::map<key_type, MapEntry> _map;
...
_map[key].func( game, "prop", "param" ); 
```

# c++ - 如何仅按字母列出？

> ID：11815453
> 
> 赞同：0
> 
> 时间：2012-08-05T09:48:50.523
> 
> 标签：c++

我有以下两个功能。如何更改代码以使其按字母显示？

例如，如果我定义“A”，它将只显示以 A 开头的AllRecords。

```
char* displayRecordContent (CountryRecordType ctryRec)
{
  char * output;
  output = ctryRec.Country;
  return output;
}

// ====================================================================

void showAllRecords ()
{
  int i=0;
  char * result;
  for (i=0; i<NoOfRecordsRead; i++)
  {
    result = displayRecordContent (globalCountryDataArray [i]);
    printf ("(%d) %s\n", i, result);
  }
} 
```

输出：

```
(0) Andorra
(1) United Arab Emirates
(2) Afghanistan
(3) Antigua and Barbuda
(4) Anguilla
(5) Albania
(6) Armenia
(7) Netherlands Antilles
(8) Angola
(9) Antarctica 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T09:53:54.720

那是你要的吗？

```
void showAllRecords ()
{
  int i=0;
  char * result;
  for (i=0; i<NoOfRecordsRead; i++)
  {
    result = displayRecordContent (globalCountryDataArray [i]);
    if(*result == 'A') // or other letter
      printf ("(%d) %s\n", i, result);
  }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-05T09:54:03.740

```
void showAllRecords (char begin)
{
  int i=0, j=0;
  char * result;
  for (i=0; i<NoOfRecordsRead; i++)
  {
    result = displayRecordContent (globalCountryDataArray [i]);
    if (result[0] == begin) {
        printf ("(%d) %s\n", j, result);
        j++;
    }
  }
} 
```

# matlab - 绘制被 trapz(x,f) 低估的频率密度

> ID：11815456
> 
> 赞同：0
> 
> 时间：2012-08-05T09:49:29.190
> 
> 标签：matlab, plot

我想从下面的数据集中绘制频率密度图，bin width=10 个单位：

`[f x]=hist(p,1:10:200); bar(x,f/trapz(x,f));`

然而`sum(10*f)/trapz(x,f)=1.0461`。面积不应该是`trapz`=1吗？

![在此处输入图像描述](../Images/0097787c1e9ab2c56b6a9e978044218f.png)

```
`p=[23.7648
40.5013
34.7466
24.8569
68.2174
40.8811
78.1818
18.6804
22.3158
80.4086
15.0927
44.1342
163.6714
6.4450
22.9075
17.5615
8.8536
26.3300
32.6789
42.4225
22.3832
3.0519
16.6581
32.9496
10.3606]` 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T22:36:13.497

`trapz`是一种积分计算，它通过[一阶保持](http://en.wikipedia.org/wiki/First-order_hold)重构信号，而`sum(10*f)`使用[零阶保持](http://en.wikipedia.org/wiki/Zero-order_hold)。这就是为什么您的比率不是 1。有关更多信息，您还可以查看[Orders of approximation](http://en.wikipedia.org/wiki/Orders_of_approximation)。

# java - 来自静态方法的新活动，Android Java

> ID：11815457
> 
> 赞同：0
> 
> 时间：2012-08-05T09:49:38.110
> 
> 标签：java, android, methods, android-activity, static

我正在制作一个问题类型的游戏，每个不同类型的问题都有不同的布局，因此也是不同的活动。

我的主要活动，在点击“播放”按钮后，应该用相应的活动随机化一个问题以开始。

一旦回答了一个问题，就应该重复这个问题。为此，我想要一个 STATIC 方法来随机化并启动相应的 Activity，但我无法使其工作。

这是你开始游戏的时候。它将第一个问题随机化。type ==3 是一个问题的类型（有很多不同）

```
 if(Var.qList.get(Var.rndindex).getType()==3)

            startActivity(new Intent(this, PlayWordMeaning.class));
        } 
```

这很好用，但我有一个 Var.Class 包含所有静态内容，我希望有一个方法**可以选择下一个问题**，这样一旦有人正确回答，我就可以从其他问题活动中调用它。我试图用相同的代码在那里创建一个静态方法，但它只是没有工作，即使我发送了上下文。

请帮帮我:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T07:36:35.937

如果我理解正确，您可以简单地创建一个类名数组，然后生成一个随机数来选择这样的类：

```
 Class[] actArr = new Class[2];

    actArr[0] = Activity2.class;
    actArr[1] = Activity3.class;

    Random rn = new Random(System.currentTimeMillis());
    int val = rn.nextInt(2);

    Intent in = new Intent(this, actArr[val]);
    startActivity(in); 
```

有用！。请记住将这些活动类放在您的 AndroidManifest.xml 文件中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T10:37:04.073

**1.**首先我建议你有一个`plain Java class`有一个`randomize function`，不管它是不是静态的......它会**根据剩下的总问题随机返回一个数字。**（**提示**：曾经提出的问题将从列表中删除）

**2.**使用地图将问题编号链接到活动名称。

`HashMap< Integer,String >` **// 其中 Integer 是 Ques，String 是 Activity Name**

# android - 检查自定义字体是否可以显示字符

> ID：11815458
> 
> 赞同：12
> 
> 时间：2012-08-05T09:49:48.610
> 
> 标签：android, typeface, custom-font

我有一个显示框字符的自定义字体。我使用的字体显然不支持所有语言。我想检查我要显示的字符串是否可以通过我的自定义字体显示。如果不能，那么我想使用标准的 Android 字体（我知道它可以显示字符）。我找不到检查我的字体是否可以显示特定字符​​串的方法。我确信我已经在某处看到了一种方法。有人知道吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-03-27T05:49:00.743

**更新：** 如果您正在为 API 级别 23 或更高级别进行编码，请使用[Orson Baines](https://stackoverflow.com/a/36995780/1730966)的回答中提到的[Paint.hasGlyph()](https://developer.android.com/reference/android/graphics/Paint.html#hasGlyph(java.lang.String))。否则请参阅下面的原始答案。

* * *

正如您在自己的答案中提到的那样，没有可用于检查的内置方法。但是，如果您对要检查的字符串/字符有一定的控制权，则实际上可以使用更具创造性的方法来做到这一点。

您可以绘制一个您知道要检查的字体中缺少的字符，然后绘制一个您想知道它是否存在的字符，然后最后比较它们，看看它们是否相同。

这是一个代码示例，说明了我如何实现此检查：

```
public Bitmap drawBitmap(String text){
    Bitmap b = Bitmap.createBitmap(BITMAP_WIDTH, BITMAP_HEIGHT, Bitmap.Config.ALPHA_8);
    Canvas c = new Canvas(b);
    c.drawText(text, 0, BITMAP_HEIGHT / 2, paint);
    return b;
}

public byte[] getPixels(Bitmap b) {
    ByteBuffer buffer = ByteBuffer.allocate(b.getByteCount());
    b.copyPixelsToBuffer(buffer);
    return buffer.array();
}
public boolean isCharacterMissingInFont(String ch) {
    String missingCharacter = "\u0978"; // reserved code point in the devanagari block (should not exist).
    byte[] b1 = getPixels(drawBitmap(ch));
    byte[] b2 = getPixels(drawBitmap(missingCharacter));
    return Arrays.equals(b1, b2);
} 
```

使用此方法需要牢记一些重要的限制：

*   您检查的字符（对 的参数`isCharacterMissing`）必须是非空格（可以使用[Character.isWhitespace()](http://developer.android.com/reference/java/lang/Character.html#isWhitespace%28int%29)检测）。在某些字体中，缺失的字符会呈现为空白，因此如果您比较存在的空白字符，则会错误地将其报告为此类字体中的缺失字符。
*   该`missingCharacter`成员必须是已知在要检查的字体中缺失的字符。我正在使用的代码点[U+0978](http://www.fileformat.info/info/unicode/char/0978/index.htm)是天城文 Unicode 块中间的保留代码点，因此当前所有 Unicode 兼容字体中都应该缺少它，但是将来当新字符添加到 Unicode 时，这个代码点可能分配给一个真实的角色。所以这种方法不是未来的证明，但如果您自己提供字体，您可以确保在更改应用程序字体时使用丢失的字符。
*   由于这个检查是通过绘制位图并比较它们来完成的，所以它不是很有效，所以它应该只用于检查应用程序中的几个字符而不是所有字符串。

**更新：**

正如其他人指出的那样，查看 U+0978 的解决方案并没有奏效。该字符是在2014 年[6 月的](http://blog.unicode.org/2014/06/announcing-unicode-standard-version-70.html)[Unicode 7.0](http://www.unicode.org/charts/PDF/Unicode-7.0/)版本中添加的。另一种选择是使用存在于 unicode 中但不太可能用于普通字体的字形。

[早期王朝楔形文字](http://www.unicode.org/charts/PDF/U12480.pdf)块中的[U+124AB](http://www.fileformat.info/info/unicode/char/124ab/index.htm)可能是许多字体中根本不存在的东西。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2016-05-03T04:46:10.757

从 Android 版本 23 开始，您可以像这样测试它：

```
Typeface typeface;
//initialize the custom font here

//enter the character to test
String charToTest="\u0978";
Paint paint=new Paint();
paint.setTypeface(typeface);
boolean hasGlyph=paint.hasGlyph(charToTest); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-12-12T12:22:49.983

please check the source code from [Googles Mozc](https://github.com/google/mozc/blob/afb03ddfe72dde4cf2409863a3bfea160f7a66d8/src/android/src/com/google/android/inputmethod/japanese/emoji/EmojiRenderableChecker.java) project. The EmojiRenderableChecker class seems to work pretty well!

it's like a compat version for [Paint.hasGlypgh](https://developer.android.com/reference/android/graphics/Paint.html#hasGlyph(java.lang.String)) (added in Marshmallow).

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-05-07T23:55:34.143

@nibarius 的回答效果很好，但字符不同：“\u2936”。

但是，该解决方案在内存、cpu 和时间方面都很繁重。我需要一个针对极少数字符的解决方案，所以我通过只检查边界来实现一个“快速而肮脏”的解决方案。它的工作速度大约快 50 倍，因此更适合我的情况：

```
public boolean isCharGlyphAvailable(char... c) {
      Rect missingCharBounds = new Rect();
      char missingCharacter = '\u2936';
      paint.getTextBounds(c, 0, 1, missingCharBounds); // takes array as argument, but I need only one char.
      Rect testCharsBounds = new Rect();
      paint.getTextBounds(c, 0, 1, testCharsBounds);
      return !testCharsBounds.equals(missingCharBounds);
} 
```

我应该警告说，这种方法不如@nibarius 准确，并且存在一些误报和误报，但如果您只需要测试几个字符以便能够回退到其他字符 - 这个解决方案很棒。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-12-08T09:47:00.267

对于那些仍然希望您的应用程序与低于 23 的 API 兼容并且仍然在代码中使用 hasGlyph 函数的人，您可以通过以下方式使用 @TargetApi(23)：

```
@TargetApi(23)
public boolean isPrintable( String c ) {
    Paint paint=new Paint();
    boolean hasGlyph=true;
    hasGlyph=paint.hasGlyph(c);
    return hasGlyph;
} 
```

然后在您的代码中：

```
if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.M) {
    if(isPrintable(yourString)) {
        //Do Something
    }
} 
```

唯一的问题是在低于 23 的 API 中，您的应用可能会显示空白符号。但至少在 API23+ 中，您的应用程序将是完美的。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-12-05T17:34:34.193

要检查音乐符号♫是否显示在字符串中（如果在某些设备上没有显示），您可以尝试[测量](https://developer.android.com/reference/android/graphics/Paint.html#measureText(java.lang.String,%20int,%20int))字符串宽度；`if width == 0`然后符号不存在。

```
Paint paint = new Paint(Paint.ANTI_ALIAS_FLAG);
Rect rtt = new Rect();
paint.getTextBounds( "♫", 0, 1, rtt );
    if( rtt.width() == 0 ){
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2022-01-25T01:00:02.327

使用[`PaintCompat.hasGlyph`](https://developer.android.com/reference/androidx/core/graphics/PaintCompat#hasGlyph(android.graphics.Paint,%20java.lang.String))which 依赖`Paint.hasGlyph`于 API 版本 23 及更高版本，但对较旧的 Android 版本具有向后兼容的实现。

# session - 来自两个表的 cakephp 会话数据

> ID：11815467
> 
> 赞同：2
> 
> 时间：2012-08-05T09:50:25.893
> 
> 标签：session, cakephp

一个帐户 hasAndBelongsToMany users

用户 hasAndBelongsToMany 帐户

一个账户有很多模板

一个模板属于一个帐户

帐户无法登录，用户可以代表该帐户行事。用户为该帐户创建模板，我的数据库的问题是模板需要 account_id，以便该帐户使用的其他用户可以访问该模板，但我遇到的问题是蛋糕找不到与该用户相关的 account_id并将其放在模板表中。

相关表格是

用户 - id、姓名、地址 帐户 - id、公司名称、abn accountss_users - id、user_id、account_id 模板 - id、名称、描述

```
 function add() {
        $this->set('title_for_layout', 'Please Enter Your Temaplate Details');
        $this->set('stylesheet_used', 'style');
        $this->set('image_used', 'eBOXLogo.jpg');  

        if($this->request->is('post')){ $accounts=$this->User->find('all', array('f' => array('Account.companyName'), 'conditions' => array('User.id' => $this->Auth->user('id')), 'contain' => array('accountsuser.user_id')));
    $this->Template->create();

          if ($this->Template->save($this->request->data)) {
            $this->Session->setFlash('The template has been saved');
            $this->redirect( array('controller' => 'Fields','action' => 'add'));
          } else {
            $this->Session->setFlash('The template could not be saved. Please, try again.');
          }
        }

        $this->set('accounts', $accounts); 

     } 
```

模板视图

```
<h2>Please enter the details of your Template</h2></br>
<p>After Hitting Submit You Can Start Adding Various Fields</p>

<?php
echo $this->Form->create('Template', array('action'=>'add'));
echo $this->Form->input('name',array('label'=>'Template Name: '));
echo $this->Form->input('account_id',array('label'=>'Business: ', 'type' => 'select', 'options' => $accounts));
echo $this->Form->input('description',array('label'=>'Short Description Of Template: '));
echo $this->Form->end('Click Here To Submit Template');
?> 
```

编辑 - 问题是 $accounts 行，它当前将标题加载到视图的下拉框中，而不是帐户。公司名称及其引发数据库错误。

调试 $accounts 时，它会打印出这个

```
array(
    (int) 0 => array(
        'User' => array(
            'password' => '*****',
            'id' => '14',
            'username' => 'cheese',
            'title' => 'mr',
            'first_name' => '',
            'surname' => 'hall',
            'email' => 'jtg987@hotmail.com',
            'date_joined' => null,
            'active' => true,
            'access_level' => '1'
        ),
        'Relationship' => array(),
        'Account' => array(
            (int) 0 => array(
                'id' => '10',
                'street' => '6 ridley court',
                'city' => 'doncaster',
                'postcode' => '3109',
                'state' => 'vic',
                'country' => 'australia',
                'active' => false,
                'company_name' => 'kfc',
                'abn' => '99999',
                'AccountsUser' => array(
                    'id' => '3',
                    'account_id' => '10',
                    'user_id' => '14'
                )
            )
        )
    )
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T10:23:43.157

你试过递归吗？

在您的模板控制器中：

```
$this->User->recursive = 2; //now you will get businesses related to the users
$current_user = $this->User->findById($id_of_the_user); //find the current user
$this->set('current_user', $current_user); 
```

在您的模板视图中：

```
<?php
echo $this->Form->create('Template', array('action'=>'add'));
echo $this->Form->input('name',array('label'=>'Template Name: '));
echo $this->Form->input('description',array('label'=>'Short Description Of Template: '));
echo $this->Form->input('business_id', array('type' => 'hidden', 'value' => $current_user['Business']['id']));
echo $this->Form->end('Click Here To Submit Template');
?> 
```

如果您不知道 $current_user 中的内容，请将`<?php debug($current_user); ?>`.

# codeigniter - 依赖输入文本代码点火器

> ID：11815472
> 
> 赞同：0
> 
> 时间：2012-08-05T09:52:40.870
> 
> 标签：codeigniter, text, input, types

嗨，我正在使用 codeigniter，我想制作相关输入文本，如下例所示：

我有三个字段 numberphone、Name、Society，当用户输入 numberphone 时，我想自动填写 Name 和 Society：

这是我在 Mysql 中的表的结构：

人（身份证、电话号码、姓名、社会）

S 的形式如下：这是我的观点：

风景

```
<table>
            <tr>
               <td valign="top">Telephone<span style="color:red;">*</span></td>
               <td>
                 <input type="text" name="telephone" class="text" id="telephone"/>
                  <?php echo form_error('telephone'); ?>
               </td>
            </tr>
            <tr>
               <td valign="top">Usager<span style="color:red;">*</span></td>
               <td>
                  <input type="text" name="usager" class="text" id="usager" readonly="readonly">
                  <?php echo form_error('nbcas'); ?>
               </td>
            </tr>
            <tr>
               <td valign="top">society<span style="color:red;">*</span></td>
               <td>
                  <input type="text" name="society" class="text" id="society" readonly="readonly">
                  <?php echo form_error('nbcas'); ?>
               </td>
            </tr>

               <td><input type="submit" value="Enregistrer"/></td>
            </tr>

         </table> 
```

我的控制器：

```
public function GetUsager()
{
    if($this->input->is_ajax_request())
    {

        $telephone = $this->input->post('phone');
        $data['row'] = $this->structure->GetUsagerId($telephone);

        header('Content-Type: application/json',TRUE);
        //echo(json_encode($this->structure->GetUsagerId($usager)));
       // echo json_encode($data['usager']);
        echo json_encode($data);
    }
} 
```

和我的模特

```
function GetUsagerId ($telephone)
  {
     $this->db->select('name','society');
     $this->db->where('numberphone',$telephone);
     $query=$this->db->get('Person');

     if($query->num_rows() > 0) 
     {

         $row = $query->row();
         return $row;

     } 
```

}

视图中的jquery代码

```
$('#telephone').keyup(function() {
 var phone = $('#telephone').val();
 var baseurl = "<?= base_url(); ?>";
        $.ajax({
            type    : "POST",
            url     : baseurl+"index.php/main/GetUsager",
            dataType: 'json',
            data    : phone,
            success: function(data) {
                   $("#usager").append(data.row);

            }
        });

    }); 
```

什么都没发生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T14:11:23.963

在您的 ajax 请求代码中：

```
 $.ajax({
        type    : "POST",
        url     : baseurl+"index.php/main/GetUsager",
        dataType: 'json',
        data    : phone,
        success: function(data) {
               $("#usager").append(data.row);

        } 
```

您应该更改`$("#usager").append(data.row)`为`$("#usager").val(data.row.name)`.

**编辑：**您还应该更改`data: phone`为`data: "phone=" + phone`.

另外我认为您应该参考`data.row.name`阅读名称。我已从 更改`data.row`为`data.row.name`。检查您如何格式化 JSON 输出。

# eclipse-plugin - 具有动态添加选项卡能力的多选项卡编辑器

> ID：11815475
> 
> 赞同：0
> 
> 时间：2012-08-05T09:53:20.203
> 
> 标签：eclipse-plugin, eclipse-rcp

我正在开发一个 Eclipse RCP 插件。现在我需要创建一个能够在运行时动态添加选项卡的多选项卡编辑器，但我不知道该怎么做。有谁知道我该怎么做？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T03:56:36.687

你应该能够做到这一点类似于`MultiPageEditorPart`- 它有几个`addPage`功能。要么按原样使用这个编辑器，要么用它来获得灵感。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-30T20:47:56.867

为时已晚，但有些人可能会从这段代码中受益：

```
/** The text editor used in the new page. */
private TextEditor editor;

private StyledText text;
/**
 * Creates a multi-page editor example.
 */
public MultiPageEditor() {
    super();
    ResourcesPlugin.getWorkspace().addResourceChangeListener(this);
}

void createDynamicPage() {
    try {
        editor = new TextEditor();
        int index = addPage(editor, getEditorInput());
        setPageText(index, "new page"+index);
    } catch (PartInitException e) {
        ErrorDialog.openError(
            getSite().getShell(),
            "Error creating nested editor",
            null,
            e.getStatus());
    }
}

void createMainPage() {

    Composite composite = new Composite(getContainer(), SWT.NONE);
    GridLayout layout = new GridLayout();
    composite.setLayout(layout);
    layout.numColumns = 2;

    Button clickButton = new Button(composite, SWT.NONE);
    GridData gd = new GridData(GridData.BEGINNING);
    gd.horizontalSpan = 2;
    clickButton.setLayoutData(gd);
    clickButton.setText("click");

    clickButton.addSelectionListener(new SelectionAdapter() {
        public void widgetSelected(SelectionEvent event) {
          createDynamicPage();
        }
    });

    int index = addPage(composite);

    setPageText(index, "main page");
}

/**
 * Creates the pages of the multi-page editor.
 */
protected void createPages() {
    createMainPage(); 
```

# matlab - 在matlab中的波形文件末尾添加声音

> ID：11815481
> 
> 赞同：3
> 
> 时间：2012-08-05T09:54:25.503
> 
> 标签：matlab, audio

我有一个很大的波形文件，我想在它的末尾添加一些声音。并且因为我这样做是在一个循环中添加的，所以每次都阅读它并添加一小部分并关闭它是不明智的（这样算法是如此缓慢）。有没有更优化的方法可以在 matlab（wave 文件）的另一个末尾添加一个声音文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T17:12:15.117

在追加时将其保存在内存中怎么样？

```
big   = wavread('big.wav');
flist = dir('*.wav');
for i=1:length(flist)
  short = wavread(flist(i).name);
  big = [big, short];
end
wavwrite(big, 'bigger.wav'); 
```

如果您知道要添加到`big`向量中的样本数量，则预先分配所需的空间会更快。

# solr - 色调场的Solr突出显示

> ID：11815484
> 
> 赞同：0
> 
> 时间：2012-08-05T09:54:50.130
> 
> 标签：solr

我在突出显示时遇到了一个奇怪的问题。我有一个简单的配置大致如下：

```
<str name="defType">edismax</str>
<str name="qf">all_text</str>
...
<str name="hl">on</str>
<str name="hl.fl">*</str>
<bool name="hl.requireFieldMatch">false</bool> 
```

我在一个名为“all_text”的包罗万象的字段上运行搜索，并且我希望突出显示在文档中的其他字段上起作用。这就是为什么`requiredFieldMatch=false`，
所有其他要突出显示的字段都被索引和存储，并使用`<copyField>`指令将它们复制到 all_text。

这适用于文本字段，但是如果字段是 tint (TrieIntegerField) 类型，Solr 不会为它们返回任何突出显示信息。例如，我有这个领域：

```
<field name="age" type="tint" indexed="true" stored="true" /> 
```

和：

```
<copyField source="age" dest="all_text" /> 
```

但在搜索结果中没有突出显示它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T11:51:32.937

您使用的是哪个版本的 Solr？看起来您遇到了一个[已知问题](https://issues.apache.org/jira/browse/SOLR-3050)。

**更新**

您可以尝试使用字符串类型的复制字段来突出显示，直到问题得到解决。

# php - 检查页面是否被重定向或直接在 php 中打开

> ID：11815491
> 
> 赞同：2
> 
> 时间：2012-08-05T09:55:30.383
> 
> 标签：php

我可以检查`page2.php`是直接打开还是重定向自`page1.php`

我试过了，`if(!header_sent()){}`但没有用。

请问有人可以帮我吗？谢谢你

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-05T10:10:40.837

当用户访问 page1.php 时创建一个 Session 变量，然后在 page2.php 上检查该会话变量是否存在。如果是这样，那么用户是从 page1.php 重定向的。

page1.php：

```
<?PHP
session_start();
$_SESSION['page1'] = true;

// then the rest of your PHP code

?> 
```

page2.php：

```
<?PHP
session_start();

if( $_SESSION['page1'] ) {
    $current_referrer = 'page1.php';
}

// then the rest of your PHP code

?> 
```

显然，这种方法假设您只处理这两个页面......希望这会有所帮助

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-05T09:57:34.913

我认为这：

```
$referringSite = $_SERVER['HTTP_REFERER']; 
```

结合一点[parse_url](http://au.php.net/function.parse-url)可以很好地为您解决问题。

# oop - 只能从一个班级访问

> ID：11815492
> 
> 赞同：0
> 
> 时间：2012-08-05T09:55:40.913
> 
> 标签：oop, class, internal, access-modifiers

我有一个类和一个方法。该方法的访问修饰符现在是私有的，但可以更改。现在我只希望该方法只能在另一个类中看到。

顺便说一句，另一个班级和我的班级在同一个目录中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T10:03:23.277

允许类中的方法仅对另一个类可用的唯一方法是使用嵌套的私有类。

```
public class Enclosing
{
   private class InnerClass
   {
      public void MyMethodThatCanOnlyBeUsedByEnclosingClass()
      {}
   }
} 
```

# ios - 使用 NSFileManager 保存用户数据的正确方法是什么？

> ID：11815497
> 
> 赞同：0
> 
> 时间：2012-08-05T09:56:08.607
> 
> 标签：ios, nsfilemanager

我无法初始化我在整个程序中使用的字典来存储用户成就和分数。我有两个字典几乎相同的代码，只有 gameCenterData 字典似乎工作正常。我已经尝试更改 plist 文件名和内容，但似乎没有什么能让 playerData 字典正确地从文件中加载信息

在根视图控制器中，我有以下代码（playerData 和 gameCenterData 都是 NSMutableDictionaries 并且 plist 文件位于正确的位置）

```
-(NSString *)scoreFilePath
{
    NSArray *scorePath = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [scorePath objectAtIndex:0];

    return [documentsDirectory stringByAppendingPathComponent:@"PlayerScoreData.plist"];
}

-(NSString *)gameCenterFilePath
{
    NSArray *gameCenterPath = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [gameCenterPath objectAtIndex:0];

    return [documentsDirectory stringByAppendingPathComponent:@"GameCenterData.plist"];
} 
```

然后视图确实加载了

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    NSString *playerDataPath = [self scoreFilePath];
    if (! [[NSFileManager defaultManager] fileExistsAtPath:playerDataPath])
    {
        playerData = [NSMutableDictionary dictionaryWithContentsOfFile:[[[NSBundle mainBundle] bundlePath]   stringByAppendingPathComponent:@"scoreData.plist"]];
        [playerData writeToFile:[self scoreFilePath] atomically:YES];
        NSLog(@"Player data file does not exist");
    }
    else 
    {
        playerData = [[NSMutableDictionary alloc] initWithContentsOfFile:[self scoreFilePath]];
        NSLog(@"player data file exists");
    }
    NSLog(@"scoreData is %@",playerData);

    NSString *gameCenterPath = [self gameCenterFilePath];
    if (! [[NSFileManager defaultManager] fileExistsAtPath:gameCenterPath])
    {
        gameCenterData = [NSMutableDictionary dictionaryWithContentsOfFile:[[[NSBundle mainBundle] bundlePath]   stringByAppendingPathComponent:@"gameCenterData.plist"]];
        [gameCenterData writeToFile:[self gameCenterFilePath] atomically:YES];
        NSLog(@"game center data file does not exist");
    }
    else
    {
        gameCenterData = [[NSMutableDictionary alloc] initWithContentsOfFile:[self gameCenterFilePath]];
        NSLog(@"game center data file exists");
    }
    NSLog(@"gameCenterData is %@",gameCenterData); 
```

输出如下

```
2012-08-05 11:46:49.991 GlobeRoller[6410:1be03] Player data file does not exist
2012-08-05 11:46:49.992 GlobeRoller[6410:1be03] playerData is (null)
2012-08-05 11:46:50.061 GlobeRoller[6410:1be03] game center data file does not exist
2012-08-05 11:46:50.062 GlobeRoller[6410:1be03] gameCenterData is {
    "Career Odometer" = 0;
    "Career Score" = 0;
    "Cities Found" = 0;
    "Offline Games Played" = 0;
    "Online Games Played" = 0;
    "Online Games Won" = 0;
} 
```

我已经搜索了所有的问题和答案，看看我是否能找出为什么这对这两种方法都不起作用。您可以提供的任何帮助，或您可以指出我的资源，我将不胜感激。

谢谢你，CF

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T13:13:44.730

您尝试从包中加载的 plist 文件不存在，或者创建不正确。直接来自dictionaryWithContentsOfFile: 的文档。

> **返回值**
> 
> 一个新字典，包含路径中的字典，如果存在文件错误或文件的内容是字典的无效表示，则返回 nil。

您应该确保使用正确的文件名，然后在 Xcode 中打开您的 plist 以查看其格式是否正确。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T11:51:59.740

iOS 区分大小写。你确定你的包中的文件是小写的，即“@”scoreData.plist”，而不是像你的代码使用的名称那样大写吗？另外，验证这两个文件是否在你的包中 - 检查构建阶段或选择文件（一次一个）并查看文件属性部分的第三个 Xcode 窗格（以验证它们是否包含在您的目标中。如果一切看起来都不错，那么当您尝试从包中检索文件时：

此外，不要尝试在包的根级别查找文件 - 您应该使用：

```
NSString *path = [[NSBundle mainBundle] pathForResource:@"GameCenterData" ofType:@"plist"];
NSLog(@"PATH is %@", path);
...then use path instead of the code you are using now 
```

# joomla - Projectfork 卸载问题

> ID：11815501
> 
> 赞同：0
> 
> 时间：2012-08-05T09:56:46.470
> 
> 标签：joomla, joomla2.5

当我卸载（或仅禁用）joomla 2.5 的 [projectfork](http://www.projectfork.net/) 组件时，我得到了 404\. 错误。我应该怎么做才能正确完整地卸载此组件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T14:55:12.787

要正确卸载任何扩展程序，这是相同的过程。

1.  进入管理面板
2.  转到扩展管理器
3.  点击“管理”按钮
4.  选择扩展并单击“卸载”

如果扩展已正确开发，它应该从数据库中删除所有引用以及文件夹中的文件。如果没有，您只需手动删除仍然存在的文件并删除 SQL 表和一行`#__extensions`

# python - 将python代码写入python文件的最佳方法是什么？

> ID：11815503
> 
> 赞同：17
> 
> 时间：2012-08-05T09:56:57.270
> 
> 标签：python

我想写一个脚本（generate_script.py）生成另一个python脚本（filegenerated.py）

到目前为止，我已经创建了 generate_script.py：

```
import os
filepath = os.getcwd()
def MakeFile(file_name):
    temp_path = filepath + file_name
    file = open(file_name, 'w')
    file.write('def print_success():')
    file.write('    print "sucesss"')
    file.close()
    print 'Execution completed.' 
```

文件 (filegenerated.py) 现在看起来像这样：

> def print_success(): 打印“成功”

现在我不想手动插入所有换行符（也是由于操作系统的困难）......有没有模板系统我可以使用将 python 代码写入 python 文件？有人有例子吗？

非常感谢！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-05T10:05:53.027

您可以只使用多行字符串：

```
import os
filepath = os.getcwd()
def MakeFile(file_name):
    temp_path = filepath + file_name
    with open(file_name, 'w') as f:
        f.write('''\
def print_success():
    print "sucesss"        
''')
    print 'Execution completed.' 
```

如果您希望模板代码与其余代码一起缩进，但在写入单独的文件时会缩进，您可以使用`textwrap.dedent`：

```
import os
import textwrap

filepath = os.getcwd()
def MakeFile(file_name):
    temp_path = filepath + file_name
    with open(file_name, 'w') as f:
        f.write(textwrap.dedent('''\
            def print_success():
                print "sucesss"        
                '''))
    print 'Execution completed.' 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-08-05T10:10:29.153

```
lines = []
lines.append('def print_success():')
lines.append('    print "sucesss"')
"\n".join(lines) 
```

如果您正在动态构建复杂的东西：

```
class CodeBlock():
    def __init__(self, head, block):
        self.head = head
        self.block = block
    def __str__(self, indent=""):
        result = indent + self.head + ":\n"
        indent += "    "
        for block in self.block:
            if isinstance(block, CodeBlock):
                result += block.__str__(indent)
            else:
                result += indent + block + "\n"
        return result 
```

您可以添加一些额外的方法，向块中添加新行以及所有这些东西，但我认为您明白了..

例子：

```
ifblock = CodeBlock('if x>0', ['print x', 'print "Finished."'])
block = CodeBlock('def print_success(x)', [ifblock, 'print "Def finished"'])
print block 
```

输出：

```
def print_success(x):
    if x>0:
        print x
        print "Finished."
    print "Def finished." 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-05T10:07:01.240

尝试使用 \n 和 \t

```
import os
filepath = os.getcwd()
def MakeFile(file_name):
    temp_path = filepath + file_name
    file = open(file_name, 'w')
    file.write('def print_success():\n')
    file.write('\tprint "sucesss"')
    file.close()
    print 'Execution completed.' 
```

输出

```
def print_success(): 
    print "sucesss" 
```

或多行

```
import os
filepath = os.getcwd()
def MakeFile(file_name):
    temp_path = filepath + file_name
    file = open(file_name, 'w')
    file.write('''
def print_success():
    print "sucesss"
    ''')
    file.close()
    print 'Execution completed.' 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-05T10:12:35.860

untubu 答案可能是更 Pythonic 的答案，但在您的代码示例中，您缺少换行符和制表符。

```
file.write("def print_success():\n")
file.write('\tprint "success"\n\n') 
```

这将为您提供间距和换行符。下面的链接将为您提供一些关于接受的提示。

[http://docs.python.org/release/2.5.2/ref/strings.html](http://docs.python.org/release/2.5.2/ref/strings.html)

# android - Android - 如何仅显示 1 次活动？

> ID：11815504
> 
> 赞同：0
> 
> 时间：2012-08-05T09:57:14.477
> 
> 标签：android, android-activity

我想做一个欢迎屏幕，只做 1 次。它不应该是一个闪屏，因为我会放置一个 TextEdit 和一个按钮来获取用户的用户名。我需要查看一些可以执行此操作的代码示例，感谢您的光临！:D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T10:11:22.633

**1.**首先让用户在TextView中插入他的用户名。

**2.**当用户按下按钮时，请执行以下操作...

**-**在此凝视活动之后，用于`Intent`移动到您想要转移他的下一个活动。

**例如：**

```
 Intent i = new Intent(StartActivity.this, DesiredActivity.class); 
```

**-** 现在，在您使用`startActivity()`方法 with`Intent`作为参数后，请使用`finish()`方法，这将从 Back-Stack 中删除此**StartActivity。**

**例如：**

```
 Intent i = new Intent(StartActivity.this, DesiredActivity.class);
    startActivity(i);
    finish(); 
```

现在，如果用户`back button`从`DesiredActivity`（你去的那个`StartActivity`）按，**应用程序将退出。**

**///////////编辑部分///////////////**

您不希望您的应用程序不要再次进入第一个活动，在那里您已经给出了用户名..在第一次之后..对 ??????

**-**然后做到这一点......我会建议你做以下......

**一世。**首先**将**用户第一次输入的用户名保存到`Shared Preference` **或**a**或**a`file`中。**`Database`**

 ****ii.** 现在，当您打开您的应用程序时，让有一个`thread`检查**共享**首选项或文件或数据库中的用户名是否存在，无论您保存在哪里。

**iii.** 如果找到让它移动到所需的活动，如果没有提示他输入用户名，**那就是你第一次打开应用程序时会发生什么。**

**iv.** 现在它也是关于**用户友好性的**，所以我建议你`splash activity`在一开始就使用 a ，然后从这里触发你的检查线程。因此，当线程检查用户名时，用户不会因为看到空白屏幕而感到尴尬

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T09:58:54.603

开始活动。在`OnCreate`中，检查是否`Activity`已经显示。如果是，则开始下一个活动，如果不是，请保存您现在正在显示该活动。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-05T10:08:26.887

您可以创建一个`Activity`in`onCreate`方法检查用户是否已经输入用户名，如果是则立即启动另一个活动或显示用户活动以输入用户名。

希望您将用户名存储在某处以检查它是否存在

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-05T11:37:09.747

有一个`starting activity`可以决定下一个应该打开的活动是一次性欢迎屏幕还是应用程序的其他部分。

在第一个活动中：要知道之前是否打开过屏幕，您必须将一个布尔值保存到手机的内存中：如果读取的布尔值是 false（之前没有打开过屏幕），则显示一次性屏幕。否则屏幕之前已打开，这就是为什么您将前进到应用程序的其他部分。

保存布尔值：

```
public void writePrimitiveInternalMemory(String filename, boolean value) {
        SharedPreferences preferences = game.getPreferences(Activity.MODE_PRIVATE);
        SharedPreferences.Editor editor = preferences.edit();
        editor.putBoolean(filename, value);
        editor.commit();

    } 
```

读取布尔值：

```
public boolean readPrimitiveInternalMemoryBoolean(String filename) {
        SharedPreferences preferences = game.getPreferences(Activity.MODE_PRIVATE);
        return preferences.getBoolean(filename, false);

    } 
```

我希望这有帮助。**

# objective-c - UIPickerView 在 ActionSheet 上的奇怪行为

> ID：11815512
> 
> 赞同：0
> 
> 时间：2012-08-05T09:59:15.937
> 
> 标签：objective-c, ios, uipickerview, uitoolbar, uiactionsheet

```
- (void) actionsheetstart
{
    actionSheet=[[UIActionSheet alloc] initWithTitle:@"" delegate:self cancelButtonTitle:nil destructiveButtonTitle:nil otherButtonTitles:nil];
    [actionSheet showInView:self.view];
    UIToolbar *pickerToolbar = [[UIToolbar alloc] initWithFrame:CGRectMake(0, 0, 480, 32)];
    [pickerToolbar sizeToFit];
    pickerToolbar.barStyle = UIBarStyleBlackTranslucent;
    NSMutableArray *barItems = [[NSMutableArray alloc] init];

    UIBarButtonItem *cancelBtn = [[UIBarButtonItem alloc] initWithTitle:@"Cancel" style:UIBarButtonSystemItemCancel target:self action:@selector(cancel_clicked:)];
    [barItems addObject:cancelBtn];
    UIBarButtonItem *flexSpace = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemFlexibleSpace target:nil action:nil];
    [barItems addObject:flexSpace];
    UIBarButtonItem *doneBtn = [[UIBarButtonItem alloc] initWithTitle:@"Done" style:UIBarButtonItemStyleDone target:self action:@selector(done_clicked:)];
    [barItems addObject:doneBtn];
    [pickerToolbar setItems:barItems animated:YES];
    [actionSheet addSubview:pickerToolbar];

    UIPickerView *picker = [[UIPickerView alloc] init];
    picker.frame = CGRectMake(0, 44, 320, 216);
    picker.delegate  = self;
    picker.dataSource = self;
    picker.showsSelectionIndicator = YES;
    [actionSheet addSubview:picker];
}

-(void)done_clicked:(id)sender
{
    [actionSheet dismissWithClickedButtonIndex:0 animated:YES];
}
-(void)cancel_clicked:(id)sender
{
    [actionSheet dismissWithClickedButtonIndex:0 animated:YES];
} 
```

出于某种原因，操作表很好，但是 UIPickerView 和 UIToolBar 发疯了。我尝试将框架设置为 -px 但没有任何成功。似乎是什么问题？

非常感谢。

![关闭pickerview](../Images/44b00933b5c2f93428c03e0165183cc2.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T10:07:56.037

不要在`UIPickerView`里面插入`UIActionSheet`，这样你就不会得到正确的行为。我的解决方案：

1.  子类`UIButton`，实现方法`canBecomeFirstResponder:`，返回`YES`。
2.  在您的子类中实现`inputView`方法`UIButton`，返回`UIPickerView`。
3.  可选地，`inputAccessoryView`在您的子类按钮中实现方法以返回选择器上方的工具栏。
4.  点击时制作你的按钮`becomeFirstResponder:`。

瞧，当点击按钮时，您的选择器会像键盘一样模态显示。

**编辑：**

我的按钮.h

```
#import <UIKit/UIKit.h>

@interface MyButton : UIButton

@end 
```

我的按钮.m

```
#import "MyButton.h"

@implementation MyButton {
    UIDatePicker *_pv;
}

- (BOOL)canBecomeFirstResponder {
    return YES;
}

#pragma mark - Picker

- (UIView *)inputView {
    // set up your UIPickerView here
    _pv = [[UIDatePicker alloc] init];
    [_pv setDatePickerMode:UIDatePickerModeTime];
    [_pv setMinuteInterval:30];
    return _pv;
}

- (UIView *)inputAccessoryView {
    // set up your toolbar here
    UIToolbar *tb = [[UIToolbar alloc] initWithFrame:CGRectMake(0, 0, 320, 44)];
    UIBarButtonItem *flex = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemFlexibleSpace target:nil action:nil];
    UIBarButtonItem *ok = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemDone target:self action:@selector(pick:)];
    [tb setItems:[NSArray arrayWithObjects:flex, ok, nil]];
    return tb;
}

- (void)pick:(id)sender {
    // store picker value here before closing inputView
    [self resignFirstResponder];
}
@end 
```

# objective-c - 如何在 Cocos2d 中移动 CCMenu？

> ID：11815525
> 
> 赞同：2
> 
> 时间：2012-08-05T10:01:29.300
> 
> 标签：objective-c, ios, cocos2d-iphone

我有两个项目的菜单 - 新游戏和积分。它们垂直对齐，如下所示：

```
New Game
Credits 
```

当您单击新游戏时，我希望积分向下移动并打开两个新菜单项，如下所示：

```
New Game
  Player vs Player
  Player vs AI
Credits 
```

我怎么做？在我的代码菜单中只是覆盖了自己，所以我将这些项目放在一起。

```
- (id) init
{
    if ([super init])
    {
        CCLayerColor *bg = [CCLayerColor layerWithColor:ccc4(0, 0, 0, 255)];
        [self addChild:bg z:-1];

        CCMenuItemFont  *menu1 = [CCMenuItemFont itemFromString:@"New Game" target:self selector:@selector(callSecondMenu)];
        [menu1 setColor:ccc3(255, 255, 255)];

        CCMenuItemFont  *menu2 = [CCMenuItemFont itemFromString:@"Credits"];
        [menu2 setColor:ccc3(255, 255, 255)];

        CCMenu *menu = [CCMenu menuWithItems:menu1, menu2, nil];
        [menu alignItemsVerticallyWithPadding:10];
        [self addChild:menu z:10];

    }
    return self;
}

- (void) callSecondMenu
{
    CCMenuItemFont *menu1 = [CCMenuItemFont itemFromString:@"Player vs Player" target:self selector:@selector(callGame)];
    CCMenuItemFont *menu2 = [CCMenuItemFont itemFromString:@"Player vs AI" target:self selector:@selector(callGame)];
    CCMenu *menu = [CCMenu menuWithItems:menu1, menu2, nil];
    [menu alignItemsVerticallyWithPadding:5];
    [self addChild:menu];
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T15:06:37.213

将 menuItems 视为游戏中的角色。

我在游戏中移动菜单的方式是在它自己的单独 CCMenu 中创建每个菜单项，并将每个 CCMenu 设置在位置 0,0。

然后我使用它们的位置属性在它们的开始位置手动定位 CCMenuItemSprite/CCMenuItemFont 菜单项（不是 CCMenu），然后在需要时使用 CCMoveTo 操作来移动菜单项。这当然适用于任何 CCMenuItem 子类，例如您正在使用的 CCMenuItemFont。

这种方法的缺点是您失去了自动对齐菜单项的能力，并且它们充当单独的菜单，但这对于能够以任何方式移动菜单项以创建有趣的效果的好处来说是很小的代价。

您还可以使用任何其他操作（如 CCFadeIn、CCSkewTo、CCScaleBy 等）对各个菜单项进行炫酷效果。

**1)**当拥有 menuItems 的节点被创建时，我创建了所有的菜单项。然后，当需要每个菜单项时，我通过将其移动或淡入到位来为其设置动画。

**2）**我避免使用标签。这只是我的偏好。相反，我更喜欢创建两个 NSMutableDictionary 作为实例变量，一个称为 menuButtons，一个称为 menuButtonActions。然后我使用辅助函数来创建 menuItems 和操作并将它们存储在可变字典中。然后为 buttonNamed:runActionNamed: 和 buttonNamed:setPosition: 等一般事物创建方法。然后，这些方法使用两个可变字典来检索所需的 menuItem 和操作（在需要时），然后应用所需的效果。

这似乎需要更多的工作，但是如果您的游戏有几种不同的情况，您需要显示常用的菜单按钮，那么您的代码可以更具可读性和可重用性，因为您所要做的就是在未来使用创建菜单系统像这样的代码：

```
-(void) showNewGameMenuExpanded:(BOOL)isExpanded {

    if(isExpanded){
        [menuNode buttonNamed:@"credits" runActionNamed:@"creditsSlideDown"];
        [menuNode buttonNamed:@"playerVsPlayer" runActionNamed:@"playerVsPlayerShow"];
        [menuNode buttonNamed:@"playerVsAi" runActionNamed:@"playerVsAiShow"];
    }else{
        [menuNode buttonNamed:@"credits" runActionNamed:@"creditsSlideUp"];
        [menuNode buttonNamed:@"playerVsPlayer" runActionNamed:@"playerVsPlayerHide"];
        [menuNode buttonNamed:@"playerVsAi" runActionNamed:@"playerVsAiHide"];
    }

} 
```

这种在菜单节点初始化时构建按钮和操作并将它们存储在字典中以供使用的技术非常适用于暂停菜单或从屏幕一侧滑入以允许选择不同武器等的菜单。

* * *

**编辑：**

这是 Mazyod 添加的一些代码，展示了如何通过使用标签访问菜单项来移动菜单项。

首先，将`tag`属性设置为您`CCMenuItem`的 s：

```
 CCMenuItemFont  *menu1 = [CCMenuItemFont itemFromString:@"New Game" target:self selector:@selector(callSecondMenu)];
    [menu1 setColor:ccc3(255, 255, 255)];
    [menu1 setTag:1];

    CCMenuItemFont  *menu2 = [CCMenuItemFont itemFromString:@"Credits"];
    [menu2 setColor:ccc3(255, 255, 255)];
    [menu2 setTag:2];

    CCMenu *menu = [CCMenu menuWithItems:menu1, menu2, nil];
    [menu alignItemsVerticallyWithPadding:10];
    // add tag for the menu, or use instance variables:
    [self addChild:menu z:10 tag:kMenuTag]; 
```

然后，在您的其他方法中：

```
CCMenuItem* credits = [[self getChildByTag:kMenuTag] getChildByTag:2];
// apply the action ... It has been ages since I touched cocos2d:
[credits runAction:[CCMoveBy actionWithDuration:0.5f position:ccp(0, 40)]];

CCMenuItemFont *menu1 = [CCMenuItemFont itemFromString:@"Player vs Player" target:self selector:@selector(callGame)];
CCMenuItemFont *menu2 = [CCMenuItemFont itemFromString:@"Player vs AI" target:self selector:@selector(callGame)];
CCMenu *menu = [CCMenu menuWithItems:menu1, menu2, nil];
[menu alignItemsVerticallyWithPadding:5];
[self addChild:menu]; 
```

# html - Pdf到HTML的转换

> ID：11815526
> 
> 赞同：-5
> 
> 时间：2012-08-05T10:01:38.643
> 
> 标签：html

> **可能重复：**
> [将 PDF 转换为 HTML](https://stackoverflow.com/questions/956508/convert-pdf-to-html)

我有一个 pdf 格式的网站模板？是否可以将该 pdf 模板转换为我的 HTML 模板？我想将该 pdf 设计模板转换为 html 页面/模板（即包含 html 标签等），以便我可以修改该模板中的内容。请帮助我。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T10:07:50.187

您可以执行以下操作：

1.  将 PDF 转换为 Word
2.  打开word文件并另存为HTML
3.  编辑 HTML 标签以删除页面中未使用的 MS 标签。

或者硬着头皮从头开始编写 HTML 页面。

# c# - 如何将所选类型的建议插入数据库？

> ID：11815532
> 
> 赞同：0
> 
> 时间：2012-08-05T10:02:38.987
> 
> 标签：c#, asp.net, sql, sql-server-2008-r2

我正在使用带有 C# 的 ASP.NET 开发一个简单的基于 Web 的建议应用程序。它运作良好，除了一件事。我有以下数据库设计：

餐桌**安全建议日志**

```
ID, Title, Description, Username, DateSubmitted, TypeID, OtherTypes 
```

表**安全建议类型**

```
ID, Type 
```

用户将能够填写表格并提交。我可以将用户名、标题、描述和提交日期插入数据库。但我必须插入类型，要么是数据库中的类型之一，要么是新类型。我正在努力解决这部分问题，我不知道谁解决了它。**那么你能帮我解决这个问题吗？如何将类型的值插入数据库？**

ASP.NET 代码：

```
<div ID="contactform">
  <ol>
    <li>
      <label for="subject">Type</label>
      <asp:DropDownList ID="DropDownList" runat="server"
       DataSourceID="SqlDataSource1" Width="155px" Font-Bold="True"
       ForeColor="#006666" AppendDataBoundItems="false" DataTextField="Type"
       DataValueField="ID" AutoPostBack="true"
       OnDataBound="DropDownList_DataBound"/>
      <asp:SqlDataSource ID="SqlDataSource1" runat="server" 
       ConnectionString="<%$ ConnectionStrings:testConnectionString %>" 
       SelectCommand="SELECT * FROM [SafetySuggestionsType]"/>
      <asp:TextBox ID="TextBox1" runat="server" CssClass="text"/><br />
      <asp:RequiredFieldValidator ID="RequiredFieldValidator3" runat="server" 
       ControlToValidate="dropdownlist"
       ErrorMessage="Please select a type ... or choose Others"/>
      <asp:RequiredFieldValidator ID="RequiredFieldValidator4" runat="server" 
       ControlToValidate="TextBox1" 
       ErrorMessage="Please enter a type for your suggestion"/>
    </li>
    <li>
      <label for="subject">Subject</label>
      <asp:TextBox ID="txtSubject" runat="server" CssClass="text"/><br />
      <asp:RequiredFieldValidator ID="RequiredFieldValidator1" runat="server" 
       ControlToValidate="txtSubject" 
       ErrorMessage="Please enter a subject/title for your suggestion"/>
    </li>
    <%--The following hidden field is for inserting the date--%>
    <li>
      <asp:TextBox ID="dateSubmitted" runat="server" CssClass="text"
       Visible="false"/><br />
    </li>
    <li>
      <label for="message">Your Suggestion</label>
      <asp:TextBox ID="txtSuggestion" runat="server" cols="50"
       CssClass="textarea" rows="6" TextMode="MultiLine"/><br />
      <asp:RequiredFieldValidator ID="RequiredFieldValidator2" runat="server" 
       ControlToValidate="txtSuggestion"
       ErrorMessage="Please enter your suggestion"/>
    </li>
    <li class="buttons">
      <asp:ImageButton ID="imageField" runat="server"
       ImageURL="images/Send.gif" OnClick="btnSubmit_Click" />
      <%--<input type="image" name="imageField" id="imageField"
       src="images/Send.gif" />--%>
    </li>
  </ol>
</div> 
```

代码隐藏：

```
protected void btnSubmit_Click(object sender, ImageClickEventArgs e)
{
    SmtpClient sc = new SmtpClient("MAIL.Aramco.com");
    StringBuilder sb = new StringBuilder();
    MailMessage msg = null;

    sb.Append("Message from: " + Service.User.Name + "\n");
    sb.Append("Email: " + Service.User.GetProperty("EMP_BINTERMAIL") + "\n");
    sb.Append("Type: ");
    sb.Append((DropDownList.SelectedItem.Text.Equals("Others")
        ? TextBox1.Text : DropDownList.SelectedItem.Text) + "\n");
    sb.Append("Title: " + txtSubject.Text + "\n");
    sb.Append("Suggestion   : " + txtSuggestion.Text + "\n");

    try
    {
        msg = new MailMessage(Service.User.GetProperty("EMP_BINTERMAIL"),
            "JOHN.ARNESON@ARAMCO.COM", "PSSP: New Safety Suggestion Box",
            sb.ToString());
        sc.Send(msg);
        MultiView1.SetActiveView(ViewConfirm);
    }
    catch (Exception ex)
    {
        throw ex;
        //Response.Write("Something bad happened!");
    }
    finally
    {
        if (msg != null)
        {
            msg.Dispose();
        }
    }

    //For storing the suggestions in the database
    string connString = "Data Source=localhost\\sqlexpress;"
        + "Initial Catalog=psspdbTest;Integrated Security=True";
    string insertCommand = "INSERT INTO SafetySuggestionsLog "
        + "(Title, DateSubmitted, Description, Username) values "
        + "(@Title, @DateSubmitted, @Description, @Username)";
    string username = Service.User.ID;
    using (SqlConnection conn = new SqlConnection(connString))
    {
        conn.Open();
        using (SqlCommand cmd = new SqlCommand(insertCommand, conn))
        {
            cmd.Parameters.Clear(); 
            cmd.Parameters.AddWithValue("@Title", txtSubject.Text);
            cmd.Parameters.AddWithValue("@DateSubmitted",
                DateTime.Now.ToString());
            cmd.Parameters.AddWithValue("@Description", txtSuggestion.Text);
            cmd.Parameters.AddWithValue("@Username", username);
            cmd.ExecuteNonQuery();
        }
    }
} 
```

**更新：**

我修改了存储建议信息的代码：

```
//For stroing the suggestions in the database
        string connString = "Data Source=localhost\\sqlexpress;Initial Catalog=psspdbTest;Integrated Security=True";
        //string insertCommand = "INSERT INTO SafetySuggestionsLog (Title, DateSubmitted, Description, Username) values(@Title, @DateSubmitted, @Description, @Username)";
        string insertCommand = @"insert into SafetySuggestionsLog
                                  ( Title, Description, Username, DateSubmitted, TypeID, OtherTypes ) values
                                  ( @Title, @Description, @Username, @DateSubmitted,
                                    ( select ID from SafetySuggestionsType where Type = @Type ), '?' )";
        string username = Service.User.ID;
        using (SqlConnection conn = new SqlConnection(connString))
        {
            conn.Open();
            using (SqlCommand cmd = new SqlCommand(insertCommand, conn))
            {
                cmd.Parameters.Clear(); 
                cmd.Parameters.AddWithValue("@Title", txtSubject.Text);
                cmd.Parameters.AddWithValue("@DateSubmitted", DateTime.Now.ToString());
                cmd.Parameters.AddWithValue("@Description", txtSuggestion.Text);
                cmd.Parameters.AddWithValue("@Username", username);
                cmd.Parameters.AddWithValue("@Type", DropDownList.SelectedValue);
                cmd.ExecuteNonQuery();
            }
        } 
```

而且我仍然无法从下拉列表中存储所选类型。即使我选择了其中一种预定义类型，我在数据库中的 othertype 列下得到 (?)，在 Type 列下得到 NULL。为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T11:49:26.760

存储过程可以优雅地处理所涉及的步骤。

```
if not exists ( select 42 from SafetySuggestionsType where Type = @Type )
  insert into SafetySuggestionsType ( Type ) values ( @Type )

insert into SafetySuggestionsLog
  ( Title, Description, Username, DateSubmitted, TypeID, OtherTypes ) values
  ( @Title, @Description, @Username, @DateSubmitted,
    ( select TypeId from SafetySuggestionsType where Type = @Type ), '?' ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T10:10:28.080

您可以使用 SqlDbType 指定参数类型，如下所示：

```
 cmd.Parameters.Add("@Title",SqlDbType.VarChar, 20);
     cmd.Parameters["@Title"].Value = txtSubject.Text; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-05T10:10:35.410

您可以将类型列设为主键，当您在数据库中插入新类型时，将引发异常。因此，将记录插入到 try 块中。

```
try{
//Do your insertion, if a duplicate item was found, the insertion will not take place
}
catch{
//Do something is an value was inserted which already existed
} 
```

# android - 创建警报列表

> ID：11815534
> 
> 赞同：3
> 
> 时间：2012-08-05T10:03:20.610
> 
> 标签：android, android-alarms

我想在 Android 上编写一个简单的应用程序供我自己使用。

我想添加一个闹钟。如何制作警报列表并添加它们？

它是关于类似图片的东西。

![在此处输入图像描述](../Images/75b29868101716b6c5e88fa11934bfbe.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T10:23:19.390

这是Android报警应用程序源代码的链接，[git_alarm_app](https://github.com/android/platform_packages_apps_alarmclock)

如果你做类似的事情会很有帮助。你可以看到这个应用程序是如何做事并帮助自己的。。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T10:07:53.547

您必须为 ListView 的项目创建布局。

您可以在 Internet 上找到有关此的教程：[http :](http://www.vogella.com/articles/AndroidListView/article.html) [//www.vogella.com/articles/AndroidListView/article.html http://codehenge.net/blog/2011/05/customizing-android-listview-item-layout/](http://codehenge.net/blog/2011/05/customizing-android-listview-item-layout/)

# java - 在 NetBeans 中具有不同配置的可运行 JAR

> ID：11815536
> 
> 赞同：0
> 
> 时间：2012-08-05T10:04:00.827
> 
> 标签：java, netbeans, configuration, jar, runnable

我想用 NetBeans 创建来自相同来源的不同可运行 jar，每个都有不同的“参数”。为此，我不能简单地使用 .properties 文件，因为我需要向每个客户提供他定制的应用程序。我该怎么做？使用 NetBeans 更好（因为我转向它进行开发）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T10:13:41.627

您可以右键单击您的项目>设置配置>自定义

在那里，您可以单击新建以创建新配置。

每个配置都可以有不同的 Main 入口点、JVM 参数、参数、ant 构建脚本......

一旦你有几个配置设置，你可以右键单击你的项目>设置配置并选择哪个配置是活动的。

# python - 如何在python中导入matplotlib

> ID：11815538
> 
> 赞同：14
> 
> 时间：2012-08-05T10:04:13.730
> 
> 标签：python, module, matplotlib, graph-theory

我是 python 新手，我正在研究一个图形问题，我想绘制这个图形以便更好地理解它。我了解到应该为此导入 matplotlib 模块，但我不知道如何将其添加到项目中。（我是一名 Java 开发人员，这很像将 jar 添加到您的类路径）

当我尝试做

```
import matplotlib 
```

我收到以下错误：

```
File "/Library/Python/2.7/site-packages/networkx-1.7rc1-py2.7.egg/networkx/drawing/nx‌​_pylab.py", line 114, in draw
    raise ImportError("Matplotlib required for draw()")
ImportError: Matplotlib required for draw()
ImportError: No module named matplotlib.pyplot 
```

谁能帮我解决这个问题？我需要下载任何东西才能让它像在模块中一样运行吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-06T14:14:36.050

**模块：`new`**

正如大卫罗宾逊在对另一个答案的评论中指出的那样，您可能发布了一条不完整的错误消息，在这种情况下，内置模块可能会在模块中`new`被遮蔽。- 如果是这种情况，[建议的修复](https://stackoverflow.com/questions/10790233/unable-to-import-matplotlib-python-2-7-windows-7)是重命名版本。`new.py``gis``gis`

**Matplotlib 安装不完整**

或者，鉴于您的输出，您可能正在尝试导入`networkx`并且您似乎没有`matplotlib`（正确）安装。

如果您在*Ubuntu*上使用，您能否确保`matplotlib` **已正确安装**

 *```
sudo apt-get install python-matplotlib 
```

或者，如果您愿意，`pip`或者`easy_install`，

```
pip install matplotlib 
```

或者

```
easy_install matplotlib 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-06-26T04:46:01.323

如果您使用**windows**，请打开命令提示符并键入

> python -m pip 安装 matplotlib

对于**linux**用户，输入这个

> sudo apt-get install python-matplotlib

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-11-06T20:11:55.403

我解决了同样的问题 - 不仅仅是这个包 - 使用而不是 pip install ：

```
sudo apt-get install python-matplotlib 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-03-23T07:34:25.110

在 cv 虚拟环境上工作，然后使用命令并使用 source ~/.profile workon cv 在虚拟环境中执行脚本*

# database - 何时使用列，何时使用单独的表？- 数据库设计

> ID：11815542
> 
> 赞同：0
> 
> 时间：2012-08-05T10:05:07.583
> 
> 标签：database, database-design, relational-database, database-schema

大多数人不推荐 EAV，我知道其中的一些原因。然而，EAV 方法和这种方法有什么区别？

台式**电脑**：

```
id, price, description 
```

表**连接**：

```
id, name (possible values: LAN, USB, HDMI, ..., all all about 10) 
```

表**连接_计算机**

```
comp_id, conn_id 
```

还是那也是 EAV？如果是，那么标准化的替代方案是什么？

考虑一下，我想做这样的搜索：

所有具有 LAN 和 HDMI 连接的计算机。在这种情况下，我需要 1 个连接/过滤器属性，当它作为 1 个列/属性时，搜索会很容易，但我会有很多 NULL 值。

有什么建议怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T22:02:52.270

你的例子是一个简单的多对多。在**EAV**中，*属性名称*是列的**值**，而不是列的**名称**。例如，

`computer: {computer_id, attr_name, attr_value}`

```
insert into computer (computer_id, attr_name, attr_value)
values
  (1, 'connection', 'HDMI')
, (1, 'connection', 'USB')
, (1, 'memory', '2 GB')
; 
```

将是一种 EAV 方法。

[](https://stackoverflow.com/questions/3241033/designing-database-to-hold-different-metadata-information/3242426#3242426)**这是您为 RDBMS 中的 EAV 方法（灵活性）支付的价格[**示例。**](https://stackoverflow.com/questions/3241033/designing-database-to-hold-different-metadata-information/3242426#3242426)**

# php - YII 如何处理自定义 404 错误页面以及其他错误页面

> ID：11815543
> 
> 赞同：11
> 
> 时间：2012-08-05T10:05:09.657
> 
> 标签：php, yii, http-status-code-404

我想显示 404 错误页面，因为我在 protected/view/system 文件夹中创建了 error404.php 文件。

默认情况下，我有 Sitecontroller，它包含错误操作功能，如下所示

```
public function actionError()
{
    if($error=Yii::app()->errorHandler->error)
    {

        if(Yii::app()->request->isAjaxRequest)
            echo $error['message'];
        else
            $this->render('error', $error);
    }
} 
```

在主配置文件中，它被定义为

```
 'errorHandler'=>array(
        // use 'site/error' action to display errors
        'errorAction'=>'site/error',
    ), 
```

我的问题是我只需要自定义 404 页面，其余的错误我需要处理站点控制器的错误函数处理的方式。但我找不到办法做到这一点。如果假设我从配置主目录中删除 'errorAction'=>'site/error'，那么它会通过调用显示 404 错误

```
 throw new CHttpException(404, 'Page not found'); 
```

但是这样做我只能看到没有布局的页面，其他自定义错误也被视为与 404 相同，而它们不是。我多次阅读手册但我仍然无法解决它。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-05T13:55:46.970

将此代码用于*actionError*：

```
$app = Yii::app();
if( $error = $app->errorHandler->error->code )
{
    if( $app->request->isAjaxRequest )
        echo $error['message'];
    else
        $this->render( 'error' . ( $this->getViewFile( 'error' . $error ) ? $error : '' ), $error );
} 
```

在视图/站点中，为 404 错误创建*error404.php* ，为其余错误创建*error.php 。*

或者您可以在配置中为您希望以不同方式处理的错误定义参数并检查错误代码：

```
$app = Yii::app();
if( $error = $app->errorHandler->error->code )
{
    if( Yii::app()->request->isAjaxRequest )
        echo $error['message'];
    else    
        $this->render( 'error' . ( in_array( $error, $app->params[ 'customErrorPages' ] ) ? $error : '' ), $error );
} 
```

错误处理程序是这样工作的：当 httpexception 出现时，组件将检查*errorAction*属性中是否有任何值，如果有，将运行此控制器的操作。*如果errorAction*属性没有设置值，将显示系统文件夹中的错误视图。因此无需混合来自系统视图文件夹和控制器视图文件夹的错误视图。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-05T10:07:52.633

每当发生错误时，都会调用 siteController 中的操作错误。您可以在该操作中自定义错误路线，您可以执行以下操作：

```
if(404==Yii::app()->errorHandler->error->code){
     //go to custome error page
else
   //code default error.php 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-08-18T08:22:48.840

在最新版本的框架（我正在使用 1.14）中使用：

```
Yii::app()->errorHandler->error['code'] 
```

因为*错误*是一个数组。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-05T10:27:16.213

你不能用.htaccess 做到这一点吗？我个人创建了一个“错误”文件夹，其中包含所有包含错误消息的 html php 文件，并修改 .htaccess 以在遇到错误时调用这些页面。

**链接**：

[http://www.javascriptkit.com/howto/htaccess2.shtml](http://www.javascriptkit.com/howto/htaccess2.shtml)

[http://www.addedbytes.com/for-beginners/error-documents-for-beginners/](http://www.addedbytes.com/for-beginners/error-documents-for-beginners/)

**例子**：

在您希望调用错误页面的目录中创建一个 .htaccess 文件，并在文本文件中写入以下行：

```
ErrorDocument 404     /404.html 
```

假设在同一目录中有一个名为 404.html 的页面，当出现 404 page not found 错误时，将调用 404.html 页面。

这同样适用于其他错误代码：

```
ErrorDocument 500     /500error.html 
```

假设创建了 500 错误并且同一目录中存在 500error.html 文件。

# php - PHP中的锁文件有多原子？

> ID：11815548
> 
> 赞同：1
> 
> 时间：2012-08-05T10:05:52.433
> 
> 标签：php, locking, race-condition

我有一个 PHP 页面，一次只能由一个用户访问。这是一种“穷人的 cron”：在后台请求的“Javascript”文件。目前我正在考虑创建一个这样的锁定文件：

```
if(file_exists($lockfile) && filemtime($lockfile) + EXPIRES_AFTER > time() ) {
    die("// Page is locked.");
}

touch($lockfile);
// do stuff
unlink($lockfile);
echo "// Cron stuff was run"; 
```

但是我不确定`file_exists`在调用和`touch`调用之间是否有一个非常短的机会窗口，另一个页面请求可以检查文件是否存在并看到它不存在。我们可能在这里谈论微秒，所以我想知道我真正需要开始担心的请求数量。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T10:13:28.897

您编写的代码中没有原子性，所以是的，存在竞争条件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-05T10:19:21.420

如果您想*真正*精确地执行此操作，请使用不同的方法，因为在检查和锁定之间存在一些时间。

两种可能的实现：

1.  使用羊群： [https ://secure.php.net/manual/en/function.flock.php](https://secure.php.net/manual/en/function.flock.php)

2.  使用 STM 之类的东西：例如打开锁定文件进行追加，在其中写入一些内容，关闭句柄。然后读回文件，如果它只有你写入的内容，那么你已经获得了锁。

除此之外，您的原始代码可能不会引起任何问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-05T10:33:44.657

您的代码有竞争条件。相反，使用 O_EXCL [dio_open](http://php.net/manual/en/function.dio-open.php)文件。如果文件已经存在，这将失败。完成后取消链接。

唯一需要注意的是如果系统或脚本在文件存在时崩溃，则脚本将永远不会再次运行。如果您对此感到担心，请检查文件的年龄（如果您未能创建它），如果它比脚本可能花费的最长时间要旧，请取消链接。

使用[羊群](http://php.net/manual/en/function.flock.php)是另一种选择。

# jquery - 通过选择它之外的任何地方来隐藏 div

> ID：11815554
> 
> 赞同：0
> 
> 时间：2012-08-05T10:06:46.850
> 
> 标签：jquery

我试图找到一种方法来通过单击按钮来显示隐藏的 div，如果再次单击该按钮，或者如果用户单击 div 之外的任何位置，则将其隐藏相同的 div。该功能与 Facebook 通知图标中的功能非常相似。

```
 $('.button').click(function() {
        if($(".div").css('visibility') == 'visible') 
            $(".div").css('visibility', 'hidden');
        else
            $(".div").css('visibility', 'visible');
    });

    $(".button").click(function() {
        event.stopPropagation();
    });

    $('html:not(.div)').click(function() {
        //Hide the div if visible
        if($(".div").css('visibility') == 'visible') 
            $(".div").css('visibility', 'hidden');
    }); 
```

但是，这似乎在 Firefox/IE 中不起作用，仅在 Chrome 中起作用。div 根本无法在 firefox/IE 中显示。有没有人知道更好的方法来解决这个问题？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T10:25:18.360

**更新：按钮现在显示和隐藏 div，也可以点击外部 div 隐藏它**
**这里的演示：http:** [//jsfiddle.net/jL2cU/2/](http://jsfiddle.net/jL2cU/2/)

```
$(document).ready(function(){
  $('.form-container').click(function(event){
    console.log('click - form');
    event.stopPropagation();
  });
  $('html').click(function(event){
    console.log('click - body');
    //hide the form if the body is clicked
    $('.form-container').css('display','none');
  });
  $('button').click(function(event){
    $('.form-container').toggle();
    event.stopPropagation();
  });

}); 
```

和

```
 <div class="button-container">
        <button>Show div</button>    
      </div>
      <div class="form-container">
          <fieldset id="" class="">
            Here is the TEXT
          </fieldset>
      </div> 
```

和

```
.button-container
{
  width:300px;
  margin:0 auto;
  text-align: center;
  padding:0px 0px 25px 0px;
}
.form-container
{
  display:none;
  width:300px;
  margin:0 auto;
  text-align: center;
  background: #777;     
}​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T10:35:18.417

使用 jQuery 切换方法。

> 在没有参数的情况下， .toggle() 方法只是简单地切换元素的可见性。

```
$(function() {
    $('.button').on('click', function() {
        $('.div').toggle();
    }
})(); 
```

# php - PHP DocComment 注释结构与解析

> ID：11815556
> 
> 赞同：1
> 
> 时间：2012-08-05T10:07:15.413
> 
> 标签：php

我想使用 DocComment 为属性、类和函数定义一些元数据，例如更高级语言中的注释。

这些数据由一些标量和数组变量组成，如下例所示：

```
<?
/** type=set, options=[value1, value2, value3] **/
public $state;
?> 
```

我想不出任何好的结构可以在这里使用。

我想在用**& 替换“，”之后使用 parse_str ，**但它不适用于数组部分（我的示例中的**选项**）。

这是一个 java 注释的示例，其中包括可选的键值对列表。使用java注解是一个好习惯，但是如何编写一个有效的解析器呢？

```
@Author(first = "Oompah", last = "Loompah") 
```

**任何关于快速**、**易于实现**和**人类可读**的结构和解析方法的好建议都将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T10:48:09.077

不要试图发明轮子 :) 只需将[Doctrine Annotations](http://docs.doctrine-project.org/projects/doctrine-common/en/latest/reference/annotations.html)库集成到您的项目中。Doctrine2 和 Symfony2 大量使用这个库来支持元定义。

# c++ - boost::mutex 和 boost::timed_mutex 的性能差异

> ID：11815557
> 
> 赞同：3
> 
> 时间：2012-08-05T10:07:20.023
> 
> 标签：c++, performance, boost, locking, mutex

我需要通过互斥锁保护资源。为了改进诊断，我正在考虑使用死锁警告`timed_mutex`（代码未测试）：

```
boost::timed_mutex m;
// first thread accessing the resource very frequently
while(...){
    boost::mutex::scoped_lock(m);
    // ...
}

// ...
// another thread accessing the resource, only occasionally
while(m.timed_lock(boost::get_system_time()+boost::posix_time::seconds(10)){
   cerr<<"Waiting for lock for (additional) 10 seconds; deadlocked?"<<endl;
} 
```

与两个循环`timed_mutex`中简单的两个无条件锁相比，我是否会看到性能差异？`mutex`（平台是 POSIX，以防万一）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T21:44:28.700

答案在于您的 pthread 库的实现。我不认为有很大的区别，但你能做的最好的就是测量它。

# android - Android上的“未安装应用程序”错误

> ID：11815565
> 
> 赞同：2
> 
> 时间：2012-08-05T10:08:17.720
> 
> 标签：android, installation

我正在开发一个应用程序，我的应用程序已在模拟器和许多设备上成功安装和测试，如 Asus eee pad、Galaxy tab、Galaxy note、HTC ...</p>

但我无法在具有 android 2.3.7的**Pidion BM-170上安装它并出现错误“未安装应用程序”**

我在此设备上测试了其他应用程序，它们已成功安装。所以问题在于我的应用程序和这个 Pidion 设备。

我已经签署了我的申请。我已经测试`android:installLocation="auto"`了清单。我已经在清单中测试了 Debuggable=false 和 true 。设备上没有以前的应用程序。

但我仍然收到错误“未安装应用程序”。

我在我的应用程序中使用这些功能

```
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.SEND_SMS" />
<uses-permission android:name="android.permission.RECEIVE_SMS" />
<uses-permission android:name="android.permission.READ_PHONE_STATE" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_MOCK_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
<uses-permission android:name="android.permission.BLUETOOTH" />
<uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED" />
<uses-permission android:name="android.permission.BLUETOOTH_ADMIN" /> 
```

为什么我会收到此错误？我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T11:32:19.357

也许该设备没有 Google Maps SDK 附加库。毕竟，[根据设备制造商的说法，它甚至没有正常的Android——](http://www.mypidion.com/product/product_tab.asp?t_idx=16&bmenu=1)它被描述为“可选”。他们可能没有授权 Google 商业应用程序，例如 Play Store、YouTube、Google Maps 等。如果是这样，您就不能编写依赖于在该设备上运行的 Google Maps SDK 附加库的应用程序。

# wpf - 用扩展器替换 Treeview +-

> ID：11815575
> 
> 赞同：1
> 
> 时间：2012-08-05T10:10:27.287
> 
> 标签：wpf, treeview, wpf-controls

我正在尝试从树视图中删除节点符号 +- 并用 Expander 替换它们。以下是我的 Xaml：

```
 <TreeView.Resources>
            <HierarchicalDataTemplate ItemsSource="{Binding Disks}" DataType="{x:Type local1:GenSet}">
                <Expander Header="{Binding Genre}" x:Name="exp" IsExpanded="False" >
                </Expander>
                <HierarchicalDataTemplate.Triggers>
                    <DataTrigger Binding="{Binding RelativeSource={RelativeSource AncestorType=TreeViewItem}, Path=IsExpanded}" Value="True">
                        <Setter TargetName="exp" Property="IsExpanded"  Value="True"/>
                    </DataTrigger>
                    <DataTrigger Binding="{Binding RelativeSource={RelativeSource AncestorType=TreeViewItem}, Path=IsExpanded}" Value="False">
                        <Setter TargetName="exp" Property="IsExpanded"  Value="False"/>
                    </DataTrigger>
                </HierarchicalDataTemplate.Triggers>

                <!--<TextBlock Text="{Binding Genre}"/>-->
            </HierarchicalDataTemplate>
            <DataTemplate DataType="{x:Type local1:DiskPrime}">
                <TextBlock Text="{Binding Namee}"/>
            </DataTemplate>
        </TreeView.Resources>
    </TreeView> 
```

我需要删除 +- 图标并让扩展器工作。您能否建议如何完成这项工作。谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-05T20:51:32.237

玩这个并修改它以满足您的需求。

```
 <TreeView>
         <TreeView.Resources> 
           <Style TargetType="TreeViewItem">
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate>
                            <Expander Header="{Binding RelativeSource={RelativeSource AncestorType=TreeViewItem}, Path=Header}">
                                <ContentPresenter Content="{Binding RelativeSource={RelativeSource AncestorType=TreeViewItem}, Path=Items[0]}"/>
                            </Expander>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>
        </TreeView.Resources>
        <TreeViewItem Header="Test 1">
            <TreeViewItem Header="Child 1"><TextBox Text="Hello"></TextBox></TreeViewItem>
        </TreeViewItem>
        <TreeViewItem Header="Test 2"/>
        <TreeViewItem Header="Test 3"/>
     </TreeView> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-05T10:11:54.257

在`ItemContainerStyle`设置一个新`Template`的`TreeViewItems`。

# jquery - 更改类后触发不同的事件 - Jquery

> ID：11815583
> 
> 赞同：1
> 
> 时间：2012-08-05T10:10:40.417
> 
> 标签：jquery

在我的 html 页面上，有一个最初具有类名“show-update”的按钮。单击该按钮后，该按钮将更改为另一个类名，我想为该特定类设置另一个单击事件。但是，我仍然没有成功做到这一点。有谁知道如何解决它？我正在使用 jquery 1.72

这是我的代码[http://jsfiddle.net/dwGCH/1/](http://jsfiddle.net/dwGCH/1/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T10:18:16.197

我已经更新了 JSFiddle [http://jsfiddle.net/dwGCH/3/](http://jsfiddle.net/dwGCH/3/)

```
 $('.show-update').click(function() {
      $(this)
      .addClass('update-profile')
      .removeClass("show-update")
      .unbind()
      .click(function() {
         alert('updated'); 
      });
      alert('change to update'); 
   }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T10:24:12.543

这是一个小提琴：http: [//jsfiddle.net/dwGCH/9/](http://jsfiddle.net/dwGCH/9/)

Add a click event first to the temporary class, and then one to the button class which only fires if the updated class is present.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-05T10:45:27.640

```
$(document).on('click', '.update-profile', function(){
    alert('updated');
 });

 $(".show-update").on('click', function(e){ 
     // some function here
     // ...           
     $(this).addClass("update-profile").removeClass("show-update").off('click');
     alert('change to update');
 });​ 
```

[FIDDLE](http://jsfiddle.net/dwGCH/10/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-05T10:21:14.367

我不确定是否理解，此代码在每次单击时切换两个处理程序：

```
 $('.update-profile').on('click', function(){
    alert('updated');
 });

$(".show-update").on('click', fn1);

function fn1(event)
{             
     // some function here
     // ...           
     $(this).addClass("update-profile");
     $('.update-profile').removeClass("show-update");
     $(this).off('click');
    $(this).on('click', fn2);
     alert('fn1');
}
function fn2(event)
{             
     // some function here
     // ...           
     $(this).removeClass("update-profile");
     $('.update-profile').addClass("show-update");
     $(this).off('click');
    $(this).on('click', fn1);
     alert('fn2');
} 
```

# .net - 删除 ListView 中的所有文本块

> ID：11815587
> 
> 赞同：1
> 
> 时间：2012-08-05T10:11:24.717
> 
> 标签：.net, wpf, xaml

如何遍历我的 WPF 列表视图中的所有文本块？现在我已经定义了一种必须应用于每个文本块的样式。看起来像这样

```
 <Style x:Key="orderDetailsTextBlock" TargetType="TextBlock" >
        <Style.Triggers>
            <DataTrigger Binding="{Binding Status}" Value="Failed">
                <Setter Property="TextDecorations" Value="Strikethrough" />
            </DataTrigger>
        </Style.Triggers>
    </Style> 
```

我想要的是能够在 ListViewItem Style 块内应用一次。

我试着这样做

```
 <Style x:Key="ordersListViewItemStyle" TargetType="{x:Type ListViewItem}">
        <Style.Triggers>
            <DataTrigger Binding="{Binding Status}" Value="Failed">
                <Setter Property="TextBlock.TextDecorations" Value="Strikethrough" />
            </DataTrigger>
        </Style.Triggers>           
    </Style> 
```

但这不起作用。任何帮助将不胜感激。

**更新** 我更新了 ListView 的 XAML 如下

```
 <ListView x:Name="orderDetails" AlternationCount="2" ItemContainerStyle="{StaticResource ordersListViewItemStyle}" >
    <ListView.Resources>
        <Style TargetType="TextBlock">
            <Style.Triggers>
                <DataTrigger Binding="{Binding Status}" Value="Failed">
                    <Setter Property="TextDecorations" Value="Strikethrough" />
                </DataTrigger>
            </Style.Triggers>
        </Style>
    </ListView.Resources>
    <ListView.View>
        <GridView>
            <GridViewColumn Width="100" Header="Статус" >
                <GridViewColumn.CellTemplate>
                    <DataTemplate>
                        <TextBlock 
                                            Text="{Binding Path=Status, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"
                                            ToolTip="{Binding Path=Message, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"
                                            TextAlignment="Center" />
                    </DataTemplate>
                </GridViewColumn.CellTemplate>
            </GridViewColumn>
        </GridView>
    </ListView.View>
</ListView> 
```

什么都没发生。我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T10:15:35.877

您可以在`ListView.Resources`没有 a的情况下在您的 Style 中定义`Key`，它的范围将被限制`TextBlock`在该特定 s 内的所有 s 中`ListView`。

例如：

```
<ListView x:Name="MyListView">
    <ListView.Resources>
        <Style TargetType="TextBlock">
            <!-- Style specific content -->
        </Style>
    </ListView.Resources>
    <!-- ListView content -->
</ListView> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T10:14:44.270

删除样式`x:Key`的`TextBlock`并将其放入 中`ListView.Resources`，然后它应该会自动应用。（见备注[`TargetType`](http://msdn.microsoft.com/en-us/library/system.windows.style.targettype.aspx)）

# r - 在 r 中的条形图中居中条形标签

> ID：11815590
> 
> 赞同：3
> 
> 时间：2012-08-05T10:12:21.383
> 
> 标签：r, plot

如何使 x 轴上的标签居中以与条形匹配？另外，如何将 x 轴标签进一步向下定位，使其不会被 x 轴标签遮挡？谢谢！

```
par(mar= c(15,4,4,2) + 0.1)
barplot(58:1,xaxt="n",xlab="",ylab="Frequency", col=gray(5:0/5))
axis(1, labels=FALSE)
text(1:58, par("usr")[3] - 0.25, srt = 90, adj = 1,
labels = rep("Long Species Name",58), xpd = TRUE)
mtext(1, text = "Species", line=6) 
```

![在此处输入图像描述](../Images/074668c1babd040455102a31e257fddc.png)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-05T10:24:10.560

查看`barplot()`（通过阅读`?barplot`）的返回值。在那里，我们发现条形的中点由函数作为向量返回。因此，分配返回的对象（此处为 object `bar`）然后在调用中使用它`axis()`来定位刻度线是一件简单的事情。

在`axis()`调用中，请注意我们同时指定了参数`labels`和**参数**`at`，并`at`设置为存储在中的条形中点`bar`。`las = 2`用于相对于轴旋转标签，并`cex.axis = 0.6`用于减小标签大小。

您问题的第二部分由`title()`论点`line`处理。首先请注意，当您设置`mar`参数时，您在“行”中设置边距大小，因此边 1（底部）的边距为 15 行。`line`参数 in`title()`指定要绘制轴标签的边缘线。

把它和一个修改过的例子一起放在一起，我们有：

```
op <- par(mar= c(15,4,4,2) + 0.1)
bar <- barplot(58:1, xaxt="n", xlab="", ylab="Frequency", col=gray(5:0/5))
axis(1, labels = paste("Long Species Name", 1:58), at = bar,
     las = 2, cex.axis = 0.6)
title(xlab = "Species", line=11)
par(op) 
```

产生：

![使用示例代码生成的条形图](../Images/2e6afe71ccbe46672da694b0a0f2f5f6.png)

# php - 带有 id 的 div 上的 Ajax 更新

> ID：11815596
> 
> 赞同：0
> 
> 时间：2012-08-05T10:13:31.417
> 
> 标签：php, javascript, jquery, html, ajax

我将如何每 x 秒更新`div`一次？`id`我希望它更新其中包含的用户状态，包括对单个帖子发表评论的时间。

我已经尝试过`setInterval`，但添加状态需要 10 秒，然后每隔 x 秒复制一次状态。我所需要的只是更新响应数据，而不是每 10 秒重新添加评论的插入。

HTML：

```
<div id='divider-"+response['streamitem_id']+'></div> 
```

JavaScript：

```
$(document).ready(function(){
    $("form#myform").submit(function(event) {
        event.preventDefault();
        var content = $("#toid").val();
        var newmsg = $("#newmsg").val();

        $.ajax({
            type: "POST",
            url: "insert.php",
            cache: false,
            dataType: "json",
            data: { toid: content, newmsg: newmsg },
            success: function(response){ 
                $("#homestatusid").html("<div id='divider-"+response['streamitem_id']+"'><div class='userinfo'><a href='/profile.php?username="+response['username']+"'><img class='stream_profileimage' style='border:none;padding:0px;display:inline;' border=\"0\" src=\"imgs/cropped"+response['id']+".jpg\" onerror='this.src=\"img/no_profile_img.jpeg\"' width=\"40\" height=\"40\" ></a><div style='cursor:pointer;position:relative;top:0px;float:right;padding-right:5px;' onclick=\"delete_('"+response['streamitem_id']+"');\">X</div><a href='/profile.php?username="+response['username']+"'>"+response['first']+" "+ response['middle']+" "+response['last']+"</a><span class='subtleLink'> said</span><br/><a class='subtleLink' style='font-weight:normal;'>"+response['streamitem_timestamp']+"</a><hr>"+newmsg+"<div style='height:20px;' class='post_contextoptions'><div id='streamcomment'><a style='cursor:pointer;' id='commenttoggle_"+response['streamitem_id']+"' onclick=\"toggle_comments('comment_holder_"+response['streamitem_id']+"');clearTimeout(streamloop);swapcommentlabel(this.id);\">Write a comment...</a></div><div id='streamlike'><a id='likecontext_"+response['streamitem_id']+"' style='cursor:pointer;' onClick=\"likestatus("+response['streamitem_id']+",this.id);\"><div style='width:50px;' id='likesprint"+response['streamitem_id']+"'>Like</div></a><div style='width:50px;' id='likesprint"+response['streamitem_id']+"'></div></div><div id='streamdislike'><a id='dislikecontext_"+response['streamitem_id']+"' style='cursor:pointer;' onClick=\"dislikestatus("+response['streamitem_id']+",this.id);\"><div style='width:70px;' id='dislikesprint"+response['streamitem_id']+"'>Dislike</div></a><div style='width:70px;' id='dislikesprint"+response['streamitem_id']+"'></div></div></div><div class='stream_comment_holder' style='display:none;' id='comment_holder_"+response['streamitem_id']+"'><div id='comment_list_"+response['streamitem_id']+"'><table width=100%><tr><td valign=top width=30px><img class='stream_profileimage' style='border:none;padding:0px;display:inline;' border=\"0\" src=\"imgs/cropped"+response['id']+".jpg\" onerror='this.src=\"img/no_profile_img.jpeg\"' width=\"40\" height=\"40\" ></a><td valign=top align=left><div class='stream_comment_inputarea'><input id='addcomment' type='text' name='content' style='width:100%;' class='input_comment' placeholder='Write a comment...'  onkeyup='growcommentinput(this);' autocomplete='off' onkeypress=\"if(event.keyCode==13){addcomment("+response['streamitem_id']+",this.value,'comment_list_"+response['streamitem_id']+"',"+response['id']+",'"+response['first']+" "+ response['middle']+" "+response['last']+"');this.value='';}\"><br/></div></div>");
            }
        });
        return false
    });
}); 
```

插入.PHP

```
$json = array();
$check = "SELECT streamitem_id FROM streamdata WHERE streamitem_creator='$user1_id' ORDER BY streamitem_id DESC";
$check1 = mysql_query($check);
$resultArr = mysql_fetch_array($check1);
$json['streamitem_id'] = $resultArr['streamitem_id'];

mysql_free_result($check1);

$check = "SELECT streamitem_timestamp FROM streamdata WHERE streamitem_creator='$user1_id' ORDER BY streamitem_timestamp DESC";
$check1 = mysql_query($check);
$resultArr = mysql_fetch_array($check1);
$json['streamitem_timestamp'] = Agotime($resultArr['streamitem_timestamp']);
mysql_free_result($check1);

$check = "SELECT username, id, first, middle, last FROM users";
$check1 = mysql_query($check);
$resultArr = mysql_fetch_array($check1);
$json['username'] = $resultArr['username'];
$json['id'] = $resultArr['id'];
$json['first'] = $resultArr['first'];
$json['middle'] = $resultArr['middle'];
$json['last'] = $resultArr['last'];

mysql_free_result($check1);

echo json_encode($json); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T10:21:24.820

您可以使用`setInterval`（[参见文档](http://www.w3schools.com/jsref/met_win_setinterval.asp)）或`setTimeout`（[参见文档](http://www.w3schools.com/jsref/met_win_settimeout.asp)）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T13:06:20.990

首先将 Ajax 调用封装在一个单次执行函数中，回调函数引用相同：

```
$(function() {
    (function ajaxcall() {
       $.ajax({
        url: 'foo.php',
        data: {boo:'moo',goo:'loo'},
        timeout: function() { ajaxcall(); },
        success: function(data) {
            //do somethng with the data
            //done, now call the function again:
            ajaxcall();
            }
        });
    }());
}); 
```

然后在 PHP 中编写如下内容：

```
$timeout = 30;
$pollinterval = .5;
$counter = 30;
while ($counter >= 0) {
//function which fetches fresh data and sets $test to true if data is returned
  list($test,$dataarray) = fetchdata();
  if ($test) { //JSON_encode the data array and send it
     echo JSON_ENCODE($dataarray);
     }
  else { //no fresh data, query the db again after wating for some time)
    usleep($pollinterval*1000);
    $counter -= $pollinterval;
  }
//timeout, return whetever you have!
echo JSON_ENCODE($dataarray); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-05T10:19:04.877

听起来像投票。您可以包含一个 AJAX 调用，该调用将向后端 PHP 脚本发送请求，该脚本将搜索数据库以进行进一步更新。如果找到，它将立即返回新结果。客户端 JS 在接收到新数据时，会等待 30 秒，然后再发出另一个请求。如果 PHP 没有找到任何新数据，那么它将再次查询数据库，比如 5 秒后，并继续这样做，直到发生脚本定义的超时，比如 25 秒。然后它会返回一个空结果，客户端 JS 收到后会立即发出另一个请求。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-05T10:23:32.387

我认为这就是你想要的，使用 Jquery：

HTML：

`<div id="divider-whatever"></div>`

查询：

```
$(document).ready(function() {

    setInterval(function() {
        div = $("#divider-whatever");
        $.get(data.php, function(responseData) {
            div.html(responseData);
        }, 1000);
        // change 1000 to whatever time you need
        // change data.php to the file where your data is coming from
    });

}); 
```

*未经测试

希望这可以帮助！

# c# - 将任何数字格式化为三位数？

> ID：11815599
> 
> 赞同：4
> 
> 时间：2012-08-05T10:13:57.720
> 
> 标签：c#, string-formatting

我想将用户输入的任何数字插入到数据库中，就像三位数字一样。

例如，如果用户插入（1）我想将数字保存为（001），或（20）到（020）。

注意：数据库列的数据类型是字符串而不是整数。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-08-05T10:17:33.810

```
int iVal = 1;

iVal.ToString("D3"); // = "001" 
```

[在MSDN](http://msdn.microsoft.com/en-us/library/dwhawy9k.aspx)上阅读更多信息

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-05T10:16:01.143

你可以试试

```
 int value =5;
 Console.WriteLine(value.ToString("000"));
 Console.WriteLine(value.ToString().PadLeft(3,'0')); 
```

产生：

> 005
> 
> 005

# objective-c - MKMapView 和响应者链

> ID：11815602
> 
> 赞同：0
> 
> 时间：2012-08-05T10:14:16.640
> 
> 标签：objective-c, ios, mapkit

我有一个带有单个子视图的 MKMapView：

```
MKMapView *mapView = [[MKMapView alloc] initWithFrame:[UIScreen mainScreen].bounds];
UIView *subView = [[UIView alloc] initWithFrame:CGRectMake(0, 200, 200, 200)];
subView.backgroundColor = [UIColor grayColor];
[mapView addSubview:subView]; 
```

我希望因为子视图不处理任何触摸事件，所有触摸事件都将传递给父地图视图（通过响应者链）。然后我希望在子视图中平移和捏合会平移和捏合地图。

不幸的是，情况似乎并非如此。有谁知道将地图视图放入响应者链的方法？

我意识到在我的子视图中覆盖 hitTest 可以实现我在这里所期望的，但我不能使用这种方法，因为我需要在子视图中响应其他手势。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T01:22:38.387

如何处理`UIGestureRecognizers`添加到 mapView 并禁用子视图的所有手势（正确设置为忽略其他手势识别器或同时触发它们）`userInteractionEnabled`？

我使用以下代码在不干扰标准手势的情况下收听 mapView 上的 Taps：

```
UITapGestureRecognizer *tap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(mtd_handleMapTap:)];

// we require all gesture recognizer except other single-tap gesture recognizers to fail
for (UIGestureRecognizer *gesture in self.gestureRecognizers) {
    if ([gesture isKindOfClass:[UITapGestureRecognizer class]]) {
        UITapGestureRecognizer *systemTap = (UITapGestureRecognizer *)gesture;

        if (systemTap.numberOfTapsRequired > 1) {
            [tap requireGestureRecognizerToFail:systemTap];
        }
    } else {
        [tap requireGestureRecognizerToFail:gesture];
    }
}

- (void)mtd_handleMapTap:(UITapGestureRecognizer *)tap {
if ((tap.state & UIGestureRecognizerStateRecognized) == UIGestureRecognizerStateRecognized) {

        // Get view frame rect in the mapView's coordinate system
        CGRect viewFrameInMapView = [self.mySubview.superview convertRect:self.mySubview.frame toView:self.mapView];
        // Get touch point in the mapView's coordinate system
        CGPoint point = [tap locationInView:self.mapView];

        // Check if the touch is within the view bounds
        if (CGRectContainsPoint(viewFrameInMapView, point)) {
             // tap was on mySubview
        }
} 
```

}

# android - 如何使用 Vitamio 播放 DivX 视频？

> ID：11815604
> 
> 赞同：0
> 
> 时间：2012-08-05T10:14:41.080
> 
> 标签：android, avi, divx

简单的 AVI 视频在 videoView 中似乎可以正常播放，而且我可以通过

```
 Bitmap bMap = ThumbnailUtils.createVideoThumbnail(s, MediaStore.Video.Thumbnails.MICRO_KIND);
        ivPic.setImageBitmap(bMap); 
```

然而 DivX avi 视频无法播放，也不会给我缩略图。

任何想法如何解决这个问题？

谢谢！

**更新：我找到了这个 vitamio 库，但我已经将它的 JAR 文件放入了我的应用程序中，当我尝试播放 divx 文件时，它会弹出一个对话框，提供下载一些插件......有没有办法解决它？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T10:41:20.297

Android 不支持 DivX 视频。有关支持的媒体格式的概述，请参阅此链接：http: [//developer.android.com/guide/appendix/media-formats.html](http://developer.android.com/guide/appendix/media-formats.html)

**编辑：**这是对[原始问题](https://stackoverflow.com/posts/11815604/revisions)的回答，该问题是关于在 a 中玩 DivX`VideoView`并且不包含任何关于“Vitamio”的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-06T11:45:39.770

如果您想使用 Vitamio 库来显示视频等，那么首先从这里[下载 Vitamio 库 免费下载 Vitamio 库](http://unblockanything.com/browse.php?u=kwhmI3OGaDgEb3JuWtCATO%2be0rejRWf5Lc3MKuWhDlLpdg==&b=29&f=norefer)。然后在你当前的项目中包含“ZI”和“InitActivtiy”（在Vitamio lib里面）库（右键项目-->包含库-->），然后写这行代码

```
 if (!io.vov.vitamio.LibsChecker.checkVitamioLibs(this))
        return; 
```

在我的项目中的 Oncreate Method() 之后。

```
 @Override
protected void onCreate(Bundle savedInstanceState) 
 {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    if (!io.vov.vitamio.LibsChecker.checkVitamioLibs(this)) //it will check the include library of Vitamio
        return; 
```

之后将这行代码放入 Androidmanifest.xml 文件中

```
 <!-- (((((( Vitamio Library including in manifest file )))))) -->
   <activity android:name="io.vov.vitamio.activity.InitActivity" 
       android:configChanges="orientation|screenSize|smallestScreenSize|keyboard|keyboardHidden"
       android:launchMode="singleTop"
        android:theme="@android:style/Theme.NoTitleBar"
        android:windowSoftInputMode="stateAlwaysHidden"/> 
```

现在是时候使用 VideoView 等显示您的视频了。

# c++ - C 字符串与 const char* 让我感到困惑......请帮助

> ID：11815606
> 
> 赞同：4
> 
> 时间：2012-08-05T10:14:52.303
> 
> 标签：c++, string, char

我是一个 C/C++ 初学者，试图构建一个看起来非常简单的程序：它将文件加载到 c 字符串 (const char*) 中。然而，虽然这个程序非常简单，但它并没有以我理解的方式工作。看一看：

```
#include <iostream>
#include <fstream>

std::string loadStringFromFile(const char* file)
{
    std::ifstream shader_file(file, std::ifstream::in);
    std::string str((std::istreambuf_iterator<char>(shader_file)), std::istreambuf_iterator<char>());
    return str;
}

const char* loadCStringFromFile(const char* file)
{
    std::ifstream shader_file(file, std::ifstream::in);
    std::string str((std::istreambuf_iterator<char>(shader_file)), std::istreambuf_iterator<char>());
    return str.c_str();
}

int main()
{
    std::string hello = loadStringFromFile("hello.txt");
    std::cout << "hello: " << hello.c_str() << std::endl;

    const char* hello2 = loadCStringFromFile("hello.txt");
    std::cout << "hello2: " << hello2 << std::endl;

    hello2 = hello.c_str();
    std::cout << "hello2 = hello.c_str(), hello2: " << hello2 << std::endl;

    return 0;
} 
```

输出如下所示：

```
hello: Heeeeyyyyyy

hello2:       青!
hello2 = hello, hello2: Heeeeyyyyyy 
```

初始的 hello2 值每次都会改变，总是一些随机的汉字（我使用的是日本电脑，所以我猜这就是为什么它是汉字）。

在我天真的观点中，这两个值似乎应该打印相同。一个函数返回一个 c++ 字符串，然后我将其转换为 c 字符串，另一个函数加载该字符串，从该字符串转换 c 字符串并返回它。我通过在返回它之前计算值来确保字符串在 loadCStringFromFile 中正确加载，确实这是我的想法，例如：

```
/*(inside loadCStringFromFile)*/
const char* result = str.c_str();
std::cout << result << std::endl;//prints out "Heeeyyyyyy" as expected
return result; 
```

那么为什么要改变价值呢？谢谢您的帮助...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-05T10:17:20.643

您的问题是`str`in`loadCStringFromFile`是一个局部变量，并且在函数返回时被破坏。那时的返回值`c_str()`是无效的。

更多细节[在这里](https://stackoverflow.com/questions/6456359/what-is-stdstringc-str-lifetime)

您的第一个函数`loadStringFromFile`是一种更类似于 C++ 的方式，并说明了让类为您管理内存的好处。如果您使用 char*，那么您必须更加小心分配和释放内存的位置。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-05T10:36:28.900

功能

```
std::string loadStringFromFile(const char* file) 
```

返回在函数内部创建的字符串的字符串副本，该副本在字符串超出范围之前被复制，即函数结束，这就是它起作用的原因。

```
const char* loadCStringFromFile(const char* file) 
```

另一方面，返回一个指向本地字符串的指针，该指针在函数返回时超出范围并被销毁，因此返回的地址 the`const char*`指向未定义的某个位置。

为了使第二种方法起作用，您需要在调用函数之前创建字符串：

```
const char* loadCStringFromFile(const char* file, string& str); // return str.c_str()

..
string str;
const char* result = loadCStringFromFile(file,str); 
```

或者您在函数的堆上创建一个字符串并将地址传回，但这会有点混乱，因为调用者需要删除字符串以避免memleak。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-05T10:17:44.887

您应该复制 str.c_str() 的输出：

```
return strdup(str.c_str); 
```

函数`strdup`可以在 cstring 标头中找到。

# node.js - https.get response ondata 回调触发多次

> ID：11815621
> 
> 赞同：2
> 
> 时间：2012-08-05T10:17:49.537
> 
> 标签：node.js, facebook-graph-api

在使用 Facebook 图形 api 时，我使用 https.get 来请求 Facebook 用户数据。

```
var optionsP = {
        host: 'graph.facebook.com',     
        path: '/me?access_token=XXXX'
    };

    https.get(optionsP, function(resp) {                                        
        resp.on('data', function(d) {                                   
            console.log('ondata')
            console.log(d.length)
            process.stdout.write(d)
        }); 
    }).on('error', function(e) {
        console.error(e);
}); 
```

但是响应数据分为两部分！第一次打印最多 1034 个字符，然后同样的回调将再次工作并打印剩余的 1347 个字符。这些部分反应的原因是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-05T11:35:32.920

这很正常。`resp`是一个流。它是一个 ClientResponse 对象，实现了可读流接口。以下是文档：[http ://nodejs.org/api/http.html#http_http_clientresponse](http://nodejs.org/api/http.html#http_http_clientresponse)

您可以将输出通过管道传输到接受流的某处，也可以将其存储在缓冲区中，直到您收到“结束”事件。

这是一个将数据存储在内存中的字符串中的示例，直到它全部到达：

```
https.get(optionsP, function(resp) {                                        
    resp.setEncoding(); //Now the data is a string!
    var store = "";
    resp.on('data', function(d) {
        store += d;
    }); 
    resp.on('end', function() {
        console.log("this is all: " + store);
    });
}).on('error', function(e) {
    console.error(e);
}); 
```

# python - 如何反序列化 TCP 服务器上的传入数据？

> ID：11815624
> 
> 赞同：2
> 
> 时间：2012-08-05T10:18:06.957
> 
> 标签：python, protocol-buffers

我已经设置了一个服务器，它重用了我拥有的[文档](http://docs.python.org/library/socketserver.html)`self.data = self.request.recv(1024).strip()`中的代码。

但是我该如何从这个开始，将其反序列化为 protobuf 消息（`Message.proto`/ `Message_pb2.py`）。现在它似乎正在接收 1024 字节的块，而且当时不止一个......让它变得很垃圾：D

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T11:21:06.550

TCP 通常只是一个数据流。仅仅因为您将每个数据包作为一个单元发送，并不意味着接收者会收到它。大消息可能被拆分为多个数据包；小消息可以组合成一个数据包。

通过 TCP 解释多条消息的唯一方法是使用某种“框架”。对于基于文本的协议，CR/LF/CRLF/零字节可能表示每一帧的结束，但这不适用于像 protobuf 这样的二进制协议。在这种情况下，最常见的方法是简单地在每条消息前面加上长度，例如在固定大小（4 字节？）的网络字节顺序块中。然后是有效载荷。在 protobuf 的情况下，您平台的 API 还可能提供一种将长度写入“varint”的机制。

然后，阅读是一个问题：

*   阅读整个长度标题
*   读取（和缓冲）那么多字节
*   处理缓冲的数据
*   冲洗并重复

但请记住，您可能（在单个数据包中）有一条消息的*结尾*、两条完整的消息和另一条消息的*开头*（可能是长度标头的一半，只是为了让它变得有趣）。所以：在任何时候准确地跟踪你正在阅读的内容变得至关重要。

# php - php数组插入元素并保留键

> ID：11815628
> 
> 赞同：1
> 
> 时间：2012-08-05T10:19:07.663
> 
> 标签：php, arrays

这里我有我的数组（`****`只是字符串）

```
 [m_timestamp] => ****
        [n_id] => ****
        [n_name] => ****
        [n_material] => ****
        [n_neck_finish] => ****
        [n_weight] => ****
        [n_height] => ****
        [n_qty_p_ctn] => ****
        [n_ctn_dimensions] => ****
        [n_comment] => ****
        [sha1] => **** 
```

我如何插入另一个数组：

```
 [n_group] => ****
        [n_available] => **** 
```

变成原来的样子：

```
 [m_timestamp] => ****
        [n_id] => ****
        [n_name] => ****
        [n_group] => **** //inserted
        [n_available] => **** //inserted
        [n_material] => ****
        [n_neck_finish] => ****
        [n_weight] => ****
        [n_height] => ****
        [n_qty_p_ctn] => ****
        [n_ctn_dimensions] => ****
        [n_comment] => ****
        [sha1] => **** 
```

**我知道插入数组的关键值（在这种情况下`n_name`：）**

我做了什么：

```
$pos = intval(array_search("n_name", $myarray))+1;
array_splice($myarray, $pos, 0, $insertedarray); 
```

但它没有`$insertedarray`正确放置，它将它添加`[0]=>null`到我指定的位置

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-05T10:21:26.897

您可以使用[`array_merge`](http://php.net/manual/en/function.array-merge.php)功能：

```
$out = array_merge($first_array, $second_array); 
```

**更新**

使用它来合并您的数组并保留键：

```
// slice $myarray into two parts and insert $insertedarray in between
// keys are preserved
$myarray = array_merge(array_slice($myarray, 0, $pos), $insertedarray, array_slice($myarray, $pos)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T10:22:35.747

你可以使用 array_push [http://php.net/manual/en/function.array-push.php](http://php.net/manual/en/function.array-push.php)

来源：php手册（示例）

```
<?php

function array_put_to_position(&$array, $object, $position, $name = null)
{
        $count = 0;
        $return = array();
        foreach ($array as $k => $v)
        {  
                // insert new object
                if ($count == $position)
                {  
                        if (!$name) $name = $count;
                        $return[$name] = $object;
                        $inserted = true;
                }  
                // insert old object
                $return[$k] = $v;
                $count++;
        }  
        if (!$name) $name = $count;
        if (!$inserted) $return[$name];
        $array = $return;
        return $array;
}
?>

Example :

<?php
$a = array(
 'a' => 'A',
 'b' => 'B',
 'c' => 'C',
);

print_r($a);
array_put_to_position($a, 'G', 2, 'g');
print_r($a);

/*
Array
(
    [a] => A
    [b] => B
    [c] => C
)
Array
(
    [a] => A
    [b] => B
    [g] => G
    [c] => C
)
*/
?> 
```

# php - 检测是否通过域名或 IP 地址导航到

> ID：11815631
> 
> 赞同：0
> 
> 时间：2012-08-05T10:19:34.077
> 
> 标签：php, javascript

是否可以检测用户是通过域名还是通过 IP 地址导航到我的网站？谷歌不是很有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T10:21:59.873

是的，你可以例如。在 JavaScript 中使用客户端（从标签来看是可以接受的）：

```
window.location.hostname 
```

根据文档：[https ://developer.mozilla.org/en-US/docs/DOM/window.location](https://developer.mozilla.org/en-US/docs/DOM/window.location)

或服务器端，在 PHP 中：

```
$_SERVER['HTTP_HOST'] 
```

根据文档： http: [//php.net/manual/en/reserved.variables.server.php](http://php.net/manual/en/reserved.variables.server.php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-05T10:23:25.443

你可以检查这个：

```
echo $_SERVER['HTTP_HOST'] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-05T10:22:16.743

是的，它是：在 PHP 中，你有服务器变量，你需要这个：

```
$_SERVER['HTTP_REFERER']; 
```

这将为您提供访问者来自的域:)

# domain-driven-design - DDD：存储库可以返回聚合内的实体吗？

> ID：11815638
> 
> 赞同：5
> 
> 时间：2012-08-05T10:20:27.197
> 
> 标签：domain-driven-design, entity, ddd-repositories, aggregateroot

我有一个`City`聚合，有一个`PointOfInterest`实体列表。后一个实体在逻辑上位于 City 聚合中，原因在此不作解释。除了聚合根 City 之外，没有任何实体拥有指向 PointOfInterest 的链接。

但是，我们有一个 PointOfInterest 网页，可从 City 页面浏览，该网页（主要出于 SEO 原因）`id`在其 URL 中仅包含 PointOfInterest。

因此，从控制器中，直接向 CityRepository 查询 PointOfInterest 会很方便，例如`CityRepository.findPointOfInterestById()`.

另一种选择是查询`CityRepository.findCityByPointOfInterestId()`, then `City.findPointOfInterestById()`，在这种情况下看起来有点麻烦。

第一种方法有什么问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-07T13:07:06.597

由于 PointOfInterest 是 City 聚合的一部分，因此您必须接受对 PointOfInterests 的所有引用都必须通过遍历 City 来获得。CityRepository 公开 GetPoI() 方法似乎不合适，因为它允许外部对象直接引用 PoI，从而破坏了聚合的全部目的。此外，处理 PoI 似乎并不是 CityRepository 的自然责任。

正如 Wouter 所指出的，您觉得需要做这样复杂的事情可能表明当前的设计不太合适。如果 PointOfInterest 是您应用程序中的主要实体之一，并且如果用户可以从导航开始就可以访问它，而不必先经过一个城市，为什么不考虑给 PoI 自己的聚合呢？至于 PoI / PoIType 关系，PoI 拥有 PoIType 似乎比其他方式更合乎逻辑。

# visual-studio - 更改自签名生成证书上的信息

> ID：11815639
> 
> 赞同：0
> 
> 时间：2012-08-05T10:20:38.940
> 
> 标签：visual-studio, certificate, makecert

我之前使用 Visual Studio“makecert”程序生成了一个证书。

有什么方法可以修改证书上的名称、电子邮件、地址值？

目前，这些值的证书为 null。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T12:45:45.487

如果您是密钥库的名称，则可以通过使用参数调用 makecert 来使用相同的 RSA 密钥对创建新证书`-sk`。否则，您将需要创建具有正确值的新证书。

# python - “内存泄漏”与 grequests？

> ID：11815640
> 
> 赞同：5
> 
> 时间：2012-08-05T10:20:49.207
> 
> 标签：python, gevent, python-requests

这是脚本的精简版本，导致内存使用量不断增加，我看到它在 2 分钟后超过 600MB：

```
import requests
import grequests

lines = (grequests.get(l.strip(), timeout=15) for l in open('links.txt') if len(l.strip()))

for r in grequests.imap(lines, size=20):
    if r.ok:
        print r.url 
```

links.txt 是一个包含大量 url 的文件，问题发生在我收集的几组大的 url 上。在我看来，响应对象可能没有受到尊重？

我今天更新了 gevent、requests 和 grequests，以下是它们的版本：

```
In [2]: gevent.version_info
Out[2]: (1, 0, 0, 'beta', 3)

In [5]: requests.__version__
Out[5]: '0.13.5' 
```

grequests 没有我能找到的版本号。

提前感谢您的任何答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-29T04:04:23.543

[对于可能需要此链接](https://github.com/kennethreitz/grequests/issues/18)的人，此答案只是别名和链接。

我使用 imap 函数和 requests.Session 来减少内存使用量，同时在我的脚本中发出 380k 请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T10:42:19.383

从我的角度来看，这是因为您尝试同时打开所有链接。尝试这样的事情：

```
links = set(links)
while links:
    calls = (grequests.get(links.pop()) for x in range(200)) 
    for r in calls:
        ...rest of your code 
```

此代码未经测试，您会找到更好的解决方案，这应该证明您只是尝试同时打开太多链接并导致您的内存消耗。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-10-02T20:44:43.547

应该更新项目的请求库依赖项。

较旧版本的请求，包括问题示例中使用的请求，默认情况下不会预先获取任何响应内容，由您来使用数据。这留下了对底层套接字的开放引用，因此即使请求会话被垃圾收集，套接字也不会被垃圾收集，直到响应超出范围或被`response.content`调用。

在更高版本的请求中，默认情况下会预先获取响应，并且如果会话是为满足模块级`get`/ `post`/etc 请求而临时创建的，例如在未传入会话时由 grequests 发出的请求，则会显式关闭会话连接. 这在[请求 GitHub 问题 #520](https://github.com/requests/requests/issues/520)中有介绍。

# css - 防止布局在浏览器的放大/缩小中中断 - 不是通常的 div 事情

> ID：11815641
> 
> 赞同：1
> 
> 时间：2012-08-05T10:20:48.487
> 
> 标签：css, button, css-float, html, zooming

所以我确实注意到通常会处理与缩放相关的布局问题，但我找不到我的案例的答案 - 我写[了一个 WEB calc](http://yovelzack.fav.cc/) **，**在Chrome 和Firefox，但不在 IE 中。修复它的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T10:56:41.767

**给`width:220px`你的#main div**

如果您仔细查看您的 CSS，您会发现按钮在一起（一行 5 个）在调整大小时实际上比主 div 具有更大的宽度。增加宽度来`220px`解决这个问题。另一种解决方案可能是为所有元素提供最大宽度和最大高度，另一种方法是正确布局您的元素，而不仅仅依赖于浏览器的定位。做后者是一项微不足道的任务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T15:19:14.550

为了搜索者，我的解决方案是最终使用表格来制作计算器。我知道使用表格进行布局被认为是一种不好的做法，但考虑到计算器形状不应该适应新内容或最终用户屏幕的大小（至少在我的情况下），它似乎是最好的实现。这是避免在放大缩小时丢失布局形状的唯一方法，这就是 div 的全部意义所在。

# java - 使用 org.apache.commons.logging 写入日志文件

> ID：11815642
> 
> 赞同：15
> 
> 时间：2012-08-05T10:21:04.323
> 
> 标签：java, apache-commons-logging

我正在编写一个应用程序，我需要使用库将日志写入文件`org.apache.commons.logging`，但我不知道如何开始。

谁能帮我？

谢谢和最好的问候。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-06T06:28:47.540

试试这个示例，首先你需要两个像这样的属性文件；

**放在应用程序类路径中的**commons-logging.properties 。**该文件的内容应如下所示：**

 **```
 org.apache.commons.logging.Log=org.apache.commons.logging.impl.Jdk14Logger 
```

除了 Jdk14Logger 之外，您还可以使用 Log4j 记录器。并且需要第二个自定义属性文件。例如**log-config.properties**如下所示：

```
 # The following creates two handlers
    handlers=java.util.logging.ConsoleHandler, java.util.logging.FileHandler
    # Set the default logging level for the root logger
    .level=SEVERE
    # log level for the "com.example" package
    sample.logging.level=FINE
    # Set the default logging level
    java.util.logging.ConsoleHandler.level=ALL
    java.util.logging.FileHandler.level=FINE
    # Set the default formatter
    java.util.logging.ConsoleHandler.formatter=java.util.logging.SimpleFormatter
    java.util.logging.FileHandler.formatter=java.util.logging.SimpleFormatter
    # Specify the location and name of the log file
    java.util.logging.FileHandler.pattern=D:/temp/log/test.log 
```

这是示例测试类

```
 public class TestLog {

     private static Log log = LogFactory.getLog(TestLog.class);
     public static void main(String[] args) {
          log.info("Testing Info Message.");
              if (log.isDebugEnabled()) {
                  log.debug("Testing Debug Message.");
          }
        }
     } 
```

这是使用 eclipse 的示例包结构；

![在此处输入图像描述](../Images/bf4c4dfa742231ce5f30c8bf7595045a.png)

并在 VM 参数下添加 TestLog 类的编辑配置，如下所示；

```
 -Djava.util.logging.config.file=/D:/dev/workspace/LoggingTest/bin/log-config.properties(your properties file path) 
```

![在此处输入图像描述](../Images/e38c1b8f0d27832ff5927db14f785066.png)

然后运行，你可以在 D:/temp/log/test.log 下找到你的日志文件

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-05T11:05:38.453

我希望这会有所帮助......这就是我们在项目中所做的......

A. 将 jar 包含在您的项目中。

B.为记录器定义定义 log4j.xml 像这样......

```
<log4j:configuration xmlns:log4j="http://jakarta.apache.org/log4j/" debug="false">

    <appender name="FILE" class="org.jboss.logging.appender.RollingFileAppender">
    <errorHandler class="org.jboss.logging.util.OnlyOnceErrorHandler"/>
    <param name="File" value="${jboss.server.log.dir}/server.log"/>
    <param name="Append" value="false"/>
    <param name="MaxFileSize" value="1048576KB"/>
    <param name="MaxBackupIndex" value="3"/>

 <layout class="org.apache.log4j.PatternLayout">
   <param name="ConversionPattern" value="%d %-5p [%c] %m%n"/>
 </layout>      
</appender>

<root>
   <appender-ref ref="CONSOLE"/>
   <appender-ref ref="FILE"/>
</root>

</log4j:configuration> 
```

C. 在类中使用记录器：

```
import org.apache.commons.logging.Log;
import org.apache.commons.logging.LogFactory;

Class YourClass{
    private static Log log = LogFactory.getLog(YourClass.class);

    public void yourMethod(){
        log.info("Your Message");
    }
} 
```

编辑：D. 因为我们有一个 JBoss AS 环境，所以应用程序被配置为读取 log4j.xml，如下所示（您需要一个等效的配置）：

```
<mbean code="org.jboss.logging.Log4jService"
  name="jboss.system:type=Log4jService,service=Logging"
  xmbean-dd="resource:xmdesc/Log4jService-xmbean.xml">
  <attribute name="ConfigurationURL">resource:jboss-log4j.xml</attribute>
  <!-- Set the org.apache.log4j.helpers.LogLog.setQuiteMode. As of log4j1.2.8
  this needs to be set to avoid a possible deadlock on exception at the
  appender level. See bug#696819.
  -->
  <attribute name="Log4jQuietMode">true</attribute>
  <!-- How frequently in seconds the ConfigurationURL is checked for changes -->
  <attribute name="RefreshPeriod">60</attribute>
</mbean> 
```**

# scala - 使用 Play2/Scala 进行定期 WS 调用以提供 Enumerator 的最佳方法？

> ID：11815647
> 
> 赞同：4
> 
> 时间：2012-08-05T10:21:54.063
> 
> 标签：scala, playframework, playframework-2.0, enumerator, iterate

我使用枚举器模式通过 WS.url 每秒检索一些推文

```
Enumerator.fromCallback[String](() => 
        Promise.timeout(WS.url("http://search.twitter.com/search.json?q="+query+"&rpp=1").get().map { response =>
            val tweets = response.json \\ "text"
            tweets match {
                case Nil => "Nothing found!"
                case head :: tail => query + " : " + head.as[String]
            }
        }.map(Some.apply).value.get, 1000 milliseconds)
  ) 
```

我的问题是

```
Enumerator.fromCallback[String]() 
```

正在等待一个

```
Promise[Option[String]] 
```

由于 WS.url(...).get 返回一个 Promise，并且当我使用 Promise.timeout 每秒重新启动调用时，

我有一个

```
Promise[Promise[Option[String]]] 
```

所以我必须使用 value.get 来获得好的类型，所以对于异步方面来说它看起来不是很干净。

这段代码有效，但我的问题是：有没有更好、更优雅的方法来实现这一目标？我可以轻松地从另一个 Promise 和 Promise.timeout 中获得 Promise 吗？

谢谢 ：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-05T16:04:04.237

`Promise`是一个 monad，一般来说，当你发现自己有一个嵌套的 monad 时，你想把 a 粘`flatMap`在某个地方。在你的情况下，这样的事情应该有效：

```
import akka.util.duration._
import play.api.libs.concurrent._
import play.api.libs.iteratee._
import play.api.libs.ws._

val query = "test"
val url = WS.url("http://search.twitter.com/search.json?q=" + query + "&rpp=1")

val tweets = Enumerator.fromCallback[String](() => 
  Promise.timeout(url.get, 1000 milliseconds).flatMap(_.map { response =>
    (response.json \\ "text") match {
      case Nil => "Nothing found!"
      case head :: _ => query + " : " + head.as[String]
    }
  }.map(Some.apply))
) 
```

我个人会这样写：

```
val tweets = Enumerator.fromCallback[String](() => 
  Promise.timeout(url.get, 1000 milliseconds).flatMap(_.map(
    _.json.\\("text").headOption.map(query + " " + _.as[String])
  ))
) 
```

并且不要对`"Nothing found!"`消息大惊小怪，但取决于您到底在做什么，这可能不合适。

# php - PHP SplHeap 真的是堆吗？

> ID：11815649
> 
> 赞同：6
> 
> 时间：2012-08-05T10:22:01.670
> 
> 标签：php, spl

堆的 PHP 实现真的是一个完整的实现吗？

当我阅读这篇文章[http://en.wikipedia.org/wiki/Heap_%28data_structure%29](http://en.wikipedia.org/wiki/Heap_%28data_structure%29)时，我想到一个子节点有一个特定的父节点，并且一个父节点有特定的子节点。

然而，当我查看 PHP 文档中的示例[http://au.php.net/manual/en/class.splheap.php](http://au.php.net/manual/en/class.splheap.php)时，似乎子节点都共享相同的“级别”，但特定的父节点/孩子的信息不重要。

例如，哪个节点是 PHP 示例中排名第 10 的三个节点中的每一个的父节点？

在我的应用程序中，当用户选择“节点 156”时，我需要知道它的孩子是谁，以便我可以访问他们每个人。（我可以将他们的身份设为“节点 1561”、“节点 1562”等，因此关系很明显）。

PHP Heap 实现是否不完整？我应该忘记Spl课程并走自己的路吗？或者我错过了关于堆应该如何操作的一些东西？或者也许我应该查看一个特定的堆变体？

多谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-29T17:59:24.653

此堆实现的 API 不允许数组访问，这是您在这种情况下所需要的。堆通常用于实现其他允许您轻松从顶部删除项目的结构。

您可以创建一个包装迭代器来寻找您需要的位置。我怀疑这将是一个性能不佳的解决方案，而不是一个很好的解决方案。

* * *

在这种情况下，`BinaryTree`我认为您需要的是 a 。给定树上的一个点，您可以向下走，因为它们是直接相连的。我确实有一个[BinarySearchTree](https://github.com/morrisonlevi/PHP-Datastructures/blob/master/src/Spl/BinarySearchTree.php)可以使树保持有序，您可以调用`getRoot`以获取`BinaryTree`. 还有一个[AvlTree](https://github.com/morrisonlevi/PHP-Datastructures/blob/master/src/Spl/AvlTree.php)可以保持树平衡以实现最佳搜索。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-14T22:18:25.583

堆通常用于回答围绕“集合中的最大/最小元素是什么”的问题。

虽然堆可以巧合地有效地回答“谁是最大/最小节点的子节点”，但当您需要访问任意节点来回答您的问题时，堆并不是一个很好的数据结构（一个节点不是最大节点）。如果需要表示和维护特定的父子关系，它也不是要使用的数据结构，因为子节点可以并且确实在不同的父节点之间交换。

所以基于这些理由，php的堆实现绝对不是不完整的。您只需要一个不同的数据结构。

# java - 得到一个奇怪的异常无法解析的日期：“2012 年 8 月 6 日”

> ID：11815656
> 
> 赞同：5
> 
> 时间：2012-08-05T10:22:56.037
> 
> 标签：java, android

我得到了一个日期时间格式 -`"dd MMM yyyy"`在尝试解析“2012 年 8 月 6 日”时，我得到一个 java.text.ParseException Unparseable 日期。

一切看起来都很好，你看到问题了吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-05T11:13:48.413

您还需要提及语言环境...

```
Date date = new SimpleDateFormat("dd MMMM yyyy", Locale.ENGLISH).parse("6 Aug 2012"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T10:32:36.233

使用类似的东西：

```
DateFormat sdf = new SimpleDateFormat("dd MMM yyyy", Locale.ENGLISH);
Date date = sdf.parse("6 Aug 2012"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-05T10:36:49.417

这应该适合你。您需要提供语言环境

```
Date date = new SimpleDateFormat("dd MMM yyyy", Locale.ENGLISH).parse("6 Aug 2012"); 
```

或者

```
Date date = new SimpleDateFormat("dd MMM yyyy", new Locale("EN")).parse("6 Aug 2012"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-05T11:04:03.513

使用带**分隔符**`split()`的函数 **`" "`**

 **```
String s = “6 Aug 2012”;

String[] arr = s.split(" ");

int day = Integer.parseInt(arr[0]);
String month = arr[1];
int year = Integer.parseInt(arr[2]); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-04-15T17:57:12.980

虽然其他答案是正确的但已过时，并且由于仍在访问此问题，但这是现代答案。

## java.time 和 ThreeTenABP

使用现代 Java 日期和时间 API java.time 进行日期工作。这将适用于您的 Android 版本/minSDK：

```
 DateTimeFormatter dateFormatter
            = DateTimeFormatter.ofPattern("d MMM uuuu", Locale.ENGLISH);

    String str = "6 Aug 2012";
    LocalDate date = LocalDate.parse(str, dateFormatter);
    System.out.println(date); 
```

输出：

> 2012-08-06

在格式模式中，java.time 仅使用一个`d`来表示月份中的一位或两位数。对于年份，您可以使用`yyyy`、`uuuu`和`y`中的任何一个`u`。正如其他人所说，指定语言环境。如果`Aug`是英语，则为英语语言环境。

## 问题：java.time 不需要 Android API 级别 26 吗？

java.time 在较旧和较新的 Android 设备上都能很好地工作。它只需要至少**Java 6**。

*   在 Java 8 及更高版本以及更新的 Android 设备（从 API 级别 26 开始）中，现代 API 是内置的。
*   在非 Android Java 6 和 7 中获得 ThreeTen Backport，现代类的后向端口（ThreeTen 用于 JSR 310；请参阅底部的链接）。
*   在（较旧的）Android 上使用 ThreeTen Backport 的 Android 版本。它被称为 ThreeTenABP。并确保从`org.threeten.bp`子包中导入日期和时间类。

## 链接

*   与此类似的问题：[Java - Unparseable date](https://stackoverflow.com/questions/6154772/java-unparseable-date)。
*   [Oracle 教程：日期时间](https://docs.oracle.com/javase/tutorial/datetime/)解释如何使用 java.time。
*   [问题：`uuuu`与`yyyy`在`DateTimeFormatter`Java 中格式化模式代码相比？](https://stackoverflow.com/questions/41177442/uuuu-versus-yyyy-in-datetimeformatter-formatting-pattern-codes-in-java)
*   [Java 规范请求 (JSR) 310](https://jcp.org/en/jsr/detail?id=310)，`java.time`第一次描述的地方。
*   [ThreeTen Backport 项目](http://www.threeten.org/threetenbp/)，`java.time`Java 6 和 7 的反向移植（ThreeTen for JSR-310）。
*   [ThreeTenABP](https://github.com/JakeWharton/ThreeTenABP) , ThreeTen Backport 的 Android 版
*   [问题：如何在Android项目中使用ThreeTenABP](https://stackoverflow.com/questions/38922754/how-to-use-threetenabp-in-android-project)，有非常详尽的解释。**

# c# - 获取richtextbox的当前行的文本（插入符号闪烁的地方）

> ID：11815657
> 
> 赞同：1
> 
> 时间：2012-08-05T10:22:56.310
> 
> 标签：c#, richtextbox

我真的需要在富文本框控件中获取插入符号闪烁的行的内容。假设我在富文本框中有以下文本：

```
This
is
a
test 
```

我想通过提供其索引来检索第 2 行的文本（例如，如果函数是从零开始的，则为 2 或 1）。

提前致谢，

瓦利

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T10:36:00.757

我不确定问题的标题和您真正想知道的内容是否相同...如果您想在给定索引的情况下获得一条线，请检查 RichTextBox 的**Lines**属性。

[http://msdn.microsoft.com/en-us/library/system.windows.forms.textboxbase.lines.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.textboxbase.lines.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-21T17:37:51.733

确保将文本框的 WordWrap 设置为 false 以确保行的索引对应于插入符号所在的行。试试这个：

```
var pos = richTextBox1.GetLineFromCharIndex(this.richTextBox1.SelectionStart);
MessageBox.Show(richTextBox1.Lines[pos]); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-05T10:34:01.960

你能行的

```
 richTextBox1.Lines[1] 
```

# java - 如何在java中解析这个日期

> ID：11815659
> 
> 赞同：3
> 
> 时间：2012-08-05T10:23:09.063
> 
> 标签：java, parsing, date

请告诉我如何解析这个日期：“2012 年 7 月 29 日”

我尝试：

```
new SimpleDateFormat("dd-MMM-yyyy"); 
```

但它不起作用。我得到以下异常：

```
java.text.ParseException: Unparseable date: "29-July-2012" 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-05T10:47:18.733

您还需要提及语言环境...

```
Date date = new SimpleDateFormat("dd-MMMM-yyyy", Locale.ENGLISH).parse(string); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-05T10:34:38.997

在您的字符串中，完整格式用于月份，因此根据[http://docs.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html](http://docs.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html)您应该按照 Baz 评论中的建议使用 MMMM .

可以从 API 文档中了解其原因。 [http://docs.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html#month](http://docs.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html#month)指出，如果有超过 3 个字符和 [http://docs ，对于月份，它将被解释为文本.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html#text](http://docs.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html#text)声明完整形式（在您的情况下为“July”而不是“Jul”）将用于 4 个或更多字符。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-05T10:33:29.620

试试这个（添加 Locale.ENGLISH 参数和月份的长格式）

```
package net.orique.stackoverflow.question11815659;

import java.text.ParseException;
import java.text.SimpleDateFormat;
import java.util.Locale;

public class Question11815659 {

    public static void main(String[] args) {

        try {
            SimpleDateFormat sdf = new SimpleDateFormat("dd-MMMM-yyyy",
                    Locale.ENGLISH);
            System.out.println(sdf.parse("29-July-2012"));
        } catch (ParseException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

    }

} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-05T10:57:23.890

使用带**分隔符**`split()`的函数 **`"-"`**

 **```
String s = "29-July-2012";

String[] arr = s.split("-");

int day = Integer.parseInt(arr[0]);
String month = arr[1];
int year = Integer.parseInt(arr[2]);

// Now do whatever u want with the day, month an year values.... 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-05T10:34:14.870

创建一个 StringTokenizer。您首先需要导入库：

```
import Java.util.StringTokenizer; 
```

基本上，你需要创建一个分隔符，它基本上是用来分隔文本的。在这种情况下，分隔符是“-”（破折号/减号）。

注意：由于您用引号显示文本并说解析，我假设它是一个字符串。

例子：

```
//Create string
String input = "29-July-2012";

//Create string tokenizer with specified delimeter
StringTokenizer st = new StringTokenizer(input, "-");

//Pull data in order from string using the tokenizer
String day = st.nextToken();
String month = st.nextToken();
String year = st.nextToken();

//Convert to int
int d = Integer.parseInt(day);
int m = Integer.parseInt(month);
int y = Integer.parseInt(year);

//Continue program execution 
```**

# php - 如何使用 Wordpress 使用 jQuery UI？

> ID：11815668
> 
> 赞同：3
> 
> 时间：2012-08-05T10:23:49.890
> 
> 标签：php, javascript, jquery, wordpress

我正在尝试让 jQuery UI 对话框与 WordPress 一起使用。我看到了这篇文章（[在 Wordpress 中使用 jQuery UI 对话框](https://stackoverflow.com/questions/5790820/using-jquery-ui-dialog-in-wordpress)），我尝试了解决方案，但它对我不起作用。万一这很重要，我正在使用基于 211 主题的子主题。

我把它直接放在 php 中的 wp_head() 函数前面：

```
function frontporch_enqueue_scripts() {
        if (!is_admin() ) {
            wp_enqueue_script( 'jquery' );
            wp_register_script( 'google-jquery-ui', 'http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.12/jquery-ui.min.js', array( 'jquery' ) );
            wp_register_script( 'jquery-template', get_bloginfo('template_directory').'/js/jquery.template.js',array('jquery'),version_cache(), true);
            wp_register_style( 'jquery-style', 'http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.1/themes/smoothness/jquery-ui.css', true); 
            wp_enqueue_style( 'jquery-style' );
            wp_enqueue_script( 'google-jquery-ui' );
            wp_enqueue_script( 'jquery-template' );
        }       
    }   
    add_action( 'init', 'frontporch_enqueue_scripts' ); 
```

*我注意到第二十一主题或子主题实际上并没有第三个脚本（template.js），但我认为这不会导致问题。*

然后我在 HEAD 标签的底部添加了这个：

```
<script type="text/javascript">
$( "#markte_area" ).dialog({
    autoOpen: false,    
});

jQuery(document).ready(function($){
    jQuery( "#markte_link" ).click(function() {
        $( "#dialog" ).dialog( "open" );
        return false;
    }); 
}); //end document ready
</script> 
```

加载页面时，我在错误控制台中收到以下错误：

> **错误：$ 不是函数**

如果这将帮助您诊断问题，那么发生这种情况的页面就在[这里。](http://www.dynamicpalette.com/esprit/)谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-04T09:58:54.893

```
wp_enqueue_script('jquery-ui', 'http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.6/jquery-ui.min.js', array('jquery'), '1.8.6'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T22:11:43.997

我刚刚看了你的页面。您正在加载 jQuery.js 但不是 jQuery-ui.js。这就是为什么它不起作用。

此外，请确保您正在加载正确的 jquery-ui.js，其中包括您需要的所有模块。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-05T10:29:12.987

观看您包含的所有脚本，在网络选项卡中的萤火虫中，有时它是错误链接的 403 错误。（顺便说一句，在检查之前清除所有缓存）。

jQuery 也按原样工作吗？

# android - 选项卡活动中的片段在旋转时会丢失所有数据？

> ID：11815669
> 
> 赞同：6
> 
> 时间：2012-08-05T10:23:52.590
> 
> 标签：android, android-fragments, actionbarsherlock, android-tabs

我正在使用 Sherlock ActionBar 库，并且我有一个实现 ActionBar.TabListener 的 SherlockFragmentActivity（用于我的选项卡），并且我有 3 个选项卡……每个选项卡都是一个 SherlockFragment。当我旋转时，整个 Activity 被重新创建，并且我丢失了 Fragment 中我的 onCreate 中声明的所有变量。我将如何解决这个问题？

我想我应该使用片段作为选项卡而不是活动......这是错误的吗？

**编辑：**我应该提到我当前的解决方法是在选项卡活动中使用静态列表，并让片段在 onPause 上将内容推送到这些列表（并在 onResume 上从它们那里取回内容）。我真的不喜欢这样做，我知道必须有更好的方法。

另外，关于 if(savedInstanceState==null)，我已经尝试过了，但它似乎不起作用。我认为这是因为正在重新创建包含我的 Fragments 的 Activity 并且需要重新创建选项卡。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-05T10:55:11.517

类中调用`setRetainInstance()`了一个方法`Fragment`，您需要将其设置为`true`. 这将保存您的片段实例，然后您可以检查`onCreate()`.

此处提供更多信息：http: [//developer.android.com/reference/android/app/Fragment.html](http://developer.android.com/reference/android/app/Fragment.html)

# android - 从 OverlayItem 打开 Activity

> ID：11815676
> 
> 赞同：1
> 
> 时间：2012-08-05T10:25:19.960
> 
> 标签：android, overlay, android-mapview

如何从 OverlayItem 打开 Activity：这是我的代码：

```
@Override
protected boolean onBalloonTap(int index) {

    if (index == 0) {
        c.startActivity(new Intent (c.getApplicationContext(),
                QuoteDetail.class)); 
```

此代码可以很好地打开一个新活动，但我想将此代码添加到上面的代码中：

```
public void onClick(View view) {
                 Intent i = new Intent(Test.this, QuoteDetail.class);
                 i.putExtra("position", 1);
                 startActivity(i); 
```

我怎样才能做到这一点。对不起这个愚蠢的问题，我是初学者

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T11:03:06.707

```
private Context c;    
@Override
    protected boolean onBalloonTap(int index) {

        if (index == 0) { 
    Intent intent = new Intent(c, QuoteDetail.class);
                    intent.putExtra("position", 1);
                    c.startActivity(intent); 
                  }
        } 
```

# java - JVM中有多少对象太多了？

> ID：11815684
> 
> 赞同：1
> 
> 时间：2012-08-05T10:26:36.590
> 
> 标签：java, optimization, memory, jvm, jakarta-mail

我有一台带有 Intel(R) Pentium(R) 4 CPU 2.53GHz 和 2 GB RAM 的旧 PC。我正在遍历`javax.mail.Message`实例，并且想知道内存使用的上限。

假设“常规”大小的消息，可以轻松加载多少条消息？几万，几十万？百万？

请寻找一些棒球场WAG。

[堆](https://stackoverflow.com/a/2253999/262852)是这样的：

```
run:
DEBUG: nntp: newsrc loading /home/thufir/.newsrc
DEBUG: nntp: newsrc load: 5 groups in 16ms
Aug 05, 2012 3:52:17 AM net.bounceme.dur.usenet.driver.FetchBean <init>
INFO: max 259522560
Aug 05, 2012 3:52:17 AM net.bounceme.dur.usenet.driver.FetchBean <init>
INFO: allocatedMemory 16252928
Aug 05, 2012 3:52:17 AM net.bounceme.dur.usenet.driver.FetchBean <init>
INFO: freeMemory 14160912
Aug 05, 2012 3:52:17 AM net.bounceme.dur.usenet.driver.FetchBean <init>
INFO: totalFreeMemory 257430544
Aug 05, 2012 3:52:17 AM net.bounceme.dur.usenet.driver.FetchBean <init>
INFO: useMemory 2092016 
```

我正在[迭代使用](https://github.com/THUFIR/USENET/blob/master/src/net/bounceme/dur/usenet/model/Usenet.java)[GNU NNTP 库](http://www.gnu.org/software/classpathx/javamail/)`Message`从本地[Leafnode NNTP](http://leafnode.sourceforge.net/)服务器加载的's 。

检查消息的标头，然后在适当的时候使用 JPQL 将一些标头持久保存到数据库中。

顺便说一下，这是在 Ubuntu 11.10 GNOME 经典版上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T12:42:58.943

好吧，我会说这取决于您为 Java 虚拟机允许的堆内存空间。

您可以在堆空间上收听内存管理器通知。如果进入超出状态，停止加载更多消息，将消息四舍五入到您想要的值，然后对结果进行分页。

# java - 在tomcat 7中配置虚拟主机的问题

> ID：11815692
> 
> 赞同：1
> 
> 时间：2012-08-05T10:28:40.247
> 
> 标签：java, tomcat, virtualhost, server.xml

我在 tomcat 7 中配置虚拟主机时遇到问题。

到目前为止，我已经完成了以下工作：

*   **在server.xml**文件中添加了一个**Host**元素，其中 appBase 作为包含我的 Web 应用程序的 webapp 文件夹。

     **```
    <Host name="www.*myhostname*.com" appBase="my_webapp_folder_name" unpackWARs="true"     autoDeploy="true">
        <Context docBase="path_of_external_folder" path="/img" />
    </Host> 
    ```** 
***   更改了 Catalina 引擎中的 defaultHost。

    ```
    <Engine name="Catalina" defaultHost="www.*myhostname*.com"> 
    ```

    *   在 catalina.home 中创建了一个 webapp 文件夹 ( **my_webapp_folder_name** )。还在这个 webapp 文件夹中创建了一个 ROOT 文件夹。

    *   复制此 ROOT 文件夹内的所有 JSP/HTML、类文件、CSS 等。

    *   在 catalina.home/conf/Catalina/myhostname 文件夹中创建了一个 ROOT.xml 文件，其内容如下：

    ```
    <Context path="" docBase="${catalina.home}/my_webapp_folder_name/ROOT" /> 
    ```** 

 **我在这里错过了什么吗？因为，在完成上述所有操作后，我无法使用主机名进行连接。但是如果我输入服务器的 IP 地址，它就可以正常工作。

我不能说是否存在任何与权限相关的问题。

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T10:44:40.550

这必须是名称解析的问题。您必须能够解析 www.myhostname.com。

如果只是在您的计算机上开发，您可以添加名称记录：

在 Windows 上：

```
C:\Windows\System32\drivers\etc\hosts 
```

在 Linux 上：

```
/etc/hosts 
```

*您可以使用nslookup*或*dig*检查分辨率。

否则，设置您的 DNS 以将 www.myhostname.com 解析为您的 Tomcat 绑定地址。**

# drupal - Drupal 7：搜索字段

> ID：11815693
> 
> 赞同：0
> 
> 时间：2012-08-05T10:28:44.380
> 
> 标签：drupal, drupal-7

我刚刚开始学习 Drupal，并决定实现一个简单的“学生列表”站点。

在我的内容类型“学生”中，我添加了一个数字字段“年龄”。现在，在输入一些内容并重新索引后，我想在“年龄”字段上执行搜索。

如果我在搜索框中输入了一些有效的年龄，那么什么也找不到。

如何按年龄或按年龄范围查找学生？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T16:57:32.033

如果您是 Drupal 的新手，这些步骤中的每一个都需要自己的说明。幸运的是，互联网上有很多教程。

要从您的学生内容类型创建可排序/可过滤的列表页面：

1.  从学生内容类型创建视图。
2.  将新视图的显示类型设置为表格视图，并确保将年龄列列为您要显示的字段。
3.  将表格的标题设置为可点击（这样您就可以在列表显示时对其进行排序。）
4.  使用公开过滤器允许人们按年龄、年龄范围或其他标准（例如姓氏等）过滤您的组。

我会考虑对每个步骤进行以下搜索：

1.  Drupal 7 创建查看站点：youtube.com
2.  Drupal 7 表格视图显示格式
3.  Drupal 7 中的可点击表视图标题
4.  Drupal 7 暴露过滤器站点：youtube.com

# sql-server - 无法访问存储过程

> ID：11815695
> 
> 赞同：0
> 
> 时间：2012-08-05T10:29:11.843
> 
> 标签：sql-server, tsql, stored-procedures

无法执行存储过程。谁能给我建议并指出我的愚蠢错误？

我得到的错误信息是

> 无效操作。连接已关闭

代码：

```
public void Update(RepliesBAL RPBAL)
{
    using (SqlConnection connection = new SqlConnection(@"Data Source=19NNZP;Initial Catalog=ivr;Persist Security Info=True;User ID=sa;Password=sa"))
    {
        SqlCommand command = new SqlCommand ();
        command.CommandType = CommandType.StoredProcedure;
        command.CommandText = "dbo.fax_UpdateFaxReply";
        command.Parameters.Add("@uid", SqlDbType.VarChar, 50).Value = RPBAL.UlyssesID ;

        SqlTransaction transaction;

        transaction = connection.BeginTransaction("SampleTransaction");

        command.Connection = connection;
        command.Transaction = transaction;

        try
        {
            connection.Open();
            command.ExecuteNonQuery();
            Console.WriteLine("OK");
        }
        catch (Exception ex)
        {
            Console.WriteLine("Commit Exception Type: {0}", ex.GetType());
            Console.WriteLine("  Message: {0}", ex.Message);
            try
            {
                transaction.Rollback();
            }
            catch (Exception ex2)
            {
                Console.WriteLine("Rollback Exception Type: {0}", ex2.GetType());
                Console.WriteLine("  Message: {0}", ex2.Message);
                throw new Exception(ex.Message);
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T11:10:42.817

为了调用`.BeginTransaction()`，您的连接需要已经打开 - 所以将您的代码更改为：

```
using (SqlConnection connection = new SqlConnection(@"Data Source=19NNZP;Initial Catalog=ivr;Persist Security Info=True;User ID=sa;Password=sa"))
{
        // set up the SqlCommand 
        SqlCommand command = new SqlCommand();
        command.Connection = connection;
        command.CommandType = CommandType.StoredProcedure;
        command.CommandText = "dbo.fax_UpdateFaxReply";

        // SqlDbType should be *NVarChar* to exactly match the stored procedure parameter's type! 
        // Otherwise you'll have an implicit conversion happening....
        command.Parameters.Add("@uid", SqlDbType.NVarChar, 50).Value = RPBAL.UlyssesID ;

        SqlTransaction transaction;

        try
        {
            // open connection, start transaction
            connection.Open();

            transaction = connection.BeginTransaction("SampleTransaction");

            // assign transaction to SqlCommand and execute it  
            command.Transaction = transaction;
            command.ExecuteNonQuery();

            // if successful - commit the transaction!
            transaction.Commit();
            connection.Close();

            Console.WriteLine("OK");
        }
        catch (Exception ex)
        {
            Console.WriteLine("Commit Exception Type: {0}", ex.GetType());
            Console.WriteLine("  Message: {0}", ex.Message);
            try
            {
                transaction.Rollback();
            }
            catch (Exception ex2)
            {
                Console.WriteLine("Rollback Exception Type: {0}", ex2.GetType());
                Console.WriteLine("  Message: {0}", ex2.Message);
                throw new Exception(ex.Message);
            }
        }
    } 
```

在那次更改之后，希望这段代码应该可以正常工作。

# sql - Nonequi 加入甲骨文

> ID：11815698
> 
> 赞同：-4
> 
> 时间：2012-08-05T10:29:59.060
> 
> 标签：sql, oracle

我正在尝试在 oracle 中进行 nonequi join，以显示绩效等级为 B1、B3 和 B4 的员工的员工姓名、等级和奖金价值。

```
SELECT Name, Grade, BonusPercent,  
  FROM STAFFING, STAFF BONUS, STAFF,  
   WHERE PerformanceGrade = B1, B3, B4; 
```

我没有运气并且不断出错，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T10:51:20.630

[您再次](https://stackoverflow.com/questions/11810152/how-to-use-group-by)遇到的错误是因为不应该存在的尾随逗号。

此外，`STAFF BONUS`它*不是*有效的表名，因为中间有一个空格，*并且*一个值不能等于三个逗号分隔的值。您需要使用该[`in`](http://www.techonthenet.com/sql/in.php)函数，它是 3 个 OR 的逻辑等价物。

```
SELECT Name, Grade, BonusPercent   -- NO TRAILING COMMA
  FROM STAFFING, STAFF_BONUS, STAFF -- NO TRAILING COMMA, NO SPACE IN TABLE NAME
 WHERE PerformanceGrade in (B1, B3, B4) -- USE IN 
```

但是，**我不能足够强调这一点**，这个查询实际上是你想要的可能性很小。这将为您提供所有三个表的[笛卡尔积](http://en.wikipedia.org/wiki/Cartesian_product)，即，对于每个工作人员，您都会获得所有奖金。不是你想要的。

[`JOIN`](http://en.wikipedia.org/wiki/SQL_join)使用公共列将表放在一起更正常。例如

```
select staff.name, staff.grade, staff_bonus.bonuspercent
  from staffing 
  join staff
    on staffing.id = staff.staffing_id
  join staff_bonus
    on staff_bonus.id = staff.bonus_id
 where PerformanceGrade in (B1, B3, B4) 
```

这显然是完全虚构的，因为我不知道你的桌子是什么样子，但应该给你一个大致的想法。

我强烈建议阅读[连接](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)和[基本 SQL 语法](http://www.techonthenet.com/oracle/index.php)。

# entity-framework - 我应该如何建模与 EntityFramework 4 的一对多关系以使用迁移和 ASP MVC

> ID：11815704
> 
> 赞同：0
> 
> 时间：2012-08-05T10:31:53.457
> 
> 标签：entity-framework

我正在尝试使用 ASP MVC 4 和 Entity Framework 4 创建非常简单的网站。我需要使用迁移功能，因为我会将应用程序部署到共享主机 (GoDaddy)，并且我不想在每次更改时手动更改表。

建模一对多关系的正确方法是什么？使用其他实体类型或其他实体的主键类型？

当我使用另一种实体类型时，这是首选的，因为它使模型更清晰，迁移工具工作但 ASP MVC 的脚手架没有。即使我手动添加下拉列表以选择其他实体 ASP MVC 也没有解析请求权并且没有设置其他实体属性。

这是两个选项：

选项1：使用其他实体类型。

```
 public class Tenant {
    [Key]
    public string TenantID { get; set; }
    public string Name { get; set; }
  }

  public class Survey {
    [Key]
    public string SurveyID { get; set; }

    [Required]
    public Tenant Tenant { get; set; }

    [Required]
    [StringLength(100, MinimumLength=5)]
    public string Title { get; set; }

    [Required]
    public DateTime CreatedAt { get; set; }
  } 
```

选项 2：使用主键类型。

```
 public class Tenant {
    [Key]
    public string TenantID { get; set; }
    public string Name { get; set; }
  }

  public class Survey {
    [Key]
    public string SurveyID { get; set; }

    [Required]
    public string TenantID { get; set; }

    [Required]
    [StringLength(100, MinimumLength=5)]
    public string Title { get; set; }

    [Required]
    public DateTime CreatedAt { get; set; }
  } 
```

我在我的 ASP MVC 4 项目中为调查实体创建了带有脚手架的 MVC 控制器。它创建 CRUD 控制器和视图。在视图中，它没有为租户放置任何字段。在我自己添加之后，调用了 Create(Tenant tenant) 方法，但 HTML 表单发送的租户字段没有被 MVC 解析，也没有设置调查实体的租户字段。

我愿意

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T11:03:32.110

这些看起来像您正在映射一对一关系而不是一对多。如果一项调查可以有多个租户，则：

```
public class Tenant {
    [Key]
    public string TenantID { get; set; }
    public string Name { get; set; }
public virtual  Survey Survey  {get; set;}
  }

  public class Survey {
    [Key]
    public string SurveyID { get; set; }

    [Required]
    [StringLength(100, MinimumLength=5)]
    public string Title { get; set; }

    [Required]
    public DateTime CreatedAt { get; set; }

    public virtual ICollection<Tenant> Tenant {get; set;}
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-05T13:41:26.427

我发现[这一系列的帖子](http://blog.stevensanderson.com/2011/01/28/mvcscaffolding-one-to-many-relationships/)解释了如何制作 EF 模型，以便它们可以与 EF 和 ASP MVC 一起使用。这个想法是同时拥有“普通”引用类型和强引用类型。

```
public class Team
{
    public int TeamId { get; set; }
    // ... other Team properties go here

    // Each Team has an optional "next opponent" which is another Team
    public int? NextOpponentId { get; set; }
    [ForeignKey("NextOpponentId")] public virtual Team NextOpponent { get; set; }

    // Each Team also has a required Manager and Administrator, both of which are people
    public int ManagerId { get; set; }
    public int AdministratorId { get; set; }
    [ForeignKey("ManagerId")] public virtual Person Manager { get; set; }
    [ForeignKey("AdministratorId")] public virtual Person Administrator { get; set; }
} 
```

# html - 嵌入在html中的actionscript rss

> ID：11815708
> 
> 赞同：2
> 
> 时间：2012-08-05T10:32:47.170
> 
> 标签：html, actionscript-3, actionscript, rss, embed

我是 actionscript 的新手，有一些问题：

我在 CS 5.5 中使用 AS 3.0 编写了一个 rss 阅读器

当我按 ctrl+Enter 时，它会读取我的 rss 信息，

但是当我在 html 中发布它时，它只是卡在图片上（显示在舞台上）并且什么都不做 + 显示违反沙箱的错误

我花了一整天的时间阅读文档并理解这是域限制或类似的东西，但仍然不明白该怎么做，你能帮帮我吗

这是我的 swf 文件的代码

俄语.swf

```
var news_title:Array = new Array ();
var news_descr:Array = new Array ();
var news_pubdate:Array = new Array ();

var rus = "http://news.yandex.ua/index.rss";

test (rus,txt_descr,txt_title);

function test (link,txt_descr,txt_title)

{
var rssLoad:URLLoader = new URLLoader(new URLRequest(link));

rssLoad.addEventListener(Event.COMPLETE, end_rssLoad);

function end_rssLoad(rss_data:Event)
{
    var rss_file:XML = new XML(rss_data.target.data);

    for each (var item:XML in rss_file.channel.item)
    {
        news_title.push(item.title);
        news_descr.push(item.description);
        news_pubdate.push(item.pubDate);

    }

    show_rss();
}

function show_rss()
{
    //number of news in rss field
    var i:Number = 0;

    //number of loops before update the field
    var n:Number = 0;

    function assign_rss_textBox()
    {
        txt_title.htmlText = news_title[i];

        var blank_height = txt_descr.height;

        txt_descr.htmlText = news_descr[i];
        txt_descr.autoSize = "center";
        txt_descr.y = txt_descr.y + (blank_height - txt_descr.height) / 2;

        i+=1;
        if (i >= news_title.length)
        {
            i=0;
            n+=1;
            if (n > 2)
            {
                clearInterval(delay_assign_rss_textBox);
            }
        }
    }

    assign_rss_textBox();

    var delay_assign_rss_textBox = setInterval(assign_rss_textBox,500);
}

} 
```

这是html页面的代码

```
<html>
<body>
<object width="600" height="125">
<param name="movie" value="russian.swf">
<param name="quality" value="high">
<embed src="russian.swf" quality=high width="600" height="125" ">
</embed>
</object>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T09:16:33.743

正如您正确识别的那样，这是一个跨域安全问题，原因是您尝试将来自另一个域的数据加载到您的 Flash 文件中。如果您查看[`crossdomain.xml`](http://news.yandex.ua/crossdomain.xml)存储提要的域，您会发现它只允许来自域本身的请求。

如果您无法控制跨域策略（我认为您没有），通常的解决方案是在您自己的域上创建一个服务器端代理来读取数据并将其公开给您的 SWF。[本文](http://xmlrpcflash.mattism.com/proxy_info.php)很好地解释了该过程，并包含一个示例脚本。

[这里](http://scottrockers.com/blog/resources/flash-information/workaround-solution-to-flash-error-2044-unhandled-securityerror-and-error-2048-security-sandbox-violation)还解释了一个解决方案，它涉及在[Feedburner](http://feedburner.google.com/fb/a/myfeeds?gsessionid=9EI9AFDrptvF_QgFQ3EC1g)中镜像提要并从那里使用它（大概它的跨域策略更宽松），而不是直接从源提要中使用。

# php - 如何按国家/地区阻止访问者？（Htaccess）

> ID：11815709
> 
> 赞同：1
> 
> 时间：2012-08-05T10:33:08.357
> 
> 标签：php, .htaccess

免得说我想阻止来自特定国家的访问者，写它的正确方法是什么？
我尝试使用`deny from ip`
，但这不是正确的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T10:52:07.980

如果它必须是`.htaccess`文件，那么您可以使用[ipinfodb.com](http://www.ipinfodb.com/ip_country_block.php)上提供的自动生成器工具。您还可以使用地理定位服务的 API，例如： http: [//freegeoip.net/static/index.html](http://freegeoip.net/static/index.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T10:35:38.127

正确的方法是不使用 htaccess，您可以使用已经填充的带有 ip 间隔的表进行一些 PHP 检查，告诉您哪个间隔受到哪个国家/地区的影响。

**编辑：**

如果要使用 htacces，则必须为`deny from ip`一个国家/地区的每个 ip 范围写一行（例如，如果您尝试阻止 10 个国家/地区，这可能会导致混乱，这就是为什么这是一个坏主意）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-05T11:20:49.530

使用 Apache 的 .htaccess 文件阻止特定网络非常容易。例如，添加...

> 从 221.140.10.0/24 拒绝

..将阻止来自 221.140.10.0 Class-C 网络的任何流量（AKA 斜线 24）。

因此，屏蔽特定国家只需找出这些国家的所有网络，然后创建一系列类似上述的条目。

此参考[链接](http://www.ip2location.com/free/visitor-blocker)可能会对您有所帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-05T10:53:33.137

您使用的任何方法都不会是完全证明的。用户可以使用代理使他们看起来与实际所处的地理位置不同。如果您阻止用户从某些区域访问您的站点至关重要，那么您将不得不考虑不同的身份验证方法（不依赖于 IP 地址）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-03-10T22:01:51.980

如果您完全关心[性能](http://www.maxmind.com/en/benchmark)，我建议您使用 PHP 扩展 API 。使用 PHP (C API) 扩展，您每秒可以获得超过 700 万次查询。众所周知，htaccess 具有性能副作用。

我在这里描述了如何编译扩展，以及如何使用 PHP 中的 mmdb 数据库通过 iso-3316 2 字符代码限制国家/地区：

[使用 Kohana PHP 介绍 Maxmind GeoLite2](http://blog.jamieisaacs.com/2014/03/10/intro-to-maxmind-geolite2-with-kohana/)

![地理定位 IP 地址](../Images/7cf8791e6030de91f7a4d84d655684e9.png)

# php - 如何使用图形 API 在上传的照片中插入链接

> ID：11815720
> 
> 赞同：0
> 
> 时间：2012-08-05T10:34:43.083
> 
> 标签：php, facebook, wordpress, facebook-graph-api

我可以上传照片并包含 Graph API 的链接吗？我只想像 Instagram 应用一样包含指向原始帖子的链接。我希望它看起来像这样：

```
picture-name -- http://myhost.com/link/to/original/post 
```

我的代码是这样的：

```
$post_link = get_permalink($post_id);

$file='sample.jpg';
$photo_details = array(
    'message'=> 'Photo message',
    'source' => '@' . realpath($file)
);

$upload_photo = $facebook->api('/'.$album_uid.'/photos', 'post', $photo_details); 
```

我可以将我的图片上传到 Facebook 相册，但我想在`Photo message`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T12:39:50.713

你的意思是你只需要像这样将链接附加到当前消息吗？

```
 $post_link = get_permalink($post_id);

   $file='sample.jpg';
   $photo_details = array(
   'message'=> 'Photo message - '.$post_link,
   'source' => '@' . realpath($file)
     );
   $upload_photo = $facebook->api('/'.$album_uid.'/photos', 'post', $photo_details); 
```

# c# - 如何避免 .NET 中的死锁

> ID：11815725
> 
> 赞同：2
> 
> 时间：2012-08-05T10:35:51.430
> 
> 标签：c#, multithreading, deadlock, .net

是否有任何常见的做法或规则来避免程序中的死锁？还有来自 CLR 的任何支持或来自语言/框架的任何工具来处理这种情况吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-05T10:51:06.467

请注意，其中很少是特定于 .net 的：

避免死锁的最大方法就是以*一致的顺序锁定*；这意味着您会定期阻塞而不是死锁，但需要对您锁定的内容和时间进行大量思考和计划。当然，这个想法和计划无论如何都是必要的。

实现此目的的一种简单方法是：尝试一次只需要一个锁对象；因此，不是锁定 A**和**B，而是（分别）锁定 A**然后**B。这也需要思考和计划，但通常是可以实现的。

更一般地说，避免过度粒度的锁在这里可能是一个巨大的理智保护者。对于可以竞争的锁对象，请认真考虑对这两个概念仅使用一个锁。在许多情况下，这并不会极大地影响花费在竞争上的时间，但会使代码更简单、更可靠。

实际上，我对该语言的一个抱怨是“获取锁但有超时”*比*“获取锁”更密集代码。确保您始终有超时也可以确保*总*锁定变得可恢复。但这应该主要用于识别*以错误顺序锁定的*区域，以便您可以修复它们。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-05T10:40:05.620

MSDN 实际上有几篇关于这个主题的好文章，其中一篇是：

[使用 C# 和 C++ 避免和检测 .NET 应用程序中的死锁](http://msdn.microsoft.com/en-us/magazine/cc163618.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-05T10:49:43.270

我认为解决问题的最佳方法是使用正常的控制过程。使用互斥锁或信号量保护对资源的访问。

这可能会帮助你

[http://msdn.microsoft.com/en-us/library/hw29w7t1(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/hw29w7t1(v=vs.71).aspx)

# java - 我怎么能在这里整合执行者？或者我该如何改进这个线程池？

> ID：11815733
> 
> 赞同：0
> 
> 时间：2012-08-05T10:36:43.907
> 
> 标签：java, multithreading, concurrency, threadpool, java.util.concurrent

目前，我有一个执行以下操作的构造：
许多`X`线程（`X`作为用户的可配置变量）都已启动并等待任务可用。线程`block`在等待`BlockingQueue`。
另一个线程将任务放入阻塞队列中，被阻塞的线程获取任务和`run`它们并返回到`wait`下一个任务。
无论如何，这很好，但我有以下问题。`X`即使 2 小时内没有任何任务，线程也会不断地等待任务。即使只有 X/50 任务进入（即我有比我实际需要的多得多的线程），线程实际上也是可用的
。`X`
所以我的问题是，我怎样才能重构这个（也许使用`Executors`），以便`X`根据需要上下波动？
我的目标是不失去性能。我的意思是现在我可以拥有比我需要的更多的线程（浪费资源），但我没有创建新线程的开销。
我有兴趣以一种不浪费资源并保持相同性能水平的方式对其进行重构。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T10:42:59.377

普通的[ThreadPoolExecutor](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ThreadPoolExecutor.html)就足够了。基本构造函数接受“核心池大小”（始终保持活动的最小线程数量）、最大大小（最大线程数量）和多余线程的保持活动时间（高于核心池大小的空闲线程）的参数。此外，您可以将 BlockingQueue 直接传递给执行程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T10:41:33.197

**1.**尝试使用`CachedThreadPool`，它**不仅会回收，而且会在需要时创建新线程..**

**2.**最**令人敬畏的特性**是`CachedThreadPool`当**一个线程在 60 秒内不活动时，它会被杀死......所以不会浪费资源。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-05T11:13:41.520

您的用例已经在 ExecutorService.newCachedThreadPoolExecutor 中实现。无论如何，我想继续实施，您可以做各种事情来获得灵活的线程池。

我将列出一种这样的可能性

1.  编写一个主线程，它持有队列并将工作单元（任务）分配给各个线程，它还维护哪些线程正在运行，哪些已返回结果单元以及哪些线程被阻塞。使用此信息，您的主线程可以轻松地进行负载平衡并在需要时创建/销毁线程（从属）。

# objective-c - 调用方法会出错

> ID：11815736
> 
> 赞同：1
> 
> 时间：2012-08-05T10:37:18.287
> 
> 标签：objective-c, methods

我有一个带有两个参数的方法。其中一个是`Object`. 当我想打电话给他们时，它给了我这个错误：

**接收器类型“myView”例如消息未声明带有选择器“findCp::”的方法**

这是我的方法的代码，我减少了

```
-(double)findCp:(double)temp obj:(Component *)Obj{
    return temp;
} 
```

这`Component`是一个`NSObject`Obj 是其对象之一的类。我以这种方式调用我的方法：

```
convertedTemp = [[self findCp:tempreture :Degree]doubleValue]; 
```

在实际代码中，它会对温度进行一些更改并将其返回。我也在 myView.h

```
-(double)findCp:(double)temp obj:(Component *)Obj; 
```

为什么我会收到此错误？我说我的方法错了吗？我对定义有误吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T10:41:51.623

是的，您只是以错误的方式调用该方法。它的签名`findCp:obj:`不是`findCp::`. 您的实际呼叫应该是：

```
convertedTemp = [self findCp:tempreture obj:Degree]; // You're returning a double already 
```

PS。另请注意，Objc 中的 ivar 名称通常以小写字母开头，而 Class 名称则以大写字母命名（按照惯例）。

# mysql - 为什么SELECT 1的多行的COUNT(*)总是1？

> ID：11815737
> 
> 赞同：4
> 
> 时间：2012-08-05T10:37:43.947
> 
> 标签：mysql, sql

```
SELECT COUNT(*) FROM (

SELECT 1 FROM ... 
UNION SELECT 1 FROM ...
UNION SELECT 1 FROM ...

) as tmp_table 
```

尽管结果集包括多行，但`COUNT(*)`总是返回 1... 为什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-05T10:39:29.610

`UNION SELECT`自动对结果进行分组，这意味着您不会看到重复的行。你需要的是`UNION ALL SELECT...`，那么你的结果将不会被分组，你会看到重复的行。

重复行的意思，因为你总是选择1，所以它按1分组。

# javascript - 延迟删除 Jquery 中的类

> ID：11815738
> 
> 赞同：19
> 
> 时间：2012-08-05T10:37:51.090
> 
> 标签：javascript, jquery, css

> **可能重复：**
> [Jquery 延迟执行脚本](https://stackoverflow.com/questions/11774357/jquery-delay-execution-of-script)

我正在编写一个小脚本，当页面加载时，将 CSS 子类分配给三个元素。800 毫秒后，我希望它删除该子类。

我认为这段代码可能会做到这一点：

```
<script type="text/javascript">
$(document).ready(function () {

        $("#rowone.one").addClass("pageLoad");
        $("#rowtwo.three").addClass("pageLoad");
        $("#rowthree.two").addClass("pageLoad");

        .delay(800);    
        $("#rowone.one").removeClass("pageLoad");
        $("#rowtwo.three").removeClass("pageLoad");
        $("#rowthree.two").removeClass("pageLoad");

})
</script> 
```

可悲的是它没有，任何帮助将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-08-05T10:40:39.570

您可以使用**[`setTimeout()`](https://developer.mozilla.org/en-US/docs/DOM/window.setTimeout)**功能：

> 在指定延迟后调用函数或执行代码片段。

```
$(document).ready(function () {
   var $rows = $("#rowone.one, #rowtwo.three, #rowthree.two").addClass("pageLoad");

   setTimeout(function() {
       $rows.removeClass("pageLoad");
   }, 800);
}); 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-08-05T10:48:24.713

试试这个：我也不确定为什么上面没有人使用链式表达式可能是我错过了一些东西

`.delay()`仅设计用于动画。您将不得不使用常规的 setTimeouts 来完成您正在做的事情：

希望它适合你的需要`:)`

**代码**

```
 $("#rowone.one, #rowtwo.three, #rowthree.two").addClass("pageLoad");

 setTimeout(function () {      
         $("#rowone.one, #rowtwo.three, #rowthree.two").removeClass("pageLoad");         
}, 800); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-05T10:41:22.327

用于`setTimeout`此。

```
setTimeout(function() {
 $("#rowone.one").removeClass("pageLoad");
 $("#rowtwo.three").removeClass("pageLoad");
 $("#rowthree.two").removeClass("pageLoad");
}, 800); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-05T10:51:09.277

将其包装在一个函数中并传递状态，如下所示：

```
$(document).ready(function () {
    doClasses('add');
    setTimeout(function() { doClasses('remove'); }, 800)

    function doClasses(state) {
        $("#rowone.one, #rowtwo.three, #rowthree.two")[state+'Class']("pageLoad");
    }
}); 
```

[**小提琴**](http://jsfiddle.net/hPbT2/1/)

现在它很容易调用，也更容易放入 timeOut，而且您无需重复代码。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-05T11:00:44.540

我删除了：`.one .three . two`类选择器并添加了超时功能。应该管用。

 `````
<head>
<style type="text/css">
.pageLoad{color:red;}
</style>

<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
</head>

<body>
<div id="rowone">rowone</div>
<div id="rowtwo">rowtwo</div>
<div id="rowthree">rowthree</div>

<script type="text/javascript">
$(document).ready(function () {

        $("#rowone").addClass("pageLoad");
        $("#rowtwo").addClass("pageLoad");
        $("#rowthree").addClass("pageLoad");

})

 function removeC(){
$("#rowone").removeClass("pageLoad");
        $("#rowtwo").removeClass("pageLoad");
        $("#rowthree").removeClass("pageLoad");
}

setInterval(removeC, 5000);

</script>
</body> 
`````

# html - 是否有任何类似于 LinkedIn Engineering 发布的案例研究？

> ID：11815740
> 
> 赞同：3
> 
> 时间：2012-08-05T10:37:55.353
> 
> 标签：html, mobile, hybrid

LinkedIN Engineering 发布了一系列关于他们在为 iPad 开发混合移动应用程序时的经验和发现的出色案例研究：-

[http://engineering.linkedin.com/mobile/linkedin-ipad-nativeweb-messaging-bridge-and-websockets](http://engineering.linkedin.com/mobile/linkedin-ipad-nativeweb-messaging-bridge-and-websockets)

这些文章使移动 Web 或混合应用程序开发人员能够深入了解此类应用程序的现实问题和设计选项。我正在寻找更多来自企业移动应用程序开发团队的此类案例研究。欢迎任何指点。（有来自特定框架供应商的案例研究，但这些自然集中在他们自己专有解决方案的优势。此外，来自 HTML5Rocks.com 或 GoogleIO 的文章一般不讨论现实世界的应用程序）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T12:54:20.630

好吧，您可以查看[Evernote 技术博客](http://blog.evernote.com/tech/page/2/)，他们在其中讨论所有技术内容以及他们如何做大部分事情。你可以找到 Evernote 应用程序的架构以及类似的东西。它没有LinkedIn那么好，但它仍然很有用，因为他们分享了他们在开发过程中遇到的所有问题并为他们提供了解决方案。

希望我的回答会有所帮助！

# ios - 点击通知按钮后执行转换

> ID：11815741
> 
> 赞同：0
> 
> 时间：2012-08-05T10:38:02.427
> 
> 标签：ios, xcode, push-notification, appdelegate

如果应用程序处于活动状态，我必须遵循代码来显示通知。我把它放在 AppDelegate.m

我想要做的是在用户点击第二个按钮时执行到视图控制器的转换（或转场）。我如何从 AppDelegate 执行此操作？

我想我需要将navigationcontroller 设置为appdelegate .. 但我无法做到这一点。

谢谢

```
- (void)application:(UIApplication *)application didReceiveRemoteNotification:(NSDictionary *)userInfo {
    UIApplicationState state = [application applicationState];
    if (state == UIApplicationStateActive) {
        NSString *cancelTitle = @"Close";
        NSString *showTitle = @"Show";
        //NSString *message = [[userInfo valueForKey:@"aps"] valueForKey:@"alert"];
        UIAlertView *alertView = [[UIAlertView alloc] initWithTitle:@"Social Dilemma"
                                                            message:@"Next round is ready to play!"
                                                           delegate:self
                                                  cancelButtonTitle:cancelTitle
                                                  otherButtonTitles:showTitle, nil];
        [alertView show];
    }
}

-(void) alertView: ( UIAlertView *) alertView
clickedButtonAtIndex: ( NSInteger ) buttonIndex {
    if (alertView.tag == 1)
    {
        //check the button index
        //create and display the other alert view (set the tag property here to 2)
    }
    else if (alertView.tag == 2)
    {

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T11:00:56.380

作为一个选项，您可以使用 uinavigationcontroller，这取决于您的应用程序有多少视图控制器。以简单的方式，您可以尝试将当前模态视图控制器调用到应用程序的根控制器： 1）添加到项目自定义 UIViewController（.h，.m，.xib）（示例名称：MyViewController）

2)

```
-(void) alertView: ( UIAlertView *) alertView
    clickedButtonAtIndex: ( NSInteger ) buttonIndex {
    if (alertView.tag == 1)
    {
       //check the button index
       //create and display the other alert view (set the tag property here to 2)
       MyViewController *first = [[MyViewController alloc] initWithNibName:@"MyViewController" bundle:nil];
       [self.window.rootViewController presentModalViewController:first animated:YES];
        [first release];
    }
    else if (alertView.tag == 2)
   {
         MyViewController *second = [[MyViewController alloc] initWithNibName:@"MyViewController" bundle:nil];
       [self.window.rootViewController presentModalViewController:second animated:YES];
        [second release];
   }
 } 
```

对于使用 uinavigation 控制器，在应用程序中 didFinishLaunchingWithOptions: 您可以以编程方式创建导航控制器，将其分配给根控制器并在警报视图的方法调用

```
[self.window.rootViewController pushViewController:second (first) animated:YES]; 
```

# zend-form - Zend Form ViewScript 如何显示错误信息

> ID：11815745
> 
> 赞同：1
> 
> 时间：2012-08-05T10:39:32.990
> 
> 标签：zend-form, zend-view, zend-decorators

经过几天试图让这个工作，我转向你。我正在使用 ViewScript 装饰器呈现自定义表单，但无法显示错误消息。我尝试了许多不同的解决方案，但 getErrorMessages() 始终为空。

**这是我的登录表单：**

```
 public function init() {
    $this->setDecorators(array('Errors', array('ViewScript', array('viewScript' => '_forms/_login.phtml') ) ) );

    $this->setName('loginform');$username = new Zend_Form_Element_Text('username');
    $username->setAttrib('size', '35');
    $username->setRequired(true);
    $username->addValidator('NotEmpty');
    $username->setDecorators( array('ViewHelper',  'Errors') );

    $password = new Zend_Form_Element_Password('password');
    $password->setRequired(true);
    $password->addValidator('NotEmpty');
    $password->setDecorators( array('ViewHelper',  'Errors') );

    $submit = new Zend_Form_Element_Button('submit');
    $submit->setAttrib('type', 'submit');
    $submit->setDecorators( array('ViewHelper',  'Errors') );

    $this->setMethod('post'); 
    $this->setAction('/auth/index');

    $this->addElements(array($username, $password, $submit));
}
} 
```

**这是我的观点：**

```
<form action="<?php echo $this->element->getAction() ?>" name="<?php echo $this->element->getName() ?>"  method="<?php echo $this->element->getMethod() ?>" id="login-form">
<ul class="nav">
<li><?php echo $this->element->username; ?></li>
<li><?php echo $this->element->password; ?></li>
<li><?php echo $this->element->submit; ?></li>
</ul> 
```

**这是我的处理动作：**

```
 public function indexAction()
{
    $request = $this->getRequest();
    $form = new Form_LoginForm();
    if ($request->isPost()){
        if($form->isValid( $this->_request->getPost() )) {  //This part works

        }
        else {

        }       
    }
} 
```

尝试了[此处](https://stackoverflow.com/questions/3454401/display-zend-form-form-errors-in-viewscript)看到的示例，但没有成功。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T22:43:58.600

试试这个，你可以把错误信息放在你想打印的任何地方。

```
<li><?php echo $this->element->username .
 $this->formErrors($this->element->username->getMessages() ); ?></li> 
<li><?php echo $this->element->password. 
$this->formErrors($this->element->password->getMessages() ); ?></li> 
<li><?php echo $this->element->submit; ?></li> 
```

# batch-file - 如何使用批处理重新调整多个 CMD 窗口的大小？

> ID：11815749
> 
> 赞同：1
> 
> 时间：2012-08-05T10:40:21.457
> 
> 标签：batch-file

我需要为我的 Erlang 工作打开 6 个 cmd 窗口。但是..我需要调整/移动它们。

以下是将打开的 6 个窗口：

```
start /d "C:\Users\**\Desktop\Erlang WorkingSpace\bin" erl.exe -setcookie talk -name server@127.0.0.1 
start /d "C:\Users\**\Desktop\Erlang WorkingSpace\bin" erl.exe -setcookie talk -name users@127.0.0.1
start /d "C:\Users\**\Desktop\Erlang WorkingSpace\bin" erl.exe -setcookie talk -name db3@127.0.0.1
start /d "C:\Users\**\Desktop\Erlang WorkingSpace\bin" erl.exe -setcookie talk -name db2@127.0.0.1
start /d "C:\Users\**\Desktop\Erlang WorkingSpace\bin" erl.exe -setcookie talk -name db1@127.0.0.1 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T10:44:56.550

您可以使用以下命令调整当前命令行窗口的大小`mode`：

```
mode 140,50 
```

将为您提供 140 列和 50 行。

但是，您不能从另一个命令行窗口执行此操作。如果您需要一定的大小，则需要在运行 exe 之前将 .exe 调用放入批处理文件并从批处理文件中调用模式。

# python - int 对象是无法编写脚本的 Python

> ID：11815754
> 
> 赞同：3
> 
> 时间：2012-08-05T10:41:13.693
> 
> 标签：python, list, error-handling

我正在尝试制作战舰进行练习，单人游戏取得了成功……当时只有一个玩家，一组船和一个棋盘：P

知道为什么这会给我一个“int object is unscriptable”错误吗？？？

这是董事会课程。好吧，无论如何，其中一些：

```
class Board:
    'Game Board'
    topMarkers = list('ABCDEFGHIJKLMNOPQRSTUVWXYZ')
    sideMarkers = list(range(0, 26))

    def __init__(self,h,w): #Makes the map
        self.height = h
        self.width = w

        self.xMarkers = []
        self.yMarkers = []
        self.hitList = []
        self.hitListCopy = []

        self.boardSpace = '         '

        wave = '~'
        self.row = []
        self.column = []
        #self.column = wave * self.width # If width is 4, column is now '~~~~'

        for c in range(self.width):
            self.column.append(wave)
            self.xMarkers.append(Board.topMarkers[c])

        for r in range(self.height): #
            self.row.append(self.column[:]) #Use the slice to make copies
            self.yMarkers.append(Board.sideMarkers[r])

    def showGrid(self):
        print self.boardSpace + '  ' +  ' '.join(self.xMarkers)
        for i in range(self.height):
            print self.boardSpace + str(self.yMarkers[i]) + ' ' + '-'.join(self.row[i]) 
```

这是实际运行它的代码，导致它的代码部分位于底部的 while 和 for 循环中，它在注释中显示您的地图的网格。

```
p1 = [[Board(7,7), Board(7,7)], Move(), Connection(1, netEnable)]
p2 = [[Board(7,7), Board(7,7)], Move(), Connection(2, netEnable)]
#p3 = [[Board(7,7), Board(7,7)], Move(), Connection(3, netEnable)]

#Like this p1 = [[theirBoard, attackBoard], Moves, Connection]

#p = [p1,p2,p3]
p = [p1,p2]

ships = [Ship(0),Ship(0),Ship(0)]
ships2 = [Ship(0),Ship(0),Ship(0)]

numOfPlayers = len(p)

youPlayer = int(raw_input('Which player are you? 1,2,3:   '))

youPlayer -= 1

boardr = p[youPlayer][0][1].getRowData()
boardM = p[youPlayer][0][0].getMarkerData()
#raw_input(boardr)
raw_input(boardM)

#Set Ships Dialog.
for i in range(len(ships)):
    p[youPlayer][0][1].showGrid() 
    ships[i].setShip(boardr, boardM)

shipPosAll = [[],[],[]]    

for i in range(len(ships)):
    shipPosAll[youPlayer].append(ships[i].getShip()) #USE THIS INFO TO FEED TO THE BOARD TO TELL IT WHERE SHIPS ARE SO YOU KNOW WHERE HITS ARE.

print 'shipPos at line 382 : %s' % (shipPosAll[youPlayer])

#INIT, DO ONLY ONCE

for i in range(numOfPlayers): 
    print p[i][2].GetTime()

#MAIN LOOP
while gameNotOver:

    for i in range(numOfPlayers):
        playersCheck = [0,1]
        del playersCheck[youPlayer]

        print 'Player %s turn' % (i)
        print 'Here are your ships'
        #raw_input (p[i][0][1])
        p[i][0][1].showGrid() #Show the grid of the player (TheirShips) HERES WHERE THE PROBLEM IS!!!!

        print 'Where do you want to attack?'
        p[i][0][0].showGrid() #Show the grid of the player (AttackShips)

        hits = p[i][0][0].getHitList()
        alreadyMade = False
        while alreadyMade == False:
            coords = p[i][0][0].chooseMove()
            alreadyMade = p[i][1].addMove(coords) #Returns true if move accepted, otherwise false

        lastMove = p[i][1].getMove()
        print 'The move you made was %s' % (lastMove)
        p[i][2].Send(lastMove)
        changeCoords = p[i][2].Check()
        p[i][0][0].changeRow('B')

        for p in playersCheck: #Check every player who is not you. You were deleted at teh beginning.
            checkForSunk(shipPosAll[p], hits)
            print 'Current Attacked Players shipPos: %s' % (shipPosAll[p])
        #p1Site.Send(coords)
        #print 'Thing %s' % (shipPos[i])
            if isGameOver(shipPosAll[p]): #PROBLEM.
                gameNotOver = False
                break

    for i in range(numOfPlayers):
        print p[i][1].getAllMoves()

print 'All Ships Sunk. The End. Wat more you want from mme its 3:48am' 
```

谢谢

这是我得到的确切信息。

> Traceback (last recent call last): File "name/battleship_wClasses.py", line 431, in p[i][0][1].showGrid() #Show the player of the player (TheirShips) TypeError: 'int'对象不可订阅 –</p>

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-05T10:53:57.913

您有两个（重叠）矛盾的定义`p`：

```
p = [p1,p2] 
```

和

```
 playersCheck = [0,1]
    for p in playersCheck: 
```

`p[i][0][1].showGrid()` works with the first definition, but fails when `p` is assigned an integer value from the second definition.

# php - 如何将数据发布到页面并导航到php中的另一个页面

> ID：11815760
> 
> 赞同：-3
> 
> 时间：2012-08-05T10:41:54.390
> 
> 标签：php

我将数据发布到一个页面，然后我想同时导航到另一个页面。我正在使用 javascript 发布数据，我检查了它是否回显了它的值，当我只发送发布数据时它工作正常，但是当我重定向到另一个页面并尝试访问这些发布数据时，它似乎没有设置. 顺便说一句，我写的是这样的javascript

```
function getsupport ( selectedtype ) 
```

{ document.folderCreation.supporttype.value = selectedtype ; document.folderCreation.submit() ; document.location.href="../../index.php";

}

并采用以下形式：

```
<form action="index.php" name="folderCreation" method="POST" >
      <input type="hidden" name="supporttype" /><?php
 while($row = mysql_fetch_array($rs)) 
  {
      $filePath=$row['pathFromImages']; 
      $id=$row['id'];
      ?>

      <a href="javascript:getsupport('<?php  echo $filePath;?>')" ><?php echo $filePath;?></a>
      </br>

<?php 
```

当行 :document.location.href="../../index.php"; 时，此表单值正确发布 不在这里。为什么这不起作用？...

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T10:49:23.380

这段代码应该可以工作：

```
<form action="page2.php" method="POST">
<input type="text" name="a" onsubmit="postdata($(this)); return true;" />
<input type="submit" />
</form> 
```

javascript函数：

```
function postdata(x){ $.post('page1.php', {a: x.a.val()}); } 
```

# python - 示例 FB 应用程序中的 self.user.user_id 抛出错误

> ID：11815765
> 
> 赞同：1
> 
> 时间：2012-08-05T10:43:03.320
> 
> 标签：python, facebook-apps

[我的 FB 应用程序代码在 Facebook 2012 年 10 月的重大更改](https://developers.facebook.com/roadmap/)后发生故障，并通过以下建议修复：[使用与朋友一起运行的图片属性格式 fb 应用程序](https://stackoverflow.com/questions/11810397/picture-property-format-using-run-with-friends-fb-app)

但有趣的是，在修复它之后，我在相同的代码中遇到了另一个问题（我认为之前不存在）我已经搜索了[Breaking Changes](https://developers.facebook.com/roadmap/)，但这个问题似乎也没有在那里讨论过。它抱怨 user_id 不是 self.user 在这一行的属性：`u'userIdOnServer': self.user.user_id if self.user else None`。我已经搜索了论坛等，但找不到线索。

这是错误：

C:\Program Files\Google\google_appengine\google\appengine\ext\webapp\util.py 在 run_bare_wsgi_app(application=)

```
 114   env["wsgi.multithread"] = False
    115   env["wsgi.multiprocess"] = False
=>  116   result = application(env, _start_response)
    117   if result is not None:
    118     for data in result:

result undefined, application = <google.appengine.ext.webapp._webapp25.WSGIApplication object>, env = {'APPENGINE_RUNTIME': 'python', 'APPLICATION_ID': 'dev~app', 'AUTH_DOMAIN': 'gmail.com', 'CONTENT_LENGTH': '-1', 'CONTENT_TYPE': 'application/x-www-form-urlencoded', 'CURRENT_VERSION_ID': '1.1', 'GATEWAY_INTERFACE': 'CGI/1.1', 'HTTP_ACCEPT': 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8', 'HTTP_ACCEPT_CHARSET': 'ISO-8859-1,utf-8;q=0.7,*;q=0.3', 'HTTP_ACCEPT_LANGUAGE': 'en-US,en;q=0.8', ...}, global _start_response = <function _start_response>
 C:\Program Files\Google\google_appengine\google\appengine\ext\webapp\_webapp25.py in __call__(self=<google.appengine.ext.webapp._webapp25.WSGIApplication object>, environ={'APPENGINE_RUNTIME': 'python', 'APPLICATION_ID': 'dev~app', 'AUTH_DOMAIN': 'gmail.com', 'CONTENT_LENGTH': '-1', 'CONTENT_TYPE': 'application/x-www-form-urlencoded', 'CURRENT_VERSION_ID': '1.1', 'GATEWAY_INTERFACE': 'CGI/1.1', 'HTTP_ACCEPT': 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8', 'HTTP_ACCEPT_CHARSET': 'ISO-8859-1,utf-8;q=0.7,*;q=0.3', 'HTTP_ACCEPT_LANGUAGE': 'en-US,en;q=0.8', ...}, start_response=<function _start_response>)

    715           handler.error(501)
    716       except Exception, e:
=>  717         handler.handle_exception(e, self.__debug)
    718     else:
    719       response.set_status(404)

handler = <__main__.RecentRunsHandler object>, handler.handle_exception = <bound method RecentRunsHandler.handle_exception of <__main__.RecentRunsHandler object>>, e = AttributeError("**'dict' object has no attribute 'friends'",)**, self = <google.appengine.ext.webapp._webapp25.WSGIApplication object>, self.__debug undefined
 C:\Program Files\Apache Software Foundation\Tomcat 7.0\webapps\ROOT\app\main.py in handle_exception(self=<__main__.RecentRunsHandler object>, ex=AttributeError("'dict' object has no attribute 'friends'",), debug_mode=True)
    228         self.log_exception(ex)
    229         self.render(u'error',
=>  230             trace=traceback.format_exc(), debug_mode=debug_mode)
    231 
    232     def log_exception(self, ex):

trace undefined, global traceback = <module 'traceback' from 'C:\Python27\lib\traceback.pyc'>, traceback.format_exc = <function format_exc>, debug_mode = True
 C:\Program Files\Apache Software Foundation\Tomcat 7.0\webapps\ROOT\app\main.py in render(self=<__main__.RecentRunsHandler object>, name=u'error', **data={'debug_mode': True, 'trace': 'Traceback (most recent call last):\n File "C:\\Pr...eError: \'dict\' object has no attribute \'friends\'\n'})
    265             u'appId': conf.FACEBOOK_APP_ID,
    266             u'canvasName': conf.FACEBOOK_CANVAS_NAME,
=>  267             u'userIdOnServer': self.user.user_id if self.user else None,
    268         })
    269         data[u'logged_in_user'] = self.user

self = <__main__.RecentRunsHandler object>, self.user = {u'id': u'100003906996287', u'name': u'Sudhir Jain'}, self.user.user_id undefined, builtin None = None
**<type 'exceptions.AttributeError'>: 'dict' object has no attribute 'user_id' 
      args = ("'dict' object has no attribute 'user_id'",) 
      message = "'dict' object has no attribute 'user_id'"** 
```

**这是渲染代码（我正在构建 runwithfriends 示例应用程序）：**

```
def render(self, name, **data):
    """Render a template"""
    if not data:
        data = {}
    data[u'js_conf'] = json.dumps({
        u'appId': conf.FACEBOOK_APP_ID,
        u'canvasName': conf.FACEBOOK_CANVAS_NAME,
        u'userIdOnServer': self.user.user_id if self.user else None,
    })
    data[u'logged_in_user'] = self.user
    data[u'message'] = self.get_message()
    data[u'csrf_token'] = self.csrf_token
    data[u'canvas_name'] = conf.FACEBOOK_CANVAS_NAME
    self.response.out.write(template.render(
        os.path.join(
            os.path.dirname(__file__), 'templates', name + '.html'),
        data)) 
```

抱歉，如果我错过了提供任何信息，但我很乐意提供您建议的其他信息/错误日志。提前致谢。

# javascript - 无法将内联 css 分配给 javascript 元素

> ID：11815766
> 
> 赞同：0
> 
> 时间：2012-08-05T10:43:14.567
> 
> 标签：javascript, html, css

我正在构建一个将 div 注入站点的代码。问题是我无法通过 javascript 分配 css 值，因为它们似乎没有发生在文档上（不是全部）。

这是代码：

```
var barRoot = document.createElement('DIV'); 
barRoot.style.backgroundColor='#44AA44';
barRoot.style['height']='30px';
barRoot.style['width']='100%';
barRoot.style['position']='absolute';
barRoot.style['font-size']='14px';
barRoot.style['font-family']='Arial, Helvetica, sans-serif';
barRoot.style['z-index']='99999001';
barRoot.style['font-weight']='bold';
barRoot.style['top']='0pt';
barRoot.style['left']='0pt';
barRoot.style['color']='White';
barRoot.style['padding']='0pt';
barRoot.style['margin']='0pt';
barRoot.style['border']='0px solid rgb(0, 0, 0)';
barRoot.id =  'irobRootElem1';  
document.body.insertBefore(barRoot, document.body.firstChild);  

var heartImg = document.createElement('IMG');   
heartImg.src = 'heart.png';  
heartImg.style['float']='left';  
heartImg.style['margin-left']='8px';  
heartImg.style['margin-top']='5px';  
heartImg.style['margin-right']='8px';  
barRoot.appendChild(heartImg); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T13:50:05.457

如果您想通过 JavaScript 分配样式，属性名称与您的 CSS 文件中的名称不完全相同。

在 w3c 文档中查看[此列表](http://www.w3.org/TR/2000/REC-DOM-Level-2-Style-20001113/css.html#CSS-CSS2Properties)

但正如所建议的，使用**类比**以编程方式设置样式**更容易使用。**

这是从上面的 w3 链接中提取的列表：

> # 文档对象模型 (DOM) 2 级样式规范
> 
> ## 1.0 版
> 
> ## W3C 建议 2000 年 11 月 13 日

```
azimuth
background
backgroundAttachment
backgroundColor
backgroundImage
backgroundPosition
backgroundRepeat
border
borderCollapse
borderColor
borderSpacing
borderStyle
borderTop
borderRight
borderBottom
borderLeft
borderTopColor
borderRightColor
borderBottomColor
borderLeftColor
borderTopStyle
borderRightStyle
borderBottomStyle
borderLeftStyle
borderTopWidth
borderRightWidth
borderBottomWidth
borderLeftWidth
borderWidth
bottom
captionSide
clear
clip
color
content
counterIncrement
counterReset
cue
cueAfter
cueBefore
cursor
direction
display
elevation
emptyCells
cssFloat
font
fontFamily
fontSize
fontSizeAdjust
fontStretch
fontStyle
fontVariant
fontWeight
height
left
letterSpacing
lineHeight
listStyle
listStyleImage
listStylePosition
listStyleType
margin
marginTop
marginRight
marginBottom
marginLeft
markerOffset
marks
maxHeight
maxWidth
minHeight
minWidth
orphans
outline
outlineColor
outlineStyle
outlineWidth
overflow
padding
paddingTop
paddingRight
paddingBottom
paddingLeft
page
pageBreakAfter
pageBreakBefore
pageBreakInside
pause
pauseAfter
pauseBefore
pitch
pitchRange
playDuring
position
quotes
richness
right
size
speak
speakHeader
speakNumeral
speakPunctuation
speechRate
stress
tableLayout
textAlign
textDecoration
textIndent
textShadow
textTransform
top
unicodeBidi
verticalAlign
visibility
voiceFamily
volume
whiteSpace
widows
width
wordSpacing
zIndex 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T13:53:03.973

我会添加一个样式标签。使用[setAttribute](http://reference.sitepoint.com/javascript/Element/setAttribute)设置内联样式。

# objective-c - 从 viewController 使用 xib 创建视图

> ID：11815768
> 
> 赞同：0
> 
> 时间：2012-08-05T10:43:33.803
> 
> 标签：objective-c, ios4, uiview

我想创建一个具有 xib 的视图。

但是我不想单独创建xib文件，而是从ViewController开始，然后将其转换为UIView。

（无法在 xcode 上使用 xib 创建视图控制器： ![在此处输入图像描述](../Images/783b5dd313746cc3730898177bd9da33.png)

)

除了让类继承自 UIView 而不是 UIViewController 之外，我还需要做什么？

*   提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T11:16:04.607

您可以创建 ViewController 文件，然后通过 IB 创建 View (xib)，最后将这些东西连接起来，如下图所示：

![ss](../Images/2224c2b6572c6eecaf1ef4ff0098744c.png)

# php - 调用静态方法时出现致命错误

> ID：11815769
> 
> 赞同：3
> 
> 时间：2012-08-05T10:43:39.007
> 
> 标签：php, class, codeigniter, static-methods, fatal-error

所以，这是我的情况：

*   我正在使用 CodeIgniter
*   我已经设置了一个助手，（'DK'文件夹下的'string_helper'）
*   我已经在 dk/string_helper.php 中设置了 dkString 类

    ```
    static function strInArray($str,$arr)
    {
          foreach ($arr as $item) 
          {
                if (self::inString($str,$item))
                      return true;
          }

          return false;
    } 
    ```

*   在我的控制器中：
    *   我正在加载助手 ( `$this->load->helper('dk/string');`)
    *   调用方法 ( `dkString::strInArray($str,$arr);`)

* * *

**笔记 ：**

*   我已经加载了驻留在自定义助手中的类的静态方法，比如 100 次。所以这没有什么问题。
*   函数是否声明为无关紧要`static`。通常它可以正常工作，无论如何。

但是，我不断收到以下错误：

> 致命错误：在第 XX 行的 /the/path/to/the/caller/file.php 中调用未定义的方法 dkString::strInArray()

有什么想法可能是错的吗？

* * *

```
<?php

/*
 * DK4PHP Library
 *
 * Copyright (c) 2010-2012 by Dr.Kameleon
 *
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU Lesser General Public License as published
 * by the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU Lesser General Public License
 * along with this program.  If not, see <http://www.gnu.org/licenses/>.
 *
 */

if (!class_exists('dkString'))
{
    class dkString
    {
    /**
     * Return number of character in string
     * 
     * @param type $str
     * @return type 
     */

    function characterCount($str)
    {
        return strlen($str); 
    }

    /**
     * Check if str begins with...
     * @param type $str
     * @param type $sub
     * @return type 
     */

    function beginsWith($str, $sub)
    {
        return (substr($str,0,strlen($sub)) == $sub);
    }

    /**
     * Check if str ends with...
     * 
     * @param type $str
     * @param type $sub
     * @return type 
     */

    function endsWith($str, $sub)
    {
        return (substr($str,strlen($str)-strlen($sub)) == $sub);
    }

    /**
     * Check if str contains substring
     * 
     * @param type $sub
     * @param type $str
     * @param type $casesensitive
     * @return type 
     */

    function inString($sub, $str, $casesensitive = false)
    {
        if ($casesensitive)
        return (strstr($str, $sub) == false) ? false : true;
        else
        return (stristr($str, $sub) == false) ? false : true;
    }

    /**
     * Count number of occurences of substring in string
     * 
     * @param type $sub
     * @param type $str
     * @return type 
     */

    function inStringCount($sub, $str) 
    {
        return substr_count($str, $sub);
    }

    /**
     * Convert string to number
     * 
     * @param type $str
     * @param type $check
     * @param type $magic
     * @return type 
     */

    function strtonum($str, $check, $magic)
    {
        $int32Unit = 4294967296;

        $length = strlen($str);
        for ($i = 0; $i < $length; $i++)
        {
        $check *= $magic;
        if ($check >= $int32Unit)
        {
            $check = ($check - $int32Unit * (int) ($check / $int32Unit));

            $check = ($check < -2147483648) ? ($check + $int32Unit) : $check;
        }
        $check += ord($str{$i});
        }
        return $check;
    }

    /**
     * Get index of str in array (check if is contained)
     * 
     * @param type $str
     * @param type $arr 
     */

    function indexInArray($str,$arr)
    {
        foreach ($arr as $index=>$item)
        {
        if (stristr($item,$str))
        {
            return ($index+1);
            break;
        }
        }
        return -1;
    }

    /**
     * Check if str is contained in any of array's elements
     * 
     * @param type $str
     * @param type $arr
     * @return boolean 
     */

    function strInArray($str,$arr)
    {

        foreach ($arr as $item) 
        {
            if (self::inString($str,$item))
                return true;

        }

        return false;
    }
    }
}
?> 
```

**更新**：

在我的控制器中，加载助手（`$this->load->helper('dk/string');`）后，我尝试了：

```
if (class_exists('dkString')) { echo "IT EXISTS<br/>Methods : "; print_r(get_class_methods('dkString')); }
else echo "IT DOESN'T EXIST"; 
```

“有趣”的事情是输出是：

```
IT EXISTS
Methods : Array ( 
[0] => characterCount 
[1] => beginsWith 
[2] => endsWith 
[3] => inString 
[4] => inStringCount 
[5] => strtonum 
[6] => indexInArray ) 
```

简而言之：该类已加载，并且它“看到”了所有方法（最后一个方法除外）。天哪……：/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T10:45:36.237

尝试制作**“公共”**功能。

```
public static function strInArray($str,$arr) {
    foreach ($arr as $item) {
        if (self::inString($str,$item))
            return true;
    }

    return false;
} 
```

**编辑：**您的口译员可能找不到课程。然后他找不到静态方法。也许您可以使用**class_exists**检查该类是否存在并已加载。

**Edit2：** 您必须将您的功能声明为静态功能。否则，您不能使用静态运算符 (::) 调用该函数。

[http://php.net/manual/de/language.oop5.static.php](http://php.net/manual/de/language.oop5.static.php)

所以没有人在聊天......但错误信息真的很清楚。您尝试调用静态函数，但该函数不是静态函数，因此您会得到最重要的消息。

否则将它们作为函数调用

```
$dkString = new dkString;
$res = $dfString->strInArray(); 
```

**[当您使用像in_array](http://php.net/manual/de/function.in-array.php)**这样的内部函数在数组中查找字符串时，可能会更容易。

# mysql - 我无法在插入触发器后添加 MySQL

> ID：11815771
> 
> 赞同：0
> 
> 时间：2012-08-05T10:44:19.023
> 
> 标签：mysql, triggers

我有一些触发器：

```
DELIMITER $$ 
CREATE
    TRIGGER `auto_user_auth` AFTER INSERT
    ON `tbl_user`
        FOR EACH ROW BEGIN
            INSERT INTO authassignment(itemname, userid) VALUES ('Customer', NEW.id);
        END$$

DELIMITER ; 
```

在 PhpMyAdmin 中查询没有错误，但在查询之后：

```
DROP TRIGGER `auto_user_auth` 
```

我越来越：

> # 1360 - 触发器不存在

没有`DELIMETER ;`我得到：

```
#1064 - You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '' at line 6 
```

我做错了什么？感谢帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-18T09:08:24.357

请尝试使用数据库名称，例如 -

```
DROP TRIGGER database_name.auto_user_auth; 
```

或者

**将&&**符号写入Delimiter 输入框

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-18T09:32:12.543

尝试这个：

```
DELIMITER $$ 
CREATE TRIGGER `auto_user_auth` AFTER INSERT ON `tbl_user` FOR EACH ROW BEGIN
        INSERT INTO authassignment(itemname, userid) VALUES ('Customer', NEW.id);
END;
$$

DELIMITER ; 
```

# php - preg_replace 替换动态图片 URL

> ID：11815775
> 
> 赞同：2
> 
> 时间：2012-08-05T10:44:43.703
> 
> 标签：php, regex, proxy, preg-replace

我正在尝试替换不断变化的图像 URL。

图片网址：`src="/images/previews/logo-15-hp.jpg"`. 在此 URL 中，logo-15-hp.jpg 每天都会更改为其他内容。我想要做的是将此 URL 替换为这样的默认 URL `src="http://mywebsite.com/images/previews/default.jpg"`：.

我尝试使用 preg_replace 执行此操作，但无法使其正常工作。我尝试了不同的变化，最后放弃了。如果有人可以帮助我，我会很高兴。

我的代码：

```
$content = 
preg_replace('src="/images/previews/logo\-15\-hp\.jpg"','src="http://mywebsite.com/default.gif"',$content); 
```

我也试过这个：

```
preg_replace('src\=\"\/images\/previews\/logo\-15\-hp\.jpg\"','src="http://mywebsite.com/default.gif"',$content); 
```

另请解释您建议的任何代码。将来会对我有所帮助。

谢谢！

编辑：我正在尝试自动检测 URL 并进行更改，但我什至无法使用 preg_replace 中的完整 URL 来做到这一点。例如我需要这样的代码：

$content = preg_replace('src="/images/previews/logos** ***这部分不断变化，所以我需要 preg_replace 而不是 str_replace***** .jpg"','src="http://mywebsite.com/ default.gif"',$content);

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T10:46:16.050

这是您需要做的

```
$content = preg_replace(
    '#src="/images/previews/logos[^"]+#',
    'src="http://mywebsite.com/default.gif"',
    $content
); 
```

这将替换 '/logos' 之后的任何内容，直到找到双引号。

编辑：每个更新问题的更新响应...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-29T11:55:17.973

它肯定会帮助你。我已经测试然后发布它。请看附上的代码：

```
$content = 'hello this is content<img  src="/images/previews/logo-15-hp.jpg" height="50"
width="50" alt="image" />content after image';
$pattern = '/\/images\/previews\/logo\-15\-hp\.jpg/';
$replacement = 'http://mywebsite.com/images/previews/default.jpg';
$final_content = preg_replace($pattern, $replacement, $content);
echo $final_content; 
```

# php - php内存限制不能修改

> ID：11815781
> 
> 赞同：1
> 
> 时间：2012-08-05T10:45:32.960
> 
> 标签：php, mysql, memory

我有一个从数据库加载数据的 php 脚本。我从中加载数据的表是 50mb 大，当前的 php 内存设置允许 128mb - 我仍然收到错误消息

```
Allowed memory size of 134217728 bytes exhausted (tried to allocate 6 bytes) 
```

一些研究使我改变了 php.ini 中的以下内容：

```
memory_limit = 128M 
```

我将其更改为-1，根据[文档](http://php.net/manual/de/ini.core.php)将其设置为无限。无济于事。

不仅没有意义，即使查询返回了所有 50mb，它也不应该抱怨，因为限制设置为 128mb - 奇怪的是，我运行的查询甚至不需要太多内存：当我回显它并运行时它直接在数据库中，它只返回三行。查询如下所示：

```
SELECT * FROM table WHERE foreign_id=1 
```

有谁知道如何解决这个问题？我想将内存限制设置为无限。

## 编辑 1

首先 - 我从终端而不是浏览器运行脚本是否重要？

其次，这里是php代码：

```
//Connect to database
$user="root";
$databasePassword="password";
$host="127.0.0.1";
$database="primarydata";
$identifier=mysql_connect($host,$user,$databasePassword,true);
$db1=mysql_select_db($database);

//Select * from first table
$query="SELECT id,name,city,country FROM table1 WHERE id>=1 ORDER BY id ASC";
$result=mysql_query($query);
$datas=array();
while($row=mysql_fetch_object($result)) $datas[]=(object) $row;

//Loop through artists
for($i=0;$i<sizeof($datas);$i++){
    for($j=$i+1;$j<sizeof($datas);$j++){
        //This is where the problem occurs
        $query="SELECT * FROM table2 WHERE data_id=".$datas[$i]->id;
    }
} 
```

第三，我必须使用“--enable-memory-limit'”吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T10:56:42.160

尝试：

```
ini_set('memory_limit','-1') 
```

当我将数百万个条目插入数据库（样本）时，我遇到了和你一样的问题。这个有帮助。

编辑：添加，不推荐使用这个（仅在本地主机上，例如我给你的例子，将大量样本数据输入数据库等）这个答案是在你发布你的 php 代码之前发布的......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-05T11:28:39.290

1.  返回对象将使用更多 RAM
2.  为什么不写一个，而另一个里面。
3.  mysql_* 方法已被弃用，您应该使用较新的 mysqli_* 方法。
4.  为什么将整个第一个结果集加载到数组中？有你的 100MB，MySQL 客户端库已经将 50MB 加载到它的缓存中，然后你在 PHP 中再次缓存它。

例子：

```
//Select * from first table
$query  = "SELECT id, name, city, country FROM table1 WHERE id >= 1 ORDER BY id ASC";
$result = mysqli_query($dbc, $query);
while($row = mysqli_fetch_array($result)) {
    //Loop through artists
    $query2  = "SELECT * FROM table2 WHERE data_id = " . $row['id'];
    $result2 = mysqli_query($dbc, $query2);
    while($artist = mysqli_fetch_array($result2)) {
        // Do stuff with $row and $artist
    }
} 
```

# c# - 根据当前登录用户不工作在gridview上显示数据

> ID：11815783
> 
> 赞同：0
> 
> 时间：2012-08-05T10:46:07.750
> 
> 标签：c#, asp.net, sql

您如何根据当前登录用户实际显示从数据库中检索到的数据？我使用了这种方法，但它实际上不起作用。我哪里出错了？

我的 .cs 代码：

```
 int selectedRow = GridView1.SelectedIndex;
    GridViewRow row = GridView1.Rows[selectedRow];
    int UserId = Convert.ToInt32(row.Cells[0].Text);

    MembershipUser currentUser = Membership.GetUser();
    Guid currentUserId = (Guid)currentUser.ProviderUserKey;

    string strConnectionString = ConfigurationManager.ConnectionStrings["ASPNETDBConnectionString1"].ConnectionString;

    SqlConnection myConnect = new SqlConnection(strConnectionString);

    string strCommandText = "SELECT date, starttime, endtime, planner FROM bookings WHERE UserId =@UserId";
    SqlCommand cmd = new SqlCommand(strCommandText, myConnect);

    myConnect.Open();
    SqlDataReader reader = cmd.ExecuteReader();
    cmd.Parameters.AddWithValue("@UserId", UserId);

    reader.Close();
    myConnect.Close(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T10:48:49.903

你必须反转线：

```
 myConnect.Open();
  cmd.Parameters.AddWithValue("@UserId", UserId);
    SqlDataReader reader = cmd.ExecuteReader(); 
```

;-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T15:35:01.767

为了澄清，您在添加 UserId 参数之前执行 DataReader。事实上，在完全定义命令对象之前，最好不要打开连接。

它应该看起来更像这样：

```
string strConnectionString = ConfigurationManager.ConnectionStrings["ASPNETDBConnectionString1"].ConnectionString;

    SqlConnection myConnect = new SqlConnection(strConnectionString);

    string strCommandText = "SELECT date, starttime, endtime, planner FROM bookings WHERE UserId =@UserId";
    SqlCommand cmd = new SqlCommand(strCommandText, myConnect);
  cmd.Parameters.AddWithValue("@UserId", UserId);

    myConnect.Open();
    SqlDataReader reader = cmd.ExecuteReader();  
    myGridView.DataSource = reader;
    myGridView.DataBind();

    reader.Close();
    myConnect.Close(); 
```

# objective-c - NSOpenPanel 在 Objective-C 中获取文件名？

> ID：11815784
> 
> 赞同：1
> 
> 时间：2012-08-05T10:46:10.137
> 
> 标签：objective-c, xcode, selector, ziparchive

当我创建一个 NSOpenPanel 时，如下所示：

```
int i;

NSOpenPanel* openDlg = [NSOpenPanel openPanel];
[openDlg setCanChooseFiles:YES];
[openDlg setCanChooseDirectories:YES];

if ([openDlg runModalForDirectory:nil file:nil] == NSOKButton)
{
    NSArray* files = [openDlg filenames];

    for( i = 0; i < [files count]; i++ )
    {
        NSString* fileName = [files objectAtIndex:i];
        NSLog(fileName);
        NSString *catched = fileName;
        [self performSelector:@selector(decompresss2z:) withObject:catched];
    }
} 
```

当我登录时`fileName`，它是正确的并打印我的文件完整目录，但是当我尝试将它与我的 void 一起使用时，它变得像超级奇怪的字母，就像 ÿ^0f 完全随机。为什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-13T03:15:08.890

该代码没有任何问题。实际上，该代码有许多不理想的地方，但没有什么会使其无法正常工作。decompresss2z: 函数是什么样的？

如果这是我的代码，我会进行以下更改：

1.  `runModalForDirectory:file:`已弃用；你应该`runModal`改用。
2.  `filenames`已弃用；您应该`URLs`改用（您可以调用`path`每个 URL 来获取文件名）。
3.  `NSLog`的参数必须是格式字符串，否则会发生奇怪的事情。
4.  您应该使用快速枚举（使用`in`关键字），而不是使用索引遍历容器。它不仅更高效，而且代码更少（代码越少越好）。
5.  没有理由打电话给`performSelector:withObject:`这里；只需正常调用该方法即可。

重写，它看起来像这样：

```
NSOpenPanel* openDlg = [NSOpenPanel openPanel];
[openDlg setCanChooseFiles:YES];
[openDlg setCanChooseDirectories:YES];

if ( [openDlg runModal] == NSOKButton )  // See #1
{
    for( NSURL* URL in [openDlg URLs] )  // See #2, #4
    {
        NSLog( @"%@", [URL path] );      // See #3
        [self decompresss2z:[URL path]]; // See #5
    }
} 
```

不过，同样，这些更改都不会改变您的实际问题。为了进一步提供帮助，我们需要查看更多代码。具体来说，我想看看 decompressss2z: 是什么样子。

# sed - SED 通配符选择的范围太大

> ID：11815787
> 
> 赞同：0
> 
> 时间：2012-08-05T10:46:30.370
> 
> 标签：sed, geektool

在 Mac osx 10.6.8 上使用 Sed 创建一个带有文本编辑器的 .command 文件，该文件将在 Geektool 中执行。我有一个字符串 MYSTRING 并尝试从中删除链接标签。但是在使用通配符时 Sed 似乎选择了一个太长的范围。

```
MYSTRING="<link>part_1</link>This part must remain.<link>part_x</link> Like this part."
echo $MYSTRING |
sed s/"<link>".*"<\/link>"//g 
```

我曾预料到这个结果：

```
This part must remain. Like this part. 
```

但实际结果是：

```
 Like this part. 
```

似乎 Sed 将第一个链接作为起始值，将最后一个 /link 作为终止值，导致两者之间的所有内容都被删除。我如何让 Sed 理解它应该在链接之后使用第一个 /link 而不是最后一个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T10:50:54.043

因为`.*`很贪心。尝试：

```
sed 's@<link>[^<]*</link>@@g' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T10:52:34.290

正则表达式重复运算符的行为`*`是匹配最长的、最左边的可能匹配项。不幸的是，`sed`不支持吝啬匹配，但 Perl 支持：

```
perl -pe 's%<link>.*?</link>%%g' 
```

或者，也许您可​​以制定一个贪婪匹配没有问题的正则表达式；

```
sed 's%<link>[^<>]*</link>%%g' 
```

# java-me - 在 j2me 中读写 RMS

> ID：11815789
> 
> 赞同：3
> 
> 时间：2012-08-05T10:47:29.807
> 
> 标签：java-me, j2mepolish, rms

我在 J2ME 中做游戏。我想在 RMS 中保存数据级别和分数。这是我的代码 这是 RMSData 类：

```
public class RMSData {

private static RecordStore rs = null;
static final String REC_STORE = "ReadWriteRMS";
public static void openRecStore(){
    try {
        rs = RecordStore.openRecordStore(REC_STORE, true);
    } catch (Exception e) {} 
}   
public static void closeRecStore(){
    try {
        rs.closeRecordStore();
    } catch (Exception e) {}
}

public static void deleteRecStore(){
    if(RecordStore.listRecordStores()!= null){
        try {
            RecordStore.deleteRecordStore(REC_STORE);
        } catch (Exception e) {}
    }
}   
public static void writeRecStore(String str){
    byte[] rec = str.getBytes();
    try {
        rs.addRecord(rec, 0, rec.length);
    } catch (Exception e) {}
}
public static String readRecStore(){
     String kq =null; 
     try{
      byte[] recData = new byte[5]; 
      int len;

      if (rs.getNumRecords()==0) return null; 

      for(int i = 1; i <= rs.getNumRecords(); i++){
          if(rs.getRecordSize(i) > recData.length){
              recData = new byte[rs.getRecordSize(i)];
      }           
      len = rs.getRecord(i, recData, 0); 
      if (i==rs.getNumRecords()) kq = new String(recData, 0, len);
      }
      }catch (Exception e){}
      return kq;
   }
} 
```

我将 level 和 score 写入 RMS ：

```
RMSData.openRecStore();
RMSData.writeRecStore(String.valueOf(LevelPlay));
RMSData.writeRecStore(String.valueOf(Score));           
RMSData.closeRecStore(); 
```

然后我读了它：

```
RMSData.openRecStore();
String st = null;       
if(RMSData.readRecStore() == null)
    st = "Level : 0"+"Score : 0";
else
    st = "Level : "+RMSData.readRecStore()+"Score : "+RMSData.readRecStore();
RMSData.closeRecStore(); 
```

但它无法读取数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T11:53:25.490

验证它的 writeRecStore 方法，如果你已经保存了第一条记录只需要用 setRecord 更新它们的值。请参阅我们在此处使用的示例：

```
 /**
     * Saves the current data.
     * 
     */
    public static void saveConfiguration() {
        // ...

        RecordStore recordStore = open(CONFIG_DB);

        if (recordStore != null) {
            byte byteArray[] = Persistence.packConfiguration();
            try {
                if (recordStore.getNumRecords() == 2) {
                    byte roolback[] = recordStore.getRecord(CURRENT);
                    recordStore.setRecord(ROLLBACK, roolback, 0, roolback.length);
                    recordStore.setRecord(CURRENT, byteArray, 0, byteArray.length);
                } else {
                    recordStore.addRecord(byteArray, 0, byteArray.length);
                    recordStore.addRecord(byteArray, 0, byteArray.length);
                }

            } catch (Exception ex) {

                ex.printStackTrace();
            }
        }

        Persistence.close(recordStore);

    }

    /**
     * Packs the data and stores memory data into a byte array and returns it.
     * 
     * @return The array of bytes with application data packed.
     */
    private static byte[] packConfiguration() {
        byte byteArray[] = null;

        try {
            ByteArrayOutputStream bytearrayoutputstream = new ByteArrayOutputStream();
            DataOutputStream dataoutputstream = new DataOutputStream(bytearrayoutputstream);

            // starts packing the data into the byte array
            dataoutputstream.writeBoolean(Persistence.rememberLogin);
            dataoutputstream.writeBoolean(Persistence.sounds);
            dataoutputstream.writeInt(Persistence.fontSize);
            dataoutputstream.writeInt(Persistence.idiom);

            dataoutputstream.writeUTF((Persistence.msg == null ? "" : Persistence.msg));
            dataoutputstream.writeInt(Persistence.availability);

            // ...

            // end of packing
            byteArray = bytearrayoutputstream.toByteArray();
            dataoutputstream.close();

        } catch (Exception ex) {
            ex.printStackTrace();
        }
        return byteArray;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T17:50:02.673

我阅读它的方式，我认为 RMSData.readRecStore() 所做的是：

*   浏览所有记录。
*   一次将它们全部读入一个字节数组
*   丢弃所有数据，除非它是存储中的最后一条记录
*   返回一个包含最后一条记录的字符串。

每次调用 readRecStore 时有没有机会得到相同的结果（分数）？

# 3d - 在立方体表面生成 3D 随机点

> ID：11815792
> 
> 赞同：1
> 
> 时间：2012-08-05T10:48:07.420
> 
> 标签：3d, geometry, processing, cube, particles

我正在尝试在处理过程中在立方体表面上随机均匀地生成点。我正在尝试制作动画，所以我需要点的 x、y 和 z 最终位置。

有什么建议么？谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-05T13:45:57.873

只需结合三个均匀随机分布。此方法假设您有一个单位立方体 [0..1]^3。如果不是这种情况，只需在生成点后缩放和偏移点。

1.  通过从 [0..6) 中获取一个整数来选择一个立方体边
2.  在该侧的平面中选择一个 x 坐标
3.  在该侧的平面中选择一个 y 坐标

这是一些 C++-ish 伪代码：

```
vec3 result;
int s=randomSide(); // returns 0 to 5, uniformly distributed
int c=s%3; // get the axis perpendicular to the side you just picked

result[c]=s>2 ? 1.f : 0.f;
result[(c+1)%3]=random01();
result[(c+2)%3]=random01(); 
```

如果你有一个更通用的盒子而不是立方体，你必须根据盒子侧面的面积来偏向侧边拾取。

# objective-c - ASIHttp 框架的 Apple Mach-O 链接器 (Id) 错误

> ID：11815799
> 
> 赞同：1
> 
> 时间：2012-08-05T10:49:20.253
> 
> 标签：objective-c, ios, xcode, xcode4.4

我有这个尴尬的问题。我在其他项目中使用 ASIHTTP 框架没有任何问题。我将我的 XCode 升级到 4.4 并使用 ASIHTTP 开始了一个新项目。导入文件，`-fno-objc-arc`像往常一样添加，但我不断收到这些奇怪的消息，尽管一切都设置正确。我什至尝试将整个项目复制粘贴到一个新项目中，但没有帮助。我在我的项目中删除了这些类的所有调用，没有导入，没有包含等。它给我这些错误仅仅是因为它在那里......

我的目标是iOS5（iPhone）。

有人遇到同样的事情吗？

![截屏](../Images/484b0cc4aa1061192c79a1163acc57fd.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T10:53:01.747

确保`CFNetwork`和`SystemConfiguration`框架链接到您的应用程序。

# javascript - 在 IE 中查看时，Jquery Animate 无法正常工作

> ID：11815801
> 
> 赞同：0
> 
> 时间：2012-08-05T10:49:33.300
> 
> 标签：javascript, jquery, html, css

这是幻灯片代码的链接。 [http://jsfiddle.net/K2JBg/24/](http://jsfiddle.net/K2JBg/24/) 此滑块代码在 chrome 和 firefox 中工作正常，但最后一张图像丢失，左侧部分在 ie7/8 怪癖模式下查看时不合适

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T11:09:51.033

我认为你需要在它到达左侧位置 -1200px 后进行检查，因为在最后一张图像之后，如果你一直按下按钮，它的左侧值会不断从 -1200 减少到 -1500 等等。因此您可以在达到左侧 -1200 像素后禁用该按钮或获取第一张图像。因为它在 ie 7/8 对我来说工作正常。

# firefox-addon - 在 Firefox 插件中制作 zip 文件

> ID：11815805
> 
> 赞同：1
> 
> 时间：2012-08-05T10:50:03.540
> 
> 标签：firefox-addon, firefox-addon-sdk

我开发了一个 Firefox 插件，将一些数据存储在插件文件夹中。如何添加备份按钮，以便当用户单击它时，会显示一个保存对话框并将文件夹打包在一个 zip 文件中并存储在用户所需的位置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T11:16:24.953

有一个[zip reader](https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIZipReader)和[zip writer](https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIZipWriter)界面可用。

这是在 SDK 模块中使用它的示例：[https ://github.com/voldsoftware/ziputils-jplib/blob/master/lib/ziputils.js](https://github.com/voldsoftware/ziputils-jplib/blob/master/lib/ziputils.js)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T08:05:24.093

事实上，附加 SDK 没有任何模块来编写 ZIP 文件。但是，通过[chrome 权限](https://addons.mozilla.org/en-US/developers/docs/sdk/1.8/dev-guide/tutorials/chrome.html)，您可以访问底层平台的[`nsIZipWriter`接口](https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIZipWriter)。例如：

```
var {Cc, Ci, Cu} = require("chrome");
var {FileUtils} = Cu.import("resource://gre/modules/FileUtils.jsm");

var zipFile = FileUtils.getFile("ProfD", ["test.zip"], false);
var savedFile = new FileUtils.File("C:\\foo.exe");
var zipWriter = Cc["@mozilla.org/zipwriter;1"].createInstance(Ci.nsIZipWriter);
zipWriter.open(zipFile, FileUtils.MODE_WRONLY | FileUtils.MODE_CREATE);
zipWriter.addEntryFile("foo.exe", zipWriter.COMPRESSION_BEST, savedFile, false);
zipWriter.close(); 
```

`test.zip`这将在用户的配置文件目录中创建一个文件并写入`c:\foo.exe`其中。另请参阅[`FileUtils`文档](https://developer.mozilla.org/en-US/docs/JavaScript_code_modules/FileUtils.jsm)。

# eclipse-plugin - 使用 pydev 作为非 root

> ID：11815806
> 
> 赞同：3
> 
> 时间：2012-08-05T10:50:20.717
> 
> 标签：eclipse-plugin, pydev

我正在使用archlinux。我刚刚安装了最新的 Eclipse（使用 pacman）并手动安装了 pydev（下载了 zip 文件并将它们上压缩到 /usr/share/eclipse/dropins）。问题是，当我以 root 身份运行 eclipse 时，我可以看到 Pydev 插件，但是当我以普通用户身份运行 eclipse 时，似乎没有加载 Pydev。

我想知道如何解决这个问题？

PS：我知道我应该使用 Eclipse 的更新管理器来安装 pydev。但是因为我现在在中国，所以很多国外的网站，包括sourceforge都不能访问。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T16:36:31.280

只是检查一下，但是您的用户是否可以访问您在 dropins 中放置的内容？

另外，请注意，要使用更新管理器安装 PyDev，请参阅： http: [//pydev.org/download.html](http://pydev.org/download.html)（请注意，该部分与 sourceforge 无关）。

# cakephp - 修改单页cakephp

> ID：11815814
> 
> 赞同：0
> 
> 时间：2012-08-05T10:51:15.237
> 
> 标签：cakephp, edit

我希望单个页面（例如：domain.sg/contact）是可编辑的，但我认为创建一个新的数据库表、一个模型、一个控制器和视图并不是解决这个原始问题的最佳实践。你有什么建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T11:22:25.810

如果您希望在不使用数据库的情况下编辑文件，则需要在页面或其他地方使用文件系统功能以及编辑表单。

在您的编辑表单的页面控制器中：

```
public function edit_contact()
{
 //retrieve file's contents and output to view
 $file = fopen('/path/to/contact.ctp', w);
 $file_contents = file_get_contents($file);
 $this->set('contents', $file_contents);
 if($this->request->is('post'))
 {
  fwrite($file, $this->request->data['contents']);
 }
 fclose($file);
} 
```

查看文件：

```
//edit_contact.ctp
echo $this->Form->create('Edit Contact);
echo $this->Form->input('Content', array('type' => 'textarea', 'value' => $contents));
echo $this->Form->end('Update File'); 
```

然后创建您希望可编辑的contact.ctp。

**警告：**此表单不进行验证，并允许用户输入他们想要的任何内容，包括可能对您或其他访问者使用的恶意代码。

# python - 如何将带有 eye3D 模块的标签编码更改为 iso-8859-5？

> ID：11815818
> 
> 赞同：1
> 
> 时间：2012-08-05T10:52:07.967
> 
> 标签：python, encoding, mp3, python-2.5

该文件可以具有`cp1251`和`utf-8`编码。我应该：

1.  删除 id3 v2 标签
2.  将 id3 v1 标签的编码更改为`iso-8859-5`

我执行以下操作：

```
def getTagStr (tagUnicStr):
    # gets the 1byte 8bits string, as written in the tag, from the unicode, returned by tag.get*
    # taken from tag2utf-0.16 by Kopats Andrei
    ls = []
    for i in range(0,len(tagUnicStr)):
        if (ord(tagUnicStr[i]) in range(256)):
            ls.append(chr(ord(tagUnicStr[i])))
        else:
            ls.append(tagUnicStr[i])
    Str8 = ''.join(ls)
    return Str8

trackInfo = eyeD3.Mp3AudioFile(path)
tag = trackInfo.getTag()
tag.link(path)
mp3artist = tag.getArtist() # contains Russian characters
mp3artist = getTagStr(mp3artist)
mp3encoding = 'utf-8'
try:
    # pseudo utf-8 encoding
    mp3artist = mp3artist.decode('utf-8')
except UnicodeDecodeError, err:
    # cp1251
    mp3artist = mp3artist.decode('cp1251')
    mp3encoding = 'cp1251'
except UnicodeEncodeError, err:
    # utf-8
    pass

tag.setArtist(mp3artist.encode('iso-8859-5'))
tag.update() 
```

它在最后一行失败并出现以下错误：

```
UnicodeEncodeError: 'latin-1' codec can't encode characters in position 1-5: ordinal not in range(256) 
```

我的代码有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T13:59:20.940

文档对此非常不清楚，但 eyeD3 似乎只接受 1/ Unicode 或 2/ 字节编码的标签，这些标签使用您当前的语言环境编码（然后用于将标签转换回 Unicode）。

因此，我认为您的方法根本行不通。基本上，您不能将任意编码的数据传递给 eyeD3，就像您尝试在脚本的倒数第二行中所做的那样。

eyeD3 似乎确实提供了与编码相关的设施，但：

```
tag.setTextEncoding(encoding) 
```

但是，通过阅读该函数的代码，ID3 规范只允许少数特定编码，而 iso-8859-5 不在其中。

因此，ID3 规范似乎根本不允许您尝试做的事情。如果您在这里尝试做的是*围绕*该规范工作，那么遵循它的 eyeD3 恐怕不会有帮助。

也许您想根据您通过摆弄标签编码来实现的确切目标来重新表述您的问题？然后可以提出其他解决方案。

# android - Android：以编程方式添加无线电组时出错

> ID：11815819
> 
> 赞同：1
> 
> 时间：2012-08-05T10:52:11.810
> 
> 标签：android, android-layout, radio-button, radio-group

我有一个错误，我不明白这是什么意思。我是 Android 的新手

```
Caused by: java.lang.IllegalStateException: The specified child already has a parent. You must call removeView() on the child's parent first. 
```

我正在尝试以编程方式将单选组添加到表格布局中

首先，我将单选组添加到表格布局中，然后将单选按钮添加到单选组

```
RadioGroup mRadioGroup;
mRadioGroup = new RadioGroup(this);
TableLayout mainTable = (TableLayout) findViewById(R.id.myTable);
mainTable.addView(mRadioGroup); 
```

然后我创建一行并将单选组添加到该行，最后将该行添加到表格布局

```
TableRow row;
RadioButton radioButton = new RadioButton(this);
radioButton.setId(1);
radioButton.setText("SomeText");
row.addView(mRadioGroup);

mainTable.addView(row); 
```

任何人都可以帮忙吗？

编辑：当我将收音机组直接添加到表格布局而不是表格行时，它起作用了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T11:28:55.583

您的问题是您同时添加`mRadioGroup`了`mainTable`and `row`：

```
mainTable.addView(mRadioGroup);
...
row.addView(mRadioGroup); 
```

正如您部分发现的那样，**删除这些行中的任何一个，**它都会起作用。

您*不必*将 a 添加`View`到 a`TableRow`以将其添加到 a `TableLayout`，但它的行为会有所不同，具体取决于您是否这样做。

此外，您从未真正初始化过`row`- 确保这样做

```
TableRow row = new TableRow(this); 
```

在你使用它之前！

# sql - 将列名添加到我从文本中选择的结果中

> ID：11815820
> 
> 赞同：0
> 
> 时间：2012-08-05T10:52:12.457
> 
> 标签：sql, sql-server-2008-r2, bibtex, bibliography

我想从我的表中产生这样的输出。事实上，我想创建一个函数或过程来获取表的名称及其列（也可以从中检索`sys.tables`）并将这样的输出创建为单个字符串： `imagine [tablename]`有 3 行：

```
Tablename (code="1",column1="Column1value",column2="Column2value",column3="Column3value")
Tablename (code="2",column1="Column1value",column2="Column2value",column3="Column3value")
Tablename (code="3",column1="Column1value",column2="Column2value",column3="Column3value") 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T17:45:15.110

我们可以从 sys 表中获取传递的表名的列名，然后打印每一行的表值，我们可以使用 ROW_NUMBER 并通过为每一行附加列值来打印字符串并得到最终输出。每个循环都会嵌套。外部 foreach 循环将使用 ROW_NYMBER 并将针对表中的所有行执行，内部循环将根据需要在一个字符串中打印列值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T09:18:26.327

尝试此过程以获得所需格式的结果。

```
CREATE Procedure GetTableValues(@tblname varchar(10))
As
BEGIN
DECLARE @idmin int,@idmax int,@colCnt int,@i int
DECLARE @outtbl TABLE(col1 varchar(1000))
DECLARE @tblval TABLE(col1 varchar(1000))
DECLARE @str varchar(1000),@colname varchar(100),@colvalue sql_variant
SET @str=''
SET @i=1
select @colCnt=COUNT(*) from sys.columns where object_id=object_id(@tblname)

IF EXISTS(select * from sys.tables where name='temp')
DROP TABLE temp
EXEC('select ROW_NUMBER() over (order by (select 0)) as rno,* into temp from '+@tblname)

select @idmin=MIN(rno),@idmax=MAX(rno) from temp

while(@idmin <=@idmax)
begin
while(@i <=@colCnt)
begin
select @colname=name from sys.columns where column_id=@i and object_id=object_id(@tblname)
insert into @tblval 
exec('select '+@colname+' from temp where rno='+@idmin)
select @colvalue=col1 from @tblval  
SET @str=@str+','+@colname+'="'+cast(@colvalue as varchar)+'"' 
SET @i=@i+1
end
insert into @outtbl 
select @tblname+'('+STUFF(@str,1,1,'')+')'
SET @idmin=@idmin+1
SET @i=1
SET @str=''
end
select * from @outtbl 
END

exec GetTableValues 'test7' 
```

# c - 为什么用opencv显示图像时窗口比图像大？

> ID：11815827
> 
> 赞同：0
> 
> 时间：2012-08-05T10:53:41.987
> 
> 标签：c, image, opencv

我是 OpenCV 2.4.2 的新手，编写了一个简单的程序来显示图像。

图像是：

![标识](../Images/2115015232bb1473e6195a3d82a0632d.png)

代码是：

# 包括“highgui.h”

```
int main(int argc, char** argv) {
    IplImage* img = cvLoadImage("logo.png");
    cvNamedWindow( "Example1", CV_WINDOW_AUTOSIZE);
    cvShowImage("Example1", img);
    cvWaitKey(0);
    cvReleaseImage(&img);
    cvDestroyWindow("Example1");
    return 0;
} 
```

结果：

![在此处输入图像描述](../Images/47718855f88dd1e71c6b035123070ab8.png)

您可以看到右侧有一个大的灰色边框。为什么会出现，以及如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T10:58:21.730

这是可能的最小窗口，因为窗口顶部应该占据 3 个按钮。如果放大图像就可以了。

# jsf-2 - 冰选择菜单未订购

> ID：11815828
> 
> 赞同：0
> 
> 时间：2012-08-05T10:53:49.683
> 
> 标签：jsf-2, selectonemenu

我正在使用 jsf2.0 和 icefaces3。我有一个填充了地图对象的 selectonemenu，我的地图有一个货币列表。当我运行我的 jsp 时，我看到我的下拉列表已填充，但货币列表没有按照我最初加载地图的方式排序。下面是我的代码片段。

```
-------XHTML-------
<ice:selectOneMenu  id="curr"  label="Currency"  value="#{strformbean.valueOfTranCurr}"
    styleClass="formDrpDown"   >
<f:selectItems value="#{strformbean.currencyMap}"  /> 
</ice:selectOneMenu>
-------BEAN--------
    public static Map getCurrency() {
        Currency [] currencies = new Currency[]{};
        Map currency = new HashMap();        
        currency.put("Algerian Dinar","DZD");
        currency.put("Argentine Peso","ARS");
        currency.put("Australian Dollar","AUD");
        currency.put("Bahraini Dinar","BHD");
        currency.put("Belgian Franc","BEF");
....
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T12:24:16.057

尝试用它替换`HashMap`应该`LinkedHashMap`记住*插入*顺序...

# android - 使用数组适配器保存 listview simple_list_item_multiple_choice 复选框状态

> ID：11815831
> 
> 赞同：0
> 
> 时间：2012-08-05T10:54:29.580
> 
> 标签：android, listview, checkbox

我是 Android 设备编程的新手。我试图弄清楚如何在使用 simple_list_item_multiple_choice 和数组适配器生成的列表视图中保存复选框。我希望能够保存复选框的状态，以便当用户点击后退按钮转到另一个清单时，他们可以回到这个清单并从他们离开的地方拾取。

求求求救求救！！代码和/或解释将是理想的。

代码：

```
public class BeachBabyStuff extends Activity  {
    String[] beachstuffbaby = new String[]{                                                                
                        "Beach Blanket or Mat",                                             
            "Beach Towels",                                                                      
            "Beach Umbrella",                                                                  
            "Beach Chair",                                                                        
            "Books / Magazines",                                                              
            "Radio",                                                                      
            "Pen / Paper",                                                              
            "Tablet"};                                                                    

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.listview);

        // Getting the reference to the listview object of the layout
        ListView listView = (ListView) findViewById(R.id.listview);

        // The checkbox for the each item is specified by the layout android.R.layout.simple_list_item_multiple_choice
        ArrayAdapter<String> adapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_multiple_choice, beachstuffbaby);

        // Setting adapter to the listview
        listView.setAdapter(adapter);

        //Manage the onItemClick method
        listView.setOnItemClickListener(new OnItemClickListener() {

            private View view;

            public void onItemClick(AdapterView<?> ListView, View view, int position, long id) {
                         CheckedTextView textView = (CheckedTextView)view;
                         textView.setChecked(!textView.isChecked());

                         this.view = view;

                                    }

        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T11:17:02.467

将布尔数组添加到维护检查的活动中。

```
boolean checked[] = new boolean[beachstuffbaby.length]; 
```

将所有选中的位置设置到此数组中。从此数组中创建一个逗号分隔的项目字符串并放入`SharedPreferences`.

通过从首选项中读取此数组并将字符串拆分为逗号来恢复状态。

# c# - 正则表达式：仅限 AZ 字符

> ID：11815835
> 
> 赞同：1
> 
> 时间：2012-08-05T10:55:21.977
> 
> 标签：c#, regex

嗨，伙计们，我有一个字符串，例如...

“Afds 1.2 45002”

我想用正则表达式做的是从左边开始，返回字符 AZ || az 直到遇到一个不匹配的。

所以在上面的例子中，我想返回“Afds”。

另一个例子

“BCAD 2.11 45099 GHJ”

在这种情况下，我只想要“BCAD”。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-05T10:57:40.157

你想要的表达式是：`/^([A-Za-z]+)/`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-05T11:00:36.477

使用这个正则表达式`(?i)^[a-z]+`

```
Match match = Regex.Match(stringInput, @"(?i)^[a-z]+"); 
```

`(?i)`- 忽略大小写

`^`- 字符串开头

`[a-z]`- 任何拉丁字母

`[a-z ]`- 任何拉丁字母或空格

`+`- 1 个或多个 previos 符号

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-05T10:58:37.053

```
string sInput = "Afds 1.2 45002";

Match match = Regex.Match(sInput, @"^[A-Za-z]+",
              RegexOptions.None);

// Here we check the Match instance.
if (match.Success)
{
    // Finally, we get the Group value and display it.
    string key = match.Groups[1].Value;
    Console.WriteLine(key);
} 
```

# linq - linq中的收益回报foreach

> ID：11815841
> 
> 赞同：3
> 
> 时间：2012-08-05T10:57:06.087
> 
> 标签：linq, foreach, return, yield

问题：谁能告诉我如何在 linq 中返回值。我想返回一组 RadToolBarButtons 并在创建时为其分配值。

代码：我尝试了两种方式：

```
IEnumerable<RadToolBarButton> collection = ContextMenuColumn.ToList()
      .ForEach(x => yield return new RadToolBarButton() { Value = x }); 
```

错误 11 无法将类型“void”隐式转换为“System.Collections.Generic.IEnumerable”

```
IEnumerable<RadToolBarButton> collection =
    ContextMenuColumn.SelectMany<string,IEnumerable<RadToolBarButton>>(
       x => new RadToolBarButton() { Value = x }); 
```

错误 11 无法将类型“Telerik.Web.UI.RadToolBarButton”隐式转换为“System.Collections.Generic.IEnumerable>”。存在显式转换（您是否缺少演员表？）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-05T11:00:02.463

您应该使用`Select`而不是`ForEach`，它可以满足您的需求。

```
IEnumerable<RadToolBarButton> collection = ContextMenuColumn.ToList()
  .Select(x => new RadToolBarButton { Value = x }); 
```

我不确定内部`ToList`是否是必要的，您可能能够摆脱 a`Cast<T>`而不是*实现*中间列表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T10:59:59.460

使用`Select`代替`ForEach`，它会`yield return`为你做

# php - preg_replace 从 php 数组中构建查询字符串，例如数组

> ID：11815843
> 
> 赞同：0
> 
> 时间：2012-08-05T10:57:33.267
> 
> 标签：php, regex, preg-replace

我想转换这个字符串：

```
"B=val4, A = [val1, key=val2, val3], C=val5" 
```

到这个字符串：

```
"B=val4,A[]=asdas&A[key]=val2&A[]=val3,C=val5" 
```

因此，它可以与 parse_str() 一起使用

必须如何使用 preg_replace 或 preg_replace_callback 来完成？

preg_replace 更可取。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T13:47:32.167

我认为这不适用于正则表达式。我写了一个小递归函数，将你的字符串解析为一个数组。这样`parse_str()`以后就不用再使用了。我认为这不是最优雅的方式，但它确实有效。它可能可以改进。

```
$str = "B=val4, A = [val1, key=val2, val3], C=val5";
$i = 0;

function parse(&$i, &$str) {
    $array = array();
    $buffer = "";
    $key = "";

    while ($i < strlen($str)) {
        switch ($str[$i]) {
            case " ": //ignore spaces
                break;
            case "[": //call recursive function
                $i++;
                $buffer = parse($i, $str);
                break;
            case "]": //return sub-array
                $key ? $array[$key] = $buffer : $array[] = $buffer; // add last sub-element to array
                return $array;
                break;
            case "=": //set key and reset buffer
                $key = $buffer;
                $buffer = "";
                break;
            case ",": //add to array
                $key ? $array[$key] = $buffer : $array[] = $buffer;
                $key = "";
                $buffer = "";
                break;
            default : // add char to buffer
                $buffer .= $str[$i];
                break;
        }
        $i++;
    }
    $key ? $array[$key] = $buffer : $array[] = $buffer; // add last element to array
    return $array;
}

$array = parse($i, $str);
echo "<pre>";
print_r($array); 
```

输出：

```
Array
(
    [B] => val4
    [A] => Array
        (
            [0] => val1
            [key] => val2
            [1] => val3
        )

    [C] => val5
) 
```

希望这可以帮助。

# php - jQuery 自动提示数组样式

> ID：11815846
> 
> 赞同：1
> 
> 时间：2012-08-05T10:57:57.517
> 
> 标签：php, javascript, jquery, html, autosuggest

我在我的一个搜索表单中使用了简单的 jQuery autosuggest，但是我不太确定如何使它更容易设计。

目前发生的是，它显示的结果如下：

```
**name** **(age)** - **state**
John (66) - here
Jack (36) - there
Jason (46) - here
Jimmy (56) - there 
```

但是，我想用预定义的宽度制作某种表格，例如：

```
**name**    **(age)**    - **state**
John     (66)     - here
Jack     (36)     - there
Jason    (46)     - here
Jimmy    (56)     - there 
```

目前收集数据的数组如下所示：

```
$data = array();
if ( $rs && mysql_num_rows($rs) )
{
while( $row = mysql_fetch_array($rs, MYSQL_ASSOC) )
{
    $data[] = array(
        'label' => $row['name'] .'('. $row['age'] .') - '. $state,
        'value' => $row['name']
    );
}
}
echo json_encode($data);
flush(); 
```

除了这里收集数据的这个位是javascript：

```
jQuery(document).ready(function($)
{
$.widget('custom.custom_autocomplete', $.ui.autocomplete,
{
    _renderMenu: function(ul, items)
    {
        var self = this;
        $.each(items, function(index, item)
        {
            var li = self._renderItem(ul, item);
        });

        $(ul).addClass('sis');
    }
});

$('#sis').custom_autocomplete({
    minLength:1 ,
    source:'autocomplete.php' ,
    selectFirst:true
});
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T13:06:16.910

您可以使用本页jQuery网站上的自动完成教程中描述的自动完成的renderItem功能：http: [//jqueryui.com/demos/autocomplete/#custom-data](http://jqueryui.com/demos/autocomplete/#custom-data)

但是，您必须对代码进行一些更改：

使用这种新结构更改您的响应 json

到以下：

```
$data[] = array(
'name' => $row['name'],
'row' =>  $row['age'],
'state' => $state,
'value' => $row['name']
); 
```

接下来，您应该使用自动完成 _renderItem() 函数更改您的 Javascript 代码

它看起来像这样

```
$( "#sis" ).autocomplete({
            minLength: 0,
            source: autocomplete.php,
        })
        .data( "autocomplete" )._renderItem = function( ul, item ) {
            return $( "<li></li>" )
                .data( "item.autocomplete", item )
                .append( "<p><span class='width100'>" + item.name + "</span><span class='width100'>(" + item.age+ ")</span><span class='width100'>-" + item.state+ "</span></p>")
                .appendTo( ul );
        }; 
```

最后在您的 CSS 文件中添加以下 CSS 代码以支持宽度

```
p.width100{
    width: 100px;
    padding: 5px 0;
    text-align: center; 
} 
```

它最终应该会产生预期的结果。您可以根据需要编辑 CSS。

# twitter - Twitter API 获得超过前 100 条转发

> ID：11815847
> 
> 赞同：5
> 
> 时间：2012-08-05T10:58:12.577
> 
> 标签：twitter

给定一条推文，我需要获得前 100 个转发我的推文的用户。即：如果我的推文有 600 条转发，我需要前 100 人的用户 ID 才能这样做。不是最新的 100 人。有一个 API 调用来查找最新的 100 人，但是有没有办法扭转这种情况并获得前 100 人？或者有没有办法绕过 100 个用户限制并选择所有用户？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T22:16:26.543

根据 Twitter 的开发文档，[status/retweets](https://dev.twitter.com/docs/api/1.1/get/statuses/retweets/%3aid "状态/转推")可以做你想做的事——“返回给定推文的最多 100 条第**一次**转推。”

# encoding - 编码俄语字母时的有缺陷的字符

> ID：11815848
> 
> 赞同：0
> 
> 时间：2012-08-05T10:58:12.623
> 
> 标签：encoding, utf-8, json

我正在向服务器查询一些信息（以 JSON 形式返回），尤其是名称列表，其中一个名称返回包含奇怪的字符：

> ÐÑÑ¼Ð°ÑšÐ° ÐœÐ°Ñ,ÐμÑ~Ð¸Ñ›</p>

应该是这样的：

> Немања Матејић

我尝试了以下方法：

*   从字符串中删除 BOM（字节顺序标记）（否则 PHP 不会解码 JSON），然后使用解码它`json_decode`并直接获取名称并将其插入到我的 UTF8 编码的 MySQL 数据库中。
*   使用带有 UTF8 排序规则的字段。

...无济于事-数据库中的值仍然存在缺陷。

如何解决这个问题？

**编辑：**

跑步`SHOW VARIABLES LIKE '%character%'`回报

```
character_set_client    utf8
character_set_connection    utf8
character_set_database  utf8
character_set_filesystem    binary
character_set_results   utf8
character_set_server    latin1
character_set_system    utf8
character_sets_dir  /data/mysql/fuentez/share/mysql/charsets/ 
```

可能是因为 character_set_server 是 latin1 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T11:07:10.987

您将数据库中的数据存储为[latin1](http://en.wikipedia.org/wiki/ISO/IEC_8859-1)而不是 UTF-8。

例如，`Ðµ`编码为 latin1 的字符串变成 `0xd0 0xb5`了西里尔字母的 UTF-8 编码`е`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T12:29:20.063

这可能是一种方便的使用俄罗斯符号的 json 格式：

新的 json_decode 函数

```
 <?php
    function json_encode_my($value) 
    {
        if (is_int($value)) {
            return (string)$value;   
        } elseif (is_string($value)) {
            $value = str_replace(array('\\', '/', '"', "\r", "\n", "\b", "\f", "\t"), 
                                 array('\\\\', '\/', '\"', '\r', '\n', '\b', '\f', '\t'), $value);
            $convmap = array(0x80, 0xFFFF, 0, 0xFFFF);
            $result = "";
            for ($i = mb_strlen($value) - 1; $i >= 0; $i--) {
                $mb_char = mb_substr($value, $i, 1);
                if (mb_ereg("&#(\\d+);", mb_encode_numericentity($mb_char, $convmap, "UTF-8"), $match)) {
                    $result = sprintf("\\u%04x", $match[1]) . $result;
                } else {
                    $result = $mb_char . $result;
                }
            }
            return '"' . $result . '"';                
        } elseif (is_float($value)) {
            return str_replace(",", ".", $value);         
        } elseif (is_null($value)) {
            return 'null';
        } elseif (is_bool($value)) {
            return $value ? 'true' : 'false';
        } elseif (is_array($value)) {
            $with_keys = false;
            $n = count($value);
            for ($i = 0, reset($value); $i < $n; $i++, next($value)) {
                        if (key($value) !== $i) {
                  $with_keys = true;
                  break;
                        }
            }
        } elseif (is_object($value)) {
            $with_keys = true;
        } else {
            return '';
        }
        $result = array();
        if ($with_keys) {
            foreach ($value as $key => $v) {
                $result[] = json_encode((string)$key) . ':' . json_encode($v);    
            }
            return '{' . implode(',', $result) . '}';                
        } else {
            foreach ($value as $key => $v) {
                $result[] = json_encode($v);    
            }
            return '[' . implode(',', $result) . ']';
        }

}
?> 
```

# cron - PHP 脚本无法为多站点替换 WordPress cron

> ID：11815851
> 
> 赞同：7
> 
> 时间：2012-08-05T10:58:42.683
> 
> 标签：cron, wordpress

我正在尝试用我的多站点的服务器 cron 替换 WordPress cron。看来我必须为每个站点添加一个 cron 条目，这可能是管理方面的噩梦。相反，我想运行一个为每个子站点调用 cron 的 cron 作业。下面是一个插件脚本，但出现错误 500。错误消息具有误导性且不正确，因为它说明了有关未安装 ffmpeg 的内容（没有其他错误消息）。有人可以帮我纠正这个吗？该插件在 GitHub (https://github.com/chibani/wp_multisite_cron) 中，但我认为这会为社区提供一个很棒的插件。谢谢你的帮助！

```
register_activation_hook(__FILE__, array('wp_multisite_cron','plugin_activation'));
add_action('init', array('wp_multisite_cron', 'init'));

class wp_multisite_cron{

    const LANG = 'wp_multisite_cron';
    const LANG_DIR = '/lang/';

    /**
     * 
     * Plugin activation (sets default parameters)
     */
    public static function plugin_activation(){
        if(!self::get_option('concurrent_crons'))
            self::update_option('concurrent_crons', 100);
    }

    /**
     * 
     * The main 'loader'
     */
    public static function init() {

        //Setup the translation
        load_plugin_textdomain(self::LANG, false, dirname(plugin_basename( __FILE__ ) ) . self::LANG_DIR);

        //The multisite cron action     
        add_action('wp_ajax_wp_multisite_cron_call', array('wp_multisite_cron','cron_call'));
        add_action('wp_ajax_nopriv_wp_multisite_cron_call', array('wp_multisite_cron','cron_call'));

        // admin actions and hooks
        if (is_admin()) {
            self::admin_hooks();
        }
    }

    /**
     * 
     * The admin hooks
     */
    public static function admin_hooks(){
        //Setting menu
        add_action('admin_menu', array('wp_multisite_cron', 'admin_menu'));
        if(is_network_admin() && self::is_ready()){
            add_action('network_admin_menu', array('wp_multisite_cron', 'network_admin_menu'));
        }
    }

    /**
     * 
     * Set up the admin menu(s)
     */
    public static function admin_menu(){
        add_options_page("WordPress multisite cron, information page", "WP multisite cron", 'manage_options', 'wp_multisite_cron_settings', array('wp_multisite_cron', "admin_settings"));
    }

    /**
     * 
     * Set up the admin menu(s)
     */
    public static function network_admin_menu(){
        add_submenu_page("settings.php","WordPress multisite cron, information page", "WP multisite cron", 'manage_options', 'wp_multisite_cron_settings', array('wp_multisite_cron', "admin_settings"));
    }

    /**
     * 
     * The admin settings page
     */
    public static function admin_settings(){
        ?>
        <div class="wrap">
            <div id="icon-options-general" class="icon32">
                <br />
            </div>
            <h2>WordPress multisite cron</h2>

            <?php if (isset($_POST['wp_multisite_cron']) && !empty($_POST['wp_multisite_cron'])) :

                if (isset($_POST['_wpnonce']) && wp_verify_nonce( $_POST['_wpnonce'], plugin_basename( __FILE__ ) )) :
                    self::delete_option('concurrent_crons');

                    foreach($_POST['wp_multisite_cron'] as $option_name=>$option_value){
                        self::update_option($option_name, $option_value);
                    }
                ?>
                    <div id="setting-error-settings_updated" class="updated settings-error">
                        <p>
                            <strong><?php _e('Settings saved.')?></strong>
                        </p>
                    </div>
                <?php else: ?>
                    <div id="message" class="error fade">
                        <p><?php _e('Unable to update settings.',self::LANG)?></p>
                    </div>
                <?php endif;?>
            <?php endif;?>

            <?php if(!is_multisite()):?>
                <div class="tool-box error">
                    <h3><?php _e('Multisite',self::LANG) ?></h3>
                    <p><?php _e('Your WordPress installation is not configured as multisite',self::LANG) ?>.</p>
                    <p><?php _e("Read the WordPress' documentation about multisite to learn how to set up multisite",self::LANG)?> : <a href="http://codex.wordpress.org/Create_A_Network" target="_blank"><?php _e('here',self::LANG)?></a></p>
                </div>
            <?php endif;?>

            <?php if(!defined('DISABLE_WP_CRON') || !DISABLE_WP_CRON ):?>
                <div class="tool-box error">
                    <h3><?php _e('WordPress default cron system',self::LANG) ?></h3>
                    <p><?php _e('You must disable the WordPress cron system, to use this extension',self::LANG) ?>.</p>
                    <p><?php _e('Add the following code in your wp-config.php',self::LANG) ?> :</p>
                    <p>
                        <code>define('DISABLE_WP_CRON', true);</code>
                    </p>
                </div>
            <?php endif;?>

            <form action="" method="post">
                <table class="form-table">
                    <tbody>
                        <tr valign="top">
                            <th scope="row">
                                <label for="concurrent_crons"><?php _e('Concurrent crons',self::LANG) ?></label><br />
                                <em><?php _e("Lower it if some of your sites' cron don't run",self::LANG)?></em>
                            </th>
                            <td>
                                <input type="text" name="wp_multisite_cron[concurrent_crons]" id="concurrent_crons" value="<?php echo self::get_option('concurrent_crons') ?>" />
                            </td>
                        </tr>
                    </tbody>
                </table>
                <p class="submit">
                    <input class="button-primary" name="plugin_ok" value="<?php _e('Save settings',self::LANG) ?>" type="submit" />
                </p>
                <?php wp_nonce_field( plugin_basename( __FILE__ ), '_wpnonce' );?>
            </form>

            <?php if(self::is_ready()): ?>
                <div class="tool-box">
                    <h3><?php _e('Set-up WordPress multisite cron',self::LANG) ?></h3>
                    <p><?php _e('Add the following line in your crontab',self::LANG)?> :</p>
                    <p>
                        <code>*/15 *<?php echo "\t" ?>* * * www-data /usr/bin/wget -qO- <?php echo admin_url('admin-ajax.php','http').'?action=wp_multisite_cron_call' ?></code>
                    </p>
                </div>
            <?php endif;?>
        </div>

        <?php 
    }

    /**
     * 
     * Check wether the config is ok to run real crons
     */
    public static function is_ready(){
        return (is_multisite() && defined('DISABLE_WP_CRON') && DISABLE_WP_CRON);
    }

    /**
     * 
     * The real cron
     */
    public static function cron_call(){

        //load the blogs id
        $blogs = self::get_blogs_id();
        if(count($blogs)){
            $mh = curl_multi_init();

            $length = self::get_option('concurrent_crons');
            $offset = 0;

            //Cut the 
            while($blogs_slice = array_slice($blogs,$offset,$length)){

                $offset += $length;

                foreach($blogs_slice as &$blog_id){
                    switch_to_blog($blog_id);
                    $cron_url = site_url().'/wp-cron.php?doing_wp_cron';

                    //Add the url to the stack
                    $chs[$blog_id]=curl_init();
                    curl_setopt($chs[$blog_id], CURLOPT_URL, $cron_url);
                    curl_setopt($chs[$blog_id], CURLOPT_HEADER, 0);
                    curl_multi_add_handle($mh, $ch);
                }

                //Launch :)
                $running = null;
                do{
                    curl_multi_exec($mh, $still_running);
                }while($still_running > 0);

                curl_multi_close($mh);
            }
        }
        die();
    }

    /**
     * 
     * Get the blog_id for each active blog in the multisite
     * @return array
     */
    public static function get_blogs_id(){
        global $wpdb;

        //Get the blogs' ids for blogs that are public and active
        $blogs = $wpdb->get_col('SELECT blog_id FROM '.$wpdb->blogs.' WHERE public=1 AND deleted=0');
        return $blogs;
    }

    /**
     * 
     * Get a plugin's specific option
     * @param string $option_name
     */
    public static function get_option($option_name){
        return get_option('wp_multisite_cron_'.$option_name);
    }

    /**
     * 
     * Set a plugin's specific option
     * @param unknown_type $option_name
     */
    public static function update_option($option_name,$option_value){
        return update_option('wp_multisite_cron_'.$option_name,$option_value);
    }

    /**
     * 
     * Delete a plugin's specific option
     * @param string $option_name
     */
    public static function delete_option($option_name){
        return delete_option('wp_multisite_cron_'.$option_name);
    }

    /**
     * 
     * get the plugin's path url
     */
    public static function get_plugin_url(){
        return get_bloginfo('url') . '/' . PLUGINDIR . '/' . dirname(plugin_basename(__FILE__));
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T05:58:55.530

在您的 cron_call 函数中，大约第 200 行，您有这个块：

```
//Add the url to the stack
$chs[$blog_id]=curl_init();
curl_setopt($chs[$blog_id], CURLOPT_URL, $cron_url);
curl_setopt($chs[$blog_id], CURLOPT_HEADER, 0);
curl_multi_add_handle($mh, $ch); 
```

所以首先你在`$chs`数组中初始化你的 curl 处理程序。然后，您尝试将`$ch`变量添加到您的多处理程序，而不是使用这些值，我认为这是 null 。

通过正确的错误报告设置并检查 的结果`curl_multi_add_handle`，您可能会看到添加句柄操作失败。

从[php 手册](http://www.php.net/manual/en/function.curl-multi-add-handle.php)：

```
int curl_multi_add_handle ( resource $mh , resource $ch ) 
```

> 返回值
> 
> 成功时返回 0，或 CURLM_XXX 错误代码之一。

编辑：也许我对解决方案不够清楚，但你需要更换

```
curl_multi_add_handle($mh, $ch); 
```

和

```
curl_multi_add_handle($mh, $chs[$blog_id]); 
```

# python - 如何让我的 TCP 服务器永远运行？

> ID：11815852
> 
> 赞同：6
> 
> 时间：2012-08-05T10:58:48.920
> 
> 标签：python, sockets, tcp

我有从文档中获得的这段代码：

```
#!/usr/bin/env python

import socket

TCP_IP = '192.168.1.66'
TCP_PORT = 40000
BUFFER_SIZE = 20  # Normally 1024, but we want fast response

s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
s.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR, 1)
s.bind((TCP_IP, TCP_PORT))
s.listen(1)

conn, addr = s.accept()

print 'Connection address:', addr

while True:
    data = conn.recv(BUFFER_SIZE)
    if not data: break
    print "received data:", data
    conn.send(data)

conn.close() 
```

但是每次我断开连接时它都会关闭，我如何让它永远运行？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-05T11:06:30.027

尝试更改线路

```
if not data: break 
```

至

```
if not data: continue 
```

这种方式不是退出循环，而是等待更多数据

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-05T11:25:16.170

您需要为`accept()`要处理的每个连接调用一次。到第一个近似值：

```
s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
s.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR, 1)
s.bind((TCP_IP, TCP_PORT))
s.listen(1)

while True:    
    conn, addr = s.accept()

    print 'Connection address:', addr

    while True:
        data = conn.recv(BUFFER_SIZE)
        if not data: break
        print "received data:", data
        conn.send(data)

    conn.close() 
```

# asp.net - 在 webgrid 链接中使用图像

> ID：11815854
> 
> 赞同：1
> 
> 时间：2012-08-05T10:59:30.703
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, razor, webgrid

如何将此 webgrid 中的操作链接更改为图像？ps：我希望所有图片都出现在同一列

```
@{
var grid = new WebGrid(Model, canPage:true ,canSort:true, rowsPerPage :6);
grid.Pager(WebGridPagerModes.NextPrevious);
    @grid.GetHtml(tableStyle: "webGrid", htmlAttributes: new { id = "datatable" },
    headerStyle: "Header",
    alternatingRowStyle: "alt",
    columns: grid.Columns(grid.Column(header: "", format: (item) =>
 new HtmlString(
       Html.ActionLink("Détails", "Details", new { id = item.id_client }).ToString() +
       Html.ActionLink("Modifier", "Edit", new { id = item.id_client }).ToString() +
                Html.ActionLink("Supprimer", "Delete", new { id = item.id_client }).ToString()
 ), style: "actions"),
    grid.Column("Nom"),
    grid.Column("Prenom", "Prénom"),
    grid.Column("Email")));

                    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T13:38:32.547

一种方法是为超链接添加 css 以获得这样的背景图像

**例子：**

```
a.bgImg
{
    background: url(../Images/background.gif)
} 
```

# c# - LINQ-to-SQL 更新问题

> ID：11815856
> 
> 赞同：0
> 
> 时间：2012-08-05T10:59:59.767
> 
> 标签：c#, .net, linq, linq-to-sql

我正在尝试更新标签表中的标签列表，如下所示：

```
List<Tag> tagList = GetUnitTagList(unitId);

        foreach (Tag tag in tagList)
        {
            tag.count = tag.count - 1;
        }

        db.SubmitChanges(); 
```

这是 GetUnitTagList() 方法：

```
public static List<Tag> GetUnitTagList(int unitId)
{
    DataClassesDataContext db = new DataClassesDataContext();

    var tags = from x in db.UnitTags where x.UnitID == unitId select x.Tag;

    return tags.ToList();
} 
```

但是我试图更新的值没有得到更新。

但是，以下代码可以正常工作：

```
var tags = from x in db.UnitTags where x.UnitID == unitId select x.Tag;

        foreach (Tag tag in tags)
        {
            tag.count = tag.count - 1;
        }

        db.SubmitChanges(); 
```

看起来如果我得到一个 Tag 对象的集合，我们返回一个方法，那么我就无法更新记录。我试图调试，但没有通过异常！

那么，为什么更新记录的第一种方法不起作用，而第二种方法却没有问题呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-05T11:05:19.747

您正在从一个 dbContext 更新实体（在 中创建`GetUnitTagList`）并调用`SubmitChanges`另一个（在您没有向我们展示的地方创建）。

在您的最后一个示例中， dbcontext 显然是一回事。

# network-programming - Websockets - 将开放连接传递给另一台服务器？

> ID：11815858
> 
> 赞同：1
> 
> 时间：2012-08-05T11:00:33.853
> 
> 标签：network-programming, websocket, scalability

情况：两个 Web 服务器和一个浏览器客户端。客户端与服务器 A 有一个开放的 websockets 连接。服务器 A 决定该客户端应该由服务器 B 提供服务。

**我想知道是否有任何既定的技术来执行这种移交？**

如果这对我的客户端代码尽可能不可见，那就太好了——但我还没有遇到任何允许这样做的功能。

到目前为止，我想出的最好的是服务器 A 发送“你应该真正处理服务器 X”消息，客户端关闭 WS 会话，然后发送一些 http 请求，该请求将被路由到正确的服务器，并升级到 WS。我可以看到负载平衡器的存在使这变得复杂。

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T11:21:02.443

从编程的角度来看，套接字连接被视为打开的文件句柄，这就是您要传递的内容。为此，我会查看“[在不同进程之间传递文件描述符的可移植方式](https://stackoverflow.com/questions/909064/portable-way-to-pass-file-descriptor-between-different-processes)”这个问题，了解一些方法。

但是，如果您不是在编写自己的 Web 服务器，并且正在为 Apache 等寻找现成的方法，那么这可能对您没有多大帮助。

# windows - Windows START 命令，绑定 [Applinks]

> ID：11815860
> 
> 赞同：0
> 
> 时间：2012-08-05T11:00:38.017
> 
> 标签：windows, command-line, registry

在测试期间，我们希望使用似乎适用于某些应用程序的小启动命令来启动应用程序。

> START chrome //-启动谷歌浏览器

这也适用于 Firefox、记事本和许多其他应用程序。但我们的问题是它似乎不适用于所有机器。'START chrome' 适用于我们 80% 的克隆测试机器，但不适用于其他机器。

当您传递例如“chrome”时，START 命令如何工作？它在哪里查找路径？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T11:20:40.667

找到了，路径在这里：HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\App Paths

列出所有这些： reg query "HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\App Paths" /s

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T11:10:52.410

我不完全理解你的问题。如果您在谈论批处理文件

你可以看看这里[http://ss64.com/nt/start.html](http://ss64.com/nt/start.html)

它查找 Windows 路径变量 %PATH% ，该变量应该具有可执行文件所在的路径。

希望这可以帮助

# php - mysql 获得结果的最佳方法

> ID：11815861
> 
> 赞同：1
> 
> 时间：2012-08-05T11:00:39.160
> 
> 标签：php, mysql, performance

这是我的桌子

**注意** 此表仅作为示例

**帖子**

```
++++++++++++++++++++++++++++++++++++++++
+   id  |title | desc  |  uid  |status |
++++++++++++++++++++++++++++++++++++++++
+   1   |  a   | aaaa  |   1   |   1   |
++++++++++++++++++++++++++++++++++++++++
+   2   |  b   | bbbb  |   1   |   1   |
++++++++++++++++++++++++++++++++++++++++
+   3   |  c   | cccc  |   2   |   1   |
++++++++++++++++++++++++++++++++++++++++ 
```

**猫**

```
+++++++++++++++++++++++++++++++++
+  id   | name |parent | status |
+++++++++++++++++++++++++++++++++
+  1    | cat1 |   0   |   1    |
+++++++++++++++++++++++++++++++++
+  2    | cat2 |   0   |   1    |
+++++++++++++++++++++++++++++++++ 
```

**标签**

```
+++++++++++++++++++++++++
+  id   | name  | title |
+++++++++++++++++++++++++
+  1    | tag1  |ttitle |
+++++++++++++++++++++++++
+  2    | tag2  |title2 |
+++++++++++++++++++++++++ 
```

**链接数据**

链接为一艘 2 多关系船

链接名称 postid cat_or_tag_id

```
+++++++++++++++++++++++++++++
+ name    |  r1         | r2|
+++++++++++++++++++++++++++++
+ cat     |  1          | 1 |
+++++++++++++++++++++++++++++
+ cat     |  1          | 2 |
+++++++++++++++++++++++++++++
+ tag     |  1          | 2 |
+++++++++++++++++++++++++++++ 
```

我想获得带有猫和标签的帖子

最好的方法是什么

**我现在知道的唯一方法** 是获取帖子，然后 foreach 帖子获取它的猫和标签

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-05T11:15:49.660

```
SELECT Posts.*, GROUP_CONCAT(Cats.name) AS Cats, GROUP_CONCAT(Tags.name) AS Tags
FROM   Posts
  LEFT JOIN Linked_data ON Linked_data.r1 = Posts.id
  LEFT JOIN Cats        ON Linked_data.r2 =  Cats.id AND Linked_data.name = 'cat'
  LEFT JOIN Tags        ON Linked_data.r2 =  Tags.id AND Linked_data.name = 'tag'
GROUP BY Posts.id 
```

在[sqlfiddle](http://sqlfiddle.com/#!2/225fc/1/0)上查看。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T11:16:29.373

我希望这有帮助

```
select p.title, c.name , t.name  from posts p
inner join (select group_concat(c1.name), c1.id  from cats c1 group by c1.id ) c on p.id = c.id
inner join (select group_concat(t1.name), t1.id  from tags t1 group by t1.id ) t on p.id = t.id 
```

# php - 回显整个表而不使用列名作为参考

> ID：11815864
> 
> 赞同：1
> 
> 时间：2012-08-05T11:00:58.550
> 
> 标签：php, mysql

嗨，我真的希望有人可以提供帮助，

我有一个包含一行和多个列名的表，其中一个是 id，我想在不使用列名作为参考的情况下回显整个表，因为这些可能会改变，我不想进入并更改如果列被添加或删除，则代码。即我想`SELECT * from table WHERE id=1`回显整个表，不包括 id 列或任何列标题。

我有点难过，不知道在哪里寻找正确的答案，希望有人能指出我正确的方向。

在此先感谢您整个周末都在努力解决这个问题。

对于任何想要我的解决方案的人来说，Brill 感谢所有的帮助：

```
 $sql = "SELECT * from nav WHERE id='1'";
    $result = mysql_query($sql);
    $row = mysql_fetch_row($result);
    $i=1;

    while($i<=500)
    {
    echo $row[$i]  . "<br />";
    $i++;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T11:04:17.983

使用`mysqli_result::fetch_row`而不是，`mysqli_result::fetch_array`因为它将返回一个索引值数组。

例子：

```
$result  = $mysqli->query($query)
$columns = $mysqli->field_count;
while($row = $result->fetch_row()) {
    for($i = 5; $i < $columns; ++$i)
      echo $row[$i] . ", ";
    echo "\n";
} 
```

编辑：根据评论中的要求更新为从第 5 列开始

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T11:31:07.977

`SELECT id AS no_title, column1 AS ... FROM table WHERE id=1`

我不明白你为什么要这样做，但你总是可以选择一个别名，`AS " "`虽然我还没有尝试过......

# android - 从 Android 导出 Excel 文件或 Google 文档

> ID：11815866
> 
> 赞同：0
> 
> 时间：2012-08-05T11:01:16.970
> 
> 标签：android, excel, document

从 Android 导出 Excel 文件或 Google 文档的任何想法请我需要帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T12:20:51.067

我在我的一个应用程序中使用 jexcelapi，效果很好 [http://jexcelapi.sourceforge.net/](http://jexcelapi.sourceforge.net/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T23:38:28.823

我使用自定义活动从用户选择中获取文件路径：

```
 filePath = returnIntent.getStringExtra(FileDialog.RESULT_PATH); 
```

当该活动返回时，我从意图中获取路径

然后，当我准备好导出时，我用它来告诉我选择将它发送到哪里：

```
 intent.putExtra(Intent.EXTRA_STREAM, Uri.parse ("file://" + filePath));
 startActivity(Intent.createChooser(intent, text)); 
```

# java - 删除 jsf spring hibernate primefaces 集成中的一行

> ID：11815870
> 
> 赞同：1
> 
> 时间：2012-08-05T11:02:28.403
> 
> 标签：java, spring, hibernate, jakarta-ee, primefaces

我在我的项目中使用 jsf hibernate spring primfaces 的集成。我想删除我的 primefaces 数据表中的行。但我不确定我的托管 bean 中的删除方法。当我想删除我有以下错误。请帮我编写正确的 deletePersonel 方法。

```
/personel.xhtml @95,74 actionListener="#{personelMB.deletePersonel()}": java.lang.IndexOutOfBoundsException: Index: 0, Size: 0 
```

个人资料.java

```
@Entity
@Table(name="TBLPERSONEL")
public class Personel {
@Id
@Column(name="PERSONEL_ID")
private int personel_id;
@Column(name="PNAME")
private String pname;
@Column(name="PFAMILY")
private String pfamily;
@Column(name="PADDRESS")
private String paddress;
@Column(name="PPHONE")
private String pphone;
@OneToOne
@PrimaryKeyJoinColumn
private Manager manager;
@OneToMany(mappedBy="personel")
private Set<Stufftransfer> stufftransfers;
public Personel(){

}
//getter and setter 
```

个人道

```
public class PersonelDao implements IPersonelDao {
private SessionFactory sessionFactory;

public SessionFactory getSessionFactory() {
    return sessionFactory;
}

public void setSessionFactory(SessionFactory sessionFactory) {
    this.sessionFactory = sessionFactory;
}
public void deletePersonel(Personel personel) {
    getSessionFactory().getCurrentSession().delete(personel);

} 
```

人事服务

```
@Transactional(readOnly=true)
public class PersonelService implements IPersonelService{
    IPersonelDao personeldao;

    public IPersonelDao getPersoneldao() {
        return personeldao;
    }

    public void setPersoneldao(IPersonelDao personeldao) {
        this.personeldao = personeldao;
    }
@Transactional(readOnly=false)
    @Override
    public void deletePersonel(Personel personel) {
        getPersoneldao().deletePersonel(personel);

    } 
```

个人豆

```
@ManagedBean(name="personelMB")
@SessionScoped
public class PersonelBean implements Serializable{
    private static final long serialVersionUID = 1L;

    @ManagedProperty(value="#{PersonelService}")
    IPersonelService personelservice;
    List<Personel> personelList;

    private int personel_id;
    private String pname;
    private String pfamily;
    private String paddress;
    private String pphone;
public IPersonelService getPersonelservice() {
        return personelservice;
    }
    public void setPersonelservice(IPersonelService personelservice) {
        this.personelservice = personelservice;
    }
    public List<Personel> getPersonelList() {
        personelList=new ArrayList<Personel>();
        personelList.addAll(getPersonelservice().getPersonels());
        return personelList;
    }
    public void setPersonelList(List<Personel> personelList) {
        this.personelList = personelList;
    }
public void addPersonel(){
        Personel personel=new Personel();
        personel.setPaddress(getPaddress());
        personel.setPersonel_id(getPersonel_id());
        personel.setPfamily(getPfamily());
        personel.setPname(getPname());
        personel.setPphone(getPphone());
        getPersonelservice().addPersonel(personel);
    }
    public void deletePersonel(){
        Personel personel=(Personel)personelservice.getPersonelId(personel_id);
getPersonelservice().deletePersonel(personel);
    }
//getter and setter 
```

个人资料.xhtml

```
<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html dir="rtl" 
xmlns="http://www.w3.org/1999/xhtml"
xmlns:h="http://java.sun.com/jsf/html"
xmlns:p="http://primefaces.org/ui"
 xmlns:f="http://java.sun.com/jsf/core"
 xmlns:fn="http://java.sun.com/jsp/jstl/functions"
>
<h:head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>اطلاعات پرسنلی</title>
</h:head>
<h:body>
<h1>اضافه کردن پرسنل جدید</h1>
        <h:form>

            <h:panelGrid columns="4" >
              شماره پرسنلی : 
                <h:inputText id="id" value="#{personelMB.personel_id}" 
                    size="20" required="true"
                    label="id" >
                </h:inputText>
                <br></br>
                نام : 
                <h:inputText id="name" value="#{personelMB.pname}" 
                    size="20" required="true"
                    label="Name" >
                </h:inputText>

                 نام خانوادگی: 
                <h:inputText id="family" value="#{personelMB.pfamily}" 
                    size="20" required="true"
                    label="family" >
                </h:inputText> 

                آدرس : 
                <h:inputTextarea id="address" value="#{personelMB.paddress}" 
                    cols="30" rows="10" required="true"
                    label="Address" >
                </h:inputTextarea>

          تلفن:  
                <h:inputText id="tel" value="#{personelMB.pphone}" 
                    size="20" required="true"
                    label="tel" >
                </h:inputText> 
            </h:panelGrid>

            <h:commandButton value="درج اطلاعات" action="#{personelMB.addPersonel()}" />

        </h:form>
 <h2>مشاهده اطلاعات پرسنل</h2>  
 <h:form prependId="false">  

    <p:dataTable id="dataTable" var="personel" value="#{personelMB.personelList}" rowKey="#{personelMB.personel_id}">  

        <f:facet name="header">  
            اطلاعات پرسنل 
        </f:facet>  

        <p:column>  
            <f:facet name="header">  
               شماره پرسنلی  
            </f:facet>  

            <h:outputText value="#{personel.personel_id}" />  

            <f:facet name="footer">  
                کدملی 
            </f:facet>  
        </p:column>  

        <p:column headerText="نام">  
            <h:outputText value="#{personel.pname}" />  
        </p:column>  

        <p:column headerText="نام خانوادگی">  
            <h:outputText value="#{personel.pfamily}" />  
        </p:column>  

        <p:column headerText="آدرس">  
            <h:outputText value="#{personel.paddress}" />  
        </p:column>  
   <p:column headerText="تلفن">  
            <h:outputText value="#{personel.pphone}" />  
        </p:column>
        <p:column>
      <f:facet name="حذف">
         <h:outputText value="" />
      </f:facet>
      <p:commandButton icon="ui-icon-close" title="حذف"
                       actionListener="#{personelMB.deletePersonel()}" />
   </p:column>
        <f:facet name="footer">  
            تعداد رکورد#{fn:length(personelMB.getPersonelList())} میباشد.  
        </f:facet>  

    </p:dataTable>  

</h:form>  

</h:body>
</html> 
```

请帮助我在我的 PersonelBean.java 中编写正确的 deletePersonel。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T04:59:03.420

像这样更改您的托管 bean 删除方法；

```
 public void deletePersonel(int personel_id){
       Personel personel=(Personel)personelservice.getPersonelId(personel_id);
       getPersonelservice().deletePersonel(personel);
   } 
```

并像这样改变你的xhtml；

```
 <p:commandButton icon="ui-icon-close" title="حذف"
                   actionListener="#{personelMB.deletePersonel(personel.personel_id)}" /> 
```

像这样向托管 bean 添加刷新方法；

```
 public String deleteAction(Personel personel) {
    personelList.remove(personel);
    return null;
  } 
```

并像这样编辑您的 p:commandButton；

```
 <p:commandButton icon="ui-icon-close" title="حذف"
                   actionListener="#{personelMB.deletePersonel(personel.personel_id)" action="#{personelMB.delectAction(personel)}"/> 
```

# python - python 2.7的记忆库

> ID：11815873
> 
> 赞同：68
> 
> 时间：2012-08-05T11:03:06.353
> 
> 标签：python, python-2.7, memoization

我看到 python 3.2 在 functools 库中具有 memoization 作为装饰器。 [http://docs.python.org/py3k/library/functools.html#functools.lru_cache](http://docs.python.org/py3k/library/functools.html#functools.lru_cache)

不幸的是，它还没有向后移植到 2.7。是否有任何特定原因导致它在 2.7 中不可用？是否有任何第三方库提供相同的功能或者我应该自己编写？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-08-08T09:43:01.803

> 是否有任何特定原因导致它在 2.7 中不可用？

[@Nirk](https://stackoverflow.com/a/11854956/63011)已经提供了原因：不幸的是，2.x 行仅接收错误修复，并且仅为 3.x 开发了新功能。

> 是否有任何第三方库提供相同的功能？

[`repoze.lru`](http://pypi.python.org/pypi/repoze.lru/)是 Python 2.6、Python 2.7 和 Python 3.2 的 LRU 缓存实现。

[GitHub 上](https://github.com/repoze/repoze.lru)提供了文档和源代码。

简单用法：

```
from repoze.lru import lru_cache

@lru_cache(maxsize=500)
def fib(n):
    if n < 2:
        return n
    return fib(n-1) + fib(n-2) 
```

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2012-09-24T10:04:27.477

*Python 3.2.3*`functools`中的模块有一个向后移植，可与*Python 2.7*和*PyPy*一起使用：[functools32](http://pypi.python.org/pypi/functools32)。

 ***它包括`lru_cache`装饰器。

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2013-09-10T15:46:19.393

我处于同样的情况，被迫自己实施。python 3.x 实现还有一些其他问题：

*   主要问题是没有为每个实例启用单独的缓存（如果被缓存的函数是实例方法）。这意味着如果我将缓存的最大大小设置为 100，并且我有 100 个实例，如果所有实例都同样活跃 - 缓存将实际上什么都不做。
    *   此外，如果您运行 clear_cache - 它会清除所有实例的缓存。
*   第二个主要的事情是，我想要一个超时功能来每隔 X 秒清除一次缓存。

### python 2.7 的函数 lru_cache 实现：

```
import time
import functools
import collections

def lru_cache(maxsize = 255, timeout = None):
    """lru_cache(maxsize = 255, timeout = None) --> returns a decorator which returns an instance (a descriptor).

        Purpose         - This decorator factory will wrap a function / instance method and will supply a caching mechanism to the function.
                            For every given input params it will store the result in a queue of maxsize size, and will return a cached ret_val
                            if the same parameters are passed.

        Params          - maxsize - int, the cache size limit, anything added above that will delete the first values enterred (FIFO).
                            This size is per instance, thus 1000 instances with maxsize of 255, will contain at max 255K elements.
                        - timeout - int / float / None, every n seconds the cache is deleted, regardless of usage. If None - cache will never be refreshed.

        Notes           - If an instance method is wrapped, each instance will have it's own cache and it's own timeout.
                        - The wrapped function will have a cache_clear variable inserted into it and may be called to clear it's specific cache.
                        - The wrapped function will maintain the original function's docstring and name (wraps)
                        - The type of the wrapped function will no longer be that of a function but either an instance of _LRU_Cache_class or a functool.partial type.

        On Error        - No error handling is done, in case an exception is raised - it will permeate up.
    """

    class _LRU_Cache_class(object):
        def __init__(self, input_func, max_size, timeout):
            self._input_func        = input_func
            self._max_size          = max_size
            self._timeout           = timeout

            # This will store the cache for this function, format - {caller1 : [OrderedDict1, last_refresh_time1], caller2 : [OrderedDict2, last_refresh_time2]}.
            #   In case of an instance method - the caller is the instance, in case called from a regular function - the caller is None.
            self._caches_dict        = {}

        def cache_clear(self, caller = None):
            # Remove the cache for the caller, only if exists:
            if caller in self._caches_dict:
                del self._caches_dict[caller]
                self._caches_dict[caller] = [collections.OrderedDict(), time.time()]

        def __get__(self, obj, objtype):
            """ Called for instance methods """
            return_func = functools.partial(self._cache_wrapper, obj)
            return_func.cache_clear = functools.partial(self.cache_clear, obj)
            # Return the wrapped function and wraps it to maintain the docstring and the name of the original function:
            return functools.wraps(self._input_func)(return_func)

        def __call__(self, *args, **kwargs):
            """ Called for regular functions """
            return self._cache_wrapper(None, *args, **kwargs)
        # Set the cache_clear function in the __call__ operator:
        __call__.cache_clear = cache_clear

        def _cache_wrapper(self, caller, *args, **kwargs):
            # Create a unique key including the types (in order to differentiate between 1 and '1'):
            kwargs_key = "".join(map(lambda x : str(x) + str(type(kwargs[x])) + str(kwargs[x]), sorted(kwargs)))
            key = "".join(map(lambda x : str(type(x)) + str(x) , args)) + kwargs_key

            # Check if caller exists, if not create one:
            if caller not in self._caches_dict:
                self._caches_dict[caller] = [collections.OrderedDict(), time.time()]
            else:
                # Validate in case the refresh time has passed:
                if self._timeout != None:
                    if time.time() - self._caches_dict[caller][1] > self._timeout:
                        self.cache_clear(caller)

            # Check if the key exists, if so - return it:
            cur_caller_cache_dict = self._caches_dict[caller][0]
            if key in cur_caller_cache_dict:
                return cur_caller_cache_dict[key]

            # Validate we didn't exceed the max_size:
            if len(cur_caller_cache_dict) >= self._max_size:
                # Delete the first item in the dict:
                cur_caller_cache_dict.popitem(False)

            # Call the function and store the data in the cache (call it with the caller in case it's an instance function - Ternary condition):
            cur_caller_cache_dict[key] = self._input_func(caller, *args, **kwargs) if caller != None else self._input_func(*args, **kwargs)
            return cur_caller_cache_dict[key]

    # Return the decorator wrapping the class (also wraps the instance to maintain the docstring and the name of the original function):
    return (lambda input_func : functools.wraps(input_func)(_LRU_Cache_class(input_func, maxsize, timeout))) 
```

### 单元测试代码：

```
#!/usr/bin/python
# -*- coding: utf-8 -*-
import time
import random
import unittest
import lru_cache

class Test_Decorators(unittest.TestCase):
    def test_decorator_lru_cache(self):
        class LRU_Test(object):
            """class"""
            def __init__(self):
                self.num = 0

            @lru_cache.lru_cache(maxsize = 10, timeout = 3)
            def test_method(self, num):
                """test_method_doc"""
                self.num += num
                return self.num

        @lru_cache.lru_cache(maxsize = 10, timeout = 3)
        def test_func(num):
            """test_func_doc"""
            return num

        @lru_cache.lru_cache(maxsize = 10, timeout = 3)
        def test_func_time(num):
            """test_func_time_doc"""
            return time.time()

        @lru_cache.lru_cache(maxsize = 10, timeout = None)
        def test_func_args(*args, **kwargs):
            return random.randint(1,10000000)

        # Init vars:
        c1 = LRU_Test()
        c2 = LRU_Test()
        m1 = c1.test_method
        m2 = c2.test_method
        f1 = test_func

        # Test basic caching functionality:
        self.assertEqual(m1(1), m1(1)) 
        self.assertEqual(c1.num, 1)     # c1.num now equals 1 - once cached, once real
        self.assertEqual(f1(1), f1(1))

        # Test caching is different between instances - once cached, once not cached:
        self.assertNotEqual(m1(2), m2(2))
        self.assertNotEqual(m1(2), m2(2))

        # Validate the cache_clear funcionality only on one instance:
        prev1 = m1(1)
        prev2 = m2(1)
        prev3 = f1(1)
        m1.cache_clear()
        self.assertNotEqual(m1(1), prev1)
        self.assertEqual(m2(1), prev2)
        self.assertEqual(f1(1), prev3)

        # Validate the docstring and the name are set correctly:
        self.assertEqual(m1.__doc__, "test_method_doc")
        self.assertEqual(f1.__doc__, "test_func_doc")
        self.assertEqual(m1.__name__, "test_method")
        self.assertEqual(f1.__name__, "test_func")

        # Test the limit of the cache, cache size is 10, fill 15 vars, the first 5 will be overwritten for each and the other 5 are untouched. Test that:
        c1.num = 0
        c2.num = 10
        m1.cache_clear()
        m2.cache_clear()
        f1.cache_clear()
        temp_list = map(lambda i : (test_func_time(i), m1(i), m2(i)), range(15))

        for i in range(5, 10):
            self.assertEqual(temp_list[i], (test_func_time(i), m1(i), m2(i)))
        for i in range(0, 5):
            self.assertNotEqual(temp_list[i], (test_func_time(i), m1(i), m2(i)))
        # With the last run the next 5 vars were overwritten, now it should have only 0..4 and 10..14:
        for i in range(5, 10):
            self.assertNotEqual(temp_list[i], (test_func_time(i), m1(i), m2(i)))

        # Test different vars don't collide:
        self.assertNotEqual(test_func_args(1), test_func_args('1'))
        self.assertNotEqual(test_func_args(1.0), test_func_args('1.0'))
        self.assertNotEqual(test_func_args(1.0), test_func_args(1))
        self.assertNotEqual(test_func_args(None), test_func_args('None'))
        self.assertEqual(test_func_args(test_func), test_func_args(test_func))
        self.assertEqual(test_func_args(LRU_Test), test_func_args(LRU_Test))
        self.assertEqual(test_func_args(object), test_func_args(object))
        self.assertNotEqual(test_func_args(1, num = 1), test_func_args(1, num = '1'))
        # Test the sorting of kwargs:
        self.assertEqual(test_func_args(1, aaa = 1, bbb = 2), test_func_args(1, bbb = 2, aaa = 1))
        self.assertNotEqual(test_func_args(1, aaa = '1', bbb = 2), test_func_args(1, bbb = 2, aaa = 1))

        # Sanity validation of values
        c1.num = 0
        c2.num = 10
        m1.cache_clear()
        m2.cache_clear()
        f1.cache_clear()
        self.assertEqual((f1(0), m1(0), m2(0)), (0, 0, 10))
        self.assertEqual((f1(0), m1(0), m2(0)), (0, 0, 10))
        self.assertEqual((f1(1), m1(1), m2(1)), (1, 1, 11))
        self.assertEqual((f1(2), m1(2), m2(2)), (2, 3, 13))
        self.assertEqual((f1(2), m1(2), m2(2)), (2, 3, 13))
        self.assertEqual((f1(3), m1(3), m2(3)), (3, 6, 16))
        self.assertEqual((f1(3), m1(3), m2(3)), (3, 6, 16))
        self.assertEqual((f1(4), m1(4), m2(4)), (4, 10, 20))
        self.assertEqual((f1(4), m1(4), m2(4)), (4, 10, 20))

        # Test timeout - sleep, it should refresh cache, and then check it was cleared:
        prev_time = test_func_time(0)
        self.assertEqual(test_func_time(0), prev_time)
        self.assertEqual(m1(4), 10)
        self.assertEqual(m2(4), 20)
        time.sleep(3.5)
        self.assertNotEqual(test_func_time(0), prev_time)
        self.assertNotEqual(m1(4), 10)
        self.assertNotEqual(m2(4), 20)

if __name__ == '__main__':
    unittest.main() 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-07T22:21:37.950

[http://www.python.org/download/releases/3.2.3/](http://www.python.org/download/releases/3.2.3/)

> 由于 Python 2.7 的最终版本，2.x 行将只接收错误修复，并且仅为 3.x 开发新功能。

Python 2.7 具有 3.1 的一些特性，但 lru_cache 是在 3.2 中添加的

如评论中所述，[http://code.activestate.com/recipes/578078-py26-and-py30-backport-of-python-33s-lru-cache/](http://code.activestate.com/recipes/578078-py26-and-py30-backport-of-python-33s-lru-cache/)是一个潜在的解决方案***

# jquery - jquery中div的设置间隔

> ID：11815875
> 
> 赞同：0
> 
> 时间：2012-08-05T11:03:26.723
> 
> 标签：jquery, html, image

这是我的 jquery prg。我已经完成了这项工作并正确地为图像设置了动画。这里第一个图像动画 2 秒并停止，第二个图像继续动画。在第四张图像动画后，我需要开始第一张图像动画。我想`anim()`无限次调用函数。请帮我

我的脚本在 jquery 中包含四个函数 showFirst、showSecond、showThird、showfour

这是anim函数以时间间隔调用四个函数

```
$(function anim() {

    $('div.f:not(:first)').hide(); // Hide all columns except the first
    $('div.s:not(:first)').hide(); // Hide all columns except the first
    $('div.c:not(:first)').hide(); // Hide all columns except the first
    $('div.d:not(:first)').hide(); // Hide all columns except the first
    // showFirst();

    var timesRun = 0;
    var interval = setInterval(function(){
        timesRun += 1;
        if(timesRun === 2){
            clearInterval(interval);

            var timesRun1= 0;
            var interval1 = setInterval(function(){
            timesRun1 += 1;
            if(timesRun1 === 2){
                clearInterval(interval1);

                var timesRun2 = 0;
                var interval2 = setInterval(function(){
                    timesRun2 += 1;
                    if(timesRun2 === 2){
                        clearInterval(interval2);
                        var timesRun3 = 0;
                        var interval3 = setInterval(function(){
                            timesRun3 += 1;
                            if(timesRun3 === 2){
                                clearInterval(interval3);
                            }
                            showFour();
                        }, 1000);
                    }
                    showSecond();   
                },1000); 
            }
            showThird();
        }, 1000); }showFirst();
    }, 1000);       
}); 
```

我有四个图像和四个备用图像。我以 2 秒的时间间隔更改了图像。我在动画函数中编写了这段代码。现在我在 anim 的函数内部调用。但它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T13:25:48.400

也许你正在寻找这样的东西？

```
var current = 0;
var i1 = 'http://jsfiddle.net/img/top-bg.png';
var i2 = 'http://jsfiddle.net/img/logo.png';

function anim() {
    if (++current > 4) {
        current = 1;
    }
    var div = $('#wrap div').eq(current);
    div.animate({
        height: '0px' // this can be also set to fixed size
    }, 2000, function() {
        var img = $(this).children('img')[0];
        img.src = img.src == i1 ? i2 : i1;
        $(this).animate({
            height: '100px'
        }, 2000, function() {
            anim();
        });
    });
}

$(document).ready(function() {
    $('#wrap img').prop('src', i1);
    anim();
}); 
```

@jsfiddle [_](http://jsfiddle.net/tGfvb/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T11:21:24.303

`anim()`其余动画完成后再次调用

```
 if(timesRun3 === 2){
          clearInterval(interval3);
          anim();
     } 
```

# iphone - 将事件添加到日历 xcode？

> ID：11815879
> 
> 赞同：0
> 
> 时间：2012-08-05T11:04:07.810
> 
> 标签：iphone, objective-c, xcode, eventkit

我有一个带有手动添加单元格的列表视图的基本应用程序。

我将如何做到这一点，以便在单击单元格时将特定日期添加到 iphone 日历中？

信息 - 使用最新的 xcode 和故事板

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T19:30:05.197

`UITableViewDelegate`您应该有一个代表为您列出对该协议的响应的列表视图。通过`tableView:didSelectRowAtIndexPath:`您可以点击您的单元格。然后，使用`EKEventStore`类访问您的日历。您的约会由`EKEvent`.

**编辑**

有关更多信息，您应该查阅[日历和提醒简介](http://developer.apple.com/library/ios/#documentation/DataManagement/Conceptual/EventKitProgGuide/Introduction/Introduction.html#//apple_ref/doc/uid/TP40009765)、[事件工具包框架参考](http://developer.apple.com/library/ios/#documentation/EventKit/Reference/EventKitFrameworkRef/_index.html)和[表格视图编程指南](http://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/TableView_iPhone/AboutTableViewsiPhone/AboutTableViewsiPhone.html)。

这是一般方法，您应该提供更详细的描述，您的问题是什么以及您尝试了什么。SO 没有人会为您编写程序。

# python - Windows 文件名被破坏

> ID：11815881
> 
> 赞同：1
> 
> 时间：2012-08-05T11:04:26.697
> 
> 标签：python, image-processing, python-2.7

我正在尝试使用 PIL Image 的 open 方法打开图像，但出现以下错误。

我已将图像存储在`C:\a.jpg`.

```
>>> h1 = Image.open("C:\a.jpg").histogram()

Traceback (most recent call last):
  File "<pyshell#8>", line 1, in <module>
    h1 = Image.open("C:\a.jpg").histogram()
  File "C:\Python27\lib\site-packages\PIL\Image.py", line 1952, in open
    fp = __builtin__.open(fp, "rb")
IOError: [Errno 22] invalid mode ('rb') or filename: 'C:\x07.jpg' 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-05T11:51:34.903

您遇到转义字符问题，使用@NelleshSharma 的方法或

```
Image.open(r'c:\a.jpg').histogram(); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-05T11:13:22.533

尝试转义反斜杠...

```
>>> h1 = Image.open("C:\\a.jpg").histogram() 
```

# html - 在 html Table 中使第一列固定并且下一列可滚动

> ID：11815882
> 
> 赞同：2
> 
> 时间：2012-08-05T11:04:43.523
> 
> 标签：html, css

我有一个只有两列的表。我想让第一列是固定的，下一列在所有行中都是可滚动的。它应该是整体水平滚动的。不是单独的列

可以有数百行。.

我在[Jsfiddle中有一个演示代码](http://jsfiddle.net/Yw679/1/)

我对 CSS 样式的了解不多。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T11:09:18.607

~~您可以使用 CSS `overflow:auto;`，如[http://jsfiddle.net/Yw679/2/](http://jsfiddle.net/Yw679/2/)~~

如果我理解正确，您希望整个左列是静态的，并且整个右列（包括标题）是水平滚动的。那是对的吗？

如果是这样，一张桌子是不可能的。但是有一些额外的代码，有可能有两个这样的表：http: [//jsfiddle.net/Yw679/6/](http://jsfiddle.net/Yw679/6/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-05T20:00:23.500

您正在搜索的内容称为**“冻结列”**。

请参阅此处的 jqGrid[演示，该演示在](http://trirand.com/blog/jqgrid/jqgrid.html)**4.3**版中实现列冻结。这是一个多功能的网格插件，绝对值得一试（如果你还没有，那就是）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-05T11:26:01.040

你可以这样做：

[http://jsfiddle.net/Yw679/3/](http://jsfiddle.net/Yw679/3/)

```
th{
  display :inline-block;
  height: 50px;
  width: 100px;
  overflow: scroll;
}

th:first-child{
  overflow: hidden;
} 
```

​</p>

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-12T07:09:46.493

我想你想做类似这个例子的事情

[https://www.datatables.net/extensions/fixedcolumns/examples/initialisation/left_right_columns.html](https://www.datatables.net/extensions/fixedcolumns/examples/initialisation/left_right_columns.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-07-12T05:46:58.980

最好使用单个表以及固定的两列，而其他列是可滚动的。

`Here is the` [链接](https://jsfiddle.net/brianlmerritt/8c5jgs4b/)。

# javascript - 将非 ASCII 字符（变音符号、重音符号...）转换为最接近的 ASCII 等效字符（创建 slug）

> ID：11815883
> 
> 赞同：35
> 
> 时间：2012-08-05T11:04:46.943
> 
> 标签：javascript, character-encoding, ascii, converter, slug

我正在寻找将字符串中的`JavaScript`非`ASCII`字符转换为最接近的等价物的方法，类似于`PHP` [`iconv`](http://nl3.php.net/manual/en/function.iconv.php)函数的作用。例如，如果输入字符串是`Rånades på Skyttis i Ö-vik`，则应将其转换为`Ranades pa skyttis i o-vik`. 我看过[`phpjs`](http://phpjs.org/)但`iconv`不包括在内。

**是否可以在 JavaScript 中执行这种转换，如果可以，如何？**

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2014-05-13T14:20:05.100

我发现的最简单的方法：

```
var str = "Rånades på Skyttis i Ö-vik";
var combining = /[\u0300-\u036F]/g; 

console.log(str.normalize('NFKD').replace(combining, '')); 
```

有关参考，请参阅[https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/normalize](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/normalize)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-06T19:58:48.163

这是因为`iconv`在大多数 i18n 字符映射转换函数后面是一个本地编译的 UNIX 实用程序。

`javascript`除非您访问某些浏览器组件，否则您不会在其中找到它。

编码是文档的一个属性，所以大多数 javascript 实现只是简单地忽略它。

您需要一个纯 js 库来处理非重音字符串。最好为您需要的特定语言提供一个。

最简单的方法是通过一些翻译表甚至正则表达式替换。

喜欢这里： http: [//lehelk.com/2011/05/06/script-to-remove-diacritics/](http://lehelk.com/2011/05/06/script-to-remove-diacritics/)

也检查这个线程：[Replaceing diacritics in Javascript](https://stackoverflow.com/questions/863800/replacing-diacritics-in-javascript)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2020-04-22T21:01:24.180

我会推荐[Unicode](https://www.npmjs.com/package/unidecode)包，它还会将希腊字母和西里尔字母映射到它们最接近的 ascii 符号：

```
unidecode('Lillı Celiné Никита Ödipus'); 
```

> '莉莉席琳尼基塔奥狄浦斯'

# python - matplotlib 与 iPython 笔记本和 python 文件的差异

> ID：11815884
> 
> 赞同：1
> 
> 时间：2012-08-05T11:05:05.050
> 
> 标签：python, matplotlib, ipython

我对 matplotlib 有一个奇怪的问题，我似乎无法弄清楚。当使用带有 pylab 标志的 ipython 笔记本时，`ipython notebook --pylab inline`我有一行代码看起来像这样，用于使用 matplotlib 生成颜色条：

```
im = ax.imshow(df, vmin=vmin, vmax=vmax) 
```

代码正常工作，我得到了一个不错的颜色条。当我将此代码作为 python 文件运行时，出现错误，`NameError: name 'ax' is not defined`. 我知道会`ipython notebook --pylab inline`自动将一堆东西导入笔记本，但我无法弄清楚我需要导入什么来解决问题。`print type(ax)`给出：

```
<class 'matplotlib.axes.AxesSubplot'> 
```

谁能指出为什么我的代码可以在 ipython 中运行，但不能在普通的 python 文件中运行？提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2017-03-07T16:24:17.097

我有同样的问题。根据此条目： [如何在 matplotlib 图中将 xtick 标签年份缩写为 2 位数字](https://stackoverflow.com/questions/14308512/how-to-abbreviate-xtick-labels-years-to-2-digits-in-a-matplotlib-plot)

尝试通过添加（在导致错误的行之前）来定义“ax”：

```
ax = plt.gca() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-05T11:41:58.657

我不太确定你做了什么，因为`aX`默认情况下没有定义为 pylab 的一部分。

通常，`ax`指的是一个轴对象。有几种方法可以获得：

```
matplotlib.pyplot.gca()            # gca = get current axis
matplotlib.pyplot.subplot(2,1,1)   # For creating multiple plots in one figure
fig.get_axes()[x]                  # Where fig is a Figure object 
```

# .net - 如何使 WCF 服务器异步？

> ID：11815885
> 
> 赞同：1
> 
> 时间：2012-08-05T11:05:09.427
> 
> 标签：.net, wcf

服务：

```
public class Service:IContracts
{
    private const string baseLocation = "E:\\";
    private FileStream _stream;
    private byte[] _buffer;
    public double Add(double x, double y) 【2】
    {
        return x + y;
    }

    public IAsyncResult BeginAsy(string fileName, AsyncCallback userCallback, object stateObject)【1】
    {
         this._stream = new FileStream(baseLocation + fileName, FileMode.Open, FileAccess.Read, FileShare.Read);
         this._buffer = new byte[this._stream.Length];
         return this._stream.BeginRead(this._buffer, 0, this._buffer.Length, userCallback, stateObject);
    }

    public string EndAsy(IAsyncResult ar)
    {
        this._stream.EndRead(ar);
        this._stream.Close();
        Thread.Sleep(3000);
        return Encoding.ASCII.GetString(this._buffer);
     }
} 
```

客户端：异步调用。

```
 proxy.BeginAsy("test.txt", asy =>   //'test.txt' is a large file 
        {
            Console.WriteLine(proxy.EndAsy(asy));
        }, null);
 Console.WriteLine(proxy.Add(1.0, 1.0)); 
```

代码的接口'IService'和'host'是绝对正确的！不会post，为什么代码【1】完成后代码【2】会被执行？服务器是异步的？如果不是，WCF服务器异步是怎么用的？我希望代码【1】不影响代码【2】的执行，代码【2】可以在代码【1】执行的时候被执行。</p>

# css - 表格、表格行和表格单元的异常嵌套

> ID：11815887
> 
> 赞同：1
> 
> 时间：2012-08-05T11:05:21.873
> 
> 标签：css, css-tables

我想将几个嵌套的 div（如下所示）转换为具有表格、表格行和表格单元格显示样式的 CSS 表格结构。这工作正常。但是 DOM 结构中还有一些其他元素（下面由类“red”和“blue”标识）我无法删除，但我不需要它们来显示在屏幕上。如果我将这些元素留在 DOM 树中，表结构将无法正确显示。是否有可能让它们出现在 DOM 树中但在显示时忽略它们？

```
<div style="display: table">
  <div class="blue">
    <div style="display: table-row">
      <div class="red">
        <div style="display: table-cell">
          ...
        </div>
        <div style="display: table-cell">
          ...
        </div>
      </div>
    </div>
    <div style="display: table-row">
      <div class="red">
        <div style="display: table-cell">
          ...
        </div>
        <div style="display: table-cell">
          ...
        </div>
      </div>
    </div>
  </div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T11:32:56.837

你为什么要重新发明轮子？如果您想使用`table`，请执行此操作，不要假装您没有使用 table 通过自己实现它来使用`divs`. 你没有得到任何东西，只是在浪费你的时间。

我能想象的唯一情况是您无法访问 HTML - 否则为什么您不能删除这些 div .red 和 .blue？

现在针对您的真正问题。您显然不能添加到 .red 和 .blue `display: none`nor `visibility: hidden`，但您可以尝试`display: inline;`. 无论如何，祝你好运！

# mvvm - android中的mvvmcross touch命令绑定

> ID：11815893
> 
> 赞同：3
> 
> 时间：2012-08-05T11:07:01.767
> 
> 标签：mvvm, xamarin.android, mvvmcross

我正在寻找一种在 axml 和 ViewModel 之间进行“Touch”命令绑定的方法，或者像 FocusChanged 等其他一些方法。

一个简单的“单击”命令可以正常工作，如下所示：local:MvxBind="{'Touch':{'Path':'CameraButtonCommand'}}" />

```
 public IMvxCommand CameraButtonCommand
    {
        get
        {
            return new MvxRelayCommand(
                () =>
                {
                    RequestNavigate<AugRealityViewModel>(true);
                })
            ;
        }
    } 
```

但是，我已经为控件尝试了其他事件类型（在本例中是 ImageButton）并且它们没有被处理。当我检查视图类中的事件列表时，我看到了这些：

```
 public event EventHandler Click;
    public event EventHandler<View.CreateContextMenuEventArgs> ContextMenuCreated;
    public event EventHandler<View.FocusChangeEventArgs> FocusChange;
    public event EventHandler<View.KeyEventArgs> KeyPress;
    public event EventHandler<View.LongClickEventArgs> LongClick; 
```

只有 Click 事件附加了通用的 EventHandler，而其他事件具有通用的 EventHandler，我想知道这是否是它不起作用的原因。

我还尝试将方法附加到 View 类中的这些事件，通过 FindViewById 方法获得适当的控制，这次它按预期工作。但不知何故，我无法通过命令在 axml 中做到这一点。

还有一件事。“Click”事件正在发送“EventArgs”对象作为参数之一，也是对象引用。如果我在 View Class 中执行此行为，我可以轻松地看到这一点，但是当我通过绑定执行此操作时，我在 ViewModel 中处理命令时看不到这些参数。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T15:10:02.397

该框架可以自动绑定任何需要 EventHandler 类型的事件。但是，对于任何需要模板化 EventHandler（带有自定义 EventArgs）的事件，那么您是正确的 - 您需要包含自定义绑定。

好消息是自定义绑定很容易编写和包含。

例如，要绑定：

```
public event EventHandler<View.LongClickEventArgs> LongClick; 
```

您可以包括以下内容：

```
public class LongPressEventBinding
    : MvxBaseAndroidTargetBinding
{
    private readonly View _view;
    private IMvxCommand _command;

    public LongPressEventBinding(View view)
    {
        _view = view;
        _view.LongClick += ViewOnLongClick;
    }

    private void ViewOnLongClick(object sender, View.LongClickEventArgs eventArgs)
    {
        if (_command != null)
        {
            _command.Execute();
        }
    }

    public override void SetValue(object value)
    {
        _command = (IMvxCommand)value;
    }

    protected override void Dispose(bool isDisposing)
    {
        if (isDisposing)
        {
            _view.Click -= ViewOnLongClick;
        }
        base.Dispose(isDisposing);
    }

    public override Type TargetType
    {
        get { return typeof(IMvxCommand); }
    }

    public override MvxBindingMode DefaultMode
    {
        get { return MvxBindingMode.OneWay; }
    }
} 
```

可以使用以下内容在设置中进行配置：

```
 protected override void FillTargetFactories(IMvxTargetBindingFactoryRegistry registry)
    {
        base.FillTargetFactories(registry);

        registry.RegisterFactory(new MvxCustomBindingFactory<View>("LongPress", view => new LongPressEventBinding(view)));
    } 
```

* * *

请注意，您不能编写绑定到所有不同事件类型的单个类 - 因为编译器要求您为 EventArgs 包含正确的类型。但是，如果您愿意，您可以很容易地更改`public class LongClickEventBinding`为类似的东西`public class CustomEventBinding<TViewType, TEventArgsType>`。

* * *

关于应该将什么参数传递给 IMvxCommand Execute 方法，我想这在一定程度上取决于所讨论的方法，并且还取决于您是否需要 ViewModel 支持多个平台，或者它是否仅适用于 Android。

# c++ - 如何在 C/C++ 中读/写任意位

> ID：11815894
> 
> 赞同：47
> 
> 时间：2012-08-05T11:07:05.713
> 
> 标签：c++, c, memory, bit, read-write

假设我有一个二进制值为 11111111 的字节 b

例如，我如何读取从第二位开始的 3 位整数值或从第五位开始写入四位整数值？

* * *

## 回答 #1

> 赞同：140
> 
> 时间：2014-12-21T19:11:28.693

在我问了这个问题大约 2 年之后，我想以我希望它解释的方式来解释它，当时我还是一个完整的新手，并且对想要了解这个过程的人最有益。

首先，忘记“11111111”示例值，它并不完全适合过程的视觉解释。所以让初始值是`10111011`（十进制的 187），这将更能说明这个过程。

**1 - 如何读取从第二位开始的 3 位值：**

```
 ___  <- those 3 bits
10111011 
```

该值为 101，或十进制的 5，有两种可能的获取方式：

*   掩码和移位

在这种方法中，所需的位首先用值`00001110`（十进制 14）屏蔽，然后将其移位：

```
 ___
10111011 AND
00001110 =
00001010 >> 1 =
     ___
00000101 
```

表达式为：`(value & 14) >> 1`

*   移位和掩码

这种方法类似，但操作的顺序是相反的，这意味着原始值被移位，然后用`00000111`(7) 屏蔽，只留下最后 3 位：

```
 ___
10111011 >> 1
     ___
01011101 AND
00000111
00000101 
```

表达式为：`(value >> 1) & 7`

两种方法都涉及相同数量的复杂性，因此在性能上不会有差异。

**2 - 如何从第二位开始写入 3 位值：**

在这种情况下，初始值是已知的，当代码中出现这种情况时，您可以想出一种方法将已知值设置为另一个使用较少操作的已知值，但实际上这很少是在这种情况下，大多数时候代码既不知道初始值，也不知道要写入的值。

这意味着，为了将新值成功“拼接”成字节，目标位必须设置为零，然后将移位后的值“拼接”到位，这是第一步：

```
 ___ 
10111011 AND
11110001 (241) =
10110001 (masked original value) 
```

第二步是将我们要写入的值移到 3 位中，假设我们要将其从 101 (5) 更改为 110 (6)

```
 ___
00000110 << 1 =
    ___
00001100 (shifted "splice" value) 
```

第三步也是最后一步是将屏蔽的原始值与移位的“拼接”值拼接起来：

```
10110001 OR
00001100 =
    ___
10111101 
```

整个过程的表达式为：`(value & 241) | (6 << 1)`

**奖励 - 如何生成读写掩码：**

自然，使用二进制到十进制转换器远非优雅，尤其是在 32 位和 64 位容器的情况下 - 十进制值变得非常大。可以使用表达式轻松生成掩码，编译器可以在编译期间有效地解析：

*   读取“掩码和移位”的掩码：`((1 << fieldLength) - 1) << (fieldIndex - 1)`，假设第一位的索引为 1（非零）
*   读取“移位和掩码”的掩码：（`(1 << fieldLength) - 1`索引在这里不起作用，因为它总是移到第一位
*   写掩码：只需使用`~`运算符反转“掩码和移位”掩码表达式

它是如何工作的（3 位字段从上面示例的第二位开始）？

```
00000001 << 3
00001000  - 1
00000111 << 1
00001110  ~ (read mask)
11110001    (write mask) 
```

相同的示例适用于更宽的整数和字段的任意位宽和位置，移位和掩码值会相应变化。

另请注意，这些示例假定无符号整数，这是您想要使用的整数，以便将整数用作可移植位字段的替代方案（标准绝不保证常规位字段是可移植的），左右移位插入一个填充 0，这不是右移有符号整数的情况。

**更容易：**

使用这组宏（但仅在 C++ 中，因为它依赖于成员函数的生成）：

```
#define GETMASK(index, size) ((((size_t)1 << (size)) - 1) << (index))
#define READFROM(data, index, size) (((data) & GETMASK((index), (size))) >> (index))
#define WRITETO(data, index, size, value) ((data) = (((data) & (~GETMASK((index), (size)))) | (((value) << (index)) & (GETMASK((index), (size))))))
#define FIELD(data, name, index, size) \
  inline decltype(data) name() const { return READFROM(data, index, size); } \
  inline void set_##name(decltype(data) value) { WRITETO(data, index, size, value); } 
```

你可以做一些简单的事情：

```
struct A {
  uint bitData;
  FIELD(bitData, one, 0, 1)
  FIELD(bitData, two, 1, 2)
}; 
```

并将位字段实现为您可以轻松访问的属性：

```
A a;
a.set_two(3);
cout << a.two(); 
```

替换`decltype`为 gcc 的`typeof`pre-C++11。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-08-05T11:11:44.530

您需要转换和屏蔽该值，例如...

如果要读取前两位，只需像这样将它们屏蔽掉：

```
int value = input & 0x3; 
```

如果要偏移它，则需要右移 N 位，然后屏蔽所需的位：

```
int value = (intput >> 1) & 0x3; 
```

像您在问题中提出的那样阅读三位。

```
int value = (input >> 1) & 0x7; 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2016-07-07T19:24:29.450

随意使用它：

```
#define BitVal(data,y) ( (data>>y) & 1)      /** Return Data.Y value   **/
#define SetBit(data,y)    data |= (1 << y)    /** Set Data.Y   to 1    **/
#define ClearBit(data,y)  data &= ~(1 << y)   /** Clear Data.Y to 0    **/
#define TogleBit(data,y)     (data ^=BitVal(y))     /** Togle Data.Y  value  **/
#define Togle(data)   (data =~data )         /** Togle Data value     **/ 
```

例如：

```
uint8_t number = 0x05; //0b00000101
uint8_t bit_2 = BitVal(number,2); // bit_2 = 1
uint8_t bit_1 = BitVal(number,1); // bit_1 = 0

SetBit(number,1); // number =  0x07 => 0b00000111
ClearBit(number,2); // number =0x03 => 0b0000011 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-08-05T11:41:06.347

您必须执行移位和屏蔽 (AND) 操作。令**b**为任意字节，**p**为您要从中获取**n**位 (>= 1) 的位的索引 (>= 0)。

**首先，您必须将b**右移**p**次：

```
x = b >> p; 
```

**其次，您必须用n**个来掩盖结果：

```
mask = (1 << n) - 1;
y = x & mask; 
```

您可以将所有内容放在宏中：

```
#define TAKE_N_BITS_FROM(b, p, n) ((b) >> (p)) & ((1 << (n)) - 1) 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-08-05T11:11:24.437

“例如，我如何读取从第二位开始的 3 位整数值？”

```
int number = // whatever;
uint8_t val; // uint8_t is the smallest data type capable of holding 3 bits
val = (number & (1 << 2 | 1 << 3 | 1 << 4)) >> 2; 
```

（我假设“第二位”是位#2，即第三位真的。）

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-08-05T11:34:36.290

要读取字节，请使用 std::bitset

```
const int bits_in_byte = 8;

char myChar = 's';
cout << bitset<sizeof(myChar) * bits_in_byte>(myChar); 
```

要编写，您需要使用按位运算符，例如 & ^ | & << >>。确保了解他们的工作。

例如，要获得 00100100，您需要将第一位设置为 1，并使用 << >> 运算符将其移位 5 次。如果你想继续写，你只需继续设置第一位并移动它。这很像一台旧打字机：你写，然后移动纸张。

对于 00100100：将第一位设置为 1，移位 5 次，将第一位设置为 1，并移位 2 次：

```
const int bits_in_byte = 8;

char myChar = 0;
myChar = myChar | (0x1 << 5 | 0x1 << 2);
cout << bitset<sizeof(myChar) * bits_in_byte>(myChar); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-08-05T11:10:34.733

```
int x = 0xFF;   //your number - 11111111 
```

> 例如，我如何读取从第二位开始的 3 位整数值

```
int y = x & ( 0x7 << 2 ) // 0x7 is 111
                         // and you shift it 2 to the left 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-01-19T14:42:56.400

如果您不断从数据中获取位，则可能需要使用位域。您只需要设置一个结构并仅使用 1 和 0 加载它：

```
struct bitfield{
    unsigned int bit : 1
}
struct bitfield *bitstream; 
```

然后稍后像这样加载它（用 int 或您正在加载的任何数据替换 char ）：

```
long int i;
int j, k;
unsigned char c, d;

bitstream=malloc(sizeof(struct bitfield)*charstreamlength*sizeof(char));
for (i=0; i<charstreamlength; i++){
    c=charstream[i];
    for(j=0; j < sizeof(char)*8; j++){
        d=c;
        d=d>>(sizeof(char)*8-j-1);
        d=d<<(sizeof(char)*8-1);
        k=d;
        if(k==0){
            bitstream[sizeof(char)*8*i + j].bit=0;
        }else{
            bitstream[sizeof(char)*8*i + j].bit=1;
        }
    }
} 
```

然后访问元素：

```
bitstream[bitpointer].bit=... 
```

或者

```
...=bitstream[bitpointer].bit 
```

所有这些都假设是在 i86/64 上工作，而不是 arm，因为 arm 可以是大端或小端。

# gridview - 在行数据绑定事件中修改网格视图数据项？

> ID：11815902
> 
> 赞同：0
> 
> 时间：2012-08-05T11:08:41.600
> 
> 标签：gridview, databound

我正在将网格视图与数据表绑定，我想在绑定后计算一些值实现此目的的简单而常见的方法是在 RowDataBound 事件中进行所有计算，在行中找到控件并用计算值填充它们。但目前我在网格视图中没有任何控件，而是直接使用 Eval 方法显示值。

我想知道是否有任何方法可以更新与 DataBound 事件中的网格视图行关联的数据项，这样我就可以避免添加控件并可以直接访问模板字段中的那些计算列，就像这样

```
protected void gvSuspensions_DataBound(object sender, EventArgs e)
{
   foreach (GridViewRow row in gvPreviousSuspensions.Rows)
   {
      DataRowView rowView = (DataRowView)row.DataItem;// getting DataItem null :(
      rowView["ComputedColumn"] = "ComputedValue";
   }
} 
```

并且可以这样直接使用

```
<asp:TemplateField>
    <ItemTemplate>
       <%# Eval("ComputedColumn") %>
    </ItemTemplate>
</asp:TemplateField> 
```

但我得到空行.DataItem！

任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T14:22:34.050

您应该改用 RowDataBound 事件，它为您提供对当前绑定行的引用。

```
protected void gvSuspensions_RowDataBound(Object sender, GridViewRowEventArgs e) 
```

e.Row.DataItem 是您应该访问的内容。

[RowDataBound 的参考](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridviewroweventargs.aspx)

# scala - Scala 运行时协变和逆变类的有效类型转换

> ID：11815908
> 
> 赞同：4
> 
> 时间：2012-08-05T11:09:47.260
> 
> 标签：scala, types, covariance, contravariance

我写了一个实现[命令设计模式](http://en.wikipedia.org/wiki/Command_pattern)的类：

```
class MyCommand[-T, +R](val name: String, val execute: T => R) 
```

，准备两个命令并将其存储在一个 MutableList 中：

```
val commands = new mutable.MutableList[MyCommand[Nothing, Any]]
commands += new MyCommand[String, String]("lower", s => s.toLowerCase())
commands += new MyCommand[Date, Long]("time", d => d.getTime) 
```

然后我有两个要执行的数据：

```
val data = Array("StRiNG", new Date()) 
```

我的问题是我不知道如何确定哪个数据适用于命令：

```
data.foreach {
  d => commands.foreach {
    c =>
    // println(c.execute(d)) if d is applicable to c.execute().
  }
} 
```

我尝试的是与类型规范进行模式匹配，但它会产生语法错误：

```
c.execute match {
  case m: (d.getClass => Any) => println(c.execute(d))
} 
```

帮我 ：（

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T12:54:50.217

我很确定有更好的方法来解决这个问题，但这可能对你有用。我用 Scala 2.9.2 对其进行了测试。

`MyCommand`将 a`Manifest`作为附加的隐式参数，它使我们能够`execute`在运行时访问表示函数的 from 类型的类：

```
class MyCommand[-T: Manifest, +R](val name: String, val execute: T => R) {
  val fromClass = manifest[T].erasure
} 
```

命令列表基本上与您的原始帖子中的一样，数据列表也是如此：

```
val commands = List(
  new MyCommand[String, String]("lower", _.toLowerCase()),
  new MyCommand[Date, Long]("time", _.getTime)
)

val data = List("StRiNG", new Date()) 
```

将数据与命令匹配依赖于所涉及类型作为类的运行时表示，以及相当丑陋的强制转换。强制转换特别难看，因为它没有给出精确的返回类型，也就是说，如果您需要知道命令返回值的精确返回类型，则需要额外的匹配或强制转换。

```
data foreach { d =>
  commands foreach { c =>
    println("data: %s (%s), command takes: %s"
           .format(d, d.getClass.getSimpleName, c.fromClass.getSimpleName))

    if (d.getClass.isAssignableFrom(c.fromClass)) {
      println("    cmd(data) = " + c.execute.asInstanceOf[Any => Any](d))
    }
  }
} 
```

输出是：

```
data: StRiNG (String), command takes: String
    cmd(data) = string
data: StRiNG (String), command takes: Date
data: Sun Aug 05 14:46:17 CEST 2012 (Date), command takes: String
data: Sun Aug 05 14:46:17 CEST 2012 (Date), command takes: Date
    cmd(data) = 1344170777681 
```

# java - 需要一种使用 RandomAccessFile 从 ArrayList 存储中写入 Student 的方法

> ID：11815929
> 
> 赞同：0
> 
> 时间：2012-08-05T11:12:49.120
> 
> 标签：java, arraylist, random-access

嘿，我有问题。我想使用 arrayList 来创建一个 studentStore（我已经完成了），但是当我尝试使用 RandomAccessFile 编写学生时，我一无所知。

```
StudentStore details = new StudentStore();
Student a = new Student("Becky O'Brien", "DKIT26", "0876126944", "bexo@hotmail.com");
Student b = new Student("Fabio Borini", "DKIT28", "0876136944", "fabioborini@gmail.com");
Student c = new Student("Gaston Ramirez", "DKIT29", "0419834501", "gramirez@webmail.com");
Student d = new Student("Luis Suarez", "DKIT7", "0868989878", "luissuarez@yahoo.com");
Student e = new Student("Andy Carroll", "DKIT9", "0853456788", "carroll123@hotmail.com"); 
```

这些是我的学生

现在我需要一种方法将它们写入

```
RandomAccessFile raf = new RandomAccessFile("employee.dat", "rw");
Student er = new Student(null, null, null, null);
for (int i = 0; i < details.length; i++) //This is getting an error obviously because details wont be taken.  nor will a, b,c , d or e which is what the student was declared at the top.
{
    er.setFirstName([i]);
    er.setLastName(lnames[i]);
    er.setAddress(addresses[i]);
    er.setAge(ages[i]);
    er.setSalary(salaries[i]);
    er.write(raf);
}
raf = new RandomAccessFile("employee.dat", "rw");

er = new Student();

int numRecords = (int) raf.length() / er.size();

for (int i = 0; i < numRecords; i++) {
    er.read(raf);

    System.out.print(er.getStudentName() + " ");
    System.out.print(er.getStudentId() + " ");
    System.out.print(er.getStudentEmail() + " ");
    System.out.print(er.getStudentTelephoneNumber() + " ");
}
raf.seek(0);
for (int i = 0; i < numRecords; i++) {
    er.read(raf);
    if (er.getAge() >= 55) {
        er.setSalary(0.0);
        raf.seek(raf.getFilePointer() - er.size());
        er.write(raf);
        raf.seek(raf.getFilePointer() - er.size());
        er.read(raf);
    }
    System.out.print(er.getStudentName() + " ");
    System.out.print(er.getStudentId() + " ");
    System.out.print(er.getStudentEmail() + " ");
    System.out.print(er.getStudentTelephoneNumber() + " ");
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T11:39:19.500

试试这个`StudentStore`以获得内部的大小`ArrayList`。

```
public class StudentStore
{
    ArrayList<Student> students = null;

    public StudentStore()
    {
        students = new ArrayList<Student>();
    }

    public int size()
    {
        return (students == null) ? 0 : students.size();
    }
} 
```

但是，我不明白，为什么您必须创建自己的包装`ArrayList`而不是使用简单的`ArrayList`...

# google-maps - 单击 FusionTablesLayer 多边形时的事件

> ID：11815932
> 
> 赞同：2
> 
> 时间：2012-08-05T11:13:11.170
> 
> 标签：google-maps, google-maps-api-3, google-fusion-tables

每次客户端单击多边形时，我都需要在我的 javascript 中知道。我还需要知道这对应于我的融合表中的哪一行。有这样做的事件吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T12:13:46.677

> 有这样做的事件吗？

[FusionTables鼠标事件](https://developers.google.com/maps/documentation/javascript/reference#FusionTablesMouseEvent)

# symfony - ManyToMany双向[语义错误]用户没有关联命名服务

> ID：11815940
> 
> 赞同：-1
> 
> 时间：2012-08-05T11:14:39.800
> 
> 标签：symfony, doctrine-orm, many-to-many, bidirectional

我有两个 netities 用户和服务以及由学说生成的连接表 user_service，我尝试在此处添加多对多关系，这是我添加的注释：

实体用户端：

```
/**
* @ORM\ManyToMany(targetEntity="Service", inversedBy="users")
* @ORM\JoinTable(name="user_service",
*   joinColumns={@ORM\JoinColumn(name="user_id", referencedColumnName="id")},
*   inverseJoinColumns={@ORM\JoinColumn(name="service_id", referencedColumnName="id")}
* )
*/

protected $services; 
```

实体服务端：

```
/**
 * @ORM\ManyToMany(targetEntity="User", mappedBy="services")
 */
protected  $users; 
```

一切似乎都很好，但是当我提出这个要求时：

```
 $query = $em->createQuery(
        'SELECT u
         FROM ApplicationFrontBundle:User u
              JOIN u.service s
             WHERE u.id = :id 
         '
    )->setParameters(array('id'=> $id));

    $services = $query->getArrayResult(); 
```

我有这个错误：

```
[Semantical Error] line 0, col 91 near 's
': Error: Class Application\FrontBundle\Entity\User has no association named service 
```

但是当我通过它工作的对象来做这件事时，问题是它执行了很多请求

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T12:00:10.080

因为您将其命名为 serviceSSS？

```
$query = $em->createQuery(
    'SELECT u
     FROM ApplicationFrontBundle:User u
          JOIN u.services s
         WHERE u.id = :id 
     '
)->setParameters(array('id'=> $id));

$services = $query->getArrayResult(); 
```

# php - 仅在未指定任何操作时使用 Zend Framework 附加样式表

> ID：11815943
> 
> 赞同：4
> 
> 时间：2012-08-05T11:15:30.800
> 
> 标签：php, css, zend-framework, action, append

我开始使用 Zend Framework 并尝试在我的 layout.phtml 中添加一些样式表和 javascript 文件，如下所示：

```
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>LoremIpsum</title>
<?php echo $this->headLink()->appendStylesheet('css/global.css'); ?>
</head> 
```

这样做的问题是，它只有在 url 中没有指定操作时才有效。例如，它适用于：www.domain.com、www.domain.com/index、www.domain.com/login

但是如果我添加操作，即使它是 www.domain.com/index/index 它也会停止工作。

我注意到在这种情况下 index.php 被调用了两次并调用了 ErrorController。但输出显示没有错误。这是没有样式表信息的预期输出。

任何想法我的布局有什么问题？

**编辑1：**

错误报告已激活并在其他情况下有效。HTML 标记是正确的。Firebug 显示没有找到我的 css 文件，但路径不会出错，因为没有指定的操作它可以正常工作。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-05T12:13:42.217

您可以使用 BaseUrl() 查看助手：

```
<?php echo $this->headLink()->appendStylesheet($this->baseUrl().'/css/global.css'); ?> 
```

那么应该没问题...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T11:23:52.847

如果您想查看错误，您必须将您的工作环境从生产更改为开发（这是通过添加`SetEnv APPLICATION_ENV development`到您的 .htaccess 文件来完成的）

关于布局排序两次，将其添加到errorController文件中的errorAction（使其成为操作的第一行）：`$this->getResponse()->clearBody();`

**编辑 ：**

好的，试试这个来附加样式表：

```
$this->headLink()->appendStylesheet('css/global.css');
echo $this->headLink(); 
```

# python - 无法使用 Ctrl-C 终止 Python 脚本

> ID：11815947
> 
> 赞同：130
> 
> 时间：2012-08-05T11:16:13.917
> 
> 标签：python, linux

我正在使用以下脚本测试 Python 线程：

```
import threading

class FirstThread (threading.Thread):
    def run (self):
        while True:
            print 'first'

class SecondThread (threading.Thread):
    def run (self):
        while True:
            print 'second'

FirstThread().start()
SecondThread().start() 
```

这是在 Kubuntu 11.10 上的 Python 2.7 中运行的。`Ctrl`+`C`不会杀死它。我还尝试为系统信号添加处理程序，但这没有帮助：

```
import signal 
import sys
def signal_handler(signal, frame):
    sys.exit(0)
signal.signal(signal.SIGINT, signal_handler) 
```

为了杀死进程，我在使用`Ctrl`+将程序发送到后台后通过 PID 杀死它`Z`，这不会被忽略。为什么`Ctrl`+`C`被如此持久地忽略？我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：206
> 
> 时间：2012-08-05T11:30:20.370

`Ctrl`+`C`终止主线程，但由于您的线程未处于守护程序模式，它们会继续运行，从而使进程保持活动状态。我们可以让它们成为守护进程：

```
f = FirstThread()
f.daemon = True
f.start()
s = SecondThread()
s.daemon = True
s.start() 
```

但是还有另一个问题——一旦主线程启动了你的线程，它就没有什么可做的了。所以它退出了，线程立即被销毁。所以让我们保持主线程活着：

```
import time
while True:
    time.sleep(1) 
```

现在它将保持 print 'first' 和 'second' 直到你点击`Ctrl`+ `C`。

**编辑：**正如评论者指出的那样，守护线程可能没有机会清理临时文件之类的东西。如果你需要，然后`KeyboardInterrupt`在主线程上捕获并让它协调清理和关闭。但在很多情况下，让守护线程突然死掉可能就足够了。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-05T11:25:21.570

KeyboardInterrupt 和信号只有进程（即主线程）才能看到...看看[Ctrl-c 即 KeyboardInterrupt 以杀死 python 中的线程](https://stackoverflow.com/questions/4136632/ctrl-c-i-e-keyboardinterrupt-to-kill-threads-in-python)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2019-04-03T18:38:58.840

我认为最好`join()`在您期望线程死亡时调用您的线程。我冒昧地将您的循环更改为结束（您也可以在那里添加所需的任何清理需求）。`die`每次传递都会检查变量，当它是时`True`，程序退出。

```
import threading
import time

class MyThread (threading.Thread):
    die = False
    def __init__(self, name):
        threading.Thread.__init__(self)
        self.name = name

    def run (self):
        while not self.die:
            time.sleep(1)
            print (self.name)

    def join(self):
        self.die = True
        super().join()

if __name__ == '__main__':
    f = MyThread('first')
    f.start()
    s = MyThread('second')
    s.start()
    try:
        while True:
            time.sleep(2)
    except KeyboardInterrupt:
        f.join()
        s.join() 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-04-24T15:17:18.637

[@Thomas K 答案](https://stackoverflow.com/a/11816038/4298200)的改进版本：

*   `is_any_thread_alive()`根据[这个要点](https://gist.github.com/ruedesign/5218221)定义一个辅助函数，它可以自动终止`main()`。

* * *

示例代码：

```
import threading

def job1():
    ...

def job2():
    ...

def is_any_thread_alive(threads):
    return True in [t.is_alive() for t in threads]

if __name__ == "__main__":
    ...
    t1 = threading.Thread(target=job1,daemon=True)
    t2 = threading.Thread(target=job2,daemon=True)
    t1.start()
    t2.start()

    while is_any_thread_alive([t1,t2]):
        time.sleep(0) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-03-16T17:18:47.233

要提防一个简单的“陷阱”，您确定`CAPS LOCK`没有启用吗？

我在 Pi4 上的 Thonny IDE 中运行 Python 脚本。使用`CAPS LOCK`on，`Ctrl`++被传递到键盘缓冲区，而不是`Shift`+ 。`C``Ctrl``C`

# ios - Xcode 项目构建：失败

> ID：11815952
> 
> 赞同：0
> 
> 时间：2012-08-05T11:16:45.737
> 
> 标签：ios, xcode, header-files, build-error

我正在开发简单的应用程序，并且在编写代码时没有错误，但是当我按下构建按钮时，发生了错误。构建 myProject：失败，xCode 显示两个错误警告。这里的错误消息：

```
 Ld /Users/MacUser/Library/Developer/Xcode/DerivedData/Calculator-azorstixlscpikfhurtxwvvwachh/Build/Products/Debug-iphonesimulator/Calculator.app/Calculator normal i386
cd "/Users/MacUser/Downloads/Downloads/Desktop/old drop box/calc/Calculator"
setenv MACOSX_DEPLOYMENT_TARGET 10.6
setenv PATH "/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin:/Applications/Xcode.app/Contents/Developer/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin"
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch i386 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.1.sdk
-L/Users/MacUser/Library/Developer/Xcode/DerivedData/Calculator-azorstixlscpikfhurtxwvvwachh/Build/Products/Debug-iphonesimulator 
-F/Users/MacUser/Library/Developer/Xcode/DerivedData/Calculator-azorstixlscpikfhurtxwvvwachh/Build/Products/Debug-iphonesimulator 
-filelist /Users/MacUser/Library/Developer/Xcode/DerivedData/Calculator-azorstixlscpikfhurtxwvvwachh/Build/Intermediates/Calculator.build/Debug-iphonesimulator/Calculator.build/Objects-normal/i386/Calculator.LinkFileList 
-mmacosx-version-min=10.6 -Xlinker 
-objc_abi_version -Xlinker 2 
-fobjc-arc -fobjc-link-runtime -Xlinker -no_implicit_dylibs -D__IPHONE_OS_VERSION_MIN_REQUIRED=50100 
-framework UIKit -framework Foundation -framework CoreGraphics 
-o /Users/MacUser/Library/Developer/Xcode/DerivedData/Calculator-azorstixlscpikfhurtxwvvwachh/Build/Products/Debug-iphonesimulator/Calculator.app/Calculator

Undefined symbols for architecture i386:
"_OBJC_CLASS_$_AxesDrawer", referenced from:
  objc-class-ref in AxesView.o
ld: symbol(s) not found for architecture i386
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

我找到了一些东西，这是我的 controller.m 代码：

```
#import "AxesView.h"
#import "AxesDrawer.h"

@implementation AxesView

- (void)drawRect:(CGRect)rect
{
   CGRect b;
   b = self.bounds;
   CGPoint aO;
   aO = b.origin;
   CGFloat pPU;
   pPU = b.size.height;

   [AxesDrawer drawAxesInRect:(CGRect)b originAtPoint:(CGPoint)aO scale:(CGFloat)pPU];
}
@end 
```

我在我的 AxesDrawer.h 文件中认为的问题，但我不知道为什么。如果我将导入从 AxesDrawer.h 更改为 AxesDrawer.m（我知道这是错误的，但只是为了测试），项目将在模拟器中构建和工作。有人可以帮我吗？我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T12:43:10.097

AxesDrawer.m 可能不在您的目标中。单击它并使用最右边的实用程序面板，并确保它已检查您正在构建的目标。

# sql - sql连接查询问题

> ID：11815953
> 
> 赞同：1
> 
> 时间：2012-08-05T11:16:48.567
> 
> 标签：sql, join

我制作了一个好友列表，其中加入了 2 个表、FRIENDS 表和 PLAYERS 表。

朋友桌

```
 player   target     status
 -----------------------------
 john     eric       invited
 roger    moore      friends
 stan     winston    friends 
```

球员表

```
 name      pic     
 -------------------
 john     lol.jpg
 stan     skinhead.gif 
```

现在，在玩家页面上，我需要遍历`friends`表格并找出他们有多少朋友。因此，为此我必须同时检查`player`字段和`target`= $name 的字段

然后要获得 pic id，必须将其与`players`表 JOIN。

到目前为止，这是我的查询，显然不起作用（有点假）：

```
SELECT p.pic, p.name FROM friends f INNER JOIN players p ON (player OR target)=p.name WHERE (f.player='" .$name. "' OR f.target='" .$name. "') AND status='friends' 
```

$name 是您所在的玩家资料的名称。

谁能告诉我如何调整它以使其工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T11:19:56.143

`SELECT p.pic, p.name FROM friends f INNER JOIN players p ON f.name=p.name WHERE (f.player='" .$name. "' OR f.target='" .$name. "') AND status='friends`'

Friends = f.player 在您的查询中？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T11:26:43.067

您需要使用联合在一个查询中获取所有信息。

```
SELECT * FROM friends JOIN players ON (target = name AND status = friends)
WHERE player = ?
UNION ALL
SELECT * FROM friends JOIN players ON (player = name AND status = friends)
WHERE target = ? 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-05T11:29:51.893

尝试这个：

```
SELECT p.pic, 
       p.name 
FROM friends f 
   INNER JOIN players p ON p.name IN (f.player, f.target)
WHERE (f.player='" .$name. "' OR f.target='" .$name. "') 
AND status='friends' 
```

这是一个简写

```
SELECT p.pic, 
       p.name 
FROM friends f 
   INNER JOIN players p ON p.name = f.player OR p.name = f.target
WHERE (f.player='" .$name. "' OR f.target='" .$name. "') 
AND status='friends' 
```

# javascript - apply 方法在画布上下文 lineTo() 上不起作用

> ID：11815955
> 
> 赞同：1
> 
> 时间：2012-08-05T11:17:09.417
> 
> 标签：javascript, canvas, apply

我找不到这不起作用的原因：

```
var c=document.getElementById("myCanvas"),
ctx=c.getContext("2d");
ctx.moveTo(0,0);
ctx.lineTo.apply(this, [100, 100]);
ctx.stroke(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T10:57:02.780

好的，我在你回答后让它工作，谢谢。我认为 THIS 指向 ctx 变量。

```
var c=document.getElementById("myCanvas"),
ctx=c.getContext("2d");
ctx.moveTo(0,0);
ctx.lineTo.apply(ctx, [100, 100]);
ctx.stroke(); 
```

谢谢再见 ;）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-05T13:32:47.553

现在，`this`要么是`window`... 真的不知道如何处理`.lineTo`，要么`this`是任何对象拥有包含此代码的函数。

如果此代码未包含在函数中（或者即使是，如果该函数不是对象的属性，`this`=== `window`）。

例如：

```
MyObj.myFunc = function () {
    var c = document.getElementById("myCanvas"),
    //  ..........etc
    ctx.lineTo.apply(this, [100,100]);
}; 
```

该代码将`.lineTo`调用`MyObj`as `this`。
如果`MyObj`不知道如何处理该信息，或者`.lineTo`找不到它需要附加到的属性`MyObj`，那么它将失败。

在几乎所有其他从 读取`this`而不是写入它的情况下，`this`指的是`window`.

另一个常见的陷阱：函数内部的函数。

```
MyObj = {
    name : "Bob",
    sayName : function () {
        console.log(this.name); // works -- "this"===MyObj
        var say_it_again = function () {
            console.log(this.name + ", for the second time");
        };
        say_it_again();
        // second function doesn't work -- "this"===window
}; 
```

为了`this`在这种情况下正确确定范围，请将其保存为第一个函数中的变量，并在第二个函数中引用它。

```
MyObj = {
    name : "Bob",
    sayName : function () {
        var person = this; // now the reference to "this" is kept in "person"
        console.log(this.name); // works -- "this"===MyObj
        var say_it_again = function () {
            console.log(person.name + ", for the second time");
        };
        say_it_again();
        // works -- "person" refers to the saved variable in the first function
        // that variable happens to hold a reference to "this" from the first function
        // which happens to be MyObj
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-07T14:01:19.737

`lineTo`取决于`this`作为上下文的对象

通常你称它为`ctx.lineTo(...)`，隐式设置`this=ctx`

但是，当您使用 时`.apply`，您可以选择覆盖`this`

如果您说`....lineTo.apply(this, ...)`您要设置`this`为范围内的任何内容（通常是`window`对象，或者如果您使用点表示法，则为其他内容）。

因此做`.....lineTo.apply(ctx, ...)`

# c# - Telerik.WinControls.UI.RadGridView 从 Resource 获取列 FormatString

> ID：11815958
> 
> 赞同：1
> 
> 时间：2012-08-05T11:17:39.070
> 
> 标签：c#, resources, telerik, radgridview

我在 .net 4 的 Visual Studio 2010 c# 项目中使用 Telerik.WinControls.UI.RadGridView 但是当我在设计器模式下打开表单而不做任何更改时出现问题

radgrideview 中所有列的 form.designer.cs 代码更改如下

```
gridViewDecimalColumn1.FormatString = global::Projectname.Resource.name; 
```

# c# - 返回数据时使用语句

> ID：11815964
> 
> 赞同：5
> 
> 时间：2012-08-05T11:18:45.343
> 
> 标签：c#, c#-4.0, c#-3.0

我正在使用`Memory Management`while 返回如下数据。

```
private DataSet ReturnDs()
{
    using (DataSet ds = new DataSet())
    {
        return ds;
    }
} 
```

**查询**- 在返回数据时放置“使用”语句是否有任何问题？我仍然得到完整的模式以及接收函数中的数据？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-05T11:25:55.110

这绝对是一个错误的模式。它现在为您工作的唯一原因是它`DataSet.Dispose()`实际上是一个假人。

```
using (DataSet ds = new DataSet())
{
    return ds;
}  // there is a ds.Dispose() here but it does nothing. 
```

如果您将 DataSet 替换为例如 Enitity 框架 DbContext，那么您将不会在调用函数中看到任何数据。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-05T11:26:40.397

一般而言，处理您将要返回的对象是一个错误：您的代码尚未完成该对象，并且您将把一个损坏的对象交给调用者。

确实如此：不要`Dispose()`那样，这意味着：不要`using`在您将返回的对象上使用。由调用者来处理它：他们现在是所有者。当然，理想情况下，这应该记录在 API 中。

不过，更一般地说，您还需要考虑例外情况。如果*您的方法*错误会发生什么？对于复杂的场景，您可能需要以下内容：

```
SomeType foo = null;
try {
    // initialize and populate foo - this could error half-way through
    return foo;
} catch {
    if(foo != null) foo.Dispose();
    throw;
} 
```

以确保在故障情况下正确处置对象。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-05T11:23:56.373

使用`using`调用方法中的语句，而不是返回对象的方法。

```
public void Caller()
{
  using(DataSet ds = GetDataSet())
  {
    // code here
  }
}

public DataSet GetDataSet()
{
  // don't use a using statement here
  return ds;
} 
```

该`using`语句与执行此操作基本相同：

```
DataSet ds = null;
try
{
  // code here
}
finally
{
  if(ds != null)
  {
    ds.Dispose();
    ds = null;
  }
} 
```

所以，如果你`using`在一个方法中使用了一个语句，该语句应该返回`using`语句中的对象，它将返回一个 Disposed 对象（即关闭的流、关闭的数据集等），这意味着一些内部对象可能为 null ，或关闭。换句话说，所有的内部资源都会被清理干净，这也是实现 IDisposable 的首要目的。如果您的应用程序依赖其中一些可用的内部资源，例如在使用 Stream 对象时，它会抛出异常。

另请记住，并非所有`finally`块都写成相同的。请记住，实现 IDispoable 是为了清理任何 INTERNAL 资源和非托管对象。语句之外可能不需要这些内部资源`using`，因此有时使用该`using`语句可能看起来可以正常工作，但不建议这样做，并且肯定不适用于所有对象。如果 Microsoft 决定在未来的版本中更改 DataSet 对象，处理对您的应用程序至关重要的东西，那么您的工作代码将突然停止工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-05T11:21:31.080

我不确定你的问题到底是什么。

一旦方法通过返回某些东西结束，`ds.Dispose()`将自动被调用。

这意味着您的方法返回的 DataSet 将在您的调用方法接收到它时被释放。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-05T11:23:24.517

作为 Mert 评论，请注意您正在处理要返回的对象。但基本上， using 实际上是一个 try/finally 并且 dispose 将被称为方法返回。效果取决于每种类型的 IDisposable 实现。通常，您不应该处置（杀死）您返回给可能会使用它的调用者的实体。

# iphone - 当我按下计算器中的任何数字按钮时，iOS 模拟器会产生错误

> ID：11815965
> 
> 赞同：2
> 
> 时间：2012-08-05T11:18:58.290
> 
> 标签：iphone, ios, xcode, ios5, ios-simulator

***你好！***

我在 21.2 练习中遇到了麻烦。在那个练习中，我构建了分数计算器。我有 9 个按钮和数学动作。当我在 iOS 模拟器上按任何数字（1、2、3 或任何其他数字）时，它会生成一个错误：

```
 2012-08-05 15:09:05.026 Fraction_Calculator[834:f803] -[ViewController digit5]: unrecognized selector sent to instance 0x6843e00
2012-08-05 15:09:05.029 Fraction_Calculator[834:f803] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[ViewController digit5]: unrecognized selector sent to instance 0x6843e00'
*** First throw call stack:
(0x14b5022 0xeb5cd6 0x14b6cbd 0x141bed0 0x141bcb2 0x14b6e99 0x1b14e 0x1b0e6 0xc1ade 0xc1fa7 0xc1266 0x403c0 0x405e6 0x26dc4 0x1a634 0x139fef5 0x1489195 0x13edff2 0x13ec8da 0x13ebd84 0x13ebc9b 0x139e7d8 0x139e88a 0x18626 0x28ad 0x2815)
terminate called throwing an exception 
```

*这意味着：* “**无法识别的选择器发送到实例 0x6843e00** ”和“ **'-[ViewController digit5]: 无法识别的选择器发送到实例 0x6843e00'** ”。

*这是我的那个程序的代码：*

**视图控制器.h**

**代码：Objective-C**

```
#import <UIKit/UIKit.h>
#import "Calculator.h"

@interface ViewController : UIViewController

@property (strong, nonatomic) IBOutlet UILabel *display;

-(void) processDigit: (int) digit;
-(void) processOp: (char) theOp;
-(void) storeFracPart;

-(IBAction) clickDigit: (UIButton *) sender;

-(IBAction) clickPlus;
-(IBAction) clickMinus;
-(IBAction) clickMultiply;
-(IBAction) clickDivide;

-(IBAction) clickOver;
-(IBAction) clickEquals;
-(IBAction) clickClear;

@end 
```

**视图控制器.m**

**代码：Objective-C**

```
#import "ViewController.h"

@interface ViewController ()

@end

@implementation ViewController
{
    char                op;
    int                 currentNumber;
    BOOL                firstOperand, isNumerator;
    Calculator          *myCalculator;
    NSMutableString     *displayString;
}

@synthesize display;

-(void) processDigit:(int)digit
{
    currentNumber=currentNumber*10+digit;

    [displayString appendString:[NSString stringWithFormat:@"%i", digit]];
    display.text=displayString;
}

-(IBAction) clickDigit:(UIButton *)sender
{
    int digit=sender.tag;

    [self processDigit: digit];
}

-(void) processOp: (char) theOp
{
    NSString *opStr;

    op=theOp;

    switch(theOp)
    {
            case '+':
                opStr=@"+";
                break;
            case '-':
                opStr=@"-";
                break;
            case '*':
                opStr=@"*";
                break;
            case '/':
                opStr=@"/";
                break;
    }

    [self storeFracPart];
    firstOperand=NO;
    isNumerator=YES;

    [displayString appendString: opStr];
    display.text=displayString;
}

-(void) storeFracPart
{
    if(firstOperand)
    {
       if(isNumerator)
       {
           myCalculator.operand1.numerator=currentNumber;
           myCalculator.operand1.denominator=1;
       }
        else
            myCalculator.operand1.denominator=currentNumber;
    }
    else if (isNumerator)
    {
        myCalculator.operand2.numerator=currentNumber;
        myCalculator.operand2.denominator=1;
    }
    else
    {
        myCalculator.operand2.denominator=currentNumber;
        firstOperand=YES;
    }
currentNumber=0;
}

-(IBAction) clickOver
{
    [self storeFracPart];
    isNumerator=NO;
    [displayString appendString: @"/"];
    display.text=displayString;
}

-(IBAction) clickPlus
{
    [self processOp: '+'];
}

-(IBAction) clickMinus
{
    [self processOp: '-'];
}

-(IBAction) clickMultiply
{
    [self processOp: '*'];
}

-(IBAction) clickDivide
{
    [self processOp: '/'];
}

-(IBAction) clickEquals
{
    if (firstOperand==NO)
    {
        [self storeFracPart];
        [myCalculator performOperation: op];

        [displayString appendString: @"="];
        [displayString appendString: [myCalculator.accumulator convertToString]];
        display.text=displayString;

        currentNumber=0;
        isNumerator=YES;
        firstOperand=YES;
        [displayString setString: @""];        
    }
}

-(IBAction) clickClear
{
    isNumerator=YES;
    firstOperand=YES;
    currentNumber=0;
    [myCalculator clear];

    [displayString setString:@""];
    display.text=displayString;
}

- (void)viewDidLoad
{
    //[super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.

    firstOperand=YES;
    isNumerator=YES;
    displayString=[NSMutableString stringWithCapacity:40];
    myCalculator=[[Calculator alloc]init];
}

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
}

@end 
```

**非常感谢！**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-05T11:28:01.577

错误消息意味着代码正在尝试调用`digit5`没有方法调用的对象上的方法`digit5`。如果这是您的按钮正在调用的方法，您需要在视图控制器类中定义它，大概与`digit0`..`digit9`方法一起定义。

但是，有十个方法可能不是最佳的：更好的方法是用对应于它们各自数字的标签来标记按钮，对所有数字按钮使用相同的方法，并在调用中获取标签。

`tag`是 的一个`NSInteger`属性`UIView`，定义如下：

```
@property(nonatomic) NSInteger tag 
```

# openerp - 在 openerp6.1 中调试

> ID：11815968
> 
> 赞同：1
> 
> 时间：2012-08-05T11:19:28.170
> 
> 标签：openerp

我在 sale.py 中添加了以下代码，但在 server.log 中看不到打印输出。我希望通过此函数的返回列表填充 one2many 字段

## 我在windows xp下使用openerp6.1

## 我的代码是

```
 def model_id_change(self,cr,uid,ids,model_id,context=None):

        list1=[]

        if context is None:

            context = {}

        print "Hi"

        print str(model_id)

        if not model_id:

            raise osv.except_osv(_('No Model Selected !'),_('You have to select Model.'))

        querystr = 'SELECT microswitch FROM product_model WHERE id = ' + model_id

        print querystr

        try:

            cr.execute(querystr)

            s=cr.fetchone()

            print s

            list1=[]
            print list1

            for t in s.split(','):

                if t:

                    list1.append(t)

        except:

            exceptionType, exceptionValue, exceptionTraceback = sys.exc_info()

        return(list1) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T06:39:13.600

print 语句打印到标准输出。如果您想在服务器日志中获取某些内容，请使用日志记录模块。

```
import logging
logger = logging.getLogger(__name__)
logger.info('my message, with a substituted variable %s', s) 
```

# git - 在詹金斯奴隶上安装 git

> ID：11815969
> 
> 赞同：6
> 
> 时间：2012-08-05T11:19:40.703
> 
> 标签：git, jenkins

我有 Linux 和 Windows 的奴隶。我想在主人第一次需要在奴隶上运行 git 时自动在奴隶上安装 Git。如果可能的话，你如何告诉 Jenkins 在 Win 或 Linux 上正确安装它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-05T11:53:07.473

基本上，您需要检查哪个 git 是否返回某些内容（Windows 上的哪个 git.exe，前提是您已经安装了[GoW -- Windows 上的 Gnu -- commands](https://github.com/bmatzelle/gow/wiki/)）。

如果失败，请参阅“[**设置您的 Git 环境**](http://yuilibrary.com/yui/docs/tutorials/git/)”

在 Linux 上：

```
sudo yum install git-core       # RedHat
sudo apt-get install git-core   # Ubuntu 
```

在 Windows 上：

下载并解压[msysgit 的便携版本](http://code.google.com/p/msysgit/downloads/list)。
您可以使用 Gow 中包含的 curl 命令编写脚本，但要解压缩 7z 存档，您可能需要[安装 Peazip](http://peazip.sourceforge.net/)（它也以[便携式安装](http://peazip.sourceforge.net/peazip-portable.html)的形式提供，一个简单的 zip 存档）。

# spring - jpa2.0 + spring3.1 + hibernate4.1 无法构建EntityManagerFactory

> ID：11815972
> 
> 赞同：0
> 
> 时间：2012-08-05T11:20:05.493
> 
> 标签：spring, hibernate, jpa-2.0

我整天都在处理它，但我没有解决它。请帮帮我。我会丢失一些罐子吗？

我使用 Junit4 来测试我的代码，在第一行代码中：

```
ApplicationContext context = new ClassPathXmlApplicationContext(
            new String[] { "applicationContext.xml" }); 
```

我遇到了这样的问题：

**我的问题：**

```
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'cusRoleService': Injection of resource dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'cusRoleDAO': Injection of persistence dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [applicationContext.xml]: Invocation of init method failed; nested exception is javax.persistence.PersistenceException: [PersistenceUnit: welfare] Unable to build EntityManagerFactory
at org.springframework.context.annotation.CommonAnnotationBeanPostProcessor.postProcessPropertyValues(CommonAnnotationBeanPostProcessor.java:306)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1106)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:585)
at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:913)
at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:464)
at org.springframework.context.support.ClassPathXmlApplicationContext.<init>(ClassPathXmlApplicationContext.java:139)
at org.springframework.context.support.ClassPathXmlApplicationContext.<init>(ClassPathXmlApplicationContext.java:93)
at com.wfm.web.TestDao.testGetBaseDao(TestDao.java:16)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:44)
at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:41)
at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)
at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:76)
at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)
at org.junit.runners.ParentRunner$3.run(ParentRunner.java:193)
at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:52)
at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:191)
at org.junit.runners.ParentRunner.access$000(ParentRunner.java:42)
at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184)
at org.junit.runners.ParentRunner.run(ParentRunner.java:236)
at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:49)
at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'cusRoleDAO': Injection of persistence dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [applicationContext.xml]: Invocation of init method failed; nested exception is javax.persistence.PersistenceException: [PersistenceUnit: welfare] Unable to build EntityManagerFactory
at org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor.postProcessPropertyValues(PersistenceAnnotationBeanPostProcessor.java:342)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1106)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
at org.springframework.beans.factory.support.DefaultListableBeanFactory.findAutowireCandidates(DefaultListableBeanFactory.java:848)
at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:790)
at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:707)
at org.springframework.context.annotation.CommonAnnotationBeanPostProcessor.autowireResource(CommonAnnotationBeanPostProcessor.java:438)
at org.springframework.context.annotation.CommonAnnotationBeanPostProcessor.getResource(CommonAnnotationBeanPostProcessor.java:416)
at org.springframework.context.annotation.CommonAnnotationBeanPostProcessor$ResourceElement.getResourceToInject(CommonAnnotationBeanPostProcessor.java:549)
at org.springframework.beans.factory.annotation.InjectionMetadata$InjectedElement.inject(InjectionMetadata.java:159)
at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:87)
at org.springframework.context.annotation.CommonAnnotationBeanPostProcessor.postProcessPropertyValues(CommonAnnotationBeanPostProcessor.java:303)
... 35 more
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [applicationContext.xml]: Invocation of init method failed; nested exception is javax.persistence.PersistenceException: [PersistenceUnit: welfare] Unable to build EntityManagerFactory
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1455)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
at org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor.findDefaultEntityManagerFactory(PersistenceAnnotationBeanPostProcessor.java:530)
at org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor.findEntityManagerFactory(PersistenceAnnotationBeanPostProcessor.java:496)
at org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor$PersistenceElement.resolveEntityManager(PersistenceAnnotationBeanPostProcessor.java:657)
at org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor$PersistenceElement.getResourceToInject(PersistenceAnnotationBeanPostProcessor.java:630)
at org.springframework.beans.factory.annotation.InjectionMetadata$InjectedElement.inject(InjectionMetadata.java:159)
at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:87)
at org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor.postProcessPropertyValues(PersistenceAnnotationBeanPostProcessor.java:339)
... 51 more
Caused by: javax.persistence.PersistenceException: [PersistenceUnit: welfare] Unable to build EntityManagerFactory
at org.hibernate.ejb.Ejb3Configuration.buildEntityManagerFactory(Ejb3Configuration.java:915)
at org.hibernate.ejb.Ejb3Configuration.buildEntityManagerFactory(Ejb3Configuration.java:890)
at org.hibernate.ejb.HibernatePersistence.createContainerEntityManagerFactory(HibernatePersistence.java:74)
at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:268)
at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:310)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1514)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1452)
... 64 more
Caused by: org.hibernate.HibernateException: Error applying BeanValidation relational constraints
at org.hibernate.cfg.beanvalidation.BeanValidationIntegrator.applyRelationalConstraints(BeanValidationIntegrator.java:219)
at org.hibernate.cfg.beanvalidation.BeanValidationIntegrator.integrate(BeanValidationIntegrator.java:126)
at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:306)
at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:1744)
at org.hibernate.ejb.EntityManagerFactoryImpl.<init>(EntityManagerFactoryImpl.java:94)
at org.hibernate.ejb.Ejb3Configuration.buildEntityManagerFactory(Ejb3Configuration.java:905)
... 70 more
Caused by: java.lang.reflect.InvocationTargetException
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.hibernate.cfg.beanvalidation.BeanValidationIntegrator.applyRelationalConstraints(BeanValidationIntegrator.java:208)
... 75 more
Caused by: org.hibernate.HibernateException: Unable to build the default ValidatorFactory
at org.hibernate.cfg.beanvalidation.TypeSafeActivator.getValidatorFactory(TypeSafeActivator.java:524)
at org.hibernate.cfg.beanvalidation.TypeSafeActivator.applyDDL(TypeSafeActivator.java:119)
... 80 more
Caused by: javax.validation.ValidationException: Unable to instantiate Configuration.
at javax.validation.Validation$GenericBootstrapImpl.configure(Validation.java:272)
at javax.validation.Validation.buildDefaultValidatorFactory(Validation.java:111)
at org.hibernate.cfg.beanvalidation.TypeSafeActivator.getValidatorFactory(TypeSafeActivator.java:521)
... 81 more
Caused by: java.lang.NullPointerException
at java.util.ResourceBundle.getBundle(ResourceBundle.java:960)
at org.hibernate.validator.engine.ResourceBundleMessageInterpolator.loadBundle(ResourceBundleMessageInterpolator.java:202)
at org.hibernate.validator.engine.ResourceBundleMessageInterpolator.getFileBasedResourceBundle(ResourceBundleMessageInterpolator.java:182)
at org.hibernate.validator.engine.ResourceBundleMessageInterpolator.<init>(ResourceBundleMessageInterpolator.java:81)
at org.hibernate.validator.engine.ResourceBundleMessageInterpolator.<init>(ResourceBundleMessageInterpolator.java:73)
at org.hibernate.validator.engine.ConfigurationImpl.<init>(ConfigurationImpl.java:57)
at org.hibernate.validator.HibernateValidator.createGenericConfiguration(HibernateValidator.java:43)
at javax.validation.Validation$GenericBootstrapImpl.configure(Validation.java:269)
... 83 more 
```

**我的persistence.xml**

```
<persistence xmlns="http://java.sun.com/xml/ns/persistence"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://java.sun.com/xml/ns/persistence 
    http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd"
version="2.0">
<persistence-unit name="welfare" transaction-type="RESOURCE_LOCAL">

    <properties>
        <property name="javax.persistence.validation.mode" value="NONE" />
        <property name="hibernate.Dialect" value="org.hibernate.dialect.Oracle10gDialect" />
        <property name="hibernate.hbm2ddl.auto" value="update" />
        <property name="show_sql" value="true" />
    </properties>
</persistence-unit> 
```

**我的 applicationContext.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:p="http://www.springframework.org/schema/p"
xmlns:aop="http://www.springframework.org/schema/aop" xmlns:tx="http://www.springframework.org/schema/tx"
xmlns:jdbc="http://www.springframework.org/schema/jdbc" xmlns:context="http://www.springframework.org/schema/context"
xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd
http://www.springframework.org/schema/jdbc http://www.springframework.org/schema/jdbc/spring-jdbc-3.0.xsd
http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.0.xsd
http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-3.0.xsd">

<context:annotation-config />

<context:component-scan base-package="com.wfm.web" />

<aop:aspectj-autoproxy />

<bean
    class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
    <property name="locations">
        <list>
            <value>classpath:resources.properties</value>
        </list>
    </property>
</bean>

<bean id="dataSource"
    class="org.springframework.jdbc.datasource.LazyConnectionDataSourceProxy">
    <property name="targetDataSource">
        <bean class="org.logicalcobwebs.proxool.ProxoolDataSource">
            <property name="driver" value="${db.driver.class}" />
            <property name="driverUrl" value="${db.url}" />
            <property name="user" value="${db.username}" />
            <property name="password" value="${db.password}" />
            <property name="maximumConnectionCount" value="${proxool.maxConnCount}" />
            <property name="minimumConnectionCount" value="${proxool.minConnCount}" />
            <property name="statistics" value="${proxool.statistics}" />
            <property name="simultaneousBuildThrottle" value="${proxool.simultaneousBuildThrottle}" />
            <property name="trace" value="${proxool.trace}" />
        </bean>
    </property>
</bean>

<bean id="entityManagerFactory"
    class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
    <property name="dataSource" ref="dataSource" />
    <property name="persistenceXmlLocation" value="classpath:META-INF/persistence.xml" />
    <property name="persistenceUnitName" value="welfare" />

    <property name="persistenceProvider" ref="persistenceProvider" />
    <property name="jpaVendorAdapter" ref="jpaVendorAdapter" />
    <property name="jpaDialect" ref="jpaDialect" />
</bean>

<bean id="persistenceProvider" class="org.hibernate.ejb.HibernatePersistence" />
<bean id="jpaDialect" class="org.springframework.orm.jpa.vendor.HibernateJpaDialect" />
<bean id="jpaVendorAdapter"
    class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter" />

<bean id="transactionManager" class="org.springframework.orm.jpa.JpaTransactionManager">
    <property name="entityManagerFactory" ref="entityManagerFactory" />
</bean>

<tx:annotation-driven transaction-manager="transactionManager" /> 
```

**我的罐子：** ![在此处输入图像描述](../Images/be00d576aed18c5a8a7aeef2e4be96c0.png)

有我的 java 代码，我有一个 BaseDAO 并使用 @PersistenceContext 将 EntityManager 注入其中。

```
@Transactional(propagation = Propagation.REQUIRED) 
public class BaseDAO<T, PK extends Serializable> implements IBaseDAO<T, PK> {

private static final Logger logger = Logger.getLogger(BaseDAO.class);

private Class<T> entityClass;

    @PersistenceContext
private EntityManager entityManager;

public BaseDAO() {
    this.entityClass = (Class<T>) ((ParameterizedType) getClass()
            .getGenericSuperclass()).getActualTypeArguments()[0];
} 
    .........
} 
```

我的 BaseDAO 有问题吗？

请帮助我，谢谢。

* * *

**我已经解决了这个问题！！！-_-**

必须在正确的位置将 javax.persistence.validation.mode 属性设置为 none。

我将 persistence.xml 和 applicationContext.xml 更改为：

**持久性.xml**

```
<persistence xmlns="http://java.sun.com/xml/ns/persistence"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://java.sun.com/xml/ns/persistence 
    http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd"
version="2.0">
<persistence-unit name="welfare" transaction-type="RESOURCE_LOCAL"/>
</persistence> 
```

**应用程序上下文.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:p="http://www.springframework.org/schema/p"
xmlns:aop="http://www.springframework.org/schema/aop" xmlns:tx="http://www.springframework.org/schema/tx"
xmlns:jdbc="http://www.springframework.org/schema/jdbc" xmlns:context="http://www.springframework.org/schema/context"
xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.1.xsd
http://www.springframework.org/schema/jdbc http://www.springframework.org/schema/jdbc/spring-jdbc-3.1.xsd
http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.1.xsd
http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-3.1.xsd">

<context:annotation-config />

<context:component-scan base-package="com.wfm.web" />

<bean
    class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
    <property name="locations">
        <list>
            <value>classpath:resources.properties</value>
        </list>
    </property>
</bean>

<bean id="dataSource"
    class="org.springframework.jdbc.datasource.LazyConnectionDataSourceProxy">
    <property name="targetDataSource">
        <bean class="org.logicalcobwebs.proxool.ProxoolDataSource">
            <property name="driver" value="${db.driver.class}" />
            <property name="driverUrl" value="${db.url}" />
            <property name="user" value="${db.username}" />
            <property name="password" value="${db.password}" />
            <property name="maximumConnectionCount" value="${proxool.maxConnCount}" />
            <property name="minimumConnectionCount" value="${proxool.minConnCount}" />
            <property name="statistics" value="${proxool.statistics}" />
            <property name="simultaneousBuildThrottle" value="${proxool.simultaneousBuildThrottle}" />
            <property name="trace" value="${proxool.trace}" />
        </bean>
    </property>
</bean>

<bean id="entityManagerFactory"
    class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
    <property name="dataSource" ref="dataSource" />
    <property name="persistenceXmlLocation" value="classpath:META-INF/jpa-persistence.xml" />
    <property name="persistenceUnitName" value="welfare" />
    <property name="persistenceProvider" ref="persistenceProvider" />
    <property name="jpaVendorAdapter" ref="jpaVendorAdapter" />
    <property name="jpaDialect" ref="jpaDialect" />
    <property name="jpaProperties">
        <props>
            <prop key="hibernate.show_sql">true</prop>
            <prop key="hibernate.hbm2ddl.auto">update</prop>
            <prop key="javax.persistence.validation.mode">none</prop>
        </props>
    </property>
</bean>

<bean id="persistenceProvider" class="org.hibernate.ejb.HibernatePersistence" />
<bean id="jpaDialect" class="org.springframework.orm.jpa.vendor.HibernateJpaDialect" />
<bean id="jpaVendorAdapter"
    class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter">
    <property name="database" value="ORACLE" />
</bean>

<bean id="transactionManager" class="org.springframework.orm.jpa.JpaTransactionManager">
    <property name="entityManagerFactory" ref="entityManagerFactory" />
</bean>

<tx:annotation-driven transaction-manager="transactionManager" />
</beans> 
```

**关键是**

```
<prop key="javax.persistence.validation.mode">none</prop> 
```

**谢谢@Vakimshaar 和@Sathish Murugesan 的帮助！谢谢。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T18:14:27.400

如果您将 JPA 2.0 与 Spring Hibernate 一起使用。您可以尝试将您的 persistence.xml 重命名为 JPA-persistence.xml。Persistence.xml 有时会引用默认实现。此外，注释掉您在 persistence.xml 中的 Validation Mode 标记，看看您是否仍然遇到相同的异常。最后检查 resource.properties 是否在您的类路径中。

# symfony - 登录 ESI 组件中的缓存页面会重定向到 /_internal/secure/.../none.html

> ID：11815973
> 
> 赞同：1
> 
> 时间：2012-08-05T11:20:16.780
> 
> 标签：symfony, varnish, esi

我刚刚设置了清漆，并且在投入生产之前我已经在端口 8080 上做了一些测试。

我注意到，如果我在缓存页面上：

```
/**
 * @Cache(smaxage="10800")
 * @Route("/{_locale}/", name="homepage2", requirements={"_locale" = "en|fr"})
 * @Template()
 */
public function indexAction()
{
    return array();
} 
```

我尝试通过包含的组件登录（不使用外部服务，但使用正常登录）`ESI`

```
 {% render "GamerCertifiedHomeBundle:Home:login" with {}, { 'standalone': true } %} 
```

它最终将我重定向到一个没有样式且没有 URL 的页面上`...:8080/_internal/secure/MyBundleHomeBundle:Home:login/none.html`

[Step1 截图](http://screencast.com/t/7ycyf17DOt)/ [Step2 截图](http://screencast.com/t/wxGNTFVy)

如果我回到主页，我已经登录了。

请问我该如何避免呢？

编辑 ：

*   [Apache2.conf](https://gist.github.com/ccfd6c970d42ab94949e)
*   [阿帕奇虚拟主机](https://gist.github.com/8458118ed27ce6f86801)
*   [清漆 VCL](https://gist.github.com/bba902cfa9f875abbb34)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T14:47:46.940

在分析了[聊天](https://chat.stackoverflow.com/rooms/14918/discussion-between-tristan-and-thecatontheflat)中的问题后，我发现`_target_path`为了安全，成功的重定向是通过以下方式在表单中生成的：

```
<input type="hidden" name="_target_path" value="{{ app.request.uri }}" /> 
```

并且由于这部分是使用独立视图呈现的 - 它具有特定的 uri（带`_internal`前缀）。

您可以通过为`app.request.uri`注入应用更改的逻辑来避免这种情况。

1.  将其传递给控制器​​：

    ```
     {% render yourAction with {'uri': app.request.uri}, {'standalone': true} %} 
    ```

2.  在您的控制器中，只需将其传递给您的视图

    ```
     public function yourAction ($uri)
     {
         ...
         return array('uri' => $uri);
     } 
    ```

3.  在您的模板中使用它

    ```
     <input type="hidden" name="_target_path" value="{{ uri }}" /> 
    ```

* * *

享受吧！;)

# wordpress - Wordpress 自定义元框验证

> ID：11815983
> 
> 赞同：5
> 
> 时间：2012-08-05T11:21:32.223
> 
> 标签：wordpress

有什么方法可以在不使用 javascript 的情况下验证自定义元框字段。如果它不验证我想停止将帖子保存到数据库中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T14:50:16.697

由于 'save_post' 操作是在发布和更新之后运行的，因此如果没有骇人听闻的替代方案，确实无法验证自定义密钥。

但是，我认为您可以按照 Viral 建议的方式通过使用“save_post”来模仿您想要的功能，而不是在验证错误时中断或取消保存过程，您可以完全删除该帖子：

```
add_action('save_post', 'validate_meta');
function validate_meta($post_id)
{
    if ( defined('DOING_AUTOSAVE') && DOING_AUTOSAVE ) 
      return $post_id;
    /*USE THIS ONLY IF YOU ARE UTILIZING NONCE FIELDS IN A CUSTOM META BOX
    if ( !wp_verify_nonce( $_POST['metabox_nonce'], basename(__FILE__) ) )
      return $post_id;*/
    /*Use plugin_basename(__FILE__) if this is an actual plugin, rather than
    a part of your theme*/

    if ( 'page' == $_POST['post_type'] ) 
    {
        if ( !current_user_can( 'edit_page', $post_id ) )
            return $post_id;
    }
    else
    {
        if ( !current_user_can( 'edit_post', $post_id ) )
            return $post_id;
    }

    /*VALIDATE YOUR METADATA HERE HOWEVER YOU LIKE
    if(is_valid($_POST['metadata']))
        $validated = true;
    else
        $validated = false;
    */

    if(!$validated)
        wp_delete_post($post_id, true);
    else
        return $post_id;
} 
```

使用这种方法唯一需要注意的是，它将同时在发布和更新时运行。您可能需要考虑添加检查以确保仅删除新发布的帖子，更新的帖子回滚到以前的版本并删除无效的修订。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-22T18:53:33.820

过滤器`wp_insert_post_data`就是您要寻找的。这样的事情应该可以解决问题：

```
add_filter( 'wp_insert_post_data', 'my_validation_function' );

function my_validation_function( $data ) {
    // Don't want to do this on autosave
    if ( defined( 'DOING_AUTOSAVE' ) && DOING_AUTOSAVE )
        return $data;
    if ( $data['some_key'] != 'some_value' ||
         $_POST['some_meta_key'] != 'some_meta_value' ) {
        $data['post_status'] = 'draft'; // or whatever status to revert to
        add_filter( 'redirect_post_location', 'remove_message'); // remove the publish success message
    }
    return $data;
}

function remove_message( $location ) {
    return remove_query_arg( 'message', $location);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T05:21:09.167

直接从 WP Codex @ [http://codex.wordpress.org/Function_Reference/add_meta_box](http://codex.wordpress.org/Function_Reference/add_meta_box)调用`save_post`钩子并指定将运行以验证/保存数据的函数：

```
/* Do something with the data entered */
add_action('save_post', 'myplugin_save_postdata'); 
```

然后定义该函数，它将自动传递帖子 ID。此外，您可以访问 $_POST 数组以获取元框中的值：

```
/* When the post is saved, saves our custom data */
function myplugin_save_postdata( $post_id ) {
  // verify if this is an auto save routine. 
  // If it is our form has not been submitted, so we dont want to do anything
  if ( defined('DOING_AUTOSAVE') && DOING_AUTOSAVE ) 
      return $post_id;

  // verify this came from the our screen and with proper authorization,
  // because save_post can be triggered at other times

  if ( !wp_verify_nonce( $_POST['myplugin_noncename'], plugin_basename(__FILE__) ) )
      return $post_id;

  // Check permissions
  if ( 'page' == $_POST['post_type'] ) 
  {
    if ( !current_user_can( 'edit_page', $post_id ) )
        return $post_id;
  }
  else
  {
    if ( !current_user_can( 'edit_post', $post_id ) )
        return $post_id;
  }

  // OK, we're authenticated: we need to find and save the data

  $mydata = $_POST['myplugin_new_field'];

  // Do something with $mydata 
  // probably using add_post_meta(), update_post_meta(), or 
  // a custom table (see Further Reading section below)

   return $mydata;
} 
```

您对有效数据的所有例程都将在此函数中完成。最后，您可能会使用以下方式保存数据： `update_post_meta('meta_key', 'meta_value');`

# javascript - 如何在 javascript 或 Jquery 中调用 SOAP (XML) webservice？

> ID：11815985
> 
> 赞同：0
> 
> 时间：2012-08-05T11:21:48.047
> 
> 标签：javascript, jquery

我正在尝试在 javascript / Jquery 中调用 asp.net webservice，我尝试了很多示例，但不幸的是没有成功，

这是我目前正在尝试的代码，

```
 login("abc@gmail.com", "123456");
    var productServiceUrl = 'http://localhost:50575/Service1.asmx?op=test'; // Preferably write this out from server side

    function login(Email, Password) {
        var soapMessage = '<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"> \
<soap:Body> \
<login xmlns="http://test.com/"> \
<Email>' + Email + '</Email> \
<Password>' + Password + '</Password> \
</login> \
</soap:Body> \
</soap:Envelope>';

        $.ajax({
            url: productServiceUrl,
            type: "GET",
            dataType: "xml",
            data: soapMessage,
            complete: endSaveProduct,
            error: function (a, b, c) {
                alert(a + "\n"  + b + "\n" + c);
            },
            contentType: "text/xml; charset=\"utf-8\""
        });

        return false;
    }

    function endSaveProduct(xmlHttpRequest, status) {
        $(xmlHttpRequest.responseXML)
    .find('loginResult')
    .each(function () {
        alert( $(this).find('Message').text());
    });
    } 
```

请帮帮我，在此先感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-05T11:46:04.077

有多个问题：

*   您正在向不同的域发送请求，因此除非该域发送跨域资源共享 (CORS) 标头`Access-Control-Allow-Origin: *`或明确允许您的来源，否则它将无法工作
*   您正在使用`GET`应该使用的地方`POST`，因为在 SOAP over HTTP 中，信封必须在请求正文中。
*   ~~jQuery 总是认为你的数据是`application/x-www-form-urlencoded`，除非你设置`processData`为 false。只有设置`contentType`只会使标题谎言并且实际上并没有改变这一点。~~`data`实际上，如果参数是字符串，则情况并非如此。

您的目标域似乎不允许 CORS，因此无法直接从客户端执行此操作。您必须使用服务器代理来执行请求。

如果他们允许 CORS，你会这样做：

```
var soapMessage = '<?xml version="1.0" encoding="utf-8"?>\
                    <soap12:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap12="http://www.w3.org/2003/05/soap-envelope">\
                      <soap12:Body>\
                        <login xmlns="http://tastygo.com/">\
                          <BBMID>string</BBMID>\
                          <Email>string</Email>\
                          <Password>string</Password>\
                        </login>\
                      </soap12:Body>\
                    </soap12:Envelope>';

$.ajax( "http://m.allaccesstnt.com/AATnTWebservices/Webservices/Userwebservice.asmx", {

    contentType: "application/soap+xml; charset=utf-8",
    type: "POST", //important
    dataType: "xml",
    data: soapMessage

}); 
```

但这不起作用，因为服务器不允许 OPTIONS，浏览器必须使用它来确定是否允许跨域请求：

```
OPTIONS http://m.allaccesstnt.com/AATnTWebservices/Webservices/Userwebservice.asmx 405 (Method Not Allowed) 
```

第二个问题是：

```
XMLHttpRequest cannot load http://m.allaccesstnt.com/AATnTWebservices/Webservices/Userwebservice.asmx. Origin http://stackoverflow.com is not allowed by Access-Control-Allow-Origin. 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-12-25T18:40:52.450

只需添加[http://m.allaccesstnt.com/AATnTWebservices/Webservices/Userwebservice.asmx/](http://m.allaccesstnt.com/AATnTWebservices/Webservices/Userwebservice.asmx/)**测试** 并在 Web 服务器端添加标题

# javascript - jquery.cycle 隐藏字段更新

> ID：11815987
> 
> 赞同：0
> 
> 时间：2012-08-05T11:21:59.810
> 
> 标签：javascript, jquery, onclick, jquery-cycle

我正在使用 jquery.cycle 图像查看器

用户单击下一个或上一个以滚动图像

我需要知道显示的图像，并且要在隐藏的表单字段中更新该值，以便我可以存储用户选择的图像。

这是循环设置：

```
<script type="text/javascript">
$('#s2').cycle({ 
fx:     'fade', 
speed:  'normal', 
timeout: 0, 
next:   '#next2', 
prev:   '#prev2' 
});
</script> 
```

它的作用是显示列表中的图像，一次从容器 div 中显示图像 - 例如

```
<div id="s2" class="pics">
    <img src=http://blah.com/1.JPG>
    <img src=http://blah.com/2.JPG>
    <img src=http://blah.com/3.JPG>
    <img src=http://blah.com/4.JPG>
</div>

<div class="nav">
    <a id="prev2" href="#">Prev</a> <a id="next2" href="#">Next</a>
</div> 
```

有没有办法绑定可以知道当前图像然后更新隐藏字段的onclick？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T11:57:13.200

[在这里](http://jquery.malsup.com/cycle/options.html)你可以找到对循环插件选项的参考（或者你可以查看源代码）。

我想你想要这个`after`属性：

```
$('#s2').cycle({
   ...
   after: function(currSlideElement, nextSlideElement, options, forwardFlag){
    $('input:hidden').val(currSlideElement.val()); //this is probably an object so you'll need to console.log it to see how to get the value     }
}); 
```

请注意，我不确定 currSlideElement 是 objetc 还是只是一个 id，所以只需在其上执行 console.log 即可查看其属性。

# xslt - 将“模式”属性添加到 xslt 样式表

> ID：11815988
> 
> 赞同：2
> 
> 时间：2012-08-05T11:22:02.707
> 
> 标签：xslt, xslt-2.0

我有一个 xslt 样式表，它的功能没有问题。我需要将 mode 属性添加到所有 xsl:template 元素。为了将属性添加到所有元素并仍然使样式表正常运行，我应该记住哪些事实。任何帮助表示赞赏。先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T11:36:27.410

当然，这取决于样式表和您要使用的确切模式值，有关详细信息，请参阅[http://www.w3.org/TR/xslt20/#modes](http://www.w3.org/TR/xslt20/#modes)。

假设您有类似没有模式属性的模板，例如

```
<xsl:template match="foo">
  <bar>
    <xsl:apply-templates/>
  </bar>
</xsl:template> 
```

并且您想使用某种模式，那么您必须同时更改 the`xsl:template`和`xsl:apply-templates`eg

```
<xsl:template match="foo" mode="m1">
  <bar>
    <xsl:apply-templates mode="m1"/>
  </bar>
</xsl:template> 
```

但是，在`apply-templates`您有不同的选择时，您可以使用

```
<xsl:template match="foo" mode="m1">
  <bar>
    <xsl:apply-templates mode="#current"/>
  </bar>
</xsl:template> 
```

尽管使用单个模式值没有区别。

# .net - Z3 解决方案中的奇怪变量值

> ID：11815990
> 
> 赞同：1
> 
> 时间：2012-08-05T11:22:16.747
> 
> 标签：.net, variables, z3

我在 Z3 中有以下模型（将代码粘贴到[http://research.microsoft.com/en-us/um/redmond/projects/z3/](http://research.microsoft.com/en-us/um/redmond/projects/z3/)以进行尝试）。Web 界面给了我一个解决方案，见下文。但是，当我通过 .NET 求解同一模型并使用 Evaluate() 获取变量值时，我得到了不同的输出，我不明白。如您所见，我得到的不是值，而是表达式。我的问题是：如何获取 .NET 中的值？作为记录，我仔细检查了我在 .NET 中构建的模型是否与此处粘贴的模型相同。我还看到了这篇文章：[发布](https://stackoverflow.com/questions/10197970/strange-z3-model-value)并尝试应用修复（将 auto_config 设置为 false），但这只会导致求解器无法计算解决方案。

**模型：**

```
 Q311, Q411, Q431, QQ311, QQ411, QQ431, H11, H41 = Reals('Q311 Q411 Q431 QQ311 QQ411 QQ431 H11 H41')
solve(
Q411 + Q311 <= 155,
Q431 - Q311 <= -28.015,
-Q431 - Q411 <= -126.985,
-Q411 - Q311 <= -155,
-Q431 + Q311 <= 28.015,
Q431 + Q411 <= 126.985,
43.015 - H11 - 0.0031 * QQ311 * Q311 <= 0,
H41 - H11 - 0.0031 * QQ411 * Q411 <= 0,
H41 - 43.015 - 0.0031 * QQ431 * Q431 <= 0,
-43.015 + H11 + 0.0031 * QQ311 * Q311 <= 0,
-H41 + H11 + 0.0031 * QQ411 * Q411 <= 0,
-H41 + 43.015 + 0.0031 * QQ431 * Q431 <= 0,
QQ311 - Q311 <= 0,
QQ411 - Q411 <= 0,
QQ431 - Q431 <= 0,
-QQ311 + Q311 <= 0,
-QQ411 + Q411 <= 0,
-QQ431 + Q431 <= 0,
Q311 >= 0,
Q411 >= 0,
Q431 >= 0,
QQ311 >= 0,
QQ411 >= 0,
QQ431 >= 0,
H11 >= 0,
H41 >= 0,
show=True) 
```

**网页界面解决方案：**

```
[Q411 = 83.5779688745?,
Q311 = 71.4220311254?,
Q431 = 43.4070311254?,
H11 = 27.2015697567?,
QQ311 = 71.4220311254?,
H41 = 48.8559280884?,
QQ411 = 83.5779688745?,
QQ431 = 43.4070311254?] 
```

**.NET 解决方案：**

```
Q311: (root-obj (+ (* 40000 (^ x 2)) (* 10158800 x) (- 929606391)) 2)
Q411: (root-obj (+ (* 40000 (^ x 2)) (* (- 22558800) x) 1606007609) 1)
Q431: (root-obj (+ (* 20 (^ x 2)) (* 6200 x) (- 306807)) 2)
QQ431: (root-obj (+ (* 20 (^ x 2)) (* 6200 x) (- 306807)) 2)
H11: (root-obj (+ (* 160000000000000000 (^ x 2)) (* 41281815903200000000 x) (- 1
241318258533436869359)) 2)
QQ311: (root-obj (+ (* 40000 (^ x 2)) (* 10158800 x) (- 929606391)) 2)
H41: (root-obj (+ (* 40000000000 (^ x 2)) (* (- 19162006800000) x) 8407015578762
89) 1)
QQ411: (root-obj (+ (* 40000 (^ x 2)) (* (- 22558800) x) 1606007609) 1) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T12:42:12.857

[阅读这篇文章后](https://stackoverflow.com/questions/9969616/z3-python-reals)，我能够理解输出。

我将 { "PP_DECIMAL", "true"} 添加到我的上下文配置中，现在我得到了我预期的十进制值。