# StackOverflow 问答 11076000-11076999

# c++ - XE2 - Indy TCPServer：编写和读取列表视图的最佳方式是什么？

> ID：11076005
> 
> 赞同：1
> 
> 时间：2012-06-18T01:06:31.397
> 
> 标签：c++, sockets, c++builder, indy, tcpserver

我正在使用 IdTCPServer 并且它在有限的时间内运行良好，我担心它与列表视图中的线程管理有关，因为我使用 TTimer 来处理数据 atm。所以我想知道我可以处理这些连接以进行读写的可能方法，服务器将处理许多连接（实时接收、处理和发送数据）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T02:31:00.183

`TIdTCPServer` is a multi-threaded component. Any access to the UI **must** be synchronized with the main UI thread, such as with Indy's `TIdSync` or `TIdNotify` classes, or bad things can happen. A `TTimer` in the main thread is an OK choice for accessing data, provided the data is being accessed in a thread-safe manner, such as with a mutex or critical section. But a timer is not necessarily the best choice. It really depends on what your code actually needs to do with the data and the UI. Without that information, it is hard to advise you what is the best approach to meet your needs. There are many choices available.

# ruby - 如何从 Ruby 调用 CreateWindowEx？

> ID：11076010
> 
> 赞同：2
> 
> 时间：2012-06-18T01:07:52.330
> 
> 标签：ruby, winapi, createwindowex

我有以下代码，如果我提供无效参数（尽管显然不起作用），这很好，但是每当我提供准确的参数时，ruby segfaults。我倾向于认为这是我的代码和/或 ruby​​ 实际调用此 API 函数的能力的问题，但我想要更多输入。我已经尝试过两者`Win32API`并`DL::Importer`获得相同的结果。有什么办法可以让它工作吗？

对于好奇的人，[这里有完整的背景资料](https://github.com/mscharley/ruby-skype/tree/windows-dl)`Win32API`，包括`DL::Importer`在不同分支上的尝试。您在这两种情况下都在寻找`examples/windows-test`。

**编辑：**我已经设法开始`RegisterClassEx`工作，但这仍然没有帮助。Ruby 默默地崩溃了`CreateWindowEx`。

下面给出这样的输出：

> wndproc：4293787656
> hInstance：4194304
> 进入RegisterClassEx
> 窗口类：49795
> 进入CreateWindowEx

**编辑 2**：我正在进行的代码变得有点大，可以将其全部粘贴到 SE 中。如果你想要所有的背景，你可以在上面的链接中看到它。不过，我已尝试保留此处包含的所有相关内容。

```
class Windows
  def initialize
    puts "wndproc: #{Win32::User32::WNDPROC}"

    hInstance = Win32::Kernel32::GetModuleHandle(DL::NULL)
    puts "hInstance: #{hInstance}"

    puts "Entering RegisterClassEx"

    @window_class_struct = Win32::User32::WNDCLASSEX.malloc
    @window_class_struct.cbSize        = Win32::User32::WNDCLASSEX.size
    @window_class_struct.style         = Win32::User32::CS_HREDRAW | Win32::User32::CS_VREDRAW
    @window_class_struct.lpfnWndProc   = Win32::User32::WNDPROC
    @window_class_struct.cbClsExtra    = 0
    @window_class_struct.cbWndExtra    = 0
    @window_class_struct.hInstance     = hInstance
    @window_class_struct.hIcon         = 0
    @window_class_struct.hCursor       = 0
    @window_class_struct.hbrBackground = Win32::User32::COLOR_WINDOWFRAME
    @window_class_struct.lpszMenuName  = DL::NULL
    @window_class_struct.lpszClassName = 'ruby-skype'
    @window_class_struct.hIconSm       = 0

    p @window_class_struct

    @window_class = Win32::User32::RegisterClassEx(@window_class_struct.to_i)
    puts "Window Class: #{@window_class}"

    puts "Entering CreateWindowEx"
    @window = Win32::User32::CreateWindowEx(0, 'ruby-skype', 'ruby-skype', Win32::User32::WS_OVERLAPPEDWINDOW,
                                    0, 0, 200, 200, DL::NULL, DL::NULL, DL::NULL)
    puts "Exited CreateWindowEx"

    p @window
  end

  module Win32

    module Types
      def included(m)
        m.module_eval {
          include ::DL::Win32Types

          # @see http://msdn.microsoft.com/en-us/library/windows/desktop/aa383751.aspx
          typealias('HBRUSH', 'HANDLE')
          typealias('HCURSOR', 'HANDLE')
          typealias('HICON', 'HANDLE')
          typealias('HMENU', 'HANDLE')
          typealias('HMODULE', 'HANDLE')
          typealias('LPCTSTR', 'unsigned char *')
          typealias('LPVOID', 'void *')
          typealias('WNDPROC', 'void *') # Actually a function pointer
          typealias('WNDCLASSEX', 'void *') # struct
        }
      end
      module_function :included
    end

    module User32
      extend DL
      extend DL::Importer
      dlload 'user32'
      include Types

      extern 'HWND CreateWindowEx(DWORD, LPCTSTR, LPCTSTR, DWORD, int, int, int, int, HWND, HMENU, HINSTANCE)'

      WNDPROC = set_callback DL::TYPE_LONG, 4 do |window_handle, message_id, wParam, lParam|
        puts "WM: #{message_id}"
      end
    end
  end
end

Windows.new 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T11:28:30.243

解决方案：使用`ffi`. 无论出于何种原因，它都不起作用`DL`（在引擎盖下`Win32API`使用）`DL`

完整的功劳在这里，无论这是哪里（我看不懂日语）：[http ://www19.atwiki.jp/tmtbnc/m/pages/56.html](http://www19.atwiki.jp/tmtbnc/m/pages/56.html)

我的猜测是因为`DL`似乎不支持`stdcall`，但老实说，我对此知之甚少。

我使用的 FFI 解决方案如下：

```
class Windows
  def initialize
    hInstance = Win32::GetModuleHandle(nil)

    @window_class = Win32::WNDCLASSEX.new
    @window_class[:style]         = Win32::CS_HREDRAW | Win32::CS_VREDRAW
    @window_class[:lpfnWndProc]   = method(:message_pump)
    @window_class[:hInstance]     = hInstance
    @window_class[:hbrBackground] = Win32::COLOR_WINDOWFRAME
    @window_class[:lpszClassName] = FFI::MemoryPointer.from_string 'ruby-skype'

    @window = Win32::CreateWindowEx(Win32::WS_EX_LEFT, ::FFI::Pointer.new(@window_class.atom), 'ruby-skype', Win32::WS_OVERLAPPEDWINDOW,
                                    0, 0, 0, 0, Win32::NULL, Win32::NULL, hInstance, nil)
  end

  def message_pump(window_handle, message_id, wParam, lParam)
    puts "WM: #{message_id}"
    Win32::DefWindowProc(window_handle, message_id, wParam, lParam)
  end

  module Win32
    extend FFI::Library
    ffi_lib('user32', 'kernel32')
    ffi_convention(:stdcall)

    private

    def self._func(*args)
      attach_function *args
      case args.size
        when 3
          module_function args[0]
        when 4
          module_function args[0]
          alias_method(args[1], args[0])
          module_function args[1]
      end
    end

    public

    ULONG_PTR = FFI::TypeDefs[:ulong]
    LONG_PTR = FFI::TypeDefs[:long]

    ULONG = FFI::TypeDefs[:ulong]
    LONG = FFI::TypeDefs[:long]
    LPVOID = FFI::TypeDefs[:pointer]
    INT = FFI::TypeDefs[:int]
    BYTE = FFI::TypeDefs[:uint16]
    DWORD = FFI::TypeDefs[:ulong]
    BOOL = FFI::TypeDefs[:int]
    UINT = FFI::TypeDefs[:uint]
    POINTER = FFI::TypeDefs[:pointer]
    VOID = FFI::TypeDefs[:void]

    HWND = HICON = HCURSOR = HBRUSH = HINSTANCE = HGDIOBJ =
        HMENU = HMODULE = HANDLE = ULONG_PTR
    LPARAM = LONG_PTR
    WPARAM = ULONG_PTR
    LPCTSTR = LPMSG = LPVOID
    LRESULT = LONG_PTR
    ATOM = BYTE
    NULL = 0

    WNDPROC = callback(:WindowProc, [HWND, UINT, WPARAM, LPARAM], LRESULT)

    class WNDCLASSEX < FFI::Struct
      layout :cbSize, UINT,
             :style, UINT,
             :lpfnWndProc, WNDPROC,
             :cbClsExtra, INT,
             :cbWndExtra, INT,
             :hInstance, HANDLE,
             :hIcon, HICON,
             :hCursor, HCURSOR,
             :hbrBackground, HBRUSH,
             :lpszMenuName, LPCTSTR,
             :lpszClassName, LPCTSTR,
             :hIconSm, HICON

      def initialize(*args)
        super
        self[:cbSize] = self.size
        @atom = 0
      end

      def register_class_ex
        (@atom = Win32::RegisterClassEx(self)) != 0 ? @atom : raise("RegisterClassEx Error")
      end

      def atom
        @atom != 0 ? @atom : register_class_ex
      end
    end # WNDCLASSEX

    class POINT < FFI::Struct
      layout :x, LONG,
             :y, LONG
    end

    class MSG < FFI::Struct
      layout :hwnd, HWND,
             :message, UINT,
             :wParam, WPARAM,
             :lParam, LPARAM,
             :time, DWORD,
             :pt, POINT
    end

    _func(:RegisterWindowMessage, :RegisterWindowMessageA, [LPCTSTR], UINT)
    _func(:GetModuleHandle, :GetModuleHandleA, [LPCTSTR], HMODULE)
    _func(:RegisterClassEx, :RegisterClassExA, [LPVOID], ATOM)
    _func(:CreateWindowEx, :CreateWindowExA, [DWORD, LPCTSTR, LPCTSTR, DWORD, INT, INT, INT, INT, HWND, HMENU, HINSTANCE, LPVOID], HWND)
    _func(:GetMessage, :GetMessageA, [LPMSG, HWND, UINT, UINT], BOOL)
    _func(:TranslateMessage, [LPVOID], BOOL)
    _func(:DispatchMessage, :DispatchMessageA, [LPVOID], BOOL)
    _func(:DefWindowProc, :DefWindowProcA, [HWND, UINT, WPARAM, LPARAM], LRESULT)

    # @!group Predefined WindowHandle's
    #
    # These are WindowHandle's provided by the Win32 API for special purposes.

    # Target for SendMessage(). Broadcast to all windows.
    HWND_BROADCAST = 0xffff
    # Used as a parent in CreateWindow(). Signifies that this should be a message-only window.
    HWND_MESSAGE = -3

    # @!endgroup

    # CreateWindow Use Default Value
    CW_USEDEFAULT = 0x80000000

    COLOR_WINDOW = 5
    COLOR_WINDOWFRAME = 6

    # @!group Class Style contants.

    CS_VREDRAW = 0x0001
    CS_HREDRAW = 0x0002

    # @!group Window Style constants
    #
    # This is only a subset.
    # @see http://msdn.microsoft.com/en-us/library/windows/desktop/ms632600.aspx

    WS_BORDER =      0x00800000
    WS_CAPTION =     0x00C00000
    WS_DISABLED =    0x08000000
    WS_OVERLAPPED =  0x00000000
    WS_POPUP =       0x80000000
    WS_SIZEBOX =     0x00040000
    WS_SYSMENU =     0x00080000
    WS_THICKFRAME =  0x00040000
    WS_MAXIMIZEBOX = 0x00010000
    WS_MINIMIZEBOX = 0x00020000
    WS_OVERLAPPEDWINDOW = WS_OVERLAPPED | WS_CAPTION | WS_SYSMENU | WS_THICKFRAME | WS_MINIMIZEBOX | WS_MAXIMIZEBOX
    WS_POPUPWINDOW = WS_POPUP | WS_BORDER | WS_SYSMENU

    # @!group Window Extended Style constants
    #
    # This is only a subset.
    # @see http://msdn.microsoft.com/en-us/library/windows/desktop/ff700543.aspx

    WS_EX_LEFT = 0

    # @!endgroup
  end
end 
```

# c++ - 如何在 Qt 中绘制半透 明矩形？

> ID：11076011
> 
> 赞同：11
> 
> 时间：2012-06-18T01:08:05.077
> 
> 标签：c++, qt, user-interface

我正在尝试在图像顶部绘制一个半透明矩形以作为亮点。不幸的是，我尝试的任何东西似乎都无法执行我想要的透明效果。相反，我只是得到实心填充的矩形，没有透明度。

这就是我现在正在做的事情：

```
void PageView::paintEvent(QPaintEvent *event)
{
    QPainter painter(this);
    QImage img=...;

    painter.drawImage(0, 0, img);
    ...
    // draw a light blue, transparent rectangle to highlight
    QRect rect=...;
    painter.fillRect(rect, QColor(128, 128, 255, 128));
    ...
} 
```

不幸的是，对我来说，这绘制了一个**纯**蓝色矩形，而不是我期望的半透明矩形，因为它给出了`QBrush`一个 alpha 值。

我也尝试过画到中间`QImage`或`QPixMap`，玩弄`painter.setCompositionMode(...)`. 到目前为止没有运气。

因此我的问题是：我怎样才能说服 Qt 为我绘制一个半透明的矩形`PageView`？

**编辑**：如果相关，我将在 Windows 上的 Qt 4.8.1 下构建它。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-18T01:30:59.447

该代码对我有用，只需稍作修改，因为它不会像您所拥有的那样编译：

```
painter.fillRect(rect, QBrush(QColor(128, 128, 255, 128))); 
```

**笔记：**

OP 在循环中绘制半透​​明矩形，导致同一区域被多次绘制。这将产生附加效果，最终使该区域看起来与实心填充相同。

# c++ - 计数排序无限循环

> ID：11076015
> 
> 赞同：1
> 
> 时间：2012-06-18T01:08:54.903
> 
> 标签：c++, sorting, for-loop

我正在编写一个计数排序函数，当我运行它时，会弹出一个窗口说“filename.exe 已停止工作”。调试后，它看起来像是卡在第二个`for`循环中。真正让我困惑的是，如果我设置`maxInt`为大于 130000 的任何数字，它可以工作，但如果它的 130000 或更低，我会收到该错误消息。我用来排序的文件只有大约 20 个数字。

```
#include <iterator>
#include <algorithm>
#include <vector>
#include <fstream>
#include <iostream>
using namespace std;

std::string file = "";
std::vector<int> numbers;

void CountingSort(vector<int> &numbers);

int main()
{
    std::cout << "Which file would you like to sort?\n";
    std::cin >> file;

    std::ifstream in(file.c_str());

    // Read all the ints from in:
    std::copy(std::istream_iterator<int>(in), std::istream_iterator<int>(),
            std::back_inserter(numbers));

    CountingSort(numbers);

    // Print the vector with tab separators:
    std::copy(numbers.begin(), numbers.end(),
            std::ostream_iterator<int>(std::cout, "\t"));
    std::cout << std::endl;

    return 0;
}

struct CalcMaxInt
{
    int maxInt;
    CalcMaxInt () : maxInt(0) {}
    void operator () (int i) { if (i > maxInt) maxInt = i; }
};

void CountingSort(vector<int>& numbers)
{
    CalcMaxInt cmi = std::for_each(numbers.begin(), numbers.end(), CalcMaxInt());
    //int maxInt = cmi.maxInt + 1;
    int maxInt = 130001;

    vector <int> temp1(maxInt);
    vector <int> temp2(maxInt);

    for (int i = 0; i < numbers.size(); i++)
    {
        temp2[numbers[i]] = temp2[numbers[i]] + 1;
    }

    for (int i = 1; i <= maxInt; i++)
    {
        temp2[i] = temp2[i] + temp2[i - 1];
    }

    for (int i = numbers.size() - 1; i >= 0; i--)
    {
        temp1[temp2[numbers[i]] - 1] = numbers[i];
        temp2[numbers[i]] = temp2[numbers[i]] -1;
    }

    for (int i =0;i<numbers.size();i++)
    {
        numbers[i]=temp1[i];
    }
    return;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T01:26:00.557

您正在尝试访问超出适当范围的元素。temp2 的范围为 [0...maxInt-1]，但以下代码使用超出范围的 temp2[maxInt]。

```
for (int i = 1; i <= maxInt; i++)
{
    temp2[i] = temp2[i] + temp2[i - 1];
} 
```

您必须修复 temp2 才能拥有 maxInt+1 元素或 i < maxInt 才能看不到错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T01:33:46.750

你这样做的重点不就是：

```
 CalcMaxInt cmi = std::for_each(numbers.begin(), numbers.end(), CalcMaxInt()); 
```

获取最大元素？

我会将您的代码更改为以下内容。

```
void CountingSort(vector<int>& numbers)  
{  
    CalcMaxInt cmi;
    std::for_each(numbers.begin(), numbers.end(), cmi);          
    int maxInt = cmi.maxInt;

    vector <int> temp1(maxInt);    
    vector <int> temp2(maxInt);  

    // then the rest the same starting with the for loops
    // but with the fix that @kcm1700 mentioned to the for loop
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T02:27:01.517

不应该标注`temp1`尺寸`numbers.size()+1`吗？

# python - Qt 不允许我使用字符串“About”、“Preferences”或“Quit”创建以我的应用程序命名的菜单项？有什么提示吗？

> ID：11076018
> 
> 赞同：5
> 
> 时间：2012-06-18T01:09:18.530
> 
> 标签：python, qt, pyside, qt-designer

所以基本上我想使用 PySide 和 Qt 框架创建一个 GUI 应用程序。我正在使用 QT 设计器进行初始 UI 设计。该应用程序的第一个版本将在 Mac 上运行，我希望它与其他 Mac 应用程序一样，其中应用程序的名称以粗体显示，一直到左侧带有“关于”、“首选项”和“退出” .

问题是，每当我添加这些类型的字符串时，下拉菜单就会停止工作。

这方面的任何提示都会有所帮助，这是我使用 PySide、QT 框架和 QT 设计器的第一个 GUI。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-18T11:27:24.620

下面是一个`About`使用 C++ 在 Mac 上使菜单项正常工作的示例。关键是要`setMenuRole`到正确的角色。有 Quit、About、Preferences 和 About Qt 的角色。应用程序名称以粗体显示的菜单项由操作系统提供，您无需执行任何特殊操作即可获得该菜单项。Qt 将自动将具有正确角色的项目移动到它们所属的位置。您无需执行任何操作即可获取 Quit 菜单项，如果您不提供，它会自动添加。

如果您在 Qt Designer 中制作菜单，您只需设置`menuRole`这些菜单 QActions 的属性。这就是菜单转到正确位置所需的全部内容。**不要**添加带有应用程序名称的菜单。只需创建通常的 Windows 样式菜单（文件、编辑、帮助），项目就会根据它们的角色进行适当的重新排列。

```
int main(int argc, char *argv[])
{
    QApplication a(argc, argv);

    a.setApplicationVersion(...);
    a.setOrganizationName(...);
    a.setOrganizationDomain(...);
    a.setApplicationName(...);

    MainWidget w; // MainWidget is your widget class

    QMessageBox * aboutBox = new QMessageBox(&w);
    QImage img(":/images/youricon.png");
    aboutBox->setIconPixmap(QPixmap::fromImage(
        img.scaled(128, 128, Qt::KeepAspectRatio, Qt::SmoothTransformation)));
    QString txt;
    txt = txt.fromUtf8(
            "fooapp %1\nCopyright \xC2\xA9 2012 Ed Hedges\n"
            "Licensed under the terms of ....");
    txt = txt.arg(a.applicationVersion());
    aboutBox->setText(txt);

    QMenuBar menu;
    QMenu * submenu = menu.addMenu("Help");
    QAction * about = submenu->addAction("About", aboutBox, SLOT(exec()));
    about->setMenuRole(QAction::AboutRole);

    w.show();

    return a.exec();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T22:38:14.470

我不了解 Python；但在 Mac 上，您创建 About、Preferences 或 Quit 菜单项，Qt 会自动将它们转移到左侧的应用程序菜单（带有粗体文本的菜单项）。

我猜您正在尝试创建自己的应用程序菜单，而 Qt 会感到困惑。你不需要创建它。将您的 About、Preferences 或 Quit 菜单项放在 File 或其他一些菜单标题下，它们将被转移。

# javascript - 使用 jQuery 创建带有 onerror 属性的 img

> ID：11076020
> 
> 赞同：2
> 
> 时间：2012-06-18T01:09:54.697
> 
> 标签：javascript, jquery, dom

我正在我的页面中创建一些图像。当我写的时候`<img src=somesrc, onerror=othersrc></img>`，它工作得很好。

但是当我使用 jQuery 创建图像时，它失败了：

```
jQuery('<img />', {
    onerror: "javascript: this.src='some_default_image_source'", 
    src: 'image_source'}).appendTo("#container"); 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-18T01:12:47.873

```
jQuery('<img />').error(function() {
    this.src = 'some_default_image_source';
}).attr('src', 'image_source').appendTo("#container"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T01:18:12.300

工作正常。[链接到 jsFiddle 加上额外的单词](http://jsfiddle.net/EFGrR/4/)

# android - 图库 - 查看多张图片

> ID：11076022
> 
> 赞同：1
> 
> 时间：2012-06-18T01:10:10.487
> 
> 标签：android, android-layout, android-gallery, android-menu

我有一个工作图库，一次显示一张图片，并且可以“滑动”以旋转图像。我希望用户可以通过使用菜单并选择要显示的数量来一次查看 2 或 3 张图片。到目前为止，我已经尝试调整 Gallery 宽度和 LinearLayout 参数，并且都使 Activity 崩溃。任何意见，将不胜感激。我在这里声明并初始化 Gallery 并拥有 onOptionsItemSelected 方法 sekeleton。

```
public class SpeechAppActivity extends Activity implements OnClickListener{
//Menu Items

// Class variables
Gallery myGallery;
ImageView imageView;
MyDBAdapter db;
Item item1;
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    db = new MyDBAdapter(this);

    db.insertEntry(item1 = new Item("Bathtub", "Bathroom", "Typical", "Clean", "fill, wash", "Round, deep", "Bathroom", "Toilet, Bathroom", R.drawable.ic_launcher));
    Log.i("item", "item: " + item1.toString());

 // Bind the gallery defined in the main.xml
        // Apply a new (customized) ImageAdapter to it.

        myGallery = (Gallery) findViewById(R.id.myGallery);

        myGallery.setAdapter(new ImageAdapter(this));
        //myGallery.setLayoutParams(new Gallery.LayoutParams(250, 250));

        myGallery.setOnItemSelectedListener(new OnItemSelectedListener() {

            public void onItemSelected(AdapterView<?> parent, View v,
                    int position, long id) {

            }

            public void onNothingSelected(AdapterView<?> parent) {

            }

        });
public boolean onOptionsItemSelected(MenuItem menuItem) {
    switch (menuItem.getItemId()) {
    case R.id.settings:
        startActivity(new Intent(this, Prefs.class));
        return true;

    case R.id.show1:

        //myGallery.findViewById(R.id.myGallery).setLayoutParams(new Gallery.LayoutParams(500, 250));
        return true;

    case R.id.show2:

        //myGallery.findViewById(R.id.myGallery).setLayoutParams(new Gallery.LayoutParams(500, 250));

        return true;
    case R.id.show3:

        //myGallery.findViewById(R.id.myGallery).setLayoutParams(new Gallery.LayoutParams(500, 250));
        return true;
    }
    return false;
} 
```

这是画廊的图像适配器类

```
public class ImageAdapter extends BaseAdapter {
/** The parent context */
private Context myContext;
// Put some images to project-folder: /res/drawable/
// format: jpg, gif, png, bmp, ...
private int[] myImageIds = { R.drawable.apple, R.drawable.orange,
               R.drawable.ic_launcher };

/** Simple Constructor saving the 'parent' context. */
public ImageAdapter(Context c) {
    this.myContext = c;
}

// inherited abstract methods - must be implemented
// Returns count of images, and individual IDs
public int getCount() {
    return this.myImageIds.length;
}

public Object getItem(int position) {
    return position;
}

public long getItemId(int position) {
    return position;
}
// Returns a new ImageView to be displayed,
public View getView(int position, View convertView, 
        ViewGroup parent) {

    // Get a View to display image data                     
    ImageView iv = new ImageView(this.myContext);
    iv.setImageResource(this.myImageIds[position]);

    // Image should be scaled somehow
    //iv.setScaleType(ImageView.ScaleType.CENTER);
    iv.setScaleType(ImageView.ScaleType.CENTER_CROP);           
    //iv.setScaleType(ImageView.ScaleType.CENTER_INSIDE);
    //iv.setScaleType(ImageView.ScaleType.FIT_CENTER);
    //iv.setScaleType(ImageView.ScaleType.FIT_XY);
    //iv.setScaleType(ImageView.ScaleType.FIT_END);
    //iv.setScaleType(ImageView.ScaleType.FIT_START);

    // Set the Width & Height of the individual images
        //get scale for finding dip of a set # of pixels
    final float scale = parent.getContext().getResources().getDisplayMetrics().density;

    iv.setLayoutParams(new Gallery.LayoutParams((int) (300 * scale + 0.5f), (int) (250 * scale + 0.5f)));

    return iv;
}

}// ImageAdapter 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T01:36:40.690

在您的适配器中，使用 View 对象（带有自定义视图）并将 ImageView 放入其中。

这是您可以在每个视图中放置多个图像。

最好的结果可以通过基于图像数量的几个布局文件并根据用户选择使用正确的一个来实现。

如果您需要更具体的代码模板，请告诉我。

# sql - 如何在同一个表中对一个字段进行完全联接并在另一个字段上进行内部联接

> ID：11076024
> 
> 赞同：0
> 
> 时间：2012-06-18T01:10:59.557
> 
> 标签：sql, sql-server, join

我有一个类似以下的查询：

```
select      sum(t1.qty) t1Total, sum(t2.qty) t2Total, sum(t1.qty - t2.qty) difference
from        t1 full join 
            t2 on t1.date = t2.date and t1.chain = t2.chain 
```

我希望它在日期上进行完全连接，但在链上进行内部连接。换句话说，一个表有链，另一个没有，我不希望额外的链包含在总数中，但我确实想确保两个表中的链的所有天数都被计算在内。

最简单的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T01:18:01.863

在总和中使用 case 语句；当内部表上的链为空时，将其设置为零。例如：

```
sum(case when t2.chain is null then 0 else t1.qty end) as t1Total 
```

# python - python 正则表达式，日期格式

> ID：11076026
> 
> 赞同：-8
> 
> 时间：2012-06-18T01:11:09.943
> 
> 标签：python, regex

我需要一个用于python中日期格式的正则表达式

我要“3 月 29 日”

但不是“March 29, YYYY”中的“March 29”，其中 YYYY 不是 2012

谢谢，

程

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T01:49:47.613

您不需要使用正则表达式。

```
import datetime

dt = datetime.datetime.now()
print dt.strftime('%B %d') 
```

结果将是：

```
June 18 
```

顺便说一句，如果您想对日期列表进行排序并仅显示那些年份，即 2012 年，请尝试使用`split()`：

```
line = "March 29, YYYY"
if int(line.split(',')[1]) = 2012
    print line
else
    pass 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T01:17:23.263

听起来像这样：

```
re.compile(r'''^
   (january|february|march|...etc.)
   \s
   \d{1,2}
   \s
   (,\s2012)?
   $''', re.I) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-18T05:14:43.773

您的问题不是 100% 清楚，但看起来您正在尝试从传入的字符串中解析日期。如果是这样，请使用[`datetime`模块](http://docs.python.org/library/datetime.html)而不是正则表达式。它更有可能处理语言环境等。该`datetime.datetime.strptime()`方法旨在从字符串中读取日期，因此请尝试以下操作：

```
import datetime

def myDate(raw):
    # Try to match a date with a year.
    try:
        dt = datetime.datetime.strptime(raw, '%B %d, %Y')

        # Make sure its the year we want.
        if dt.year != 2012:
            return None

    # Error, try to match without a year.
    except ValueError:
        try:
            dt = datetime.datetime.strptime(raw, '%B %d')
        except ValueError:
            return None

        # Add in the year information - by default it says 1900 since
        # there was no year details in the string.
        dt = dt.replace(year=2012)

    # Strip away the time information and return just the date information.
    return dt.date() 
```

该`strptime()`方法返回一个`datetime`对象，即日期*和*时间信息。因此最后一行调用该`date()`方法只返回日期。另请注意，`None`当没有有效输入时，该函数会返回 - 您可以轻松更改它以执行您的情况需要的任何操作。有关不同格式代码的详细信息，请参阅[该`strptime()`方法的文档。](http://docs.python.org/library/datetime.html#strftime-and-strptime-behavior)

其使用的几个例子：

```
>>> myDate('March 29, 2012')
datetime.date(2012, 3, 29)
>>> myDate('March 29, 2011')
>>> myDate('March 29, 2011') is None
True
>>> myDate('March 29')
datetime.date(2012, 3, 29)
>>> myDate('March 39')
>>> myDate('March 39') is None
True 
```

您会注意到这会捕获并拒绝接受非法日期（例如，3 月 39 日），这可能很难用正则表达式处理。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-18T03:07:12.227

我自己想通了

(?!\s*,\s*(1\d\d\d|200\d|2010|2011))

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-18T01:23:08.110

获取月份和日期的原始正则表达式是：`(january|february|...) \d\d?(?!\s*,\s*\d{4})`.

`(?!\s*,\s*\d{4})`向前看并确保字符串后面没有`, YYYY`. 我希望我理解你问题的这一部分。它将不匹配`march 29, 2012`，因为 3 月 29 日之后是逗号空格年。

# ruby-on-rails - 延误工作；过滤前是否跳过

> ID：11076032
> 
> 赞同：0
> 
> 时间：2012-06-18T01:13:03.050
> 
> 标签：ruby-on-rails, activerecord, delayed-job, before-filter

我有一个延迟的工作，可以完美地针对 postgresql 中的公共模式运行。
然而，我的大部分操作都针对其他模式（每个客户端一个）

为了处理不同的模式，我按照说明在我的 before_filter （在应用程序控制器中）中放置了切换搜索路径的代码。

我发觉到。before_filter 中的代码在典型操作期间被完美调用，但在延迟工作期间则完全没有。

除了我能想到的最简单的东西，我修剪并修剪了所有东西，以显示入口。

```
class ApplicationController < ActionController::Base
  protect_from_forgery

  def write_to_log(text)
    File.open('c:\temp.txt', 'ab') do |f|
      f.write text + "\r\n"
      f.close
    end
  end
  before_filter :on_before_filter
  def on_before_filter
    write_to_log('hey dave');
    return if(use_token() == false);
    set_active_schema if(goto_log_in? == false);
  end 
```

工人阶级中的代码

```
def run_job(id)
  upload = Upload.find(id)
  upload.run_job();
end
handle_asynchronously :run_job, :priority => 10, :queue => 'public' 
```

很标准的东西？尽管作业中的代码运行，但 before_filter 代码不会被调用。

所以我的问题是。我做错什么了吗？或者更重要的是，我怎样才能做正确的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T03:44:47.637

我不推荐这种方法。我只是通过提供此代码来回答您的问题。由于您本质上希望您的代码在任何尝试调用数据库之前运行，您可以修改 ActiveRecord。将以下代码添加到`config/initializers/active_record_monkey_patch.rb`

```
class ActiveRecord::ConnectionAdapters::ConnectionPool
  # create an alias for the old 'connection' method
  alias_method :old_connection, :connection

  # redefine the 'connection' method
  def connection
    # output something just to make sure the monkey patch is working
    puts "*** custom connection method called ***"

    # your custom code is here
    write_to_log('hey dave');
    return if(use_token() == false);
    set_active_schema if(goto_log_in? == false);

    # call the old 'connection' method
    old_connection
  end

end 
```

您会看到您的自定义连接方法现在被频繁调用，并且它可以在没有控制器的情况下工作。您可以通过打开 Rails 控制台并执行任何数据库查询来对其进行测试，您应该会看到多次显示“调用自定义连接方法”消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T05:56:38.770

如果要操作 Postgres 和模式的 ActiveRecord 搜索路径，可以使用功能齐全的 gem，例如公寓：[https ://github.com/bradrobertson/apartment](https://github.com/bradrobertson/apartment)

您可以切换到新架构：

```
Apartment::Database.switch('database_name') 
```

无论您是在应用程序控制器请求还是后台作业中调用它。

# android - In-App Billing switching activities

> ID：11076038
> 
> 赞同：2
> 
> 时间：2012-06-18T01:13:54.763
> 
> 标签：android, in-app-purchase, android-activity, in-app-billing

Ahh the in-app billing problems never end! ^.^ I have everything working properly to show the transaction page for the in-app purchase. If I complete the purchase it returns me to my application and after about 10 seconds it verifies the purchase and I receive the item.

On the other hand, if I press the back button after returning to the application and switch to another activity it never processes the transaction. Even if I return to the in-app billing activity I never receive my purchased item, like the purchase has been completely forgotten about if you call finish().

What can I do so that it either completes the transaction and gives the item when I return to the in-app billing activity or processes the transaction and gives the purchased item anywhere that I am at within my application?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T04:11:08.523

Receiving the notification is handled by a broadcast receiver which is independent from your activities. How you handle the notification is up to you. In the default implementation you have a `PurchaseObserver` interface implemented by an Activity. You can have multiple activities implement it and register to be called accordingly. Or, you can have related code in a base activity, so that all your activities are `PurchaseObserver`'s (might not be practical if you have a lot of activities).

# ip - 扫描/记录应用程序的传出 IP 请求？

> ID：11076039
> 
> 赞同：0
> 
> 时间：2012-06-18T01:14:17.170
> 
> 标签：ip

如何扫描/记录来自特定应用程序或任务的 IP 请求？我可以纯粹在命令行中执行此操作还是需要额外的软件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T01:43:50.973

[Wireshark](http://www.wireshark.org/)是一个非常强大的工具，用于跟踪连接甚至检查数据包内容。通过使用适当的过滤器，您可以监控应用程序的所有网络活动。

# jsf-2 - 如何将 Web 应用程序从 JSF Mojarra 2.0.5 升级到最新的 Mojara 2.1.9

> ID：11076043
> 
> 赞同：2
> 
> 时间：2012-06-18T01:16:35.620
> 
> 标签：jsf-2, mojarra

我想将我的 Web 应用程序从 Mojarra 2.0.5 升级到最新的 JSF Mojarra（今天的 2.1.9 是最新的）；

我该怎么做？...涉及的步骤是什么？.. 目前我的 web 应用程序 lib 文件夹有旧的 mojarra jar 'jsf-api.jar' 和 'jsf-impl.jar'。

如果有人能指导每一步，那将是一个很大的帮助。我在 Websphere 应用程序服务器 7.0.0.17

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T19:04:15.437

只需将 Mojarra 2.0.5 中的两个`jsf-api.jar`和文件替换为Mojarra 2.1.9`jsf-impl.jar`中的单个文件即可。`javax-faces.jar`

如果 Websphere 7 已经配置为使用类加载器模式“最后一个父”，那么您基本上不需要更改任何其他内容。但如果不是（这基本上意味着 webapp 提供的 Mojarra 2.0.5 实际上从未使用过，而是使用了 Websphere 自己的 JSF 库），那么您仍然需要将类加载器模式更改为“最后一个父级” ”。

# javascript - 为什么将 html 文件作为 jQueryMobile 对话框调用时不调用 JavaScript

> ID：11076048
> 
> 赞同：1
> 
> 时间：2012-06-18T01:17:54.387
> 
> 标签：javascript, jquery, jquery-mobile

当我直接从 JavaScript 作为 window.open("reg.htm") 调用 reg.htm 时，我的 index.html 代码工作正常（页面上的 JavaScript 被调用，AJAX 和回调都正常工作，我的数据库也被更新）。但是，当使用标记调用 REG.HTM 并放置 data-rel="dialog" 的 jQueryMobile 标记时，文件会打开，但不会调用任何 JavaScript。

index.html（作品）电影提醒

```
 <style type="text/css">
    <!--
    .image    { position: relative; width: 100%; /* for IE 6 */ }
    .register { position: absolute; top: 250px; left: 0; width: 100%; padding-left: 106px;}
    .login    { position: absolute; top: 250px; left: 0; width: 100%; padding-left: 106px;}
    -->
    </style>

    <script language="Javascript">
        document.addEventListener("deviceready", onDeviceReady, false);         
        // Cordova is ready
        function onDeviceReady() 
            {
            var user = window.localStorage.getItem("user");
            alert ("Device Ready");
            if  (user == null) 
                window.open("reg.htm");
            else
                {
                var token = window.localStorage.getItem("token");
                if  (token == null) 
                    window.open("login.htm");
                else 
                    window.open("search.htm");                
                }
            }

        $(document).ready(function() {
            setTimeout("onDeviceReady()", 2000);
        });     
    </script>

</head>
<body topmargin="0" leftmargin="0">
<div class="image">
    <img src="images/mov-rem-bkgd.jpg" alt=""  />
</div>        
</body>
</html> 
```

这是使用不起作用的标签调用的代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
  <head>
    <title>Movie Reminder</title>
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.css" />
    <script src="http://code.jquery.com/jquery-1.6.4.min.js"></script>
    <script src="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.js"></script>

    <style type="text/css">
    <!--
    .image    { position: relative; width: 100%; /* for IE 6 */ }
    .register { position: absolute; top: 250px; left: 0; width: 100%; padding-left: 106px;}
    .login    { position: absolute; top: 250px; left: 0; width: 100%; padding-left: 106px;}
    -->
    </style>

    <script language="Javascript">
        document.addEventListener("deviceready", onDeviceReady, false);
        function onDeviceReady() {
            if  (window.localStorage.getItem("user") == null) 
                $('.register').show();
            else {
                if  (window.localStorage.getItem("token") == null) $('.login').show();
                else window.open("search.htm");                
                }
            }
        $(document).ready(function() { setTimeout("onDeviceReady()", 2000); });
    </script>

</head>
<body topmargin="0" leftmargin="0">
<div class="image">
    <img src="images/mov-rem-bkgd.jpg" alt=""  />
    <div class="register">
        <a href="reg.htm" data-role="button" data-inline="true" data-rel="dialog" data-transition="pop">Register</a>
    </div>
    <div class="login" style="display:none">
        <a href="login.htm" data-role="button" data-inline="true" data-rel="dialog" data-transition="pop">Login</a>
    </div>
</div>        
</body>
</html> 
```

如果您创建一个简单的 reg.htm 文件，其中包含以下代码，您将看到 JavaScript 不是由 index2.htm 仅由 index1.htm 调用的。

```
<script>
    $(document).ready(function() {
        alert ("doc ready");
        $('.ui-btn-hidden').click(function(event) {
            $("#regform").submit(function(event) {   
                if  ($('.ui-btn-hidden').attr("value") == "Submit") 
                    {
                    alert ("inside submit");
                    var postData = "username=foo";
                    var urlStr = "http://www.fohost.co/mr/regUser/index.php?"; 
                    $.ajax({
                        url: urlStr,
                        data: encodeURI(postData),
                        dataType: "jsonp",
                        success: doCallback
                        });
                    return false;
                    }
            });
        }); 
    });

    function doCallback(data) {
        alert("doCallback");
        if  (data.success == "true")
            window.open("login.htm");
        }
</script> 
```

有人有什么想法吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-18T06:07:17.957

阅读[脚本页面](http://jquerymobile.com/test/docs/pages/page-scripting.html)。也适用于对话框。

# java - 调试 JDO 错误

> ID：11076051
> 
> 赞同：2
> 
> 时间：2012-06-18T01:18:12.010
> 
> 标签：java, google-app-engine, jdo, datanucleus

我的应用程序抛出此错误：

```
Error : An error occurred trying to instantiate an instance of the API adapter "org.datanucleus.api.jdo.JDOAdapter" 
(perhaps you dont have the requisite datanucleus-api-XXX jar in the CLASSPATH?) : 
{1}
org.datanucleus.exceptions.NucleusUserException: Error : 
An error occurred trying to instantiate an instance of the API adapter "org.datanucleus.api.jdo.JDOAdapter" (perhaps you dont have the requisite datanucleus-api-XXX jar in the CLASSPATH?) : 
{1}
...
at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:582) 
```

虽然我的申请确实有`datanucleus-api-jdo-3.0.0-release.jar`

如果没有丢失罐子，可能是什么原因？

编辑：

这是解决此问题的建议：

> 这是一个零星的错误，在任何可持久化的类上都会不时发生，但在大量并行使用的类上更是如此。它发生在 JDO 和 JPA 中，似乎本地数据存储锁定了特定的表/实体组并忘记释放它；从而导致对 ds 操作的所有后续调用失败。我一般不用重启eclipse；只是停止然后启动服务器往往会解决问题，如果没有，完全刷新/清理构建将解决问题。

但是，我已经重新启动了我的 GAE 服务器并重新运行我的应用程序仍然得到同样的错误。

**这是完整的** [POM.xml](http://pastebin.com/JAbwXjHA)

**这是完整的** [堆栈跟踪。](http://pastebin.com/1Rm7UUF0)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T17:38:19.470

使用最新版本。包括所有依赖项（jdo-api、datanucleus-api-jdo）。阅读文档以了解 CLASSPATH 中需要包含的内容（例如，您的类的增强版本）。

# forms - grails 在表单提交时显示等待页面

> ID：11076054
> 
> 赞同：1
> 
> 时间：2012-06-18T01:18:52.557
> 
> 标签：forms, grails, asynchronous

我有一个用户提交并返回结果的表单，但返回结果需要几秒钟。我知道我可以使用 grails formRemote [http://grails.org/doc/latest/ref/Tags/formRemote.html](http://grails.org/doc/latest/ref/Tags/formRemote.html)异步执行调用并更新页面上的 div，但我想要做的是完全显示另一个页面（带有一些等待图形和其他信息）。

有没有一种简单的方法可以在 grails 中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T03:03:59.317

您可以将数据异步发送到服务器（ajax，formRemote），显示“等待图形”实用程序您得到响应。并在收到响应后立即重定向到结果页面（您应该将状态存储在某处，并且结果页面可能具有唯一的 url）

# sql - 使用 avg 绘制查询树？

> ID：11076055
> 
> 赞同：2
> 
> 时间：2012-06-18T01:19:19.920
> 
> 标签：sql, database

我想知道 avg 和 group by 如何在查询树中表示？

我有一个这样的查询：

```
SELECT  Stats.StuId, Stats.CrsAve
FROM        (SELECT T.StuId, AVG(T.Grd) AS CrsAvg
        FROM        Transcript T
        WHERE   T.Semester IN (‘F2004’, ‘S2006’)
        GROUP BY    T.StuId) AS Stats
WHERE       Stats.CrsAvg >  3.5 
```

所以，模块 GROUP BY 和 AVG 让我担心——它们是如何绘制的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T23:29:42.497

您必须使用“Avg”，但要优化查询，您可以避免使用两个选择添加子句“Having”：

```
 SELECT T.StuId, AVG(T.Grd) AS CrsAvg
        FROM        Transcript T
        WHERE   T.Semester IN (‘F2004’, ‘S2006’)
        GROUP BY    T.StuId
having AVG(T.Grd) > 3.5 
```

此外，您可以考虑向表中添加适当的索引。

# c# - 使用 signalR 从客户端查询数据

> ID：11076058
> 
> 赞同：3
> 
> 时间：2012-06-18T01:20:41.530
> 
> 标签：c#, signalr

我们计划使用 signalR 代替 wcf 双重通信，因为后者由于端口而存在防火墙问题

到目前为止一切都很好，我能够

1.  从代理订阅中心事件`proxy.On<Type>()`
2.  使用发送数据给客户端`Clients.MethodName(arg1, arg2)`

但我无法弄清楚集线器是否可以从客户端查询数据。

* * *

请参阅上面 dfowlwer 的评论，看起来这不可能

# c++ - ubuntu 12.04 中的 gtkmm 3 错误

> ID：11076059
> 
> 赞同：1
> 
> 时间：2012-06-18T01:21:33.240
> 
> 标签：c++, ubuntu, compiler-errors, gtkmm

我在 ubuntu 12.04 中安装 libgtkmm-3.0-dev 并尝试使用 c++ 和 gtkmm 3 学习和编写程序我转到此链接“http://developer.gnome.org/gtkmm-tutorial/unstable/sec-basics-simple -example.html.en" 并尝试编译简单的示例程序：

```
#include <gtkmm.h>

int main(int argc, char *argv[])
{
  Glib::RefPtr<Gtk::Application> app =
    Gtk::Application::create(argc, argv,
      "org.gtkmm.examples.base");

  Gtk::ApplicationWindow window;

  return app->run(window);
} 
```

我的文件名为“basic.cc”，我打开终端并输入以下命令进行编译：

```
g++ basic.cc -o basic `pkg-config gtkmm-3.0 --cflags --libs` 
```

编译完成，没有任何错误，但是当我尝试在终端中运行 ./basic 类型的程序时，出现以下错误：

```
~$ ./simple
./simple: symbol lookup error: ./simple: undefined symbol:_ZN3Gtk11Application6createERiRPPcRKN4Glib7ustringEN3Gio16ApplicationFlagsE
~$ 
```

我怎么解决这个问题 ？

我可以用这个命令编译任何 gtkmm 2.4 代码：“g++ basic.cc -o basic `pkg-config gtkmm-3.0 --cflags --libs`”和这个命令：“g++ basic.cc -o basic `pkg-config gtkmm-2.4 --cflags --libs`”

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T18:13:59.310

我认为您遇到了这个 gtkmm 错误，显然是由最新版本的 GTK+ 触发的，现在已修复： [https ://bugzilla.gnome.org/show_bug.cgi?id=681323](https://bugzilla.gnome.org/show_bug.cgi?id=681323)

我已经要求 Ubuntu 更新他们的软件包，但如果他们这样做的话，他们通常会很慢： [https ://bugs.launchpad.net/ubuntu/+source/gtkmm3.0/+bug/1046469](https://bugs.launchpad.net/ubuntu/+source/gtkmm3.0/+bug/1046469)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T21:13:17.603

您可能想尝试重新安装 libgtkmm-3.0-dev。代码对我来说编译得很好，但我得到了一个 Seg Fault。当我更改`Gtk::ApplicationWindow`为`Gtk::Window`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T14:02:24.130

您的安装没有问题。那个代码很糟糕。

再试一次，使用

```
Gtk::Window window; 
```

而不是应用程序窗口。当给定类的[GNOME 文档](http://developer.gnome.org/gtkmm/stable/classGtk_1_1ApplicationWindow.html)有“TODO”的描述时，这是一件坏事。

# java - 在 Java 中使用 Inflater 解压缩 gzipped 数据

> ID：11076060
> 
> 赞同：3
> 
> 时间：2012-06-18T01:21:38.690
> 
> 标签：java, gzip, zlib

我正在尝试使用`Inflater`. 根据文档，

> 如果参数 'nowrap' 为真，则不会使用 ZLIB 标头和校验和字段。这提供了与 GZIP 和 PKZIP 使用的压缩格式的兼容性。
> 
> 注意：使用 'nowrap' 选项时，还需要提供一个额外的“虚拟”字节作为输入。这是 ZLIB 本机库要求的，以支持某些优化。

传递`true`给构造函数，然后尝试解压缩数据会导致`DataFormatException: invalid block type`被抛出。按照[this answer](https://stackoverflow.com/a/9779941/783547)中的说明，我在`setInput()`参数末尾添加了一个虚拟字节，但无济于事。

我必须`GZIPInputStream`改用吗？我究竟做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-18T04:55:37.587

Java 文档不正确或至少具有误导性：

> nowrap - 如果为 true，则支持 GZIP 兼容压缩

nowrap 的意思是原始的 deflate 数据将被解压缩。gzip 流是用 gzip 标头和预告片包装的原始 deflate 数据。要使用此类完全解码 gzip 格式，您需要按照[RFC 1952](https://www.rfc-editor.org/rfc/rfc1952)中的描述处理 gzip 标头，使用 inflater 解压缩原始 deflate 数据，使用该类计算未压缩数据的[crc32](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/zip/CRC32.html) ，然后验证 crc 和gzip 预告片中的长度（模 2^32），同样在[RFC](https://www.rfc-editor.org/rfc/rfc1952)中指定。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T01:43:55.480

我认为要读取 GZIP 流，设置是不够的`nowrap=true`，您还必须使用 gzip 标头，它不是压缩流的一部分。参见例如。`readHeader()` [在这个实现中](http://developer.classpath.org/doc/java/util/zip/GZIPInputStream-source.html)

# haskell - 有没有人编译过避免 Haskell 标准库中“不够多态”定义所需的导入列表？

> ID：11076062
> 
> 赞同：24
> 
> 时间：2012-06-18T01:22:06.833
> 
> 标签：haskell

我使用 Haskell 已经有一段时间了。我使用它的次数越多，我就越爱上这种语言。我简直不敢相信我已经用其他语言度过了将近 15 年的生命。

然而，我逐渐厌倦了 Haskell 的标准库。我的主要烦恼是“不够多态”的定义（`Prelude.map`,`Control.Monad.forM_`等）。我有很多 Haskell 源代码文件，它们的第一行看起来像

```
{-# LANGUAGE NoMonomorphismRestriction #-}

module Whatever where

import Control.Monad.Error hiding (forM_, mapM_)
import Control.Monad.State hiding (forM_, mapM_)
import Data.Foldable (forM_, mapM_)

{- ... -} 
```

为了避免不断地胡扯我应该隐藏哪些定义，我希望有一个或少量的源代码文件，将这个`import`样板包装成可管理的单元。

所以...

1.  有没有其他人尝试过这样做？
2.  如果上一个问题的答案是“是”，他们是否发布了生成的样板包装源代码文件？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-18T14:36:02.753

它并不像你想象的那么清晰。我将列出我能想到的所有缺点：

首先，这些功能的通用性没有限制。例如，现在我正在为包含普通类型的索引类型编写一个库。您提到的每个函数都有一个更通用的索引等效项。我希望每个人都切换到我的图书馆吗？不。

这是另一个例子。mapM 函数定义了一个满足 Kleisli 范畴中的函子定律的高阶函子：

```
mapM return = return
mapM (f >=> g) = mapM f >=> mapM g 
```

所以我可以争辩说你的可遍历泛化是错误的，相反我们应该把它泛化为高阶仿函数类的一个实例。

此外，请查看 category-extras 包以获取包含所有示例的这些高阶类和函数的一些示例。

还有性能问题。许多更专业的函数都有非常精细的实现，极大地提高了性能。有时类公开了承认更高性能版本的方法，但有时他们没有。

还有类型类重载的问题。实际上，我更喜欢尽量减少类型类的使用，除非它们具有从理论而不是方便性得出的合理法则。此外，类型类通常在单态限制方面表现不佳，我喜欢为我的应用程序代码编写没有签名的函数。

还有口味问题。很多人根本不同意什么是最好的 Haskell 风格。我们仍然无法就前奏达成一致。说到这一点，已经有很多尝试编写新的 Preludes，但没有人能就什么是最好的达成一致，所以我们都默认回到 Haskell98 上。

但是，我认为改进事物的整体精神是好的，进步的最大敌人是满足感，但不要以为做任何事情都会有明确的正确方法。

# c++ - 基于节点的类的子级位置？

> ID：11076066
> 
> 赞同：4
> 
> 时间：2012-06-18T01:23:39.170
> 
> 标签：c++, openframeworks

我正在创建对象、实例`ofNode`，我们称它们为卡片。每张卡片都有自己的属性，例如按钮、文本和图像，这些属性是在卡片`.draw()`函数中绘制的。

如果我更改卡片位置，“儿童”对象不会移动。有没有办法将他们的位置绑定到他们的卡片对象上？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T11:27:48.537

使用`setParent`方法：

```
ofNode parent;
ofNode child;
child.setParent(parent);

parent.setGlobalPosition(10, 20, 30);
child.setPosition(100, 200, 300);

ofVec3f pos = child.getGlobalPosition(); // pos == (110, 220, 330) 
```

注意`setPosition`是局部的，与它的父位置有关，`setGlobalPosition`而是全局的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T08:21:09.877

我假设您的意思是以图形方式移动。这非常依赖于实现。我不知道开放框架，但在这里以 Qt 为例，您可以将所有图形元素组合为主要结构卡片的子元素。例如，让卡片从某个超级对象（框架或类似的东西）继承，并将所有子对象包含在卡片中。在 Qt 中，这是由父子关系完成的。

# javascript - 查找多个 JavaScript 数组之间的匹配项

> ID：11076067
> 
> 赞同：68
> 
> 时间：2012-06-18T01:23:45.113
> 
> 标签：javascript, jquery, arrays

我有多个带有字符串值的数组，我想比较它们，只保留它们之间相同的匹配**结果**。

鉴于此示例代码：

```
var arr1 = ['apple', 'orange', 'banana', 'pear', 'fish', 'pancake', 'taco', 'pizza'];
var arr2 = ['taco', 'fish', 'apple', 'pizza'];
var arr3 = ['banana', 'pizza', 'fish', 'apple']; 
```

我想生成以下数组，其中包含来自所有给定数组的匹配项：

```
['apple', 'fish', 'pizza'] 
```

我知道我可以将所有数组组合在一起，`var newArr = arr1.concat(arr2, arr3);`但这只是给我一个包含所有内容的数组，加上重复项。这可以轻松完成而不需要诸如 underscore.js 之类的库的开销吗？

（太好了，*现在*我也饿了！）

**编辑**我想我应该提到可能存在未知数量的数组，我只是以 3 为例。

* * *

## 回答 #1

> 赞同：95
> 
> 时间：2012-06-18T01:29:51.913

```
var result = arrays.shift().filter(function(v) {
    return arrays.every(function(a) {
        return a.indexOf(v) !== -1;
    });
}); 
```

***演示：http:*** [//jsfiddle.net/nWjcp/2/](http://jsfiddle.net/nWjcp/2/)

您可以首先对外部 Array 进行排序以在开始时获得最短的 Array ...

```
arrays.sort(function(a, b) {
    return a.length - b.length;
}); 
```

* * *

为了完整起见，这是一个处理数组中重复项的解决方案。它使用`.reduce()`而不是`.filter()`...

```
var result = arrays.shift().reduce(function(res, v) {
    if (res.indexOf(v) === -1 && arrays.every(function(a) {
        return a.indexOf(v) !== -1;
    })) res.push(v);
    return res;
}, []); 
```

***演示：http:*** [//jsfiddle.net/nWjcp/4/](http://jsfiddle.net/nWjcp/4/)

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2016-05-06T07:46:34.990

假设有一个数组数组，我们想要找到它们的交集，一个最简单的单线方法可能是

```
var arr = [[0,1,2,3,4,5,6,7,8,9],[0,2,4,6,8],[4,5,6,7]],
    int = arr.reduce((p,c) => p.filter(e => c.includes(e)));

document.write("<pre>" + JSON.stringify(int) + "</pre>");
```

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2012-06-18T01:30:58.167

现在，您已经向问题添加了不确定数量的数组，这是另一种方法，它将每个项目的计数收集到一个对象中，然后整理具有最大计数的项目。

这种方法的优点：

1.  如果数组更大，则比蛮力搜索选项（由其他答案使用）快约 15 倍
2.  不需要 ES5 或 ES5 shim（适用于所有浏览器）
3.  完全无损（根本不更改源数据）
4.  处理源数组中的重复项
5.  处理任意数量的输入数组

这是代码：

```
function containsAll(/* pass all arrays here */) {
    var output = [];
    var cntObj = {};
    var array, item, cnt;
    // for each array passed as an argument to the function
    for (var i = 0; i < arguments.length; i++) {
        array = arguments[i];
        // for each element in the array
        for (var j = 0; j < array.length; j++) {
            item = "-" + array[j];
            cnt = cntObj[item] || 0;
            // if cnt is exactly the number of previous arrays, 
            // then increment by one so we count only one per array
            if (cnt == i) {
                cntObj[item] = cnt + 1;
            }
        }
    }
    // now collect all results that are in all arrays
    for (item in cntObj) {
        if (cntObj.hasOwnProperty(item) && cntObj[item] === arguments.length) {
            output.push(item.substring(1));
        }
    }
    return(output);
} 
```

工作演示：http: [//jsfiddle.net/jfriend00/52mAP/](http://jsfiddle.net/jfriend00/52mAP/)

仅供参考，这不需要 ES5，因此可以在所有没有 shim 的浏览器中使用。

在对每 1000 个长度的 15 个阵列进行性能测试时，这比我在此 jsperf 中使用的搜索方法快 10 倍以上：http: [//jsperf.com/in-all-arrays](http://jsperf.com/in-all-arrays)。

* * *

这是一个使用 ES6`Map`并`Set`进行重复数据删除和跟踪计数的版本。这样做的好处是数据的类型被保留并且可以是任何东西（它甚至不必进行自然的字符串转换，数据甚至可以是对象，尽管对象被比较为完全相同的对象，而不是相同的对象属性/值）。

```
var arrays = [
    ['valueOf', 'toString','apple', 'orange', 'banana', 'banana', 'pear', 'fish', 'pancake', 'taco', 'pizza', 1, 2, 999, 888],
    ['valueOf', 'toString','taco', 'fish', 'fish', 'apple', 'pizza', 1, 999, 777, 999, 1],
    ['valueOf', 'toString','banana', 'pizza', 'fish', 'apple', 'apple', 1, 2, 999, 666, 555]
    ];

// subclass for updating cnts    
class MapCnt extends Map {
    constructor(iterable) {
        super(iterable);
    }

    cnt(iterable) {
        // make sure items from the array are unique
        let set = new Set(iterable);
        // now update the cnt for each item in the set
        for (let item of set) {
            let cnt = this.get(item) || 0;
            ++cnt;
            this.set(item, cnt);
        }
    }
}

function containsAll(...allArrays) {
    let cntObj = new MapCnt();
    for (array of allArrays) {
        cntObj.cnt(array);
    }
    // now see how many items have the full cnt
    let output = [];
    for (var [item, cnt] of cntObj.entries()) {
        if (cnt === allArrays.length) {
            output.push(item);
        }
    }
    return(output);
}    

var result = containsAll.apply(this, arrays);

document.body.innerHTML = "<pre>[<br>    " + result.join(',<br>    ') + "<br>]</pre>";
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-18T03:44:22.090

几个想法 - 您可以只比较最短数组中的项目，并防止返回数组中的重复项。

```
function arraysInCommon(arrays){
    var i, common,
    L= arrays.length, min= Infinity;
    while(L){
        if(arrays[--L].length<min){
            min= arrays[L].length;
            i= L;
        }
    }
    common= arrays.splice(i, 1)[0];
    return common.filter(function(itm, indx){
        if(common.indexOf(itm)== indx){
            return arrays.every(function(arr){
                return arr.indexOf(itm)!= -1;
            });
        }
    });
}

var arr1= ['apple', 'orange', 'banana', 'pear', 'fish', 'pancake', 'taco', 'pizza'];
var arr2= ['taco', 'fish', 'apple', 'pizza', 'apple','apple'];
var arr3= ['banana', 'pizza', 'fish', 'apple','fish'];

var allArrays = [arr1,arr2,arr3];

arraysInCommon(allArrays).sort(); 
```

返回值：`apple,fish,pizza`

**演示**- [http://jsfiddle.net/kMcud/](http://jsfiddle.net/kMcud/)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-18T02:00:38.250

假设数组数组并检查所有数组：

演示：http: [//jsfiddle.net/qUQHW/](http://jsfiddle.net/qUQHW/)

```
var tmp = {};
for (i = 0; i < data.length; i++) {
    for (j = 0; j < data[i].length; j++) {
        if (!tmp[data[i][j]]) {
            tmp[data[i][j]] = 0;
        }
        tmp[data[i][j]]++;
    }
}

var results = $.map(tmp, function(val,key) {
    return val == data.length ? key :null;
}) 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2019-11-08T06:15:38.410

```
 // The easiest way!! 

    var arr1 = ['apple', 'orange', 'banana', 'pear', 'fish', 'pancake', 'taco', 'pizza'];
    var arr2 = ['taco', 'fish', 'apple', 'pizza'];
    var arr3 = ['banana', 'pizza', 'fish', 'apple'];
    var arr4 = [];

    for(let i of arr1){
      if(arr2.includes(i) && arr3.includes(i)){
        arr4.push(i)
      }
    }

    console.log(arr4)

------------- OR -----------------

arr4 = arr1.filter(value => arr2.includes(value) && arr3.includes(value)) 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2017-11-03T12:31:22.177

这是一个单行解决方案。您可以将其分为两个思考步骤：

1.  计算两个数组之间的连接/交集

```
var arrA = [1,2,3,4,5];
var arrB = [4,5,10];
var innerJoin = arrA.filter(el=>arrB.includes(el));
console.log(`Intersection is: ${innerJoin}`);
```

2.  减少内容：计算累计交集与下一个数组的交集。

```
var arrays = [
 ['apple', 'orange', 'banana', 'pear', 'fish', 'pancake', 'taco', 'pizza'],
 ['taco', 'fish', 'apple', 'pizza'],
 ['banana', 'pizza', 'fish', 'apple']
];
var join = arrays.reduce((join, current) => join.filter(el => current.includes(el)));
console.log(`Intersection is: ${join}`);
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-06-18T01:41:16.370

这应该适用于任意数量的数组：

```
function intersection(arr1, arr2) {
  var temp = [];

  for (var i in arr1) {
    var element = arr1[i];

    if (arr2.indexOf(element) > -1) {
      temp.push(element);
    }
  }

  return temp;
}

function multi_intersect() {
  var arrays = Array.prototype.slice.apply(arguments).slice(1);
  var temp = arguments[0];

  for (var i in arrays) {
    temp = intersection(arrays[i], temp);

    if (temp == []) {
      break;
    }
  }

  return temp;
}

var arr1 = ['apple', 'orange', 'banana', 'pear', 'fish', 'pancake', 'taco', 'pizza'];
var arr2 = ['taco', 'fish', 'apple', 'pizza'];
var arr3 = ['banana', 'pizza', 'fish', 'apple'];

multi_intersect(arr1, arr2, arr3); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-06-18T03:12:30.447

只是为了它，另一种长手方法：

```
function getCommon(a) {

  // default result is copy of first array
  var result = a[0].slice();
  var mem, arr, found = false;

  // For each member of result, see if it's in all other arrays
  // Go backwards so can splice missing entries
  var i = result.length;

  while (i--) {
    mem = result[i];

    // Check in each array
    for (var j=1, jLen=a.length; j<jLen; j++) {
      arr = a[j];
      found = false;

      // For each member of arr and until found
      var k = arr.length;
      while (k-- && !found) {

        // If found in this array, set found to true
        if (mem == arr[k]) {
          found = true;
        }
      }
      // if word wasn't found in this array, remove it from result and 
      // start on next member of result, skip remaining arrays.
      if (!found) {
        result.splice(i,1);
        break;
      }
    }
  }
  return result;
}

var data = [
  ['taco', 'fish', 'apple', 'pizza', 'mango', 'pear'],
  ['apple', 'orange', 'banana', 'pear', 'fish', 'pancake', 'taco', 'pizza'],
  ['banana', 'pizza', 'fish', 'apple'],
  ['banana', 'pizza', 'fish', 'apple', 'mango', 'pear']
]; 
```

### 编辑

基于 Object.prototype 上的 thise 查找永远无法枚举的属性的函数：

```
// Return an array of Object.prototype property names that are not enumerable
// even when added directly to an object.
// Can be helpful with IE as properties like toString are not enumerable even
// when added to an object.
function getNeverEnumerables() {

    // List of Object.prototype property names plus a random name for testing
    var spNames = 'constructor toString toLocaleString valueOf ' +
                  'hasOwnProperty isPrototypeOf propertyIsEnumerable foo';

    var spObj = {foo:'', 'constructor':'', 'toString':'', 'toLocaleString':'', 'valueOf':'',
                 'hasOwnProperty':'', 'isPrototypeOf':'', 'propertyIsEnumerable':''};

    var re = [];

    // BUild list of enumerable names in spObj
    for (var p in spObj) {
      re.push(p); 
    }

    // Remove enumerable names from spNames and turn into an array
    re = new RegExp('(^|\\s)' + re.join('|') + '(\\s|$)','g');
    return spNames.replace(re, ' ').replace(/(^\s+)|\s\s+|(\s+$)/g,'').split(' ');
}

document.write(getNeverEnumerables().join('<br>')); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-05-19T08:19:40.360

这基本上是所有答案的汇编：

```
 // Intersect any number of arrays:

	function intersect() {

	  // - Arguments -> traditional array,
	  // - First item ( arrays[0] ) = shortest to reduce iterations
	  var arrays = Array.prototype.slice.call(arguments).sort(function(a, b) {
	    return a.length - b.length;
	  });

	  // Use first array[0] as the base.
	  var a = arrays.shift();

	  var result = [];
	  for (var i = a.length; i--;) {

	    var val = a[i];

	    // Prevent duplicates
	    if (result.indexOf(val) < 0) {

	      // Seek
	      var found = true;
	      for (var ii = arrays.length; ii--;) {
	        if (arrays[ii].indexOf(val) < 0) {
	          found = false;
	          break;
	        }
	      }

	      if (found) {
	        result.push(val);
	      }

	    }

	  }

	  return result;

	}

	/*
	// Slower, but smaller code-base:
	function intersect (){

		// - Arguments -> traditional array,
		// - First item ( arrays[0] ) = shortest to reduce iterations
		var arrays = Array.prototype.slice.call(arguments).sort(function(a, b) {
	        return a.length - b.length;
	    });

		// Use first array[0] as the base.
		var a = arrays.shift();

		return a.filter(function (val, idx, aa) {

						// Seek
		                for(var i=arrays.length; i--;){
		                    if (arrays[i].indexOf(val) < 0) {
							    return false;
						    }
		                }

						// Prevent duplicates
		                return aa.indexOf(val) === idx;

					});

	}
	*/

	var arr1 = ['apple', 'orange', 'banana', 'pear', 'fish', 'pancake', 'taco', 'pizza'];
	var arr2 = ['taco', 'fish', 'apple', 'pizza', 'apple', 'apple'];
	var arr3 = ['banana', 'pizza', 'fish', 'apple', 'fish'];

	var arr1 = ['apple', 'orange', 'banana', 'pear', 'fish', 'pancake', 'taco', 'pizza'];
	var arr2 = ['taco', 'fish', 'apple', 'pizza', 'apple', 'apple'];
	var arr3 = ['banana', 'pizza', 'fish', 'apple', 'fish'];

	var result = intersect(arr1, arr2, arr3);

	 // For fiddle output:
	var elem = document.getElementById("result");
	elem.innerHTML = JSON.stringify(result);
	console.log(result);
```

```
<div id="result">Results</div>
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-12-23T10:18:40.107

另一种解决方案：

```
const arr1 = ['apple', 'orange', 'banana', 'pear', 'fish', 'pancake', 'taco', 'pizza'];
const arr2 = ['taco', 'fish', 'apple', 'pizza'];
const arr3 = ['banana', 'pizza', 'fish', 'apple'];
const combinedArr = [arr1, arr2, arr3];

const result  = combinedArr
    .flatMap(([...values]) => values)
    .filter((value, index, coll) => (coll.indexOf(value) === index) && combinedArr.every(
        (values) => values.includes(value)
    ));

console.log(result);
```

```
.as-console-wrapper { max-height: 100% !important; top: 0; }
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2020-06-24T05:47:25.680

您可以使用`array#reduce`和`array#filter`。对于每个数组，获取所有唯一值并进行`Map`查找并保持其计数。完成后，`array#filter`此查找基于数组的长度。

```
const commonElements = (...arr) => {
  const lookup = arr.reduce((map, a) => {
    const unique = [...new Set(a)];
    unique.forEach(v => {
      map.set(v, (map.get(v) || 0) + 1)
    });
    return map;
  },new Map());
  return [...lookup.keys()].filter(k => lookup.get(k) === arr.length);
}

const arr1 = ['apple', 'orange', 'banana', 'pear', 'fish', 'pancake', 'taco', 'pizza'],
      arr2 = ['taco', 'fish', 'apple', 'pizza'],
      arr3 = ['banana', 'pizza', 'fish', 'apple'];
console.log(commonElements(arr1,arr2,arr3));
```

# binary - 补码是可分配的吗？

> ID：11076070
> 
> 赞同：1
> 
> 时间：2012-06-18T01:25:07.843
> 
> 标签：binary

我知道它是关联和交换的：

那是，

```
(~x1 + ~x2) + ~x3 = ~x1 + (~x2 + ~x3) 
```

和

```
~x1 + ~x2 = ~x2 + ~x1 
```

但是，对于我尝试过的案例，它似乎没有分配性，即，

```
~x1 + ~x2 != ~(x1 + x2) 
```

这是真的？有证据吗？

我有如下C代码：

```
int n1 = 5;
int n2 = 3;
result = ~n1 + ~n2 == ~(n1 + n2);

int calc = ~n1;  
int calc0 = ~n2;  
int calc1 = ~n1 + ~n2;  
int calc2 = ~(n1 + n2);

printf("(Part B: n1 is %d, n2 is %d\n", n1, n2);
printf("Part B: (calc is: %d and calc0 is: %d\n", calc, calc0); 
printf("Part B: (calc1 is: %d and calc2 is: %d\n", calc1, calc2);
printf("Part B: (~%d + ~%d) == ~(%d + %d) evaluates to %d\n", n1, n2, n1, n2, result); 
```

这给出了以下输出：

```
Part B: (n1 is 5, n2 is 3
Part B: (calc is: -6 and calc0 is: -4
Part B: (calc1 is: -10 and calc2 is: -9
Part B: (~5 + ~3) == ~(5 + 3) evaluates to 0 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2018-01-03T14:39:31.667

[我知道这真的很老了，但我有同样的问题，而且由于最重要的答案是矛盾的......]

一个人的恭维确实是分配性的。您的代码中的问题（以及 Kaganar 的那种但不正确的答案）是您正在丢弃进位位 - 您可以在两个 s 的恭维中做到这一点，但不能在一个人的恭维中做到这一点。

无论您使用什么来存储总和，都需要比求和更多的内存空间，这样您就不会丢失进位位。然后将进位位折叠回用于存储操作数的位数以获得正确的总和。这在一个人的补码算术中称为“结束进位”。

来自维基百科文章（[https://en.wikipedia.org/wiki/Signed_number_representations#Ones](https://en.wikipedia.org/wiki/Signed_number_representations#Ones) '_complement）：

> 要将这个系统中表示的两个数字相加，需要进行传统的二进制加法，但随后需要进行结束进位：即，将任何结果进位加回到结果和中。要了解为什么这是必要的，请考虑以下示例，该示例显示了将 -1 (11111110) 与 +2 (00000010) 相加的情况：

```
 binary    decimal
    11111110     –1
 +  00000010     +2
 ───────────     ──
  1 00000000      0   ← Not the correct answer
           1     +1   ← Add carry
 ───────────     ──
    00000001      1   ← Correct answer 
```

> 在前面的例子中，第一个二进制加法得到 00000000，这是不正确的。正确的结果 (00000001) 仅在重新添加进位时出现。

我稍微更改了您的代码，以便更轻松地自己进行数学检查和测试。使用有符号整数数据类型可能需要更多考虑，或者考虑端接借用而不是携带。我没有走那么远，因为我的应用程序都是关于校验和的（即无符号的，只有加法）。

```
unsigned short n1 = 5;  //using 16-bit unsigned integers
unsigned short n2 = 3;

unsigned long oc_added = (unsigned short)~n1 + (unsigned short)~n2; //32bit
/*  Fold the carry bits into 16 bits */
while (oc_added >> 16)
    oc_added = (oc_added & 0xffff) + (oc_added >> 16);

unsigned long oc_sum = ~(n1 + n2);  //oc_sum has 32 bits (room for carry) 
/*  Fold the carry bits into 16 bits */
while (oc_sum >> 16)
    oc_sum = (oc_sum & 0xffff) + (oc_sum >> 16);

int result = oc_added == oc_sum;

unsigned short calc = ~n1;
unsigned short calc0 = ~n2;
unsigned short calc1 = ~n1 + ~n2;  //loses a carry bit
unsigned short calc2 = ~(n1 + n2);

printf("(Part B: n1 is %d, n2 is %d\n", n1, n2);
printf("Part B: (calc is: %d and calc0 is: %d\n", calc, calc0);
printf("Part B: (calc1 is: %d and calc2 is: %d\n", calc1, calc2);
printf("Part B: (~%d + ~%d) == ~(%d + %d) evaluates to %d\n", n1, n2, n1, n2, result); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T02:13:09.347

查看有关[Ones' 补码](http://en.wikipedia.org/wiki/Ones%27_complement)的 Wikiepdia 文章。补码中的加法在必须将溢出位添加到最低位的位置进行结束。

由于`~`(NOT) 等价`-`于一个补码中的 (NEGATE)，我们可以将其重写为：

```
-x1 + -x2 = -(x1 + x2) 
```

哪个是对的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T17:39:01.003

一个补码用于表示固定宽度寄存器中的负数和正数。要分配超过加法，必须应用以下内容：`~a + ~b`= `~(a + b)`。OP 状态`+`表示添加“两个二进制数”。这本身是模糊的，但是如果我们把它理解为添加无符号二进制数，那么不，一个人的恭维不是分配性的。

请注意，一个的补码中有两个零：所有位都是 1 或所有位都是零。

检查以查看`~0 + ~0 != ~(0 + 0)`: `~0`是否为零。然而，`~0`由所有的代表。将它添加到自身中会使它加倍——与左移相同——因此在右手数字中引入了一个零。但这不再是两个零之一。

然而，`0`是零，`0 + 0`也是零，因此也是`~(0 + 0)`。但左边不为零，所以分布不成立。

**另一方面**......考虑两个的恭维：翻转所有位并添加一个。如果注意特别对待一个人的恭维中的否定，那么那个版本的“二进制加法”类似于两个人的恭维并且是分配的，因为你最终得到一个熟悉的[商环](http://en.wikipedia.org/wiki/Ring_%28mathematics%29#Quotient_ring)，就像在两个人的恭维中一样。

前面提到的[Wikipedia 文章](http://en.wikipedia.org/wiki/Ones%27_complement)有更多关于处理加法以允许预期的算术行为的详细信息。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-18T01:29:38.303

根据[德摩根定律](http://en.wikipedia.org/wiki/De_Morgan%27s_laws)：

```
 ~(x1 + x2) = ~x1 * ~x2 
```

# wolfram-mathematica - 从方程求解方程 Mathematica

> ID：11076074
> 
> 赞同：1
> 
> 时间：2012-06-18T01:26:09.120
> 
> 标签：wolfram-mathematica, equation-solving

好吧，我需要一种方法来通过从 Mathematica 8 中的其他方程得到的另一个 var 来求解方程。示例：

```
a + b = 2c
c + 2 = d
d = 2b 
```

它将为给定值选择最佳方程并解决其余部分。使用一些给定的值，例如`a = 1`和`c = 3`，它可以求解系统，获取相应变量的值。*将其用于物理公式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T02:04:37.467

使用 Solve 或 Reduce 函数。语法是

> 求解[{方程列表}，{要求解的变量}]

所以在这种情况下：

```
Solve[{a + b == 2 c, c + 2 == d, d == 2 b}, {a, b, c, d}]
(*->
{{a -> -4 + (3 d)/2, b -> d/2, c -> -2 + d}}
*) 
```

有 4 个变量，只有 3 个方程，所以有无限解。
它们位于 4-d 线上`(-4 + (3 n)/2, n/2, n-2, n)`。

# jquery - 关于用户空间中 CouchJS 的简单示例，例如浏览器？

> ID：11076076
> 
> 赞同：2
> 
> 时间：2012-06-18T01:27:10.107
> 
> 标签：jquery, security, couchdb

### 定义

> > **CouchJs**：CouchDB 的 JavaScript 解释器
> > 
> > **CouchDB**：一个非 SQL 数据库，您可以在其中使用诸如 JS 之类的东西在用户空间执行大多数事情，因为在数据库级别执行事情往往很昂贵
> > 
> > **完整性**：在信息安全中，完整性意味着数据不能被不可察觉地修改。更多[在这里](https://unix.stackexchange.com/questions/9998/how-to-guarantee-the-integrity-of-an-os)。

CouchJS[网站](http://couchdb.apache.org/)没有内部搜索，在谷歌搜索或多或少令人困惑的博客文章后，我迷路了。我在哪里可以找到一些像下面这样的简单示例（不仅仅是 curls/telnet）？

```
<script type="text/javascript" src="lib/jquery-1.7.2.js"></script>
<script type="text/javascript" src="lib/jquery-ui-1.8.21.custom.min.js"></script>
<script src="http://127.0.0.1:5984/_utils/script/jquery.couch.js"></script>
    //# 1\. initilalize the db -object
    //# 2\. save something to the db with the object
<script> db.test.save('hello world') </script> 
```

### 也许对其他新手有用

1.  [CouchDB 一个真实世界的例子](https://stackoverflow.com/questions/1680408/couchdb-a-real-world-example)，引用免费书籍等的线程

2.  [NonSQL：在浏览器控制台中初始化 DB 对象？用户空间中的 DB 逻辑？](https://stackoverflow.com/questions/11060894/nonsql-initialization-of-db-object-in-browser-console-db-logic-in-the-user-s)

3.  CouchJS 的源代码在[这里](https://github.com/apache/couchdb/blob/master/share/www/script/jquery.couch.js)。

4.  [https://stackoverflow.com/questions/11077093/what-are-ajax-options-in-couchjs-explain-this-odd-null-error-with-couchjs](https://stackoverflow.com/questions/11077093/what-are-ajax-options-in-couchjs-explain-this-odd-null-error-with-couchjs)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T12:34:39.443

[建立在弗洛里安的答案之上——因为当我在这里](https://chat.stackoverflow.com/transcript/message/4165179#4165179)指出一些错误时他删除了他的答案，请略读他在历史上的答案。[他在此处](http://wiki.apache.org/couchdb/HTTP_Document_API#PUT)推荐了有关文档更新处理程序的文章和[此处](http://wiki.apache.org/couchdb/Document_Update_Handlers)的示例。至少有两个问题，[这里](https://developer.mozilla.org/En/XMLHttpRequest/Using_XMLHttpRequest)的 XMLHttpRequest需要一个字符串，而不是对象——我编辑了他的答案以添加 XMLHttpRequest -manual 以进行进一步调查，但由于某种原因有人取消了编辑。因此，我正在做出自己的答案，其中包含最多的修复，但仍然会刺激我仍在尝试解决的 DOM 11。

```
// By this function we solve the problem with Object, 
// changing JSON -object to string. The source is:
// https://stackoverflow.com/questions/111529/create-query-parameters-in-javascript    
function EncodeQueryData(data)
{
   var ret = [];
   for (var d in data)
      ret.push(encodeURIComponent(d) + "=" + encodeURIComponent(data[d]));
   return ret.join("&");
}

// We use ready CouchDB -example, source:
// http://wiki.apache.org/couchdb/HTTP_Document_API#PUT
var datas = {
  "Subject":"I like Plankton",
  "Author":"Rusty",
  "PostedDate":"2006-08-15T17:30:12-04:00",
  "Tags":["plankton", "baseball", "decisions"],
  "Body":"I decided today that I don't like baseball. I like plankton."
};

// We use the default -function, please, see the O'Reilly.
// https://developer.mozilla.org/En/XMLHttpRequest/Using_XMLHttpRequest
var xhr = new XMLHttpRequest();

// This may be wrong
xhr.open( 'POST', 'test.js', true );
xhr.setRequestHeader( 'Content-Type', 'application/json' );
xhr.open( 'POST', '127.0.0.1:5984/test/559c327683fe0acb96aff72bd174c258', true);

var msg = EncodeQueryData(datas);
xhr.send(msg); 
```

**去做**

> *   现在有一个错误 XMLHttpRequest *“不处理嵌套对象”*而是字符串，所以我们需要更复杂的命令或带有 XMLHttpRequest 的数组。我感谢 C.*rk 帮助我解决这个问题。
> *   可能与 test.js 相关，正在调查错误：`"XMLHttpRequest cannot load %3127.0.0.1:5984/test/559c327683fe0acb96aff72bd174c258\. Cross origin requests are only supported for HTTP. Error: NETWORK_ERR: XMLHttpRequest Exception 101"`

**相关谜题**

1.  [已解决][使用 JSON -headers 初始化 XMLHttpRequest 时解释 DOM 11 错误](https://stackoverflow.com/questions/11083647/explain-dom-11-error-in-the-initialization-of-xmlhttprequest-with-json-headers)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T01:54:28.173

我刚刚浏览了 CouchJS 网站的介绍页面，我发现的第一件事是：

> CouchDB 也使用普通的旧 HTTP，因此使用 JavaScript 就像在公园里散步一样，使用 XMLHttpRequest 对象。
> 
> 从这里出发只是使用普通的 CouchDB HttpRestApi 来获得你想要的东西。

因此，基于此，听起来您需要一个抽象/包装 CouchDB Rest API 的 jquery 插件来编写您的 ajax 调用。

所以我用谷歌搜索`jquery couch`，正如你所说，有很多结果不是很明确，也没有指向任何有用的文档或插件，除了[`$.couch`](http://daleharvey.github.com/jquery.couch.js-docs/symbols/index.html)，它看起来像一个野兽，但文档很干净，看起来就像它可以做任何 Rest API 允许的事情。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-18T01:58:13.803

> *“你通过 HTTP 请求与 CouchDB 通信。所以你所要做的就是使用 $.ajax 并发出这些请求（而不是 curl）（你可能必须在 CouchDB 设置中启用 JSONP）。”* ~Felix Kling 的评论

JSONP 可以`http://127.0.0.1:5984/_utils/config.html`作为管理员启用。

我收集了一些参考资料，但还不能说最好的，也不能说 AJAX 是否解决了问题。无论如何，这个看起来很有用，[如何使用 JavaScript/jQuery 将新数据发布到 CouchDB](https://stackoverflow.com/questions/6843060/how-do-i-post-new-data-to-couchdb-using-javascript-jquery)。我希望 Felix Kling 可以更全面地回答这个问题，但这里有一些问题需要进一步研究。

> **也许相关：关于 AJAX 和 JSONP**
> 
> 1.  [CouchDB AJAX 交互](https://stackoverflow.com/questions/8818562/couchdb-ajax-interaction?lq=1)
>     
>     
> 2.  [如何对 CouchDB (http://<usename>.couchone.com/) 执行 Ajax 请求](https://stackoverflow.com/questions/3797853/how-do-i-perform-an-ajax-request-to-couchdb-http-usename-couchone-com)
>     
>     
> 3.  [连接 AJAX、CouchDB 和 JavaScript](https://stackoverflow.com/questions/3386679/connection-ajax-couchdb-and-javascript)，关于 JSONP 的一些东西 - 支持
>     
>     
> 4.  [JQuery .ajax 不适用于 http://127.0.0.1:5984](https://stackoverflow.com/questions/8241911/jquery-ajax-dosent-work-with-http-127-0-0-15984)
>     
>     
> 5.  [如何使用 JavaScript/jQuery 将新数据发布到 CouchDB](https://stackoverflow.com/questions/6843060/how-do-i-post-new-data-to-couchdb-using-javascript-jquery)

# string - 查找许多字符串的公共前缀的最有效方法

> ID：11076077
> 
> 赞同：2
> 
> 时间：2012-06-18T01:27:10.727
> 
> 标签：string, algorithm, prefix

找到许多字符串的公共前缀的最有效方法是什么。

例如：

对于这组字符串

```
/home/texai/www/app/application/cron/logCron.log
/home/texai/www/app/application/jobs/logCron.log
/home/texai/www/app/var/log/application.log
/home/texai/www/app/public/imagick.log
/home/texai/www/app/public/status.log 
```

我想要`/home/texai/www/app/`

我想避免 char by char 比较。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T01:32:20.753

你不能避免至少通过公共部分来找到公共前缀。

我认为这不需要任何花哨的算法。只需跟踪当前的公共前缀，然后通过将当前前缀与下一个字符串进行比较来缩短前缀。

由于这是所有字符串的公共前缀，因此您最终可能会得到空字符串（没有公共前缀）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T01:34:30.693

我不确定您避免逐字符比较是什么意思，但是您至少需要从每个字符串中读取公共前缀，因此以下算法是您可以实现的最佳算法（只需遍历字符串直到它们偏离或直到达到当前最长的前缀计数）：

```
List<string> list = new List<string>()
{
    "/home/texai/www/app/application/cron/logCron.log",
    "/home/texai/www/app/application/jobs/logCron.log",
    "/home/texai/www/app/var/log/application.log",
    "/home/texai/www/app/public/imagick.log",
    "/home/texai/www/app/public/status.log"
};

int maxPrefix = list[0].Length;
for(int i = 1; i < list.Count; i++)
{
    int pos = 0;
    for(; pos < maxPrefix && pos < list[i].Length && list[0][pos] == list[i][pos]; pos++);

    maxPrefix = pos;
}

//this is the common prefix
string prefix = list[0].Substring(0, maxPrefix); 
```

# mainframe - JCL - 获取给定区域（大型机）中非空格字符的计数

> ID：11076078
> 
> 赞同：1
> 
> 时间：2012-06-18T01:28:09.090
> 
> 标签：mainframe, jcl

我需要准备一些输入数据来运行程序，数据应该是以下格式。

```
 UID (1-11)|TxtLen (12-16)| Text (17-62) 
```

我可以使用 sort 正确定位字段并获取 UID 和文本字段。'TxtLen' 应该包含从文本字段开头到文本字段中最后一个字符的字符数。

```
i.e. “Hello”’s TxtLen is 5, “Hel lo”’s TxtLen is 6, “Hello World”’s TxtLen is 11, etc... 
```

我想知道是否有办法仅通过 JCL 获取 TxtLen，或者是否需要一个程序来执行此操作？

-谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-18T02:26:14.327

您将需要一个程序。

我在 Stack Overflow 上看到相当多的大型机问题，询问“仅 JCL”是否可行。请记住，[JCL](https://www.ibm.com/docs/en/zos/2.4.0?topic=zmjug-introduction)主要是一种执行程序的方法，实际上除此之外几乎没有什么作用。例如，当你说

> 我可以使用 sort 正确定位字段并获取 UID 和文本字段

`sort`是一个程序。它恰好是大多数系统上的一个程序（尽管有不同供应商的实现，IBM 有一个，SyncSort 有一个，CA 有一个，等等）在大型机系统上常见的还有[很多其他程序。](https://www.ibm.com/docs/en/zos/2.4.0?topic=introduction-data-set-utility-programs)

只是为了迂腐，JCL 实际上并没有做*任何事情*，[JES](https://www.ibm.com/docs/en/zos/2.4.0?topic=introduction-jes2)在解释 JCL 时完成工作。

对于您的特定情况，您可以创建一个 SORT 出口，或在[Rexx](https://www.ibm.com/docs/en/zos/2.4.0?topic=tsoe-zos-rexx-reference)中处理您的数据，或者您可以使用一些[Unix 系统服务](https://www.ibm.com/docs/en/zos/2.4.0?topic=services-zos-unix-system-command-reference) [命令](https://www.ibm.com/docs/en/zos/2.4.0?topic=reference-shell-command-descriptions)并通过[BPXBATCH](https://www.ibm.com/docs/en/zos/2.4.0?topic=environments-bpxbatch)或[COZBATCH](http://www.dovetail.com/products/cozbatch.html)执行这些命令。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T04:12:16.580

我已经使用 REXX 程序完成了这样的临时转换。该程序非常简单：

*   分配输入和输出文件
*   打开两个文件开始循环：
*   读取输入
*   提取文本字段并去除尾随空格
*   获取修剪后的文本字段的长度和格式为 5 位数字
*   覆盖号回到 Len 字段位置的记录中
*   写出更新的记录重复循环直到文件结束
*   关闭两个文件
*   释放分配的文件

如果您需要一些实际代码，请告诉我。我发现 REXX 在字符串函数和操作方面优于 COBOL。我什至已经从 COBOL 创建并调用了 REXX 例程来实现这一点。

# ios - 标签栏不让Facebook登录出现IOS

> ID：11076079
> 
> 赞同：0
> 
> 时间：2012-06-18T01:28:14.880
> 
> 标签：ios, facebook-graph-api, tabbar

我正在尝试制作一个标签栏应用程序，首先我遵循了[这个](http://www.raywenderlich.com/1488/how-to-use-facebooks-new-graph-api-from-your-iphone-app)Facebook grap api 教程，当我触摸登录时，我的项目运行良好，如图所示，显示弹出窗口

![在此处输入图像描述](../Images/6405e6f5f28fbb1760f8d32b445e7d43.png) ![在此处输入图像描述](../Images/79da953cba09f6e547089a442c9820a3.png)

之后我只添加了一个标签栏，我迷路了，没有错误，但程序没有启动 facebook 登录显示。我已经使用断点来理解为什么程序没有启动 facebook 登录显示但无法理解，因为它只是没有错误。它必须是带有标签栏的东西。

现在它的程序卡在弹出 facebook 登录显示 ![在此处输入图像描述](../Images/9438078ce16d012c2d1545c3de8902c4.png) ![在此处输入图像描述](../Images/b629b43058f155e9f16a3943f32630be.png)

我的应用程序委托.h

```
#import <UIKit/UIKit.h>

@class FBFunMe;

@interface FBFunAppDelegate : NSObject <UIApplicationDelegate> {

    UIWindow *window;
    UITabBarController *rootController;
}

@property (nonatomic, retain) IBOutlet UIWindow *window;
@property (nonatomic, retain) IBOutlet UITabBarController *rootController;

@end 
```

应用委托.m

```
#import "FBFunAppDelegate.h"
#import "FBFunMe.h"
#import "FBFunLoginDialog.h"

@implementation FBFunAppDelegate

@synthesize window = _window;
@synthesize rootController;

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    // Override point for customization after application launch.
    [self.window addSubview:rootController.view];
    [self.window makeKeyAndVisible];

    return YES;
} 
```

我知道其余代码可以正常工作，因为我有一个相同的项目，没有标签栏可以正常工作。

有什么建议或示例代码可以让它工作吗？

_____ - - - - - -编辑 - - - - - - ________

在应用程序委托中，当我尝试此代码时，它会显示我需要的 FBFunLoginDialog，但我仍然需要在我的登录按钮中而不是在

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions 
```

因为我为了登录 Facebook 调用了一些变量和 appID 和人员

```
FBFunLoginDialog *loginController=[[FBFunLoginDialog alloc] init];
    [self.window addSubview:rootController.view];
    [self.rootController presentModalViewController:loginController animated:YES];

    [window makeKeyAndVisible];
    return YES; 
```

在 FBFunMe.h

```
@interface FBFunMe :UIViewController <FBFunLoginDialogDelegate,UITextFieldDelegate> {
           FBFunLoginDialog *_loginDialog;
        UIView *_loginDialogView;
} 
```

在FBFunMe.M

```
- (IBAction)loginButtonTapped:(id)sender {

    NSString *appId = @"3888888883";
    NSString *permissions = @"publish_stream";

    if (_loginDialog == nil) {
        self.loginDialog = [[[FBFunLoginDialog alloc] initWithAppId:appId 
                                               requestedPermissions:permissions delegate:self] autorelease];
        self.loginDialogView = _loginDialog.view;
    }

    if (_loginState == LoginStateStartup || _loginState == LoginStateLoggedOut) {
        _loginState = LoginStateLoggingIn;
        [_loginDialog login];
    } else if (_loginState == LoginStateLoggedIn) {
        _loginState = LoginStateLoggedOut;        
        [_loginDialog logout];
    }

    [self refresh];

} 
```

# css - 如何在 HTML 元素中使用 CSS 设置特定单词的样式？

> ID：11076085
> 
> 赞同：4
> 
> 时间：2012-06-18T01:30:35.097
> 
> 标签：css, fonts, tags

如何在`<p>`标签中设置特定单词的样式？EX：**STUDIO X**是有史以来最好的工作室。

^^我如何使用 css 使“STUDIO X”与“是有史以来最好的工作室”不同的字体？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-18T01:40:26.900

你应该做这个：

```
p {
  font-size: 12px;
}

span {
  font-size: 16px;
  font-weight: bold;
}
```

```
<p>
  <span>STUDIO X</span> is the best studio ever
</p>
```

我建议您为`<p>`和`<span>`标签定义一个特定的类，它将防止意外覆盖。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-18T01:36:47.113

你可以用 span 标签包装它

```
<p><span class="best_studio">STUDIO X</span> is the best studio ever.</p> 
```

并使用 CSS 定义样式

```
.best_studio {
  font-family: Arial,
  font-size: 22px
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-12-09T05:45:59.717

```
<span class="nevis">STUDIO X</span> 
```

```
.nevis { font-weight:bold; } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-18T01:33:53.160

```
<p><strong>STUDIO X</strong> is the best studio ever</p> 
```

我相信大多数浏览器的默认 css 都会加粗一个`strong`元素，但您也可以明确说明并添加自己的规则

```
p strong { font-weight:bold; } 
```

# unit-testing - CakePHP2 测试登录()

> ID：11076100
> 
> 赞同：3
> 
> 时间：2012-06-18T01:33:22.880
> 
> 标签：unit-testing, cakephp, phpunit, cakephp-2.0, cakephp-2.1

我想在我的 UsersController.php 中测试 login() 操作

```
<?php
class UsersController extends AppController {
    public $helpers = array('Html', 'Form');
    public $components = array('RequestHandler');

    public function beforeFilter() {
        parent::beforeFilter();
        $this->Auth->allow('logout', 'login');
        // $this->Auth->allow('logout');
        $this->Security->csrfExpires = '+1 hour';
    }

    public function login() {
        if($this->request->is('post')) {
            if ($this->Auth->login()) {
                return $this->redirect($this->Auth->redirect());
            } else {
                $this->Session->setFlash(__('Invalid username or password, try again'),'info');
            }
        }
    } 
```

AppController.php

```
<?php
App::uses('Controller', 'Controller');

class AppController extends Controller {

    public $components  = array(
        'Session',
        'Security',
        'Auth' => array(
            'loginRedirect' => array('controller' => 'dashboards', 'action' => 'index'),
            'logoutRedirect' => array('controller' => 'dashboards', 'action' => 'welcome'),
            'authorize' => array('Controller')
        )
    );

    public function isAuthorized($user) {
        //Admin can access every action
        if (isset($user['role']) && $user['role'] === 'admin') {
            return true;
        }

        //Default deny
        $this->Session->setFlash('You are not allowed to access the requested page');
        return false;
    }

} 
```

UsersControllerTest.php

```
<?php

class UsersControllerTest extends ControllerTestCase {
    public $autoRender = false;
    public $fixtures = array('app.user','app.account');

    public function setUp() {
        parent::setUp();
        $this->User = ClassRegistry::init('User');
    }

...snip...
    public function testLogin() {

        $this->Users = $this->generate('Users', array(
            'components' => array(
                //'Session',
                'Security' => array('_validatePost'),
            )
        ));
        $this->Users->Security->expects($this->any())
             ->method('_validatePost')
             ->will($this->returnValue(true));

        $user = array();
        $user['User']['username'] = 'admin';
        //$user['User']['password'] = Security::hash('test', null, true);
        $user['User']['password'] = 'test';

        $result = $this->testAction('/users/login',
            array('data' => $user, 'method' => 'post', 'return' => 'contents')
        );

        debug( $this->contents); 
        //OUTPUTS: I get "Invalid username or password, try again"
        //EXPECTED: A successful login message since I provided the correct credentials

    } 
```

~~那么，当什么都不返回时，我将如何测试我的 login() 方法`$this->testAction('/users/login', array('data' => $user, 'method' => 'post', 'return' => 'contents'));`？~~

**输出：**我收到“无效的用户名或密码，请重试”

**预期：**由于我提供了正确的凭据，因此出现了成功的登录消息

任何答复将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T00:41:56.470

感谢@jeremyharris，我能够测试我的 login()

用户控制器测试.php

```
public function testLogin() {
    $this->Users = $this->generate('Users', array(
        'components' => array(
            'Security' => array('_validatePost'),
        )
    ));

    $data = array();
    $data['User']['username'] = 'admin';
    $data['User']['password'] = 'test';

    $this->Users->Auth->logout();
    $this->testAction('/users/login',
        array('data' => $data, 'method' => 'post', 'return' => 'contents')
    );

    $result = $this->testAction('/',
        array('method' => 'get', 'return' => 'contents')
    );

    // debug($result); 
    $this->assertContains('You are logged in as: <span class="label">admin</span>',$result);
}

public function testLoginInvalid() {
    $this->Users = $this->generate('Users', array(
        'components' => array(
            'Security' => array('_validatePost'),
        )
    ));

    $data = array();
    $data['User']['username'] = 'admin';
    $data['User']['password'] = 'BLAH!';

    $this->Users->Auth->logout();
    $this->testAction('/users/login',
        array('data' => $data, 'method' => 'post', 'return' => 'contents')
    );

    $result = $this->testAction('/users/login',
        array('method' => 'get', 'return' => 'contents')
    );

    // debug($result); 
    $this->assertNotContains('You are logged in as',$result);
    $this->assertContains('id="UserLoginForm" method="post"',$result);
} 
```

UserFixture.php，我使用了 init() 方法——正如@jeremyharris 关于散列密码所说的那样。

```
<?php
App::uses('AuthComponent', 'Controller/Component');

class UserFixture extends CakeTestFixture {
    /* Optional. Set this property to load fixtures to a different test datasource */
    public $useDbConfig = 'test';

    public $fields = array(
        'id' => array('type' => 'integer', 'key' => 'primary'),
        'account_id' => array('type' => 'integer'),
        'username' => array('type' => 'string', 'length' => 255, 'null' => false),
        'email' => array('type' => 'string', 'length' => 255, 'null' => false),
        'password' => array('type' => 'string', 'length' => 255, 'null' => false),
        'password_token' => array('type' => 'string', 'length' => 255, 'null' => false),
        'password_token_expiry' => array('type' => 'string', 'length' => 255, 'null' => false),
        'role' => array('type' => 'string', 'length' => 25, 'null' => false),
        'created' => 'datetime',
        'modified' => 'datetime'
    );

/*    public $records = array(
        array('id'=>1, 'account_id' => 1, 'username' => 'admin', 'email' => 'admin@test.com', 'password' => 'f57f702f8d557ae5318fa49455cbe9838c1d1712', 'role' => 'admin', 'password_token'=>'', 'password_token_expiry'=>'','created' => '2012-03-18 10:39:23', 'modified' => '2012-03-18 10:41:31'),
        array('id'=>2, 'account_id' => 1, 'username' => 'user', 'email' => 'user@test.com', 'password' => 'f57f702f8d557ae5318fa49455cbe9838c1d1712', 'role' => 'user', 'password_token'=>'', 'password_token_expiry'=>'', 'created' => '2012-03-18 10:39:23', 'modified' => '2012-03-18 10:41:31')
    );
*/
     public function init() {
        $this->records = array(
            array('id'=>1, 'account_id' => 1, 'username' => 'admin', 'email' => 'admin@test.com', 'password' => AuthComponent::password('test'), 'role' => 'admin', 'password_token'=>'', 'password_token_expiry'=>'','created' => '2012-03-18 10:39:23', 'modified' => '2012-03-18 10:41:31'),
            array('id'=>2, 'account_id' => 1, 'username' => 'user', 'email' => 'user@test.com', 'password' => AuthComponent::password('test'), 'role' => 'user', 'password_token'=>'', 'password_token_expiry'=>'','created' => '2012-03-18 10:39:23', 'modified' => '2012-03-18 10:41:31'),
        );
        parent::init();
    }
} 
```

第一个 testAction() 是一个 POST，然后第二个得到“下一页”——从那里我做断言。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T15:22:55.023

问题是您正在模拟整个 Session 组件。这意味着所有会话方法都将返回 null。从中删除“会话”键`$this->generate()`，您应该会很好。

# ruby-on-rails - Rails：用户配置文件的 Ajax 导航

> ID：11076105
> 
> 赞同：0
> 
> 时间：2012-06-18T01:34:06.623
> 
> 标签：ruby-on-rails, ajax, partial-views

这就是我想做的事情：我有一个用户个人资料，其中包含一个类似导航的选项卡：“关于”、“图片”和“评论”。

我想为每个部分提供一个部分。所以 _about.html.erb、_pictures.html.erb 和 _comments.html.erb。单击选项卡导航中的链接时，这些部分应加载到 div 中。

稍后我想添加一个加载动画。

现在我对 Ajax 有点陌生，并试图找到某种类似于此的教程或示例，但我没有运气。

我希望有人能告诉我最好的方法是什么。我想在我的应用程序的许多其他部分上使用这种加载，这样页面就不必一直重新加载，而且看起来很酷；）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T01:37:22.827

你可以从[jQuery 库和 .load() 函数开始](http://api.jquery.com/load/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T08:41:19.757

这帮助了我：

[Rails 3：简单的 AJAXy 页面更新？](https://stackoverflow.com/questions/4016285/rails-3-simple-ajaxy-page-updates)

[http://railscasts.com/episodes/205-unobtrusive-javascript](http://railscasts.com/episodes/205-unobtrusive-javascript)

# python - Python/SQLite 将列表存储为二进制文件（blob）

> ID：11076107
> 
> 赞同：3
> 
> 时间：2012-06-18T01:34:20.520
> 
> 标签：python, sqlite, list

sqlite 的官方文档建议将列表存储为二进制对象。谷歌给了我各种建议。一种是使用数组模块（array.array（'B'，my_list2），但这不适用于非平凡的列表：

```
my_list2 = [(23,"Bob"), (22,"Alice")]
array.array('B',my_list2)

TypeError: an integer is required 
```

另一个建议涉及使用泡菜，但有人插话说它不安全。最后一个建议是为每个列表变量创建一个新表，其中有几个。不过，我对制作复杂的架构犹豫不决。

我应该怎么办？我应该如何将 my_list2 与其他列表一起存储在数据库中？

**编辑**

找到了一个优雅而整洁的解决方案，适用于简单和复杂的案例，代码最少：

```
import json
my_list2 = [(23,"Bob Baker"), (22,"Alice Adams")]
my_list2_str = json.dumps(my_list2)
print type(my_list2_str)
 <type 'str'>
list2 = json.loads(my_list2_str)
print list2, type(list2)
 [(23, u"Bob Baker"), (22, u"Alice Adams")] <type 'list'> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T02:52:40.657

[这个问题似乎与之前的 SO question](https://stackoverflow.com/questions/537077/python-sqlite3-how-to-convert-a-list-to-a-blob-cell)非常相似，所以起初我认为这可能会解决您的问题。但是再次查看您的问题，您似乎确实阅读了这个问题，因为您提到了他们提出的两种方法。另外，由于您的数据类型不同（元组列表而不是整数列表），我将给您通过。

做一些研究，我发现了很多使用方法的代码示例`sqlite3.Binary()`（例如[这里](http://zetcode.com/db/sqlitepythontutorial/)）。这可能是您想要的，但让我担心的是，我在[Sqlite3 Python Interface API中](http://docs.python.org/library/sqlite3.html)**绝对找不到**此函数的文档。因此，我建议不要使用它。我猜这种方法已被弃用，但我找不到任何关于替换它的明确文档。

也就是说，如果您阅读[Sqlite3 Python 接口 API](http://docs.python.org/library/sqlite3.html)，您会看到它自动将 BLOB 转换为 Python[缓冲区](http://docs.python.org/library/functions.html#buffer)对象（并将缓冲区对象转换为 BLOB）。所以在我看来，如果您可以将列表转换为缓冲区，那么您可以轻松地将其存储为 BLOB。

在我的研究中，我发现列表不能存储为缓冲区。我还发现虽然有一些方法可以将列表转换为缓冲区，但它们需要简单类型的列表（即不是元组）。因此，我认为您最好的选择是定义一些实用方法来将列表转换为字符串和从字符串转换，然后将字符串转换为缓冲区（并在您从数据库中检索它们时返回）。

```
def myListToStr(myList):
    """This method takes a list of (int, str) tuples and converts them to a string"""

    strList = ""
    for item in myList:
        num, name = item #split the tuple

        strList += "{}:{} ".format(num, name) #append the tuple in "num:name" format with a " " delimiter

    return strList[:-1] #remove the final space (unneeded)

def strToMyList(myStr):
    """This method takes a string in the format "int:str int:str int:str..."
    and converts it to a list of (int, str) tuples"""

    myList = []
    for tup in myStr.split(" "): #for each converted tuple
        numStr, name = tup.split(":") #split the tuple

        num = int(numStr) #NOTE: this will throw an error if numStr.isdigit() is False
        myList.append(num, name)

    return myList 
```

现在，转换为缓冲区就像

```
my_list2Buff = buffer(myListToStr(my_list2)) 
```

然后回来...

```
my_list2 = strToList(str(my_list2Buff)) 
```

# c++ - 读取字符串的所有输入，以空格分隔

> ID：11076111
> 
> 赞同：0
> 
> 时间：2012-06-18T01:35:24.783
> 
> 标签：c++, string, stdin, cin

我正在尝试从`cin`. 我试过`getline`了，但它只让我选择一个分隔符。我试过了`operator>>`，但`while(cin >> str)`没有为我工作。有什么建议么？

PS我还没有看过boost，但我现在正在看。如果我找到任何东西，我会告诉你的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T19:15:56.717

unix/mac 上的 Control-D 和 Widows 上的 Control-Z 向 cin 发出输入结束信号。

# iphone - iOS：当另一个视图与它相接时，我如何旋转视图控件？

> ID：11076113
> 
> 赞同：2
> 
> 时间：2012-06-18T01:36:37.293
> 
> 标签：iphone, xcode, rotation, autorotate

我正在制作一个应用程序只是为了好玩，它似乎工作正常，除了当我希望它只在一个屏幕上是横向时，它会保持纵向。我怎样才能让它在加载时自动旋转到横向？我已经尝试过了：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
return (interfaceOrientation == UIInterfaceOrientationLandscapeRight ) || (interfaceOrientation == UIInterfaceOrientationLandscapeLeft);   
} 
```

但是，这似乎不起作用。只有当我旋转设备时，它才会旋转视图，然后它将保持横向，但我希望它能够在加载后立即执行，而无需用户旋转设备以使其脱离纵向。有什么我想念的吗？感谢您的所有帮助！如果您想从应用程序中获取更多代码，我将非常乐意与您分享。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T01:39:53.720

在 viewDidLoad 方法和 shouldautorotate 方法中添加：

```
 [[UIApplication sharedApplication] setStatusBarOrientation:UIInterfaceOrientationLandscapeRight animated:NO];
 [[self view] setBounds:CGRectMake(0, 0, 480, 320)];
 [[self view] setCenter:CGPointMake(160, 240)];
 [[self view] setTransform:CGAffineTransformMakeRotation(M_PI / 2)]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T02:18:23.997

试试这个代码

```
@interface UIViewController(ESUtils)
    -(void)changeToPortrait;
@end

@implementation UIViewController(ESUtils)
-(void)changeToPortrait
{
    //for will call a shouldAutorotateToInterfaceOrientation func
    UIViewController *view = [[UIViewController alloc] init];
    [self presentModalViewController:view animated:NO];
    [self dismissModalViewControllerAnimated:NO];
    [view release];
}

@end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T02:23:12.263

你想做两件事，

首先在界面构建器上，转到您想要的景观视图，并确保方向设置为横向（如果推断它会采用父方向）。您可以在属性检查器的第 4 个选项卡上的模拟指标下找到它。

现在第二个，该视图必须具有您发布的代码

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
return (interfaceOrientation == UIInterfaceOrientationLandscapeRight ) || (interfaceOrientation == UIInterfaceOrientationLandscapeLeft);   
} 
```

# php - 我怎样才能得到一个元素的所有父母？

> ID：11076117
> 
> 赞同：0
> 
> 时间：2012-06-18T01:37:40.867
> 
> 标签：php, mysql, hierarchy

我有一个查询 (+php) 用于获取父级的所有子级，但现在将其翻转，这样我得到一个元素的所有父级会更有用。

桌子：

```
ID     parentID     showOrder
===============================
1      0            0
2      1            0
3      2            0
4      3            1
5      3            2
6      3            3 
```

代码：

```
<?php
$structure = array();
$sql = "SELECT ID, parentID FROM table ORDER BY parentID ASC, showOrder ASC";
while ($row = fetch_row()) {
  $structure[$row['parentID']][] = $row['ID'];
} 
```

输出：

```
0: [1], 1: [2], 2: [3], 3: [5,4,6] 
```

首选结果：

```
0: [], 1: [0], 2: [1, 0], 3: [2, 1, 0],
4: [3, 2, 1, 0], 5: [3, 2, 1, 0], 6: [3, 2, 1, 0] 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T02:02:22.513

如果父母总是有序的，你可以像这样保持祖先的数组：

```
// initialize as empty
$ancestors = array();
while ($row = fetch_row()) {
    $ancestors[$row['id']] = array($row['parentid'] => $row['parentid']);
    // if the parent exists
    if (isset($ancestors[$row['parentid']])) {
        // grow ancestors by parent's ancestors
        $ancestors[$row['id']] += $ancestors[$row['parentid']];
    }
} 
```

输出：

```
Array
(
    [1] => Array
        (
            [0] => 0
        )

    [2] => Array
        (
            [1] => 1
            [0] => 0
        )

    [3] => Array
        (
            [2] => 2
            [1] => 1
            [0] => 0
        )

    [4] => Array
        (
            [3] => 3
            [2] => 2
            [1] => 1
            [0] => 0
        )

    [5] => Array
        (
            [3] => 3
            [2] => 2
            [1] => 1
            [0] => 0
        )

    [6] => Array
        (
            [3] => 3
            [2] => 2
            [1] => 1
            [0] => 0
        )

) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T01:43:04.427

您落入了分层查询域。

尽管 Oracle 提供了一种非常方便的方式来处理（`CONNECT BY`子句），但 mysql 没有。

按照此链接[http://explainextended.com/2009/03/17/hierarchical-queries-in-mysql/](http://explainextended.com/2009/03/17/hierarchical-queries-in-mysql/)将向您解释如何通过纯 mysql 达到目标。

如果您希望仅通过 php 执行此操作，您也可以，但由于引擎切换（php/mysql 之间的通信：调用查询、返回 php 等）在多次迭代后可能变得昂贵，因此效率会低下.

rgds。

# c# - Windows 窗体 TableLayoutPanel 中的不同单元格大小

> ID：11076118
> 
> 赞同：1
> 
> 时间：2012-06-18T01:37:46.480
> 
> 标签：c#, .net, winforms, tablelayoutpanel

在 Windows 窗体中，我如何使其`TableLayoutPanel`包含不同的单元格大小（行和/或列）？

例如：第 1 行可能只有 1 个单元格，第 2 行可能有 5 个单元格，第 3 行可能还有 5 个单元格，但列大小不同。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T01:43:24.873

您不能选择每行的列数，反之亦然。但是，您可以做的是`TableLayoutPanel`在任一方向上控制跨多个单元格的跨度。

因此，选择所需的行数和列数及其大小来设置所需的“网格”结构，然后在面板单元格中的各个控件上[设置`RowSpan`和`ColumnSpan`属性](http://msdn.microsoft.com/en-us/library/ms171687%28v=vs.80%29.aspx "有关此主题的 MSDN 操作指南文章")，以将这些单元格组合成更大的单元格。（这些“外来”属性[由面板附加](http://msdn.microsoft.com/en-us/library/d6c1xa43.aspx "有关 Windows 窗体扩展程序提供程序的 MSDN 文章")到放置在其单元格中的控件）。

# python - Facebook 使用 Python/Django 的“缺少 redirect_uri 参数”响应

> ID：11076119
> 
> 赞同：7
> 
> 时间：2012-06-18T01:37:54.070
> 
> 标签：python, facebook, http, ssl, httplib

这可能是一个非常愚蠢的问题，但我已经盯着这个几个小时了，找不到我做错了什么。

我正在尝试使用 Python 对 Facebook API 进行身份验证，但在请求用户访问令牌时遇到问题。收到代码后，我向[https://graph.facebook.com/oauth/access_token](https://graph.facebook.com/oauth/access_token)发出请求，如下所示：

```
conn = httplib.HTTPSConnection("graph.facebook.com")
params = urllib.urlencode({'redirect_uri':request.build_absolute_uri(reverse('some_app.views.home')),
                           'client_id':apis.Facebook.app_id,
                           'client_secret':apis.Facebook.app_secret,
                           'code':code})
conn.request("GET", "/oauth/access_token", params)
response = conn.getresponse()
response_body = response.read() 
```

作为回应，我收到

> {"error":{"message":"缺少 redirect_uri 参数。","type":"OAuthException","code":191}}

有什么想法可能会出错吗？我已经验证了正在传递的redirect_uri 在应用程序域上，但是这可能是一个问题，这是在本地托管并且该域只是通过我的主机文件重定向到本地主机吗？

谢谢你的帮助！

编辑：

我使用请求库得到了这个工作：

```
params = {'redirect_uri':request.build_absolute_uri(reverse('profiles.views.fb_signup')),
                           'client_id':apis.Facebook.app_id,
                           'client_secret':apis.Facebook.app_secret,
                           'code':code}

r = requests.get("https://graph.facebook.com/oauth/access_token",params=params) 
```

但是，当本机支持该库时，我仍然更愿意依赖库，而没有太多困难。可能这个要求太高了……

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-12T05:10:46.923

在您的第一个示例（使用 的示例`HTTPSConnection`）中，您传入`params`了请求的正文：

```
conn.request("GET", "/oauth/access_token", params) 
```

这是不正确的（GET 请求不应该有正文）。相反，参数应该作为 URL 的查询字符串部分传递：

```
conn.request("GET", "/oauth/access_token?" + params) 
```

# backbone.js - 400 HTTP 返回时未调用错误回调

> ID：11076121
> 
> 赞同：2
> 
> 时间：2012-06-18T01:37:59.633
> 
> 标签：backbone.js

我有一个 RESTful 服务，当我尝试保存新记录时，它会执行唯一的电子邮件检查。当它失败时，我会返回一个 400 错误代码以及一条带有“错误”值的 JSON 消息。

不幸的是，我保存的错误回调似乎没有触发。有什么建议么？

```
var nRecord = new RecordModel(values);
nRecord.save({
    wait: true,
    error: function(model,response){
        console.log('error2');
        obj.errorHandler(model,response);
    },
    success: function() {
        console.log('success2');
        obj.alert('Information saved!','Record Created!','success');

        // if there were no errors, clear the list
        $('#record-form :input').val('');
    }
}); 
```

“Error2”永远不会显示在控制台中。想法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-18T02:21:33.120

您似乎将错误处理程序和其他选项作为模型属性传递并保存到模型中。尝试将 null 作为第一个参数传递给 save 函数。希望这会让它工作:)

```
nRecord.save(null,{
    wait: true,
    error: function(model,response){
        console.log('error2');
        obj.errorHandler(model,response);
    },
    success: function() {
        console.log('success2');
        obj.alert('Information saved!','Record Created!','success');

        // if there were no errors, clear the list
        $('#record-form :input').val('');
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T12:17:37.173

我遇到了这个问题，问题是我覆盖了模型中的同步。这意味着选项没有被传递。

```
completeCustomer.save(null, {
                wait: true,
                error: function(model,response){
                    console.log('error2');
                    //obj.errorHandler(model,response);
                    _.bind(this.handleError, this);
                },
                success: function() {
                    console.log('success2');
                    //_.bind(this.handleSuccess, this);
                }
            }); 
```

# android - android中带有图像的分段ListView

> ID：11076123
> 
> 赞同：0
> 
> 时间：2012-06-18T01:38:21.597
> 
> 标签：android, listview

我已经成功实现了分段列表视图，但现在我想在其中添加图像。我现在实际上不知道如何进行，请指导我。下面是列表视图行的快照。 ![在此处输入图像描述](../Images/3c2047fa922e810e284bbe01cb4d00d2.png)

下面是 ListView 的代码片段：

```
adapter.addSection((keys.get(i)), new SimpleAdapter(getApplicationContext(), security, R.layout.list_complexblue, new String[] { ITEM_TITLE, ITEM_CAPTION, ITEM_DATE, VISIBLE_DATE, LINK, IMAGE }, new int[] { R.id.list_complex_title, R.id.list_complex_caption, R.id.list_complex_pubDate, R.id.list_visible_pubDate, R.id.list_complex_link, R.id.list_complex_image })); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T03:42:29.313

如果它是静态图像，请不要在上面的声明中指定它，只需将其放在布局中的正确位置即可。但是，如果它是动态图像，那么您必须使用扩展简单适配器的自定义适配器，而不是在每次迭代时为一行指定图像。

谢谢

# java - 如何使用 Android/Java 加速图像处理？

> ID：11076125
> 
> 赞同：3
> 
> 时间：2012-06-18T01:38:52.470
> 
> 标签：java, android, arrays

我正在按照一些 Java 代码对位图进行图像处理，发现这对用户来说确实很耗时。

如何在代码中更快地做到这一点？

现在它需要一个像素一个像素的时间太长

我在某处读到了关于先将其存储到二维数组中的信息？**矩阵**？

```
public static Bitmap createContrast(Bitmap src, double value) {
    // image size
    int width = src.getWidth();
    int height = src.getHeight();
    // create output bitmap
    Bitmap bmOut = Bitmap.createBitmap(width, height, src.getConfig());
    // color information
    int A, R, G, B;
    int pixel;
    // get contrast value
    double contrast = Math.pow((100 + value) / 100, 2);

    // scan through all pixels
    for(int x = 0; x < width; ++x) {
        for(int y = 0; y < height; ++y) {
            // get pixel color
            pixel = src.getPixel(x, y);
            A = Color.alpha(pixel);
            // apply filter contrast for every channel R, G, B
            R = Color.red(pixel);
            R = (int)(((((R / 255.0) - 0.5) * contrast) + 0.5) * 255.0);
            if(R < 0) { R = 0; }
            else if(R > 255) { R = 255; }

            G = Color.red(pixel);
            G = (int)(((((G / 255.0) - 0.5) * contrast) + 0.5) * 255.0);
            if(G < 0) { G = 0; }
            else if(G > 255) { G = 255; }

            B = Color.red(pixel);
            B = (int)(((((B / 255.0) - 0.5) * contrast) + 0.5) * 255.0);
            if(B < 0) { B = 0; }
            else if(B > 255) { B = 255; }

            // set new pixel color to output bitmap
            bmOut.setPixel(x, y, Color.argb(A, R, G, B));
        }
    }

    // return final image
    return bmOut;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T01:59:24.733

我建议使用 getPixels 和 setPixels 以便您可以直接操作数组。我没有运行这个，但它应该给你的想法：

```
int[] pixels = new int[width * height];
bmOut.getPixels(pixels, 0, width, 0, 0, width, height);
// scan through all pixels
for(int i = 0; i < width * height; i++) {
    // get pixel color
    // pixel = src.getPixel(x, y);
    pixel = pixels[i];
    A = Color.alpha(pixel);
    // apply filter contrast for every channel R, G, B
    R = Color.red(pixel);
    R = (int)(((((R / 255.0) - 0.5) * contrast) + 0.5) * 255.0);
    if(R < 0) { R = 0; }
    else if(R > 255) { R = 255; }

    G = Color.green(pixel);
    G = (int)(((((G / 255.0) - 0.5) * contrast) + 0.5) * 255.0);
    if(G < 0) { G = 0; }
    else if(G > 255) { G = 255; }

    B = Color.blue(pixel);
    B = (int)(((((B / 255.0) - 0.5) * contrast) + 0.5) * 255.0);
    if(B < 0) { B = 0; }
    else if(B > 255) { B = 255; }

    // set new pixel color to output bitmap
    pixels[i] = Color.argb(A, R, G, B);
}
bmOut.setPixels(pixels, 0, width, 0, 0, width, height); 
```

# sugarcrm - 安装错误——找不到类“日期时间”

> ID：11076126
> 
> 赞同：0
> 
> 时间：2012-06-18T01:39:35.323
> 
> 标签：sugarcrm

我在服务器上安装 SugarCRM 时遇到这个错误：</p>

> > 致命错误：在第 43 行的 /home/fuyinshidai/CRM/include/SugarDateTime.php 中找不到类 'DateTime'
> > 
> > 致命错误：在第 1353 行的 /home/fuyinshidai/CRM/include/TimeDate.php 中找不到类 'DateTime'

但是在本地安装期间并没有发生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T16:13:17.043

这是哪个版本和口味的糖？您使用的是哪个版本的 PHP？

Sugar 仅支持 5.2.1 及更高版本。

# java - 我可以制作一个数组列表，然后调用它以显示在列表视图中吗？

> ID：11076129
> 
> 赞同：-1
> 
> 时间：2012-06-18T01:39:59.040
> 
> 标签：java, android, arrays, list, view

我想为一个列出 46 个字符的格斗游戏制作一个简单的 Android 应用程序，当您按下名称时，它会拉出他们的攻击列表。我从事这个项目纯粹是为了学习经验，因为我对编码非常陌生。

有没有更简单的方法来制作对象和视图的列表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T01:52:50.500

对的，这是可能的。

*   您将需要创建对象的 ArrayList
*   创建一个自定义 ListAdapter：这将允许您确定要在列表中显示的对象的哪些属性

*   [检查此链接以获取有关如何自定义 ListView 的详细信息](http://www.vogella.com/articles/AndroidListView/article.html)

*   [另一个关于如何自定义 ListView 的教程](http://www.ezzylearning.com/tutorial.aspx?tid=1763429&q=customizing-android-listview-items-with-custom-arrayadapter)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T02:49:11.873

Ya offcourse,

U can use ArrayAdapter directly, or for Custom Adapter by extending Adapter interace, or BaseAdapter Class, or ArrayAdapter Class, SimpleCursorAdapter, etc..

eg: An ArrayAdapter

`ArrayList<String> arr = new ArrayList<String>();`

`arr.add("delhi");`

`arr.add("new-york");`

`arr.add("london");`

`ArrayAdapter<String> arrAdpt = new ArrayAdapter<String>(this,android.R.layout.simple_expandable_list_item_1, arr)`

then...

```
ListView list = (ListView)findViewById(R.id.myList);
list.setAdapter(arrAdpt); 
```

# java - 无法从 ListArray 中获取随机元素

> ID：11076130
> 
> 赞同：0
> 
> 时间：2012-06-18T01:40:08.383
> 
> 标签：java, android, arrays, debugging, random

尝试在按下按钮时从 ListArray 中获取随机字符串。总是得到相同的第二个元素。不管阵列有多大。

这是我按下的键：

```
int randIndex = getRandomIndex(ListArray.size());
String chosenItem = ListArray.get(randIndex); 
```

方法`getRandomIndex`是预先声明的，如下所示：

```
public int getRandomIndex(int size) {
        return (1+(int)Math.random()*size);
    }; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T01:42:39.537

从`int`to`double`的转换优先于乘以`size`。当您`Math.random()`转换为`int`时，小数点被丢弃，结果为`0`. 因此，`getRandomIndex`将永远返回`1`。

换句话说，

```
return (1 + (int) [some double variable] * size); 
```

是相同的

```
return 1 + (0)*size; 
```

这与

```
return 1; 
```

* * *

修复它：

```
private static final Random rand = new Random();

public int getRandomIndex(int size) {
    return rand.nextInt(size);
} 
```

这更具可读性并确保随机数的均匀分布。

# c - C：处理来自文件流的 fgetc 输入

> ID：11076136
> 
> 赞同：0
> 
> 时间：2012-06-18T01:41:03.097
> 
> 标签：c, fgetc

好的，我正在使用 C 语言编写拼写检查程序。我遇到的问题是将系统词典中的一个单词读入程序。我已经搜索了一个答案，但我找不到任何完全正确的东西，可能是因为这是一个非常基本的东西。这是我到目前为止的代码。

```
void readWord(FILE * stream, int buffer[]){
15   
16   while(fgetc(stream) != 10){
17     buffer[i] = fgetc(stream);              
18     printf("copying %d to buffer\n", buffer[i]);    //added for debugging
19   }
20   return;
21 } 
```

以下是函数调用中使用的变量以及调用

```
int buffer[WIZE];
readWord(dictionary, buffer, WSIZE); 
```

字典指向/usr/share/dict/words，并且有代码可以确保它正确打开，但我没有把它放在这个问题中；也许这毕竟是问题所在。这应该输出 Aarhus，但它会输出：

```
Dictionary opened successfully
copying 97 to buffer
copying 104 to buffer
copying 115 to buffer 
```

我想知道是否每次程序执行第 16 行文件位置都会更新到下一个字符？如果指针从第二个字符开始，则输出是 Aarhus 的每隔一个字母。

readWord 函数还用于从文本文件中读取单个单词进行检查，这就是我没有使用 getline 的原因。还有其他函数可以将缓冲区连同终端空字符一起刷新为字符串并显示。这只是处理一次从文件中获取一个单词的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T01:48:52.123

您应该使用 getline 从文件流中读取输入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T01:48:58.830

`97`是`a`, `104`for`h`等的字符代码。尝试使用 . 将它们打印为字符`%c`。

> 我想知道是否每次程序执行第 16 行文件位置都会更新到下一个字符？

在您的每次复制字符时，`readWord`您都需要更新缓冲区的索引（ ）。一旦你打了一个换行符，你`i`还需要空终止。不便携；检查换行符时使用。`buffer``10``\n`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T01:51:56.723

```
while(fgetc(stream) != 10){ 
```

在 while 条件下，您正在读取未保存到任何位置的字符。然后，您在正文中读取了另一个字符，因此每次迭代读取 2 个字符并仅保存一个字符。

此外，您将字符存储在缓冲区 [i] 中，但 i 没有增加。试试这个：

```
while((buffer[i] = fgetc(stream)) != 10){
     printf("copying %c to buffer\n", buffer[i]);    //added for debugging
     i++;
 } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-18T02:03:15.637

多亏了答案，它才能工作；这是修复

```
void readWord(FILE * stream, int buffer[]){
    unsigned short int i = 0;
    while((buffer[i] = fgetc(stream)) != '\n'){
            printf("copying %d to buffer\n", buffer[i]);
            i++;
    }
    return;
} 
```

- 和输出

```
Dictionary opened successfully
copying 65 to buffer
copying 97 to buffer
...
Dictionary word is Aarhus 
```

# python - 将字符串列表（csv）转换为浮点数列表

> ID：11076138
> 
> 赞同：0
> 
> 时间：2012-06-18T01:41:22.557
> 
> 标签：python, string, floating-point

我在将此字符串列表转换为浮点数列表时遇到了一些困难。我尝试了这两种方法，每种方法都返回不同的错误。

```
import csv
import math

unemp_reader = csv.reader(open('unemp.csv', 'rU'))
unemp_lines = list(unemp_reader)

for rows in unemp_lines:     #tried this way, but error tells me indices must be integers 
    i = 1
    for i in rows:
        a = map(float, unemp_lines[i])
        float_list.append(a)
    print float_list

for row in unemp_lines:  #tried this way but the list returned is empty
    y = row[1].split(",")[1:-1]
    float_list = [float(i) for i in y if i]
print float_list 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-18T01:45:01.973

您在第一个示例中的问题是`for`循环不提供索引，它提供列表中的值。这意味着您的示例根本没有任何意义。

第二个示例取行中的第二项，用逗号将其拆分（无论如何都应由`csv`模块处理），然后取结果列表的倒数第二项。正如我想象的那样，值中没有逗号，这将采用`[1:-1]`一个包含一个元素的列表，返回一个空列表。我无法真正理解这里的意图。然后，您也只存储最后一行的数据（`float_list`每次都覆盖）。您似乎对`csv`模块进行了二次猜测，并使其变得比实际困难得多。

您需要停止使其过于复杂：

```
with open('unemp.csv', 'rb') as data:
    rows = csv.reader(data)
    next(rows) #Skip the headers.
    floats = [[float(item) for number, item in enumerate(row) if item and (1 <= number <= 12)] for row in rows]

print(floats) 
```

解释一下，首先我们使用该`with`语句以可读和 Python 的方式打开文件（确保文件正确关闭，即使在异常情况下也是如此）。然后`csv.reader`我们从 CSV 文件中获取我们的数据。我们通过将迭代器前进一个来跳过标题，这意味着我们从第二行开始。然后，我们使用列表推导从迭代器中生成一个新列表，其中包含另一个列表推导，如果这些值存在且不在`Year`or`Annual`列中，则生成这些值的浮点数。为此，我们使用`enumerate()`内置函数获取我们所在列的编号，然后检查以确保它不是`0`( `Year`) 或`13`( `Annual`)。

正如 JFSebastian 在评论中指出的那样，最好的解决方案是允许`csv`模块为您处理数字，方法是将命名参数添加`quoting`到`csv.reader()`带有 value 的调用中`csv.QUOTE_NONNUMERIC`。例如：

```
with open('unemp.csv', 'rb') as data:
    rows = csv.reader(data, quoting=csv.QUOTE_NONNUMERIC)
    next(rows) #Skip the headers.
    floats = [[item for number, item in enumerate(row) if item and (1 <= number <= 12)] for row in rows]

print(floats) 
```

# python - Tkinter 的 IDE

> ID：11076141
> 
> 赞同：1
> 
> 时间：2012-06-18T01:42:04.547
> 
> 标签：python, tkinter

我正在为 Tkinter 寻找体面的 IDE 或表单设计器。到目前为止，我只遇到过我尝试过[的 Rapyd-Tk](http://www.bitflipper.ca/rapyd/)，但它非常过时并且有很多错误。

不幸的是，这就是我发现的全部，而其他提出这个问题的问题也相当老了，那么有没有最近的 Tkinter 工作设计师？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T01:58:51.883

这是一个。

[http://page.sourceforge.net/](http://page.sourceforge.net/) - 网站 [http://page.sourceforge.net/html/intro.html](http://page.sourceforge.net/html/intro.html) - 文档

在Linux上工作。还没有尝试过使用它进行任何类型的项目，我只是在发布之前确保它可以正常工作。请记住，tkinter 非常易于使用，因此您不会通过拖放节省太多时间。首先编写代码几乎更容易。

适用于 python2.6 和 3.x。除了 tkinter 之外还需要 ttk 包（包含在大多数 python 发行版中，我知道 windows 上的 python2.6 或 3.x 确实有它）。

# ruby-on-rails - Rails 的 wrap_parameters 不起作用

> ID：11076143
> 
> 赞同：3
> 
> 时间：2012-06-18T01:42:20.087
> 
> 标签：ruby-on-rails

我`wrap_parameters format: [:json]`在`wrap_parameters.rb`. 我用`jQuery.post('photos', {name: 'flower'});`. 在`photos#create`,`params`是

```
{"name"=>"flower", "controller"=>"photos", "action"=>"create"} 
```

但我期待

```
{"name"=>"flower", "controller"=>"photos", "action"=>"create", "photos"=>{"name"=>"flower"}} 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-18T05:44:56.520

调用将`jQuery.post('photos', {name: 'flower'});`参数发布为“标准”形式（application/x-www-form-urlencoded 或 multipart/form-data），而不是 json。所以`wrap_parameters format: [:json]`不起作用。

尝试删除`format: [:json]`或发布 json 数据，例如

```
$.ajax({
  url:'photos',
  type:"POST",
  data:JSON.stringify({name: 'flower'}),
  contentType:"application/json; charset=utf-8",
  dataType:"json",
  success: function(){
    ...
  }
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-03-31T21:16:23.520

您必须使用标题“Content-Type”：“application/json”来执行您的发布请求。

# asp-classic - <% 在 Basic 中用于什么？

> ID：11076147
> 
> 赞同：1
> 
> 时间：2012-06-18T01:43:36.743
> 
> 标签：asp-classic

我正在维护一些旧的 Visual Basic ASP 代码，我一直在看`<% ...code here... %>`，但我不明白它的用途。这似乎是某种阻止方法，但我不能确定，谷歌没有帮助，因为它是一个奇怪的搜索字符串。我意识到这是一个非常“基本”的问题，但任何快速的答案都会很棒。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-18T01:45:09.600

`<% %>`标签不是***[Visual Basic Sc​​ripting](http://en.wikipedia.org/wiki/VBScript)***的一部分，它们是 ASP 的一部分。

它们被称为[ASP 代码块](http://msdn.microsoft.com/en-us/library/ms524929.aspx)。

此外，您很可能使用与[BASIC](http://en.wikipedia.org/wiki/BASIC)不同的语言[VBScript](http://en.wikipedia.org/wiki/VBScript)。

# javascript - Soundcloud HTML5 API 不适用于 Facebook JS

> ID：11076148
> 
> 赞同：2
> 
> 时间：2012-06-18T01:43:37.290
> 
> 标签：javascript, facebook, api, soundcloud

我正在尝试设置位于此处的 SC html 5 api：

[http://w.soundcloud.com/player/api.js](http://w.soundcloud.com/player/api.js)

然而，它在 Firebug 中抛出“c is undefined”错误（7 次）。

经过一番挖掘，这些错误似乎只有在我像这样异步加载 Facebook JS 时才会出现：

```
(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=137624476258287";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk')); 
```

api.js 和 facebook.js 似乎都在使用函数包装器，但 FB 导致 soundcloud 出错。

* * *

我在下面添加了我的解决方案，这个错误可能不仅出现在 Facebook，而且出现在任何使用 HTML5 消息传递的应用程序中，所以这也是所有这些的一般修复。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-02T20:31:52.657

好吧，我决定深入挖掘，并找到了这个问题的解决方案（和原因）。

首先，我使用 jsbeutifier ( [http://jsbeautifier.org/](http://jsbeautifier.org/) ) 以更易读的格式获取代码。错误来自一个名为 D 的函数。该函数作为处理程序添加到 HTML5 消息侦听器：

```
 window.addEventListener ? window.addEventListener("message", parseMessage, !1) : window.attachEvent("onmessage", parseMessage); 
```

（我在这里将 D 重命名为 parseMessage ）

接下来，如果您查看 D (parseMessage) 函数，我们会看到代码尝试解析消息而不检查来源。

问题是，Facebook 也会向“消息”处理程序发送消息！如果您打印出所有消息，您可以看到这一点，所有错误实际上都是 SC api 试图解析 Facebook 消息！

解决方案是在解析消息之前检查来源（如 Opera HTML5 开发站点中所述：[http](http://dev.opera.com/articles/view/window-postmessage-messagechannel/) ://dev.opera.com/articles/view/window-postmessage-messagechannel/ ）

这是固定的“D”函数：

```
function D(a) {
        var b, c, d, e;

        if(a.origin == 'http://w.soundcloud.com'){
            try {
                c = JSON.parse(a.data)
            } catch (f) {
                console.log(f);
            }

            b = y(a.source);
            d = c.method;
            e = c.value;
            d === i.READY && (b ? (b.isReady = !0, C(b, k), v(k, b)) : m.push(a.source));
            if (!b || a.origin !== b.domain) return !1;
            var g = [];
            e !== undefined && g.push(e), C(b, d, g)
        }
    } 
```

或者整个 um-ninified 解决方案：http: [//jsfiddle.net/6uREk/1/](http://jsfiddle.net/6uREk/1/)

谢谢

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T17:57:02.250

找到了解决办法！

只需延迟加载soundcloud api asyc，不会出现错误..（奇怪的错误顺便说一句：/）

```
<script>
setTimeout(function(){

(function(d, s, id) {
var js, fjs = d.getElementsByTagName(s)[0];
if (d.getElementById(id)) return;
js = d.createElement(s); js.id = id;
js.src = "http://w.soundcloud.com/player/api.js";
fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'sc'));
},2000);

(function(d, s, id) {
var js, fjs = d.getElementsByTagName(s)[0];
if (d.getElementById(id)) return;
js = d.createElement(s); js.id = id;
js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=137624476258287";
fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));
</script> 
```

# asp.net - 从列表框更新网格视图

> ID：11076156
> 
> 赞同：1
> 
> 时间：2012-06-18T01:45:44.687
> 
> 标签：asp.net, xml, vb.net, webforms

我有一个这样的列表框，

```
<asp:ListBox ID="ListBox1" runat="server" Height="175px" Width="213px">
            <asp:ListItem Value="all">All</asp:ListItem>
            <asp:ListItem Value="programmer">Computer Programmer</asp:ListItem>
            <asp:ListItem Value="itss">Information Technologies Support Services</asp:ListItem>
            <asp:ListItem Value="analyst">Systems Analyst</asp:ListItem>
        </asp:ListBox> 
```

和这样的网格视图，

```
<asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False" 
            DataSourceID="XmlDataSource1">
            <Columns>
                <asp:BoundField DataField="name" HeaderText="Name" SortExpression="name" />
                <asp:BoundField DataField="program" HeaderText="Program" 
                    SortExpression="program" />
            </Columns>
        </asp:GridView>
        <asp:XmlDataSource ID="XmlDataSource1" runat="server" DataFile="~/XMLFile.xml" 
            TransformFile="~/XSLTFile.xslt"></asp:XmlDataSource> 
```

网格视图正在从 XML 和 XSLT 文件中获取值。我想要做的是，当用户从列表框中选择假设计算机程序员时，网格视图应该更新只有那些有这个程序的结果。我怎样才能做到这一点？我必须将 xml 与列表框绑定吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T02:20:32.593

您需要做的是`DataSource`根据`GridView`在`ListBox`.

当`ListBox1`'s selected index 更改时，触发事件并使用`AutoPostBack`属性和 Filter`XMLDataSource`取决于选择的值是什么。

```
Protected Sub ListBox1_SelectedIndexChanged(sender As Object, e As EventArgs) Handles ListBox1.SelectedIndexChanged
    Dim selected As String = ListBox1.SelectedValue
    FilterDataSource(selected)
End Sub

''' <summary>
''' Depending on the selected value passed in, filter the XMLDataSource
''' by the selected value
''' </summary>
''' <param name="selected">The value of the selected item in ListBox1</param>
''' <remarks></remarks>
Private Sub FilterDataSource(ByVal selected As String)
    ' Do whatever logic applies that will filter the XMLDataSource
    Select Case selected

        Case "all"

        Case "progammer"

        Case "itss"

        Case "analyst"

    End Select
End Sub 
```

# java - JFrame 图像，在其上绘制

> ID：11076161
> 
> 赞同：1
> 
> 时间：2012-06-18T01:47:36.773
> 
> 标签：java, image, swing, jframe, paintcomponent

我使用以下代码创建了一个带有图像的框架：

```
 JFrame f = new JFrame();
    try {
            f.setContentPane(new JLabel(new ImageIcon(ImageIO.read(new File("image.jpg")))));
    } 
    catch (IOException e) {
            e.printStackTrace();
    }
    f.pack();
    f.setVisible(true); 
```

效果很好，但现在我想在打开的框架中（在图像顶部）绘制一些东西。

我是 Java 新手，我已经尝试过创建一个扩展 JFrame 的类，其中包含一个 paint(Graphics g) 方法，但它不起作用，我只看到图像......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T03:46:12.723

嗯，有这么多教程，没有任何代码可以继续，很难说你不知道什么或做错了什么，看看：[Java更新小圈子](https://stackoverflow.com/questions/1999760/java-updating-small-circles)，[http ://www.roseindia.net/java/example /java/awt/how-to-create-circle-in-java.shtml](http://www.roseindia.net/java/example/java/awt/how-to-create-circle-in-java.shtml)和[http://oreilly.com/catalog/java2d/chapter/ch04.html](http://oreilly.com/catalog/java2d/chapter/ch04.html)记住不要绘制与图像背景相同的颜色，否则无论你多么努力，你都看不到任何东西；）

# c++ - WinSock send() 钩子导致访问冲突

> ID：11076162
> 
> 赞同：1
> 
> 时间：2012-06-18T01:47:36.960
> 
> 标签：c++, hook, winsock, inline-assembly

我想编写一个“中间人”程序来帮助我调试我正在开发的网络应用程序。经过一番谷歌搜索（我根本不知道该怎么做），我想到了我必须创建一个钩子（我以前用其他语言使用过钩子，但它们要简单得多）来拦截 WinSock 的`send`. 根据各种文章，我必须修改函数的前5个字节才能跳转到我的函数，做一些工作，然后跳转回来。我在网上找到[了这段代码](http://theundead.atspace.com/Blog/Cplusplusssendhook.txt)，我在控制台应用程序中重写了它。这是我想出的：

```
#include "stdafx.h"
#include <iostream>
#include <WinSock2.h>
#include <windows.h>

#pragma comment(lib, "ws2_32.lib")
#define JMP(frm, to) (int)(((int)to - (int)frm) - 5);

#define DEF_PORT 27015

using namespace std;

bool HookSend();
void UnhookSend();

DWORD SendOriginal          = 0;
DWORD SendReturn            = 0;
DWORD *SendHookFunc         = 0;
DWORD OldProtection         = 0;

char* send_buffer;
int send_sizeofdata         = 0;
SOCKET send_s;
int send_flags              = 0;

HINSTANCE hWinSock          = 0;

void __declspec(naked) __stdcall SendHook()
{
    __asm
    { 
        mov     edi,edi
        push    ebp
        mov     ebp, esp
        mov     eax, [ebp+0x08]         /* Param 1 : Socket */
        mov     send_s, eax
        mov     eax, [ebp+0x0C]         /* Param 2 : buffer */
        mov     [send_buffer], eax
        mov     eax, [ebp+0x10]         /*Param 3 : Size*/
        mov     send_sizeofdata, eax
        mov     eax, [ebp+0x14]         /*Param 4 : flags*/
        mov     send_flags, eax
        jmp     SendReturn
    }
}

int _tmain(int argc, _TCHAR* argv[])
{
    WSADATA wsaData;
    SOCKET soket;
    sockaddr_in soketDesc;

    char buf[256];

    cout << "Packet Reader by Timothy Volpe" << endl;
    cout << "Program will read packets sent" << endl << endl;

    cout << "Loading WinSock" << endl;
    if((hWinSock = LoadLibrary("ws2_32.dll")) == NULL)
    {
        cout << "Failed to load WinSock library" << endl;
        return -1;
    }

    cout << "Starting WinSock API" << endl;

    if(WSAStartup(MAKEWORD(2,2), &wsaData) != NO_ERROR)
    {
        cout << "Failed to load WinSock API (Error:" << WSAGetLastError() << ")" << endl;
        cout << "Press enter to exit" << endl;
        cin.get();
        return -1;
    }

    cout << "Hooking send()" << endl;
    if(!HookSend())
    {
        cout << "Press enter to exit" << endl;
        cin.get();
        return -1;
    }
    cout << "Hooked successfully!" << endl;

    cout << "Creating socket" << endl;
    soket = socket(AF_INET, SOCK_STREAM, IPPROTO_TCP);
    if(soket == INVALID_SOCKET)
    {
        cout << "Failed to create socket (Error:" << WSAGetLastError() << ")" << endl;
        UnhookSend();
        cout << "Press enter to exit" << endl;
        cin.get();
        return -1;
    }

    cout << "Connecting socket to port " << DEF_PORT << endl;
    soketDesc.sin_family        = AF_INET;
    soketDesc.sin_addr.s_addr   = inet_addr("127.0.0.1");
    soketDesc.sin_port          = htons(DEF_PORT);
    if(connect(soket, (SOCKADDR*)&soketDesc, sizeof(soketDesc)) == SOCKET_ERROR)
    {
        cout << "Failed to connect socket (Error:" << WSAGetLastError() << ")" << endl;
        UnhookSend();
        cout << "Press enter to exit" << endl;
        cin.get();
        return -1;
    }

    cout << "Enter some data to send (MAX 256):" << endl;
    cin.get(buf, 256); //Read 256 chars
    cout << "Sending \"" << buf << "\"" << endl;

    //Send the data
    send(soket, buf, (int)sizeof(buf), 0);

    //Close
    closesocket(soket);
    WSACleanup();

    UnhookSend();

    cout << endl << "Press enter to exit" << endl;
    cin.clear();
    cin.ignore();
    cin.get();

    return 0;
}

bool HookSend()
{
    //Get the new function's address
    SendHookFunc = (DWORD*)SendHook;
    //Get the send() function's address
    SendOriginal = (DWORD)GetProcAddress(hWinSock, "send");
    //Get the return address, which is 5 bytes past the start
    SendReturn = SendOriginal + 5;
    printf("SEND\tStart: %x\t Return: %x\n", SendOriginal, SendReturn);
    //Change protection for the first 5 bytes
    VirtualProtect((void*)SendOriginal, 0x05, PAGE_READWRITE, &OldProtection);
    *(BYTE*)(SendOriginal) = 0xe9;
    *(int*)(SendOriginal+1) = JMP(SendOriginal, SendHookFunc);

    return true;
}

void UnhookSend()
{
    cout << "Unhooking..." << endl;
    //Restore the old stuff
    *(WORD*)SendOriginal = 0xFF8B;
    *(BYTE*)(SendOriginal+1) = 0x55;
    *(WORD*)(SendOriginal+3) = 0xEC8B;
    //Restore protection
    VirtualProtect((void*)SendOriginal, 0x05, OldProtection, &OldProtection);
} 
```

但是，它不起作用，因为我在`socket()`. `HookSend`如果我删除对and的调用`UnhookSend`，它运行良好。如果我改变调用的顺序（例如放在`WSAStartup`after `HookSend`），它会在第一个 WinSock 函数上崩溃。所以我想我喜欢破坏整个图书馆什么的，我真的不太确定。老实说，我今天刚学了汇编（嗯，Visual Studio 的版本）。这很容易掌握，我相信我理解这段代码中的程序集。我的代码与网络上的代码几乎相同，所以我不知道出了什么问题。我想知道这是操作系统冲突，还是项目设置问题，还是完全不同的事情。

我在这里不知所措，所以任何指向正确方向的指针都会很棒！另外，如果我完全错了（比如有更好的方法），请随时告诉我。而且我确实知道[Microsoft 的 Detours](http://research.microsoft.com/en-us/projects/detours/)，但我宁愿不将它用于这么简单的事情（而且我也不喜欢在我脑海中挥之不去的非商业用途许可证的想法，即使这可能永远不会被释放）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T02:40:45.907

It is rarely necessary to debug the actual API calls themselves in such a brute-force manner. You could just use a packet sniffer like Wireshark to capture and analyze the network traffic that is being transmitted. But if you must debug the API calls, you are essentially trying to manually implement a Detour, so you really should use Microsoft's Detours library to implement a real Detour correctly. A better option is to use WinSock's built-in debugging functionality and not hook the API functions at all. Let the OS handle the hooking and logging of calls and parameters for you.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T01:59:49.247

您没有检查对 VirtualProtect 的调用的返回值；我的猜测是它没有成功，你可能没有必要的权利。您是否以“管理员”身份运行此代码并且您是否禁用了 Windows UAC 的东西？

更新您的代码以检查 VirtualProtect 的返回值，并让我们知道这是否揭示了任何内容。

# php - 使用 PHP 截断 Wordpress 帖子的发布日期

> ID：11076163
> 
> 赞同：1
> 
> 时间：2012-06-18T01:47:37.133
> 
> 标签：php, string, wordpress, date

我正在尝试操纵 Wordpress 的 the_date() 函数的输出。

我的代码：

```
<?php
define('WP_USE_THEMES', false);
require('/gnews/wp-blog-header.php');
if (have_posts()) : while (have_posts()) : the_post(); 

$potatoes = the_date();
$themonth = substr($potatoes,3);
echo($themonth);

endwhile; else: 
endif;  
?> 
```

请原谅奇怪的变量名，到此为止。

无论我尝试什么，上面的内容都只会输出 2011 年 6 月 17 日。

我想要的最终结果是设置它，以便我在一个变量中有一个三字符的月份名称，在另一个变量中有一个两位数的日期数字，在第三个变量中有年份。然而，日期必须是 Wordpress 帖子的日期。

我该怎么做？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T01:53:44.637

如果您希望这些在 3 个变量中，请将输出传递`the_date()`到`strtotime()`，`date('Y-M-d)`然后`explode()`将其传递到单独的变量中。[`strtotime()`](http://www.php.net/manual/en/function.strtotime.php)完全有能力解析像`June 17th 2011`.

```
// Get it in YYYY-Mon-dd
$date = date('Y-M-d', strtotime(the_date());
list($year, $month, $day) = explode("-", $date); 
```

### 更新

[Wordpress'`the_date()`](http://codex.wordpress.org/Function_Reference/the_date)的第四个参数是一个布尔值，它指定是返回还是回显它。`strtotime()`如果这样做，则无需使用：

```
// Call the_date() with its format and FALSE to echo
$date = the_date('Y-M-d', '', '', FALSE);
list($year, $month, $day) = explode("-", $date); 
```

# javascript - jQuery 问题中的“下拉”菜单

> ID：11076164
> 
> 赞同：0
> 
> 时间：2012-06-18T01:48:26.133
> 
> 标签：javascript, jquery, html, css, menu

好的，我真的需要一些帮助。我是新的设计和东西，但我是一个很好的学习者。无论如何，我正在尝试建立这个网站，我需要在页面中间创建一个菜单。就像，有一个标志，当你翻过它时，菜单会滑到它上面，而不是像普通菜单那样滑到下面。脚本做得很好，我正在使用 jQuery 和所有，当你翻滚时菜单会上升，但问题是，当菜单向上滑动时，标志会下降。就像，我希望标志保持固定，只有菜单上去。我不知道我做错了什么，但这让我头疼......是的，我知道，我是新手，但我刚刚开始学习这些东西......

这是脚本：

```
 <script type="text/javascript">
      $(document).ready(function(){

$(".btn-slide").mouseenter(function(){
$("#panel").slideToggle("slow");
$(this).toggleClass("active"); return false;
});

});
      </script> 
```

这是CSS：

```
 #panel {
background: #fff;
height: 150px;
display: none;
      }
      .slide {
margin: 0;
padding: 0;
background: url(img/menu/main.jpg) no-repeat center top;
      }
      .btn-slide {
background: url(img/menu/main.jpg) no-repeat right;
text-align: center;
width: 150px;
height: 58px;
padding: 0px 0px 0 0;
margin: 0 auto;
display: block;
color: #fff;
text-decoration: none;
      }
      .active {
      background-image:url(img/menu/main.jpg);
      } 
```

我不会发布 html，因为你们可以在网站上看到源代码。

PS。我在表格单元格中使用了 DIV ...如果有人可以帮助我...

这是菜单：

[http://www.avuzedesigns.com/estiloearte/](http://www.avuzedesigns.com/estiloearte/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T02:04:28.523

```
#panel {
    background: none repeat scroll 0 0 #FFFFFF;
    display: none;
    height: 150px;

    margin-top: -150px; 
    position: relative; 
} 
```

# java - Java JFrame 绘画

> ID：11076168
> 
> 赞同：1
> 
> 时间：2012-06-18T01:49:08.487
> 
> 标签：java, image, swing, jframe, paint

我以前遇到过这个问题，但我不记得我是如何解决的。我正在研究 RAT，到目前为止它只是将客户端屏幕发送到服务器。我曾经将图像保存到磁盘，但现在我试图让它只显示在 JFrame 上。它显示第一个屏幕截图，但仅显示第一个屏幕截图，它不会绘制新的屏幕截图。

服务器：

```
import java.awt.Graphics;
import java.awt.image.BufferedImage;
import java.io.IOException;
import java.io.ObjectInputStream;
import java.net.ServerSocket;
import java.net.Socket;

import javax.imageio.ImageIO;
import javax.swing.JFrame;

@SuppressWarnings("serial")
public class Server extends JFrame {

private BufferedImage image;
private BufferedImage oldImage;

public Server() {
    setTitle("RAT");
    setResizable(false);
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
}

public static void main(String[] args) throws IOException {
    try {
        Server server = new Server();

        ServerSocket serverSocket = new ServerSocket(25565);
        Socket clientSocket = serverSocket.accept();
        System.out.println("Connection accepted!");

        ObjectInputStream in = new ObjectInputStream(clientSocket.getInputStream());
        boolean firstConnection = true;

        int width = 0;
        int height = 0;

        while (true) {
            if(firstConnection) {
                width = in.readShort();
                height = in.readShort();
                server.setSize(width, height);
                server.setVisible(true);
                firstConnection = false;
            }
            server.oldImage = ImageIO.read(in);
            if(server.oldImage != null) {
                server.image = server.oldImage;
            }
            server.repaint();

        }
    } catch (IOException e) {
        System.err.println("Accept failed.");
        System.exit(1);
    }
}

public void paint(Graphics g) {
    g.drawImage(image, 0, 0, this);
}
} 
```

客户：

```
import java.awt.AWTException;
import java.awt.Rectangle;
import java.awt.Robot;
import java.awt.Toolkit;
import java.io.IOException;
import java.io.ObjectOutputStream;
import java.net.Socket;

import javax.imageio.ImageIO;

public class Client {

public static void main(String[] args) {
    try {
        Socket socket = new Socket("127.0.0.1", 25565);
        ObjectOutputStream out = new ObjectOutputStream(socket.getOutputStream());
        Robot robot = new Robot();
        Toolkit toolkit = Toolkit.getDefaultToolkit();
        Rectangle rectangle = new Rectangle(toolkit.getScreenSize());
        out.writeShort(toolkit.getScreenSize().width);
        out.writeShort(toolkit.getScreenSize().height);

        while(true) {
            ImageIO.write(robot.createScreenCapture(rectangle), "jpg", out);
            Thread.sleep(200);
        }
    } catch (AWTException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    } catch (InterruptedException e) {
        e.printStackTrace();
    }
}
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T03:50:11.900

据我理解的问题，这是你阻塞事件调度线程的问题，通过编写类似`Thread.sleep()`or的东西`while(true)`，从 Swing 的角度来看，这确实不适合。

你可以做些什么来解决这个问题：

*   [在SwingWorker](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/worker.html)中引入循环结构。
*   直接使用像 Socket 这样的代码片段`clientSocket = serverSocket.accept();`会阻止 EDT，因此这些事情必须在单独的`Thread`或内部完成`SwingWorker`。
*   递归调用`repaint()`得到合并来自肮脏富客户的报价如下，以证明上述主题的合理性

* * *

```
It is important to note that repaint requests get “coalesced,” or combined. 
So, for example, if you request a repaint and there is already one on the 
queue that has not yet been serviced, then the second request is ignored 
because your request for a repaint will already be fulﬁlled by the earlier 
request. This behavior is particularly helpful in situations where many
repaint requests are being generated, perhaps by very different situations 
and components, and Swing should avoid processing redundant requests and 
wasting effort. 
```

* * *

*   与其直接在 [您](http://docs.oracle.com/javase/7/docs/api/javax/swing/JComponent.html#paintComponent%28java.awt.Graphics%29)`JFrame`的.`JPanel/JComponent`
*   递归 Paint 调用可以通过使用 [paintImmediately(Rectangle rect)](http://docs.oracle.com/javase/7/docs/api/javax/swing/JComponent.html#paintImmediately%28java.awt.Rectangle%29)或[paintImmediately(int x, int y, int w, int h)](http://docs.oracle.com/javase/7/docs/api/javax/swing/JComponent.html#paintImmediately%28int,%20int,%20int,%20int%29)方法来实现。

这是一个示例程序，可提供进一步帮助：

```
import java.awt.*;
import java.awt.event.*;
import java.awt.image.BufferedImage;
import javax.swing.*;

public class PointsExample
{   
    private CustomPanel contentPane;
    private Timer timer;
    private int x = 1;
    private int y = 1;

    /*
     * This is just JFrame, that we be 
     * using as the Base for our Application.
     * Though here we are calling our
     * JPanel (CustomPanel), whose
     * paintComponent(...) method, we had
     * override.
     */
    private void createAndDisplayGUI()
    {
        JFrame frame = new JFrame("Locate Mouse Position");
        frame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);

        contentPane = new CustomPanel();
        frame.setContentPane(contentPane);  
        frame.pack();
        frame.setLocationByPlatform(true);
        frame.setVisible(true);

        for (int i = 0; i < 500; i++)
        {
            contentPane.set(x, y);
            x++;
            y++;
            if (x == 450)
                break;
        }
    }

    public static void main(String\u005B\u005D args)
    {
        SwingUtilities.invokeLater(new Runnable()
        {
            public void run()
            {
                new PointsExample().createAndDisplayGUI();
            }
        });
    }
}

class CustomPanel extends JComponent
{
    private int x;
    private int y;

    public void set(int a, int b)
    {
        x = a;
        y = b;
        paintImmediately(0, 0, getWidth(), getHeight());

    }   

    @Override
    public Dimension getPreferredSize()
    {
        return (new Dimension(500, 500));
    }

    @Override
    public void paintComponent(Graphics g)
    { 
        super.paintComponent(g);
        g.clearRect(0, 0, getWidth(), getHeight());
        g.fillOval(x, y, 4, 4);                        
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T02:22:16.677

看起来对 paint() 的初始调用发生在`image == null`. 这可能不是唯一的问题，但必须解决。

# python - 如何在 Finder 中创建“右键单击选项”？（苹果电脑）

> ID：11076172
> 
> 赞同：1
> 
> 时间：2012-06-18T01:50:39.593
> 
> 标签：python, macos, option, right-click, finder

MAC 好的，我什至不确定你是否可以这样做，但如果可以，这里是：如何在 finder 中创建一个右键单击选项，对所选文件执行某些操作？当您选择一张照片并右键单击时，它会显示打开、打开方式、移至垃圾箱等。我想为自己制作一张。我怎么能用主要的python来做到这一点？再说一次，我在 Mac 上！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T01:54:28.563

使用[Automator](http://support.apple.com/kb/HT2488?viewlocale=en_US&locale=en_US)并编写上下文菜单[服务](http://www.macosxautomation.com/services/learn/)。然后，您可以使用 Python、Perl、Bash（等）与该文件编写的脚本来响应在 Finder 中的右键单击。

# jquery - 处理完整的日历事件对象

> ID：11076173
> 
> 赞同：0
> 
> 时间：2012-06-18T01:51:06.713
> 
> 标签：jquery, events, object, fullcalendar

想知道我是如何创建一个对象并用信息填充他的，这样我就可以将他添加到完整的日历 jquery 插件中。到目前为止，我做了类似的事情：

```
 var eventsArray = [];
            var newEvent = new Object();

            newEvent[title] = "some text";
            newEvent[start] = d1;        //got date string here exactly similar to the calendar's
            eventsArray.push(newEvent);

             var formattedEventData = [] ;
            for (var k = 0; k < eventsArray.length; k ++) {
                formattedEventData.push({

                    title: eventsArray[k][0],
                    start: eventsArray[k][1]
                });
            }

             $('#calendar').fullCalendar({
                  eventsource: formattedEventData,
                  events: formattedEventData,
                    color: 'yellow',
                    textColor: 'black'
            });
              $('#calendar').fullCalendar('addEventSource',formattedEventData);
              $('#calendar').fullCalendar('rerenderEvents'); 
```

我忘了说......一切都很好，没有崩溃......但日历中没有什么新鲜事。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T13:31:34.767

I corrected your code from above. Take a look at this:

```
var eventsArray = [];
var newEvent = [];

newEvent[0] = "some text";
newEvent[1] = new Date(y, m, d); //got date string here exactly similar to the calendar's
eventsArray.push(newEvent);

var formattedEventData = [];
for (var k = 0; k < eventsArray.length; k++) {
    formattedEventData.push({
        title: eventsArray[k][0],
        start: eventsArray[k][1]
    });
}

$('#calendar').fullCalendar({
    //eventsource: formattedEventData,
    events: formattedEventData,
    color: 'yellow',
    textColor: 'black'
});
//$('#calendar').fullCalendar('addEventSource', formattedEventData);
//$('#calendar').fullCalendar('rerenderEvents'); 
```

Few points to note here:

1.  If you want the newEvent to be an object, use this to create it: var newEvent = {title:"some text", start:new Date(y, m, d)};
2.  You can't initialize an array as newEvent[title]. Arrays are integer index based.
3.  `eventSources` and `events` can't be used together. If you have multiple event sources, then you need to include the `events` array *inside* your `eventSources`:

    eventSources: [ { events: [ { ... } ] } ]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T21:45:43.110

看到这个： [http ://arshaw.com/fullcalendar/docs/event_rendering/renderEvent/](http://arshaw.com/fullcalendar/docs/event_rendering/renderEvent/)

你可以像这样使用它：

```
var newEvent = new Object();

newEvent.title = "some text";
newEvent.start = new Date();
newEvent.allDay = false;
$('#calendar').fullCalendar( 'renderEvent', newEvent ); 
```

请注意，当您分配值时[开始](http://arshaw.com/fullcalendar/docs/event_data/Event_Object/)，它需要采用受支持的格式之一。

您可以指定 IETF 格式的字符串（例如：“Wed, 18 Oct 2009 13:00:00 EST”）、ISO8601 格式的字符串（例如：“2009-11-05T13:15:30Z”）或 UNIX 时间戳.

希望这可以帮助。谢谢

# php - 确保在调用js函数之前加载了div

> ID：11076177
> 
> 赞同：1
> 
> 时间：2012-06-18T01:52:06.800
> 
> 标签：php, javascript, jquery, html

编辑：我使用 ajax 在我的内容中加载文本，这就是为什么 onload on head 不适用。

我在这里有一个几乎完整的项目 [http://sandbox.littlegraffyx.com/bible/test2.html](http://sandbox.littlegraffyx.com/bible/test2.html)（在左下角输入 gen 1:1 开始）

我唯一的问题是确保在我调用将自动调整窗口上的文本内容的函数之前，显示主要文本的主 div 已完全加载。

有时我的自动调整功能正在工作，有时却没有，我能想到它为什么不工作的唯一原因可能是当我调用该函数时 div 还没有完全加载。

```
echo "<div id=\"verse\">" . $bcontent . "</div>";

echo "<script type='text/javascript'>
    scaleQuote();";
echo "</script>"; 
```

scalequote 样本可在我的其他问题中找到

[根据高度（垂直长度）调整尺寸](https://stackoverflow.com/questions/11060866/adjust-size-based-on-height-vertical-length)

这是我进行的搜索，我看不出如何在我的情况下应用这些帖子中提供的解决方案，这就是我自己问的原因。希望我不会因为“缺乏研究”而被否决

[仅在加载 div 时如何运行函数？](https://stackoverflow.com/questions/6242619/how-do-i-run-a-function-only-when-a-div-gets-loaded)

[使用jquery从外部源加载信息后获取div的高度和宽度](https://stackoverflow.com/questions/9410393/getting-the-height-and-width-of-a-div-after-loading-info-into-it-from-an-externa)

提前感谢，对不起我的英语

文件参考

[http://pastebin.com/wwQumwKJ](http://pastebin.com/wwQumwKJ) - 我的 JS 文件

[http://pastebin.com/FnyST8iz](http://pastebin.com/FnyST8iz) - 我的 html 文件

[http://pastebin.com/BYfSUjQJ](http://pastebin.com/BYfSUjQJ) - 我的 css 文件

除了获取数据库内容外，我的 php 文件几乎就是上面发布的内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T02:00:18.357

**完全重新编辑答案。** 由于 JQuery 库已经存在于您的页面中，因此这一点毫无用处：

```
/* Function to get Requested Verse */
function showVerse(str)
{
if (str=="")
  {
  document.getElementById("versePlace").innerHTML="";
... etc etc.
xmlhttp.open("GET","getverse.php?q="+str,true);
xmlhttp.send();
} 
```

只需将其替换为

```
function showVerse(str)
{
    $("#versePlace").html("");
    $('#versePlace').load('getverse.php?q='+str, function() {
        scaleQuote();
    });
} 
```

因此，我们正在`scaleQuote()`使用回调函数。

*   原因：`scaleQuote()`现在在原始HTML页面中调用了该函数，您的第一个问题是如果您在AJAX结果中输出脚本，它将不会被执行！

*   第二个主要问题是仅在 AJAX 请求完成后调用 scaleQuote() 函数。AJAX中的“A”表示“异步”，大致意思是调用者不管请求是否完成都继续执行。

所以我们必须确保`scaleQuote()`在 AJAX 请求响应完成后调用。

JQuery 的`.load()`函数调用 AJAX 页面并将结果放入括号中的元素 ( `$("#versePlace")`，其中 # 代表“id”)。您通过带有对象的 GET 方法传递数据`{q: str}`，然后定义一个*回调函数*，该函数*保证*仅在 Ajax 的请求-响应事件完成后运行。

使用 JQuery 可以减少很多其他功能：

```
/* Function to get Next Verse */
function MoveNext()
{
   var str = parseInt($("#txtCurrent").val()) + 1;
   if (str!="")
   {
       $("#versePlace").html("");
       $('#versePlace').load('move.php?q='+str, function() {
           scaleQuote();
       });
   }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T02:43:45.677

**简短的回答**

在您的`MovePrevious()`函数中，`scaleQuote();`在 Ajax 的回调中添加：

```
document.getElementById("versePlace").innerHTML=xmlhttp.responseText;
scaleQuote(); //<-- here 
```

**长答案**

您在 Ajax 调用中使用标准 JS。像您这样的标准 Ajax 调用，它只是将响应`HTML`放置在一个元素中**，而不**`innerHTML`执行响应文本中的任何脚本标记。它与 jQuery 的/方法不同，后者解析响应文本中的任何标签并在添加到 DOM 时执行它。**[`append`](http://api.jquery.com/append/)[`appendTo`](http://api.jquery.com/appendTo/)`script`**

 ***为什么它“大部分时间”都有效呢？*

因为您的函数在其回调中`MoveNext()`已经有一个函数调用。`scaleQuote();`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T02:01:13.083

您可以做的一件事是将函数放在`<head>`标签中，然后将该 js 函数添加到`onload`div 的属性中。例如

```
<body onload="scaleQuote()"> 
```**

# git - git有没有办法为reviewboard创建补丁？

> ID：11076178
> 
> 赞同：6
> 
> 时间：2012-06-18T01:52:07.253
> 
> 标签：git, review-board

我目前正在使用以下命令：

```
git diff --no-prefix -w trunk > my_beautiful_code.patch 
```

但是当我在评论板中上传差异时出现以下错误：

```
No valid separator after the filename was found in the diff header 
```

有没有办法让 git 做正确的事情？我相信，reviewboard 正在寻找确切的 svn 格式。我可以克隆 svn repo，应用补丁，然后用 svn 制作补丁，但这很乏味，我想要一个更干净的工作流程......

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-19T13:17:46.977

这不是一个真正的答案，但部分解释了问题。

这是由意外的（从 RB 服务器的角度）差异语法引起的。您缺少一些通常存在于颠覆 RB 差异中的额外信息。

请参阅此错误以获取解决方法：

[https://hellosplat.com/s/beanbag/tickets/1918/](https://hellosplat.com/s/beanbag/tickets/1918/)

错误描述建议您可以切换到 git-svn，或者您可以编写一个简单的查找/替换脚本，以便在上传到 RB 之前为您准备和修复差异。

# node.js - Node.js + Express：路由与控制器

> ID：11076179
> 
> 赞同：106
> 
> 时间：2012-06-18T01:52:14.367
> 
> 标签：node.js, express

Node.js 和 Express 的新手，我试图理解这两个似乎重叠的概念，路由与控制器。

我见过简单的例子 app.js + routes/*，这似乎足以路由所需的各种请求。

但是，我也看到人们在谈论使用控制器，其中一些暗示了更正式的 MVC 模型 (???)。

如果有人能帮我解开这个谜团，并且如果你有一个在 Node.js + Express 框架中设置控制器的好例子，那就太好了！

谢谢，

* * *

## 回答 #1

> 赞同：137
> 
> 时间：2012-06-18T04:44:01.490

关于 Express（和一般的 Node）的一个很酷的事情是它不会向你推送很多意见。缺点之一是它不会对您提出任何意见。因此，您可以自由（并且被要求！）自行设置任何此类意见（模式）。

在 Express 的情况下，您绝对可以使用 MVC 模式，如果您愿意，路由处理程序当然可以充当控制器的角色——但您必须以这种方式进行设置。[在Express 示例文件夹](https://github.com/visionmedia/express/tree/master/examples)中可以找到一个很好的示例，名为[`mvc`](https://github.com/visionmedia/express/tree/master/examples/mvc). 如果您查看[`lib/boot.js`](https://github.com/visionmedia/express/blob/master/examples/mvc/lib/boot.js)，您可以看到他们如何设置示例以要求`controllers`目录中的每个文件，并根据在控制器上创建的方法的名称动态生成 Express 路由。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-08-19T17:40:49.403

您可以只拥有一个路由文件夹或两者兼有。例如，一些设置路由/路径（例如 /user/:id）并将它们连接到 Get、Post、Put/Update、Delete 等，然后在路由文件夹中：

```
const subController = require('./../controllers/subController');

Router.use('/subs/:id');

Router
 .route('subs/:id')
 .get(subController.getSub)
 .patch(subController.updateSub); 
```

然后，在控制器文件夹中：

```
exports.getSub = (req, res, next) => {
  req.params.id = req.users.id;
}; 
```

只是为了做点什么。我已经完成了没有控制器文件夹的项目，并将所有逻辑放在一个地方。

# iphone - UITableView SDK 添加数组

> ID：11076181
> 
> 赞同：-1
> 
> 时间：2012-06-18T01:52:40.097
> 
> 标签：iphone, ios, xcode, uitableview

我正在尝试做的是一个应用程序，它可以让你在一个字段中输入一个任务，按插入并在它下面的表格中查看它。我有我的表格 ( `*table`)、我的字段 ( `*taskField`)、我的按钮 ( `*insert`) 和我的数组 ( `*tasks`)。我运行应用程序，输入内容并按插入，但表格中没有显示任何内容。我也相信我所有的“IB”东西都设置好了。

这是我的代码：

```
NSString *docPath()
{
NSArray *pathList = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,
                                                        NSUserDomainMask,
                                                        YES);
return [[pathList objectAtIndex:0] stringByAppendingPathComponent:@"data.td" ];
}

#import "CookViewController.h"

@interface CookViewController ()

@end

@implementation CookViewController

- (void)viewDidLoad
{
[super viewDidLoad];
// Do any additional setup after loading the view, typically from a nib.
}

- (void)viewDidUnload
{
[super viewDidUnload];
// Release any retained subviews of the main view.
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
}

- (IBAction)addRec:(id)sender
{

NSString *t=[taskField text];

if ([t isEqualToString:@""]) {
    return;
}

[tasks addObject:t];
[table reloadData];
[taskField setText:@""];
[taskField resignFirstResponder];
[tasks writeToFile:docPath()
        atomically:YES];
}

- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath
{ 
if (editingStyle == UITableViewCellEditingStyleDelete) { 
    [tasks removeObjectAtIndex:indexPath.row]; [tableView deleteRowsAtIndexPaths:[NSArray     arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade]; } 

}

#pragma mark - Table View management

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
return [tasks count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath

{

UITableViewCell *c= [table dequeueReusableCellWithIdentifier:@"Cell"];

if (!c) {
    c= [[ UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"Cell"];
}

NSString *item = [tasks objectAtIndex:[indexPath row]];
[[c textLabel] setText:item];

return c;

} 

@end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T03:44:35.780

IB 清单：

右键单击表格视图并查看代表和参考出口：

1.  `datasource`指向你的`ViewController`
2.  `delegate`指向你的`ViewController`
3.  引用出口已正确定义，并且`ViewController`标题中的变量旁边有一个黑色的小 O 以显示出口。

要设置`datasource`and `delegate`，请按 CTRL 按钮并将其拖动到您的 ViewController。

您的 ViewController 在 ViewController 的头文件中有 UITableViewDataSource 和 UITableViewDelegate ：

`@interface ViewController:UIViewController<UITableViewDataSource, UITableViewDelegate>`

注意：ViewController 在您的情况下是指 CookViewController。

编辑：更改此功能：

```
- (void)viewDidLoad {
  [super viewDidLoad];
  // Do any additional setup after loading the view, typically from a nib.
  table.delegate = self;
  table.dataSource = self;
} 
```

--V

# php - Processmaker getField javascript错误

> ID：11076184
> 
> 赞同：0
> 
> 时间：2012-06-18T01:53:17.297
> 
> 标签：php, javascript

我在创建流程制造商 dynaform 时遇到问题，其中在任务 1 中，表单上传文档，在表单 2 中我希望能够下载该文档的链接（这是为了我工作的公司的测试目的）。

我的问题是，按照流程制造商网站[链接到在 Dnyaforms 中输入文档的文档，](http://wiki.processmaker.com/index.php/Input_Documents#Links_to_Input_Documents_in_DynaForms)它不起作用。

在触发器上启用调试模式，URL 正常，所有被引用的 ID 都很好，我能找到的唯一问题是 getField 函数返回 null，它应该返回一个对象，我可以在其中调用它的 .value 属性.

以前有人遇到过这个问题吗？还是我只是在做一些愚蠢的事情？

触发代码：

```
$caseId = @@APPLICATION;
$query = "SELECT C.CON_ID, C.CON_VALUE FROM APP_DOCUMENT AD, CONTENT C
   WHERE AD.APP_UID='$caseId' AND AD.APP_DOC_TYPE='INPUT' AND AD.APP_DOC_STATUS='ACTIVE'
   AND AD.APP_DOC_UID=C.CON_ID AND C.CON_CATEGORY='APP_DOC_FILENAME' AND C.CON_VALUE<>''";
$result = executeQuery($query);
if (is_array($result) and count($result) > 0) {
   $caseDocId = $result[1]['CON_ID'];
   @@inputFileURL = 'http://' . $_SERVER['HTTP_HOST'] . '/sys' . @@SYS_SYS . '/' . 
      @@SYS_LANG . '/' . @@SYS_SKIN . '/cases/cases_ShowDocument?a=' . $caseDocId;
   @@inputFilename = $result[1]['CON_VALUE'];
} 
```

Javascript代码：

```
window.onload = function() 
  { 
    getField("lnkTimesheet").href = getField("inputFileURL").value; 
  }; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T04:39:53.770

事实证明，我已经正确阅读了[process maker wiki](http://wiki.processmaker.com/index.php/Input_Documents#Links_to_Input_Documents_in_DynaForms)上的文档。

答案是创建一个与 php 变量同名的隐藏字段，因此它可以将变量加载到隐藏字段中，javascript 将从隐藏字段中获取值并将其放入链接的 href 中。

据我所知，php 变量只能加载到输入元素中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T14:15:48.983

Well, I've just added an example on our ProcessMaker Documentation which involves the creation of a dynaform with the possibility to insert a direct link to open/download an Input Document in a Dynaform, it includes an example, you can check the example [here](http://wiki.processmaker.com/index.php/2.0/Input_Documents#Links_to_multiple_Input_Document_files_in_DynaForms)

Regards.

Liliana

[processmaker](/questions/tagged/processmaker "show questions tagged 'processmaker'")

# wolfram-mathematica - 数学输入

> ID：11076185
> 
> 赞同：0
> 
> 时间：2012-06-18T01:53:20.280
> 
> 标签：wolfram-mathematica

我刚刚安装了mathematica 8，我无法输入mathematica 编程语言。自由形式语言模式之所以有效，是因为它连接到 wolfram 服务器，但如果尝试绘制一些简单的东西，例如：

```
Plot[Sin[x], {x, 0, 6Pi}] 
```

按 Shift-Enter，我收到消息：

```
MakeExpression::boxfmt: InputForm in MakeExpression[FormBox[RowBox[{Plot,
[,RowBox[{RowBox[{<<4>>}],,,RowBox[{<<3>>}]}],]}],InputForm],InputForm] is 
not a box formatting type. A box formatting type is any member of $BoxForms. >> 
```

但是，如果我只是转到 Plot 的文档，将文档中的相同函数复制并粘贴到我的笔记本中，然后按 shift-enter，绘图就会显示出来。

我只是按照动手教程进行操作并遇到了这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T00:24:34.440

请尝试按照适用于您平台的故障排除教程中的说明清除缓存和首选项。在帮助浏览器中搜索“疑难解答”。

例如（OS X）：

> ### 前端偏好
> 
> 前端首选项（例如最近打开和保存的文件的位置）存储在名为 init.m 的前端初始化文件中。该文件位于 ~/Library/Mathematica/FrontEnd 目录中。如果您需要将前端首选项重置为其默认值，请 在启动期间按住`Shift`+ 。`Option`这将导致初始化文件自动重建。
> 
> ### 缓存
> 
> 有关 Mathematica 系统布局的信息，例如文本资源文件和帮助文件的位置，存储在缓存中。这些缓存位于 ~/Library/Mathematica/FrontEnd/7.0/Caches 目录中。
> 
> 损坏的缓存可能会导致前端产生错误或在启动时立即退出。将缓存恢复为默认值的最方便的方法是在启动期间按住 `Shift`+ 。`Option`这将导致 Mathematica 缓存和初始化文件自动重建。
> 
> `Shift`如果您想重建缓存但保留您的偏好，请在启动时按住。这将删除并重建缓存，而无需重建前端初始化文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T01:59:13.507

看起来你有一些奇怪的格式问题。该单元格似乎有一些您看不到的格式。通过单击底部并在那里键入来创建一个新单元格应该可以解决问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T12:07:18.487

试试这个：打开新>包（.m）

它为您提供了一个用于键入/粘贴的文本框。编写此命令。格式化不应该在包模式下造成问题。点击顶部的运行包。

# html - 视频标签 html5 是否继承自 html4 标签？

> ID：11076186
> 
> 赞同：-3
> 
> 时间：2012-06-18T01:53:20.873
> 
> 标签：html, html5-video, html4

谁能指出我的任何信息？我听说视频标签 html5 是从 html4 标签继承的。真的吗？哪个标签用于此目的？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T01:55:52.370

不，这不是真的。`<video>`HTML4 中不存在该标记。完全没有。

# django - Django - 具有一对多关系的模型的更新页面

> ID：11076187
> 
> 赞同：0
> 
> 时间：2012-06-18T01:53:21.067
> 
> 标签：django, django-forms, django-views

我有一个 Django 应用程序，其中有 Post 和 PostImage 模型。

每个 Post 有多个 PostImage。

在 Post add 页面中，我有 Post 和 PostImages 的表单。我已将表单集用于 PostImages。这是视图的代码：

```
def post_new(request, template_name="posts/new.html"):

  post_form = Post(request.POST or None, request.FILES or None)
  PostImageFormSet = formset_factory(PostImageForm, extra=1)
  post_image_formset = PostImageFormSet(request.POST or None, request.FILES or None, prefix='post_images')

  if post_form.is_valid() and post_image_formset.is_valid():
    post = post_form.save(commit=False)
    post.save()
    for post_image_form in post_image_formset:
      post_image = post_image_form.save(commit=False)
      post_image.post = post
      post_image.save()

    redirect_url = urlresolvers.reverse('post_show')
    return HttpResponseRedirect(redirect_url)

  form_data = {'post_form': post_form, 'post_image_formset': post_image_formset}
  csrfContext = RequestContext(request, form_data)
  return render_to_response(template_name, csrfContext) 
```

我使用 jQuery 为 PostImage 添加更多表单，它工作得非常好，我可以创建一个包含任意数量图像的帖子。

现在，我希望我的 post_edit 页面以类似的方式工作。这是我的 post_edit 视图方法的代码：

```
def post_edit(request, post_slug, template_name="developers/posts/edit.html"):
  post = get_object_or_404(post, slug=post_slug)
  post_images = PostImage.objects.filter(post_id=post.id)
  count = len(post_images)
  post_form = postForm(request.POST or None, request.FILES or None, instance=post)
  postImageFormSet = formset_factory(postImageForm, extra=count)
  post_image_formset = postImageFormSet(request.POST or None, request.FILES or None, prefix='post_images')

  for post_image_form, post_image in zip(post_image_formset.forms, post_images):
    post_image_form.initial = post_image
  if post_form.is_valid():
    post_form.save()
    redirect_url = urlresolvers.reverse('developer_post_show', args=[post_slug])
    return redirect(redirect_url)

  form_data = {'post_form': post_form, 'post_image_formset': post_image_formset}
  csrfContext = RequestContext(request, form_data)
  return render_to_response(template_name, csrfContext) 
```

这是我的编辑页面模板：

```
{% extends "base.html" %}

{% block content %}
{% load thumbnail %}

  {% if error_message %} <p><strong>{{ error_message }}</strong></p> {% endif %}
  {{ post_form.errors }}
  <div style="width: 80%; margin: 0 auto;">
    <form action="" method="post">
      {% csrf_token %}
      <div>
        ... Post related HTML
      </div>

      <div class="post-images" style="clear: both;">
        {% for post_image_form in post_image_formset %}
          <div>
            {{ post_image_form.caption  }}
          </div>
        {% endfor %}
      </div>

      <div style="clear: both; position: relative; left: 320px;">
        <input type="submit" value = "Update post" />
      </div>

    </form>
  </div>
{% endblock %} 
```

我在模板中收到错误消息：

'PostImage' 对象没有属性 'get'

在我的模板中，我迭代了**post_image_formset**对象，它迭代了 3 次，这是正确的，因为该特定帖子有 3 张图像。但我仍然得到这个错误。任何人都可以帮忙吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T11:32:51.227

你`PostImageForm`的是一个`ModelForm`. 在您的编辑视图中，您使用该`initial`属性来提供现有实例。这不是推荐的方法，您的错误可能是这种情况的症状。

[为了提供初始实例`QuerySet`，使用了 a。](https://docs.djangoproject.com/en/1.4/topics/forms/modelforms/#changing-the-queryset)

在你的情况下，这看起来像这样：

```
def post_edit(request, post_slug, template_name="developers/posts/edit.html"):
    post = get_object_or_404(post, slug=post_slug)
    post_images = PostImage.objects.filter(post_id=post.id)

    PostImageFormSet = formset_factory(postImageForm, extra=2)
    formset = PostImageFormSet(queryset=post_images) 
```

您可能还想使用推荐的方式来处理[表单视图中的 POST 与 GET 请求](https://docs.djangoproject.com/en/1.4/topics/forms/#using-a-form-in-a-view)。

# actionscript-3 - ActionScript 3 读取等式的文本文件，检查输入和答案

> ID：11076193
> 
> 赞同：0
> 
> 时间：2012-06-18T01:54:57.973
> 
> 标签：actionscript-3, text-processing

我正在为基于数学的小孩制作一个教育 Flash 游戏，我希望能够从带有 as3 的文本文件中读取，在文本框中打印一个问题，然后接受用户输入并将其与答案进行比较还在该文件中检查用户是否输入了正确的答案，如果没有加载另一个问题供用户回答。

我以前做过这种事情，在 Visual Basic 中，制作一个文本语言词典，其中文件中的单词用“=”分隔，我告诉程序它们被那个字符分隔，程序打印了这两个词放入单独的文本框，相互对齐。如：“lol = Laughing Out Loud”就是其中的一句台词。

我希望能够有一个文本文件在一行上读取，例如“2x2 = 4”，然后游戏将能够将标志的左侧打印给用户，然后检查用户的输入内容右边的标志，看答案是正确的。

我希望这不会太混乱。我已尝试将文件打印到文本框中，但不确定如何使其仅打印问题，而不是整个文件，然后检查答案。

我是 AS3 和 flash 的初学者，并且已经承认这对于我的技能水平来说可能是一个过分的实验。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T08:52:53.083

当您想从 Flash 中更复杂的东西开始时，可​​能很难找到一种方法。正如 Jordan 所建议的，xml 是请求信息的最佳方式。您的 xml 文件看起来像这样：

```
<?xml version="1.0" encoding="UTF-8"?>
<myList>
    <excercise>
        <question>What is 2 x 2?</question>
        <answer>4</answer>
    </excercise>
</myList> 
```

（您可以将其复制并粘贴到记事本并保存为 .xml）

在 flash actionscript 中，您需要一些项目才能处理此 xml。我在名为“Main.as”的单独动作脚本文件中使用以下模板：

```
package 
{

    import flash.net.URLLoader;
    import flash.net.URLRequest;
    import flash.xml.*;
    import flash.events.Event;
    import flash.display.Loader;

    public class Main extends MovieClip
    {
        var myFile:String;
        var xmlLoader:URLLoader;
        var myList:XML;

        public function Main()
        {           
            myFile =  "myList.xml";
            loadXml();
        }
        function loadXml():void
        {
            xmlLoader = new URLLoader(new URLRequest(myFile));          
            xmlLoader.addEventListener(Event.COMPLETE,xmlLoaded);
        }
        function xmlLoaded(event:Event):void
        {
            myList = new XML(event.target.data);
            myList.ignoreWhite = true;
            //totalNr = myList.excercise.length(); = the amount of excercises in your file
            //var str:string = myList.excercise[0].question;
            //trace (str) would give you the text of the question of the first excercise
        }
    }

} 
```

**编辑** 假设您在舞台上创建了一个文本框并将其命名为**questionTxt**。要将您的问题添加到该文本框中，您会说：

```
questionTxt.text = myList.excercise[0].question; 
```

在其下方，创建一个输入文本字段，您的学生可以在其中输入答案。称之为**answerTxt**。

还要创建一个检查按钮，以便他们在给出答案后按下它。称之为**checkBtn**。

您还需要一个函数来将他们的输入与 xml 中的答案进行比较。我将在下面解决它。

现在你像这样向 checkBtn 添加一个事件监听器：

```
checkBtn.addEventListener(MouseEvent.CLICK, checkAnswer) 
```

以及检查答案的功能（方便地命名为**checkAnswer**）：

```
function checkAnswer (event:MouseEvent) : void {
    if (answerTxt.text == myList.excercise[0].answer) {
        trace ("correct");
    } else {
        trace ("wrong");
    }
} 
```

您将 xml-data 视为一个数组。第一个练习将作为 myList.excercise[0].question 找到，第二个将是 myList.excercise[1].question 等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T05:34:57.847

你听说过xml吗？它非常适合您尝试做的事情。至于加载，请使用 URLLoader 和 URLRequest 类。您将需要一个完整的处理程序来处理加载后的数据。我会在 as3 中使用 Google xml 来了解如何使用它。然后查看 Adob​​e 帮助码头以了解加载情况。自学是最好的学习方式，所以我鼓励您尽最大努力自己解决问题，但如果您有问题，请在这里问他们，我或其他人可以帮助您弄清楚具体细节。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T16:27:33.270

```
package 
{
    import flash.display.*;
        import flash.net.*;
        import flash.xml.*;
    import flash.text.*;
    import flash.events.*;
    import org.casalib.util.ArrayUtil;

    public class Main extends MovieClip
    {
        var myFile:String;
        var xmlLoader:URLLoader;
        var myList:XML;
        var questionTxt:TextField = new TextField();
        var questionNumber:uint = 0;
        var correctNumber:uint = 0;     
        var correctAnswer:String;
        var randomAnswer:Array;
        const NUM_QUESTIONS:uint = 3;

        public function Main()
        {   
            right = new Sprite();
            addChild(right);

            myFile = "myList.xml";
            loadXml();
        }

        function loadXml():void
        {
            xmlLoader = new URLLoader(new URLRequest(myFile));          
            xmlLoader.addEventListener(Event.COMPLETE,xmlLoaded);
        }

        public function randomiseArray(answers:XMLList):Array {
            var rArray:Array = new Array();
            for (var i:uint = 0; i < NUM_QUESTIONS; i++) {
             rArray.push(answers[i]);
            }
            return ArrayUtil.randomize(rArray);
        }

        function nextQuest ():void {
            correctAnswer = myList.excercise[questionNumber].answer[0];
            randomAnswer = randomiseArray ( myList.excercise[questionNumber].answer.children() ); 

            questionTxt.type = "dynamic";
            questionTxt.width = 208; 
            questionTxt.height = 32;
            questionTxt.x = 196;
            questionTxt.y = 101;
            addChild(questionTxt);
            questionTxt.text = myList.excercise[questionNumber].question;

            for (var i:uint = 0; i < NUM_QUESTIONS; i++) {
            var answerTxt:TextField  = new TextField(randomAnswer[i]);
            answerTxt.type = "input";
            answerTxt.x = 196;
            answerTxt.y = 301;
            answerTxt.width = 208; 
            answerTxt.height = 32;
            answerTxt.background = true; 
            answerTxt.backgroundColor = 0xFFF00;   
            answerTxt.addEventListener(KeyboardEvent.KEY_UP, checkAnswer);
            addChild(answerTxt);        
            }
            }       

        function xmlLoaded(event:Event):void
        {
            myList = new XML(event.target.data);
            myList.ignoreWhite = true;
            totalNr = myList.excercise.length(); 
            nextQuest();
            }

        function checkAnswer (e:KeyboardEvent):void 
        {           

         while (right.numChildren) right.removeChildAt(0);

         if(correctAnswer == e.target.getChildAt(e.target.numChildren - 1).text) correctNumber++;

            if (questionNumber == myList.excercise.length()-1) {
                    trace ("wrong");
                    answerTxt.backgroundColor = 0xFF0000;
            }else{

                    trace ("correct");
                   answerTxt.backgroundColor = 0xFFF00;
                   correctNumber++;
                   nextQuest();
                  }  
            }           

        }

} 
```

不要那样去。对正确答案的挑战代码在 answerTxt 中进行管理，如果正确，则立即跟随下一个问题。如何实现它没有达到。

# html - 动画文本转换大写

> ID：11076197
> 
> 赞同：2
> 
> 时间：2012-06-18T01:56:29.173
> 
> 标签：html, css, text

当我将鼠标悬停在链接上时，我想转换为 text-transform:uppercase 。我试过了：

```
a{
    font-size:20px;
animation-duration: 0.4s;
    transition: all 0.4s ease-in-out;
}

a:hover{
text-transform:uppercase;   
} 
```

但这没有任何效果，它只是弹出大写。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T02:03:41.437

我认为文本转换没有过渡。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T02:04:48.863

我的猜测是，没有办法对没有中间值的样式进行渐变。例如，您可以将宽度从 100 像素更改为 200 像素，因为两者之间有 99 个中间值。但是小写和大写之间的中间值是什么（您可以随时将元素设置为的值，例如宽度示例中的 150px 或 170px）？

也许您可以通过淡出（或中途）文本，将其更改为大写，然后将文本淡入（可能需要 jQuery）来稍微伪造过渡。

# php - MySQL修复两个表中的自动增量差距

> ID：11076200
> 
> 赞同：5
> 
> 时间：2012-06-18T01:57:31.293
> 
> 标签：php, mysql, database, auto-increment

我有两张这样的桌子；

```
id_image   foo    bar
1          3      5
2          8      1
3          17     88
7          14     23
8          12     9

id_image   bar    foo
1          2      3
1          5      6
2          18     11
2          10     12
3          8      21
3          17     81
7          29     50
7          1      14
8          10     26
8          27     34 
```

`id_image`第一个表中的自动增量存在间隙。在第二个表中，`id_image`指的是`id_image`第一个表中的 ，其中每个 ID 都有两个。

**注意：**此表为理论值。我不知道差距*到底在哪里*，或者是否有*多个差距*。我所知道的是第一个值是`1`，最后一个值高于总行数。

现在，我想弥补这个差距。

在你说差距无关紧要之前，如果他们这样做，那就是糟糕的数据库设计，让我告诉你；*我同意你的看法。*

但是，我正在处理的是一个（无可救药的后端）第三方开源系统，我需要将大量没有可交叉引用的 ID 的现有数据导入到多个表中。我可以确保相同数据在整个系统的每个表中获得匹配 ID 的唯一方法是按顺序输入它，这意味着我不能有间隙。

所以我现在需要做的是；

1.  修复第一个表中列的间隙`id_image`，使最后一个值与行数匹配。
2.  编辑`id_image`第二个表中的列，使其值对应于间隙修复之前对应的同一行。

我将如何开始这样做？我知道这可能超出了 MySQL 查询语言的能力，所以 PHP 的答案也是可以接受的。谢谢！:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T02:15:18.157

```
ALTER TABLE table2
ADD FOREIGN KEY FK_IMAGE (id_image)
REFERENCES table1 (id_image)
ON DELETE CASCADE
ON UPDATE CASCADE;

SET @currentRow = 0;

UPDATE table1 INNER JOIN (
    SELECT @currentRow := @currentRow + 1 AS id_image_new, id_image AS id_image_old
    FROM table1
    ORDER BY id_image ASC) t on t.id_image_old = table1.id_image
SET table1.id_image = t.id_image_new;

ALTER TABLE table1 AUTO_INCREMENT = 1; 
```

FK 将相应地自动更新您的第二张表的 ID。

我完全不确定，但在某些旧版本的 mysql 中，更新您在更新的子查询中引用的表可能会崩溃。如果是这样，只需创建第二个表并填写（插入），然后删除旧表并重命名新表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T02:31:27.470

The basic idea here is to find all of the gaps first to determine how much you need to decrement each id. Then, you have to iterate through both tables and apply the decrement. (You'll need to add: host, db, user, pass, and the actual table names)

```
try {
    $pdo = new PDO('mysql:host=HOST;dbname=DB', 'user', 'pass');

    $pdo->beginTransaction();

    // Iterate through all id's in the first table
    $stmt = $pdo->exec('SELECT image_id FROM TableOne ORDER BY image_id ASC');
    $stmt->bindColumn('image_id', $id);

    if(!$stmt->fetch(PDO::FETCH_BOUND)) {
        throw Exception('No rows in table');
    }

    $lastId = $id;
    $gaps = array();

    // Find all the gaps
    while($stmt->fetch(PDO::FETCH_BOUND)) {
        if($id != ($lastId + 1)) {
            $gaps[] = $id;
        }

        $lastId = $id;
    }

    if(!isset($gaps[0])) {
        throw new Exception('No gaps found');
    }

    // For each gap, update the range from the last gap to that gap by subtracting
    // the number of gaps there has been from the id
    $lastGap = $gaps[0];

    for($i = 1; $i < count($gaps); $i++) {
        $stmt = $pdo->prepare('UPDATE TableOne SET image_id = image_id - :i WHERE image_id BETWEEN :lastGap AND :gap');
        $stmt->execute(array(
            ':i' => $i,
            ':lastGap' => $lastGap,
            ':gap' => $gaps[$i]
        ));

        $stmt = $pdo->prepare('UPDATE TableTwo SET image_id = image_id - :i WHERE image_id BETWEEN :lastGap AND :gap');
        $stmt->execute(array(
            ':i' => $i,
            ':lastGap' => $lastGap,
            ':gap' => $gaps[$i]
        ));

        $lastGap = $gaps[$i];
    }

    // Finally, fix the gap between the last found gap and the end of the table
    $stmt = $pdo->prepare('UPDATE TableOne SET image_id = image_id - :i WHERE image_id BETWEEN :lastGap AND :gap');
    $stmt->execute(array(
        ':i' => $i,
        ':lastGap' => $lastGap,
        ':gap' => $gaps[$i]
    ));

    $stmt = $pdo->prepare('UPDATE TableTwo SET image_id = image_id - :i WHERE image_id BETWEEN :lastGap AND :lastId');
    $stmt->execute(array(
        ':i' => $i,
        ':lastGap' => $lastGap,
        ':lastId' => $lastId
    ));

    // Verify everything is correct
    $stmt = $pdo->exec('SELECT image_id FROM TableOne ORDER BY image_id ASC');
    $stmt->bindColumn('image_id', $id);

    if(!$stmt->fetch(PDO::FETCH_BOUND)) {
        throw new Exception('No rows'); // Should never be thrown
    }

    $lastId = $id;

    while($stmt->fetch(PDO::FETCH_BOUND)) {
        if($id != ($lastId + 1)) {
            throw new Exception('There was an error between ids ' . $lastId . ' and '. $id);
        }

        $lastId = $id;
    }

    $stmt = $pdo->exec('SELECT image_id FROM TableTwo ORDER BY image_id ASC');
    $stmt->bindColumn('image_id', $id);

    if(!$stmt->fetch(PDO::FETCH_BOUND)) {
        throw new Exception('No rows in table two'); // Shouldn't hit this
    }

    $lastId = $id;
    $ids = array($id);

    while($stmt->fetch(PDO::FETCH_BOUND)) {
        $ids[] = $id;

        if(count($ids) == 2) {
            if($ids[0] !== $ids[1]) {
                throw new Exception('Table two error on ids ');
            }

            if($ids[0] !== $lastId) {
                throw new Exception('Table two error on id gapfix');
            }

            $lastId = $ids[0];
            $ids = array();
        }
    }

    $pdo->commit();
} catch(Exception $e) {
    $pdo->rollBack();

    var_dump($e);
} 
```

**Important:** ~~You might want to throw this in a file and run via the CLI: `php -f gapfix.php` and include a query before `$pdo->commit()` that returns a list of all the ids so you can verify the operation worked as expected. If it didn't, you can roll it back as if nothing happened.~~ ~~**The code now checks for itself if the first table is in the right order. It doesn't however check the second table yet.**~~ **All checking has been implemented!**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-18T02:18:49.830

痛这个。

创建一个像第一个一样的表，在 Id_Image 上没有标识和一个名为 rownumber 的额外 int 列

使用伪 row_number 技巧来填充它，有些像

```
Insert into NewTable
Select id_image,foo,bar,@RowNumber := @RowNumber + 1 order by id_image. 
```

如果您有第二个表的外键删除它，那么这是一个简单的连接更新。删除旧的 table1 ，重命名新的，添加身份和重新种子，如果你有外键，把你的外键放回去。

你真的意识到你将不得不继续做这种废话吗？

如果您有级联更新，可能有一种一次性完成所有这些的有趣方式，但要特别注意执行计划。RowNumber 技巧仅在事情以 Id_Image 顺序完成时才有效。如果 Mysql 决定有一种更有效的查询方式......

# iphone - 删除 NSDocumentDirectory 中的图像

> ID：11076204
> 
> 赞同：0
> 
> 时间：2012-06-18T01:57:59.783
> 
> 标签：iphone, ios, xcode

我有一个自定义库，可以从相机胶卷中选择多个图像，我将图像保存在`NSDocumentDirectory`这样的位置：

```
 for (int i = 0; i < info.count; i++) {
            NSLog(@"%@", [info objectAtIndex:i]);
            NSArray *paths = NSSearchPathForDirectoriesInDomains( NSDocumentDirectory,    NSUserDomainMask ,YES );
            NSString *documentsDir = [paths objectAtIndex:0];
            NSString *savedImagePath = [documentsDir stringByAppendingPathComponent:[NSString stringWithFormat:@"Images%d.png", i]];
            ALAssetRepresentation *rep = [[info objectAtIndex: i] defaultRepresentation];
            UIImage *image = [UIImage imageWithCGImage:[rep fullResolutionImage]];
            //----resize the images
            image = [self imageByScalingAndCroppingForSize:image toSize:CGSizeMake(256,256*image.size.height/image.size.width)];

            NSData *imageData = UIImagePNGRepresentation(image);
            [imageData writeToFile:savedImagePath atomically:YES];

            NSLog(@"saving at:%@",savedImagePath);

        } 
```

我想做的是我想将它加载到缩略图中，`UIScrollView`然后当点击特定图片时`AlertView`会弹出一个弹出窗口，询问用户是否要删除它。我设法让它在缩略图视图中加载（我使用`HSImageSidebarView`），并在`AlertVIew`用户点击图像时弹出弹出窗口。但是当我按下 delete 时，它​​会在视图中删除，但不会在`NSDocumentDirectory`.

这就是我删除图像的方式：

```
- (void)sidebar:(HSImageSidebarView *)sidebar didRemoveImageAtIndex:(NSUInteger)anIndex {
    NSLog(@"Image at index %d removed", anIndex);
    [images removeObjectAtIndex:anIndex];

    NSFileManager *fileManager = [NSFileManager defaultManager];
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];
    NSString *fullPath = [documentsDirectory stringByAppendingPathComponent:[NSString stringWithFormat:@"Images%d.png", anIndex]];
    [fileManager removeItemAtPath: fullPath error:NULL];
    NSLog(@"image removed");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T02:58:34.740

在这一行，将 %d 替换为 %lu

```
NSString *fullPath = [documentsDirectory stringByAppendingPathComponent:[NSString stringWithFormat:@"Images%d.png", anIndex]]; 
```

# jquery - jquery在一个简单的功能后自行重新加载我的页面，知道为什么吗？

> ID：11076205
> 
> 赞同：1
> 
> 时间：2012-06-18T01:58:01.497
> 
> 标签：jquery

有一个简单的网站，在 html 中。我做了一个简单的功能来将用户点击的图像移动到不同的 div ；

```
function setimage(){
 $(".moving_img").click(function(){
  $('#target').after( $(this));
 });
} 
```

但是，在移动图像后（还添加了背景更改为黄色以确认它有效），我的页面突然重新加载，控制台不会向我显示任何错误，我不知道是什么可能导致重新加载......知道为什么吗？我没有使用 ajax 或任何服务器端代码或任何复杂的插件（我创建了我使用的所有东西，我不是专业人士）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T01:59:54.783

```
function setimage(){
 $(".moving_img").click(function(){
  $('#target').after( $(this));
  return false; // add return false to prevent this.
 });
} 
```

或使用[event.stopPropagation()](http://api.jquery.com/event.stopPropagation/)

```
function setimage(){
 $(".moving_img").click(function(e){
  e.stopPropagation();
  $('#target').after( $(this));
 });
} 
```

# php - 在 php mysql 中合并 2 字段时出错？

> ID：11076206
> 
> 赞同：1
> 
> 时间：2012-06-18T01:58:12.493
> 
> 标签：php, mysql

```
products(id, name)
categories(id, name, product_id) 
```

我有一个示例代码：

```
products(1, 'Apple') 
```

和类别

```
categories(1, 'Iphone', 1)
categories(2, 'Ipad', 1)
categories(3, 'Ipod', 1) 
```

并查询：

```
SELECT pr.id, cat.name, pr.name 
FROM `products` as pr
LEFT JOIN `categories` as cat USING(id)
GROUP BY pr.id 
```

但结果是

```
1, "Iphone", "Apple" 
```

而且`Ipad, Ipod`不显示，如何解决？

```
 1, "Iphone, Ipad, Ipod", "Apple" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T02:02:50.330

您的 JOIN 条件正在尝试连接两个 ID 列，这不是关系。它应该将 product.id 加入 category.produt_id

```
SELECT pr.id, cat.name, pr.name 
FROM `products` as pr
LEFT JOIN `categories` as cat ON pr.id = cat.product_id
GROUP BY pr.id 
```

编辑：我意识到你只想要一个连接类别的结果。您需要选择列表中的 GROUP_CONCAT 函数：

```
SELECT pr.id, GROUP_CONCAT(cat.name), ... 
```

[http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat)

# c++ - 使用位移重新实现模？

> ID：11076216
> 
> 赞同：13
> 
> 时间：2012-06-18T01:59:59.730
> 
> 标签：c++, optimization, bit-manipulation, modulo, bit-shift

我正在为一个非常有限的系统编写一些代码，其中 mod 运算符非常慢。在我的代码中，模数需要每秒使用大约 180 次，我认为尽可能多地删除它会显着提高我的代码速度，截至目前，我的 mainloop 的一个周期不会以 1/60 的速度运行第二，它应该。我想知道是否可以仅使用位移来重新实现模数，就像乘法和除法一样。所以这是我迄今为止在 C++ 中的代码（如果我可以使用汇编执行模数，那就更好了）。如何在不使用除法或乘法的情况下删除模数？

```
 while(input > 0)
{
    out = (out << 3) + (out << 1);
    out += input % 10;

    input = (input >> 8) + (input >> 1);
} 
```

**编辑：**实际上我意识到我需要每秒执行超过 180 次。看到输入的值可以是一个非常大的数字，最多 40 位。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-06-18T05:05:24.667

您可以使用*简单*的按位运算执行的操作是将值（除数）与除数 1 进行“与”运算，以取值（除数）的二次幂模（除数）。几个例子：

```
unsigned int val = 123; // initial value
unsigned int rem;

rem = val & 0x3; // remainder after value is divided by 4\. 
                 // Equivalent to 'val % 4'
rem = val % 5;   // remainder after value is divided by 5.
                 // Because 5 isn't power of two, we can't simply AND it with 5-1(=4). 
```

**为什么它有效？**让我们考虑值 123 的位模式，`1111011`然后是除数 4，其位模式为`00000100`。正如我们现在所知道的，除数必须是 2 的幂（如 4），我们需要将其减一（从十进制的 4 到 3），这产生了位模式`00000011`。在我们对原始的 123 和 3 进行按位与后，得到的位模式将是`00000011`. 结果是十进制的 3。我们需要二的幂除数的原因是，一旦我们将它们减一，我们就会将所有次要有效位设置为`1`，其余为`0`。一旦我们进行按位与运算，它就会从原始值中“消除”更高的有效位，而只剩下原始值除以除数的余数。

但是，除非您事先知道除数（在编译时，甚至需要特定除数的代码路径），否则对任意除数应用这样的特定内容是行不通的 - 在运行时解决它是不可行的，尤其是在您的情况下性能很重要。

还有[一个与该主题相关的先前问题，](https://stackoverflow.com/questions/980702/efficient-cycles-wise-algorithm-to-compute-modulo-25)它可能从不同的角度提供有关该问题的有趣信息。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-18T20:50:53.680

实际上，除以常量是编译器众所周知的优化，事实上，gcc 已经在这样做了。

这个简单的代码片段：

```
int mod(int val) {
   return val % 10;
} 
```

使用 -O3 在我相当旧的 gcc 上生成以下代码：

```
_mod:
        push    ebp
        mov     edx, 1717986919
        mov     ebp, esp
        mov     ecx, DWORD PTR [ebp+8]
        pop     ebp
        mov     eax, ecx
        imul    edx
        mov     eax, ecx
        sar     eax, 31
        sar     edx, 2
        sub     edx, eax
        lea     eax, [edx+edx*4]
        mov     edx, ecx
        add     eax, eax
        sub     edx, eax
        mov     eax, edx
        ret 
```

如果您忽略功能后记/序言，则基本上是两个 muls（实际上在 x86 上我们很幸运，可以使用 lea 作为一个）和一些转变和添加/子。我知道我已经在某个地方解释了这个优化背后的理论，所以我会在再次解释之前看看我是否能找到那个帖子。

现在在现代 CPU 上，这肯定比访问内存要快（即使你命中了缓存），但是对于你显然更古老的 CPU 来说，它是否更快是一个只能通过基准测试来回答的问题（并且还要确保你的编译器正在做该优化，否则您总是可以在这里“窃取” gcc 版本；））。特别是考虑到它依赖于有效的 mulhs（即乘法指令的更高位）才能有效。请注意，此代码与大小**无关**- 确切地说是幻数更改（也可能是添加/移位的一部分），但可以调整。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-18T02:12:45.667

对位移进行模 10 运算将变得困难且丑陋，因为位移本质上是二进制的（在您今天将要运行的任何机器上）。如果您考虑一下，位移只是简单地乘以或除以 2。

但是您可以在这里进行明显的时空交易：为 和 设置一个值表`out`并`out % 10`进行查找。然后这条线变成

```
 out += tab[out] 
```

如果运气好的话，那将是一个 16 位的加法和存储操作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-18T05:43:31.337

如果你想做模 10 和班次，也许你可以根据你的需要调整**[双涉猎算法](http://en.wikipedia.org/wiki/Double_dabble)**？

该算法用于将二进制数转换为十进制数，而不使用模数或除法。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-18T10:24:18.667

16 的每个幂都以 6 结尾。如果您将数字表示为 16 的幂的总和（即，将其分解为 nybbles），那么每个项都以相同的方式对最后一个数字做出贡献，除了个位。

```
0x481A % 10 = ( 0x4 * 6 + 0x8 * 6 + 0x1 * 6 + 0xA ) % 10 
```

请注意，6 = 5 + 1，如果有偶数个，5 将抵消。因此，只需将 nybbles 相加（最后一个除外），如果结果为奇数，则加 5。

```
0x481A % 10 = ( 0x4 + 0x8 + 0x1 /* sum = 13 */
                + 5 /* so add 5 */ + 0xA /* and the one's place */ ) % 10
            = 28 % 10 
```

这将 16 位、4 位模的模数减少到最多`0xF * 4 + 5 = 65`. 在二进制中，这仍然是令人讨厌的 3 个 nybbles，因此您需要重复该算法（尽管其中一个并不算数）。

但是 286 应该具有相当有效的 BCD 加法，您可以使用它来执行求和并一次获得结果。（这需要手动将每个 nybble 转换为 BCD；我对平台了解得不够多，无法说明如何优化它或者它是否有问题。）

# c# - 如果用户处于鼠标按下事件中，我如何检查 pictureBox1 鼠标离开事件？

> ID：11076217
> 
> 赞同：0
> 
> 时间：2012-06-18T02:00:01.383
> 
> 标签：c#

我的意思是，我只想在用户将鼠标指针移出 pictureBox1 客户区域时才激活鼠标离开事件。只有当他按下鼠标左键时才会发生这种情况，但如果用户没有按下鼠标左键则不会发生这种情况，即他可以自由移动鼠标并且事件不会做任何事情。

我在 Form1 的顶部有一个名为 mouseLeave 类型 bool 的变量。

在构造函数中，我将其设为假；

在pictureBox1 鼠标按下事件中，我将mouseLeave 变量设置为true。

```
private void pictureBox1_MouseDown(object sender, MouseEventArgs e)
        {
            if (e.Button == MouseButtons.Left)
            {
                label1.Visible = true;
                label4.Visible = true;
                // find the index that is closest to the current mouse location
                float t = wireObject1.GetIndexByXY(e.X, e.Y, 5);

                if (t == -1)
                {
                    button3.Enabled = false;
                }
                else
                {
                    button3.Enabled = true;
                    {
                        selectedIndex = t;
                        mouseMove = true;
                        mouseLeave = true; 
```

在 pictureBox1 鼠标移动事件中，我检查 mouseMove 是否为真，然后移动点拖动它：

```
private void pictureBox1_MouseMove(object sender, MouseEventArgs e)
        {
            if (mouseMove == true)
            {
                Point NewPoint = e.Location;
                {

                    wireObject1.MovePoint(selectedIndex, NewPoint, NewPoint); // when moving a point dragging the other point is vanished deleted. To check why !

                    label1.Text = "{X = " + NewPoint.X + "}" + " " + "{Y = " + NewPoint.Y + "}";
                    pictureBox1.Refresh();
                }

            }
            else
            {
                label19.Text = "{X = " + e.X + "}" + " " + "{Y = " + e.Y + "}";
            }
        } 
```

因此，当用户单击鼠标左键而不离开它并拖动该点时，该点将在pictureBox1客户区周围移动。

现在在 pictureBox1 鼠标离开事件中我做了：

```
private void pictureBox1_MouseLeave(object sender, EventArgs e)
        {
            if (mouseLeave == true)
            {
                mouseMove = false;
            }

        } 
```

但它不起作用。我添加了一个点，拖动它移动它，但是只有当我将鼠标指针移出pictureBox1区域而不拖动点时，这个事件才激活才做一些事情，只有当我没有点击鼠标左键时。

我想要的是，只有当我单击鼠标左键并像在鼠标移动事件中那样移动它时，这个离开事件才会在这种情况下做一些事情，这会使 mouseMove 为假。

因此用户将无法将点拖出pictureBox1 区域。那我应该在鼠标离开事件中做什么？

已编辑**

这是 button1 单击我每次将新点添加到pictureBox1 区域的地方。还有我画点的绘画事件。

也许这将有助于解决拖出pictureBox边界时它停止但不在正确位置的问题。

```
private void button1_Click(object sender, EventArgs e)
        {
            halfX = pictureBox1.ClientRectangle.Width / 2;
            halfY = pictureBox1.ClientRectangle.Height / 2;
            Random rnd = new Random();
            offsetX = rnd.Next(-10, 10);
            offsetY = rnd.Next(-10, 10);
            wireObject1.addPoint(halfX + offsetX, halfY + offsetY);
            if (wireObjectCoordinates1 == null)
                wireObjectCoordinates1 = new WireObjectCoordinates() { FrameNumber = currentFrameIndex };
            wireObjectCoordinates1.Point_X.Add(halfX + offsetX);
            wireObjectCoordinates1.Point_Y.Add(halfY + offsetY);
            wireObjectAnimation1._coordinatesList.Add(wireObjectCoordinates1);
            pictureBox1.Refresh();
            numberOfPoints++;
            label5.Text = "{X = " + (halfX + offsetX) + "}" + " " + "{Y = " + (halfY + offsetY) + "}";
            label5.Visible = true;
            label7.Visible = true;
            label16.Text = numberOfPoints.ToString();
            label16.Visible = true;
            label15.Visible = true;
            buttonLockMode = true;
            button8.Enabled = true;
            button4.Enabled = true;

        }

private void pictureBox1_Paint(object sender, System.Windows.Forms.PaintEventArgs e)
        {
           Point connectionPointStart;
           Point connectionPointEnd;
           Graphics g = e.Graphics;
           g.SmoothingMode = System.Drawing.Drawing2D.SmoothingMode.AntiAlias;
           SolidBrush brush = new SolidBrush(Color.Red);
           Pen p = new Pen(brush);
               for (int idx = 0; idx < wireObject1._point_X.Count; ++idx)
               {
                   Point dPoint = new Point((int)wireObject1._point_X[idx], (int)wireObject1._point_Y[idx]);
                   dPoint.X = dPoint.X - 5; // was - 2
                   dPoint.Y = dPoint.Y - 5; // was - 2
                   Rectangle rect = new Rectangle(dPoint, new Size(10, 10));
                   g.FillEllipse(brush, rect);

                  // g.FillEllipse(brush, rect);
               }

               for (int i = 0; i < wireObject1._connectionstart.Count; i++)
               {

                   int startIndex = wireObject1._connectionstart[i];
                   int endIndex = wireObject1._connectionend[i];

                   connectionPointStart = new Point((int)wireObject1._point_X[startIndex], (int)wireObject1._point_Y[startIndex]);
                   connectionPointEnd = new Point((int)wireObject1._point_X[endIndex], (int)wireObject1._point_Y[endIndex]);
                   p.Width = 4;
                   g.DrawLine(p, connectionPointStart, connectionPointEnd);

               }

        } 
```

我想我通过将鼠标中的 if 更改为这样来解决它：

```
if (!((PictureBox)sender).ClientRectangle.Contains(NewPoint.X + 5,NewPoint.Y) || (!((PictureBox)sender).ClientRectangle.Contains(NewPoint.X - 5,NewPoint.Y) ||
                     !((PictureBox)sender).ClientRectangle.Contains(NewPoint.X, NewPoint.Y + 5)) || (!((PictureBox)sender).ClientRectangle.Contains(NewPoint.X, NewPoint.Y - 5))) 
```

所以 move 事件应该是这样的：

```
 private void pictureBox1_MouseMove(object sender, MouseEventArgs e)
        {
            if (mouseMove == true)
            {
                mouseDrag = true;
                Point NewPoint = e.Location;
                if (!((PictureBox)sender).ClientRectangle.Contains(NewPoint.X + 5,NewPoint.Y) || (!((PictureBox)sender).ClientRectangle.Contains(NewPoint.X - 5,NewPoint.Y) ||
                     !((PictureBox)sender).ClientRectangle.Contains(NewPoint.X, NewPoint.Y + 5)) || (!((PictureBox)sender).ClientRectangle.Contains(NewPoint.X, NewPoint.Y - 5)))
                {
                    if (mouseDrag)
                    {
                        mouseMove = false;
                        return;
                    }
                }

                {
                    wireObject1.MovePoint(selectedIndex, NewPoint, NewPoint); // when moving a point dragging the other point is vanished deleted. To check why !

                    label1.Text = "{X = " + NewPoint.X + "}" + " " + "{Y = " + NewPoint.Y + "}";
                    pictureBox1.Refresh();
                }

            }
            else
            {
                label19.Text = "{X = " + e.X + "}" + " " + "{Y = " + e.Y + "}";
            }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T02:24:34.723

做这样的事情：

```
 private void pictureBox1_MouseUp(object sender, MouseEventArgs e)
    {
        pictureBox1.MouseMove -= OnMouseMove;
    }

    private void pictureBox1_MouseDown(object sender, MouseEventArgs e)
    {
        if (e.Button == MouseButtons.Left)
            pictureBox1.MouseMove += OnMouseMove;
    }

    private void OnMouseMove(object sender, MouseEventArgs e)
    {
        Debug.WriteLine(e.Location);
    } 
```

默认情况下，“OnMouseMove”未附加到图片框事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T05:15:18.030

除了使用`MouseLeave`事件，您可以检查鼠标位置是否在事件中的 PictureBox 的客户端矩形中`MouseMove`，类似这样。

```
private void pictureBox1_MouseMove(object sender, MouseEventArgs e)
{
    {
        if (mouseMove == true)
        {
            Point NewPoint = e.Location;

            if (!((PictureBox)sender).ClientRectangle.Contains(NewPoint))
            {
                if (mouseLeave)
                {
                    mouseMove = false;
                    return;
                }
            }

            wireObject1.MovePoint(selectedIndex, NewPoint, NewPoint); // when moving a point dragging the other point is vanished deleted. To check why ! 

            label1.Text = "{X = " + NewPoint.X + "}" + " " + "{Y = " + NewPoint.Y + "}";
            pictureBox1.Refresh();

        }
        else
        {
            label19.Text = "{X = " + e.X + "}" + " " + "{Y = " + e.Y + "}";
        }
    } 

} 
```

# php - PHP：加密/解密短字符串

> ID：11076221
> 
> 赞同：2
> 
> 时间：2012-06-18T02:00:50.043
> 
> 标签：php

我需要加密和解密短字符串（例如'product1234'）。我已经将 mcrypt_encrypt 和 mcrypt_decrypt 与各种密码一起使用。问题是它总是将扩展字符放入结果字符串中，这会导致我的应用程序代码的某些方面出现一些我无法控制的问题。

所以，问题是是否有一种密码可以减少加密字符串中使用的字符列表（即省略诸如'+'、'\'或'/'之类的东西）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T02:08:44.260

您可以使`base64_encode`网络安全：

```
function base64url_encode($plainText)
{
    return strtr(base64_encode($plainText), '+/=', '-_,');
}

function base64url_decode($b64Text)
{
    return base64_decode(strtr($b64Text, '-_,' '+/='));
} 
```

或者使用十六进制编码：

```
bin2hex($plainText);

hex2bin($hexText); 
```

# javascript - 在 jQuery 回调中访问外部范围

> ID：11076224
> 
> 赞同：0
> 
> 时间：2012-06-18T02:01:38.730
> 
> 标签：javascript, jquery, scope, jquery-callback

我有一种情况，我需要一个 jQuery 回调来处理它范围之外的变量。为简单起见，假设以下代码：

```
$('#myBtn').on('click', function(e) {
    var num = 1;

    // assume this returns the following:
    // { success : true, num : 1 }
    $.getJSON('/api/get_number', {}, function(response) {
        if ( response.success ) {
            // here, num is unknown unless I define it as a
            // global variable
            num += response.num ;   
        }
    });

    console.log(num); // => want 2, get 1
}); 
```

我希望 num 在回调函数中可用。在不声明全局变量（在 onclick 函数之外声明 num ）的情况下，有什么好的方法可以做到这一点？有没有办法将它作为参数传递而不必从服务器发送？谢谢。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-18T02:33:23.473

```
$('#myBtn').on('click', function(e) {
    var num = 1;

    // assume this returns the following:
    // { success : true, num : 1 }
    $.getJSON('/api/get_number', {}, function(response) {
        // get responce
        if ( response.success ) {
            // here, num is unknown unless I define it as a
            // global variable
            num += response.num ;   
            console.log(num); // you will get 2 here
        }
    });
    // responce havnt get ,you always get 1
    console.log(num); // => want 2, get 1
}); 
```

# javascript - 如何使用 Javascript 对摆线进行建模？

> ID：11076225
> 
> 赞同：0
> 
> 时间：2012-06-18T02:01:41.023
> 
> 标签：javascript, animation, graph

对于额外的学分作业，我的 PreCalc 老师说我可以编写一个模拟摆线的程序。我没有用 Javascript 做太多的工作，但我理解它，如果我知道如何制作它的整体组织，我可以用它创造一些东西。

我想做一些[看起来像 Gif](http://en.wikipedia.org/wiki/File%3aCycloid_f.gif)的东西，但是在 javascript 中，它允许编辑方程并改变动画。

对于那些不知道的人 -[这是摆线的笛卡尔方程](http://i.stack.imgur.com/HolH4.png)

# qt - 通过 eventFilter 连接/断开信号

> ID：11076226
> 
> 赞同：3
> 
> 时间：2012-06-18T02:02:09.090
> 
> 标签：qt, pyqt, pyqt4, pyside

我有一个包含数百个自定义按钮的应用程序，每个按钮都需要多个信号连接。连接调用似乎很慢，所以我试图通过主窗口`eventFilter`使用进入和离开事件连接/断开每个按钮的信号。

但是，有时这些事件似乎被多次调用，导致 RuntimeErrors（当试图断开已经消失的事件时）。这是一段代码，显示了使用默认按钮的类似（并且希望相关）问题。要在此处查看运行时错误，请运行代码，按下其中一个按钮，然后关闭窗口。那是我看到这个的时候：

```
RuntimeError: Fail to disconnect signal clicked(). 
```

这是代码。有人知道这是否是*PySide*错误吗？

```
from PySide.QtGui import *
from PySide.QtCore import *
import sys

class TestWindow( QWidget ):
    def __init__( self, parent=None ):
        super( TestWindow, self ).__init__( parent )    
        self.setLayout( QGridLayout() )

    def addWidget( self, w ):
        self.layout().addWidget( w )

    def testCB( self ):
        print 'button connected'

    def eventFilter( self, obj, event ):
        '''Connect signals on mouse over'''
        if event.type() == QEvent.Enter:
            print 'enter',
            obj.clicked.connect( self.testCB )
        elif event.type() == QEvent.Leave:
            print 'leave'
            obj.clicked.disconnect( self.testCB )
        return False

app = QApplication( sys.argv )
w = TestWindow()
for i in xrange(10):
    btn = QPushButton( 'test %s' % i )
    w.addWidget( btn )
    btn.installEventFilter(w)

w.show()
sys.exit( app.exec_() ) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-14T08:04:13.867

在少数情况下，当我测试鼠标事件时，当事件附加到项目类时表现出更好的性能......所以不要子类化。相当 ：

```
class Button(QPushButton):
    def __init__(self, label):
        super(Button, self).__init__()
        self.setText(label)

app = QApplication( sys.argv )
w = TestWindow()
for i in xrange(10):
    btn = Button( 'test %s' % i )
    w.addWidget( btn ) 
```

...然后为类定义鼠标事件。

# macos - 如何将 gitbox/git 指向不同的本地目录

> ID：11076231
> 
> 赞同：0
> 
> 时间：2012-06-18T02:02:46.923
> 
> 标签：macos, git, version-control, gitbox

大家好，我在本地克隆了一个远程存储库，因为我的新更改已将其保存到不同的目录（eclipse 中的工作区）我想将 git 指向工作区目录而不是其他目录，我该怎么做？Gitbox似乎没有任何选项，我也看不到.git文件夹

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T03:42:58.077

在你的工作空间做

```
git init 
```

然后从您最初提取副本的位置。做

```
git pull /path/to/your/workspace/project/dir 
```

# html - 网站在 Dreamweaver 中看起来不错，但

> ID：11076233
> 
> 赞同：0
> 
> 时间：2012-06-18T02:03:14.440
> 
> 标签：html, css, dreamweaver

所以我第一次创建自己的网站，在遇到一堆问题后，我遇到了一个我不确定如何解决的问题。

ngkevin-art.com/about.html

这就是它在 Dreamweaver 中的外观以及我希望它的外观：http: [//i.imgur.com/wlOIR.jpg](http://i.imgur.com/wlOIR.jpg)

但是当我进入 Live View 或在线观看时，它就崩溃了。任何帮助，将不胜感激。

CSS：

```
@charset "utf-8";
/* CSS Document */

/* General HTML Tag Rules */

body {
  width:auto;
  height:auto;
  background-image:url(images/bg_demo2.png);
  background-color:#2d2d2d;
  background-repeat:no-repeat;
  background-position:center;
  margin-top:30px;
}

@font-face {
    font-family: Harabara;
    src: url(Harabara.ttf);
    font-weight:200;
}

h1 {
  font-family: Harabara, Helvetica, Arial, sans-serif;
  font-size:150%;
  color:#CECEBC;
}

h2 {
  font-family: Harabara, Helvetica, Arial, sans-serif;
  font-size:100%;
  color:#CECEBC;
}

.text {
  margin-left:75px;
  width:auto;
  float:left;

}

#text2 {
  width:408px;
  text-align:center;

}

.text3 {
  margin-left:25px;
  width:auto;
  float:left;
}

#container {
  width:1280px;
  height:960px;
  margin-left:auto;
  margin-right:auto;

}

#wrapContact {

  width: 520px;
  height: 100px;
  margin-left:735px;
  margin-top: 10px;
  clear: both;
}

#linked {
  float:left;
  margin-top:35px;
  width: 175px;
}

#facebook {
  float:left;
  width: 200px;
  margin-left:32px;
  margin-top:25px;

}

#email {
  float:left;
  width:75px;
  margin-left:35px;
  margin-top:20px;

}

#wrapNav {

  width: 475px;
  margin-left:750px;
  margin-top:60px;
}

#demo {
  width: 500px;
  text-align:center;
  margin-top: 70px;
  margin-left:auto;
  margin-right:auto;

}

#flatbook {
  width:250px;
  margin-left:auto;
  margin-right:auto;
  margin-top:20px;

}

#wrapAbout {
  margin-left:auto;
  margin-right:auto;
  margin-top:75px;
  width: 1100px;
  height:auto;

}

#picture {
  width:408px;
  margin-top:100px;
  float:left; 
} 
```

HTML：

 ````
<body>

    <div id="container">

      <div id="wrapContact">
            <div id="linked">
                <a href="http://www.linkedin.com/pub/kevin-ng/25/558/75b"> 
                <img src="images/logo_linked_large.png" width="auto" height="auto" border="0" alt="linkedin_logo" /> </a>
            </div>

            <div id="facebook">
                <a href="http://www.facebook.com/profile.php?id=1309131548"> 
                <img src="images/logo_fb_large.png" width="auto" height="auto" border="0" alt="facebook_logo" /> </a>
            </div>

      <div id="email">
            <a href="mailto: ngkevin.3dartist@gmail.com"> 
                <img src="images/gmail.png" width="auto" height="auto" border="0" alt="email_icon" /> </a>
            </div>
      </div> <!-- End "wrapContact"> -->

      <div id="wrapNav">

            <a href="index.html">                        
            <img src="images/bg_tab_main.png" width="auto" height="auto" border="0" alt="Main" /> </a>

            <a href="demo.html">                        
            <img src="images/bg_tab_demo.png" width="auto" height="auto" border="0" alt="Demo" /> </a>

            <a href="about.html">                        
            <img src="images/bg_tab_about.png" width="auto" height="auto" border="0" alt="About" /> </a>

      </div> 
    <!-- End "wrapNav"> -->  

      <div id="wrapAbout">

          <div id="picture">
                <img src="images/picture.jpg" width="auto" height="auto" alt="picture" />
                <div id="text2">
                    <h2> Me in the middle left, my buddies, Jordan Gabriel on the left and Edmund Zhu on the right,
                        and finally, Epic Games VIP, Cliff Bleszinski! Taken at GDC 2010\. </h2>
                </div>
          </div>

          <div class="text">        
                <h1> Resume: <br/>
                <br/> Email: <br/> <br/>
                <br/> About Me:</h1>            
          </div>

          <div class="text3">
              <h1> <a href="resume/Kevin Ng Resume2.doc"> Click Here </a>
              <br/> <br/> <a href="ngkevin.3dartist@gmail.com"> ngkevin.3dartist@gmail.com </a> <br/> 
                <br/> <br/> <font size="4"> 
                    My desire to be in the game development industry is to work with other individuals that take pride in creating a game, 
                    something that can be enjoyed by a multitude of people. There is nothing I would like better than to lend my talents and 
                    artistic skills for that purpose. <br/> <br/>

                    I believe the key to creating memorable game art, whether it be characters or environments, is the story. 
                    Just like reading a good book or watching a thrilling movie, I loved to be immersed in the world of the game. As a result, 
                    I had an affinity to Role-Playing Games. Classic games of my generation such as Chrono Trigger, Final Fantasy, and Zelda 
                    showed me a world of endless imagination.  <br/> <br/>

                    The characters which are the focal point of the story, their goals and motivations, their trials and tribulations, 
                    their victories and defeats... These are the things I think about constantly when I look at them. 
                    A character without depth doesn't exist, but if they do, I can only imagine how boring that would be. </font></h1>
          </div>

        </div>

    </div><!-- End "container" -->

</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T02:13:34.247

尝试给你的 .text3 类一个固定的宽度。450px 看起来差不多。`

# java - 从字符串中过滤单词

> ID：11076237
> 
> 赞同：1
> 
> 时间：2012-06-18T02:03:48.747
> 
> 标签：java, string, filter, arraylist

我想过滤一个字符串。

基本上，当有人键入消息时，我希望过滤掉某些单词，如下所示：

**用户类型：** `hey guys lol omg -omg mkdj*Omg*ndid`

我希望过滤器运行并且：

**输出：** `hey guys lol - mkdjndid`

我需要从`ArrayList`包含几个要过滤掉的单词中加载过滤后的单词。现在我正在做，但如果有人*输入 zomg*或*-omg*或类似的`if(message.contains(omg))`，那将不起作用。

 *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T02:44:39.567

Use replaceAll with a regex built from the bad word:

```
message = message.replaceAll("(?i)\\b[^\\w -]*" + badWord + "[^\\w -]*\\b", ""); 
```

This passes your test case:

```
public static void main( String[] args ) {
    List<String> badWords = Arrays.asList( "omg", "black", "white" );
    String message = "hey guys lol omg -omg mkdj*Omg*ndid";
    for ( String badWord : badWords ) {
        message = message.replaceAll("(?i)\\b[^\\w -]*" + badWord + "[^\\w -]*\\b", "");
    }
    System.out.println( message );
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T13:27:59.163

戴夫已经给了你答案，但我会在这里强调声明。如果您使用一个简单的 for 循环来实现您的算法，该循环只是替换过滤词的出现，您将面临一个问题。例如，如果您过滤单词“classic”中的单词 ass 并将其替换为“butt”，则结果单词将是“clbuttic”，这没有任何意义。因此，我建议使用一个单词列表，例如存储在 Linux 中 /usr/share/dict/ 目录下的单词列表，以检查该单词是否有效或需要过滤。我不太明白你想要做什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T02:15:19.070

尝试：

```
input.replaceAll("(\\*?)[oO][mM][gG](\\*?)", "").split(" ") 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-29T11:16:19.377

我遇到了同样的问题并通过以下方式解决了它：

1）有一个谷歌电子表格，其中包含我想要过滤掉的所有单词

2）使用loadConfigs方法直接将google电子表格下载到我的代码中（见下文）

3) 用它们各自的字母替换所有 l33tsp33k 字符

4) 替换句子中除字母外的所有特殊字符

5）运行一个算法，有效地检查字符串中所有可能的单词组合与列表，注意这部分是关键 - 你不想每次都循环遍历整个列表来查看你的单词是否在列表中. 就我而言，我在字符串输入中找到了每个组合，并对照哈希图（O(1) 运行时）对其进行了检查。这样，运行时间相对于字符串输入而不是列表输入增长。

6) 检查该词是否未与好词组合使用（例如，bass 包含*ss）。这也是通过电子表格加载的

6）在我们的例子中，我们也将过滤后的单词发布到 Slack，但您显然可以删除该行。

我们在我们自己的游戏中使用它，它就像一个魅力。希望你们喜欢。

[https://pimdewitte.me/2016/05/28/filtering-combinations-of-bad-words-out-of-string-inputs/](https://pimdewitte.me/2016/05/28/filtering-combinations-of-bad-words-out-of-string-inputs/)

```
public static HashMap<String, String[]> words = new HashMap<String, String[]>();

public static void loadConfigs() {
    try {
        BufferedReader reader = new BufferedReader(new InputStreamReader(new URL("https://docs.google.com/spreadsheets/d/1hIEi2YG3ydav1E06Bzf2mQbGZ12kh2fe4ISgLg_UBuM/export?format=csv").openConnection().getInputStream()));
        String line = "";
        int counter = 0;
        while((line = reader.readLine()) != null) {
            counter++;
            String[] content = null;
            try {
                content = line.split(",");
                if(content.length == 0) {
                    continue;
                }
                String word = content[0];
                String[] ignore_in_combination_with_words = new String[]{};
                if(content.length > 1) {
                    ignore_in_combination_with_words = content[1].split("_");
                }

                words.put(word.replaceAll(" ", ""), ignore_in_combination_with_words);
            } catch(Exception e) {
                e.printStackTrace();
            }

        }
        System.out.println("Loaded " + counter + " words to filter out");
    } catch (IOException e) {
        e.printStackTrace();
    }

}

/**
 * Iterates over a String input and checks whether a cuss word was found in a list, then checks if the word should be ignored (e.g. bass contains the word *ss).
 * @param input
 * @return
 */
public static ArrayList<String> badWordsFound(String input) {
    if(input == null) {
        return new ArrayList<>();
    }

    // remove leetspeak
    input = input.replaceAll("1","i");
    input = input.replaceAll("!","i");
    input = input.replaceAll("3","e");
    input = input.replaceAll("4","a");
    input = input.replaceAll("@","a");
    input = input.replaceAll("5","s");
    input = input.replaceAll("7","t");
    input = input.replaceAll("0","o");

    ArrayList<String> badWords = new ArrayList<>();
    input = input.toLowerCase().replaceAll("[^a-zA-Z]", "");

    for(int i = 0; i < input.length(); i++) {
        for(int fromIOffset = 1; fromIOffset < (input.length()+1 - i); fromIOffset++)  {
            String wordToCheck = input.substring(i, i + fromIOffset);
            if(words.containsKey(wordToCheck)) {
                // for example, if you want to say the word bass, that should be possible.
                String[] ignoreCheck = words.get(wordToCheck);
                boolean ignore = false;
                for(int s = 0; s < ignoreCheck.length; s++ ) {
                    if(input.contains(ignoreCheck[s])) {
                        ignore = true;
                        break;
                    }
                }
                if(!ignore) {
                    badWords.add(wordToCheck);
                }
            }
        }
    }

    for(String s: badWords) {
        Server.getSlackManager().queue(s + " qualified as a bad word in a username");
    }
    return badWords;

} 
```**

# iphone - 当我试图移动它时，精灵消失了

> ID：11076244
> 
> 赞同：1
> 
> 时间：2012-06-18T02:05:13.987
> 
> 标签：iphone, objective-c, xcode, cocos2d-iphone, sprite

我试图让我的精灵在触摸时移动，但似乎在触摸时消失然后在第二次触摸时重新出现。我不知道如何解决这个问题，让我的精灵向我点击的方向移动。我一直试图弄清楚这一点，但似乎我不走运。我希望有人能指出我正确的方向。

```
 CGSize winSize = [[CCDirector sharedDirector] winSize];
     player = [CCSprite spriteWithFile:@"Player.png" 
                                       rect:CGRectMake(0, 0, 27, 40)];
     player.position = ccp(player.contentSize.width/2, winSize.height/2);
    [self addChild:player z:1]; 

          (void) registerWithTouchDispatcher
        {
          [[CCTouchDispatcher sharedDispatcher] addTargetedDelegate:self 
                                             priority:0 swallowsTouches:YES];
    }

        -(BOOL) ccTouchBegan:(UITouch *)touch withEvent:(UIEvent *)event
         {
        return YES;

     -(void)setPlayerPosition:(CGPoint)position {
      player.position = position;
    }

     -(void) ccTouchEnded:(UITouch *)touch withEvent:(UIEvent *)event
     {

   CGPoint touchLocation = [touch locationInView: [touch view]];       
    touchLocation = [[CCDirector sharedDirector] convertToGL: touchLocation];
    touchLocation = [self convertToNodeSpace:touchLocation];

    CGPoint playerPos = player.position;
     CGPoint diff = ccpSub(touchLocation, playerPos);
     if (abs(diff.x) > abs(diff.y)) {
         if (diff.x > 0) {
    playerPos.x += contentSize_.width;
} else {
    playerPos.x -= contentSize_.width; 
}    
   } else {
if (diff.y > 0) {
      playerPos.y += contentSize_.height;
} else {
    playerPos.y -= contentSize_.height;
}
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T04:10:44.643

您的触摸功能的语法似乎不同。

试试这个代码

```
- (void) ccTouchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    UITouch *touch = [touches anyObject];
    CGPoint touchLocation = [touch locationInView: [touch view]];       
    touchLocation = [[CCDirector sharedDirector] convertToGL: touchLocation];

    CGPoint playerPos = player.position;

} 
```

# javascript - 我的函数调用不起作用？

> ID：11076245
> 
> 赞同：2
> 
> 时间：2012-06-18T02:05:21.477
> 
> 标签：javascript, jquery

我先写了代码，没有使用函数来原型化，当然，它工作得很好：

```
$(function() {
    $(".PortfolioFade img")
        .mouseover(function() { 
            popup('PORTFOLIO');
            var src = $(this).attr("src").replace("images/paperclip.png", "images/paperclip-black.png");
            /*var src = $(this).attr("src").match(/[^\.]+/) + "-black.png";*/
            $(this).attr("src", src);
        })
        .mouseout(function() {
            ;
            /*var src = $(this).attr("src").replace("images/paperclip-black.png", "images/paperclip.png");
            $(this).attr("src", src); Look at popup.js mouseover events*/ 
        });
    }); 
```

但是，当我以函数形式表达相同的内容时，函数调用似乎不起作用。

```
$(document).ready(function() {
   // put all your jQuery goodness in here.
   $('body').hide().fadeIn(1000);

    function ImageRollover(image_element, popup_name, original, replacement)
{
    $(element)
        .mouseover(function(){
            popup(popup_name);
            var src = $(this).attr("src").replace(original,replacement);
            $(this).attr("src",src);

        })
        .mouseout(function(){
            ;
        });
}

   ImageRollover(".Portfolio img",'PORTFOLIO',"images/paperclip.png","images/paperclip-black.png"); 
 }); 
```

在别处定义函数似乎也没有任何效果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T02:18:27.367

这是你想要达到的目标吗？

```
function ImageRollover(element, popup, original, replacement)
{
    $(element).mouseover(function(){
            //popup(element);
            //var src = $(this).attr("src").replace(original,replacement);
            $(this).attr("src",replacement);

        })
        .mouseout(function(){
            $(this).attr("src",original);
        });
} 
```

[http://jsfiddle.net/SqyDg/](http://jsfiddle.net/SqyDg/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T02:10:49.957

您的函数将第一个变量定义为`image_element`，但您只是`element`在代码中引用它。这很可能是它不起作用的一个因素。

您可能还会遇到`this`函数内部关键字的问题。它所指的对象与原始代码中的对象不同（jQuery 为您设置了 HTML 元素）。在您的函数中，它可能没有设置为任何内容，因此它是指向`window`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-18T02:11:36.883

```
 function ImageRollover(image_element, popup_name, original, replacement)
{
    $(element) 
```

元素在哪里定义？

可能你的意思是：

```
 function ImageRollover(image_element, popup_name, original, replacement)
{
    $(image_element) 
```

# amazon-web-services - 为 CPU 增加百分比设置 aws 自动缩放警报

> ID：11076247
> 
> 赞同：0
> 
> 时间：2012-06-18T02:06:55.000
> 
> 标签：amazon-web-services, amazon-ami, amazon-cloudwatch

我有一个 AWS 自动缩放组。是否可以为 CPU 增加百分比设置警报？例如，如果 CPU 在 1 分钟内增加 40%，是否触发警报？因此，如果 CPU 在 12:51 为 0%，在 12:52 为 40%，则会触发警报。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T13:15:00.143

您可以设置警报以检查一段时间内 CPU 平均值是否大于预定义值。但要检查它是否按百分比增加，您可能需要实施如下所述的自定义指标[亚马逊AWS官方博客](http://aws.typepad.com/aws/2011/05/amazon-cloudwatch-user-defined-metrics.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-26T06:35:11.920

是的，您可以为 的 CPU 平均负载增加设置自定义警报`AWS Auto scaling`。只需按照以下步骤操作。

您可以在`Auto Scaling Groups`选择要为其设置 alam 的组中找到它，进一步点击添加策略，然后单击`Scaling Policies`旁边，根据您的需要为所需的 aws Auto Scaling 实例设置警报，并在您可以设置该警报根据您的需要选择添加、删除或设置选项，您就完成了。当 Auto Scaling 组达到提供的阈值时，它将执行您设置的策略。作为参考，您可以查看 [AWS Docs](http://docs.aws.amazon.com/autoscaling/latest/userguide/policy_creating.html)`Execute policy when:``Create new alarm``Execute policy when:``Take the action:``Scaling Policies`

# php - 带有 curl 或 file_get_contents 的 HTTPS 请求导致 php 崩溃

> ID：11076249
> 
> 赞同：1
> 
> 时间：2012-06-18T02:07:21.193
> 
> 标签：php, https

服务器上的 php 启用了 openssl 扩展（可以在 phpinfo() 中查看）

PHP 版本 5.2.14

> './configure' '--prefix=/usr/local/webserver/php' '--with-config-file-path=/usr/local/webserver/php/etc' '--with-mysql=/usr /lib64/mysql' '--with-mysqli=/usr/bin/mysql_config' '--with-iconv-dir=/usr/local' '--with-freetype-dir' '--with-jpeg-dir ' '--with-png-dir' '--with-zlib' '--with-libxml-dir=/usr' '--enable-xml' '--disable-rpath' '--enable-discard-路径''--enable-safe-mode''--enable-bcmath''--enable-shmop''--enable-sysvsem''--enable-inline-optimization''--with-curl''- -with-curlwrappers' '--enable-mbregex' '--enable-fastcgi' '--enable-fpm' '--enable-force-cgi-redirect' '--enable-mbstring' '--with-mcrypt ''--with-gd''--enable-gd-native-ttf' '--with-openssl' '--with-mhash' '--enable-pcntl' '--enable-sockets' '--with-ldap' '--with- ldap-sasl' '--with-xmlrpc' '--enable-zip' '--enable-soap'

php-fpm.log

> 6 月 18 日 10:03:08.882866 [警告] fpm_stdio_child_said()，第 167 行：子 8665（池默认）在标准错误中说：“”
> 
> 6 月 18 日 10:03:08.884945 [注意] fpm_got_signal()，第 48 行：收到 SIGCHLD
> 
> 6 月 18 日 10:03:08.885008 [警告] fpm_children_bury(), line 215: child 8665 (pool default) 在信号 11 SIGSEGV 上退出 33.717855 秒后开始
> 
> 6 月 18 日 10:03:08.885573 [注意] fpm_children_make(), line 352: child 8689 (pool default) 开始
> 
> 6 月 18 日 10:03:09.689830 [警告] fpm_stdio_child_said()，第 167 行：子 8606（池默认）在标准错误中说：“[2012 年 6 月 18 日星期一 10:03:09”225
> 
> Jun 18 10:03:09.690014 [WARNING] fpm_stdio_child_said(), line 167: child 8606 (pool default) said into stderr: "] [notice] EACCELERATOR(8606): PHP crashed on opline 130 of curl_exec() at xxx.php :383"

但是当通过 HTTPS 请求时，nginx 返回 502 (bad gate way) 错误。

怎么找原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-14T11:19:39.593

前几天遇到一个很像这样的问题，我的系统是Linux CentOS6.2，最后我用的是CentOS 5.6，问题解决了，我想是系统版本和openSSL版本不匹配，
我的英文不太好不错，不过希望对你有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-08T07:01:18.300

这是 libcurl 问题。

确保 libcurl 支持 openssl。

```
checking for SSL support in libcurl... yes
checking for openssl support in libcurl... yes 
```

# javascript - 从选定元素中获取索引

> ID：11076251
> 
> 赞同：0
> 
> 时间：2012-06-18T02:07:36.123
> 
> 标签：javascript, jquery, html, indexing

所以我有一个带有一些子元素的 div，当我用 jQuery 选择一个时，我想在选择器中获取它的索引

```
<div>
  <div class="red"></div>
  <div class="red"></div>
  <div class="red"></div>
  <div class="blue"></div>
  <div class="red"></div>
  <div class="blue"></div>
  <div class="blue"></div>
  <div class="red"></div>
</div> 
```

所以可以说我选择了主 div 中的最后一个元素。如果我在它上面调用 index()，它会给我“7”，因为在所有子元素中，索引是“7”。但是现在假设我想根据其他“红色”元素获取索引，目标是返回值“4”，因为在所有“红色”元素中，它是第五个。我查看了文档并没有找到很多内容，然后我尝试将选择器放入 index() 方法中，例如 index('.red') 但我无法得到任何工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T02:11:29.833

好吧，[文档](http://api.jquery.com/index/)说：

> **`.index( element )`**
> **element**要查找的 jQuery 对象中的 DOM 元素或第一个元素。

所以可以这样做：

```
selectedElements.filter('.red').index(this); 
```

如果您还没有`selectedElements`，您可以选择相应的兄弟姐妹，例如：

```
$(this).parent().children('.red') 
```

如果每个元素只有一个类，那么过滤器可以是动态的：

```
var index = $(this).parent().children('.' + this.className).index(this); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T02:11:42.080

使用[此处](http://api.jquery.com/index/)`.index()`记录的功能

对于上述内容，如果想获取红色类元素的索引，请使用`$('div .red').index(elem);`

`$('div .red)`将在 div 中创建具有红色类的元素列表。将在数组内`.index(elem)`搜索。`elem`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-18T02:17:37.273

使用 id=test 作为父级运行所有这些

演示：http: [//jsfiddle.net/T7fXR/](http://jsfiddle.net/T7fXR/)

```
$('#test > div').each(function(){
    var thisClass=$(this).attr('class');
    $(this).css('background',thisClass );
    /* get index based on class*/
    var idx=$('.'+thisClass).index(this);
    $(this).text('Index= '+idx)

}) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-18T02:12:04.430

对我来说，这适用于您给定的 HTML：

```
$('div').eq(5)​​​​​​​​​​.index('.red') // 3 
```

您可以将选择器放入`.index()`函数中。

# python - haystack 上没有名为查询的模块

> ID：11076253
> 
> 赞同：4
> 
> 时间：2012-06-18T02:08:01.850
> 
> 标签：python, django, django-haystack, pythonpath

我在我的 Windows 计算机上使用 haystack，但我意识到我的 django 应用程序需要其他更容易在 Linux 上安装的模块，所以我使用 Ubuntu 迁移到了 VirtualBox。我在 venv 文件夹中安装了所有带有 virtualenv 的东西。基本上，我的应用程序使用带有 Whoosh 后端的 haystack。在 view.py 上，在导入行上，当我这样做`from haystack.query import SearchQuerySet`时会引发`No module named query`错误。有什么想法可能是错的吗？这是整个错误。我怀疑我在 Python 路径上做错了什么。我在虚拟环境上用 pip 安装了所有东西。

```
Request Method:     GET
Request URL:    http://127.0.0.1:8000/
Django Version:     1.4
Exception Type:     ImportError
Exception Value:    

No module named query

Exception Location:     /home/app/dj/venv/theme/../theme/views.py in <module>, line 10
Python Executable:  /home/app/dj/venv/bin/python
Python Version:     2.7.3
Python Path:    

['/home/app/dj/venv/theme',
 '/home/app/dj/venv/local/lib/python2.7/site-packages/distribute-0.6.24-py2.7.egg',
 '/home/app/dj/venv/local/lib/python2.7/site-packages/pip-1.1-py2.7.egg',
 '/home/app/dj/venv/lib/python2.7/site-packages/distribute-0.6.24-py2.7.egg',
 '/home/app/dj/venv/lib/python2.7/site-packages/pip-1.1-py2.7.egg',
 '/home/app/dj/venv/lib/python2.7',
 '/home/app/dj/venv/lib/python2.7/plat-linux2',
 '/home/app/dj/venv/lib/python2.7/lib-tk',
 '/home/app/dj/venv/lib/python2.7/lib-old',
 '/home/app/dj/venv/lib/python2.7/lib-dynload',
 '/usr/lib/python2.7',
 '/usr/lib/python2.7/plat-linux2',
 '/usr/lib/python2.7/lib-tk',
 '/home/app/dj/venv/local/lib/python2.7/site-packages',
 '/home/app/dj/venv/lib/python2.7/site-packages'] 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-18T06:33:50.710

所以我犯了一个非常愚蠢的错误。我用`pip install haystack`而不是`pip install django-haystack`.

# objective-c - 通过 ABPerson 类 iOS 修改联系人铃声的方法？

> ID：11076254
> 
> 赞同：3
> 
> 时间：2012-06-18T02:08:12.700
> 
> 标签：objective-c, ios, addressbook, abperson

所以我一直在玩 iOS 上的 AddressBook 框架，并注意到在 ABPerson 类中，联系人的几乎每个属性都被列为常量（参考：[Apple 文档](http://developer.apple.com/library/ios/DOCUMENTATION/AddressBook/Reference/ABPersonRef_iPhoneOS/Reference/reference.html)）。但是，我注意到缺少的一个属性是制作自定义铃声的能力。有没有办法通过 ABPerson 类修改联系人的铃声？如果没有，有没有办法使用 AddressBook 框架修改自定义铃声？iOS 5.1.1。

# c++ - std::basic_stringstream 无法使用 MSVC 10 编译

> ID：11076255
> 
> 赞同：8
> 
> 时间：2012-06-18T02:08:21.423
> 
> 标签：c++, visual-c++, unicode, utf-8, stringstream

我试图让 UTF-8 字符与 ANSI 8 位字符共存。我的策略是表示 utf-8 字符，`unsigned char`以便可以为这两种字符类型使用适当的函数重载。

例如

```
 namespace MyStuff
    {
        typedef uchar utf8_t;
        typedef std::basic_string<utf8_t> U8string;
    }
    void SomeFunc(std::string &s);
    void SomeFunc(std::wstring &s);
    void SomeFunc(MyStuff::U8string &s); 
```

在我尝试使用字符串流之前，这一切都很好。

```
 std::basic_ostringstream<MyStuff::utf8_t> ostr;
    ostr << 1; 
```

MSVC Visual C++ Express V10 不会编译这个：

```
c:\program files\microsoft visual studio 10.0\vc\include\xlocmon(213): 
    warning C4273: 'id' : inconsistent dll linkage
    c:\program files\microsoft visual studio 10.0\vc\include\xlocnum(65) : 
            see previous definition of 
            'public: static std::locale::id std::numpunct<unsigned char>::id'
    c:\program files\microsoft visual studio 10.0\vc\include\xlocnum(65) : 
            while compiling class template static data member 'std::locale::id 
            std::numpunct<_Elem>::id'
    with
    [
        _Elem=Tk::utf8_t
    ]
    c:\program files\microsoft visual studio 10.0\vc\include\xlocnum(1149) : 
        see reference to function template instantiation 
        'const _Facet &std::use_facet<std::numpunct<_Elem>>(const std::locale &)' 
        being compiled
    with
    [
        _Facet=std::numpunct<Tk::utf8_t>,
        _Elem=Tk::utf8_t
    ]
    c:\program files\microsoft visual studio 10.0\vc\include\xlocnum(1143) : 
        while compiling class template member function 
        'std::ostreambuf_iterator<_Elem,_Traits> 
        std::num_put<_Elem,_OutIt>::
        do_put(_OutIt,std::ios_base &,_Elem,std::_Bool) const'
    with
    [
        _Elem=Tk::utf8_t,
        _Traits=std::char_traits<Tk::utf8_t>,
        _OutIt=std::ostreambuf_iterator<Tk::utf8_t,std::char_traits<Tk::utf8_t>>
    ]
    c:\program files\microsoft visual studio 10.0\vc\include\ostream(295) : 
        see reference to class template instantiation 'std::num_put<_Elem,_OutIt>' 
        being compiled
    with
    [
        _Elem=Tk::utf8_t,
        _OutIt=std::ostreambuf_iterator<Tk::utf8_t,std::char_traits<Tk::utf8_t>>
    ]
    c:\program files\microsoft visual studio 10.0\vc\include\ostream(281) : 
        while compiling class template member function 
        'std::basic_ostream<_Elem,_Traits> &
        std::basic_ostream<_Elem,_Traits>::operator <<(int)'
    with
    [
        _Elem=Tk::utf8_t,
        _Traits=std::char_traits<Tk::utf8_t>
    ]
    c:\program files\microsoft visual studio 10.0\vc\include\sstream(526) : 
        see reference to class template instantiation 
        'std::basic_ostream<_Elem,_Traits>' being compiled
    with
    [
        _Elem=Tk::utf8_t,
        _Traits=std::char_traits<Tk::utf8_t>
    ]
    c:\users\michael\dvl\tmp\console\console.cpp(23) : 
        see reference to class template instantiation 
        'std::basic_ostringstream<_Elem,_Traits,_Alloc>' being compiled
    with
    [
        _Elem=Tk::utf8_t,
        _Traits=std::char_traits<Tk::utf8_t>,
        _Alloc=std::allocator<uchar>
    ] 
```

.

```
c:\program files\microsoft visual studio 10.0\vc\include\xlocmon(213): 
    error C2491: 'std::numpunct<_Elem>::id' : definition of dllimport 
    static data member not allowed
    with
    [
        _Elem=Tk::utf8_t
    ] 
```

有任何想法吗？

**** 2012 年 6 月 19 日编辑 ****

好的，我已经更接近于理解这一点，但不是如何解决它。

众所周知，静态类变量被定义两次：

*   一次在类定义和
*   一旦在建立存储空间的类定义之外。

例如

```
 // in .h file
    class CFoo
    {
        // ...
        static int x;
    };

    // in .cpp file
    int CFoo::x = 42; 
```

现在在 VC10 头文件中，我们得到如下内容：

```
 template<class _Elem>
    class numpunct : public locale::facet
    {
        // ...
        _CRTIMP2_PURE static locale::id id;
        // ...
    } 
```

当标头包含在应用程序中时，`_CRTIMP2_PURE`定义为`__declspec(dllimport)`，这意味着该变量是从 dll 导入的。

现在标题还包含以下内容

```
 template<class _Elem>
    locale::id numpunct<_Elem>::id; 
```

请注意没有`__declspec(dllimport)`限定符。

即类声明说`id`变量的静态链接在dll中，但对于一般情况，它被声明在dll之外。

对于已知的案例，有专门的。

```
 template locale::id numpunct<char>::id;
    template locale::id numpunct<wchar_t>::id; 
```

它们受`#if`s 保护，因此仅在构建 DLL 时才包含它们。否则它们将被排除在外。

即*numpunct**的`char`和版本在 dll 中`wchar_t`*

所以我们有类定义说 id 的存储在 DLL 中，但这仅适用于`char`和`wchar_t`专业化，这意味着我的 unsigned char 版本注定要失败。:-(

我能想到的唯一方法是创建自己的专业：基本上是从头文件中复制并修复它。这引发了许多问题。

有人有更好的主意吗？

# android - 在 onPause 之前检测方向变化

> ID：11076259
> 
> 赞同：2
> 
> 时间：2012-06-18T02:08:58.443
> 
> 标签：android, android-layout, orientation-changes, android-orientation

我正在`custom Dialog`Activity 方法之外的方法中创建一个`onCreateDialog`。当设备的方向改变时，我得到了许多其他人得到的通常泄漏的窗口错误：

```
06-15 23:47:07.712: E/WindowManager(964): Activity com.betweenthehills.TestVideoPlayerActivity has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@44ef8438 that was originally added here
06-15 23:47:07.712: E/WindowManager(964): android.view.WindowLeaked: Activity com.betweenthehills.TestVideoPlayerActivity has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@44ef8438 that was originally added here 
```

我意识到我需要在 Activity 被销毁之前关闭对话框；但我无法重写 Activity 方法。`onPause>onDestroy`有没有办法在活动周期开始之前检测方向变化？

# python - 是否可以使用 py2neo 遍历所有节点

> ID：11076260
> 
> 赞同：11
> 
> 时间：2012-06-18T02:09:32.327
> 
> 标签：python, neo4j, py2neo

有没有办法使用py2neo遍历neo4j数据库中的每个节点？

我的第一个想法是遍历`GraphDatabaseService`，但这没有用。如果没有办法用 py2neo 做到这一点，是否还有另一个 python 接口可以让我这样做？

**编辑：**我现在接受@Nicholas 的回答，但如果有人能给我一种返回生成器的方法，我会更新它。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-18T14:51:05.710

我建议使用异步 Cypher 执行此操作，例如：

```
 from py2neo import neo4j, cypher

    graph_db = neo4j.GraphDatabaseService()

    def handle_row(row):
        node = row[0]
        # do something with `node` here

    cypher.execute(graph_db, "START z=node(*) RETURN z", row_handler=handle_row) 
```

当然，您可能想要排除参考节点或以其他方式调整查询。

尼日

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-18T02:51:21.280

想到了两种解决方案之一。要么做一个密码查询

```
START n=node(*) return n 
```

另一个，我对 python 不熟悉，所以我将在 Java 中给出示例

```
GlobalGraphOperations.at(graphDatabaseService).getAllNodes() 
```

这是旧的弃用`graphDatabaseService.getAllNodes()`建议的方式。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-02-04T21:46:58.923

对于较新版本的 py2neo，接受的版本不再有效。而是使用：

```
from py2neo import Graph

graph = Graph("http://user:pass@localhost:7474/db/data/")

for n in graph.cypher.stream("START z=node(*) RETURN z"):
    //do something with node here
    print n 
```

# sympy - 用双曲函数简化表达式

> ID：11076263
> 
> 赞同：1
> 
> 时间：2012-06-18T02:10:08.837
> 
> 标签：sympy

sympy 中是否有将 sinh(x)+cosh(x) 简化为 exp(x) 的命令？如果我发出

```
from sympy import *
x = Symbol('x')
(sinh(x)+cosh(x)).simplify() 
```

我只是得到 sinh(x)+cosh(x) 回来，但我想看到 exp(x) 。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T09:46:44.220

Even assuming that the `simplify` function in sympy was very good, what you suggest may not have worked, because what is "simple" is not rigorously defined.

I think what you want is the functionality present in `.rewrite`:

```
In [1]: (sinh(x)+cosh(x)).rewrite(exp)
Out[1]: 
 x
e 
```

You can use `.rewrite` for many other transformations including gamma <-> combinatorics and inverse trig <-> logarithms.

# javascript - javascript块不会运行

> ID：11076269
> 
> 赞同：1
> 
> 时间：2012-06-18T02:11:56.120
> 
> 标签：javascript, firebug

看看这个： ![萤火虫屏幕](../Images/57f57120dc495bdf74cc298fd2ab5851.png) 这是我从萤火虫那里截取的屏幕。我不知道为什么，但是浏览器只是拒绝在带有灰色行号的行内运行代码。上面的断点永远不会到达。没有语法错误，也没有任何警告。我遇到了什么？

编辑：我尝试使用最新的 chrome 和 firefox。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T11:29:26.727

我只是避免在那个地方做，它有效！永远不知道为什么。

# mongodb - 无法锁定 mongodb 文档。如果我需要怎么办？

> ID：11076272
> 
> 赞同：43
> 
> 时间：2012-06-18T02:12:18.743
> 
> 标签：mongodb, repository-pattern

我知道我无法锁定单个 mongodb 文档，实际上也没有办法锁定集合。

但是，我遇到了这种情况，我认为我需要某种方法来防止多个线程（或进程，这并不重要）修改文档。这是我的场景。

我有一个包含 A 类型对象的集合。我有一些代码可以检索 A 类型的文档，在数组中添加一个元素，该元素是文档 ( `a.arr.add(new Thing()`) 的属性，然后将文档保存回 mongodb。这段代码是并行的，我的应用程序中的多个线程可以执行这些操作，现在没有办法阻止线程在同一个文档上并行执行这些操作。这很糟糕，因为其中一个线程可能会覆盖另一个线程的工作。

我确实使用存储库模式来抽象对 mongodb 集合的访问，因此我只有 CRUD 操作可供我使用。

现在我想起来了，也许这是存储库模式的限制，而不是 mongodb 的限制给我带来了麻烦。无论如何，我怎样才能使这段代码“线程安全”？我想这个问题有一个众所周知的解决方案，但是对于 mongodb 和存储库模式是新手，我不会立即看到它。

谢谢

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-06-18T06:20:14.140

嘿，我认为现在唯一的方法是添加一个状态参数并使用操作[findAndModify()](http://www.mongodb.org/display/DOCS/findAndModify+Command)，它使您能够以原子方式修改文档。它有点慢，但应该可以解决问题。

因此，假设您添加了一个状态属性，当您检索文档时，将状态从“IDLE”更改为“PROCESSING”。然后更新文档并将其保存回集合，再次将状态更新为“IDLE”。

代码示例：

```
var doc = db.runCommand({
              "findAndModify" : "COLLECTION_NAME",
              "query" : {"_id": "ID_DOCUMENT", "status" : "IDLE"},
              "update" : {"$set" : {"status" : "RUNNING"} }
}).value 
```

将 COLLECTION_NAME 和 ID_DOCUMENT 更改为适当的值。默认情况下 findAndModify() 返回旧值，这意味着状态值在客户端仍然是 IDLE。因此，当您完成更新时，只需再次保存/更新所有内容。

您需要注意的唯一想法是您一次只能修改一个文档。

希望能帮助到你。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2015-06-24T20:15:59.777

在进行 mongodb 升级时偶然发现了这个问题。与问这个问题时不同，现在 mongodb 支持开箱即用的文档级别锁定。

来自：[http ://docs.mongodb.org/manual/faq/concurrency/](http://docs.mongodb.org/manual/faq/concurrency/)

“MongoDB 中的锁有多精细？

在 3.0 版中更改。

从 3.0 版开始，MongoDB 附带了 WiredTiger 存储引擎，该引擎对大多数读写操作使用乐观并发控制。WiredTiger 仅在全局、数据库和集合级别使用意图锁。当存储引擎检测到两个操作之间的冲突时，会引发写入冲突，导致 MongoDB 透明地重试该操作。”

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-06-18T02:18:00.313

“医生，我这样做的时候*很痛*”

“那就不要那样*做*！”

基本上，您所描述的内容听起来像是您在那里有一个串行依赖项——MongoDB 或其他什么，您的算法有一个必须序列化操作的点。这将是一个固有的瓶颈，如果你绝对必须这样做，你将不得不安排某种信号量来保护它。

所以，要看的地方是你的算法。你能消除它吗？例如，您能否通过某种冲突解决方法来处理它，例如“将记录放入本地更新；存储记录”，以便在存储后新记录将成为该键上的记录？

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-11-23T18:32:57.203

当您想要使某些东西成为线程安全的东西时，经典的解决方案是使用锁（互斥锁）。这也称为*悲观锁定*，而不是[此处](http://docs.mongodb.org/manual/tutorial/isolate-sequence-of-operations/)描述的*乐观锁定*。

在某些情况下，悲观锁定更有效（[此处](https://stackoverflow.com/questions/129329/optimistic-vs-pessimistic-locking)有更多详细信息）。它也更容易实现（乐观锁定的主要困难是从碰撞中恢复）。

MongoDB 不提供锁机制。但这可以在应用程序级别轻松实现（即在您的代码中）：

1.  获取锁
2.  阅读文件
3.  修改文件
4.  写文件
5.  释放锁

锁的粒度可以不同：全局、特定于集合、特定于记录/文档。锁越具体，其性能损失就越小。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-06-18T15:25:11.637

回答我自己的问题，因为我在互联网上进行研究时找到了解决方案。

我认为我需要做的是使用[Optimistic Concurency Control](http://en.wikipedia.org/wiki/Optimistic_concurrency_control)。

它包括为每个文档添加时间戳、哈希或其他唯一标识符（我将使用 UUID）。每次修改文档时都必须修改唯一标识符。在更新文档之前，我会做这样的事情（在伪代码中）：

```
var oldUUID = doc.uuid;
doc.uuid = new UUID();
BeginTransaction();
if (GetDocUUIDFromDatabase(doc.id) == oldUUID)
{
   SaveToDatabase(doc);
   Commit();
}
else
{
   // Document was modified in the DB since we read it. We can't save our changes.
   RollBack();
   throw new ConcurencyException();
} 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2016-02-26T14:22:17.683

**更新：** MongoDB 3.2.2 使用 WiredTiger 存储实现作为默认引擎，MongoDB 在文档级别使用默认锁定。它是在 3.0 版中引入的，但在 3.2.2 版中是默认的。因此 MongoDB 现在有文档级锁定。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2018-12-16T06:49:42.887

从 4.0 开始，MongoDB 支持副本集的[事务](https://docs.mongodb.com/manual/core/transactions/)。MongoDB 4.2 将支持分片集群。使用事务，如果发生写入冲突，数据库更新将被中止，从而解决您的问题。

事务在性能方面的成本要高得多，所以不要将事务作为糟糕的 NoSQL 模式设计的借口！

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2012-10-07T09:07:40.247

另一种方法是[就地更新](http://www.mongodb.org/display/DOCS/Updating#Updating-ModifierOperations)

例如：

[http://www.mongodb.org/display/DOCS/Updating#comment-41821928](http://www.mongodb.org/display/DOCS/Updating#comment-41821928)

```
db.users.update( { level: "Sourcerer" }, { '$push' : { 'inventory' : 'magic wand'} }, false, true ); 
```

这会将“魔杖”推入所有“Sourcerer”用户的库存数组。对每个文档/用户的更新是原子的。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2014-04-03T15:17:03.460

如果您的系统具有 > 1 个服务器，那么您将需要一个分布式锁。

我更喜欢使用[Hazelcast](http://www.hazelcast.com/)。

在保存时，您可以通过实体 id 获取 Hazelcast 锁，获取和更新数据，然后释放锁。

例如： [https ://github.com/azee/template-api/blob/master/template-rest/src/main/java/com/mycompany/template/scheduler/SchedulerJob.java](https://github.com/azee/template-api/blob/master/template-rest/src/main/java/com/mycompany/template/scheduler/SchedulerJob.java)

只需使用`lock.lock()`而不是`lock.tryLock()`

在这里你可以看到如何在你的 spring 上下文中配置 Hazelcast：

[https://github.com/azee/template-api/blob/master/template-rest/src/main/resources/webContext.xml](https://github.com/azee/template-api/blob/master/template-rest/src/main/resources/webContext.xml)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-04-06T16:53:35.460

我没有在另一个问题中写这个问题，而是尝试回答这个问题：我想知道这个 WiredTiger Storage 是否会处理我在这里指出的问题： [Limit inserts in mongodb](https://stackoverflow.com/questions/43248677/limit-inserts-in-mongodb)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-03-21T02:53:34.290

如果数组中元素的顺序对您来说并不重要，那么[$push](https://docs.mongodb.com/manual/reference/operator/update/push/)运算符应该足够安全，以防止线程覆盖彼此的更改。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-04-20T15:03:21.510

我有一个类似的问题，我有同一个应用程序的多个实例，这些实例将从数据库中提取数据（顺序无关紧要；所有文档都必须更新 - 高效），处理它并写回结果。然而，在没有任何锁定的情况下，所有实例显然都提取了相同的文档，而不是智能地分配他们的劳动力。

我试图通过在应用程序级别上实现锁定来解决它，这将`locked`在当前正在编辑的相应文档中添加一个 -field，这样我的应用程序的其他实例就不会选择相同的文档并通过执行来浪费时间与其他实例相同的操作。

但是，当运行我的应用程序的数十个或更多实例时，读取文档（使用`find()`）和将`locked`-field 设置为`true`（使用`update()`）where to long 之间的时间跨度仍然从数据库中提取相同的文档，这让我想到了加速使用多个实例进行工作毫无意义。

以下 3 条建议可能会根据您的情况解决您的问题：

1.  使用`findAndModify`() 因为使用该函数的读写操作是原子的。从理论上讲，您的应用程序的一个实例所请求的文档应该对其他实例显示为已锁定。并且当文档被解锁并且再次对其他实例可见时，它也会被修改。

2.  但是，如果您需要在`find()`读写`update()`操作之间做其他事情，您可以使用[transactions](https://docs.mongodb.com/manual/core/transactions/)。

3.  或者，如果这不能解决您的问题，那么一些简单的解决方案（可能就足够了）使应用程序大批量提取文档，并使每个实例从该批次中选择一个随机文档并对其进行处理。显然，这种阴暗的解决方案是基于巧合不会影响您的应用程序的效率这一事实。

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2012-10-30T07:50:35.683

听起来您想使用 MongoDB 的原子运算符：[http ://www.mongodb.org/display/DOCS/Atomic+Operations](http://www.mongodb.org/display/DOCS/Atomic+Operations)

# android - 将android客户端连接到C服务器

> ID：11076281
> 
> 赞同：0
> 
> 时间：2012-06-18T02:14:07.473
> 
> 标签：android, client

我无法将我的 android 客户端连接到我编写的 C 服务器。我发现另一个有类似问题的线程，但不幸的是它被关闭了，说它太窄了。我希望有人可以在这里回答，因为这也与我有关，而且我可以在网上找到的所有示例代码都只有 android 客户端连接到 android 服务器。我的客户端代码如下：

```
package edu.upenn.seas.cis542;

import java.io.BufferedWriter;
import java.io.OutputStreamWriter;
import java.io.PrintWriter;
import java.net.InetAddress;
import java.net.Socket;

import android.app.Activity;
import android.app.AlertDialog;
import android.os.Bundle;
import android.os.Debug;
import android.os.Handler;
import android.util.Log;
import android.view.Gravity;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;
import android.widget.Toast;

public class Try_uiActivity extends Activity
{

//private EditText serverIp;
private Button connectPhones;
private String serverIpAddress = "MY IP ADDRESS";
private boolean connected = false;
private Handler handler = new Handler();
final int SERVERPORT = 8080;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    //NumberPicker t1 = (NumberPicker)findViewById(R.id.numberPicker3);
    //t1.setRange(1, 5);
    setContentView(R.layout.main);

}

/*
 * When the Submit button is clicked, this method
 * gets called.
 */  

public void onSubmitClick(View view) {

    int item1, item2, item3;

    NumberPicker t1 = (NumberPicker)findViewById(R.id.numberPicker1);
    item1 = t1.getCurrent();

    NumberPicker t2 = (NumberPicker)findViewById(R.id.numberPicker2);
    item2 = t2.getCurrent();

    NumberPicker t3 = (NumberPicker)findViewById(R.id.numberPicker3);
    item3 = t3.getCurrent();

    String userInput = "" + item1 + item2 + item3;

    //Log.out("Before connecting");

    if (!connected) {
        try {
            InetAddress serverAddr = InetAddress.getByName(serverIpAddress);

            Toast toast=Toast.makeText(this, serverAddr.toString(), Toast.LENGTH_LONG);
            toast.setGravity(Gravity.CENTER, 0, 0);
            toast.show();

            Socket socket = new Socket(serverAddr, SERVERPORT);
            connected = true;
        } catch (Exception e) {
            Toast toast=Toast.makeText(this, "Error2", Toast.LENGTH_LONG);
            toast.setGravity(Gravity.CENTER, 0, 0);
            toast.show();

            e.printStackTrace();

            connected = false;
        }
    }
}

} 
```

我省略了连接后我想做的事情，因为仅仅创建套接字已经给我一个错误。我的 C 服务器在 android 程序连接的同一端口上打开一个连接。当我使用 java 客户端文件测试服务器时，它运行良好。有谁知道解决这个问题？我还向 Android Manifest 添加了权限，但这并没有解决问题。谢谢！

# java - 经常需要调整比较器的 PriorityQueue - 我如何最好地处理这个？

> ID：11076286
> 
> 赞同：0
> 
> 时间：2012-06-18T02:15:57.300
> 
> 标签：java, priority-queue, comparator, dijkstra

我正在使用 PriorityQueue 为大学研究 Dijkstra 算法来存储我的图形的剩余顶点，按最短遍历距离排序。我使用的比较器：

```
class DistanceComparator implements Comparator<Integer> {
    int[] dist; 
    public DistanceComparator(int[] d) {
        dist = d;
    }

    @Override
    public int compare(Integer i, Integer j)
    {
        if((dist[i]-dist[j]) < 0) { 
            return -1;
        }
        if((dist[i]-dist[j]) > 0) { 
            return  1;
        }
        return 0;
    }
} 
```

现在我面临的问题是距离在变化，所以我的队列的比较器需要经常更新。

```
static PriorityQueue<Integer> refreshQueue(int[] d) {
    Comparator<Integer> comp = new DistanceComparator(d);
    PriorityQueue<Integer> q = new PriorityQueue<Integer>(adj.length, comp);
    for(int i = 0; i < adj.length; i++) {
        q.add(i);
    }
    return q;
} 
```

这可以解决问题，但是它也会使所需的运行时紧张`O(num Edges*log(num Vertices))`。

我怎样才能消除每次调整比较器的需要？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T02:18:22.000

在 Java 中实现 Dijkstra 算法的传统方式是创建一个包含节点和距离的单独类：

```
class Dist implements Comparable<Dist> {
  final int vertex;
  final int distance;

  public int compareTo(Dist other) {
    return Integer.compare(distance, other.distance);
  }
} 
```

并将*它们*放入您的优先队列。

你最终会得到`Dist`反映次优路径的过期对象，但只有在你已经看到“最优”路径之后，所以只需忽略你已经从优先级队列中取出的顶点。

基本上，不要更改`Comparator`: 更改正在比较的对象。

# c# - 将包含字节的 ASCII 表示形式的文件转换为实际字节 C# .NET 的最佳方法

> ID：11076289
> 
> 赞同：1
> 
> 时间：2012-06-18T02:17:00.480
> 
> 标签：c#, .net

我有一个包含一些数据的文件（例如，“00927E2B112DB958……”）。该数据是 ASCII 格式的字节表示。字节为 8 位，因此 2 个 ASCII 字符映射到需要进入最终输出缓冲区数组的每个字节。

做这个的最好方式是什么？

编辑：例如，我要做的是从看起来像“00DFFF”的字符串到 {0x00, 0xDF, 0xFF} 的字节数组。我想这还不清楚。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-18T02:21:53.307

```
private ICollection<byte> HexString2Ascii(string hexString)
{
    var bytes = new List<byte>(hexString.Length / 2);
    for (int i = 0; i <= hexString.Length - 2; i += 2)
        bytes.Add(byte.Parse(hexString.Substring(i, 2), System.Globalization.NumberStyles.HexNumber));
    return bytes;
} 
```

# java - 字符串输出只返回一个单词

> ID：11076291
> 
> 赞同：2
> 
> 时间：2012-06-18T02:17:30.567
> 
> 标签：java, java.util.scanner

这个程序运行得很好，但由于某种原因，当我要求输入名称时，它只会保存响应中的第一个单词。例如，如果我稍后将其用于输出时输入“Jon Snow”，它将仅显示“Jon”。

```
import java.util.Scanner;

public class help 
{
public static void main (String[] args)
{
    Scanner input = new Scanner(System.in); //object for user input

    //constant
    final double tax = 0.08; //Sales tax

    //variables
    int choice;                 //menu selection/case switch
    String name;                //customer's name   
    String address;             //customer's address
    String email;               //customer's email address
    String item;                //item purchased
    double itemsPurchased;      //number of items purchased
    double itemPrice;           //price of item purchased
    double total;               //total for purchase
    double grandTotal;          //total + tax
    double taxAmount;           //tax of the purchase

    //Menu
    System.out.println("1\. Enter Customer Information");
    System.out.println("2\. Display Total Bill");
    System.out.println("3\. Quit\n");                            
    System.out.print("Enter 1, 2, or 3 to make your selection: ");
    choice = input.nextInt();

    switch(choice){

    //Customer info

    case 1:

        //inputting info
        System.out.println("\nPlease enter the customers information.");

        //name
        System.out.print("Name: "); 
        name = input.next();
        input.nextLine();                                           

        //address
        System.out.print("Address: ");
        address = input.nextLine();

        //email
        System.out.print("Email Adress: ");
        email = input.next();
        input.nextLine();                                           

        //reading info back to user
        System.out.println("\nThe customer has successfully been added to our list with the following information: ");
        System.out.println("Name: " + name);
        System.out.println("Address: " + address);
        System.out.println("Emal: " + email);
        break;                      

    //Customer receipt  

    case 2:

        //name
        System.out.println("");                                     
        System.out.print("Enter customer's name: ");
        name = input.next();
        input.nextLine();                                           

        //name of item purchased
        System.out.print("Enter item purchased: ");
        item = input.next();
        input.nextLine();                                           

        //number of items purchased
        System.out.print("Number of items purchased: ");
        itemsPurchased = input.nextDouble();
        input.nextLine();                                           

        //price of item
        System.out.print("Price of item: ");
        itemPrice = input.nextDouble();
        input.nextLine();                                           

        //defining taxAmount, total, and grandTotal
        total = (itemPrice * itemsPurchased);
        taxAmount = (total*tax);
        grandTotal = total + taxAmount;

        //bill

        System.out.println("");                                                                         
        System.out.println(name);
        System.out.println("");                                                                         
        System.out.printf("%-20s %-15s %-15s\n", "Product Purchased", "Quantity", "Total Cost");            
        System.out.println("");
        System.out.printf("%-20s %-15s %-15s\n", item, itemsPurchased, total);
        System.out.println("");                                                                         
        System.out.printf("%-20s %-15s %-15s\n", "Tax(@8%):", "", taxAmount);
        System.out.printf("%-20s %-15s %-15s\n", "Total Cost:", "", grandTotal);

        break;                      

    //Quit

    case 3:

        System.out.println("End Program");
        break; //void

    //Default statement

    default:
        System.out.print("Invalid value entered.");

    }//end case

}//end main

}//end class 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-18T02:19:43.137

```
name = input.nextLine() 
```

您没有阅读整行，而只是阅读第一个单词。

对于`Scanner`该类，该`next()`函数读取下一个标记化输入，同时`nextLine()`检索整行，直到回车 ( `\n`)。

```
Eg. "happy days again"
next() // "happy"
next() // "days"
next() // "again"

or,

nextLine() // "happy days again" 
```

**编辑：试试下面的代码**

```
input.nextLine(); // IMP: To get the carriage return after choice is typed
//name
System.out.println("");                                     
System.out.print("Enter customer's name: ");
name = input.nextLine();                                           

//name of item purchased
System.out.print("Enter item purchased: ");
item = input.nextLine(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T02:32:58.720

试试这个，

Using`next()`会给你`1st Word`，但如果你想要`whole line use nextLine()`.

```
name = input.nextLine(); 
```

例如：

```
 Scanner scan = new Scanner(System.in);
   name = input.nextLine(); 
```

# java - 我怎样才能让这段代码（来自关于套接字的 Java 教程）运行？

> ID：11076303
> 
> 赞同：2
> 
> 时间：2012-06-18T02:19:22.750
> 
> 标签：java, sockets

我**刚刚**开始学习本教程的这一部分。我只对端口是什么等有一个基本的了解。

我试图运行这段代码：

```
import java.io.*;
import java.net.*;

public class EchoClient {
    public static void main(String[] args) throws IOException {

        Socket echoSocket = null;
        PrintWriter out = null;
        BufferedReader in = null;

        try {
            echoSocket = new Socket("taranis", 7);
            out = new PrintWriter(echoSocket.getOutputStream(), true);
            in = new BufferedReader(new InputStreamReader(
                                        echoSocket.getInputStream()));
        } catch (UnknownHostException e) {
            System.err.println("Don't know about host: taranis.");
            System.exit(1);
        } catch (IOException e) {
            System.err.println("Couldn't get I/O for "
                               + "the connection to: taranis.");
            System.exit(1);
        }

        BufferedReader stdIn = new BufferedReader(
                               new InputStreamReader(System.in));
        String userInput;

    while ((userInput = stdIn.readLine()) != null) {
        out.println(userInput);
        System.out.println("echo: " + in.readLine());
    }

    out.close();
    in.close();
    stdIn.close();
    echoSocket.close();
    }
} 
```

* * *

“不知道主机：taranis。Java 结果：1”

是我得到的错误捕获。根据我有限的理解；回声服务器是我机器上存在的东西吗？如果是这种情况，我需要做什么才能让它运行？还是我走远了？还有为什么他们选择“taranis”作为参数？

我还用“localhost”替换了“taranis”，看看发生了什么。这次它最终捕获了 IOException。

编辑：所以我发现在win7中默认禁用回显服务器并激活它。但是我什至无法在 telnet 上连接到它。我想我可能只是在我的头上。我也试过你推荐的插座，但没有成功。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T02:35:38.733

从同一个教程：

> ...这里使用的 Socket 构造函数需要机器的名称和要连接的端口号。示例程序使用主机名 taranis。这是我们本地网络上的假设机器的名称。当您在您的机器上输入并运行此程序时，请将主机名更改为您网络上的机器的名称。确保您使用的名称是您要连接的机器的完全限定 IP 名称。第二个参数是端口号。端口号 7 是 Echo 服务器侦听的端口。

在任何情况下，您都可能希望将 taranis 更改为`"localhost"`并确保在您的计算机上运行 echo 服务。如果不是，您可以使用类似以下代码的代码来模拟回显服务器。

```
import java.net.Socket;
import java.util.Formatter;
import java.util.Scanner;
import java.io.IOException;
import java.net.ServerSocket;
import java.util.ArrayList;
import java.util.concurrent.ExecutorService;
import java.util.concurrent.Executors;

public class EchoServer {

    public static void main(String[] args) {
        try {
            new EchoServer(INSERTPORT).execute();
        } catch (IOException e) {
            e.printStackTrace();
            System.exit(1);
        }
    }

    private ServerSocket serverSocket;
    private int port;

    private ArrayList<Client> clientList;
    private ExecutorService clientRunner;

    public EchoServer(int port) throws IOException {
        this.port = port;
        serverSocket = new ServerSocket(port);
        clientRunner = Executors.newCachedThreadPool();
        clientList = new ArrayList<>();
    }

    public void sendMessageToAll(String message) {
        for (Client c : clientList) {
            c.displayMessage(message);
        }
    }

    public void execute() throws IOException {
        while (true) {
            clientList.add(new Client(serverSocket.accept(), this));
            clientRunner.execute(clientList.get(clientList.size()-1));
        }
    }
    private class Client implements Runnable {

        private Socket clientSocket;
        private Scanner input;
        private Formatter output;

        public Client(Socket s) throws IOException {
            clientSocket = s;

            input = new Scanner(clientSocket.getInputStream());
            output = new Formatter(clientSocket.getOutputStream());
        }

        public void displayMessage(String s) {
            output.format(s + "\n");
            output.flush();
        }
        @Override
        public void run() {
            while(clientSocket.isConnected()) {
                if(input.hasNextLine()) {
                    sendMessageToAll(input.nextLine());
                }
            }
        }
    }
} 
```

编辑：为了完整起见，正如您提到运行代码的一些问题，您运行服务器（此代码）并使其在后台运行，然后运行客户端（您发布的代码）。我测试过，效果很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T02:39:06.063

试试这个，

1.  使用**127.0.0.1 的环回地址**而不是 taranis。

2.  使用**高于 1024 的端口**，例如 4444、8333 等......

我还添加了我用来学习客户端服务器通信的代码

客户端代码：

```
public class ClientWala {

    public static void main(String[] args) throws Exception{

        Boolean b = true;
    Socket s = new Socket("127.0.0.1", 4444);

    System.out.println("connected: "+s.isConnected());

    OutputStream output = s.getOutputStream();
    PrintWriter pw = new PrintWriter(output,true);

    // to write data to server
    while(b){

        if (!b){

             System.exit(0);
        }

        else {
            pw.write(new Scanner(System.in).nextLine());
        }
    }

    // to read data from server
    InputStream input   = s.getInputStream();
    InputStreamReader isr = new InputStreamReader(input);
    BufferedReader br = new BufferedReader(isr);
    String data = null;

    while ((data = br.readLine())!=null){

        // Print it using sysout, or do whatever you want with the incoming data from server

    }

    }
} 
```

服务器端代码：

```
public class ServerTest {

    ServerSocket s;

    public void go() {

        try {
            s = new ServerSocket(44457);

            while (true) {

                Socket incoming = s.accept();
                Thread t = new Thread(new MyCon(incoming));
                t.start();
            }
        } catch (IOException e) {

            e.printStackTrace();
        }

    }

    class MyCon implements Runnable {

        Socket incoming;

        public MyCon(Socket incoming) {

            this.incoming = incoming;
        }

        @Override
        public void run() {

            try {
                PrintWriter pw = new PrintWriter(incoming.getOutputStream(),
                        true);
                InputStreamReader isr = new InputStreamReader(
                        incoming.getInputStream());
                BufferedReader br = new BufferedReader(isr);
                String inp = null;

                boolean isDone = true;

                System.out.println("TYPE : BYE");
                System.out.println();
                while (isDone && ((inp = br.readLine()) != null)) {

                    System.out.println(inp);
                    if (inp.trim().equals("BYE")) {
                        System.out
                                .println("THANKS FOR CONNECTING...Bye for now");
                        isDone = false;
                        s.close();
                    }

                }
            } catch (IOException e) {
                // TODO Auto-generated catch block
                try {
                    s.close();
                } catch (IOException e1) {
                    // TODO Auto-generated catch block
                    e1.printStackTrace();
                }
                e.printStackTrace();
            }

        }

    }

    public static void main(String[] args) {

        new ServerTest().go();

    }

} 
```

# c# - 在 C# 中单击文本框的 WPF 事件

> ID：11076307
> 
> 赞同：1
> 
> 时间：2012-06-18T02:19:56.130
> 
> 标签：c#, wpf

单击文本框时如何引发事件？我在 C# 中找不到 WPF 事件的引用。

这个想法是让文本框在单击时触发一个事件。例如，假设我一单击文本框，便执行记事本。

```
 private void textBox1_TextChanged(object sender, TextChangedEventArgs e)
 {
     hello = Process.Start("notepad");   
 }
 private void Click(object sender, MouseButtonEventArgs e)
 {    
     /* if (e.LeftButton == MouseButtonState.Pressed)
     {
         hello = Process.Start(@"notepad");                
     }*/           
 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T02:25:51.793

对于文本事件，使用 TextInput 事件并从 e.Text 读取输入的字符

```
private void yourTextBox_TextInput(object sender, TextCompositionEventArgs e)
{  
    if (e.Text == "K")
    {
    }
} 
```

鼠标事件使用 MouseDown/MouseUp

有时 MouseDown/MouseUp 在 TextBox 上不起作用，然后使用这个：

[http://msdn.microsoft.com/en-us/library/system.windows.uielement.previewmouseup.aspx](http://msdn.microsoft.com/en-us/library/system.windows.uielement.previewmouseup.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T04:24:31.327

单击文本框时可以引发 MouseLeftButtonDown 事件。默认情况下，此事件不会在文本框上触发。我们需要使用 UIElement.AddHandler()。

例如：

### XAML：

```
<Textbox X:Name="Name_Textbox" MouseLeftButtonDown="Name_Textbox_MouseLeftButtonDown"/> 
```

### 在类构造函数中：

```
TextBox_Name.AddHandler(FrameworkElement.MouseLeftButtonDownEvent, new MouseButtonEventHandler("Name_Textbox_MouseLeftButtonDown"), true); 
```

### 在类文件中添加事件：

```
private void Name_Textbox_MouseLeftButtonDown(object sender, MouseButtonEventArgs e)  
{
   // Your logic on textbox click
} 
```

# mobile - 蓝牙磁条读卡器和打印机

> ID：11076308
> 
> 赞同：0
> 
> 时间：2012-06-18T02:19:57.067
> 
> 标签：mobile, printing, bluetooth

我找到了这个很棒的工具[http://www.chargeanywheredirect.com/bluetooth-credit-card-reader-printer.html](http://www.chargeanywheredirect.com/bluetooth-credit-card-reader-printer.html)，但我不确定我是否可以用它来制作我自己的移动应用程序因为他们没有公共 api .

如果有人更好地了解此设备或知道任何人有什么相同的功能（读卡和打印）。请帮帮我谢谢！。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T01:28:06.997

Star Micronics 有一个适用于 Android 和 iOS 的打印 SDK。读卡是功能之一。您可以在此处下载：http: [//www.starmicronics.com/support/SDKDocumentation.aspx](http://www.starmicronics.com/support/SDKDocumentation.aspx)。

# javascript - 可以从 Google Chrome 的设置面板中的地址栏（书签）运行 Javascript 吗？

> ID：11076309
> 
> 赞同：5
> 
> 时间：2012-06-18T02:20:02.653
> 
> 标签：javascript, google-chrome, bookmarklet

我想制作一个小书签来打开 google chrome 的设置面板并通过单击清除我的缓存。

有一段时间，我有一个书签，可以打开 chrome 的设置面板，并且已经选择了“清除缓存”设置。单击书签（通常在新选项卡中打开它）后，我必须打开选项卡并提交表单。然而，当开发这是一项我必须经常做的任务时，这几个重复的步骤似乎没有必要。

此链接打开页面以清除缓存（显然仅适用于 Chrome 用户）：chrome://chrome/settings/clearBrowserData#cache

我最近发现了书签工具，并认为这是完成单击清除缓存任务的好方法。但是，我发现在设置页面（上面链接）时，即使是在地址栏中放置一个基本的 javascript 示例也无法正常工作。

例如，这适用于任何给定页面的地址栏中，但不适用于 chrome 设置页面：

```
javascript:alert('hello stackoverflow'); 
```

有没有办法从 chrome 设置页面执行 javascript？还有其他选择吗？我正在寻找实现这一目标的任何途径，并且很想在此过程中学到一些东西，即使这意味着做一些坏事。:)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-14T08:54:55.627

添加书签：

```
javascript:document.write('<form onsubmit="window.open(\'javascript:\'+js_line.value, \'target\');return false;">javascript:<input type=text name=js_line style="width:90%;"/></form><iframe src="" name="target" style="width:100%;height:90%;"/>'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-05T20:59:27.543

您想要的东西可能无法通过小书签完全实现，但通过 Chrome 应用程序肯定可以实现。已经有一个应用程序[清除缓存](https://chrome.google.com/webstore/detail/clear-cache/cppjkneekbjaeellbfkmgnhonkkjfpdn/)。我觉得它非常有用。

# cell - fpdf单元格内的斜体字

> ID：11076310
> 
> 赞同：1
> 
> 时间：2012-06-18T02:20:09.253
> 
> 标签：cell, fpdf

有什么办法可以将 $this->Cell(0,3,'Hello, my name is (italicized) John Doe.',0,1,'C') 中的某些单词斜体化；我只需要强调“John Doe”这个名字，而不是整个句子。请帮忙。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T19:57:08.737

不幸的是**，您不能**仅使用 FPDF 函数直接执行此操作。你需要在这里编写一个新函数`Cell()`，用一些新参数重新创建......

但是等等……**有人已经这样做了！**

在这里：[Pascal Morin 的 FPDF 插件](http://www.fpdf.org/fr/script/script23.php)

这是一项很棒的工作，你甚至不需要别的东西！:)

# javascript - 如何在 Node.js 中读取非常大（> 1GB）的 tar.gz 文件？

> ID：11076311
> 
> 赞同：12
> 
> 时间：2012-06-18T02:20:09.573
> 
> 标签：javascript, file, node.js, file-io, filestream

我以前从来没有这样做过，所以这可能是非常基本的事情，但我想我还是会问。

在 Node.js 中读取一个非常大的文件的正确方法是什么？假设文件太大而无法一次读取。还说文件可以以 a`.zip`或`.tar.gz`格式出现。

第一个问题，最好先解压缩文件并将其保存到磁盘（我现在在 Mac 上使用 Stuffit 来执行此操作），然后使用该文件？或者您可以直接从压缩`.zip`或`.tar.gz`版本中读取 IO 流吗？我想你需要知道压缩文件中内容的格式，所以你可能需要解压缩（刚刚发现这个`.tar.gz`文件实际上是一个`.dat`文件）......

那么主要问题是，如何在 Node.js 中读取这个大文件？假设它是一个 1GB 的 XML 文件，我应该从哪里开始解析它？（不是，如何解析 XML，但如果您正在逐行读取大文件，您如何解析需要了解前几行上下文的 XML 之类的内容）。

我见过[`fs.createReadStream`](http://nodejs.org/docs/v0.6.18/api/fs.html#fs_fs_createreadstream_path_options)，但我害怕乱来......不想爆炸我的电脑。只是在正确的方向上寻找一些指示。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-18T04:35:27.220

有用于流解压的内置[zlib](http://nodejs.org/api/zlib.html)模块和用于流 XML 解析的[sax](https://github.com/isaacs/sax-js)

```
var fs = require('fs');
var zlib = require('zlib');
var sax = require('sax');

var saxStream = sax.createStream();
// add your xml handlers here

fs.createReadStream('large.xml.gz').pipe(zlib.createUnzip()).pipe(saxStream); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-04-05T09:41:30.353

我们还可以压缩目录，如下所示：

```
var spawn = require('child_process').spawn;
var pathToArchive = './very_large_folder.tar.gz';
var pathToFolder = './very_large_folder';

var tar = spawn('tar', ['czf', pathToArchive, pathToFolder]);
tar.on('exit', function (code) {
        if (code === 0) {
                console.log('completed successfully');
        } else {
                console.log('error');
        }
}); 
```

这很好用:)

# haskell - .cabal 文件语法的完整定义

> ID：11076314
> 
> 赞同：27
> 
> 时间：2012-06-18T02:20:51.507
> 
> 标签：haskell, cabal

我已经广泛搜索，虽然我可以找到许多 cabal 文件的示例以及很好的教程，但我希望为 .cabal 文件格式提供正确的语法定义。唉，我一直没能找到它。最近的 cabal 文档只提到它的文件格式是向后兼容的——没有指向它兼容的“原始”格式的链接！没用处。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-18T11:54:02.567

> .cabal 文件格式的正确语法定义。

语法由[它的解析器](https://github.com/ghc/packages-Cabal/blob/d5e2bafe3f2d0a0a826205efaa168cf1b558d932/Cabal/Distribution/PackageDescription/Parse.hs#L639)定义。我不知道正式的规范。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-06-24T14:01:01.387

这是你想要的吗？

[分发包描述](https://downloads.haskell.org/~ghc/7.0.2/docs/html/libraries/Cabal/Distribution-PackageDescription.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-01-30T02:06:42.090

字段列表，无论是否需要，以及其中的内容都在这里[https://www.haskell.org/cabal/users-guide/developing-packages.html#package-properties](https://www.haskell.org/cabal/users-guide/developing-packages.html#package-properties)。

我必须承认，这不是最明显的地方。

# r - 如何在ggplot中制作融化的数据集灰度

> ID：11076315
> 
> 赞同：1
> 
> 时间：2012-06-18T02:21:15.680
> 
> 标签：r, ggplot2

这应该是一个非常简单的问题。我有以下代码，它形成了我想要的情节：

```
library(reshape)
library(ggplot2)
require(ggplot2)
split1_data<-structure(list(Loci = structure(1:8, .Label = c("Baez", "Blue", 
"C147", "C204", "C21", "C278_PT", "C294", "C316"), class = "factor"), 
    All = c(0.3357, 0.4166, 0.0242, 0.9708, 0.4518, 0.0666, 0, 
    0.5925), X1_only = c(0.4758, 0.3188, 0.1465, 0.3209, 1, 0.0278, 
    0.2065, 0.6187), X78_only = c(0.3379, 0.4102, 0.2134, 0.6807, 
    0.8242, 1, 0.0046, 0.279), X8_removed = c(0.0967, 0.5831, 
    0.058, 0.9268, 0.3518, 0.0629, 0, 0.6229), X8_only = c(0.1169, 
    0.8327, 0.2169, 0.0907, 1, 1, 0.07, 0.486), X7_removed = c(0.2989, 
    0.7268, 0.0087, 0.8874, 0.5853, 0.0568, 0, 0.7622), X7_only = c(1, 
    0.5714, 0.2825, 0.8673, 0.5557, 0.6861, 0.0044, 0.1146), 
    X5_removed = c(1, 0.1453, 0.0176, 0.8428, 0.2277, 0.2563, 
    0, 0.5326), X5_only = c(0.0642, 0.631, 0.5193, 0.979, 0.5348, 
    0.1304, 0.02, 0.0217), X4_removed = c(0.4492, 0.3821, 0.0121, 
    0.9957, 0.5158, 0.0498, 0, 0.718), X4_only = c(0.6485, 0.0709, 
    0.1639, 0.6908, 1, 1, 0.4469, 0.639), X3_removed = c(0.3009, 
    0.3414, 0.02, 0.9935, 0.4216, 0.1273, 0, 0.6406), X3_only = c(1, 
    0.9325, 0.772, 0.5505, 1, 0.2068, 0.0829, 0.17), X2_removed = c(0.6335, 
    0.349, 0.2095, 0.9777, 0.8928, 0.0571, 0, 0.4285), X2_only = c(0.191, 
    0.4397, 0.0403, 0.3606, 0.0089, 1, 0.0033, 0.659), X1_removed = c(0.1653, 
    0.7658, 0.0718, 0.7705, 0.4193, 0.1894, 0, 0.5167)), .Names = c("Loci", 
"All", "X1_only", "X78_only", "X8_removed", "X8_only", "X7_removed", 
"X7_only", "X5_removed", "X5_only", "X4_removed", "X4_only", 
"X3_removed", "X3_only", "X2_removed", "X2_only", "X1_removed"
), row.names = c(NA, 8L), class = "data.frame")

split1_datam<-melt(split1_data,id="Loci")

p1<- ggplot(split1_datam, aes(x =Loci, y = value, color = variable, width=.15)) +  
         scale_fill_grey() + 
         geom_bar(position="dodge")+ 
         geom_hline(yintercept=0.05)+ 
         opts(axis.text.x  = theme_text(angle=90, size=8)) +
         scale_y_discrete(breaks=seq(0,1)) + 
         ylab(NULL)
p1 
```

但是，我希望将情节设为灰度，但似乎无法弄清楚如何做到这一点（注意：上面描述的 scale_fit_grey() 对我不起作用）。有什么建议么？非常感谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-18T03:09:40.697

一开始使用**ggplot2**`color`通常会让人绊倒的一件事是和之间的区别`fill`。对于条形、矩形等二维对象，基本上任何填充区域都会`color`影响*边框*颜色并`fill`影响*内部*颜色。

在您的情节中，您 map ，但in`color = variable`没有映射。我想知道你的意思是在里面然后使用.`fill``aes``fill = variable``aes()``scale_fill_grey`

否则，您将使用`color = variable`and `scale_color_grey`，但这只会“着色”条形的边框，而不是填充区域。

例如，`fill = variable`我`scale_fill_grey()`得到这样的结果：

![在此处输入图像描述](../Images/043fcee19173a1d4d3fae8da7cf08ea3.png)

# css - 如何使用 display:inline 创建水平列表？

> ID：11076319
> 
> 赞同：1
> 
> 时间：2012-06-18T02:22:02.513
> 
> 标签：css, list, inline

我正在尝试创建一个水平显示的服务列表，但是`display: inline`不起作用。如何`li`水平显示 's？

```
#services {
    border-top: 1px solid #202020;
    padding-top: 40px;
}

#services p span {
    font-family: nevis-webfont;
    font-size: 112.5%;
    font-weight: normal;
    letter-spacing: 1px;
    text-transform: uppercase;
}

#services ul {
    width: 160px;
}

#services ul li {
    display: inline;
}

#services ul li h2 {
    padding-top: 20px;
    text-align: center;
}

<div id="services">
    <p><span>Services</span></p>
    <ul>
    <li><h2>HEADING</h2><p>Nulla et diam risus. Praesent vestibulum augue non purus tincidunt placerat. Sed in orci leo. Duis dignissim nibh vitae lacus placerat et posuere</p></li>
    <li><h2>HEADING</h2><p>Nulla et diam risus. Praesent vestibulum augue non purus tincidunt placerat. Sed in orci leo. Duis dignissim nibh vitae lacus placerat et posuere</p></li>
    <li><h2>HEADING</h2><p>Nulla et diam risus. Praesent vestibulum augue non purus tincidunt placerat. Sed in orci leo. Duis dignissim nibh vitae lacus placerat et posuere</p></li>
    <li><h2>HEADING</h2><p>Nulla et diam risus. Praesent vestibulum augue non purus tincidunt placerat. Sed in orci leo. Duis dignissim nibh vitae lacus placerat et posuere</p></li>
    </ul>
    <div class="next">
        <a href="#"><img src="img/next.png" alt="Click for more information" /></a>
    </div><!-- end next --> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T02:27:47.187

它们没有水平显示，或者由于太宽而无法在该水平空间中显示`ul`多个，因此它们没有任何明显的差异“内联”排列。`li`

问题就在这里

```
#services ul {
    width: 160px;
} 
```

删除此宽度限制以允许超过一 li 水平放置。

此外，要达到我相信您正在寻找的效果，请尝试为列表项设置一个设置宽度，并将显示设置为`inline-block`而不是内联。这将创建我相信您正在尝试实现的水平块。

**示例：http:** [//jsfiddle.net/xPCBK/1/](http://jsfiddle.net/xPCBK/1/)

您需要更改的CSS：

```
#services ul {
    width: 160px;
}

#services ul li {
    display: inline;
} 
```

将此更改为

```
#services ul {
}
#services ul li {
    display: inline-block;
    width: 160px;
} 
```

# html - 提交按钮的 div 包装器

> ID：11076322
> 
> 赞同：0
> 
> 时间：2012-06-18T02:22:48.303
> 
> 标签：html, forms, twitter-bootstrap, submit

我有一个简单的登录表单：

```
<form action="/users/login" class="form-inline" id="UserLoginForm" method="post" accept-charset="utf-8">
    <div style="display:none;">
        <input type="hidden" name="_method" value="POST"/>
    </div>
    <input name="data[User][email]" class="input-small" placeholder="E-mail" maxlength="50" type="text" id="UserEmail"/>
    <input name="data[User][password]" class="input-small" placeholder="Password" type="password" id="UserPassword"/>
    <button class='btn' type='submit'>Login</button>
</form> 
```

它使用引导程序进行样式设置。至于js jquery 和AngularJS 是加载的。

我的问题是，当我显示此表单时，我的提交按钮转到下一行。如果我检查 dom，我`<div class="actions">...</div>`会在提交按钮周围看到一个包装器。`type='submit'`如果我从表单定义中省略部分，则不会发生这种情况。

我的问题是谁在添加这个包装器，我该如何避免它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T06:37:53.017

如果您看到 Twitter Bootstrap 的示例，我可以看到它们使用了两个类`form-inline`。[请检查这个。](http://twitter.github.com/bootstrap/base-css.html#buttons)来回不同类型和形式的按钮。尝试`well`与它一起应用类。

```
<form class="well form-inline">
  <input type="text" class="input-small" placeholder="Email">
  <input type="password" class="input-small" placeholder="Password">
  <label class="checkbox">
    <input type="checkbox"> Remember me
  </label>
  <button type="submit" class="btn">Sign in</button>
</form> 
```

# sql - 如何使用 sql 查询将现有列升级为外键？

> ID：11076324
> 
> 赞同：1
> 
> 时间：2012-06-18T02:23:48.220
> 
> 标签：sql, oracle, foreign-keys

我有一个 oracle 表`A`，其中包含一个`A.a`用于存储表属性的列。这是一个有数据的大表。现在属性的语义需求`A.a`需要发展成另一个表B，B有一个id列，和一个`B.a`存储同组数据的`A.a`列（两列都是唯一的）。

所以现在`A.a`应该升级到表的外键`B`，然后`A.a`应该存储`B.id`而不是 VARCHAR2 并且更困难的部分是我需要使用通过`A.a`查找和重写，因为表 A 有现有数据。`B.id``B.a``A.a``B.id`

我必须通过 SQL 查询来实现这一点。

那么如何获得这项工作呢？如果我没有说清楚，请道歉。请随时留下任何想法。提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T05:21:12.753

如果您有以下架构：

```
tableA { a, x } 
```

您想将其转换为以下架构：

```
tableB { id, a }
tableA { id, x } where id has a FK constraint to tableB (id) 
```

您可以使用以下命令序列来执行此操作：

```
-- sequence to generate the tableB's surrogate key
CREATE SEQUENCE tableB_id_seq;

-- generate tableB
CREATE TABLE tableB AS
  SELECT tableB_id_seq.NEXTVAL AS id, a
  FROM (SELECT DISTINCT a
        FROM   tableA);

ALTER TABLE tableB MODIFY (id PRIMARY KEY);

-- add the FK column on tableA
ALTER TABLE tableA ADD (id NUMBER);

-- populate it
UPDATE tableA SET id = 
  (SELECT tableB.id
   FROM tableB
   WHERE tableB.a = tableA.a);

-- make it a FK
ALTER TABLE tableA ADD CONSTRAINT afk
  FOREIGN KEY (id) REFERENCES tableB (id);

-- drop the old column
ALTER TABLE tableA DROP COLUMN a; 
```

# haskell - 如何使用多个作者对 haskell 包进行 cabalize

> ID：11076330
> 
> 赞同：7
> 
> 时间：2012-06-18T02:24:36.183
> 
> 标签：haskell, cabal

所有关于如何对 Haskell 包进行 cabalize 的教程和示例都假定该包只有一个作者（以及一个维护者）。如何在 .cabal 文件中正确记下多个作者？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-18T03:24:50.947

我不知道这是否是最佳做法，但我只是使用逗号分隔的名称列表。

```
Author:              John Doe, Tikhon Jelvis 
```

您还可以包括电子邮件地址：

```
Author:              John Doe <john.doe@example.com>, Tikhon Jelvis <tikhon@berkeley.edu> 
```

# jquery - 在大量 HTML 上加快 jQuery UI 对话框创建的方法？

> ID：11076332
> 
> 赞同：2
> 
> 时间：2012-06-18T02:25:02.510
> 
> 标签：jquery, jquery-ui

我有一个包含大量 HTML 的表格，我正在尝试在其上创建一个 jQuery 对话框。这个过程非常慢（在 IE 中大约 8 秒），这是不可接受的。创建对话框通常非常快，但如果有大量标记，显然不是。

我理解部分性能问题的原因是它会删除并将创建对话框的部分附加到 DOM 的末尾，这对于如此大量的 HTML 来说很慢。

有没有办法通过手动创建模态所需的部分标记来加快进程，欺骗 jQuery UI 不移动 HTML 或其他东西？我已经尝试过：

*   使模态无法重新调整大小
*   使模态不可移动
*   将桌子包裹在另一个

我想继续使用 jQuery UI 标记，因为我们在其他地方使用它并且已经花时间适当地设置它的样式。谢谢！

这是一个演示问题的非常简单的示例：

[http://johnculviner.com/modaltest.html](http://johnculviner.com/modaltest.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T05:38:39.410

根据 charlietfl 的一些建议，我想出了我能找到的最佳解决方案。在这里发表了一篇文章：http: [//johnculviner.com/a-jquery-ui-dialog-open-performance-issue-and-how-to-fix-it/](http://johnculviner.com/a-jquery-ui-dialog-open-performance-issue-and-how-to-fix-it/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T03:17:37.183

这是一个可能的建议：

1.) 创建您的对话框 html 表，其中包含约 20 行。2.) 在文档就绪时创建对话框小部件和对话框单击处理程序。3.) 在 document.ready 之外，创建一个自调用函数，该函数将添加剩余的表行。

[这是我在 jsfiddle 上](http://jsfiddle.net/nickadeemus2002/Z8BNq/)使用这种方法创建的演示

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-10T10:10:45.317

**宽度：$(window).width()**
**高度：$(window).height()**

使用当前视口宽度设置对话框的高度和宽度。你会发现它的加载速度要快得多。

这是因为当您静态设置对话框宽度并且加载对话框时，它必须将内容压缩到对话框的大小，这需要时间。

# php - PHP - Strtotime - 添加小时

> ID：11076334
> 
> 赞同：12
> 
> 时间：2012-06-18T02:26:04.057
> 
> 标签：php, strtotime

我有这个变量：

```
$timestamp = strftime("%Y-%m-%d %h:%M:%S %a", time ()); 
```

我只是想增加三个小时并回显出来。

我已经看到了您可以执行 60 * 60 * 3 方法或硬代码“+ 3 hours”的方式，它可以理解这些单词。

获得此结果的最佳方法是什么？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-06-18T02:37:00.030

最好的方法是您认为更具可读性。以下表达式是相同的：

```
time() + 3 * 60 * 60

strtotime('+3 hours') 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-18T04:08:56.767

我总是这样

```
$current_time = date('Y-m-d H:i:s');
$new_time = strtotime($current_time . "+3hours");
echo $new_time; 
```

或者

```
$new_time = mktime(date('H')+3, 0, 0, date('m'), date('d'), date('Y'));
$new_time = date('Y-m-d H:i:s', $new_time);
echo $new_time; 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-06-18T02:30:05.037

```
$timestamp = strftime("%Y-%m-%d %h:%M:%S %a", time() + 3*60*60) 
```

`3*60*60`是最好的方法

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-01-29T17:07:46.213

**只需添加秒数即可添加小时数：**

```
strtotime($your_date)+2*60*60 
```

这将在您的约会中增加两个小时。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-18T02:31:17.700

您可以使用[`DateTime::modify`](http://www.php.net/manual/en/datetime.modify.php)添加时间，但我会这样做`time()+10800`。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-18T02:37:23.923

```
$time = new DateTime("+ 3 hour");
$timestamp = $time->format('Y-M-d h:i:s a'); 
```

简洁明了:)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-18T02:32:50.437

如果你想“现代”：

```
$d = new DateTime();
$d->add(new DateInterVal('P3H'));
$timestamp = $d->format('Y-M-d h:i:s a'); 
```

参考：[日期](http://php.net/datetime)时间对象

# c# - 我可以从哪里获得旧的托管 Directx 文件？

> ID：11076335
> 
> 赞同：1
> 
> 时间：2012-06-18T02:26:12.047
> 
> 标签：c#, sdk, directx

一个小时的 google 和 2 个 SDK 下载后！我下载了 6 月，然后在 SO 2010 年 2 月的 SDK (http://stackoverflow.com/questions/7731472/where-can-i-get-microsoft-directx-dll) 上按照上一个答案的链接进行操作，但是dll 也无处可寻。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T02:45:21.733

C:\Windows\Microsoft.NET\DirectX for Managed Code\1.0.2902.0 is where you will find them (fyi)

# java - 从 Java 中的二维数组矩阵中获取行和列

> ID：11076338
> 
> 赞同：8
> 
> 时间：2012-06-18T02:27:34.030
> 
> 标签：java, arrays, matrix, multidimensional-array

假设我在 Java 中有一个像这样的二维数组（矩阵）......

```
int[][] MyMat = {{0,1,2,3,4}, {9,8,7,6,5}}; 
```

如果我想提取列，我可以像这样轻松地做到这一点......

```
int[] My0= MyMat[0]; //My0 = {0,1,2,3,4}
int[] My1= MyMat[1]; //My1 = {9,8,7,6,5} 
```

但是如何提取行？...

```
int[] My_0= ?; //My_0 = {0,9}
int[] My_1= ?; //My_1 = {1,8}
int[] My_2= ?; //My_2 = {2,7}
int[] My_3= ?; //My_3 = {3,6}
int[] My_4= ?; //My_4 = {4,5} 
```

有没有实现这一目标的捷径？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T02:35:05.187

如果要获取行，则需要从每个数组中获取值，然后根据这些值创建一个新数组。您可以手动分配值，或使用 for 循环，例如 ...

```
int[][] MyMat = {{0,1,2,3,4}, {9,8,7,6,5}};

// get your columns... (easy)
int[] My0= MyMat[0]; //My0 = {0,1,2,3,4}
int[] My1= MyMat[1]; //My1 = {9,8,7,6,5}

// get the rows... (manually)
int[] My_0= new int[]{MyMat[0][0],MyMat[1][0]}; //My_0 = {0,9}
int[] My_1= new int[]{MyMat[0][1],MyMat[1][1]}; //My_1 = {1,8}
int[] My_2= new int[]{MyMat[0][2],MyMat[1][2]}; //My_2 = {2,7}
int[] My_3= new int[]{MyMat[0][3],MyMat[1][3]}; //My_3 = {3,6}
int[] My_4= new int[]{MyMat[0][4],MyMat[1][4]}; //My_4 = {4,5}

// get the rows... (as a for-loop)
int size = MyMat.length;
int[] My_0 = new int[size]; //My_0 = {0,9}
int[] My_1 = new int[size]; //My_1 = {1,8}
int[] My_2 = new int[size]; //My_2 = {2,7}
int[] My_3 = new int[size]; //My_3 = {3,6}
int[] My_4 = new int[size]; //My_4 = {4,5}
for (int i=0;i<size;i++){
    My_0[i] = MyMat[i][0];
    My_1[i] = MyMat[i][1];
    My_2[i] = MyMat[i][2];
    My_3[i] = MyMat[i][3];
    My_4[i] = MyMat[i][4];
} 
```

否则，请转动整个数组，以便它存储`{row,column}`而不是`{column,row}`，像这样......

```
int[][] MyMat = {{0,9},{1,8},{2,7},{3,6},{4,5}};

// get the rows... (easy)
int[] My_0= MyMat[0]; //My_0 = {0,9}
int[] My_1= MyMat[1]; //My_1 = {1,8}
int[] My_2= MyMat[2]; //My_2 = {2,7}
int[] My_3= MyMat[3]; //My_3 = {3,6}
int[] My_4= MyMat[4]; //My_4 = {4,5}

// get the columns... (manually)
int[] My0= new int[]{MyMat[0][0],MyMat[1][0],MyMat[2][0],MyMat[3][0],MyMat[4][0]}; //My0 = {0,1,2,3,4}
int[] My1= new int[]{MyMat[0][1],MyMat[1][1],MyMat[2][1],MyMat[3][1],MyMat[4][1]}; //My1 = {9,8,7,6,5}

// get the columns... (as a for-loop)
int size = MyMat.length;
int[] My0 = new int[size]; //My0 = {0,1,2,3,4}
int[] My1 = new int[size]; //My1 = {9,8,7,6,5}
for (int i=0;i<size;i++){
    My0[i] = MyMat[0][i];
    My1[i] = MyMat[1][i];
} 
```

请注意，不可能有一种速记方式可以让您轻松获取行和列 - 您必须决定您想要更多，并将数组构造为该格式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T09:40:28.267

如果我们知道二维数组的大小行和列大小，我们可以实现如下

让 No.of Rows - 行

让列数 -clmns

```
int[][] my = new int[clmns][rows];
for(int i=0;i<clmns;i++)
for(int j=0;j< rows; j++)
 my[i][j]=MyMat[j][i]; 
```

然后每次取一列给你原始数组的行数组。

否则，如果在程序运行时给出了行数，则可以使用 ArrayList 数组和行数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-08T23:18:55.230

它很简单：

1\. 转置您的二维矩阵 2 。然后按照你的意思做[] My0= MyMat[0]; int[] My1= MyMat[1];

# diskspace - Is it possible to add event listener for disk available capacity change?

> ID：11076340
> 
> 赞同：0
> 
> 时间：2012-06-18T02:27:54.230
> 
> 标签：diskspace

I need to write an application which detect the disk available space change. If the available space is changed, the chart should be also automatically updated.

Is there any system-level event thrown to the application when the disable available capacity change? The application is allowed to be aware of such a change by adding event listenr.

I found there is no API provided for such purpose on both Linux and Windows. Without this kind of API, it is wasteful to poll the disk info at a regular interval instead of listening change event.

Thanks in advance.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T02:42:36.487

It looks like you've answered your own question there. But polling for disk free space is not an expensive or wasteful operation - just call [GetDiskFreeSpace](http://msdn.microsoft.com/en-us/library/windows/desktop/aa364935%28v=vs.85%29.aspx) every 30 seconds or so.

# ios5 - Using Google Maps Geocoding API

> ID：11076341
> 
> 赞同：0
> 
> 时间：2012-06-18T02:28:12.907
> 
> 标签：ios5, geocoding, cllocation

Basically I need to get info like state, county, zip code with a user's lat/lng coords from a CLLocation object.

Does anyone know if Google has an Objective-C library for its Geocoding service? Or maybe with iOS 6 maps this will be handled by Apple's API. Running into Google API limits when using query string:

[http://maps.googleapis.com/maps/api/geocode/json?latlng=39.76144296429947,-104.8011589050293&sensor=false](http://maps.googleapis.com/maps/api/geocode/json?latlng=39.76144296429947,-104.8011589050293&sensor=false)

so I am hoping I can use an API key/ Google Wallet account to make these calls freely, via native Objc calls. Basically I need to get info like state, county, zip code with a user's lat/lng coords from a CLLocation object.

Suggestions on where to look for info on this is greatly appreciated.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T09:59:13.483

对于任何访问此答案并且看起来不够努力的人，

[CLGeocoder 类](http://developer.apple.com/library/ios/#documentation/CoreLocation/Reference/CLGeocoder_class/Reference/Reference.html "CLG 编码器类") 完成了所有这些工作。作为使用条款的一部分，您需要显示地图......或者您以前必须 - 不要在上面引用我！

# javascript - 我如何使用 javascript 或 jquery 捕获数字或字符

> ID：11076342
> 
> 赞同：-1
> 
> 时间：2012-06-18T02:28:14.773
> 
> 标签：javascript, jquery

我需要从字符串示例中捕获或过滤一个数字：

```
var Mystring = "4.0" // or sometimes 4.5 
```

在这个例子中，我需要找到`.5`or`.0`来替换它或删除它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T02:33:05.070

你想截断数字吗？

```
Math.floor(Number("4.0")) 
```

即使有空格它也可以工作：

```
Math.floor(Number("    4.5   ")) 
```

# backbone.js - Backbone.js：“超出最大调用堆栈大小”错误

> ID：11076345
> 
> 赞同：0
> 
> 时间：2012-06-18T02:29:08.770
> 
> 标签：backbone.js, document, mousemove

假设我有一个模型和一个视图，这个视图有两个方法：一个是绑定文档 mousemove 事件，另一个是 unbind 方法，默认我给文档 mousemove 事件，一旦模型的`enable`值改变我会调用视图的 unbind 方法：

```
 window.ConfigModel = Backbone.Model.extend({
        defaults: {
            'enable':0
        },
        initialize: function(){
            this.bind("change:enable", function () {
                var portView2 = new PortView();
                portView2.viewOff();                        
            });
        },
        change:function () {
            this.set('enable', 9);
        }
     })

    window.PortView = Backbone.View.extend({
        viewOn: function () {
            $(document).on('mousemove', function () {
                console.log('move')
            })
        },
        viewOff: function () {
            $(document).off('mousemove');
        }
    }) 
```

然后我`input`在文档上放了一个调用模型改变的：

```
 $('input').click(function () {
        var configModel = new ConfigModel();
        configModel.change();
    }) 
```

启动脚本是：

```
var portView1 = new PortView();
portView1.viewOn(); 
```

问题是一旦我调用点击输入按钮，chrome会告诉我一个错误：`Maximum call stack size exceeded`似乎`change`被调用了很多次。那么我的问题是什么问题，我该如何解决这个问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T02:47:58.677

骨干模型已经有一个[`change`方法](http://documentcloud.github.com/backbone/#Model-change)：

> **改变** `model.change()`
> 
> 手动触发`"change"`事件并`"change:attribute"`为每个已更改的属性触发一个事件。如果您一直在传递`{silent: true}`给 set 函数以聚合对模型的快速更改，那么您将需要`model.change()`在全部完成后调用。

大概 Backbone 中的某些东西正在尝试调用`configModel.change()`并获取您的版本，`change`该版本会触发`change()`Backbone 中的另一个调用，该调用运行您的`change`which ...直到堆栈爆炸。

`change`您应该为您的方法使用不同的名称。

* * *

也就是说，您的代码结构有些奇怪。监听自身事件的模型很好，但创建视图的模型很奇怪：

```
initialize: function() {
    this.bind("change:enable", function () {
        var portView2 = new PortView();
        portView2.viewOff();                        
    });
} 
```

实例化一个视图只是为了调用一个方法然后把它扔掉是很奇怪的，就像创建一个新模型只是为了触发一个事件一样。

我认为您可能希望将单个 ConfigModel 实例作为应用程序状态的一部分，例如`app.config`. 然后您的`click`处理程序将与该模型对话：

```
$('input').click(function () {
    app.config.enable_level_9(); // or whatever your 'change' gets renamed to
}); 
```

然后，您将拥有应用程序的其他部分（不一定是视图）来侦听更改`app.config`并采取适当的行动：

```
app.viewOn = function() {
    $(document).on('mousemove', function() {
        console.log('move')
    });
};
app.viewOff = function() {
    $(document).off('mousemove');
};
app.init = function() {
    app.config = new ConfigModel();
    app.viewOn();
    $('input').click(function () {
        app.config.enable_level_9();
    });
    // ...
}; 
```

然后通过一次`app.init()`调用启动应用程序：

```
$(function() {
    app.init();
}); 
```

# shell - 如何通过 shell 脚本导出变量？

> ID：11076350
> 
> 赞同：24
> 
> 时间：2012-06-18T02:30:13.333
> 
> 标签：shell, ubuntu

灰

```
#! /bin/sh
export x=/usr/local 
```

我们可以`source ./a`在命令行中进行。但我需要通过 shell 脚本进行导出。

b.sh

```
#! /bin/sh
. ~/a.sh 
```

没有错误......但`$x`在命令行中不会显示任何内容。所以没有出口。

知道如何使它工作吗？

* * *

灰

```
#! /bin/sh
export x=/usr/local
-----------
admin@client: ./a.sh
admin@client: echo $x

admin@client:  <insert ....> 
```

* * *

## 回答 #1

> 赞同：100
> 
> 时间：2013-11-13T18:37:54.387

您可以将导出语句放在 shell 脚本中，然后使用“源”命令*在当前进程中执行它*：

```
source a.sh 
```

我希望这有帮助。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-06-18T02:37:00.807

您不能通过 shell 脚本进行导出，因为 shell 脚本在子 shell 进程中运行，并且只有子 shell 的子进程会继承导出。

使用 source 的原因是让当前的 shell 执行命令

将导出命令放在诸如 .bashrc 之类的文件中是很常见的，bash 将在启动时获取该文件（或其他 shell 的类似文件）

另一个想法是，您可以创建一个 shell 脚本，该脚本在输出时生成一个导出命令：

```
shell$ cat > script.sh
#!/bin/sh
echo export foo=bar
^D
chmod u+x script.sh 
```

然后让当前 shell 执行该输出

```
shell$ `./script.sh`

shell$ echo $foo
bar

shell$ /bin/sh
$ echo $foo
bar 
```

（请注意，脚本的调用被反引号包围，以使 shell*执行*脚本的输出）

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2018-09-30T09:28:53.433

在这里回答我自己的问题，使用上面的答案：如果我有多个相关变量要导出，它们使用与每个导出的一部分相同的值，我可以这样做：

```
#!/bin/bash
export TEST_EXPORT=$1
export TEST_EXPORT_2=$1_2
export TEST_EXPORT_TWICE=$1_$1 
```

并保存为例如 ~/Desktop/TEST_EXPORTING

最后`$chmod +x ~/Desktop/TEST_EXPORTING`

--

之后，运行它`source ~/Desktop/TEST_EXPORTING bob`

然后检查`export | grep bob`应该显示您的期望。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-18T02:37:22.913

将变量导出到环境中只会使该变量对子进程可见。孩子无法修改其父母的环境。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-11-25T03:30:20.270

您可以这样做的另一种方法（窃取/解释上述想法）是将脚本放入 ~/bin 并确保 ~/bin 在您的 PATH 中。然后您可以全局访问您的变量。这只是我用来编译我的 Go 源代码的一个示例，它需要 GOPATH 变量指向当前目录（假设您在需要从中编译源代码的目录中）：

从 ~/bin/GOPATH：

```
#!/bin/bash

echo declare -x GOPATH=$(pwd) 
```

然后，您只需执行以下操作：

```
#> $(GOPATH) 
```

因此，您现在也可以在其他脚本中使用 $(GOPATH)，例如自定义构建脚本，它可以自动调用此变量并通过 $(pwd) 动态声明它。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-11-02T14:56:06.407

脚本1.sh

```
shell_ppid=$PPID
shell_epoch=$(grep se.exec_start "/proc/${shell_ppid}/sched" | sed 's/[[:space:]]//g' | cut -f2 -d: | cut -f1 -d.)
now_epoch=$(($(date +%s%N)/1000000))
shell_start=$(( (now_epoch - shell_epoch)/1000 ))
env_md5=$(md5sum <<<"${shell_ppid}-${shell_start}"| sed 's/[[:space:]]//g' | cut -f1 -d-)
tmp_dir="/tmp/ToD-env-${env_md5}"
mkdir -p "${tmp_dir}"
ENV_PROPS="${tmp_dir}/.env"
echo "FOO=BAR" > "${ENV_PROPS}" 
```

脚本2.sh

```
shell_ppid=$PPID
shell_epoch=$(grep se.exec_start "/proc/${shell_ppid}/sched" | sed 's/[[:space:]]//g' | cut -f2 -d: | cut -f1 -d.)
now_epoch=$(($(date +%s%N)/1000000))
shell_start=$(( (now_epoch - shell_epoch)/1000 ))
env_md5=$(md5sum <<<"${shell_ppid}-${shell_start}"| sed 's/[[:space:]]//g' | cut -f1 -d-)
tmp_dir="/tmp/ToD-env-${env_md5}"
mkdir -p "${tmp_dir}"
ENV_PROPS="${tmp_dir}/.env"
source "${ENV_PROPS}"
echo $FOO 
```

```
./script1.sh
./script2.sh
BAR 
```

对于在同一个父 shell 中运行的脚本，它仍然存在，并且可以防止冲突。

# r - lapply() 与用户输入

> ID：11076358
> 
> 赞同：4
> 
> 时间：2012-06-18T02:32:32.057
> 
> 标签：r

有没有一种方法`lapply()`可以强制它在单步执行列表的下一个元素之前等待用户的“输入”？如果是这样，你能提供一个简单的例子吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-18T02:38:40.190

这是示例：

```
es <- list(1, 2, 3)
lapply(es, function(e) {
  cat("Press enter:")
  readLines(n = 1)
  print(e)
}) 
```

# ios - How to track retweets and facebook comments?

> ID：11076366
> 
> 赞同：0
> 
> 时间：2012-06-18T02:33:49.810
> 
> 标签：ios, facebook, api, twitter, oauth

i am trying to figure the best way to go about getting the number of retweets for a given tweet and likewise the number of comments for a specific facebook post.

I know there are api calls to retrieve these things individually using their respective apis however my question is how to achieve this on different platforms.

For example lets say i have both a web app and iOS app that i would like my users to be able to share images from to either facebook or twitter. I have used something like ShareKit on iOS to share the images and i could probably tweak it to capture the id for the tweet/post which i could then send back to the web app to store in a db.

Question is then how do i go about getting the number of retweets/likes for these tweets and posts? Issue being that is that as far as i understand these are authenticated calls and i wouldnt have the proper authentication to get that info from facebook/twitter as the user would only have authorized my iOS app and not the web app? Is there a way for me to pass on the user authentication to my server from the iOS and then use that when making the calls to get the number of retweets/likes?

Any ideas?

Thx

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T07:00:18.653

您**无需**进行身份验证即可查看推文有多少转推。

[显示推文](https://dev.twitter.com/docs/api/1/get/statuses/show/%3aid)的文档非常清楚地说明了这一点。

假设推文 ID 是 211912719195058176

你可以调用 Twitter 的 API

```
https://api.twitter.com/1/statuses/show.json?id=211912719195058176&include_entities=true 
```

在响应中，您将看到

```
"retweet_count":26 
```

就是这么简单。

# java - Maven 没有选择我的 3 个新属性

> ID：11076370
> 
> 赞同：0
> 
> 时间：2012-06-18T02:34:52.103
> 
> 标签：java, maven

我的主类引用了一个`Settings.java`类，并且在不引用新属性的情况下运行 maven，当我这样做时它可以正常工作：

```
mvn assembly:assembly 
```

如果我引用一个新属性，我会收到此错误：

```
[ERROR] /Users/.../service.java:[41,58] cannot find symbol
[ERROR] symbol  : method getDefaultScore() 
```

这是一个多 Maven 项目。该依赖项是一个本地依赖项，它只是另一个 maven 模块，所以不确定它为什么不选择这个新属性。

我确实`mvn clean`在根目录下运行，以防缓存的东西。

注意：当我通过 IntelliJ 构建和运行此应用程序时，它运行良好，但使用 maven 它似乎不喜欢这个新属性（它不仅仅是一个返回我分配的值的字符串属性，它不是t 从属性文件或任何东西中读取）。

使用调试运行时：

```
mvn assembly:assembly -X 
```

我得到相同的“找不到符号”，位置是我的另一个 Maven 模块的类，然后我得到：

```
org.apache.maven.lifecycle.LifecycleExecutionException: Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:2.3.2:compile (default-compile) on project myapp-jobs: Compilation failure
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:213)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:153)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:145)
    at org.apache.maven.lifecycle.internal.MojoExecutor.executeForkedExecutions(MojoExecutor.java:365)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:199)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:153)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:145)
    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:84)
    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:59)
    at org.apache.maven.lifecycle.internal.LifecycleStarter.singleThreadedBuild(LifecycleStarter.java:183)
    at org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:161)
    at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:319)
    at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:156)
    at org.apache.maven.cli.MavenCli.execute(MavenCli.java:537)
    at org.apache.maven.cli.MavenCli.doMain(MavenCli.java:196)
    at org.apache.maven.cli.MavenCli.main(MavenCli.java:141)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:290)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:230)
    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:409)
    at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:352)
Caused by: org.apache.maven.plugin.CompilationFailureException: Compilation failure
    at org.apache.maven.plugin.AbstractCompilerMojo.execute(AbstractCompilerMojo.java:656)
    at org.apache.maven.plugin.CompilerMojo.execute(CompilerMojo.java:128)
    at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:101)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:209)
    ... 23 more 
```

只是为了确保，我用旧的属性替换了新属性的引用，并且 mvn 命令运行良好，所以它是 def。新属性有问题，很简单：

```
public class Settings {
..
..
private String defaultScore = "100";

  public String getDefaultScore() {
        return defaultScore;
    }

} 
```

我的电脑/Maven 版本等：

*   阿帕奇 Maven 3.0.3 (r1075438; 2011-02-28 12:31:09-0500)
*   Maven 主页：/Users/../java/apache-maven-3.0.3
*   Java 版本：1.6.0_31，供应商：Apple Inc.
*   Java 主页：/System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Home
*   默认语言环境：en_US，平台编码：MacRoman
*   操作系统名称：“mac os x”，版本：“10.7.4”，arch：“x86_64”，系列：“mac”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T06:19:55.927

请确保在添加新属性的位置使用正确版本的依赖项项目。如果此项目的版本*为 1.0.0-SNAPSHOT*（它是快照版本，对吗？），请确保在要查看属性的项目中引用此版本。

验证版本后，`mvn clean install`在根目录中运行 a 以重建所有依赖项。

如果这不起作用，请检查您的本地 Maven 存储库（在 中`~/.m2`）以检查依赖项的 JAR 文件是否包含该类的最新版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T04:39:28.877

您是否尝试过`mvn install`在第一个模块中运行？

# javascript - jquery中的“命名空间”动画队列

> ID：11076374
> 
> 赞同：2
> 
> 时间：2012-06-18T02:35:34.650
> 
> 标签：javascript, jquery

我从搜索中发现的一些相关问题：

[jquery中的'fx'队列如何自动启动？](https://stackoverflow.com/questions/10467419/how-does-the-fx-queue-in-jquery-auto-start)

[jQuery 中的队列是什么？](https://stackoverflow.com/questions/1058158/can-somebody-explain-jquery-queue-to-me)

我已经阅读了有关 jquery 的 animate() 的文档，但在找出解决问题的方法时遇到了一些困难。

我要做的是在多个元素上排列一系列动画。我希望动画按顺序执行，即我希望一个元素上的当前动画阻止其自己元素上的动画，但不阻止另一个元素上的动画。

最后，我希望能够取消其中一个元素上的动画，但允许其他元素上的动画继续。

我*认为*命名的 jquery 队列是我想要的，但是尝试这给了我从未开始的动画（我认为这是由于“fx”队列不存在于每个其他队列上的魔力）。

提前致谢！

编辑：

这就是我正在寻找的东西：

```
function someAnimationWrapper(queueName, element, animation) {
    ///<summary>
    /// Places the animation specified into the queue of animations to be
    ///  run on that element.  The animation queue is a named queue so 
    ///  animations in the queue can be stopped at any time.
    ///</summary>
    ///<param name="queueName" type="String">
    /// The name to assign to the element's animation queue.
    ///</param>
    ///<param name="element" type="jQuery">
    /// jQuery object to perform the animations on.
    ///</param>
    ///<param name="animation" type="Object">
    /// Animation properties for the animation call.
    ///</param>

    // TODO: If magic needs to be done here this is a placeholder
    element.animate(animation);
}

function magicallyStopMyQueue(queueName, clearQueue, jumpToEnd) { // May take element, whatever I need to get the job done
    ///<summary>Mirrors jQuery.prototype.stop(), but with the named queue.</summary>
    ///<param name="queueName" type="String">
    /// Animation queue to stop.
    ///</param>
    ///<param name="clearQueue" type="Boolean">
    /// See jQuery.prototype.stop()
    ///</param>
    ///<param name="jumpToEnd" type="Boolean">
    /// See jQuery.prototype.stop()
    ///</param>

    // TODO: some magics here
}

var e1 = $('.myDiv1'),
    e2 = $('.myDiv2');

someAnimationWrapper('firstQueue', e1, { properties: { left: '-=16' }, duration: 100 });
someAnimationWrapper('firstQueue', e1, { properties: { left: '-=16' }, duration: 100 });
someAnimationWrapper('firstQueue', e1, { properties: { left: '-=16' }, duration: 100 });
someAnimationWrapper('secondQueue', e2, { properties: { left: '-=16' }, duration: 100 });
someAnimationWrapper('secondQueue', e2, { properties: { left: '-=16' }, duration: 100 });
someAnimationWrapper('secondQueue', e2, { properties: { left: '-=16' }, duration: 100 });

// Now I want to stop the first one
magicallyStopMyQueue('firstQueue', true, true); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T05:19:26.080

我会在这里在黑暗中拍摄。

您想要将多个动画排队以一个接一个地触发，我们曾经`callback functions`这样做过。`Callback Functions`在父事件完成之前永远不会运行。在这种情况下，它是动画。

[您可以在此处](http://jsfiddle.net/EGNc3/)找到代码的工作示例（如下所示）。

编码：

```
$('.a').animate({
  //This fires immediately
  left:"+=50px"     
}, function(){
  /* 
   *Reference name for Example:
   *cb1
   */
  //This fires once the above has been completed.
  //we also don't want the animation to fire on some eleents.
  $('.a').animate({
    left:"-=50px"
  }, function(){
    $('.b').animate({
      /* 
       *Reference name for Example:
       *cb2
       */
      //even though we stop it below AND clearQueue..
      //this will still run in the callback.
      left:"-=75px"
    });              
  });
  //This will only stop the initial callback function (@ cb1)
  //The function in the callback (@cb2) will fire once it has completed.
  $('.b').stop(true);
}); 
```

希望这对链接动画有所了解，并允许您继续前进，如果没有，请告诉我，我很乐意根据需要更改答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T12:15:09.267

如果我理解正确，那么您是在不必要地担心。您想要的行为是自然的 jQuery 动画行为，其中每个元素都有自己的队列，并且没有特别的理由不使用默认的“fx”队列，除非应用程序的其他方面需要它。

[演示](http://jsfiddle.net/h4gPs/5/)

您将在演示中看到红色和绿色块的位置可以独立控制，并且它们的移动可以独立停止。

大多数代码都是为了实现漂亮的布局而存在的。操作位是`animations`对象文字（一堆命名的 css 映射）和附加到边缘控件的匿名单击处理程序（它调用适当的 css 映射以使选定的块移动到要求的位置）。

您可能想要做的唯一不同的事情是处理非数字动画（例如类切换）。jQuery`.animate()`仅处理数字 css 值的动画，但好消息是，如果需要，可以轻松处理非数字内容（参见[.queue()](http://api.jquery.com/queue/)和[.dequeue()](http://api.jquery.com/jQuery.dequeue/)）。

# ios - 如何将表视图控制器添加到基于选项卡的应用程序 Xcode 4.3.3

> ID：11076376
> 
> 赞同：13
> 
> 时间：2012-06-18T02:35:42.997
> 
> 标签：ios, templates, view, tabs, controller

所以我最初从 iOS 5 的基于选项卡的应用程序模板开始。我有一个连接到两个视图的选项卡栏，但是当我向 firstviewcontroller 添加一个表视图控制器时，它不会让我这样做。

我有点困惑我应该如何解决这个问题？我必须用代码来做吗？或者有没有办法以图形方式做到这一点？ ![在此处输入图像描述](../Images/f3e77c3993e1fbe92f5c4de5ab8b5c82.png)

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-06-18T05:49:44.143

在 Storyboards 中嵌入视图并不简单。

首先，删除`First View Controller`：

![没有第一视图控制器的情节提要](../Images/fb55e427abad95038b6a6955a7570d99.png)

现在，将一个新`Table View Controller`的拖到故事板上：

![带有表视图控制器的情节提要](../Images/4699d5d985ed5e827e301179864c30da.png)

`Tab Bar Controller`最后，在和 new之间建立关系`Table View Controller`。

选择`Tab Bar Controller`，然后在按住`Control`键的同时将鼠标拖到 上，`Table View Controller`然后松开鼠标。在弹出框中，选择`Relationship - View Controllers`

![在此处输入图像描述](../Images/8f6be7420f696e8f67a42cf58612399d.png)

现在新的`Table View Controller`应该是原来的标签`Tab Bar Controller`。

![在此处输入图像描述](../Images/4aa8b38784ac55b6804d0560442b9002.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-17T12:26:48.867

在 Xcode 8 中，拖动并选择关系后，表格视图将变为完全蓝色。只需单击蓝色表格视图的底部并在其中选择一个`system item`，`attributes inspector`一切都会好起来的。

# python - django 重定向 ajax 请求但将其保留为“is_ajax”

> ID：11076377
> 
> 赞同：2
> 
> 时间：2012-06-18T02:36:08.530
> 
> 标签：python, ajax, django, redirect

问题：我如何重定向到 django 中的页面，但将其“伪造”为 ajax 请求？

所以我有一个发布数据请求 - 通过 ajax (jQuery) 完成。这被发送到我的 django 服务器，该服务器添加数据（或删除它！），然后以“做得好，您添加了一些数据”页面进行响应。

这个成功页面的开头是：

```
{% extends request.is_ajax|yesno:"base_ajax.htm,base.htm" %} 
```

如果请求不是 ajax 请求，这是添加各种标头的好方法，如果是则忽略标头。我添加了这个，所以该网站在使用和不使用 javascript 的情况下都可以工作（我们需要再这样做吗？）

然后我添加了一个 post-redirect-get （也就是说，视图的 post 部分不是`return render_to_response`，而是`return redirect('url here')`

现在的问题是重定向忘记了初始请求是一个ajax请求。所以我总是最终将整个页面 - 标题和所有 - 加载到一个 div 中，这不是我想要的。

所以，我希望能够*告诉重定向它应该假装是一个 ajax 请求*

我怎么做？

更新：对于在“未来（使用喷气背包！）”中阅读此内容的任何人，重定向不会携带标头信息 - 请参阅[https://www.rfc-editor.org/rfc/rfc2616#section-7.1](https://www.rfc-editor.org/rfc/rfc2616#section-7.1)

最后，我去做了这个：

```
return redirect(self.success_redirect + '/' + str(int(request.is_ajax()))) 
```

然后，对于我重定向到的视图，我有：

```
url(r'^editStorySuccess/(?P<ajax>\d+)$',
    showAfterCheckingAjax,
    {
        'template':'stories/editStorySuccess.html'
    },
    'editStorySuccess'
), 
```

在 showAfterCheckingAjax 视图中，我刚刚拥有：

```
if int(ajax):
    request.META['HTTP_X_REQUESTED_WITH'] = 'XMLHttpRequest'
return render_to_response(template, {'user':request.user}, 
    context_instance=RequestContext(request)) 
```

这对我有用！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T06:55:11.117

创建一个不同的 URL，该 URL 呈现与您现在重定向到的 URL 相同的视图，但带有一个额外的 GET 参数。您可以使用此 GET 参数来修改用于提供视图的模板。无论哪种方式，重定向都被视为一个新请求，因此您必须执行一些操作才能将此附加信息传递给此请求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T02:48:56.787

从请求的回调方法中获取重定向 url 作为 json 数据，然后使用 JavaScript 从页面重定向。

# process - 我怎样才能杀死这个过程？

> ID：11076378
> 
> 赞同：-2
> 
> 时间：2012-06-18T02:36:11.843
> 
> 标签：process, sysadmin

```
PID USER      PR  NI  VIRT  RES  SHR S %CPU %MEM    TIME+  COMMAND     
3316 root      20   0  5356 1176  736 R 32.7  2.0   1650:09 lighttpd 
```

它在我的 dd-wrt ​​路由器上运行。我试过`kill -9 3316`了，但我仍然可以看到这个过程`top`

`service lighttpd stop`不起作用。

lighttpd 进程不起作用（我的意思是不能通过 http 访问我的路由器），但它消耗 80 端口。

```
root@DD-WRT:~# netstat -tulpn
tcp        0      0 0.0.0.0:80              0.0.0.0:*               LISTEN      3316/lighttpd 
```

谁能告诉我可能出了什么问题？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T02:49:03.607

尝试`/etc/init.d/lightttpd stop`

# c++ - how to extract binary data from stringstream variable in c++?

> ID：11076384
> 
> 赞同：1
> 
> 时间：2012-06-18T02:37:48.310
> 
> 标签：c++

I am new in C++, I usually use C. But now, I just find a good library that compress some information, with a special algorithm that it is very useful to my project. Then this library gave me as an answer: binary data which lives in a stringstream object. Since it is binary data, there are some bytes that are not an ASCII character. So what I want to do is extract the data and got their hexadecimal representation. How I can do it? I have the following code:

```
stringstream ss; \\variable in which I got the result from the library
bitset1.write(ss); \\with this instruction I got the binary information from the library 
```

From there I try the following things:

1) Just print:

```
cout << hex << ss; 
```

2) Use the str method.

```
cout << hex << ss.str(); 
```

3) Use the read buffer method.

```
cout << hex << ss.rdbuf(); 
```

So, I think I am missing something, or maybe a lot, someone can help me?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T02:47:55.227

If a shortcut exists, I do not know it. However, this does what you want:

```
std::cout << std::hex << std::setfill('0');
const std::string s = ss.str();
const size_t slen = s.length();
for (size_t i = 0; i < slen; ++i) {
    const unsigned char c = s[i];
    const unsigned int n = c;
    std::cout << std::setw(2) << n;
}
std::cout << "\n"; 
```

The key is to use a non-`char` integer type for output, since the stream insertion operator `<<` treats `char` specially.

# apache - mod rewrite directory if file/folder not found

> ID：11076385
> 
> 赞同：6
> 
> 时间：2012-06-18T02:38:31.437
> 
> 标签：apache, .htaccess, mod-rewrite, url-rewriting

I have a folder named "folder1" in my root directory

**www.domain.com/ www.domain.com/folder1**

I need to redirect all the requests to www.domain.com that turn up to be a 404 error, to folder1\. Like so:

**www.domain.com/a_file.txt**

If a_file.txt doesn't exist, look in folder1:

**www.domain.com/folder1/a_file.txt**

I want this to work the same for subdirectories, like so:

**www.domain.com/a_folder** (redirect if it doesn't exist in the root)

**www.domain.com/folder1/a_folder**

I know I should use RewriteCond %{REQUEST_FILE} !-f but I can't seem to figure it out.

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-18T07:56:47.713

```
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_URI} !^/folder1/
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule (.*) folder1/$1 [L,R] 
```

*   第一个 rewrite-cond 确保您不会循环（以防文件在 folder1 中也不存在
*   第二个检查目标不是文件
*   第三个 - 它也不是文件夹
*   最后，重写 url。`L`flag 表示这是应用的最后一条规则（即使它之后有规则），`R`表示重定向。`QSA`如果您希望将传递给原始的任何查询字符串参数发送到新 url，您还可以添加标志

# c++ - C++ iteration over list and individual objects

> ID：11076386
> 
> 赞同：2
> 
> 时间：2012-06-18T02:38:33.557
> 
> 标签：c++, iteration

I have an STL list of pointers, along with another pointer of the same type. I need to perform a ton of operations on each of them. My current method is to push the pointer onto the list, iterate through everything, then pop the pointer back off. This works fine, but it got me wondering if there were a more elegant/less hacky way to iterate through a combination of things. (say if I had a pile of other additional things to add to the iteration)

The current functional, but a bit hacky way:

```
std::list<myStruct*> myList;
myStruct* otherObject;

//the list is populated and the object assigned

myList.push_back(otherObject);
for(std::list<myStruct*>::iterator iter = myList.begin(); iter != myList.end(); ++iter){

      //Long list of operations

}

myList.pop_back(otherObject); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T02:48:08.687

The more idiomatic approach might be to encapsulate your "long list of operations" into a function, then call it as needed. For example:

```
void foo (myStruct* x)
{
    // Perform long list of operations on x.
}

...

{
    std::list<myStruct*> myList;
    myStruct* otherObject;

    // The list is populated and the object assigned.

    foo (otherObject);
    for(std::list<myStruct*>::iterator iter = myList.begin(); iter != myList.end(); ++iter)
    {
        foo(*iter);
    }
} 
```

Then, if you later need to apply `foo` to other items, just call as needed.

While there's nothing inherently evil about adding `otherObject` to `myList` in the manner you describe, it is in a way abusing the list and should probably be avoided if possible.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T02:53:01.403

```
void doStuff( myStruct& object )
{
    //Long list of operations
}

int main()
{
    std::list<myStruct*> myList;
    myStruct* otherObject;

    //the list is populated and the object assigned

    for( auto iter = myList.begin(); iter != myList.end(); ++iter )
    {
        doStuff( **iter );
    }
    doStuff( *otherObject );
} 
```

# python - How to call python script in batch file

> ID：11076388
> 
> 赞同：1
> 
> 时间：2012-06-18T02:39:03.757
> 
> 标签：python, batch-file

I have a python script which take in 1 input and process to output. However, when i use batch file to call it like following, it failed to process...

```
cd \
cd ABC
cd input

for %%f in (*.txt) do (
    echo "%%~nf"
    "C:\Python32\python.exe" "D:\ABC\deployment code\add_null.py" "%%~nf.txt"  "%%~nf_processed.txt"
) 
```

Anyone know the problem?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T11:46:39.047

批处理文件本身看起来不错。从您的错误消息来看，请确保您在调用批处理文件时位于正确的目录中，或者其名称中没有任何拼写错误。

# ruby-on-rails - How to connect programmatically to the Ruby debugger to create a plugin for Sublime Text 2?

> ID：11076389
> 
> 赞同：5
> 
> 时间：2012-06-18T02:39:04.900
> 
> 标签：ruby-on-rails, ruby, debugging, sublimetext2

I want to develop a plugin for Sublime Text 2 to add a Ruby debugger inside the editor. I was looking some documentation on how to connect to the debugger but I could not find nothing really good. I want to know if there is an API or if its possible to connect to debugger programmatically. I would like to use this project as the debugger backend [https://github.com/cldwalker/debugger](https://github.com/cldwalker/debugger)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T13:54:56.747

由于需要 Python 为 ST2 编写插件，因此您无法连接到[https://github.com/cldwalker/debugger/blob/master/bin/rdebug](https://github.com/cldwalker/debugger/blob/master/bin/rdebug)并开始研究它的 API 来完成您的工作。

但是您可以在调试器可执行文件上执行 popen（请参阅[http://docs.python.org/library/subprocess.html#module-subprocess](http://docs.python.org/library/subprocess.html#module-subprocess)）并像平常一样驱动它。这不是很优雅，但恐怕这是唯一可用的解决方案，因为你被 Python 锁定了。

从那里，我可能会编写一些 python api 以编程方式处理基本操作，如以下伪代码：

```
class RubyDebugger:
  def __init__(self, debugger_path):
    # Popen stuff, consider looking for the idiomatic way of doing that :) 
    self.debugger = os.popen ...

  def breakpoint(self, file, line_number)
    self.debugger.write "breakpoint " + file + ":" + line_number 
```

# android - Phonegap Android AlarmManager plugin?

> ID：11076391
> 
> 赞同：3
> 
> 时间：2012-06-18T02:39:08.120
> 
> 标签：android, cordova, alarmmanager, phonegap-plugins

Is there a PhoneGap plugin to interact with the android AlarmManager api?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-10T06:04:19.670

你在找这个吗？ [https://github.com/katzer/cordova-plugin-local-notifications](https://github.com/katzer/cordova-plugin-local-notifications)

您可以使用上述插件安排本地通知

# javascript - .css jquery 边框颜色与 css 输入混淆：焦点设置

> ID：11076393
> 
> 赞同：0
> 
> 时间：2012-06-18T02:39:20.227
> 
> 标签：javascript, jquery, css, input, focus

向一些可能偶然发现此问题的 jQuery 向导提出问题。

例如，当我使用border-left-color 为使用jquery 的输入元素设置颜色时，当此输入元素`input:focus{ border-color: somecolor; }`在css 文件中时，jquery 会破坏input:focus 设置。当输入获得焦点时，它会保持我使用 jQuery 设置的颜色。

这是一个错误吗？

如果没有，我该如何防止这种情况发生？:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T02:41:40.273

jQuery`.css`比 CSS 文件中的定义更强大，因为它添加了内联样式。

您应该添加`!important`到`:focus`css 定义中。

[**现场演示**](http://jsfiddle.net/AVPHV/)

> 当使用 .css() 作为 setter 时，jQuery 会修改元素的 style 属性。
> 例如，**$('#mydiv').css('color', 'green')**等价于**document.getElementById('mydiv').style.color = 'green'**。

[`.css`文档](http://api.jquery.com/css/)

# regex - how to match multi-line text?

> ID：11076395
> 
> 赞同：3
> 
> 时间：2012-06-18T02:39:46.023
> 
> 标签：regex, boost, boost-xpressive

```
string str = "hello world!\r\naa=`xxx_1`\r\nhello world!";
sregex rx = sregex::compile(".+=`(.+)_1`");
smatch what;
if( regex_match( str, what, rx ) )
{
    std::cout << what[1] << '\n';
} 
```

this can't work, i use boost.xpressive not boost.regex, how to match multi-line text?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-18T07:32:27.887

我已经解决了这个问题。

[http://boost-sandbox.sourceforge.net/libs/xpressive/doc/html/boost_xpressive/user_s_guide/matching_and_searching.html](http://boost-sandbox.sourceforge.net/libs/xpressive/doc/html/boost_xpressive/user_s_guide/matching_and_searching.html)

regex_match() 算法仅在正则表达式从头到尾匹配整个输入时才报告成功。如果正则表达式仅匹配输入的一部分，则 regex_match() 将返回 false。如果要在字符串中搜索正则表达式匹配的子字符串，请使用 regex_search() 算法。

# tastypie - tastypie - List related resources keys instead of urls

> ID：11076396
> 
> 赞同：1
> 
> 时间：2012-06-18T02:39:58.090
> 
> 标签：tastypie

When I have a related Resource, I would like to list foreign keys, instead of a url to that resource. How is that possible aside from dehydrating it?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T10:04:56.800

我不确定在不使田地脱水的情况下是否有可能。我通常有实用函数来处理外键脱水和多对多关系的转换，如下所示：

```
#api_utils.py
def many_to_many_to_ids(bundle, field_name):
    field_ids = getattr(bundle.obj, field_name).values_list('id', flat=True)
    field_ids = map(int, field_ids)
    return field_ids

def foreign_key_to_id(bundle, field_name):
    field = getattr(bundle.obj, field_name)
    field_id = getattr(field, 'id', None)
    return field_id 
```

并将它们应用于这样的字段：

```
#api.py

from functools import partial

class CompanyResource(CommonModelResource):
    categories = fields.ManyToManyField(CompanyCategoryResource, 'categories')

    class Meta(CommonModelResource.Meta):
        queryset = Company.objects.all()

    dehydrate_categories = partial(many_to_many_to_ids, field_name='categories')

class HotDealResource(CommonModelResource):
    company = fields.ForeignKey(CompanyResource, 'company')

    class Meta(CommonModelResource.Meta):
        queryset = HotDeal.objects.all()

    dehydrate_company = partial(foreign_key_to_id, field_name='company') 
```

# python - IDLE中奇怪的变量多重赋值python

> ID：11076399
> 
> 赞同：3
> 
> 时间：2012-06-18T02:40:59.820
> 
> 标签：python, variables, python-idle

我真的很困惑，我只是写了这个

```
x = 0
y = 42

#Can also be written like this

x, y = 0, 42

print x
print y 
```

并将其复制粘贴到 IDLE 中进行测试（我正在尝试沿着 PHP 重新学习 python），然后输入“x”，它返回 0。我输入 y，它给了我一个未定义的错误。当我正常运行它时，它工作正常。这是怎么回事？

这是确切的错误：

Traceback（最近一次调用最后一次）：文件“”，第 1 行，在 y NameError：未定义名称“y”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T02:52:51.480

我认为您的问题可能与将多行代码发布到 IDLE 中有关。看看以下内容：

[将多行粘贴到 IDLE](https://stackoverflow.com/questions/1615379/pasting-multiple-lines-into-idle)

希望这可以帮助！

# c# - HtmlPage.Window { Eval vs Invoke }

> ID：11076400
> 
> 赞同：0
> 
> 时间：2012-06-18T02:41:08.183
> 
> 标签：c#, javascript, eval, invoke, silverlight-5.0

**What**'re differences between :

```
System . Windows . Browser . HtmlPage . Window . Eval ( ... );

System . Windows . Browser . HtmlPage . Window . Invoke ( ... ); 
```

What I reached till now is

**Eval :**

*   Apply JavaScript code applied withen it. ( Code written in Silverlight )
*   Invoke JavaScript global methods without parameters . ( Methods written in JavaScript )

**Invoke :**

*   Call JavaScript global methods with/out parameter/s. ( Methods written in JavaScript )

If I'm true, are there other differences ?
I really need a simple but powerful difference example.

MSDN References :

*   [Eval](http://msdn.microsoft.com/en-us/library/system.windows.browser.htmlwindow.eval%28v=vs.95%29.aspx)
*   [Invoke](http://msdn.microsoft.com/en-us/library/system.windows.browser.scriptobject.invoke%28v=vs.95%29)

Finally, **Which** function doing a real injection ?

Regards,

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T05:58:16.657

试试这个代码

```
HtmlPage.Window.Eval("function addElement(string){ var p = document.createElement('p'); p.innerHTML = string; document.body.appendChild(p);}")  
HtmlPage.Window.Eval("addElement('Eval function');")  
HtmlPage.Window.Invoke("addElement", "Invoke function") 
```

他在页面上添加了 2 段。和function 的
区别在于**调用**带（或不带）参数的函数并**执行代码**。`Eval``Invoke`**`Invoke`****`Eval`**

# ruby - 如何创建一个存储实例的类？

> ID：11076401
> 
> 赞同：2
> 
> 时间：2012-06-18T02:41:18.507
> 
> 标签：ruby

我想要类似以下的东西，但希望它可用于不同的类。

如何重构此代码，以便以最小的努力将其包含在一个类中，并且该类将在调用 new 时自动收集实例？

我已经尝试了各种各样的事情，比如覆盖新的或初始化的，但就是无法让魔法发生。

```
 class Person      
      @@people_instances = []

      def initialize
         @@people_instances << self
      end

      def self.instances
         @@people_instances
      end

   end

People.new
People.new
Poople.instances

 => [#<Person:0x000001071a7e28>, #<Person:0x000001071a3828>] 
```

在下面的一些反馈之后，我认为答案不是将实例放在类变量中，因为它将永远留在内存中。Rails 缓存也不太合适，因为我不需要实例持久化。

以下代码使用类实例变量而不是类变量。

[http://www.dzone.com/snippets/class-variables-vs-class](http://www.dzone.com/snippets/class-variables-vs-class)

```
class Employee
  class << self; attr_accessor :instances; end
  def store
    self.class.instances ||= []
    self.class.instances << self
  end
  def initialize name
    @name = name
  end
end
class Overhead < Employee; end
class Programmer < Employee; end
Overhead.new('Martin').store
Overhead.new('Roy').store
Programmer.new('Erik').store
puts Overhead.instances.size    # => 2
puts Programmer.instances.size  # => 1 
```

这些实例变量对于每个 Rails 请求是唯一的还是会持续存在？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T03:02:07.760

**更新的答案**

如果您只想在请求期间保持它可用，那么以前的答案都无法做到**。**仅在请求-响应周期内保持其可用的解决方案是使用在控制器方法中分配的线程本地，例如：

```
class YourController < ApplicationController

  around_filter :cache_objects

  protected

  def cache_objects
    Thread.current[:my_objects] = ['my-object', 'my-other-object']
    yield
    ensure
      Thread.current[:my_objects]
  end

end 
```

然后，在需要它的代码处，您只需`Thread.current[:my_objects]`做任何您想做的事情。您需要使用**around_filter**，因为您的 Web 框架或服务器结构可能会尝试重用线程，唯一真正的解决方案是在请求完成后清理它们以避免内存泄漏。

* * *

**旧答案**

不确定您要做什么，但是您可以使用以下命令轻松选择类的每个实例`ObjectSpace`：

```
ObjectSpace.each_object(String) { |s| puts(s) } 
```

如果您需要作为数据库**缓存**，只需使用 Rails 缓存，加载这些对象一次，然后将它们保存在缓存中。使用 Rails 缓存时，您只需将对象发送到缓存：

```
Rails.cache.write( "my_cached_objects", [ 'first-object', 'second-object' ] ) 
```

然后将它们带到其他地方：

```
Rails.cache.fetch("my_cached_objects") do 
  # generate your objects here if there was a cache miss
  [ 'first-object', 'second-object' ]
end 
```

如您所见，您甚至不必调用`cache.write`，您只需使用 fetch ，每当缓存未命中时，将调用给定的块并创建您的对象。

[您可以在此处](http://guides.rubyonrails.org/caching_with_rails.html)阅读有关 rails 缓存的更多信息，您可以在此处查看所有支持的[ActiveSupport::Cache::Store](http://api.rubyonrails.org/classes/ActiveSupport/Cache/Store.html)方法。

另一种不使用`ObjectSpace`但仍然具有丑陋解决方案的方法，现在使用`alias_method`：

```
module Counter

  def self.included( base )
    base.extend(ClassMethods)
    base.class_eval do
      alias_method :initialize_without_counter, :initialize
      alias_method :initialize, :initialize_with_counter
    end
  end

  def count_class_variable_name
    :"@@#{self.class.name.downcase}_instances"
  end

  def initialize_with_counter( *args )
    unless self.class.class_variable_defined?(count_class_variable_name)
      self.class.class_variable_set(count_class_variable_name, [])
    end

    self.class.class_variable_get(count_class_variable_name) << self
    initialize_without_counter(*args)
  end

  module ClassMethods

    def all_instances
      class_variable_get(:"@@#{name.downcase}_instances")
    end

  end

end

class Person

  def initialize
    puts 'new person'
  end

  include Counter

end

p1 = Person.new
p2 = Person.new
p3 = Person.new

puts Person.all_instances.size 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T02:59:01.453

lib/keeper.rb

```
def initialize
  instance_eval "@@#{self.class.to_s.downcase}_instances ||= []"
  instance_eval "@@#{self.class.to_s.downcase}_instances << self"
end

def self.instances
  return class_eval "@@#{self.to_s.downcase}_instances"
end 
```

人.rb

```
class Person
  eval File.open('./lib/keeper.rb','rb').read
end 
```

然后这个工作：

```
Person.new
Person.new
Person.instances 
```

# python - Dynamically updating images on website

> ID：11076404
> 
> 赞同：1
> 
> 时间：2012-06-18T02:42:23.497
> 
> 标签：python, django, dynamic, web, matplotlib

I am accessing the twitter streaming API. I generate a map using Basemap in python. I want only certain parts of the map to change with time (for eg. every second). Is it hard to do? Do I need to leave Basemap and look for something else? Please help!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T02:45:54.370

You can send an ajax request and update the html contents dynamically.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T03:00:07.893

一种可能的做法：将地图分成瓦片，分别对待；使用 Basemap 仅生成包含新数据的地图图块，然后使用 Ajax 仅更新网页上的该图块。

当然，根据地图上数据更改的性质，这种方法可能适合您，也可能不适合您——gerrymandering 是不可能的。

您需要编写逻辑来了解新数据属于哪个切片，然后使用底图为该时间创建一个新图像，然后智能更新切片图像。您还必须使用边距和填充（在 matplotlib 和 CSS 中）来干净地将瓷砖拼凑在一起。

...

当方法变得如此复杂时，应该重新评估是否有更好的工具可用。底图听起来不太适合您需要做的事情。

# android - 如何在 ADB shell 和 Android 应用程序之间来回发送消息？

> ID：11076408
> 
> 赞同：6
> 
> 时间：2012-06-18T02:43:14.267
> 
> 标签：android, android-intent, adb

我一直在寻找答案或过去 3 天，但尚未找到有效的答案。我正在尝试编写一个可以使用自定义命令从 ADB 控制的 Android 应用程序。无论如何我可以在应用程序和 ADB shell 之间来回发送字符串吗？

在此先感谢，并为我的菜鸟问题感到抱歉。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-18T03:03:01.027

当然，有几种方法可以做到这一点。

*   您可以使用 unix 域套接字，并从 android 应用程序和通过滥用 ndk 构建的命令行可执行文件打开它，推送到设备上与版本相关的位置（/data/local、/sqlite_stmt_journals 等) 并运行。编辑：在最近的 android 版本中可能没有这样的可写/可执行目录。您可能必须让应用程序本身将可执行文件写入其私有目录并设置全局读取和执行权限。进一步编辑： adb 也可以转发 unix 套接字。

*   与互联网套接字相同，只是现在您可以选择设置 adb 端口转发（假设 android 应用程序是“服务器”端），以便从在您的开发机器上运行的进程直接与 android 应用程序进行通信，无需通过 adb shell 传递数据。除非声明互联网许可是令人反感的（它应该比让你的 PC 端应用程序“驱动”adb 更令人担忧），这可能是最接近“官方”功能并且对 Android 版本依赖性最小的方法。它也可以很容易地适应通过 wifi 进行通信。

*   您可以使用一对 fifo 并使用 shell 命令写入和读取它们（为了可移植性，在应用程序的私有存储中创建它们，但让它们在世界范围内可读/可写）

*   你也许可以用 pty 玩一些游戏

*   你可以我想用文件作为邮箱吗

*   您可以使用“am”命令发送 Intent（如果通信效率有点低，至少对启动 android 应用很有用）

# php - Is there a memory leak in my script or is it another culprit?

> ID：11076410
> 
> 赞同：0
> 
> 时间：2012-06-18T02:43:52.860
> 
> 标签：php, linux, apache, codeigniter, memory-leaks

I recently switched from a shared to dedicated host giving me alot more monitoring/control. I've been trying to debug an issue I've had since before I switched, very high memory usage. I think I've narrowed it down to a specific script that is a subscription to an instagram feed/api. It works in a codeIgniter framework.

This is a screenshot of my processes. Note the really high httpd memory values ![enter image description here](../Images/c279786a9c90abc953a1c3610ffc4547.png)

Here's my controller in codeIgniter

```
class Subscribe extends CI_Controller {

    function __construct() {
        parent::__construct();
        $this->instagram_api->access_token = 'hidden';
    }
    function callback()
    {

    //echo anchor('logs/activity.log', 'LOG');
$min_id = ''; 
$next_min_id = '';      

$this->load->model('Subscribe_model');
$min_id = $this->Subscribe_model->min_id();

echo $min_id;

    $pugs = $this->instagram_api->tagsRecent('tagg','',$min_id);
    if($pugs){
    if (property_exists($pugs->pagination, 'min_tag_id')) {
            $next_min_id = $pugs->pagination->min_tag_id;
        }   
    foreach($pugs as $pug) {
        if(is_array($pug)) {     
            foreach($pug as $media) { 
                $url = $media->images->standard_resolution->url;
                $m_id = $media->id;
                $c_time = $media->created_time;
                $user = $media->user->username;
                $filter = $media->filter;
                $comments = $media->comments->count;
                $caption = $media->caption->text;
                $link = $media->link;
                $low_res=$media->images->low_resolution->url;
                $thumb=$media->images->thumbnail->url;
                $lat = $media->location->latitude;
                $long = $media->location->longitude;
                $loc_id = $media->location->id;
                $date = new DateTime('2000-01-01', new DateTimeZone('Pacific/Nauru'));

                $data = array(
                   'media_id' => $m_id,
                   'min_id' => $next_min_id,
                   'url' => $url, 
                   'c_time' => $c_time,
                   'user' => $user,
                   'filter' => $filter,
                   'comment_count' => $comments,
                   'caption' => $caption,
                   'link' => $link, 
                   'low_res' => $low_res,
                   'thumb' => $thumb,
                   'lat' => $lat,
                   'long' => $long,
                   'loc_id' => $loc_id,
                );
                $this->Subscribe_model->add_pug($data);

            }

        }

    }
    } 
```

and here is the model....

```
class Subscribe_model extends CI_Model {

    function min_id(){

        $this->db->order_by("c_time", "desc");      
        $query = $this->db->get("pugs");

        if ($query->num_rows() > 0)
        {
           $row = $query->row(); 
           $min_id = $row->min_id;
           if(!$min_id){
            $min_id ='';
           }
        }   

        return $min_id;

    }

    function add_pug($data){

        $query = $this->db->get_where('pugs', array('media_id'=>$data['media_id']));
        if($query->num_rows() > 0){
            return FALSE;   
        }else{
            $this->db->insert('pugs', $data);   
        }

    }
} 
```

//============================EDIT========================//

I've converted some of the services over to fast-cgi and it seems to have brought my memory usage down significantly but I've noticed a bump in CPU. I was hoping that switching to a dedicated server would have far less headaches and make things much easier but it's been a nightmare so far. Affraid I've bit off more than I can chew.

Another fear of mine is adding some more domain names to the server. Will that add a new process that will run real high like the multiple php-cgi's running in the last image?

Here's my most recent outputs... ![enter image description here](../Images/598bd575315eeabdcaac7ce3a6a70bb2.png) ![enter image description here](../Images/be18f3629e8b6ffc7bf0e5d8fd82408b.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T03:58:37.570

为确保没有真正的内存泄漏，请尝试只在服务器上运行 httpd/myslqd（killall Xorg / telinit 3），然后停止上述两个服务。记下`free|grep Mem |sed 's/\([^0-9]*[^\ ]*\)\{3\}\([^\ ]*\).*/\1/'`. 这是 X 个空闲字节的 RAM。现在，启动 httpd/mysqld 服务并让它们运行几百个请求。停止服务并再次记下数字，重复直到对中间结果满意。

httpd 消耗大量 RAM 的情况并不少见。mysqld 也缓存在内存中。这仅仅是因为，如果连续多次（连续）遇到相同的请求，则静态缓存已全部缓冲并且可以使用。

对于 PHP，一个类是预编译的，一旦系统在第一次编译后需要它，它就不必逐行解释脚本，它会有一个字节码编码的对象可以使用。如果 fstat.mtime > bytecode.mtime..

您可以使用以下命令分析非交换类型的实际内存使用情况：

```
ps -ylC httpd --sort:rss 
```

提供静态文件的子进程大小约为 2-3M。对于PHP等动态内容，可能在15M左右

要配置 apache 如何设置工作程序，这些参数在 httpd.conf 中有效：

```
StartServers, 
MaxClients, 
MinSpareThreads, 
MaxSpareThreads, 
ThreadsPerChild, 
MaxRequestsPerChild 
```

检查此链接： http: [//www.howtoforge.com/configuring_apache_for_maximum_performance](http://www.howtoforge.com/configuring_apache_for_maximum_performance)

> 第 3.5 节：
> 
> MaxClients 设置服务器可以支持的最大同时请求的限制。产生的子进程数量不会超过这个数量。它不应该设置得太低，以至于新连接被放入队列中，最终超时并且服务器资源未被使用。将此设置得太高将导致服务器开始交换并且响应时间将急剧下降。MaxClients 的适当值可以计算为： MaxClients = Web 服务器专用的总 RAM / 最大子进程大小

Apache 性能调整可在此处获得[http://httpd.apache.org/docs/2.0/misc/perf-tuning.html](http://httpd.apache.org/docs/2.0/misc/perf-tuning.html)，请跳至有关进程创建的部分以获取有关上述配置选项的更多信息。

# windows-phone-7 - How to turn off Background Audio Agents in Windows Phone 7.5?

> ID：11076411
> 
> 赞同：1
> 
> 时间：2012-06-18T02:44:07.867
> 
> 标签：windows-phone-7, audio, background, agent

I'm following this [Hands on Lab](https://docs.google.com/open?id=1WjSDA6auaX8oko7nnCAuE_YYBUagu65P1XqrqxAmsUVSvObUgjj9iG3U4Tt4)

And then I've a small question: how to turn off this program completely? I tried: BackgroundAudioPlayer.Instance.Close(); but it stills running. I wanna remove this control when program is turned off.

See [this picture](https://docs.google.com/viewer?pid=bl&srcid=ADGEESj7L5tvkEIed7ZwCP7F_HKDoZ8dMpGBH85j0g2PUtGuPq2KA6jB7j-3Ot3uf-Bk8TGFP9FIdpFQhitMsKX871vylsNO5ppj2_8MS4rn23B5P_M2dEcXZTN78JoO74rQua2D5BFj&q=cache%3az_VvyMYOaLcJ%3aaz12722.vo.msecnd.net/windowsphonetrainingcourse1-5-2/labs/musicplayerlab1-0-0/MusicPlayer.docx%20&docid=9b102da23a9d3dcb2bc43105fb3fcc9f&a=bi&pagenumber=25&w=800). thanks so much :)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T03:09:26.060

`BackgroundAudioPlayer.Instance.Stop()`?

此外，[这个](http://blogs.msdn.com/b/wpukcoe/archive/2012/02/09/background-audio-in-windows-phone-7-5-part-1.aspx)3 部分系列非常好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T10:24:58.660

我使用`BackgroundAudioPlayer.Instance.Close()`并且代理已关闭

> 关闭播放器并移除为其保留的所有资源，包括当前的 AudioTrack。

您可以看到在`OnPlayStateChanged`事件处理程序中触发了 Shut down 事件

此外，在输出窗口中看到时，后台任务被终止

# iphone - ios编程中如何知道ios设备的摆动方向？

> ID：11076413
> 
> 赞同：2
> 
> 时间：2012-06-18T02:44:37.003
> 
> 标签：iphone, gravity, uiaccelerometer, cmmotionmanager

我是IOS编程新手，不知道如何判断设备的摆动方向。我已经搜索了很长时间这个问题，但我发现的很少。有人可以帮助我吗？非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T02:58:07.887

试试这个：

我已经为你搜索了一些帖子，希望对你有所帮助。

[如何检测iphone中的抖动方向](https://stackoverflow.com/questions/6223296/how-to-detect-direction-of-shake-in-iphone)

[如何确定 iPhone 摇晃的方向](https://stackoverflow.com/questions/1018770/how-to-determine-the-direction-of-a-iphone-shake)

# java - 从动态创建的 JTextField 获取内容

> ID：11076415
> 
> 赞同：1
> 
> 时间：2012-06-18T02:44:50.980
> 
> 标签：java, swing, jtextfield

我正在使用 Swing 学习 Java，但在使用`JTextField`. 在我的程序中，我想动态添加`JTextFields`一些文本：

```
while( (ln = bufFile.readLine()) != null ) {
    // inIdPanel is JPanel
    inIdPanel.add(new JTextField(ln));
} 
```

而且效果很好。但是，这些内容`JTextFields`可以由用户修改，以后我想`getText()`从他们所有人那里调用。这可能吗？我怎样才能做到这一点？

我看到了这个问题：[Java Swing: JButton created new JTextField(s)](https://stackoverflow.com/questions/11061748/java-swing-jbutton-creates-new-jtextfields)但这还不足以解决我的问题（我认为在我的情况下使用数组不是一个好主意，但也许我错了）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T02:50:43.787

对于一个简单的解决方案，只需添加一个`ArrayList<JTextField> textFieldList`并添加到您发布的代码中：

```
while((ln = bufFile.readLine()) != null) {
    textFieldList.add(new JTextField(ln));
    inIdPanel.add(textFieldList.get(textFieldList.size()-1));
} 
```

然后，当您想要访问文本字段时，您只需遍历它们，例如

```
for (JTextField jtf : textFieldList) {
    /* Operate on jtf, call methods, etc */
} 
```

如果对可以添加的文本字段的数量有定义的限制，则可以将 替换为`ArrayList`数组，但如果该数量未知，则列表很好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T02:51:54.527

您无法调用的原因`getText()`是您没有存储对`JTextField`创建时的引用。您将需要在创建它们时使用[数组](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/arrays.html)或[集合](http://docs.oracle.com/javase/tutorial/collections/index.html)来存储`JtextField`s，以便稍后在它们上调用该方法。A`collection`会比 an 更容易，`array`因为你不知道要读多少行，所以你希望它能够增长。

```
List<JTextField> fields = new ArrayList<JTTextField>();
while( (ln = bufFile.readLine()) != null ) {
    JTextField field = new JTextField(ln);
    inIdPanel.add(field);
    fields.add(field);
} 
```

然后你可以`.getText()`从他们所有人中调用

```
for(JTextField field: fields){
    System.out.println(field.getText());
} 
```

# mysql - mysql innodb inner join with longtext very slow

> ID：11076416
> 
> 赞同：3
> 
> 时间：2012-06-18T02:44:59.677
> 
> 标签：mysql, performance, innodb, longtext

I migrated all MySQL tables of one project from MyISAM to InnoDB last week, in order to support transaction. I used the command of `alter table` for this.

Most works fine, however one particular query runs very very slow, and it always gives the error `Incorrect key file for table '/tmp/#sql_xxxx_x.MYI`

Later I narrowed down the problem into the inner join of 2 tables, the `user` table and `agreement` table. And the inner join took place between the foreign key field of `user` (i.e. `agreement_id`) and primary key field of `agreement` (i.e. `id`).

The `user` table has only 50,000 rows of data, and the `agreement` table has, well, one single row. And we have set up the index for the `agreement_id` of user.

In any case, this seems to be a very light-weighted query, but it turns out to be the whole bottle neck.

Here is the full schema of `agreement`:

```
CREATE TABLE IF NOT EXISTS `agreement` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `remark` varchar(200) NOT NULL,
  `content` longtext NOT NULL,
  `is_active` tinyint(1) NOT NULL,
  `date_stamp` datetime NOT NULL,
  PRIMARY KEY (`id`)
) DEFAULT CHARSET=utf8 AUTO_INCREMENT=2 ; 
```

One thing I doubt about is the longtext field of `remark` inside the `agreement` table, but we did NOT use the field for the inner join, in fact the query is slow even if we did NOT select `remark` in the query result.

finally, we converted the table of `agreement` from `innoDB` back to `MyISAM`, than everything becomes normal. And the query is finished in less than 1 second.

Now, my question is what actually is going on here? Does that mean once an innoDB table contains any text field, then the table could not be used for inner join?

I wish I could know the real reason so that I could avoid the same problems in the future.

thanks a lot.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T11:53:02.403

这是一个著名而棘手的问题。最可能的原因是 /tmp 中的空间不足。

这是我保存在书签中的一个链接，可能会对您有所帮助：[http ://www.mysqlperformancetuning.com/a-fix-for-incorrect-key-file-for-table-mysql](http://www.mysqlperformancetuning.com/a-fix-for-incorrect-key-file-for-table-mysql)

> 根据我的经验，虽然它是有限的，但看到此错误消息的主要原因是您的 tmpdir 空间不足。像我一样，你会检查你有多少可用空间：1Gb、2Gb、4Gb。这可能还不够。原因如下：MySQL 可以在几秒钟内创建比这更大的临时表，快速填满任何可用空间。自然取决于查询的性质和数据库的大小。

你也可以在你的桌子上尝试[修复](http://dev.mysql.com/doc/refman/5.0/fr/repair-table.html)，但对我来说它和霹雳舞一样有用：/

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T17:05:27.860

也许这里的问题是`remark`字段定义为`varchar(200)`？请记住，临时表和内存表`varchar`以固定长度存储。`varchar(200)`因此，即使它们都是空的，50k 行也会消耗大量内存。

如果这是问题所在，那么您可以尝试以下几种方法之一：

*   如果只有几行在列中有值，则创建`varchar(200)`允许 NULL 的列，并始终使用 NULL 值而不是空字符串
*   更改`varchar(200)`为文本（当然有缺点 - 它总是使用磁盘上的临时表）
*   也许你不需要 200 个字符？尝试使用更小的`VARCHAR`尺寸
*   尝试调整 tmp_table_size 和 max_heap_table_size，以便您可以处理内存中较大的临时表[http://dev.mysql.com/doc/refman/5.1/en/internal-temporary-tables.html](http://dev.mysql.com/doc/refman/5.1/en/internal-temporary-tables.html)
*   使用 percona 服务器，因为它们支持内存表的动态行格式[http://www.mysqlperformanceblog.com/2011/09/06/dynamic-row-format-for-memory-tables/](http://www.mysqlperformanceblog.com/2011/09/06/dynamic-row-format-for-memory-tables/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T14:36:37.013

您查询的目的是什么？我从您的评论中看到，您只列出了用户信息，而没有任何协议让我相信您正在寻找有协议的用户？由于您在引擎之间进行转换，因此我认为您在添加约束之前正在进行清理。如果是这样，请考虑来自用户表的左连接，而不是像：

```
select user.* from user left join agreement on user.agreement_id = agreement.id where user.agreement_id != 0; 
```

如果它不是清理，而只是寻找有协议的用户，我们让它变得简单

```
select user.* from user where user.agreement_id != 0; 
```

如果目的是别的，考虑在 user.agreement_id 上添加一个索引，因为内部连接可能需要它来提高速度。让我们知道真正的目的，您可能会得到更好的帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-25T15:40:38.800

InnoDB 有自己的缓冲区大小设置等。检查一下，如果你可以调整它，继续。只是为了测试尝试将它们加倍，如果有帮助，您可能需要优化它。它可以产生很大的不同。

一些可能有帮助的链接：

[http://www.mysqlperformanceblog.com/2007/11/03/choosing-innodb_buffer_pool_size/](http://www.mysqlperformanceblog.com/2007/11/03/choosing-innodb_buffer_pool_size/)

[http://dev.mysql.com/doc/refman/5.5/en/innodb-buffer-pool.html](http://dev.mysql.com/doc/refman/5.5/en/innodb-buffer-pool.html)

# .net - .net MVC Web API : How can I authenticate user in an attribute and then store it to be used in controller?

> ID：11076417
> 
> 赞同：0
> 
> 时间：2012-06-18T02:45:00.980
> 
> 标签：.net, asp.net-web-api, asp.net-authorization

I am building a RESTful API with the .net MVC Web API framework, and want to store some user information that comes in for updates/saves.

I am using an authorization attribute that authorizes based on tokens. When a valid token is seen, I want to grab that user's information from the database, and store the user object to be used inside the controller.

Is there an easy way to do this? It looks like in the regular .net MVC you would just store the user in the HttpContext. That seems to no longer exist though.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T06:29:38.680

您可以通过在操作参数中使用用户对象并注册一个知道如何处理的自定义绑定器来对用户对象进行自定义参数绑定。

请参阅此处如何使用 Web API 进行参数绑定：http: [//blogs.msdn.com/b/jmstall/archive/2012/04/16/how-webapi-does-parameter-binding.aspx](http://blogs.msdn.com/b/jmstall/archive/2012/04/16/how-webapi-does-parameter-binding.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T10:41:23.103

在 RC 中，可以通过 ApiController 的 User 属性获取当前用户的信息：

[http://msdn.microsoft.com/en-us/library/system.web.http.apicontroller.user(v=vs.108)](http://msdn.microsoft.com/en-us/library/system.web.http.apicontroller.user%28v=vs.108%29)

# node.js - Express documentation

> ID：11076421
> 
> 赞同：4
> 
> 时间：2012-06-18T02:46:09.007
> 
> 标签：node.js, express

I have just started studying node.js and express, the documentation of express on the home page is just too simple for me as a beginner.

for example,

```
app.configure('development', function(){
    app.use(express.static(__dirname + '/public'));
    ...
}); 
```

It may seems very obvious to you, but I just wonder what **express.static** mean? I can't find an answer by searching Google.

This is just one example that I can't understand the code.

So is there any better documentation of express for the absolute beginner?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-18T03:00:36.237

我同意 Express 文档读起来更像一本书，而不是 API 文档。在 的情况下`express.static`，这是一个从 Connect ( ) 重新导出的中间件`connect.static`，Express 是基于该中间件构建的。从[文档的中间件部分](http://expressjs.com/guide.html#middleware)：

> 通常使用连接中间件，您将需要（'connect'），如下所示：
> 
> ```
> var connect = require('connect');
> app.use(connect.logger());
> app.use(connect.bodyParser()); 
> ```
> 
> 这有点烦人，所以 express 重新导出了这些中间件属性，但是它们是相同的：
> 
> ```
> app.use(express.logger());
> app.use(express.bodyParser()); 
> ```

[您可以在他们的网站](http://www.senchalabs.org/connect/)上看到中间件 Connect 公开的内容。特别是，请查看[静态中间件](http://www.senchalabs.org/connect/static.html)的文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T03:01:49.857

`express`是[类](http://en.wikipedia.org/wiki/Class_%28computer_programming%29)并且`static`是该类的成员。什么`express.static`意思是“使用*express*类的*静态*方法”，该方法的作用是初始化一个静态文件服务器，由你的 node.js 服务器提供服务。*`static`*

# mysql - how to link wordpress/buddypress to a sub domain

> ID：11076422
> 
> 赞同：0
> 
> 时间：2012-06-18T02:46:16.853
> 
> 标签：mysql, wordpress, dns, subdomain, buddypress

I'm trying to understand how my sub domain would still fetch data from the original website address. Im creating a mobile version of my site, for example: www.m.website.com and I'm running wordpress and buddypress. My question is, how would I grab information for my users? Do I have to install wordpress and buddypress again on the sub domain? And how would I access my database via the sub domain? Thanks ahead of time guys

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T05:14:46.490

在同一个数据库上运行两个 WordPress 站点会带来一些问题。我的意见是使用[**WordPress Mobile Pack**](http://wordpress.org/extend/plugins/wordpress-mobile-pack/)或[**DudaMobile 之**](http://wordpress.org/extend/plugins/mobile-website-builder-for-wordpress-by-dudamobile/)类的插件来设置您的移动网站。这些插件将检测移动设备并将样式切换到移动版本。

另一种选择是使用[响应式设计](http://wordpress.org/extend/themes/responsive)，或根据可用空间缩放网站元素。[阅读本文](http://www.blogtips.org/how-to-enable-mobile-theme-on-wordpress-blog/)也将对您有所帮助。

干杯！！！

# php - 从 Zend 框架项目发送时事通讯

> ID：11076428
> 
> 赞同：0
> 
> 时间：2012-06-18T02:47:08.873
> 
> 标签：php, zend-framework, cron, newsletter

我有一个 Zend Framework 项目，使用版本 1.10.8 和 Doctrine 1.2.4。我使用 Zend_Auth 和 Zend_Acl，其中动作是资源。我最近添加了时事通讯功能，想知道我将如何一起玩。这是我第一次做真正的时事通讯，另外还有 Zend。

所以我的第一种方法是有一个 php 脚本连接到数据库获取模板，获取订阅者的名称和电子邮件。解析用户自定义模板并发送。我将使用 swiftMailer。所以我会设置一个 cron 作业来为每个时期调用该文件。

现在我担心的是 ACL。如果脚本在 Zend 之外（即我的项目）并点击 Zend 操作（url）来执行所有的东西系统将如何验证自己（我的意思是系统运行 php 文件的 cron） ?

使用 ZF 的其他方法是什么？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T05:18:30.160

访问给定 url 所需的资源，即 /newsletter/send 将可供所有人访问。如果真人点击网址并不重要，因为该页面的内容会很无趣=）

脚本本身将简单地检查是否有邮件要发送，然后从 DB 等中获取所有用户。Newsletter-methology 非常不依赖于 Zend。

不过，您也可以使用 Zend 和 Zend_Mail 轻松完成模板化工作。这就是我在 Zend 中处理电子邮件的方式：

```
$mail = new Zend_Mail('UTF-8');

$mailView = new Zend_View();
$mailView->setScriptPath(APPLICATION_PATH.'/views/email/');
$mailView->assign('title', $this->_report->getTitle());
$mailView->assign('text', $this->_report->getText());

$mail->addTo($user->getEmail(), $user->getFullnameBySurname());
$mail->setBodyHtml($mailView->render('emailregular.phtml')); // /application/views/email/emailregular.phtml
$mail->setBodyText(strip_tags($mailView->render('emailregular.phtml'))); //might not be the cleanest way...

try {
    $mail->send();
    $mail->clearRecipients(); // This clears the addTo() for Zend_Mail as in my script i only have one instance of zend_mail open while looping through several users
    $this->_log->info('Mail out for user ....');
  } catch (Zend_Mail_Transport_Exception $e) {
    $this->_log->error('Zend_Mail_Transport_Exception for User('.$user->getid().') - Mails were not accepted for sending: '.$e->getMessage());
  } catch (Zend_Mail_Protocol_Exception $e) {
    $this->_log->error('Zend_Mail_Protocol_Exception for User('.$user->getid().') - SMTP Sentmail Error: '.$e->getMessage());
  } catch (Exception $e) {
    $this->_log->error('Unknown Exception for User('.$user->getid().') - SMTP Sentmail Error: '.$e->getMessage());
  } 
```

希望这是你要的=）

# python - python dict所有元素的高效比较

> ID：11076438
> 
> 赞同：4
> 
> 时间：2012-06-18T02:50:49.143
> 
> 标签：python, dictionary, compare

我正在寻找一种更有效的方法来比较 python dict 的所有元素。

这是我正在做的伪代码：

```
for key1 in dict:
    for key2 in dict:
        if not key1 == key2:
            compare(key1,key2) 
```

如果字典的长度为 N，则为 N^2 - N。有没有办法不重复第二个循环中的元素？对于列表，这将是：

```
N = len(list)
for i in range(1:(N-1)):
    for j in range((i+1):N):
        compare(list[i], list[j]) 
```

无论如何要为 dict 案做这件事？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-18T02:58:10.297

也许像

```
>>> import itertools
>>> 
>>> d = {1:2, 2:3, 3:4}
>>> 
>>> for k0, k1 in itertools.combinations(d,2):
...     print 'compare', k0, k1
... 
compare 1 2
compare 1 3
compare 2 3 
```

如果你不关心你得到（1,2）还是（2,1）。[当然，`sorted(d)`如果你想要一个特定的顺序，你可以迭代或一些变体，或者如果重要的话，比较 (k0, k1) 和 (k1, k0)。]

[顺便说一句：不要调用你的列表列表或你的 dicts 字典——这会破坏内置函数，而且它们很方便。]

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-18T02:56:22.443

您可以使用[OrderedDict](http://docs.python.org/library/collections.html#collections.OrderedDict)，然后编写类似于您已经为列表编写的代码。

这是一个例子：

```
from collections import OrderedDict

def compare(a, b):
    print "compare", a, b

d = OrderedDict([('banana', 3), ('apple', 4), ('pear', 1), ('orange', 2)])

for key1 in d:
    for key2 in reversed(d):
        if key1 == key2:
            break
        compare(key1, key2) 
```

当我运行它时，它会打印：

```
compare banana orange
compare banana pear
compare banana apple
compare apple orange
compare apple pear
compare pear orange 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T03:39:55.563

```
>>> equal = lambda d1, d2: all(d1.get(k) == d2.get(k) for k in set(d1.keys() + d2.keys()))
>>> print equal({'a':1, 'b':2}, {'b':2, 'a':1})
True
>>> print equal({'a':1, 'b':2}, {'b':2, 'a':2})
False 
```

这个解决方案非常有效：`all`是 lasy - 在第一个停止`False`，并且生成器表达式也是 lasy :)

```
def deep_equal(d1, d2):
    ''' Deep comparison '''
    if type(d1) != type(d2):
       return False
    if isinstance(d1, dict):
       return all(ddeep_equal(d1.get(k), d2.get(k))
           for k in set(d1.keys() + d2.keys()))
    return d1 == d2 
```

# sql - 带联接的高级查询

> ID：11076441
> 
> 赞同：0
> 
> 时间：2012-06-18T02:51:10.190
> 
> 标签：sql, join, union, unique

我正在尝试将包含产品所有详细信息的产品表转换为 SQL 中的单独表。除了重复的描述符细节之外，我已经完成了所有工作。

我遇到的问题是所有产品都有许多其他产品包含的尺寸/颜色/样式/其他。我只想为所有项目使用一个尺寸或颜色描述符，并为所有产品重复使用“ID”，我认为这是产品 ID 的父键，它是...外键。唯一的问题是每个描述符都会分配有多个外键。所以我在思考只是让它跳过为每个描述符找出一个 Foreign Parent 键，然后检查该描述符是否存在以及它是否使用它的 Key 作为描述符。

数据表

```
PI  Colo   Sz   OTHER

1        |   Blue  |  5  |    Vintage

2        |   Blue  |  6   |   Vintage

3        |   Blac  | 5   |   Simple

4        |   Blac |  6   |   Simple 
```

====================================

它的目标表是这个

====================================

```
DI Description

1       |   Blue

2       |   Blac

3       |   5

4       |   6

6       |   Vintage

7       |  Simple 
```

==============================

选择数据表

Unique.Data.Table.Colo

唯一的.Data.Table.Sz

Unique.Data.Table.Other

========================================

然后是我们创建所有描述符后的问题的对偶部分，如何进行新查询并将产品 ID 分配给描述符。

PI| DI

1 | 1

1 | 3

1 | 4

2 | 1

2 | 3

2 | 4

通过弄清楚如何做到这一点，我应该能够为产品中的所有 300 + 列复制此模式。其中一些字段有 60 多个字符，因此可以节省大量空间。

我使用数组吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T03:12:01.303

我认为您想为不同的类别拆分描述表，例如 - colorDescription、sizeDescription 等。

如果这不切实际，那么我建议有一个额外的列显示类别属性：

```
DI Description  Category

1 | Blue       | Color

2 | Blac       | Color

3 | 5          | Size

4 | 6          | Size

6 | Vintage    | Other

7 | Simple     | Other 
```

然后将该表中的主键作为 ID 和类别列的组合。

这将减少注入任何数据错误的机会。追踪它也很容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T03:25:01.127

好的，如果我理解正确，您希望所有唯一属性从列转换为`detailstable`具有 id 和描述字段的单个表 () 中的行：

假设架构：

```
datatable
------------------
PI [PK]
Colo
Sz
OTHER

detailstable
------------------
DI [PK]
Description 
```

您可以首先使用以下方法将所有唯一属性放入其自己的表中：

```
INSERT INTO detailstable (Description)
SELECT 
    a.description
FROM
    (
        SELECT DISTINCT Colo AS description
        FROM datatable

        UNION

        SELECT DISTINCT Sz AS description
        FROM datatable

        UNION

        SELECT DISTINCT OTHER AS description
        FROM datatable
    ) a 
```

然后链接`datatable`到`detailstable`，我假设你有一个交叉引用表定义如下：

```
datadetails
------------------
PI [PK]
DI [PK] 
```

然后你可以这样做：

```
INSERT INTO datadetails (PI, DI)
SELECT
    a.PI
    b.DI
FROM
    datatable a
INNER JOIN
    detailstable b ON b.Description IN (a.Colo, a.Sz, a.OTHER) 
```

# xcode - 获得超过 600 次观看的简单方法？

> ID：11076443
> 
> 赞同：0
> 
> 时间：2012-06-18T02:51:34.887
> 
> 标签：xcode, dynamic, uiviewcontroller, insert, uitableview

好的，我正在创建一个应用程序，用作某些项目的虚拟目录。问题是有 600 多个项目需要编目，这非常耗时，因为我必须先将这些项目连同项目的图像一起添加到表格单元格查看器中，然后还要插入一张图片和 3文本项到视图控制器中。有什么方法可以创建单个视图（或类似视图），然后当用户点击连接到单个视图的表格单元格时，它会连接到将这些项目插入到单个视图控制器中定义的空间的代码？

这个应用程序正在使用 ARC 和 Storyboards。我在 iOS 5 中使用 Xcode 4.3.3。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T03:03:18.710

您可以拥有一组图像或图像 URL 以及标题、描述等，然后使用某种网格视图来布置它们（[Sam Soffes 的网格视图](https://github.com/samsoffes/sscollectionview)或只是一个`UITableView`）

然后使用与[此类](https://stackoverflow.com/a/7397338/244343)似的代码，其中“配置单元”表示：

```
cell.title = [titles objectAtIndex:[indexPath row]];
cell.image = [UIImage imageWithData:[NSData dataWithContentsOfURL:
              [imageURLs objectAtIndex:[indexPath row]]];
cell.description = [descriptions objectAtIndex:[indexPath row]]; 
```

如果您可以将 CSV 文件中的 url 和文本获取到您的设备上，那么您可以使用[Dave DeLong 的 CSV parser](https://github.com/davedelong/CHCSVParser)构建数组。

# c++ - ( ) 后跟 { } 是什么意思

> ID：11076445
> 
> 赞同：-1
> 
> 时间：2012-06-18T02:52:02.307
> 
> 标签：c++, opencv, syntax, declaration

我刚开始学习 c++ 的 opencv 库。在我以前的 c++ 经验（不多）中，我从未遇到过以下语法

```
IplImage* dopPyrDown (
            IplImage * in,
            int filter = IPL_GAUSSIAN_5x5
    ) {
        assert(in->width%2 == 0 && i->height%2 == 0);
        IplImage* out = cvCreteImage(
         cvSize(in->width/2, in->height/2),
         in->depth,
         in->nChannels
        );
        cvPyrDown(in, out);
        return(out);
    }; 
```

更具体地说，我的意思是“ `IplImage* dopPurDown (*argument*){*code*};`”有人能解释一下它的意思吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-18T02:53:32.797

> 更具体地说，我的意思是“IplImage* dopPurDown ( *argument* ){ *code* };” 有人可以解释它是什么意思吗？

它*声明*了一个被调用的函数`dopPurDown`，它返回一个指向 a 的指针`IplImage`并接受一些参数（在这种情况下，两个参数称为`in`and `filter`）。括号之间的代码*定义*了函数。

在继续之前，请[阅读一本好的 C++ 入门书籍](https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list)，因为函数是几乎所有现有高级编程语言的基础。坦率地说，如果您无法识别 C++ 中的函数定义，您*需要*退后一步，先正确学习 C++，然后再尝试使用 OpenCV，这是一个完全不同的野兽。

# java - 从位移中检索元素

> ID：11076446
> 
> 赞同：0
> 
> 时间：2012-06-18T02:52:22.493
> 
> 标签：java, bit-manipulation

我如何从“i”中检索“face”？

```
int i = (id | (face << 16) | (type << 18)) 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T02:54:51.190

你不会，除非你能保证它只有 2 位宽，而且`id`只有 16 位宽，在这种情况下，你所要做的就是右移和屏蔽。这是一个技巧问题吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T03:11:44.193

因此，鉴于 id 仅 16 位宽且 face 仅 2 位宽的限制，请使用：

```
face = (i >> 16 ) & 3 
```

# facebook-graph-api - HTML5 画布到 Facebook

> ID：11076448
> 
> 赞同：1
> 
> 时间：2012-06-18T02:52:36.907
> 
> 标签：facebook-graph-api, html5-canvas

我制作了一个使用 canvas 元素的基本 HTML5/JS 漫画创作工具。

我希望用户能够通过 Facebook API 上传他们的漫画。

我不相信 Facebook 允许从 canvas.toDataURI() 方法以 base64 字符串的形式发布图像，并且不想使用我自己的服务器来转换这些图像并临时存储它们。

解决这个问题的最佳方法是什么？我想知道的可能性：将画布转换为 blob？通过网络服务存储 blob（如果是，建议？） 将 blob 直接上传到 Facebook？（那可能吗？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T07:36:16.450

我不明白为什么不能进行“正常”上传。`PROFILE_ID/photos`您可以通过发布到，使用`source`type 参数为用户创建新照片`multipart/form-data`。

所以我要尝试的第一件事是将画布对象中的图片信息转换为“正常”形式（以正确的格式将其写入输入元素（？）），然后将其发送到 Facebook。如果这一步成功，我会看看 jQuery 或其他一些库的`form.serialize`方法是否可以构建类型的请求`multipart/form-data`。如果这也是可能的，那么以该格式获取数据并使用 FB.api 发布它应该没有进一步的问题（尽管您可能希望告诉您的用户耐心等待，因为这可能需要一段时间）。

不能确定这是否可行，但我会试一试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T03:02:16.657

Facebook 与 Heroku 合作免费托管应用程序，您可以将其用作临时服务器。

# php - 检测 PHP 中的非字母语言字符串

> ID：11076452
> 
> 赞同：1
> 
> 时间：2012-06-18T02:53:23.527
> 
> 标签：php, regex, string, utf-8

[我有一个](https://stackoverflow.com/questions/1441562/detect-language-from-string-in-php)与此类似的问题

但是，我的要求不那么严格。

我只需要检测输入字符串是否包含任何非字母字符串。

如果它确实包含非字母字符串，那么我将选择一个不同的字体文件。

如果它只包含字母字符串，那么我将选择像 AmericanTypeWriter 这样的字体文件。

**通过字母字符串，这将包括各种可能的符号，例如逗号、标点符号等。**

很难定义字母字符串。

让我定义什么是非字母字符串的示例。

这是中文

并假设字符串为 utf-8 格式。

**另一种定义方式：不属于非欧洲语言字符的任何内容都被自动假定为字母字符串。**

顺便说一下，我需要在 php 中做这个检测。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T02:58:22.040

使用`ctype_alnum(string)`. 文档[在这里](http://php.net/manual/en/function.ctype-alnum.php)。此函数接受一个字符串并返回一个`bool`告诉您该字符串是否包含其他字符的 a。

您还可以使用更复杂的正则表达式，它可以工作并检查空格。以下应该工作。

`preg_match("/^[a-zA-Z0-9 ]*$/u", $string) == 1`会成功的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T04:12:41.150

我找到了更好的答案。灵感来自[https://stackoverflow.com/a/4923410/80353](https://stackoverflow.com/a/4923410/80353)

```
header('Content-Type: text/html; charset=utf-8');
mb_internal_encoding('utf-8');

function isThisChineseText($text) {
    return preg_match("/\p{Han}+/u", $text);
} 
```

# algorithm - 如何让这段 Haskell 代码更简洁？

> ID：11076461
> 
> 赞同：7
> 
> 时间：2012-06-18T02:54:51.417
> 
> 标签：algorithm, haskell, functional-programming

作为实践，我正在尝试为 Haskell 中的赌场游戏“战争”编写模拟。

[http://en.wikipedia.org/wiki/Casino_war](http://en.wikipedia.org/wiki/Casino_war)

这是一个非常简单的游戏，有一些规则。用我知道的任何一种命令式语言编写本来就是一个非常简单的问题，但是我正在努力用 Haskell 编写它。

我到目前为止的代码：

```
 -- Simulation for the Casino War

import System.Random
import Data.Map

-------------------------------------------------------------------------------
-- stolen from the internet

fisherYatesStep :: RandomGen g => (Map Int a, g) -> (Int, a) -> (Map Int a, g)
fisherYatesStep (m, gen) (i, x) = ((insert j x . insert i (m ! j)) m, gen')
    where
        (j, gen') = randomR (0, i) gen

fisherYates :: RandomGen g => g -> [a] -> ([a], g)
fisherYates gen [] = ([], gen)
fisherYates gen l = toElems $ Prelude.foldl
        fisherYatesStep (initial (head l) gen) (numerate (tail l))
    where
        toElems (x, y) = (elems x, y)
        numerate = zip [1..]
        initial x gen = (singleton 0 x, gen)

-------------------------------------------------------------------------------

data State = Deal | Tie deriving Show

-- state: game state
-- # cards to deal
-- # cards to burn
-- cards on the table
-- indices for tied players
-- # players
-- players winning
-- dealer's winning
type GameState = (State, Int, Int, [Int], [Int], Int, [Int], Int)

gameRound :: GameState -> Int -> GameState
gameRound (Deal, toDeal, toBurn, inPlay, tied, numPlayers, pWins, dWins) card
    | toDeal > 0 =
        -- not enough card, deal a card
        (Deal, toDeal - 1, 0, card:inPlay, tied, numPlayers, pWins, dWins)
    | toDeal == 0 =
        -- enough cards in play now
        -- here should detemine whether or not there is any ties on the table,
        -- and go to the tie state
        let
            dealerCard = head inPlay
            p = zipWith (+) pWins $ (tail inPlay) >>=
                (\x -> if x < dealerCard then return (-1) else return 1)
            d = if dealerCard == (maximum inPlay) then dWins + 1 else dWins - 1
        in
            (Deal, numPlayers + 1, 0, [], tied, numPlayers, p, d)
gameRound (Tie, toDeal, toBurn, inPlay, tied, numPlayers, pWins, dWins) card
    -- i have no idea how to write the logic for the tie state AKA the "war" state
    | otherwise = (Tie, toDeal, toBurn, inPlay, tied, numPlayers, pWins, dWins)

-------------------------------------------------------------------------------

main = do
    rand <- newStdGen
    -- create the shuffled deck
    (deck, _) <- return $ fisherYates rand $ [2 .. 14] >>= (replicate 6)
    -- fold the state updating function over the deck
    putStrLn $ show $ Prelude.foldl gameRound
        (Deal, 7, 0, [], [], 6, [0 ..], 0) deck

------------------------------------------------------------------------------- 
```

我理解为什么要在创建随机数上做额外的工作，但我很确定我错过了一些基本的构造或概念。保持状态集合并在输入列表上运行分支逻辑应该不会那么尴尬。我什至想不出一个好方法来为桌子上有关系的情况编写逻辑。

我不是要求完整的解决方案。如果有人能指出我做错了什么，或者一些相关的好阅读材料，那就太好了。

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-18T03:21:01.580

维护应用程序状态的一个有用的设计模式是所谓的状态单子。[您可以在此处](http://www.haskell.org/haskellwiki/All_About_Monads#The_State_monad)找到描述和一些介绍性示例。此外，您可能需要考虑使用具有命名字段的数据类型而不是元组 for `GameState`，例如：

```
data GameState = GameState { state :: State, 
                             toDeal :: Int
                           -- and so on
                           } 
```

这将使使用[记录语法](http://learnyouahaskell.com/making-our-own-types-and-typeclasses)访问/更新各个字段变得更加容易。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-19T13:53:42.940

为了使代码更具可读性，您应该将游戏的结构分解为有意义的组件，并相应地重新组织您的代码。您所做的是将所有游戏状态放入一个数据结构中。结果是你必须一直处理所有的游戏细节。

游戏会记录每个玩家和庄家的得分。有时它会从分数中加 1 或减 1。分数不用于其他任何事情。将分数管理与其他代码分开：

```
-- Scores for each player and the dealer
data Score = Score [Int] Int

-- Outcome for each player and the dealer.  'True' means a round was won.
data Outcome = Outcome [Bool] Bool

startingScore :: Int -> Score
startingScore n = Score (replicate n 0) 0

updateScore :: Outcome -> Score -> Score
updateScore (Outcome ps d) (Score pss ds) = Score (zipWith upd pss pos) (update ds d)
  where upd s True  = s+1
        upd s False = s-1 
```

发牌也与玩家和庄家相关联。赢得或输掉一轮仅基于卡值。将分数计算与其他代码分开：

```
type Card = Int
data Dealt = Dealt [Card] Card

scoreRound :: Dealt -> Outcome
scoreRound (Dealt ps dealerCard) = Outcome (map scorePlayer ps) (dealerCard == maximumCard)
  where
    maximumCard = maximum (dealerCard : ps)
    scorePlayer p = p >= dealerCard 
```

我想说一个游戏回合包含制作单个`Outcome`. 相应地重新组织代码：

```
type Deck = [Card]

deal :: Int -> Deck -> (Dealt, Deck)
deal n d = (Dealt (take n d) (head $ drop n d), drop (n+1) d) -- Should check whether deck has enough cards

-- The 'input-only' parts of GameState
type GameConfig =
  GameConfig {nPlayers :: Int}

gameRound :: GameConfig -> Deck -> (Deck, Outcome)
gameRound config deck = let
  (dealt, deck') = deal (nPlayers config) deck
  outcome        = scoreRound dealt
  in (deck', outcome) 
```

这涵盖了原始代码中的大部分内容。您可以以类似的方式处理其余部分。

* * *

你应该得到的主要思想是 Haskell 可以很容易地**将程序分解成对它们自己有意义的小块**。这就是使代码更易于使用的原因。

我没有将所有内容都放入`GameState`，而是创建了`Score`、`Outcome`、`Dealt`和`Deck`。其中一些数据类型来自原始`GameState`. 其他根本不在原始代码中；它们隐含在复杂循环的组织方式中。我没有将整个游戏放入`gameRound`，而是创建了`updateScore`、`scoreRound`、`deal`和其他函数。这些中的每一个都只与几条数据交互。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-18T19:41:34.607

我突然想到“使用 StateT”的建议可能有点不透明，所以我把它翻译成那个行话，希望你能看到如何从那里开始。最好将牌组的状态包含在游戏状态中。 `gameround`下面只是用 StateT 术语重述您的功能。前面的定义，`game`使用`deck`游戏状态的字段，不断缩小，并包含整个游戏。我介绍 IO 动作，只是为了展示它是如何完成的，所以如果你在 ghci 中调用 main，你可以看到状态的连续性。您将 IO 操作“提升”到 StateT 机器中，使它们与 get 和 put 处于同一水平。请注意，在 mose 子案例中，我们放置新状态，然后调用要重复的操作，以便 do 块包含完整的递归操作。（平局和一副空牌立即结束游戏。）然后在`main`我们`runStateT`自我更新的最后一行`game`产生一个函数 GameState -> IO (GameState,()); 然后我们用一个特定的起始状态（包括随机确定的牌组）来提供它，以获得主要业务的 IO 动作。（我不遵循游戏应该如何运作，而是机械地移动事物以传达这个想法。）

```
import Control.Monad.Trans.State
import Control.Monad.Trans
import System.Random
import Data.Map

data Stage = Deal | Tie deriving Show
data GameState = 
  GameState   { stage      :: Stage
              , toDeal     :: Int
              , toBurn     :: Int
              , inPlay     :: [Int]
              , tied       :: [Int]
              , numPlayers :: Int
              , pWins      :: [Int]
              , dWins      :: Int
              , deck      ::  [Int]} deriving Show
              -- deck field is added for the `game` example
type GameRound m a = StateT GameState m a

main = do
   rand <- newStdGen
   let deck = fst $ fisherYates rand $ concatMap (replicate 6) [2 .. 14] 
   let startState = GameState Deal 7 0 [] [] 6 [0 ..100] 0 deck
   runStateT game startState 

game  ::   GameRound IO ()
game = do
  st <- get
  lift $ putStrLn "Playing: " >> print st
  case deck st of 
    []            -> lift $ print "no cards"
    (card:cards)  -> 
      case (toDeal st, stage st) of 
        (0, Deal) ->  do put (first_case_update st card cards) 
                         game -- <-- recursive call with smaller deck
        (_, Deal) ->  do put (second_case_update st card cards)
                         game
        (_,  Tie) ->  do lift $ putStrLn "This is a tie"
                         lift $ print st

 where    -- state updates:
          -- I separate these out hoping this will make the needed sort 
          -- of 'logic' above clearer.
  first_case_update s card cards= 
     s { numPlayers = numPlayers s + 1
       , pWins = [if x < dealerCard  then -1 else  1 |
                    x <-  zipWith (+) (pWins s)  (tail (inPlay s)) ]
       , dWins = if dealerCard == maximum (inPlay s) 
                     then dWins s + 1 
                     else dWins s - 1
       , deck = cards }
            where  dealerCard = head (inPlay s)

  second_case_update s card cards = 
     s { toDeal = toDeal s - 1 
       , toBurn = 0 
       , inPlay = card : inPlay s
       , deck = cards}

--  a StateTified formulation of your gameRound
gameround  ::  Monad m => Int -> GameRound m ()
gameround card = do
  s <- get
  case (toDeal s, stage s) of 
    (0, Deal) -> 
        put $ s { toDeal = numPlayers s + 1
                , pWins = [if x < dealerCard  then -1 else  1 |
                             x <-  zipWith (+) (pWins s)  (tail (inPlay s)) ]
                , dWins = if dealerCard == maximum (inPlay s) 
                              then dWins s + 1 
                              else dWins s - 1}
                     where  dealerCard = head (inPlay s)
    (_, Deal) -> 
        put $ s { toDeal = toDeal s - 1 
                 , toBurn = 0 
                 , inPlay = card : inPlay s}
    (_,  Tie) -> return ()

fisherYatesStep :: RandomGen g => (Map Int a, g) -> (Int, a) -> (Map Int a, g)
fisherYatesStep (m, gen) (i, x) = ((insert j x . insert i (m ! j)) m, gen')
    where
        (j, gen') = randomR (0, i) gen

fisherYates :: RandomGen g => g -> [a] -> ([a], g)
fisherYates gen [] = ([], gen)
fisherYates gen l = toElems $ Prelude.foldl
        fisherYatesStep (initial (head l) gen) (numerate (tail l))
    where
        toElems (x, y) = (elems x, y)
        numerate = zip [1..]
        initial x gen = (singleton 0 x, gen) 
```

# winforms - DevExpress.XtraScheduler 1 周后不工作

> ID：11076465
> 
> 赞同：1
> 
> 时间：2012-06-18T02:55:29.877
> 
> 标签：winforms, devexpress

请帮助我了解 DevExpress.XtraScheduler 控件发生了什么。

以下是我用来运行重复计划的一些步骤： 1\. 设置计划：

```
 Appointment apt;
        DateTime StartTime = DateTime.Now;
        apt.BeginUpdate();

        apt.Subject = "weekly";
        apt.Start = startTime;
        apt.Duration = TimeSpan.FromMinutes(5);
        apt.StatusId = 2;
        apt.RecurrenceInfo.AllDay = false;
        apt.RecurrenceInfo.Type = RecurrenceType.Weekly;
        apt.RecurrenceInfo.Start = startTime;
        apt.RecurrenceInfo.Duration = TimeSpan.FromMinutes(5);
        apt.RecurrenceInfo.Range = RecurrenceRange.NoEndDate;
        apt.RecurrenceInfo.OccurrenceCount = 100;
        apt.RecurrenceInfo.DayNumber = 0;
        apt.RecurrenceInfo.Periodicity = 1;
        apt.RecurrenceInfo.WeekDays = WeekDays.Monday;
        apt.HasReminder = true;
        apt.Reminder.TimeBeforeStart = TimeSpan.Zero;

        apt.EndUpdate(); 
```

1.  它在第一周工作正常，但在下周没有触发事件。我不知道为什么会这样？你能给我一些线索，我可以修复它们吗？还是因为我使用的是旧版本（1.1）？

2.  有了上面的设置时间表，是否正确？

请指教。非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T21:02:38.170

我很惊讶看到你分配`1`给`RecurrenceInfo.DayNumber`. 充其量，这将被忽略，每周重复一次。在最坏的情况下，这将要求您的星期一是该月的第一天。分配`0`或根本不分配此属性。

# c# - 我需要获取“ieframe.dll”公开的公共方法列表

> ID：11076466
> 
> 赞同：2
> 
> 时间：2012-06-18T02:55:39.313
> 
> 标签：c#, .net, internet-explorer

我知道其中两个是 IERegCreateKeyEx() 和 IERegSetValueEx()。但我不知道图书馆还有什么。

我想使用与“IERegOpenKeyEx()”等效的东西，但不知道它是否存在或如何存在或如何定义它的参数。感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T02:58:57.133

您要查找的是 C# 反射器或反编译器。

由于 C# 使用反射，因此很容易进入 .dll 并查找方法。表面上，Visual Studio 是自己做的。

无论哪种方式，为了获得一个漂亮的类和方法树，我相信在 VS 中有一种方法可以做到这一点，但一种直接的方法是只使用其中一个工具来探索 .dll。

**编辑：这之前已经回答过**了——Visual [Studio 中的哪个程序让我查看 DLL 以查看它的 API？](https://stackoverflow.com/questions/131985/which-program-in-visual-studio-lets-me-look-into-dlls-to-see-its-api)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T03:00:42.090

您可以使用 Telerik 的 JustDecompile 等反编译工具来访问 dll 的公共方法。

[您可以从此处](http://www.telerik.com/products/decompiler.aspx)下载此工具。

# php - sql查询选择一个名称，无论它在多少行中被提及

> ID：11076467
> 
> 赞同：1
> 
> 时间：2012-06-18T02:55:51.900
> 
> 标签：php, mysql, sql, distinct-values

基本上我想要做的是从列 x 获取信息，无论它被提及多少次。意味着如果我有这种表：

```
x     | y     | z
------+-------+--------    
hello | one   | bye    
hello | two   | goodbye     
hi    | three | see you 
```

所以我要做的是创建一个查询，该查询将获取 x 列中提到的所有名称而没有重复项，并将其放入选择列表中。

我的目标是我会有一个包含两个而不是三个选项的选择列表，你好和你好

这是我到目前为止没有工作的。希望大家知道答案：

```
 function getList(){
 $options="<select id='names' style='margin-right:40px;'>"; 
 $c_id = $_SESSION['id'];

 $sql="SELECT * FROM names";
 $result=mysql_query($sql); 

$options.="<option value='blank'>-- Select something --</option>"   ;
 while ($row=mysql_fetch_array($result)) { 

$name=$row["x"]; 

$options.="<option value='$name'>$name</option>"; 
} 

 $options.= "</SELECT>";
return "$options";
 } 
```

抱歉让您感到困惑...我编辑了我的来源

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T03:12:11.870

您似乎只使用`x`. 所以你可以只使用查询：

```
SELECT DISTINCT x FROM names 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T02:58:30.327

如果这是您的查询

```
$sql="SELECT * FROM names";
 $result=mysql_query($sql); 
```

然后

```
$sql="SELECT DISTINCT x FROM names";
 $result=mysql_query($sql); 
```

如果您只想要一列，请将 * 更改为 x，因为它更快

# oauth - Twitter API 是否会自动缩短 URL

> ID：11076468
> 
> 赞同：2
> 
> 时间：2012-06-18T02:56:18.827
> 
> 标签：oauth, twitter

我知道之前有人问过这个问题，但是我发现的答案有点老了，而且我知道[twitter 现在已经在最近的所有帖子中添加了 t.co/xyz 服务。](https://support.twitter.com/articles/109623-faqs-about-twitter-s-link-service-http-t-co/)我只是想知道在使用 oAuth API 服务时是否会自动缩短任何网址？有谁知道目前的游戏流程是什么？我还需要缩短网址预发布吗？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T06:55:24.193

是的。即使在使用 OAuth 时，所有链接都将包含在 t.co 短 URL 中。即使链接少于 20 个字符！

[请参阅讨论组中的帖子](https://dev.twitter.com/discussions/2806)。

还有一些[关于 t.co 缩短](https://dev.twitter.com/docs/tco-url-wrapper)(2012-04-12) 的近期和即将发生的变化的文档。

如果需要，您可以自己缩短 URL，但它仍会被包装。

# android - 如何从数据库中获取列表视图值？

> ID：11076470
> 
> 赞同：0
> 
> 时间：2012-06-18T02:57:16.473
> 
> 标签：android, database, sqlite, proxy, android-listview

首先，我为可能的语法错误道歉，我是巴西人。
我正在尝试获取`listview`变量中的值，但是当我单击**_id > 1** on时出现错误提示`listview`。

但是当我点击**第一个 _id**时没有任何反应！

### 图片：

![图片](../Images/39ab9ef3c967bbdfed2d099f7b77e297.png)

* * *

### 代理列表.java

```
public class ProxyListView extends Activity {

    private SQLiteAdapter mySQLiteAdapter;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.proxylist);

        final ListView listContent = (ListView)findViewById(R.id.contentlist);

        /*
         *  Create/Open a SQLite database
         *  and fill with dummy content
         *  and close it
         */
        mySQLiteAdapter = new SQLiteAdapter(this);
        mySQLiteAdapter.openToWrite();
        mySQLiteAdapter.insert("111.168.1.1","8080","http");
        mySQLiteAdapter.insert("222.168.2.1","8080","http");
        mySQLiteAdapter.insert("333.168.3.1","8080","http");
        mySQLiteAdapter.insert("444.168.4.1","8080","http");
        mySQLiteAdapter.insert("555.168.5.1","8080","http");
        mySQLiteAdapter.insert("666.168.6.1","8080","http");
        mySQLiteAdapter.insert("777.168.7.1","8080","http");
        mySQLiteAdapter.insert("888.168.8.1","8080","http");
        mySQLiteAdapter.insert("999.168.9.1","8080","http");
        mySQLiteAdapter.insert("1010.168.10.1","8080","http");
        mySQLiteAdapter.insert("1111.168.11.1","8080","http");

        mySQLiteAdapter.close();

        /*
         *  Open the same SQLite database
         *  and read all it's content.
         */
        mySQLiteAdapter = new SQLiteAdapter(this);
        mySQLiteAdapter.openToRead();

        Cursor cursor = mySQLiteAdapter.queueAll();
        startManagingCursor(cursor);

        String[] from = new String[]{SQLiteAdapter.KEY_ID,SQLiteAdapter.KEY_IP,SQLiteAdapter.KEY_PORT, SQLiteAdapter.KEY_TYPE};
        int[] to = new int[]{R.id.text,R.id.text2,R.id.text3,R.id.text4};

        SimpleCursorAdapter cursorAdapter =
            new SimpleCursorAdapter(this, R.layout.row, cursor, from, to);

        listContent.setAdapter(cursorAdapter);

        listContent.setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> arg0, View arg1, int position, long arg3) {
                selectData(position);
            }

            public void selectData(int position) {
                try{
                    mySQLiteAdapter.openToRead();
                    Cursor c = mySQLiteAdapter.sqLiteDatabase.rawQuery("SELECT * FROM Proxy WHERE _id = '"+position+"'", null);
                    while(c.moveToNext()){

                        String id = c.getString(c.getColumnIndex("_id"));
                        String proxy = c.getString(c.getColumnIndex("proxy"));
                        String port = c.getString(c.getColumnIndex("port"));
                        String type = c.getString(c.getColumnIndex("type"));

                        Context context = getApplicationContext();
                        int duration = Toast.LENGTH_SHORT;
                        Toast toast = Toast.makeText(context,id+proxy+port+type, duration);
                        toast.show();
                    }
                    }catch(Exception erro){
                    //
                        Context context = getApplicationContext();
                        CharSequence text = "Erro";
                        int duration = Toast.LENGTH_SHORT;
                        Toast toast = Toast.makeText(context, text, duration);
                        toast.show();
                    }finally{
                        mySQLiteAdapter.close();    
                    //
                    }
            }
        });
       }  
    } 
```

* * *

### 日志：

```
E/CursorWindow(585): Bad request for field slot 0,-1\. numRows = 1, numColumns = 4 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T03:00:10.027

您需要`cursor.moveToFirst()`在开始操作光标之前调用。如果调用返回 false，则光标为空。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T06:13:25.367

是的，您需要更换

```
while(c.moveToNext()){
  ....
  ....
} 
```

有了这个

```
if (cur.moveToFirst()) {
                         do {
                              ....
                              ....
                             } while(c.moveToNext())
                       } 
```

希望能帮助到你 ！！

# actionscript-3 - Flash 3D导航墙

> ID：11076471
> 
> 赞同：-1
> 
> 时间：2012-06-18T02:57:19.767
> 
> 标签：actionscript-3, flash

我想创建一个类似于[http://www.dior.com/couture/en_us/The-House-of-Dior/THE-HOUSE-OF-DIOR](http://www.dior.com/couture/en_us/The-House-of-Dior/THE-HOUSE-OF-DIOR)的 3D 导航墙。

我在[http://www.flashloaded.com/flashcomponents/3dwall/](http://www.flashloaded.com/flashcomponents/3dwall/)中看到了类似的插件。

但是，我想从头开始创建它，因为我非常需要对其进行自定义。

您知道的任何起始模板都会有所帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T06:05:42.017

模板可能会有所帮助，但如果您真的非常需要自定义它，我建议您了解一个不错的 3D 代码库的来龙去脉。如果您确实找到了一个模板，您可能会花费同样多的时间来调整它，结果却发现它不能满足您的需求。

有许多现有的 ActionScript 3D 库可以使这成为一项非常简单的任务。[PaperVision3D](http://www.papervision3d.org/)、[Away3D](http://away3d.com/)甚至Flash Player 中的本机[Stage3D API都可以让您朝着正确的方向前进。](http://www.adobe.com/devnet/flashplayer/stage3d.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T16:07:29.693

如果您想自定义它并完全控制内容，您最好从头开始学习：Alternativa3D、Away3D、Flare3D（非常容易）、Minko.... 这些是最受欢迎的，取决于您的需求。

# javascript - 将单个项目添加到 javascript 命名空间

> ID：11076473
> 
> 赞同：-7
> 
> 时间：2012-06-18T02:57:53.753
> 
> 标签：javascript, namespaces

假设我有以下内容：

```
var nameSpace = {
    first: 'a',
    second: 'b',
    third: 'c'
} 
```

如何添加单个项目，使其：

```
var nameSpace = {
    first: 'a',
    second: 'b',
    third: 'c',
    foo: 'foostring'
} 
```

?

nameSpace.foo = "foostring" 会起作用吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T02:59:39.750

> nameSpace.foo = "foostring" 会起作用吗？

**是**的，你为什么不尝试？

# java - 当我手动提供密码时，为什么 WAFFLE 不让我登录？

> ID：11076476
> 
> 赞同：0
> 
> 时间：2012-06-18T02:58:13.430
> 
> 标签：java, windows, authentication, ntlm, waffle

我正在使用 WAFFLE 将 Web 服务器与 Windows 身份验证集成。

当我使用短主机名访问 Web 服务器时，Chrome 和 IE 都认为该服务器“受信任”，并且一切正常。

当我使用完整的主机名访问完全相同的 Web 服务器时，该服务器不再被认为是“受信任的”（这是废话，老实说，因为 IP 地址没有改变）并且无论浏览器如何，都会提示我密码（这很好，服务器不受信任。）

问题是**即使我提供了正确的密码，它也不会让我登录。**相反，我一遍又一遍地得到相同的密码对话框。

如果我从 Mac 上的浏览​​器访问，我会看到一个登录对话框，并在其中输入我的密码会成功登录。

两者的区别在于，在 Windows 上，浏览器发送 Authorization: Negotiate，而在 Mac OS X 上，他们发送 Authorization: Basic。

我在网上看到的完整标题：

```
Authorization: Negotiate TlRMTVNTUAABAAAAl4II4gAAAAAAAAAAAAAAAAAAAAAGAbEdAAAADw== 
```

这[解码](http://pastie.org/4106059)为“NTLMSSP\0....二进制数据....”

二进制数据不够大，无法包含我的凭据或其哈希，因此我被引导相信浏览器要求我输入密码，然后将其丢弃，而不是使用它来验证我的身份。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T23:15:28.547

可能有几十个原因。从故障排除开始[协商](https://github.com/dblock/waffle/wiki/Troubleshooting-Negotiate)。

# android - 检查数据库android中的重复数据

> ID：11076478
> 
> 赞同：1
> 
> 时间：2012-06-18T02:58:24.743
> 
> 标签：android, database, sqlite

我有数据库应用程序
我想在进入数据库之前检查数据库中的数据
如果数据库中的数据相等则无法输入，如果数据不相等可以输入
这是我的一些代码：

```
public void saveData(){
    long tim = System.currentTimeMillis();
    SimpleDateFormat df = new SimpleDateFormat("yyyy-MM-dd kk:mm:ss");
    String curTime = df.format(tim);
    Cursor c = helper.getNoOrder();
    c.moveToFirst();
    if(c.getCount() != 0){
        System.out.println("klik");
        if(noOrder.getText().toString().equals(c.getString(0))){
            Toast.makeText(this, "No Order Sudah Terdaftar", Toast.LENGTH_LONG).show();
        }else{
            helper.insertBeli123(noOrder.getText().toString(), item.getText().toString(), 
                    custName.getText().toString(), custTelp.getText().toString(),
                    qty.getText().toString(),temp.getText().toString(),temp.getText().toString(),
                    temp.getText().toString(), curTime);
            Toast.makeText(this, "Data berhasil disimpan", Toast.LENGTH_LONG).show();
            finish();
        }
    }else{
        helper.insertBeli123(noOrder.getText().toString(), item.getText().toString(), 
                custName.getText().toString(), custTelp.getText().toString(),
                qty.getText().toString(),temp.getText().toString(),temp.getText().toString(),
                temp.getText().toString(), curTime);
        Toast.makeText(this, "Data berhasil disimpan", Toast.LENGTH_LONG).show();
        finish();
    }
    //startActivity(new Intent(this,Direktori.class));
} 
```

在我的 DBhelper 中是这样的：

```
public void onCreate(SQLiteDatabase db) {
    db.execSQL("CREATE TABLE tanda_terima (_id integer primary key AUTOINCREMENT,no_order text " +
            ",item text,cust_id text,cust_name text,cust_telp text,quantity text,order_nik text" +
            ",pengirim text,penerima text,gambar text,waktu_ambil datetime,flag integer)");
    db.execSQL("CREATE TABLE image (_id integer primary key AUTOINCREMENT,no_order text ,image text,tgl_buat datetime,flag integer)");
    db.execSQL("CREATE TABLE user (user text primary key,no_imei integer,password text)");
    db.execSQL("CREATE TABLE log_sync_tanda (no_order text primary key,status text ,waktu_sync datetime)");
    db.execSQL("CREATE TABLE log_sync_image (image text primary key,kdstore text,status text ,waktu_sync datetime)");
}
 public void insertBeli123(String no_order,String item,String cust_name
        ,String cust_telp,String quantity,String pengirim,String penerima,
        String gambar,String waktu){

    ContentValues cv = new ContentValues();
    cv.put("no_order", no_order);
    cv.put("item", item);
    cv.put("cust_name", cust_name);
    cv.put("cust_telp", cust_telp);
    cv.put("quantity", quantity);
    cv.put("pengirim", pengirim);
    cv.put("penerima", penerima);
    cv.put("gambar", gambar);
    cv.put("waktu_ambil", waktu);

    getWritableDatabase().insert("tanda_terima", "name", cv);
}
    public Cursor getNoOrder(){
    return(getReadableDatabase().rawQuery("SELECT no_order FROM tanda_terima", null));
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T03:29:05.533

检查源代码。它可以帮助您检查重复数据。

```
String sql = "select * from "
                + TABLE_NAME + " WHERE placeId = '" + placeId + "'"; 
        Cursor cursorinfo = null; 
        try {
            database = databaseHelper.getReadableDatabase();
            cursorinfo = database.rawQuery(sql, null);
        } catch (Exception ex) {
            ex.printStackTrace();
        }

        if (!cursorinfo.moveToFirst()) {
                        database = databaseHelper.getWritableDatabase();
            try {
                database.insert(TABLE_NAME, "", values/// Here ContentValues);
            } finally {
                database.close();
                cursorinfo.close();
            }
        } 
```

我认为它对你有帮助。谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T04:38:11.697

最初，您需要从游标中的数据库中获取全部数据

```
 void insertInDatabase()
 {
    Cursor cursor=fetchDataFromDatabase();
    if(!cursor.getCount==0)
    {
         while(cursor.moveToNext())
          {
               if(!(cursor.getString(1).equals("Harneet"))
               {
                     dbAdapter.insert("Harneet");
                     return;
               }
          }
          System.println("Record ALready exists in Database");
    }
    else
    {
              System.println("Empty Database");
              dbAdapter.insert("Harneet");
    }
  }

    /*Assume that we have two fields in database, one is Primary key and other is Name field*/ 
```

在 DbHelper 中这样写：

在数据库中插入值

```
 void insert(String name)
     { 
           ContentValues cv=new ContentValues();
           cv.put("NAME",name);
           getWritableDatabase.insert(TABLE_NAME,null,cv);
     } 
```

获取光标值

```
 public Cursor fetchDataFromDatabase()
     {
          String col[]={_id,name};
         getReadableDatabase.query(TABLE_NAME,col,null,null,null);
     } 
```

# iphone - 如何编写一个下载器类来更新 iOs 中的下载进度

> ID：11076486
> 
> 赞同：0
> 
> 时间：2012-06-18T03:00:12.327
> 
> 标签：iphone, multithreading, uitableview, asihttprequest, uiprogressview

[这](https://stackoverflow.com/questions/11074605/uiprogressbar-in-uitableviewcell-issue)是我的实际问题，正如一些人建议的那样，我想编写一个类来处理 UITableView 中的多个下载进度。我不知道如何为此编写课程，有人可以提供一些提示或想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T03:26:20.797

要查看的组是 NSURLRequest 和 NSURLConnection。前者让您指定请求（URL、http 方法、参数等），后者运行它。

由于您想随时更新状态（[我认为我在您的另一个问题中回答了这个草图](https://stackoverflow.com/questions/11074605/uiprogressbar-in-uitableviewcell-issue/11075080#11075080)），因此您需要实现 NSURLConnectionDelegate 协议，该协议在数据块从连接到达时移交它。如果您知道需要多少数据，您可以使用收到的数据量来计算我之前建议的 downloadProgress 浮点数：

```
float downloadProgress = [responseData length] / bytesExpected; 
```

这是 SO 中一些[漂亮的示例代码](https://stackoverflow.com/questions/2124421/are-there-complete-examples-that-make-use-of-all-the-nsurlconnection-delegate-me)。您可以像这样扩展多个连接...

MyLoader.m

```
@interface MyLoader ()
@property (strong, nonatomic) NSMutableDictionary *connections;
@end

@implementation MyLoader
@synthesize connections=_connections;  // add a lazy initializer for this, not shown

// make it a singleton
+ (MyLoader *)sharedInstance {

    @synchronized(self) {
        if (!_sharedInstance) {
            _sharedInstance = [[MyLoader alloc] init];
        }
    }
    return _sharedInstance;
}

// you can add a friendlier one that builds the request given a URL, etc.
- (void)startConnectionWithRequest:(NSURLRequest *)request {

    NSURLConnection *connection = [[NSURLConnection alloc] initWithRequest:request delegate:self];
    NSMutableData *responseData = [[NSMutableData alloc] init];
    [self.connections setObject:responseData forKey:connection];
}

// now all the delegate methods can be of this form.  just like the typical, except they begin with a lookup of the connection and it's associated state
- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data {

    NSMutableData *responseData = [self.connections objectForKey:connection];
    [responseData appendData:data];

    // to help you with the UI question you asked earlier, this is where
    // you can announce that download progress is being made
    NSNumber *bytesSoFar = [NSNumber numberWithInt:[responseData length]];
    NSDictionary *userInfo = [NSDictionary dictionaryWithObjectsAndKeys:
        [connection URL], @"url", bytesSoFar, @"bytesSoFar", nil];

    [[NSNotificationCenter defaultCenter] postNotificationName:@"MyDownloaderDidRecieveData"
        object:self userInfo:userInfo];

    // the url should let you match this connection to the database object in
    // your view controller.  if not, you could pass that db object in when you
    // start the connection, hang onto it (in the connections dictionary) and
    // provide it in userInfo when you post progress
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-16T18:09:40.603

我写[这个](http://cocoadocs.org/docsets/VeloxDownloader/1.6/)库就是为了做到这一点。您可以在 github 存储库中签出实现。

# ruby-on-rails - 名为“type”的模型属性会自动插入 ActiveModel::MassAssignmentSecurity::BlackList

> ID：11076489
> 
> 赞同：4
> 
> 时间：2012-06-18T03:00:40.500
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2

我没有`config.active_record.whitelist_attributes = true`应用程序配置。我`attr_protected()`在模型课上。但是，我注意到`id`and`type`属性会自动插入到`ActiveModel::MassAssignmentSecurity::BlackList`. 这对属性是有意义的，`id`因为我们不想`id`在批量分配中进行设置，但为什么属性也是如此`type`？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-18T03:04:52.703

当您在活动记录模型之间使用单表继承时，活动记录会使用该属性`type`，这就是它在黑名单中的原因。它保存了保存的类的名称，因此 Rails 知道保存了哪种对象。

# ssl - 如何从现有的叶子证书生成中间证书和根证书？

> ID：11076491
> 
> 赞同：1
> 
> 时间：2012-06-18T03:00:58.170
> 
> 标签：ssl, x509certificate

现在我有一个 X509 叶证书。从认证路径看，里面有一个中间证书和一个根证书。

![在此处输入图像描述](../Images/42808385f45153ec347782d9eac7eda4.png)

我想生成中间证书（..CA-G3）和根证书（VerSign）。目前，我的方法是双击中间的，然后单击“复制到文件..”将其导出。对根也做同样的事情。这种方式可以纠正生成中间/根证书吗？

从我的测试结果来看，生成的根证书似乎有错误的**指纹**。指纹与服务器端的**指纹**不匹配。

任何人都可以帮助如何正确生成中间/根证书？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T04:33:36.567

您对证书和证书链有根本的误解。

搜索并找到 CA 和根证书，而不是生成证书。

某些证书包括其 CA 证书在证书正文中的位置（在特殊证书扩展中）。对于其他人，您需要查看您的 CA 证书存储（这是 Windows 所做的）。有时链与终端实体证书一起发送（取决于数据格式）。最后，有时 CA 和 Root 只是不可用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-04T05:37:20.763

[提供答案...，也许这是获取 SSL 服务器使用的所有证书的另一种方法]

通过 OpenSSL 命令检索 ntermediate 和 root 证书：

```
 openssl s_client -showcerts -connect [host]:[port] 
```

# python - 在 Linux 上将 SQL Server Native Client 与 Pyodbc 一起使用

> ID：11076493
> 
> 赞同：1
> 
> 时间：2012-06-18T03:01:29.327
> 
> 标签：python, sql-server, linux, redhat, pyodbc

我正在尝试在 RedHat 机器上使用 Python 来使用 Microsoft 提供的驱动程序连接到 SQL Server 数据库。我知道驱动程序正在工作，因为我可以使用 sqlcmd 进行连接。Python 中的以下内容会产生错误。好像pyodbc找不到驱动。有人知道如何解决这个问题吗？

```
conStr = 'Driver={SQL Server Native Client 11.0};Server='+server+';Database='+db+';  
UID='+u+';PWD='+pw+';'
cnxn = pyodbc.connect(conStr)

pyodbc.Error: ('IM002', '[IM002] [unixODBC][Driver Manager]Data source name not found, and no default driver specified (0) (SQLDriverConnect)') 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T23:43:22.513

我发现在 Linux 上我需要删除驱动程序名称周围的大括号。

可以从此处收集有关 Driver 关键字的更多信息：http: [//msdn.microsoft.com/en-us/library/hh568455](http://msdn.microsoft.com/en-us/library/hh568455)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T01:39:00.280

实际上，您可以使用 pymssql 在 python 中连接 SQLServer。它易于使用，类似于 MySQL-python 库。

[http://code.google.com/p/pymssql/](http://code.google.com/p/pymssql/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T02:01:54.873

由于 pyodbc 正在通过 unixODBC，您能否确认 odbc.ini 和 odbcinst.ini 设置正确？

# codeigniter - Code Igniter - 尝试配置 database.php 以使用 PDO 驱动程序时出错

> ID：11076498
> 
> 赞同：0
> 
> 时间：2012-06-18T03:02:26.520
> 
> 标签：codeigniter, configuration

我试图让新的 PDO 驱动程序在我的应用程序的本地（Mac OS 10.7）副本中（开始）在 Code Igniter 2.1.1 中运行。我最初使用 Active Record 对所有数据库操作进行编码，现在我想我想在我的模型文件中使用 PDO 准备语句，继续前进。

我像这样修改了“application/config/database.php”：（注意几个小的嵌入式问题）

```
[snip]

$active_group = 'local_dev';

$active_record = TRUE;//<---BTW, will this need to stay TRUE to make CI sessions work?  For better security, don't we want db-based CI sessions to use PDO too?
//http://codeigniter.com/user_guide/database/configuration.html:
    //Note: that some CodeIgniter classes such as Sessions require Active Records be enabled to access certain functionality.

//this is the config setting that I am guessing (?) is my main problem: 

$db['local_dev']['hostname'] = 'localhost:/tmp/mysql.sock';

// 1.) if $db['local_dev']['dbdriver']='mysql', then here ^^^ 'localhost:/tmp/mysql.sock' works, 2.) but if $db['local_dev']['dbdriver']='pdo', then it fails with error msg. shown below.

$db['local_dev']['username'] = 'root';
$db['local_dev']['password'] = '';
$db['local_dev']['database'] = 'mydbname';
$db['local_dev']['dbdriver'] = 'pdo';
$db['local_dev']['dbprefix'] = '';
$db['local_dev']['pconnect'] = TRUE;
$db['local_dev']['db_debug'] = TRUE;//TRUE
$db['local_dev']['cache_on'] = FALSE;
$db['local_dev']['cachedir'] = '';
$db['local_dev']['char_set'] = 'utf8';
$db['local_dev']['dbcollat'] = 'utf8_general_ci';
$db['local_dev']['swap_pre'] = '';
$db['local_dev']['autoinit'] = TRUE;
$db['local_dev']['stricton'] = FALSE;
[snip] 
```

使用上述配置，一旦我加载控制器，我就会收到以下错误消息：

```
Fatal error: Uncaught exception 'PDOException' with message 'could not find driver' in 
/Library/WebServer/Documents/system/database/drivers/pdo/pdo_driver.php:114 Stack trace: #0 
/Library/WebServer/Documents/system/database/drivers/pdo/pdo_driver.php(114): PDO->__construct('localhost:/tmp/...', 'root', '', Array) #1 /Library/WebServer/Documents/system/database/DB_driver.php(115): CI_DB_pdo_driver->db_pconnect() #2 
/Library/WebServer/Documents/system/database/DB.php(148): CI_DB_driver->initialize() #3 
/Library/WebServer/Documents/system/core/Loader.php(346): DB('', NULL) #4 
/Library/WebServer/Documents/system/core/Loader.php(1171): CI_Loader->database() #5 
/Library/WebServer/Documents/system/core/Loader.php(152): CI_Loader->_ci_autoloader() #6 
/Library/WebServer/Documents/system/core/Con in 
/Library/WebServer/Documents/system/database/drivers/pdo/pdo_driver.php on line 114 
```

我尝试从 github 上的文件中换出“pdo_driver.php”文件，如下所示：http://codeigniter.com/forums/viewthread/206124/ [...](http://codeigniter.com/forums/viewthread/206124/) 但这只会产生其他错误，更不用说令人不安了如果可能的话，对于不想接触系统文件的新手。

该线程似乎还暗示需要破解“pdo_driver.php”系统文件： [CodeIgniter PDO 数据库驱动程序不起作用](https://stackoverflow.com/questions/11054618/codeigniter-pdo-database-driver-not-working) 不过，对我来说似乎很奇怪，（有人认为）需要对系统文件进行破解PDO 在 CI v.2.1.1 中工作，对吧？

感谢我可以尝试的任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T06:16:05.407

我不知道这是否对您有帮助，因为您已经开始使用 CI 函数，但是我使用 sqlite 为 PDO 创建了自己的库，然后自动加载它。我的需求很简单，所以它达到了它的目的。

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');

/**
* CodeIgniter PDO Library
*
*
* @author Michael Cruz
* @version  1.0
*/

class Sqlite_pdo
{
    var $DB;

    public function connect($path) {
        try {
            $this->DB = new PDO('sqlite:' . $path);
        }
        catch(PDOException $e) {
            print "Error: " . $e->getMessage();
            die();
        }
    }

    public function simple_query($SQL) {

        $results = $this->DB->query($SQL)
            or die('SQL Error: ' .  print_r($this->DB->errorInfo()));

        return $results;
    }

    public function prepared_query($SQL, $bind = array()) {

        $q = $this->DB->prepare($SQL)
            or die('Prepare Error: ' . print_r($this->DB->errorInfo()));

        $q->execute($bind)
            or die('Execute Error: ' .  print_r($this->DB->errorInfo()));  

        $q->setFetchMode(PDO::FETCH_BOTH);          

        return $q;
    }

    public function my_prepare($SQL) {

        $q = $this->DB->prepare($SQL)
            or die('Error: ' . print_r($this->DB->errorInfo()));            

        return $q;
    }

    public function my_execute($q, $bind) {
        $q->execute($bind)
            or die('Error: ' .  print_r($this->DB->errorInfo()));  

        $q->setFetchMode(PDO::FETCH_BOTH);

        return $q;
    }

    public function last_insert_id() {
        return $this->DB->lastInsertId();
    }
}

/* End of file Sqlite_pdo.php */ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T01:01:16.707

感谢菜鸟线程[http://codeigniter.com/forums/viewthread/180277/（InsiteFX](http://codeigniter.com/forums/viewthread/180277/)的回答）..

我发现以下似乎可行（需要测试更多才能达到 100% ......但至少错误消息消失了：

```
$db['local_dev']['hostname'] = 'mysql:host=127.0.0.1'; 
```

# php - 将表单操作设置为 jquery 选项卡

> ID：11076504
> 
> 赞同：0
> 
> 时间：2012-06-18T03:03:40.293
> 
> 标签：php, forms, jquery-ui, tabs, jquery-tabs

我在我的网页上安装了一个 jquery UI 选项卡系统，但是我遇到了一系列问题，其中一个是：我可以在同一页面上向我的 PhP 提出表单请求，然后自行处理结果。换句话说：我想将相关表单的操作设置为同一个选项卡，通过 ajax 从另一个文件加载，该选项卡首先包含表单，因此它可以读取并显示带有搜索结果的表格。

下面是一些代码，希望对你有帮助。

索引（作为#tabs div）：

```
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html" charset="iso-8859-1" />
        <link type="text/css" href="css/smoothness/jquery-ui-1.8.21.custom.css" rel="Stylesheet" />
        <link rel="stylesheet" type="text/css" href="css.css"></link>
        <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>    
        <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.18/jquery-ui.min.js"></script>
        <script type="text/javascript" src="maskMoney.js"></script>

        <title>Financeiro</title>
    </head>

    <body>
        <script>
            $(function() {
                $( "#tabs" ).tabs({
                    ajaxOptions: {
                        error: function( xhr, status, index, anchor ) {
                            $( anchor.hash ).html(
                            "A tab não pode ser carregada ou está sob manutenção, desculpe o transtorno." );
                        }
                    }
                });
            });

        </script>

        <div>
            <div id="tabs">
                <ul>
                    <li><a href="financeiro_ver.php">Buscar saída</a></li>
                    <li><a href="financeiro_criar.php">Criar saída</a></li>
                </ul>
            </div>
        </div>
        <script type="text/javascript" src="create.js"></script>
    </body>
</html> 
```

这是我放在选项卡下的一种形式（financeiro_ver.php 文件）：

```
<?php
include 'all.php';

if (isset($_POST['efetuar'])) {
    $saida = new Saida();
    if (isset($_POST['situacao'])) {
        $saida->situacao = $_POST['situacao'];
    } else {
        $saida->situacao = 'npago';
    }
    $sql = "UPDATE financeiro SET situacao = '".$saida->situacao."' WHERE id = '".$_POST['saidaId']."'";
     mysql_query($sql);
}

if (!isset($_SESSION)) {
    session_start();
}
$_SESSION['ID_FUNCIONARIO'] = 46;
?>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html" charset="iso-8859-1" />
        <link type="text/css" href="css/smoothness/jquery-ui-1.8.21.custom.css" rel="Stylesheet" />
        <link rel="stylesheet" type="text/css" href="css.css"></link>
        <title>Financeiro</title>
    </head>

    <body>
        <form id="form0" name="form0" method="post" action="financeiro_ver.php"> <!--action="http://sim.medgoldman.com.br/financeiro/financeiro_ver.php" style="background-color:#EEEEEE"> -->
              <table border="0" align="center" cellpadding="10" cellspacing="0">
                <tr>
                    <td align="center">GRUPO:
                        <select name="categoria" id="produto">
                            <option value="adm">Despesas Administrativas</option>
                            <option value="imp">Importações</option>
                            <option value="ban">Bancos</option>
                            <option value="matriz">Despesas Matriz</option>
                            <option value="outros">Outros</option>                            
                        </select></td>
                    <td align="center">PERÍODO:
                    <td>de: <input name="data1" id="data1" value=""></input></td>
                    <td>até: <input name="data2" id="data2" value=""></input></td>
                    </select></td>
                    <td align="center"><input name="buscar" type="submit" id="buscar" value="   Buscar   " /></td>
                </tr>
            </table>
        </form>
        <?php
        if ($_SESSION['ID_FUNCIONARIO'] == '19') {
            echo '<form name="form2" method="post" <!--action="http://sim.medgoldman.com.br/financeiro/financeiro_ver.php" --> style="background-color:#EEEEEE">';
        }
        ?>
        <table  class ="viewTable" align="center">
            <?php
            if (isset($session->message)) {

                $mens ="<th>" . $session->message . "</th>";
                echo utf8_encode($mens);
            }

            if (isset($_POST['buscar'])) {

                $query = "SELECT * FROM financeiro " .
                        "WHERE categoria = '" . $_POST['categoria'] .
                        "' AND data >= '" . $_POST['data1'] .
                        "' AND data <= '" . $_POST['data2'] . "'";

                if (mysql_query($query, $database->connection)) {
                    $categoriaSel = mysql_query($query, $database->connection);

                    $output = '<tr><th colspan="3">Categoria ';
                    if ($_POST['categoria'] === 'adm') {
                        $output .= "Despesas administrativas";
                    } elseif ($_POST['categoria'] === 'imp') {
                        $output .= "Importações";
                    } elseif ($_POST['categoria'] === 'ban') {
                        $output .= "Bancos";
                    } elseif ($_POST['categoria'] === 'outros') {
                        $output .= "Outros";
                    } elseif ($_POST['categoria'] === 'matriz') {
                        $output .= "Despesas Matriz";
                    }
                    $output .= "</th>";
                    $output .= "<tr><th>Data</th><th>Descrição</th><th>Valor</th></tr>";

                    $valorSomaUS = 0;
                    $valorSomaRS = 0;

                    while ($saidasSel = mysql_fetch_array($categoriaSel)) {
                        $valorDisplay = number_format($saidasSel['valor'], '2', ',', '.');
                        $output .= "<tr";
                        if ($saidasSel['situacao'] === 'pago') {
                            $output .= ' class="pago"';
                        } else if ($saidasSel['situacao'] === 'npago') {
                            $output .= ' class="npago"';
                        }
                        $output .= ">";
                        $output .= "<td class=\"datout\">" . $saidasSel['data'] . "</td>";
                        $output .= "<td class=\"desout\">" . $saidasSel['descricao'] . "</td>";
                        if ($saidasSel['cambio'] === "us") {
                            $output .= "<td class=\"valout\"> U$ " . $valorDisplay . "</td>";
                            $valorSomaUS += $saidasSel['valor'];
                        } else {
                            $output .= "<td class=\"valout\"> R$ " . $valorDisplay . "</td>";
                            $valorSomaRS += $saidasSel['valor'];
                        }

                        //VERIFICA USUARIO PARA ADICIONAR PAGO/NPAGO:
                        if ($_SESSION['ID_FUNCIONARIO'] == '19') {
                            $output .= '<td><input name="situacao" type="checkbox" value="pago"';
                            if ($saidasSel['situacao'] === 'pago') {
                                $output .= ' checked';
                            }
                            $output .=">Pago</input></td>";
                        }

                        //VERIFICA USUARIO PARA VER PAGO/NPAGO:
                        if ($_SESSION['ID_FUNCIONARIO'] == '46') {
                            if ($saidasSel['situacao'] === 'pago') {
                                $output .= '<td>pago</td>';
                            } else {
                                $output .= '<td>não pago</td>';
                            }
                        }
                        if ($_SESSION['ID_FUNCIONARIO'] == '30' && $saidasSel['categoria'] === "imp") {
                            if ($saidasSel['situacao'] === 'pago') {
                                $output .= '<td>pago</td>';
                            } else {
                                $output .= '<td>não pago</td>';
                            }
                        }

                        //VERIFICA USUARIO PARA ADICIONAR DELETAR:                   
                        if (($_SESSION['ID_FUNCIONARIO'] == '46') && ($saidasSel['categoria'] === 'adm' || $saidasSel['categoria'] === 'outros' || $saidasSel['categoria'] === 'matriz')) {

                            $output .= "<td><button class=\"deletar\" href=\"financeiro_deletar.php?id=" . $saidasSel['id'] . "\">Deletar</button>";
                        } elseif (( $_SESSION['ID_FUNCIONARIO'] == '30' || $_SESSION['ID_FUNCIONARIO'] == '46' ) && $saidasSel['categoria'] === 'imp') {

                            $output .= "<td><button class=\"deletar\" href=\"financeiro_deletar.php?id=" . $saidasSel['id'] . "\">Deletar</button></td>";
                        }

                        $output .="</tr>";

//SOMA DOS VALORES DO PERIODO:                                  
                        $valorSomaUS = number_format($valorSomaUS, '2', ',', '.');
                        $valorSomaRS = number_format($valorSomaRS, '2', ',', '.');
                        $output .= "<tr> <td class=\"valsoma\" colspan=\"3\"> Soma do período = R$ " . $valorSomaRS . " e U$ " . $valorSomaUS . "</td></tr>";
                        if ($_SESSION['ID_FUNCIONARIO'] == '19') {
                            $output .= '<tr><td><input id="efetuar" type="submit" value=" Efetuar " name="efetuar"></input></td><td><input type="hidden" value="' . $saidasSel['id'] . '" name="saidaId"></input></td></tr>';
                        }
                    }
                    echo utf8_encode($output);
                } else {
                    $session->message("Nenhuma saída para este período.");
                }
            }
            ?>
        </table>
        <?php
        if ($_SESSION['ID_FUNCIONARIO'] == '19') {
            echo '</form>';
        }
        ?>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T05:23:10.727

[http://jsfiddle.net/mZLDk/](http://jsfiddle.net/mZLDk/)

```
$(document).ready(function() {
// Tab initialization
// This is setup for two tab groups and is not needed
$('#tabs, #fragment-1').tabs({
    select: function(event, ui){
        var tabNumber = ui.index;
        var tabName = $(ui.tab).text();
        //Here I setup an event for each change this changes some inner html 
        //of a tag but can be applied  in your situation
        if(tabNumber = 1 ) {
            document.getElementById('fragment-1a').innerHTML = "changed";
        } else {
        }
        //This was just some debuging code for me
        console.log('Tab number ' + tabNumber + ' - ' + tabName + ' - clicked');
    }
    });
}); 
```

您将替换该行

```
 document.getElementById('fragment-1a').innerHTML = "changed"; 
```

和

```
 document.forms[0].action = "An Action"; 
```

我真的很兴奋，因为这是我在这个网站上的第一个工作答案，所以请告诉我它是否有效

一个完整的 JAVASCRIPT 菜鸟如何找到您的答案的长篇故事

作为一个想法，您可以尝试制作它，以便选项卡事件更改设置 IE

[jQuery - 捕获选项卡选择事件](https://stackoverflow.com/questions/3641154/jquery-trapping-tab-select-event)

但这对你有什么好处我在这里找到了其他东西

[http://www.tek-tips.com/viewthread.cfm?qid=1235640](http://www.tek-tips.com/viewthread.cfm?qid=1235640)

这讨论了基于事件的表单操作，您可以更改 onlcick。

但现在一个将两者结合在一起的例子

[http://jsfiddle.net/mZLDk/](http://jsfiddle.net/mZLDk/)

# css - 如何使 CSS 背景图像居中，就好像图像具有不同的宽度一样（不切断 bgimg）？

> ID：11076505
> 
> 赞同：1
> 
> 时间：2012-06-18T03:03:42.577
> 
> 标签：css, stylesheet, background-image, centering

我正在尝试将书签添加到我的 wop 网站。问题是我想让小书签（在下图中以红色突出显示）居中，就好像它没有箭头伸出侧面一样。如果我更改 css 中 bgimage 的宽度，使其与下面的缩进框相同，它会以我想要的方式居中。但是，它切断了一点箭头。所以，我的问题是，我怎样才能使小书签居中，就好像它具有其他缩进框的宽度一样。

![在此处输入图像描述](../Images/ca46f007d8d18c40fa9cc385588f3c96.png)

小书签 CSS：

```
#bookmarklet {
    background-image:url('images/bookmarklet.png');
    width:425px;
    height:175px;
    background-repeat: no-repeat;
    margin-left: auto;
    margin-right: auto;
    padding-bottom:8px;
} 
```

我希望小书签像它一样居中（不切掉箭头的一侧）：

```
#resultbg {
    background-image:url('images/resultbg.png');
    width:404px;
    height:347px;
    background-repeat: no-repeat;
    margin-left: auto;
    margin-right: auto;
    padding-top:8px;
} 
```

任何帮助是极大的赞赏！谢谢（：

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T03:06:53.107

测量箭头从框中“伸出”的像素数量，将其除以 2 并将其设为左边距

这是我想到的第一件事。但是，您首先使用左边距使图像居中。也许有一个容器 div，用 margin-left: auto 和 margin-right: auto 将这个 div 居中，然后在这个 div 内使用图像的边距。那应该工作

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T03:07:20.603

只需添加

```
background-position:center; 
```

到应该居中的背景

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T03:12:34.690

几个选项：

1.  减少图像的宽度并在侧面填充一些空白空间，这样它就不会被切断。
2.  将图像包装在 div 中并设置宽度，以便使用一些填充或边距根据需要定位背景图像。

# iphone - 如何在 UITableview 的 didSelectRowAtIndexPath 中实现动作？

> ID：11076510
> 
> 赞同：2
> 
> 时间：2012-06-18T03:06:20.360
> 
> 标签：iphone, ios, uitableview, didselectrowatindexpath

在我看来，我以前只有几个按钮，每个按钮都有一个与之关联的操作。

```
 UIButton *testButton = [[UIButton alloc] initWithFrame:CGRectMake(120,300,90,90)];
    [testButton setBackgroundImage:[UIImage imageNamed:@"test.jpg"] forState:UIControlStateNormal];
    [testButton addTarget:self.view action:@selector(gotoProd:) forControlEvents:UIControlEventTouchUpInside];
    [testButton addt
    [scrollView testButton]; 
```

但现在我试图用带有行的表格视图替换所有这些按钮。我能够填充行并且我知道需要使用 didSelectRowAtIndexPath 来处理单元格的选择事件。但是如何在 tableviews 中实现 action:@selector(gotoProd:) ？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T03:16:17.233

最直接的方式如下所示：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

      switch (indexPath.row) {
        case 0:
            [self doRow0Action];
            break;
        case 1:
            [self doRow1Action];
            break;
        // etc...

        default:
            break;
    }
} 
```

如果你想改为，你可以用 SEL 类型初始化一个数组：

```
[actionArray addObject:@selector(doRowNAction)]; 
```

然后像这样访问它：

```
[self performSelector:[actionArray objectAtIndex:indexPath.row] withObject:nil]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T03:14:42.367

称呼

```
[self gotoProd:indexPath.row]; 
```

从`didSelectRowAtIndexPath`

和

```
 - (void)gotoProd:(int)rowSelected {
      //Check row index here and do it accordingly
 } 
```

# php - Twitter API 类似于 Google Alert

> ID：11076512
> 
> 赞同：0
> 
> 时间：2012-06-18T03:07:10.080
> 
> 标签：php, web-applications, twitter, google-alerts

我正在尝试创建一个与 Google 警报具有类似功能的 Web 应用程序。（我的意思是类似的，用户可以提供他们的电子邮件地址，以便每天或每小时发送警报）唯一的限制是它只根据某个关键字或主题标签向用户发出警报。我认为我已经找到了这个 Web 应用程序所需的基本 API。

[https://dev.twitter.com/docs/api/1/get/search](https://dev.twitter.com/docs/api/1/get/search)

问题是我仍然不知道该应用程序正常工作所需的所有 Web 技术。例如，我是否必须将所有搜索到的关键字存储在数据库中？我是否必须始终保持池化 ajax 请求以保持数据库更新？如果用户提供的关键字现在非常流行，可能在一小时内有数千条推文（更不用说，可能有几封电子邮件要求几个热门话题）怎么办？

顺便说一句，我正在尝试使用 PHP 构建这个应用程序。所以请告诉我，我需要为这样的网络应用学习什么样的技术（可能还有一些参考资料）？任何形式的帮助将不胜感激。提前致谢 ：）

问候，

菲利克斯·佩达纳

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T04:19:38.247

我想您应该将用户的电子邮件和搜索关键字（或其他）存储在数据库中。

然后您的应用程序应该进行 API 查询（因此它应该由服务器运行）以获取一些相关数据。然后你必须向所有用户发送数据。

要理解这里是算法：

1.  用户将他的请求添加到页面，例如[http://www.google.ru/alerts](http://www.google.ru/alerts)
2.  您将他的电子邮件和关键字存储在数据库中。
3.  然后你的服务器运行脚本（你可以循环它或使用 cron），它对 Twitter 进行查询以获取一些数据。
4.  您的脚本处理所有数据并将其发送到用户的电子邮件。

# c# - 使用转换绑定到 ObservableCollection

> ID：11076516
> 
> 赞同：1
> 
> 时间：2012-06-18T03:07:25.753
> 
> 标签：c#, wpf, xaml

我有`ItemsControl`我绑定的`ObservableCollection`

在我的视图模型上，我只是插入对象，它会弹出到 UI

我想展示过渡。例如，我希望该项目淡入，以便用户直观地注册此更改，假设它发生在 1 秒内。

我应该寻找什么？它是如何在 WPF 中完成的？

编辑：

我想我需要某种动画，但我正在寻找的是没有编码的简单东西。简单的 XAML 实现，有什么内置的吗？我尝试`TranslateTransform`了其他选择，但它没有做任何事情。

```
<ItemsControl ItemsSource="{Binding Source={StaticResource TrucksSource}}">
                <ItemsControl.RenderTransform>
                    <TranslateTransform />
                </ItemsControl.RenderTransform>
                <ItemsControl.ItemTemplate>
                    <DataTemplate>
                        <TextBlock Text="{Binding TruckId}" Background="Aqua"/>
                    </DataTemplate>
                </ItemsControl.ItemTemplate>
            </ItemsControl> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T07:32:00.623

对于淡入，您可以`EventTrigger`在`Loaded`事件上使用`ContentPresenters`

```
<ItemsControl ItemsSource="{Binding Source={StaticResource TrucksSource}}">
    <ItemsControl.ItemContainerStyle>
        <Style TargetType="ContentPresenter">
            <Style.Triggers>
                <EventTrigger RoutedEvent="Loaded">
                    <EventTrigger.Actions>
                        <BeginStoryboard>
                            <Storyboard Storyboard.TargetProperty="Opacity">
                                <DoubleAnimation From="0.0"
                                                 To="1.0"
                                                 Duration="00:00:01"/>
                            </Storyboard>
                        </BeginStoryboard>
                    </EventTrigger.Actions>
                </EventTrigger>
            </Style.Triggers>
        </Style>
    </ItemsControl.ItemContainerStyle>
    <ItemsControl.ItemTemplate>
        <DataTemplate>
            <TextBlock Text="{Binding TruckId}" Background="Aqua"/>
        </DataTemplate>
    </ItemsControl.ItemTemplate>
</ItemsControl> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T03:24:16.693

阅读：http: [//msdn.microsoft.com/en-us/library/ms750596.aspx](http://msdn.microsoft.com/en-us/library/ms750596.aspx)

您需要动画转换（最后一章）并将不透明度值从 1.0 更改为 0.0

# c# - e.cancel 必须允许退出按钮

> ID：11076518
> 
> 赞同：0
> 
> 时间：2012-06-18T03:07:43.043
> 
> 标签：c#, winforms, datagridviewtextboxcell

当用户在我的 DatagridView 单元格中输入无效值时，我在 _CellValidating 事件中设置“e.Cancel = true”。

似乎 e.Cancel 也阻止用户关闭表单或点击 X 按钮，我该如何添加例外？（即使 e.Cancel 设置为 true，也允许用户关闭表单）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T03:20:30.407

我只是根据这个场景搭建了一个测试项目，似乎 ' 事件在`DataGridView`'事件`CellValidating`之前被调用；这意味着在验证单元格时，您无法知道用户是否尝试关闭表单。`Form``Closing`

严格来说，正确的事件顺序是让用户在允许关闭表单之前在单元格中输入有效数据（或按退出键取消编辑）。但是，如果您想允许表单关闭，您可以处理`Closing`表单的事件：

```
protected override void OnClosing(CancelEventArgs e) {
    e.Cancel = false;
    base.OnClosing(e);
} 
```

这是不好的做法，但它会给你你所要求的行为。

# java - 在 Java 应用程序中使用网络摄像头

> ID：11076521
> 
> 赞同：0
> 
> 时间：2012-06-18T03:08:19.283
> 
> 标签：java, netbeans, webcam

我正在使用 netbeans IDE 7.1.1 我正在让应用程序从网络摄像头捕获图像，但我的问题是，当我第一次运行该应用程序时，它会给我正确的输出，但是当我再次运行相同的应用程序时，它给了我这个错误：

```
java.io.IOException: Could not connect to capture device
javax.media.NoDataSourceException: Error instantiating class: com.sun.media.protocol.vfw.DataSource : java.io.IOException: Could not connect to capture device
    at javax.media.Manager.createDataSource(Manager.java:1012) 
```

谁能告诉我为什么会这样？

我的代码是：

```
 /* Grab the default web cam*/
             MediaLocator ml = new MediaLocator("vfw://0");

        /* Create my data source */
        DataSource ds = Manager.createDataSource(ml);

        requestFormatResolution(ds);

        /* Create & start my player */
        Player p = Manager.createRealizedPlayer(ds);

        p.start();
            Component videoScreen = p.getVisualComponent(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T04:35:19.097

您还需要关闭`Player`并取消分配它。

只需执行以下操作：

```
player.close();
player.deallocate(); 
```

有关这些方法的更多详细信息，请查看 API（[close()](http://java.sun.com/javame/reference/apis/jsr927/javax/media/Controller.html#close%28%29)和[deallocate()](http://java.sun.com/javame/reference/apis/jsr927/javax/media/Controller.html#deallocate%28%29)）。

# emacs - 对elisp中的格式功能感到困惑

> ID：11076524
> 
> 赞同：0
> 
> 时间：2012-06-18T03:08:41.603
> 
> 标签：emacs, lisp, elisp

我想得到像*0 1*这样的输出，但下面的代码只打印*nil*。我使用 type-of 来测试（第一个十六进制），它是整数。%d 应该可以，对吧？如果我使用消息，它可以在 Emacs 中使用。

```
(defun draw-board (board)
  (loop for x below 2
        for hex = (aref board x)
        do (format "%d " (first hex))))

(draw-board [(0 2) (1 2) (0 3) (0 2)]) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-18T03:34:14.657

1- emacs lisp 格式不是 Common Lisp 格式。注意缺少的论点！

```
(format "%d" 42) == (cl:format NIL "~D" 42) 
```

2-因此，您的循环所做的唯一事情是：

```
 - to check that board is a vector with at least two slots. (aref
   signals an error if the index is out of bound).

 - to check that each of those two slots are lists (first signals an
   error when passed a non list).

 - to check that the first element of each each of those two slots
   are numbers. (format signals an error when you pass a non number
   for %d). 
```

就这样。

你从来没有说过你想打印任何东西。

要打印一些东西，你必须把它放在一个缓冲区中，并使用 ps-print-buffer：

```
(defun draw-board (board)
  (with-temp-buffer
    (loop for x below 2
          for hex = (aref board x)
          do (insert (format "%d " (first hex))))
    (ps-print-buffer))) 
```

# android - 显示键盘时是否可以在 Firefox 移动设备中处理 jQuery 输入事件？

> ID：11076527
> 
> 赞同：2
> 
> 时间：2012-06-18T03:09:37.077
> 
> 标签：android, jquery, firefox

我正在尝试捕获文本输入上的输入事件。使用 jQuery 我正在处理`keyup`事件以填充匹配列表（自动完成列表）。这在股票浏览器和 Maxthon 等其他浏览器上运行良好，但在 Firefox 移动版中，显示键盘时没有任何反应——我必须按 Enter 或隐藏键盘才能正常工作。

我正在使用 jQuery 1.7.2、Android 2.3 和最新版本的 Firefox（我相信是 10）。`input`我还尝试过其他事件，例如`keydown`没有任何运气。

显示键盘时是否可以在 Firefox 移动版中处理键/输入事件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T09:47:37.703

问题是，当在 Android 键盘中打开单词建议时，Firefox 在键盘“猜测”单词期间不会触发键事件，尽管值被发送到文本字段。我会说这是 Firefox 中的一个错误，但我猜他们之所以选择这样做是因为如果键盘提示的内容与您编写的确切内容不同，则按下键的结果与字段获得的值不一致。

我通过使用嗅探器检查值是否已更改来解决此问题。

```
var $searchField;
var _keypressWatchingTimer = 0;
var _previousTerm = '';

function keypressStartWatching() {
  keypressStopWatching();
  _keypressWatchingTimer = setInterval(executeAutocomplete, 100);
}

function keypressStopWatching() {
  if (_keypressWatchingTimer != 0) {
    clearInterval(_keypressWatchingTimer);
    _keypressWatchingTimer = 0;
  }
}

function executeAutocomplete() {
  var searchTerm = $searchField.val() || '';
  if (_previousTerm == searchTerm)
    return false;
  searchApi.autocomplete(searchTerm);
  _previousTerm = searchTerm;
}

function init() {
  $searchField = $('#searchField')
    .focus(keypressStartWatching)
    .blur(keypressStopWatching)
    .keyup(executeAutocomplete);
}

init(); 
```

# sql - 使用多个更新语句更新行并提交

> ID：11076530
> 
> 赞同：1
> 
> 时间：2012-06-18T03:09:55.997
> 
> 标签：sql, sql-server

我正在使用空间类型更新表，并且可能必须执行三个或更多更新以确保几何类型成功加载到地理类型中。我要做的是对我们进行第一次更新并提交尽可能多的行，然后在第一次失败的地方使用第二次更新，最后在第二次失败的地方使用第三次更新。

我成功地手动完成了这项工作，并使用几何类型更新了所有地理类型。这些是我正在使用的语句：

更新声明#1：

```
Update Postcode set geog = geography::STGeomFromWKB(geom.STAsBinary(), 4326)
FROM Postcode
WHERE geog is null 
```

更新声明#2：

```
Update Postcode set geog = geography::STGeomFromWKB(geom.STUnion(geom.STStartPoint()).STAsBinary(), 4326)
FROM Postcode
WHERE geog is null 
```

更新声明#3：

```
Update Postcode set geog = geography::STGeomFromWKB(geom.STBuffer(0.00001).STBuffer(-0.00001).STAsBinary(), 4326) 
FROM Postcode 
WHERE geog is null 
```

有没有办法写这个，这样它就可以让我在没有遇到错误的地方更新行，然后在出现错误的情况下继续下一个更新语句？

我希望这是有道理的，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T07:52:32.777

如果有一种方法可以在不实际抛出错误的情况下测试每个分配，那么首选方法是使用 CASE 语句在它们之间切换。

```
 update postcode set geog = case when <test> then <A>
                                   when <testB> then <B>
                                   else <C>
                              end 
```

否则，如果无法避免错误，则可以使用嵌套的 try/catch 块来确保执行。但是，当给定语句中发生错误时，可能会回滚整个语句（此处不是 100% 肯定）。如果您可以运行所有三个语句，您听起来会很高兴，所以不确定这是否是一个问题。

```
 BEGIN TRY
        -- A
    END TRY
    BEGIN CATCH
        BEGIN TRY
            -- B
        END TRY
        BEGIN CATCH
            -- C
        END CATCH         
    END CATCH 
```

# google-app-engine - Twitter 无法验证 oauth 签名和令牌

> ID：11076531
> 
> 赞同：0
> 
> 时间：2012-06-18T03:10:04.440
> 
> 标签：google-app-engine, struts2, twitter-oauth

我在 Google App Engine 中使用 Struts2。在我的行动中：

```
public String execute(){
    oauth_callback = REDIRECT_URI;
    consumer_key = CONSUMER_KEY;
    consumer_secret = CONSUMER_SECRET;

    return SUCCESS;
} 
```

在我的 Struts.xml

```
<result type="redirect">
    <param name="location">https://api.twitter.com/oauth/request_token?oauth_callback=${oauth_callback}&amp;consumer_key=${consumer_key}&amp;consumer_secret=${consumer_secret}</param>
</result> 
```

我收到错误：

```
Failed to validate oauth signature and token 
```

我是否缺少传递给 oath/request_token 的参数？

谢谢。

# iphone - 如何使用蒙版图层拍摄图层快照？

> ID：11076534
> 
> 赞同：3
> 
> 时间：2012-06-18T03:10:29.283
> 
> 标签：iphone, quartz-graphics

我在 UIView 的图层上添加了一个遮罩：

```
CGImageRef maskImageRef = [UIImage imageNamed:"Icon.png"].CGImage; 
CALayer maskLayer = [CALayer layer];
maskLayer.contents = (__bridge id)maskImageRef;
self.layer.mask = maskLayer; 
```

然后我使用此代码从 UIView 获取快照：

```
[self.layer renderInContext:mainViewContentContext]; 
```

但是面具没有画出来。

如何用面具绘制self.layer？

特别感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T06:00:23.357

你必须屏幕截图试试这个代码：

```
CGRect screenRect =CGRectMake(0, 0, self.view.frame.size.width, self.view.frame.size.height-44); 
UIGraphicsBeginImageContext(screenRect.size);

CGContextRef ctx = UIGraphicsGetCurrentContext();
[self.view.layer renderInContext:ctx];

UIImage *viewImage = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();

UIImageWriteToSavedPhotosAlbum(viewImage, self, nil, nil); 
```

我希望能帮助你。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T05:28:01.837

解决此问题的一种方法是使用**Quartz**函数

在 drawRect 方法中使用 CGContextClipToMask(context, rect, maskImage)

请参阅[CGContextClipToMask 示例](https://stackoverflow.com/questions/1344767/how-to-draw-a-shape-on-top-of-a-uiimage-while-respecting-the-images-alpha-mask)链接以获取帮助

# mysql - 如何在sql中过滤子类别的ID

> ID：11076537
> 
> 赞同：0
> 
> 时间：2012-06-18T03:11:56.203
> 
> 标签：mysql, sql

我用 A is`1,2,3`和 B is创建了一张表`3,5,5,9,10,10`。

例如，我想从这个表中改变：

```
NP  A  B C
-- -- -- -----------------------
 1  1  3 why not
 1  1  5 weigh
 1  1  5 hello
 1  1  9 no way
 1  1 10 now or never
 1  1 10 float the boat, captain
 1  1 12 no nelp
 2  2  4 why
 2  2  6 way too much
 2  2 11 help
 3  3  1 not now
 3  3  2 not
 3  3  7 milky way
 3  3  7 this is stupid
 3  3  8 one way 
```

变成这样：

```
 A   B  C
--  --  -----------------------
 1   3  why not
     5  weigh
     5  hello
     9  no way
    10  now or never
    10  float the boat, captain
    12  no nelp

 2   4  why
     6  way too much
    11  help

 3   1  not now
     2  not
     7  milky way
     7  this is stupid
     8  one way 
```

怎么做？有人知道吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T03:41:08.260

试试这个：[http ://www.sqlfiddle.com/#!2/073ec/4](http://www.sqlfiddle.com/#!2/073ec/4)

```
select A, B, C
from
( 
  select
     if (A = @last, null, A) as A,
     B, C, (@last := A) 
  from tbl, (select @last := null as x) as vars
) as q 
```

输出：

```
|      A |  B |                       C |
-----------------------------------------
|      1 |  3 |                 why not |
| (null) |  5 |                   weigh |
| (null) |  5 |                   hello |
| (null) |  9 |                  no way |
| (null) | 10 |            now or never |
| (null) | 10 | float the boat, captain |
| (null) | 12 |                 no nelp |
|      2 |  4 |                     why |
| (null) |  6 |            way too much |
| (null) | 11 |                    help |
|      3 |  1 |                 not now |
| (null) |  2 |                     not |
| (null) |  7 |               milky way |
| (null) |  7 |          this is stupid |
| (null) |  8 |                 one way | 
```

* * *

@Naim Nsco

不需要显式声明变量，如果我在查询中显式声明它，我只是发现意图（上面的代码）更清楚。话虽如此，不声明变量也有效

```
select A, b, c
from
( 
  select
     if (A = @last, null, A) as A,
     B, C, (@last := A) 
  from tbl
) as q 
```

看，它有效：[http ://www.sqlfiddle.com/#!2/073ec/6](http://www.sqlfiddle.com/#!2/073ec/6)

# datagridview - Datagridview 列不允许为空

> ID：11076539
> 
> 赞同：3
> 
> 时间：2012-06-18T03:12:02.443
> 
> 标签：datagridview, null, newrow

我有一个绑定到数据源的 datagridview，column[0] AgencyName 是主键，不能为空。单击 Bindingnavigator ( + ) 加号添加新行（两次）将导致错误“列 (AgencyName) 不允许为空”。如何处理这个空异常？

总的来说，你能告诉我如何在绑定到数据源的 datagridview 中处理 null 和主键约束。请注意，我只是将数据源拖到 winform 中来创建它。

![形式](../Images/dde869d2b519bf099d9fb2ab29df2397.png)

我有这个代码

```
 private void clientsDataGridView_Validating(object sender, CancelEventArgs e)
    {

        DataGridViewRow row = clientsDataGridView.CurrentRow as DataGridViewRow;

        if (row.Cells[0].Value == DBNull.Value)
        {

           clientsDataGridView.CancelEdit();                
           e.Cancel = true;

        }
     } 
```

除非我提供有效值，否则此代码不会让我浏览其他记录。我希望每当我移动到其他行时取消新行（包含无效数据）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T16:30:04.180

从[Control.Validating](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.validating.aspx)事件描述（DataGridView 继承自）：

如果在 Validating 事件委托中将 CancelEventArgs 的 Cancel 属性设置为 true，则通常会在 Validating 事件之后发生的所有事件都将被抑制。

因此，通过设置 e.Cancel = true 您告诉 DataGridView 取消所有后续事件（包括 RowLeave）。

您正在使用 Bindingsource 并将 Datagridview 绑定到它？如果是这样，我会尝试调用 Bindingsource.CancelEdit() 而不是 Datagridview.CancelEdit()。

也许：

```
Dim bm As BindingManagerBase = clientsDatagridView.BindingContext(clientsDatagridView.DataSource, clientsDatagridView.DataMember)
bm.CancelCurrentEdit() 
```

# php - 在模板中输出 DataObjectManager 包括

> ID：11076545
> 
> 赞同：0
> 
> 时间：2012-06-18T03:13:29.860
> 
> 标签：php, silverstripe

我已经按照这里的教程[http://doc.silverstripe.org/old/modules:dataobjectmanager](http://doc.silverstripe.org/old/modules:dataobjectmanager)在我的 CMS 中创建了一个 dataobjectmanager。

那里一切正常，但是我在将其输出到模板中时遇到了问题。我的代码如下

```
<?php 
class InfoArea extends DataObject{ 
   static $db = array( 
      'Title' => 'Varchar(255)', 
      'Content' => 'HTMLText' 
   ); 

   static $has_one = array( 
      'ResortPage' => 'ResortPage' 
   ); 

   public function getCMSFields_forPopup(){ 
      return new FieldSet( 
         new TextField('Title'), 
         new SimpleTinyMCEField('Content') 
      ); 
   } 
} 
```

度假村页面.php

```
....... 
static $has_many = array ( 
      "InfoAreas" => "InfoArea" 
   ); 
....... 
$fields->addFieldToTab("Root.Content.AdditionalInformation", 
         new DataObjectManager( 
         $this, 
         'InfoAreas', 
         'InfoArea', 
         array('Title' => 'Title','Content'=>'Content'), 
         'getCMSFields_forPopup' 
      )); 
........ 
```

我有一个包含“ResortInfo.ss”的模板“ResortPage.ss”。我需要从这个包含文件中输出 DataObject。

我已经尝试了以下但它没有输出任何东西

```
<% control InfoArea %> 
   $Title 
   $Content 
<% end_control %> 
```

我在这里做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T04:04:51.573

我发现了这个问题。在我的 ResortPage 课程中

```
static $has_many = array ( 
      "InfoAreas" => "InfoArea" 
   ); 
```

也

```
static $has_one = array ( 
      "InfoAreas" => "InfoArea" 
   ); 
```

..因为失误。我只需要`has_many`.

# ios - 在 UITableView 上方添加一个隐藏视图，该视图仅在 TableView 向上滚动时显示

> ID：11076551
> 
> 赞同：1
> 
> 时间：2012-06-18T03:14:44.577
> 
> 标签：ios, objective-c, ios5

**目标/情况：**
我目前在 TableView 标题中有一个 UIView。我正在尝试添加另一个 UIView（其中包含两个按钮和一些文本字段），它将位于 TableView 标题上方。我希望当用户向上滚动通过标题（拉“拉刷新”）时显示视图，并在用户按下视图上的“完成”按钮时消失。

**我的三个问题：**

> > 1.  如何在 tableview 标题上方添加视图？
> > 2.  当用户向上滚动超过标题时，如何显示所述视图？
> > 3.  当用户按下所述视图上的按钮时，如何关闭所述视图？

编辑：
我将按照@kimpoy 的建议将我的自定义视图添加到第三方 PullToRefresh TableViewController。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T07:59:26.677

如果我理解正确，您希望通过用户触发 albe 来触发两个不同的方法调用，这取决于用户拉动的程度。

我假设您要添加的 UiView 是“第二个标题”。它应该类似于“拉动刷新标题”。

我认为魔术还利用了 UIScrollView 委托。在许多示例中，您可以看到“Pull to ...”只是检查 scrollView.contentOffset.y

所以，你可能是这样的：

// 检查拉动刷新功能的代码（简化）

```
- (void) scrollViewDidScroll:(UIScrollView *)scrollView {
      if (self.scrollView.contentOffset.y <= - 65.0f) {}
  }

- (void) scrollViewDidEndDragging:(UIScrollView *)scrollView willDecelerate:(BOOL)decelerate {
      if (self.scrollView.contentOffset.y <= - 65.0f) {}
  } 
```

将其更改为：

```
- (void) scrollViewDidScroll:(UIScrollView *)scrollView {
     if ( -65.0f <= self.scrollView.contentOffset.y <= - 55.0f  ) {
         // give a area for checking the origin pull to refresh action
     }

     if (self.scrollView.contentOffset.y <= - 65.0f) {
        // checking for ur function
     }
 }

 - (void) scrollViewDidEndDragging:(UIScrollView *)scrollView willDecelerate:(BOOL)decelerate {
     if ( -65.0f <= self.scrollView.contentOffset.y <= - 55.0f ) {
        // give a area for checking the origin pull to refresh action
     }

     if (self.scrollView.contentOffset.y <= - 65.0f) {
        // checking for ur function

        // add ur view the UIScrollView / TableView
        // set ur scrollview offset to show ur whole form
        [scrollView setContentOffset:CGPointMake(0, y)];
     }

  } 
```

最后向你的表单按钮添加一个方法调用来做你想做的事情（删除表单并将scrollView内容偏移设置回（0,0））

（对不起，我说的不是概念，我不确定它是否有效）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T03:40:57.077

[http://three20.info/](http://three20.info/) 这个框架对你有很大帮助。它有你想要的工作表。并且“拉动刷新”区域是可定制的

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T04:47:00.680

你应该像这样实现它。使用[EGORefreshTableHeaderView](https://github.com/enormego/EGOTableViewPullRefresh/blob/master/EGOTableViewPullRefresh/Classes/View/EGORefreshTableHeaderView.m)或[PullToRefresh](https://github.com/punayKimberly/PullToRefresh)等第三方。

1.  这两个可以帮助您在表格视图上方创建“拉动刷新”视图。
2.  在 .h 文件中声明第三方类的实例
3.  将这两者中的任何一个实例化到您要实现它的类。然后，要在“拉动刷新”视图中拥有自定义外观，只需添加自定义视图。

例如： // .h 文件中的实例 EGoRefreshTableHeaderView *refresh;

```
// In your .m file

// Set up your custom view with the added buttons and textfields.
UIView *customView...

// Instantiate pull to refresh third party class and add to table
EGoRefreshTableHeaderView *tempRefresh = [[EGORefreshTableHeaderView alloc] initWithFrame:CGRectMake(0.0f, 0.0f - self.tableViewCompanyContacts.bounds.size.height, self.view.frame.size.width, self.tableViewCompanyContacts.bounds.size.height)];
[tempRefresh setDelegate:self];

// Add your custom view
[tempRefresh addSubView:customView];

// Set your instance
[self setRefresh:tempRefresh];

// Release temp instance
[tempRefresh release];

// Add your third party to the table
[self.tableView addSubView:refresh];

// Implement delegate method (to refresh) 
```

通常，此视图会在刷新完成后消失或隐藏。只需在代码中添加一些调整，让用户在视图被隐藏时进行处理（例如，单击按钮）。

提供了“拉动刷新”操作的方法。告诉我，如果你发现什么麻烦事。祝你好运！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-18T05:14:40.733

在 viewDidLoad 中写下这段代码

```
tempView = [[UIView alloc] initWithFrame:CGRectMake(7,81,305,40)];  
lbl = [[UILabel alloc] initWithFrame:CGRectMake(40,125,250,20)];  
lbl.text = @"";  
lbl.font = [UIFont fontWithName:@"Haveltica" size:14];  
lbl.textAlignment = UITextAlignmentCenter;  
lbl.textColor = [UIColor whiteColor];  
lbl.backgroundColor = [UIColor clearColor];  
[tempView setBackgroundColor:[UIColor colorWithRed:204/255.0 green:204/255.0 blue:204/255.0 alpha:0]];  
[tempView addSubview:lbl];  
[self.view addSubview:tempView];  
isReload=YES;    

-(void)viewWillAppear:(BOOL)animated  
{

     [super viewWillAppear:animated]; 

    if(isReload==YES)
    {
        // your code;  
    }
    isReload=NO;

}   

-(void)scrollViewDidEndDragging:(UIScrollView *)scrollView willDecelerate:(BOOL)decelerate  
{ 

    NSLog(@"table view height is %f",self.tblview.frame.size.height);  
    NSLog(@"scrollview oringin %f",scrollView.frame.size.height);  
    NSLog(@"Top10VC: ScrollView did end dragging");  
    if (!decelerate)   
    {  
        //[self loadImagesForOnscreenRows];  
    }  
    if(scrollView.contentOffset.y<-60)  
    {  
    [self.spinner startAnimating];  
    [self performSelector:@selector(getdata1)withObject:nil afterDelay:0.2];  

    }  

}  

-(void)scrollViewDidEndDecelerating:(UIScrollView *)scrollView  
{

    NSLog(@"scrollview oringin %f",scrollView.frame.size.height);  
    NSLog(@"Top10VC: ScrollView did end decelerating");  
    //[self loadImagesForOnscreenRows];  
}  

-(void) scrollViewDidScroll:(UIScrollView *)scrollView  
{ 

    tempView.frame = CGRectMake(0,-80 - scrollView.contentOffset.y , 320,80);   
    if(scrollView.contentOffset.y < -60)  
    {         
        lbl.text = @"Updating...";  
                [scrollView setContentOffset:CGPointMake(0, -100)];
    }  
    else  
    {  
        lbl.text = @"";  
    }   
} 
```

# css - 标题和描述在顶部对齐

> ID：11076552
> 
> 赞同：0
> 
> 时间：2012-06-18T03:14:48.090
> 
> 标签：css, list, alignment

不太清楚如何描述我想要实现的目标，所以我有一些屏幕截图.. 基本上，我希望`<h2>`s 和 s 的顶部边缘都对齐`<p>`。

我目前拥有的： ![当前的](../Images/df1cfc8de331454aa2766493252c8ed5.png)

我想拥有的： ![理想的](../Images/296ea7eff5b0bb12a818c047d6e3ca5c.png)

索引.html

```
<div id="services">
    <p><span>Services</span></p>
    <ul>
    <li><h2>Identity and Logo Design</h2><p>Nulla et diam risus. Praesent vestibulum augue non purus tincidunt placerat. Sed in orci leo. Duis dignissim nibh vitae lacus placerat et posuere</p></li>
    <li><h2>Branding</h2><p>Nulla et diam risus. Praesent vestibulum augue non purus tincidunt placerat. Sed in orci leo. Duis dignissim nibh vitae lacus placerat et posuere</p></li>
    <li><h2>Web Design and Development</h2><p>Nulla et diam risus. Praesent vestibulum augue non purus tincidunt placerat. Sed in orci leo. Duis dignissim nibh vitae lacus placerat et posuere</p></li>
    <li><h2>Social Media</h2><p>Nulla et diam risus. Praesent vestibulum augue non purus tincidunt placerat. Sed in orci leo. Duis dignissim nibh vitae lacus placerat et posuere</p></li>
    </ul>
    <div class="next">
    <a href="#"><img src="img/next.png" alt="Click for more information" /></a>
    </div><!-- end next -->
</div><!-- end services --> 
```

样式.css

```
#services {
    border-top: 1px solid #202020;
    padding-bottom: 60px;
    padding-top: 40px;
}

#services p span {
    font-family: nevis-webfont;
    font-size: 112.5%;
    font-weight: normal;
    letter-spacing: 1px;
    text-transform: uppercase;
}

#services ul li {
    display: inline-block;
    padding-left: 100px;
    width: 160px;
}

#services ul li:first-child {
    padding-left: 0px;
} 

#services ul li h2 {
    padding-top: 20px;
    text-align: center;
}

#services .next {
    float: right
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T03:24:13.700

如何给出`<h2>`sa 高度，例如

```
#services ul li h2 {
    height:2.5em;
} 
```

[小提琴](http://jsfiddle.net/trc6G/)

编辑

如果您没有高度，则元素大小将取决于其内容，其中一些标题的文本比其他标题多，迫使文本换行，这将具有与一个衬里不同的高度。

您的段落垂直位置将取决于标题的高度，因此如果所有标题具有相同的高度，那么段落将具有相同的垂直位置。

# rubygems - 无法安装任何 gem 或更新任何 gem

> ID：11076555
> 
> 赞同：0
> 
> 时间：2012-06-18T03:15:16.700
> 
> 标签：rubygems, bundler

我不能再用 Ruby 做任何事情了，原因如下：

```
% gem install multi_json   
Could not find multi_json-1.3.6 in any of the sources
Run `bundle install` to install missing gems.

% bundle install
Could not find multi_json-1.3.6 in any of the sources
Run `bundle install` to install missing gems. 
```

我能做些什么？由于这两个命令导致相同的错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T11:17:06.033

如[您所见](http://rubygems.org/gems/multi_json)，该宝石存在于 ruby​​gems 上，因此请检查您的`Gemfile`是否正确。

它应该在顶部有这个源声明：

```
source 'https://rubygems.org' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T13:57:12.787

解决方案是注释掉整个 Gemfile 并安装 gem。

# jquery - Jquery将div中的文本移动到表单输入字段

> ID：11076556
> 
> 赞同：0
> 
> 时间：2012-06-18T03:15:44.173
> 
> 标签：jquery, onclick

有人可以看看这个吗

[http://jsfiddle.net/bloodygeese/EzkFR/1/](http://jsfiddle.net/bloodygeese/EzkFR/1/)

我的目标是单击“单击我”获取包含在“区域”div 中的文本以移动到下面的文本区域 - 每个空间中一个。

我已经删除了我在代码中失败的 jquery 尝试，因为我真的不知道我在做什么。

如果我能让这个工作，下一步是在“显示区域在不同的页面上时尝试实现同样的事情？？不确定这是否可能，我希望是吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T03:21:26.243

试试这个代码：

```
​$("#submit").click
    (
        function()
        {
            $("#displayarea").val($("#area").text());
            $("#displayarea2").val($("#area2").text());
            $("#area").html("");            
            $("#area2").html("");
        }
        );​​​​​​​ 
```

编辑：使用`.text`而不是`.html`因为我们不希望在 INPUT 字段内有任何标签。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T03:21:58.430

不确定是否要留下原始文本

演示：[https ://jsfiddle.net/EzkFR/6/](https://jsfiddle.net/EzkFR/6/)

```
$('#submit').click(function(){
   $('#displayarea').val(  $('#area').text() ); 
   $('#displayarea2').val(  $('#area2').text() );   
}) 
```

注意没有`input type="textarea"`。它是`input type="text"`或者`<textarea></textarea>`

如果您希望原始文本容器消失，请使用`remove()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T03:23:21.470

```
var $texts = $('textarea');
var $divs = $('div');

$('#submit').click(function() {
    $divs.each(function(index) {
        $texts.get(index).value = this.innerHTML;
        $(this).remove();
    });
});​ 
```

[**固定演示**](https://jsfiddle.net/EzkFR/8/)

**笔记：**

*   textarea，不是`<input>`你写的类型，它是一个标签：`<textarea>`
*   我缓存了元素，所以我不需要多次查询 DOM。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-18T03:33:33.193

假设你想要一种可扩展的方式来做到这一点......

```
<div id="area" class="movable">I wish I could go down there</div>
<div id="area2" class="movable">Me too please!!</div>
</br>
<input type="textarea" id="displayarea" class="inputtable" value="" />
<input type="textarea" id="displayarea2" class="inputtable" value="" />
</br>
<div id="submit">click me</div>
</br>​

$('div#submit').click(function(e) {
    $('input.inputtable').each(function() {
        var input = $(this);
        $('div.movable').each(function() {
            var self = $(this);
            if (!self.hasClass('moved') && !input.hasClass('inputted')) {
                input.val(self.text()).addClass('inputted');
                self.addClass('moved');
            }
        });
        $('div.movable.moved').detach(); //safe to remove now that we're not looping through them.
    });
    e.preventDefault();
    return false;
});​ 
```

工作小提琴：[https ://jsfiddle.net/EzkFR/10/](https://jsfiddle.net/EzkFR/10/)

# iphone - 无法识别的选择器发送到实例...再次

> ID：11076559
> 
> 赞同：1
> 
> 时间：2012-06-18T03:16:20.130
> 
> 标签：iphone, objective-c, ios, segue

我目前正在做具有图形功能的计算器应用程序。那么，我的计算器中有这个按钮，并将它连接到我的 Calculator2ViewController 上。另外，我将此按钮连接到另一个名为 GraphViewController 的 UIViewController 并将 segue 的标识符命名为`showGraph`. 下面是我的segue的代码。

```
- (GraphViewController *)graphViewController {
    return [self.splitViewController.viewControllers lastObject];
}

- (IBAction)graphPressed {

     if ([self graphViewController]) {
     [[self graphViewController] setProgram:self.brain.program];
     }

     else {
     [self performSegueWithIdentifier:@"showGraph" sender:self];
     }
}

- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {
    [segue.destinationViewController setProgram:self.brain.program];
} 
```

在那里，所以没有错误和警告。但是当我尝试运行应用程序并按下`Graph`按钮时，应用程序崩溃并在我的控制台上得到它。

```
2012-06-18 11:08:17.272 Calculator2[1135:f803] -[Calculator2ViewController graphPressed:]: unrecognized selector sent to instance 0x6c38850
2012-06-18 11:08:17.273 Calculator2[1135:f803] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[Calculator2ViewController graphPressed:]: unrecognized selector sent to instance 0x6c38850' 
```

请告诉我为什么会发生这种情况以及如何以更好的方式做到这一点。谢谢！

**编辑：** 更改`- (IBAction)graphPressed`为`- (IBAction)graphPressed:(id)sender`. 转场现在有效。但是，我的控制台上有这个通知（有点吓人）

```
2012-06-18 11:30:02.955 Calculator2[1260:f803] nested push animation can result in corrupted navigation bar
2012-06-18 11:30:03.308 Calculator2[1260:f803] Finishing up a navigation transition in an unexpected state. Navigation Bar subview tree might get corrupted.
2012-06-18 11:30:03.309 Calculator2[1260:f803] Unbalanced calls to begin/end appearance transitions for <GraphViewController: 0x6e458d0>. 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-18T03:20:51.283

`graphPressed`并且`graphPressed:`是不同的方法。一个有参数参数，另一个没有。您已将其实现为：

```
-(IBAction)graphPressed 
```

但是您可能已在标头中将函数声明为：

```
-(IBAction)graphPressed:(id)sender 
```

它（正确地）将其视为两个完全独立的功能。现在，您实际上可以在没有任何参数 ( ) 或*使用*参数 ( ) 的情况下声明*和实现*它，但重要的是它**在声明和实现中是一致的**。声明和实现必须相同。`-(IBAction)graphPressed`*`-(IBAction)graphPressed:(id)sender`*

 ***只是一个提示，最好总是将 IBActions 声明为，`-(IBAction)myButtonWasPressed:(id)sender`因为这可以让您知道按下了哪个按钮（通过`sender`参数），并且它允许您拥有多个触发相同事件的按钮，并且仍然能够分辨哪个是按下。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-18T03:20:15.997

看看错误中的选择器如何有一个冒号？看起来是一样的方法，其实不太一样……graphPressed需要用参数声明

```
- (IBAction)graphPressed:(id)sender 
```***

# jquery - 无法将焦点移至 ie 中的控件

> ID：11076561
> 
> 赞同：0
> 
> 时间：2012-06-18T03:16:55.963
> 
> 标签：jquery, internet-explorer

我在使用 ie 时遇到问题，并专注于围绕 jquery ui 设计的表单。我将输入字段变成按钮以获得按钮效果。我一加载就将页面焦点放在登录弹出窗口中的用户名字段上。这适用于chrome和firefox，但不适用于ie，我收到此错误： `can't move focus to the control`在左下角。该页面的链接在这里：[https](https://aliahealthcare.com/STNA_Applicationfull.php) ://aliahealthcare.com/STNA_Applicationfull.php 。任何帮助都会很棒，谢谢！

我尝试了设置的超时时间，但没有奏效。这是我在研究中能找到的唯一真正的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T03:26:19.627

看看你的输入。我明白：

```
<input name="username" type="text" id="username" style="font-size::30px;"/>
<input name="password" type="password" id="password" style="font-size::30px;"/> 
```

您的“字体大小”样式规则中有额外的冒号。尝试删除它们，看看它是否有所作为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T03:56:04.747

您需要验证您的页面。它们是一些标签问题，以及其他问题。任何时候 IE 在表单周围出现标签问题时，都可能导致各种奇怪的行为和提交问题

[W3C 验证页面](http://validator.w3.org/check?verbose=1&uri=https%3A%2F%2Faliahealthcare.com%2FSTNA_Applicationfull.php)

# gpu - 在 GPU 架构的背景下，“GPR”代表什么？

> ID：11076564
> 
> 赞同：2
> 
> 时间：2012-06-18T03:18:21.113
> 
> 标签：gpu

使用未公开的 API，我发现了一个可以设置分配给图形管道不同阶段的“GPR”数量的函数。
我的猜测是 GPR 的意思是“通用寄存器”，但我找不到关于它们在广泛使用的 GPU 中的使用的真正详细文档（还有它们的数量等）。

这是否意味着别的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T03:42:50.647

如果你猜对了“GPR”的含义：

对于 NVIDIA GPU，此类信息的官方来源曾经是 CUDA 编程指南的附录 A。但是，如果您不想下载 PDF 只是为了查看寄存器的数量，请转到[Wikipedia](http://en.wikipedia.org/wiki/CUDA#Version_features_and_specifications)并向下滚动到“每个多处理器的 32 位寄存器数量”行。

在 CUDA 中，寄存器是动态分配的。无需过多介绍细节，您的 CUDA 代码所需的寄存器越少，每个多处理器可能拥有的驻留线程就越多，从而提高*利用率*。

# android - 在我的 onclicklistener 之前检查没有值

> ID：11076565
> 
> 赞同：0
> 
> 时间：2012-06-18T03:18:34.323
> 
> 标签：android

在触发按钮的 onclick 之前，在 EditText 中检查任何值的最佳做法是什么。当它现在没有价值地发射时，它会出错并崩溃。我试图做一个 if(edittext != null){then my onlcick code} 并且当我在edittext中没有值后单击它时它仍然崩溃。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T03:30:21.623

`if (edittext != null) {...}`不起作用的原因是该语句将检查实际`EditText`对象的条件，而不是其内容。

如果您关注内容，只需调用`edittext.getText()`并应用您的验证逻辑即可。有一个方便的方法[`TextUtils`](http://developer.android.com/reference/android/text/TextUtils.html)可以用来检查文本是否为`null`空 ( `""`): `TextUtils.isEmpty(edittext.getText())`。您也可以将它用于纯 Java 字符串，例如

```
TextUtils.isEmpty(edittext.getText().toString().trim()) 
```

在测试之前，这将首先修剪前导和尾随空格。根据您的要求，您可以使用正则表达式轻松扩展它以去除任何空白字符等。作为一般提示：搜索“android 表单验证”，我相信您会找到更多指针。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T03:27:36.670

我用这个：

```
String content = editText.getText().toString().trim();
if (content.length() == 0) {
    // do something
} 
```

因为这也可以防止只有空格的字符串。

# android - 如何在 Android 中添加多个小部件配置活动？

> ID：11076566
> 
> 赞同：1
> 
> 时间：2012-06-18T03:18:47.643
> 
> 标签：android, configuration, android-activity, android-intent, widget

我想为我的应用程序中的每个小部件大小添加一个[配置活动](http://developer.android.com/guide/topics/appwidgets/index.html#Configuring)。我以为我可以在清单中使用配置活动的意图过滤器标记两者，然后在每个小部件提供程序中为每个人提供自己的配置活动，但它不起作用。我会发布一些我的代码。

2x1 小部件的小部件提供程序 1，我希望它调用 ConfigurationSmall 活动：

```
<?xml version="1.0" encoding="utf-8"?>
<appwidget-provider xmlns:android="http://schemas.android.com/apk/res/android"
    android:minWidth="146dp"
    android:minHeight="72dp"
    android:initialLayout="@layout/widget_2_1"
    android:updatePeriodMillis="5400000"
    android:configure="com.usethetriforce.heartcontainer.ConfigurationSmall"/> 
```

用于 4x1 小部件的小部件提供程序 1，我希望它调用 ConfigurationLarge 活动：

```
<?xml version="1.0" encoding="utf-8"?>
<appwidget-provider xmlns:android="http://schemas.android.com/apk/res/android"
    android:minWidth="292dp"
    android:minHeight="72dp"
    android:initialLayout="@layout/widget_4_1"
    android:updatePeriodMillis="5400000"
    android:configure="com.usethetriforce.heartcontainer.ConfigurationLarge" /> 
```

我的 Android 清单看起来像这样：

```
<activity
     android:name=".ConfigurationSmall"
     android:label="@string/menu_item_settings">
          <intent-filter>
               <action android:name="android.appwidget.action.APPWIDGET_CONFIGURE"/>
          </intent-filter>
</activity>
<activity
     android:name=".ConfigurationLarge"
     android:label="@string/menu_item_settings">
          <intent-filter>
              <action android:name="android.appwidget.action.APPWIDGET_CONFIGURE"/>
          </intent-filter>
      </activity> 
```

任何帮助将不胜感激。

# r - 在 grid.arrange 中绘制图例和间距良好的通用 y 轴和主要标题

> ID：11076567
> 
> 赞同：16
> 
> 时间：2012-06-18T03:19:02.147
> 
> 标签：r, ggplot2

我有以下代码，它将生成两个包含绘图到当前工作目录的 pdf 文件：

```
library(reshape)
library(ggplot2)
require(ggplot2)
source("http://gridextra.googlecode.com/svn/trunk/R/arrange.r")

data<-structure(list(Loci = structure(c(1L, 2L, 3L, 4L, 5L, 6L, 7L, 
8L, 9L, 10L, 11L, 12L, 13L, 14L, 15L, 16L, 17L, 18L, 19L, 20L, 
21L, 22L, 23L, 24L, 25L, 26L, 27L, 28L, 29L, 30L, 31L, 32L, 33L, 
34L, 35L, 36L, 37L, 38L, 39L, 40L, 41L, 42L, 43L, 52L, 44L, 45L, 
46L, 47L, 48L, 49L, 50L, 51L, 53L, 54L, 55L, 56L, 57L, 58L, 59L, 
60L, 61L, 62L), .Label = c("Baez", "Blue", "C147", "C204", "C21", 
"C278_PT", "C294", "C316", "C485", "C487_PigTa", "C536", "Carey", 
"Cool", "Coyote", "Deadpool", "Epstein", "Glass", "Harrison", 
"Harvest", "Hazel", "i-113", "i-114", "i-120_PigT", "i-126", 
"i-127", "Imagine", "Jackstraw_", "Jericho", "Jerry-Garc", "Jude", 
"Kitty", "Majesty", "Million", "Monkey", "Mozambique", "Neil", 
"Nettie", "Piggies", "Psylocke", "Queen", "Ramble", "Sinv-25", 
"Sinv12", "Sol-11", "Sol-18", "Sol-20", "Sol-49", "Sol-6", "Sol-J1", 
"Sol-M2", "Sol-M3", "SolB8", "st_stephen", "Starr", "Sun_King", 
"Taxman", "Tombstone_", "Wallflower", "Weight", "Wigwam", "Workingman", 
"Yellow"), class = "factor"), All = c(0.3357, 0.4166, 0.0242, 
0.9708, 0.4518, 0.0666, 0, 0.5925, 0.2349, 0.3242, 0.3278, 0.0246, 
0.0352, 0.0646, 0.0563, 0.6854, 0.4664, 0.8298, 0.8831, NA, 0.0078, 
0.771, 0.1376, 0.0055, 2e-04, 1, 0.2577, 0.3326, 0.0066, 0.0024, 
0.6136, 0.4155, 0.9931, 0.2111, 0.6373, 0.0762, 0.5153, 0.1103, 
0.0569, 0, 1, 0.732, 0, 0, 0.9225, 0.1257, 0.1658, 0.9603, 0.4629, 
0, 0.4155, 0.0791, 0.0777, 0.3996, 0.1212, 0.6207, 0.5766, 0, 
0.1347, 0.3754, 0, 0.2737), X1_only = c(0.4758, 0.3188, 0.1465, 
0.3209, 1, 0.0278, 0.2065, 0.6187, 0.9377, 0.8586, 0.7292, 0.0133, 
1, 1, 1, 0.961, 0.427, 1, 0.2203, NA, 0.8919, 0.2695, 0.3724, 
0.5798, 0.5304, 1, 0.568, 0.2291, 0.4376, 1, 0.1572, 0.2022, 
0.9544, 0.2462, 0.9699, 0.4439, 0.2204, 0.1135, 0.3063, 0.0311, 
0.0384, 0.2833, 1, 0.7024, 0.7382, 0.4923, 0.4453, 0.2341, 0.7493, 
0.0868, 0.8801, 0.8708, 1, 1, 1, 0.0491, 0.291, 0.2037, 0.1342, 
0.5321, 0.4787, 0.7801), X78_only = c(0.3379, 0.4102, 0.2134, 
0.6807, 0.8242, 1, 0.0046, 0.279, 0.825, 0.7563, 0.6055, 0.7472, 
1, 0.4958, 0.0018, 0.0175, 1, 1, 0.5647, NA, 0.2124, 0.519, 0.5204, 
0.2272, 0.03, 1, 0.0319, NA, 0.4467, 0.4473, 0.1593, 0.6066, 
0.5907, 0.0624, 0.5699, 0.6585, 0.1414, 0.546, 0.6395, 0.0102, 
0.3112, 0.791, 0, 0.7753, 0.4155, 0.9279, 0.4834, 0.3059, 0.5967, 
0.373, 0.4114, 0.9291, 0.1159, 0.7238, 0.5993, 0.7975, 0.3283, 
0.0511, 0.4902, 0.0438, 2e-04, 0.2357), X8_removed = c(0.0967, 
0.5831, 0.058, 0.9268, 0.3518, 0.0629, 0, 0.6229, 0.2217, 0.2602, 
0.7123, 0.0181, 0.0348, 0.1482, 0.1706, 0.6748, 0.3238, 0.8134, 
0.8032, NA, 0.0246, 0.5794, 0.5204, 0.0254, 0.0056, 1, 0.6597, 
0.3373, 0.004, 0.0087, 0.9061, 0.577, 0.9565, 0.4168, 0.7951, 
0.1069, 0.4071, 0.1457, 0.1453, 0, 0.8385, 0.4658, 0, 0, 0.7396, 
0.0748, 0.3677, 0.9571, 0.1188, 0, 0.5673, 0.0396, 0.0708, 0.3645, 
0.1147, 0.5851, 1, 0.001, 0.0614, 0.131, 0, 0.4813), X8_only = c(0.1169, 
0.8327, 0.2169, 0.0907, 1, 1, 0.07, 0.486, 0.709, 0.8882, 0.4389, 
1, 0.7078, 0.4496, 0.1266, 0.1945, 0.4527, 1, 0.6518, NA, 0.3594, 
0.7715, 0.134, 0.2389, 0.0203, 1, 0.1061, NA, 0.1293, 0.2558, 
0.167, 0.4815, 0.7756, 0.0403, 0.2448, 0.2265, 0.0952, 0.6658, 
0.3405, 0.0402, 0.5906, 0.2405, 0.0086, 0.5086, 0.4709, 1, 0.0567, 
0.4146, 0.7554, 0.104, 0.1917, 0.8625, 1, 1, 1, 0.8727, 0.1439, 
0.0452, 1, 0.5804, 0, 0.2764), X7_removed = c(0.2989, 0.7268, 
0.0087, 0.8874, 0.5853, 0.0568, 0, 0.7622, 0.4226, 0.3232, 0.3972, 
0.02, 0.0159, 0.0541, 0.4919, 0.5951, 0.5525, 0.8114, 0.5738, 
NA, 0.0062, 0.7274, 0.0155, 0.0233, 0.002, 1, 0.232, 0.3476, 
0.011, 9e-04, 0.5433, 0.3725, 0.7263, 0.2462, 0.4556, 0.0426, 
0.7468, 0.1235, 0.0051, 0, 1, 0.8962, 0.0014, 0, 0.9892, 0.1163, 
0.1284, 0.6873, 0.3932, 0, 0.3722, 0.0889, 0.3782, 0.4761, 0.0484, 
0.5321, 0.5519, 0, 0.3453, 0.0732, 0, 0.3483), X7_only = c(1, 
0.5714, 0.2825, 0.8673, 0.5557, 0.6861, 0.0044, 0.1146, 0.4957, 
0.5248, 0.8372, 0.6665, 0.6789, 1, 0.0082, 0.1759, 0.3719, 1, 
0.704, NA, 0.2585, 0.4634, 0.4283, 0.6815, 0.4161, 1, 0.1691, 
NA, 0.4563, 1, 0.226, 1, 0.2349, 0.5886, 0.8154, 0.8839, 0.1631, 
1, 0.5112, 0.1529, 1, 0.7245, 4e-04, 0.3095, 0.6184, 0.5542, 
0.749, 0.394, 0.0298, 0.1994, 0.2881, 0.7696, 0.0637, 0.652, 
1, 0.1494, 1, 0.3283, 0.134, 0.1992, 0.0848, 0.5826), X5_removed = c(1, 
0.1453, 0.0176, 0.8428, 0.2277, 0.2563, 0, 0.5326, 0.1549, 0.4405, 
0.395, 0.0195, 0.08, 0.1069, 0.0316, 0.6298, 0.5157, 1, 0.5967, 
NA, 0.0265, 0.5703, 0.2667, 0.3485, 0.0021, 1, 0.1821, 0.3006, 
0.007, 0.0112, 0.1964, 0.4427, 0.769, 0.1214, 0.6064, 0.0914, 
0.4188, 0.021, 0.0814, 0, 0.8372, 0.8052, 0, 0, 0.8662, 0.7917, 
0.0924, 0.9316, 0.7399, 0, 0.2031, 0.0701, 0.0652, 0.6636, 0.0513, 
0.2049, 0.7161, 0, 0.0407, 0.1729, 0, 0.3079), X5_only = c(0.0642, 
0.631, 0.5193, 0.979, 0.5348, 0.1304, 0.02, 0.0217, 0.0871, 0.2022, 
0.7602, 1, 0.3532, 0.5292, 1, 0.3677, 0.0896, 0.3702, 0.6084, 
NA, 0.1518, 0.3467, 0.1171, 0.0252, 0.7894, 1, 0.9842, 0.7315, 
0.8511, 0.0717, 0.0585, 0.7955, 0.3517, 1, 0.8263, 0.6102, 0.268, 
0.1071, 0.3837, 0.0175, 0.5887, 1, NA, 0.1198, 0.8537, 0.0101, 
0.3807, 0.4939, 0.1469, 0.1368, 0.5458, 0.2514, 1, 0.3692, 1, 
0.4877, 0.5787, 0.6025, 0.5888, 1, 0.3472, 1), X4_removed = c(0.4492, 
0.3821, 0.0121, 0.9957, 0.5158, 0.0498, 0, 0.718, 0.8003, 0.1716, 
0.661, 0.0194, 0.0511, 0.1862, 0.0188, 0.6454, 0.5077, 1, 0.8794, 
NA, 0.3458, 0.6059, 0.1315, 0.0099, 0.003, 1, 0.0585, 0.4635, 
0.0357, 0.0289, 0.6835, 0.2247, 0.8437, 0.3585, 0.6074, 0.1926, 
0.3432, 0.3615, 0.0322, 0, 0.8418, 0.7076, 0, 0.9281, 0.7697, 
0.1011, 0.3068, 0.971, 0.4686, 0, 0.3731, 0.1024, 0.0683, 0.8112, 
0.3742, 0.7381, 0.2738, 0.0089, 0.2366, 0.6924, 0, 0.1984), X4_only = c(0.6485, 
0.0709, 0.1639, 0.6908, 1, 1, 0.4469, 0.639, 0.0378, 0.5116, 
0.0026, 0.6549, 0.6928, 0.2884, 1, 0.4386, 0.6246, 0.6188, 1, 
NA, 0.0966, 0.3946, 0.7223, 0.1357, 0.8912, 1, 0.4741, 0.7526, 
0.2005, 0.013, 1, 0.455, 0.1086, 0.1184, 0.8975, 0.3181, 0.9958, 
0.0644, 0.0975, 0.0721, 1, 1, 1, 7e-04, 0.2754, 0.4852, 0.065, 
0.747, 0.4823, 0.1971, 0.6178, 0.3781, 1, 0.362, 0.1168, 0.382, 
0.4267, 8e-04, 0.188, 0.2115, 0.2937, 1), X3_removed = c(0.3009, 
0.3414, 0.02, 0.9935, 0.4216, 0.1273, 0, 0.6406, 0.2728, 0.5307, 
0.477, 0.0612, 0.0627, 0.0808, 0.1636, 0.6506, 0.6507, 0.8122, 
0.9531, NA, 0.0144, 0.9274, 0.1646, 0.0171, 1e-04, 1, 0.2732, 
0.4153, 0.0141, 0.0105, 0.6892, 0.3701, 0.9956, 0.0418, 0.5436, 
0.2755, 0.4803, 0.0959, 0.1199, 0, 0.833, 0.5373, 0, 0, 0.9701, 
0.1054, 0.1558, 0.9964, 0.6849, 0, 0.2023, 0.1072, 0.3401, 0.3629, 
0.2504, 0.6056, 0.5372, 2e-04, 0.1168, 1, 0, 0.242), X3_only = c(1, 
0.9325, 0.772, 0.5505, 1, 0.2068, 0.0829, 0.17, 0.8951, 0.0225, 
0.8263, 0.2111, 0.5087, 0.768, 0.2471, 0.6294, 0.2815, 1, 0.0496, 
NA, 0.3364, 0.6286, 0.2102, 0.6816, 0.372, 1, 0.7311, 0.5138, 
0.0683, 0.1996, 0.6998, 1, 0.6988, 0.4426, 0.6669, 0.0412, 0.6081, 
1, 0.237, 6e-04, 0.6349, 0.7124, 1, 0.2314, 0.0398, 1, 0.3487, 
0.8153, 0.1271, 0.1145, 0.8641, 0.4056, 0.1488, 1, 0.2357, 0.26, 
1, 0.2678, 0.5537, 0.0317, 0.0467, 1), X2_removed = c(0.6335, 
0.349, 0.2095, 0.9777, 0.8928, 0.0571, 0, 0.4285, 0.2036, 0.3168, 
0.3668, 0.0854, 0.413, 0.0608, 0.0526, 0.7608, 0.3094, 0.8186, 
0.9273, NA, 0.0014, 0.6512, 0.4424, 0.0275, 0.2121, 1, 0.3008, 
0.2381, 0.0173, 0.0075, 0.7423, 0.6126, 0.979, 0.1716, 0.862, 
0.0245, 0.5096, 0.2795, 0.4794, 0, 1, 0.6888, 0, 0, 0.6213, 0.0935, 
0.1351, 0.6946, 0.4708, 0.1458, 0.899, 0.4391, 0.0727, 0.5004, 
0.3974, 0.8854, 0.2696, 0, 0.1846, 0.5871, 0, 0.2966), X2_only = c(0.191, 
0.4397, 0.0403, 0.3606, 0.0089, 1, 0.0033, 0.659, 0.1818, 0.0949, 
0.5521, 0.1637, 0.0014, 1, NA, 0.8585, 1, 1, 0.9437, NA, 0.4086, 
0.1699, 0.0648, 0.9087, 0.0011, 1, 0.1291, 0.5329, 0.2315, 0.2844, 
0.6429, 0.0488, 0.1814, 0.8658, 0.0869, 0.8394, 0.5938, 0.1722, 
0, 0.0098, 1, 1, 1, 0.1742, 0.3911, 0.8523, 0.7331, 0.1271, 0.5119, 
0, 0.0105, 0.0035, 1, 0.5665, 0.072, 0.2928, 0.4224, 0.5491, 
0.4274, 0.1054, 0, 0.5817), X1_removed = c(0.1653, 0.7658, 0.0718, 
0.7705, 0.4193, 0.1894, 0, 0.5167, 0.1053, 0.2823, 0.0496, 0.1439, 
0.0258, 0.0676, 0.031, 0.5465, 0.4909, 0.6464, 0.9383, NA, 0.0124, 
0.9288, 0.069, 0.0116, 6e-04, 1, 0.3301, 0.508, 0.0175, 8e-04, 
0.6016, 0.7442, 0.9609, 0.4151, 0.6049, 0.1266, 0.4281, 0.2719, 
0.0039, 0, 0.315, 1, 0, 0, 0.8931, 0.1124, 0.3804, 0.9233, 0.3355, 
0, 0.3542, 0.0363, 0.0679, 0.2652, 0.122, 0.4025, 0.8155, 2e-04, 
0.2642, 0.3629, 0, 0.2897)), .Names = c("Loci", "All", "X1_only", 
"X78_only", "X8_removed", "X8_only", "X7_removed", "X7_only", 
"X5_removed", "X5_only", "X4_removed", "X4_only", "X3_removed", 
"X3_only", "X2_removed", "X2_only", "X1_removed"), class = "data.frame", row.names = c(NA, 
-62L))

#now make subsets of this big dataset 
split1_data<-droplevels(subset(data,data$Loci %in% data$Loci[1:8]))
split2_data<-droplevels(subset(data,data$Loci %in% data$Loci[9:16]))
split3_data<-droplevels(subset(data,data$Loci %in% data$Loci[17:24]))
split4_data<-droplevels(subset(data,data$Loci %in% data$Loci[25:32]))
split5_data<-droplevels(subset(data,data$Loci %in% data$Loci[33:40]))
split6_data<-droplevels(subset(data,data$Loci %in% data$Loci[41:48]))
split7_data<-droplevels(subset(data,data$Loci %in% data$Loci[49:56]))
split8_data<-droplevels(subset(data,data$Loci %in% data$Loci[57:62]))

#and melt each of them
split1_datam<-melt(split1_data,id="Loci")
split2_datam<-melt(split2_data,id="Loci")
split3_datam<-melt(split3_data,id="Loci")
split4_datam<-melt(split4_data,id="Loci")
split5_datam<-melt(split5_data,id="Loci")
split6_datam<-melt(split6_data,id="Loci")
split7_datam<-melt(split7_data,id="Loci")
split8_datam<-melt(split8_data,id="Loci")

#and make a plot for each of the melted subsets
p1<- ggplot(split1_datam, aes(x =Loci, y = value, color = variable, width=.15))+ geom_bar(position="dodge")+ geom_hline(yintercept=0.05)+ opts(legend.position="none",axis.text.x  = theme_text(angle=90, size=8)) + scale_y_discrete(breaks=seq(0,1)) + ylab(NULL)

p2<- ggplot(split2_datam, aes(x =Loci, y = value, color = variable, width=.15)) + geom_bar(position="dodge") + geom_hline(yintercept=0.05)+ opts(legend.position = "none", axis.text.x  = theme_text(angle=90, size=8)) + scale_y_discrete(breaks=seq(0,1))+ scale_fill_grey() + ylab(NULL)

p3<-p <- ggplot(split3_datam, aes(x =Loci, y = value, color = variable, width=.15))
p3<-p3 + geom_bar(position="dodge") + geom_hline(yintercept=0.05)+ opts(legend.position = "none", axis.text.x  = theme_text(angle=90, size=8)) + scale_y_discrete(breaks=seq(0,1)) + ylab(NULL)

p4<-p <- ggplot(split4_datam, aes(x =Loci, y = value, color = variable, width=.15))
p4<-p4 + geom_bar(position="dodge") + geom_hline(yintercept=0.05)+ scale_y_discrete(breaks=seq(0,1))+opts(legend.position="none", axis.text.x  = theme_text(angle=90, size=8)) + ylab(NULL)

p5<-p <- ggplot(split5_datam, aes(x =Loci, y = value, color = variable, width=.15))
p5<-p5 + geom_bar(position="dodge") + geom_hline(yintercept=0.05)+ opts(legend.position = "none", axis.text.x  = theme_text(angle=90, size=8))+ scale_y_discrete(breaks=seq(0,1)) + ylab(NULL)

p6<-p <- ggplot(split6_datam, aes(x =Loci, y = value, color = variable, width=.15))
p6<-p6 + geom_bar(position="dodge") + geom_hline(yintercept=0.05) + scale_y_discrete(breaks=seq(0,1))+ opts(legend.position = "none", axis.text.x  = theme_text(angle=90, size=8)) + ylab(NULL)

p7<-p <- ggplot(split7_datam, aes(x =Loci, y = value, color = variable, width=.15))
p7<-p7 + geom_bar(position="dodge") + geom_hline(yintercept=0.05) + scale_y_discrete(breaks=seq(0,1))+ opts(legend.position = "none", axis.text.x  = theme_text(angle=90, size=8)) + ylab(NULL)

p8<-p <- ggplot(split8_datam, aes(x =Loci, y = value, color = variable, width=.15))
p8<-p8 + geom_bar(position="dodge") + geom_hline(yintercept=0.05) + scale_y_discrete(breaks=seq(0,1))+opts(legend.position="none",axis.text.x  = theme_text(angle=90, size=8)) + ylab(NULL)

#make a bad attempt at creating a legend for the entire multiplot?
leg <- ggplotGrob(p1 + opts(keep="legend_box"))
 ## one needs to provide the legend with a well-defined width
legend=gTree(children=gList(leg), cl="legendGrob")
widthDetails.legendGrob <- function(x) unit(2, "cm")

 #plot the first four plots together
pdf("sensivitity_page_2_plots.pdf") 
grid.arrange(p1, p2, p3, p4, nrow=2, legend=legend, main ="Sensitivity", left = "Pvalue")
dev.off()

#same with the next four
pdf("sensivitity_page_2_plots.pdf")

leg <- ggplotGrob(p5 + opts(keep="legend_box"))
 ## one needs to provide the legend with a well-defined width
legend=gTree(children=gList(leg), cl="legendGrob")
widthDetails.legendGrob <- function(x) unit(2, "cm")

grid.arrange(p5, p6, p7, p8, nrow=2, legend=legend, main ="Sensitivity", left = "Pvalue")
dev.off() 
```

绘图将如下所示： ![在此处输入图像描述](../Images/b7f1b4a9c74f7a73343161677afd90c3.png)

我有以下问题：

1.  如何将 y 轴标签隔开，使其不那么靠近边缘？
2.  我怎样才能对主标题做同样的事情
3.  为什么传说没有出现？（这部分代码是从 grid.arrange 文档中提取的）。而且，当它发生时，我如何正确地间隔？还有其他人使用grid.arrange吗？
4.  如果没有，是否有另一种方法可以在 ggplot 中应用类似 layout() 的定位？

非常感谢大家！

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-06-19T00:58:41.587

据我所知，您的 p1 没有图例 - 因此没有要提取的图例，因此在调用`grid.arrange`.

这是一个更简单的例子。它应该让你开始。

**编辑：** ggplot2 版本 0.9.3.1 的代码更新

```
# Load the required packages
library(ggplot2)
library(gtable)
library(grid)
library(gridExtra)

# Generate some data
df <- data.frame(x = factor(rep(1:5, 2)), Groups = factor(rep(c("Group 1", "Group 2"), 5)))

# Get four plots
p1 <- ggplot(data = df, aes(x=x, y = sample(1:10, 10), fill = Groups)) +
    geom_bar(position = "dodge", stat = "identity") + theme(axis.title.y = element_blank())
p2 <- ggplot(data = df, aes(x=x, y = sample(1:10, 10), fill = Groups)) +
    geom_bar(position = "dodge", stat = "identity") + theme(axis.title.y = element_blank())
p3 <- ggplot(data = df, aes(x=x, y = sample(1:10, 10), fill = Groups)) +
    geom_bar(position = "dodge", stat = "identity") + theme(axis.title.y = element_blank())
p4 <- ggplot(data = df, aes(x=x, y = sample(1:10, 10), fill = Groups)) +
    geom_bar(position = "dodge", stat = "identity") + theme(axis.title.y = element_blank())

# Extracxt the legend from p1
legend = gtable_filter(ggplotGrob(p1), "guide-box") 
# grid.draw(legend)    # Make sure the legend has been extracted

# Arrange the elements to be plotted. 
# The inner arrangeGrob() function arranges the four plots, the main title, 
#   and the global y-axis title.
# The outer grid.arrange() function arranges and draws the arrangeGrob object and the legend.
grid.arrange(arrangeGrob(p1 + theme(legend.position="none"), 
                         p2 + theme(legend.position="none"),
                         p3 + theme(legend.position="none"),
                         p4 + theme(legend.position="none"), 
                         nrow = 2,
                         top = textGrob("Main Title", vjust = 1, gp = gpar(fontface = "bold", cex = 1.5)),
                         left = textGrob("Global Y-axis Label", rot = 90, vjust = 1)), 
    legend, 
    widths=unit.c(unit(1, "npc") - legend$width, legend$width), 
    nrow=1) 
```

请注意如何`widths`使用图例的宽度。结果是：

![在此处输入图像描述](../Images/69933ebb85f25ba52392be12472a8c15.png)

主标题和全局 y 轴标题使用`vjust`. 例如，如果您希望全局 y 轴标题占用更多空间，则将其创建为 textGrob，并用于`widths`设置其宽度。在这里，内部的arrangeGrob 排列了四个情节和主标题。外部 grid.arrange 排列和绘制全局 y 轴标题、arrangeGrob 对象和图例。全局 y 轴标题的宽度设置为三行。

```
label = textGrob("Global Y-axis Label", rot = 90, vjust = 0.5)
grid.arrange(label,
             arrangeGrob(p1 + theme(legend.position="none"), 
                         p2 + theme(legend.position="none"),
                         p3 + theme(legend.position="none"),
                         p4 + theme(legend.position="none"), 
                         nrow = 2,
                         top = textGrob("Main Title", vjust = 1, gp = gpar(fontface = "bold", cex = 1.5))), 
             legend, 
             widths=unit.c(unit(3, "lines"), unit(1, "npc") - unit(3, "lines") - legend$width, legend$width), 
             nrow=1) 
```

**编辑**

使用您的数据以及用于子集和重塑数据的代码，我绘制了前四个图，从第一个图中提取了图例，然后排列了图、图例和标签。代码运行没有问题。

绘图存在一些问题（而且，您的代码无法生成帖子中显示的绘图）。我做了一些小的改动。

```
# Load the libraries
library(ggplot2)
library(gridExtra)
library(reshape2)

###
# Your code from your post for getting the data, subsetting, and reshaping the data.
###

#and make a plot for each of the melted subsets
p1 <- ggplot(split1_datam, aes(x = Loci, y = value, fill = variable)) + 
   geom_bar(position = "dodge", stat = "identity")+ geom_hline(yintercept = 0.05) + 
   theme(axis.text.x  = element_text(angle = 90, size = 8)) + 
   ylab(NULL)

p2 <- ggplot(split2_datam, aes(x = Loci, y = value, fill = variable)) + 
   geom_bar(position = "dodge", stat = "identity")+ geom_hline(yintercept = 0.05) + 
   theme(axis.text.x  = element_text(angle = 90, size = 8)) + 
   ylab(NULL)

p3 <- ggplot(split3_datam, aes(x = Loci, y = value, fill = variable)) + 
   geom_bar(position = "dodge", stat = "identity")+ geom_hline(yintercept = 0.05) + 
   theme(axis.text.x  = element_text(angle = 90, size = 8)) + 
   ylab(NULL)

p4 <- ggplot(split4_datam, aes(x = Loci, y = value, fill = variable)) + 
   geom_bar(position = "dodge", stat = "identity")+ geom_hline(yintercept = 0.05) + 
   theme(axis.text.x  = element_text(angle = 90, size = 8)) + 
   ylab(NULL)

# Extracxt the legend from p1
legend = gtable_filter(ggplotGrob(p1), "guide-box") 
# grid.draw(legend)    # Make sure the legend has been extracted

# Arrange and draw the plot as before
label = textGrob("p value", rot = 90, vjust = 0.5)
grid.arrange(label,
             arrangeGrob(p1 + theme(legend.position="none"), 
                         p2 + theme(legend.position="none"),
                         p3 + theme(legend.position="none"),
                         p4 + theme(legend.position="none"), 
                         nrow = 2,
                         top = textGrob("Sensitivity", vjust = 1, gp = gpar(fontface = "bold", cex = 1.5))), 
             legend, 
             widths=unit.c(unit(2, "lines"), unit(1, "npc") - unit(2, "lines") - legend$width, legend$width), nrow=1) 
```

![在此处输入图像描述](../Images/58c87816d9266a1140d226740b9bfe68.png)

# mysql - TOP 和 ORDER BY sql 错误

> ID：11076568
> 
> 赞同：28
> 
> 时间：2012-06-18T03:19:15.373
> 
> 标签：mysql, sql

我正在尝试使用 PHP 从 MySQL 中的表中选择最后一条记录。我相信我有一个 SQL 错误。这是我的 SQL 代码：

```
SELECT TOP 1 id FROM `table` ORDER BY id DESC 
```

如果这是有效的并且我实际上有一个 PHP 错误，请告诉我。

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2012-06-18T03:24:51.220

您的 sql 语法无效。改用**[LIMIT](http://php.about.com/od/mysqlcommands/g/Limit_sql.htm)** _

尝试这个：

```
SELECT id 
FROM table 
ORDER BY id DESC
LIMIT 1 
```

该`TOP`子句适用于 MSSQL 服务器。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-06-18T03:34:48.220

一种更简单且与 DBMS 无关的方法是：

```
SELECT MAX(id) AS id
FROM table 
```

仅当您*只*需要该`id`字段时，否则如果您尝试 SELECT 其他列，它不会将匹配的数据返回到该`id`字段，您将不得不使用：

```
SELECT id, otherfields, ..., ...
FROM table
WHERE id = (SELECT MAX(id) FROM table) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-17T20:56:20.737

*如果您不希望使用限制，这将有效查找最后一条记录*

```
SELECT TOP 1 * FROM Products ORDER BY id desc 
```

*如果您不希望使用限制，这将有效查找指定列名的最后一条记录*

```
SELECT TOP 1 id FROM Products ORDER BY id desc 
```

*别的*

```
SELECT * FROM Products ORDER BY id DESC LIMIT 1 
```

# c++ - 使用其他库分发应用程序的“正确方法”

> ID：11076571
> 
> 赞同：1
> 
> 时间：2012-06-18T03:19:39.163
> 
> 标签：c++, boost, shared-libraries

我写了一个应用程序，它使用`Boost`. 编译和链接的二进制可执行程序很小，但我想分发源代码（它是 FOSS）。

因为它`Boost`本身非常大，我不能用它来分发我的应用程序。我希望用户自己下载/构建`Boost`。问题是：

1.  我怎么知道是否`Boost`已经安装在用户的机器上以及它在哪里？
2.  如果用户想指出他安装的路径`Boost`，我应该把参数放在哪里？

当然，`Boost`上面可以用任何其他库替换。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T03:22:34.730

要仅分发相关的 Boost 库，您可以使用[BCP](http://www.boost.org/doc/libs/1_49_0/tools/bcp/doc/html/index.html)。它将为您提取所需的文件，然后您可以将它们包含在您的项目中。

# jsdoc - 求：如何在 Webstorm IDE (v 4) 中使用 jsDoc 的示例

> ID：11076572
> 
> 赞同：2
> 
> 时间：2012-06-18T03:19:47.307
> 
> 标签：jsdoc, webstorm

我仍在学习 js 并尝试 Webstorm IDE，这看起来很不错（包括跳转到 var/function 声明）。

我可以看到如何获取 jsdoc 评论的模板，但我没有使用它的经验，并且正在寻找如何在评论中提供更多详细信息以及如何**查看**该详细信息的示例。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T16:07:18.760

WebStorm 4.0 支持大部分[JSDoc](http://code.google.com/p/jsdoc-toolkit/wiki/TagReference)标签。例如，当您为变量指定 @type 时，补全效果会更好，并且错误类型的表达式分配将突出显示为警告。当在某些参考上按下 Ctrl+Q 时，会出现元素文档弹出窗口。有关受支持标签的更多具体信息，请参见 JetBrains 问题跟踪器，例如问题[WI-1295](http://youtrack.jetbrains.com/issue/WI-1295)。

此外，预计第 5 版将更好地支持 google 闭包编译器标签。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-03T08:22:57.900

本教程可能会有所帮助：

[http://blue-walrus.com/2014/04/using-jsdoc/](http://blue-walrus.com/2014/04/using-jsdoc/)

它介绍了如何在 webstorm/phpstorm 中使用 jsdoc 增强代码。进入@Type、@param、@return 以及其他。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-01T03:57:07.043

我感到你的痛苦......我最近也开始评估 WebStorm，发现关于如何将 JSDoc 集成到你的代码中的文档数量有点缺乏。

以下页面提供了有关可用标签的大量详细信息，以及每个标签的详细说明。

[http://code.google.com/p/jsdoc-toolkit/wiki/TagReference](http://code.google.com/p/jsdoc-toolkit/wiki/TagReference)

希望有帮助！

# dom - Selenium 是否支持从动态生成的网页中获取“XPath/Dom”和更多信息？

> ID：11076580
> 
> 赞同：0
> 
> 时间：2012-06-18T03:21:17.037
> 
> 标签：dom, xpath, selenium

我已经搜索了几个问题，但我没有弄清楚我的问题：

我想测试/验证 2 个系统的配置页面。但我面临三个挑战：

1.两个系统的页面看起来完全一样，但实际上相同项目（文本、下拉列表、单选按钮等）的dom/xPath信息完全不同。例如页面上2个系统的“Device Name”字段有2个不同的xPath，比如sys1的xPath是“//input/abc”，sys2的xPath是“//input/xyz”。

2.有时页面是动态生成的，所以一个系统的同一个项目的dom/xPath在不同的时间可能会不同。

3.基于1和2，我很难写一个脚本在所有系统上运行（我们将来会有更多的系统）。我不想为不同的系统定义不同的 xpath/dom 数据库。

我的问题是：

1\. selenium 可以在页面上返回多少个“文本字段”“下拉列表”“单选按钮”对象？

2.selenium能否返回Question1中每个对象的xPath/dom？

我希望 selenium 可以返回所有对象和每个对象的 xPath/dom 信息，以便我可以进行映射并调用不同的系统（我可以通过比较“相同”对象的索引/位置来决定当前使用哪个 xPath）。

感谢所有评论/帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T08:43:17.433

您可以将 Linq 用于这样的事情。例如，可以通过以下方式获取所有输入元素：

```
IWebDriver driver = new FirefoxDriver();
var inputElements = driver.FindElements(By.TagName("input")); // get all input elements
inputElements.Count(); // get how many input elements there are 
```

或者：

```
IWebDriver driver = new FirefoxDriver();
var inputElements = driver.FindElements(By.XPath("//input")); // get all input elements
inputElements.Count(); // get how many input elements there are 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T05:10:24.087

我不知道 c#，但对于 Java，有一个 driver.findElements(By.xpath/css(xpath/css value)))。这将返回页面中元素的数量。如果它是你必须找到的文本框，你可以使用类似的东西

```
driver.findElements(By.xpath(//input[@type='textbox']).size(); 
```

这将返回页面中文本框的数量。

对于问题 2 - 检查这个。SO中有一个类似的问题。

[如何使用 Javascript 计算元素的 XPath 位置？](https://stackoverflow.com/questions/3454526/how-to-calculate-the-xpath-position-of-an-element-using-javascript)

# zend-framework - Zend 确定它是否是视图助手中的首页（或默认页面）

> ID：11076585
> 
> 赞同：0
> 
> 时间：2012-06-18T03:22:03.917
> 
> 标签：zend-framework

我正在编写一个自动加载资产的视图助手。我希望它为所有非子页面的页面自动加载 sub.css。我该怎么办？

这是我到目前为止所得到的：

```
class Zend_View_Helper_CssHelper extends Zend_View_Helper_Abstract {
  /**
   * protected $this->isFront()
   * 
   */
  public function isFront($request='') {
    // Create $request from Zend Controller
    if (!isset($request))
      $request = Zend_Controller_Front::getInstance()->getRequest();
    // If request not set
    if (!empty($request)) {
      // Hard code front page condition
      // @TODO provide more sophisticated way to determine front page
      if ($request->module == 'default' && $request->controller == 'page' && $request->action == 'index') return true;
      else return false;
    }
  }

  public function cssHelper($return=false) {
    // Set folder prefix
    $prefix = '/myprefixpath/assets/css/';
    $file_prefix = '/public/assets/css/';

    $request = Zend_Controller_Front::getInstance()->getRequest();
    // Css autoloading pattern {controller} / {action}
    // create $part_uri workaround because of the shitty routing path
    $part_uri = ASSETS_URL . '/css/' . $request->getControllerName() . '/' . $request->getActionName() . '.css';
    $file_uri = ROOT_DIR . $file_prefix . $request->getControllerName() . '/' . $request->getActionName() . '.css';

    //$file_uri = APPLICATION_PATH . $request->getControllerName() . '/' . $request->getActionName() . '.css';

    //Zend_Debug::Dump($file_uri);
    //Zend_Debug::Dump(file_exists($file_uri));

    if ($return == true) {
      return $part_uri;
    }
    /**
     * Autoload my sub.css file if it's the front page 
     */
    var_dump($this->isFront());
    if ($this->isFront() == false) {
      //var_dump(ASSETS_URL . '/sub.css');
      //$this->view->headLink()->appendStylesheet(ASSETS_URL . '/css/page/sub.css');
    }

    // Find out if the file exists
    if (file_exists($file_uri)) {
       // Workaround due to my local alias 
       // @TODO need to test on dev server
       // $this->view->headStyle()->appendStyle(file_get_contents($file_uri));
       $this->view->headLink()->appendStylesheet($part_uri);
    // If there isn't load the error.css file
    } else {
      if (file_exists(ASSETS_URL . 'error.css')) 
        $this->view->headScript()->appendFile('/' . 'error.css');
    }
    return $this->view->headLink();
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T12:12:47.487

`Zend_Controller_Front`有方法, `getDefaultModule()`, `getDefaultControllerName()`, `getDefaultAction()`, 来分别检查默认模块、控制器名称和动作。您可以使用这些方法来确定索引页是什么。

**示例使用**

`$defaultModule = Zend_Controller_Front::getInstance()->getDefaultModule();`

`$defaultControllerName = Zend_Controller_Front::getInstance()->getDefaultControllerName();`

`$defaultAction = Zend_Controller_Front::getInstance()->getDefaultAction();`

# c# - CSVHelper 与 ASP.NET MVC 3

> ID：11076587
> 
> 赞同：4
> 
> 时间：2012-06-18T03:22:16.873
> 
> 标签：c#, asp.net, asp.net-mvc-3, entity-framework, csv

我正在尝试上传一个 csv 文件并使用 MVC3 实现 CSVHelper 主管。

[https://github.com/JoshClose/CsvHelper](https://github.com/JoshClose/CsvHelper)

我还没有找到将其与文件上传一起使用的示例。基本上，我需要获取 CSV 文件并映射到实体对象并保存到数据库。这是我的实体：

```
public class SurveyEmailListModels
    {
        [Key]
        public int SurveyEmailListId { get; set; }

        [CsvField(Index = 0)]
        public int ProgramId { get; set; }

        [CsvField(Index = 1)]
        public virtual SurveyProgramModels SurveyProgramModels { get; set; }

        [CsvField(Index = 2)]
        public string SurveyEmailAddress { get; set; }

        [CsvField(Index = 3)]
        public bool SurveyResponded { get; set; }

    } 
```

上传处理程序：

```
 [HttpPost]
        public ActionResult Upload(HttpPostedFileBase file, SurveyEmailListModels surveyemaillistmodels, int id)
        {
            if (file != null && file.ContentLength > 0)
            {

                // Collect file and place into directory for source file download

                var appData = Server.MapPath("~/csv/");
                var filename = Path.Combine(appData, Path.GetFileName(file.FileName));
                file.SaveAs(filename);

             //   surveyemaillistmodels.SurveyEmailAddress = "test@test.com";
             //   surveyemaillistmodels.SurveyResponded = true;
              //  surveyemaillistmodels.ProgramId = id;

                db.SurveyEmailListModels.Add(surveyemaillistmodels);
                db.SaveChanges();

                return Content(filename);

            }
            return Json(true);
        } 
```

我不确定如何遍历 CSV 文件并保存到数据库。有人有例子吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T06:29:49.880

为此，我建议您使用自定义模型绑定器，以避免将控制器逻辑与 CSV 解析代码混淆：

```
public class SurveyEmailListModelsModelBinder: DefaultModelBinder
{
    public override object BindModel(ControllerContext controllerContext, ModelBindingContext bindingContext)
    {
        var csv = bindingContext.ValueProvider.GetValue(bindingContext.ModelName);
        var file = ((csv.RawValue as HttpPostedFileBase[]) ?? Enumerable.Empty<HttpPostedFileBase>()).FirstOrDefault();

        if (file == null || file.ContentLength < 1)
        {
            bindingContext.ModelState.AddModelError(
                "", 
                "Please select a valid CSV file"
            );
            return null;
        }

        using (var reader = new StreamReader(file.InputStream))
        using (var csvReader = new CsvReader(reader))
        {
            return csvReader.GetRecords<SurveyEmailListModels>().ToArray();
        }
    }
} 
```

将在以下位置注册`Application_Start`：

```
ModelBinders.Binders.Add(
    typeof(SurveyEmailListModels[]), 
    new SurveyEmailListModelsModelBinder()
); 
```

现在我们可以有一个控制器：

```
public class HomeController : Controller
{
    public ActionResult Index()
    {
        return View();
    }

    [HttpPost]
    public ActionResult Index(SurveyEmailListModels[] model)
    {
        if (!ModelState.IsValid)
        {
            return View();
        }

        ... store the model into the database 

        return Content("Thanks for uploading");
    }
} 
```

和一个观点：

```
@Html.ValidationSummary()
@using (Html.BeginForm(null, null, FormMethod.Post, new { enctype = "multipart/form-data" }))
{
    <input type="file" name="model" />
    <button type="submit">OK</button>
} 
```

# android - adb 连接错误（设备状态在 windows7 中为脱机）

> ID：11076588
> 
> 赞同：2
> 
> 时间：2012-06-18T03:22:33.420
> 
> 标签：android, windows-7, offline

当我在win7中使用eclipse时。（笔记本-NT530U4B）我的手机状态总是离线。有时会显示太多相同的设备（但所有设备都处于离线状态）

如果我使用 USB 存储。它工作正常。eclipse在winXP中工作正常（另一台台式电脑，相同的电缆，相同的设备）

我用过 XT720（摩托罗拉 motoroi）和 Su-640（LG optimus-Lte）

我尝试重新安装驱动程序 adb kill & restart ，重新启动使用另一根电缆

如何消除这个问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T08:09:57.777

问题在于您的驱动程序。我建议您通过设备管理器卸载设备（Windows Key + R > devmgmt.msc > [Enter]）并尝试安装 PDANet（此处的教程：[http](http://www.topnotchtablets.com/installADBdriver) ://www.topnotchtablets.com/installADBdriver ）。PDANet 附带必要的驱动程序，以允许 Windows 自动安装正确的 ADB 驱动程序。

当然，还要仔细检查手机设置菜单中是否启用了“USB调试”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-12-30T08:58:16.943

这对我有用。在您的 android 设备上禁用 USB 调试并重新启用它。您可能希望在执行此操作时断开并重新连接设备。

# javascript - 有时，javascript 是多线程的？

> ID：11076594
> 
> 赞同：-1
> 
> 时间：2012-06-18T03:24:24.043
> 
> 标签：javascript, multithreading, alert, confirm

有时我发现，JavaScript 有多个线程，这让我很恼火。我上网查了一下，发现总是有人说只有一个线程，但我遇到的不止一个。您可以将代码复制到 html 文件中，然后运行。你会明白我的意思。为什么 javascript 有多个带有警报、确认、提示的线程？谢谢阅读。

注意：要对其进行测试，您应该获取 jQuery 并替换它。

```
<html>
<head>
<script type="text/javascript" src="js/jquery-1.7.2.js"></script>
<script type="text/javascript">
function pauseWithAlert(){
  fireAjax();
  alert("pause at one thread, I guess before this OK is clicked, no javascript should be executed since single thread, and the runner is with this thread in this function fpause");
}

function pauseWithConfirm(){
  fireAjax();
  if(confirm("the message has been triggered, while the 1st thread is paused with this confirmation request, but the message from another thread has been presented to you")){
    //something;
  }
}

function pauseWithDeadLoop(){
  alert("after you click OK, I will trigger the message, and then let the 1st thread get into dead loop, you will not be able to see the message");
  fireAjax();
  while(true);
}

function fireAjax(){
  var location = document.location.toString();
  $.ajax({type:'get',dataType:'html',url:location,success: ajaxSuccess, error: ajaxError});
}

var message = "have you clicked the OK in the 1st thread, this is a message from 2nd thread, isn't it?";
function ajaxSuccess(){
  document.getElementById('ajaxmessage').textContent = message;  
}

function ajaxError(){
  document.getElementById('ajaxmessage').textContent = message;  
}

function clearMessage(){
  document.getElementById('ajaxmessage').textContent = "";  
}
</script>
</head>
<body>
I know that it was said javascript is just one thread.
However, I found that sometimes, it is not just one thread.
<br/>Click <span onclick="pauseWithAlert();">here to pause with an alert</span> or
  <span onclick="pauseWithConfirm();">here to pause with a confirm</span>, 
and the runner stops there in the 1st thread, but you will see a message from 
another thread below, so not single thread????? No!!!
<br/>Click <span onclick="pauseWithDeadLoop();">here</span> to stop the 1st thread 
with a dead loop, you will not see a message from another thread below.
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>

<span id=ajaxmessage></span>
<br/>
<span onclick="clearMessage();">Clear the above message</span>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-18T03:29:23.340

Javascript 只有一个工作线程，但它有回调，所以在你看来似乎有多个线程，但实际上没有。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T04:13:14.143

简短的回答是这取决于浏览器。但它实际上并没有演示多线程。

例如，使用最新版本的 Chrome，我看不到您描述的行为。

使用最新版本的 Firefox，我*确实*看到了一些奇怪的东西。即，在显示警报*时*（或*之前*） ，DOM 似乎会更新（即，已触发传递给 AJAX 请求的回调）。我感觉到您已经得出结论，因此必须有多个线程，因为`alert`应该是阻塞调用。

我不知道这一点，但我有一个关于为什么会这样的理论。如果您考虑 的语义`alert`，它要求调用*之后* `alert`的代码在用户单击“确定”（或其他任何内容）之前不会执行。但这实际上并不意味着调用必须在传统意义上阻塞（即旋转和等待）。JavaScript 引擎实际上可能实现`alert`为基于回调的协议，以便`alert`调用之后的代码构成一个回调，该回调在用户单击“确定”后触发。

根据这个实现，`$.ajax`随后的调用`alert`就像`$.ajax`连续进行两次调用一样，在这种情况下，第一个回调可能在第二个 AJAX 请求收到响应之前触发也就不足为奇了。

另一种可能性（尚未测试）是 Firefox 只是有一个优化，其中对当前窗口位置的 AJAX 请求同步返回当前页面的 HTML。牵强，也许，但肯定有可能。

我在这里要说明的要点是，您实际上并没有发现 JavaScript 中多线程的证明。还有其他解释。但是，我确实与您一样困惑，我同意至少在一种流行的浏览器中存在一些令人费解的行为。

# c++ - 编译器使用类的行为

> ID：11076595
> 
> 赞同：1
> 
> 时间：2012-06-18T03:24:32.030
> 
> 标签：c++, class, inheritance, types

```
#include <list>
using std::list;
class foo { ...
class bar : public foo { ...
static void print_all(list<foo*> &L) { ...
list<foo*> LF;
list<bar*> LB;
...
print_all(LF); // works fine
print_all(LB); // static semantic error 
```

我想我知道为什么编译器不允许第二次调用。如果编译器接受这种调用，任何人都可以举一个可能发生的坏事的例子吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T03:26:33.433

当然！如果 print_all 这样做会怎样：

```
L.push_back(new Foo); 
```

现在，您的 Bar 指针列表有一个指向不是 Bar 的 Foo 对象的指针。如果您随后尝试调用 Bar 中不存在于 Foo 类中的方法，您将遇到某种严重的运行时问题，因为该方法不存在于 Foo 对象中。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T03:40:28.407

代码中有两件不同的事情，有不同的解释。第一个问题是模板的不同实例化是不相关的，即使实例化类型是相关的。在这种特殊情况下`std::list<foo*>`，与 没有关系`std::list<bar*>`，即使`foo`是 的基础`bar`。这是语言设计的一部分，无能为力。

第二个问题不是编译器所抱怨的，一般来说，容器的`derived`引用不能用作`base`. 这就是@templatetypedef 提出的问题——但同样，这不是代码中的问题，它会出现在另一个示例中：

```
void f( base** p );
int main() {
   derived *d;
   f( &d );          // error
} 
```

在这种情况下，问题在于，正如@templatetypedef 指出的那样，以非常量方式使用指针/容器*代替*`derived`指针/容器很容易出错，因为您可以在指针上存储非类型/容器。`base` *`derived`*

# html - g:select - 显示值

> ID：11076599
> 
> 赞同：1
> 
> 时间：2012-06-18T03:24:51.970
> 
> 标签：html, grails

我有这个关于`<g:select>`标签的问题。我的 view.gsp 上有这个声明，

```
<g:select id='selectedId' name='selectedValue' from='${selectedList}' 
    optionKey='tblColumn' value='${element.value}'/> 
```

并拥有此控制器和域模型：

```
// Controller
def element = Model.get(params.id)
render(view:'view.gsp', model:[element: element, selectedList: Value.list()]
// End-Controller

//[Domain Model]: Model
class Model {
   String name
   Value value  
   // constraints
}
//End-[Domain Model]: Model

//[Domain Model]: Value
class Value {
   String tblColumn
   // constraints
   String toString() { "${this.tblColumn}" }
}
//End-[Domain Model]: Value 
```

问题是，一旦页面加载，我无法让`<g:select>`标签将 的值显示为标签`${element.value}`上的选定值。`<selected>`当我查看页面源代码时，此代码行返回：

```
<select id="selectedId">
   <option value='/* the value by the optionKey */'>/* the value */</option>
   <option value='/* the value by the optionKey*/' selected='selected'>/* the value to be displayed */</option>
</select> 
```

# java - java.lang.Runnable 与 System.Delegate

> ID：11076604
> 
> 赞同：0
> 
> 时间：2012-06-18T03:26:06.257
> 
> 标签：java, .net, jvm, clr

我已经使用了很多，但我对它们的底层了解不多。它们有何不同，又有何相同之处？对我来说，它们看起来非常相似，我会以大致相同的方式使用它们，尽管遗憾的是 java 没有 lambda 表达式，而且我不知道如何以类型安全的方式使用 Runnable。

具体来说，我是在谈论 Oracle JVM 中的 java.lang.Runnable 而不是 J# 与 .Net 运行时如何使用 System.Delegate。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T03:59:29.930

对于 Java，Runnable 没有什么特别之处，除了线程支持和 java.util.concurrent 库是为使用它而构建的。它只是另一个界面。如果您不喜欢它具有 void 返回类型的事实，您可以使用 Future< T >，或者自己滚动。不管你怎么做，生成的代码都不能令人满意，至少在 Java 8 成为主流之前是这样。

# ms-access - 通过 Internet 使用 MS-ACCESS 拆分数据库

> ID：11076608
> 
> 赞同：1
> 
> 时间：2012-06-18T03:26:43.910
> 
> 标签：ms-access, odbc, client-server

我正在开发一个数据库，该数据库预计将在客户端-服务器模型中的多个分布式位置上运行。我仅限于 MSACCESS，目前正在为本地网络使用拆分数据库。

我们能否在互联网上安全地扩展这个拆分数据库。请注意，我们不能使用更复杂的解决方案，例如 MSSQL 或 sharepoint。

我们有一个固定的 IP，但是在 Internet 上没有找到使用 MSACCESS 的示例，因此没有太多关于安全性的信息。

遇到这个线程：[如何通过 Internet 共享 MS Access 2010 数据库](https://stackoverflow.com/questions/5044680/how-to-share-ms-access-2010-database-over-the-internet)

但是我们没有虚拟终端登录。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T12:40:26.337

MS Access 不是为在互联网上使用而设计的，因此没有本机内置功能。

少数选项之一是让来自多个位置的用户通过 VPN 连接登录到存储数据库文件的服务器。然而，这仍然不是一个好主意，因为当您引入较大的数据传输距离时，您可能会面临数据不完整或损坏的风险，更不用说基于此模型的多用户环境令人头疼了。

您提到无法使用 MsSql，但没有说明原因，如果是成本或许可问题等，那么您可以考虑使用免费的 MsSql 快速版本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T21:15:12.777

你可以在这里查看我的文章：

[http://www.kallal.ca//Wan/Wans.html](http://www.kallal.ca//Wan/Wans.html)

在上面我解释了你的选择。我的意思是，如果您在任何地方都有服务器（按照您的计划），那么我认为没有理由不使用免费版本的 SQL Server 作为后端。

另外，我不确定您为什么认为某些技术（例如使用 SharePoint 或 Office 365（云））很昂贵？SharePoint 的基本版在任何服务器版本的 Windows 中都是免费的（我上次查看的 2008 R2 低于 500 美元）。

您可以获得 6 美元的 Office 365 计划，它不仅支持您将数据表放置在云中并将您的 MS Access VBA 前端链接到 o365 上的这些表，而且您还可以以同样低的价格在 Access 中创建 Web 表单并将它们发布到 Office 365。我的以下视频显示了访问 2010 的新功能：

[http://www.youtube.com/watch?v=AU4mH0jPntI](http://www.youtube.com/watch?v=AU4mH0jPntI)

因此，每月 6 美元的计划对于您的任何计算机来说都将少于一次服务电话。

# string - 需要在输出文件中打印文件的第二列

> ID：11076609
> 
> 赞同：-2
> 
> 时间：2012-06-18T03:27:05.593
> 
> 标签：string, unix, awk

我们的文件已用 samtools 查看。我只需要抓住第二列，所以我做到了

```
./samtools view mybamfile.bam | awk '{ print $2 }' > output.txt 
```

您可能会猜到这不起作用.. 如果 awk 不是一个好选择，我应该如何查询以仅获取我的文件*mybamfile.bam*的第二列我愿意尝试其他任何方法！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T04:11:00.357

我相信 的输出`./samtools view view mybamfile.bam`是制表符分隔的，因此 AWK 的字段分隔符应设置为制表符 ( `-F'\t'`) 以获得第二列。

试试这个命令：

```
 ./samtools view mybamfile.bam | awk -F'\t' '{ print $2 }' > output.txt 
```

重新制表符作为分隔符：

如果未指定字段分隔符，AWK 将在“空白”（例如，空格和制表符）上`-F'\t'`拆分，使用确保它*仅*在制表符上拆分，而不是空格。这使得包含空格和制表符的文件有所不同。例如，

```
irene adler john moriarty
frank pempleton tim bayliss 
```

假设每行的两个名称之间有一个制表符。如果制表符*未*指定为字段分隔符，AWK 将看到每行**4 个**字段，第 2 列将包含`adler`and `pempleton`。如果将制表*符*指定为字段分隔符，AWK 将只看到每行**2 个**字段，第 2 列将由`john moriatry`和组成`tim baylis`。

在 Linux 下使用 GNU Awk 3.1.6 进行测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T05:53:48.493

awk 默认将字段分隔符作为制表符。因此，如果字段分隔符确实是制表符，您的命令应该可以工作。也许你可以尝试：

```
./samtools view mybamfile.bam |cut -f2 -d'\t' 
```

# sql - 基于第一个响应的第二个表的 SQL 查询

> ID：11076610
> 
> 赞同：1
> 
> 时间：2012-06-18T03:27:15.693
> 
> 标签：sql

这是一个 SQL 查询，如果 first- 返回多个值，则该查询失败

```
SELECT     subject
FROM         a_batchcourse_subject AS s
WHERE     (batchcourse =
                          (SELECT     batchcourse
                          FROM          a_course_batchcourse AS b
                          WHERE      (course = 'Course 1'))) 
```

在第一个查询可能返回多个值的情况下，编写此查询的正确方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-18T03:28:54.963

你不想`IN`在 sql 中`=`

```
SELECT subject
FROM a_batchcourse_subject AS s
WHERE batchcourse IN
(SELECT batchcourse
FROM a_course_batchcourse AS b
WHERE course = 'Course 1') 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-18T03:32:37.753

`JOIN`比`IN`从句快得多

```
SELECT  s.subject
FROM    a_batchcourse_subject s 
        INNER JOIN a_course_batchcourse b
        on s.batchcourse = b.batchcourse
WHERE   (b.course = 'Course 1') 
```

# jquery - 哪个 jQuery 需要使用 CouchJS？

> ID：11076611
> 
> 赞同：1
> 
> 时间：2012-06-18T03:27:21.030
> 
> 标签：jquery, couchdb

[我在这里](http://pastie.org/4106327)运行这段代码

```
<html>

<script type="text/javascript" src="lib/jquery-ui-1.8.21.custom.min.js"></script>
<script src="http://127.0.0.1:5984/_utils/script/jquery.couch.js"></script>
<!--<script type="text/javascript" src="lib/jquery-1.7.2.js"></script>-->

<script>
<!--var dbc = $.jqCouch.connection('db');-->
<!--dbc.exists('database_name');-->

<!--if ($.jqCouch.connection('db').create('database_name').ok) {-->
    <!--alert("database created");-->
<!--}-->

$.couch.activeTasks({
  success: function (data) {
    console.log(data);
  }
});
</script>

</html> 
```

我得到了错误。正如您在代码中看到的那样，我已经尝试过所有类型的 jQueries，例如带有 UI -custom 和 1.72 的所有内容。那么为什么我会收到这个错误呢？我在哪里可以找到使用 CouchJS 所需的 jQuery？

> **拼图**
> 
> 1.  [Joy 在这里](https://i.stack.imgur.com/n72AQ.png)解决了 jQuery 问题图片。
>     
>     
> 2.  [现在这里](https://i.stack.imgur.com/o1Ixr.png)有一些奇怪的类型错误和来源[。](http://pastie.org/4106383)

**可能对其他使用 CouchDB 的初学者有用**

1.  [关于用户空间中 CouchJS 的简单示例，例如浏览器？](https://stackoverflow.com/questions/11076076/simple-example-about-couchjs-in-browser)

2.  [判断需要哪些 JQuery 函数的简单方法？](https://stackoverflow.com/questions/2914770/easy-way-to-tell-which-jquery-functions-are-needed)

3.  [你从哪里包含 jQuery 库？谷歌 JSAPI？CDN？](https://stackoverflow.com/questions/547384/where-do-you-include-the-jquery-library-from-google-jsapi-cdn)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T03:42:42.833

您需要先加载 jQuery，`jQuery UI`或者`Couch JS`因为它们都`$`在这些文件中使用变量，并将`jQuery.js`其定义`$`为`jQuery`对象的别名。所以`$`在使用前必须先定义。所以把你的代码改成这个

```
<script type="text/javascript" src="lib/jquery-1.7.2.js"></script>
<script type="text/javascript" src="lib/jquery-ui-1.8.21.custom.min.js"></script>
<script src="http://127.0.0.1:5984/_utils/script/jquery.couch.js"></script> 
```

它应该可以正常工作。

对于生产网站，我建议从 CDN 加载 jQuery（如果你还不知道的话，你可以做一个快速的谷歌搜索来找到使用 jQuery 的 CDN 的好处）喜欢

```
<script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T03:30:28.860

请在`jquery.couch.js`.

# ruby-on-rails - 同一模型的多个视图

> ID：11076612
> 
> 赞同：0
> 
> 时间：2012-06-18T03:27:33.837
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我是一位经验丰富的 Web 开发人员，但对 Rails 很陌生。我正在编写基于复式记帐数据库的预算应用程序。数据库包含表示交易的日记帐分录，每个日记帐分录有多个过帐。每个过帐都有一个帐户和一个金额。

以下是我的模型的简化版本：

```
class Posting < ActiveRecord::Base
  belongs_to :account
  belongs_to :journal_entry

  attr_accessible :account_id, :amount
end

class JournalEntry < ActiveRecord::Base
  has_many :postings, :dependent => :destroy

  attr_accessible :narrative, :posting_date, :postings_attributes

  accepts_nested_attributes_for :postings, :allow_destroy => :true,
    :reject_if => proc { |attrs| attrs.all? { |k, v| k == '_destroy' or v.blank? } } 
end 
```

我已经成功创建了一个嵌套表单，它允许一起编辑日记帐条目及其帖子列表。但是，大多数日记帐分录都很简单，只有一个贷记分录和一个借记分录。在这种情况下，为了使数据输入更容易，我想要另一个表单，允许用户指定贷方账户、借方账户和金额。

根据我的研究，可以看到两种方法：

1.  单表继承，其中 SimpleJournalEntry（扩展 JournalEntry）
2.  使用 ActiveModel 制作不直接附加到数据库的 SimpleJournalEntry 模型，并在控制器中自己处理数据库更改

SimpleJournalEntry 模型将具有贷方账户、借方账户和金额，并将用于编辑简单记录。现有的 JournalEntry 模型仍然存在，以允许编辑更复杂的记录。

处理这种事情的“轨道方式”是什么？还有其他我没有考虑过的选择吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T05:36:25.490

在这一点上，我不得不不同意 railsdog 的观点。我认为你确实有一个很好的 STI 候选人。特别是，我认为“让 [JournalEntry] 处理简单或复杂保存的细节”表明您正在处理两个独立的问题。

如果您的简单和复杂的 JournalEntries 具有不同的业务逻辑，它们应该由两个不同的类来表示。不难想象，例如，复杂的 JournalEntry 可能想要添加简单的 JournalEntry 没有的验证。或者简单的 JournalEntry 应该比复杂的 JournalEntry 有更少的 attr_accessible 声明。我会建议：

```
class JournalEntry < ActiveRecord::Base
  # shared accessors and validations
end

class SimpleJournalEntry < JournalEntry
  # simple accessors and validations 
end

class ComplexJournalEntry < JournalEntry
  # more complex accessors and validations
end 
```

我将使用单独的控制器和视图来处理这两个类。

在不相关的注释中，#accepts_nested_attributes_for 的 :all_blank 选项应该做你的 Proc 所做的事情，不是吗？来自文档：“传递 :all_blank 而不是 Proc 将创建一个 proc，它将拒绝所有属性为空的记录，不包括 _destroy 的任何值。” 那是，`accepts_nested_attributes_for :postings, :reject_if => :all_blank`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T04:32:18.973

I would not use STI to handle this. Essentially you have a simple 'view' and a 'complex' view, the underlying model(s) aren't changing, just the view you want to present.

There is nothing wrong with creating alternate link (path/route) to this simple view, and managing the 'simplicity' in the save action in your controller, you'll just have to inspect the params received and decide which action to take.

Even better, pass the params as received to your journal entry model, and let it handle the details of the simple or complicated save. After all, the business rules associated with accounting should be in the model, should they not?

# android - ListView 重复选择

> ID：11076614
> 
> 赞同：0
> 
> 时间：2012-06-18T03:27:56.177
> 
> 标签：android, android-listview

我正在尝试为我的列表视图创建一个上下文菜单，因此当用户长按一行时，上下文菜单会显示，当用户选择一个选项时，该行会被选中。但是选择了很多行，它会重复列表视图中其他行的模式选择。

当我简单地单击一行时，也会发生同样的情况。IDK，如果它是视图回收的问题，或者什么。

如何解决这两个问题，因为第一个是在内部处理的，`onContextItemSelected(MenuItem item)`所以我通过操作对象来管理行`MenuItem`，第二个是在`AdapterView.OnItemClickListener`.

**顺便说一句，我正在使用 CursorAdapter 来填充 ListView。**

谢谢。

这是我的代码：

```
// Listener for the click on the items in the ListView
mListViewListener = new AdapterView.OnItemClickListener()
{
    // When the user clicks some item, the Activity that shows the available dates will be shown
    @Override
    public void onItemClick(AdapterView<?> adapterView, View view, int position, long arg3)
    {
        view.setBackgroundColor(0xff333333);
    }
};

// Handle the LongClick on the row
@Override
public void onCreateContextMenu(ContextMenu menu, View view, ContextMenuInfo menuInfo)
{
    super.onCreateContextMenu(menu, view, menuInfo);
    MenuInflater inflater = getMenuInflater();
    inflater.inflate(R.menu.contact_options, menu);
}

@Override
public boolean onContextItemSelected(MenuItem item)
{
    AdapterContextMenuInfo info = (AdapterContextMenuInfo) item.getMenuInfo();
    switch(item.getItemId())
    {
        case R.id.context_menu_item:
            info.targetView.setBackgroundColor(0xff333333);

            default:
            return super.onContextItemSelected(item);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T01:40:10.107

在您的 CursorAdapter 中这样的东西应该可以工作：

```
private Set<String> mSelectedContactNumbers = new HashSet<String>();

@Override
public void bindView(View view, Context context, final Cursor cursor)
{
    final String contactNumber = cursor.getString(cursor.getColumnIndex("contact_number"));
    view.setOnClickListener(new View.OnClickListener() 
    {
        @Override
        public void onClick(View v) 
        {
                  if (!mSelectedContactNumbers.remove(contactNumber)) {
                       mSelectedContactNumbers.add(contactNumber);
                  }
                  notifyDataSetChanged();
        }
    });
    if (mSelectedContactNumbers.contains(contactNumber)) {
       view.setBackgroundColor(0xff333333);
    } else {
       view.setBackgroundColor(0);
    }
    createView(view, cursor);     
} 
```

这只是一个快速的解决方案。您可以在适配器中创建一个 toggleSelected 函数，您可以从 OnItemClickListener 调用该函数。这样会好一些。

# c# - How to convert a Matrix4 or Quaternion to angle in degrees

> ID：11076616
> 
> 赞同：3
> 
> 时间：2012-06-18T03:28:49.327
> 
> 标签：c#, algorithm, kinect

I'm asking if anyone could help me in converting a Matrix4 or Quaternion to angle in degrees, I'm working on Kinect windows SDK 1.5 using C#, the sdk 1.5 provides the joint orientation but only in Matrix4 or Quaternion and i need the angles in degrees.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-06-12T17:47:03.523

Well, the numbers in quaternions and matrix4 are cosines. Therefore, the following functions solves it:

```
Function cs_a_gr(cose)
    Return 180 / PI * Acos(cose)
End Function 
```

# c - 反转从文件加载的 1GB 字符串

> ID：11076617
> 
> 赞同：2
> 
> 时间：2012-06-18T03:28:51.963
> 
> 标签：c, sorting

有一个 1 GB 的文件包含单个字符串。由于字符串非常大，因此无法完全加载到内存中。反转此字符串的最佳方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T03:33:22.853

将块加载到内存中，在按顺序写出它们的同时反向迭代它们。伪代码：

```
load_block(buffer, 4mb, end of file); // Load a 4mb block from the end
for (i = 4mb; i>=0; i--) {
    write(buffer[i],1); // Write it out in reverse
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T03:31:21.870

您可以从末尾遍历文件，将其逐字节加载到内存中（假设为 8 位字符），然后将其保存到从头开始的输出文件中

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-18T08:19:51.853

快速而肮脏的方式。

```
#include <stdio.h>
#include <stdlib.h>
#include <assert.h>
int main(int argc, char ** argv) {
    FILE * in,*out;
    assert(argc>2);
    in = fopen(argv[1],"rb");
    out = fopen(argv[2],"wb");
    assert(in);
    assert(out);
    assert(0==fseek(in,0,SEEK_END));
    assert(0==fseek(in,-1,SEEK_CUR));
    fputc(fgetc(in),out);
    while (!fseek(in,-2,SEEK_CUR)) {
            fputc(fgetc(in),out);
    }
    fclose(in);
    fclose(out);
    return 0;
} 
```

根据评论添加。

```
#include <stdio.h>
#include <stdlib.h>
#include <assert.h>

void flip(char *a, int size) {
    int i;char c;
    for (i=0;i<size/2;++i) {
            c=a[size-1-i];
            a[size-1-i] = a[i];
            a[i]=c;
    }
}
int main(int argc, char ** argv) {
    const size_t chunksize = 4096;
    char buffer[chunksize];
    size_t chunks;
    size_t rest;
    FILE * in,*out;
    size_t t;
    assert(argc>2);
    in = fopen(argv[1],"rb");
    out = fopen(argv[2],"wb");
    assert(in);
    assert(out);
    assert(0==fseek(in,0,SEEK_END));
    t = ftell(in);
    assert(t>0);
    chunks = t/chunksize;
    rest = t%chunksize;
    assert(0==fseek(in,-rest,SEEK_CUR));
    assert(rest == fread(buffer, 1, rest, in));
    flip(buffer, rest);
    assert(rest == fwrite(buffer,1,rest,out));
    while (!fseek(in,-(chunksize+rest),SEEK_CUR)) {
            rest = chunksize;
            assert(rest == fread(buffer, 1, rest, in));
            flip(buffer, rest);
            assert(rest == fwrite(buffer,1,rest,out));
    }
    fclose(in);
    fclose(out);
    return 0;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-18T05:44:00.117

我认为，解决您的问题的最佳选择是使用 mmap 将文件加载到内存中。请参阅 mmap 手册页以加载文件或阅读以下链接 [何时应使用 mmap 进行文件访问？](https://stackoverflow.com/questions/258091/when-should-i-use-mmap-for-file-access)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-18T06:14:37.067

将字符串划分为您的内存可以处理的子字符串。从末尾读取这些子字符串。反转每个子字符串并将结果打印到输出文件。

# c++ - c++ auto没有命名类型

> ID：11076619
> 
> 赞同：6
> 
> 时间：2012-06-18T03:28:58.753
> 
> 标签：c++, c++11, auto

我在我的代码中使用关键字 auto

```
137       auto i = boost::find(adresses, adress); 
```

在使用以下命令编译时，我收到这些错误

```
[vickey@tb tests]$ clear;g++ testCoverDownloader.cpp ../CoverDownloader.cpp -I /usr/include/QtGui/ -I /usr/include/QtCore/ -lQtGui -lQtCore -std=c++0x

../CoverDownloader.cpp:137:10: error: ‘i’ does not name a type
../CoverDownloader.cpp:139:8: error: ‘i’ was not declared in this scope 
```

使用 -std=c++0x 应该可以解决问题。怎么了 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T03:55:40.237

`boost`除非您`Qt`指定. 编译器偏向它们`-I /usr/include/QtCore/`的标头没有什么特别之处。`boost`GCC 文档的[搜索路径](http://gcc.gnu.org/onlinedocs/cpp/Search-Path.html)部分可能会对您有所帮助。

# drupal-7 - 我们如何添加 drupal7 主题的不同徽标（图像）标题

> ID：11076621
> 
> 赞同：0
> 
> 时间：2012-06-18T03:29:07.950
> 
> 标签：drupal-7

我正在尝试在 drupal-7 的标题中添加 3 个不同的图像。但是我只能添加一个图像，您能告诉我如何在 drupal 7 主题的标题中添加不同的图像，而不会使用模块影响代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T17:56:50.020

这并不难，但您需要编辑所选主题的 page.tpl 文件。

不建议直接编辑主题，因为如果不对升级版本进行相同的更改，您将失去升级的能力。

要了解如何创建子主题，请参阅此页面：[http ://drupal.org/node/225125](http://drupal.org/node/225125)

您需要在您的站点/所有/主题或站点/mysite/主题文件夹中创建一个名为“mysubtheme”的目录。然后创建一个名为“mysubtheme.info”之类的“.info”文件，其中应包含您的子主题的名称和“base theme = 不管”之类的行，以告诉 Drupal 您的主题是基于原始主题的。然后从原始主题复制 page.tpl，并编辑以添加新图像。应该是这样的。

希望这能让你走上正确的道路。

詹姆士

# javascript - 在使用 Javascript 的下划线后正则表达式 URL 末尾的数字

> ID：11076624
> 
> 赞同：0
> 
> 时间：2012-06-18T03:29:29.657
> 
> 标签：javascript, regex

我正在尝试以`match`这种形式从 url 获取“12345”：

[http://domain.com/folder/title_of_this_12345](http://domain.com/folder/title_of_this_12345)

到目前为止，我已经尝试过：

```
var pattern = "_([0-9]+)^";

alert(window.location.pathname.match(pattern)); 
```

但我只是返回null？

目的是将字符串末尾的数字正则表达式到第一个下划线？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T03:37:43.940

如果您将 替换为`^`，`$`您的方法将起作用。`^`匹配字符串的开头，而`$`匹配字符串的结尾（尽管此处不相关，请查看有关`$`出现换行符时的行为的文档）。

非正则表达式解决方案是可能的，但如果链接可能包含也可能不包含数字，您将不得不检查最后一个标记是数字还是检查解析结果是否为 NaN。所以正则表达式可能是这里合适的解决方案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T16:56:46.633

为了清楚起见，匹配的数字本身是在返回数组的索引 1 处检索的：

```
alert(str.match(/_(\d+)$/)[1]); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-18T03:40:50.943

尝试

```
var path = window.location.pathname;
var num = parseInt(path.substr(path.lastIndexOf('_') + 1, 10)); 
```

作为不涉及正则表达式的替代方案。

实际上，请参阅 GGG 对该问题的评论，以获得更简洁的非正则表达式方法。

# solr - 如何使用 Solr 索引和查询嵌入属性？

> ID：11076625
> 
> 赞同：2
> 
> 时间：2012-06-18T03:29:39.790
> 
> 标签：solr, lucene, full-text-search, solrj

我是 Solr 的新手。我有这样一个要求：索引并查询我的具有**复杂**属性的主要对象（一个 java 对象）。

在休眠搜索中我可以使用`@IndexedEmbedded`，但我不知道如何使用 solr。

```
public class MyObject
{
    @org.apache.solr.client.solrj.beans.Field("attributes")
    private Set<Attribute> attributes = new HashSet<Attribute>();
....
}

public class Attribute {
        @org.apache.solr.client.solrj.beans.Field("attr_name")
        private String name;
        @org.apache.solr.client.solrj.beans.Field("attr_value")
        private String value;
.....
} 
```

现在，我想索引`MyObject`自身的内容以及它的属性。我配置`schema.xml`如下：

```
 <field name="attributes" type="text_general" indexed="true" stored="false"/>
   <field name="attr_name" type="text_general" indexed="true" stored="false"/>
   <field name="attr_value" type="text_general" indexed="true" stored="false"/> 
```

当我的对象进入数据库时​​，我使用以下代码在 solr 中建立索引：

```
solrServer.addBean(myObj);
solrServer.commit(); 
```

但在 solr 服务器日志中出现错误：

```
SEVERE: org.apache.solr.common.SolrException: ERROR: [doc=691b6b57-4c14-498e-8298-db9c098f7b82] unknown field 'attributes'
    at org.apache.solr.update.DocumentBuilder.toDocument(DocumentBuilder.java:340)
    at org.apache.solr.update.processor.RunUpdateProcessor.processAdd(RunUpdateProcessorFactory.java:60)
    at org.apache.solr.update.processor.LogUpdateProcessor.processAdd(LogUpdateProcessorFactory.java:115)
    at org.apache.solr.handler.XMLLoader.processUpdate(XMLLoader.java:157)
    at org.apache.solr.handler.XMLLoader.load(XMLLoader.java:79)
    at org.apache.solr.handler.ContentStreamHandlerBase.handleRequestBody(ContentStreamHandlerBase.java:58)
    at org.apache.solr.handler.RequestHandlerBase.handleRequest(RequestHandlerBase.java:129) 
```

我想是因为我的配置错误，有人可以纠正我吗？

我有一个查询的问题。我想`MyObject`通过搜索它的属性来获得。目前我`MyObject`通过以下代码搜索：

```
 SolrQuery query = new SolrQuery();
    query.setQuery(keyword);
    QueryResponse qr;
    List<MyObject> results=null;
    try {
        qr = solrServer.query(query);
        results = qr.getBeans(MyObject.class);
    } catch (SolrServerException e) {
        e.printStackTrace();
    } 
```

我不知道如何通过它的属性进行查询。

提前致谢。

# r - 如何抑制来自 cast() 的警告消息

> ID：11076626
> 
> 赞同：6
> 
> 时间：2012-06-18T03:29:47.187
> 
> 标签：r, reshape

我经常`cast()`从包装中使用。`reshape`几乎每次都会弹出这个警告：

`Aggregation requires fun.aggregate: length used as default`

我试过设置`options( warn =-1)`，无济于事。如何抑制这些警告？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-18T03:40:12.797

您可以手动将 fun.aggregate 指定为长度。

```
cast(your_inputs_to_cast, fun.aggregate = length) 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-06-18T03:50:11.193

`Aggregation requires fun.aggregate: length used as default`

不是- 让您知道该功能为您决定了一些事情`message`。`warning`我认为最好的选择是@Dason's answer - 即手动指定此选项。

但是，如果您不想这样做：

您可以通过将函数包装在`suppressMessages`

使用来自的示例`cast`

```
names(ChickWeight) <- tolower(names(ChickWeight))
chick_m <- melt(ChickWeight, id=2:4, na.rm=TRUE)

suppressMessages(cast(chick_m, time ~ variable)) 
```

或者您可以创建自己的功能

```
cast_suppress <- function(...){suppressMessages(cast(...))}
cast_suppress(chick_m, time ~ variable) 
```

# javascript - 为什么 alert AnchorElement ( ) 会提醒 href 属性？

> ID：11076627
> 
> 赞同：2
> 
> 时间：2012-06-18T03:29:48.590
> 
> 标签：javascript, jquery, anchor

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-18T03:33:52.480

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-18T03:38:01.210

`value`是`HTMLAnchorElement`对象，`HTMLAnchorElement.toString()`方法返回其 url 属性。

`alert`将`.toString()`在显示对象时使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T03:40:28.117

你得到 url 的原因是因为 .each 需要一个 container(array||object) 然后使用你的回调函数来处理容器。它将获取数组的元素或对象的属性，并对其进行迭代。由于您的选择器对象的属性是“href”，您将获得 url 值。

# mysql - 插入具有多个表的数据库

> ID：11076628
> 
> 赞同：0
> 
> 时间：2012-06-18T03:29:53.213
> 
> 标签：mysql, database

我正在尝试建立一个允许照片标记的数据库。我希望照片应该显示标签，并在单击时显示具有相同标签的所有其他照片。一种方法是使用存储标签和照片的 ID，但这需要在上传照片时插入至少 3 个表（照片表、标签表、查找表，而且我必须搜索标签是否已经存在的第一个天气）。而且当我显示与特定标签相关的图像时也会花费更多时间。我认为第二种方法是制作标签表并将照片表的 id 存储为外键和标签名称。这里我有在没有搜索的情况下只更新两个表，并且在显示时我只使用两个表来匹配特定的标签条目。帮助我找出问题并提出其他解决方案是否可行。插入和显示的速度很重要

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T03:43:57.417

您应该创建三个表。

照片、标签和 photo_tags。photo_tags 是您的参考表。

这允许照片和标签具有多对多的关系。

可以使用三个表。在现实生活中，我们使用许多表，如果您使用正确的连接编写选择语句，数据库会非常快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T03:44:17.907

您的照片和标签似乎具有所谓[*的多对多关系*](http://en.wikipedia.org/wiki/Many-to-many_%28data_model%29)。照片可以有很多标签，标签可以有很多照片。

因此，您确实需要[第三个表来表示这种关系](http://en.wikipedia.org/wiki/Junction_table)。这通常称为*连接表*，因为它用于`JOIN`查询中的两个正确表。

确实，这意味着还要维护一个表，但这是对这种关系建模的唯一方法（在大多数 DBMS 中，包括 MySQL）。

将标签添加到照片时，查找该标签，如果它不存在，则创建它。然后使用该标签的 ID 和照片 ID 在连接表中插入一行。

# ruby-on-rails-3 - Factory Girl 的困惑 - 关联模型的测试编辑

> ID：11076633
> 
> 赞同：1
> 
> 时间：2012-06-18T03:31:27.110
> 
> 标签：ruby-on-rails-3, cucumber, factory-bot

我有以下型号：

```
Student has_many Lesson
Lesson belongs_to Student 
```

我想测试学生是否可以编辑课程。

这是我开始做的事情：

```
 Given I am logged in as a student 
```

哪个步骤定义设置了来自工厂的 @student 对象（见上文）并让学生登录。

```
FactoryGirl.define do
  factory :student do
    first_name 'student'
    last_name 'last name student'
  end
end 
```

在这一点上，我被卡住了。我知道我可以为课程创建一个工厂，如下所示：

```
FactoryGirl.define do
  factory :lesson do
    name 'maths'
    level 'high school'
  end
end 
```

但我想将该课程与已登录的教授联系起来。所以我的问题是......我将如何进行下一步：

1.  创建与已登录学生关联的课程
2.  编辑课程（我需要知道 id 才能访问课程/：id 页面）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T11:06:21.610

`belongs_to :lecturer`我假设您的课程模型和`has_many :lessons`讲师模型中已经有了。

首先，我将您的课程工厂定义如下（假设您已经有一个讲师工厂）：

```
FactoryGirl.define do
  factory :lesson do
    name 'maths'
    level 'high school'
    association :lecturer
  end
end 
```

该`association :lecturer`行将使用工厂创建讲师并分配给课程。

在您的测试中，您可以执行以下操作，以便将您登录的讲师分配给您创建的课程：

```
FactoryGirl.create(:lesson, lecturer: signed_in_lecturer) 
```

希望这可以帮助。

PS：我不使用黄瓜，因此您可能需要稍微调整代码以将其考虑在内。

# mysql - MySQL：显示总数

> ID：11076641
> 
> 赞同：1
> 
> 时间：2012-06-18T03:33:28.343
> 
> 标签：mysql, select, count, unique

我试图弄清楚如何让 PHP 检查和打印 2 个不同的函数。

这两个问题都指的是名为“remix”的表。目前第一个也是更重要的问题***是，我想知道如何显示“作者”下有多少不同的值，以编译注册的作者总数。我不仅需要知道如何最有效地使用 COUNT 来返回“作者”下的唯一名称，还需要知道如何将其与当前编号的总行数内联显示。***

第二个问题是问我如何根据他们的名字在列表中出现的次数来设置前 3 名艺术家。这也将显示在与上述代码相同的页面上。

这是我当前的代码：

```
require 'remix/archive/connect.php';
mysql_select_db($remix);
$recentsong = mysql_query("SELECT ID,song,author,filename FROM remix ORDER by ID desc limit 1;");
$row = mysql_fetch_array($recentsong);

echo'
<TABLE BORDER=1><TR><TD WIDTH=500>

Currently '.$row['ID'].' Remixes by **(want total artists here)** artists.<BR>

Most recent song: <A HREF=remix/archive/'.$row['filename'].'>'.$row['song'].'</A> by <FONT COLOR=white>'.$row['author'].'</FONT> 
```

如您所见，我目前已将其设置为显示最近的歌曲（不是最有效的方式），但想要其他内容，例如至少是顶级贡献者，但不知道我是否会能够将它全部放在一个 php 块中，打破它，或者能够使用正确的代码在一次采石调用中完成所有操作。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T08:14:12.563

我不确定我是否真的理解您问题中的所有内容，但我们会一起解决这个问题：p

我创建了一个 SQLFiddle 来处理一些测试数据：[http](http://sqlfiddle.com/#!2/9b613/1/0) ://sqlfiddle.com/#!2/9b613/1/0 。
注意现场的索引`author`，它将确保良好的性能:)

为了`to know how to show how many DIFFERENT values are under "author"`您可以使用：

```
SELECT COUNT(DISTINCT author) as TOTAL_AUTHORS
FROM remix; 
```

为了知道`the total number of rows, which are currently numbered`你可以使用：

```
SELECT COUNT(*) as TOTAL_SONGS
FROM remix; 
```

您可以将两者结合在一个查询中：

```
SELECT
    COUNT(DISTINCT author) as TOTAL_AUTHORS,
    COUNT(*) as TOTAL_SONGS
FROM remix; 
```

To the top 3 subject now. This query will give you the 3 authors with the greatest number of songs, first one on top:

```
SELECT
    author,
    COUNT(*) as AUTHOR_SONGS
FROM remix
GROUP BY author
ORDER BY AUTHOR_SONGS DESC
LIMIT 3; 
```

Let me know if this answer is incomplete and have fun with SQL !

**Edit1:** Well, just rewrite your PHP code in:

```
(...)
$recentsong = mysql_query("SELECT COUNT(DISTINCT author) as TOTAL_AUTHORS, COUNT(*) as TOTAL_SONGS FROM remix;");
$row = mysql_fetch_array($recentsong);
(...)
Currently '.$row['TOTAL_SONGS'].' Remixes by '.$row['TOTAL_AUTHORS'].' artists.<BR>
(...) 
```

For the top3 part, use another mysql_query and create your table on the fly :)

# android - XmlPullParser 异常 - 无法解决

> ID：11076645
> 
> 赞同：2
> 
> 时间：2012-06-18T03:34:07.980
> 
> 标签：android, xmlpullparser

我有一个基本方法 - ReadXML() - 从 assets 文件夹中读取一个 xml 文件。运行时不会引发异常。但是在这个方法中，我调用了一个 doXML() 方法，该方法尝试从 xml 文件中提取文本并将此文本设置为 textviews。当 doXML() 方法运行时，我不断收到以下错误...生成的错误是

```
18:19:41.654: W/System.err(329): org.xmlpull.v1.XmlPullParserException: name expected (position:START_TAG @59:57 in java.io.InputStreamReader@44f049c8). 
```

我试图缩短 xml 文件以查看错误在哪里......基本上如果有四个“试验”，每个试验都有一个标题、作者等。前三个实际上会加载到 textviews 中......尽管上面的错误是仍然在 LogCat 中生成......但最后一个不会加载......所以代码逻辑可能存在问题，但无法弄清楚。

提前致谢。

```
<trial>
<title>The Book</title>
<author></author>
....
</trial> 
```

我认为代码可能比它需要的更复杂......但无法弄清楚为什么 doXML() 方法不能正常运行。

```
public void ReadXML() throws XmlPullParserException, IOException
   {

      factory = XmlPullParserFactory.newInstance();
      factory.setNamespaceAware(false);
      xpp = factory.newPullParser();

      InputStream raw = getApplicationContext().getAssets().open("trial_info.xml");
      xpp.setInput(raw,null);
   }
}

public void doXML() throws  XmlPullParserException, IOException{

          int eventType = XmlPullParser.START_TAG;

          while(eventType != XmlPullParser.END_DOCUMENT)
          {
            if(eventType == XmlPullParser.TEXT && xpp.getText().equals(selectedTrial))
              {
                   trialTxt = (TextView)findViewById(R.id.TrialAbbrevData);
                   trialTxt.setText(xpp.getText());
                   Log.d("what is this", xpp.getText());

           while(!(eventType == XmlPullParser.END_TAG && xpp.getName().equals("...")))
                   {  

          if(eventType == XmlPullParser.START_TAG && xpp.getName().equals("trialName"))
                      {    
                         eventType = xpp.next();
                         if(eventType == XmlPullParser.TEXT)
                         {
                            trialTxtDesc = (TextView)findViewById(R.id.TrialNameData);
                            trialTxtDesc.setText(xpp.getText());
                            Log.d("in loop",xpp.getText());
                         }
                      }

       if(eventType == XmlPullParser.START_TAG && xpp.getName().equals("trialDetails"))
                      {   
                         eventType = xpp.next();
                         if(eventType == XmlPullParser.TEXT)
                         {
                            trialTxtConc = (TextView)findViewById(R.id.TrialDescData);
                            trialTxtConc.setText(xpp.getText());
                         }
                      }

       if(eventType == XmlPullParser.START_TAG && xpp.getName().equals("trialResults"))
                      {   
                         eventType = xpp.next();
                         if(eventType == XmlPullParser.TEXT)
                         {
                     trialTxtConc = (TextView)findViewById(R.id.TrialResultsData);
                            trialTxtConc.setText(xpp.getText());
                         }
                      }

   if(eventType == XmlPullParser.START_TAG && xpp.getName().equals("trialConclusion"))
                      {   
                         eventType = xpp.next();
                         if(eventType == XmlPullParser.TEXT)
                         {
                            trialTxtConc=(TextView)findViewById(R.id.TrialConclusionData);
                            trialTxtConc.setText(xpp.getText());
                         }
                      }

        if(eventType == XmlPullParser.START_TAG && xpp.getName().equals("whatItMeans"))
                      {  
                          eventType = xpp.next();
                          if(eventType == XmlPullParser.TEXT)
                          {
                             trialTxtMeans = (TextView)findViewById(R.id.TrialWIMData);
                             trialTxtMeans.setText(xpp.getText());
                          }
                      }

                      eventType = xpp.next();

                   }         

            }
              eventType = xpp.next();
        }
    } 
```

# winapi - 在 WM_PAINT 中绘图（太慢）会导致闪烁？

> ID：11076648
> 
> 赞同：1
> 
> 时间：2012-06-18T03:34:31.747
> 
> 标签：winapi, gdi+, gdi

我想用下面的代码在 WM_PAINT 消息处理程序中画很多线。

```
//DrawLine with double buffering
LRESULT CALLBACK CMyDoc::OnPaint(HWND hWnd, WPARAM wParam, LPARAM lParam)
{
    std::vector<Gdiplus::Point> points;
    std::vector<Gdiplus::Point>::iterator iter1, iter2;
    HDC hdc, hdcMem;
    HBITMAP hbmScreen, hbmOldBitmap;
    PAINTSTRUCT ps;
    RECT    rect;

    hdc = BeginPaint(hWnd, &ps);

    //Create memory dc
    hdcMem = CreateCompatibleDC(hdc);
    GetClientRect(hWnd, &rect);
    hbmScreen = CreateCompatibleBitmap(hdc, rect.right, rect.bottom);
    hbmOldBitmap = (HBITMAP)SelectObject(hdcMem, hbmScreen);

    //Fill the rect with white
    FillRect(hdcMem, &rect, (HBRUSH)GetStockObject(WHITE_BRUSH));

    //Draw the lines
    Gdiplus::Graphics graphics(hdcMem);
    Gdiplus::Pen blackPen(Gdiplus::Color(255, 0, 0));

    points = m_pPolyLine->GetPoints();
    for (iter1 = points.begin(); iter1 != points.end(); iter1++) {
        for (iter2 = iter1 + 1; iter2 != points.end(); iter2++)
            graphics.DrawLine(&blackPen, *iter1, *iter2);
    }

    //Copy the bitmap from memory dc to the real dc
    BitBlt(hdc, 0, 0, rect.right, rect.bottom, hdcMem, 0, 0, SRCCOPY);

    //Clean up
    SelectObject(hdcMem, hbmOldBitmap);
    DeleteObject(hbmScreen);
    DeleteDC(hdcMem);

    EndPaint(hWnd, &ps);
    return 0;
} 
```

但是，如果点的大小超过 20，则客户端 rect 会闪烁。我认为原因是 Gdiplus::DrawLines 太慢了。

有什么方法可以解决闪烁问题吗？谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-18T08:08:59.903

闪烁可能是由于绘制缓慢以及其他原因造成的。通常，请尝试/确保以下内容：

*   尽量不要依赖`WM_ERASEBKGND`消息，即返回非零值，或者尽可能指定`NULL`in 。`WNDCLASS::hbrBackground`通常paint方法绘制脏区域的所有背景，则无需进行擦除。

*   如果您需要擦除，通常可以对其进行优化，使其`WM_ERASEBKGND`返回非零，然后paint方法通过绘制常规绘制内容未覆盖的区域（如果`PAINTSTRUCT::fErase`已设置）来确保“擦除”。

*   如果可能的话，编写paint方法，这样它就不会在一次调用中重新绘制相同的像素。例如，用红色边框制作蓝色矩形，不要`FillRect(red)`，然后用 重新绘制它的内部部分`FillRect(blue)`。尝试尽可能合理地绘制每个像素一次。

*   对于复杂的控件/窗口，通常可以优化绘制方法，以便`PAINTSTRUCT::rcPaint`通过适当组织控件数据轻松跳过脏矩形 ( ) 之外的大量绘制。

*   更改控件状态时，仅使控件的最小所需区域无效。

*   如果它不是顶级窗口，请考虑使用`CS_PARENTDC`. 如果您的绘制方法不依赖于系统将剪切矩形设置为控件的客户端矩形，则此类样式将带来更好的性能。

*   如果您看到控件/窗口大小调整时闪烁，请考虑不使用`CS_HREDRAW`and `CS_VREDRAW`。`WM_SIZE`而是手动使控件的相关部分无效。这通常允许仅使控件的较小部分无效。

*   如果您看到控件滚动时闪烁，请不要使整个客户端无效，而`ScrollWindow()`应仅使用和无效暴露新（滚动）内容的小区域。

*   如果上述一切都失败了，那么使用双缓冲。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-18T03:46:51.833

使用双缓冲。对于 Win32 C++ 应用程序，尤其是 OnPaint 函数和 DC 工具，这是一个令人讨厌的问题。

这里有一些链接可以帮助您检查双缓冲区的实现是否一切正常：[MFC 中的无闪烁绘图](http://www.codeproject.com/Articles/33/Flicker-Free-Drawing-In-MFC)和 SO 问题“[使用 GDI+ 和 C++ 减少闪烁](https://stackoverflow.com/questions/197948/reduce-flicker-with-gdi-and-c)”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-27T02:37:33.903

如果您的线条碰巧超出了 DC（图形）的范围，Win32/GDI+ 的剪切速度会非常缓慢。比如，比滚动你自己的裁剪函数慢两个数量级。这是一些实现 Liang/Barsky 的 C# 代码——我从一个 20 年前最初使用 C++ 的旧库中搜罗到了它。应该很容易移植回来。

如果您的线条可以延伸到客户矩形之外，请在您的点上调用 ClipLine(rect, ...)，然后再将它们交给 Graphics::DrawLine。

```
private static bool clipTest(double dp, double dq, ref double du1, ref double du2)
{
    double dr;
    if (dp < 0.0)
    {
        dr = dq / dp;

        if (dr > du2)
        {
            return false;
        }
        else if (dr > du1)
        {
            du1 = dr;
        }
    }
    else
    {
        if (dp > 0.0)
        {
            dr = dq / dp;
            if (dr < du1)
            {
                return false;
            }
            else if (dr < du2)
            {
                du2 = dr;
            }
        }
        else
        {
            if (dq < 0.0)
            {
                return false;
            }
        }
    }

    return true;
}

public static bool ClipLine(Rectangle clipRect, ref int x1, ref int y1, ref int x2, ref int y2)
{
    double dx1 = (double)x1;
    double dx2 = (double)x2;
    double dy1 = (double)y1;
    double dy2 = (double)y2;

    double du1 = 0;
    double du2 = 1;
    double deltaX = dx2 - dx1;
    double deltaY;

    if (clipTest(-deltaX, dx1 - clipRect.Left, ref du1, ref du2))
    {
        if (clipTest(deltaX, clipRect.Right - dx1, ref du1, ref du2))
        {
            deltaY = dy2 - dy1;
            if (clipTest(-deltaY, dy1 - clipRect.Top, ref du1, ref du2))
            {
                if (clipTest(deltaY, clipRect.Bottom - dy1, ref du1, ref du2))
                {
                    if (du2 < 1.0)
                    {
                        x2 = DoubleRoundToInt(dx1 + du2 * deltaX);
                        y2 = DoubleRoundToInt(dy1 + du2 * deltaY);
                    }
                    if (du1 > 0.0)
                    {
                        x1 = DoubleRoundToInt(dx1 + du1 * deltaX);
                        y1 = DoubleRoundToInt(dy1 + du1 * deltaY);
                    }

                    return x1 != x2 || y1 != y2;
                }
            }
        }
    }
    return false;
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-18T06:04:27.213

问题是我自己没有处理 WM_ERASEBKGND 消息。

# javascript - 国家颜色

> ID：11076651
> 
> 赞同：0
> 
> 时间：2012-06-18T03:35:12.193
> 
> 标签：javascript, html, google-maps, google-maps-api-3

我有一个使用 Google Maps API v3 编写的 HTML 文件。

我想做的只是给几个国家涂上颜色，例如，把中国和加拿大的颜色涂成红色。什么是在国家/地区着色的简单解决方案（不涉及多边形和数千个坐标）？

在浏览了之前的 StackOverFlow 问题后，似乎有三种常见的解决方案。然而，这 3 种解决方案似乎不适合我的情况。

1.  Charts API - 我真的不明白 Charts API 对我来说是否是一个好的解决方案，因为我已经有一个使用 Google Maps API 的文件。除非可以在我的地图上应用图表，或者与地图同步，否则这似乎不是一个有效的解决方案。

2.  样式（使用样式向导）-该向导（据我所知）处理一般特征的样式，例如道路，水，人口等。除非有人可以告诉我如何为特定国家分配颜色，否则我不会看看这是如何工作的。

3.  多边形 - 我看到了 Bermuta 三角形的示例，其他人建议获取一个国家的周长坐标并创建一个多边形。这可能会奏效，除非我可能需要数千个坐标才能完全勾勒出中国的轮廓。也许有一种更简单的方法可以让我在一个国家/地区着色？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T07:58:47.440

使用 FusionTablesLayer 或 KmlLayer。两者都采用 kml 格式的地理数据并将其渲染在图块上，从而在复杂或大量多边形的情况下产生更好的性能。

[Natural Earth 数据集](http://blog.thematicmapping.org/2011/02/natural-earth-vectors-in-cloud.html)在[Fusion Tables](https://www.google.com/fusiontables/DataSource?dsrcid=394713)中可用，并且包含大多数国家/地区。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-06T07:26:24.973

如果根据您的要求以不同的分辨率自动生成坐标，这可能对您有用。您需要做的就是将适当的 GeoJSON 加载到您的地图上。只需添加几行代码即可获得完整的答案，请参见[此处。](https://stackoverflow.com/a/49687202/6525083)

[![在此处输入图像描述](../Images/6e35c6830e481b63a01342f4af70ead5.png)](https://i.stack.imgur.com/JSNa2.png)

# html - 设计一个通过单击链接而不是表单按钮来完成注销功能的网页是否安全？

> ID：11076653
> 
> 赞同：3
> 
> 时间：2012-06-18T03:36:11.993
> 
> 标签：html, gmail, csrf, logout

我遇到过许多警告不要*使用链接来提供注销功能*的文章。他们都建议使用表单和按钮进行注销。

当我使用 firebug 检查 gmail 的注销元素的 html 时，我发现它是一个链接：

```
<a target="_top" role="button" id="gb_71" onclick="gbar.logger.il(9,{l:'o'})" href="?logout&amp;hl=en" class="gbqfbb">Sign out</a> 
```

有类似的`href`东西

```
https://mail.google.com/mail/ca/?logout&hl=en 
```

他们使用链接是因为`href`https 吗？这种用法有多安全？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T19:32:21.487

不鼓励开发人员使用链接而不是表单的原因是因为它使站点容易受到 CSRF（跨站点请求伪造）攻击。假设您有一个站点，并且注销 URL 是`example.org/?logout`. 如果您访问我的站点，并且我加载了该 URL，它将使您退出您在 example.org 上的当前会话。这似乎没有破坏性，但不得不继续登录是相当烦人的。

现在想象一下，你已经将它实现为一个表单......

```
<form action="?logout" method="POST">
  <input type="hidden" value="blahblah" name="key" alt="I am a random key!" />
  <input type="submit" value="Log out..." />
</form> 
```

的值`key`将在页面加载时随机生成。加载url 时`example.org?logout`，它会检查会话以确保随机密钥与表单提交的密钥相同。如果不相同，则用户可能不会注销。如果相同，他们可能会。

这种简单的方法可以阻止所描述的 CSRF 攻击。它简单而有效，真的没有理由不实施它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T19:39:35.840

使用 GET 注销用户没有什么不寻常的。无论如何，这是一个不好的做法。例如，如果您登录了 Gmail 帐户，请访问[此页面](http://jsbin.com/izusiy)以查看“结果”。而且，HTTP 或 HTTPS 无关紧要。

但是，这个技巧不适用于 Stackoverflow `http://stackoverflow.com/users/logout`。无论如何，更好的注销用户是使用 POST 请求或随机令牌：

```
http://site.com/logout?token=123456 
```

# javascript - 如何在firefox中检测keyevent

> ID：11076654
> 
> 赞同：0
> 
> 时间：2012-06-18T03:36:13.223
> 
> 标签：javascript, firefox

我用 javascript 编写了一个 web shell，但它在 firefox 中不起作用。但在 IE 和 Chrome 中，这很好。我发现在 Firefox 中我的脚本无法获取 keyevent。那么我该如何修复这个错误呢？非常感谢 ：）

壳牌：[http ://cdqzoi.com](http://cdqzoi.com)

脚本地址：[http](http://cdqzoi.com/console.js) ://cdqzoi.com/console.js 下面的代码是上面脚本的一部分，处理keyevent。

```
this.keydown=function(){
    key=event;
    keyN=event.keyCode?event.keyCode:event.which?event.which:event.charCode;
    if(keyN==0)return;
    if((keyN==8)||(keyN==116)||(key.ctrlKey && keyN==82)){
        if(keyN==8 & !lock){
            this.command = this.command.substr(0,this.command.length-1);
            document.getElementById("console").innerHTML=getPrefix(this.transmit)+this.command;
        }
        try{
            event.returnValue=false;
            event.keyCode=0;
        }catch(e){
            event.preventDefault();
        }
    }
    keyN=0;
}
this.keypress=function(){
    key=event;
    keyN=event.keyCode?event.keyCode:event.which?event.which:event.charCode;
    if(keyN==0)return;
    if(!lock){
        if(keyN==13){
            if(this.transmit==0){
                user=this.command;
                document.getElementById("_console").innerHTML+=document.getElementById("console").innerHTML+"<br />";
                document.getElementById("console").innerHTML='';
                this.transmit=1;
                this.st=1;
            }else
            if(this.transmit==1){
                this.st=0;
                pass=this.command;
                document.getElementById("_console").innerHTML+=document.getElementById("console").innerHTML+"<br />";
                document.getElementById("console").innerHTML="";
                con.login(user,pass);
                try{
                    event.returnValue=false;
                    event.keyCode=0;
                }catch(e){
                    event.preventDefault();
                }
                keyN=0;
                return;
            }else
            if(this.transmit==2){con.execute(this.command);}
            this.command='';
        }else if(keyN==8){
        }else{
            this.command=this.command+String.fromCharCode(keyN);
        }
        if(this.st==0)document.getElementById("console").innerHTML=getPrefix(this.transmit)+this.command;
        else document.getElementById("console").innerHTML=getPrefix(1);
    }
    try{
        event.returnValue=false;
        event.keyCode=0;
    }catch(e){
        event.preventDefault();
    }
    keyN=0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T03:58:39.197

像这样编写您的处理程序：

```
this.keypress = function(e) {
  var ev = window.event || e;
  // use ev from here onwards 
```

原因是 IE（显然，Chrome 也选择通过全局变量而不是函数参数传递事件数据）。

# vim - Vim 中的标记信息何时加载？

> ID：11076655
> 
> 赞同：0
> 
> 时间：2012-06-18T03:36:43.890
> 
> 标签：vim

我正在尝试通过编写一个小插件来使用符号功能显示标记来学习 vimscript。当我（从插件本身）调用插件中的函数时，它不会返回任何内容。但是，如果我在 Vim 打开后手动调用它，它会返回正确设置的标记列表。

我的问题是何时在 Vim 中提供有关标记的信息？是在加载插件之前还是之后？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T03:42:56.437

您应该键入`:help startup`以获得一些帮助。

vim`viminfo`之后加载`plugin`。

试试`autocmd`。

# go - 可重新配置的函数变量

> ID：11076656
> 
> 赞同：2
> 
> 时间：2012-06-18T03:37:08.870
> 
> 标签：go

我有兴趣在 Go 中出于测试原因重新分配工厂函数，以降低在想要模拟其中一种类型时在给定包中使用工厂函数的风险。

我见过人们将工厂函数作为参数传递给包含函数，并创建一个将工厂作为数据成员的结构。是否可以保留一个顶级函数变量并以某种方式在给定文件中用另一个实现覆盖一个实现？我已经尝试过以下方法：

```
type AirportFactory func (string, int, int) Airport

var makeAirport AirportFactory = func(n string, x int, y int) Airport {
    return airport{name: n, pos: Position{X: x, Y: y}}
}

makeAirport = func(n string, x int, y int) Airport {
    return airport{name:"default", pos:Position{X:0, Y:0}}
} 
```

但是当我构建代码时，6g 在最后一个作业的最后一行给了我以下错误： `non-declaration statement outside function body`

这使得函数类型的 s 看起来`var`是 const 的，至少在顶层是这样。有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T04:56:55.043

它们不是恒定的。您只是不能分配给函数外部已声明的变量。像这样的东西会起作用：

```
func changeAirport() {
    makeAirport = func(n string, x int, y int) Airport {
        return airport{name:"default", pos:Position{X:0, Y:0}}
    }
} 
```

就 go 而言，函数外部的变量赋值不会以任何特定顺序发生。因此，您只能执行一次。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T05:15:16.353

您可以使用 package [init](http://golang.org/ref/spec#Program_execution)函数来设置包变量的模拟值。例如，

```
package main

import "fmt"

var x = 1

// set mock values of variables
func mock() {
    x = 2
}

func init() {
    mock()
}

func main() {
    fmt.Println(x)
} 
```

输出：

```
2 
```

对于你的例子，

```
package main

import "fmt"

type Position struct {
    X int
    Y int
}
type Airport struct {
    name string
    pos  Position
}

type AirportFactory func(string, int, int) Airport

var makeAirport AirportFactory = func(n string, x int, y int) Airport {
    return Airport{name: n, pos: Position{X: x, Y: y}}
}

// set mock values of variables
func mock() {
    makeAirport = func(n string, x int, y int) Airport {
        return Airport{name: "default", pos: Position{X: 0, Y: 0}}
    }
}

func init() {
    mock()
}

func main() {
    fmt.Println(makeAirport("name", 1, 1))
} 
```

输出：

```
{default {0 0}} 
```

# websocket - 使用 Golang 的跨源 websockets

> ID：11076658
> 
> 赞同：2
> 
> 时间：2012-06-18T03:37:21.117
> 
> 标签：websocket, go

我正在开发一个相对简单的 PhoneGap 应用程序 (iOS)，它需要向 Go 服务器发出跨源 websocket 请求。我已经`$.support.cors = true; $.mobile.allowCrossDomainPages = true;`在我的应用程序中设置了任何网络活动。服务器提供一个简单的 HTML/JavaScript 页面，用于测试/诊断目的，并且一切正常 - websocket 连接正常，服务器提供正确的数据，这一切都很好。

在 iOS 模拟器上运行的 PhoneG 应用程序并非如此。在模拟器中，Safari 实际上可以访问我的测试/诊断页面。但是，PhoneG 应用程序超时。

我正在做更多的调查，但我怀疑这是一个简单的服务器配置问题，并且有人对 Go 和/或有福的 websockets 包有更多的了解，我想我会在调查的同时在这里问。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T08:47:58.380

CORS 不适用于 WebSocket。对于 WebSocket，有一个“origin”标头，浏览器必须用包含打开 WS 连接的 JS 的 HTML 的来源来填充该标头。非浏览器客户端可能会或可能不会填充该标题（并且可以用他们喜欢的任何内容填充它）。WS 服务器然后能够决定是否接受连接。

此外：我不知道当 HTML 来自本地文件系统时，PhoneGap 使用的 WebView 是否设置了原始标头。我会尝试窃听流量并查看。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T06:06:45.213

PhoneGAP 应用程序中没有跨域问题（请记住，此策略是在客户端强制执行的，并且服务器的标头仅给出指示）。

问题可能在于您的握手，因为 PhoneGAP 本身不支持 websocket 握手。有一些开源项目在 PhoneGAP/iOS 中将它作为[这个](http://remysharp.com/2010/10/04/websockets-in-phonegap-projects/)项目引入（由于我不是 iOS 开发人员，所以没有经过我的测试）。

# php - 我该如何对齐？

> ID：11076659
> 
> 赞同：0
> 
> 时间：2012-06-18T03:37:37.497
> 
> 标签：php, gd

我正在寻找如何对齐文本（例如水平居中，如果太长也自动减小字体大小）。

从玩耍中，x = 0，y = 0并不总是绝对的左上角（？），不知道是什么原因造成的。不得不不断地将数字更改一个并刷新，这有点烦人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T03:41:43.200

一些函数将 x, y 定义为第一个字符的**基点**，而不是生成字符串的左上角。

换句话说，它与字符串的基线有关：[http](http://en.wikipedia.org/wiki/Baseline_(typography) ://en.wikipedia.org/wiki/Baseline_(typography )

要正确对齐 TTF 字体（您使用 TTF 字体吗？），您必须使用[http://www.php.net/imagettfbbox进行一些数学运算](http://www.php.net/imagettfbbox)

此函数为您提供生成字符串的范围。

# android - 我应该为安卓使用游戏引擎吗

> ID：11076664
> 
> 赞同：1
> 
> 时间：2012-06-18T03:38:24.443
> 
> 标签：android

我想知道，如果我要制作一个简单的基本鸟类射击游戏（鸟在上面飞，男孩从底部射击），那么我需要一个游戏引擎来开发安卓吗？我应该经历学习 AndEngine 的麻烦吗？或者我是否使用 SurfaceView/ 甚至动画来做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T04:50:31.677

你可以试试AndEngine。它比 SurfaceView 更好，因为 AndEngine 是一个游戏引擎。这里有所有类型的动画，它很容易让您获得更好的游戏体验，但我们必须在这里处理内存问题。

您也可以尝试使用 Cocos2D。开源游戏引擎列表是[GameEngines](http://ntt.cc/2011/05/08/8-open-source-android-game-engines.html)。尝试以适合您的游戏的方式进行思考。

[Cocos2d 教程](http://code.google.com/p/cocos2d-android/)

[AndEngine教程](http://jimmaru.wordpress.com/2011/09/28/andengine-simple-android-game-tutorial/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T03:43:09.430

你可以试试[谷歌的安卓新游戏引擎](https://developers.google.com/playn/)。

它很新，我不知道是否有任何现有游戏使用它，但它正在积极开发中，新功能经常出现。包括最近导出到 IOS 的功能，使其成为跨平台部署的选项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T06:12:52.667

这是另一个[游戏引擎列表，](http://forums.tigsource.com/index.php?topic=21471.0)但主要用于大型制作游戏。底部也有一个“开源”列表。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-25T19:20:38.360

另一个值得尝试的新的跨平台 Lua 引擎是 BatteryTech Engine。 [http://www.batterytechsdk.com](http://www.batterytechsdk.com)

免费试用支持Android、iOS、BB10、PC、Mac

许可证购买为您提供完整的源代码。

# android - 哪个 SDK 用于 Android 3.3？

> ID：11076667
> 
> 赞同：0
> 
> 时间：2012-06-18T03:39:09.167
> 
> 标签：android

如果我正在为运行 Android 3.3 的设备进行开发，我应该使用哪个 SDK？最接近的版本号是 3.2。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T03:47:35.407

您使用 3.2。如果 Android SDK 包含上一个版本的“新”功能，则它只有一个新版本。因此，您只需向下舍入到最近的 SDK。4.0.4 使用 4.0.3，2.3.7 使用 2.3.3，而 3.3 将使用 3.2。

但是请注意，没有发布 Android 3.3。查看[API 级别文档](http://developer.android.com/guide/appendix/api-levels.html)以获取有效版本的列表。（感谢**@uDaY**提供链接+信息。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T03:54:50.460

它不存在……也就是说，没有[Android 3.3](http://developer.android.com/guide/appendix/api-levels.html)。

# java - 以编程方式返回启动器 android

> ID：11076669
> 
> 赞同：1
> 
> 时间：2012-06-18T03:39:34.877
> 
> 标签：java, android, android-intent

我使用以下代码将我的应用程序设置为默认程序。按`home`键进入我的应用程序...

```
<action android:name="android.intent.action.MAIN" />
<category android:name="android.intent.category.DEFAULT" />
<category android:name="android.intent.category.LAUNCHER" />
<category android:name="android.intent.category.HOME" /> 
```

它还可以`DISABLE_KEYGUARD`直接启动到我的应用程序中，无需解锁手机。

如何以编程方式更改回默认启动器？意思是，我怎样才能回到安卓主屏幕？

我尝试使用`System.exit(0)`但它不起作用 - 它只是回到我的应用程序而不是 android 主屏幕。

* * *

以下是我的代码。它会自动回到我的APP。请告诉代码中的任何问题。

**TesthomeActivity.java**

```
public class TesthomeActivity extends Activity {
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    Button btn = (Button)findViewById(R.id.button1);
    btn.setOnTouchListener(exitappTouchListener);
}
OnTouchListener exitappTouchListener= new OnTouchListener() {
    @Override
    public boolean onTouch(View view, MotionEvent arg1) {
        // TODO Auto-generated method stub
        if(arg1.getAction() == MotionEvent.ACTION_DOWN){

        }
        if(arg1.getAction() == MotionEvent.ACTION_UP ){
            Intent i = new Intent();
              i.setAction(Intent.ACTION_MAIN);
              i.addCategory(Intent.CATEGORY_HOME);
              TesthomeActivity.this.startActivity(i); 
              finish(); 
            System.exit(0);
        }
        return false;
    }
};
} 
```

**启动接收器.java**

```
public class StartupReceiver extends BroadcastReceiver{

public void onReceive(Context context, Intent intent)
{

    Intent activityIntent = new Intent(context, TesthomeActivity.class);
    activityIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
    context.startActivity(activityIntent);
}

} 
```

**AndroidManifest.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
  package="com.inno.testhome"
  android:versionCode="1"
  android:versionName="1.0">
<uses-sdk android:minSdkVersion="10" />

<application android:icon="@drawable/icon" android:label="@string/app_name" android:theme="@android:style/Theme.Black.NoTitleBar.Fullscreen">
    <activity android:name=".TesthomeActivity"
              android:label="@string/app_name">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.DEFAULT" />
            <category android:name="android.intent.category.LAUNCHER" />
            <category android:name="android.intent.category.HOME" />
        </intent-filter>
    </activity>
    <receiver android:name="StartupReceiver">
        <intent-filter>
            <action android:name="android.intent.action.BOOT_COMPLETED" />
        </intent-filter>
    </receiver>
</application>
</manifest> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T03:59:46.163

阅读此内容[退出应用程序是否令人不悦？](https://stackoverflow.com/questions/2033914/quitting-an-application-is-that-frowned-upon)

或使用这个

```
Intent i = new Intent();
  i.setAction(Intent.ACTION_MAIN);
  i.addCategory(Intent.CATEGORY_HOME);
  yourActivity.this.startActivity(i); 
  finish(); 
```

我想这会对你有所帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-04T11:06:58.127

您需要查询`PackageManager`响应 Home 意图的应用程序。

然后，您可以像开始任何其他活动一样启动正确的活动。请务必在处理之前从列表中删除您的应用...

有关这方面的有用信息，我建议 @Commonsware 的 Launchalot 示例应用程序，它显示了如何枚举响应特定意图的应用程序列表。

在这里查看他[在 github 上](https://github.com/commonsguy/cw-advandroid/tree/master/Introspection/Launchalot)的代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T10:32:22.683

如果您的应用设置为默认启动器，Android 系统会在您的应用退出时自动重启。它不再有任何原始主屏幕的概念——就操作系统而言，您的应用现在*就是*主屏幕。

这就是为什么您无法通过退出应用程序返回到默认启动器的原因。获得所需结果的唯一方法是[更改​​默认启动器](https://stackoverflow.com/q/3836215/663469)。

# django - 没有名为 theme.urls 的模块

> ID：11076671
> 
> 赞同：0
> 
> 时间：2012-06-18T03:40:00.387
> 
> 标签：django, heroku

我刚刚将我的第一个 django 应用程序部署到 Heroku 平台。我基本上遵循[了本教程](https://devcenter.heroku.com/articles/django)，只是我没有创建一个虚拟的`django-admin.py startproject hellodjango .`django 应用程序，而是使用了我目前在我的 Windows PC 上运行的应用程序。在 heroku 上部署应用程序并运行服务器时，我得到一个`No module named theme.urls`.

这是追溯。有任何想法吗？

```
Environment:

Request Method: GET
Request URL: http://severe-winter-1546.herokuapp.com/

Django Version: 1.4
Python Version: 2.7.2
Installed Applications:
('django.contrib.auth',
 'django.contrib.contenttypes',
 'django.contrib.sessions',
 'django.contrib.sites',
 'django.contrib.messages',
 'django.contrib.staticfiles',
 'django.contrib.admin',
 'django.contrib.admindocs',
 'themes',
 'haystack')
Installed Middleware:
('django.middleware.common.CommonMiddleware',
 'django.contrib.sessions.middleware.SessionMiddleware',
 'django.middleware.csrf.CsrfViewMiddleware',
 'django.contrib.auth.middleware.AuthenticationMiddleware',
 'django.contrib.messages.middleware.MessageMiddleware')

Traceback:
File "/app/.heroku/venv/lib/python2.7/site-packages/django/core/handlers/base.py" in get_response
  101\.                             request.path_info)
File "/app/.heroku/venv/lib/python2.7/site-packages/django/core/urlresolvers.py" in resolve
  298\.             for pattern in self.url_patterns:
File "/app/.heroku/venv/lib/python2.7/site-packages/django/core/urlresolvers.py" in url_patterns
  328\.         patterns = getattr(self.urlconf_module, "urlpatterns", self.urlconf_module)
File "/app/.heroku/venv/lib/python2.7/site-packages/django/core/urlresolvers.py" in urlconf_module
  323\.             self._urlconf_module = import_module(self.urlconf_name)
File "/app/.heroku/venv/lib/python2.7/site-packages/django/utils/importlib.py" in import_module
  35\.     __import__(name)

Exception Type: ImportError at /
Exception Value: No module named theme.urls 
```

还有我的 settings.py

```
# Django settings for theme project.
import os
import dj_database_url
ROOT_PATH = os.path.dirname(__file__)
DEBUG = True
TEMPLATE_DEBUG = DEBUG

ADMINS = (
    # ('Your Name', 'your_email@example.com'),
)

MANAGERS = ADMINS

DATABASES = {'default': dj_database_url.config(default='postgres://localhost')}

LANGUAGE_CODE = 'en-us'

SITE_ID = 1

USE_I18N = True

USE_L10N = True

MEDIA_ROOT = os.path.join(ROOT_PATH, 'files')

MEDIA_URL = 'http://127.0.0.1:8000/files/'

STATIC_ROOT = ''

STATIC_URL = '/static/'

ADMIN_MEDIA_PREFIX = '/static/admin/'

STATICFILES_DIRS = (
)

STATICFILES_FINDERS = (
    'django.contrib.staticfiles.finders.FileSystemFinder',
    'django.contrib.staticfiles.finders.AppDirectoriesFinder',
#    'django.contrib.staticfiles.finders.DefaultStorageFinder',
)

TEMPLATE_LOADERS = (
    'django.template.loaders.filesystem.Loader',
    'django.template.loaders.app_directories.Loader',
#     'django.template.loaders.eggs.Loader',
)

MIDDLEWARE_CLASSES = (
    'django.middleware.common.CommonMiddleware',
    'django.contrib.sessions.middleware.SessionMiddleware',
    'django.middleware.csrf.CsrfViewMiddleware',
    'django.contrib.auth.middleware.AuthenticationMiddleware',
    'django.contrib.messages.middleware.MessageMiddleware',
)

ROOT_URLCONF = 'theme.urls'

TEMPLATE_DIRS = (
'C:/Users/leonsas/Desktop/dj/theme/templates',
    # Put strings here, like "/home/html/django_templates" or "C:/www/django/templates".
    # Always use forward slashes, even on Windows.
    # Don't forget to use absolute paths, not relative paths.
)

INSTALLED_APPS = (
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.sites',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    #'registration',
    # Uncomment the next line to enable the admin:
    'django.contrib.admin',
    # Uncomment the next line to enable admin documentation:
    'django.contrib.admindocs',
    'themes',
    'haystack',

)
#required for haystack. Using Whoosh
HAYSTACK_WHOOSH_PATH = 'C:/Users/leonsas/Desktop/dj/theme/files/Whoosh/index'
HAYSTACK_SEARCH_ENGINE = 'whoosh'
HAYSTACK_SITECONF = 'theme.search_sites'

LOGGING = {
    'version': 1,
    'disable_existing_loggers': False,
    'handlers': {
        'mail_admins': {
            'level': 'ERROR',
            'class': 'django.utils.log.AdminEmailHandler'
        }
    },
    'loggers': {
        'django.request': {
            'handlers': ['mail_admins'],
            'level': 'ERROR',
            'propagate': True,
        },
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T03:57:49.660

主项目的 urls.py 设置错误，这是我可以从异常跟踪中推断出来的。请在主项目 urls.py 中使用下面提到的类似内容。

```
(r'^home/', include('MAINPROJECT_NAME.APPNAME.urls')) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T06:01:42.970

所以我发现错误是heroku在名为“app”而不是“主题”的文件夹中创建了应用程序。我尝试使用 heroku CLI 重命名应用程序

```
heroku apps:rename theme 
```

但由于某种原因我仍然无法弄清楚，它给出了一个`You do not have access to appname`错误。因此，我只是将代码中包含 theme.foo 的每一部分更改为 app.foo。它奏效了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T06:07:09.520

在我看来，你好像把什么东西命名错了。查看 ROOT_URLCONF 和 INSTALLED_APPS：

```
ROOT_URLCONF = 'theme.urls'
INSTALLED_APPS = (
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.sites',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    #'registration',
    # Uncomment the next line to enable the admin:
    'django.contrib.admin',
    # Uncomment the next line to enable admin documentation:
    'django.contrib.admindocs',
    'themes',
    'haystack',
) 
```

您的 INSTALLED_APPS`themes`用 . 表示`s`，但您的 ROOT_URLCONF 表示`theme`没有`s`. 尝试让它们同步..

# android - 是否可以监听物理 Android 后退按钮的触摸？

> ID：11076681
> 
> 赞同：6
> 
> 时间：2012-06-18T03:42:16.390
> 
> 标签：android, trigger.io, forge

我在文档中找不到它，是否有模块或其他方式从 android 后退按钮捕获事件？如果不是，那将是一个不错且可能快速添加的模块。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-18T10:09:00.477

否：后退按钮只会将您弹出历史堆栈中的一项。您可以通过更改哈希片段来跟踪您的应用程序的导航（Backbone.js 等框架可以自动为您执行此操作）。

我们采用这种方法的原因是 iOS 上没有硬件后退按钮，因此我们对设置人们在他们的应用程序中依赖它持谨慎态度，只是因为该应用程序在该平台上被彻底破坏：我们的目标是目前完整性的一致性。

**更新**：由于大众需求，我们添加了对控制 Android 上的后退按钮行为的支持：http: [//docs.trigger.io/en/v1.4/modules/event.html#backpressed-addlistener](http://docs.trigger.io/en/v1.4/modules/event.html#backpressed-addlistener) -`backPressed.preventDefault`也请注意。

事件处理程序被传递一个函数，该函数在被调用时会关闭应用程序，因此您可以使用如下代码：

```
forge.event.backPressed.addListener(function (close) {
  if (atHomeScreen) {
    close();
  }
} 
```

# javascript - iOS 获取过去的登录表单。

> ID：11076682
> 
> 赞同：1
> 
> 时间：2012-06-18T03:42:18.950
> 
> 标签：javascript, html, ios, ios5, uiwebview

我的应用程序有以下代码。

```
- (void)webViewDidFinishLoad:(UIWebView *)webView
{
    //Set the values
    NSString* firstValue = @"guest";
    NSString* secondValue = @"guest";
    // write javascript code in a string
    NSString* javaScriptString = @"document.getElementById('Login1_UserName').value=%@;"
    "document.getElementById('Login1_Password').value=%@;"
    "document.forms['form1'].submit();";

    // insert string values into javascript
    javaScriptString = [NSString stringWithFormat: javaScriptString, firstValue, secondValue];

    // run javascript in webview:
    [webView stringByEvaluatingJavaScriptFromString: javaScriptString];
}

- (void)launchWebPageWithOptions
{    
    NSString *urlString = @"http://demo.leadtools.com/MedicalViewer/default.aspx";
    NSURL *url = [NSURL URLWithString:urlString];
    NSURLRequest *requestObject = [NSURLRequest requestWithURL:url];
    [iOSWebView loadRequest:requestObject];
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.

    [self launchWebPageWithOptions];
} 
```

出于某种原因，我无法使用 javascript 调用执行自动登录。我不是 JS 专家，所以如果您在我的 javaScriptString 中看到任何错误，请告诉我，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T05:26:34.173

首先，更改要引用的用户和密码格式值：

```
NSString* javaScriptString = @"document.getElementById('Login1_UserName').value='%@';"
    "document.getElementById('Login1_Password').value='%@';"
    "document.forms['form1'].submit();"; 
```

请注意，我在这两种情况下都更改`value=%@`为`value='%@'`。这将正确填写输入框。

接下来，`click()`在登录按钮上调用该函数，而不是`submit()`在表单上调用：

```
NSString* javaScriptString = @"document.getElementById('Login1_UserName').value='%@';"
    "document.getElementById('Login1_Password').value='%@';"
    "document.getElementById('Login1_LoginButton').click()"; 
```

这将允许`onclick`执行为登录按钮指定的 javascript。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T05:28:38.210

您缺少字符串引号。

试试这个：

```
NSString* javaScriptString = @"document.getElementById('Login1_UserName').value='%@';"
"document.getElementById('Login1_Password').value='%@';"
"document.forms['form1'].submit();"; 
```

# linux - linux中的“低内存”是什么意思

> ID：11076687
> 
> 赞同：11
> 
> 时间：2012-06-18T03:42:56.997
> 
> 标签：linux, embedded-linux

嗨，我是韩国人，对“引导程序首先将自身复制到固定的高内存地址以释放操作系统的低内存”感到困惑。

我通过谷歌搜索发现内存不足的情况是，这是 DOS 系统中的第一个 640K 内存。这是否意味着所有操作系统系统（如内核）都进入低内存（640K）？？？？

感谢您阅读本文。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T03:48:53.673

此链接可能会有所帮助：[虚拟内存](http://lwn.net/Articles/75174/)

主要是，

> 在 32 位系统上，内存现在分为“高”和“低”内存。低位内存继续直接映射到内核的地址空间，因此始终可以通过内核空间指针访问。相反，高内存没有直接的内核映射。当内核需要处理高内存中的一个页面时，它必须先显式地建立一个特殊的页表来将它映射到内核的地址空间中。此操作可能很昂贵，并且在任何特定时间可以映射的高内存页的数量是有限的。

unix.stackexchange 上的这个问题更深入一点：[High and low memory](https://unix.stackexchange.com/questions/4929/what-are-high-memory-and-low-memory-on-linux)

# javascript - 选择下拉列表时如何调用xsl的模板函数

> ID：11076689
> 
> 赞同：1
> 
> 时间：2012-06-18T03:43:08.930
> 
> 标签：javascript, html, xml, xslt

当用户在下拉列表中选择一个选项时，我试图在 XSl 代码中调用模板函数

```
<xsl:element name="select">
<xsl:attribute name="id">
<xsl:value-of select="$l" />
</xsl:attribute>

<xsl:attribute name="onchange">
<xsl:value-of select="TEMPLATE SHOULD BE CALLED HERE"/>
</xsl:attribute>

    <option value="1">Select</option>
    <option value="2">Daily</option>
    <option value="3">Weekly</option>
    <option value="4">Monthly</option>
    <option value="5">RunOnStartup</option> 
```

谁能告诉我调用模板的语法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T07:42:55.463

使用在浏览器中实现的 XSLT 1.0，XSLT 样式表生成 HTML，并且所有事件处理都必须在作为 HTML 的一部分生成的 Javascript 代码中完成。如果要从该 Javascript 回调 XSLT，则必须使用转换 API 来启动新的转换。

如果您使用在 Saxon-CE 中实现的 XSLT 2.0，这种情况会发生变化。Saxon-CE 样式表可以包含响应用户事件的代码。您不需要为 select 元素生成“onchange”属性。您只需要编写这样的模板规则：

```
<xsl:template match="select" mode="ixsl:onchange">
  ... code goes here ...
</xsl:template> 
```

当 HTML 中的“select”元素发生“onchange”事件时，模板将自动执行。

Saxon-CE 的更多信息（和示例）可以在这里找到：

[http://www.saxonica.com/ce/download.xml](http://www.saxonica.com/ce/download.xml)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T05:07:27.020

xsl:template 元素的语法可以在这里找到： http: [//www.w3schools.com/xsl/el_template.asp](http://www.w3schools.com/xsl/el_template.asp)

```
<xsl:template
name="name"
match="pattern"
mode="mode"
priority="number">

  <!-- Content:(<xsl:param>*,template) -->

</xsl:template> 
```

* * *

```
name:   name    Optional. Specifies a name for the template.
Note: If this attribute is omitted there must be a match attribute

match   pattern Optional. The match pattern for the template.
Note: If this attribute is omitted there must be a name attribute

mode:   mode    Optional. Specifies a mode for this template
priority    number  Optional. A number which indicates the numeric priority of the template 
```

# html - 图片未在 IE 9 中显示

> ID：11076691
> 
> 赞同：2
> 
> 时间：2012-06-18T03:43:13.910
> 
> 标签：html, css, internet-explorer

好的，所以我几乎完成了创建我的第一个网站。但是，它似乎在 IE 中运行不佳。它在 Firefox 和 Chrome 中运行良好。背景加载但主要问题是图片链接似乎已损坏？任何帮助将不胜感激。

我的网站：ngkevin-art.com

CSS：

```
body {
    width:auto;
    height:auto;
    background-image:url(images/bg_main2.png);
    background-color:#2d2d2d;
    background-repeat:no-repeat;
    background-position:center;
    margin-top:30px;
}

#container {
    width:1280px;
    height:960px;
    margin-left:auto;
    margin-right:auto;

}

#wrapContact {

    width: 520px;
    height: 100px;
    margin-left:735px;
    margin-top: 10px;
    clear: both;
}

#linked {
    float:left; 
    margin-top:35px;
    width: 175px;   
}

#facebook {
    float:left;
    width: 200px;
    margin-left:32px;
    margin-top:25px;

}

#email {
    float:left;
    width:75px;
    margin-left:35px;
    margin-top:20px;

}

#wrapNav {

    width: 475px;
    margin-left:750px;
    margin-top:60px;
}

#wrapCharacters {

    width: 960px;
    z-index: 3;
    margin: 130px auto auto 75px;
    float:left;
}

.turntable {
    margin: .5% auto auto auto;

}

#zanza {

    float:left;
}

#titan {

    float:left;
    margin-left: 10px;
}

#rockBeast {

    float:left;
    margin-left: 10px;
} 
```

HTML：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Kevin Ng Art Portfolio</title>
<script type="text/javascript"
src="http://code.jquery.com/jquery-latest.min.js" charset="utf-8">
</script>
<link rel="stylesheet" type="text/css" href="default3.css"/>
<script type="text/javascript" src="js/jquery-1.7.2.min.js"></script>
<script type="text/javascript" src="js/jquery-ui-1.8.18.custom.min.js"></script>
<script type="text/javascript" src="js/jquery.smooth-scroll.min.js"></script>
<script type="text/javascript" src="js/lightbox.js"></script>
<link href="lightbox.css" rel="stylesheet" />

</head>

<body>

<div id="container">

        <div id="wrapContact">
            <div id="linked">
                <a href="http://www.linkedin.com/pub/kevin-ng/25/558/75b"> 
                <img src="images/logo_linked_large.png" width="auto" height="auto" border="0" alt="linkedin_logo" /> </a>
            </div>

            <div id="facebook">
                <a href="http://www.facebook.com/profile.php?id=1309131548"> 
                <img src="images/logo_fb_large.png" width="auto" height="auto" border="0" alt="facebook_logo" /> </a>
            </div>

            <div id="email">
                <a href="mailto: ngkevin.3dartist@gmail.com"> 
                <img src="images/gmail.png" width="auto" height="auto" border="0" alt="email_icon" /> </a>
            </div>
        </div> <!-- End "wrapContact"> -->

        <div id="wrapNav">

            <a href="index.html">                           
            <img src="images/bg_tab_main.png" width="auto" height="auto" border="0" alt="Main" /> </a>

            <a href="demo.html">                            
            <img src="images/bg_tab_demo.png" width="auto" height="auto" border="0" alt="Demo" /> </a>

            <a href="about.html">                           
            <img src="images/bg_tab_about.png" width="auto" height="auto" border="0" alt="About" /> </a>

        </div> 
        <!-- End "wrapNav"> -->  

        <div id="wrapAbout">

            <div id="picture">
                <img src="images/picture.jpg" width="auto" height="auto" alt="picture" />
                <div id="text2">
                    <h2> Me in the middle left, my buddies, Jordan Gabriel on the left and Edmund Zhu on the right,
                        and finally, Epic Games VIP, Cliff Bleszinski! Taken at GDC 2010\. </h2>
                </div>
            </div>

            <div class="text">        
                <h1> Resume: <br/>
                <br/> Email: <br/> <br/>
                <br/> About Me:</h1>            
            </div>

            <div class="text3">
                <h1> <a href="resume/Kevin Ng Resume2.doc"> Click Here </a>
                <br/> <br/> <a href="ngkevin.3dartist@gmail.com"> ngkevin.3dartist@gmail.com </a> <br/> 
                <br/> <br/> <font size="4"> 
                    My desire to be in the game development industry is to work with other individuals that take pride in creating a game, 
                    something that can be enjoyed by a multitude of people. There is nothing I would like better than to lend my talents and 
                    artistic skills for that purpose. <br/> <br/>

                    I believe the key to creating memorable game art, whether it be characters or environments, is the story. 
                    Just like reading a good book or watching a thrilling movie, I loved to be immersed in the world of the game. As a result, 
                    I had an affinity to Role-Playing Games. Classic games of my generation such as Chrono Trigger, Final Fantasy, and Zelda 
                    showed me a world of endless imagination.  <br/> <br/>

                    The characters which are the focal point of the story, their goals and motivations, their trials and tribulations, 
                    their victories and defeats... These are the things I think about constantly when I look at them. 
                    A character without depth doesn't exist, but if they do, I can only imagine how boring that would be.                     
                </font></h1>
            </div>

        </div>

    </div><!-- End "container" -->

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T04:01:25.670

这是导致问题的图像上的宽度/高度属性。您将宽度和高度设置为“自动”。设置明确的宽度/高度：

```
<img src="zanza/zanza_portrait_top.png" width="179" height="198" border="0" alt="zanza"> 
```

或删除宽度和高度属性：

```
<img src="zanza/zanza_portrait_top.png" border="0" alt="zanza"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T03:56:08.900

IE 搞乱了图像的宽度和高度。很抱歉，我帮不上忙，但是删除每个图像的高度和宽度元素会使图像显示给我。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T04:00:59.633

`auto`有关CSS3 中的属性，请参阅此链接。基本上，该版本不支持它，因此最好明确设置它或不使用该属性。

[关联](https://stackoverflow.com/questions/8610077/height-auto-in-internet-explorer-8-and-below)

# java - 春季远程映射网址

> ID：11076692
> 
> 赞同：3
> 
> 时间：2012-06-18T03:43:51.007
> 
> 标签：java, spring, spring-mvc, spring-remoting

我已经按照教程进行了春季远程处理，特别是在`HttpInvokerServiceExporter`设置客户端和服务器（factorybean）时没有问题。

问题是，我注意到使用 Spring MVC，每个接口都映射到一个特定的 URL

```
<bean id="urlMapping" class="org.springframework.web.servlet.handler.SimpleUrlHandlerMapping">
        <property name="mappings">
            <props>
                <prop key="hello.htm">test_service</prop>
            </props>
        </property>
    </bean>

    <!-- *********************exposed web services*************************--> 
    <bean name="test_service" class="org.springframework.remoting.httpinvoker.HttpInvokerServiceExporter">
        <property name="serviceInterface" value="foo.webservices.HelloServiceInterface" />
        <property name="service">
            <ref bean="helloService"></ref>
        </property> 
```

问题是，如果我的服务接口中有多个方法，是否可以将这些接口方法中的每一个映射到 URL 本身？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-23T18:16:49.057

背后的想法`HTTPInvokerServiceExporter`是提供一个端点来接收删除方法调用。

在**服务器**端，很容易配置 a `RemoteExporter`，声明要公开的接口并将其关联到将处理调用的真实 bean。

在**客户端**上，必须配置`RemoteAcessor`基本上需要在服务器端访问的接口。

通过 HTTP 的实现可以使用服务器端的[HttpInvokerServiceExporter](http://static.springsource.org/spring/docs/2.5.x/api/org/springframework/remoting/httpinvoker/HttpInvokerServiceExporter.html)来完成，如下例所示：

服务接口：

* * *

```
package foo.bar.services;

public interface MyService {

    public int sum(int num1, int num2);

} 
```

对于此服务，您将有一个实现（比方说`foo.bar.services.DefaultMyService`）。

spring 上下文的说明和配置如下所示：

* * *

```
<bean name="myService" class="foo.bar.DefaultMyService" />
<bean name="/myService" class="org.springframework.remoting.httpinvoker.HttpInvokerServiceExporter">
  <property name="service" ref="myService"/>
  <property name="serviceInterface" value="foo.bar.MyService"/>
</bean> 
```

使用此配置，我只是打算在最简单的情况下，在由(bean name)映射的 URL 上的接口`MyService`下公开我的实现的实例，除了将 URL 映射到具有 URL 值的 bean 之外什么都不做（本例）。`foo.bar.MyService``/myService``BeanNameUrlHandlerMapping``/myService`

在客户端（消费者），您将配置一个 bean，仅声明您希望远程端公开的接口。对于我们的服务将是这样的：

```
<bean id="httpInvokerProxy" class="org.springframework.remoting.httpinvoker.HttpInvokerProxyFactoryBean">
  <property name="serviceUrl" value="http://foo.bar.org/springSample/myService"/>
  <property name="serviceInterface" value="foo.bar.MyService"/>
</bean> 
```

在 spring 在客户端实例化 bean 的那一刻，代理被实例化，然后每个方法调用都将被序列化并通过 HTTP 发送到端点（在这种情况下`http://foo.bar.org/springSample/myService`）。在服务器端，这个请求被反序列化和解释，即调用方法暴露的真实服务（在我们的例子中为 DefaultMyService）。该服务将返回一些将被序列化并作为结果给客户端执行的 HTTP 请求的内容。客户端将接收它并反序列化它并将其返回给原始方法调用器.

如您所见（并从 Spring 文档中获得）：

*服务器端将*

> 反序列化远程调用对象并序列化远程调用结果对象。像 RMI 一样使用 Java 序列化，但提供与 Caucho 基于 HTTP 的 Hessian 和 Burlap 协议相同的易于设置。

*客户端将*

> 序列化远程调用对象和反序列化远程调用结果对象。像 RMI 一样使用 Java 序列化，但提供与 Caucho 基于 HTTP 的 Hessian 和 Burlap 协议相同的易于设置。

在这种情况下，与 Spring Remoting 一起使用的序列化是 Java 序列化，这意味着 HTTP 请求包含一个包含序列化对象的实体主体（请记住，在这种情况下，JVM 版本和类版本需要兼容）。

展示是作为一个整体完成的，您无法将它分开`URL`，为该接口的每个方法都提供一个。因此，使用 Spring MVC 并创建一个控制器（`@Controller`）会更容易为您在接口上将其注释为`@RequestMapping`（使用所需 URL）的每个方法实现一个方法，并按如下示例调用服务上的方法：

控制器示例

* * *

```
package foo.bar;

import foo.bar.service.MyService;

@Controller
public class MyService {
    @Autowired
    private MyService myService;

    @RequestMapping("/sum/{num1}/{num2}")
    public int sum(@PathVariable("num1") int num1, @PathVariable("num2") int num2) {
        return myService.sum(num1, num2);
    }

} 
```

使用上下文配置

```
<context:component-scan base-package="foo.bar"/> 
```

它会自动映射在foo.bar 和包下找到的类，这意味着实现`Service`（`DefaultMyService``@Service``@Autowired`

但这将通过 REST 接口公开您的服务，这意味着它将处理可以由其他消费者（如 PHP 消费者）完成的 HTTP 普通请求（这不能用 Spring Remoting 完成，因为它使用纯 Java 序列化）。

如果您的客户端是 Java，您可以明确地使用 Remoting 并将您的服务作为一个整体公开，如果不是，使用 Spring MVC 的 REST 实现是一个很好的解决方案。

弹簧文档可以在[这里找到](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T06:52:24.033

我真的建议使用 @Controller 注释定义你的控制器。在[Spring 文档](http://static.springsource.org/spring/docs/2.5.x/reference/mvc.html#mvc-annotation)中，首先将组件扫描添加到 Spring 配置中。

```
<context:component-scan base-package="your.package.path"/> 
```

然后，在一个类中，比如 your.package.path.WhateverController，注释该类：

```
@Controller
WhateverController 
```

并使用 @RequestMapping 注释您的方法：

```
@RequestMapping(value = "/helloWorld")
public ModelAndView helloWorld() {
...
}

@RequestMapping(value = "/project/{projectId}")
public ModelAndView helloWorld(@PathVariable String projectId) {
...
} 
```

就是这样，每个控制器有多个映射。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T15:53:06.537

我认为您需要先告诉我们您要做什么。如果您将服务暴露给通用 Web 客户端，REST 或 SOAP 将是更好的选择；如果您将服务暴露给另一个应用程序中的另一个 Spring bean，那么 Spring Remoting 可能就足够了。

您的 spring 配置文件中的“exposed web services”注释似乎不清楚您的目的。

当你向远程客户端公开一个服务时，你总是需要提供一个契约让远程客户端知道什么是可能的。REST 使用 URL 公开该合约；SOAP 使用 WSDL 公开该契约；而 Spring Remoting 只是直接为客户端提供了 java 接口中的契约，因此客户端可以将该接口注入到自己的 bean 中，并像本地定义的 bean 一样使用它。

在您提到将方法映射到 URL 的问题中，Spring Remoting 不能这样做，因为它暴露了接口；你想做的事情对我来说听起来很 REST。我同意@stevebrown，使用映射控制器公开您的服务是一种好方法。

# javascript - Javascript 的 MVC 模式的最佳示例？

> ID：11076695
> 
> 赞同：3
> 
> 时间：2012-06-18T03:44:18.870
> 
> 标签：javascript, jquery, model-view-controller, user-interface, backbone.js

好的，我来自 UI 设计背景，对 jQuery 有一些编程经验。然而，我所做的大部分工作是以线性方式改变 UI，从来没有这样的模式。我知道 OOP，课程，...

我需要学习用 Javascript 学习 MVC 模式。我的团队正在挑选backbone.js。所以我什至需要学习如何围绕 MVC 构建事物。我可以阅读 webbone.js 的用法。

但我的问题是：是否有网站或书籍展示了一些简单的 MVC 示例？例如，如果我需要构建一个简单的日历、待办事项列表、带文本的幻灯片等。模型、视图和控制器是什么？每个人的工作是什么？有哪些不同的结构方式？哪些方法是你不应该做的？...

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T03:50:40.330

Backbone.js 在该网站上有一个待办事项列表示例，详细说明了如何使用[此处](http://backbonejs.org/#examples)的一些功能。javascript 中的 MVC 将涉及向服务器查询数据然后显示它。

MVC 中的模型是接收内容的应用程序的一部分，因此在这种情况下，它将以 JSON、XML 或任何您喜欢的格式从服务器接收数据。

MVC 中的视图是应用程序的一部分，它显示通过模型接收的内容。在这种情况下，它只是以应用程序特定格式显示的模型中的数据 HTML/CSS

MVC 中的控制器是应用程序中处理应用程序逻辑的部分。在这种情况下，它将是按钮的所有事件处理程序所链接的内容，并将控制何时激活将数据从模型加载到视图的功能。虽然它不是特定于主干.js。[Cake php 在这里](http://book.cakephp.org/2.0/en/cakephp-overview/understanding-model-view-controller.html)有一个关于 MVC 的很好的教程。

# sharepoint - SharePoint 2007 SPListItem.File.TimeLastModified 返回错误的日期

> ID：11076701
> 
> 赞同：0
> 
> 时间：2012-06-18T03:46:03.307
> 
> 标签：sharepoint

在 SharePoint 2007 中，当我将文档保存到文档库时，已修改下的列表视图中显示的值为：

```
18/6/2012 13:06 
```

但是，当我以编程方式访问我认为是 SPListItem.File.TimeLastModified 的字段时，它返回：

```
18/6/2012 3:06:43 AM 
```

这意味着 1 已被截断，因此无论读取值如何，都将下午 1 点变成了凌晨 3 点。

该网站和网站都继承了正确的时区。我应该怎么做才能使 TimeLastModified 显示正确的时间？或者这有可能吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T20:03:44.430

该[`TimeLastModified`](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.spfile.timelastmodified.aspx)属性始终以 UTC 格式返回值。SP 页面上显示的日期/时间值通常会根据当前用户的文化转换为时区。在用户的时区中显示所有内容，但在内部以 UTC 格式保存值是一种很好的做法。

如果要将 UTC 值转换为当前用户的时区，然后在 UI 中打印，可以使用以下代码：

```
SPFile file = ...;
SPWeb web = ...; // SPContext.Current.Web or file.Item.ParentList.ParentWeb or ...
DateTime time = UTCToWebTime(file.TimeLastModified, web);
string text = FormatWebTime(time, web);

DateTime UTCToWebTime(DateTime utcTime, SPWeb web) {
    SPTimeZone timeZone = web.RegionalSettings.TimeZone;
    DateTime localTime = timeZone.UTCToLocalTime(utcTime);
    return DateTime.SpecifyKind(localTime, DateTimeKind.Local);
}

// Uses SPRegionalSettings to be more accurate then value.ToString(web.Locale).
string FormatWebTime(DateTime value, SPWeb web) {
    SPRegionalSettings regionalSettings = web.RegionalSettings;
    DateOptions dateOptions = new DateOptions(
        regionalSettings.LocaleId.ToString(CultureInfo.InvariantCulture),
        (SPCalendarType) regionalSettings.CalendarType, null,
        regionalSettings.FirstDayOfWeek.ToString(CultureInfo.InvariantCulture),
        regionalSettings.AdjustHijriDays.ToString(CultureInfo.InvariantCulture),
        null, null));
    string timePattern = regionalSettings.Time24 ?
        dateOptions.TimePattern24Hour : dateOptions.TimePattern12Hour;
    DateTimeFormatInfo format = web.Locale.DateTimeFormat;
    return value.ToString(format.ShortDatePattern, format) + " " +
        value.ToString(timePattern, format);
} 
```

--- 费尔达

# c# - 如何通过分隔符拆分 dgv cellsContent 并再次加入它们？

> ID：11076702
> 
> 赞同：0
> 
> 时间：2012-06-18T03:46:04.860
> 
> 标签：c#, winforms, string, datagridview

我有两个 dgv 和两个按钮。
dgv1.rows[0].Cells[14].Value is (multiline):
r - red
wh - white
y - yellow
所以，分隔线不是“-”而是“-”（空格行间距）

btn1.Click 应该拆分此内容，以便每行转到单独的行（dgv2 不是多行），并且分隔符的左侧进入 Columns[0] 并且分隔符的右侧进入 Columns[1]：
r red
wh white
y yellow
gd gold //用户可以添加这一行或删除另一行（在 dgv2 中，不在 dgv1 中）

btn2.Click 应该再次加入此内容并重写 dgv1（使用相同的分隔符）有
什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T04:01:20.373

使用 Linq，您可以获取多行文本框的每一行并按空格分隔，`-`然后删除空行将为您提供项目列表。

```
var list = textBox1.Lines.Select(s => s.Split(" -".ToCharArray(), StringSplitOptions.RemoveEmptyEntries)).ToList(); 
```

如果你想再次加入他们，你可以使用字符串加入作为

```
var list2 = list.Select(s => string.Join(" - ", s)).ToList(); 
```

# xpages - 如何创建一个消息框来通知在 xpages 中成功保存？

> ID：11076704
> 
> 赞同：2
> 
> 时间：2012-06-18T03:46:19.390
> 
> 标签：xpages

我已将按钮设置为“提交”。如果保存成功，XPage 将设置为保持在同一页面上。如何创建消息框以通知用户保存成功？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T07:10:48.963

您可以考虑多种选择。msgbox 是最不可取的。您可以在表单顶部添加一条[信息消息](http://infolib.lotus.com/resources/oneui/2.1/docPublic/components/messages.htm)，该消息在几秒钟后消失或在更改时消失。当您设置 viewScope 变量（例如 viewScope.saveSuccess ）并为其设置可见性公式时，自定义控件将显示。它还将注册一个[事件侦听](http://dojotoolkit.org/documentation/tutorials/1.6/events/)器以在更改字段时隐藏。您还可以考虑重定向到不同的页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T07:13:48.590

这篇文章已经提出了一个类似的问题，即如何从服务器端调用客户端脚本，这可能很有用。

[SSJS 例程后的客户端消息如何？](https://stackoverflow.com/questions/9030678/client-message-after-ssjs-routine-how)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T07:32:37.733

*以下是我用来为错误消息和*信息消息（例如您所要求的内容）创建自定义控件的两个示例：

[http://openntf.org/XSnippets.nsf/snippet.xsp?id=ssjs-form-validation-that-triggers-errormessage-controls](http://openntf.org/XSnippets.nsf/snippet.xsp?id=ssjs-form-validation-that-triggers-errormessage-controls) [http://lotusnotus.com/lotusnotus_en.nsf/dx/xpages-tip-a -simple-cc-for-prompting-ssjs-messages-to-ui....htm](http://lotusnotus.com/lotusnotus_en.nsf/dx/xpages-tip-a-simple-cc-for-prompting-ssjs-messages-to-ui....htm)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-18T14:46:44.877

运行 ssjs 后调用 csjs 的最简单方法是在事件处理程序的 onComplete 事件中添加代码。onStart、onComplete 和 onError 事件在您的 ssjs 之前或之后运行客户端 js，但仅在部分页面刷新期间执行。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-01-08T21:31:26.510

最简单的方法是在 postSaveDocument 事件中添加这行代码（或您喜欢的 CSJS）：

```
view.postScript('alert("Document saved")'); 
```

# nuget - 命令行推送到私有 NuGet 库失败，并显示无法处理请求。'好的'

> ID：11076709
> 
> 赞同：8
> 
> 时间：2012-06-18T03:48:01.363
> 
> 标签：nuget, nuget-server

我已经使用此处的说明从 github.com/NuGet/NuGetGallery 设置了一个私有 NuGet 画廊：http://dotnet.dzone.com/news/how-set-local-nuget-gallery[画廊](http://dotnet.dzone.com/news/how-set-local-nuget-gallery)
工作正常，它允许用户使用 Web UI 登录和上传包，以及使用 nuget.exe 和 Visual Studio 插件检索包更新。但是，当我尝试使用 nuget.exe（1.8 版）像这样推送到库时：

> nuget.exe push myPackage.4.0.0.12.nupkg -Source "http://myServer/NuGetGallery/"

我得到：

> 处理请求失败。'好的'。
> .

通过 Web UI 上传工作正常，我很确定必须正确设置文件/目录权限。
不幸的是，无法处理请求并没有像它可能的那样有用的错误消息。
所以我不确定还有什么问题？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-18T03:49:49.743

当使用从 NuGet.exe (1.8) 到私有设置 NuGet 库的推送命令时，-Source 选项需要包含 api/v2/package 的完整路径，所以在我的例子中是：nuget.exe

> 推送 myPackage.4.0.0.12.nupkg -Source "http://myserver/NuGetGallery/api/v2/package"

我觉得这也可以通过 web.config 中的重写规则来解决，或者某处的 Route 可能不起作用，所以如果有人有更好的解决方案，那么我很想听听。

# java - GWT 会话单例

> ID：11076714
> 
> 赞同：0
> 
> 时间：2012-06-18T03:49:21.940
> 
> 标签：java, session, gwt, singleton

在 GWT 中，我想在包含会话配置的服务器上存储一个对象。它必须在服务器端。

我试图在我的 RPC 实现中创建对象的静态实例，但它似乎是一个真正的单例，并且所有用户都出现了相同的配置。知道我该如何解决这个问题吗？使用 RPC 将配置从客户端传递到服务器。我想将它存储在服务器上，直到客户端关闭他们的浏览器。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T03:59:20.140

没关系，我终于找到了我的谷歌搜索...

在 RPC 实现中：

放

```
 HttpSession httpSession = getThreadLocalRequest().getSession(true);  
    httpSession.setAttribute("connectionConfig", connectionConfig); 
```

得到

```
 HttpSession httpSession = getThreadLocalRequest().getSession(true);  
    ConnectionConfig config = (ConnectionConfig) httpSession.getAttribute("connectionConfig"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T04:03:13.540

我认为有很多方法可以做到这一点，这完全取决于你的应用程序。我认为您可以将对象直接存储为会话对象，这是最简单的方法，但如果您出于任何原因不想这样做，另一个建议是创建一个静态哈希图，并在其上放置对象并使用用户会话 ID 作为此哈希图的键。

# batch-file - 使用 .bat 重命名文件名？

> ID：11076715
> 
> 赞同：2
> 
> 时间：2012-06-18T03:49:30.567
> 
> 标签：batch-file, cmd, filenames

嘿。我需要你们帮助使用 .bat 文件重命名文件。我有多个文件需要在指定字符号后裁剪。例如，我想在第五个字符之后裁剪文件的名称，这样

```
filename.exe > filen.exe
anothername.exe > anoth.exe
absolutelydifferentname.exe > absol.exe 
```

而且，如果可能的话，我想知道如何做相反的事情。我的意思是，将某些字符保留在末尾，从文件名的开头裁剪。

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T04:31:39.287

如果要在批处理文件中执行此操作，则应执行以下操作：

```
@echo off

setlocal ENABLEDELAYEDEXPANSION

for %%i in (<Directory name here>\*) do (
  set filename=%%~ni
  ren "%%~i" "!filename:~0,5!%%~xi"
)

endlocal 
```

如果您希望更改用于构建最终文件名的字符数，请更改.`ren "%%~i" "!filename:~0,**5**!%%~xi"`

要获取最后 5 个字符，请尝试：`ren "%%~i" "!filename:~**-5**!%%~xi"`

对于*除*前 5 个字符之外的所有字符：`ren "%%~i" "!filename:~**5**!%%~xi"`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T11:16:49.227

如果任何文件名包含该字符，Iridium 解决方案将失败，因为如果值包含并启用延迟扩展，则扩展[将](https://stackoverflow.com/a/11076947/1012053)失败。这很容易通过在循环中打开和关闭延迟扩展来解决。`!``%%i``!`

通常不需要在顶部显式禁用延迟扩展。但是有可能在批处理文件的开头已经启用了延迟扩展，所以为了安全起见，我将其包括在内。

```
@echo off
setlocal disableDelayedExpansion
for %%F in ("<Directory name here>\*") do (
  set "full=%%F"
  set "name=%%~nF"
  set "ext=%%~xF"
  setlocal enableDelayedExpansion
  ren "!full!" "!name:~0,5!!ext!"
  endlocal
) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T04:00:45.653

以防万一这是一次性的，或者其他一些手动场景，看看 [CKRename](http://www.lustrecolor.com/Downloads/CKRename/)

# java - 对齐 JTextPane 并测量文本长度

> ID：11076723
> 
> 赞同：1
> 
> 时间：2012-06-18T03:50:20.460
> 
> 标签：java, swing, text, jtextpane, tabular

我正在尝试用两列制作 JTextPane，它们都像这样向左对齐：

```
A 栏： B 栏：
阿尔法阿尔法
测试版 测试版
伽马伽马

```

无论如何在 JTextPane 上可以做到这一点，如果没有，我可以用它做什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T14:45:37.760

您可以简单地使用制表来创建列“可见性”：

```
 JTextPane pane = new JTextPane ();
    pane.setText ( "Column A:\tColumn B:\n" +
            "Alpha\tAlpha\n" +
            "Beta\tBeta\n" +
            "Gama\tGamma" ); 
```

在某些情况下，一个“\t”可能不足以创建相等的间距（例如，如果您将在第一列中有一些长文本）。

无论如何，如果您需要类似表的结构，最好选择使用 JTable。

# java - 将对象输出到文件

> ID：11076725
> 
> 赞同：0
> 
> 时间：2012-06-18T03:50:43.020
> 
> 标签：java, serialization

我正在寻找一种将实例化的类（对象）输出到文件的方法。我尝试过使用 FileStream，但它似乎不起作用。经过研究，似乎我需要使用一种称为“序列化”的技术。我完全迷失在这个话题上。有人可以为我调试这段代码吗？我有一种预感，这个问题正在发生，因为我试图在普通类中序列化一个抽象类。抽象类是 java.util.Calendar。

```
class CalendarL implements java.io.Serializable{
    private static final long serialVersionUID = 1L;

    java.util.Calendar calendar;

    CalendarL (int date, int month, int year){
        calendar.set (Calendar.DATE, date);
calendar.set (Calendar.MONTH, month);
calendar.set (Calendar.YEAR, year);
    }
}

class IO {
    protected CalendarL reader() throws IOException, ClassNotFoundException{
        FileInputStream data = new FileInputStream("data.dat");
        ObjectInputStream dataObject = new ObjectInputStream(data);

        CalendarL calendar = (CalendarL)dataObject.readObject();

        dataObject.close();
        data.close();

        return calendar;
    }

    protected void output(CalendarL calendar) throws IOException, WriteAbortedException, NotSerializableException {
        new FileOutputStream("data.dat").close();

        FileOutputStream data = new FileOutputStream("data.dat");
        ObjectOutputStream dataObject = new ObjectOutputStream(data);

        dataObject.writeObject(calendar);
        dataObject.close();
        data.close();
   } 
```

}

这是我得到的错误：

```
Exception in thread "main" java.io.NotSerializableException: hotelres.ClientL
at java.io.ObjectOutputStream.writeObject0(Unknown Source)
at java.io.ObjectOutputStream.defaultWriteFields(Unknown Source)
at java.io.ObjectOutputStream.writeSerialData(Unknown Source)
at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
at java.io.ObjectOutputStream.writeObject0(Unknown Source)
at java.io.ObjectOutputStream.writeObject(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T04:08:59.570

> 我有一种预感，这个问题正在发生，因为我试图在普通类中序列化一个抽象类。抽象类是 java.util.Calendar。

这种预感是不对的。您序列化实例（不是类）并且实例的类不能是抽象类。此外，`Calendar`该类*确实*实现`Serializable`了...... javadoc 是这样说的。

# java - 如何使用 ObjectOutputStream 以及 writeObject() 和 reset() 方法加快两个套接字之间的对象传递？

> ID：11076726
> 
> 赞同：0
> 
> 时间：2012-06-18T03:50:47.883
> 
> 标签：java, performance, sockets, objectoutputstream

我正在编写一个应用程序（多人游戏），其中需要通过服务器将对象从应用程序的一个实例传递到另一个（并且非常快速）。

我正在使用`ObjectOutputStreams`并`ObjectInputStreams`通过套接字获得来执行此操作。

但是，传递的对象的状态会不断更新，这意味着典型的`writeObject()`方法不会成功（它只写入一次对象，然后在随后调用它时传递对它的引用，这意味着它的实例的值变量从未真正更新过）。

为了“解决”这个问题，我`ObjectOutputStream.reset()`在每次调用 之后都调用了该方法`writeObject()`，这确实解决了更新对象状态的问题；但是，它运行得太慢了，我认为这是每次“刷新”时对象都被完整传递的结果。

那么我的问题是，如何更新通过网络传递的对象的状态，而不必完全重写对象？（我假设这是我加快速度的方法；如果我错了，或者如果存在其他方法，请分享）提前感谢您的任何建议！

此外，关于传递的对象的大小：它不是太大...几个布尔变量、几个双精度数组和一些其他次要变量（没有长度为 1000 的列表，每个列表都包含另一个列表）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T04:07:49.933

1.  `BufferedOutputStream`在 the`ObjectOutputStream`和套接字之间使用 a 。
2.  `BufferedInputStream`在 the`ObjectInputStream`和套接字之间使用 a 。
3.  `flush()`在每个`writeObject()`或之后调用`writeUnshared().`

# xcode - 奇怪的 XCode 调试器行为

> ID：11076730
> 
> 赞同：0
> 
> 时间：2012-06-18T03:51:06.547
> 
> 标签：xcode, debugging

我正在使用 XCode 4.3.1，最近几天调试我的应用程序时发生了一些奇怪的事情。

这是代码：

```
-(void) init 
{
    list = [[NSMutableArray alloc]init]; // list is declared in the header
}

-(void) dosomething 
{
   [self init];

   // strangely the debugger shows "list" is still null here 

   [list addObject: something]; 

   // but it happily steps over the above line without adding anything to the list
} 
```

另一个问题（代码中的其他地方）是有时调试器决定跳转几行（好像它切换到另一个线程但只有一个线程）

最糟糕的部分是有时当我跳过代码时，它甚至会向后退几行，然后再向前。

我试图切换到 GDB 但无济于事。有没有人遇到过这些问题？

顺便说一句，在这些事情开始发生之前，我正在做一些分析以发现内存泄漏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-10-05T09:42:37.470

问题是您正在使用编译优化运行您的项目，可能是因为您在发布模式下调试它；或者因为某些原因，您在调试模式下的项目设置中定义了一些编译优化。检查您的 XCode 控制台中是否有以下消息：

```
[Project Name] was compiled with optimization - stepping may behave oddly; variables may not be available. 
```

如果是，请阅读以下内容：[“项目名称”是经过优化编译的 - 步进可能会表现得很奇怪；变量可能不可用](https://stackoverflow.com/questions/32772573/project-name-was-compiled-with-optimization-stepping-may-behave-oddly-varia)

# database - 提供具有水平比例的巨大静态文件

> ID：11076731
> 
> 赞同：0
> 
> 时间：2012-06-18T03:51:11.987
> 
> 标签：database, file, distributed

我希望我能找到一个易于配置、易于使用、易于学习的分布式文件系统。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T04:04:26.457

由于未提及有关使用的详细信息，并且我可以从问题中推断出，您必须尝试 MogileFS（易于设置和维护）。它来自 memcached 的制造商，用于服务器图像等。请参阅下面提到的链接以获得更好的解释。

[http://code.google.com/p/mogilefs/](http://code.google.com/p/mogilefs/)

[Lustre、Gluster 或 MogileFS？用于视频存储、编码和流式传输](https://stackoverflow.com/questions/916902/lustre-gluster-or-mogilefs-for-video-storage-encoding-and-streaming)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T04:27:59.130

我建议您考虑使用[Apache Hadoop](http://hadoop.apache.org/)。它有很多服务和技术可以使用（Cassandra、HBase 等）。引用自官网：

> Apache Hadoop 是一个框架，它允许使用简单的编程模型跨计算机集群对大型数据集进行分布式处理。它旨在从单个服务器扩展到数千台机器，每台机器都提供本地计算和存储。

基本上，Hadoop 是一个大型框架。您可以将[Karmasphere Studio](http://www.karmasphere.com/Products-Information/karmasphere-studio.html)与 Hadoop 一起使用。我想，在它的帮助下，您可以更快地学习 Hadoop，从而更深入地了解分布式系统。

关于 HDFS：阅读文章“ [GridGain 和 Hadoop](http://www.gridgain.com/blog/archives/gridgain-and-hadoop/) ”。来自那里的简短报价：

> 今天，HDFS 可能是在分布式文件系统中保持非常大的 TB 和 PB 规模的静态数据集以进行长期存储的最经济的方式

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T04:33:48.640

Check out [Amazon Simple Storage Service (Amazon S3)](http://aws.amazon.com/s3).

It has (practically) unlimited storage, 100% uptime and tick most of the boxes needed for most situations. It isn't free, but is very cheap considering what you get.

# c++ - 我的 ClientConnection 类有什么问题？C++

> ID：11076738
> 
> 赞同：0
> 
> 时间：2012-06-18T03:52:26.120
> 
> 标签：c++, visual-c++, winsock2

假设我的头文件和一些包含的库没有问题。我正在使用 Winsock2。

```
//main.cpp and this code is okie, I omit some codes for readable reason
SOCKET ClientSocket;
ClientSocket = INVALID_SOCKET;
ClientSocket = accept(ListenSocket, NULL, NULL);
cout <<"a client is connected" << endl;
ClientConnection connection(ClientSocket);
connection.run();

//ClientConnection.h I tested any function and it's okie
class ClientConnection{
    private:
        SOCKET connectedSocket;
        bool connected;
    public:
        ClientConnection(const ClientConnection &con);
        ClientConnection(SOCKET s);
        int processMessage(string message);
        void sendMessage(string message);
        string recvMessage();
        int run();
        void printSomething(); //function just print something such as :"Here"
}; 
```

在`run()`函数中，我调用`recvMessage()`以从客户端获取消息，然后调用`processMessage(message)`. 这是我的`processMessage(message)`和`sendMessage`：

```
void ClientConnection::sendMessage(string mess){
    const char* sendBuff = mess.c_str();    
    int error = send(this->connectedSocket,sendBuff, (int)strlen(sendBuff), 0);
    delete sendBuff;
    return ;
}
int ClientConnection::processMessage(string message){
    cout << "This is message from client:\n" << message << endl;
    ImageProcessingPlugin *plugin = new ImageProcessingPlugin();
    plugin-> processMessage( *this, message);
    delete plugin;
    return 0;
} 
```

这是 ImageProcessingPlugin：

```
// ImageProcessingPlugin.h
class ImageProcessingPlugin : public Plugin{
public:
    ImageProcessingPlugin();
    void processMessage(const ClientConnection &connection, string message);
};
// ImageProcessingPlugin.cpp
void ImageProcessingPlugin::processMessage(const ClientConnection& _connection,  string message){
    ClientConnection connection(_connection);
    connection.printSomething() // It's okie
    connection.sendMessage("Server received"); // Problem goes here!!
    return;
} 
```

调试后，当我调用`printSomething()`时`plugin->processMessage`，还是可以的，但是当我去的时候`sendMessage`，客户端仍然从服务器收到消息“Server received”，但是出现错误：“_Block_Type_IS_VALID(pHead->nBlockUse)”！任何人都可以解决我的问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T04:01:39.140

您在这里删除`delete sendBuff;`，但您从未自己分配内存。尝试删除该行。

# javascript - 从运行 JavaScript 中排除 iOS

> ID：11076740
> 
> 赞同：1
> 
> 时间：2012-06-18T03:53:17.927
> 
> 标签：javascript, iphone, html

我正在使用文章[QueryLoader2 – Preload your images with ease](http://www.gayadesign.com/diy/queryloader2-preload-your-images-with-ease/)中的预加载器。在大多数桌面浏览器中运行良好，但我在 iOS 上遇到了问题。

有没有办法在不提供不同页面的情况下排除运行脚本的 iOS 设备？

这是我的代码：

```
$(document).ready(function () {
    $("body").queryLoader2({
        barColor: "#FFFFFF",
        backgroundColor: "#000000",
        percentage: true,
        barHeight: 1,
        completeAnimation: "grow",
        minimumTime: 1000
    });
}); 
```

`window.addEventListener`由于某种原因，我无法使用 iOS。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T03:57:05.867

您可以检查用户代理字符串。

```
if(!((navigator.userAgent.match(/iPhone/i)) || 
   (navigator.userAgent.match(/iPod/i)) ||
   (navigator.userAgent.match(/iPad/i)))) {
    // do non iOS stuff here
} 
```

你的代码看起来像

```
$(document).ready(function () {
    if(!((navigator.userAgent.match(/iPhone/i)) || 
      (navigator.userAgent.match(/iPod/i)) ||
      (navigator.userAgent.match(/iPad/i)))) {

        $("body").queryLoader2({
            barColor: "#FFFFFF",
            backgroundColor: "#000000",
            percentage: true,
            barHeight: 1,
            completeAnimation: "grow",
            minimumTime: 1000
        });
    }
}); 
```

我还会查看该页面上提供的 iOS 代码，看看是否能解决您的问题。

```
window.addEventListener('DOMContentLoaded', function() {
    $("body").queryLoader2();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T03:54:50.470

检查 Iphone 用户代理字符串并根据该结果有条件地预加载图像

# amazon-ec2 - 文件是否保存在 EBS 卷上？他们不应该被拯救吗？我很困惑

> ID：11076741
> 
> 赞同：6
> 
> 时间：2012-06-18T03:53:46.080
> 
> 标签：amazon-ec2, amazon-web-services, amazon-ebs

因此，我使用公共 AMI EBS Ubuntu 风格之一创建了一个实例。我创建了一个 EBS 卷并将其附加到实例。我格式化卷并将一个条目添加到 /etc/fstab 以将其安装在 /vol 上。我将 mysql 添加到 AMI 并将数据文件移动到我格式化并安装在 /vol 的 EBS 卷。然后我从正在运行的实例创建一个 AMI。然后我终止正在运行的实例。

我使用新创建的 AMI（上面有 mysql）启动了一个新实例。/vol 已安装有 mysql 数据文件 - 很好，我希望如此。这就是我感到困惑的地方。当我在 EBS 卷 /vol 上创建任何目录或文件时，在我终止实例并创建一个新实例后，它们不再存在。mysql 的东西在那里，但我没有创建新的东西。那些文件和目录不应该在那里吗？还是我误解了这是如何工作的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T22:26:38.917

当您创建 AMI 时，“Amazon EC2 会关闭实例电源，获取附加的任何卷的映像，创建并注册 AMI，然后重新启动实例。” -亚马逊。当 AMI 用于启动实例时，附加驱动器的映像（快照）用于创建新卷。附加到新实例的是这些新卷，而不是您的原始 EBS。（这会生成大量持续使用的孤立卷和快照。）

您创建的 EBS 卷不会自动附加。自动附加的是它在从您的 AMI 启动实例时创建的卷！它从创建 AMI 时对您的 EBS 制作的快照创建此卷！

避免创建克隆卷并将其附加到新实例的方法很简单：在创建 AMI 之前分离您的卷。您需要使用 EC2 Web 控制面板手动附加 EBS 卷，或者使用 .net 或 Java 编程、脚本或命令行工具以编程方式附加。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T06:10:50.923

EBS 卷不绑定到 AMI，仅绑定到您将它们附加到的文字实例。当您创建 AMI 和从中创建新实例时，EBS 不会被克隆，也不会跟随您到新实例。

您可以手动将 EBS 驱动器移动到新实例。或者，您可以对 EBS 卷进行快照并从中克隆一个新驱动器。

# javascript - 如何使用js将json响应插入xxxx

> ID：11076742
> 
> 赞同：0
> 
> 时间：2012-06-18T03:54:09.520
> 
> 标签：javascript, jquery, html, json, tumblr

我正在尝试在我的 tumblr 帖子中实现“最新”小部件。到目前为止，我已经能够从这篇文章（http://stackoverflow.com/questions/5617378/how-to-display-a-link-to-my-latest-tumblr -post-using-javascript）。我想知道如何将 插入`{title}`到 xxx 中，以便链接显示最近帖子的标题。

我想我需要使用 .append 或 .html，但我不知道该怎么做。有人可以帮我吗。

脚本：

```
$.getJSON('http://brianjsmith.tumblr.com/api/read/json?callback=?',
function(response) {
   $('#myLink').attr('href',response.posts[0].title);
}); 
```

html:

```
<a id=#myLink>Most recent post {title}</a> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T03:58:47.847

```
$('#myLink').attr('href',response.posts[0].url).text(response.posts[0].title); 
```

***更新：*** 检查响应后，`title`除了`regular-title`.

```
$('#myLink').attr('href',response.posts[0].url).text(response.posts[0]['regular-title']); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T04:00:14.093

```
$("#myLink").html('Most recent post' + response.posts[0].title) 
```

# ruby-on-rails - 应用自定义布局/颜色来设计表单

> ID：11076743
> 
> 赞同：0
> 
> 时间：2012-06-18T03:54:11.573
> 
> 标签：ruby-on-rails, devise

我是 Rails Devise Gem 的新手。为了应用自定义布局和着色，我修改了设计安装附带的原始表单。我想知道这种方法是否正确。或者我应该创建一组应该覆盖默认设计表单的新表单。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T09:07:44.463

```
rails generate devise:views 
```

然后，查看views文件夹中的devise文件夹，你会看到你需要自定义的所有表单

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T04:10:50.913

正确的方法是生成设计视图，然后像你一直在做的那样设置它们的样式。

# java - 不持久化一个对象

> ID：11076749
> 
> 赞同：0
> 
> 时间：2012-06-18T03:54:53.217
> 
> 标签：java, hibernate, jakarta-ee

我有一个 java 对象 [表示 db 表]，它又包含多个其他 java 对象。

当主对象被持久化时，我不想在主对象层次结构中持久化一个对象。是否可以通过 Hibernate 来实现？我不想更改实体对象，因为在这种特定情况下我不想保留的这个对象需要保留用于其他操作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T04:22:53.563

当然，将字段映射上的“级联”属性设置为空数组

```
@OneToMany(cascade = { }) 
```

请注意，这是默认设置。

如果您发布一些代码会很有帮助，因此根据您的映射设置方式更容易回答。

# javascript - 具有多个逗号分隔值的变量声明是什么意思（例如 var a = b,c,d;）

> ID：11076750
> 
> 赞同：26
> 
> 时间：2012-06-18T03:54:53.657
> 
> 标签：javascript, variables

当我尝试理解插件代码时，我经常会发现这类声明，但我不知道它究竟是什么意思。

变量 a = b,c,d;

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-06-18T03:56:49.103

这是一个句法速记，等同于：

```
var a = b;
var c;
var d; 
```

第一个 (a) 使用 b 的值进行初始化，但 c 和 d 未初始化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T03:56:58.083

它将定义`var a = b`然后定义 var c 和 d

# python - Python TCPServer，错误 98，地址已在使用中

> ID：11076761
> 
> 赞同：1
> 
> 时间：2012-06-18T03:56:38.883
> 
> 标签：python, sockets, tcpserver

我遇到错误 98，地址已在使用中的问题，而我杀死了正在运行的 python TCPServer 服务器并尝试重新启动它。

我注意到还有其他[文章](https://stackoverflow.com/questions/4465959/python-errno-98-address-already-in-use)，建议 sock.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR, 1) 或设置 TCPServer.allow_reuse_address = True。

但是我仍然遇到同样的问题，还有其他原因吗？

我正在使用 RedHat EL 6.2、Python 2.6。

谢谢

我使用的代码是：

```
TCPServer.allow_reuse_address = True
TCPServer.__init__(self, (gethostname(), self.SERVER_PORT),scheddRequestHandler) 
```

这不断让我收到错误98。

但是，如果我改为：

```
TCPServer.allow_reuse_address = True
TCPServer((gethostname(),self.SERVER_PORT),scheddRequestHandler) 
```

错误消失了。

我不太清楚为什么会这样？

# php - 使用数据库和IP地址的PHP用户身份验证？

> ID：11076762
> 
> 赞同：1
> 
> 时间：2012-06-18T03:56:42.320
> 
> 标签：php, ip-address, session-cookies, authentication

我一直在考虑用户身份验证、使用会话/cookies 以及会话劫持带来的安全风险。我知道使用安全的 https:// 是最有效的方法，以及 regenerate_session_id() 和使用随机字符串进行验证（在众多附加程序中）。

我的问题是：是否有可能合并一种放弃会话和 cookie 并仅使用数据库保存变量的方法？

这是我将如何设置它：

**- 在用户表中有一个可以保存 IP 地址的列，以及一个布尔值。**

**-当用户“登录”时，将用户的当前IP地址设置到数据库中，并将布尔值设置为false（如果用户不想被“记住”）或true（如果他们愿意）。**

**- 在页面加载时，它会检查当前 IP 地址与存储在用户数据库中的 IP 地址。如果匹配，则认为用户有效。**

**-在窗口关闭时，脚本将清除这些值，用户将被“注销”。**

**- 如果用户想要“保持登录状态”（我知道这是一个巨大的安全风险），那么切换（布尔值）将简单地停用注销脚本，并且 IP 地址将为用户保留存储。**

这种方法的回退是什么？甚至可能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-18T04:00:59.350

IP 地址根本不是唯一识别用户的准确可靠的方法。IP 可能会在会话期间发生变化，并且多个用户代理可能正在使用相同的出站 IP。

对不起 ：-）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-18T04:01:35.773

我最近在一个系统上看到了这种 IP 检查，它导致了许多用户一直随机断开连接的问题（每当他们的动态 IP 更改时）。只是不要那样做，IP 可以更改，因此您不能依赖它们。

最有可能的是，您应该查看现有的身份验证方法并尝试实现它。把事情简单化。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-18T04:18:24.030

现有的“动态IP是一个问题”的答案是绝对正确的。考虑通过 3g 连接的移动设备。每次用户走进新塔的范围时，他们的 IP 都会改变......

# android - 如何测试意图已被广播

> ID：11076766
> 
> 赞同：8
> 
> 时间：2012-06-18T03:57:16.850
> 
> 标签：android, unit-testing, robolectric

单击“记录”按钮时，我正在广播意图。传递一个布尔变量，它显示是否开始录制。生成意图的代码是：

```
Intent recordIntent = new Intent(ACTION_RECORDING_STATUS_CHANGED);
recordIntent.putExtra(RECORDING_STARTED, getIsRecordingStarted());
sendBroadcast(recordIntent); 
```

为了测试这段代码，我在测试中注册了一个接收器。收到了意图，但传递的变量不一样。如果我调试代码，我可以看到该值与发送的值相同，但是当我得到它时，它的值不同。

```
@Test
public void pressingRecordButtonOnceGenerateStartRecordingIntent()
        throws Exception {
    // Assign
    AppActivity activity = new AppActivity();
    activity.onCreate(null);
    activity.onResume();

    activity.registerReceiver(new BroadcastReceiver() {
        @Override
        public void onReceive(Context arg0, Intent intent) {
            // Assert
            ShadowIntent shadowIntent = Robolectric.shadowOf(intent);
            assertThat(shadowIntent
                    .hasExtra(AppActivity.RECORDING_STARTED),
                    equalTo(true));
            Boolean expected = true;
            Boolean actual = shadowIntent.getExtras().getBoolean(
                    AppActivity.RECORDING_STARTED, false);
            assertThat(actual, equalTo(expected));

        }
    }, new IntentFilter(
            AppActivity.ACTION_RECORDING_STATUS_CHANGED));

    ImageButton recordButton = (ImageButton) activity
            .findViewById(R.id.recordBtn);

    // Act
    recordButton.performClick();
    ShadowHandler.idleMainLooper();

} 
```

我还针对实际意图而不是其影子进行了测试，但结果相同

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T03:56:11.387

使用 get() 而不是 getBoolean() 对我有用。

```
public void pressingRecordButtonOnceGenerateStartRecordingIntent()
        throws Exception {
    // Assign
    BreathAnalyzerAppActivity activity = new AppActivity();
    activity.onCreate(null);
    activity.onResume();

    activity.registerReceiver(new BroadcastReceiver() {
        @Override
        public void onReceive(Context arg0, Intent intent) {
            // Assert
            assertThat(intent
                    .hasExtra(AppActivity.RECORDING_STARTED),
                    equalTo(true));
            Boolean expected = true;
            Boolean actual = (Boolean)intent.getExtras().get(
                    AppActivity.RECORDING_STARTED);
            assertThat(actual, equalTo(expected));

        }
    }, new IntentFilter(
            AppActivity.ACTION_RECORDING_STATUS_CHANGED));

    ImageButton recordButton = (ImageButton) activity
            .findViewById(R.id.recordBtn);

    // Act
    recordButton.performClick();
    ShadowHandler.idleMainLooper();

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-15T12:45:46.700

This might not help for the original, but, future people: if you happen to find yourself in this situation - firstly check your constants and intent filters are distinct so that an unintentional broadcast is not received by your receiver. Several times I've spent longer than I care to admit with that issue!

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-03-03T10:13:33.927

in Robolectri

```
shadowOf(ApplicationProvider.<Application>getApplicationContext()).getBroadcastIntents(); 
```

# git - 拥有多个 Git 存储库

> ID：11076771
> 
> 赞同：6
> 
> 时间：2012-06-18T03:58:28.330
> 
> 标签：git, github

这似乎是最简单的 Git 问题，但我在上面找不到任何东西。

所以对于 Git 新手来说，我知道如何添加、提交，然后将文件推送到我的 GitHub 帐户。但是我如何创建一个新项目并在使用该存储库和我的旧存储库之间切换？将 cd'ing 到适当的目录，然后每次远程添加工作，还是我可以直接 cd 并立即推送？这似乎真的很乏味。我想我错过了 Git 的一个基本点。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-18T04:04:48.640

一个 git 项目在其根目录中是完全自包含的，因此`cd`使用自己的 git 项目进入另一个目录*就是*切换到另一个项目。

至于 Github 部分：

Github 为每个项目托管一个存储库的副本，因此您必须为每个项目设置远程链接是有道理的——它们彼此没有任何共同之处，因此它们每个都需要到 Github 上存储库的远程链接。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-18T04:10:20.700

就像其他人描述的那样。git 项目包含具有 .git 文件夹的目录中的所有子目录和文件（好吧，无论如何，所有文件都不会被忽略）。但是，有时您会希望在另一个存储库中拥有一个 git 存储库。解决这个问题的方法是使用[submodules](http://git-scm.com/book/en/Git-Tools-Submodules)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-18T04:04:55.723

Git 的所有信息都保存在`.git`工作副本顶部的目录中。因此，如果您正在处理两个不同的项目，您将在本地系统上的两个不同目录中创建克隆。每个人都有一个遥控器，指向其在 Github 上的相应项目。

# python - 在python中对连续的第三个数字求和

> ID：11076782
> 
> 赞同：0
> 
> 时间：2012-06-18T04:00:07.297
> 
> 标签：python

我将如何解决这个问题？

程序应该包含函数的定义`sumTri(cutOff)`。该函数将 Tri 数字添加到总和中。

Tri 数字是每三个数字： ....只要 Tri 数字小于 cutOff，`1, 4, 7, 10,`该函数就会将连续的 Tri 数字... 添加到总和中。`1, 4, 7,`该函数返回这些数字的总和。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-18T04:07:25.377

这很简单：

```
def sumTri(cutOff):
  return sum(range(1,cutOff,3)) 
```

或者，当您需要它时：

```
def sumTri(cutOff):
  sum = 0
  tri = 1
  while tri < cutOff:
    sum += tri
    tri += 3
  return sum 
```

我会试着解释一下这两种灵魂。

在第一种情况下，您使用 Python 的两个“高级”函数，它们都可以为您工作：`sum`和`range`. 该`range(a,b,c)`函数生成一个数字列表，从`a`到之间`b`的步长`c`。例如：

```
In [1]: range(1,10,3)
Out[1]: [1, 4, 7]

In [2]: range(1,22,3)
Out[2]: [1, 4, 7, 10, 13, 16, 19] 
```

您必须在此处注意`range`生成数字，直到列表中的数字小于`b`，而不是小于或等于。正是您的任务所需要的。

显然计算并`sum`返回它作为参数的列表中数字的总和：

```
In [3]: sum([1])
Out[3]: 1

In [4]: sum([1,2])
Out[4]: 3

In [5]: sum([1,2,3])
Out[5]: 6 
```

现在您只需将这两个功能结合起来：

```
return sum(range(1,cutOff,3)) 
```

第二种解决方案更“低级”和“算法”。你在这里没有使用特殊的 python 函数，一切都自己做。

您使用两个变量来计算总和：

*   `sum`-- 存储总和的变量
*   `tri`-- 逐步添加的具有当前数字值的变量

当你写这样的东西时：

```
a = a + 5 
```

这意味着：“现在我想`a`等于`a`之前加 5”或“增加`a`5”。你可以写得更短：

```
a += 5 
```

这两种形式是等价的。

但是你不需要简单的添加一些东西。你需要做很多次，直到事情发生。在 python 中，您可以使用`while`：

```
while someting-is-true:
  do-something 
```

每次`while`检查`something-is-true`条件，当它为真时，它会发出低于`while`（缩进）的命令 ie `do-something`。

现在您知道了编写解决方案所需的一切：

```
def sumTri(cutOff):
  sum = 0                      # we start the sum from 0
  tri = 1                      # and the first number to add is 1
  while tri < cutOff:          # next number to add < cutOff?
    sum += tri                 # than add it to sum
    tri += 3                   # and increase the number by 3
  return sum                   # now you have the result, return it 
```

这就是完成这项工作的功能。现在您可以使用该功能了。你是怎么做到的？

```
def sumTri(cutOff):
  ...

# anywhere in you program:
# presuming a is the cutOff
print sumTri(a) 
```

当您想运行该函数并使用其结果时，您只需编写`function_name(args)`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-18T04:21:04.130

这个数列与[三角数有关](http://en.wikipedia.org/wiki/Triangular_numbers)

这是一个 O(1)

```
def sumTri(cutoff):
    n = (cutoff+1)//3
    return (3*n-1)*n//2 
```

# spring - 独立应用程序中的 Spring Security

> ID：11076784
> 
> 赞同：4
> 
> 时间：2012-06-18T04:00:12.793
> 
> 标签：spring, security

如何在独立应用程序中使用 Spring Security。我只需要使用 Spring Security 的 Authentication 部分。我需要针对 Windows Active Directory 对用户进行身份验证。网络上有很多在 Servlet 中使用 Spring Security 的示例，但在独立应用程序中使用它们却找不到太多。

我只是在寻找一些东西来完成这个方法

```
boolean isValidCredentials(String username, String password)
{
    //TODO use spring security for authentication here..
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T14:36:23.720

如果您只需要进行身份验证，则可以使用 spring-security-ldap 中的[ActiveDirectoryLdapAuthenticationProvider 。](http://static.springsource.org/spring-security/site/docs/3.1.x/apidocs/org/springframework/security/ldap/authentication/ad/ActiveDirectoryLdapAuthenticationProvider.html)

只需在您的应用程序上下文中创建一个 bean，例如：

```
<bean id="adAuthProvider" class="org.springframework.security.ldap.authentication.ad.ActiveDirectoryLdapAuthenticationProvider">
    <constructor-arg value="your.domain" />
    <constructor-arg value="ldap://your.ad.server" />
</bean> 
```

然后像这样使用它

```
try {
    adAuthProvider.authenticate(new UsernamePasswordAuthenticationToken("user", "password"));
} catch (AuthenticationException ae) {
    // failed
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-23T08:19:12.393

[使用-spring-security-in-a-swing-desktop-application](https://sacrephill.wordpress.com/2009/06/12/using-spring-security-in-a-swing-desktop-application/)

```
public Authentication authenticate( String username, String password ) {
 UsernamePasswordAuthenticationToken token = new UsernamePasswordAuthenticationToken( username, password );

 Authentication auth = _authProvider.authenticate( token );
 if (null != auth) {
   SecurityContextHolder.getContext().setAuthentication( auth );

   _eventPublisher.publishEvent( new InteractiveAuthenticationSuccessEvent( auth, this.getClass() ) );

   return auth;
 }
 throw new BadCredentialsException( "null authentication" );
 } 
```

我自己没有尝试过上面的代码，但看起来很合理。为方便起见，下面是指向 javadoc 的链接[SecurityContextHolder](http://docs.spring.io/autorepo/docs/spring-security/3.2.2.RELEASE/apidocs/org/springframework/security/core/context/SecurityContextHolder.html)

# c - 设置受边界保护的数组

> ID：11076788
> 
> 赞同：1
> 
> 时间：2012-06-18T04:00:24.387
> 
> 标签：c, windows, linux, mmu

我想分配一个数组并将其设置为使其前后的页面受到内存管理单元的保护，因此将自动捕获超出数组边界的尝试；然后捕获它以便以受控方式处理错误。

我怀疑会有一个可移植的解决方案，但是分别在 Windows 上使用 Microsoft C 和在 Linux 上使用 GCC 的最佳平台特定方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T04:04:30.433

实际上，有一种可移植的方法来检测软件中的内存分配溢出。 [Dmalloc](http://dmalloc.com)提供 fencepost 覆盖检测

> Fence-post 内存是紧接在内存分配之上或之下的区域。编写访问分配高于或低于分配的代码太容易了——尤其是在处理数组或字符串时。库可以在每个分配周围的区域中写入特殊值，以便当这些区域被覆盖时它会注意到。

[http://dmalloc.com/docs/latest/online/dmalloc_17.html#SEC22](http://dmalloc.com/docs/latest/online/dmalloc_17.html#SEC22)

# java - 安卓HTTPS登录

> ID：11076789
> 
> 赞同：-1
> 
> 时间：2012-06-18T04:00:28.550
> 
> 标签：java, android, https

我正在尝试编写一个 Android 应用程序，它允许我从保存我的工作名册[https://www.blahblahblahcompany.com/Rostering/exportRoster.aspx的网站读取文本](https://www.blahblahblahcompany.com/Rostering/exportRoster.aspx)

这可能吗？我可以通过网站验证自己的身份，然后下载源代码吗？

有问题的网站还可以将名册导出为 .xls 文件

相关页面的屏幕截图 [http://img528.imageshack.us/img528/9954/rosterf.png](http://img528.imageshack.us/img528/9954/rosterf.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T04:22:43.250

在 Android Web 浏览器中，转至工具 > 选项 > 加密 > 查看证书以查看支持的证书提供程序列表。只要您从受支持的提供商处购买证书，您就可以做到。 这是一个可能有一些线索[的堆栈答案。](https://stackoverflow.com/questions/2012497/accepting-a-certificate-for-https-on-android)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T04:37:08.343

我不知道我是否得到了你真正想做的事情，但我敢肯定，至少，你需要一些 Get/Post 操作来执行身份验证过程并检索数据/信息。请检查以下方法：

 **```
public StringBuilder post(String url, List<NameValuePair> nvps) {
    try {
        HttpPost httppost = new HttpPost(url);
        // if there is cookies, set then
        if (cookies != null && cookies.size() > 0) {
            String cookieString = "";
            for (int i = 0; i < cookies.size(); ++i) {
                cookieString += cookies.get(i).getName() + "=" + cookies.get(i).getValue() + "; ";
            }
            cookieString += "domain=" + Constants.BaseUrl + "; " + "path=/";
            httppost.addHeader("Cookie", cookieString);
        }
        // connection timeout options
        HttpParams httpParameters = new BasicHttpParams();
        HttpConnectionParams.setConnectionTimeout(httpParameters, Constants.timeoutConnection);
        HttpConnectionParams.setSoTimeout(httpParameters, Constants.timeoutSocket);
        // setup the post method
        DefaultHttpClient httpClient = new DefaultHttpClient(httpParameters);
        httppost.setEntity(new UrlEncodedFormEntity(nvps, HTTP.UTF_8));
        HttpResponse response = httpClient.execute(httppost);
        BufferedReader reader = new BufferedReader(new InputStreamReader(response.getEntity().getContent(), "UTF-8"));
        StringBuilder builder = new StringBuilder();
        for (String line = null; (line = reader.readLine()) != null;)
            builder.append(line).append("\n");
        // set cookies
        List<Cookie> incomingCookies = httpClient.getCookieStore().getCookies();
        for (int i = 0; incomingCookies != null && i < incomingCookies.size(); i++) {
            cookies.add(incomingCookies.get(i));
        }
        return builder;
    } catch (UnsupportedEncodingException e) {
    } catch (ClientProtocolException e) {
    } catch (IOException e) {
    } catch (Exception e) {
    }
    return null;
} 
```*  ***上面的方法在url**字符串参数中执行一个帖子，使用对值**nvps**作为 header 的参数。请注意，**Constants**类是您为 WebService 声明静态字符串（例如 API 条目）的类，字段**cookies**是保存会话问题的 Cookie 列表。此方法会将您的 POST 请求的结果作为字符串构建器对象返回。基本上，它是一种通用方法，可以在多种情况下使用，您应该进行少量调整以适应任务。这是您可以用来进行**身份验证**的内容。

还有一个重要的方法，Http GET：

 **```
public StringBuilder get(String url) {
    try {
        HttpGet httpget = new HttpGet(url);
        // if there is cookies, set then
        if (cookies != null && cookies.size() > 0) {
            String cookieString = "";
            for (int i = 0; i < cookies.size(); ++i) {
                cookieString += cookies.get(i).getName() + "=" + cookies.get(i).getValue() + "; ";
            }
            cookieString += "domain=" + Constants.BaseUrl + "; " + "path=/";
            httpget.addHeader("Cookie", cookieString);
        }
        HttpParams httpParameters = new BasicHttpParams();
        HttpConnectionParams.setConnectionTimeout(httpParameters, Constants.timeoutConnection);
        HttpConnectionParams.setSoTimeout(httpParameters, Constants.timeoutSocket);
        DefaultHttpClient httpClient = new DefaultHttpClient(httpParameters);
        HttpResponse response = httpClient.execute(httpget);
        BufferedReader reader = new BufferedReader(new InputStreamReader(response.getEntity().getContent(), "UTF-8"));
        StringBuilder builder = new StringBuilder();
        for (String line = null; (line = reader.readLine()) != null;)
            builder.append(line).append("\n");
        // set cookies
        List<Cookie> incomingCookies = httpClient.getCookieStore().getCookies();
        for (int i = 0; incomingCookies != null && i < incomingCookies.size(); i++) {
            cookies.add(incomingCookies.get(i));
        }
        return builder;
    } catch (UnsupportedEncodingException e) {
    } catch (ClientProtocolException e) {
    } catch (IOException e) {
    } catch (Exception e) {
    }
    return null;
} 
```*  *这一个执行类似的步骤顺序，但目的非常不同。考虑到您已经通过身份验证或不需要身份验证过程，这一目标是检索信息。它将请求的数据作为字符串生成器返回。

请注意，除了这些方法非常通用外，您还必须仔细检查您请求的网页中使用的过程是什么。希望它能以某种方式帮助你！;-)****

# c# - 编写 MSMQ 示例应用程序所需的最低限度

> ID：11076790
> 
> 赞同：115
> 
> 时间：2012-06-18T04:00:32.963
> 
> 标签：c#, msmq

我已经研究了一个多小时，并找到了如何在 C# 中使用 MSMQ 的很好的示例，甚至是关于消息队列的一本书的一整章......但是为了快速测试，我需要的只是覆盖这个场景，甚至没有以一种完美的方式，只是为了快速演示：

“应用程序 A”：将消息写入消息队列。（应用程序 A 是 C# Windows 服务）现在我打开“应用程序 B”（它是 C# winForms 应用程序）并检查 MSMQ，我看到哦我有一条新消息。

就是这样......我只需要一个简单的演示。

任何人都可以帮我提供一个代码示例吗？非常感激。

* * *

## 回答 #1

> 赞同：132
> 
> 时间：2012-06-18T05:04:46.647

```
//From Windows Service, use this code
MessageQueue messageQueue = null;
if (MessageQueue.Exists(@".\Private$\SomeTestName"))
{
    messageQueue = new MessageQueue(@".\Private$\SomeTestName");
    messageQueue.Label = "Testing Queue";
}
else
{
    // Create the Queue
    MessageQueue.Create(@".\Private$\SomeTestName");
    messageQueue = new MessageQueue(@".\Private$\SomeTestName");
    messageQueue.Label = "Newly Created Queue";
}
messageQueue.Send("First ever Message is sent to MSMQ", "Title"); 
```

* * *

```
//From Windows application
MessageQueue messageQueue = new MessageQueue(@".\Private$\SomeTestName");
System.Messaging.Message[] messages = messageQueue.GetAllMessages();

foreach (System.Messaging.Message message in messages)
{
    //Do something with the message.
}
// after all processing, delete all the messages
messageQueue.Purge(); 
```

对于更复杂的场景，您可以使用 Message 对象发送消息，在其中包装您自己的类对象，并将您的类标记为可序列化。还要确保您的系统上安装了 MSMQ

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2016-05-13T13:23:02.320

**也许下面的代码对于快速了解MSMQ**的人很有用。

因此，首先我建议您在一个解决方案中创建 3 个应用程序：

> 1.  MessageTo（Windows 窗体）添加 1 个按钮。
> 2.  MessageFrom（Windows 窗体）添加 1 个富文本框。
> 3.  MyMessage（类库）添加 1 个类。

只需复制过去的代码并尝试一下。确保**MSMQ 已安装**在您的 MS Windows 上，并且项目 1 和 2 引用了`System.Messaging`.

**1\. MessageTo (Windows Form) 添加1个按钮。**

```
using System;
using System.Messaging;
using System.Windows.Forms;

namespace MessageTo
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void button1_Click(object sender, EventArgs e)
        {

            #region Create My Own Queue 

            MessageQueue messageQueue = null;
            if (MessageQueue.Exists(@".\Private$\TestApp1"))
            {
                messageQueue = new MessageQueue(@".\Private$\TestApp1");
                messageQueue.Label = "MyQueueLabel";
            }
            else
            {
                // Create the Queue
                MessageQueue.Create(@".\Private$\TestApp1");
                messageQueue = new MessageQueue(@".\Private$\TestApp1");
                messageQueue.Label = "MyQueueLabel";
            }

            #endregion

            MyMessage.MyMessage m1 = new MyMessage.MyMessage();
            m1.BornPoint = DateTime.Now;
            m1.LifeInterval = TimeSpan.FromSeconds(5);
            m1.Text = "Command Start: " + DateTime.Now.ToString();

            messageQueue.Send(m1);
        }
    }
} 
```

**2\. MessageFrom (Windows Form) 添加1个richtextbox。**

```
using System;
using System.ComponentModel;
using System.Linq;
using System.Messaging;
using System.Windows.Forms;

namespace MessageFrom
{
    public partial class Form1 : Form
    {
        Timer t = new Timer();
        BackgroundWorker bw1 = new BackgroundWorker();
        string text = string.Empty;

        public Form1()
        {
            InitializeComponent();

            t.Interval = 1000;
            t.Tick += T_Tick;
            t.Start();

            bw1.DoWork += (sender, args) => args.Result = Operation1();
            bw1.RunWorkerCompleted += (sender, args) =>
            {
                if ((bool)args.Result)
                {
                    richTextBox1.Text += text;
                }
            };
        }

        private object Operation1()
        {
            try
            {
                if (MessageQueue.Exists(@".\Private$\TestApp1"))
                {
                    MessageQueue messageQueue = new MessageQueue(@".\Private$\TestApp1");
                    messageQueue.Formatter = new XmlMessageFormatter(new Type[] { typeof(MyMessage.MyMessage) });

                    System.Messaging.Message[] messages = messageQueue.GetAllMessages();

                    var isOK = messages.Count() > 0 ? true : false;
                    foreach (System.Messaging.Message m in messages)
                    {
                        try
                        {
                            var command = (MyMessage.MyMessage)m.Body;
                            text = command.Text + Environment.NewLine;
                        }
                        catch (MessageQueueException ex)
                        {
                        }
                        catch (Exception ex)
                        {
                        }
                    }                   
                    messageQueue.Purge(); // after all processing, delete all the messages
                    return isOK;
                }
            }
            catch (MessageQueueException ex)
            {
            }
            catch (Exception ex)
            {
            }

            return false;
        }

        private void T_Tick(object sender, EventArgs e)
        {
            t.Enabled = false;

            if (!bw1.IsBusy)
                bw1.RunWorkerAsync();

            t.Enabled = true;
        }
    }
} 
```

**3\. MyMessage（类库）添加1个类。**

```
using System;

namespace MyMessage
{
    [Serializable]
    public sealed class MyMessage
    {
        public TimeSpan LifeInterval { get; set; }

        public DateTime BornPoint { get; set; }

        public string Text { get; set; }
    }
} 
```

享受 ：）

# c# - 在同一个 SqlConnection 上多次调用 CreateCommand

> ID：11076792
> 
> 赞同：0
> 
> 时间：2012-06-18T04:00:52.883
> 
> 标签：c#, .net, ado.net

我在 C#/.NET4 中有一个带有 SQL 2008 后端的 Windows 窗体应用程序。我在按钮单击事件处理程序中打开一个 SqlConnection，然后调用多个后台工作人员，每个后台工作人员在 using 块内调用连接的 CreateCommand 方法：

```
 private void btnSubmit_Click(object sender, EventArgs e)
    {
        cn.Open();
        bw01.RunWorkerAsync(x);
        bw02.RunWorkerAsync(x);
        while (bw01.IsBusy || bw02.IsBusy)
            Application.DoEvents();
        cn.Close();
    }

    private void bw01_DoWork(object sender, DoWorkEventArgs e)
    {
        try
        {
            using (SqlCommand cmd = cn.CreateCommand())
            {
                cmd.CommandText = <some SQL>
                e.Result = Convert.ToInt32(cmd.ExecuteScalar());
            }
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.Message);
            return;
        }
    }

    private void bw02_DoWork(object sender, DoWorkEventArgs e)
    {
        try
        {
            using (SqlCommand cmd = cn.CreateCommand())
            {
                cmd.CommandText = <some SQL>
                e.Result = Convert.ToInt32(cmd.ExecuteScalar());
            }
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.Message);
            return;
        }
    } 
```

该代码有时可以工作，但有时我会出错，最常见的是“当前命令发生严重错误。如果有任何结果，则应丢弃。”

我的连接字符串中有 MultipleActiveResultSets=true 。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T04:11:11.727

您的连接变量不是线程安全的，因为两个线程都在尝试使用它。ADO.NET 将为您管理连接池，因此您应该在每个线程内移动连接创建并使其原子化

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T04:40:29.187

这些命令将是 SELECTs（只读）、INSERTs/UPDATEs/DELETEs 还是什么？您可能还希望在您的情况下使用数据适配器，并使用数据适配器值填充数据集。将 e.result 设置为该值。

这并不能真正解决您的问题，但您可能还想设置 sqlcommand 的 CommandType。

# java - Java 小程序用法

> ID：11076796
> 
> 赞同：1
> 
> 时间：2012-06-18T04:01:01.390
> 
> 标签：java, netbeans, applet, jfilechooser, japplet

我想知道 Java 小程序在访问用户 PC 上的数据方面是如何工作的。例如，我希望在他们的 PC 上抓取一个文件并将其发送到托管我的网页的 Web 服务器（基本上是一个简单的文件传输客户端程序）。这可以使用 JFileChooser 对话框之类的东西来完成吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T04:18:31.063

是的，这是可以做到的。您始终可以尝试使用最少的代码（快速而肮脏）来检查它。[这](http://getablogger.blogspot.com/2008/02/java-applet-file-uploader.html)，[这](https://stackoverflow.com/questions/1599018/java-applet-to-upload-a-file)和[这](http://jupload.sourceforge.net/index.html)可能会有所帮助。

# django - 如何在没有 Django 模板中的自定义变量的情况下完成下面的代码

> ID：11076800
> 
> 赞同：0
> 
> 时间：2012-06-18T04:01:36.583
> 
> 标签：django, django-templates

```
 {%  for voter in opt.voterlog_set.all  %}
                {% if user.id != voter.voter.id %}
                    <span data-url="{% url vote %}" data-id="{{ opt.id }}" class="button">vote</span>
                {% endif %}
            {% endfor %} 
```

在上面的代码中，我只想在当前用户尚未投票时才显示一次投票选项。上面的代码多次打印出投票选项（对于 voterlog 中的每个条目一次）。Django 不允许我设置自定义变量，例如我可以用来切换 hasVoted 变量的布尔值。如何使用 Django 模板修复此代码？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T04:13:12.850

正如您所提到的，由于无法在 Django 模板中设置状态，因此如果您无权访问视图代码，则没有任何明智的方法可以做到这一点。如果您确实可以访问视图代码，那么最简单的解决方案 - 并且总而言之，最正确的解决方案 - 是`user_has_voted`在视图中设置一个上下文变量，而不是在模板中遍历 voterlogs。

但是，如果您无权访问视图，则必须使用涉及一些客户端代码的 hack，例如渲染 Javascript 以设置必要的状态，然后添加一些进一步的 Javascript 来检查该状态并调整 DOM页面加载后。

不过，您的逻辑似乎是错误的。当且仅当在循环中找到当前用户时，您才需要设置状态的东西，如下所示：

```
 {%  for voter in opt.voterlog_set.all  %}
            {% if user.id == voter.voter.id %}
            <script type="text/javascript">
            window.user_has_voted = true;
            </script>
            {% endif %}
        {% endfor %}

        <script type="text/javascript">
        if( !window.user_has_voted ) {
          document.write('<span data-url="{% url vote %}" data-id="{{ opt.id }}" class="button">vote</span>');
        }
        </script> 
```

请注意，这是一个特别讨厌的 hack —— 只有当您只能访问模板并且无法控制发送到模板的上下文变量时，才应该使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T06:43:28.643

可能这不是您想要的，但是如何在您的视图中创建选民列表，并将其添加到模板上下文中。然后

```
{% if user not in voters %}
    "user is allowed to vote"
{% endif %} 
```

# javascript - 如何设置 Dojo 对话框打开的位置？

> ID：11076804
> 
> 赞同：4
> 
> 时间：2012-06-18T04:03:16.677
> 
> 标签：javascript, dojo, dialog, location

我有一个 Dojo 对话框，当用户单击页面上的元素时会打开该对话框。

我想控制它在...打开的位置。我真的希望它在（相对于）单击的另一个 dom 元素旁边打开。

但我似乎可以弄清楚如何做上述任何一个。

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-27T16:28:09.020

使用相对于单击位置的 dojo 打开一个对话框：

```
dojo.style(pointDialog.domNode, 'visibility', 'hidden');
pointDialog.show().then(function () {
    dojo.style(pointDialog.domNode, 'top', clickEvt.pageY);
    dojo.style(pointDialog.domNode, 'visibility', 'visible');
}); 
```

对话不跳跃需要可见性技巧

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T04:07:35.860

我会在`Tooltip`Dojo 的文档中寻找战利品。我从未有过使用 Dojo 的经验，但这里有一些链接可以帮助您入门。

[Dojo Dijit Dialog 相对位置。是否可以？](https://stackoverflow.com/questions/2469397/dojo-dijit-dialog-relative-position-is-it-possible)

[http://livedocs.dojotoolkit.org/dijit/TooltipDialog](http://livedocs.dojotoolkit.org/dijit/TooltipDialog)

[http://mail.dojotoolkit.org/pipermail/dojo-interest/2011-May/054581.html](http://mail.dojotoolkit.org/pipermail/dojo-interest/2011-May/054581.html)

# c# - Winforms DataGridView 调整大小问题

> ID：11076810
> 
> 赞同：1
> 
> 时间：2012-06-18T04:04:48.467
> 
> 标签：c#, .net, winforms

我不是 100% 确定我应该如何表达这个问题，但我会尽力而为。

我有一个 PointCtrlForm，它在 TableLayoutPanel 中有一个 DataGridView。DataGridView 作为 Fill 停靠在表格中。PointCtrlForm 停靠到另一个设置为 MDIParent 的窗口，停靠样式属性设置为 Fill。

调整主窗口的大小可以正确调整 PointCtrlForm 的大小，然后它也应该调整 DataGridView 的大小。好吧，至少“一半”的调整大小可以正常工作。扩大主窗口也会扩大 datagridview，这是我所期望的，但如果我将主窗口缩小到某个点，DataGridView 会停止缩小并隐藏列而不显示滚动条。

我检查了所有列都没有启用 Frozen 属性，检查了 datagridview 和子窗口是否正确停靠，并检查了滚动条属性设置为两者。

编辑： AutoSizeColumnsMode 也是填充。

我将在此处发布 Designer.cs 的内容。我会很感激任何指导。

```
namespace DDCUI
{
    partial class PointCtrlForm
    {
        /// <summary>
        /// Required designer variable.
        /// </summary>
        private System.ComponentModel.IContainer components = null;

        /// <summary>
        /// Clean up any resources being used.
        /// </summary>
        /// <param name="disposing">true if managed resources should be disposed; otherwise, false.</param>
        protected override void Dispose(bool disposing)
        {
            if (disposing && (components != null))
            {
                components.Dispose();
            }
            base.Dispose(disposing);
        }

        #region Windows Form Designer generated code

        /// <summary>
        /// Required method for Designer support - do not modify
        /// the contents of this method with the code editor.
        /// </summary>
        private void InitializeComponent()
        {
            this.tableLayoutPanel1 = new System.Windows.Forms.TableLayoutPanel();
            this.CmbSubDevice = new System.Windows.Forms.ComboBox();
            this.BtnBack = new System.Windows.Forms.Button();
            this.CmbMainDevice = new System.Windows.Forms.ComboBox();
            this.dataGridView1 = new System.Windows.Forms.DataGridView();
            this.BtnRefresh = new System.Windows.Forms.Button();
            this.label1 = new System.Windows.Forms.Label();
            this.ID = new System.Windows.Forms.DataGridViewTextBoxColumn();
            this.PointName = new System.Windows.Forms.DataGridViewTextBoxColumn();
            this.Value = new System.Windows.Forms.DataGridViewTextBoxColumn();
            this.Description = new System.Windows.Forms.DataGridViewTextBoxColumn();
            this.DefaultValue = new System.Windows.Forms.DataGridViewTextBoxColumn();
            this.ActiveString = new System.Windows.Forms.DataGridViewTextBoxColumn();
            this.InactiveString = new System.Windows.Forms.DataGridViewTextBoxColumn();
            this.AlarmCondition = new System.Windows.Forms.DataGridViewTextBoxColumn();
            this.tableLayoutPanel1.SuspendLayout();
            ((System.ComponentModel.ISupportInitialize)(this.dataGridView1)).BeginInit();
            this.SuspendLayout();
            // 
            // tableLayoutPanel1
            // 
            this.tableLayoutPanel1.ColumnCount = 6;
            this.tableLayoutPanel1.ColumnStyles.Add(new System.Windows.Forms.ColumnStyle(System.Windows.Forms.SizeType.Absolute, 100F));
            this.tableLayoutPanel1.ColumnStyles.Add(new System.Windows.Forms.ColumnStyle(System.Windows.Forms.SizeType.Absolute, 100F));
            this.tableLayoutPanel1.ColumnStyles.Add(new System.Windows.Forms.ColumnStyle(System.Windows.Forms.SizeType.Absolute, 100F));
            this.tableLayoutPanel1.ColumnStyles.Add(new System.Windows.Forms.ColumnStyle(System.Windows.Forms.SizeType.Absolute, 100F));
            this.tableLayoutPanel1.ColumnStyles.Add(new System.Windows.Forms.ColumnStyle(System.Windows.Forms.SizeType.Absolute, 151F));
            this.tableLayoutPanel1.ColumnStyles.Add(new System.Windows.Forms.ColumnStyle(System.Windows.Forms.SizeType.Absolute, 88F));
            this.tableLayoutPanel1.Controls.Add(this.CmbSubDevice, 0, 1);
            this.tableLayoutPanel1.Controls.Add(this.BtnBack, 0, 0);
            this.tableLayoutPanel1.Controls.Add(this.CmbMainDevice, 0, 1);
            this.tableLayoutPanel1.Controls.Add(this.dataGridView1, 0, 2);
            this.tableLayoutPanel1.Controls.Add(this.BtnRefresh, 4, 1);
            this.tableLayoutPanel1.Controls.Add(this.label1, 5, 1);
            this.tableLayoutPanel1.Dock = System.Windows.Forms.DockStyle.Fill;
            this.tableLayoutPanel1.Location = new System.Drawing.Point(0, 0);
            this.tableLayoutPanel1.Name = "tableLayoutPanel1";
            this.tableLayoutPanel1.RowCount = 3;
            this.tableLayoutPanel1.RowStyles.Add(new System.Windows.Forms.RowStyle(System.Windows.Forms.SizeType.Percent, 67.02128F));
            this.tableLayoutPanel1.RowStyles.Add(new System.Windows.Forms.RowStyle(System.Windows.Forms.SizeType.Percent, 32.97872F));
            this.tableLayoutPanel1.RowStyles.Add(new System.Windows.Forms.RowStyle(System.Windows.Forms.SizeType.Absolute, 368F));
            this.tableLayoutPanel1.RowStyles.Add(new System.Windows.Forms.RowStyle(System.Windows.Forms.SizeType.Absolute, 20F));
            this.tableLayoutPanel1.Size = new System.Drawing.Size(639, 467);
            this.tableLayoutPanel1.TabIndex = 0;
            // 
            // CmbSubDevice
            // 
            this.tableLayoutPanel1.SetColumnSpan(this.CmbSubDevice, 2);
            this.CmbSubDevice.DropDownStyle = System.Windows.Forms.ComboBoxStyle.DropDownList;
            this.CmbSubDevice.Font = new System.Drawing.Font("굴림", 12F);
            this.CmbSubDevice.FormattingEnabled = true;
            this.CmbSubDevice.Location = new System.Drawing.Point(203, 69);
            this.CmbSubDevice.Name = "CmbSubDevice";
            this.CmbSubDevice.Size = new System.Drawing.Size(194, 24);
            this.CmbSubDevice.TabIndex = 3;
            // 
            // BtnBack
            // 
            this.BtnBack.Location = new System.Drawing.Point(3, 3);
            this.BtnBack.Name = "BtnBack";
            this.BtnBack.Size = new System.Drawing.Size(94, 54);
            this.BtnBack.TabIndex = 0;
            this.BtnBack.Text = "Back";
            this.BtnBack.UseVisualStyleBackColor = true;
            this.BtnBack.Click += new System.EventHandler(this.BtnBack_Click);
            // 
            // CmbMainDevice
            // 
            this.tableLayoutPanel1.SetColumnSpan(this.CmbMainDevice, 2);
            this.CmbMainDevice.DropDownStyle = System.Windows.Forms.ComboBoxStyle.DropDownList;
            this.CmbMainDevice.Font = new System.Drawing.Font("굴림", 12F);
            this.CmbMainDevice.FormattingEnabled = true;
            this.CmbMainDevice.Items.AddRange(new object[] {
            "I/O",
            "VIRTUAL",
            "SAC",
            "MODBUS",
            "NATIONAL",
            "TOSHIBA",
            "SCHEDULE",
            "SYSTEM ALARM",
            "LOGIC",
            "GROUP"});
            this.CmbMainDevice.Location = new System.Drawing.Point(3, 69);
            this.CmbMainDevice.Name = "CmbMainDevice";
            this.CmbMainDevice.Size = new System.Drawing.Size(194, 24);
            this.CmbMainDevice.TabIndex = 2;
            this.CmbMainDevice.SelectedIndexChanged += new System.EventHandler(this.CmbMainDevice_SelectedIndexChanged);
            // 
            // dataGridView1
            // 
            this.dataGridView1.AutoSizeColumnsMode = System.Windows.Forms.DataGridViewAutoSizeColumnsMode.Fill;
            this.dataGridView1.ColumnHeadersHeightSizeMode = System.Windows.Forms.DataGridViewColumnHeadersHeightSizeMode.AutoSize;
            this.dataGridView1.Columns.AddRange(new System.Windows.Forms.DataGridViewColumn[] {
            this.ID,
            this.PointName,
            this.Value,
            this.Description,
            this.DefaultValue,
            this.ActiveString,
            this.InactiveString,
            this.AlarmCondition});
            this.tableLayoutPanel1.SetColumnSpan(this.dataGridView1, 6);
            this.dataGridView1.Dock = System.Windows.Forms.DockStyle.Fill;
            this.dataGridView1.Location = new System.Drawing.Point(3, 101);
            this.dataGridView1.Name = "dataGridView1";
            this.dataGridView1.RowTemplate.Height = 23;
            this.dataGridView1.Size = new System.Drawing.Size(633, 363);
            this.dataGridView1.TabIndex = 5;
            // 
            // BtnRefresh
            // 
            this.BtnRefresh.Location = new System.Drawing.Point(403, 69);
            this.BtnRefresh.Name = "BtnRefresh";
            this.BtnRefresh.Size = new System.Drawing.Size(94, 26);
            this.BtnRefresh.TabIndex = 6;
            this.BtnRefresh.Text = "Refresh";
            this.BtnRefresh.UseVisualStyleBackColor = true;
            // 
            // label1
            // 
            this.label1.AutoSize = true;
            this.label1.Dock = System.Windows.Forms.DockStyle.Fill;
            this.label1.Font = new System.Drawing.Font("굴림", 12F);
            this.label1.Location = new System.Drawing.Point(554, 66);
            this.label1.Name = "label1";
            this.label1.Size = new System.Drawing.Size(82, 32);
            this.label1.TabIndex = 7;
            this.label1.Text = "XXX 개";
            this.label1.TextAlign = System.Drawing.ContentAlignment.MiddleCenter;
            // 
            // ID
            // 
            this.ID.FillWeight = 70F;
            this.ID.HeaderText = "ID";
            this.ID.Name = "ID";
            // 
            // PointName
            // 
            this.PointName.FillWeight = 70F;
            this.PointName.HeaderText = "이름";
            this.PointName.Name = "PointName";
            // 
            // Value
            // 
            this.Value.FillWeight = 70F;
            this.Value.HeaderText = "값";
            this.Value.Name = "Value";
            // 
            // Description
            // 
            this.Description.FillWeight = 70F;
            this.Description.HeaderText = "설명";
            this.Description.Name = "Description";
            // 
            // DefaultValue
            // 
            this.DefaultValue.FillWeight = 70F;
            this.DefaultValue.HeaderText = "초기값";
            this.DefaultValue.Name = "DefaultValue";
            // 
            // ActiveString
            // 
            this.ActiveString.HeaderText = "Active문자열";
            this.ActiveString.Name = "ActiveString";
            // 
            // InactiveString
            // 
            this.InactiveString.HeaderText = "InActive문자열";
            this.InactiveString.Name = "InactiveString";
            // 
            // AlarmCondition
            // 
            this.AlarmCondition.HeaderText = "알람조건";
            this.AlarmCondition.Name = "AlarmCondition";
            // 
            // PointCtrlForm
            // 
            this.AutoScaleDimensions = new System.Drawing.SizeF(7F, 12F);
            this.AutoScaleMode = System.Windows.Forms.AutoScaleMode.Font;
            this.ClientSize = new System.Drawing.Size(639, 467);
            this.Controls.Add(this.tableLayoutPanel1);
            this.FormBorderStyle = System.Windows.Forms.FormBorderStyle.None;
            this.Name = "PointCtrlForm";
            this.Text = "LG-DDC";
            this.tableLayoutPanel1.ResumeLayout(false);
            this.tableLayoutPanel1.PerformLayout();
            ((System.ComponentModel.ISupportInitialize)(this.dataGridView1)).EndInit();
            this.ResumeLayout(false);

        }

        #endregion

        private System.Windows.Forms.TableLayoutPanel tableLayoutPanel1;
        private System.Windows.Forms.Button BtnBack;
        private System.Windows.Forms.ComboBox CmbMainDevice;
        private System.Windows.Forms.ComboBox CmbSubDevice;
        private System.Windows.Forms.DataGridView dataGridView1;
        private System.Windows.Forms.Button BtnRefresh;
        private System.Windows.Forms.Label label1;
        private System.Windows.Forms.DataGridViewTextBoxColumn ID;
        private System.Windows.Forms.DataGridViewTextBoxColumn PointName;
        private System.Windows.Forms.DataGridViewTextBoxColumn Value;
        private System.Windows.Forms.DataGridViewTextBoxColumn Description;
        private System.Windows.Forms.DataGridViewTextBoxColumn DefaultValue;
        private System.Windows.Forms.DataGridViewTextBoxColumn ActiveString;
        private System.Windows.Forms.DataGridViewTextBoxColumn InactiveString;
        private System.Windows.Forms.DataGridViewTextBoxColumn AlarmCondition;

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T00:15:20.630

我找到了解决方案，而且相当简单。

DGV 的行和列大小必须设置为“百分比（相对）”而不是“绝对”，以便对接正常工作。

您可以通过右键单击 DGV 的一个单元格并单击编辑行/列属性来编辑大小。

# javascript - .next() 的奇怪行为和 jQuery 的简单幻灯片

> ID：11076813
> 
> 赞同：0
> 
> 时间：2012-06-18T04:05:17.237
> 
> 标签：javascript, jquery

几个小时以来，我一直在用这个把头撞到墙上——不走运。简而言之，我似乎无法从 next() jQuery 方法中获得所需的功能。我试图在单击图像时显示 DOM 中的下一个 img 标签。

```
$(images).each(function(i){

    $('#images').append($(this).css({

        'display':(i) ? 'none' : 'in-line'

    }).click(function(){

        $(this).next().css({'display':'in-line'});

        $(this).css({'display':'none'});

    }));
}); 
```

所需的图像消失了，但没有显示“下一个（）”。有什么大主意？下面是环境：

```
<div id="images">
    <img src="imgs/1.jpg" style="width: 333.33333333333337px; height: 500px; position: absolute; top: 50%; left: 50%; margin-top: -250px; margin-left: -166.66666666666669px; display: none; ">
    <img src="imgs/2.jpg" style="width: 333.3333333333333px; height: 500px; position: absolute; top: 50%; left: 50%; margin-top: -250px; margin-left: -166.66666666666666px; display: none; ">
    <img src="imgs/3.jpg" style="width: 333.3333333333333px; height: 500px; position: absolute; top: 50%; left: 50%; margin-top: -250px; margin-left: -166.66666666666666px; display: none; ">
    <img src="imgs/4.jpg" style="width: 333.3333333333333px; height: 500px; position: absolute; top: 50%; left: 50%; margin-top: -250px; margin-left: -166.66666666666666px; display: none; ">
    <img src="imgs/7.jpg" style="width: 500px; height: 333.3333333333333px; position: absolute; top: 50%; left: 50%; margin-top: -166.66666666666666px; margin-left: -250px; display: none; ">
</div> 
```

这与这些元素是通过 jQuery 动态创建的事实有关吗？值得注意的是，动态创建的元素的迭代仅在图像加载后才开始。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T04:10:18.453

它`inline`不是`in-line`

```
$(this).next().css({'display':'inline'}); 
```

# git - 将裸仓库文件更新到 git

> ID：11076817
> 
> 赞同：1
> 
> 时间：2012-06-18T04:07:20.387
> 
> 标签：git

我有一个裸仓库，我直接编辑了文件而没有执行`git commit -a -m`命令，因为我很着急，是否可以更新 git 以了解我所做的更改？因为当我`git status`在裸回购上做一个时，我得到一个：

```
fatal: This operation must be run in a work tree 
```

**编辑：**这就是我为裸回购所做的：

```
#!/bin/bash
NAME=$1

mkdir git/$1
cd git/$1
git init --bare
echo "git clone /root/git/$1 /tmp/git/$1" >> hooks/post-receive
echo "cp -rp /tmp/git/$1/* /var/www/$1" >> hooks/post-receive
echo "rm -rf /tmp/git/$1" >> hooks/post-receive 
```

所以我所做的是直接编辑`/var/www/$1/`目录中的文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T14:00:56.720

好吧，我想你基本上可以做与该`post-receive`钩子正在做的事情相反的事情（未经测试）：

```
git clone /root/git/<repo> /tmp/<tmprepo>
cp -rp /var/www/* /tmp/<tmprepo>
cd /tmp/<tmprepo>
git checkout <branch_to_put_cruft_on>
git commit -a -m "collecting misc edits from web tree"
git push origin <branch_to_put_cruft_on>
cd -
rm -rf /tmp/<tmprepo> 
```

`/var/www`如果在 repo 中的内容之外还有其他文件，则`cp`捕获的内容超出了必要的范围，但`git commit -a`应该忽略当前未跟踪的文件。

您可能也可以使用`git`s`--git-dir`和`--work-tree`options 来完成此操作，这可能会提供更简洁的解决方案，但我没有广泛使用这些解决方案。这些方面的东西（也未经测试，YMMV，等等，等等......）：

```
git clone /root/git/<repo> /tmp/<tmprepo>
cd /tmp/<tmprepo>
git checkout <somebranch>
git --git-dir=/tmp/<tmprepo>/.git --work-tree=/var/www commit -a -m "collect edits"
git push origin <somebranch>
cd -
rm -rf /tmp/<tmprepo> 
```

为了更加小心，而不是做`git commit -a`，将`--git-dir`and`--work-tree`选项与适当的`git add`s 系列一起使用并进行正确的提交。

# android - 安卓推特

> ID：11076821
> 
> 赞同：0
> 
> 时间：2012-06-18T04:07:39.147
> 
> 标签：android, twitter

我正在开发和应用程序，我想从 Twitter 获取一些提要，例如图片、名称、推文、时间和每条推文的回复次数。我做了所有但无法获得每条推文的回复数量......提前帮助我......我也在发布我的代码。

```
Twitter unauthenticatedTwitter = new TwitterFactory().getInstance();
                 Paging paging = new Paging(1, 100);
                 List<twitter4j.Status> statuses = unauthenticatedTwitter.getUserTimeline("BeingSalmanKhan",paging);

                         for (Status status3 : statuses) 
                          {
                             TwitterFeeds tFeeds = new TwitterFeeds();
                                 System.out.println(status3.getText());
                                 tFeeds.strTweet = status3.getText();
                                 tFeeds.strDate  = status3.getCreatedAt().toString();
                                 System.out.println("---------------------------------- " + status3.getSource());

                                 al_tweets.add(tFeeds);

                          }
                         str_tw_name    =   unauthenticatedTwitter.showUser("BeingSalmanKhan").getName();
                         str_tw_imgurl  =   unauthenticatedTwitter.showUser("BeingSalmanKhan").getProfileImageURL().toString();

                         bitmap_twpic = NewsActivity.DownloadImage(str_tw_imgurl); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T08:01:36.730

试试这段代码……它对我有用……希望对你也有用

```
try {
                   Twitter unauthenticatedTwitter = new TwitterFactory().getInstance();
                   //URLEntity[] uent= 
                 //First param of Paging() is the page number, second is the number per page (this is capped around 200 I think.
                 Paging paging = new Paging(1, 100);
                 List<twitter4j.Status> statuses = unauthenticatedTwitter.getUserTimeline("ashabhosle",paging);
                 System.out.println("status no 2 ="+statuses.get(2).toString());
                 long retweetcnt=statuses.get(2).getRetweetCount();
                 System.out.println("retweet count on 2nd tweet "+retweetcnt);
                         for (Status status3 : statuses) 
                          {
                                 System.out.println(status3.getText());
                          }
            } 
               catch (Exception e) {
                e.printStackTrace();
                System.out.println("Failed to get timeline: " + e.getMessage());

            } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T04:24:02.407

尝试 getRelatedResults()，给出回复 + 提及的列表，它最接近获得回复。

# php - 根据 IP 向 Web 访问者显示自定义消息

> ID：11076823
> 
> 赞同：0
> 
> 时间：2012-06-18T04:07:46.533
> 
> 标签：php, javascript, ip

我希望能够根据他们的 IP 向我网页的滥用者显示个人信息。我经营一个出租车预订网站，但我一直很少有游客（总是相同的 IP 范围）只是在虚假预订中预订。

当他们来到我的网站时，我希望能够发送或显示一条消息，以便他们知道我们正在追踪他们的活动，任何人都可能放弃那里的虚假预订。

有什么办法吗？

先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T04:12:47.220

你可以做类似的事情

```
if ($_SERVER['REMOTE_ADDR'] == '8.8.8.8') {
   print 'Go away';
} 
```

一个更好的主意是做一些比[地狱禁令](http://www.codinghorror.com/blog/2011/06/suspension-ban-or-hellban.html)更长的事情，这样他们就不会想出如何绕过它。你总是冒着影响实际客户的风险。

# asp.net - 在 wordpress 和 asp.net 网站中集成信用卡借记卡 NetBanking Airtel Money

> ID：11076825
> 
> 赞同：2
> 
> 时间：2012-06-18T04:07:58.577
> 
> 标签：asp.net, wordpress, payment-gateway

我想知道如何在 wordpress 网站和 asp.net 网站中集成印度支付选项

我想将以下内容集成到我的网站

*   信用卡
*   借记卡
*   网上银行
*   电信货币

我怎样才能获得更多详细信息？有没有支持所有这些功能的插件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T04:53:13.393

我认为没有任何直接插件可以支持在线货币交易。印度的支付网关是付费服务，您必须联系 billdesk 等机构。

# c# - 为什么 ClientID 不评估？

> ID：11076826
> 
> 赞同：0
> 
> 时间：2012-06-18T04:08:39.043
> 
> 标签：c#, asp.net, .net

我在我的 aspx 的用户控件中有这个：

```
<asp:TextBox TextMode="MultiLine" onkeydown="textCounterLatest('<%=txtContent.ClientID%>' , '<%=remLen.ClientID %>', 500);"
                onkeyup="textCounterLatest( '<%=txtContent.ClientID%>' , '<%=remLen.ClientID %>', 500);" ID="txtContent" MaxLength="500"
                runat="server" Height="85px" Width="100%"></asp:TextBox> 
```

但是这个 clientID 没有评估。相反，生成的 HTML 是：

```
<textarea style="height:85px;width:100%;" onkeyup="textCounterLatest( '&lt;%=txtContent.ClientID%&gt;' , '&lt;%=remLen.ClientID %&gt;', 500);" onkeydown="textCounterLatest('&lt;%=txtContent.ClientID%&gt;' , '&lt;%=remLen.ClientID %&gt;', 500);" id="ctl00_ContentPlaceHolder1_GridView2_ctl02_ucTaxAnswer_txtContent" cols="20" rows="2" name="ctl00$ContentPlaceHolder1$GridView2$ctl02$ucTaxAnswer$txtContent"></textarea> 
```

有人可以帮帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T04:13:51.227

尝试这个

```
<asp:TextBox TextMode="MultiLine" onkeydown='<%= "textCounterLatest(\"" + txtContent.ClientID + "\", \"" + remLen.ClientID + "\")" %>'                 ID="txtContent" MaxLength="500" runat="server" Height="85px" Width="100%"></asp:TextBox> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T04:16:11.817

因为您已经在 ASP.NET 代码块中，所以它正在转义 XML。因为你在一个代码块中，所以只需进行正常的字符串连接，你应该没问题：

```
onkeyup="textCounterLatest( '<%=txtContent.ClientID%>' , '<%=remLen.ClientID %>', 500);" 
```

至

```
onkeyup="textCounterLatest('" + txtContent.ClientID + "' , '" + remLen.ClientID + "', 500);" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T04:15:05.080

未评估代码，因为它位于标记中的文本文字内。

我的首选解决方法是“静态”ClientIDMode。如果做不到这一点（例如，在数据绑定项或旧代码中），我将在标头中有一个 javascript 对象，主要用于 clientID，并在我的 html/javascript 标记中的任何地方引用它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-18T04:34:12.323

您可以在后面的代码中以真正的网络表单方式执行类似的操作：

```
txtContent.Attributes.Add("onkeyup", string.Format("textCounterLatest('{0}' , '{1}', 500);", txtContent.ClientID, remLen.ClientID)); 
```

我承认它与任何其他 Web 开发语言相比都非常尴尬，但欢迎使用 Webforms！

# javascript - 如何使 div 对角线动画？

> ID：11076830
> 
> 赞同：3
> 
> 时间：2012-06-18T04:09:55.410
> 
> 标签：javascript, jquery

我比较精通html和css，但不是javascript和jquery。我试图让一个 div 对角线移动，但它不起作用。
这是我的代码：

```
<html>
<head>
<meta charset="utf-8">
<link href="style.css" rel="stylesheet"/>
<script type="text/javascript" src="http://code.jquery.com/jquery-1.7.2.min.js"></script>
</head>
<body>
<script type="text/javascript"> 
$(document).ready(function(){
 $("#box1 div").animate({left: '+=150', top: '+=150'}, 1000);​​​​​​​​​​​​​​​
});
</script>
<div id="box1"></div>
</body>
</html> 
```

我知道这可能真的很愚蠢，但是有人知道问题出在哪里吗？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T04:15:35.407

您必须先制作它`position: absolute`或`relative`在 CSS 中制作它。

```
#box{
    position: absolute;
}

$("#box1").animate({left: '+=150', top: '+=150'}, 1000); 
```

哦，是的，这样做：

```
$("div#box1")   //correct 
```

代替：

```
$("#box1 div")  //incorrect 
```

演示：http: [//jsfiddle.net/DerekL/bwg8R/](http://jsfiddle.net/DerekL/bwg8R/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T04:15:28.510

要使用动画制作某些东西`left`，并且`top`需要定位元素。要么`relative`or ，`absolute`否则不对元素做任何事情。`left``top`

在此处查看我的示例：http: [//jsbin.com/ayafup/edit#html,live](http://jsbin.com/ayafup/edit#html,live)

并将您的`#box1`元素直接定位为，而不是像您所做的那样将`$(#box1)`所有 child 都放在其中，`div``$(#box1 div)`

还要将您的脚本向下移动到底部，`</body>`以获得更好的性能和更好的实践。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T04:15:44.270

给您的 div 一些位置，因为在设置位置后使用 left 和 top

```
<div id="box1" style="position:absolute;">s</div> 
```

在 javascript 中

```
$("#box1 div").animate({left: '+=150', top: '+=150'}, 1000); 
```

应该

```
$("#box1").animate({left: '+=150', top: '+=150'}, 1000); 
```

因为上一个是选择 #box1 的子项

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-18T05:01:50.620

这是我为动画效果找到的最佳解决方案。我没有任何限制来支持旧版本的浏览器，而不是你的动画就像吃蛋糕一样。

试试这个[http://daneden.me/animate/](http://daneden.me/animate/)

干杯...！！！

# c# - HTML 编码 asp.net 树视图节点

> ID：11076834
> 
> 赞同：2
> 
> 时间：2012-06-18T04:10:35.613
> 
> 标签：c#, asp.net

我想知道如何在 asp.net 树视图控件中对节点进行 html 编码？我有一个要求，要求节点具有接受“<”>“符号的项目。

下面的代码示例是我目前用作树节点的代码示例。

```
public class SampleTreeNode : TreeNode
{
    public SampleTreeNode(string text, string value)
        : base(HttpUtility.HtmlEncode(text), value)
    {

    }
} 
```

问题在于，当我把它放在一个带有文本“”的节点时。它将文本显示为“<Test>”而不是“”。我不确定这是否是放置编码命令的最佳位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T04:14:56.577

使用 HttpContex.Current.Server.HtmlEncode 和 HttpContex.Current.Server.HtmlDecode

# wcf - WCF 持久变量？

> ID：11076836
> 
> 赞同：1
> 
> 时间：2012-06-18T04:10:47.360
> 
> 标签：wcf, global-variables, durable-services

由于各种原因，我希望能够在对 WCF 服务的调用之间保存变量。我有以下内容，但我读到使用“Single”是一个非常糟糕的主意。这确实是一个原型，没有什么重要的，但它确实有多个用户，**我担心单个用户将意味着它在所有用户会话中设置相同的变量。有人可以确认/否认吗？** 当我将它设置为 PerSession 时它根本不起作用，这在逻辑上是我认为我想要的。

```
<ServiceContract(Namespace:="")> _
<AspNetCompatibilityRequirements(RequirementsMode:=AspNetCompatibilityRequirementsMode.Allowed)> _
<ServiceBehavior(InstanceContextMode:=ServiceModel.InstanceContextMode.Single, ConcurrencyMode:=ServiceModel.ConcurrencyMode.Single)> _
Public Class MyServices
    Public testint As Integer = 0

    <WebGet()>
    <OperationContract()> _
    Public Function test1() As Boolean
        testint = 42
        return true
    End Function

    <WebGet()>
    <OperationContract()> _
    Public Function test2() As Integer
        return testint
    End Function
End Class 
```

我读过一些关于“持久”服务的内容，但 VS2010 只允许我为 InstanceContextMode 选择 PerCall、PerSession 和 Single。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T06:40:01.253

查看关于会话处理 ( [MSDN](http://msdn.microsoft.com/en-us/library/ms733040.aspx) )的 WCF 文档

# ios - iOS Provisioning 门户中的开发证书是什么？

> ID：11076838
> 
> 赞同：0
> 
> 时间：2012-06-18T04:10:59.483
> 
> 标签：ios, xcode, app-store, certificate, ios5

谁能解释一下开发证书的使用以及如何创建新的开发证书？还有什么是 WWDR 中级证书？我在 iOS 配置门户中找到了一个名为证书的部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T04:15:20.383

当您拥有有效的配置文件时，开发证书允许您在设备上进行测试。WWDR 证书是验证其他证书是否来自苹果的中间证书。

至于*如何创建*开发证书，iOS 门户中有方便的说明。简而言之，您需要下载并安装 WWDR 证书，并使用 Keychain Access 的 Certificate Assistant 生成证书请求（打开 Keychain Access，然后在菜单栏中的**Keychain Access**下转到 Certificate Assistant，然后 Request a Certificate从证书颁发机构...等）并使用它来生成 certSigningRequest 文件（确保单击“保存到磁盘”和“指定密钥对”），将其上传到 iOS 配置门户，当团队负责人批准后，该门户将为您提供下载并安装到钥匙串中的证书，然后您可以安装与该证书匹配的配置文件。

# java - 从 src 目录中的类访问测试目录中的类

> ID：11076841
> 
> 赞同：0
> 
> 时间：2012-06-18T04:11:08.420
> 
> 标签：java, maven

嗨，我已经尝试了以下内容。我有使用 maven 构建的 test 和 src 目录的源代码。我在我的测试文件夹中创建了一个类，并尝试从我的 src 目录中的一个类访问（创建对象、静态方法）。但是导入测试类不适用于我的 src 类。

我怎样才能做到这一点。我知道这不是主意。它不应该以这种方式访问​​类。但我需要知道它被阻止的原因。以及删除该块的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T06:20:01.980

正如您所说，在 Src 类中访问 Test 类不是一个好主意。

但这绝对是可能的，只要确保`src/test/java`文件夹在类路径中。

如果您使用的是 Eclipse IDE，那么

`right click the project -> Properties -> Java Build Path -> Source`

确保`src/test/java`添加文件夹。

# c++ - 有形状和圆形类，以及点类。以点类为一个参数创建圆时出现分段错误

> ID：11076845
> 
> 赞同：0
> 
> 时间：2012-06-18T04:11:49.030
> 
> 标签：c++, inheritance, constructor, segmentation-fault, abstract-class

这是我的 Shape.h。忽略所有被注释掉的代码。那是来自我认为不正确的版本，但我把它留在了那里，以防我错了。

```
#include <iostream>
#include <string>
#include <fstream>
#include <sstream>
#include <math.h>
#include "Point.h"

using namespace std;

class Shape {
    public:

        Shape() {}
        virtual ~Shape() {}

        /*
        virtual float calcArea(const Shape& s) const = 0;
        virtual float calcCircum(const Shape& s) const = 0;
        virtual string calcBox(const Shape& s) const = 0;
        virtual void display(const Shape& s) const = 0;
        */

            virtual float calcArea() const = 0;
            virtual float calcCircum() const = 0;
            virtual string calcBox() const = 0;
            virtual void display() const = 0;

};

class Circle : public Shape {
    public:
    int radius;
    int pointX;
    int pointY;
    Point *middlePoint;
    float PI;

    Circle() : Shape() {
        middlePoint = new Point(0,0);
        radius = 0;
    }
    ~Circle() {}

    Circle(int rad, Point& p) : Shape() {
        PI = 3.141592;
        *middlePoint = p;
        pointX = p.getX();
        pointY = p.getY();
        radius = rad;
    }

    // float calcArea(const Circle& s) const {
    float calcArea() const {
        float tempArea;
    //  tempArea = PI * s.radius * s.radius;
    tempArea = PI * radius * radius;
        return tempArea;
        }

    // float calcCircum(const Circle& s) const {
    float calcCircum() const {
    //  int diameter = 2 * s.radius;
    int diameter = 2 * radius;
        float tempCircum;
        tempCircum = PI * diameter;
        return tempCircum;

    }

    // string calcBox(const Circle& s) const {
    string calcBox() const {
//      int x = s.pointX;
//      int y = s.pointY;
//      int r = s.radius;
    int x = pointX;
    int y = pointY;
    int r = radius;
        int tlX = x - r;
        int tlY = y + r;

        int blX = x - r;
        int blY = y - r;

        int trX = x + r;
        int trY = y + r;

        int brX = x + r;
        int brY = y - r;

        Point *topLeft = new Point(tlX,tlY);
        Point *bottomLeft = new Point(blX,blY);
        Point *topRight = new Point(trX,trY);
        Point *bottomRight = new Point(brX,brY);

        stringstream output;
        string tempOut;
        output << *topLeft << *bottomLeft << *topRight << *bottomRight;
        tempOut = output.str();
        return tempOut;

    }

    // void display(const Circle& s) const {
    void display() const {
        cout << "Class Name: Circle" << endl;
//      float tmpArea = calcArea(s);
    float tmpArea = calcArea();
        cout << "Area = " << tmpArea << endl;
//      cout << "Radius = " << s.radius << endl;
    cout << "Radius = " << radius << endl;
//      float tmpCircum = calcCircum(s);
    float tmpCircum = calcCircum();
        cout << "Circumference = " << tmpCircum << endl;
        cout <<"Middle Point = " << middlePoint;
//      string bbox = calcBox(s);
    string bbox = calcBox();
        cout <<"Bounding Box Points = " << bbox;
    }
}; 
```

* * *

这是我的 TMA4Question1.cpp 代码。

```
#include <iostream>
#include <string>
#include <fstream>
#include <sstream>
#include <math.h>
#include "Shape.h"

int main() {

    Point *circlePoint = new Point(10,-5);

    Circle *mainCircle = new Circle(23,*circlePoint);
} 
```

好的。是的，这是大学的家庭作业。我不只是在寻找答案，我想知道为什么这个程序给我一个分段错误以及如何纠正它。

我知道错误出现在 Circle 代码中，我在 Circle 类的构造函数中传递了一个指向 circlePOint 的指针。我不知道为什么它会产生段错误。我希望有人可以提供一些见解。谢谢。

对不起，如果代码是混乱的。很难用 4 个空格和所有这些将它正确粘贴到这里。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T08:44:09.497

为什么在类中使用指向 Points 的指针？您只会以这种方式产生内存泄漏，并且（没有您自己的复制操作）会导致问题，因为中点可能由不同的圈子共享。

PS：并且不需要在每个圆圈中都有一个 PI 值（即使是非常量） - 只需使用（公平的）cmath 中的常数即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T04:25:45.153

`middlePoint`未在您的第二个`Circle`构造函数中分配。在给它一些内存之前，您正在为其分配一个值。顺便说一句，我不明白为什么需要指针。

# java - 'Else If' 在 Java 中给出错误“'else' without 'if'”

> ID：11076846
> 
> 赞同：2
> 
> 时间：2012-06-18T04:11:58.447
> 
> 标签：java, netbeans, if-statement

我正在尝试使用 NETBEANS 7.1.2 进行一些 Java 编码，但是当我尝试构建此代码时，它给了我错误“'else' without 'if'”：

```
private void jTextField1ActionPerformed(java.awt.event.ActionEvent evt) {
    // TODO add your handling code here:
    String search1;
    search1 = jTextField1.getText();

    // stone
    if (search1=="Stone" || search1=="Rock" || search1=="stone" || search1=="rock" || search1=="1");
    {
        jTextField2.setText("Stone: 1");

    }

    // grass
    else if (search1=="Grass" || search1=="grass");
    {
        jTextField2.setText("Grass: 2");
    }

} 
```

问题出现在 //grass 下的“else if”。难道我做错了什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-18T04:15:08.227

在这一行：

```
if (search1=="Stone" || search1=="Rock" || search1=="stone" || search1=="rock" || search1=="1"); 
```

而这一行：

```
else if (search1=="Grass" || search1=="grass"); 
```

您必须在最后删除`;`。那些分号放错了位置，编译器会将第一`if`条语句解释为`if`没有主体，将 之间的代码解释`{}`为块作用域，而`else if`语句则解释为`else`没有`if`.

另外，请注意所有字符串比较都是错误的，在 Java 中，您*必须*使用`equals()`比较两个字符串的**相等性**，而不是`==`比较**身份**的字符串。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T04:14:08.553

你有一个“;” 在第一个条件之后。

编译器假定这是 if 语句的结尾，因此编译器在“else if”行显示错误。去除 ”;” 应该没问题！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T10:26:34.047

我遇到了和你一样的问题。我发现这是解决方案，对我来说效果很好。我想这就是你需要的。

```
 String unit=jTextField1.getText();
            if(unit.equals("kg") || unit.equals("gm")){
    // some code
            }
else if(unit.equals("dzn")||unit.equals("qty")){
    // some code
        } 
```

# c# - 使用子域保护 mvc 应用程序

> ID：11076853
> 
> 赞同：0
> 
> 时间：2012-06-18T04:13:37.360
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-3

我有一个 mvc 应用程序，我允许企业使用 [https://storea.mydomain.com](http://businessA.mydomain.com) [https://storeb.mydomain.com](http://businessA.mydomain.com)等登录

每个企业都创建了用户，我有一个将企业 ID 与 EmployeeId 匹配的表。我正在尝试锁定应用程序，以便经过身份验证的 businessA 用户无法访问来自 BusinessB 的信息。

我检查用户是否可以访问子域的最佳位置在哪里？我是否覆盖 OnActionExecuted 操作，检查子域是什么，然后查看会话值以查看它们是否匹配，如果不同则将它们注销。

或者这有更优雅的方式来做到这一点？

关于最佳实践的建议和建议会很棒！谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T05:55:46.027

自定义`Authorize`属性似乎是执行此操作的好地方。您可以覆盖[`AuthorizeCore`](http://msdn.microsoft.com/en-us/library/system.web.mvc.authorizeattribute.authorizecore.aspx)您将有权访问 HttpContext 的方法，并且您将能够基于子域执行自定义授权逻辑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T06:18:44.147

据我了解，您的 MVC 应用程序使用单个数据库来存储您拥有的所有业务的信息。这就是为什么您会担心业务 A 访问业务 B 信息的原因。

所以对我来说，您的数据库是检查哪些信息可以访问每个用户的地方，具体取决于他们所属的业务。

我认为您甚至不需要为此使用子域。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T14:40:48.417

在这种情况下，我使用存储库模式，并且在每个查询/数据访问中，您确保传入包含业务 ID 的 where 子句。前任：

```
 select * from orders where orderid=@orderId and companyID=@companyId 
```

对查询执行此操作非常重要，因为您希望数据规则到位以防止不正确的查询。例如，对 Authorize 属性执行此操作并不能保证有人没有篡改数据来加载另一家公司的信息。

此外，我还有[http://mvcsecurity.codeplex.com/](http://mvcsecurity.codeplex.com/) 扩展来帮助保护存储在页面上的 id 以帮助防止篡改。

# javascript - 下载文件不适用于 iframe

> ID：11076855
> 
> 赞同：2
> 
> 时间：2012-06-18T04:13:51.290
> 
> 标签：javascript, html, google-chrome, iframe

我正在制作一个快速应用程序，当用户单击“下载”时无法导出文件。

我的方法是向服务器发出带有内容的 ajax 请求，然后在服务器上创建文件并发回文件路径。从那里，我使用文件路径调整元素的`src`属性。`iframe`

但是，Chrome（或任何浏览器，实际上）什么都没有发生。如果我查看检查器的*网络*选项卡，它显示它收到了文件 OK（带有 200 响应代码），并且内容在那里。此外，`iframe`具有正确的`src`. 我想弹出一个下载对话框，但似乎无法得到它。

有任何想法吗？谢谢！

* * *

**示例代码**：

*app.js*（服务器）

```
app.post('/create-html', function(req, res) {

    // explicitly set the headers on the server
    res.header('Content-Type', 'application/octet-stream');
    res.header('Content-Disposition', 'attachment; filename="test.html"')

    var html      = req.body.content
       , name      = "test.html"
       , filepath  = (__dirname + "/public/files/" + name)
       , json_resp = {
            data: ''
          , err: false
         };

    fs.writeFile( filepath, html, 'utf8', function(err, data) {
        // write the file and res.send the json_resp, so we can
        // access the filename on the client
    })
}) 
```

*script.js*（客户端）

```
$("#export-html").click( function(e) {
    e.preventDefault();
    var html = $("#html-wrapper").html(); // the html of the file we want to make

    $.ajax({
          method: "POST"
        , url: "/create-html"
        , headers: {
            "Content-Disposition": 'attachment; filename="test.html"'
          }
        , type: "JSON"
        , success: function(resp) {
              var iframe = document.getElementById("iframe")
                , fp_prefix = "/files/"
                , fp = fp_prefix + resp.data; // ex: "/files/test.html" - the path where the file can be accessed

              iframe.src = fp
          }
    })

}) 
```

我`200`在 POST 到服务器 ( `/create-html`) 和服务器发回数据时( ) 得到 s `test.html`。文件的内容`test.html`显示在 Web 检查器中，并`/files/test.html`显示页面。但是，**我无法下载 HTML**。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T23:17:19.750

使用 ExpressJS，您可以使用：

```
apt.get('/create-html', function (req, res) {
  var name       = "test.html"
      , filepath = (__dirname + "/public/files/" + name);

  res.download(filepath, name);
}); 
```

# php - 如何在每月的第 7 天使用 cron 作业下载文件

> ID：11076856
> 
> 赞同：-1
> 
> 时间：2012-06-18T04:14:05.113
> 
> 标签：php, cron

我想让用户设置选项以在每月的第 7 天生成 csv 报告。我有生成 csv 的代码，但不知道如何通过每月自动生成来实现它。cron 作业是否适用于这种情况。如果是这样，那么如何设置路径来为用户保存报告。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T04:20:43.703

Ofc 你可以这样做。您必须将数据存储在某处并在需要时调用 cron，该 cron 检查数据然后调用报告。

您的 cron 条目应如下所示：

```
0 0 7 * *  php /your/script/file.php 
```

可以在[此处](http://en.wikipedia.org/wiki/Cron)找到更多详细信息和带有教程示例的良好解释。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T04:21:34.390

是的，cron 很好。编写一个可从 CLI 运行的 PHP 脚本，该脚本获取用户列表、生成他们的报告并使用某种命名方案将它们保存在某处，例如“$userid-report.csv”。

如果您有很多报告，您可能应该制作 2 个脚本 - 一个用于生成，一个用于通过电子邮件发送它们。

# javascript - codeigniter uri 段 url 附加在末尾

> ID：11076858
> 
> 赞同：0
> 
> 时间：2012-06-18T04:14:15.033
> 
> 标签：javascript, uri, segments

网址：`http://localhost/back-office/index.php/staff/shopping`

当我在每个 onchange 事件上更改类别时，我希望 url 应该是这样的

```
http://localhost/back-office/index.php/staff/shopping/1
http://localhost/back-office/index.php/staff/shopping/2 
```

为此，我在更改事件上编写了 javascript

```
function cat()
{
    var x = document.getElementById('cat').value;   
    document.location = "shopping/" + x;

}

     <select name="cate" id="cat" onchange="cat()">
        <option value="0">Select Cateogry</option>
        <?php 
        foreach($get_cat as $category)
        {
            echo "<option value=$category->categoryid>$category->category</option>";            
        }
        ?>    
    </select> 
```

javscript 有效，但 url 像

```
http://localhost/back-office/index.php/staff/shopping/shopping/2

http://localhost/back-office/index.php/staff/shopping/shopping/shopping/shopping/shopping/shopping/1 
```

在每个cagetory drop box onchange 事件中，最后都会像这样附加url。

我怎么能解决这个问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T04:39:05.587

你需要专门编码你的网址..试试这个

```
function cat()
{
    var x = document.getElementById('cat').value;   
    url  = "http://localhost/back-office/index.php/staff/shopping/" + x;
    window.location = url;

} 
```

# .net - 使用元数据进行 Autofac 排序

> ID：11076861
> 
> 赞同：1
> 
> 时间：2012-06-18T04:14:54.910
> 
> 标签：.net, autofac

我正在尝试通过 Autofac 解决我的依赖项的 IEnumerable，但我需要能够以某种方式对它们进行排序。以为我会使用 Autofac 的元数据来实现这一点，但我不能让它工作：

这是注册码：

```
builder.RegisterAssemblyTypes(assemblies.ToArray())
    .AssignableTo<IDiscoverable>()
    .As<IDiscoverable>()
    .AsImplementedInterfaces()
    .WithMetadata<DisplayOrderAttribute>(c => c.For(x => x.Order, ???)); 
```

所以在问号中，我需要将值映射到我班级的一个属性。

```
[DisplayOrder(5)]
public class Test : IDiscoverable
{
}

[DisplayOrder(1)]
public class Test : IDiscoverable
{
} 
```

这样当我解决它们时，我就能得到一个排序的集合：

```
public class Client
{
    public Client(IEnumerable<Meta<IDiscoverable>> discoverables)
    {
       //sort it using metadata here
       var sortedDiscoverables = discoverables.Sort(x => x.Order).Select(x => x.Value);
    }
} 
```

无论如何要在Autofac中实现这一目标？

*[更新]*我可以使用非类型化元数据执行以下操作，但似乎无法找到使用类型化元数据对象的方法。

```
.WithMetadata("Order", x => x.GetAttribute<DisplayOrderAttribute>().Order); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T15:19:45.273

Autofac 中的元数据存储在注册中，`IDictionary<string, object>`其中键是元数据名称，值是元数据值。这是在`Autofac.Core.IComponentRegistration`接口上定义的。

无论您使用哪个扩展 - `WithMetadataFrom<TAttribute>`（通常在使用属性时使用）或`WithMetadata`（当您直接指定元数据时） - 这一切都归结为字符串/对象对。

这意味着**就项目键而言，您将无法获得“强类型元数据”**。你总是需要在字符串中工作。

另外：如果您使用过`WithMetadataFrom`，则不必将 lambda 放在那里从元数据属性中选择 Order 属性。`WithMetadataFrom`自动抓取可读属性属性的值并将它们添加到字典中。

# javascript - 在asp中单击按钮上传文件

> ID：11076864
> 
> 赞同：1
> 
> 时间：2012-06-18T04:15:04.627
> 
> 标签：javascript, file-upload, windows-ce

我正在使用 WinCE OS 开发经典 ASP。我想从 WinCE 上传文件并保存在本地机器中。请分享文件上传所需的 JScript 函数，我可以将其放入包含文件中。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T09:16:00.527

我没有关于 asp classic 的信息，但我使用过 Asp.net，您可以使用 asp 接收文件以便从 wince 上传文件使用可以使用 c# 开发应用程序这里是一个示例。

其客户端 WinCE Application Code Function Upload(string Path, String FileName) 以文件路径和文件名作为输入并发布到网页

```
#region Upload
public bool Upload(string FilePath, string FileName)
{
string Url = "HTTP://test.mtsonweb.com/fileupload.ashx"; //  Change it to your page name
string BytesConfirmedReceived = "";
int BytesSent = 0;
bool Ret = false;
ASCIIEncoding encoding = new ASCIIEncoding();
try
{

if (File.Exists(FilePath +"\\"+ FileName) == false) { return true; }

//FileInfo oInfo = new FileInfo(FilePath + "\\" + FileName);
//BytesSent = Convert.ToInt32(oInfo.Length.ToString());

Url += "?myfile=" + FileName.Trim();

FileStream fr = new FileStream(FilePath + "\\" + FileName, FileMode.Open);

BinaryReader r = new BinaryReader(fr);
byte[] FileContents = r.ReadBytes((int)fr.Length);
BytesSent = FileContents.Length;

r.Close();
fr.Close();

WebRequest oRequest = WebRequest.Create(Url);

oRequest.Method = "POST";

oRequest.Timeout = 15000;

oRequest.ContentLength = FileContents.Length;

Stream oStream = oRequest.GetRequestStream();

BinaryWriter oWriter = new BinaryWriter(oStream);

oWriter.Write(FileContents);

oWriter.Close();

oStream.Close();

WebResponse oResponse = oRequest.GetResponse();
BytesConfirmedReceived = new StreamReader(oResponse.GetResponseStream(),
Encoding.Default).ReadToEnd();

oResponse.Close();

if (BytesSent.ToString() == BytesConfirmedReceived.Trim())
{
Ret = true;
}

}
catch (Exception ex)
{
MessageBox.Show(ex.Message);
}
return Ret;

}
#endregion 
```

现在你的页面可以处理任何你想要的使用脚本上传的文件，我使用 asp.net 和 c# 作为后端，下面是页面的源代码：

```
<%@ WebHandler Language="C#" Class="FileUpload" %>
using System;
using System.Xml;
using System.Data;
using System.Web;
using System.IO;
using System.Text;
using System.Runtime.InteropServices;
using System.Drawing;

public class FileUpload : IHttpHandler
{
public void ProcessRequest(HttpContext oContext)
{

int BytesSent = 0;
//string LocalPath = @"C:\Inetpub\wwwroot\";

string MyFile = "";

try
{

MyFile = oContext.Request["myfile"].ToString().Trim();
MyFile = HttpContext.Current.Server.MapPath("~/Demo/Files/" +

ASCIIEncoding encoding = new ASCIIEncoding();

BytesSent = oContext.Request.TotalBytes;

Class1 obj = Class1.GetInstance();

obj.FileName = MyFile;
obj.FileLength = BytesSent;

byte[] InComingBinaryArray =
oContext.Request.BinaryRead(oContext.Request.TotalBytes);
obj.Data = InComingBinaryArray;

if (File.Exists(MyFile) == true)
{
File.Delete(MyFile);
}

FileStream fs = new FileStream(MyFile, FileMode.CreateNew);
BinaryWriter w = new BinaryWriter(fs);
w.Write(InComingBinaryArray);
w.Close();
fs.Close();

FileInfo oInfo = new FileInfo(MyFile);
long a = (long)BytesSent;

oContext.Response.Write(oInfo.Length.ToString());

}
catch (Exception err) { oContext.Response.Write(err.Message); }

}

public bool IsReusable { get { return true; } }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T04:59:57.097

更好的方法是使用任何 JavaScript 库.. 像 jQuery..

以下是文件上传示例..

[http://pixelcone.com/jquery/ajax-file-upload-script/](http://pixelcone.com/jquery/ajax-file-upload-script/)

[如何异步上传文件？](https://stackoverflow.com/questions/166221/how-can-i-upload-files-asynchronously-with-jquery)

干杯:)

# php - 网页如何知道会话是否设置？

> ID：11076867
> 
> 赞同：0
> 
> 时间：2012-06-18T04:15:16.043
> 
> 标签：php, session

> **可能重复：**
> [$_SESSION 变量存储在哪里？](https://stackoverflow.com/questions/454635/where-are-session-variables-stored)

当我们使用会话时，我们需要在每个页面中启动会话。现在假设我已经将会话设置为`1.php`现在重定向到`2.php`，在 2.php 页面中我再次开始会话，`1.php`和之间没有任何链接`2.php`。`2.php`是不知道是什么`session id`的`1.php`。

现在我的问题是这`2.php`是如何`session id`开始的`1.php`。这个会话存储在哪里？它是如何工作的？

这里我们没有将任何参数从 1.php 传递到 2.php，因为 Frederick Marcoux 说 SESSION_START() 被 2.php 忽略。那么 2.php 将如何知道会话已经在运行。

如果它在服务器端，那么在多个会话的情况下，它将如何识别哪个会话用于哪个请求？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T04:20:44.377

会话是基于 Cookie 的。当您在一个页面上启动会话时，它将获得一个 ID。`session_destroy()`在您创建 a并使用 开始新会话之前，此 ID 将是相同的`session_start()`。

### 为什么会这样？

因为多个页面可能会使用相同的会话 ID 进行某些用户日志记录或跟踪。

### `2.php`上的`session_start()`是什么

它只是被服务器忽略了。如果你检查你的 PHP 日志，你会看到这样的事情：

```
SESSION_START() IGNORED. A SESSION HAS BEEN ALREADY STARTED. 
```

* * *

3个月前我有同样的问题，但不是在这个网站上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T05:27:26.823

这样想吧......

当有人访问您的 1.php 页面时，页面顶部的 session_start() 会在您的服务器（托管）上启动一个操作，并生成唯一的会话 ID。

然后将其附加到服务器上的每个页面（url）（在同一域下）（即：2.php 或 3.php），如果这些页面存在 session_start() 函数，则 SID 可用于脚本（在这些页面上）并且可以访问和验证。

如果您的页面 3.php 上的 SID 与同一用户在访问页面 1.php 时创建/生成的 SID 匹配，那么您知道该页面正在由同一个人访问并为他们执行其他操作例如，对于直接访问页面 3.php 并且没有获得必要 SID 的访问者，您不会这样做。

SID 从服务器传递到您的浏览器并作为 cookie 保存，直到它被清除或过期。

（*……我是不是把它稀释了很多？* :)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T04:22:07.197

尝试此`session_save_path()`方法以了解 whr`sessions`存储在您的 Web 服务器上。

看看`session.save_path`你的`php.ini`.

# xtk - 简单的颜色分配在带有 GWT 的 XTK 中不起作用（mesh.color = [0.7,0,0]）

> ID：11076872
> 
> 赞同：0
> 
> 时间：2012-06-18T04:15:40.430
> 
> 标签：xtk

@haehn 嗨，Haehn (XTK)

我正在使用带有 GWT 的 edge-XTK 并尝试渲染一个简单的 STL。然而，XTK 代码在我们为网格分配颜色的那一行失败了。

```
mesh.color = [0.7,0,0] // this line fails 
```

XTK 代码发出的错误消息：`"Invalid color"`

仅在将 XTK 与 GWT 一起使用时才会观察到此行为。

错误似乎来自此 XTK 代码片段

```
X.displayable.prototype.__defineSetter__('color', function(color) {

  // we accept only numbers as arguments
  if (!goog.isDefAndNotNull(color) || !(color instanceof Array) ||
      (color.length != 3)) {

    throw new Error('Invalid color.');

  } 
```

我猜问题出在 GWT 使用 iframe 构建页面的方式上……因为上面的 if 条件可能在 GWT 中失败。我想如果你用下面的代码片段替换上面的检查（从[这里](http://books.google.com/books?id=p7uyWPcVGZsC&pg=PA63&lpg=PA63&dq=isDefAndNotNull&source=bl&ots=x75PQwN1sL&sig=rkHLnkuvvTWLT1fFWlqL1KJFnrI&hl=en&sa=X&ei=nzveT867IYrK6gGYwLWhCw&sqi=2&ved=0CE4Q6AEwAA#v=onepage&q=isDefAndNotNull&f=false)得到想法）。它可能会解决问题。

```
use goog.isArray(color) instead of (color instanceof Array) 
```

你能调查和评论吗？

## 编辑：

嗨XTK

这是显示我如何将 XTK 与 GWT 一起使用的代码片段。

```
public class TestGwtXtk implements EntryPoint {

public void onModuleLoad() {
    testXtk();
}

    // GWT JSNI method, which allows mixing Java and JS natively. 
    // it is akin using c++ or c libraries in java or android

private native void testXtk() /*-{
    var r = new $wnd.X.renderer3D();
    r.container = 'xtk_container'; // div ele
    r.config.PROGRESSBAR_ENABLED = false;
    r.init();

    cube = new $wnd.X.cube();
    cube.lengthX = cube.lengthY = cube.lengthZ = 20;
    cube.color = [ 1, 1, 1 ]; // fails here in XTK code
    cube.center = [ 0, 0, 0 ]; // fails here in XTK code
    r.add(cube);
    r.render();
}-*/; 
```

}

正如内联注释所指出的，使用 javascript 数组失败。失败不是因为js数组使用，比如[0,0,0]或者new Array(0,0,0)错误。失败是因为 XTK 代码检查“数组实例”的方式。

## 编辑：2

亲爱的XTK

我能够从 git 签出 XTK 代码，进行我提议的更改，重新构建 XTK.js 并最终成功测试我的修复解决了问题。

例如：在 displayable.js 我注释了一行并添加了另一行：

```
// if (!goog.isDefAndNotNull(color) || !(color instanceof Array) || (color.length != 3)) {

if (!goog.isDefAndNotNull(color) || !(goog.isArray(color)) || (color.length != 3)) { 
```

我在 xtk 代码库的其他几个地方进行了类似的更改，以使我的用例继续运行。此处解释了为什么这是正确的解决方案：[Closure: The Definitive Guide](http://books.google.com/books?id=p7uyWPcVGZsC&pg=PA63&lpg=PA63&dq=goog.isArray&source=bl&ots=x76MHrN7xR&sig=Bo2pAEmf3PrkTQN2HchpPQdqSPE&hl=en&sa=X&ei=_446UMCeMe_ZigLWoIDwDA&ved=0CDIQ6AEwAA#v=onepage&q=goog.isArray&f=false)。您能否考虑在版本 8 的代码库中进行此修复？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T07:39:08.353

将 XTK 与 GWT 一起使用？你是什​​么意思 ？您是否编写了自己的包装器来编译带有从 Java 到 JavaScript 的 xtk 调用的代码？或者你直接在war文件中使用xtk.js并使用它手动编写一些JavaScript？还是您只使用 GAE（Google App Engine），即用于 Web 应用程序的 Google 环境（使用 GWT 制作的，但也不是从 Java 编译的）。请问你能更准确吗？

[在这里](https://stackoverflow.com/questions/2943805/javascript-instanceof-typeof-in-gwt-jsni)，他们处理 GWT 和类型测试的一些问题，您是否尝试使用“new”运算符创建数组？

```
var mycolor = new Array(0.7,0,0);
mesh.color = mycolor; 
```

# android - 无法切换 Android Activity

> ID：11076878
> 
> 赞同：0
> 
> 时间：2012-06-18T04:16:20.990
> 
> 标签：android, android-activity

我不明白。前一刻它工作，下一刻，它停止工作。

主要课程：

```
public class QuotesDatabaseActivity extends Activity implements OnClickListener {
    TextView tvQuotes;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        tvQuotes = (TextView) findViewById(R.id.tvQuotes);
        tvQuotes.setOnClickListener(this);
        Intent i = new Intent(QuotesDatabaseActivity.this, QuotesMain.class);
        startActivity(i);
        //Intent startNewActivityOpen = new Intent(QuotesDatabaseActivity.this, QuotesMain.class);
        //startActivityForResult(startNewActivityOpen, 0);

    } 
```

我的 AndroidManifest。

```
 <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:name=".QuotesDatabaseActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <activity
            android:name=".QuotesMain"
            android:label="@string/app_name" >
        </activity> 
```

就这么简单，而且不切换屏幕。以前是这样的。logcat 也没有错误。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T04:43:42.100

适合您的代码：

```
 public class QuotesDatabaseActivity extends Activity implements OnClickListener {
TextView tvQuotes;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    tvQuotes = (TextView) findViewById(R.id.tvQuotes);
    tvQuotes.setOnClickListener(this);
    }

    void onClick(View v)
    {
         if(v.getId()==R.id.tvQuotes)
         {

                 Intent i = new Intent(QuotesDatabaseActivity.this, QuotesMain.class);
                 startActivity(i); 
         }
   } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T04:22:25.900

试试这个方法。我认为它对你有帮助。

```
tvQuotes.setOnClickListener(new View.OnClickListener() {

    @Override
    public void onClick(View v) {
        Intent i = new Intent(QuotesDatabaseActivity.this, QuotesMain.class);
        startActivity(i);

    }
}); 
```

* * *

或在您`onClick`的方法中编写此代码。

```
 public void onClick(View v) {
        if(v.getId()==R.id.tvQuotes)
{
Intent i = new Intent(QuotesDatabaseActivity.this, QuotesMain.class);
        startActivity(i);
}

    } 
```

谢谢

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T04:30:44.700

in place of `startActivity(i);` , Put this `startActivityForResult(intent,0);`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-18T04:38:04.240

检查是否启动了哪个活动，因为根据您的代码 onCreate 将被调用并启动活动。当您必须通过单击任何组件来启动新活动时

还要检查你是否在新活动中给出了finish()。如果您没有得到解决方案，请发布您的要求。我会尽量给出解决方案。

# python - 为什么从 CGI/Perl 调用 Calibre/Python 会崩溃，而不是从 shell 调用？

> ID：11076879
> 
> 赞同：1
> 
> 时间：2012-06-18T04:17:11.347
> 
> 标签：python, perl, environment, calibre

我有一个调用 bash 脚本的 Perl 脚本。我使用的软件是[Calibre](http://calibre-ebook.com/)。当我从我的 ssh shell 调用这个 bash 脚本（Calibre's）时，它似乎工作正常。但是，当我从我的 Perl 脚本中调用它时，它会引发以下错误：

```
Traceback (most recent call last):
  File "site.py", line 58, in main
  File "site-packages/calibre/ebooks/conversion/cli.py", line 307, in main
  File "site-packages/calibre/ebooks/conversion/cli.py", line 260, in create_option_parser
  File "site-packages/calibre/ebooks/conversion/plumber.py", line 10, in
  File "site-packages/calibre/customize/ui.py", line 15, in
  File "site-packages/calibre/customize/builtins.py", line 639, in
  File "site-packages/calibre/devices/apple/driver.py", line 8, in
  File "ctypes/__init__.py", line 555, in
  File "ctypes/__init__.py", line 279, in _reset_cache
MemoryError 
```

我[在 Calibre mobileread 论坛上发布了这个，](http://www.mobileread.com/forums/showthread.php?p=2118147)并被告知这是因为 Python stdlib 模块没有正确加载。但我完全不知道是什么原因造成的，也不知道如何让它运行起来。我正在使用 bluehosts Linux 服务器。有人可以帮我吗？

我从 Perl 脚本调用 bash 脚本的方式是使用反引号：

```
my $output=`sh ebook-convert some.html some.mobi` 
```

我也尝试过使用[IPC::Run::Simple](http://p3rl.org/IPC%3a%3aRun%3a%3aSimple)，但这也不起作用。

* * *

从我的 ssh：

```
pipe size            (512 bytes, -p) somenumber
POSIX message queues     (bytes, -q) somenumber
real-time priority              (-r) somenumber
stack size              (kbytes, -s) somenumber
cpu time               (seconds, -t) somenumber
max user processes              (-u) somenumber
virtual memory          (kbytes, -v) somenumber
file locks                      (-x) somenumber 
```

虽然我的 Perl 脚本中的那个是空的。

```
Can't exec "ulimit": No such file or directory at tester.pl line 25. 
```

# android - Android 延迟后播放声音

> ID：11076881
> 
> 赞同：4
> 
> 时间：2012-06-18T04:17:21.443
> 
> 标签：android, audio

我必须在 GUI 事件上播放声音，例如单击按钮等。为此，我从 WebView 调用以下本机代码：

```
MediaPlayer _SoundPlayer = new MediaPlayer();
private void playSound(String sound)
{
    _SoundPlayer.reset();
    try
    {
        AssetFileDescriptor afd = getAssets().openFd("sound/" + sound + ".mp3");
        _SoundPlayer.setDataSource(afd.getFileDescriptor(), afd.getStartOffset(), afd.getLength());
        _SoundPlayer.prepare();
        _SoundPlayer.start();
    }
    catch (Exception e) { }
} 
```

问题是事件与其声音之间存在约 500 毫秒的延迟。我可以以某种方式优化播放声音吗，也许，为每种声音创建一个专用的 MediaPlayer 实例？

问候，

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-18T04:19:41.643

用于[`SoundPool`](http://developer.android.com/reference/android/media/SoundPool.html)低延迟媒体播放，而不是`MediaPlayer`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-18T14:29:25.160

我看到这已经有了一个可以接受的答案，但我要补充一点，目前还没有完整的解决方案：Android 目前的音频延迟非常大。开发人员仍在等待一个好的解决方案。

此问题涉及 NDK，但问题是一般性的：

[http://code.google.com/p/android/issues/detail?id=3434](http://code.google.com/p/android/issues/detail?id=3434)

# asp.net - 在 ASP.NET 中通过 Web 服务查询 SQL Server 数据库的最佳实践？

> ID：11076888
> 
> 赞同：-1
> 
> 时间：2012-06-18T04:18:29.370
> 
> 标签：asp.net, sql-server, web-services

我需要使用在 IIS 上运行的 Web Developer 2010 Express 创建一系列 Web 服务。

Web 服务将需要查询和操作后端 SQL Server 数据库。

在互联网上搜索后，我没有得到足够的信息来说明最佳实践是什么（尽可能简单）。

任何想法将不胜感激！

干杯，亚历克斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T04:23:34.500

您可以在数据库之上创建一个层`facade`，在 WCF 中实现，公开特定的 CRUD 操作。然后，您就可以允许客户端（例如您当前的 WCF 服务）与`facade`抽象/保护您的数据库的“对话”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T04:29:28.697

在继续前进之前，您需要找出比您提供的更多的信息。您的 Web 服务是 SOAP 还是 REST？您的代码将使用 C# 还是 VB.NET？您使用的是什么版本的 SQL Server？先建立这些，然后你才能继续前进。

访问[http://connectionstrings.com/](http://connectionstrings.com/)以找到适合您的 SQL Server 的连接字符串。

您的问题是“最佳实践”，这意味着我们可能会谈论安全性和设计优化。但是由于您提供的信息不足，我认为您更多的是寻找教程而不是“最佳实践”。先调查上面的问题，如果还有问题再回来。

# c# - 如何计算净工资的价值？

> ID：11076890
> 
> 赞同：-1
> 
> 时间：2012-06-18T04:18:43.733
> 
> 标签：c#, gridview

这是我的网格视图。

```
<asp:GridView ID="gridview1" runat="server" AutoGenerateColumns="False" CellPadding="4"
OnPageIndexChanging="gridview1_PageIndexChanging" ForeColor="#333333" GridLines="None"
OnDataBound="gridview1_DataBound" OnRowDataBound="gridview1_RowDataBound" AllowPaging="true"
PageSize="20" ShowFooter="true" Style="font-size: small; font-family: Verdana;">
    <Columns>
        <asp:TemplateField HeaderText="Staff No">
            <ItemTemplate>
                <asp:Label ID="lblsno" runat="server" Text='<%# Bind("Staff_No") %>'>
            </ItemTemplate>
        </asp:TemplateField>
        <asp:TemplateField HeaderText="Gross Salary">
            <ItemTemplate>
                <asp:Label ID="lblGS" runat="server" Text='<%# Bind("GROSS_SALARY") %>'></asp:Label>
            </ItemTemplate>
        </asp:TemplateField>
        <asp:TemplateField HeaderText="Account No">
            <ItemTemplate>
                <asp:Label ID="lblaccno" runat="server" Text='<%# Bind("acc_num") %>'></asp:Label>
            </ItemTemplate>
        </asp:TemplateField>
        <asp:TemplateField>
            <ItemTemplate>
                <asp:GridView ID="gridview2" runat="server" AutoGenerateColumns="False" CellPadding="4"
                    ForeColor="#333333" GridLines="None" AllowPaging="true"
                    PageSize="10" ShowFooter="true" Style="font-size: small; font-family: Verdana;">
                    <RowStyle BackColor="#F7F6F3" ForeColor="#333333" />
                    <Columns>
                        <asp:TemplateField HeaderText="Date">
                            <ItemTemplate>
                                <asp:Label ID="lbldate" runat="server" Text='<%# Bind("DATE") %>'></asp:Label>
                            </ItemTemplate>
                        </asp:TemplateField>
                        <asp:TemplateField HeaderText="E.P.F">
                            <ItemTemplate>
                                <asp:Label ID="lblepf" runat="server" Text='<%# Bind("epf") %>'></asp:Label>
                            </ItemTemplate>
                            <HeaderStyle HorizontalAlign="Center" />
                            <FooterTemplate>
                                <asp:Label ID="lblnewepf" runat="server"></asp:Label>
                            </FooterTemplate>
                        </asp:TemplateField>
                        <asp:TemplateField HeaderText="Net Salary">
                            <ItemTemplate>
                                <asp:Label ID="lblns" runat="server"></asp:Label>
                            </ItemTemplate>
                            <FooterTemplate>
                                <asp:Label ID="lblnewns" runat="server"></asp:Label>
                            </FooterTemplate>
                        </asp:TemplateField>
                    </Columns>
            </ItemTemplate>
        </asp:TemplateField>
    </Columns>
</asp:GridView> 
```

如您所见，在第一个网格视图（gridview1）中，它有另一个网格视图（gridview2）。这是我的桌子： ![在此处输入图像描述](../Images/928861fec5150d2a968ff39a47a08cf3.png)

净工资值 = 总工资 - EPF

如何计算净工资的价值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T05:40:43.920

更改 .ASPX 文件中的以下内容。

```
<asp:TemplateField HeaderText="Net Salary">
                            <ItemTemplate>
                                <asp:Label ID="lblns" runat="server" Text='<%# GetNetSalary(Eval("GROSS_SALARY"),Eval("epf")) %>'></asp:Label>
                            </ItemTemplate>
                            <FooterTemplate>
                                <asp:Label ID="lblnewns" runat="server"></asp:Label>
                            </FooterTemplate>
                        </asp:TemplateField> 
```

在 .CS 文件中添加这个

```
private string GetNetSalary(object grossSalary,object epf)
{
return (grossSalary - epf).ToString();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T03:48:11.047

感谢您花时间阅读我的问题。我已经有了解决办法。

```
<asp:TemplateField HeaderText="Net Salary">
                        <ItemTemplate>
                            <asp:Label ID="lblns" runat="server" Text='<%# Convert.ToDouble(Eval("GROSS_SALARY")) - ConvertToDouble(Eval("epf")) %>'></asp:Label>
                        </ItemTemplate>
                        <FooterTemplate>
                            <asp:Label ID="lblnewns" runat="server"></asp:Label>
                        </FooterTemplate>
                    </asp:TemplateField> 
```

# ruby-on-rails - Dalli vs Redis-Store for Rails App

> ID：11076902
> 
> 赞同：22
> 
> 时间：2012-06-18T04:22:05.490
> 
> 标签：ruby-on-rails, ruby-on-rails-3.1, redis, memcached

直到现在我一直在使用[Dalli进行缓存，今天我遇到了](https://github.com/mperham/dalli)[Redis -Store](https://github.com/jodosha/redis-store)。

我想知道我应该切换到redisstore。我的应用程序已经将 redis 用于某些东西，所以我有一个非常大的 redis 服务器（就资源而言），我还有另一个 memcached 服务器。因此，如果我在哪里切换到 redis-store，则意味着我可以删除 memcached 服务器（需要维护的服务器更少 + 成本更低）。

有没有人对这两种解决方案进行过比较。

1.  表现
2.  是否可以直接替换（我可以随时在这两个之间切换而无需更改代码）
3.  我应该知道的任何其他事情。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-11-26T11:38:17.730

Redis 可以用作缓存或永久存储，但如果您尝试将两者混合使用，最终可能会遇到“有趣的问题”。

当你有 memcached 时，你有一个进程的最大内存量，所以当 memcached 变满时，它会自动删除最近最少使用的条目，为新条目腾出空间。

您也可以将 Redis 配置为具有该行为，但如果您将 Redis 用于持久存储，则不希望这样做，因为在这种情况下，您可能会丢失本应持久的密钥。

因此，如果您为 Redis 使用持久存储，则需要有两个不同的 Redis 进程：一个用于持久键，一个用于缓存。当然，您总是可以只有一个进程并为每个缓存项设置过期时间，但没有人会保证在它们过期之前您不会达到内存限制并丢失数据，因此实际上您需要两个进程。此外，如果您正在为持久数据设置主/从配置并将缓存存储在同一台服务器上，那么您基本上是在浪费 RAM，因此单独的进程是要走的路。

关于性能，redis 和 memcached 的性能都非常好，并且在不同的测试中，它们在获取/提取数据时处于相同的范围内，但是当您只需要缓存时，memcached 更好。

为什么会这样？首先，由于 memcached 只有一个任务，即存储键/值，因此在存储元数据时没有任何开销。另一方面，Redis 提供了不同的数据结构，因此它存储了每个键的更多元数据。这方面的一个例子：将数据存储在 Redis 中的散列上而不是使用单独的键要“便宜”得多。你不会在 memcached 上得到任何这些，因为只有一种类型的数据。这意味着在您的服务器中使用相同数量的内存，您可以在 memcached 上存储比在 redis 上更多的数据。如果你有一个相对较小的安装，你并不在乎，但是当你开始看到增长的那一刻，相信我你会想要控制这些数据。

因此，尽管我喜欢 Redis，但我更喜欢使用 memcached 来满足我的缓存需求，而使用 redis 来满足我的持久存储/临时存储/队列需求。我仍然将 redis 用作“缓存”，但不是具有过期的临时缓存，而是用作查找缓存以节省从更昂贵的存储中读取的内容。例如，我在 Redis 上保留了用户 ID 和昵称之间的映射。我永远不会过期这些映射，所以 Redis 是一个完美的地方。

如果您正在处理少量数据，那么您对所有事物都使用单一技术的想法可能是有道理的，但是当您开始增长超过数百 MB 的那一刻，我会说同时使用它们。

# sql - 连接两个查询

> ID：11076909
> 
> 赞同：-2
> 
> 时间：2012-06-18T04:23:26.317
> 
> 标签：sql, sql-server

我有两个选择查询可在我的项目中用于获取数据并将其显示在我的网页中。我想加入他们，这样我只需要访问一次数据。但我不知道如何加入它们，因为其中一个查询包含组功能。你可以帮帮我吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T06:11:35.087

# objective-c - 处理在 Objective C 方法中传递的 C 数组

> ID：11076912
> 
> 赞同：1
> 
> 时间：2012-06-18T04:23:38.070
> 
> 标签：objective-c

我已经看到[了这个问题](https://stackoverflow.com/questions/853698/how-to-pass-an-array-in-by-reference-to-a-function-in-objective-c)及其答案，它们消除了我的一些困惑，但我仍然担心几件事：

考虑一下：

```
int someCArray[5]={1,2,3,4,5};

[self processingTheArray:someCArray]; 
```

该方法描述为：

`-(void)processingTheArray:(int)theCArray;`

现在，上述方法有效，即使我认为这不是正确的方法。它确实提供了编译器警告：`Incompatible pointer to integer conversion.` **我需要担心，因为这仍然有效吗？**

使用上面链接的 SO 问题中的方法，我可以这样做：

`-(void)processingTheArray:(int)theCArray size:(NSUInteger)length;`

但是，我该怎么办`length`inside `processingTheArray`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T04:34:58.143

`someCArray`是类型`int*`，不是`Byte*`。`int`并且`Byte`尺寸不同，并且不兼容。

通过将您的方法更改为`-(void)processingTheArray:(int*)theCArray;`，它将在没有警告的情况下工作。

但是，该方法将您的数组作为*指针传入*，并且它不知道其中是否`theCArray`包含 1 个 int、5 个 int 或 500 个 int。除非数组总是完全相同的长度，否则您需要一个`length`参数来指定数组大小，因此在方法内部，您可以循环或做任何您想做的事情。

你可以有类似的东西：

```
for (int i = 0; i < length; i++) {
    theCArray[i]; // do something
} 
```

在你的`processingTheArray:`函数里面。

# excel-2007 - 是否可以使用c#将excel文件中的公式加载到网格视图中？

> ID：11076913
> 
> 赞同：0
> 
> 时间：2012-06-18T04:23:38.680
> 
> 标签：excel-2007, c#-2.0

**考虑这个例子：** 我有一个 excel 文件，其中有两列数据，如下所示 -

```
Salary  Commission  Net Payable
1000        5             1050
2000       10             2200
3000       15             3450
4000       20             4800 
```

用于计算净应付账款的公式是：`A2+((A2*B2)/100)`
其中**A2 = 工资（此处为 1000）**，而**B2 = 佣金（此处为 5）**
当我将这些数据从 excel 文件加载到网格视图中时，它只加载上述值。 **我的问题是：有什么方法可以让我也可以在网格视图中加载内部公式？****网格视图列中的 A2+((A2*B2)/100)**之类的东西？它不是任何开发项目。我只是想知道这是否可以做到？谢谢。

**编辑：我用来加载数据的代码**

```
try
        {
            rst = CMDExcel.ExecuteReader();
        }
        catch (Exception ex)
        {
            Interaction.MsgBox("Error in reading Operation data from excel file");
            return;
        }

        while (rst.Read())
        {
            sSalary = string.Empty;
            try
            {
                sSalary = rst("Salary").ToString().Trim();
            }
            catch (Exception ex)
            {
            }

            if (sSalary.Length > 0)
            {
                DGMAIN.Rows.Add();

                try
                {
                    DGMAIN.Rows(i).Cells("DGMAIN_SALARY").Value = rst("Salary").ToString();
                }
                catch (Exception ex)
                {
                }
                try
                {
                    DGMAIN.Rows(i).Cells("DGMAIN_COMMISSION").Value = rst("Commission").ToString();
                }
                catch (Exception ex)
                {
                }
                try
                {
                    DGMAIN.Rows(i).Cells("DGMAIN_NET_PAYABLE").Value = rst("Net Payable").ToString();
                }
                catch (Exception ex)
                {
                }

                i = i + 1;
            }
        }
        rst.Close(); 
```

代码没有问题，因为它将数据正确加载到网格视图中。

# php - 在数组中查找选定键的值

> ID：11076916
> 
> 赞同：0
> 
> 时间：2012-06-18T04:24:24.240
> 
> 标签：php, arrays

我需要找到关键 sub_section_html 的价格。

示例：其中 [sub_section_html] => 腰部图像回显 [价格]

我使用 array_search 获取密钥，但如何获取与该条目对应的价格值？

```
stdClass Object ( [data_id] => 65 [name_short_en] => white [price] => 720 [sub_section] => 1 [sub_section_html] => bodyImage ) 
stdClass Object ( [data_id] => 88 [name_short_en] => brown [price] => 80 [sub_section] => 2 [sub_section_html] => waistbandImage ) 
stdClass Object ( [data_id] => 101 [name_short_en] => white [price] => 70 [sub_section] => 3 [sub_section_html] => collarImage ) 
stdClass Object ( [data_id] => 262 [name_short_en] => Lace/blue/white [price] => 330 [sub_section] => 8 [sub_section_html] => leftsleeveImage ) 
```

# css - text/css 作为 text/plain 传输

> ID：11076918
> 
> 赞同：0
> 
> 时间：2012-06-18T04:25:05.597
> 
> 标签：css, mime-types, plaintext

我有一个将样式表作为文本/纯 MIME 类型传输的网页。发生这种情况的可能原因是什么以及有关如何解决该问题的任何提示。

我像这样链接css

```
<link href="/css/app.css" rel="stylesheet" type='text/css'> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T04:38:10.523

服务器配置错误。如果服务器正在运行 Apache，这可能取决于整体配置错误，或者更有限的东西，比如目录`.htaccess`中的一个写得不好的文件。`css`

# xslt - 在 XSLT 中实现键值概念

> ID：11076920
> 
> 赞同：10
> 
> 时间：2012-06-18T04:25:27.007
> 
> 标签：xslt, xslt-1.0

我正在研究 XSLT，我需要在其中实现以下内容。我的 Source XML 示例如下所示。

```
<?xml version="1.0" encoding="ISO-8859-1"?>
    <catalog>
        <cd>
            <title>A</title>  
            <title>B</title>
            <title>C</title>  
        </cd>
    </catalog> 
```

考虑那里有一些键值对列表。

```
 Key         Value
    A           Algebra
    B           Biology
    C           Chemistry
    D           Data Analysis
    ---         ---

    ----        --- 
```

我需要编写一个 xslt，以便每次出现键“A”时，都需要用适当的值替换。

我还需要提到同一个 XSLT 中的键值对列表。样本输出：

```
<Data>
    <Subject>Algebra</Subject>
    <Subject>Biology</Subject>
    <Subject>Chemistry</Subject>
 </Data> 
```

任何人都可以帮助我如何做到这一点。

谢谢你。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-18T04:46:07.157

**一、简单的XSLT 1.0解决方案**

**这种转变**：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:my="my:my">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <my:codes>
   <code key="A" value="Algebra"/>
   <code key="B" value="Biology"/>
   <code key="C" value="Chemistry"/>
   <code key="D" value="Data Analysis"/>
 </my:codes>

 <xsl:template match="node()|@*">
  <xsl:copy>
   <xsl:apply-templates select="node()|@*"/>
  </xsl:copy>
 </xsl:template>

 <xsl:template match=
  "title/text()[. = document('')/*/my:codes/*/@key]">

  <xsl:value-of select=
   "document('')/*/my:codes/*[@key=current()]/@value"/>
 </xsl:template>
</xsl:stylesheet> 
```

**应用于提供的 XML 文档时：**

```
<catalog>
    <cd>
        <title>A</title>
        <title>B</title>
        <title>C</title>
    </cd>
</catalog> 
```

**产生想要的正确结果**：

```
<catalog>
   <cd>
      <title>Algebra</title>
      <title>Biology</title>
      <title>Chemistry</title>
   </cd>
</catalog> 
```

**说明**：

这是将内联 XML 节点包含为属于（非空）命名空间的全局元素（的子元素`xsl:stylesheet`）的标准方式，不同于 xsl 命名空间。

* * *

**二、更高效的 XSLT 1.0 解决方案，使用键**：

```
<xsl:stylesheet version="1.0"
     xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
     xmlns:my="my:my">
     <xsl:output omit-xml-declaration="yes" indent="yes"/>
     <xsl:strip-space elements="*"/>

     <my:codes>
       <code key="A" value="Algebra"/>
       <code key="B" value="Biology"/>
       <code key="C" value="Chemistry"/>
       <code key="D" value="Data Analysis"/>
     </my:codes>

     <xsl:key name="kCodeByName" match="code" use="@key"/>

     <xsl:template match="node()|@*">
      <xsl:copy>
       <xsl:apply-templates select="node()|@*"/>
      </xsl:copy>
     </xsl:template>

     <xsl:template match=
      "title/text()[. = document('')/*/my:codes/*/@key]">

      <xsl:variable name="vCur" select="."/>

      <xsl:for-each select="document('')">
          <xsl:value-of select=
           "key('kCodeByName', $vCur)/@value"/>
      </xsl:for-each>
     </xsl:template>
</xsl:stylesheet> 
```

**当这个转换应用于同一个 XML 文档（上图）时，会产生同样正确的、想要的结果**：

```
<catalog>
   <cd>
      <title value="Algebra"/>
      <title value="Biology"/>
      <title value="Chemistry"/>
   </cd>
</catalog> 
```

**说明**：

通过函数访问数据`key()`通常是次线性的——通常是 O(1)，并且比线性搜索快得多（如果要搜索的节点数量很大，这很重要）。

`xsl:key`如果包含要查找的节点的文档是当前文档，则可以在处理另一个文档的节点时通过索引 ( ) 访问一个文档的节点。要从另一个文档访问节点，它的根（或感兴趣的节点需要保存并从变量中引用。）

* * *

**三、XSLT 2.0 解决方案**：

```
<xsl:stylesheet version="2.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:my="my:my">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:variable name="vCodes">
  <codes>
   <code key="A" value="Algebra"/>
   <code key="B" value="Biology"/>
   <code key="C" value="Chemistry"/>
   <code key="D" value="Data Analysis"/>
  </codes>
 </xsl:variable>

 <xsl:key name="kCodeByName" match="code" use="string(@key)"/>

 <xsl:template match="node()|@*">
  <xsl:copy>
   <xsl:apply-templates select="node()|@*"/>
  </xsl:copy>
 </xsl:template>

 <xsl:template match=
  "title/text()[key('kCodeByName', ., $vCodes)]">

  <xsl:sequence select=
   "key('kCodeByName', ., $vCodes)/@value"/>
 </xsl:template>
</xsl:stylesheet> 
```

**当这个转换应用于同一个 XML 文档（上图）时，会产生同样正确的、想要的结果**：

```
<catalog>
   <cd>
      <title value="Algebra"/>
      <title value="Biology"/>
      <title value="Chemistry"/>
   </cd>
</catalog> 
```

**说明**：

与高效的 XSLT 1.0 解决方案几乎相同，但是：

1.  在 XSLT 2.0 中，模板匹配模式*可以*包含变量引用。

2.  在 XSLT 2.0 中，不需要特技技巧来操纵当前和索引的文档——`key()`函数的第三个参数是指定要使用其索引的树。

# php - 创建用户配置文件时出现.htaccess 问题？

> ID：11076923
> 
> 赞同：1
> 
> 时间：2012-06-18T04:26:38.710
> 
> 标签：php, .htaccess

我正在使用 .htaccess 代码将页面标题传递给 url，然后在页面加载时使用 php 从 mysql 表中检索它们。

```
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-l

RewriteRule ^(.*)$ index.php?url=$1 [QSA,L] 
```

我正在使用这个 php 代码来分解 url 并获取标题：

```
$passed_url = $_SERVER['REQUEST_URI'];
$passed_url = explode("/", $passed_url);
$passed_url = end($passed_url); 
```

现在我想创建一个用户个人资料页面`www.website.com/users/User_name_in_here` ，如果这是一个用户页面，或者它只是一个可以像这样编写的普通页面，我如何使用 php 检查：`www.webiste.com/Page_title_in_here` 有没有更好的方法来做到这一点？（我只是php中的入门者）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T04:39:22.433

一种方法是检查`$passed_url[1]`。如果是“用户”，那么您就知道您在用户页面上。

更好的方法是使用 index.php 作为前端控制器并根据请求 uri 将请求传递给控制器​​。有很多方法可以做到这一点。

一些框架将 uri 映射到 class::method。因此，您的 url 将被更改为`/users/view/username`并被`users::view`调用。

我更喜欢编写正则表达式，并且匹配哪个正则表达式控制加载哪个控制器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T04:46:52.030

您实际上可以通过`.htaccess`这种方式更改您的重写引擎文件：

```
RewriteEngine On
RewriteRule (.*)-(.*)\.ptf$ ./?page=$1&id=$2&%{QUERY_STRING} 
RewriteRule ^([^/]*)\.ptf$ ./?page=$1&%{QUERY_STRING} [L]
RewriteCond %{SCRIPT_FILENAME} !-f
RewriteCond %{SCRIPT_FILENAME} !-d
RewriteRule ^(.*)$ ./?page=$1&id=$2&%{QUERY_STRING} 
```

所以，这条规则，它的确切作用是：

当`URL`是`www.website.com/Page_title_in_here`,

它去`www.website.com/?page=Page_title_in_here`

当你这样说时`www.website.com/users-User_name_in_here`，

它重定向到`www.website.com/?page=users&id=User_name_in_here`

所以你可以用`$_GET["page"]`和`$_GET["page"]`变量来操作！

说啥？我这样做。希望这对你有帮助！

# c - 如何使用 CX_LIMITED_RANGE 开/关

> ID：11076924
> 
> 赞同：3
> 
> 时间：2012-06-18T04:26:54.817
> 
> 标签：c, pragma

在我的测试代码中，复杂计算使用的cpu时间`CX_LIMITED_RANGE ON/OFF`没有区别。之间有什么区别`CX_LIMITED_RANGE ON/OFF`，我们何时以及如何使用`#pragma STDC CX_LIMITED_RANGE ON`，以及何时使用 default `#pragma STDC CX_LIMITED_RANGE OFF`。

谢谢！

```
void use_CX_LIMITED_RANGE()
{
    double complex z1 = 3.0 + I * 4.0;
    double complex z2 = 1.0 + I * 2.0;

#pragma STDC CX_LIMITED_RANGE ON

    clock_t c1 = clock();
        double complex z3;
        for (int i = 0; i < 100000; ++i) {
            z3 = cabs(z1 * z2); 
        }
        clock_t c2 = clock();
        printf("CX_LIMITED_RANGE ON %lu cpu clock\n", c2 - c1);
        printf("|z1 * z2| = %f + %fi\n", creal(z3), cimag(z3));

        printf("\n");

    #pragma STDC CX_LIMITED_RANGE OFF

        c1 = clock();
        for (int i = 0; i < 100000; ++i) {
            z3 = cabs(z1 * z2); 
        }
        c2 = clock();
        printf("CX_LIMITED_RANGE OFF %lu\n", c2 - c1);
        printf("|z1 * z2| = %f + %fi\n", creal(z3), cimag(z3));
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T23:42:09.577

一直在尝试在 C++ 中将此编译指示与 GCC 一起使用，但没有成功。我使用 -fcx-limited-range 获得了 5 倍的性能提升，但在代码中指定它没有任何效果。根据 GCC 的 C99 状态页面，它们还不支持标准编译指示。

[http://gcc.gnu.org/c99status.html](http://gcc.gnu.org/c99status.html)

# android - 在android中播放相同的声音而无需等待上一个结束

> ID：11076929
> 
> 赞同：0
> 
> 时间：2012-06-18T04:28:26.867
> 
> 标签：android, audio

伙计们的情况是，假设我单击一个按钮，声音播放，并且在该曲目的持续时间内，我再次单击该按钮并希望从头开始播放。我尝试使用以下代码，但没有成功。代码是：

```
public class SoundtestActivity extends Activity {
/** Called when the activity is first created. */
 MediaPlayer mp;
 @Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
     mp = MediaPlayer.create(this, R.raw.gun_shot);
    Button click=(Button) findViewById(R.id.bt1);
    click.setOnClickListener((new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            if(mp.isPlaying())
                mp.reset();
            mp.start();
        }
    }));
       } 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T07:52:57.993

最好的方法和最简单的方法是 = mp.setLooping(true); 是的，它确实有效，只需在 mp.start() 之后添加这一行，不需要其他任何内容

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T07:11:30.360

试试这个代码

mp.setOnCompletionListener(新 OnCompletionListener() {

```
 @Override
            public void onCompletion(MediaPlayer mp) {
                mp.release();
                mp.start();
            }

        }); 
```

或者替换 mp.start(); 通过 mp.reset(); 在这段代码中

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T04:45:28.060

您只需要`comment`以下几行并`shift your Media player instance`在按钮的侦听器方法中，完成多个媒体播放器相互平行播放

```
Button click=(Button) findViewById(R.id.bt1);
click.setOnClickListener((new View.OnClickListener() {
    @Override
    public void onClick(View v) {
    mp = MediaPlayer.create(this, R.raw.gun_shot); // ADD THIS LINE HERE

        if(mp.isPlaying()){ 
            mp.stop();           //ADDED TO STOP FIRST
            mp.release();        //ADDED TO RELEASE RESOURCES
    }
        mp.start();
    }
})); 
```

# android - Home Activity 是否多次实例化？

> ID：11076930
> 
> 赞同：2
> 
> 时间：2012-06-18T04:28:31.203
> 
> 标签：android

[Tasks and Back Stack](https://developer.android.com/guide/topics/fundamentals/tasks-and-back-stack.html)官方Dev Guide说，activity可以实例化多次，以HomeActivity为例

![一个活动被多次实例化](../Images/bd1644ec7ff185edaf2c834b6d9354f0.png)

所以我试了一下，如图所示：

1.  启动活动 2
2.  按主页按钮
3.  启动活动 1
4.  按返回按钮（所以我返回主屏幕）
5.  再次按下返回按钮

但是我没有回到Activity 1。因此，Home Activity 似乎没有被多次实例化。是这样吗？如果是这样，它是如何保存在 Back Stack 中的？

编辑：对不起，我应该早些时候澄清一下我没有编写任何代码来测试它。我所做的只是在收藏夹托盘上启动应用程序。我最好去阅读源代码并搜索 Home Activity 的行为。
无论如何，我不认为 Home Activity 是一个很好的例子来说明多个实例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T05:08:28.697

您的问题可能是您可能已经调用`finish()`了`Activity2`. `Activity`或者，操作系统会在您返回之前清除第二个。您试图自己达到的行为无法保证。您不能强迫 an`Activity`继续运行，以便您可以返回到它。

# facebook - 是否有类似 Google 和/或其他 OAuth 提供商的“Facebook 访问令牌调试器”工具？

> ID：11076931
> 
> 赞同：11
> 
> 时间：2012-06-18T04:28:47.630
> 
> 标签：facebook, facebook-graph-api

最好是显示过期时间和授权资源的东西。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-18T05:57:07.200

您可以使用 Google OAuth 2.0 Playground 来检查 auth dance 中的步骤。例如，单击设置图标将授权 URL 更改为 Facebook 的。

[https://developers.google.com/oauthplayground/](https://developers.google.com/oauthplayground/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-07-11T01:26:09.523

基本上相当于 fb 的 debugtoken 的是 GET 调用：[https ://www.googleapis.com/oauth2/v3/tokeninfo?access_token=](https://www.googleapis.com/oauth2/v3/tokeninfo?access_token=)

更多信息在这里：[https ://developers.google.com/identity/protocols/OAuth2UserAgent](https://developers.google.com/identity/protocols/OAuth2UserAgent)

# ios - 无法在谷歌阅读器帐户中正确检索项目的提要

> ID：11076936
> 
> 赞同：0
> 
> 时间：2012-06-18T04:29:33.933
> 
> 标签：ios, google-reader

早上好，

首先，我很抱歉我的英语水平不好。

我在连接到 Google Reader 的 iOS 上编写了一个 rss 阅读器。

当我尝试使用此代码从 Google 检索提要时：

```
 if(nxt)
{
    response=[net get:
              [NSString stringWithFormat:
               @"https://www.google.com/reader/atom/user/-/state/com.google/reading-list?co=true&c=%@&ck=%d",
               nxt,
               [[NSDate date] timeIntervalSince1970]
               ]
                  xml:false
                 atom:false];
}
else
{
    response=[net get:
              [NSString stringWithFormat:
               @"https://www.google.com/reader/atom/user/-/state/com.google/reading-list?co=true&ck=%d",
               [[NSDate date] timeIntervalSince1970]
               ]
                  xml:false
                 atom:false];
} 
```

其中 nxt 是 gr:continuation 的代码，net get 以 xml 格式检索请求的 NSData（请不要关心 xml:false）。

例如，我收到这个答案：

```
17 jun 12:XX
17 jun 11:XX
17 jun 13:XX <--
17 jun 10:XX
17 jun 09:XX
17 jun 08:24
17 jun 08:32 <--
14 jun XX:XX <--
15 jun XX:XX
... 
```

当我使用 continuation (nxt) 参数调用 url 时，我会在上次下载之前收到一些项目。例如，我的最后一件物品是 13 Jun 我收到的一些物品是 15 jun , 16 jun, ...

我不明白如何按提要项目的顺序检索。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T13:53:04.757

您没有指定排名函数，因此可以使用帐户的默认值（可能是`auto`，这不是严格按时间顺序排列的）。您可以附加一个`&r=n`查询参数以强制最新优先排名，这应该更接近您的预期。有关所有支持的排名参数的更多详细信息，请参阅[此页面](http://code.google.com/p/google-reader-api/wiki/ApiStreamContents)（它用于`/api/0/stream/contents`API 路径，但支持与 相同的参数`/atom`）。

# string - 字符串编码算法

> ID：11076937
> 
> 赞同：0
> 
> 时间：2012-06-18T04:29:44.870
> 
> 标签：string, algorithm

```
Is there is a way to reduce the length of a string
using String encoding algorithm. 
```

不幸的是，“霍夫曼编码”不是我的情况的解决方案。我正在寻找一种编码算法，它接受一个字符串并生成一个**比**原始字符串（输入）短的字符串。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T07:00:09.943

希望这能回答您的预期问题。有一个库[smaz](https://github.com/antirez/smaz)可以有效地压缩短英文字符串。也许对您来说幸运的是，它实际上对字符串进行了*编码*。如果您的字符串不是英文的，smaz（静态字典）使用的通用方法可以与其他压缩器一起使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T04:37:30.777

没有办法缩短任意字符串，就像没有适用于所有情况的通用压缩方法一样。因此，您需要做的是选择一种适合您预期输入的压缩方法并使用它。然后，您只需要将结果转换回字符串。

如果您只是想知道如何将结果转换回字符串，那么还有很多方法。Base64 很简单并且运行良好。但是，与纯二进制编码字符串相比，它有 25% 的开销。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T04:39:14.897

请参阅“[英文文本压缩测试](http://www.maximumcompression.com/data/text.php)”。在本文中，您将找到几乎所有可能的算法来压缩英文文本。可能其中一些可以满足您的要求。

# haskell - 为什么在 Haskell 中丢弃的值是 () 而不是 ⊥？

> ID：11076938
> 
> 赞同：12
> 
> 时间：2012-06-18T04:29:49.807
> 
> 标签：haskell

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-18T05:31:41.670

我认为这是因为您需要指定要丢弃的值的类型。在 Haskell-98 中，`()`是显而易见的选择。只要您知道类型是`()`，您也可以制作该值`()`（假设评估进行到那一步），以防万一有人试图对其进行模式匹配或其他事情。我认为大多数程序员不喜欢在代码中引入额外的⊥，因为这只是一个额外的陷阱。我当然避免它。

代替`()`，可以创建一个无人居住的类型（当然除了 ⊥ ）。

```
{-# LANGUAGE EmptyDataDecls #-}

data Void

mapM_ :: (Monad m) => (a -> m b) -> [a] -> m Void 
```

现在甚至不可能进行模式匹配，因为没有`Void`构造函数。我怀疑不经常这样做的原因是因为它不兼容 Haskell-98，因为它需要 EmptyDataDecls 扩展。

编辑：你不能在 Void 上进行模式匹配，但`seq`会毁了你的一天。感谢@sacundim 指出这一点。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-06-18T06:30:53.237

好吧，底部类型的字面意思是无限的计算，而单元类型就是它的本来面目——一种包含单个值的类型。显然，monadic 计算通常意味着要完成，所以让它们 return 根本没有意义`undefined`。而且，当然，这只是一种安全措施——就像约翰 L 说的，如果有人模式匹配一​​元结果怎么办？所以一元计算返回“最低”可能的（在 Haskell 98 中）类型 - 单位。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-06-18T17:14:00.027

所以，也许我们可以有以下签名：

```
mapM_     :: (Monad m) => (a -> m b) -> [a] -> m z
foldM_    :: (Monad m) => (a -> b -> m a) -> a -> [b] -> m z
writeFile :: FilePath -> String -> IO z 
```

我们将重新实现有问题的函数，以便任何尝试绑定`z`in`m z`或`IO z`将变量绑定到`undefined`或任何其他底部。

我们有什么收获？现在人们可以编写程序来强制执行`undefined`这些计算的结果。这怎么是好事？这意味着人们现在可以编写无缘无故无法终止的程序，而这在以前是不可能编写的。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-06-19T00:32:49.173

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-30T14:09:21.870

I would like to point out one *severe* downside to writing one *particular* form of returning ⊥: if you write types like this, you get bad programs:

```
mapM_ :: (Monad m) => (a -> m b) -> [a] -> m z 
```

This is *way* too polymorphic. As an example, consider `forever :: Monad m => m a -> m b`. I encountered this gotcha a long time ago and I'm still bitter:

```
main :: IO ()
main = forever putStrLn "This is going to get printed a lot!" 
```

The error is obvious and simple: missing parentheses.

*   It *typechecks*. This is exactly the sort of error that the type system is supposed to catch easily.
*   It *silently infinite loops at runtime* (without printing anything). It is a pain to debug.

Why? Well, because `r ->` is a monad. So `m b` matches virtually *anything*. For example:

```
forever :: m a -> m b
forever putStrLn :: String -> b
forever putStrLn "hello!" :: b -- eep!
forever putStrLn "hello" readFile id flip (Nothing,[17,0]) :: t -- no type error. 
```

This sort of thing inclines me to the view that `forever` should be typed `m a -> m Void`.

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-18T18:25:41.207

# ios - UITableViewCell 的子视图在重新排序时不可见

> ID：11076939
> 
> 赞同：4
> 
> 时间：2012-06-18T04:30:10.603
> 
> 标签：ios, uitableview, subview

当我重新排序我的 UITableViewCells 时，单元格的子视图在拖动时不可见......我总是得到相同的结果，无论是在 UITableViewCell 子类或故事板中以编程方式添加子视图......

拖动时是否有可能看到带有子视图的真实 UITableViewCell？

![在此处输入图像描述](../Images/84bc75d8daa30801dc51f6811141022e.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T22:14:43.387

好的，我自己找到了解决方案...

出于某种原因，来自 Apple 的神秘重新排序动画无法捕获简单的 UIView，但是使用 UIImageView、UIButton 和 UILabel 作为自定义 TableViewCell 的子视图，动画的效果就像预期的那样……令人毛骨悚然！

# c - 警告：未以枚举类型评估案例？

> ID：11076941
> 
> 赞同：15
> 
> 时间：2012-06-18T04:31:00.633
> 
> 标签：c, gcc, clang

我最近升级到了新的编译器 Clang LLVM 4.0，它很好。只是在这种情况下，它向我显示了一些旧代码的丑陋警告：

### 警告：`case value not in enumerated type 'SomeConstants' (aka 'enum SomeConstants') [-Wswitch]`

```
switch (var) {
    case kConstant: case 3: case 4: case 8: case 35: //WARNING HERE :(
    // do my thing here
    break;
    case kOtherConstant:
    // do another thing here
    break;
    default:
    break;
} 
```

`var`可能是枚举中定义的值之一，如下所示：

```
typedef enum SomeConstants {
    kConstant,
    kOtherConstant,
}; 
```

如您所见，未定义 2、4、8、35（这就是编译器正在编译的原因），但实际上它们发生了（这是我正在使用的这个封闭源代码库中晦涩的部分之一）。

有没有办法以某种方式修改我的开关代码，这样我就不会收到无害但烦人的警告？现在我正在使用以下方法使其静音：

```
switch (var) {
#pragma GCC diagnostic push
#pragma GCC diagnostic ignored "-Wswitch"
    case kConstant: case 3: case 4: case 8: case 35:
#pragma GCC diagnostic pop
    ... 
```

我想知道是否有更优雅的方法来解决这个问题。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-06-18T04:37:46.583

您可以将`switch()`语句的表达式转换为`int`，使其不/不能执行该检查。

毕竟，它实际上是用来保存一个`int`值，而不是列出的枚举数之一。

# java - How to get error details from JAXB Validator?

> ID：11076943
> 
> 赞同：7
> 
> 时间：2012-06-18T04:31:19.940
> 
> 标签：java, xml, jaxb, xsd, schema

I have some classes with JAXB annotations, I have created some instances and I need to validate them against my XSD files. I should be able to get the details of what is wrong when the objects are invalid.

So far I haven't had luck, I know about this class ValidationEventHandler but apperantly I can use it with the Unmarshaller class, the problem is that I have to validate the objects not the raw XML.

I have this code:

```
MyClass myObject = new MyClass();
JAXBContext jaxbContext = JAXBContext.newInstance("x.y.z");
JAXBSource jaxbSource = new JAXBSource(jaxbContext, myObject);
SchemaFactory factory = SchemaFactory
                .newInstance(XMLConstants.W3C_XML_SCHEMA_NS_URI);
Source schemaFile = new StreamSource(getClass().getClassLoader()
                .getResourceAsStream("mySchema.xsd"));
Schema schema = factory.newSchema(schemaFile);

Validator validator = schema.newValidator();

validator.validate(jaxbSource); 
```

This code will work, it will validate the object and throw an exception with the message, something like this:

> cvc-pattern-valid: Value '12345678901' is not facet-valid with respect to pattern '\d{10}' for type 'id'.]

The problem is that I need specific details, with a string like that I would have to parse all the messages.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T19:24:56.333

`ErrorHandler`您可以设置on 的实例`Validator`以捕获单个错误：

```
 Validator validator = schema.newValidator();
    validator.setErrorHandler(new MyErrorHandler());
    validator.validate(source); 
```

**我的错误处理程序**

下面是该`ErrorHandler`接口的示例实现。如果您不重新抛出异常，验证将继续。

```
import org.xml.sax.ErrorHandler;
import org.xml.sax.SAXException;
import org.xml.sax.SAXParseException;

public class MyErrorHandler implements ErrorHandler {

    public void warning(SAXParseException exception) throws SAXException {
        System.out.println("\nWARNING");
        exception.printStackTrace();
    }

    public void error(SAXParseException exception) throws SAXException {
        System.out.println("\nERROR");
        exception.printStackTrace();
    }

    public void fatalError(SAXParseException exception) throws SAXException {
        System.out.println("\nFATAL ERROR");
        exception.printStackTrace();
    }

} 
```

**了解更多信息**

*   [http://blog.bdoughan.com/2010/11/validate-jaxb-object-model-with-xml.html](http://blog.bdoughan.com/2010/11/validate-jaxb-object-model-with-xml.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-08-31T13:30:38.310

I. If you validate a complex object hierarchy, you can create the Marshaller yourself and set its listener:

```
Marshaller marshaller = jaxbContext.createMarshaller();
marshaller.setListener(yourListener);
JAXBSource source = new JAXBSource(marshaller, object); 
```

This listener will get notified with instances of your objects as it walks the hierarchy.

II. Add an `ErrorHandler` from the other answer. At least with Wildfly 15 the messages look like:

> cvc-maxInclusive-valid: Value '360.953674' is not facet-valid with respect to maxInclusive '180.0' for type '#AnonType_longitudeGeographicalPosition'.'
> cvc-type.3.1.3: The value '360.953674' of element 'longitude' is not valid.'

So you can parse out the element name, which is the guilty terminal field name.

III. Combine I and II with some introspection and you can reconstruct a full Java Beans style path to the erroneous field if necessary.

# javascript - 访问 Stackoverflow 的自动建议标记系统？

> ID：11076946
> 
> 赞同：11
> 
> 时间：2012-06-18T04:31:36.337
> 
> 标签：javascript, html, css, ajax, stackexchange-api

有没有办法访问 stackoverflow 的很棒的标签系统？我想为我自己的网站借用 Stack 很棒的自动建议和标记迷你解释框。显然，我可以使用 jQuery UI 自动建议标签，但我真的很想也包括很酷的小标签描述。如果没有，有人可以告诉我所有这些解释/描述的来源，以便我可以实施类似的系统吗？![在此处输入图像描述](../Images/1fe6ec114b4e2ab26dc6af559089d01e.png)

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-18T05:38:29.760

[tageditornew.js](http://cdn.sstatic.net/Js/tageditornew.en.js)

第 308 行：

```
$.get("/filter/tags", {q: a,newstyle: !0}, "json").done(function(c) {
    C["t_" + a] = c;
    StackExchange.helpers.removeSpinner();
    b(c)
}) 
```

这可能会帮助你！

* * *

# 事实证明，

API 网址是这样的：

```
https://stackoverflow.com/filter/tags?q=STRING&newstyle=BOOLEAN
```

*   **`q`** - 查询文本。
*   **`newstyle`** - 是否需要新样式。新样式的结果将以 JSON 格式返回，并带有同义词和摘录等附加信息。

**演示： http:** [//jsfiddle.net/DerekL/bXXb7/](http://jsfiddle.net/DerekL/bXXb7/)（使用跨域请求 jQuery 插件）

例如：

```
https://stackoverflow.com/filter/tags?q=htm
```

会给你：

```
"html|99829\nhtml5|16359\nxhtml|4143\nhtml-parsing|1461\nhtml-lists|1328\nhtml5-video|949" 
```

`99829`问题的数量在哪里。我花了 15 分钟查看源代码来找出这个 api。-_-”

换上`javascript`新风格会给你这个：[这里](https://stackoverflow.com/filter/tags?q=javascript&newstyle=true)

> [`[{"Name":"javascript","Synonyms":"classic-javascript|javascript-execution","Count":223223,"Excerpt":"JavaScript is a dynamic language commonly used for scripting in web browsers. It is NOT the same as Java. Use this tag for questions regarding ECMAScript and its dialects/implementations (excluding ActionScript and JScript). If a framework or library, such as jQuery, is used, include that tag as well. Questions that don't include a framework/library tag, such as jQuery, implies that the question requires a pure JavaScript answer."},{"Name":"javascript-events","Synonyms":"javascript-event","Count":5707,"Excerpt":"Creating and handling JavaScript events inline in HTML or through a script."},{"Name":"facebook-javascript-sdk","Synonyms":"","Count":992,"Excerpt":"Facebook's JavaScript SDK provides a rich set of client-side functionality for accessing Facebook's server-side API calls. These include all of the features of the REST API, Graph API, and Dialogs."},{"Name":"javascript-library","Synonyms":"","Count":675,"Excerpt":"A JavaScript library is a library of pre-written JavaScript which allows for easier development of JavaScript-based applications, especially for AJAX and other web-centric technologies."},{"Name":"javascript-framework","Synonyms":"","Count":563,"Excerpt":"A JavaScript framework is a library of pre-written JavaScript which allows for easier development of JavaScript-based applications, especially for AJAX and other web-centric technologies."},{"Name":"unobtrusive-javascript","Synonyms":"","Count":340,"Excerpt":"Unobtrusive JavaScript is a general approach to the use of JavaScript in web pages."}]`]

你可以从那里得到什么：

*   所有标签都以`javascript`
*   同义词
*   标签计数
*   不错的标签说明

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T05:22:43.317

如果您正在寻找高级逻辑，简而言之，它只是一个快速的自定义自动完成。

每当您键入一个标签（即一个新词或一个与以前的标签用空格分隔的词）时，将使用 JSON 对象向服务器发出 AJAX 请求，然后由客户端脚本解释并以可用的布局呈现.

[比较字母“h”](https://stackoverflow.com/filter/tags?q=h&newstyle=true)和[单词“html”](https://stackoverflow.com/filter/tags?q=html&newstyle=true)的自动完成 JSON 对象应该可以让您充分了解此特定实现的工作原理（如果出现提示，可以使用任何文本编辑器打开这些对象）。

在一个有点不相关的说明：自动完成响应必须是*fast*。根据运行数据自动完成的复杂性，您可能会发现[IMDb 魔术搜索的工作原理](http://aws.amazon.com/de/solutions/case-studies/imdb/)很有趣。

## 更新：

看到您关于访问标签库*内容*的评论，这实际上可能更像是一个元问题。我很难想到使用 API（如果有的话）或仅使用来自外部资源的标签库对 SO 有益的场景 - 但是这里的内容是在知识共享下提供的，因此您*可以*在正确归属的情况下使用它。这不构成法律建议:)

# java - 连接到 MySQL 服务器 JDBC

> ID：11076948
> 
> 赞同：1
> 
> 时间：2012-06-18T04:31:52.987
> 
> 标签：java, mysql, jdbc

我正在尝试使用 java 中的 JDBC 工具（使用 eclipse）连接到 MySQL 服务器。我只是想知道如何输入 2 个用户/密码组合。第一个是我用来连接服务器的（例如当我 ssh 进入服务器时），第二个是我进入 phpmyadmin 的。到目前为止，我只将 phpmyadmin 密码输入到 jdbc 连接属性中，并且它没有连接。这是我目前的声明：

```
conn = DriverManager.getConnection("jdbc:mysql://[IP of server]:3306/[Database Table name]", "[UserName (same as phpmyadmin)]","[Password (same as phpmyadmin)]"); 
```

我得到一个

```
java.sql.SQLException: null,  message from server: "Host '[My computer's full host name]' is not allowed to connect to this MySQL server" 
```

我只是想知道除了 phpmyadmin 用户名/密码之外，是否还需要输入我的服务器登录名/密码（我用于 ssh 的那个）。我是 JDBC 和 MySQL 服务器的新手，所以我会很感激任何提示。

仅作为背景，我可以通过 ssh 成功连接，并且可以通过 phpmyadmin 登录服务器。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-18T04:46:15.713

以下是您如何创建一个可以从另一台客户端计算机访问您的服务器的帐户的方法：

```
CREATE USER 'bobby'@'localhost' IDENTIFIED BY 'some_password'; 
```

这会创建用户，并说他可以从 localhost 连接。

如果他在机器 192.168.0.5 上，你会做这样的事情：

```
CREATE USER 'bobby'@'192.168.0.5' IDENTIFIED BY 'some_password'; 
```

然后，当然，您必须适当地授予权限：

```
GRANT ALL PRIVILEGES ON databasename.* TO 'bobby'@'localhost' WITH GRANT OPTION;
GRANT ALL PRIVILEGES ON databasename.* TO 'bobby'@'192.168.0.5' WITH GRANT OPTION; 
```

反正这是我的经历。

您最好阅读[本节以了解如何指定 MySQL 帐户](http://dev.mysql.com/doc/refman/5.1/en/account-names.html)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-18T04:41:52.217

当您从 PHPMyAdmin 登录时，Web 服务器位于托管 Mysql 数据库（在您的情况下）的同一台服务器上。默认情况下，Mysql 不允许来自远程主机的连接；只有本地机器可以访问数据库。

我会在黑暗中拍摄，并说您运行 java 代码的计算机与托管 mysql 服务器的计算机不同。您必须将 Mysql 配置为允许通过配置文件从远程主机连接，然后更改`mysql`. `users`指定用户的表以允许从您的 IP 地址进行连接（或者，如果您不关心安全性，则可以使用任何 IP 地址。）

要配置 mysql 以允许来自远程主机的连接，您必须从配置文件中删除 "bind-address=" 行。

要允许任何主机登录到特定的 mysql 用户，您必须设置`mysql`. `users`主机`列到“％”。

这两项都必须完成。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-18T09:45:03.717

```
public class MysqlConnect{
  public static void main(String[] args) {
  System.out.println("MySQL Connect Example.");
  Connection conn = null;
  String url = "jdbc:mysql://localhost:3306/";
  String dbName = "jdbctutorial";
  String driver = "com.mysql.jdbc.Driver";
  String userName = "root"; 
  String password = "root";
  try {
  Class.forName(driver).newInstance();
  conn = DriverManager.getConnection(url+dbName,userName,password);
  System.out.println("Connected to the database");
  conn.close();
  System.out.println("Disconnected from database");
  } catch (Exception e) {
  e.printStackTrace();
  }
  }
} 
```

# c++ - 使用命令行参数在特定页面/主题打开 .chm 文件

> ID：11076952
> 
> 赞同：8
> 
> 时间：2012-06-18T04:32:41.700
> 
> 标签：c++, chm, view-helpers

我正在尝试通过使用 C++ 中的系统调用在特定页面/主题打开 .chm 文件（Windows 帮助文件）。

我可以通过以下代码成功地将 .chm 文件打开到起始页，但是**如何将 .chm 文件打开到帮助文件中的特定页面/主题？**

```
system("start c:/help/myhelp.chm"); 
```

PS：我知道系统是邪恶的/不鼓励，但系统部分与我试图确定的.chm 文件（将指定我要打开的页面）一起传递的命令行参数并不真正相关。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-07-19T00:58:22.407

好的，论点是这样的：

```
system(" /Q /E:ON /C HH.EXE ms-its:myChm.chm::myPageName.htm"); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-18T04:53:15.310

Windows SDK 中有一个名为 HtmlHelp 的 API，位于 HtmlHelp.h 文件中。你可以这样调用：

```
HtmlHelp(GetDesktopWindow(), L"C:\\helpfile\\::/helptopic.html", HH_DISPLAY_TOPIC, NULL); 
```

[Microsoft Docs - HtmlHelpA 函数](https://docs.microsoft.com/en-us/windows/desktop/api/htmlhelp/nf-htmlhelp-htmlhelpa)提供了有关该函数的更多信息。`HtmlHelp()`通常会解析为`HtmlHelpA()`或`HtmlHelpW()`取决于是否设置了 Unicode 编译器选项。

另请参阅[Microsoft Docs-HTML 帮助 API 概述](https://docs.microsoft.com/en-us/previous-versions/windows/desktop/htmlhelp/html-help-api-overview)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-07-18T20:21:31.163

另一种选择 - 使用 ShellExecute。Microsoft 帮助不容易使用。这种方法更容易并且符合您的问题。这是打开帮助文件并传递 ID 号的快速例程。我刚刚设置了一些简单的字符，所以你可以看到发生了什么：

```
 void DisplayHelpTopic(int Topic)
{

    // The .chm file usually has the same name as the application - if you don’t want to hardcode it...
    char *CmndLine = GetCommandLine(); // Gets the command the program started with.
    char Dir[255];
    GetCurrentDirectory (255, Dir);
    char str1[75] = "\0"; // Work string
    strncat(str1, CmndLine, (strstr(CmndLine, ".exe") - CmndLine)); // Pull out the first parameter in the command line (should be the executable name) w/out the .exe
    char AppName[50] = "\0";
    strcpy(AppName, strrchr(str1, '\\')); // Get just the name of the executable, keeping the '\' in front for later when it is appended to the directory

    char parms[300];
    // Build the parameter string which includes the topic number and the fully qualified .chm application name
    sprintf(parms,_T("-mapid %d ms-its:%s%s.chm"), Topic, Dir, AppName);
    // Shell out, using My Window handle, specifying the Microsoft help utility, hh.exe, as the 'noun' and passing the parameter string we build above
// NOTE: The full command string will look like this:
//   hh.exe -mapid 0 ms-its:C:\\Programs\\Application\\HelpFile.chm
    HINSTANCE retval = ShellExecute(MyHndl, _T("open"), _T("hh.exe"), parms, NULL, SW_SHOW);
} 
```

这些主题在您的 .chm 文件中进行了编号。我为每个主题设置了一个#define，所以如果我必须更改 .chm 文件，我可以只更改包含文件以匹配，而不必担心在代码中搜索硬编码值。

# android - 从相册 ID facebook sdk 获取照片

> ID：11076953
> 
> 赞同：0
> 
> 时间：2012-06-18T04:33:09.860
> 
> 标签：android, facebook-graph-api

我使用以下代码在 facebook 中获取专辑 ID 并成功获取专辑 ID。但是当我使用专辑 ID 通过 URL [https://graph.facebook.com/album_id](https://graph.facebook.com/album_id)获取文件 JSON但它返回 FALSE。我没有知道为什么？

```
 String wallAlbumID = "";
            String response;
            response = mFacebook.request("me/albums");
            JSONObject json = Util.parseJson(response);
            JSONArray albums = json.getJSONArray("data");
            for (int i =0; i < albums.length(); i++) {
            JSONObject album = albums.getJSONObject(i);                     
                wallAlbumID = album.getString("id");
                Toast.makeText(getBaseContext(), wallAlbumID, Toast.LENGTH_LONG).show();
                Log.d("JSON", wallAlbumID);
                //break;
            } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T06:22:17.360

请在您的请求中添加访问令牌。好像你错过了它。

# javascript - 使用分页骨干集合同时获取

> ID：11076954
> 
> 赞同：0
> 
> 时间：2012-06-18T04:33:27.993
> 
> 标签：javascript, jquery, backbone.js, coffeescript

我有一个分页集合，可以同时进行多个 fetch()es。例如，用户可以单击“第 1 页”看到“正在加载...”消息，然后在第 1 页加载之前单击“第 2 页”，这将触发另一个 fetch() 请求（显然发送不同的页面参数）。希望这是有道理的。我在一个视图（Coffeescript）中处理这个：

```
render: ->
  if @collection.hasPage()
    # render the view
  else
    el.append '<h3>Loading...</h3>'

    @collection.fetch
      success: (coll, resp) => @render() 
```

但是，如果我单击第 1 页，然后在第 1 页加载之前单击第 2 页，则第 1 页的成功回调最终会被调用两次（因此总共调用了三个 success()）。success() 回调按以下顺序调用：第 1 页、第 2 页、第 1 页

为什么会这样？我应该用事件处理这个吗？我不应该同时允许多个 fetch()es 吗？谢谢您的帮助。

**更新**

这就是我现在的做法：

```
initialize: ->
  @page = @collection.page

render: ->
  if @collection.hasPage(@page)
    #render
  else
    el.append 'Loading...'

    @collection.fetch
       success: (coll,resp) =>
         # do some stuff with coll
         if @page == @collection.page
           @render() 
```

似乎工作...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T06:15:54.663

这就是它发生的原因（至少根据我的逻辑）：

1.  调用渲染 -> 触发第 1 页的提取
2.  用户点击页面 2
3.  调用渲染 -> 触发第 2 页的提取
4.  从第一次调用到第 1 页的 fetch 返回 -> 成功： (coll, resp) => @render()
5.  WHAM BAM Render 再次调用 -> 页面尚未加载，所以...
6.  第 3 次和第 1 页调用 Fetch
7.  在这里的某个地方，第 2 页的调用返回

而且你绝对应该用事件来处理这个问题，因为问题是由你的渲染函数进行获取和绘图引起的。

# php - Do I need a Flash Media Server for a 1-1 chat

> ID：11076956
> 
> 赞同：0
> 
> 时间：2012-06-18T04:33:40.533
> 
> 标签：php, ajax, flash, chat

I am developing a new php based website and want to include a 1-1 chat functionality within it. Am currently looking at the below 2 options 1\. Based on Flash 2\. Based on PHP/Ajax

Need help with the following questions. 1\. Will I really need a Flash Media server for this requirement? What advantages will an FMS give me over PHP/Ajax 2\. Comparing between php/ajax and FMS, will the latter reduce my bandwidth usage?

Any other points I should be aware of before taking this decision?

Thanks in advance

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T04:38:56.817

您不需要 FMS，您可以轻松使用 Cirrus。(Adobes 的 RTMFP) 看看这里： http: [//labs.adobe.com/technologies/cirrus/](http://labs.adobe.com/technologies/cirrus/)

或者这里有一个关于如何建立简单聊天的教程：http: [//www.flashrealtime.com/simple-chat-p2p-netgroup-rtmfp/](http://www.flashrealtime.com/simple-chat-p2p-netgroup-rtmfp/)

那就是如果你仍然想走闪光的方式。

# ios - 在第二次启动后显示 UIAlertView

> ID：11076960
> 
> 赞同：2
> 
> 时间：2012-06-18T04:33:51.560
> 
> 标签：ios, xcode, uialertview

如果这是不可能的，那么在使用应用程序 3 分钟后我该怎么做？这将用于给我们评分警报，但我希望用户在要求他们评分之前有一些时间实际使用该应用程序。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-18T04:40:31.247

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)options {
    // ...
    if ([self plusPlusLaunchCount] == 2) {
        [self showRateUsAlert];
    }
    return YES;
}

- (void)showRateUsAlert {
    // show the Rate Us alert view
}

- (NSInteger)plusPlusLaunchCount {
    static NSString *Key = @"launchCount";
    NSInteger count = 1 + [[NSUserDefaults standardUserDefaults] integerForKey:Key];
    [[NSUserDefaults standardUserDefaults] setInteger:count forKey:Key];
    return count;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T05:27:34.523

你为什么不使用第三方库，而不是让“给我们评分”提醒自己？这种事情反正已经做过很多次了。

这是一个非常好的之一：[iRate](https://github.com/nicklockwood/iRate)

标题中没有完全回答您的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T04:41:06.163

您需要为`NSTimer`要显示警报的时间间隔设置一个。当应用程序启动时启动计时器并在您设置的时间间隔结束后显示警报。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-18T05:28:08.040

我建议您使用每次启动应用程序时都会调用的 DidBecomeActive，并且来自后台/睡眠模式：

如果用户长时间不使用应用程序，您需要取消计时器。

```
- (void)applicationDidBecomeActive:(UIApplication *)application{
    // Override point for customization after application launch.    

    rateUsTimer = [[NSTimer scheduledTimerWithTimeInterval:180 
                                     target:self
                                   selector:@selector(showRateUsAlert) 
                                   userInfo:nil 
                                    repeats:NO] retain];

}

- (void)applicationWillResignActive:(UIApplication *)application{
   [rateUsTimer_ invalidate];
   [rateUsTimer_ release];
   rateUsTimer = nil;
}

- (void)applicationDidEnterBackground:(UIApplication *)application{
   [rateUsTimer_ invalidate];
   [rateUsTimer_ release];
   rateUsTimer = nil;
}

- (void)showRateUsAlert {
    //Here you present alert
    [rateUsTimer_ release];
    rateUsTimer = nil;
} 
```

# java - 插入到jtree中的根节点后如何自动打开子节点？

> ID：11076961
> 
> 赞同：1
> 
> 时间：2012-06-18T04:33:54.997
> 
> 标签：java, swing, listener, jtree, expand

当我将子节点插入根节点时，根节点不会自动展开。

我想在将子节点插入根节点后自动扩展根节点。

提前致谢..

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-18T11:21:49.290

没有默认的自动化，你必须自己实现它。几种可能性，都涉及注册到树模型的自定义 TreeModelListener。侦听器在接收到 treeNodesInserted 时采取行动

*   手动将 JTree 展开到路径
*   将选择设置为路径（如果其 expandsSelectedPaths 属性为 true，则默认扩展树）

代码片段：

```
class MyTreeModelListener implements TreeModelListener {

     public void treeNodesInserted(TreeModelEvent e) {
          // first option
          myTree.expandPath(e.getPath());
          // second option
          myTree.setSelectionPath(e.getPath());
     }

     // empty implementation of other listener methods
     ...
} 

// usage
myTree.getModel().addTreeModelListener(new MyTreeModelListener()); 
```

# hadoop - Hadoop 设置中的 NoClassDefFoundError

> ID：11076964
> 
> 赞同：2
> 
> 时间：2012-06-18T04:35:16.757
> 
> 标签：hadoop

我正在使用本指南来设置 Hadoop：

[http://blog.sqltrainer.com/2012/01/installing-and-configuring-apache.html](http://blog.sqltrainer.com/2012/01/installing-and-configuring-apache.html)

但是，当我到达应该输入的部分时，`bin/hadoop version`会出现以下错误：

```
cygpath: can't convert empty path
java.lang.NoClassDefFoundError: org/apache/hadoop/util/PlatformName
Caused by: java.lang.ClassNotFoundException: org.apache.hadoop.util.PlatformName
        at java.net.URLClassLoader$1.run(Unknown Source)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(Unknown Source)
        at java.lang.ClassLoader.loadClass(Unknown Source)
        at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
        at java.lang.ClassLoader.loadClass(Unknown Source)
Could not find the main class: org.apache.hadoop.util.PlatformName.  Program will exit.
Exception in thread "main" cygpath: can't convert empty path
cygpath: can't convert empty path
Hadoop 0.22.0 
```

我最近使用的是 1.0.3 版本，并且运行良好，但由于一个错误，我不得不降级到 0.22.0 版本。不幸的是，我无法让这个版本工作。

更多信息：

```
JAVA_HOME=/cygdrive/c/Progra~1/Java/jre6 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T02:58:43.077

我在 windows/cygwin 上安装时遇到了这个错误，在您选择的编辑器中打开 $HADOOP_INSTALL/bin/hadoop-config.sh。找到以“# cygwin path translation”开头的部分并添加以下行：

```
 CLASSPATH=`cygpath -wp "$CLASSPATH"` 
```

保存并退出。

该修复对我有用。有关更多信息，请查看此博客

[http://juliensimon.blogspot.in/2011/01/installing-hadoop-on-windows-cygwin.html](http://juliensimon.blogspot.in/2011/01/installing-hadoop-on-windows-cygwin.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T10:21:56.493

形成您的 pastebin，看起来您的 LD_LIBRARY_PATH 变量有问题：

```
++ JAVA_LIBRARY_PATH=
++ '[' -d 'C:\cygwin\usr\local\hadoop\/build/native' -o -d 'C:\cygwin\usr\local\                      hadoop\/lib/native' ']'
cygwin warning:
 MS-DOS style path detected: C:\cygwin\usr\local\hadoop\/build/native
 Preferred POSIX equivalent is: /usr/local/hadoop/build/native
 CYGWIN environment variable option "nodosfilewarning" turns off this warning.
 Consult the user's guide for more details about POSIX paths:
   http://cygwin.com/cygwin-ug-net/using.html#using-pathnames 
```

这条路径是否应该由 cygwin 路径 ( `/cygdrive/c/cygwin/usr/local/hadoop/build/native`)，并确保斜线是正确的方式。

`LD_LIBRARY`对字符串或bin 和 conf 文件夹执行 grep`native`以查看您可能在哪里设置错误

# c# - 哪种通信技术更适合在两个应用程序之间进行通信

> ID：11076973
> 
> 赞同：2
> 
> 时间：2012-06-18T04:37:30.310
> 
> 标签：c#

C#WinForms：两个应用程序有几种方法可以一起交谈，我在这方面不是很了解，但我想到了 MSMQ 和命名管道之类的东西，但不确定哪种方法最好。所以这是一个场景，你认为最好的方法是什么：

假设我编写了一个 Windows 服务，它有时会将一些文件备份到某个地方。用户打开了一些我的应用程序 XYX，我希望他得到通知，嘿那里有新的备份文件给你。

就这样。这就是情景。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T04:51:19.740

使用 MSMQ，因为它实现起来非常简单，您可以使用对象。然后生产者和消费者可以非常简单地相互交互。这两个应用程序（生产者，消费者）可以在同一台机器上，跨网络，甚至在不总是连接的不同机器上。MSMQ 被认为是故障安全的，因为如果第一次传输失败，它将重试发送消息。这使您可以非常确信您的应用程序消息将到达其目的地。

[更多细节](http://www.techrepublic.com/article/use-microsoft-message-queuing-in-c-for-inter-process-communication/6170794)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T04:54:31.847

我们刚刚在最近的一个项目中将命名管道用于类似目的。代码变得非常简单。我不能为这个特定的代码申请功劳，但这里是：

```
 /// <summary>
    /// This will attempt to open a service to listen for message requests. 
    /// If the service is already in use it means that another instance of this WPF application is running.
    /// </summary>
    /// <returns>false if the service is already in use by another WPF instance and cannot be opened;  true if the service sucessfully opened</returns>
    private bool TryOpeningTheMessageListener()
    {
        try
        {
            NetNamedPipeBinding b = new NetNamedPipeBinding();
            sh = new ServiceHost(this);
            sh.AddServiceEndpoint(typeof(IOpenForm), b, SERVICE_URI);
            sh.Open();

            return true;
        }
        catch (AddressAlreadyInUseException)
        {
            return false;
        }
    }

    private void SendExistingInstanceOpenMessage(int formInstanceId, int formTemplateId, bool isReadOnly, DateTime generatedDate, string hash)
    {
        try
        {
            NetNamedPipeBinding b = new NetNamedPipeBinding();
            var channel = ChannelFactory<IOpenForm>.CreateChannel(b, new EndpointAddress(SERVICE_URI));
            channel.OpenForm(formInstanceId, formTemplateId, isReadOnly, generatedDate, hash);
            (channel as IChannel).Close();
        }
        catch
        {
            MessageBox.Show("For some strange reason we couldnt talk to the open instance of the application");
        }
    } 
```

在我们刚刚的 OnStartup 中

```
 if (TryOpeningTheMessageListener())
        {
            OpenForm(formInstanceId, formTemplate, isReadOnly, generatedDate, hash);
        }
        else
        {
            SendExistingInstanceOpenMessage(formInstanceId, formTemplate, isReadOnly, generatedDate, hash);
            Shutdown();
            return;
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T04:59:33.017

有很多方法可以实现您的要求；

1.  正如达米斯所说，进入数据库并从中读取。
2.  在文件中创建一个条目并从中读取。
3.  使用 WCF - Windows Communication Foundation 并将配置设置为使用 MSMQ 绑定。阅读[WCF 和 MSMQ](http://www.codeproject.com/Articles/32221/Sample-Starter-Project-Using-WCF-and-MSMQ)文章以帮助您入门。

# javascript - 如何在当前光标位置将文本插入文本区域？

> ID：11076975
> 
> 赞同：162
> 
> 时间：2012-06-18T04:37:32.420
> 
> 标签：javascript, textarea

我想创建一个简单的函数，将文本添加到用户光标位置的文本区域中。它需要是一个干净的功能。只是基础知识。我可以弄清楚其余的。

* * *

## 回答 #1

> 赞同：143
> 
> 时间：2012-06-18T04:44:42.477

[输入元素的](https://developer.mozilla.org/en-US/docs/Web/API/HTMLInputElement)使用`selectionStart`/属性（同样适用）`selectionEnd` `<textarea>`

```
function insertAtCursor(myField, myValue) {
    //IE support
    if (document.selection) {
        myField.focus();
        sel = document.selection.createRange();
        sel.text = myValue;
    }
    //MOZILLA and others
    else if (myField.selectionStart || myField.selectionStart == '0') {
        var startPos = myField.selectionStart;
        var endPos = myField.selectionEnd;
        myField.value = myField.value.substring(0, startPos)
            + myValue
            + myField.value.substring(endPos, myField.value.length);
    } else {
        myField.value += myValue;
    }
} 
```

* * *

## 回答 #2

> 赞同：95
> 
> 时间：2013-05-31T02:05:09.473

这个片段可以在几行 jQuery 1.9+ 中帮助你：http: [//jsfiddle.net/4MBUG/2/](http://jsfiddle.net/4MBUG/2/)

```
$('input[type=button]').on('click', function() {
    var cursorPos = $('#text').prop('selectionStart');
    var v = $('#text').val();
    var textBefore = v.substring(0,  cursorPos);
    var textAfter  = v.substring(cursorPos, v.length);

    $('#text').val(textBefore + $(this).val() + textAfter);
}); 
```

* * *

## 回答 #3

> 赞同：45
> 
> 时间：2013-11-13T18:26:02.310

为了正确的Javascript

```
HTMLTextAreaElement.prototype.insertAtCaret = function (text) {
  text = text || '';
  if (document.selection) {
    // IE
    this.focus();
    var sel = document.selection.createRange();
    sel.text = text;
  } else if (this.selectionStart || this.selectionStart === 0) {
    // Others
    var startPos = this.selectionStart;
    var endPos = this.selectionEnd;
    this.value = this.value.substring(0, startPos) +
      text +
      this.value.substring(endPos, this.value.length);
    this.selectionStart = startPos + text.length;
    this.selectionEnd = startPos + text.length;
  } else {
    this.value += text;
  }
}; 
```

* * *

## 回答 #4

> 赞同：44
> 
> 时间：2015-12-14T23:36:33.227

### 新答案：

[https://developer.mozilla.org/en-US/docs/Web/API/HTMLInputElement/setRangeText](https://developer.mozilla.org/en-US/docs/Web/API/HTMLInputElement/setRangeText)

我不确定浏览器对此的支持。

> 在 Chrome 81 中测试。

```
function typeInTextarea(newText, el = document.activeElement) {
  const [start, end] = [el.selectionStart, el.selectionEnd];
  el.setRangeText(newText, start, end, 'select');
}

document.getElementById("input").onkeydown = e => {
  if (e.key === "Enter") typeInTextarea("lol");
}
```

```
<input id="input" />
<br/><br/>
<div>Press Enter to insert "lol" at caret.</div>
<div>It'll replace a selection with the given text.</div>
```

### 老答案：

Erik Pukinskis 回答的纯 JS 修改：

```
function typeInTextarea(newText, el = document.activeElement) {
  const start = el.selectionStart
  const end = el.selectionEnd
  const text = el.value
  const before = text.substring(0, start)
  const after  = text.substring(end, text.length)
  el.value = (before + newText + after)
  el.selectionStart = el.selectionEnd = start + newText.length
  el.focus()
}

document.getElementById("input").onkeydown = e => {
  if (e.key === "Enter") typeInTextarea("lol");
}
```

```
<input id="input" />
<br/><br/>
<div>Press Enter to insert "lol" at caret.</div>
```

> 在 Chrome 47、81 和 Firefox 76 中测试。

如果您想在同一字段中输入时更改当前选定文本的值（用于自动完成或类似效果），`document.activeElement`请作为第一个参数传递。

这不是最优雅的方法，但它非常简单。

示例用法：

```
typeInTextarea('hello');
typeInTextarea('haha', document.getElementById('some-id')); 
```

* * *

## 回答 #5

> 赞同：22
> 
> 时间：2019-03-15T20:08:50.913

一个简单的解决方案，适用于 firefox、chrome、opera、safari 和 edge，但可能不适用于旧的 IE 浏览器。

```
var target = document.getElementById("mytextarea_id")

if (target.setRangeText) {
    //if setRangeText function is supported by current browser
    target.setRangeText(data)
} else {
    target.focus()
    document.execCommand('insertText', false /*no UI*/, data);
} 
```

`setRangeText`功能允许您用提供的文本替换当前选择，或者如果没有选择，则在光标位置插入文本。据我所知，它仅受 Firefox 支持。

对于其他浏览器，有“insertText”命令，它只影响当前聚焦的 html 元素，并且具有相同的行为`setRangeText`

部分灵感来自这篇[文章](https://www.everythingfrontend.com/posts/insert-text-into-textarea-at-cursor-position.html)

* * *

## 回答 #6

> 赞同：11
> 
> 时间：2015-04-25T07:20:14.203

我喜欢简单的**javascript**，而且我通常有**jQuery**。这是我根据[mparkuk 提出的](https://stackoverflow.com/questions/11076975/insert-text-into-textarea-at-cursor-position-javascript/29862280#comment42060663_16848724)：

```
function typeInTextarea(el, newText) {
    var start = el.prop("selectionStart")
    var end = el.prop("selectionEnd")
    var text = el.val()
    var before = text.substring(0, start)
    var after  = text.substring(end, text.length)
    el.val(before + newText + after)
    el[0].selectionStart = el[0].selectionEnd = start + newText.length
    el.focus()
}

$("button").on("click", function() {
    typeInTextarea($("textarea"), "some text")
    return false
}) 
```

这是一个演示：[http ://codepen.io/erikpukinskis/pen/EjaaMY?editors=101](http://codepen.io/erikpukinskis/pen/EjaaMY?editors=101)

* * *

## 回答 #7

> 赞同：10
> 
> 时间：2017-01-02T11:32:17.483

Rab 的回答效果很好，但不适用于 Microsoft Edge，所以我也为 Edge 添加了一个小的改编：

[https://jsfiddle.net/et9borp4/](https://jsfiddle.net/et9borp4/)

```
function insertAtCursor(myField, myValue) {
    //IE support
    if (document.selection) {
        myField.focus();
        sel = document.selection.createRange();
        sel.text = myValue;
    }
    // Microsoft Edge
    else if(window.navigator.userAgent.indexOf("Edge") > -1) {
      var startPos = myField.selectionStart; 
      var endPos = myField.selectionEnd; 

      myField.value = myField.value.substring(0, startPos)+ myValue 
             + myField.value.substring(endPos, myField.value.length); 

      var pos = startPos + myValue.length;
      myField.focus();
      myField.setSelectionRange(pos, pos);
    }
    //MOZILLA and others
    else if (myField.selectionStart || myField.selectionStart == '0') {
        var startPos = myField.selectionStart;
        var endPos = myField.selectionEnd;
        myField.value = myField.value.substring(0, startPos)
            + myValue
            + myField.value.substring(endPos, myField.value.length);
    } else {
        myField.value += myValue;
    }
} 
```

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2019-10-12T17:40:07.967

```
function insertAtCaret(text) {
  const textarea = document.querySelector('textarea')
  textarea.setRangeText(
    text,
    textarea.selectionStart,
    textarea.selectionEnd,
    'end'
  )
}

setInterval(() => insertAtCaret('Hello'), 3000)
```

```
<textarea cols="60">Stack Overflow Stack Exchange Starbucks Coffee</textarea>
```

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2017-12-16T23:03:06.140

如果用户在插入文本后没有触摸输入，则永远不会触发 'input' 事件，并且 value 属性不会反映更改。因此，在以编程方式插入文本后触发输入事件很重要。聚焦领域是不够的。

以下是[Snorvarg 的答案](https://stackoverflow.com/a/41426040/3319392)副本，最后带有输入触发器：

```
function insertAtCursor(myField, myValue) {
    //IE support
    if (document.selection) {
        myField.focus();
        sel = document.selection.createRange();
        sel.text = myValue;
    }
    // Microsoft Edge
    else if(window.navigator.userAgent.indexOf("Edge") > -1) {
      var startPos = myField.selectionStart; 
      var endPos = myField.selectionEnd; 

      myField.value = myField.value.substring(0, startPos)+ myValue 
             + myField.value.substring(endPos, myField.value.length); 

      var pos = startPos + myValue.length;
      myField.focus();
      myField.setSelectionRange(pos, pos);
    }
    //MOZILLA and others
    else if (myField.selectionStart || myField.selectionStart == '0') {
        var startPos = myField.selectionStart;
        var endPos = myField.selectionEnd;
        myField.value = myField.value.substring(0, startPos)
            + myValue
            + myField.value.substring(endPos, myField.value.length);
    } else {
        myField.value += myValue;
    }
    triggerEvent(myField,'input');
}

function triggerEvent(el, type){
  if ('createEvent' in document) {
    // modern browsers, IE9+
    var e = document.createEvent('HTMLEvents');
    e.initEvent(type, false, true);
    el.dispatchEvent(e);
  } else {
    // IE 8
    var e = document.createEventObject();
    e.eventType = type;
    el.fireEvent('on'+e.eventType, e);
  }
} 
```

[归功于 plainjs.com](https://plainjs.com/javascript/events/trigger-an-event-11/)的triggerEvent 函数

[更多关于w3schools.com](https://www.w3schools.com/jsref/event_oninput.asp)上的 oninput 事件

我在为聊天创建表情符号选择器时发现了这一点。如果用户只是选择几个表情符号并点击“发送”按钮，则用户永远不会触摸输入字段。检查 value 属性时，它始终为空，即使插入的表情符号 unicode 在输入字段中可见。事实证明，如果用户不触摸该字段，则“输入”事件永远不会触发，解决方案是像这样触发它。花了很长时间才弄清楚这个……希望它能节省一些时间。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2019-12-21T06:37:05.893

下面的代码是Dmitriy Kubyshkin对包[https://github.com/grassator/insert-text-at-cursor的 TypeScript 改编。](https://github.com/grassator/insert-text-at-cursor)

```
 /**
 * Inserts the given text at the cursor. If the element contains a selection, the selection
 * will be replaced by the text.
 */
export function insertText(input: HTMLTextAreaElement | HTMLInputElement, text: string) {
  // Most of the used APIs only work with the field selected
  input.focus();

  // IE 8-10
  if ((document as any).selection) {
    const ieRange = (document as any).selection.createRange();
    ieRange.text = text;

    // Move cursor after the inserted text
    ieRange.collapse(false /* to the end */);
    ieRange.select();

    return;
  }

  // Webkit + Edge
  const isSuccess = document.execCommand("insertText", false, text);
  if (!isSuccess) {
    const start = input.selectionStart;
    const end = input.selectionEnd;
    // Firefox (non-standard method)
    if (typeof (input as any).setRangeText === "function") {
      (input as any).setRangeText(text);
    } else {
      if (canManipulateViaTextNodes(input)) {
        const textNode = document.createTextNode(text);
        let node = input.firstChild;

        // If textarea is empty, just insert the text
        if (!node) {
          input.appendChild(textNode);
        } else {
          // Otherwise we need to find a nodes for start and end
          let offset = 0;
          let startNode = null;
          let endNode = null;

          // To make a change we just need a Range, not a Selection
          const range = document.createRange();

          while (node && (startNode === null || endNode === null)) {
            const nodeLength = node.nodeValue.length;

            // if start of the selection falls into current node
            if (start >= offset && start <= offset + nodeLength) {
              range.setStart((startNode = node), start - offset);
            }

            // if end of the selection falls into current node
            if (end >= offset && end <= offset + nodeLength) {
              range.setEnd((endNode = node), end - offset);
            }

            offset += nodeLength;
            node = node.nextSibling;
          }

          // If there is some text selected, remove it as we should replace it
          if (start !== end) {
            range.deleteContents();
          }

          // Finally insert a new node. The browser will automatically
          // split start and end nodes into two if necessary
          range.insertNode(textNode);
        }
      } else {
        // For the text input the only way is to replace the whole value :(
        const value = input.value;
        input.value = value.slice(0, start) + text + value.slice(end);
      }
    }

    // Correct the cursor position to be at the end of the insertion
    input.setSelectionRange(start + text.length, start + text.length);

    // Notify any possible listeners of the change
    const e = document.createEvent("UIEvent");
    e.initEvent("input", true, false);
    input.dispatchEvent(e);
  }
}

function canManipulateViaTextNodes(input: HTMLTextAreaElement | HTMLInputElement) {
  if (input.nodeName !== "TEXTAREA") {
    return false;
  }
  let browserSupportsTextareaTextNodes;
  if (typeof browserSupportsTextareaTextNodes === "undefined") {
    const textarea = document.createElement("textarea");
    textarea.value = "1";
    browserSupportsTextareaTextNodes = !!textarea.firstChild;
  }
  return browserSupportsTextareaTextNodes;
} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-09-03T07:48:43.783

发布修改功能供自己参考。此示例从对象中插入一个选定的项目`<select>`，并将插入符号放在标签之间：

```
//Inserts a choicebox selected element into target by id
function insertTag(choicebox,id) {
    var ta=document.getElementById(id)
    ta.focus()
    var ss=ta.selectionStart
    var se=ta.selectionEnd
    ta.value=ta.value.substring(0,ss)+'<'+choicebox.value+'>'+'</'+choicebox.value+'>'+ta.value.substring(se,ta.value.length)
    ta.setSelectionRange(ss+choicebox.value.length+2,ss+choicebox.value.length+2)
} 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2017-12-05T07:28:46.410

```
/**
 * Usage "foo baz".insertInside(4, 0, "bar ") ==> "foo bar baz"
 */
String.prototype.insertInside = function(start, delCount, newSubStr) {
    return this.slice(0, start) + newSubStr + this.slice(start + Math.abs(delCount));
};

$('textarea').bind("keydown keypress", function (event) {
    var val = $(this).val();
    var indexOf = $(this).prop('selectionStart');
    if(event.which === 13) {
        val = val.insertInside(indexOf, 0,  "<br>\n");
        $(this).val(val);
        $(this).focus();
    }
}); 
```

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2013-11-12T02:42:40.340

将其更改为`getElementById(myField)`：

```
function insertAtCursor(myField, myValue) {
    // IE support
    if (document.selection) {
        document.getElementById(myField).focus();
        sel = document.selection.createRange();
        sel.text = myValue;
    }
    // MOZILLA and others
    else if (document.getElementById(myField).selectionStart || document.getElementById(myField).selectionStart == '0') {
        var startPos = document.getElementById(myField).selectionStart;
        var endPos = document.getElementById(myField).selectionEnd;
        document.getElementById(myField).value =
                document.getElementById(myField).value.substring(0, startPos)
                + myValue
                + document.getElementById(myField).value.substring(endPos, document.getElementById(myField).value.length);
    } else {
        document.getElementById(myField).value += myValue;
    }
} 
```

# mysql - Mysql 不被识别为内部或外部命令

> ID：11076982
> 
> 赞同：1
> 
> 时间：2012-06-18T04:38:29.610
> 
> 标签：mysql, django

我正在尝试使用我的 Django project-ecomstore 配置 mysql，但我得到了标题中给出的错误，

```
DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.mysql', # 
        'NAME': 'ecomstore',                      # Or path to database file if using sqlite3.
        'USER': 'root',                      # Not used with sqlite3.
        'PASSWORD': 'password',                  # Not used with sqlite3.
        'HOST': '',                      # Set to empty string for localhost. Not used with sqlite3.
        'PORT': '',                      # Set to empty string for default. Not used with sqlite3.
    }
} 
```

错误：

```
C:\Python27\Djangoprojects\ecomstore>python manage.py dbshell
'mysql' is not recognized as an internal or external command,
operable program or batch file. 
```

请提供您的意见。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T04:52:04.937

只需使用`'ENGINE': 'mysql',`. 这就是我当前的应用程序的方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T05:05:54.413

这仅仅意味着“mysql”可执行命令文件（mysql.exe）没有添加到您的系统路径中，因此系统无法找到该文件。要将“mysql”添加到系统路径，请尝试找到“mysql”驻留文件夹。

看来您正在使用Windows，以下是步骤：

1) 进入控制面板 -> 系统和安全 -> 系统

2）将“mysql常驻文件夹路径”粘贴到变量值中：弹出编辑系统变量字段。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T05:20:26.963

`python manage.py dbshell`只是一个快捷方式`mysql -d DATABASENAME -u USERNAME -p PASSWORD`，您需要在系统上安装 mysql，并且该 mysql 命令应该能够从控制台运行。

# javascript - 使用 jQuery 一次显示一个列表元素；“上一个”链接断开

> ID：11076983
> 
> 赞同：0
> 
> 时间：2012-06-18T04:38:30.607
> 
> 标签：javascript, jquery

我想一次显示一个列表元素。理想情况下，第一个列表元素将在用户打开页面时显示。当用户单击“下一步”按钮时，第一个列表元素将消失，而第二个元素将出现。当用户单击“上一个”按钮时，将显示上一个元素。到目前为止，下一个按钮工作得很好，但上一个按钮滚动通过 li 元素，但继续到链接元素，这不应该发生。这是我正在使用的代码。

HTML：

```
<div class="event_months">
    <a class="prev" href="#">&#60;</a>
    <a class="next" href="#">&#62;</a>
    <li>one</li>
    <li>two</li>
</div> 
```

CSS：

```
.event_months .noShow {
    display:none;
}

.event_months .doShow {
    display:inline;
}

.event_months .first {
    display:inline !important;
​} 
```

jQuery：

```
<script type = "text/javascript" > $('document').ready(function() {
    $(".event_months li:nth-child(3)").addClass("doShow");

    $("a.next").click(function() {
        $('.first').toggleClass("first");
        var $toHighlight = $('.doShow').next().length > 0 ? $('.doShow').next() : $('.event_months li').first();
        $('.doShow').removeClass('doShow');
        $toHighlight.addClass('doShow');
    });

    $("a.prev").click(function() {
        $('.first').toggleClass("first");
        var $toHighlight = $('.doShow').prev().length > 0 ? $('.doShow').prev() : $('#event_months li').last();
        $('.doShow').removeClass('doShow');
        $toHighlight.addClass('doShow');
    });

}); 
</script>​​​​​​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T04:55:39.663

下一个工作而不是上一个工作的原因是因为`.prev()`在第一个项目上会给你一个锚标记，在它之前使用一个选择器来工作

```
$(".event_months li:nth-child(3)").addClass("doShow");

$("a.next").click(function() {
    $('.first').toggleClass("first");
    var $toHighlight = $('.doShow').next('li').length > 0 ? $('.doShow').next('li') : $('.event_months li').first();
    $('.doShow').removeClass('doShow');
    $toHighlight.addClass('doShow');
});

$("a.prev").click(function() {
    $('.first').toggleClass("first");
    var $toHighlight = $('.doShow').prev('li').length > 0 ? $('.doShow').prev('li') : $('.event_months li').last();
    $('.doShow').removeClass('doShow');
    $toHighlight.addClass('doShow');
}); 
```

[小提琴](http://jsfiddle.net/mowglisanu/mCQ2H/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T04:48:49.753

改变：

```
$('#event_months li') 
```

到

```
$('.event_months li') 
```

您使用了 id 选择器而不是类选择器。

# html - mp4 文件在 Firefox 和 IE 上不起作用

> ID：11076990
> 
> 赞同：1
> 
> 时间：2012-06-18T04:39:30.780
> 
> 标签：html, internet-explorer, firefox, video, mp4

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN""http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />    
</head>

<body>
<video id="my_video_1" class="video-js vjs-default-skin" controls
 preload="auto" width="300" height="170" poster="../images/audi/audi_poster.png"
 data-setup="{}">
 <source src="../videos/audi/audi.mp4" type='video/mp4'>
 <source src="../videos/audi/audi.ogg" type='video/ogg'>
 <source src="../videos/audi/audi.webm" type='video/webm'>

 </video>
 </body>
 </html> 
```

对于上述代码，该文件在 Google Chrome 上播放没有任何错误，但在 Firefox 和 IE 上则没有。

我不知道我错在哪里..请帮助..我真的需要解决这个问题。请帮忙

该网站在goddady服务器上运行。我没有使用任何数据库来存储视频文件，也没有使用任何 php 编程。我只是将视频上传到服务器 n 的 html 文件...这是一个非常简单的页面，我想拥有所有 3 个浏览器的视频播放..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T05:21:13.200

HTML5`video`和`audio`标签支持目前不是最友好的。

首先，您的 DOCTYPE 应`<!DOCTYPE html>`如评论中所述。然后有几件事需要考虑：

1.  Firefox 不支持 MP4 播放，Opera 也不支持。您需要将视频从 MP4 转换为 WEBM 或 OGG 格式，并将它们放在与 MP4 相同的目录中以适合您的示例。
2.  IE8 及以下版本根本不支持该`<video>`标签，我猜这是您的 IE 版本的问题。但是，IE9 确实支持 MP4 播放。

在为我目前正在从事的项目玩得很好之后，我还遇到了一些问题：

1.  iOS 设备（和一般的移动设备）不太喜欢这个标签（尤其是内联标签），玩了一段时间后，我最终直接链接到了 MP4 视频，现在它在默认播放器中打开了。
2.  Google Chrome 或 IE9 尚不支持全屏按钮，但 Safari 支持。没有检查过FF或Opera，见下文。
3.  避免用户需要上传 3 个不同的文件。我为 FF 和 Opera（以及任何不支持 MP4`<video>`播放的浏览器）添加了 Flash 后备 (Flowplayer)。我可能会在服务器上创建 WEBM 或 OGG 文件，但这也有助于使用 IE8 等较旧的浏览器。以下是有关如何检查对 MP4 播放的支持的**JavaScript片段：**

    ```
    var flashaudioplayer=false;
    var flashvideoplayer=false;

    // Check if browser supports HTML5 native mp3/mp4 playback
    var audioTag = document.createElement('audio');
    var videoTag = document.createElement('video');
    if (!(!!(audioTag.canPlayType) && ("no" != audioTag.canPlayType("audio/mpeg")) && ("" != audioTag.canPlayType("audio/mpeg")))) {
    flashaudioplayer=true;

    }
    if (!(!!(videoTag.canPlayType) && ("no" != videoTag.canPlayType("video/mp4")) && ("" != videoTag.canPlayType("video/mp4")))) {
    flashvideoplayer=true;
    } 
    ```

4.  您还会发现`<audio>`标签中的 MP3 播放支持存在同样的问题，Flowplayer 也有播放 MP3 文件的方法，因此它是 Flash 后备的不错选择。

# java - 防止暴露敏感数据违反 PCI 标准 - response.getWriter().write(xml.toString())

> ID：11076992
> 
> 赞同：0
> 
> 时间：2012-06-18T04:40:09.483
> 
> 标签：java, stringbuffer

我正在根据代码审计报告修复代码。它针对具有语法的行显示“防止敏感数据的暴露” `response.getWriter().write(xml.toString())`。整个代码如下。

```
String alertId =  request.getParameter("alertId") != null ? request.getParameter("alertId") : "";
                    String desc=AAAA.getBBBB(Long.parseLong(AAAA.getCCCC(alertId)));
                    StringBuffer xml = new StringBuffer();

                    xml.append("<?xml version=\"1.0\"?>");
                    xml.append("<parent>");
                    xml.append("<child>");
                    xml.append("<alertDesc>");
                    xml.append(desc);
                    xml.append("</alertDesc>");
                    xml.append("</child>");
                    xml.append("</parent>");

                    response.getWriter().write(xml.toString());  // ISSUE IN THIS LINE
                    response.setContentType("text/xml");
                    response.setHeader("Cache-Control", "no-cache"); 
```

我已经完成了足够的家庭工作，可以针对 XSS 攻击修复它，并使用 ESAPI 进行相同的处理。但不知道如何解决这个问题。请提出建议报告针对报告的问题有以下消息。“通过网页泄漏 toString() 结果（“xml”）”

经过一天的研发，我发现 sax 解析器可以在这种情况下帮助我。它实际上是 StringBuffer.toString() 语法的内存泄漏，由于敏感数据被暴露和丢失。但我不知道如何实现。在某些地方，我发现使用 StringBuilder() 类而不是 StringBuffer() 类。任何人都可以帮助我或提出宝贵的建议。提前致谢。

对于另一种类型的代码，我也有同样的问题。它在下面。

```
StringBuffer content = (StringBuffer)file.get("content");
response.setContentLength((int)content.length());
            response.getWriter().write(content.toString()); 
```

我再次不知道如何解决这个问题。问题是该工具报告的敏感数据泄漏相同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T14:32:01.573

正如我在评论中所说，我不认为评论与代码本身有关，而是与敏感数据的公开有关。我已经阅读了 PCI-DSS 文档，但我不记得它说什么应该如何编码（不管是好的做法）。您可以查看自己提供的所有[PCI 文档](https://www.pcisecuritystandards.org/security_standards/documents.php)。这是一项艰巨的任务，更好的方法是尝试找出顾问的意思。

当您不知道问题出在哪里时，很难解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T09:52:48.680

content.toString() 需要正确验证。使用 ESAPI 严格验证。直接写入响应确实很脆弱，如果数据是从具有请求作为输入的方法输出的，那么它会两次受到攻击。重大安全问题。

# algorithm - 最短加权路径算法 - 频繁变化的边缘

> ID：11076997
> 
> 赞同：5
> 
> 时间：2012-06-18T04:40:58.843
> 
> 标签：algorithm, data-structures, graph, shortest-path

我正在尝试解决图形问题。图是加权的和无向的。
图表大小：

```
no. of vertices upto  200,000 
no. of edges upto  200,000 
```

我必须在图中找到给定 2 个节点（S & D）之间的最短路径。我用`Dijkstra's algorithm`来找这个。
现在的问题是图形经常变化。如果从图中删除特定边，我必须找到 S & D 之间的最短路径。我正在使用 Dijkstra 算法再次计算新路径，方法是将图视为去除边缘后的新图。但是，这种方法太慢了，因为可能有 200,000 条边，我将为每个边删除计算 200,000 次最短路径。
我正在考虑使用任何记忆技术，但无法弄清楚如果从图中删除特定边缘，最短路径可能会完全改变。
//更多细节
源和目的地在整个问题中都是固定的。
每次边缘移除将有多达 200,000 个查询。一次，对于每个测试用例，只从初始图中删除一条边

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T06:56:02.797

由于没有添加边，因此移除后的最短路径将始终大于（或等于）原始路径。除非删除的边是原始最短路径的一部分，否则结果不会改变。如果它是原始最短路径的一部分，那么再次运行算法是最坏情况的解决方案。

如果您不是在寻找确切的答案，您可以尝试近似的局部方法来填补缺失的边缘。

* * *

您可以扩充 Dijkstra 算法以存储允许您在初始搜索期间回溯到特定状态的信息。

这意味着每次在松弛期间最终更改最短路径时，都要记录对数据结构（包括堆）所做的更改。这允许您在第一次运行期间将算法的状态恢复到任何点。

当您删除最短路径上的一条边时，您需要返回到该边松弛之前的点，然后重新启动算法，就好像删除的边从未出现过一样。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-18T14:28:34.243

我的建议：

首先使用 Dijkstra 找到从 Source 到 Destination 的最短路径，但同时从 Source 和 Destination 步行（使用负距离数字表示您已经走过的距离目的地有多远），始终扩展最短路径距离（从源或目的地）。一旦遇到具有来自反向节点的值的节点，那么到达该节点的路径是最短的。

然后移除边，如果边不是最短路径的一部分则返回当前已知的最短路径

如果删除的边是最短路径的一部分，则再次执行搜索，已知绝对距离大于（正或负）比被删除的节点中较小的一个。将先前已知的最短路径添加到已知结果中，当从起点步行时为正，从终点走到断路段时为负。现在从该起点开始在两个方向上搜索，如果您点击了一个具有值集（正或负）的节点，或者是先前最短路径的一部分，那么您将找到新的最短路径。

这样做的主要好处是：

1.  你从源和目的地都走，所以除非你的源节点在边缘，否则你在整体上走的节点更少，并且
2.  您不会放弃整个搜索结果，即使删除的边是之前最短路径中的第一条边，您只需找到以最短方式重新连接的路径即可。

即使删除的节点是先前已知最短路径的一部分，每次重新计算的性能都将相当可观。

关于它是如何工作的，请看这张图：

```
 I
       /
  B---E
 /   /   H
A   D   /|
 \ / \ / |
  C---F--G 
```

我们想要从`A`to `H`，为了简单起见，让我们假设每条边都值 1（但它可以是任何东西）

我们从 A 开始：

```
 I
       /
  B---E
 /   /   H
0   D   /|
 \ / \ / |
  C---F--G 
```

现在将 H 的值设置为从 0 开始：

```
 I
       /
  B---E
 /   /   (0)
0   D   / |
 \ / \ /  |
  C---F---G 
```

并展开：

```
 I
       /
  1---E
 /   /   (0)
0   D   / |
 \ / \ /  |
  1---F---G 
```

现在我们扩展下一个最小值，它将是`H`：

```
 I
       /
  1---E
 /   /     (0)
0   D     /  |
 \ / \   /   |
  1---(-1)--(-1) 
```

现在我们任意选择`B`，因为它出现在 之前`C`，`F`或者`G`（它们具有相同的绝对值）：

```
 I
       /
  1---2
 /   /     (0)
0   D     /  |
 \ / \   /   |
  1---(-1)--(-1) 
```

然后C

```
 I
       /
  1---2
 /   /        (0)
0   2        /  |
 \ / \      /   |
  1---2 & (-1)--(-1) 
```

现在我们有一个节点，它知道它的正值和负值，因此我们知道它到两者的距离，`A`并且`H`由于我们首先扩展最短节点，这一定是最短路径，因此我们可以说从`A`到的最短路径`H`是`A->C->F->H`和成本`ABS(2)+ABS(-1) = 3`

现在假设我们删除了行 C->F I / 1---2 / / (0) 0 2 / | \ / \ / | 1 2 & (-1)--(-1)

然后，我们删除所有已知值，其绝对值高于 C 和 F 的较小值（在本例中为 1），留下：

```
 I
       /
  1---E
 /   /     (0)
0   D     /  |
 \ / \   /   |
  1   (-1)--(-1) 
```

现在我们再次像以前一样展开，从`B`： I / 1---2 / / (0) 0 D / | \ / \ / | 1 (-1)--(-1)

然后`C`

```
 I
       /
  1---2
 /   /     (0)
0   2     /  |
 \ / \   /   |
  1   (-1)--(-1) 
```

现在 F：

```
 I
       /
  1---2
 /   /         (0)
0   2&(-2)    /  |
 \ /    \    /   |
  1      (-1)---(-1) 
```

`A`因此我们知道从to 到的最短路径`H`现在是：A->C->D->F->H 和成本`ABS(2)+ABS(-2) = 4`

这将适用于任意数量的节点、边和边权重，如果您没有更多节点要扩展，那么您将返回“无路由”响应。

您可以通过不重置先前最短路径中节点的节点值来进一步优化它，这样做会失去简单的性质，但不会过于复杂。

在上面的示例中，它最初不会产生影响，但是如果我们随后删除链接会产生影响，因为我们会记住链中其他节点`A->C`的成本（负数）`C`

与仅使用单面 Dijkstra 并回滚到移除边缘之前相比的好处如下所示：

```
 I
       /
  1---E
 /   /   H
0   D   /|
 \ / \ / |
  1   F--G 
```

现在我们将展开`B`：

```
 I
       /
  1---2
 /   /   H
0   D   /|
 \ / \ / |
  1   F--G 
```

C：

```
 I
       /
  1---2
 /   /   H
0   2   /|
 \ / \ / |
  1   F--G 
```

丁：

```
 I
       /
  1---2
 /   /   H
0   2   /|
 \ / \ / |
  1   3--G 
```

E：

```
 3
       /
  1---2
 /   /   H
0   2   /|
 \ / \ / |
  1   3--G 
```

F：

```
 3
       /
  1---2
 /   /   4
0   2   /|
 \ / \ / |
  1   3--4 
```

然后我们将确定现在的路径`A->C->D->F->H`，它的成本为 4。请注意，我们需要在此处执行 5 个扩展步骤，并将其与我们需要的 3 进行比较。

随着被移除的边缘越来越靠近路径的中间，我们将通过使用双向图行走算法重新计算新路径来获得极大的节省。除非有 50 个节点挂起，但`H`只有一条路径从`A`到`H`其中只有一条从`H`到 的直接路径，`A`但有 50 条边连接到`A`。

鉴于您有大约 200,000 条边，可能多达 200,000 个节点，与我的示例图相比，您可能会看到可观的节省，该示例图只有 9 个节点和 11 条边。这是基于我们正在寻找具有最少节点扩展的算法的想法，因为它们可能大部分计算时间都将用于循环。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T06:55:32.080

我有个主意：

*   第一次做 Dijkstra 并记住从 Source 到 Destination 的最短路径的所有边缘。
*   当您进行删除时，您会检查是否从最短路径中删除了一条边。如果没有结果是一样的。如果是，你做另一个 Dijkstra。

另一个想法：

*   首先执行 Dijkstra 并为每个顶点记住依赖于该顶点的所有元素。
*   当您执行删除时，您应该执行诸如[拓扑排序](http://en.wikipedia.org/wiki/Topological_sorting)之类的操作，并对依赖于您的顶点的所有顶点进行更新，并对这些顶点执行部分 Dikstra。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-18T09:18:32.277

如果移除的边缘不是来自最远路径，那么路径将保持不变。否则可能没有好的精确解，因为问题是单调的 - 使用节点 C 从 A 到 B (sp(A, B)) 的最短路径 sp 由所有最短路径组成，使得**sp(A, B) = sp(A , C) + sp(C, B)**（对于所有 C）。

通过删除一个（非常好的）边缘，您可能会破坏所有这些路径。最好的解决方案（但不准确）可能是使用 Floyd-Warshall 算法来计算所有节点对之间的所有最短路径，并且在从路径中移除边之后尝试使用最短绕行来修复路径。