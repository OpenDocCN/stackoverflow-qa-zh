# StackOverflow 问答 10132000-10132999

# facebook - Facebook 连接自动化测试，推荐？

> ID：10132001
> 
> 赞同：8
> 
> 时间：2012-04-12T21:18:32.923
> 
> 标签：facebook, selenium, webdriver, selenium-rc

由于这么多网站使用 Facebook 登录/连接进行身份验证，Facebook 或其他网站是否有关于如何自动单击 Facebook 按钮以弹出弹出窗口，然后切换到弹出窗口并登录并返回主窗口并检查登录成功并继续的标准建议从那里？

虽然每个网站都不同，但登录过程和 FB 按钮对所有人来说几乎相同。所以我认为应该有样板代码，每个人都可以使用它来自动化他们网站的 FB 登录，作为他们自动化测试的一部分，并省去尝试自动化的麻烦。

我已经体验过并看到有关 FB 连接尝试选择弹出窗口以登录 IE 等问题的帖子（可能还有 Safari）。

如果我们不这样做，很高兴提供有关如何进行自动化的推荐流程

*   与 Selenium RC
*   使用 WebDriver
*   使用不同的绑定（Java、Python、Ruby、PHP、Perl 等）
*   与 watir、watin 等

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T19:57:54.510

怎么样的东西

```
#
# Click on Facebook connect link
#
selenium.setSpeed("4000");  # wait for the new window to open
time to open.
selenium.selectWindow("window name");  # You will have to specify the window name here
selenium.windowFocus();
selenium.setSpeed("0");

# Now you should click the link 

#
# And get back to the previous window
#
selenium.setSpeed("4000");
selenium.selectWindow("");
selenium.windowFocus();
selenium.setSpeed("0"); 
```

我希望它有所帮助，我不是 Selenium 高级用户，但这对您的需求应该不错。

# php - 从 CURL 中删除“Array ()”会导致 PHP

> ID：10132002
> 
> 赞同：0
> 
> 时间：2012-04-12T21:18:33.737
> 
> 标签：php, json, curl

我正在尝试使用 curl 从受密码保护的 JSON 提要中获取数据，但结果会在提要的开头添加“数组（”，并在末尾添加“）”，使其无效。

我正在使用这段代码：

```
<?php
  $url = 'https://slx.arlcap.com/sdata/rcs/tablet/products/Y6UJ9A00000Z/filings';
  $username = 'xxx';
  $password = 'xxx';
  $ch = curl_init();
  curl_setopt($ch, CURLOPT_URL, $url);
  curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
  curl_setopt($ch, CURLOPT_USERPWD, "$username:$password");
  curl_setopt($ch, CURLOPT_HTTPAUTH, CURLAUTH_ANY);
  curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
  curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true);
  curl_setopt($ch, CURLOPT_UNRESTRICTED_AUTH, 1);
  curl_setopt($ch, CURLOPT_HEADER, false);
  //curl_setopt($ch, CURLOPT_HTTPAUTH, CURLAUTH_BASIC);
  //curl_setopt($ch, CURLOPT_REFERER, $url);
  $result = curl_exec($ch);
  $info = curl_getinfo($ch);
  curl_close($ch);
  $data = json_decode($result, true);
  print_r($data);
?> 
```

结果在这里： [http ://www.motion.tc//DataTables-1.9.0/examples/ajax/feed.php](http://www.motion.tc//DataTables-1.9.0/examples/ajax/feed.php)

有没有一种方法可以在不添加“Array()”元素的情况下返回数据？

谢谢！安德鲁

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T21:23:10.983

那是因为你正在使用一个`print_r`函数。要仅获取变量内部的值，请使用 foreach 循环执行回显。像这样的东西：

```
foreach( $data as $key => $val ) {
  echo $key . " -> " . $val;
} 
```

如果它不是嵌套数组。如果它**是**嵌套数组，请搜索 SO 以有效打印它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T21:33:07.217

如果您正在开发基于服务的应用程序，您会得到这样的格式，因为您正在尝试打印`array` [http://php.net/manual/en/language.types.array.php](http://php.net/manual/en/language.types.array.php)我认为您使用标准格式，例如`json`输出……

请参见 ：

[http://www.php.net/manual/en/function.json-decode.php](http://www.php.net/manual/en/function.json-decode.php)

[http://www.php.net/manual/en/function.json-encode.php](http://www.php.net/manual/en/function.json-encode.php)

它将为您提供更简洁的代码，并与其他技术（例如`javascript`等）具有更好的兼容性。

# java - Java 中的 startsWith() 方法在空字符串上返回 true。如何？

> ID：10132005
> 
> 赞同：3
> 
> 时间：2012-04-12T21:18:38.973
> 
> 标签：java

> **可能重复：**
> [为什么“abcd”.StartsWith(“”) 返回 true？](https://stackoverflow.com/questions/145509/why-does-abcd-startswith-return-true)

以下简单的 Java 代码只是使用了该`startsWith()`方法。

```
package startwithdemo;

final public class Main
{    
    public static void main(String[] args)
    {
        System.out.println("My String".startsWith("M"));
        System.out.println("My String".startsWith("My"));
        System.out.println("My String".startsWith(""));
    }
} 
```

它显示`true`在所有情况下。前两种情况很明显，但在最后一种情况下（使用空字符串），它正在返回`true`. 如何？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-12T21:21:29.430

因为这就是 API 的设计方式，[请参阅 javadoc](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/String.html#startsWith%28java.lang.String%29)。

但更严重的是，一个类比可以是看集合。假设一个字符串是一组字符，那么空字符串就是空集。[在集合论中](http://en.wikipedia.org/wiki/Empty_set)，空集总是任何集合的一部分。

* * *

*为什么空集是每个集的子集？（取自[这里](http://mathcentral.uregina.ca/QQ/database/QQ.09.06/narayana1.html)）*

> 集合 A 是集合 B 的子集当且仅当 A 的每个元素也是 B 的元素。如果 A 是空集，则 A 没有元素，因此它的所有元素（没有元素）都属于 B无论我们处理的是什么 B 组。也就是说，空集是每个集合的子集。
> 
> 另一种理解它的方法是查看交叉点。两个集合的交集是每个原始集合的子集。因此，如果 {} 是空集且 A 是任意集，则 {} intersect A 是 {}，这意味着 {} 是 A 的子集，而 {} 是 {} 的子集。
> 
> 你可以用反证法来证明。假设您有一个空集 {} 和一个集合 A。根据定义，{} 是 A 的子集，除非 {} 中的某些元素不在 A 中。所以如果 {} 不是A 那么 {} 中有一个元素。但是 {} 没有元素，因此这是矛盾的，因此集合 {} 必须是 A 的子集。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-12T21:22:30.927

从[Javadoc](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#startsWith%28java.lang.String%29)：

> 返回： 如果参数表示的字符序列是该字符串表示的字符序列的前缀，则返回 true；否则为假。 另请注意，如果参数是**空字符串** 或等于由 equals(Object) 方法确定的此 String 对象，**则将返回 true 。**

 ** * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-12T21:23:06.083

是真的：

`("" + "My String")`显然以`""`.

这和`"My String"`开头是一样的`""`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-12T21:22:56.443

```
System.out.println(""+""+""+"string"=="string") // output is true; 
```*

# silverlight-4.0 - 使用 SilverLight 连接到 Web 服务

> ID：10132009
> 
> 赞同：1
> 
> 时间：2012-04-12T21:18:45.690
> 
> 标签：silverlight-4.0

我一直在网上寻找一种通过 silverlight 应用程序调用 Web 服务的简单方法，但无法决定如何去做。连接到这个网站的最简单方法是什么：[http](http://wsf.cdyne.com/WeatherWS/Weather.asmx) ://wsf.cdyne.com/WeatherWS/Weather.asmx并返回一个带有指定邮政编码的 xml（我已经使用 AJAX 完成了这项工作，我只是想尝试一下使用 silverlight 作为替代方法让它工作）。很感谢任何形式的帮助！

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T21:28:50.423

嗯..这很容易。在您的 Silverligt 项目中，单击“Reference”，选择“Add Service Reference..”并添加气象服务的 wsdl ( [http://wsf.cdyne.com/WeatherWS/Weather.asmx?WSDL](http://wsf.cdyne.com/WeatherWS/Weather.asmx?WSDL) )。[Visual Studio 11 Beta 使用basicHttpBinding](http://msdn.microsoft.com/en-us/library/system.servicemodel.basichttpbinding.aspx)生成 WCF 代理。并将其用作任何服务。

UODATE：添加下一个参考

```
using SilverlightApplication1.ServiceReference1; 
```

并实施。

```
 public MainPage()
        {
            InitializeComponent();

            var weather = new WeatherSoapClient();
            weather.GetWeatherInformationCompleted
                += new EventHandler<GetWeatherInformationCompletedEventArgs>(OnGetWeatherInformationCompleted);
            weather.GetWeatherInformationAsync();
        }

        private void OnGetWeatherInformationCompleted(object sender, GetWeatherInformationCompletedEventArgs e)
        {
            // Get data from e.Result
        } 
```

在我看来，您应该阅读一些有关 Web 服务和 WCF 的内容。

# grails - 当我单击带有 Geb 的超链接时，页面转换没有发生

> ID：10132014
> 
> 赞同：3
> 
> 时间：2012-04-12T21:19:18.143
> 
> 标签：grails, groovy, spock, geb

当我使用

```
searchResults(0).ApplicationId.click(ApplicationSummaryPage) 
```

转换发生在 ApplicationSummaryPage 但是当我使用它时

```
searchResults(0).ApplicationId.click() 
```

我没有看到页面转换发生。我通过覆盖`onLoad`and`onUnload`方法验证了这一点。然而，我可以直观地验证（当 Geb 在测试运行期间打开浏览器时）控件正在转移到 ApplicationSummaryPage。

```
void onLoad(Page previousPage)
{
    println ("(ApplicationSummaryPage) previousPage = "+previousPage);
}

void onUnload(Page newPage)
{
    println ("(ApplicationSummaryPage) newPage = "+newPage);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-01-24T18:14:37.497

我遇到了同样的问题，你可以解决这个问题

1.  通过检查页面对象中的 url 处理程序
2.  在为单击功能声明的静态内容中，添加此代码（到：ApplicationSummaryPage）并创建返回浏览器页面实例的方法。

例如。，

```
class TestPage extends Page{
  static content = {
    clickBtn(to:ApplicationSummaryPage) { //logic goes here }
  }
  ApplicationSummaryPage onClickBtn()
  {
    clickBtn.click()
    browser.page
  }
} 
```

# java - 包含两个 ListFragment 的片段

> ID：10132016
> 
> 赞同：0
> 
> 时间：2012-04-12T21:19:27.977
> 
> 标签：java, android, android-layout, android-fragments, android-activity

我正在尝试设置一个平板电脑友好的界面。因此，我有两个导航选项卡，它们打开两个片段。主Activity的onCreate：

```
 @Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    mActionBar = getActionBar();
    mActionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);

    Tab mainTab = mActionBar.newTab()
            .setText("Articoli")
            .setTabListener(new TabEventListener(new InListFragment(0)));
    Tab favTab = mActionBar.newTab()
            .setText("Preferiti")
            .setTabListener(new TabEventListener(new TestFragment("Preferiti")));

    mActionBar.addTab(mainTab);
    mActionBar.addTab(favTab);

} 
```

这是我的 TabEvengListener：

```
public class TabEventListener implements TabListener {
Fragment mFragment;

public TabEventListener(Fragment fragment) {
    mFragment = fragment;
}

public void onTabSelected(Tab tab, FragmentTransaction ft) {
    ft.replace(android.R.id.content, mFragment, mFragment.getTag());
}

public void onTabUnselected(Tab tab, FragmentTransaction ft) {
    ft.remove(mFragment);
}

public void onTabReselected(Tab tab, FragmentTransaction ft) {
    //NOTHING ATM
} 
```

}

现在，我指的是这个 API 演示： http: [//developer.android.com/resources/samples/ApiDemos/src/com/example/android/apis/app/FragmentLayout.html](http://developer.android.com/resources/samples/ApiDemos/src/com/example/android/apis/app/FragmentLayout.html)我有一个带有布局的 Activity包含一个或两个片段，具体取决于屏幕状态。我的问题来了：我没有一个活动，而是一个片段，我找不到任何方法来声明一个布局以获取两个子片段。我想在平板电脑上拥有一个带有两个窗格的界面，一个带有“标题列表”（对话列表），另一个带有“详细列表”（文本）。

我想知道是否有一种简单的方法来做我解释的事情，或者我必须删除导航选项卡，这样我才能使用 Activity 而不是 Fragment 并遵循 API 演示。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T22:36:29.567

如果您阅读[文档](http://developer.android.com/guide/topics/fundamentals/fragments.html)，您会发现这个定义

“片段表示 Activity 中的行为或用户界面的一部分”和“片段必须始终嵌入在 Activity 中”

所以在我看来，答案是“不，你不能”

# javascript - HTML5 和 Javascript：使用 File API 打开和读取本地文件

> ID：10132018
> 
> 赞同：1
> 
> 时间：2012-04-12T21:19:33.830
> 
> 标签：javascript, html, jsni, fileapi

我正在为一个项目使用 Google Web Toolkit，并希望用户选择一个文本文件以在浏览器内的文本窗口中打开。这是几乎可以工作的代码：

```
 private DialogBox createUploadBox() {
     final DialogBox uploadBox = new DialogBox();
     VerticalPanel vpanel = new VerticalPanel();
     String title = "Select a .gms file to open:";
     final FileUpload upload = new FileUpload();
     uploadBox.setText(title);
     uploadBox.setWidget(vpanel);
     HorizontalPanel buttons = new HorizontalPanel();
     HorizontalPanel errorPane = new HorizontalPanel();
     Button openButton = new Button( "Open", new ClickHandler() {
        @Override
        public void onClick(ClickEvent event) {
            String filename = upload.getFilename();
            int len = filename.length();
            if (len < 5) {
                Window.alert("Please enter a valid filename.\n\tFormat: <filename>.gms");
            } else if (!filename.substring(len-4).toLowerCase().equals(".gms")) {
                Window.alert(filename.substring(len-4) + " is not valid.\n\tOnly files of type .gms are allowed.");
            } else {
                Window.alert(getFileText(filename));
            }
        }
        private native String getFileText(String filename) /*-{
            // Check for the various File API support.
            if (window.File && window.FileReader && window.FileList && window.Blob) {
                // Great success! All the File APIs are supported.
                var reader = new FileReader();
                var file = File(filename);
                str = reader.readAsText(file);
                return str;
            } else {
                alert('The File APIs are not fully supported in this browser.');
                return;
            }
        }-*/;
     });
     Button cancelButton = new Button( "Cancel", 
             new ClickHandler() {
        @Override
        public void onClick(ClickEvent event) {
            uploadBox.hide();               
        }
     });
     buttons.add(openButton);
     buttons.add(cancelButton);
     vpanel.add(upload);
     vpanel.add(buttons);
     vpanel.add(errorPane);
     uploadBox.setAnimationEnabled(true);
     uploadBox.setGlassEnabled(true);
     uploadBox.center();
     return uploadBox;
 } 
```

每当我尝试在我的程序中实际使用此功能时，我都会得到：

**(NS_ERROR_DOM_SECURITY_ERR)：安全错误**

我确定它是由以下情况引起的：

```
var file = new File(filename, null); 
```

免责声明：无论如何，我都不是 Javascript 程序员，请随时指出我在这里犯的任何明显错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T22:22:22.583

而不是使用`window`，你应该几乎总是使用`$wnd`。有关 JSNI 的更多详细信息，请参阅[https://developers.google.com/web-toolkit/doc/latest/DevGuideCodingBasicsJSNI#writing](https://developers.google.com/web-toolkit/doc/latest/DevGuideCodingBasicsJSNI#writing)。

`debugger`在使用诸如 Firebug 或 Chrome 的 Inspector 之类的东西时添加一个语句也是值得的。该语句将停止调试器中的 JS 代码，就好像您在此处设置了断点一样，允许您在 Javascript 中进行调试，一次执行一行以查看到底出了什么问题。

最后，您确定您正在阅读的文件是浏览器允许的吗？从[http://dev.w3.org/2006/webapi/FileAPI/#dfn-SecurityError](http://dev.w3.org/2006/webapi/FileAPI/#dfn-SecurityError)，由于不允许浏览器访问文件，可能会发生该错误。您可以不传入字符串，而是传入`<input type='file' />`用户正在与之交互的内容，并从那里获取他们选择的文件。

* * *

更新（抱歉耽搁了，显然我之前做的更新被扔掉了，花了我一点时间重写它）：

在原始代码中做出了几个错误的假设。我的大部分阅读内容来自[http://www.html5rocks.com/en/tutorials/file/dndfiles/](http://www.html5rocks.com/en/tutorials/file/dndfiles/)以及一些实验。

*   首先，您可以从`<input type='file' />`现场获得真实的路径，再加上
*   您可以仅通过路径从用户文件系统中读取任意文件，最后
*   API是`FileReader`同步的。

出于安全原因，大多数浏览器在您读取文件名时不会提供真实路径 - 检查您`upload.getFilename()`在多个浏览器中获得的字符串以查看它提供的内容 - 不足以加载文件。第二个问题也是一个安全问题 - 允许从文件系统读取仅使用字符串来指定要读取的文件几乎没有什么好处。

由于前两个原因，您需要询问`input`它正在处理的文件。支持 FileReader API 的浏览器允许通过读取`files`输入元素的属性来访问它。有两种简单的方法来实现这一点 - 在 jsni 中使用 NativeElement.getEventTarget()，或者只使用 FileUpload.getElement()。请记住，此`files`属性默认包含多个项目，因此在像您这样的情况下，只需读取第零个元素。

```
private native void loadContents(NativeEvent evt) /*-{
    if ($wnd.File && $wnd.FileReader && $wnd.FileList && $wnd.Blob) {
        // Great success! All the File APIs are supported.
        var reader = new FileReader();
        reader.readAsText(evt.target.files[0]);
//... 
```

或者

```
private native void loadContents(Element elt) /*-{
    if ($wnd.File && $wnd.FileReader && $wnd.FileList && $wnd.Blob) {
        // Great success! All the File APIs are supported.
        var reader = new FileReader();
        reader.readAsText(elt.files[0]);
//... 
```

对于最后一部分，`FileReader`api 是异步的 - 您不会立即获得文件的全部内容，而是需要等到`onloadend`回调被调用（再次，来自[http://www.html5rocks.com/en/tutorials /文件/dndfiles/](http://www.html5rocks.com/en/tutorials/file/dndfiles/)）。这些文件可能足够大，以至于您不希望应用程序在读取时阻塞，因此显然规范假定这是默认设置。

这就是为什么我最终创建了一个新`void loadContents`方法，而不是将代码保留在您的`onClick`方法中 - 当字段`ChangeEvent`关闭时调用此方法，以开始读取文件，尽管这可以以其他方式编写。

```
// fields to hold current state
private String fileName;
private String contents;
public void setContents(String contents) {
  this.contents = contents;
}

// helper method to read contents asynchronously 
private native void loadContents(NativeEvent evt) /*-{;
    if ($wnd.File && $wnd.FileReader && $wnd.FileList && $wnd.Blob) {
        var that = this;
        // Great success! All the File APIs are supported.
        var reader = new FileReader();
        reader.readAsText(evt.target.files[0]);
        reader.onloadend = function(event) {
            that.@com.sencha.gxt.examples.test.client.Test::setContents(Ljava/lang/String;)(event.target.result);
        };
    } else {
        $wnd.alert('The File APIs are not fully supported in this browser.');
    }
}-*/;

// original createUploadBox
private DialogBox createUploadBox() {
  final DialogBox uploadBox = new DialogBox();
  VerticalPanel vpanel = new VerticalPanel();
  String title = "Select a .gms file to open:";
  final FileUpload upload = new FileUpload();
  upload.addChangeHandler(new ChangeHandler() {
    @Override
    public void onChange(ChangeEvent event) {
      loadContents(event.getNativeEvent());
      fileName = upload.getFilename();
    }
  });
  // continue setup 
```

然后“确定”按钮从字段中读取。检查 ' 中的内容是否为非 null 可能是明智之举，`ClickHandler`甚至可能在`FileUpload`'`ChangeEvent`熄灭时将其设为 null。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T22:20:37.030

据我所知，您只能`new File(name)`在编写扩展程序时使用：[https ://developer.mozilla.org/en/Extensions/Using_the_DOM_File_API_in_chrome_code](https://developer.mozilla.org/en/Extensions/Using_the_DOM_File_API_in_chrome_code)

# mysql - 如何用一系列日期填充表格？

> ID：10132024
> 
> 赞同：48
> 
> 时间：2012-04-12T21:20:09.773
> 
> 标签：mysql, sql, date, range, populate

我需要一个 MySQL 表来保存 2011 年 1 月 1 日到 2011 年 12 月 31 日之间的所有日期。我创建了一个表，其中一列名称为“_date”，键入 DATE。

使用什么查询可以在表格中填充所有所需的日期（而不必手动输入）？

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-04-12T21:28:39.523

试试这个：

```
DROP PROCEDURE IF EXISTS filldates;
DELIMITER |
CREATE PROCEDURE filldates(dateStart DATE, dateEnd DATE)
BEGIN
  WHILE dateStart <= dateEnd DO
    INSERT INTO tablename (_date) VALUES (dateStart);
    SET dateStart = date_add(dateStart, INTERVAL 1 DAY);
  END WHILE;
END;
|
DELIMITER ;
CALL filldates('2011-01-01','2011-12-31'); 
```

这是使用它的 SQL Fiddle：[http ://sqlfiddle.com/#!2/65d13/1](http://sqlfiddle.com/#!2/65d13/1)

**[按照Andrew Fox](https://stackoverflow.com/questions/10132024/how-to-populate-a-table-with-a-range-of-dates/10132142#comment18296940_10132142)的要求编辑（检查日期是否已经存在）。**

```
CREATE PROCEDURE filldates(dateStart DATE, dateEnd DATE)

BEGIN

DECLARE adate date;

    WHILE dateStart <= dateEnd DO

        SET adate = (SELECT mydate FROM MyDates WHERE mydate = dateStart);

        IF adate IS NULL THEN BEGIN

            INSERT INTO MyDates (mydate) VALUES (dateStart);

        END; END IF;

        SET dateStart = date_add(dateStart, INTERVAL 1 DAY);

    END WHILE;

END;// 
```

这是使用它的 SQL Fiddle：[http ://sqlfiddle.com/#!2/66f86/1](http://sqlfiddle.com/#!2/66f86/1)

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2014-07-08T03:24:28.883

我不希望我的 SQL 查询需要外部依赖项（需要有一个日历表、使用日期填充临时表的过程等）。这个查询的最初想法来自[http://jeffgarretson.wordpress.com/2012 /05/04/generating-a-range-of-dates-in-mysql/](http://jeffgarretson.wordpress.com/2012/05/04/generating-a-range-of-dates-in-mysql/)为了清晰和易于使用，我对其进行了轻微优化。

```
SELECT (CURDATE() - INTERVAL c.number DAY) AS date
FROM (SELECT singles + tens + hundreds number FROM 
( SELECT 0 singles
UNION ALL SELECT   1 UNION ALL SELECT   2 UNION ALL SELECT   3
UNION ALL SELECT   4 UNION ALL SELECT   5 UNION ALL SELECT   6
UNION ALL SELECT   7 UNION ALL SELECT   8 UNION ALL SELECT   9
) singles JOIN 
(SELECT 0 tens
UNION ALL SELECT  10 UNION ALL SELECT  20 UNION ALL SELECT  30
UNION ALL SELECT  40 UNION ALL SELECT  50 UNION ALL SELECT  60
UNION ALL SELECT  70 UNION ALL SELECT  80 UNION ALL SELECT  90
) tens  JOIN 
(SELECT 0 hundreds
UNION ALL SELECT  100 UNION ALL SELECT  200 UNION ALL SELECT  300
UNION ALL SELECT  400 UNION ALL SELECT  500 UNION ALL SELECT  600
UNION ALL SELECT  700 UNION ALL SELECT  800 UNION ALL SELECT  900
) hundreds
ORDER BY number DESC) c  
WHERE c.number BETWEEN 0 and 364 
```

为其他用途优化和扩展此表很简单。如果您只需要一周的数据，您可以轻松摆脱数十和数百张表。

如果您需要更大的数字集，添加千张表很容易。您只需要复制并粘贴数百个表格并添加一个零到九个数字。

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2017-09-01T01:39:44.473

如果您处于像我这样的**程序被禁止**的情况，并且您的 sql 用户没有插入权限，因此**不允许插入**，但是您想**生成特定时期内的日期列表**，比如当年做一些聚合，使用这个

```
select * from 
(select adddate('1970-01-01',t4*10000 + t3*1000 + t2*100 + t1*10 + t0) gen_date from
 (select 0 t0 union select 1 union select 2 union select 3 union select 4 union select 5 union select 6 union select 7 union select 8 union select 9) t0,
 (select 0 t1 union select 1 union select 2 union select 3 union select 4 union select 5 union select 6 union select 7 union select 8 union select 9) t1,
 (select 0 t2 union select 1 union select 2 union select 3 union select 4 union select 5 union select 6 union select 7 union select 8 union select 9) t2,
 (select 0 t3 union select 1 union select 2 union select 3 union select 4 union select 5 union select 6 union select 7 union select 8 union select 9) t3,
 (select 0 t4 union select 1 union select 2 union select 3 union select 4 union select 5 union select 6 union select 7 union select 8 union select 9) t4) v
where gen_date between '2017-01-01' and '2017-12-31' 
```

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2013-10-25T11:00:25.010

我发现这个粘贴后变体有效：

```
DROP PROCEDURE IF EXISTS FillCalendar;
DROP TABLE IF EXISTS calendar;
CREATE TABLE IF NOT EXISTS calendar(calendar_date DATE NOT NULL PRIMARY KEY);

DELIMITER $$
    CREATE PROCEDURE FillCalendar(start_date DATE, end_date DATE)
    BEGIN
    DECLARE crt_date DATE;
    SET crt_date = start_date;
    WHILE crt_date <= end_date DO
        INSERT IGNORE INTO calendar VALUES(crt_date);
        SET crt_date = ADDDATE(crt_date, INTERVAL 1 DAY);
    END WHILE;
    END$$
DELIMITER ;

CALL FillCalendar('2013-01-01', '2013-01-03');
CALL FillCalendar('2013-01-01', '2013-01-07'); 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2018-01-31T09:40:01.280

我最近需要创建一个`calendar_date`如下表：

```
CREATE TABLE `calendar_date` (
    `date`    DATE NOT NULL      -- A calendar date.
    , `day`   SMALLINT NOT NULL  -- The day of the year for the date, 1-366.
    , `month` TINYINT NOT NULL   -- The month number, 1-12.
    , `year`  SMALLINT NOT NULL  -- The year.
    , PRIMARY KEY (`id`)); 
```

然后我使用下面的查询填充了所有可能的日期`January 1, 2001`和`December 31, 2100`（包括）之间的所有日期：

```
INSERT INTO `calendar_date` (`date`
    , `day`
    , `month`
    , `year`)
SELECT
    DATE
    , INCREMENT + 1
    , MONTH(DATE)
    , YEAR(DATE)
FROM
    -- Generate all possible dates for every year from 2001 to 2100.
    (SELECT
        DATE_ADD(CONCAT(YEAR, '-01-01'), INTERVAL INCREMENT DAY) DATE
        , INCREMENT
    FROM
        (SELECT
            (UNITS + TENS + HUNDREDS) INCREMENT
        FROM
            (SELECT 0 UNITS UNION
            SELECT 1 UNION SELECT 2 UNION SELECT 3 UNION
            SELECT 4 UNION SELECT 5 UNION SELECT 6 UNION
            SELECT 7 UNION SELECT 8 UNION SELECT 9) UNITS
        CROSS JOIN
            (SELECT 0 TENS UNION
            SELECT 10 UNION SELECT 20 UNION SELECT 30 UNION
            SELECT 40 UNION SELECT 50 UNION SELECT 60 UNION
            SELECT 70 UNION SELECT 80 UNION SELECT 90) TENS
        CROSS JOIN
            (SELECT 0 HUNDREDS UNION
            SELECT 100 UNION SELECT 200 UNION SELECT 300 UNION
            SELECT 400 UNION SELECT 500 UNION SELECT 600 UNION
            SELECT 700 UNION SELECT 800 UNION SELECT 900) HUNDREDS
        ) INCREMENT
        -- For every year from 2001 to 2100, find the number of days in the year.
        , (SELECT
            YEAR
            , DAYOFYEAR(CONCAT(YEAR, '-12-31')) - DAYOFYEAR(CONCAT(YEAR, '-01-01')) + 1 DAYS
        FROM
            -- Generate years from 2001 to 2100.
            (SELECT
                (2000 + UNITS + TENS) YEAR
            FROM
                (SELECT 0 UNITS UNION
                SELECT 1 UNION SELECT 2 UNION SELECT 3 UNION
                SELECT 4 UNION SELECT 5 UNION SELECT 6 UNION
                SELECT 7 UNION SELECT 8 UNION SELECT 9) UNITS
            CROSS JOIN
                (SELECT 0 TENS UNION
                SELECT 10 UNION SELECT 20 UNION SELECT 30 UNION
                SELECT 40 UNION SELECT 50 UNION SELECT 60 UNION
                SELECT 70 UNION SELECT 80 UNION SELECT 90) TENS
            ) YEAR
        WHERE
            YEAR BETWEEN 2001 AND 2100
        ) YEAR
      WHERE
          INCREMENT BETWEEN 0 AND DAYS - 1
      ORDER BY
          YEAR
          , INCREMENT) DATE; 
```

在我的本地 MySQL 数据库上，`INSERT`查询只用了几秒钟。希望这可以帮助某人。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-04-12T22:45:24.723

如果你有一个表有足够大的连续 id 集，你可以使用 -

```
INSERT INTO tablename (_date)
SELECT '2011-01-01' + INTERVAL (id - 1) DAY
FROM some_table_with_lots_of_ids
WHERE id BETWEEN 1 AND 365 
```

注意：但请注意，这可能会让您在闰年（有 366 天）期间遇到麻烦

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2016-08-08T01:43:47.913

这可以通过使用简单的 for 循环在 PHP 中实现。有几种方法可以做到这一点。一种方法是将原始日期放在一个变量中，并通过在每个循环上添加 +1 天让循环每天运行，例如，您将从 01/01/2011 开始，然后循环将第一次添加 0，下一次添加 1 天，然后是 2 天，依此类推，以此类推到 $i 变量。然后您可以打印出日期或将它们添加到您的数据库中。在这种情况下，$i 将代表计数器，以 0 为起点，<=365 是您想要通过的循环数等于或小于天数，并且 $i++ 将 +1 添加到 $i 变量在每个循环上。

date('Ymd' 将日期转换为 yyyy-mm-dd。使用大写 Y 为您提供完整的 4 位数年份，而使用小写 y 将为您提供年份的最后 2 位数。您希望将其保留在此为了将它添加到 mySQL 的日期字段中。

strtotime($originalDate 将日期解析为 Unix 时间戳，而 ."+".$i." day") 基本上将 $i 的值（以天为单位）添加到日期。

最后是 mysqli 查询。$db 代表数据库连接变量，这将需要更改为您为连接设置的任何变量。接下来是实际的查询。只需将单词 table 替换为您的表名和 VALUES 之前的日期到您的日期行名称，您就可以开始了。

下面是一个例子：

```
<?php
for($i=0;$i<=365;$i++){ 
$originalDate = "01/01/2011";
$date = date('Y-m-d',strtotime($originalDate . "+".$i." day"));
mysqli_query($db, "INSERT INTO table (date)VALUES('$date')");
} 
```

使用 for 函数实现此目的的另一种方法是将 strtotime 日期直接包含在 for 操作中，作为对计数器变量的反对，这是一段更短的代码。将 $i=0 （起始计数器点）替换为起始日点，然后使用小于或等于结束日点（循环数），然后最后将第一条语句的 +1 放入 a变量准备使用。

最后，将日期转换为 Ymd 格式，准备好放入数据库并运行查询。

同样，与第一个示例一样，可以将其打印或直接放入您的数据库中。

下面是一个例子：

```
<?php
for ($startdate = strtotime("2011-01-01"); $startdate <= strtotime("2011-12-31"); $startdate = strtotime("+1 day", $startdate)) {
$date= date("Y-m-d", $startdate);
mysqli_query($db, "INSERT INTO tracking (date)VALUES('$date')");
} 
```

我可能让它听起来比实际更令人困惑，但希望它至少能让你了解它是如何工作的。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2014-11-19T01:50:59.197

感谢伊万德。我有一个更好的解决方案，它允许您创建指定的日历表。例如，如果我试图创建一个 2014-04 的表，它看起来像这样：

```
SELECT (CURDATE() - INTERVAL c.number DAY) AS DATE
FROM 
(
    SELECT singles + tens + hundreds number FROM 
    ( 
        SELECT 0 singles
        UNION ALL SELECT   1 UNION ALL SELECT   2 UNION ALL SELECT   3
        UNION ALL SELECT   4 UNION ALL SELECT   5 UNION ALL SELECT   6
        UNION ALL SELECT   7 UNION ALL SELECT   8 UNION ALL SELECT   9
    ) singles JOIN 
    (
        SELECT 0 tens
        UNION ALL SELECT  10 UNION ALL SELECT  20 UNION ALL SELECT  30
        UNION ALL SELECT  40 UNION ALL SELECT  50 UNION ALL SELECT  60
        UNION ALL SELECT  70 UNION ALL SELECT  80 UNION ALL SELECT  90
    ) tens  JOIN 
    (
        SELECT 0 hundreds
        UNION ALL SELECT  100 UNION ALL SELECT  200 UNION ALL SELECT  300
        UNION ALL SELECT  400 UNION ALL SELECT  500 UNION ALL SELECT  600
        UNION ALL SELECT  700 UNION ALL SELECT  800 UNION ALL SELECT  900
    ) hundreds
    ORDER BY number DESC
) c  
WHERE c.number BETWEEN 
DAYOFYEAR(NOW()) - DAYOFYEAR('2014-04-01')-  DAY(LAST_DAY('2014-04-01')) +1
AND 
DAYOFYEAR(NOW()) - DAYOFYEAR('2014-04-01') 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-07-19T19:31:37.140

受到 IvanD 的大量加入的启发，我得出了这个结论：

```
SELECT DATE_ADD('2015-10-21', INTERVAL c.number DAY)    AS DATE
FROM 
(
    SELECT singles + tens + hundreds+thousands number FROM 
    ( 
        SELECT 0 singles
        UNION ALL SELECT   1 UNION ALL SELECT   2 UNION ALL SELECT   3
        UNION ALL SELECT   4 UNION ALL SELECT   5 UNION ALL SELECT   6
        UNION ALL SELECT   7 UNION ALL SELECT   8 UNION ALL SELECT   9
    ) singles JOIN 
    (
        SELECT 0 tens
        UNION ALL SELECT  10 UNION ALL SELECT  20 UNION ALL SELECT  30
        UNION ALL SELECT  40 UNION ALL SELECT  50 UNION ALL SELECT  60
        UNION ALL SELECT  70 UNION ALL SELECT  80 UNION ALL SELECT  90
    ) tens  JOIN 
    (
        SELECT 0 hundreds
        UNION ALL SELECT  100 UNION ALL SELECT  200 UNION ALL SELECT  300
        UNION ALL SELECT  400 UNION ALL SELECT  500 UNION ALL SELECT  600
        UNION ALL SELECT  700 UNION ALL SELECT  800 UNION ALL SELECT  900
    ) hundreds
     JOIN 
    (
        SELECT 0 thousands
        UNION ALL SELECT  1000 UNION ALL SELECT  2000 UNION ALL SELECT  3000
        UNION ALL SELECT  4000 UNION ALL SELECT  5000 UNION ALL SELECT  6000
        UNION ALL SELECT  7000 UNION ALL SELECT  8000 UNION ALL SELECT  9000
    ) thousands
    ORDER BY number DESC
) c  
WHERE c.number BETWEEN 
0 
AND
DATEDIFF('2016-10-08', '2015-10-21') 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-06-20T18:16:56.377

```
INSERT INTO my_dates (\`_date\`) SELECT DATE_ADD('2011-01-01', INTERVAL @_tmp:=@_tmp+1 day) \`_date\`
FROM (SELECT @_tmp:=-1 d UNION SELECT 1 UNION SELECT 2 
      UNION SELECT 3 UNION SELECT 4 UNION SELECT 5 UNION SELECT 6
      UNION SELECT 7 UNION SELECT 8  UNION SELECT 9) a /\*10^1\*/
JOIN (SELECT 0 UNION SELECT 1 UNION SELECT 2 
      UNION SELECT 3 UNION SELECT 4 UNION SELECT 5 UNION SELECT 6
      UNION SELECT 7  UNION SELECT 8  UNION SELECT 9) b /\*10^2\*/
JOIN (SELECT 0 UNION SELECT 1 UNION SELECT 2
      UNION SELECT 3 UNION SELECT 4 UNION SELECT 5 UNION SELECT 6
      UNION SELECT 7  UNION SELECT 8  UNION SELECT 9) c /\*10^3\*/
WHERE @_tmp+1 BETWEEN 0 AND DATEDIFF('2011-12-31', '2011-01-01'); 
```

# python - l.append[i]，对象不可下标？

> ID：10132027
> 
> 赞同：8
> 
> 时间：2012-04-12T21:20:33.047
> 
> 标签：python, list, for-loop, append

当我做：

```
l = []
for i in range(10):
    if i%3 == 0 or i%5 == 0:
        l.append[i]
print sum(l) 
```

我明白了

```
Traceback (most recent call last):
  File "PE1.py", line 4, in <module>
    l.append[i]
TypeError: 'builtin_function_or_method' object is not subscriptable 
```

真的没有办法附加所有通过条件的 i 吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-04-12T21:22:26.827

`append`是一个方法，你使用函数调用语法。

```
l.append(i) 
```

此外，在这种情况下，更优雅的方法是使用列表推导：

```
l = [i for i in range(10) if i % 3 == 0 or i % 5 == 0] 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-12T21:22:31.037

`l.append[i]`

错误的括号。你应该使用：

`l.append(i)`

# groovy - IntelliJ IDEA 中的 .story 文件没有语法高亮显示

> ID：10132029
> 
> 赞同：2
> 
> 时间：2012-04-12T21:20:55.747
> 
> 标签：groovy, intellij-idea, syntax-highlighting, easyb

我在语法突出显示不起作用的一个 IDE 实例上使用带有 easyb-X 插件的 IntelliJ 10.5.4 和 Groovy 1.8.6。我最初让它在一个不同的系统上工作，其中语法突出显示正在工作。当我禁用easyb 插件时，语法突出显示工作（即它使用我认为应该的Groovy 语言突出显示）。为什么easyb插件会覆盖（从而禁用）语法突出显示？我希望能够在 IDE 中运行 easyb 故事*并*突出显示语法......不是一个或另一个。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T10:50:11.893

在文件 | 检查您的文件类型关联 设置 | 文件类型 -> Groovy 文件

# c - 地址 0x0 没有被堆栈、malloc 或（最近）释放

> ID：10132031
> 
> 赞同：6
> 
> 时间：2012-04-12T21:21:03.770
> 
> 标签：c, valgrind

我对 C 很陌生，似乎无法弄清楚以下代码有什么问题。

```
int main() {
    char filen[] = "file.txt";
    FILE *file = fopen ( filen, "r" );
    if ( file != NULL )
    {
        char line [ 128 ];
        while ( fgets ( line, sizeof line, file ) != NULL ) /* read a line */
        {
            int i;
            char *result;
            for(i=0; i< NUM;i++)
            {
                char *rep;
                rep = (char *) malloc (sizeof(mychars[i][0]));
                strcpy(rep, mychars[i][0]);
                char *with;
                with = (char *) malloc (sizeof(mychars[i][1]));
                strcpy(with, cgichars[i][1]);
                result = (char *) malloc (sizeof(char) * 128);
                result = str_replace(line, rep, with);
            }

            fputs(result, stdout);
        }
    }
    fclose ( file );

    return 0;
} 
```

Valgrind 给了我这个错误：

```
==4266== Invalid read of size 1
==4266==    at 0x4C286D2: __GI_strlen (mc_replace_strmem.c:284)
==4266==    by 0x5118A8D: fputs (iofputs.c:37)
==4266==    by 0x400A0F: main (repl.c:35)
==4266==  Address 0x0 is not stack'd, malloc'd or (recently) free'd 
```

repl.c 对应于代码末尾以 fputs 开头的行。

此外，mychars 是一个二维数组，如下所示：

```
char *mychars[NUM][2] = {
  "a", "97",
  "b", "98",
  .... 
```

有人可以告诉我如何解决这个问题吗？此外，任何关于我应该如何改进我当前代码（尤其是使用 malloc）的指针都将不胜感激。

**编辑：** str_replace 的代码

```
char *str_replace(char *str, char *orig, char *rep) {
  char buffer[4096];
  char *p;

  if(!(p = strstr(str, orig)))
    return NULL;

  strncpy(buffer, str, p-str);
  buffer[p-str] = '\0';
  sprintf(buffer+(p-str), "%s%s", rep, p+strlen(orig));

  return buffer;

} 
```

**编辑 2** str_replace 和 main 的新代码

出于测试目的，我将 str_replace 方法替换为此处的方法：

[在C中替换字符串的功能是什么？](https://stackoverflow.com/questions/779875/what-is-the-function-to-replace-string-in-c)

我的主要内容略有变化：

```
int main() {
    static const char filen[] = "file.txt";
    FILE *file = fopen ( filen, "r" );
    if ( file != NULL )
    {
        char line [ 128 ];
        while ( fgets ( line, sizeof line, file ) != NULL ) /* read a line */
        {
            int i;
            char *result;
            for(i=0; i< NUM;i++)
            {
                char *rep;
                rep = (char *) malloc (sizeof(mychars[i][0]));
                strcpy(rep, mychars[i][0]);
                char *with;
                with = (char *) malloc (sizeof(mychars[i][1]));
                strcpy(with, mychars[i][1]);
                result = str_replace(line, rep, with);
            }

            fputs(result, stdout);
        }
    }
    fclose ( file );

    return 0;
} 
```

但我仍然得到

```
==6730== Invalid read of size 1
==6730==    at 0x4C286D2: __GI_strlen (mc_replace_strmem.c:284)
==6730==    by 0x5118A8D: fputs (iofputs.c:37)
==6730==    by 0x400995: main (repl.c:29)
==6730==  Address 0x0 is not stack'd, malloc'd or (recently) free'd 
```

也许最令人沮丧的部分是不知道*这些*无效读取错误是什么。

**编辑 3** 我已经更新了 for 循环中心的代码，如下所示：

```
 int i;
        char* result;
        result = &line[0];
        for(i=0; i< NUM_CGICHARS;i++)
        {
            char *rep;
            rep = (char *) malloc (sizeof(char));
            strcpy(rep, cgichars[i][1]);
            char *with;
            with = (char *) malloc (sizeof(char)*3);
            strcpy(with, cgichars[i][0]);
            result = str_replace(result, rep, with);
            fputs(result, stdout);
            free(rep);
            free(with);
        } 
```

现在我开始得到输出了！然而，仅在两次迭代之后，我得到了一个分段错误，而 valgrind 给了我一大堆这个：

```
==9130== Invalid read of size 1
==9130==    at 0x4C286D2: __GI_strlen (mc_replace_strmem.c:284)
==9130==    by 0x5118A8D: fputs (iofputs.c:37)
==9130==    by 0x4009DF: main (teststep1.c:27)
==9130==  Address 0x0 is not stack'd, malloc'd or (recently) free'd 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-12T21:27:20.700

在这两行

```
 result = (char *) malloc (sizeof(char) * 128);
            result = str_replace(line, rep, with); 
```

您首先为其分配空间`result`，然后通过返回`str_replace`. 该函数可能会返回`0`，所以你`fputs`失败了。

顺便说一句，不要强制返回`malloc`，在 C 中这是多余的，可能会隐藏您忘记包含原型的事实。

**编辑：**您的`str_replace`函数在内存处理方面完全错误。永远不要返回指向局部变量的指针，离开函数后该空间无效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T21:24:17.183

如果`NUM`为 0，则`result`未初始化并且可能是`0`偶然的。

您没有检查对 的调用结果`malloc()`，因此失败可能意味着您正在尝试写入`NULL`指针。

在哪里`mychars`声明？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T21:30:59.817

您没有显示如何`mychars`声明，但是这一行：

```
rep = (char *) malloc (sizeof(mychars[i][0])) 
```

看起来它可能只分配一个字节。此外，您分配了大量内存并且从不释放它。和这里：

```
result = (char *) malloc (sizeof(char) * 128);
result = str_replace(line, rep, with); 
```

您使用分配内存`malloc`，然后通过在其顶部分配另一个函数的返回值来完全丢弃指向该内存的指针。

# apache - mod_rewrite 不适用于目录名称

> ID：10132033
> 
> 赞同：0
> 
> 时间：2012-04-12T21:21:05.780
> 
> 标签：apache, mod-rewrite

我正在使用 mod_rewrite 以以下形式将标识符传递给我的网络应用程序：

```
http://clipi.ca/1W 
```

我用一个简单的正则表达式来识别这些：

```
RewriteCond %{REQUEST_URI} ^/([0-9a-zA-Z]+)$
RewriteRule ^(.*)$ /index.php?urlid=%1 [L,QSA] 
```

...在大多数情况下都可以正常工作。但是我注意到，当标识符是目录的名称时，重写失败并且 Apache 正在返回目录索引！

如何停止这种行为并将重写规则也应用于目录？（请注意，只要引用目录中的实际文件，重写条件就会失败，这不是问题。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T22:05:35.350

我想我自己可能已经弄清楚了：显然，Apache 在应用任何重写规则*之前*，会在映射到文件系统上的目录的请求上附加一个斜杠。这有点傻，imo，但是通过在我的条件正则表达式中添加一个可选的斜杠：

```
RewriteCond %{REQUEST_URI} ^/([0-9a-zA-Z]+)/?$ 
```

......它似乎工作！

不过，理想的解决方案是让 Apache 开始时*不*附加该斜杠。如果有人知道如何做到这一点，请在此处发布，我会给您答案。

# coffeescript - CoffeeScript 实例变量

> ID：10132035
> 
> 赞同：11
> 
> 时间：2012-04-12T21:21:16.553
> 
> 标签：coffeescript, instance-variables

我正在学习 CoffeeScript，但我有点头疼，我还没有完全弄清楚。如果我创建一个对象来做某些事情，我偶尔需要一个实例变量来让该对象在方法之间共享。例如，我想这样做：

```
testObject = 

  var message # <- Doesn't work in CoffeeScript.

  methodOne: ->
    message = "Foo!"

  methodTwo: ->
    alert message 
```

但是，您不能`var`在 CoffeeScript 中使用，并且如果没有该声明，`message`则只能在`methodOne`. 那么，如何在 CoffeeScript 的对象中创建实例变量呢？

* * *

**更新：**修复了我的示例中的错字，因此这些方法实际上是方法:)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-12T21:31:49.747

你不能这样。引用[语言参考](http://coffeescript.org/#lexical_scope)：

> 因为您无法直接访问 var 关键字，所以不可能故意隐藏外部变量，您只能引用它。因此，如果您正在编写一个深度嵌套的函数，请注意不要意外重用外部变量的名称。

但是，您尝试做的事情在 JS 中也不可能，它相当于

```
testObject = {
    var message;
    methodOne: message = "Foo!",
    methodTwo: alert(message)
} 
```

这不是有效的 JS，因为您不能在这样的对象中声明变量；您需要使用函数来定义方法。例如在 CoffeeScript 中：

```
testObject =
    message: ''
    methodOne: ->
        this.message = "Foo!"
    methodTwo: ->
        alert message 
```

您也可以`@`用作“this.”的快捷方式，即`@message`代替`this.message`.

或者考虑使用 CoffeeScript 的[类语法](http://coffeescript.org/#classes)：

```
class testObject
    constructor: ->
        @message = ''

    methodOne: ->
        @message = "Foo!"

    methodTwo: ->
        alert @message 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-13T00:09:57.717

只是为了添加@Lauren的答案，您想要的基本上是[模块模式](http://addyosmani.com/resources/essentialjsdesignpatterns/book/#modulepatternjavascript)：

```
testObject = do ->

  message = null

  methodOne = ->
    message = "Foo!"

  methodTwo = ->
    alert message

  return {
    methodOne
    methodTwo
  } 
```

`message`仅对这些方法可用的“私有”变量在哪里。

根据上下文，您还可以在对象之前声明消息，以便它对两种方法都可用（如果在此上下文中执行）：

```
message = null

testObject = 
  methodOne: -> message = "Foo!"
  methodTwo: -> alert message 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T21:29:30.617

您可以使用以下方式定义属性：

```
message: null 
```

~~但是，您当前没有定义方法——您需`->`要这样做。~~

然后，要在方法中引用实例属性，请在属性名称前加上`@`.

```
testObject = 

  message: null

  methodOne: ->
    @message = "Foo!"

  methodTwo: ->
    alert @message 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T21:32:44.163

用来`@`指向`this`

```
testObject = 

  methodOne: ->
    @message = "Foo!"

  methodTwo: ->
    alert @message 
```

[coffeescript.org 上的固定版本](http://coffeescript.org/#try%3atestObject%20%3D%20%0A%0A%20%20methodOne%3A%20-%3E%0A%20%20%20%20%40message%20%3D%20%22Foo!%22%0A%0A%20%20methodTwo%3A%20-%3E%0A%20%20%20%20alert%20%40message)

# ruby-on-rails - 部署 JRuby on Rails 应用程序

> ID：10132040
> 
> 赞同：1
> 
> 时间：2012-04-12T21:21:37.437
> 
> 标签：ruby-on-rails, tomcat, jetty, jruby

我第一次使用 JRuby on Rails 应用程序。我想知道 JRuby on Rails 应用程序的实际部署堆栈是什么。到目前为止，我看到以下内容：

1.  码头
2.  雄猫

请分享为什么您会认为其中一个胜过另一个。感谢您的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T13:38:23.663

没有事实上的 deploymanet 堆栈，您可以选择您喜欢的或您认为更好的。我个人使用 warbler 将我的 rails 应用程序打包为 war 并将其部署在 JBoss 上。

如果您需要更集成的东西，可以使用 Torquebox [http://torquebox.org](http://torquebox.org)，它可以让您使用消息传递、集群等……试试吧，因为它真的很强大！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T01:26:34.820

真正的问题是哪个容器在您的基础设施或您的服务提供商中具有更好的支持。

在我的公司，JBoss 5.2 是部署任何 Web 应用程序的唯一方法。这就是我们首先选择 JRuby 而不是 MRI 的原因。

# c# - 从 c# 将数组发布到 php

> ID：10132041
> 
> 赞同：2
> 
> 时间：2012-04-12T21:21:45.737
> 
> 标签：c#, php, arrays, webrequest

我目前正在处理 ac#/php 项目，我需要从 c# 中的数据库中检索一些数据并将数据发送到数组并将数组发送到 php。

当我在数据库中循环时，我将字符串值添加到字符串列表数组中，一旦完成，我就会调用：

```
string[] myData = myList.toArray(); 
```

然后我尝试使用以下代码将 myData 发布到 php

```
Dictionary<string, string> report = new Dictionary<string, string>();
report.add("data", myData.toString());
    WebRequest request = WebRequest.Create(domain + appRoot + "/administrator/engine/email-alarms.php");
                    request.Method = "POST";
                    StringBuilder b = new StringBuilder();
                    foreach (KeyValuePair<string, string> data in report)
                    {
                        b.Append(HttpUtility.UrlEncode(data.Key)).Append("=").Append(HttpUtility.UrlEncode(data.Value ?? "")).Append("&");
                    }
                    string postData = b.ToString(0, b.Length - 1);
                    byte[] byteArray = Encoding.UTF8.GetBytes(postData);
                    request.ContentType = "application/x-www-form-urlencoded";
                    request.ContentLength = byteArray.Length;

                    Stream dataStream = request.GetRequestStream();
                    dataStream.Write(byteArray, 0, byteArray.Length);
                    dataStream.Close();

                    WebResponse response = request.GetResponse();
    Console.writeLine(response); 
```

我意识到说 myData.toString() 不是正确的做法，因为它只是打印 System.String[] 但如果我不这样做，那么我会在 c# 代码中收到一个错误，指出存在无效参数。

如何将数组发布到 php？

感谢您的任何帮助，您可以提供。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T21:26:45.833

您始终可以将该`json`格式用作您的交换合同格式，并将其转换回其原生表示并相应地处理您的数据。c# 和 php 都有支持 json 格式的函数/库。

C# 序列化使用：

```
var postData=new JavascriptSerializer().Serialize(object); 
```

在 PHP 中，您可以使用该`json_decode()`方法。我不确定它在 php 中是如何工作的。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T21:31:19.300

**更新**：更改为甚至不需要`List<string>`. 您可以迭代原始数组。添加了 PHP 代码。

如果您希望`$_POST["data"]`在 PHP 脚本中是字符串数组，则**无需**序列化为 JSON 或其他格式。PHP 可以接受发布的数组就好了。你只需要以正确的方式去做。

改变这个：

```
Dictionary<string, string> report = new Dictionary<string, string>();
report.add("data", myData.toString());
// ...
foreach (KeyValuePair<string, string> data in report)
{
    b.Append(HttpUtility.UrlEncode(data.Key)).Append("=").Append(HttpUtility.UrlEncode(data.Value ?? "")).Append("&");
} 
```

为此（您不再需要，`List<string>`因为您可以直接遍历您的数组并创建一个可发布的数组：

```
foreach (string data in myData)
{
    b.Append(HttpUtility.UrlEncode("data[]")).Append("=").Append(HttpUtility.UrlEncode(data ?? "")).Append("&");
} 
```

这将导致`data`您的 POST 中的密钥来自：

```
string[] myData = new [] { "blah", "something", "else" }; 
```

发布如下：

```
data[]=blah&data[]=something&data[]=else 
```

这将导致在 PHP 端成功创建数组（我希望如此）。

在 PHP 中，您应该可以这样做：

```
foreach ($_POST["data"] as $value)
{
    echo $value;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T21:27:00.993

可能您最好的选择是将其编码为 JSON 使用[`JavaScriptSerializer`](http://msdn.microsoft.com/en-us/library/system.web.script.serialization.javascriptserializer.aspx)，然后您可以使用 PHP 对其进行解码[`json_decode()`](http://php.net/manual/en/function.json-decode.php)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-12T21:29:01.550

如果您只想序列化`string[]`（不清楚，但我认为您想要的是，这是这里的真正问题），那么...

```
string.Join(",", myData) 
```

应该输出例如`1, 2, 3...`

# c# - 我需要做什么才能从 C# 应用程序中引用 c++ dll？

> ID：10132043
> 
> 赞同：0
> 
> 时间：2012-04-12T21:22:01.613
> 
> 标签：c#, c++

C++ dll 使用 Win32 从串行端口读取数据并将数据写入串行端口。我需要在我的 C# 应用程序中使用该数据。它只是像我用 C# 编写的任何其他 dll 那样引用 dll 的一种情况，导入它然后调用其中的方法吗？还是我需要做一些不同的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T21:23:28.730

如果此 DLL 不是 COM 库，则需要使用[PInvoke](http://msdn.microsoft.com/en-us/library/aa288468%28v=VS.71%29.aspx)

基本上，DLL 导出的每个函数都需要使用所需的语法进行定义。这是从 wininet.dll 访问函数 InternetGetConnectedState 所需的声明示例

```
[DllImport("wininet.dll")]
private extern static bool InternetGetConnectedState( out int Description, int ReservedValue ) ; 
```

在声明之后，您可以通过这种方式从您的 C# 代码中调用该函数

```
public static bool IsConnectedToInternet( )
{
    try
    {
        int Desc;
        return InternetGetConnectedState(out Desc, 0);
    }
    catch 
    {
        return false;
    }
} 
```

当然，您的 DLL 应该从您的应用程序中可见（相同的文件夹或路径）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T21:24:27.250

您正在寻找的搜索词是 PInvoke。

本质上，您需要在 C# 类中声明引用外部 C++ 实现的方法。

像这样的东西（来自[MSDN 示例](http://msdn.microsoft.com/en-us/library/aa288468%28v=VS.71%29.aspx)）：

```
class PlatformInvokeTest
{
    [DllImport("msvcrt.dll")]
    public static extern int puts(string c);
    [DllImport("msvcrt.dll")]
    internal static extern int _flushall();

    public static void Main() 
    {
        puts("Test");
        _flushall();
    }
} 
```

# windows-ce - Windows CE 6 设备无法连接到 PC

> ID：10132046
> 
> 赞同：0
> 
> 时间：2012-04-12T21:22:12.643
> 
> 标签：windows-ce, activesync

所以，我有一个 EPC 7" 上网本的东西（智能本），它只是不想连接。

我在 Win XP SP3 PC 上运行 Active Sync 4.5，它只是说连接不可用。我试过 2 根 USB 电缆，但仍然没有。

我需要在我的设备上运行一些东西来开始连接吗？

设备：Windows Embedded CE v6.0

电脑：Windows XP Home Service Pack 3

连接：USB 电缆

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T21:47:49.377

我不熟悉这个特定的设备。您是否有说明 ActiveSync 应该使用它的用户手册？请理解，Windows CE 是一个组件化的操作系统，没有任何内容表明 OEM 必须包含操作系统目录的任何特定部分。ActiveSync 很可能不是操作系统的一部分。

`repllog.exe`如果它确实存在于操作系统中，则在 \Windows 文件夹中将有一个名为的文件。您可以尝试在连接后手动运行它

# apache-flex - 保存在选项卡上的行项目不继续下一个可编辑项目 Flex Datagrid

> ID：10132047
> 
> 赞同：0
> 
> 时间：2012-04-12T21:22:16.953
> 
> 标签：apache-flex, datagrid, focus, row

我正在使用 Flex 数据网格，其中只有 1 个 rowItem 是可编辑的。所有其他行项目都是不可编辑的。当我编辑行的值并按 ENTER 或 TAB 时，焦点将发送到数据网格中的下一个可编辑项。在这种情况下，下一个数据网格行上的可编辑字段。

我不希望这种标准行为......我不希望将焦点处理到下一个可编辑项目。由于数据是即时保存的，因此将焦点放在下一个字段上是很奇怪的。焦点必须保持在已编辑的项目上。

我不太确定如何完成这项工作！任何帮助将非常感激！提前感谢您为我指明正确的方向！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T14:52:44.617

我找到了解决此问题的快速解决方案。通过手动设置数据网格的editedItemPosition 属性，焦点不会改变到数据网格中的下一个可编辑单元格项，而是我们手动提供的索引。

向 datagrid 标签添加一个函数：

```
itemEditValueCommit="itemEditValueCommitHandler(event)" 
```

在 ItemEditValueCommit 函数中，您可以手动设置editedItemPosition：

```
[datagrid].editedItemPosition = {rowIndex: event.cell.rowInfo.rowPositionInfo.rowIndex, columnIndex: 0}; 
```

rowIndex 是我们刚刚编辑的数据网格线。
columnIndex 可以是数据网格的任何 ColumnIndex！

# maven - 执行 maven-easyb-plugin 作为集成阶段的一部分，而不是在测试阶段

> ID：10132056
> 
> 赞同：0
> 
> 时间：2012-04-12T21:22:49.030
> 
> 标签：maven, maven-2, bdd, easyb

是否可以在集成阶段而不是测试阶段执行 maven-easyb-plugin？一旦项目部署到网络服务器，我想运行 easyb 测试。

```
 <plugin>
                    <groupId>org.easyb</groupId>
                    <artifactId>maven-easyb-plugin</artifactId>
                    <version>1.4</version>
                    <executions>
                        <execution>
                            <goals>
                                <goal>test</goal>
                            </goals>
                        </execution>
                    </executions>
                    <configuration>
                        <storyType>html</storyType>
                        <storyReport>target/easyb/easyb.html</storyReport>
                        <easybTestDirectory>src/test/stories</easybTestDirectory>
                        <jvmArguments>-Xmx512m -Dwebdriver.driver=firefox</jvmArguments>
                    </configuration>
                </plugin> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T21:29:58.400

在您的具体情况下，它将是：

```
<execution>
    <phase>integration-test</phase>
    <goals>
        <goal>test</goal>
    </goals>
</execution> 
```

在你的插件配置中。

# google-chrome - 麻烦自托管 Chrome 应用程序

> ID：10132060
> 
> 赞同：1
> 
> 时间：2012-04-12T21:22:58.190
> 
> 标签：google-chrome, host

我为我的博客构建了一个 Google Chrome Web 应用程序，并希望将其托管在 000webhost 上。我有一个指向 .crx 文件的直接链接，当用户单击它时，它会下载该文件并尝试安装，但是他们收到此错误：“必须使用内容类型应用程序/x-chrome-extension 提供应用程序”。现在经过大量研究，我仍然不确定如何解决这个问题，我尝试将元标记添加到带有链接的页面的头部部分，然后我尝试在带有链接的页面上使用 PHP 标题

```
header('Content-Type: application/x-chrome-extension'); 
```

然而这也不起作用，然后我尝试将这行代码添加到我的 .htaccess 代码的顶部：

```
AddType application/x-chrome-extension crx 
```

你猜对了，它没有用。我真的很感谢一些帮助，我还不想支付 5 美元，我想看看人们是否认为值得打扰该应用程序，但只有当我的用户可以下载该应用程序时我才能这样做！

PS，我每次都收到相同的错误消息。

# safari - SVG 在 Safari 中完全没有响应

> ID：10132061
> 
> 赞同：1
> 
> 时间：2012-04-12T21:23:00.343
> 
> 标签：safari, svg

[（这个问题是Safari Scrollbars & SVG](https://stackoverflow.com/questions/10028878/safari-scrollbars-svg)的后续问题- 建议的解决方法是使用 javascript，但 Safari 甚至没有响应 javascript。甚至是直接的 css。）

我无法从 Safari 获得全尺寸的 svg。它根本拒绝放大。我希望 min-width 遵循 jquery 窗口宽度，但它忽略了 javascript（其他浏览器似乎很好），然后即使我直接更改 css，它甚至忽略“宽度：700px;”

**SVG 文件**

```
 viewBox="0 0 800 800" 
```

（未指定高度或宽度）

**HTML**

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"> 

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

 <style type="text/css">
   .objectwrapper{
    max-width: 80%;
    margin-right:auto;
    margin-left:auto;
  }
 .objectdiv{
    max-width: 100%;
    margin-right:auto;
    margin-left:auto;
    display:block;
  }
 .svg{
    width:100%;
    display:block;
  }
 </style>
 <script type="text/javascript"      
  src="https://ajax.googleapis.com/ajax/libs/jquery/1.7/jquery.min.js"></script>
 <script  type="text/javascript">

  var sixtypercentInnerWidth = .6*$(window).width();

  $("document").ready(function(){
      $(".objectwrapper").css("max-width",sixtypercentInnerWidth);
  });
  </script>
</head>
<body>
 <div class="objectwrapper">
 <div class="objectdiv">
         Object4
        <object class="svg" type="image/svg+xml"       data="question0optimize1.svg" >      
         </object>   

 </div>
 </div>

 </body>
 </html> 
```

编辑

我刚刚发现编辑 .svg 得到了一些回应......

```
 $("document").ready(function(){
        $(".svg").css("width",sixtypercentInnerWidth);
        $(".svg").css("height",sixtypercentInnerWidth);
    }); 
```

我需要添加高度和宽度..所以看起来 SAFARI 不能做 svg %'s???????

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T02:12:32.947

Safari 绝对有能力使用 CSS 调整 SVG 元素的大小。我每天都这样做:)

你的原因

```
.svg{
width:100%;
display:block; 
```

}

不适用是因为您的 objectwrapper 和 objectdiv 元素在 CSS 中没有明确的宽度。最大宽度是不够的。给这些父元素一个明确的 100% 宽度，这应该可以解决问题。不需要在这个上用 JS 绕弯子。

相关的几点：

a) Jquery 选择器和函数通常不能很好地与 SVG 一起使用。我在路径属性上使用了 jquery animate 方法，仅此而已。其他一切都失败了。你需要编写 vanilla js 来使用 SVG 做很多事情。

b) 在 Chrome 中对 SVG 进行故障排除要容易得多。开发工具仍然有一些奇怪的 SVG 错误正在解决，但通常如果它在 Chrome 中工作，它在 Safari 中也能工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T15:07:44.960

在我看来，safari 完全有能力在 os x、windows 或 ios 上执行 svg。我不使用，但我发现 JQuery 有时对 svg 不直观。在[动画方面](http://www.iscriptdesign.com/animation)，我什至会做一些 javascript 支持的动画，可以在除 MS IE 之外的所有浏览器中使用。

# java - Java Regex：将字符串与多组括号匹配

> ID：10132063
> 
> 赞同：2
> 
> 时间：2012-04-12T21:23:03.490
> 
> 标签：java, regex

我试图弄清楚如何编写一个匹配包含任意数量的非括号字符的 4 组括号的正则表达式。

例如，这些应该匹配。

```
[hello][world][foo][bar]
[][][][] 
```

这些不应该：

```
[a][b][c]
[a][b][c][d]e
[[a]][b][c][d] 
```

如果我没记错的话，这（下）似乎与一组括号和其中的字符匹配。

```
\\[[^\\[\\]]*\\] 
```

我认为我可以通过执行以下操作将其扩展到 4 套，但它不起作用。

```
[\\[[^\\[\\]]*\\]]{4} 
```

我在这里想念什么？提前感谢您的帮助。我很感激。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-12T21:26:40.750

尝试这个：

```
Pattern p = Pattern.compile("^(\\[[^\\[\\]]*\\]){4}$"); 
```

为您分解：

```
"^(\\[[^\\[\\]]*\\]){4}$"
 ││├─┘├───────┘│├─┘ │  └─ the end of the line.
 │││  │        ││   └─ repeat the capturing group four times.
 │││  │        │└─ a literal "]"
 │││  │        └─ the previous character class zero or more times.
 │││  └─ a character class containing anything but the literals "[" and "]"
 ││└─ a literal "[".
 │└─ start a capturing group.
 └─ the beginning of the string. 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-12T21:26:32.910

您需要对要重复的块进行分组，否则它将仅匹配最后重复`]`4 次的内容：

```
(\\[[^\\[\\]]*\\]){4} 
```

正如詹姆斯在下面指出的那样，看起来您正在尝试`[]`用于分组，而不是`()`. 这很可能是您的错误出现的地方。

# iphone - 直接使用 UIViewControllers.view 或 UIView 的内存成本

> ID：10132066
> 
> 赞同：0
> 
> 时间：2012-04-12T21:23:08.377
> 
> 标签：iphone, objective-c, ios, ipad

大家好，对不起，我的英语不好。

我有下一个问题：添加视图哪个更好（我的问题是关于内存成本和更好的编程方法）

像这样：

```
UIViewController *vcToAdd = [[UIViewController alloc]
                             initWithNibName:@"vcxib"
                             bundle:[NSBundle mainBundle]];

[self.view addSubview:vcToAdd.view]; 
```

或者像这样：

```
NSArray *xibsArray = [[NSBundle mainBundle]
                      loadNibNamed:@"MMList_iPhone" owner:nil options:nil];

UIView *vwToAdd = [xibsArray objectAtIndex:0];
[self.view addSubview:vwToAdd]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T22:30:01.833

在第一种情况下，您拥有自己创建的 UIViewController，这意味着您有责任释放它。如果您不释放它，则可能会在某个地方泄漏。

```
UIViewController *vcToAdd = [[UIViewController alloc] initWithNibName:@"vcxib" bundle:[NSBundle mainBundle]];
[self.view addSubview:vcToAdd.view];
[vcToAdd release]; 
```

在第二种情况下，您不拥有 Nib 文件的内容。所以你不负责管理内存。无论如何，在这里您将获取 Nib 文件的内容并“按原样”呈现它。没有控制其行为的 UIViewController。

如果您的 Nib 文件中包含的视图需要一些复杂的管理，例如动画或触摸，UIViewController 方式可能是您正在寻找的......

[在此处](https://developer.apple.com/library/mac/#documentation/CoreFoundation/Conceptual/CFMemoryMgmt/CFMemoryMgmt.html)和[此处](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/MemoryMgmt/Articles/MemoryMgmt.html)查看 Apple 的内存管理指南（英文）。

编辑：还有第三种方法......以编程方式创建视图而不使用 Nib 文件。

```
// Create your content view
UIView *view = [[UIView alloc] initWithFrame:CGRectMake(0.0f, 0.0f, 320.0f, 480.0f)];
// Add objects to it
UIButton *button = [UIButton ...
UILabel *label = [UILabel ...
[view addSubview:button];
[view addSubview:label];
...
// Put your content view on screen
[self.view addSubview:view];
// Free memory
[view release]; 
```

# javascript - 带有 jQ uery 模板的 Knockout.js，选择框宽度在更新时变为 0 宽度

> ID：10132070
> 
> 赞同：1
> 
> 时间：2012-04-12T21:23:31.103
> 
> 标签：javascript, jquery, html, knockout.js

我在这里的 jsfiddle 中有问题：http: [//jsfiddle.net/XRdTD/](http://jsfiddle.net/XRdTD/)

如果您为选择框选择了一些东西，然后单击`And`（它消失了，但它仍然存在），选择框会缩小到一个小尺寸。如果我发送选择框具有特定宽度，它只显示单词的第一个字母。

这发生在目标浏览器 IE9 上。

当我单击时，我该怎么做才能不使选择框缩小`And`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T14:41:16.160

以防万一有人发现它有用 - 当使用敲除 + jquery 模板 + 选项绑定 + 值绑定时 - 选择在 IE9 中以某种方式损坏。

解决方法是将选择选项与 jquery 模板绑定，并选择值 - 使用敲除[http://jsfiddle.net/XRdTD/2/](http://jsfiddle.net/XRdTD/2/)或尽可能使用硬编码的选择值 - [http://jsfiddle.net/XRdTD/3/](http://jsfiddle.net/XRdTD/3/)

# social-networking - 社区引擎诉社交流？

> ID：10132072
> 
> 赞同：1
> 
> 时间：2012-04-12T21:23:41.187
> 
> 标签：social-networking, communityengine, social-stream

新手在这里学习轨道......社区引擎与社交流的任何建议/比较？我会写一个约会网站，所以特别是如果有任何一方适合这种发展，我会很感激你的建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T12:59:53.637

我过去曾尝试过 CommunityEngine。目前要将其与 rails3 一起使用，您必须使用主要由社区更新的特定分支以使其稳定。我不确定那个 rails3 分支是否已经准备好生产。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T17:43:03.907

我不知道社区引擎，但一直在关注社交流，它看起来非常好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-10T00:13:49.623

我们通过公开 api 端点将社交流升级为移动平台——这花了几个月的时间。我们为每个调用构建了单独的控制器，而不是修改核心类。该平台现在足够灵活，可以满足任何用例，我们可以连接到主干上的更新。这是一个经过深思熟虑的架构，并且已经进行了多次重构。（我认为 webviews / javascript 有点乱）

我建议你看看这个——我的技术主管花了几个星期才适应这个。 [https://github.com/ging/social_stream/wiki/Social-Stream-Base-database-schema](https://github.com/ging/social_stream/wiki/Social-Stream-Base-database-schema)

WRT communityengine - 我在 4 年前放弃了这个。 [https://github.com/jdp-global/communityengine/commit/31f9b267706157a63bfc103a290bd6e3d874066a](https://github.com/jdp-global/communityengine/commit/31f9b267706157a63bfc103a290bd6e3d874066a)

您选择的任何平台都需要关注 API/Web 服务。

# php - 在 MySQL 中查询非转义字符串

> ID：10132079
> 
> 赞同：1
> 
> 时间：2012-04-12T21:24:26.383
> 
> 标签：php, mysql, select, escaping

该表具有***未***转义的公司名称。
我的qry看起来像

```
$sql = "SELECT id FROM contact_supplier WHERE name = '$addy' LIMIT 1"; 
```

问题在于表中的公司名称值有时类似于“ *Acme Int'l S/L* ”。
（仅供参考：$addy 的值与数据库匹配）
显然，这些值在存储时没有被转义。

如何找到我的匹配项？

**[编辑]**
啊哈！
我想我正在做某事。$addy 值的来源是一个文件

```
$addresses = file('files/addresses.csv'); 
```

然后我做一个

```
foreach ($addresses as $addy) {} 
```

好吧，当我转义 $addy 字符串时，它会转义新行字符并在比较字符串的末尾包含“ *\r\n ”。*
除非有人提出更优雅的方式，否则我想我会用 str_replace() 删除那些。

:)
**[\编辑]**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T00:02:40.960

问题原来是换行符 $addy 值的来源是这样开始的

```
$addresses = file('files/addresses.csv'); 
```

然后我通过

```
foreach ($addresses as $addy) {} 
```

当我转义 $addy 字符串时，它会转义新行字符并在比较字符串的末尾插入“ *\r\n* ”。
一旦我在转义后用 string_replace() 删除了这些字符，一切都顺利进行

谢谢你的帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T21:26:45.927

使用`mysql_real_escape_string`：

```
$addy = mysql_real_escape_string($addy); 
```

或者尝试使用参数化查询 (PDO)。

* * *

关于此声明：

> 显然，这些值在存储时没有被转义。

这是不正确的逻辑。如果原始 INSERT 语句中的值未转义，则该语句将失败。如果不转义，您将收到类似`syntax error near "l S/L' LIMIT 1"`. 数据正确存储在数据库中的事实证明，无论谁插入它，都能够正确地完成它（通过转义或使用参数化查询）。

如果您的操作正确，则数据不应*以*转义形式存储在数据库中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T21:27:16.510

为什么您认为应该转义已经存储在表中的数据？

您应该仅在将数据直接写入基于文本的语言之前对其进行转义，例如，作为 SQL 查询的一部分，或写入 HTML 页面，或写入 JavaScript 代码块。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T21:27:42.050

执行查询时，没有任何空格。MySQL对其进行转换并插入，否则它不会插入并由于语法​​而出错，或者我们为了安全而将它们转义，例如sql注入。

因此，带有转义值的查询将与数据库中的数据一起正常工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-12T21:28:01.067

如果这些值在存储时没有转义，那么当您尝试输入它们时它们会导致 SQL 错误。

问题是当您进行查询时数据没有被转义。

快速破解：使用[`mysql_real_escape_string`](http://php.net/manual/en/function.mysql-real-escape-string.php)

正确的解决方案：不要通过将字符串混合在一起来构建 SQL。[使用准备好的语句和参数化查询](https://stackoverflow.com/a/60496/19068)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-12T21:28:51.333

另一种选择是将您的查询更改为此...

```
$sql = "SELECT id FROM contact_supplier WHERE name = \"$addy\" LIMIT 1"; 
```

# python - Python：使用 numpy 读取复杂的文本文件

> ID：10132086
> 
> 赞同：5
> 
> 时间：2012-04-12T21:24:51.620
> 
> 标签：python, numpy

我正在使用带有 numpy 的 python 从格式相当复杂的文本文件中的数值模型中读取数据。

Numpy 的 genfromtxt 和 fromfile 函数运行良好，但前提是数据是结构化的。我的数据文件如下所示：

------剪辑

```
[sitename] [dimemsion 1 size] [dimension 2 size]
[data for dim 1]
[data for dim 2]
[date/time]
[header data]
[data (dim1 * dim2)]
[header]
[data]
...
.  
.   
[data/time]
[header]
[data]
.
.
etc... 
```

---- 剪断

因此，我混合了文本和数字以及复杂（但重复）的布局。使用 numpy 阅读本文的最佳方式是什么？

干杯，

克里斯

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-12T23:06:34.683

Numpy 不擅长泛化解析，因此您最好超越它，您选择的内容主要取决于文件的一致性。

如果它们异常一致，也就是说，您可以从已知位置和已知行中提取数字，而不是您可以逐行读取文件作为字符串并将其索引到您想要的字符。（逐步浏览文件，例如，使用 file.readlines 将每一行作为字符串获取。）

通常的情况（至少我发现）是它比上面更多样化，但是可以使用简单的字符串操作来解析行，例如[string.split](http://docs.python.org/library/stdtypes.html#string-methods)（这几乎总是我的第一步）等。

除此之外，Python 中还有很多解析库。我偏爱[pyparsing](http://pyparsing.wikispaces.com/)（但我不太了解其他人，所以这不是一个公平的比较）。这是[各种解析库的摘要](http://nedbatchelder.com/text/python-parsers.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T14:59:30.687

我同意前面的回答。以下步骤链效果最好，并且比 pyparsing 或`numpy.genfromtxt`

```
inp = open(textfilename).readlines()
my_list = []
for line in inp:
    item = str.split(line)
    my_list.append(float(item[0])) 
```

然后，您可以轻松地将列表转换为 numpy 数组/矩阵并从那里继续

# python - 如何使用 python 使用注册表确定 3d studio max 的位置？

> ID：10132092
> 
> 赞同：1
> 
> 时间：2012-04-12T21:25:29.387
> 
> 标签：python, windows-7-x64, 3dsmax

我想使用 python 使用 windows 注册表找到 3d studio max。我也没有绑定到特定版本。

我已经看到了几个使用 _winreg 的示例，但是虽然我可以在 regedit 中看到所需的密钥，但我无法通过 python 访问它。

我想要的密钥是 HKEY_LOCAL_MACHINE\SOFTWARE\Autodesk\3dsMax\14.0\MAX-1:409，值为 Installdir。

我尝试使用的 python 脚本如下。

```
from _winreg import *
t = OpenKey(HKEY_LOCAL_MACHINE, r"SOFTWARE\Autodesk\3dsMax\14.0\Max-1:409", 0, KEY_READ)

#try:
i = 0
while True:
    subkey = EnumKey(t, i)
    print subkey
    i += 1 
```

我得到的错误如下。

```
Traceback (most recent call last):
File "C:\testreg.py", line 2, in <module>
t = OpenKey(HKEY_LOCAL_MACHINE, r"SOFTWARE\Autodesk\3dsMax\14.0\Max-1:409", 0, KEY_READ)
WindowsError: [Error 2] The system cannot find the file specified 
```

系统信息：

Windows 7 专业版 64 位

使用 Python 2.5、2.6 和 2.7（各 32 位版本）测试

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T21:28:00.210

如果您使用的是原始字符串，请去掉双反斜杠（如您使用的 r'foo' 语法所示。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T15:44:01.070

如果您正在检测 3dsmax 的 64 位版本，您将很难使用 32 位进程查找它。64 位上的 32 位进程“方便地”替换了它们的注册表配置单元。

如果你想：

```
hklm\SOFTWARE\autodesk\ 
```

你实际上在看：

```
hklm\SOFTWARE\Wow6432Node\autodesk\ 
```

由于 32 位应用程序存在于 64 位之前（在 Windows 上），因此在注册表和文件系统中重定向了许多此类 shim，因此 32 位程序获取它们的密钥和 dll 而不需要 64 位程序以不同的方式命名所有内容（例如 c:\windows\system64， HKML\SOFTWARE64\)。

我认为使用 64 位进程访问 32 位总是更容易，而不是相反。但如果这不可能，这个问题可能会帮助您访问 64 位配置单元。 [从 32 位 Python 更改 64 位注册表](https://stackoverflow.com/questions/8506646/change-64bit-registry-from-32bit-python)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-23T18:41:58.537

添加到上述内容（我曾经也遇到过 64 位的东西）还有一个官方的 Autodesk 页面：

[http://knowledge.autodesk.com/search-result/caas/CloudHelp/cloudhelp/2015/ENU/Max-SDK/files/GUID-3D358AC5-F7BE-4A03-896B-ED92AFFD24E4-htm.html](http://knowledge.autodesk.com/search-result/caas/CloudHelp/cloudhelp/2015/ENU/Max-SDK/files/GUID-3D358AC5-F7BE-4A03-896B-ED92AFFD24E4-htm.html)

干杯！

# django - 覆盖 save_model 并关闭窗口

> ID：10132093
> 
> 赞同：1
> 
> 时间：2012-04-12T21:25:35.320
> 
> 标签：django

我正在编写代码以在 django 管理员中打开一个新窗口以添加模型实例并在保存时关闭。这与 ForeignKey field add（绿色加号）的行为非常相似，但没有选择新创建的模型实例（因为它不是外键字段）。

我添加的用于制作弹出链接的代码是：

```
link = '<a id="add_id_event" class="add-another" onclick="return showAddAnotherPopup(this);" href="%s?date=%s">add</a>' % ( addurl,currentdate) 
```

我的模型称为事件。我正确添加了 RelatedObjectLookups.js

当我尝试保存此模型时，django 会应用与 ForeignKey 字段相同的代码，并尝试激活我没有的 SelectBox。这会导致 javascript 在到达 window.close() 之前失败

我尝试使用覆盖 save_model 函数

```
def save_model(self, request, obj, form, change):
    if request.GET.get('_popup') == '1':
        obj.save()
        return HttpResponse('<script type="text/javascript">window.close()</script>') 
```

使用此代码，但忽略 HttpResponse 调用，django 呈现默认值。例如

```
<script type="text/javascript">opener.dismissAddAnotherPopup(window, "14382", "TMC 2012\u002D02\u002D02 10:00:00 DDT2010B\u002D028");</script> 
```

失败是因为没有目标 SelectBox 对象。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T17:13:34.077

您需要覆盖**ModelAdmin.response_add**。这就是重定向发生的地方。

就我而言，我需要重写dismissAddAnotherPopup 方法，因此我创建了一个名为dismissAddAnotherPopupWithUpdate 的新方法来处理我花哨的M2M 小部件。这是我使用的代码：

```
def response_add(self, request, obj, post_url_continue='../%s/'):
    """
    Overriding to force the widget to update
    """
    resp = super(ModelAdmin, self).response_add(request, obj, post_url_continue)
    if request.POST.has_key("_popup"):
        return HttpResponse('<script type="text/javascript">opener.dismissAddAnotherPopupWithUpdate(window, "%s", "%s");</script>' % \
            # escape() calls force_unicode.
            (escape(obj._get_pk_val()), escape(obj)))
    return resp 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T23:38:52.310

虽然 Cari 的解决方案确实有效，但一个简单的解决方案是在您的`<a>`标签中指定一个有效的 id。使用 id 以便`dismissAddAnotherPopup()`可以在关闭窗口后选择适当的字段。`window.close()`只要它存在，您指定哪个 id 工作都没有关系。

# oracle - 在 Oracle 报表中编辑总计行

> ID：10132094
> 
> 赞同：1
> 
> 时间：2012-04-12T21:25:35.573
> 
> 标签：oracle, report, oraclereports

我正在 Oracle 报告中构建一个底部总计的报告。有几个组有总行，我希望组的名称显示在“总”之前。例如，假设组正在钓鱼。我希望它动态显示“钓鱼总数”，无论该组是什么？有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T01:44:37.010

您可以在布局编辑器中添加样板文本项目，该项目采用组标题的值并添加其他文本，例如`&GROUPTITLE Total`

# android - Eclipse 无法导入 import com.google.android.maps.*？

> ID：10132095
> 
> 赞同：2
> 
> 时间：2012-04-12T21:25:39.727
> 
> 标签：android, google-maps, google-maps-api-3, android-maps

我正在尝试 google maps api for android，但 eclipse 不导入`com.google.android.maps.*`文件。

资源：

我的地图活动：

```
package org.madmax.map;

import android.app.Activity;
import android.os.Bundle;
import com.google.android.maps.*;

public class MyMapActivity extends MapActivity {
    private MapView map;
    private MapController controller;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
    }
} 
```

在我已经声明的清单文件中：

```
 <uses-library android:name="com.google.android.maps" /> 
```

如何导入`com.google.android.maps.*`文件？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-12T21:55:51.493

仅仅安装 API SDK 是不够的。从android地图文档中，

[http://code.google.com/android/add-ons/google-apis/maps-overview.html](http://code.google.com/android/add-ons/google-apis/maps-overview.html)

如果要将 Maps 添加到现有应用程序，请在 Package Explorer 中右键单击项目，选择 Properties > Android，然后从显示的列表中选择构建目标。您必须选择“Google API”构建目标。

（标准的 Android 包不包括谷歌地图）

更新，在网上找到了一个截图，不要选择名称为“Android xx”的目标，为你想要的Android版本选择相应的目标，上面写着“Google APIs”。

![在此处输入图像描述](../Images/4fba050e96e4009bcc8fcccd25d6f05a.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T21:32:08.307

确保您的 SDK 中安装了 Google API。从目录中打开 SDK 管理器`tools`并使用它来安装包。

# ruby-on-rails - Rails 3.1+ 嵌套表单模型无法正确呈现

> ID：10132103
> 
> 赞同：1
> 
> 时间：2012-04-12T21:26:15.873
> 
> 标签：ruby-on-rails, ruby-on-rails-3.1, nested-forms, ruby-on-rails-3.2, simple-form

我有一个篮球应用程序，其中一个名册有很多球员，一个球员属于一个名册。

名册.rb

```
class Roster < ActiveRecord::Base
  has_many :players
  accepts_nested_attributes_for :players
  attr_accessible :class_year, :jersey_number, :player_id, :team_id
end 
```

播放器.rb

```
class Player < ActiveRecord::Base
  has_many :gamelogs
  belongs_to :rosters
  validates_presence_of :first_name, :last_name
  attr_accessible :first_name, :last_name, :active
end 
```

我的观点是只呈现表单的第一部分，而不是嵌套的

```
<div class="well">
    <h2>New Player</h2>
    <%= simple_form_for @new_player, :html => { :class => 'form-horizontal' } do |f| %>
        <%=f.simple_fields_for :players do |x|%>
            <%= x.input :first_name %>
            <%= x.input :last_name %>
        <%end%>
        <%=f.input :class_year %>       
        <%=f.input :jersey_number %>
        <%=f.input :team_id, :as => :hidden, :input_html => {:value => params[:id]}%>

        <div class="well">
        <%= f.button :submit, :class => 'btn-primary icon-plus-sign btn-success', :value => "Add To Team" %>
        </div>
    <%end%>
</div> 
```

它的图像不起作用：

[http://i.stack.imgur.com/Uoirp.png](http://i.stack.imgur.com/Uoirp.png)

我正在使用 Simple_Form 2.0 和 Twitter Boot Strap。有什么我没有看到的吗？我觉得这应该很简单，但我似乎无法弄清楚为什么它没有渲染。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T21:42:48.423

您需要在 fields_for 块上使用等号：

```
<%= f.simple_fields_for :players do |x| %> 
```

编辑：

所有这一切都假设`@new_player == Roster.new`

我必须用 Formtastic 来做这件事，所以它可能与 Simple Form 类似。

查看源代码，它为您提供了将嵌套对象向下传递给嵌套表单的选项：

```
def simple_fields_for(record_name, record_object = nil, options = {}, &block) 
```

所以尝试做这样的事情：

```
<%= f.simple_fields_for :players, @new_player.players.build do |x| %> 
```

# c++ - 静音除我的应用程序

> ID：10132104
> 
> 赞同：-2
> 
> 时间：2012-04-12T21:26:17.507
> 
> 标签：c++, .net, winapi, audio, directx

我使用 DirectSound 在 C# 4.0 中制作了小声音发生器。我想静音所有其他声音。我只希望我的应用程序能够发出声音。

怎么做？

我知道如何 pInvoke，所以你可以给我非托管代码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T01:01:29.377

正确设计的程序会在主窗口停用时停止播放声音。或者使用 IDirectSound::SetCooperativeLevel() 以便它们与其他想要被听到的程序配合得很好。

您在问如何使设计不当的程序表现得很好。有一点暗示，你不打算让自己变得好。教那个不合作的程序很简单，运行它的卸载程序。避免成为同样建议的受害者。

# c++ - 调用 LoadFrame() MFC、RIBBON、VS2008、C++ 时断言失败

> ID：10132106
> 
> 赞同：0
> 
> 时间：2012-04-12T21:26:27.400
> 
> 标签：c++, visual-studio-2008, mfc, ribbon, mfc-feature-pack

我正在将 MFC 功能区合并到现有的 SingleDoc 应用程序中。`LoadFrame()`在类型对象上 调用方法时出现断言失败`CMainFrame : public CFrameWndEx`

> `CMainFrame* pFrame = new CMainFrame;`
> 
> `if (!pFrame)` `return FALSE;`
> 
> `m_pMainWnd = pFrame;`
> 
> ```
> // create and load the frame with its resources` 
> ```
> 
> `pFrame->LoadFrame(IDR_MAINFRAME, WS_OVERLAPPEDWINDOW | FWS_ADDTOTITLE, NULL, NULL);`

断言在函数中抛出

`CMFCRibbonCategory* CMFCRibbonBar::AddPrintPreviewCategory()`

在行中

`CString strLabel;` `ENSURE(strLabel.LoadString(IDS_AFXBARRES_PRINT_PREVIEW));`

调用堆栈（我在这里只提到了函数调用）如下 -

> CMFCRibbonBar::AddPrintPrevieCategory()
> 
> CMFCRibbonBar::RecalcLayout()
> 
> CMFCRibbonBar::LoadState(const char * lpszProfileName=0x06bdf2f8, int nIndex=59398, unsigned int uiID=4294967295)
> 
> DockingManager::LoadState(const char * lpszProfileName=0x06bdf2f8, unsigned int uiID=128)
> 
> CFrameImpl::LoadDockState(const char * lpszSectionName=0x06bdf2f8)
> 
> CFrameImpl::OnLoadFrame()
> 
> CFrameWndEx::LoadFrame(unsigned int nIDResource=128, unsigned long dwDefaultStyle=13598720, CWnd * pParentWnd=0x00000000, CCreateContext * pContext=0x00000000)
> 
> App::InitInstance() - 在这个函数中我调用 Loadframe

现在，我想知道如何解决这个问题，因为我所做的只是调用 LoadFrame 函数。

任何帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T17:43:25.353

使用功能区的 MFC 应用程序要求您为功能区包含一些资源文件。这些文件位于 VS 安装的**VC\atlmfc\include**子目录中。

我的猜测是您没有比较 .rc 文件，而是比较了 VS 中的资源项。这些线条很容易被忽略。

因此，您的主 .rc 文件中需要这两行：

`#include "afxprint.rc" // printing/print preview resources`

`#include "afxribbon.rc" // MFC ribbon and control bar resources`

您可以在 Visual Studio 中轻松地做到这一点。转到“资源视图”并右键单击 .rc 文件，然后选择“资源包含...”，您可以将其添加到那里。

那应该这样做。

# objective-c - ARC 中的强大属性 - Objective C

> ID：10132107
> 
> 赞同：0
> 
> 时间：2012-04-12T21:26:29.020
> 
> 标签：objective-c, ios, properties, automatic-ref-counting, null

我的问题很简单，但我没有在网上找到准确的答案。我必须在 viewDidUnload 方法中设置 nil 一个强属性吗？

我知道弱属性会自动设置为零，但是强属性呢？我是否必须在 viewDidUnload 和 didReceiveMemoryWarning 中执行此操作？

十分感谢！泰迪熊

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-12T21:52:47.547

您应该在“companion”函数中将其设置为 nil，以设置它的设置位置，或者您希望它消失的位置。例如，如果您将其设置为 in`viewDidLoad`您通常将其设置为 nil in `viewDidUnload`。如果您将其设置为 in`viewWillAppear`然后将其设置为 nil in `viewWillDisappear`。

`didReceiveMemoryWarning`如果它是你并不真正需要的东西并且可以在你下次需要它时重新创建，请将它设置为 nil in 。（例如在其 getter 中自动创建的变量）。

# coldfusion - Coldfusion CFC 映射到具有引用其他文件夹的 CFC 的外部目录

> ID：10132108
> 
> 赞同：0
> 
> 时间：2012-04-12T21:26:30.863
> 
> 标签：coldfusion, path, mapping, components, cfc

我已经做了一些探索和反复试验，但我没有想出解决这个问题的方法。

我有这样的文件夹结构（示例）

*   应用程序.cfc
*   对象\
    *   对象.cfc
*   实用程序\
    *   实用程序.cfc
*   API\
    *   资源\
        *   索引.cfm
    *   应用程序.cfc

我有一个指向 API 文件夹 (http://api.site.com) 的站点和另一个指向整个根目录 (http://site.com)

来自 Api\Resource\index.cfm。我正在尝试在 Objects\Object.cfc 上创建对象（）。我在 CF Admin 或 API\Application.cfc 中使用 this.mappings["/SiteRoot"] = "C:\wwwroot" 设置了一个映射。在 index.cfm 中，我执行 createObject("component","SiteRoot.Objects.Object")。这可以正确访问 Object.cfc。

我遇到的问题是它失败了，因为 Object.cfc 仅通过 createObject("component","Utilities.Util") 实例化了 Utilities\Util.cfc。错误是找不到 Utilities.Util。

在最底部的根目录中还有其他文件，显然可以毫无问题地调用 Object.cfc，因为它自然地进入了 Utilities 文件夹。

有什么建议或者我真的需要完全从这个根目录中删除 API 文件夹吗？

谢谢！

*更新* 它还没有让我回答我自己的问题，但我想在其他人插话之前在这里发帖。

尽管重新启动了应用程序并重新启动了应用程序服务器，但它仍然无法正常工作。然后突然间，它就像我预期的那样正常工作。Object.cfc 可以根据 Util.cfc 的相对路径正确找到它。

我向那些做出回应的人投了赞成票，因为他们是完全可行的替代方案和解决方案，如果这不是刚刚开始工作的话，他们会选择其中的一个。恶魔，我告诉你。恶魔。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T22:01:46.543

我想我会将您的第二个创建对象调用（实用程序之一）更改为 createObject("SiteRoot.Utilities.Util") ？确保一个映射“管理”所有对象的起点，无论在何处实例化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T22:13:25.693

如果您确实无法更改您的代码，那么只需创建一个名为 Utilities 的 ColdFusion 映射，指向 Utilities 文件夹。

# php - MySQL SUM 函数

> ID：10132110
> 
> 赞同：0
> 
> 时间：2012-04-12T21:26:37.183
> 
> 标签：php, mysql

我试图得到一列的总和。

我的架构如下...

![方案截图](../Images/9eefb6dd9b451b95ab02482fae353941.png)

我想得到“账单”的总和。

我有以下...

```
 <?php
   $uid = $_SESSION['oauth_id'];
   $query = mysql_query("SELECT * FROM `users`, `income`, `outgoings` WHERE users.oauth_uid = '$uid' and income.user_id = '$uid' and outgoings.user_id = '$uid'") or die(mysql_error());
   $result = mysql_fetch_array($query);
   ?>

   Outgoings = <?php echo $result["SUM(total)"]; 
```

但是，我没有收到任何输出。任何人都可以看到我要去哪里错了吗？我的表里肯定有数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T21:31:01.223

`SUM`在决定从选择返回什么时必须使用该函数。像这样。

```
 SELECT SUM(`bill`) FROM `users`, `income`, `outgoings` WHERE users.oauth_uid = '$uid' and income.user_id = '$uid' and outgoings.user_id = '$uid' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T21:35:40.550

如果您不想像其他人已经提出的那样执行 SUM() 查询，请尝试此操作：

```
<?php
$sum = 0;
while ($row = mysql_fetch_array($query)) {
    $sum += $row['bill'];
}
?>
Outgoings = <?php echo $sum; ?> 
```

但请记住，如果您想重用相同的 $query 结果集，您将需要这个：

```
<?php
     mysql_data_seek($query , 0);
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T21:31:47.943

为什么不直接查询`SUM`呢？像：

```
 <?php
       $uid = $_SESSION['oauth_id'];
       $sum = mysql_query("SELECT SUM(`bill`) FROM `users` WHERE users.oauth_uid = '$uid'") or die(mysql_error());
   ?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T21:31:53.263

此查询将为您提供总和：

```
SELECT sum(bill) FROM `the_table` 
```

# windows - Win7谷歌浏览器缓存互联网连接设置

> ID：10132111
> 
> 赞同：0
> 
> 时间：2012-04-12T21:26:37.990
> 
> 标签：windows, google-chrome, proxy, registry, wininet

我有一些在 Windows 服务中运行的代码，并为每个用户设置了一些代理设置。具体来说，它设置：

HKU[用户 sid]\Software\Microsoft\Windows\CurrentVersion\Internet Settings\AutoConfigURL

HKU[用户 sid]\Software\Policies\Microsoft\Windows\CurrentVersion\Internet Settings\EnableAutoProxyResultCache

HKU[用户 sid]\Software\Policies\Microsoft\Internet Explorer\Control Panel\Connection Settings

对于“锁定”用户，它设置：

AutoConfigURL=http://127.0.0.1:8888/wpad.dat

EnableAutoProxyResultCache=0

连接设置=1

对于“解锁”用户，它设置：

AutoConfigURL（删除此键）

连接设置（删除此键）

* * *

在 Windows XP、IE、FireFox 和 Chrome 上一切正常。一旦我重新启动这些浏览器中的任何一个，就会使用新设置（使用或不使用代理）。

在 Windows 7 上，一切都在 FireFox 和 IE 中运行良好，但在 Chrome 中却不行。在发生以下情况之一之前，Chrome 不会开始使用新设置：

1.  我运行 inetcpl.cpl 并单击确定按钮（不需要更改任何内容，但需要单击确定，而不仅仅是取消）

2.  我注销并重新登录 Windows 用户帐户

3.  我运行 IE（只是运行 IE 并关闭它）

**我正在寻找一种编程方式来重置此缓存，无论它是什么缓存。**

我尝试过但没有奏效的方法：

1.  我能想到的几乎所有“netsh”命令选项。

2.  InternetSetOption()（请参阅 MSDN），代理设置已更改并刷新标志（使用 NULL 作为 hInternet 句柄）

3.  删除了 HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Internet Settings\Connections\ 下的值

* * *

有没有人看到这个缓存问题并找到了清除它的方法？如果没有，我一般应该寻找什么信息。这是 WinHTTP 缓存、TCP、IP、WinInet 吗？尽管它只出现在 Google Chrome 中，但我不认为它是真正的 Chrome 缓存，我认为它是在操作系统级别。

我知道我可能应该使用 InternetSetOption 而不是直接更新注册表，但这不适用于服务，而且我发现一些防病毒程序会导致任何桌面应用程序级代码出现问题（但它们不会不介意我的服务是否更新）。更不用说上面的一些设置需要管理员/高度来修改，即使都是在 HKCU 下。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T02:41:24.080

似乎是测试错误或异常，在设置注册表值后调用它似乎确实有效：

```
 InternetSetOption(NULL,INTERNET_OPTION_SETTINGS_CHANGED,NULL,0);
   InternetSetOption(NULL,INTERNET_OPTION_REFRESH,NULL,0); 
```

# javascript - Box2D：为世界设置多个 b2ContactListener？- 变得奇怪的行为

> ID：10132113
> 
> 赞同：2
> 
> 时间：2012-04-12T21:26:43.093
> 
> 标签：javascript, html, box2d

所以我对 Box2D 很陌生，我正在尝试弄清楚如何使用 b2ContactListener。

您是否允许为一个世界设置多个 Contact Listeners？我会这么认为。但是当像这样设置两个联系人监听器时：

```
world.SetContactListener(listener);
world.SetContactListener(listener2); 
```

它的行为就像`listener2`是唯一的一组。这是为什么？另外，当我更改设置侦听器的顺序时，如下所示：

```
world.SetContactListener(listener2);
world.SetContactListener(listener); 
```

然后它的行为就像`listener`是唯一的联系侦听器集并忽略`listener2`。

我认为为什么会出现这种行为的唯一原因是因为两个侦听器都覆盖了`BeginContact`and`EndContact`方法，所以它很困惑。

顺便说一下，我正在使用 Box2D (Box2DWeb) 的 JavaScript 端口。但是，如果您知道 Objective-C 或 C++ 中问题的解决方案，那很好，因为我知道这些语言。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T10:14:26.730

提示在名称中 - “设置”而不是“添加”。这意味着仅支持 1 个侦听器。如果需要，更新您的侦听器类以分派到多个方法。

您似乎对覆盖方法的含义感到困惑。在多个对象上覆盖相同的方法不会导致任何混淆。问题是一次只能注册一个监听器（因为有很多监听器会减慢速度 - 它会被调用很多）

# ios - 在 OpenGLES 中组合多个着色器

> ID：10132116
> 
> 赞同：1
> 
> 时间：2012-04-12T21:26:56.970
> 
> 标签：ios, opengl-es, filter, shader

我有一个接收 YUV 通道的代码，我正在使用 OpenGLES 绘制它们。基本上，我有一个将它们组合在一起的着色器。

我想为结果添加一个锐化过滤器（使用以下示例：http: [//igortrindade.wordpress.com/2010/04/23/fun-with-opengl-and-shaders/](http://igortrindade.wordpress.com/2010/04/23/fun-with-opengl-and-shaders/)）

我不确定如何在实际结果上运行另一个着色器（因为我想在我以前的着色器将所有通道组合到一个帧之后运行它）。

我当前的代码如下所示：

```
 glUniform1i(texLum, 0);
            glUniform1i(texU, 1);
            glUniform1i(texV, 2);

            glEnableVertexAttribArray(positionLoc);
            glVertexAttribPointer(positionLoc, 
                                  4, 
                                  GL_FLOAT, 
                                  GL_FALSE, 
                                  0, 
                                  &vertices[0]);

            glEnableVertexAttribArray(texCoordLoc);
            glVertexAttribPointer(texCoordLoc, 
                                  2, 
                                  GL_FLOAT, 
                                  GL_FALSE, 
                                  0, 
                                  &texCoords[0]);

            glDrawElements(GL_TRIANGLES, sizeof(indices)/sizeof(indices[0]), GL_UNSIGNED_BYTE, &indices[0]); 
```

我想我需要在最后一行（glDrawElements）之前添加新的着色器，但我不知道如何调用它。

我的着色器看起来像这样：

```
 static char const *frag = 
    "uniform lowp sampler2D texLum; \n"
    "uniform lowp sampler2D texU; \n"
    "uniform lowp sampler2D texV; \n"
    "varying mediump vec2 texCoordAtFrag; \n"
    "void main() { \n"
    "   lowp float Y = texture2D(texLum, texCoordAtFrag).r; \n"
    "   lowp float U = texture2D(texU, texCoordAtFrag).r; \n"
    "   lowp float V = texture2D(texV, texCoordAtFrag).r; \n"
    "   lowp float R = 1.164 * (Y - 16.0 / 256.0) + 1.596 * (V - 0.5); \n"
    "   lowp float G = 1.164 * (Y - 16.0 / 256.0) - 0.813 * (V - 0.5) - 0.391 * (U - 0.5); \n"
    "   lowp float B = 1.164 * (Y - 16.0 / 256.0) + 2.018 * (U - 0.5); \n"
    "   gl_FragColor = vec4(R,G,B,1); \n"
    "}\r\n";

    static char const *vert = 
    "varying mediump vec2 texCoordAtFrag; \n"
    "attribute vec4 Position; \n"
    "attribute vec2 TexCoord; \n"
    "void main() { \n"
    "   texCoordAtFrag = TexCoord; \n"
    "   gl_Position = Position; \n"
    "}\r\n"; 
```

其中 texLum,texU,texV 是保存通道的纹理。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T21:50:59.087

Sharpen 是一个卷积滤波器，因此它读取九个输入值以产生一个输出值。因此，如果您有另一个着色器应该出现在它之前并一次操作一个像素，那么分两步运行它们（首先是 YUV 转换，其次是锐化）以消除重复计算，即使如果它也不是将着色器组合为封闭框的最简单方法。

如果您想实时组合它们，请将 YUV 转换分解为一个单独的函数，并让锐化过滤器调用该函数而不是`texture2D`. GL 着色器编译器对您可以链接在一起的源文件的数量没有任何限制，以便精确地制作编译程序，以便您可以遵循通常的编程路线进行函数重用。

如果您希望运行一个然后运行另一个然后使用中间渲染到纹理阶段。进行 YUV 变换，然后切换缓冲区并将其输出用作锐化的输入。

在实践中，前者实际上可能比后者更快，因为 YUV 变换可能是一种快速操作（例如，如果它是 YUV 到 RGB，那么它是一个矩阵乘法），而内存速度和需要进行相当剧烈的改变状态可能是挺贵的。如果性能是一个问题，您可能需要进行分析。

编辑：所以，从您当前的主要内容中，您可以将其调整为（在此处输入，请原谅错误）：

```
"uniform lowp sampler2D texLum; \n"
"uniform lowp sampler2D texU; \n"
"uniform lowp sampler2D texV; \n"
"varying mediump vec2 texCoordAtFrag; \n"
"lowp vec4 yuvTexture2D(mediump vec2 coord) { \n"
"   lowp float Y = texture2D(texLum, coord).r; \n"
"   lowp float U = texture2D(texU, coord).r; \n"
"   lowp float V = texture2D(texV, coord).r; \n"
"   lowp float R = 1.164 * (Y - 16.0 / 256.0) + 1.596 * (V - 0.5); \n"
"   lowp float G = 1.164 * (Y - 16.0 / 256.0) - 0.813 * (V - 0.5) - 0.391 * (U - 0.5); \n"
"   lowp float B = 1.164 * (Y - 16.0 / 256.0) + 2.018 * (U - 0.5); \n"
"   return vec4(R,G,B,1.0); \n"
"}\r\n 
```

然后在您的锐化过滤器中，您将调用替换为调用`texture2D(<whatever>, coord)`，`yuvTexture2D(coord)`将片段包含在锐化着色器的源列表中或将其链接到程序中。关于切换到使用矩阵方法，我想您会想要（为了便于键入，我将对其进行格式化而不是字符串常量）：

```
uniform lowp sampler2D texLum;
uniform lowp sampler2D texU;
uniform lowp sampler2D texV;
varying mediump vec2 texCoordAtFrag;

const mediump mat4 yuvToRgb = 
mat4(   1.164,  1.164,  1.164,  -0.07884, 
        2.018, -0.391,    0.0,  1.153216,
        0.0, -0.813,    1.596,  0.53866, 
        0.0,      0.0,    0.0,  1.0);

lowp vec4 yuvTexture2D(mediump vec2 coord) {
   lowp vec4 yuv = 
         vec4(
             texture2D(texLum, coord).r,
             texture2D(texU, coord).r,
             texture2D(texV, coord).r,
             1.0)
   return yuvToRgb * yuv;
} 
```

# android - 选择书签对话框的最佳实践

> ID：10132118
> 
> 赞同：1
> 
> 时间：2012-04-12T21:27:13.143
> 
> 标签：android

我还没有为此编写任何代码，但我一直在研究如何在我的自定义网络浏览器中实现书签。从我读过的内容来看，我相信要走的路是向用户展示一个对话框（我看到[了这篇](https://stackoverflow.com/questions/4473940/android-best-practice-returning-values-from-a-dialog)关于如何从对话框返回值的文章），我认为其中包含一个用于书签的 ListView ......我'老实说，我坚持做一些非常简单的事情——如何向用户展示书签并选择一个。

所以，我的问题在哪里：

1.  向用户显示列表并让他选择一个列表的“最佳实践”是什么？
2.  是在对话框“最佳实践”中这样做吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T19:03:26.343

执行此操作的经典方法（3.0 之前）是使用简单的对话框，您可以使用当前的活动进行管理。最简单的方法是使用 AlertDialogBu​​ilder 构建对话框，请参见[此处](http://developer.android.com/guide/topics/ui/dialogs.html)，在中间的“添加列表”部分。这样，您将获得一个带有列表的对话框，并且用户可以从该列表中选择一个条目。

但是，如今，您应该使用[DialogFragments](http://developer.android.com/reference/android/app/DialogFragment.html)和（不是这样）新的 Fragment 框架。您可以使用官方兼容性库使片段在较旧的 Android 版本上工作。在 DialogFragment 中，如果您覆盖 onCreateView(...) 回调，您可以显示任何您想要的 UI 布局，或者您可以使用“onCreateDialog(...)”回调定义外观和行为（您可以使用 AlertDialogBu​​ilder这里也）。有关示例，请参见链接。

基于 DialogFragment 的解决方案更加独立，您可以从应用程序的任何位置轻松调用/显示它。

是的，我确实认为在这种情况下，可以将基于单选列表的对话框视为“最佳实践”。但是，基于 DialogFragment 的解决方案的另一个优点是，您不必被迫以 Dialog 样式显示它，如果您想要的话，您也可以将它作为标准片段嵌入到 Activity 的布局中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-25T03:24:03.980

最好的方法是显示一个带有列表的对话框，并根据用户选择导航到浏览器或 web 视图。

您可以使用以下代码向用户显示一个对话框::

```
String[] yourarraylist = new String[]{"A","B","C","D","E","F","G"};
AlertDialog.Builder builder = new AlertDialog.Builder(YourActivity.this);
builder.setTitle("title");
builder.setSingleChoiceItems(yourarraylist, -1, new DialogInterface.OnClickListener() {
@Override
public void onClick(DialogInterface dialog, int item) {
    Toast.makeText(getApplicationContext(), yourarraylist[item], Toast.LENGTH_SHORT).show();
    //launch web browser or webview 
    alert.dismiss();
    }
});
alert = builder.create();
alert.show(); 
```

您可以按如下方式启动网络浏览器::

```
Intent browserIntent = new Intent(Intent.ACTION_VIEW, Uri.parse("http://www.google.com"));
startActivity(browserIntent); 
```

另外，要在 webview 中打开 url，您可以在此[LINK上参考我的博客](http://asmncl.blogspot.in/2012/04/android-webview-to-load-url.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-23T12:55:19.057

我个人会使用另一个活动来显示书签，而不是使用对话框。用户可以保存大量书签，并且我认为对话框不是最好的方法。

我会做另一个扩展 ListView 的活动，并在列表上显示书签，甚至更好的是带有书签缩略图的 gridview。然后通过单击书签将返回主活动，使用所选书签刷新浏览器。

不需要对话框，除非您喜欢创建长按或上下文菜单来显示用于删除/编辑/.. 书签的对话框。

alertdialog.builder 是构建对话框的最快和最简单的方法。作为使用 alertdialog.builder 构建对话框的另一个技巧。构建器有一个 setview 可以给它任何你想要的对话框视图，这个视图基本上可以是一个线性布局，其中已经丢失了更多视图，创建了一个复杂的对话框视图。

```
final AlertDialog.Builder ad = new AlertDialog.Builder(this);
ad.setTitle(getResources().getString(R.string.dialog_title));
ad.setView(dialogLayout); 
```

# c# - 在 C# 中使用 RDS.DataSpace 连接到业务对象

> ID：10132125
> 
> 赞同：0
> 
> 时间：2012-04-12T21:27:24.497
> 
> 标签：c#, vba, rds

是否可以使用 C# 完成此任务？

```
Global Const COMPLUS_SERVER As String = "http://myserver"

Sub Test()
    Set objRDS = CreateObject("RDS.Dataspace")
    Set objCLS = objRDS.CreateObject("MY_System", COMPLUS_SERVER)
    Set ListNames = objCLS.LstOBSReasons("databaseserver", "databasename", 5)
End Sub 
```

我尝试过`Activator.CreateInstance(Type.GetTypeFromProgID(""));`但没有成功，此外我想以另一种方式知道我可以连接到我的业务对象。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T07:05:08.143

应该是可能的，首先您需要将 添加`Microsoft Remote Data Services Library`到项目的引用中。您将在 COM 选项卡下找到它。然后，您可以通过执行以下操作创建 RDS.DataSpace 类：

```
DataSpaceClass objRDS = new RDS.DataSpaceClass();
dynamic objCLS = objRDS.CreateObject("MY_System", "http://myserver");
dynamic listNames = objCLS.LstOBSReasons("databaseserver", "databasename", 5); 
```

唯一棘手的部分是您可能无法通过动态调用调用生成的对象（我假设您使用的是 C#4）。如果不能，您还需要导入业务对象的类型。例如，查看类似[这样](http://msdn.microsoft.com/en-us/library/aa645736%28v=vs.71%29.aspx)的内容以获取有关实现 COM 互操作的更多信息。

# c# - 如何判断 ContentProvider 的文本是否已被编辑？

> ID：10132128
> 
> 赞同：0
> 
> 时间：2012-04-12T21:27:39.420
> 
> 标签：c#, wpf, xaml, datagrid

我有几个 DataGridTextColumn 的 DataGrid，其中一个是可编辑的。

我需要拦截正在编辑的单元格的 TextChanged 事件。

我尝试过编辑样式并添加

```
<EventSetter Event="TextChanged" Handler="TaskDescription_TextChanged"/> 
```

但我得到

```
Cannot find the Style Event 'TextChanged' on the type 'System.Windows.Controls.DataGridCell' 
```

除了双向绑定之外，是否有一种简单的方法可以通知 DataGridTextColumn 中的文本更改？

这是 XAML 代码：

```
 <Style x:Key="CenteredTextColumn" TargetType="{x:Type DataGridCell}">
        <Setter Property="Background" Value="Transparent"/>
        <Setter Property="BorderBrush" Value="Transparent"/>
        <Setter Property="BorderThickness" Value="1"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type DataGridCell}">
                    <Grid Height="30">
                        <Border BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" Background="{TemplateBinding Background}" SnapsToDevicePixels="True">
                            <ContentPresenter VerticalAlignment="Center" SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}"/>
                        </Border>
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
        <Setter Property="VerticalAlignment" Value="Stretch"/>
        <Setter Property="HorizontalAlignment" Value="Stretch"/>
        <Setter Property="Foreground" Value="Black"/>
        <Style.Triggers>
            <Trigger Property="IsSelected" Value="True">
                <Setter Property="Background" Value="{StaticResource SelectedCellBackground}"/>
                <Setter Property="Foreground" Value="White"/>
                <!--<Setter Property="BorderBrush" Value="{DynamicResource {x:Static SystemColors.HighlightBrushKey}}"/>-->
            </Trigger>
            <Trigger Property="IsKeyboardFocusWithin" Value="True">
                <!--<Setter Property="BorderBrush" Value="{DynamicResource {x:Static DataGrid.FocusBorderBrushKey}}"/>-->
            </Trigger>                  
            <Trigger Property="IsEditing" Value="True">
                <Setter Property="Background" Value="Transparent"/>
            </Trigger>  
        </Style.Triggers>
    </Style> 
```

和事件设置器：

```
<Style x:Key="ProjectInfoEditeableCell" TargetType="{x:Type DataGridCell}" BasedOn="{StaticResource CenteredTextColumn}">
        <EventSetter Event="TextChanged" Handler="TaskDescription_TextChanged"/>
    </Style> 
```

# django - 为什么 Django 在加载我的 URLconf 时会抛出警告？

> ID：10132133
> 
> 赞同：1
> 
> 时间：2012-04-12T21:27:59.787
> 
> 标签：django, django-urls

我有一个在生产服务器上运行的 Django 应用程序。它由 nginx 后面的 gunicorn 0.14.2 处理。当我重新加载应用程序（通过重新加载 gunicorn 工作人员）时，我收到此错误：

```
Traceback (most recent call last):

 File "/opt/nybooks/venv/myapp/lib/python2.6/site-packages/django/core/handlers/base.py", line 101, in get_response
   request.path_info)

 File "/opt/nybooks/venv/myapp/lib/python2.6/site-packages/django/core/urlresolvers.py", line 250, in resolve
   for pattern in self.url_patterns:

 File "/opt/nybooks/venv/myapp/lib/python2.6/site-packages/django/core/urlresolvers.py", line 283, in _get_url_patterns
   raise ImproperlyConfigured("The included urlconf %s doesn't have any patterns in it" % self.urlconf_name)

ImproperlyConfigured: The included urlconf myapp.urls doesn't have any patterns in it 
```

其他有此问题的人通常注意到它`reverse`在 URLconf 中使用时发生，但我没有`reverse`在任何 URLconfs 中使用（也没有在任何第三方应用程序中使用）。此外，这个错误*只*发生在生产中——从不在开发中（使用 Django 开发服务器）或我的登台服务器上（在 nginx 后面使用 gunicorn 0.14.2）。在重新加载期间，它似乎也不会在任何其他时间对站点造成问题。

任何想法是什么导致了问题？

* * *

这是主要的 URLconf（以及堆栈跟踪中引用的那个）：

```
from django.conf.urls.defaults import *
from django.contrib import admin
from django.conf import settings
from django.http import HttpResponse, Http404
from django.views.generic.simple import direct_to_template, redirect_to

from myapp.apps.magazine.views import *
from myapp.apps.books.views import *
from myapp.apps.forms.views import *
from myapp.apps.blogext.views import *
from myapp.apps.sharing.views import expand_url, email_link_send
from myapp.apps.magazine.feeds import *

from satchmo_utils import urlhelper

from satchmo_store.urls import urlpatterns
from myapp.apps.myapp_shop.views import *

admin.autodiscover()

if settings.SHOP_BASE == '':
  shopregex = '^'
else:
  shopregex = '^' + settings.SHOP_BASE[1:] + '/'

myapp_patterns = patterns('',
  # calendar
  (r'^calendar/',            include('events.urls')),
  # for multimedia SWF access
  #(r'^crossdomain.xml$', direct_to_template, {'template': 'crossdomain.xml'}),
  # intercept checkout
  # TODO: need to use a config value
  (r'^catalog/checkout/$', 'myapp.apps.cart.views.myapp_checkout', {'SSL': not settings.LOCAL_DEV}, 'myapp_checkout'),
  (r'^catalog/add/$', 'myapp.apps.cart.views.smart_add_wrapper', {}, 'myapp_smart_add'),
  # URLs for NYRB apps
  (r'^$',                         direct_to_template, {'template': 'newhomepage.html'}),
  (r'^newhomepage/$',             direct_to_template, {'template': 'newhomepage.html'}),
  (r'^mobile/$',                  redirect_to, {'url': '/', 'permanent': True}),
  (r'^books/authors/',            include('myapp.apps.books.urls.authors')),
  (r'^books/',                    include('myapp.apps.books.urls.books')),
  (r'^articles/',                 include('myapp.apps.magazine.urls.articles')),
  (
    r'^mobile/articles/archives/(?P<year>\d{4})/(?P<month>[a-z]{3})/(?P<day>\d{2})/(?P<slug>[-\w]+)/$',
    redirect_to,
    {'url': '/articles/archives/%(year)s/%(month)s/%(day)s/%(slug)s/', 'permanent': True},
  ),
  # for national poetry month (april)
  url(
    regex   = r'^national-poetry-month/',
    view    = poetry_month,
    name    = 'poetry_month',
  ),
  (r'^issues/',                   include('myapp.apps.magazine.urls.issues')),
  (r'^contributors/',             include('myapp.apps.magazine.urls.contributors')),
  (r'^galleries/',                include('myapp.apps.magazine.urls.illustrations')),
  (r'^multimedia/',               include('myapp.apps.multimedia.urls.multimedia')),
  (r'^online/$',                  direct_to_template, {'template': 'online.html'}),

  #(r'^search/',                   include('myapp.apps.search.urls')),
  (r'^search/', include('solango.urls')),
  (r'^textareas/', include('myapp.apps.textareas.urls')),

  (r'',                           include('myapp.apps.forms.urls')),
  (r'^utils/',                    include('myapp.apps.utils.urls')),
  #(r'^rss/$',                     'myapp.apps.magazine.views.rss_list'),
  (r'^rss/huffpo/$',              redirect_to, {'url': '/articles/feeds/huffpo/', 'permanent': False}),
  (r'^rss/googlenews/$',          redirect_to, {'url': '/articles/feeds/googlenews/', 'permanent': False}),
  (r'^newsletter/',               include('myapp.apps.newsletter.urls')),
  (r'^subscriptions/',            include('myapp.apps.newsubscriptions.urls')),
  (r'^shared/',                   include('myapp.apps.sharing.urls')),
  (r'^counter/',                  include('myapp.apps.counter.urls')),

  # Redirects for legacy NYRB system
  (r'^nyrev/(\w+)',                         uber_legacy_article_redirect),
  (r'^nyrev/',                              redirect_to, {'url': '/'}),
  (r'contents/(?P<legacy_date>\d+)/',       legacy_issue_detail_redirect),
  (r'^archives/browse/?$',                  legacy_browse_archives),
  (r'^gallery/gallery-browse/?$',           legacy_gallery_browse),
  (r'^gallery/',                            legacy_illustration),
  (r'authors/(?P<legacy_author_id>\d+)/',   legacy_author_detail_redirect),
  #(r'shop/product',                         legacy_book_detail_redirect),
  (r'^shop/product/?$',                     legacy_product),
  (r'^myapp/browse/?$',                      legacy_book_browse),

  (r'blogs/myapplog/post/(\d+)/(?P<slug>[-\w]+)/$', solango_blogsearch_redirect),

  # URL shortening
  (r'^u/(?P<short_url>[a-zA-Z0-9]+)/$', expand_url),

  # NYRB shop
  (r'^shop/',                     include('myapp.apps.myapp_shop.urls')),
  (r'^admin/shop/order/csv/?', csv_order_export_day),
  (r'^admin/shop/order/(?P<order_id>\d+)/csv/?', csv_order_export),

  # URLs for Savoy apps
  (r'^tags/',                     include('savoy.contrib.sections.tag_urls')),
  (r'^podcasts/',                 include('savoy.contrib.podcasts.urls')),
  (r'^blogs/$',                   redirect_to, {'url': "/blogs/myapplog/", 'permanent': False}),
  (r'^blogs/',                    include('savoy.contrib.blogs.urls')),
  (r'^media/',                    include('savoy.core.media.urls')),

  # this is to use our own edit profile view
  (r'^users/(?P<username>.+)/edit/$', edit_profile),
  (r'^users/',                    include('savoy.core.profiles.urls')),

  # django-authopenid
  (r'^account/getusername/',      get_lost_username),

  #(r'account/signin/?',            'myapp.apps.forms.views.dual_login'),
  (r'account/signin/?',            'django.contrib.auth.views.login', {'template_name': 'authopenid/signin.html'}),
  (r'account/signout/?',           'django.contrib.auth.views.logout', {'next_page': '/'}),
  (r'account/sendpw/?',            'myapp.apps.forms.views.dual_sendpw'),
  (r'account/resetpw/?',           'myapp.apps.forms.views.reset_pw'),
  (r'account/signup/?',            'myapp.apps.forms.views.link_and_signup'),

  #(r'^account/',                  include('django_authopenid.urls')),

  # django-mailfriend
  (r'^mail_friend/send/?',        email_link_send),
  (r'^mail_friend/',              include('mailfriend.urls')),

  # django.contrib.comments

  # Django admin (Satchmo additions):
  (r'^admin/print/(?P<doc>[-\w]+)/(?P<id>\d+)',                     'shipping.views.displayDoc'),
  (r'^admin/product/configurableproduct/(?P<id>\d+)/getoptions/',   'product.views.get_configurable_product_options'),

  # Orders
  (r'^admin/open-orders/$', 'myapp.apps.myapp_shop.views.open_orders'),

  # Institutional subscription CSV
  (r'^admin/subscriptions/institutionalsubscription\.csv', 'myapp.apps.subscriptions.views.institutional_sub_csv'),

  # COUNTER admin for institutional reports
  #(r'^admin/institution-counts/multiple-report/csv/$',           'myapp.apps.subscriptions.views.institution_multiple_csv'),
  #(r'^admin/institution-counts/multiple-report/$',               'myapp.apps.subscriptions.views.institution_multiple_report'),
  (r'^admin/institution-counts/institutions/(?P<id>\d+)/csv/',   redirect_to, {'url': '/counter/%(id)s.csv'}),
  (r'^admin/institution-counts/institutions/(?P<id>\d+)/$',      redirect_to, {'url': '/counter/%(id)s/'}),
  #(r'^admin/institution-counts/process_file/?$',                 'myapp.apps.subscriptions.views.institution_process_file'),
  (r'^admin/institution-counts/$',                               redirect_to, {'url': '/counter/'}),

  # Django admin (standard)
  (r'^admin/doc/',                include('django.contrib.admindocs.urls')),
  (r'^admin/',                    include(admin.site.urls)),

  # custom feeds
  (r'^feed/author/(?P<slug>[-\w]+)/$', AuthorFeed()),
)

# attach satchmo patterns after our patterns so we can override if needed
from satchmo_store.urls import urlpatterns
urlpatterns = myapp_patterns + urlpatterns

if settings.DEBUG:
    urlpatterns += patterns('django.views.static',
        (r'media/(?P<path>.*)', 'serve', {'document_root': settings.MEDIA_ROOT}),
    ) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T22:12:06.253

我的猜测是它与你的 satchmo 模式和 django 专门寻找的名称“urlpatterns”的重载有关。

尝试

```
from satchmo_store.urls import urlpatterns as satchmo_patterns
urlpatterns = myapp_patterns + satchmo_patterns

#etc. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T01:11:31.830

I think, and this is just a hunch, your urls maybe fine, (since no issues arise in your staged dev machine, only reloading on prod) the problem maybe with the way gunicorn re-loads the modules, and the way python compiled code behaves between different versions of the interpreter and how iterators behave, but again this are all hunches.

I recommend that you use the same version of python that you have on production in your staged machine and see if you can recreate the error if there already same version, then it must be something else, the reason I ask is that most production machines tend to use older versions of python, though I could be wrong.

good luck.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T10:28:33.770

除了这些`urlpatterns = myapp_patterns + urlpatterns`东西，我们当然可以`myapp_patterns` `urlpatterns`取消球棒，并在它的末端有一些类似的东西：

```
(r'^', include('satchmo_store.urls')), 
```

因为这是包含 URL 模式的“Django”方式？

这可能会解决您的问题，我不确定。值得一试，我猜。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-09T20:09:45.667

奇怪的行为可能是因为之前`if settings.DEBUG`， urlpatterns 出于某种原因是空的。

运行开发服务器时，它会填充来自静态应用程序的 urlpatterns。在生产中运行时，它仍然是空的。

您可以使用以下子句轻松检查

```
if urlpatterns:
    # something is in urlpatterns
    # What's its type, contents, ...?
else:
    # urlpatterns is empty 
```

一旦你弄清楚了这一点，你就可以更深入地挖掘。您还可以在单​​元测试中添加检查，或者直接在 python shell 中进行检查，如果您想让它更健壮，请通过导入 urls 模块。

# javascript - 用 js 函数调用替换 href

> ID：10132141
> 
> 赞同：0
> 
> 时间：2012-04-12T21:28:28.013
> 
> 标签：javascript, regex, replace, href, appcelerator

我想用需要包含 url 的函数调用替换 href 中的 url。

示例：我有以下字符串：

```
<a href="www.google.com">Google</a>
some other text
<a href="www.wikipedia.org">Wikipedia</a> 
```

我想取回这样的字符串：

```
<a href="javascript:anyFunction('www.google.com');">Google</a>
some other text
<a href="javascript:anyFunction('www.wikipedia.org')">Wikipedia</a> 
```

我用 RegEx 测试了一些方法，但我对 RegEx 并不擅长。有没有人可以解决我的问题？

编辑：对不起，我忘了写。我正在构建一个应用程序应用程序。我不能使用 jQuery 或“文档”。我认为唯一的方法是正则表达式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T22:22:05.280

试试这个正则表达式：

```
/href="([^"]+)/g 
```

这是其用法示例（[JsFiddle Demo](http://jsfiddle.net/dJ9tB/)）

```
var subject = '<a href="www.google.com">Google</a>some other text<a href="www.wikipedia.org">Wikipedia</a>';
var result = subject.replace(/href="([^"]+)/g, 'href="javascript:anyFunction(\'$1\')'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T21:31:37.657

如果您提供您的`hrefs`唯一 ID，您可以这样做：

```
var val = $("#myHref").attr("href");
$("#myHref").attr("href", "javascript:anyFunction('"+val+"');"); 
```

如果您想避免使用唯一 ID，则可以这样做（适用于所有 a）：

```
​$("a").each(function() {
    var val = $(this).attr("href");
    $(this).attr("href", "javascript:anyFunction('"+val+"');");
});​​​ 
```

如果您想避免将此应用于所有href，您可以将所有要更改的href赋予一个类，然后使用这样的选择器：`$(".hrefToModify")...`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T21:33:52.033

新的：

如果您可以使用 javascript，那么您可以访问锚标记本身吗？如果是这样的话：

```
anchor_element.href = "javascript:anyFunction('" + anchor_element.href + "')"; 
```

老的：

```
<a id="link1" href="www.google.com">Google</a>
some other text
<a id="link2" href="www.wikipedia.org">Wikipedia</a>

<script>
document.getElementById('link1').addEventListener('click', function(e) {
    alert('hello');
    e.preventDefault();
    return false;
});
</script> 
```

# mahout - mahout 如何从数据库刷新？

> ID：10132147
> 
> 赞同：0
> 
> 时间：2012-04-12T21:28:57.433
> 
> 标签：mahout

我是使用 mahout 的新手。我想知道 mahout 如何刷新数据库中的数据，我的意思是，我不知道刷新函数是否执行“select .. from taste_preference”，或者是否对数据进行某种特殊选择，以便信息没有再次完全选择，因为最后一种方法不是很可扩展。我正在使用 ReloadFromJDBCDataModel 实现 (DataModel)、GenericItemSimilarity 实现(itemSimilarity) 和 GenericItemBasedRecommender (Recommender)。有人可以帮助我或告诉我在哪里可以找到此信息？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T15:30:09.973

SQL 语句存在于子类中，例如`MySQLJDBCDataModel`. 刷新确实涉及再次选择整个表，因为它需要重新加载所有数据。您应该只查看源代码以了解它的作用。

# javascript - 如何在 JQuery 中序列化 JSON 对象

> ID：10132152
> 
> 赞同：1
> 
> 时间：2012-04-12T21:29:14.170
> 
> 标签：javascript, jquery

我无法序列化 JSON 对象“数据”，如下所示。

```
<script type="text/javascript">

var myObj = {'first_name':{'answers':{'0':'John'}}};
var postdata = {'data':myObj};
$.post("get_note.php", postdata, function(data){
    $('#note').text(data);
});

</script> 
```

以下是文件 get_note.php 中的代码：

```
<?php

print_r($_POST['data']);
?> 
```

这导致以下内容被打印到#note 元素。

```
Array ( [first_name] => ) 
```

数组似乎是空的。我期待 PHP 文件中有一个多维数组。为什么是空的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T21:32:29.820

在客户端，您可以通过`JSON.stringify()`纯 javascript 进行序列化。在服务器上，您需要对`json_decode()`字符串执行 php。

所以在客户端：

```
var postdata = {'data':JSON.stringify(myObj)}; 
```

在服务器上：

```
$myObj = json_decode(htmlspecialchars_decode($_POST['data']),true); 
```

参考：

js JSON.stringify(): [http://www.json.org/js.html](http://www.json.org/js.html)

php json_decode()：[http ://php.net/manual/en/function.json-decode.php](http://php.net/manual/en/function.json-decode.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T21:38:17.867

您可以尝试发送一个序列化的 JSON 数组并在服务器端对其进行解密。

要序列化 ​​JSON 数组，请使用以下命令：

```
var my_json_array = { index: 11 };
JSON.stringify(my_json_array); 
```

然后在服务器端，您可以将其转换（解码）为 PHP 数组，如下所示：

```
$json = $_POST["my_json_array"];
$my_array = json_decode($json); 
```

所以你的代码会变成这样：

```
<script type="text/javascript">

var data = {'first_name':{'answers':{'0':'John'}}};
var postdata = {'data':JSON.stringify(data)};
$.post("get_note.php", postdata, function(data){
    $('#note').text(data);
});

</script> 
```

和

```
<?php

print_r(json_decode($_POST['data']));
?> 
```

* * *

怎么说呢，这个解决方案适用于旧浏览器的新浏览器（支持原生 JSON），这个解决方案将不起作用。

有关浏览器中 JSON 支持的更多信息，您可以在此处阅读：

[http://en.wikipedia.org/wiki/JSON#Native_encoding_and_decoding_in_browsers](http://en.wikipedia.org/wiki/JSON#Native_encoding_and_decoding_in_browsers)

# php - PHP中的XTEA加密和C中的解密

> ID：10132153
> 
> 赞同：2
> 
> 时间：2012-04-12T21:29:20.380
> 
> 标签：php, c++, c, encryption, arduino

我正在尝试在网站和 Arduino 之间建立通信。我需要对从我的网站到 Arduino 的所有消息进行身份验证，因此我发现使用[XTEA](http://en.wikipedia.org/wiki/XTEA)密码学是一种更省时的方法。

我的网站 PHP 代码是：

```
mcrypt_encrypt(MCRYPT_XTEA, 'qwertyuiasdfghjk', 'asdfasdf', MCRYPT_MODE_ECB); 
```

其中“qwertyuiasdfghjk”是 128 位密钥，“asdfasdf”是 64 位消息。

在 Arduino 方面，我正在使用：

```
void _xtea_dec(void* dest, const void* v, const void* k)
{
    uint8_t i;
    uint32_t v0=((uint32_t*)v)[0], v1=((uint32_t*)v)[1];
    uint32_t sum=0xC6EF3720, delta=0x9E3779B9;
    for(i=0; i<32; i++)
    {
        v1 -= ((v0 << 4 ^ v0 >> 5) + v0) ^ (sum + ((uint32_t*)k)[sum>>11 & 3]);
        sum -= delta;
        v0 -= ((v1 << 4 ^ v1 >> 5) + v1) ^ (sum + ((uint32_t*)k)[sum & 3]);
    }
    ((uint32_t*)dest)[0]=v0; ((uint32_t*)dest)[1]=v1;
} 
```

其中参数是：

```
char dest[9]; //Destination
char v[9]; //Encrypted message
char k[17]; //Key 
```

但我解密的消息与原始消息相去甚远......它仍然有64位，但它完全不同......

我该怎么办？

（这是我第一次在这里提出问题，通常我所有的问题都在 Stack Overflow 的某个地方解决了......）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T06:31:40.147

很可能您的密码密钥不同。确保它们在两端相同。

C：

```
 // "annoying monkey"
  uint32_t key[4] = {0x6f6e6e61, 0x676e6979, 0x6e6f6d20, 0x0079656b }; 
```

PHP：

```
 mcrypt_encrypt(MCRYPT_XTEA, 'annoying monkey', 'data', MCRYPT_MODE_ECB); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T06:40:20.283

据我记得，XTEA 规范没有提供测试向量，而且您的代码似乎并不关心[字节顺序](http://en.wikipedia.org/wiki/Endianness)。很可能这是假设/处于错误字节序的密钥或数据的问题。看`mcrypt_encrypt`PHP源码中函数的实现。

# c# - 使用 ILMerge 后未找到 DLL

> ID：10132154
> 
> 赞同：0
> 
> 时间：2012-04-12T21:29:27.183
> 
> 标签：c#, .net, unmanaged, managed, ilmerge

在使用 SQLite 在某些机器上造成严重破坏后，我的头好几次了，我偶然发现了该库的“仅限托管”版本。[http://sourceforge.net/projects/sqlite-dotnet2/files/SQLite%20for%20ADO.NET%202.0/1.0.66.0/](http://sourceforge.net/projects/sqlite-dotnet2/files/SQLite%20for%20ADO.NET%202.0/1.0.66.0/)

我很兴奋并将其放入我的项目文件夹中，所以现在我的项目可以在每个人的计算机上运行，​​无论架构如何！

事实上，我非常兴奋，以至于我决定再次尝试使用 ILMerge（因为我的所有依赖项现在都得到了管理），而不是必须将 DLL 文件作为资源复制并在检测到它们不存在时将它们写入输出文件夹。

我使用以下命令编译了 EXE：

`ilmerge.exe /target:winexe /zeroPeKind /out:"Core View.exe" CoreView.exe System.Data.SQLite.dll OpenHardwareMonitorLib.dll`

（该`zeroPeKind`标志是必需的，因为尽管 SQLite 是托管的，但它没有被标记为这样，如果`zeroPeKind`不存在，则会导致编译错误）

现在的问题是，虽然它启动得很好，但当 DLL 文件不存在时尝试执行任何数据库操作时出现以下错误：

`System.DllNotFoundException: Unable to load DLL 'System.Data.SQLite.DLL'`

我可以轻松解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T13:30:54.620

这是我所知道的唯一一个完全托管的 sqlite3 库。

[http://code.google.com/p/csharp-sqlite/](http://code.google.com/p/csharp-sqlite/)

# facebook - 我可以检查用户是否是 facebook 以外页面的粉丝吗？

> ID：10132155
> 
> 赞同：0
> 
> 时间：2012-04-12T21:29:27.497
> 
> 标签：facebook, facebook-graph-api, facebook-fql

我之前在 facebook 选项卡上的 iframe 中“扇门”，但我正拼命尝试从不在 facebook 框架内的外部网站“扇门”。我们希望用户“喜欢”我们客户的 Facebook 页面，以便为他们的产品打印优惠券。所有不同的方法都让我头晕目眩，我感觉好像我已经尝试了三遍！

你不必告诉我怎么做，但有人知道：

1.  甚至可以在 facebook iframe 之外执行此操作？
2.  我需要采用什么方法来实现它？（图形 API、FQL 等）

非常感谢你们可以为我提供的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T21:41:23.413

这是不可能的。不确定到目前为止您尝试了哪些方法，但最好的办法是拥有与您所要求的功能相似的功能：

1.  引导（即深层链接）用户到客户 FB 页面上的扇形选项卡
2.  在用户喜欢该页面后，生成一个独特的链接，将用户重定向到持有优惠券的外部网站上的页面。
3.  链接被点击后过期，其他人无法使用。或者，您可以尝试将唯一链接绑定到用户机器上的 cookie（或类似的东西）。
4.  修改外部网站，使任何人都可以直接链接到优惠券，而无需通过这个扇门过程。

不是世界上最好的用户流，但这是我能想到的唯一方法。相信我，我已经试过了。=)

# jquery - 在 $("#textbox").val() 调用之前解码文本？

> ID：10132157
> 
> 赞同：2
> 
> 时间：2012-04-12T21:29:31.770
> 
> 标签：jquery, textbox, decode, encode

我的网页对服务器进行 AJAX 调用并在浏览器中显示结果。结果的内容将经常包含用户在 AJAX 请求中提交的文本字符串的一部分。因此，如果用户`<script>`输入他的查询，返回的输出也可能包含该短语`<script>`。但是，服务器在发送响应之前对其进行编码，因此返回的短语实际上将被接收为`&lt;script&gt;`

这一切都很好。脚本漏洞被移除，浏览器`<script>`在显示响应时正确显示。

问题是当我想获取返回值并将其填充到文本框中时。考虑：

```
$(“#someTextBox”).val(“&amp;lt;script&gt;”); 
```

文本框的内容以编码形式 (ie `&lt;script&gt;`) 而不是解码形式 (ie `<script>`) 显示。

问题：

[1] 如何在调用 val() 之前解码值？

[2] 我这样做是否会引入安全漏洞？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T21:36:37.383

很可能是一种更直接的方法，但似乎得到了预期的结果。

[http://jsfiddle.net/ZPLTc/](http://jsfiddle.net/ZPLTc/)

更多信息在这里（我得到概念的地方）[http://debuggable.com/posts/encode-html-entities-with-jquery:480f4dd6-13cc-4ce9-8071-4710cbdd56cb](http://debuggable.com/posts/encode-html-entities-with-jquery:480f4dd6-13cc-4ce9-8071-4710cbdd56cb)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T21:38:11.950

您可以使用“替换”将 HTML 实体更改为“<”和“>”：[https](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/replace) ://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/replace 。只要您只使用文本框中的字符串，这不会引入漏洞。如果将其放入 div 或输入框以外的任何内容，标签将被暴露。

# c++ - Bison将C函数指针作为函数调用？

> ID：10132158
> 
> 赞同：2
> 
> 时间：2012-04-12T21:29:44.287
> 
> 标签：c++, c, parsing, bison, lexer

如果前瞻标记是给定值，是否有办法指定 Bison 规则不匹配？

我目前有以下野牛语法（简化）：

```
var_decl:
        type ident
        {
            $$ = new NVariableDeclaration(*$1, *$2);
        } |
        type ident ASSIGN_EQUAL expr
        {
            $$ = new NVariableDeclaration(*$1, *$2, $4);
        } |
        type CURVED_OPEN STAR ident CURVED_CLOSE CURVED_OPEN func_decl_args CURVED_CLOSE
        {
            $$ = new NVariableDeclaration(*(new NFunctionPointerType(*$1, *$7)) /* TODO: free this memory */, *$4);
        } |
        type CURVED_OPEN STAR ident CURVED_CLOSE CURVED_OPEN func_decl_args CURVED_CLOSE ASSIGN_EQUAL expr
        {
            $$ = new NVariableDeclaration(*(new NFunctionPointerType(*$1, *$7)) /* TODO: free this memory */, *$4, $10);
        } ;

...

deref:
        STAR ident
        {
            $$ = new NDereferenceOperator(*$<ident>2);
        } |

...

type:
        ident
        {
            $$ = new NType($<type>1->name, 0, false);
            delete $1;
        } |
        ... ;

...

expr:
        deref
        {
            $$ = $1;
        } |
        ...
        ident
        {
            $<ident>$ = $1;
        } |
        ...
        ident CURVED_OPEN call_args CURVED_CLOSE
        {
            $$ = new NMethodCall(*$1, *$3);
            delete $3;
        } |
        ...
        CURVED_OPEN expr CURVED_CLOSE
        {
            $$ = $2;
        } ;

...

call_args:
        /* empty */
        {
            $$ = new ExpressionList();
        } |
        expr
        {
            $$ = new ExpressionList();
            $$->push_back($1);
        } |
        call_args COMMA expr
        {
            $1->push_back($3);
        } ; 
```

问题是解析时：

```
void (*ident)(char* some_arg); 
```

它看到 void (*ident) 并推断它必须是函数调用而不是函数声明。 **有没有办法我可以告诉 Bison，它应该倾向于向前看以匹配 var_decl 而不是将 *ident 和 void 减少为 derefs 和 exprs？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T22:15:08.597

> 任何标识符都可以是类型

这正是问题所在。用于类 C 语言（或具有类 C 类型语法的语言）的 LALR(1) 语法需要在标记级别区分类型和其他标识符。也就是说，您需要 IDENT 和 TYPEIDENT 是两个不同的标记。（您必须将有关标识符的数据从编译器反馈给标记器）。这是消除其他模棱两可的语法的最标准方法。

**更新**例如，请参阅[Yacc 的这个 ANSI C 语法](http://www.lysator.liu.se/c/ANSI-C-grammar-y.html)。

# arrays - Matlab中的自定义排序数组

> ID：10132161
> 
> 赞同：4
> 
> 时间：2012-04-12T21:30:16.057
> 
> 标签：arrays, matlab

我有一个包含负数和正数的双精度值数组（例如。`-2.5 -4 -6 0 1 -2.4 3 7.1 5 -1`）。我想将其排序为较小的连续正数和负数
数组，因此从上面的数组中，id 喜欢创建`[-2.5 -4 -6 ] [1] [-2.4] [3 7.1 5] [-1]`.

我如何在 Matlab 中实现这个

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T21:37:15.323

这是一种方法：

```
>> A = [-2.5 -4 -6 0 1 -2.4 3 7.1 5 -1];
>> cellSizes = diff([0 find(diff(A >= 0)) numel(A)]);
>> B = mat2cell(A, 1, cellSizes)

B = 

    [1x3 double]    [1x2 double]    [-2.4000]    [1x3 double]    [-1] 
```

您首先获得一个`A`大于或等于 0 的逻辑数组。然后使用[DIFF](http://www.mathworks.com/help/techdoc/ref/diff.html)和[FIND](http://www.mathworks.com/help/techdoc/ref/find.html)获得逻辑数组从 0 变为 1 或 1 变为 0 的索引。在该数组的前面添加一个零，即长度到`A`最后，然后再次取差，得到每个正段或负段的大小。[最后，您可以使用函数MAT2CELL](http://www.mathworks.com/help/techdoc/ref/mat2cell.html)将数组分解为较小数组的元胞数组。

# ssh - 如何为来自不同帐户的无密码设置 ssh

> ID：10132163
> 
> 赞同：0
> 
> 时间：2012-04-12T21:30:26.500
> 
> 标签：ssh, rsync

我想在没有密码的情况下从 user1@machine1.com ssh 到 user2@machine2.com。

我可以使用密码来做到这一点。

使用 ssh-keygen 在 machine1.com 上设置 ~user1/.ssh/id_rsa 并在 machine2.com 上设置 ~user1/.ssh/authorized_keys，使用 ssh 手册页中的说明，我可以从 machine1.com 上的 user1 开始“ ssh user1@machine2.com”没有任何密码。但是我无法使用相同的设置过程在没有密码的情况下登录，尽管将目标 user2 替换为 user1，即 machine1.com 上的 user1 “ssh user2@machine2.com”在没有密码的情况下无法工作。

我找到的执行此操作的说明似乎表明我需要 machine1.com 上的 user2 帐户来设置密钥，然后将它们适当地复制到 machine1.com 上的 user1 帐户和 machine2.com 上的 user2 上。是这样吗？是否可以使用帐户 user1 在 machine1.com 上生成必要的密钥以登录 machine2.com 上的 user2？

更新：我已经使用第三台计算机 machine3.com 而不是 machine2.com 进行了尝试，它可以按需要工作。我在网上发现了几篇具有相同普遍问题但没有任何解决方案的帖子。任何 WAG 可能是什么问题？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T21:50:50.227

您可以将复制到 ~user1/.ssh/authorized_keys 中的相同数据复制到 machine2 上的 ~user2/.ssh/authorized_keys 中，因此您基本上可以为两个帐户重复使用相同的密钥。由您决定这是否是一个好主意。

但是，您也可以生成第二个密钥，但是您必须在命令行上明确指定要用于从 machine1 授权的密钥文件。

# java - Android 中的光标 NotSerializableException

> ID：10132166
> 
> 赞同：0
> 
> 时间：2012-04-12T21:30:32.350
> 
> 标签：java, android, serialization, cursor

我需要将 Cursor 对象从一个 android 模拟器传递到另一个。但是当我尝试序列化它时，我收到“NotSeraliableException：android.database.sqlite.SQLiteCursor”错误。

我知道处理这个问题的一种方法是拆除可序列化的类并序列化（在一个模拟器上），反序列化和重建 Cursor 对象（在另一个模拟器上）。

没有其他方法可以做到这一点吗？我在看 Parcelable，我不确定这是否是我想要的。任何指针将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T22:01:57.393

这在地狱里是不可能奏效的。游标基本上是数据库内容的视图。

你到底想做什么？您如何尝试在模拟器之间传递数据？您可能希望将光标中的数据放入可序列化的东西中，例如地图。

# javascript - 在运行一些 Javascript 之前检查是否存在 DIV

> ID：10132168
> 
> 赞同：1
> 
> 时间：2012-04-12T21:30:36.610
> 
> 标签：javascript, jquery

我遇到了一个问题，在博客上，我在下面有这段 javascript 代码，用于获取 DIV id 的 Position `author-info`。问题是这个 div 只在实际的文章页面上，而不是在任何目录页面或索引上。

因此，在这些没有 div 的页面上，我收到此错误

```
Uncaught TypeError: Cannot read property 'top' of null 
```

这是导致错误的javascript

```
var commentsPos = $('#author-info').offset().top - $(window).height(); 
```

我知道我可以在后端这样做，只在正确的页面上显示那行 JS，但我想避免这种情况，因为这只是页面中包含的更大的 javascript 文件的 1 行。

我在这里有什么选择？请提供任何帮助，我假设我需要在调用此操作之前以某种方式检查页面上是否存在此 div？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T21:32:48.430

您可以检查 DOM 元素是否存在，然后执行 jQuery

```
if( document.getElementById('author-info') != null )
{
 var commentsPos = $('#author-info').offset().top - $(window).height();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T21:33:38.120

```
var $authInfo = $('#author-info');

if($authInfo.length > 0){
    var commentsPos = $authInfo.offset().top - $(window).height();
} 
```

# java - 显示通话拨号盘 - 通话期间拨打号码 - DTMF

> ID：10132169
> 
> 赞同：9
> 
> 时间：2012-04-12T21:30:37.360
> 
> 标签：java, android, android-intent, dtmf

我想在接听电话后拨打一个号码，通常由通话拨号盘完成。

我尝试了以下方法，但它开始拨打新电话（ACTION_VIEW 也是如此）。

```
Intent dial = new Intent(Intent.ACTION_DIAL);
dial.setData(Uri.parse("tel:9"));
startActivity(dial); 
```

我的猜测是“tel：”会触发一个新的拨号序列。我可能需要的是显示通话拨号盘并模拟击键。

任何人？

编辑：我发现了这个问题 [开始 InCallScreen 活动](https://stackoverflow.com/questions/7637141/starting-the-incallscreen-activity) ，这让我认为我只需要向 'com.android.phone.InCallScreen' 发送一个 keydown 事件，但我不知道该怎么做。这也是一个直接相关的问题，已经（并且仍然）开放多年： [http ://code.google.com/p/android/issues/detail?id=1428](http://code.google.com/p/android/issues/detail?id=1428)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T22:02:37.537

没有。触发新呼叫的不是 tel:，而是您正在创建一个新 Intent，然后运行 ​​startActivity(dial);

想想这意味着什么：您正在开始一个全新的活动，因此它无法与您之前的代码正在使用的与电话相关的活动进行交互。

我认为你真正想做的是在你拨号的末尾添加一个号码。为此，您需要在 URI 数据中输入整个数字以及一个暂停字符 (p)，然后使用 ACTION_CALL。代码：

```
Intent dial = new Intent(Intent.ACTION_CALL);
dial.setData(Uri.parse("tel:7195555555ppp9"));
startActivity(dial); 
```

我做了三个停顿，你应该根据需要多长时间来调整。或者，使用等待字符 (w)，但这似乎需要用户确认才能发送额外的数字。

# php - 使用 explode() 或 preg_split() 将数组元素中的字符串拆分为数组

> ID：10132179
> 
> 赞同：1
> 
> 时间：2012-04-12T21:31:33.287
> 
> 标签：php, string, preg-split

我有一个数组，每个元素都是这样的字符串：

```
$items[0] = "*1*x *2858* in *1* with selected image to print at *http://mysite.com/test.jpg*" 
```

和

```
$items[1] = "*2*x *2353* in *2* with selected image to print at *http://mysite.com/test1.jpg*" 
```

如何将此数组元素拆分为二维数组，使其变为：

```
$items[0][quantity] == 1
$items[0][product_id] == 2858
$items[0][variation} == 1
$items[0][selectedImageUrl] == "http://mysite.com/test.jpg" 
```

和

```
$items[1][quantity] == 2
$items[1][product_id] == 2353
$items[1][variation} == 2
$items[1][selectedImageUrl] == "http://mysite.com/test1.jpg" 
```

非常感谢你的帮助！

* * *

@卡尔

这就是我在应用您的代码时所拥有的。

我将它应用于我的情况，这就是我所拥有的：

```
function parse_my_str($str){
  $bits = explode(' ', $str);
  $out['selectedImageUrl'] = array_pop($bits);
  $out['product_id'] = $bits[1];
  $out['variation'] = $bits[3];
  $bits = explode('*', $str);
  $out['quantity'] = $bits[1];
  return $out;
}

$items = explode("||", $_SESSION['mp_shipping_info']['special_instructions']); 
foreach ($items as $i => $v) {
    $items[$i] = parse_my_str($v);
    print_r($items[$i]);
} 
```

但我有

```
Array ( [selectedImageUrl] => *http://youparkrudely.com/files/2012/04/2011-Aston-Martin-Rapide-026.jpg* [product_id] => *2858* [variation] => *1* [quantity] => 1 ) Array ( [selectedImageUrl] => [product_id] => [variation] => [quantity] => ) 
```

* * *

@卡尔

```
 Array ( 
[selectedImageUrl] => *http://youparkrudely.com/files/2012/04/2011-Aston-Martin-Rapide-026.jpg* 
[product_id] => *2858* 
[variation] => *1* 
[quantity] => 1 ) 
Array ( [selectedImageUrl] => [product_id] => [variation] => [quantity] => ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T21:36:03.843

更新了新字符串，`preg_match()`改为使用：

```
$str = "*1*x *2858* in *1* with selected image to print at *http://mysite.com/test.jpg*";
$arr = parse_my_str($str);
print_r($arr);

function parse_my_str($str){
  preg_match_all('!\\*(.*?)\\*!', $str, $m);
  return array(
    'quantity' => $m[1][0],
    'product_id' => $m[1][1],
    'variation' => $m[1][2],
    'selectedImageUrl' => $m[1][3],
  );
} 
```

对于您的示例，您将使用如下函数：

```
foreach ($items as $k => $v) $items[$k] = parse_my_str($v); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T21:54:08.217

您可以使用`preg_match()`解决方案和正则表达式。不确定我是否完全匹配，但这是一个简单的例子。

```
// Regular Expression
$pattern = '/^\*(\d+)\*x (\d+) in (\d+) with selected image to print at (.+)$/';
preg_match( $pattern, $string, $matches ); 
```

如果你`var_dump()` `$matches`得到这个：

```
array(5) {
[0]=> string(74) "*2*x 2353 in 2 with selected image to print at http://mysite.com/test1.jpg" 
[1]=> string(1) "2" 
[2]=> string(4) "2353" 
[3]=> string(1) "2" 
[4]=> string(27) "http://mysite.com/test1.jpg" 
} 
```

您将不得不遍历您的项目数组。

```
foreach ( $array as $key => $value ) :

    preg_match( $pattern, $value, $matches );

    $items[$key]['quantity'] = $matches[1];
    $items[$key]['product_id'] = $matches[2];
    $items[$key]['variation'] = $matches[3];
    $items[$key]['selectedImageURL'] = $matches[4];

endforeach; 
```

我还建议使用自定义功能。

如果你需要一些关于正则表达式的帮助，我建议从这里开始：[http ://www.regular-expressions.info/](http://www.regular-expressions.info/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T21:36:38.273

```
<?php
$items[0] = "*1*x 2858 in 1 with selected image to print at http://mysite.com/test.jpg";
$items[1] = "*2*x 2353 in 2 with selected image to print at http://mysite.com/test1.jpg";

foreach ($items as $key=>$item){
    $temp = explode(" ", $item);
    $items[$key] = array();
    $items[$key]['quantity'] = $temp[0];
    $items[$key]['product_id'] = $temp[1];
    $items[$key]['variation'] = $temp[3];
    $items[$key]['selectedImageURL'] = $temp[10];
}

print_r($items); 
```

沿着这些思路的东西应该起作用。当然，假设您的数量和变化保持不变。

# iphone - 自定义 UINavigationBar 在顶部偏移 1 个像素

> ID：10132187
> 
> 赞同：0
> 
> 时间：2012-04-12T21:32:08.717
> 
> 标签：iphone, ios, uiview, uinavigationbar

我有一个子类 UINavigationBar ，我在其中覆盖 drawRect 以提供具有透明度的 png 作为背景。一切都按预期工作，除了栏顶部的 1 像素空间（我可以看到底层地图在空间中移动）。

[截屏](https://i.imgur.com/hvooz.png)

我唯一能找到的是这个问题，这听起来像我的问题，但我不知道该怎么解释：[UINavigationBar 上方 1 个像素的空白空间](https://stackoverflow.com/questions/7818982/empty-space-of-1-pixel-above-uinavigationbar)

我已验证 PNG 文件在图像顶部没有 1 个像素的透明度。
在子类 UINavigationBar 中覆盖：

```
- (void)drawRect:(CGRect)rect { 

[_bg drawInRect:CGRectMake(0, 0, _bg.size.width, _bg.size.height)];
// showing correct bounds - drawRect: 0.000000, 0.000000, 320.000000, 85.000000
NSLog(@"drawRect: %f, %f, %f, %f",  rect.origin.x, 
                                    rect.origin.y, 
                                    rect.size.width, 
                                    rect.size.height); 
```

}

```
- (CGSize)sizeThatFits:(CGSize)size {
CGRect frame = [[UIScreen mainScreen] applicationFrame];
CGSize sz = CGSizeMake(frame.size.width, _bg.size.height);
NSLog(@"sizefits");
return sz; 
```

}

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T14:17:05.980

尽管我使用 UIAppearance 代理来设置自定义背景图像而不是覆盖 drawRect:，但我的自定义导航栏也遇到了同样的问题。这是我在根视图控制器上的 viewWillAppear: 中的快速修复：

```
// Make sure nav bar is flush with status bar (iOS 5 iPhone portrait somehow gives status bar height 20 and nav bar y 20.5, so we miss a pixel).
CGRect navBarFrame = self.navigationController.navigationBar.frame;
navBarFrame.origin.y = [UIApplication sharedApplication].statusBarFrame.size.height;
self.navigationController.navigationBar.frame = navBarFrame; 
```

# android - 更改文件权限：/system/etc/bluetooth/audio.config

> ID：10132201
> 
> 赞同：0
> 
> 时间：2012-04-12T21:33:01.393
> 
> 标签：android, samsung-mobile

我使用带有 Android v2.2.2 的三星 Dart - SGH-T499。现在我需要编辑 /system/etc/bluetooth/audio.config 文件。为此，我使用 SuperOneClickv2.3.3-ShortFuse 将手机植根。并使用 Root Explorer 浏览文件系统。但我无法编辑 audio.config 的权限。请你帮助我好吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T00:50:54.953

您还需要确保该`/system`目录（因为它是一个文件系统）是以读写方式安装的。在`adb shell`使用`-o rw,remount`作为参数的 mount 命令来执行此操作。首先，您需要确定特定文件系统存储在什么（硬件/物理/逻辑）设备上 - 单独使用该`mount`命令查看列表并选择具有`/system`作为其挂载点的设备。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T22:15:12.250

你能不发出一个

```
chmod 777 /system/etc/bluetooth/audio.config 
```

...来自 adb 外壳？

# javascript - 使用 jQuery 更改文本区域值

> ID：10132205
> 
> 赞同：12
> 
> 时间：2012-04-12T21:33:32.533
> 
> 标签：javascript, jquery, html

如何通过 jQuery 更改文本区域的值。这是一个示例：

```
var content = "Hello World";
//Code to set the value of the 
text area to content here. 
```

我将如何通过 jQuery 或仅通过 javascript 来做到这一点？感谢您的回答，谢谢。我试过这个：

```
var txtArea = document.getElementById('aTextArea');
txtArea.value = rolls; 
```

然而，这只是在黑暗中的一个镜头。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-12T21:36:20.897

假设您的 textarea 为

```
<textarea id="textarea" rows="4" cols="50">
   sample textarea
</textarea>​​​​​​ 
```

更新 textarea 值的 jquery 代码将是

```
 ​$(document).ready(function(){
    var content = "Hello World";
    $("#textarea").val(content);
});​ 
```

jsfiddle：http: [//jsfiddle.net/bhatlx/PuWH4/1/](http://jsfiddle.net/bhatlx/PuWH4/1/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-12T21:37:38.413

**jQuery**

使用 jQuery，您也可以[`.val("Your new value")`](http://api.jquery.com/val/)在 textareas 上使用，即使 HTML 元素没有值属性。

```
$(function(){
   $("#id-of-textarea").val("test");
});​ 
```

示例：http: [//jsfiddle.net/sfxTt/](http://jsfiddle.net/sfxTt/)

**纯 JavaScript**

使用普通的 JS，可以这样做：

```
document.getElementById('id-of-textarea').value = "Hello"; 
```

示例：http: [//jsfiddle.net/sfxTt/1/](http://jsfiddle.net/sfxTt/1/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-19T11:34:15.750

```
jQuery("textarea[name='message_text_reply']").val('Holla') 
```

这对我来说非常有效，输入属性名称是`message_text_reply`，该`$("#message_text_reply")`选项不起作用。

# c# - Hierarchyid 数据类型和代码优先

> ID：10132207
> 
> 赞同：4
> 
> 时间：2012-04-12T21:33:41.580
> 
> 标签：c#, .net, entity-framework, ef-code-first

我需要做的是，我在 sql server 中有一个使用 HierarchyID 数据类型的注释表，并希望将其映射到 Code First/EF 4.3 类。我怎样才能做到这一点？

另外，在插入/删除时如何与 hierarchyID 交互。非常感谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-15T18:15:38.543

这可能是[实体框架中的 HierarchyID 的副本不起作用](https://stackoverflow.com/questions/4316069/hierarchyid-in-entity-framework-not-working)

EF 不支持该数据类型[http://thedatafarm.com/blog/data-access/sql-server-2008-data-types-and-entity-framework-4/](http://thedatafarm.com/blog/data-access/sql-server-2008-data-types-and-entity-framework-4/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T18:13:05.727

我不习惯数据类型，但我进行了一些调查。

似乎这种类型仅在本机和托管 CLR 中的 SQL Server 内受支持。将其移出需要将其转换为字符串（请参阅[此处的数据类型转换部分](http://msdn.microsoft.com/en-us/library/bb677290%28v=sql.100%29.aspx)）。

我认为唯一的方法是在数据库中创建一个视图，`hierarchyid`将`nvarchar(4000)`. 要使其可更新，您可以为该视图定义一组插入/更新/删除触发器，或者创建一组相应的存储过程并将它们映射到 EF 上下文。我不记得 EF Code First 是否能够使用 SP 进行修改操作，但可更新的视图应该没问题，因为它看起来像一个普通的表。

希望这可以帮助。

# php - PHP：迭代两个并行数组的最佳方法？

> ID：10132210
> 
> 赞同：8
> 
> 时间：2012-04-12T21:33:49.107
> 
> 标签：php, loops, iteration

正如[在另一个答案中](https://stackoverflow.com/questions/5641619/can-i-iterate-through-two-loops-of-equal-size-with-foreach)所见，有几种方法可以同时迭代两个相同大小的数组；然而，所有这些方法都有一个相当大的缺陷。以下是建议方法的一些注意事项：

*   您不能`FALSE`在其中一个数组中使用值。
*   您只能在其中一个数组中使用标量值。
*   您必须使用数字索引数组。
*   两个数组必须共享相同的键。
*   等等。

我的问题是 -*有没有一种方法可以不受这些（或其他）重大警告的影响？*

请记住，我只是出于好奇而问这个问题；我没有考虑用例，我什至不知道这种情况是否真的存在，或者在现实世界的场景中是否有用/实用。但是，这里有一些示例数据：

```
$arr1 = [ 'a' => 1, 'b' => FALSE, 'c' => new DateTime() ];
$arr2 = [ 'foo', TRUE, 7 ]; 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-04-12T21:44:48.833

您可以使用[`MultipleIterator`](http://php.net/MultipleIterator)：

```
$iterator = new MultipleIterator;
$iterator->attachIterator(new ArrayIterator($array1));
$iterator->attachIterator(new ArrayIterator($array2));

foreach ($iterator as $values) {
    var_dump($values[0], $values[1]);
} 
```

[您可以在文档](http://php.net/manual/en/multipleiterator.construct.php#refsect1-multipleiterator.construct-examples)中找到有关各种选项的更多示例。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-08-19T18:48:14.940

从 PHP 5.5 开始，您可以这样做：

```
foreach (array_map(null, $array1, $array2) as list($item1, $item2))
{
    var_dump($item1);
    var_dump($item2);
} 
```

[http://us3.php.net/manual/en/control-structures.foreach.php#control-structures.foreach.list](http://us3.php.net/manual/en/control-structures.foreach.php#control-structures.foreach.list)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T21:53:56.563

```
<?php

$arr1 = array( 'a' => 1, 'b' => FALSE, 'c' => new DateTime() );
$arr2 = array( 'foo', TRUE, 7, 5 );

reset($arr1);
reset($arr2);    

while ( (list($key, $val) = each($arr1))
    && (list($key2, $val2) = each($arr2))
) {
    var_dump($val,$val2);
    // or whatever you wanted to do with them
} 
```

[http://www.php.net/manual/en/function.each.php](http://www.php.net/manual/en/function.each.php)

# android - 抱歉，应用程序已意外停止 android

> ID：10132212
> 
> 赞同：1
> 
> 时间：2012-04-12T21:33:55.647
> 
> 标签：android

有人可以告诉我如何解决我的问题吗？我正在构建我的第一个 android 应用程序，下面是我在模拟器中启动应用程序时得到的错误代码。

谢谢

```
04-12 21:07:03.480: D/AndroidRuntime(327): Shutting down VM
04-12 21:07:03.480: W/dalvikvm(327): threadid=1: thread exiting with uncaught exception(group=0x40015560)
04-12 21:07:03.580: E/AndroidRuntime(327): FATAL EXCEPTION: main
04-12 21:07:03.580: E/AndroidRuntime(327): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{obd.gss.namespace/obd.gss.namespace.activity.Gssobdreadermainactivity}: java.lang.ClassNotFoundException: obd.gss.namespace.activity.Gssobdreadermainactivity in loader dalvik.system.PathClassLoader[/data/app/obd.gss.namespace-1.apk]
04-12 21:07:03.580: E/AndroidRuntime(327):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1569)
04-12 21:07:03.580: E/AndroidRuntime(327):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
04-12 21:07:03.580: E/AndroidRuntime(327):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
04-12 21:07:03.580: E/AndroidRuntime(327):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
04-12 21:07:03.580: E/AndroidRuntime(327):  at android.os.Handler.dispatchMessage(Handler.java:99)
04-12 21:07:03.580: E/AndroidRuntime(327):  at android.os.Looper.loop(Looper.java:123)
04-12 21:07:03.580: E/AndroidRuntime(327):  at android.app.ActivityThread.main(ActivityThread.java:3683)
04-12 21:07:03.580: E/AndroidRuntime(327):  at java.lang.reflect.Method.invokeNative(Native Method)
04-12 21:07:03.580: E/AndroidRuntime(327):  at java.lang.reflect.Method.invoke(Method.java:507)
04-12 21:07:03.580: E/AndroidRuntime(327):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
04-12 21:07:03.580: E/AndroidRuntime(327):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
04-12 21:07:03.580: E/AndroidRuntime(327):  at dalvik.system.NativeStart.main(Native Method)
04-12 21:07:03.580: E/AndroidRuntime(327): Caused by: java.lang.ClassNotFoundException: obd.gss.namespace.activity.Gssobdreadermainactivity in loader dalvik.system.PathClassLoader[/data/app/obd.gss.namespace-1.apk]
04-12 21:07:03.580: E/AndroidRuntime(327):  at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:240)
04-12 21:07:03.580: E/AndroidRuntime(327):  at java.lang.ClassLoader.loadClass(ClassLoader.java:551)
04-12 21:07:03.580: E/AndroidRuntime(327):  at java.lang.ClassLoader.loadClass(ClassLoader.java:511)
04-12 21:07:03.580: E/AndroidRuntime(327):  at android.app.Instrumentation.newActivity(Instrumentation.java:1021)
04-12 21:07:03.580: E/AndroidRuntime(327):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1561)
04-12 21:07:03.580: E/AndroidRuntime(327):  ... 11 more 
```

以下是我的清单的内容：

```
<uses-sdk android:minSdkVersion="10" />

<uses-permission android:name="android.permission.INTERNET"></uses-permission>
<uses-permission android:name="android.permission.BLUETOOTH"></uses-permission>
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"></uses-permission>
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"></uses-permission>
<uses-permission android:name="android.permission.ACCESS_LOCATION_EXTRA_COMMANDS"></uses-permission>
<uses-permission android:name="android.permission.ACCESS_MOCK_LOCATION"></uses-permission>
<uses-permission android:name="android.permission.CONTROL_LOCATION_UPDATES"></uses-permission>
<uses-permission android:name="android.permission.WAKE_LOCK"></uses-permission>
<application
  android:icon="@drawable/icon"
  android:label="@string/app_name">

    <activity android:name=".Activity.Gssobdreadermainactivity"
              android:label="@string/app_name"
              android:screenOrientation="portrait"
              android:launchMode="singleInstance">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity android:name=".Activity.Gssobdreaderconfigactivity"
              android:label="@string/app_name">
    </activity>
    <activity android:name=".activity.Gssobdreadercommandactivity"
              android:label="@string/app_name"
              android:screenOrientation="portrait">
    </activity>
    <service android:name="io.GssobdReaderService"/>
</application> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T21:38:51.717

你的问题的原因是：

```
java.lang.ClassNotFoundException: obd.gss.namespace.activity.Gssobdreadermainactivity 
```

您是否忘记将您的活动添加到清单中？

您的清单应类似于：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="obd.gss.namespace"
    android:versionCode="1"
    android:versionName="1.0" >
 <!-- permissions and other stuff here -->
<application
  android:icon="@drawable/icon"
  android:label="@string/app_name">

    <activity android:name=".activity.Gssobdreadermainactivity"
              android:label="@string/app_name"
              android:screenOrientation="portrait"
              android:launchMode="singleInstance">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
<!--more activities and services here -->
</application>
</manifest> 
```

请注意，清单标签的 package 属性和活动标签的 name 属性的组合应该与您的类的完全限定名称完全相同。使用我上面的例子，你会得到：

```
obd.gss.namespace.activity.Gssobdreadermainactivity 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T21:59:59.667

我也遇到过类似的问题，尤其是新导入的项目。我找到的最接近解决方案的方法是确保 .classpath 文件是可写的，重新启动 Eclipse（或您使用的任何 IDE），刷新项目，清理并构建项目并重试。这并不总是能解决它，但做几次通常会让我的错误消失。错误的本质是Android操作系统找不到Activity，尽管它知道Activity应该存在并试图启动它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T15:24:50.310

你的源代码树是什么样的？您可能需要删除 .activity。和.Activity。应用程序中的前缀完全限定类名。当然，除非您的源代码树中有一个“活动”和一个“活动”文件夹（=

# asp.net - 响应Repeater ItemTemplate 中的按钮事件

> ID：10132215
> 
> 赞同：2
> 
> 时间：2012-04-12T21:34:08.063
> 
> 标签：asp.net, asprepeater

所以我已经删除了数据源，只有 DataBind() 然后我的页面仍在刷新页面，而不是处于编辑模式。

我想要做的是当用户单击编辑按钮然后使其内联编辑中继器行时。

**结束更新**

onItemCommand 我添加了 DataBind()

```
rpt.DataSource = mydatasource; 
rpt.DataBind(); 
```

在我这样做之后，我的页面没有处于编辑模式并且它被吹走并且我在 page_load 上的所有内容都被刷新了

```
if (!IsPostBack) 
{
   rpt.DataSource = mydatasource; 
    rpt.DataBind();

} 
```

**结束更新**

我已经多次使用中继器没有问题，但这里发生了一些事情。我有一个转发器，我正在订阅 itemDatabound 事件，但是当我单击按钮（这是我的转发器项目模板中的一个链接按钮）时，它不会转到`ItemDataBound`

```
<asp:Repeater ID="rpt" runat="server" OnItemCommand="rpt_OnItemCommand" OnItemDataBound="rpt_OnItemDataBound">
    <ItemTemplate>
        <li>
            <asp:Label ID="Label" runat="server" />
            <asp:LinkButton ID="LinkButton1" runat="server" CommandName="edit" CommandArgument='<%# Eval("MyID") %>'
                Text='<%# Eval("Title") %>' />
        </li>
    </ItemTemplate>
</asp:Repeater>

    protected void rpt_OnItemCommand(object source, RepeaterCommandEventArgs e)
          {
              if (e.CommandName == "delete")
              {
                  //Data.Contacts.RemoveAt(e.Item.ItemIndex);
              }
              else if (e.CommandName == "edit")
              {
                  EditIndex = e.Item.ItemIndex;
              }
              else if (e.CommandName == "save")
              {
                  //          
              }

           }

protected void rpt_OnItemDataBound(object sender, RepeaterItemEventArgs e)
{
     if (e.Item.ItemType == ListItemType.Item || e.Item.ItemType == ListItemType.AlternatingItem)
      {

        if (e.Item.ItemIndex == EditIndex)
        {
          // never come to this line.... after the user click on LinkButton

        }

      }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T21:58:34.197

不知道这是否有帮助，但您必须调用 DataBind() 才能触发 OnItemDataBound 事件。另外我的猜测是您正在尝试在 OnItemCommand 中设置 EditIndex，然后在 OnDataBind 事件中使用该值。事件按 OnItemDataBound 然后 OnItemCommand 的顺序触发，因此在这种情况下 EditIndex 无论如何都不会正确。

将 rpt.DataBind 添加到 OnItemCommand。当我从您的代码中尝试它时，这很有效，请注意，如果您不使用 !IsPostBack 进行原始数据绑定，您将绑定两次。

```
 rpt.DataSource = strings;

  if (!IsPostBack)
  {
       rpt.DataBind();
  }

 protected void rpt_OnItemCommand(object source, RepeaterCommandEventArgs e)
 {
      if (e.CommandName == "delete")
      {
          //Data.Contacts.RemoveAt(e.Item.ItemIndex);
      }
      else if (e.CommandName == "edit")
      {
          EditIndex = e.Item.ItemIndex;
      }
      else if (e.CommandName == "save")
      {
          //          
      }

     rpt.DataBind();

   } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T21:48:38.477

您必须更改您的 rpt_OnItemCommand 函数。

```
protected void rpt_OnItemCommand(object source, RepeaterCommandEventArgs e)
{
    if (e.CommandName == "delete")
    {
        //Data.Contacts.RemoveAt(e.Item.ItemIndex);
    }
    else if (e.CommandName == "edit")
    {
        EditIndex = e.Item.ItemIndex;
    }
    else if (e.CommandName == "save")
    {
        //          
    }
    else if (e.CommandName == "Complete")
    {
        // your function goes here
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T21:51:05.907

我有点困惑，但从上面的例子来看，你似乎把它弄反了。按钮单击*永远不会*触发`ItemDataBound`事件。`ItemDataBound`仅在每个项目绑定到中继器后才调用该事件。

但是，单击按钮应该会触发该`ItemCommand`事件，如果没有发生这种情况，我会检查以确保您实际分配了`ItemCommand`处理程序，并确保命令名称有效。

附带说明一下，当转发器在每次回发时都绑定时，也会发生这种行为。确保在`!Page.IsPostBack`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T21:52:23.750

为什么你认为`ItemDataBound`当你点击你的时会引发`LinkButton`？`ItemDataBound`仅在`Repeater.DataBind()`被调用时触发。实际上，转发器的`ItemCommand`事件被引发了。

# java - 如何为骰子制作动作监听器按钮？

> ID：10132216
> 
> 赞同：2
> 
> 时间：2012-04-12T21:34:09.030
> 
> 标签：java, swing, jbutton, actionlistener, dice

我正在制作一个棋盘游戏，我需要操作一个像骰子一样操作的按钮。在我的框架中，我有掷骰子按钮，旁边是一个 JLabel，它将显示骰子的结果。问题是我有一个不同类中的骰子编码和另一个类中的按钮。我有一个动作类，它将保存动作侦听器的代码。我该如何实施？下面是我的代码。

## 游戏视图类：

```
 public void gui()
    {
        BorderLayout borderlayout = new BorderLayout();      

        //Creates the frame, set the visibility to true, sets the size and exit on close
        JFrame frame = new JFrame("Games");
        frame.setVisible(true);
        frame.setSize(600,400);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        //Creates the Throw Dice button
        Panel p = new Panel();
        p.setLayout(new GridLayout());
        p.add(new Button("Throw Dice"));
        p.add(new Label("Dice Draw")); //This is where I want the dice result to be shown when hit the button
        p.setBackground(new Color(156, 93, 82));
        frame.add(p, BorderLayout.SOUTH); 
```

## 骰子类：

```
public class Dice
{   
    //stores the dice result in the variable
    private int diceResult;

    /**
     * Constructor for objects of class Dice
     */
    public Dice()
    {
        this.diceResult = diceResult;
    }

    /**
     * Generates a random number between 1 and 5
     */
    public void randomGenerator ()
    {
        Random dice = new Random();
        diceResult = dice.nextInt(5)+1;
        System.out.println(diceResult);
    }
} 
```

## 动作类：

```
public class Action
{
    public void actionPerformed (ActionEvent e) 
    {
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T21:49:06.670

在像这样的简单示例中，我可以建议您使用`ActionListener`像这样实现的匿名类的优点。

```
 BorderLayout borderlayout = new BorderLayout();      

    //Creates the frame, set the visibility to true, sets the size and exit on close
    JFrame frame = new JFrame("Games");
    frame.setVisible(true);
    frame.setSize(600,400);
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

    //Creates the Throw Dice button
    Panel p = new Panel();
    p.setLayout(new GridLayout());

    final Dice dice = new Dice();
    Button button = new Button("Throw Dice");
    final Label label = new Label("Dice Draw");

    button.addActionListener(new ActionListener() {

        @Override
        public void actionPerformed(ActionEvent e) {
            dice.randomGenerator();
            label.setText(Integer.toString(dice.getDiceResult()));
        }
    });

    p.add(button);
    p.add(label); //This is where I want the dice result to be shown when hit the button
    p.setBackground(new Color(156, 93, 82));
    frame.add(p, BorderLayout.SOUTH); 
```

此外，您必须向您的课​​程添加`getDiceResult`方法。`Dice`

# java - 如何在 Ant 中使用带有 loadproperties 的 base64 编码？

> ID：10132221
> 
> 赞同：0
> 
> 时间：2012-04-12T21:34:41.237
> 
> 标签：java, eclipse, macos, ant, base64

我在一个以 base64 编码的属性文件中有内容（其中有密码，我只想不是纯文本）。当我像这样在 Ant 中创建 loadproperties 任务时：

```
<loadproperties srcFile="mypasswords.properties" encoding="base64" /> 
```

然后尝试运行 build.xml 中的任何目标，我收到如下错误：

```
/path/to/build.xml:10: Unable to load file: java.io.UnsupportedEncodingException: base64 
```

我一直在寻找并寻找可能出现的问题。我是否为编码属性使用了错误的字符串？我错过了一个罐子吗？

我在 OS X 10.6.8、Eclipse Indigo、Ant 1.8.2、JRE 1.6.0_31

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T01:40:15.833

我怀疑[loadproperties任务的](http://ant.apache.org/manual/Tasks/loadproperties.html)**编码**参数是指文件字符编码，而不是应用于属性值的编码。

我建议不要对您的密码进行编码，而是在以下答案中包含一个示例：

[使用 Ivy 和私人公司存储库时，我在哪里放置我的凭据？](https://stackoverflow.com/questions/7503630/where-do-i-put-my-credentials-when-using-ivy-and-a-private-company-repository/7505364#7505364)

# android - iPad/IPhone、iOS 和 Android 网络编程，从服务器推送或拉取数据

> ID：10132223
> 
> 赞同：2
> 
> 时间：2012-04-12T21:34:49.727
> 
> 标签：android, ios, networking

我正在为 iOS 和 Android 开发具有多个客户端的回合制游戏。我使用 JSON 和标准 HTTPS 封装来传输数据。我正在使用 NSURLRequest (iOS) 和 DefaultHttpClient、HttpPost (Android) 方法发出请求，并完成了一些示例代码来测试连接到 Web 服务器并将数据返回给客户端。（这很好用）

游戏开始后，我希望服务器向客户端发送更新，而不是让客户端不断“轮询”服务器。我认为推送方法对于游戏和设备/网络来说会更有效。

尽管基于推送的连接通常需要并打开“套接字”，因为客户端可能位于防火墙、代理等后面。

我是否只需要让客户端代码定期轮询服务器？（最佳游戏性能需要 5 秒）。

# jquery - 使用 jQuery 脚本播放视频和暂停并将时间设置为 0，我得到： this.currentTime = 0; 未捕获的错误：INVALID_STATE_ERR

> ID：10132224
> 
> 赞同：2
> 
> 时间：2012-04-12T21:34:57.207
> 
> 标签：jquery, video

我有几个包含视频对象的 div。他们只需点击缩略图即可播放。但是，如果用户单击另一个选项，我会遇到视频继续“在幕后”播放的问题。所以，我从一个溢出者那里得到这个来“停止”视频，将其返回到第一帧，淡出，然后淡入并播放下一个选择的视频：

这是 jQuery 脚本：

```
$(function(){
$('div.video').hide();

$('.icon').click(function(){
    var id=$(this).data('id'),
        thisDiv=$("div.video[data-id='" + id +"']"),
        thisVideo=$("div.video[data-id='" + id +"']").find('video');

    $('video').each(function () {
        this.pause();
        this.currentTime = 0;
    });

       $('div.video').not(thisDiv).fadeOut();

       thisDiv.fadeIn();      
       thisVideo.get(0).play();   
});
}); 
```

以及视频对象的八个 div 之一的 html：

```
<div class="video" data-id="1" >
<video width="auto" height="100%" controls="controls">
  <source src="videos/video.mp4" type="video/mp4" />
  <source src="videos/video.ogv" type="video/ogg" />
  <source src="videos/video.webm" type="video/webm" />
<object data="videos/video.mp4" width="auto" height="100%">
  <embed src="videos/video.swf" width="auto" height="100%" />
</object> 
</video>
</div> 
```

而且它有效……大多数时候。有时，我得到错误：

```
this.currentTime = 0; Uncaught Error: INVALID_STATE_ERR: DOM Exception 11 
```

在 Chrome 的错误日志中。IE8 显示相同的错误。

有谁知道这是怎么一回事？我能做些什么来解决它？

# c++ - 播放音频文件和调整系统音量

> ID：10132226
> 
> 赞同：-2
> 
> 时间：2012-04-12T21:35:00.003
> 
> 标签：c++, audio, windows-vista

我正在编写一个小型音乐程序，并且正在尝试播放 mp3。现在，我有一些非常难看的东西，但它有效：

```
std::string command("cd \"C:\\Program Files (x86)\\Windows Media Player\" && wmplayer /play \"D:\\music\\A Perfect Circle\\eMOTIVe\\a.mp3");

system(command.c_str()); 
```

有没有更好或更可靠的方法来做到这一点？另外，如何调整主系统音量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T04:47:22.033

我创建了一个名为“Crosstalk”的 C++ 音频库。

Crosstalk 是一个实时 C++ 音频引擎，可让您创建和路由音频系统。

以下是如何播放 mp3 文件的示例：

```
XtSystem system;
XtMp3Decoder mp3Decoder;
XtAudioDevice audioDevice;

long md = system.addComponent(&mp3Decoder);
long ad = system.addComponent(&audioDevice);

system.connOutToIn(md,0,ad,0);
system.connOutToIn(md,1,ad,1);

mp3Decoder.loadFile("../05 Tchaikovski-Swan Lake-Scene.mp3");
mp3Decoder.play(); 
```

Crosstalk 包括示例 Xcode 和 Visual Studio 项目。

[您可以在此处](http://www.adaptaudio.com/Crosstalk)下载 Crosstalk 并查看 API 文档和许可详细信息。

**编辑：**

在设置音量方面：Crosstalk 包含一个名为“XtGain”的组件，您可以在 mp3 解码器输出和音频设备输入之间串联连接。这将允许您在音频流到达扬声器之前设置它的音量。

**编辑（01-12-2012）：**

Crosstalk 已被一个名为“ [DSPatch](http://www.flowbasedprogramming.com) ”的开源项目所取代。DSPatch 本质上是 Crosstalk 背后路由引擎的升级版本，不再局限于音频处理。DSPatch 允许您创建和路由几乎任何可以想象的类型的流程链，并且免费供个人和专有使用:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T00:31:26.907

如果在 Windows 中安装了 MP3 编解码器，您也许可以使用 Win32 API`PlaySound()`函数或 VCL`TMediaPlayer`组件来播放文件。

要设置主音量，请使用 Win32 API`waveOutSetVolume()`函数。

# html - 我每次都必须在 HTML 上设置缓存过期吗？

> ID：10132227
> 
> 赞同：3
> 
> 时间：2012-04-12T21:35:06.663
> 
> 标签：html, caching, meta-tags, browser-cache

我想在 10 天后为我的 html 页面设置缓存过期

```
<META HTTP-EQUIV="expires" CONTENT="Thu, 12 Apr 2012 08:21:57 GMT"> 
```

所以我的问题是

1.  10天后会发生什么？是的，缓存会过期，但我必须再次设置过期日期吗？
2.  我有一种方法可以设置白天的长度，例如：10
3.  我在这里感到困惑，请给我一些参考。

请帮忙...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T21:49:59.533

标签的作用有限。特别是，它不会影响代理，因为它们适用于 HTTP 标头并且不解析 HTML 文档。

在到期时间之后，浏览器应该将其缓存中的页面副本视为陈旧的，而不是使用它，而是从服务器请求页面（如果在线），至少有条件地（如果自某某修改后发送）。这意味着在对页面的任何新请求之后，接收到的副本根本不应该被缓存。所以是的，你应该设置一个新的到期日期，除非你真的想阻止缓存。

标`Expires`头或其`meta`模拟需要提及特定时间。还有其他影响缓存的方法，请参阅[http://www.mnot.net/cache_docs/](http://www.mnot.net/cache_docs/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T21:44:17.897

您需要使用某种服务器端脚本语言（如 PHP 或 ASP 或 JSP）来动态设置该日期。这只是一个“提示”，浏览器可能会也可能不会听。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T21:43:17.053

这是一个提示，告诉浏览器他们应该将 HTML 保存在缓存中直到指定的日期。这意味着，如果浏览器符合要求，那么每当它看到相同的 URL 时，它就不会请求检索它，而是会从缓存中获取 HTML 并显示它。

因此，您可以安全地为每个请求生成一个新时间，因为缓存页面的浏览器无论如何都不会发出请求，并且发出新请求的浏览器将获得更新的提示。

请注意，尽管没有人强迫浏览器遵守，但他们可能会简单地忽略提示并提出请求。

# precision - 艾达数字混乱

> ID：10132229
> 
> 赞同：5
> 
> 时间：2012-04-12T21:35:29.943
> 
> 标签：precision, ada, digits

我一直在阅读，我很难理解如何解释“数字 x”的东西。IE

```
type something is digits 6 
```

我知道它是 6 位数的精度，但我想我搞混的是这意味着什么。

1) Y.XXXXXX (6X),

2) XXX.XXX（任意位数，在尾数前后都是 6 个）

...

我只是想了解数字 6 的范围（或更通用的数字 n），是否有一个公式我可以简单地插入以确定我的范围在某个数字的类型上?

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-12T22:28:10.007

声明的类型`digits`是浮点类型，类似于`Float`or `Long_Float`。

这`6`是“浮点类型所需的有效十进制数字的最小数量”。例如，以下所有内容将被合理准确地表示（但不*完全*）：

```
type My_Real is digits 6;
X: My_Real := 1.23456;
Y: My_Real := 12345.6;
Z: My_Real := 1.23456E7; 
```

实际上，给定系统上通常只有 2 或 3 个底层浮点类型。编译器会选择一个合适的作为你声明的底层类型。实际上，用`digits 2`and声明的两种类型`digits 6`可能具有完全相同的表示和精度。

理解“不*完全*”这个短语需要对浮点的理解，这远远超出了单个问题的范围，但如果你熟悉其他语言中的浮点，这是相同的一般概念。

如果您想大致了解浮点是什么以及它是如何工作的，[维基百科的文章](http://en.wikipedia.org/wiki/Floating_point)还不错。更高级的处理方法是 David Goldberg 的经典论文“What Every Computer Scientist Should Know About Floating-Point Arithmetic”，可[在](http://gicl.cs.drexel.edu/wiki-data/images/0/03/P5-goldberg-Floating-Point.pdf)[此处](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html)以网页和PDF 格式获取。

# php - 如何使php函数等待执行直到脚本结束

> ID：10132230
> 
> 赞同：2
> 
> 时间：2012-04-12T21:35:38.600
> 
> 标签：php, javascript, queue

我正在尝试为 javascript 文件创建队列函数。基本上，这就是我希望它工作的方式：我想创建一个函数，它将接收所有发送给它的 javascript，并将它们放在页面上的适当位置（即页眉或页脚，以及依赖脚本之上）。

我想说：这是一个脚本。按照它应该在的顺序将它添加到队列中。然后，在所有脚本都排队后，运行函数将它们写入页面。到目前为止，我的代码如下所示：

```
$scripts = array();
function enqueue_script($src="", $script_name="", $script_data="", 
 $script_dependencies=array(), $force_header=false, $additional_atts=array()){
    global $scripts;
    //run check for duplicates

    //run check for dependencies already in the variable

    //run checks to see if this script depends on other scripts
    //$scripts array is saved in increments of 10 to allow for up to 
    //9 dependants

    $i = count($scripts);
    $i = ($i*10)+10;
    $scripts[$i]['src'] = $src;
    $scripts[$i]['script_name'] = $script_name;
    $scripts[$i]['script_data'] = $script_data;
    $scripts[$i]['dependencies'] = $script_dependencies;
    $scripts[$i]['force_header'] = $force_header;
    $scripts[$i]['atts'] = $additional_atts;

}
function write_scripts_header() {
    global $scripts;
    $echo = "";
    $atts = "";
    //create script tag for insertion in header
    foreach($scripts as $s){
        if($s['force_header']){
            foreach($s['atts'] as $a => $v){
                $atts .= " {$a}='{$v}'";
            }
            if($s['src']!=""){
                $echo .= "<script src='{$s['src']}'{$atts}></script>\n";
            } else {
                $echo .= "<script{$atts}>{$s['script_data']}</script>\n";
            }
        }
    }
    echo $echo;     
}
function write_scripts_footer() {
    global $scripts;
    $echo = "";
    $atts = "";
    //create script tag for insertion in footer
    foreach($scripts as $s){
         if(!$s['force_header']){
            foreach($s['atts'] as $a => $v){
                $atts .= " {$a}='{$v}'";
            }
            if($s['src']!=""){
                $echo .= "<script src='{$s['src']}'{$atts}></script>\n";
            } else {
                $echo .= "<script{$atts}>{$s['script_data']}</script>\n";
            }
        }
    }
    echo $echo;
} 
```

然后，在 HTML 文件部分：

```
<html>
<head>
<?php write_scripts_header();?>
</head>
<body>
<?php write_scripts_footer();?>
</body>
</html> 
```

如果最后加载 HTML 部分，这可以正常工作。但是，如果我在正文标记的中间有一个包含，并且该包含需要`enqueue_script()`在标题中，那么当函数运行`$scripts`时变量还没有准备好。`write_scripts_header()`

如何制作`write_scripts_header()`并`write_scripts_footer()`等到所有脚本都排队后才能运行？或者....有没有更好的方法来允许脚本队列，以便我可以在最后将所有脚本写入文档？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T21:39:23.253

如果都运行在同一个文件中，能否将body内容设为变量$body，先加载，再回显到`<body>`section中？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T21:41:18.033

```
change
<html>
<head>
<?php write_scripts_header();?>
</head>
<body>
<?php write_scripts_footer();?>
</body>
</html> 
```

到

```
print "<html><head>".write_scripts_header()."</head><body>".write_scripts_footer()."</body></html>"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T21:42:31.060

尝试使用模板引擎，例如[Twig](http://twig.sensiolabs.org/)，您将能够在准备好脚本数组后输出 html。

# java - 禁用 Struts2 日志

> ID：10132232
> 
> 赞同：3
> 
> 时间：2012-04-12T21:35:52.447
> 
> 标签：java, logging, struts2, apache-commons

如何禁用 Struts2 的大量日志？

我经常得到这样的日志：

```
2012-04-12 23:20:31,487 DEBUG [XWorkConverter.java:388] : Property: menuExpandedOps 
```

我正在使用 struts 2.0 和标准 java 日志记录（我没有使用 log4j）。

JVM的logging.properties文件默认设置为INFO，`struts.devMode = false`我的`struts.properties`文件里已经有了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T03:12:16.387

如果您可以自由使用 log4j，我建议您使用它，因为 Log4j 能够为不同的包设置不同的日志级别，因此使用日志级别关闭我们可以禁用特定包的日志记录。

在 S2 中，大多数日志消息将来自这些包

*   xwork2
*   struts2
*   自由标记
*   ognl

class-path 中的简单属性文件/xml 文件可以帮助您打开或关闭日志记录信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-17T02:34:50.180

> ***class-path 中的简单属性文件/xml 文件可以帮助您打开或关闭日志记录信息。***

对于那些想要一个例子的人：

**1）放在`log4j.properties`里面`src`（你的包裹在哪里）：**

[![在此处输入图像描述](../Images/facc4f0cf4b5ab9d2c6684d27cfd0de5.png)](https://i.stack.imgur.com/2yxoG.png)

**2）关闭低级日志记录：**

```
# root logger option
log4j.rootLogger=DEBUG, stdout, file

# direct log messages to console
log4j.appender.stdout=org.apache.log4j.ConsoleAppender
log4j.appender.stdout.Target=System.out
log4j.appender.stdout.layout=org.apache.log4j.PatternLayout
log4j.appender.stdout.layout.ConversionPattern=[%p: %d{yyyy-MM-dd HH:mm:ss} %F:%L] %m%n

# direct log messages to a log file, support file rolling
log4j.appender.file=org.apache.log4j.DailyRollingFileAppender
log4j.appender.file.File=${catalina.home}/logs/sortingmonitor.log
log4j.appender.file.layout=org.apache.log4j.PatternLayout
log4j.appender.file.layout.ConversionPattern=[%p: %d{yyyy-MM-dd HH:mm:ss} %F:%L] %m%n

# disable apache low level logging
log4j.category.com.opensymphony.xwork2=OFF
log4j.category.org.apache.struts2=OFF
log4j.category.freemarker.beans=OFF
log4j.category.freemarker.cache=OFF 
```

**XML 的进一步阅读：http:** [//deepaksrivastav.github.io/blog/2011/01/06/disable-struts-2-log-messages/](http://deepaksrivastav.github.io/blog/2011/01/06/disable-struts-2-log-messages/)

# django - 如何将 django 的 register.simple_tag 与“as”一起使用？

> ID：10132233
> 
> 赞同：0
> 
> 时间：2012-04-12T21:36:01.677
> 
> 标签：django, templates

我真的搞砸了

```
<p>{% trans "Visit our" %}<a href="{% url "help" %}">{% trans "help page" %}</a> 
```

xurl 是我注册的标签

```
@register.simple_tag(takes_context=True)
def xurl(context, view_name, *args, **kwargs): 
```

据我所知，我可以在 {% blocktrans %} 中使用变量，所以对我来说好的解决方案是以某种方式使用我的标签，比如 django 的 url 标签

```
{% xurl "help" as help_url %} 
```

然后在 blocktrans 中使用 help_url 变量。我不能使用@register.tag 来使用“as”，因为我需要从上下文中获取当前语言。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T23:40:46.843

“当使用新的 i18n_patterns() 辅助函数时，Django 1.4 获得了在 URL 模式中查找语言前缀的能力。此外，现在可以使用 ugettext_lazy() 定义可翻译的 URL 模式。有关更多信息，请参阅国际化：在 URL 模式中关于语言前缀以及如何国际化 URL 模式。”

[https://docs.djangoproject.com/en/dev/topics/i18n/translation/#url-internationalization](https://docs.djangoproject.com/en/dev/topics/i18n/translation/#url-internationalization)

# c - 链接列表上的映射/减少/过滤...映射失败！（在 C 中）

> ID：10132234
> 
> 赞同：1
> 
> 时间：2012-04-12T21:36:03.357
> 
> 标签：c, pointers, mapreduce

所以这是我的代码......我的理解是我应该创建一个函数“map”，它将函数作为参数。它没有按计划进行。任何帮助都会非常棒。

这是代码的可编译（不可编译，但按比例缩小）版本：

```
#include <stdio.h>
#include <stdlib.h>
#include <stddef.h>
int main(int argc, const char *argv[])
{
//it should be apparent that I am quite new to C, I have some java experience.
struct linkedList {
   int count;
   int num;
   struct linkedList *next;
};
struct linkedList *head, *tail, *curr;
int count1=0;
int i=0;

int square(int v) {return v=v*v;}

void map(int (*func)(int v), struct linkedList){
    struct linkedList2 *head, *tail, *curr;
    for(curr=head; curr!=NULL; curr=curr->next){
        curr->num=func(curr->num);
        printList();
    }
}

void start(){
    printf("This program will ONLY accept integer input.\n");
    head=NULL;
    for(i=1;i<=4;i++) {
        count1++;
        curr=malloc(sizeof(struct linkedList));
        curr->count=count1;
        printf("Enter a number: ");
        scanf("%d", &curr->num);
        if(head==NULL) { head=curr; }
        else { tail->next=curr; }
        tail=curr;
        tail->next=NULL;
    }
    printf("A list has been created.\n");
}

void printList(){
    printf("The list now contains these numbers: ");
    for(curr=head;curr!=NULL;curr=curr->next){
        printf("%d, ", curr->num);
    }
    printf("\n");
}

 start();
 printList();

 map(square, linkedList);
 printList();
 system("PAUSE");   
 return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T21:41:59.987

在其中定义所有这些结构和函数`main`并不是您应该编写C的方式。将`int main(int argc, const char *argv[]) {`移到定义之后的右侧，`printList`以便`main`仅包含`main`.

此外，您的定义`map`似乎有一个未完成的原型。而不是`void map(int (*func)(int v), struct linkedList)`, 其中第二个参数未使用，您想要`void map(int (*func)(int v), struct linkedList* head)`（然后摆脱`head`下一行的声明）。而且，`linkedList2`这里想必应该改成`linkedList`. 此外，你打电话的尝试`map`是`main`荒谬`map(square, linkedList)`的；你想用`map(square, head)`.

# objective-c - 以编程方式在 PDF 文件中创建链接

> ID：10132238
> 
> 赞同：2
> 
> 时间：2012-04-12T21:36:33.810
> 
> 标签：objective-c, hyperlink, pdf-generation

虽然我认为这是一个基本问题，但我还没有找到有效的答案。我正在通过抚摸 PDF 上下文的路径来创建 PDF 文件，并且我希望绘图上的不同区域成为外部内容的超链接 (http://bla.bla)。即使是不相交的矩形区域，我也会很高兴。有谁知道该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-04-09T04:33:45.840

检查这个问题的答案：[Embed hyperlink in PDF using Core Graphics on iOS](https://stackoverflow.com/questions/14748204/embed-hyperlink-in-pdf-using-core-graphics-on-ios)。

```
- (void) drawTextLink:(NSString *) text inFrame:(CGRect) frameRect {
    CGContextRef context = UIGraphicsGetCurrentContext();
    CGAffineTransform ctm = CGContextGetCTM(context);

    // Translate the origin to the bottom left.
    // Notice that 842 is the size of the PDF page. 
    CGAffineTransformTranslate(ctm, 0.0, 842);

    // Flip the handedness of the coordinate system back to right handed.
    CGAffineTransformScale(ctm, 1.0, -1.0);

    // Convert the update rectangle to the new coordiante system.
    CGRect xformRect = CGRectApplyAffineTransform(frameRect, ctm);

    NSURL *url = [NSURL URLWithString:text];        
    UIGraphicsSetPDFContextURLForRect( url, xformRect );

    CGContextSaveGState(context);
    NSDictionary *attributesDict;
    NSMutableAttributedString *attString;

    NSNumber *underline = [NSNumber numberWithInt:NSUnderlineStyleSingle];
    attributesDict = @{NSUnderlineStyleAttributeName : underline, NSForegroundColorAttributeName : [UIColor blueColor]};
    attString = [[NSMutableAttributedString alloc] initWithString:url.absoluteString attributes:attributesDict];

    [attString drawInRect:frameRect];

    CGContextRestoreGState(context);
} 
```

# php - Joomla注册表的服务器端验证？

> ID：10132243
> 
> 赞同：0
> 
> 时间：2012-04-12T21:37:28.723
> 
> 标签：php, joomla1.7, joomla1.6, joomla2.5, server-side-validation

我需要对标准注册表单（Joomla 2.5）上的用户名字段进行 php 服务器端验证。请问这是如何实现的，我应该将它添加到哪个文件中？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T19:58:12.060

我建议您阅读[Joomla 开发者文档](http://docs.joomla.org/Developers)。另请阅读此文档以了解如何将[Joomla Forms 与客户端和服务器端验证](http://docs.joomla.org/Developing_a_Model-View-Controller_%28MVC%29_Component_for_Joomla!2.5_-_Part_11)一起使用。

这是一个更通用的文档：[Joomla Server-side form validation](http://docs.joomla.org/Server-side_form_validation)

# git - 这些 git 符号是什么意思？

> ID：10132252
> 
> 赞同：12
> 
> 时间：2012-04-12T21:38:14.573
> 
> 标签：git

在 git 中，at 符号和花括号是什么意思？

```
git reset --soft HEAD@{1} 
```

同样，双连字符是什么意思？不是作为一种选择，而是像这样使用：

```
git checkout abcd1234 -- . 
```

我确信这是在某个明显的地方引用的，但我很难找到它。此外，搜索非字母数字符号也很困难。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-04-12T21:47:46.533

at 和花括号记录在[`gitrevisions`手册页](https://www.git-scm.com/docs/gitrevisions)中。

`HEAD`在您的示例中，它表示ref的先前值-`HEAD`在您最近的提交或结帐或其他任何内容之前指向的任何提交。

双连字符将标志与非标志（通常是文件名，但有时是其他东西，如分支名称或远程名称）分开。您可以使用`--`它来确保 git 不会将 之后的参数`--`视为标志，以防它看起来像一个标志。

# javascript - 将 Javascript 函数与 Grails 应用程序集成

> ID：10132254
> 
> 赞同：0
> 
> 时间：2012-04-12T21:38:20.967
> 
> 标签：javascript, grails

我正在将 Web 应用程序从 PHP/MySQL 后端转移到 Grails 框架。但是，该应用程序有相当多的遗留 javascript 代码，我想用最少的重写来使用它们。它目前不工作，我不知道为什么。

一个朋友写了一个淡出幻灯片脚本，需要一个数组初始化为

```
var images[3];
images[0] = ['path to image', 'link to somewhere', 'target']; 
```

用PHP写的时候，我只是用了链接和目标的相对路径和双引号，即

```
images[0] = ["../images/file.jpg", "", ""] 
```

转移到 Grails，我希望幻灯片在所有页面上都可见，从而导致在 main.gsp 中插入。

我已将头部中的 javascript 链接声明为

```
<g:javascript src="fade_in.js" /> 
```

原始脚本的工作方式是在脚本中初始化图像数组，然后通过正文代码中的函数调用传入。由于我不知道是否可以`createLinkTo`在 js 文件中使用 Grails 函数调用，因此我初始化了数组并使用

```
<div id="slideshow">
  <script type="text/javascript">
        var images[3];
        images[0] = ["<g:createLinkTo dir='images' file='nsf.jpg' />", "", ""]
        images[1] = ["<g:createLinkTo dir='images' file='east.jpg'/>", "", ""]
        images[2] = ["<g:createLinkTo dir='images' file='usm_horz.png' />", "", ""]
        new fadeshow(fadeimages,200,118,0,8000,1,"R");                          
  </script>
</div> 
```

根据萤火虫，文件的路径是正确的，但它们没有出现在指定的 div 位置。我可以看到图像应该在哪里，并且它是空的。

那么，需要做些什么才能将此功能与 Grails 应用程序集成呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T05:01:11.820

除非您已将 js 文件映射为 gsp，否则您不能在 .js 文件中使用 GSP 标签。您可以创建一个gsp 文件，例如fade_in.gsp 来声明图像数组。

例如 - fade_in.gsp

```
<script>
   //you initialize your javascript array here - you can use all gsp tags.
</script> 
```

然后将此 gsp 文件包含在需要图像数组的其他页面中。

# wso2 - WSO2 VMware 映像 - 验证电子邮件地址？

> ID：10132255
> 
> 赞同：0
> 
> 时间：2012-04-12T21:38:24.060
> 
> 标签：wso2, wso2stratos

我正在运行 WSO2 Stratos VMware 映像，我已经将它运行到了运行的地步，我已经打开了浏览器，它在我的 WSO2 内部部署中，并且我已经为自己创建了一个帐户。问题是，VM 没有与任何东西联网，所以当它告诉我它向我的帐户发送了一封电子邮件并请我验证它时，我无法验证它，因为它实际上从未发送过电子邮件。我以为 Linux 客户机上可能会有一个本地邮件服务器，但我找不到。

我错过了什么吗？我什至需要验证帐户吗？我似乎无法访问任何 Stratos 服务，并且我怀疑帐户验证与此有关。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T06:13:55.740

您可以以管理员身份登录（使用默认用户名/密码：admin/admin）并激活您创建的租户/帐户。

# android - 微调器对话框的自定义主题

> ID：10132257
> 
> 赞同：2
> 
> 时间：2012-04-12T21:38:41.827
> 
> 标签：android, android-fragments, android-spinner

我想自定义单击 spinnermode=dialog 中的微调器时出现的对话框的外观。我想使用对话框片段，但找不到文档。

可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T21:43:13.743

不，外观是固定的，给人以操作系统的感觉。您必须创建自己的微调器才能做到这一点，这并不容易，但如果微调器中的列表不会变得太大而占用手机的所有内存，也不会太难。只需制作一个可以垂直滚动的控件。

# html - 将内联块 DIV 居中

> ID：10132261
> 
> 赞同：8
> 
> 时间：2012-04-12T21:39:06.177
> 
> 标签：html, xhtml, alignment, css

有人知道如何将显示设置为 inline-block 的 DIV 居中对齐吗？

我无法将显示设置为阻止，因为我有需要重复的背景图像，并且需要根据内容进行扩展。它位于父 div 内部，其中的宽度更大。

所以总而言之。有没有人可以将 div 与设置为 inline-block 的显示对齐居中？

不，文本对齐：中心；不起作用，margin: 0 auto 也不起作用；

jsFiddle：http: [//jsfiddle.net/HkvzM/](http://jsfiddle.net/HkvzM/)

谢谢！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-12T21:41:31.857

尝试使用这个：

```
margin: 0 auto; 
```

或者`text-align: center;`在父`<div>`...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T05:26:38.853

嗨，你可以像这样给父文本对齐中心而不是孩子

**CSS**

```
div{
    text-align: center;

}

.dl{
    color: #fff;
    margin: 0 auto;
    background: #000;
    text-transform: uppercase;
    font-size: 14px;
    font-weight: bold;  
    line-height:35px;  
    display:inline-block;    
} 
```

**HTML**

```
<div>
<a class="dl">DOWNLOAD NOW DOWNLOAD NOW DOWNLOAD NOW</a>    
</div> 
```

现场演示[http://jsfiddle.net/rohitazad/HkvzM/15/](http://jsfiddle.net/rohitazad/HkvzM/15/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-13T01:25:23.883

您不能将元素居中

```
display:inline 
```

您可能必须通过使用 jQuery 或 JavaScript 找到解决方法。您可以使用 CSS 进行一些近似居中，如果文本的长度没有太大变化，这将起作用。类似这个[Demo](http://jsfiddle.net/HkvzM/16/)

```
<div id="out">
    <a class="dl">DOWNLOAD NOW DOWNLOAD NOW DOWNLOAD NOW</a>
</div>​​​

#out{
 padding:0 50px;   
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-05T11:46:38.993

text-align:center 在父 div 上，将简单地做到这一点。
来源：[CSS 中心显示内联块？](https://stackoverflow.com/questions/4980525/css-center-display-inline-block)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-05-04T13:51:51.290

我从所有这些（许多、大量、大量的）答案中得到的是，您无法使用内联样式调用将块居中。它**必须**是一个已定义的类。这是金丝雀：

```
<div
  style="font-size: 14pt; text-align: center; font-family: latoweb; font-weight: 400; display: inline-block; margin: 0 auto; width: 80%; height: auto;"
>
  <a
    id="media_comment_m-4JGUVJ6vm4uhihPBSiXrZGRG2Fm1a8To"
    data-media_comment_type="video"
    class="instructure_inline_media_comment video_comment mce-item-anchor"
    data-alt=""
  >
  </a>
  5 Quick Steps to <i>Photo Story 3</i>
</div> 
```

试图在 Canvas LMS 中居中视频帧。必须通过他们的白名单测试。

# c - 内存对齐和结构大小

> ID：10132262
> 
> 赞同：0
> 
> 时间：2012-04-12T21:39:16.043
> 
> 标签：c, memory, memory-management

假设我定义了以下结构：

```
struct MyData { 
    int a;
    char b;
    int c;
    byte d;
    byte e;
} 
```

我依稀记得读过该结构的大小不仅取决于数据类型，还取决于内存对齐方式。在 32 位 CPU 上，MyData 结构将是 4 字节 + 1 字节 + 4 字节 + 1 字节 + 1 字节 = 11 字节。这是我的问题，内存对齐是否会增加结构的大小：4 字节 + 1 字节（+3 字节填充）+ 4 字节 + 1 字节（+3 字节填充）+ 1 字节（+3 字节填充）= 20 字节。

这是错的吗？我错过了什么吗？这是特定于语言的东西吗？我可以打包结构吗？如果是这样，有什么优点和缺点？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T21:50:45.220

您说内存对齐可以增加结构的大小并没有错；然而，任何关于如何对齐内存的猜测都不适用于所有平台。这是严格的平台特定的。

基本上，大多数平台倾向于在 ${WORDSIZE} 上对齐，或者如果数据类型小于 ${WORDSIZE}，那么它会在 ${WORDSIZE} 的下一个可用部分上对齐

例如，如果您有一个 32 位字，并且您正在存储 16 位短路，它们可能会在一个字内的第 0 位和第 16 位上对齐。但这不是保证，因为它确实是特定于平台的。

要调整结构以减少因填充造成的浪费，请按数据类型对元素进行排序，首先使用较大的数据类型。这倾向于允许将多个字节打包到同一个单词中（如果可能的话），并且大于单词的项将很好地终止于单词边界，因为它们往往是单词的干净倍数（四字，双字，...）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T21:43:25.553

编译器可以在它认为合适的时候填充结构。通常，最后两个`byte`s 不会被填充分隔，因此大小将变为`4 (int) + 1 (char) + 3 (padding) + 4 (int) + 1 (byte) + 1 (byte) + 2 (padding) = 16`.

许多编译器允许根据编译指示打包结构。这样做的好处是内存使用较少，缺点是非对齐`int`成员的读取速度较慢。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T21:42:03.730

结构成员之间和之后有**未指定的填充。**第一个结构成员之前没有填充，即：

```
struct MyData bla;

int val = (char *) &bla == (char *) &bla.a;  // val is 1 
```

指向结构的指针（经过适当转换）指向第一个结构成员。

结构对象的大小考虑了填充，等于成员大小的总和 + 未指定的填充大小的总和。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T21:44:13.930

是的，编译器自然会在与其大小匹配的边界上对齐类型。您可以使用编译器编译指示强制结构打包，例如

```
#pragma pack(1) 
```

您还可以通过重新排序声明以将整数放在开头和之后的单个字节来避免一些填充。

您可以通过打印轻松地对此进行测试`sizeof(struct MyData)`

# c# - ASP.net MVC3 从 HTML 表单中获取复选框值

> ID：10132263
> 
> 赞同：2
> 
> 时间：2012-04-12T21:39:18.640
> 
> 标签：c#, asp.net, asp.net-mvc-3, forms, checkbox

我的 MVC3 站点中有一个简单的表单，允许用户创建竞赛条目。这已经实现并且目前运行良好，但是已经请求现在允许用户将他们的条目设为私有。

在我的 Entry 模型中，我添加了一个布尔 isPrivate。然后我想我会更改用于创建和编辑的 HTML 表单，以包含一个复选框来指定条目是否应该是私有的。

我是 MVC3 的新手，但我想我可以通过包含一个新的布尔参数来简单地更改表单发布的操作。

不幸的是，这似乎不起作用。谁能告诉我复选框值如何从 HTML 表单传递到发布操作？这可能相当普遍，但我似乎无法在网上找到一个例子。几乎所有的例子都是简单的显示文本输入，我找不到任何带有复选框的东西。

形式：

```
 <form method="post" action="../Entry/Create" enctype="multipart/form-data" onsubmit="return isValidInput()">
            <input type="text" id="EntryTitle" name="EntryTitle" />
            <div id="invalidTitle" class="invalidData"></div>
            <p id="char-remaining">(100 characters remaining)</p>

            <input type="text" id="EntryVideo" name="EntryVideo" />
            <div id="invalidVideo" class="invalidData"></div>
            <p id="vid-desc">(URL of the Video to Embed)</p>

            <input type="file" id="ImageFile" name="ImageFile" />
            <div id="invalidImage" class="invalidData"></div>
            <p id="file-desc">(200x200px, jpeg, png, or gif)</p>

            <textarea id="EntryDesc" name="EntryDesc"></textarea>
            <div id="invalidDesc" class="invalidData"></div>
            <br />

            <input type="checkbox" id="isPrivate" name="isPrivate" />
            Make my entry private.

            <br />

            (private entries will only be viewable by you and site administrators)

            <br />

            <button id="new-entry-save">save</button>
        </form> 
```

行动：

```
public ActionResult Create(string EntryTitle, string EntryVideo, HttpPostedFileBase ImageFile, string EntryDesc, Boolean isPrivate)
{
...
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T21:42:31.680

将 value="true" 添加到复选框，并在其后添加具有相同名称和 value=false 的隐藏输入，即：

```
<input type="checkbox" id="isPrivate" name="isPrivate" value="true" />
<input type="hidden" name="isPrivate" value="false" /> 
```

如果您不想使用隐藏，请使用 bool？而不是 bool（例如可以为空）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T21:50:44.220

另一种选择是隐藏具有相同名称的文本字段，以强制未选中字段中的数据成为帖子的一部分。请参阅[发布未选中的复选框](https://stackoverflow.com/questions/1809494/post-the-checkboxes-that-are-unchecked)。

```
<form> 
  <input type='hidden' value='0' name='selfdestruct'> 
  <input type='checkbox' value='1' name='selfdestruct'> 
</form> 
```

# python - 让独立的 Django 应用程序来处理简单的单文件组件是不好的做法吗？

> ID：10132266
> 
> 赞同：0
> 
> 时间：2012-04-12T21:39:31.667
> 
> 标签：python, django

我一直在阅读有关 Django 项目管理的良好实践。据我了解，有利于：

*   将项目拆分为具有特定职责的多个小型应用程序。
*   始终在可再发行组件中进行编码思考。

第二点对我来说非常重要，因为我通常从事多个项目。因此，只要有可能，我就会将我的组件模块化为可安装的包，以便以后重复使用。

问题是……这在多大程度上是一种好的做法？我应该如何处理非常简单的组件，这些组件也可以被其他应用程序高度重用？

一个例子是一个简单的可重用模板标签，它可能是 40~60 行代码 + 测试。如果它不执行任何特定于项目的操作，我认为它不适合我的任何项目应用程序，但我也发现它太小而无法单独拥有应用程序。是吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T23:37:38.060

我已经做 django 项目 4 年了。我从所有项目中得到的只是很少的 ContextProcessor。

> 如果它不执行任何特定于项目的操作，我认为它不适合我的任何项目应用程序，但我也发现它太小而无法单独拥有应用程序。是吗？

只需将其视为始终为项目指定的，直到您在另一个项目中需要它为止。所以我的回答是：写你想要的和你想要的。如果您需要其他地方的东西，那么您会将其与项目分开。不要过早优化。

# java - Java/Mysql 服务器程序中的电子邮件帐户密码存储

> ID：10132267
> 
> 赞同：3
> 
> 时间：2012-04-12T21:39:36.603
> 
> 标签：java, mysql, email, passwords

我处于一个棘手的情况，我正在编写一个使用我公司的电子邮件帐户向客户发送电子邮件的应用程序。这里的问题是我必须拥有该帐户的密码才能使服务器上的邮件服务从该帐户发送电子邮件。我知道密码永远不应该以纯文本形式存储，尤其是用于重要电子邮件帐户的密码。这里的困境是程序需要有实际的纯文本密码才能发送电子邮件，所以它需要存储在程序可以访问的某个地方。该程序使用 MySQL 数据库来存储信息，所以我想到了三个选项：

1) 将密码存储在程序的内存中，即私有的最终字符串字段。

2）服务器上可以读取密码的文件

3) MySQL 数据库中的某处。

我认为 1 是最安全的选择，但有没有人有想法来处理这种情况，以尽量减少密码落入坏人之手的风险？谢谢你的建议！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T00:28:33.653

指出 SMTP 不需要身份验证的评论是正确的。也就是说，假设服务器使用商用硬件和软件，您指定的*所有三个选项都是不安全的。*我会说明为什么每个都是不安全的，尽管我不会遵循你原来的顺序。

> 2）服务器上可以读取密码的文件
> 
> 3) MySQL 数据库中的某处。

如果有人要窃取服务器怎么办？然后，他们只需打开文件或数据库，读取密码，就可以立即访问公司的所有重要信息。因此，除非您日夜在服务器周围有武装警卫，否则这已经很不安全了。

但它变得更糟。没有计算机系统是完全无懈可击的，过去几年多次广为人知的攻击（例如索尼的 PlayStation Network）表明，攻击者无需物理访问即可获取磁盘文件和数据库的内容。此外，从您的问题来看，有问题的服务器似乎是为了接受来自外部世界的数据包（HTTP 请求、传入的电子邮件等），这增加了您的攻击面。

> 1) 将密码存储在程序的内存中，即私有的最终字符串字段。

这很诱人，但这比选项 2 或选项 3 更有害。一方面，私有最终字符串字段存储在 Java 编译器生成的 .class 文件中，因此使用此选项您已经存储了未加密的密码在服务器的硬盘上。在如选项 2 或 3 中破坏服务器后，攻击者可以运行`javap`以从 .class 文件中获取明文密码。

但是，这种方法进一步扩大了您的攻击面。如果密码作为源代码的一部分存储，那么所有正在处理代码的开发人员都可以使用它。在最小权限原则下，开发者不应该知道额外的密码，这里有一个很好的理由。如果任何*开发人员的*机器被盗或从外部入侵，攻击者可以查看被入侵机器的硬盘并获取明文密码。然后是源代码控制。源代码控制真正重要的好处之一是它允许您检查代码的任何先前版本。因此，即使您将来切换到安全方法，如果密码曾经进入源代码控制，那么源代码控制服务器就是一个潜在的攻击点。

所有这些因素加起来表明，即使 HTTP/邮件服务器的安全性是一流的，选项 1 也会大大增加攻击面，以至于 HTTP/邮件服务器的安全性并没有真正的帮助。

* * *

额外细节：一开始我指定“假设服务器使用商品硬件和软件”。如果您不使用商品硬件和软件，您可以执行诸如从只读存储启动并仅使用加密数据库之类的操作，这需要一个人在每次启动时提供解密密钥。之后，解密的信息只存在于内存中，永远不会写入磁盘。这样，如果服务器被盗，攻击者必须拔下服务器，从而丢失所有仅在内存中的解密信息。这种设置有时用于 Kerberos KDC（将服务器放在一个上锁的盒子中以提高安全性），但很少使用其他设置，坦率地说，如果有一种简单的方法可以解决您的问题而无需额外花费费用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T21:42:01.903

如果您认真对待它的安全，您可以对密码进行编码并将其放入 2 或 3 中。当您需要使用它时，只需让您的程序对其进行解码并将其作为纯字符串保存在内存中。

前任。

```
String encodedUrl = URLEncoder.encode(url,"UTF-8"); 
```

`String decodedUrl = URLDecoder.decode(url,"UTF-8")`;

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T23:51:34.310

这是一个常见的问题。您可以将密码存储在 MYSQL 中的 blob 字段中，在插入时应用 AES 加密；在 java 中使用和保存 key_string 以便于解密。

MYSQL 语法：

`AES_ENCRYPT(str,key_str)`

和

`AES_DECRYPT(crypt_str,key_str)`

插入将类似于以下内容：

`INSERT INTO t VALUES (1,AES_ENCRYPT('password','encryption_key'));`

您将使用密钥解密出来

`SELECT AES_DECRYPT(password, 'encryption_key') AS unencrypted FROM t`

因此，尽管您需要加密密钥，但您永远不会将密码作为纯文本存储在应用程序中。您与数据库的连接应该是安全的。日志可能是个问题。

或者，您可以使用存储的过程来获取和输出密钥，或者您可以在服务器端加密它们并在加密后插入/检索。

# javascript - 如何使用公共静态实现模块模式？

> ID：10132272
> 
> 赞同：0
> 
> 时间：2012-04-12T21:40:07.373
> 
> 标签：javascript

我的公共静态是用户操作的接口——即 GUI。当用户在登录和注册表单上按回车键时，这里有两个绑定。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T21:54:40.523

我不确定我是否理解了这个问题，但为什么不这样呢？

```
/**
 *Control
 */

var Control = ( function () 
{
    var Control = function ( ) // constructor 
    {
    };
    Control.prototype.function_1 = function( ) // public - instance 
    {
    };
    Control.in = function()
    {
        new Control( 'signin' ).invoke();
    };
    Control.up = function()
    {
        new Control( 'signup' ).invoke();
    };
    Control.out = function()
    {
        AjaxNew.repeatUse( '&ajax_type=ControlSignOut', function( server_response_text ) { ajaxType( server_response_text, 0, 'simple' ); } );
    };
    Control.try = function()
    {
        AjaxNew.repeatUse( '&ajax_type=ControlTryIt', function( server_response_text ) { ajaxType( server_response_text, 0, 'simple' ); } );
    };
    return Control;
} () ); 
```

# cocoa-touch - 使用 NSCache 实现缓存过期

> ID：10132273
> 
> 赞同：10
> 
> 时间：2012-04-12T21:40:10.843
> 
> 标签：cocoa-touch, caching

我正在使用 NSCache 在我的应用程序中实现缓存。我想为其添加过期时间，以便它会在一段时间后获取新数据。有哪些选择，最好的方法是什么？

我应该在访问缓存时查看时间戳并使其无效吗？缓存是否应该通过使用固定间隔计时器自动使自己失效？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-10-23T22:49:25.797

> 缓存是否应该通过使用固定间隔计时器自动使自己失效？

这将是一个糟糕的解决方案，因为您可能会在计时器触发前几秒钟添加一些内容。到期时间应基于特定项目的年龄。（当然，可以使用计时器*有条件*地使项目无效；请参阅对此答案的评论。）

这是一个例子。我考虑过子类化`NSCache`，但决定使用组合更简单。

### 界面

```
//
//  ExpiringCache.h
//
//  Created by Aaron Brager on 10/23/13.

#import <Foundation/Foundation.h>

@protocol ExpiringCacheItem <NSObject>

@property (nonatomic, strong) NSDate *expiringCacheItemDate;

@end

@interface ExpiringCache : NSObject

@property (nonatomic, strong) NSCache *cache;
@property (nonatomic, assign) NSTimeInterval expiryTimeInterval;

- (id)objectForKey:(id)key;
- (void)setObject:(NSObject <ExpiringCacheItem> *)obj forKey:(id)key;

@end 
```

### 执行

```
//
//  ExpiringCache.m
//
//  Created by Aaron Brager on 10/23/13.

#import "ExpiringCache.h"

@implementation ExpiringCache

- (instancetype) init {
    self = [super init];

    if (self) {
        self.cache = [[NSCache alloc] init];
        self.expiryTimeInterval = 3600;  // default 1 hour
    }

    return self;
}

- (id)objectForKey:(id)key {
    @try {
        NSObject <ExpiringCacheItem> *object = [self.cache objectForKey:key];

        if (object) {
            NSTimeInterval timeSinceCache = fabs([object.expiringCacheItemDate timeIntervalSinceNow]);
            if (timeSinceCache > self.expiryTimeInterval) {
                [self.cache removeObjectForKey:key];
                return nil;
            }
        }

        return object;
    }

    @catch (NSException *exception) {
        return nil;
    }
}

- (void)setObject:(NSObject <ExpiringCacheItem> *)obj forKey:(id)key {
    obj.expiringCacheItemDate = [NSDate date];
    [self.cache setObject:obj forKey:key];
}

@end 
```

### 笔记

*   假设您使用的是 ARC。
*   我没有实现`setObject:forKey:cost:`，因为 NSCache 文档[都告诉你不要使用它](https://developer.apple.com/library/ios/documentation/cocoa/reference/NSCache_Class/Reference/Reference.html#//apple_ref/occ/instm/NSCache/setObject:forKey:cost:)。
*   我使用 @try/@catch 块，因为从技术上讲，您可以将对象添加到不响应`expiringCacheItemDate`. 我考虑过使用`respondsToSelector:`它，但你可以添加一个不响应的对象，因为 NSCache 需要`id`而不是`NSObject`.

### 示例代码

```
#import "ExpiringCache.h"

@property (nonatomic, strong) ExpiringCache *accountsCache;

- (void) doSomething {
    if (!self.accountsCache) {
        self.accountsCache = [[ExpiringCache alloc] init];
        self.accountsCache.expiryTimeInterval = 7200; // 2 hours
    }

    // add an object to the cache
    [self.accountsCache setObject:newObj forKey:@"some key"];

    // get an object
    NSObject *cachedObj = [self.accountsCache objectForKey:@"some key"];
    if (!cachedObj) {
        // create a new one, this one is expired or we've never gotten it
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-07T05:36:12.383

另一种解决方案是在设置对象时设置过期时间，并与对象的过期时间进行比较。

例如：

**用法**

```
#import "PTCache.h"

NSInteger const PROFILE_CACHE_EXPIRE = 3600;

- (void) cacheSomething: (id) obj
                 forKey: (NSString*) key
{
     [PTCache sharedInstance] setObject: obj
                                 forKey: key
                                 expire: PROFILE_CACHE_EXPIRE
     ];

} 
```

**界面**

```
#import <Foundation/Foundation.h>

@interface PTCache : NSCache

+ (PTCache *) sharedInstance;

- (void) setObject: (id) obj
            forKey: (NSString *) key
            expire: (NSInteger) seconds;

- (id) objectForKey: (NSString *) key;

@end 
```

**执行**

```
#import "PTCache.h"

@implementation PTCache
{
    NSMutableArray * expireKeys;
}

+ (PTCache *) sharedInstance
{
    static dispatch_once_t predicate = 0;
    __strong static id sharedObject = nil;
    dispatch_once(&predicate, ^{
        sharedObject = [[self alloc] init];
    });

    return sharedObject;
}

- (id) init
{
    if ( self = [super init])
    {
        expireKeys = [[NSMutableArray alloc] init];
    }

    return self;
}

/**
 * Get Object
 *
 * @param NSString * key
 * @return id obj
 *
 **/

- (id) objectForKey: (NSString *) key
{
    id obj = [super objectForKey: key];

    if( obj == nil)
    {
        return nil;
    }

    BOOL expired = [self hasExpired: key];

    if( expired)
    {
        [super removeObjectForKey: key];
        return nil;
    }

    return obj;
}

/**
 * Set Object
 *
 * @param id obj
 * @param NSString * key
 * @param NSInteger seconds
 *
 */
- (void) setObject: (id) obj
            forKey: (NSString *) key
            expire: (NSInteger) seconds
{
    [super setObject: obj forKey: key];

    [self updateExpireKey: key expire: seconds];
}

/**
 * Update Expire Time for Key and Seconds to Expire
 *
 * @param NSString * key
 * @param NSInteger seconds
 *
 **/
- (void) updateExpireKey: (NSString *) key
                  expire: (NSInteger) seconds
    __block NSInteger index = -1;

    [expireKeys enumerateObjectsUsingBlock: ^(id obj, NSUInteger idx, BOOL *stop) {
        if([obj[@"key"] isEqualToString: key])
        {
            index = idx;
            *stop = YES;
            return;
        }
    }];

    NSNumber * expires = [NSNumber numberWithFloat: ([[NSDate date] timeIntervalSince1970] + seconds)];

    if( index > -1)
    {
        [[expireKeys objectAtIndex: index] setObject: expires forKey: key];
    }
    else
    {
        NSMutableDictionary * element = [[NSMutableDictionary alloc] init];
        [element setObject: key forKey: @"key"];
        [element setObject: expires forKey: @"expire"];

        [expireKeys addObject: element];
    }

}

/**
 * Has Expired for Key
 *
 **/
- (BOOL) hasExpired: (NSString *) key
{
    NSNumber * expiredObj = [self getExpireTime: key];

    NSDate * current = [NSDate date];

    NSDate * expireDate = [NSDate dateWithTimeIntervalSince1970: [expiredObj doubleValue]];

    return [current compare: expireDate] == NSOrderedDescending;
}

/**
 * Get Expire Time
 *
 * @param NSString * key
 * @param NSInteger
 *
 **/

- (NSNumber *) getExpireTime: (NSString *) key
{
    __block NSNumber * expire = nil;

    [expireKeys enumerateObjectsUsingBlock: ^(id obj, NSUInteger idx, BOOL *stop) {
        if([obj[@"key"] isEqualToString: key])
        {
            expire = obj[@"expire"];
            *stop = YES;
            return;
        }
    }];

    return expire;
}

@end 
```

# python - 在 Mac OS X 上安装 libpq-dev

> ID：10132274
> 
> 赞同：20
> 
> 时间：2012-04-12T21:40:17.210
> 
> 标签：python, django, postgresql, psycopg2

我正在尝试在本地 Mac OS X 上使用 Postgresql 后端运行 Django。我使用 pip 安装了 Django：

```
sudo pip install Django 
```

我在[这里](http://www.postgresql.org/download/macosx/)使用其中一个二进制安装程序安装了 Postgresql 。

但是当我尝试安装 psycopg2 时，我收到一个错误（粘贴在下面），它找不到 pg_config。

从[这个问题](https://stackoverflow.com/questions/5420789/how-to-install-psycopg2-with-pip-on-python)看来我应该安装`libpq-dev`，但我不确定如何安装。

我试过`libpqxx`用 MacPorts 安装，但没有做任何事情。

如何安装 libpg-dev？还是我还缺少其他东西？

```
henrietta:~ $ pip install psycopg2
Downloading/unpacking psycopg2
  Downloading psycopg2-2.4.5.tar.gz (719Kb): 719Kb downloaded
  Running setup.py egg_info for package psycopg2
    Error: pg_config executable not found.

    Please add the directory containing pg_config to the PATH
    or specify the full executable path with the option:

        python setup.py build_ext --pg-config /path/to/pg_config build ...

    or with the pg_config option in 'setup.cfg'.
    Complete output from command python setup.py egg_info:
    running egg_info

creating pip-egg-info/psycopg2.egg-info

writing pip-egg-info/psycopg2.egg-info/PKG-INFO

writing top-level names to pip-egg-info/psycopg2.egg-info/top_level.txt

writing dependency_links to pip-egg-info/psycopg2.egg-info/dependency_links.txt

writing manifest file 'pip-egg-info/psycopg2.egg-info/SOURCES.txt'

warning: manifest_maker: standard file '-c' not found

Error: pg_config executable not found.

Please add the directory containing pg_config to the PATH

or specify the full executable path with the option:

    python setup.py build_ext --pg-config /path/to/pg_config build ...

or with the pg_config option in 'setup.cfg'.

----------------------------------------
Command python setup.py egg_info failed with error code 1
Storing complete log in /Users/thomas/.pip/pip.log 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2014-04-04T17:03:42.047

对于 OSX 10.9.2 Mavericks，这对我有用。尝试先用 brew 安装 postgres：

```
brew install postgresql 
```

然后安装 pg

```
gem install pg 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-04-13T17:10:03.613

所以我最终遵循了这里的建议：

[http://blog.jonypawks.net/2008/06/20/installing-psycopg2-on-os-x/](http://blog.jonypawks.net/2008/06/20/installing-psycopg2-on-os-x/)

原来我确实已经`pg-config`安装了，但我不得不四处挖掘才能找到它。一旦我将它包含在路径中，一切都会顺利进行。这是该链接的片段：

```
PATH=$PATH:/Library/PostgresPlus/8.3/bin/ sudo easy_install psycopg2 
```

我使用`pip`了而不是，`easy_install`我的 PostgreSQL 安装目录略有不同，但这就是要点。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-12T23:02:41.643

只需从源代码安装 postgres。我在 Mac OS X 上这样做。它很简单：

```
./configure 
make
sudo make install 
```

当然，您可能需要额外的步骤，例如自动启动或设置配置选项，但我相信这仍然是在 Mac OS X 上设置最轻松的方式。

如果您出于某种原因想要避免从源代码安装，您应该寻找 psycopg2 的二进制版本，例如：http: [//www.initd.org/psycopg/download/](http://www.initd.org/psycopg/download/)

```
sudo port install py27-psycopg2 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-04-26T22:34:54.550

在小牛队的 postgress.app 文件`pg_config`中，`/Applications/Postgres.app/Contents/MacOS/bin/`所以我以这种方式解决了问题：

```
sudo PATH=$PATH:/Applications/Postgres.app/Contents/MacOS/bin/ pip install psycopg2 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-06-02T20:48:01.770

如果您只是想安装`psycopg2`在 Mac 上运行 Django 或 Flask 等，请使用：

```
pip install psycopg2-binary 
```

来自文档[https://www.psycopg.org/docs/install.html](https://www.psycopg.org/docs/install.html)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-11-10T00:46:23.570

使用 macports，这对我有用：

```
sudo port install postgresql96
sudo port select --set postgresql postgresql96 
```

我相信这会安装所有 postgres 客户端工具和库，而 macports 有一个单独的端口用于安装服务器，即`postgresql96-server`.

# xpath - 需要帮助创建取决于元素名称的 XPATH 选择器

> ID：10132276
> 
> 赞同：-1
> 
> 时间：2012-04-12T21:40:26.780
> 
> 标签：xpath

我想知道是否有人可以帮助我。我有一个应用程序，用户单击文件夹图标以打开/关闭它（类似于我们在 Windows 资源管理器树中导航/探索文件的方式） - 当我在 selenium IDE 中记录我的测试时，这是生成的代码：

```
<tr>
    <td>click</td>
    <td>//ul[@id='analysisTree']/li[3]/p</td>
    <td></td>
</tr>
<tr>
    <td>click</td>
    <td>//ul[@id='analysisTree']/li[4]/p</td>
    <td></td>
</tr> 
```

这是来自应用程序的与文件夹的折叠状态相对应的源代码片段。

```
<li class="folder collapsed" data-nodecode="RentalValues">
<p>Rental Values</p>
<ul>
</li>
<li class="folder collapsed" data-nodecode="Affordability">
<p>Affordability</p>
<ul>
</li> 
```

当前默认元素 xpath 定位器的问题是，如果几个月后我们在树上引入另一个文件夹，它可能会在树上向上或向下移动文件夹位置，这将导致打开错误的文件夹。因此，有人可以帮我组合一个更健壮的 XPath，它不依赖于树中文件夹的确切位置，而是依赖于唯一的文件夹名称吗？

干杯

山

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T11:42:22.110

您可以根据`data-nodecode`属性进行选择：

```
<tr> 
  <td>click</td> 
  <td>//ul[@id='analysisTree']/li[@data-nodecode='RentalValues']/p</td> 
  <td></td> 
</tr> 
. . . 
```

或文件夹名称：

```
<tr> 
  <td>click</td> 
  <td>//ul[@id='analysisTree']/li[normalize-space(.)='Rental Values']/p</td> 
  <td></td> 
</tr> 
. . . 
```

`normalize-space(.)`获取包含在当前元素（`li`在这种情况下）中的完整文本，并去除多余的空格。

# touch - Meteor 中的触摸事件

> ID：10132278
> 
> 赞同：2
> 
> 时间：2012-04-12T21:40:29.543
> 
> 标签：touch, multi-touch, meteor

我开始使用 Meteor 做的第一件事是开始为移动/平板电脑编写一个基于触摸的 Web 应用程序。以下是重现问题的方法：

第一步：创建一个空白项目

```
meteor create touch_example
cd touch_example
meteor 
```

其次，将这些内容添加到 .js 文件中。这首先会为触摸设备发出警报，因为它们没有控制台。

```
Meteor.log = function(input){
    if (typeof console !== 'undefined' && typeof Touch !== "object")
        console.log(input);
    else
        alert(input);
} 
```

这就是罪魁祸首。

```
Template.touchbox.events = {
    'touchmove' : function (e){
        e.preventDefault();
        Meteor.log('touchy');
    }
}; 
```

最后一步，更改模板，使页面上至少有一个“touchbox” div。从理论上讲，它应该采取事件。您会注意到，如果您将“touchmove”更改为“click”，它就可以正常工作。如果您将其更改为`dblclick`它也可以正常工作。触摸事件不做任何事情。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-02-17T08:58:18.833

这可能会有所帮助。我一直在寻找让我的流星应用程序在移动设备上运行的点击。我发现您可以在单击后添加逗号，然后添加 touchstart

```
Template.red.events({
'click, touchstart .red': function(event){
            // add function
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T18:38:29.493

看起来 jQuery 作为标准不处理这些，尝试使用 jquery-mobile：http: [//jquerymobile.com/demos/1.1.0/docs/api/events.html](http://jquerymobile.com/demos/1.1.0/docs/api/events.html)

要将其添加为一个包，您可能需要在此处查看我的其他答案： [jQuery-Mobile Meteor 示例集成和/或集成指南](https://stackoverflow.com/questions/10139425/jquery-mobile-meteor-sample-integration-and-or-integration-guidelines#answer-10144112)

我发现了一些关于绑定触摸与鼠标事件相同的其他帮助，但是这使用绑定，我怀疑它会与 live-ui 流星的东西挂钩：http: [//xavi.co/articles/trouble-with-touch-events- jQuery](http://xavi.co/articles/trouble-with-touch-events-jquery)

# sql - sql server 2008 r2 wmi 连接错误 [0x80041010]

> ID：10132281
> 
> 赞同：0
> 
> 时间：2012-04-12T21:40:49.163
> 
> 标签：sql, sql-server, wmi, sql-server-2008-r2, sql-server-2008r2-express

我正在使用 sql server 2008 r2，它工作正常，但重新启动计算机后它不工作，我试图打开配置管理器，但它给了我这个错误：

> 无法连接到 WMI 提供程序。您没有权限或服务器无法访问请注意，您只能使用 sql server configuration manager 管理 sql server 2005 及更高版本的服务器 Invalid class [0x80041010]

我试过这个命令：

> mofcomp "%programfiles(x86)%\Microsoft\Microsoft SQL Server\100\Shared\sqlmgmproviderxpsp2up.mof"

但共享文件夹中不存在 sqlmgmproviderxpsp2up.mof，我不知道如何管理此错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T08:29:17.513

这绝对是正确的路径：

对于 x64 ：

mofcomp "%programfiles(x86)%\Microsoft\Microsoft SQL Server\100\Shared\sqlmgmproviderxpsp2up.mof"

对于 x86 ：

mofcomp "%programfiles%\Microsoft\Microsoft SQL Server\100\Shared\sqlmgmproviderxpsp2up.mof"

# c++ - 如何防止 Box2D 中传感器对象的隧道效应

> ID：10132282
> 
> 赞同：1
> 
> 时间：2012-04-12T21:40:54.037
> 
> 标签：c++, objective-c, cocos2d-iphone, box2d, collision-detection

我正在使用 cocos2d 和 box2d 制作 ipad 游戏。

在其他元素中，有一个快速移动的玩家对象和一堆静态线对象。我希望这些线能够检测玩家何时越过它们，但不要像墙一样对玩家对象或游戏中的任何其他移动对象起作用。所以我已经将线路设置为传感器。

然而，Box2D 用于快速移动物体碰撞检测的漂亮反隧道代码似乎不适用于设置为传感器的物体。所以现在我的播放器对象直接穿过线，只有五分之一的时候被检测到。

我怎样才能让 box2d 检测到每次越线的精灵，不管它的速度有多快？

编辑：我在 box2D 论坛上发现了这篇文章，有人遇到了类似的问题并找到[了可能的解决方案](http://www.box2d.org/forum/viewtopic.php?f=8&t=6932)。但是我不遵循如何实施解决方案。也许它会帮助其他人，或者也许有人可以更清楚地解释这个人做了什么。他们是这样说的：

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T23:46:58.163

好的，我让它工作了。有人在 Box2D 论坛中回应了一个解决方案，即使用光线投射而不是依赖内置的碰撞检测。[我能够在 RayWenderlich.com 上的这个优秀教程中](http://www.raywenderlich.com/4653/intermediate-box2d-physics-forces-ray-casts-and-sensors)找到有关如何执行此操作的说明

出于我的目的，我只是从最后一帧计算了精灵的速度，然后执行了光线投射以查看它是否越过任何线。回调给出了它穿过的 x,y 坐标。

# xaml - 自定义动态磁贴更新问题

> ID：10132283
> 
> 赞同：1
> 
> 时间：2012-04-12T21:40:56.803
> 
> 标签：xaml, windows-phone-7.1

我正在为 Windows 手机开发天气应用程序。我想利用的功能之一是动态磁贴。我有一个后台代理，当用户将城市固定到起始页时运行。固定后，它会向互联网发出呼叫以获取一些天气数据。所有这些工作都很好。

现在解决问题。根据返回的天气数据，我想更新固定到开始屏幕的图块。我有许多代表每个图块的不同 .xaml 文件（雨、雪、太阳等）。我的第一个想法是我会：

1.  在每个图块上公开 2 个属性（CityState 和 Temp）
2.  创建磁贴后设置这 2 个属性。
3.  将磁贴作为图像保存到独立存储中，然后我可以使用它来更新开始屏幕上的磁贴。

这是我必须这样做的代码：

```
 var ctl = new Snow();
//just some dummy data to test
    ctl.CityState = "Test, NY";  
    ctl.Temp = 25;
    ctl.Measure(new Size(173, 173));
    ctl.Arrange(new Rect(0, 0, 173, 173));
    var bmp = new WriteableBitmap(173, 173);
    bmp.Render(ctl, null);
    bmp.Invalidate();
    var iss =IsolatedStorageFile.GetUserStoreForApplication();
    var filename = "/Shared/ShellContent/tileTest.jpg";
    using (var stm = iss.CreateFile(filename))
    {
    bmp.SaveJpeg(stm, 173, 173, 0, 80);
    }
    tile.BackgroundImage = new Uri("isostore:" + filename, UriKind.Absolute);
    var tileToUpdate = ShellTile.ActiveTiles.FirstOrDefault(r => r.NavigationUri == uri);
    tileToUpdate.Update(tile); 
```

因此，当它运行时，它会从 XAML 文件创建一个新磁贴并更新开始屏幕，但 Temp 和 CityState 属性不会反映在新磁贴上。在 xaml 中，我有 2 个文本块绑定到代码隐藏中的属性。我还实现了 INotifyPropertyChanged。这是 XAML

```
<UserControl
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"
    x:Name="Window"
    x:Class="ezweather.services.tiles.Snow"
    d:DesignWidth="480" d:DesignHeight="800" Width="173" Height="173"    >

        <Canvas x:Name="Layer_1" Width="173" Height="173" Canvas.Left="0" Canvas.Top="0" >
        <Rectangle x:Name="Rectangle" Width="173" Height="173" Canvas.Left="0" Canvas.Top="-1.52588e-005" Stretch="Fill" Fill="#FF3F6A8D"/>
        <TextBlock x:Name="cityState" TextAlignment="Left" FontFamily="Segoe UI Semibold" FontWeight="Bold" FontSize="15" Width="Auto" Height="Auto" Canvas.Left="0" Canvas.Top="0">
            <TextBlock.RenderTransform>
                <TransformGroup>
                    <MatrixTransform Matrix="1.33333,0,0,1.33333,11,139.5"/>
                </TransformGroup>
            </TextBlock.RenderTransform>
            <Run Text="{Binding  ElementName=Window, Path=CityState}" Foreground="#FFFFFFFF"/>
        </TextBlock>
        <TextBlock x:Name="temp" TextAlignment="Right" FontFamily="Segoe UI Light" FontSize="44" Width="Auto" Height="Auto" Canvas.Left="0" Canvas.Top="0">
            <TextBlock.RenderTransform>
                <TransformGroup>
                    <MatrixTransform Matrix="1.33333,0,0,1.33333,87.57,42.9333"/>
                </TransformGroup>
            </TextBlock.RenderTransform>
            <Run Text="{Binding ElementName=Window, Path=Temp}" Foreground="#FFFFFFFF"/>
        </TextBlock>
    </Canvas>
</UserControl> 
```

这是代码隐藏

```
public partial class Snow : UserControl, INotifyPropertyChanged
    {
        public Snow()
        {
            // Required to initialize variables
            InitializeComponent();
        }
        private string _cityState;
        private int _temp;
        public string CityState
        {
            get { return _cityState; }
            set
            {
                _cityState = value;
                RaisePropertyChanged("CityState");
            }
        }
        public int Temp
        {
            get { return _temp; } 
            set 
            { 
                _temp = value;
                RaisePropertyChanged("Temp");
            }
        }

        public event PropertyChangedEventHandler PropertyChanged;
        protected void RaisePropertyChanged(string property)
        {
            if(PropertyChanged != null)
                PropertyChanged(this, new PropertyChangedEventArgs(property));
        }
    } 
```

当此代码运行时，它会实例化正确的 xaml 文件并将其保存到磁盘。然后它会更新开始屏幕上的磁贴，但不会显示 CityState 和 Temp 数据。

我不知道为什么 CityState 和 Temp 数据没有与图像一起写出。我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T22:52:06.917

我在这里看到的主要问题是您在实际加载控件之前尝试渲染图像。

尝试在 Control.Loaded 事件中处理渲染。

# asp.net - 从表单身份验证转换为 Windows 身份验证

> ID：10132287
> 
> 赞同：4
> 
> 时间：2012-04-12T21:41:08.423
> 
> 标签：asp.net, authentication

我们目前正在为我们的 Intranet 站点使用表单身份验证，并希望允许用户通过 Windows 身份验证来进行身份验证。这将如何影响当前的用户帐户、配置文件和角色。我在网上看到我可以混合两种身份验证类型并将角色和配置文件放在单独的数据库中，但是如何将**现有**角色和配置文件分配与 Windows 身份验证用户登录链接？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T21:50:27.823

我不确定您是否可以完全按照您的要求进行操作，但是您可以编写代码摆脱这种情况，您可以编写功能要求经过 Windows 身份验证的人输入您已经拥有的唯一凭证（例如一个电子邮件地址），如果他们通过单击链接做出响应，您就可以以编程方式转换用户帐户。

您可以创建新帐户并从旧的非 Windows 身份验证帐户导入信息，然后删除旧帐户。但是，作为迁移的一部分，依赖于 UserId 的所有数据库记录都需要在此方法中进行更改。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T22:21:25.667

取决于您想要的集成程度，但如果它是单点登录，则不会推动这一点。让用户的 sid 在配置文件角色等中查找它（可以向它们添加 sid 列，但一个简单的 sid - userid 表会更好。

如果他们在那里，你就可以走了。如果他们不使用表单认证来识别他们并添加从他们的 sid 到用户 ID 的映射。所以他们会再次被问到，仅此而已。

无论如何，您可能需要一个类似的机制，以防 sid 发生变化，这可能发生在各种 Windows 问题之后。或者说非 Windows 用户的匿名访问。

如果您不喜欢 sid 作为 id，那么其他一些例如域\用户名可能会这样做。

Windows 组/角色到应用程序角色以进行完全集成是另一个步骤，以及合理化配置文件信息（如全名等）。

以任何方式快速启动都很好，而无需搜索现在使用用户 ID 的所有内容并进行更改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-10T17:26:25.210

终于回来回答问题了。我们实际上有点废弃了表单身份验证中的内容。角色与 Windows 身份验证的工作方式完全不同，配置文件也是如此。我们使用自定义配置文件提供程序而不是内置配置文件提供程序。如果有人对我们所做的工作感兴趣，我会整理一系列四篇博客文章，详细介绍我们在环境中所做的工作以及我们遇到的一些故障：[第 1](http://aspadvice.com/blogs/net_discoveries/archive/2012/06/14/The-Other-Side-of-ASP.Net-Windows-Authentication_2C00_-Part-1.aspx)部分、[第 2](http://aspadvice.com/blogs/net_discoveries/archive/2012/07/02/The-Other-Side-of-ASP.Net-Windows-Authentication_2C00_-Part-2.aspx)部分、[第 3 部分](http://aspadvice.com/blogs/net_discoveries/archive/2012/08/01/The-Other-Side-of-ASP.Net-Windows-Authentication_2C00_-Part-3.aspx)和[第 4 部分](http://aspadvice.com/blogs/net_discoveries/archive/2012/08/15/The-Other-Side-of-ASP.Net-Windows-Authentication_2C00_-Part-4.aspx)。

# iphone - 如何在同一场景的单独图层中预加载游戏资源

> ID：10132296
> 
> 赞同：2
> 
> 时间：2012-04-12T21:41:51.403
> 
> 标签：iphone, objective-c, ios, cocos2d-iphone

对于我的 Cocos2d 游戏，我希望在主游戏开始之前加载所有资产（纹理图集和声音文件）。为此，我在主游戏场景中创建了一个图层并将其命名为 preloadLayer，并将其作为最顶层的图层添加到场景中。

preloadLayer 由 2 个精灵组成，一个覆盖屏幕的上半部分，一个覆盖屏幕的下半部分。加载完所有资产后，我希望两个精灵表移出屏幕以显示主游戏。

他的 preloadlayer 将加载以下内容：

*   一张背景png图片
*   一张精灵表png图像
*   几个声音文件
*   一种字体图集

问题是：

*   实现这一目标的最佳方法是什么？
*   我如何告诉其他层 preloadlayer 已经完成加载。
*   我如何告诉 preloadLayer 一切都已加载，它可以消失在屏幕外以显示其他图层。

对于纹理图集，我使用 ;`[CCSpriteFrameCache sharedSpriteFrameCache]`对于字体图集，我使用`[CCLabelBMFont labelWithString:Str fntFile: file]`;加载它。

非常感谢您对此提供的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T15:43:37.220

您可以使用回调将图像异步预加载到缓存中。

```
[[CCTextureCache sharedTextureCache] addImageAsync:imagePath target:self selector:@selector(imageLoaded:)]; 
```

回调的签名：

```
-(void)imageLoaded:(CCTexture2D*)texture; 
```

配置您的回调，以便您可以发现您的最后一个图像已加载。请记住，如果您以这种方式启动多个图像加载，它们可能不会按照它们开始的顺序完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T22:39:37.573

`CCTextureCache`像这样使用：

```
[[CCTextureCache sharedTextureCache] addImage:@"myImageName"]; 
```

对于声音：

```
[[SimpleAudioEngine sharedEngine]preloadBackgroundMusic:@"myMusicFile"];
// or
[[SimpleAudioEngine sharedEngine]preloadEffect:@"myEffectSoundFile"]; 
```

效果用于小文件，大文件的背景音乐经常循环播放

最简单的方法...而且它在内存管理方面很棒（又名..当您收到 1 级内存警告时它会自行释放）

查看类参考以获取更多方法和详细信息

编辑：

只需执行以下操作：

```
if([[CCTextureCache sharedTextureCache] addImage:@"myImageName"]) {
//image loaded
} 
```

我忘了说的是，如果你使用 if 你不需要做另一个，所以 if 替换加载本身（但我想这很明显）但我说它只是为了非常清楚

# asp.net - 如何在mysql数据库中存储文件列表并根据用户角色显示它们

> ID：10132302
> 
> 赞同：2
> 
> 时间：2012-04-12T21:42:01.840
> 
> 标签：asp.net, mysql, asp.net-mvc-3, roles

我是一个 asp.net mvc 新手。自从经典的asp以来，我还没有真正做过任何事情。我想根据用户角色显示来自 Mysql 数据库的文件列表。到目前为止，我已经创建了两个表，其中一些文件可以由多个角色查看。我也在使用 MySql Membership Provider

表格**文件**

```
FileID, FileName, FilePath 
```

表**文件角色**

```
FileID, RoleID 
```

我想我可以将一个文件添加到 files 表中，然后对于每个有权访问该文件的角色，我需要将 fileID 添加到 FilesRole 表中，并`RoleID`从`my_aspnet_roles`表中获取并将其添加到。

然后以某种方式，当有人去查看文件时，它将获取他们所在的每个角色的 ID，然后从数据库中获取文件列表

我不知道从哪里开始，所以任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T10:27:59.980

让我让你快速了解：

# 1.创建用户并将其添加到角色

Webdeveloper Express 和 Visual Studio 为您的网站提供了一个 Web 管理工具：

> 要访问网站管理工具，请在网站菜单上单击 ASP.Net 配置。

参考：http: [//msdn.microsoft.com/en-us/library/yy40ytx0.aspx](http://msdn.microsoft.com/en-us/library/yy40ytx0.aspx)

您可以从那里添加用户和角色以及添加用户到角色。

# 2\. 创建数据库记录（假设您有某种 mysql 管理面板）

现在在您的数据库中创建一些文件记录，并在文件和角色之间创建一些关联记录。我会使用`RoleName`，而不是`RoleID`因为默认 RoleProvider 接口适用于`string`名称。

# 3.学习如何从ASP.NET查询mysql数据库

例如阅读：http: [//support.discountasp.net/KB/a358/how-to-query-a-mysql-database-in-aspnet.aspx](http://support.discountasp.net/KB/a358/how-to-query-a-mysql-database-in-aspnet.aspx)

# 4\. 根据用户角色创建正确的查询

```
string[] userRoles = Roles.GetRolesForUser(HttpContext.Current.User.Identity.Name);

// creates "'role1','role2' from array.
string userRolesForSqlQuery = userRoles.Select(x => "'" + x + "'").Aggregate((a,b) => a + "," + b); 

//Psuedo code for querying the database...
var fileForUserQuery = String.Format("SELECT FileID, FileName, FilePath FROM Files 
                           INNER JOIN FilesRole ON Files.FileID = FilesRole.FileID
                           WHERE FilesRole.RoleName IN ({0});", userRolesForSqlQuery); 
```

希望这能让你到达那里......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T05:40:09.470

这就是我到目前为止所拥有的。它有效，但我知道这是不正确的，因为我在控制器中做数据库的东西，应该在模型中完成，但我不知道如何以这种方式完成它。

模型

```
public class files
{
    public int fileid { get; set; }
    public string fileName { get; set; }
    public string filePath { get; set; }
} 
```

控制器

```
public ActionResult Index()
    {
        IList<files> downloads = new List<files>();
        // Get Users Role(s) thanks Ropstah
        string[] userRoles = Roles.GetRolesForUser(User.Identity.Name);
        string userRolesForSqlQuery = userRoles.Select(x => "'" + x + "'").Aggregate((a, b) => a + "," + b);

        // MySql Connection thanks again Ropstah
        string connectionString = "my data source";
        var MySqlConnectionString = String.Format(@"SELECT fileid, fileName, filePath, FROM downloads
                                                    INNER JOIN downloadsroles on downloads.fileid = downloadsroles.downloadsid
                                                    WHERE downloadsroles.roleName IN ({0});", userRolesForSqlQuery);

        MySqlConnection conn = new MySqlConnection(connectionString);
        MySqlCommand comm = conn.CreateCommand();
        MySqlDataReader Reader;
        comm.CommandText = MySqlConnectionString;
        conn.Open();
        Reader = comm.ExecuteReader();

        while (Reader.Read())
        {
            downloads.Add(new files() { fileName = Reader["fileName"].ToString(),
                                        filePath = Reader["filePath"].ToString()});
        }

        conn.Close();

        return View(downloads);
    } 
```

看法

```
@foreach (var downloads in ViewData.Model)
{
<tr>
    <td>
        @downloads.fileName
    </td>
    <td>
        @downloads.filePath
    </td>
</tr>
} 
```

# perl - 如何强制目录与颠覆服务器保持精确同步

> ID：10132309
> 
> 赞同：2
> 
> 时间：2012-04-12T21:42:33.133
> 
> 标签：perl, svn

我有一个目录结构，其中包含一堆应用程序的配置文件。该结构在 Subversion 中维护，然后一些系统检查了该目录结构。开发人员对存储库中的结构进行更改，服务器上的脚本只是定期运行“svn 更新”。

但是，有时我们有些人会无意中删除其中一个目录下的 .svn 目录，或者将不属于的文件放入其中。我尽我所能切断程序不忠者的手，但我仍然希望我的更新脚本能够优雅地（嗯，自动地）处理这些更改。

所以，我需要的是一种删除不在颠覆中的文件的方法，以及一种继续并踩在本地目录上的方法，该目录妨碍存储库中的某些内容。所以，像这样的警告

```
Fetching external item into '/path/to/a/dir'
svn: warning: '/path/to/a/dir' is not a working copy 
```

和

```
Fetching external item into '/path/to/another/dir'
svn: warning: Failed to add directory '/path/to/another/dir': an unversioned directory of the same name already exists 
```

应该会自动解决。

我担心我必须在脚本中解析 svn 状态输出，或者使用 svn C API 并编写我自己的“清理”程序来完成这项工作（是的，它必须以这种方式工作；rsync / tar + scp，以及由于各种原因而无法选择的任何其他选项）。但是，如果有人有解决该问题的解决方案（或部分解决方案），我将不胜感激。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T22:16:31.717

怎么样

```
rm -rf $project
svn checkout svn+ssh://server/usr/local/svn/repos/$project 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T02:56:22.457

我写了一个 perl 脚本，首先运行 svn cleanup 来处理任何锁，然后解析 svn status 的 --xml 输出，删除任何状态不好的东西（除了外部，这有点复杂）

然后我发现了这个： http: [//svn.apache.org/repos/asf/subversion/trunk/contrib/client-side/svn-clean](http://svn.apache.org/repos/asf/subversion/trunk/contrib/client-side/svn-clean) 即使这不能满足我的所有需求，我可能会丢弃大部分我的代码，只是增强了一点。我的 XML 解析没有想象中的那么漂亮，而且我确信这比启动系统命令要快一些（这对非常大的存储库和每五分钟运行一次的命令很重要）。

我最终在这个问题的答案中找到了该脚本 - [Automatically remove Subversion unversioned files](https://stackoverflow.com/questions/239340/automatically-remove-subversion-unversioned-files) - 隐藏在使用 Tortoise SVN 的所有建议中。

# jquery - 显示错误图像的 JQuery Cycle 插件

> ID：10132310
> 
> 赞同：0
> 
> 时间：2012-04-12T21:42:36.737
> 
> 标签：jquery, wordpress, jquery-plugins, cycle

哦，很棒的论坛，

请帮忙！！我在使用基本 JQuery Cycle 插件时遇到问题，我在其中为父/包装器 div 中的 3 个独立 div 定义了类。每个 div 里面有 3 个图像，这些图像是特定于它们各自的父级的。问题是 JQuery Cycle 插件在错误的 div 中显示图像！！如果有人可以为我提供解决方案并解释为什么会发生这种情况，那就太好了。如果它有所作为，我正在 Wordpress 中工作。这是html：

```
<div class="gateway_img_containers clearfix">
    <div class="left_gateway_img_holder">
        <img src="<?php bloginfo('template_url'); ?>/images/position1_img_left.jpg" />
        <img src="<?php bloginfo('template_url'); ?>/images/position2_img_left.jpg" />
        <img src="<?php bloginfo('template_url'); ?>/images/position3_img_left.jpg" />
    </div>
    <div class="middle_gateway_img_holder">
        <img src="<?php bloginfo('template_url'); ?>/images/position2_img_left.jpg" />
        <img src="<?php bloginfo('template_url'); ?>/images/position_2_img_middle.jpg" />
        <img src="<?php bloginfo('template_url'); ?>/images/position_2_img_right.jpg" />
    </div>
    <div class="right_gateway_img_holder">
        <img src="<?php bloginfo('template_url'); ?>/images/position3_img_left.jpg" />
        <img src="<?php bloginfo('template_url'); ?>/images/position_3_img_middle.jpg" />
        <img src="<?php bloginfo('template_url'); ?>/images/position_3_img_right.jpg" />
    </div>
</div> 
```

这是JQuery：

```
<script type="text/javascript" src="<?php bloginfo('template_url'); ?>/js/jquery.cycle.all.js"></script>

<script type="text/javascript">
    var $j = jQuery.noConflict();
    $j(document).ready(function(){
        $j('.left_gateway_img_holder').cycle();
    });
</script>

<script type="text/javascript">
    var $j = jQuery.noConflict();
    $j(document).ready(function(){
        $j('.middle_gateway_img_holder').cycle();
    });
</script>

<script type="text/javascript">
    var $j = jQuery.noConflict();
    $j(document).ready(function(){
        $j('.right_gateway_img_holder').cycle();
    });
</script> 
```

我可以通过在循环（）中指定它们来限制显示哪些图像吗？

如果您需要更多信息，请告诉我！谢谢 :)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T12:48:01.940

```
<script type="text/javascript">
    var $j = jQuery.noConflict();
    $j(document).ready(function(){
        $j('.left_gateway_img_holder').cycle();
        $j('.middle_gateway_img_holder').cycle();
        $j('.right_gateway_img_holder').cycle();
    });
</script> 
```

您不需要编写不同的就绪函数，尝试为所有 div 添加相对位置和隐藏溢出

# javascript - emberjs - 构建应用程序的最佳实践？

> ID：10132311
> 
> 赞同：3
> 
> 时间：2012-04-12T21:42:46.163
> 
> 标签：javascript, performance, model-view-controller, memory, ember.js

我来这里是因为我问我一些关于 emberjs 框架的问题以及使用它构建应用程序的最佳方式...有一些问题希望有人能回答我：

1.  是否有任何内置系统可以有效地管理内存？
2.  如何在应用程序生命周期中管理要实例化和销毁的控制器/视图/模型？
3.  我们是否必须在应用程序开始时声明所有控制器和视图？
4.  当主控制器（或 stateManager）将视图添加到 DOM 时，有没有办法自动实例化视图的控制器？

为了恢复我的情况，我测试了 ember 的功能并很好地理解了所有这些。但现在，我有点困惑，不知道如何构建我的应用程序。何时实例化视图及其控制器，何时何地销毁视图控制器以提高内存性能等...

有没有人在这个时候和我一样，对我有一些答案？

非常感谢所有答案和帮助，我现在已经感谢您的反馈

再见！

编辑：我将 emberjs 与 requireJs 一起使用，以便能够分离我的 javascript 文件。有没有最好的解决方案或内置的解决方案？

（对不起我的英语不好）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T21:44:56.827

这些链接应该会有所帮助。

[https://stackoverflow.com/questions/9241735/tutorial-or-pdf-for-ember-js](https://stackoverflow.com/questions/9241735/tutorial-or-pdf-for-ember-js)

[http://ngauthier.com/2012/02/playing-with-ember.html](http://ngauthier.com/2012/02/playing-with-ember.html)

[http://www.infoq.com/articles/emberjs](http://www.infoq.com/articles/emberjs)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T04:43:01.583

requirejs 不适合 emberjs，Ember 是建立在 minispade.js 中一个更简单的 require() 之上的，它不是 AMD。

有人建议我使用 ember.js 完成 2 个很酷的任务

*   grunt-neuter ：只需使用 require('module')，因此中性可以按正确的顺序连接您的应用程序
*   grunt-ember-template ：将您的模板文件编译成一个全局 template.js，易于使用。

我个人像 HMVC 一样管理我的应用程序，我需要每个模块文件到它自己的模块控制器中，我的 app.js 只初始化每个模块索引控制器，所以当我查看我的 app.js 时我知道加载了什么模块

```
- app.js
- modules/
     -- module1
         - module1Controller.js // initiate this in the app.js, which ain't required for ember
         - module1Model.js      // (if non ember) returns static methods that can be used by other modules
         - module1View.whatever // this should be compiled into the template.js, just easier to manage in the same folder
     -- module2
     -- module3 ... 
```

# events - Flex 应用程序空闲监视器

> ID：10132314
> 
> 赞同：0
> 
> 时间：2012-04-12T21:42:53.367
> 
> 标签：events, apache-flex, keyboard, listen

systemManager.addEventListener(FlexEvent.IDLE, onIdle) 适用于鼠标事件。

键盘事件呢？在 systemManager 侦听键盘事件之前，您必须关注某些元素。

**部分解决方案：**在 applicationComplete 事件中，我添加了以下行 stage.addEventListener(KeyboardEvent.KEY_DOWN, handleKeyDown); 现在键盘事件正在被监听。

**缺点：**只有在应用程序至少被点击一次后才能工作。然后工作正常

有什么方法可以让应用程序监听键盘事件而无需点击一次。有人建议添加“stage.focus = this”。也没有工作。（仍然需要点击）。

我还可以使用该逻辑向我的应用程序添加键盘快捷键。

# jquery - 使用 Coffeescript 隐藏 在铁轨上

> ID：10132317
> 
> 赞同：0
> 
> 时间：2012-04-12T21:43:17.017
> 
> 标签：jquery, ruby-on-rails, coffeescript

我有一个通过调用部分渲染的项目列表

```
render @items 
```

每个项目都放在一个 div 中，并有一个 JS '禁用'链接

```
<div id="item_id_<%=item.id%>
   <%=item.name>
   <%= link_to disable_item_path(item), :remote => true %>
</div> 
```

在控制器内部，我将数据库中项目的标志更改为 False，并希望重新渲染页面并从列表中删除该项目。

我一直在通过 disable.js.coffee 中的以下代码这样做

> $('#items_list').html("<%= escape_javascript(render(:partial => @items)) %>")

我的问题：我只想隐藏特定项目 DIV，而不是重新呈现页面上的所有项目（为什么？因为我认为它是更好的编码）。

**我怎么做？**我尝试将@item_id 传递给coffeescript，并执行类似的操作

```
$('item_id'+@item_id).hide 
```

但是从这里的阅读来看，这似乎是错误的做法。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T22:18:03.243

要简单地隐藏 div，请将其放入您的`disable.js.coffee`文件中：

```
$("#item_id_<%= item.id %>").hide() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T22:06:57.473

为什么不`#items`为每个子`.item`类设置一个父 div，然后引用 by`$('#items > .item').hide`或类似的东西。

此刻你有

```
<div id="item_id_1">...</div>
<div id="item_id_2">...</div>
<div id="item_id_3">...</div> 
```

等等。

相反，您可以拥有：

```
<div id="items">
  <div class="item">...</div>
  <div class="item">...</div>
  <div class="item">...</div>
</div> 
```

# git - 我如何解释这些说明？

> ID：10132320
> 
> 赞同：0
> 
> 时间：2012-04-12T21:43:31.107
> 
> 标签：git, github

如果我的解释有误，请纠正我，我是 github 的菜鸟

我的老板告诉我这个

1.  在您的 PC 中创建此 repo 的本地分支并执行 pull 以在本地计算机上安装应用程序的本地副本。

2.  在您的 PC 中创建多点分支并从此 repo 执行 pull。

3.  你需要得到这 3 个文件： file1.js file2.js file3.js

我将其解释为：（如果我弄错了，请纠正我）

1.  所以我分叉回购并将其克隆到我的电脑上

    git clone _my_repo_url_

    git 远程添加上游 _original_repo_url_

    git 拉上游

尝试这给了我这个错误

您要求从远程“上游”拉取，但没有指定分支。因为这不是您当前分支的默认配置远程，所以您必须在命令行上指定一个分支。

1.  创建一个名为“多点”的新分支（--？什么是“多点分支”）

    git checkout -b 多点

所以我必须再拉一次对吗？

```
git fetch upstream 
```

1.  我完全不知道:(

请帮帮我，git 和 github 不是我的强项

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T05:51:59.847

根据您老板的有限描述，这是一个猜测，但这看起来很可能：

```
$ git clone <the repo> <my-working-directory> 
```

使用克隆，您会自动定义一个名为“origin”的远程和一个跟踪 origin/master 的“master”分支。

```
$ cd <my-working-directory>
$ git remote show origin 
```

show 的结果应该表明“原点”上存在哪些分支 - 希望你看到“多点”。

```
$ git branch --track multipoint origin/multipoint 
```

您现在已经创建了一个跟踪原点/多点的本地“多点”分支。

```
$ git checkout multipoint 
```

此时，您的三个文件应该存在！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T22:46:24.590

从您的描述中很难看出，但您可能想做这样的事情：

1.  在 github 网站上 fork 存储库，以便您拥有一个具有读写访问权限的存储库。
2.  将你的 fork 克隆到本地机器（github 将提供要克隆的 url） git clone
3.  将新的远程添加到原始存储库（您可能只有读取权限的存储库） git remote add upstream
4.  git checkout -b multipoint（获取功能分支）
5.  破解

在稍后的时间点，您可以使用以下命令从原始存储库中删除新提交：

1.  git结账大师
2.  git pull 上游大师

最后（如果你愿意的话）移动你的提交，使它们基于新的主人：

1.  git checkout 多点
2.  git rebase 大师

# button - LinkedIn按钮显示间歇性

> ID：10132328
> 
> 赞同：3
> 
> 时间：2012-04-12T21:44:18.437
> 
> 标签：button, cross-domain, linkedin

我正在使用代码在此页面[http://new.janeirodigital.com上放置一个 linkedIn 关注按钮（在此处生成](http://new.janeirodigital.com)[https://developer.linkedin.com/plugins/follow-company](https://developer.linkedin.com/plugins/follow-company) ） （查看客户推荐部分）。但是，按钮有时会显示，有时不显示。

我已经阅读了一些可能导致此问题的跨域问题，但我无法找到解决此问题的解决方法。如果您在 Chrome 中访问该页面并查看错误控制台，您会看到一些错误，例如关于链接的按钮，例如：

不安全的 Javascript 尝试从带有 URL [http](http://platform.linkedin.com/js/....Domains) ://platform.linkedin.com/js/....的框架访问带有 URL mysite.com 的框架。域、协议和端口必须匹配。

以前有人遇到过这个问题吗？

任何帮助感谢丹尼尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T22:43:05.897

您在 Chrome 的开发者控制台中看到的消息与您的问题无关。它们是跨域通信的产物，您会注意到，您在 Facebook 和 Twitter 上也可以在同一页面上看到它们。

也就是说，查看您的页面时，我还看到 FollowCompany 插件正在进行的一些后端调用的间歇性 403。我已经向我们的国家奥委会通报了这个问题，他们现在应该进行调查。

查看您的页面，您似乎已经完成了所有必要的工作并已设置好，因此一旦我们解决了操作问题，您应该可以开始了。

对于给您带来的任何不便，我深表歉意！

-杰里米

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T17:49:03.110

我刚刚发现当页面上有多个关注按钮时会发生这种情况，如果您删除第一个和第二个显示没有问题但其他人有同样的问题......

希望这可以帮助您的团队杰里米！

# php - preg_matchvalidation

> ID：10132329
> 
> 赞同：1
> 
> 时间：2012-04-12T21:44:22.433
> 
> 标签：php, validation

好的，我在这个网站上检查过的所有关于验证的东西都不是我想要的。

我要做的是名字和名字中值的最小长度和最大长度，这是我目前拥有的代码。

```
 if (isset($_POST['submit'])) {
        $errors = array();

                 if (isset($_POST['firstname'])) {
            $fn = $_POST['firstname'];
        } else {
            $errors[] = "You have not entered a first name";
        }

        if (isset($_POST['secondname'])) {
            $sn = $_POST['secondname'];
        } else {
            $errors[] = "You have not entered a second name";
        } 
```

我只是想知道如何将 preg_match 应用于最小为 4 个字母且最大为 15 个字母的那些？

我知道这与

```
if(preg_match('/^[A-Z \'.-]{4,15}$/i', $_POST['firstname'])) 
```

在这样做时，我试图做

```
 if (isset($_POST['firstname']) && preg_match('/^[A-Z \'.-]{4,15}$/i', $_POST['firstname')) { 
```

但这也给了我一个错误：/

谁能给我一个解决方案？

谢谢！

更新：-

Nvm，我找到了解决方法。我刚做了这个

```
if (isset($_POST['firstname'])) {
        if (preg_match('/^[A-Z \'.-]{4,15}$/i', $_POST['firstname'])) {
            $fn = $_POST['firstname'];
        } else {
            $errors[] = "<center> <h3> You must enter between 4 and 15 characters! </h3></center>";                  
        }
    } else {
        $errors[] = "You have not entered a name"; 
```

} 对于名字和名字。:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T21:46:56.573

您为什么不直接使用`strlen()`来获取字符串长度，然后根据您的限制对其进行测试？

```
$length = strlen($nick);
if ($length > 3 AND $length < 16) {
    //Do STuff
} else {
    //Do stuff for failed requirement
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T22:51:35.463

我找到了解决方法。我刚做了这个

```
if (isset($_POST['firstname'])) {
            if (preg_match('/^[A-Z \'.-]{4,15}$/i', $_POST['firstname'])) {
                $fn = $_POST['firstname'];
            } else {
                $errors[] = "<center> <h3>You must enter between 4 and 15 characters!</h3> </center>";                  
            }
        } else {
            $errors[] = "You have not entered a name";
   } 
```

对于名字和姓氏。

# javascript - 在更改选择值时，显示某些 div 内容

> ID：10132331
> 
> 赞同：1
> 
> 时间：2012-04-12T21:44:24.757
> 
> 标签：javascript, jquery, html

这是HTML代码

```
<select id="language">
    <option value="en">english</option>
    <option value="fr">french</option>
    <option value="gr">german</option>
</select>

<div id="related_en_content">
    english text
</div>

<div id="related_fr_content">
    french text
</div>

<div id="related_gr_content">
    german text
</div> 
```

每个 div 都与选择中的一个选项相关，我想`div`在更改选择选项时替换。

这是我尝试过的：

```
$(document).ready(
    function() {
        $("#language").change(
            function() {
                $("#" + this.value).show().siblings().hide();
            });
        $("#language").change();
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T21:55:52.897

```
<select id="language">
    <option value="en">english</option>
    <option value="fr">french</option>
    <option value="gr">german</option>
</select>

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>

<div>
<div id="related_en_content">
    english text
</div>

<div id="related_fr_content">
    french text
</div>

<div id="related_gr_content">
    german text
</div>
</div>
<script>
$("#language").on("change", function() {
    id = "related_" + $(this).val() + "_content";
    $("#" + id).show().siblings().hide()
})
</script> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T21:51:42.223

```
$('[id^="related"]').not(':first').hide();

$("#language").on('change', function() {
    $("#related_"+this.value+"_content").show().siblings('[id^="related"]').hide();
}); 
```

[小提琴](http://jsfiddle.net/adeneo/bJT3B/1/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-12T21:51:51.367

```
<select id="language" onchange:"javascript:handle_language(this)">
    <option value="en">english</option>
    <option value="fr">french</option>
    <option value="gr">german</option>
</select>

<script>
  function handle_language(what){
       document.getElementById('related_en_content').style.visibility='hidden';
       document.getElementById('related_fr_content').style.visibility='hidden';
       document.getElementById('related_gr_content').style.visibility='hidden';
     if(what.value=="en"){
       document.getElementById('related_en_content').style.visibility='visible';
     }
     if(what.value=="fr"){
       document.getElementById('related_fr_content').style.visibility='visible';
     }
     if(what.value=="gr"){
       document.getElementById('related_gr_content').style.visibility='visible';
     }
  }
</script>

<div id="related_en_content">
    english text
</div>

<div id="related_fr_content">
    french text
</div>

<div id="related_gr_content">
    german text
</div> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-12T21:58:34.863

```
$(document).ready(function(){  
    $("#language").change(function(e){ 
        $('[id^="related"]')
        .not($('#related_'+$(this).val()+'_content'))
        .hide();
        $('#related_'+$(this).val()+'_content').show()
    }); 
});​ 
```

[**例子**。](http://jsfiddle.net/heera/S5fbc/1/)

# php - wp_list_pages 未列出包含的页面

> ID：10132332
> 
> 赞同：1
> 
> 时间：2012-04-12T21:44:27.327
> 
> 标签：php, wordpress, custom-fields

好吧，这真的让我很烦！我写了一个函数（嗯，修改了一个与 wordpress 代码非常相似的函数），只要页面有子页面或是子页面，它就会列出所有子页面和父页面。那一点效果很好，但我现在想做的是让它在一个自定义字段（添加到导航）中查找，该字段具有到另一个页面的路径以添加到列表的末尾。它检查该自定义字段的页面和父级。

它似乎在呼应所有正确的细节，但由于某种原因不会将该页面添加到列表中。非常感谢任何帮助！

```
function add_sec_nav_w_extras(){

    global $post;
    global $wpdb;
    $key = 'add-to-nav';
    $addition = get_post_meta($post->ID, $key, TRUE);
    if($addition == '') {$addition = get_post_meta($post->post_parent, $key, TRUE);}
    if($addition != '') {
        $addition_page = get_page_by_path($addition);
    }
        echo("Addition page: ".$addition_page->post_title."<br/>Addition ID: ".$addition_page->ID."<br/>Current: ".$post->ID."<br/>Parent: ".$post->post_parent);

    ?><section id="secondnav_w_parent" class="fix"><ul><?php
    if($post->post_parent != "0") { // If post has parent, list that parent and all its children
        wp_list_pages( array('title_li'=>'','include'=>$post->post_parent) );
        wp_list_pages( array('title_li'=>'','depth'=>1,'child_of'=>$post->post_parent) );
        if($addition_page != ''){
            wp_list_pages( array('title_li'=>'','include'=>$addition_page->ID) );
        }
    }

    else if(get_pages('child_of='.$post->ID)) { // If post is a parent, list itself and all children
        wp_list_pages( array('title_li'=>'','include'=>$post->ID) );
        wp_list_pages( array('title_li'=>'','depth'=>1,'child_of'=>$post->ID) );
        if($addition_page != ''){
            wp_list_pages( array('title_li'=>'','include'=>$addition_page->ID) );
        }
    }
    ?></ul></section><?php
} 
```

编辑：

好的，现在我知道为什么它没有出现了……我告诉它不要出现！我正在使用排除页面插件，以便页面不会出现在主导航中，这显然会影响使用 wp_list_pages 的任何内容。所以现在我需要找到一种方法来强制它在那里......有什么想法吗？

编辑2：

现在禁用排除页面插件并使用主导航的自定义菜单。有点痛，但我想还不错。如果有人有更好的建议，请告诉我！

# javascript - 循环（将项目存储在集合中）似乎迭代的次数少于它应该的次数？

> ID：10132336
> 
> 赞同：2
> 
> 时间：2012-04-12T21:44:40.670
> 
> 标签：javascript, for-loop

我想在本地存储中添加 60 个东西。在 for 循环中，我正在创建一个对象，将其转换为字符串并将其添加到 localstorage，并以时间为键。

```
function populate()
{
    for(var i=0; i < 60; i++)
    {
        var newDate = new Date();
        var card = {
            'name': i,
            'cost': i,
            'type': i,
            'text': i,
            'power': i,
            'toughness': i};    
        localStorage.setItem(newDate.getTime(), JSON.stringify(card));
    }
} 
```

逻辑规定这应该发生 60 次。在实践中，它会发生大约 2 到 20 次，并且赋予对象属性的 i 值变化很大。有时我得到 2 的值为 11 和 59，有时我得到 18 的数字从 1 到 59 或 60。这个 for 循环没有按应有的次数迭代，但它甚至没有按顺序进行，它似乎是随机的。

这里发生了什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-12T21:45:50.237

您遇到了重叠时间的问题，因此不会插入重复项。这将分离重复项。您可以选择不同的实现或 GUID，这取决于您的判断。

```
function populate()
{
for(var i=0; i < 60; i++)
{
    var newDate = new Date();
    var card = {
        'name': i,
        'cost': i,
        'type': i,
        'text': i,
        'power': i,
        'toughness': i};    
    localStorage.setItem("" + i + newDate.getTime(), JSON.stringify(card));
}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T21:49:02.380

关于它发生的原因，请参阅 Traviss 的回答，但如何在不更改密钥的情况下解决它，因为我猜您可能希望在可以执行此操作时参考它：

```
function populate()
{
    for(var i=0; i < 60; i++)
    {
        var newDate = new Date();
        var card = {
            'name': i,
            'cost': i,
            'type': i,
            'text': i,
            'power': i,
            'toughness': i};    
        setTimeout(function(){localStorage.setItem(newDate.getTime(), JSON.stringify(card));},1);
    }

} 
```

# apache-flex - 灵活过滤器无法正常工作

> ID：10132341
> 
> 赞同：0
> 
> 时间：2012-04-12T21:44:58.880
> 
> 标签：apache-flex, datagrid, filter, flexicious

我正在使用 Flexicious Ultimate 数据网格来可视化一些数据。我正在为某些列使用内置的过滤器字段。

如果我不对提供的单元格数据使用任何标签函数，这将正常工作。Flexicious 过滤器数据是根据该特定行的单元格中的数据自动构建的。当我在单元格数据上使用标签函数时，过滤器值显示正确，但是当我选择显示特定值时，数据网格返回 0 条记录。

示例：dataprover.Price = 25 使用货币格式化程序，因此单元格数据为 25 欧元数据网格的过滤器字段显示来自所有单元格的所有不同数据值（不同的）。在这种情况下，它将是 ALL & €25。当我选择仅显示价格 = 25 欧元的字段时，数据网格返回 0 条记录。

我似乎找不到正确的设置来解决这个问题。有没有人可以帮助我解决这个问题？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T12:53:59.910

您是否尝试过设置 useLabelFunctionForFilterCompare=true？

# netbeans - 我想使用 javax jms

> ID：10132342
> 
> 赞同：1
> 
> 时间：2012-04-12T21:45:33.943
> 
> 标签：netbeans

我想在netbeans项目中使用javax.jms，但是netbeans告诉我没有这样的包，我该怎么办？

当我从终端尝试时发生此错误

线程“主”java.lang.NoClassDefFoundError 中的异常：javax/jms/MessageListener

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T22:18:33.667

你必须`jms-api.jar`在你的类路径中有。我从[HornetQ](http://www.jboss.org/hornetq/downloads.html)得到了我的。

***编辑***

我刚刚看到您说您使用的是 NetBeans。在这种情况下，您需要下载包含 Java EE 的 NetBeans 版本。 [去这里](http://netbeans.org/downloads/)下载那个。 [这个站点](http://dev.eek.be/2011/01/create-a-message-driven-bean-with-netbeans/)似乎有一个关于如何从那里进行设置的很好的教程。

# macos - 虚拟环境列表

> ID：10132344
> 
> 赞同：9
> 
> 时间：2012-04-12T21:45:37.010
> 
> 标签：macos, osx-lion, python-2.7, virtualenv

愚蠢的问题......我几个月前创建了一个virtualenv，但不记得它叫什么了。我在哪里可以找到它？

*   操作系统 10.7
*   Python 2.7.1
*   虚拟环境 1.6.4

谢谢！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-23T18:33:46.833

我建议您使用[virtualenvwrapper](https://virtualenvwrapper.readthedocs.io/en/latest/)，安装后您可以执行以下操作：

```
$ lsvirtualenv 
```

我还建议您使用`-b`（“简短”缩写）选项来更快：

```
$ lsvirtualenv -b 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-12T21:54:21.403

创建*virtualenv*实际上会创建一个具有该名称的新文件夹。你必须找到那个文件夹。

# php - PHP OOP：将父对象重铸为子类

> ID：10132348
> 
> 赞同：0
> 
> 时间：2012-04-12T21:45:52.353
> 
> 标签：php, oop

有没有一种简单的方法可以将父对象重铸为子类，最好是通过父类的方法。

例如，我可能有一个“访问者”类和扩展“访问者”的“成员”类。身份验证方法成功后是否可以重铸对象？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T21:51:18.697

您可以在类中定义一个构造函数，该构造函数`Visitor`将采用另一个`Visitor`对象并将所有属性复制到新对象中。然后这个构造函数将被继承到`Member`类，您将能够`Member`通过复制现有对象来创建`Visitor`对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T21:51:31.443

我能想到的最接近的解决方案是启动一个新的“成员”对象，将旧的访问者对象传递给构造函数。在构造函数中，您可以提取相关属性并将它们分配给新对象。

类似的模式也可以工作，但你不能直接在 php 中将某些东西转换为类：[

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T15:03:42.757

绝对不！用户通过身份验证后，请求结束，因此 Visitor 对象不再存在。在下一个请求中，您将直接加载 Member 对象（我假设您有某种工厂知道为每种用户类型实例化相关对象）

# jquery - jQuery ajax 没有获取每个 div 元素

> ID：10132350
> 
> 赞同：0
> 
> 时间：2012-04-12T21:46:31.710
> 
> 标签：jquery

我正在使用 $.ajax 解析带有 jQ​​uery 的 html 文档，我遇到以下问题，一些 div 有一些不常见的属性，如您所见：
`<div id='img' title='blabla' no='number' src='smthin'>content</div>`
但问题是 ajax 仅输出：
`<div id='img' title='blalba' src='smthin'>`
跳过 no 属性，我该如何解决它 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T21:59:06.207

您应该对 HTML 标记中的用户定义属性使用 data- 前缀。尝试使用 data-no 代替 no 属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T21:57:32.763

不确定我是否有足够的信息：http: [//jsfiddle.net/mikevoermans/yEREC/](http://jsfiddle.net/mikevoermans/yEREC/)

小提琴似乎保留了属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T22:00:29.390

尝试（如果可能）使用数据属性 [http://html5doctor.com/html5-custom-data-attributes/](http://html5doctor.com/html5-custom-data-attributes/)

# javascript - 使用 Enter 键移动到输入

> ID：10132351
> 
> 赞同：4
> 
> 时间：2012-04-12T21:46:32.447
> 
> 标签：javascript, jquery, forms, input, enter

是否可以使用回车键移动到表单中的下一个输入字段？我也想使用标签，但回车键也不错。

仅供参考 - 我确实有几个文本区域，我需要在输入时使用回车键返回。这会是冲突吗？

谢谢你。埃里克

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-12T21:52:22.630

如果您要在要循环输入的字段中添加一个名为“TabOnEnter”的类。

```
$(document).on("keypress", ".TabOnEnter" , function(e)
  {
    //Only do something when the user presses enter
    if( e.keyCode ==  13 )
    {
       var nextElement = $('[tabindex="' + (this.tabIndex+1)  + '"]');
       console.log( this , nextElement ); 
       if(nextElement.length )
         nextElement.focus()
       else
         $('[tabindex="1"]').focus();  
    }   
  });

//Hidden inputs should get their tabindex fixed, not in scope ;)
//$(function(){ $('input[tabindex="4"]').fadeOut();  }) 
```

不像之前的答案那么可爱，但它现在可以工作了：

[http://jsfiddle.net/konijn_gmail_com/WvHKA/](http://jsfiddle.net/konijn_gmail_com/WvHKA/)

通过这种方式，您可以使用标准 HTML 功能 (tabindex) 来确定循环顺序。隐藏元素的 tabindex 应该被移除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T21:49:25.890

在黑暗中拍摄（假设您的文本区域已排列）：

```
$(".myTextareas").keypress(function(e) {
    if(e.which == 13) {
        $(this).next('.myTextareas').focus();
    }
}); 
```

# ruby - 项目工具配置文件可以放在root以外的另一个地方？

> ID：10132353
> 
> 赞同：2
> 
> 时间：2012-04-12T21:46:46.920
> 
> 标签：ruby, rake, bundler, guard

当使用 Guard、Rake 和 Bundler 等将配置文件存储在项目根目录中的多个工具时，根文件夹开始变得杂乱无章，例如：

*   保护文件
*   耙文件
*   宝石文件
*   Gemfile.lock

如果使用其他工具，谁知道还有什么...

是否还有其他地方可以存储这些工具的配置文件，仍然允许以相同的方式调用它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T04:53:39.377

Rake 接受 --rakefile 或 -f [filename] Bundler 接受 --gemfile [filename]

因此，您可以创建一个目录，例如“toolfiles”并将 Rakefile 和 Gemfile 放入其中。当然，每次使用该工具时都包含文件名，您会被卡住。

我对Guardfile一无所知。

# java - 列表中的 CSV 或 JSON 文件

> ID：10132355
> 
> 赞同：0
> 
> 时间：2012-04-12T21:46:55.787
> 
> 标签：java, android, sql, json, list

因此，我从内部存储的 SQLite 表中填充了一个列表。我想将此列表发送到 Web 服务。我可以发送列表本身还是应该将其存储在 JSONarray 或 CSV 文件中？有没有一种简单的方法可以将列表转换为其中任何一个。请提供一些示例代码，因为我无法提出它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T21:50:41.717

为了遵循标准，我相信您绝对应该使用 JSON。如果它是一个列表，它很容易用简单的字符串连接构造 JSON。

我想 JSON 看起来像

```
{ col1:"Value1", col2:"Value2", col3:"Value3" } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T21:53:26.350

对于 JSON，您可以尝试使用 Gson 库以方便转换。杰克逊图书馆可能更有效。由于您要求提供示例，因此以下是[Gson 页面的片段](http://sites.google.com/site/gson/gson-user-guide)

集合示例

```
Gson gson = new Gson();
Collection<Integer> ints = Lists.immutableList(1,2,3,4,5); 
```

（序列化）

```
String json = gson.toJson(ints); ==> json is [1,2,3,4,5] 
```

（反序列化）

```
Type collectionType = new TypeToken<Collection<Integer>>(){}.getType();
Collection<Integer> ints2 = gson.fromJson(json, collectionType); 
```

否则看看protobufs - 可能更有效。

在 android 上，在某些情况下您可能会遇到 Gson 速度问题，但它应该可以工作

# wordpress - Wordpress 博客不显示帖子。添加自定义投资组合帖子字段会影响这一点吗？

> ID：10132360
> 
> 赞同：0
> 
> 时间：2012-04-12T21:47:18.473
> 
> 标签：wordpress, wordpress-theming

现在我已经做了几次没有问题，我有一个使用 home.php 的主页和另一个使用“blog-home.php”博客模板的博客，其中包含所有正确的代码来获取帖子，但它是不显示。唯一的区别是我在函数中添加了一个自定义的投资组合帖子字段，这会影响它还是其他什么？我可以从最新帖子下的主页访问帖子，将代码放在下面，仅此而已。

```
<?php query_posts("post_per_page=1"); the_post(); ?> 
  <p><?php the_excerpt(); ?></p>
  <?php wp_reset_query(); ?></div> 
```

**更新：我尝试了另一个代码，但现在它只将博客页面显示为帖子。**

```
<?php

/*
    Template Name: Blog Home
*/
?>
<?php get_header(); ?>
<div id="contentwrapper">
<?php query_posts( array ( 'category_name' => 'Blog', 'posts_per_page' => 5   ) ); ?>
        <?php if (have_posts()) : while (have_posts()) : the_post(); ?>
            <div <?php post_class() ?> id="post-<?php the_ID(); ?>">
                <div class="blogentry">
                <h4><a href="<?php the_permalink() ?>"><?php the_title(); ?></a>  </h4>
                <?php the_content(); ?>
                    <div class="postmetadata">
                        <?php the_tags('Tags: ', ', ', '<br />'); ?>
                    </div>
                <?php include (TEMPLATEPATH . '/inc/meta.php' ); ?>
                </div>

            </div>

            <?php endwhile; ?>

            <?php include (TEMPLATEPATH . '/inc/nav.php' ); ?>

            <?php else : ?>

            <h2>Not Found</h2>

            <?php endif; ?>

</div>

<?php get_footer(); ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T13:00:23.940

也许如果你使用

```
$posts = get_posts(array('numberposts' => 1));
global $post;
$post = $posts[0];
the_excerpt(); 
```

反而

```
query_posts(); 
```

如果 get_posts 不适合您尝试使用 WP_Query() 更改全局查询绝不是一个好主意

# c# - System.Windows.FrameworkElement.TargetUpdated="..." 无效。'TargetUpdated' 必须是 RoutedEvent

> ID：10132362
> 
> 赞同：1
> 
> 时间：2012-04-12T21:47:19.840
> 
> 标签：c#, wpf, xaml

我正在尝试通过编辑单元格样式将事件处理程序添加到 DataTable 中的单元格。具体来说，我正在设置

```
<EventSetter Event="TargetUpdated" Handler="TaskDescription_TextChanged1Event"/> 
```

这是我得到的错误：

```
System.Windows.FrameworkElement.TargetUpdated="TaskDescription_TextChanged1Event" 
   is not valid. 'TargetUpdated' must be a RoutedEvent registered with a name that 
   ends with the keyword "Event". 
```

这是 TaskDescription_TextChanged1Event 的代码：

```
 public void TaskDescription_TextChanged1Event(object sender, 
                              RoutedEventArgs e)
    {

    } 
```

我应该怎么做才能使它起作用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T21:51:19.730

您不能使用`EventSetters`未路由的事件，但是根据文档，它是路由[`FrameworkElement.TargetUpdated`](http://msdn.microsoft.com/en-us/library/system.windows.frameworkelement.targetupdated.aspx)的别名事件[`Binding.TargetUpdated`](http://msdn.microsoft.com/en-us/library/system.windows.data.binding.targetupdated.aspx)，因此订阅它可能会奏效。

# ruby-on-rails - Rspec：如何在辅助规范中指定 request.env？

> ID：10132363
> 
> 赞同：22
> 
> 时间：2012-04-12T21:47:25.550
> 
> 标签：ruby-on-rails, rspec, request, user-agent, specifications

在我的帮助模块中，我有：

```
def abc(url)
  ...
  if request.env['HTTP_USER_AGENT']
    do something
  end
end 
```

在我的规范文件中，我有：

```
 describe "#abc" do      
before(:each) do
  @meth = :abc

  helper.request.env['HTTP_USER_AGENT'] = "..."
end
it "should return the webstart jnlp file" do
  @obj.send(@meth, "some_url").should ....
end
end 
```

当我运行规范时，出现此错误：

```
undefined local variable or method `request' for <ObjectWithDocHelperMixedIn:0x00000103b5a7d0> 
```

如何在我的规范中为 request.env['...'] 存根？

谢谢。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-31T21:19:32.327

如果您正在使用[rspec-rails](https://github.com/rspec/rspec-rails)，您也许可以`controller.request`在您的辅助测试中使用。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-04-12T21:53:47.830

好吧，您几乎无事可做：

```
before(:each) do
  @meth = :abc

  request.env['HTTP_USER_AGENT'] = "..."
end 
```

我又试了一次，结果通过了：

```
#in helper
def foo
  request.env['HTTP_USER_AGENT']
end

#spec
it "foo" do
  helper.request.env['HTTP_USER_AGENT'] = 'foo'
  expect(helper.foo).to eq 'foo'
end 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-04-06T02:20:07.983

您可以通过执行以下操作覆盖在请求环境中设置的用户代理。

```
before(:each) do
  @meth = :abc
  helper.request.user_agent = 'something else'
end 
```

然后，在您的规范中：

```
it "does stuff" do
  expect(helper.send(@meth, "some_url")).to # ...
end 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2019-10-04T18:54:04.923

对于那些使用请求规范而不是控制器规范并想要设置的`request.env`人可以这样做：

```
Rails.application.env_config["whatever"] = "whatever" 
```

这将`request.env["whatever"]`在您的控制器中提供您在规格中提供的价值。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-12T22:18:33.787

尝试这个：

`stub(request).env { {"HTTP_USER_AGENT" => "Some String"} }`

# debugging - 如何取消跟踪多个功能

> ID：10132365
> 
> 赞同：3
> 
> 时间：2012-04-12T21:47:35.083
> 
> 标签：debugging, r, trace

如果我有一些相互关联的函数，那么跟踪它们的路径会很有用。也就是说，`trace`每次 R 进入或离开其中一个函数时，都会使用该函数给出一条消息。例如，

```
f <- function() g()
g <- function() h()
h <- function()
{
 if(runif(1) > 0.3) g() else 99
}

trace_my_fns <- function()
{
  fn_names <- c("f", "g", "h")
  invisible(trace(
    fn_names,
    tracer = quote(0),
    exit   = quote(0),
    where  = globalenv()
  ))
}

trace_my_fns()
set.seed(4)
f() 
```

完成此跟踪后，我需要取消跟踪它们。

```
untrace_my_fns <- function()
{
  fn_names <- c("f", "g", "h")
  invisible(trace(
    fn_names,
    where = globalenv()
  ))
}
untrace_my_fns() 
```

出于某种原因，这并不能正确地取消跟踪功能。要看到这一点，请看一下

```
f
body(f) 
```

如果我直接在每个函数上调用 untrace，例如`untrace(f)`在命令行中，它就可以工作。我应该如何创建一个函数来一次取消跟踪我的所有函数？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-12T22:00:12.317

好吧，改为：

```
untrace_my_fns <- function()
{
  fn_names <- c("f", "g", "h")
  invisible(untrace(
    fn_names,
    where = globalenv()
  ))
}

untrace_my_fns()
set.seed(4)
f() # no more tracing... 
```

...因为你打电话`trace`而不是`untrace`!

# c# - 如何让计时器持续一分钟然后停止

> ID：10132368
> 
> 赞同：2
> 
> 时间：2012-04-12T21:47:49.127
> 
> 标签：c#, windows-phone-7

我正在使用 DispatchTimer 每秒做某事，我怎样才能让它在一定时间内做某事，比如 1 分钟或 2 分钟？我需要花药嵌套的 DispatcherTimer 吗？

我的代码如下

```
System.Windows.Threading.DispatcherTimer dt = new System.Windows.Threading.DispatcherTimer();

    private void StartButton_Click(object sender, RoutedEventArgs e)
    {
        TimeSpan interval;
        interval = (TimeSpan)intervalPicker.Value;
        dt.Interval = interval;
        dt.Tick += new EventHandler(dt_Tick);
        dt.Start();
    }

    void dt_Tick(object sender, EventArgs e)
    {
       //Do Something
    } 
```

如果您能帮助我，我将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T21:53:08.230

使用`Stopwatch`类：

```
Stopwatch sw = new Stopwatch();

private void StartButton_Click(object sender, RoutedEventArgs e)
{
    sw.Start();
    ...
}

void dt_Tick(object sender, EventArgs e)
{
   // stops the timer after 66 seconds
   if(sw.ElapsedMilliseconds/1000 > 66)
   {
       dt.Stop();
       sw.Reset();
   }          
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T21:54:33.037

[Cimbalino Windows Phone 工具包](https://github.com/PedroLamas/Cimbalino-Phone-Toolkit)（在[NuGet](http://nuget.org/packages/Cimbalino.Phone.Toolkit)中可用）包含一个带有 BeginInvokeAfterTimeout() 方法的 DispatcherExtensions 类，该方法在指定的超时后执行一个 Action。

如果您愿意，您可以从源代码中复制[DispatcherExtensions](https://github.com/PedroLamas/Cimbalino-Phone-Toolkit/blob/master/src/Cimbalino.Phone.Toolkit/Extensions/DispatcherExtensions.cs)文件并在您自己的项目中使用它。

# sql - 不在 In SQL 语句中？

> ID：10132371
> 
> 赞同：7
> 
> 时间：2012-04-12T21:47:57.373
> 
> 标签：sql, sql-server, tsql, set-difference, notin

我在 excel 中设置了 5000 左右的 id，在表中我有 30000 左右的 id。如果我在 SQL 语句中使用“In”条件，我从 Excel 中的 id 中得到大约 4300 个 id。但是，如果我使用带有 Excel id 的“不在”。我有大约 25000 多条记录。我只是想知道我在表格中缺少 Excel id。

如何为此编写sql？

示例：Excel ID 是

```
 1,
 2,
 3,
 4,
 5,
 6,
 7,
 8,
 9,
10, 
```

表有 ID

```
 1,
 2,
 3,
 4,
 6,
 8,
 9,
11,
12,
14,
15 
```

现在我想`5,7,10`从 Excel 中获取缺少表格的值？

## 更新：

我正在做的是

```
SELECT  [GLID]      
  FROM [tbl_Detail] 
  where datasource = 'China' and  ap_ID  not in (5206896,
5206897,
5206898,
5206899,
5117083,
5143565,
5173361,
5179096,
5179097,
5179150) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-12T21:54:11.833

试试这个：

```
SELECT    tableExcel.ID
FROM      tableExcel
WHERE     tableExcel.ID NOT IN(SELECT anotherTable.ID FROM anotherTable) 
```

这是一个 SQL Fiddle 来试试这个：[sqlfiddle.com /#!6/31af5/14](http://sqlfiddle.com/#!6/31af5/14)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-12T21:58:41.953

您可能正在寻找[`EXCEPT`](http://msdn.microsoft.com/en-us/library/ms188055%28v=sql.90%29.aspx)：

```
SELECT Value 
FROM @Excel 
EXCEPT
SELECT Value 
FROM @Table; 
```

**编辑**：

`Except`将要

*   以不同的方式对待 NULL（NULL 值匹配）
*   应用[DISTINCT](http://msdn.microsoft.com/en-us/library/ms187831%28v=sql.90%29.aspx)

不像`NOT IN`

这是您的示例数据：

```
declare @Excel Table(Value int);
INSERT INTO @Excel VALUES(1);
INSERT INTO @Excel VALUES(2);
INSERT INTO @Excel VALUES(3);
INSERT INTO @Excel VALUES(4);
INSERT INTO @Excel VALUES(5);
INSERT INTO @Excel VALUES(6);
INSERT INTO @Excel VALUES(7);
INSERT INTO @Excel VALUES(8);
INSERT INTO @Excel VALUES(9);
INSERT INTO @Excel VALUES(10);

declare @Table Table(Value int);
INSERT INTO @Table VALUES(1);
INSERT INTO @Table VALUES(2);
INSERT INTO @Table VALUES(3);
INSERT INTO @Table VALUES(4);
INSERT INTO @Table VALUES(6);
INSERT INTO @Table VALUES(8);
INSERT INTO @Table VALUES(9);
INSERT INTO @Table VALUES(11);
INSERT INTO @Table VALUES(12);
INSERT INTO @Table VALUES(14);
INSERT INTO @Table VALUES(15); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-12T23:29:20.133

使用 SQL Server Management Studio 中的导入数据向导将您的 Excel 文件导入 SQL Server。

然后您可以编写以下查询来查找文件中但不在表中的任何 ID：

```
SELECT id     
FROM imported_table
WHERE id NOT IN (SELECT id FROM db_table) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-12T22:11:53.493

您应该将 excel 数据移动到 SQL Server 中的表中，然后在 SQL Server 中执行查询。

```
 select distinct id from Excel where id not in (select your ids from Sqltable) 
```

（显然，从 Sqltable 中选择您的 id 是一个选择，它返回 SQL Server 上存在的 Id）。

您可能认为将数据移动到 SQL Server 很难，但相反，它非常容易：

1）创建表

```
 CREATE TABLE ExcelIds (Id int) 
```

2）使用以下公式在excel中添加一个新列：

```
 ="insert into ExcelIds values(" & XX & ")" 
```

其中 XX 是对具有 excel Id 的列中的单元格的引用。

3) 将 Excel 中的“插入”复制到 SSMS 或您在 SQL Server 中使用的任何工具中，然后执行它们。

现在您在 SQL Server 中有 2 个表，因此查询它绝对容易。

当你结束时，只需放下桌子

```
DROP TABLE ExcelIds 
```

注意：我没有在 SQL Server 表上创建键，因为我认为 Id 可以重复。为避免此临时解决方案的 ExcelIds 中的重复，创建更复杂的 SQL 查询也是不合理的。

# c# - Stackoverflow 在大型集合初始化程序上启动

> ID：10132374
> 
> 赞同：8
> 
> 时间：2012-04-12T21:48:40.793
> 
> 标签：c#, .net, collections

我正在构建一个使用相对较大的表来完成工作的应用程序（准确地说是[LR 表](http://en.wikipedia.org/wiki/LR_parser)）。因为无论如何我都在生成代码并且表不是*那么*大，所以我决定通过生成代码来序列化我的表，该代码使用 C# 集合初始化器语法在我生成的程序启动时初始化表：

```
public static readonly int[,] gotoTable = new int[,]
{
    {
        0,1,0,0,0,0,0,0,0,0,0,0,0,0,(...)
    },
    {
        0,0,4,0,5,6,0,0,0,0,0,7,0,0,(...)
    },
    (...) 
```

奇怪的是，当我生成一个只有几十万条目的表时，我生成的应用程序在启动时崩溃并出现 StackOverflowException。C# 编译器编译它就好了；表生成应用程序也运行得很好。事实上，当我切换到发布模式时，应用程序确实启动了。OutOfMemoryException 可能有一定的意义，但即便如此，我使用的表对于 OutOfMemoryException 来说还是太小了。

重现此的代码：

***警告***：在发布模式下尝试下面的代码会使 Visual Studio 2010 崩溃；注意丢失未保存的工作。此外，如果您生成的代码编译器会产生大量错误，Visual Studio 也会挂起。

```
//Generation Project, main.cs:
using (StreamWriter writer = new StreamWriter("../../../VictimProject/Tables.cs"))
{
    writer.WriteLine("using System;");
    writer.WriteLine("public static class Tables");
    writer.WriteLine("{");
    writer.WriteLine("    public static readonly Tuple<int>[] bigArray = new Tuple<int>[]");
    writer.WriteLine("    {");
    for (int i = 0; i < 300000; i++)
        writer.WriteLine("        new Tuple<int>(" + i + "),");
    writer.WriteLine("    };");
    writer.WriteLine("}");
}
//Victim Project, main.cs:
for (int i = 0; i < 1234; i++)
{
    // Preventing the jitter from removing Tables.bigArray
    if (Tables.bigArray[i].Item1 == 10)
        Console.WriteLine("Found it!");
}
Console.ReadKey(true); 
```

运行 Tables.cs 文件的第一个项目，然后运行第二个程序以获取 StackOverflowException。请注意，以上在我的计算机上崩溃：它可能不在不同的平台等上；如果没有，请尝试增加 300000。

使用发布模式而不是调试模式似乎稍微增加了限制，因为我的项目在发布模式下不会崩溃。但是，对我来说，上面的代码在两种模式下都会崩溃。

使用文字`int`s 或`string`s 代替`Tuple<int>`s 不会导致崩溃，“new int()”也不会导致崩溃（但这可能会转换为文字 0）。使用具有单个`int`字段的结构*确实*会导致崩溃。它似乎与使用构造函数作为初始化程序有关。

我的猜测是集合初始化程序以某种方式递归实现，这可以解释堆栈溢出。然而，这是一件非常奇怪的事情，因为迭代解决方案似乎更简单、更高效。C# 编译器本身对程序没有任何问题，并且编译速度非常快（它可以很好地处理更大的集合，但它确实会在非常大的集合上崩溃，正如预期的那样）。

我想可能有某种方法可以将我的表直接写入二进制文件，然后链接该文件，但我还没有看过。

我想我有两个问题：为什么会发生上述情况，以及如何解决它？

**编辑：**反汇编.exe后的一些有趣的细节：

```
.maxstack  4
.locals init ([0] class [mscorlib]System.Tuple`1<int32>[] CS$0$0000)
IL_0000:  ldc.i4     0x493e0
IL_0005:  newarr     class [mscorlib]System.Tuple`1<int32>
IL_000a:  stloc.0
IL_000b:  ldloc.0
IL_000c:  ldc.i4.0
IL_000d:  ldc.i4.0
IL_000e:  newobj     instance void class [mscorlib]System.Tuple`1<int32>::.ctor(!0)
IL_0013:  stelem.ref
IL_0014:  ldloc.0
IL_0015:  ldc.i4.1
IL_0016:  ldc.i4.1
IL_0017:  newobj     instance void class [mscorlib]System.Tuple`1<int32>::.ctor(!0)
IL_001c:  stelem.ref
(goes on and on) 
```

这表明抖动确实会因试图抖动此方法的堆栈溢出而崩溃。尽管如此，它确实很奇怪，特别是我得到了一个例外。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-12T21:57:57.377

> 为什么会发生上述情况

我怀疑这可能是 JIT 崩溃了。您将生成一个*巨大的*类型初始化程序（IL 中的 .cctor 成员）。每个值将是 5 条 IL 指令。拥有 150 万条指令的成员会导致问题，我并不完全感到惊讶……

> 我该如何解决？

而是将数据包含到嵌入的资源文件中，并在需要时将其加载到类型初始化程序中。我假设这是生成的数据 - 所以将数据放在它所属的位置，在二进制文件中而不是作为文字代码。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-04-12T22:00:52.537

如果它试图将所有这些预先推送到堆栈上，那么它将需要**大量**的堆栈空间，所以我个人确实希望这里的堆栈溢出，这取决于编译器是如何做到的。

之前做过类似的事情（因为 IL 太大而破坏了诸如反射器之类的所有工具），我的经验建议是：通过序列化而不是通过 c# 来做到这一点。就我而言，我通过 protobuf-net 几乎完全做到了这一点，即

*   将模型（无数据）生成为代码
*   执行它以从数据库中填充模型
*   将其序列化为文件
*   将文件与我的部署一起发送
*   在初始化期间反序列化

但是——我好像记得最近有过这个讨论；如果是你自己，那么我完全支持我之前的言论。您尝试执行此操作的方式**仍然存在**问题。上述方法（来自直接经验）效果很好。作为伊利诺伊？没那么多。

注意：如果您绝对想在没有执行步骤的情况下编写文件，那也是可能的 - 只是更棘手。

# html - 如何使css菜单居中并摆脱ie中的左边距空间？

> ID：10132379
> 
> 赞同：0
> 
> 时间：2012-04-12T21:49:06.740
> 
> 标签：html, center, css

感谢您阅读本文，我有一个菜单，它通过填充 ul 的左侧和右侧来居中，但我认为这会在左侧的 IE 中留下一些白色的空白空间

它在 Chrome、Firefox 和 Opera 中看起来不错，但在 IE（每个版本）中都有空间并且它没有居中

这是HTML

```
<div class="menu">
<ul>
<li id="current"><a href="#">Strona Glowna</a></li>
<li><a href="#">O nas</a></li>
<li><a href="#">Wlasciciel</a></li>
<li><a href="#">Kontakt</a></li>                
</ul>
</div> 
```

和CSS

```
.menu {
  border:none;
  border:0px;
  margin:0px;
  padding:opx;
  font: 100% Arial;
  font-size:14px;
  font-weight:900;
}
.menu ul {
  background:#333333;
  height:35px;
  list-style:none;
  margin:auto;
  padding:0 242px 0;
  }
.menu li {
    float:left;
    padding:0px;
    }
.menu li a {
    background:#333333 url("images/seperator.gif") bottom right no-repeat;
    color:#cccccc;
    display:block;
    font-weight:normal;
    line-height:35px;
    margin:0px;
    padding:0px 25px;
    text-align:center;
    text-decoration:none;
    }
    .menu li a:hover, .menu ul li:hover a {
        background: #FF0000 url("images/hover.gif") bottom center no-repeat;
        color:#FFFFFF;
        text-decoration:none;
        }

.menu li ul {
    background:#333333;
    display:none;
    height:auto;
    padding:0px;
    margin:0px;
    border:0px;
    position:absolute;
    width:225px;
    z-index:200;
    }
.menu li:hover ul {
    display:block;
    }
.menu li li {
    background:url('images/sub_sep.gif') bottom left no-repeat;
    display:block;
    float:none;
    margin:0px;
    padding:0px;
    width:225px;
    }
.menu li:hover li a {
    background:none;
    }
.menu li ul a {
    display:block;
    height:35px;
    font-size:12px;
    font-style:normal;
    margin:0px;
    padding:0px 10px 0px 15px;
    text-align:left;
    }
    .menu li ul a:hover, .menu li ul li:hover a {
        background:#2580a2 url('images/hover_sub.gif') center left no-repeat;
        border:0px;
        color:#ffffff;
        text-decoration:none;
        }
    .menu li ul #current {
    background:#2580a2 url('images/hover_sub.gif') center left no-repeat;
    border:0px;
    color:#ffffff;
    text-decoration:none;
    }
.menu p {
    clear:left;
    } 
```

现场演示可以在[adamlisik.co.uk/kantor下找到](http://adamlisik.co.uk/kantor)

感谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T02:57:37.917

您需要声明一个文档类型

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
```

# windows - 批处理：在特定程序中打开特定文件？

> ID：10132381
> 
> 赞同：8
> 
> 时间：2012-04-12T21:49:15.967
> 
> 标签：windows, batch-file

当记事本是我的 .txt 文件的默认程序时，我如何告诉 Windows 在写字板中打开 C:\test\test.txt？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2014-08-22T13:08:05.387

接受的答案对我不起作用。我不确定这是因为我试图运行的程序，还是因为路径中有空格（即使我用引号括起来），或者其他什么。

无论如何，我能够在`start`命令后添加一个空字符串。

例如：

```
start "" "C:\My Programs\myprogram.exe" "C:\My Files\myfile.txt" 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-04-12T21:53:01.650

您可以将直接路径添加到可执行文件，例如

```
start C:\Windows\System32\write.exe [FILE] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-12T21:51:15.937

尝试：

```
start wordpad c:\test\test.txt 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-12-26T18:08:25.583

`start`使用的时候不需要使用`write.exe`，那么简单：

```
write [FILE(S)] 
```

`write.exe`位于`C:\Windows\System32`。

# php - PHP：将动态创建的变量传递给内置函数

> ID：10132390
> 
> 赞同：1
> 
> 时间：2012-04-12T21:50:16.903
> 
> 标签：php, function, variables, dynamic

**问题描述：**
我想要做的是将动态创建的变量从循环传递给 php.ini 中的函数。更具体地说，我使用了一个 for 循环来创建变量并将数据分配给它们。然后使用 for 循环将所有变量串在一起。然后将字符串传递给 multisort_array 函数并分解字符串以使用变量。我不确定我做错了什么。

**问题：**
如何在不知道要创建多少的情况下将一堆动态创建的变量传递给排序函数？那是我的错觉。

**代码：**

```
$arr2[0] = "100::HOMEDEPOT";
$arr2[1] = "200::WALMART";
$arr2[2] = "300::COSTCO";
$arr2[3] = "400::WALGREENS";
$arr2[4] = "500::TACO BELL";

// explodes first value of $arr2
$tmp = explode("::",$arr2[0]);

// determines how many dynamic variables to create
for($k=0;$k<count($tmp);$k++){
    ${"mArr".$k} = Array();
}

// loops thru & assigns all numbers to mArr0
// loops thru & assigns all names to mArr1
for ($k=0;$k<count($arr2);$k++){
    $tmp = explode("::",$arr2[$k]);

    for($l=0;$l<count($tmp);$l++){
        ${"mArr".$l}[$k] = $tmp[$l];
    }
}

// Will add a for loop to combine the variables into string
$param = "$mArr1,$mArr0";

// send the string to array_multisort to be sorted by name
// have tried the following options:
//   1\.   array_multisort(explode(",",$param));
//   2\.   call_user_func_array(array_multisort,explode(",",$param));
// both do not sort & give me an error. 
```

预先感谢您的帮助。我愿意接受有关其他方式的任何建议，但如果可能的话，我希望它出现在 php 代码中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T22:10:46.410

[在使用自定义排序函数](http://dk.php.net/manual/en/function.usort.php)将数组拆分为其他数组之前对数组进行排序：

```
$arr2[0] = "100::HOMEDEPOT";
$arr2[1] = "200::WALMART";
$arr2[2] = "300::COSTCO";
$arr2[3] = "400::WALGREENS";
$arr2[4] = "500::TACO BELL";

//Split the input in place, you could also use a new array for this
for($i = 0;$i < count($arr2);$i++)
{
    $arr2[$i] = explode("::",$arr2[$i]);
}

//Define our new sorting function
function sort_second_item($a,$b)
{
    return strcmp($a[1],$b[1]);
}

var_dump($arr2);
usort($arr2,'sort_second_item');
var_dump($arr2);

$rotated = array();

//Rotate $arr2
for($i = 0; $i < count($arr2); $i++)
{
    for($j = 0;$j < count($arr2[$i]); $j++)
    {
        if(!isset($rotated[$j]))
        {
            $rotated[$j] = array();
        }
        $rotated[$j][$i] = $arr2[$i][$j];
    }
}
var_dump($rotated); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T21:59:54.567

只需将数组本身传递给函数即可。

```
arraySort($array); 
```

# asp.net - ASP.net 使用 Jquery 进行 AJAX 调用

> ID：10132392
> 
> 赞同：0
> 
> 时间：2012-04-12T21:50:27.813
> 
> 标签：asp.net

我知道如何用经典的 asp 做到这一点。

如何使用 ASP.net 进行操作？

我可以制作一个像 verifyLogin.cs 这样的代码页吗

并从 Jquery 调用该页面？

或者我是否必须使用页面后面的代码制作一个像 verifyLogin.aspx 这样的页面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T22:07:18.320

有很多不同的方法可以做到这一点，具体取决于您的要求。这是一个非常简单的开始方式。创建一个没有代码隐藏的名为“AjaxData.aspx”的页面：

```
<%@ Page Language="C#" %>
<%
    Response.ContentType = "text/plain";
    string data = "some data";
    Response.Write(data);
%> 
```

然后像往常一样使用您的 AJAX 调用：

```
$.get("AjaxData.aspx", function(data) {
    alert(data);
}); 
```

# java - 对数据进行排序的最佳方式：数据库查询或在应用程序代码中

> ID：10132413
> 
> 赞同：2
> 
> 时间：2012-04-12T21:51:59.917
> 
> 标签：java, sql, sorting

我有一个带有一些数据（> 百万行）的 Mysql 表。我需要根据以下标准对数据进行排序

1) 最新

2) 最老的

3) 最高评价

4) 评分最低

开发排序功能的推荐解决方案是什么

1) 对于每个排序请求，执行一个带有所需连接和 orderBy 条件的 DBQuery，并返回排序后的数据

2）从表中获取所有数据（未排序），将数据放入缓存中。编写自定义比较器（java）对数据进行排序。

我倾向于#2，因为 DB 上的负载只有一次。此外，应用程序代码比 DBQuery 更好。

请分享你的想法......

谢谢， 卡提克

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T22:02:14.147

在数据库中做尽可能多的事情。请注意，如果您有 1,000,000 行，则返回全部百万几乎没有用。你打算在网站上显示这个吗？我想不是。你真的关心第 500,000 个最不受欢迎的帖子吗？再说一次，我认为不是。

因此在数据库中进行排序并返回前 100、500 或 1000 行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T22:04:45.203

如果让数据库对数据进行排序，AFAIK 通常应该运行得更快。

关于应用程序级别与数据库级别的代码，我同意在存储过程的情况下，但在 SELECTs 中排序很好恕我直言。

如果您想向用户显示数据，还可以考虑分页（在这种情况下，您最好在数据库级别进行排序）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T22:23:42.403

你没有四个任务，你有两个：

排序最新等于排序最旧和排序最高评分等于排序最低评分。

所以你需要对 db 进行两次调用。是的，在数据​​库中排序。然后不是每次都调用排序，而是这样做：

```
1] track the timestamp of the latest record in the db
2] before calling to sort and retrieve entire list, check if date has changed
3] if date has not changed, use the list you have in memory
4] if date has changed, update the list 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T21:56:53.670

从数据库中获取一百万行听起来是个糟糕的主意。它将产生大量的网络流量，并且需要相当长的时间来传输所有数据。更不用说您需要在应用程序中分配用于存储数百万个对象的内存量。

因此，如果您只能通过查询获取子集，请执行此操作。总的来说，在数据库中尽可能多地进行过滤。

而且我认为在单个队列中订购没有任何问题。`UNION`如果您不能将其作为 one使用，则可以随时使用`SELECT`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-12T21:59:22.640

在数据库中执行此操作要快得多：

1) 数据库针对 I/O 操作进行了优化，可以使用索引和其他 DB 优化来提高响应时间

2）将数据从数据库中取出到应用程序中，将所有数据放入内存中。在没有优化算法的情况下，应用程序将不得不查看所有数据以对其进行重新排序

3）数据库只将最少必要的数据放入mamemory，这比必须移动到java的所有数据要少得多

4）您总是可以在数据库上创建额外的索引来提高查询性能。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-12T21:59:50.000

我会说对 DB 的操作总是会更快。您应该确保 DB 上的缓存已打开并且工作正常。确保您没有`now()`在查询中使用，因为它会禁用 mysql 缓存。看看[这里](http://dev.mysql.com/doc/refman/5.5/en/query-cache-operation.html)mysql 查询缓存是如何工作的。在基本。查询是基于字符串缓存的，因此如果每次获取时查询字符串都不同，则不使用缓存。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-04-02T13:54:35.457

我知道这是一个旧线程，但它出现在我的搜索中，所以我想发表我的意见。我有点老派，但是对于那么多行，我会考虑从您的数据库中转储数据（每个 RDBMS 都有自己的方法。看起来像 MySQL 的 MySQLDump 命令：[Link](https://stackoverflow.com/questions/6682916/how-to-take-a-backup-of-a-single-table-in-the-mysql-database)）然后您可以使用排序算法或工具处理它在您的 java 库或操作系统中可用。

小心你要求你的数据库做的工作。请记住，它必须可用于服务其他请求。不要只为一个请求“屈服”，除非它是夜间批处理循环类型的场景，并且您确定不会要求它执行任何其他操作。

# bash - 用于启动应用程序并等待其加载/完成后再进行下一步的 Bash 模式

> ID：10132415
> 
> 赞同：0
> 
> 时间：2012-04-12T21:52:20.630
> 
> 标签：bash, idioms

所以我在 bash 中发现了一个常见问题。假设您启动了一个程序 X，并且您想等到它完成或加载完毕后再启动程序 Y。这样做的模式是什么？

* * *

只是在想......我想你可以`X && Y`在等待 X 完成的情况下这样做。但是我仍然不知道该怎么做才能确定程序 X 是否已“加载”。（而且我知道我在这里非常一般地使用“加载”，所以告诉我是否需要更具体。）

* * *

已加载 - 应该意味着程序已达到我正在寻找的“状态”并且以某种方式留下了证据，例如通过创建一个“加载”文件作为令牌（它可能会在关闭时删除）。那么我如何检查 bash 以查看该令牌是否存在。我是否写了一段时间来无限期地检查它的存在，然后仅在找到“加载”令牌后才完成？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T22:06:55.370

为什么不直接调用类似的东西`X && checkIfXLoaded && Y`？

# php - PHP - DOmdocument 错误

> ID：10132418
> 
> 赞同：0
> 
> 时间：2012-04-12T21:52:29.183
> 
> 标签：php

为什么我收到以下错误

```
 Call to a member function getElementsByTagName() on a non-object 
```

错误发生在以下行：

```
 $title = $htm->getElementsByTagName('title'); 
```

当我运行以下代码时：

```
 $dom = new DOMDocument();

  foreach ($all as $blog) {

    sleep(1);

    $htm = $dom->loadHTML(fetch_url('http://' . rtrim(preg_replace('/^http:\/\//i', '', $blog['blogurl']), '/')));

    if ($htm) {

      //check TITLE

      $title = $htm->getElementsByTagName('title');

      $title = $title->item(0)->nodeValue;

      if (preg_match('/private/i', $title)) {

        private_blog($blog['id']);

        $title = null;
        unset($title);
        gc_collect_cycles();
        continue;
      }
    }
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T21:54:50.877

只需在该行替换`$htm`为：`$dom`

```
$title = $dom->getElementsByTagName('title');
         ^^^^ 
```

进一步改进重命名`$htm`上面另一行中的变量：

```
$loadResult = $dom->loadHTML(fetch_url('http://' . rtrim(preg_replace('/^http:\/\//i', '', $blog['blogurl']), '/')));
^^^^^^^^^^^
if ($loadResult) {
    ^^^^^^^^^^^ 
```

# ios - iOS中非常自定义的UIButton动画

> ID：10132420
> 
> 赞同：2
> 
> 时间：2012-04-12T21:52:38.090
> 
> 标签：ios, animation, uibutton

我有一个自定义按钮，它是我自己的`UIButton`. 它看起来像一个带圆圈的箭头，从某个角度开始，在某个角度`startAngle`结束`endAngle=startAngle+1.5*M_PI`。 `startAngle`是按钮的属性，然后在其`drawRect:`方法中使用。当按下这个按钮时，我想让这个箭头围绕它的中心连续旋转 2Pi。所以我认为我可以轻松使用`[UIView beginAnimations: context:]`，但显然它不能使用，因为它不允许为自定义属性设置动画。CoreAnimation 也不适合，因为它只为`CALayer`属性设置动画。

那么`UIView`在iOS中实现子类的自定义属性动画的最简单方法是什么？或者也许我错过了一些东西，并且可以使用已经提到的技术？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T19:09:22.963

感谢[Jenox](https://stackoverflow.com/users/796103/jenox)，我使用 CADisplayLink 更新了动画代码，这似乎是比 NSTimer 更正确的解决方案。所以我现在用 CADisplayLink 展示正确的实现。它与前一个非常接近，但更简单一些。

我们将 QuartzCore 框架添加到我们的项目中。然后我们将以下几行放在我们类的头文件中：

```
CADisplayLink* timer;
Float32 animationDuration;  // Duration of one animation loop
Float32 initAngle;  // Represents the initial angle 
Float32 angle;  // Angle used for drawing
CFTimeInterval startFrame;  // Timestamp of the animation start

-(void)startAnimation;  // Method to start the animation
-(void)animate;  // Method for updating the property or stopping the animation 
```

现在在实现文件中，我们设置动画持续时间的值和其他初始值：

```
initAngle=0.75*M_PI;
angle=initAngle;
animationDuration=1.5f;  // Arrow makes full 360° in 1.5 seconds
startFrame=0;  // The animation hasn't been played yet 
```

要启动动画，我们需要创建 CADisplayLink 实例，该实例将调用方法`animate`并将其添加到应用程序的主 RunLoop 中：

```
-(void)startAnimation
{
   timer = [CADisplayLink displayLinkWithTarget:self selector:@selector(animate)];
   [timer addToRunLoop:[NSRunLoop mainRunLoop] forMode:NSDefaultRunLoopMode];
} 
```

此计时器将`animate`在应用程序的每个 runLoop 中调用方法。

现在来实现我们在每次循环后更新属性的方法：

```
-(void)animate
{
   if(startFrame==0) {
      startFrame=timer.timestamp;  // Setting timestamp of start of animation to current moment
      return;  // Exiting till the next run loop
   } 
   CFTimeInterval elapsedTime = timer.timestamp-startFrame;  // Time that has elapsed from start of animation
   Float32 timeProgress = elapsedTime/animationDuration;  // Determine the fraction of full animation which should be shown
   Float32 animProgress = timingFunction(timeProgress); // The current progress of animation
   angle=initAngle+animProgress*2.f*M_PI;  // Setting angle to new value with added rotation corresponding to current animation progress
   if (timeProgress>=1.f) 
   {  // Stopping animation
      angle=initAngle; // Setting angle to initial value to exclude rounding effects
      [timer invalidate];  // Stopping the timer
      startFrame=0;  // Resetting time of start of animation
   }
   [self setNeedsDisplay];  // Redrawing with updated angle value
} 
```

因此，与使用 NSTimer 的情况不同，我们现在不需要计算更新角度属性和重绘按钮的时间间隔。我们现在只需要计算从动画开始已经过去了多少时间，并将属性设置为与此进度相对应的值。

我必须承认，动画比 NSTimer 更流畅。默认情况下，CADisplayLink 在`animate`每个运行循环中调用该方法。当我计算帧速率时，它是 120 fps。我认为它的效率不是很高，所以我通过在将 CADisplayLink 的 frameInterval 属性添加到 mainRunLoop 之前将其降低到 22 fps：

```
timer.frameInterval=3; 
```

这意味着它将`animate`在第一次运行循环时调用该方法，然后在接下来的 3 次循环中什么也不做，并在第 4 次调用，依此类推。这就是为什么 frameInterval 只能是整数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T16:26:17.123

再次感谢[k06a](https://stackoverflow.com/users/440168/k06a)建议使用计时器。我已经对使用 NSTimer 进行了一些研究，现在我想展示我的实现，因为我认为它对其他人有用。

所以在我的例子中，我有一个 UIButton 子类，它正在绘制一个从某个角度开始的弯曲箭头，`Float32 angle;`这是整个箭头绘制开始的主要属性。这意味着只需更改角度的值就会旋转整个箭头。所以为了制作这个旋转的动画，我在我的类的头文件中加入了以下几行：

```
NSTimer* timer;
Float32 animationDuration;  // Duration of one animation loop
Float32 animationFrameRate;  // Frames per second
Float32 initAngle;  // Represents the initial angle 
Float32 angle;  // Angle used for drawing
UInt8 nFrames;  // Number of played frames

-(void)startAnimation;  // Method to start the animation
-(void)animate:(NSTimer*) timer;  // Method for drawing one animation step and stopping the animation 
```

现在在实现文件中，我设置动画的持续时间和帧速率以及绘制的初始角度：

```
initAngle=0.75*M_PI;
angle=initAngle;
animationDuration=1.5f;  // Arrow makes full 360° in 1.5 seconds
animationFrameRate=15.f;  // Frame rate will be 15 frames per second
nFrames=0;  // The animation hasn't been played yet 
```

要开始动画，我们需要创建 NSTimer 实例，该实例将`animate:(NSTimer*) timer`每 1/15 秒调用一次方法：

```
-(void)startAnimation
{
   timer = [NSTimer scheduledTimerWithTimeInterval:1.f/animationFrameRate target:self selector:@selector(animate:) userInfo:nil repeats:YES];
} 
```

此计时器将`animate:`立即调用方法，然后每 1/15 秒重复一次，直到手动停止。

所以现在来实现我们为单个步骤设置动画的方法：

```
-(void)animate:(NSTimer *)timer
{
   nFrames++;  // Incrementing number of played frames
   Float32 animProgress = nFrames/(animationDuration*animationFrameRate); // The current progress of animation
   angle=initAngle+animProgress*2.f*M_PI;  // Setting angle to new value with added rotation corresponding to current animation progress
   if (animProgress>=1.f) 
   {  // Stopping animation when progress is >= 1
      angle=initAngle; // Setting angle to initial value to exclude rounding effects
      [timer invalidate];  // Stopping the timer
      nFrames=0;  // Resetting counter of played frames for being able to play animation again
   }
   [self setNeedsDisplay];  // Redrawing with updated angle value
} 
```

我要提到的第一件事是，对我来说，`angle==initAngle`由于舍入效应，比较线不起作用。完全旋转后它们并不完全相同。这就是为什么我检查它们是否足够接近，然后将角度值设置为初始值，以在多次重复动画循环后阻止角度值的小漂移。为了完全正确，这段代码还必须管理角度的转换，使其始终介于 0 和 2*M_PI 之间，如下所示：

```
angle=normalizedAngle(initAngle+animProgress*2.f*M_PI); 
```

在哪里

```
Float32 normalizedAngle(Float32 angle)
{
   while(angle>2.f*M_PI) angle-=2.f*M_PI;
   while(angle<0.f) angle+=2.f*M_PI;
   return angle
} 
```

另一个重要的事情是，不幸的是，我不知道任何简单的方法可以将easeIn、easeOut 或其他默认动画曲线应用于这种手动动画。我认为它不存在。但是，当然，可以手动完成。代表该计时功能的线是

```
Float32 animProgress = nFrames/(animationDuration*animationFrameRate); 
```

它可以被视为`Float32 y = x;`，即线性行为，恒定速度，与时间速度相同。但是您可以将其修改为`y = cos(x)`or `y = sqrt(x)`or `y = pow(x,3.f)`，这将产生一些非线性行为。考虑到 x 将从 0（动画开始）变为 1（动画结束），您可以自己考虑。

为了更好看的代码，最好做一些独立的计时功能：

```
Float32 animationCurve(Float32 x)
{
  return sin(x*0.5*M_PI);
} 
```

但是现在，由于动画进度和时间之间的依赖关系不是线性的，所以使用时间作为停止动画的指标会更安全。（例如，您可能希望使箭头旋转 1.5 圈，然后旋转回初始角度，这意味着您的 animProgress 将从 0 变为 1.5，而不是返回 1，而 timeProgress 将从 0 变为 1。）所以为了安全起见，我们现在将时间进度和动画进度分开：

```
Float32 timeProgress = nFrames/(animationDuration*animationFrameRate);
Float32 animProgress = animationCurve(timeProgress); 
```

然后检查时间进度以确定动画是否应该停止：

```
if(timeProgress>=1.f)
{
   // Stop the animation
} 
```

顺便说一句，如果有人知道一些具有有用的动画计时功能列表的资源，如果您分享它们，我将不胜感激。

内置 MacOS X 实用程序 Grapher 在可视化功能方面有很大帮助，因此您可以看到动画进度将如何取决于时间进度。

希望它可以帮助某人...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-13T13:18:35.927

```
- (void)onImageAction:(id)sender
{
    UIButton *iconButton = (UIButton *)sender;
    if(isExpand)
{
    isExpand = FALSE;

    // With Concurrent Block Programming:
    [UIView animateWithDuration:0.4 animations:^{
        [iconButton setFrame:[[btnFrameList objectAtIndex:iconButton.tag] CGRectValue]];
    } completion: ^(BOOL finished) {
        [self animationDidStop:@"Expand" finished:YES context:nil];
    }];
}
else
{
    isExpand = TRUE;

    [UIView animateWithDuration:0.4 animations:^{
        [iconButton setFrame:CGRectMake(30,02, 225, 205)];
    }];

    for(UIButton *button in [viewThumb subviews])
    {
        [button setUserInteractionEnabled:FALSE];
        //[button setHidden:TRUE];
    }
    [viewThumb bringSubviewToFront:iconButton];

    [iconButton setUserInteractionEnabled:TRUE];
   // [iconButton setHidden:FALSE];
    }
} 
```

# c++ - 使用原生 C++ Qt 比 PyQt 有什么优势

> ID：10132427
> 
> 赞同：14
> 
> 时间：2012-04-12T21:53:10.647
> 
> 标签：c++, python, qt, qt4, pyqt

我想用 Qt 开发，我已经知道 Python。我正在学习 C++，那么用 C++ 编写 Qt 相对于 Python 有什么优势？C++ 似乎更复杂，而且似乎没有太大的收获。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-04-12T22:10:23.470

> 使用原生 C++ Qt 比 PyQt 有什么优势

速度/功率/控制。

PyQt 应用程序仍然需要 python。C++/Qt 应用程序编译为本机 exe。通过使用 C++，您将可以访问在 python 中不可用的 3rd 方库，此外，您将消除“中间人”——位于程序和 qt dll 之间的层，并且可能获得更好的性能。例如，我不会在 python 中编写存档器或 mp3 解压缩器，尽管它当然可以完成。

然而，这是有代价的——c++没有垃圾收集器，更复杂，开发“更慢”（编译时间），需要数年才能掌握，只有当你的瓶颈在解释器内时，你才能获得更好的性能（即脚本语言开销）。即 C++ 以更大的责任和更长的开发时间为代价提供更多的功能。如果您不需要它，那么您没有理由坚持使用 C++。

语言的选择取决于您的应用程序/情况和您的个人喜好。如果您需要尽快制作应用程序或制作模型，那么使用您熟悉的语言是合理的。如果您有严重的性能问题，那么聘请熟练的 C++ 程序员来完成这项工作是合理的——制作原生应用程序、对其进行分析、优化等。

请注意，语言是一种工具。如果你只是因为喜欢这种语言而想在所有事情上都使用你的语言，那么你的工作效率就很低。

- 编辑 -

就个人而言，我不会将 python 用于需要长时间维护的大型应用程序。然而，这是因为该语言与我的思维方式（依赖墨菲定律）并不完全兼容，并且（因此）我对此并不满意。有不同想法的人可能会更适应 Python，甚至可能认为 C++ 过于严格。

另一件事是，从我编写 Blender 插件和各种 python 脚本的经验来看，由于语言是脚本化的，因此出现了一些严重的性能开销，并且可以在 C++ 中免费执行 FAST 的非常繁重的列表/映射/数组操作可能需要 5 倍..10 倍的时间在 python 中。有些人可能坚持认为这是可以修复的，但是，这种“修复”的成本可能会超过使用脚本语言所带来的好处。不管我的偏好如何，我仍然使用 Python 来制作需要运行多个实用程序、拆分/拼接/解析它们的文本输出并对其进行处理的实用程序脚本（C++ 在这种情况下不是很好），我仍然会在必须可扩展的程序中提供 Python 绑定（假设 Lua 不好）。

最后归结为选择最合适的工具 - 如果与 Python 相比 C++ 不会给您带来任何好处，那么就没有理由切换。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-12T21:55:28.710

如果您计划分发您的应用程序，与依赖最终用户首先安装 Python 和 PyQt 相比，交付一个独立的编译可执行文件要容易得多。但这可能是您的考虑因素，也可能不是。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-12T23:06:42.110

C++ 优化机器速度。

Python 优化了程序员的速度。

C++ 相对冗长：每个想法表达的词更多。Bugs / Lines_of_code 大致是一个常数，所以简洁很重要。

C++ 的内存管理有时是手动的，这可能意味着奇怪的运行时问题[http://stromberg.dnsalias.org/~strombrg/checking-early.html](http://stromberg.dnsalias.org/~strombrg/checking-early.html)，包括段错误和内存泄漏。Python 将其从程序员手中夺走并自动化。

GUI 很少关心其实现语言的速度——主要问题是最终用户可以多快键入和单击。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-12T21:58:56.160

总之，我认为除非你有很强的性能要求，否则你应该坚持使用 Python。此外，正如 Greg 所提到的，您的程序使用 Python 将比使用 C++ 更便携。

我喜欢 C++，但是现在，对于大多数项目，如果不是 Java，我大多会转向 Python。但是，如果我正在编写游戏或图形应用程序，我可能会考虑 C++。

# arrays - Grails - 在哪里存储与域相关的属性

> ID：10132428
> 
> 赞同：2
> 
> 时间：2012-04-12T21:53:19.480
> 
> 标签：arrays, grails

这是我一段时间以来一直在努力解决的问题。问题是：我有很多（20 个左右）*静态*值数组。我说*静态*是因为这就是我实际存储它们的方式，作为某些域中的静态数组。例如，如果我有一个已知网站列表，我会：

```
class Website {
   ...
   static websites = ["web1", "web2" ...]
} 
```

但是我只是在开发时这样做，因为如果需要我可以轻松更改数组，但是当应用程序准备好部署时我要做什么？在我的项目中，这些值数组很可能在某些时候发生变化。我一直在研究这件事，可以将应用程序属性存储在外部 .properties 文件中，但是存储数组是不可能的，甚至是徒劳的，因为如果某个数组获得了附加值，应用程序将无法识别它直到在需要的地方添加新属性的名称。
另一种方法是将这些信息存储在数据库中，但由于某种原因，添加 20 个或更多只有两行（一个 id 和一个名称）的表似乎是一种浪费。
据我所知，最后一个选项是 XML，但我对这些不是很有经验。看起来 groovy 有一种相对容易创建和读取 XML 文件的方法，但我不知道修改应用程序中预定义布局的 XML 会有多困难。

不用说，将它们存储在 config.groovy 中不是一种选择，因为任何更改都需要重新编译。

我还没有遇到一些“标准”（也许是最佳实践？）处理这些问题的方法。

所以问题是：在哪里存储这些数组？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T22:11:20.530

对于像数组这样简单的东西，您应该使用 groovy 自己类型的属性文件。它们也允许您将属性定义为适当的 groovy 变量（不仅仅是字符串），并且显然可以使用 ConfigSlurper 以简单的方式动态地加载它们。有关如何使用此类文件的示例，您可以查看以下[ConfigSlurper](http://groovy.codehaus.org/ConfigSlurper)：

对于定义属性：

```
 my.property.array=[1,2,3,4] 
```

加载属性文件：

```
 def config = new ConfigSlurper().parse(new File('myconfig.groovy').toURL())
 assert [1,2,3,4] == config.my.property.array 
```

提示：当您想要访问属性文件时，您希望以适用于任何环境的方式进行。要使路径与环境无关，请使用以下路径作为根路径：

```
 import org.codehaus.groovy.grails.commons.ApplicationHolder 

 def ctx = ApplicationHolder.application.mainContext.servletContext 
 def rootPath = ctx.contextPath 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T23:25:20.393

1.  用于`Enum`一组固定的属性。如果您在代码中的某些地方依赖某些具体值，请执行此操作。
2.  如果您不依赖代码中的属性（您显然不依赖），请使用`String`-type。在这种情况下，如果您需要提供一个选择框，只需`distinct`在您的数据库中对该属性执行 -query 即可。
3.  默认值：为每个动态属性集使用一个域类。另一张桌子没问题。

# ios5 - UINavigationBar 隐藏子视图

> ID：10132429
> 
> 赞同：0
> 
> 时间：2012-04-12T21:53:21.303
> 
> 标签：ios5, uinavigationbar

我有一个具有导航控制器和搜索显示控制器的控制器。

我需要在导航控制器视图和搜索显示控制器上放置一个图像，即：

```
+-------------------------------+
|I|    Title                    |
|I|-----------------------------+
|I| [Search                    ]|
+-------------------------------+ 
```

我需要将图像放在“I”部分。我正在做的是在 viewWillAppear 中将视图添加到 navigationController：

```
[self.navigationController.view addSubview:myImage]; 
```

那运行良好。但是我的麻烦是当用户开始在搜索栏中提示某些内容并取消搜索时。

在这种方法中，我试图将视图再次放在导航控制器上： - (void)searchDisplayController:(UISearchDisplayController *)controller didHideSearchResultsTableView:(UITableView *)tableView 以这种方式：

```
 [self.navigationController.view addSubview:myImage]; 
```

但是导航栏隐藏了我的图像。有什么方法可以阻止导航栏隐藏我的子视图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T23:36:32.783

假设您的 UINavigationcontrolelr 在您的主 UIWindow 中，这会将图像添加到主窗口中的所有其他内容之上

```
[self.navigationController.view.superview addSubview:myImage]; 
```

# php - 为什么我的会话变量不起作用？

> ID：10132432
> 
> 赞同：0
> 
> 时间：2012-04-12T21:53:33.130
> 
> 标签：php, session, session-variables

我已经检查了正常的东西，比如 php 标签之前的空白，并且有一个 session_start() 但我无法解决这个问题。我正在为客户制作一个登录系统，所以这是至关重要的东西。

本质上，一旦我进入第二页 $_SESSION['username']; 是空的。我已经将它打印出来并且它是空的，但是 atm 会激活标题重定向，您可以在代码中看到它。

提前感谢您收到的任何帮助:)

相关代码：

```
<?php
session_start();

include '../resources/methods/Library.php';

if(isset($_SESSION['username']))
{
    //User already logged in!
    header('Location: Index.php');
}

//Username and password submitted by user
$usernameSubmitted = $_POST['username'];
$passwordSubmitted = $_POST['password'];

if($usernameSubmitted != "" && $passwordSubmitted != "")
{
    //User has entered both a username and a password. We shall validate them

    //Connect to database and select all the admin accounts
    connectToDB();
    $query = "SELECT * FROM admins" or die(mysql_error());
    $data = mysql_query($query) or die(mysql_error());
    $numberOfAdmins = mysql_num_rows($data) or die(mysql_error());

    //Check if the username corresponds to any found in the database                        
    $usernameValid = false;

    for($i = 0; $i < $numberOfAdmins; $i++)
    {
        if($usernameSubmitted == mysql_result($data, $i, "Username"))
        {
            $userToLogInAs = $i;
            $usernameValid = true;
        }
    }

    //If username is valid, check password
    if($usernameValid != false)
    {
        //Passwords are held as blowfish encryptions for security. Encypt this so we can compare
        $encryptedPasswordSubmitted = crypt($passwordSubmitted, '$2a$07$buzzybees5hivestottenhoe$');

        if($encryptedPasswordSubmitted == mysql_result($data, $userToLogInAs, "Password"))
        {
            //Create a session variable so the user remains logged in
            $_SESSION['username'] = $usernameSubmitted;

            //User entered the correct username and password, redirect them to the website.
            header('Location: Index.php');
        }
    }

    //If we've got this far then the user didn't authenticate successfully.
    $message = "<h2>Sorry, Invalid Credentials</h2><p>Check that you're tying your username and password correctly.</p>";
} 
```

?>

下一页：

```
<?php
session_start();

if(!isset($_SESSION['username']))
{
    //User not signed in, send them to the log in page
    header('Location: Log-In.php');
}
?> 
```

有任何想法吗？

谢谢，丹尼

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T22:11:43.640

这只是一个猜测，但假设您只显示登录脚本的部分代码：

您不会`die()`在成功登录后重定向后使用，因此之后出现的任何代码以及您未在此处显示的代码都会被执行。如果您在`$_SESSION`那里操纵变量，那可能会导致您的问题。

为了安全起见，只需将您的代码更改为：

```
 if($encryptedPasswordSubmitted == mysql_result($data, $userToLogInAs, "Password"))
    {
        //Create a session variable so the user remains logged in
        $_SESSION['username'] = $usernameSubmitted;

        //User entered the correct username and password, redirect them to the website.
        header('Location: Index.php');
        die();    // this is important!
    } 
```

看看是否能解决问题。请注意，您需要在重定向的任何地方执行此操作。

# phing - 在 Phing 构建文件中定位程序

> ID：10132439
> 
> 赞同：0
> 
> 时间：2012-04-12T21:54:17.903
> 
> 标签：phing

在 Phing 构建文件中，我想调用一个外部程序（`lessc`在本例中），但该程序可能位于不同的位置，具体取决于运行脚本的系统。

这就是我目前正在做的事情。它有效，但它闻到我：

```
<property name="lessc" value="/usr/bin/lessc" override="true" />

<if>
  <not>
    <available file="${lessc}" />
  </not>
  <then>
    <fail msg="Could not find LESS compiler at ${lessc}." />
  </then>
</if>

<exec command="${lessc} ..." /> 
```

我正在使用 a`property`以便用户可以为她的系统指定备用路径，但如果脚本可以通过例如或`lessc`自动确定可执行文件的位置，我会更喜欢它。`hash``which`

这可以在Phing中做到吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T18:56:32.217

前几天我在 Sean Coates 的博客上看到了[Use `env`](http://seancoates.com/blogs/use-env)，它处理了一个非常相似的问题；在他的案例中，他发现 PHP 脚本在不同系统上通过 CLI 运行时会失败，因为 PHP 安装在不同的位置。

他的解决方案是将`#!/path/to/php`标题替换为`#!/usr/bin/env php`. 因为`env`它（可能）总是位于`/usr/bin/env`，所以唯一需要的配置是确保 PHP 二进制文件在`$PATH`任何用户正在执行 CLI 脚本的情况下。无需更改服务器特定的代码！

嗯，这让我开始思考。

我将构建文件更改为如下所示，现在一切正常：

```
<property name="env" value="/usr/bin/env" override="true" />

<if>
  <not>
    <available file="${env}" />
  </not>
  <then>
    <fail msg="Unable to locate env executable at ${env}." />
  </then>
</if>

<exec command="${env} lessc ..." /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T15:30:13.313

我遇到了同样的问题，最终创建了一个自定义条件来像`available`条件一样工作。它使用 which / where（在 Windows 上）来搜索 PATH 中的位置。

它在这里可用： [https ://gist.github.com/dig412/5057536](https://gist.github.com/dig412/5057536)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T06:58:36.813

对我来说，这就像一个自定义[任务。](http://www.phing.info/docs/guide/stable/chapters/ExtendingPhing.html#WritingTasks)

# android - 库导入问题

> ID：10132443
> 
> 赞同：1
> 
> 时间：2012-04-12T21:54:41.803
> 
> 标签：android, gson

我已经在家里复制了我的工作项目和设置应用程序。我正在使用 Gson，它位于 /lib 文件夹中并作为库引用。但是，在运行时无法实例化 Gson 对象，控制台给了我以下信息

> 04-13 01:47:50.948: E/AndroidRuntime(386): 致命异常: main
> 
> 04-13 01:47:50.948: E/AndroidRuntime(386): java.lang.NoClassDefFoundError: com.google.gson.Gson

请问有什么建议吗？

ps 我正在使用 Eclipse，我已经尝试“清理”项目，将 Gson 库重置为引用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T22:07:17.147

确保将 gson jar 添加为 under`android dependency`而不是`Referenced Libraries`Properties -> Java Build Path。

如果这不起作用，请执行以下步骤：

1.  从标准 Java 构建路径中删除这些库。

2.  右键单击项目名称>属性> Java构建路径>（选项卡）库>删除除“Android XX”和“Android Dependencies”之外的所有内容</p>

3.  将库文件夹从“lib”重命名为“libs”</p>

    通过这样做，Android 插件会找到文件夹“libs”中的所有库，并将其添加到“Android 依赖项”中。

4.  清理项目

有关更多详细信息，请参见[此处](http://tools.android.com/recent/dealingwithdependenciesinandroidprojects)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T15:14:17.640

我对此有过不好的经历。我以为是因为旧版本的android不支持Gson。但是，一旦我复制了整个项目并将“目标构建”更改为相同的版本，它运行正常。

然后当我回到旧副本并检查属性`>Java Build Path>(tab) Libraries`时，我发现没有“Android Dependencies”。

它必须存在于 Eclipse 中！！

# php - 强制页面从服务器重新加载，而不是加载缓存的版本

> ID：10132446
> 
> 赞同：12
> 
> 时间：2012-04-12T21:54:54.440
> 
> 标签：php, javascript, jquery

我有网页A。用户单击表单提交数据，然后将他带到网页B。当他单击后退按钮时，我需要从服务器刷新网页A，而不是从缓存中加载。我有这个：`<meta http-equiv="expires" content="0">`但它似乎不起作用。我还尝试在页面 B 上设置一个变量（通过 php 的会话变量），然后在页面 A 上检查它并根据它的存在刷新（或不刷新）。这似乎也不起作用。基本代码是：A页：

```
<?php 
if(isset($_SESSION['reloadPage'])) {
unset($_SESSION['reloadPage']);
echo'
<script>
window.location.replace("/****/****/*****.php");
</script>
';
}
?> 
```

在 B 页上：

```
$_SESSION['reloadPage'] = 1; 
```

使用 PHP 解决方案，它只是不断尝试以永无止境的循环刷新页面。我的逻辑中缺少什么？这是正确的方法吗？

**编辑** 经过进一步调查，当您告诉浏览器不缓存页面时，这是否也会强制进行完整的*服务器端*刷新？这就是我需要的。页面的完整服务器端刷新。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T21:59:40.527

好的，试试这个：

```
<?php
    if(!session_id()) {
        @session_start();   
    }
    header('Expires: Sat, 26 Jul 1997 05:00:00 GMT');
    header('Last-Modified: ' . gmdate( 'D, d M Y H:i:s') . ' GMT');
    header('Cache-Control: no-store, no-cache, must-revalidate');
    header('Cache-Control: post-check=0, pre-check=0', false);
    header('Pragma: no-cache'); 

    if(isset($_SESSION['form_submitted'])) {
        unset($_SESSION['form_submitted']);
        header('Location: ?' . uniqid());
        #header('Refresh: 0');
    }
?> 
```

您需要在第 2 页设置 $_SESSION['form_submitted'] = true。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T21:58:15.940

尝试所有三个：

```
<meta http-equiv="cache-control" content="no-cache"> <!-- tells browser not to cache -->
<meta http-equiv="expires" content="0"> <!-- says that the cache expires 'now' -->
<meta http-equiv="pragma" content="no-cache"> <!-- says not to use cached stuff, if there is any --> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-09T09:32:48.883

我知道这是一个老问题，并且已经有了答案（不是从服务器刷新）。所以我想分享一个使用jQuery的解决方案。

```
$('#back-button').click(function(){
   setTimeout(location.reload(true), 1000);
}); 
```

说明：
当您单击返回按钮时，`setTimeout`将在 1 秒（1000 毫秒）后触发。然后，页面将从服务器重新加载，作为 is 中的`reload`参数`true`。

如果你把它放在`true`里面，`reload`它将从服务器重新加载，而如果你把`false`它从缓存中重新加载。来源[w3schools](http://www.w3schools.com/jsref/met_loc_reload.asp)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-12T22:08:54.383

```
<?php 
    session_start();
    if(isset($_SESSION['reloadPage'])) {
        unset($_SESSION['reloadPage']);
           //no outputting code above header
        header("Cache-Control: no-cache, must-revalidate");
        header("Expires: Sat, 26 Jul 1997 05:00:00 GMT");
        header("Location: http://www.mypage.com/");
    }
?> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-12T22:03:09.647

```
<?php 
  session_start();
  if(isset($_SESSION['reloadPage'])) {
  unset($_SESSION['reloadPage']);
  echo'
  <script>
  window.location.replace("/****/****/*****.php");
  </script>
  ';
}
?> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-12T21:57:27.743

你的 JavaScript 应该是...

```
window.location = "/****/****/*****.php" 
```

我认为这应该解决你的循环。

# objective-c - 如何在 Xcode 中使用图像过渡滤镜？

> ID：10132448
> 
> 赞同：1
> 
> 时间：2012-04-12T21:55:06.497
> 
> 标签：objective-c, ios, image-processing, core-image

在成功地遵循了Ray Wenderlich 网站上的[教程](http://www.raywenderlich.com/5689/beginning-core-image-in-ios-5)后，我决定尝试并操纵我学到的知识并将其应用于 CITransition，尤其是 CIDissolveTransition。但是，即使在交叉引用我从 Apple 自己的过滤器文档中学到的东西之后，我似乎也无法让图像出现（我得说，这些文档已经过时并且很难在他们自己复杂的示例之外进行调整）。这是我到目前为止所拥有的：

```
NSURL *url = [NSURL fileURLWithPath:imagePath];
NSURL *url2 = [NSURL fileURLWithPath:image2Path];
CIContext *context;
CIFilter *filter;
CIImage *beginImage, *targetImage;
UIImageView *mainImage = [[UIImageView alloc] initWithFrame:CGRectMake(0, 0, 200, 200)];
[self addSubview:mainImage];

beginImage = [CIImage imageWithContentsOfURL:url];
targetImage = [CIImage imageWithContentsOfURL:url2];

if(context == nil)
{
  NSLog(@"Creating Context");
  context = [CIContext contextWithOptions:nil];
}
if(filter == nil) {
  NSLog(@"Creating filter");
  filter = [CIFilter filterWithName:@"CIDissolveTransition" keysAndValues:@"inputImage",   beginImage, @"inputTargetImage", targetImage, @"inputTime", [NSNumber numberWithFloat:0.5], nil];
}

CIImage *outputImage = [filter outputImage];

CGImageRef cgimg = [context createCGImage:outputImage fromRect:[outputImage extent]];
UIImage *newImg = [UIImage imageWithCGImage:cgimg];

[mainImage setImage:newImg]; 
```

我得到的只是应该显示 mainImage 的黑屏。最终目标是能够使用滑块（我只是假设它会起作用）循环通过具有这种溶解效果的一系列图像，但我什至无法显示这个静态图像。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-13T00:38:19.857

您对 filterWithName:keysAndValues: 的调用返回 nil，因为 iOS 不知道如何制作 CIDossolveTransition 过滤器。Core Image for iOS 不支持 Core image for Mac OS 支持的所有过滤器。看到[这个答案](https://stackoverflow.com/a/8756311/1313031)

您可以阅读[Apple 的核心图像过滤器](http://developer.apple.com/library/mac/#documentation/graphicsimaging/reference/CoreImageFilterReference/Reference/reference.html)参考并查看 iOS 支持哪些过滤器，但坏消息是转场并没有适用于 iOS 5。iOS 5 中唯一可用的处理合成的过滤器是 CISourceOverCompositing，它可能对你来说不是很有趣。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-16T16:34:41.813

The Apple WWDC 2014 session "Advances in Core Image" listed 115 CIFilters available in iOS. The CIDissolveTransition is listed as supported as of 2014\. See session 514 [https://developer.apple.com/videos/play/wwdc2014/514/](https://developer.apple.com/videos/play/wwdc2014/514/) Try it again !

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T18:28:43.007

正如 Jay 在他的回答中提到的，iOS 不支持过渡。但是，我找到并编辑了一个脚本，该脚本抓取两个图像的像素值并根据百分比返回两者的交叉。这是方法：

```
- (UIImage*)morphImage:(UIImage*)img1
             withImage:(UIImage*)img2
             withValue:(float)val
{  
CGImageRef sourceImage = img1.CGImage;
CGImageRef sourceImage2 = img2.CGImage;

CFDataRef theData;
theData = CGDataProviderCopyData(CGImageGetDataProvider(sourceImage));
CFDataRef theData2;
theData2 = CGDataProviderCopyData(CGImageGetDataProvider(sourceImage2));

UInt8 *pixelData = (UInt8 *) CFDataGetBytePtr(theData);
UInt8 *pixelData2 = (UInt8 *) CFDataGetBytePtr(theData2);

int dataLength = CFDataGetLength(theData);

//color byte increments
int red = 0;
int green = 1;
int blue = 2;
//temporary rgb values for both images
int r1, g1, b1, r2, g2, b2;
//fake slider value
for (int index = 0; index < dataLength; index += 4) {
r1 = pixelData[index + red];
g1 = pixelData[index + green];
b1 = pixelData[index + blue];
r2 = pixelData2[index + red];
g2 = pixelData2[index + green];
b2 = pixelData2[index + blue];

pixelData[index + red] += (r2 - r1) * val;
pixelData[index + green] += (g2 - g1) * val;
pixelData[index + blue] += (b2 - b1) * val;
}

CGContextRef context;
context = CGBitmapContextCreate(pixelData,
                              CGImageGetWidth(sourceImage),
                              CGImageGetHeight(sourceImage),
                              8,
                              CGImageGetBytesPerRow(sourceImage),
                              CGImageGetColorSpace(sourceImage),
                              kCGImageAlphaPremultipliedLast);

CGImageRef newCGImage = CGBitmapContextCreateImage(context);
UIImage *newImage = [UIImage imageWithCGImage:newCGImage];

CGContextRelease(context);
CFRelease(theData);
CGImageRelease(newCGImage);

return newImage; 
```

}

我没有在设备上测试过它，但是当使用滑块循环浏览 6 到 10 张 200x200 图像时，它在模拟器上运行得非常流畅。我想通过预先提取图像像素数据可能会更有效。

# ios - SDK 调试器 (PhoneGap) 中未出现 TestFlight 检查点

> ID：10132449
> 
> 赞同：3
> 
> 时间：2012-04-12T21:55:07.540
> 
> 标签：ios, phonegap-plugins, testflight

将 TestFlight 与 PhoneGap 应用程序一起使用，在 ipad 上进行测试。在 TestFlight SDK 调试器中，我可以看到`session_start`和`session_end`事件，但**没有 CHECKPOINTS**。在 Xcode 调试器中，我确实看到`checkpoints`在控制台日志中传递。

知道为什么 SDK 调试器中没有显示检查点吗？

编辑（2012 年 4 月 30 日）：使用 TestFlight 一段时间后，检查点开始出现。不知道为什么会出现差异。

# ios - 使用 UITableViewCell 检测触摸并按住，我有哪些选择？

> ID：10132457
> 
> 赞同：0
> 
> 时间：2012-04-12T21:56:00.743
> 
> 标签：ios, cocoa-touch

使用我当前的表格视图控制器，我想实现一个触摸和按住功能，非常类似于点击轮 iPod 的 On-The-Go 排队功能过去的工作方式。

我一直在阅读一些帖子，并看到了使用`UILongPressGestureRecognizer`. 虽然我可以这样做，但它确实给我带来了更多问题：

1.  如果检测到长按，如何防止 `didSelectRowAtIndexPath`调用该方法（或者我是否完全避免使用它并在我的 UITableViewCell 子类中实现 Tap 手势识别器？）
2.  一旦检测到类似于 iPod 样式的长按（突出显示的单元格闪烁/突出显示的不透明度上下几次），我将如何为单元格设置动画。

希望得到一些指导。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T22:02:15.833

如果您使用长按识别器并触发，didSelectRowAtIndexPath 将不会触发。

您可以检测手势识别器的状态并在检测到“开始”状态后为单元格设置动画，并在检测到“结束”状态时结束动画。

如果 (gestureRecognizer.state == UIGestureRecognizerStateBegan) ... 如果 (gestureRecognizer.state == UIGestureRecognizerStateEnded) ...

# mysql - mysql两个具有相同条目名称的表添加值

> ID：10132458
> 
> 赞同：4
> 
> 时间：2012-04-12T21:56:12.163
> 
> 标签：mysql

我有一张桌子，基本上有一个足球比赛的日历条目，看起来像这样

```
team1 || team1score || team2|| team2score || time || league 
```

我想根据日历表中的条目更新我的职位表。

所以例如，如果我的桌子上有类似的东西

```
Pats   || 14 || Saints || 3  || 1stleague
Cows   || 7  || falc   || 14 || 1stleague
Saints || 31 || falc   || 3  || 1stleague
Saints || 14 || cows   || 3  || 1stleague 
```

我想要一个查询，它首先将 team1score 列中的所有值与不同的 team1name 相加。所以对于上面的表格，它会给出结果

```
Pats   || 14
Cows   || 7
Saints || 45 
```

然后我想对 team2 和 team2score 做同样的事情，所以结果是

```
Saints || 3
falc   || 17
cows   || 3 
```

然后我想加入这两个结果并得到：

```
Pats   || 14
Cows   || 10
Saints || 48
falc   || 17 
```

我尝试过这样的事情

```
select distinct(t.team1), sum(t.team1score)
  from calendar t
  where league = '5a7'
  UNION
    select distinct(t2.team2), sum(t2.team2score)
    from calendar t2
    where league = '5a7' 
```

但它没有添加相同的团队得分任何想法？

我知道我在进行联合时不会计算总和，但我认为我需要进行联合以保留在 teams2 列上没有匹配团队的值。但是我不知道如何同时进行联合和求和。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T22:02:44.480

使用子查询创建 team1 和 team2 列的并集，聚合外部查询中的分数（仅）：

```
SELECT LOWER(t.team) team, SUM(t.score) score
FROM (
    SELECT team1 team, team1score score
    FROM calendar
    WHERE league='5a7'
    UNION ALL
    SELECT team2, team2score
    FROM calendar
    WHERE league='5a7'
) t
GROUP BY 1 
```

**编辑：**在 a`UNION`中，联合后的选择语句的名称/别名被忽略。如果您认为它可以提高可读性，您可以添加`team`and 。`score`但是，这不是必需的。

**编辑：**添加`LOWER`，即组不区分大小写。

# c - C中的右手迷宫遍历

> ID：10132459
> 
> 赞同：2
> 
> 时间：2012-04-12T21:56:19.543
> 
> 标签：c

这是我的第一个问题，是的，这是一项“家庭作业”。我已经研究了几个小时，但无法让算法工作。我编写的程序应该包含一个函数，该函数接受一个 12 x 12 数组并找到到最后的路径。主函数找到迷宫的起点并将其更改为“x”以表示“玩家”的位置。然后主函数调用接受数组的 mazePrint 函数在清除屏幕后打印它。然后它调用接受数组的 mazeTraversal 函数。mazeTraversal 的第一部分尝试定位“x”的位置并将其替换为“.”。下一部分应该确定“x”面向的方向。我使用了 4、5、6 和 8（西、南、东、和北（看数字键盘））来表示它面对的方式。根据它面对的方式，mazeTraversal 尝试确定是否有一条开放的路径向右，然后在前面，然后向左，然后在后面，然后在那个位置放置一个 X 并改变 x 的方式面对。当我运行程序时，第二次移动后出现问题。感谢您的帮助，如果这不是此类问题的地方，我们深表歉意。

```
#include <stdio.h>
#include <stdlib.h>

void mazePrint(char *maze[12][12]);
void mazeTraversal(char *maze[12][12]);
static int face = 6;

main()
{
    int i = 0;
    int j = 0; 
    int k = 0;
    int start;
    int xpos;

    char *mazeone[12][12] = {
       //0///1///2///3///4///5///6///7///8///9///10//11///
        "#","#","#","#","#","#","#","#","#","#","#","#",//0
        "#",".",".",".","#",".",".",".",".",".",".","#",//1
        ".",".","#",".","#",".","#","#","#","#",".","#",//2
        "#","#","#",".","#",".",".",".",".","#",".","#",//3
        "#",".",".",".",".","#","#","#",".","#",".",".",//4
        "#","#","#","#",".","#",".","#",".","#",".","#",//5
        "#","#",".","#",".","#",".","#",".","#",".","#",//6
        "#","#",".","#",".","#",".","#",".","#",".","#",//7
        "#",".",".",".",".",".",".",".",".","#",".","#",//8
        "#","#","#","#","#","#",".","#","#","#",".","#",//9
        "#",".",".",".",".",".",".","#",".",".",".","#",//10
        "#","#","#","#","#","#","#","#","#","#","#","#",};//11

    for (i = 0; i <12; i++)
        if (mazeone[i][0] == "." ) {
            start = i; 
            mazeone[start][0] = "x";
            xpos = start;
            break;
        }

    printf("X is the starting point.\n");
    printf("Press Space Bar to watch the X move.\n\n\n");
    getchar();
    mazePrint(mazeone);
    getchar();
    return 0;
}

void mazePrint(char *maze[12][12])
{   
    int x = 0; 
    int y = 0;

    system("cls");
    for (x = 0; x < 12; x++) {
        for (y = 0; y < 12; y++) {
            printf("%s", maze[x][y]);
        }
        printf("\n"); 
    }
    getchar(); 
    mazeTraversal(maze);
}

void mazeTraversal(char *maze[12][12])
{
    int x = 0; 
    int y = 0;

    for (x = 0; x < 12; x++) {
        for (y = 0; y < 12; y++) {
            if (maze[y][x] == "x")
                break;
        } 
        if(maze[y][x] == "x")
            break;
    }

    for (y = 0; y < 12; y++) {
        for (x = 0; x < 12; x++) {
            if (maze[y][x] == "x")
                break;
        } 
        if (maze[y][x] == "x")
            break;
    }

    maze[y][x] = ".";

    switch (face) {
        case 6:{
            if (maze[y][x-1] == ".") {
                maze[y][x-1] = "x"; 
                face = 5;
            } else if (maze[y + 1][x] == ".") {
                maze[y + 1][x] = "x"; 
                face = 6;
            } else if (maze[y][x+1] == ".") {
                maze[y][x+1] = "x";
                face = 8;
            } else if (maze[y - 1][x] == ".") {
                maze[y - 1][x] = "x"; 
                face = 4;
            }
        }
        case 8:{
            if (maze[y + 1][x] == ".") {
                maze[y + 1][x] = "x"; 
                face = 6;
            } else if (maze[y][x+1] == ".") {
                maze[y][x+1] = "x";
                face = 8;
            } else if (maze[y - 1][x] == ".") {
                maze[y - 1][x] = "x"; 
                face = 4;
            } else if (maze[y][x-1] == ".") {
                maze[y][x-1] = "x"; 
                face = 5;
            }
        }
        case 4:{
            if (maze[y][x+1] == ".") {
                maze[y][x+1] = "x";
                face = 8;
            } else if (maze[y - 1][x] == ".") {
                maze[y - 1][x] = "x"; 
                face = 4;
            } else if (maze[y][x-1] == ".") {
                maze[y][x-1] = "x"; 
                face = 5;
            } else if (maze[y + 1][x] == ".") {
                maze[y + 1][x] = "x"; 
                face = 6;
            }
        }
        case 5:{
            if (maze[y - 1][x] == ".") {
                maze[y - 1][x] = "x";
                face = 4;
            } else if (maze[y][x-1] == ".") {
                maze[y][x-1] = "x"; 
                face = 5;
            } else if (maze[y + 1][x] == ".") {
                maze[y + 1][x] = "x"; 
                face = 6;
            } else if (maze[y][x+1] == ".") {
                maze[y][x+1] = "x";
                face = 8;
            }
        }
    }

    mazePrint(maze);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T23:30:16.770

您缺少每个代码块之后的`break;`语句。如果没有这些语句，您的代码将落入 next 中的每一个，这不是您想要的。`switch(face)``case:``break;``case:`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-12T22:09:41.750

我认为你的方向错了。您应该从 开始`maze[2][0]`，面对“6”。你想前进`maze[2][1]`，面对仍然'6'。但是，如果您查看`mazeTraversal`方向 6 的代码，您会得到这种情况：

```
if(maze[y][x+1] == "."){     
   maze[y][x+1] = "x";     
   face = 8;
 } 
```

因此，您错误地设置了结果方向。
可能有助于保持直截了当的一件事是使用枚举而不是随机数字代码：

```
enum Facing {
   face_EAST,
   face_SOUTH,
   face_WEST, 
   face_NORTH } face = face_EAST; 
```

我什至可能会忘记指南针方向并使用特定于问题的方向。这应该有助于保持代码中的方向。

```
enum Facing {
   face_Xplus,
   face_Yplus, 
   face_Xminus, 
   face_Yminus } face = face_Xplus; 
```

# jquery - 您如何在 fancybox V2 中为 iframe 设置不同的高度/宽度？

> ID：10132462
> 
> 赞同：3
> 
> 时间：2012-04-12T21:56:33.747
> 
> 标签：jquery, fancybox, fancybox-2

我一直在使用 Fancybox 1.3.4，并且在那里我在链接本身中有 iframe 的尺寸。

这是我如何拥有它的示例

```
test.html?width=675&height=470 
```

当我单击链接时，fancybox 将打开具有这些尺寸的 iframe。我正在尝试 Fancybox V2，但我对如何设置 iframe 的尺寸感到困惑。我希望每个 iframe 都有不同的尺寸。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T23:01:05.633

像这样设置你的 html （使用 HTML5 `DOCTYPE`）：

```
<a class="fancybox fancybox.iframe" data-width="675" data-height="470" href="test.html" >test</a>
<a class="fancybox fancybox.iframe" data-width="400" data-height="200" href="test2.html" >test 2</a> 
```

（设置每个元素的属性`width`）`height``data-`

然后这个脚本：

```
$("a.fancybox").fancybox({
  fitToView: false,
  afterLoad: function(){
   this.width = $(this.element).data("width");
   this.height = $(this.element).data("height");
  }
 }); // fancybox 
```

应该在fancybox v2.x中做到这一点

# visual-studio - 如何并行安装 Visual Studio 2010 Professional 和 Express

> ID：10132464
> 
> 赞同：1
> 
> 时间：2012-04-12T21:56:51.113
> 
> 标签：visual-studio, visual-studio-2010, visual-studio-express

我的开发人员机器上已经安装了 Visual Studio 2010 Professional。但是，我需要安装 Visual Studio 2010 Express 才能开发商业 Windows Phone 应用程序。（我只有 DreamSpark 的专业版非商业学生许可证。）

我怎样才能做到这一点？当我尝试安装 Express 版时，它只集成到 Professional 版中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T22:19:48.107

这并不理想，但您可以虚拟化您的操作系统并在其上运行它。

[例如vmware 工作站](http://www.vmware.com/products/workstation/)或[虚拟 PC](http://www.microsoft.com/windows/virtual-pc/default.aspx)。

维基百科有很多与这些类似的产品[列表](http://en.wikipedia.org/wiki/Comparison_of_platform_virtual_machines)

# url - CakePHP 2.1 URL 语言参数

> ID：10132465
> 
> 赞同：1
> 
> 时间：2012-04-12T21:56:53.563
> 
> 标签：url, cakephp, internationalization

我终于让我的多语言 CakePHP 2.1 应用程序*几乎*可以工作了。

首先，我在末尾定义了默认语言`core.php`：

```
/* Define default language */
Configure::write('Config.language', 'eng'); 
```

这是我的代码`AppControler.php`：

```
public function beforeFilter() {
parent::beforeFilter();
    $this->_setLanguage();
    //Configure::write('Config.language', 'fre'); //Manually change the language to test .po file
    $this->Auth->allow('index','view','home','display','logout');
}

function _setLanguage() {

    if ($this->Cookie->read('lang') && !$this->Session->check('Config.language')) {
        $this->Session->write('Config.language', $this->Cookie->read('lang'));
    }
    else if (isset($this->params['language']) && ($this->params['language']
             !=  $this->Session->read('Config.language'))) {

        $this->Session->write('Config.language', $this->params['language']);
        $this->Cookie->write('lang', $this->params['language'], false, '20 days');
    }
} 
```

如果我`Configure::write('Config.language', 'fre');`在 AppController.php 中取消注释，整个网站都是法语的（除了数据库驱动的内容，我计划使用 TranslateBehavior）。但是，我想在单击按钮时使用基于 URL 的语言切换，这就是应用程序崩溃的地方。这是我的路线，基于这个[具体的教程](http://nuts-and-bolts-of-cakephp.com/2008/11/28/cakephp-url-based-language-switching-for-i18n-and-l10n-internationalization-and-localization)：

```
Router::connect('/:language/:controller/:action/*', array(), array('language' => '[a-z]{2}')); 
```

这是我的按钮代码：

```
<?php echo $this->Html->link($this->Html->image('../img/PUZ013-US-Flag.png', array('border' => '0')),array('language'=>'eng'),array('target' => '_parent', 'escape' => false));;?>&nbsp <?php echo $this->Html->link($this->Html->image('../img/PUZ013-FR-Flag.png', array('border' => '0')),array('language'=>'fre'),array('target' => '_parent', 'escape' => false));?> 
```

我在 AppHelper 中有这个来处理 URL 切换，但它不起作用。URL 应该是 example.com/fre/controller/action，但它是 example.com/controller/action/language:fre，并且 cookie 没有改变。

```
class AppHelper extends Helper {

  public function url($url = null, $full = false) {
        if(!isset($url['language']) && isset($this->params['language'])) {
          $url['language'] = $this->params['language'];
        }

        return parent::url($url, $full);
   }

} 
```

如果您单击标志，则不会发生任何事情。我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T19:45:54.747

我最终向我的 AppController 添加了一个函数并在我的`beforeFilter()`：

我的`beforeFilter()`样子是这样的：

```
public function beforeFilter() {
    parent::beforeFilter();
    $this->_checkRoute();
    $this->Auth->allow('index','view','home','display','logout');
} 
```

这是`_checkRoute()`功能：

```
function _checkRoute() {
        $params = $this->params['pass'];
        $url = $this->here;

        if (strpos($url, 'language:fre')) {
            $this->Session->write('Config.language', 'fre'); 
            Configure::write('Config.language', 'fre');
        }

        elseif (strpos($url, 'language:eng')) {
            Configure::write('Config.language', 'eng');
            $this->Session->write('Config.language', 'eng');
        }

} 
```

当用户单击语言图标按钮时，将翻译单个页面。唯一剩下的问题是，当用户单击菜单链接时，会话取消设置，因为 URL 参数未维护。另一天的另一个谜题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T22:06:49.197

你能给我们标志的 HTML 输出吗？

我认为这是您在 AppHelper 中的 url 方法的问题。如果您尝试在其中呼应某些内容，它会显示吗？

**编辑**：我有另一种解释，在你的路线中，你有：

```
'language' => '[a-z]{2}' 
```

由于您的语言代码使用 3 个字符，您应该使用：

```
'language' => '[a-z]{3}' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-17T10:24:55.530

以防万一其他人遇到这个问题。我所做的是使用上面deewilcox的答案并稍微更改了代码。

```
function _checkRoute() {
    $lang = $this->params["language"];

    if ($lang != $this->Session->read("Config.language")) {
        $this->Session->write('Config.language', "".$lang);
        Configure::write('Config.language', "".$lang);
    }
} 
```

我使用了问题中的路由，但我也使用了自定义路由。自定义路由必须先写

```
Router::connect('/:language/:controller/:action/*', array(), array('language' => '[a-z]{3}')); 
```

如果你使用

```
$this->Html->link() 
```

# asp.net-mvc-3 - 存储库模式 mvc3

> ID：10132471
> 
> 赞同：0
> 
> 时间：2012-04-12T21:57:39.510
> 
> 标签：asp.net-mvc-3, razor, entity-framework-4.1, repository-pattern

我对 c# mvc3 中的存储库模式有一个非常基本的问题。

我正在使用 EF4.1，数据库中有数百万条记录。

我需要根据某些子句从 SQL 数据库中获取一些数据。获取的数据可能数以万计，所以我当然必须使用分页和排序。

这里的问题是我需要检查作为字符串存储在表中的 XML 中的元素以及其他一些字段的子句。

喜欢：这是我的数据模型：

```
 public string ReportXML { get; set; }
    public DateTime CreatedOn { get; set; } 
```

报告 XML 包含字段“ `VehicleNumber`”，这是我的搜索条件以及`CreatedOn`字段。

什么应该是将此 XML 作为字符串播放的最佳方式，以便仅从 DB 中获取满足该子句的匹配项。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T07:59:22.230

这不是实体框架的情况。更糟糕的是，您的数据库表没有足够的结构来处理此类查询。

要在 SQL Server 中查询 XML 数据，您需要使用[XML SQL 数据类型](http://msdn.microsoft.com/en-us/library/ms189887%28v=sql.105%29.aspx)- 而不是字符串。一旦使用 XML 数据类型，您就可以使用 XPath 或 XQuery 来查询其内容（您还可以索引内容以提高此类查询的性能）。要编写此类查询，您需要使用本机 SQL。EF 不支持 XML 列。

如果您想从 EF 中使用它，您可以尝试用视图替换映射表，该视图将使用 XML 列查询表，但如果不使用存储过程或 EDMX 文件中映射的自定义 SQL 命令，您将无法插入或更新数据.

# objective-c - 在 Objective C 中使用 CoreAudio 混合 MIDI 音频通道

> ID：10132474
> 
> 赞同：1
> 
> 时间：2012-04-12T21:57:59.433
> 
> 标签：objective-c, core-audio, mixer, coremidi

我正在尝试编写一个程序来接收来自不同乐器的 MIDI 信号。目前，MIDI 信号被发送到采样器单元 (kAudioUnitSubType_Sampler)，每个采样器单元都有一个相关的音效 - 由声音字体提供。单独我可以让乐器正确演奏，但是我需要能够混合多种乐器。

起初我想为每个音轨创建一个单独的 AUGraph，但我想这会占用大量内存并且不是最好的解决方案。

从那时起，我一直试图让混音器工作（kAudioUnitSubType_AU3DMixerEmbedded）。在设置了其他音频单元（我已经测试过）之后，我使用以下代码设置了混音器：

```
cd.componentType = kAudioUnitType_Mixer;
cd.componentSubType = kAudioUnitSubType_AU3DMixerEmbedded;

result = AUGraphAddNode (_processingGraph, &cd, &mixerNode);
NSCAssert (result == noErr, @"Unable to add the Output unit to the audio processing graph. Error code: %d '%.4s'", (int) result, (const char *)&result); 
```

然后我打开图表：

```
result = AUGraphOpen (_processingGraph);
NSCAssert (result == noErr, @"Unable to open the audio processing graph. Error code: %d '%.4s'", (int) result, (const char *)&result); 
```

接下来我设置流描述：

```
AudioStreamBasicDescription desc;

desc.mSampleRate = 44100; // set sample rate
desc.mFormatID = kAudioFormatLinearPCM;
desc.mFormatFlags      = kAudioFormatFlagIsSignedInteger | kAudioFormatFlagIsPacked;
desc.mBitsPerChannel = sizeof(AudioSampleType) * 8; // AudioSampleType == 16 bit signed ints
desc.mChannelsPerFrame = 1;
desc.mFramesPerPacket = 1;
desc.mBytesPerFrame = ( desc.mBitsPerChannel / 8 ) * desc.mChannelsPerFrame;
desc.mBytesPerPacket = desc.mBytesPerFrame * desc.mFramesPerPacket; 
```

最后，我将所有节点连接在一起：

```
result = AUGraphConnectNodeInput (_processingGraph, mixerNode, 0, ioNode, 0);
NSCAssert (result == noErr, @"Unable to interconnect the nodes in the audio processing graph. Error code: %d '%.4s'", (int) result, (const char *)&result);

result = AUGraphConnectNodeInput(_processingGraph, samplerNode, 0, mixerNode, 0); 

NSCAssert (result == noErr, @"Couldn't connect mixer output(0) to outputNode (0). Error code: %d '%.4s'", (int) result, (const char *)&result);

result = AUGraphConnectNodeInput(_processingGraph, drumSamplerNode, 0, mixerNode, 1);

NSCAssert (result == noErr, @"Couldn't connect speech synth unit output (0) to mixer input (1). Error code: %d '%.4s'", (int) result, (const char *)&result); 
```

我将混音器连接到 io-unit。第一个采样器连接到混音器上的总线 0，第二个采样器连接到采样器上的第二个输入总线。这是 CAShow 的副本：

```
 Member Nodes:
node 1: 'aumu' 'samp' 'appl', instance 0x8882210 O  
node 2: 'aumu' 'samp' 'appl', instance 0x88819d0 O  
node 3: 'auou' 'rioc' 'appl', instance 0x8883510 O  
node 4: 'aumx' '3dem' 'appl', instance 0x8a5d5d0 O  
  Connections:
node   4 bus   0 => node   3 bus   0  [ 1 ch,  44100 Hz, 'lpcm' (0x0000000C) 16-bit little-endian signed integer]
node   1 bus   0 => node   4 bus   0  [ 1 ch,  44100 Hz, 'lpcm' (0x0000000C) 16-bit little-endian signed integer]
node   2 bus   0 => node   4 bus   1  [ 1 ch,  44100 Hz, 'lpcm' (0x0000000C) 16-bit little-endian signed integer]
    CurrentState:
mLastUpdateError=0, eventsToProcess=F, isRunning=F 
```

当我初始化图表时，我得到一个 OSStatus -10868。我见过使用环形缓冲区和渲染回调的例子。在使用 MIDI 时或仅在从麦克风等现场设备获取输入时是否需要这样做？我真的很想知道我的一般方法是否可行（即它应该可以正常工作，但我在某处犯了一些小错误），或者我是否需要花几个小时阅读有关环形缓冲区的信息。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T23:39:24.490

如果您只想将消息发送到 AUSamplers，则不需要环形缓冲区或 renderCallbacks。您只需发送一条消息：

```
OSStatus result = noErr;
UInt32 noteNum = 60;
UInt32 onVelocity = 100;
UInt32 noteCommand =    kMIDIMessage_NoteOn << 4 | 0;
result = MusicDeviceMIDIEvent (sampler.samplerUnit, noteCommand, noteNum, onVelocity, 0); 
```

我以前见过那个错误代码，但我忘记了它的含义。设置时需要遵循一个顺序。查看 audioGraph ( [docs](http://zerokidz.com/audiograph/Home.html) ) ( [source](https://github.com/tkzic/audiograph) )。我建议先设置您的 RemoteIO & Mixer - 查看 CAShow() 输出时更有意义。

此外，默认情况下，混音器只有一个输入。如果你想要更多，你需要指定它：

```
// set the bus count
UInt32 numBuses = busCount;
result = AudioUnitSetProperty(mixerUnit, 
                              kAudioUnitProperty_ElementCount, 
                              kAudioUnitScope_Input, 
                              0, 
                              &numBuses, 
                              sizeof(numBuses));

if (noErr != result) {[self printErrorMessage: @"Error setting Bus Count" withStatus: result]; return;} 
```

# php - 组合键和标签时两个关联数组的PHP笛卡尔积

> ID：10132475
> 
> 赞同：0
> 
> 时间：2012-04-12T21:58:04.067
> 
> 标签：php

我有以下两个数组：

```
<?php
  $a = array( // actions
    'left' => 'LEFT',
    'middle' => 'MIDDLE',
    'right' => 'RIGHT',
  );
  $m = array( // modifiers
    'ctrl' => 'CTRL',
    'alt' => 'ALT',
    'shift' => 'SHIFT',
    'double' => 'DOUBLE',
  );
?> 
```

我需要得到笛卡尔积，但需要注意的是也需要组合的每种组合。当然，如果我向数组添加更多选项，它需要扩展。所以生成的列表应该输出如下：

```
<?php
$options['left'] = 'LEFT';
$options['LEFT'] = array(
  'ctrl_left' => 'CTRL+LEFT',
  'alt_left' => 'ALT+LEFT',
  'shift_left' => 'SHIFT+LEFT',
  'double_left' => 'DOUBLE+LEFT',
  'ctrl_alt_left' => 'CTRL+ALT+LEFT',
  'ctrl_shift_left' => 'CTRL+SHIFT+LEFT',
  'ctrl_double_left' => 'CTRL+DOUBLE+LEFT',
  'alt_shift_left' => 'ALT+SHIFT+LEFT',
  'alt_double_left' => 'ALT+DOUBLE+LEFT',
  'ctrl_alt_shift_left' => 'CTRL+ALT+SHIFT+LEFT',
  'ctrl_alt_double_left' => 'CTRL+ALT+DOUBLE+LEFT',
  'ctrl_alt_shift_double_left' => 'CTRL+ALT+SHIFT+DOUBLE+LEFT',
);
$options['middle'] = 'MIDDLE';
$options['MIDDLE'] = array(
  'ctrl_middle' => 'CTRL+MIDDLE',
  'alt_middle' => 'ALT+MIDDLE',
  'shift_middle' => 'SHIFT+MIDDLE',
  'double_middle' => 'DOUBLE+MIDDLE',
  'ctrl_alt_middle' => 'CTRL+ALT+MIDDLE',
  'ctrl_shift_middle' => 'CTRL+SHIFT+MIDDLE',
  'ctrl_double_middle' => 'CTRL+DOUBLE+MIDDLE',
  'alt_shift_middle' => 'ALT+SHIFT+MIDDLE',
  'alt_double_middle' => 'ALT+DOUBLE+MIDDLE',
  'ctrl_alt_shift_middle' => 'CTRL+ALT+SHIFT+MIDDLE',
  'ctrl_alt_double_middle' => 'CTRL+ALT+DOUBLE+MIDDLE',
  'ctrl_alt_shift_double_middle' => 'CTRL+ALT+SHIFT+DOUBLE+MIDDLE',
);

$options['right'] = 'RIGHT';
$options['RIGHT'] = array(
  'ctrl_right' => 'CTRL+RIGHT',
  'alt_right' => 'ALT+RIGHT',
  'shift_right' => 'SHIFT+RIGHT',
  'double_right' => 'DOUBLE+RIGHT',
  'ctrl_alt_right' => 'CTRL+ALT+RIGHT',
  'ctrl_shift_right' => 'CTRL+SHIFT+RIGHT',
  'ctrl_double_right' => 'CTRL+DOUBLE+RIGHT',
  'alt_shift_right' => 'ALT+SHIFT+RIGHT',
  'alt_double_right' => 'ALT+DOUBLE+RIGHT',
  'ctrl_alt_shift_right' => 'CTRL+ALT+SHIFT+RIGHT',
  'ctrl_alt_double_right' => 'CTRL+ALT+DOUBLE+RIGHT',
  'ctrl_alt_shift_double_right' => 'CTRL+ALT+SHIFT+DOUBLE+RIGHT',
);
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T22:59:39.257

您的请求非常有选择性，不包含完整的组合示例`alt_double_left`但未`shift_double_left`列出

我做了什么来为你创建一个例外列表......

变量

```
$a = array ( // actions
        'left' => 'LEFT',
        'middle' => 'MIDDLE',
        'right' => 'RIGHT' 
);

$m = array ( // modifiers
        'ctrl' => 'CTRL',
        'alt' => 'ALT',
        'shift' => 'SHIFT',
        'double' => 'DOUBLE' 
);

$exceptions = array (
        array (
                "shift",
                "double" 
        ) ,

        array (
                "double",
                "ctrl"
        ),

        array (
                "double",
                "alt"
        )
);

$mc = power_perms ( array_keys ( $m ) );
$options = array (); 
```

环形

```
echo "<pre>";

foreach ( $a as $aKey => $aValue ) {
    $options [$aValue] = isset ( $options [$aKey] ) ? $options [$aKey] : array ();
    foreach ( $mc as $mKey => $mValue ) {
        $cKey = implode ( "_", $mValue );
        $cKey .= "_" . $aKey;

        $cValue = implode ( "+", $mValue );
        $cValue = strtoupper ( $cValue . "+" . $aValue );
        if (eCheck ( $exceptions, $cKey )) {
            continue;
        }
        $options [$aValue] [$cKey] = $cValue;

    }
}

print_r ( $options ); 
```

功能

```
function eCheck($exceptions, $cKey) {

    foreach ( $exceptions as $eValue ) {

        if (strpos ( $cKey, "{$eValue[0]}_{$eValue[1]}" ) !== false) {
            return true;
        }
        if (strpos ( $cKey, "{$eValue[1]}_{$eValue[0]}" ) !== false) {
            return true;
        }

    }

    return false;
}
function power_perms($arr) {

    $power_set = power_set ( $arr );
    $result = array ();
    foreach ( $power_set as $set ) {
        $perms = perms ( $set );
        $result = array_merge ( $result, $perms );
    }
    return $result;
}

function power_set($in, $minLength = 1) {

    $count = count ( $in );
    $members = pow ( 2, $count );
    $return = array ();
    for($i = 0; $i < $members; $i ++) {
        $b = sprintf ( "%0" . $count . "b", $i );
        $out = array ();
        for($j = 0; $j < $count; $j ++) {
            if ($b {$j} == '1')
                $out [] = $in [$j];
        }
        if (count ( $out ) >= $minLength) {
            $return [] = $out;
        }
    }

    // usort($return,"cmp"); //can sort here by length
    return $return;
}

function factorial($int) {
    if ($int < 2) {
        return 1;
    }

    for($f = 2; $int - 1 > 1; $f *= $int --)
        ;

    return $f;
}

function perm($arr, $nth = null) {

    if ($nth === null) {
        return perms ( $arr );
    }

    $result = array ();
    $length = count ( $arr );

    while ( $length -- ) {
        $f = factorial ( $length );
        $p = floor ( $nth / $f );
        $result [] = $arr [$p];
        array_delete_by_key ( $arr, $p );
        $nth -= $p * $f;
    }

    $result = array_merge ( $result, $arr );
    return $result;
}

function perms($arr) {
    $p = array ();
    for($i = 0; $i < factorial ( count ( $arr ) ); $i ++) {
        $p [] = perm ( $arr, $i );
    }
    return $p;
}

function array_delete_by_key(&$array, $delete_key, $use_old_keys = FALSE) {

    unset ( $array [$delete_key] );

    if (! $use_old_keys) {
        $array = array_values ( $array );
    }

    return TRUE;
} 
```

输出

```
Array
(
    [LEFT] => Array
        (
            [double_left] => DOUBLE+LEFT
            [shift_left] => SHIFT+LEFT
            [alt_left] => ALT+LEFT
            [alt_shift_left] => ALT+SHIFT+LEFT
            [shift_alt_left] => SHIFT+ALT+LEFT
            [ctrl_left] => CTRL+LEFT
            [ctrl_shift_left] => CTRL+SHIFT+LEFT
            [shift_ctrl_left] => SHIFT+CTRL+LEFT
            [ctrl_alt_left] => CTRL+ALT+LEFT
            [alt_ctrl_left] => ALT+CTRL+LEFT
            [ctrl_alt_shift_left] => CTRL+ALT+SHIFT+LEFT
            [ctrl_shift_alt_left] => CTRL+SHIFT+ALT+LEFT
            [alt_ctrl_shift_left] => ALT+CTRL+SHIFT+LEFT
            [alt_shift_ctrl_left] => ALT+SHIFT+CTRL+LEFT
            [shift_ctrl_alt_left] => SHIFT+CTRL+ALT+LEFT
            [shift_alt_ctrl_left] => SHIFT+ALT+CTRL+LEFT
        )

    [MIDDLE] => Array
        (
            [double_middle] => DOUBLE+MIDDLE
            [shift_middle] => SHIFT+MIDDLE
            [alt_middle] => ALT+MIDDLE
            [alt_shift_middle] => ALT+SHIFT+MIDDLE
            [shift_alt_middle] => SHIFT+ALT+MIDDLE
            [ctrl_middle] => CTRL+MIDDLE
            [ctrl_shift_middle] => CTRL+SHIFT+MIDDLE
            [shift_ctrl_middle] => SHIFT+CTRL+MIDDLE
            [ctrl_alt_middle] => CTRL+ALT+MIDDLE
            [alt_ctrl_middle] => ALT+CTRL+MIDDLE
            [ctrl_alt_shift_middle] => CTRL+ALT+SHIFT+MIDDLE
            [ctrl_shift_alt_middle] => CTRL+SHIFT+ALT+MIDDLE
            [alt_ctrl_shift_middle] => ALT+CTRL+SHIFT+MIDDLE
            [alt_shift_ctrl_middle] => ALT+SHIFT+CTRL+MIDDLE
            [shift_ctrl_alt_middle] => SHIFT+CTRL+ALT+MIDDLE
            [shift_alt_ctrl_middle] => SHIFT+ALT+CTRL+MIDDLE
        )

    [RIGHT] => Array
        (
            [double_right] => DOUBLE+RIGHT
            [shift_right] => SHIFT+RIGHT
            [alt_right] => ALT+RIGHT
            [alt_shift_right] => ALT+SHIFT+RIGHT
            [shift_alt_right] => SHIFT+ALT+RIGHT
            [ctrl_right] => CTRL+RIGHT
            [ctrl_shift_right] => CTRL+SHIFT+RIGHT
            [shift_ctrl_right] => SHIFT+CTRL+RIGHT
            [ctrl_alt_right] => CTRL+ALT+RIGHT
            [alt_ctrl_right] => ALT+CTRL+RIGHT
            [ctrl_alt_shift_right] => CTRL+ALT+SHIFT+RIGHT
            [ctrl_shift_alt_right] => CTRL+SHIFT+ALT+RIGHT
            [alt_ctrl_shift_right] => ALT+CTRL+SHIFT+RIGHT
            [alt_shift_ctrl_right] => ALT+SHIFT+CTRL+RIGHT
            [shift_ctrl_alt_right] => SHIFT+CTRL+ALT+RIGHT
            [shift_alt_ctrl_right] => SHIFT+ALT+CTRL+RIGHT
        )

) 
```

演示链接 [http://codepad.viper-7.com/WzLQk8](http://codepad.viper-7.com/WzLQk8)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T06:00:40.590

我最终弄清楚了。我对 strpos() 和 explode('_'...) 的测试并不完全满意，但它可以工作并且可以满足我的需要。

[http://ideone.com/1WDOp](http://ideone.com/1WDOp)

```
<?php
function custombuttons_generate_children(&$options, $a, $m, $k) {
  $mcount = count($m);
  if (empty($options[$a[$k]])) {
    foreach ($m as $key => $label) {
      $new_key = implode('_', array($k, $key));
      $new_label = implode('+', array($label, $a[$k]));
      $options[$a[$k]][$new_key] = $new_label;
    }
  }
  else {
    foreach ($options[$a[$k]] as $key => $label) {
      foreach ($m as $mkey => $mlabel) {
        if (!strpos($key, '_' . $mkey)) {
          $new_key = implode('_', array($key, $mkey));
          $new_label = implode('+', array($mlabel, $label));
          $options[$a[$k]][$new_key] = $new_label;
        }
      }
    }
  }
  $last = end(array_keys($options[$a[$k]]));
  if (count(explode('_', $last)) !== $mcount) {
    custombuttons_generate_children($options, $a, $m, $k);
  }
}

function custombuttons_action_options_list() {
  $a = array(
    'left' => 'LEFT',
    'middle' => 'MIDDLE',
    'right' => 'RIGHT',
  );
  $m = array( // modifiers
    'ctrl' => 'CTRL',
    'alt' => 'ALT',
    'shift' => 'SHIFT',
    'double' => 'DOUBLE',
  );
  foreach ($a as $key => $label) {
    $options[$key] = $label;
    $options[$label] = array();
    custombuttons_generate_children($options, $a, $m, $key);
  }
  return $options;
}
$options = custombuttons_action_options_list();
?> 
```

输出：

```
Array
(
    [left] => LEFT
    [LEFT] => Array
        (
            [left_ctrl] => CTRL+LEFT
            [left_alt] => ALT+LEFT
            [left_shift] => SHIFT+LEFT
            [left_double] => DOUBLE+LEFT
            [left_ctrl_alt] => ALT+CTRL+LEFT
            [left_ctrl_shift] => SHIFT+CTRL+LEFT
            [left_ctrl_double] => DOUBLE+CTRL+LEFT
            [left_alt_ctrl] => CTRL+ALT+LEFT
            [left_alt_shift] => SHIFT+ALT+LEFT
            [left_alt_double] => DOUBLE+ALT+LEFT
            [left_shift_ctrl] => CTRL+SHIFT+LEFT
            [left_shift_alt] => ALT+SHIFT+LEFT
            [left_shift_double] => DOUBLE+SHIFT+LEFT
            [left_double_ctrl] => CTRL+DOUBLE+LEFT
            [left_double_alt] => ALT+DOUBLE+LEFT
            [left_double_shift] => SHIFT+DOUBLE+LEFT
            [left_ctrl_alt_shift] => SHIFT+ALT+CTRL+LEFT
            [left_ctrl_alt_double] => DOUBLE+ALT+CTRL+LEFT
            [left_ctrl_shift_alt] => ALT+SHIFT+CTRL+LEFT
            [left_ctrl_shift_double] => DOUBLE+SHIFT+CTRL+LEFT
            [left_ctrl_double_alt] => ALT+DOUBLE+CTRL+LEFT
            [left_ctrl_double_shift] => SHIFT+DOUBLE+CTRL+LEFT
            [left_alt_ctrl_shift] => SHIFT+CTRL+ALT+LEFT
            [left_alt_ctrl_double] => DOUBLE+CTRL+ALT+LEFT
            [left_alt_shift_ctrl] => CTRL+SHIFT+ALT+LEFT
            [left_alt_shift_double] => DOUBLE+SHIFT+ALT+LEFT
            [left_alt_double_ctrl] => CTRL+DOUBLE+ALT+LEFT
            [left_alt_double_shift] => SHIFT+DOUBLE+ALT+LEFT
            [left_shift_ctrl_alt] => ALT+CTRL+SHIFT+LEFT
            [left_shift_ctrl_double] => DOUBLE+CTRL+SHIFT+LEFT
            [left_shift_alt_ctrl] => CTRL+ALT+SHIFT+LEFT
            [left_shift_alt_double] => DOUBLE+ALT+SHIFT+LEFT
            [left_shift_double_ctrl] => CTRL+DOUBLE+SHIFT+LEFT
            [left_shift_double_alt] => ALT+DOUBLE+SHIFT+LEFT
            [left_double_ctrl_alt] => ALT+CTRL+DOUBLE+LEFT
            [left_double_ctrl_shift] => SHIFT+CTRL+DOUBLE+LEFT
            [left_double_alt_ctrl] => CTRL+ALT+DOUBLE+LEFT
            [left_double_alt_shift] => SHIFT+ALT+DOUBLE+LEFT
            [left_double_shift_ctrl] => CTRL+SHIFT+DOUBLE+LEFT
            [left_double_shift_alt] => ALT+SHIFT+DOUBLE+LEFT
        )

    [middle] => MIDDLE
    [MIDDLE] => Array
        (
            [middle_ctrl] => CTRL+MIDDLE
            [middle_alt] => ALT+MIDDLE
            [middle_shift] => SHIFT+MIDDLE
            [middle_double] => DOUBLE+MIDDLE
            [middle_ctrl_alt] => ALT+CTRL+MIDDLE
            [middle_ctrl_shift] => SHIFT+CTRL+MIDDLE
            [middle_ctrl_double] => DOUBLE+CTRL+MIDDLE
            [middle_alt_ctrl] => CTRL+ALT+MIDDLE
            [middle_alt_shift] => SHIFT+ALT+MIDDLE
            [middle_alt_double] => DOUBLE+ALT+MIDDLE
            [middle_shift_ctrl] => CTRL+SHIFT+MIDDLE
            [middle_shift_alt] => ALT+SHIFT+MIDDLE
            [middle_shift_double] => DOUBLE+SHIFT+MIDDLE
            [middle_double_ctrl] => CTRL+DOUBLE+MIDDLE
            [middle_double_alt] => ALT+DOUBLE+MIDDLE
            [middle_double_shift] => SHIFT+DOUBLE+MIDDLE
            [middle_ctrl_alt_shift] => SHIFT+ALT+CTRL+MIDDLE
            [middle_ctrl_alt_double] => DOUBLE+ALT+CTRL+MIDDLE
            [middle_ctrl_shift_alt] => ALT+SHIFT+CTRL+MIDDLE
            [middle_ctrl_shift_double] => DOUBLE+SHIFT+CTRL+MIDDLE
            [middle_ctrl_double_alt] => ALT+DOUBLE+CTRL+MIDDLE
            [middle_ctrl_double_shift] => SHIFT+DOUBLE+CTRL+MIDDLE
            [middle_alt_ctrl_shift] => SHIFT+CTRL+ALT+MIDDLE
            [middle_alt_ctrl_double] => DOUBLE+CTRL+ALT+MIDDLE
            [middle_alt_shift_ctrl] => CTRL+SHIFT+ALT+MIDDLE
            [middle_alt_shift_double] => DOUBLE+SHIFT+ALT+MIDDLE
            [middle_alt_double_ctrl] => CTRL+DOUBLE+ALT+MIDDLE
            [middle_alt_double_shift] => SHIFT+DOUBLE+ALT+MIDDLE
            [middle_shift_ctrl_alt] => ALT+CTRL+SHIFT+MIDDLE
            [middle_shift_ctrl_double] => DOUBLE+CTRL+SHIFT+MIDDLE
            [middle_shift_alt_ctrl] => CTRL+ALT+SHIFT+MIDDLE
            [middle_shift_alt_double] => DOUBLE+ALT+SHIFT+MIDDLE
            [middle_shift_double_ctrl] => CTRL+DOUBLE+SHIFT+MIDDLE
            [middle_shift_double_alt] => ALT+DOUBLE+SHIFT+MIDDLE
            [middle_double_ctrl_alt] => ALT+CTRL+DOUBLE+MIDDLE
            [middle_double_ctrl_shift] => SHIFT+CTRL+DOUBLE+MIDDLE
            [middle_double_alt_ctrl] => CTRL+ALT+DOUBLE+MIDDLE
            [middle_double_alt_shift] => SHIFT+ALT+DOUBLE+MIDDLE
            [middle_double_shift_ctrl] => CTRL+SHIFT+DOUBLE+MIDDLE
            [middle_double_shift_alt] => ALT+SHIFT+DOUBLE+MIDDLE
        )

    [right] => RIGHT
    [RIGHT] => Array
        (
            [right_ctrl] => CTRL+RIGHT
            [right_alt] => ALT+RIGHT
            [right_shift] => SHIFT+RIGHT
            [right_double] => DOUBLE+RIGHT
            [right_ctrl_alt] => ALT+CTRL+RIGHT
            [right_ctrl_shift] => SHIFT+CTRL+RIGHT
            [right_ctrl_double] => DOUBLE+CTRL+RIGHT
            [right_alt_ctrl] => CTRL+ALT+RIGHT
            [right_alt_shift] => SHIFT+ALT+RIGHT
            [right_alt_double] => DOUBLE+ALT+RIGHT
            [right_shift_ctrl] => CTRL+SHIFT+RIGHT
            [right_shift_alt] => ALT+SHIFT+RIGHT
            [right_shift_double] => DOUBLE+SHIFT+RIGHT
            [right_double_ctrl] => CTRL+DOUBLE+RIGHT
            [right_double_alt] => ALT+DOUBLE+RIGHT
            [right_double_shift] => SHIFT+DOUBLE+RIGHT
            [right_ctrl_alt_shift] => SHIFT+ALT+CTRL+RIGHT
            [right_ctrl_alt_double] => DOUBLE+ALT+CTRL+RIGHT
            [right_ctrl_shift_alt] => ALT+SHIFT+CTRL+RIGHT
            [right_ctrl_shift_double] => DOUBLE+SHIFT+CTRL+RIGHT
            [right_ctrl_double_alt] => ALT+DOUBLE+CTRL+RIGHT
            [right_ctrl_double_shift] => SHIFT+DOUBLE+CTRL+RIGHT
            [right_alt_ctrl_shift] => SHIFT+CTRL+ALT+RIGHT
            [right_alt_ctrl_double] => DOUBLE+CTRL+ALT+RIGHT
            [right_alt_shift_ctrl] => CTRL+SHIFT+ALT+RIGHT
            [right_alt_shift_double] => DOUBLE+SHIFT+ALT+RIGHT
            [right_alt_double_ctrl] => CTRL+DOUBLE+ALT+RIGHT
            [right_alt_double_shift] => SHIFT+DOUBLE+ALT+RIGHT
            [right_shift_ctrl_alt] => ALT+CTRL+SHIFT+RIGHT
            [right_shift_ctrl_double] => DOUBLE+CTRL+SHIFT+RIGHT
            [right_shift_alt_ctrl] => CTRL+ALT+SHIFT+RIGHT
            [right_shift_alt_double] => DOUBLE+ALT+SHIFT+RIGHT
            [right_shift_double_ctrl] => CTRL+DOUBLE+SHIFT+RIGHT
            [right_shift_double_alt] => ALT+DOUBLE+SHIFT+RIGHT
            [right_double_ctrl_alt] => ALT+CTRL+DOUBLE+RIGHT
            [right_double_ctrl_shift] => SHIFT+CTRL+DOUBLE+RIGHT
            [right_double_alt_ctrl] => CTRL+ALT+DOUBLE+RIGHT
            [right_double_alt_shift] => SHIFT+ALT+DOUBLE+RIGHT
            [right_double_shift_ctrl] => CTRL+SHIFT+DOUBLE+RIGHT
            [right_double_shift_alt] => ALT+SHIFT+DOUBLE+RIGHT
        )

) 
```

我稍微重新排序了键/标签，但这并没有真正改变解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T23:01:20.273

这应该工作

```
foreach($a as $key=>$val){
    $options[$key]=$val;
    $m_temp=$m;
    while(is_array($m_temp)){
        $options[$val][implode('_', $m_temp).'_'.$key] = implode('_', array_value($m_temp)).'_'.$val;
        $m_temp=array_pop($m_temp);
    }
    $m=$m_temp;
} 
```

# excel - 没有行号的错误消息

> ID：10132479
> 
> 赞同：4
> 
> 时间：2012-04-12T21:58:29.513
> 
> 标签：excel, vba, error-handling

我正在用 Visual Basic for Applications (6.5) 编写一个小程序（宏），我正在使用集成到 Excel 2007 中的标准编辑器。

我的问题是我收到没有任何行号信息的错误消息。我不是指我的错误处理或用户定义的消息。

例子：

![德语错误消息“1004”](../Images/1ee0460442399561d42a0413be1afa2c.png)

错误消息说我有一个运行时错误“1004”。我无法单击“调试”按钮，只有“结束”和“帮助”可用。因此，我看不到错误发生在哪一行。这非常令人沮丧。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T07:42:58.170

无法进入调试模式的一个原因是 VBA 受保护 - VBA 项目属性 - 锁定项目以供查看。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T22:21:03.820

VBA 宏中的此错误通常表明滥用了 excel VBA 函数。您将不会获得调试信息，因为它会从调试器无法访问的内部办公室代码中抛出。

隔离失败行的最佳方法是在失败的宏顶部放置一个断点，并逐行跟踪它。您还可以在堆栈跟踪中找到您的代码行（尽管我不记得在 VBA 中有多少可用的代码）。

如果您知道某些代码部分发生故障，您可以将其添加到您的问题中，让我们看看。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-13T00:18:31.997

您需要手动添加行号并捕获错误。在陷阱中，使用 Erl 获取行号。我现在没有 Excel 来检查我的语法，但您的代码应该如下所示：

```
public sub Test()

on error goto TestError

10  Dim i as Integer
20  Dim j as Integer

30  i = 1
40  j = 0

50  debug.Print i/j

TestExit:
    exit sub
TestError:
    debug.Print Err.Number, Err.Description, Erl
    goto TestExit
end sub 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-13T18:13:09.780

您可以在 MZTools 中创建错误处理程序“模板”，并非常快速地将它们应用于项目中的每个子/功能。这样的模板会在遇到错误时给您一个消息框，告诉您错误所在的模块/子，并且停止将导致代码中断，因此您可以按 F8 并继续执行该代码行之后的代码行触发了错误。

```
 On Error GoTo {PROCEDURE_NAME}_ErrorHandler

    {PROCEDURE_BODY}

NormalExit:
    Exit {PROCEDURE_TYPE}
{PROCEDURE_NAME}_ErrorHandler:
    MsgBox "Error " & Err.Number & " (" _ 
    & Err.Description & ") in {PROJECT_NAME}:{MODULE_NAME}:{PROCEDURE_NAME}"
   Stop 
   Resume Next 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-15T23:22:22.707

有时这种错误发生在受密码保护的代码部分中——尤其是在加载项中——因为 VBA 无法将其调试光标移动到那里。这就是为什么它不给你行号。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2022-02-17T21:19:52.033

我发现了几个没有行号的巧妙解决方案。实现时被称为天赐之物的那个触发了我的实现，我在[直奔错误线中描述了它](https://warbe-maker.github.io/vba/common/error/handling/2022/02/16/Straight-to-the-Error-Line.html)

# android - Android PreferenceScreen 设置标题

> ID：10132481
> 
> 赞同：2
> 
> 时间：2012-04-12T21:58:33.900
> 
> 标签：android, android-preferences

我正在创建一个嵌套的首选项屏幕（即其中包含另一个 PreferenceScreen 对象）

我可以使用 .setTitle 方法为第二个 PreferenceScreen 设置标题

我理想中想要的是第一个首选项屏幕，它显示到第二个首选项屏幕的链接以具有不同的标题。

例如，顶级首选项屏幕称为：

短信

我想要的内部短信：

```
 Sound Options
  Vibrate Options 
  Misc Options 
```

但是当我进入辅助屏幕时，我希望标题是

```
 "SMS Messages - Sound Options" 
```

似乎只有一个属性可以设置 - 即“setTitle”，它显示为第一个首选项屏幕上的链接和第二个首选项屏幕上的标题。

有没有办法区分这两者？

# xml - 对象引用未设置为对象的实例是什么意思。

> ID：10132488
> 
> 赞同：1
> 
> 时间：2012-04-12T21:58:51.737
> 
> 标签：xml, vb.net

我们正在尝试从单独的 XML 文档中读取信息。

这是我们的代码：

```
'load the XMLTest document containing cars.
    Dim xml As XDocument = XDocument.Load("CreditApp.xml")

    Dim SSN As String = txtSSN.Text
    'get all car makes that are red.
    Dim query = From xe In xml.Descendants("SSN")
         Where xe.Element("SSN").Value = SSN
                Select New With {
                    .FName = xe.Element("FName").Value 'Error in code is here
                }

    'loop through query result output results.
    For Each element In query.ToArray
        MessageBox.Show(element.FName)
    Next 
```

我们收到错误：

你调用的对象是空的。

我们也不确定它指的是什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T22:03:55.843

当您播种该消息时，这意味着您尝试访问当前值为 的变量的成员`Nothing`。

```
Dim obj As Object = Nothing
Console.WriteLine(obj.ToString()) ' Null ref on obj access 
```

VB.Net 中的值`Nothing`（类似于 C# `null`）意味着对象没有值。试图访问它的成员是在访问一个成员。运行时无法满足此请求，因此会引发异常以让您了解问题。

在此特定示例中，错误的最可能原因似乎是以下行

```
FName = xe.Element("FName").Value 
```

此代码不会做任何事情来验证`xe.Element("FName")`不返回的内容`Nothing`，因此在访问 member 时可能会导致异常`Value`。要解决此问题，您需要防范这种可能性。最简单的方法是使用辅助方法

```
Public Function GetFNameValueOrEmpty(ByVal elem As XElement) As String
  Dim child = elem.Element("FName")
  If child Is Nothing Then
    Return String.Empty
  Else
    Return child.Value
  End If
End Function 
```

使用此助手，您可以这样重写原始查询

```
Dim query = From xe In xml.Descendants("SSN")
         Where xe.Element("SSN").Value = SSN
                Select New With {
                    .FName = GetFNameValueOrEmpty(xe)
                } 
```

# mysql - 从两个表中过滤项目。mysql规范化

> ID：10132489
> 
> 赞同：0
> 
> 时间：2012-04-12T21:58:52.543
> 
> 标签：mysql

基本上我想选择所有 car_color=yellow & car_gear=Manual 的汽车。我怎样才能做到这一点？我应该写什么而不是“？？？” ? 我的桌子结构错了吗？

到目前为止我做了什么：

```
$sql = "SELECT * FROM
    A
JOIN 
    B
ON
    A.id=B.Aid WHERE ???"; 
```

表 A

```
id  title
1   Toyota
2   Volvo 
```

表 B

```
id  Aid     attr_name   attr_val
0   1       car_year    2012
1   1       car_color   red
2   1       car_km      1000
3   1       car_gear    manual
4   2       car_color   black
5   2       car_km      0
6   2       car_gear    Automat 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T22:07:09.813

`where`我的建议是，如果您希望某个子句正常工作，您需要重新设计您的表格。就像是：

```
create table tableB
(
    id int,
    Aid int,
    car_year int,
    car_color varchar,
    car_km int,
    car_gear varchar
) 
```

然后你可以写你的`SQL`：

```
SELECT * 
FROM A
JOIN B
    ON A.id=B.Aid 
WHERE car_color='yellow'
    AND car_gear='Manual' 
```

或者你可以更进一步，为每个汽车变量创建一个单独的表——年份、颜色、公里、档位。这实际上取决于您的需求，您不想过度使用它。

# html - CSS-Confusion：网站右侧有很多空白区域

> ID：10132494
> 
> 赞同：0
> 
> 时间：2012-04-12T21:59:39.100
> 
> 标签：html, css

这个好像想不通...

这个网站[http://dannyvola.com](http://dannyvola.com)的右侧有很多空白区域。

我知道它很小，但我无法弄清楚！

非常感谢您的帮助。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T22:08:57.130

问题在于以下css：

```
#thumbnav {
    list-style: none;
    display: block;
    margin: 4px 0 0 0;
    width: 20000px;  <-- HERE
    padding: 0;
    overflow: visible;
    position: relative;
} 
```

您为元素提供了 20000px 的宽度，这会将您的布局推向右侧。向右走！

尝试将 更改`width`为`auto`。

# c# - 基于所使用的算术类型的不同答案（不发生溢出）

> ID：10132496
> 
> 赞同：0
> 
> 时间：2012-04-12T21:59:42.990
> 
> 标签：c#, generics

我在一个通用类中有一个计算矩阵行列式的函数。该函数适用于任何类型的某些输入，而对于其他输入则给出错误的答案（基于类型）。

这是功能：

```
 public T Determinant()
    {
        checked
        {
            int n = dimension;
            Matrix<T> a = new Matrix<T>(baseArray);
            int i, j, k;
            T det = (dynamic)0;
            for (i = 0; i < n - 1; i++)
            {
                for (j = i + 1; j < n; j++)
                {
                    det = (dynamic)a[j, i] / a[i, i];
                    for (k = i; k < n; k++)
                        a[j, k] = a[j, k] - (dynamic)det * a[i, k];
                }
            }
            det = (dynamic)1;
            for (i = 0; i < n; i++)
                det = (dynamic)det * a[i, i];

            return det;
        }
    } 
```

我添加了`checked`块以查看是否发生溢出，但显然没有发生溢出。

一个示例输入是，如果 baseArray 是`new double[,] {{11, 11, 12, 17, 21, 29}, {16, 9, 25, 30, 29, 33}, {3, 13, 9, 24, 21, 24}, {23, 6, 29, 21, 23, 23}, {22, 19, 14, 30, 21, 24}, {22, 28, 20, 17, 25, 28}};`，它将给出正确的答案（非常接近 -942755），但如果 baseArray 是，`new int[,] {{11, 11, 12, 17, 21, 29}, {16, 9, 25, 30, 29, 33}, {3, 13, 9, 24, 21, 24}, {23, 6, 29, 21, 23, 23}, {22, 19, 14, 30, 21, 24}, {22, 28, 20, 17, 25, 28}};`它会给出 15934050 作为答案（甚至不接近）。

矩阵上的索引器只返回矩阵的第 i 个第 j 个元素，所以它们不是问题。

我对可能是什么问题感到困惑，因为它不是溢出。有任何想法吗？

**重现代码：**

```
public class Matrix<T>
where T : IConvertible
{
    private int dimension;
    private T[][] baseArray;

    public Matrix(int dimensions, T[,] baseArray)
    {
        this.dimension = dimensions;
        this.baseArray = new T[dimension][];
        for (int i = 0; i < dimension; i++)
        {
            this.baseArray[i] = new T[dimension];
            for (int j = 0; j < dimension; j++)
            {
                this[i, j] = baseArray[i, j];
            }
        }
    }

    public T this[int a, int b]
    {
        get
        {
            return baseArray[a][b];
        }
        set
        {
            baseArray[a][b] = value;
        }
    }

    public T Determinant()
    {
        checked
        {
            int n = dimension;
            Matrix<T> a = new Matrix<T>(baseArray);
            int i, j, k;
            T det = (dynamic)0;
            for (i = 0; i < n - 1; i++)
            {
                for (j = i + 1; j < n; j++)
                {
                    det = (dynamic)a[j, i] / a[i, i];
                    for (k = i; k < n; k++)
                        a[j, k] = a[j, k] - (dynamic)det * a[i, k];
                }
            }
            det = (dynamic)1;
            for (i = 0; i < n; i++)
                det = (dynamic)det * a[i, i];

            return det;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-12T22:02:18.517

当值是`int`值时，它执行整数运算。当值是`double`值时，它会执行浮点运算——就这么简单。更简单的例子：

```
using System;

public class Test
{
    static void Main()
    {
        PrintResult(1, 2);      // Prints 0
        PrintResult(1.0, 2.0);  // Prints 0.5
    }

    static void PrintResult(dynamic x, dynamic y)
    {
        Console.WriteLine(x / y);
    }
} 
```

# ssrs-2008 - SSRS 表达式中的 WHERE 子句

> ID：10132505
> 
> 赞同：20
> 
> 时间：2012-04-12T22:00:03.740
> 
> 标签：ssrs-2008, where-clause, ssrs-expression, stackedbarseries

在中插入`WHERE`子句的语法是`SSRS expression`什么？我正在使用`BIDS 2008`.

```
=Sum(Fields!QuantityToShip.Value) WHERE FIELDS!Program.Value = "FC" 
```

上面列出的代码代表我要使用的逻辑，但显然`WHERE`在其中插入会产生语法错误。

此表达式的目的是在堆积条形图中定义系列的值字段。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-04-12T22:08:14.047

使用[IIF](http://msdn.microsoft.com/en-us/library/microsoft.visualbasic.interaction.iif.aspx)方法：

```
=Sum(IIF(Fields!Program.Value = "FC", Fields!QuantityToShip.Value, 0)) 
```

# iphone - 在 XCode 4.3.2 中符号化崩溃日志

> ID：10132508
> 
> 赞同：8
> 
> 时间：2012-04-12T22:00:23.867
> 
> 标签：iphone, ios, xcode, cocoa-touch, xcode4.3

每当我的应用程序发生崩溃时，崩溃日志都会在管理器内以符号形式显示。现在的问题是所有指向 iOS 类的内存地址都被符号化了，但是我的应用程序类的内存地址没有被符号化。我需要设置哪个 XCode 项目属性才能启用它们。

这些是启用 iOS 类符号化的当前构建设置。我正在使用 XCode 4.3.2。

![当前构建设置](../Images/a43cc6780c3f5cbecffe21106d60fa2f.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T12:49:22.373

`Strip Debug Symbols During Copy`：应该`YES`在非调试配置版本上，因为它会炸毁你的应用程序二进制文件 30-50%

`Debug Information Format`：应该`DWARF with dSYM File`适用于所有配置，以便能够从任何二进制文件中符号化您的符号。

现在我猜你是在调试版本上尝试这个，在不是 Xcode 中 build 命令的最新结果的版本上。您必须记住，每次运行 build 命令时，都会生成一个新的可执行文件和一个新的 dSYM 包，而前一个会被覆盖！（除非您使用存档功能）

符号化脚本从应用程序的崩溃报告中解析 UUID，并通过 Spotlight 搜索相应的 .app AND .app.dSYM 包。因此，如果任一 Spotlight 未索引目标路径或二进制文件被另一个构建运行替换，它将无法符号化应用程序符号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-12T01:22:10.603

你关了聚光灯吗？symbolicatecrash 使用 Spotlight 来查找二进制文件和 dsym 文件，因此如果您关闭了 Spotlight，它将无法找到它们。无论如何，这里是将十六进制堆栈跟踪地址转换为行号的方法：

[1] 到 XCode->Organizer 找到 .dSym 文件，点击档案，然后右键点击档案，然后 cd 进入这个目录（你可以把文件夹拖到一个 shell 窗口中）。

[2] cd 进入 dSYMs 目录。

[3] 运行 dwarfdump 命令将十六进制地址转换为代码中的行号：

```
dwarfdump --arch armv7 myApp.dSYM --lookup 0xaabbccdd | grep 'Line table' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T00:58:58.123

尝试将部署后处理设置为否。

> **部署_后处理。**激活此设置表示应剥离二进制文件并将文件模式、所有者和组信息设置为标准值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T10:01:13.050

似乎 xcode 使用最后存档的构建 .dsym 文件来表示您的日志（即使在调试中），因此**请尝试存档您的应用程序**。

归档您的应用程序后重新符号化您的崩溃报告。

它对我有用。

# iis-7 - 带有文件扩展名的 WCF Webapi UriTemplate 可以在本地工作，但不能在 IIS7 上工作

> ID：10132513
> 
> 赞同：0
> 
> 时间：2012-04-12T22:00:46.597
> 
> 标签：iis-7, wcf-web-api

我有一个具有以下端点的 WCF WebApi Rest 服务：

```
[WebGet(UriTemplate = "{id}")] 
```

和

```
[WebGet(UriTemplate = "{id}.pdf")] 
```

第一个端点返回 JSON，第二个端点返回 pdf。这两个端点都在我的本地环境中工作，但 pdf 端点`404`在运行 IIS7 的服务器上返回 a。

为了执行路由，是否需要某种设置 IIS7？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T14:42:35.683

我找到了解决这个问题的方法。这是一个简单的 web.config 添加：

```
<system.webServer>
  <handlers>
      <add name="PDFHandler-Integrated-4.0" path="*.pdf" verb="GET" type="System.Web.Handlers.TransferRequestHandler" resourceType="Unspecified" preCondition="integratedMode" />
  </handlers>
</system.webServer> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T19:54:13.927

您可能需要将 .pdf 添加到 IIS 中的 MIME TYPE

尝试使用 application/octet-stream 类型添加文件扩展名 .PDF

[http://technet.microsoft.com/en-us/library/cc725608%28v=ws.10%29.aspx](http://technet.microsoft.com/en-us/library/cc725608%28v=ws.10%29.aspx)

**更新**

要使用 itextsharp 之类的方法直接返回动态生成的 PDF：

```
[WebGet(UriTemplate = "GetPDF/{id}")]        
public void GetPDF(int id)
        {
        Invoice i = InvoiceData.GetInvoiceByID(id);
        MyApp.Data.Export.PDF pdf = new MyApp.Data.Export.PDF();
        byte[] data = pdf.generatePDFBytes(id);

        Response.Clear();
        Response.AddHeader("content-disposition", "attachment;filename=\"" + i.InvoiceNumber + ".pdf" + "\"");
        Response.ContentType = "application/pdf";
        Response.BinaryWrite(data.ToArray());
        Response.End();
    } 
```

# postgresql - SELECT 可以使用查询的结果在 PostgreSQL 中形成表表达式吗？

> ID：10132520
> 
> 赞同：0
> 
> 时间：2012-04-12T22:01:33.840
> 
> 标签：postgresql, select, dynamic-sql

我有一个表，其中包含数据库中其他表的索引。

之前我迭代了这个索引来执行`queries on the tables indexed,`，但正如您可能想象的那样，这对于大量表来说非常慢。

我想知道是否有可能从我的索引表上的查询结果形成一个表表达式，因此使用我的索引表上的查询的 FROM 将我的查询写成一条语句`list of tables result`。

ETA：我正在使用 PostgreSQL v9.0。我通过一次迭代一个查询来查询具有相同查询的多个表（这很慢）。我想加快速度，如果有一种方法可以使用一个表表达式查询所有表，该表表达式是从索引表中选择的所有表的列表。

我的（简化的）表是“tabledata”，其中包含相同模式表 A、B、C、D、E、F、G 的列表以及每个表的布尔值“启用”。我想查询所有“启用”为真的字母表；最好使用一个查询，而不是一次遍历它们。基本上查询那些返回的表：

SELECT tablename FROM tabledata WHERE enabled = TRUE`

ETA2：我在查询工具中输入了以下内容：

```
CREATE FUNCTION f_all_tables()
  RETURNS SETOF A AS 
$body$
DECLARE 
    _tbl oid;
BEGIN 
FOR _tbl IN 
    SELECT tablename::regclass
    FROM   tabledata 
    WHERE  enabled 
LOOP 
    RETURN QUERY EXECUTE  '
    SELECT * FROM ' || _tbl; 
END LOOP; 
END;

$body$ language plpgsql; 

SELECT * FROM f_all_tables(); 
```

并得到一个错误：

```
ERROR:  invalid input syntax for type oid: "A"
CONTEXT:  PL/pgSQL function "f_all_tables" line 6 at FOR over SELECT rows 
```

中`A`的第一个表名在哪里`tabledata`。

ETA3：

我已经实现了下面的第二个解决方案并且它有效。谢谢 示例代码：

```
CREATE TABLE tabledata2 
(
  tablename character(64) NOT NULL,
  enabled boolean
)
WITH (
  OIDS=FALSE
);
ALTER TABLE tabledata2
  OWNER TO postgres;

CREATE TABLE AAAAAA
(
  enabled boolean
)
WITH (
  OIDS=FALSE
);
ALTER TABLE AAAAAA
  OWNER TO postgres;
CREATE TABLE AAAAAB
(
  enabled boolean
)
WITH (
  OIDS=FALSE
);
ALTER TABLE AAAAAB
  OWNER TO postgres;

INSERT INTO tabledata2 VALUES ('AAAAAA', 'true');
INSERT INTO tabledata2 VALUES ('AAAAAB', 'true');
INSERT INTO AAAAAA VALUES ('true');
INSERT INTO AAAAAB VALUES ('false');

CREATE FUNCTION f_all_tables() 
  RETURNS SETOF AAAAAA AS  
$body$ 
DECLARE  
    _tbl regclass; 
BEGIN  
FOR _tbl IN  
    SELECT tablename::regclass 
    FROM   tabledata2  
    WHERE  enabled
LOOP  
    RETURN QUERY EXECUTE  ' 
    SELECT * FROM ' || _tbl;  
END LOOP;  
END; 

$body$ language plpgsql;  

SELECT * FROM f_all_tables(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T13:03:27.907

我从您的评论中得知，您所有的候选表都共享相同的布局。

您自己已经知道，正确的方法是拥有*一个*包含所有行的表，可能还有一个额外的列来标记它们的类型。

### *从一个*表中检索行

```
CREATE FUNCTION f_table(int)
  RETURNS SETOF A AS
$body$
BEGIN

    RETURN QUERY EXECUTE '
    SELECT * FROM ' || tablename::regclass FROM mytables WHERE id = $1;

END;
$body$ language plpgsql; 
```

称呼：

```
SELECT * FROM f_table(42); 
```

### 要点：

*   您可以像查询表一样查询“表函数”（函数返回`SETOF`值）。

*   您的表共享相同的布局。因此，您可以定义返回类型，而不必在每次调用时都键入列定义列表。

*   您必须知道 PostgreSQL 中的每个表都有一个同名的复合类型。这就是为什么您可以使用其中一个表的名称（`A`在我的示例中）作为返回类型并且它会起作用。

*   我使用[转换`regclass`](http://www.postgresql.org/docs/current/interactive/datatype-oid.html)为表名而不是`quote_ident(tablename)`. 它也可以防止 SQL 注入，它也适用于模式限定的表名，例如`myschma.mytable`. [`quote_ident()`](http://www.postgresql.org/docs/current/interactive/functions-string.html#FUNCTIONS-STRING-OTHER)将是一个好主意，但在这种情况下失败。

*   永远无法定义具有动态 SQL 的函数`STABLE`。[更多关于在手册中创建函数的信息。](http://www.postgresql.org/docs/current/interactive/sql-createfunction.html)

* * *

### *从所有*表中检索行

（所有相同的基本类型。）
首先：**纯 SQL无法使用****动态**表列表来执行此操作。

```
CREATE FUNCTION f_all_tables()
  RETURNS SETOF A AS
$body$
DECLARE
    _tbl regclass;
BEGIN

FOR _tbl IN
    SELECT tablename::regclass
    FROM   tabledata
    WHERE  enabled
LOOP
    RETURN QUERY EXECUTE '
    SELECT * FROM ' || _tbl;
END LOOP;

END;
$body$ language plpgsql; 
```

称呼：

```
SELECT * FROM f_all_tables(); 
```

如果这组表的成员**不会改变**，你可以写一个丑陋的[UNION SELECT](http://www.postgresql.org/docs/current/interactive/sql-select.html#SQL-UNION)：

```
SELECT * FROM A
UNION ALL
SELECT * FROM B
... 
```

`UNION ALL`保留结果中的所有重复项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T22:29:49.650

就像是：

```
SELECT * FROM (SELECT tablename FROM mytables WHERE id = 42); 
```

? 那是不可能的。

最明显的方法是使用带有 EXECUTE 的动态语句。您可以编写一个函数，该函数采用表的名称并返回所有行的所有列，然后您需要为其指定列定义列表：

```
CREATE FUNCTION select_from_table(TEXT) RETURNS SETOF RECORD
STABLE LANGUAGE 'plpgsql' AS
$$
BEGIN
    RETURN QUERY EXECUTE 'SELECT * FROM ' || quote_ident($1);
END;
$$;

SELECT * FROM select_from_table('pg_namespace') AS s(nspname name, nspowner oid, nspacl aclitem[]); 
```

你得想想这有多丑。如果您的所有表都将具有相同的架构，那么您可以通过返回正确的类型来稍微清理它（而不是让调用者每次都指定又大又丑的列定义列表）。

更好的是，如果您总是想以某种方式进行过滤，您可以这样做。

但一般来说，您还应该考虑您要完成的工作以及是否可以用更 SQL 的方式来完成。

# rabbitmq - RabbitMQ 的“x-expires”参数的 ZeroMQ 等价物是什么？

> ID：10132525
> 
> 赞同：2
> 
> 时间：2012-04-12T22:01:53.197
> 
> 标签：rabbitmq, zeromq, amqp

...或者 zmq 如何处理断开连接的客户端？队列是否存在某种超时，如果客户端断开连接，它可以继续接收消息，但在这么多秒后自行清理？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T23:45:01.583

见：[http ://api.zeromq.org/2-1:zmq-setsockopt](http://api.zeromq.org/2-1:zmq-setsockopt)

ZMQ 套接字有一个高水位线的概念。

从文档：

```
The high water mark is a hard limit on the maximum number of outstanding messages ØMQ shall 
queue in memory for any single peer that the specified socket is communicating with.

If this limit has been reached the socket shall enter an exceptional state and depending on 
the socket type, ØMQ shall take appropriate action such as blocking or dropping sent messages. 
```

对于每种类型的 zmq 套接字（REQ、REP、PUB、SUB 等），您可以检查文档的行为 - 如果它阻止发送消息或丢弃消息。

大多数情况下，当客户端断开连接时，它会丢弃消息。如果这对您很重要，您必须在 ZMQ 模式之上构建消息持久性和可靠性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T05:28:48.343

您可以使用几种不同的策略，这取决于您的需求（没有一个答案适合所有人）。

一般来说，如果客户端断开连接，它在服务器端的队列会被删除。PUB 到 SUB 流和 PUSH 到 PULL 流都是如此。

如果您想处理频繁的断开连接，您可以使用 ROUTER-DEALER 并在连接上设置一个身份（在 DEALER 端，在连接之前）。然后 ROUTER 将为 DEALER 排队消息，即使它离开并回来。然后，您可以使用 HWM 限制该队列的大小。

如果你想要超时，那就有点棘手了，因为 ZeroMQ 要么永远保留消息，要么在无法排队时立即丢弃它们。您需要在服务器的自己的列表结构中对消息进行排队，将 HWM 设置为 1，并使用非阻塞发送将它们从队列中推出，因为它们有空间。然后您可以自己使客户端过期并删除与它们关联的队列。这听起来像工作，但很简单。

# javascript - 非空数组的 .length 为 0

> ID：10132526
> 
> 赞同：0
> 
> 时间：2012-04-12T22:01:56.073
> 
> 标签：javascript, sqlite

我有这个功能似乎正在做它应该做的事情：

```
var getData = function(query)
{
    var data = [];
    db.transaction(function(tx) {
        tx.executeSql(query, [], function (tx, results) {
            var len = results.rows.length, i;
            for (i = 0; i < len; i++) {
                data.push(results.rows.item(i));
            }
        }, error);
    });

    return data;
} 
```

当我执行 a`console.log(data)`时，它会显示一个包含正确数据的对象数组，如您在 Chrome 控制台的示例中所见：

![Chrome 的控制台显示数据正确](../Images/514698d7caec061449614a49b08f41e5.png)

但是，data.length 为 0，因此无法迭代。我试过了

```
for(var i = 0; i < data.length; i++) {
    $('.regions').append(data[i].region + '<br>');
}; 
```

这不好，因为 data.length 为 0。我试过了

```
for(var key in data) {
    $('.regions').append(data[key].region + '<br>');
}; 
```

这不起作用，大概是出于同样的原因。我什至尝试过`$.each()`使用 jQuery，但没有任何东西进入循环。我`console.log(data)`在这些循环之前做了一个正确的检查，以仔细检查它是否仍然具有我所期望的数据。我手动手动重新创建了数据

```
data = [
    {
        available: "1",
        company_id: 1,
        cultivar: "Cultivar 2.0",
        cultivar_id: 18,
        id: 18,
        image: "b0c2dd4765422fc0acce9461a040ebaf.png",
        logo: "980f2a610d681ade5b5b42511f89655c.png",
        maintenance: "Fairway",
        maintenance_id: 7,
        name: "Cultivar 2.0",
        region: "Midwest",
        region_id: 24,
        species: "Perennial Ryegrass",
        species_id: 7,
        trait_disease: "Disease 2",
        trait_disease_id: 6,
        available: "1"
    },
    {
        company_id: 1,
        cultivar: "Cultivar 2.0",
        cultivar_id: 18,
        id: 18,
        image: "b0c2dd4765422fc0acce9461a040ebaf.png",
        logo: "980f2a610d681ade5b5b42511f89655c.png",
        maintenance: "Fairway",
        maintenance_id: 7,
        name: "Cultivar 2.0",
        region: "Midwest",
        region_id: 24,
        species: "Perennial Ryegrass",
        species_id: 7,
        trait_disease: "Disease 2",
        trait_disease_id: 6
    }
]; 
```

这种类型的东西在控制台中看起来*完全*一样，但是当我迭代它时它就起作用了。我在 StackOverflow 周围做了一些其他的事情，包括确保它确实被识别为一个数组。

即使我知道长度，`data[0]`是`undefined`。我在这上面花了一些甜蜜的时间，想知道是否还有其他任何想法。

这已经在 Chrome 18.0.1025.151 中进行了测试（Firefox 没有 sqlite），它最终会在带有 jQ​​uery Mobile 和 PhoneGap 的手机上运行，​​但我们还没有到那个时候。只是一个带有 sqlite 数据库的简单 HTML 页面。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T22:07:41.980

您的基本问题是您希望能够从启动它的函数返回**异步操作的结果。**

对“.executeSql()”的调用**立即**返回。在此之后的某个时间点，数据库操作完成并调用您的回调函数。但是，包含函数 ("getData()") 早已返回。

围绕异步操作创建 API 的方法是让您自己的 API 异步。给“getData()”另一个参数，以便它的客户端可以传入一个处理函数。然后，从回调中调用处理程序并将数组作为参数传递给它。

# python - 如何从字典中的一个列表中随机选择一个项目，并获取列表的键？

> ID：10132529
> 
> 赞同：2
> 
> 时间：2012-04-12T22:02:09.197
> 
> 标签：python, list, random, dictionary

我有一个列表字典：

```
lists=dict(animals=["dog","cat","shark"],
           things=["desk","chair","pencil"],
           food=["spaghetti","ice-cream","potatoes"]) 
```

如何让 Python 从其中一个列表中随机选择一个项目并告诉我它在哪个列表中？或者我如何从字典中选择一个键，然后从与该键对应的列表中选择一个值？

例如：

```

狗 - 来自动物
土豆——来自食物

```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T22:05:19.990

[`random.choice`](http://docs.python.org/library/random.html#random.choice)从序列中选择一个随机项：

```
import random 
```

`dict`选择要从您命名的 中绘制的键`lists`：

```
which_list = random.choice(lists.keys()) 
```

然后，使用该密钥`list`从`dict`：

```
item = random.choice(lists[which_list]) 
```

如果您需要相等的权重：

```
import random

which_list, item = random.choice([(name, value) 
                                     for name, values in lists.iteritems() 
                                         for value in values]) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-12T22:10:37.397

我可以立即想到的两种方法：

*   首先选择一个列表名称（键），然后从中选择一个条目——如果列表有不同的长度，如果你想要均匀分布，你只需要小心
*   将列表的字典展平为一个对列表`('list-name','value')`（无论每个列表有多少条目，都更容易获得均匀分布，但需要更多内存）

做前者的一种方法：

```
from itertools import chain
import random
weight_choices = list(chain(*([name] * len(values) for (name, values) in lists.iteritems()))) # generate a list of the form ("animals", "animals", "animals", ...)
list_name = random.choice(weight_choice) # The list it's chosen from...
chosen_item = random.choice(lists[list_name]) # and the item itself 
```

（如果您不关心列表之间的均匀分布：）

```
import random
list_name = random.choice(lists.keys())
chosen_item = random.choice(lists[list_name]) 
```

...和后一种方法：

```
from itertools import chain, repeat
all_items = list(chain(*((zip(repeat(name), values) for (name, values) in lists.iteritems()))))
list_name, chosen_item = random.choice(all_items) 
```

`itertools`后者的方法较少：

```
all_items = []
for name, values in lists.iteritems():
  for value in values:
    all_items.append((name, value))
list_name, chosen_item = random.choice(all_items) 
```

# facebook - 隐私问题 - 通过 facebook id 登录外部网站

> ID：10132535
> 
> 赞同：0
> 
> 时间：2012-04-12T22:03:05.353
> 
> 标签：facebook, facebook-graph-api

最近我不得不通过我的 facebook id 访问网站上的一个页面。

想知道，他们是否有可能收集诸如我的朋友是谁等信息？

基本上我收到了一封电子邮件来检查一个链接。我点击链接，它说我必须登录 facebook。我登录。我收到警告..离开 facebook。然后我单击继续，它会将我带到该站点。

这是糟糕的编程还是幕后的网络钓鱼？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T22:07:05.970

这取决于他们要求什么样的信息。

当他们编写代码时，他们会要求某些特权或权限。反过来，您通过登录，允许他们做他们要求的任何事情。

所以，理论上，他们现在可能知道谁是你的朋友。

如果您在非 Facebook 网站上登录，并且该网站只是要求您提供凭据而不显得真实，那么您可以打赌，这些人将能够窃取您的信息并知道您的朋友是谁。

# javascript - 替换 CMS 格式内容中的标签

> ID：10132536
> 
> 赞同：-1
> 
> 时间：2012-04-12T22:03:07.933
> 
> 标签：javascript

我正在处理一个像这样格式化文本块的 CMS。

> `<p>`Lorem ipsum dolor sit amet, consectetur adipiscing elit。`<br>`Vivamus lacus ipsum, semper non consequat eu, facilisis at lectus。Vestibulum et magna ac `<br>`odio semper porttitor lacinia congue orci。Vivamus suscipit eleifend dolor，在 hendrerit `<br>`turpis bibendum ut。`<br><br>`Morbi interdum augue et nisl ullamcorper sit amet ornare `<br>`lorem tempus。Duis nec nisi quis ipsum pulvinar volutpat。Suspendisse venenatis malesuada metus,
> nec pretium dui cursus eget。Donec vitae lorem vitae risus dapibus malesuada congue vel nunc。`</p>`

双行回车`<br><br>`用于开始新段落。我无法更改 CMS 输出。

由于文本块周围已经有一个开始`<p>`和结束`<p>`，我需要首先为结束`</p>`标记和开始标记切换双行返回`<p>`标记。像这样：“ `<br><br>`”=“ `</p><p>`”

然后我需要去掉其余的
标签并用一个空格替换：`<br>`=`" "`

我试过这个，

```
$('#nomorefonts').submit(function () {
    $('br').replaceWith(function () {
        return $('</p><p>').append($(this).contents());
    });
    return false;
}); 
```

但它`<br>`用几个开始和结束标签替换每个`</p><p>`标签。

**编辑：**想要的结果是这样的：

> `<p>`Lorem ipsum dolor sit amet, consectetur adipiscing elit。Vivamus lacus ipsum, semper non consequat eu, facilisis at lectus。Vestibulum et magna ac odio semper porttitor lacinia congue orci。Vivamus suscipit eleifend dolor，在 hendrerit turpis bibendum ut。`</p><p>`Morbi interdum augue et nisl ullamcorper sit amet ornare lorem tempus。Duis nec nisi quis ipsum pulvinar volutpat。Suspendisse venenatis malesuada metus, nec pretium dui cursus eget。Donec vitae lorem vitae risus dapibus malesuada congue vel nunc。`</p>`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T22:20:50.127

您正在尝试使用`$`创建[新元素](http://api.jquery.com/jQuery/#jQuery2)，但`</p><p>`不是元素。

这整个方法似乎有问题，但最好的办法是操纵原始字符串：

```
$('.block-of-text').html($('.block-of-text').html().replace(/<br>/g, '</p><p>')); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T22:22:40.593

我认为你最好用这样的东西：

```
$('#target_container p').each(function(){
    var pThis = $(this);
    var pRaw = pThis.html().split('<br>').join('</p><p>');
    pThis.html(pRaw);
}); 
```

'#target_container' 正是您要开始寻找 P 元素实例的地方。替换为适合您的。

更好的是，修补 CMS。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T22:25:54.427

像这样的东西：

```
var newHtml = "";
var splitHtml = $("p").html().split("<br>");
for (var i=0; i < splitHtml.length; i++) {
   newHtml += "</p><p>" + splitHtml[i];
}
$("#yourdiv").html(newHtml); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T22:26:14.267

您是否尝试过[replace()](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/replace)？就像是：

```
$('#nomorefonts').submit(function(){
    var elem=$('#text_box'),formattedStr=elem.html().replace(/<br><br>/g,'</p><p>').replace(/<br>/g,' ');
    elem.html(formattedStr);
    return false;
}); 
```

# php - 从数组中取出项目并将它们放入数据库

> ID：10132539
> 
> 赞同：2
> 
> 时间：2012-04-12T22:03:21.200
> 
> 标签：php, arrays

如果这很简单，我还在学习，很抱歉......我想要实现的是一个在线商店结帐系统（不要担心它不会被使用它只是为了我自己的学习，所以任何草率的代码都不会影响一个可怜的企业主但是任何草率代码的皮卡总是值得赞赏的）。

所以我让客户选择产品，然后将它们存储在数组中并显示在篮子中。然后我想将用户带到结帐页面，以便他们可以单击“订单”，然后将这些项目连同他们的用户名一起更新到数据库中的“订单”表中。

我仍然在处理数组（可能是我处于哪个学习阶段的标识符）所以我不确定当我有几个时如何将这些项目（基本上只是 ISBN 号和价格）从我的购物篮带到结帐页面不同的数组。我要做的是展示我如何创建每个数组以及如何在篮子中显示它，希望这将是您可能需要的一切！非常感谢您的阅读，任何帮助将不胜感激。我希望这个问题也可以帮助处于我这个阶段的其他人。

创建数组=

**产品.php**

```
echo "<a href='addtolist.php?bookname=" . $bookname . "&bookauthor=" . 
     $bookauthor . "&bookpub=" . $bookpub . "&bookprice=" . $bookprice . 
     "&bookisbn=" . $bookisbn . "'>Add to basket</a>"; 
```

**添加列表.php**

```
<?php
 session_start();
 if ( !isset($_SESSION['username']) )
{
header("Location:index.php");
exit();
}

$bookarray = array();
$bookarray['bookname'] = $_GET['bookname'];
$bookarray['bookauthor'] = $_GET['bookauthor'];
$bookarray['bookpub'] = $_GET['bookpub'];
$bookarray['bookisbn'] = $_GET['bookisbn'];
$bookarray['bookprice'] = $_GET['bookprice'];

$found = false;

if (isset($_SESSION['list']))
{
  foreach ($_SESSION['list'] as $key => $another)
  {
    if ($_SESSION['list'][$key]['bookisbn'] == $_GET['bookisbn'])
        {
          $found = true;
          break;
    }
  }
}

if ($found == false)
{
  $_SESSION['list'] [] = $bookarray;
}

header('Location: ' . $_SERVER['HTTP_REFERER']);

exit();
?> 
```

**显示列表.php**

```
<?php

if (!isset($_SESSION['list']))
{
echo "No list members selected";
}
else
{
?>
<div id="bket2">

<table>
<tr>
<td class='toprow'>Title</td>
<td class='toprow'>Author</td>
<td class='toprow'>Publisher</td>
<td class='toprow'>ISBN</td>
<td class='toprow'>Price</td>
</tr>

<?php

$totalprice=0;

foreach ($_SESSION['list'] as $key => $another)
{
?>
<tr>
        <td><?php echo $_SESSION['list'][$key]['bookname']?></td>
        <td><?php echo $_SESSION['list'][$key]['bookauthor']?></td>
    <td><?php echo $_SESSION['list'][$key]['bookpub']?></td>
    <td><?php echo $_SESSION['list'][$key]['bookisbn']?></td>
    <td><?php echo "&#163;".$_SESSION['list'][$key]['bookprice']?></td>
    <td><a href="removefromlist.php?bookisbn= <?php echo $_SESSION['list'][$key]['bookisbn']?> &location= <?php echo
    $_SERVER['PHP_SELF']?> ">[-]</a></td>
    </tr>
    <?$totalprice += $_SESSION['list'][$key]['bookprice'];?>
    <?php
    }
    }
    ?>
    </table>
    <div><h4>Total Price = &#163;<?echo $totalprice;?></h4></div>

</div> 
```

然后在我的篮子里我放

```
<?php require "displaylist.php" ? 
```

多谢你们

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T22:28:55.360

这是一个可以帮助您入门的示例。

```
<?php

$dbh = new PDO('mysql:host=localhost;dbname=mysql', 'username', 'password');
$stmt = $dbh->prepare('insert into orders (isbn, price) values (?, ?)');

if (isset($_SESSION['list']))
{
  foreach ($_SESSION['list'] as $item)
  {
    $stmt->execute(array($item['bookisbn'], $item['bookprice']));
  }
}
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T22:52:21.727

不完全确定您要做什么，但我假设您想将存储在 $_SESSION['list'] 中的账面价值插入 mysql 中的“订单”表中。这是我的看法（假设您将“用户名”存储在某处的会话变量中）：

```
<?php
session_start();

//connect to db
$con=mysql_connect("localhost","username","password");

if(!$con){
    die("Could not connect to the database: " .mysql_error());
};

mysql_select_db("db_name",$con);

//loop through each book in 'list' and add values to mysql table 'order'
for($i=0; $i<count($_SESSION['list']);$i++){

    $query="INSERT INTO `orders` 
                ('username',
                'isbn',
                'price',
                'timestamp') 
                VALUES 
                ('".mysql_real_escape_string($_SESSION['username'])."',
                '".mysql_real_escape_string($_SESSION['list'][$i]['bookisbn'])."',
                '".mysql_real_escape_string($_SESSION['list'][$i]['bookprice'])."',
                CURDATE()
                )";

    $result=mysql_query($query);
}

mysql_close();

    ?> 
```

# backbone.js - 为什么我的主干视图按钮单击事件不触发

> ID：10132541
> 
> 赞同：0
> 
> 时间：2012-04-12T22:03:28.607
> 
> 标签：backbone.js, backbone-events

我知道这里已经以某种形式提出过这个问题，但我没有看到任何与我的场景真正匹配的内容。我是 Backbone 的新手，我仍在尝试了解如何构建[我的测试应用程序](http://jsfiddle.net/shlonny/KURPP/5/)。

阅读完[这篇](http://lostechies.com/derickbailey/2011/11/09/backbone-js-object-literals-views-events-jquery-and-el/)文章后，我想我解决了“DOM 未就绪问题”，但可能没有任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T22:57:56.363

或者，您可以将元素设置为属性，如下所示：

```
MyApp.AppView = Backbone.View.extend({
    el: $('body'),
    initialize: function() {
    },
    events: {
        "click #clickMe": "doWork"
    },

    doWork: function(evt) {
        evt.preventDefault();
        alert("Work Done!!!!");
    }

}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T22:52:01.320

如果您在实例化时传入 el 而不是在初始化函数中设置它，它将按预期工作。

```
var mainView = new MyApp.AppView({ el: $("body") }); 
```

# c# - 如何在 Xpath 表达式中获取节点的子字符串

> ID：10132543
> 
> 赞同：0
> 
> 时间：2012-04-12T22:03:47.790
> 
> 标签：c#, .net, xpath

我将 xpath 表达式传递给 XmlDocument 并调用 SelectNodes(expression) - 我试图只返回子字符串。到目前为止我已经尝试过

```
substring(//Container/__name,2)
substring(//Container/__name/text(),2)
//Container/__name/substring(.,2)
//Container/__name/text()/substring(.,2) 
```

（你可以看到我越来越绝望）。

它们都给出错误（“表达式必须评估为节点集”）

//Container/__name/text() 顺便说一句（它有 6 个字符长）。

这样做的正确方法是什么？

编辑：这是确切的代码（没什么太壮观的）

```
nodeList = xdoc.SelectNodes(xpathBox.Text); 
```

我真的想提出一个纯 xpath 解决方案 - 这是一个实用程序，它允许通过提供 xpath 表达式和字符串来修改 xml 文档 - 字符串是 xpath 选择的节点中文本的替换表达。我希望能够进行部分替换。因此，如果这是不可能的，是否有任何关于如何最优雅地实现我的目标的建议：用字符串替换部分文本节点，仅使用 xpath 表达式和字符串。也许另一个功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T13:52:44.167

如果 XPath 的评估结果不是节点集，请`Evaluate`使用`SelectNodes`：

```
 string substr = xdoc.CreateNavigator().Evaluate("substring(//Container/__name,2)") as string; 
```

要修改所有`__name`元素中的文本，您可以执行以下操作：

```
 foreach (XmlNode node in xdoc.SelectNodes("//Container/__name")) {
    XmlElement nameElement = node as XmlElement;
    nameElement.InnerText = nameElement.InnerText.Substring(2);
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T22:14:56.617

问题是您尝试执行此操作的位置。预期返回值是一个节点集，而您正试图返回一个字符串。

您需要先返回节点，然后对其执行字符串函数。

将`text()`节点返回到代码后，您可以在其中检查它的长度是否为 6 个字符，您可以在其上运行子字符串吗？

`var new = old.Substring(1,2)`

# php - SELECT * FROM $_POST[] - PHP mySQL 格式

> ID：10132548
> 
> 赞同：1
> 
> 时间：2012-04-12T22:04:31.420
> 
> 标签：php, jquery, mysql

需要帮助格式化 mySQL 查询字符串。以下查询返回“解析错误，需要 T_STRING 或 T_VARIABLE”

PHP：

```
<?php

include 'db_connect.php';

mysql_select_db($databaseName, $con);

$query = "SELECT * FROM .$_POST['tab']. WHERE plant_code = .$_POST['plant_code']";

$result = mysql_query($query) or die (mysql_error());

$row = mysql_fetch_assoc($result);

echo json_encode($row);

?> 
```

jQuery：

```
$('#profiles_desktops').click(function(){
                $.post("php/loadProfile.php", {plant_code : selectedSite, tab : "profiles_desktops"}, function(result){ (do something here...) });  }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T22:09:09.173

不要那样做！它对 SQL 注入攻击很开放。看在上帝的份上，验证并转义您的输入。

至少，将**其**重写为：

```
$query = "SELECT * FROM `".mysql_real_escape_string($_POST['tab'])."` WHERE plant_code = '".mysql_real_escape_string($_POST['plant_code'])."'"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T22:08:14.617

查询中的句点 (.) 是不必要的，因为您没有中断引号。这些中的任何一个都应该起作用：

```
$query = "SELECT * FROM $_POST['tab'] WHERE plant_code = $_POST['plant_code']"; 
```

或者

```
$query = "SELECT * FROM " . $_POST['tab'] . " WHERE plant_code = " . $_POST['plant_code']; 
```

编辑：当然，这不是解决巨大的注入安全漏洞：]

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T22:06:46.063

查询应该是：

```
"SELECT * FROM ".$_POST['tab']." WHERE plant_code =".$_POST['plant_code'] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T22:09:05.953

您在声明中的串联`$query`是错误的。

```
$query = "SELECT * FROM " . $_POST['tab'] . "WHERE plant_code = '" . mysql_real_escape_string($_POST['plant_code']) . "'"; 
```

就足够了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-12T22:10:55.100

应该：

```
$query = "SELECT * FROM ".$_POST['tab']." WHERE plant_code = ".$_POST['plant_code']; 
```

需要将 php 变量用双引号括起来（并保留最后一个，因为您以变量结尾，或者不是双引号，而是省略点，因为 PHP 会看到它的变量并将它们转换为之前的值查询运行。此外，由于某种原因，sql 不喜欢括号中的数组变量。尝试将所有值放入变量中，这也更易于阅读：

```
$tab = $_POST['tab'];
$plant = $_POST['plant_code'];
$query = "SELECT * FROM ".$tab." WHERE plant_code = ".$plant; 
```

# database - Oracle 数据库：对文件夹中的表进行分组，例如 Postgres Schemas？

> ID：10132549
> 
> 赞同：3
> 
> 时间：2012-04-12T22:04:36.707
> 
> 标签：database, oracle, postgresql, database-design, relational-database

有没有办法将表分组到 Postgres 的架构中？我们有一个想要迁移到 Oracle DB 的 Postgresql 服务器。我们使用很多模式来对表进行分类。oracle中有类似的东西吗？Oracle 有模式，但模式和用户之间存在一对一的关系。架构 == 用户。

是否有另一个堆栈交换可能更适合这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T22:45:06.660

您需要在 Oracle 中创建与在 PostgreSQL 中相同数量的模式。每个模式也与用户相关联的事实不应该打扰您。

如果您想知道的话，您不必与所有这些用户一起登录。

只需创建一个“应用程序”用户，并将您在各种模式中创建的表的必要权限授予该应用程序用户。

如果您使用 PostgreSQL 的搜索路径功能来避免完全限定的表名，那么您需要创建指向各种模式中的表的同义词（由“应用程序”用户拥有）。

# asp.net - 在 asp.net mvc3 中使用 HTML5 会话存储

> ID：10132550
> 
> 赞同：0
> 
> 时间：2012-04-12T22:04:44.263
> 
> 标签：asp.net, asp.net-mvc-3, html, local-storage

问题说明：

现在我的 asp.net mvc 3 应用程序正在使用`cookieles="auto"`我非常讨厌的设置，我正在尝试找到一些可以让我关闭该功能的东西。

所以我遇到了 HTML5 存储解决方案，我在理解它背后的想法时遇到了一些麻烦。所以基本上我需要做的就是获取我的`userID`变量并将其从一个页面移动到另一个页面，然后在后端我拉出这个用户 ID 并将数据作为模型传递给查看。现在，我如何在没有 cookie 和使用 HTML5 存储的情况下做到这一点？如果它只能通过 JavaScript 访问，我需要通过 ajax 将它传递给我的控制器吗？但是我认为这没有任何意义，因为我已经将我的模型传递给了带有空用户 ID 的视图，因为 cookie 是空的。

有没有办法访问后端的 HTML5 存储？也许我在这里遗漏了一些东西，请指教！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T22:09:23.800

不，除了javascript代码之外别无他法，它将读取存储内容并将其发送到后端。对于应该对服务器可用的一小部分数据，请使用 cookie。

本地存储是专门为内容创建的，不会随每个请求传输到服务器，因此允许存储比不破坏流量的 cookie 更多的数据。

# java - 如何从 Android 应用程序开始 Skype 通话？

> ID：10132556
> 
> 赞同：7
> 
> 时间：2012-04-12T22:04:58.957
> 
> 标签：java, android, skype

我正在尝试从我的 Android 应用程序启动 Skype 意图，并传递一个电话号码。到目前为止，感谢其他在 stackoverflow 上有类似需求的人，我已经成功启动了 Skype，但我仍然无法传递电话号码。这是我正在使用的代码：

```
Intent sky = new Intent("android.intent.action.CALL_PRIVILEGED");
        sky.setClassName("com.skype.raider",
                "com.skype.raider.Main");
        sky.setData(Uri.parse("tel:" + number));
        Log.d("UTILS", "tel:" + number);
        ctx.startActivity(sky); 
```

发生的事情是 Skype 启动，但给了我一个祝酒词，说该号码无效，并建议我添加国际前缀。Log.d 给了我电话：+39........（这个号码有效，我也用它来

```
public static void call(String number, Context ctx) {
    try {
        Intent callIntent = new Intent(Intent.ACTION_CALL);
        callIntent.setData(Uri.parse("tel:" + number));
        ctx.startActivity(callIntent);
    } catch (ActivityNotFoundException e) {
        Log.e("helloandroid dialing example", "Call failed", e);
    }

} 
```

事实上，当我去 Skype 的视图进行呼叫时，我看到它是由 +0 组成的所以在我看来，我以错误的方式传递电话号码，或者传递给错误的 Activity....任何帮助将不胜感激！同时，我只想说 StackOverflow 简直就是摇滚。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-21T08:16:56.257

看到这个答案：[https ://stackoverflow.com/a/8844526/819355](https://stackoverflow.com/a/8844526/819355)

Jeff 建议使用 a`skype:<user name>`而不是`tel:<phone number>`

在使用 apktool 对 skype apk 进行了一些研究后，正如该答案中所建议的那样，我想出了这段代码，对我来说它正在工作：

```
public static void skype(String number, Context ctx) {
        try {
            //Intent sky = new Intent("android.intent.action.CALL_PRIVILEGED");
            //the above line tries to create an intent for which the skype app doesn't supply public api

                Intent sky = new Intent("android.intent.action.VIEW");
            sky.setData(Uri.parse("skype:" + number));
            Log.d("UTILS", "tel:" + number);
            ctx.startActivity(sky);
        } catch (ActivityNotFoundException e) {
            Log.e("SKYPE CALL", "Skype failed", e);
        }

    } 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-04-05T01:12:32.717

请参阅 Skype 开发者：[Skype URI 教程：Android 应用程序](https://docs.microsoft.com/en-us/skype-sdk/skypeuris/skypeuritutorial_androidapps) 还记得在你的 url 中添加“?call”。例如

```
intent.setData(Uri.parse("skype:" + phoneNumber + "?call")); 
```

没有它，Skype 可能无法拨打该号码。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-12T22:08:18.630

调用外部应用程序时不应包含特定类。让用户决定他/她想要使用的应用程序。这就是 android 的设计方式，它是一个比强迫人们使用软件更好的解决方案（而且在我看来，这是一个相当缓慢、封闭和不方便的应用程序）。

换句话说，只需使用 Uri，这就是 Skype 声明其捕获此类意图的能力的工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-04-16T07:56:46.970

请参阅此 Skype 文档链接[Skype URI 教程：Android 应用](https://docs.microsoft.com/en-us/skype-sdk/skypeuris/skypeuritutorial_androidapps)

> 首先需要检查Skype是否安装或没有使用

```
/**
 * Determine whether the Skype for Android client is installed on this device.
 */
public boolean isSkypeClientInstalled(Context myContext) {
  PackageManager myPackageMgr = myContext.getPackageManager();
  try {
    myPackageMgr.getPackageInfo("com.skype.raider", PackageManager.GET_ACTIVITIES);
  }
  catch (PackageManager.NameNotFoundException e) {
    return (false);
  }
  return (true);
} 
```

> 使用启动 Skype uri

```
/**
 * Initiate the actions encoded in the specified URI.
 */
public void initiateSkypeUri(Context myContext, String mySkypeUri) {

  // Make sure the Skype for Android client is installed.
  if (!isSkypeClientInstalled(myContext)) {
    goToMarket(myContext);
    return;
  }

  // Create the Intent from our Skype URI.
  Uri skypeUri = Uri.parse(mySkypeUri);
  Intent myIntent = new Intent(Intent.ACTION_VIEW, skypeUri);

  // Restrict the Intent to being handled by the Skype for Android client only.
  myIntent.setComponent(new ComponentName("com.skype.raider", "com.skype.raider.Main"));
  myIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);

  // Initiate the Intent. It should never fail because you've already established the
  // presence of its handler (although there is an extremely minute window where that
  // handler can go away).
  myContext.startActivity(myIntent);

  return;
} 
```

> 如果未安装 Skype，则使用重定向到市场

```
/**
 * Install the Skype client through the market: URI scheme.
 */
public void goToMarket(Context myContext) {
  Uri marketUri = Uri.parse("market://details?id=com.skype.raider");
  Intent myIntent = new Intent(Intent.ACTION_VIEW, marketUri);
  myIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
  myContext.startActivity(myIntent);

  return;
} 
```

# c# - 已发布的应用程序无法启动，但发布/调试版本启动良好

> ID：10132561
> 
> 赞同：0
> 
> 时间：2012-04-12T22:05:22.747
> 
> 标签：c#, visual-studio-2010, publishing, oneclick

当我尝试运行已发布的应用程序时遇到问题。当我从 VS（键 F5）运行发布或调试版本时，一切正常。所以我尝试发布我的应用程序（没问题）。在此之后，我通过 oneClick 安装程序安装了应用程序。安装完成没有问题，但是当我尝试运行这个已安装的应用程序时，我只看到消息：程序已停止工作。

请问，有人知道哪里有问题吗？我想这真的很奇怪，当应用程序从 VS 正确运行时，它应该在安装后运行！？还是我错了？或者是否有一些选项可以在 Visual Studio中重置*发布设置？*

非常感谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T22:12:14.723

这取决于您如何设置 ClickOnce，但发生这种情况的主要原因是 ClickOnce 系统在检查更新或`.application`从远程位置运行时遇到错误。

它应该让您可以选择查看问题的日志（或者至少是它放入的讨厌的临时文件）。

从这里您可以确定 ClickOnce 遇到的问题。

我怀疑的最常见问题：

*   用户无法将其身份验证令牌/凭据传送到 ClickOnce 应用程序所在的 Web 服务器。
*   `.application`下载应用程序清单或从服务器存在另一个与网络相关的问题
*   组/本地策略问题
*   在本地计算机的 ClickOnce 某处安装损坏，导致它无法在磁盘上覆盖或找到合适的位置来设置 clickonce 包。
*   在本地机器的 ClickOnce 上安装损坏导致 GUID 冲突（即您的应用程序和损坏的安装无法升级，但共享相同的 GUID）
*   防病毒/防火墙阻止从可执行的 clickonce deploy 访问 Web 组件。

这些都是我在使用 ClickOnce 时遇到的所有问题，也是我们主要从它转向 Wix 风格安装程序的原因。

# clojure - 如何将减少实现的序列转换回惰性向量序列

> ID：10132565
> 
> 赞同：3
> 
> 时间：2012-04-12T22:06:13.620
> 
> 标签：clojure

当我在这个函数中运行一个 221 行的 .csv 文件——用 clojure-csv 解析——

```
(defn test-key-inclusion
    "Accepts csv-data param and an index, a second csv-data param and an index,
     and searches the second csv-data instances' rows (at index) to see if
     the first file's data is located in the second csv-data instance."

    [csv-data1 pkey-idx1 csv-data2 pkey-idx2 lnam-idx fnam-idx]

    (reduce
        (fn [out-log csv-row1]
            (let [cmp-val (nth csv-row1 pkey-idx1 nil)
                  lnam (nth csv-row1 lnam-idx nil)
                  fnam (nth csv-row1 fnam-idx)
                  temp-rc (first (key-pres? cmp-val pkey-idx2 csv-data2))]

            (concat out-log (sorted-map cmp-val (vector lnam fnam)))))
         {}
         csv-data1)) 
```

然后打印结果，一切都很好。

如果我通过上面的函数运行一个 2672 行的 .csv 文件——也用 clojure-csv 解析——然后尝试打印它，我得到一个堆栈溢出错误——线程“main”中的异常 java.lang.StackOverflowError

所以我的问题是：

1）是否应该在lazy-seq中包装对这个函数的调用来解决我的问题？

2）我不想要一个列表，所以将lazy-seq调用包装在vec中会将我的序列转回一个向量，而不会在内存中实现整个序列，也就是说让lazy-seq再次变得不惰性？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T22:19:21.430

1）我希望让序列变得懒惰无济于事，因为打印会在打印之前评估它。而是尝试`doseq`或`(map print my-seq)`以较小的块打印它。

2) 是的，将它包装在 vec 中会给你你想要的:) 虽然用 an 包装你的 reduce`into`会一直让它保持一个向量。即：`(reduce into [] [[1] [2] [3]] )`-->`[1 2 3]`

```
 (into out-log (sorted-map cmp-val (vector lnam fnam))))) 
```

# c++ - C++ 提升线程延迟

> ID：10132566
> 
> 赞同：1
> 
> 时间：2012-04-12T22:06:14.443
> 
> 标签：c++, multithreading, boost, boost-thread

我想在 boost 线程中等待 1.5 秒。使用 boost::xtime 我可以等待整数秒：

```
// Block on the queue / wait for data for up two seconds.
boost::xtime_get(&xt, boost::TIME_UTC);
xt.sec++;
xt.sec++;
....
_condition.timed_wait(_mutex, xt) 
```

我怎样才能等待 1.5 秒呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T22:12:26.020

使用纳秒和秒部分并增加 5 亿纳秒并增加一秒（即 1.5 秒）以下内容是否不起作用

```
xt.sec++;
xt.nsec += 500000000;
_condition.timed_wait(_mutex, xt); 
```

# python - 如何获取列表列表

> ID：10132580
> 
> 赞同：0
> 
> 时间：2012-04-12T22:07:18.657
> 
> 标签：python

所以我有一个这样的列表列表：

```
 mult_list = [ [1,2,3],[9,10,11].....[..,..,..]] 
```

我想要的是可以返回 3 个列表的东西

```
where list_1 = [1,9...1st ele of each list]
      list_2 = [2,10... 2nd ele ]
     ..nth_list = [nth element of each_list] 
```

所以，这是为了举例说明.. mul_list 可以在列表中有任意数量的固定列.. 在我们的示例中，num 列是 3。

所以你可以把它想象成一个矩阵的东西。我希望在第一个列表中的同一列中包含所有元素。这样做的pythonic方法是什么？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T22:09:14.407

试试这个：

```
>>> zip(*mult_list) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T22:12:45.087

`zip`将为您提供作为元组列表的答案。如果您想要列表列表，请执行

```
map(lambda *row: list(row), *mult_list) 
```

编辑：更紧凑，

```
map(list,zip(*mult_list)) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T22:10:26.553

内置函数`zip`正是这样做的：

```
>>> zip([1,2,3,4,5],[6,7,8,9,10])
[(1, 6), (2, 7), (3, 8), (4, 9), (5, 10)] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-12T23:58:23.790

你可以使用 zip(list1, list2);

mult_list = [ [1,2,3],[9,10,11] ]

因此，您将得到 [(1,9),(2,10),(3,10)] 的结果

# ios - NSManagedContext 需要很长时间才能持久

> ID：10132582
> 
> 赞同：0
> 
> 时间：2012-04-12T22:07:22.513
> 
> 标签：ios, cocoa, core-data

我的应用程序有一个 UITableViewController，它有一个代表城市名称的单元格列表。当用户单击一个单元格时，应用程序会将单元格附件类型更改为 UITableViewCellAccessoryCheckmark 并将单元格的文本值（城市名称）保存到持久存储中。但是，我发现每次单击单元格时，至少需要 10 秒才能将数据实际存储到 Persistent Store 中。知道为什么会这样吗？不是立即保存数据，为什么需要这么长时间才能持久保存？

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSString *cityName = [self.citySettingModel nameOfCityAtIndex:indexPath.row OfCountryAtIndex:self.countryIndex];    
    UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath];
    if (cell.accessoryType == UITableViewCellAccessoryCheckmark) {
        cell.accessoryType = UITableViewCellAccessoryNone;
        [[self.citySettingModel worldbikesCoreService] removeCity:cityName];
    }
    else {
        cell.accessoryType = UITableViewCellAccessoryCheckmark;
        [[self.citySettingModel worldbikesCoreService] addCity:cityName toCountry:self.countryName];
    }
} 
```

创建 City 和 Country 对象的代码在不同的类中

```
- (City *) addCity:(NSString*) cityName toCountry:(NSString*) countryName 
{
    NSManagedObjectContext *context = [self.delegate managedObjectContext];

    Country *country = [self.countryDAO addCountry:countryName inManagedObjectContext:context];

    City *city = [self.cityDAO addCity:cityName inManagedObjectContext:context];

    [country addCitiesObject:city];
    return city;
}

- (City*) addCity:(NSString*) cityName inManagedObjectContext:(NSManagedObjectContext *)context
{
    NSFetchRequest *fetchRequest = [NSFetchRequest fetchRequestWithEntityName:@"City"];
    fetchRequest.predicate = [NSPredicate predicateWithFormat:@"cityName = %@", cityName];
    NSSortDescriptor *sortDescriptor = [NSSortDescriptor sortDescriptorWithKey:@"cityName" ascending:YES];
    fetchRequest.sortDescriptors = [NSArray arrayWithObject:sortDescriptor];

    NSError *error;
    NSArray *matches = [context executeFetchRequest:fetchRequest error:&error];

    if (error) NSLog(@"error when retrieving city entities %@", error);

    City *city;

    if (!matches || [matches count] > 1) ;
    else if ([matches count] == 0) {
        city = [NSEntityDescription insertNewObjectForEntityForName:@"City" inManagedObjectContext:context];
        city.cityName = cityName;
    }
    else city = [matches lastObject];

    return city;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T22:12:09.687

找出 Xcode 中花费这么长时间的真正好方法是 Time Profiler - 它应该是您在 iOS 应用程序开发中最好的朋友。

在 Xcode 中，您应该点击 Test，而不是 Run，选择 Time Profiler。您可以看到任何进程需要多少时间。

还有一些工具可以让您检查核心数据提取。

看，那里花费最多的时间并更新帖子。或者，也许，你可以自己解决它）

# google-app-engine - PreparedStatement 不适用于 Google SQL 云

> ID：10132584
> 
> 赞同：1
> 
> 时间：2012-04-12T22:07:29.493
> 
> 标签：google-app-engine, jdbc, prepared-statement

我正在开发一个基于 google sql cloud 的应用程序。Mysql 数据库是本地的。下面插入行的代码有效：

```
Statement stmt = connection.createStatement(); 
String sql = "INSERT INTO USER(name) VALUES ('smith')";
stmt.executeUpdate(sql); 
```

但是，下面的代码使用 PreparedStatement 而不是 Statement 不起作用：

```
String sql = "insert into USER(email) values(?)";
PreparedStatement pstmt = connection.prepareStatement(sql);
pstmt.setString(1, email);
int success = pstmt.executeUpdate(); 
```

数据库中没有插入任何行并且成功 = 0（错误返回代码）

谢谢你的帮助

# python - 在一组固定的元素上生成一定等级的“随机”矩阵

> ID：10132585
> 
> 赞同：9
> 
> 时间：2012-04-12T22:07:31.317
> 
> 标签：python, matlab, math, numpy, linear-algebra

我想生成大小为`m`x`n`和 rank的矩阵`r`，其中元素来自指定的有限集，例如`{0,1}`or `{1,2,3,4,5}`。我希望它们在该词的某种非常松散的意义上是“随机的”，即我希望从算法中获得各种可能的输出，其分布与具有指定等级的该组元素上的所有矩阵的分布模糊相似。

实际上，我实际上并不关心它是否具有 rank `r`，只是它*接近于*rank 矩阵`r`（由 Frobenius 范数测量）。

当手头的集合是实数时，我一直在执行以下操作，这完全可以满足我的需要：生成`U`大小为`m`x`r`和x`V`的矩阵，其中元素独立地从 Normal(0, 2) 中采样。然后是一个x秩矩阵（嗯，，但我认为它很有可能）。`n``r``U V'``m``n``r``<= r``r`

但是，如果我只是这样做然后四舍五入到二进制/ 1-5，则排名会增加。

`r`也可以通过执行 SVD 并获取第一个奇异值来获得矩阵的低秩近似。但是，这些值不会位于所需的集合中，并且将它们四舍五入将再次提高排名。

[这个问题](https://stackoverflow.com/questions/7124673/how-to-create-a-rank-k-matrix-using-matlab)是相关的，但接受的答案不是“随机的”，另一个答案建议 SVD，如前所述，它在这里不起作用。

我想到的一种可能性是`r`从集合中生成线性独立的行或列向量，然后通过它们的线性组合得到矩阵的其余部分。不过，我不太清楚如何获得“随机”线性独立向量，或者之后如何以准随机方式组合它们。

（并不是说它是超级相关的，但我在 numpy 中这样做。）

* * *

**更新：**我已经尝试了 EMS 在评论中建议的方法，这个简单的实现：

```
real = np.dot(np.random.normal(0, 1, (10, 3)), np.random.normal(0, 1, (3, 10)))
bin = (real > .5).astype(int)
rank = np.linalg.matrix_rank(bin)
niter = 0

while rank > des_rank:
    cand_changes = np.zeros((21, 5))
    for n in range(20):
        i, j = random.randrange(5), random.randrange(5)
        v = 1 - bin[i,j]
        x = bin.copy()
        x[i, j] = v
        x_rank = np.linalg.matrix_rank(x)
        cand_changes[n,:] = (i, j, v, x_rank, max((rank + 1e-4) - x_rank, 0))
    cand_changes[-1,:] = (0, 0, bin[0,0], rank, 1e-4)

    cdf = np.cumsum(cand_changes[:,-1])
    cdf /= cdf[-1]
    i, j, v, rank, score = cand_changes[np.searchsorted(cdf, random.random()), :]
    bin[i, j] = v
    niter += 1
    if niter % 1000 == 0:
        print(niter, rank) 
```

它适用于小型矩阵，但在例如 10x10 时会分崩离析——它似乎卡在 6 或 7 级，至少在数十万次迭代中。

看起来这可能与更好（即不太平坦）的目标函数一起工作得更好，但我不知道那会是什么。

* * *

我还尝试了一种简单的拒绝方法来构建矩阵：

```
def fill_matrix(m, n, r, vals):
    assert m >= r and n >= r
    trans = False
    if m > n: # more columns than rows I think is better
        m, n = n, m
        trans = True

    get_vec = lambda: np.array([random.choice(vals) for i in range(n)])

    vecs = []
    n_rejects = 0

    # fill in r linearly independent rows
    while len(vecs) < r:
        v = get_vec()
        if np.linalg.matrix_rank(np.vstack(vecs + [v])) > len(vecs):
            vecs.append(v)
        else:
            n_rejects += 1
    print("have {} independent ({} rejects)".format(r, n_rejects))

    # fill in the rest of the dependent rows
    while len(vecs) < m:
        v = get_vec()
        if np.linalg.matrix_rank(np.vstack(vecs + [v])) > len(vecs):
            n_rejects += 1
            if n_rejects % 1000 == 0:
                print(n_rejects)
        else:
            vecs.append(v)
    print("done ({} total rejects)".format(n_rejects))

    m = np.vstack(vecs)
    return m.T if trans else m 
```

这适用于例如具有任何等级的 10x10 二进制矩阵，但不适用于 0-4 矩阵或更大的具有较低等级的二进制矩阵。（例如，获得一个 20x20 的 15 级二进制矩阵需要 42,000 次拒绝；使用 20x20 的 10 级，需要 120 万次。）

这显然是因为第一`r`行所跨越的空间在我从中采样的空间的一部分中太小了，例如`{0,1}^10`，在这些情况下。

我们想要第一`r`行的跨度与一组有效值的交集。所以我们可以尝试从跨度中采样并寻找有效值，但由于跨度涉及实值系数，它永远不会找到我们有效的向量（即使我们进行归一化，例如第一个分量在有效集合中）。

也许这可以表述为一个整数规划问题，或者什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T22:01:31.433

我不确定这个解决方案会有多大用处，但您可以构建一个矩阵，让您可以在另一个矩阵上搜索解决方案，其中只有 0 和 1 作为条目。如果在二元矩阵上随机搜索，相当于随机修改最终矩阵的元素，但有可能想出一些规则比随机搜索做得更好。

如果要在元素集**E**`m`上生成一个逐矩阵，其中元素为 e [i] , ，则从逐矩阵*A*开始：`n`**[`0<=i<k``m``k*m`]**

 ***![生成矩阵](../Images/d0f506b85b940259b242c3382cc4c7b6.png)

显然，这个矩阵的秩为*m*。现在，您可以构造另一个矩阵 B，它在某些位置具有 1，以从集合**E**中选择元素。这个矩阵的结构是：

![选择矩阵](../Images/6514bb22e222840de19145050332271a.png)

每个**B [i]**都是一个`k`矩阵`n`。因此，**A** ***B**的大小是`m`-by-`n`并且*rank( **A*** **B** )*是*min(m, rank( **B** ))*。如果我们希望输出矩阵仅包含我们的集合**E中的元素，则****B [i]**的每一列必须恰好有一个元素设置为`1`，其余的设置为`0`。

如果要在 B 上随机搜索某个排名，则需要从具有最大排名的有效**B**开始，并将随机**B** **[i]***的随机列j*旋转随机量。这相当于将**A** * **B**的第*i*行第*j*列更改为我们集合中的一个随机元素，因此它不是一个非常有用的方法。

 ******但是，您可以对矩阵进行某些技巧。例如，如果为 2，并且**B** **[0]**和**B** **[1]**`k`的第一行没有重叠，则可以通过将这两个子矩阵的第一行相加来生成线性相关行。第二行也将线性依赖于这两个矩阵的行。我不确定这是否会轻易推广到大于 2，但我相信您可以使用其他技巧。`k`

例如，生成最多秩`k`（何时`m`为`k+1`）的一种简单方法是获取随机有效的**B [0]**，继续旋转该矩阵的所有行以得到**B [1]**到**B [m-2]** **，设置B [m-1]**的第一行全部为 1，其余行全部为 0。排名不能小于`k`（假设`n`> `k`），因为`B_0`列正好有 1 个非零元素。矩阵的其余行都是这些行的线性组合（实际上是几乎所有子矩阵的精确副本）。最后一个子矩阵的第一行是第一个子矩阵所有行的总和，其余行全为零。对于较大的值`m`**，您可以使用B [0]**行的排列而不是简单的旋转。

一旦你生成了一个满足秩约束的矩阵，你就可以通过随机打乱它的行和列来生成其他矩阵。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-14T00:29:17.307

我的朋友，上面评论的丹尼尔约翰逊，想出了一个主意，但我看到他从未发布过。它不是很充实，但你可能能够适应它。

> 如果`A`是 m×r 并且`B`是 r×n 并且两者都具有秩 r，则`AB`具有秩 r。现在，我们只需要选择仅在给定集合中具有值的`A`和。最简单的情况是。`B``AB``S = {0,1,2,...,j}`
> 
> 一种选择是`A`使用适当的行/列总和来制作二进制，以保证正确的排名，`B`并且列总和不超过`j`（以便产品中的每个项都在 中`S`）并且选择行总和以导致排名`r`（或至少鼓励它作为拒绝可以使用）。
> 
> 我只是认为我们可以提出两个独立的采样方案`A`，`B`这比尝试一次攻击整个矩阵更简单、更快捷。不幸的是，我所有的矩阵采样代码都在另一台计算机上。我知道它很容易概括为允许比`{0,1}`(ie `S`) 更大的集合中的条目，但我不记得计算是如何缩放的`m*n`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-03-29T06:58:45.907

像这样怎么样？

```
rank = 30
n1 = 100; n2 = 100
from sklearn.decomposition import NMF
model = NMF(n_components=rank, init='random', random_state=0)
U = model.fit_transform(np.random.randint(1, 5, size=(n1, n2)))
V = model.components_
M = np.around(U) @ np.around(V) 
```*********

# ios - 重叠视图中的 ios 手势识别器

> ID：10132586
> 
> 赞同：0
> 
> 时间：2012-04-12T22:07:33.160
> 
> 标签：ios

您好我有一个包含 2 个子视图的 UIView。一个是自定义 UIView，另一个是 MPMoviePlayerController。我假设 MPMoviePlayerController 有一个 UITapGestureRecognizer，当您点击它时会显示控件。我的自定义 UIView 有一个 UIPanGestureRecognizer。两个视图在其父视图中占据相同的坐标空间。我的自定义 UIView 位于 MPMoviePlayerController 之上。我的问题是点击事件没有传递到 MPMoviePlayerController。

我想要的是当识别到拖动或平移事件时，不要将任何手势或触摸信息传递给 MPMoviePlayerController。但是，如果无法识别拖动事件，例如当用户只是点击屏幕时，那么我希望将点击事件传递给 MPMoviePlayerController。

谢谢。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-12T22:13:08.373

也可以将已识别的 Tap 添加到您自己的屏幕上。所以你会有两个识别器。如果点击识别器激活您的选择器，请尝试告诉电影播放器​​控制此信息。我想它的分接选择器已经公开了。

# xml - 有没有办法将字符串评估为 xslt 上的操作？

> ID：10132590
> 
> 赞同：0
> 
> 时间：2012-04-12T22:07:50.437
> 
> 标签：xml, string, xslt

我想将字符串变量的内容评估为操作。

我的变量是这个字符串：1+1+0

我想进行操作并获得值 2。

在此先感谢，古斯塔沃

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T16:56:11.367

XSLT 1.0 或 XSLT 2.0 中没有通用机制来评估作为字符串值提供的 XPath 表达式。许多产品都有一个扩展来做到这一点（参见例如 saxon:evaluate()）。XSLT 3.0 中引入了一种通用机制：xsl:evaluate 指令。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T23:12:22.590

在 XSLT 2.0 中，这可以通过使用`tokenize()`,`number()`和`sum()`函数来完成，例如下面的。请注意，我在`+`标志周围包含了可能的空格。

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="xml" version="1.0" encoding="UTF-8" indent="yes"/>

    <xsl:variable name="test1">1+1+0</xsl:variable>
    <xsl:variable name="test2"> 3 + 
    5   +           12 </xsl:variable>

    <xsl:template match="/">
        <xsl:variable name="testSplit1" select="tokenize($test1,'\s*\+\s*')"/>
        <xsl:variable name="testSplitNum1">
            <xsl:for-each select="$testSplit1">
                <item><xsl:value-of select="number(.)"/></item>
            </xsl:for-each>
        </xsl:variable>

        <xsl:variable name="testSplit2" select="tokenize($test2,'\s*\+\s*')"/>
        <xsl:variable name="testSplitNum2">
            <xsl:for-each select="$testSplit2">
                <item><xsl:value-of select="number(.)"/></item>
            </xsl:for-each>
        </xsl:variable>

        <root>
            <items1><xsl:copy-of select="$testSplitNum1"/></items1>
            <sum1><xsl:value-of select="sum($testSplitNum1/item)"/></sum1>
            <items2><xsl:copy-of select="$testSplitNum2"/></items2>
            <sum2><xsl:value-of select="sum($testSplitNum2/item)"/></sum2>
        </root>

    </xsl:template>

</xsl:stylesheet> 
```

结果（带有虚拟输入文件）是

```
<?xml version="1.0" encoding="UTF-8"?>
<root>
    <items1>
        <item>1</item>
        <item>1</item>
        <item>0</item>
    </items1>
    <sum1>2</sum1>
    <items2>
        <item>3</item>
        <item>5</item>
        <item>12</item>
    </items2>
    <sum2>20</sum2>
</root> 
```

# php - 如果单选值为 ==1 则请求 ajax

> ID：10132597
> 
> 赞同：0
> 
> 时间：2012-04-12T22:08:28.300
> 
> 标签：php, javascript, html, ajax

我有一个正在创建的注册表单。在我的 html 文件中，我有两个单选框，

```
<input type="radio" name="whatever" value="0" id="whatever" checked//> No
<input type="radio" name="whatever" value="1" id="whatever"> Yes 
```

如果值为 1，它应该使用 ajax 发送电子邮件，这就是我所拥有的，

```
if($("input[name='whatever']").val()=='2'){
    $.ajax({
        type: 'POST',
        url: base + 'email',  
        data: vData,
            success: function() {  
              // alert( "I'm the callback")
          } 
    });
} 
```

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T22:17:45.283

首先修复你的标记，这样你就没有重复的 id：

```
<input type="radio" name="whatever" value="0" checked="checked" /> No
<input type="radio" name="whatever" value="1" /> Yes 
```

然后您可以使用[`:checked`](http://api.jquery.com/checked-selector/)选择器来检测当前选定单选按钮的值：

```
if($(':radio[name="whatever"]:checked').val() == '1') {
    // the Yes radio button was checked =>
    // you could do your AJAX request here ...
} 
```

或为您的单选按钮提供唯一 ID：

```
<input id="no" type="radio" name="whatever" value="0" checked="checked" /> No
<input id="yes" type="radio" name="whatever" value="1" /> Yes 
```

进而：

```
if($('#yes').is(':checked')) {
    // the Yes radio button was checked =>
    // you could do your AJAX request here ...
} 
```

# cocos2d-iphone - Cocos2D：CCLabelTTF 不会保留结尾空格。

> ID：10132605
> 
> 赞同：0
> 
> 时间：2012-04-12T22:09:21.810
> 
> 标签：cocos2d-iphone, whitespace, spaces, preserve

我需要在字符串末尾有一个 CCLabelTTF 打印空格，但它们不会。我可以记录字符串并通过突出显示日志清楚地看到末尾的空格被保留。

我尝试附加一个十进制 ascii 不间断空格，但它显示为不同的字符。我使用的字体是 Monaco。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T23:14:18.113

我想到了。而不是附加 @" " 我像这样附加了 unicode 值 U+00A0：

labelPieceObj = [labelPieceObj stringByAppendingString:@"\u00A0"];

# ios - 当您在 iOS 应用程序和服务器中都使用令牌时如何处理 Facebook 弃用的离线访问权限

> ID：10132610
> 
> 赞同：11
> 
> 时间：2012-04-12T22:09:29.407
> 
> 标签：ios, facebook, facebook-graph-api, mobile, facebook-access-token

Facebook将在 2012 年 5 月[弃用](https://developers.facebook.com/roadmap/offline-access-removal/)该`offline_access`许可，并且文档没有为我们提供有关如何处理它的足够信息。

我们有一个 iOS 应用程序和相应的服务，为其提供支持并与 Facebook 深度集成，以在应用程序内利用用户的朋友列表（因此，如果您的 FB 朋友也在使用该应用程序，您可以更轻松地建立联系）。这就像所有社交应用程序的工作方式一样，所以这里没什么特别的。

## **客户**

我们的应用程序使用[Facebook iOS SDK](https://github.com/facebook/facebook-ios-sdk)来允许用户登录，这是我们目前要求的`offline_access`。令牌保留在我们的 iOS 应用程序中，但也会发送到保存它的服务器。客户端代表用户向用户的新闻源发布更新（我们也请求`publish_stream`许可）。

## **服务器**

我们的服务器会定期检查用户的 FB 好友是否正在使用我们的应用程序。下次用户登录时，我们会以某种方式公开内容和关系以宣传该用户的朋友。服务器还代表用户定期连接到图 API 并获取用户的当前好友列表。这样我们就可以解释用户关系的变化，并将它们反映在我们的应用程序中。当用户当前未使用该应用程序时，我们会执行此操作，以便他们在下次使用该应用程序时获得最佳体验。为了实现这一点，我们的 iOS 应用程序将访问令牌发送到它使用的服务器以及我们请求的原因`offline_access`。

**注意：**如果用户明确退出我们的应用程序，我们会从客户端和服务器中删除访问令牌。

## **问题**

既然不再有我们可以使用的永久访问令牌，我正在尝试找出在利用 facebook 处理和扩展访问令牌的新预期方式的同时仍然启用我们的场景的最佳实践。不幸的是，文档并不完全有帮助。

## **问题**

**A.**当您通过最新的 Facebook iOS SDK 进行身份验证时，您获得的访问令牌的默认生命周期是多少？[这份文件](https://developers.facebook.com/roadmap/offline-access-removal/)说，一个扩展的令牌请求会给你一个持续 60 天的令牌。[另一个文档](https://developers.facebook.com/docs/authentication/)讨论了第一个访问令牌请求并提到了不同的有效性，但不清楚[，](https://developers.facebook.com/bugs/258370397568648?browse=search_4f22d5570e9499881039467)它是否讨论了具体的有效性时间：

（重点是我的）

> 当您从 Facebook 获得访问令牌时，它将立即生效，并可在 Facebook 定义的一段时间内用于对 API 的请求。这段时间过去后，访问令牌被视为已过期，用户将需要再次进行身份验证，以便您的应用程序获得新的访问令牌。**给定访问令牌的有效期取决于它的生成方式。**
> 
> 还有一些事件可能导致访问令牌在其预期到期时间之前变得无效。此类事件包括用户更改密码、应用程序刷新其 App Secret。处理不同的访问令牌到期时间，以及处理访问令牌在其预期到期时间之前失效的情况对于构建强大的社交体验至关重要。

**B.**对于客户来说，既然访问令牌不一定是长期存在的，那么我们的正确方法是：

让我们通过 FB 使用登录，然后检测访问令牌何时过期。如果是，那么调用FB iOS SDK重新认证/重新授权？（这应该只会触发用户跳出到 FB iOS 应用程序，并且在大多数情况下会立即使用新的访问令牌返回我们的应用程序）。

**C.**根据我发现的[这篇博文](http://dominicminicoopers.blogspot.com/2012/03/facebook-access-tokens-and-offline.html)，您只能扩展一次访问令牌：

> **我可以将我的 60 天访问令牌换成新的 60 天访问令牌吗？**
> 
> 不，对不起，你不能。您只能将有效（即当前）用户访问令牌交换为扩展令牌。您不能扩展已扩展的访问令牌。

在客户端，我可以通过提示重新认证/重新授权来处理这个问题，正如我在问题 B 中提到的那样。但是，这在我们的服务器上不起作用。我们当然可以让服务器将它更新一次到 60 天，但是在第 61 天会发生什么？服务器只是停止能够同步朋友的列表？

**D.**每次应用程序启动或从睡眠状态恢复时检查 FB 访问令牌的有效性似乎是有意义的。我们的 iOS 应用程序检查这一点的最佳方法是什么？是否有推荐的端点来调用以验证令牌？我们是否应该调用`https://graph.facebook.com/me`传递访问令牌并检查响应？

注意：我们当然可以记录`expires`我们获得初始扩展令牌的时间，但这并不可靠，因为用户可以随时撤销我们应用程序的权限，这使得`expires`时间成为不可靠的有效性数据点

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-15T00:15:03.330

**概述**

我相信 facebook 试图实现的根本目的是防止应用程序永久永久访问用户帐户。因此，在新的迁移中，除非用户再次登录，否则应用只能访问一个帐户 60 天。

我不为 facebook 工作，但这是我在玩 facebook graph api 时的发现。

**通用解决方案**

1.  每当用户登录时，获取他们的访问令牌并立即扩展/刷新它并保存它
2.  记录访问令牌的到期日期
3.  当访问令牌过期时（从记录日期或图形 API 异常告诉您），然后通知用户您没有访问权限，并要求他们再次登录。

**答案**

> A. 当您通过最新的 Facebook iOS SDK 进行身份验证时，您获得的访问令牌的默认生命周期是多少？这份文件说，一个扩展的令牌请求会给你一个持续 60 天的令牌。另一个文档讨论了第一个访问令牌请求并提到了不同的有效性，但不清楚，它是否讨论了具体的有效性时间：

以下是它的工作原理：

1.  首次登录为您提供大约两个小时的时间
2.  通过刷新访问令牌，您最多可以获得 60 天
3.  如果用户在这 60 天内未登录，则在不让他们登录的情况下无法获得更长时间的访问权限。
4.  如果用户取消对您的应用程序的授权，则 60 天的窗口会立即结束，您将无法再访问。

> B. 对于客户端，既然访问令牌不一定是长期存在的，那么我们的正确做法是：让我们通过 FB 登录，然后检测访问令牌何时过期。如果是，那么调用FB iOS SDK重新认证/重新授权？（这应该只会触发用户跳出到 FB iOS 应用程序，并且在大多数情况下会立即使用新的访问令牌返回我们的应用程序）。

如果用户访问令牌已过期，您唯一的选择是让他们像您所说的那样通过登录循环。

> C. 根据我发现的这篇博文，您只能扩展一次访问令牌。在客户端，我可以通过提示重新认证/重新授权来处理这个问题，正如我在问题 B 中提到的那样。但是，这在我们的服务器上不起作用。我们当然可以让服务器将它更新一次到 60 天，但是在第 61 天会发生什么？服务器只是停止能够同步朋友的列表？

您只能扩展一次访问令牌。第 61 天，你运气不好。最好通知用户并让他们知道，除非他们登录，否则您将无法执行任何操作。

> D. 每次应用程序启动或从睡眠状态恢复时检查 FB 访问令牌的有效性似乎是有意义的。我们的 iOS 应用程序检查这一点的最佳方法是什么？是否有推荐的端点来调用以验证令牌？我们是否应该调用[https://graph.facebook.com/me](https://graph.facebook.com/me)传递访问令牌并检查响应？

我找不到与[Debug Console](https://developers.facebook.com/tools/debug)等效的 API 。[这篇 FB 博客文章](http://developers.facebook.com/blog/post/2011/05/13/how-to--handle-expired-access-tokens/)讨论了无效的访问令牌，但没有提及任何专门用于测试 API 的 API 方法。

我你的击球建议`https://graph.facebook.com/me` ~~会很好~~，这正是他们在[他们的例子](http://developers.facebook.com/blog/post/2011/05/13/how-to--handle-expired-access-tokens/)中推荐的。事实上，我可能会在我的应用程序中使用这种方法作为检查访问令牌的主动方式。

**花絮**

*   当您“刷新”访问令牌时，将返回一个新的访问令牌。响应如下所示：`access_token=TOKEN&expires=5183912`
*   您只能“刷新”一次访问令牌。如果您尝试“刷新”从先前调用返回的长期存在的令牌，它将返回相同的令牌，但除非令牌已过期，否则不会引发异常。（换句话说，您可以安全地尝试刷新您的令牌）
*   默认访问令牌长度似乎约为 2 小时
*   如果您“刷新”访问令牌，则新的访问令牌似乎是您之后将从 facebook API 获得的访问令牌（而不是返回原始的、短暂的访问令牌）

此外，如果您想尝试一下，这些工具可以让您轻松地在浏览器中测试您的用例，然后再将其埋入您的代码中：

*   [Graph API Explorer](https://developers.facebook.com/tools/explorer) - 用于创建和获取访问令牌
*   [调试控制台](https://developers.facebook.com/tools/debug)- 用于在刷新之前/之后检查令牌的到期日期
*   [Refresh Endpoint](https://graph.facebook.com/oauth/access_token?client_id=APP_ID&client_secret=APP_SECRET&grant_type=fb_exchange_token&fb_exchange_token=ACCESS_TOKEN) - 用于手动测试扩展令牌

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T17:53:10.813

很好的答案，一个重要的补充：默认令牌持续 1 到 2 小时。您将获得用户注册的剩余时间，再加上 1 个完整小时。例如，如果用户在下午 3:45 注册，则访问令牌将在下午 5 点过期。为了安全起见，开发人员应该假设它只持续 1 小时。

# memcached - Set-up memcached on EC2 instance to listen on external IP

> ID：10132611
> 
> 赞同：0
> 
> 时间：2012-04-12T22:09:30.143
> 
> 标签：memcached

Basic question. I have memcached installed on my EC2 instance.

It has an elastic IP address of, say, 101.45.23.18, and ifconfig shows

```
eth0      Link encap:Ethernet  HWaddr 12:31:3b:0e:3a:8f  
          inet addr:10.241.13.121  Bcast:10.241.13.255  Mask:255.255.255.0
          inet6 addr: fe80::1031:3bff:fe0e:3a8f/64 Scope:Link
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:2654 errors:0 dropped:0 overruns:0 frame:0
          TX packets:1717 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000 
          RX bytes:1806365 (1.8 MB)  TX bytes:206184 (206.1 KB)
          Interrupt:26 

lo        Link encap:Local Loopback  
          inet addr:127.0.0.1  Mask:255.0.0.0
          inet6 addr: ::1/128 Scope:Host
          UP LOOPBACK RUNNING  MTU:16436  Metric:1
          RX packets:0 errors:0 dropped:0 overruns:0 frame:0
          TX packets:0 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:0 
          RX bytes:0 (0.0 B)  TX bytes:0 (0.0 B) 
```

How do I start memcached to listen on the external IP address rather than the internal one?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T08:12:59.437

Solved it. Supereasy - you can't bind directly to the elastic IP address, but you can bind to 0.0.0.0 which solves the problem.

# ruby-on-rails - rails，用户在编辑个人资料后退出？

> ID：10132612
> 
> 赞同：1
> 
> 时间：2012-04-12T22:09:31.847
> 
> 标签：ruby-on-rails, devise, helper

我想知道为什么用户在编辑他们的个人资料后总是退出？我的更新功能是

```
 def update
    flash[:notice] = "what is params[id]", params[:id]
    @user = User.find(params[:id])
    if @user.update_attributes(params[:user])
      #flash[:success] = "Profile updated"
      sign_in @user
      redirect_to @user
    else
      render 'edit'
    end
  end 
```

正在`params id`正确传递，并且我的数据库上的所有内容都正确更新。我的表格`users/edit.html.erb`是

```
<% provide(:title, "Edit user") %> 
<h1>Update your profile</h1>

<div class="row">
  <div class="span6 offset3">

      <%= form_for @user, :html => {:multipart => true} do |f| %>
      <%= render 'fields', object: f.object, f: f %>

      <%= f.submit "Save changes", :class => "btn btn-large btn-primary", :style =>"display:block;" %>

      <%= image_tag(@user.image_url(:thumb), :class => "image_avatar") if @user.image? %>

      <%= f.file_field :image, :class=>"upload_button" %>
      <% end %>

  </div>
</div> 
```

我正在使用`devise gem`，但此编辑未使用设计路线（我正在使用设计进行注册）。那会影响它吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-18T16:02:48.917

我也遇到了这个奇怪的问题，就我而言，这是由于保存用户时重新生成了密码。即使配置文件表单中不存在密码字段，也会发生这种情况。重置是通过 ActiveRecord 回调发生的，该回调为具有 facebook 身份验证的用户分配了一个随机密码。我通过确保我永远不会为已经设置了 encrypted_pa​​ssword 的用户分配随机密码来修复它。

设计通过warden gem 将用户存储在会话中，存储的内容类似于[[user_id], encrypted_pa​​ssword]（在会话中['warden.user.user.key']）。当密码更改时，会话中的看守用户查找将失败 - 因为加密的密码不再匹配 - 因此用户将被注销。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T22:12:15.730

是的，[devise](http://rubydoc.info/github/plataformatec/devise/master/Devise/Controllers/Helpers#sign_in-instance_method)有一个 sign_in方法。

但是，您的用户不应在编辑其个人资料后退出。

# google-maps - 谷歌地图标记和煎茶触摸 2

> ID：10132625
> 
> 赞同：3
> 
> 时间：2012-04-12T22:11:10.093
> 
> 标签：google-maps, sencha-touch-2

我有一个使用谷歌地图的 Sencha Touch 2 应用程序。该地图将显示从带有商店的 JSON 文件加载的几个标记的位置。我的问题是，如何从我的商店中读取标记？如何使用商店中的数据生成标记？

这就是我所拥有的并且它正在工作，因为我有一个内联数组“邻居”：

地图：

```
Ext.define('MyApp.view.detalleMapa', {
    extend: 'Ext.Map',
    alias: 'widget.detallemapa',

    config: {
        listeners: [
            {
                fn: 'onMapMaprender',
                event: 'maprender'
            }
        ]
    },

    onMapMaprender: function(map, gmap, options) {

        var neighborhoods = [
        new google.maps.LatLng(52.511467, 13.447179),
        new google.maps.LatLng(52.549061, 13.422975),
        new google.maps.LatLng(52.497622, 13.396110),
        new google.maps.LatLng(52.517683, 13.394393)
        ];

        for (var i = 0; i < neighborhoods.length; i++) {
            var m = neighborhoods[i];

            new google.maps.Marker({
                position: m,
                map: gmap,
                draggable: false,
                animation: google.maps.Animation.DROP
            });
        }
    }

}); 
```

商店：

```
Ext.define('MyApp.store.itemsStore', {
    extend: 'Ext.data.Store',
    alias: 'store.itemsstore',
    requires: [
        'MyApp.model.modelo'
    ],

    config: {
        autoLoad: true,
        model: 'MyApp.model.modelo',
        storeId: 'itemsStoreId',
        proxy: {
            type: 'ajax',
            url: '/markersJsonFormat.json',
            reader: {
                type: 'json',
                rootProperty: ''
            }
        }
    }
}); 
```

到目前为止一切正常，因为我在地图类中使用了数组标记“neighborhoods”，但是如何使用商店从文件“markersJsonFormat.json”加载的数组？

任何想法？谢谢！:)

PD：这是我的应用程序：

```
Ext.application({
    requires: [
        'MyApp.view.override.detalleMapa'
    ],

    models: [
        'modelo'
    ],
    stores: [
        'itemsStore'
    ],
    views: [
        'principalTabPanel',
        'navegacionView',
        'itemsLista',
        'detalleMapa'
    ],
    name: 'MyApp',

    launch: function() {

        Ext.create('MyApp.view.detalleMapa', {fullscreen: true});
    }

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T20:56:29.290

如果有人正在寻找，这是答案：

```
onMapMaprender: function(map, gmap, options) {

    var store = Ext.getStore('itemsstore'); // Ext.getStore('StoreId')
    var count = store.getCount();
    //debugger;

    store.load({
        scope: this,
        callback: function(records) {
            //debugger;
            this.processTweets(records);
        }
    });
}, 
```

请小心，因为这将再次加载 URL 源并在您已加载的情况下刷新商店内容。

# vb.net - 计算坐标点之间的最小距离

> ID：10132626
> 
> 赞同：1
> 
> 时间：2012-04-12T22:11:15.573
> 
> 标签：vb.net, vbscript

我在构建 VBcode 以获得一组坐标点之间的最小距离时遇到问题。我实际上正在尝试的是找到一组坐标点`(A(x1,y1),Bx2,y2),C(x3,y3),D(x4,y4),E(x5,y5))`相对于另一组坐标点的最小距离`(i(x1,y1),j(x2,y2),k(x3,y3),l(x4,y4),m(x5,y5))`。我希望你能理解我试图解释的内容。

有人可以帮帮我吗？

* * *

```
Public Function DoSearch(ByVal SearchCritera As Bracket, ByVal ListToSearchFrom As System.Collections.Generic.List(Of TRacksDefinitions.Racks.Bracket)) As System.Collections.Generic.List(Of TRacksDefinitions.Search.SearchBracket) Implements TRacksDefinitions.Search.ISearch.DoSearch

        _results.Clear()
        For Each b As Bracket In ListToSearchFrom
            'LAST POINT DISTANCE., WT DIST, number of points, similarity of points (-1 if not used),
            Dim dist() As Double = {0, 0, 0, 0, 0}
            Dim dx As Double = b.RearPoints(b.RearPoints.Length - 2).X - SearchCritera.RearPoints(SearchCritera.RearPoints.Length - 2).X
            Dim dy As Double = b.RearPoints(b.RearPoints.Length - 2).Y - SearchCritera.RearPoints(SearchCritera.RearPoints.Length - 2).Y
            Dim dz As Double = b.RearPoints(b.RearPoints.Length - 2).Z - SearchCritera.RearPoints(SearchCritera.RearPoints.Length - 2).Z

            dist(0) += Math.Sqrt(dx ^ 2 + dy ^ 2 + dz ^ 2)
            dist(1) += Math.Abs(SearchCritera.Wallthickness - b.Wallthickness)
            dist(2) += Math.Abs(SearchCritera.RearPoints.Count - b.RearPoints.Count)
            If SearchCritera.RearPoints.Count = b.RearPoints.Count Then
                Dim d1, d2 As Decimal

                ' Dim sum As Double = 0
                For i As Integer = 0 To b.RearPoints.Count - 1
                    d1 = Math.Abs(SearchCritera.RearPoints(i).X - b.RearPoints(i).X)
                    d2 = Math.Abs(SearchCritera.RearPoints(i).Y - b.RearPoints(i).Y)

                  ?????????????????

                Next
            Else
                dist(3) = -1
            End If 
```

@LarsTech 以上是我到目前为止创建的代码，下一步是计算最小距离标准。

搜索标准：后点是我们从solidworks 中获得的，b.rearpoints 是数据库中存在的点，我们比较两者，找到与数据库中的点非常相似的点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T23:01:50.410

你需要一个距离公式：

```
Public Function GetDistance(ByVal startPoint As Point, ByVal endPoint As Point) As Integer
  Return Math.Sqrt((Math.Abs(endPoint.X - startPoint.X) ^ 2) + _
                   (Math.Abs(endPoint.Y - startPoint.Y) ^ 2))
End Function 
```

然后，您只需要遍历所有点即可找到最小的距离：

```
Dim listOne As New List(Of Point)
listOne.Add(New Point(10, 10))
listOne.Add(New Point(20, 20))
listOne.Add(New Point(30, 30))
listOne.Add(New Point(40, 40))
listOne.Add(New Point(50, 50))

Dim listTwo As New List(Of Point)
listTwo.Add(New Point(50, 10))
listTwo.Add(New Point(50, 20))
listTwo.Add(New Point(50, 30))
listTwo.Add(New Point(50, 40))
'listTwo.Add(New Point(50, 50))

Dim minDistance As Nullable(Of Integer)
For Each p1 As Point In listOne
  For Each p2 As Point In listTwo
    Dim distance As Integer = GetDistance(p1, p2)
    If minDistance Is Nothing OrElse distance < minDistance Then
      minDistance = distance
    End If
  Next
Next

MessageBox.Show("Minimum Distance = " & minDistance.ToString) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T00:25:13.593

在二维中，根据点的分布，如果 N 超过 9，则将空间划分为 int(sqrt(N)-1)^2 大小相同的“框”可能是有意义的。如果任何盒子包含超过一百个左右的点，从人口最多的盒子中随机挑选十个左右的点，找到任何一对之间的最小距离，然后用最小距离的盒子大小或缩小的盒子大小重新分区int(sqrt(k)-1) 的一个因子，其中 k 是那个盒子的人口[如果一个盒子包含那么多点，那么在盒子大小的那个部分内必须有两个。

在最坏的情况下，该算法可能会表现不佳，因为可能存在非常密集的点，而这些点永远不会被任意选择用于距离测试，并且可能需要一段时间才能将空间细分到足以将它们分开的程度。然而，在实践中，这些点可能会在某个时候被选中，从而使集合可以快速细分。

# ios - 如何防止 sortedArrayUsingSelector 删除重复条目（ios）？

> ID：10132627
> 
> 赞同：1
> 
> 时间：2012-04-12T22:11:19.380
> 
> 标签：ios, arrays, sorting, duplicates, nsdictionary

如何使用以下方法对数组进行排序并**保留**重复项？我想要的只是对距离数组进行排序，并让 lineItems 数组以相同的顺序排序，以便我的订单项按距离排序。是否有捷径可寻？我已经尝试了许多不同的实现，但没有运气。

```
lineItems = [[NSMutableArray alloc] initWithArray:(NSMutableArray *)[data objectForKey:@"line_items"]];
distanceArray = [[NSMutableArray alloc] initWithCapacity:[lineItems count]];
        for (int i = 0; i < [lineItems count]; i++) {
            CLLocation *spotLocation = [[CLLocation alloc] initWithLatitude:[[[lineItems objectAtIndex:i] objectForKey:@"latitude"] floatValue] longitude:[[[lineItems objectAtIndex:i] objectForKey:@"longitude"] floatValue]];
            CLLocationDistance distance = ([myLocation distanceFromLocation:spotLocation] / 1000) * 0.621371192;
            NSNumber *foo = [[NSNumber alloc] initWithDouble:distance];
            [distanceArray insertObject:foo atIndex:i];
        } 
```

我的冒泡排序实现：

```
for (int i=0;i<[distanceArray count]-1;i++){
            for(int j=1;j<[distanceArray count];j++){
                if ([[distanceArray objectAtIndex:i]doubleValue] >[[distanceArray objectAtIndex:j]doubleValue]){
                    NSNumber *temp_i = [[NSNumber alloc] initWithDouble:[[distanceArray objectAtIndex:i]doubleValue]];
                    NSNumber *temp_j = [[NSNumber alloc] initWithDouble:[[distanceArray objectAtIndex:j]doubleValue]];
                    [distanceArray removeObjectAtIndex:i];
                    [distanceArray removeObjectAtIndex:j];
                    [distanceArray insertObject:temp_j atIndex:i];
                    [distanceArray insertObject:temp_i atIndex:j];

                    NSDictionary *tempObj_i = [[NSDictionary alloc] initWithDictionary:[lineItems objectAtIndex:i]];
                    NSDictionary *tempObj_j = [[NSDictionary alloc] initWithDictionary:[lineItems objectAtIndex:j]];
                    [lineItems removeObjectAtIndex:i];
                    [lineItems removeObjectAtIndex:j];
                    [lineItems insertObject:tempObj_j atIndex:i];
                    [lineItems insertObject:tempObj_i atIndex:j];
                }
            }
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T00:56:19.627

你的问题不是`-sortedArrayUsingSelector:`，`NSDictionary`是`-allKeys`方法。键在字典中是唯一的，因此`-allKeys`数组不会有任何重复。

使用单独的`NSArray`实例来存储排序的结果，或者使用 inafziger 的建议。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T00:30:46.553

而不是使用你的排序功能，试试这个：

```
[distanceArray sortArrayUsingSelector:@selector(compare:)]; 
```

那么你根本不需要字典。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T00:22:06.310

为什么不做一个老式的冒泡排序呢？

像这样的东西：

```
distanceArray=[NSMutableArray arrayWithOjects:[ distanceArray allKeys]];
for (int i=0;i<[distanceArray count]-1;i++){
    for(int j=1;j<[distanceArray count];j++){
        if ([[distanceArray objectAtIndex:i]floatValue] >[[distanceArray objectAtIndex:j]floatValue]){
            id temp=[[distanceArray objectAtIndex:i]floatValue];
            [distanceArray insertObject:[[distanceArray objectAtIndex:j]floatValue] atIndex:i];
            [distanceArray insertObject:temp atIndex:j];
        }
    }
} 
```

并且它们都用重复排序（它不漂亮但它有效）

编辑：

如果没有任何效果..用类似的东西制作一个客观的c对象：coord1，coord2，距离，也许还有一个唯一的id ..所以你永远不会有重复的项目。将它们声明为该对象的属性，然后对它们进行冒泡排序（可能也更改 id-s）。就像您有一个 id=2 的对象并将其移动到索引 1 上的数组中，然后更改 id 以匹配索引...或类似的效果。那么您将不需要字典因为你有对象本身的坐标......它应该更容易做......至少在我看来

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-13T22:30:36.413

我最终只是将 lineItems 转换为可变字典数组并将距离添加到每个行项中。然后使用 sortUsingDescriptor 方法。我感谢大家的帮助！如此简单的事情对我来说太难了……谢谢：

```
for (int i = 0; i < [lineItems count]; i++) {
            CLLocation *spotLocation = [[CLLocation alloc] initWithLatitude:[[[lineItems objectAtIndex:i] objectForKey:@"latitude"] floatValue] longitude:[[[lineItems objectAtIndex:i] objectForKey:@"longitude"] floatValue]];
            CLLocationDistance distance = ([myLocation distanceFromLocation:spotLocation] / 1000) * 0.621371192;
            NSNumber *foo = [[NSNumber alloc] initWithDouble:distance];

            NSMutableDictionary *newLineItem = [[lineItems objectAtIndex:i] mutableCopy];
            [newLineItem setObject:foo forKey:@"distance"];
            [lineItems removeObjectAtIndex:i];
            [lineItems insertObject:newLineItem atIndex:i];
            newLineItem = nil;
        }
        [lineItems sortUsingDescriptors:[NSArray arrayWithObject:[[NSSortDescriptor alloc] initWithKey:@"distance" ascending:YES]]]; 
```

# python - 在命令行上完成 VLC 时的回调

> ID：10132632
> 
> 赞同：0
> 
> 时间：2012-04-12T22:12:00.877
> 
> 标签：python, command-line, vlc

我需要让 VLC 下载然后播放歌曲。我打算使用`os.popen`向 VLC 命令行发出命令（我在让 python 绑定工作时遇到了一些问题......）。我的问题是，当 VLC 下载完成后我可以得到任何回调，以便我知道开始流式传输吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T10:06:22.647

`vlc://quit`在任何操作附加到您的命令行后关闭 VLC

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T22:57:59.850

您可能最好自己下载，但如果您真的想这样做，您可以将[http://stromberg.dnsalias.org/~strombrg/notify-when-up2.html](http://stromberg.dnsalias.org/~strombrg/notify-when-up2.html)与像这样的嗅探器结合使用tshark 或 tcpdump。

或者...您可以修改 vlc。^_^

# php - 一种全局化mysql函数避免sql注入的方法

> ID：10132635
> 
> 赞同：0
> 
> 时间：2012-04-12T22:12:13.293
> 
> 标签：php, mysql, sql, sql-injection

请记住，我还在学习。我在一个网站上工作，我只是从现有的代码中调整和复制大部分代码，因为这是我理解它们的最简单方法。

我不断收到由使用撇号引起的 sql 错误，我已经开始输入`mysql_real_escape_string()`for each 文本字段，这解决了各个问题。

现在这真的只是我在寻求帮助。请不要讽刺，我真的只是想学习，这是提问的最佳场所，所以在这里：

有什么方法可以修复一般设置来过滤掉干扰的撇号吗？基本上任何可以帮助网站防止sql注入的东西？任何帮助将不胜感激 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T22:15:40.160

通用解决方案：所有参数（值）都应通过prepared statement placeholders传递

[http://nz.php.net/manual/en/pdo.prepare.php](http://nz.php.net/manual/en/pdo.prepare.php)

[http://nz.php.net/manual/en/mysqli.prepare.php](http://nz.php.net/manual/en/mysqli.prepare.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T11:15:01.687

> 有什么方法可以修复一般设置来过滤掉干扰的撇号吗？

## 绝对没有。

很久以前有一个，但现在它被诽谤、弃用和逐出教会（因为它从来没有按预期工作并且没有达到它的目的）。

您面临的问题来自 SQL 查询是一个*程序这一事实。* 因此，您必须遵循创建此程序的语法规则，就像使用任何其他程序语言一样。如果你碰巧创建了一个 PHP 程序，你也必须注意那些烦人的撇号——你不能把它放在代码中随机的地方，但每个地方都必须有严格的语法含义，或者——如果是撇号作为数据的一部分 - 它必须正确*转义*。

所以，这只是语法问题。
解决问题的最佳方法是将代码与数据分离。
原生准备好的语句为您提供了这种可能性。
您可以创建一个程序 - 查询本身 - 并最终将一些变量绑定到它，因此，程序代码和日期分别发送到 SQL 服务器。
这就是为什么准备好的语句被认为是创建动态 SQL 查询的最佳方式。

但当然，您必须明确地将每个变量绑定到它的查询 - 因此，没有通用的方法。

但是，您可以使用一些助手来自动进行绑定，因此，代码变得简洁

```
$db->run("SELECT * FROM table WHERE id=?",$id); 
```

这将是一个简短的书面和同时完全安全的。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-12T22:14:41.090

使用为您执行此操作的数据访问层是比手动保护每个查询参数更好的方法。不仅因为它很乏味，而且因为你最终会忘记一个关键参数。

当我还在使用 PHP 时，我使用[了 SafeSQL——](http://www.phpinsider.com/php/code/SafeSQL/)它非常轻巧且不引人注目……但是如果您是初学者，插入它可能仍然是一项艰巨的任务。

# java - Netty 中的 Channel.channelInterestChanged

> ID：10132637
> 
> 赞同：2
> 
> 时间：2012-04-12T22:12:15.467
> 
> 标签：java, netty

我正在使用 Netty Channels，当通过通道发送大量数据时，我注意到该`Channel.channelInterestChanged`事件被触发，这立即导致`Channel.isWritable()`返回 false。（有另一个线程在执行 a`Channel.write()`并且该线程立即失败）。我的问题是：为什么频道的兴趣会发生变化？或者更确切地说，是谁在改变它？我编写的代码（服务器或客户端）中的任何内容都不会改变兴趣。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T06:00:32.387

它会发生变化，因为您将更多数据写入通道，然后它可以在给定时间内传输。Netty 为您排队数据，直到达到某个阈值，一旦达到，Channel.isWritable() 将返回 false。

如果您想在 Channel.isWritable() 返回 false 之前更改允许排队/缓冲的字节数，则必须调整 writeBufferHighWaterMark 和 writeBufferLowWaterMark。

```
ServerBootstrap sb = ....
sb.setOption("writeBufferHighWaterMark", ..);
sb.setOption("writeBufferLowWaterMark", ..); 
```

无论如何，您应该确保调用 Channel.write(...) 的代码确实检查 Channel.isWritable() 并且只有在它返回 true 时才写入。您遇到的问题经常出现在慢速网络中。

[1] [http://netty.io/docs/stable/api/org/jboss/netty/channel/socket/nio/NioChannelConfig.html](http://netty.io/docs/stable/api/org/jboss/netty/channel/socket/nio/NioChannelConfig.html)

# php - PHP 使应用程序与其他语言字符兼容

> ID：10132639
> 
> 赞同：0
> 
> 时间：2012-04-12T22:12:20.003
> 
> 标签：php, internationalization

我在 PHP 中创建了一个小型联系表单创建器，一切正常，但我在丹麦的朋友说表单不能正确显示丹麦字符，并且在使用丹麦字符时不会提交。我从来没有使用过国际化，PHP 手册对我一点帮助也没有。

如何使我的 PHP 应用程序与其他语言字符兼容。我使用 PHP 5.3.x，我的文件是用没有 bom 的 utf-8 创建的，我的页面和数据库中的所有内容都是 utf-8。有没有可以推荐给初学者看的文章？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T22:17:23.960

1.在您的页面上添加元字符集

2.`Content-Type:text/html; charset=utf-8`在标题中服务

3.对mysql使用set names，见[SET NAMES utf8 in MySQL?](https://stackoverflow.com/questions/2159434/set-names-utf8-in-mysql)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T22:34:38.727

似乎您拥有所需的一切，但显然有些小事情可能是您认为已经到位的事情之一。

无论如何，作为最后的手段，您可以使用 php 的 htmlspecialchars() 函数将所有字符编码为 html 实体。

# python - Timeit，NameError：未定义全局名称。但我没有使用全局变量

> ID：10132646
> 
> 赞同：10
> 
> 时间：2012-04-12T22:12:56.680
> 
> 标签：python, global-variables, nameerror, timeit

我想测量以下代码的执行速度：

```
def pe1():
    l = []
    for i in range(1000):
        if i%3 == 0 or i%5 == 0:
            l.append(i)
    print sum(l) 
```

我将此代码存储在 pe1m.py 下。现在我想用 python 解释器测试文件的速度。我做了：

```
import timeit
import pe1m

t = timeit.Timer(stmt = 'pe1m.pe1()')
t.timeit() 
```

但我得到：

```
File "<stdin>", line 1, in <module>
  File "/usr/lib/python2.7/timeit.py", line 195, in timeit
    timing = self.inner(it, self.timer)
  File "<timeit-src>", line 6, in inner
NameError: global name 'pe1m' is not defined 
```

但我没有任何全局变量。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-12T22:22:45.493

尝试这个：

```
t = timeit.Timer(stmt='pe1()', setup='from pe1m import pe1') 
```

`timeit.Timer`object 不知道您在其中调用它的名称空间，因此它无法访问`pe1m`您导入的模块。

该`setup`参数是在定时语句的上下文中执行的语句，它们共享相同的命名空间，因此无论您在那里定义什么，都可以在`stmt`.

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-02-17T08:11:13.193

你也可以试试这个

```
>>>def pe1():
>>>    l = []
>>>    for i in range(1000):
>>>        if i%3 == 0 or i%5 == 0:
>>>            l.append(i)
>>>    print(sum(l))
>>>
>>>from  timeit import time it
>>>timeit('pe1()',setup="from __main__ import pe1",number=100) # Run 100 times
>>>timeit('pe1()',setup="from __main__ import pe1")  # run default times of 1000000 
```

# .htaccess - 如何判断 Apache 是否按预期使用了我的 .htaccess？

> ID：10132650
> 
> 赞同：2
> 
> 时间：2012-04-12T22:14:18.923
> 
> 标签：.htaccess, robots.txt

我想阻止谷歌在我的网站上索引 pdf。

根据 google 的网站管理员工具的建议，我已修改我的 .htaccess 文件以包含以下几行：

```
<Files ~ "\.pdf$">   
    Header set X-Robots-Tag "noindex, nofollow" 
</Files> 
```

我知道 apache 运行正常并正在读取我的 .htaccess 文件，因为我可以完全阻止对该文件的访问，但我无法判断上述命令是否有效。

谷歌网站管理员工具声称爬虫仍然可以看到 pdf，但它们似乎仅用于 robots.txt。是否有可以用来检查元标记的第 3 方工具（用于 linux）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T23:07:22.203

您可以在某些 PDF 上使用 wget 并查看标题：

```
wget -S http://host/something.pdf 
```

# jquery - 提交后如何使用 Coffeescript 在 Rails 3 中清除远程表单？

> ID：10132653
> 
> 赞同：0
> 
> 时间：2012-04-12T22:14:24.463
> 
> 标签：jquery, ruby-on-rails, ruby, ruby-on-rails-3, coffeescript

我正在使用远程表单在 Rails 中提交评论。*不应*将用户发送到新页面，因为我正在使用此远程表单。

当我点击“提交”时，我希望它有一个淡入淡出的状态，上面写着“感谢提交”并且表格清晰。然而，我无法弄清楚如何为我的生活做到这一点。

问题在于，当我执行 $('form').submit -> 然后清除文本区域时，它会在我实际完成提交之前将其重置，所以我在 Rails 中得到一个空白提交。

我正在使用 Rails 3.2、Coffeescript 和 Jquery。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T00:23:03.230

也许您希望在提交表单时执行此操作，但是……您使用 jQuery 的绑定（或实时）方法并等待它返回成功。

```
$('#submit_button')
  .live('ajax:success', clearForm)
  .live('ajax:success', notifyUser) 
```

如果你想不管成功还是在请求的任何阶段都这样做，请检查其他可用的 ajax 回调“beforeSend”、“完成”、“错误”等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T07:19:28.073

DanS 答案的变体：

```
$('form').submit (e) ->
  e.preventDefault() # prevent form submitting multiple times
  $.post(@action, $(@).serializeArray()).done -> # manually submit the form
    $(@).find('input').each -> @reset() # afterwards clear the form
  return 
```

我在 ajax 调用之后添加了 done 回调，这将强制在清除表单之前等待 ajax 完成。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T22:24:49.530

这应该有效：

```
$('form').submit (e) ->
  e.preventDefault() # prevent form submitting multiple times
  $.post @action, $(@).serializeArray() # manually submit the form
  $(@).find('input').each -> @reset() # afterwards clear the form
  return 
```

它产生以下javascript：

```
$('form').submit(function(e) {
  e.preventDefault();
  $.post(this.action, $(this).serializeArray());
  $(this).find('input').each(function() {
    return this.reset();
  });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-13T12:02:52.493

表单提交**将**加载一个新页面。如果您想让用户保持在同一页面上并仍然提交表单数据，您必须手动发送表单：

```
$('form').bind 'submit', (e) ->
    e.preventDefault() # don't send the user to a new page
    $.post this.action, $(this).serializeArray() # manually submit formdata to form url
    $(this).find(':input').each -> this.reset() # reset all fields in the form 
```

（以上我没有测试，希望没有错误）

# java - JBoss AS 7 不接受远程连接

> ID：10132657
> 
> 赞同：40
> 
> 时间：2012-04-12T22:14:46.830
> 
> 标签：java, deployment, jboss, jboss7.x

我正在使用 JBoss AS 7 并尝试使用 IP（从 Intranet 中的计算机）连接到我的应用程序。它不工作。如果我从具有服务器的计算机上进行测试，如果我通过 localhost (http://localhost:8080/MySystem....) 可以看到系统正在运行，但如果我尝试使用 IP (http://: 8080/我的系统....）。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：82
> 
> 时间：2012-04-19T14:00:34.300

答案是编辑standalone.xml并插入标签any-address而不是绑定到127.0.0.1的inet-address

```
<interfaces>
    <interface name="management">
        <inet-address value="127.0.0.1"/>
    </interface>
    <interface name="public">
       <any-ipv4-address/>
    </interface>
</interfaces> 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-05-10T16:44:37.423

我在standalone.xml 中将 127.0.0.1 (localhost) 更改为 0.0.0.0。有用。请注意安全性。

```
<interfaces>
    <interface name="management">
        <inet-address value="${jboss.bind.address.management:0.0.0.0}"/>
    </interface>
    <interface name="public">
        <inet-address value="${jboss.bind.address:0.0.0.0}"/>
    </interface>
    <!-- TODO - only show this if the jacorb subsystem is added  -->
    <interface name="unsecure">
        <!--
          ~  Used for IIOP sockets in the standard configuration.
          ~                  To secure JacORB you need to setup SSL 
          -->
        <inet-address value="${jboss.bind.address.unsecure:0.0.0.0}"/>
    </interface>
</interfaces> 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-04-12T22:18:34.743

你在配置文件中配置了IP地址吗？

在不配置 IP 地址的情况下启动 jboss 会将 jboss 的默认地址设置为适合开发或生产服务器的 localhost，其中 apache 用作 jboss 的代理并驻留在同一台机器上。

为 JBoss 设置 IP 地址：

```
To a specific IP address
run.sh -b 10.62.31.31
To localhost or the IP address assigned to the server
run.sh -b 0.0.0.0 
```

您也可以在配置文件中更改[`<interfaces>`它](https://docs.jboss.org/author/display/AS71/Interfaces+and+ports)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-23T07:11:13.280

**不要忘记防火墙！**

如果您修复了绑定地址，但仍然无法连接到 JBoss，请尝试绕过服务器的防火墙。

要停止 Linux RHEL 上的防火墙，请使用以下命令：

```
/etc/init.d/iptables stop 
```

更新：在未安装 iptables 的 RHEL7 上 - 您可以使用：

```
systemctl stop firewalld 
```

# android - 使用单选按钮在应用程序中打开/关闭声音

> ID：10132667
> 
> 赞同：0
> 
> 时间：2012-04-12T22:15:37.007
> 
> 标签：android, audio, radio-button, mute

我正在开发一款游戏，并想使用单选按钮打开和关闭声音。声音在我的应用程序的其他选项中运行。当按下声音关闭单选按钮时，它应该使声音静音，直到并且除非声音被按下。谁能帮我解决这个问题？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T22:20:17.627

尝试

```
AudioManager = (AudioManager)context.getSystemService(Context.AUDIO_SERVICE);
audioManager.setStreamMute(AudioManager.STREAM_MUSIC, true); 
```

..这应该静音默认音乐流。传入 false 以再次启用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-18T09:49:32.427

要禁用声音，请将其设置为 True。要重新启用声音，请将其设置为 false。您可以为每个按钮设置一个按钮，也可以设置一个切换按钮。

# iphone - iphone 应用程序屏幕截图的通用载体

> ID：10132673
> 
> 赞同：0
> 
> 时间：2012-04-12T22:16:06.083
> 
> 标签：iphone, objective-c

> **可能重复：**
> [Iphone App 提交：状态栏和屏幕截图](https://stackoverflow.com/questions/2803500/iphone-app-submission-status-bar-and-screenshots)

我们查看了苹果商店的一些应用程序页面，发现应用程序的屏幕截图总是说“运营商”而不是任何特定运营商的名称——可能是为了保持中立。

无论如何，这是一个问题，这是苹果对所有屏幕截图所做的事情吗？或者我必须将我的屏幕截图修改为那样。

第二个问题，如果这是苹果做的事情，我是否需要切断屏幕的顶部为它们铺平道路？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T22:20:14.850

模拟器没有载体，所以只要把模拟器截图就可以了：）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T22:20:25.073

iPhone 模拟器显示通用的“Carrier”标签。

# ios - 警告：“最小字体大小大于当前字体大小”

> ID：10132677
> 
> 赞同：10
> 
> 时间：2012-04-12T22:16:14.773
> 
> 标签：ios, objective-c, xcode, interface-builder, uilabel

在我的应用程序中，我使用了一个具有一组标签的自定义单元格，我看到 xcode 在自定义单元格 xib 文件中显示有关字体大小的警告：

> 警告消息文件：//localhost/Users/mahmoudalgayed/Desktop/Ajurry-date/CustomCell.xib：警告：不支持的配置：最小字体大小大于当前字体大小

任何人都知道如何摆脱这个警告？

[![在此处输入图像描述](../Images/bae4dabd73ecacf387fba852697e8949.png)](https://i.stack.imgur.com/6iR0Z.png)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-12T22:18:55.380

您必须设置最小字体大小，使其不大于当前大小。你有设置最小尺寸吗？

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2019-02-04T13:55:44.253

更改字体大小不起作用 - 我仍然收到错误消息。

所以我通过将 Autoshrink 的值从“最小字体大小”更改为“最小字体比例”来解决这个问题

[![在此处输入图像描述](../Images/09df44bf991132b39df11e3135d47d52.png)](https://i.stack.imgur.com/FaFQP.png)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-05-01T22:06:22.930

该错误特定于手头的问题。如果您启用了自动收缩，它有时会将最小字体大小默认为大于当前字体大小的大小。也许您将字体调整为较小的大小，结果最小字体大小现在大于实际字体。

要更正此行为，请在标有“自动收缩”的部分下将最小字体大小调整为小于当前字体大小。

或者，如果您不关心自动缩小文本以适合标签大小，则可以将“自动缩小”设置为“固定字体大小”，这也会抑制警告。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-04-24T17:17:45.430

在`UILabel`. 我通过将`minimumFontSize`属性替换为`adjustsFontSizeToFit="NO"`.

# python - 如何在不出现 MRO 错误的情况下动态添加 mixin 作为基类？

> ID：10132679
> 
> 赞同：10
> 
> 时间：2012-04-12T22:16:34.557
> 
> 标签：python, class, architecture, method-resolution-order

假设我有一堂课`A`，`B`并且`C`。

Class`A`和`B`都是 Class 的 mixin 类`C`。

```
class A( object ):
    pass
class B( object ):
    pass
class C( object, A, B ):
    pass 
```

这在实例化 C 类时不起作用。我必须`object`从 C 类中删除才能使其工作。（否则你会遇到 MRO 问题）。

> TypeError：调用元类基础时出错
> 无法
> 为基础 B、对象、A 创建一致的方法解析顺序 (MRO)

但是，我的情况有点复杂。在我的例子中，类`C`是一个*服务器*，其中`A`并且`B`将是在启动时加载的插件。这些都驻留在自己的文件夹中。

我还有一个名为`Cfactory`. 在 Cfactory 中，我有一个`__new__`方法可以创建一个功能齐全的对象 C。在该`__new__`方法中，我*搜索*插件，使用 加载它们`__import__`，然后将它们分配给`C.__bases__ += (loadedClassTypeGoesHere, )`

所以以下是一种可能性：（使其非常抽象）

```
class A( object ):
    def __init__( self ): pass
    def printA( self ):   print "A"
class B( object ):
    def __init__( self ): pass
    def printB( self ):   print "B"
class C( object ):
    def __init__( self ):  pass
class Cfactory( object ):
    def __new__( cls ):
        C.__bases__ += ( A, )
        C.__bases__ += ( B, )
        return C() 
```

这再次不起作用，并且会再次出现 MRO 错误：

> TypeError：无法
> 为基础对象 A 创建一致的方法解析顺序 (MRO)

一个简单的解决方法是`object`从`A`和中删除基类`B`。然而，这将使它们成为旧式对象，当这些插件独立运行时应该避免使用这些对象（这应该是可能的，UnitTest 明智的）

另一个简单的解决方法是从中删除`object`，`C`但这也会使其成为旧式类并且`C.__bases__`将不可用，因此我无法将额外的对象添加到`C`

什么是一个好的架构解决方案，你将如何做这样的事情？现在我可以忍受插件本身的旧式类。但我宁愿不使用它们。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-12T22:26:13.083

可以这样想——您希望 mixins 覆盖 的某些行为`object`，因此它们需要`object`在方法解析顺序中位于之前。

所以你需要改变碱基的顺序：

```
class C(A, B, object):
    pass 
```

由于[这个错误](http://bugs.python.org/issue672115)，您不需要`C`直接从 object 继承才能正确分配给`__bases__`，并且工厂实际上可能只是一个函数：

```
class FakeBase(object):
    pass

class C(FakeBase):
    pass

def c_factory():
    for base in (A, B):
        if base not in C.__bases__:
            C.__bases__ = (base,) + C.__bases__
    return C() 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-12T23:27:10.290

我不知道细节，所以也许我在这里完全偏离了基础，但似乎您使用错误的机制来实现您的设计。

首先，为什么是`Cfactory`一个类，为什么它的`__new__`方法返回其他东西的实例？这看起来像是一种奇怪的方式来实现一个很自然的功能。`Cfactory`正如您所描述的（并显示了一个简化的示例），它的行为根本不像一个类；您没有多个共享功能的实例（实际上，您似乎无法自然地构造实例）。

老实说，`C`在我看来也不太像一门课。似乎您不能创建一个以上的实例，否则您最终会得到一个不断增长的基础列表。所以这`C`基本上是一个模块而不是一个类，只有额外的样板。我尽量避免使用“单实例类来表示应用程序或某些外部系统”模式（尽管我知道它很流行，因为 Java**要求**您使用它）。但是类继承机制对于不是真正类的东西通常很方便，比如你的插件系统。

我会使用类方法`C`来查找和加载插件，由模块定义调用，`C`以便它*始终*处于良好状态。或者，您可以使用元类自动将它找到的任何插件添加到类库中。*将配置类*的机制与创建类实例的机制混在一起似乎是错误的；它与灵活的解耦设计相反。

如果在创建时*无法*加载插件，那么我会在创建实例`C`之前手动调用配置器类方法，当您可以搜索插件时。`C`

实际上，如果类不能在创建后立即进入一致状态，我可能宁愿创建动态类而不是修改现有类的基础。这样系统就不会被锁定在一次配置和一次实例化的类中；您至少对加载不同插件集的多个实例的可能性持开放态度。像这样的东西：

```
def Cfactory(*args, **kwargs):
    plugins = find_plugins()
    bases = (C,) + plugins
    cls = type('C_with_plugins', bases, {})
    return cls(*args, **kwargs) 
```

这样，您只需一次调用即可创建您的`C`实例，并为您提供正确配置的实例，但它不会对可能已经存在的任何其他假设实例产生奇怪的副作用`C`，并且它的行为不取决于它是否之前运行过。我知道您可能不需要这两个属性中的任何一个，但它的代码几乎不比简化示例中的代码多，如果不需要，为什么要打破类的概念模型？

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-09T16:48:30.380

有一个简单的解决方法：创建一个助手类，具有一个好听的名称，例如*PluginBase*。并使用它的继承，而不是对象。

这使代码更具可读性（恕我直言），并且解决了该错误。

```
class PluginBase(object): pass
class ServerBase(object): pass

class pluginA(PluginBase): "Now it is clearly a plugin class"
class pluginB(PluginBase): "Another plugin"

class Server1(ServerBase, pluginA, pluginB): "This works"
class Server2(ServerBase): pass
Server2.__base__ += (PluginA,) # This also works 
```

注意：可能你不需要*工厂*；在 C++ 中需要它，但在 Python 中几乎不需要

# json - 用于显示高级自定义字段的 JSON API - WordPress

> ID：10132685
> 
> 赞同：15
> 
> 时间：2012-04-12T22:17:17.437
> 
> 标签：json, wordpress

我正在开发一个杂志 WordPress 网站，该网站将为移动应用提供 json 提要。我使用高级自定义字段和多篇文章的重复字段和每篇文章中的多页设置后端。[http://www.advancedcustomfields.com/add-ons/repeater-field/](http://www.advancedcustomfields.com/add-ons/repeater-field/) ![中继器字段的屏幕截图](../Images/59daadf6474fe389215fe20a06577b8f.png)

我正在使用 JSON API，但这不包括我的任何自定义字段。目前有没有可以做到这一点的插件？

![这些是先前字段的自定义字段“slug 名称”](../Images/d16ebc043eed0022debe780e18680c9e.png)

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-06T08:12:15.330

@Myke：你帮了我很大的忙。这是我谦虚的补充：

```
add_filter('json_api_encode', 'json_api_encode_acf');

function json_api_encode_acf($response) 
{
    if (isset($response['posts'])) {
        foreach ($response['posts'] as $post) {
            json_api_add_acf($post); // Add specs to each post
        }
    } 
    else if (isset($response['post'])) {
        json_api_add_acf($response['post']); // Add a specs property
    }

    return $response;
}

function json_api_add_acf(&$post) 
{
    $post->acf = get_fields($post->id);
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2016-12-07T16:38:18.877

**Wordpress 4.7**更新

 **随着 Wordpress 4.7 的发布，REST 功能不再作为一个独特的插件提供，而是作为一个插件提供（不需要插件）。

以前的过滤器似乎不起作用。但是，以下代码段确实（可以在您的 中`functions.php`）：

**>= PHP 5.3**

```
add_filter('rest_prepare_post', function($response) {
    $response->data['acf'] = get_fields($response->data['id']);
    return $response;
}); 
```

**< PHP 5.3**

```
add_filter('rest_prepare_post', 'append_acf');

function append_acf($response) {
    $response->data['acf'] = get_fields($response->data['id']);
    return $response;
}; 
```

注意过滤器是一个通配符过滤器，应用如下

```
apply_filters("rest_prepare_$type", ... 
```

因此，如果您有多种内容类型（自定义），则需要执行以下操作：

```
add_filter('rest_prepare_multiple_choice', 'append_acf');
add_filter('rest_prepare_vocabularies', 'append_acf');

function append_acf($response) {
    $response->data['acf'] = get_fields($response->data['id']);
    return $response;
}; 
```

**注意**似乎是*按记录*`rest_prepare_x`调用的。因此，如果您正在 ping 索引端点，它将被多次调用（因此您不需要检查它的帖子或帖子）

 ** * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-07-27T04:44:54.527

通过搜索相同的问题来到这里。这还没有完全经过审查，但我认为这是在正确的道路上。一探究竟。

我的嵌套级别比你少一个，所以这可能需要稍微改变一下。但是 JSON API 插件有一个名为 json_api_encode 的过滤器。我有一个叫做规格的中继器，看起来像这样。

[http://d.pr/i/YMvv](http://d.pr/i/YMvv)

在我的函数文件中，我有这个。

```
add_filter('json_api_encode', 'my_encode_specs');

function my_encode_specs($response) {
  if (isset($response['posts'])) {
    foreach ($response['posts'] as $post) {
      my_add_specs($post); // Add specs to each post
    }
  } else if (isset($response['post'])) {
    my_add_specs($response['post']); // Add a specs property
  }
  return $response;
}

function my_add_specs(&$post) {
  $post->specs = get_field('specifications', $post->id);
} 
```

它将自定义值附加到 JSON API 输出。请注意，来自 ACF 的 get_field 函数在这里完美地工作，用于带回中继器值的数组。

希望这可以帮助！

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2014-10-30T16:56:19.857

现在有一个小插件可以为您添加过滤器。

[https://github.com/PanManAms/WP-JSON-API-ACF](https://github.com/PanManAms/WP-JSON-API-ACF)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-04-25T21:35:47.400

我不确定您是否仍然对解决方案感兴趣，但我能够修改 json-api 插件 models/post.php 文件以将转发器数据显示为数组。[这是对http://wordpress-problem.com/marioario-on-plugin-json-api-fixed-get-all-custom-fields-the-right-way/](http://wordpress-problem.com/marioario-on-plugin-json-api-fixed-get-all-custom-fields-the-right-way/)所做修改的修改

将 set_custom_fields_value() 函数替换为以下内容：

```
function set_custom_fields_value() {

    global $json_api;

    if ($json_api->include_value('custom_fields') && $json_api->query->custom_fields) {

        // Query string params for this query var
        $params = trim($json_api->query->custom_fields);

        // Get all custom fields if true|all|* is passed
        if ($params === "*" || $params === "true" || $params === "all") {

            $wp_custom_fields = get_post_custom($this->id);
            $this->custom_fields = new stdClass();

            // Loop through our custom fields and place on property
            foreach($wp_custom_fields as $key => $val) {
                if (get_field($key)) {
                    $this->custom_fields->$key = get_field($key);
                } else if ($val) {
                    // Some fields are stored as serialized arrays.
                    // This method does not support multidimensionals... 
                    // but didn't see anything wrong with this approach
                    $current_custom_field = @unserialize($wp_custom_fields[$key][0]);

                    if (is_array($current_custom_field)) {

                        // Loop through the unserialized array
                        foreach($current_custom_field as $sub_key => $sub_val) {

                            // Lets append these for correct JSON output
                            $this->custom_fields->$key->$sub_key = $sub_val;
                        }

                    } else {

                        // Break this value of this custom field out of its array
                        // and place it on the stack like usual
                        $this->custom_fields->$key = $wp_custom_fields[$key][0];

                    }
                }
            }
        } else {

            // Well this is the old way but with the unserialized array fix
            $params = explode(',', $params);
            $wp_custom_fields = get_post_custom($this->id);
            $this->custom_fields = new stdClass();

            foreach ($params as $key) {

                if (isset($wp_custom_fields[$key]) && $wp_custom_fields[$key][0] ) {
                    $current_custom_field = @unserialize($wp_custom_fields[$key][0]);

                    if (is_array($current_custom_field)) {
                        foreach($current_custom_field as $sub_key => $sub_val) {
                            $this->custom_fields->$key->$sub_key = $sub_val;
                        }

                    } else {
                        $this->custom_fields->$key = $wp_custom_fields[$key][0];

                    }

                }
            }
        }

    } else {
        unset($this->custom_fields);

    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-04-10T09:23:42.553

当前版本的 ACF 在调用 JSON API 时打印出一个 custom_fields 对象，其中包含与帖子或页面相关的所有字段。我编辑了@Myke 版本，将 ACF 选项页面中的特定自定义字段添加到每个帖子或页面。不幸的是，整个选项页面没有 get_fields() 功能，因此您必须根据您的字段结构对其进行编辑。

```
add_filter('json_api_encode', 'json_api_encode_acf');

function json_api_encode_acf($response) {
    if (isset($response['posts'])) {
        foreach ($response['posts'] as $post) {
            json_api_add_acf($post); // Add specs to each post
        }
    }
    else if (isset($response['post'])) {
        json_api_add_acf($response['post']); // Add a specs property
    }
    else if (isset($response['page'])) {
        json_api_add_acf($response['page']); // Add a specs to a page
    }

    return $response;
}

function json_api_add_acf(&$post) {
    $post->custom_fields->NAME_OF_YOUR_CUSTOM_FIELD = get_field( 'NAME_OF_YOUR_CUSTOM_FIELD', 'option' );
} 
```***

# c# - 唯一文件夹标识符

> ID：10132686
> 
> 赞同：2
> 
> 时间：2012-04-12T22:17:22.903
> 
> 标签：c#, .net, directory, unique, identifier

今天早些时候，有人慷慨地回答了我关于检索与计算机上的文件关联的唯一标识符的问题。[唯一文件标识符](https://stackoverflow.com/questions/10129623/unique-file-identifier)

该解决方案效果很好，但是，它没有解决文件夹的唯一标识符。如何检索指定目录的 UID，通过重命名和移动将保留在目录中的 UID。

更新： FSCTL_GET_OBJECT_ID 似乎是我所追求的功能，但有人能够提供有关用法的简要上下文吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T23:17:31.613

我将其放入答案中，因为评论的文字太多。

我回答了您关于*唯一文件标识符*的问题。我没有深入研究这个话题。那只是很好的[研究技能](http://www.google.de/)。

我进行了一些研究并收集了一些可能对您有所帮助的文档链接：

*   [本地文件系统](http://msdn.microsoft.com/en-us/library/windows/desktop/aa364407%28v=vs.85%29.aspx)
*   [CSIDL](http://msdn.microsoft.com/en-us/library/windows/desktop/bb762494%28v=vs.85%29.aspx)
*   [已知文件夹ID](http://msdn.microsoft.com/en-us/library/windows/desktop/dd378457%28v=vs.85%29.aspx)
*   [已知文件夹](http://msdn.microsoft.com/en-us/library/windows/desktop/bb776911%28v=vs.85%29.aspx)

我已经搜索了很长时间，但无论其路径如何，我都找不到任何标识**每个文件夹的内容。**

据我所知，唯一始终可以识别的文件夹是这些**已知文件夹**。那是因为一个 WinOS 使用*C:/winnt/Windows Net/*而另一个使用*D:/Windows/Net/*路径（不要查找那些，我只是想出来的）。

# javascript - 有没有办法在 jquery :contains() 选择器中使用多个字符串？

> ID：10132689
> 
> 赞同：2
> 
> 时间：2012-04-12T22:17:45.570
> 
> 标签：javascript, jquery

嗨，我想知道是否有办法在[jquery](http://http://api.jquery.com)选择器中使用多个字符串`:contains()`。例如，我会做这样的事情：

```
 $("#"+idArray[i]).find("th:Contains(" + query && query2 + ")").closest($(".instTable, .break")).show(); 
```

类似于 if 语句的语法。这可能吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T22:20:07.490

当然，当您想要一个`and`条件时，这与独立过滤两个匹配项相同。

```
$(selector).find('th:contains(' + query1 +'):contains(' + query2 + ')') ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T22:26:10.850

```
$('th:contains('+ query +'), th:contains('+ query2 +')').... 
```

# php - 在 PHP 中从字符串中解析数据

> ID：10132690
> 
> 赞同：1
> 
> 时间：2012-04-12T22:17:51.853
> 
> 标签：php, preg-match-all

我希望能够使用 PHP 解析以下数据：

```
$string = "<![CDATA[<div><b>Color:</b> Blue</div>
<div><b>Number:</b> 5</div>
<div><b>Month:</b> January</div>]]>"; 
```

放入一个数组，例如：

```
Array
(
    [Color] = Blue
    [Number] = 5
    [Month] = January
) 
```

我尝试使用 preg_match 来提取 之间的数据，但是，它不会产生任何匹配。

```
preg_match_all("/\[CDATA\[(.*?)\]]/", $string, $result); 
```

我无法超越这一点。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T22:30:07.433

```
$result=array();
$arr = explode("\n", strip_tags(substr($string,9, strlen($string)-12)));
foreach($arr as $val){
    $tmp = explode(':',$val);
    $result[$tmp[0]] = $tmp[1];
} 
```

（自己添加检查、修剪、代码样式等）

# javascript - 通过索引设置数组对象的值设置所有数组项

> ID：10132695
> 
> 赞同：0
> 
> 时间：2012-04-12T22:18:17.223
> 
> 标签：javascript, arrays, object

我有一个带有数组的复杂 javascript 对象。当我尝试为索引的一个属性设置值时，它会应用于数组的所有项目。

这是一个基本示例：

```
var obj = new Object();    
obj.arr = [];
obj.arr[0] = {pos:[0,0]};
obj.arr[1] = {pos:[0,0]}; 
```

现在，如果我通过特定索引为对象的属性设置值，

```
obj.arr[0].pos = [10,10];
obj.arr[1].pos = [5,5]; 
```

这里似乎是`[5,5]`为数组的两个项目设置值。结果值为：

`console.log(obj.arr[0].pos)`返回`[5,5]` 和

`console.log(obj.arr[1].pos)`也返回`[5,5]`

我的实际对象要复杂得多，但这是正在发生的事情的基本概念......

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T22:22:13.050

它们共享相同的链接，即对象的多个变量/属性引用相同的值。

确切的答案（错误在哪里）取决于您的对象是如何组成的。

```
var nested = {a:1};
var obj = {arr:[]};
obj.arr[0] = {pos:0, n:nested};
obj.arr[1] = {pos:0, n:nested};

obj.arr[0].pos = 1;
obj.arr[1].pos == 1; // false
obj.arr[0].nested.a = 2;
obj.arr[1].nested.a == 2; // true 
```

相同数组/对象**字面量**的赋值是不一样的。

```
var a = [0];
var b = [0];
b[0] = 1;
a[0] == 1; // false
b = a;
a[0] = 2;
b[0] == 2; // true

a = b = [0];
a[0] = 1;
b[0] == 1; // true 
```

# windows - 如何访问 Mongo shell 历史文件或 Windows 上的所有历史记录

> ID：10132702
> 
> 赞同：0
> 
> 时间：2012-04-12T22:18:59.643
> 
> 标签：windows, mongodb, history, interactive-shell

这是在 Mac 等的 ~/.dbshel​​l 中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T09:07:32.163

A`.dbshell`会在当前目录中创建，并且没有单一的、全局`.dbshell`的，因为它会在基于 unix 的系统下。

TLDR：

出于对答案的好奇，我在我的 Windows VM 上安装了 mongodb，并在`bin`安装文件夹中运行了一些命令。`.dbshell`我在文件夹中看到了一个包含我在`bin`其中使用的所有命令的文件夹。然后我去了`c:\temp`并给出了 mongo shell 的完整路径，并在那里运行了一些命令。我注意到退出后`.dbshell`创建了一个`c:\temp`，其中包含我在该文件夹中时的命令历史记录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T16:43:58.160

某些 Mongo 版本 (2.0.x) 的 .dbshel​​l 文件是在 mongo.exe 目录中创建的，该目录是从 shell 退出时执行的，如 lobster1234 所述。因此，它们可以分散在不同的目录中

这在未来的版本中被修复为 USER_PROFILE env，通常是 C:\Documents and Settings\

签到：[https ://github.com/mongodb/mongo/commit/6d573a9a6e2de66241be53f5eef6873ae2cc12f6](https://github.com/mongodb/mongo/commit/6d573a9a6e2de66241be53f5eef6873ae2cc12f6)

# java - Netty 中的 Channel.messageReceived 事件

> ID：10132703
> 
> 赞同：0
> 
> 时间：2012-04-12T22:19:01.043
> 
> 标签：java, netty

在使用 Netty Channels 的基于 TCP 的服务器-客户端模型中，`Channel.write()`来自服务器的数量`Channel.messageReceived()`与接收客户端上的对应数量之间是否存在任何对应关系？如果我`writes()`对发件人执行 10，是否意味着`messageReceived()`将在侦听客户端上调用 10 次？还是 Netty 可以将发送的数据（从`write()`发送方的 s ）聚合成客户端上或多或少的`messageReceived()`事件？有没有办法在 Netty 中配置这种行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T05:48:47.433

它不能保证您的 Channel.write(..) 和 messageReceived 调用具有 1:1 映射。您需要使用一些 FrameDecoder 子类（可能编写您自己的子类）来缓冲 ChannelBuffer，直到您接收到足够的数据来将您的消息发送到服务器上 ChannelPipeline 中的下一个 ChannelHandler。

Netty 已经提供了一些可以使用的 FrameDecoder 实现，例如 DelimiterBasedFrameDecoder （例如），它将注意缓冲数据，直到它接收到 Delimiter，然后将其分派到 ChannelPipeline 中的下一个处理程序。

有关详细信息，请参阅 [1]。

[1] [http://netty.io/docs/stable/api/org/jboss/netty/handler/codec/frame/FrameDecoder.html](http://netty.io/docs/stable/api/org/jboss/netty/handler/codec/frame/FrameDecoder.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T22:25:15.720

是的，有一种方法可以做到这一点，但你必须给我们更多才能做其他事情。

# c - 使用按位运算符从 32 位整数中检索字节

> ID：10132706
> 
> 赞同：3
> 
> 时间：2012-04-12T22:19:32.763
> 
> 标签：c

这是问题所在，我目前有什么，我只是不明白它是怎么错的......

> getByte - 从字 x 中提取字节 n 字节编号从 0 (LSB) 到 3 (MSB) 示例：getByte(0x12345678,1) = 0x56 合法操作：！~ & ^ | + << >> 最大操作数：6 评分：2

```
int getByte(int x, int n) {
  return ((x << (24 - 8 * n)) >> (8 * n));
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-12T22:28:28.183

你的移位没有任何意义——首先，你左移 (24 - 8n) 位，然后你右移 8n 位。为什么？而且，这是错误的。如果 n 为 0，则将 x 左移 24 位并返回该值。试试笔和纸，看看这是完全错误的。

正确的做法是：

```
int getByte(int x, int n) {
  return (x >> 8*n) & 0xFF;
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-12T22:52:46.863

除非我完全弄错了，否则您的代码在数学上是不正确的。

```
getByte(0x000000ff, 0) {
    24 - 8 * n = 24;
    8 * n = 0;
    0x000000ff << 24 = 0xff000000;
    0xff000000 >> 0 = 0xff000000;
    return 0xff000000; // should return 0xff
} 
```

不允许使用运算符`-`，尤其`*`是一个问题（不能做`* 8`）。我想出了这个：

```
uint8_t getByte (uint32_t x, int n) {
    switch (n) {
        case 0:
            return x & 0xff;
        case 1:
            return (x >> 8) & 0xff;
        case 2:
            return (x >> 16) & 0xff;
        case 3:
            return x >> 24;
    }
} 
```

不是很漂亮，但符合问题描述：6 个操作符，都是合法的。

编辑：刚刚有一个（非常明显的）想法来避免`* 8`

```
uint8_t getByte (uint32_t x, int n) {
    return (x >> (n << 3)) & 0xff;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T22:28:16.527

我不明白你的功能是如何工作的。试试这个：

```
int getByte(int x, int n)
{
     return (x >> (8 * n)) & 0xFF;
} 
```

# asp.net-mvc-3 - RedirectToAction 和 Routing 未正确传递参数

> ID：10132707
> 
> 赞同：0
> 
> 时间：2012-04-12T22:19:44.443
> 
> 标签：asp.net-mvc-3

我试图在自发布操作（通过 IsValid）之后使用 RedirectToAction 方法。重定向发生得很好，但我试图传递给操作的参数始终为空。

```
[HttpPost]
public ActionResult UploadForm(UploadFormViewModel formVM)
{
        if (!ModelState.IsValid)
        {
            return View(formVM);
        }

        return RedirectToAction("UploadConfirm", new { confirmVM = new UploadConfirmViewModel() });
}

public ActionResult UploadConfirm(UploadConfirmViewModel confirmVM)
{
        return View(confirmVM);
} 
```

这是我的路线

```
 routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

        routes.MapRoute(
            "UploadConfirm",
            "{controller}/{action}/{confirmVM}",
            new { controller = "EnrollmentUpload", action = "UploadConfirm" }
            );

        routes.MapRoute(
            "Default", // Route name
            "{controller}/{action}/{id}", // URL with parameters
            new { controller = "EnrollmentUpload", action = "UploadForm", id = UrlParameter.Optional } // Parameter defaults
        ); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T06:32:12.487

删除`new{}`您的退货声明中的：

```
return RedirectToAction("UploadConfirm", new UploadConfirmViewModel()); 
```

我也没有向 Routecollection 添加额外的路由

# excel - 需要帮助从 URL 中提取文本

> ID：10132708
> 
> 赞同：1
> 
> 时间：2012-04-12T22:19:47.763
> 
> 标签：excel, excel-2007

我有一个包含数百个 URL 的电子表格。每个 URL 中都有一个搜索引擎友好名称，后跟一个数字 ID，末尾有一个“/1”。这是一个例子：

[http://www.somesite.com/directory/varying-file-names-Guide/431/1](http://www.somesite.com/directory/varying-file-names-Guide/431/1)

在这种情况下，431 是数字 ID。我试图将这个数字 ID 提取到它自己的列中，但我缺乏 Excel 知识肯定会阻碍我。我找到了一些示例，但我尝试自定义这些示例以匹配我的需求会导致错误。在所有情况下，我需要提取的值总是在 URL 中的“-Guides/”和“/1”之间。

任何帮助将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T22:33:03.583

假设您在 A1 中的 URL 在 B1 中尝试此公式以提取该数字

`=REPLACE(LEFT(A1,LEN(A1)-2),1,SEARCH("Guide/",A1)+5,"")`

假设“指南”不是“指南” - 如果它是“指南”，那么 5 需要是 6 .....，即

`=REPLACE(LEFT(A1,LEN(A1)-2),1,SEARCH("Guides/",A1)+6,"")`

...或一种不同的方法，它将提取任何以第三个字符结尾的数字

`=LOOKUP(10^5,RIGHT(LEFT(RIGHT(A1,7),5),{1,2,3,4,5})+0)`

最多提取 5 位数字

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T15:30:39.200

感谢所有回答的人。我的一位同事也提出了一种同样有效的方法。

```
=MID(A6,FIND("uide/",A6,1)+5,LEN(A6)-FIND("tion/",A6,1)-6) 
```

我想我会为面临同样问题的其他人提供这个。有趣的是看到人们解决问题的各种方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T22:46:25.580

无论数字 ID 前面的单词如何，此公式都应该有效。假设您的 URL 在单元格 A1 中，

在单元格 B1 中：

```
=SUBSTITUTE(LEFT(A1, LEN(A1) - 2), "/","||", LEN(LEFT(A1, LEN(A1) - 2)) - LEN(SUBSTITUTE(LEFT(A1, LEN(A1) - 2), "/",""))) 
```

在单元格 C1 中：

```
=RIGHT(B1,LEN(B1)-FIND("||",B1)-1) 
```

# ios - Root.plist setting.bundle 老编辑器，在哪？

> ID：10132712
> 
> 赞同：0
> 
> 时间：2012-04-12T22:20:04.987
> 
> 标签：ios, xcode4.2, settings.bundle

我已经搜索了答案，但我找不到它。如何在 xcode 4.2 中编辑 settings.bundle？

我在此站点上发现您更改为 application.settings 但这不是我要寻找的这是我在 xcode 中为 Root.plist 提供的编辑器： ![在此处输入图像描述](../Images/6079ee852339a9a551849375f345dc36.png)

这是我正在寻找的 xcode 中的旧编辑器。右侧带有“+”。这在 xcode 4.2 中可能吗？还是苹果把它拿出来了？

非常感谢你，我正准备把我的头发拉出来！！

![在此处输入图像描述](../Images/6478cea03925c6aebe7edae35e0c1c34.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T02:39:28.397

Xcode 4 中的编辑器样式已更改。要添加新项目，请单击文件中的任何项目（在您尝试添加它的适当级别），然后单击显示的 + 并更改键和类型如所须。右侧带有 + 的旧编辑器已不复存在。

# html - 无法隐藏嵌入 iframe 中的 Flash SWF 对象

> ID：10132716
> 
> 赞同：0
> 
> 时间：2012-04-12T22:20:17.600
> 
> 标签：html, css, flash, iframe, visibility

在我的 HTML 页面上，我有`<div>`一个`<iframe>`，它引用另一个页面，其中包含一个 Flash SWF 对象。如果我设置任何这些：

```
display:none;
visibility:hidden;
opacity:0;
filter:alpha(opacity=0); 
```

在`<div>`包裹 <`iframe>`的 the 上，SWF 对象有时仍然清晰可见，而`<div>`and`<iframe>`则按预期消失。

奇怪的是它*有时*确实有效，具体取决于我使用的 SWF 对象。

预期效果出现在我的 Mac 上的所有最新浏览器和我的 Windows 7 机器上，*除了*Safari。

**编辑**

下面是一些说明问题的示例代码：

```
<button id="tryit" type="button">Try It</button>
<div id="test">
    <iframe src="hideswf-iframe.html" width="770" height="610" frameborder="0"></iframe>
</div>
<script type="text/javascript">
    var test = document.getElementById("test"),
        tryit = document.getElementById("tryit");

    tryit.addEventListener( "click", hideAndSeek, false );

    function hideAndSeek(e) {
        var style = test.style;
        style.opacity = (style.opacity == 1 || style.opacity == "") ? 0 : 1;
    }
</script> 
```

以及作为豚鼠的示例 SWF 对象：

```
<object type="application/x-shockwave-flash" id="strobemediaplayback" data="StrobeMediaPlayback.swf" width="743" height="600" style="visibility: visible; ">
    <param name="allowFullScreen" value="true">
    <param name="wmode" value="direct">
    <param name="flashvars" value="favorFlashOverHtml5Video=true&amp;swf=StrobeMediaPlayback.swf&amp;javascriptCallbackFunction=$.fn.strobemediaplayback.triggerHandler&amp;minimumFlashPlayerVersion=10.0.0&amp;expressInstallSwfUrl=expressInstall.swf&amp;autoPlay=false&amp;loop=false&amp;controlBarMode=docked&amp;poster=&amp;src=http://players.edgesuite.net/videos/big_buck_bunny/bbb_448x252.mp4&amp;useHTML5=false&amp;width=1187&amp;height=959&amp;queryString=favorFlashOverHtml5Video=true&amp;swf=StrobeMediaPlayback.swf&amp;javascriptCallbackFunction=$.fn.strobemediaplayback.triggerHandler&amp;minimumFlashPlayerVersion=10.0.0&amp;expressInstallSwfUrl=expressInstall.swf&amp;autoPlay=false&amp;loop=false&amp;controlBarMode=docked&amp;poster=&amp;src=http://players.edgesuite.net/videos/big_buck_bunny/bbb_448x252.mp4&amp;useHTML5=false&amp;width=1187&amp;height=959">
</object> 
```

这将存在于文件*hideswf-iframe.html*中。

这应该可以在 Mac 上的最新版本的 Safari、Chrome 和 Firefox 以及 Windows 7 机器上的最新版本的 Chrome、Firefox 和 Internet Explorer 中工作，并且应该会失败（没有错误，但不会发生隐藏行为）在 Windows 7 机器上的 Safari 中。

可能需要注意的是，关于通过和失败的 SWF 对象，我注意到的一件事是，失败的对象都围绕视频内容，而通过的对象则没有。诚然，我测试的对象不超过六个，但这是一个巧合。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T05:19:14.117

也一直在尝试解决这个问题，没有从 safari 中找到任何文档，尝试了所有可能的 css 和 jquery 隐藏组合，它对那些持怀疑态度的人不起作用，请查看[http://css-tricks .com/examples/AnythingSlider/](http://css-tricks.com/examples/AnythingSlider/)在 safari 上浏览幻灯片，您会在 3d 幻灯片中看到错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T07:43:19.017

如果您的情况是：

```
<div id="main">
  <iframe>
    <object.../>
  </iframe>
</div> 
```

我建议您使用`jQuery("#main").toggle()`，根据我的经验，它的效果很好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-20T09:37:26.897

只需将这行 JavaScript 添加到您的页面：

```
 swfobject.switchOffAutoHideShow(); 
```

# javascript - Tempo js - 渲染字符串数组或简单对象，在模板中引用“this”

> ID：10132718
> 
> 赞同：1
> 
> 时间：2012-04-12T22:20:22.607
> 
> 标签：javascript, templating, tempo

刚刚开始使用[Tempo](http://twigkit.github.com/tempo/) javascript 模板引擎。在文档中的所有示例中，您正在迭代的集合是对象或数组的数组，在模板中您引用属性名称（即 {{name}}）或数组索引（即 {{[0]}} ）。但是，如果我要遍历字符串等简单类型的数组呢？有没有办法在模板中引用对象本身？{{this}} 之类的东西？

例如：

```
var data = [ "All", "Europe", "Asia", "America", "India"];
Tempo.prepare("locations").render(data); 
```

现在我想将我的数据呈现到模板中的列表中：

```
<ul id="locations">
   <li data-template>
       {{?????}}
    </li>
</ul> 
```

如何在上面的示例中引用单个数组项？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T14:24:34.010

感谢您指出托德。使用[Tempo](http://tempojs.com) 1.8+，您可以使用以下方法引用正在迭代的对象：

```
{{.}} 
```

例如：

```
<ul id="locations">
   <li data-template>
       {{.}}
    </li>
</ul> 
```

# javascript - 如果执行了任何“if...else if”，则运行代码？

> ID：10132724
> 
> 赞同：0
> 
> 时间：2012-04-12T22:20:51.853
> 
> 标签：javascript, if-statement

如果执行了任何一堆代码，我想运行代码`if + else if + else if...`：

```
if(){
    ...
}else if(){
    ...
}else if(){
    ...
}
//run something if ANY of the above was executed 
```

`if`我可以在每个or上添加我想要执行的行`else if`，但这将是太多垃圾邮件。

我所做的如下：

```
temp=i;//store a copy
i=-1;//make the change

if(){
    ...
}else if(){
    ...
}else if(){
    ...
}else{
    i=temp//restore if none was executed
} 
```

以上将应用更改而不考虑任何内容，并使用`else`. 这工作正常，但我真的很担心这段代码的可读性

我还缺少其他更具可读性的替代方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T22:24:02.777

好吧，你总是可以做

```
any=true;
if (...) {
} else if (...) {
} else if (...) {
} else {
  any = false;
  // or: return, if you are inside a function!
}
if (any) {
  // one of the ifs was executed.
} 
```

如果你使用函数来包装这个，你也可以只`return`在最后的else中。这可能是最干净的版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T22:25:37.667

我不确定为什么需要两个变量。这个怎么样？

```
var conditionMet = true;

if(){
    ...
}else if(){
    ...
}else if(){
    ...
}else{
    conditionMet = false;
}

if(conditionMet){
    ...
} 
```

我认为出于可读性目的，这里的主要内容是为变量找到一个非常好的名称，具体取决于它**实际**代表的内容。

# jquery - jQuery验证不起作用

> ID：10132725
> 
> 赞同：0
> 
> 时间：2012-04-12T22:20:53.367
> 
> 标签：jquery, jquery-validate

我的代码有问题，似乎`.validate`无法正常工作，但所有文档都已连接并且工作正常：

**HTML：**

```
<!DOCTYPE html>
<html>
    <title>Site Name Quote Form</title>
    <link rel="stylesheet" href="http://domain.co.nz/_assets/css/style.css"/>
<body>
    <div id="wrapperQuote">
        <h1>Site Name Quote</h1>

            <p class="quoteError"><?php echo validation_errors(); ?></p>

            <p class="step">Step 1: Company Details</p>

        <form id="quote" action="home/hosting" method="post">
            <fieldset>
            <legend>Company Details:</legend>
            <label for="companyName">Company Name: </label><input type="input" name="companyName" id="companyName"/>
            <label for="companySlogan">Company Slogan: </label><input type="input" name="companySlogan" id="companySlogan"/>
            <label for="companyContact">Company Contact: </label><input type="input" name="companyContact" id="companyContact"/>
            <label for="companyEmail">Company E-Mail: </label><input type="email" name="companyEmail" id="companyEmail"/>
            <label for="companyWebsite">Company Website: </label><input type="url" name="companyWebsite" id="companyWebsite" placeholder="http://"/>
            <label for="companyPhone">Company Phone: </label><input type="phone" name="companyPhone" id="companyPhone"/>
            <label for="companyFax">Company Fax: </label><input type="phone" name="companyFax" id="companyFax"/>
            <label for="companyAddress">Company Address: </label><textarea name="companyAddress" id="companyAddress"></textarea>
            <input type="submit" class="nextButton" value="Next" />
            </fieldset>
        </form>
        </div>
            <script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
            <script>window.jQuery || document.write('<script src="http://domain.co.nz/_assets/js/jquery-1.7.2.min.js"><\/script>')</script>
            <script src="http://domain.co.nz/_assets/js/jquery.validate.min.js"></script>
            <script src="http://domain.co.nz/_assets/js/quote.js"></script>
</body>
</html> 
```

**引用.js：**

```
jQuery(document).ready(function() { 
    //Home Validation
    $("#quote").validate({
        rules:{
            companyName:{
                required: true,
                url: true
            }
        }
    });
etc etc 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-12T22:45:26.057

正如您发布的那样，您的代码正在按预期工作...... [jsFiddle DEMO](http://jsfiddle.net/ex44R/1/)

关于你的代码...

```
jQuery(document).ready(function() { 
    //Home Validation
    $("#quote").validate({
        rules:{
            companyName:{
                required: true,
                url: true
            }
        }
    });
}); 
```

如果您已将 jQuery 置于[noConflict 模式](http://api.jquery.com/jQuery.noConflict/)，那么[您在 noConflict 模式下的代码将被破坏](http://jsfiddle.net/ex44R/2/)。

使用`noConflict`模式时，必须将`$`符号传递给`document.ready`函数。 [工作演示](http://jsfiddle.net/ex44R/4/)...

```
$.noConflict();
jQuery(document).ready(function($) {
    $("#quote").validate({
        // rules
    });
}); 
```

或者，你会`jQuery`在任何地方使用`$`。 [工作演示](http://jsfiddle.net/ex44R/3/)...

```
$.noConflict();
jQuery(document).ready(function() { 
    jQuery("#quote").validate({
        // rules
    });
}); 
```

否则，如果不使用无冲突模式，它将看起来像这样。 [工作演示](http://jsfiddle.net/ex44R/5/)...

```
$(document).ready(function() {
    $("#quote").validate({
        // rules
    });
}); 
```

# iphone - 将 NSDictionary 值传递给 NSString

> ID：10132727
> 
> 赞同：0
> 
> 时间：2012-04-12T22:21:20.213
> 
> 标签：iphone, ios, nsstring, nsdictionary

我想知道如何将 NSDictionary 值传递给变量。比如说我的 NSDictionary 里面有 3 个字符串。我想知道如何将第二个字符串应用到一个新的 NSString 变量

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T22:25:01.673

如果我理解正确你想要什么：

```
NSString *str = [theDict objectForKey:@"theKey"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T22:28:07.113

NSDictionary 中的井对象未排序，因此您可以进行`objectForKey:`或快速枚举并选择其中的第二个值

# scala - 玩！框架 2.0 scala - ClassCastException：models.MyModel 无法转换为 models.MyModel

> ID：10132730
> 
> 赞同：3
> 
> 时间：2012-04-12T22:21:43.463
> 
> 标签：scala, mongodb, playframework, playframework-2.0, salat

这是我的第一个 play 2.0 应用程序，scala 对我来说仍然很新，所以我很可能在某个地方犯了错误。我正在使用一个非常新的插件，它捆绑了 Salat 和 Casbah：[https ://github.com/leon/play-salat](https://github.com/leon/play-salat)

我已经简化并重命名了所有内容以使其通用。

我的观点（`views/MyController/search.scala.html`）：

```
@(modelList:List[models.MyModel])
@main(title = "Search MyModel") {
  <table>
  @for(a <- modelList) {
    <tr><td>@a.field<td>@a.field2</li>
  } 
  </table>
} 
```

我的控制器（`controllers/MyController.scala`）：

```
package controllers

import play.api._
import play.api.mvc._
import play.api.data._
import play.api.data.Forms._
import com.mongodb.casbah.Imports._
import models._

object MyController extends Controller {
  def search = Action {
    val modelList = MyModel.all.toList;
    Ok(views.html.MyController.search(modelList))
  }
} 
```

我的模型：（`models/MyModel.scala`）：

```
package models

import play.api.Play.current
import java.util.{Date}
import com.novus.salat._
import com.mongodb.casbah.Imports._
import se.radley.plugin.mongodb._
import se.radley.plugin.mongodb.salat._

case class MyModel(
  id: ObjectId = new ObjectId,
  field: String,
  field2: String
)

object MyModel extends SalatDAO[MyModel, ObjectId](collection = getCollection("mycollection")) {
  def all = find(MongoDBObject())
} 
```

我收到了这个错误：

```
ClassCastException: models.MyModel cannot be cast to models.MyModel 
```

这对我来说没有多大意义——有人遇到过这样的事情吗？

完整的堆栈跟踪：

```
play.core.ActionInvoker$$anonfun$receive$1$$anon$1: Execution exception [[ClassCastException: models.MyModel cannot be cast to models.MyModel]]
at play.core.ActionInvoker$$anonfun$receive$1.apply(Invoker.scala:82) [play_2.9.1.jar:2.0]
at play.core.ActionInvoker$$anonfun$receive$1.apply(Invoker.scala:63) [play_2.9.1.jar:2.0]
at akka.actor.Actor$class.apply(Actor.scala:290) [akka-actor.jar:2.0]
at play.core.ActionInvoker.apply(Invoker.scala:61) [play_2.9.1.jar:2.0]
at akka.actor.ActorCell.invoke(ActorCell.scala:617) [akka-actor.jar:2.0]
at akka.dispatch.Mailbox.processMailbox(Mailbox.scala:179) [akka-actor.jar:2.0]
Caused by: java.lang.ClassCastException: models.MyModel cannot be cast to models.MyModel
at views.html.MyController.search$$anonfun$apply$1.apply(search.template.scala:25) ~[classes/:na]
at scala.collection.TraversableLike$$anonfun$map$1.apply(TraversableLike.scala:194) ~[scala-library.jar:0.11.2]
at scala.collection.TraversableLike$$anonfun$map$1.apply(TraversableLike.scala:194) ~[scala-library.jar:0.11.2]
at scala.collection.LinearSeqOptimized$class.foreach(LinearSeqOptimized.scala:59) ~[scala-library.jar:0.11.2]
at scala.collection.immutable.List.foreach(List.scala:45) ~[scala-library.jar:0.11.2]
at scala.collection.TraversableLike$class.map(TraversableLike.scala:194) ~[scala-library.jar:0.11.2] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T23:33:34.657

我认为这里的问题是您的 MyModel 集合对象

```
object MyModel extends SalatDAO[MyModel, ObjectId](collection = getCollection("mycollection")) {
  def all = find(MongoDBObject())
} 
```

是在您的模板中导入的内容。

我会尝试以下方法：

```
package models

import play.api.Play.current
import java.util.{Date}
import com.novus.salat._
import com.mongodb.casbah.Imports._
import se.radley.plugin.mongodb._
import se.radley.plugin.mongodb.salat._

case class MyModel(
  id: ObjectId = new ObjectId,
  field: String,
  field2: String
)

object MyModelDAO extends SalatDAO[MyModel, ObjectId](collection = getCollection("mycollection")) {
  def all = find(MongoDBObject())
} 
```

案例类已经带有伴随对象。在这种情况下`MyModel`，scala 会为您生成一个伴随类。扩展正确类型的对象`SalatDAO`也被命名为`MyModel`. 您将不得不查看为案例类和`MyModel extends SalatDAO[MyModel, ObjectId]`类生成的字节码以找出生成的类名是什么，我认为这将`models.MyObject$`适用于您的案例类。但是，如果你以不同的方式命名它，那么你应该得到你正在寻找的结果。

# android - 为什么我不能强制我的一个视图在软件中呈现？

> ID：10132731
> 
> 赞同：6
> 
> 时间：2012-04-12T22:21:46.187
> 
> 标签：android, android-4.0-ice-cream-sandwich, android-custom-view, hardware-acceleration

在我拥有的自定义视图中，我将 Canvas.drawBitmap 与大于 2048 像素的源位图一起使用。当启用硬件加速时，这当然会导致问题，每次调用 drawBitmap 时，LogCat 都会显示“W/OpenGLRenderer(4968)：位图太大而无法上传到纹理中”。

所以为了解决这个问题，我尝试调用`setLayerType(View.LAYER_TYPE_SOFTWARE, null)`我的观点。唯一的问题是它似乎没有帮助。当我尝试运行我的应用程序时，LogCat 仍然会发出警告，并且最终不会绘制任何内容。

我不明白为什么会这样。[Android网站上的这篇文章](http://developer.android.com/guide/topics/graphics/hardware-accel.html)明确指出：

> 您可以使用以下代码在运行时为单个视图禁用硬件加速：
> 
> ```
> myView.setLayerType(View.LAYER_TYPE_SOFTWARE, null); 
> ```

有什么我做错了吗？为什么 Android 不尊重 setLayerType 调用？

* * *

[以防万一：我正在运行 Android 3.2 的三星 Galaxy Tab 10.1 上进行测试]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T15:38:07.543

首先尝试调整位图的大小。使用创建位图。

# php - 在 HTML 页面中输出一个使用 PHP 的 mySQL 查询

> ID：10132732
> 
> 赞同：-1
> 
> 时间：2012-04-12T22:21:46.050
> 
> 标签：php, mysql

我有这样的查询

> $sql = "SELECT SUM(当 jr_softwarecheck LIKE \'%sony\' AND jr_othersoftware LIKE \'%sony%\' THEN 2 ELSE 1 END) 作为总数来自 jos_jreviews_content WHERE jr_softwarecheck LIKE \'%sony%\' OR jr_othersoftware LIKE \'%sony%\'";

我想在 HTML 页面中输出结果。我运行一个基于 Joomla 的网站。我怎样才能做到这一点？抱歉，我在 PHP 方面不太熟练，我正在学习。

HTML 页面（前端）中的预期结果，例如：

索尼产品：105

在此先感谢大家！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T08:13:37.380

在你的情况下，像这样使用它：

```
 $sql = "SELECT SUM(CASE WHEN jr_softwarecheck LIKE \'%sony\' AND jr_othersoftware LIKE \'%sony%\' THEN 2 ELSE 1 END) AS totalcount FROM jos_jreviews_content WHERE jr_softwarecheck LIKE \'%sony%\' OR jr_othersoftware LIKE \'%sony%\'";
    $res = mysql_query($sql); // This will run the query on the connected datababse
    if($row = mysql_fetch_array($res)){ // Since you are using just a SUM to count results, you don't need to loop
        echo "Sony Products: ".$row['totalcount']; // $row['totalcount'] is the result of the totalcount from your MySQL query put into the $row variable
    } 
```

我希望这可以帮助你 ：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T22:25:58.710

```
$result = mysql_query($sql) or die (mysql_error());
while($row = mysql_fetch_assoc($result)){
    //do something
} 
```

# jquery - Jquery 在 Safari 中有效，但在 Firefox 11 中无效

> ID：10132739
> 
> 赞同：1
> 
> 时间：2012-04-12T22:22:24.740
> 
> 标签：jquery, ajax, json

我有一个运行良好的 js 文件

```
$(document).ready( function() {
    $(".btn-save").click( function() {
        var1 = $("#var1").val();
        var2 = $("#var2").val();
        var3 = $("#var3").val();
        var4 = $("#var4").val();
        var5 = $("#var5").val();

        $.post("json.test.php",
            {
                "var1" : var1,
                "var2" : var2,
                "var3" : var3,
                "var4" : var4,
                "var5" : var5
            },
            function(data)
            {
                if(data.type == "success") {
                    if(data.data == "saved") {
                     ...
                   }
                    self.close();
                }
                if(data.type == "error") {
                    alert("Error: " + data.message);
                }
            },
            "json"
        );

    });
}); 
```

它工作正常，脚本 json.test.php 接收所有 5 个变量

```
@$var_php = $_POST["var1"]; 
```

现在，我在表单中添加了另一个字段，我只是添加到 javascript js 程序中

```
var6 = $("#var6").val(); 
```

并发布为

```
"var5" : var5 
```

在我进行这些更改之后，在 Safari 中，程序 json.test.php 可以接收所有 6 个变量，但在 Firefox 11 中只接收具有正确值的前 5 个变量，但对于 var6 始终接收 Null 。

你知道为什么在 Safari 中工作正常而不在 Firefox 11 中工作正常。还有为什么在 Firefox 11 中前 5 个变量工作正常，但如果我添加更多变量就不行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T03:43:09.243

我无法在 Firefox 11 中重新生成错误，但序列化表单值可能是您的解决方法。至少在处理表单输入时这是一种更好的方法。

```
<html>
<head>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script>
<script type="text/javascript">
$(document).ready( function() {
    $("#myform").submit(function(event) {
        event.preventDefault(); //Prevents refreshing page on form submit
    $.post("test.php", $("#myform").serialize(),
       function(data) {
          $('#target').html(data);
       });
        });
    });
</script>
</head>
<body>
<form id="myform">
<input type="text" id="var1" name="var1" size="1" maxlength="1" />
<input type="text" id="var2" name="var2" size="1" maxlength="1" />
<input type="text" id="var3" name="var3" size="1" maxlength="1" />
<input type="text" id="var4" name="var4" size="1" maxlength="1" />
<input type="text" id="var5" name="var5" size="1" maxlength="1" />
<input type="text" id="var6" name="var6" size="1" maxlength="1" />
<input type="submit" value="Submit" />
</form>
<div id="target">
</div>
</body>
</html> 
```

和test.php：

```
<?php
for ($i=1; $i<=6; $i++){
   echo $_POST["var".$i];
} 
?> 
```

# iphone - 在 UITableViewController 中解除分配的 Objective C 类实例属性

> ID：10132743
> 
> 赞同：1
> 
> 时间：2012-04-12T22:22:58.640
> 
> 标签：iphone, objective-c, memory-management, retain, reference-counting

在 iPhone 应用程序上工作，我有一个类实例，该类实例被定义为全局并在 ViewDidLoad 中为 UITableViewController 初始化。

当它到达 cellForRowAtIndexPath 时，实例属性被释放并显示在调试器中。

属性正在从数据库中加载。

**Foo.h**

```
NSString *prop1;

@property(nonatomic, retain)NSString *prop1;
-(void)shouldLoadProperties; 
```

**Foo.m**

```
@synthesize prop1;

-(void)shouldLoadProperties {
    <FMDatabase stuff here>

    FMResultSet *rs = [self executeQuery:sql];
    prop1 = [rs stringForColumn:@"col1"];  //loads db value "Test" into prop1
} 
```

表视图控制器：

**测试表视图控制器.h**

```
Foo *foo; 
```

**测试表视图控制器.m**

```
-(void)viewDidLoad {
   foo = [[[Foo alloc] init] retain];
   [foo shouldLoadProperties];

   //Breakpoint here shows that foo.prop1 is set to "Test"

}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

   //foo is is still allocated, but foo.prop1 has been 
   //deallocated;  shows as <freed object>  

  NSLog(@"Prop 1 is %@", foo.prop1);  //throws exception

} 
```

我没有释放 foo，那么为什么这些属性会自行释放呢？我是否在 Foo 中遗漏了一些东西以挂起属性，直到实例被释放？

**更新**

我发现通过在从数据库填充属性时添加保留，数据包含：

```
 prop1 = [[rs stringForColumn:@"col1"] retain]; 
```

这是正确的还是我错过了其他东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T22:45:41.463

这里的问题是您没有将`prop1`其用作属性，而是用作类中的变量。你可以而且应该给这些不同的名字。通常在变量名的开头加上下划线：

**foo.h**

```
NSString *_prop1;

@property(nonatomic, retain)NSString *prop1;
-(void)shouldLoadProperties; 
```

**foo.m**

```
@synthesize prop1 = _prop1; 
```

现在，要实际使用您的属性，请使用 getter 和 setter。这将保留您的价值并在适当的时候释放它。

```
[self setProp1:[rs stringForColumn:@"col1"]];  //loads db value "Test" into prop1 
```

和

```
self.prop1 = [rs stringForColumn:@"col1"];  //loads db value "Test" into prop1 
```

都是有效的并且彼此等效。

```
_prop1 = [rs stringForColumn:@"col1"];  //loads db value "Test" into prop1 
```

会导致崩溃等不良行为。

您的更新将防止崩溃，但如果您多次执行此操作，则会泄漏内存。

# salesforce - 通过链接到 Visualforce 详细信息页面传递记录 ID

> ID：10132744
> 
> 赞同：2
> 
> 时间：2012-04-12T22:23:09.630
> 
> 标签：salesforce, apex-code, visualforce

```
<apex:outputLink value="/!{opportunity.id}">{!opportunity.Name}</apex:outputLink> 
```

我在 VF 中创建 2 个页面。一页显示来自动态搜索的自定义对象记录列表。这是完整的。

我现在需要创建一个自定义 VF 页面，以在用户单击列表页面上的链接时显示单个记录信息。我知道我们可以使用如上图所示的输出链接。

假设我已经构建了详细信息页面（假设它的路径是“apex/customDetailPage”），我将如何修改此链接。因为我想我的详细信息页面将需要传递给它的选定记录 ID。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-12T23:35:54.353

你可以这样做：

```
<apex:outputLink value="/apex/customDetailPage?id={!opportunity.id}">
  {!opportunity.Name}
</apex:outputLink> 
```

假设您的自定义页面检查`id`参数以确定它应该使用哪个记录。

您还可以使用[`$Page`此处描述的全局变量选项，](http://www.salesforce.com/us/developer/docs/pages/index_Left.htm#CSHID=pages_variables_functions.htm%7CStartTopic=Content/pages_variables_functions.htm%7CSkinName=webhelp)这应该意味着它看起来像这样：

```
<apex:outputLink value="{!$Page.customDetailPage}?id={!opportunity.id}">
  {!opportunity.Name}
</apex:outputLink> 
```

# php - 页面顶部奇怪的空白区域 - HTML、CSS 和 PHP

> ID：10132747
> 
> 赞同：4
> 
> 时间：2012-04-12T22:23:24.487
> 
> 标签：php, html, css, whitespace

好吧，这是我遇到的一个奇怪的问题。我有两个页面，它们略有不同，但它们共享几个相同的元素（基本上是两个图像）。

这些图像都由相同的 CSS 样式表控制，但是，它们在第二页上似乎都低了大约 20-30 像素。

第二页的不同之处在于它在 Doctype 声明**之前使用了 PHP。**但是，正如后面所说，我认为这不是问题所在。

要查看此效果，请连续查看这两个页面：http: [//www.codecreek.biz/login](http://www.codecreek.biz/login)和[http://www.codecreek.biz/registration/register](http://www.codecreek.biz/registration/register)。

为了清楚起见，我已经看过很多可能的答案。[这](https://stackoverflow.com/questions/9630240/mysterious-white-space-at-top-of-page "这")似乎不是我的情况，因为我没有在这些页面上使用表格。

这是我尝试过的：

*   检查代码中的空格。但是，如果您查看这两个页面的源代码，您实际上会注意到第二个有问题的页面在其 Doctype 声明之前的顶部*少了一行空白。*
*   从第二页中删除 PHP 代码。这也没有任何效果。
*   减少关闭 PHP 标记`?>`和`<!DOCTYPE HTML>`无之间的明显空间。这又没有任何效果。
*   检查[BOM](http://en.wikipedia.org/wiki/Byte_order_mark "物料清单")。我是用vim做的，结果证实没有使用BOM。
*   检查我的 CSS。我没有发现任何奇怪的东西，但我是 CSS 的新手，所以，这可能是问题所在，这里是我的样式表的链接：http: [//www.codecreek.biz/resources/main.css](http://www.codecreek.biz/resources/main.css) . （免责声明：我正在重写该页面，所以如果它看起来很奇怪，那就去吧！）。

此外，Safari 的开发人员检查工具清楚地显示，`<body>`我的第二页上的标签仅开始向下约 20 像素。

老实说，我很迷茫。我希望有一个简单的解决方法，但我已经为此工作了几个小时无济于事。

编辑：这是“标题”图像和“波浪线”图像的 CSS。

```
#login_title { position:absolute; width:1000px; top:100px; }
#login_line { position:absolute; width:500px; top:330px; left:250px; } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-12T22:29:31.120

注册页面上的 H1 有一个默认的 Margin。有时，我不知道为什么，如果你给第一个元素一个边距，它会应用到父元素。

通过将 H1 #register_title 的上边距设为 0，您应该可以解决问题。

```
#register_title { margin-top: 0; } 
```

永远记得使用 reset.css 实现或记住元素是默认样式的。

编辑：我想指出这是一个问题，因为您之前的所有元素都是绝对定位的。你真的不应该像现在这样使用绝对定位。您应该使用 margin-top、padding-top 将元素向下移动页面。只有当没有其他定位元素的途径可用时，才应使用绝对定位。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T22:27:52.440

一个主要区别是第一页有标题动画`javascript`，它将标题移动到其最终位置。*寄存器*页没有这样的逻辑。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T22:29:46.583

在[http://www.codecreek.biz/registration/register](http://www.codecreek.biz/registration/register)中，徽标 (login_title) 的位置是绝对的，但在其他页面中它是相对的。

在[http://www.codecreek.biz/registration/register](http://www.codecreek.biz/registration/register)中设置为相对时，它修复了差距。

（顺便说一下，您在[http://www.codecreek.biz/login](http://www.codecreek.biz/login)上用 relative 覆盖它，所以“top：100”没有生效，就像在另一页上一样）

# java - 用于字节操作的 Java RandomAccessFile 与 DataInputStream

> ID：10132749
> 
> 赞同：3
> 
> 时间：2012-04-12T22:23:38.530
> 
> 标签：java, file-io

我需要从文件中读取字节。using和 using
之间是否存在差异（例如效率、内存、运行时、代码的复杂性和不优雅）？`RandomAccessFile``DataInputStream`

我使用的唯一方法是 readByte()。

`RandomAccessFile`同样对于另一个方向，`DataOutputStream`如果只需要 writeByte()之间是否有区别？
（`RandomAccessFile`双向的不算，读写不相连，不能共享）。

还有其他更适合这种阅读和写作的对象吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T05:00:20.933

*如果*您只进行顺序访问，它们本身基本上是等价的；但是 a`DataInputStream`围绕 a`BufferedInputStream`将比`FileInputStream`a 更有效`RandomAccessFile`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T22:33:20.847

`DataInputStream/DataOutputStream`如果您只需要按顺序读/写它，那完全没问题。

如果您需要随机访问（例如对字节数组），请使用`RandomAccessFile`.

我认为它们在内存消耗等方面没有任何显着差异，因为它们只是 JVM 和 OS 之间的中介。

# jquery - jQuery淡入div用于重复类

> ID：10132750
> 
> 赞同：1
> 
> 时间：2012-04-12T22:23:41.973
> 
> 标签：jquery, jquery-selectors

我正在尝试做一些与这个问题中解释的非常相似的事情 - [jQuery hover : fading in a hidden div while fade out the "default" one](https://stackoverflow.com/questions/1170702/jquery-hover-fading-in-a-hidden-div-while-fading-out-the-default-one)

我遇到的问题是我想在重复类上使用淡入/淡出，而不是这个使用单个 ID 作为选择器的示例。在将鼠标悬停在我的图像上的那一刻，页面上使用同一类的所有其他图像也会消失。这是我所拥有的：

**HTML**

```
<div class="test">
            <div class="img rounded">
                <div class="post_image"> <a href="#"><img src="http://graphics8.nytimes.com/images/2009/07/19/arts/Pool4.jpg" border="0"></a>
                </div>
            </div>
            <div class="post_body hide">
                <p>This is a dummy text to fadeThis is a dummy text to fadeThis is a dummy text to fadeThis is a dummy text to fadeThis is a dummy text to fade This is a dummy text
                </p>
            </div>
        </div>

            <div class="test">
            <div class="img rounded">
                <div class="post_image"> <a href="#"><img src="http://graphics8.nytimes.com/images/2009/07/19/arts/Pool4.jpg" border="0"></a>
                </div>
            </div>
            <div class="post_body hide">
                <p>This is a dummy text to fadeThis is a dummy text to fadeThis is a dummy text to fadeThis is a dummy text to fadeThis is a dummy text to fade This is a dummy text
                </p>
            </div>
        </div> 
```

**jQuery**

```
<script type="text/javascript">
$(function(){
$('.test').hover(
        function(){
            $('.post_image').fadeOut(100, function(){
                $('.post_body').fadeIn(100);                         
            });
        },
        function(){
            $('.post_body').fadeOut(100, function(){
                $('.post_image').fadeIn(100);                        
            });
        }
        );

});
</script> 
```

我很确定我在 jQuery 中需要一个 $(this) 但不能让它工作。非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T22:36:14.573

`$(this)`对象和函数的使用`find()`应该更适合您：

```
$(function(){
    $('.test').hover(function(){
        $(this).find('.post_image').fadeOut(100,function(){
            $('.post_body').fadeIn(100);
        });
    },function(){
        $(this).find('.post_body').fadeOut(100,function(){
            $('.post_image').fadeIn(100);
        });
    });
}); 
```

# report-viewer2010 - 如何替换reportviewer 的刷新按钮？

> ID：10132752
> 
> 赞同：0
> 
> 时间：2012-04-12T22:23:48.307
> 
> 标签：report-viewer2010

我需要隐藏reportviewer 工具栏上的刷新按钮，并将其功能替换为ASP.net Web 表单上的标准文本显示按钮。

我知道如何将 ShowRefreshButton 属性设置为 false 以隐藏嵌入式按钮，但我无法弄清楚我的新 asp 按钮后面需要什么代码。我尝试了以下但没有奏效。

```
 With ReportViewer1
        .DataBind()
 End With 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T12:56:17.800

尝试这个：

```
Me.ReportViewer1.LocalReport.SetParameters( _
    New Microsoft.Reporting.WebForms.ReportParameter("Year", ddlYear.SelectedValue, False)) 
```

它对我有用，设置参数或参数似乎重新绑定了控件。

# asp.net - 如何让用户对象序列化以存储在 StateServer 中

> ID：10132753
> 
> 赞同：1
> 
> 时间：2012-04-12T22:23:51.923
> 
> 标签：asp.net, serialization, enums, session-state

**实际问题和问题：**

当我将 sessionState 模式从 InProc 切换到 StateServer 时，Web 服务器引发了序列化错误。我需要更改什么才能使其正常工作？

**技术：**

ASP.Net、IIS7、Framework 4 中的 vb.Net 和 C#

**细节：**

我们正在将 ASP.Net 网站的 sessionState 模式从 InProc 切换到 StateServer。这是我们为能够在同一服务器上的 2 个 Web 应用程序之间共享 sessionID 和会话信息所做的几项更改中的一项。托管网站的服务器也将运行 ASP.Net State Service 服务。

当我在主站点的 web.config 文件中切换 sessionState 的模式时，出现服务器错误：

```
Invalid cast from 'System.Int32' to 'OurCompany.OurApp.Objects.User+enUserType'. 
```

User 类被声明为 Serializable，并且一直是我们在会话中存储用户的方式：

```
<System.ComponentModel.DesignerCategory("Code"), SerializableAttribute()> Public Class User
    Inherits BaseClass
    Implements System.Runtime.Serialization.ISerializable 
```

我暂时将声明更改为：

```
<Serializable()> Public Class User 
```

万一这会有所帮助，但它并没有改变任何东西。

User 类有一个公共枚举 enUserType：

```
Public Enum enUserType
    usrInternal = 1
    usrCustomer
    usrCarrier
    usrSupplier
End Enum 
```

和公共财产：

```
Public Property UserType() As enUserType
    Get
        Return m_iUserType
    End Get
    Set(ByVal Value As enUserType)
        m_iUserType = Value
    End Set
End Property 
```

这些没有特别标记为可序列化，但根据我的阅读，它们不应该是。以防万一，我用它们标记为 Serializable 对其进行了测试，但它并没有解决问题。

如果我将 sessionState 模式切换回 InProc，它工作正常。我的印象是，如果您的对象为 InProc 正确序列化，它们也应该适用于 StateServer。我的这个假设是基于我读过的其他人的问题和答案，但这可能是错误的。

如果我的 web.config 配置不正确，这就是 sessionState 标记的样子：

```
<sessionState mode="StateServer" stateConnectionString="tcpip=127.0.0.1:42424" cookieless="false"/> 
```

我已经在 Web 服务器上启动了 ASP.Net 状态服务服​​务器，并检查了注册表中的配置，以确保它正在侦听默认端口 42424，并且确实如此。

如果有任何您认为相关的详细信息，请告诉我，我会添加它们。

谢谢，

-BEP

**附加信息**

在查看了 EdSF 建议的其他一些文章后，我添加了 XmlAttribute XmlEnum 但这没有帮助。我尝试了其他一些建议，但没有得到任何不同的结果。

这让我对问题出在哪里提出了一些假设，并且我在类代码中找到了一个地方，其中发生了对序列化信息的一些转换，这就是问题所在。

# c# - 如何在c#中集成facebook

> ID：10132756
> 
> 赞同：0
> 
> 时间：2012-04-12T22:24:07.110
> 
> 标签：c#, facebook, winforms

在我的应用程序中，我需要使用 facebook 发布一个图像（图片框），这是进行此集成所需的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T22:25:49.427

Facebook 有一个[C# SDK](http://csharpsdk.org/)。

# javascript - 替代使用 event.layerX 和 event.layerY 的跨浏览器解决方案

> ID：10132758
> 
> 赞同：7
> 
> 时间：2012-04-12T22:24:20.863
> 
> 标签：javascript, jquery, cross-browser, raphael

我正在尝试从一个简单的应用程序中调整一些代码，该应用程序使用 Raphael 允许用户在画布上绘制圆形和矩形。（原始代码在[https://gist.github.com/673186](https://gist.github.com/673186)）

原始代码使用旧版本的 jQuery 并且运行良好。见[http://jsfiddle.net/GHZSd/](http://jsfiddle.net/GHZSd/)

但是，使用更新版本的 jQuery 会破坏该示例。见[http://jsfiddle.net/GHZSd/1/](http://jsfiddle.net/GHZSd/1/)

这样做的原因是jQuery 的新版本中不再定义和`event.layerX`。`event.layerY`我的问题是 - 我可以使用什么代码来替换这些值？我只是通过做一些数学来尝试了几件事（event.originalEvent.layerX/layerX 现在仍然存在，所以我只是想添加/减去一些会产生这些值的东西），但到目前为止，什么适用于一个浏览器不适用于所有这些。

抱歉，如果之前有人问过这个问题，但我无法在 Stack Overflow 或其他任何地方找到具体答案。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-12T23:46:26.683

所以，我想了一下这个问题，因为 Chrome 团队出于奇怪的原因想要删除 layerX 和 layerY。

首先，我们需要您的容器的位置：

```
var position = $paper.offset(); 
```

（对于那些没有打开小提琴的人来说，$paper 是绘制 svg 的 div）

它给了我们两个坐标，`position.top`和`position.left`，所以我们知道容器在页面中的什么位置。

然后，在点击时，我们使用`e.pageX`和`e.pageY`，它们是页面的坐标。为了模拟 layerX 和 layerY，我们使用`(e.pageX - position.left)`和`(e.pageY - position.top)`

等等：http : [//jsfiddle.net/GHZSd/30/](http://jsfiddle.net/GHZSd/30/)

适用于 chrome、Safari、FF 和 Opera。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-05-31T13:30:26.860

```
const bbox = e.target.getBoundingClientRect();
const x = e.clientX - bbox.left;
const y = e.clientY - bbox.top; 
```

# ruby-on-rails - 如何将 Rails 应用程序托管为只能在本地访问的 API？

> ID：10132759
> 
> 赞同：0
> 
> 时间：2012-04-12T22:24:21.917
> 
> 标签：ruby-on-rails, ruby, rest, hosting, restful-authentication

我开始创建一个基于 Ruby on Rails 的 RESTful API。我希望我的其他应用程序（托管在同一台服务器上）能够使用此 API。我的想法是，如果 API 仅在本地可用，我将不必处理身份验证逻辑，因为它不会公开访问。我以前从未做过这种事情，所以我什至不知道我所要求的是否可能（或者这是否是一个好主意）。

如何托管此应用程序以使我的 REST API 只能在本地访问？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T00:15:09.347

您可以执行以下操作之一：

*   将网络服务器设置为仅在环回上侦听

    *   如果您需要访问本地网络，请配置防火墙以相应地转发端口
*   将网络服务器设置为仅在专用网络接口上侦听（非公共）

# c# - How can a dynamic be used as a generic?

> ID：10132760
> 
> 赞同：10
> 
> 时间：2012-04-12T22:24:24.120
> 
> 标签：c#, generics, dynamic

How can I use a dynamic as a generic?

This

```
var x = something not strongly typed;
callFunction<x>(); 
```

and this

```
dynamic x = something not strongly typed;
callFunction<x>(); 
```

both produce this error

```
Error   1   The type or namespace name 'x' 
could not be found (are you missing a using directive or an assembly reference?) 
```

What can I do to `x` to make it legitimate enough to be used in `<x>`?

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-12T22:33:49.367

You could use type inference to sort of trampoline the call:

```
dynamic x = something not strongly typed;
CallFunctionWithInference(x);

...

static void CallFunctionWithInference<T>(T ignored)
{
    CallFunction<T>();
}

static void CallFunction<T>()
{
    // This is the method we really wanted to call
} 
```

This will determine the type argument at execution time based on the execution-time type of the value of `x`, using the same kind of type inference it would use if `x` had that as its *compile-time* type. The parameter is *only* present to make type inference work.

Note that unlike Darin, I believe this *is* a useful technique - in exactly the same situations where pre-dynamic you'd end up calling the generic method with reflection. You can make this *one* part of the code dynamic, but keep the *rest* of the code (from the generic type on downwards) type-safe. It allows *one* step to be dynamic - just the single bit where you don't know the type.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-12T22:33:22.657

It's hard to tell what exactly are you trying to do. But if you want to call a generic method with a type parameter that is the same as some object, you can't do that directly. But you can write another method that takes your object as a parameter, let the `dynamic` infer the type and then call the method you want:

```
void HelperMethod<T>(T obj)
{
    CallFunction<T>();
}

…

dynamic x = …;
HelperMethod(x); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-12T22:25:16.653

You can't. The whole point of generics is compile-time safety which means that they must be known at compile-time. And the whole point of dynamics is that you don't need to know the exact type at compile time and use runtime dispatching => it's the absolutely exact opposite of generics. So don't waste your time => once you get the dynamic/reflection path you can forget about generics and compile-time safety. You will have to walk that path till the end.

So to answer your question:

> What can I do to x to make it legitimate enough to be used in ?

The only thing you could do is to use a type that is known at compile-time, otherwise you cannot use generics.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-12T22:27:51.730

You get that error because `x` is not a type. You need to specify a type as a *type* parameter.

In fact, you *can* use `dynamic` as a type parameter if you use it correctly:

```
var dict = new Dictionary<string, dynamic>();

dict.Add("Item1", 123);
dict.Add("Item2", "Blah"); 
```

This compiles and runs just fine.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-12T22:31:47.747

The quickest way to make this work is to make your anonymous type a real type.

So instead of

```
var x = new { Value = "somevalue", Text = "sometext" }; 
```

You need to do

```
class MyClass
{
    string Text, Value;
}
....
var x = new MyClass() { Value = "somevalue", Text = "sometext" };
//this should work now
callFunction<MyClass>(x); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-12T22:46:28.640

You should be able to call the function like this

```
callFunction<dynamic>(); 
```

If your function is defined as

```
public void callFunction<T>(T arg) {
    ...
} 
```

You can simply call it with

```
callFunction(x); 
```

C# is able to infer generic type parameters in many situations.

# c - 在 C 中取消引用较低级别的指针

> ID：10132761
> 
> 赞同：3
> 
> 时间：2012-04-12T22:24:31.083
> 
> 标签：c, pointers, memory-management

当 malloc 返回一个指针（一个数据块的虚拟地址）时，

```
char *p = malloc (10); 
```

p 有一个虚拟地址，（比如 x）。并`p`持有一个由 10 个地址组成的块的虚拟地址。假设这些虚拟地址是从 y 到 y+10。

这10个地址属于一个页，虚拟-->物理映射放在页表中。

例如，当处理器取消引用指针 p 时，`printf("%c", *p);`处理器如何知道它必须访问 处的地址`y`？

**是否为了取消引用指针而访问了两次页表，换句话说 - 打印指向的地址`p`？具体是怎么做的，谁能解释一下？**

另外，为了访问堆栈变量，处理器是否必须通过页表访问它？堆栈指针寄存器（SP）不是已经不指向堆栈了吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T04:53:47.270

我认为不同层次的混乱。

首先，***页表***：这是一种数据结构，它使用一些内存来提供指向更多内存的指针。给定一个特定的虚拟地址，它可以将其解构为表中的索引。现在，这在内核的掩护下发生了，但是在用户空间中实现同样的想法是可能的。

现在，下一步是***流程***。每个进程都有自己的内存视图，因此有自己的一组页表。处理器如何知道这些不同的页表位于何处？在一个名为**cr3**的特殊控制寄存器中。更改进程有时称为上下文切换。这是正确的，因为设置 cr3 会改变虚拟内存的进程视图。

但接下来的问题是，处理器是如何理解虚拟内存的概念的呢？好吧，在一些较旧的架构中（想到 MIP），系统会保留最近转换的内存的缓存，并为如何处理虚拟内存访问提供指导。在 x86 中，缓存（通常称为**转换后备缓冲区**）实际上是在硬件中实现的。处理器存储这些翻译，以便它可以自动处理页表查找。如果存在缓存未命中，那么它实际上会遍历操作系统设置的页表结构以查找它应该引用的内容。

当然，这意味着处理器必须至少有两种不同的模式：一种假设地址是直接的，另一种是遍历页表。第一种模式，**实模式，在引导时存在，并且仅在引导加载程序打开****虚拟模式**并跳转到其余代码的开头之前足够长的时间来设置表格。

* * *

我的冗长解释的简短回答是，很可能根本没有访问页表，因为处理器已经进行了地址转换。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-13T06:19:30.343

> p 持有一个由 10 个地址组成的块的虚拟地址。

你很困惑。 `p`是一个保存 10 字节块地址的指针；如何解释这些字节取决于应用程序。

# javascript - JQuery动画左和缩放

> ID：10132763
> 
> 赞同：6
> 
> 时间：2012-04-12T22:25:00.673
> 
> 标签：javascript, jquery, jquery-ui

嗨，我需要同时缩放和动画 div。

像这样的东西。

```
$('#div').effect('scale'{percent:200},
'animate',{left:200}); 
```

谢谢。

这是我找到的解决方案。

```
 $('#div').effect('scale'{percent:200},1000);
 $('#div').animate({left:100,top:100},1000);
 $('#div').fadeTo(1100,0)); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-12T22:29:44.640

```
$('#div').animate({
   left: 200,
   height: ($(this).height()*2),
   width: ($(this).width()*2)
}, 1000); 
```

# nosql - Cassandra/NoSQL 新手：正确的建模方式？

> ID：10132766
> 
> 赞同：2
> 
> 时间：2012-04-12T22:25:13.890
> 
> 标签：nosql, cassandra

正如标题所说，我对 NoSQL DBS（如 Cassandra）相当（阅读：完全）新手。和其他许多人一样，我之前学过 RMDBS。所以我读了一些关于“WTF 是一个超级专栏”和其他明显的谷歌热门文章，但我仍然不确定如何建模：

假设我想保存用户，如用户名/密码/姓名/等...如果该用户喜欢手机和固定电话怎么办？这是“正确”的做法吗？（使用与在其他网站上看到的相同的缩写 JSON 样式）

```
Users: {    // <-- this is the Users SuperColumnFamily, keyed by username
    myuser: {    // <-- this is a User SuperColumn
        username = "myuser",    // <-- this is the username Column
        email = "myuser@googlemail.com",
        ...
    },
    ...
}

Phone: {    // <-- this is where the users phone numbers are stored
    myuser: {
        mobile = "0129386835235",
        landline = "123876912384",
    },
    ...
} 
```

请提出意见/更正

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T23:02:20.533

首先，不要使用超级列。看：

[http://www.quora.com/Cassandra-database/Why-is-it-bad-to-use-supercolumns-in-Cassandra](http://www.quora.com/Cassandra-database/Why-is-it-bad-to-use-supercolumns-in-Cassandra)

现在回答你的问题。您描述的示例很容易使用常规列族进行建模：

```
Users: { <- This is the name of the column family
  username1: { <- this is a row key within the column family, it is one of your usernames
    email: user@email.com <- these are all of the columns within this row, they correspond to attributes for this user
    mobile: ...
    landline: ...
  }
  username2: { <- another row for a different user
    email: diff@email.com
  }
} 
```

您可以看到上面的灵活模式，因为每一行都有一组不同的列来描述该用户。

有关 cassandra 数据模型的更多信息，我建议您阅读[http://www.datastax.com/docs/1.0/ddl/index](http://www.datastax.com/docs/1.0/ddl/index)

# node.js - 从 nodejs request.url 路径名构建路径

> ID：10132777
> 
> 赞同：0
> 
> 时间：2012-04-12T22:26:14.487
> 
> 标签：node.js

我想`/ok/ä.txt`从`/very///bad/%D0%B9/../../../../../request/../ok/%C3%A4.txt`node.js中获取。我发现了以下方法：

```
var url = require('url'), path = require('path');
require('http').createServer(function (request, response) {

    var file = null;
    try {
        file = path.normalize(decodeURI(url.parse(request.url).pathname));
    } catch (e) {
    }

    console.log(file);
    response.end();
}).listen(3002, '127.0.0.1'); 
```

是否存在一些更好的方法，没有 try/catch 块？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T22:42:00.493

我认为您可以摆脱该`try..catch`块，因为永远不会抛出错误，并且`path.normalize`仅在参数不是类型时才抛出错误：`decodeURI``url.parse``string`

```
...
if (typeof url !== 'string') {
    throw new TypeError("Parameter 'url' must be a string, not " + typeof url);
}
... 
```

并且因为`request.url`始终是`string`不会发生的类型。

# actionscript-3 - 检测鼠标后退/前进按钮点击

> ID：10132778
> 
> 赞同：0
> 
> 时间：2012-04-12T22:26:28.077
> 
> 标签：actionscript-3, flash

在 ActionScript 3 中，我能否检测到用户何时单击了鼠标上的后退或前进硬件按钮？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T22:30:32.690

[看起来不像。](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/events/MouseEvent.html#constantSummary)

据我所知，您可以使用：

*   滚轮。
*   中键。
*   左键单击。
*   右键单击（AIR 或 Flash Player 11.2）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T22:31:20.960

不，你不能。[`MouseEvent`您可以在文档](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/events/MouseEvent.html#summaryTableConstant)中找到所有受支持事件的列表。

# python - 不受信任的用户可以安全地使用哪个 Python 模板引擎？

> ID：10132781
> 
> 赞同：2
> 
> 时间：2012-04-12T22:26:46.233
> 
> 标签：python, security, templates, template-engine, code-injection

我正在寻找一个良好的独立 Python 模板引擎，它是安全的，可以防止代码注入，用于允许不受信任的用户编写和编辑模板的应用程序。有人可以推荐这样的引擎吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T21:47:36.560

Starcom 引用了 jinja。

[神社网站](http://jinja.pocoo.org/)在“功能”下说：

> 沙盒执行模式。模板执行的每个方面都受到监控，并明确将其列入白名单或黑名单，无论首选什么。这使得执行不受信任的模板成为可能。

# jquery - htmlBox 插入

> ID：10132784
> 
> 赞同：1
> 
> 时间：2012-04-12T22:27:30.897
> 
> 标签：jquery

我正在尝试在 htmlBox ver 4 中添加自定义按钮

他们的例子产生了并且`alert()`这是有效的。

这是我插入电子邮件链接的开始：

```
var email = { 
    icon:"email.png",
    tooltip:"Email",
    command:function(){ 
        var emailTX = prompt('Enter the email address','');
        if (emailTX!='') { 
            insert_text(emailTX); 
        }
    }
} 
```

我意识到'insert_text' 是不够的。如何插入到文本区域？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T22:33:52.727

您必须首先获得对文本框的引用。有多种方法可以做到这一点，例如 document.getElementById、document.getElementsByName。或者，IMO，最好还是利用像 jQuery 这样的库，它将所有这些规范化为标准化的低怪癖语法。

让我们使用最简单的示例，getElementById ...

如果您的文本区域如下所示：

```
<textarea id="foo" name="bar"></textarea> 
```

引用代码只是：

```
var pEl = document.getElementById('foo');
pEl.value = emailTX; 
```

# php - 用php查询动作

> ID：10132791
> 
> 赞同：0
> 
> 时间：2012-04-12T22:28:20.320
> 
> 标签：php, jquery

我有一个使用 php 在 mysql 中获取数据的命令，并使用以下命令删除一个 div（可以删除多个）：

```
echo "<div id='".$experience['index_of_form']."'>";
echo "<a href='#remove' id='remove' name='".$experience['index_of_form']."' style='text-align: right; text-decoration: underline;'>Remove</a>
echo "</div>"; 
```

当我看到输出时，名称是 experience1（示例）或 experience2。到现在为止还挺好。

要删除我有这个 jquery 功能：

```
$('#remove').live("click", function() {
var name_of_experience = $('#remove').attr("name");
$('#'+name_of_experience+'').remove();
}); 
```

问题是如果我有一个名为 experience2 的删除链接，他将删除名为 experience1 的 div！我不知道为什么，因为当我在输出中看到时，链接的名称是 experience2 而不是 experience1。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T22:31:35.950

我想这与您`ID`为每个元素分配相同的内容有关。`ID`'s 只能使用一次；`ID`用 a切换`CLASS`它应该可以正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T22:31:42.810

您不能`remove`在同一页面内多次使用 id，因为 ID 应该是单个元素的唯一标识符。jQuery 只会采用它在 DOM 中找到的第一个。尝试使用类而不是 id。

从 jQuery 1.7 开始，`.live()`不推荐使用`.on()`. 我还冒昧地通过`$(this)`在获取名称值时使用而不是选择器来添加一个小的性能改进：

```
$('body').on("click", "a.remove", function() {
   var name_of_experience = $(this).attr("name");
   $('#'+name_of_experience).remove();
}); 
```

# asp.net - 如何使用 ASP.Net Web API 发送键列表并返回键/值列表？

> ID：10132794
> 
> 赞同：3
> 
> 时间：2012-04-12T22:28:30.240
> 
> 标签：asp.net, rest, asp.net-web-api

我是 REST 服务的新手，一直在研究 ASP.Net Web API 的示例。我想做的是扩展这个 Get 方法：

```
[ServiceBehavior(InstanceContextMode = InstanceContextMode.Single)]
public class ProductsController : ApiController
{
    public IEnumerable<Product> GetAllProducts()
    {
        return new List<Product> 
        {
            new Product() { Id = 1, Name = "Gizmo 1", Price = 1.99M },
            new Product() { Id = 2, Name = "Gizmo 2", Price = 2.99M },
            new Product() { Id = 3, Name = "Gizmo 3", Price = 3.99M }
        };
    } ... 
```

对于我发送产品列表并返回所有价格的东西，在概念上它看起来像这样：

```
 public IEnumerable<Product> GetProducts(string[] ProductNames)
    {
        var pList = new List<Product>; 
        foreach (var s in ProductNames)
        {
            //Lookup price
            var LookedupPrice = //get value from a data source
            pList.Add(new Product() { Id = x, Name = s, Price = LookedUpPrice });

        }
        return pList;
    } 
```

有什么想法，REST 调用会是什么样子？我在想我需要传入一个 JSON 对象，但真的不确定。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-14T04:12:29.517

使用查询字符串值，您可以将多个值与单个字段相关联

```
public class ValuesController : ApiController
{
    protected static IList<Product> productList;
    static ValuesController()
    {
        productList = new List<Product>()
        {
            new Product() { Id = 1, Name = "Gizmo 1", Price = 1.99M },
            new Product() { Id = 2, Name = "Gizmo 2", Price = 2.99M },
            new Product() { Id = 3, Name = "Gizmo 3", Price = 3.99M }
        };
    }                
    public IEnumerable<Product> Get(IEnumerable<int> idList)
    {
        return productList;
    }
} 
```

使用默认路由，您现在可以向以下端点发出 GET 请求

/api/values/FilterList?idList=1&idList=2

# javascript - 我应该把我的 Javascript 放在 Wordpress 的什么地方？

> ID：10132795
> 
> 赞同：0
> 
> 时间：2012-04-12T22:28:37.150
> 
> 标签：javascript, html, wordpress

Okai，所以我在我的 wordpress 页面上有这个世界地图，并且有例如这个代码

```
<area onmousedown="changeImages('world_leisureCargo_01', './images/worldmap/north_america.jpg')" onmouseout="changeImages('world_leisureCargo_01', './images/worldmap/world.jpg')" onmouseover="changeImages('world_leisureCargo_01', './images/worldmap/north_america.jpg')" coords="121,72,155,45,202,46,248,35,289,27,340,44,352,54,336,69,349,93,342,110,261,159,261,177,240,162,220,168,213,187,218,198,233,189,235,202,244,211,249,225,241,225,216,206,190,195,171,171,159,130,172,111,178,78,154,68,132,79" href="#" alt="North America" shape="poly"> 
```

这段代码的作用是通过使用函数changeImage将鼠标悬停在地图的某些部分上时更改为另一个图像。问题是我不能拥有这样的函数

```
<script type="text/javascript">

function changeImages() {
if (document.images && (preloadFlag == true)) {
for (var i=0; i<changeImages.arguments.length; i+=2) {
document[changeImages.arguments[i]].src = changeImages.arguments[i+1];
}
} 
```

在 html 代码下方，因为 wordpress 似乎对其中的某些部分进行了“糖码”，因此它不起作用。

我应该把 Javascript 代码放在哪里才能正常工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T01:06:28.080

这是我如何在为客户构建的网站中添加它的示例。我很难将它包含在外部，所以我最终只使用编辑器来放置图像。我使用 TinyMce Advanced（我不确定常规编辑器是否会去除格式，但它适用于 TinyMce Advanced）：

```
 <p style="text-align: center;">
    <a title="Other Notable Projects" href="http://www.amasonry.com/other-notable-projects/">
    <img class="alignnone" onmouseover="this.src='http://www.amasonry.com/wp-content/themes/infocus/images/Sonic-Headquarters-Sepia.jpg';" onmouseout="this.src='http://www.amasonry.com/wp-content/themes/infocus/images/Sonic-Headquarters-Color.jpg';" src="http://www.amasonry.com/wp-content/themes/infocus/images/Sonic-Headquarters-Color.jpg" alt="" width="375" height="205" />
    </a>
  </p> 
```

# ruby-on-rails - “一切都是对象”这样好吗？

> ID：10132799
> 
> 赞同：3
> 
> 时间：2012-04-12T22:29:01.943
> 
> 标签：ruby-on-rails, ruby, oop

我一直在为一个班级项目学习 Ruby on Rails。我不断听到“Ruby 中的一切都是对象”。我不确定我是否理解为什么这是一件好事，或者如果这是一件好事？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T22:40:16.350

一个反例是在 Java`Integer`中是一个对象但`int`不是，这意味着不同的操作适用于两者（诚然，在最近的 Java 中，自动转换为对象版本/从对象版本转换，但这可能会带来意想不到的性能问题）。对象由于间接而慢一点，但更灵活；一切都是对象意味着一切都表现一致。Java 又是一个例子：数组不是对象，`ArrayIterator`而是事后固定的东西（甚至有多个第三方实现），因此与集合类迭代器的工作方式不太一致。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T22:41:16.903

它使 Ruby 非常灵活。数字和其他原始类型可以更改或扩展。

这也可以产生非常优雅的语法：

`5.times { print "print this 5 times" }`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-12T22:48:53.997

Ruby 中的一切都不是一个对象（是的，我知道人们在说这句话时通常是什么意思，但它仍然不完全正确）。说“Ruby 中的一切都评估为一个对象”更合适。这是一个有趣的见解，为了更恰当的阐述，我将简单地引用大卫布莱克。这是一个很好的阅读：

[http://rubylearning.com/blog/2010/09/27/almost-everything-is-an-object-and-everything-is-almost-an-object/](http://rubylearning.com/blog/2010/09/27/almost-everything-is-an-object-and-everything-is-almost-an-object/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-13T08:41:50.097

就像其他人已经指出的那样，在**Java**等其他语言中，除了对象之外还有原语。对于编译器和计算机来说，获得最高效的代码是一件好事，但是，程序员需要根据他们处理的函数和方法使用不同的函数和方法。

由于**Ruby**是为人类而非计算机设计的，因此为了人类的生产力而牺牲一点计算资源被认为是好的。因此，Ruby 从来没有区分对象和原语。它肯定也降低了新手的学习曲线。在内部，Ruby 正在使用一种称为标记指针的技术，据我所知，由于缺少原语而导致的性能损失并没有那么糟糕。

另一件值得注意的事情是，在 Ruby 中，类也是对象，这意味着即使在代码运行时，您也可以轻松地修改类及其行为。这种动态特性赋予了程序员如此大的权力，而 Ruby 代码往往看起来非常简洁。Ruby on Rails 充分利用了 Ruby 语言的这种动态特性。

# api - node.js 是否有任何用于与 SignalR 集线器通信的库？

> ID：10132800
> 
> 赞同：1
> 
> 时间：2012-04-12T22:29:09.757
> 
> 标签：api, http, node.js, signalr

我想使用 node 构建一个前端 Web 应用程序，与可能使用 .NET 工具构建的中间 API 交谈。由于 SignalR 是构建 HTTP 推送 API 的最有可能的候选者，我想知道是否已经有一个库供节点与之对话，或者我是否必须自己弄清楚一些事情（我是新手二者皆是）。

# c# - log4net 多个 adonetappender

> ID：10132802
> 
> 赞同：1
> 
> 时间：2012-04-12T22:29:10.810
> 
> 标签：c#, log4net, adonetappender

有没有办法在同一个应用程序中使用多个 ADONetAppender。目前我有一个 ado appender 记录到“日志”表。我想添加另一个 ADONetAppender 以登录到同一应用程序中的另一个表。搜索谷歌并没有返回太多帮助。

请告诉我。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T22:52:03.677

是的，在我的博客文章中：[http](http://weblogs.asp.net/stevewellens/archive/2012/01/22/log4net-log-to-a-javascript-console.aspx) ://weblogs.asp.net/stevewellens/archive/2012/01/22/log4net-log-to-a-javascript-console.aspx我使用了三个附加程序。

这是他们列出的地方：

```
<logger name="MyLogger">
  <level value="ALL" />
  <appender-ref ref="LogFileAppender"  />
  <appender-ref ref="TraceAppender"  />
  <appender-ref ref="JSConsoleAppender"  />
</logger> 
```

还有更多，但我不会在这里复制整个帖子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-08T10:41:42.267

下面是使用多个 ADO Appender 的代码只需复制您的 ado appender 并将其再次粘贴到您的配置文件中，并进行以下更改：

```
<appender name="CustomAppender" type="log4net.Appender.ADONetAppender"> 
```

两个附加程序的附加程序名称应该不同。

然后添加到根标签

```
<root>
  <appender-ref ref="ADONetAppender"/>
  <appender-ref ref="CustomAppender"/> 
```

# c# - C# 工具提示在 3d 派对窗口上报告鼠标坐标

> ID：10132804
> 
> 赞同：0
> 
> 时间：2012-04-12T22:29:24.657
> 
> 标签：c#, mouseevent

这个问题是关于一个工具提示，你可以很容易地实现它，以便
通过它的坐标跟踪鼠标位置对我来说唯一的问题是在将特定窗口设置为前景后添加跟踪坐标的能力......它不是一个表格，但是一个 3rd 方应用程序。

在 Visual Studio Windows 窗体上为我​​工作的代码是

```
ToolTip trackTip;

    private void TrackCoordinates()
    {
        trackTip = new ToolTip();
        this.MouseMove += new MouseEventHandler(Form1_MouseMove);
    }

    void Form1_MouseMove(object sender, System.Windows.Forms.MouseEventArgs e)
    {
        String tipText = String.Format("({0}, {1})", e.X, e.Y);
        trackTip.Show(tipText, this, e.Location);
    } 
```

//这是我在网上某处看到的代码，然后在谷歌搜索后又在 url 找到了 msdn 源代码：

[msdn 源地址](http://msdn.microsoft.com/en-us/library/system.windows.forms.mouseeventargs.aspx)

因此，如果您愿意回答，问题仍然存在：我如何获取第 3 方的工具提示坐标（Vs winform 窗口除外）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T23:11:54.713

您需要使用以下其中一项（如[本问题](https://stackoverflow.com/questions/4226740/how-do-i-get-the-current-mouse-coordinates-in-wpf)所述）：

1.使用 Windows 窗体。添加对 System.Windows.Forms 的引用

```
public static Point GetMousePositionWindowsForms() 
{ 
    System.Drawing.Point point = Control.MousePosition; 
    return new Point(point.X, point.Y); 
} 
```

2.使用Win32

```
[DllImport("user32.dll")] 
[return: MarshalAs(UnmanagedType.Bool)] 
internal static extern bool GetCursorPos(ref Win32Point pt); 

[StructLayout(LayoutKind.Sequential)] 
internal struct Win32Point 
{ 
    public Int32 X; 
    public Int32 Y; 
}; 
public static Point GetMousePosition() 
{ 
    Win32Point w32Mouse = new Win32Point(); 
    GetCursorPos(ref w32Mouse); 
    return new Point(w32Mouse.X, w32Mouse.Y); 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T22:44:27.370

[子类](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644898%28v=vs.85%29.aspx)化目标窗口并[监听](http://www.vbaccelerator.com/home/VB/Code/Libraries/Subclassing/SSubTimer/article.asp)[WM_MOUSEMOVE](http://msdn.microsoft.com/en-us/library/windows/desktop/ms645616%28v=vs.85%29.aspx)消息。

或者

使用计时器并抓取[鼠标屏幕坐标](http://msdn.microsoft.com/en-us/library/system.windows.forms.cursor.aspx)。

# android - 支持普通和大屏幕尺寸的PSD尺寸是多少？

> ID：10132808
> 
> 赞同：0
> 
> 时间：2012-04-12T22:29:46.747
> 
> 标签：android, layout, size, screen, psd

我正在开发一个只能支持普通和大尺寸设备以及所有密度的 Android 应用程序。我阅读了Android文档“支持多种屏幕尺寸”，但我有点困惑......我了解如何为不同的密度提供不同的资源，但不知道要使用哪个基线分辨率。HVGA 似乎很旧。

我的平面设计师想知道如何设置 .PSD 大小，以便以正确的尺寸导出图形，以支持正常和大屏幕尺寸。

假设他使用 mdpi (~160dpi)，然后他将以适当的比例因子导出 ldpi 和 hdpi 中的图像，问题是：哪个分辨率应该有 PSD？

你建议我告诉他什么？我不知道如何遵循最佳做法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T22:34:27.713

我会说您将支持的最大分辨率的大小。然后从那里缩小以降低密度（或者让操作系统处理重新缩放，但我认为你的设计师更愿意自己重新缩放。没有一个确切的分辨率，因为有多种分辨率和纵横比需要支持。只要保持任何相关图像中远离远边缘的细节，特定纵横比（或 2）的大小，例如 16:9 或 4:3，然后从那里开始往下走。

# database - 本地机器上的数据库连接

> ID：10132811
> 
> 赞同：1
> 
> 时间：2012-04-12T22:30:01.830
> 
> 标签：database, jdbc, jboss

我最初是在安装了 Apache 的服务器上编码并使用此功能连接到数据库

```
public Connection getDBConnection()
{
java.sql.Connection conn=null;
//synchrnized(this)
    try
    {
        DriverManager.registerDriver(new OracleDriver());
        conn = DriverManager.getConnection("jdbc:oracle:thin:@dukeorrac01:1521:ORDB1","nrsc","nrsc");

    }
    catch (Exception e)
    {
        e.printStackTrace();
    }

    return conn;        
} 
```

可能不是最好的方法，但它确实有效。然而，我已经开始在我的本地机器上进行编码，并且我得到了 jboss 作为一个可以使用的 IDE。我已经让一切正常（排序）除了，它似乎正在连接到不同的数据库。我得到了筋疲力尽的结果集（这是不对的）。我“认为”“getConnection("jdbc:oracle....") 是建立与实际数据库的连接的原因。

当它在远程服务器上运行良好时，为什么它不能在我的本地机器上运行？

PS我是数据库/服务器配置的新手。所以，不要以为我知道设置数据库或服务器的某些步骤。另外，我最初并没有创建这个。它是给我使用的。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T03:41:36.600

该错误似乎表明您没有正确关闭结果集。在下面的示例中，查看执行语句后如何关闭`finally`块中的这些资源。

Wrt 为什么您之前没有看到此错误可能是因为您的服务器可能有很多资源，而您的本地计算机资源有限，并且您的默认设置未修改以反映应用程序的需求。

一般来说，无论您是否在数据库上分配了足够的资源，最好进行基本的内务管理，例如关闭所有打开的结果集和语句。

```
public void getDBConnection() {
    Connection conn = null;
    Statement statement = null;
    ResultSet rs = null;

    try {
        connection  = DriverManager.getConnection("jdbc:oracle:thin:@dukeorrac01:1521:ORDB1","nrsc","nrsc");
        statment = connection.createStatement();
        statement.setFetchSize(Integer.MIN_VALUE);

        // Do more stuff, iterate to ResultSet etc...
    } catch (SQLException ex) {
        // Exception handling stuff
        ...
    } finally {
        if (rs != null) {
            try {
                rs.close();
            } catch (SQLException e) { /* ignored */}
        }
        if (statment != null) {
            try {
                statment.close();
            } catch (SQLException e) { /* ignored */}
        }
        if (conn != null) {
            try {
                conn.close();
            } catch (SQLException e) { /* ignored */}
        }
    }
} 
```

# android - 同步到网络的应用程序

> ID：10132817
> 
> 赞同：1
> 
> 时间：2012-04-12T22:30:23.440
> 
> 标签：android, ruby-on-rails, ios, json, web-services

这是一个理论问题，而不是实施问题。在您看来，创建将数据同步到服务器的移动应用程序的最佳方式是什么？

我一直在编写一个具有用户登录的应用程序，允许他们创建笔记，然后有选择地与其他用户共享它们。我一直在使用将 JSON 数据返回到我的 iOS 应用程序的 Rails Web 应用程序来执行此操作。对于这么多应用程序正在做的事情来说，这似乎是一个很大的开销。有没有更好的办法？你会怎么做，或者怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T22:43:03.057

您应该优化服务器和设备之间交换的数据量。您需要设置一个标志，指示您是否有更改，以防您需要同步。

假设您有一个应用程序允许一组用户从同一个文件更新/加载。您可以将上次更改的时间保存在服务器上，并在移动设备上保存您获得的上次更新时间。当您想要更新您的应用数据时，您可以在请求中包含上次更新的时间。如果您发送的时间和您在服务器上的时间不同，请更新；否则……什么也不做。

因为请求/响应很少（请求 = 时间；响应 = 空），所以您可以根据需要随时检查更新。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T16:06:23.567

我发现的选项被证明是最简单的，并且可以让您专注于移动开发，同时几乎忽略数据存储元素是[Parse](http://www.parse.com)。我希望我在几个月前就找到了这个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T23:45:51.573

我真的不认为将一个简单的 Rails Web 服务作为数据库的 REST 接口来维护一定有什么问题，但我可以看出这似乎是不必要的开销。您可以找到默认具有 REST 接口的数据库。这里有两个让你开始：

*   [沙发数据库](http://couchdb.apache.org/)
*   [亚马逊简单数据库](http://aws.amazon.com/simpledb/)

# ruby-on-rails - 有没有办法“注销”通过 X509 证书认证的 Rails 用户？

> ID：10132819
> 
> 赞同：0
> 
> 时间：2012-04-12T22:30:29.880
> 
> 标签：ruby-on-rails, x509

我可以通过注销操作删除 cookie，但它不会提示用户重新输入其 X509 密码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T22:38:36.930

您是在谈论他们证书的相应私钥的密码吗？如果您是，他们甚至不必为其私钥设置密码。他们在生成公钥/私钥时自行设置。

他们用于私钥的密码与您的系统无关，因此您不应该有任何方式强迫他们重新输入密码。

如果您不喜欢他们只能使用“他们拥有的东西”登录的想法，那么您还需要实现一个带有“他们知道的东西”的系统，例如密码。现在，如果您允许使用证书登录，那么实际上没有“注销”机制，除了从系统中删除证书。这通常使用 CAC 或拇指驱动器完成。证书保留在移动/可移动类型的设备上并随身携带。

# python - 将数据从 sqlite 数据库加载到 AppEngine 的 GAE 数据存储区

> ID：10132827
> 
> 赞同：0
> 
> 时间：2012-04-12T22:31:53.407
> 
> 标签：python, google-app-engine

我想知道是否可以将 sqllite 数据库上传到 GAE，以读取模式打开它，然后将数据从数据库表复制到数据存储模型。

提前致谢，罗伯托

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T23:03:35.263

我建议您采用另一种方法，您可以*在本地*使用[批量加载工具](https://developers.google.com/appengine/docs/python/tools/uploadingdata)将数据上传到 GAE 数据存储。

# javascript - Indesign 服务器脚本 Textarea.Contents

> ID：10132829
> 
> 赞同：5
> 
> 时间：2012-04-12T22:32:08.873
> 
> 标签：javascript, indesign-server

我正在创建一个用于 Indesign Server (CS3) 的 Javascript 脚本。

尝试查找文档中的所有文本区域并找到它们的内容。

使用 Adob​​e 提供的功能，我可以轻松地遍历所有文本区域。

但是，当我尝试获取 TextArea 的内容时，我只获取在该 textarea 中可见的内容，而不是输出端口文本。

```
document.TextAreas[0].contents 
```

换句话说，如果 Indesign 文档包含一个带有小加号的 textarea，表示还有更多的文本，但它不适合，那么我的脚本不会返回隐藏的文本。

或者，换个说法。当'textarea'的'overflows'属性为假时，我可以获取全部内容吗？

完整代码：

```
function FindAllTextBoxes(){
        var alertMessage;
        for (var myCounter = myDoc.textFrames.length-1; myCounter >= 0; myCounter--) {
        var myTextFrame = myDoc.textFrames[myCounter];
            alertMessage += "\nTextbox  content: " + myTextFrame.contents;
            alertMessage += "\nOverflow:" + myTextFrame.overflows;
            alert(alertMessage);
        }
} 
```

如何阅读 Textarea 的全部内容？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T14:58:24.707

有点晚了，但刚刚遇到这个。这是使用 InDesign CS5 进行测试的 - 以下行将从 a 获取所有溢出的文本`TextFrame`：

```
var content = myTextFrame.parentStory.contents; 
```

希望这可以帮助！

# javascript - setInterval 未正确处理

> ID：10132830
> 
> 赞同：0
> 
> 时间：2012-04-12T22:32:14.153
> 
> 标签：javascript, codeigniter

我想要做的是每 2 秒检查一次我的 CodeIgniter 以查看会话是否仍然存在。但是由于某种原因，当我使用以下代码时，我得到了这个错误：

> “未捕获的语法错误：意外的令牌；”

关于为什么会发生这种情况的任何想法？

Javascript：

```
 setInterval(function() {
        $.getJSON("<?=base_url()?>index.php/regUserDash/sessionExpire"), function(data) {
            var sessionState = jQuery.parseJSON('{"sessionExpired":"true","sessionExpired":"false"}');
            if(sessionState.sessionExpired === "true") {
                alert('expired');
            } else if(sessionState.sessionExpired == "false") {
                alert('not expired');
            }
        });
}, 2000); 
```

词条码：

```
public function sessionExpire() {
    if ($this->session->userdata("logged") == "1") {
        echo json_encode(array("sessionExpired" => false));
    } elseif($this->session->userdata("logged") == "0") {
        echo json_encode(array("sessionExpire" => true));
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T22:35:36.123

你在这里有一个额外的括号：

```
$.getJSON("<?=base_url()?>index.php/regUserDash/sessionExpire") // <-- 
```

这应该有效：

```
setInterval(function() {
    $.getJSON("<?=base_url()?>index.php/regUserDash/sessionExpire", function(data) {
        var sessionState = $.parseJSON('{"sessionExpired":"true","sessionExpired":"false"}');
        if (sessionState.sessionExpired === "true") {
            alert('expired');
        } else if (sessionState.sessionExpired == "false") {
            alert('not expired');
        }
    });
}, 2000);​ 
```

# php - 将 SilverStripe 安装迁移到新服务器后无法加载 /admin

> ID：10132832
> 
> 赞同：0
> 
> 时间：2012-04-12T22:32:56.153
> 
> 标签：php, silverstripe

我刚刚将 silverstripe 安装移动到新的 joyent smartos 服务器。不熟悉Linux，这还是比较容易的。

我也是 silverstripe 的新手，但这里的团队已经开发了多年。

我已经在新服务器上启动并运行了该站点，但在我们可以彻底测试它之前，我还没有将域指向它。所以我从它的IP地址访问它。该站点显示正常，子页面也可以正常工作。当我导航到“/admin”页面时，我看到一个 silverstripe 页面，指出找不到该页面（不是 Apache 404）。我从旧服务器复制了 .htaccess 和 _config.php，所以应该没有问题。

我已经完成了一个没有错误的 /dev/build 并且我可以通过安全页面登录，但是我无法让 /admin 出现。我花了整个上午在谷歌上冲浪寻找答案后迷失了方向。任何帮助将不胜感激。

更新:: 我将新版本的 silverstripe 安装到同一服务器上的子目录中。完美运行，因此排除了任何 PHP 问题。

我也试过 /index.php/admin 没有运气。

谢谢，

本

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T17:16:52.590

我也有这个问题。我在网上找到的解决方案都不适合我，但我设法弄明白了。

我让 apache 作为非标准用户运行，结果问题是网络服务器无法保存登录的会话数据。

我的解决方案是`chown root.myuser /var/lib/php/session`. 完成后，管理页面加载正常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T00:51:44.737

如果 /admin 根本没有加载并且没有 404 错误，则很有可能发生 PHP 错误。这应该记录在网络服务器的日志文件中。这将取决于您的操作系统，可能还取决于 Joyent 环境（不熟悉那种云计算）。在 Debian、Ubuntu 和其他一些系统上`/var/log/apache2/error.log`（假设您使用的是 Apache）。

如果我不得不猜测，我会说权限`assets/_combinedfiles/`不好。网络服务器尝试在那里创建一些组合的 JS 和 CSS 文件（特别是`leftandmain.js`和`cmsmain.js`），如果失败，您可能会在 /admin 中看到可怕的死亡白页。

# javascript - 在新选项卡中打开链接并且仅在新选项卡中打开

> ID：10132833
> 
> 赞同：2
> 
> 时间：2012-04-12T22:32:59.180
> 
> 标签：javascript, html, usability

我需要打开一个新选项卡或弹出窗口，然后在任何其他时间单击原始源链接时，它会更新已打开的选项卡或窗口。现在它只是不断打开一个新标签，这不是预期的行为。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T22:34:46.590

指定自定义`target`名称：

```
<a href="something.html" target="otherpage">Go to some page #1</a>
<a href="something2.html" target="otherpage">Go to some page #2</a> 
```

这将“命名”另一个窗口/选项卡并`target`在该页面中打开具有相同链接的链接，或者在新窗口/选项卡中（如果尚不存在）。`window.open`您可以通过将名称指定为第二个参数来实现相同的效果。

# java - 如何旋转 opengl 3d 对象以指向 GPS 位置（纬度、经度）？

> ID：10132834
> 
> 赞同：1
> 
> 时间：2012-04-12T22:32:59.277
> 
> 标签：java, android, opengl-es, gps, orientation

我有一个用 OpenGL 绘制的 3D 箭头，它指向坐标 (0, 0, 0)，我希望它根据我的 GPS 位置和方向指向特定的 GPS 位置。

我尝试计算方位角（使用手机的方向）并将其调整为真正的北方（而不是磁北）。

```
SensorManager.getOrientation(remappedRotationMatrix, orientation);

    // convert radians to degrees
    float azimuth = orientation[0];
    azimuth = azimuth * 360 / (2 * (float) Math.PI);
    GeomagneticField geoField = new GeomagneticField(
                 Double.valueOf(loc.getLatitude()).floatValue(),
                 Double.valueOf(loc.getLongitude()).floatValue(),
                 Double.valueOf(loc.getAltitude()).floatValue(),
                 System.currentTimeMillis());
    // converts magnetic north into true north
    azimuth -= geoField.getDeclination(); 
```

然后将方位从我的位置获取到我想要指向的位置。

```
 target.setLatitude(42.806484);
    target.setLongitude(-1.632482);

    float bearing = loc.bearingTo(target); // (it's already in degrees)
    if (bearing < 0) {
        bearing = bearing + 360;
    }

    float degrees = bearing - azimuth;
    if (degrees < 0) {
        degrees = degrees + 360;
    } 
```

并计算我必须旋转箭头的度数

```
gl.glRotatef(degrees, 0.0f, 1.0f, 0.0f);
arrow.draw(gl); 
```

有什么办法吗？另一种可能性是将 GPS 位置转换为 OpenGL 坐标并使用 GLU.gluLookAt 指向它吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T23:06:09.493

这似乎是一个纯粹的数学问题。

你的问题很模糊，如果不更准确地了解你的场景是如何设置的以及你想要什么，我认为我无法帮助你。

你知道如何使用 3D 旋转矩阵吗？如果没有，您可能应该了解它们是如何工作的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T23:21:38.250

计算方位然后将箭头旋转你得到的度数应该不复杂。我在 2D 中做了同样的事情，虽然不是在 OpenGL 中。我的代码基于 Radar 示例 (http://apps-for-android.googlecode.com/svn/trunk/Radar/)。这是我绘制二维箭头的方法：

```
 double bearingToTarget = mBearing - mOrientation;

    // Draw an arrow in direction of target
    canvas.rotate((float) bearingToTarget, center, center);
    final int tipX = center;
    final int tipY = center-radius;
    canvas.drawLine(center, center, tipX, tipY, mArrowPaint);
    final int tipLen = 30;
    final int tipWidth = 20;
    Path path = new Path();
    path.moveTo(tipX, tipY);
    path.lineTo(tipX + tipWidth/2, tipY + tipLen);
    path.lineTo(tipX - tipWidth/2, tipY + tipLen);
    path.lineTo(tipX, tipY);
    path.close();
    canvas.drawPath(path, mArrowPaint);
    canvas.restore(); 
```

mBearing 是使用 Radar 样本中的 GeoUtils.bearing 方法计算的，该方法负责复杂的数学运算。mOrientation 只是传感器侦听器的方向。所以这个想法是计算你想要指向的 GPS 位置的方位（mBearing）和手机的当前方向（mOrientation）之间的差异。这给了我们角轴承ToTarget。然后，在沿 y 轴绘制箭头之前，我们将视图围绕其中心旋转该角度。这与绘制以bearingToTarget 度数旋转的箭头相同。

在绘制箭头之前，您应该能够通过将视图围绕屏幕中心旋转 BearingToTarget 度数来在 OpenGL 中应用相同的逻辑。您旋转的确切点取决于您的视图是如何设置的。为简单起见，请将箭头的起点放在原点。然后您可以使用 glRotatef 简单地围绕原点旋转。否则，您首先需要平移到旋转中心，旋转然后再平移回来（这是用于围绕点旋转的常见 OpenGL 技术）。

# jquery - ie上的jquery .change函数

> ID：10132842
> 
> 赞同：0
> 
> 时间：2012-04-12T22:33:42.080
> 
> 标签：jquery, asp.net-mvc, internet-explorer

我在绑定到`change`Internet Explorer 中的事件时遇到问题。

我有以下代码：

```
$("#tbFechaValides").attr("disabled", "disabled");

$("#tbCodigo").change(function() {
                window.alert("ddd");
                if ($(this).val() != " ") {

                    $("#tbFechaValides").removeAttr('disabled');

                } else {
                    $("#tbFechaValides").attr("disabled", "disabled");
                }
            }); 
```

它可以在 Firefox 中运行，但是当我在 IE 中测试它时，什么也没有发生。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T22:35:10.897

将脚本包装在准备好的文档中

```
$(function(){

   $("#tbFechaValides").attr("disabled", "disabled");

   $("#tbCodigo").change(function() {
                window.alert("ddd");
                if ($(this).val() != "") {

                    $("#tbFechaValides").removeAttr('disabled');

                } else {
                    $("#tbFechaValides").attr("disabled", "disabled");
                }
    });    

}); 
```

我不知道你的 HTML 是什么样子的。但是我创建了一个带有文本框和 HTML Select 的示例，它在所有浏览器中对我来说都很好。我所做的唯一更改是将“”更改为“”

jsFiddle 示例 [http://jsfiddle.net/ptCHx/1/](http://jsfiddle.net/ptCHx/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T23:01:15.317

`console.log`对可能潜伏在其他脚本中的内容进行扫描。默认情况下，IE 会阻塞。

# matlab - 更改 FaceAlpha 时绘图边框消失

> ID：10132843
> 
> 赞同：0
> 
> 时间：2012-04-12T22:33:43.657
> 
> 标签：matlab

我正在尝试更改条形图的 FaceAlpha（使透明）。如果我喜欢这样，情节的右边界就会消失。这就是我不改变 FaceAlpha 的样子：

```
barplot = bar(xmin:binw:xmax,prob); 
```

![不改变人脸阿尔法](../Images/c9c7bd09439bef62ed8ddbb758a16ed5.png)

如果我尝试改变它，像这样：

```
barplot = bar(xmin:binw:xmax,prob);
set(get(barplot,'Child'),'FaceAlpha',0.3) 
```

右边界消失！

![没有右边框](../Images/e4f15fedd76f2b60049048403327b8e3.png)

此外，我真正想要的是使用“hist”选项制作条形图。但是后来改变 FaceAlpha 是行不通的！像这样：

```
barplot = bar(xmin:binw:xmax,prob,'hist');
set(get(barplot,'Child'),'FaceAlpha',0.3) //This row has no effect 
```

![没有 FaceAlpha 效果](../Images/846877317282a60f35580863c7f3ff2b.png)

任何想法为什么这不起作用？

先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T08:24:03.310

在这里找到了消失边界的解决方案，并且有效：

[http://www.mathworks.se/support/solutions/en/data/1-5X41G7/index.html](http://www.mathworks.se/support/solutions/en/data/1-5X41G7/index.html)

问题仍然存在，为什么在使用“hist”选项时无法更改 FaceAlpha。

# c# - 如何将图表从 WPF 工具包（MS Chart）导出到 PNG。它不起作用，它只创建一个黑色 PNG

> ID：10132845
> 
> 赞同：0
> 
> 时间：2012-04-12T22:33:52.507
> 
> 标签：c#, wpf, png, wpftoolkit, mschart

我无法将 MS Chart（来自 WPF 工具包）导出到 PNG。我遵循不同论坛的步骤，但毕竟，我的 PNG 完全是黑色的。我究竟做错了什么？

```
private void export_graf_Click(object sender, RoutedEventArgs e)
        {
            if (mcChart.Series[0] == null)
            {
                MessageBox.Show("there is nothing to export");
            }
            else
            {

           RenderTargetBitmap renderBitmap = new RenderTargetBitmap((int)mcChart.ActualWidth,    (int)mcChart.ActualHeight, 95d, 95d, PixelFormats.Pbgra32);

                renderBitmap.Render(mcChart);

                Microsoft.Win32.SaveFileDialog uloz_obr = new Microsoft.Win32.SaveFileDialog();
                uloz_obr.FileName = "Graf";
                uloz_obr.DefaultExt = "png";

                Nullable<bool> result = uloz_obr.ShowDialog();
                if (result == true)
                {
                    string obr_cesta = uloz_obr.FileName; //cesta k souboru

              using (FileStream outStream = new FileStream(obr_cesta, FileMode.Create))
                    {
                        PngBitmapEncoder encoder = new PngBitmapEncoder();
                        encoder.Frames.Add(BitmapFrame.Create(renderBitmap));
                        encoder.Save(outStream);
                    }

                } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T15:48:08.223

我认为您遇到了布局问题。该类`RenderTargetBitmap`在视觉层上工作，其中包括从其视觉父级继承的偏移和变换。将可视元素呈现为`BitmapFrame`. 您还可以指定背景颜色而不影响窗口的可视树，除非您想要透明背景。PNG 格式支持 alpha 透明度，一些图像查看器将透明像素显示为黑色。

WPF 的默认 dpi 是 96。我不知道您为什么指定 95。这不是零界限索引或类似的东西。下面的示例使用 96dpi。

```
private void export_graf_Click(object sender, RoutedEventArgs e)
{
    if (mcChart.Series[0] == null)
    {
        MessageBox.Show("there is nothing to export");
    }
    else
    {
        Rect bounds = VisualTreeHelper.GetDescendantBounds(mcChart);

        RenderTargetBitmap renderBitmap = new RenderTargetBitmap((int)bounds.Width, (int)bounds.Height, 96, 96, PixelFormats.Pbgra32);

        DrawingVisual isolatedVisual = new DrawingVisual();
        using (DrawingContext drawing = isolatedVisual.RenderOpen())
        {
            drawing.DrawRectangle(Brushes.White, null, new Rect(new Point(), bounds.Size)); // Optional Background
            drawing.DrawRectangle(new VisualBrush(mcChart), null, new Rect(new Point(), bounds.Size));
        }

        renderBitmap.Render(isolatedVisual);

        Microsoft.Win32.SaveFileDialog uloz_obr = new Microsoft.Win32.SaveFileDialog();
        uloz_obr.FileName = "Graf";
        uloz_obr.DefaultExt = "png";

        Nullable<bool> result = uloz_obr.ShowDialog();
        if (result == true)
        {
            string obr_cesta = uloz_obr.FileName;

            using (FileStream outStream = new FileStream(obr_cesta, FileMode.Create))
            {
                PngBitmapEncoder encoder = new PngBitmapEncoder();
                encoder.Frames.Add(BitmapFrame.Create(renderBitmap));
                encoder.Save(outStream);
            }
        }
    }
} 
```

# sql - 如何查看运行 SQL 存储过程的进度？

> ID：10132847
> 
> 赞同：22
> 
> 时间：2012-04-12T22:34:13.123
> 
> 标签：sql, tsql, ssms

考虑以下存储过程..

```
CREATE PROCEDURE SlowCleanUp (@MaxDate DATETIME)
AS
BEGIN
    PRINT 'Deleting old data Part 1/3...'
    DELETE FROM HugeTable1 where SaveDate < @MaxDate

    PRINT 'Deleting old data Part 2/3...'
    DELETE FROM HugeTable2 where SaveDate < @MaxDate

    PRINT 'Deleting old data Part 3/3...'
    DELETE FROM HugeTable3 where SaveDate < @MaxDate

    PRINT 'Deleting old data COMPLETED.'
END 
```

假设每个删除语句都需要很长时间才能删除，但我喜欢在 SQL Management Studio 中运行此存储过程时查看它的进度。换句话说，我喜欢查看 PRINT 语句的输出，以了解我在任何给定时间的位置。但是，似乎我只能在整个运行结束时看到 PRINT 输出。有没有办法让我可以实时看到 PRINT 输出？如果没有，还有其他方法可以查看正在运行的存储过程的进度吗？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-04-12T22:40:25.720

如果您使用[`RAISERROR`](http://msdn.microsoft.com/en-us/library/ms178592.aspx)10 或更低的严重性并使用该`NOWAIT`选项，它将立即向客户端发送一条信息性消息：

`RAISERROR ('Deleting old data Part 1/3' , 0, 1) WITH NOWAIT`

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-12T22:41:05.687

[是的，如果您使用RAISERROR](http://msdn.microsoft.com/en-us/library/ms178592.aspx)，您应该能够立即打印消息：

`RAISERROR('Hello',10,1) WITH NOWAIT`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-08-13T16:43:12.393

我找到了一种很棒的非侵入式方式来查看运行存储过程的进度。使用我在 SP_WHO2 的 Stackoverflow 上找到的代码，您可以看到第一列包含实际从 PROC 运行的当前代码。每次你重新运行这个 SP_Who2 进程时，它都会显示当时运行的代码。这会让你随时知道你的进程有多远。这是我修改的 sp_who2 代码，以便更容易跟踪进度：

```
Declare @loginame sysname = null
DECLARE @whotbl TABLE 
    ( 
      SPID        INT    NULL 
     ,Status    VARCHAR(50)    NULL 
     ,Login        SYSNAME    NULL 
     ,HostName    SYSNAME    NULL 
     ,BlkBy        VARCHAR(5)    NULL 
     ,DBName    SYSNAME    NULL 
     ,Command    VARCHAR(1000)    NULL 
     ,CPUTime    INT    NULL 
     ,DiskIO    INT    NULL 
     ,LastBatch VARCHAR(50)    NULL 
     ,ProgramName VARCHAR(200)    NULL 
     ,SPID2        INT    NULL 
     ,RequestID INT    NULL 
     ) 
    INSERT INTO @whotbl 
     EXEC sp_who2  @loginame = @loginame 

    SELECT CommandText = sql.text ,
           W.*  
          ,ExecutionPlan   = pln.query_plan 
          ,ObjectName  = so.name  
          ,der.percent_complete 
          ,der.estimated_completion_time 
          --,CommandType =der.command 
      FROM @whotbl  W 
 LEFT JOIN sys.dm_exec_requests der 
        ON der.session_id = w.SPID 
       OUTER APPLY SYS.dm_exec_sql_text (der.sql_handle) Sql 
       OUTER APPLY sys.dm_exec_query_plan (der.plan_handle) pln 
 LEFT JOIN sys.objects so 
```

我希望我记得我从谁那里得到了这个原始代码，但它非常有帮助。如果我需要终止进程，它还会识别 SPID。

# java - JLabel setText 不更新文本

> ID：10132859
> 
> 赞同：5
> 
> 时间：2012-04-12T22:35:29.237
> 
> 标签：java, swing, user-interface, jlabel

我正在尝试使用该`setText()`方法更新 JLabel，但无法重绘 JLabel。我必须使用该`repaint()`方法吗？

这是代码的一部分，我没有收到任何错误，但它没有更新 JLabel。

```
public void actionPerformed(ActionEvent e) {
    fc = new JFileChooser();
    if(e.getSource() == addButton) {
         int returnVal = fc.showOpenDialog(Main.this);
         if (returnVal == JFileChooser.APPROVE_OPTION) {
                filesList = fc.getSelectedFiles();
                setFilesList(filesList);

                StringBuilder logString = new StringBuilder();
                logString.append("Files to Convert " + "\n");
                for(int i = 0; i < getFiles().length; i++) {
                    logString.append(filesList[i].getAbsolutePath());
                }
                //JLabel log = new JLabel(); created above.
                log.setText(logString.toString());
            } else {
                //log.append("Open command cancelled by user." + newline);
        }
        //log.setCaretPosition(log.getDocument().getLength());
    }
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-12T22:51:59.637

JLabel 不需要重绘调用。只需调用 setText(...) 将更改标签的文本，这就是所有需要的。

我想知道您的问题是否是并发问题，您正在 Swing 事件线程上执行长时间运行的过程，这会阻止您的标签更新其文本。

如果是这样，那么考虑在后台线程（例如 SwingWorker 提供的线程）中执行长时间运行的进程，然后在 Swing 线程上更新 JLabel 的文本，例如可以通过 SwingWorker 的发布/处理方法完成。

有关这方面的更多信息，请查看[课程：Swing 中的并发](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/)教程。

此外，Mario De... 关于无法在 JLabel 上打印简单的换行符是正确的。1+他的回答。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-12T22:47:53.403

我对框架/组件的重绘如何在 Java 中工作感到有些困惑。你可以`Paint(Graphics g)`，`update(Graphics g)`根据 javadoc 只是调用`paint(g)`。最后还有`repaint()`...

如果这些似乎都不起作用，那么仅在您当前尝试设置文本的行创建标签不是更容易吗？

编辑：还可以选择使用不可编辑的 textArea。它不仅可以显示标准的换行符，还可以放在jScrollPane中，这在日志中有很多文件时很方便，并且不需要重新绘制文本组件来显示更新的文本。奖金是宏伟的imo...

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-07-01T11:35:12.677

我遇到了类似的问题。在将我的 JFrame 放在那里之前，我尝试`setText("Good Bye")`在`actionPerformed()`退出按钮 ActionListener 中插入，但文本没有改变。

最终我意识到我的标签没有得到更新，因为我在匿名 ActionListener 类中处理框架。在我让代码离开`ActionListener.actionPerformed()`后，标签文本得到了更新。

我不得不在一个新线程中处理我的 JFrame 以确保：

1.  `actionPerformed`完成，以便主线程从匿名嵌套类返回并更新主类中的标签。

2.  启动一个新线程，等待一秒钟以允许读取“再见”。

3.  这个新线程配置框架。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-04-12T22:53:40.103

这个简单的例子对我有用，所以问题不是`JLabel`源代码其他部分的一些错误。请发布完整的源代码。

```
import java.awt.BorderLayout;
import java.awt.Button;
import java.awt.GridLayout;
import java.awt.Panel;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.JFrame;
import javax.swing.JLabel;

public class Application {

public static void main(String[] args) {
    JFrame frame = new JFrame("JLabel test");
    frame.setVisible(true);
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

    Panel p = new Panel();
    p.setLayout(new GridLayout());

    Button button = new Button("Change");
    final JLabel label = new JLabel(Long.toString(Long.MAX_VALUE));

    button.addActionListener(new ActionListener() {
        @Override
        public void actionPerformed(ActionEvent e) {
            label.setText(Long.toString(e.getWhen()));
        }
    });

    p.add(button);
    p.add(label);
    frame.add(p, BorderLayout.NORTH);
    frame.pack();

}
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-05-22T09:11:22.800

`repaint()`不会在这里工作。

只需使用`label_name.paintImmediately(label_name.getVisibleRect());`

它将立即更新。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-09-27T06:07:31.503

请试试 -

```
jlabel.setText("Your Text");
jLabel.setVisisble(true); 
```

# webserver - 访问图片、css、js等的最佳解决方案

> ID：10132861
> 
> 赞同：-1
> 
> 时间：2012-04-12T22:35:31.363
> 
> 标签：webserver

Apache 使用太多内存，我想设置一个单独的服务器**（http://assets.domain.com）**

我可以在 Ubuntu 服务器上设置什么网络服务器来提供快速的内容？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T08:49:19.170

看看 nginx 或 lighttpd

# ruby-on-rails - rails app 使用 postgresql 显示 PG::Error

> ID：10132862
> 
> 赞同：2
> 
> 时间：2012-04-12T22:35:31.817
> 
> 标签：ruby-on-rails, postgresql

我刚开始使用一个新的 Rails 应用程序

```
rails new myapp --database=postgresql 
```

然后我生成一些静态页面：

```
rails g controller StaticPages home about 
```

当我启动服务器并访问 localhost:3000/static_pages/home 时，PG::Error 出现：

```
PG::Error

could not connect to server: Connection refused (0x0000274D/10061)
Is the server running on host "localhost" (::1) and accepting
TCP/IP connections on port 5432?
could not connect to server: Connection refused (0x0000274D/10061)
Is the server running on host "localhost" (127.0.0.1) and accepting
TCP/IP connections on port 5432? 
```

我没有改变其他任何东西

知道如何使 postgresql 工作吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T22:38:56.733

看起来您的 postgres 服务器没有运行。你启动了吗？如果您检查您的系统进程，您是否看到 postgres 守护进程正在运行？

如果您正在尝试使用 rails + postgres，我建议您查看[Pete Cooper 的这个精彩视频。](http://www.rubyinside.com/how-to-install-and-use-postgres-on-os-x-for-ruby-and-rails-development-4999.html)

# javascript - 获取网站二级域名的方法？

> ID：10132868
> 
> 赞同：0
> 
> 时间：2012-04-12T22:36:29.103
> 
> 标签：javascript, url, dns, mailto, hostname

你知道通过类似的 javascript 获取网站二级域的方法`document.location.hostname`吗？

我想创建一个 mailto 小书签，它从字符串“info@”和二级域生成一个电子邮件地址。document.location.hostname 的问题是“www”。字首。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-14T09:14:12.240

负数可以从末尾切片，得到二级域：

```
var domain=location.hostname.split('.').slice(-2).join('.'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T22:41:20.997

又快又脏……

```
var domain = location.hostname.split('.').slice(1).join('.'); 
```

但这只会剥离第一部分。如果您有多个级别的服务器名称，那是行不通的。通过你应该能够弄清楚。

# javascript - 有没有办法摆脱 dijit.form.multiselect 中的垂直滚动条？

> ID：10132872
> 
> 赞同：0
> 
> 时间：2012-04-12T22:36:48.793
> 
> 标签：javascript, dojo, scrollbar, multi-select

查看文档后，似乎没有明显的方法可以摆脱垂直滚动条，即使 multiSelect 小部件为空（没有选项），滚动条仍然存在。如果有人能解释如何删除它，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T11:38:11.613

Dojo 的多选使用`<select multiple='true'>`并且您不能从该 html 元素中删除滚动条。

[在 <select> 元素中隐藏垂直滚动条](https://stackoverflow.com/questions/4531269/hide-vertical-scrollbar-in-select-element)

# jquery - JQuery UI Draggable - 更改放置的辅助元素的 html

> ID：10132873
> 
> 赞同：1
> 
> 时间：2012-04-12T22:37:08.063
> 
> 标签：jquery, jquery-ui, jquery-ui-draggable

我有一个问题，我需要在放置时更改可拖动辅助元素的 html，如下所示？有什么建议么？

```
 <ul id="submenu">
            <li><div class="thumb"></div></li>
            <li><div class="thumb"></div></li>                                  
        </ul>

        <ul id="sortable">
            <li></li>
        </ul>

        --------------
        --------------

    // #### DRAGGABLE ####
$(".thumb").draggable({
    helper: "clone",
    appendTo: 'body',
    connectToSortable: "ul#sortable",
    revert: "invalid",
    stop: function(event,ui) {

        -- -------------------------------- --
        -- Change html of ui.helper here ?? --
        -- -------------------------------- --

    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T22:52:24.677

您不能为可拖动元素设置 ondrop 事件。你应该在可丢弃的一面做。

```
$("#drop").droppable({
    drop : function(event,ui) {
         //do what you want with ui.helper
    }
}); 
```

# php - 给申请人的提醒电子邮件

> ID：10132874
> 
> 赞同：1
> 
> 时间：2012-04-12T22:37:39.707
> 
> 标签：php, mysql, cron

我有一个应用程序系统，用户可以在其中保存他们的信息但不能提交。显然，如果他们没有在截止日期之前提交所有内容，则需要提醒他们。我可以做到这一点的基本方法是，如果它已提交，那么我的数据库中的一个字段可以标记为 1。但是，如果它是 0，我希望发送一封电子邮件来提醒他们。

更复杂的是，从截止日期前 4 周开始，我希望那周收到一封电子邮件，截止日期前 3 周收到两封电子邮件，依此类推，直到他们在截止日期前 1 周收到四封电子邮件。（显然分散在一周内）。

我觉得每周只做一次对我来说可能已经够复杂了，因为我还是新手！

研究它看起来好像我需要一个 Cronjob，但如果有办法避免这种情况（触发器），那就更好了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T14:25:26.790

Cron 作业起初令人生畏，相关过程可能看起来很困难，但可以分解成碎片。此外，脚本会随着您学习和思考要包含的内容而增长。不知道你的数据库结构，也许大纲会让你开始。

决定脚本的运行频率（每天、每 6 小时等）
许多主机使用 cPanel 进行管理。它有一个与 Cron Jobs 一起使用的图标，以及简单或专家设置模式的选择。它也可能有示例设置。您将输入日、月、年、小时和分钟的数字或 *（星号）以包括所有可能的数字。
另一个对初学者来说很难的项目是用于告诉服务器如何处理以及处理什么文件的命令。它需要大量阅读和反复试验。
一个例子：php -q /home/your_account_name/public_html/admin/yourfile_cron.php（你的服务器上的开头可能不同）

在脚本中：（
使用完整的路径详细信息以避免以后出现问题，如上面以：/home开头。 ..)

1.  设置一些常量（调试文件、数据库密码文件等）
    使用 fopen 和 fwrite 记录您不会在屏幕上看到的内容
2.  首先查询数据库以查找用户的姓名和电子邮件以进行发送
3.  处理结果查询及其数据
4.  建立电子邮件
5.  发送电子邮件
    根据服务器，选择邮件程序。在某些情况下，mail() 不会发送到本地主机之外。（PHP Mailer 是一个选项）
6.  使用文件运行和发送的结果更新数据库

您可以通过在浏览器中访问脚本并包含一些“回声”来运行脚本进行测试。cron 作业通常没有（或不需要）屏幕输出。在测试期间，我使用自己的电子邮件作为静态收件人。

希望这能让你开始。这是一项艰巨的任务，需要几天的时间来实施。但是，当它最终按照您的要求执行时，您会发现它是有益的！

# iphone - iPhone 企业计划是否允许我对超过 100 台设备进行 beta 测试？

> ID：10132875
> 
> 赞同：1
> 
> 时间：2012-04-12T22:38:08.153
> 
> 标签：iphone, ios, enterprise, iphone-developer-program

iPhone 企业计划是否允许我对超过 100 台设备进行 beta 测试？我希望制作一个需要多轮 beta 测试的应用程序。例如 5 轮 30 轮。据我所知，常规开发人员计划没有解决方法。

企业计划是否允许我实现这一目标？如果是这样，获得企业计划的批准是否会更加困难？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T22:44:52.137

根据这个答案和 Apple 的文档，您可以分发应用程序的设备数量没有限制。 [iOS 企业内部部署需要设备 ID？](https://stackoverflow.com/questions/4647309/ios-enterprise-in-house-deployment-need-for-device-ids)

[https://developer.apple.com/library/ios/#featuredarticles/FA_Wireless_Enterprise_App_Distribution/Introduction/Introduction.html](https://developer.apple.com/library/ios/#featuredarticles/FA_Wireless_Enterprise_App_Distribution/Introduction/Introduction.html)

# 注意

Enterprise Programm 让您在公司内部测试和分发您的应用程序，而不是在外部销售。

但是，当然，您可以购买它，在数百台设备上测试您的应用程序，而不是购买开发者计划并在 App Store 中销售您的应用程序。

# java - 在类之间传递 MediaPlayer 对象时出现 NullPointerException

> ID：10132876
> 
> 赞同：0
> 
> 时间：2012-04-12T22:38:17.943
> 
> 标签：java, android, nullpointerexception, media-player

我正在尝试从另一个课程中获取我的 MediaPlayer 的内容，但每次我尝试它时，它都会给我一个 NullPointerException，我不确定我做错了什么。这是我在另一个类中设置的方法：

```
public MediaPlayer getName(int number) {

    switch (number) {

        case 1:
            mp = MediaPlayer.create(getApplicationContext(), R.raw.john);

        break;

    }

    return mp;

} 
```

所以在我的另一堂课上，我试图像这样检索它......

```
mp = myNameList.getName(number); 
```

因此，我将原始类中的 MediaPlayer 实例设置为从 NameList 类中检索到的数据。只要我做任何事情，我都会在 getName 方法上得到 NullPointerException。有没有更好的方法来提取这些数据并将其设置在另一个类中？如果这个问题到处都是，我很抱歉，但我真的很难处理这个问题！

提前谢谢你们！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T01:13:17.203

如果`number != 1`，则 mp 将永远不会被初始化为新的 MediaPlayer 对象。另外，你确定这`myNameList`不是空的吗？

# c# - Silverlight WCF RIA 服务项目中的代码生成

> ID：10132880
> 
> 赞同：0
> 
> 时间：2012-04-12T22:38:44.657
> 
> 标签：c#, .net, silverlight, wcf-ria-services

我有一个使用 wcf ria 服务连接到服务器的 silverlight 4 项目。我有一个需要在客户端（silverlight）和服务器上使用的公共类。实现这一目标的最佳方法是什么？

我尝试在服务器上使用 .shared.cs 文件约定以及链接文件（原始文件在服务器上）。客户认为有一个重复的类，所以我将其更改为部分类（我不想这样做）。然后它抱怨重复的属性，所以我尝试了[这个堆栈溢出问题](https://stackoverflow.com/questions/3768779/silverlight-shared-classes-in-ria-service-causing-build-errors-the-type-x-alr)的解决方案。我在使用此解决方案时遇到的问题是无法访问服务器上原始类中的枚举。

我还尝试创建一个其他项目都可以引用的类库项目（silverlight 客户端和服务器）。问题是找到一种项目类型来创建两个项目都可以引用。Silverlight 抱怨非 silverlight 项目，反之亦然。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T00:45:12.930

我认为这里最好的解决方案是在解决方案中创建一个新项目（您可以将其称为 Helpers、Common 等）并在客户端和服务器项目中添加引用。这样，您将在两者中使用相同的类，并且如果您更改类的结构，它将影响两个项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T09:51:04.443

我不确定您的问题来自哪里（您无法访问您的枚举是什么意思？）但是您可能会发现.NET 支持一种称为[程序集共享](http://blogs.msdn.com/b/dotnet/archive/2009/12/01/sharing-silverlight-assemblies-with-net-apps.aspx)的功能，该功能旨在共享一些基本类型跨越 silverlight 和 .net。请记住，您应该引用 Silverlight 程序集，而不是 silverlight 项目。如果这破坏了您的编译顺序，请在您的 csproj 文件中添加一个“假”项目引用，如下所示：

```
<ProjectReference Include="..\MySilverlightSharedProject.csproj">
  <ReferenceOutputAssembly>false</ReferenceOutputAssembly>
</ProjectReference> 
```

如此[处所述](http://blogs.msdn.com/b/visualstudio/archive/2010/12/21/incorrect-solution-build-ordering-when-using-msbuild-exe.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T19:35:07.173

您是否考虑过使用[便携式库扩展工具](http://visualstudiogallery.msdn.microsoft.com/b0e0b5e9-e138-410b-ad10-00cb3caf4981)。

从[这里](http://msdn.microsoft.com/en-us/library/gg597391.aspx)引用，可移植类库项目使您能够编写和构建在多个 .NET Framework 平台上工作的托管程序集。

# python - 如何将命令行参数从一个python模块传递到另一个

> ID：10132881
> 
> 赞同：7
> 
> 时间：2012-04-12T22:38:45.493
> 
> 标签：python

我正在为接受命令行参数的模块编写单元测试。我在模块中使用 optparse 来接受参数。

所以当我直接执行模块时，我只需输入：-

```
module.py -e 42 -g 84 
```

到目前为止，在我的单元测试中，我只是创建了一个模块实例来进行测试，然后调用一个特定的方法：-

```
instance = module.className()
instance.method() 
```

有人可以告诉我如何将命令行参数从另一个模块（例如单元测试）传递给 module.py 吗？

我是否在我的单元测试中使用 optparse 并在生成 module.py 的实例时以某种方式合并？

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-12T23:58:18.893

您只需修改`sys.argv`代表命令行参数列表的列表。这个列表对于 python 解释器是全局的，所以你不必传递它。

```
import sys
from optparse import OptionParser

parser = OptionParser()
parser.add_option("-e")
parser.add_option("-g")

print sys.argv # unmodified
(options, args) = parser.parse_args()
print (options, args)

sys.argv = ['module.py','-e','42','-g','84'] # define your commandline arguments here

(options, args) = parser.parse_args()
print (options, args) 
```

注意：不推荐使用 OptionParser 模块，因此如果可能，请切换到`argparse`（请参阅：[http](http://docs.python.org/library/argparse.html#module-argparse) ://docs.python.org/library/argparse.html#module-argparse ）。您只需要 Python 2.7。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T22:56:05.623

三种选择：

1) 使用一些 shell，而不是固定在 100% Python 上。

2）根据需要传递 sys.argv （也许是一个类似工作的向量）

3) 调用命令行选项调度程序调用的函数

# powershell - 在 PowerShell 中获取 %AppData% 的路径

> ID：10132883
> 
> 赞同：118
> 
> 时间：2012-04-12T22:38:56.027
> 
> 标签：powershell, scripting

如何`C:\Users\User\AppData\Roaming`在 PowerShell 中获取应用程序数据目录（例如）的路径？

* * *

## 回答 #1

> 赞同：201
> 
> 时间：2012-04-12T22:43:58.173

这是最短的方法：

```
$env:APPDATA 
```

或本地应用数据：

```
$env:LOCALAPPDATA 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-04-12T22:39:19.070

要获取 AppData 目录，请使用以下`GetFolderPath`方法：

```
[Environment]::GetFolderPath([Environment+SpecialFolder]::ApplicationData) 
```

或者正如安迪在他的评论中提到的那样，简单地说：

```
[Environment]::GetFolderPath('ApplicationData') 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-08-21T16:53:08.027

```
$TempInstallerPath="$Env:USERPROFILE\AppData\Local\Downloaded Installations"
if(Test-Path $TempInstallerPath)
{
    Remove-Item "$TempInstallerPath\*" -Recurse -Force -ErrorAction 0
} 
```

# android - 优化Androidplot

> ID：10132885
> 
> 赞同：6
> 
> 时间：2012-04-12T22:39:17.557
> 
> 标签：android, graph, androidplot

似乎 Androidplot (androidplot.com) 网站/论坛已关闭，所以我会尝试在这里问这个问题。

我有多点触控缩放和滚动。[与http://mlepicki.com/2012/03/androidplot-multitouch-zoom-scroll/](http://mlepicki.com/2012/03/androidplot-multitouch-zoom-scroll/)类似的代码，只是我有一个条形图。但是，对于 100 个数据点，它有明显的滞后。即使有 10 个酒吧也只是显示。听起来像它的绘图/计算/等所有条形图。

关于如何优化它的任何想法？

我不能使用硬件渲染，因为我想支持 Android 2.1 并且库不支持它（它坏了）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-18T04:35:14.243

我制作了一个自定义渲染器来解决我的滞后问题。似乎流畅了许多。此代码基于版本 0.5。不知道它是否适用于 v0.51。

```
import android.graphics.*;
import com.androidplot.exception.PlotRenderException;
import com.androidplot.series.XYSeries;
import com.androidplot.util.ValPixConverter;
import com.androidplot.xy.BarFormatter;
import com.androidplot.xy.XYPlot;
import com.androidplot.xy.XYSeriesRenderer;

import java.util.List;
import java.util.Map;
import java.util.TreeMap;

/**
 * Renders a point as a Bar
 */
public class OptimisedBarRenderer extends XYSeriesRenderer<BarFormatter> {

    private BarWidthStyle style = BarWidthStyle.FIXED_WIDTH;
    private float barWidth = 5;

    public OptimisedBarRenderer(XYPlot plot) {
        super(plot);
    }

    /**
     * Sets the width of the bars draw.
     * @param barWidth
     */
    public void setBarWidth(float barWidth) {
        this.barWidth = barWidth;
    }

    private final TreeMap<Number, XYSeries> tempSeriesMap = new TreeMap<Number, XYSeries>();

    @Override
    public void onRender(Canvas canvas, RectF plotArea) throws PlotRenderException {
        int longest = getLongestSeries();
        if(longest == 0) {
            return;  // no data, nothing to do.
        }
        tempSeriesMap.clear();

        for(int i = 0; i < longest; i++) {
            tempSeriesMap.clear();
            List<XYSeries> seriesList = getPlot().getSeriesListForRenderer(this.getClass());
            for(XYSeries series : seriesList) {
                if(i < series.size()) {
                    tempSeriesMap.put(series.getY(i), series);
                }
            }
            drawBars(canvas, plotArea, tempSeriesMap, i);
        }
    }

    @Override
    public void doDrawLegendIcon(Canvas canvas, RectF rect, BarFormatter formatter) {
        canvas.drawRect(rect, formatter.getFillPaint());
        canvas.drawRect(rect, formatter.getBorderPaint());
    }

    private int getLongestSeries() {
        int longest = 0;
        List<XYSeries> seriesList = getPlot().getSeriesListForRenderer(this.getClass());

        if(seriesList == null)
            return 0;

        for(XYSeries series :seriesList) {
            int seriesSize = series.size();
            if(seriesSize > longest) {
                longest = seriesSize;
            }
        }
        return longest;
    }

    private void drawBars(Canvas canvas, RectF plotArea, TreeMap<Number, XYSeries> seriesMap, int x) {
//        Paint p = new Paint();
//        p.setColor(Color.RED);

        Object[] oa = seriesMap.entrySet().toArray();
        Map.Entry<Number, XYSeries> entry;
        Number yVal = null;
        Number xVal = null;

        float halfWidth = barWidth * 0.5f;

        for(int i = oa.length-1; i >= 0; i--) {
            entry = (Map.Entry<Number, XYSeries>) oa[i];
            XYSeries tempEntry = entry.getValue();

            if(tempEntry != null) {
                yVal = tempEntry.getY(x);
                xVal = tempEntry.getX(x);

                if (yVal != null && xVal != null) {  // make sure there's a real value to draw
                    switch (style) {
                        case FIXED_WIDTH:
                            float pixX = ValPixConverter.valToPix(xVal.doubleValue(), getPlot().getCalculatedMinX().doubleValue(), getPlot().getCalculatedMaxX().doubleValue(), plotArea.width(), false) + plotArea.left;

                            float left = pixX - halfWidth;
                            float right = pixX + halfWidth;

                            boolean offScreen = left > plotArea.right || right < plotArea.left;

                            if(!offScreen){
                                float pixY = ValPixConverter.valToPix(yVal.doubleValue(), getPlot().getCalculatedMinY().doubleValue(), getPlot().getCalculatedMaxY().doubleValue(), plotArea.height(), true) + plotArea.top;

                                BarFormatter formatter = getFormatter(tempEntry);
                                if(Math.abs (left - right) > 1f){//Don't draw as it will be hidden anyway.
                                    canvas.drawRect(left, pixY, right, plotArea.bottom, formatter.getFillPaint());
                                }
                                canvas.drawRect(left, pixY, right, plotArea.bottom, formatter.getBorderPaint());

                            }
                            break;
                        default:
                            throw new UnsupportedOperationException("Not yet implemented.");
                    }
                }
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-12-16T18:09:10.697

`BarRenderer`在 Androidplot 1.4.0 中进行了相当多的优化，因此不再需要自定义渲染器。

# android - 通过单击按钮构建活动

> ID：10132888
> 
> 赞同：0
> 
> 时间：2012-04-12T22:39:32.660
> 
> 标签：android, json, android-intent

我基于方法中发送的 JSON 对象构建了一个 UI。每次运行该方法时，都会在 UI 中添加一个新行。我需要我的 chartsButtonListener 才能访问 JSONObject `question`。

```
public void buildQuestions(JSONObject question) throws JSONException {
    LayoutInflater inflater = (LayoutInflater) getActivity().
    getSystemService(Context.LAYOUT_INFLATER_SERVICE);

    questionContainer = (TableLayout) mainLayout.findViewById(R.id.questionContainer);

    View questionBox = inflater.inflate(R.layout.question, null);
    questionBox.setId(Integer.parseInt(question.getString("id")));
    TextView title = (TextView) questionBox.findViewById(R.id.questionTextView);
    title.setText(question.getString("title"));

    //omitted code for verbosity

    Button chartsButton = (Button) questionBox.findViewById(R.id.chartsButton);

    Button submitButton = (Button) questionBox.findViewById(R.id.submitButton);
    chartsButton.setOnClickListener(chartsListener);
    submitButton.setOnClickListener(submitListener);

    TableRow tr = (TableRow) questionBox;
    TableLayout.LayoutParams trParams = new TableLayout.LayoutParams(
    TableLayout.LayoutParams.MATCH_PARENT,
    TableLayout.LayoutParams.MATCH_PARENT);
    trParams.setMargins(leftMargin, topMargin, rightMargin, bottomMargin);
    tr.setLayoutParams(trParams);   
    LinearLayout progressRow = (LinearLayout) mainLayout.findViewById(R.id.progressRow);
    progressRow.setVisibility(View.GONE);
    questionContainer.addView(tr);
}

public OnClickListener chartsListener = new OnClickListener() {
    public void onClick(View v) {
        Intent chart = new Intent();
        chart.setClass(getActivity(), Chart.class);
        Log.v("", v.getParent().getClass().toString());//returns the TableRow
        startActivity(chart);
    }   
}; 
```

我对 put extra 很熟悉，但最好是直接将问题对象直接传递给听众，这样我就可以将其转发给 Intent。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T22:46:00.263

您可以使用 View.setTag(Object) 将任意对象关联到视图。

chartButton.setTag(问题);

在您的 onClick 中，您可以执行以下操作： Question q = (Question) v.getTag();

# javascript - 修改标签类的调试方法

> ID：10132890
> 
> 赞同：1
> 
> 时间：2012-04-12T22:39:42.213
> 
> 标签：javascript, css

我正在尝试使用 javascript 和 css 制作一个按钮，当单击该按钮时，它将更改被单击元素的类，以使用户清楚它是当前选定的按钮。

页面上有四个按钮。我还没有实施第四个。蛮力代码（显示后）正在工作。

```
function selected_button(opCode){
    switch(opCode){
        case 1:
            document.getElementById('button1').className += "selected";
            document.getElementById('button2').className = document.getElementById("button2").className.replace( /(?:^|\s)selected(?!\S)/ , '' );
            document.getElementById('button3').className = document.getElementById("button3").className.replace( /(?:^|\s)selected(?!\S)/ , '' );
            document.getElementById('button4').className = document.getElementById("button4").className.replace( /(?:^|\s)selected(?!\S)/ , '' );
            break;
        case 2: //Really similar to case 1 but shifted numbers around
            document.getElementById('button2').className += "selected";
            document.getElementById('button1').className = document.getElementById("button1").className.replace( /(?:^|\s)selected(?!\S)/ , '' );
            document.getElementById('button3').className = document.getElementById("button3").className.replace( /(?:^|\s)selected(?!\S)/ , '' );
            document.getElementById('button4').className = document.getElementById("button4").className.replace( /(?:^|\s)selected(?!\S)/ , '' );
            break;
        default: //really similar to case 1 but shifted numbers around
            document.getElementById('button3').className += "selected";
            document.getElementById('button1').className = document.getElementById("button1").className.replace( /(?:^|\s)selected(?!\S)/ , '' );
            document.getElementById('button2').className = document.getElementById("button2").className.replace( /(?:^|\s)selected(?!\S)/ , '' );
            document.getElementById('button4').className = document.getElementById("button3").className.replace( /(?:^|\s)selected(?!\S)/ , '' );
    }
} 
```

我想对此做一个更通用的功能，所以我想出了以下内容：

```
function general_selected(selected_elem_num, num_elem, elem_name, desired_class){
    var i = 0;
    for( i = 0; i < num_elem + 1; i++){ //dehighlights all options
             document.getElementById(elem_name + i.toString()).className = 
              document.getElementById(elem_name + i.toString()).className.replace
               ( /(?:^|\s) *should be a parameter here* (?!\S)/ , '' );
                /* code wrapped for readability - above is all one statement */
    }
    //highlights selected option
    document.getElementById(elem_name + selected_elem_num).className 
              += desired_class;
} 
```

以下两个函数调用实际上应该是等效的：

```
selected_button(1);
general_selected( 1, 4, 'button', 'selected'); 
```

我遇到的2个问题：

1）我不知道如何将所需的类作为参数插入到正则表达式中。

2) for 循环中非常长的方法导致错误。该错误似乎是持久的，因为即使我将 for 循环中的方法替换为以下内容，我也会收到相同的错误：

```
document.getElementByID(elem_name + i.toString()).className = desired_class; 
```

基于此线程的代码松散： [Change an element's class with JavaScript](https://stackoverflow.com/questions/195951/change-an-elements-css-class-with-javascript)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T22:47:29.700

1.  使用[动态创建正则表达式](http://www.regular-expressions.info/javascript.html)`new Regex(string)`

`reg = new Regex('?:^|\s)'+desired_class+'(?!\S)');`

1.  您的循环从 0 开始，但您的按钮名称从 1 开始

`for(i = 1; i < num_elements + 1 .....`

正如他们所说，其余的留给读者作为练习

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T22:44:05.570

将事件侦听器添加到根节点并跟踪实际目标。

```
document.addEventListener('click', function(event){
     var old = document.querySelector(".selected");
     old.className = old.className.replace( /(?:^|\s)selected(?!\S)/ , '' );
     event.target.className += " selected";
}, false); 
```

# redirect - 挂钩什么事件来重定向 404 错误？Symfony 1.4

> ID：10132891
> 
> 赞同：1
> 
> 时间：2012-04-12T22:40:00.753
> 
> 标签：redirect, symfony1, event-handling, symfony-1.4

我正在使用 symfony 1.4。

发生 404 错误时，我需要重定向某些 url。假设用户正在寻找一个 url [http://example.com/oldurl](http://example.com/oldurl)并且它不存在我想检查这个 url 是否设置为重定向。如果将 url 设置为重定向，我想将其重定向到该 url。

问题：我应该挂钩哪个事件来获取有关请求的 url 的信息，该信息被重定向到 404 错误页面？

PS 如果页面不存在，我们只想检查重定向。我们不想为每个请求运行“检查”，只有在找不到页面时！

多谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T05:30:37.793

每次找不到页面时，Symfony 都会触发一个事件：`controller.page_not_found`.

您可以在文档中找到它：[http ://www.symfony-project.org/reference/1_4/en/15-Events#chapter_15_sub_controller_page_not_found](http://www.symfony-project.org/reference/1_4/en/15-Events#chapter_15_sub_controller_page_not_found)

**编辑：**

您可以通过调用上下文来检索侦听此事件的方法中的 url。有这样的东西：

```
$context = sfContext::hasInstance() ? sfContext::getInstance() : null;
if(null !== $context)
{
  $requested_url = $context->getRequest()->getUri();
} 
```

您可以仔细查看插件[sfErrorNotifierPlugin](http://trac.symfony-project.org/browser/plugins/sfErrorNotifierPlugin/trunk)，它会捕获异常和 404 错误并发送电子邮件以获取报告。看看[他们如何处理 404 错误](http://trac.symfony-project.org/browser/plugins/sfErrorNotifierPlugin/trunk/lib/sfErrorNotifier.php#L26)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T22:44:46.617

我不知道在执行堆栈中准确挂钩的位置，但我知道通过路由的一般更清洁的方式。如果您在代码中没有默认路由规则的情况下进行路由（此后您不应该练习），那么它就像您的应用程序中的以下内容一样简单`routing.yml`（最后）：

```
catch_all:
  url: /*
  param: { module: yourModule, action: handleNotFound } 
```

# asp.net - 嵌套选择语句在 SQL 服务器上加载时间过长

> ID：10132896
> 
> 赞同：0
> 
> 时间：2012-04-12T22:40:34.087
> 
> 标签：asp.net, sql, dataview

我有一个在网格上显示报告的页面。网格使用绑定到返回数据的类的对象数据源。该类本身使用标准 SQL 查询来返回记录计数并绑定到数据视图。我们遇到的问题是，有时加载大约需要 10 分钟，我知道必须有更好的方法，但我一辈子都做不到，弄清楚是什么。希望从任何人那里获得一些关于如何优化性能的见解。数据类如下所示：任何反馈将不胜感激。律师视图返回了大约 650 名律师，绑定到 2 个表：律师和位置表。对其执行计数的视图也绑定到 2 个表：当前案例和以前的案例表，总共返回大约 125,000 个案例。

```
Dim PendingStringBuilder As String = "((dbo.cases.attorney_id = dbo.attorneys.att_id) AND (dbo.cases.date_assigned <= @StartDate) AND (dbo.cases.closing_date >= @StartDate OR dbo.cases.closing_date IS NULL)) OR ((dbo.casepreviousattorneys.attorney_id =
 dbo.attorneys.att_id) AND (dbo.casepreviousattorneys.previous_assignment_date <= @StartDate) AND (dbo.casepreviousattorneys.unassignment_date >= @StartDate OR dbo.casepreviousattorneys.unassignment_date IS NULL))"

Dim AssignedStringBuilder As String = "((dbo.cases.attorney_id = dbo.attorneys.att_id) AND (dbo.cases.date_assigned >= @StartDate) AND (dbo.cases.date_assigned <= @EndDate)) OR ((dbo.casepreviousattorneys.attorney_id = dbo.attorneys.att_id) AND (dbo.casepreviousattorneys.previous_assignment_date
 >= @StartDate) AND (dbo.casepreviousattorneys.previous_assignment_date <= @EndDate))"

Dim CountTable As String = " dbo.cases WITH (NOLOCK) INNER JOIN dbo.tlkpcasetype ON dbo.cases.case_type_id = dbo.tlkpcasetype.case_type_id FULL OUTER JOIN dbo.casepreviousattorneys ON dbo.cases.case_no = dbo.casepreviousattorneys.case_no"

Dim dt As New DataTable("ReportTable")
Dim dr As DataRow

dt.Columns.Add("CasesPending", Type.[GetType]("System.Int32"))
dt.Columns.Add("CasesAssigned", Type.[GetType]("System.Int32"))

dt.Columns.Add("ProbationViolation", Type.[GetType]("System.Int32"))
dt.Columns.Add("BailOnly", Type.[GetType]("System.Int32"))

dt.Columns.Add("TotalCases", Type.[GetType]("System.Int32"))

dt.Columns.Add("AttorneyID", Type.[GetType]("System.Int32"))
dt.Columns.Add("AttorneyName", Type.[GetType]("System.String"))
dt.Columns.Add("AttorneyFirstName", Type.[GetType]("System.String"))
dt.Columns.Add("AttorneyLastName", Type.[GetType]("System.String"))

dt.Columns.Add("UnitID", Type.[GetType]("System.Int32"))
dt.Columns.Add("UnitName", Type.[GetType]("System.String"))
dt.Columns.Add("UnitType", Type.[GetType]("System.String"))

dt.Columns.Add("OfficeID", Type.[GetType]("System.Int32"))
dt.Columns.Add("Office", Type.[GetType]("System.String"))

If cn.State = ConnectionState.Closed Then cn.Open()

Dim cmd As SqlCommand
Dim rdr As SqlDataReader

strSQL = "SELECT DISTINCT dbo.attorneys.user_id, dbo.attorneys.att_id AS AttorneyID, dbo.attorneys.first_name +' '+ dbo.attorneys.last_name AS AttorneyName, dbo.attorneys.unit_id AS UnitID, dbo.tlkpunit.unit AS UnitName, dbo.tlkpunit.unit_type AS UnitType,
dbo.tlkpunit.office_id AS OfficeID, dbo.tlkpoffice.office AS Office, "

strSQL += "(SELECT COUNT(DISTINCT dbo.cases.case_no) AS ExprCasesPending FROM " & CountTable & " WHERE (" & PendingStringBuilder & ")) As CasesPending, "

strSQL += "(SELECT COUNT(DISTINCT dbo.cases.case_no) AS ExprCasesAssigned FROM " & CountTable & " WHERE (dbo.tlkpcasetype.case_type <> 'Probation Violation') AND (dbo.tlkpcasetype.case_type <> 'Bail Only') AND (" & AssignedStringBuilder & ")) As CasesAssigned,
"

strSQL += "(SELECT COUNT(DISTINCT dbo.cases.case_no) AS ExprProbationViolation FROM " & CountTable & " WHERE (dbo.tlkpcasetype.case_type = 'Probation Violation') AND (" & AssignedStringBuilder & ")) As ProbationViolation, "

strSQL += "(SELECT COUNT(DISTINCT dbo.cases.case_no) AS ExprBailOnly FROM " & CountTable & " WHERE (dbo.tlkpcasetype.case_type = 'Bail Only') AND (" & AssignedStringBuilder & ")) As BailOnly, "

strSQL += "(SELECT COUNT(DISTINCT dbo.cases.case_no) AS ExprTotalCases FROM " & CountTable & " WHERE (" & AssignedStringBuilder & ")) As TotalCases "

strSQL += " FROM dbo.attorneys WITH (NOLOCK) LEFT OUTER JOIN dbo.tlkpunit ON dbo.attorneys.unit_id = dbo.tlkpunit.unit_id LEFT OUTER JOIN dbo.tlkpdivision ON dbo.tlkpunit.division_id = dbo.tlkpdivision.division_id LEFT OUTER JOIN dbo.tlkpoffice ON dbo.tlkpunit.office_id
= dbo.tlkpoffice.office_id WHERE (dbo.tlkpunit.unit <> 'test-unit') "

cmd = New SqlCommand(strSQL, cn)

cmd.Parameters.AddWithValue("@StartDate", DateAStart)
cmd.Parameters.AddWithValue("@EndDate", DateAEnd)

rdr = cmd.ExecuteReader()

While rdr.Read

    If rdr("CasesPending").ToString = 0 And rdr("CasesAssigned") = 0 And rdr("ProbationViolation").ToString = 0 And rdr("BailOnly") = 0 Then

        'Do not add record

    Else

        dr = dt.NewRow()

        dr("CasesPending") = CInt(rdr("CasesPending"))
        dr("CasesAssigned") = CInt(rdr("CasesAssigned"))

        dr("ProbationViolation") = CInt(rdr("ProbationViolation"))
        dr("BailOnly") = CInt(rdr("BailOnly"))

        dr("TotalCases") = CInt(rdr("TotalCases"))

        dr("AttorneyID") = rdr("AttorneyID")
        dr("AttorneyName") = rdr("AttorneyName")

        dr("UnitID") = rdr("UnitID")
        dr("UnitName") = rdr("UnitName")
        dr("UnitType") = rdr("UnitType")

        dr("OfficeID") = rdr("OfficeID")
        dr("Office") = rdr("Office")

        dt.Rows.Add(dr)

    End If

End While

rdr.Close()
cmd.Dispose()

If cn.State = ConnectionState.Open Then cn.Close()

Dim dv As New DataView(dt)

dv.Sort = "AttorneyName ASC"

Return dv 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T22:53:44.570

阅读“sql 执行计划”，您可能需要查看表索引。这些事情很可能会产生最大的结果。有关详细信息，请参阅此[SQL Server 优化 MSDN 文章](http://msdn.microsoft.com/en-us/library/aa964133%28v=sql.90%29.aspx)。

我还注意到在你的 VB 代码中你没有参数化你的 SQL 字符串。您应该考虑在上述操作之后执行此操作以获得额外的性能优势。

有关使用 SQL 参数的更多信息，请参阅：

[http://www.codinghorror.com/blog/2005/04/give-me-parameterized-sql-or-give-me-death.html](http://www.codinghorror.com/blog/2005/04/give-me-parameterized-sql-or-give-me-death.html) [http://technet.microsoft.com/en-us/library/ms186219 .aspx](http://technet.microsoft.com/en-us/library/ms186219.aspx)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-03-30T16:58:49.890

尝试使用存储过程。这将已经在 Sql Server 中编译了代码，并提前存储了执行计划。约翰

# ios - AppStore：只能下载3GS及以上的应用？

> ID：10132899
> 
> 赞同：2
> 
> 时间：2012-04-12T22:41:07.870
> 
> 标签：ios, xcode, app-store

不幸的是，我的测试表明我的应用在 iPhone 3G 上运行速度太慢。因此我决定只支持 iPhone 3GS 及以上。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T22:44:25.260

阅读[UIRequiredDeviceCapabilities](http://developer.apple.com/library/ios/#qa/qa1397/_index.html#//apple_ref/doc/uid/DTS40009877)。即`armv7`或`opengles-2`应过滤到3GS及以上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T22:46:20.217

您可能还会考虑限制所需的 iOS 版本。我相信3G手机不能升级到4.3。因此，如果您将其标记为需要 4.3 或更高版本，您将限制可以运行它的手机。

# jquery-validate - jQuery Validate - 最小长度为 10 或 13 的数字？

> ID：10132901
> 
> 赞同：1
> 
> 时间：2012-04-12T22:41:19.767
> 
> 标签：jquery-validate

如何为 jquery validate 插件创建自定义验证规则，以检查用户的输入为 10 位还是 13 位？非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T22:50:58.257

非常简单的验证样本

```
$("#FormToValidatePhoto").validate({
  rules: {
   Title: { minlength: 10, maxlength: 13 }
  },
  messages: {
   Title: { minlength: "Min is 10", maxlength: "Max is 13" }}
}); 
```

# d - D 中的表达式模板

> ID：10132903
> 
> 赞同：5
> 
> 时间：2012-04-12T22:41:20.460
> 
> 标签：d, template-meta-programming

[目标是实现与此 C++ 示例](http://en.wikipedia.org/wiki/Expression_templates)相同的效果：避免创建临时对象。我尝试将 C++ 示例翻译成 D，但没有成功。我也尝试过不同的方法。

```
import std.datetime : benchmark;
import std.stdio    : writefln, writeln;

void bench(alias fun, string time = "msecs")(string msg, uint n = 1_000_000) {
  auto b = benchmark!fun(n);
  writefln(" %s: %s ms", msg, b[0].to!(time, int));
}

alias double Real;

struct Expression(string op, E1, E2) {
  E1 _v1;
  E2 _v2;
  alias _v1 v1;
  alias _v2 v2;

  auto opIndex(size_t i) {
    return mixin("v1[i]" ~ op ~ "v2[i]");
  }

  auto opBinary(string op, E)(auto ref E e) {
    return Expression!(op, typeof(this), E)(this, e);
  }
}

struct ExpVector {

  Real[40] _data = void;
  alias _data this;

  this(Real datum) pure nothrow { _data = datum; }

  auto opBinary(string op, T)(auto ref T other) {
    return Expression!(op, typeof(this), T)(this, other);
  }

  void opAssign(E)(auto ref E exp) {
    foreach(i, ref datum; _data)
      datum = exp[i];
  }
}

struct Vector {

  Real[40] _data = void;
  alias _data this;

  this(Real datum) pure nothrow { _data = datum; }

  auto opBinary(string op)(auto ref Vector other) {
    Vector ret;
    foreach(i, datum; _data)
      ret[i] = mixin("datum" ~ op ~ "other[i]");
    return ret;
  }
}

void main() {

  ExpVector e1 = ExpVector(1.5);
  ExpVector e2 = ExpVector(7.3);
  ExpVector ef;
  void T1() {
    ef = (e1 + e2) * (e1 + e2);
  }
  bench!T1(" vector operations using template expression");

  Vector v1 = Vector(1.5);
  Vector v2 = Vector(7.3);
  Vector vf;
  void T2() {
    vf = (v1 + v2) * (v1 + v2);
  }
  bench!T2(" regular vector operations");

  void T3() {
    for(int i = 0; i < vf.length; ++i)
      vf[i] = (v1[i] + v2[i]) * (v1[i] + v2[i]);
  }
  bench!T3(" what is expected if template expressions worked and temporaries were not created.");
} 
```

表达式模板版本比非表达式模板版本慢。我期待表达式模板版本更快并接近预期。那么我的表达式模板有什么问题？在D中做表达式模板的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T16:13:26.393

在维基百科的 c++ 示例中，表达式类包含对临时对象的引用，并且在表达式的情况下......

```
`Vec a, b;
double c;
Vec result = ( a - b ) * c` 
```

`...在分配给结果向量之前，我们在内存中有某种树： ````
a           b
 \        /
  \      /
   \    /
 VecDifference
      \
       \
        \
       VecScaled( has copy of 'c' embedded directly in object ) 
```

VecDifference 仅保存对 a 和 b 的**引用，而 VecScaled 保存对临时 VecDifference 的****引用**（根据 c++ 规则，它将一直存在到表达式结束）。最后，我们没有初始数据的重复，也没有不必要的计算（如果我们只使用向量的一些组件，但不是所有这些组件都像简单地分配给 Vec）
在你的 struct Expression(string op, E1, E2) initial中间数据只是简单地复制到数据成员中，在前一个表达式的末尾 ````
Expression!( "*", Expression!( "-", Vec, Vec ), double )

```` ，外部表达式将具有内部表达式（“-”，Vec，Vec）的**副本**，双参数和内部表达式将具有**副本**a 和 b 向量。因此，在一天结束时，您避免了临时 Vec，但制作了 a 和 b 的 4 个副本（不包括对结果向量的最终分配）。不过，不知道在这种情况下如何避免在 D 中复制。也许指向 structres 的指针？
（顺便说一句，c++11 的自动类型推断和引用临时变量的表达式模板有不幸的交互，这可能导致错误： http: [//lanzkron.wordpress.com/2011/02/21/inferring-too-much/](http://lanzkron.wordpress.com/2011/02/21/inferring-too-much/)）``

# linux - 在编译程序以在 VM 中运行时，march 和 mtune 应该设置为什么？

> ID：10132904
> 
> 赞同：4
> 
> 时间：2012-04-12T22:41:20.537
> 
> 标签：linux, gcc, virtualization, compiler-optimization

由于虚拟机是主机提供的任何东西的从属，应该向 gcc 提供哪些编译器标志？

我通常认为这将是您在为专用框进行编译时会使用的内容，但是[本文](http://en.chys.info/2010/04/what-exactly-marchnative-means/)中指出的`-march=native`细节让我对使用它非常谨慎。`-march=native`

那么......在VM内部设置`-march`和设置什么？`-mtune`

* * *

举一个具体的例子...

我现在的具体情况是在基于 KVM 的“云”主机内的 linux 客户机中编译 python（以及更多），我无法真正控制主机硬件（除了“简单”的东西，如 CPU GHz m CPU 计数，以及可用内存）。目前，`cpuinfo`告诉我我有一个“AMD Opteron(tm) 处理器 6176”，但老实说，我还不知道这是否可靠，以及来宾是否可以转移到我身上的不同架构以满足主机的基础架构洗牌需求（听起来毛茸茸/不太可能）。

我能真正保证的是我的操作系统，它是一个 64 位 linux 内核，其中`uname -m`yield `x86_64`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T01:38:19.563

[GCC 4.6.3 标准 C++ 库手册的第](http://gcc.gnu.org/onlinedocs/gcc-4.6.3/libstdc++/manual/spine.html)[3.17.14 节 Intel 386 和 AMD x86-64 选项](http://gcc.gnu.org/onlinedocs/gcc-4.3.2//gcc/i386-and-x86_002d64-Options.html#i386-and-x86_002d64-Options)的一些不完整和乱序的摘录（我希望是相关的）。

```
-march=cpu-type
  Generate instructions for the machine type cpu-type.  
  The choices for cpu-type are the same as for -mtune.  
  Moreover, specifying -march=cpu-type implies -mtune=cpu-type. 

-mtune=cpu-type
  Tune to cpu-type everything applicable about the generated code,  
  except for the ABI and the set of available instructions.  
  The choices for cpu-type are:
    generic
      Produce code optimized for the most common IA32/AMD64/EM64T processors. 
    native
      This selects the CPU to tune for at compilation time by determining
      the processor type of the compiling machine. 
      Using -mtune=native will produce code optimized for the local machine
      under the constraints of the selected instruction set.
      Using -march=native will enable all instruction subsets supported by
      the local machine (hence the result might not run on different machines). 
```

我发现最有趣的是`specifying -march=cpu-type implies -mtune=cpu-type`。我对其余部分的看法是，如果您同时指定**两者** `-march`，并且`-mtune`您可能离调整过度杀伤力太近了。

我的建议是使用`-m64`，并且您应该足够安全，因为您在 x86-64 Linux 中运行，对吗？

~~但是，如果您不需要在另一个环境中运行，并且您感到幸运并且具有容错能力，那么`-march=native`也可能对您来说工作得很好。~~

```
-m32
  The 32-bit environment sets int, long and pointer to 32 bits  
  and generates code that runs on any i386 system.     
-m64
  The 64-bit environment sets int to 32 bits and long and pointer  
  to 64 bits and generates code for AMD's x86-64 architecture. 
```

* * *

### 物有所值 ...

出于好奇，我尝试使用您引用的文章中描述的技术。我在作为 VMware Player 来宾运行的 64 位 Ubuntu 12.04 中测试了 gcc v4.6.3。VMware VM 在使用 Intel Pentium Dual-Core E6500 CPU 的桌面上在 Windows 7 中运行。

gcc 选项`-m64`被替换为 just `-march=x86-64 -mtune=generic`。

但是，`-march=native`使用以下所有更具体的编译器选项进行编译会导致 gcc。

```
-march=core2 -mtune=core2 -mcx16 
-mno-abm -mno-aes -mno-avx -mno-bmi -mno-fma -mno-fma4 -mno-lwp 
-mno-movbe -mno-pclmul -mno-popcnt -mno-sse4.1 -mno-sse4.2 
-mno-tbm -mno-xop -msahf --param l1-cache-line-size=64 
--param l1-cache-size=32 --param l2-cache-size=2048 
```

所以，是的，正如 gcc 文档在“*使用 -march=native ... 结果可能无法在不同的机器上运行*”时所述。为了安全起见，您可能应该只使用`-m64`它，或者它明显等同`-march=x86-64 -mtune=generic`于您的编译。

我看不出你会有什么问题，因为这些编译器选项的意图是 gcc 将生成能够在**任何**x86-64/amd64 兼容 CPU 上正确运行的代码。（不？）

坦率地说，我对 gcc `-march=native`CPU 选项的具体程度感到震惊。我不知道如何使用 CPU 的 L1 缓存大小为 32k 来微调生成的代码。但显然*，如果*有办法做到这一点，那么 using`-march=native`将允许 gcc**做到**这一点。

我想知道这是否会导致任何明显的性能改进？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T23:25:16.157

有人会认为客户操作系统报告的 CPU 架构是您应该优化的。否则，我会称之为错误。有时可能有适当的原因导致错误，但是......

请注意，并非所有管理程序都必须相同。

检查特定虚拟机管理程序的邮件列表可能是个好主意。

# c - 替换 32 位数字中的字节

> ID：10132906
> 
> 赞同：9
> 
> 时间：2012-04-12T22:41:32.923
> 
> 标签：c

我有一个名为的函数，它用以下限制`replaceByte(x,n,c)`替换字节：`n``x``c`

*   从 0 (LSB) 到 3 (MSB) 编号的字节
*   例子：`replaceByte(0x12345678,1,0xab) = 0x1234ab78`
*   您可以假设 0 <= n <= 3 和 0 <= c <= 255
*   法律行动：`! ~ & ^ | + << >>`
*   最大操作数：10

    ```
    int replaceByte(int x, int n, int c) {
            int shift = (c << (8 * n));
            int mask = 0xff << shift;
            return (mask & x) | shift;
        } 
    ```

但是当我测试它时，我得到了这个错误：

错误：测试 replaceByte(-2147483648[0x80000000],0[0x0],0[0x0]) 失败... ...给出 0[0x0]。应该是-2147483648[0x80000000]

在意识到 * 不是合法运算符后，我终于弄清楚了……如果您好奇，这就是我所做的：

```
int replaceByte(int x, int n, int c) {
  int mask = 0xff << (n << 3);
  int shift = (c << (n << 3));
  return (~mask & x) | shift;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-12T22:48:24.740

由于这看起来像家庭作业，我不会发布代码，而是列出您需要执行的步骤：

1.  转换`c`为 32 位数字，这样在移位时不会丢失任何位
2.  接下来，`c`向左移动适当的位数（如果`n==0`不移位，如果`n==1`移位 8 等）
3.  创建一个 32 位位掩码，将 的最低 8 位归零`x`，然后将此掩码移动与上一步相同的量
4.  对移位的位掩码执行按位与运算并将`x`适当的位清零`x`
5.  执行移位`c`值的按位或（或加法）并`x`替换后者的屏蔽位

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-13T03:11:58.663

啊……你快到了。

只是改变

```
return (mask & x) | shift; 
```

到

```
return (~mask & x) | shift; 
```

`mask`应该包含除了要屏蔽的区域之外的所有区域，反之亦然。

我正在使用这个简单的代码，它在 gcc 中运行良好

```
#include<stdio.h>

int replaceByte(int x, int n, int c) 
{
    int shift = (c << (8 * n));
    int mask = 0xff << shift;
    return (~mask & x) | shift;
}

int main ()
{

    printf("%X",replaceByte(0x80000000,0,0));

    return 0;
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-04-15T03:20:45.017

正确的解决方案也适用于 c = 0：

```
 int replaceByte(int x, int n, int c)
     {
        int shift = 8 * n;
        int value = c << shift;
        int mask = 0xff << shift;

        return (~mask & x) | value;
     } 
```

# matlab - Matlab - 将变量分类并输出组索引的命令

> ID：10132907
> 
> 赞同：1
> 
> 时间：2012-04-12T22:41:40.007
> 
> 标签：matlab, sorting, vector, matrix

我有一个向量，例如：a = [1 1 2 2 7 7 7 10 10 10 10 11 15]。它可以是未排序的，但在这里我将其写为已排序。我正在寻找一个将上述转换为 [1 1 2 2 3 3 3 4 4 4 4 5 6] 的 Matlab 命令。有没有好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T01:32:24.987

至少有两种方法可以做到这一点

(1) 使用第三个输出`unique`：

```
[~,~,out] = unique(a) 
```

(2)`grp2idx`从统​​计工具箱中使用

```
out = grp2idx(a) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T00:20:03.907

我不确定是否可以仅使用一个命令进行转换，但这是一种方法：

```
a = [1 1 2 2 7 7 7 10 10 10 10 11 15];

a = sort(a);
UniqVector = unique(a);
for i = 1:size(UniqVector, 2)
    a(a == UniqVector(i)) = i;
end 
```

# javascript - Jquery自定义验证非数字

> ID：10132908
> 
> 赞同：1
> 
> 时间：2012-04-12T22:41:41.870
> 
> 标签：javascript, regex, validation, jquery-validate

我正在尝试为 jquery 编写一个自定义验证函数。规则应该是该字段不能只是数字。我知道如何只写数字或只写字母，但我希望规则说“12345”的值会失败，但“12345A”会被验证

这就是我所拥有的非数字

```
jQuery.validator.addMethod("nonNumeric", function(value, element) {
    return this.optional(element) || !value.match(/[0-9]+/);
},"Only alphabatic characters allowed."); 
```

但我不知道如何只做数字。

* * *

**工作脚本**

以下是三个可能有用的规则，最后一个是回答这个问题的规则。

```
 jQuery.validator.addMethod("noSpace", function(value, element) { 
    return value.indexOf(" ") < 0 && value != ""; 
}, "No spaces please");

jQuery.validator.addMethod("alpha", function(value, element) {

    return this.optional(element) || /^[a-z]+$/i.test(value);
},"Letters only please.");

jQuery.validator.addMethod("nonNumeric", function(value, element) {
    return this.optional(element) || isNaN(Number(value));
},"String cannot be numeric"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T22:44:04.237

像这样使用`parseInt`（如果操作数不是严格的数字，则返回 NaN）：

```
jQuery.validator.addMethod("nonNumeric", function(value, element) {
    return this.optional(element) || !isNaN(parseInt(value));
},"Only alphabatic characters allowed."); 
```

不要`!=`在这种情况下使用，否则您可能会遇到[这种不愉快的情况](https://stackoverflow.com/questions/6459758/parseintnull-24-23-wait-what)。

* * *

根据**Ken Browning**的评论，`parseInt`这里可能不合适。试试这个：

```
jQuery.validator.addMethod("nonNumeric", function(value, element) {
    return this.optional(element) || !isNaN(Number(value));
},"Only alphabatic characters allowed."); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T23:07:54.997

将您的正则表达式更改为：

```
(/.*[a-zA-Z]+.*/) 
```

在您的代码上：

编辑1：

```
jQuery.validator.addMethod("nonNumeric", function(value, element) {
    return this.optional(element) || value.match(/.*[a-zA-Z]+.*/);
},"Only alphabatic characters allowed."); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T23:08:55.187

您可以使用

```
/[a-z]/i.test(value) 
```

`true`如果`value`包含 a 和 z 之间的任何字母，则返回。

修饰符使`i`测试用例不敏感。

有关更多信息`.test()`，请查看[MDN 文档](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/RegExp/test)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-12T23:21:07.673

我认为这个正则表达式应该足够了

```
/[a-z]/i.test(value); 
```

用法

```
jQuery.validator.addMethod("nonNumeric", function(value, element) {
    return this.optional(element) || !(/[a-zA-Z]/i.test(value));
},"Only alphabatic characters allowed."); 
```

# lua - 即使对于新对象，Lua 表变量也相同

> ID：10132909
> 
> 赞同：1
> 
> 时间：2012-04-12T22:41:50.650
> 
> 标签：lua

我正在尝试创建一个表示矩阵的 Lua 表，但是我一直遇到一个问题，如果我创建两个矩阵并初始化一些值，它们都具有相同的值。

```
--Test.Lua
require"Matrix"

M1 = Matrix.Matrix:New()
M2 = Matrix.Matrix:New()

M1._11 = 2

print(M1._11) --Prints 2
print(M2._11) --Prints 2

--Matrix.lua

module("Matrix", package.seeall)

Matrix = {}

Matrix = {  _11 = 0, _12 = 0, _13 = 0,
        _21 = 0, _22 = 0, _23 = 0,
        _31 = 0, _32 = 0, _33 = 0
    }

function Matrix:New()
    object = object or {}
    setmetatable(object, self)
    self.__index = self
    return object
end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T22:49:22.150

```
object = object or {} 
```

这就是为什么会发生这种情况。您只能创建*一个*Matrix 对象。`object`您返回的只有一张表`self`，并且您只使用一张表作为元表。

那么你怎么能期望不同的实例`Matrix:New`在每次调用时总是返回完全相同的值呢？

您需要为每次调用返回一个*新表；*`New`这就是我们使用该名称的原因；）由于您使用元表的方式，您还必须返回一个新的元表；您不能返回附加到新表的相同元表并期望它能够工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T10:58:28.047

正如 nicol 解释的那样，一方面你试图“一遍又一遍地重用同一个对象”（可能是为了“让它更快”），另一方面你想要不同的对象。

解决方案是 - 不要`object`在新呼叫中重复使用。

```
local Matrix = {} -- don't use the module function. Make Matrix local ...
Matrix.__index = Matrix

function Matrix:New()
    local object = { -- create one local variable on every call to New
        _11 = 0, _12 = 0, _13 = 0,
        _21 = 0, _22 = 0, _23 = 0,
        _31 = 0, _32 = 0, _33 = 0
    }   
    setmetatable(object, self)
    return object
end

return Matrix -- ... and return the Matrix local var at the end 
```

几点注意事项：

*   你真的必须学会如何使用`local`
*   不推荐使用模块功能。而是返回一个本地表，如我的示例所示。

用法：假设该文件名为“Matrix.lua”：

```
local Matrix = require 'Matrix'

local M1 = Matrix:New()
local M2 = Matrix:New()
-- etc 
```

作为旁注，该`Matrix:New()`功能可以更短（更快）。以下实现与上面的实现完全相同，但效率更高：

```
function Matrix:New()
    return setmetatable({
        _11 = 0, _12 = 0, _13 = 0,
        _21 = 0, _22 = 0, _23 = 0,
        _31 = 0, _32 = 0, _33 = 0
    },
    self)
end 
```

这是有效的，因为`setmetatable(t,m)`返回已经设置为其元表。`t``m`

# c# - Qbservable 实现

> ID：10132910
> 
> 赞同：1
> 
> 时间：2012-04-12T22:41:56.787
> 
> 标签：c#, system.reactive, streaminsight

有谁知道这个的一个很好的实现？

我想做 CEP，但委婉地说，使用 StreamInsight 有点贵。仅许可成本就相当繁重。是否有实现 Qbservable 替代方案的反应式框架，可以插入任何 ODBC 数据库甚至写入磁盘？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T14:35:29.083

StreamInsight 未耦合到 SQL Server 所在的同一台服务器。您可以独立于 SQL Server 安装 StreamInsight。但是，它确实需要 SQL Server 许可证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T01:48:56.437

Reactive Extensions项目[包含一个 Reactive Parsers 实现](http://rxx.codeplex.com/wikipage?title=Parsers&referringTitle=Documentation)。这允许对可用于实现复杂事件处理的 IObservable 事件流进行查询语法。根据问题域，这可能比 Qbservable 更合适。

问题将是来自数据库或文件的插入事件——但这对于流和 IObservables 并不是特别困难。

你有什么理由特别需要 Qbservable 吗？正在解决的问题是什么？

# jquery - 绘制拉斐尔形状的线连接器

> ID：10132917
> 
> 赞同：4
> 
> 时间：2012-04-12T22:42:53.123
> 
> 标签：jquery, raphael, graphael

我正在绘制类似于 graffle ( [http://raphaeljs.com/graffle.html](http://raphaeljs.com/graffle.html) ) 的图表。但是我不想要弯曲的连接线，而是想要直线（在交叉点有一些曲线），如下图所示（从另一篇文章中获得，但无法在那里获得解决方案）。由于我的图表可能具有多对多关系的复杂性，因此线连接器可以穿过多条线，因此线应该足够可区分以显示整齐的连接。这是我的示例代码。有人可以建议我完成它的方法。

```
 connections = [];
  var shapes = new Array();
  var texts = new Array();
  var moreinfo=new Array();
  var kx=20,ky=50;
  var RecWidth=80;
  var RecHeight=40;
  var RecRadius=5;

for (var i=0; i<= 5; i++) {
    shapes[i]=r.rect(kx, ky, RecWidth, RecHeight,RecRadius);
    texts[i]=r.text(kx + 35, ky + 10, "SlsMktGst"+i );
    moreinfo[i]=r.text(kx + 35, ky + 30, "More" );
    moreinfo[i].id="more"+i;
    shapes[i].id="keylist"+i ;
    shapes[i].attr({fill: '#000080', stroke: '#000080', "fill-opacity": 0, "stroke-width": 2, cursor: "move"});
    texts[i].attr({fill: '#0000A0', stroke: "none", "font-size": 12,"font-weight":"bold", cursor: "move"});
    moreinfo[i].attr({fill: '#0000A0', stroke: "none", "font-weight":"bold", cursor: "move"});

     kx=kx+125;
     ky=ky+50;
}; 
```

//用箭头绘制连接线[http://raphaeljs.com/graffle.html](http://raphaeljs.com/graffle.html)

```
for (var jj=0; jj<=shapes.length-1; jj++) {

    if(jj != shapes.length-1){
        connections.push(r.connection(shapes[jj], shapes[jj+1], "#000", "#fff","Y"));
    };
}; 
```

**当前结果：** ![上述代码的当前结果](../Images/1e89bde4649e9a4defdfe23b6f6b5738.png)

* * *

预期结果 ![在此处输入图像描述](../Images/361a14556db5a314a480d843d5cae8c3.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-04T08:25:52.203

在您的 Raphael 连接方法中，使用将您的路径变量从

```
var path = ["M", x1.toFixed(3), y1.toFixed(3), "C", x2, y2, x3, y3, x4.toFixed(3), y4.toFixed(3)].join(","); 
```

对此

```
var path = ["M", x1.toFixed(3), y1.toFixed(3), "L", x2, y2, x3, y3, x4.toFixed(3), y4.toFixed(3)].join(","); 
```

不同之处在于路径中的“C”已更改为“L”。

根据[拉斐尔文档](http://raphaeljs.com/reference.html#Paper.path)

*   C = 曲线

*   L = 直线

谢谢

# solr - 为 solritas solr + velocity 模板自定义 url

> ID：10132920
> 
> 赞同：0
> 
> 时间：2012-04-12T22:43:04.560
> 
> 标签：solr

我认为 solr 附带的打包速度模板将很容易根据我的需求及其 DAMN FAST 进行定制，所以为什么要搞砸它。

我的问题是关于 url/服务器设置。

现在它的[http://1.2.3.4:8093/solr/browse](http://1.2.3.4:8093/solr/browse)

我看到它的方式，它没有安装在 LAMP 服务器上的 apache 帐户中，所以我无法修改该帐户的 htaccess 文件。

我想要做的是将 www.mysite.com 委托给上述内容。url中没有端口，显然也没有ip地址。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T16:29:24.780

如果您从示例中运行它，只需将端口添加到启动参数

```
java -Djetty.port=80 -jar start.jar 
```

`SOLR`这将在 port 上启动`80`。

如果您已配置`Tomcat6`更改`server.xml`文件以在端口上运行`80`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T19:36:26.427

如果您使用的是 Tomcat，只需将部署描述符更改为 Solr Web 应用程序即可

```
<Context docBase="C:\\apache-solr-3.5.0\\example\\solr\\solr.war" debug="0" crossContext="true">
  <Environment name="solr/home" type="java.lang.String" value="C:\\apache-solr-3.5.0\\example\\multicore" override="true"/>
  <Realm className="org.apache.catalina.realm.UserDatabaseRealm" resourceName="UserDatabase"/>
</Context> 
```

重要的是不要在 Context 标记中包含任何 'path="/something"' 属性，并且您必须确保所有其他 Web 应用程序都具有 path="/something"。

这会将 Solr 作为隐藏路径的默认 Web 应用程序。

# python - 是否有在过滤器查询集中没有说明 user.pk 的情况下引用用户？

> ID：10132922
> 
> 赞同：0
> 
> 时间：2012-04-12T22:43:23.930
> 
> 标签：python, django, django-queryset

例如，我想获取`User`s 的列表。我当前的查询集看起来像这样

```
creator_list = User.objects.filter(
    Q(userprofile__place__managers=user) |
    Q(pk=user.pk)
) 
```

我发现我可以得到相同的结果`...managers=user.pk`

```
creator_list = User.objects.filter(
    Q(userprofile__place__managers=user.pk) |
    Q(pk=user.pk)
) 
```

我过去一直在写作`...=user.pk`，直到我意识到我可以简单地放弃这个`pk`部分。那么在第二个`Q()`条款中，是否也可以删除该`pk`部分？因此我想让它看起来像

```
creator_list = User.objects.filter(
    Q(userprofile__place__managers=user) |
    Q(something=user)
) 
```

我知道它`pk`接受了模型的主键，它是一个整数，但是当我已经知道我想要通过`User`模型进行过滤时，为什么我需要指定它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T22:46:46.017

抱歉不行。字段查找需要字段，因此必须使用 PK，因为无法专门引用模型指示的行。

# php - Ajax 调用以获取新数据

> ID：10132923
> 
> 赞同：0
> 
> 时间：2012-04-12T22:43:39.003
> 
> 标签：php, javascript, jquery, ajax

在下面的代码中，我想每次添加一个 ajax 调用，毕竟所有图像都有

已显示，Ajax 将触发我的 php 查看 /images 文件夹以查看是否有任何新文件。

如果有任何新文件，则应在下一个周期中添加并显示它们。

```
 <html>
<meta http-equiv="refresh" content="1000"/> 
<head>
<title>Slideshow</title>
<style type="text/css">
    #slideshow
    #slideshow img { padding: 15px; border: 1px solid #ccc; background-color: #eee; }
    #slide {width: 370px; height: 220px; padding: 0;  margin:  0 auto; }

    #myslides {
    width: 370px;
    height: 220px;
    padding: 0;  
    margin:  0 auto;  
} 

#myslides img {  
    padding: 10px;  
    border:  1px solid rgb(100,100,100);  
    background-color: rgb(230,230,230);
    width: 350px;
    height: 200px;
    top:  0; 
    left: 0 
}

</style>
</head>
<!-- include jQuery library -->

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script>

<!-- include Cycle plugin -->
<script type="text/javascript" src="http://cloud.github.com/downloads/malsup/cycle/jquery.cycle.all.latest.js"></script>

<script type="text/javascript">
$(document).ready(function(){
$('#slideshow').cycle({
               fx: 'fade',
                speed: 700,
                timeout: 8000
        });
});
</script>

<body>

<div id="slideshow">

<?php

    function returnimages($dirname="./images") {
         $pattern="([^\s]+(\.(?i)(jpg|png|gif|bmp))$)";     
         $files = array();
         if($handle = opendir($dirname)) {
            while(false !== ($file = readdir($handle))){
                if(preg_match($pattern, $file)){ //if this file is a valid image 
                    $files[] = $file;
                } 
            }

            closedir($handle);
        }
        //sort($files);         
        natcasesort($files);   

        return($files);
    }

    $images = returnimages(); //will get the array containing the images
    foreach($images as $img)
    {
      echo '<img src="images/' . $img . '" />';
    }
?>

</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T23:48:28.137

在您的页脚中添加一个 javascript，以特定的间隔发送新图像的请求：

```
<script>
    $(function(){
        setIntervall("fetchImages()", 20000);

        function fetchImages() {
            $.ajax({
                type: "GET",
                url: "yourImageFetchingScript.php"
            }).done(function(response){
                var curImgCount = $('#slideshow img').length;
                if (response.length > curImgCount) {
                    for (var i = curImgCount; i < response.length; i++) {
                        $('#slideshow').append('<img src="images/' + response[i] + '"');    
                    }
                }
            });
        }
    });
</script> 
```

然后*yourImageFetchingScript.php*可以只调用您的 returnimages-function 并对结果进行 json-encode：

```
$images = returnimages();
echo json_encode($images); 
```

查看 jQuery 的[ajax 文档](http://api.jquery.com/jQuery.ajax/)以获取更多详细信息。

# c# - 如何将 XML 文件中的项目添加到绑定到 ListBox 的已填充 List<>

> ID：10132926
> 
> 赞同：1
> 
> 时间：2012-04-12T22:44:00.213
> 
> 标签：c#, windows-phone-7, listbox

嘿Stackoverflowers

我目前正忙于一个绑定了 List<> 的列表框。我通过对我们的 Web 服务器的 api 调用来填充这个 List<>。现在，当我到达列表底部时，当我按下按钮时，我会显示一个“加载更多”按钮，我会再次调用我们的 api，但随后会调用 20 个新项目。现在是我的问题，我怎样才能将这 20 个新项目添加到我的 List<> 而不删除旧的 20 个。

这就是我目前填写 List<> 的方式

```
eventList = (from item in events.Descendants("item")
             select new Events
             {
             EventId = Convert.ToInt16(item.Element("eventid").Value),
             EventName = item.Element("eventname").Value,
             EventType = Convert.ToInt16(item.Element("type").Value)
             }).ToList();

Dispatcher.BeginInvoke(new Action(
() =>
     lbVanAlles.ItemsSource = eventList
)); 
```

但是如果我用我的 20 个新项目这样做，它们会覆盖我的旧项目。所以有人有任何线索吗？可能与 eventList.Add 相关，但随后我收到无法将其分配给“方法组”的错误

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T22:53:27.030

`eventList`不是每次都用 Linq 查询的结果覆盖，而是使用该[`List.AddRange`](http://msdn.microsoft.com/en-US/library/z883w3dc%28v=vs.95%29.aspx)方法将项目附加到现有列表中。

```
var temp = from item in events.Descendants("item")
             select new Events
             {
             EventId = Convert.ToInt16(item.Element("eventid").Value),
             EventName = item.Element("eventname").Value,
             EventType = Convert.ToInt16(item.Element("type").Value)
             };
eventList.AddRange( temp ); 
```

此外，您不必`lbVanAlles.ItemsSource`每次都重新分配，而是可以切换到使用 a[`ObservableCollection`](http://msdn.microsoft.com/en-us/library/ms668604%28v=vs.95%29.aspx)而不是 a `List`。这将通知`ListBox`何时添加项目并将自动更新。

# emacs - 运行 TeX-command-master 而不在 emacs 中查询

> ID：10132927
> 
> 赞同：13
> 
> 时间：2012-04-12T22:44:01.760
> 
> 标签：emacs, auctex

Emacs/AucTeX 中的组合键*Cc Cc*运行`TeX-command-master`决定应该运行什么命令（latex、bibtex、view 或其他）的函数，然后在运行命令之前要求用户确认。

我想将它绑定到一个键（比如*F9*），除非**不**要求确认。这样我只需按*F9*即可运行最合适的命令。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-13T04:09:45.997

我有这个片段（取自下面的 Emacswiki 链接），它可以完成所有事情，而不会打扰我现在该做什么。我一定要`C-c C-a`

```
;;; http://www.emacswiki.org/emacs/TN
(require 'tex-buf)
(defun TeX-command-default (name)
  "Next TeX command to use. Most of the code is stolen from `TeX-command-query'."
  (cond ((if (string-equal name TeX-region)
             (TeX-check-files (concat name "." (TeX-output-extension))
                              (list name)
                              TeX-file-extensions)
           (TeX-save-document (TeX-master-file)))
         TeX-command-default)
        ((and (memq major-mode '(doctex-mode latex-mode))
              (TeX-check-files (concat name ".bbl")
                               (mapcar 'car
                                       (LaTeX-bibliography-list))
                               BibTeX-file-extensions))
         ;; We should check for bst files here as well.
         TeX-command-BibTeX)
        ((TeX-process-get-variable name
                                   'TeX-command-next
                                   TeX-command-Show))
        (TeX-command-Show)))

;;;  from wiki
(defcustom TeX-texify-Show t
  "Start view-command at end of TeX-texify?"
  :type 'boolean
  :group 'TeX-command)

(defcustom TeX-texify-max-runs-same-command 5
  "Maximal run number of the same command"
  :type 'integer
  :group 'TeX-command)

(defun TeX-texify-sentinel (&optional proc sentinel)
  "Non-interactive! Call the standard-sentinel of the current LaTeX-process.
If there is still something left do do start the next latex-command."
  (set-buffer (process-buffer proc))
  (funcall TeX-texify-sentinel proc sentinel)
  (let ((case-fold-search nil))
    (when (string-match "\\(finished\\|exited\\)" sentinel)
      (set-buffer TeX-command-buffer)
      (unless (plist-get TeX-error-report-switches (intern (TeX-master-file)))
        (TeX-texify)))))

(defun TeX-texify ()
  "Get everything done."
  (interactive)
  (let ((nextCmd (TeX-command-default (TeX-master-file)))
        proc)
    (if (and (null TeX-texify-Show)
             (equal nextCmd TeX-command-Show))
        (when  (called-interactively-p 'any)
          (message "TeX-texify: Nothing to be done."))
      (TeX-command nextCmd 'TeX-master-file)
      (when (or (called-interactively-p 'any)
                (null (boundp 'TeX-texify-count-same-command))
                (null (boundp 'TeX-texify-last-command))
                (null (equal nextCmd TeX-texify-last-command)))
        (mapc 'make-local-variable '(TeX-texify-sentinel TeX-texify-count-same-command TeX-texify-last-command))
        (setq TeX-texify-count-same-command 1))
      (if (>= TeX-texify-count-same-command TeX-texify-max-runs-same-command)
          (message "TeX-texify: Did %S already %d times. Don't want to do it anymore." TeX-texify-last-command TeX-texify-count-same-command)
        (setq TeX-texify-count-same-command (1+ TeX-texify-count-same-command))
        (setq TeX-texify-last-command nextCmd)
        (and (null (equal nextCmd TeX-command-Show))
             (setq proc (get-buffer-process (current-buffer)))
             (setq TeX-texify-sentinel (process-sentinel proc))
             (set-process-sentinel proc 'TeX-texify-sentinel))))))

(add-hook 'LaTeX-mode-hook
          '(lambda ()
             (define-key LaTeX-mode-map (kbd "C-c C-a") 'TeX-texify))) 
```

[我这里](https://github.com/yyr/emacs.d/blob/master/lisp/init-latex.el)还有一些 AUCTeX/RefTeX 设置，如果你喜欢，可以复制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T14:45:21.277

不是最优雅的解决方案，但您可以定义一个包含以下命令的键盘宏：

*   `C-x C-s`保存文件
*   `M-x TeX-command-master <RET>`运行预先选择的（通过 AucTeX）命令。

定义后，`M-x insert-kbd-macro`将宏定义插入当前缓冲区（作为 Lisp 代码）。然后您可以将其添加到您的`.emacs`并将其绑定到`F9`.

# javascript - HTML/Javascript：如何绘制动态图

> ID：10132936
> 
> 赞同：1
> 
> 时间：2012-04-12T22:45:05.273
> 
> 标签：javascript, jquery, html, graph

我想用标准的 HTML/Javascript/JQuery（不是 HTML5）绘制动态图。

节点是具有某些内容的 div，在它们之间我需要线条。至少水平和垂直。可以动态添加和删除节点。

如果 div 也是可拖动的，那就太好了，但这不是必需的。

这可以用标准 HTML 来完成吗，也许在一些 JQuery 库的帮助下？

我对此只找到否定答案，例如： http: [//www.coderanch.com/t/518805/open-source/do-generate-dynamic-graph-html](http://www.coderanch.com/t/518805/open-source/do-generate-dynamic-graph-html)

提前致谢。

PD 似乎是 Flash 的典型用例。我不能使用 HTML5，因为它必须在任何地方运行。而且我认为没有理由使用 SVG 之类的东西来代替 Flash。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T23:39:36.423

[使用JointJS](http://www.jointjs.com/ "JavaScript 图表库")可能很容易做到这一点。它使用 Raphael 处理图形，它基于 SVG，但也支持 IE 的 VML。JointJS 声称支持以下浏览器：Firefox 3.0+、Safari 3.0+、Opera 9.5+、Google Chrome 4+ 和 Internet Explorer 6.0+。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T00:44:43.290

JQplot 很棒：[http ://www.jqplot.com/](http://www.jqplot.com/)

它开箱即用，给人一种非常“谷歌分析”的感觉。

它建立在 jQuery 之上，非常适合您所描述的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-06T07:26:33.607

您可以使用 Google Charts、Google Graph API [示例。](https://google-developers.appspot.com/chart/interactive/docs/gallery)

# python - 在python中手动实现HTTP GET

> ID：10132943
> 
> 赞同：2
> 
> 时间：2012-04-12T22:45:51.753
> 
> 标签：python, http, get

我正在尝试在 python 中为一个类实现一个简单的 HTTP 网络服务器，但我被卡住了。目前我已经对其进行了硬编码以使事情变得更容易，但我无法弄清楚为什么它不起作用。

```
#Python 2
import socket
import threading

class socketEcho(threading.Thread):
  def __init__(self,conn):
    super(socketEcho,self).__init__()
    self.conn = conn

  def run(self):
    while 1:
      data = self.conn.recv(1024)
      if not data: 
        print 'Break'
        break
      data = """GET /index.html HTTP/1.1 
      host: www.esqsoft.globalservers.com

      """
      dataList = data.split()
      URI = dataList[1]
      URI = URI[1:]
      hostAddress = dataList[4]    
      try:
        file = open(URI,'r').read()
        result = "HTTP/1.1 200 OK \r\nContent-Type: text/html\r\n\r\n"
        result = result + file
      except IOError as e: #HTTP 404
        print "Error"
        pass    
      #conn.send(data)
      print "Sending"
      print result
      try:
        self.conn.send(result)
      except:
        print "Send Error"
    HOST = ''
    PORT = 50420
    s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
    s.bind((HOST,PORT))
    s.listen(2) #Blocks, accept only one connection
    while True:
      newSock, addr = s.accept()
      print 'Connected by', addr
      newConn = socketEcho(newSock)
      newConn.start() 
```

当我尝试将我的 borswer (firefox) 发送到 localhost:50420 时，它会得到 200 OK 代码，但它只是在那里等待并且从不显示页面。因为我查看了结果变量的打印结果，它看起来很好，所以我不知道发生了什么，有什么建议吗？这是结果变量在发送之前的打印结果。

```
HTTP/1.1 200 OK 
Content-Type: text/html

<html>

    <head>
    </head>

    <body>

        <h1>Hello World</h1>
        <p>Yes, this does indeed work</p>
        <p><a href="http://www.google.com">Google</a></p>
        <!--<a href="http://knuth.luther.edu/~ranuha01/hello.html">Link Test</a>-->
        <!--<img src="earth.jpg" alt="Earth picture" height="100">-->
        <ul>
            <li><b>One</b></li>
            <ul>
                <li>One and a half</li>
            </ul>
            <li><b>Two</b></li>
        </ul>

    </body>

</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T01:08:33.050

首先，您应该关闭处理程序中的 conn；其次，不要在run（self）中放置循环，事件循环在main中。

```
#!/usr/bin/env python
# -*- coding: utf-8 -*-
#Python 2
import socket
import threading

class socketEcho(threading.Thread):
  def __init__(self,conn):
      super(socketEcho,self).__init__()
      self.conn = conn

  def run(self):
      data = self.conn.recv(1024)
      if not data: 
        print 'Break'
        self.conn.close()
        return
      data = """GET /index.html HTTP/1.1 
      host: www.esqsoft.globalservers.com

      """
      dataList = data.split()
      URI = dataList[1]
      URI = URI[1:]
      hostAddress = dataList[4]    
      try:
        file = open(URI,'r').read()
        result = "HTTP/1.1 200 OK \r\nContent-Type: text/html\r\n\r\n"
        result = result + file
      except IOError as e: #HTTP 404
        print "Error"
        pass    
      #conn.send(data)
      print "Sending"
      print result
      try:
        self.conn.send(result)
        self.conn.close()
      except:
        print "Send Error"

HOST = ''
PORT = 50420
s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
s.bind((HOST,PORT))
s.listen(2) #Blocks, accept only one connection
while True:
  newSock, addr = s.accept()
  print 'Connected by', addr
  newConn = socketEcho(newSock)
  newConn.start() 
```

# c# - 什么 C# 功能允许使用“对象文字”类型表示法？

> ID：10132944
> 
> 赞同：6
> 
> 时间：2012-04-12T22:45:56.530
> 
> 标签：c#, asp.net-mvc, dictionary, routevalues

我来自 JavaScript，我知道这`{ }`是一个对象文字，不需要`new Object`调用；我想知道这`{"id",id}, {"saveChangesError",true}`部分是否与 C# 相同。

我知道这里有两个 C# 功能，愿意向我解释一下它们是什么吗？

```
new RouteValueDictionary()
{ //<------------------------------[A: what C#  feature is this?] -------||
   {"id",id}, //<------------------[B: what C# feature is this also?]    ||
   {"saveChangesError",true}                                             ||
}); //<------------------------------------------------------------------|| 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-12T22:48:01.913

这是一个单一的功能 -[*集合初始化器*](http://msdn.microsoft.com/en-us/library/bb384062.aspx)。像对象初始化器一样，它只能用作对象初始化表达式的一部分，但基本上它`Add`使用存在的任何参数调用 - 使用大括号指定多个参数，或一次指定单个参数而无需额外的大括号，例如

```
var list = new List<int> { 1, 2, 3 }; 
```

有关详细信息，请参阅 C# 4 规范的第 7.6.10.3 节。

请注意，编译器需要两种类型的东西才能用于集合初始值设定项：

*   它必须实现`IEnumerable`，尽管编译器不会生成任何对`GetEnumerator`
*   它必须具有适当的`Add`方法重载

例如：

```
using System;
using System.Collections;

public class Test : IEnumerable
{
    static void Main()
    {
        var t = new Test
        {
            "hello",
            { 5, 10 },
            { "whoops", 10, 20 }
        };
    }

    public void Add(string x)
    {
        Console.WriteLine("Add({0})", x);
    }

    public void Add(int x, int y)
    {
        Console.WriteLine("Add({0}, {1})", x, y);
    }

    public void Add(string a, int x, int y)
    {
        Console.WriteLine("Add({0}, {1}, {2})", a, x, y);
    }

    IEnumerator IEnumerable.GetEnumerator()        
    {
        throw new NotSupportedException();
    }
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-12T22:48:17.847

那是集合初始化语法。这：

```
RouteValueDictionary d = new RouteValueDictionary()
{                             //<-- A: what C#  feature is this?
   {"id",id},                 //<-- B: what C# feature is this also?    
   {"saveChangesError",true}
}); 
```

基本上相当于这个：

```
RouteValueDictionary d = new RouteValueDictionary();
d.Add("id", id);
d.Add("saveChangesError", true); 
```

编译器认识到它实现`IEnumerable`并具有适当的`Add`方法并使用它的事实。

请参阅：http: [//msdn.microsoft.com/en-us/library/bb531208.aspx](http://msdn.microsoft.com/en-us/library/bb531208.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-03-08T04:18:35.230

请查看[匿名类型](https://docs.microsoft.com/en-us/dotnet/csharp/programming-guide/classes-and-structs/anonymous-types) 它们允许您执行以下操作：

```
var v = new { Amount = 108, Message = "Hello" }; 
```

# objective-c - NSURLConnection 与 NSRunLoopCommonModes

> ID：10132948
> 
> 赞同：6
> 
> 时间：2012-04-12T22:46:17.890
> 
> 标签：objective-c, ios, concurrency, nsurlconnection, nsrunloop

我已经为我的 iOS 应用程序编写了自己的 HTTPClient 实现，以异步下载指定 URL 的内容。HTTPClient 使用 NSOperationQueue 将 NSURLConnection 请求排入队列。我选择 NSOperationQueue 是因为我想在任何时候取消任何或所有正在进行的 NSURLConnection。

我对如何实现我的 HTTPClient 进行了大量研究，并且我有两种执行 NSURLConnection 的选择：

1) 在单独的辅助线程上执行每个入队的 NSURLConnection。NSOperationQueue 在后台的辅助线程上执行每个入队操作，因此我不需要明确地执行任何操作来生成辅助线程，除了在 NSOperation 子类的重写启动方法中启动我的 NSURLConnection 并为生成的辅助线程运行运行循环直到 connectionDidFinishLoading 或connectionDidFailWithError 被调用。如下所示：

```
if (self.connection != nil) {
            do {
                [[NSRunLoop currentRunLoop] runMode:NSDefaultRunLoopMode
                                         beforeDate:[NSDate distantFuture]];
            } while (!self.isFinished);
} 
```

2) 在主线程上执行每个入队的 NSURLConnection。为此，在 start 方法中，我使用 performSelectorOnMainThread 并在主线程上再次调用 start 方法。使用这种方法，我使用 NSRunLoopCommonModes 调度 NSURLConnection，如下所示：

```
[self.connection scheduleInRunLoop:[NSRunLoop currentRunLoop] forMode:NSRunLoopCommonModes]; 
```

我选择了第二种方法并实施了它。根据我的研究，第二种方法似乎更好，因为它不会为每个 NSURLConnection 启动单独的辅助线程。现在在任何时间点，在应用程序中可能有许多请求同时进行，并且使用第一种方法，这意味着将产生相同数量的辅助线程，并且在相关联的 url 请求完成之前不会返回到池中。

我的印象是我仍然通过使用 NSRunLoopCommonModes 调度 NSURLConnection 与第二种方法同时运行。换句话说，我认为我使用 NSRunLoopCommonModes 而不是多线程来实现并发性，以便 NSURLConnection 的观察者会尽快调用 connectionDidFinishLaunching 或 connectionDidFailWithError ，而不管主线程在那个时候对 UI 做了什么时间。

不幸的是，当今天早上我的一位同事向我展示当前的实现时，我的所有理解都被证明是错误的，直到其中一个视图控制器上的滚动视图停止滚动时，NSURLConnection 才会返回。获取数据的 NSURLRequest 在滚动视图即将停止滚动时启动，但即使它在滚动视图停止调用之前完成，不知何故 NSURLConnection 不会回调 connectionDidFinishLoading 或 connectionDidFailWithError 直到滚动视图完全停止滚动。这意味着在主线程上使用 NSRunLoopCommonModes 调度 NSURLConnection 以获得与 UI 操作（触摸/滚动）的真正并发的整个想法被证明是错误的，并且 NSURLConnection 仍然等到主线程忙于滚动滚动视图。

我尝试切换到使用辅助线程的第一种方法，它就像一个魅力。当滚动视图仍在滚动时，NSURLConnection 仍然调用它的协议方法之一。这很清楚，因为现在 NSURLConnection 没有在主线程上运行，所以它不会等待滚动视图停止滚动。

我真的不想使用第一种方法，因为多线程导致它很昂贵。

如果我对第二种方法的理解不正确，有人可以告诉我吗？如果正确，使用 NSRunLoopCommonModes 调度 NSURLConnection 不能按预期工作的原因可能是什么？

如果答案更具描述性，我将不胜感激，因为它应该为我清除更多关于 NSRunLoop 和 NSRunLoopModes 如何工作的疑虑。只是为了说明我已经阅读了很多次的文档。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-13T01:37:26.140

事实证明，这个问题比我想象的要简单。

我在 NSOperation 子类的 start 方法中有这个

```
self.connection = [[NSURLConnection alloc] initWithRequest:self.urlRequest
                                                              delegate:self];

[self.connection scheduleInRunLoop:[NSRunLoop currentRunLoop] forMode:NSRunLoopCommonModes]; 
```

现在的问题是上面的 initWithRequest:delegate: 方法实际上使用 NSDefaultRunLoopMode 在默认运行循环中调度 NSURLConnection，并完全忽略了我实际尝试使用 NSRunLoopCommonModes 调度它的下一行。通过将上面的两行更改为下面的代码，可以按预期工作。

```
self.connection = [[NSURLConnection alloc] initWithRequest:self.urlRequest
                                                              delegate:self startImmediately:NO];

[self.connection scheduleInRunLoop:[NSRunLoop currentRunLoop] forMode:NSRunLoopCommonModes];

[self.connection start]; 
```

这里的实际问题是我必须使用带有参数 startImmediately 的构造方法初始化 NSURLConnection。当我为参数 startImmediately 传递 NO 时，连接不会使用默认运行循环进行调度。可以通过调用 scheduleInRunLoop:forMode: 方法将其安排在运行循环和选择的模式中。

现在，从方法 scrollViewWillEndDragging:withVelocity:targetContentOffset 发起的 NSURLConnection 正在调用它的委托方法 connectionDidFinishLoading/connectionDidFailWithError 而滚动视图仍在滚动且尚未完成滚动。

我希望这可以帮助别人。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T00:31:06.837

调度运行循环源不允许源的回调与其他源的回调同时运行。

在网络通信的情况下，无论您的应用程序做什么，内核处理的事情（例如接收和缓冲数据包）都会同时发生。然后，内核将套接字标记为可读或可写，例如，如果线程在此类调用中被阻塞，则可以唤醒`select()`或`kevent()`调用。如果您的线程正在做其他事情，例如处理滚动事件，那么它不会注意到套接字的可读性/可写性，直到执行返回到运行循环。只有这样`NSURLConnection`，运行循环源才会调用它的回调，让 NSURLConnection 处理套接字状态的变化，并可能调用你的委托方法。

接下来是当一个运行循环有多个源并且多个源准备好时会发生什么的问题。例如，事件队列中有更多滚动事件，并且您的套接字是可读或可写的。理想情况下，您可能喜欢一个公平的算法来服务运行循环源。实际上，GUI 事件可能优先于其他运行循环源。此外，运行循环源相对于其他源可以具有固有的优先级（“顺序”）。

通常，例如，`NSURLConnection`立即维修并不重要。通常允许它等待主线程的运行循环来处理它是可以的。`NSURLConnection`考虑到，出于与滚动时不会服务的运行循环源相同的原因，在后台线程上处理它不可能产生用户可见的效果。例如，它将如何影响您的应用程序的 UI？它会使用`-performSelectorOnMainThread:..`或类似的东西来安排更新。`NSURLConnection`但这与运行循环源一样可能会被饿死。

但是，如果您绝对不能忍受这种可能的延迟，那么在将您`NSURLConnection`的 s 安排在主线程上或将它们全部安排在单独的线程上之间有一个中间立场。您可以将它们全部安排在同一个线程上，但不能安排在主线程上。您可以创建一个驻留在其运行循环中的单个线程。然后，在您当前正在执行`-performSelectorOnMainThread:...`的操作中，您可以改为执行`-performSelector:onThread:...`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-15T14:58:49.080

我对第二个线程上的“scheduleInRunLoop:(NSRunLoop *)aRunLoop forMode:(NSString *)mode”的测试是成功的，它也可以从第二个线程调度InRunLoop回到主运行循环。

部分代码如下：

```
NSRunLoop *runloop; //global

self.connection = [[NSURLConnection alloc] initWithRequest:self.urlRequest delegate:self startImmediately:NO];

[self.connection scheduleInRunLoop:runloop forMode:NSRunLoopCommonModes];

[self.connection start]; 
```

如果你想在另一个线程中运行 NSURLConnection，你应该在你的线程的 main 方法中创建一个这样的运行循环（线程应该在上面的代码开始之前启动）：

```
runloop = [NSRunLoop currentRunLoop];

while (!finished)
{
   [[NSRunLoop currentRunLoop] runUntilDate:[NSDate dateWithTimeIntervalSinceNow:1]];
} 
```

官方文档很有用：

> 默认情况下，连接在创建时以默认模式在当前线程上调度。如果您使用 initWithRequest:delegate:startImmediately: 方法创建连接并为 startImmediately 参数提供 NO，则可以在使用 start 方法启动连接之前将连接安排在不同的运行循环或模式上。您可以在多个运行循环和模式上安排连接，或者在多个模式下在同一个运行循环上安排连接。您无法在连接开始后重新安排它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-06-30T14:36:31.857

使用 Ken Thomases 回答的指导，我为复制粘贴类型的编码器制作了这个：

```
static NSThread *connectionProcessingThread;
static NSTimer *keepRunloopBusy;
static NSRunLoop *oauth2runLoop;

+ (void)initialize
{
static dispatch_once_t onceToken;
dispatch_once(&onceToken, ^{
    connectionProcessingThread = [[NSThread alloc] initWithBlock:^{
        oauth2runLoop = [NSRunLoop currentRunLoop];
        keepRunloopBusy = [NSTimer timerWithTimeInterval:DBL_MAX repeats:YES block:^(NSTimer* timer) {
            NSLog(@"runloop is kept busy with this keepalive work");
        }];
        [oauth2runLoop addTimer:keepRunloopBusy forMode:NSRunLoopCommonModes];
        [oauth2runLoop run];
    }];
    [connectionProcessingThread start];
    atomic_thread_fence(memory_order_release);
});
} 
```

然后你会分叉

```
NSURLConnection *aConnection = [[NSURLConnection alloc] initWithRequest:startRequest delegate:self startImmediately:NO];    // don't start yet
if( [NSRunLoop currentRunLoop] != [NSRunLoop mainRunLoop]) {
    atomic_thread_fence(memory_order_acquire);
    [aConnection scheduleInRunLoop:oauth2runLoop forMode:NSRunLoopCommonModes];
} else {
    [aConnection scheduleInRunLoop:[NSRunLoop mainRunLoop] forMode:NSRunLoopCommonModes]; // let's first schedule it in the main runloop.
}
[aConnection start];    // now start 
```

# ruby - 寻找宝石根

> ID：10132949
> 
> 赞同：27
> 
> 时间：2012-04-12T22:46:18.363
> 
> 标签：ruby, gem

有没有办法知道我的 gem 的根路径？我正在尝试从 gems 路径中的 yaml 加载默认配置。如何使用 ruby​​ 获取 gems 根目录？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-04-13T00:41:33.070

给定以下项目结构：

```
your_gem/
  lib/
    your_gem.rb 
```

这是我的做法：

```
# your_gem.rb

module YourGem
  def self.root
    File.expand_path '../..', __FILE__
  end
end 
```

Ruby 2.0 引入了该[`Kernel#__dir__`](http://www.ruby-doc.org/core-2.1.1/Kernel.html#method-i-__dir__)方法；它可以实现更短的解决方案：

```
# your_gem.rb

module YourGem
  def self.root
    File.dirname __dir__
  end
end 
```

如果您需要访问其他目录，您可以简单地构建`root`：

```
module YourGem
  def self.bin
    File.join root, 'bin'
  end

  def self.lib
    File.join root, 'lib'
  end
end 
```

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2012-04-18T03:26:39.580

这是可执行文件和库的通用解决方案。它使用 Gem API 加载规范，因此路径始终正确：

```
spec = Gem::Specification.find_by_name("your_gem_name")
gem_root = spec.gem_dir
yaml_obj = YAML.load(gem_root + "/file_name.yaml") 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-04-12T22:47:51.830

`gem list <gem> -d`

或者，如果您使用的是捆绑器：

`bundle show <gem>`

# xml - 带有字符串数组参数的 XMLDP 查询 - 报表生成器

> ID：10132956
> 
> 赞同：0
> 
> 时间：2012-04-12T22:47:03.997
> 
> 标签：xml, soap, reporting-services, ssrs-2008, reportbuilder

我在报告中有一个 XML 数据源，指向我的 C# Web 服务。我不知道如何正确地将字符串数组作为查询中的参数值传递给该数据源。

```
<Query>
   <Method Name="MyAwesomeMethod" Namespace="http://myawesomenamespace">
   <Parameters>
      <Parameter Name="regularParameter" Type="String">
         <DefaultValue>a normal string value</DefaultValue>
      </Parameter>
      <Parameter Name="fields">
         <DefaultValue><!-- what to put here? --></DefaultValue>
      </Parameter>
   </Parameters>
   </Method>
   <ElementPath IgnoreNamespaces="true">*</ElementPath>
</Query> 
```

在常规的 SOAP 请求中，我将拥有以下内容：

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:mynamespace="http://myawesomenamespace">
   <soapenv:Header/>
   <soapenv:Body>
      <mynamespace:MyAwesomeMethod>
         <mynamespace:regularParameter>a normal string value</mynamespace:regularParameter>
         <mynamespace:fields>
            <mynamespace:string>value the first</mynamespace:string>
            <mynamespace:string>value the second</mynamespace:string>
         </mynamespace:fields>
      </mynamespace:MyAwesomeMethod>
   </soapenv:Body>
</soapenv:Envelope> 
```

我的 Web 服务提供了一个示例 SOAP 1.1 请求：

```
<?xml version="1.0" encoding="utf-8"?>
<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  <soap:Body>
    <MyAwesomeMethod xmlns="http://myawesomenamespace">
      <regularParameter>string</regularParameter>
      <fields>
        <string>string</string>
        <string>string</string>
      </fields>
    </MyAwesomeMethod>
  </soap:Body>
</soap:Envelope> 
```

那么如何将字符串数组作为 XMLDP 查询参数中的默认值传递呢？这与[我的另一个问题有关](https://stackoverflow.com/questions/3321002/help-convert-this-soap-request-to-report-builder-2-0-query-for-xml-data-source)，但不一样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T19:01:07.710

简单类型数组的表示方式与它们在 .NET 中使用[XmlSerializer 类进行序列化的方式相同。](http://msdn.microsoft.com/en-us/library/system.xml.serialization.xmlserializer%28v=vs.100%29.aspx)

您可以使用下面的代码来查看序列化：

```
string[] example = new string[] {"One", "Two", "Three"};
string serializedExample = null;
XmlSerializer serializer = new XmlSerializer(typeof(string[]));

using (StringWriter writer = new StringWriter())
{
    serializer.Serialize(writer, example);
    serializedExample = writer.ToString();
}

Console.WriteLine(serializedExample); 
```

该代码产生以下输出：

```
<?xml version="1.0" encoding="utf-16"?>
<ArrayOfString xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <string>One</string>
  <string>Two</string>
  <string>Three</string>
</ArrayOfString> 
```

当将此作为参数呈现时，请不要使用`<?xml version="1.0" encoding="utf-16"?>`. 您也可以省略`xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema"`而不会产生不良影响。

这应该给你：

```
<Query>
   <Method Name="MyAwesomeMethod" Namespace="http://myawesomenamespace">
   <Parameters>
      <Parameter Name="regularParameter" Type="String">
         <DefaultValue>a normal string value</DefaultValue>
      </Parameter>
      <Parameter Name="fields" Type="Xml">
         <DefaultValue><ArrayOfString><string>One</string><string>Two</string><string>Three</string></ArrayOfString></DefaultValue>
      </Parameter>
   </Parameters>
   </Method>
   <ElementPath IgnoreNamespaces="true">*</ElementPath>
</Query> 
```

如果这不起作用，请尝试删除`ArrayOfString`标签。重要的部分是您的参数类型需要是 Xml。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T16:46:54.217

由于我控制了 Web 服务代码，因此解决方法是更改​​我的 Web 方法，以便它们只采用简单的参数，例如`string fields`而不是`string[] fields`. 然后我`new Regex(@"([0-9a-zA-Z]+)(,\s*[0-9a-zA-Z]+)*")`用来确保通过逗号分隔的字段列表并`fields.Split(',').Select(str => str.Trim()).ToArray()`获得`string[]`我想要的。

这可行，但看起来很愚蠢，因为在某处肯定存在一些语法，允许将字符串数组传递给 Report Builder 中的 XML Web 服务。当然，如果我无法更改 Web 服务，这种变通方法将毫无帮助。

# .htaccess - CakePhp 2.0 .htaccess

> ID：10132958
> 
> 赞同：2
> 
> 时间：2012-04-12T22:47:21.230
> 
> 标签：.htaccess, cakephp, mod-rewrite, cakephp-2.0

在 Apache 服务器上配置 CakePhp 时遇到问题。它在我的开发环境中运行良好，现在我正在寻找部署。

网址将如下所示：

```
"http://www.example.com/mysite/" 
```

示例控制器操作将是：

```
"http://www.example.com/mysite/users/login" 
```

使用默认的 htaccess 文件似乎不起作用。

mod_rewrite 是根据 phpInfo 加载的，它正在重写 url，但它把 /mysite/ 看作一个控制器。这是输出和我的 .htaccess 文件

```
Missing Controller

Error: MysiteController could not be found.

Error: Create the class MysiteController below in file: >app/Controller/MysiteController.php 
```

根：

```
<IfModule mod_rewrite.c>
   RewriteEngine On
   RewriteRule    ^$ app/webroot/    [L]
   RewriteRule    (.*) app/webroot/$1 [L]
</IfModule> 
```

应用程序：

```
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteRule ^$    webroot/    [L]
    RewriteRule (.*) webroot/$1    [L]
</IfModule> 
```

网络根：

```
<IfModule mod_rewrite.c>
   RewriteEngine On
   RewriteCond %{REQUEST_FILENAME} !-d
   RewriteCond %{REQUEST_FILENAME} !-f
   RewriteRule ^(.*)$ index.php?/$1 [QSA,L]
</IfModule> 
```

我应该更改我的 .htaccess 文件还是我的 CakePhp 配置文件？我尝试了一些不同的 RewriteBases，只是设法得到不同的错误。

编辑：服务器正在运行 php-cgi，看来我的所有链接都被写入了 cgi-bin。例如：

```
$this->Html->meta('icon'); 
```

写入路径“/cgi-bin/cgiwrap/w3u_mysite/mysite/favicon.ico” 关于这可能发生在哪里或为什么会发生的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T02:46:23.920

正如我在编辑中所怀疑的那样，问题与运行 cgi php 的服务器有关。我不确定问题是什么，但 CakePhp 谷歌小组提供了这个解决方案：

在 app/Config/core.php 中有一个 App.baseUrl 的注释定义。取消注释并替换为以下内容

```
Configure::write('App.baseUrl', '/mysite/'); 
```

在它上面，有评论说要删除你应该忽略的 .htaccess 文件。该站点以 .htaccess 文件作为标准值运行良好，不需要 RewriteBase。一个烦恼是函数不起作用，但我只在模板中调用它们，所以硬编码它们并不可怕`$this->Html->css()`。`$this->Html->js()`

如果有人深入了解这些 cgi 问题的原因，请分享。如果我不能使用所有的 Html 帮助程序，它仍然感觉有点像一个 kludge。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T06:23:11.783

您需要`Rewritebase /mysite/`在 .htaccesses 中添加（可能带有 '/mysite' 引用或没有第二个斜杠，您必须尝试），因此 mod rewrite 将考虑该文件夹。

* * *

你检查你`webroot/index.php`的文件是否有正确的路径？作为最后的手段，也许可以过滤掉路线中的“mysite”？

* * *

最后的建议：在你的重写规则中`mysite/`添加。`app`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T18:43:55.237

我对某些服务器也有类似的问题。我的解决方案是在所有 .htaccess 文件中命名绝对路径。

就像是：

根：

```
<IfModule mod_rewrite.c>
   RewriteEngine On
   RewriteRule    ^$ /mysite/app/webroot/    [L]
   RewriteRule    (.*) /mysite/app/webroot/$1 [L]
</IfModule> 
```

应用程序：

```
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteRule ^$    /mysite/app/webroot/    [L]
    RewriteRule (.*) /mysite/app/webroot/$1    [L]
</IfModule> 
```

网络根：

```
<IfModule mod_rewrite.c>
   RewriteEngine On
   RewriteCond %{REQUEST_FILENAME} !-d
   RewriteCond %{REQUEST_FILENAME} !-f
   RewriteRule ^(.*)$ /mysite/app/webroot/index.php?/$1 [QSA,L]
</IfModule> 
```

# asp.net - 带有一些禁用的动态 CheckBoxFor

> ID：10132962
> 
> 赞同：4
> 
> 时间：2012-04-12T22:47:34.960
> 
> 标签：asp.net, asp.net-mvc-3, checkbox

我正在尝试创建一个动态 CheckBoxFor ，其中某些项目被禁用。

这是禁用一切：

```
@Html.CheckBoxFor(m=>m.Checked, new { @disabled = "disabled"}) 
```

我试图创建这样的东西但没有成功：

```
@Html.CheckBoxFor(m=>m.Checked, new{ @disabled = @(Model.Disable ? "disabled" : "")}) 
```

请注意，我的模型有一个名为 Disabled 的属性和另一个 Checked 属性。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-12T23:07:40.380

它不起作用，因为 disabled 属性会禁用 CheckBox，无论它的值是什么。

我不确定如何在一行中做到这一点，但这是一种解决方案：

```
@if(Model.Disabled)
{ 
    @Html.CheckBoxFor(m=>m.Checked, new { @disabled = "disabled"})
}
else
{
    @Html.CheckBoxFor(m=>m.Checked)
} 
```

一个潜在的 Html 助手扩展：

```
public static MvcHtmlString CheckBoxFor<TModel>(
        this HtmlHelper<TModel> helper,
        Expression<Func<TModel, bool>> expression,
        object htmlAttributes,
        bool isDisabled)
{
    var dic = htmlAttributes.GetType()
             .GetProperties()
             .ToDictionary(p => p.Name, p => p.GetValue(htmlAttributes, null));

    if (isDisabled)
        dic["disabled"] = "disabled";

    return helper.CheckBoxFor(expression, dic);
} 
```

# c# - 如何枚举 SQL Server 实例

> ID：10132968
> 
> 赞同：1
> 
> 时间：2012-04-12T22:48:17.267
> 
> 标签：c#, sql-server-2008, enumeration

我想让我的应用程序返回 SQL Server 2008 R2 Developer/Express 的实例。

我正在使用：

```
System.Data.DataTable lokalni_servery = Microsoft.SqlServer.Management.Smo.SmoApplication.EnumAvailableSqlServers();

foreach (System.Data.DataRow row in lokalni_servery.Rows)
{
    local_servers.Items.Add(row["Server"].ToString());
} 
```

在我朋友的装有 SQL Server 2008 R2 express 32 位的笔记本上，它什么也找不到，但在我的装有 SQL Server 2008 R2 Developer 64 位的笔记本上，它几乎每次都能找到。我需要能够在两台机器上找到这个 SQL 实例。

有人知道为什么应用程序会这样吗？

有没有办法改变允许两个笔记本找到实例的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T22:54:24.583

`SmoApplication.EnumAvailableSqlServers`枚举可用实例，这意味着服务器必须正在运行。仅仅安装它们是不够的。

也`SQL Server Browser Service`必须运行！

请参阅MSDN 上[的如何：启动和停止 SQL Server Browser 服务 (SQL Server Express)](http://msdn.microsoft.com/en-us/library/ms165734%28v=sql.90%29.aspx)

# java - 如何使 On Item Selected 不会自动选择第一个条目

> ID：10132971
> 
> 赞同：15
> 
> 时间：2012-04-12T22:48:43.993
> 
> 标签：java, android, eclipse, spinner

我创建了一个微调器，当有人使用阵列适配器添加设备时，它会自动更新设备名称。我使用旋转器创建了一个onIe选择方法，因此选择旋转器中的一个名称时，将出现一个新窗口。但是，当活动开始时，OnItemSelected 会自动选择列表中的第一个项目，因此在新窗口出现之前，用户没有机会实际进行选择。

这是代码：

```
public void onItemSelected(AdapterView<?> arg0, View arg1, int arg2,
        long arg3) {
    // TODO Auto-generated method stub
    startActivity(new Intent("com.lukeorpin.theappliancekeeper.APPLIANCESELECTED"));
    }

public void onNothingSelected(AdapterView<?> arg0) {
    // TODO Auto-generated method stub 
```

有谁知道不会自动选择列表中第一项的方式？

这是微调器其余部分的代码：

```
ArrayAdapter<String> appliancenameadapter = new ArrayAdapter<String>(this,
            android.R.layout.simple_spinner_item, ApplianceNames); //Sets up an array adapter containing the values of the ApplianceNames string array
    applianceName = (Spinner) findViewById(R.id.spinner_name); //Gives the spinner in the xml layout a variable name
    applianceName.setAdapter(appliancenameadapter); //Adds the contents of the array adapter into the spinner

    applianceName.setOnItemSelectedListener(this); 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-02-19T17:07:20.270

如果您试图避免对侦听`onItemSelected()`器方法的初始调用，另一种选择是使用`post()`视图的消息队列。微调器第一次检查您的侦听器时，它还没有设置。

```
// Set initial selection
spinner.setSelection(position);

// Post to avoid initial invocation
spinner.post(new Runnable() {
  @Override public void run() {
    spinner.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() {
      @Override
      public void onItemSelected(AdapterView<?> parent, View view, int position, long id) {
        // Only called when the user changes the selection
      }

      @Override
      public void onNothingSelected(AdapterView<?> parent) {
      }
    });
  }
}); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-04-12T23:07:20.313

> 有谁知道不会自动选择列表中第一项的方式？

*总是*有一个选择`Spinner`，你不能改变它。

恕我直言，您不应该使用 a`Spinner`来触发启动活动。

话虽如此，您可以使用 a`boolean`来跟踪这是否是第一个选择事件，如果是则忽略它。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2015-01-21T08:37:52.583

它对我有用，

`private boolean isSpinnerInitial = true;`

```
 @Override
    public void onItemSelected(AdapterView<?> parent, View view,
            int position, long id) {

        if(isSpinnerInitial)
        {
            isSpinnerInitial = false;
        }
        else  {
            // do your work...
        }

    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-24T21:51:03.763

声明变量 isSpinnerInitial 然后将 Make a Selection 作为默认选择

spinnertaggeview.setSelection(-1); 不会像我们在 .Net 或其他语言中那样选择 -1 或未选择的所有内容。所以你可以忽略那条线。

```
testStringArrayListinside.add("Make a Selection");
ADD this line so that this is selected by default and user never selects it 

testStringArrayList = (ArrayList<String>) ClinqLinX.get("Tag");
                boolean added = false;
             testStringArrayListinside.add("Make a Selection");
                for (String s : testStringArrayList) {
                    if (s != null || s != "") {
                        String[] results = s.split(","); // split on commas

                        for (String string : results) {

                            testStringArrayListinside.add(string);
                            Toast.makeText(getContext(), string, Toast.LENGTH_SHORT).show();
                            added = true;
                        }
                    }

                }
                if (added == false) {
                    testStringArrayListinside.add("Not tagged details found");
                }

                spinnertaggeview.refreshDrawableState();

            }

            // Adapter: You need three parameters 'the context, id of the layout (it will be where the data is shown),
            // and the array that contains the data
            if (testStringArrayListinside.size() > 0) {
                adapter = new ArrayAdapter<String>(this.getContext(),android.R.layout.select_dialog_singlechoice, testStringArrayListinside);
                adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
                // Here, you set the data in your ListView
                spinnertaggeview.setAdapter(adapter);
                 isSpinnerInitial = true;

                spinnertaggeview.setSelection(-1);
                spinnertaggeview.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() {

                    @Override
                    public void onItemSelected(AdapterView<?> arg0, View arg1,
                                               int arg2, long arg3) {
                        if (isSpinnerInitial){

                            isSpinnerInitial = false;

                            return;}
                        else{
                        TextView tv = (TextView) arg1;
                        String spinner_value = tv.getText().toString();
                        if (spinner_value.length() == 0) {
                            spinner_value = "Nothing";
                        }
                        String strusername = spinner_value;//As you are using Default String Adapter
                        Toast.makeText(getContext(), strusername, Toast.LENGTH_SHORT).show();
                        Intent intent = new Intent(spinnertaggeview.getContext(), Userdetails.class);
                        intent.putExtra("Username", strusername);
                        spinnertaggeview.getContext().startActivity(intent);}

                    } 
```

# matlab - 从表面差异计算体积

> ID：10132976
> 
> 赞同：0
> 
> 时间：2012-04-12T22:49:41.320
> 
> 标签：matlab

我有前后 xyz 数据，坐标在同一平面上。我如何在matlab中计算两个表面之间的体积差。

我有前后 xyz 数据，坐标在同一平面上。我如何在matlab中计算两个表面之间的体积差。

这是这样做的方法吗？

```
spX = linspace(preTest.minX, preTest.maxX);
spY = linspace(preTest.minY, preTest.maxY);
[xC,yC] = meshgrid(spX,spY);

zC = bin2mat(preTest.x,preTest.y,preTest.z,xC,yC);

spX1 = linspace(postTest.minX, postTest.maxX);
spY1 = linspace(postTest.minY, postTest.maxY);
[xC1,yC1] = meshgrid(spX1,spY1);

zC1 = bin2mat(postTest.x,postTest.y,postTest.z,xC,yC);

dx=spX(2)-spX(1);
dy=spY(2)-spY(1);

dZ = zC - zC1;

V=dx*dy*sum(dZ); 
```

# ruby-on-rails - Thin 不启动 Rails 服务器

> ID：10132979
> 
> 赞同：0
> 
> 时间：2012-04-12T22:50:11.573
> 
> 标签：ruby-on-rails, ubuntu, nginx, rvm, thin

我有一个带有 rails(rvm) + nginx + Thin 的 ubuntu 服务器。

Nginx 正在监听 porst 3000-3 并且如果我手动启动 rails 效果很好，所以我猜问题出在薄。

我已将瘦配置为在端口 3000,3001,3002 中启动 3 个服务器实例，但它们不会启动并且不会报告任何错误。

我在 /etc/thin 中只有一个文件，这是正常的还是我遗漏了什么？该文件是 railsapp.yml。

如果我运行 bundle exec thin start，它运行正常。

编辑：运行时出现错误：

```
thin start --all /etc/thin 
```

这是日志中的错误：

```
/home/metaloviana/.rvm/gems/ruby-1.9.2-p318@global/gems/bundler-1.1.3/lib/bundler/runtime.rb:31:in `block in setup': You have already activated rack 1.4.1, but your Gemfile requires rack 1.3.5\. Using bundle exec may solve this. (Gem::LoadError) 
```

编辑2：

问题解决了。使用 railsgems-bundler 和 rvm 包装器。

多谢你们！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T00:17:19.033

同意@shime。

错误日志表明 ruby​​gem 发现了许多不同版本的 rake，它不知道要使用哪个版本。

请记住，始终使用“bundle exec”来执行 rake 任务，例如

```
bundle exec thin start 
bundle exec rake db:migrate
bundle exec rspec spec
bundle exec rails generate scaffold... 
```

# matlab - Matlab：“按住”事件的按钮回调

> ID：10132980
> 
> 赞同：1
> 
> 时间：2012-04-12T22:50:16.697
> 
> 标签：matlab

我们知道如何对 Matlab 进行编程以在单击按钮时执行某些操作，即：

```
 button= uicontrol('Style','pushbutton','String','click me',...
   'Position',[260 80 60 20],...
   'Callback','disp ('' The button is clicked'')'); 
```

因此，只要按下和释放该按钮，就会调用放置在“回调”之后的代码或函数。（因此只有在释放按钮时才会调用处理程序）

但是，我希望能够在按下按钮但尚未释放时激活一些代码。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-13T01:26:37.467

您必须为“ButtonDownFcn”属性使用回调函数。从[这里](http://www.mathworks.com/help/techdoc/ref/uicontrol_props.html#bqxoije)：”

**ButtonDownFcn**

> 字符串或函数句柄（GUIDE 设置此属性）
> 
> 按钮按下回调例程。当指针位于或靠近 uicontrol 时按下鼠标按钮时可以执行的回调例程。具体来说：
> 
> 如果 uicontrol 的 Enable 属性设置为 on，当您在 uicontrol 周围 5 像素边框中单击鼠标右键或鼠标左键或单击控件本身上的鼠标右键时，将执行 ButtonDownFcn 回调。
> 
> 如果 uicontrol 的 Enable 属性设置为非活动或关闭，当您在 5 像素边框或控件本身上单击鼠标右键或左键时，将执行 ButtonDownFcn。
> 
> 这对于实现交互修改控件对象属性（例如大小和位置）的操作很有用（例如，使用 selectmoveresize）。
> 
> 将此例程定义为一个字符串，该字符串是一个有效的 MATLAB 表达式或代码文件的名称。该表达式在 MATLAB 工作区中执行。
> 
> 要在 GUIDE 中添加 ButtonDownFcn 回调，请从 Layout Editor View 菜单中选择 View Callbacks，然后选择 ButtonDownFcn。GUIDE 将此属性设置为适当的字符串，并在您下次保存 GUI 时将回调添加到代码文件。或者，您可以将此属性设置为字符串 %automatic。下次保存 GUI 时，GUIDE 会将此属性设置为适当的字符串并将回调添加到代码文件。
> 
> 使用 Callback 属性来指定在您激活启用的 uicontrol（例如，单击按钮）时执行的回调例程。

# .net - 如何解决“程序对对象 dbo.sysssislog 的引用未解决”

> ID：10132986
> 
> 赞同：4
> 
> 时间：2012-04-12T22:51:25.833
> 
> 标签：.net, visual-studio-2010, sql-server-2008, database-project, visual-studio-dbpro

我有一个 Visual Studio 2010 数据库项目，并且我已经导入了一个现有架构。此数据库中有一些存储过程引用了 Integration Services 系统表 dbo.sysssislog，并在我的项目中生成了许多警告。

我尝试将 master.dbschema 和 msdb.dbschema 添加为数据库引用，并且我还尝试将引用的数据库名称重命名为 tempdb（而不是 master 或 msdb），但问题仍然存在。

我打开了 msdb.dbschema 文件，并确认文件中存在 sysssislog 表。

这是警告：

```
SQL04151: Procedure: [dbo].[storedProcedureName] has an unresolved reference to object [dbo].[sysssislog]. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T11:11:15.513

这`dbo.sysssislog`是一个用户表（标记为系统表），由 SQL Server Integration Services (SSIS) 在您创建具有 SQL Server 类型的事件日志记录的包时自动创建。除了这个表，SSIS 还创建了一些存储过程（可以`ALTER`编辑）来帮助记录过程。

这是您项目中未解决的引用，可能是因为您导入了数据库模式，这导致导入了提到的存储过程，但*没有*导入`dbo.sysssislog`表，因为它被标记为系统表。

所以现在，您拥有的是一堆引用您尚未导入的表的存储过程，从而导致警告。

您可以做些什么来消除警告，手动`DROP`重新创建`CREATE`表（这是“删除”系统表标记的唯一方法），并将其导入您的项目。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-04-09T10:13:03.553

这是另一种更清洁的方法：

创建一个新的空 SSDT 项目，将其命名为“sysssislog”并向其中添加 sysssislog 表的脚本。构建项目以生成 dacpac 文件“sysssislog.dacpac”。

在您的 SSDT 项目中，为 dacpac 文件添加一个数据库引用，并在“添加数据库引用”对话框中为数据库位置选择“相同数据库”。

如果您的项目受源代码管理，您可以将 dacpac 添加到项目中，然后添加引用，因此 dacpac 文件也受源代码管理。

# c# - 使用 WebClient 下载名称可以每月更改的 zip 文件

> ID：10132991
> 
> 赞同：1
> 
> 时间：2012-04-12T22:52:10.543
> 
> 标签：c#, webclient

我需要从[http://nppes.viva-it.com/NPI_Files.html](http://nppes.viva-it.com/NPI_Files.html)下载一个文件，问题是每个月文件名都会改变。我希望能够在文件名中使用通配符，例如 NPPES_Data_Dissemination_*.zip 但这不适用于 WebClient。有没有其他方法可以在不知道文件确切名称的情况下使用 c# 以编程方式下载此文件。这个网页上总是有 1 个也是唯一的 .zip 文件……程序只是不知道那个名字是什么。任何想法，将不胜感激！！

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T22:55:26.737

无法通过 HTTP 请求您不知道名称的资源。

相反，为[http://nppes.viva-it.com/NPI_Files.html](http://nppes.viva-it.com/NPI_Files.html)创建一个 WebRequest并将其解析为您感兴趣的字符串，然后请求该字符串；或者，让 NPI 人员为文件提供一致的名称（因为只有一个，也许它应该称为 _latest.zip 或其他名称？）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T22:55:36.810

您应该使用 HTML Agility Pack（在 NuGet 上）来解析 HTML 并找到`<a href="">`.

# excel - 阻止 Excel 鼠标光标在按钮上闪烁

> ID：10132995
> 
> 赞同：6
> 
> 时间：2012-04-12T22:52:28.973
> 
> 标签：excel, user-interface

当我创建一个附加了宏的按钮并将鼠标光标悬停在该按钮上时，它会在默认指向手形光标和看起来像左侧 1 个像素的全白指向手之间闪烁。

任何想法如何解决这一问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-06-05T15:47:55.990

我遇到了类似的问题（如果不是同样的问题）。

1.  当不移动鼠标而是将鼠标悬停在按钮上时，手似乎会闪烁。
2.  移动鼠标并经过按钮时，手会闪烁并且光标会变慢。

参考 Scoox 的解决方案，我将代码放在一个函数中，以便在工作簿打开时触发。

```
Private Sub Workbook_Open()
    Application.Cursor = xlNorthwestArrow
End Sub 
```

这消除了静止的鼠标闪烁和指针在按钮上移动的滞后。但是，如果您在按钮上缓慢移动，仍然会有一些轻微的闪烁。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T01:21:42.577

将以下代码放在使鼠标指针闪烁沙漏的代码之前。

```
Application.Cursor = xlNorthwestArrow 'Stops mouse pointer flashing hourglass 
```

那应该停止闪烁。

# javascript - 如何在鼠标点击坐标的中间而不是左上角绘制我的角色？

> ID：10132996
> 
> 赞同：1
> 
> 时间：2012-04-12T22:52:30.417
> 
> 标签：javascript, html

我有一个游戏，您可以在其中单击 2D HTML5 画布来设置角色移动到的点。当我点击时，我注意到角色会出现在鼠标点击位置的右下角。所以我假设 context.drawImage() 的 x,y 坐标参数用于从哪里开始绘制图像的左上角。根据这个规范，我是对的：http: [//www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html#drawing-images-to-the-canvas](http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html#drawing-images-to-the-canvas)

我试图通过在 centerX 和 centerY 处绘制来调整它，如下所示。我似乎得到了与上述类似的结果。嗯？我应该怎么办？

这是我的角色类绘制函数，它由在计时器上运行的 update() 调用。

```
this.Draw = function () {
    // var centerX = this.currentX + (this.avatarWidth/2);
    // var centerY = this.currentY + (this.avatarHeight/2);
    // console.log("hermes' supposed draw location = " + centerX + "," + centerY + " | currentX,Y = " + this.currentX + "," + this.currentY);
    // console.log("currentX,Y = " + this.currentX + "," + this.currentY);
    context.drawImage(hermesAvatar, this.currentX, this.currentY, this.avatarWidth, this.avatarHeight);
}; // end draw fxn 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T23:06:19.930

*减去*，不加，宽度和高度的一半：

```
this.Draw = function () {
    var centerX = this.currentX - this.avatarWidth / 2;
    var centerY = this.currentY - this.avatarHeight / 2;
    // console.log("hermes' supposed draw location = " + centerX + "," + centerY + " | currentX,Y = " + this.currentX + "," + this.currentY);
    // console.log("currentX,Y = " + this.currentX + "," + this.currentY);
    context.drawImage(hermesAvatar, centerX, centerY, this.avatarWidth, this.avatarHeight);
}; // end draw fxn 
```

# jquery - 验证下拉菜单

> ID：10132998
> 
> 赞同：2
> 
> 时间：2012-04-12T22:52:51.117
> 
> 标签：jquery, validation, drop-down-menu

好的，所以我正在尝试使用自定义规则验证我的下拉列表，并且不想内联，因为它需要是一个整数值。这意味着它在提交时不能有请选择一个选项。所以我不知道我是否需要禁用它或者我应该如何处理它。

```
<select id="sel1R3" class="chzn-done" name="sticky" style="display: none;">
    <option selected="selected" value="">Please Select An Option</option>
    <option value="0">No</option>
    <option value="1">Yes</option>
</select> 
```

**编辑：**现在由于某种原因它没有显示下拉的验证错误。

jQuery：

```
$(document).ready(function()
{

$.validator.addMethod("valueNotEquals", function (value, element, arg) {
    return arg != value;
}, "Message to User");

/*
* Validate the form when it is submitted
*/
var validateform = $("#newArticleForm").validate({
    rules: {
        title: {
            required: true,
            minlength: 5
        },
        category: {
            required: true,
            {valueNotEquals: "-1"}
        },
        sticky: {
            required: true,
            {valueNotEquals: "-1"}
        },
        comments: {
            required: true,
            {valueNotEquals: "-1"}
        },
        datetime: {
            required: true,
            date: true
        },
        status: {
            required: true,
            {valueNotEquals: "-1"}
        },
        file: {
            required: true,
            accept: 'png|jpe?g|gif'
        },
        permalink: {
            required: true,
        },
        article: {
            required: true,
            minlength: 5
        }
    },
    invalidHandler: function(form, validator) {
        var errors = validator.numberOfInvalids();
        if (errors) {
            var message = errors == 1
            ? 'You missed 1 field. It has been highlighted.'
            : 'You missed ' + errors + ' fields. They have been highlighted.';
            $('.box .content').removeAlertBoxes();
            $('.box .content').alertBox(message, {type: 'warning', icon: true, noMargin: false});
            $('.box .content .alert').css({
                width: '100%',
                margin: '0',
                borderLeft: 'none',
                borderRight: 'none',
                borderRadius: 0
            });
        } else {
            $('.box .content').removeAlertBoxes();
        }
    },
    showErrors : function(errorMap, errorList) {
        this.defaultShowErrors();
        var self = this;
        $.each(errorList, function() {
            var $input = $(this.element);
            var $label = $input.parent().find('label.error').hide();
            $label.addClass('red');
            $label.css('width', '');
            $input.trigger('labeled');
            $label.fadeIn();
        });
    },
    submitHandler: function(form) {
        var dataString = $('#newArticleForm').serialize();
        $.ajax({
            type: 'POST',
            url: 'dashboard/articleSubmit',
            data: dataString,
            dataType: 'json',
            success:  function(data) {
                if (data.error) {
                    $('.box .content').removeAlertBoxes();
                    $('.box .content').alertBox(data.message, {type: 'warning', icon: true, noMargin: false});
                    $('.box .content .alert').css({
                        width: '',
                        margin: '0',
                        borderLeft: 'none',
                        borderRight: 'none',
                        borderRadius: 0
                    });
                }
                else
                {
                    $('.box .content').removeAlertBoxes();
                    $('.box .content').alertBox(data.message, {type: 'success', icon: true, noMargin: false});
                    $('.box .content .alert').css({
                        width: '',
                        margin: '0',
                        borderLeft: 'none',
                        borderRight: 'none',
                        borderRadius: 0
                    }); 
                    $(':input','#newArticleForm')
                    .not(':submit, :button, :hidden, :reset')
                    .val('');  
                }
            }
        });
    }
});

}); 
```

HTML：

```
<div class="grid_6">
        <div class="box">
            <div class="header">
                <img src="http://www.kansasoutlawwrestling.com/kowmanager/assets/img/icons/packs/fugue/16x16/document--plus.png" alt="" width="16" height="16" />
                <h3>Create a News Article</h3>
            </div>
                            <form  method="post" accept-charset="utf-8" id="newArticleForm" enctype="multipart/form-data">                    <div class="content no-padding">
                    <div class="section _100">
                        <label for="title">Title</label>
                        <div>
                            <input type="text" name="title" value=""  />                            </div>
                    </div>

                    <div class="section _100">
                        <label for="category">Category</label>
                        <div>
                            <select name="category">
<option value="" selected="selected">Please Select An Opion</option>
<option value="4">Columns</option>
<option value="2">Headlines</option>
<option value="1">Main News</option>
<option value="3">Rumors</option>
</select>                            </div>
                    </div>

                    <div class="section _100">
                        <label for="sticky">Is Sticky</label>
                        <div>
                            <select name="sticky">
<option value="-1">Please Select An Option</option>
<option value="0">No</option>
<option value="1">Yes</option>
</select>                            </div>
                    </div>

                    <div class="section _100">
                        <label for="comments">Allow Comments</label>
                        <div>
                            <select name="comments">
<option value="-1">Please Select An Option</option>
<option value="0">No</option>
<option value="1">Yes</option>
</select>                            </div>
                    </div>

                    <div class="section _100">
                        <label for="datetime">Date Comments Expire</label>
                        <div>
                            <input id="datetime" type="datetime" name="datetime" />
                        </div>
                    </div>

                    <div class="section _100">
                        <label for="status">Status</label>
                        <div>
                            <select name="status">
 <option value="-1">Please Select An Option</option>
 <option value="0">Inactive</option>
 <option value="1">Active</option>
 </select>                            </div>
                    </div>

                    <div class="section _100">
                        <label for="file">Image</label>                            <div>
                            <input type="file" name="file" value=""  />                            </div>
                    </div>

                    <div class="section _100">
                        <label for="permalink">Permalink</label>
                        <div>
                            <input type="text" name="permalink" value=""  />                            </div>
                    </div>

                    <div class="section _100">
                        <label for="article">Article</label>
                        <div>
                            <textarea name="article" cols="30" rows="5" id="article" ></textarea>                            </div>
                    </div>
                </div><!-- End of .content -->

                <div class="actions">
                    <div class="actions-left">
                        <input type="reset" name="reset" value="Reset" id="reset"  />                        </div>

                    <div class="actions-right">
                        <input type="submit" name="submit" value="Submit" id="submit"  />                        </div>
                </div><!-- End of .actions -->
            </form>            </div><!-- End of .box -->
    </div><!-- End of .grid_6 --> 
```

还有其他想法吗？

**编辑 ：**

我在 jQuery 文档中到处查看，但找不到如何正确执行此操作。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-13T15:29:11.970

指定自定义验证规则的正确方法如下：

```
category: {
    required: true,
    valueNotEquals: "-1"
} 
```

话虽如此，您不必创建自定义规则来处理此问题。只需使用`required:true`并确保选项 value="" 作为您的默认选项，jQuery Validate 将为您处理它。

我已经创建了一个[示例](http://jsfiddle.net/ryleyb/Rq9bn/)供您查看，我将`status`下拉列表更改为使用默认方法，并且我已经修复了您对自定义验证方法的其他引用以显示它有效（这是 @El Yobo 建议的）。我还在你的永久链接对象中修复了一个尾随逗号（这将使整个事情在很多 IE 版本中都不起作用）。

# android - Android C2DM 设备注册给出 401 错误

> ID：10132999
> 
> 赞同：1
> 
> 时间：2012-04-12T22:52:52.100
> 
> 标签：android, push-notification, android-c2dm

我正在尝试使用 Google 的 C2DM 服务注册 Android 设备，但是当我在手机上安装应用程序时尝试这样做时，我在 logcat 中得到以下信息：

W/DefaultRequestDirector（1210）：身份验证错误：无法响应任何这些质询：{} D/C2DMRegistrar（1210）：[C2DMRegistrar.30] 注册：http 错误 401 E/C2DMRegistrar（1210）：[C2DMReg] handleRequest 被捕获org.apache.http.auth.AuthenticationException

我还打印了我发送给 Google 到 logcat 的内容。它明确地遵循仅取出电子邮件地址。这个电子邮件地址是我在谷歌注册的推送通知的发件人。

Intent extras: Bundle[{sender=me@myemail.com, app=PendingIntent{4471c300: android.os.BinderProxy@44762840}}]

ComponentName 对象（startService 调用的结果）：ComponentInfo{com.google.android.gsf/com.google.android.gsf.gtalkservice.PushMessagingRegistrar}

澄清一下，向设备发送实际消息不是问题——我还没有做到这一点。此问题与注册设备有关。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T20:41:36.097

您需要确保完成注册才能完成以下工作： 1\. 使用 google 电子邮件帐户在 Android C2DM 网站上注册 2\. 使用该帐户将注册意图发送到 google 服务器。您的注册意图应如下所示：

```
public void registerApp() {
    Intent intent = new Intent("com.google.android.c2dm.intent.REGISTER");
    intent.putExtra("app",
            PendingIntent.getBroadcast(this, 0, new Intent(), 0));
    intent.putExtra("sender", "youraccont@gmail.com");
    ComponentName result = startService(intent);
    Log.d("Intent", "" + result);
} 
```

还要确保在您的清单中声明这一点

如果您使用的电子邮件帐户不是由谷歌管理的，这也可能导致问题。您只需注册一个新的 gmail 帐户即可用于您的 c2dm 推送通知。

希望这可以帮助