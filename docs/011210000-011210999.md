# StackOverflow 问答 11210000-11210999

# clojure - 描述 project.clj 和 core.clj 中发生的事情的正确术语是什么？

> ID：11210002
> 
> 赞同：2
> 
> 时间：2012-06-26T14:49:40.483
> 
> 标签：clojure, leiningen

在解释 Clojure 构建时，我想使用正确的术语。因此，我的首要问题是，我在以下示例中使用了正确的术语吗？

鉴于我的 project.clj 文件之一：

```
(defproject bene-csv "1.0.4-SNAPSHOT"
  :description "A csv parsing library"
  :dependencies [[org.clojure/clojure "1.3.0"]
                 [clojure-csv/clojure-csv "1.3.2"]
                 [util "1.0.2-SNAPSHOT"]]

  :aot [bene-csv.core]
  :omit-source true) 
```

我相信正确的术语是我正在创建对 Clojure 1.3.0、clojure-csv 和一个我的模块（名为 util）的依赖项。

那是对的吗？

鉴于我的 core.clj 的标题

```
(ns bene-csv.core
  ^{:author "Charles M. Norton",
    :doc "bene-csv is a small library to parse a .csv file.
        Created on March 8, 2012"}
  (:require [clojure.string :as cstr])
  (:require [util.core :as utl])
  (:use clojure-csv.core)) 
```

我是包含或引用这些模块，还是应该使用不同的术语？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T15:00:00.630

在 project.clj 中，您正在定义特定包（或项目）的依赖项，这些包（或项目）将在类路径中为您的项目工作所必需。

在 core.clj 中，您引用命名空间或导入命名空间变量，具体取决于您使用的内容（:use 或 :require）

# c++ - 编译时的类型特化

> ID：11210007
> 
> 赞同：6
> 
> 时间：2012-06-26T14:49:48.510
> 
> 标签：c++, linux, templates, gcc, c++11

我正在编写一个与`std::function`（或至少这些类在许多方面相似）共享几个不同功能的类。大家都知道`std::function`是通过指定模板参数（即`std::function<void (std::string&)>`）来实例化的，我的类也是一样。不过我有一个例外，如果返回值为 void ( ) ，我想在我的类中专门化一个*函数。*`std::function<"return value" ("parameters">`我需要在编译时完成此操作，但我无法使其正常工作。以下是一些解释的测试代码：

```
#include <iostream>
#include <type_traits>

template <typename T> class Test { };

template <typename Ret, typename... Args>
class Test<Ret (Args...)>
{
public:
    Ret operator()(Args...)
    {
        if(std::is_void<Ret>::value)
        {
             // Do something...
        }

        else /* Not a void function */
        {
            Ret returnVal;
            return returnVal;
        }
    }
};

int main(int argc, char * argv[])
{
    Test<void (char)> test;
    test('k');
} 
```

如您所见，如果编译器在上述测试中没有删除“else”分支，我的代码将尝试创建一个 void 值（即`void returnVal;`）。问题是编译器没有删除分支所以我最终得到一个编译器错误：

> ./test.cpp: 在 'Ret Test::operator()(Args ...) [with Ret = void; Args = {char}]': ./test.cpp:27:10: 从这里需要 ./test.cpp:18:8: 错误：变量或字段“returnVal”声明为无效 ./test.cpp:19:11 ：错误：带有值的返回语句，在函数返回'void'[-fpermissive]

通常会使用`std::enable_if`with `std::is_void`，问题是我不想专注于*函数*模板，而是专注于*类*模板。

```
template <typename Ret, typename... Args>
class Test<Ret (Args...)>
{
public:
    typename std::enable_if<!std::is_void<Ret>::value, Ret>::type 
    Ret operator()(Args...)
    {
        Ret returnVal;
        return returnVal;
    }

    typename std::enable_if<std::is_void<Ret>::value, Ret>::type 
    Ret operator()(Args...)
    {
        // It's a void function
        // ...
    }
}; 
```

如果我改用上面的代码，我最终会遇到更多错误并且没有解决方案

```
./test.cpp:11:2: error: expected ‘;’ at end of member declaration
./test.cpp:11:2: error: declaration of ‘typename std::enable_if<(! std::is_void<_Tp>::value), Ret>::type Test<Ret(Args ...)>::Ret’
./test.cpp:6:11: error:  shadows template parm ‘class Ret’
./test.cpp:11:24: error: ISO C++ forbids declaration of ‘operator()’ with no type [-fpermissive]
./test.cpp:18:2: error: expected ‘;’ at end of member declaration
./test.cpp:18:2: error: declaration of ‘typename std::enable_if<std::is_void<_Tp>::value, Ret>::type Test<Ret(Args ...)>::Ret’
./test.cpp:6:11: error:  shadows template parm ‘class Ret’
./test.cpp:18:24: error: ISO C++ forbids declaration of ‘operator()’ with no type [-fpermissive]
./test.cpp:18:6: error: ‘int Test<Ret(Args ...)>::operator()(Args ...)’ cannot be overloaded
./test.cpp:11:6: error: with ‘int Test<Ret(Args ...)>::operator()(Args ...)’
./test.cpp: In member function ‘int Test<Ret(Args ...)>::operator()(Args ...)’:
./test.cpp:22:2: warning: no return statement in function returning non-void [-Wreturn-type]
./test.cpp: In instantiation of ‘int Test<Ret(Args ...)>::operator()(Args ...) [with Ret = void; Args = {char}]’:
./test.cpp:28:10:   required from here
./test.cpp:13:7: error: variable or field ‘returnVal’ declared void
./test.cpp: In member function ‘int Test<Ret(Args ...)>::operator()(Args ...) [with Ret = void; Args = {char}]’:
./test.cpp:15:2: warning: control reaches end of non-void function [-Wreturn-type] 
```

对不起，如果我只是愚蠢的，答案是显而易见的。我对模板相当陌生，在任何其他线程/问题中都找不到合适的答案。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-26T15:03:02.503

从您的描述中，有一些事情不是很清楚，所以我将从最一般的答案开始。

假设模板具有其他必须保持相同行为的函数，并且您只想重新定义该特定函数的行为，最简单的答案是将模板一分为二，并使用继承来合并它们。此时，您可以在基本模板上使用部分模板特化：

```
template <typename T, typename... Args>
struct tmpl_base {
   T operator()( Args... args ) {
       //generic
   }
};
template <typename... Args>
struct tmpl_base<void,Args...> {
   void operator()( Args... args ) {
   }
};

template <typename Ret, typename... Args>
class Test<Ret (Args...)> : tmp_base<Ret,Args...> {
   // do not declare/define operator(), maybe bring the definition into scope:
   using tmp_base<Ret,Args...>::operator();

   // Rest of the class 
```

如果这是您模板中的唯一功能，那么部分特化是一个更简单的解决方案，不需要滥用继承。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T15:00:43.240

一种解决方案是部分专业化您的课程模板。

```
#include <iostream>
#include <type_traits>

template <typename T> class Test { };

template <typename Ret, typename... Args>
class Test<Ret (Args...)>
{
public:
    Ret operator()(Args...)
    {

        std::cout<<"non-void function"<<std::endl;
        Ret returnVal;
        return returnVal;

    }
};

template <typename... Args>
class Test<void (Args...)>
{
public:
    void operator()(Args...)
    {

        std::cout<<"void function"<<std::endl;
    }
};

int main(int argc, char * argv[])
{
    Test<void (char)> test;
    test('k');
} 
```

# caching - 如何将 GET 响应缓存 5 小时？

> ID：11210011
> 
> 赞同：0
> 
> 时间：2012-06-26T14:49:57.987
> 
> 标签：caching, jersey, maven-jetty-plugin

# 我想要的是

我正在开发一个使用球衣来映射资源的 maven-jetty-plugin。如何将版本号缓存 5 小时，这样我就不必在每次页面加载时都获取它？

# 我的代码

这是加载后将包含版本号的 html 代码：

```
...

<footer>
  <hr/>
  VERSION: <span id="version-container">...Loading...</span>
</footer> 
```

这是带有 servlet 映射到 'localhost:8080/rest/' 的 web.xml：

```
<web-app xmlns="http://java.sun.com/xml/ns/javaee"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"
        version="3.0">
    <servlet>
        <servlet-name>Jersey Web Application</servlet-name>
        <servlet-class>
            com.sun.jersey.spi.container.servlet.ServletContainer
        </servlet-class>
        <init-param>
            <param-name>com.sun.jersey.config.property.packages</param-name>
            <param-value>com.resources</param-value>
        </init-param>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>Jersey Web Application</servlet-name>
        <url-pattern>/rest/*</url-pattern>
    </servlet-mapping>
</web-app> 
```

下面是在 'localhost:8080/rest/version' 处理 GET 的 java 代码：

```
/* ... package & imports omitted ... */

@Path("/")
public class RootResource {

    @GET
    @Path("/version")
    @Produces(MediaType.APPLICATION_JSON)
    public String versionAsJson(){
        return String.format("{ \"version\": \"%s\"}", "v.01");
    }
} 
```

这是页面加载后加载版本的javascript代码（使用jQuery）：

```
$(document).ready(function() {
    $.get("http://localhost:8080/rest/version",
        function(response){
            $("#version-container").html(response.version);
        },
        "json"
    ).error(function(){
        $("#version-container").html("[FAILED TO GET VERSION]");
    });
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T19:44:30.227

[Guava](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/cache/CacheBuilder.html)库有非常好的缓存支持：

```
@Path("/")
public class Service {

  protected LoadingCache<String, String> cache = CacheBuilder.newBuilder()
      .expireAfterWrite(5L, TimeUnit.HOURS).maximumSize(1L)
      .build(new CacheLoader<String, String>() {
        @Override
        public String load(String key) throws Exception {
          return String.format("{ \"version\": \"%s\"}", "v.01");
        }
      });

  @GET
  @Path("/version")
  @Produces(MediaType.APPLICATION_JSON)
  public String run() throws ExecutionException {
    return cache.get("version");
  }

} 
```

# templates - 浏览器是否缓存深度包含的模板文件？

> ID：11210016
> 
> 赞同：0
> 
> 时间：2012-06-26T14:50:03.187
> 
> 标签：templates, caching, browser

在框架模板引擎中，假设我们有 header、body、footer 文件，body 本身包含banner.tpl.php、content.tpl.php 等。浏览器会缓存这些内部文件吗？

如果答案是否定的，那有什么好处？我们可以缓存服务器端吗？或者它根本与缓存无关？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T14:54:58.160

您的 php 头文件只有服务器知道，它不会将它们“按原样”发送到浏览器。浏览器将拥有它们的 html 版本，其中所有变量占位符都替换为它们的实际值。所以答案是**否定**的。

模板的好处是将表示与计算它将包含什么的过程分开，它与缓存恕我直言无关。除了可以缓存（取决于模板引擎）模板文件内容的持久服务器（java，而不是 php），在查询和用户之间重用它们。

# javascript - 乐观骨干应用

> ID：11210019
> 
> 赞同：2
> 
> 时间：2012-06-26T14:50:14.577
> 
> 标签：javascript, backbone.js, optimistic

我只是想知道是否有任何关于构建乐观应用程序的文章、讨论和一般建议？

从 0.9 开始，Backbone 将其模型更改为默认乐观。现在，如果我要保存/更新模型，是否需要等待服务器的响应？显然，如果不是，结果是立竿见影的，这会导致应用程序更加快速。如果在服务器上更新或创建新模型时出现错误，这也可能导致问题。这让我想到了下一点。

如果我正在构建一个乐观的应用程序，我该如何处理错误？假设模型已经创建/更新并且如果没有将数据存储在本地存储中并定期尝试保存到服务器是否可行？我没有仔细研究过[这个插件](https://github.com/Ask11/backbone.offline)，但我认为它具有相同的心态。

你有什么意见和建议？假设我正在构建一个非事务性应用程序。

# java - 为什么我的 jar 没有运行？

> ID：11210021
> 
> 赞同：1
> 
> 时间：2012-06-26T14:50:15.217
> 
> 标签：java, packaging, executable-jar

我可以在 jar 文件之外运行我的程序，但我想部署它并将其作为 jar 运行。

此命令适用于运行 .class 文件：

```
java -classpath .;./libs/mail.jar;./libs/jcommon-1.0.16.jar;./libs/jfreechart-1.0.13.jar;./libs/jxl.jar;./libs/ojdbc5.jar gdsreports/ReportsDriver 
```

这就是我打包 jar 文件的方式：

```
jar -cfvm GDSReports.jar GDSReports.mf gdsreports/* util/* libs/* 
```

我的清单如下所示：

```
Manifest-Version: 1.0
Main-Class: gdsreports.ReportsDriver
Created-By: Me 
```

这就是我运行我的 jar 的方式：

```
java -classpath .;./libs/mail.jar;./libs/jcommon-1.0.16.jar;./libs/jfreechart-1.0.13.jar;./libs/jxl.jar;./libs/ojdbc5.jar;./util;./gdsreports -jar GDSReports.jar 
```

但是，运行我运行 jar 文件，它无法加载所有库。这是它吐出来的：

```
Error loading configuration file: config/reportConfig
Error loading configuration file: config/gdsIds
Exception in thread "main" java.lang.NoClassDefFoundError: jxl/write/WriteException
        at util.ReportConfig.setupReports(ReportConfig.java:197)
        at util.ReportConfig.setup(ReportConfig.java:65)
        at gdsreports.ReportsDriver.main(ReportsDriver.java:36)
Caused by: java.lang.ClassNotFoundException: jxl.write.WriteException
        at java.net.URLClassLoader$1.run(Unknown Source)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(Unknown Source)
        at java.lang.ClassLoader.loadClass(Unknown Source)
        at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
        at java.lang.ClassLoader.loadClass(Unknown Source)
        ... 3 more 
```

这是预期的输出：

```
Error loading configuration file: config/reportConfig
Error loading configuration file: config/gdsIds
-------------------------------------
Running TimingReport with parameters:
        Filename: Reports/06-26-2012/TimingRptZL_06-26-2012.xls
        Brand: ZL
        Using production database: false
-------------------------------------
-------------------------------------
Exception in thread "main" java.lang.NullPointerException
        at gdsreports.TimingReport.fillChartData(TimingReport.java:417)
        at gdsreports.TimingReport.fillReport(TimingReport.java:238)
        at gdsreports.TimingReport.run(TimingReport.java:131)
        at gdsreports.ReportsDriver.main(ReportsDriver.java:40) 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T14:51:30.230

使用参数时，`-classpath`参数（和`CLASSPATH`环境变量）将被忽略`-jar`。

如果一个 jar 文件依赖于其他库，你有两种选择：

1.  使用文件`Class-Path`中的标题`MANIFEST.MF`来调出其他罐子，或
2.  打开其他罐子的包装并将它们包含在您的罐子中。

# c++ - OpenCV中的pointPolygonTest

> ID：11210027
> 
> 赞同：1
> 
> 时间：2012-06-26T14:50:35.477
> 
> 标签：c++, opencv

我想使用`pointPolygonTest`，但我有问题。我的 OpenCV 版本是 2.2。

我尝试使用[本教程](http://docs.opencv.org/doc/tutorials/imgproc/shapedescriptors/point_polygon_test/point_polygon_test.html#point-polygon-test)中的代码。

我`findContours`用来检测图像中的轮廓。在 OpenCV 2.2 下返回一个`vector<vector<Point> >`.

问题是`pointPolygonTest`接受 a`cv::Mat`作为条目。因此代码不能用 OpenCV 2.2 编译：

```
error: invalid initialization of reference of type ‘const cv::Mat&’ from expression of type ‘std::vector<cv::Point_<int>, std::allocator<cv::Point_<int> > >’ 
```

在较新的 OpenCV 版本下，该`findContours`函数会返回`vector<Mat>`，因此很容易传递给它`pointPolygonTest`（参见示例）。

我想我可以`vector< vector<Point> >`将`vector<Mat>`. 不幸的是，文档对格式不是很清楚。

有人有建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T15:12:04.453

> 问题是 pointPolygonTest 接受 cv::Mat 作为条目。

那么为什么要使用旧版本的 OpenCV？这是 OpenCV 版本中此方法的声明。2.4.1：

```
C++: double pointPolygonTest(InputArray contour, Point2f pt, bool measureDist) 
```

如您所见，第一个参数是[InputArray](http://docs.opencv.org/modules/core/doc/intro.html#inputarray-and-outputarray)而不是矩阵。从那篇文章：

> 您可以假设您始终可以使用 Mat、std::vector<>、Matx<>、Vec<> 或 Scalar 来代替 InputArray/OutputArray。

因此，这意味着您可以使用`std::vector<vector<Point> >`as`InputArray`和 so 作为函数的输入`pointPolygonTest`。

这是使用的简单示例`pointPolygonTest`（当然在新版本中）：

```
vector<vector<Point> > contours;
vector<Vec4i> hierarchy;
Mat src;

findContours(src, contours, hierarchy, RETR_TREE, CHAIN_APPROX_SIMPLE);

for(size_t i = 0; i<contours.size(); i++)
{
    if (pointPolygonTest(contours[i], point, false) > 0)
    {
        //point is inside polygon
        ...
        break;
    }
} 
```

所以只需更新到新版本。

或者，如果您想在旧版本中使用它，请尝试以下转换：

```
 (Mat)contours[i] 
```

或使用构造函数：

```
 Mat(contours[i]) 
```

希望能帮助到你。

# objective-c - 身份验证屏幕消失时，我的 Facebook 应用程序崩溃

> ID：11210034
> 
> 赞同：0
> 
> 时间：2012-06-26T14:51:05.943
> 
> 标签：objective-c, ios, facebook

我正在尝试将 facebook iOS SDK 集成到我的应用程序中，在我的应用程序委托标头中，我执行以下操作：

```
 #import <UIKit/UIKit.h>
#import "Facebook.h"
#import "FBConnect.h"

@class ViewController;

@interface AppDelegate : UIResponder <UIApplicationDelegate>
{
Facebook *facebook;
}

@property (nonatomic,strong) Facebook *facebook;

@property (strong, nonatomic) UIWindow *window;

@property (strong, nonatomic) ViewController *viewController;

@end 
```

并在实现文件的方法 didFinishLaunchingWithOptions 方法中：

```
MyFacebooDelegate *controllerDelegate = [[MyFacebooDelegate alloc] init];
facebook = [[Facebook alloc] initWithAppId:appID andDelegate:controllerDelegate];

NSUserDefaults *userDefault = [NSUserDefaults standardUserDefaults];
if([userDefault objectForKey:@"FBAccessTokenKey"] && [userDefault objectForKey:@"FBExpirationDateKey"])
{
    facebook.accessToken = [userDefault objectForKey:@"FBAccessTokenKey"];
    facebook.expirationDate = [userDefault objectForKey:@"FBExpirationDateKey"];

}

if(![facebook isSessionValid])
{
    NSArray *permision = [[NSArray alloc]initWithObjects:@"read_stream",nil] ;
    [facebook authorize:permision];
} 
```

MyFacebooDelegate 类是我实现 Facebook 代表（如 FBSessionDelegate 等）的地方。

我也处理了 handleOpenURL 和 OpenURL，当我运行应用程序时，我在 safari 中获得了 facebook 身份验证屏幕，然后按“确定”屏幕被关闭并返回到我的应用程序，但有时应用程序崩溃并退出，这里是编译器告诉我错误：

```
- (void)fbDialogLogin:(NSString *)token expirationDate:(NSDate *)expirationDate {
self.accessToken = token;
self.expirationDate = expirationDate;
[_lastAccessTokenUpdate release];
_lastAccessTokenUpdate = [[NSDate date] retain];
[self reloadFrictionlessRecipientCache];
if ([self.sessionDelegate respondsToSelector:@selector(fbDidLogin)]) {
    [self.sessionDelegate fbDidLogin];
} 
```

特别是编译器指出这一行：

```
if ([self.sessionDelegate respondsToSelector:@selector(fbDidLogin)]) { 
```

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T15:06:39.440

穆罕默德

以下行是错误的：

```
if ([self.sessionDelegate respondsToSelector:@selector(fbDidLogin)]) { 
```

它应该如下所示：

```
if ([self.sessionDelegate respondsToSelector:@selector(fbDidLogin:)]) { 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T07:43:19.390

当您实例化您的会话委托时：

```
MyFacebooDelegate *controllerDelegate = [[MyFacebooDelegate alloc] init];
facebook = [[Facebook alloc] initWithAppId:appID andDelegate:controllerDelegate]; 
```

您不会以任何其他方式保留它。如果您查看 Facebook SDK 文件`Facebook.h`，您会看到该`sessionDelegate`属性是 type `assign`。这意味着您必须负责确保委托对象在向其发送消息时存在。

要解决此问题，请添加您的 AppDelegate.h 文件：

```
@property (strong, nonatomic) MyFacebooDelegate *controllerDelegate; 
```

在 中`didFinishLaunchingWithOptions:`，而不是我帖子顶部的代码，请执行以下操作：

```
self.controllerDelegate = [[MyFacebooDelegate alloc] init];
facebook = [[Facebook alloc] initWithAppId:appID andDelegate:self.controllerDelegate]; 
```

这样，将保持对您的委托对象的强引用，并且不会过早地释放它。

希望这可以帮助！如果您有任何问题，请告诉我。

# php - 阿拉伯语编码字符的PHP URL重写模式

> ID：11210036
> 
> 赞同：1
> 
> 时间：2012-06-26T14:51:12.580
> 
> 标签：php, url-rewriting, arabic

该主题与阿拉伯语编码字符的 URL 重写模式有关。我们想使用 PHP/MYSQL 为插入数据库的每个标题创建一个标题重写，在英文的情况下，一切正常，使用下面的函数：

```
$rlink =preg_replace ('/ /i', '-', $link);
$rlink2 =preg_replace ('/[^a-z0-9\-]/i', '', $rlink);
$rlink2 =preg_replace ('/--/i', '-', $rlink2);
return $rlink2; 
```

此功能不能用于阿拉伯字符，它会消除所有未进入（az）的字符，因此不能使用。

如何继续使用 PHP/MYSQL 在 url 中使用阿拉伯标题，如下所示 `http://localhost/html/test/الصفحة-الرئيسية/` ：

谢谢你的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T15:17:34.543

您需要将您的字符集指定为 UTF-8 才能存储阿拉伯字符，因此在将记录插入数据库之前尝试将这些行添加到您的 php（假设您正在运行 mysql）

```
mysql_query('SET character_set_results=utf8');
mysql_query('SET names=utf8');
mysql_query('SET character_set_results=utf8'); 
```

此外，还有一些关于 SO 的其他问题可以解决类似问题，请查看：

[如何让 MySQL 正确处理 UTF-8](https://stackoverflow.com/questions/202205/how-to-make-mysql-handle-utf-8-properly/202246)

[通过 php 用 mysql 设置 utf8](https://stackoverflow.com/questions/624301/setting-utf8-with-mysql-through-php)

[PHP/MySQL 有编码问题](https://stackoverflow.com/questions/405684/php-mysql-with-encoding-problems)

[使用 PHP 和 MySQL 存储和显示 unicode 字符串 (हिन्दी)](https://stackoverflow.com/questions/1198701/storing-and-displaying-unicode-string-using-php-and-)

编辑：我可能误读了这个问题，您是否试图重写物理 URL 以使用阿拉伯字符或将 URL 存储在 MySql 中？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T15:32:19.487

您可以使用 unicode 字符类。

[http://www.php.net/manual/en/regexp.reference.unicode.php](http://www.php.net/manual/en/regexp.reference.unicode.php)

它允许您匹配 unicode 字符的属性，例如字母、数字或标点符号

所以你的线：

```
$rlink2 = preg_replace ('/[^a-z0-9\-]/i', '', $rlink); 
```

会成为：

```
$rlink2 = preg_replace ('/[^\pL\pN\-]/i', '', $rlink); 
```

其中 \pL 表示搜索任何字母的类“L”，而 \pN 表示搜索任何数字的类“N”。

我不是说阿拉伯语的人，但我很确定您还需要至少包含一个其他类，以允许在连接器和其他用于将阿拉伯字母连接成单词的字素上进行匹配，因为这些不会被分类作为字母，但会是某种形式的标点符号。

一旦你提取了正则表达式，只要你的 MySQL 设置为使用 UTF8 就可以了。

# javascript - SharePoint 2010 和电子邮件列表视图

> ID：11210038
> 
> 赞同：1
> 
> 时间：2012-06-26T14:51:25.100
> 
> 标签：javascript, sharepoint-2010

我需要一些创造性的想法在这里...

我有一个包含两个 webpart 的 webpart 页面。Webpart #1 允许用户从一些过滤器选项中进行选择......所选的选项会影响 webpart #2，它显示由过滤器选项确定的列表视图。

我想要的是在页面上添加一个按钮，允许我通过电子邮件发送屏幕上的当前列表视图。几乎就像屏幕/打印并粘贴到前景中。

也许一些javascript？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T09:46:33.173

看一下[html2canvas](http://html2canvas.hertzen.com/)，它可以让你对当前页面进行截图，然后你可以将图像导出到 Outlook 中使用

# c# - Xml 和 Xna 保存和加载多级 windows phone

> ID：11210043
> 
> 赞同：1
> 
> 时间：2012-06-26T14:51:35.700
> 
> 标签：c#, windows-phone-7, xna

我正在尝试创建一个游戏保存系统，其中涉及在每个级别完成并考虑使用 xml 时为每个级别保存分数。我很困惑如何做到这一点。我在 MSDN 上看到过类似粒子系统示例的序列化，但每个粒子系统都被拆分为单独的文件。我想要这样的东西：

```
parent

  level
    id 1 /id
  score 0 /score
  /level
  level
    id 2 /id
  score 0 /score
  /level 
```

等等然后从一个xml加载所有数据。然后让我感到困惑的是我将如何序列化和反序列化它。帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T15:10:05.557

您需要设置一个包含所有数据的类，例如：

```
public class SavedGame
{
    public class Level
    {
        public int id;
        public int score;
    }

    [XmlElement()]
    public List<Level> level = new List<Level>();
} 
```

然后您可以使用`XmlSerializer`该类对其进行序列化和反序列化。如果你在网上搜索，我相信你可以找到很多这样的例子。

# python - 薪水未运行测试

> ID：11210046
> 
> 赞同：0
> 
> 时间：2012-06-26T14:51:42.747
> 
> 标签：python, testing, random-testing

```
@with_checker([int])
    def check_sort(list_of_ints):
        self.assertTrue(isinstance(list_of_ints, list))
        self.assertTrue(len(list) == len(qsort(list)))
        self.assertTrue(False) 
```

我正在尝试运行它，但它不会运行，这是什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T14:51:43.807

测试名称必须以“test_”开头

# java - 为什么我会收到“createCriteria is not valid without active transaction”异常？

> ID：11210050
> 
> 赞同：0
> 
> 时间：2012-06-26T14:51:46.203
> 
> 标签：java, hibernate, transactions, junit

我正在使用 Hibernate 4.0.1.Final。我正在尝试对我的 DAO 对象运行 JUnit 测试，但遇到了异常，“createCriteria 在没有活动事务的情况下无效”。奇怪的是，我在调用 DAO 方法之前开始了事务。我有

```
@Test
public void testFindProductByTitle() { 
    final Session session = sessionFactory.openSession();
    final Transaction tx = session.beginTransaction();
    final Product product = productDao.findByTitle(testProps.getProperty("test.product.name"));
    tx.commit();  
    session.close();
    Assert.assertNotNull(product);
    Assert.assertEquals(testProps.getProperty("test.product.name"), product.getName());
} 
```

我的 DAO 包括

```
public Product findByTitle(String title) {
    final Session session = sessionFactory.getCurrentSession();
    final Criteria criteria = session.createCriteria(Product.class);
    criteria.add(Restrictions.eq("name", title));
    final List<Product> results = criteria.list();
    final Product result = results.get(0); 
    return result;
} 
```

代码在“final Criteria criteria = session.createCriteria(Product.class);”处终止 除了……</p>

```
org.hibernate.HibernateException: createCriteria is not valid without active transaction
    at org.hibernate.context.internal.ThreadLocalSessionContext$TransactionProtectionWrapper.invoke(ThreadLocalSessionContext.java:346)
    at $Proxy21.createCriteria(Unknown Source)
    at org.myco.myproj.dido.dao.lycea.ProductDAOImpl.findByTitle(ProductDAOImpl.java:20)
    at org.myco.myproj.dao.ProductDAOTest.testFindByProductTitle(ProductDAOTest.java:32)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:44)
    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:41)
    at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)
    at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:76)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:193)
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:52)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:191)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:42)
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:236)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197) 
```

任何想法出了什么问题？Junit 测试中的 sessionFactory 与我初始化 DAO 测试时使用的 sessionFactory 相同。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T14:54:59.817

`getCurrentSession()`不返回与`openSession()`. 前者返回上下文（默认情况下是线程绑定的）会话。后者*创建*一个不同于上下文会话的新会话。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-25T09:49:01.790

只需从 void testFindProductByTitle() 中剪下一行并粘贴到 Product findByTitle(String) 方法中，即：

```
final Transaction tx = session.beginTransaction(); 
```

# xcode4 - 如何在 xCode 4 中搜索完美匹配？

> ID：11210055
> 
> 赞同：0
> 
> 时间：2012-06-26T14:51:52.553
> 
> 标签：xcode4

xCode4 中是否有一种方法可以搜索具有特定名称的所有变量，而不仅仅是尝试在所有代码中匹配名称的一部分？

我需要完美匹配，例如，我有一个名为“myVar”的变量，当我搜索它时，我不想要包含“myVar”在内的较长名称的结果，例如“myVar2”或“allmyVars”。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T15:00:24.500

当然有办法。只需在搜索导航器上调出高级选项（单击放大镜 >*显示查找选项*）并选择*匹配搜索词*

![在此处输入图像描述](../Images/c342fbc2eadf1f729cd87f3a8133b403.png)

# asp.net - 为什么 IIS 7.5 在重启后会重新编译整个网站？

> ID：11210059
> 
> 赞同：4
> 
> 时间：2012-06-26T14:52:02.323
> 
> 标签：asp.net, iis-7, iis-7.5

今天早上，在 Windows 更新运行并重新启动了一对 Web 服务器后，我注意到其中一个运行的站点没有响应。经过一番挖掘，我注意到 asp.net 临时文件文件夹中有 100000 次读/写/删除操作。我们能做些什么来避免这种情况吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T15:00:40.090

您可以通过预编译将其调低一些：

[如何防止 IIS 编译网站？](https://stackoverflow.com/questions/2359120/how-do-i-prevent-iis-from-compiling-website)

但 IIS 认为有些东西发生了变化，需要重新编译。更新是否安装了框架组件的修补程序？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T15:04:10.993

如果这适合您的情况，您可以考虑将您的网站部署为预编译的 Web 应用程序而不是网站？

# android - clock_gettime 无法立即更新

> ID：11210063
> 
> 赞同：2
> 
> 时间：2012-06-26T14:52:11.670
> 
> 标签：android, c, linux, timer, arm

**更新**

在检查了时间分辨率后，我们尝试在内核空间调试问题。

```
unsigned long long task_sched_runtime(struct task_struct *p)
{
    unsigned long flags;
    struct rq *rq;
    u64 ns = 0;

    rq = task_rq_lock(p, &flags);
    ns = p->se.sum_exec_runtime + do_task_delta_exec(p, rq);
    task_rq_unlock(rq, &flags);

    //printk("task_sched runtime\n");
    return ns; 
} 
```

我们的新实验表明时间`p->se.sum_exec_runtime`不会立即更新。但是如果我们`printk()`在函数内部添加。时间将立即更新。

**老的**

我们正在开发一个安卓程序。但是，该函数测量的时间`threadCpuTimenanos()`在我们的平台上并不总是正确的。

经过实验，我们发现返回的时间`clock_gettime`不是即时更新的。即使经过几次 while 循环迭代，我们得到的时间仍然没有改变。

这是我们的示例代码：

```
while(1)
{
    test = 1;
    test = clock_gettime(CLOCK_THREAD_CPUTIME_ID, &now);

    printf(" clock gettime test 1 %lx, %lx , ret = %d\n",now.tv_sec , now.tv_nsec,test );

    pre = now.tv_nsec;
    sleep(1);
} 
```

此代码在 x86 PC 上运行良好。但它不能在我们的内核 2.6.35.13 的嵌入式平台 ARM Cortex-A9 中正确运行。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T14:07:59.977

我更改了 clock_gettime 以使用 CLOCK_MONOTONIC_RAW ，将线程分配给一个 CPU，我得到不同的值。我也在使用双皮质 A9

```
while(1)
{
    test = 1;
    test = clock_gettime(CLOCK_MONOTONIC_RAW, &now);

    printf(" clock gettime test 1 %lx, %lx , ret = %d\n",now.tv_sec , now.tv_nsec, test );

    pre = now.tv_nsec;
    sleep(1);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T14:58:40.063

的分辨率`clock_gettime`取决于平台。用于[`clock_getres()`](http://pubs.opengroup.org/onlinepubs/009604599/functions/clock_getres.html)在您的平台上查找分辨率。根据您的实验结果，pc-x86 和您的目标平台上的时钟分辨率是不同的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T02:41:41.743

在android CTS中，有一个case也有同样的问题。两次读取计时器，但它们是相同的

testThreadCpuTimeNanos 在 android.os.cts.DebugTest.testThreadCpuTimeNanos 处失败 junit.framework.AssertionFailedError

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-21T07:36:14.973

> $man clock_gettime
> 
> ...
> 
> SMP 系统注意事项
> 
> CLOCK_PROCESS_CPUTIME_ID 和 CLOCK_THREAD_CPUTIME_ID 时钟是在许多平台上使用来自 CPU 的计时器实现的（i386 上的 TSC，Itanium 上的 AR.ITC）。这些寄存器在 CPU 之间可能不同，因此**如果进程迁移到另一个 CPU，这些时钟可能会返回虚假结果**。
> 
> 如果 SMP 系统中的 CPU 具有不同的时钟源，则无法保持定时器寄存器之间的相关性，因为每个 CPU 将以稍微不同的频率运行。如果是这种情况，那么 clock_getcpuclockid(0) 将返回 ENOENT 来表示这种情况。只有当可以确保进程停留在某个 CPU 上时，这两个时钟才会有用。
> 
> SMP 系统中的处理器并非在完全相同的时间启动，因此定时器寄存器通常以偏移量运行。一些架构包括尝试在启动时限制这些偏移的代码。但是，代码不能保证准确地调整偏移量。Glibc 不包含处理这些偏移量的规定（与 Linux 内核不同）。通常，这些偏移量很小，因此在大多数情况下影响可以忽略不计。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-26T17:43:06.487

时钟测量所花费的`CLOCK_THREAD_CPUTIME_ID`CPU 时间，而不是实时的，并且您花费的 CPU 时间几乎为零。此外，`CLOCK_THREAD_CPUTIME_ID`（特定于线程的 CPU 时间）在 Linux/glibc 上实现不正确，甚至可能在 glibc 上根本不起作用。`CLOCK_PROCESS_CPUTIME_ID`或者任何一个人的名字应该会更好。

# matlab - 在 numpy 中获取线性化索引

> ID：11210070
> 
> 赞同：4
> 
> 时间：2012-06-26T14:52:21.817
> 
> 标签：matlab, numpy

我需要模拟 MATLAB 函数`find`，它返回数组非零元素的线性索引。例如：

```
>> a = zeros(4,4)
a =

     0     0     0     0
     0     0     0     0
     0     0     0     0
     0     0     0     0
>> a(1,1) = 1
>> a(4,4) = 1
>> find(a)
ans =

     1
    16 
```

numpy 有类似的功能`nonzero`，但它返回一个索引数组的元组。例如：

```
In [1]: from numpy import *
In [2]: a = zeros((4,4))

In [3]: a[0,0] = 1

In [4]: a[3,3] = 1

In [5]: a
Out[5]: 
array([[ 1.,  0.,  0.,  0.],
       [ 0.,  0.,  0.,  0.],
       [ 0.,  0.,  0.,  0.],
       [ 0.,  0.,  0.,  1.]])

In [6]: nonzero(a)
Out[6]: (array([0, 3]), array([0, 3])) 
```

有没有一个函数可以给我线性索引而不自己计算它们？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-26T17:52:02.133

numpy 你有没有介绍过：

```
>>> np.flatnonzero(a)
array([ 0, 15]) 
```

在内部，它完全按照 Sven Marnach 的建议行事。

```
>>> print inspect.getsource(np.flatnonzero)
def flatnonzero(a):
    """
    Return indices that are non-zero in the flattened version of a.

    This is equivalent to a.ravel().nonzero()[0].

    [more documentation]

    """
    return a.ravel().nonzero()[0] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-26T14:54:38.587

最简单的解决方案是在调用之前展平数组`nonzero()`：

```
>>> a.ravel().nonzero()
(array([ 0, 15]),) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T18:12:04.857

如果您已经`matplotlib`安装了它，它可能已经存在（`find`即）在`matplotlib.mlab`模块中，以及一些其他旨在与 matlab 兼容的功能。是的，它的实现方式与`flatnonzero`.

# javascript - jquery通过ajax和动画加载内容

> ID：11210072
> 
> 赞同：0
> 
> 时间：2012-06-26T14:52:26.313
> 
> 标签：javascript, jquery, ajax

我正在通过 ajax 加载页面内容，我希望旧内容滑到顶部消失，并且新内容跟随它到位，我的问题是我似乎无法让新内容动画化，它只是在按钮单击时呈现（但旧内容确实具有动画效果）。下面是我的javascript，

```
$("#ajax").live("click", function(e){
    var loadURL = $(this).attr('href');
    $("#information").animate{{positionTop : "-900px" }, 1000);
    $(".content").load(loadURL + " #information").animate({positionTop: "0px"}, 1000);
    e.preventDefault();
}); 
```

这是我的 HTML 标记，

```
<div class="content">
    <div class="loading"></div>
    <article id="information">
        <header>
            <h1 class="beta"></h1>
            <a href="" class="learn">Learn More</a>
        </header>
        <section class="advantage">

        </section>
        <section class="advantage">

        </section>
        <section class="advantage">

        </section>
        <a class="next-advantage" id="ajax" href="/logic-combi.php">Logic+ Combi</a>
    </article>
</div> 
```

JS 请求完全相同的 HTML 设置，但仅来自`<article id="information">`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T14:54:37.213

在加载函数的回调中执行动画。

```
$(".content").load(loadURL + " #information", function(){
  $('#information').animate({positionTop: "0px"}, 1000);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T14:57:48.660

`positionTop`不是动画的有效参数，您可能需要使用`scrollTop`.

# java - 在常规（非 webApp）JVM 上使用 JavaMelody

> ID：11210074
> 
> 赞同：0
> 
> 时间：2012-06-26T14:52:33.503
> 
> 标签：java, jvm, monitoring

我的系统分为2台或3台服务器架构，只有一台服务器有webApp

由于我们使用 javaMelody 来监控 webApp 服务器，有没有办法在常规上使用，没有 -

webApp JVM，如果是，我们如何访问数据

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T10:40:45.397

我会说将您的应用程序包含到 webapp（例如 war 文件）中，然后将其部署在 Tomcat 或 Jetty 等服务器中。顺便说一句，可以嵌入Tomcat或Jetty。

否则，目前没有办法做到这一点。

# database - 具有许多查找的大型 Oracle 表的索引和分区的最佳组合？

> ID：11210077
> 
> 赞同：1
> 
> 时间：2012-06-26T14:52:54.930
> 
> 标签：database, oracle, indexing, database-partitioning

我有一个 Oracle 10g 基因组数据数据库，其中包含数个超过 1 亿行的表，这些表类似于以下内容：

```
ID    AssayID    Sample      Mutation    Call Frequency
101   12578      Sample01    T367G       P    0.87
102   31384      Sample01    A2345C      A    0.28
103   3453       Sample01    T247C       P    0.67
104   12578      Sample02    G235del     M    0.11
105   7868       Sample02    None        P    0.98 
```

*   `ID`是唯一的PK，`AssayID`并且`Sample`是外键。
*   假设对于每个`Sample`值，大约有 50k 行。
*   每一个`AssayID`都只发生一次`Sample`。
*   `Mutation`是相对随机的，`Call`可以是三个值之一。
*   `AssayID`对此表的查询可以使用、`Sample`、`Mutation`、`Call`或通过`AssayID`和链接表中的值中的任何一个或组合`Sample`。

一个典型的查询：

```
select t.*
from this_table t
    join assay_table a on t.assayid = a.assayid
    join sample_table s on t.sample = s.sample
where 
    s.name = 'xxx' and a.gene in ('abc', 'xyz') and t.call = 'P' 
```

*   针对这些表的查询总是连接多个较小的表。
*   该`WHERE`语句通常会过滤多个列上的数据，但*绝不*会仅从基本数据表中过滤。

如何设计表以在选择所有列时获得最佳查询性能？
我是只使用索引、只使用分区还是两者的组合？磁盘空间和插入/更新性能不是问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T12:54:26.350

作为第一步，您可以运行 Oracle 的[SQL Access Advisor](http://www.oracle.com/technetwork/articles/sql/11g-sqlaccessadvisor-084929.html)并查看它提供的建议。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T16:43:58.827

在创建了具有不同索引和分区组合的表的大量测试副本，并使用广泛的查询选择运行一系列性能分析之后，我认为这个问题没有一个单一、简单的答案。每种情况都不同，这个问题的范围对于这个论坛来说太宽泛了。谢谢大家的反馈，这都很有帮助。

# python - Spyder 和 wxPython 之间的冲突？

> ID：11210081
> 
> 赞同：4
> 
> 时间：2012-06-26T14:53:26.690
> 
> 标签：python, wxpython, spyder

我是 wxPython 的新手。从一个简单的教程（http://wiki.wxpython.org/wxPython%20by%20Example）开始，似乎Spyder和wxPython之间存在冲突。我可以运行以下脚本一次（在 IPython 控制台中），使用：

```
runfile(r'C:\Python27\Scripts\test\test.py') 
```

其中包含：

```
import wx

class Frame(wx.Frame):
    def __init__(self, title):
        wx.Frame.__init__(self, None, title=title, size=(350,200))

app = wx.App(redirect=True)
top = Frame("Hello World")
top.Show()
app.MainLoop() 
```

但是我第二次运行它，我得到了以下错误：

```
Traceback (most recent call last):
  File "<ipython console>", line 1, in <module>
  File "C:\Python27\lib\site-packages\spyderlib\widgets\externalshell\sitecustomize.py", line 493, in runfile
execfile(filename, namespace)
  File "C:\Python27\Scripts\test\test.py", line 14, in <module>
top = Frame("Hello World")
  File "C:\Python27\Scripts\test\test.py", line 11, in __init__
wx.Frame.__init__(self, None, title=title, size=(350,200))
  File "C:\Python27\lib\site-packages\wx-2.8-msw-unicode\wx\_windows.py", line 505, in __init__
_windows_.Frame_swiginit(self,_windows_.new_Frame(*args, **kwargs))
PyNoAppError: The wx.App object must be created first! 
```

它不太明白，但显然它与 spyder 是使用 wxPython 编写的并且与 app.MainLoop() 冲突有关

有人可以确认和/或解释更多吗？

非常感谢，

帕特里克

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-03T15:24:33.097

我怀疑这是因为您试图在交互式解释器会话中运行该示例。该示例实际上是一个带有事件循环的 GUI 应用程序，当您在同一个交互式会话中重复执行它时，它不会表现良好，因为从上次运行中清除前一个应用程序不会完全发生。就像您所经历的那样，它会运行一次，但随后的尝试会失败。这样的示例绝对应该在其自己的专用解释器中运行，该解释器可以在 GUI 关闭时完全退出。

在 Spyder 中，您可以将脚本配置为在专用的独立解释器中运行，而无需在单独的外部控制台中手动运行。在 Spyder 编辑器中打开文件，按 F6 打开“运行设置”对话框，然后选择“在新的专用 Python 解释器中执行”单选按钮。现在点击运行。使用 F5 进行的后续运行将记住此配置设置，并且您将在每次重复执行时让您的示例在它自己的解释器中运行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T16:22:47.427

我猜这与使用 IDLE 运行 wxPython 应用程序时可能遇到的问题相同，IDLE 是 Python 附带的基于 tkinter 的 Python IDE。基本上你最终有两个主循环，虽然它有时会工作，但有时它们会发生冲突，你会得到像这样的奇怪错误。我认为当您运行两个 wx.Apps 时，您处于“未定义”领域，这是一件“坏事”。只需从 IPython 本身、命令行或其他不会有两个 wx 事件循环的方式运行您的应用程序。

# android - 当用户在另一个活动中编辑了某些字段时更新前一个活动中的数据，onRestart？

> ID：11210083
> 
> 赞同：2
> 
> 时间：2012-06-26T14:53:30.893
> 
> 标签：android, dynamic, onresume

我在一个活动中创建动态文本视图，其中一些字段由 Web 服务返回。当用户想要编辑一些数据时，他会被发送到另一个活动。当他单击“后退”按钮时，我想更新上一​​个活动中的数据，但我不知道正确的做法。我使用 onRestart 方法而不是 onResume

这是我的代码：

我的第一个显示数据的活动：

```
public class QueryActivity extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.query);

        new WSData() {
        @Override
        public void onPostExecute(final ArrayList<ArrayList<String>> result) {  int nbTextView = result.size();
            TextView[] textViewArray = new TextView[nbTextView];

            for (int i = 0; i < nbTextView; i++) {

                // Horizontal Layout to have the accountName and a button to
                // edit on the same line
                LinearLayout editLayout = new LinearLayout(
                        QueryActivity.this);
                Button edit = new Button(QueryActivity.this);
                edit.setBackgroundDrawable(getResources().getDrawable(
                        R.drawable.editer));

                editLayout.removeAllViewsInLayout();
                editLayout.setOrientation(LinearLayout.HORIZONTAL);
                dynamicWindow.addView(editLayout,
                        new LinearLayout.LayoutParams(
                                LinearLayout.LayoutParams.FILL_PARENT,
                                LinearLayout.LayoutParams.WRAP_CONTENT));

                textViewArray[i] = new TextView(QueryActivity.this);

                // retrieve every field from the result
                final String accountId = result.get(i).get(0);
                final String accountName = result.get(i).get(1);
                final String phone = result.get(i).get(2);
                final String industry = result.get(i).get(3);
                final String website = result.get(i).get(4);

// display only the accountName
                textViewArray[i].setText(accountName);
                textViewArray[i].setTextColor(0xFFFFFFFF);
                textViewArray[i].setGravity(Gravity.CENTER_VERTICAL);
                textViewArray[i].setVisibility(View.VISIBLE);

                edit.setOnClickListener(new OnClickListener() {
                    @Override
                    public void onClick(View v) {
                        Intent intent = new Intent(QueryActivity.this,
                                EditAccountActivity.class);
                                            startActivity(intent);
                    }
                });
}.execute(sessionName, null, "getAccountInfo"); 
}

@Override
public void onRestart() {
    super.onRestart();

} 
```

我的其他活动，我想在单击“返回”时更新我的​​数据：

```
public class EditAccountActivity extends Activity {                 
back.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
             finish();
            }
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T15:04:43.790

```
When he clicks on the "back" button i want to update data in the previous activity 
```

1- 使用 startActivityForResult() 启动 Activity 2。

2 覆盖2nd Activity中的后退键事件并设置intent和Result_OK

3- 在第一个活动的 onActivityForResult 中获取数据

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T10:24:33.547

我是这样做的：

活动一：

```
public void onCreate(Bundle savedInstanceState) {
...
for (int i = 0; i < nbTextView; i++) {
...
textViewArray[i].setId(Integer.parseInt(accountIdValue
                        .substring(3)));
...
}}

@Override
public void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);
    if (resultCode == RESULT_OK) {
        TextView text = (TextView) findViewById(Integer.parseInt(data
                .getStringExtra("accountId")));

        // update the accountName
        String changedAccountName = data.getStringExtra("accountname");
        if (changedAccountName != null) {
            text.setText(data.getStringExtra("accountname"));
        } 
```

活动二：

```
Intent intent = new Intent();
for (Iterator<Map.Entry<String, String>> field = fieldMap
                    .entrySet().iterator(); field.hasNext();) {
                Map.Entry<String, String> entry = field.next();
                if (checkEditTextEmpty(entry.getValue())) {
                    intent.putExtra(entry.getKey(), entry.getValue());
                    allEmptyField = false;
                } else {
                    field.remove();
                }
            }
intent.putExtra("accountId", accountId.substring(3));
                setResult(RESULT_OK, intent);
                finish();
            } 
```

# bash - 将月份字符串转换为整数外壳

> ID：11210086
> 
> 赞同：0
> 
> 时间：2012-06-26T14:53:36.100
> 
> 标签：bash, shell, date, openssl, certificate

好的，所以我运行一个 openssl 命令来获取过期脚本的日期。这样做给了我这个：

```
enddate=Jun 26 23:59:59 2012 GMT 
```

然后我把所有东西都删掉了，只留下“六月”这个月

现在我的脚本的下一部分是告诉用户证书是否过期，为此我使用一个 if 语句，它看起来像这样：

```
if [ $exp_year -lt $cur_year && $exp_month -lt $cur_month ]; then
    echo "" 
    echo "Certificate is still valid until $exp_date"
    echo "" 
else
    echo ""
    echo "Certificate has expired on $exp_date, please renew."
    echo ""
fi 
```

我不知道如何将月份转换为整数以进行比较。我想过做蛮力的方式是这样的：

```
Jan=01
Feb=02
Mar=03
... 
```

显然，这是一种糟糕的做法。有谁知道我能做什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T15:32:12.947

好吧，你可以使用：

```
now=$(date +%s)
cert=$(date --date="$enddate" +%s)
if [ $cert -lt $now ]; then
   echo "Old!"
fi 
```

即将日期转换为过去的秒数并比较那些

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-26T16:46:33.147

我建议使用 Petesh 的答案，但如果你有 Bash 4，这里有一种设置关联数组的方法：

```
months=(Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec)
declare -A mlookup
for monthnum in ${!months[@]}
do
    mlookup[${months[monthnum]]=$((monthnum + 1))
done

echo "${mlookup["Jun"]}"    # outputs 6 
```

如果你有版本 4 之前的 Bash，你可以使用 AWK 来帮助你：

```
month=Feb
awk -v "month=$month" 'BEGIN {months = "Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec"; print (index(months, month) + 3) / 4}' 
```

纯 Bash 中的另一种方式（任何版本）：

```
months="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec"
month=Aug
string="${months%$month*}"
echo "$((${#string}/4 + 1))" 
```

# jquery - jquery .getJSON 输出所有数据 .each

> ID：11210087
> 
> 赞同：2
> 
> 时间：2012-06-26T14:53:40.340
> 
> 标签：jquery, jsonp

我将我的 php 导出为 jsonp，然后调用加载数据的 js 文件。

我只得到最后一个数据对象的输出。我想遍历动作数据并将它们全部输出为**<li>data.action</li>**格式。如果有人可以帮助弄清楚如何做到这一点，非常感谢。

JSONP

```
({
    "posts": [{
        "action": "go to acting school",
        "action": "go to a beach",
        "action": "go kyacking",
        "action": "go skiing in vermont",
        "action": "sleep in a cave",
        "action": "dress up as favorite celebrity in public",
        "action": "see the cherry blossums in Washington DC",
        "action": "watch all the rocky movies",
        "action": "go sky diving",
        "action": "climb Mount Everest",
        "action": "climb K2",
        "action": "see or participate in war reenactment",
        "action": "spend New Years Eve in Times Square",
        "action": "jump out of a moving plane",
        "action": "jump out of a moving car",
        "action": "try eating a new food"
    }]
}) 
```

查询

```
 $(document).ready(function () {
     $.getJSON("http://site.com/lesson.php?count=5&jsoncall=?", function (data) {
         $.each(data.posts, function (i, data) {
             var jsondata = "<li>" + data.action + "</li>";
             $(jsondata).appendTo("ol#results");
         });
     });
     return false;
 }); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T14:57:09.543

那不是正确的json。当转换为 javascript 对象时，它将包含：

```
{
    "posts": [{"action": "try eating a new food"}]
} 
```

这就是我认为应该是的：

```
{
    "actions": ["go to acting school","go to a beach","go kyacking","go skiing in vermont","sleep in a cave","dress up as favorite celebrity in public","see the cherry blossums in Washington DC","watch all the rocky movies","go sky diving","climb Mount Everest","climb K2","see or participate in war reenactment","spend New Years Eve in Times Square","jump out of a moving plane","jump out of a moving car","try eating a new food"]
} 
```

显然，这并不知道 json 实际代表什么。我所做更改背后的想法是，如果它们都是动作，则将它们全部放在一个数组中，该数组存储在一个名为`actions`

然后你会输出它：

```
var myStr = "";
$.each(data.actions, function (i, action) {
    myStr += "<li>" + action + "</li>";
});
$("#results").append(myStr); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T15:04:40.160

您想要的是重组 JSON，使其有效，然后一切正常。

[这是显示示例的工作 jsFiddle。](http://jsfiddle.net/T9Vdy/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T15:03:00.713

JSON 键**必须是唯一的**，这在您的代码中并非如此。

# eclipse - 使用 requestbuilder 从 GWT 应用程序获取 csv 文件 - 获取异常：java.lang.UnsatisfiedLinkError：

> ID：11210091
> 
> 赞同：1
> 
> 时间：2012-06-26T14:53:50.663
> 
> 标签：eclipse, google-app-engine, gwt, servlets, file-io

我的目标是尝试从我的 GWT 应用程序的 servlet 中读取位于服务器上的 csv 文件。

我最初尝试过这种方法

```
public String[] convertFileToStringArrays(String pathToCSV) 
{
    BufferedReader br = null;
    try 
    {
        br = new BufferedReader(new FileReader(pathToCSV));
    } 
    catch (FileNotFoundException e) 
    {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    String currLine;
    String [] string_arrays = null;
    int i = 0;
    try {
        while ((currLine = br.readLine()) != null )
        {
            System.out.println(currLine);
            string_arrays[i] = currLine;
            i++;
        }
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    return string_arrays;
} 
```

但是，我遇到了 Java IO 类型异常。我发现使用上述方法是不可能的，因为 GWT 应用程序无法访问 Java IO 库。所以我搜索了一下，发现人们说在服务器上的 GWT 应用程序中读取文件的方法是使用 Request Builder。所以我使用我在网上看到的一些示例尝试了以下方法。在这篇文章中，文件位于我的本地文件系统上，我通过 PathToCSV 变量传递了一个路径：

```
public String[] convertFileToStringArrays(final String pathToCSV)
{
     RequestBuilder rb = new RequestBuilder(RequestBuilder.GET, pathToCSV);
     try
     {
         rb.sendRequest(null, new RequestCallback()
         {
            @Override
            public void onError(Request request, Throwable exception) 
            {
                System.out.println("Failed to load file:"+ pathToCSV);

            }

            @Override
            public void onResponseReceived(Request request,Response response) 
            {
                //TO DO currently just using this until the method is functional and can retrieve the file
                String resp = response.getText();

            }

         });
     }
     catch (Exception e)
     {
         System.out.println(e.getMessage());

     }

    return null;

} 
```

}

但是，此代码引发了另一个异常：

异常堆栈跟踪：

```
Jun 26, 2012 7:29:41 AM com.google.appengine.tools.development.ApiProxyLocalImpl log 
```

严重：javax.servlet.ServletContext 日志：调度传入 RPC 调用 com.google.gwt.user.server.rpc.UnexpectedException 时出现异常：服务方法'public abstract java.lang.String[] cs310.client.CsvFileParserService.convertFileToStringArrays(java .lang.String)' 引发意外异常：java.lang.UnsatisfiedLinkError: com.google.gwt.xhr.client.XMLHttpRequest.create()Lcom/google/gwt/xhr/client/XMLHttpRequest; 在 com.google.gwt.user.server.rpc.RPC.encodeResponseForFailure(RPC.java:385) 在 com.google.gwt.user.server.rpc.RPC.invokeAndEncodeResponse(RPC.java:588) 在 com.google .gwt.user.server.rpc.RemoteServiceServlet.processCall(RemoteServiceServlet.java:208) 在 com.google.gwt.user.server.rpc.RemoteServiceServlet.processPost(RemoteServiceServlet.java:248) 在 com.google.gwt.user .server.rpc。jetty.HttpConnection.handle(HttpConnection.java:404) at org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:409) at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:582)引起：java.lang.UnsatisfiedLinkError: com.google.gwt.xhr.client.XMLHttpRequest.create()Lcom/google/gwt/xhr/client/XMLHttpRequest; 在 com.google.gwt.xhr.client.XMLHttpRequest.create(Native Method) 在 com.google.gwt.http.client.RequestBuilder.doSend(RequestBuilder.java:369) 在 com.google.gwt.http.client。在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 在 sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:

我想知道是否有人可以帮助我了解我是否在正确的轨道上使用此代码将 csv 文件读入我的应用程序？如果是这样，那么我该怎么做才能解决此异常。如果没有，那么是否有任何相同的代码示例？

* * *

尝试 URL 连接方法后添加新代码

```
public String[] convertFileToStringArrays(final String pathToCSV)
{
    String [] string_arrays = null;
     try {
            URL url = new URL(pathToCSV);
            BufferedReader br = new BufferedReader(new InputStreamReader(url.openStream()));
            String currLine;

            int i = 0;
            while ((currLine = br.readLine()) != null )
                {
                    System.out.println(currLine);
                    string_arrays[i] = currLine;
                    i++;
                }
            br.close();

        } 
catch (MalformedURLException e) {
            // ...
        } catch (IOException e) {
            // ...
        }
    if(string_arrays == null)
        System.out.println("CsvFilePasrserServiceImpl says that string_arrays is null");
        return string_arrays;

} 
```

这导致了这个堆栈跟踪：

```
SEVERE: javax.servlet.ServletContext log: Exception while dispatching incoming RPC call
com.google.gwt.user.server.rpc.UnexpectedException: Service method 'public abstract java.lang.String[]     cs310.client.CsvFileParserService.convertFileToStringArrays(java.lang.String)' threw an     unexpected exception: java.security.AccessControlException: access denied     (java.io.FilePermission /Users/AM/Sites/new_food_vendor_locations2.csv read)
at com.google.gwt.user.server.rpc.RPC.encodeResponseForFailure(RPC.java:385)
at com.google.gwt.user.server.rpc.RPC.invokeAndEncodeResponse(RPC.java:588)
at     com.google.gwt.user.server.rpc.RemoteServiceServlet.processCall(RemoteServiceServlet.java:208)
at     com.google.gwt.user.server.rpc.RemoteServiceServlet.processPost(RemoteServiceServlet.java:248)
at com.google.gwt.user.server.rpc.AbstractRemoteServiceServlet.doPost(AbstractRemoteServiceServlet.java:62)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:511)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1166)
at    com.google.appengine.tools.development.HeaderVerificationFilter.doFilter(HeaderVerificationFilter.java:35)
at   org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at   com.google.appengine.api.blobstore.dev.ServeBlobFilter.doFilter(ServeBlobFilter.java:60)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at com.google.apphosting.utils.servlet.TransactionCleanupFilter.doFilter(TransactionCleanupFilter.java:43)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at com.google.appengine.tools.development.StaticFileFilter.doFilter(StaticFileFilter.java:122)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at com.google.appengine.tools.development.BackendServersFilter.doFilter(BackendServersFilter.java:97)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:388)
at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)
at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765)
at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:418)
at    com.google.appengine.tools.development.DevAppEngineWebAppContext.handle(DevAppEngineWebAppContext.java:78)
at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
at com.google.appengine.tools.development.JettyContainerService$ApiProxyHandler.handle(JettyContainerService.java:369)
at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
at org.mortbay.jetty.Server.handle(Server.java:326)
at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542)
at org.mortbay.jetty.HttpConnection$RequestHandler.content(HttpConnection.java:938)
at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:755)
at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:218)
at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)
at org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:409)
at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:582)
Caused by: java.security.AccessControlException: access denied (java.io.FilePermission /Users/AM/Sites/new_food_vendor_locations2.csv read)
at java.security.AccessControlContext.checkPermission(AccessControlContext.java:374)
at java.security.AccessController.checkPermission(AccessController.java:546)
at java.lang.SecurityManager.checkPermission(SecurityManager.java:532)
at com.google.appengine.tools.development.DevAppServerFactory$CustomSecurityManager.checkPermission(DevAppServerFactory.java:252)
at java.lang.SecurityManager.checkRead(SecurityManager.java:871)
at java.io.File.isDirectory(File.java:752)
at sun.net.www.protocol.file.FileURLConnection.connect(FileURLConnection.java:65)
at sun.net.www.protocol.file.FileURLConnection.getInputStream(FileURLConnection.java:161)
at java.net.URL.openStream(URL.java:1010)
at cs310.server.CsvFileParserServiceImpl.convertFileToStringArrays(CsvFileParserServiceImpl.java:99)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at com.google.appengine.tools.development.agent.runtime.Runtime.invoke(Runtime.java:115)
at com.google.gwt.user.server.rpc.RPC.invokeAndEncodeResponse(RPC.java:569)
... 34 more 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T15:23:33.570

您遇到的问题`java.io`不是因为 GWT，而是因为[AppEngine](https://developers.google.com/appengine/docs/java/jrewhitelist)。GWT 是客户端的，这就是为什么当您尝试`RequestBuilder`在服务器端使用时它现在会失败的原因。

要从 AppEngine 上的服务器端获取 URL，请使用[URL Fetch 服务](https://developers.google.com/appengine/docs/java/urlfetch/)。

# c# - 使用 Group BY 查询前 10 名的 Linq

> ID：11210096
> 
> 赞同：1
> 
> 时间：2012-06-26T14:54:07.260
> 
> 标签：c#, linq

> **可能重复：**
> [Linq - 每组的最高值](https://stackoverflow.com/questions/1575316/linq-top-value-form-each-group)

我有以下结构的数据：

```
 var lookupDictionary = new Dictionary<string, Dictionary<string, double>>(); 
```

我正在尝试编写一个 Linq 查询，通过对内部字典中的双精度值进行求和并降序排列，为我提供外部字典中的前 10 个键。我对 SQL 有很好的掌握`group by`，但很难将其转换为 Linq。

任何可以演示此类查询的 Linq 专家？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T15:02:01.563

你需要一个group by吗？

```
var top = lookupDictionary
    .Select(dict => new { dict.Key, InnerCount = dict.Value.Values.Sum() })
    .OrderByDescending(dict => dict.InnerCount)
    .Take(10); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T15:01:35.330

```
Dictionary<string, Dictionary<string, double>> lookupDictionary = new Dictionary<string, Dictionary<string, double>>();
lookupDictionary.Select(outerKeyPair => new
{
    Key = outerKeyPair.Key,
    Sum = outerKeyPair.Value.Values.Sum()
})
.OrderByDescending(pair => pair.Sum)
.Take(10); 
```

# batch-file - 在批处理代码中将时间从 24 小时制更改为 12 小时制

> ID：11210103
> 
> 赞同：1
> 
> 时间：2012-06-26T14:54:28.787
> 
> 标签：batch-file, windows-xp

我目前在我的桌面上的批处理文件 Backup.bat 中有以下代码。它用于每天备份一个excel电子表格文件，并通过附加当前日期和时间来重命名它。**File.xlsx**被复制并粘贴到一个新文件夹中作为**文件 Sun-06-24-2012 23.21.46PM.xlsx**

目前日期和时间附加为 Sun- 06-24-2012 **23** .21.46PM.xlsx 但我希望使用 12 小时制将其附加为 Sun- 06-24-2012 **11** .21.46PM.xlsx 而不是24 小时时钟格式。

下面是我目前在 Windows XP Professional 中使用的代码。有谁知道如何以 12 小时时钟格式而不是 24 小时时钟格式附加时间，因为它目前在下面的代码中。

```
@For /F "tokens=1,2,3,4 delims=/ " %%A in ('Date /t') do @(
Set DayW=%%A
Set Day=%%B
Set Month=%%C
Set Year=%%D
Set All=%%A-%%B-%%C-%%D
)
@For /F "tokens=1,2,3 delims=:,. " %%A in ('echo %time%') do @(
Set Hour=%%A
Set Min=%%B
Set Sec=%%C
Set Allm=%%A.%%B.%%C
)
@For /F "tokens=3 delims=: " %%A in ('time /t ') do @(
Set AMPM=%%A
)

copy "C:\Temp\File.xlsx" "C:\Temp\DailyBackup\File %All% %Allm%%AMPM%.xlsx" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T16:02:16.630

我同意乔伊的评论，我认为你最好使用 24 小时格式。

此外，一旦将代码传输到使用不同日期和/或时间配置的另一台机器，您获取日期和时间的方法就会中断。

但是，不管怎样，这里...

您应该从单个 %TIME% 扩展中获取整个时间字符串。否则，您将面临在午夜之前获得小时：分钟：秒以及在午夜之后获得 AMPM 的风险。

放在`@ECHO OFF`顶部，然后你就不需要`@`在你的代码中到处撒播了。

```
@echo off
For /F "tokens=1,2,3,4 delims=/ " %%A in ('Date /t') do (
  Set DayW=%%A
  Set Day=%%B
  Set Month=%%C
  Set Year=%%D
  Set All=%%A-%%B-%%C-%%D
)
For /F "tokens=1,2,3 delims=:,. " %%A in ('echo %time%') do (
  set /a "Hour=100%%A%%100"
  set Min=%%B
  set Sec=%%C
)
if %Hour% geq 12 (
  set AMPM=PM
  set /a "Hour-=12"
) else set "AMPM=AM"
if %Hour% equ 0 set "Hour=12"
if %Hour% lss 10 set "Hour=0%Hour%"
set "Allm=%Hour%.%Min%.%Sec%%AMPM%"

echo on
copy "C:\Temp\File.xlsx" "C:\Temp\DailyBackup\File %All% %Allm%.xlsx" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T15:22:20.220

`Time /t`以 24 小时格式为您提供时间，大概是因为这是您计算机区域设置的默认设置。

由于`time /t`似乎没有提供任何格式选项，最简单的方法可能是在批处理文件中添加一个额外的部分，以将 24 小时制转换为 12 小时制。

在您下方的某个地方，`Set Hour=%%A`您只需要：

*   如果超过 12，则从小时中减去 12
*   将“00”更改为“12”

例如：

```
If %Hour% gtr 12 (
Set /a Hour=%Hour%-12
)
If %Hour% == 00 (
Set Hour=12
) 
```

/a 开关`Set`告诉它等号右边的值是要计算的数值表达式。

如果它从 1 到 9，这将使您在小时内没有前导零。您可以使用另一个`if`语句来解决这个问题，以添加前导零，或者可能有更优雅的方法！

# python - 从 python 脚本检查程序是否存在

> ID：11210104
> 
> 赞同：91
> 
> 时间：2012-06-26T14:54:33.540
> 
> 标签：python

如何检查 python 脚本中是否存在程序？

假设您要检查是否`wget`可用`curl`。我们将假设它们应该在路径中。

最好看到多平台解决方案，但目前，Linux 就足够了。

提示：

*   运行命令并检查返回代码并不总是足够的，因为即使您尝试，某些工具也会返回非 0 结果`--version`。
*   检查命令时，屏幕上不应显示任何内容

另外，我希望有一个更通用的解决方案，比如`is_tool(name)`

* * *

## 回答 #1

> 赞同：177
> 
> 时间：2015-12-09T11:12:00.720

# shutil.which

让我推荐一个尚未讨论过的选项：一个 Python 实现`which`，特别是`shutil.which`. 它是在 Python 3.3 中引入的，并且是跨平台的，支持 Linux、Mac 和 Windows。它也可以通过[whichcraft](https://pypi.python.org/pypi/whichcraft)在 Python 2.x 中使用。您也可以`which`直接从 whichcraft 中提取代码并将其插入到您的程序中[。](https://github.com/pydanny/whichcraft/blob/master/whichcraft.py#L20)

```
def is_tool(name):
    """Check whether `name` is on PATH and marked as executable."""

    # from whichcraft import which
    from shutil import which

    return which(name) is not None 
```

* * *

# distutils.spawn.find_executable

已经提到的另一个选项是`distutils.spawn.find_executable`.

`find_executable`的文档字符串如下：

> 尝试在“路径”中列出的目录中查找“可执行文件”

因此，如果您注意，您会注意到该函数的名称有些误导。与`which`,不同的是，`find_executable`它实际上并没有验证它`executable`被标记为可执行文件，只是它在 PATH 上。因此，完全有可能（尽管不太可能）`find_executable`表明程序可用，而实际上它不可用。

例如，假设您有一个`/usr/bin/wget`未标记为可执行的文件。从 shell运行`wget`将导致以下错误：*bash: /usr/bin/wget: Permission denied*。`which('wget') is not None`将返回 False，但`find_executable('wget') is not None`将返回 True。您可能可以不使用任何一个功能，但这只是使用`find_executable`.

```
def is_tool(name):
    """Check whether `name` is on PATH."""

    from distutils.spawn import find_executable

    return find_executable(name) is not None 
```

* * *

## 回答 #2

> 赞同：50
> 
> 时间：2012-06-26T14:59:03.573

最简单的方法是尝试使用所需参数运行程序，如果异常不存在则处理：

```
try:
    subprocess.call(["wget", "your", "parameters", "here"])
except FileNotFoundError:
    # handle file not found error. 
```

这是 Python 中的常见模式：[EAFP](http://docs.python.org//glossary.html#term-eafp)

在 Python 2 中，您必须改为 catch `OsError`，因为尚不存在针对 OS 错误的更细粒度的异常类：

```
try:
    subprocess.call(["wget", "your", "parameters", "here"])
except OSError as e:
    if e.errno == errno.ENOENT:
        # handle file not found error.
    else:
        # Something else went wrong while trying to run `wget`
        raise 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2012-06-26T15:05:59.077

您可以使用子进程调用所需的二进制文件：

*   “哪个”：*nix
*   “where”：Win 2003 及更高版本（Xp 有一个插件）

获取可执行路径（假设它在环境路径中）。

```
import os 
import platform
import subprocess

cmd = "where" if platform.system() == "Windows" else "which"
try: 
    subprocess.call([cmd, your_executable_to_check_here])
except: 
    print "No executable" 
```

或者只是使用 Ned Batchelder 的 wh.py 脚本，这是一个“哪个”跨平台实现：

[http://nedbatchelder.com/code/utilities/wh_py.html](http://nedbatchelder.com/code/utilities/wh_py.html)

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2012-06-26T15:37:24.693

```
import subprocess
import os

def is_tool(name):
    try:
        devnull = open(os.devnull)
        subprocess.Popen([name], stdout=devnull, stderr=devnull).communicate()
    except OSError as e:
        if e.errno == os.errno.ENOENT:
            return False
    return True 
```

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2015-04-09T12:32:10.697

我会去：

```
import distutils.spawn

def is_tool(name):
  return distutils.spawn.find_executable(name) is not None 
```

* * *

## 回答 #6

> 赞同：11
> 
> 时间：2012-06-26T14:58:12.573

我可能会掏出`which wget`或`which curl`检查结果是否以您正在使用的程序的名称结尾。unix 的魔力 :)

实际上，您需要做的就是检查`which`. 所以......使用我们值得信赖的`subprocess`模块：

```
import subprocess

rc = subprocess.call(['which', 'wget'])
if rc == 0:
    print 'wget installed!'
else:
    print 'wget missing in path!' 
```

请注意，我使用 cygwin 在 Windows 上对此进行了测试...如果您想弄清楚如何`which`在纯 python 中实现，我建议您在这里查看：http: [//pypi.python.org/pypi/pycoreutils](http://pypi.python.org/pypi/pycoreutils)（哦，亲爱的 - 似乎他们不提供`which`。是时候友好推动了？）

**更新**：在 Windows 上，您可以使用`where`代替来`which`获得类似的效果。

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2016-09-11T20:29:39.637

我将@sorin的答案更改如下，原因是它会检查程序的名称而不传递程序的绝对路径

```
from subprocess import Popen, PIPE

def check_program_exists(name):
    p = Popen(['/usr/bin/which', name], stdout=PIPE, stderr=PIPE)
    p.communicate()
    return p.returncode == 0 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-06-26T14:59:59.120

```
import os
import subprocess

def is_tool(prog):
    for dir in os.environ['PATH'].split(os.pathsep):
        if os.path.exists(os.path.join(dir, prog)):
            try:
                subprocess.call([os.path.join(dir, prog)],
                                stdout=subprocess.PIPE,
                                stderr=subprocess.STDOUT)
            except OSError, e:
                return False
            return True
    return False 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-01-07T22:05:56.960

对@SvenMarnach 的代码稍作修改，解决了打印到标准输出流的问题。如果您使用该`subprocess.check_output()`函数而不是`subprocess.call()`then 您可以处理通常打印到代码中标准输出的字符串，并且仍然可以捕获异常和退出状态代码。

如果要抑制终端中的标准输出流，请不要打印从以下返回的标准输出字符串`check_output`：

```
import subprocess
import os
try:
    stdout_string = subprocess.check_output(["wget", "--help"], stderr=subprocess.STDOUT)
    # print(stdout_string)
except subprocess.CalledProcessError as cpe:
    print(cpe.returncode)
    print(cpe.output)
except OSError as e:
    if e.errno == os.errno.ENOENT:
        print(e)
    else:
        # Something else went wrong while trying to run `wget`
        print(e) 
```

非零退出状态代码和输出字符串在`CalledProcessError`as 中提出`subprocess.CalledProcessError.returncode`，`subprocess.CalledProcessError.output`因此您可以对它们做任何您想做的事情。

如果要将可执行文件的标准输出打印到终端，请打印返回的字符串：

```
import subprocess
import os
try:
    stdout_string = subprocess.check_output(["wget", "--help"], stderr=subprocess.STDOUT)
    print(stdout_string)
except subprocess.CalledProcessError as cpe:
    print(cpe.returncode)
    print(cpe.output)
except OSError as e:
    if e.errno == os.errno.ENOENT:
        print(e)
    else:
        # Something else went wrong while trying to run `wget`
        print(e) 
```

`print()`在字符串中添加一个额外的换行符。如果要消除这种情况（并将 std 错误写入 std err 流而不是 std out 流，如上面的 print() 语句所示），请使用`sys.stdout.write(string)`and`sys.stderr.write(string)`代替 print()：

```
import subprocess
import os
import sys
try:
    stdout_string = subprocess.check_output(["bogus"], stderr=subprocess.STDOUT)
    sys.stdout.write(stdout_string)
except subprocess.CalledProcessError as cpe:
    sys.stderr.write(cpe.returncode)
    sys.stderr.write(cpe.output)
except OSError as e:
    if e.errno == os.errno.ENOENT:
        sys.stderr.write(e.strerror)
    else:
        # Something else went wrong while trying to run `wget`
        sys.stderr.write(e.strerror) 
```

# ruby-on-rails - validates_format_of 的否定正则表达式

> ID：11210109
> 
> 赞同：0
> 
> 时间：2012-06-26T14:54:49.153
> 
> 标签：ruby-on-rails, regex, validation

在我的 Rails 模型中，我有某种模板系统。我想确保编辑它的用户不会犯意外错误，所以我使用了一些简单的验证器。

他们可以使用`##user_id##`以后会被替换的标记。我想确保他们不会输入`###user_id##`包含太多 的类似内容`#`，因此字段中不必出现任何`###`（或`####`）。

```
class Template
  validates_format_of :text, :with => /##user_id##/, 
    :message => "##user_id## must be present"
  validates_format_of :text, :not_with => /###/, 
    :message => "Too many #"
end 
```

不幸的是，没有`:not_with`选择......有没有机会使用`:with`-regex 来解决它，或者我应该采用单独的`validate`方法吗？

我尝试了一些消极的前瞻，但由于（大部分）有几个`##`而且只有一个`###`，它们总是匹配其中一个。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-10-24T20:39:06.120

使用`:without`选项：

```
validates_format_of :text, :without => /###/, :message => "Too many #" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T15:18:05.277

那这个呢...

```
validates_format_of :text, :with => /(^|[^#])##user_id##($|[^#])/ 
```

**编辑**：我用我的正则表达式复制了 acheong87 的[rubular](http://rubular.com/r/Y3rzlKTCSI)示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T15:18:51.070

你能做这样的事情吗？

```
 /^(.(?!###+user_id##|##user_id###+))*$/ 
```

这是一个现场演示：[http](http://rubular.com/r/SPwsyDlj0y) ://rubular.com/r/SPwsyDlj0y 。

在（更多）英语中，它说，

> 一个字符串，其中没有字符后跟`###+user_id##`or `##user_id###+`。

# c++ - 嵌入式 C++ 项目 - 需要支持智能指针。可能的便携性问题？

> ID：11210111
> 
> 赞同：2
> 
> 时间：2012-06-26T14:54:49.990
> 
> 标签：c++, boost, embedded, shared-ptr

我正在为嵌入式系统开发一个大项目。该项目是一个库和一些必须集成到客户代码/解决方案中的二进制文件。因此，它必须尽可能独立于操作系统/平台。到目前为止，我们一直在研究嵌入式 linux，没有任何问题。然而，在不久的将来，非基于 linux 的平台可能会加入这种乐趣。

为了说明我们正在使用的平台类型，它们必须能够运行要求苛刻的模块，例如 Java 虚拟机。

我不确定可能会出现哪种平台以及他们可能提供哪种编译器。所以我有点担心使用可能会带来很多麻烦的高级 C++ 期货或库。主要是我想避免因此而出现不兼容的可能性。

我们正在重构我们解决方案的一些 C++ 模块。它们真的很棘手，智能指针支持会很有帮助。起初，我想制作一个自定义的智能指针包，但这对我来说似乎有点风险（这里的错误会引起巨大的头痛）。所以我想到了使用boost的智能指针。

如果我使用boost的智能指针，你们认为我将来会遇到麻烦吗？

我尝试使用 bcp 提取 boost 的智能指针包，但是随之而来的还有很多其他的东西。类似于 4Mb 的代码。提取的目录是：

```
config/compiler
config/stdlib
config/platform
config/abi
config/no_tr1
detail
smart_ptr
mpl (and subdirs)
preprocessor (and subdirs)
exception (and subdirs)
type_traits (and dubdirs) 
```

这对我来说似乎不太便携（但我可能错了）。

你们怎么看？

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T15:32:35.870

不要犹豫使用智能指针。您提取的智能指针包应该可以移植到所有体面的编译器。

如果它不适用于您的编译器，您可以手动替换代码的冲突部分。Boost 代码更复杂，因为它包含各种编译器错误或缺少功能的解决方法。[这就是为什么要添加Boost.Preprocessor](http://www.boost.org/doc/libs/1_49_0/libs/preprocessor/doc/index.html)或[Boost.Typetraits](http://www.boost.org/doc/libs/1_49_0/libs/type_traits/doc/html/index.html)的原因之一。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T05:02:26.670

Boost非常便携；库的源代码大小不代表目标图像大小；许多库代码将保持未使用状态，并且不会包含在目标图像中。

此外，GCC 的“裸机”端口支持最常见的（不是那么常见和过时的）32 位平台。然而，尽管 GCC 在没有操作系统的情况下是可移植的，但 GNU libc 以 POSIX 兼容的操作系统为目标，因此裸机和非 POSIX 依赖端口通常使用替代库，例如 uClib 或 Newlib。在这些之上 GNU stdlibc++ 将愉快地运行，还有许多 Boost 库。Boost 的某些部分（例如线程）将需要移植到不受支持的目标，纯粹的数据结构相关功能（例如智能指针）将没有目标环境依赖性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-28T05:32:11.420

较新的编译器包括`shared_ptr`C++11/TR1。如果你有一个相当现代的编译器——你真的想要它，因为 C++11——那么它应该不会有问题。

如果您现在没有无法使用 TR1 的客户，请继续使用它。你可以在未来的客户到来时与他们打交道——YAGNI 在这里应用，智能指针*非常重要*。与移动语义等 C++11 特性一样。

然而，如果你绝望了，你可以自己动手`shared_ptr`——这个概念并不是特别复杂。

# php - 使用 JQuery 级联下拉列表

> ID：11210115
> 
> 赞同：0
> 
> 时间：2012-06-26T14:55:00.270
> 
> 标签：php, jquery, drop-down-menu

我正在尝试一个接一个地填充下拉列表。这些下拉列表包含类别和子类别。我想继续创建下拉列表，直到没有更多的特定类别的子类别。我正在用 MySQL 的结果填充我的下拉列表。

我已经搜索了所有内容，但找不到任何对使用两个以上列表的级联下拉列表的引用。

我的代码适用于两个列表，但不适用于更多。

**部分请求.php**

```
<HTML>
<HEAD>
<script type="text/javascript" src="..\jquery.js"></script>
<script type="text/javascript">

$(document).ready(function(){
    $("#1").change(function(e) {
        e.preventDefault();
        getNextCategory("1");
    });

    $("#2").change(function(e) {
        e.preventDefault();
        getNextCategory("2");
    });

    $("#3").change(function(e) {
        e.preventDefault();
        getNextCategory("3");
    });
});

function getNextCategory(htmlID) {
    var categoryID = ""
    var newHTMLID = 0
    var newCategory = ""
    categoryID = $("#" + htmlID ).val();
    newHTMLID = Number(htmlID) + Number(1)
    newCategory = "category" + newHTMLID
    $.ajax({
        type: "POST",
        url: "findNextCategory.php",
        data: "ID=" + categoryID + "&Number=" + newHTMLID,
        success: function(output){
            $("#" + newCategory).html(output);
        }
    });
}

</script>

</HEAD>
<BODY>

<form name="partSubmissionForm" id="partSubmissionForm" action="" method="POST">

    <table width=147 cellpadding=0 cellspacing=0>
        <tr><td><select id="1">
            <?PHP 
            $query = "SELECT Name, ID FROM categories WHERE ParentID = 0";
            $result = mysql_query($query);
            while ($row=mysql_fetch_array($result)){
            ?>
            <option value="<? echo $row['ID'];?>"> <? echo $row['Name'];?></option>
                <?}?>
            </select>
        </td>
        <td>
            <div id="category2">
                test2
            </div>
        </td>
        <td>
            <div id="category3">
                test3
            </div>
        </td>
        </tr>        
        <tr><td><input type="submit" name="submit" id="submit" value="GO"></td></tr>
        </table>
</form>

</BODY>

</HTML> 
```

**findNextCategory.php**

```
<?PHP
define('INCLUDE_CHECK',true);
include ('..\db.php');

$categoryID = $_POST['ID'];
$categoryFieldNum = $_POST['Number'];
echo $categoryID;
echo $categoryFieldNum;
$query = "SELECT Name, ID FROM categories WHERE ParentID = $categoryID";
echo $query;
echo "<select id=$categoryFieldNum>";
    $query = "SELECT Name, ID FROM categories WHERE ParentID = $categoryID";
    $result = mysql_query($query);
    while ($row=mysql_fetch_array($result)){
        $optionValue = $row['ID'];
        $optionText = $row['Name'];
        echo "<option value='$optionValue'> $optionText </option>";
    }
echo "</select>";
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T15:14:06.123

问题是您的点击功能定义仅适用于页面加载时页面上已经存在的项目。因为您在页面上还没有一个 id 为“2”的选择对象，所以您的`$("#2").change`函数永远不会被附加。

要解决此问题，您需要做的是在将选择添加到页面后应用该单击定义。尝试将您的成功功能更改为：

```
success: function(output){
    $("#" + newCategory).html(output);
    $("#" + newHTMLID).change(function(e) {
        e.preventDefault();
        getNextCategory(newHTMLID);
    });
} 
```

# html - 如何使 chrome 扩展全屏显示？

> ID：11210116
> 
> 赞同：8
> 
> 时间：2012-06-26T14:55:07.080
> 
> 标签：html, css, google-chrome-extension

我正在尝试使 chrome 扩展全屏显示，但我能做的最大值是半角。不仅如此，它只是在底部给我一个滚动条..我怎样才能让它全屏显示？意思是，chrome浏览器的整个宽度？谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-13T22:52:34.553

```
chrome.windows.update(windowId, { state: "fullscreen" }) 
```

请参阅[http://developer.chrome.com/extensions/windows.html#method-update](http://developer.chrome.com/extensions/windows.html#method-update)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T22:46:17.603

在您的扩展“background.js”脚本中：

```
chrome.app.runtime.onLaunched.addListener(function (launchData) {
  chrome.app.window.create(
    // Url
    '/editor.html',
    // CreateWindowOptions
    {
            'width': 400,
            'height': 500
    },
    // Callback
    function(win) {
        win.contentWindow.launchData = launchData;
        win.maximize();
        win.show();
    });
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T15:19:03.387

你试过[fullScreen API](https://developer.mozilla.org/en/DOM/Using_full-screen_mode)吗？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-26T15:21:11.877

```
addEventListener("click", function() {
    var
          el = document.documentElement
        , rfs =
               el.requestFullScreen
            || el.webkitRequestFullScreen
            || el.mozRequestFullScreen
    ;
    rfs.call(el);
}); 
```

正如在这篇[文章中看到的](https://stackoverflow.com/a/7934009/525576)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-05-18T22:23:59.023

用于所有浏览器中的网页的一般用途，包括 msRequestFullscreen

```
addEventListener("click", function () {
    var
          el = document.documentElement
        , rfs =
               el.requestFullScreen
            || el.webkitRequestFullScreen
            || el.mozRequestFullScreen
            || el.msRequestFullscreen
    ;
    if (rfs) { rfs.call(el); } else { console.log('fullscreen api not supported');}
}); 
```

# python - Django `auth` 和 `contenttypes` 破坏了同步数据库

> ID：11210122
> 
> 赞同：4
> 
> 时间：2012-06-26T14:55:57.680
> 
> 标签：python, django, django-models, python-2.7

当我发出命令时：

`python manage.py syncdb --database=mydb`

它显示输出如下...

```
Creating tables ...
Creating table auth_permission
Creating table auth_group_permissions
Creating table auth_group
Creating table auth_user_user_permissions
Creating table auth_user_groups
Creating table auth_user
Creating table django_content_type
Traceback (most recent call last):
File "manage.py", line 14, in <module>
    execute_manager(settings)
File "/usr/lib/python2.7/site-packages/django/core/management/__init__.py", line 459,     in execute_manager
    utility.execute()
File "/usr/lib/python2.7/site-packages/django/core/management/__init__.py", line 382,     in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
File "/usr/lib/python2.7/site-packages/django/core/management/base.py", line 196, in     run_from_argv
    self.execute(*args, **options.__dict__)
File "/usr/lib/python2.7/site-packages/django/core/management/base.py", line 232, in     execute
    output = self.handle(*args, **options)
File "/usr/lib/python2.7/site-packages/django/core/management/base.py", line 371, in     handle
    return self.handle_noargs(**options)
File "/usr/lib/python2.7/site-packages/django/core/management/commands/syncdb.py",     line 110, in handle_noargs
    emit_post_sync_signal(created_models, verbosity, interactive, db)
File "/usr/lib/python2.7/site-packages/django/core/management/sql.py", line 189, in     emit_post_sync_signal
    interactive=interactive, db=db)
File "/usr/lib/python2.7/site-packages/django/dispatch/dispatcher.py", line 172, in     send
    response = receiver(signal=self, sender=sender, **named)
File "/usr/lib/python2.7/site-packages/django/contrib/auth/management/__init__.py",     line 35, in create_permissions
    ctype = ContentType.objects.get_for_model(klass)
File "/usr/lib/python2.7/site-packages/django/contrib/contenttypes/models.py", line     42, in get_for_model
    defaults = {'name': smart_unicode(opts.verbose_name_raw)},
File "/usr/lib/python2.7/site-packages/django/db/models/manager.py", line 134, in     get_or_create
    return self.get_query_set().get_or_create(**kwargs)
File "/usr/lib/python2.7/site-packages/django/db/models/query.py", line 442, in     get_or_create
    return self.get(**lookup), False
File "/usr/lib/python2.7/site-packages/django/db/models/query.py", line 361, in get
    num = len(clone)
File "/usr/lib/python2.7/site-packages/django/db/models/query.py", line 85, in     __len__
    self._result_cache = list(self.iterator())
File "/usr/lib/python2.7/site-packages/django/db/models/query.py", line 291, in     iterator
    for row in compiler.results_iter():
File "/usr/lib/python2.7/site-packages/django/db/models/sql/compiler.py", line 763,     in results_iter
    for rows in self.execute_sql(MULTI):
File "/usr/lib/python2.7/site-packages/django/db/models/sql/compiler.py", line     818, in     execute_sql
    cursor.execute(sql, params)
File "/usr/lib/python2.7/site-packages/django/db/backends/util.py", line 40, in     execute
    return self.cursor.execute(sql, params)
File "/usr/lib/python2.7/site-packages/django/db/backends/sqlite3/base.py", line     337, in     execute
    return Database.Cursor.execute(self, query, params)
django.db.utils.DatabaseError: no such table: django_content_type 
```

我有一个自定义数据库路由器，它基本上设置为 django 的示例，除了我在我的模型上有一个自定义属性，以便它知道它们默认使用哪个数据库。`syncdb`在我`settings.py INSTALLED_APPS`注释掉时有效：`django.contrib.auth`和`django.contrib.contenttypes`. 这个问题有一段时间了，但一直推迟到现在，当我需要开始身份验证时。如果你想要我的数据库路由器，我也会发布

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T15:16:53.330

我在这里解释了一个类似的问题： [django.db.utils.IntegrityError: (1062, "Duplicate entry '22-add_' for key 'content_type_id'")](https://stackoverflow.com/questions/11207334/django-db-utils-integrityerror-1062-duplicate-entry-22-add-for-key-conte/11208118#11208118)

您不需要注释掉 contrib.auth 和 contrib.contenttypes。只需确保所有 django 模型 - 用户、会话、权限仅在 1 个数据库中使用，这可以被视为主数据库。

这不会直接解决您的问题，但可以作为处理多个数据库和数据库路由器时的起点。您需要知道的是每个模型在数据库中都有它的内容类型。当 django 对象 - 用户/会话/权限不限于单个数据库 - 然后它们被创建到每个数据库中时，就会出现问题。并且由于内容类型使模型独一无二，因此在多个数据库中具有单一类型的内容类型可能会导致上述其他 SO 问题中解释的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T10:29:18.830

在 Django 1.4 中，您必须在项目的顶级文件夹中启动此命令（path_to_project/you_project 不是 path_to_project/you_project/you_project）

# android - 如何在没有动画的情况下滚动水平滚动视图

> ID：11210124
> 
> 赞同：9
> 
> 时间：2012-06-26T14:56:03.780
> 
> 标签：android, animation, scrollview

问题是我正在使用`fullScroll()`and`scrollTo()`函数进行滚动，但它是动画的，我需要它在没有用户观察的情况下发生。

有没有办法解决这个问题？

```
hScrollView.post(new Runnable() {
    @Override
    public void run() {
        hScrollView.fullScroll(HorizontalScrollView.FOCUS_RIGHT);
    }
}); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-01-18T17:58:18.820

用这个

```
// Disable the animation First
hScrollView.setSmoothScrollingEnabled(false);
// Now scroll the view
hScrollView.fullScroll(HorizontalScrollView.FOCUS_RIGHT);
// Now enable the animation again if needed
hScrollView.setSmoothScrollingEnabled(true); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-06-29T12:50:33.563

您可以`hScrollView.setSmoothScrollingEnabled(false);`在运行`Runnable`命令之前使用，这将为您提供所需的输出

```
 // Set smooth scrolling to false
        hScrollView.setSmoothScrollingEnabled(false);

        // Then call the fullScroll method
        hScrollView.post(new Runnable() {
            @Override
            public void run() {
                hScrollView.fullScroll(View.FOCUS_RIGHT);
            }
        }); 
```

# linux - Bash：在行尾查找带有尾随空格的文件

> ID：11210126
> 
> 赞同：22
> 
> 时间：2012-06-26T14:56:07.523
> 
> 标签：linux, bash, trailing

我正在寻找一个 bash 命令来查找每行末尾带有尾随空格的文件。我对删除空格不感兴趣，而只是对查找文件感兴趣。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-06-26T16:16:23.727

查找包含尾随空格的文件。

```
find . -type f -exec egrep -l " +$" {} \; 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2015-03-27T19:13:19.233

如果目标是列出在一行或多行中有尾随空格的文件：

```
grep -r '[[:blank:]]$' . 
```

要不打印行，只打印文件名，还要指定`-l`选项。那是`l`单词`list`，而不是数字`1`。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-26T15:03:58.663

查找带有一个或多个尾随空格字符的文件：

```
find . -name "*" | xargs egrep ".* +$" 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-03-27T19:48:06.577

有一个选项可以列出其中不包含任何匹配项的文件；将其和正则表达式用于行尾之前的空格以外的字符。

```
grep -L '[^ ]$' * 
```

要递归目录，请添加`-r`. 要同时搜索其他空白字符，请使用字符类`$'[^ \t]$'`或正则表达式的 POSIX `'[^[:blank:]]$'`。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-03-29T22:10:46.310

使用[`ack`](http://beyondgrep.com/)（或[`ag`](http://geoff.greer.fm/ag/)）：

```
ack -l ' \n' 
```

注意：与其他一些答案一样，这将列出包含*一行或多*行尾随空格的文件。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-01-08T20:35:30.957

如果目标是在**当前路径中****列出**带有**尾随空格**的文件：

 **```
grep -rli '[[:blank:]]$' . 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-03-27T19:51:11.320

如果问题是从字面上查找在每一行末尾都有空格的文件，那么这应该可行：

```
grep -rL '[^[:blank:]]$' . 
```

`-L`告诉报告与模式不匹配的`grep`每个文件，并且模式正在寻找在换行符之前没有空白的行。

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2019-01-14T22:58:04.237

尝试这个 ：

```
find . -type f -name "* " 
```**

# jquery - Jquery 独立切换

> ID：11210129
> 
> 赞同：0
> 
> 时间：2012-06-26T14:56:13.927
> 
> 标签：jquery, jquery-ui

我有一个带有多个 lis 的 div，每个 li 都包含 ul。我想独立切换每个 li。就像如果我点击一个链接它应该只切换该组的 ul，希望下面的代码比我的话更清楚。

```
<div id="sortable" style='width:700px; margin: 0 auto; border:2px solid; border-color:grey;'>
 <li class="ui-state-default"><a href='#' id='expand'> Group 1</a>
    <ul style= 'display:none' class='patents' id="sortable">
        <li id ='1' class="ui-state-default">Item 1</li>
        <li id ='2' class="ui-state-default">Item 2</li>
        <li id ='3' class="ui-state-default">Item 3</li>
    </ul>
 </li>
 <li class="ui-state-default"><a href='#' id='expand'> Group 2</a>
    <ul style= 'display:none' class='patents' id="sortable">
        <li id ='4' class="ui-state-default">Item 4</li>
        <li id ='5' class="ui-state-default">Item 5</li>
        <li id ='6' class="ui-state-default">Item 6</li>
    </ul>
</li> 
```

脚本是

```
 <script>
  $(document).ready(function() {
    $('#expand').click(function() {
        $('.patents').toggle('slow', function() {
                    //instead of patents i need something unique 
        });
    });
});
</script> 
```

如果我单击组 1，项目 1、2、3 应该切换，如果我单击组 2，那么项目 4、5、6 应该切换我该如何实现？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T15:03:00.523

您应该将 class="expand" 而不是 id="expand" 放在顶层

*   （你不应该有重复的ID）。

    然后使用类选择器“。” 而不是 id "#" 并且只选择 ".patents" 这是被点击元素的子元素

    ```
     $(document).ready(function() {
        $('.expand').click(function() {
             $(this).next().toggle('slow', function() {
                        //instead of patents i need something unique
            });
        });
    }); 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T15:01:22.780

基本上，您对 $('.patents') 的调用会获得该类页面上的所有内容。相反，您需要从单击的元素开始。在 click 函数内部， $(this) 引用当前元素。然后，您可以使用 find 方法来定位单击元素的后代。

将 $('.patents') 替换为 $(this).find('.patents')，就可以了。

此外，还有一些小的家务用品：

1.  而不是 id='expand'，您可能应该使用 class='expand'，并将脚本更改为引用 '.expand' 而不是 '#expand'
2.  如果没有封闭 ul 标签，您不应该使用顶级 li 标签。请参阅[使用 <li> 而不包含 <ul> 标签是否危险？](https://stackoverflow.com/questions/2031725/is-using-li-without-enclosing-ul-tags-dangerous).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T15:04:02.290

这里：http: [//jsfiddle.net/zeS8u/](http://jsfiddle.net/zeS8u/)

HTML

```
<ul>
    <li><a href="#" class="clickme">Click me!</a>
        <ul>
            <li>Cat</li>
            <li>Dog</li>
            <li>Mouse</li>
        </ul>
    </li>

    <li><a href="#" class="clickme">Click me too!</a>
        <ul>
            <li>Zebra</li>
            <li>Lion</li>
            <li>Snow Yeti</li>
        </ul>
    </li>
</ul>​ 
```

Javascript：

```
$("a.clickme").bind("click", function(e) {
   $(this).next("ul").toggle(); 
    return false;
});​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T15:04:15.207

id 属性是唯一的，因此您需要更改为类：

例如：

```
<li class="ui-state-default"><a href='#' class='expand'> Group 2</a> 
```

然后这样做：

```
$(document).ready(function() {
  $('.expand').each(function(){
    ($this).click(function() {
      var patents = $(this).next();
      $(patents).toggle(function() {
        $(this).hide();
      },
      function(){
        $(this).show();
      });
  });
}); 
```

# ubuntu - Ubuntu进程停止工作

> ID：11210131
> 
> 赞同：1
> 
> 时间：2012-06-26T14:56:18.670
> 
> 标签：ubuntu, process

我有一个用 python 编写的脚本，它以预定的顺序执行一大堆进程。它使用以下函数来执行这些过程。

```
ON_POSIX = "posix" in sys.builtin_module_names

def executeCommand(cmd):
    print cmd
    p = Popen(cmd, stdout=PIPE, bufsize=1, close_fds=ON_POSIX, shell=True)
    p.communicate() 
```

然而，有时当这些进程被执行时，函数永远不会返回并且永远坐在那里。子进程未列在 top 或 ps aux | grep 知道为什么这些进程没有返回吗？

PS我正在从我自己安装的服务中运行它。此外，我尝试从 python 池（线程池）运行它们，但没有它（它发生在线程池中和单独运行时）。

# jboss - 流口水和 jrules 一样吗？

> ID：11210132
> 
> 赞同：10
> 
> 时间：2012-06-26T14:56:20.747
> 
> 标签：jboss, drools, rule-engine, jrules, jboss-rules

Drools 和 Jrules 之间有区别吗？Jboss规则和Jrules一样吗？什么类型的环境通常使用 Drools？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-27T09:51:09.197

相似之处：
归根结底，这两个应用程序都是 BRMS，所以是的，它们是相似
的 两者都为您提供以下能力：
- 在存储库中存储规则
- 在 Web 环境中编写规则
- 在服务器上执行规则

JRules 远在业务用户的最佳方法（非技术）。
如果您正在寻找一个非愚蠢昂贵的解决方案，那么 JBoss 规则是迄今为止最好的方法
。两者都可以执行 CEP。（复杂事件处理）

区别：
JRules 比 Drools 更成熟，但 Drools 是与
Drools 一起工作的好工具，使用 JSON 编写技术规则 JRules 使用 IRL（Ilog 规则语言）。不用担心，您可以使用 Drools 添加“语言化”，但它不如 JRules 强大。
主要区别在于业务（非技术）的角度。
如果您希望能够用适当的人类语言编写规则，例如：
如果申请人的年龄小于 18 岁，则拒绝该申请；
你可以同时做到这一点。
现在，如果您希望企业用印地语编写规则，用法语审查它们，用德语验证它们并用英语做一些报告，那么 JRules 就是您需要的 BRMS。
您可以使用 JRules 在 Excel 或 Word 中直接编写规则。
因为 Drools 来自自由世界，您可能会遇到一些错误，但由于它是免费的，因此您可以访问所有源代码，与 JRules 相比，其中部分 API 被隐藏

什么环境：
对于 Drools，我会说 JBoss :)
JRules = JBoss、WebSphere、Weblogic、Tomcat 等等
。对于这个：真的是 RTFM。取决于你的需要。
谷歌可能会给你一些关于各种 BRMS 的基准。

总结一下：
如果你有钱（加载）然后 JRules
如果你是穷人或极客然后 Drools - 你会玩得很开心，真的 :)

注意：我谈论的是 Red Hat 支持的“Drools”而不是“JBoss 规则”。
它们之间的区别在于 Red Hat 版本不是最新的 Drools 版本，并且没有与 Drools 完全相同的功能。
仅仅是因为 Red Hat 支持他们的版本，所以他们的发展速度不如 Drools。基本上他们一次选择一个版本并决定在流口水仍在变化时使用它......希望你明白我的意思。
希望能帮助到你

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-06-26T23:54:01.970

不，Drools 是开源规则引擎。它包括几个子项目，如 Drools Expert、Drools Fusion、Drools Guvnor 等。

Red Hat 打包并支持 Drools 作为 JBoss Enterprise BRMS 产品。

JRules 是 IBM 收购的 ILOG 的规则引擎。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-25T22:03:35.997

从[红帽的网站：](http://www.redhat.com/promo/BRMS/)

> 例如，您是否知道在 JBoss Drools 社区项目 v5.1 和 Red Hat 的 JBoss Enterprise BRMS v5.1 之间，有 150 多个错误修复、5 个安全修复和几个性能增强？...
> 
> 红帽的 JBoss Enterprise BRMS 产品基于 JBoss Drools 社区项目成员所做的创新工作。但是，这不是一对一的关系，只有 JBoss Enterprise BRMS 通过企业订阅提供红帽保证，其中包括补丁和更新、基于 SLA 的支持和多年维护政策。借助红帽的 JBoss Enterprise BRMS，您可以管理阻碍部署的技术和政治问题。
> 
> 我们的支持是一流的。红帽客户门户屡获殊荣，红帽在支持排名中始终超过专有竞争对手。
> 
> 但 JBoss Enterprise BRMS 不仅仅是产品稳定性。我们的专业服务团队拥有丰富的经验，即使是最有经验的 JBoss Drools 开发人员也能充分利用规则平台的强大功能。而且很强大！
> 
> JBoss Enterprise BRMS：JBoss Drools 的强大功能与 Red Hat 的保证相得益彰。

# php - 如何在 PHP 中合并 4 个不同的键和值数组？

> ID：11210134
> 
> 赞同：0
> 
> 时间：2012-06-26T14:56:21.663
> 
> 标签：php, arrays, array-merge

这似乎是一个常见的问题，但我找不到任何帮助......

我需要合并 4 个具有不同键和值的数组。所以有我的 4 个不同的数组：

```
array(7) {
  ["id"]=>
  string(2) "32"
  ["title"]=>
  string(7) "Blettes"
  ["product_type_id"]=>
  string(2) "43"
  ["quantity"]=>
  string(4) "1.00"
  ["price"]=>
  string(4) "2.80"
  ["created_at"]=>
  string(19) "2011-09-03 11:31:35"
  ["proposition_vente"]=>
  string(1) "4"
}

array(4) {
  ["id"]=>
  string(2) "32"
  ["achat"]=>
  string(2) "47"
  ["total_price"]=>
  string(18) "131.59999999999994"
  ["total_vat"]=>
  string(18) "6.8619999999999965"
}

array(2) {
  ["id"]=>
  string(2) "32"
  ["exposition"]=>
  string(2) "46"
}

array(3) {
  ["id"]=>
  string(2) "32"
  ["sale_queue_id"]=>
  string(3) "163"
  ["exposition"]=>
  string(2) "56"
} 
```

进入这个：

```
array(7) {
  ["id"]=>
  string(2) "32"
  ["title"]=>
  string(7) "Blettes"
  ["product_type_id"]=>
  string(2) "43"
  ["quantity"]=>
  string(4) "1.00"
  ["price"]=>
  string(4) "2.80"
  ["created_at"]=>
  string(19) "2011-09-03 11:31:35"
  ["proposition_vente"]=>
  string(1) "4"
  ["achat"]=>
  string(2) "47"
  ["total_price"]=>
  string(18) "131.5"
  ["total_vat"]=>
  string(18) "6.86"
  ["exposition"]=>
  string(2) "46"
  ["sale_queue_id"]=>
  string(3) "163"
  ["exposition"]=>
  string(2) "56"
} 
```

我知道我必须使用 id 来正确合并它们。我尝试使用 foreach() 和 array_merge() 的组合但没有成功。

欢迎任何帮助:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T15:09:25.417

```
$result = array_merge($arr1, $arr2, $arr3, $arr4) should work. 
```

你也可以试试这个：

```
$result = array();
$source = array($arr1, $arr2, $arr3, $arr4);

foreach ($source as $a) {
    $result = array_merge($result, $a);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T08:51:07.117

我用这个来解决这个问题：

```
foreach ($totalProposition as $key => $value) {
$test[$key]=array_merge($totalProposition[$key], $totalAchat[$key], $uniqueSale2[$key], $exposition2[$key]);    
} 
```

感谢您的帮助 ： ）

# php - 查询总数：过去 30 天选择的表的行数

> ID：11210135
> 
> 赞同：0
> 
> 时间：2012-06-26T14:56:22.350
> 
> 标签：php, mysql

我需要选择过去 30 天的数据并找到 no: rows....如果我正在计算 no: rows，我会收到警告。那么是否有任何其他替代方法可以找到 no: rows in the selected section .....我的代码是：

```
$thirty_reg=mysql_query("SELECT * FROM user ORDER BY user.date DESC LIMIT 30");

$num_thirty=mysql_num_rows($thirty_reg);

echo $num_thirty; 
```

还需要一个更好的建议来选择过​​去 30 天的数据......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T15:01:10.427

将您的查询修改为此以返回过去 30 天的行。

```
SELECT column FROM user WHERE user.date BETWEEN DATE_SUB(NOW(), INTERVAL 30 DAY) AND NOW() 
```

但是，我建议获取行数而不是像这样的记录集：

```
SELECT COUNT(*) FROM user WHERE user.date BETWEEN DATE_SUB(NOW(), INTERVAL 30 DAY) AND NOW() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T15:05:56.360

`SELECT count(id) FROM user WHERE user.date >= DATE_SUB(NOW(), INTERVAL 30);`

[好吧，有人打败了我哈哈。](https://stackoverflow.com/a/11210227/662565)

# python - 来自 M2M 关系的 Django ImageField upload_to 值

> ID：11210137
> 
> 赞同：0
> 
> 时间：2012-06-26T14:56:27.783
> 
> 标签：python, django, django-forms

我正在尝试`upload_to`从 ManyToMany 字段的 slug 中设置 ImageField 的值。

这是我的模型：

```
def get_image_path(instance, filename):
    return os.path.join('gallery', str(instance.albums.all()[0]), filename)

class Image(models.Model):
    ...
    image = models.ImageField(upload_to=get_image_path)
    ... 
```

不幸的是它不起作用。当我尝试保存 Image 对象时，出现错误：

> 'Image' 实例需要有一个主键值才能使用多对多关系。

有没有正确的做法？

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T15:43:37.273

在访问之前，您必须首先保存和 M2M 关系 w/`instance`的一个实例。`Image()``albums``instance.albums.all()`

在[使用](https://stackoverflow.com/questions/9968532/django-admin-file-upload-with-current-model-id). _ `Model`_ _ 由于 M2M 在这里遇到了麻烦，而不是帖子中提到的方法，使用信号通知准备就绪，例如：`pk``upload_to()``post_save()``m2m_changed``instance.albums.all()`

```
@receiver(m2m_changed, sender=Image.albums.through)
def save_file_on_m2m(sender, instance, action, **kwargs):
    if action == 'post_add' and hasattr(instance, _UNSAVED_FILEFIELD):
        instance.image = getattr(instance, _UNSAVED_FILEFIELD)
        instance.save()        
        instance.__dict__.pop(_UNSAVED_FILEFIELD) 
```

这取决于 的 m2m 值`Image.albums`，如果没有，`image`将会丢失。因此，我建议使用其他一些比这个更可靠的键。

您也可以在保存自身和 M2M 关系后，直接在模型表单上`image`手动保存字段。`Image()`

# javascript - 通过 IFrame 上传文件时的错误处理

> ID：11210142
> 
> 赞同：0
> 
> 时间：2012-06-26T14:56:44.600
> 
> 标签：javascript, jakarta-ee, extjs4

我的申请步骤是：

1.  客户通过复选框选择多个文件，
2.  使用文件的标识符形成请求，
3.  客户端通过 iframe 下载存档：（服务器找到这些文件，压缩它们，然后形成包含 zip 存档字节的响应）

这是 iframe 的代码：

```
function makeSaveFrame(urlToServer) {
      var ifrm = document.createElement("IFRAME");
      ifrm.setAttribute("style", "display:none;");
      ifrm.setAttribute("src", 'urlToServer';
      ifrm.style.width = "0px";
      ifrm.style.height = "0px";
      document.body.appendChild(ifrm);
} 
```

响应的类型和标头：

```
response.setContentType("application/zip");
response.setHeader("Content-Disposition", "attachments; filename=\"" + fileName + ".zip\""); 
```

问题是：如果出现问题，我需要向客户发送原因。就我而言，错误消息必须是 JSONObject 类型。

[如果服务器发生错误，我可以更改响应的内容类型并发送 JSONObject，但我不知道如何过滤响应，甚至不知道如何在 iframe 中捕获接收响应的事件]

请分享关于这个问题的经验。

**更新**

如果我发送

```
response.sendError(HttpServletResponse.SC_BAD_REQUEST, "testMessage"); 
```

**错误**的响应响应到达，但 makeSaveFrame() 方法周围的 try/catch 块没有捕捉到这一点。

**更新** 我试过这个

```
var uploadForm = document.createElement('form');
                    uploadForm.name = 'uploadForm';
                    uploadForm.setAttribute("style", "display:none;");
                    document.body.appendChild(uploadForm);

                    Ext.Ajax.request({
                        url: 'requestURL',
                        form: uploadForm.getForm().getEl(),
                        isUpload : true,
                        method: 'post',
                        failure : function() {
                            Ext.MessageBox.show({
                                title   : 'title',
                                msg     : 'message',
                                buttons : Ext.MessageBox.OK
                            });
                        }
                    }); 
```

但是**isUpload**参数会终止失败回调。因此，当服务器以**错误的响应**响应进行响应时，不会出现错误处理程序（故障回调）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T14:30:23.107

请看这篇[文章](http://viralpatel.net/blogs/ajax-style-file-uploading-using-hidden-iframe/)。似乎可以在上传后操纵内容，因此可以对其应用处理程序。不幸的是，我有两个问题：

1.  在 IE 中，打开 2 个窗口，第二个窗口（iframe）在下载文件后没有关闭（在 FF 中完美运行）

2.  当响应到达时，内容总是空的，我无法估计。

下一个想法是从响应标头（iframe）中获取 cookie。这个解决方案似乎很有希望......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T14:03:10.877

由于您已经更新了您的问题并且不再使用框架来请求内容，您可以使用 jquery，它可以类似于您更新的内容（最后是 ExtJS4 部分），

```
 $.ajax({
                    url: 'requestURL',
                    form: uploadForm.serialize(),
                    method: 'post',                        
                    error : function(jqXHR, textStatus, errorThrown) {
                        // you can check the jqXHR object properties & methods to check
                        //  the response status and contentType
                        alert("An error occured.");
                    }
                }); 
```

希望这有帮助。有关 Jquery AJAX 请求的更多选项，请遵循[JQuery 参考](http://api.jquery.com/jQuery.ajax/)

PS：您需要在页面中添加额外的 jquery 库文件。

# javascript - 使用 JavaScript 从 URL 获取 ID

> ID：11210148
> 
> 赞同：3
> 
> 时间：2012-06-26T14:57:11.993
> 
> 标签：javascript, extract

我是 JavaScript 新手，我需要一些帮助，使用 JavaScript 从 URL 中提取 ID 用于画廊。

这是链接：`www.shinylook.ro/produs/44/mocasini-barbati.html`。

我需要变量中的数字 44。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-26T15:00:53.223

您必须使用该`location`对象来获取 URL，之后，您可以使用`split`斜杠上的 URL 拆分。

```
location.pathname.split('/')[2] // Returns 44 in your example 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-26T14:58:59.530

您可以使用[`String#split`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/split)或使用[正则表达式](https://developer.mozilla.org/en/JavaScript/Guide/Regular_Expressions)来做到这一点。

`String#split`允许您在分隔符上拆分字符串并获得一个数组作为结果。因此，在您的情况下，您可以拆分并获取索引为 2`/`的数组。`44`

正则表达式使您可以进行更复杂的匹配和提取，如链接页面上的各种演示所示。例如，

```
var str = "www.shinylook.ro/produs/44/mocasini-barbati.html";
var m = /produs\/(\d+)\//.exec(str);
if (m) {
    // m[1] has the number (as a string)
} 
```

在这两种情况下，数字都是一个字符串。您可以使用[`parseInt`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/parseInt),解析它`n = parseInt(s, 10)`（假设它以 10 为底）。

# javafx-2 - Java FX 2 单元格编辑、焦点和文本选择

> ID：11210150
> 
> 赞同：3
> 
> 时间：2012-06-26T14:57:19.627
> 
> 标签：javafx-2

我正在测试 JavaFX 2.1 并试图让可编辑的表视图以我希望的方式运行。

我使用 JavaFX 2 文档中的示例作为基础：[http ://docs.oracle.com/javafx/2/ui_controls/table-view.htm](http://docs.oracle.com/javafx/2/ui_controls/table-view.htm)

该示例有两个问题：

1.  用户被迫单击单元格 3 次以对其进行编辑，一次选择行，一次选择单元格并使其可编辑，然后进一步单击以聚焦 TextField
2.  只有在按下回车键时才会提交更改，如果在单元格外部单击鼠标，则在单元格中输入的数据将丢失。

另一方面，可以正常工作的一个功能是，我可以选择文本，并使用鼠标在 TextField 中重新定位插入符号，次数不限。

这里有两个问题分别与这两个问题有关：

[Java FX 2 表格单元格编辑和焦点](https://stackoverflow.com/questions/10331497/java-fx-2-table-cell-editing-and-focus)

和

[javafx 2.1 更新表格视图](https://stackoverflow.com/questions/10758035/javafx-2-1-updating-tableview)

当第一个问题的答案单独应用时，我只需单击一次即可编辑单元格（在选择行之后），我仍然可以选择文本并移动插入符号。

当第二个问题的答案自行应用时，在不按下回车键的情况下提交编辑，但我只能重新定位插入符号或选择文本一次，如果我再次尝试，则提交编辑.

当我将两个答案一起应用时，成功应用焦点并在单击鼠标时提交编辑，但我失去了重新定位插入符号或完全选择文本的能力。单元格内的任何鼠标单击都会提交编辑。

我的问题是如何在不失去定位插入符号和选择文本的能力的情况下解决最初的 2 个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T01:13:45.697

在回答他自己的问题[TableView - Better Editing through Binding 时尝试 jkaufmann 的示例应用程序？](https://stackoverflow.com/questions/7880494/tableview-better-editing-through-binding) 他的绑定解决方案和 TableView 编辑语义的实现似乎充分解决了您在问题中提出的所有问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-04-13T20:59:31.200

您需要本着 JavaFX 框架的精神在正确的时间修改 GUI 组件。即在控件 layoutChildren 方法中。您需要覆盖自定义 TableCell 的 layoutChildren 方法并设置光标位置，然后例如

```
TextField textField = new TextField() {
    private boolean first = true;

    @Override protected void layoutChildren() {
      super.layoutChildren();

      // Set cursor caret at end of text (and clear highlighting)
      if (first) {
        this.end();
        first = false;
      }
    }
  }; 
```

我还注意到 Java 1.8.0_241 在 TextFieldTableCell 实现中也包含此问题。更糟糕的 TextField 对 TextFieldTableCell 实现是完全私有的，所以为了解决这个问题，我选择复制 javax.scene.table.cell.TextFieldTableCell 和 javax.scene.table.cell.CellUtils 的源代码。TextField 在 CellUtils 中实例化，因此您可以在那里修复光标位置。例如

```
 static <T> TextField createTextField(final Cell<T> cell, final StringConverter<T> converter) {
    final TextField textField = new TextField(getItemText(cell, converter)) {
    private boolean first = true;

      @Override protected void layoutChildren() {
        super.layoutChildren();

        // Set cursor caret at end of text (and clear highlighting)
        if (first) {
          this.end();
          first = false;
        }
      };
  ...

  ...
  } 
```

# xml - 使用参数匹配元素 inx XSLT

> ID：11210155
> 
> 赞同：2
> 
> 时间：2012-06-26T14:57:31.260
> 
> 标签：xml, xslt

我从另一篇文章中获得了以下模板..

```
<xsl:stylesheet version="1.0"
xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
xmlns:ext="http://exslt.org/common" exclude-result-prefixes="ext">
<xsl:output omit-xml-declaration="yes" indent="yes"/>
<xsl:strip-space elements="*"/>

<xsl:param name="pUncertainElName" select="'second'"/>
<xsl:param name="pParentPath" select="'outerElement/innerElement'" />
<xsl:param name="pOrderedNames" select="'|first|second|third|'"/>

<xsl:template match="node()|@*">
  <xsl:copy>
  <xsl:apply-templates select="node()|@*"/>
  </xsl:copy>
</xsl:template>

<xsl:template match="outerElement/innerElement">
  <xsl:variable name="vrtfFirstPass">
      <xsl:copy>
      <xsl:apply-templates select="node()|@*"/>
      <xsl:apply-templates select=
        "self::*[not(*[name() = $pUncertainElName])
                or
                *[name()=$pUncertainElName and @missing-cause]]"
        mode="missing"/>
      </xsl:copy>
  </xsl:variable>

  <xsl:apply-templates select="ext:node-set($vrtfFirstPass)/*" mode="pass2"/>
</xsl:template>

<xsl:template match="*[@missing-cause]"/>

<xsl:template match="*" mode="missing">
    <xsl:element name="{$pUncertainElName}">
        <CharacterString>INSERTED BY TEMPLATE</CharacterString>
    </xsl:element>
</xsl:template>

<xsl:template match="outerElement/innerElement" mode="pass2">
  <xsl:copy>
  <xsl:apply-templates>
    <xsl:sort data-type="number" select=
    "string-length(substring-before($pOrderedNames,
                                    concat('|', name(), '|')
                                    )
                  )"/>
  </xsl:apply-templates>
  </xsl:copy>
</xsl:template>
</xsl:stylesheet> 
```

添加缺失元素的目的是添加源文档中缺失的特定位置。源文档看起来像这样

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<doc>
  <outerElement>
    <innerElement>
      <first>
        <textElement>Some Text</textElement>
      </first>
      <second missing-cause="bla" />
      <third>
        <textElement>Some Text</textElement>
      </third>
    </innerElement>
  </outerElement>
</doc> 
```

我必须以类似的方式添加很多这样的元素，所以我想使用参数来指定父路径和我要插入的元素。

那么第一个问题来了：如何在比赛中使用参数？match="$parameter" 或变体似乎不起作用。

第二个：使用此模板添加元素仍然存在问题，我认为这来自第二遍。

如果我的文档看起来确实像上面发布的那样，它会将输出展平为

```
<doc>
  <outerElement>Some TextSome TextINSERTED BY TEMPLATE</outerElement>
</doc> 
```

如果缺少应有的工作。在第二条路径的构建中最有可能丢失了一些东西，但我不知道如何解决这个问题。

最后一个.. 可以在单个文档上使用不同的参数调用此模板（例如 20 次）来转换它，还是我应该尝试其他方法？

再次感谢您的帮助，对不起，我是新手；）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T16:12:07.923

在 XSLT 1.0 和 XSLT 2.0 中，不可能动态地计算 XPath 表达式。

因此，您尝试执行的操作`$pParentPath`不会产生预期的结果。

作为一种解决方法，您可以传递两个不同的参数：`pchildName`并`pgrandchildName`使用如下内容：

```
*[name()=$pchildName]/*[name()=$pgrandchildName] 
```

在 XSLT 1.0 中，匹配模式中禁止变量或参数引用。在 XSLT 2.0 中是可以的。

**这是转换，已更正以处理此特定 XML 文档：**

```
<xsl:stylesheet version="1.0"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:ext="http://exslt.org/common" exclude-result-prefixes="ext">
    <xsl:output omit-xml-declaration="yes" indent="yes"/>
    <xsl:strip-space elements="*"/>

    <xsl:param name="pUncertainElName" select="'second'"/>
    <xsl:param name="pOrderedNames" select="'|first|second|third|'"/>

    <xsl:template match="node()|@*">
      <xsl:copy>
      <xsl:apply-templates select="node()|@*"/>
      </xsl:copy>
    </xsl:template>

    <xsl:template match="innerElement">
      <xsl:variable name="vrtfFirstPass">
          <xsl:copy>
          <xsl:apply-templates select="node()|@*"/>
          <xsl:apply-templates select=
            "self::*[not(*[name() = $pUncertainElName])
                    or
                    *[name()=$pUncertainElName and @missing-cause]]"
            mode="missing"/>
          </xsl:copy>
      </xsl:variable>

      <xsl:apply-templates select="ext:node-set($vrtfFirstPass)/*" mode="pass2"/>
    </xsl:template>

    <xsl:template match="*[@missing-cause]"/>

    <xsl:template match="*" mode="missing">
        <xsl:element name="{$pUncertainElName}">
            <CharacterString>INSERTED BY TEMPLATE</CharacterString>
        </xsl:element>
    </xsl:template>

    <xsl:template match="innerElement" mode="pass2">
      <xsl:copy>
      <xsl:apply-templates>
        <xsl:sort data-type="number" select=
        "string-length(substring-before($pOrderedNames,
                                        concat('|', name(), '|')
                                        )
                      )"/>
      </xsl:apply-templates>
      </xsl:copy>
    </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<doc>
    <outerElement>
        <innerElement>
            <first>
                <textElement>Some Text</textElement>
            </first>
            <second missing-cause="bla" />
            <third>
                <textElement>Some Text</textElement>
            </third>
        </innerElement>
    </outerElement>
</doc> 
```

**产生了想要的正确结果：**

```
<doc>
   <outerElement>
      <innerElement>
         <first>
            <textElement>Some Text</textElement>
         </first>
         <second>
            <CharacterString>INSERTED BY TEMPLATE</CharacterString>
         </second>
         <third>
            <textElement>Some Text</textElement>
         </third>
      </innerElement>
   </outerElement>
</doc> 
```

**可以修改转换，以便它处理文档层次结构不同位置的不同元素的子元素**：

```
<xsl:stylesheet version="1.0"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:ext="http://exslt.org/common" exclude-result-prefixes="ext">
    <xsl:output omit-xml-declaration="yes" indent="yes"/>
    <xsl:strip-space elements="*"/>

    <xsl:param name="pUncertainElName" select="'second'"/>
    <xsl:param name="pOrderedNames" select="'|first|second|third|'"/>

    <xsl:template match="node()|@*">
      <xsl:copy>
      <xsl:apply-templates select="node()|@*"/>
      </xsl:copy>
    </xsl:template>

    <xsl:template match="/">
      <xsl:variable name="vrtfFirstPass">
        <xsl:apply-templates select="node()|@*"/>
      </xsl:variable>

      <xsl:apply-templates select="ext:node-set($vrtfFirstPass)/*" mode="pass2"/>
    </xsl:template>

    <xsl:template match="innerElement">
      <xsl:copy>
          <xsl:apply-templates select="node()|@*"/>
          <xsl:apply-templates select=
            "self::*[not(*[name() = $pUncertainElName])
                    or
                    *[name()=$pUncertainElName and @missing-cause]]"
            mode="missing"/>
        </xsl:copy>
    </xsl:template>

    <xsl:template match="*[@missing-cause]"/>

    <xsl:template match="*" mode="missing">
        <xsl:element name="{$pUncertainElName}">
            <CharacterString>INSERTED BY TEMPLATE</CharacterString>
        </xsl:element>
    </xsl:template>

    <xsl:template match="node()|@*" mode="pass2">
      <xsl:copy>
      <xsl:apply-templates select="node()|@*" mode="pass2"/>
      </xsl:copy>
    </xsl:template>

    <xsl:template match="innerElement" mode="pass2">
      <xsl:copy>
       <xsl:apply-templates>
         <xsl:sort data-type="number" select=
        "string-length(substring-before($pOrderedNames,
                                        concat('|', name(), '|')
                                        )
                      )"/>
       </xsl:apply-templates>
      </xsl:copy>
    </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于以下 XML 文档**（包含两个`innerElement`元素 - 具有不同的父级和不同的深度 - 其子级需要专门处理）时：

```
<doc>
    <outerElement>
        <innerElement>
            <first>
                <textElement>Some Text</textElement>
            </first>
            <second missing-cause="bla" />
            <third>
                <textElement>Some Text</textElement>
            </third>
        </innerElement>
        <outerElement2>
          <outerElement3>
            <innerElement>
                    <first>
                        <textElement>Some Text</textElement>
                    </first>
                    <third>
                        <textElement>Some Text</textElement>
                    </third>
            </innerElement>
          </outerElement3>
        </outerElement2>
    </outerElement>
</doc> 
```

**产生了想要的正确结果**：

```
<doc>
   <outerElement>
      <innerElement>
         <first>
            <textElement>Some Text</textElement>
         </first>
         <second>
            <CharacterString>INSERTED BY TEMPLATE</CharacterString>
         </second>
         <third>
            <textElement>Some Text</textElement>
         </third>
      </innerElement>
      <outerElement2>
         <outerElement3>
            <innerElement>
               <first>
                  <textElement>Some Text</textElement>
               </first>
               <second>
                  <CharacterString>INSERTED BY TEMPLATE</CharacterString>
               </second>
               <third>
                  <textElement>Some Text</textElement>
               </third>
            </innerElement>
         </outerElement3>
      </outerElement2>
   </outerElement>
</doc> 
```

**最后，我们可以进一步修改转换，以便它可以处理不同名字父母的孩子——比如`innerElement`和`someOtherInnerElement`：**

```
<xsl:stylesheet version="1.0"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:ext="http://exslt.org/common" exclude-result-prefixes="ext">
    <xsl:output omit-xml-declaration="yes" indent="yes"/>
    <xsl:strip-space elements="*"/>

    <xsl:param name="pUncertainElName" select="'second'"/>
    <xsl:param name="pOrderedNames" select="'|first|second|third|'"/>

    <xsl:template match="node()|@*">
      <xsl:copy>
      <xsl:apply-templates select="node()|@*"/>
      </xsl:copy>
    </xsl:template>

    <xsl:template match="/">
      <xsl:variable name="vrtfFirstPass">
        <xsl:apply-templates select="node()|@*"/>
      </xsl:variable>

      <xsl:apply-templates select="ext:node-set($vrtfFirstPass)/*" mode="pass2"/>
    </xsl:template>

    <xsl:template match="innerElement | someOtherInnerElement">
      <xsl:copy>
          <xsl:apply-templates select="node()|@*"/>
          <xsl:apply-templates select=
            "self::*[not(*[name() = $pUncertainElName])
                    or
                    *[name()=$pUncertainElName and @missing-cause]]"
            mode="missing"/>
        </xsl:copy>
    </xsl:template>

    <xsl:template match="*[@missing-cause]"/>

    <xsl:template match="*" mode="missing">
        <xsl:element name="{$pUncertainElName}">
            <CharacterString>INSERTED BY TEMPLATE</CharacterString>
        </xsl:element>
    </xsl:template>

    <xsl:template match="node()|@*" mode="pass2">
      <xsl:copy>
      <xsl:apply-templates select="node()|@*" mode="pass2"/>
      </xsl:copy>
    </xsl:template>

    <xsl:template match="innerElement | someOtherInnerElement" mode="pass2">
      <xsl:copy>
       <xsl:apply-templates>
         <xsl:sort data-type="number" select=
        "string-length(substring-before($pOrderedNames,
                                        concat('|', name(), '|')
                                        )
                      )"/>
       </xsl:apply-templates>
      </xsl:copy>
    </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于以下 XML 文档时，其中要以所需方式处理的子级具有使用这两个名称 (`innerElement`和`someOtherInnerElement`) 命名的父级：**

```
<doc>
    <outerElement>
        <innerElement>
            <first>
                <textElement>Some Text</textElement>
            </first>
            <second missing-cause="bla" />
            <third>
                <textElement>Some Text</textElement>
            </third>
        </innerElement>
        <outerElement2>
          <outerElement3>
            <someOtherInnerElement>
                    <first>
                        <textElement>Some Text</textElement>
                    </first>
                    <third>
                        <textElement>Some Text</textElement>
                    </third>
            </someOtherInnerElement>
          </outerElement3>
        </outerElement2>
    </outerElement>
</doc> 
```

**再次产生所需的正确结果：**

```
<doc>
   <outerElement>
      <innerElement>
         <first>
            <textElement>Some Text</textElement>
         </first>
         <second>
            <CharacterString>INSERTED BY TEMPLATE</CharacterString>
         </second>
         <third>
            <textElement>Some Text</textElement>
         </third>
      </innerElement>
      <outerElement2>
         <outerElement3>
            <someOtherInnerElement>
               <first>
                  <textElement>Some Text</textElement>
               </first>
               <second>
                  <CharacterString>INSERTED BY TEMPLATE</CharacterString>
               </second>
               <third>
                  <textElement>Some Text</textElement>
               </third>
            </someOtherInnerElement>
         </outerElement3>
      </outerElement2>
   </outerElement>
</doc> 
```

**说明**：

这与上一个问题的逻辑基本相同：

1.  二次处理。

2.  覆盖身份规则。

3.  正确使用模板和模板匹配模式。

4.  按名称的首选顺序对元素进行排序。

# php - 如果更新值为特定字符串，则跳过更新表字段

> ID：11210160
> 
> 赞同：0
> 
> 时间：2012-06-26T14:57:49.750
> 
> 标签：php, mysql

我可以检查更新值是否为`N`，然后跳过此字段吗？

应该在 PHP 或 MySQL 的代码中完成吗？

流程是：

**前**

`update store set book1 = 'Y', book2 = 'Y', book3 = 'N', book4 = 'N', book5 = 'N' where id =`1个；

**后**

`update store set book1 = 'Y', book2 = 'Y' where id =`1个；

因为 book3、book4 和 book5 会更新为 的值`N`，所以我跳过了这个字段

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T01:59:36.067

这是一个非常开放的问题。这取决于您如何为脚本构建 SQL 代码，但是如果您想更改 SQL，那么在 PHP 中执行将是您的最佳选择。

作为一个简单的示例，您可以执行以下操作：

```
$books = array ( 'book1' => 'Y',
                'book2' => 'Y',
                'book3' => 'N',
                'book4' => 'N',
            );

$updates = array();         

foreach ($books as $book => $value) {
    if ($value != 'N') {
        $updates[] = "$book  = '$value'";
    }
}

$update = implode(', ', $updates);
$query = 'update store set '.$update.' where id =1;'; 
```

# javascript - 如何在 JavaScript 中右对齐字符串或数字

> ID：11210161
> 
> 赞同：1
> 
> 时间：2012-06-26T14:57:52.720
> 
> 标签：javascript

我需要一列数字来正确对齐。在'C'中： printf("\n %10d %10s"...)

这是如何在 JavaScript 中完成的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T15:15:02.080

如果您使用 JavaScript 在网页中打印数字，您将需要使用 CSS text-align 属性。

例如，如果你在 DOM 元素中写出数字列`<div id='myNumbers'>`，你可以写

```
document.getElementById('myNumbers').style.textAlign = 'right'; 
```

# mysql - 日期时间列的值是默认值吗

> ID：11210162
> 
> 赞同：0
> 
> 时间：2012-06-26T14:57:56.893
> 
> 标签：mysql

我有一个 MySQL 表和一个日期时间类型的列。它的默认值类似于 0000-00-00 00:00:00。

如何使用本机 MySQL 查询功能检查此日期时间列上给定行的值是否为上述值。例如，不使用“SELECT * FROM table WHERE my_date<>'0000-00-00 00:00:00'”，因为这为我相信的不同 MySQL 服务器和配置上的错误留出了空间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T15:02:00.130

```
SELECT * FROM table WHERE my_date <> 0 
```

你可以用

```
select cast('0000-00-00 00:00:00' as datetime) = 0 
```

它返回`true`（以及`false`所有其他`datetime`值）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T15:03:21.480

您可以执行类似“SELECT * FROM table WHERE my_date > '1970-01-01 00:00:00”之类的操作。1/1/1970 是常用的纪元日期。

# javascript - Onmouseclick 更改另一张图片

> ID：11210164
> 
> 赞同：2
> 
> 时间：2012-06-26T14:58:08.577
> 
> 标签：javascript, html, css

我有三个图像：第一个是电灯开关，第二个是“关闭”灯泡，第三个是“打开”灯泡。当用户单击电灯开关图像时，我希望它将“关闭”灯泡图像更改为“打开”灯泡图像。这可能吗？

这些是图像：

![转变](../Images/bbc558ff3d31b4fe50e2fde2be5b9b77.png) ![关闭灯泡](../Images/8a4e3e215566d189aea782b89344c820.png) ![在灯泡上](../Images/bdb70cbd3ed74b05555008b6209293f5.png)

Javascript：

```
img2=new Image();
img2.src="images/RCS/lightbul2-250.gif";
img3=new Image();
img3.src="images/RCS/lightbuld1.gif";

function changeImage() {
    document.getElementById('myImage').src=img2.src;
}
function changeImage2() {
document.getElementById('myImage').src=img3.src;
} 
```

HTML：

```
<img id="myImage" onmouseover="changeImage()" onmouseout="changeImage2()" border="0" width="250" height="141" src="images/RCS/lightbulb1-100.gif"> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T15:10:24.753

您可以使用 JQuery 来实现这一点

```
$(document).ready(function(){
     $('#switch').click(function(){
          $('#bulb').attr('src', 'bulbOn.jpg');
     });
}); 
```

只需给您的开关图像一个 ID 为“开关”，您的原始灯泡图像一个 ID 为“灯泡”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T15:24:17.400

是的，只需将一个类附加到灯开关图像并执行以下操作：

HTML 标记：

```
<img src="http://i.stack.imgur.com/wLSuu.gif" class="lightswitch">

<div id="container">
<div id="bulb" class=""></div>
</div> 
```

CSS：

```
.toggle-off { display: none; }

#bulb { height: 100%; width: 100%; background: url('http://i.stack.imgur.com/l9EOR.gif')    
center center no-repeat;  }

.bulb-on { background: url('http://i.stack.imgur.com/TnKyp.gif') center center no-repeat 
!important; }

.lightswitch { float: left; }

.clear { clear: both; }

#container { width: 300px; height: 300px; float: right; } 
```

​然后使用JQUERY：

```
$('.lightswitch').click(function() {
   $('#bulb').toggleClass('bulb-on');
});​ 
```

基本上这是在做什么：一旦点击灯开关图片，它就会检查 BULB 的 ID 是否具有“灯泡开启”类。如果没有，它正在添加它。如果是这样，它正在删除它。

您可能还希望设置灯光开关的样式，使其具有手形光标，就好像它是一个链接一样，如下所示：

```
.lightswitch { cursor: hand; cursor: pointer; } 
```

JS 小提琴在这里：

[http://jsfiddle.net/SDRQU/](http://jsfiddle.net/SDRQU/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T20:37:52.817

您也可以在没有 JQuery 的情况下使用 if/else 语句来实现这一点。

HTML 标记：

```
<a href="#" onClick="changeImage()"><img src="lightSwitch.jpg"></a>
<img id="myImage" src="lightOff.jpg"> 
```

Javascript：

```
function changeImage() {
    if(document.getElementById('myImage').src == 'lightOff.jpg') {
        document.getElementById('myImage').src = 'lightOn.jpg';
    } else if(document.getElementById('myImage').src == 'lightOn.jpg') {
        document.getElementById('myImage').src = 'lightOff.jpg';
    }
} 
```

[JS 小提琴示例](http://jsfiddle.net/5bsdw/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-03-03T04:53:42.560

```
<script type="text/javascript">
function altsrcImg(cnImage) {
    var src = document.getElementById(cnImage).src;
    var alt = document.getElementById(cnImage).alt;
    document.getElementById(cnImage).src = alt;
    document.getElementById(cnImage).alt = src;
}
</script>
<img id="cnImage" src="TnKyp.gif" alt="l9EOR.gif"><br>
<img id="cnImage" onClick="altsrcImg(this.id)" src="wLSuu.gif"> 
```

我正在使用我编写的通用 javascript 在指定为 src 的图像和另一个指定为 alt 的图像之间翻转。

上面的脚本有效。[看到这个](http://notes.lakdiva.org/javas/altlight.html)。

但是，如果我更改图像顺序，它将不起作用。可能是因为现在有两个 src 与`id="cnImage"`. 我仍在学习 JavaScript 的基础知识。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-10-18T04:26:43.593

```
<img src="../switch1.png"  id="switch1" onclick="ON(1)"> <img
    src="../switch2.png"  id="switch2" onclick="OFF(0)"> <img
    src="../lighON.png"  id="ON"> <img src="../lighOFF.png" id="OFF">
           <script> function ON(X){ if(X=1) { document.getElementById("ON").style.display=block;
    document.getElementById("OFF").style.display=none;
    document.getElementById("switch1").style.display=block;
    document.getElementById("switch2").style.display=none; }else{
    document.getElementById("ON").style.display=none;
    document.getElementById("OFF").style.display=block;
    document.getElementById("switch1").style.display=none;
    document.getElementById("switch2").style.display=block; } y=0;
    </script> 
```

```
css 
```

```
#ON,#OFF{position:absolute;top:30px;left:30px;width:50px; height:50px;}
    #switch1,#switch2{position:absolute;top:30px;left:330px;width:50px; height:50px;}
    #OFF,#switch2{dispay:none;} 
```

# javascript - jQuery地图亮点？

> ID：11210169
> 
> 赞同：0
> 
> 时间：2012-06-26T14:58:20.713
> 
> 标签：javascript, jquery, jquery-plugins, jquery-highlightfade

我需要画我的形象。我正在尝试在此链接中使用 JQuery：http: [//davidlynch.org/projects/maphilight/docs/](http://davidlynch.org/projects/maphilight/docs/)

当我使用鼠标悬停时确实有效，但是我需要在打开页面时绘制所有图像而不使用鼠标悬停？

这该怎么做 ？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T15:06:47.133

```
$(document).ready(function() 
{
  $('.targetClass').mouseover();
} 
```

在这里，您的演示几乎完全符合您的要求： [http ://davidlynch.org/projects/maphilight/docs/demo_simple.html](http://davidlynch.org/projects/maphilight/docs/demo_simple.html)

# vb.net - 如果 DataTable 不在同一表单上，VB.NET BindingSource ListChanged 事件不会触发

> ID：11210171
> 
> 赞同：1
> 
> 时间：2012-06-26T14:58:27.167
> 
> 标签：vb.net, data-binding

我有一个`DataGridView`我绑定到 a`BindingSource`到 a`DataView`到 a `DataTable`。当将行添加到时，`DataTable`我希望更改`DataGridView`自动出现，就像他们应该的那样。标准的东西。

如果我将`DataTable`实例放在与 相同的表单上`DataGridView`，则会触发`BindingSource`'`ListChanged`事件并`DataGridView`刷新。但是如果我把它`DataTable`放在其他任何地方，比如在一个模块中或另一个表单上，除非我最小化并恢复它的表单，否则`ListChanged`事件不会触发并且`DataGridView`不会自动刷新。为什么？

**更新**

这是我如何在一个简单的测试应用程序中执行此操作的示例：

模块：

```
Imports System.ComponentModel

Module modTick
    Private WithEvents tmr As System.Timers.Timer
    Private r As New Random()

    Public dt As DataTable

    Public Sub Init()
        dt = New DataTable("table")
        dt.Columns.Add("Number")
        dt.Rows.Add(New Object() {r.Next})
        dt.Rows.Add(New Object() {r.Next})
        dt.Rows.Add(New Object() {r.Next})
    End Sub

    Public Sub StartTimer()
        tmr = New System.Timers.Timer()
        tmr.AutoReset = True
        tmr.Interval = 500
        tmr.Enabled = True
    End Sub

    Private Sub _tmrPulse_Elapsed(ByVal sender As Object, ByVal e As System.Timers.ElapsedEventArgs) Handles tmr.Elapsed
        dt.Rows.Add(New Object() {r.Next})
    End Sub
End Module 
```

表格：

```
Public Class Form1

    Private dv As DataView
    Private WithEvents bs As BindingSource = New BindingSource()
    Private WithEvents tmr As Timer = New Timer()

    Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
        modTick.Init()

        dv = New DataView()
        dv.Table = modTick.dt
        dv.AllowDelete = False
        dv.AllowEdit = False
        dv.AllowNew = False
        dgdisplay.AutoGenerateColumns = True
        bs.DataSource = dv
        dgdisplay.DataSource = bs

        tmr.Interval = 500
        tmr.Enabled = True
        modTick.StartTimer()
    End Sub

    Private Sub tmr_Tick(ByVal sender As Object, ByVal e As System.EventArgs) Handles tmr.Tick
        Label1.Text = bs.Count
    End Sub
End Class 
```

因此，如果我将模块的代码放入表单中，则会因为'事件触发而`DataGridView`刷新。照原样，它既不触发也不刷新。但是如果我最小化并恢复表单，更改就在那里。显示了项目的数量，这是正确的。`BindingSource``ListChanged``Label``DataTable`

# java - 使用向量从数据库中填充 JTable 并在最后一列中显示复选框

> ID：11210172
> 
> 赞同：1
> 
> 时间：2012-06-26T14:58:32.767
> 
> 标签：java, swing, ms-access, jtable, tablemodel

我已经搜索了所有内容，但还没有找到可以帮助我的示例...我需要使我的 JTable 的最后一列（由 ms 访问数据库填充）显示为默认未选中的复选框。我从中提取的数据库有数百条记录，但是出于我们的目的，我已将代码和数据库修改为更简单。我想要做的就是让最后一列作为复选框出现在 Java gui 上，用户可以检查并最终保存结果。也许 JTable 不是最好的方法？

对于此代码，我将 Access 数据库命名为 clientEmployee 并添加了四列，最后一列名为“活动”并包含是/否值（访问中的复选框）。

请帮助我，因为我的任务很快就要到期了。谢谢！

```
This is the main Gui.....

import javax.swing.*;  
import java.awt.event.*;
import java.awt.*;
import java.sql.SQLException;

public class TheMainGUI extends JFrame {  

    //Elements of Notes Tab  
    private JButton buttons5[];
    private JLabel labels5[];
    private String fldLabel5[] = {"Client","Employee"};
    private JPanel p1d;
        static String sql;

public TheMainGUI() {  

//creates the main tab pane object  
JTabbedPane jtp = new JTabbedPane();  

//adds tabbed pane to the frame   
getContentPane().add(jtp);  

//Creats all of the tabs

JPanel jp5 = new JPanel();//checklist tab

//This adds the tabs to the tabbed pane and sets their titles 

 jtp.addTab("Stakeholders", jp5);

        labels5 = new JLabel[2];
        buttons5 = new JButton[2];
        p1d = new JPanel();

        p1d.setLayout(new GridLayout(2,4,5,5));

        jp5.setLayout(new FlowLayout());

        for(int count=0;count<buttons5.length && count<labels5.length; count++) {
            labels5[count] = new JLabel(fldLabel5[count]);
                buttons5[count] = new JButton(fldLabel5[count]);

                p1d.add(buttons5[count]);
}
               buttons5[0].addActionListener(
        new ActionListener() {

            //Handle JButton event if it is clicked
            public void actionPerformed(ActionEvent event) {

                            sql = "Select * from client";
                            DatabaseForm.dbFrame();
                            //setVisible(false);        
            }
        }
        );   
                buttons5[1].addActionListener(
        new ActionListener() {

            //Handle JButton event if it is clicked
            public void actionPerformed(ActionEvent event) {

                            sql = "Select * employee'";
                            DatabaseForm.dbFrame();
                            //setVisible(false);        
            }
        }
        );   

            jp5.add(p1d);
}

     //Main method creates GUI
     public static void main (String []args){  
        TheMainGUI frame = new TheMainGUI();       
        frame.setTitle("Stakeholders");  
        frame.setSize(400,500);
        frame.setLocationRelativeTo(null);
        frame.setDefaultCloseOperation(EXIT_ON_CLOSE);
        frame.setVisible(true);
}
     }

This is the database form class........

import java.awt.*;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.io.*;
import java.sql.*;
import java.util.*;
import javax.swing.*;
import javax.swing.table.*;
import javax.swing.JCheckBox;

public class DatabaseForm extends JFrame{

    public  ResultSet rs;
    public  Statement stmt;
    public  Connection con;
    JButton save;
    public Checkbox box[];

public DatabaseForm() {

    Vector columnNames = new Vector();
    Vector data = new Vector();

    try {
            // connects to database    
            Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");
            con =DriverManager.getConnection("jdbc:odbc:clientEmployee");

                //declare statment variable
                 stmt = con.createStatement();
                //declare result set and get query from the main gui
                 rs = stmt.executeQuery( TheMainGUI.sql );

                 //declare metadata variable 
                ResultSetMetaData md = rs.getMetaData();

        //set variable colmns to get column count                  
        int columns = md.getColumnCount();

        //for loop retreives all column names from the database
        for (int i = 1; i <= columns; i++) {
        columnNames.addElement( md.getColumnName(i) );
        }

     while (rs.next()) {

        Vector row = new Vector(columns);

        //for loop that retreives data from the columns
        for (int i = 1; i <= columns; i++) {

        row.addElement( rs.getObject(i));
        //row.add(box[i]);
        }
        data.addElement( row );

}
            rs.close();
            stmt.close();
}
    catch(Exception e) {
            System.out.println( e );
}
    //create JTable
            JTable table = new JTable(data, columnNames);
    // create scroll feature
        JScrollPane scrollPane = new JScrollPane( table );
        getContentPane().add( scrollPane );

        JPanel buttonPanel = new JPanel();
      // add save button
        buttonPanel.setLayout(new FlowLayout());
                save = new JButton("Save");
                    buttonPanel.add(save);
        getContentPane().add( buttonPanel, BorderLayout.SOUTH );

                 save.addActionListener(
        new ActionListener() {

            //Handle JButton event if it is clicked
            public void actionPerformed(ActionEvent event) {

                   setVisible(false);
            }
        }
        );
        }

        static void dbFrame(){
            DatabaseForm frame = new DatabaseForm();
            frame.setDefaultCloseOperation( EXIT_ON_CLOSE );
            frame.pack();
            frame.setTitle("Stakeholder Checklist");
            frame.setVisible(true);
            frame.setLocation(450,50);
            frame.setSize(1000,900);
}   
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T15:08:00.380

实现一个自定义的 TableModel，它环绕一个 List（可能是 ArrayList 而不是 Vector）。

这是一个只读示例： http: [//puces-samples.svn.sourceforge.net/viewvc/puces-samples/tags/sessionstate-1.0/sessionstate-suite/sessionstate-sample/src/blogspot/puce/sessionstate/示例/ParticipantTableModel.java?revision=13&view=markup](http://puces-samples.svn.sourceforge.net/viewvc/puces-samples/tags/sessionstate-1.0/sessionstate-suite/sessionstate-sample/src/blogspot/puce/sessionstate/sample/ParticipantTableModel.java?revision=13&view=markup)

如果需要复选框，请确保 getColumnClass 返回最后一列的 Boolean.class。

确保要编辑的单元格是可编辑的 (isCellEditable)。

教程：

[http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#data](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#data)

# c# - 动态改变隐藏字段的值

> ID：11210173
> 
> 赞同：1
> 
> 时间：2012-06-26T14:58:38.220
> 
> 标签：c#, asp.net

对于现有网站，我必须从由不同页面（例如 City1.aspx、City2.aspx、City3.aspx 等）加载的表单中传递隐藏字段中的值，但它们是在 iframe 中加载的。我还必须根据加载它的城市页面动态更改至少一个隐藏字段（我们称之为“源”）的值。我熟悉 PHP 和 JavaScript/JQuery，但我不知道如何在 C# 中执行此操作。

我找到了有关通过 JavaScript 检索文件名（无扩展名）的教程。我认为即使表单位于 iframe 中，我仍然可以获得城市，但我想遵守网站的约定并尽可能使用 C#。

非常感谢您提供可能的解决方案的代码片段或链接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T15:09:46.137

如果您想修改与您的 aspx 相关联的 c# 中的输入值（代码隐藏），则必须将属性 runat=server 添加到您的输入中。

在您的 aspx 中使用此代码

```
<input id="test" type="hidden" runat="server"/> 
```

在你的 C#

```
test.Value = 123; //your value is 123 for example 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T15:43:15.790

免责声明，我不知道 JQuery，所以可能有更简单的方法来做到这一点。我也没有测试任何代码......

如果您知道确切的 ID，那么您可以从父页面（在 javascript 块中）执行类似的操作：

```
var frame = document.getElementById('myIFrame');
var ctrl = frame.document.getElementById('myControl');
ctrl.value = "New Value"; 
```

如果您不知道`CityX.aspx`页面中控件的确切 ID，那么您将需要一种方法来发现这些 ID，或者您需要遍历所有控件以`iframe`查找正确的 ID。（我这样说是因为如果`iframe`页面中的控件保存在任何类型的 ASP.NET 结构中，它们将不会被调用`txtMyCtrl`（例如），但可能类似于`ct00_txtMyCtrl`.)

如果您不知道确切的控件名称（因为我之前提到的 ASP.NET 结构），您可以执行以下操作：

```
var frame = document.getElementById('myIFrame');
var ctrls = frame.document.getElementByTagName("INPUT");
for(var i=0;i<ctrls.length;i++){
  if(ctrls[i].getAttribute("type")=="hidden" && ctrls[i].id.indexOf("_myControl") != -1){
    ctrls[i].value = "New Value";
    break;
  }
} 
```

或者，如果您有能力更新`CityX.aspx`页面，那么您可以在`CityX.aspx`页面中包含以下内容：

```
function getCtrls(){
  return [document.getElementById("<%=hiddenCtrl.ClientID%>"),
          document.getElementById("<%=anotherHiddenCtrl.ClientID%>")];
} 
```

...然后在您的父页面中，例如：

```
var frame = document.getElementById('myIFrame');
var ctrls = frame.document.getCtrls();
for(var i=0;i<ctrls.length;i++){
  ctrls[i].value = "New Value";
} 
```

它们只是关于一般主题的想法

# jquery - JQuery .focusout 不适用于 :input 选择器

> ID：11210180
> 
> 赞同：0
> 
> 时间：2012-06-26T14:58:54.110
> 
> 标签：jquery, events

我正在尝试设置一个搜索优化工具，只要用户切换到另一个字段，只要该字段失去焦点的值发生变化，该工具就会搜索。我想我可以利用这个`.focusout`事件。我遇到的问题是，如果我`*`像下面的示例一样制作选择器，事件似乎只会按预期触发

jQuery v1.7.2

```
/* this works! */
    $('*').focusout(function () {
        alert('Handler for .focus() called.');
    }); 
```

但是，一旦我将选择器更改为迄今为止我尝试过的任何其他东西......该事件将不会触发。

我试过了。

*   `:input`
*   `#searchForm`<-- 表单 ID
*   `#YearBuiltTo`<-- 字段标识

我不确定我错过了什么。我已经在 IE9 和 Chrome 中测试过了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T15:05:04.867

尝试使用[.blur](http://api.jquery.com/blur/)而不是 .focusout

IE。$("#YearBuiltTo").blur();

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T16:53:25.487

我的 _Layout.cshtml 中有一些垃圾 js 代码。我已经粘贴到布局中然后忘记了。它引发的错误导致更多的 javascript 无法从我的 Search.cshtml 页面正确执行。

我删除了垃圾代码，一切正常。

# visual-studio - Visual Studio IDE - 这个图标是什么？

> ID：11210184
> 
> 赞同：2
> 
> 时间：2012-06-26T14:59:01.887
> 
> 标签：visual-studio, ide

这个符号在我的 Visual Studio IDE 中是什么意思？不是绿条，我已经知道是源代码了。小按钮图标？

![在此处输入图像描述](../Images/7d19ac190de129c6891f3373058b7226.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-26T15:02:49.367

小按钮是一个书签。您可以在屏幕顶部添加一个菜单，允许您在书签中移动。这是在一段代码中标记您所在位置的另一种方式。

# java - 在 Eclipse 中格式化紧凑的 if-else 语句时保留大括号

> ID：11210186
> 
> 赞同：2
> 
> 时间：2012-06-26T14:59:08.727
> 
> 标签：java, eclipse

我喜欢在 Eclipse 中格式化我的 Java 代码。它使代码保持良好的缩进并避免版本系统出现问题。但是，我在 Eclipse 中找不到维护紧凑的 if-else 语句和带大括号的 for 循环的选项。我是说：

当我进行格式化时，我得到了这个：

```
if(a>6)
    a=7;
else
    a=8;
for (int i=0;i<=9;i++)
    a=a+i; 
```

我想要这个：

```
if(a>6){
    a=7;
}
else{
    a=8;
}
for (int i=0;i<=9;i++){
    a=a+i;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T15:03:52.703

在“首选项”下：Java > 编辑器 > 保存操作

1) 勾选“附加操作”

2) 点击“配置...”

3) 转到“代码样式”选项卡

4）选中“在 if/while/for/do 语句中使用块”并根据您的喜好进行配置

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T15:18:44.293

您可以在此处创建新的格式模板：

菜单窗口 -> 首选项。Java -> 代码样式 -> 格式化程序。

# jquery - JQuery - 尝试在点击时更改/更新值并传递完整值文本，但只添加数字

> ID：11210188
> 
> 赞同：1
> 
> 时间：2012-06-26T14:59:13.433
> 
> 标签：jquery, forms

我对 JS 相当陌生，这就是我到目前为止所拥有的。如果我减去值中的文本，我可以添加它，但这是我想要传递的东西。

```
$("#test").click(function() {
var total = 0;
$.each($(".sv-select") ,function() {
  total += parseInt($(this).val());

});
 $("input[value='15']").val(total);

}); 
```

HTML：

```
<form method="post" id="wpus-cart-button-form" class="wpus-cart-button-form beaver-run--   -bachelor-gulch-7/15---7/16" action="" onsubmit="return ReadForm(this, true);"><input    type="hidden" name="quantity" value="1" /><label class="lv-label size">ROOM OPTIONS:</label>  <br />
<select class="sv-select variation1" name="variation1" onchange="ReadForm (this.form, false);">
<option value="399 standard double room">standard double room $399.00</option>
<option value="499 upgraded king suite">upgraded king suite $499.00</option>
</select>
<p><br/><label class="lv-label color">ADD GUEST:</label><br />
<select class="sv-select variation2" name="variation2" onchange="ReadForm (this.form, false);">
<option value="0 no guests">no guests</option>
<option value="75 +1">+1</option>
</select>
<input type="hidden" name="product" value="Beaver Run - Bachelor Gulch 7/15 - 7/16" /><input type="hidden" name="price" value="15" /><input type="hidden" name="product_tmp" value="Beaver Run - Bachelor Gulch 7/15 - 7/16" /><input type="hidden" name="cartLink" value="http://performancecarclub.org/portfolio/beaver-run-bachelor-gulch-715-716/" /><input type="hidden" name="addcart" value="1" /><input id="test" class="vsubmit submit" type="submit" value="Purchase Trip!" /></form> 
```

这是jsfiddle：http: [//jsfiddle.net/rYfMx/](http://jsfiddle.net/rYfMx/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T15:18:54.717

如果由于某种原因您需要选项中的复杂文本，则将某些内容移至数据属性：

示例选项：

```
<option value="399 standard double room" data-price="399">standard double room $399.00</option> 
```

脚本：

```
$("#test").click(function() {
var total = 0;
    $.each($(".sv-select option:selected"), function() {
        total += $(this).data("price");
    });
 $("#price").val(total);
});​ 
```

更新小提琴：http: [//jsfiddle.net/rYfMx/23/](http://jsfiddle.net/rYfMx/23/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T15:15:11.597

.click在 jQuery 中已被弃用，[.on()](http://api.jquery.com/on/)是新的好东西。它的结构类似于

```
$("#test").on('click', function(){

}); 
```

经过进一步研究，我发现 .click 没有被弃用（抱歉），在查看 jQuery 的源代码时，我发现它是一个别名。所以我很抱歉我错了，只想更正这条评论。

```
jQuery.each( ("blur focus focusin focusout load resize scroll unload click dblclick " +
    "mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave " +
    "change select submit keydown keypress keyup error contextmenu").split(" "), function( i, name ) {

    // Handle event binding
    jQuery.fn[ name ] = function( data, fn ) {
        if ( fn == null ) {
            fn = data;
            data = null;
        }

        return arguments.length > 0 ?
            this.on( name, null, data, fn ) :
            this.trigger( name );
    }; 
```

此外，您的 HTML 中的值可能是数字，然后您就不必解析任何整数。除非您需要跟踪购买的东西。从这里你可以在选择框中获取当前事物的 .val() 。

```
<option value="399">standard double room $399.00</option>
<option value="499">upgraded king suite $499.00</option> 
```

你介意给这个情况一点背景吗？总体目标是什么？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T15:34:31.503

您可以通过某个字符分隔值中的整数和文本，并进行[拆分](http://www.w3schools.com/jsref/jsref_split.asp)以将它们传递到数组中。然后你可以对他们做你想做的事......

```
<option value="399|standard double room">standard double room $399.00</option>
<option value="499|upgraded king suite">upgraded king suite $499.00</option> 
```

和你的jQuery：

```
 $("#test").click(function() {
    var total = 0;
    $.each($(".sv-select") ,function() {
      var vals = $(this).val().split("|"),
          price = vals[0],
          type = vals[1];

      total += price;
      //do what you want with type

    });
     $("input[value='15']").val(total);

}); 
```

# xcode - 使用 Accessorizer 不会粘贴生成的代码

> ID：11210189
> 
> 赞同：0
> 
> 时间：2012-06-26T14:59:13.717
> 
> 标签：xcode, accessorizer

我正在尝试进入 Accessorizer，但每次尝试时，我都会遇到同样的问题。我选择了一些代码（例如，多个@property 语句），点击 cmd-c 并将光标移动到我希望生成的代码所在的位置。

我现在使用Accessorizer 的菜单，选择Implementation 并粘贴我复制的属性，而不是@synthesize 语句。据我所见，我完全按照设置说明进行操作。我不喜欢难以使用的快捷方式，所以我想使用系统菜单，至少现在是这样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T13:38:31.473

啊，所以你需要通过按 shift-alt-cmd-0 而不是 cmd-c 来调用 Accessorizer 文本服务。这会将文本发送到 Accessorizer。只有完成此操作后，您才能使用操作菜单/按 shift-ctrl-cmd-0。

# wpf - 在 WPF 列表视图中选择项目时，更新其他控件以查看详细信息

> ID：11210190
> 
> 赞同：0
> 
> 时间：2012-06-26T14:59:15.940
> 
> 标签：wpf, data-binding, mvvm

我有一个使用视图模型的窗口。此屏幕在一个屏幕上包含 2 个列表视图。第一个列表视图绑定到我的视图模型上名为项目的属性。该属性返回一个模型如下

```
class ProjectsModel
{
    public string ProjectName { get; set; }
    public ObservableCollection<ProjectModel> ProjectDetails { get; set; }
} 
```

在此类中，ProjectModel 如下所示

```
public class ProjectModel
{
    public string ProjectName { get; set; }
    public string ProjectId { get; set; }
    public string ProjectFileId { get; set; }
    public string ProjectSource { get; set; }
    public string ClientCode { get; set; }
    public string JobNumber { get; set; }
} 
```

第一个列表视图按我的预期显示项目名称，但我希望这样当我单击任何项​​目时，第二个列表视图应显示其 projectdetails 属性的详细信息。它几乎似乎可以工作，它显示了第一个子项，但我相信它没有被告知第一个列表视图的选定项目已更改。我可以这样做吗？任何想法都将不胜感激，因为我已经把头发拉了几个小时了！

这是xml

```
<Window x:Class="TranslationProjectBrowser.Views.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:vm="clr-namespace:TranslationProjectBrowser.ViewModels"
    xmlns:local="clr-namespace:TranslationProjectBrowser.Models"
    Title="MainWindow" Height="373" Width="452" Background="LightGray">
<Window.DataContext>
    <vm:ProjectBrowserViewModel></vm:ProjectBrowserViewModel>
</Window.DataContext>
<Window.Resources>
    <ObjectDataProvider x:Key="projectList" ObjectType="{x:Type vm:ProjectBrowserViewModel}" />
</Window.Resources>
<Grid DataContext="{Binding Source={StaticResource projectList}}">
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="176*" />
    </Grid.ColumnDefinitions>
    <Grid.RowDefinitions>
        <RowDefinition Height="176*" />
        <RowDefinition Height="254*" />
    </Grid.RowDefinitions>
    <DockPanel LastChildFill="True" >
        <TextBlock DockPanel.Dock="Top" Text="Projects" Margin="5,2"></TextBlock>
        <StackPanel DockPanel.Dock="Top" Orientation="Horizontal">
        <TextBox Name="ProjectName" Width="140" Margin="5,2" Height="18" FontFamily="Calibri" FontSize="10"></TextBox>
        <Button Height="18" Width="45" HorizontalAlignment="Left" Margin="0,2" FontSize="10" Content="Add" Command="{Binding Path=AddProject}" CommandParameter="{Binding ElementName=ProjectName, Path=Text}"></Button>
        <TextBlock Text="{Binding Path=ErrorText}" VerticalAlignment="Center" Margin="6,2" Foreground="DarkRed"></TextBlock>
        </StackPanel>
        <ListView Name="project" HorizontalAlignment="Stretch" Margin="2" ItemsSource="{Binding Path=Projects}" IsSynchronizedWithCurrentItem="True">
            <ListView.View>
                <GridView>
                    <GridViewColumn DisplayMemberBinding="{Binding Path=ProjectName}" Header="Name" Width="200" />
                </GridView>
            </ListView.View>
        </ListView>
    </DockPanel>
    <DockPanel LastChildFill="True" Grid.Row="1" >
        <TextBlock DockPanel.Dock="Top" Text="Project Files" Margin="5,2"></TextBlock>
        <ListView  HorizontalAlignment="Stretch" Margin="2" ItemsSource="{Binding Path=Projects/ProjectDetails}" IsSynchronizedWithCurrentItem="True" >
            <ListView.View>
                <GridView>
                    <GridViewColumn Header="Name" DisplayMemberBinding="{Binding Path=ProjectName}"  Width="200" />
                    <GridViewColumn Header="Job Number" DisplayMemberBinding="{Binding Path=JobNumber}" Width="100" />
                </GridView>
            </ListView.View>
        </ListView>
    </DockPanel>
</Grid> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T15:03:28.313

您的视图模型应该（至少）实现`INotifyPropertyChanged`. 这就是 WPF 将如何知道您的选择（或其他属性）何时更改以及需要更新绑定的方式。

所以你应该有这样的东西：

```
class ProjectsModel : INotifyPropertyChanged
{
    public event PropertyChangedEventHandler PropertyChanged;

    private void NotifyPropertyChanged(String PropertyName)
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(PropertyName));
        }
    }

    public string ProjectName 
    { 
        get
        {
            return _projectName;
        }
        set
        {
            _projectName = value;
            NotifyPropertyChanged("ProjectName");
        }       
    }
    public ObservableCollection<ProjectModel> ProjectDetails 
    { 
        get
        {
            return _projectDetails;
        }
        set
        {
            _projectDetails = value;
            NotifyPropertyChanged("ProjectDetails");
        }
    }
} 
```

在 .NET 框架的未来版本中，使用“调用者信息”属性（http://www.thomaslevesque.com/2012/06/13/using-c-5-caller-info-attributes-when -targeting-earlier-versions-of-the-net-framework/)。但截至今天，这通常是如何完成的。

**更新**

好的，因此根据您的评论，您需要将 ListView 的`SelectedItem`属性绑定到视图模型上的属性。然后，您也可以将第二个 ListView 绑定到该属性。像这样的东西：

```
<ListView ... SelectedItem="{Binding Path=FirstListViewSelectedItem, Mode=TwoWay}" .. > 
```

然后你的第二个列表视图将是这样的：

```
<ListView ... ItemsSource="{Binding Path=FirstListViewSelectedItem.ProjectDetails, Mode=OneWay" .. /> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T16:19:03.670

我在您的代码中看不到任何当前管理。如果您使用 CollectionView，您将免费获得它，请参见以下示例：

XAML：

```
<Window x:Class="WpfApplication1.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">

    <StackPanel>
        <ListBox ItemsSource="{Binding Path=ProjectsView}" DisplayMemberPath="Name" IsSynchronizedWithCurrentItem="True"/>
        <ListBox ItemsSource="{Binding Path=ProjectsView/ProjectDetails}" />
    </StackPanel>
</Window> 
```

后面的代码：

```
using System.Collections.Generic;
using System.ComponentModel;
using System.Windows;
using System.Windows.Data;

namespace WpfApplication1
{
    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();

            DataContext = new VM();
        }
    }

    public class VM
    {
        public VM()
        {
            List<Project> projectsModel = new List<Project>();
            projectsModel.Add(new Project("AAA"));
            projectsModel.Add(new Project("BBB"));
            projectsModel.Add(new Project("CCC"));

            ProjectsView = CollectionViewSource.GetDefaultView(projectsModel);
        }

        public ICollectionView ProjectsView { get; private set; }
    }

    public class Project
    {
        public Project(string name)
        {
            Name = name;
        }

        public string Name { get; private set; }
        public IEnumerable<string> ProjectDetails
        {
            get
            {
                for (int i = 0; i < 3; i++)
                {
                    yield return string.Format("{0}{1}", Name, i);
                }
            }
        }
    }
} 
```

# php - 我一直在 php 邮件表单上收到有趣的条目，谁能解释这些是什么？

> ID：11210194
> 
> 赞同：1
> 
> 时间：2012-06-26T14:59:22.907
> 
> 标签：php, security, email

我有几个网站，用户可以通过 html 表单向我发送电子邮件，将数据发布到 php 脚本，然后将其邮寄给我。我确实会解析传入的数据以确保没有虚假的标题，几年前，当我怀疑有趣的电子邮件时，我开始记录所有电子邮件，以便找出是否有人将我的表单用作开放中继. 他们不是; 记录的唯一电子邮件是我收到的那些。

这些电子邮件的整体看起来如下所示：

```
sgprahsfbuds, <a href=\"http://www.qpmlowrdmx.com \">rfwlenabub</a> ,
[url=http://www.juamkfzjoj.com ]vsmvhocwqe[/url],
http://www.bbzlwecxhj.com  rfwlenabub 
```

或者

```
wosizboez, <a href=\"http://www.vmqvcosmcq.com \">hxocgtzzbs</a> , [url=http://www.utfxigsjhg.com ]enttamqamt[/url], http://www.vfpvbxrkew.com  hxocgtzzbs 
```

谁能告诉我这些是什么，以及在它们进入时忽略它们是否有任何潜在问题？几年内我从 4 个站点获得了 10 个，但昨天从我的 2 个站点收到了 6 个。我当然不会点击任何链接，但是当我尝试查找它们时，它们就像看起来一样假。Google 搜索显示“vmqvcosmcq”之类的内容会定期出现。

谢谢，

罗素

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T15:09:38.873

前段时间我在我的服务器上也看到过这样的消息。它又停了下来。

它肯定是垃圾邮件，一个使用你的表单的机器人。至于“为什么”，我有两个想法：

*   1.) 一些脚本小子的纯粹烦恼，寻找形式来污染他们
*   2.）或者这背后有更深层次的策略：也许机器人记录了他所做的随机条目，并试图稍后在谷歌上重新找到这些模式。通过这种方式，攻击者可能会识别出发布系统内部页面的 url，如果这些模式被引用并稍后出现在 google 中。

我在基于 cms 的网站（例如接受评论的博客）中看到了类似的垃圾邮件（尽管不太明显）。垃圾邮件评论读起来就像有人评论帖子的质量一样。但是，如果您仔细观察，您会发现一个共同的模式：它们都显示出“打字错误”，即后来机器人重新识别评论的字符扭曲。我想这具有相同的想法：测试从某个地方的表单接受的数据是否重新出现在已发布的网页上。

也许简单的动机是识别那些使用导致垃圾邮件真正被发布的形式，如此可见。因为这是垃圾邮件发送者的唯一意义：他的“信息”可以被看到。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T15:02:14.220

这是垃圾邮件。程序化的机器人爬取并尝试提交此类内容，希望它最终会出现在人们点击它的页面上，或者可能直接发送到人们的电子邮件中。

如果它变得不堪重负，请使用像[Akismet](http://akismet.com/)这样的服务，或者为自己构建一个[贝叶斯过滤器](http://en.wikipedia.org/wiki/Bayesian_spam_filtering)

# smart-mobile-studio - 申请关闭前在哪里进行最终处理？

> ID：11210196
> 
> 赞同：4
> 
> 时间：2012-06-26T14:59:32.320
> 
> 标签：smart-mobile-studio

当表单关闭或应用程序终止并且没有成功时，我一直在尝试将数据写入存储。

我首先尝试从表单单元

```
procedure TForm1.FinalizeObject;
begin
inherited;
SaveData;
end; 
```

和

```
procedure TForm1.FinalizeObject;
begin 
 SaveData;  
 inherited;
end; 
```

这些尝试都没有奏效，因此我重新排列了我的代码并从项目的单元中尝试了它

```
procedure TApplication.ApplicationClosing;
begin 
 SaveData; 
 inherited;
end; 
```

和

```
procedure TApplication.ApplicationClosing;
begin 
 inherited; 
 SaveData;
end; 
```

我有一个 w3_showmessage 作为 SaveData 的第一行，它永远不会被调用......所以，如果我可以验证这 4 个方法中的一个被触发，我可以使用其中一个

我究竟做错了什么？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T07:45:17.413

在撰写本文时，Smart 在应用程序对象中公开了两个新事件：

*   卸载
*   OnBeforeUnload

这些将使处理关闭序列变得更容易。智能 javascript 引导程序现在也自动调用 application.terminate()，因此您的代码应该可以正常工作。

# javascript - 每次运行后，Javascript 倒计时越来越快

> ID：11210202
> 
> 赞同：1
> 
> 时间：2012-06-26T14:59:43.780
> 
> 标签：javascript, firefox, google-chrome, time, timer

```
var i = 3400;

function progress() {
    i = 34000;
    window.setInterval(function () {
        i = i - 100;
        document.getElementById("progress").firstChild.data = i;
    }, 100);
} 
```

这段代码越来越快。函数进度每 3 秒调用一次，但我无法更改它的调用方式，因为它是基于事件的。在大约 10 个电话之后，我变得消极！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T15:01:21.463

嗯……

不使用`setInterval`

您可能想使用`setTimeout`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T15:19:42.867

由于每 3 秒调用一次进度，因此您需要避免它重复创建新的间隔。每当您调用进度时，使用`clearTimeout`都会重置计时器。但是，如果不知道您究竟想要达到什么目标，就很难提供准确的答案。

```
var timeout;

function counter(count) {

    document.getElementById("progress").firstChild.data = count;

    if (count >= 0) {
        timeout = window.setTimeout(function() {
            counter(count-100);
        }, 100);
    }
}

function progress() {
    window.clearTimeout(timeout);
    counter(3400);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T15:04:35.203

试试这个

```
var i = 3400;

function progress() {
     i = i - 100;
     document.getElementById("progress").firstChild.data = i;
     window.setTimeout('progress();', 100);
} 
```

# regex - perl 将一个数组拆分为多个数组

> ID：11210203
> 
> 赞同：0
> 
> 时间：2012-06-26T14:59:44.770
> 
> 标签：regex, perl, split

有人可以帮我正确使用 perl 中的 split 函数吗

这是我的名为@input_lines 的输入列表：

```
google.com/test
yahoo.com/test
##############
somethingelse.com/test
##############
12345

my(@first_array,@second_array,@rand_no) = split(/^\#+/, @input_lines); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T15:36:00.110

**我会猜测**你的真正意思：

起初，您可能有一个`input.txt`带有以下内容的文本输入文件：

```
 google.com/test
 yahoo.com/test
 ##############
 somethingelse.com/test
 ##############
 12345 
```

现在，您尝试将*记录*与文件分开，由 14 个“#”分隔。因此，您可以使用`##############`as读取文件`input record separator`并完成：

```
 ...
 my $fn = 'input.txt';             # set the file name
 open my $fh, '<', $fn or die $!;  # open the file
 $/="\n##############\n";          # set the input record separator
 my @parts = <$fh>;                # read the file record-wise
 chomp @parts;                     # remove the record separator from data
 close $fh                         # close the file
 ... 
```

now的元素`@parts`有以下内容：

```
 $parts[0]
     google.com/test
     yahoo.com/test

 $parts[1]
     somethingelse.com/test

 $parts[2]
     12345 
```

如果您需要寻找不同大小的 -separators，您可以通过在一次读取操作中*slurping*文件并随后在分隔符处拆分`#`来以非常相似的方式实现此目的：

 *```
 ...
 my $fn = 'input.txt';
 open my $fh, '<', $fn or die $!;
 undef $/;                           # remove the input record separator
 my @parts = split /\n#+\n/, <$fh>;  # read file as a block and split 
 close $fh;
 ... 
```

结果相同。

问候

rbo

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T15:10:23.063

`split`对字符串而不是数组进行操作。此外，您不能在同一分配中分配多个数组：右侧的列表被展平，因此第一个数组占据了全部。

**更新：**此代码有效，但：

```
my (@first, @second, @rand);

for my $array (\@first, \@second, \@rand) {
    my $line;
    do {
        push @$array, $line = shift @input_lines
    } until $line =~ /^#+/ or ! @input_lines;
    pop @$array if @input_lines;                 # Remove the separators
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T15:15:15.433

如果您的@input_lines 字符串的格式相同，您可以类似地加入所有字符串，然后按部分拆分。您应该注意到`/^#+/`在您的情况下使用 split 是错误的。

```
my $line = join ',', @input_lines;
my ($first_part, $second_part, $third_part) = split /\#+/, $line;

my @first_array  = split ',', $first_part;
my @second_array = split ',', $second_part;
my @third_array  = split ',', $third_part; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-26T15:21:46.747

你可以做这样的事情。有一个数组 ref，其中的每个元素都`$output`代表您的一个数组。

```
use strict; use warnings;
use Data::Dumper;

my @input_lines = (
  'google.com/test',
  'yahoo.com/test',
  '##############',
  'somethingelse.com/test',
  '##############',
  '12345',
);

my $output = []; # array ref
my $rand_no;
my $i = 0;
foreach my $line (@input_lines) {
  if ($line =~ m/^#+$/) {
    # if it's the # we move to the next index
    $i++;
    next;
  } 
  elsif ($line =~ m/^\d+$/) {
    # this is the random numer
    $rand_no = $line;
  } else {
    # everything else goes into the current index
    push @{ $output->[$i] }, $line;
  }
} 

print Dumper $output, $rand_no; 
```

输出：

```
$VAR1 = [
          [
            'google.com/test',
            'yahoo.com/test'
          ],
          [
            'somethingelse.com/test'
          ]
        ];
$VAR2 = '12345'; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-26T15:44:28.607

假设您的输入行在`$string`（否则使用`join "\n", @input_lines`），您可以`split`像这样使用：

```
($first, $second, $rand_no) = split /\n#+\n/m, $string;

print "`", $_, "`\n" for (@fields)' 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-26T15:57:12.793

### 请参阅下面的两个脚本 - 其中一个应该适合您...

*脚本：*

```
my @input_lines = <main::DATA>;
my $input_string = join /\n/, @input_lines; 
my @split_lines = split(/\s*[#\n\r]+\s*/, $input_string);
print "$_\n" for @split_lines;

__DATA__
google.com/test 
yahoo.com/test 
############## 
somethingelse.com/test 
############## 
12345 
```

*输出：*

```
google.com/test
yahoo.com/test
somethingelse.com/test
12345 
```

*[在此处](http://ideone.com/TyEdr)查看并测试代码。*

* * *

*脚本：*

```
 use Data::Dumper;

 my @input_lines = <main::DATA>;
 my $input_string = join /\n/, @input_lines; 
 my @blocks = split(/\s*#+\s*/, $input_string);
 my @matches = ();
 push @matches, [ split(/\s*[\n\r]+\s*/, $_) ] for @blocks;

 print Dumper(@matches);

 __DATA__
 google.com/test 
 yahoo.com/test 
 ############## 
 somethingelse.com/test 
 ############## 
 12345 
```

*输出：*

```
 $VAR1 = [
           'google.com/test',
           'yahoo.com/test '
         ];
 $VAR2 = [
           'somethingelse.com/test '
         ];
 $VAR3 = [
           '12345'
         ]; 
```

*[在此处](http://ideone.com/TBUm9)查看并测试代码。**

# xcode - 调整调试栏大小会冻结 Retina MacBook Pro 上的 Xcode 4.3.3

> ID：11210205
> 
> 赞同：1
> 
> 时间：2012-06-26T14:59:51.823
> 
> 标签：xcode, xcode4, xcode4.3

我在我的视网膜 mac（当然是 Lion）上使用 Xcode 4.3.3 已经有几天了。在工作中，我的 Xcode 窗口总是在 Cinema Display 上，从来没有遇到过任何问题。但是，我将一个 Xcode 窗口扔到 pro 的显示屏上并尝试调整调试栏的大小 - Xcode 挂起。99-100% CPU，光标变成死亡彩虹轮。我尝试删除其中的所有内容，`~/Library/Developer/Xcode/DerivedData`因为这已经解决了我过去使用 Xcode 的所有问题，但这是不行的。我想在不工作的时候做一些 iOS 开发，但这很难做到，因为我家里没有电影院显示器或其他显示器。

这是来自活动监视器的示例：

[http://pastebin.com/2Suz1b9v](http://pastebin.com/2Suz1b9v)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T20:15:03.217

我想到了。默认情况下，Apple 会以针对 Retina 显示器优化的分辨率打开 Xcode。您可以通过执行以下操作强制 XCode（或任何其他应用程序）以较低的分辨率打开：

*   如果应用程序当前处于打开状态，请退出该应用程序。
*   在 Finder 中，从前往菜单中选择应用程序。
*   在打开的应用程序文件夹中，单击应用程序的图标，使其突出显示。
*   从文件菜单中选择获取信息。
*   在“以低分辨率打开”旁边放置复选标记以启用低分辨率模式。
*   关闭窗口并双击应用程序以重新打开它。

它有效！

# jpa - 在 RAD 7.5 上使用 JPA 时，JOIN 列返回 null

> ID：11210208
> 
> 赞同：0
> 
> 时间：2012-06-26T15:00:03.513
> 
> 标签：jpa, rad

我在 RAD7.5 上使用 JPA。我正在使用的实体定义如下。每次我访问 Pgm 加入 Typ 时都会返回为空。

```
@Entity
public class Typ implements Serializable {
    @Id
    @Column(name="TYP_ID")
    private int TypId;

     @OneToMany(mappedBy="TypId")
private Set<Pgm> pgmCollection;
}

@Entity
public class Pgm implements Serializable {
    @ManyToOne(fetch = FetchType.EAGER)
    @JoinColumn(name="TYP_ID")
    private Typ TypId;} 
```

我引用了以下链接 - [https://stackoverflow.com/a/10702626/1483063](https://stackoverflow.com/a/10702626/1483063) 并尝试了“通用”选项，但没有任何收获。尝试`Select F.* from PGM F`使用“Fetch JOIN”进行查询也无济于事。任何意见是极大的赞赏。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T13:16:35.363

数据库上的数据是什么，外键是否为空？

你的 @JoinColumn 没有意义，

可插入 = 假，可空 = 假，可更新 = 假

如果您有 insertable = false，如何插入此列？

# php - 使用 foreach 进行数组迭代

> ID：11210209
> 
> 赞同：-2
> 
> 时间：2012-06-26T15:00:07.017
> 
> 标签：php

我有类似 json 数组输出的东西，它就像：

```
{
  "data": [
    {
      "color"
      "size"
      "id"
      "weight"
    },
    {
      "color"
      "size"
      "id"
      "weight"
    }, 
```

等等。数组名称称为 $cars。我需要遍历所有数组并获取所有汽车尺寸。

就像是：

```
foreach ($cars as $value) {
    $carsize=[data][i][size] 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T15:02:28.337

`$cars =`[`json_decode`](http://us3.php.net/manual/en/function.json-decode.php)`($cars)`应该做你需要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T15:04:41.243

确保在使用时解析成一个数组`json_decode()`，然后像这样遍历数据：

```
$array = json_decode($json, true);
foreach ($array['data'] as $data) {
    $carsize = $data['size'];
    echo $carsize;
} 
```

# webgrid - 格式化绑定到集合的 webgrid 列？

> ID：11210210
> 
> 赞同：0
> 
> 时间：2012-06-26T15:00:11.820
> 
> 标签：webgrid

这是我的网络网格：

```
<div id="grid">
@grid.GetHtml(
    tableStyle: "grid",
    headerStyle: "head",
    alternatingRowStyle: "alt",

    columns: grid.Columns(
        grid.Column("FullName", "Name"),
        grid.Column("User.Email", "Email", format:@<a href="mailto:@item.User.Email">@item.User.Email</a>),
        grid.Column("User.PhoneExtension", "Extension"),
        grid.Column("ManagerName", "Manager"),
        grid.Column("User.Roles", "Roles"),
        grid.Column("", format: (item) => new HtmlString(Html.ActionLink("Edit", "Edit", new { userName = item.User.UserName } ).ToString() + "|" + Html.ActionLink("Details", "Details", new { userName = item.User.UserName }).ToString()))
    )
) 
```

User.Roles 是字符串的集合。如何使用“格式：”输出每个角色，然后在该单元格中换行？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T15:23:06.133

您可以使用 html 助手来完成此操作：

```
...

    grid.Column(columnName: "User.Roles", header: "Roles", format: @<text>@Html.RenderUserRoles((List<String>)item.User.Roles)</text>)

... 
```

帮助者将类似于...

```
...
        public static string RenderUserRoles(this HtmlHelper helper, List<string> roles)
            {
                string result = string.Empty;

                foreach (var item in roles)
                {
                    result += item + " - ";
                }
                result += "<br>";

                return result;
            }
... 
```

未经测试，但应该是获得您自己的解决方案的指南，因为您可以更改助手以按照您想要的方式呈现事物。

# ios - 我怎样才能隐藏一个空的tableview

> ID：11210211
> 
> 赞同：0
> 
> 时间：2012-06-26T15:00:16.417
> 
> 标签：ios

我有一个问题，我希望这里有人可以帮助我！提前致谢。

我有一个“范围”按钮（见屏幕截图！），它链接到一个 segue，segue 转到一个 tableview。

![在此处输入图像描述](../Images/2febc6e600c2ed5ceb0b6c4ac11f1f4f.png)

我想做的是在 tableview 控制器中决定是否应该在 table 中显示某些内容，或者我应该抛出一个 alertview。

我所做的是：

```
if ([_countryScopes count] == 0) {

    [self.view removeFromSuperview];
    //no scope for this country
    NSMutableString *message = [[NSMutableString alloc]initWithString:@"No scope information."];
    UIAlertView *av = [[UIAlertView alloc] initWithTitle:countryName message:message delegate:self cancelButtonTitle:@"Ok" otherButtonTitles:nil, nil];
    //av.tag = MAIN_ALERT;
    [av show];

} 
```

但不知何故，空桌子仍然出现。

你知道，我怎样才能摆脱这个？

非常感谢！

问候，雅舒

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T15:06:53.217

仅在 0.1 秒后显示警报视图，我希望这可以解决问题：

```
[av performSelector:@selector(show) withObject:nil afterDelay:0.1]; 
```

# windows - 世界上最简单的 Windows 驱动程序

> ID：11210213
> 
> 赞同：2
> 
> 时间：2012-06-26T15:00:34.717
> 
> 标签：windows, windows-xp, device-driver

我遇到了一个稍微奇怪的问题，涉及将 MoGo 鼠标放入我的 Windows XP 笔记本电脑的墨盒插槽时无法充电。长话短说，但修复它的一个建议是编写一个定制的驱动程序，它只说“我运行正常：不要关闭电源”。

我认为这应该是微不足道的，但我对驱动程序的唯一经验是通过提供的 MSI 下载和安装它们。我意识到我不知道：

*   他们是用什么语言写的。
*   他们必须遵守哪些约定。
*   它们如何与各自的硬件相关联。
*   他们所在的位置。
*   或者实际上，任何东西......

我在网络上也没有发现任何非常有用的东西——可能是因为它们的目标远高于我的水平。

欢迎任何见解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2021-07-09T15:25:42.530

Microsoft 在其文档中提供了“Hello World”驱动程序示例。这是“世界上最简单的Windows驱动程序”的一个例子。不幸的是，它有 13 页长，因此不适合 StackOverflow 的答案。

它们所用的语言是 C++。

> 要开始使用，请确保您已安装 Microsoft Visual Studio、Windows SDK 和 Windows 驱动程序工具包 (WDK)。

他们的示例包含一个名为的文件`Driver.c`，如下所示：

```
#include <ntddk.h>
#include <wdf.h>
DRIVER_INITIALIZE DriverEntry;
EVT_WDF_DRIVER_DEVICE_ADD KmdfHelloWorldEvtDeviceAdd;

NTSTATUS 
DriverEntry(
    _In_ PDRIVER_OBJECT     DriverObject, 
    _In_ PUNICODE_STRING    RegistryPath
)
{
    // NTSTATUS variable to record success or failure
    NTSTATUS status = STATUS_SUCCESS;

    // Allocate the driver configuration object
    WDF_DRIVER_CONFIG config;

    // Print "Hello World" for DriverEntry
    KdPrintEx(( DPFLTR_IHVDRIVER_ID, DPFLTR_INFO_LEVEL, "KmdfHelloWorld: DriverEntry\n" ));

    // Initialize the driver configuration object to register the
    // entry point for the EvtDeviceAdd callback, KmdfHelloWorldEvtDeviceAdd
    WDF_DRIVER_CONFIG_INIT(&config, 
                           KmdfHelloWorldEvtDeviceAdd
                           );

    // Finally, create the driver object
    status = WdfDriverCreate(DriverObject, 
                             RegistryPath, 
                             WDF_NO_OBJECT_ATTRIBUTES, 
                             &config, 
                             WDF_NO_HANDLE
                             );
    return status;
}

NTSTATUS 
KmdfHelloWorldEvtDeviceAdd(
    _In_    WDFDRIVER       Driver, 
    _Inout_ PWDFDEVICE_INIT DeviceInit
)
{
    // We're not using the driver object,
    // so we need to mark it as unreferenced
    UNREFERENCED_PARAMETER(Driver);

    NTSTATUS status;

    // Allocate the device object
    WDFDEVICE hDevice;    

    // Print "Hello World"
    KdPrintEx(( DPFLTR_IHVDRIVER_ID, DPFLTR_INFO_LEVEL, "KmdfHelloWorld: KmdfHelloWorldEvtDeviceAdd\n" ));

    // Create the device object
    status = WdfDeviceCreate(&DeviceInit, 
                             WDF_NO_OBJECT_ATTRIBUTES,
                             &hDevice
                             );
    return status;
} 
```

在这里找到完整的详细信息： [https ://docs.microsoft.com/en-us/windows-hardware/drivers/gettingstarted/writing-a-very-small-kmdf--driver](https://docs.microsoft.com/en-us/windows-hardware/drivers/gettingstarted/writing-a-very-small-kmdf--driver)

# jquery - 使用 HTML 5 Boilerplate 简化 jQuery 代码

> ID：11210214
> 
> 赞同：1
> 
> 时间：2012-06-26T15:00:39.763
> 
> 标签：jquery, asp.net-mvc-3, html5boilerplate

我正在遵循[h5bp](http://html5boilerplate.com)建议的模式，将所有脚本文件放在页面底部，保存为[Modernizr](http://modernizr.com)。

现在，这是我在 ASP.NET MVC 3 中的工作。我正在创建扩展以`HtmlHelper`划分表单上一些可重用元素/控件的标记。类似的东西`@Html.GiveMeATableDammit()`会为表格生成标记。

我的困境就在这里。如果生成的标记需要针对它运行一些 jQuery 怎么办？为了说明，假设需要针对该表调用 jQuery 插件函数：

```
@Html.GiveMeATableDammit("a-very-dirty-mouthed-table")

//
// will generate customized HTML
<table id="a-very-dirty-mouthed-table">
    <!-- some more stuff -->
</table>
<script>
    // along with customized javascript to match
    jQuery(function ($) {
        $('#a-very-dirty-mouthed-table').giveMeSuperPowers();
    });
</script> 
```

问题是，在标记生成时，jQuery 还不存在，因为 jQuery 位于页面底部。

现在，*除非将 jQuery 移至`<head>`*，否则我如何才能将那个函数的执行推迟到页面的最后，那里 jQuery 已经存在？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T15:06:30.227

除非有一些 ASP 魔法可以做到这一点，否则我见过的一种方法是在`<head>`页面中声明一个数组，并为它们声明一个处理程序，然后`push()`在`ready`底部（*在*jQuery 之后）加载，运行它们：

`<head>`：

```
var handlers = []; 
```

无论在哪里：

```
handlers.push(function ($) {
    $('#a-very-dirty-mouthed-table').giveMeSuperPowers();
}); 
```

`</body>`：

```
<script src="http://code.jquery.com/jquery-1.7.2.js"></script>
<script>
    handlers.forEach(function (val) {
        jQuery(document).ready(val);
    });
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T16:38:41.990

从我关于这个主题[的博客：](http://blog.vervestudios.co/blog/post/2011/07/01/How-to-Setup-jQueryready-Callbacks-Before-jQuery-is-Loaded.aspx)

```
<head>
    <script>
        (function(a){
            _q=function(){return a;};
            $=function(f){
                typeof f==="function" && a.push(arguments);
                return $;
            };
            jQuery=$.ready=$;
        }([]));
    </script>
</head>
<body>
    <div id="main">
        <script>
            $(function() {
                $( "#main" ).prepend( "<p>Heyo!</p>" );
            });
        </script>
        <div>...more HTML...</div>
    </div>
    <script src="/js/jquery.js"></script>
    <script>
        (function( i, s, q, l ) {
            for( q = window._q(), l = q.length; i < l; ) {
                $.apply( this, s.call( q[ i++ ] ) );
            }
            window._q = undefined;
        }( 0, Array.prototype.slice ));
    </script>
    <script src="/js/scripts.js"></script>
</body> 
```

> 第一个`<script>`函数是通过将第一个参数是函数的任何调用的参数存储`$.ready`到数组中来模拟 jQuery 的 ready 函数。这个数组是我们全局范围的 _q 方法私有的，当被调用时，它会返回这个数组。
> 
> 最后一个内联`<script>`通过调用循环遍历数组`_q()`，然后将最初传递给冒名顶替者的参数应用`$.ready`到真实的`$.ready`.

大约一年后，[Sam Saffron](https://stackoverflow.com/users/17174/sam-saffron)独立提出了一种[类似的方法来解决 Stack Overflow 上的相同问题。](http://samsaffron.com/archive/2012/02/17/stop-paying-your-jquery-tax)

为了回应 Sam 的帖子，Colin Gourlay 提出了一种[更强大的方法](http://blog.colin-gourlay.com/blog/2012/02/safely-using-ready-before-including-jquery/)（这可能是矫枉过正）。

# audio - LAME 文本在 MP3 文件中的作用是什么？

> ID：11210216
> 
> 赞同：2
> 
> 时间：2012-06-26T15:00:41.060
> 
> 标签：audio, mp3, binaryfiles, file-format, lame

我在这里看到[http://en.wikipedia.org/wiki/MP3](http://en.wikipedia.org/wiki/MP3) MP3 文件由与 MP3 数据交换的 MP3 标头组成。MP3 标头由几个字节组成。

但这是我的带有 ID3 标签的 MP3 文件转储。标题以蓝色突出显示。

![带有 ID3 标签的 MP3 文件转储](../Images/bdc84fb2cde3a9892487d68cab131009.png)

您可以看到“LAME3.96”文本以绿色突出显示。它在那里做什么？这是 MP3 基本流的一部分吗？或者这是我没有标记的一些标题的一部分？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T15:12:14.453

[LAME 是一个 MP3 编码器](http://en.wikipedia.org/wiki/LAME)，它是一个程序，它采用未压缩的音频源并输出压缩的 MP3。那里的那段文字只是表明该文件是使用 LAME 编码器压缩的。根据[LAME SourceForge 页面](http://lame.sourceforge.net/)，最新版本是 3.99，与您插入该文件标题的内容非常接近。

所以不用担心，没有人试图侮辱您的 MP3 文件！:P

# objective-c - 在附加到 NSOperationQueue operationsCount 的 observeValueForKeyPath 中崩溃

> ID：11210219
> 
> 赞同：3
> 
> 时间：2012-06-26T15:00:45.950
> 
> 标签：objective-c, ios, multithreading, key-value-observing, nsoperationqueue

我在我的 UIView 子类中有`UITextView logView`（尝试了`atomic`和`nonatomic`）和属性。`NSOperationQueue uploadQueue`我在我`NSOperationQueue`的财产上添加了 KVO，`operationsCount`如下所示：

```
[[self uploadQueue] addObserver:self
            forKeyPath:@"operationCount" 
               options:(NSKeyValueObservingOptionNew |
                        NSKeyValueObservingOptionOld)
               context:NULL]; 
```

观察者函数如下所示：

```
- (void)observeValueForKeyPath:(NSString *)keyPath
                      ofObject:(id)object
                        change:(NSDictionary *)change
                       context:(void *)context
{
    if ([object isKindOfClass: [NSOperationQueue class]]) {
        NSLog(@"Keypath is: %@ change dictionary is: %@", keyPath, change);
        NSInteger testnew = [[change objectForKey: @"new"] integerValue];
        NSInteger testold = [[change objectForKey: @"old"] integerValue];
        if (testnew > testold) {
            [[self logView] setText: [NSString stringWithFormat: @"Uploading %d files", testnew]];
            objc_setAssociatedObject([self logView], @"max_value_of_uploads", [change objectForKey: @"new"], OBJC_ASSOCIATION_COPY);
        } else {
            NSInteger value = [objc_getAssociatedObject([self logView], @"max_value_of_uploads") integerValue]; 
            [[self logView] setText: [NSString stringWithFormat: @"Uploaded %d of %d files", testnew, value]];
        }
    }
} 
```

`uploadQueue`填充是这样的：

```
 ...
   NSDictionary *iter;
        NSEnumerator *enumerator = [objects objectEnumerator];
        while (iter = [enumerator nextObject]) {
            Uploader *op = [[Uploader alloc] initWithFileName: [iter objectForKey: @"fileName"] 
                                                             FileID: [[iter objectForKey: @"fileID"] integerValue] 
                                                       AndSessionID: [self sess]];
            //Uploader *op = [[Uploader alloc] init];
            [[self uploadQueue] addOperation: op];
   ... 
```

没有`if-else`阻塞，一切正常：我收到了关于队列中操作数的 NSLog 消息，数字没问题等等。但是有了那个`if-else`块，我会崩溃，看起来像这样：

```
bool _WebTryThreadLock(bool), 0x10617fb0: Tried to obtain the web lock from a thread other than the main thread or the web thread. This may be a result of calling to UIKit from a secondary thread. Crashing now...
1   WebThreadLock
2   -[UITextView setText:]
3   -[SincViewController observeValueForKeyPath:ofObject:change:context:]
4   NSKeyValueNotifyObserver
5   NSKeyValueDidChange
6   -[NSObject(NSKeyValueObservingPrivate) _changeValueForKey:key:key:usingBlock:]
7   -[NSObject(NSKeyValueObservingPrivate) _changeValueForKey:usingBlock:]
8   ____NSOQDelayedFinishOperations_block_invoke_0
9   -[NSObject(NSKeyValueObservingPrivate) _changeValueForKey:key:key:usingBlock:]
10  -[NSObject(NSKeyValueObservingPrivate) _changeValueForKey:usingBlock:]
11  __NSOQDelayedFinishOperations
12  _dispatch_after_timer_callback
13  _dispatch_source_invoke
14  _dispatch_queue_invoke
15  _dispatch_worker_thread2
16  _pthread_wqthread
17  start_wqthread 
```

`else`它在块中崩溃。此外，我没有看到我的 logView 有任何变化。感谢您未来的帮助和回复。

**更新：** `performSelectorOnMainThread`设置文本时救了我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T15:18:41.493

更新 UI 时，请确保您在主线程中。一个可能的解决方案如下：

```
dispatch_async(dispatch_get_main_queue(), ^{
    if (testnew > testold) {
        [[self logView] setText: [NSString stringWithFormat: @"Uploading %d files", testnew]];
        objc_setAssociatedObject([self logView], @"max_value_of_uploads", [change objectForKey: @"new"], OBJC_ASSOCIATION_COPY);
    } else {
        NSInteger value = [objc_getAssociatedObject([self logView], @"max_value_of_uploads") integerValue]; 
        [[self logView] setText: [NSString stringWithFormat: @"Uploaded %d of %d files", testnew, value]];
    }
}); 
```

请注意，使用`dispatch_async`or`dispatch_sync`取决于您想要的实现，但在后一种情况下，除非您检查您所在的线程，否则您将面临死锁的风险。

另请参阅：[NSOperation、观察者和线程错误](https://stackoverflow.com/questions/1244243/nsoperation-observer-and-thread-error) ，其中有人建议将您的 UI 代码移动到单独的方法：

```
-(void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary *)change context:(void *)context {
  [self performSelectorOnMainThread:@selector(dataLoadingFinished:) withObject:nil waitUntilDone:YES];
} 
```

..这是一条很好的替代路线。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T15:09:12.393

我建议你在这里使用委托模式。您似乎将非常先进的技术与一些松散的代码混合在一起，这很快就会导致问题。例如，我认为您不需要关联对象。

发生错误是因为顺便从后台线程访问 UI。您应该将 UI 调用 (setText:) 包装在 performSelectorOnMainThread:withObject:waitUntilDone: 或块中。

# mysql - 将行转换为列 - 面临的问题。

> ID：11210220
> 
> 赞同：0
> 
> 时间：2012-06-26T15:00:49.153
> 
> 标签：mysql

我有以下数据集（请注意，我的数据库/架构有些复杂，因此在此处包含所有详细信息是不可行的）

这是我从基表中提取的数据的简化版本，并创建了一个`view`.

```
锻炼活动记录 ID 属性度量 ID 属性度量值锻炼锻炼设置创建
234 17 10 2012-02-06 00:00:00
234 18 30 2012-02-06 00:00:00
234 17 20 2012-03-03 00:00:00
234 18 12.9 2012-03-03 00:00:00
234 17 20 2012-04-02 00:00:00
234 18 40 2012-04-02 00:00:00
.
.
. （等等进一步的锻炼活动记录ID）

```

我需要计算（查看数据以更好地理解）

```
总计 = (10 * 30) + (20 * 12.9) + (20 * 40)
```

按月分组。

这里有助于乘法的基本方法是将行转置为列。所以上面的结构会变成——

```
锻炼_活动_记录_id ex17 ex18锻炼_锻炼_设置_创建_on     
234 10 30 2012-02-06 00:00:00
234 20 12.9 2012-03-03 00:00:00
234 20 40 2012-04-02 00:00:00
.
.
.
.
. （对于剩余的锻炼活动记录 ID 依此类推）

```

为此，我浏览了几篇 SO 帖子，在尝试了各种可行/不可行 (:D) 选项后，我提出了以下查询。

```
选择
       案例属性_metric_id
           WHEN '17' THEN attribute_metric_value END AS 'ex17',
       CASE attribute_metric_id WHEN '18' THEN attribute_metric_value END AS 'ex18',
       锻炼_锻炼_设置_创建_on
FROM 练习属性
在哪里锻炼_活动_记录_id = 234

```

我得到的实际输出是

```
锻炼_活动_记录_id ex17 ex18锻炼_锻炼_设置_创建_on
234 10 空 2012-02-06 00:00:00
234 NULL 30 2012-02-06 00:00:00
234 20 空 2012-03-03 00:00:00
234 NULL 12.9 2012-03-03 00:00:00
234 20 空 2012-04-06 00:00:00
234 NULL 40 2012-04-02 00:00:00

```

任何人都可以对此有所了解吗？我将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T15:13:19.447

这会为您计算总计，按年份和月份分组：

```
SELECT YEAR(workout_exercise_set_created_on) AS YEAR,
       MONTH(workout_exercise_set_created_on) AS MONTH,
       sum(SubTotal) AS GrandTotal
FROM
  (SELECT workout_exercise_set_created_on,
          max(CASE WHEN attribute_metric_id = 17 THEN attribute_metric_value END) * max(CASE WHEN attribute_metric_id = 18 THEN attribute_metric_value END) AS SubTotal
   FROM MyTable
   GROUP BY workout_exercise_set_created_on) a
GROUP BY YEAR(workout_exercise_set_created_on),
         MONTH(workout_exercise_set_created_on) 
```

[SQL 小提琴示例](http://sqlfiddle.com/#!2/4fe19/12)

**输出**

```
YEAR    MONTH   GRANDTOTAL
2012    2        300
2012    3        258
2012    4        800 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T15:06:06.243

只需添加聚合函数：

```
SELECT
   MAX(CASE attribute_metric_id
        WHEN '17' THEN attribute_metric_value 
      END) AS 'ex17',
   MAX(CASE attribute_metric_id 
        WHEN '18' THEN attribute_metric_value 
       END) AS 'ex18', 
   workout_exercise_set_created_on
   FROM exercise_attribute
   WHERE workout_activity_record_id =234
   GROUP BY workout_exercise_set_created_on 
```

如果您需要显示不同的结果，`workout_activity_record_id`您应该修改 `group by workout_activity_record_id,workout_exercise_set_created_on`

# java - 休眠 ORM 中的几个问题。

> ID：11210222
> 
> 赞同：1
> 
> 时间：2012-06-26T15:00:56.453
> 
> 标签：java, hibernate

```
<hibernate mapping package="org.hibernate.tutorial.domain">

    <class name="Event" table"Events">
       <id name="id" column="EVENT_ID">
          <generator class ="native"/>
       </id>

       <property name="date" type="timestamp" column="EVENT_DATE"/>
       <property name="title"/>

       </class>

</hibernate-mapping> 
```

[http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/tutorial.html#tutorial-firstapp](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/tutorial.html#tutorial-firstapp) 我正在阅读这篇关于休眠的文章。

1.  这是初学者的最佳指南吗？
2.  是什么`generator class ="native"`意思，它有什么作用？
3.  为什么 id 用 id 标签声明，而另一个用 property 标签声明。
4.  人们是否仍然使用 xml 文件来映射类与表。是不是老套路。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T15:10:44.800

1.  这是一个非常主观的答案。我会自己从 JPA 指南开始。
2.  本机意味着它将使用特定于数据库的生成方法。例如，对于 mysql，它将使用自动增量。对于 oracle，它可以使用序列。
3.  Hibernate 要求每个实体都有一个 id。使用 id 元素来标记它。
4.  现在大多数人都使用注释。有一个优点是您可以使用 JPA 注释而不是绑定到休眠。XML 配置在世界上仍有一席之地，例如，映射您没有源访问权限的 bean。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T15:06:25.370

1.  大概。
2.  这意味着使用数据库的“本机” id 方法，如 Oracle 中的序列或`auto_increment`MySql 中的序列等。
3.  因为一个是ID，其他是属性。
4.  是的。是的，但在某些情况下它也更可取，例如，想要/需要将源与 Hibernate 分离或将 DB 配置保存在一个地方（XML 文件在单个目录中，而不是在任何可能的源文件中）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T15:13:07.370

回答您的问题：

1）这是初学者的最佳指南吗？- 这是官方的第一个hibernate文档。我更喜欢“Hibernate in Action”

2）hibernate有好几种`generators`，根据需要选择合适的，基本上是用来生成主键的。例如，如果你使用`generator="assigned"`ie，你需要在调用之前手动分配一个主键`session.save(entity)`。这`native`意味着休眠将根据您在配置中提供的数据库方言负责生成主键。如果你使用 oracle，它使用序列，如果你使用 mysql 或 postgres，它使用 auto_increment

3) id 表示主键，其他是属性，希望这是一个约定。

4) 较旧的应用程序仍然使用 xmls。最好在学习的时候从 xmls 开始，然后将它们转换为注解。

# php - 配置 htaccess 以在 IIS6 上使用 IIRF - codeigniter

> ID：11210225
> 
> 赞同：2
> 
> 时间：2012-06-26T15:00:58.730
> 
> 标签：php, .htaccess, codeigniter, iis-6, iirf

我刚刚用 CodeIgniter 创建了一个网站，问题出在我们的服务器上，它在带有 IIS6 的 Windows Server 2003 上运行，

调用网站时只显示主页，其他页面显示 404 错误页面，因为 .htaccess 对 IIS6 的限制，

支持人员告诉我，他为一个名为 IIRF 的程序进行了设置以启用 moderewrite，但我仍然需要使用另一个在 htaccess 中的重写表达式

这是我的 htaccess 内容

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /root/

#Removes access to the system folder by users.
#Additionally this will allow you to create a System.php controller,
#previously this would not have been possible.
#'system' can be replaced if you have renamed your system folder.
RewriteCond %{REQUEST_URI} ^mvc/core_business.*
RewriteRule ^(.*)$ /index.php?/$1 [L]

#When your application folder isn't in the system folder
#This snippet prevents user access to the application folder
#Submitted by: Fabdrol
#Rename 'application' to your applications folder name.
RewriteCond %{REQUEST_URI} ^mvc.*
RewriteRule ^(.*)$ /index.php?/$1 [L]

#Checks to see if the user is attempting to access a valid file,
#such as an image or css document, if this isn't true it sends the
#request to index.php
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php?/$1 [L]
 </IfModule>

 <IfModule !mod_rewrite.c>
   # If we don't have mod_rewrite installed, all 404's
   # can be sent to index.php, and everything works as normal.
   # Submitted by: ElliotHaughin
   ErrorDocument 404 /index.php
 </IfModule> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T18:33:03.407

把它放在 IIRF.ini 中：

```
RewriteEngine On
RewriteBase 

#Removes access to the system folder by users.
#Additionally this will allow you to create a System.php controller,
#previously this would not have been possible.
#'system' can be replaced if you have renamed your system folder.
RewriteCond %{REQUEST_URI} ^mvc/core_business.*
RewriteRule ^(.*)$ /index.php?/$1 [L]

#When your application folder isn't in the system folder
#This snippet prevents user access to the application folder
#Submitted by: Fabdrol
#Rename 'application' to your applications folder name.
RewriteCond %{REQUEST_URI} ^mvc.*
RewriteRule ^(.*)$ /index.php?/$1 [L]

#Checks to see if the user is attempting to access a valid file,
#such as an image or css document, if this isn't true it sends the
#request to index.php
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php?/$1 [L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T17:46:22.790

IIS 不支持`.htaccess`文件——这是[Apache](http://httpd.apache.org)的特性。

您**必须**安装[IIRF](http://www.codeplex.com/IIRF)才能进行任何重写，但仍然不会完全相同。

有关更多信息，请参阅[IIRF](http://www.codeplex.com/IIRF)网站，或考虑使用 Apache for Windows ;)

# python - 使用中间结果的嵌套列表理解

> ID：11210228
> 
> 赞同：2
> 
> 时间：2012-06-26T15:01:14.940
> 
> 标签：python

我试图了解一个没有设置结果代码的功能的输出。我可以通过混合到标准错误流中的“错误：”字符串来判断它失败，通常在不同的转换状态消息中间。

我有以下列表理解，它有效，但扫描“错误：”字符串两次。由于它只是重新扫描实际的错误行，它工作正常，但它让我很恼火，我无法弄清楚如何使用单次扫描。这是工作代码：

```
errors = [e[e.find('error:'):] for e in err.splitlines() if 'error:' in e] 
```

简化的明显（和错误）方法是保存“查找”结果

```
errors = [e[i:] for i in e.find('error:') if i != -1 for e in err.splitlines()] 
```

但是，我得到“UnboundLocalError：分配前引用的局部变量'e'”。盲目地颠倒理解中的“for”也失败了。这是怎么做到的？

谢谢。肯特

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T15:05:31.760

您可以将检查`'error'`放在生成器表达式中：

```
[e[i:] for i,e in
 ((e.find('error:'),e) for e in err.splitlines())
 if i != -1] 
```

你所做的是创建一个嵌套的理解，并且通过`e`在第二个循环之前使用变量，你得到了 UnboundLocalError

顺便说一句，您也可以使用正则表达式并避免这种理解：

```
re.findall('error:(.*)', err) 
```

也不需要分割线。

对于完整的错误（与`error:`部分），这有效：

```
re.findall('error:.*', err) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T15:08:51.773

使用带有正常循环的生成器来执行这种需要状态的任务：

```
def errsplit(err):
    for e in err.splitlines():
        errindex = e.find('error:')
        if errindex > -1: yield e[errindex:] 
```

如果您需要将此作为列表，只需执行`list(errsplit(err))`.

列表推导并不是真正打算处理存储状态，尝试在其中使用存储状态可能会变得笨拙。

也就是说，请注意，正如@JBernardo 所建议的那样，正则表达式可能会更好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T15:21:58.603

我已经尝试过 JBernardo 的解决方案，但真正对我有用的是：

```
[errstr[i:] for i,errstr in
 ((e.find('error:'), e) for e in err.splitlines())
 if i != -1] 
```

# php - 在 PHP 中合并 2 个关联数组

> ID：11210229
> 
> 赞同：0
> 
> 时间：2012-06-26T15:01:17.997
> 
> 标签：php, arrays

我有 2 个数组，所以首先是：

```
{
    "title_heading_1": "Name",
    "last_name": "Trenkle",
    "first_name": "Jason",
    "middle_name": "Jason",
} 
```

第二个是：

```
{
    "Title Heading 1": "",
    "Last Name": "",
    "First Name": "",
    "Middle Name": "",
} 
```

问题是我将如何合并这两个数组，其中第一个数组的键将被第二个数组的键替换。所以结果会是这样的：

```
{
    "Title Heading 1": "Name",
    "Last Name": "Trenkle",
    "First Name": "Jason",
    "Middle Name": "Jason",
} 
```

我将如何在 PHP 上做到这一点。我尝试了 foreach 但仍然没有得到正确的输出。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T15:06:35.063

如果键和值匹配并保证有序，您可以很容易地做到：

```
$result = array_combine(array_keys($second), array_values($first));
//array_values is probably not necessary 
```

如果第一个和/或第二个数组的键可以按任何顺序排列但始终如上命名，这应该可以解决问题：

```
foreach ($first as $key => $value) {
   $second[ucwords(str_replace('_', ' ', $key))] = $value;
} 
```

哦，`json_decode`如果您还不知道这样做，请使用将字符串解码为 PHP 数组。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-06-26T15:06:09.107

```
$array1 = (array) json_decode('{
    "title_heading_1": "Name",
    "last_name": "Trenkle",
    "first_name": "Jason",
    "middle_name": "Jason",
}');

$array2 = (array) json_decode('{
    "Title Heading 1": "",
    "Last Name": "",
    "First Name": "",
    "Middle Name": "",
}');

$result = array_merge($array1, $array2);
print_r($result); 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-06-26T15:06:51.157

使用[array_combine](http://php.net/manual/en/function.array-combine.php)。第一个参数用于键，第二个参数用于值。例如

```
<?php
$a = array('green', 'red', 'yellow');
$b = array('avocado', 'apple', 'banana');
$c = array_combine($a, $b);

print_r($c);
?> 
```

# c++ - 将模板代码分解为单独的编译单元

> ID：11210232
> 
> 赞同：2
> 
> 时间：2012-06-26T15:01:26.720
> 
> 标签：c++, templates

我有一个使用模板元编程的 Visual Studio 2008 C++03 应用程序。MPL 可能需要大量时间来编译（约 15 分钟）。显然，我不想在每次对代码的某些不相关部分进行微小更改时都产生这种成本。所以，我想把它们分解成单独的目标文件。

例如：

```
// Foo.hpp
template< typename T >
inline boost::shared_ptr< Bar > Foo( const Data& d )
{
    /* MPL magic takes a long time to compile */
    switch( d.a )
    {
    case 0:
        return MPLMagic::Create< ZeroTraits, T >( d.b, d.c  );
    case 1:
        return MPLMagic::Create< OneTraits, T >( d.b, d.c );
    default:
        return MPLMagic::Create< DefaultTraits, T >( d.b, d.c );
    }
}

// Bob.hpp
#include "Foo.hpp"
template< typename X, typename Y >
inline void BobFunc()
{
    Data d = /* Bob's data */;
    boost::shard_ptr< Bar > created = Foo< BobTraits >( d );
    // do bob stuff
}

// Charlie.hpp
#include "Foo.hpp"
template< typename X, typename Y >
inline void CharlieFunc()
{
    Data d = /* Charlie's data */;
    boost::shard_ptr< Bar > created = Foo< CharlieTraits >( d );
    // do charlie stuff
} 
```

如何将这些头文件分开，以便对查理的更改不会导致鲍勃的重新编译，并且对某些不相关的部分的更改不需要重新编译它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T16:00:47.620

假设（根据上面的代码）您只允许一小部分类型实例化模板，您可以将模板拆分为声明，定义在单个翻译单元中显式实例化模板。

此外，考虑更改`Foo`以实现`AbstractFactory`具体工厂在`int`->的映射中注册的模式`creator`，这将允许您将`Foo`（可能是最昂贵的部分）的编译拆分为多个文件，每个文件对应一个特定的特征。这允许扩展框架而无需重新编译所有的模板魔法，另外将减少编译器的内存占用，这可能是现在编译需要这么多的原因之一。

# html - Internet Explorer 中的 HTML5 视频

> ID：11210237
> 
> 赞同：2
> 
> 时间：2012-06-26T15:02:03.597
> 
> 标签：html, internet-explorer, ffmpeg, h.264, mpeg-4

我有 3 个视频副本：

> 原始 AVI
> 
> 编码的 .mp4（h.264 视频和 mp3 音频）
> 
> 编码 .ogv，用 oggtheora 编码

我的 HTML 5 播放器在 Firefox 14、Chrome 19 和 Opera 12 中运行，但它失败了，但你猜对了.. Internet Explorer 9。据我所知，应该拾取并播放 h.264 文件，但事实并非如此。

```
<video class="vid" width="550" height="400" controls>
    <source src="test/charlie.mp4" type="video/mpeg" /> 
    <source src="test/charlie.ogv" type="video/ogg" /> 
    Nope.
</video> 
```

有任何想法吗？

请拍下这张照片以表示我的感激之情

![愤怒的脸](../Images/3dee1563d1dc6c3f3b646acfeb7e92eb.png)

对于询问然后删除他们的评论的人：

```
htdocs/html5$ ls
    index.php  test
htdocs/html5/test$ ls
     charlie.avi  charlie.mp4  charlie.ogv 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T15:09:21.570

您是否尝试过使用`type="video/mp4"`而不是`type="video/mpeg"`？

```
<video class="vid" width="550" height="400" controls>
    <source src="test/charlie.mp4" type="video/mp4" /> 
    <source src="test/charlie.ogv" type="video/ogg" /> 
    Nope.
</video> 
```

我以前和从来没有遇到过IE9的问题，可以从这里来。

# css - Html 表中的 Twitter Bootstrap 下拉菜单

> ID：11210240
> 
> 赞同：2
> 
> 时间：2012-06-26T15:02:14.327
> 
> 标签：css, twitter-bootstrap

我有一个 HTML 表，其中每一行都包含一个 Twitter Bootstrap 样式的下拉列表。当我单击按钮显示列表时，由于容器的`overflow`属性，菜单不显示。`div`我已经放置了显示我遇到的问题的示例代码：http: [//jsfiddle.net/jpaolini/XgYKP/4/](http://jsfiddle.net/jpaolini/XgYKP/4/)。

目标是让下拉菜单出现在所有内容的顶部，以便无需滚动即可看到它。任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T15:10:00.900

我删除了`overflow: auto;`from`.widget-content`和 remove `overflow: hidden`from `.dataTables_wrapper`，这似乎有效。

[http://jsfiddle.net/jackwanders/cnnsB/](http://jsfiddle.net/jackwanders/cnnsB/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T16:43:39.897

您可以尝试在您的 .btn-group 中添加 position:absolute ，下拉列表将退出表格。btn 不会再进入桌子了

# mysql - 将“INNER JOIN”与多个数据库表语句一起使用时，意味着什么/会发生什么？

> ID：11210241
> 
> 赞同：1
> 
> 时间：2012-06-26T15:02:17.543
> 
> 标签：mysql, sql, ruby-on-rails, database

我正在使用 Ruby on Rails 3.2.2 和 MySQL。我有一个`has_many :through` `ActiveRecord::Associations`生成以下 SLQ 查询的方法 (an)：

```
SELECT DISTINCT `articles`.*
           FROM `articles`
     INNER JOIN `articles_comments_associations` `comment_associations_articles`
             ON `comment_associations_articles`.`article_id` = `articles`.`id`
     INNER JOIN `articles_comments_associations`
             ON `articles`.`id` = `articles_comments_associations`.`article_id`
          WHERE `articles_comments_associations`.`comment_id` = 223
            AND (articles_comments_associations.user_id IN (2)) 
```

我想了解它的含义`INNER JOIN 'articles_comments_associations' 'comment_associations_articles'`（*注意*：有多个数据库表语句`INNER JOIN`）以及 SQL 查询是如何工作的，因为*我没有名为的数据库表`comment_associations_articles`*。**这是一个错误**（即使它按预期工作）**？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T15:03:12.707

它是一个表别名。意思是，它正在将表重命名`articles_comments_associations`为`comment_associations_articles`，以便在查询中进一步引用。任何字段或表都可以通过简单地在表/字段引用后面给出另一个名称来命名。

# php - PHP未定义索引错误——无法解决

> ID：11210250
> 
> 赞同：-1
> 
> 时间：2012-06-26T15:02:38.343
> 
> 标签：php, indexing, undefined

我已经尝试过堆栈溢出中提供的解决方案来解决这个问题，但无法真正解决这个问题。

我正在研究其他人编写的代码。代码如下

```
$web_user = $_SERVER["PHP_AUTH_USER"];
$file_name = $web_user.'_nefops_var_sel.tab';
$state['dumper_file_name'] = $file_name;
$long_file_name = '/tmp/'.$file_name;
$state['dumper_long_file_name'] = $long_file_name;
$handle = fopen($long_file_name,'w') or die("bad file open");
fwrite($handle,$labels);    
fclose($handle); 
```

我得到的错误是遇到了一个 PHP 错误

> 严重性：通知
> 消息：未定义索引：PHP_AUTH_USER
> 文件名：models/export_data_model.php
> 行号：26

有人可以帮我弄这个吗。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T15:05:20.263

您收到的错误是让您知道服务器超全局中没有这样`PHP_AUTH_USER`的密钥。这意味着基本 HTTP 身份验证（有时在 CGI 中使用或在 apache 等网络服务器配置中定义）不可用/启用。

[PHP_AUTH_USER 未设置？](https://stackoverflow.com/questions/3663520/php-auth-user-not-set)

请注意，错误级别是警告，因此除非您将错误级别设置为严格，否则它不会停止执行。

既然您说您正在处理其他人的代码，我会说这意味着该代码最初旨在使用本机 Web 服务器身份验证，而不是使用数据库在代码中定义的身份验证模型。如果您将其部署在其他地方，您将需要找到替代方案，例如使用持久层创建您自己的身份验证机制。

Apache 下的 HTTP 认证文档： [http ://httpd.apache.org/docs/2.0/howto/auth.html](http://httpd.apache.org/docs/2.0/howto/auth.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T15:05:36.003

状态的[PHP 文档`$_SERVER`](http://php.net/manual/en/reserved.variables.server.php)`['PHP_AUTH_USER']`：

> 在进行 HTTP 身份验证时，此变量设置为用户提供的用户名。

所以这告诉我，没有进行 HTTP 身份验证。

我建议您阅读[使用 PHP 的 HTTP 身份验证](http://php.net/manual/en/features.http-auth.php)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T15:07:55.503

您收到通知是因为您在引用它之前没有检查 $_SERVER["PHP_AUTH_USER"] 是否已设置。不过，这只是一个通知，因此并不那么重要。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-26T15:04:42.400

***它准确地***告诉您错误消息中的错误 ID。

`$_SERVER["PHP_AUTH_USER"]`不存在。

# java - Android 2.3.3 互联网可以在我的 Galaxy S 上运行，但不能在我的 Galaxy Tab 上运行？（权限？）

> ID：11210252
> 
> 赞同：1
> 
> 时间：2012-06-26T15:02:46.107
> 
> 标签：java, android, android-4.0-ice-cream-sandwich, httpurlconnection, ui-thread

我有这个奇怪的问题。我正在检索推特，它适用于模拟器和我的三星 Galaxy S，但它不适用于我的 Galaxy Tab 10.1？

手机和标签上都安装了相同的应用程序。从 Eclipse 生成，所以没有调试或任何东西。

需要不同的权限？

这是代码：

```
HttpClient client = new DefaultHttpClient();
HttpGet get = new HttpGet(searchUrl);

ResponseHandler<String> responseHandler = new BasicResponseHandler();

responseBody = client.execute(get, responseHandler); 
```

这是清单：

```
<uses-sdk android:minSdkVersion="10" />

<uses-permission android:name="android.permission.INTERNET"  />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-26T15:04:27.107

我发誓，这个问题每天都会在 StackOverflow 上被问到。:)

问题是您正在主 UI 线程上执行网络访问。`NetworkAccessOnMainThread`如果您尝试在主线程上执行 HTTP 请求，Android 3.0 及更高版本将使您的应用程序崩溃（即系统将抛出异常）。您需要将您的 HTTP 请求包装在一个`AsyncTask`（或`Thread`某种类型的）中，以确保您不会阻塞 UI 线程。

阅读我关于该主题的博客文章：

## [为什么冰淇淋三明治会使您的应用程序崩溃](http://www.androiddesignpatterns.com/2012/06/app-force-close-honeycomb-ics.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-13T12:54:05.683

使用此代码，它对我有用。

```
if (android.os.Build.VERSION.SDK_INT > 8) {

        StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();
        StrictMode.setThreadPolicy(policy);

    } 
```

# asp.net - 如果用户不在角色中，则拦截请求

> ID：11210258
> 
> 赞同：1
> 
> 时间：2012-06-26T15:03:00.913
> 
> 标签：asp.net, asp.net-mvc-3

我有一个带有自定义成员资格提供程序的 ASP.NET MVC3 应用程序。

我在 web.config 中指定了一个 loginUrl，如下所示：

```
<forms loginUrl="~/SSO/LogOn" timeout="86400" slidingExpiration="true"/> 
```

我想知道当用户点击他们没有访问权限的页面时如何拦截这个请求，以便我可以在这个 URL 上附加一些东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T05:28:26.227

假设您有一个名为 SSO 的控制器和一个名为 LogOn 的操作方法，我认为您只需要扩展 AuthorizeAttribute：

```
public class AppendingAuthorizeAttribute : AuthorizeAttribute
{        
    protected override void HandleUnauthorizedRequest(AuthorizationContext context)
    {
        var url = new UrlHelper(context.RequestContext);
        var logonUrl = url.Action("LogOn", "SSO", new {appendedQueryStringParameter = "somevalue"});
        filterContext.Result = new RedirectResult(logonUrl);
    }
} 
```

只需使用此属性注释需要授权的控制器/操作方法，它应该重定向到如下所示的 url：

> /SSO/LogOn?appendedQueryStringParameter=somevalue

# java - Java中的基本图像信息

> ID：11210260
> 
> 赞同：-1
> 
> 时间：2012-06-26T15:03:06.900
> 
> 标签：java, image-processing

我提到了[这个](https://stackoverflow.com/questions/7151230/in-java-how-can-i-extract-camera-related-information-from-an-image)

我的要求非常简单直接 - 从图像（主要是 JPEG）中检索基本信息 - 相机型号、ISO 等。

我需要一些轻量级（少量的类，简单的 api）库——我检查了一些像元数据提取器这样的库。但我不确定它是否符合我的目的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T15:30:36.007

我的道歉 - 我最初的问题有我的答案！

[元数据提取器](http://code.google.com/p/metadata-extractor/wiki/GettingStarted)服务于我的目的，但我希望看到更多选项。

# php - 为什么我的数据不能保存到 MySQL？

> ID：11210265
> 
> 赞同：0
> 
> 时间：2012-06-26T15:03:27.807
> 
> 标签：php, mysql, save

所以我正在尝试为时事通讯注册表单存储一些用户信息，它在 XAMPP 中运行良好，但我在将数据保存到我的实时数据库（GoDaddy）时遇到了一些问题。我还回应了一条错误声明，它说我的查询是空的，但我不知道为什么......这是我的代码（电子邮件重复测试也在本地工作，但显然不再有效）：

```
<?php

//Start session
session_start();

//Log into the server
@ $db = mysql_pconnect("hostnamewashere", "usernamewashere", "pwwashere");

//Select the database desired
mysql_select_db("databasenamewashere");

//If no connection can be made, echo it out to the screen
if(!$db){
    echo "Error: Could not connect to the database. Please try again later.";
exit;
}

//Retrieve data from form and create variables
$email = Trim(($_POST['email'])); 
$ip_orig = $_SERVER['REMOTE_ADDR'];
$ip = ip2long($ip_orig);
$date = date('Y-m-d');  
$time = date('H:i:s');  

//Validate data
if(empty($_POST['email'])) {
$_SESSION["errorMsg"] = "Please enter your email.";
Header("Location: index.php");
exit;
}

if(!preg_match("/^[_\.0-9a-zA-Z-]+@([0-9a-zA-Z][0-9a-zA-Z-]+\.)+[a-zA-Z]{2,6}$/i", ($_POST['email']))) { 
$_SESSION["errorMsg"] = "Incorrect email format; please try again.";
Header("Location: index.php");
exit; 
}

//Check to see that no duplicates exist in the database
$sql = "SELECT newsletter_email FROM Newsletter WHERE newsletter_email='".$email."'";
$result = mysql_query($sql);

if(empty($result)) {
$num_results = 0;
}else {
$num_results = mysql_num_rows($result);
}

if($num_results !== 0) {
$_SESSION["errorMsg"] = "Sorry, that email address is already in our database.";
Header("Location: index.php");
exit;
}

//Place into database
$sql = "INSERT INTO Newsletter(newsletter_email, newsletter_ip, newsletter_date,     newsletter_time) VALUES('".$email."', '".$ip."', '".$date."', '".$time."')";

//Run query and get result back; shouldn't return anything
$result = mysql_query($sql);

//Redirect user to successful registration page
Header("Location: index.php");
$_SESSION["errorMsg"] = "Thanks! We will be in touch with you soon.";
exit;

//Close the database connection
mysql_close($db);

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T15:48:49.530

我有点重写了脚本，但我真正看到的唯一给我带来错误的是没有 date_default_timezone_set("America/Los_Angeles"); 放。

以下脚本适用于我：

```
<?php
//Start session
session_start();
date_default_timezone_set("America/Los_Angeles");

$dbhost = 'localhost';
$dbuser = 'dbuser';
$dbpass = 'pass';
$dbname = 'test';

if ($_POST)
{

    //Retrieve data from form and create variables
    $email = trim($_POST['email']); 
    $ip_orig = $_SERVER['REMOTE_ADDR'];
    $ip = ip2long($ip_orig);
    $date = date('Y-m-d');  
    $time = date('H:i:s');  

    //Validate data
    if(empty($_POST['email'])) {
    $_SESSION["errorMsg"] = "Please enter your email.";
    header("Location: index.php");
    exit;
    }

    if(!preg_match("/^[_\.0-9a-zA-Z-]+@([0-9a-zA-Z][0-9a-zA-Z-]+\.)+[a-zA-Z]{2,6}$/i", ($_POST['email']))) { 
        $_SESSION["errorMsg"] = "Incorrect email format; please try again.";
        header("Location: index.php");
        exit; 
    }

    //Log into the server
    $db = @mysql_pconnect($dbhost, $dbuser, $dbpass);

    //Select the database desired
    mysql_select_db($dbname);

    //If no connection can be made, echo it out to the screen
    if(!$db){
        echo "Error: Could not connect to the database. Please try again later.";
    exit;
    }

    //Check to see that no duplicates exist in the database
    $sql = "SELECT newsletter_email FROM Newsletter WHERE newsletter_email='".$email."'";
    $result = mysql_query($sql);

    if (mysql_num_rows($result) > 0)
    {
        $_SESSION["errorMsg"] = "Sorry, that email address is already in our database.";
        header("Location: index.php");
        exit;
    }

    //Place into database
    $sql = "INSERT INTO Newsletter(newsletter_email, newsletter_ip, newsletter_date, newsletter_time) VALUES('".$email."', '".$ip."', '".$date."', '".$time."')";

    //Run query and get result back; shouldn't return anything
    $result = mysql_query($sql);

    //Redirect user to successful registration page
    $_SESSION["errorMsg"] = "Thanks! We will be in touch with you soon.";
    header("Location: index.php");
    exit;

    //Close the database connection
    mysql_close($db);
}
?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
</head>

<body>
<form method="post" action="index.php">
<input name="email" value="" />
<input type="submit" name="submit" value="Submit" />
</form>

</body>
</html> 
```

# javascript - 使用 Javascript 获取 iframe 内容

> ID：11210269
> 
> 赞同：2
> 
> 时间：2012-06-26T15:03:44.500
> 
> 标签：javascript

我有一个 iframe，我需要获取它的内容并从中提取一些信息。这可能使用Javascript吗？

我在某处看过，如果其他页面在不同的服务器上运行，这是不可能的，但我需要确认这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T15:05:26.223

如果它来自另一台服务器，您需要：

*   代理，以便您的浏览器认为它是同一个域（包括端口）
*   让 iframe 服务器设置[CORS 标头](https://developer.mozilla.org/en/http_access_control)
*   放松浏览器的安全性（在 Chrome 上不可能，在 Firefox 上可能也不可能）

在一般情况下，如果您无法更改 iframe 内容的服务器，则无法在 javascript 中读取其内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T15:07:02.983

该`iframe`元素有一个名为的方法[`contentWindow`](https://developer.mozilla.org/en/HTML/Element/iframe#Scripting)，可让您执行此操作。仅当 iframe 与@dystroy 所说的文档位于同一服务器上时，它才会起作用。

# qt - 如何在 Qwidget 中添加对象 cimg

> ID：11210284
> 
> 赞同：0
> 
> 时间：2012-06-26T15:04:24.440
> 
> 标签：qt, qwidget, qimage, cimg

我正在 qt 中创建一个应用程序并使用 cimg 来处理图形。我的问题是我如何将项目 CImg 放在 QWidget 中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T16:06:01.500

创建一个 QImage，如果 CImg 内部格式是 QImage 支持的选项之一，您可以创建一个使用 CImg 数据而不需要副本的 QImage 包装器 - 否则您可能必须将 CImg 字节复制到 QImage.data

# html - 使用精灵图像

> ID：11210286
> 
> 赞同：0
> 
> 时间：2012-06-26T15:04:25.283
> 
> 标签：html, css, sprite, css-sprites

我有一个由 2 个图像组成的图像，一个精灵。

我想要做的是把它作为一个精灵，所以当我将鼠标悬停在它上面时，图像的底部是可见的。

我知道我可以`background-position`在 CSS 中做到这一点，但这是`<img>`HTML 中的一个标签。

我怎么能这样做？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T15:07:06.113

使用包含 div 的 CSS`overflow`属性设置为`hidden`. 然后，您可以根据需要使用 JavaScript 调整包含 div 的大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T15:14:46.570

这就是如何通过 CSS 过渡来实现的：

[http://jsfiddle.net/NGWuZ/](http://jsfiddle.net/NGWuZ/)

标记：

```
<div class="container">
    <img src="my_image_url">
</div>​ 
```

CSS：

```
.container{
    height: 175px;
    overflow: hidden;
    position: relative;  
}
.container img{
    position: absolute;
    top: 0;
    left: 0;
    transition: top 2s;
    -moz-transition: top 2s; /* Firefox 4 */
    -webkit-transition: top 2s; /* Safari and Chrome */
    -o-transition: top 2s; /* Opera */
}

.container img:hover{
   top: 175px;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T15:14:57.040

在您的情况下，我会向现在绝对定位的图像添加一个容器，当悬停容器时，我会移动图像位置。

HTML：

```
<div class="myContainer">
   <img src="mySpriteImage" alt="" width="50" height="50" />
</div> 
```

CSS：

```
.myContainer {
    position:relative;
    overflow:hidden;
    width:50px;
    height:25px;
}
.myContainer img {
    position:absolute;
    top:0;left:0;
}
.myContainer:hover img {
    top:auto;bottom:0;
} 
```

# jquery - jQuery scrollTo 插件在 iOS 上变成 Jerky

> ID：11210292
> 
> 赞同：9
> 
> 时间：2012-06-26T15:04:34.453
> 
> 标签：jquery, ios, scrollto, flicker

我在我们的[单页网站上使用 JQuery](http://www.designlagoon.com) [scrollTo 插件](http://flesler.blogspot.co.uk/2009/05/jqueryscrollto-142-released.html)在不同部分之间垂直滚动。

滚动在所有浏览器中运行良好，*除了*iOS Safari 滚动但非常生涩。我在页面上使用了许多其他 Jquery 插件，因此它可能与其中一个发生冲突。

如果有人知道在 iPad 上运行顺畅的 scrollTo 替代方案，或者可以建议从哪里开始解决问题，我将不胜感激。我已经尝试过[这个解决方案](https://stackoverflow.com/a/4321140/725136)，但没有成功。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-10-01T13:09:07.770

试试这个

```
$.scrollTo(SELECTOR, 800, {
    'axis':'y'
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T17:53:15.173

感谢您的提示 Arnar。

你的建议让我走上了正确的道路，在[这个 JSFiddle](http://jsfiddle.net/mekwall/up4nu/)的帮助下，我现在拥有了[我想要](http://www.designlagoon.es)通过平滑动画滚动到每个部分并自动突出显示活动菜单项来实现的平滑滚动。

```
// Cache selectors
var lastId,
    topMenu = $("#top-menu"),
    topMenuHeight = topMenu.outerHeight()+15,
    // All list items
    menuItems = topMenu.find("a"),
    // Anchors corresponding to menu items
    scrollItems = menuItems.map(function(){
      var item = $($(this).attr("href"));
      if (item.length) { return item; }
    });

// Bind click handler to menu items
// so we can get a fancy scroll animation
menuItems.click(function(e){
  var href = $(this).attr("href"),
      offsetTop = href === "#" ? 0 : $(href).offset().top-topMenuHeight+1;
  $('html, body').stop().animate({ 
      scrollTop: offsetTop
  }, 300);
  e.preventDefault();
});

// Bind to scroll
$(window).scroll(function(){
   // Get container scroll position
   var fromTop = $(this).scrollTop()+topMenuHeight;

   // Get id of current scroll item
   var cur = scrollItems.map(function(){
     if ($(this).offset().top < fromTop)
       return this;
   });
   // Get the id of the current element
   cur = cur[cur.length-1];
   var id = cur && cur.length ? cur[0].id : "";

   if (lastId !== id) {
       lastId = id;
       // Set/remove active class
       menuItems
         .parent().removeClass("active")
         .end().filter("[href=#"+id+"]").parent().addClass("active");
   }                   
}); 
```

# knockout.js - 使用 mocha 进行无头淘汰视图模型测试

> ID：11210295
> 
> 赞同：12
> 
> 时间：2012-06-26T15:04:40.717
> 
> 标签：knockout.js, mocha.js, knockout-2.0

我正在尝试对我的淘汰视图模型进行无头测试。我故意避免在我的视图模型中处理任何 ui 结构，并将连接留给 html 页面。

这在 Jasmine 中非常有效，因为它在浏览器中运行，但是当我切换到[mocha](http://visionmedia.github.com/mocha/)时，我最终会在淘汰赛的最后一行运行：

> })(窗口、文档、导航器);

我已经研究过使用[zombiejs](http://zombie.labnotes.org/)，这将是一个不错的选择，但我没有看到一个关于如何在不改变淘汰源本身的情况下使用它的好故事。

关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-04T18:26:34.767

这也是我目前关注的一个话题。我将在这里倾倒我的发现，希望它们能为您指明正确的方向。

我首先尝试的可能路线是[PhantomJS](http://phantomjs.org/)。它是一个无头 WebKit 浏览器，因此它应该具有出色的 DOM、JSON、HTML5 和 CSS 选择器支持（例如，它[适用于 jQuery 和 qUnit](https://stackoverflow.com/questions/9479278/running-asynchronous-qunit-tests-from-ant-in-phantomjs)）。

我选择这个是因为它被 knockout.js 本身使用，我在 knockout.js 存储库中发现了它，其中有一个 .travis.yml 文件和以下注释：

![在此处输入图像描述](../Images/15bd382fcfdbe1de4a9e66e1ce32ffb6.png)

我没有任何证据表明这会奏效，但在 knockout.js 核心中使用它感到鼓舞。我还发现[了这个用于淘汰赛/幻影的运行脚本](https://github.com/SteveSanderson/knockout/blob/master/spec/runner.phantom.js)，看起来像是一个很好的启动点。

我还通过 node.js找到[了](https://github.com/jgonera/phantomjs-nodify) [一些使用 Mocha 和 PhantomJS 的](https://gist.github.com/2316021) [示例，包括](https://github.com/visionmedia/mocha/issues/160)[扩展 grunt](https://github.com/kmiyashiro/grunt-mocha)以在 Phantom 中运行 mocha 的库，以及[显示如何在 PhantomJS 中运行 mocha 的脚本](https://github.com/jgonera/phantomjs-nodify/blob/master/support/mocha.js)。所以这部分是肯定的，至少。

[在 knockoutjs 档案中提到的](https://groups.google.com/forum/?fromgroups#!topic/knockoutjs/bh3gYmOk3gI)另一个解决方案是使用[knockout-node](https://github.com/mtscout6/knockout-node)和[JsDOM](https://github.com/tmpvar/jsdom)创建一个可行的 DOM，但乍一看，这似乎太模糊了，并且可能导致实现您自己的测试环境。

有一个[幻灯片建议](http://www.slideshare.net/iloire/building-web-apps-with-nodejs-socketio-knockoutjs-and-zombiejs-codemotion-2012)zombie.js 可以与knockout/node/etc 一起使用。但是我找不到任何提供确凿证据的东西，所以我也不喜欢这条路线。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-09-26T10:40:00.237

也许这是因为 Knockout 已经改变（因为接受的答案是旧的），但今天，我不认为这是必要的（不再）。您可以轻松测试 Knockout 视图模型。我需要做的就是`ko`在我的测试中设置全局变量：

```
global.ko = require('../../Website/Scripts/knockout-3.4.0.js'); 
```

之后，您可以像往常一样运行测试：实例化您的视图模型，对其执行任何操作并断言。

我已经写[了更多](http://petermorlion.com/testing-knockout-with-mocha-and-without-a-browser/)关于它的内容，但本质上，这对我有用：

```
global.ko = require('../../Website/Scripts/knockout-3.4.0.js');

var MyViewModel = require('../../Website/Scripts/myViewModel.js').MyViewModel;

describe('MyViewModel', function() {
    var viewModel;

    beforeEach(function(){
        viewModel = new MyViewModel();
    });

    describe('...', function() {
        /* And so on */
    });
}); 
```

# android - Sherlock 操作栏缺少样式

> ID：11210299
> 
> 赞同：1
> 
> 时间：2012-06-26T15:04:45.333
> 
> 标签：android, actionbarsherlock

我正在尝试实现夏洛克操作栏，但我无法在清单中设置正确的主题，因为它根本不存在。教程说要放 android:theme="@style/Theme.Sherlock" 但我没有这个选择，为什么？我正确地将夏洛克库添加到我的项目中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T15:09:04.950

按照 ActionBarSherlock 网站上的教程，确保将项目添加为 Android 库并进行完整的清理 + 构建。这应该“正常工作”。

编辑 #1 尝试将其添加到 /values 中的主题.xml 文件中

```
<style name="Theme.MyCustomTheme" parent="@style/Theme.Sherlock"></style> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T15:07:55.427

[http://actionbarsherlock.com/usage.html](http://actionbarsherlock.com/usage.html)

根据[链接](https://stackoverflow.com/questions/9757400/setting-actionbarsherlock-theme-for-android-app)

：删除您创建的 JAR。将 ActionBarSherlock 作为 Android 库项目添加到您的应用中。虽然[ActionBarSherlock 文档](http://actionbarsherlock.com/usage.html)（请参阅“包含在您的项目中”）仅引用 Eclipse 和 Maven 来说明如何执行此操作，

根据[链接](https://stackoverflow.com/questions/10352628/cannot-resolve-style-theme-sherlock)

在java代码中做

```
@Override
public void onCreate(Bundle savedInstanceState) {
   if (Build.VERSION.SDK_INT < android.os.Build.VERSION_CODES.ICE_CREAM_SANDWICH){
        this.setTheme(com.actionbarsherlock.R.style.Theme_Sherlock);
   }
   super.onCreate(savedInstanceState);
   ... // MORE CODE ....
} 
```

# python - 为什么 zip() 会删除我的生成器的值？

> ID：11210300
> 
> 赞同：10
> 
> 时间：2012-06-26T15:04:55.520
> 
> 标签：python

当我注意到我的简单实现没有产生正确的结果时，我正在写[这个问题的答案。](https://stackoverflow.com/questions/11205037/detect-period-of-unknown-source)在寻找错误时，我注意到以下内容：

```
In [1]: import itertools
In [2]: gen = itertools.cycle((0,1,2))

In [3]: zip(gen, range(3))
Out[3]: [(0, 0), (1, 1), (2, 2)]

In [4]: zip(gen, range(3))
Out[4]: [(1, 0), (2, 1), (0, 2)] 
```

无论出于何种原因，`gen`的`next()`方法被称为一个额外的时间。为了说明这一点，我使用了以下内容：

```
class loudCycle(itertools.cycle):
    def next(self):
        n = super(loudCycle, self).next()
        print n
        return n

In [6]: gen = loudCycle((0,1,2))
In [7]: zip(gen, range(3))
0
1
2
0
Out[7]: [(0, 0), (1, 1), (2, 2)] 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-26T15:04:56.393

发生这种情况是因为[从左到右](http://docs.python.org/library/functions.html#zip)`zip`评估迭代器，这意味着，在三个步骤之后，它会调用并且只有然后才会调用（或类似的东西）并遇到 a 。为了解决这个问题，使用较短的（有限的）迭代作为最左边的参数：`next()``gen``iter(range(3))``StopIteration`

```
In [8]: zip(range(3), gen)
0
1
2
Out[8]: [(0, 0), (1, 1), (2, 2)] 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-26T15:51:23.383

[您的自我回答](https://stackoverflow.com/a/11210301/577088)完全正确，并提供了一个非常好的解决方案——*如果*其中一个论点`zip`总是比另一个短。但是，在您不知道哪个会更短的情况下，您可能会发现它`islice`很有用。`islice`如果您希望元组中的第一项来自生成器，还提供了一种简单的解决方法。在你的情况下，你可以这样做：

```
>>> import itertools
>>> gen = itertools.cycle(('a', 'b', 'c'))
>>> seq = range(3)
>>> zip(itertools.islice(gen, len(seq)), seq)
[('a', 0), ('b', 1), ('c', 2)]
>>> zip(itertools.islice(gen, len(seq)), seq)
[('a', 0), ('b', 1), ('c', 2)] 
```

在这种情况下，您的答案可能会更好——它肯定更简单——但我想我会把它作为补充。

# android - sencha touch 2 中的刷新组件

> ID：11210310
> 
> 赞同：1
> 
> 时间：2012-06-26T15:05:35.437
> 
> 标签：android, ios, sencha-touch-2

我在 sencha touch 2 中遇到了一个问题，即在我设置 HTML 后给定的组件没有被更新。我的意思是在完全相同的测试用例中，有时它会更新，有时不会。

我一直在寻找一种方法来强制组件重新绘制自己，但我似乎找不到方法。

此外，该组件在 android 上刷新得非常好，但在 iOS 上却没有。

那么问题来了，有没有办法在sencha touch 2中进行面板重绘？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T15:38:58.557

正如您所描述的，您的实施似乎没有错误。这有时是一个错误。

要强制重新渲染所有内容，此技巧可能会有所帮助：

```
yourComponent.hide();
yourComponent.show(); 
```

实际上它迫使 Sencha Touch 重新计算你的组件布局和子组件，以及内容。希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T15:36:58.483

在我看来，组件 ID 似乎有问题，请确保您没有重复的 ID。这是 ExtJS 和 Sencha Touch 中的一个非常常见的错误，并产生所描述的行为

# bash - Bash 匹配数字

> ID：11210314
> 
> 赞同：-2
> 
> 时间：2012-06-26T15:05:48.053
> 
> 标签：bash, sed, match

假设我有一个名为 output1 的文件

如何仅匹配第 3 到第 5 位的数字以便拥有“tpu”？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T15:11:25.993

在 bash 中：

```
i=output1
echo ${i:2:3} 
```

# objective-c - 排序 NSMutableArray 以错误结束

> ID：11210315
> 
> 赞同：0
> 
> 时间：2012-06-26T15:05:48.747
> 
> 标签：objective-c, nsmutablearray

我正在排序一个 NSMutableArray，它的 NSString 包含数字。
这是我正在使用的代码：

```
//creating mutable array
NSMutableArray *myArray = [NSMutableArray arrayWithObjects:@"4", @"2", @"7", @"8", nil];

//sorting
[myArray sortUsingComparator:^NSComparisonResult(NSString *str1, NSString *str2) {
    return [str1 compare:str2 options:(NSNumericSearch)];
}];

//logging
NSLog(@"%@", myArray); 
```

当我构建 Xcode 突出显示这段代码时出现错误： `}];`错误是：
`Incompatible block pointer types initializing 'int (^)(struct NSString *, struct NSString *)', expected 'NSComparator'`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T15:13:36.793

我认为您需要将其`id`用作块的参数类型，而不是 NSString。在 Apple 的[Blocks Short Practical Guide 中，](http://developer.apple.com/library/ios/#featuredarticles/Short_Practical_Guide_Blocks/_index.html)它说：

> Foundation 框架声明了用于比较两个项目的 NSComparator 类型：
> 
> ```
> typedef NSComparisonResult (^NSComparator)(id obj1, id obj2); 
> ```

# iphone - 输入 Ios 时格式化文本字段

> ID：11210316
> 
> 赞同：0
> 
> 时间：2012-06-26T15:05:56.033
> 
> 标签：iphone, objective-c, ios, xcode, cocoa-touch

我看过其他例子并尝试过

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string 
```

我不知道我做错了什么，我刚开始编写我的第一个 Iphone 应用程序

这就是我想要做的

我有 4 个文本字段，每个文本字段在键入时都有字母数量限制我使用以下代码完成了此操作

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string
{
int valid;
    NSString *cs2 = [textField.text stringByReplacingCharactersInRange:range withString:string];
//    int charCount = [cs2 length];

    if(textField == cvv){
        valid = 4;
    }else if(textField == cardName) {
        valid=26;
    }else if(textField == expDate) {
        valid=5;

//        if (charCount == 2 ) {
//            textField.text = [cs2 stringByAppendingString:@"/"];
//            textField.text = cs2; 
//            return YES;
//        }

    }else if(textField == acNumber) {
        valid=19;
    }

    return !([cs2 length] > valid); 
```

在这里工作正常，我有一个文本字段，用户在其中输入 Exp 日期并希望将其格式化为好像我输入 112 那么它应该显示为 01/12 如果我输入 2 那么它应该显示为 1122

我尝试检查文本字段值的长度是否为 2，然后附加一个 / 但是当我输入 12 时它给了我 11/22

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T15:54:53.040

就像 Nuzhat 建议的那样，日期选择器可能是一个好主意。这是一些可用于弹出日期选择器的代码。基本上，创建一个视图控制器，它是 DateController 的子类（下面的代码），并让它弹出文本字段。然后，在视图控制器中实现委托方法以更新文本字段。

```
//DateController.h

#import <UIKit/UIKit.h>
@protocol DateControllerDelegate
- (void) upDate:(NSDate*) date;
@end

@interface DateController : UIViewController <UIPickerViewDelegate>
- (IBAction)datePicker:(id)sender;

@property (weak, nonatomic) IBOutlet UIDatePicker *dateWheel;
@property (unsafe_unretained, nonatomic) id<DateControllerDelegate> delegate;
@end

//DateController.m
#import "DateController.h"

@implementation DateController
@synthesize dateWheel;
@synthesize delegate;

- (IBAction)datePicker:(id)sender 
{
    [delegate upDate:dateWheel.date];
}

@end

//Add this to your ViewController.h
#import "DateController.h"

//This line should look like this
@interface ViewController:UIViewController <DateControllerDelegate>

//Add this to your ViewController.m
- (void) upDate:(NSDate*) date
{

    textField.text = [[date description] substringToIndex:10];
}

- (void) prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if([segue.identifier isEqualToString:@"dateSegue"])
    {
        DateController *foo = segue.destinationViewController;
        foo.delegate = self;
    }
} 
```

然后你所要做的就是连接 segue 并在 storyboard 中将它命名为 dateSegue。

# php - 注册 PHP mySQL 后的登录/重定向

> ID：11210325
> 
> 赞同：0
> 
> 时间：2012-06-26T15:06:15.257
> 
> 标签：php, mysql, login, registration, session-variables

我正在尝试使用 php 创建用户注册/登录脚本，以便在注册后用户将被定向到显示其创建的用户名和电子邮件的页面。

我的用户名和电子邮件基于注册期间的两个输入 - 名字和姓氏，即用户输入：名字：john，姓氏：smith，然后他的用户名将是：john.smith 和 john.smith@domain .com，分别。

我使用这些代码做到了这一点

```
GetSQLValueString($_POST['firstname'] . '.' . $_POST['lastname'], "text")

GetSQLValueString($_POST['firstname'] . '.' . $_POST['lastname']. '@tatcs.com', "text") 
```

注册后，我尝试执行登录脚本，以便用户登录数据库并定向到“success.php”，其中显示他/她的用户名和电子邮件，用户名作为会话变量。

但是，当我测试它时，新用户成功添加到数据库中，但是success.php页面没有显示用户名和电子邮件，这意味着登录不成功。

我认为我的登录会话代码是问题所在，因为我没有用户名的文本字段，我不能简单地使用 $_POST('username')，而是我做了：

```
if (!isset($_SESSION)) {
  session_start();
}

$loginFormAction = $_SERVER['PHP_SELF'];
if (isset($_GET['accesscheck'])) {
  $_SESSION['PrevUrl'] = $_GET['accesscheck'];
}

if (isset($_POST['firstname'] ,$_POST['lastname'])) {
  $loginUsername=$_POST['firstname'] . '.' . $_POST['lastname'];
  $password=$_POST['password'];
  $MM_fldUserAuthorization = "";
  $MM_redirectLoginSuccess = "success.php";
  $MM_redirectLoginFailed = "error.php";
  $MM_redirecttoReferrer = false; 
```

我将名字和姓氏连接起来形成用户名作为 loginUsername 会话。

有没有另一种方法可以解决这个问题而不必添加另一个用户名文本字段？（因为我宁愿注册表单是简单的联系信息，只是让系统根据员工的名字和姓氏自动创建用户名。）

更新：我按照 mellamokb 的建议将登录代码放在插入代码的 if 语句中，但这对我不起作用。我认为 isset 代码可能是错误的，所以我将其更改为

```
 if (isset($_POST['firstname']) && isset( $_POST['lastname'])) 
```

但仍然无济于事。

请参阅下面的更新完整代码：

```
<?php require_once('../Connections/connSQL.php'); ?>
<?php

// *** Validate request to login to this site.
if (!isset($_SESSION)) {
  session_start();
}

$loginFormAction = $_SERVER['PHP_SELF'];
if (isset($_GET['accesscheck'])) {
  $_SESSION['PrevUrl'] = $_GET['accesscheck'];
}

if (!function_exists("GetSQLValueString")) {
function GetSQLValueString($theValue, $theType, $theDefinedValue = "", $theNotDefinedValue = "") 
{
  if (PHP_VERSION < 6) {
    $theValue = get_magic_quotes_gpc() ? stripslashes($theValue) : $theValue;
  }

  $theValue = function_exists("mysql_real_escape_string") ? mysql_real_escape_string($theValue) : mysql_escape_string($theValue);

  switch ($theType) {
    case "text":
      $theValue = ($theValue != "") ? "'" . $theValue . "'" : "NULL";
      break;    
    case "long":
    case "int":
      $theValue = ($theValue != "") ? intval($theValue) : "NULL";
      break;
    case "double":
      $theValue = ($theValue != "") ? doubleval($theValue) : "NULL";
      break;
    case "date":
      $theValue = ($theValue != "") ? "'" . $theValue . "'" : "NULL";
      break;
    case "defined":
      $theValue = ($theValue != "") ? $theDefinedValue : $theNotDefinedValue;
      break;
  }
  return $theValue;
}
}

$editFormAction = $_SERVER['PHP_SELF'];
if (isset($_SERVER['QUERY_STRING'])) {
  $editFormAction .= "?" . htmlentities($_SERVER['QUERY_STRING']);
}

if ((isset($_POST["MM_insert"])) && ($_POST["MM_insert"] == "register")) {
  $insertSQL = sprintf("INSERT INTO member (m_firstname, m_lastname, m_username, m_password, m_email, m_phone, m_cellphone, m_address) VALUES (%s, %s, %s, %s, %s, %s, %s, %s)",
                       GetSQLValueString($_POST['firstname'], "text"),
                       GetSQLValueString($_POST['lastname'], "text"),
                       GetSQLValueString($_POST['firstname'] . '.' . $_POST['lastname'], "text"),
                       GetSQLValueString($_POST['password'], "text"),
                       GetSQLValueString($_POST['firstname'] . '.' . $_POST['lastname']. '@tatcs.com', "text"),
                       GetSQLValueString($_POST['homephone'], "text"),
                       GetSQLValueString($_POST['cellphone'], "text"),
                       GetSQLValueString($_POST['address'], "text"));

  mysql_select_db($database_connSQL, $connSQL);
  $Result1 = mysql_query($insertSQL, $connSQL) or die(mysql_error());

  if (isset($_POST['firstname']) && isset( $_POST['lastname'])) {
  $loginUsername=$_POST['firstname'] . '.' . $_POST['lastname'];
  $password=$_POST['password'];
  $MM_fldUserAuthorization = "";
  $MM_redirectLoginSuccess = "success.php";
  $MM_redirectLoginFailed = "error.php";
  $MM_redirecttoReferrer = false;
  mysql_select_db($database_connSQL, $connSQL);

  $LoginRS__query=sprintf("SELECT m_username, m_password FROM member WHERE m_username=%s AND m_password=%s",
    GetSQLValueString($loginUsername, "text"), GetSQLValueString($password, "text")); 

  $LoginRS = mysql_query($LoginRS__query, $connSQL) or die(mysql_error());
  $loginFoundUser = mysql_num_rows($LoginRS);
  if ($loginFoundUser) {
     $loginStrGroup = "";

    if (PHP_VERSION >= 5.1) {session_regenerate_id(true);} else {session_regenerate_id();}
    //declare two session variables and assign them
    $_SESSION['MM_Username'] = $loginUsername;
    $_SESSION['MM_UserGroup'] = $loginStrGroup;       

    if (isset($_SESSION['PrevUrl']) && false) {
      $MM_redirectLoginSuccess = $_SESSION['PrevUrl'];  
    }
    header("Location: " . $MM_redirectLoginSuccess );
  }
  else {
    header("Location: ". $MM_redirectLoginFailed );
  }
}

  $insertGoTo = "success.php";
  if (isset($_SERVER['QUERY_STRING'])) {
    $insertGoTo .= (strpos($insertGoTo, '?')) ? "&" : "?";
    $insertGoTo .= $_SERVER['QUERY_STRING'];
  }
  header(sprintf("Location: %s", $insertGoTo));
}

?> 
```

我不知道为什么我被否决了，我是一个尝试学习的初学者，我真的希望有人能指出我正确的方向。

抱歉发了这么长的帖子，提前感谢！我真的很感谢你的帮助！

-艾伦

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T20:09:04.713

解决了。它实际上与插入后的重定向页面有关。感谢你的帮助！

# sql - SQL Server 2008 - 电子邮件通知

> ID：11210327
> 
> 赞同：2
> 
> 时间：2012-06-26T15:06:23.700
> 
> 标签：sql, sql-server, tsql, sql-server-2008

我在本地有一个 SQL 服务器/数据库，并通过 ip 等访问...

我想知道的是如何直接从服务器发送电子邮件（当 n 发生时）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T15:09:21.160

您可以使用`Database Mail`. 要通过 SQL Server 发送电子邮件，您可以使用以下存储过程：

`sp_send_dbmail`

```
EXEC msdb.dbo.sp_send_dbmail
@profile_name = 'Adventure Works Administrator',
@recipients = 'danw@Adventure-Works.com',
@body = 'The stored procedure finished successfully.',
@subject = 'Automated Success Message' ; 
```

或者如何配置`SQL agent to send mail`

[http://msdn.microsoft.com/en-us/library/ms186358.aspx](http://msdn.microsoft.com/en-us/library/ms186358.aspx)

*其他参考资料*

[http://msdn.microsoft.com/en-us/library/ms190307.aspx](http://msdn.microsoft.com/en-us/library/ms190307.aspx)

[http://msdn.microsoft.com/en-us/library/ms177580.aspx](http://msdn.microsoft.com/en-us/library/ms177580.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T15:09:03.047

[这](http://blog.sqlauthority.com/2008/08/23/sql-server-2008-configure-database-mail-send-email-from-sql-database/)解释了如何设置所有内容

然后你需要为 N 碰巧发送电子邮件时编写一个触发器

# jquery - 如何在Jquery中遍历表并添加一个类？

> ID：11210330
> 
> 赞同：0
> 
> 时间：2012-06-26T15:06:29.493
> 
> 标签：jquery, jquery-validate

我有一个简单的两行表。第一列是必需的，但其他不是；**但是，我希望它们成对被要求**。因此，如果用户为 Quantity3 输入一个值，那么现在也应该需要 Size3。

作为小提琴：http: [//jsfiddle.net/NaRts/7/](http://jsfiddle.net/NaRts/7/)

```
<tr>
    <td><input name="qty1[492]" class="qty required" type="text"></td>
    <td><input name="qty2[492]" class="qty" type="text"></td>
    <td><input name="qty3[492]" class="qty" type="text"></td>
</tr><tr>
    <td><input name="size1[492]" type="text" class="size required" ></td>
    <td><input name="size2[492]" type="text" class="size" ></td>
    <td><input name="size3[492]" type="text" class="size" ></td>
</tr> 
```

我拥有的简单 jQuery 是：

```
$('.qty').keyup(function() {
    var s       = $(this).attr('name');            // = qty3[418]
    var qtyID   = s.replace(/[^1-9\[\]]/g, "");    // = 3[418] 
    var SizeID  = "size" + qtyID;

    var $sizeInput = $(this).closest('tr').next().find(SizeID);
    $sizeInput.css('background-color', 'green');
    $sizeInput.addClass('required'); 

   //I tried this too but it didn't work 
   //$(this).parent().find(SizeID).addClass('required');                

});​ 
```

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T15:27:11.500

**编辑：**删除 .each

尝试这个：

```
$(document).ready(function(){
      $('.qty').keypress(function(){
      var s       = $(this).attr('name');
      var qtyID   = s.replace(/[^1-9\[\]]/g, "");  
      var sizeID  = "size" + qtyID;
      var sizeInput = $("input[name='" + sizeID + "']");    
      $(sizeInput).css('background-color', 'green');
      $(sizeInput).addClass('required');
    });  
}); 
```

# android - 从 ListView 的 Eclipse 图形编辑器预览中删除“项目 x”

> ID：11210334
> 
> 赞同：3
> 
> 时间：2012-06-26T15:06:38.917
> 
> 标签：android, eclipse, android-layout

我创建了一个自定义 xml 文件，其中包含一些构成 ListView 中的行的元素。我已将 ListView 的预览设置为此 xml 文件。我不知道如何摆脱默认的“项目 1”、“项目 2”、“项目 3”......但是。

有没有人知道可能导致这种情况的原因？

这是代码和屏幕截图：

**my_custom_list.xml**

```
 <?xml version="1.0" encoding="utf-8"?>
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
         android:orientation="vertical"
         android:layout_width="match_parent"
         android:layout_height="match_parent"
         android:paddingLeft="8dp"
         android:paddingRight="8dp">

     <ListView android:id="@android:id/list"
               android:layout_width="match_parent"
               android:layout_height="match_parent"
               android:layout_weight="1"
               android:drawSelectorOnTop="false">
         <!-- Preview: listitem=@layout/my_custom_list_row -->
     </ListView>
 </LinearLayout> 
```

**my_custom_list_row.xml**

```
 <?xml version="1.0" encoding="utf-8"?>
  <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:padding="6dip"
    android:orientation="horizontal">

    <CheckBox
        android:id="@+id/icon"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:layout_marginRight="6dip"
         />

    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:padding="6dip"
        android:orientation="vertical" >

        <TextView  
            android:id="@+id/secondLine"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" 
            android:singleLine="true"
            android:ellipsize="marquee"
            android:text="Senders Name"
            android:textStyle="bold" />

        <TextView
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"   
            android:gravity="center_vertical"
            android:text="Subject"

            android:textStyle="italic" />

        <TextView
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:lines="3"
            android:gravity="center_vertical"
            android:text="Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla viverra mattis nulla nec sollicitudin." />

      </LinearLayout>

</LinearLayout> 
```

![列表截图](../Images/6d7d1fe1123383071b51c55dea19c62f.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T15:48:10.283

不，这似乎不可能，或者这是我一直遇到的 ADT 插件中的一个错误。我只是通过预览行来确保它看起来不错。如果您需要渲染 UI 图像，您可以使用[Pencil之类的工具并将](http://pencil.evolus.vn/en-US/Home.aspx)[Android Stencils](http://pencil.evolus.vn/en-US/Downloads/Stencils.aspx)导入其中。

# forms - 茧宝石安装/使用？

> ID：11210338
> 
> 赞同：4
> 
> 时间：2012-06-26T15:06:52.767
> 
> 标签：forms, nested, has-many, formtastic, cocoon-gem

我正在尝试将 cocoon 用于嵌套 ajax 表单以及 formtastic

我的导轨版本

```
 Rails 3.2.3 
```

我已将 gem "cocoon" 放入我的 gemfile 并进行了捆绑安装

然后在我的元素/_form.html.erb 中：

```
 <%= semantic_form_for @element do |f| %>

    <%= f.inputs do %>

    <%= f.input :projects, :label_method => :projectname%>

    <%= f.semantic_fields_for :experiments do |exp| %>
           <% render 'experiment_fields', :f => exp %>    
           <%= link_to_add_association "Add experiment", f, :experiments%>
    <%end%>   

    <% end %>
    <%= f.actions :submit, :cancel %>    

  <% end %> 
```

与元素/_experiment_fields.html.erb ：

```
 <div class='nested-fields'> 
   <%= f.input :exptype %>
   <%= link_to_remove_association "remove experiment", f %>
 </div> 
```

这不会产生错误，但不会显示嵌套链接或表单

然后我添加到 assets/application.js：

```
 //= require cocoon 
```

和 layout/application.html.erb

```
 <%= javascript_include_tag :cocoon %> 
```

这会产生错误：

```
 couldn't find file 'cocoon' 
```

我在茧安装中错过了什么吗？有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-03T05:00:22.987

在重新启动我的 Rails 服务器之前，我刚刚在资产管道中添加了 //= require cocoon 后出现了这个错误。显然，此时您可能已经重新启动了您的 Rails 服务器，但是为了其他任何出现此错误的人，请尝试重新启动 Rails。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T22:03:30.110

在你的`layout/application.html.erb`你应该写

```
= javascript_include_tag "application" 
```

而不是`:cocoon`（仅适用于较旧的 rails 3.0.x）。将`application.js`自动包含茧 javascript 文件（资产管道）。

希望这可以帮助。

# ruby-on-rails - Rails 会话在 DELETE 请求时被破坏

> ID：11210346
> 
> 赞同：3
> 
> 时间：2012-06-26T15:07:19.287
> 
> 标签：ruby-on-rails, devise, logout, http-delete

> **可能重复：**
> [警告：无法验证 CSRF 令牌真实性轨道](https://stackoverflow.com/questions/7203304/warning-cant-verify-csrf-token-authenticity-rails)

我使用 JQuery AJAX 发送 DELETE HTTP 请求。URL (/myitems/1234) 与注销 URL (/users/sign_out) 不同，但是在请求之后我发现用户会话被破坏了。

我正在使用设计身份验证 gem。

这是日志：

```
Started DELETE "/myitems/2538" for 127.0.0.1 at 2012-06-26 19:09:49 +0400
Processing by MyItemsController#destroy as */*
  Parameters: {"id"=>"2538"}
WARNING: Can't verify CSRF token authenticity
  User Load (1.0ms)  SELECT "users".* FROM "users" WHERE "users"."id" = 6 LIMIT 1
   (0.0ms)  BEGIN
   (0.0ms)  UPDATE "users" SET "remember_token" = NULL,
            "remember_created_at" = NULL,
            "updated_at" = '2012-06-26 15:09:49.055774'
            WHERE "users"."id" = 6
   (1.0ms)  COMMIT
Completed 401 Unauthorized in 7ms 
```

routes.rb 包含一行：

```
resources :myitems 
```

仅此而已。

控制器的删除代码：

```
def destroy
   puts 'delete'
end 
```

**更新**

POST 请求也是如此。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T16:07:33.907

问题（正如@Thilo 在评论中所暗示的）是您的 AJAX 请求不包含 CSRF 令牌。如果 CSRF 令牌不匹配，Rails 的默认行为是清除会话。这就是您的会话被删除的原因。

解决方案：

1) 在您的 AJAX 请求中传递 CSRF 令牌。根据您的需要，您可以利用 Rails 的 UJS 代码自动添加适当的 CSRF 标头。

2) 跳过特定控制器操作的真实性令牌验证，尽管这可能会产生负面的安全影响。

我将其标记为社区 wiki，以便其他人可以改进它，因为我现在没有时间。

# iphone - UINavigationController -- 无法开始

> ID：11210348
> 
> 赞同：-2
> 
> 时间：2012-06-26T15:07:27.593
> 
> 标签：iphone, objective-c, ios

我在尝试启动导航控制器时遇到了可怕的麻烦。

基本上，我希望能够将新视图推送到控制器并点击后退按钮等。

这是我到目前为止的代码：

TestAppDelegate.h：

```
#import <UIKit/UIKit.h>

@interface TestAppDelegate : UIResponder <UIApplicationDelegate>

@property (strong, nonatomic) UIWindow *window;

@end 
```

TestAppDelegate.m：

```
#import "TestAppDelegate.h"

@implementation TestAppDelegate

@synthesize window = _window;

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    // Override point for customization after application launch.
    self.window.backgroundColor = [UIColor greenColor];
    [self.window makeKeyAndVisible];
    return YES;
}

- (void)applicationWillResignActive:(UIApplication *)application
{
    /*
     Sent when the application is about to move from active to inactive state. This can occur for certain types of temporary interruptions (such as an incoming phone call or SMS message) or when the user quits the application and it begins the transition to the background state.
     Use this method to pause ongoing tasks, disable timers, and throttle down OpenGL ES frame rates. Games should use this method to pause the game.
     */
}

- (void)applicationDidEnterBackground:(UIApplication *)application
{
    /*
     Use this method to release shared resources, save user data, invalidate timers, and store enough application state information to restore your application to its current state in case it is terminated later. 
     If your application supports background execution, this method is called instead of applicationWillTerminate: when the user quits.
     */
}

- (void)applicationWillEnterForeground:(UIApplication *)application
{
    /*
     Called as part of the transition from the background to the active state; here you can undo many of the changes made on entering the background.
     */
}

- (void)applicationDidBecomeActive:(UIApplication *)application
{
    /*
     Restart any tasks that were paused (or not yet started) while the application was inactive. If the application was previously in the background, optionally refresh the user interface.
     */
}

- (void)applicationWillTerminate:(UIApplication *)application
{
    /*
     Called when the application is about to terminate.
     Save data if appropriate.
     See also applicationDidEnterBackground:.
     */
}

@end 
```

但是我现在该怎么办？

我的意思是我应该把保存 NavigationController 的 .xib 文件放在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T15:11:10.237

这是[`UINavigationController`类参考](http://developer.apple.com/library/ios/#documentation/uikit/reference/UINavigationController_Class/Reference/Reference.html)。其中链接了几个使用导航控制器的示例项目。随意下载它们并浏览它们以了解您应该如何使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T15:13:25.297

使用 xcode 中的故事板功能。它使这就像将 NavigationController 拖放到情节提要上一样简单。

这个[链接](http://www.raywenderlich.com/5138/beginning-storyboards-in-ios-5-part-1)对我帮助很大。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T15:13:28.127

只需找到一个教程并运行它。像这个：

[http://mobileorchard.com/how-to-make-an-iphone-app-part-4-navigation-controller/](http://mobileorchard.com/how-to-make-an-iphone-app-part-4-navigation-controller/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T15:14:19.313

创建新文件 > UIViewController 子类 > 使用 Xib 检查用户界面

```
#import <UIKit/UIKit.h>

@class WhatEverFileNameClass
@interface TestAppDelegate : UIResponder <UIApplicationDelegate>
@property (strong, nonatomic) UIWindow *window;
@property (strong, nonatomic) WhatEverFileNameClass *viewController;

@end 
```

.m

```
#import "TestAppDelegate.h"

@implementation TestAppDelegate

@synthesize window = _window;
@synthesize viewController = _viewController;

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
// Override point for customization after application launch.
self.viewController = [[WhatEverFileNameClass alloc] initWithNibName:@"WhatEverFileNameClass" bundle:nil];
self.window.rootViewController = self.viewController;
[self.window makeKeyAndVisible];
return YES;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-26T15:19:59.580

首先创建您的视图控制器（新建文件 > UIViewController 子类 > 检查使用 Xib 获取用户界面）

然后设置你的`UINavigationController`：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {

    ViewController *vc = [[ViewController alloc] initWithNibName:@"ViewController" bundle:nil];
    UINavigationController *navController=[[UINavigationController alloc]initWithRootViewController:vc];
    self.window.rootViewController = navController;
    [self.window makeKeyAndVisible];
    return YES;

} 
```

# asp-classic - 读取 excel 文件后刷新页面会产生错误

> ID：11210352
> 
> 赞同：1
> 
> 时间：2012-06-26T15:07:37.367
> 
> 标签：asp-classic, vbscript

我正在使用我在网上找到的这段代码读取一个 excel 文件：

```
<% Option Explicit %>
<html>
<body>
<%
Dim objConn, objRS, strSQL
Dim x, curValue
Dim valuesArray()

strSQL = "SELECT * FROM A1:A200"

Set objConn = Server.CreateObject("ADODB.Connection")
objConn.Open "DRIVER={Microsoft Excel Driver (*.xls)}; IMEX=1; HDR=NO; "&_
    "Excel 8.0; DBQ=" & Server.MapPath("myExcel.xls") & "; "

Set objRS=objConn.Execute(strSQL)

Response.Write("<table border=""1"">")
Response.Write("<tr>")

For x=0 To objRS.Fields.Count-1
   Response.Write("<th>" & objRS.Fields(x).Name & "</th>")
Next

Response.Write("</tr>")

Do Until objRS.EOF

    Response.Write("<tr>")

    For x=0 To objRS.Fields.Count-1
        curValue = objRS.Fields(x).Value
        If IsNull(curValue) Then
            curValue="N/A"
        End If
        curValue = CStr(curValue)
        valuesArray(x) = curValue
        Response.Write("<td>" & valuesArray(x) & "</td>")
    Next
    Response.Write("</tr>")
    objRS.MoveNext

Loop

objRS.Close
Response.Write("</table>")
objConn.Close

Set objRS=Nothing
Set objConn=Nothing
%>
</body>
</html> 
```

在第一次访问该页面时，excel 文件被正确读取。但如果我刷新页面，我会收到此错误：

> 提供程序错误“80004005”
> 
> 未指定的错误

你会碰巧知道是什么原因造成的，我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T15:12:56.947

大多数时候这个错误是因为你刷新太快了；如果您要等待 10 秒左右，它不应该给您该错误。尽管 ASP/ADO 应用程序支持多用户访问，但 Excel 电子表格不支持。因此，这种查询和更新信息的方法不支持多用户并发访问。

请参阅[http://support.microsoft.com/kb/q195951/](http://support.microsoft.com/kb/q195951/)

# sql-server - 将保留时间添加到每小时 SQL 作业？

> ID：11210353
> 
> 赞同：2
> 
> 时间：2012-06-26T15:07:44.857
> 
> 标签：sql-server, database, sql-server-2008-r2

我每天早上 7 点到晚上 7 点之间每小时运行一次数据库备份，每个文件都有一个唯一的名称。有没有办法可以增加 14 天的保留时间？

```
DECLARE @FileName AS VARCHAR(120)
DECLARE @Date AS CHAR(19)
SET @Date = CONVERT(CHAR(19), GETDATE(), 120)
SET @FileName = N'\\10.250.145.26\hfnfs\Trans\Hourly\South_RP' + @Date + '.bak'
BACKUP DATABASE [South_RP] TO DISK =@FileName 
```

文件名 示例 South_RP2012-06-26 11:00:00.bak

*编辑这是 SQL 服务器 2008 R2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T15:20:12.357

我不会使用 SQL Server 来执行此操作。相反，我会设置一个运行类似于以下批处理文件的计划任务：

```
cd /d "%~dp0"
forfiles -d-14 -m*.bak -c"cmd /c del @PATH\@FILE" 
```

改编自[这个答案](https://stackoverflow.com/a/51069/106302)。按照我上面编写批处理文件的方式，您需要将它放在与`.bak`文件相同的目录中。 **请使用`echo`first 而不是`del`.**

要使其工作，您需要从[Microsoft 的 FTP 站点](ftp://ftp.microsoft.com/ResKit/y2kfix/x86/)`forfiles.exe`获取该实用程序并将其放置在您的目录中。`C:\WINDOWS\system32`

如果您*真的*想从 SQL Server 启动此命令，您可以使用[该`xp_cmdshell`过程](http://www.kodyaz.com/articles/delete-file-from-sql-server-xp-cmdshell-ole-automation-procedures.aspx)运行删除旧项目的批处理文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T15:15:01.593

您需要设置一个 cron 作业/计划任务来简单地删除任何超过 14 天的备份。

# c# - 如果字符串匹配，则从图片框中卸载图像

> ID：11210354
> 
> 赞同：2
> 
> 时间：2012-06-26T15:07:45.520
> 
> 标签：c#, winforms

我有两个列表框，允许用户将项目从第一个列表框传输到第二个列表框

当用户单击按钮时，它会比较所选项目，如果匹配特定字符串，则将图像加载到图片框中。

我做了一个删除添加到第二个列表框的当前项目的功能，但我想以某种方式读取选择和删除的项目。我以为我可以放一些类似的东西

`if(listBox2.Items.RemoveAt(listBox2.SelectedIndex="String") { picturebox.Image=null; }`

示例代码

```
 private void button2_Click(object sender, EventArgs e)
    {
        listBox2.Items.RemoveAt(listBox2.SelectedIndex); 
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T15:32:43.063

目前尚不清楚您要做什么。
但是，如果您想根据在列表框中选择的项目从图片框中删除图像，也许这可能会有所帮助：

```
private void button2_Click(object sender, EventArgs e)     
{    
     if(listbox2.SelectedIndex >= 0)
     {
         string curItem = listBox2.Items[listbox2.SelectedIndex].ToString();
         if(curItem == "SomeOtherString")
         {
             listBox2.Items.RemoveAt(listBox2.SelectedIndex);      
             picturebox.Image.Dispose();
             picturebox.Image = null; // Not really necessary
         }
     }
} 
```

# java - Java：将字符串转换为压缩十进制

> ID：11210356
> 
> 赞同：5
> 
> 时间：2012-06-26T15:07:50.613
> 
> 标签：java, byte, ascii, ibm-midrange, ebcdic

新来的！

情况：我正在处理一个需要与 AS/400 服务器通信的项目。我的任务基本上是处理将发送到 AS/400 服务器的请求。为此，所有用户输入都应以 EDCDIC 字节为单位。

问题：
我已经设法使用下面的代码将压缩小数转换为字符串，[在这个论坛上](http://www.coderanch.com/t/411222/java/java/Packed-decimal-conversion-Java)找到：

```
public class PackedDecimal {
    public static long parse(byte[] pdIn) throws Exception {
        // Convert packed decimal to long
        final int PlusSign = 0x0C; // Plus sign
        final int MinusSign = 0x0D; // Minus
        final int NoSign = 0x0F; // Unsigned
        final int DropHO = 0xFF; // AND mask to drop HO sign bits
        final int GetLO = 0x0F; // Get only LO digit
        long val = 0; // Value to return

        for (int i = 0; i < pdIn.length; i++) {
            int aByte = pdIn[i] & DropHO; // Get next 2 digits & drop sign bits
            if (i == pdIn.length - 1) { // last digit?
                int digit = aByte >> 4; // First get digit
                val = val * 10 + digit;
                // System.out.println("digit=" + digit + ", val=" + val);
                int sign = aByte & GetLO; // now get sign
                if (sign == MinusSign)
                    val = -val;
                else {
                    // Do we care if there is an invalid sign?
                    if (sign != PlusSign && sign != NoSign)
                        throw new Exception("OC7");
                }
            } else {
                int digit = aByte >> 4; // HO first
                val = val * 10 + digit;
                // System.out.println("digit=" + digit + ", val=" + val);
                digit = aByte & GetLO; // now LO
                val = val * 10 + digit;
                // System.out.println("digit=" + digit + ", val=" + val);
            }
        }
        return val;
    } // end parse()
      // Test the above

    public static void main(String[] args) throws Exception {
        byte[] pd = new byte[] { 0x19, 0x2C }; // 192
        System.out.println(PackedDecimal.parse(pd));
        pd = new byte[] { (byte) 0x98, 0x44, 0x32, 0x3D }; // -9844323
        System.out.println(PackedDecimal.parse(pd));
        pd = new byte[] { (byte) 0x98, 0x44, 0x32 }; // invalid sign
        System.out.println(PackedDecimal.parse(pd));
    }
} 
```

我现在的问题是我必须再次将这些字符串值转换为 EBCDIC 字节，以便 AS/400 服务器能够理解它。我计划使用 Silverlake 文档中指定的格式构建请求（原始字节）。构建请求后，我计划使用存储我的请求（使用 setter 和 getter）的 POJO 手动更改该请求中的值，这样我就可以像`request.setField1("Stuff".getBytes(Charset.forName("Cp1047")))`.

我在位、字节和半字节方面没有太多经验。我希望有人可以帮助我。

在我们的代码中，我们发现了一个压缩十进制，它由 5 个字节组成。它类似于 = {00 00 00 00 0F}。我使用从上面的代码中得到的方法进行转换，得到的值为 0。现在，我想将这个 0 转换回其原始形式，其原始字节大小为 5。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T15:45:08.000

[IBM Toolbox for Java 和 JTOpen](http://www-03.ibm.com/systems/i/software/toolbox/)库正是为此目的提供了[数据转换类。](http://publib.boulder.ibm.com/infocenter/iseries/v7r1m0/topic/rzahh/dtad.htm)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T18:07:44.663

这是我的长到压缩十进制方法的版本。

```
public class PackedDecimal {

    public static byte[] format(long number, int bytes) {
        byte[] b = new byte[bytes];

        final byte minusSign = 0x0D; // Minus
        final byte noSign = 0x0F; // Unsigned

        String s = Long.toString(number);
        int length = s.length();
        boolean isNegative = false;

        if (s.charAt(0) == '-') {
            isNegative = true;
            s = s.substring(1);
            length--;
        }

        int extraBytes = length - bytes + 1;

        if (extraBytes < 0) {
            // Pad extra byte positions with zero
            for (int i = 0; i < -extraBytes; i++) {
                b[i] = 0x00;
            }
        } else if (extraBytes > 0) {
            // Truncate the high order digits of the number to fit
            s = s.substring(extraBytes);
            length -= extraBytes;
            extraBytes = 0;
        }

        // Translate the string digits into bytes
        for (int i = 0; i < length; i++) {
            String digit = s.substring(i, i + 1);
            b[i - extraBytes] = Byte.valueOf(digit);
        }

        // Add the sign byte
        if (isNegative) {
            b[bytes - 1] = minusSign;
        } else {
            b[bytes - 1] = noSign;
        }

        return b;
    }

    public static void main(String[] args) {
        long number = -456L;
        byte[] b = PackedDecimal.format(number, 5);
        System.out.println("Number: " + number + ", packed: " + byteToString(b));

        number = 0L;
        b = PackedDecimal.format(number, 5);
        System.out.println("Number: " + number + ", packed: " + byteToString(b));

        number = 5823L;
        b = PackedDecimal.format(number, 5);
        System.out.println("Number: " + number + ", packed: " + byteToString(b));

        number = 123456L;
        b = PackedDecimal.format(number, 5);
        System.out.println("Number: " + number + ", packed: " + byteToString(b));
    }

    public static String byteToString(byte[] b) {
        StringBuilder sb = new StringBuilder();
        for (int i = 0; i < b.length; i++) {
            sb.append("0x");
            sb.append(Integer.toHexString((int) b[i]).toUpperCase());
            sb.append(" ");
        }
        return sb.toString();
    }

} 
```

这是测试结果。

```
Number: -456, packed: 0x0 0x4 0x5 0x6 0xD 
Number: 0, packed: 0x0 0x0 0x0 0x0 0xF 
Number: 5823, packed: 0x5 0x8 0x2 0x3 0xF 
Number: 123456, packed: 0x3 0x4 0x5 0x6 0xF 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T14:41:54.907

我遇到了类似的问题...

第一篇文章中的类用于解码/解析 PackedDecimals 工作正常......但 Gilbert Le Blancs 答案中的代码没有产生有效的输出。

所以我修复了他的代码......

```
public class PackedDecimal {
    private static final int PlusSign = 0x0C; // Plus sign
    private static final int MinusSign = 0x0D; // Minus
    private static final int NoSign = 0x0F; // Unsigned
    private static final int DropHO = 0xFF; // AND mask to drop HO sign bits
    private static final int GetLO = 0x0F; // Get only LO digit

    public static long parse(byte[] pdIn) throws Exception {
        long val = 0; // Value to return

        for (int i = 0; i < pdIn.length; i++) {
            int aByte = pdIn[i] & DropHO; // Get next 2 digits & drop sign bits
            if (i == pdIn.length - 1) { // last digit?
                int digit = aByte >> 4; // First get digit
                val = val * 10 + digit;
                log("digit=" + digit + ", val=" + val);
                int sign = aByte & GetLO; // now get sign
                if (sign == MinusSign)
                    val = -val;
                else {
                    // Do we care if there is an invalid sign?
                    if (sign != PlusSign && sign != NoSign) {
                        System.out.println();
                        for (int x = 0; x < pdIn.length; x++) {
                            System.out.print(Integer.toString(pdIn[x] & 0x000000ff, 16));
                        }
                        System.out.println();
                        throw new Exception("OC7");
                    }
                }
            } else {
                int digit = aByte >> 4; // HO first
                val = val * 10 + digit;
                log("digit=" + digit + ", val=" + val);
                digit = aByte & GetLO; // now LO
                val = val * 10 + digit;
                log("digit=" + digit + ", val=" + val);
            }
        }
        return val;
    }

    public static byte[] format(long number, int byteCount) {
        byte[] bytes = new byte[byteCount];

        String data = Long.toString(number);
        int length = data.length();
        boolean isNegative = false;

        if (data.charAt(0) == '-') {
            isNegative = true;
            data = data.substring(1);
            length--;
        }

        if (length % 2 == 0) {
            data = "0" + data;
            length++;
        }

        int neededBytes = (int) (((length + 1) / 2f) + 0.5f);

        int extraBytes = neededBytes - byteCount;
        if (extraBytes < 0) {
            // Pad extra byte positions with zero
            for (int i = 0; i < -extraBytes; i++) {
                bytes[i] = 0x00;
            }
        } else if (extraBytes > 0) {
            // Truncate the high order digits of the number to fit
            data = data.substring(extraBytes);
            length -= extraBytes;
            extraBytes = 0;
        }

        // Translate the string digits into bytes
        for (int pos = 0; pos <= length - 1; pos++) {
            String digit = data.substring(pos, pos + 1);
            int now = (pos / 2) - extraBytes;

            if (pos % 2 == 0) { // High
                bytes[now] = (byte) (Byte.valueOf(digit) << 4);
                log("HIGH " + digit);
            } else { // Low
                bytes[now] = (byte) (bytes[now] | (Byte.valueOf(digit) & 0x0f));
                log("LOW  " + digit);
            }
        }

        // Add the sign byte
        if (isNegative) {
            bytes[byteCount - 1] = (byte) (bytes[byteCount - 1] | MinusSign);
        } else {
            bytes[byteCount - 1] = (byte) (bytes[byteCount - 1] | PlusSign);
        }

        return bytes;
    }

    private static void log(String string) {
        // System.out.println(string);
    }

    public static void main(String[] args) throws Exception {
        long price;
        byte[] format;

        price = 44981;
        format = PackedDecimal.format(price, 5);
        System.out.println("Input: " + price);
        System.out.println("Bytes: " + byteToString(format));
        System.out.println("Result: " + PackedDecimal.parse(format));
        System.out.println("---------");

        price = 4498;
        format = PackedDecimal.format(price, 4);
        System.out.println("Input: " + price);
        System.out.println("Bytes: " + byteToString(format));
        System.out.println("Result: " + PackedDecimal.parse(format));
        System.out.println("---------");

        price = 1337;
        format = PackedDecimal.format(price, 3);
        System.out.println("Input: " + price);
        System.out.println("Bytes: " + byteToString(format));
        System.out.println("Result: " + PackedDecimal.parse(format));
        System.out.println("---------");
    }

    public static String byteToString(byte[] b) {
        StringBuilder sb = new StringBuilder();
        for (int i = 0; i < b.length; i++) {
            int curByte = b[i] & 0xFF;
            sb.append("0x");
            if (curByte <= 0x0F) {
                sb.append("0");
            }
            sb.append(Integer.toString(curByte, 16));
            sb.append(" ");
        }
        return sb.toString().trim();
    }
} 
```

结果：

```
Input: 44981
Bytes: 0x00 0x00 0x44 0x98 0x1c
Result: 44981
---------
Input: 4498
Bytes: 0x00 0x04 0x49 0x8c
Result: 4498
---------
Input: 1337
Bytes: 0x01 0x33 0x7c
Result: 1337
--------- 
```

玩得开心

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-02T20:20:07.050

这是我的简单解决方案：它将字符串转换为正压缩数字。

**实用程序类：**

```
public class StringToPacked {

    public static byte[] stringToPacked(String number){
        int length = number.length();
        int remainder = length % 2;
        if(remainder==0)number ="0" + number;
        int quo = length / 2;
        byte result[] = new byte[quo+1];
        for(int i=0,j=0;i<quo;i++,j=j+2){
            int a = Integer.parseInt(number.substring(j,j+1));
            int b = Integer.parseInt(number.substring(j+1,j+2));
            a = a<<4;
            int c = a|b;
            result[i]=(byte)c;
        }
        int a = Integer.parseInt(number.substring(number.length()-1,number.length()));
        a = a<<4;
        int b = 12;
        int c = a|b;
        result[quo]=(byte)c;
        return result;
    }

    public static String displayHex(byte number[]){
        char array[] ="0123456789ABCDF".toCharArray();
        char result[]=new char[2*number.length];
        for(int i=0;i<number.length;i++){
            result[2*i]=array[number[i]>>4 & 0x0f];
            result[2*i+1]=array[number[i] & 0x0f];
        }
        String okay = new String(result);
        return okay;
    }
} 
```

**主要课程：**

```
public class Packedtest {
     public static void main(String[] args) {
        // TODO Auto-generated method stub 

        String number = "123456";
        System.out.println(StringToPacked.stringToPacked(number));
        byte b1[]=StringToPacked.stringToPacked(number);
        String C1 =StringToPacked.displayHex(b1);
        System.out.println(number);
        System.out.println(C1);

        number = "12";
        System.out.println(StringToPacked.stringToPacked(number));
        b1=StringToPacked.stringToPacked(number);
        C1 =StringToPacked.displayHex(b1);
        System.out.println(number);
        System.out.println(C1);

        number = "123";
        System.out.println(StringToPacked.stringToPacked(number));
        b1=StringToPacked.stringToPacked(number);
        C1 =StringToPacked.displayHex(b1);
        System.out.println(number);
        System.out.println(C1);

        number = "1234567";
        System.out.println(StringToPacked.stringToPacked(number));
        b1=StringToPacked.stringToPacked(number);
        C1 =StringToPacked.displayHex(b1);
        System.out.println(number);
        System.out.println(C1);

        number = "12345678";
        System.out.println(StringToPacked.stringToPacked(number));
        b1=StringToPacked.stringToPacked(number);
        C1 =StringToPacked.displayHex(b1);
        System.out.println(number);
        System.out.println(C1);
    } 
```

**结果 ：**

```
[B@19e0bfd
123456
0123456C
[B@139a55
12
012C
[B@1db9742
123
123C
[B@106d69c
1234567
1234567C
[B@52e922
12345678
012345678C 
```

# asp.net - 用户控制中的异常处理问题

> ID：11210357
> 
> 赞同：1
> 
> 时间：2012-06-26T15:07:54.560
> 
> 标签：asp.net

我有一个有 2 个用户控件的页面。我`Response.Redirect("ErrorPage.aspx")`在 Application_Error 的 Global.asax 页面中做。

它适用于所有页面，但是当用户控件出现异常时，页面不会重定向到 ErrorPage。如果我在用户控件本身的 catch 块中重定向，则程序可以完美运行。我究竟做错了什么？谢谢

# wpf - 如何在WPF中数据网格内的单击按钮上获取数据列值

> ID：11210362
> 
> 赞同：0
> 
> 时间：2012-06-26T15:08:07.913
> 
> 标签：wpf, wpf-controls, wpfdatagrid

我们如何在数据网格控件中获取按钮单击事件的列值，
在网格中有五列，第五列是按钮控件，第一列是一些 ID 值，
我正在使用

```
Int32 paperID = Convert.ToInt32(((System.Data.DataRowView)(DataGrid_MarksSummary.SelectedItem)).Row.ItemArray[0].ToString()); 
```

这里 paperID 总是为 0，
如何在单击按钮时获取此 id 值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T09:22:44.097

假设您的代码中有按钮的单击事件处理程序，您可以遍历此处理程序中的可视化树并找到底层行和您实际需要的数据：

```
private void ColumnButtonClick(object sender, RoutedEventArgs e)
    {
        Visual visual = (Visual)sender;
        while ((visual = VisualTreeHelper.GetParent(visual) as Visual) != null)
        {
            if (!(visual is DataGridRow)) continue;

            var row = (DataGridRow)visual;
            object item = row.Item; //your bound object
            break;
        }
    } 
```

在这种情况下，“item”变量保存 DataGridRow 内的实际数据绑定对象。您可以将其转换为您实际用作数据网格源的对象类型，然后您可以从中获得所需的 PaperID。

# oop - 一般的 OOP - RAM 中的类信息

> ID：11210365
> 
> 赞同：0
> 
> 时间：2012-06-26T15:08:15.917
> 
> 标签：oop, ram

编程语言是否绝对有必要保存类信息（例如在Objective-C 2字节中）以了解“规范”（例如`Integer`：4字节；`String`：8字节；...）`object`？
由于多态性，程序必须在运行时检查对象是否具有正确的`type`（用于方法；消息）对吗？
消耗这么多资源？主要是因为您创建了越来越多的类以保持适当的结构......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T10:08:19.663

这是绝对必要的。类的对象（即引用）存储在 RAM 中。它使用了一个非常小的编号。f 个字节，因为它只存储内存**地址**。

检查不会在运行时进行，而是在编译期间进行。这不会导致任何额外的内存使用。创建类和方法不会增加内存使用，但（如果只是稍微）会增加编译时间。存储数据（对象/引用、数字、字符串等）使用内存。只有当您创建对象时，语言机器才会分配和使用内存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T15:09:32.453

> 是否绝对必要

不。

例如，默认情况下，C++ 不存储任何类型信息。每个对象只存储一个[指向函数指针表的指针](http://en.wikipedia.org/wiki/Vtable)，以实现虚函数调用。

在 C++ 中，默认情况下，所有类型检查都是在编译时完成的。只有当你开始做“有趣”的事情时，这种情况才会改变[`dynamic_cast`](http://en.wikipedia.org/wiki/Dynamic_cast)，这需要运行时类型检查，因此需要将类型信息存储在对象中。

# ruby-on-rails - Ruby on Rails：将数组的 javascript 数组发送到 ruby 控制器

> ID：11210366
> 
> 赞同：6
> 
> 时间：2012-06-26T15:08:16.843
> 
> 标签：ruby-on-rails, json, handsontable

我想向我的 ruby​​ 控制器发送一个 javascript 数组。我有点失落。我的问题在控制器中。这是我到目前为止所拥有的：

（totalChanges 是一个数组数组。JSON.stringify(totalChanges) 可能如下所示：

```
[[4,2,"","15"],[4,3,"","12"],[4,4,"","14"]] 
```

应用程序/视图/index.html.erb：

```
<div id="dataTable" class="dataTable" style="width: 680px;height: 300px; overflow: scroll"></div>
<button>Save!</button>
<script>
    var first = true;
    var totalChanges = new Array();
    $("#dataTable").handsontable({
         //...some code that generates appropriate array totalChanges
    });
    var data = //..some code
    $("#dataTable").handsontable("loadData", data);
    $(function() {
            $( "button").button();
            $( "button" ).click(function() { 
                    alert("clicked"); 
                    $.ajax({
                            type: "POST",
                            url: "/qtl_table/save",
                            data: {total_changes: JSON.stringify(totalChanges)},
                            success: function() { alert("Success!"); }
                    });
            });
    });

</script> 
```

应用程序/控制器/qtl_table_controller.rb：

```
def save
  //Adding some things suggested by answers:
  logger.debug "\n#{params[:total_changes].first}, #{params[:total_changes][1]}\n"
  ar = JSON.parse(params[:total_changes])
end 
```

我最终遇到了这些错误：

```
NoMethodError (You have a nil object when you didn't expect it!
You might have expected an instance of Array.
The error occurred while evaluating nil.first): 
```

编辑：我也有 contentType：“application/json”和 Accepts：“application/json”，当我把它们拿出来时，一切都解决了。多谢你们 ：）

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-26T15:51:28.983

[`JSON.parse`](http://flori.github.com/json/doc/index.html)是你的朋友：

```
ar = JSON.parse(params[:total_changes])
#=> [[4, 2, "", "15"], [4, 3, "", "12"], [4, 4, "", "14"]] 
```

您很可能需要将 AJAX 调用更新为：

```
$.ajax({
  type: "POST",
  url: "/qtl_table/save",
  data: { total_changes: JSON.stringify(totalChanges) },
  success: function() { alert("Success!"); }
}); 
```

给你的数组参数`total_changes`名称。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-26T15:59:31.830

在 javascript 中为 JSON 数据分配一个根节点

```
data: {qtls: totalChanges} 
```

现在在控制器中：

```
params[:qtls] # contains the Ruby array
params[:qtls].first # [4,2,"","15"] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T15:55:20.810

传递的数据应该位于您的 params 环境变量中的某个位置。似乎您不知道它在哪个环境变量中。如果您知道它是哪个环境变量，那么该变量将保存您正在传递的变量，在您的情况下，json 字符串是数组。一旦您知道如何访问它，您就可以更新/创建/保存或您需要做的任何事情，然后重定向到您的索引：

```
redirect_to qtl_tables_path 
```

如果您不知道变量的名称，通常检查参数会告诉您它是如何传递的。当我想知道这样的事情并查看传递给控制器​​的所有内容时，我会将其发送到具有视图的不同控制器操作。在这种观点中，我将提出类似的内容：

```
<%= debug params %> 
```

或者

```
<%= inspect params %> 
```

这样它会打印出正在传递的参数，我可以看到该变量在哪里以及如何在参数中访问它，然后在正确的控制器中使用它。

这有意义吗？这篇文章中的答案也应该对您有所帮助：

[Rails：如何打印请求参数？](https://stackoverflow.com/q/4837859/1454494)

它也有一些很好的例子，可以使用你的 rails logger 来打印它。

我希望这是答案可以帮助你。

# c++ - System.arraycopy 的 OpenJDK 实现

> ID：11210369
> 
> 赞同：12
> 
> 时间：2012-06-26T15:08:51.457
> 
> 标签：c++, jvm, java, openjdk

在一个与 JVM 基于 char[] 实现创建字符串的方式相关的问题之后，我提到当 char[] 被复制到新字符串的内部时不会发生迭代，因为 System.arraycopy 最终会被调用，它使用诸如 memcpy 之类的函数在本机的、依赖于实现的级别（[原始问题](https://stackoverflow.com/questions/11208444/java-public-stringchar-value)）复制所需的内存。

我想自己检查一下，所以我下载了 Openjdk 7 源代码并开始浏览它。我在 OpenJDK C++ 源代码中找到了 System.arraycopy 的实现，位于`openjdx/hotspot/src/share/vm/oops/objArrayKlass.cpp`：

```
if (stype == bound || Klass::cast(stype)->is_subtype_of(bound)) {
  // elements are guaranteed to be subtypes, so no check necessary
  bs->write_ref_array_pre(dst, length);
  Copy::conjoint_oops_atomic(src, dst, length);
} else {
  // slow case: need individual subtype checks 
```

如果元素不需要类型检查（例如，原始数据类型数组就是这种情况），则调用 Copy::conjoin_oops_atomic。

该`Copy::conjoint_oops_atomic`函数位于“copy.hpp”中：

```
// overloaded for UseCompressedOops
static void conjoint_oops_atomic(narrowOop* from, narrowOop* to, size_t count) {
  assert(sizeof(narrowOop) == sizeof(jint), "this cast is wrong");
  assert_params_ok(from, to, LogBytesPerInt);
  pd_conjoint_jints_atomic((jint*)from, (jint*)to, count);
} 
```

现在我们依赖于平台，因为复制操作有不同的实现，基于操作系统/架构。我将以 Windows 为例。`openjdk\hotspot\src\os_cpu\windows_x86\vm\copy_windows_x86.inline.hpp`：

```
static void pd_conjoint_oops_atomic(oop* from, oop* to, size_t count) {
// Do better than this: inline memmove body  NEEDS CLEANUP
if (from > to) {
  while (count-- > 0) {
    // Copy forwards
    *to++ = *from++;
  }
} else {
  from += count - 1;
  to   += count - 1;
  while (count-- > 0) {
    // Copy backwards
    *to-- = *from--;
  }
 }
} 
```

而且......令我惊讶的是，它遍历元素（oop 值），一一复制它们（似乎）。有人可以通过遍历数组中的元素来解释为什么即使在本机级别也可以完成复制吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-26T15:22:14.277

因为`jint`最接近映射到`int`哪个最接近映射到旧的硬件架构`WORD`，它的大小与数据总线的宽度基本相同。

当今的内存架构和 cpu 处理旨在即使在缓存未命中的情况下也尝试处理，并且内存位置倾向于预取块。您正在查看的代码在性能上并不像您想象的那么“糟糕”。硬件更智能，如果您实际上没有配置文件，那么您的“智能”获取例程实际上可能不会添加任何内容（甚至会减慢处理速度）。

在向您介绍硬件架构时，必须向您介绍简单的架构。现代的代码做得更多，所以你不能假设看起来低效的代码实际上是低效的。例如，当执行内存查找以评估 if 语句的条件时，通常会在查找发生时执行 if 语句的两个分支，并且在数据可用于评估后丢弃处理的“假”分支条件。如果您想提高效率，您必须剖析然后对剖析的数据采取行动。

查看 JVM 操作码部分的分支。你会看到它是（或者可能只是）一个 ifdef 宏的奇怪之处，它支持（一次）三种不同的跳转到处理操作码的代码的方式。这是因为这三种不同的方式实际上在不同的 Windows、Linux 和 Solaris 架构上产生了有意义的性能差异。

也许他们可以包含 MMX 例程，但他们没有告诉我 SUN 认为现代硬件的性能提升不足以担心它。

# android - 两种线性布局，但只有一个显示

> ID：11210374
> 
> 赞同：1
> 
> 时间：2012-06-26T15:09:05.153
> 
> 标签：android, layout, android-linearlayout

我的父布局是线性布局，在里面我试图添加两个线性布局。由于某些原因。唯一会显示的布局是带有两个按钮的线性布局，另一个永远不会出现....有什么建议吗？

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_height="fill_parent"
android:layout_width="fill_parent"
android:orientation="vertical">
<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="140dp"
    android:layout_weight="2"
    android:orientation="vertical">
    <TextView
            android:id="@+id/dynamic_actionsText"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1" 
            android:text="Text"/>
    <Spinner
            android:id="@+id/dynamic_actionsSpinner"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1" />
</LinearLayout>
<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="240dp"
    android:layout_weight="2"
    android:orientation="vertical">
    <Button android:id="@+id/dynamic_btnSubmit"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1.0"
            android:visibility="gone"/>
    <Button android:id="@+id/dynamic_btnSave"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1.0"
            android:visibility="gone"/>
</LinearLayout>
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T15:13:59.600

```
any suggestions? 
```

建议：

1 - 将方向垂直设置**为两个 LinearLayout 的父级**.....

2- 从 dynamic_btnSubmit 和 dynamic_btnSave 中删除 android:visibility="gone"

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="140dp"
        android:layout_weight="2"
        android:orientation="horizontal" >

        <TextView
            android:id="@+id/dynamic_actionsText"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="Text" />

        <Spinner
            android:id="@+id/dynamic_actionsSpinner"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1" />
    </LinearLayout>

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="240dp"
        android:layout_weight="2"
        android:orientation="horizontal" >

        <Button
            android:id="@+id/dynamic_btnSubmit"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1.0" />

        <Button
            android:id="@+id/dynamic_btnSave"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1.0" />
    </LinearLayout>

</LinearLayout> 
```

![在此处输入图像描述](../Images/5b62bc0d6534713d8eea403b9e7ded64.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T15:48:06.470

首先删除可见性消失（如 Dheeresh 所述）

现在，按钮的 android:layout_height="wrap_content" 是问题所在。

由于按钮中没有文本内容，因此它们的高度本质上为 = 0（wrap_content 的行为）

在两个按钮中添加一个属性为 android:text="Hi"。你现在应该可以看到它们了。

如果您打算动态执行整个操作，请执行以下操作，

```
Button btnSubmit=(Button) findViewById(R.id.dynamic_btnSubmit);
btnSubmit.setText("Submit");
Button btnSave=(Button) findViewById(R.id.dynamic_btnSave);
btnSave.setText("Save");
btnSubmit.setVisibility(VIEW.VISIBLE);
btnSave.setVisibility(VIEW.VISIBLE); 
```

# validation - 为计算机模拟进行 V&V 时应采取哪些步骤？

> ID：11210378
> 
> 赞同：0
> 
> 时间：2012-06-26T15:09:20.457
> 
> 标签：validation, matlab, statistics, simulation, verification

我有一个模拟坦克内的电鱼的模拟。我有一些实验数据来映射结果，但希望在我的模型上进行大部分计算。为了忠实地使用模型，我需要验证和验证（V&V）我的模型。

按照我的理解，这两个任务可以简单地描述为：

*   “我在建立正确的系统吗？” （验证）
*   “我建立的系统对吗？” (验证) (pg75, 1)

我觉得我已经验证了我的系统，但现在必须验证它。

作为一个相对较新的程序员，我想知道必须采取哪些步骤，可以跳过哪些步骤，以及为了有效（并且相对有效地）验证我的系统，哪些步骤将是一个很好的奖励。这个系统是针对教育机构的，在医疗保健研究中有应用，所以我觉得我不应该太快通过验证阶段。

*我在验证阶段关心的不是如何测试我的模型或收集这些结果。我的问题是，我应该使用什么方法来比较我的数据，例如哪种类型的统计数据最有用，以显示我的数据质量的准确且一致的证明。*

非常感谢。

Ps 如果这是一个重复的帖子，请指出我已回答问题的方向，因为我可能使用错误的关键字进行搜索。

* * *

**资源：**

(1)：系统工程中的验证和确认。*黛巴比，M. 等。人*_ 第 1 版。2010\. 二十六。

**编辑：** 添加了斜体段落。

# javascript - onclick 函数这个参数

> ID：11210383
> 
> 赞同：0
> 
> 时间：2012-06-26T15:09:26.167
> 
> 标签：javascript

我有一些像这样在javascript中生成的html代码

```
cell.innerHTML = '<a href="#" class="sortheader" id="sortheader_'+i+'" '+ 
        'onclick="ts_resortTable(this, '+i+');return false;">' + 
        txt+'<span class="sortarrow"></span></a>'; 
```

我想调用函数 ts_resortTable() 但独立于 onclick 事件如何生成函数的“this”参数？

我试着这样做

```
ts_resortTable.call(document.getElementById('sortheader_'+i), i); 
```

还有这个

```
ts_resortTable(document.getElementById('sortheader_'+i), i); 
```

但它不工作

我试图调用的函数是这样的：

```
function ts_resortTable(lnk,clid) {

    //save clid in cookies
    $.cookie("clid", clid);

    //fade to table
    $('#table8k6k_progress').before('<div id="loading" style="background: #fff; position: absolute; margin-top: -25px; padding: 3px 5px; font-weight: bold;">Loading...</div>');
    $('#table8k6k_progress').fadeTo('fast',0.5, function() {
        TIMERSTART = (new Date()).getTime();
        // get the span
        var span;
        for (var ci=0;ci<lnk.childNodes.length;ci++) {
            if (lnk.childNodes[ci].tagName && lnk.childNodes[ci].tagName.toLowerCase() == 'span') span = lnk.childNodes[ci];
        }
        var spantext = ts_getInnerText(span);
        var td = lnk.parentNode;
        var column = clid || td.cellIndex;
        var table = getParent(td,'TABLE');

        // Work out a type for the column
        if (table.rows.length <= 1) return;
        var itm = ts_getInnerText(table.rows[1].cells[column]);
        //itm = itm.substr(0,7);
        sortfn = ts_sort_caseinsensitive;
        if (itm.match(/^\d{1,2}[\/-]\d{1,2}[\/-]\d{2,4}\s\d\d\W\d\d$/)) sortfn = ts_sort_date;
        if (itm.match(/^\d\d[\/-]\d\d[\/-]\d\d\d\d$/)) sortfn = ts_sort_date;
        if (itm.match(/^\d\d[\/-]\d\d[\/-]\d\d$/)) sortfn = ts_sort_date;
        if (itm.match(/^[£$]/)) sortfn = ts_sort_currency;
        if (itm.match(/^[\d\.]+$/)) sortfn = ts_sort_numeric;
        SORT_COLUMN_INDEX = column;
        var firstRow = new Array();
        var newRows = new Array();
        for (i=0;i<table.rows[0].length;i++) { firstRow[i] = table.rows[0][i]; }
        for (j=1;j<table.rows.length;j++) { newRows[j-1] = table.rows[j]; }

        newRows.sort(sortfn);

        if (span.getAttribute("sortdir") == 'down') {
            ARROW = stIsIE ? '&nbsp<font face="webdings">6</font>' : '&nbsp;&#x25BE;';
            newRows.reverse();
            span.setAttribute('sortdir','up');
        } else {
            ARROW = stIsIE ? '&nbsp<font face="webdings">5</font>' : '&nbsp;&#x25B4;';
            span.setAttribute('sortdir','down');
        }

        // We appendChild rows that already exist to the tbody, so it moves them rather than creating new ones
        // don't do sortbottom rows
        for (i=0;i<newRows.length;i++) { if (!newRows[i].className || (newRows[i].className && (newRows[i].className.indexOf('sortbottom') == -1))) table.tBodies[0].appendChild(newRows[i]);}
        // do sortbottom rows only
        for (i=0;i<newRows.length;i++) { if (newRows[i].className && (newRows[i].className.indexOf('sortbottom') != -1)) table.tBodies[0].appendChild(newRows[i]);}

        // Delete any other arrows there may be showing
        var allspans = document.getElementsByTagName("span");
        for (var ci=0;ci<allspans.length;ci++) {
            if (allspans[ci].className == 'sortarrow') {
                if (getParent(allspans[ci],"table") == getParent(lnk,"table")) { // in the same table as us?
                    allspans[ci].innerHTML = '';
                }
            }
        }

        span.innerHTML = ARROW;

        //fadeTo
        $('#table8k6k_progress').fadeTo('fast', 1);

        //remove div loading
        $('#loading').remove();
    });

    //alert("Time taken: " + ( (new Date()).getTime() - TIMERSTART ) + "ms");

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T15:17:01.880

要调用函数并显式控制`this`函数内部的内容，请使用函数的[call](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/Call)方法

```
ts_resortTable.call(document.getElementById('sortheader_'+i), i) 
```

*   以上将`this`在函数内设置为 document.getElementById('sortheader_'+i) 。
*   The function will also receive a single parameter, `i`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T15:13:11.600

根据您输入的内容

```
$('sortheader_' + i) 
```

由于这不是 MooTools，因此您需要为选择器执行此操作。

```
$('#sortheader_' + i) 
```

您需要在 jQuery 中使用 CSS 选择器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T15:14:57.353

通过调用

```
onclick="ts_resortTable(this, '+i+'); 
```

ts_resortTable 函数的第一个参数将是`<a>`标签 itelf

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-07T16:36:06.667

document.getElementById('sortheader_'+i)

the link with the id wasn't yet generate when i was launching the function on the document ready event. So the solution was to delay the launch of the function ;)

# javascript - Django 根据其他字段动态设置字段值

> ID：11210396
> 
> 赞同：9
> 
> 时间：2012-06-26T15:10:09.193
> 
> 标签：javascript, django, autocomplete, django-forms, django-admin

我正在尝试根据其他外来字段选择设置字段默认值。基本上，这些是类：

```
class Product(models.Model):
        description = models.CharField('Description', max_length=200)
        price = models.FloatField('Price')

class Sell(models.Model):
        product = models.ForeignKey(Product)
        price = models.FloatField('Price') 
```

每个“产品”都有一个默认价格（或建议价格），因此当用户在管理页面中想要添加新的 Sell 并选择产品时，我需要从 Product.price 动态复制到 Sell.price建议的价格。我不能使用“保存”方法，因为用户可以在那一刻改变。

是否有必要显式使用 JavaScript？或者 Django 中是否有一种优雅的方式来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T16:51:50.667

您可以使用预保存挂钩或覆盖 Sell 模型的 save() 方法来解决此问题。

```
from django.db import models

class Product(models.Model):
    description = models.CharField('Description', max_length=200)
    price = models.FloatField('Price')

class Sell(models.Model):
    product = models.ForeignKey(Product)
    price = models.FloatField('Price')

    # One way to do it:
    from django.db.models.signals import post_save
    def default_subject(sender, instance, using):
        instance.price = instance.product.price
    pre_save.connect(default_subject, sender=Sell)

    # Another way to do it:
    def save(self, *args, **kwargs):
        self.price = self.product.price
        super(Sell, self).save(*args, **kwargs) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T18:54:05.010

您是否询问有关在管理网页中动态更新表单字段值的问题？客户端表单行为需要在 JavaScript 中发生。Django 的 Admin 确实提供了一些脚本，特别是用于添加/删除内联，但它不提供此级别的功能。

Django 的 Admin 确实在`window.django.jQuery`（或只是`django.jQuery`）下的页面上下文中提供了 jQuery。Django Forms 始终输出稳定的表单字段 ID。检查输出表单代码并找到 Product 选择器和相应的 Sell.price 输入字段。然后，您可以使用 jQuery 执行一些操作，例如将[.change()](http://api.jquery.com/change/)或[.on('change', ...)](http://api.jquery.com/on/)处理程序添加到 Product 选择器，并使用更新 Sell 字段上的价格的函数。

为了将来参考，Django Admin 几乎可以使用[ModelAdmin.prepopulated_fields](https://docs.djangoproject.com/en/1.4/ref/contrib/admin/#django.contrib.admin.ModelAdmin.prepopulated_fields)满足您的请求，但是

> prepopulated_fields 不接受 DateTimeField、ForeignKey 或 ManyToManyField 字段。

# c# - 如何在 View C# MVC3 Razor 中正确显示 SQL Server CE 数据

> ID：11210397
> 
> 赞同：1
> 
> 时间：2012-06-26T15:10:09.910
> 
> 标签：c#, asp.net-mvc-3, layout, razor

我需要一些帮助来获取从数据库正确访问的布局数据的视图。

我在我的 MVC3 c# 站点上有一个简单的视图来显示存储在数据库中的数据。查看代码如下：

```
<div id="content" class="valign">
    <p>
        @foreach (var item in Model)
        {
                <i>@Html.DisplayFor(modelItem => item.News_Date)</i><br />        
                @Html.DisplayFor(modelItem => item.News_Entry)<br />
            <br />
        }
    </p>
</div> 
```

这最初工作正常，数据显示如下所示：

```
Date <br>
Post

Date <br>
Post

Date <br>
Post 

...etc 
```

我现在遇到的问题是，使用上面的方法查看“发布”数据时，它不包括回车，因此段落等无法正确显示换行符。

早些时候，我从该站点上的人们那里得到了一些帮助，关于如何在将输入数据显示到 TextArea 框并将其上传到数据库中，然后在单独的页面视图上显示该数据（包括换行符）时实现一些格式设置。他们给我的显示这些数据的方法如下：

```
@foreach (var data in Model)
{                       
    @Html.Raw(data.News_Entry.Replace(Environment.NewLine, "<br/>"))
} 
```

这保留了在原始数据输入中使用的换行符。

但是，现在如果我想显示数据，我必须使用这种方法来显示“日期”：

```
@foreach (var item in Model)
{
    <i>@Html.DisplayFor(modelItem => item.News_Date)</i><br /> 
} 
```

...以及这种显示“帖子”的方法：

```
@foreach (var data in Model)
{
    @Html.Raw(data.News_Entry.Replace(Environment.NewLine, "<br/>"))
} 
```

...但它不像以前那样在页面上显示数据，即：

```
Date <br>
Post 
```

它显示为：

```
Date <br>
Date <br>
Date <br>
 <br>
Post <br>
Post <br>
Post <br> 
```

有人能帮我解决这个问题吗？

最好先显示日期，然后在其下方显示帖子，同时保持换行符完整。

为了更好地说明，我有几个屏幕截图：

[正确的显示](http://www.zen87038.zen.co.uk/image/correct.jpg)
[方式 错误的显示方式](http://www.zen87038.zen.co.uk/image/incorrect.jpg)

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T15:21:18.413

为什么不简单地使用[HTML pre 标签](http://www.w3schools.com/tags/tag_pre.asp)？

> pre 标签定义了预格式化的文本。
> 
> pre 元素中的文本以固定宽度字体（通常是 Courier）显示，并且保留空格和换行符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T15:56:36.660

浪费董事会时间的道歉 - 我设法通过添加 News_Date 自己来解决它，如下所示：

```
<p>
    @foreach (var data in Model)
    {
        <i>@Html.DisplayFor(modelItem => data.News_Date)</i><br />
        @Html.Raw(data.News_Entry.Replace(Environment.NewLine, "<br/>"))<br />
    }
</p> 
```

# ruby-on-rails-3 - 活动记录表没有正确更新，但说它在控制台中

> ID：11210398
> 
> 赞同：0
> 
> 时间：2012-06-26T15:10:22.560
> 
> 标签：ruby-on-rails-3, activerecord

我正在使用以下方法更新活动记录表：

```
 def sort
    params[:piece].each_with_index do |id, index|
      current_user.lineup.piece_lineups.update_all({position: index+1}, {id: id})
    end
    render nothing: true
  end 
```

一切看起来都在工作，只是它实际上并没有将新的排序顺序保存到数据库中。查看输出，它说它正在正确更新所有内容。这是sql查询：

```
Started POST "/lineups/sort" for 127.0.0.1 at 2012-06-26 08:07:24 -0700
Processing by LineupsController#sort as */*
  Parameters: {"piece"=>["1", "4", "2", "3", "7"]}
  User Load (0.4ms)  SELECT `users`.* FROM `users` WHERE `users`.`id` = 3 LIMIT 1
  Lineup Load (0.2ms)  SELECT `lineups`.* FROM `lineups` WHERE `lineups`.`user_id` = 3 LIMIT 1
  SQL (0.2ms)  UPDATE `piece_lineups` SET `position` = 1 WHERE `piece_lineups`.`lineup_id` = 4 AND `piece_lineups`.`id` = 1
  SQL (0.2ms)  UPDATE `piece_lineups` SET `position` = 2 WHERE `piece_lineups`.`lineup_id` = 4 AND `piece_lineups`.`id` = 4
  SQL (0.2ms)  UPDATE `piece_lineups` SET `position` = 3 WHERE `piece_lineups`.`lineup_id` = 4 AND `piece_lineups`.`id` = 2
  SQL (0.2ms)  UPDATE `piece_lineups` SET `position` = 4 WHERE `piece_lineups`.`lineup_id` = 4 AND `piece_lineups`.`id` = 3
  SQL (0.1ms)  UPDATE `piece_lineups` SET `position` = 5 WHERE `piece_lineups`.`lineup_id` = 4 AND `piece_lineups`.`id` = 7
  Rendered text template (0.0ms)
Completed 200 OK in 8ms (Views: 0.6ms | ActiveRecord: 1.4ms) 
```

似乎一切都应该正常工作，但事实并非如此。我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T00:03:19.733

对不起，我认为我的回答是错误的。你的代码对我来说看起来是正确的。我不知道为什么它不起作用。但是，我看到你正在一个一个地更新片段记录，这是低效的。它将生成 O(n) 的 sql 更新查询。也许你可以试试这个，它会生成一个更新查询：

```
attributes = Hash[params[:piece].each_with_index.map { |id, index| [id, {order: index}] }]
current_user.lineup.piece_lineups.update(attributes.keys, attributes.values) 
```

# documentation - Plesk 9.5 API 文档混乱

> ID：11210401
> 
> 赞同：0
> 
> 时间：2012-06-26T15:10:27.297
> 
> 标签：documentation, plesk

我正在使用 Plesk 9.5。

我已经阅读了[Plesk 9.5 的 API 概述](http://download1.parallels.com/Plesk/PPP9/Doc/en-US/plesk-9.5-api-rpc-guide/)，但这实际上只是一个概述和一些示例位。它没有对所有 XML 标记及其含义进行全面分解。我可以找到[Plesk 10 (API 1.6.3.1)](http://download1.parallels.com/Plesk/PP10/10.1.1/Doc/en-US/online/plesk-api-rpc/index.htm)的此类参考，但不能找到 Plesk 9.5。

并且存在一些差异。例如，Plesk 9.5 概述显示了如何创建客户端的示例。但是 API 1.6.3.1 参考中的“支持的操作”列表没有说明客户端。它确实提到了客户。有什么不同？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T03:49:10.977

Plesk 9.5 使用 api-rpc 协议 1.6.0.2 并与客户端一起工作。在 plesk 10.x 中，客户端在客户中被重命名，并且在 api-rpc 中进行了适当的更改。因此，在 plesk9.5 中，您可以像这样使用数据包： `<packet version="1.6.0.2"><client><add> ... </add></client></packet>` 在 plesk 10.x 中，您可以使用运算符创建“相同”实体：

`<packet version="1.6.3.0"><customer><add> ... </add></customer></packet>`.

运算符中也进行了`domain`更改，即更改为`webspace`.

# forms - 自定义 SmartGWT 表单项

> ID：11210402
> 
> 赞同：1
> 
> 时间：2012-06-26T15:10:40.597
> 
> 标签：forms, gwt, customization, smartgwt

我创建了一个 SmartGWT 自定义`FormItem`（通过创建一个`CustomTextItem`扩展类的子类），然后我添加了`com.smartgwt.client.widgets.form.fields.TextItem`一个实例：`CustomTextItem``DynamicForm`

```
...
DynamicForm form = new DynamicForm();
form.setFields(new TextItem("text_field"), new CustomTextItem("custom_field"));
... 
```

现在我的问题是我无法使用`getValue()`动态表单的方法获取自定义对象的值：

```
Object text_value = form.getValue("text_field"); <<< this is OK
Object custom_value = form.getValue("custom_field"); <<< this always returns null 
```

问题是表单对象在哪里检索其提交或验证的值？
我想我应该重写一些`TextItem`类方法或设置一些属性才能做到这一点。
任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T19:38:29.213

您需要覆盖`getValue`您的方法`CustomTextItem`并返回`CustomTextItem`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-31T08:02:31.203

您可以直接从您的项目中获取值，例如**form.getItem("yourItemInstanceName").getValue()**
您不需要为此访问表单。

# c# - 当路径太长时 File.Exists() 错误地返回 false

> ID：11210408
> 
> 赞同：16
> 
> 时间：2012-06-26T15:11:00.057
> 
> 标签：c#, .net

我目前正在开发一个遍历各种目录的程序，以确保使用`File.Exists()`.

该应用程序一直声称某些文件实际上不存在，而我最近发现此错误是由于路径太长造成的。

我意识到 SO 上有一些问题可以解决`File.Exists()`返回不正确的值，但似乎没有一个可以解决这个特定问题。

重命名目录和文件以缩短路径并不是一个真正的选择，所以我现在不确定该怎么做。是否有解决此问题的解决方法？

使用的代码没什么特别的（我已经删掉了一些不相关的代码），但我会将它包含在下面以防万一。

```
 private void checkFile(string path)
    {
        if (!File.Exists(path))
            Console.WriteLine("   *  File: " + path + " does not exist.");
    } 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-26T15:14:57.757

来自[MSDN - 命名文件、路径和命名空间](http://msdn.microsoft.com/en-us/library/aa365247#maxpath)：

> 在 Windows API（以下段落中讨论的一些例外情况）中，路径的最大长度为 MAX_PATH，定义为 260 个字符。
> 
> ...
> 
> Windows API 有许多函数也有 Unicode 版本，以允许最大总路径长度为 32,767 个字符的扩展长度路径。这种类型的路径由由反斜杠分隔的组件组成，每个组件都达到 GetVolumeInformation 函数的 lpMaximumComponentLength 参数中返回的值（该值通常为 255 个字符）。**要指定扩展长度的路径，请使用`"\\?\"`前缀。例如，`"\\?\D:\very long path"`。**
> 
> ...
> 
> 因为**您不能将`"\\?\"`前缀与相对路径一起**使用，所以相对路径总是被限制为总共 MAX_PATH 字符。

（重点补充）

如果所有路径都是完整路径，则可以更新代码以使用扩展长度路径说明符，如下所示：

```
const longPathSpecifier = @"\\?";

private void checkFile(string path)
{
    // Add the long-path specifier if it's missing
    string longPath = (path.StartsWith(longPathSpecifier) ? path : longPathSpecifier  + path);

    if (!File.Exists(longPath))
    {
        // Print the original path
         Console.WriteLine("   *  File: " + path + " does not exist.");
    }
} 
```

**更新：**

> 对于文件 I/O，路径字符串的“\?\”前缀告诉 Windows API 禁用所有字符串解析并将其后面的字符串直接发送到文件系统。例如，**如果文件系统支持大路径和文件名**，则您可以超过由 Windows API 强制执行的 MAX_PATH 限制。

至少在我的系统（使用 Windows 7）上，不支持长文件名，所以我无法验证上述解决方案是否适合您。

**更新：**我找到了一个可行的解决方案，但它相当难看。这是我在伪代码中所做的：

1.  将路径拆分为目录数组
2.  获取路径中少于 260 个字符 (MAX_PATH) 的最长部分。
3.  为路径的该部分 创建一个[DirectoryInfo （“dir”以供将来参考）。](http://msdn.microsoft.com/en-us/library/system.io.directoryinfo.aspx)
4.  对于路径中的其余目录
    ：调用`dir.GetDirectories()`并检查下一个目录是否包含在结果中
    b. 如果是这样，请设置`dir`为`DirectoryInfo`并继续挖掘
    c。如果不存在，则路径不存在
5.  一旦我们浏览了指向我们文件的所有目录，调用`dir.GetFiles()`并查看我们的文件是否存在于返回的`FileInfo`对象中。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-06-26T16:39:17.750

这是丑陋和低效的，但它确实绕过了 MAX_PATH 限制：

```
const int MAX_PATH = 260;

private static void checkPath(string path)
{
    if (path.Length >= MAX_PATH)
    {
        checkFile_LongPath(path);
    }
    else if (!File.Exists(path))
    {
        Console.WriteLine("   *  File: " + path + " does not exist.");
    }
} 
```

这是 checkFile_LongPath 函数：

```
private static void checkFile_LongPath(string path)
{
    string[] subpaths = path.Split('\\');
    StringBuilder sbNewPath = new StringBuilder(subpaths[0]);
    // Build longest subpath that is less than MAX_PATH characters
    for (int i = 1; i < subpaths.Length; i++)
    {
        if (sbNewPath.Length + subpaths[i].Length >= MAX_PATH)
        {
            subpaths = subpaths.Skip(i).ToArray();
            break;
        }
        sbNewPath.Append("\\" + subpaths[i]);
    }
    DirectoryInfo dir = new DirectoryInfo(sbNewPath.ToString());
    bool foundMatch = dir.Exists;
    if (foundMatch)
    {
        // Make sure that all of the subdirectories in our path exist.
        // Skip the last entry in subpaths, since it is our filename.
        // If we try to specify the path in dir.GetDirectories(), 
        // We get a max path length error.
        int i = 0;
        while(i < subpaths.Length - 1 && foundMatch)
        {
            foundMatch = false;
            foreach (DirectoryInfo subDir in dir.GetDirectories())
            {
                if (subDir.Name == subpaths[i])
                {
                    // Move on to the next subDirectory
                    dir = subDir;
                    foundMatch = true;
                    break;
                }
            }
            i++;
        }
        if (foundMatch)
        {
            foundMatch = false;
            // Now that we've gone through all of the subpaths, see if our file exists.
            // Once again, If we try to specify the path in dir.GetFiles(), 
            // we get a max path length error.
            foreach (FileInfo fi in dir.GetFiles())
            {
                if (fi.Name == subpaths[subpaths.Length - 1])
                {
                    foundMatch = true;
                    break;
                }
            }
        }
    }
    // If we didn't find a match, write to the console.
    if (!foundMatch)
    {
        Console.WriteLine("   *  File: " + path + " does not exist.");
    }
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-26T15:16:38.913

我自己从来没有遇到过这个问题，另一个SO帖子上的人建议打开文件的句柄，从而首先避免整个“存在”检查。不确定这是否仍然存在“长文件名”问题：

这是这里的第二个答案：

[检查文件/目录是否存在：有更好的方法吗？](https://stackoverflow.com/questions/2570930/check-if-a-file-directory-exists-is-there-a-better-way)

不确定这是否有用：P

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-11-24T18:44:23.337

您需要 P/Invoke Win32 API 以使其正常工作：

```
 [DllImport("kernel32.dll", CharSet = CharSet.Unicode, SetLastError = true)]
    static extern uint GetFileAttributes(string lpFileName);

    public static bool DirectoryExists(string path)
    {
        uint attributes = GetFileAttributes(path.StartsWith(@"\\?\") ? path : @"\\?\" + path);
        if (attributes != 0xFFFFFFFF)
        {
            return ((FileAttributes)attributes).HasFlag(FileAttributes.Directory);
        }
        else
        {
            return false;
        }
    }

    public static bool FileExists(string path)
    {
        uint attributes = GetFileAttributes(path.StartsWith(@"\\?\") ? path : @"\\?\" + path);
        if (attributes != 0xFFFFFFFF)
        {
            return !((FileAttributes)attributes).HasFlag(FileAttributes.Directory);
        }
        else
        {
            return false;
        }
    } 
```

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2019-08-29T07:18:36.243

**查看**

1.  清单权限

```
 <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
    <uses-permission android:name="android.permission.READ_EXTERNAL_STORAGE" /> 
```

2.  使用文件提供程序创建和访问文件

```
 <provider
            android:name="androidx.core.content.FileProvider"
            android:authorities="your_package.fileprovider"
            android:exported="false"
            android:grantUriPermissions="true">
            <meta-data
                android:name="android.support.FILE_PROVIDER_PATHS"
                android:resource="@xml/file_list" />
    </provider> 
```

3.  文件列表内容：

```
 <?xml version="1.0" encoding="utf-8"?>
    <paths>
        <external-path
            name="external"
            path="." />
        <external-files-path
            name="external_files"
            path="." />
        <cache-path
            name="cache"
            path="." />
        <external-cache-path
            name="external_cache"
            path="." />
        <files-path
            name="files"
            path="." />
    </paths> 
```

4.  保持你的文件名简短

# c# - 远程计划任务状态

> ID：11210410
> 
> 赞同：4
> 
> 时间：2012-06-26T15:11:17.497
> 
> 标签：c#, .net, scheduled-tasks, psexec

对于我的应用程序，我想监视远程服务器上特定计划任务的“状态”选项卡，并根据该状态执行操作。即，如果任务尚未运行，则运行任务等。

截至目前，我正在将 cmd.exe 作为 C# 中的进程启动，将该机器的 schtask psexec'ing 到一个文本文件中，读取该文本文件，然后执行相应的操作。

是否有更好的方法来执行此过程（获取 schtask 的特定状态）而不涉及 3rd 方开源库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-26T02:30:21.867

您可以尝试使用本机[`TaskService`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa383448%28v=vs.85%29.aspx)COM API：

```
//add reference to the 'Task Scheduler 1.1 Type Library'

using TaskScheduler;

//...

TaskSchedulerClass ts = new TaskSchedulerClass();
ts.Connect(remotehost, user, domain, password);
IRunningTaskCollection tasks = ts.GetRunningTasks(1);
foreach (IRunningTask task in tasks)
{
    Console.WriteLine(task.Name);
} 
```

有关安全和权限的一些任务，请参阅[http://msdn.microsoft.com/en-us/library/windows/desktop/aa382140(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa382140(v=vs.85).aspx)

或者，如果 powershell 是一个可能更容易的选项，具体取决于版本。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-26T19:27:58.150

[http://www.emoreau.com/Entries/Articles/2004/08/Interfacing-the-Windows-Task-Scheduler.aspx](http://www.emoreau.com/Entries/Articles/2004/08/Interfacing-the-Windows-Task-Scheduler.aspx)

也在这里：

[使用 C# 访问 Windows 计划任务](https://stackoverflow.com/questions/992549/accessing-windows-scheduled-task-using-c-sharp)

# .htaccess - .htaccess - 如果不存在查询字符串，则 301 重定向

> ID：11210412
> 
> 赞同：1
> 
> 时间：2012-06-26T15:11:20.410
> 
> 标签：.htaccess, redirect, http-status-code-301

我想创建一个从页面到同一页面的 301，除了目标页面在 url 中有一个参数。浏览器向我显示错误（重定向太多），因此似乎存在无限循环。这是我的代码：

```
RewriteEngine on
Redirect 301 /index.php http://www.monsite.com/index.php?step=1 
```

感谢我的建议：D

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-26T15:13:57.760

您需要对重定向进行条件化并在 PHP 中执行以防止无限重定向循环。

索引.php：

```
if(!isset($_GET['step'])){
    header('Location:http://www.monsite.com/index.php?step=1');
} 
```

您配置它的方式将无限期地重定向，因为没有对引擎说“一旦设置了 URL 变量步骤就不要重定向我”。

在 .htaccess 文件中有一些方法可以做到这一点，但由于这些重定向通常是应用程序逻辑，因此直接在脚本中执行似乎更有意义。

或者，对于纯 .htaccess 解决方案：

```
#if query string is empty

RewriteCond %{QUERY_STRING} ^$

#match on / for root, or .index.php in request and send to query string version 

RewriteRule ^(/|index.php)?$ /index.php?step=1 [R=301,L] 
```

# php - htmlspecialchars输出空白

> ID：11210413
> 
> 赞同：6
> 
> 时间：2012-06-26T15:11:20.617
> 
> 标签：php, html, htmlspecialchars

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-29T03:36:18.027

该字符串未以有效的 UTF-8 编码进行编码。它可能是另一种编码，如 UTF-16，或者它可能只包含一些不对应任何格式的二进制垃圾。

底线是，由于您将“UTF-8”指定为 htmlspecialchars() 的编码类型参数，如果字符串不符合“UTF-8”，它将返回一个空字符串。它在[PHP 手册](http://php.net/manual/en/function.htmlspecialchars.php)中说明了这一点。

一个简单的解决方法是使用替代或忽略标志。改变：

```
htmlspecialchars($aboutarray[0]['about_us'], ENT_COMPAT, "UTF-8") 
```

至：

```
htmlspecialchars($aboutarray[0]['about_us'], ENT_COMPAT|ENT_SUBSTITUTE, "UTF-8") 
```

或者：

```
htmlspecialchars($aboutarray[0]['about_us'], ENT_COMPAT|ENT_IGNORE, "UTF-8") 
```

**注意： ENT_IGNORE 删除不合规的字节。这可能会导致[安全问题](http://unicode.org/reports/tr36/#Deletion_of_Noncharacters)。** 最好真正了解您的字符串的内容以及它是如何被编码的。纠正问题的根源，而不是使用简单的 ENT_IGNORE 修复。

你应该问自己*为什么*你的字符串不是用 UTF-8 编码的……*应该*是，但不是。

我恰好也遇到了这个问题；[您可以在此处](https://stackoverflow.com/questions/11705829/htmlspecialchars-causing-text-to-disapear)阅读有关为什么返回空字符串的详细信息。

# jquery - 使用 jQuery 从完整函数发送参数

> ID：11210414
> 
> 赞同：1
> 
> 时间：2012-06-26T15:11:22.740
> 
> 标签：jquery, ajax

以下将通过表单输入的值发送到 php 文件：

```
$.ajax ({
    url: myPhpUrl,
    data: formValues,
    type: "POST",
    async:false,
    success: function (data, textStatus)
    {     
        alert("Form sent successfully");           
    },
    complete: function () {
        location.reload(true);
    }
}); 
```

一旦成功函数发出成功消息警报，完整函数将重新加载页面。

我需要从我的 PHP 文件中知道该页面已重新加载。

有什么方法可以将参数从完整函数发送到我的 PHP 文件？如果没有，还有其他方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T15:18:47.323

我用

```
location.href=location.href+'?param='+my_param_value; 
```

# java - 部署 Maven one-jar 会部署错误的工件

> ID：11210418
> 
> 赞同：3
> 
> 时间：2012-06-26T15:11:31.797
> 
> 标签：java, maven, jar, executable

我正在尝试构建一个单 jar Java 实用程序。在[上一篇 SO 帖子](https://stackoverflow.com/a/11160606/827480)中，有人推荐使用[onejar-maven-plugin](http://code.google.com/p/onejar-maven-plugin/)插件。我已经尝试过了，但我遇到的问题是插件（1.4.4）创建了一个带有 one-jar.jar 扩展名的新工件。因此，我最终在目标文件夹中有 2 个 jar，当我尝试安装和/或部署时，它会部署原始 jar（而不是一个 jar）。

我已经从目标文件夹运行了 one-jar.jar 工件，它完全按预期工作，所以我对此很满意。但是，如果我无法使用标准`mvn deploy`命令语法正确部署它，则该插件不会真正按预期或按要求执行。

有没有办法正确构建 pom 配置以避免这个问题？

我当前的 pom 内容如下：

```
 <plugin>
                    <groupId>com.jolira</groupId>
                    <artifactId>onejar-maven-plugin</artifactId>
                    <version>1.4.4</version>
                    <executions>
                        <execution>
                            <configuration>
                                <mainClass>com.nbfg.cws.cs.lendingsimulationservice.Client</mainClass>
                                <onejarVersion>0.97</onejarVersion>
                                <attachToBuild>true</attachToBuild>
                            </configuration>
                            <goals>
                                <goal>one-jar</goal>
                            </goals>
                        </execution>
                    </executions>
                </plugin> 
```

Maven 运行时输出`mvn deploy`：

测试运行：0，失败：0，错误：0，跳过：0

```
[INFO]
[INFO] --- maven-jar-plugin:2.3.1:jar (default-jar) @ lss-client ---
[INFO]
[INFO] --- onejar-maven-plugin:1.4.4:one-jar (default) @ lss-client ---
[INFO] Using One-Jar to create a single-file distribution
[INFO] Implementation Version: 0.0.1-SNAPSHOT
[INFO] Using One-Jar version: 0.97
[INFO] More info on One-Jar: http://one-jar.sourceforge.net/
[INFO] License for One-Jar:  http://one-jar.sourceforge.net/one-jar-license.txt
[INFO] One-Jar file: C:\Dev\Eclipse Indigo\lssClient\target\lss-client-0.0.1-SNAPSHOT.one-jar.jar
[INFO]
[INFO] --- maven-install-plugin:2.3.1:install (default-install) @ lss-client ---
[INFO] Installing C:\Dev\Eclipse Indigo\lssClient\target\lss-client-0.0.1-SNAPSHOT.jar to C:\Users\C61271B4\.m2\repository\com\cws\cs\lss\lss-client\0.0.1-SNAPSHOT\lss-client-0.0.1-SNAPSHOT.jar
[INFO] Installing C:\Dev\Eclipse Indigo\lssClient\pom.xml to C:\Users\C61271B4\.m2\repository\com\cws\cs\lss\lss-client\0.0.1-SNAPSHOT\lss-client-0.0.1-SNAPSHOT.pom
[INFO] Installing C:\Dev\Eclipse Indigo\lssClient\target\lss-client-0.0.1-SNAPSHOT.one-jar.jar to C:\Users\C61271B4\.m2\repository\com\cws\cs\lss\lss-client\0.0.1-SNAPSHOT\lss-client-0.0.1-SNAPSHOT-onejar.jar
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 4.874s
[INFO] Finished at: Tue Jun 26 13:08:34 EDT 2012
[INFO] Final Memory: 21M/512M
[INFO] ------------------------------------------------------------------------ 
```

谢谢，

埃里克

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-26T16:25:33.350

根据文档，您应该添加完全可以解决问题的配置，以将 onejar 文件附加到您的构建中。

```
<!-- Optional, default is false -->
<attachToBuild>true</attachToBuild> 
```

要使用创建的工件，您需要通过选项添加由插件为 onejar 定义的分类器：

```
<!-- Optional, default is "onejar" -->
<classifier>onejar</classifier> 
```

这意味着说：

```
<dependency>
  <groupId>..</groupId>
  <artifactId>..</artifactId>
  <classifier>onejar</classifier>
  <verison>x.y.z</version>
</dependency> 
```

重要的是使用分类器。否则，您将获得原始工件（如您所述）。

如果您希望有机会将生成的 onejar 用作主要工件（仅部署），您应该为此目的使用[maven-shade-plugin 。](http://maven.apache.org/plugins/maven-shade-plugin/)onejar 插件的文档不提供此类选项。

# android - AsyncTask 中的蓝牙发现

> ID：11210420
> 
> 赞同：1
> 
> 时间：2012-06-26T15:11:44.513
> 
> 标签：android

我正在尝试搜索附近的蓝牙设备，为了完成这项任务，我正在使用`AsyncTask`我的 AsyncTask 的代码在下面

```
public class DeviceScan extends AsyncTask<String, Void, ArrayList<String>> {

    ProgressDialog dialog;
    Context _context; 
    BluetoothAdapter adapter; 
    final BroadcastReceiver blueToothReceiver;

    /**
     * The constructor of this class
     * @param context The context of whatever activity that calls this AsyncTask. For instance MyClass.this or getApplicationContext()
     */

    public DeviceScan(Context context) {

        _context = context; 
        dialog = new ProgressDialog(_context); 
        adapter = BluetoothAdapter.getDefaultAdapter();
        blueToothReceiver = null; 

    }

    protected void onPreExecute() {

          dialog.setTitle("Please Wait");
          dialog.setMessage("Searching for devices..");
          dialog.setIndeterminate(true);
          dialog.setCancelable(false);
          dialog.show();

    }

    /*
     * Operations "behind the scene", do not interfere with the UI here!
     * (non-Javadoc)
     * @see android.os.AsyncTask#doInBackground(Params[])
     */
    @Override
    protected ArrayList<String> doInBackground(String... params) {

        //This arraylist should contain all the discovered devices. 
        final ArrayList<String> devices = new ArrayList<String>();

        // Create a BroadcastReceiver for ACTION_FOUND
        final BroadcastReceiver blueToothReceiver = new BroadcastReceiver() {
            public void onReceive(Context context, Intent intent) {
                String action = intent.getAction();
                // When discovery finds a device
                if (BluetoothDevice.ACTION_FOUND.equals(action)) {
                    // Get the BluetoothDevice object from the Intent
                    BluetoothDevice device = intent.getParcelableExtra(BluetoothDevice.EXTRA_DEVICE);
                    // Add the name and address to an array adapter to show in a ListView
                    devices.add(device.getName() + "\n" + device.getAddress());
                }
            }
        };
        // Register the BroadcastReceiver
        IntentFilter filter = new IntentFilter(BluetoothDevice.ACTION_FOUND);
        _context.registerReceiver(blueToothReceiver, filter);

        return devices;

    }

    /*
     * After the background thread has finished, this class will be called automatically 
     * (non-Javadoc)
     * @see android.os.AsyncTask#onPostExecute(java.lang.Object)
     */
     protected void onPostExecute(ArrayList<String> result) {
         dialog.dismiss(); 
         Toast.makeText(_context, "Finished with the discovery!", Toast.LENGTH_LONG).show(); 

     }

     protected void onDestory() {
          _context.unregisterReceiver(blueToothReceiver);
     }
} 
```

如您所见，该`doInBackground`函数返回所有设备的 Arraylist。我的问题是这个列表根本不包含任何对象。我确定我已经启用了`Discoverable` 任何提示的设备将不胜感激

提前致谢！

**编辑**

下面是我的清单文件：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.com.com"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk android:minSdkVersion="11" />
<uses-permission android:name="android.permission.BLUETOOTH" />
<uses-permission android:name="android.permission.BLUETOOTH_ADMIN"/>

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >
    <activity
        android:name=".MainActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application> 
```

**编辑#2**

我试图将一个虚拟对象添加到列表中，而不是下面的代码行

```
devices.add(device.getName().toString() + "\n" + device.getAddress().toString()); 
```

我试过

```
devices.add("Test"); 
```

但是我调试的时候，arraylist还是空的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T15:37:00.883

首先，java没有函数。它有*方法*。

其次，你不应该在`AsyncTask`这里使用。`AsyncTask`s 用于在 UI 线程之外执行可能代价高昂的操作。蓝牙发现是异步的，所以不需要引入多个线程来发现其他设备。此外，看起来您所做的`AsyncTask`只是定义和注册一个新的`BroadCastReceiver`. 这将在几毫秒内执行（创建/执行实际`AsyncTask`可能需要更长的时间）。因此，您的`onPostExecute`方法将在您注册接收者后*立即被调用。*这可能是让你感到困惑的地方。

请通读本关于 Android 中蓝牙的[文档](http://developer.android.com/guide/topics/connectivity/bluetooth.html)...它将引导您完成设置蓝牙发现应用程序的过程。

# c# - 在 C# 中使用 FFMPEG

> ID：11210421
> 
> 赞同：2
> 
> 时间：2012-06-26T15:11:45.680
> 
> 标签：c#, ffmpeg

我正在尝试使用 C# 中的 FFMPEG 从视频文件中剥离音频。我知道执行此类操作的代码是什么（据我所知），但我不能 100% 确定需要将 ffmpe.exe 文件保存在项目中的什么位置以及如何访问它。到目前为止，我的代码如下：

```
public void stripAudioTest(string videoFilename, ExportProgressWindow callback, string destinationAudioFile)
    {
        string FFMPEG_PATH = "*************"; //not sure what to put here??????

        string strParam = " -i " + videoFileName + " -ab 160k -ar 44100 -f wav -vn " +   destinationAudioFile;
        process(FFMPEG_PATH, strParam);
        callback.Increment(100);

    }

    public void process(string Path_FFMPEG, string strParam)
    {
        try
        {
            Process ffmpeg = new Process();

            ffmpeg.StartInfo.UseShellExecute = false;
            ffmpeg.StartInfo.RedirectStandardOutput = true;
            ffmpeg.StartInfo.FileName = Path_FFMPEG;
            ffmpeg.StartInfo.Arguments = strParam;

            ffmpeg.Start();

            ffmpeg.WaitForExit();

        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.Message);
        }
    }` 
```

如果有人有任何想法，请告诉我。什么都有帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T16:03:04.563

您可以使用任何您想要的绝对或相对路径。

但我建议不要使用相对路径，以防“当前目录”发生变化。

在 WinForms 下，您可以使用 ExecutablePath 并将 exe 放入您自己的 Bin 文件夹中。

```
 // winforms
 string FFMPEG_PATH = Path.Combine(
      Path.GetDirectoryName( Application.ExecutablePath), 
      "ffmpeg.exe"); 
```

对于控制台应用程序，我找不到如此简单的方法来获取 Exe 路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T16:18:02.203

您可以将 ffmpeg.exe 目录添加到您的解决方案中。将其设置`Build Action`为`Content`并设置`Copy to Output Directory`为`Copy always`：

![在此处输入图像描述](../Images/d5d7daafed94a9fd72d0d51979240777.png)

现在这将确保它与可执行文件一起存在于您的 bin 目录中。然后，您可以像这样修改您的方法：

```
 public void stripAudioTest(string videoFilename, ExportProgressWindow callback, string destinationAudioFile)
    {
        var appDirectory = Path.GetDirectoryName(Application.ExecutablePath);
        var FFMPEG_PATH = Path.Combine(appDirectory, "ffmpeg.exe");
        if (!File.Exists(FFMPEG_PATH))
        {
            MessageBox.Show("Cannot find ffmpeg.exe.");
            return;
        }

        string strParam = " -i " + videoFilename + " -ab 160k -ar 44100 -f wav -vn " + destinationAudioFile;
        process(FFMPEG_PATH, strParam);
        callback.Increment(100);
    } 
```

# r - 通过 R 中的数据子集执行计算

> ID：11210422
> 
> 赞同：5
> 
> 时间：2012-06-26T15:11:47.607
> 
> 标签：r, foreach, subset

我想为我的数据框PERMNO列中的每个公司编号执行计算，其摘要可以在这里看到：

```
> summary(companydataRETS)
     PERMNO           RET           
 Min.   :10000   Min.   :-0.971698  
 1st Qu.:32716   1st Qu.:-0.011905  
 Median :61735   Median : 0.000000  
 Mean   :56788   Mean   : 0.000799  
 3rd Qu.:80280   3rd Qu.: 0.010989  
 Max.   :93436   Max.   :19.000000 
```

到目前为止，我的解决方案是创建一个包含所有可能的公司编号的变量

```
compns <- companydataRETS[!duplicated(companydataRETS[,"PERMNO"]),"PERMNO"] 
```

然后使用使用并行计算的 foreach 循环调用我的函数 get.rho() 依次执行所需的计算

```
rhos <- foreach (i=1:length(compns), .combine=rbind) %dopar% 
      get.rho(subset(companydataRETS[,"RET"],companydataRETS$PERMNO == compns[i])) 
```

我针对我的数据子集对其进行了测试，并且一切正常。问题是我有 7200 万次观察，即使让计算机通宵工作，它仍然没有完成。

我是 R 的新手，所以我想我的代码结构可以改进，并且有更好（更快，计算量更少）的方式来执行相同的任务（可能使用 apply 或 with，这两个我都不明白） . 有什么建议么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T21:11:08.247

按照[Joran](https://stackoverflow.com/users/324364/joran)的建议，我查看了图书馆`data.table`。对代码的修改是

```
library(data.table) 
companydataRETS <- data.table(companydataRETS)
setkey(companydataRETS,PERMNO)

rhos <- foreach (i=1:length(compns), .combine=rbind) %do% 
      get.rho(companydataRETS[J(compns[i])]$RET) 
```

我按照最初的方式运行代码（使用`subset`）和一次使用`data.table`，变量`compns`仅包含数据集中 28659 家公司中的 30 家。以下是`system.time()`两个版本的输出：

使用`subset`：

> 用户............系统......经过
> 43.925...... 12.413...... 56.337

使用`data.table`

> 用户.......系统......经过
> 0.229...... 0.047....... 0.276

（出于某种原因，使用`%do%`而不是`%dopar%`原始代码使其运行得更快。for`system.time()`是`subset`使用`%do%`的那个，在这种情况下，两者中的速度更快。）

我让原始代码运行了一夜，5个小时后还没有完成，所以我放弃并杀死了它。通过这个小修改，我在不到 5 分钟的时间内得到了结果（我想大约 3 分钟）！

编辑

有一种更简单的方法可以使用`data.table`，而不使用`foreach`，其中包括将上面代码的最后一行替换为

```
rhos <- companydataRETS[ , get.rho(RET), by=PERMNO] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T15:30:12.767

有很多方法可以做这样的事情，你的`foreach`解决方案就是其中之一。仅查看您提供的代码，我只能猜测最合适的解决方案...

但是，我认为您的代码中最大的减速实际上是您的`get.rho`函数，而不是循环或子集。如果你想分享这个功能，我敢打赌你会得到一些惊人的答案，既能加快速度，又能澄清一些“R-isms”。

话虽如此，还有很多替代方法可以做你正在做的事情。

该`plyr`软件包是为这种类型的计算量身定制的。它使用拆分-应用-组合策略。函数的前两个字母表示输入和输出数据类型。

由于您要输入 data.frame 并输出 data.frame，`ddply`因此要使用的函数是：

```
library(plyr)
ddply(companydataRETS, .(PERMNO), summarise, get.rho(RET)) 
```

如果您不在 Windows 上，您可以轻松地使用多线程计算

```
library(doMC)
registerDoMC()
ddply(companydataRETS, .(PERMNO), summarise, get.rho(RET), .parallel=TRUE) 
```

`tapply`也是一个完美的候选人：

```
tapply(companydataRETS$RET, companydataRET$PERMNO, get.rho) 
```

正如评论中提到的，该`data.table`软件包在这方面也很出色，但我将把该代码作为练习留给读者。

但是，正如我上面所说，如果您的`get.rho`函数很慢，那么无论您使用子集和循环技术多么聪明，计算都将花费很长时间。

* * *

在帖子中编辑功能代码：

如果这是时间序列数据，或者可以这样处理的数据，那么有许多包和函数可以进行这种滞后比较。我对它们不是很精通，但是快速浏览一下 google 和 CRAN 任务视图会让你对你的选择有一个很好的概述。

我没有对它进行基准测试，但我认为可以安全地假设代码中最慢的部分在`lm`调用中。对您的数据而不是完整数据执行此操作`sample`将大大加快速度。但我敢肯定，有人会有更好、更完整的解决方案。

# iphone - Facebook SSO 在 safari 中授权，但不在 facebook 应用程序中授权

> ID：11210425
> 
> 赞同：2
> 
> 时间：2012-06-26T15:11:50.813
> 
> 标签：iphone, ios, facebook

我的问题：我在我的 iPhone/iPad 上开发了一个带有 Facebook SSO 的应用程序。它工作正常。

但是我已经更改了我的应用程序的证书（所以现在它有了新的应用程序 ID）。我还更改了 Facebook 中的“iOS 包 ID”属性：我删除了旧应用 ID，并添加了新应用 ID。

但是现在我的应用程序在安装 Facebook 应用程序时不执行 Facebook SSO。当没有安装 Facebook 应用程序并且它使用 Safari 时，它可以正常工作。

我已经阅读[了这个问题](http://facebook.stackoverflow.com/questions/7239291/facebook-sso-authorize-in-safari-but-not-facebook-app-in-my-iphone)和[这个问题](http://facebook.stackoverflow.com/questions/7572107/ios-facebook-connect-not-working-when-user-has-fbs-app-installed)，[这个问题](https://stackoverflow.com/questions/9777557/facebook-sdk-ios-login-with-facebook-app-installed)说问题是“iOS 包 ID”和应用程序 ID 不匹配。我检查了很多次，都是一样的。

我已将旧的应用程序 ID 放入 Facebook 的“iOS 包 ID”属性中，但它仍然无法正常工作。

我不知道 Facebook 是否花时间检查我的应用 ID 是否有效，以及它们如何显示结果。

我在这个问题上花了很多时间。似乎问题在于 iOS 包 ID 不完全是应用 ID，但这不是问题：它们完全相同。

非常感谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T07:08:17.310

问题是当我在 Facebook 中注册应用程序时，我将“seedID.bundleID”作为 iOS 包 ID 属性。这是不正确的，但令人难以置信的是它起作用了。所以当我想修改它以选择新的应用程序ID时，我输入了新的完整ID，它没有工作。它仅在我输入捆绑 ID（仅后缀）时才有效。

这让我觉得开发人员第一次放置“iOS 包 ID”时，Facebook 不会验证它。但是下次修改 iOS 包 ID 时，facebook 会对其进行验证。

# emacs - 如何根据 GUI 使用情况设置 Emacs 设置？

> ID：11210433
> 
> 赞同：2
> 
> 时间：2012-06-26T15:12:16.523
> 
> 标签：emacs

无论出于何种原因，当我按下`backspace`emacs（终端版本）时，它会删除光标之前的字符，但 emacs GUI（对于 Mac）中的相同按键会删除光标下的字符。`normal-erase-is-backspace-mode`任何人都可以根据emacs会话是否在GUI中向我指出如何设置的方向吗？

根据记录，在这两种情况下`C-h k`，`backspace`密钥都绑定到`DEL`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T15:49:27.827

我在 Mac 下的 emacs 配置中使用以下内容来使退格正常工作：

```
;; Fix Delete key and activate graphical frame.
(defun my-make-frame-hook ()
  (when (window-system)
    (normal-erase-is-backspace-mode t)
    (when (fboundp 'ns-do-applescript)
      (ns-do-applescript "tell application \"Emacs\" to activate"))))

;; Do this for initial frame...
(my-make-frame-hook)

;; ...and for any subsequently created frame.
(add-hook 'after-make-frame-functions
          '(lambda (frame)
             (select-frame frame)
             (my-make-frame-hook))) 
```

即使您使用的是守护程序模式，该解决方案也足够强大，可以完美运行。

（ns-do-applescript 显然是为了提升新框架。）

`(window-system)`你应该对这里特别感兴趣。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T15:49:47.970

如果 emacs 正在使用窗口系统，或者它是终端会话，则该函数[`display-graphic-p`](https://www.gnu.org/software/emacs/manual/html_node/elisp/Display-Feature-Testing.html)将返回。你可以这样做：`t``nil`

```
(setq normal-erase-is-backspace (display-graphic-p)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T15:59:42.440

你使用的是什么版本的 Emacs？您必须配置任何东西才能使退格起作用，这似乎很可疑。

从...开始

```
emacs -Q 
```

并描述退格是如何工作的。

# c# - 检查编码中是否存在字符

> ID：11210435
> 
> 赞同：8
> 
> 时间：2012-06-26T15:12:17.207
> 
> 标签：c#, .net, encoding, character-encoding

我正在编写一个程序，该程序的一部分在 CP437 中呈现位图字体。

在呈现文本的函数中，我希望能够`char`在编码转换之前检查 a 在 CP437 中是否可用，例如：

```
public static void DrawCharacter(this Graphics g, char c)
{
    if (char_exist_in_encoding(Encoding.GetEncoding(437), c) {
        byte[] src = Encoding.Unicode.GetBytes(c.ToString());
        byte[] dest = Encoding.Convert(Encoding.Unicode, Encoding.GetEncoding(437), src);
        DrawCharacter(g, dest[0]); // Call the void(this Graphics, byte) overload
    }
} 
```

如果不检查，CP437 之外的任何字符都将导致`'?'`(63, 0x3F)。我想完全隐藏任何无效字符。`char_exist_in_encoding` *除了以下愚蠢的方法之外，*还有其他的实现吗？

```
private static bool char_exist_in_encoding(Encoding e, char c)
{
    if (c == '?')
        return true;
    byte[] src = Encoding.Unicode.GetBytes(c.ToString());
    byte[] dest = Encoding.Convert(Encoding.Unicode, e, src);
    if (dest[0] == 0x3F)
        return false;
    return true;
} 
```

* * *

* * *

也许不是很相关，但位图是这样创建的：

```
Bitmap b = new Bitmap(256 * 8, 16);
Graphics g = Graphics.FromImage(b);
g.TextRenderingHint = System.Drawing.Text.TextRenderingHint.SingleBitPerPixelGridFit;
Font f = new Font("Whatever 8x16 bitmap font", 16, GraphicsUnit.Pixel);
for (byte i = 0; i < 255; i++)
{
    byte[] arr = Encoding.Convert(Encoding.GetEncoding(437), Encoding.Unicode, new byte[] { i });
    char c = Encoding.Unicode.GetChars(arr)[0];
    g.DrawString(c.ToString(), f, Brushes.Black, i * 8 - 3, 0); // Don't know why it needs a 3px offset
}
b.Save(@"D:\chars.png"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T15:40:40.617

感谢 Vlad，经过一番研究，`EncoderFallback`我终于[在 MSDN 中看到了一个示例](http://msdn.microsoft.com/en-us/library/ms404377.aspx#snippetGroup4)

我的工作（也许是临时工作）代码是：

```
public static void DrawCharacter(this Graphics g, char c)
{
    byte[] src = Encoding.Unicode.GetBytes(c.ToString());
    byte[] dest = Encoding.Convert(Encoding.Unicode, Encoding.GetEncoding(437, new EncoderReplacementFallback(" "), new DecoderReplacementFallback(" ")), src);
    DrawCharacter(g, dest[0]);
} 
```

它将无效字符替换为空格`" "`。

**PS**我最初使用空`string` `""`作为替换，但最后我决定使用空格字符，因为它看起来更干净。

# java - 如何在安卓应用上进行实时更新

> ID：11210437
> 
> 赞同：0
> 
> 时间：2012-06-26T15:12:21.633
> 
> 标签：java, android, xml, sqlite

我是编程和开发应用程序的新手，所以请放轻松。基本上我希望能够经常更新一些文本，而不必更新整个应用程序。我不知道该怎么做。任何反馈都会很好

编辑：我应该提到我在做什么。我为我的游泳池制作了一个应用程序，我想添加的一项功能将允许人们在他们除冰之前查看游泳池中有多少人。所以我需要在我的应用程序的某个部分不断更改我的文本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T15:29:05.040

您是说您希望应用程序中的某些文本（例如项目列表或应用程序中的某个段落）可以在不发布新 APK 的情况下进行更新？

如果是这样，那么您将需要实现某种客户端-服务器模型，在该模型中，应用程序会检查您的服务器以显示正确的文本。

您不能简单地更新编码到应用程序（或在 strings.xml 中设置）的文本，因为所有这些数据都被编译到 APK 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T15:30:54.043

您需要实现一个服务器（php 中的几个代码就足够了）来存储您想要在应用程序中显示的文本行。

应用程序（在这种情况下是客户端）然后必须调用服务器并询问它要显示的行。

你应该用谷歌搜索“android 客户端服务器”。别担心，这是一个很容易的问题。

# backbone.js - 动态分配backbone.js视图el的正确方法

> ID：11210438
> 
> 赞同：27
> 
> 时间：2012-06-26T15:12:23.130
> 
> 标签：backbone.js

我想创建两个（或更多）视图实例，每个实例具有不同的 el 属性，并通过backbone.js 视图的事件哈希（而不是通过 jQuery）将事件绑定到它们。

当所有实例化都相同时触发事件`el`很容易：

```
someView = Backbone.View.extend({
  el: '#someDiv',

  events: {
    'click': 'someFunction'
  },

  someFunction: function(){
    //Do something here
  }
}); 
```

到目前为止，如果我`el`在`initialize`函数中分配，`events`并按如下方式正常设置，事件不会触发：

```
someView = Backbone.View.extend({
  events: {
    'click': 'someFunction'
  },

  initialize: function( options ){
    this.el = options.el
  },

  someFunction: function(){
    //Do something here
  }
}); 
```

我的第一直觉是拥有`el`一个返回感兴趣的 dom 元素的字符串表示的函数：

```
someView = Backbone.View.extend({
  el: function(){
    return '#someDiv-' + this.someNumber
  },

  events: {
    'click': 'someFunction'
  },

  initialize: function( options ){
    this.someNumber = options.someNumber
  },

  someFunction: function(){
    //Do something here
  }
}); 
```

但是，`someFunction`如果我有 x 个`someView`.

接下来我尝试在中设置`el`和`events`属性`initialize`：

```
someView = Backbone.View.extend({

  initialize: function( options ){
    this.el = options.el
    this.events = {
      'click': 'someFunction'
    }
  },

  someFunction: function(){
    //Do something here
  }
}); 
```

但这不会触发事件。在这一点上，我几乎钓鱼。

有谁知道如何使用`el`特定于该实例的具有仅触发该实例而不是其他实例的事件的实例来实例化主干.js 视图`View`？

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-06-26T15:41:49.117

你实际上并不需要经历所有“this.element”的东西。

Backbone 自动将视图的“el”设置为作为选项传递给构造函数的“el”。

然后在整个视图中以“this.el”的形式提供。

这就是您需要做的所有事情：

```
x = Backbone.View.extend({
    events: {
      'click': 'say_hi'
    },

    initialize: function( options ){
        // Not actually needed unless you're doing something else in here
    },

    say_hi: function(){
      alert( this.el.id );
    }

  });

y = new x( {el: '#div-1'} );
z = new x( {el: '#div-2'} );

z.say_hi();
y.say_hi();
​ 
```

看到这个现场 jsFiddle：http: [//jsfiddle.net/edwardmsmith/QDFwf/15/](http://jsfiddle.net/edwardmsmith/QDFwf/15/)

您的第二个示例不起作用的原因是，使用最新版本的 Backbone，您不能再直接设置“el”。正如您所注意到的，这不会正确设置/更新事件。

**不工作**

```
initialize: function( options ){
  this.el = options.el;
} 
```

如果您想以这种方式动态设置 el ，则需要使用[View.setElement](http://backbonejs.org/#View-setElement)，因为它可以正确委托事件并设置缓存的[this.$el](http://backbonejs.org/#View-$el)。

**作品**

```
initialize: function( options ){
  this.setElement(options.el)
} 
```

您的第二个示例的实时 jsFiddle：http: [//jsfiddle.net/edwardmsmith/5Ss5G/21/](http://jsfiddle.net/edwardmsmith/5Ss5G/21/)

但这只是重新做 Backbone 中已经在做的事情。

# c# - 使用反射更改属性时引发事件

> ID：11210440
> 
> 赞同：7
> 
> 时间：2012-06-26T15:12:29.503
> 
> 标签：c#, reflection, propertychanged

我在 C# 中工作，并且我有一个只能使用`Reflection`（出于某些个人原因）访问的对象。因此，当我需要为其属性之一设置一些值时，我会执行以下操作：

```
System.Reflection.PropertyInfo property = this.Parent.GetType().GetProperty("SomeProperty");
object someValue = new object(); // Just for example
property.SetValue(this.Parent, someValue, null); 
```

而且，为了获得它的价值，我使用了 method `GetValue`。

我的问题是：**有没有办法在使用反射更改属性时触发事件？**

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-26T15:14:38.427

> 有没有办法在使用反射更改属性时触发事件？

除非属性设置器本身提出它，否则不会。没有任何东西“监视”所有属性的变化，并在它们发生变化时引发事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T12:32:01.940

您可以在 WPF 应用程序中使用 Inotifychanged .. 当发生与属性相关的某些事件时自动更改属性值

# android - android.permission.CALL_PHONE：为手机和平板电脑制作单个 apk：

> ID：11210442
> 
> 赞同：4
> 
> 时间：2012-06-26T15:12:31.220
> 
> 标签：android

我希望我的应用同时适用于手机和平板电脑。手机和平板电脑版本之间的唯一区别是：在“手机”版本中，我的应用程序有按钮，允许拨打特定号码的电话。我的问题是什么：为了能够打电话，我需要向清单文件添加权限-

```
<uses-permission android:name="android.permission.CALL_PHONE" /> 
```

此权限使应用程序与平板电脑不兼容。如果我删除权限，应用程序无法拨打正在手​​机上启动的电话。如何制作一个同时支持手机和平板电脑并允许从手机拨打电话的应用程序？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-26T15:53:28.513

Play Store 上的单个应用程序可以有多个 apk，很多应用程序使用它来自定义体验。如果您在 Play 商店页面上看到提到的 Android 版本有所不同，那么您就知道他们正在遵循这种方法。

您可以在第二个项目中删除此权限并删除与电话相关的代码。根据设备的类型，Play Store 将显示相应的 apk（即电话权限 apk 用于手机，第二个用于平板电脑）

**或者**

在 Android Manifest 文件中使用

```
<uses-feature android:name="android.hardware.telephony" android:required="false" /> 
```

在你的代码中

```
boolean hasTelephony = context.getPackageManager().hasSystemFeature(PackageManager.FEATURE_TELEPHONY); 
```

我已从[Supporting android devices with phone and without phone capabilities中获取此信息](https://stackoverflow.com/questions/5294881/supporting-android-devices-with-phone-and-without-phone-capabilities)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T15:19:06.367

请参考这个问题，[android.permission.CALL_PHONE 用于平板电脑](https://stackoverflow.com/questions/7882955/android-permission-call-phone-for-tablets)，手机应用程序通常适用于平板电脑，如果您遇到问题，请考虑发布两个不同版本的应用程序，一个用于手机，另一个用于平板电脑。

# svn - 使用 hgsubversion 将 SVN 转换为 Mercurial？

> ID：11210447
> 
> 赞同：3
> 
> 时间：2012-06-26T15:13:02.713
> 
> 标签：svn, mercurial, hgsubversion

我想知道如何使用[HgSubversion 工具](https://www.mercurial-scm.org/wiki/HgSubversion)将 SVN 存储库转换为 Mercurial 存储库。我尝试了该`hg convert`命令（来自[ConvertExtension](https://www.mercurial-scm.org/wiki/ConvertExtension)），但我的存储库失败了。

任何想法如何让 hgsubversion 从 SVN 转换为 Mercurial 的语法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-26T15:16:15.750

只需在`hgsubversion`启用扩展的情况下克隆存储库，您就可以开始了。

然而，有几个...

# 你应该注意的事情

## 非标准 SVN repo 布局

如果您没有经典的树干/分支/标签布局，您可能需要做一些调整。

## 大型 SVN 存储库（大量提交）

初始克隆非常耗时，如果与 repo 的连接断开，则无法恢复操作，这意味着所有工作都将回滚。

这里的解决方案是只克隆第一个修订版

```
hg clone -r1 svn://repo 
```

那么你也能

```
hg pull 
```

您*可以*恢复，并将提取所有其他提交。

## 杂项

克隆完成后，调整 的`[paths]`部分`.hg/hgrc`以使其指向正确的存储库，或者如果您的克隆将充当中央存储库，则将其删除。

# cassandra - 两个节点环中的 Cassandra 批量数据写入失败

> ID：11210450
> 
> 赞同：0
> 
> 时间：2012-06-26T15:13:10.897
> 
> 标签：cassandra

我有两个节点 cassandra 环。在其中一台服务器上，我正在执行一些批量写入操作 - 扫描文件夹以查找文件列表并将列表写入本地 Cassandra。那里大约有 500,000 个文件。我在每个突变中放入 250 个值。

问题：我在加载过程中收到**mphaeHUnavailableException**。此外，我注意到另一个节点上有奇怪的事情。负载显着增加：

写操作前：

```
me@10.1.18.55:~$ nodetool -h localhost ring
Address         DC          Rack        Status State   Load            Owns                Token
                                                                              85070591730234615865843651857942052864
10.1.18.51      datacenter1 rack1       Up     Normal  221.3 KB        50.00%              0
10.1.18.55      datacenter1 rack1       Up     Normal  185.65 KB       50.00%              85070591730234615865843651857942052864 
```

写操作后

```
me@10.1.18.55:~$ nodetool -h localhost ring
Note: Ownership information does not include topology, please specify a keyspace. 
Address         DC          Rack        Status State   Load            Owns                Token                                       
                                                                                           85070591730234615865843651857942052864      
10.1.18.51      datacenter1 rack1       Up     Normal  124.44 MB       50.00%              0                                           
10.1.18.55      datacenter1 rack1       Up     Normal  303.39 KB       50.00%              85070591730234615865843651857942052864 
```

它会以某种方式使我的负载崩溃吗？

Cassandra 版本 1.1.0，一致性类型 Quorum。

这是mutator实现位：

```
 mutator.addInsertion("items", columnFamily, HFactory.createColumn(
        i.getAndIncrement(), xml, LongSerializer.get(),
        StringSerializer.get())); 
```

要写入一个大“项目”行的数据接缝......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T17:30:27.177

如果您将事物建模为 One Big Row，请不要这样做；行是分区和复制的单位，因此您需要（许多）比环中的节点更多的行，以获得良好的负载分布。

UnavailableException 可能确实意味着您正在使集群超载。你可以限制你的写入——使用“nodetool tpstats”来查看它落后了多远——或者切换到 Dalius 链接的批量加载程序，它旨在处理这种情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-21T16:31:50.490

请确保行分区的大小不应超过 100Mb。您可以使用 cfstats 进行检查。

对于列族，以下统计数据很重要，值应小于 100Mb。如果超过限制，将导致压缩开销，节点将离线。

压缩分区最大字节数：[值] 压缩分区平均字节数：[值]

# maven - 通过 Maven 构建具有不同 JDK 版本的 JAR

> ID：11210453
> 
> 赞同：6
> 
> 时间：2012-06-26T15:13:14.387
> 
> 标签：maven, java

我们目前正忙于升级到 Java 1.7。不幸的是，随着这些事情的发展，许多应用程序无法在 1.7 下编译并中断（即使将覆盖标志传递给 1.7）。计划是尽快重新考虑这些因素。

我想以这样一种方式配置 Maven，即可以根据 POM 中的某些属性使用不同的 JDK。我按照[http://maven.apache.org/plugins/maven-compiler-plugin/examples/compile-using-different-jdk.html](http://maven.apache.org/plugins/maven-compiler-plugin/examples/compile-using-different-jdk.html)信守承诺，但无论我做什么，maven 都会忽略 POM 中指定的 java .

POM 具有以下条目：

```
<build>
    <plugins>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-compiler-plugin</artifactId>
            <version>2.5.1</version>
            <configuration>
                <fork>true</fork>
                <source>1.6</source>
                <target>1.6</target>
                <compiler-version>1.6</compiler-version>
                <executable>/usr/lib/jvm/java-6-openjdk/bin/javac</executable> 
                <debug>true</debug>
                <verbose>true</verbose>
            </configuration>
        </plugin>
... 
```

此外，我没有从“详细”标志中得到任何输出——我觉得这很奇怪。也许以上完全被忽略了？

编辑：我知道它不起作用，因为检查 META-INF/MANIFEST.MF 文件显示不正确的 java 版本。使用的版本与当前路径中的 javac 相对应。

```
Manifest-Version: 1.0
Archiver-Version: Plexus Archiver
Created-By: Apache Maven
Built-By: jaco
Build-Jdk: 1.7.0_147-icedtea
Implementation-Title: xxx
Implementation-Vendor: xxx
Implementation-Version: 1.3.7
Specification-Title: xxx
Specification-Vendor: xxx
Specification-Version: 1.3.7 
```

编辑：其他一些相当有趣的东西。如果我故意破坏 中的文件引用，我会得到：

```
[INFO] Compilation failure
Failure executing javac,  but could not parse the error:
/bin/sh: /usr/lib/jvm/java-6-openjdk: Permission denied 
```

编辑：我怀疑问题出在构建清单文件的组件上。如果我在我的机器上破坏 java 7（即将 javac 重命名为 javac.pleasegoaway），它会编译！！但是，清单文件仍然报告版本 1.7。现在这已经过去烦人并且变得热闹了。

一些帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T16:36:52.023

编译和 jar-ing 是 2 个独立的操作。更改编译器路径时出现编译错误这一事实表明编译正在正确进行。maven jar 插件很可能正在使用 java7 jar 工具来创建 jar 文件。

# image-processing - 是否可以保存用户的骨骼和面部数据以用于识别目的？

> ID：11210461
> 
> 赞同：4
> 
> 时间：2012-06-26T15:13:37.400
> 
> 标签：image-processing, save, kinect, face-detection

我希望能够跟踪进出场所的人。基本上，当用户接近 Kinect 时，它会存储他/她的面部和骨骼数据。然后在离开时，该数据将被删除。现在我只是想知道这是否可能与 Microsoft SDK 一起使用。我看过 Kinect 能够跟踪人的视频/演示，但我的目标是**唯一地**识别他们。任何信息将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T13:10:14.363

是的，您可以保存骨骼和面部数据....但是对于您正在做的事情，听起来您只想为会话保存它。因为一旦他们离开，数据就会被删除，您可以使用[Skeleton Tracking ID](http://msdn.microsoft.com/en-us/library/microsoft.kinect.skeleton.trackingid.aspx) ... 或 Indexes

```
SkeletonFrame sf = e.SkeletonFrame;
//check which skeletons in array are active and
// use that array indexes for player index
SkeletonData player1 = sf.Skeletons[playerIndex1];
SkeletonData player2 = sf.Skeletons[playerIndex2]; 
```

您可以查看我对[Kinect 用户检测](https://stackoverflow.com/questions/10577862/kinect-user-detection/10584231#10584231)的回答以获取更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T15:27:40.877

您可能能够存储骨骼数据，但据我所知，Kinect 不具备面部识别所需的分辨率（特别是如果您要将它放在房间的角落）。

有 3D 人脸识别的商业解决方案 - [Cybula](http://www.cybula.com/Facenforce.htm)，但这些解决方案通常花费数千美元。

我不知道骨骼数据有多准确 - 如果您的所有用户都相同，那么您可能会遇到一些问题。您必须计算出测量的容差，并确保没有任何用户在此范围内（如果这是针对公众的，则可能是一个问题）。

# spring - Spring MVC 获取WEB-INF下的文件无需请求

> ID：11210465
> 
> 赞同：26
> 
> 时间：2012-06-26T15:13:45.453
> 
> 标签：spring, spring-mvc

我正在尝试获取下的文件（或目录）`/WEB-INF/.../`

在请求之外。我需要它在服务器启动时加载的 bean 中。

我能找到的所有解决方案要么需要使用 XML 文件，`ClassPathXmlApplicationContext`要么需要获取 servlet 上下文或使用当前执行类的请求。在我看来很难看。

我怎样才能得到一个`File("/WEB-INF/myDir/")`. 总得有办法吧！？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-06-26T15:29:42.400

只要您的 bean 在 Web 应用程序上下文中声明，您就可以获得`ServletContext`（使用`ServletContextAware`，或通过自动装配）的实例。

然后您可以直接访问 webapp 目录中的文件（`getResourceAsStream()`, `getRealPath()`），或使用`ServletContextResource`.

莫莫编辑：

```
@Autowired
ServletContext servletContext;

... myMethod() { 
     File rootDir = new File( servletContext.getRealPath("/WEB-INF/myDIR/") );
} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-03-07T13:54:16.623

我使用**Spring** *DefaultResourceLoader*和*Resource*来读取 WEB-INF 内部或 *.jar 文件中的任何资源。像魅力一样工作。祝你好运！

```
import org.springframework.core.io.DefaultResourceLoader;
import org.springframework.core.io.Resource;

public static void myFunction() throws IOException {
    final DefaultResourceLoader loader = new DefaultResourceLoader();               
    LOGGER.info(loader.getResource("classpath:META-INF/resources/img/copyright.png").exists());             
    Resource resource = loader.getResource("classpath:META-INF/resources/img/copyright.png");           
    BufferedImage watermarkImage = ImageIO.read(resource.getFile());
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-06-29T05:26:37.913

```
ClassLoader classLoader = getClass().getClassLoader();
File file = new File(classLoader.getResource("files/test.xml").getFile()); 
```

“files”文件夹应该是“main/resources”文件夹的子文件夹

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-26T15:20:46.030

如果文件位于`WEB_INF\classes`目录中，则可以使用类路径资源。`src/main/resources`使用普通的 Maven 构建将目录中的任何文件复制到其中...

```
import org.springframework.core.io.Resource
...
final Resource yourfile = new ClassPathResource( "myfile.txt"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-09-07T20:04:54.873

如果您只想从服务（而不是通过 ServletContext）访问它，您可以这样做：

```
 final DefaultResourceLoader loader = new DefaultResourceLoader();
    Resource resource = loader.getResource("classpath:templates/mail/sample.png");
    File myFile = resource.getFile(); 
```

请注意，最后一行可能会抛出`IOException`，因此您需要 catch / rethrow

请注意，该文件在这里： `src\main\resources\templates\mail\sample.png`

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2018-11-05T19:57:21.883

```
request.getSession().getServletContext().getResourceAsStream("yourfile.pdf"); 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2016-11-10T12:00:17.037

与您的问题不完全相关，但是...这是我用来从Web应用程序中的任何位置加载属性的一些通用解决方案，例如Spring（支持WEB-INF / ...，类路径：...，文件：.. .)。是基于使用`ServletContextResourcePatternResolver`. 您将需要`ServletContext`.

```
private static Properties loadPropsTheSpringWay(ServletContext ctx, String propsPath) throws IOException {
    PropertiesFactoryBean springProps = new PropertiesFactoryBean();
    ResourcePatternResolver resolver = new ServletContextResourcePatternResolver(ctx);
    springProps.setLocation(resolver.getResource(propsPath));
    springProps.afterPropertiesSet();
    return springProps.getObject();
} 
```

我在我的自定义 servlet 上下文侦听器中使用了上述方法，而 conext 尚未加载。

# r - 如何从函数内部重复创建全局变量，每个变量都有不同的名称？

> ID：11210467
> 
> 赞同：1
> 
> 时间：2012-06-26T15:13:48.533
> 
> 标签：r

我从一个表列表开始，每个表都有相同的列名，但行数不同：

```
filenames<- c('name1','name2','etc')
dat<-lapply(paste(filenames,'.csv',sep=""),read.csv) 
```

然后我为列表中的每个表命名：

```
names(dat)<-filenames 
```

然后我编写了一个函数来处理数据：

```
myfunc<- function (data) {results.table<-some.operations(data)} 
```

我想在“dat”中的每个表上重复运行我的函数：

```
lapply(filenames, function(x) myfunc(dat[[x]],x)) 
```

我正在寻找一些放入“myfunc”的行，它将为“dat”中的每个表创建一个具有唯一名称的全局输出表，以便我可以搜索这些输出。我了解全局运算符 <<- 创建了一个全局变量，但我无法弄清楚如何分配名称。我试过

```
name<<-results.table 
```

但这只是将每个结果表分配给全局变量“名称”，所以最后我只有一个输出 - 函数运行的最后一个表的结果。我也试过

```
paste(name)<<-results.table 
```

和

```
substitute(name)<<-results.table 
```

无济于事。任何建议将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T15:24:53.857

`lapply()`已经打算将函数应用于列表的每个元素并返回结果列表 - 无需让您的函数索引该列表。我认为这就是你真正想要的，但如果我错了，请纠正我：

```
# Define your function - no need for assignment here
myfunc<- function (data) {some.operations(data)}

# Apply your function to each element of dat - lapply returns a list with 
# an element of each result.  Instead of assigning each result globally,
# just assign this list of results
results <- lapply(dat, myfunc) 
```

这样，您将获得另一个不错的结果列表，您可以继续以相同的方式对其进行操作。这种方法对于 R 来说更为典型——如果您真的非常需要分配给全局环境的对象，请告诉我们原因，以便我们可以更好地定制我们的答案。

# jquery-masonry - 我可以在 em 中设置 jquery masonry columnWidth（所以文本缩放有效）

> ID：11210468
> 
> 赞同：1
> 
> 时间：2012-06-26T15:13:53.610
> 
> 标签：jquery-masonry

是否可以以 em 单位而不是像素为单位指定砌体 columnWidth？

```
$(function(){
  $('#container').masonry({
    itemSelector : '.item',
    columnWidth : '20em', 
```

我的目标是创建一个在与 Firefox“仅缩放文本”一起使用时稳健的布局。一般来说，我不会在其他任何地方使用像素单位……这个网站上的所有内容都是 em 单位。

当我尝试上述 columnWidth 时，所有 div 都堆叠在一起，就好像 columnWidth 为零一样。

香草砖石的答案也将满足这一愿望。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T16:59:58.843

是的，@desandro 在[https://github.com/desandro/masonry/issues/227](https://github.com/desandro/masonry/issues/227)提供了一种可能的前进方式，将事物保留在像素中，但计算 em 的宽度。它需要一些调整，但可以使其工作：

```
 var $container = $('#container');
  var em = parseFloat( $container.css('font-size') );
  $container.masonry({
    columnWidth: 10 * em
  }); 
```

# asp.net - 数据库列总和到 ASP.NET 的计算帮助

> ID：11210469
> 
> 赞同：0
> 
> 时间：2012-06-26T15:13:55.230
> 
> 标签：asp.net, sql, database, stored-procedures

在我的 ASP.NET 页面中，我有一个 gridview，当您进入编辑模式时，您可以手动输入值以保存到数据库中。我的数据库列之一是“金额”列，其中包含与特定年份的用户条目有关的不同金额。

我正在寻找的是一种计算，无论是在我的 SQL 过程中还是在后面的代码中，将用户条目的数量一起添加到数量列中，并以一个流畅的动作将它们显示在我的 asp.net 页面上的文本框中。这是我在sql中用于将数据存储到数据库的代码如下：

```
ALTER PROCEDURE [dbo].[InsertData]
@amt money,
@date datetime,
@cmmt nvarchar(255),
@int nvarchar(3)
AS
BEGIN
SET NOCOUNT ON;

INSERT INTO [DB1].[dbo].[BE_AdjustBudgetTbl]
([BE_Adj_AMOUNT],[BE_Adj_APPRV_D],[BE_Adj_COMMENT],[BE_Adj_Initials]) 
VALUES (@amt,@date,@cmmt,@int)

END 
```

目前，我只是将输入的值从金额列中提取并将它们粘贴到我的文本框中，而没有计算部分，如果有多个记录，这将不起作用：

```
 txtTotal.Text = txtTotal.ToString + amt
 Dim calc As Double = Convert.ToString(Double.Parse(txtIntAppr.Text) + txtTotal.Text)
 txtTotalAll.Text = Convert.ToInt32(calc) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T15:43:36.103

调整您的存储过程以进行计算

```
ALTER PROCEDURE [dbo].[InsertData] 
@amt money, 
@date datetime, 
@cmmt nvarchar(255), 
@int nvarchar(3),
@total money output
AS 
BEGIN 
SET NOCOUNT ON; 

INSERT INTO [DB1].[dbo].[BE_AdjustBudgetTbl] 
([BE_Adj_AMOUNT],[BE_Adj_APPRV_D],[BE_Adj_COMMENT],[BE_Adj_Initials])  
VALUES (@amt,@date,@cmmt,@int) 

SELECT @total = SUM(BE_Adj_AMOUNT) 
FROM [DB1].[dbo].[BE_AdjustBudgetTbl]
WHERE Year([BE_Adj_APPRV_D]) = year(getdate())

END 
```

将输出参数添加到存储过程调用中，方向设置为`ParameterDirection.Output`

# c - printf %f 分段错误

> ID：11210470
> 
> 赞同：3
> 
> 时间：2012-06-26T15:13:56.427
> 
> 标签：c, segmentation-fault, printf, stdio

我在函数中有这段代码。我想打印`y`这里的值。

```
if (x1 < 0 || y1 < 0) {

    // Vertical lign outside of layer
    if (dx == 0 && y1 < 0) {
        return GKIT_NOERR;
    }

    float m = dy / dx;
    float t = y1 - m * x1;
    float x = -t / m;
    float y = m * x + t;

    printf("Hello %s. You are %f years old.\n", "Niklas", y);
} 
```

但是我遇到了分段错误。它*根本没有任何*价值，可以打印为浮点数。我可以将其更改为`%d`或类似的，效果很好。

```
 int val = (int) y;
    printf("Hello %s. You are %d years old.\n", "Niklas", val); 
```

知道 Segfault 来自哪里吗？

**编辑**：完成功能。

```
// coding: ascii
// author: Niklas Rosenstein
// e-mail: rosensteinniklas@googlemail.com

#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include "gkit/defines.h"
#include "gkit/utils.h"
#include "gkit/graphicslayer.h"

#define SWAP_IF_NECCESSARY(x1, y1, x2, y2)  \
    if (x2 < x1 && y2 < y1) {               \
        int temp = x2;                      \
        x2 = x1;                            \
        x1 = temp;                          \
        temp = y2;                          \
        y2 = y1;                            \
        y1 = temp;                          \
    }

/* Based on Bresenhams line algorithm. */
int gk_GraphicsLayer_drawLine(gk_GraphicsLayer* layer, gk_Color* color,
                              int x1, int y1, int x2, int y2,
                              gk_ColorBlendProc blend, gk_float opacity) {
    SWAP_IF_NECCESSARY(x1, y1, x2, y2);

    float dx = x2 - x1;
    float dy = y2 - y1;
    float cx = x1;
    float cy = y1;

    // Figure out where to start in case x1 or y1 are outside of the layer.
    if (x1 < 0 || y1 < 0) {

        // Vertical lign outside of layer
        if (dx == 0 && y1 < 0) {
            return GKIT_NOERR;
        }

        // The function's slope (m)
        // ------------------------
        float m = dy / dx;

        // Find the y-axis intersection (t)
        // -------------------------------
        // y = mx + t   =>
        // y - mx = t

        float t = y1 - m * x1;

        // Compute the root of the function (N)
        // ------------------------------------
        // 0 = mx + t   =>
        // mx = -t      =>
        // x = -t / m

        float x = -t / m;
        float y = m * x + t;

        printf("Hello %s. You are %f years old.\n", "Niklas", y);
    }

    int incx = GKIT_SIGNUM(dx);
    int incy = GKIT_SIGNUM(dy);
    if (dx < 0) { dx = -dx; }
    if (dy < 0) { dy = -dy; }

    int pdx, pdy;
    int ddx, ddy;
    int es, el;

    ddx = incx;
    ddy = incy;

    if (dx > dy) {
        pdx = incx;
        pdy = 0;
        es = dy;
        el = dx;
    }
    else {
        pdx = 0;
        pdy = incy;
        es = dx;
        el = dy;
    }

    float err = el / 2.0;

    #define SET_PIXEL(x, y) \
        do { \
        gk_Color* c = GKIT_GRAPHICSLAYER_ACCESSPIXEL(layer, (int)x, (int)y); \
        if (blend != Null) {                \
            gk_Color t = *c;                \
            blend(color, &t, c, opacity);   \
        }                                   \
        else {                              \
            *c = *color;                    \
        } } while (0)

    SET_PIXEL(cx, cy);

    int t;
    for (t=0; t < el; t++) {
        err -= es;
        if (err < 0) {
            err += el;
            cx += ddx;
            cy += ddy;
        }
        else {
            cx += pdx;
            cy += pdy;
        }
        SET_PIXEL(cx, cy);
    }

    #undef SET_PIXEL

    return GKIT_NOERR;
} 
```

**编辑**：完整的堆栈跟踪：

```
#0 0xb7e68cb0   ___printf_fp(fp=0xb7fc3a20, info=0xbffff684, args=0xbffff6f8) (printf_fp.c:844)
#1 0xb7e63ab0   _IO_vfprintf_internal(s=0xb7fc3a20, format=<optimized out>, ap=0xbffff750 "\001") (vfprintf.c:1623)
#2 0xb7e6cc2f   __printf(format=0x8049da0 "Hello %s. You are %f years old.\n") (printf.c:35)
#3 0x8049143    gk_GraphicsLayer_drawLine(layer=0x804d008, color=0xbffff810, x1=-20, y1=-10, x2=49, y2=200, blend=0, opacity=0) (/home/niklas/git/c-gkit/gkit/graphicslayer.c:180)
#4 0x8049ba4    test_drawLine() (/home/niklas/git/c-gkit/main.c:46)
#5 0x8049c80    main() (/home/niklas/git/c-gkit/main.c:68) 
```

**编辑**：请注意，将它放在 if 子句之后或之前时`printf()` *确实有效。*即类似的东西

```
 printf("Foo: %f\n", 1.0);
    // Figure out where to start in case x1 or y1 are outside of the layer.
    if (x1 < 0 || y1 < 0) {

        // Vertical lign outside of layer
        if (dx == 0 && y1 < 0) {
            return GKIT_NOERR;
        } 
```

**确实有效**，但移动if 子句`printf()` *内部*会产生分段错误。

**更新**：根据*TED*的回答，我进行了一些测试，结果如下：

问题似乎是比较操作 ( `<`) 的结果。我可以

```
if (True) { printf("%f", 53.3); } 
```

但我做不到

```
if (x1 < 0 || y1 < 0) { printf("%f", 53.3); }
// nor
if (x1 < 0) { printf("%f", 53.3); }
// nor
int x_smaller = x1 < 0;
if (x_smaller) { printf("%f", 53.3); } 
```

有趣的是，这有效：

```
int x_smaller = x1 < 0;
int y_smaller = y1 < 0;
x_smaller = y_smaller = 1;
if (x_smaller || y_smaller) { printf("%f", 53.3); } 
```

* * *

*结论*：操作的结果`x1 < 0`和`y1 < 0`在 if 子句中测试的结果`printf()`失败。问题是：

1.  大福？为什么会这样？
2.  我该如何解决？

* * *

如果您对*整个*代码感兴趣，我不介意分享它。它在[github 上](https://github.com/NiklasRosenstein/c-gkit)。这是一个 Code::Blocks 项目。唯一的包含路径必须是文件夹的父目录`gkit`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T15:29:46.650

这正是我讨厌的原因`printf()`。它是在其他容易出错的语言中最容易出错的例程。

处理“奇怪”崩溃的第一件事是简化逻辑以尝试缩小范围。

在这种情况下，接下来我会尝试`1.0`在`printf`. 可能是`printf`你碰巧在那里有一些奇怪的价值的错误。

如果可行（打印`1.0`），那么我的下一步将是尝试打印该变量中的位。对于 C，这可能会将格式更改为`%x`，并将参数更改为类似`*((unsigned int *)(&y))`

如果它不起作用（我猜不是你的评论）继续简化。尝试删除`%s`及其参数（无论如何都是一种不必要的 ATM）。如果仍然失败，请尝试：

*   将损坏的代码片段移动到独立的“main”中，然后（假设它有效）添加代码直到它中断。
*   从现有代码中注释掉代码，直到找到可以使其工作的东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T21:09:13.687

[感谢在聊天](https://chat.stackoverflow.com/rooms/13064/discussion-between-niklas-r-and-unkulunkulu)中提供帮助的 unkulunkulu，我们能够找到问题所在。

我无法相信之前的调用`gk_GraphicsLayer_drawLine`会影响后续调用的行为，但*事实*就是如此。在我的`main()`函数中，我调用了该函数三次。第一次调用意外收到的值也超出了`gk_GraphicsLayer`. 第三个电话是最终使程序崩溃的电话。

这也解释了为什么在*if 子句*（出现错误的地方）修复了段错误之后退出函数。这是因为它阻止了函数访问它不应该访问的内存。

**摘要**：写入无效地址的内存*非常*危险，它甚至会触发一个完全其他的函数失败并导致您错误假设。不幸的是，当无效地址仍在操作系统为您的应用程序提供的内存范围内时，不会收到分段错误错误。

# c# - 如何在列表中查找某些字符串 通过 LINQ？

> ID：11210476
> 
> 赞同：-4
> 
> 时间：2012-06-26T15:14:03.223
> 
> 标签：c#, .net, linq, list

我有这个`List<string>`。

**如何通过 LINQ 获取某些字符串？**

我猜应该是这样的

```
List<string> test = new List<string>;

test.Add("1");

test.Add("2");

test.Add("1");

var dist = test.Where(s=>s  ==  "1") or ??? 
```

或者

```
var dist = test.Distinct(a => a == "1"); ??? 
```

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T15:14:53.410

尝试使用[不同](http://msdn.microsoft.com/en-us/library/bb348436)的方法：

```
var dist = test.Distinct(); 
```

还有一个重载版本的`Distinct`方法允许通过自定义比较器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T15:17:48.880

如果您想找出哪些字符串只在列表中出现一次，您可以使用它：

```
List<string> test = new List<string>() { "1", "2", "1" };
var distinctStrings = test.GroupBy(s => s).Where(g => g.Count() == 1).Select(g => g.Key);
foreach (string str in distinctStrings)
    Console.WriteLine(str); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T01:40:37.127

我找到了答案伙计们！感谢许多------ :)

所以应该是

```
var dist = test.Where(a => a == "1"); 
```

# ios - 浏览 UIViewControllers 的正确方式

> ID：11210477
> 
> 赞同：0
> 
> 时间：2012-06-26T15:14:04.247
> 
> 标签：ios, uiviewcontroller

我正在为 iPad 制作电子书。这本书的每一页都是应用程序 StoryBoard 中的一个视图控制器，它们的页码在 Interface Builder 中设置为它们的标识符。我正在研究实现导航的类，其作用是呈现和关闭视图控制器。它通过在呈现的视图控制器上覆盖一组按钮并处理它们的 IBAction 来实现。

我的问题是某些视图控制器（偶数页）从未出现过！谁能明白为什么？

```
@implementation Navigator

UIViewController *currentPageVC;
UIViewController *nextPageVC;

int currentPage = 0;

-(void)viewDidLoad{
    [self getLandingPage];
}

-(void)getLandingPage{

    currentPageVC = [self.storyboard instantiateViewControllerWithIdentifier:@"Landing"];
    currentPage = 0;
    NSLog(@"Trying to present landing page");
}

-(IBAction)goToNextPage{

    [currentPageVC dismissModalViewControllerAnimated:YES];
    currentPage++;    

    nextPageVC = [self.storyboard instantiateViewControllerWithIdentifier:[NSString stringWithFormat:@"%d", currentPage ]];
    [self presentModalViewController:nextPageVC animated:YES];

    [nextPageVC.view addSubview:self.view];

    currentPageVC = nextPageVC;

    NSLog(@"Current Page is %d", currentPage);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T15:44:00.463

好的，修好了。发生这种情况是因为`presentModalViewController:`不久之后发生的电话`dismissModalViewControllerAnimated:`

为了解决这个问题，你必须使用它的新版本：`dismissViewControllerAnimated:completion:`

```
-(IBAction)goToNextPage{    
    [self dismissViewControllerAnimated:YES completion:^{
        NSLog(@"dismissed!");
        currentPage++;
        UIViewController *nextPageVC = [self.storyboard instantiateViewControllerWithIdentifier:[NSString stringWithFormat:@"%d", currentPage ]];
        [self presentModalViewController:nextPageVC animated:YES];
        [nextPageVC.view addSubview:self.view];

        NSLog(@"Current Page is %d", currentPage);

    }];

} 
```

# javascript - Javascript 表单

> ID：11210479
> 
> 赞同：1
> 
> 时间：2012-06-26T15:14:05.760
> 
> 标签：javascript, function

我有一个快速的问题。我正在学习如何使用 javascript 制作注册表单，并发现此链接非常有用。

[http://www.w3resource.com/javascript/form/javascript-sample-registration-form-validation.php](http://www.w3resource.com/javascript/form/javascript-sample-registration-form-validation.php)

我理解代码中的所有内容，除了 html 页面中的这一行......

```
<body onload="document.registration.userid.focus();"> 
```

我知道它是说当页面加载时运行这个javascript函数，但我不明白每个部分的作用。如果有人可以向我解释这一点，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T15:17:13.517

这意味着当页面加载时，将焦点设置`userid`在表单名称`registration`中的字段上`document`

您可以使用

```
document.getElementById("userid").focus() 
```

这要求选择`userid`. `document`所以我们可以让它没有表单名称

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T15:20:52.450

这是“遍历 ​​DOM”的直接方式。从顶部（文档）开始，然后通过 选择连续元素`name`。表单的`name`is`registration`和元素的`name`is `userid`。调用`.focus()`将光标放在该字段中，以便用户可以在页面加载时立即开始输入，而不是手动突出显示该字段。

# html - 我可以控制struts中s：textfield标签中的字符数吗

> ID：11210488
> 
> 赞同：0
> 
> 时间：2012-06-26T15:14:45.303
> 
> 标签：html, jsp-tags

我想控制 as:textfield tag 中的字符数，

我知道输入类型中有属性，比如 maxlength 在 s:textfield 中是否有类似的东西

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T15:34:28.170

s:textfield 标记中也将使用相同的属性 (maxlength)。

请参阅下面的 struts 文档

[http://struts.apache.org/2.0.11/docs/textfield.html](http://struts.apache.org/2.0.11/docs/textfield.html)

# c# - 为什么重建引用的类库时 WCF 服务输出没有变化？

> ID：11210494
> 
> 赞同：0
> 
> 时间：2012-06-26T15:14:56.823
> 
> 标签：c#, .net, wcf

我有一个非常简单的（新的）RESTful WCF 服务，它使用引用的类库来查询数据库，然后将信息返回到浏览器。如果我修改类库更改返回给WCF服务的数据内容并重新构建，旧数据仍然返回给浏览器。我需要重建类库和 WCF 服务，以便让浏览器显示新数据。我没想到会有这种行为。如果那里没有任何改变，为什么我需要重建 WCF 服务？

我在 SharpDevelop IDE 中使用 C# 进行编码。.NET 4.0

```
Browser --> WCF --> Class library --> Database
                                         |
Browser <-- WCF <-- Class library <------- 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T15:19:59.413

取决于服务的设置方式。如果是网站类型的项目，应该只需要新编译的引用DLL。但是，如果要将 WCF 服务编译为 DLL，它也需要完全重新编译。

# objective-c - 与多个 UIViewController 共享单例数据丢失数据

> ID：11210497
> 
> 赞同：0
> 
> 时间：2012-06-26T15:14:57.637
> 
> 标签：objective-c, memory-management, uiviewcontroller, singleton, data-loss

我有一个由几个 UIViewControllers 组成的菜单系统，焦点由 NavigationController 传递。这些控制器中的大多数都引用（如果不操纵）一个单例，该单例负责管理我的游戏中的课程，称为 CoursesManager <-（不是 UIViewController）。创建和编辑系统运行良好，但我一直遇到一个问题，即我丢失数据或收到一个空的（垃圾数据）课程数组，导致 CoursesManager 在尝试更新其中一个 UIViewController 中的某些标签时崩溃。这种数据丢失总是出现在一个特定“问题”(UIViewController*)ProblemViewController 的以下方法之一中：viewDidAppear、viewWillAppear、viewDidDisappear 和 viewWillDisappear。

我的理论是，当 ProblemUIViewController 尝试访问数据时，另一个 UIViewController 仍会以某种方式使用数据，这会导致数据错误。不过，我不确定如何测试或解决此问题。我对线程在 iPhone 编程中的一般工作方式也有些模糊。在我看来也可能是这种情况，因为 ProblemUIViewController 位于 NavigationController 堆栈的底部。

任何帮助将不胜感激。

**编辑** 这是我收到的错误消息。

> -[CALayerArray isEqualToString:]：无法识别的选择器发送到实例 0x2d31a0
> 
> *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[CALayerArray isEqualToString:]: unrecognized selector sent to instance 0x2d31a0' *** First throw call stack: (0x3262288f 0x34678259 0x32625a9b 0x32624915 0x3257f650 0x3204d3f9 0x3141f 0x3123b 0x3208bb95 0x320e58af 0x3208e913 0x3208e503 0x320d88eb 0x320d8719 0x320bcbc1 0x343cb 0x3257c3fd 0x32064e07 0x32064dc3 0x32064da1 0x32064b11 0x32065449 0x3206392b 0x32063319 0x32049695 0x32048f3b 0x316d022b 0x325f6523 0x325f64c5 0x325f5313 0x325784a5 0x3257836d 0x316cf439 0x32077cd5 0x22c1 0x2280) terminate called throwing an exception(lldb)

当代码进入此函数时，将引发此异常。

> -(void)viewWillAppear:(BOOL)animated { [self refreshCourses]; [自我切换编辑模式：否]；}
> 
> -(void)refreshCourses { struct SCourse* 课程 = [coursesManager GetAllCourses];
> 
> ```
> for(int i = 0; i < MAX_COURSES; ++i)
> {
>     // deactivate all buttons/labels
>     courseButtons[i].hidden = YES;
>     courseLabels[i].hidden = YES;
>     deleteButtons[i].hidden = YES;
> 
>     // remake with current data
>     if(courses[i].inUse == YES)
>     {
>         switch (courses[i].size) 
>         {
>             case 1:
>                 [courseButtons[i] setImage:[UIImage imageNamed:@"sm_coursename_BG.png"] forState:UIControlStateNormal];
>                 break;
>             case 2:
>                 [courseButtons[i] setImage:[UIImage imageNamed:@"med_coursename_BG.png"] forState:UIControlStateNormal];
>                 break;
>             case 4:
>                 [courseButtons[i] setImage:[UIImage imageNamed:@"lg_coursename_BG.png"] forState:UIControlStateNormal];
>                 break;
> 
>             default:
>                 break;
>         }
> 
>         courseLabels[i].text = courses[i].name; // exception thrown here on second iteration of loop with 2 courses to loop through
>         courseLabels[i].hidden = NO;
>         courseButtons[i].hidden = NO;
>     } // if
> } // for  } 
> ```
> 
> -(void)toggleEditMode:(BOOL)bMode {
> 
> ```
> bEditMode = bMode;
> 
> if (bMode == YES) 
> {        
>     for (int i = 0; i < MAX_COURSES; ++i) 
>     {
>         if(courseButtons[i].hidden == NO)
>         {
>             struct SCourse tempCourse = [coursesManager GetCourseAtIndex:i];
>             courseLabels[i].text = [NSString stringWithFormat:@"(edit) %@", tempCourse.name];
> 
>             deleteButtons[i].hidden = NO;
>         }
>     }
> }
> else  // bMode == NO 
> {        
>     for (int i = 0; i < MAX_COURSES; ++i) 
>     {
>         if (courseButtons[i].hidden == NO) 
>         {
>             struct SCourse tempCourse = [coursesManager GetCourseAtIndex:i];
>             courseLabels[i].text = tempCourse.name;
>         }
> 
>         deleteButtons[i].hidden = YES;
>     }
> }  } 
> ```

**调用单例获取所有课程的方法：**

> -(struct SCourse*)GetAllCourses { 返回课程；}

courseManager 是我的单身人士，它拥有所有数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T16:31:52.087

因为您将 isEqualToString: 发送到 CALayerArray 对象，而 CALayerArray 对象不响应 isEqualToString:。

您可能不是故意将该消息发送到 CALayerArray 对象；相反，您将一些字符串对象传递给一些 CALayerArray 对象。

也许您不小心将数据结构的数组指针之一设置为 CALayerArray。

祝你好运

吨

# python - pkg_resources.find_distributions("/dirpath with sdist zip file")

> ID：11210503
> 
> 赞同：2
> 
> 时间：2012-06-26T15:15:02.327
> 
> 标签：python, pkg-resources

看来我无法从 pkg_resources.find_distributions("/dirpath with sdist zip file") 获取分发信息。

有人能给我一些启示吗？

# android - Android 获取 UTFDataFormatException 从文本文件中读取 UTF

> ID：11210504
> 
> 赞同：1
> 
> 时间：2012-06-26T15:15:02.863
> 
> 标签：android, utf, datainputstream

我在我的 Android 应用程序的事件日志中注意到我收到了 UTFDataFormatException 错误。我正在读取的文件是由我的应用程序编写的，尽管它存储有关用户故事的信息，因此它可以包含任何类型的字符/字符串。我想知道读取/写入某些字符是否有问题？

我使用以下方法编写：

```
dos.writeUTF(myJSONString); 
```

我阅读使用：

```
textJSONString = dis.readUTF(); 
```

我记录的一些错误堆栈跟踪是：

```
class: class java.io.UTFDataFormatException

message: bad second or third byte at 1795

    java.io.charset.ModifiedUtf8.decode(ModifiedUtf8.java:53) 
java.io.DataInputStream.decodeUTF(DataInputStream.java:444) 
java.io.DataInputStream.decodeUTF(DataInputStream.java:438) 
java.io.DataInputStream.readUTF(DataInputStream.java:433)... 
```

我已经查找了解码方法的来源，但我不明白发生了什么/为什么它失败了：

```
public static String decode(byte[] in, char[] out, int offset, int utfSize) throws UTFDataFormatException {
        int count = 0, s = 0, a;
        while (count < utfSize) {
            if ((out[s] = (char) in[offset + count++]) < '\u0080') {
                s++;
            } else if (((a = out[s]) & 0xe0) == 0xc0) {
                if (count >= utfSize) {
                    throw new UTFDataFormatException("bad second byte at " + count);
                }
                int b = in[offset + count++];
                if ((b & 0xC0) != 0x80) {
                    throw new UTFDataFormatException("bad second byte at " + (count - 1));
                }
                out[s++] = (char) (((a & 0x1F) << 6) | (b & 0x3F));
            } else if ((a & 0xf0) == 0xe0) {
                if (count + 1 >= utfSize) {
                    throw new UTFDataFormatException("bad third byte at " + (count + 1));
                }
                int b = in[offset + count++];
                int c = in[offset + count++];
                if (((b & 0xC0) != 0x80) || ((c & 0xC0) != 0x80)) {
                    throw new UTFDataFormatException("bad second or third byte at " + (count - 2));
                }
                out[s++] = (char) (((a & 0x0F) << 12) | ((b & 0x3F) << 6) | (c & 0x3F));
            } else {
                throw new UTFDataFormatException("bad byte at " + (count - 1));
            }
        }
        return new String(out, 0, s);
    } 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T15:36:33.617

此错误表明文件已损坏（即：未正确编码 UTF8）。写入文件后是否正确关闭文件？我可以想象，如果您正在写入缓冲输出流并且您没有正确关闭流，您将收到这些错误。然后某些字节将不会被写入，并且您将拥有一个无法重新读取的损坏文件。

# java - XMLSerializer 抛出异常

> ID：11210505
> 
> 赞同：0
> 
> 时间：2012-06-26T15:15:05.497
> 
> 标签：java, xml, json, serialization

我有一小段代码可以将 XML 解析为 JSON。在我引入 XMLSerializer 来获取 JSON 之前，它工作正常。

```
public static String convertXMLFileToString(String fileName) 
{
  try{ 
    XMLSerializer xmlSer = new XMLSerializer();
    DocumentBuilderFactory documentBuilderFactory = DocumentBuilderFactory.newInstance(); 
    InputStream inputStream = new FileInputStream(new File(fileName)); 
    org.w3c.dom.Document doc = documentBuilderFactory.newDocumentBuilder().parse(inputStream); 
    StringWriter stw = new StringWriter(); 
    Transformer serializer = TransformerFactory.newInstance().newTransformer(); 
    serializer.transform(new DOMSource(doc), new StreamResult(stw));
    String st = stw.toString();
    JSON json = xmlSer.read(st);
    return stw.toString(); 
  } catch (Exception e) { 
    e.printStackTrace(); 
  } 
    return null; 
  } 
```

来电：

```
convertXMLFileToString("/home/tom/workspace/xmlToJson/files/input/sample.xml"); 
```

我使用 JSON-lib-2.4 和以下导入`import net.sf.json.xml.XMLSerializer;` ，我得到以下异常：

```
Exception in thread "main" java.lang.NoClassDefFoundError: org/apache/commons/lang/exception/NestableRuntimeException
at java.lang.ClassLoader.defineClass1(Native Method)
at java.lang.ClassLoader.defineClass(ClassLoader.java:791)
at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142)
at java.net.URLClassLoader.defineClass(URLClassLoader.java:449)
at java.net.URLClassLoader.access$100(URLClassLoader.java:71)
at java.net.URLClassLoader$1.run(URLClassLoader.java:361)
at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:308)
at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
at convert.xmlToJson.convertXMLFileToString(xmlToJson.java:27)
at convert.xmlToJson.main(xmlToJson.java:21)
Caused by: java.lang.ClassNotFoundException: org.apache.commons.lang.exception.NestableRuntimeException
at java.net.URLClassLoader$1.run(URLClassLoader.java:366)
at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:308)
at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
... 14 more 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T09:46:22.083

JSON-lib 依赖于其他库，请参阅[http://json-lib.sourceforge.net/](http://json-lib.sourceforge.net/)。

*   雅加达公共语言 2.5
*   雅加达 commons-beanutils 1.8.0
*   jakarta commons-collections 3.2.1
*   雅加达公共日志记录 1.1.1
*   ezmorph 1.0.6

不能说您是否需要所有这些，但您的异常清楚地表明它缺少 commons-lang ( [http://commons.apache.org/lang/](http://commons.apache.org/lang/) )。确保使用版本 2.x，*而不是*较新的 3.x。

# java - Java套接字权限被拒绝：连接

> ID：11210506
> 
> 赞同：1
> 
> 时间：2012-06-26T15:15:10.507
> 
> 标签：java, sockets, mongodb, networking, redis

我有网络连接问题。

这是情况。

Java 应用程序（JSP 或控制台）应连接到 MongoDB 和 Redis。

在第一个环境中，

*   Java -> 本地 mongodb ：好的
*   Java -> 远程 mongodb：好的
*   Java->远程redis：好的

在有问题的第二种环境中（更安全），

*   Java -> 本地 mongodb ：好的
*   Java -> 远程 mongodb：异常
*   Java->远程redis：异常

有趣的是 mongo.exe （控制台）连接到远程 mongodb 没有问题。（我没有在redis测试过）

我已经升级了最新版本的java。将 JSP 版本转换为 java 控制台进行测试。并更改了一些代码。没有任何效果。

```
m = new MongoDB( ADDRESS, PORT );
m.setReadPreference( ReadPreference.SECONDARY );
DB db = m.getDB("test");
db.authenticate( ID, PASS.toCharArray() ); //!< exception 
```

MongoDB 异常消息

```
DBPortPool gotError
Warning: emptying DBPortPool to [ADDRESS...]:27017 b/c of error
java.io.IOException: couldn't connect to [/[ADDRESS...]:27017]     bc:java.net.SocketException: Permission denied: connect 
```

Redis 异常消息

```
JedisConnectionException: java.net.SocketException: Permission denied: connect 
```

我认为这涉及一些安全问题。第二台电脑处于非常严格的安全网络中。（我通过 VPN 使用它们）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T13:23:57.043

Self-answer. This is an issue related to JDK7 and VPN. [http://www.java.net/node/703177](http://www.java.net/node/703177)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T15:53:03.303

您是否能够远程登录到远程主机和侦听端口（前提是远程计算机没有完全阻止远程登录尝试）？我假设您确定远程 IP 地址/端口号，因为您提到您的 mongo 控制台能够从第一台计算机连接到第二台计算机。如果您确实需要向某人表明这是一个网络问题，您可以查看在两台计算机上使用wireshark 等 - 您将能够看到数据包离开第一台计算机但被第二台计算机拒绝。

# python - Python，嵌套 for 循环

> ID：11210507
> 
> 赞同：2
> 
> 时间：2012-06-26T15:15:11.550
> 
> 标签：python, csv, for-loop

我是 python 新手，在实现嵌套的“for 循环”时遇到了困难。这可能很简单，但我尝试的以下示例代码并没有给我预期的结果。我的任务实际上是从属性表（ArcGIS 要素数据）中读取记录，并将其与 CSV 文件中的每条记录进行比较。但最初我试图对 2 个 CSV 文件做同样的事情，然后将类似的逻辑应用于我原来的问题。我试图弄清楚循环的工作原理，稍后我可以添加比较条件。任何帮助是极大的赞赏。谢谢。

这个想法是文件 1(CSV) 中的第一行将自身与文件 2(CSV) 中的所有行（逐行）进行比较，然后文件 1 中的第二行执行相同操作，直到文件 1 的每一行将自身与所有行进行比较文件 2 中的行。因此，在预期的结果中，我试图查看文件 1 中的每一行是否考虑了文件 2 中的每一行。

例子：

```
**File 1   File 2**
ALPHA      All
BETA       Bell
GAMMA      Cell
DELTA      Dell
ITA 
```

示例代码：

```
import csv, sys, os, string 
table1 = os.path.join(path, 'table1.csv')
table2 = os.path.join(path, 'table2.csv')
file1 = csv.reader(open(table1, 'r'))
file2 = csv.reader(open(table2, 'r'))
for row in file1:
    print row
    for prow in file2:
        print prow 
```

预期结果：

```
 ALPHA
    All
    Bell
    Cell
    Dell

    BETA
    All 
    …..

    ITA

All
..
Dell 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T15:22:56.933

这里的问题是，这[`file2`只是一个一次性迭代器](http://docs.python.org/library/csv.html#csv.reader)。因此，在迭代`file2`一次之后（在 的第一次迭代中`file1`），您完全耗尽了数据。

相反，您必须将 的内容存储`file2`在列表中：

```
file2=list(csv.reader(open(table2,'r')))
for row in file1:
     print row
     for prow in file2:
         print prow 
```

这将为您打印一些列表，所有这些列表仅包含一个元素，即相应行的第一个单元格。这是由于将文件解析为 CSV。每次迭代都会为您提供行中的单元格列表。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-26T15:23:25.307

这是因为当您迭代一个[`csv.reader`](http://docs.python.org/library/csv.html#csv.reader)对象时，每次迭代它都会变为空。

这就是`file2`迭代器以这种方式表现的原因。

要解决这个问题，您应该首先将值保存`file2`在列表中。

```
file1=csv.reader(open(table1,’r’))
file2=list(csv.reader(open(table2, 'r'))) #edited this
for row in file1:
...     print row
...     for prow in file2:
...         print prow 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T15:22:45.370

CSV 模块将为这两个文件返回迭代器，这些文件在循环后将被“使用”。这是文件的典型 Python 行为。

为了将一个文件中的值循环用于另一个文件，您可以将它们加载到内存中。出于对您意图的最佳解读，我假设您希望将一个文件中的数据与另一个文件中的每一行相关联。我将举一个说明性的例子：

```
greek = csv.reader(open('file1.csv'))
dells = csv.reader(open('file2.csv'))

second_file_data = list(dells)

#From here, dells is "spent."  If we would want to reuse it, we have to reopen it

for line in greek:
  print line
  for other in second_file_data:
      print other 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-26T15:23:09.877

不要这样做。

将第一个文件读入适当的数据结构（例如 a `set`），然后在读取第二个文件时，针对数据结构中收集的行进行测试。

对于本练习，最好创建单个字符串，因为您似乎每次都打印从第一个文件读取的全部数据。

```
file2='\n'.join((l[0] for l in csv.reader(open(table2,’r’))))
for row in file1:
        print row
        print file2 
```

如果需要缩进，可以使用[textwrap](http://docs.python.org/library/textwrap.html)将缩进添加到`file2`.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-26T15:33:45.003

问题是，在你遍历 file2 的所有行之后，它的流被消耗掉了。没有什么可读的了。Next for 循环不会重新设置 csv.reader 对象，而是识别出所有内容都已被读取和解析，因此无需再做任何事情。

解决方案可能包括：

```
file2_stream = open(table2, 'r')
for row in file1:
  print row
  file2_stream.seek(0)  # Reset file stream position
  file2 = csv.reader(file2_stream)  # Init CSV parsing
  for prow in file2:
    print prow 
```

或者，您可以每次都重新打开文件：

```
for row in file1:
  print row
  file2 = csv.reader(open(table2, 'r'))
  for prow in file2:
    print prow 
```

这显然会在每次外部迭代时解析第二个文件。如果文件与内存大小相比并不大，您可能希望对其进行一次解析，然后将结果作为列表存储在内存中：

```
file2_rows = list(file2)
for row in file1:
  print row
  for prow in file2_rows:
    print prow 
```

# javascript - 垂直居中上传的图像预览

> ID：11210509
> 
> 赞同：1
> 
> 时间：2012-06-26T15:15:15.387
> 
> 标签：javascript, jquery, html, filereader

我在我的网站上显示用户上传的图像预览，但我希望能够在 div 中垂直居中。我试图通过在`margin-top`完成上传后使用 Javascript 设置图像来做到这一点，如下所示（有`$img`问题的图像在哪里）：

```
reader.onloadend = (function() {
    var $parentDiv = $img.parent();
    $img.css('margin-top', ($parentDiv.height() - $img.height()) / 2);
}); 
```

我读过的[FileReader 文档](https://developer.mozilla.org/en/DOM/FileReader)`onloadend`让我相信一旦文件上传完成就会调用它，而且情况似乎就是这样。然而，无论图像的大小如何，都在调用时`$img.height()`返回。`0``onloadend`

这似乎是由于该值根本不可用。如果我上传第二张图片（清除现有图片预览），然后重新上传第一张图片，该功能有效；`$img.height()`返回正确的值。之后通过控制台调用它也会正确返回。

有没有公​​认的处理方式？`.height()`除了每隔一段时间调用它直到它大于零之外，有没有办法知道什么时候可以使用它的值？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T16:05:33.987

您应该能够通过 Michał Czernow 的“幽灵元素”CSS 垂直居中技术（[CSS 技巧：未知中的居中](http://css-tricks.com/centering-in-the-unknown/)）的变体来解决零高度问题。这将不需要对图像进行 javascript 操作。

使用 CSS 向容器 div 添加伪元素：

```
.container:before {
    content: '';
    display: inline-block;
    height: 100%;
    vertical-align: middle;
    margin-right: -0.25em; /* Adjusts for spacing */
} 
```

该“幽灵”元素本质上成为您图像的脚手架，使用图像样式设置图像，`vertical-align: middle;`并且无论何时更新图像，它都应该可以正常工作。

这是一个[jsfiddle](http://jsfiddle.net/joemaller/sWCve/)展示了它是如何工作的。

# linq - Dynamic Linq Order By user defined sequence

> ID：11210512
> 
> 赞同：1
> 
> 时间：2012-06-26T15:15:34.747
> 
> 标签：linq, sorting, sql-order-by, dynamic-linq

我有 OrderBy 的动态 linq 查询。

```
 .AsQueryable().OrderBy("FullName", asc) 
```

按全名排序后，我需要按状态排序（类似于 ThenBy()）。状态可能有值，例如“A”、“B”、“C”、“D”，但我需要按以下顺序排序“B”、“A”、“D”、“C”。结果在这种情况下不能使用 asc/desc。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T15:27:19.207

您需要执行以下操作：

a）按照您想要的顺序定义您的密钥集合

```
var keys = new string[]{"B", "A", "D", "C"}; 
```

b) 使用上述键定义数据的自定义顺序

```
var result = yourCollection.AsQueryable()
                           .OrderBy("FullName", asc)
                           .ThenBy(x=>keys.IndexOf(x.Status)); 
```

# javascript - 使用 jquery 调整宽度，使 p 元素为 4 行高

> ID：11210515
> 
> 赞同：0
> 
> 时间：2012-06-26T15:16:01.753
> 
> 标签：javascript, jquery, html, css

假设我有一个由常规字符组成的未知长度的字符串。

我将如何使基于字符串调整的宽度始终为 4 行高？

**更新：**

这是诀窍：

```
$("p").css({height: $("p").height()*4});
$("p").css({width: $("p").width()/4}); 
```

有道理..您会期望如果您想将高度增加 4 倍，则将宽度减少 4 倍

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T15:48:07.283

我不知道您要做什么，但听起来您正在尝试做一些不需要做的事情，但是这里有很多我可以做到的方法。

`<p class="my_p">Blabla</p>`

**仅 CSS**

`<style>p.my_p{height: 40px; overflow: hidden;}</style>`

或**带有行高的 jQuery**

```
$(function (){
var p = $('.my_p');
var lh = p.css('line-height');
var x = 0;
var i = false;
while (i!='done')
  {
   if(x>3500) i='done';//prevent infinite loop
   x++; 
   lh = parseInt(p.css('line-height'))*4;
   if(p.height()==lh){ i='done'; console.log('done') }
   else p.width(p.width()+1);
  }
}); 
```

​</p>

这是它的 jsfiddle... [http://jsfiddle.net/xRxga/1/](http://jsfiddle.net/xRxga/1/)

希望能帮助到你...

或者使用省略号方法。

[如果内容太宽，请在 HTML 标记中插入省略号 (...)](https://stackoverflow.com/questions/536814/insert-ellipsis-into-html-tag-if-content-too-wide)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T15:28:09.893

编辑：我没有完全阅读你的问题。这里有一些更适合你所要求的东西。

为了动态获得 4 行的高度，您必须创建一个 CSS 类来包含您的文本样式（例如 font-size 和诸如此类），然后您可以这样做：

```
var p = document.createElement("p");
p.innerHTML = "random text";
$(p).addClass("textStyle");
var fourLineHeight = parseInt($(p).css("line-height")) * 4; 
```

编辑 2：正如 samsamX 指出的那样，行高会更好。

# java - 对象列表中的重复元素

> ID：11210517
> 
> 赞同：0
> 
> 时间：2012-06-26T15:16:22.610
> 
> 标签：java, android, ormlite

我的代码中有一个查询，它在一个对象中搜索多个 id。在表`PreparationPhytoterapic`中包含以下字段：（`phytoterapicItem_id`外键），`preparationItem_id`（外键）和`id`。问题是当 a`preparationItem_id`包含多个条目时，它会再次添加到列表中。

我尝试使用`if(!listPreparations.contains(preparationContents2.get(0)))`但不起作用。

任何的想法？

```
 preparationphytoterapicDao = getHelper().getPreparationPhytoterapicDao();
        QueryBuilder<PreparationPhytoterapic, Integer> queryBuilder2 = 
            preparationphytoterapicDao.queryBuilder();
        Where<PreparationPhytoterapic, Integer> where2 = queryBuilder2.where();
        SelectArg selectArg = new SelectArg();
        where2.eq("phytoterapicItem_id", selectArg);
        PreparedQuery<PreparationPhytoterapic> preparedQuery2 = queryBuilder2.prepare();
        List<PreparationPhytoterapic> preparationphytoterapics;
        QueryBuilder<PreparationContent, Integer> queryBuilder3 = 
            preparationContentDao.queryBuilder();
        Where<PreparationContent, Integer> where3 = queryBuilder3.where();
        SelectArg selectArg2 = new SelectArg();
        where3.eq("id", selectArg2);
        PreparedQuery<PreparationContent> preparedQuery3 = queryBuilder3.prepare();
        List<PreparationContent> preparationContents2;
        for(int j = 0; j < listPhytoterapics.size(); j++) {
            selectArg.setValue(listPhytoterapics.get(j).getPhytoterapicItem().getId());
            preparationphytoterapics = preparationphytoterapicDao.query(preparedQuery2);
            if(preparationphytoterapics.size() != 0) {
                for(int k = 0; k < preparationphytoterapics.size(); k++) {
                    selectArg2.setValue(preparationphytoterapics.get(k).getPreparationItem().getId());
                    preparationContents2 = preparationContentDao.query(preparedQuery3);
                    if(!listPreparations.contains(preparationContents2.get(0)))
                        listPreparations.add(preparationContents2.get(0));
                }
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T15:23:52.250

如果您查看 `List.contains(...)`方法定义，它会说：

> 如果此列表包含指定元素，则返回 true。更正式地说，当且仅当此列表包含至少一个元素 e 满足 (o==null ? e==null : o.equals(e)) 时，才返回 true。

我怀疑您*没有*`equals(...)`定义完全`PreparationContent`使用该`id`字段的方法。我认为这就是你想要的。您需要在对象中包含以下内容。您还需要覆盖`hashCode()`以使它们对称。

```
 @Override
  public boolean equals(Object obj) {
      if (obj == null || obj.getClass() != this.getClass()) {
          return false;
      }
      PreparationContent other = (PreparationContent)obj;
      return this.id = other.id;
  }

  @Override
  public int hashCode() {
      // if id is long then return Long.valueOf(id).hashCode();
      return id;
  } 
```

# python - 手动将测试套件添加到鼻子

> ID：11210519
> 
> 赞同：4
> 
> 时间：2012-06-26T15:16:32.187
> 
> 标签：python, testing, nose, nosetests, test-suite

我想手动创建一个测试套件，而不是使用测试发现（仅在一个模块中，其他应该使用发现）。我发现如何在单元测试中做到这一点，但我不确定如何将其转移到鼻子以及它如何与发现混合。[鼻子文档](http://nose.readthedocs.org/en/latest/api/suite.html#nose.suite)没有示例，我不明白我应该如何使用它们。**有人可以给我一个例子吗？**

详细信息：我有测试类，我想用不同的参数运行每个方法几次。理想情况下，还将测试名称更改为可读的名称。我[尝试了测试生成器](https://stackoverflow.com/questions/11189699/change-names-of-tests-created-by-nose-test-generators)，但它们有很多错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T20:35:00.487

为nosetests 提供您的套件的路径，它将被执行而不是使用Nose 的测试发现。

这个命令：

```
nosetests 
```

进行自动测试发现。

这些命令：

```
nosetests /path/to/file.py
nosetests /path/to/directory 
```

`file.py`分别在和中运行测试`directory`。

或者，您可以在特定目录中启动自动发现：

```
nosetests -w /path/to/directory 
```

查看[nosetests -h 以获得完整的选项列表](https://nose.readthedocs.org/en/latest/usage.html#options)。

# asp.net - 格式化GridView动态生成的列标题

> ID：11210522
> 
> 赞同：1
> 
> 时间：2012-06-26T15:16:43.470
> 
> 标签：asp.net, vb.net, header, pivot

我在 SQL 中创建了一个存储过程，它产生了一个数据透视表。我已经在 ASP.NET 中成功创建了一个 GridView 来显示这些数据。

但是，我的一些列标题是从数据中动态生成的（AutoGenerateColumns=True），而这些列标题只是日期，因此几乎每次生成表时它们看起来都会有所不同。

这一切都很好，除了列标题的日期格式错误。我知道我可以更改 SQL 在其输出中生成日期的方式，但我不想那样做。我想从网页控制它。

我不认为这会很困难 - 我认为我可以按照在标题行中查找单元格并更改数据字符串格式的方式做一些事情。问题是无论我将代码放在GridView的DataBound还是RowDataBound事件中，标题行中的单元格似乎都是空的，所以我无法重新格式化它们。就好像标题在 DataBound 事件之后的某个时间填充一样，但我不知道何时或如何捕获它。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T22:27:06.467

您可以在“RowCreated”事件期间分配列标题。就是这样：

```
Private Sub GridView1_RowCreated(sender As Object, e As System.Web.UI.WebControls.GridViewRowEventArgs) Handles GridView1.RowCreated
    e.Row.Cells(0).Text = Format(Convert.ToDateTime(e.Row.Cells(0).Text), "yyyy-MM-dd")
    e.Row.Cells(1).Text = Format(Convert.ToDateTime(e.Row.Cells(1).Text), "yyyy-MM-dd")
End Sub 
```

我用动态/自动生成的列对 GridView 进行了测试，似乎可以工作。请注意，这些列是零索引的。此外，您不需要指定行号来设置标题单元格的文本。

# sql-server-2008 - GML 到 SQL 地理 - 24200：指定的输入不代表有效的地理实例

> ID：11210523
> 
> 赞同：3
> 
> 时间：2012-06-26T15:16:46.090
> 
> 标签：sql-server-2008, tsql, sqlgeography

我目前正在将谷歌地图集成到我们的一个应用程序中。要求之一是将用户定义的区域存储到数据库中。为此，我一直在 SQL Server 2008 中使用 Geography 类型。虽然我大部分时间都在使用它，但我遇到了一个阻塞问题。

下面我有一些示例代码。我正在用 GML XML 字符串填充 Geography 对象，有些实例可以工作，有些则不能，我看不出它们不工作的逻辑原因。

```
DECLARE @geoWork GEOGRAPHY
DECLARE @geoNotWork GEOGRAPHY
DECLARE @Work NVARCHAR(MAX)
DECLARE @DoesntWork NVARCHAR(MAX)

SET @Work = '<Polygon xmlns="http://www.opengis.net/gml">' +
             '<exterior>' +
             '<LinearRing>' +
             '<posList>' +
             '61.52269494598361 -6.50390625 50.84757295365389 -36.5625 32.69486597787505 -17.40234375 46.31658418182218 23.90625 61.52269494598361 -6.50390625' +
             '</posList>' +
             '</LinearRing>' +
             '</exterior>' +
             '</Polygon>'
SET @DoesntWork = '<Polygon xmlns="http://www.opengis.net/gml">' +
                  '<exterior>' +
                  '<LinearRing>' +
                  '<posList>' +
                  '51.8591074413996 -0.8425140380859375 51.790355567911845 -0.7051849365234375 51.75381501386028 -0.8191680908203125 51.80564283054998 -0.9180450439453125 51.8591074413996 -0.8425140380859375' +
                  '</posList>' +
                  '</LinearRing>' +
                  '</exterior>' +
                  '</Polygon>'

SET @geoWork = GEOGRAPHY::GeomFromGml(@Work, 4326)
SET @geoNotWork = GEOGRAPHY::GeomFromGml(@DoesntWork, 4326)

SELECT @geoWork.AsGml()
SELECT @geoNotWork.AsGml() 
```

正在工作的多边形定义了一个巨大的区域（跨越几个国家的大小），而没有定义一个大城镇大小的多边形。只有这些“较小”的领域在失败。令人讨厌的是，这个较小的并不足以满足我的需要。谁能告诉我为什么会这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T15:56:48.957

在您失败的示例中，您的数据**方向**错误。

为了能够跟踪多边形的内部和外部，SQL`geography`类型要求多边形具有正确的**环方向**。[有关此的更多信息](http://msdn.microsoft.com/en-us/library/bb964711.aspx)，其中：

> 在椭球系统中，多边形没有意义，或者是模棱两可的，没有方向。例如，赤道周围的环是描述北半球还是南半球？如果我们使用地理数据类型来存储空间实例，我们必须指定环的方向并准确地描述实例的位置。椭球系统中多边形的内部由左手定则定义。

如何修复它：

[使用 T-SQL 在 SQL Server 2008 中“修复”多边形环方向](http://blogs.msdn.com/b/edkatibah/archive/2008/08/19/working-with-invalid-data-and-the-sql-server-2008-geography-data-type-part-1b.aspx)

# facebook - 即使他/她已登录，如何强制用户重新输入 Facebook 密码

> ID：11210527
> 
> 赞同：2
> 
> 时间：2012-06-26T15:17:06.243
> 
> 标签：facebook, authentication, facebook-authentication

我试图让用户在进入我网站的某些部分时重新输入密码。我读过我应该使用“重新验证”授权类型来解决这个问题，但我遇到了两个问题。

1.  当用户点击“重新验证”按钮时，密码已经填写在“密码”输入框中。

2.  当用户单击“Reauthentice”按钮然后关闭或单击授权窗口上的取消时，我仍然会收到带有登录数据的响应，基本上它“告诉”我的代码用户已登录。

有没有人遇到过这些问题？这是我的代码的一部分：

```
<fb:login-button id="facebook-reauth" onclick="return false;">Login with Facebook</fb:login-button>

<script type="text/javascript">
    $(document).ready(function () {
        document.getElementById('facebook-reauth').onclick = function () {
            FB.login(function (response) {
                if (response) {
                    window.location = '/Account/FacebookLogin?isCheckout=false';
                }
                else {
                    window.location = '/';
                }
            }, { scope: 'email', auth_type: 'reauthenticate' });
        };
    });
</script> 
```

编辑：

我尝试更改`<fb:login-button />`to`<div />`标记，但它根本没有帮助。

非常感谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T15:27:46.283

1.  密码字段可能已预先填写，因为您的浏览器只记住了您的密码，请尝试在浏览器中清除该密码，或尝试使用浏览器不记得的其他电子邮件。

2.  我认为您只是忘记检查`response.authResponse`，所以它应该是：

.

```
FB.login(function (response) {
    if (response.authResponse) {
        window.location = '/Account/FacebookLogin?isCheckout=false';
    }
    else {
        window.location = '/';
    }
}, { scope: 'email', auth_type: 'reauthenticate' }); 
```

* * *

# 编辑

是的，你是对的，即使用户取消重新认证，回调也会被执行并且状态是“已连接”。
这可能是一个错误或其他什么，但从我现在所做的测试来看，如果用户成功完成了重新身份验证过程，那么令牌就会更改，所以这应该可以工作：

```
var oldToken = FB.getAccessToken();

FB.login(function (response) {
    if (response.authResponse && response.authResponse.accessToken != oldToken) {
        window.location = '/Account/FacebookLogin?isCheckout=false';
    }
    else {
        window.location = '/';
    }
}, { scope: 'email', auth_type: 'reauthenticate' }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-23T20:59:07.117

除了（或代替）Nitzan 的解决方案之外，还可以在后端添加验证。

如果你打电话：

“ [https://graph.facebook.com/oauth/access_token_info?client_id=CLIENT_ID&access_token=ACCESS_TOKEN](https://graph.facebook.com/oauth/access_token_info?client_id=CLIENT_ID&access_token=ACCESS_TOKEN) ”

您将收到以下响应：

> “访问令牌：...，
> 
> token_type: "承载者",
> 
> expires_in: 5937,
> 
> auth_type: "重新认证"

仅当用户通过授权模式成功重新验证时，auth_type 才会设置为“重新验证”。

还建议验证 expires_in > 0 以确保令牌仍然有效。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-06-09T12:45:49.250

```
if (response.status === 'connected') {
    /**
     * Even if the user cancels the re-authentication the callback is executed and the status is "connected".
     * This is probably a bug or something, but you can get info about the token and check that.    
     */
    FB.api('/debug_token', {
        input_token: response.authResponse.accessToken
    }, function(token_info) {

        if (typeof token_info.data.metadata != 'undefined') {

            if (token_info.data.metadata.auth_type == "reauthenticate") {

            }
        } else {
            //user did not re-authenticate so do nothing
        }
    });
} 
```

# c# - Metro App - 如何检测是否使用 Live ID 或本地帐户登录

> ID：11210531
> 
> 赞同：7
> 
> 时间：2012-06-26T15:17:11.573
> 
> 标签：c#, windows-8, microsoft-metro, liveconnect, live-connect-sdk

我正在 Live Connect SDK (http://msdn.microsoft.com/en-us/live/default) 之上构建 Metro C# SkyDrive API - 在 Windows 8 中，用户可以选择登录到 Windows 8 机器使用 LOCAL 帐户或 LIVE 帐户。

使用 Live Connect SDK 时，如果我调用

```
// assume wlscopes is properly set

LiveAuthClient liveAuthClient = new LiveAuthClient();
LiveLoginResult loginResult = await liveAuthClient.LoginAsync(wlscopes);

// do some stuff on skydrive

liveAuthClient.Logout();   // <-- issue only with live account, not local 
```

使用本地帐户时，它会注销我（很棒）

当我在使用 LIVE 帐户时调用相同的代码时，我得到了一个未经处理的异常——我什至无法围绕这个错误添加一个 try {} catch {}。

例外：

```
Cannot sign out from the application since the user account is connected. (Exception from HRESULT: 0x8086000E) 
```

显然，由于在 Live 帐户下登录的用户无法注销，我的 api 需要检测当前用户是否正在使用 live 帐户，以便我可以防止调用 logout() 方法。

**所以....我的问题是，我如何知道用户在 Windows 8 中登录的帐户类型？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T05:10:03.060

找到答案：http: [//msdn.microsoft.com/en-us/library/windows/apps/windows.security.authentication.onlineid.onlineidauthenticator.cansignout.aspx#Y0](http://msdn.microsoft.com/en-us/library/windows/apps/windows.security.authentication.onlineid.onlineidauthenticator.cansignout.aspx#Y0)

下面是我们需要使用的属性：

```
Windows.Security.Authentication.OnlineId.OnlineAuthenticator.CanSignOut 
```

代码示例：

```
 public async Task<bool> Logout()
    {
        // Check to see if the user can sign out (Live account or Local account)
        var onlineIdAuthenticator = new OnlineIdAuthenticator();
        var serviceTicketRequest = new OnlineIdServiceTicketRequest("wl.basic", "DELEGATION");
        await onlineIdAuthenticator.AuthenticateUserAsync(serviceTicketRequest);

        if (onlineIdAuthenticator.CanSignOut)
        {
            LiveAuthClient.Logout();               
        }

        return true;
    } 
```

# android - 如何扩展我的应用程序 main.xml 以便在显示屏底部显示我的“东西”？

> ID：11210532
> 
> 赞同：0
> 
> 时间：2012-06-26T15:17:11.917
> 
> 标签：android, android-layout, layout, scrollview

我在 android 应用程序的主要活动中有很多输入框。我遇到的麻烦是我无法找到如何将视图（滚动）向下扩展到页面底部的框。

我尝试了滚动视图，但这只是锁定了我的应用程序。

最后一个 TextView 不显示

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<TextView
    android:id="@+id/textView1"
    android:textAppearance="?android:attr/textAppearanceLarge"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="@string/title"
     />

<EditText

    android:layout_width="fill_parent"
    android:layout_height="wrap_content" />

<TextView
    android:id="@+id/textView2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/action"
    android:textAppearance="?android:attr/textAppearanceLarge" />

<EditText

    android:layout_width="fill_parent"
    android:layout_height="wrap_content" />

<TextView
    android:id="@+id/textView3"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/company"
    android:textAppearance="?android:attr/textAppearanceLarge" />

<EditText

    android:layout_width="fill_parent"
    android:layout_height="wrap_content" />

<TextView
    android:id="@+id/textView4"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/when"
    android:textAppearance="?android:attr/textAppearanceLarge" />

<CalendarView
    android:id="@+id/calendarView1"
    android:layout_width="match_parent"
    android:layout_height="match_parent" />

<TextView
    android:id="@+id/textView5"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/what_now"
    android:textAppearance="?android:attr/textAppearanceLarge" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T15:28:29.940

`Scrollview`应该管用。尝试这个：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@android:color/white"
    android:orientation="vertical"
    android:scrollbars="vertical" >

    <ScrollView
        android:id="@+id/setupScroll"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:background="@android:color/white" >

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:background="@android:color/white"
            android:orientation="vertical"
            android:scrollbars="vertical" >

        your stuff here....

        </LinearLayout>
    </ScrollView>
</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T15:29:19.270

您需要将 LinearLayout 放入`ScrollView`：

```
<ScrollView android:id="@+id/scroll" xmlns:android="http://schemas.android.com/apk/res/android"
            android:layout_width="match_parent"
            android:layout_height="match_parent">

    <LinearLayout 
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

        <TextView
            android:id="@+id/textView1"
            android:textAppearance="?android:attr/textAppearanceLarge"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:text="@string/title"
             />

        <EditText

            android:layout_width="fill_parent"
            android:layout_height="wrap_content" />

        <TextView
            android:id="@+id/textView2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/action"
            android:textAppearance="?android:attr/textAppearanceLarge" />

        <EditText

            android:layout_width="fill_parent"
            android:layout_height="wrap_content" />

        <TextView
            android:id="@+id/textView3"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/company"
            android:textAppearance="?android:attr/textAppearanceLarge" />

        <EditText

            android:layout_width="fill_parent"
            android:layout_height="wrap_content" />

        <TextView
            android:id="@+id/textView4"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/when"
            android:textAppearance="?android:attr/textAppearanceLarge" />

        <CalendarView
            android:id="@+id/calendarView1"
            android:layout_width="match_parent"
            android:layout_height="match_parent" />

        <TextView
            android:id="@+id/textView5"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/what_now"
            android:textAppearance="?android:attr/textAppearanceLarge" />
    </LinearLayout>
</ScrollView> 
```

# c++ - 当程序参数超过某个阈值时出现分段错误

> ID：11210535
> 
> 赞同：0
> 
> 时间：2012-06-26T15:17:17.483
> 
> 标签：c++, segmentation-fault

我正在用 C++ 编写这个相当大的网络模拟器。我一直在定期测试各个部分，因为我正在开发它们，并且在将所有东西放在一起之后，只要我对模拟器施加的负载不太大，它似乎就可以工作（它是一个 P2P 内容分发模拟器，所以更多不同“内容”我介绍了模拟器必须处理的更多数据传输）。任何超过被模拟的不同内容数量的特定阈值的东西都会在平稳运行几分钟后导致突然的 SIGSEGV。我假设有一个内存泄漏最终变得太大并且把事情搞砸了，但是参数低于阈值的 valgrind 运行完美地终止了。但是，如果我尝试使用 valgrind 使用内容编号的临界值运行程序，

```
==5987== Invalid read of size 8
==5987==    at 0x40524E: Scheduler::advanceClock() (Scheduler.cpp:38)
==5987==    by 0x45BA73: TestRun::execute() (TestRun.cpp:73)
==5987==    by 0x45522B: main (CDSim.cpp:131)
==5987==  Address 0x2e63bc70 is 0 bytes inside a block of size 32 free'd
==5987==    at 0x4C2A4BC: operator delete(void*) (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)
==5987==    by 0x405487: Scheduler::advanceClock() (Scheduler.cpp:69)
==5987==    by 0x45BA73: TestRun::execute() (TestRun.cpp:73)
==5987==    by 0x45522B: main (CDSim.cpp:131)
==5987==
==5987== Invalid read of size 4
==5987==    at 0x40584E: Request::getSimTime() const (Event.hpp:45)
==5987==    by 0x40525C: Scheduler::advanceClock() (Scheduler.cpp:38)
==5987==    by 0x45BA73: TestRun::execute() (TestRun.cpp:73)
==5987==    by 0x45522B: main (CDSim.cpp:131)
==5987==  Address 0x2e63bc78 is 8 bytes inside a block of size 32 free'd
==5987==    at 0x4C2A4BC: operator delete(void*) (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)
==5987==    by 0x405487: Scheduler::advanceClock() (Scheduler.cpp:69)
==5987==    by 0x45BA73: TestRun::execute() (TestRun.cpp:73)
==5987==    by 0x45522B: main (CDSim.cpp:131)
==5987== 
```

我知道在没有看到整个代码的情况下可能很难给出答案，但是是否有关于这里可能发生的事情的“高级”提示？我不明白为什么似乎正常工作的功能突然开始出现异常。有什么明显的我想念的吗？

先前 valgrind 日志中的犯罪行位于`if (nextEvent->getSimTime() < this->getSimTime())`以下块中：

```
bool Scheduler::advanceClock() {
  if (pendingEvents.size() == 0) {
    std::cerr << "WARNING: Scheduler::advanceClock() - Empty event queue before "
        "reaching the termination event" << std::endl;
    return false;
  }
  const Event* nextEvent = pendingEvents.top();
  // Check that the event is not scheduled in the past
  if (nextEvent->getSimTime() < this->getSimTime()) {
    std::cerr << "Scheduler::advanceClock() - Event scheduled in the past!" << 
        std::endl;
    std::cerr << "Simulation time: " << this->getSimTime()
        << ", event time: " << nextEvent->getSimTime()
        << std::endl;
    exit(ERR_EVENT_IN_THE_PAST);
  }
  // Update the clock with the current event time (>= previous time)
  this->setSimTime(nextEvent->getSimTime());
  ... 
```

其中 pendingEvents 是 boost::heap::binomial_heap。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T12:25:42.380

我终于找到了问题所在。当事件完成并且需要从列表中删除时，我的代码如下所示：

```
...
// Data transfer completed, remove event from queue
// Notify the oracle, which will update the cache mapping and free resources
// in the topology
oracle->notifyCompletedFlow(nextEvent, this);
// Remove flow from top of the queue
pendingEvents.pop();
handleMap.erase(nextEvent);
delete nextEvent;
return true; 
```

问题是`oracle->notifyCompletedFlow()`在调度程序上调用了一些方法来动态更新调度事件的优先级（例如，对网络中可用带宽的变化做出反应），因此`pendingEvents.pop()`在某些情况下我删除了队列的顶部我正在弹出一个不同的事件并将已删除的 nextEvent 留在其中。通过在调用 oracle 之前弹出队列，问题自行解决。

我很抱歉遗漏了一些可能会导致更快答案的代码，我会尝试从我的错误中吸取教训:) 感谢您为我指明正确的方向。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T19:31:16.843

它可能与`const Event* nextEvent = pendingEvents.top();`Looks like`pendingEvents`是一种堆栈。你可以试试这个：

1.  仪器（意味着添加一些跟踪，就像输出到 std::cerr | 文件一样简单）分配和取消分配内存的代码（使用 malloc/new、free/delete 的地方）；
2.  作为调试工具，尝试对Event使用智能指针，它会在解引用（操作符->）时检查指针的有效性。

# python - Sleekxmpp：使用多个自定义节

> ID：11210536
> 
> 赞同：0
> 
> 时间：2012-06-26T15:17:30.237
> 
> 标签：python, xmpp

我正在为 xmpp 客户端创建一个测试，并且我需要在此过程中使用不同的自定义节。我有两个问题想知道你们是否可以帮助我：

1.  正如我所提到的，我将使用几个具有相同名称但名称空间不同的节。此节也可以是两级或更多，这是一个示例：

第 1 节

```
<iq type='result' to= 'chat.com'  id='id1'>
       <aa xmlns='http://mysite.com/profile' >
          <name>My name as included in sent mails<name>
          <lang>en</lang>
          <mail>My mail as included in sent mails</mail>
          <fbuserid>46736473231<fbuserid>
          <fbaccesstoken>AAAAA84257YTRRIXTEQITXXTCMTVBTTBXU<fbaccesstoken>
          <photo_url>http://pic.facebook.com/photo.jpg</photo_url>
      </aa>
</iq> 
```

我创建自定义节如下：

```
name = 'aa'
namespace = 'http://mysite.com/profile'
plugin_attrib = 'aa'
interfaces = set(('name', 'lang', 'mail', 'fbuserid', 'fbaccesstoken', 'photo_url'))
sub_interfaces = interfaces 
```

第 2 节

```
<iq type='set' to= 'roomname@conference.chat.come'  id='id1'>
 <aa xmlns='http://mysite.com/muc#share'>
   <item name='Falda tubo' thumbnail='http://webpage.info/falda_tn.jpg' id='itemid1' action='add' url='http://webpage.info/falda.html’&gt;
      <metadata  path=' ' />
   </item>
 </aa>
</iq> 
```

问题 1：如何创建两个以上级别的节？

1.  如您所见，我的节具有相同的名称但更改了名称空间，这给我带来了一些麻烦，因为我创建了诸如 get_* 和 set_* 之类的方法来处理信息，但它的执行方式如下：

    ```
    register_stanza_plugin(Iq, stanza_profile)
    register_stanza_plugin(Iq, stanza_rooms)

    def start(self, event):
        self.send_presence()
        self.get_parameters()
        self.set_parameters() 
    ```

这注册了两个节，但仅在最后一个（stanza_rooms）中执行操作

问题2：如何分开处理？

在 python 上工作。任何帮助表示赞赏！

此致，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T17:29:00.367

对于您关于具有相同名称的多个节的问题，`plugin_attrib`重要的是值，因为这将区分您的两个节。现在看起来你已经使用`'aa'`了`plugin_attrib`导致冲突的节和最后注册的节获胜。

通常，我们在这些情况下使用命名空间的一部分。例如，对于迪斯科，有两个`query`元素的名称空间`http://jabber.org/protocol/disco#info`和`http://jabber.org/protocol/disco#items`. 因此，这两个节具有相同的`name`、不同的`namespace`值，并且分别具有 和的`plugin_attrib`值。`'disco_info'``'disco_items'`

看起来您可以使用名称`aa_profile`或`aa_muc_share`类似名称来解决问题。

对于您的另一个问题，看起来您想要的是更多的节对象。一个提供外层容器节，另一个管理单个子项。您可以使用以下方法完成这项工作：

```
class InnerStanza(ElementBase):
    name = 'inner'
    namespace = 'example'
    plugin_attrib = 'inner'
    plugin_multi_attrib = 'inner_items'
    ...

register_stanza_plugin(OuterStanza, InnerStanza, iterable=True) 
```

使用上述内容，您可以访问`outer['inner_items']`以获取与 InnerStanza 类匹配的内部子节的列表（因为`plugin_multi_attrib`值）。

——兰斯

# javascript - 在javascript中更改控件背景颜色-但是如何在提交表单之前通过验证时重置颜色

> ID：11210537
> 
> 赞同：1
> 
> 时间：2012-06-26T15:17:31.097
> 
> 标签：javascript, jquery, asp.net, validation, requiredfieldvalidator

我正在使用以下代码更改页面上所有无效控件的背景颜色。但是，当背景颜色发生变化并且用户输入了正确的字段值时，我希望在提交页面之前将背景重置为现在有效字段的原始颜色？我对所有控件都使用了RequiredFieldValidators，并且所有控件都具有相同的验证组（1 个控件除外，它同时具有RequiredFieldValidator 和RegularExpressionValidator。谢谢！

```
 function changeColor()
         {
             Page_ClientValidate();
             var i;
             var ctrl;
             var prevColor;
             for (i = 0; i < Page_Validators.length; i++) {
               ctrl = document.getElementById(Page_Validators[i].controltovalidate);
               prevColor = document.getElementById(Page_Validators[i].controltovalidate).style.backgroundColor;
               if (!Page_Validators[i].isvalid)
                    ctrl.style.backgroundColor = '#FFAAAA';
               else
                   ctrl.style.backgroundColor = prevColor; 

              }
         } 
```

以下是上述 javascript 的调用方式：

```
<asp:ImageButton AlternateText="Press btn" 
                 ID="SaveButton" 
                 runat="server" 
                 ImageUrl="~/css/btnSave.png" 
                 OnClick="btpress_Click" 
                 OnClientClick="javascript:return changeColor();"/> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T15:42:57.943

我假设您发布的 JavaScript 不起作用？您是否尝试过将“this”传递给 changeColor()？

例如，OnClientClick="javascript:return changeColor(this);"

这样你应该有一个对控件的引用，然后你应该能够操纵它的 CSS 属性。我目前没有时间模拟这个问题，但这是我想到的。

# javascript - 在 jquery 中绑定属性 - 识别事件

> ID：11210541
> 
> 赞同：2
> 
> 时间：2012-06-26T15:17:39.583
> 
> 标签：javascript, jquery

嗨，有人可以帮助我绑定如何准确理解传递的事件，例如，

```
$("#example_button").bind("click",function(){
    alert("Event is  clicked");
})

$("#example_button").bind("mouseover",function(){
    alert("Event is mouseover");
}) 
```

如何准确地绑定数字（识别）事件......我的意思是有什么方法可以识别事件......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T15:20:15.040

查看jQuery 事件对象的[`type`属性：](http://api.jquery.com/event.type/)

```
$("a").click(function(event) {
  alert(event.type); // "click"
}); 
```

# wso2 - 将注册表项加载到 wso2 属性中介

> ID：11210545
> 
> 赞同：2
> 
> 时间：2012-06-26T15:17:55.703
> 
> 标签：wso2, wso2esb

我目前正在使用以下语句从 wso2 esb 中的本地条目加载数据：

```
<property name="MAPPING" expression="get-property('mapping_id_ep_v1')" /> 
```

它使用名称 mapping_id_ep_v1 加载以下本地条目：

```
<mappings>
    <mapping id="ep_1">http://localhost:8280/services/ep_1</mapping>
    <mapping id="ep_2">http://localhost:8280/services/ep_2</mapping>
    <mapping id="ep_3">http://localhost:8280/services/ep_3</mapping>
<mappings> 
```

我想从注册表项加载数据。我认为以下方法会起作用：

但是，它会引发异常：

```
Evaluation of the XPath expression conf:/custom/inspectieview/routing.xml') resulted in an error {org.apache.synapse.util.xpath.SynapseXPath}
org.jaxen.UnresolvableException: Cannot resolve namespace prefix 'conf' 
```

任何人都知道是否可以将注册表中的值加载到属性调解器中？

问候，尼德基尔

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-27T10:10:58.533

我解决了我的问题。对于任何对解决方案感兴趣的人来说，它实际上非常简单。以下代码将存储在注册表中的资源加载到可以在中介 /sequence / 等中引用的属性中。

```
<property name="MAPPING" expression="get-property('gov:/custom/service/resource')" /> 
```

问候，尼德基尔

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-03-02T14:43:00.683

您可以使用以下配置实现您的要求。

```
 <property name="testProp" expression="get-property('registry', 'gov://custom/testEntry')" scope="default" type="STRING"/> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T06:10:38.817

看这个

[http://wso2.org/project/esb/java/4.0.3/docs/samples/message_mediation_samples.html](http://wso2.org/project/esb/java/4.0.3/docs/samples/message_mediation_samples.html)

示例 8 及以下将帮助您

# jquery - 当 li/td 有跨度时做某事

> ID：11210546
> 
> 赞同：0
> 
> 时间：2012-06-26T15:18:02.943
> 
> 标签：jquery, css, fadein

我有一个小问题。当这个 span 元素在 td 上时，想要淡入 tolltip 作为 mouseenter 动作的 span。所以我需要检查每个 td 元素和 fadeIn 跨度，如果它实际上存在于里面。所以这是我的代码。谢谢帮助...

```
$(document).ready(function (){
    $('.winners_calendar td').mouseenter(function(){
        if($('.winners_calendar td').find('span').length == 1){
            $('.tooltip_paragon').stop(1,1).fadeIn('300');
        }
    });
    $('.winners_calendar td').mouseleave(function(){
        if($('.winners_calendar td').find('span').length == 1){
            $('.tooltip_paragon').stop(1,1).fadeOut('300');
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T15:25:23.343

试试这个：

```
$(document).ready(function (){
    $('.winners_calendar td').mouseenter(function(){
        $('.tooltip_paragon',this).stop(true,true).fadeIn(300);
    });
    $('.winners_calendar td').mouseleave(function(){
        $('.tooltip_paragon',this).stop(true,true).fadeOut(300);
    });
}); 
```

如果存在，它只会在悬停行的工具提示中淡出。

或者你可以缩短它：

```
$(document).ready(function (){
    $('.winners_calendar td').hover(function(){
        $('.tooltip_paragon',this).stop(true,true).fadeToggle(300);
    });
}); 
```

# php - 计数不能与 UNION 一起正常工作

> ID：11210550
> 
> 赞同：0
> 
> 时间：2012-06-26T15:18:10.173
> 
> 标签：php, mysql, count, union

即使在阅读了所有相关主题之后，也没有任何帮助：

```
$q="select count(*) from (
        SELECT COUNT(*) AS total
          FROM clips
         WHERE ((dimensions like('%concert%') AND dimensions NOT like('concert'))
            OR (file_format like('%concert%') AND file_format NOT like('concert')))
         UNION DISTINCT 
        SELECT COUNT(*) AS total
          FROM clips
         WHERE (dimensions like('concert') OR file_format like('concert'))
    ) AS num";
$q2 = mysql_query($q) or die(mysql_error());
$q3 = mysql_fetch_array($q2);
echo $q3['num']; 
```

我得到的错误：

> 注意：未定义的索引：num in .... on line ..

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T15:22:35.790

您正在设置`num`表别名，而不是计数。试试这个

```
$q="select count(*) AS num from (
    SELECT COUNT(*) AS total
      FROM clips
     WHERE ((dimensions like('%concert%') AND dimensions NOT like('concert'))
        OR (file_format like('%concert%') AND file_format NOT like('concert')))
     UNION DISTINCT
    SELECT COUNT(*) AS total
      FROM clips
     WHERE (dimensions like('concert') OR file_format like('concert'))
) AS sub_query_alias_that_is_required_but_pointless";
$q2 = mysql_query($q) or die(mysql_error());
$q3 = mysql_fetch_array($q2);
echo $q3['num']; 
```

但是，您可能正在寻找的更多预期功能是计算总行数，而不是像您拥有的那样计算计数。此外，由于您只是查询`clips`表，我认为您根本不需要 UNION。根据您在问题中的逻辑，我认为（但如果没有您的实际数据就无法对其进行测试）它在逻辑上等同于这个非常简单的查询，除非我严重遗漏了一些东西。这个查询可能更友好、更简洁。

```
SELECT COUNT(1) AS num
FROM clips
WHERE dimensions like '%concert%' 
   OR file_format like '%concert%' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T15:24:11.703

您的查询计算名为“num”的子查询的结果。

这意味着没有名为 num 的结果，您可以`select count(*) as myNum from...`为此执行类似操作

现在您要计算的是：

```
(SELECT COUNT(*) AS total 
 FROM clips
 WHERE ((dimensions like('%concert%') 
         AND dimensions NOT like('concert')) 
       OR (file_format like('%concert%') AND file_format NOT like('concert'))) 
 UNION DISTINCT 
 SELECT COUNT(*) AS total FROM clips 
  WHERE (dimensions like('concert') OR file_format like('concert'))) AS num"; 
```

这会给你一个计数，而不是结果。所以你是在计算数量，而不是把它们加在一起。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T15:24:48.833

一旦你重新格式化你的查询，你会看到最后一个“as num”是指整个选择，而不是 count(*)，我猜这是你想要的别名。

尝试始终为每个条目在单独的行中格式化您的查询，这对您的调试有很大帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-26T15:25:39.127

我编辑了您的问题以更好地布置查询。问题是您将别名分配给子选择而不是结果值。此外，当您计算行数时，出于性能原因，这样做会更好`count(1)`，`count(*)`因为`count(1) simply uses the constant in counting, while`count(*)` 必须在增加计数之前检索实际行。试试这个：

```
$q="select count(1) as num from (
        SELECT COUNT(1) AS total
          FROM clips
         WHERE ((dimensions like('%concert%') AND dimensions NOT like('concert'))
            OR (file_format like('%concert%') AND file_format NOT like('concert')))
         UNION DISTINCT
        SELECT COUNT(1) AS total
          FROM clips
         WHERE (dimensions like('concert') OR file_format like('concert'))
    ) AS sub"; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-26T15:39:39.697

您的查询（一旦为最外层命名`count(*) as num`，将返回 1 或 2，具体取决于两个子查询中别名为“total”的表达式是否相等。

不必使用 UNION 并扫描`clips`表两次以返回此结果。一次扫描就足够了。这个查询将返回一个等效的结果，对剪辑表进行一次扫描：

```
SELECT CASE WHEN c.total_1 = c.total_2 THEN 1 ELSE 2 END AS num
  FROM
(
SELECT SUM(CASE WHEN ((dimensions like('%concert%') AND dimensions NOT like('concert'))
                  OR (file_format like('%concert%') AND file_format NOT like('concert')))
                THEN 1 ELSE 0 END
          ) AS total_1
     , SUM(CASE WHEN (dimensions like('concert') OR file_format like('concert'))
                THEN 1 ELSE 0 END
          ) AS total_2
  FROM clips
) c 
```

这可能会比您的查询更有效地运行。

尽管如此，这是否是您真正追求的结果集尚不清楚。

* * *

附录：更正。这个查询并不完全等价。当剪辑表为空（不包含行）时，此查询将返回不同的结果。这可以修复，但我不相信这真的是 Mark 所追求的结果集。

要处理剪辑表为空的情况：

```
SELECT CASE WHEN IFNULL(c.total_1,0) = IFNULL(c.total_2,0) THEN 1 ELSE 2 END AS num
  FROM (SELECT 1) i LEFT JOIN
(
SELECT SUM(CASE WHEN ((dimensions like('%concert%') AND dimensions NOT like('concert'))
                  OR (file_format like('%concert%') AND file_format NOT like('concert')))
                THEN 1 ELSE 0 END
          ) AS total_1
     , SUM(CASE WHEN (dimensions like('concert') OR file_format like('concert'))
                THEN 1 ELSE 0 END
          ) AS total_2
  FROM clips
) c 
```

# qt - 如何构建应用程序的代码

> ID：11210551
> 
> 赞同：0
> 
> 时间：2012-06-26T15:18:13.480
> 
> 标签：qt

我有一个关于如何构建应用程序代码的一般性问题。我将 QT 用于 GUI，并通过单击不同的 GUI 元素，有一个相应的插槽（事件处理程序）。所有这些都发生在主窗口类中。但现在我想知道如何更好地构建它。例如，如果一个插槽创建了一个对象，而另一个插槽（函数）想要访问这个对象，那么最好的解决方案是什么？我认为在存储对象的主窗口中有一个变量并不理想。也许是一个包含所有信息并且每个人都可以访问的通用（静态？）类？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T15:32:17.253

不要创建每个人都可以访问的静态类。一般来说，全局状态是不好的。

如果您需要让特定的 qobjects 知道来自某个对象的信号，那么您显然需要将它们连接起来。如果该对象将永远存在，那么您可能只是使用主窗口创建您正在创建的对象的父级，但这需要您可以在创建新对象时将所有信号连接到该新对象。

在某些时候，您将需要存储一组对象，这些对象需要在不同时刻动态连接和断开信号。一般来说，您需要坐下来思考对象的用途，并决定谁应该有权访问它。然后，您创建接口来管理该对象的创建、引用和销毁。然后，您创建这些接口的具体实现，并且只将它需要的功能传递给其他类。如果一个对象需要知道如何创建但不使用，则将创建者传递给类。如果它需要知道如何使用而不是创建，则传递一个“用户”。这种情况可能会变得难以想象的复杂，因此您必须尽早做出良好的设计决策，将不同的目的相互隔离。

对于您非常笼统的问题，这是我能提供的最好的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T23:28:27.740

You ask: "If a slot creates an object and another slot (function) wants access to this object, what is the best solution?"

Assuming that this is a fitting design for your particular application (a **big if**!), it's easy to do. Just pass the pointer to the newly made instance as a parameter in the signal. Couldn't be any simpler than that. Make sure that you decide (and stick to it!) on what's the lifetime and ownership of the created instance. The code below simply makes the new instance a child of the object in which it was created. That may or may not apply in your particular case.

```
class Class : public QObject
{
  Q_OBJECT
public:
  Class(QObject * parent = 0) : QObject(parent) { ... }
signals:
  void madeNew(Class *);
public slots:
  void creator() {
    emit madeNew(new Class(this));
  }
  void consumer(Class * instance) {
    // do something with the new instance
  }
}; 
```

# jquery - IE 在模态中失去对输入字段的关注

> ID：11210552
> 
> 赞同：2
> 
> 时间：2012-06-26T15:18:15.753
> 
> 标签：jquery, html, internet-explorer, thickbox

我有一个相当复杂的网络应用程序，我将其压缩为以下两个 HTML 页面，但问题仍然存在。问题？在 IE (8 & 9) 中，厚框模式的 (iframe) 输入字段在一秒（或更短）后失去焦点。它仅在处于模态时发生。如果您自己加载页面，焦点不会丢失。

我已经尝试了 jQuery 1.4.2 和 1.7.2，并且每个都出现了问题。我将其设置为 jsfiddle 但不认为它支持能够触发第二页。已经设置好了，所以你可以看到它[在这里工作](http://home.comcast.net/~filehost/gen/test.html)

基本页面：

```
<!DOCTYPE HTML>
<html>
<head>
<link href="http://jquery.com/demo/thickbox/thickbox-code/thickbox.css" media="screen" rel="stylesheet" type="text/css" >
</head>
<body>
<a id="createAccountLink" class="thickbox" href="test2.html?KeepThis=true&TB_iframe=true&height=400&width=600">Login</a>

<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script type="text/javascript" src="http://jquery.com/demo/thickbox/thickbox-code/thickbox.js"></script>
</body>
</html> 
```

模态：

```
<html>
<head>
</head>
<body>
<input type="text" id="ContactFormName" name="firstName" class="text" value="" />

<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script type="text/javascript">
$("#ContactFormName").focus();
</script>
</body>
</html> 
```

如果我从头开始构建它，我不会使用thickbox。但是现在改变它并不是一个真正的选择，因为它在其他地方被大量使用。

**回答** 焦点必须延迟。即使是 1ms 也可以。

```
setTimeout (function () {
$("#ContactFormName").focus();
}, 1); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T21:04:58.003

焦点必须延迟。即使是 1ms 也可以。

```
setTimeout (function () {
$("#ContactFormName").focus();
}, 1); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-08T16:51:05.443

对于 ASP.NET，我创建了一个扩展方法：

```
public static void FocusDelayed(this WebControl control, Page page)
{
    ScriptManager.RegisterStartupScript(page, page.GetType(), "focusDelayed", "setTimeout (function () { document.getElementById(\"" + control.ClientID + "\").focus(); }, 500);", true);
} 
```

所以，在弹出窗口的 onload Page_Load 中我称之为

```
protected void Page_Load(object sender, EventArgs e)
    {
        if (!IsPostBack)
        {
            controleName.FocusDelayed(Page);                
        }
    } 
```

希望它可以帮助某人。

干杯

# android - 在 TextView 上设置 Ellipsize 会减少显示的行数（而不是仅最后一个椭圆化）

> ID：11210553
> 
> 赞同：41
> 
> 时间：2012-06-26T15:18:26.023
> 
> 标签：android, textview, ellipsis

当我使用`TextView`and `singleLine="true"`（`ellipsize="end"`我的顶级TextView）时， *它运行良好*

**但在另一个** `TextView`有超过 1 行的情况下（在我的情况下，我的底部有 3 行`TextView`）， `lines="3" and maxLines="3" and ellipsize="end",` **无法正常工作。**

当我不`ellipsize="end"`输入 tvDesc 时，它显示 3 行，没关系。这是代码：XML：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <ImageView
        android:id="@+id/imgv"
        android:layout_width="65dp"
        android:layout_height="80dp"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:src="@drawable/img1"
        android:scaleType="fitXY" />

    <TextView
        android:id="@+id/tvTitle"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_toRightOf="@+id/imgv"
        android:background="@android:color/white"
        android:textColor="@android:color/black"
        android:text="Title testing line number and ellipsize at end"
        android:maxLines="1"
        android:singleLine="true"
        android:ellipsize="end"    <---  WORKS WELL
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <TextView
        android:id="@+id/tvDesc"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/tvTitle"
        android:layout_toRightOf="@+id/imgv"
        android:layout_alignBottom="@+id/imgv"
        android:layout_alignParentRight="true"
        android:textSize="14dp"
        android:lines="3"
        android:maxLines="3"
                       <----------  WITHOUT ellipsize

        android:text="I wanna this textview of having 3 lines and ellipsize at END and at this time I am Testing for it. This TextView shows 3 lines WITHOUT ellipsize property, but shows only 2 Lines when ELLIPSIZE property is setted"
        android:textAppearance="?android:attr/textAppearanceMedium" />

</RelativeLayout> 
```

**上面的代码显示了具有 3 行和无椭圆大小的 TextView tvDesc。**这是图片：

![在此处输入图像描述](../Images/2f2f123e16c5a0be1581fe6d39a612e7.png)

**但是，我想省略，所以我使用以下代码**：XML：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <ImageView
        android:id="@+id/imgv"
        android:layout_width="65dp"
        android:layout_height="80dp"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:src="@drawable/img1"
        android:scaleType="fitXY" />

    <TextView
        android:id="@+id/tvTitle"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_toRightOf="@+id/imgv"
        android:background="@android:color/white"
        android:textColor="@android:color/black"
        android:text="Title testing line number and ellipsize at end"
        android:maxLines="1"
        android:singleLine="true"
        android:ellipsize="end"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <TextView
        android:id="@+id/tvDesc"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/tvTitle"
        android:layout_toRightOf="@+id/imgv"
        android:layout_alignBottom="@+id/imgv"
        android:layout_alignParentRight="true"
        android:textSize="14dp"
        android:lines="3"
        android:maxLines="3"
        android:ellipsize="end"    <------  WITH  ELLIPSIZE

        android:text="I wanna this textview of having 3 lines and ellipsize at END and at this time I am Testing for it. This TextView shows 3 lines WITHOUT ellipsize property, but shows only 2 Lines when ELLIPSIZE property is setted"
        android:textAppearance="?android:attr/textAppearanceMedium" />

</RelativeLayout> 
```

**其中显示 TextView tvDesc 只有 2 行和 Ellipsize**，

这不是正确的用户界面，如下所示： ![在此处输入图像描述](../Images/d54b8adee3de29093cae890c8657b224.png)

**我想在 TextView tvDesc 中使用 ellipsize 3 行**

**谁能帮我。？**

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-07-28T10:05:52.013

这是迄今为止我发现并且目前在部署中使用的最简单的解决方案。如果您需要任何其他帮助，请告诉我！

哦，请记住删除`android:ellipsize`XML 中的标记，因为您将使用底部代码在 3 行末尾自动省略。

```
TextView snippet;
snippet.setText("loren ipsum dolor loren ipsum dolor loren ipsum dolor loren ipsum dolor loren ipsum dolor loren ipsum dolor loren ipsum dolor loren ipsum dolor loren ipsum dolor loren ipsum dolor loren ipsum dolor loren ipsum dolor loren ipsum dolor loren ipsum dolor ")
ViewTreeObserver vto = this.snippet.getViewTreeObserver();
vto.addOnGlobalLayoutListener(new OnGlobalLayoutListener() {

    @Override
    public void onGlobalLayout() {
        ViewTreeObserver obs = snippet.getViewTreeObserver();
        obs.removeGlobalOnLayoutListener(this);
        if (snippet.getLineCount() > 3) {
            int lineEndIndex = snippet.getLayout().getLineEnd(2);
            String text = snippet.getText().subSequence(0, lineEndIndex - 3) + "...";
            snippet.setText(text);
        }
    }
}); 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-09-08T12:17:56.183

只需设置`android:maxLines`和`android:ellipsize`。

```
<TextView
        android:id="@+id/tv_dua"
        android:ellipsize="end"
        android:maxLines="3"
        android:text="long text"
        android:textAppearance="?android:attr/textAppearanceMedium" /> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-08-11T10:51:18.700

使用以下内容获取最后一行带有省略号的多行文本视图：

```
android:maxLines="4"
android:ellipsize="end"
android:singleLine="false" 
```

将 4 替换为所需的行数。希望能帮助到你 ！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-11-24T10:09:54.410

我在 Android 7 和 8 上使用 maxLines 和 ellipsize 进行了尝试。

```
android:maxLines="3"
android:ellipsize="end" 
```

预览显示 2 行，第三行显示“...”。

但这似乎是预览器中的一个错误。

在设备上它工作得很好，3行文字，在第三行“......”的末尾

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-01-25T14:24:56.750

只需使用**ellipsize**与`scrollHorizontally="true"`. 简单干净。

它对我来说非常有效。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-09-16T20:19:54.863

尝试一下

```
tv.setSingleLine(false);
tv.setEllipsize(TextUtils.TruncateAt.END);
int n = 3; // the exact number of lines you want to display
tv.setLines(n); 
```

参考[以编程方式创建带有省略号的 TextView](https://stackoverflow.com/questions/8087555/programmatically-create-textview-with-ellipsis)

# html - 可从根目录下载文件

> ID：11210561
> 
> 赞同：0
> 
> 时间：2012-06-26T15:18:44.840
> 
> 标签：html, drupal

我想创建一个名为“下载”的文件夹，它位于 drupal 中我的站点根目录之外。然后我需要在该下载文件夹中放置一个pdf文件。如何提供此文件的可下载链接。任何的想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T15:22:12.937

```
<?php
    $file = '/full/path/below/root/secret.pdf';

    header('Content-Description: File Transfer');
    header('Content-Type: application/octet-stream');
    header('Content-Disposition: attachment; filename=' . basename($file));
    header('Content-Transfer-Encoding: binary');
    header('Expires: 0');
    header('Cache-Control: must-revalidate, post-check=0, pre-check=0');
    header('Pragma: public');
    header('Content-Length: ' . filesize($file));
    ob_clean();
    flush();
    readfile($file);
    exit;
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T15:42:14.090

对于apache，可以设置一个目录别名，即：

```
Alias /download /var/www/download
<Directory /var/www/download>
  Order allow,deny
  Allow from all
</Directory> 
```

或者您可以简单地为此任务使用符号链接：

```
ln -s /var/www/download /var/www/myproject/download 
```

确保为您的 Web 服务器启用符号链接。

# java - 用于预处理文本的 Java 库

> ID：11210565
> 
> 赞同：-1
> 
> 时间：2012-06-26T15:18:54.183
> 
> 标签：java, nlp

我有近 40,000 个文本文件（平均大小大于 1KB）用于自然语言处理。我想用 Java 对所有这些文件应用一些通用的预处理功能。这些功能包括将所有字符转换为小写，删除所有标点符号，删除所有数字，删除重复的空白（制表符），删除所有预定义的停用词，**最后**将生成的文件存储在磁盘上。

任何人都可以为我推荐一些有效的 Java 库来完成这类工作。非常感谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T12:29:57.133

Mallet 是一个 Java 机器学习库，也能够进行初始文本处理： http: [//mallet.cs.umass.edu/import.php](http://mallet.cs.umass.edu/import.php)。

输出可能需要采用 Mallet 的数据格式，但这种格式设计得非常好。

# php - 采用一组（或字符串）术语，我如何有效地删除常用术语？

> ID：11210573
> 
> 赞同：1
> 
> 时间：2012-06-26T15:19:32.250
> 
> 标签：php, arrays

这是一个有点模棱两可的问题，对此我深表歉意。

我`$_POST`使用以下代码从值中获取了大量单词：

```
$text2check = array();          

$fields = array( "etymology", "distribution", "habitat", "max_size", "aquarium_size", "maintenance", "water_chemistry", "diet",
    "behaviour", "dimorphism", "reproduction", "misc_notes" );

$fields = array( "distribution" );

foreach ( $_POST as $key => $value ) {
    if ( in_array( $key, $fields ) ) {
        $text2check = array_merge( $text2check, explode( " ", strip_tags( utf8_decode( $value ) ) ) );
    }
} 
```

我想要做的 - 以绝对最高的效率 - 是删除某些单词：

*   重复
*   4个字符以下的单词
*   常用术语...

常用术语是我根本不熟悉的东西。如何确定一个常用词？这仅仅是对互联网上的一系列常用术语进行硬编码并与之进行比较的情况吗？

在将数组与数组进行比较时，最有效的方法是什么？

* * *

**编辑：解释**

这个函数背后的目的对我来说有点复杂。根据[这个](https://stackoverflow.com/a/11053843/864245)答案，我正在尝试运行一个内容过滤器来检查某些术语，然后将它们链接到我网站的其他部分。由于每个帖子有大量的字数和大量的潜在链接，我试图在运行过滤器之前进行预检查，以减少运行过滤器所需的链接数量。

因此，常用术语基本上是任何经常出现并且肯定不会链接的东西；经常使用的术语，例如“有时”、“显然”等。

* * *

提前致谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T15:23:49.427

为了删除重复项，array_unique() 可以解决问题。

四个字符以下的单词，只需遍历数组并检查。

就常用术语而言，您可以遍历数据并删除出现次数超过 X 的术语，除了我认为您必须对它们进行硬编码。

# clojure - 为什么列表的 println 的行为不像列表理解？

> ID：11210576
> 
> 赞同：1
> 
> 时间：2012-06-26T15:19:45.183
> 
> 标签：clojure, list-comprehension

为什么我的 println （示例的最后一行）不像列表理解？我正在尝试使用以下代码来解决 Clojure 中 Project Euler 的问题 #2：

```
(def fibsq [0 1])

(defn second-to-last [sq]
  (nth sq (- (count sq) 2)))

(second-to-last fibsq)

(defn add-last-two [sq]
  (+ (last sq) (second-to-last sq)))

(defn add-to-fibsq [sq]
  (if (< (add-last-two sq) 100)
    (add-to-fibsq (conj sq (add-last-two sq)))
    sq))

;; putting it all together
(add-to-fibsq fibsq)

(println [x (add-to-fibsq fibsq) :when (even? x)]) 
```

我得到的输出如下：

> （定义 ||[0 1]|| [0 1]）
> 
> (defn 倒数第二个 [||[0 1 1 2 3 5 8 13 21 34 55 89]||] (nth ||[0 1 1 2 3 5 8 13 21 34 55 89]|| (- (计数 ||[0 1 1 2 3 5 8 13 21 34 55 89]||) 2)))
> 
> (倒数第二个||[0 1]||)|| => 0||
> 
> (defn add-last-two [||[0 1 1 2 3 5 8 13 21 34 55 89]||] (+ (last ||[0 1 1 2 3 5 8 13 21 34 55 89]||) （倒数第二个 ||[0 1 1 2 3 5 8 13 21 34 55 89]||)）
> 
> (defn add-to-fibsq [||[0 1 1 2 3 5 8 13 21 34 55 89]||] (if (< (add-last-two ||[0 1 1 2 3 5 8 13 21 34 55 89]||) 100) (add-to-fibsq (conj ||[0 1 1 2 3 5 8 13 21 34 55 89]|| (add-last-two ||[0 1 1 2 3 5 8 13 21 34 55 89]||))) ||[0 1 1 2 3 5 8 13 21 34 55 89]||))
> 
> ;; 把它们放在一起 (add-to-fibsq ||[0 1]||)|| => [0 1 1 2 3 5 8 13 21 34 55 89]||
> 
> (println [x (add-to-fibsq ||[0 1]||) :when (even?x)])|| => java.lang.RuntimeException: Unable to resolve symbol: x in this context, 编译:(NO_SOURCE_PATH:19:2)||

这不是列表推导的工作方式吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T15:45:38.757

Clojure 没有像您在最后一行中尝试使用的独立列表理解。您需要`for`在最后一个表达式的开头调用 to 。

```
(println (for [x (add-to-fibsq fibsq) :when (even? x)] x)) 
```

它是`for`为调用结果中的每个条目将值绑定到 x 的函数`(add-to-fibsq fibsq)`。在这种情况下，甚至`for`超过了要求

```
(println (filter even? (add-to-fibsq fibsq))) 
```

# hibernate - 从 HQL 查询返回多个值

> ID：11210580
> 
> 赞同：1
> 
> 时间：2012-06-26T15:20:06.070
> 
> 标签：hibernate, hql

我有以下 HQL 查询：

```
SELECT ita.invoiceType, ita.agreementNumber, itr.ruleCategory 
FROM InvoiceTypeAgreements ita, InvoiceTypeRules itr 
WHERE ita.invoiceType = itr.invoiceType 
AND ita.agreementNumber IN (?1) 
AND itr.ruleCategory IN (?2) 
```

我`query.getResultList()`用来从中获取值。我假设它正在返回一个，`ArrayList<String[]>`但每当我尝试访问`String[]`'s 时，`ArrayList<String[]>`我都会收到此错误：

```
java.util.concurrent.ExecutionException: javax.ejb.EJBException:
java.lang.ClassCastException: [Ljava.lang.Object; cannot be cast to [Ljava.lang.String; 
```

不是`ArrayList<String[]>`HQL 查询返回的内容吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T15:28:56.010

正如您在错误消息中看到的那样，您得到`List<Object[]>`的不是字符串。结果值不一定是字符串（也许它们在您的示例中，但通常不是）。

# java - 将参数传递给 AIDL

> ID：11210583
> 
> 赞同：1
> 
> 时间：2012-06-26T15:20:17.100
> 
> 标签：java, android, function, aidl

我的 AIDL 文件中有一个函数

```
int getAvailableTokens(out List<String> list); 
```

从主类我想调用这个函数并作为参数给出`List<String> mylist`命令函数将设置它。我怎么能做到这一点？

### 已编辑

```
int getAvailableTokens (List<FidoTokenInfo> list) throws RemoteException {
    // EDITED: The list must be set in this way!!!
    list.addAll(mFidoDsm.getList());
    // THIS WAY IS NOT CORRECT !!!
    // list = mFidoDsm.getList();
    Log.i(TAG, "list .size() = " + list.size()); // here list size is 1.
}

// First this function calles.
public List<FidoTokenInfo> getAllTokens () throws FidoException {
    List<String> tokenList = new ArrayList<String>();;

    try {
       int error = dsmService().getAvailableTokens(tokenList);
       Log.i(TAG, "tokenList.size() = " + tokenList.size()); // here list size is 0.
       return tokenList;
    } catch (RemoteException e) {
    }
} 
```

好吧，我做了一些更改，这是我的代码，如您所见，我`getAvailableTokens`从函数调用`getAllTokens`函数并作为参数传递给`getAvailableTokens`列表`tokenList`，然后在`getAvailableTokens`我设置该列表，然后我检查它的大小为 1，但是当我检查列表的大小时`tokenList`它是 0 但为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T18:42:23.733

在您的 .aidl 文件中，您应该添加`inout`而不是`out`. 在这种情况下，您应该在主类中初始化列表：

```
List<String> myList = new ArrayList<String>();
int error = getAvailableTokens(mylist);
int size = myList.size(); 
```

# c++ - 如何使用冯诺依曼邻域在 3D 空间中设置索引？

> ID：11210585
> 
> 赞同：2
> 
> 时间：2012-06-26T15:20:22.467
> 
> 标签：c++, c, algorithm

给定二维空间（网格）中的索引（x，y），我可以通过冯诺依曼邻域推导出邻居索引：

[http://en.wikipedia.org/wiki/Von_Neumann_neighborhood](http://en.wikipedia.org/wiki/Von_Neumann_neighborhood)。

我如何最好地将这个概念扩展到三维空间（具有最小的运行时复杂性）以使用冯诺依曼邻域导出 (x,y,z) 的邻域索引？

有人可以用一些伪/C代码来帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T15:28:37.757

如果您谈论的是 6 个直接邻居，最有效的方法是对其进行硬编码：

```
int neighbour_offsets[3][6] = {
  {1, 0, 0},
  {0, 1, 0},
  {0, 0, 1},
  {-1, 0, 0},
  {0, -1, 0},
  {0, 0, -1},
}; 
```

对于 rank <= 的邻居`r`，对于固定维度的嵌套`for`循环将起作用：

```
for (x = -r; x <= r; ++x) {
    r_x = r - abs(x);
    for (y = -r_x; y <= r_x; ++y) {
        r_y = r_x - abs(y);
        for (z = -r_y; z <= r_y; ++z) {
            printf("%d, %d, %d\n", x, y, z);
        }
    }
} 
```

如果您希望邻居在远处`d == r`而不是`d <= r`，请使用`z := {-r_y, r_y}`.

对于任意低维，递归将起作用（并且相当清晰）；对于高维，您最好从递归解决方案开始并将其转换为循环。在高维度（D >> r）中，大多数时候大多数维度的偏移量将为零。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T15:43:32.540

如果您正在寻找特定点的索引，那么答案很简单：

令 D 为 3D 空间中 2 个点的曼哈顿距离：

```
 D = abs(x1-x2) + abs (y1-y2) + abs (z1 - z2) 
```

那将是您的索引。

如果您正在尝试构建冯诺依曼邻域的 3D 八面体，那么最简单的方法是使用递归。

其实很容易证明，如果一个点**X**在 Y 的**R****范围**内，而**Y**在**Z的****K**范围内，那么**X**至少在**Z的****K+R**范围内（Go from X to Y in R然后在 K 个其他步骤中从 Y 到 Z）。

 ******该解决方案需要 O(n) 时间，其中 n 是邻域中点的确切数量。它可以很容易地优化以避免冗余。

使用类似技术的算法示例是 Dijkstra 算法。虽然它的主要目的是寻路，但它的原理是探索范围为 1、2 等的所有邻居（在未加权图上）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T15:32:29.627

这似乎有点简单，所以我可能误解了你的问题，但是对于`r`三个维度的任意，在 C 中，循环通过相邻单元格并处理它们或存储索引将类似于：

```
for ( i = -r ; i <= r ; i++ )
    for ( j = -r ; j <= r ; j++ )
        for ( k = -r ; k <= r ; k++ )
            if ( abs(i) + abs(j) + abs(k) <= r ) {
                do whatever in the cell (x+i,y+j,z+k).
                } 
```

请注意，这不是最有效的方式，但可能是最直接的方式。******

# .net - 使用起订量等的好处

> ID：11210586
> 
> 赞同：3
> 
> 时间：2012-06-26T15:20:26.177
> 
> 标签：.net, unit-testing, repository, moq

我遇到了一些关于使用 Moq 进行单元测试的参考资料。但是在查看 moq 的 wiki 示例后，我真的看不出比创建模拟存储库有什么好处。我错过了什么吗。下面是我创建的模拟存储库的示例。起订量可以以任何方式优化吗？

```
 namespace Models
    {
        public class MockImagesRepository : IImagesRepository
        {
            private readonly BlogContext _context;
            private readonly List<ImageViewModel> _imageViewModels;

            public MockImagesRepository()
            {
                _context = new BlogContext();
                _imageViewModels = new List<ImageViewModel>();
                for (var i = 0; i < 10; i++)
                {
                    _imageViewModels.Add(new ImageViewModel
                                             {
                                                 Id = i,
                                                 AlternateText = "AlternateText " + i,
                                                 Description = "Description " + i,
                                                 Name = "Name " + i,
                                             });
                }
                for (var i = 10; i < 20; i++)
                {
                    _imageViewModels.Add(new ImageViewModel
                                             {
                                                 Id = i,
                                                 AlternateText = "AlternateText " + i,
                                                 Description = "Description " + i,
                                                 Name = "Name " + i,
                                             });
                }
                for (var i = 20; i < 30; i++)
                {
                    _imageViewModels.Add(new ImageViewModel
                                             {
                                                 Id = i,
                                                 AlternateText = "AlternateText " + i,
                                                 Description = "Description " + i,
                                                 Name = "Name " + i,
                                             });
                }

            }

            public int GetCount()
            {
                return _imageViewModels.Count;
            }

            public IEnumerable<ImageViewModel> FindRange(string format, int i, int recordsCount)
            {
                return _imageViewModels.Skip(i).Take(recordsCount);
            }

            public void Add(Image image)
            {
            }

            public IEnumerable<Image> GetImages()
            {
                var images = new List<Image>();
                foreach (var imageViewModel in _imageViewModels)
                {
                    images.Add(new Image(imageViewModel));
                }
                return images;
            }

            #region Implementation of IDisposable

            public void Dispose()
            {
                _context.Dispose();
            }

            #endregion

 }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T15:43:39.797

使用 Moq，您无需手动创建模拟对象。仅此一项就可以节省您的时间。

无需手动创建这些模拟对象，您将设置 Moq 以根据调用的内容/方式告诉它如何表现。

使用此方法，您将能够执行以下操作：

*   根据不同的输入设置各种响应或提供相同的结果而不考虑输入（使用设置）

*   允许您通过提交捕获所有参数值来简化测试代码（使用 It.IsAny<> 或 It.Is<>）

*   验证一个方法被调用的次数，或者它是否被调用过。（使用验证）。这将允许您测试某些依赖项是否已使用正确的参数调用了定义的次数。

*   设置或验证代码是否会抛出某个异常（使用 Throws）

当您掌握起订量时，对于中等复杂的测试用例，您将看到编写测试用例的好处。

当然，您可以手动完成所有这些事情，但是在您的模拟中编写这些设施将非常耗时。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-26T15:36:22.047

对于某些情况，您的方法可能是最简单的。但是，当您要模拟的对象的行为更复杂或更多样化时，您通常会得到以下结果：

*   功能略有不同的模拟类的激增。
*   一个具有各种控件的模拟类来调整模拟行为，这很容易引入错误。

使用像 Moq 这样的模拟库可以让您非常清晰地定义您的行为，通常与您的测试一致，因此交互更加清晰和直接*。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T15:34:43.480

Moq 将使您能够跳过您创建的存储库。但是 Mock 对象的主要用途是隔离您的单元测试。

示例：如果您想测试对象如何对某些数据做出反应。您可以模拟该数据。

在您的情况下，您可以执行以下操作：

```
// Create the mock from your interface
var mock = new Mock<IImagesRepository>();

// Setup the mock so it will return what you want
mock.Setup(foo => foo.GetImages()).Returns(new ImageViewModel
                                         {
                                             Id = i,
                                             AlternateText = "AlternateText " + i,
                                             Description = "Description " + i,
                                             Name = "Name " + i,
                                         });

// Then you can use it
functionThatNeedAnImageViewModel(mock.Object.GetImages()); 
```

查看此 Moq[快速入门](http://code.google.com/p/moq/wiki/QuickStart)了解更多信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T15:41:24.010

您最终将维护两个存储库，一个是真实的，一个是假的。更糟糕的是，除非您进行大量编码，否则您的伪造者无法真正伪造所有内容，例如两个对象之间的关系。最终，如果你有比你的例子更复杂的对象，那将是不值得的。

更重要的是，当测试一个依赖于您的存储库的类时，存储库不是测试的重点，因此使用 MOQ 或 RhinoMock 等框架进行模拟要容易得多。

# asp.net-mvc-3 - 在 Visual Studio 中从不同 URL 测试 Web 应用程序的最佳方法

> ID：11210591
> 
> 赞同：0
> 
> 时间：2012-06-26T15:20:36.630
> 
> 标签：asp.net-mvc-3, visual-studio, debugging, iis

我想要一些关于从多个 URL 测试 Web 应用程序（在我的情况下为 ASP.Net MVC 3）的建议。

该站点的行为将根据请求来自哪个域名而有所不同。没什么花哨的，只是用其他一些简单的小东西加载不同的布局。

目前，web.config 包含代码所作用的有效域，到目前为止一切似乎都运行良好。

每当我在 Visual Studio 中点击 Run 时，它都会使用通常的*localhos:xxxx*地址启动开发人员服务器实例。如果我想在 VS 中测试每个布局，我需要将*localhost*配置为与我希望加载的布局相关联。

我可以忍受现在的情况，但一切都在 TFS 上，所以如果有人签出文件（用于测试）并忘记重新签入，可能会引起一些头痛。

所以我想知道是否有人有一些解耦的方式来启动具有特定地址的站点，同时保持轻松调试的能力（最好不要通过部署到 IIS）

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T15:23:32.890

`localhost`您可以在文件中关联一些域名`hosts`：

```
127.0.0.1 foo.com 
```

然后导航到`http://foo.com:xxxx`

# svn - 从一个 SVN 文件夹结构移动到另一个

> ID：11210593
> 
> 赞同：0
> 
> 时间：2012-06-26T15:20:39.487
> 
> 标签：svn, version-control, administration

我们有一个 SVN 服务器，其文件夹结构如下：

> /svn/CompanyName/Trunk/项目

其中公司名称是项目，所有内容都被签入，所有内容都在主干中，每个项目都有一个文件夹......在某些情况下，我们的项目后面有一个 v2 或 v3......这是设置了大约 5 或6年前，我去年接受了它......

我升级计划的一部分是移动东西，所以我们有以下结构：

> /svn/projectname/(主干|标签|分支)/

计划是从项目的最新版本中获取所有文件并将其放入主干，如果有项目的 v2 或 v1，则将它们放在自己的分支中......

到目前为止，我已经弄清楚了如何让 svnadmin dump 和 svndump-filter 工作以获取一个特定的文件夹（所以，svn/companyname/trunk/project1）并得到 2 个测试项目（projectv1 和 projectv2）。现在我需要告诉项目 v1 导入到 project/branch/v1 并告诉项目 v2 导入到 /project/trunk ...

除了直接弄乱转储文件之外，关于如何重命名文件夹并保留历史记录的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T11:00:48.613

根据权威的[SVN 参考](http://svnbook.red-bean.com/en/1.7/svn.reposadmin.maint.html#svn.reposadmin.maint.filtering)调整转储文件是要走的路：

> 在这一点上，你必须做出决定。您的每个转储文件都将创建一个有效的存储库，但将完全保留原始存储库中的路径。这意味着即使您有一个专门用于您的 calc 项目的存储库，该存储库仍然有一个名为 calc 的顶级目录。如果您希望您的主干、标签和分支目录位于存储库的根目录中，您可能希望编辑转储文件，调整 Node-path 和 Node-copyfrom-path 标头，以便它们不再具有第一个 calc /路径组件。此外，您还需要删除创建 calc 目录的转储数据部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T16:01:24.600

looking around, based on the comment @malenkiy_scot made about editing the file, i found an article on the openSUSE lizards site about [merging SVN Repositories](http://lizards.opensuse.org/2010/10/30/merging-svn-repos-explained/). this seems to do what i need it to do, including the renaming of folders, merging of dump files, etc...

# html - 在 XML 文件上实现搜索的策略

> ID：11210600
> 
> 赞同：1
> 
> 时间：2012-06-26T15:20:55.370
> 
> 标签：html, xml

我发现了一些与 XML 搜索相关的帖子，但这些帖子对我的任务没有帮助。

我的任务是实现搜索。来源：5-6 个 XML 文件，如人物、建筑物、新闻等（每个类别都是一个 XML 文件，我总共有 30000 个条目）。用户可以选择一个类别并输入一些关键字。搜索短语应该搜索 XML 文件并返回结果显示在 html 页面上。如果用户未选择类别，则应搜索所有 XML 文件。

请告诉我实现此和最佳技术的最佳策略/算法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T17:44:21.033

转换您的 XML 文档（使用 XSL）并将它们（HTTP 发布）上传到[Solr](http://lucene.apache.org/solr/)的实例。然后，您将能够对索引数据执行一系列搜索操作。

[Solr Wiki](http://wiki.apache.org/solr/UpdateXmlMessages)目前不可用，但这里是它支持 XML 格式的示例：

```
<add>
  <doc>
    <field name="employeeId">05991</field>
    <field name="office">Bridgewater</field>
    <field name="skills">Perl</field>
    <field name="skills">Java</field>
  </doc>
  [<doc> ... </doc>[<doc> ... </doc>]]
</add> 
```

# macros - 如何将 // 或 " 传递给宏替换

> ID：11210601
> 
> 赞同：2
> 
> 时间：2012-06-26T15:20:59.643
> 
> 标签：macros, c-preprocessor

我试图知道如何`//`以及`"`可以将其传递给宏替换，如下所示：

```
#define STR(str) #str 
```

在调用`STR(hel"lo)`or时`STR(hel//lo)`。这给出了错误。有没有办法将这些传递给宏？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T15:31:30.270

`//`除了嵌入在字符串或字符常量中作为`//`注释到行尾的开始标记之外，没有其他方法可以传递给宏调用。注释剥离在处理宏之前完成。

同样，没有办法将裸双引号传递给宏。双引号要​​么在字符常量内，要么标记字符串的开始。

`/*`与和类似`'`，对推理进行适当的更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T15:32:52.173

不，没有办法在你写的时候传递它们。翻译阶段 3 是“源文件被分解为预处理标记和包括注释在内的空白序列”。

这意味着 STR(hel//lo) 变成了 STR(hel （带有尾随空格而不是注释）。

“预处理标记的类别是标头名称、标识符、pp 编号、字符常量、stringl 文字、标点符号和在词法上不匹配其他预处理标记字符的单个非空白字符。如果 ' 或 " 字符匹配最后一个字符，行为未定义” ...这意味着 STR(hel"lo) 也不允许。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-16T12:50:23.307

给定一个标识宏和一个求值的字符串化宏，

```
#define ID(X) X
#define STR_EVAL(X) STR(X) 
```

你可以“逃避”一个斜线

```
STR_EVAL( ID(hel)ID(/)/lo ) 
```

至于单引号，对不起，你不走运。宏的参数必须是记号，并且明确禁止单引号作为记号。

# mysql - 来自 mysql_next_result() 的未处理错误

> ID：11210602
> 
> 赞同：1
> 
> 时间：2012-06-26T15:21:09.210
> 
> 标签：mysql, coldfusion

我遇到了一个错误，“来自 mysql_next_result() 的未处理错误”，这是我以前从未见过的，希望有人能提供任何见解。

我刚刚将我的服务器升级到 ColdFusion 9。大约在同一时间，我更新了一些脚本，添加了一个我现在正在测试的新功能，该功能使用由 @ 符号包围的标签。在我的测试中，我发现我的脚本在没有任何这些标签的情况下工作，但没有这些标签。不幸的是，由于这是在 CFTransaction 块内的单个 CFQuery 中处理的，因此很难查明问题。据我所知，失败的查询类似于：

```
INSERT INTO galleries_images    (EID, Name, Desc1, Format1, OrderID, category, FullPath, hastags, haskeys, udate)
VALUES              (<CFQUERYPARAM CFSQLTYPE="CF_SQL_INTEGER" VALUE="#EID#">,
<CFQUERYPARAM CFSQLTYPE="CF_SQL_VARCHAR" VALUE="#Name#">,
<CFQUERYPARAM CFSQLTYPE="CF_SQL_VARCHAR" VALUE="#imageProps[2][2]#">,
<CFQUERYPARAM CFSQLTYPE="CF_SQL_INTEGER" VALUE="0">,
<CFQUERYPARAM CFSQLTYPE="CF_SQL_INTEGER" VALUE="#imageProps[2][4]#">,
<CFQUERYPARAM CFSQLTYPE="CF_SQL_INTEGER" VALUE="#catID.ID#">,
<CFQUERYPARAM CFSQLTYPE="CF_SQL_VARCHAR" VALUE="#Source_Dir#\#Name#">,
<CFQUERYPARAM CFSQLTYPE="CF_SQL_INTEGER" VALUE="#hastags#">,
<CFQUERYPARAM CFSQLTYPE="CF_SQL_INTEGER" VALUE="#haskeys#">,
Now()); 
```

这些变量的值应大致为：

```
 EID=24
 Name=Nick001@ord@001@ord@@tags@Pre-Ceremony@tags@.jpg
 imageProps[2][2]=
 imageProps[2][4]=001
 catID.ID=67
 Source_Dir=\Name=01_Nicholas - Camera\Nick001@ord@001@ord@@tags@Pre-Ceremony@tags@.jpg
 hastags=0
 haskeys=0 
```

相同的查询（或一组查询，因为其中 50-100 个在一个 CFQuery 块中运行）将在名称和 source_dir 没有 @ 符号的情况下运行得很好。由于这些在 CFQueryParam 标记中，我认为尽管它们与 MySQL 中的变量声明相关，但它们可以安全使用。有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T20:44:02.503

我追查了这件事的原因，这与我的预期完全不同。事实证明，我的数据库字段之一是 250 个字符，而允许的文件名长度是 255 个字符，这妨碍了我。当我增加数据库字段的大小时，一切都开始工作了。

我不知道为什么我收到了 mysql_next_result() 错误而不是更多信息；也许这是一个通用错误。希望这个小花絮可以帮助处于同样情况的其他人。

# ms-access - 为什么这条 SQL 语句要求一个值？

> ID：11210605
> 
> 赞同：0
> 
> 时间：2012-06-26T15:21:15.650
> 
> 标签：ms-access, append, vba, ms-access-2003

我有一个表单，可让您将名称添加到表中并将其显示在下拉菜单中。当我单击表单时，它应该要求用户输入他们想要添加的名称，然后单击“确定”。用户单击确定后，名称应存储在表格中并添加到下拉菜单中。

一切正常，但是当用户在文本框中键入值并单击“确定”时，会弹出一个窗口，询问参数值。无论用户在此参数值中键入什么，都会将其保存在表中，而不是从文本框中获取值。我不确定为什么会这样。

名称是一个字符串，是不是引号？

这是代码：

```
Dim test As String
test = Text1.Value
DoCmd.RunSQL "INSERT INTO List_Of_Agencies(T_PI_GroupName)VALUES (" & test & ");"
Form_0_Cover.Combo2.Requery 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T15:40:33.287

```
DoCmd.RunSQL "INSERT INTO List_Of_Agencies(T_PI_GroupName) VALUES ('" & test & "')" 
```

# opengl - glBlendFunc 和 glClearColor alpha 参数

> ID：11210607
> 
> 赞同：4
> 
> 时间：2012-06-26T15:21:28.257
> 
> 标签：opengl, glsl, opengl-4

在 OpenGL 中，为了实现适当的透明度效果，我应该使用`glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA)`该混合功能，但使用该混合功能，alpha 参数`glClearColor`变得毫无意义。当我更改 alpha 参数时，`glClearColor`我仍然得到相同的效果。什么时候可以使用 alpha 参数`glClearColor`？我能达到什么样的效果？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-26T15:30:18.470

`glClearColor`将 RGBA 帧缓冲区的颜色（和 alpha 值）设置为`glClear(GL_COLOR_BUFFER_BIT)`. 帧缓冲区 alpha 值将与`GL_DST_ALPHA`或`GL_ONE_MINUS_DST_ALPHA`混合函数一起考虑。

但是，您的常规屏幕窗口帧缓冲区通常不带有 alpha 值。[当然也存在明显的例外，例如背景透光的透明窗口，但它们的设置有点乏味，并且仍然会接收所有鼠标事件，即使在“透明”区域上也是如此。](https://stackoverflow.com/a/9215724/524368)

具有 alpha 通道的帧缓冲区主要用于*渲染到纹理*目标。

因此，在您的情况下，您对透明颜色没有特别的兴趣。您更有可能对`glColor4f`Alpha 通道的第 4 个参数或纹理感兴趣。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-01-19T05:08:10.320

Opacity 是 Alpha，不是透明度。 为 0 时根本看不到，为 1 时完全可以看到。如果它是 0.5f，你可以在一半功率下看到它。

# asp.net - ASP.NET 如何在串口中等待事件

> ID：11210608
> 
> 赞同：0
> 
> 时间：2012-06-26T15:21:29.240
> 
> 标签：asp.net, silverlight, port, gsm, modem

我的主管要求我使用 ASP.NET 和 Silverlight.NET 开发一个 Web 应用程序，该应用程序通过 COM 端口管理 GSM 调制解调器，我已成功执行大部分所需任务，但收到消息时的邮件通知除外GSM调制解调器，事实上，这个任务需要监听COM端口并在接收数据时执行一个动作，我已经搜索了一个解决方案，但到目前为止我只遇到了桌面C#应用程序的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T15:28:19.457

此任务不适用于 ASP.NET 应用程序，它本质上是基于浏览器的请求/响应范例。对于调制解调器，您需要一个长时间运行的服务来监听。我也不确定它是否适合/可能与 Silverlight 一起使用。

您最好的选择是编写一个 WinForms 或更好的 Windows 服务应用程序来侦听端口并处理该功能，同时通过 ASP.NET 进行用户交互。

您的老板可能了解也可能不了解技术差异，但将功能分解为不同的可执行文件/应用程序以处理不同的任务是完全有效的。

*当您考虑它时，这实际上是常态。这样的设计使这个网站成为可能。SO 使用某种数据库来存储数据，使用 Web 服务器执行逻辑并以浏览器可读格式流式传输数据，并且您正在使用浏览器查看 Web 服务器提供的数据。*

为工作使用正确的工具对于良好的设计至关重要。ASP.NET 和 Silverlight 是侦听 COM 端口的错误工具。

如果您需要与 WinForms 应用或 Windows 服务进行通信，您可以通过 WCF 公开函数并向它们添加服务引用。

# java - Grails 输出目录

> ID：11210618
> 
> 赞同：3
> 
> 时间：2012-06-26T15:21:59.160
> 
> 标签：java, grails, batch-file

我想使用 grails 创建战争，但默认情况下它会在目标目录中创建战争文件。我想将我的战争部署到 Tomcat 中。是否可以？谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-26T15:24:53.670

在 grails-app/conf/BuildConfig.groovy 文件中，您可以像这样指定战争：

```
grails.project.war.file = "target/${appName}-${appVersion}.war" 
```

因此，随心所欲地设定目标。虽然，我不建议直接在 Tomcat 中使用 WAR 进行部署。除非您只是为了本地测试而这样做。

# sql - 常规列旁边的Oracle SQL返回计数（*）列？

> ID：11210621
> 
> 赞同：4
> 
> 时间：2012-06-26T15:22:09.940
> 
> 标签：sql, oracle, count

在 Oracle SQL 中，如何在常规列旁边返回 count(*) 列？

# 什么有效：

```
select count(*) from TABLE where username = 'USERNAME'; 
```

# 我想做什么：

```
select username,count(*) from TABLE where username = 'USERNAME'; 
```

因此，我希望在计数旁边使用用户名，将其扩展为另一个查询，其中列出了许多用户名及其记录计数。

# 错误：

```
ORA-00937: not a single-group group function
00937\. 00000 -  "not a single-group group function"
*Cause:    
*Action:
Error at Line: 7 Column: 7 
```

# 问题：

那么，我该怎么做呢？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-26T15:23:07.787

```
SELECT username,count(*) from TABLE WHERE username='USERNAME' GROUP BY username 
```

应该做的伎俩！

第一个查询有效的原因是因为 MySQL 可以自动将该查询转换为聚合查询，因为它“理解”您要计算 username='USERNAME' 的所有行。第二个查询不够清楚 - 您正在尝试对查询选择的行执行聚合函数，但您还需要查询的行。我的查询清楚地表明您只希望从集合中返回一个用户名，因此聚合不是问题。

# java - 如何将来自不同项目的 JSP 文件包含到我的项目中

> ID：11210628
> 
> 赞同：6
> 
> 时间：2012-06-26T15:22:27.943
> 
> 标签：java, jsp, servlets

如何将来自不同项目的 JSP 文件包含到我的项目中？

```
<%@ include file="./common/webappfooter.jsp"%> 
```

上面的代码不起作用。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-26T15:30:02.063

仅当另一个项目以 JAR 文件的形式捆绑在`/WEB-INF/lib`主 webapp 项目的文件夹中并且 JSP 文件又放置在`/META-INF/resources`另一个项目的文件夹中时，这才有效。

因此，如果您`/META-INF/resources/common/webappfooter.jsp`在另一个项目中有一个，那么应该执行以下包含：

```
<jsp:include path="/common/webappfooter.jsp" /> 
```

如果您使用的是有点自尊的 IDE，您可以将其配置为自动将其他项目捆绑为 webapp 项目的 .jar 的 JAR `/WEB-INF/lib`。目前尚不清楚您使用的是什么 IDE，但在 Eclipse 中，只需在主 webapp 项目的属性中添加另一个项目作为*部署程序集。*

![替代文字](../Images/8eccc7731738ffd76ee1c0bb80bb2069.png)

在 Eclipse 中，要创建具有正确文件夹结构的项目，请选择“Web Fragment Project”向导。

# jquery - jQuery并在表单中添加一行

> ID：11210629
> 
> 赞同：0
> 
> 时间：2012-06-26T15:22:34.573
> 
> 标签：jquery

我在表格中有我的表格，我使用此代码添加新行和新字段：

```
$("input.buttonCAdd").click(function(){ 
    $('#table > tbody > tr').eq(2).after('<tr><td width=\"25%\"><b>Substancje czynna:</b></td><td width=\"25%\"><select name=\"nazwamiedzynarodowa[]\"><option selected=\"selected\">nazwa1</option><option>nazwa2</option></select></td><td> Dawka: <br><input name=\"dawka[]\" type=\"text\"> <br></td><td>Jednostka:<br><select name=\"jednostka[]\"><option selected=\"selected\">jed1</option><option>jed2</option></select></td> </tr>')
}); 
```

可以，但是我的表单“看不到”新字段，并且我没有从这些字段中获取数据。我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T17:13:42.130

我不确定这是否可以帮助您，但我想问题可能出在此处：“如果 HTML 比没有属性的单个标记更复杂，就像在上面的示例中一样，则元素的实际创建由浏览器的 innerHTML 机制。” 引用自[jQuery 文档](http://api.jquery.com/jQuery/#jQuery2)（另请参见[2](https://stackoverflow.com/a/4158203/1422309)）我想如果您避免使用 innerHTML，它可以工作。尝试使用标准的 javascript 方法：

```
//new row
var newrow = document.createElement('tr'); // creates empty row

//1st cell
var newcell = newrow.insertCell(0); // create and insert empty cell to newrow + returns cell reference
newcell.style.width = '25%';
newcell.style.fontWeight = 'bold';
newcell.appendChild(document.createTextNode('Substancje czynna:'));

//2nd cell
var newcell = newrow.insertCell(1);
newcell.style.width = '25%';
var newselect = document.createElement('select');
newselect.setAttribute('name', 'nazwamiedzynarodowa[]');
newselect.options[0] = new Option('nazwa1', 'opt1');
newselect.options[1] = new Option('nazwa2', 'opt2');
newselect.options[0].selected = true;
newcell.appendChild(newselect);

//3rd cell
var newcell = newrow.insertCell(2);
newcell.appendChild(document.createTextNode(' Dawka: '));
newcell.appendChild(document.createElement('br'));

//4th cell
var newcell = newrow.insertCell(3);
var newselect = document.createElement('select');
newselect.setAttribute('name', 'jednostka[]');
newselect.options[0] = new Option('jed1', 'opt1');
newselect.options[1] = new Option('jed2', 'opt2');
newselect.options[0].selected = true;
newcell.appendChild(newselect);

//alert(newrow.innerHTML);
$('#table > tbody > tr').eq(2).after(newrow); 
```

# amazon-s3 - 无缘无故地从 EC2（Elastic Beanstalk Java Servlet）向 S3 发出大量请求

> ID：11210631
> 
> 赞同：2
> 
> 时间：2012-06-26T15:22:40.300
> 
> 标签：amazon-s3, amazon-ec2, amazon-elastic-beanstalk

我使用运行小型 Java servlet 的微型 EC2 实例设置了 Beanstalk 环境。Servlet 使用 S3 上的几个文件进行操作，但每天总共只有几个请求。出于某种原因，在 Account Activity 下列出了超过 40,000 个请求（放置、复制、发布、列表），我不知道它们来自哪里（除了我通过 Eclipse 插件上传 Servlet 时的一些请求）。这些请求到底是从哪里来的？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T16:21:57.903

Elastic Beanstalk 在 S3 的底层存储了一堆东西。请看[这里](http://aws.amazon.com/elasticbeanstalk/faqs/#store-in-s3)。这可能（并且可能是）你的情况。

# javascript - jQuery包含文件-分配给另一个页面的功能？

> ID：11210633
> 
> 赞同：0
> 
> 时间：2012-06-26T15:22:50.813
> 
> 标签：javascript, jquery, ajax, include

我有一个适用于多个页面的 .JS 包含文件。但是，对于一个页面，我现在采用了 jquery 方法，并使用

```
$("").on("click","#id",function(){}); 
```

关于我的一些元素。但是现在当我转到一个没有该元素的页面时，它会标记为错误。无论如何，如果它们没有出现在页面上，它只是简单地忽略这些元素？否则我将不得不为每个页面编写单独的 .JS 文件，我确信这不是正确的方法。

谢谢你的帮助。:)

（注意：我指定标签等我只是举个例子，我道歉，我删除了标签名称。让我们调用标签#mydiv。当使用上述子句时，在没有#mydiv的页面上，我得到一个控制台错误。但是，在确实有#mydiv 的页面上完全没问题！所以问题是：我怎样才能阻止该错误被捕获？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T15:28:11.137

您的错误应该与其他内容有关，因为`on`如果某些元素不存在，则不会引发任何错误。尝试

```
$("body").on("click","#id",function(){}); 
```

如果也可以使用内部容器代替`body`

```
$("#your-control-container").on("click","#id",function(){}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T15:32:00.297

我将在黑暗中进行尝试，并猜测不需要 jQuery 部分的页面在包含提到`<script>`的文件之前不会使用标记加载 jQuery。`.js`如果是这种情况，您的 jQuery 代码将抛出错误，因为未定义`$()`函数（它只是 的简写）。`jQuery()`

您应该能够通过`window.jQuery`在 JavaScript 文件中未定义的测试来解决这个问题：

```
if(window.jQuery) {
    // code that uses jQuery here
} 
```

# powershell - 如何使用 PowerShell 脚本在目录中查找最新文件？

> ID：11210649
> 
> 赞同：42
> 
> 时间：2012-06-26T15:23:46.897
> 
> 标签：powershell

例如，如果我有一个包含以下文件的目录：

```
Test-20120626-1023.txt
Test-20120626-0710.txt
Test-20120626-2202.txt
Test-20120626-1915.txt
Test-20120626-1142.txt 
```

如您所见，每个文件名都包含可排序格式的创建时间。

如何找到最新文件名的名称（在这种情况下`Test-20120626-2202.txt`）并将其存储在变量中？

*注意：如果目录路径有任何不同，它也会存储在一个变量中。*

* * *

## 回答 #1

> 赞同：84
> 
> 时间：2012-06-26T15:42:10.937

你可以尝试这样的事情：

```
$dir = "C:\test_code"
$latest = Get-ChildItem -Path $dir | Sort-Object LastAccessTime -Descending | Select-Object -First 1
$latest.name 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-06-26T15:35:06.727

如果名称是文件属性的等效创建时间`CreationTime`，您可以轻松使用：

```
$a = Dir | Sort CreationTime -Descending | Select Name -First 1 
```

然后

```
$a.name 
```

包含名称文件。

我认为如果名称始终具有相同的格式（日期和时间填充为 0，例如*20120102-0001*），它也可以这样工作：

```
$a = Dir | Sort Name -Descending | Select Name -First 1 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2015-02-11T17:41:29.347

如果您正在处理大量文件，我建议使用该`-Filter`参数，因为执行时间将大大减少。

根据 James 提供的示例，以下是它的使用方法；

```
$dir = "C:\test_code"
$filter="*.txt"
$latest = Get-ChildItem -Path $dir -Filter $filter | Sort-Object LastAccessTime -Descending | Select-Object -First 1
$latest.name 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-06-26T15:59:27.823

如果由于某种原因，文件创建日期与文件名中标记的日期不同，则您可以将文件名解析为日期时间对象并按表达式排序：

```
$file = Get-ChildItem | 
Sort-Object { [DateTime]::ParseExact($_.BaseName,'\Te\s\t\-yyyyMMdd\-HHmm',$null) } |
Select-Object -Last 1 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-02-20T15:14:02.917

我用它来获取最后更新的文件。容易写。

```
ls | sort LastWriteTime 
```

# python - PyGTK：gtk.TextView.scroll_to_mark 不更新大文件的显示

> ID：11210650
> 
> 赞同：0
> 
> 时间：2012-06-26T15:23:47.023
> 
> 标签：python, pygtk

我的应用程序有一个 gtk.TextView（实际上是 gtksourceview.View）小部件，它显示一个（大）文本文件并由 TreeView 索引。双击 TreeView 中的一个条目，会跳转到 TextView 中对应的位置，涉及到这个方法：

```
def jump_to_line(self, startline):
    itr = self.buffer.get_iter_at_line(startline)
    mark = self.buffer.create_mark(None, itr, True)
    self.scroll_to_mark(mark, 0.0, use_align=True, yalign=0.0) 
```

self是我的widget，是TreeView的子类，self.buffer显然是对应的gtk.TextBuffer。startline 这里是一个整数，表示要跳转到哪一行。问题是，当我使用“大”文件（小于 1 MB）进行测试时，这可以按预期工作，但是对于“非常大”（> 10 MB），在我单击小部件之前不会发生跳转，此时它会更新。我不知道为什么它不能自动滚动较大的文件。有什么我不知道的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T20:19:59.557

通过使用 self.scroll_to_iter 解决。

# html - 设置应出现在同一级别的嵌套 uls 填充样式的好方法

> ID：11210657
> 
> 赞同：1
> 
> 时间：2012-06-26T15:24:26.090
> 
> 标签：html, css

我有[这种结构](http://dabblet.com/gist/2996385)

```
<ul>
    <li>one</li>
    <li>
        two has children
        <ul>
            <li>a</li>
            <li>b</li>
        </ul>
    </li>
    <li>
        three has children
        <ul>
            <li>x</li>
        </ul>
    </li>
</ul> 
```

尽管从逻辑上讲，一切都是这样组织的，但我需要在一个平面列表中显示所有内容。

我可以通过从 ul,li 中删除边距和填充来做到这一点，但这确实使得它没有 li 可以有填充。

我想将**所有**列表项填充 5px，但这样做实际上会将嵌套的 li 在左侧和顶部缩进 10px。 [基本上我需要它看起来像这样](http://dabblet.com/gist/2996510)。什么是设置*不会*推过嵌套列表的填充的好方法。

我可以自由修改基本的 html 结构，但我想保留嵌套，因为它使我正在做的许多其他事情变得更容易（例如可扩展/可隐藏的子项）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T15:41:15.503

这个CSS：

```
li {
    padding-left: 5px;
    padding-top: 5px;
}

li li {
    padding-left: 0px;
} 
```

应该处理任意深度的嵌套列表。我做了一个[jsfiddle](http://jsfiddle.net/8WwQx/3/)作为例子。（该示例使用 15px 的填充以使其更明显。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T15:31:19.833

您可以做的是仅选择 topmost `<ul>`，然后`<li>`使用 CSS > 选择器仅为其子（但不是孙）元素提供间距。

例如，使用 id 指定最顶层的元素：

HTML：

```
<ul id="Head">
    <li>one</li>
    <li>
        two has children
        <ul>
            <li>a</li>
            <li>b</li>
        </ul>
    </li>
    <li>
        three has children
        <ul>
            <li>x</li>
        </ul>
    </li>
</ul> 
```

CSS：

```
#Head > li
{
    padding-left: 5px;
} 
```

这是 jsFiddle 上[的示例](http://jsfiddle.net/Mgdwr/)。

# c# - c#和google电子表格行高，合并单元格

> ID：11210659
> 
> 赞同：0
> 
> 时间：2012-06-26T15:24:40.193
> 
> 标签：c#, gdata, google-spreadsheet-api

我正在使用 gdata 2.1 版。我猜3.0版还没有出来。我的问题是：有没有办法使用 c# 和 gdata 在谷歌电子表格中设置行高或合并单元格？谢谢你们..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T16:39:47.927

.NET 客户端库版本 2.1 实现了电子表格 API 版本 3，它不支持设置行高或合并单元格。

有关 API 功能的更多详细信息，请查看文档：[https ://developers.google.com/google-apps/spreadsheets/](https://developers.google.com/google-apps/spreadsheets/)

# qt - QWebView 不显示简单的 HTML

> ID：11210667
> 
> 赞同：1
> 
> 时间：2012-06-26T15:24:54.747
> 
> 标签：qt

我的 Qt 代码非常简单：

```
#include <QtGui>
#include <QWebView>

int main(int argc, char** argv) {

  QApplication app(argc, argv);

  QWebView* view = new QWebView;
  view->setUrl(QUrl::fromLocalFile("C:\\Users\\Me\\Documents\\website.html"));
  view->show();

  return app.exec();
} 
```

但是，这只是在应用程序启动时显示一个空白页面。有任何想法吗？我正在尝试遵循简单的教程并进行了搜索。我什至尝试加载谷歌，但失败了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T16:34:59.810

我找到了解决方案，我必须设置代理设置。我的代码如下所示：

```
#include <QApplication>
#include <QNetworkProxy>
#include <QWebView>
#include <QUrl>

int main(int argc, char** argv) {

  QApplication app(argc, argv);

  QNetworkProxy proxy;
  proxy.setType(QNetworkProxy::HttpProxy);
  proxy.setHostName(QString("PROXY_IP_ADDRESS"));
  proxy.setPort(PROXY_PORT);
  QNetworkProxy::setApplicationProxy(proxy);

  QWebView view;
  view.load(QUrl("http://www.google.com"));
  view.showFullScreen();

  return app.exec();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T18:58:43.557

您需要添加以下设置：

```
view.settings()->setAttribute(QWebSettings::LocalContentCanAccessFileUrls,true); 
```

# javascript - 如何检测html5视频是否会内联播放

> ID：11210672
> 
> 赞同：5
> 
> 时间：2012-06-26T15:25:11.423
> 
> 标签：javascript, html, video, mobile

我有一个 HTML5 视频，顶部有一个启动图像。在桌面设备上，我想单击启动图像以使图像消失并播放视频。在手机上，单击图像将使视频在单独的应用程序中播放，因此当用户单击返回返回网页时，我希望启动图像仍然存在（纯视频组件，至少在我的Android手机，非常丑陋）。

如何判断视频是“内联”播放还是在新应用中启动？如果它是内联显示的，我将隐藏启动图像，如果它启动到新应用程序中，我不会。

一种方法是嗅探用户代理以查看它是否是电话。出于显而易见的原因，这不是一个好主意（新手机问世时可能会损坏，必须在 100 台设备上进行测试）。另一种可能性可能是当我们离开页面跳转到视频播放器或从视频播放器返回时捕获某种事件。但我不确定要抓住什么。我考虑过的另一种可能性是设置一个计时器来检查视频组件的某些属性......看看它是否正在播放......或者什么。

我正在使用 jQuery，以防万一。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T04:47:25.497

在 iOS 上，您的 video 元素将具有该`webkitDisplayingFullscreen`属性，因此您可以检查它并确定视频是内联的还是全屏的：

```
var videoFullscreenStatus = document.getElementById("myVideo").webkitDisplayingFullscreen; 
```

当视频全屏播放时，该属性为 true，否则为 false。因此，理论上，您可以在视频开始播放时立即检查这一点，并相应地设置您的海报图像。

我对 Android 不太熟悉，但是有一个事件 ，`webkitfullscreenchange`当它全屏显示时，你可以收听它。不知道这是否适用于移动设备，我不相信它适用于 iOS。

我知道这是一个老问题，但我希望这对某人有所帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-29T14:18:55.617

检查`oncanplay`. 对于内联播放的视频，它似乎预设为`null`.

```
var playsInline = typeof document.getElementByID('myVid')['oncanplay'] !== 'undefined'; 
```

或作为一个函数

```
function playsInLine(vidId) {
    return typeof document.getElementByID(vidId)['oncanplay'] !== 'undefined';
} 
```

**警告：**此方法可能无法在所有设备上的所有浏览器中提供正确的输出，并且由于未来的更改，它也可能会产生不需要的结果。但是在撰写本文时，这对我检查的所有地方都有效（Windows：Chrome 42、IE11、FF36、Opera 29、Safari。Android：Chrome。iPad 和 iPhone 4S：Safari）

# wpf - wpf mvvm 将贝塞尔曲线添加到画布

> ID：11210676
> 
> 赞同：0
> 
> 时间：2012-06-26T15:25:24.310
> 
> 标签：wpf, xaml, listbox, wpf-controls, wpf-positioning

我正在创建一个 BezierSpline 编辑器来制作自定义动画缓动功能。用户可以添加贝塞尔曲线部分来创建自己的缓动函数。

我有一个带有 2 个用户控件 DesignerControl 和 InfoControl 的 MainWindow，它们共享一个 DesignerVM 作为 DataContext。

DesignerControl 是使用可拖动矩形查看和编辑样条线的主视图，InfoControl 是使用按钮和列表框创建、选择、删除样条线部分以及使用文本块编辑控制点的视图。

DesignerVM 包含 SplineVM 的 ObservableCollection。

我在每个绑定到 ObservableCollection 的用户控件中有一个列表框。

我已经使用 ItemsPanelTemplate 将列表框更改为 DesignerControl 中的 Canvas，现在，我使用 DataTemplate 作为 ListBox.ItemTemplate 来更改名为 SplineControl 的用户控件中的项目。

在这个 SplineControl 中，我有一个固定大小的画布，其中包含一个定义曲线的路径，以及 4 个用于定义控制点的矩形。

```
<UserControl x:Class="Easing_Spline_Tool.SplineControl"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
         xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
         xmlns:local="clr-namespace:Easing_Spline_Tool"
         mc:Ignorable="d" 
         d:DesignHeight="300" d:DesignWidth="300"
         DataContext="SplineVM">
    <UserControl.Resources>
        <local:MathConverter x:Key="mathconverter"/>
    </UserControl.Resources>
    <Canvas Width="300" Height="300" x:Name="mycanvas" Background="Black">
        <Path x:Name="curve" Stroke="#F02828" StrokeThickness="3">
            <Path.Data>
                <PathGeometry>
                    <PathGeometry.Figures>
                        <PathFigureCollection>
                            <PathFigure>
                                <PathFigure.Segments>
                                    <PathSegmentCollection x:Name="pathsegment"/>
                                </PathFigure.Segments>
                            </PathFigure>
                        </PathFigureCollection>
                    </PathGeometry.Figures>
                </PathGeometry>
            </Path.Data>
        </Path>
        <Rectangle Fill="White" x:Name="curvePoint1" Width="8" Height="8" Canvas.Bottom="0" Canvas.Left="0"/>
        <Rectangle Fill="White" x:Name="curvePoint2" Width="8" Height="8" RadiusX="4" RadiusY="4" Canvas.Bottom="0" Canvas.Left="{Binding ElementName=mycanvas, Path=ActualWidth, Converter={StaticResource mathconverter}, ConverterParameter=(@VALUE/4)}"/>
        <Rectangle Fill="White" x:Name="curvePoint3" Width="8" Height="8" RadiusX="4" RadiusY="4" Canvas.Bottom="0" Canvas.Left="{Binding ElementName=mycanvas, Path=ActualWidth, Converter={StaticResource mathconverter}, ConverterParameter=(@VALUE/2)}"/>
        <Rectangle Fill="White" x:Name="curvepoint4" Width="4" Height="4" Canvas.Bottom="0" Canvas.Left="{Binding ElementName=mycanvas, Path=ActualWidth, Converter={StaticResource mathconverter}, ConverterParameter=(@VALUE)}"/>
    </Canvas>
</UserControl> 
```

**编辑：** 我正在使用 Rachel Lim 的 MathConverter 进行矩形中的绑定，它们工作得很好。

当我启动应用程序时，我的用户控件位于主窗口 Canvas 的左上角，而应该位于左下角。我已将 userControl 的垂直对齐和水平对齐设置为底部和左侧...

我也尝试在我的 userControl 上设置 Canvas.Bottom 和 Canvas.Left 但没有任何改变

我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T07:27:31.363

我已经设法解决了这个问题，使用 Grid 将我的 UserControl 包含在 Desiger 视图中，因此 userControl 使用 Margin 很好地定位并在 Grid 中拉伸。

我还将我的列表框更改为 ItemsControl 以定义我自己的选择规则，但这与这篇文章无关（现在可以使用 ^^）

```
<ItemsControl x:Name="curveList"
              ItemsSource="{Binding SplineVMList}" 
              Background="{x:Null}"
              >
    <ItemsControl.ItemsPanel>
        <ItemsPanelTemplate>
            <Grid x:Name="canvas" Margin="46,60,83,46"/>
        </ItemsPanelTemplate>
    </ItemsControl.ItemsPanel>
    <ItemsControl.ItemTemplate>
        <DataTemplate>
            <local:SplineControl x:Name="usercontrol" IsSelected="{Binding IsSelected, Mode=TwoWay}" Index="{Binding Index, Mode=TwoWay}">
                <local:SplineControl.Style>
                    <Style>
                        <Style.Triggers>
                            <DataTrigger Binding="{Binding IsSelected}" Value="True">
                                <Setter Property="Panel.ZIndex" Value="99"/>
                            </DataTrigger>
                            <DataTrigger Binding="{Binding IsSelected}" Value="False">
                                <Setter Property="Panel.ZIndex" Value="-99"/>
                            </DataTrigger>
                        </Style.Triggers>
                    </Style>
                </local:SplineControl.Style>
            </local:SplineControl>
        </DataTemplate>
    </ItemsControl.ItemTemplate>
</ItemsControl>
<Grid>
    <TextBlock FontSize="20" Foreground="Black" Text="Time" VerticalAlignment="Bottom" HorizontalAlignment="Right" Margin="0,0,11,35"/>
    <TextBlock FontSize="20" Foreground="Black" Text="Acceleration" VerticalAlignment="Top" HorizontalAlignment="Left" Margin="5,9"/>
    <Rectangle Fill="White" Stroke="Black"  Height="2"  VerticalAlignment="Bottom" Margin="45,0,65,45"/>
    <Rectangle Fill="White" Stroke="Black" Width="2" HorizontalAlignment="Left" Margin="45,45,0,45"/>
</Grid> 
```

有时，画布不是那么有用....

无论如何，谢谢。

# python - 需要帮助来并行化 python 中的循环

> ID：11210677
> 
> 赞同：4
> 
> 时间：2012-06-26T15:25:24.557
> 
> 标签：python, numpy, parallel-processing, multiprocessing

我有一个庞大的数据集，我必须为它的每个点计算一系列属性。我的代码真的很慢，我想让它以某种方式更快地并行化 do 循环。我希望每个处理器为我的数据的有限子样本计算“一系列属性”，然后将所有属性连接到一个数组中。我将尝试用一个例子来解释我必须做什么。

假设我的数据集是数组`x`：

```
x = linspace(0,20,10000) 
```

例如，我想要获得的“属性”是 的平方根`x`：

```
prop=[]
for i in arange(0,len(x)):
    prop.append(sqrt(x[i])) 
```

问题是如何并行化上述循环？假设我有 4 个处理器，我希望每个处理器计算 10000/4=2500 点的 sqrt。

我尝试查看一些 python 模块`multiprocessing`，`mpi4py`但从指南中我找不到这样一个简单问题的答案。

**编辑**

我会感谢大家为我提供的宝贵意见和链接。但是，我想澄清我的问题。我对这个`sqrt`功能不感兴趣。我正在一个循环中执行一系列操作。我完全知道循环是不好的，矢量运算总是比它们更可取，但在这种情况下，我真的必须做一个循环。我不会详细介绍我的问题，因为这会给这个问题增加不必要的复杂性。我想拆分我的循环，以便每个处理器执行它的一部分，这意味着我可以运行我的代码 40 次，每次循环的 1/40 和合并结果，但这将是愚蠢的。这是一个简短的例子

```
 for i in arange(0,len(x)):
         # do some complicated stuff 
```

我想要的是使用 40 cpu 来做到这一点：

```
 for npcu in arange(0,40):
       for i in arange(len(x)/40*ncpu,len(x)/40*(ncpu+1)):
          # do some complicated stuff 
```

用python可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T15:28:29.427

并行化并非易事，但您可能会发现[numexpr](https://code.google.com/p/numexpr/)很有用。

**对于数值工作**，你真的应该研究 numpy 给你的实用程序（[矢量化](http://docs.scipy.org/doc/numpy/reference/generated/numpy.vectorize.html)和类似的），这些通常会给你一个很好的加速作为工作的基础。

**对于更复杂的非数值情况**，您可以使用`multiprocessing`（见注释）。

* * *

在旁注中，python 的多线程比其他语言更重要，因为 CPython 具有[全局解释器锁 (GIL)](http://wiki.python.org/moin/GlobalInterpreterLock)，它不允许两个 python 代码部分同时在同一个解释器中运行（即有没有真正的多线程纯python代码）。然而，对于 I/O 和繁重的计算，第三方库往往会释放该锁，因此有限的多线程是可能的。

这增加了必须互斥共享数据访问和类似的通常多线程的麻烦。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T15:51:43.587

我不确定这是你应该做的事情的方式，因为我希望 numpy 有一个更有效的方法来处理它，但你的意思是这样的吗？

```
import numpy
import multiprocessing

x = numpy.linspace(0,20,10000)
p = multiprocessing.Pool(processes=4)

print p.map(numpy.sqrt, x) 
```

以下是`timeit`两种解决方案的结果。然而，正如@SvenMarcach 指出的那样，使用更昂贵的功能，多处理将开始变得更加有效。

```
% python -m timeit -s 'import numpy; x=numpy.linspace(0,20,10000)' 'prop=[]                                                                          
for i in numpy.arange(0,len(x)):
         prop.append(numpy.sqrt(x[i]))'
10 loops, best of 3: 31.3 msec per loop

% python -m timeit -s 'import numpy, multiprocessing; x=numpy.linspace(0,20,10000)
p = multiprocessing.Pool(processes=4)' 'l = p.map(numpy.sqrt, x)' 
10 loops, best of 3: 102 msec per loop 
```

应 Sven 的要求，这里的结果*比*`l = numpy.sqrt(x)`任何一种选择都快得多。

 *```
% python -m timeit -s 'import numpy; x=numpy.linspace(0,20,10000)' 'l = numpy.sqrt(x)'
10000 loops, best of 3: 70.3 usec per loop 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T16:44:14.473

我建议你看看 cython： [http ://www.cython.org/](http://www.cython.org/)

它使您能够非常快速地为 python 创建 c 扩展，并与 numpy 很好地集成。这是一个很好的教程，可以帮助您入门：[http ://docs.cython.org/src/tutorial/numpy.html](http://docs.cython.org/src/tutorial/numpy.html)*

# php - SOAP 与 PHP 连接无响应

> ID：11210679
> 
> 赞同：1
> 
> 时间：2012-06-26T15:25:30.843
> 
> 标签：php, soap

我正在尝试在客户端和服务器之间建立 SOAP 连接。

首先在客户端中，我用soap发送一个.php文件信息，这样我就可以看到请求和响应：

```
&client = new SOAPclient("http://.../service.wsdl",array('soap_version' => SOAP_1_1,'trace'=>1); 
```

在此之后我调用函数`&client->handle_request(&request)`

到目前为止一切正常。

我从 wsdl 文件调用服务器`http://..../index.php?soap=on`

```
if (soap == on)
{
    include server.inc
    &soapserver = new Juan_soap_server
    &soapserver->handle_request($request)
} 
```

在 server.inc 中，我定义了类`Juan_soap_server`和函数`handle_request`。

我的问题是程序执行了函数`handle_request`，完成了所有任务，但之后我的客户端没有任何响应。

我已经在服务器中运行了一个简单的客户端服务器测试，它工作正常，所以肥皂安装没有问题。

你有什么线索吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T00:19:46.150

根据我的经验，当我过去发生这种情况时，我返回的对象没有对 Web 服务定义 (wsdl) 文件中定义的类型或复杂类型的结构进行数学计算。

我建议您将返回类型更改为字符串，然后从服务器端返回一个简单的字符串。如果这行得通，那么您确定这与您返回的数据结构有关。

# c# - 无法调用 COM 对象的方法

> ID：11210680
> 
> 赞同：0
> 
> 时间：2012-06-26T15:25:33.607
> 
> 标签：c#, .net, com

我在 .NET 中遇到了 COM 组件的问题。每次我调用它的方法时，它都会实例化但抛出异常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T15:39:21.573

没有看到代码真的很难。我对 COM 了解不多，但您可能想检查您的 .net 程序是为 32 位还是 64 位编译，并且根据您的平台，您可能必须在应用程序的入口点上显式设置线程模型，例如在 Windows 控制台应用程序中，您将执行以下操作：

```
[STAThread]
private static void Main(string[] args) 
```

我记得曾经有过类似的问题，但无法确定这是否解决了问题。更多信息：http: [//msdn.microsoft.com/en-us/library/system.stathreadattribute.aspx](http://msdn.microsoft.com/en-us/library/system.stathreadattribute.aspx)

# javascript - 为什么 JsonResult 解析为不同的类型？

> ID：11210681
> 
> 赞同：0
> 
> 时间：2012-06-26T15:25:34.450
> 
> 标签：javascript, asp.net-mvc-3, internet-explorer

我的 MVC 3 控制器返回一个包含列表的 JsonResult，该列表解析为客户端上的 javascript 数组。我可以通过使用 IE 开发人员工具对 javascript 对象执行快速监视来看到这一点。

variableName [variableValue] 对象，（数组）

现在，我在另一台 PC 上运行这个完全相同的网站，结果只是简单地解析为一个对象，而不是一个数组。

变量名 [变量值] 对象

这些都是 IE 9，只是在两台不同的机器上。有谁知道这是为什么以及如何控制它以使 javascript 呈现始终是数组？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T18:44:45.347

我忽略了一个事实，即不工作的浏览器实际上是 IE8，而工作的浏览器是 IE9。差异解释。

# javascript - 等价于 Ruby 的 to_i(36) 在 Javascript

> ID：11210684
> 
> 赞同：1
> 
> 时间：2012-06-26T15:25:47.087
> 
> 标签：javascript, ruby, radix

```
"y851sq2vh4pf".to_i(36) #4504900070017571091 
```

但

```
parseInt("y851sq2vh4pf",36) //4504900070017571300 
```

如何在 Javascript 中实现 Ruby to_i(36) 函数？为什么行为不一样？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-26T15:30:03.360

Javascript 没有 64 位整数，它只有在(2 ^(53) )[`double`](http://en.wikipedia.org/wiki/Double_precision)之后失去整数的准确性`9007199254740992`

使用像[http://silentmatt.com/biginteger/这样的大数字库](http://silentmatt.com/biginteger/)

# talend - Talend 用户组件未在 Admin Console 中更新

> ID：11210686
> 
> 赞同：0
> 
> 时间：2012-06-26T15:25:57.867
> 
> 标签：talend

面对 Talend Admin Console 中的一些问题，从 IDE 运行的作业未在 Admin Console 中运行。资源未在 Admin Console 中更新。

以下是我现在面临的问题。

1) 我编辑了一个 Talend 用户组件，当我从 Talend IDE 运行时能够看到它的变化。但是当我通过 Admin Console 运行时，并没有反映这种变化。

2) 我为该工作创建了一个新的例程，当我从 talend IDE 运行该工作时，它的工作。但我在管理控制台中收到 ClassNotFound 错误。

讨论相同的链接：[http ://www.talendforge.org/forum/viewtopic.php?id=10103](http://www.talendforge.org/forum/viewtopic.php?id=10103)

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T17:52:50.470

Talend 管理控制台将使用称为“命令行”的东西来编译和执行您的作业。命令行是在没有 GUI 的情况下运行的 Talend 客户端。您在客户端中对组件所做的任何更改也需要在命令行中进行。通常，您只需将组件文件夹复制到命令行中的正确位置（与您的客户端相同的位置）。

# variables - 如何获取当前月份的数值并将其放入 VBScript/.vbs 中的变量中

> ID：11210687
> 
> 赞同：1
> 
> 时间：2012-06-26T15:25:58.930
> 
> 标签：variables, date, vbscript, automation

我写了一个 .vbs 脚本，用当前的日志文件向管理员发送电子邮件这是我目前所拥有的：

```
Const ForReading = 1

Set objFSO = CreateObject("Scripting.FileSystemObject")
Set objTextFile = objFSO.OpenTextFile("c:\automatic_deployment\filename.txt",    ForReading)
fileName = objTextFile.ReadLine
Wscript.Echo fileName

Dim ToAddress
Dim FromAddress
Dim MessageSubject
Dim MyTime
Dim MessageBody
Dim MessageAttachment
Dim ol, ns, newMail
Dim month
ToAddress = "myaddress@myemail.com"
MessageSubject = "Deployment was successful"
MyTime = Now
MessageBody = "Successful deployment. Log file is attached." 
MessageAttachment = "C:\M\XYZ\201206\"&fileName&"_DEV_Log.txt"
Set ol = WScript.CreateObject("Outlook.Application")
Set ns = ol.getNamespace("MAPI")
Set newMail = ol.CreateItem(olMailItem)
newMail.Subject = MessageSubject
newMail.Body = MessageBody & vbCrLf & MyTime
newMail.RecipIents.Add(ToAddress)
newMail.Attachments.Add(MessageAttachment)
newMail.Send

objTextFile.Close 
```

如果您看到，有一个名为“MessageAttachment”的变量，其中附加了日志文件。在日志文件的目标部分，有 201206，代表年和月。该文件夹包含 2012 年 6 月的日志。该月每月递增。如您所见，它是硬编码的。到目前为止它工作正常。但是，我想更进一步，让它更有活力。我想创建一个变量并获取当前月份的当前值，并将其放入源目标的那部分，如下所示：

```
month = aqDateTime.GetMonth(Date)
MessageAttachment = "C:\M\XYZ\2012"&month&"\"&fileName&"_DEV_Log.txt" 
```

这行得通吗？任何帮助，将不胜感激。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T15:33:02.110

你可以;

```
dim thisMonth: thisMonth = cstr(month(date))
if (len(thisMonth) = 1) then thisMonth = "0" & thisMonth 
```

制造

```
"C:\M\XYZ\2012" & thisMonth & "\" & fileName & "_DEV_Log.txt" 
```

平等的

```
"C:\M\XYZ\201206\XXX_DEV_Log.txt" 
```

（`year(date)`今年）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-07-09T12:48:26.220

```
<%
current_month = DatePart("m",date) 

Response.Write current_month 
%> 
```

# html - JSF 正确渲染 html 代码？

> ID：11210690
> 
> 赞同：0
> 
> 时间：2012-06-26T15:26:06.740
> 
> 标签：html, css, jsf, editor

我正在使用jsf，primefaces 3.2，我正在使用组件编辑器编写html代码并将其放入数据库，问题是当我想显示html代码时，它受到已经定义的css规则的影响，如何cas 我显示我的 html 代码而不受我的 css 逻辑的影响？或者如何重置我想要将我的 html 渲染到的 div 上的所有 css 规则？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T17:32:04.830

[您可以按照本文档](http://yaccessibilityblog.com/library/temporarily-disable-css.html)中的任何步骤禁用 CSS 。

如果您不想继承特定元素的 CSS 属性，请执行以下操作。

在 IE9 中按 F12 打开开发者工具。然后选择 DIV 元素，单击右侧面板上的样式选项卡并取消选中所有继承的属性。在谷歌浏览器中也是如此。在 Firefox 中，单击该属性以禁用它。

您还可以通过删除它们来停止包含在文档头中的内容。

仅供参考：这仅用于临时查看，如果最终页面中的元素不必继承任何属性，则您必须手动覆盖该属性。

# android - Aysnc：doPostExceute() 在 android 中甚至比 doInBackground() 更早

> ID：11210692
> 
> 赞同：0
> 
> 时间：2012-06-26T15:26:12.390
> 
> 标签：android, asynchronous

我`AsyncTask`用来做后台处理，即我从服务器获取数据并存储在`List`in`doInBackground()`方法中。我正在使用这个存储的数据`onPostExecute()`。

我面临的问题是`onPostExceute()`甚至在执行`doInBackground()`完成之前就被执行。

有人可以建议可能出了什么问题吗？

代码：

```
AsyncTask<Void, Void, Void> read= new AsyncTask<Void, Void, Void>() {

        ProgressDialog progress= new ProgressDialog(LastData.this);
        ArrayList<String> testData;
        DBAdapter db;

        @Override
        protected void onPreExecute() {
            // TODO Auto-generated method stub
            super.onPreExecute();
            progress.setTitle("Please Wait");
            testData= new ArrayList<String>();
            db= new DBAdapter(LastData.this);
            progress.setProgressStyle(ProgressDialog.STYLE_SPINNER);
            progress.setMessage("Fetching Data !!");
            progress.show();
        }

        @Override
        protected Void doInBackground(Void... params) {
            // TODO Auto-generated method stub

            ParseQuery query = new ParseQuery("Details");
            query.findInBackground(new FindCallback() {
                public void done(List<ParseObject> dataList,
                        ParseException e) {
                    if (e == null) {
                        Log.d("Details", "Retrieved " + dataList.size()
                                + " scores");
                        for (int idx = 0; idx < dataList.size(); idx++) {
                            data.add(dataList.get(idx).get("fname")
                                    .toString());
                        }
                    } else {
                        System.out.println(e.getMessage());
                    }

                    for (int idx = 0; idx < data.size(); idx++) {
                        testData.add(data.get(idx));
                    }

                    System.out.println("size inside is " + testData.size());
                }

            });

            return null;
        }

        @Override
        protected void onPostExecute(Void result) {
            // TODO Auto-generated method stub
            super.onPostExecute(result);
            progress.dismiss();

            Toast.makeText(LastData.this, "Size is "+testData.size(), Toast.LENGTH_LONG).show();
        }
    };

read.execute(); 
```

`Toast``onPostExecute()`甚至在`doInBackground`方法执行之前就显示了 meassage in 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T15:31:47.820

如果`onPostExceute`甚至在`doInBackground`完成任务之前执行，那么这意味着您可能正在`asynchronous`内部进行调用`doInBackground`。请发布代码以获得更具体的答案。

**编辑：**

问题是`findInBackground`异步运行，因此您不需要 AsynTask 来调用它。它已经可以在不阻塞您的线程的情况下运行，并且`FindCallback`会在找到某些内容时被调用。所以你需要把AsyncTask去掉，找到你调用的地方`read.execute(...)`替换掉，如下：

1）从那里 放代码 2）从`onPreExecute()`那里放代码`doInBackground()`
`onPostExecute``FindCallback()`

例子：

```
 /*...*/
        progress.setTitle("Please Wait");
        testData= new ArrayList<String>();
        db= new DBAdapter(LastData.this);
        progress.setProgressStyle(ProgressDialog.STYLE_SPINNER);
        progress.setMessage("Fetching Data !!");
        progress.show();
        ParseQuery query = new ParseQuery("Details");
        query.findInBackground(new FindCallback() {
            public void done(List<ParseObject> dataList,
                    ParseException e) {
                if (e == null) {
                    Log.d("Details", "Retrieved " + dataList.size()
                            + " scores");
                    for (int idx = 0; idx < dataList.size(); idx++) {

                        data.add(dataList.get(idx).get("fname")
                                .toString());
                    }

                } else {
                    System.out.println(e.getMessage());
                }

                for (int idx = 0; idx < data.size(); idx++) {

                    testData.add(data.get(idx));
                }
                System.out.println("size inside is " + testData.size());
                progress.dismiss();
                Toast.makeText(LastData.this, "Size is "+testData.size(), Toast.LENGTH_LONG).show();
            }

        });
        /*...*/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T15:59:25.443

好像

```
query.findInBackground(new FindCallback() { ... } 
```

是某种异步任务。我假设有一种方法

```
 query.find() 
```

这是同步的。

# python - Pika：写缓冲区超出警告

> ID：11210693
> 
> 赞同：4
> 
> 时间：2012-06-26T15:26:18.957
> 
> 标签：python, rabbitmq, pika

我们的软件程序运行良好 5 个月，现在突然我们开始收到 Pika 警告，最终导致异常。

Pika 0.9.5 UserWarning：写入缓冲区超出警告阈值。

我搜索了很多论坛，但很少满意。描述的一种解决方案是完全忽略这些警告，但我对此有点怀疑。在这件事上的任何帮助将不胜感激。这是非常紧急的。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T16:26:55.863

这个：[http](http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/2011-April/012223.html) ://lists.rabbitmq.com/pipermail/rabbitmq-discuss/2011-April/012223.html 很好地解释了这个问题。**问题是你写得比从队列中消费快得多**。警告只是告诉你这一点。

你可以调：

```
connection.set_backpressure_multiplier(NNNN) 
```

但这不会解决问题，只会隐藏警告一段时间。

根据应用程序 - 您可能需要将一些代码附加到`add_backpressure_callback`： http: [//pika.github.com/connecting.html#adapters.select_connection.SelectConnection.add_backpressure_callback](http://pika.github.com/connecting.html#adapters.select_connection.SelectConnection.add_backpressure_callback)

并在遇到背压时进行一些清理或任何需要的事情。但首先 - 检查您的代码并找出导致过载的原因。

# bit-manipulation - 这个奇怪的功能是做什么的？

> ID：11210696
> 
> 赞同：0
> 
> 时间：2012-06-26T15:26:24.163
> 
> 标签：bit-manipulation

这个函数有什么作用，因为我无法弄清楚它的目的。

```
int f( int n, int l, int r )  
{  
return (n << l) >> r;  
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T15:29:05.493

它向左移动 nl 位，然后向右移动 r 位

它有效地乘以 2^l 然后除以 2^r

或者换一种说法，它将低位（lr）位清零。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T15:46:34.790

I always approach these by doing an experiment with smaller numbers and thinking in binary. E.g. let's make them **unsigned** 8-bit values first. Let `n` be `0xFF (255)`, `l` be `3`, `r` be `2`.

So it's 2 steps (cha-cha). First step we shift left `l` bits.

```
1111 1111b << 3 == 1111 1000b == 0xF8 == 248 
```

Then we shift the result right `r` bits:

```
1111 1000b >> 2 == 0011 1110b == 0x3E == 62 
```

Now as @wildplasser noted, your values are signed, so instead of shifting in 0's, you'll be sign-extended. So let's assume 8-bit **signed** values. Let `n` be `0xFF` again, `(-1)` in decimal.

The left shift remains the same, but when you right shift, the sign bit will be extended.

```
1111 1111b << 3 == 1111 1000b == 0xF8 == -8
1111 1000b >> 2 == 1111 1110b == 0xFE == -2 
```

So I'm not sure what the *intention* of the function is, but at least I understand what it does. If this is some standard idiom for doing something, I don't know what it is.

# c# - 如何将文件从 IP 受限服务器传递到 Web 服务器？

> ID：11210698
> 
> 赞同：1
> 
> 时间：2012-06-26T15:26:31.690
> 
> 标签：c#, asp.net

我有客户使用我们的网站 (asp.net)，他们必须登录。该网站托管在服务器 1-2-3-4-5 上，流量根据负载重定向到这些服务器。

然后我有服务器 A 存储某些文件，并且该服务器受 IP 限制，只允许服务器 1-2-3-4-5。

现在，在服务器 A 上，我想存储视频文件和 pdf 文件，我想让客户端可以访问这些文件并嵌入到网站中。我不想将其存储在 db 中 - 我想将文件存储在服务器上。

由于服务器 A 只允许来自服务器 1-2-3-4-5 的 IP，而不是来自客户端的 IP，我无法直接从客户端访问这些文件。我需要以某种方式将文件嵌入网站，使用来自网络服务器的 IP 获取文件。我不能使用 i-frame，因为它使用客户端 IP。

关于如何从服务器访问和使用 IP 并将其传递给服务器 A 以获取文件的任何想法？是否可以使用 request.redirect 或 server.transfer？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T16:10:26.097

使用 NFS 或 Windows 网络文件共享以允许 Web 服务器访问文件存储。

或者让 Web 服务器向文件存储发送 WebRequest，然后将文件发送到客户端。

但是不，您不能使用 Server.Transfer 转移到不同的服务器，尽管名称。

# c# - 在 C# 程序中获取文件未找到错误？

> ID：11210702
> 
> 赞同：0
> 
> 时间：2012-06-26T15:26:57.397
> 
> 标签：c#, visual-studio-2010

我使用 WinBuilder 将 .NET 3.0/2.0 的支持包含到 Windows PE 3.0 中。我制作了一个程序来检查系统文件夹中的必要程序。我知道 diskpart 位于 windows PE 中的“X:\Windows\System32\diskpart.exe”。但是当我使用这段代码时：

```
if (File.Exists(@"X:\Windows\System32\diskpart.exe"))
{
   MessageBox.Show("Found it");
} 
```

它没有找到该文件。我尝试将一串文本写入批处理文件，如下所示：

```
System.IO.WriteAllText(@"X:\temp\diskpart.cmd", "diskpart.exe\npause");
Process proc = new Process;
proc.StartInfo.FileName = @"X:\temp\diskpart.cmd";
proc.Start(); 
```

它启动批处理文件就好了，但它指出它找不到程序diskpart.exe。奇怪的是，当我离开程序并手动输入 X:\temp\diskpart.cmd 时，它运行批处理文件就可以了，并且能够运行 diskpart.exe。我也试过把进程的用户名改成SYSTEM，还是不行。

我知道不支持在 WinPE 中对 .NET 的本机支持，但我想我至少会尝试一下。有谁知道可能是什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T15:41:36.693

如果您没有文件的读取权限，File.Exists() 将返回 false。

从[文档](http://msdn.microsoft.com/en-us/library/system.io.file.exists.aspx)：

> **如果调用者具有所需的权限并且*路径*包含现有文件的名称，则为**true ；**否则，**false**。如果*path*为 null、无效路径或长度为零的字符串，此方法也会返回**false 。**如果调用者没有足够的权限来读取指定的文件，则不会抛出异常，并且无论*path*是否存在，该方法都会返回**false**。**

 ******您几乎总是希望避免使用 File.Exists() 而只是尝试打开文件，并在失败时捕获异常。即使您不打算读取或写入您获得的文件流也是如此。这有一个很好的好处，就是让您也可以立即使用流。******

# sql - SQL XQuery 在没有的地方添加 id 属性

> ID：11210707
> 
> 赞同：1
> 
> 时间：2012-06-26T15:27:11.517
> 
> 标签：sql, xquery, identifier

我有一个 xml 集合：

```
<Cars>
    <Car id="1ECFD1AB-758D-4BA1-8D4A-387861E0B2E3">etc.</Car>
    <Car id="5C71E7A8-46C7-41F8-860E-69C95F917AD2">etc.</Car>
    <Car>etc.</Car>
    <Car>etc.</Car>
</Cars> 
```

我将其传递到存储过程中的 xml 变量中，并且需要一种方法来为没有汽车的汽车添加带有新 guid 的 id 属性。

使用 XQuery 执行此操作的最佳/最快/最有效方法是什么

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T13:31:22.663

不熟悉 SQL 的用法，但是如果您可以在它所说的位置插入一个变量`GUID-GOES-HERE`（并根据您的环境替换 doc() 语法），这可能会起作用：

```
<Cars> {
for $Car in doc('test')//Car
return <Car id='{ if ($Car/@id) then $Car/@id else "GUID-GOES-HERE"}'>{$Car/text()}</Car>
} </Cars> 
```

（在[http://basex.org/products/live-demo/](http://basex.org/products/live-demo/)上测试）

请注意，这是使用 XQuery，而不是 XQUF（我也不知道对 SQL 的支持级别）。

# gwt - GWT 在单元格渲染期间确定行值

> ID：11210708
> 
> 赞同：0
> 
> 时间：2012-06-26T15:27:11.983
> 
> 标签：gwt, datagrid, render, cell, celltable

我想根据 CellTable（或 DataGrid）中的“行”值的值来确定是否使用了图标。在构建 Cell 渲染器时如何确定？

```
IconCellDecorator<String> icd = new IconCellDecorator<String>(res.search(), new ClickableTextCell()) {
  @Override
  protected boolean isIconUsed(String value) {
    //value may not be unique across rows (column value), I really need the row instance here.
  }
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T15:35:02.483

如果您需要*row*对象，则必须使用`IconCellDecorator<RowObject>`, 并将 包装或子类化`ClickableTextCell`以`String`从`RowObject`.

或者您可以使用`CompositeCell`and`ImageResourceCell`而不是`IconCellDecorator`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T15:43:26.183

我决定重写 IconCellDecorator 以便 getImageUsed 方法传入 Context 对象，它为我提供行索引和键。尽管托马斯的回答也应该有效，但这对于我想要完成的具体目标来说似乎是最直接的。

# java - 从流中嵌入附件

> ID：11210712
> 
> 赞同：1
> 
> 时间：2012-06-26T15:27:36.113
> 
> 标签：java, lotus-notes, lotus-domino, lotus

目前，我们正在使用以下代码将文件附加到 Lotus Document：

```
final RichTextItem rtitem = document.createRichTextItem(referenceName);

final int type = EmbeddedObject.EMBED_ATTACHMENT;
final String clazz = null;
final String source = file.getFileName();
rtitem.embedObject(type, clazz, source, name);

document.save(); 
```

不幸的是`source`，该方法的参数`embedObject`必须是文件系统中文件的路径。是否可以以某种方式从流中嵌入对象？可嵌入的内容当前位于内存中，因此将其写入文件并让 Lotus API 再次读取它不是太高效（和干净）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T15:54:07.810

rtitem 类只能附加文件，不能附加流。但是，您可以使用 MIME 和 Lotus MimeEntry 类从您可以阅读的任何内容创建附件。这个 LotusScript[代码示例](http://www.openntf.org/internal/home.nsf/discussion.xsp?documentId=8C1C6EA6706D64178625723F00574260&action=openDocument)应该为您提供入门所需的一切。API 与 Java 相同。让我们知道它是如何为您工作的。

# php - 使用 PHP ip2long 函数转换时，IP 地址存储为 0

> ID：11210713
> 
> 赞同：1
> 
> 时间：2012-06-26T15:27:37.693
> 
> 标签：php, mysql, ip, ip-address

MySQL 中的 newsletter_ip 字段设置为 UNSIGNED INT (10)。我也尝试过 INET_ATON 来格式化数据，但我的结果总是[这样](http://i.imgur.com/ECac0.png)。

这是我的处理代码的一部分：

```
//Retrieve data from user and create variables

$ip_orig = $_SERVER['REMOTE_ADDR'];

$ip = ip2long($ip_orig);

//Place into database

$sql = "INSERT INTO newsletter(newsletter_email, newsletter_ip, newsletter_date, newsletter_time) VALUES('".$email."', '".$ip."', '".$date."', '".$time."')"; 
```

在 ip2long 格式化之前，我也尝试过这个片段，但无济于事：

```
if (!empty($_SERVER['HTTP_CLIENT_IP'])){
    $ip=$_SERVER['HTTP_CLIENT_IP'];
}elseif (!empty($_SERVER['HTTP_X_FORWARDED_FOR'])){
    $ip=$_SERVER['HTTP_X_FORWARDED_FOR'];
}else{
    $ip=$_SERVER['REMOTE_ADDR'];
} 
```

任何帮助将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T15:35:30.823

对于您的问题的根本原因，ip2long 给出了一个**签名**的int，如 PHP 手册所述：

笔记：

因为 PHP 的整数类型是有符号的，而且很多 IP 地址在 32 位架构上会产生负整数，所以需要使用 sprintf() 或 printf() 的 "%u" 格式化器来获取无符号 IP 地址的字符串表示.

并且您将其存储为**unsigned int**，这就是您看到只有零的原因。对于处理 IPv6 的标准且干净的解决方案，其他人已经给出了解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T15:35:28.037

使用 varchar(15) as min... varchar(45) 来支持更新的 IPv6 地址，这也是我的 IP 函数：

```
function ip()
{
    if (!empty($_SERVER['HTTP_CLIENT_IP']))
    {
        $ip = $_SERVER['HTTP_CLIENT_IP'];
    } elseif (!empty($_SERVER['HTTP_X_FORWARDED_FOR']))
    {
        $ip = $_SERVER['HTTP_X_FORWARDED_FOR'];
    }
    else
    {
        $ip = $_SERVER['REMOTE_ADDR'];
    }
    return $ip;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T15:31:54.747

由于 IP 地址中有几个点，或者它可能是[IPv6](http://en.wikipedia.org/wiki/IPv6)地址，我建议您将 newsletter_ip 字段设置为 VARCHAR

现在您的 IP 地址可能显示为 0，因为它们实际上不是整数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T15:32:02.423

您将 long 存储为字符串，而不是 long。

您最好在 MySQL 本身中进行转换：

```
$sql = "INSERT INTO newsletter(newsletter_email, newsletter_ip, newsletter_date, newsletter_time) VALUES ('".$email."', INET_ATON('".$ip."'), '".$date."', '".$time."')"; 
```

要检索 IP 地址，请执行以下操作：

```
SELECT INET_NTOA(newsletter_ip) as newsletter_ip FROM newsletter; 
```

`INET_ATON` = 地址到号码

`INET_NTOA`= 号码到地址

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-26T15:32:10.940

在存储之前打印出 ip 是否会给您正确的值？如果没有，请检查是否存在从请求中删除此信息或重命名的代理。

无论如何，长时间存储ip没有任何好处。如果您为此字段使用更直接且更易于处理的字符串，则性能不会有显着损失。当您使用它时，请为 IPv6 留出足够的空间；-)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-26T15:33:01.143

让 MySQL在服务器端使用[**INET_ATON转换 IP 怎么样？**](http://dev.mysql.com/doc/refman/5.5/en/miscellaneous-functions.html#function_inet-aton)

```
//Retrieve data from user and create variables

$ip_orig = $_SERVER['REMOTE_ADDR'];

//Place into database

$sql = "INSERT INTO newsletter(newsletter_email, newsletter_ip, newsletter_date, newsletter_time) VALUES('".$email."', INET_ATON('".$ip."'), '".$date."', '".$time."')"; 
```

# android - Android 适配器 - 使用哪一个？

> ID：11210715
> 
> 赞同：0
> 
> 时间：2012-06-26T15:27:44.183
> 
> 标签：android, listview, adapter

我仍然不清楚在不需要基本 SimpleAdapter 的情况下使用哪个适配器。有 BaseAdapters、ArrayAdapters、CustomAdapters 等。

我想用一个简单的布局制作一个 ListView，就像在 Google PlayStore 的评论部分看到的那样。一侧的 TextView 和弹出某种上下文菜单的图像。

我会为此使用哪种适配器效果最好？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T18:34:00.277

在您的情况下，使用`SimpleAdapter`. 只需提供您的自定义布局并将数据与小部件的 id 连接起来。与此类似的东西：

```
List<HashMap<String,String>> datalist = new ArrayList<HashMap<String,String>>();

HashMap<String, String> map = new HashMap<String,String>();
map.put("text", "some text");
map.put("image",Integer.toString( R.drawable.your_image_to_popup_a_menu ));
datalist.add( map );

String[] from = { "text","image" };
int[] to = { R.id.txt,R.id.img };

SimpleAdapter adapter = new SimpleAdapter( this, datalist, R.layout.your_layout, from, to); 
```

不要忘记将布局的 TextView 和 ImageView 分别标识为`"@+id/txt"`和`"@+id/img"`。

（如果您的图像始终相同，只需在布局中设置它并忘记链接`R.id.img`部分）

# couchbase - 如何增加沙发底座中集群的 RAM 内存？

> ID：11210719
> 
> 赞同：10
> 
> 时间：2012-06-26T15:28:07.630
> 
> 标签：couchbase

例如，我创建了每个节点具有 1GB RAM 内存的集群。一段时间后，我想将 claster 的 RAM 内存增加到每个节点 2GB。我认为我可以通过 Couchbase 控制台做到这一点。但是每个节点都禁用了“编辑”按钮。

那么有人可以告诉我解决方案吗？

谢谢。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-26T17:35:02.260

您可以使用随 Couchbase 一起安装的 couchbase-cli 实用程序来执行此操作。此工具应与系统上的其他 Couchbase 二进制文件一起放置（例如，C:\Program Files\Couchbase\Server\bin）。

从命令行：

`c:\>couchbase-cli cluster-init -c <CLUSTER_IP> -u <USERNAME> -p <PASSWORD> --cluster-init-ramsize=<NEW_RAM_SIZE>`

使用实际值：

`c:\>couchbase-cli cluster-init -c 127.0.0.1:8091 -u Administrator -p s3cr3t --cluster-init-ramsize=4096`

更多信息可以在[http://www.couchbase.com/docs/couchbase-manual-1.8/couchbase-admin-cmdline-couchbase-cli.html找到](http://www.couchbase.com/docs/couchbase-manual-1.8/couchbase-admin-cmdline-couchbase-cli.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-09-06T21:53:01.487

您好，在做类似的事情时找到这个页面。对我来说，该代码有效。

```
couchbase-cli setting-cluster -c <SERVER/LOCAL IP ADDRESS> -u <USERNAME> -p <PASSWORD> --cluster-ramsize=768 
```

我已经在我的本地启动并运行，所以我/你可以相应地更新它。

# ios - 如何使用 AFNetworking 库调用 .NET XML Web 服务

> ID：11210723
> 
> 赞同：3
> 
> 时间：2012-06-26T15:28:26.943
> 
> 标签：ios, afnetworking

我正在使用以下代码来调用[http://www.highoncoding.com/Customers.asmx](http://www.highoncoding.com/Customers.asmx) Web 服务。

更新 1：

现在，我有以下代码：

```
-(NSMutableArray *) getAll 
{   
    NSURL *baseURL = [NSURL URLWithString:@"http://highoncoding.com/Customers.asmx?op=GetAll"];    

    NSString *soapBody = @"<?xml version=\"1.0\" encoding=\"utf-8\"?><soap:Envelope xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" xmlns:soap=\"http://schemas.xmlsoap.org/soap/envelope/\"><soap:Body>    <GetAll xmlns=\"http://tempuri.org/\" /></soap:Body></soap:Envelope>";

    NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:baseURL];
    [request setHTTPBody:[soapBody dataUsingEncoding:NSUTF8StringEncoding]];

    [request addValue:@"http://tempuri.org/GetAll" forHTTPHeaderField:@"SOAPAction"];

    [request addValue:@"text/xml; charset=utf-8" forHTTPHeaderField:@"Content-Type"];

    AFHTTPRequestOperation *operation = [[AFHTTPRequestOperation alloc] initWithRequest:request];

    [operation start]; 
```

但它不是返回 XML，而是返回 HTML/CSS。

更新 2：

我错过了 httpMethod 行：

```
[request setHTTPMethod:@"POST"]; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-26T18:07:33.143

您需要设置`Content-Type`和`SOAPAction`作为标题。您的 SOAP XML 字符串必须是请求的发布正文。

我建议使用 SOAPClient、HTTPClient 或仅使用原始 curl 构建此请求，然后再使用 AFNetworking 进行随机刺伤。

[将此原始请求与 AFNetworking 生成的请求进行比较，以查看使用Charles](http://charlesproxy.com)等代理的差异所在。

**更新：这是一个有效的原始请求示例**

![HTTP 客户端手动发出 SOAP 请求](../Images/08e10ab3e83d7412d7d3844dffbdd732.png)

和回应：

![回复](../Images/be3832d270ba47d4bec4c5d925f71e14.png)

# c# - 如何将默认值放入 DropDownListFor？

> ID：11210727
> 
> 赞同：0
> 
> 时间：2012-06-26T15:28:32.983
> 
> 标签：c#, html, razor

这是我的下拉列表：

```
@Html.DropDownListFor(m => m.ReportType, new SelectList(ViewBag.DateRange as List<SelectListItem>, "Value", "Text"), new { @class = "w150" }) 
```

我无法弄清楚将默认值放在哪里？我的默认值是“ThisMonthToDate”

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T15:36:55.783

如果您有一个绑定到视图的模型，我强烈建议您避免使用`ViewBag`，而是将 a 添加`Property`到您的模型/视图模型中以保存选择列表项。所以你的模型/视图模型看起来像这样

```
public class Report
{
   //Other Existing properties also
   public IEnumerable<SelectListItem> ReportTypes{ get; set; }
   public string SelectedReportType { get; set; }
} 
```

然后在您的 GET Action 方法中，您可以设置 value ，如果您想将一个选择选项设置为默认选择的选项，如下所示

```
public ActionResult EditReport()
{
  var report=new Report();
  //The below code is hardcoded for demo. you mat replace with DB data.
  report.ReportTypes= new[]
  {
    new SelectListItem { Value = "1", Text = "Type1" },
    new SelectListItem { Value = "2", Text = "Type2" },
    new SelectListItem { Value = "3", Text = "Type3" }
  };      
  //Now let's set the default one's value
  objProduct.SelectedReportType= "2";  

  return View(report);    
} 
```

在您的强类型视图中，

```
@Html.DropDownListFor(x => x.SelectedReportType, 
     new SelectList(Model.ReportTypes, "Value", "Text"), "Select Type..") 
```

上述代码生成的 HTML 标记将选择带有值为 2 的选项的 HTML 选项`selected`。

# matlab - 在矩阵中重复值

> ID：11210729
> 
> 赞同：0
> 
> 时间：2012-06-26T15:28:44.343
> 
> 标签：matlab, matrix

想象一个矩阵：

```
a =

     4
     2
     8
     9 
```

我需要重复*n*次。如果`n = 3`，结果是：

```
a =

     4
     4
     4
     2
     2
     2
     8
     8
     8
     9
     9
     9 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-26T15:43:13.960

你可以试试：

```
n = 3; 
reshape(repmat(a', n, 1), numel(a)*n, 1) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-08T21:12:14.850

尝试使用 kron 函数，newMatrix = kron(a,ones(1,4))

# android - Jersey on Jetty on Android 抛出 ContainerException：ResourceConfig 实例不包含任何根资源类

> ID：11210734
> 
> 赞同：1
> 
> 时间：2012-06-26T15:28:56.850
> 
> 标签：android, servlets, jetty, jersey

我正在尝试在 Android 上的 Jetty 上运行 Jersey。

我创建了一个使用 Jersey Servlet 实例化 Jetty 服务器的 Android。无论如何，当我启动 Jetty 并访问 REST 资源（在我的情况下：）时，`[http://192.168.1.12:8080/api/hello](http://192.168.1.12:8080/api/hello)`我得到一个带有消息的 ContainerException：ResourceConfig 实例不包含任何根资源类。（请参阅下面的异常堆栈跟踪）。

知道为什么吗？

更多细节：

Logcat 给出以下严重警告。

`The following errors and warnings have been detected with resource and/or provider classes:`

`SEVERE: Missing dependency for field: private java.lang.ThreadLocal com.sun.jersey.server.impl.container.servlet.JSPTemplateProcessor.requestInvoker SEVERE: Missing dependency for field: private java.lang.ThreadLocal com.sun.jersey.server.impl.container.servlet.JSPTemplateProcessor.requestInvoker`

这很奇怪，因为 java.lang.ThreadLocal 可用于[Android](http://developer.android.com/reference/java/lang/ThreadLocal.html)并且 HttpServletRequest 和 HttpServletResponse 应该可用，因为我在 libs 文件夹中包含了 servlet-api-2.5.jar。

Jersey 依赖于一些 javax 库（jaxb-api-2.2.2.jar、jndi-1.2.1.jar、stax-api-1.0-2.jar），我必须将它们添加到项目中并设置 --core- library 参数临时忽略关于 javax 包作为依赖项的 dex 警告。

我还删除了以下类（来自 jersey core jar 包 com.sun.jersey.core.impl.provider.entity 的 RenderedImageProvider、DataSourceProvider、MimeMultipartProvider）以避免对 java.awt 和 javax.mail 的依赖。

异常跟踪：

```
javax.servlet.UnavailableException: com.sun.jersey.api.container.ContainerException: The ResourceConfig instance does not contain any root resource classes.
at org.eclipse.jetty.servlet.ServletHolder.makeUnavailable(ServletHolder.java:409)
at org.eclipse.jetty.servlet.ServletHolder.initServlet(ServletHolder.java:450)
at org.eclipse.jetty.servlet.ServletHolder.getServlet(ServletHolder.java:331)
at org.eclipse.jetty.servlet.ServletHolder.handle(ServletHolder.java:511)
at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:476)
at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:119)
at org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:517)
at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:226)
at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:935)
at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:404)
at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:184)
at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:870)
at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:117)
at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:116)
at org.eclipse.jetty.server.Server.handle(Server.java:346)
at org.eclipse.jetty.server.HttpConnection.handleRequest(HttpConnection.java:596)
at org.eclipse.jetty.server.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:1051)
at org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:592)
at org.eclipse.jetty.http.HttpParser.parseAvailable(HttpParser.java:214)
at org.eclipse.jetty.server.HttpConnection.handle(HttpConnection.java:426)
at org.eclipse.jetty.io.nio.SelectChannelEndPoint.handle(SelectChannelEndPoint.java:520)
at org.eclipse.jetty.io.nio.SelectChannelEndPoint$1.run(SelectChannelEndPoint.java:40)
at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:528)
at java.lang.Thread.run(Thread.java:1019) 
```

启动服务器 Android 活动：

```
public class StartServerActivity extends Activity {

private Server webServer;

private final static String LOG_TAG = "Jetty";

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.main);

    System.setProperty("java.net.preferIPv4Stack", "true");
    System.setProperty("java.net.preferIPv6Addresses", "false");

    webServer = new Server(8080);

    ServletHolder servletHolder = new ServletHolder(com.sun.jersey.spi.container.servlet.ServletContainer.class);
    servletHolder.setInitParameter("com.sun.jersey.config.property.packages", "com.famenu.server.resources");

    ServletContextHandler servletContextHandler = new ServletContextHandler(webServer, "/api", true, false);
    servletContextHandler.addServlet(servletHolder, "/hello");

    webServer.setHandler(servletContextHandler);

    try {
        webServer.start();
        Log.d(LOG_TAG, "started Web server");

    }
    catch (Exception e) {
        Log.d(LOG_TAG, "unexpected exception starting Web server: " + e);
    }

} 
```

}

泽西资源：

```
package com.famenu.server.resources; 
```

导入 javax.ws.rs.GET；导入 javax.ws.rs.Path；导入 javax.ws.rs.Produces；

@Path("/") 公共类 HelloResource {

```
@GET
@Produces("text/plain")
public String getMsg() {

    return "Hello Resource";

} 
```

}

我正在使用 Jetty 7.3.0.v20110203 , Jersey 1.12 , Android 1.6 在[此处解释了另一个异常之后我到达了这一点](https://stackoverflow.com/questions/11191346/jersey-on-jetty-on-android-throws-containerexception-no-webapplication-provide)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T15:46:55.797

不要在..不支持的平台上使用包/任何其他扫描。

Classnames 属性：com.sun.jersey.config.property.classnames 应该适合您（您需要显式声明所有根资源（@Pa​​th 注释）类）。

# jquery - Internet Explorer：jquery

> ID：11210735
> 
> 赞同：2
> 
> 时间：2012-06-26T15:28:59.823
> 
> 标签：jquery, internet-explorer

我有一个在 chrome 中工作的简单函数，但在 Internet Explorer (9) 中它崩溃了：

```
function go() {
    var selector = "span";
    console.log($);
    answer = $(selector); // errors on this line.
    return answer;
} 
```

哪个输出：

```
LOG: function(a,b){return new e.fn.init(a,b,h)} 
SCRIPT438: Object doesn't support this property or method 
```

所以看起来 jQuery 就在那里，如果我`$("span")`在 IE 控制台上运行它就可以工作。所以我很困惑。有没有人遇到过这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T15:30:32.300

`console.log`IE仅在调试器打开时提供功能。删除`console.log($);`它应该可以工作。

或者你可以像这样修补它：

```
if (!window.console) {
    (function() {
      var names = ["log", "debug", "info", "warn", "error", "assert", "dir", "dirxml",
      "group", "groupEnd", "time", "timeEnd", "count", "trace", "profile", "profileEnd"];
      window.console = {};
      for (var i = 0; i < names.length; ++i) {
        window.console[names[i]] = function() {};
      }
    }());
} 
```

# excel - 使用 for 循环填充列

> ID：11210736
> 
> 赞同：0
> 
> 时间：2012-06-26T15:28:59.910
> 
> 标签：excel, for-loop, vba

我正在尝试用一年中的月份填充 A2:A13。显然我可以只输入月份，但我使用从文件夹中的 12 个工作簿派生的字符串来填充它们。我这样做是因为我还将用其他数据填充其他列，因此将应用相同的方法，我认为这是一个有用的练习。

代码设置为遍历包含文件夹中的所有工作簿，我希望它使用如下 for 循环使用从每个工作簿派生的字符串填充 A2:A13。然而，目前每个单元格都只填充了 12 月。

```
 Option Explicit
 Sub CompileRandomCheckingData()
    Dim MyPath As String, strfilename As String, mnth As String
    Dim EOYR As Workbook, indv As Workbook
    Dim psdsht As Worksheet, eoyrsht As Worksheet
    Dim LRow As Long
    Dim i As Integer

    Application.DisplayAlerts = False
    Application.ScreenUpdating = False

'--> Set Containing Folder
MyPath = "C:\Documents and Settings\alistairw\Desktop\temppsdreports2011"
strfilename = Dir(MyPath & "\*.xls", vbNormal)

    '--> If folder is empty then exit
    If Len(strfilename) = 0 Then Exit Sub

    Do Until strfilename = ""

    '--> Define each workbook
    Set EOYR = ThisWorkbook
    Set eoyrsht = EOYR.Sheets("Sheet1")
    Set indv = Application.Workbooks.Open("C:\Documents and Settings\alistairw\Desktop\temppsdreports2011\" & strfilename)

    '--> Working with individual workbooks
    Set psdsht = indv.Sheets("Sheet1")
    With psdsht
        LRow = .Range("D" & Rows.Count).End(xlUp).Row
    End With

    '--> Set Month from Workbook Title
    mnth = Split(strfilename, " ")(3)

    For i = 2 To 13
        With eoyrsht
            .Cells(i, 1) = mnth
        End With
    Next

    '--> Copy No. Items
    '--> Copy Gross Value
    '--> Copy Final Error Value
    '--> Tidy Up
    indv.Close

    strfilename = Dir()
    Loop

    Application.DisplayAlerts = True
    Application.ScreenUpdating = True
 End Sub 
```

**编辑：**

我理解为什么它们都用 12 月填充，因为 For 循环在主循环中总共运行了 12 次。我自己可能正在寻求解决方案，但欢迎提出任何意见。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T15:33:58.880

那讲得通：

```
For i = 2 To 13
    With eoyrsht
        .Cells(i, 1) = mnth
    End With
Next 
```

使用相同的 填充第 2 行到第 13 行的第一列`mnth`，这是您在“直到”循环中打开的电子表格的月份。因此，可能会打开 12 月电子表格的最后一个循环将覆盖您之前所做的任何事情。

你的意思可能是这样的：

```
i = 2
Do Until ...
    ....
    With eoyrsht
        .Cells(i, 1) = mnth 'puts the month of the spreadsheet you are looking at in line i
    End With
    i = i + 1 'increments i for the next spreadsheet's month
    ....
Loop 
```

# matlab - 在 Simulink Coder 中使用模型回调

> ID：11210737
> 
> 赞同：0
> 
> 时间：2012-06-26T15:29:00.330
> 
> 标签：matlab, simulink

我正在使用 Matlab 2012a 和[Simulink Coder (aka Real-Time Workshop)](http://www.mathworks.com/products/simulink-coder/)。我想使用 Simulink Coder 编译模型，但保留模型回调的功能。

* * *

考虑以下简单示例。我有一个 Simulink 模型，`callBackTest`它读取一个常量并输出到一个 since。[使用PreLoadFcn 模型回调](http://www.mathworks.com/support/tech-notes/1900/1903.html#7)`input1`在模型工作区中定义`myValues.m`并加载到模型工作区中。PreLoadFcn 回调在模型首次打开时执行。通过使用 PreLoadFcn 回调，将在每次打开模型时自动定义。`input1`

![Simulink 模块](../Images/faf59f7dcef7aa7c0f548e2dd10dfab4.png)

![PreLoadFcn](../Images/e54d01514e705eeb3ac0eeca18c77f92.png)

假设`myValues.m`最初编码为`input1=1`。当你运行模拟时，`yout`将是一个 1 的数组。此外，如果我使用 Simulink 编码器编译模型，输出也将是一个 1 数组。但是，如果我`myValues.m`这样修改`input1 = 2`并且不重新编译，实时输出仍然是 1。这是错误的，那么如何使用已编译的模型将文件中的变量读入模型工作区？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T14:06:36.323

您不能为模型回调生成代码。如果您不想在每次更改输入时重新生成代码，您可以尝试使用“From File”块，它可以从 .mat 文件中读取数据。当您想更改数据时，您可以运行 MATLAB 代码并将输出数据保存到同一个 .mat 文件中。对此块的代码生成支持哪种数据有一些限制。查看该块的文档以获取详细信息。

如果您的数据不是太大，您还可以编辑生成的源来修改数据。来自 Constant 块的数据通常内嵌在生成的源代码中。编辑后，您可以编译生成的代码以生成新的二进制文件。

另一种方法是编写自定义 C S-Function，您可以在其中从自己的数据源中读取数据。您需要编写一个 TLC 文件来支持此 S-Function 的代码生成。

如果这些对您不起作用，您需要重新编译您的模型。[http://www.mathworks.com/help/simulink/ug/importing-signal-data-in-simulink.html](http://www.mathworks.com/help/simulink/ug/importing-signal-data-in-simulink.html)上的文档列出了将信号数据导入 Simulink 的不同方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T17:24:27.247

这不能回答您关于模型回调的问题，但无论如何它可能会有所帮助。

如果勾选了“Inline Parameters”选项：Preferences -> Optimization -> Signals and Parameters

无法更改已编译模型中的值，因为它们是硬编码的。关闭此选项并重新编译后，您可以使用外部模式连接并运行 myValues.m 脚本，这些值将被更新（除非您将它们标记为不可调整）。

# jquery - JQuery Masonry 不响应 CSS 高度变化

> ID：11210738
> 
> 赞同：0
> 
> 时间：2012-06-26T15:29:02.390
> 
> 标签：jquery, twitter-bootstrap, jquery-masonry

我同时使用 JQuery Masonry 和 Twitter 引导程序，但遇到了一些问题。我不认为问题是由两者之间的任何冲突引起的。

我正在使用 Bootstrap Thumbnails 来提供图像/文本 div，然后使用 Masonry 更好地排列它们。

我很希望将来插入到每个缩略图 div 中的新内容不会受到太多限制，因为其中一些会被动态加载，我希望 div 能够根据需要进行扩展。我希望能够灵活地切换内容可见性或在悬停时弹出内容等，这会触发 Masonry 重置其布局位置。

为了测试 Masonry 将如何响应这一点，我更改了 .thumbnail 类的 CSS，以便在悬停缩略图 div（每个都有类 '.thumbnail'）时，它会获得底部填充（这会迫使它的高度扩大）。

当 Masonry 加载时，它工作得很好，并根据它的初始大小定位所有内容。

当您悬停缩略图时，css 悬停会启动并使容器在高度上扩展，但会强制它们与下面的缩略图重叠。

为了克服这个问题，我已经链接到一个外部 .js 文件并添加了一些自定义 jquery，它既好又简单，只需将鼠标悬停在每个缩略图上时执行一个函数，告诉 Masonry 刷新/重新加载。这在将鼠标悬停在缩略图上时效果很好，css 悬停启动，div 扩展，然后 Masonry 重新定位所有 div 以最适合新的 div 大小。

我的问题：当您将鼠标移出缩略图时，Masonry 无法识别“css 悬停”恢复到其原始状态的变化，因此缩略图的高度会降低，并在其自身和下方的缩略图之间留下间隙。就像当 Div 高度降低时 Masonry 无法识别新的高度值，但在 Div 高度扩展时却能识别？

我在我的自定义外部 .js 中针对 jQuery 悬停的两种状态运行相同的函数，并希望 Masonry 会响应正常，但没有。有任何想法吗？

我用以下方式定义所有初始砌体：

```
<script type="text/javascript">
$(window).load(function(){
    $('.container-fluid').masonry({
    itemSelector: '.thumbnail',
    isAnimated: true,
    animationOptions: {
        duration: 750,
        easing: 'linear',
        queue: false
        }   
    });    
})              
</script> 
```

我的自定义 .js 文件包含：

```
$(document).ready(function(){
$('.thumbnail').hover( 
    function(){run()},
    function(){run()}                     
);
});

function run() {$('.container-fluid').masonry('reload');} 
```

任何帮助，将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T23:39:31.507

正如我所怀疑的，这似乎是一个与时间相关的或事件排序问题。

这不能保证，但我认为`handlerOut`触发器是在浏览器调整大小之前调用的*not hover now* `.thumbnail`。但这只是**胡乱猜测**。

无论如何，这是你应该使用的：

```
$('.thumbnail').hover( 
    function(){run()},
    function(){setTimeout(function(){run()}, 200)}                     
); 
```

超时允许事情在两者之间发生，该值有点随机，只要它不干扰用户体验。

似乎在这个[jsfiddle](http://jsfiddle.net/Sherbrow/Wqd6w/46/)中工作。

# javascript - 展开所有gridvie

> ID：11210744
> 
> 赞同：0
> 
> 时间：2012-06-26T15:29:14.670
> 
> 标签：javascript, gridview, expand

我在 la 页面中有一个 .ascx 控件。在该控件中，我有一个带有可扩展内容的 GridView。到现在为止还挺好。当我尝试创建全部展开/全部折叠按钮时，我的问题就开始了。由于某种原因，我必须将Javascript函数放在.aspx页面中，否则无法找到它们。

如何从控件中检索 gridview 数据？我想为每一行调用我的 expandOne 函数，但我无法访问这些行。expandOne 在一行上工作正常。

```
var gvObject = document.getElementById('GridView1'); 
```

一片空白。

```
var gvObject = $('GridView1'); 
```

给出不是网格的东西（gvObject.rows 为空）并且 gvObject.length == 0

```
var grid = document.getElementById('<%=GridView1.ClientID %>'); 
```

将崩溃（当前上下文中不存在“GridView1”）。

.

这是HTML

```
<asp:GridView ID="GridView1" runat="server" AllowPaging="false" AutoGenerateColumns="False" ShowHeader="false">
<Columns>
  <asp:TemplateField>
      <ItemTemplate>
          <a href="javascript:collapseExpand('Job-<%# Eval("Index") %>');" >
          <img id="imageJob-<%# Eval("Index") %>"  alt="Click to show/hide orders"  border="0" src="../images/plus.png" /></a>
      </ItemTemplate>
  </asp:TemplateField>
  <asp:BoundField DataField="TitleCnt" />

  <asp:TemplateField>
      <ItemTemplate>
          <tr><td colspan="100%">
              <div id="Job-<%# Eval("Index") %>" style="display:none; left:25px;" class="answer">
                <asp:Label Text="Some content" runat="server"></asp:Label>
              </div>
          </td></tr>
      </ItemTemplate>
  </asp:TemplateField>
</Columns>
</asp:GridView> 
```

和 javascript

```
function expandOne(obj) {
    var gvObject = document.getElementById(obj);
    var imageID = document.getElementById('image' + obj);
    gvObject.style.display = "inline";
    imageID.src = "../images/moins.png";
}

function ExpandAll() {
    var gvMaster = $('GridView1');
    for (i = 0; i < gvMaster.rows.length; i++) {
        expandOne('Job' + i);
    }
} 
```

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T15:52:50.107

如果您使用的是 .Net 4，则可以设置 GridView 的`ClientIDMode="Static"`. 这将在客户端上生成一个表，其中 id 属性为“GridView1”。那么这应该给你桌子：

`var gvObject = document.getElementById('GridView1');`

您的 jQuery 选择也可以使用，但您必须包含 # 字符：

`var gvObject = $('#GridView1');`

有关 ClientIDMode 的信息，请参阅[http://msdn.microsoft.com/en-us/library/system.web.ui.control.clientidmode.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.control.clientidmode.aspx)

# solr - Solr More Like This (MLT) 使用与默认 ID 不同的唯一标识符

> ID：11210746
> 
> 赞同：0
> 
> 时间：2012-06-26T15:29:19.270
> 
> 标签：solr, morelikethis

我正在尝试使用 MLT，但我有唯一标识符 doc_id 而不是 id 如果我这样做：

`http://localhost:8983/solr/mlt/?q=doc_id:question#11`我没有结果

如果我这样做 `http://localhost:8983/solr/mlt/?q=id:11`我有结果

```
<requestHandler name="/mlt" class="solr.MoreLikeThisHandler">
  <lst name="defaults">
     <str name="mlt.fl">title,text</str>
     <str name="mlt.mintf">1</str>
     <str name="mlt.mindf">2</str>
     <str name="mlt.minwl">2</str>
     <str name="mlt.boost">true</str>
     <int name="rows">5</int>
     <str name="fl">id,doc_id,title,content_type,user_id,topic_id,score</str>
  </lst>
</requestHandler> 
```

如何使用 MLT 和 doc_id 作为我的唯一标识符？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T16:03:17.457

你所拥有的看起来不错。MLT 仅使用查询来查找文档，如果找到，则将该文档用于源文档。您确定返回的是带有查询“doc_id:question#11”的文档。将值放在引号中，看看是否可以让您恢复文档，例如。doc_id：“问题#11”。doc_id 的数据类型是什么？

# c# - URI 字符串太长异常 - 向 node.js 发出请求

> ID：11210748
> 
> 赞同：0
> 
> 时间：2012-06-26T15:29:27.773
> 
> 标签：c#, .net, node.js, uri

我刚刚在从.NET 向 node.js 服务器发出 GET 请求时遇到了这个问题。最终，我试图通过查询字符串传递一个大的 JSON 对象。我一直在寻找是否有办法增加 .NET 本身中 URI 的大小。我知道节点对它可以接受的查询字符串的大小没有限制。有没有办法增加这个大小，或者我们最好把它改成 POST？

谢谢凯尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T15:38:32.713

不，您不能更改它，因为所有 Microsoft http 技术的基础都是 INTERNET_MAX_URL_LENGTH，它被定义为 2083 个字符。

您应该只对所有内容使用 POST。很可能进行转换并不是很困难。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T15:45:41.920

Use a POST. IIS maxes out ~2000 characters for a GET request and even if it didn't [each browser has a different maximum length](http://www.boutell.com/newfaq/misc/urllength.html) with IE being the most restrictive. In general keep GETs less than 2000 characters for maximum compatibility with all possible web clients otherwise switch to a POST.

# iphone - iOS：取消删除事件 UITableViewDelegate

> ID：11210753
> 
> 赞同：1
> 
> 时间：2012-06-26T15:29:48.757
> 
> 标签：iphone, ios, uitableview

我想知道当用户取消 UITableViewCell 的删除操作时调用的委托方法。现在回答“我为什么需要这个？”的潜在问题，下面是场景：

我有一个表格视图，其中项目在 UILabel 中显示（与主视图左对齐），其价格显示在单独的 UILabel 中（与主视图右对齐）。现在，一旦用户按下红色（无条目）按钮删除任何项目，整个单元格将缩进到左侧，并且由于不在视图中，价格的一半被剪裁。这看起来很丑陋，因此我在按下这个“预删除”按钮时隐藏了价格标签（效果很好）。但是我想在用户关闭删除按钮而不删除单元格时显示价格标签。但我找不到 tableview 单元格的 cancelDelete 类型的事件。

谢谢:-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T15:44:27.350

这里有一些可能会起作用的方法，它会阻止 tableview 在编辑时缩进单元格：将 UITableView 的 shouldIndentWhileEditing 属性设置为 NO。实现委托方法 tableView:editingStyleForRowAtIndexPath: 方法：

```
- (BOOL)tableView:(UITableView *)tableView shouldIndentWhileEditingRowAtIndexPath:(NSIndexPath *)indexPath {
    return NO;
} 
```

或者，您可以在创建单元格时执行此操作：

```
cell.shouldIndentWhileEditing = NO; 
```

希望这对你有用。

# c++ - 我怎样才能将双点数精确地转换为 int 数？

> ID：11210757
> 
> 赞同：0
> 
> 时间：2012-06-26T15:30:04.013
> 
> 标签：c++

我有一个通过 tcp 连接将数据发送到服务器的客户端程序。在客户端，我需要向服务器发送一个规范化的十进制数以进行规范化我将十进制乘数乘以 100,000，然后将其发送到服务器，但我在服务器中得到错误的数字。例如。

```
double price; 
```

我将它从 Gui 设置为 74.40

```
cout<<price; ---> 74.40 
```

当我序列化我的对象时，我发送

```
#define Normal 100000
int tmp = price*Normal;
oDest<<tmp; 
```

在wireshrk中，我看到客户端发送了7439999。

为什么会这样？我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T15:35:29.560

不要将任何内容存储为浮点值。请改用有理数，或使用定点值。浮点值（如`double`）基本上是“作弊”，以便将大量可能的值固定到合理的内存块中，他们必须做出妥协才能做到这一点。

如果您要存储财务价值，请考虑存储便士或美分或任何最小面额的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T15:35:05.323

这是由于浮点精度错误。您可以添加一些舍入：

```
int tmp = (price + 0.5/Normal)*Normal; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T15:35:18.113

由于浮点无法准确表示十进制数，因此您需要在将其转换为整数时对其进行四舍五入。

```
int tmp = price*Normal + 0.5; 
```

# mysql - 从 MySQL 数据库中的数字中删除点和逗号

> ID：11210759
> 
> 赞同：3
> 
> 时间：2012-06-26T15:30:08.470
> 
> 标签：mysql, sql, database, wordpress

在 Wordpress MySQL 数据库中，在 中`wp_postmeta table`，大多数行带有`meta_key='price'`和 ，`meta_value='XXX'`其中 XXX 是数字。meta_value 是一个长文本字段。存储在其中的数字具有不同的形状，有些用点存储，表示千（10.000 表示一万），另一些用逗号存储，表示百分之一（10,00 表示十）。如何删除点和逗号以获得​​纯数字，而不是百分之一？换句话说，100.000 应该是 100000 而 10,00 应该是 10 提前谢谢您的回答！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-26T15:37:56.647

尝试全局[**REPLACE**](http://dev.mysql.com/doc/refman/5.5/en/string-functions.html#function_replace)函数

```
UPDATE wp_postmeta
SET meta_value = REPLACE(REPLACE(meta_value,',00',''),'.','')
WHERE meta_key='price'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T16:37:54.857

你需要小心你如何做到这一点。我建议检查“。” 或 ',' 在字符串的末尾。这需要查看最后的第三个字符：

```
update wp_postmeta
    set meta_value = (case when left(right(meta_value, 3), 1) = '.'
                           then replace(meta_value, ',', '')
                           when left(right(meta_value, 3), 1) = ','
                           then replace(meta_value, '.', '')
                           else replace(replace(meta_value, ',', ''), '.', '')
                      end)
    where meta_key = 'price' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T15:37:52.090

尝试替换：

```
UPDATE wp_postmeta SET meta_value = REPLACE(meta_value, '.', '') WHERE meta_key='price';
UPDATE wp_postmeta SET meta_value = REPLACE(meta_value, ',', '') WHERE meta_key='price' 
```

[http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_replace](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_replace)

使用风险自负。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T15:33:56.917

您需要遍历数据库中的行，只需删除 . 并删除 , 和后面的两个字符。

不过，我不明白您为什么要向后使用符号。

此外，请注意修改数据库可能会改变 WordPress 解释数据的方式。

# asp.net - 在 asp.net UserControl 上公开嵌套的 HTML 属性

> ID：11210763
> 
> 赞同：3
> 
> 时间：2012-06-26T15:30:26.790
> 
> 标签：asp.net, user-controls

我有一个 asp.net UserControl，它将 HTML 内容从 SharePoint 列表写入 Literal 控件。目前，我在写入 Literal 的每个 SharePoint 列表项之前在 h5 标记中插入一个标题。我不想将标题硬编码以放置在 h5 标记中，而是公开我的用户控件的公共属性，让我可以定义标题的 html 格式。这与我发现的很多模板化用户控制问题有点不同，因为它并不是真正的用户控制模板。我只需要一个包含 html 的字符串。这是我想要做的：

```
public class MyUserControl: UserControl
{
    public string TitleFormat { get; set; }

    private void ShowContent()
    {
        ...
        string output = String.Format(TitleFormat, title) + someContent;
        ltlOutput.Text = output.
    }
} 
```

在标记中：

```
<UC:MyUserControl id="muc1" runat="server">
    <TitleFormat>
        <a href="www.somewhere.com"><h3>{0}</h3></a>
    </TitleFormat>
</UC:MyUserControl> 
```

我该如何设置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T16:39:38.123

这是答案（由 Decker Dong 在 asp.net 论坛中提供）：

> 要将另一个类嵌套到一个类中，您必须声明一个新属性，但只需将其声明为 InnerProperty。并设置其设计属性。现在这里有一个完整的示例：
> 
> ```
> [ParseChildren(true),PersistChildren(false)]
> public partial class MyUserControl : System.Web.UI.UserControl
> {
>     [DesignerSerializationVisibility(DesignerSerializationVisibility.Content)]
>     [PersistenceMode(PersistenceMode.InnerProperty)]
>     public string TitleFormat
>     {
>         get;
>         set;
>     }
> 
>     protected void Page_Load(object sender, EventArgs e)
>     {
> 
>     }
> } 
> ```

使用这些属性，您可以使用问题中所写的控件。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-26T17:24:27.967

你需要的是[http://msdn.microsoft.com/en-us/library/system.web.ui.itemplate.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.itemplate.aspx)

HTML

```
<test:NamingControl runat="server" ID="NamingControl" TitleFormat="This is myTitle">
    <TitleFormatTemplate>
         My title is <%# Container.TitleFormat %>
   </TitleFormatTemplate>
</test:NamingControl> 
```

用户控制

```
public partial class MyUserControl : System.Web.UI.UserControl
{
    private ITemplate template;
    protected void Page_Load(object sender, EventArgs e)
    {

    }

    public string TitleFormat
    {
        get;
        set;
    }

    [PersistenceMode(PersistenceMode.InnerProperty), 
    TemplateContainer(typeof(TitleFormatTemplate))]
    public ITemplate TitleFormatTemplate
    {
        get { return template; }
        set { template = value; }
    }

    protected override void CreateChildControls()
    {
        base.CreateChildControls();

        TitleFormatTemplate t = new TitleFormatTemplate();
        t.TitleFormat = this.TitleFormat;
        template.InstantiateIn(t);
        this.Controls.Add(t);
        this.DataBind();
    }
} 
```

子控件 - INamingContainer

```
public class TitleFormatTemplate : Control, INamingContainer
{
    private string _TitleFormat = "";
    public string TitleFormat
    {
        get { return _TitleFormat; }
        set { _TitleFormat = value; }
    }
} 
```

**更简单的方法**- 不再有 TitleFormat 标签

MyUserControl.ascx

```
<%@ Control Language="C#" AutoEventWireup="true" CodeBehind="MyUserControl.ascx.cs"      
    Inherits="testgingweb.usrcontrols.MyUserControl" %>

<a href="www.somewhere.com"><h3><asp:Label runat="server" ID="PassedValueLabel"></asp:Label</h3></a> 
```

代码隐藏 - MyUserControl.ascx.cs

```
public string TitleFormat
{
    get { return ViewState["TitleFormat"]; }
    set { ViewState["TitleFormat"] = value; }
}

protected void Page_Load(object sender, EventArgs e)
{
    PassedValueLabel.Text = String.Format("Whatever {0} here", this.TitleFormat);
} 
```

HTML

```
<test:MyUserContorl runat="server" ID="NamingControl" TitleFormat="This is myTitle">
</test:MyUserContorl> 
```

请注意，我没有`TitleFormat`标签了。

# c# - 通过静态 IP 将文件从客户端发送到服务器

> ID：11210765
> 
> 赞同：0
> 
> 时间：2012-06-26T15:30:28.490
> 
> 标签：c#, wpf, ip, file-transfer, static-ip-address

我是这件事的新手。我想通过静态 IP 将文件从几个客户端系统发送到服务器。它们通过局域网连接。这些文件是在客户端的 WPF 应用程序上创建的，应该发送到也有 WPF 应用程序的服务器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T22:55:32.807

对您来说最简单的协议将是您不必自己实现的协议。您可以使用共享网络驱动器、ftp 或 http 吗？WCF 也很容易实现，即使它有点矫枉过正。

# c# - 加载数据后重命名列并在数据表中键入

> ID：11210766
> 
> 赞同：1
> 
> 时间：2012-06-26T15:30:29.707
> 
> 标签：c#, datatable, asp.net-4.0

我正在从 csv 文件导入数据，有时有列标题，有时客户没有选择自定义列（从多个下拉列表中）

我的问题是我可以更改列的类型和名称，但是当我想将数据行导入克隆表时，它只会添加行，但这些行中没有数据。如果我将列重命名为它可以工作的旧值，假设第 0 列名称为 0，如果我将其更改为我需要的其他内容，它不会用数据填充下面的行，但如果我再次将零更改为零，它将任何主意：

这是我的编码：

```
 #region Manipulate headers

            DataTable tblCloned = new DataTable();
            tblCloned = tblDataTable.Clone();
            int i = 0;

            foreach (string item in lstRecord)
            {

                if (item != "Date")
                {
                    var m = tblDataTable.Columns[i].DataType;
                    tblCloned.Columns[i].DataType = typeof(System.String);
                    tblCloned.Columns[i].ColumnName = item;

                }
                else if(item == "Date")
                {
                    //get the proper date format
                    //FillDateFormatToColumn(tblCloned);
                    tblCloned.Columns[i].DataType = typeof(DateTime);
                    tblCloned.Columns[i].ColumnName = item;
                }

                i++;
            }

            tblCloned.AcceptChanges();

            foreach (DataRow row in tblDataTable.Rows)
            {                   
                tblCloned.ImportRow(row);
            }

            tblCloned.AcceptChanges();

            #endregion 
```

在第二个 foreach 循环中，当它调用将数据导入克隆表时，它会添加空行。

经过几次尝试，我想出了这个可行的解决方案：

```
 foreach (DataRow row in tblDataTable.Rows)
            {
                int x = 0;
                DataRow dr = tblCloned.NewRow();

                foreach (DataColumn dt in tblCloned.Columns)
                {
                    dr[x] = row[x];
                    x++;
                }                       

                tblCloned.Rows.Add(dr);
                //tblCloned.ImportRow(row);
            } 
```

但我会接受 Scottie 的回答，因为它毕竟是更少的代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T16:43:30.187

代替

```
foreach (DataRow row in tblDataTable.Rows)
{                   
  tblCloned.ImportRow(row);
} 
```

尝试

```
foreach (DataRow row in tblDataTable.Rows)
{                   
  tblCloned.LoadDataRow(row.ItemArray, true);
} 
```

# jquery - jquery for loop：对于每个悬停的链接，在悬停的链接旁边显示相关的隐藏 div

> ID：11210775
> 
> 赞同：1
> 
> 时间：2012-06-26T15:30:54.730
> 
> 标签：jquery, html, css, for-loop, offset

想要一个 jquery 中的 for 循环，以便：

“对于每个 hover_link：在悬停的 hover_link 旁边显示隐藏的 div。”

当前的 jquery 不显示隐藏的 div，更不用说将隐藏的 div 放置在悬停的链接旁边，并且无法弄清楚如何为多个 hover_links 循环。

jQuery：

```
$(document).ready(function() {
    $(".hover_link").mousemove(function(e) {
        $("#box1").show();
        $(".box").css({
            top: ($(".hover_link").offset().top() + 10) + "px",
            left: ($(".hover_link").offset().left() + 10) + "px"
        });
    });
    $(".hover_link").mouseout(function(e) {
        $("#box1").hide();
    });
});​ 
```

小提琴：http: [//jsfiddle.net/3kWq7/1/](http://jsfiddle.net/3kWq7/1/)

非常感谢任何可以提供帮助的人

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T15:38:00.997

用 mouseenter 替换 mousemove

理想情况下，您想在 (http://api.jquery.com/on/) 上使用

为了使其更具动态性，您可以将 rel 属性添加到可以包含要为该特定区域显示的框的 id 的区域。那么你只需要抓取 rel 属性并显示相应的框

更新

我在 area 标签上的 html 中添加了 rel，并使用 .on() 编写了您的鼠标处理程序。我发表了评论，希望您了解发生了什么[http://jsfiddle.net/3kWq7/3/](http://jsfiddle.net/3kWq7/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T10:55:26.367

所以！最后的问题是我让 jquery 在页面上居中的固定宽度 div 内的 div 上运行。

为了解决这个问题，我基本上检测到了 html 文档宽度，减去了 div 的固定宽度，然后将余数除以 2，给了我需要用来抵消鼠标计算的左边距，以便让隐藏的 div 弹出无论窗口大小如何，都在鼠标旁边。

该站点的标题也是固定大小的，因此我从鼠标位置减去它的高度，以使隐藏到 div 的位置正确地定位在另一个轴上。

事实证明，for 循环不是必需的 - 所以为了让它根据悬停的链接区域弹出不同的隐藏 div，我使用*rel="boxID"*属性实现了@Huangism 的建议。**（感谢@Hunagism！）**

最后的小提琴：http: [//jsfiddle.net/3kWq7/10/](http://jsfiddle.net/3kWq7/10/)

最终结果：http: [//jsfiddle.net/3kWq7/10/embedded/result/](http://jsfiddle.net/3kWq7/10/embedded/result/)

最终的jQuery：

```
$(document).ready(function(){
    $(".hover_link").mousemove(function(e){         
        $($(this).attr('rel')).show();
        var padding = parseInt(jQuery("#page").css("margin-right"));
        var margin = $(document).width() - 900;
        var marginleft = margin / 2;        
            $(".box").css({             
            top: (e.pageY - 200) + "px",             
            left: (e.pageX - marginleft + 10) + "px"        
        });    
    });     
    $(".hover_link").mouseout(function(e){         
        $($(this).attr('rel')).hide();   
    });
}); 
```

# php - 从 POST 数据在 php 中构建一个 json

> ID：11210779
> 
> 赞同：0
> 
> 时间：2012-06-26T15:31:24.043
> 
> 标签：php, json

我需要通过 url 发布数据更新对象的 json 列表。例如，使用 url：

```
http://myweb.com/index.php?name=Peter&surname=Brown 
```

在 php 中，使用 get 方法：

```
$name = $_GET["name"];
$surname = $_GET["surname"];
$json = array();

        $json["nombre"] = $name;
        $json["lat"] = $lat;
        $data[] = $json;

$json_end= json_encode($data); 
```

并且 json_end 有效地完成了我想要的：

```
[{"name":"Peter","surname":"Brown"}] 
```

我的问题是关于如何增加 json，以便构建一个数组，如：

```
[{"name":"Peter","surname":"Brown"}]
[{"name":"newname","surname":"newsurname"}]
// and so on 
```

每次用户使用带有新参数的 url。

我需要写入文件还是数据库？任何提示将不胜感激。

这个想法是让任何用户都可以使用 url 添加一些 dat。我试图将 json 存储到一个字段中，但存储仅在当前会话期间是持久的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T15:34:22.897

只需创建一个嵌套的用户数组：

```
$data = array (
    0 => array("name"=>"Peter","surname"=>"Brown"),
    1 => array("name"=>"newname","surname"=>"newsurname")
);

echo json_encode($data);

// [{"name":"Peter","surname":"Brown"},{"name":"newname","surname":"newsurname"}] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T15:39:46.877

```
<?
/* This needs to be at the top of your file, without ANYTHING above it */
session_start();

/* ... */

if(!array_key_exists('entries', $_SESSION))
{
    $_SESSION['entries'] = array();
}

$_SESSION['entries'][] = array("name" => $_GET["name"], "surname" => $_GET["surname"]);

$json_string = json_encode($_SESSION['entries']); 
```

这将产生一个 JSON。但是我不知道您是否有意，但您的输出是一系列单独的 JSON。您可以通过将上面的最后一行替换为：

```
$json_string = '';
foreach($_SESSION['entries'] as $entry){ 
    $json_string.= json_encode($entry) . "\n";
} 
```

您可能还想要一种重置/清空阵列的方法。在这种情况下，我会更改 if 测试：

```
if(!array_key_exists('entries', $_SESSION)) 
```

到：

```
if(!array_key_exists('entries', $_SESSION) || array_key_exists('reset', $_GET)) 
```

您可以通过访问使用

```
http://myweb.com/index.php?reset 
```

* * *

***编辑：***如果在某处添加以下代码：

```
foreach($_SESSION['entries'] as $id=>$entry){ 
    printf("%2d: %s\n", $id, json_encode($entry));
} 
```

您将获得由它们各自的键枚举的 json 元素的列表。例如，它可能看起来像：

```
0: "[{\"姓名\":\"彼得\",\"姓\":\"布朗\"}]"
 1: "[{\"姓名\":\"新名字\",\"姓\":\"新姓\"}]"
 2: "[{\"姓名\":\"乔治\",\"姓\":\"华盛顿\"}]"
 3: "[{\"姓名\":\"约翰\",\"姓\":\"亚当斯\"}]"

```

如果您随后添加以下代码：

```
if(array_key_exists('del', $_GET) && is_numeric($_GET['del']))
{
    $key = (int)$_GET['del'];
    if(array_key_exists($key, $_SESSION['entries']))
    {
        unset($_SESSION['entries'][$key]);
    }
    else
    {
        printf('<strong>ERROR: $_GET['del'] = %d but $_SESSION['entries'][%d] doesn't exist.</strong>', $key, $key);
    }
} 
```

您可以通过将 id 指定为`del`GET 参数来删除单个 json 条目。

例如，

```
http://myweb.com/index.php?del=2 
```

将删除对应的条目`'[{"name":"George","surname":"Washington"}]';`

其余条目将是：

```
0: "[{\"姓名\":\"彼得\",\"姓\":\"布朗\"}]"
 1: "[{\"姓名\":\"新名字\",\"姓\":\"新姓\"}]"
 3: "[{\"姓名\":\"约翰\",\"姓\":\"亚当斯\"}]"
 4: "[{\"name\":\"Thomas\",\"surname\":\"Jefferson\"}]"

```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T15:38:30.233

我认为将数据存储在会话中是最简单的，如下所示：

```
<?php
    session_start();

    if (isset($_GET['name'])) {
        $_SESSION['json'][] = $_GET;
    }

    echo json_encode($_SESSION['json']);
?> 
```

编辑：您可能希望在将 $_GET 数组存储在会话中之前对其进行过滤，这样您就不会存储不应该存储的值。

编辑：当然，如果您想为多个会话保存这些数据，则需要使用文件或数据库（或者可能是 cookie）。这一切都取决于你想用这些信息做什么。

# c#-4.0 - 尝试将 Optional 转换为 C#

> ID：11210782
> 
> 赞同：0
> 
> 时间：2012-06-26T15:31:38.270
> 
> 标签：c#-4.0, vb.net-to-c#

我正在尝试将 vb.net 代码转换为 C#，但在其中一个函数中遇到了可选的。

```
Private Function doOpenConnection(ByRef cn As OleDb.OleDbConnection, ByRef cmd As OleDb.OleDbCommand, ByVal sConnString As String, Optional ByVal sUSP As String = "") As Boolean 
```

VB.Net 似乎没有使用重载，而是可以选择将其创建为一个方法/函数。C# 是否有类似的等价物，还是我必须为每种可能性创建一个方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T15:34:08.910

C# 具有与 C# 4 相同的功能：

```
private bool doOpenConnection(ref OleDb.OleDbConnection cn,
                              ref OleDb.OleDbCommand cmd,
                              string sConnString,
                              string sUSP = "") 
```

请注意，您可能不需要*这里*`ref`的前两个参数 - 了解[参数传递在 C#](http://pobox.com/~skeet/csharp/parameters.html)中的工作原理很重要。

C# 4 有*命名参数*和*可选参数*。有关详细信息，请参阅[MSDN](http://msdn.microsoft.com/en-us/library/dd264739.aspx)。请注意，有各种限制，因为可选参数必须位于必需参数之前（除了参数数组），并且默认值必须是常量（或者您可以使用`default(...)`运算符）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T15:34:38.417

您可以在 C#中使用[可选参数。](http://msdn.microsoft.com/en-us/library/dd264739.aspx)

**来自 MSDN：**

> 每个可选参数都有一个默认值作为其定义的一部分。如果没有为该参数发送任何参数，则使用默认值。默认值必须是以下表达式类型之一：
> 
> *   一个常量表达式；
>     
>     
> *   new ValType() 形式的表达式，其中 ValType 是值类型，例如枚举或结构；
>     
>     
> *   default(ValType) 形式的表达式，其中 ValType 是值类型。
>     
>     
> 
> 可选参数定义在参数列表的末尾，在任何必需参数之后。如果调用者为连续可选参数中的任何一个提供参数，则它必须为所有前面的可选参数提供参数。不支持参数列表中以逗号分隔的空格。例如，在下面的代码中，实例方法 ExampleMethod 定义了一个必需参数和两个可选参数。

```
 public void ExampleMethod(int required, string optionalstr = "default string",
        int optionalint = 10)
    {
        Console.WriteLine("{0}: {1}, {2}, and {3}.", _name, required, optionalstr,
            optionalint);
    } 
```

# css - 为什么浮动会导致顶部保证金增加？

> ID：11210783
> 
> 赞同：2
> 
> 时间：2012-06-26T15:31:38.333
> 
> 标签：css, css-float

简单的 CSS 问题，我一直在想，我想了解它是如何工作的。

假设我有以下内容：

```
<div>
   <p>some text</p>
   <p style="float: left">some text</p>
</div> 
```

如果我`float: left`从给定`<p>`元素中删除 ，则该元素及其前一个兄弟元素堆叠得更近。

**为什么浮动元素会导致其顶部的边距增加？**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-26T15:35:45.743

差异的原因是一种称为[折叠边距](http://www.w3.org/TR/CSS21/box.html#collapsing-margins)的行为。

请注意，默认情况下，段落有一个用户代理定义的顶部和底部边距。

当第二段没有 时，第一段`float: left`的下边距和第二段的上边距*相邻*，因此相互*折叠*。

当第二段有`float: left`时，这两个边距将不再相互折叠；它们不再被认为是*相邻的*，因为：

> 两个边距相邻当且仅当：
> 
> *   两者都属于参与相同[块格式化上下文的流入块级框](http://www.w3.org/TR/CSS21/visuren.html#block-formatting)
> *   [...]

在“块格式化上下文”链接之后显示：

> 浮点数 [...] 为其内容建立新的块格式化上下文。

规范继续说：

> 请注意，上述规则意味着：
> 
> *   浮动框和任何其他框之间的边距不会塌陷（甚至在浮动框与其流入的子代之间也不会塌陷）。
> *   [...]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T15:34:30.283

我在 Chrome19 上不会发生这种情况。但由于浏览器的默认样式表会发生这种情况。如果您想防止这种情况发生，请使用 margin: 0; 填充：0；在浮动元素上。

# netbeans - Netbeans 项目文档

> ID：11210784
> 
> 赞同：1
> 
> 时间：2012-06-26T15:31:42.033
> 
> 标签：netbeans, ant, documentation, project

**懒惰不用看这个**

我必须处理一个有点乱的旧 netbeans 项目。之前的作者在一些 .properties 和 .xml 文件中进行了很大的更改，并添加了 ant 脚本。（应用是为Websphere设计的，有一些要求）

不幸的是，今天不起作用。一些重要的值存储在 private.properties 中（我不知道究竟是什么），ant 脚本不运行，并且很少有版本发布 apper。所以首先我必须整理这个烂摊子，但我不太了解 netbeans 项目。不幸的是，我很难找到所有文档。

Netbeans 项目基于 ant 项目。Fortunatley ant 在这里有手册：http: [//ant.apache.org/manual/index.html](http://ant.apache.org/manual/index.html)。但是（我假设）'nbproject' 文件夹及其内部文件不是 ant 项目的一部分。我找不到有关它的文档。也许我失明了或其他什么，但我没有在 NetBeans 方面找到它。恕我直言，netbeans 方面也有点混乱。

**开门见山**

我正在搜索 netbeans 项目的文档，其中将写关于文件*project.xml*、*project.properties*等。它们包含什么，甚至如何自己编写它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T03:34:14.543

本文档详细解释了自由形式的项目配置。你应该能够在那里找到你需要的东西。如果我处于你的位置，我会创建一个新项目，其中包含与原始项目一样的所有框架，然后查看新项目的项目元数据文件以获取一些方向。IMO 这比尝试从头开始编写 project.xml 文件要容易得多。

[http://netbeans.org/kb/articles/freeform-config.html](http://netbeans.org/kb/articles/freeform-config.html)

# json - JQGrid 无法从动作中加载 json 数据

> ID：11210787
> 
> 赞同：1
> 
> 时间：2012-06-26T15:31:44.840
> 
> 标签：json, jqgrid, struts

将数据从动作加载到 jqGrid 时出现问题

我的操作返回 JSON 数据：

```
{"page":"1","records":"31","rows":["{'id':'1','cell':['1','Cant open destop','Destop','Easy','duongls','huyld','minhnq','Finance ','Open']}","{'id':'2','cell':['2','Cant log to email','Email','Normal','thangtd','minhnq','longnh','Secretary ','Assigned']}","{'id':'3','cell':['3','No internet access Edited ver 2 longnh','Connection','Hard','thangtd','longnh','longnh','Secretary ','Closed']}","{'id':'4','cell':['4','Request password','Account','Normal','dungtq','honglm','longnh','Director','Cancelled']}","{'id':'5','cell':['5','Cant open latop','Laptop','Hard','duongls','huyld','minhnq','Director','Closed']}","{'id':'6','cell':['6','issue 11111111111111','','','dungtq','longnh','','Planning','Open']}","{'id':'7','cell':['7','Issue ku minh heo','','','dungtq','longnh','','Planning','Open']}","{'id':'8','cell':['8','New ticket 12345','','','dungtq','longnh','','Planning','Open']}","{'id':'9','cell':['9','Mail server cannot connect','','','haitct','longnh','','Director','Open']}","{'id':'10','cell':['10','aaaaaaaaaaaa','','','dungtq','longnh','','Planning','Open']}"],"total":"4"} 
```

在 JSP 中我调用 jqgrid：

```
$("#list1").jqGrid({                  
        url: "<%=request.getContextPath()%>/pagingIssue?time='+new Date().getTime()",
        colNames:['Id','Name', 'Type','Severity', 'Owner','Register', 'Responsor', 'Department','Status'],
        colModel:[
               {name:'issId',index:'issId', width:40,sortable:true},
               {name:'issName',index:'issName', width:200,sortable:true},
               {name:'issType',index:'issType', width:100,sortable:true},
               {name:'issSeverity',index:'issSeverity', width:100,sortable:true},
               {name:'issOwner',index:'issOwner', width:80,sortable:true},
               {name:'issRegister',index:'issRegister', width:100,sortable:true},
               {name:'issResponsor',index:'issResponsor', width:100,sortable:true},
               {name:'department',index:'department', width:120,sortable:true},
               {name:'issStatus',index:'issStatus', width:80,sortable:true}],
       rowNum:10,
       rowList:[10,15,20],
       pager: '#pager1',
       sortname: 'issId',
       datatype: 'json',
       recordpos: 'left',
       viewrecords: true,
       sortorder: 'desc',
       multiselect: true,
       caption: 'Issue List' });
}); 
```

网格只显示加载中...你能帮帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T18:13:06.043

默认情况下，您的 JSON 数据应采用 JSON 数据的 jqGrid 文档中注明的[格式](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3aretrieving_data#json_data)：

```
{ 
  "total": "xxx", 
  "page": "yyy", 
  "records": "zzz",
  "rows" : [
    {"id" :"1", "cell" :["cell11", "cell12", "cell13"]},
    {"id" :"2", "cell":["cell21", "cell22", "cell23"]},
      ...
  ]
} 
```

您的数据很接近，但`rows`包含一个字符串

```
"rows":["{'id' ... ]}"] 
```

而不是一个对象：

```
"rows":[{'id' ... ]}] 
```

* * *

此外，您应该始终对字符串使用双引号，而不是单引号（有关更多详细信息，请参阅[json.org](http://json.org/)上的状态机图）。所以你的 JSON 应该是这样的：

```
"rows":[{"id" ... ]}] 
```

# vba - 如何在 Excel 宏中将只读文件另存为不同的文件扩展名？

> ID：11210790
> 
> 赞同：0
> 
> 时间：2012-06-26T15:31:48.160
> 
> 标签：vba, excel-2007, excel-2010, file-extension

我有一个宏设置来自动打开/保存我从网上打开的文件。Web 格式是#csv.gz 格式。我的代码目前只是将文件保存在默认位置（我已更改为 c:\files）。我想编写一个宏来保留文件的文件名，但将扩展名更改为 file.xlsm。有没有办法用 VBA/excel 做到这一点？我需要更改扩展名的原因是它目前不适用于我的公式。我刚刚将文件保存为#csv.txt 的默认保存代码。

这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T15:45:59.637

将此代码集成到您自己的代码中：

```
Sub SaveIt()

Dim wkb As Workbook

Set wkb = ActiveWorkbook 'change to your workbook reference

wkb.SaveAs Replace(wkb.Name, ".txt", ""), 52 'change ".txt" to ".csv" if need be

End Sub 
```

有关 52 的更多信息，请参阅[Excel 文件类型枚举](http://msdn.microsoft.com/en-us/library/bb241279%28v=office.12%29.aspx)。

# ruby-on-rails - 如何远程创建记录，使用 rails json、ruby 和绕过登录

> ID：11210792
> 
> 赞同：1
> 
> 时间：2012-06-26T15:31:50.753
> 
> 标签：ruby-on-rails, ruby, json, httparty

我花了一些时间试图了解如何绕过我的登录来创建远程重复到 json 的记录，而不会失去登录提供的安全性。我设法用 HTTParty 做到了这一点，但我想 rest-client 也会这样做。

我现在分享我的解决方案，但我仍然认为可能有更好、更安全的方法来做到这一点，并想听听您对此的看法。

所以，第一件事。这是我的控制器：

things_controller.rb

```
...
before_filter :signed_in_user, only: [:show, :destroy]
before_filter :signed_in_user, only: [:create], unless: :is_it_json?
...
def create
    if is_it_json?
      user = User.find_by_email(params[:session][:email].downcase)
      if !(user && user.authenticate(params[:session][:password]))
        format.json { render json: @user.errors, status: :unprocessable_entity }
      else 
        @thing = user.things.build(params[:thing])
      end
    else
      @thing = current_user.things.build(params[:thing])
    end  
    respond_to do |format|
      if @thing.save
        format.html { redirect_to root_path, :flash => { :success =>  'thing was successfully created.'} }
        format.json { render json: @thing, status: :created, location: @thing}
      else
        @feed_items = []
        format.html { render action: "static_pages/home" }
        format.json { render json: @thing.errors, status: :unprocessable_entity }
      end
    end
end 
```

application_controller.rb

```
...
def is_it_json?
  request.format.json?
end
... 
```

我的红宝石脚本：wsConsumption_httparty.rb

```
require 'HTTParty'
def ask(prompt)
    print prompt, ' '
    $stdout.flush
    s = gets.chomp 
end

class thingCreate
    include HTTParty
    base_uri 'localhost:3000'
    format :json
    headers "Accept" => "application/json"

  def initialize
  end

  def post(description, weight,typeid,email,password)
    options = { body: 
                {thing:
                    {description:description, 
                     weight:weight, 
                     type_id:typeid 
                     },
                session:
                    {email:email,
                    password:password
                    }
                }
            }
    self.class.post('/things', options)
  end
end

username = ask("What is the user email?")
password = ask("What's the password?")
description = ask("thing description: ")
weight = ask("Weight: ")
typeid = ask("Type Id: ")

thing = thingCreate.new()
print thing.post(description, weight,typeid,username,password) 
```

这非常适合创建...我想听听您的意见：

*   这种创建事物的机制如何更安全（使用https就足够了？
*   我应该对服务应用某种故障保护机制吗？有什么建议么？
*   如果插入了错误的用户/密码，我想返回一条短信，只说“无效的用户名/密码”......关于我如何实现这一点的任何想法？
*   您可能有任何其他建议。

干杯

# css - 如何创建流畅的多列布局？

> ID：11210796
> 
> 赞同：0
> 
> 时间：2012-06-26T15:32:09.583
> 
> 标签：css, css-float

我想创建一个简单的流体布局，其中 4 列等宽，一旦视口低于特定宽度，下降到 3 列等宽，然后在进一步指定的视口宽度下下降到 2 列等宽。当一列脱落时，它应该下降到下一行，从而显示在原始列的下方。

关于如何实现这一点的任何指针或带有彩色 div 的简单小提琴将是最有帮助的！

谢谢德文

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T16:36:06.783

一个一般的例子：[http ://dabblet.com/gist/2996934](http://dabblet.com/gist/2996934)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T15:42:51.950

您可以使用 CSS 设置列 (div) 宽度，但是当窗口具有一定宽度时，您将需要 javascript 来完成切换到 3 或 2 列的部分。单独的 CSS 并没有内置这种逻辑。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T12:05:09.293

感谢您提供的所有有用的指示。这是一个简单的小提琴说明如何实现它：jsfiddle.net/Paulie_D/QFhh9

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T16:44:05.263

看看这个[圣经样本](http://matthewjamestaylor.com/blog/ultimate-3-column-holy-grail-pixels.htm)

如果您愿意并且有能力，请查看新标准如何在 css 列数方面取得进展：http: [//1plusdesign.com/articles/the-future-of-newspaper-column-style-layout-with-css-3/](http://1plusdesign.com/articles/the-future-of-newspaper-column-style-layout-with-css-3/)

# php - 阻止表单在页面加载时提交

> ID：11210799
> 
> 赞同：0
> 
> 时间：2012-06-26T15:32:14.530
> 
> 标签：php, mysql

如何阻止表单在页面加载或刷新时提交？我现在不担心参数化。提前致谢！

```
$firstname = $_POST['firstname']
$lastname = $_POST['lastname']

$sql = ("INSERT INTO table (firstname, lastname) VALUES ('$_POST[firstname]' , ' $_POST[lastname]')");

mysql_query($sql) or die ("Error is: ".mysql_error());

<form name="add-name" id="add-name" method="post" action="/add-name.php">
<button type="submit">Save</button>

<fieldset>
<label>First Name *</label> 
    <input name="firstname" type="text" id="firstname" />
</fieldset>
<fieldset>
<label>Last Name *</label> 
    <input name="lastname" type="text" id="lastname" />
</fieldset>
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T15:33:29.223

```
if (isset($_POST['firstname'])) {
   $firstname = $_POST['firstname']
   $lastname = $_POST['lastname']

   $sql = ("INSERT INTO table (firstname, lastname) VALUES ('$_POST[firstname]' , '       $_POST[lastname]')");

   mysql_query($sql) or die ("Error is: ".mysql_error());
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T15:37:25.943

如果你只是想阻止查询被执行，那么 bob 的代码就可以工作。

如果您还试图停止“您想重新提交表单”对话框，那么您还需要在执行查询后使用标题重定向回页面。

header("位置：/add-name.php"); // 假设 add-name.php 是你的文件名

# php - 当有1个或多个孩子时解析xml强制数组结构

> ID：11210802
> 
> 赞同：0
> 
> 时间：2012-06-26T15:32:20.270
> 
> 标签：php, xml

我正在尝试解析一些具有以下结构的 XML（显示 2 种形式，均有效）：

```
<xml-structure>
    <parent-group>
        <child>
            <element1>Some Data</element1>
            <element2>Some Data</element2>
        </child>
    </parent-group>
</xml-structure>

<xml-structure>
    <parent-group>
        <child>
            <element1>Some Data</element1>
            <element2>Some Data</element2>
        </child>
        <child>
            <element1>Some Data</element1>
            <element2>Some Data</element2>
        </child>
    </parent-group>
</xml-structure> 
```

以下用于将整个结构放入关联数组并查看数据：

```
$arr = json_decode(json_encode((array) simplexml_load_string($xml)),1);
$children = $arr['parent-group']['child']; 
```

我想遍历孩子来查看数据 - 但是，只有在有多个孩子的情况下，以下内容才有效：

```
foreach($children as $child) {
    echo $child['element1'];
} 
```

如果只有一个孩子，那么这不起作用，因为以下情况为真：

```
$children === {'element1' => 'Some Data', 'element2' => 'Some Data'} 
```

在事先不知道是否有多个孩子的情况下，我如何确保它`$children`始终是一个数组（可能大小为 1）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T15:59:13.833

我最终做了以下事情 - 如果有人有更好的解决方案，我会很感兴趣：

```
$children = $arr['parent-group']['child'];
if (!empty($children['element1'])) {
    $children = array($children);
} 
```

完成此操作后，`$children`将始终是一组子项，允许以下行正确执行。

# c# - 如何使用实体框架保存多选列表框中的选择

> ID：11210805
> 
> 赞同：1
> 
> 时间：2012-06-26T15:32:28.423
> 
> 标签：c#, entity-framework

我是 Entify Framework 的新手，所以这可能是一个非常基本的问题。在 WinForms 应用程序中，我有一个工作正常的数据输入页面，直到我添加一个列表框并尝试使用已做出的选择来更新数据库。

在表单上，​​用户选择要上传的文件并指定一个或多个可以访问该文件的部门。这是我认为它会起作用的方式：

```
using (var ctx = new FCEntities())
{
  var batch = new Batch() { Description = txtDescription.Text, Filename = filename, Departments = (System.Data.Objects.DataClasses.EntityCollection<Department>)lstDepartments.SelectedItems };
  ctx.AddToBatches(batch);
  ctx.SaveChanges();
} 
```

但是当这不起作用时，我做了一些研究并了解到我无法将 SelectedItems 转换为 EntityCollection，因此我决定将原始集合中的项目复制到新集合中，然后按如下方式使用新集合：

```
using (var ctx = new FCEntities())
{
  var departments = new System.Data.Objects.DataClasses.EntityCollection<Department>();

  foreach (var department in lstDepartments.SelectedItems)
  {
    departments.Add((Department)department);
  }

  var batch = new Batch() {Description = txtDescription.Text, Filename = filename, Departments=departments };
  ctx.AddToBatches(batch);
      ctx.SaveChanges(); 
```

}

这也不起作用，并在**部门**上给出了这个错误。添加行：

> “无法将附加到 ObjectContext 的对象添加到不与源对象关联的 EntityCollection 或 EntityReference 中。”

我不明白，因为在我看来，部门对象没有附加到 ObjectContext？我显然缺少一些基本的东西，所以任何建议和/或其他人如何做到这一点的例子的链接都将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T12:47:23.610

我想留下一个答案，以防有一天其他人遇到这个问题。Wiktor 留下的评论帮助我找到了正确的方向。我认为我缺乏基本的理解，所以我在 MSDN 上做了一些阅读，并能够解决我的问题。

The datamodel behind this existed of three tables: Batches, Departments, and Batches_Departments which allowed for a many to many relationship between Batches and Departments.

The problem with my original code/logic, in a nutshell, was that the Department objects in the ListBox were associated with a different context than the one I was using in my Save method. EF didn't like this for obvious reasons (at least now they are obvious), so in the save method I used the ID from the selected Departments to get a reference to the same Department in the current context. I could then add this Department to the newly created batch.

Here's what the code now looks like:

```
using (var ctx = new FCEntities())
{
  var batch = new Batch() { Description = txtDescription.Text, Filename = filename};

  foreach (var department in lstDepartments.CheckedItems)
  {
    var dept = (from d in ctx.Departments where d.DepartmentID == ((Department)department).DepartmentID select d).First();
    batch.Departments.Add(dept);
  }

  ctx.Batches.AddObject(batch);
  ctx.SaveChanges();
} 
```

Hopefully this helps someone else who is dealing with the same issue.

# node.js - 使用 Passport.js 将 facebook 数据链接到当前登录的用户

> ID：11210817
> 
> 赞同：8
> 
> 时间：2012-06-26T15:33:19.120
> 
> 标签：node.js, express, oauth, passport.js

我正在使用passport.js，如果我可以将facebook id链接到登录用户的帐户，我会受伤。像这样的东西：

```
passport.use( new FacebookStrategy({
        consumerKey: ---
        consumerSecret: ---
        callbackURL: "http://mycallback"
    },
    function(token, tokenSecret, profile, done) {
        if (user is logged in)
            user = User.addfacebookId(user, profile.id)
            done(user);
        }
    }   
)); 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-26T18:28:04.990

有几种方法可以解决这个问题，但我认为最直接的方法之一是使用该`passReqToCallback`选项。启用后，`req`将成为验证回调的第一个参数，从那里您可以检查是否`req.user`存在，这意味着用户已经登录。此时，您可以将用户与 Facebook 个人资料详细信息相关联并提供相同的信息完成回调的用户实例。如果`req.user`不存在，则照常处理。

例如：

```
passport.use(new FacebookStrategy({
    clientID: ---
    clientSecret: ---
    callbackURL: "http://mycallback"
    passReqToCallback: true
  },
  function(req, accessToken, refreshToken, profile, done) {
    if (req.user)
      // user is already logged in.  link facebook profile to the user
      done(req.user);
    } else {
      // not logged in.  find or create the user based on facebook profile
    }
  }   
)); 
```

# c++ - boost python - 如何将原始指针发送到 python 函数>

> ID：11210820
> 
> 赞同：0
> 
> 时间：2012-06-26T15:33:33.417
> 
> 标签：c++, python, pointers, boost-python

我在我的应用程序中嵌入了 python，我想向 python 函数发送一个原始指针，指向我在 C++ 代码中拥有的对象。
我发现如何做到这一点的唯一方法是用 an`auto_ptr`或 a包装指针，`shared_ptr`但我不想这样做，因为我不希望 python 代码有任何机会在我的代码中持有对对象的引用。

boost::python 有可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-15T17:21:57.983

如果您有指向映射到 Python 的某个 C++ 对象的原始指针，那么您可以使用适配器以这种方式围绕原始指针创建另一个 Python 对象：

```
template<typename PtrT>
struct PtrAdapter {
    auto& get(PtrT ptr)  { return *ptr; }
}; 
```

然后使其成为 Python 映射类型并允许隐式转换：

```
class_<Cluster<LinksT>*, noncopyable>(typpedName<LinksT>("ClusterPtr", true, true)
, "Raw hierarchy cluster pointer\n")
    .def("__call__", &PtrAdapter<Cluster<LinksT>*>::get,
        return_internal_reference<>(),
        "referenced cluster")
    ;
register_ptr_to_python<Cluster<LinksT>*>(); 
```

请注意，引用类型（在这种情况下`Cluster<LinksT>`）也必须映射到适当的 Python 对象。
然后对于这样的 C++ 代码：

```
Cluster<LinksT>* cl = clusters.head();
process(cl);
Id cid = cl->id(); 
```

您可以使用类似的 Python 代码：

```
cl = clusters.head()
process(cl)
cid = cl.id() 
```

但是，如果您不需要对指向 C++ 对象的指针进行一些**特殊处理**`boost::python::ptr`，那么使用.
您还应该考虑这里提到的替代方案：[boost::python: howto call a function that expects a pointer?](https://stackoverflow.com/questions/3881457/boostpython-howto-call-a-function-that-expects-a-pointer)

# android - 安卓游戏中的跳转方法

> ID：11210822
> 
> 赞同：0
> 
> 时间：2012-06-26T15:33:43.087
> 
> 标签：android, game-physics

我是 Android 游戏开发的新手，我开始了一个简单的游戏，其中 Droid 可以跳过传入的框。我想在表面视图中使用 onTouchEvent 调用我的 droid.jump() 方法（只需在屏幕上轻按一下）

我创建了一个名为 Droid 的类：

```
public class Droid {

// Log Tag for Debugging
public static final String LOG_TAG = "_1Projekt";

private Bitmap bitmap; // the actual bitmap
private int x; // the X coordinate
private int y; // the Y coordinate
private boolean touched; // if droid is touched/picked up
private Speed speed; // the speed with its directions

private long mLastTime;

public Droid(Bitmap bitmap, int x, int y) {
    this.bitmap = bitmap;
    this.x = x;
    this.y = y;
    this.speed = new Speed();
} 
```

………………

而 jump() 方法是我的问题。我想有一个平稳的跳跃，但我不知道如何用当前的系统时间来计算。我的想法是，机器人应该每隔 -TimePeriod- 更新它的 Y 位置，并且应该以较快的速度开始，然后将其降低到 0 以获得平滑的跳跃。但我不知道如何在我的 while 循环中计算这个。我当前的跳转（）：

```
public void jump() {
    Log.d(LOG_TAG, "Jumping");
    long now = System.currentTimeMillis();
    int elapsedTime = 100;
    int jump = y-30;

    while(y > jump)
    {
        if(System.currentTimeMillis() > now + elapsedTime)
        {
        now = now + elapsedTime;
        elapsedTime -=3;
        y = y-1;
        }
    }
} 
```

据了解，我只实现了 Jump 的“向上”部分。谢谢您的回答！问候 DroidDude

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T16:40:49.620

您可能想看[这里](http://www.dreamincode.net/forums/topic/23967-simple-java-screen-saver/)（第三篇文章）：

> 在主循环之前，有
> 
> ```
> //Get the current time
> timeStep = System.currentTimeMillis(); 
> ```
> 
> 然后做你的事情。然后在循环返回开始之前，有
> 
> ```
> // Hold to lock at FPS
> while(System.currentTimeMillis()-timeStep < 1000/60); 
> ```
> 
> 其中 60 是每秒运行的帧数。
> 
> 此方法还允许您获取 while 循环之后的时间差，以便找出渲染一帧所需的时间。使用它，您可以拥有一个变量，您可以将所有增量乘以以获得与帧无关的速度。
> 
> 例如，如果将处理帧所需的毫秒数除以 16.666，则当程序以大约 60 FPS 运行时，该数字将等于 1。当帧速率较低时，渲染帧需要更多毫秒，并且该因素变得更大。
> 
> 但是，请务必在重新粉刷之前放置它。这也是视频游戏的计时方式。我在 JAVA 下的视频游戏基础小程序代码片段中显示了一个示例。

# tfsbuild - 在签入某些类型的文件时跳过构建

> ID：11210830
> 
> 赞同：1
> 
> 时间：2012-06-26T15:33:59.033
> 
> 标签：tfsbuild

签入某些类型的文件时，是否有任何方法可以跳过自动启动的构建？我们有一个持续集成构建定义，每次我们签入文件时都会启动。到目前为止，我们还没有进行数据库构建，而是纯粹使用 TFS 作为 SQL 文件的源代码控制。当我们签入这些 SQL 文件时，我不希望开始构建。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T21:20:22.260

如果您在构建过程中没有对数据库执行任何操作，则可以在构建定义工作区中“隐藏”包含数据库源的文件夹。将从构建中隐藏签入并停止检查开始构建

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T16:01:13.440

将以下行放在签入注释中：

***NO_CI***

你会没事的。

# eclipse - Windows 8 与开发工具的兼容性。

> ID：11210831
> 
> 赞同：1
> 
> 时间：2012-06-26T15:34:01.720
> 
> 标签：eclipse, windows, visual-studio-2010, windows-8

我的老板刚刚问我关于 Windows 8 的问题。他想给我买一台新笔记本电脑。并且仍然对操作系统感到困惑。

VS2010可以安装在windows 8上吗？因为VS2012可以在windows 7下安装。像eclipse java android怎么样？它们可以在 Windows 8 中运行吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T13:26:27.940

在 windows 8 中更推荐使用 Visual Studio 2012，以便安装某些 sdk，如 windows phone 8 sdk .. 所以它应该在 windows 8 eclipse 和 java 中工作得更加流畅......大多数适用于 win 的应用程序7将与win 8一起使用没有问题我没有发现任何问题现在只告诉一些未正确安装的驱动器并且Windows为我搜索驱动器并从设备管理器安装它..我唯一的问题无法解决它现在告诉 2 手指滚动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T15:38:26.440

根据微软网站，VS 2012 与 Windows 8 兼容：

[http://www.microsoft.com/visualstudio/11/en-us/products/compatibility](http://www.microsoft.com/visualstudio/11/en-us/products/compatibility)

我读到[了一些关于 Eclipse 的回报](http://www.eclipse.org/forums/index.php/m/819251/)，现在不可能（或基本上不可能）在 Windows 8 上运行它，但我想很快就会发布 Windows 8...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T08:43:46.120

我刚刚安装了 Windows 8、Visual Studio 2012、Eclipse、Java，一切正常

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-25T17:40:07.443

您可以在 Windows 8 中使用 VS 2012 或 VS 2010。V​​S 2012 仅在 Windows8 中兼容。

触摸屏不是使用 Windows 8 的必需品，但建议使用它以获得最佳用户体验。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-23T16:28:15.510

Windows 8 只是 MICROSOFT 的另一个操作系统，他们改变了操作系统的体系结构。所有在 Windows 上与以前版本兼容的软件都可以在 Windows 8 中正常运行。Windows 8 中的应用程序是新事物。

无论您购买带或不带 Windows 8 的笔记本电脑都没有关系。它是一种操作系统，您可以在任何机器上安装它，只要它具有 Windows 8 的基本要求。

# php - 如何使用 PHP 提供现有 Excel 的下载？

> ID：11210832
> 
> 赞同：0
> 
> 时间：2012-06-26T15:34:05.757
> 
> 标签：php

我的服务器上有一个生成的 xls 文件，我想将其推送到客户端进行下载，但似乎无法正常工作。这是我到目前为止所拥有的：

```
$xlsFile = 'test.xls';

header("Content-Type: application/force-download");
header("Content-Type: application/octet-stream");
header("Content-Type: application/download");;
header("Content-Disposition: attachment;filename=$xlsFile"); 
header("Content-Transfer-Encoding: binary ");  
exit(); 
```

我的excel文件是正确的，如果我从服务器打开它就可以打开，但是我怎样才能把这个文件推送到客户端下载呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T15:37:30.703

您的“内容类型”标题似乎做得过火了。哦，您需要在`exit()`ing 之前实际发送文件。所有你需要的是

```
header("Content-Type: application/vnd.ms-excel");
header('Content-Disposition: attachment; filename="' . $xlsFile . '"');
readfile($xlsFile);
exit(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T15:37:07.280

请参阅有关正确 MIME 类型的较早帖子，以与您的上传一起发送：

[为 Excel 文档设置 MIME 类型](https://stackoverflow.com/questions/974079/setting-mime-type-for-excel-document)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T15:38:22.047

您只需要再添加一行

```
$xlsFile = 'test.xls';

header("Content-Type: application/vnd.ms-excelapplication/vnd.ms-excel");
header("Content-Disposition: attachment;filename='$xlsFile'"); 
header("Content-Transfer-Encoding: binary ");  
echo file_get_contents($xlsFile);
exit(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T15:39:25.557

示例函数。

```
function file_download($filename, $mimetype='application/octet-stream') {
  if (file_exists($filename)) {
// send headers
    header($_SERVER["SERVER_PROTOCOL"] . ' 200 OK');
// type
    header('Content-Type: ' . $mimetype);
// date of modified       
    header('Last-Modified: ' . gmdate('r', filemtime($filename)));
    header('ETag: ' . sprintf('%x-%x-%x', fileinode($filename), filesize($filename), filemtime($filename)));
// file size
    header('Content-Length: ' . (filesize($filename)));
    header('Connection: close');
    header('Content-Disposition: attachment; filename="' . basename($filename) . '";');
// send file
    echo file_get_contents($filename);
  } else {
    header($_SERVER["SERVER_PROTOCOL"] . ' 404 Not Found');
    header('Status: 404 Not Found');
  }
  exit;
} 
```

# jquery - jQuery Mobile - 单击链接后显示“jquerymobile”

> ID：11210846
> 
> 赞同：0
> 
> 时间：2012-06-26T15:34:42.820
> 
> 标签：jquery, css, mobile

我正在使用 jQuery Mobile 构建一个简单的 Web 应用程序

每当我点击 iPhone 上的链接时，我都会看到显示 jQuery 正在请求新页面的小滚动条。

然后我大约半秒钟在右上角有一行简单的文字，上面写着“jquerymobile”

下一页然后正确加载。

为什么我得到的这行文本是白色背景的？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T16:43:48.783

Doh - 在我的 JS 包含之间不知何故有一个杂散的“jquerymobile”文本行 - 已修复！

# jquery - JQuery JSON不返回数据

> ID：11210848
> 
> 赞同：0
> 
> 时间：2012-06-26T15:34:48.013
> 
> 标签：jquery, json, get

我正在尝试从我的其他主机获取游戏服务器数据，因为我的主主机不允许服务器查询。但是我现在遇到json问题..

我的代码：

```
 <script type='text/javascript'>
    $(document).ready(function(){
        $("input.senddata").click(function() {
            var ipForm = $('input[name="ip_submit"]').val();
            var gameForm = $( 'select[name="game_submit"]' ).val()
            $.getJSON("http://gamepwn.net/serversdotee/add-server.php?json=true",
              {
                ip: ipForm,
                game: gameForm
              },
              function(data) {
                $('.result').html(data);
              });
        });
    });
</script> 
```

我想取回的数据是一个简单的文本，例如“服务器已被查询”..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T15:37:30.980

您的“其他服务器”需要返回正确的 CORS 标头，或者您需要移动到`JSONP`数据类型并修改您的“其他服务器”，以便它正确返回`JSONP`而不是`JSON`.

JSONP 与 JSON：

JSON：`http://gamepwn.net/serversdotee/add-server.php?json=true`

```
{"foo":"bar"} 
```

JSONP：`http://gamepwn.net/serversdotee/add-server.php?json=true&callback=??`

```
jQuery_7891469862340189270349182561({"foo":"bar"}) 
```

`jQuery_7891469862340189270349182561`回调 GET 参数的值在哪里。

# jquery - jQuery resize-crop 插件有时不会调整大小

> ID：11210852
> 
> 赞同：1
> 
> 时间：2012-06-26T15:34:59.823
> 
> 标签：jquery, jquery-plugins, resize-crop

我正在使用这个名为 resize-crop 的 jquery 插件： [http ://code.google.com/p/resize-crop/](http://code.google.com/p/resize-crop/)

这个问题是有时我加载页面，图像被裁剪，但没有调整大小。

应该发生什么：

![应该发生什么](../Images/9557b7f75272a748d8320a1078b331c8.png)

有时会发生什么：

![在此处输入图像描述](../Images/6b21f4c5ce3585b4c2ddfbd7eb7ab1e2.png)

当我按下刷新时，它再次起作用。

有谁知道我可能会出错？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T15:40:47.113

所以这是一个很难确认的问题，但在我看来，有时当插件运行时，图像可能只是没有完成加载。该插件非常简单，一年多来没有看到任何积极的开发（[代码](http://code.google.com/p/resize-crop/source/browse/jquery.resizecrop.js)），它似乎无法处理任何类型的情况。

图像标签在某些浏览器中完成加载时确实会公开事件，但它并不完全可靠，因此不确定解决此问题的最佳方法。一定要确保你在`$(document).ready`回调中调用插件。

您可能会尝试为图像标签提供静态宽度和高度属性。

# dynamics-crm-2011 - 插件无法激活工作流（使用 c# 的系统 xaml WF）

> ID：11210853
> 
> 赞同：-1
> 
> 时间：2012-06-26T15:35:02.020
> 
> 标签：dynamics-crm-2011, dynamics-crm-online

1.  项目清单

1.>我创建了新插件（在​​创建和更新任何自定义实体时触发（假设：ce1））

2.>在线注册。

3.>那个插件创建工作流（使用c#代码的系统xaml工作流）并激活那个WF。

4.>那个WF创建F9 ..:)

5.>问题是...:(

6.>使用其他 C# 应用程序 WF 仅创建未在在线版本中激活（即 WF 处于草稿模式）

7.>但它在本地版本中运行 f9。

8.>它也在网上工作，但使用CRM界面。

9.> 使用 C# 应用程序在将要激活 WF 的行处引发错误...错误是：模拟时无法发布工作流。

任何形式的帮助表示赞赏...请帮助我...

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T14:54:00.290

```
//Getting Service as happens in PLUGIN
IOrganizationServiceFactory serviceFactory =          (IOrganizationServiceFactory)serviceProvider.GetService(typeof(IOrganizationServiceFactory));
  IOrganizationService service = serviceFactory.CreateOrganizationService(context.UserId);

//Configuring xaml to create workflow    

 string xamlWfPrefix = @"<?xml version=""1.0"" encoding=""utf-16""?>
<Activity x:Class=""XrmWorkflow"" 
xmlns=""http://schemas.microsoft.com/netfx/2009/xaml/activities"" 
xmlns:mva=""clr-namespace:Microsoft.VisualBasic.Activities;assembly=System.Activities, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35""
xmlns:mxs=""clr-namespace:Microsoft.Xrm.Sdk;assembly=Microsoft.Xrm.Sdk, Version=5.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"" 
xmlns:mxswa=""clr-namespace:Microsoft.Xrm.Sdk.Workflow.Activities;assembly=Microsoft.Xrm.Sdk.Workflow, Version=5.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35""
xmlns:s=""clr-namespace:System;assembly=mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"" 
xmlns:scg=""clr-namespace:System.Collections.Generic;assembly=mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"" 
xmlns:srs=""clr-namespace:System.Runtime.Serialization;assembly=System.Runtime.Serialization, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089""
xmlns:this=""clr-namespace:"" xmlns:x=""http://schemas.microsoft.com/winfx/2006/xaml"">
  <x:Members>
    <x:Property Name=""InputEntities"" Type=""InArgument(scg:IDictionary(x:String, mxs:Entity))"" />
    <x:Property Name=""CreatedEntities"" Type=""InArgument(scg:IDictionary(x:String, mxs:Entity))"" />
  </x:Members>
  <this:XrmWorkflow.InputEntities>
    <InArgument x:TypeArguments=""scg:IDictionary(x:String, mxs:Entity)"" />
  </this:XrmWorkflow.InputEntities>
  <this:XrmWorkflow.CreatedEntities>
    <InArgument x:TypeArguments=""scg:IDictionary(x:String, mxs:Entity)"" />
  </this:XrmWorkflow.CreatedEntities>
  <mva:VisualBasic.Settings>Assembly references and imported namespaces for internal implementation</mva:VisualBasic.Settings>
  <mxswa:Workflow>
    <Sequence DisplayName=""CreateStep1"">
      <Sequence.Variables>
        <Variable x:TypeArguments=""x:Object"" Name=""CreateStep1_1"" />
        <Variable x:TypeArguments=""x:Object"" Name=""CreateStep1_2"" />
      </Sequence.Variables>
      <Assign x:TypeArguments=""mxs:Entity"" To=""[CreatedEntities(&quot;CreateStep1_localParameter#Temp&quot;)]"" Value=""[New Entity(&quot;new_crm_new_sfeed&quot;)]"" />
      <mxswa:ActivityReference AssemblyQualifiedName=""Microsoft.Crm.Workflow.Activities.EvaluateExpression, Microsoft.Crm.Workflow, Version=5.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"" DisplayName=""EvaluateExpression"">
        <mxswa:ActivityReference.Arguments>
          <InArgument x:TypeArguments=""x:String"" x:Key=""ExpressionOperator"">CreateCrmType</InArgument>
          <InArgument x:TypeArguments=""s:Object[]"" x:Key=""Parameters"">[New Object() { Microsoft.Xrm.Sdk.Workflow.WorkflowPropertyType.String, """;

                    xamlWfPrefix += displayname + @""", ""String"" }]</InArgument>
          <InArgument x:TypeArguments=""s:Type"" x:Key=""TargetType"">
            <mxswa:ReferenceLiteral x:TypeArguments=""s:Type"" Value=""x:String"" />
          </InArgument>
          <OutArgument x:TypeArguments=""x:Object"" x:Key=""Result"">[CreateStep1_1]</OutArgument>
        </mxswa:ActivityReference.Arguments>
      </mxswa:ActivityReference>
      <mxswa:SetEntityProperty Attribute=""new_name"" Entity=""[CreatedEntities(&quot;CreateStep1_localParameter#Temp&quot;)]"" EntityName=""new_crm_new_sfeed"" Value=""[CreateStep1_1]"">
        <mxswa:SetEntityProperty.TargetType>
          <InArgument x:TypeArguments=""s:Type"">
            <mxswa:ReferenceLiteral x:TypeArguments=""s:Type"" Value=""x:String"" />
          </InArgument>
        </mxswa:SetEntityProperty.TargetType>
      </mxswa:SetEntityProperty>
      <mxswa:ActivityReference AssemblyQualifiedName=""Microsoft.Crm.Workflow.Activities.EvaluateExpression, Microsoft.Crm.Workflow, Version=5.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"" DisplayName=""EvaluateExpression"">
        <mxswa:ActivityReference.Arguments>
          <InArgument x:TypeArguments=""x:String"" x:Key=""ExpressionOperator"">CreateCrmType</InArgument>
          <InArgument x:TypeArguments=""s:Object[]"" x:Key=""Parameters"">[New Object() { Microsoft.Xrm.Sdk.Workflow.WorkflowPropertyType.String, """;

                    xamlWfPrefix += displayname;

                    string xamlWfSuffix = @", ""String"" }]</InArgument>
          <InArgument x:TypeArguments=""s:Type"" x:Key=""TargetType"">
            <mxswa:ReferenceLiteral x:TypeArguments=""s:Type"" Value=""x:String"" />
          </InArgument>
          <OutArgument x:TypeArguments=""x:Object"" x:Key=""Result"">[CreateStep1_2]</OutArgument>
        </mxswa:ActivityReference.Arguments>
      </mxswa:ActivityReference>
      <mxswa:SetEntityProperty Attribute=""new_description"" Entity=""[CreatedEntities(&quot;CreateStep1_localParameter#Temp&quot;)]"" EntityName=""new_crm_new_sfeed"" Value=""[CreateStep1_2]"">
        <mxswa:SetEntityProperty.TargetType>
          <InArgument x:TypeArguments=""s:Type"">
            <mxswa:ReferenceLiteral x:TypeArguments=""s:Type"" Value=""x:String"" />
          </InArgument>
        </mxswa:SetEntityProperty.TargetType>
      </mxswa:SetEntityProperty>
      <mxswa:CreateEntity EntityId=""{x:Null}"" DisplayName=""CreateStep1"" Entity=""[CreatedEntities(&quot;CreateStep1_localParameter#Temp&quot;)]"" EntityName=""new_crm_new_sfeed"" />
      <Assign x:TypeArguments=""mxs:Entity"" To=""[CreatedEntities(&quot;CreateStep1_localParameter&quot;)]"" Value=""[CreatedEntities(&quot;CreateStep1_localParameter#Temp&quot;)]"" />
      <Persist />
    </Sequence>
  </mxswa:Workflow>
</Activity>";

       //Calling method to create total xaml code that requires to create workflow
       string xamlWf = BuildWorkflowXaml(xamlWfPrefix, xamlWfSuffix, recordCreated);
        //Initiating workflow to be create
        Workflow wfOnCreate = new Workflow()
              {
                Name = "CRM_DNNWorkflow_OnCreate",
                Type = new OptionSetValue(1),
                Category = new OptionSetValue(0),
                Scope = new OptionSetValue(2),
                LanguageCode = 1033, // U.S. English
                TriggerOnCreate = true,
                OnDemand = false,
                PrimaryEntity = logicalname, //Name of entity on which WF will be fired
                Description = @"Tracks Creation",
                Xaml = xamlWf
                    };

                    xamlWf = BuildWorkflowXaml(xamlWfPrefix, xamlWfSuffix, recordDeleted);
                   //Another WF
                    Workflow wfOnDelete = new Workflow()
                    {
                        Name = "CRM_DNNWorkflow_OnDelete",
                        Type = new OptionSetValue(1),
                        Category = new OptionSetValue(0),
                        Scope = new OptionSetValue(2),
                        LanguageCode = 1033, // U.S. English
                        TriggerOnDelete = true,
                        OnDemand = false,
                        PrimaryEntity = logicalname,
                        Description = @"Tracks Deletion",
                        Xaml = xamlWf
                    };

                    xamlWf = BuildWorkflowXaml(xamlWfPrefix, xamlWfSuffix, recordModified);
                    //Another WF
                    Workflow wfOnModify = new Workflow()
                    {
                        Name = "CRM_DNNWorkflow_OnModify",
                        Type = new OptionSetValue(1),
                        Category = new OptionSetValue(0),
                        Scope = new OptionSetValue(2),
                        LanguageCode = 1033, // U.S. English
                        TriggerOnUpdateAttributeList = attributeList,
                        OnDemand = false,
                        PrimaryEntity = logicalname,
                        Description = @"Tracks Modification",
                        Xaml = xamlWf
                    };

                    workflowOnCreateId = service.Create(wfOnCreate);
                    workflowOnDeleteId = service.Create(wfOnDelete);
                    workflowOnModifyId = service.Create(wfOnModify);           

                    //activate workflow (OnCreate)
                    ActivateWorkflow(workflowOnCreateId, service, serviceProvider);

                    //activate workflow (OnDelete)
                    ActivateWorkflow(workflowOnDeleteId, service, serviceProvider);

                    //activate workflow (OnModify)
                    ActivateWorkflow(workflowOnModifyId, service, serviceProvider);
                }
            }
            catch (FaultException<OrganizationServiceFault> ex)
            {
                tracingService.Trace("Exception: {0}", ex.ToString());
                throw;
                //throw new InvalidPluginExecutionException("An error occurred in the plug-in.", ex);
            }
        }

        /// <summary>
        /// Builds the Xaml to define the function of a Workflow.
        /// </summary>
        /// <param name="prefix">Prefix to Xaml code</param>
        /// <param name="suffix">Suffix to Xaml code</param>
        /// <param name="status">Sets the description field of the new_crm_new_sfeed Entity</param>
        /// <returns></returns>
        private string BuildWorkflowXaml(string prefix,string suffix,string status)
        {
            return prefix + status + suffix;
        }

        /// <summary>
        /// Activates a Workflow.
        /// </summary>
        /// <param name="workflowId">Guid of the workflow to be created.</param>
        /// <param name="service">IOrganizationService Object.</param>
        private void ActivateWorkflow(Guid workflowId,IOrganizationService service,IServiceProvider serviceProvider) 
        {
            //Extract the tracing service for use in plug-in debugging.
            ITracingService tracingService =
                (ITracingService)serviceProvider.GetService(typeof(ITracingService));

            try
            {
                SetStateRequest activateRequest = new SetStateRequest
                {
                    EntityMoniker = new EntityReference(Workflow.EntityLogicalName, workflowId),
                    State = new OptionSetValue((int)WorkflowState.Activated),
                    Status = new OptionSetValue(2)
                };
                //**Error Occurs Here**
                OrganizationResponse respActivation = service.Execute(activateRequest);
                tracingService.Trace("ActivateResponse", respActivation);
                workflowGUIDs.Add(workflowId);
            }
            catch (InvalidPluginExecutionException exe)
            {
                tracingService.Trace("Exception: {0}", exe.ToString());
                throw;
            }            
        }

**FROM MY C# APPLICATION**

// Form the RetrieveOrganization Request.
   RetrieveOrganizationRequest request = new RetrieveOrganizationRequest();
   request.UniqueName = organizationUniqueName;
   RetrieveOrganizationResponse response = (RetrieveOrganizationResponse)discoveryServiceProxy.Execute(request);

// Form the URL.
   Uri uri = new Uri(response.Detail.Endpoints[EndpointType.OrganizationService]);

 //Form the OrganizationServiceProxy Object.
   orgServiceProxy = new OrganizationServiceProxy(uri, null, discoveryServiceProxy.ClientCredentials, discoveryServiceProxy.DeviceCredentials);

Entity Dnn_selectedEntity = new Entity("new_dnn_selected_entity");
Dnn_selectedEntity["new_name"] = entityMetadataId.Value.ToString();
Dnn_selectedEntity["new_trackedentity"] = entityMetadataId.Key;
orgServiceProxy.Create(Dnn_selectedEntity);
//After Creting this record That Plugin fires....

Thanks. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T16:33:12.977

发布您的插件代码会很有帮助。但是，如果您使用插件上下文获取 IOrganizationService，它可能正在使用模拟，如果是这种情况，我会尝试使用正确的所有者创建一个新的 OrganizationServiceProxy 并查看是否可以解决问题。

我无法访问在线版本，所以这是在黑暗中刺伤。

# java - 使用分词器读取一行

> ID：11210857
> 
> 赞同：1
> 
> 时间：2012-06-26T15:35:12.447
> 
> 标签：java, tokenize, readline, stringtokenizer

```
public void GrabData() throws IOException
{
    try {
        BufferedReader br = new BufferedReader(new FileReader("data/500.txt"));
        String line = "";
        int lineCounter = 0;
        int TokenCounter = 1;
        arrayList = new ArrayList < String > ();

        while ((line = br.readLine()) != null) {

            //lineCounter++;
            StringTokenizer tk = new StringTokenizer(line, ",");

            System.out.println(line);

            while (tk.hasMoreTokens()) {
                arrayList.add(tk.nextToken());
                System.out.println("check");
                TokenCounter++;

                if (TokenCounter > 12) {
                    er = new DataRecord(arrayList);
                    DR.add(er);
                    arrayList.clear();
                    System.out.println("check2");

                    TokenCounter = 1;
                }

            }
        }
    } catch (FileNotFoundException ex) {
        Logger.getLogger(Driver.class.getName()).log(Level.SEVERE, null, ex);
    }
} 
```

您好，我正在使用标记器来读取一行的内容并将其存储到一个 araylist 中。GrabData 类在这里完成了这项工作。

唯一的问题是公司名称（每行的第三列）用引号引起来，并且有逗号。我已经为您的示例添加了一行。分词器依靠逗号将行分隔成不同的记号。但我猜公司名称会把它扔掉。如果不是公司栏中的逗号，一切都会正常进行。

示例：- Essie,Vaill,"Litronic , Industries",14225 Hancock Dr,Anchorage,Anchorage,AK,99515,907-345-0962,907-345-1215,essie@vaill.com,http://www.essievaill .com

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T15:46:47.973

首先 StringTokenizer 被认为是遗留代码。来自 Java 文档：

> StringTokenizer 是一个遗留类，出于兼容性原因保留，但不鼓励在新代码中使用它。建议任何寻求此功能的人改用 String 的 split 方法或 java.util.regex 包。

使用 split() 方法可以得到一个字符串数组。在遍历数组时，您可以检查当前字符串是否以引号开头，如果是这种情况，请检查下一个字符串是否以引号结尾。如果你满足这两个条件，那么你就知道你没有在你想要的地方拆分，你可以将这两个合并在一起，按照你的意愿处理它，然后继续正常地遍历数组。在那个过程中，你可能会做 i+=2 而不是你的常规 i++ ，它应该被忽视。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T16:06:06.607

您可以使用正则表达式来完成此操作。以下代码：

```
 String s = "asd,asdasd,asd\"asdasdasd,asdasdasd\", asdasd, asd";
        System.out.println(s);
        s = s.replaceAll("(?<=\")([^\"]+?),([^\"]+?)(?=\")", "$1 $2");
        s = s.replaceAll("\"", "");
        System.out.println(s); 
```

产量

```
asd,asdasd,asd, "asdasdasd,asdasdasd", asdasd, asd
asd,asdasd,asd, asdasdasd asdasdasd, asdasd, asd 
```

据我了解，这是您的标记器代码工作所需的预处理。希望这可以帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T15:48:43.543

虽然 StringTokenizer 可能不会原生地为您处理这个问题，但几行代码就可以完成......可能不是最有效的，但应该让这个想法得到理解......

```
while(tk.hasMoreTokens()) {
    String token = tk.nextToken();

    /* If the item is encapsulated in quotes, loop through all tokens to 
     * find closing quote 
     */
    if( token.startsWIth("\"") ){
        while( tk.hasMoreTokens() && ! tk.endsWith("\"") ) {
            // append our token with the next one.  Don't forget to retain commas!
            token += "," + tk.nextToken();
        }

        if( !token.endsWith("\"") ) {
            // open quote found but no close quote.  Error out.
            throw new BadFormatException("Incomplete string:" + token);
        }

        // remove leading and trailing quotes
        token = token.subString(1, token.length()-1);
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-26T16:27:03.383

如您所见，在类描述中，Oracle 不鼓励使用[StringTokenizer 。](http://docs.oracle.com/javase/7/docs/api/java/util/StringTokenizer.html)我不会使用标记器，而是使用 String [split()](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#split%28java.lang.String%29)方法，您可以使用正则表达式作为参数并显着减少代码。

```
 String str = "Essie,Vaill,\"Litronic , Industries\",14225 Hancock Dr,Anchorage,Anchorage,AK,99515,907-345-0962,907-345-1215,essie@vaill.com,http://www.essievaill.com";
    String[] strs = str.split("(?<! ),(?! )");
    List<String> list = new ArrayList<String>(strs.length);

    for(int i = 0; i < strs.length; i++) list.add(strs[i]); 
```

只要注意你的正则表达式，使用这个你假设逗号总是在空格之间。

# php - PHP 会话 * 并不总是 * 工作

> ID：11210860
> 
> 赞同：4
> 
> 时间：2012-06-26T15:35:25.207
> 
> 标签：php, session, vps

我最近将一堆网站迁移到了一个新的 VPS，我在 PHP 会话方面遇到了很多麻烦。所有网站的配置方式几乎都相同，但有一个网站的会话并不总是有效。让我烦恼的是它有点随机。我可以去网站，登录，会话会正常工作。然后，一个小时后我回去，尝试用同一个帐户登录，但它不再保留我的会话。

VPS 在**CentOS 5.8**上运行，它有**PHP 5.4.3**。我应该提一下，在迁移之前，该网站运行在 PHP **5.3**上。

我检查了**session.save.path**并且很好。我什至可以看到会话文件（具有正确的用户和所有内容），但是当会话不工作时它们是空的，这是有道理的。但是为什么有时会起作用，有时却不起作用？我很难弄清楚这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T15:42:51.057

会话需要服务器磁盘空间来保存服务器是否有磁盘空间来保存会话？我们在一个 linux 机器上遇到了一个问题，由于其分区的磁盘空间不足，会话停止保存。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T15:53:12.960

检查您的 php.ini，执行 phpinfo() 并查看会话是如何配置的……特别注意 session.gc_maxlifetime 设置。

[http://php.net/manual/en/session.configuration.php](http://php.net/manual/en/session.configuration.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-28T15:26:24.370

我们也有这个问题。我们通过在服务器的 php.ini 中将 session.auto_start = 0 更改为 session.auto_start = 1 来解决它。我不知道为什么，但它解决了我们的问题。我们仍在调查为什么这样做有效以及这样做的后果是什么。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-12T17:25:18.997

我有时也会遇到同样的问题，我的一台专用服务器安装了 PHP 5.4.3。

具有讽刺意味的是，当我清除浏览器缓存时（一切从头开始）。

它工作正常。

# java - 如何从 android 应用程序使用 wsdl 服务（基于 Azure）

> ID：11210865
> 
> 赞同：0
> 
> 时间：2012-06-26T15:35:38.897
> 
> 标签：java, android, soap, wsdl, ksoap2

1).我从 WSDL 生成 Web 服务客户端（使用 Axis2 1.5 carnel、wsdl2java、Tomcat 7.0）；

2）。从 Android 访问 JAX-WS Web 服务使用 KSoap2-android 库（我在服务[http://www.webservicex.net/ConvertWeight.asmx](http://www.webservicex.net/ConvertWeight.asmx)上测试了这个库，它工作正常）。但是使用[http://xxx.svc?wsdl](http://xxx.svc?wsdl)我无法连接到该服务。当我从 Android Progect 生成 Web 服务客户端时，我收到此错误：“IWAB0399E 从 WSDL 生成 Java 时出错：java.io.IOException：发射器失败。WSDL 文档中有一个未定义的绑定 (BasicHttpBinding_ICustomerService)。提示：确保完全合格。”

3）。从 Web 服务客户端我制作了 service.jar，它在 Android Progect 上使用如何 lib，但无法正常工作。

4）。当我使用 ksoap2 时，出现此错误：

[2012-06-26 17:25:33 - TranscribeMe_2.2] Dx 1 错误；中止 [2012-06-26 17:25:33 - TranscribeMe_2.2] 转换为 Dalvik 格式失败，出现错误 1 ​​[2012-06-26 17:26:32 - TMP] Dx 警告：忽略匿名内部类的 InnerClasses 属性(org.ksoap2.transport.KeepAliveHttpsTransportSE$1) 没有关联的 EnclosureMethod 属性。此类可能是由不针对现代 .class 文件格式的编译器生成的。推荐的解决方案是从源代码重新编译类，使用最新的编译器并且不指定任何“-target”类型选项。忽略此警告的后果是此类上的反射操作将错误地指示它不是内部类。[2012-06-26 17:26:33 - TMP] Dx 故障处理“javax/xml/ws/Dispatch.class”：

不构建核心库时对核心类（java.* 或 javax.*）的不明智或错误使用。

这通常是由于在使用 IDE（例如 Eclipse）时无意中在应用程序的项目中包含了核心库文件。如果您确定您不是故意定义核心类，那么这是对正在发生的事情的最可能的解释。

但是，您实际上可能正在尝试在核心命名空间中定义一个类，例如，您可能从非 Android 虚拟机项目中获取了该类的源代码。这肯定是行不通的。至少，它会危及您的应用程序与平台未来版本的兼容性。它的合法性也经常受到质疑。

如果你真的打算构建一个核心库——它只适合作为创建完整虚拟机发行版的一部分，而不是编译应用程序——然后使用“--core-library”选项来抑制这个错误消息。

如果您继续使用“--core-library”，但实际上正在构建应用程序，那么请预先警告您的应用程序在某些时候仍将无法构建或运行。请为愤怒的客户做好准备，他们会发现，例如，一旦他们升级操作系统，您的应用程序就会停止运行。你会为这个问题负责。

如果您合法地使用了一些恰好位于核心包中的代码，那么您拥有的最简单安全的替代方法是重新打包该代码。也就是说，将有问题的类移动到您自己的包命名空间中。这意味着它们永远不会与核心系统类发生冲突。JarJar 是一个可以帮助您完成这项工作的工具。如果你发现你做不到这一点，那么这表明你所走的道路最终会导致痛苦、痛苦、悲伤和悲叹。

[2012-06-26 17:26:33 - TMP] Dx 1 错误；中止 [2012-06-26 17:26:33 - TMP] 转换为 Dalvik 格式失败，错误 1

请帮我...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T20:13:36.877

如果您将在 StackOverFlow 中搜索 Axis 和 WCF/WSDL 问题，您会发现很多没有任何答案或建议的问题，因此您无法解决很多问题

关于您的以下错误：

```
There is an undefined binding (BasicHttpBinding_ICustomerService) in the WSDL document.
Hint: make sure is fully qualified." 
```

我可以说这个问题可能与您如何定义 ICustomerService 绑定有关。由于您选择了 BasicHttpBinding，请确保所有参数都正确。如果您检查 Axis 生成的 WSDL，您将能够轻松地验证它。

此外，在某些情况下，您可能会遇到命名空间问题，这可能会导致 Axis WSDL 生成 service.svc?wsdl=wsdl0 和 service.svc?wsdl=wsdl1。如果是这种情况，您可以通过为每个数据合同添加名称空间属性以及消息头、正文和在 Web 服务端点中添加的绑定名称空间属性来解决名称空间问题。

我的第一个建议是创建一个简单的 C# 客户端应用程序并连接到您的 Windows Azure WCF 服务并验证您可以使用 BasicHttpBindings 毫无问题地进行连接，然后使用 Java 应用程序执行相同操作。如果您发现问题，请比较两者之间的网络流量以查看不同之处，这可能有助于您找出根本原因，对于非常具体的问题，请向 SO 提问，您将获得适当的帮助。祝你好运！！

# c# - .Net 应用程序线程/计时器性能

> ID：11210868
> 
> 赞同：2
> 
> 时间：2012-06-26T15:35:54.330
> 
> 标签：c#, multithreading

我正在开发一个启动 System.Threading.Timer 的应用程序，它对串行端口进行一些相当快速的读/写（每 100 毫秒）。计时器的回调方法如下所示：-

```
if (_timerTaskRunning)
{
    Debug.WriteLine("still running");
    return;
}

_timerTaskRunning = true;

... do the serial write/read here ...

_timerTaskRunning = false; 
```

该`_timerTaskRunning`标志是一种保障措施，以确保在前一个计时器“周期”尚未完成时委托不会运行，即它花费的时间超过 100 毫秒。

当我第一次启动应用程序时，我会从`if`语句中看到大约十几个调试消息。然后它会稳定下来，但我会在 7 或 8 秒后看到另一组消息。它再次稳定下来，每隔一段时间我就会看到一组消息以不同的数量出现。

我假设第一组消息是由于应用程序仍在启动、对象/UI 初始化等原因导致计时器委托运行缓慢引起的，而后续消息可能是由垃圾收集每隔一段时间启动并减慢引起的事情下来了？这不是串行端口，因为我看到“模拟”串行端口的行为相同。

我尝试将计时器的第一次运行延迟几秒钟，但这没有什么区别 - 在计时器启动后的第一秒左右，我仍然收到一批调试消息。跳过一些计时器任务并不是世界末日，但知道可能导致它们的原因会很有趣。我可以做些什么来进一步调查原因，例如 perfmon 是否可以说明问题？我以前没用过，你会推荐哪些柜台？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T15:43:59.967

听起来你有一个可重入问题。基本上，由于竞争条件，您的 _timerTaskRunning 可能无法起到保护作用。

1.  使用[System.Timers.Timer](http://msdn.microsoft.com/en-us/library/system.timers.timer.aspx)而不是 System.Threading.Timer
2.  将 Timer.AutoReset 设置为 false。这将解决您令人着迷的问题，因为在您明确想要它之前它不会给您回电。
3.  当您需要再次启动计时器时，请在计时器上调用 Start()（您可能需要调整间隔以考虑执行时间）

如果您有多个可以调用 start 的线程，则需要同步对它的调用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T15:38:58.833

你`_timerTaskRunning`得到了几个线程的更新。您需要使用锁定使其成为线程安全的。

但是，我根本不会使用计时器。[我在这里](https://gist.github.com/2996519)实现了一个非重用计时器。它使用`AutoResetEvent`带有超时功能的 WaitOne 来确保不可重入。

# symfony - Symfony/Silex：表单提交什么都不做（没有错误，没有返回）

> ID：11210875
> 
> 赞同：1
> 
> 时间：2012-06-26T15:36:16.730
> 
> 标签：symfony, doctrine-orm, symfony-forms, silex

我在此注册表单页面上使用安装了 Doctrine DBAL 的最新版本的 Silex（不带 .phar）。

如果我输入了无效的详细信息，它会返回到该表单作为例外。但是如果详细信息是有效的，而不是重定向到 /success/ 页面，它会再次返回相同的表单，就像什么都没发生一样。数据库没有收到任何条目，Apache 错误日志也没有报告任何问题。

```
<?php

// ...

use Symfony\Component\HttpFoundation\Request;
use Symfony\Component\HttpFoundation\Response;
use Symfony\Component\Yaml\Parser;
use Silex\Provider\FormServiceProvider;
use Symfony\Component\Validator\Constraints as Assert;

// ...

$app->match('/signup/', function(Request $request) use($app, $page) { 

  $data = array('name' => 'John','surname' => 'Smith','telephone' => '00011112222');

  $form = $app['form.factory']->createBuilder('form', $data)
    ->add('name', 'text', array(
        'constraints' => array(
            new Assert\NotBlank(), 
            new Assert\MinLength(2),
        ),
        'invalid_message' => 'First name is too short, It should have 2 characters or more',
    ))
    ->add('surname', 'text', array(
        'constraints' => array(
            new Assert\NotBlank(), 
            new Assert\MinLength(2),   
        ),
        'invalid_message' => 'Surname is too short, It should have 2 characters or more',
    ))
    ->add('telephone', 'text', array(
        'constraints' => array(
            new Assert\NotBlank(), 
            new Assert\Regex("/[\d\-\ ]+/"),
            new Assert\MinLength(11),
        ),
        'invalid_message' => 'Please enter a valid phone number. Must have 11 digits and may contain dashes (-) or spaces.',
    ))
    ->getForm();

  if ('POST' == $request->getMethod()) {
     $form->bindRequest($request);

     if ($form->isValid()) {

        $data = $form->getData();

        $app['db']->insert('signups', array(
            'forename'  => $data['name'],
            'surname'   => $data['surname'],
            'telephone' => $data['telephone']
        ));

        return $app->redirect('/success/');

     }
  }

  $page['form'] = $form->createView();    

  return $app['twig']->render('signup.html.twig', $page);

}, 'POST|GET');

$app->match('/success/', function() use($app, $page) { 

    return $app['twig']->render('success.html.twig', $page);

}, 'POST|GET'); 
```

和树枝形式

```
<form class="well" action="/signup/" method="post">
<fieldset>
    <div class="control-group">
        {% if (form_errors(form.name)) or (form_errors(form.surname)) or (form_errors(form.telephone)) %}
                <div class="error-in-form">
                    <h5 style="color:#c00;">Please review the following errors:</h5>
                    <br />
                    <div>
                        <p class="help-msg"><span>First Name: </span></p>
                        <div class="error-msg">{{ form_errors(form.name) }}</div>
                        <div class="clearfix"></div>
                    </div>

                    <div>
                        <p class="help-msg"><span>Surname: </span></p>
                        <div class="error-msg">{{ form_errors(form.surname) }}</div>
                        <div class="clearfix"></div>
                    </div>

                    <div>
                        <p class="help-msg"><span>Telephone: </span></p>
                        <div class="error-msg">{{ form_errors(form.telephone) }}</div>
                        <div class="clearfix"></div>
                    </div>
                </div>
            {% endif %}

        {{ form_label(form.name) }}
        <div class="controls">

            {{ form_widget(form.name, { 'attr': { 'class': 'input-medium' } } ) }}
            {{ form_widget(form.surname, { 'attr': { 'class': 'input-medium' } } ) }}

        </div>
    </div>
    <div class="control-group">
        {{ form_label(form.telephone) }}
        <div class="controls">
            {{ form_widget(form.telephone, { 'attr': { 'class': 'input-fullwidth' } } ) }}
        </div>
    </div>
    <p class="tnc">If you accepts the terms and conditions below, please proceed.</p>
    <button id="big-red-button" type="submit" class="btn btn-danger btn-fullwidth">Submit &gt;</button>
</fieldset>
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T09:49:41.917

好吧，看起来我忘了添加`{{ form_rest }}`到 Twig 表单模板中。

由于我也没有包含`{{ form_errors(form) }}`任何内容，因此我看不到有关缺少 CSFP 令牌的错误，这是一个添加到表单中的隐藏字段。

# python - 令人困惑的未缩进错误

> ID：11210876
> 
> 赞同：2
> 
> 时间：2012-06-26T15:36:16.693
> 
> 标签：python, python-2.7

在下面我得到错误

```
IndentationError: unindent does not match any outer indentation level (hisrel_split.py, line 25) 
```

这是`elif`行。我检查了我所有的缩进，甚至重新输入了很多。要么我在这里遗漏了一些明显的东西，要么有一些我不知道的微妙规则。有任何想法吗

```
from numpy import *
from pylab import *
import sys

ifp = open(sys.argv[1],"r").readlines()
data_1 = []
data_2 = []
data = []

last = int(ifp[-1].split()[0])
set_1 = range(int(round(last)/2))
set_2 = range(int(round(last)/2),(last+1))

for i in ifp:
    d = i.split()
    try:
        data.append(eval(d[2]))
    except:
        continue
    if eval(d[0]) in set_1 and eval(d[1]) in set_1:
        try:
            data_1.append(eval(d[2]))
        except:
            continue
    elif eval(d[0]) in set_2 and eval(d[1]) in set_2:
        print "yes" 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T15:46:54.367

尝试使用这些 args 运行您的脚本，这些会警告您混合制表符/空格：

```
python -m tabnanny hisrel_split.py 
```

或者

```
python -t hisrel_split.py 
```

[http://docs.python.org/library/tabnanny.html](http://docs.python.org/library/tabnanny.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T15:55:15.117

在选项卡上执行查找/替换所有操作并将它们转换为四个空格。根据您使用的编辑器，您应该能够使用它`\t`来查找选项卡。

# reflection - 如何在 Powershell 中创建新的 ExeConfigurationFileMap 实例？

> ID：11210878
> 
> 赞同：1
> 
> 时间：2012-06-26T15:36:24.067
> 
> 标签：reflection, powershell

我有以下 Powershell 代码：

```
Add-Type -Assembly System.Configuration

[ExeConfigurationFileMap] $configMap = New-Object ExeConfigurationFileMap 
```

我想要做的就是创建一个新的实例`ExeConfigurationFileMap`，但是我尝试的每一种方式，PS 一直告诉我它找不到类型`ExeConfigurationFileMap`，我应该检查类型的程序集是否加载到内存中。

我尝试了将 System.Configuration 程序集加载到内存中的不同方法，但代码仍然无法工作。

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T15:47:44.837

尝试：

```
$configMap = New-Object -TypeName System.Configuration.ExeConfigurationFileMap 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T15:58:28.263

您需要指定完整的类型名称，例如：

```
New-Object System.Configuration.ExeConfigurationFileMap 
```

从技术上讲，您不必提供 ，`System.`因为如果 PowerShell 找不到指定的类型，它会预先设置。

# eclipse - Flash Builder 4 NOT Subclipse 的 SVN 集成

> ID：11210879
> 
> 赞同：1
> 
> 时间：2012-06-26T15:36:32.740
> 
> 标签：eclipse, apache-flex, svn, flash-builder

我正在为 Adob​​e Flash Builder 4 寻找一个不错的 SVN 插件，它不是 subclipse，因为我目前正在我的设置中使用 subclipse，而且它在各个方面都非常糟糕。

任何和所有的帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T05:58:25.263

我觉得 subclipse 不错，如果你不喜欢，也许你可以在这里找到更多插件：

[http://marketplace.eclipse.org/taxonomy/term/15/favorites](http://marketplace.eclipse.org/taxonomy/term/15/favorites)

# java - Eclipse jar 在项目类路径上冲突

> ID：11210882
> 
> 赞同：0
> 
> 时间：2012-06-26T15:36:40.510
> 
> 标签：java, eclipse, gwt, classpath

我正在使用带有 GWT SDK 的 eclipse。在我的项目中，我使用 Httpclient，在 GWT SDK 中，他们还使用旧版本的 HttpClient，它缺少我使用的方法。这会导致 eclipse 中的冲突，因为 GWT SDK 中的 HttpClient jar 覆盖了我为项目提供的那个，所以我的代码将不再从 eclipse 中构建。这可以防止在 eclipse Tomcat 服务器上运行应用程序。

问题是，有没有办法覆盖这种行为，项目不需要 GWT SDK jar，它们只是用来运行 GWT 工具。

*   詹姆士

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T15:39:56.440

解决方案之一是更改项目的**Eclipse Java 构建路径**中库的顺序。

通过放置包含`HttpClient`上述jar 更新版本的`GWT`jar，您将解决您的问题。

# c++ - 加载 QPixmap 数据的更好方法

> ID：11210884
> 
> 赞同：4
> 
> 时间：2012-06-26T15:36:47.173
> 
> 标签：c++, c, qt, qimage, qpixmap

更好的方法（没有`QImage`）？：

```
QImage image(width, height, QImage::Format_RGB888);
memcpy(image.bits(), m_frameRGB->data[0], height * width * 3);
QPixmap pixmap = QPixmap::fromImage(image); 
```

我看不出有任何理由`QImage`用作中间缓冲区，但`QPixmap::loadFromData`不要使用此上下文加载数据：

```
pixmap.loadFromData(m_frameRGB->data[0], height * width * 3); // Need pixmap resize? 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T16:22:32.510

文档说：“如果未指定格式（这是默认格式），加载程序会探测文件的标题以猜测文件格式”。您只提供指向原始图像字节的指针，但您必须在缓冲区的开头提供一个标头，例如对于未压缩的 PPM 格式。

**编辑：** 您还可以测试 Roku 的建议，以使用将图像数据作为参数的 QImage 构造函数，但请参阅文档中的注释：“缓冲区必须在 QImage 的整个生命周期内保持有效。”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-11-07T12:11:58.007

遵循[hmuelner](https://stackoverflow.com/questions/11210884/better-way-to-load-qpixmap-data#comment14742502_11211729)的提示，并且......它真的比`QPixmap pixmap = QPixmap::fromImage(image);`

```
QPixmap pixmap(height, width);
QByteArray pixData;
pixData.append(QString("P6 %1 %2 255 ").arg(width).arg(height));
pixData.append((char *)m_frameRGB->data[0], width * height * 3);
pixmap.loadFromData((uchar *)pixData.data(), pixData.size()); 
```

# mysql - MySQL 组，加入并选择 Max

> ID：11210887
> 
> 赞同：1
> 
> 时间：2012-06-26T15:36:50.353
> 
> 标签：mysql, join, group-by, max

首先，我知道这里有人问过类似的问题，我已经检查过，但找不到合适的解决方案来解决我的问题。

我有这两个表（为简单起见，只修剪所需的部分）：

```
CREATE TABLE messages(
message_id MEDIUMINT(8) UNSIGNED NOT NULL AUTO_INCREMENT,
message_conversation_id MEDIUMINT(8) UNSIGNED NOT NULL DEFAULT '0', 
message_from MEDIUMINT(8) UNSIGNED NOT NULL DEFAULT '0',
message_to MEDIUMINT(8) UNSIGNED NOT NULL DEFAULT '0',
message_text TEXT NOT NULL DEFAULT '',
PRIMARY KEY (message_id),
KEY message_conversation_id (message_conversation_id),
KEY message_from (message_from),
KEY message_to (message_to)
) ENGINE=INNODB DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci;

CREATE TABLE users (
user_id MEDIUMINT(8) UNSIGNED NOT NULL AUTO_INCREMENT,
user_name VARCHAR(400) NOT NULL DEFAULT '', 
PRIMARY KEY (user_id)
) ENGINE=INNODB DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci; 
```

我想做一个查询，显示最大 message_id 的 message_text 和用户信息（可能都存储在 message_from 或 message_to 中，并使用 where 子句过滤（简单地说：消息会来找我，并向我提供其他用户的用户信息，因为在那次对话中，最后一条消息可能来自我或对话中的其他人）（这让我坚持解决问题））。

这个查询是我到目前为止提出的：

```
SELECT `m`.*, `u`.*, `u2`.*
FROM (`messages` AS m)
INNER JOIN `users` AS u ON `u`.`user_id`=`m`.`message_from`
INNER JOIN `users` AS u2 ON `u2`.`user_id`=`m`.`message_to`
WHERE (m.message_from="1" OR m.message_to="1")
AND `u`.`user_id` != '1'
AND `u2`.`user_id` != '1'
GROUP BY `m`.`message_conversation_id`
ORDER BY `m`.`message_id` desc 
```

这个查询准确地显示了我需要的东西（我猜），除了它提供消息表中的最低值。

我怎样才能做到这一点 ？我在哪里做错了？

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T18:14:42.320

这是获取每个对话的最新消息的另一种方法。

```
SELECT m.*, u.*, u2.*
FROM (`messages` AS m)
LEFT JOIN users AS u ON u.user_id=m.message_from
LEFT JOIN users AS u2 ON u2.user_id=m.message_to
WHERE (m.`message_from` != 1 AND m.`message_to` != 1) AND m.`message_id` IN (
    SELECT MAX(`message_id`) 
    FROM `messages` 
    GROUP BY `message_conversation_id` 
    HAVING `message_id` = m.`message_id`)
ORDER BY m.message_id DESC; 
```

解释一下，结果是“Using where; Using index”，意思是“任务完成”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T17:18:44.557

我得到了我需要的东西，我需要的是 message_body 结果列。这是健康的，还是有其他（可能更好）的方法？

```
SELECT DISTINCT(m.message_conversation_id),max(m.message_id), m.*,u.*, u2.*, 
(SELECT m2.message_text FROM messages m2 WHERE m2.message_id = max(m.message_id)) AS 'message_body'
FROM (`messages` AS m)
LEFT JOIN users AS u ON u.user_id=m.message_from
LEFT JOIN users AS u2 ON u2.user_id=m.message_to
WHERE (m.message_from='1' OR m.message_to='1')
GROUP BY m.message_conversation_id
ORDER BY m.message_id DESC 
```

# android - Android中的水平标签

> ID：11210891
> 
> 赞同：0
> 
> 时间：2012-06-26T15:36:57.130
> 
> 标签：android, tabs

> **可能重复：**
> [如何实现水平滚动标签？](https://stackoverflow.com/questions/9703857/how-to-implement-horizontally-scrollable-tabs)

我想在一个应用程序中实现选项卡，它本质上也允许在两个屏幕之间滑动。Google Play 商店的 App 部分就是一个很好的例子。顶部有水平可滚动的标签，它们随着屏幕滚动而移动。

我的目标是 Android 4.0，但需要使其向后兼容。

我显然不是要求任何人为此编写完整的代码，我只是在某个地方寻找教程，或者关于如何开始这个的建议。开发网站在这里显示了我想要的内容：http: [//developer.android.com/design/building-blocks/tabs.html](http://developer.android.com/design/building-blocks/tabs.html)

但没有显示如何做到这一点（或至少使其明显清晰）；它只是说这是它的好习惯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T15:41:30.377

看看这个 API，我使用它并且它很容易实现

[ViewPagerIndicator](http://viewpagerindicator.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T15:39:23.523

这通常通过使用[`ViewPager`](http://developer.android.com/reference/android/support/v4/view/ViewPager.html)类来完成。为了使其向后兼容，请查看[ActionBarSherlock](https://github.com/JakeWharton/ActionBarSherlock)项目；在那里，您将找到有关如何实现这种设计模式并使其即使在 Android 1.6 上也能正常工作的[示例。](https://github.com/JakeWharton/ActionBarSherlock/blob/master/samples/demos/src/com/actionbarsherlock/sample/demos/TabNavigation.java)

另外，正如 Alex 所说，如果您不想关心操作栏，可以查看同一开发人员的[ViewPageIndicator项目。](https://github.com/JakeWharton/Android-ViewPagerIndicator)

# java - Selenium/Testng - 使用 testng.xml 中的参数时，IF 语句不起作用

> ID：11210899
> 
> 赞同：0
> 
> 时间：2012-06-26T15:37:18.860
> 
> 标签：java, selenium, testng, selenium-chromedriver

我正在使用 Selenium WebDriver 和 Testng（使用 .xml 文件开始）来测试使用多个浏览器的站点。

我正在尝试创建一个方法，该方法将从 xml 文件中获取参数，并使用 IF 语句检测浏览器，创建相关驱动程序并返回它。

我遇到的麻烦是当我尝试将参数传递给方法时。例如，如果我通过“Chrome”，IF 语句可以正常工作并创建驱动程序。但是，如果我使用参数本身，则不会创建驱动程序，并且在第一次使用时测试会失败。

这是我正在使用的设置代码：

```
@Parameters ({"driver_property_value","driver_property_location","browser"})
@BeforeClass
public void setUp(String driverPropertyValue, String driverPropertyLocation, String browser) throws Exception {
    Setup setup = new Setup();

    //set properties
    System.setProperty(setup.driverPropertyValue(driverPropertyValue),setup.driverPropertyLocation(driverPropertyLocation));
    driver = setup.driver(browser);
    baseUrl = setup.baseURL();
    driver.manage().timeouts().implicitlyWait(30, TimeUnit.SECONDS);
} 
```

这就是它的名称：

```
public WebDriver driver(String browser)
{
    WebDriver value = null;

    if (browser == "chrome")
    {
    value = new ChromeDriver();
    }
    return value;
} 
```

这是我用来运行测试并传递参数的 testng xml：

```
<!DOCTYPE suite SYSTEM "http://beust.com/testng/testng-1.0.dtd">
<suite name = "testng" verbose="1">
<parameter name="driver_property_value" value="webdriver.chrome.driver"/>
<parameter name="driver_property_location" value="C:/chromedriver.exe"/>
<parameter name="browser" value="chrome"/>
<test name="chrome_tests">
    <packages>
        <package name="com.LoginPage"/>
    </packages>
</test> 
```

第一个设置似乎工作正常，只是驱动程序选择在使用参数时似乎不起作用。

任何帮助或建议将不胜感激。

谢谢

ps这是一个失败的跟踪，不确定它是否有帮助。

```
java.lang.NullPointerException
at com.LoginPage.Login_Logout.setUp(Login_Logout.java:33)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
at java.lang.reflect.Method.invoke(Unknown Source)
at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:80)
at org.testng.internal.Invoker.invokeConfigurationMethod(Invoker.java:543)
at org.testng.internal.Invoker.invokeConfigurations(Invoker.java:212)
at org.testng.internal.Invoker.invokeConfigurations(Invoker.java:138)
at org.testng.internal.TestMethodWorker.invokeBeforeClassMethods(TestMethodWorker.java:175)
at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:107)
at org.testng.TestRunner.privateRun(TestRunner.java:753)
at org.testng.TestRunner.run(TestRunner.java:613)
at org.testng.SuiteRunner.runTest(SuiteRunner.java:334)
at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:329)
at org.testng.SuiteRunner.privateRun(SuiteRunner.java:291)
at org.testng.SuiteRunner.run(SuiteRunner.java:240)
at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:52)
at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:86)
at org.testng.TestNG.runSuitesSequentially(TestNG.java:1137)
at org.testng.TestNG.runSuitesLocally(TestNG.java:1062)
at org.testng.TestNG.run(TestNG.java:974)
at org.testng.remote.RemoteTestNG.run(RemoteTestNG.java:109)
at org.testng.remote.RemoteTestNG.initAndRun(RemoteTestNG.java:202)
at org.testng.remote.RemoteTestNG.main(RemoteTestNG.java:173) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T18:50:42.250

不要使用引用相等运算符`==`来比较`String`s。使用`equals`或`equalsIgnoreCase`。

引用相等运算符检查两个操作数是否引用对象的同一实例。对于字符串和许多对象类型，这很少会像您期望的那样工作。

表达式`browser == "chrome"`解析为 false，因为即使`browser`变量具有值`"chrome"`，它也很可能是表示 的字符串的不同*实例*`"chrome"`。有关这意味着什么的更多详细信息，请参阅[此问题](https://stackoverflow.com/questions/513832/how-do-i-compare-strings-in-java)。

因此，当该表达式解析为 false 时，`driver`返回 a `null`，您`setUp`可以愉快地使用它，就好像它是一个有效的对象实例一样，从而导致`NullPointerException`.

将您的比较更改为：

```
if (browser.equals("chrome")) {
   value = new ChromeDriver();
} 
```

该声明有几种变体。您可以使用`equalsIgnoreCase`匹配`"chrome"`字符大小写的任意组合，并且可以颠倒文字`"chrome"`和`browser`局部变量的顺序。如果作为参数传入，这将防止 a`NullPointerException`在该行上发生。`null``browser`

```
if ("chrome".equalsIgnoreCase(browser)) {
   value = new ChromeDriver();
} 
```

# database - 默认 ASP.NET MVC 3 项目帐户控制器如何工作

> ID：11210900
> 
> 赞同：2
> 
> 时间：2012-06-26T15:37:20.797
> 
> 标签：database, asp.net-mvc-3, entity-framework

**我是 MVC3 的新手。**当我创建一个新的默认 ASP.NET MVC 3 项目模板时。

![我选择 MVC3 模板](../Images/97543a0efc293b46f21c250b0fd39b30.png)

有一个 AccountModels.cs 和 AccountController.cs C# 类处理来自 ASPNETDB.MDF DB 文件的数据，Web.config 文件中有一个连接字符串 (XML)，但我不明白它是如何处理这些数据的Query 或 LINQ，**AccountModels.cs 或 AccountController.cs 文件如何知道那些 DB 表**谁能让我逐步理解？请有人帮帮我。

对不起，我的英语不好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T15:57:51.500

它正在使用 Microsoft [Membership Provider](http://msdn.microsoft.com/en-us/library/yh26yfzy.aspx)。

从文档：

> ASP.NET 成员资格为您提供了一种验证和存储用户凭据的内置方式。因此，ASP.NET 成员身份可帮助您管理网站中的用户身份验证。您可以将 ASP.NET 成员资格与 ASP.NET 表单身份验证一起使用，方法是使用 ASP.NET 登录控件来创建一个完整的用户身份验证系统。

基本上，它具有快速直接的配置，并在您的数据库中创建几个表来保存用户数据。它很灵活，但是接口不是很好隔离，如果您需要扩展它或插入您的自定义逻辑，您最终可能会定义大量抛出“未实现”异常的方法

# eclipse - 查找 Eclipse (Java EE) 功能的源文件

> ID：11210901
> 
> 赞同：0
> 
> 时间：2012-06-26T15:37:23.990
> 
> 标签：eclipse, jakarta-ee, plugins

我想查看“新 Web 服务客户端（来自 WSDL）”功能的来源。我以为它是 Axis 2.0 ws Code Generator 插件，但它不是，它是另一个代码生成器，我不知道它的名称或它在 eclipse 源代码中的位置。

关于我应该在哪里寻找的任何提示？

编辑：使用 ALT+SHIFT+F1 我发现我感兴趣的向导的“贡献插件”是 org.eclipse.wst.command.env.ui，但我找不到这个包的源文件。 ..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T15:44:22.277

Eclipse 中有一个简洁的工具，用于检查特定功能（例如向导或视图）的来源。只需关注您要检查的内容，然后按 ALT+SHIFT+F1。您将看到一个弹出窗口，其中包含有关您的选择的信息，包括哪个插件提供了它。

# javascript - Sencha Touch 2：在选项卡面板中创建嵌套列表

> ID：11210909
> 
> 赞同：1
> 
> 时间：2012-06-26T15:37:34.290
> 
> 标签：javascript, sencha-touch-2, nested-lists

我现在已经尝试了上千种不同的方式来实现这一点，Sencha Touch 文档远非清晰或有帮助，而且每个人似乎都以不同的方式来做......其中没有一个对我有用。

我设法让列表视图以下列方式工作：

```
Ext.define("MyApp_eComm.view.Products", {
extend: 'Ext.navigation.View', //Needs to be navigation view to display the     ProductList.js
xtype: 'products',

requires: [
    'Ext.dataview.List',
    'MyApp.view.ProductList',
    'MyApp_eComm.view.ProductDetail'
],

config: {
    title: sMY_CONST_TAB_BROWSE_TITLE,
    iconCls: sMY_CONST_TAB_BROWSE_CLASS,

    styleHtmlContent: true,
    scrollable: true,

    items: [ 
        /*{
            xtype: 'titlebar',
            docked: 'top',
            title: sMY_CONST_TAB_BROWSE_SUBTITLE
        },*/
        {
            xtype: 'productlist',
            title: sMY_CONST_TAB_BROWSE_SUBTITLE
        }
    ]
}  
}) 
```

这是我的列表视图，位于导航视图内……在选项卡面板内。我使用导航视图的原因是我可以将产品详细信息视图从公开组件推到顶部。

```
Ext.define("MyApp.view.ProductList", {
extend: 'Ext.List',
xtype: 'productlist',

requires: [
    'MyApp.store.ProductStore'
],

config: {
    itemTpl: '{text}', 
    store: 'ProductStore',
    onItemDisclosure: true 
}
}); 
```

这是我的模型：

```
Ext.define('MyApp.model.ProductListModel', {
extend: 'Ext.data.Model', 

config: {
    fields: ['text']
}
}); 
```

最后，这是我的商店，里面有测试数据，目前没有嵌套：

```
Ext.define('MyApp.store.ProductStore', {
extend: 'Ext.data.Store',

config: {
    model: 'MyApp.model.ProductListModel',
    sorters: 'text',
    data: [
        {
            text: 'Burgers',
        },
        {
            text: 'Pasta',
        },
        {
            text: 'Sausages',
        },
        {
            text: 'Cabbage',
        },
        {
            text: 'Lettuce',
        },
        {
            text: 'Marmalade',
        },
        {
            text: 'Honey',
        },
        {
            text: 'Yogurt',
        },
        {
            text: 'Cheese',
        },
        {
            text: 'Milk',
        },
        {
            text: 'Bread',
        },
        {
            text: 'Butter',
        },
        {
            text: 'Goats Milk',
        },
        {
            text: 'Apple',
        },
        {
            text: 'Oranges',
        },
        {
            text: 'Bananas',
        },
        {
            text: 'Jelly',
        },
        {
            text: 'Spagetti Hoops',
        },
        {
            text: 'Ravioli',
        },
        {
            text: 'Wheatabix',
        },
        {
            text: 'Cornflakes',
        },              

    ]
}
}); 
```

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-06-26T16:22:49.420

尝试添加

```
config: {
  title: sMY_CONST_TAB_BROWSE_TITLE,
  iconCls: sMY_CONST_TAB_BROWSE_CLASS,

  styleHtmlContent: true,
  scrollable: true,

  items: 
    {
        xtype: 'productlist',
        title: sMY_CONST_TAB_BROWSE_SUBTITLE
    }

} 
```

# accessibility - 监控仅键盘行为

> ID：11210912
> 
> 赞同：1
> 
> 时间：2012-06-26T15:37:38.207
> 
> 标签：accessibility, keyboard-events

你可以很容易地监控鼠标活动，比如 - [http://www.labsmedia.com/clickheat/index.html](http://www.labsmedia.com/clickheat/index.html)

但是如何监控纯键盘用户的键盘活动呢？我想了解更多只有键盘的用户如何与 megamenus 交互，我想知道他们是否能够直观地学习新行为（在 tab 和箭头键之间切换）或者他们是否默认使用键盘鼠标解决方案。

在最好的时候弄清楚用户的行为是很棘手的，所以我希望有人对如何确定用户的实际使用有一些想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T10:55:40.653

您可以构建一个 javascript 来捕获所有键盘条目，将这些条目存储在一个数组中，并在您离开页面时进行提交..

[您可以在 wikipedia http://en.wikipedia.org/wiki/Keystroke_logging](http://en.wikipedia.org/wiki/Keystroke_logging)上找到有关键盘记录的更多信息

基于表单抓取：基于表单抓取的键盘记录器通过记录 web 浏览 onsubmit 事件函数来记录 web 表单提交。这会在表单数据通过 Internet 之前记录它并绕过 HTTPS 加密。

# ruby - 从 Vagrant 开始时，乘客停留在前台

> ID：11210913
> 
> 赞同：1
> 
> 时间：2012-06-26T15:37:48.410
> 
> 标签：ruby, linux, ssh, passenger, vagrant

在控制台中，我习惯于输入以下之一：

```
cd /vagrant/project/ && rvm passenger start -p80 -d --user vagrant -e vagrant
cd /vagrant/project/ && rvm passenger start -p80  --user vagrant -e vagrant & 
```

乘客启动并再次给我控制权。

现在，使用 Vagrant，我想进行以下测试：

1.  自动启动Passenger，然后
2.  做其他事情。

但是脚本不能做任何其他事情；它停留在乘客中。

我正在使用[ssh.execute](https://github.com/mitchellh/vagrant/blob/master/lib/vagrant/communication/ssh.rb)，它调用[ssh.shell_execute](https://github.com/mitchellh/vagrant/blob/master/lib/vagrant/communication/ssh.rb)：

```
shell_execute(???? , "cd /vagrant/project/ && rvmsudo passenger start -p80 -d --user vagrant -e vagrant" , false) 
```

有没有人有办法解决吗？或者有谁知道这个问题来自哪里？

* * *

最后我发现了一个 deerty hack，它使它工作：

```
shell_execute(???? , "cd /vagrant/project/ && rvmsudo passenger start -p80 -d --user vagrant -e vagrant </dev/null &>/dev/null" , false) 
```

但我真的不明白。脚本中不再可以访问标准输入。我很好奇，有谁知道标准输入指向哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T22:18:07.143

您可以尝试在分叉过程中执行此操作

```
fork {
  `your command`
} 
```

# wcf - Restful WCF 的可伸缩性问题

> ID：11210919
> 
> 赞同：1
> 
> 时间：2012-06-26T15:37:57.210
> 
> 标签：wcf, sql-server-2008, iis-7, wcf-data-services

嗨，我已经构建了一个简单的 WCF 应用程序，用于从移动应用程序来回查询数据。其他一切正常但是当我尝试上传大型二进制视频上传时，它给了我奇怪的错误，我成功地能够上传高达 3-4 MB 的二进制流，但大于我随机收到以下错误之一

1.

```
<html>

   <BODY>
<FONT face="Helvetica">
<big><strong></strong></big><BR>
</FONT>
<blockquote>
<TABLE border=0 cellPadding=1 width="80%">
<TR><TD>
<FONT face="Helvetica">
<big>Network Error (tcp_error)</big>
<BR>
<BR>
</FONT>
</TD></TR>
<TR><TD>
<FONT face="Helvetica">
A communication error occurred: ""
</FONT>
</TD></TR>
<TR><TD>
<FONT face="Helvetica">
The Web Server may be down, too busy, or experiencing other problems preventing it from responding to requests. You may wish to try again at a later time.
</FONT>
</TD></TR>
<TR><TD>
<FONT face="Helvetica" SIZE=2>
<BR>
For assistance, contact your network support team.
</FONT>
</TD></TR>
</TABLE>
</blockquote>
</FONT>
</BODY>
</html> 
```

2.

```
<html>

<body>

<div id="header"><h1>Server Error</h1></div>

<div id="content">

 <div class="content-container"><fieldset>

  <h2>404 - File or directory not found.</h2>

  <h3>The resource you are looking for might have been removed, had its name changed, or is temporarily unavailable.</h3>

 </fieldset></div>

</div>

</body>

</html> 
```

这是我的 Web.Config

```
<?xml version="1.0"?>
<configuration>
  <system.webServer>
    <security>
      <requestFiltering>
        <requestLimits maxAllowedContentLength="2147483648" />
      </requestFiltering>
    </security>
  </system.webServer>
  <system.web>
    <compilation debug="true" targetFramework="4.0" />
  </system.web>
  <system.serviceModel>
    <serviceHostingEnvironment aspNetCompatibilityEnabled="true" multipleSiteBindingsEnabled="true"/>
   <bindings>
      <webHttpBinding>
        <binding transferMode="Streamed" maxBufferSize="5242880" maxReceivedMessageSize="2147483647" openTimeout="05:25:00" closeTimeout="00:25:00" sendTimeout="00:25:00" receiveTimeout="0:25:00"
                 name="webBinding"
        />
      </webHttpBinding>
    </bindings>
    <services>
       <service behaviorConfiguration="RestBehavior" name="EyePlots.Videos">
        <endpoint address="" behaviorConfiguration="web" binding="webHttpBinding" bindingConfiguration="webBinding"
           contract="EyePlots.IVideos" />
      </service>
</services>
    <behaviors>
      <endpointBehaviors>
        <behavior name="web">
          <webHttp />
        </behavior>
      </endpointBehaviors>
      <serviceBehaviors>
        <behavior name="RestBehavior">
          <serviceMetadata httpGetEnabled="true" />
          <serviceDebug includeExceptionDetailInFaults="true" />
          <serviceThrottling maxConcurrentCalls="100"
    maxConcurrentInstances="100" maxConcurrentSessions="100" />
        </behavior>
      </serviceBehaviors>
    </behaviors>
  </system.serviceModel>
</configuration> 
```

系统的可扩展性可能有问题吗？如果你们愿意，我可以发布我的代码片段吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T15:58:05.767

我认为 4 兆是 IIS 限制。

你设置了吗（IIS7+）

```
<system.webServer>
  <security>
    <requestFiltering>
      <requestLimits maxAllowedContentLength="2147483648" />
    </requestFiltering>
  </security>
</system.webServer> 
```

这是一篇文章，列出了更多尝试打开的节流阀。[上传大文件的 WCF 问题，托管在 IIS 中](https://stackoverflow.com/questions/6317794/wcf-problem-with-uploading-large-file-hosted-in-iis)

# android - 如何在片段中膨胀 LinearLayout？

> ID：11210922
> 
> 赞同：2
> 
> 时间：2012-06-26T15:38:02.870
> 
> 标签：android, android-fragments, android-linearlayout, android-support-library, inflate

我想`LinearLayout`在“onCreateView”方法中将 a 充气到一个片段中。但我总是犯同样的错误：

```
"android.view.InflateException: Binary XML file line #7: Error inflating class fragment" 
```

我`android.support.v4.app.FragmentActivity`在`"libs"`文件夹中使用。

主要活动：

```
public class GeofranceDeptActivity extends FragmentActivity{
    @Override
    public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.dept);

    }
} 
```

主xml文件`dept`：

```
<?xml version="1.0" encoding="UTF-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:orientation="horizontal"
        android:layout_width="match_parent"
        android:layout_height="match_parent">

    <fragment class="dauran.geofrance.DeptFragment"
            android:id="@+id/depts" android:layout_weight="1"
            android:layout_width="0px"
            android:layout_height="match_parent"> 
            </fragment>

    <FrameLayout android:id="@+id/detailsdept" android:layout_weight="1"
            android:layout_width="0px"
            android:layout_height="match_parent" />

</LinearLayout> 
```

片段的类`DeptFragment`：

```
public class DeptFragment extends Fragment implements OnTouchListener{

    Context mContext = getActivity();

    boolean mDualPane;

    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        if (container == null) {
              return null;
            }

    return (LinearLayout)inflater.inflate(R.layout.dept_fragment, container, false);
        }

    @Override
    public void onActivityCreated(Bundle savedState) {
        ................etc 
```

`dept_fragment`我要膨胀的 xml 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
     android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
     android:layout_width="fill_parent"
     android:layout_height="fill_parent"
     android:orientation="vertical" >
    <ImageView
        android:id="@+id/targetDeptImage"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:src="@drawable/region_france_grand" />

    <ImageView
        android:id="@+id/cacheDeptImage"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:src="@drawable/region_france_grand" />
    <Spinner
        android:id="@+id/sDepartement"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentLeft="true"
        android:layout_alignRight="@+id/targetImage" />

</RelativeLayout>
</LinearLayout> 
```

`Logcat`: _

```
06-26 19:02:27.940: E/AndroidRuntime(11993): FATAL EXCEPTION: main
06-26 19:02:27.940: E/AndroidRuntime(11993): java.lang.RuntimeException: Unable to start activity ComponentInfo{dauran.geofrance/dauran.geofrance.GeofranceDeptActivity}: android.view.InflateException: Binary XML file line #7: Error inflating class fragment
06-26 19:02:27.940: E/AndroidRuntime(11993):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
06-26 19:02:27.940: E/AndroidRuntime(11993):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
06-26 19:02:27.940: E/AndroidRuntime(11993):    at android.app.ActivityThread.access$600(ActivityThread.java:123)
06-26 19:02:27.940: E/AndroidRuntime(11993):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
06-26 19:02:27.940: E/AndroidRuntime(11993):    at android.os.Handler.dispatchMessage(Handler.java:99)
06-26 19:02:27.940: E/AndroidRuntime(11993):    at android.os.Looper.loop(Looper.java:137)
06-26 19:02:27.940: E/AndroidRuntime(11993):    at android.app.ActivityThread.main(ActivityThread.java:4424)
06-26 19:02:27.940: E/AndroidRuntime(11993):    at java.lang.reflect.Method.invokeNative(Native Method)
06-26 19:02:27.940: E/AndroidRuntime(11993):    at java.lang.reflect.Method.invoke(Method.java:511)
06-26 19:02:27.940: E/AndroidRuntime(11993):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
06-26 19:02:27.940: E/AndroidRuntime(11993):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
06-26 19:02:27.940: E/AndroidRuntime(11993):    at dalvik.system.NativeStart.main(Native Method)
06-26 19:02:27.940: E/AndroidRuntime(11993): Caused by: android.view.InflateException: Binary XML file line #7: Error inflating class fragment
06-26 19:02:27.940: E/AndroidRuntime(11993):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:697)
06-26 19:02:27.940: E/AndroidRuntime(11993):    at android.view.LayoutInflater.rInflate(LayoutInflater.java:739)
06-26 19:02:27.940: E/AndroidRuntime(11993):    at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
06-26 19:02:27.940: E/AndroidRuntime(11993):    at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
06-26 19:02:27.940: E/AndroidRuntime(11993):    at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
06-26 19:02:27.940: E/AndroidRuntime(11993):    at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:251)
06-26 19:02:27.940: E/AndroidRuntime(11993):    at android.app.Activity.setContentView(Activity.java:1835)
06-26 19:02:27.940: E/AndroidRuntime(11993):    at dauran.geofrance.GeofranceDeptActivity.onCreate(GeofranceDeptActivity.java:10)
06-26 19:02:27.940: E/AndroidRuntime(11993):    at android.app.Activity.performCreate(Activity.java:4465)
06-26 19:02:27.940: E/AndroidRuntime(11993):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
06-26 19:02:27.940: E/AndroidRuntime(11993):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
06-26 19:02:27.940: E/AndroidRuntime(11993):    ... 11 more
06-26 19:02:27.940: E/AndroidRuntime(11993): Caused by: java.lang.IllegalStateException: Fragment dauran.geofrance.DeptFragment did not create a view.
06-26 19:02:27.940: E/AndroidRuntime(11993):    at android.support.v4.app.FragmentActivity.onCreateView(FragmentActivity.java:293)
06-26 19:02:27.940: E/AndroidRuntime(11993):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:669) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T16:13:15.777

`Logcat`可能比*android.view.InflateException: Binary XML file line #7: Error inflating class fragment*说的更多（检查下面是否没有实例化异常，也许你可以添加完整的异常？）。查看您的代码后，我会假设您`DeptFragment`不在`dauran.geofrance`包中，并且由于这个 android 无法找到它。

`null`此外，无需测试`container`参数：

```
public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
    return inflater.inflate(R.layout.dept_fragment, container, false);
} 
```

此外，我不认为需要用`RelativeLayout`a包装：`LinearLayout``R.layout.deptfragment`

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
     android:layout_width="fill_parent"
     android:layout_height="fill_parent">
    <ImageView
        android:id="@+id/targetDeptImage"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:src="@drawable/region_france_grand" />

    <ImageView
        android:id="@+id/cacheDeptImage"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:src="@drawable/region_france_grand" />
    <Spinner
        android:id="@+id/sDepartement"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentLeft="true"
        android:layout_alignRight="@+id/targetImage" />

</RelativeLayout> 
```

# c - 命名管道权限位

> ID：11210923
> 
> 赞同：1
> 
> 时间：2012-06-26T15:38:09.983
> 
> 标签：c, unix, named-pipes

我正在编写一个简单的 C 程序来通过 linux 上的命名管道交换消息。问题是我必须以超级用户身份运行它才能使其工作，否则我会得到：“权限被拒绝”错误。授予目录的写权限：

```
drwxr-xr-x 2 alpa alpa  4096 26 giu 17.24 . 
```

Umask应该没问题：

```
$ umask
0022 
```

管道文件实际上是创建的，但是权限位**错误：**

```
$ ls -l | grep fifo.fifo
pr----x--t 1 alpa alpa     0 26 giu 17.29 fifo.fifo 
```

因此，当我尝试打开它以读取或写入 open() 系统调用失败。

这是代码：

```
...
if(mkfifo(pathname, perms) == -1 && errno != EEXIST)
  return NULL;
if(chmod(pathname, perms) == -1)
    return NULL;
...
fifo->fd[0]= open(fifo->pathname, O_RDONLY);
 if(fifo->fd[0] == -1){
fifo_delete(&fifo);
  return NULL;
... 
```

预先感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T16:01:42.550

您传递的值是 decimal `666`，对应于八进制`01232`（`01210`应用后`~umask`）。

您应该通过`0666`, 或 decimal `438`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T15:51:28.580

这不是因为您正在创建只读fifo吗？我看不到您的代码段中 mkfifo 调用的参数是什么。但是'man 3 mkfifo'说的是：

> 它由进程的umask以通常的方式修改：创建文件的权限为（mode & ~umask）。

因此，请确保模式正确，因为 umask 在这里只是一个限制因素。

# c# - C# XNA 2D 碰撞检测与推回？

> ID：11210924
> 
> 赞同：0
> 
> 时间：2012-06-26T15:38:16.383
> 
> 标签：c#

有谁知道任何涵盖碰撞检测和推回效果的好教程，当两个物体发生碰撞时，它们会被推回各自的方向？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T15:53:06.117

当发生碰撞时，您需要反转方向，这可以通过以下方式完成：

```
Direction.X *= -1; 
```

然后分配：

`Position += Direction;`

一个简单的谷歌搜索将提供大量的结果。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-26T15:52:49.747

我真的很喜欢[Asteroid Belt Assault](http://my.safaribooksonline.com/book/-/9781849690669/asteroid-belt-assault-lost-in-space/ch04#X2ludGVybmFsX0ZsYXNoUmVhZGVyP3htbGlkPTk3ODE4NDk2OTA2NjkvY2gwNGx2bDFzZWMyMQ==)（你必须注册或试用）。小行星以非常逼真的方式相互反弹。

# javascript - Javascript：通过在while循环中推送/拼接来随机化数组

> ID：11210928
> 
> 赞同：0
> 
> 时间：2012-06-26T15:38:22.280
> 
> 标签：javascript, arrays, random, while-loop, splice

我正在尝试随机化包含 HTML 元素的 Javascript 数组。这是我到目前为止所拥有的，但不幸的是，之后我仍然得到了几个重复项。我看不出这段代码有什么问题。任何想法，任何人？

```
function randomizeArray(theArray)
        {
            var result = new Array();
            var randomNr;
            while ( theArray.length>0 )
            {
                randomNr = Math.floor( (Math.random() * theArray.length) );
                result.push( theArray[randomNr] );
                theArray.splice( randomNr, 1);
            }
            return result;
        } 
```

编辑：经过进一步审查，当我用一组数字对其进行测试时，该代码似乎按预期工作。出于某种原因，我的数组仍然重复

*   元素。我没有将元素本身放入数组中，而是使用了元素的 .html() 。在那次小小的修改之后，一切都突然按预期工作了。我仍然不知道为什么会这样，但至少它确实有效:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T16:32:12.323

检查此帖子的最佳答案：[循环中的随机数](https://stackoverflow.com/questions/3053807/random-number-in-a-loop)

语言不同，但原理是一样的。`Math.random()`每次使用的种子编号都是相同的，并导致出现模式，这反过来又会产生你得到的重复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T11:40:58.260

代码按预期工作，问题是我的数组包含元素对象。一旦我将这些对象转换为相应的 html，并将它们用作我的数组中的项目，一切都很好。

# linux - readelf -s 不输出完整的变量名

> ID：11210937
> 
> 赞同：22
> 
> 时间：2012-06-26T15:38:33.260
> 
> 标签：linux, elf, dwarf, readelf

我需要从编译的 c 程序文件中获取全局符号。当我使用该命令时，我使用的是 linux 命令`readelf -s filePath` ，这就是我得到的：

![在此处输入图像描述](../Images/881d6765f7282ac02d70de2fe6a00602.png)

我画了一个蓝色矩形来表明变量名没有正确显示。**他们在 25 个字符后得到修剪。我怎样才能让它显示全名？**

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-06-26T15:41:49.747

添加宽开关：

```
readelf -s --wide pathOfFile 
```

# debugging - 如何使用 Chrome 静默生成 XHR 日志

> ID：11210939
> 
> 赞同：0
> 
> 时间：2012-06-26T15:38:42.163
> 
> 标签：debugging, google-chrome, logging, xmlhttprequest, trace

我想在网站上发现一个“随机”错误。为此，我希望将所有 XHR 请求保存在日志文件中，这是一件非常容易的事情。问题是我不是用户，所以我必须设置别人的机器才能做到这一点。

问题是用户不知道如何使用“开发人员工具”，所以我想要一个工具来跟踪所有内容而不会打扰用户。请记住，此错误可能一天发生一次，在此期间用户可以关闭浏览器并重新打开它。你有什么建议吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-27T10:42:49.077

我认为最好的方法是从您尝试观察的站点内制作日志。
如果您无权访问它，另一种解决方案可能是查找/开发一个浏览器扩展程序，将任何 xhr 记录到本地文件中。

# javascript - 无需在 Chrome 扩展程序中询问即可下载多个图像

> ID：11210941
> 
> 赞同：0
> 
> 时间：2012-06-26T15:38:46.830
> 
> 标签：javascript, jquery, google-chrome, google-chrome-extension, download

我目前正在创建一个 Chrome 扩展程序（主要使用 javascripts），它允许用户抓取网页上的图像并下载它们。我已经完成了链接抓取部分，代码将返回一个数组，如：

```
["http://example.com/image1.jpg","http://example.com/image2.jpg"] 
```

但是如何一键下载所有链接？我尝试在新选项卡上列出所有照片，并让用户按 Ctrl+S 保存页面。但这极大地影响了 UI，我不喜欢它。我不托管网页，因此服务器端脚本可能无法正常工作。还有其他解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T19:36:25.147

据我所知，Chrome 扩展在技术上无法像 Firefox 那样将文件保存到磁盘。

这样做的唯一方法是使用[NPAPI](http://developer.chrome.com/extensions/npapi.html) 不幸的是，由于安全问题，使用 npapi 的扩展很可能不会被 Web Store 接受。当然，如果您自己使用它或在您的网站上托管扩展程序，那也可以。

您可以安装和检查以下扩展的代码，也许您甚至可以使用提供的 npapi：

屏幕截图（由 Google 提供）[https://chrome.google.com/webstore/detail/cpngackimfmofbokmjmljamhdncknpmg](https://chrome.google.com/webstore/detail/cpngackimfmofbokmjmljamhdncknpmg)

Chrome 工具箱（由 Google 提供）[https://chrome.google.com/webstore/detail/fjccknnhdnkbanjilpjddjhmkghmachn](https://chrome.google.com/webstore/detail/fjccknnhdnkbanjilpjddjhmkghmachn)

很棒的屏幕截图：捕获和注释[https://chrome.google.com/webstore/detail/alelhddbbhepgpmgidjdcjakblofbmce](https://chrome.google.com/webstore/detail/alelhddbbhepgpmgidjdcjakblofbmce)

下载助手（由 Google 提供）- 我猜是被杀了。

# iphone - 多次点击后退按钮时应用程序崩溃

> ID：11210949
> 
> 赞同：0
> 
> 时间：2012-06-26T15:39:02.103
> 
> 标签：iphone

应用程序崩溃和消息是程序接收到的信号“EXC_BAD_ACCESS”，当故意多次按下倒带按钮以测试 iPhone 设备上的应用程序时。

```
-(void)rewind:(id)sender{
[timer invalidate];
audioPlayer.currentTime = 0;
MainViewController *viewController = [[MainViewController alloc] init];
viewController.view.frame = CGRectMake(0, 0, 320, 480);
[self.view addSubview:viewController.view]; 
[self.view addSubview:toolbar];
[viewController release];
[self playpauseAction:_playButton];
}

-(void)playpauseAction:(id)sender {
if([audioPlayer isPlaying])
{
    [sender setImage:[UIImage imageNamed:@"Play Icon.png"] forState:UIControlStateSelected];
    [audioPlayer pause];
    [self pauseTimer];
    [self pauseLayer:self.view.layer];

}else{
    [sender setImage:[UIImage imageNamed:@"pause.png"] forState:UIControlStateNormal];
    [audioPlayer play];
    [self resumeTimer];
    [self resumeLayer:self.view.layer];

    if(isFirstTime == YES)
    {
        self.timer = [NSTimer scheduledTimerWithTimeInterval:11.0
                                                      target:self
                                                    selector:@selector(displayviewsAction:)
                                                    userInfo:nil
                                                     repeats:NO];
        isFirstTime  = NO;
    }
    } 
    }

 -(void)pauseTimer{
pauseStart = [[NSDate dateWithTimeIntervalSinceNow:0] retain];

previousFireDate = [[timer fireDate] retain];

[timer setFireDate:[NSDate distantFuture]];
  }

-(void)resumeTimer{
float pauseTime = -1*[pauseStart timeIntervalSinceNow];

[timer setFireDate:[previousFireDate initWithTimeInterval:pauseTime sinceDate:previousFireDate]];
}

 -(void)resumeLayer:(CALayer*)layer
 {
CFTimeInterval pausedTime = [layer timeOffset];
layer.speed = 1.0;
layer.timeOffset = 0.0;
layer.beginTime = 0.0;
CFTimeInterval timeSincePause = [layer convertTime:CACurrentMediaTime() fromLayer:nil] - pausedTime;
layer.beginTime = timeSincePause;
 }

 -(void)pauseLayer:(CALayer*)layer
{
CFTimeInterval pausedTime = [layer convertTime:CACurrentMediaTime() fromLayer:nil];
layer.speed = 0.0;
layer.timeOffset = pausedTime;
 } 
```

我不知道为什么它崩溃可能是因为恢复计时器或者可能是因为我释放的视图控制器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T15:46:40.950

Why do you alloc and init your MainViewController inside of your rewind function? that seems odd to me, normally you only need to initialize your viewcontroller once, not every time a method is called. And similarly, you release it at the end of the method, which is also strange. Generally errors that take multiple clicks to be caused are caused by memory management problems. I'm guessing that something is being removed from memory (possibly your view controller) and then you are trying to access it, giving you a bad access error.

To debug this, use NSZombies, which allows you to see what was removed from memory. A tutorial of how to use it can be found [here](http://www.touch-code-magazine.com/how-to-debug-exc_bad_access/)

# javascript - Ajax 获取新页面

> ID：11210950
> 
> 赞同：0
> 
> 时间：2012-06-26T15:39:03.090
> 
> 标签：javascript, jquery, ajax, load

有一个脚本可以再次运行加载的javascript吗？

我的问题是当我通过 Ajax(jquery) 加载页面时。我将页面加载到正文。加载的内容没问题，但 javascript 不再运行。

示例：页面->单击按钮->重新加载正文内容->内容是数据表，仅此而已（保留javascript）。

这个问题有什么解决方案吗？

# java - 如何在 android 中捕获 UnknownHostException？

> ID：11210951
> 
> 赞同：2
> 
> 时间：2012-06-26T15:39:05.883
> 
> 标签：java, android, http-post, httpclient

我正在使用 HttpClient 发布然后在 Android 中检索某些内容，效果很好，但是当我没有互联网连接时，它会强制关闭，他们是在制作 HttpPost 时捕获 UnknownHostException 的一种方法吗？我知道在发出请求之前我可以确保它已连接到互联网，但如果手机没有服务怎么办？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-26T15:46:54.430

**UnknownHostException**是[IOException](http://developer.android.com/reference/java/io/IOException.html)的子类，因此您应该能够捕获/管理它，只需捕获 IOException 或更具体的东西（NoRoute、ConnectTimeout 等）

还可以考虑在进行网络调用**之前**添加连接检查`ConnectivityManager`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-26T15:46:06.817

你可以检查你的互联网连接

```
 ConnectivityManager cm = (ConnectivityManager)this.getSystemService(Context.CONNECTIVITY_SERVICE);
            if (cm.getNetworkInfo(ConnectivityManager.TYPE_MOBILE).isConnected() || cm.getNetworkInfo(ConnectivityManager.TYPE_WIFI).isConnected()) {
                    //connected
            } else {
                    //not connected
            } 
```

并在 AndroidManifest 中设置权限

```
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/> 
```

# sql-server - 触发器处理 SQL Server

> ID：11210952
> 
> 赞同：0
> 
> 时间：2012-06-26T15:39:14.650
> 
> 标签：sql-server, tsql

我正在开发一个拍卖网络应用程序。

所有拍卖都有一个结束日期。在那段时间结束时，将根据算法确定获胜者。

我正在尝试找到一种方法来在结束日期时间之后立即确定获胜者。

我可以安排一个代理每隔一段时间完成这项工作。但我喜欢在结束日期时间结束后立即开始该过程。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T16:43:00.283

SQL Server 有一个叫做 Service Broker 的东西。我认为您可以安排一个作业每隔几秒钟运行一次，以确定哪些记录需要计算算法并将它们发送到服务代理进行处理。处理可能包括计算获胜者，通知获胜者和将物品拍卖的人等。阅读 Bookds Online 中的 Service Broker，我认为这对于您需要做的事情非常方便。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T16:22:35.573

安排代理工作在拍卖结束日期后一点点触发。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T16:24:56.593

您的最佳选择可能是定期检查结束拍卖的 .Net 应用程序，但您也可以使用每 5 分钟运行一次的作业，检查在接下来的 5 分钟内结束的任何拍卖，并使用 WAITFOR DELAY 触发 WinnerAlgorithm proc修饰符。该作业将需要能够触发多个异步作业，以捕获在该 5 分钟时间范围内结束的每个拍卖：

```
SELECT ID FROM Auction WHERE AlgorithmIsSet = 0 and AuctionEnd < DATEADD(minute, 5, GETDATE()); -- to pull the ones you need to process

UPDATE Auction SET AlgorithmIsSet = 1 WHERE ID = 12345; -- to mark that this one is taken care of.
WAITFOR DELAY "00:04:23"; -- the exact time until the auction ends - you'll need to construct this from DATEDIFF(second, AuctionEnd, GETDATE())
EXEC WinnerAlgorithm; -- after the wait time, the auction is closed and the winner determined. 
```

这使得该过程在拍卖结束后立即运行。我会让这项工作相当有规律地运行，比如每五分钟一次，如果代理服务停止运行或机器重新启动，那么第一个 SELECT 语句将提取任何尚未处理的内容。只要您在出价上加上时间戳，您就可以在事后重建获胜者。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T17:20:01.577

拍卖结束时确定获胜者。您的问题暗示您想在拍卖结束时*做一些事情，例如通知获胜者。*

将投标插入数据库的应用程序，或者可能是 Windows 服务，可以维护一个计时器设置为在下一次拍卖结束时到期。它唤醒，处理所有已完成的拍卖，确定下一次拍卖到期并再次设置计时器。

# asp.net - ASP.net 如何使用 PokeIn 进行长轮询？

> ID：11210953
> 
> 赞同：0
> 
> 时间：2012-06-26T15:39:15.507
> 
> 标签：asp.net, comet, pokein

如果有一些新消息发送给他，我想做一个通知用户的服务。因此，我想使用一些提供服务器推送能力的 Comet 框架。所以我调查了[PokeIn](http://pokein.com)。

只是想知道一件事。我已经检查了他们在网站上的样本。如果有一些新条目，他们都不会查看数据库来检索新条目。但我猜这只是修改它的问题。

其中一个示例通过在服务器端使用睡眠来实现这种长轮询。因此，如果我使用相同的方法，我可以每 5 秒检查一次数据库是否有任何新条目。然而，这种方法似乎与在客户端使用 javascript 轮询时没有太大不同。

这部分来自一个样本。可以看出，他们在那里睡觉以更新每个人的当前时间。

```
static void UpdateClients()
    {
        while (true)
        {
            //.. code to check database 
            if (CometWorker.ActiveClientCount > 0)
            {
                CometWorker.SendToAll(JSON.Method("UpdateTime", DateTime.Now));
            }
            Thread.Sleep(500);
        }
    } 
```

所以我想知道我应该如何实现消息通知器？似乎上述方法仍然会在服务器端推动巨大的负载需求。消息通知程序的工作方式与发现 Facebook 的方式相同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T00:10:12.710

您不应该以这种方式实现，该示例只能这样实现，因为保持 PokeIn 相关部分很清楚。[您应该按照http://www.codeproject.com/Articles/12335/Using-SqlDependency-for-data-change-events](http://www.codeproject.com/Articles/12335/Using-SqlDependency-for-data-change-events)中提到的那样实现 SQL 部分 ，以便跟踪数据库的更改。

因此，当您有东西要发送时，请调用其中一种 PokeIn 方法进行客户端交付。我不知道，您的应用程序对时间的要求有多少，因为除了反向 ajax 之外，PokeIn 的内部[websocket](http://www.pokein.com/Help/WebSocketFeature.aspx)功能非常容易激活，并且可以非常快速地将消息传递给客户端。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T13:52:15.833

正如@Zuuum 所说，您可以使用数据库执行此操作，但我以不同的方式实现它。

我在 Windows Azure 环境中使用带有 PokeIn 和 EF 的 ASP.NET MVC：

*   我有类似这种方法的*领域事件：*[加强您的领域：领域事件](http://lostechies.com/jimmybogard/2010/04/08/strengthening-your-domain-domain-events/)
*   当有人调用一个动作时，这就是一个[工作单元](http://martinfowler.com/eaaCatalog/unitOfWork.html)
*   如果该 UOW 成功，那么我会引发一个域事件（例如*ChatMessageSent*）
*   我有这些域事件的订阅者，因此他们可以接收事件并将消息转发给 PokeIn 侦听器

我使用这种模式来满足我在游戏网站上的所有实时需求（在游戏中做出动作、动作等），我不想在这里做广告，如果你愿意，可以通过我找到它。

我总是将此模式用作双工通信解决方案，因此每个人都可以通过 PokeIn 获取更新，甚至是调用该操作的用户，因此每个客户端的行为都相同。因此，当有人调用一个动作时，除了成功信号外，它不会返回任何内容。

**下一个示例将不起作用，因为它们只是演示流程的片段**

这是我的代码中的一个动作片段：

```
[HttpPost]
[UnitOfWork]
[RestrictToAjax]
[ValidateAntiForgeryToken]
public JsonResult Post(SendMessageViewModel msg) 
{ 
    if (ModelState.IsValid)
    {
        var chatMessage = new ChatMessage
        {
            ContainerType = msg.ContainerType,
            ContainerID = msg.ContainerID,
            Message = _xssEncoder.Encode(msg.Message),
            User = _profileService.CurrentUser
        };

        _chatRepository.AddMessage(chatMessage);
        OnSuccessfulUoW = () => EventBroker.Current.Send(this, new ChatMessageSentPayload(chatMessage));
    }

    return Json(Constants.AjaxOk);
} 
```

以及（简化的）EventBroker 实现：

```
public class UnityEventBroker : EventBroker
{
    private readonly IUnityContainer _container;

    public UnityEventBroker(IUnityContainer container)
    {
        _container = container;
    }

    public override void Send<TPayload>(object sender, TPayload payload)
    {
        var subscribers = _container.ResolveAll<IEventSubscriber<TPayload>>();
        if (subscribers == null) return;
        foreach (var subscriber in subscribers)
        {
            subscriber.Receive(sender, payload);
        }
    }
} 
```

还有更简化的订阅者：

```
public class ChatMessageSentSubscriber : IEventSubscriber<ChatMessageSentPayload>
{
    public void Receive(object sender, ChatMessageSentPayload payload)
    {
        var message = payload.Message;
        var content = SiteContent.Global;

        var clients = Client.GetClients(c => c.ContentID == message.ContainerID && c.Content == content)
                            .Select(c => c.ClientID)
                            .ToArray();

        var dto = ObjectMapper.Current.Map<ChatMessage, ChatMessageSentDto>(message);

        var json = PokeIn.JSON.Method("pokein", dto);
        CometWorker.SendToClients(clients, json);
    }
} 
```

# ios - 即使在删除应用程序缓存后，旧版本的图像也会出现在 iPhone 模拟器中

> ID：11210954
> 
> 赞同：1
> 
> 时间：2012-06-26T15:39:18.020
> 
> 标签：ios, xcode, macos, ios-simulator

我想不通这个。我有一个仅适用于 iPhone 的应用程序，其中包含一个图像 -- location.png -- 自启动应用程序以来已经有两个版本。当我为我的实际手机构建应用程序时，我得到了新版本的图像。但是，当我为模拟器构建它时，会显示旧版本的图像。

我以前处理过这种类型的事情，通常我如何解决它是通过从`~/Library/Application Support/iPhone Simulator/X.X/Applications/`. 直到现在，这一直有效，当我多次删除该缓存后仍然得到那个讨厌的图像时。这并不是什么大不了的事，我只是想知道如何为了我自己的理智而摆脱它（或者以防万一我将来需要在更重要的情况下再次这样做）。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T15:56:56.647

[根据Msencenb](https://stackoverflow.com/users/482255/msencenb)的建议，我执行了 Clean (Product -> Clean in Xcode) ，并解决了问题。如果其他人有同样的问题，我会留下这个问题。

# sql - SQL 更新表从其他表中选择

> ID：11210960
> 
> 赞同：1
> 
> 时间：2012-06-26T15:39:33.450
> 
> 标签：sql

我想更新我的表 ORDRE 的多个值？

表 ORDRE

```
CP   INSEE  What
--   -----  ----
1    null   Cake
2    null   Coki
3    null   Lopi 
```

表 TheINSEE

```
 CP   INSEE
  --   -----
  1    a
  2    b
  3    c 
```

怎样才能更新我的表顺序得到这样的？

```
CP   INSEE  What
--   -----  ----
1    a      Cake
2    b      Coki
3    c      Lopi 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T15:43:56.823

你可以这样做：

```
update ORDRE
set o.INSEE = i.INSEE
from ORDRE o
inner join TheINSEE i on i.CP = o.CP 
```

# c# - 为 NxBRE 的单元测试设置配置路径

> ID：11210961
> 
> 赞同：1
> 
> 时间：2012-06-26T15:39:38.193
> 
> 标签：c#, .net, unit-testing, configuration, nxbre

在我开始在我正在处理的规则引擎项目中引用它的实现之前，我正在尝试为 NxBRE 运行一些单元测试。我正在使用 NUnit 2.6 版本来测试 NxBRE 3.2。由于 NxBRE 在它自己的使用 NUnit.Framework 的友好项目文件夹中附带了它自己的单元测试，所以我认为它会是一个快速的一二。在确保所有内容都编译后，我继续运行测试......并得到了一百万个错误。主要是这样的：

> NxBRE.Test.FlowEngine.TestBackwardChainer.CircularityDetection：SetUp：System.IO.FileNotFoundException：找不到文件“C:\car-loan-rules.xbre”。

或者：

> NxBRE.Test.InferenceEngine.TestEngineCoreFeaturesRuleML091.TestEngineCoreFeaturesRuleML09.NxBREOperators：System.IO.FileNotFoundException：找不到文件“C:\test-0_91.ruleml”。

不知所措，我去了 NxBRE 网站并查找有关他们的单元测试的信息。这就是我能找到的全部：http: [//sourceforge.net/apps/trac/nxbre/wiki/UnitTesting](http://sourceforge.net/apps/trac/nxbre/wiki/UnitTesting)

这并没有非常具体地描述该过程。如何配置引擎以使路径指向测试规则库的正确位置？这是我必须在 NUnit 中做的事情吗？还是在我的 IDE (SharpDevelop) 中？另外，我知道输出文件夹在哪里，但我如何计算我需要在那里复制哪些 Dtd 或 Xml 文件？这可能暴露了我的经验不足，这就是你们的专业知识将不胜感激的地方。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T15:51:24.813

好吧，我想通了——基本上，单元测试被预先设置为查看不存在的位置，实际上与 NxBRE 捆绑在一起的是 pdf，它定义了需要定义的字段才能运行.

# java - 基于 Spring 注解的表单验证

> ID：11210964
> 
> 赞同：1
> 
> 时间：2012-06-26T15:39:46.490
> 
> 标签：java, spring, validation, spring-mvc, annotations

我正在使用基于 Springs 注释的表单验证（主要是 @NotBlank 和 @Length），效果很好。我将 formbean 传递给验证方法，如下所示：

```
validate(formBean, result); 
```

我有几个注释附加到各种表单字段，除了一个之外，它们正在按预期进行验证。

我在表单 bean 中的一个字段声明如下：

```
private EntriesBean entries; 
```

该字段显然是指具有通常的 getter 和 setter 的 bean。此 bean 中的几个字段也附加了验证注释，但它们不像其他字段那样作为 validate() 方法调用的一部分进行验证。这是否与这个 bean 被另一个 bean 引用而不是直接来自调用 validate() 的方法有关？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T17:13:04.607

您可以通过这种方式验证您的“条目”字段：

```
@Valid
private EntriesBean entries; 
```

这将使 Hibernate 验证器级联该 bean 中的验证

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T10:12:44.107

回答了我自己的问题。

阅读非常冗长的文档，我可以看到这样做的方法是使用 BindingResult 对象的 pushNestedPath() 和 popNestedPath() 方法，如下所示：

```
 result.pushNestedPath("entries");
    validator.validate(form.getEntries(), result);
    result.popNestedPath(); 
```

我不喜欢这种方式，因为它看起来很乱，但它确实有效，看起来

# android - 在 monodroid 中获得可绘制对象？

> ID：11210966
> 
> 赞同：0
> 
> 时间：2012-06-26T15:39:48.003
> 
> 标签：android, xamarin.android

我正在使用此代码来获取可绘制对象并在`SetCompoundDrawablesWithIntrinsicBounds`调用中使用：

```
Drawable d = Resources.System.GetDrawable(Resource.Drawable.navigable_icon);
textView.SetCompoundDrawablesWithIntrinsicBounds(null,null,d,null); 
```

问题是，当调用该`GetDrawable`方法时，我总是得到一个异常说明：

> Android.Content.Res.Resources+NotFoundException：资源 ID 0x7f020009

与我在目录`drawable`中的 xml 中使用的任何其他内容一样存在。`drawable`有人能猜到发生了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T15:49:04.493

你是从哪里打电话来的？

据我所见，Resources 类没有 System 属性，并且智能感知告诉我这是获取 Drawable 的方法：

```
var drawable = Resources.GetDrawable(Resource.Drawable.navigable_icon);
textView.SetCompoundDrawablesWithInstrinsicBounds(null,null,drawable,null); 
```

# ruby-on-rails-3 - Rails 路线可以捕获除资产之外的所有内容

> ID：11210971
> 
> 赞同：0
> 
> 时间：2012-06-26T15:40:01.850
> 
> 标签：ruby-on-rails-3

我正在尝试允许管理员在根路径上创建页面。到目前为止，我有：

```
get ':path' => "pages#show" ,:as =>:page, :path => /[^\.]+/ 
```

基本上我试图忽略所有带有点的路径（如.png）。这似乎不起作用，因为一切都被拒绝了（我只希望公共目录中的东西被拒绝，比如字体、图标、图像..）

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-03-06T20:28:05.087

正如我在上面的评论中解释的那样，如果所需的资产不存在，“公共的一切都是由网络服务器直接呈现的”是不正确的。这将导致你的包罗万象的路线捕捉到这种不受欢迎的副作用。正如我所解释的，这可能会导致许多问题。因此，需要一个特定的包罗万象的路线来弥补这一点：

```
get ':path' => "pages#show", :as => :page, :constraints => lambda{|req| req.path !~ /\.(png|jpg|js|css)$/ } 
```

您可以以任何您认为合适的方式操作正则表达式，因为我的目标只是通过向您展示您可以将块传递给 :constraints 选项来让您走上正确的轨道。另外，我不只是测试 req.format ，因为这会排除带有 js 格式标头信息的请求，并导致 catch all 不适用于这些类型的请求（对于 catch-all 来说不是通常的情况，但这无关紧要）。通过使用 req.path 代替，标头信息保持不变/工作，并且路径指示此请求是否被此路由捕获。

我希望这可以帮助你。

测试：要测试你的包罗万象是否真的捕捉到你想要的而不是额外的公共资源，请按照以下步骤操作。首先在 PagesController 中的 catch-all 操作中放置一个调试器。然后向确实存在的公共文件 png/js/css 文件发出请求，例如 localhost:3000/images/example_image.png，它不应该像往常一样击中你的全部内容。现在，将路径更改为不存在的图像， localhost:3000/images/no_image.png 。如果请求没有命中你的调试器，你的 catch-all 没有捕捉到图像文件请求，你的 ALL SET. 如果请求确实命中了您的调试器，则意味着您的 catch-all 正在捕获图像文件请求，这意味着您需要修改 catch-all 中的约束。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-26T15:55:16.423

> 默认情况下，动态段不接受点——这是因为点被用作格式化路线的分隔符。如果您需要在动态段中使用点，请添加一个覆盖它的约束——例如 :id => /[^/]+/ 允许除斜杠之外的任何内容。

[http://guides.rubyonrails.org/routing.html#bound-parameters](http://guides.rubyonrails.org/routing.html#bound-parameters)

因此，只需删除条件即可。不过，这个问题可能还有另一个更好的解决方案。

# python - Python 请求 unicode 错误

> ID：11210973
> 
> 赞同：1
> 
> 时间：2012-06-26T15:40:21.340
> 
> 标签：python, character-encoding, python-requests

我正在使用一个简单的 Python 脚本将文件发布到 PHP 脚本：

```
...
url = "http://example.com/upload.php"
r = requests.post(url, data=data, files=files)
... 
```

我需要捕获响应文本，该文本存储在

```
r.text 
```

但是当响应包含 ASCII 字符（例如图像文件）时，Python 会失败并出现以下错误：

```
content = str(self.content, encoding, errors='replace')
TypeError: unicode() argument 2 must be string, not None 
```

有没有办法避免这个错误？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-26T15:47:27.253

图像等二进制文件没有关联的字符编码。使用`r.content`而不是`r.text`.

# c# - 跟踪 40 多个控制值

> ID：11210974
> 
> 赞同：1
> 
> 时间：2012-06-26T15:40:21.640
> 
> 标签：c#, winforms

我需要以下设计的一些指导。

我有一个包含各种组框的选项卡控件。在组框内，有与该组框相关的特定控件。例如：

![在此处输入图像描述](../Images/9d2c590b9f420ef1cd21a09b1121d878.png)

现在，每当对组框中的任何控件进行更改时，都需要跟踪控件的值，因为在应用程序运行周期结束时，需要将控件数据保存到包含该值的文件中。一个示例文件是：

`HOT_STANDBY_FEATURE_ENABLE [val from control here]`

`HEART_BEAT_DIGITAL_OUTPUT [val from control here]` ……

我想到的一种设计有另一种设计，它只有在控件上发生 ValueChanged 事件时组框表单设置的属性。

**示例代码：**

```
class ConfigurationValues
{
    public int HotStandbyValue { get; set; }
    public int HeartBeatDigitalOutputValue { get; set; }
    //...add all other controls here
} 
```

我看到的缺点是该标签页上有 40 个控件，因此我必须手动键入每个属性。当需要在应用程序运行周期结束时生成文件时，我有一个方法可以获取控件需要的值。

**例子：**

```
private void GenerateFile()
{
    string[] file = 
    "HOT_STANDBY_FEATURE_ENABLE "  + ConfigurationTabSettings.HotStandbyValue;
} 
```

我需要考虑的另一个设计考虑是，每当用户单击“打开配置文件”时，需要将磁盘文件中的值加载到属性中，以便表单可以在启动时获取该数据并填充组框中的控件与他们各自的价值观。

对此设计的任何建议将不胜感激。我知道这不是最有效的方法，也不是最有经验的程序员，所以我可以搜索的任何谷歌关键字也很棒。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T15:47:36.320

您可以 xml 序列化和 xml 反序列化您的 ConfigurationValues 类，而不是编写手动“生成文件”和“读取文件”方法

[http://support.microsoft.com/kb/815813](http://support.microsoft.com/kb/815813)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T15:58:31.910

您需要将控件 Text 或 Value 属性绑定到 ConfigurationValues 类中的属性，例如

```
ConfigurationValues cv = Repository.ReadConfigValues();

numPulseFilterDelay.DataBindings.Add("Value", cv, "PulseFilterDelay");

// Add the rest of your control bindings here 
```

在表单的 btnSave_Click() 上，结束对表单的当前编辑并保存配置值

```
void btnSave_Click(object sender, EventArgs e)
{
    BindingContext[cv].EndCurrentEdit(); // Commits all values to the underlying data source
    Repository.SaveConfigValues(cv);
} 
```

在您的存储库类中，您将需要 Load() 和 Save() 数据的方法。您可以将 XmlSerialization 代码放在这里，或者编写自己的格式（取决于您的要求）

```
public class Repository
{
  public static ConfigurationValues LoadConfigValues()
  {
     var cv = new ConfigurationValues();

     string[] lines = File.ReadAllLines("values.cfg");
     foreach (string cfg in lines)
     {
        string[] nameValue = cfg.Split(new char[] { ' ' } ); // To get label/value

        if (nameValue[0] == "HOT_STANDBY_FEATURE_ENABLE")
          cv.HotStandbyFeatureEnable = nameValue[1];
        else if (nameValue[0] == "SOME_OTHER_PROPERTY")
          cv.SomeOtherProperty = nameValue[2];
        // Continue for all properties
     }

     return cv;
  }

  public static void SaveConfigValues(ConfigurationValues cv)
  {
     var builder = new StringBuilder();
     builder.AppendFormat("HOST_STANDBY_FEATURE_ENABLE {0}\r\n", cv.HostStandbyFeatureEnable);
     // Add the rest of your properties

     File.WriteAllText("values.cfg", builder.ToString());
  }
} 
```

# php - 带有用户表的 PHP/MySQL 网站，需要添加用户组功能

> ID：11210975
> 
> 赞同：0
> 
> 时间：2012-06-26T15:40:31.807
> 
> 标签：php, mysql, sql

我在 PHP 中有一个工作网站，它有一个 MySQL 后端，它有几个用于不同目的的表。该站点基于不同的部分或“环境”，例如错误跟踪器、项目管理等。有一个中央“用户”数据库，其中包含所有用户及其相关详细信息。

在前面提到的每个“环境”中，它们都有自己的一组表，可以在某些字段中指定用户 ID。例如，bugtracker 表有一个名为的列`AssignedTo`，其中包含分配了错误的用户的用户 ID。

这些“用户 ID”列的字段类型（如`AssignedTo`示例）与中央用户表中的字段相同`UserId`，这是一个无符号、零填充的 INT(5) 字段。

现在我有一个来自该站点用户的请求，也允许在某些这些用户 ID 字段中指定用户组。

因此，再次参考`AssignedTo`示例，现在应该可以将错误分配给用户组，而不是特定用户。

关于 PHP 脚本和数据库布局的最佳方法是什么？`UserId`现在我将所有这些字段设置为与中央用户表相同的类型，即 INT(5)。但是，我`UserGroupId`在 UserGroups 表中的字段具有不同的格式，即 INT(3)。

我也可以将此字段设为 INT(5) 字段，但这并不能解决我遇到的第二个问题：如何查看该`AssignedTo`值是针对特定用户还是针对用户组。

我正在考虑让 UserGroupId 字段从 99999 开始并向下计数，而 UserId 字段从 00001 开始并向上计数，因此假设如果`AssignedTo`以 9 开​​头，则它是指一个用户组。但这对我来说似乎不是一个干净的解决方案......

有更好的想法吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T15:50:41.000

我想我明白你想说什么。我有个问题。一个用户可以在多个用户组中吗？

我可能会在错误表中添加一列，说明 AssignedTo 值是指 UserID 还是 UserGroupID。

为用户组创建一个单独的表。

如果用户可以属于多个组，则创建一个关联表，例如：AssociationID、UserID、UserGroupID。

否则如果每个用户只能属于一个组，只需在 Users 表中添加一个 UserGroupID 列

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-19T19:07:25.617

如果我理解正确，我的解决方案是创建两列，而不是让 AssignedTo 列指向用户或用户组。一个指向用户 ID，另一个指向用户组 ID。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-27T14:36:33.463

实际上，工作中的一位同事提出了以下我非常喜欢的解决方案：将字段类型从 INT(5) 更改为 INT(4) `UserId`。`UserGroupId`并将不同的字段`AssignedTo`设置为 INT(5)。现在，在 PHP 代码中，我可以为“UserId”或“UserGroupId”值添加前缀编号，该前缀编号可用于确定该值是引用 UserId 还是 UserGroupId 值。因此，如果该`AssignedTo`字段是“10005”，则表示它是具有“id：0005”的“用户”。此外，为了防止必须更新所有现有记录，在第一个位置具有“0”的值将被视为用户

在这里使用正/负值的优势在于，在用户表和用户组表中，我仍然可以使用可以自动递增的正“Id”字段。据我所知，负值无法自动递增

# javascript - Telerik：从 javascript 获取上传文件的名称

> ID：11210976
> 
> 赞同：0
> 
> 时间：2012-06-26T15:40:33.040
> 
> 标签：javascript, jquery, asp.net-mvc, telerik

我有一个 Telerik 文件选择器，可以像这样上传：

```
<%= Html.Telerik().Upload()
            .Name("attachments")
    %> 
```

然后在javascript中，我想检查文件名是否格式正确。但我不知道如何从上传框中获取文件名。这个

```
var upload = $find("attachments"); 
```

给我空。和这个

```
var upload = $get("attachments"); 
```

给了我一个我不知道如何继续前进的奇怪物体。有人有这方面的经验吗？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T08:04:29.113

您可以为此使用客户端事件。

我使用了 onSuccess 事件，它工作正常。你应该像这样注册（到telerik上传的html助手）；

```
.ClientEvents(events => events
   .OnSuccess("onSuccess")) 
```

然后在你的javascript代码中；

```
function onSuccess(e) {
        switch (e.operation) {
            case "upload":
                console.log('upload --> ' + e.files[0].name);
                break;
            case "remove":
                console.log('remove --> ' + e.files[0].name);
                break;
        }
    } 
```

您还可以从事件参数 (e) 中获得一些其他有用的信息。您可以使用 firebug 等工具进行检查。

您可能需要像这样使用 onSelect 事件，但我认为它的用法与 onSucsess 的工作方式相同。

正如 Jisaak 指出的那样，[telerik 文档](http://demos.telerik.com/aspnet-mvc/razor/upload/clientsideevents)对此有很好的信息。

# iphone - 调用委托方法（iOS）

> ID：11210978
> 
> 赞同：0
> 
> 时间：2012-06-26T15:40:34.540
> 
> 标签：iphone, objective-c, function, delegates, call

首先，我想向您展示我的代码/故事板： ![故事板](../Images/653979571bb30f89d967a2a8e0b90e1e.png)

这是我的故事板：我有一个小 UISlider 和一个 UIView。UIView 是一个自定义视图，他的类是“SquareView”。这是代码：

**SquareView.h**

```
#import <UIKit/UIKit.h>

    @class SquareView;

    @protocol SquareViewDelegate <NSObject>

    -(int)giveMeTheNumbersOfSquare:(SquareView *)squareView;

    @end

    @interface SquareView : UIView

    @property (nonatomic , weak) IBOutlet id<SquareViewDelegate> delegate;

    @end 
```

和**SquareView.m**

```
#import "SquareView.h"

@implementation SquareView
@synthesize delegate;
- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        // Initialization code
    }
    return self;
}
// Only override drawRect: if you perform custom drawing.
// An empty implementation adversely affects performance during animation.
- (void)drawRect:(CGRect)rect
{

    int numberOfSquare = [delegate giveMeTheNumbersOfSquare:self];
    NSLog(@"Value of numberOfSquare in drawRect---> %d" ,numberOfSquare);
    //numberOfSquare = 20;
    for (int i=0; i<numberOfSquare; i++) {
        float x = arc4random() % (int)self.frame.size.width - 20;
        float y = arc4random() % (int)self.frame.size.width - 20;

        UIRectFill(CGRectMake(x, y, 20.0, 20.0));
       // NSLog(@"X---> %f" ,x);
        //NSLog(@"Y---> %f" ,y);
        [self setNeedsDisplay];
    }

    // Drawing code
}
@end 
```

现在 ViewController... ViewController 是 SquareView 的代表。

**视图控制器.h**

```
#import <UIKit/UIKit.h>
#import "SquareView.h"

@interface TestViewController : UIViewController <SquareViewDelegate>

@property (weak) IBOutlet SquareView *squareView;
@property(weak) IBOutlet UISlider *slider;

-(IBAction)changeSquareNumbers:(id)sender;

@end 
```

和**ViewController.m**

```
#import "TestViewController.h"

@interface TestViewController ()
{
    int _squareCount;
}

@end

@implementation TestViewController

@synthesize squareView = _squareView;
@synthesize slider = _slider;

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
}

-(void)awakeFromNib
{
    [_squareView setDelegate:self];
    _squareCount = 50;
    [self.squareView setNeedsDisplay];
}

/********* Delegate Method *********/
-(int)giveMeTheNumbersOfSquare:(SquareView *)squareView
{
    //return _squareCount;
    NSLog(@"Value of _squareCount in giveMeTheNumberOfSquare ---> %d" ,_squareCount);
    return _squareCount;
}

-(IBAction)changeSquareNumbers:(UISlider *)sender
{
    NSLog(@"Value of slider in changeSquareNumbers --> %f" ,[sender value]]);
    _squareCount = (int)[sender value];
    NSLog(@"Value of _sqareCount ---> %d" ,_squareCount);
    [self.squareView setNeedsDisplay];
} 
```

现在...在 SquareView.m 文件中，在 drawRect 函数中，我不知道为什么程序*从不*调用“giveMetheNumbersOfSquare”函数。drawRect 中的“numberOfSquare”保持为 0！！！我不明白为什么程序永远不要进入“giveMeTheNumberOfSquare”函数！！

谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T16:03:05.563

确保代理设置正确。您可能需要分配或初始化您的 squareView。此外，如果您使用的是故事板，您可能不会调用`awakeFromNib`.

# android - 为什么在为 Android 模拟简单的 Hello World 程序时在 Eclipse 中出现空白屏幕？

> ID：11210981
> 
> 赞同：0
> 
> 时间：2012-06-26T15:40:41.583
> 
> 标签：android, eclipse, emulation

我正在关注本教程：http: [//developer.android.com/training/basics/firstapp/running-app.html#Emulator](http://developer.android.com/training/basics/firstapp/running-app.html#Emulator)

其中有一个简单的代码，用于带有文本解析器和按钮的布局。当我在我的 Eclipse 中输入代码并“运行”程序时，我会看到一个空的 Android 手机模拟。手机在屏幕上显示“Android”，我的程序没有运行。请指导我在哪里犯了错误。顺便说一句，我的代码与教程中的代码相同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T15:44:58.580

它正在启动。你只需要等待模拟器启动。它就像真正的 Android 设备一样：需要一段时间才能启动。当它显示桌面时，它将启动您的应用程序。

在慢速机器上可能需要一段**时间**（我的意思是很长一段时间）。我可以建议一个更快/更强的机器，甚至更好，一个真正的 Android 设备，用于测试。

为了获得更好的性能，请不要关闭模拟器窗口，这样它就不必每次都启动。

# jquery - 在 MVC3 中使用 jquery 函数 - '$' 未定义

> ID：11210983
> 
> 赞同：2
> 
> 时间：2012-06-26T15:40:51.810
> 
> 标签：jquery, asp.net-mvc-3, syntax

我为我缺乏 jquery 知识而道歉。我正在使用 jquery 1.6.2，并尝试将 jquery 函数附加到 ActionLink。这是我的jQuery函数：

```
 <script type="text/javascript">
    $("addOperation").click(function () {
       $.ajax({
          url: this.href,
          cache: false,
          success: function (html) { $("#editor_rows").append(html); }
       });
       return false;
    });
    </script> 
```

当我导航到包含脚本的页面时，调试器会返回以下内容：

```
 Microsoft JScript runtime error: '$' is undefined 
```

这是指向“$”的第一次出现。对我来说，这听起来像是没有意识到这是一个 jquery 调用，但我过去没有遇到过这个问题。更不用说，MVC3 应该在应用加载之前捆绑和渲染所有的 jscript 文件。对我有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T15:47:48.730

1.  确保你的 jquery 脚本标签在你的脚本之上。

2.  将您的代码包装在[document.ready](http://api.jquery.com/ready/)事件中：

例如 1

```
 <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
  <script src="/path/to/your.script"></script> 
```

例如 2

```
$(document).ready(function() { 
     //Your code here
}); 
```

或更短：

```
$(function() { 
       //Your code here
}); 
```

这将确保在执行代码之前已加载所有 JavaScript。

# scorm - 从运行时环境数据模型映射到跟踪模型

> ID：11210984
> 
> 赞同：1
> 
> 时间：2012-06-26T15:40:59.887
> 
> 标签：scorm, scorm2004

*   活动一
*   活动二
*   活动 3

假设当前活动是活动 1。活动 1 有一个主要目标。活动 1 设置 cmi.objectives.0.success_status = 通过，它从不设置 cmi.success_status。在这种情况下，在将数据从运行时环境数据模型映射到跟踪模型之后，活动 1 的主要目标的 ObjectiveProgressStatus 和 ObjectiveSatisfiedStatus 设置为 False。实际上，映射后，cmi.success_status 被覆盖在 cmi.objectives.0.success_status 上。这个对吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T19:18:42.690

不，不正确。主要目标不能在运行时直接访问。要在运行时设置其跟踪数据，您必须使用“cmi.success_status”或“cmi.score.scaled”。还有一件事，主要目标以外的地方目标的跟踪数据仅由 SCO 处理，LMS 的作用只是跟踪其状态，而不根据其跟踪数据采取任何行动。主要目标是活动的核心，它保存其跟踪数据。

# php - 在多个 MySQL 表中搜索大量术语的最有效方法是什么？

> ID：11210987
> 
> 赞同：1
> 
> 时间：2012-06-26T15:41:03.620
> 
> 标签：php, mysql, full-text-search

使用可变长度的术语 PHP 数组（即它可能是 50 个术语，也可能是 400 个），在我的数据库中搜索这些术语中的每一个的最有效方法是什么？

我正在尝试进行的搜索非常简单。对于每个学期，我想做：

```
SELECT id, post_title FROM wp_posts WHERE post_title LIKE %term% 
```

显然，我可以`foreach`在 PHP 中运行 a 并运行多个 MySQL 查询，但我认为这非常低效。

我最近尝试过的代码涉及多个`OR`语句，但是使用大约 100 个术语，它似乎运行得很慢。

我不知道这样的事情是否可行？

```
SELECT id, post_title FROM wp_posts WHERE post_title LIKE %term1%, %term2%, %term3%, %term4%, [...] 
```

我可以使用更有效的 SQL 语句，还是应该以不同的方式看待它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T17:50:45.380

Stock MySQL 可以使用

```
MATCH (post_title) AGAINST ('term1 term2 term3 term4') 
```

要进行此搜索，您需要使用将全文索引添加到表中

```
ALTER TABLE wp_posts ADD FULLTEXT INDEX ft_key1(post_title); 
```

这将比 LIKE %term% 快得多，但请注意，全文索引仅在 MyISAM 表中受支持（InnoDB 从 MySQL 5.6 开始支持此语法）。

然而，随着数据的增长，捆绑 MySQL 的搜索速度可能会成为一个问题。在这种情况下，我建议使用外部搜索引擎，如 Solr 或 Sphinx。

如果您决定切换到 Sphinx，您可能需要查看本指南[http://astellar.com/2011/12/replacing-mysql-full-text-search-with-sphinx/](http://astellar.com/2011/12/replacing-mysql-full-text-search-with-sphinx/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T15:45:56.580

Create an additional index holding a single column where you simply concatenate the values of all table columns you want to query during the search. This way you can use a single SELECT query with a LIKE clause to search through all columns at once.

This is often referred to as "full text search".

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T15:47:34.417

Using MySQL the most efficient way is to set up Full-text searching... [http://dev.mysql.com/doc/refman/5.0/en/fulltext-search.html](http://dev.mysql.com/doc/refman/5.0/en/fulltext-search.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T19:27:38.087

我不知道它是否比其他建议更有效，但你也可以这样做

```
SELECT id, post_title FROM wp_posts WHERE FIND_IN_SET(post_title, '%term1%, %term2%, %term3%, %term4%') <> 0 
```

# java - Java大列表入口耦合方法

> ID：11210988
> 
> 赞同：0
> 
> 时间：2012-06-26T15:41:05.430
> 
> 标签：java, sorting, arraylist

**文件：**
我正在使用搜索日志文件的精炼 csv 版本，其中包含 3.3mio 行数据，每行类似于单个查询并包含有关该查询的各种数据。文件中的条目按会话/用户 ID 升序排序。

**目标：**
耦合提交相同查询词但属于相同用户标识的条目

**方法：**
我正在逐行读取 csv 文件，将数据保存在自制的“条目”对象中，并将这些对象添加到数组列表中。完成后，我将使用自定义比较器按两个标准对列表进行排序

**问题：**

在读取行并将条目对象添加到列表时（这需要很长时间），程序以 OutOfMemoryException "Java heap" 终止

* * *

所以看来我的方法在内存（和运行时）上太难了。
有更好方法的想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T15:44:10.440

您的方法本身可能是有效的，也许最简单的解决方案是简单地增加 JVM 可用的内存。

JVM 只会为自己分配最大数量的系统内存，您可以通过`-Xmx`命令行属性增加这个值。有关更多详细信息，请参见[此处](http://www.caucho.com/resin-3.0/performance/jvm-tuning.xtp)。

显然，此解决方案无法扩展，如果（将来）您想要读取更大的文件，那么您可能需要更好的解决方案来读取这些文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T15:44:41.590

您可以使用基于定义重复性的列的索引将已解析的行插入数据库中，而不是对内存中的行进行排序。

另一种方法是在许多文件中分派这些行，例如，每个文件都被命名为定义重复性的连接列的 sha1 的前 2 个字符。因此，您永远不必为最终操作读取多个文件，因为所有副本都将放在一起。

# asp.net-mvc - MVC Grid 的 Kendo UI 如何隐藏 ID 列

> ID：11210989
> 
> 赞同：4
> 
> 时间：2012-06-26T15:41:08.847
> 
> 标签：asp.net-mvc, razor, telerik-mvc, kendo-ui

我想隐藏 Kendo 网格的 ID 列，但仍然可以在其他操作中引用它。我尝试使 Width = 0 但这只会使它变得非常宽。

```
@(Html.Kendo().Grid(Model)
        .Name("LineItems")
        .Columns(columns =>
            {
                columns.Bound(o => o.ID).Width(1);
                columns.Bound(o => o.Ui).Width(20);
                columns.Bound(o => o.QtyOrdered).Width(20);
                columns.Bound(o => o.Nomenclature).Width(200);
                columns.Bound(o => o.QtyShipped).Width(140);
                columns.Bound(o => o.QtyReceived).Width(200);
                columns.Bound(o => o.Hazmat).Width(50);

            }) 
```

**6月26日编辑**

好的，我能够根据剑道论坛的帖子获得合理的解决方案。只要在数据源中定义了 ID，就不必在网格中定义列。您仍然可以访问 ID 值。我写了一个简短的片段来证明它，它在网格中返回没有 ID 列的 ID。

```
<script>
  $(document).ready(function () {
      $("#btn").on("click", function () {

          var grid = $("#LineItems").data("kendoGrid");
          var data = grid.dataSource.data();
          $.each(data, function (i, item) {
              alert(item.ID);
           });
      });
  });
</script> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-18T10:27:11.550

Hidden columns are supported since the Q2 2012 release. You can now use the `Hidden()` setting.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T17:48:41.130

您可以通过 Hidden() 方法使列隐藏。这对你好吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T21:12:57.117

看起来在当前版本中不受支持，他们确实有一个页面，您可以在其中投票以将此功能添加到 Kendo。他们可能已经开始研究它，因为状态确实在大约 13 小时前显示“开始”。

[http://kendo.uservoice.com/forums/127393-kendo-ui-feedback/suggestions/2804580-ability-to-show-hide-columns-in-grid](http://kendo.uservoice.com/forums/127393-kendo-ui-feedback/suggestions/2804580-ability-to-show-hide-columns-in-grid)

[同时，通过将该列的样式设置为http:](http://www.kendoui.com/forums/ui/grid/hide-columns-in-grid-kendo.aspx) //www.kendoui.c​​om/ forums/ui/grid/hide-columns-in-grid-kendo.aspx，一些用户可能会对这篇文章有一些建议`display:none`

# sql-server - 使用 Distinct 从表 A 插入表 B

> ID：11210994
> 
> 赞同：0
> 
> 时间：2012-06-26T15:41:15.973
> 
> 标签：sql-server, sql-server-2008, tsql

我有 2 张桌子

表 A

```
NameID  FirstName  MiddleName  LastName  Addr1  Addr2  Phn1  Phn2  City  State 
NULL      Micheal    Calvin      Dodson    12     23     1234  123  XYZ   ABC    
NULL      John       NULL        Keith     NULL   NULL   2344  NULL SQE   FDG    
NULL      John       NULL        Keith     NULL   NULL   2344  NULL SQE   FDG 
NULL      William    Stephen     NULL      45     NULL   NULL  NULL HJD   ABC
NULL      Victor     NULL        Anthony   NULL   NULL   NULL  NULL NULL  NULL 
```

表 B

```
NameID   FirstName  MiddleName  LastName  Addr1  Addr2  Phn1  Phn2  City State Zip Email Gender... 
```

我需要获取表 A 的 (FirstName,MiddleName,LastName) 的不同记录，并将相同的详细信息以及与表 A 匹配的其他字段插入表 B。我的表 B 将 NameID 作为标识列。因此，在将唯一记录插入表 B 后，我需要获取该 NameID 并将其插入回表 A 中，如下所示：

表A

表 A

```
NameID  FirstName  MiddleName  LastName  Addr1  Addr2  Phn1  Phn2  City  State 
1         Micheal    Calvin      Dodson    12     23     1234  123  XYZ   ABC    
2         John       NULL        Keith     NULL   NULL   2344  NULL SQE   FDG    
2         John       NULL        Keith     NULL   NULL   2344  NULL SQE   FDG 
3         William    Stephen     NULL      45     NULL   NULL  NULL HJD   ABC
4         Victor     NULL        Anthony   NULL   NULL   NULL  NULL NULL  NULL 
```

表 B

```
NameID  FirstName  MiddleName  LastName  Addr1  Addr2  Phn1  Phn2  City State Zip  Email Gender...
1       Micheal    Calvin      Dodson    12     23     1234  123   XYZ   ABC   NULL NULL  NULL
2       John       NULL        Keith     NULL   NULL   2344  NULL  SQE   FDG   NULL NULL  NULL
3       William    Stephen     NULL      45     NULL   NULL  NULL  HJD   ABC   NULL NULL  NULL
4       Victor     NULL        Anthony   NULL   NULL   NULL  NULL  NULL  NULL  NULL NULL  NULL 
```

你能帮我解决这个问题吗？我无法正确获取此查询。SQL Server 2008 中的代码

在此先感谢，
苏尼莎

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T16:50:09.497

```
DECLARE @results TABLE
(
  NameID INT, 
  FirstName VARCHAR(32), -- guessing on data types for these columns 
  MiddleName VARCHAR(32), 
  LastName VARCHAR(32)
);

;WITH x AS 
(
 SELECT FirstName, MiddleName, LastName, 
     rn = ROW_NUMBER() OVER (PARTITION BY FirstName, MiddleName, LastName
      ORDER BY (SELECT NULL)
   ) --, ... other columns ...
   FROM dbo.TableA
)
INSERT dbo.TableB 
(
  FirstName, MiddleName, LastName --, ... other columns ...
)
OUTPUT 
  inserted.NameID, inserted.FirstName, 
  inserted.MiddleName, inserted.LastName
INTO @results
SELECT FirstName, MiddleName, LastName --, ... other columns ...
FROM x WHERE rn = 1;

UPDATE a SET NameID = r.NameID
  FROM dbo.TableA AS a
  INNER JOIN @results AS r
  ON COALESCE(a.FirstName,'') = COALESCE(r.FirstName,'')
  AND COALESCE(a.MiddleName,'') = COALESCE(r.MiddleName,'')
  AND COALESCE(a.LastName,'') = COALESCE(r.LastName,''); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T15:49:16.537

我认为最简单的方法是使用两个查询。第一个问题是处理 TableA 中的重复项。以下查询为每个名称组合选择任意行：

插入 TableB() select () from (select a.*, row_number() over (partition by FirstName, MiddleName, LastName order by FirstName) as seqnum from TableA a ) a where seqnum = 1

然后，更新原始表：

```
update TableA
    set NameId = (select max(NameId) from TableB
                  where TableB.FirstName = TableA.FirstName and
                        TableB.MiddleName = TableA.MiddleName and
                        TableB.LastName = TableA.LastName
                 )
    where NameId is null 
```

如果您的字段包含 NULL 值（而不是空白），则可以将 coalesce() 用于连接条件：

```
update TableA
    set NameId = (select max(NameId) from TableB
                  where coalesce(TableB.FirstName, '<null>') = coalesce(TableA.FirstName, '<null>') and
                        coalesce(TableB.MiddleName, '<null>') = coalesce(TableA.MiddleName, '<null>') and
                        coalesce(TableB.LastName , '<null>')= coalesce(TableA.LastName, '<null>')
                 )
    where NameId is null 
```

# windows - 如何使用 Windows IOCP 检测断开连接 (RST/FIN)？

> ID：11210995
> 
> 赞同：2
> 
> 时间：2012-06-26T15:41:21.350
> 
> 标签：windows, sockets, disconnect, iocp

如何使用 Windows IOCP API 确定 TCP 连接是否被对等方（通过发送 RST 数据包或类似方法）断开？具体来说，我无法发送或接收任何数据——没有重叠的操作正在进行。我只想得到一个异步通知。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T21:01:53.847

您需要有一个读或写挂起来检测连接关闭。两者都将按照 Remy 在 RST 上的建议返回，但在等待读取时，您还将收到远程端何时关闭其连接的发送端的通知。

我建议您始终保持重叠读取待处理，如果您不想占用内存，您可以随时将其设为零字节读取。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T18:51:35.633

您的 IOCP 完成处理程序将收到套接字操作成功或失败的通知。参数告诉你是哪种情况。

如果您正在使用，如果发生任何故障`GetQueuedCompletionStatus()`，它将返回。`FALSE`如果是套接字失败，`*lpOverlapped`则将失败的`OVERLAPPED`操作设置为非 NULL 指针值。如果`GetQueuedCompletionStatus()`本身失败，`*lpOverlapped`将被设置为NULL。如果对等端正常断开连接，它将返回 TRUE 并设置`*lpNumberOfBytes`为 0。

如果您正在使用`WSAgetOverlappedResult()`，如果发生任何故障，它将返回 FALSE。用于`WSAGetLastError()`确定是否是套接字故障。如果对等端正常断开连接，它将返回 TRUE 并设置`*lpcbTrasfer`为 0。

# windows - Windows 控制台 %DATE% 数学

> ID：11210997
> 
> 赞同：9
> 
> 时间：2012-06-26T15:41:25.217
> 
> 标签：windows, date, batch-file, cmd

我想将 Windows 批处理文件中的日期设置为从今天起 7 天前。我想按以下格式执行此操作。

```
set today=%date:~10,4%-%date:~4,2%-%date:~-7,2% 
```

有什么想法可以在这里减去 7 天的时间增量吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-26T17:52:09.713

我前段时间在某个网站上发布了以下描述：

* * *

以下批处理文件将日期转换为儒略日数，反之亦然：

DATETOJULIAN.BAT：

```
@ECHO OFF
REM CONVERT DATE TO JULIAN DAY NUMBER
REM ANTONIO PEREZ AYALA
REM GET MONTH, DAY, YEAR VALUES
FOR /F "TOKENS=1-3 DELIMS=/" %%A IN ("%1") DO SET MM=%%A& SET DD=%%B& SET YY=%%C
REM ELIMINATE LEFT ZEROS
SET /A DD=10%DD% %% 100, MM=10%MM% %% 100
REM CALCULATE JULIAN DAY NUMBER
IF %MM% LSS 3 SET /A MM+=12, YY-=1
SET /A A=YY/100, B=A/4, C=2-A+B, E=36525*(YY+4716)/100, F=306*(MM+1)/10, JDN=C+DD+E+F-1524 
```

朱利安托日期.BAT：

```
REM CONVERT JULIAN DAY NUMBER TO MONTH, DAY, YEAR
REM ANTONIO PEREZ AYALA
SET /A W=(%1*100-186721625)/3652425, X=W/4, A=%1+1+W-X, B=A+1524, C=(B*100-12210)/36525, D=36525*C/100, E=(B-D)*10000/306001, F=306001*E/10000, DD=B-D-F, MM=E-1, YY=C-4716
IF %MM% GTR 12 SET /A MM-=12, YY+=1
REM INSERT LEFT ZEROS, IF NEEDED
IF %DD% LSS 10 SET DD=0%DD%
IF %MM% LSS 10 SET MM=0%MM%
REM SHOW THE DATE
ECHO %MM%/%DD%/%YY% 
```

这样，要在日期中添加/减去天数，请使用以下行：

```
CALL DATETOJULIAN %DATE%
SET /A NEWDATE=JDN+DAYS
CALL JULIANTODATE %NEWDATE% 
```

问候...

参考：http: [//quasar.as.utexas.edu/BillInfo/JulianDatesG.html](http://quasar.as.utexas.edu/BillInfo/JulianDatesG.html)

* * *

如果不是 MM/DD/YYYY，您只需调整日期格式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-01T23:42:05.353

AdamEstrada 询问有关减去日期的问题。由于 Julian 函数中的 SETLOCAL，我很难减去两个 Julian 日期。我通过调用一个函数来做到这一点。

呼叫：sub_Julian ！朱利安！%今天_朱利安%

:sub_Julians

设置 /a delta_dates=%~1-%~2

...

goto:eof ::end:age_of_EPSdate

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-13T03:30:35.333

[我从http://www.robvanderwoude.com/datetimentmath.php](http://www.robvanderwoude.com/datetimentmath.php)稍微重构了`JDate`and子程序的代码。`GDate`

# 使用示例：

```
Enter ISO date:
Enter number of days to add: 7
2017-01-01 + 7 days = 2017-01-08

Enter ISO date:
Enter number of days to add:
2017-01-08 + 7 days = 2017-01-15

Enter ISO date:
Enter number of days to add:
2017-01-15 + 7 days = 2017-01-22

Enter ISO date:
Enter number of days to add:
2017-01-22 + 7 days = 2017-01-29

Enter ISO date:
Enter number of days to add:
2017-01-29 + 7 days = 2017-02-05

Enter ISO date: 2017-02-12
Enter number of days to add: -7
2017-02-12 + -7 days = 2017-02-05 
```

# 代码：

“日期数学.bat”：

```
@echo off

call :main %*
goto :eof

:main
    setlocal

    call :initialize "2017-01-01" "1"

    endlocal
    goto :eof

:initialize
    setlocal
    set "previousDate=%~1"
    set /a "numberOfDays=%~2"

    set /p "previousDate=Enter ISO date: "
    set /p "numberOfDays=Enter number of days to add: "

    set "currentDate="
    call :addIsoDateDays "%previousDate%" "%numberOfDays%" currentDate

    echo %previousDate% + %numberOfDays% days = %currentDate%

    echo.

    call :initialize "%currentDate%" "%numberOfDays%"

    endlocal
    goto :eof

:stripLeadingZero
    setlocal
    set "number=%~1"
    if %number:~0,1% equ 0 (
        set "number=%number:~1%"
    )
    (
        endlocal
        set "%~2=%number%"
    )
    goto :eof

:addLeadingZero
    setlocal
    set "number=%~1"
    if %number% lss 10 (
        set "number=0%number%"
    )
    (
        endlocal
        set "%~2=%number%"
    )
    goto :eof

:gregorianToJulianDate
    setlocal
    set "gregorianYear=%~1"
    set "gregorianMonth=%~2"
    set "gregorianDay=%~3"

    call :stripLeadingZero "%gregorianMonth%" gregorianMonth
    call :stripLeadingZero "%gregorianDay%" gregorianDay

    set /a "julianYear=(%gregorianYear% + 4800)"
    set /a "julianMonth=((%gregorianMonth% - 14) / 12)"
    set /a "julianDate=((1461 * (%julianYear% + %julianMonth%) / 4) + (367 * (%gregorianMonth% - 2 - (12 * %julianMonth%)) / 12) - ((3 * ((%julianYear% + %julianMonth% + 100) / 100)) / 4) + (%gregorianDay% - 32075))"

    (
        endlocal
        set "%~4=%julianDate%"
    )
    goto :eof

:isoToJulianDate
    setlocal
    set "date=%~1"
    set "year="
    set "month="
    set "day="

    for /f "tokens=1-3 delims=-" %%a in ("%date%") do (
        set "year=%%a"
        set "month=%%b"
        set "day=%%c"
    )

    set /a "julianDate=0"
    call :gregorianToJulianDate "%year%" "%month%" "%day%" julianDate

    (
        endlocal
        set "%~2=%julianDate%"
    )
    goto :eof

:julianToGregorianDate
    setlocal
    set /a "julianDate=%~1"

    set /a "p=(%julianDate% + 68569)"
    set /a "q=(4 * %p% / 146097)"
    set /a "r=(%p% - ((146097 * %q%) + 3) / 4)"
    set /a "s=(4000 * (%r% + 1) / 1461001)"
    set /a "t=(%r% - ((1461 * %s%) / 4) + 31)"
    set /a "u=(80 * %t% / 2447)"
    set /a "v=(%u% / 11)"

    set /a "gregorianYear=((100 * (%q% - 49)) + %s% + %v%)"
    set /a "gregorianMonth=(%u% + 2 - (12 * %v%))"
    set /a "gregorianDay=(%t% - (2447 * %u% / 80))"

    call :addLeadingZero "%gregorianMonth%" gregorianMonth
    call :addLeadingZero "%gregorianDay%" gregorianDay

    (
        endlocal
        set "%~2=%gregorianYear%"
        set "%~3=%gregorianMonth%"
        set "%~4=%gregorianDay%"
    )
    goto :eof

:julianToIsoDate
    setlocal
    set /a "julianDate=%~1"

    set "year="
    set "month="
    set "day="

    call :julianToGregorianDate "%julianDate%" year month day

    set "isoDate=%year%-%month%-%day%"

    (
        endlocal
        set "%~2=%isoDate%"
    )
    goto :eof

:addIsoDateDays
    setlocal
    set "previousIsoDate=%~1"
    set /a "numberOfDays=%~2"

    set /a "previousJulianDate=0"
    call :isoToJulianDate "%previousIsoDate%" previousJulianDate

    set /a "currentJulianDate=(%previousJulianDate% + %numberOfDays%)"

    set "currentIsoDate="
    call :julianToIsoDate "%currentJulianDate%" currentIsoDate

    (
        endlocal
        set "%~3=%currentIsoDate%"
    )
    goto :eof 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-11-04T10:01:24.623

调用powershell有一个答案。虽然仍然有机器在没有安装 powershell 的情况下运行（在撰写本文时，XP、Vista、Windows7、Windows2003 和 Windows2008 仍然有下降的操作系统份额，并且没有安装 powershell）

其他选项将在 bat 脚本中使用 jscript

这是`dayAdder.bat`只接受一个参数的 - 您要添加到当前日期并打印结果的天数：

```
 @if (@X) == (@Y) @end /* JScript comment 
    @echo off   
    cscript //E:JScript //nologo "%~f0" %*
    exit /b %errorlevel%       
@if (@X)==(@Y) @end JScript comment */

var days=parseInt(WScript.Arguments.Item(0));

Date.prototype.addDays = function(days) {
    var date = new Date(this.valueOf());
    date.setDate(date.getDate() + days);
    return date;
}

var date = new Date();

WScript.Echo(date.addDays(5));
WScript.Echo("Year: " + date.getFullYear());
WScript.Echo("Month: " + date.getMonth());
WScript.Echo("DayOfTeWEek: " + date.getDay()); 
```

用法和输出：

```
E:\scripts>call dayAdder.bat 7
Sun Nov 8 16:27:48 UTC+0200 2020
Year: 2020
Month: 10
DayOfTeWEek: 2
DayOfTheMonth: 3 
```

您可以以适合您的方式对其进行修改。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-03-31T17:32:37.453

好的，我需要一个批处理文件来显示 DoD 运营中心的当前 JDAY。您可以双击该文件，它将显示在 CMD 窗口中。然后，按任意键退出。

这是我想出的：

```
@echo off
for /f "tokens=2 delims==" %%a in ('wmic OS Get localdatetime /value')     do set "dt=%%a"
set "YY=%dt:~2,2%" & set "YYYY=%dt:~0,4%" & set "MM=%dt:~4,2%" & set     "DD=%dt:~6,2%"
set "HH=%dt:~8,2%" & set "Min=%dt:~10,2%" & set "Sec=%dt:~12,2%"

:: Call the day ordinal number subroutine
call :JDdayNumber %DD% %MM% %YYYY% DayOrdinalNumber

:: Display the result
echo.
echo Today is JDay %DayOrdinalNumber%
echo.
pause,
endlocal & goto :EOF

:: set "datestamp=%YYYY%%MM%%DD%" & set "timestamp=%HH%%Min%%Sec%"
:: set "fullstamp=%YYYY%-%MM%-%DD%_%HH%-%Min%-%Sec%"
:: echo datestamp: "%datestamp%"
:: echo timestamp: "%timestamp%"
:: echo fullstamp: "%fullstamp%"

:: ============================================================
:: Subroutine: Calculate a day's ordinal number within the year
::JDdayNumber day month year return_
setlocal enableextensions enabledelayedexpansion
if %2 LEQ 2 (
set /a f=%1-1+31*^(%2-1^)
) else (
set /a a=%3
set /a b=!a!/4-!a!/100+!a!/400
set /a c=^(!a!-1^)/4-^(!a!-1^)/100+^(!a!-1^)/400
set /a s=!b!-!c!
set /a f=%1+^(153*^(%2-3^)+2^)/5+58+!s!
)
set /a return_=%f%+1
endlocal & set "%4=%return_%" & goto :EOF 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2019-12-28T00:39:09.980

一个更简单的选择是从批处理脚本中调用 PowerShell 命令来操作日期。批处理脚本可以用一行将日期设置为过去 7 天。

```
powershell -command "((Get-date).AddDays(-7)).ToString('yyyy-MM-dd')">captureVar && set /p Today=<captureVar 
```

该行首先指示 cmd 行对双引号中包含的命令使用 PowerShell。

```
powershell -command "the powershell command(s)" 
```

接下来，它使用 PowerShell cmdlet *Get-Date*，并使用*AddDays*更改当前值的日期。负数将减去，正数将相加。默认格式看起来像

```
Friday, December 20, 2019 6:18:29 PM 
```

要更改格式，您必须将日期更改为带有格式说明的字符串

```
.ToString('dddd MM/dd/yyyy HH:mm:ss.ffff K') 
```

PowerShell 命令的输出被重定向到名为 captureVar 的文件中。另一种选择是让 PowerShell 将其写入文件。

```
powershell -command "((Get-date).AddDays(-7)).ToString('yyyy-MM-dd') | set-content 'captureVar'" && set /p Today=<captureVar 
```

我用 && 使它成为一个单衬里。但是您可以在将值写入文件后随时设置 var。

```
set /p Today=<captureVar 
```

您应该使用您最熟悉的任何脚本语言编写。但请记住，您在编写批处理脚本时的选择不仅仅是批处理命令。Windows 使得在批处理脚本中随时调用 PowerShell 命令变得非常容易。您通常可以使用 PowerShell 找到给定障碍的简单解决方案，将该命令插入到您的脚本中，然后像往常一样继续完成您的批处理脚本。

在批处理脚本中调用 PowerShell 时需要记住以下几点：

Batch 将双引号中的所有内容视为 PowerShell 命令。如果您发现使用 PowerShell 编写的解决方案在命令中使用双引号，则必须用单引号替换这些解决方案。要转义字符，请遵循批处理脚本规则。可以在 PowerShell 命令中以与批处理 (%var%) 相同的方式读取批处理变量。但是必须重定向在 PowerShell 中创建的值，以便稍后在批处理脚本中使用。一旦结束引号关闭 PowerShell 会话，在 PowerShell 命令中创建的任何 $var 都会丢失。

# c# - System.ObjectDisposedException：无法访问已关闭的流

> ID：11210999
> 
> 赞同：9
> 
> 时间：2012-06-26T15:41:26.597
> 
> 标签：c#, .net

这是真的吗，这并不一定意味着流已被代码处理 - 无论是在使用中还是通过调用 dispose.

流可能已在此代码之外关闭，并且仍然会发生此异常？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-26T15:44:34.183

所以我会把我的评论作为一个答案：是的，一个流也可以从你的代码外部关闭，所以一定要检查一个`System.ObjectDisposedException`.

有几种情况可能会发生这种情况：例如，想象一个与网络连接相关的流并且连接突然中断。根据实现，这可能会关闭流并在访问流时抛出该特定异常。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-26T15:43:49.283

> 流可能已在此代码之外关闭，并且仍然会发生此异常？

是的。例如 - 如果您将流包装在另一个流中并处置“包装器”流，则可能会发生这种情况。许多实现处理它们包装的流。

如果您随后尝试写入“包装”流，您将收到此错误消息。

> 无论是在使用中还是通过调用 dispose。

还要意识到，对于具有`Close()`方法的对象，例如`Stream`，`Close`并且`Dispose`通常执行相同的功能。关闭流也会处理它。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-11-28T15:25:14.410

如果 requestLengthDiskThreshold 小于您尝试通过流上传/处理的文件的大小，也会发生此错误。这是在您的 web.config 中定义的：

```
<httpRuntime maxRequestLength="512000" requestLengthDiskThreshold="512000" /> 
```

如果您在这里查看第二个参数的解释：

[https://msdn.microsoft.com/en-us/library/system.web.configuration.httpruntimesection.requestlengthdiskthreshold(v=vs.110).aspx](https://msdn.microsoft.com/en-us/library/system.web.configuration.httpruntimesection.requestlengthdiskthreshold(v=vs.110).aspx)

您将看到它设置了输入流缓冲阈值（以千字节为单位）。默认值为 80KB，因此如果您没有设置此值并且您尝试使用 ajax 上传大于 80KB 的文件，您将收到 System.ObjectDisposedException 异常，因为一旦达到阈值限制，流将被关闭.

就我而言，我将阈值设置为 500MB ...