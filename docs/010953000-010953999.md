# StackOverflow 问答 10953000-10953999

# javascript - 在一个查询中检索一行的两个值

> ID：10953002
> 
> 赞同：0
> 
> 时间：2012-06-08T16:56:35.677
> 
> 标签：javascript, sql, database, uitableview, appcelerator

所以，我要做的是`entity_info`用来自 SQL 数据库的信息填充一个表，在本例中称为 。为了做到这一点，我需要表中的两个值，`entity_category`并且`entity_name`.

在填充表格时，我会执行以下操作：

```
var rows = db.execute('SELECT DISTINCT entity_name FROM entity_info');
var rows2 = db.execute('SELECT entity_category FROM entity_info');

while (rows.isValidRow()) {
    //herp derp herp creating a table...
    var name = Ti.UI.createLabel({
        text : rows.fieldByName('entity_name'),
        color : '#666',
        left : '50dp',
        font : {
            fontSize : 22,
            fontWeight : 'bold',
            fontFamily : 'Arial'
        },
        backgroundColor : '#fff'
    });
    var category = Ti.UI.createLabel({
        text : rows2.fieldByName('entity_category'),
        color : '#666',
        left : '60dp',
        top : '40dp',
        font : {
            fontSize : 13,
            fontFamily : 'Arial',
            fontStyle : 'italic'
        }
    });
    rows.next();
    rows2.next();
} 
```

但是，这对我的目的不起作用，因为它将两个语句分开并且将名称的顺序与类别匹配弄乱了。所以，我需要做的是接受一个请求（并且只使用单个`rows`变量），然后将其用于 while 语句并设置每个标签的文本。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T17:34:59.137

您是否尝试将 SQL 语句组合在 rows 和 rows2 中？

```
var rows: db.execute('SELECT DISTINCT entity_name, entity_category FROM entity_info'); 
```

并且按原样使用行。

# jquery - jQuery Roundabout 不同维度的特色项目

> ID：10953010
> 
> 赞同：1
> 
> 时间：2012-06-08T16:57:18.170
> 
> 标签：jquery, jquery-plugins

我正在使用[jQuery Roundabout](http://fredhq.com/projects/roundabout)插件来创建轮播。我需要允许当前选择的项目——Roundabout 应用了一类“roundabout-in-focus”——更像是一个“特色”项目。所以它需要有更大的宽度，特别是插件似乎不支持。如果我将它添加到该类的 CSS 中，那么当插件设置自己的样式时它会被忽略。

我知道我可以在回旋处加载后使用 jQuery 设置 width()，但是当您单击项目时它不会切换。

关于我如何做到这一点的任何想法？理想情况下，我可以设置当前项目的宽度并将其定位为应该在轮播的范围内，但我不确定这是否可能。

谢谢

# .net - 捕获 MS SQL 输出

> ID：10953014
> 
> 赞同：0
> 
> 时间：2012-06-08T16:57:50.723
> 
> 标签：.net, sql, sql-server-2008

> **可能重复：**
> [如何在 C# 中显示 SQL“PRINT”命令的输出？](https://stackoverflow.com/questions/8689336/how-can-i-display-the-output-of-sql-print-command-in-c)

我有一个 SQL 语句，它通过 PRINT 命令输出另一个 SQL 语句。现在我必须在 SQL 编辑器中手动运行它，复制生成的字符串查询并在不同的窗口中运行该查询。

我想使用 .NET 控制台应用程序自动执行此操作。是否可以在 .NET 中捕获 PRINT 语句输出？还有另一种捕获 SQL PRINT 输出的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T20:29:15.603

当我来到这里寻找您直接问题的答案时，即“如何捕获打印命令的输出”，我想扩展先前的答案。

如果您正在使用多个打印语句构建 sql 命令，则可以在 set 命令中连接各个部分

```
SET @sqlCommand = @sqlCommand + @newPart; 
```

不幸的是，但有时我会遇到问题，因为 sqlserver 认为我已经超过了 @sqlCommand 的最大大小，而我没有。我通过分开保存这些部分来解决这个问题，无论如何我经常需要同一部分的变体，然后在 exec 命令中将它们连接起来，如下所示：

```
EXEC ( 
 'MERGE ' + @targetTable + ' t ' +
 'USING ' + @sourceTable + ' s ' +
 'ON ' + @keycondition + ' ' +
 'WHEN MATCHED AND ' + @updateCondition + ' THEN ' +
   'UPDATE SET ' + @updateColumns + ' ' +
 'WHEN NOT MATCHED BY TARGET THEN ' +
   'INSERT (' + @insertTargetColumns + ') ' +
   'VALUES (' + @insertSourceColumns + ') ' +
 'WHEN NOT MATCHED BY SOURCE THEN '
   'UPDATE SET deleteFlag = ''D'', updDtTm = GETDATE()'
) 
```

希望这可以帮助。我正在从快照转向增量更新，因此 sourceTable 中有 deleteFlag 并且我不使用最后一个子句。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T17:00:29.400

代替

```
Print @sql 
```

做一个

```
Select @sql 
```

以您想要的方式捕获它（ADO、Linq2Sql、EF），然后正常运行该语句。通过在记录集中返回 sql，您可以依赖任何框架处理数据的正常方式，而不是尝试执行并非旨在实际返回数据的操作（您的 sql 实际上是正在返回的数据）。

如果你愿意，你甚至可以跳过这一步

```
EXEC sp_executesql @sql 
```

绕过整个往返行程。 [EXEC](http://msdn.microsoft.com/en-us/library/ms188332.aspx)和[sp_ExecuteSql](http://msdn.microsoft.com/en-us/library/ms188001.aspx)文档。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T17:01:51.040

如果您使用的是 sql server / oracle，您可以很容易地执行动态 sql

对于 sql server，您可以使用 EXEC 或 sp_executesql

```
DECLARE @sqlCommand varchar(1000)
SET @sqlCommand = 'SELECT * FROM SOME_TABLE'
--Use Exec
EXEC (@sqlCommand)
--or you can use the sp_executesql
EXECUTE sp_executesql @sqlCommand 
```

如果您使用的是 oracle，那么您需要使用 EXECUTE IMMEDIATE

# objective-c - 如何在 Superview 的视图中插入视图？(iOS)

> ID：10953016
> 
> 赞同：0
> 
> 时间：2012-06-08T16:58:24.613
> 
> 标签：objective-c, ios, xcode, uiview, uiview-hierarchy

> **可能重复：**
> [如何在 Superview 的视图中插入视图？(iOS)](https://stackoverflow.com/questions/10942681/how-to-insert-view-in-superviews-view-ios)

我有下面的代码行......我将如何修改它以将子视图“mySubview”插入到在超级视图中找到的名为“myView”的 UIView 中？

```
[[self superview] addSubview:mySubview]; 
```

# python - 捕获程序调试事件消息

> ID：10953019
> 
> 赞同：2
> 
> 时间：2012-06-08T16:58:43.467
> 
> 标签：python, windows, event-log

我正在尝试使用 Python 从内部开发的应用程序中捕获调试事件消息。我查看`win32event`了 PyWin32 中的使用和其他功能。

该过程将使用 python 启动，我一直在使用`subprocess.popen()`它来执行此操作。

自周一以来，我一直在研究和测试不同的方法来做到这一点，我确信有办法做到这一点，但我只是想念它。任何帮助、建议或方向将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T20:08:48.790

也许您需要捕获 STDERR？

```
import sys
sys.stderr = open('C:\\error_log.txt', 'w') 
```

# c# - 有没有办法在依赖项中有条件地#define 一个符号？

> ID：10953021
> 
> 赞同：0
> 
> 时间：2012-06-08T16:58:46.547
> 
> 标签：c#, visual-studio-2010, conditional

我正在一个解决方案中工作，其中解决方案中有一个特定的库，可以通过#ifdef 打开或关闭功能。

我在解决方案中有另一个项目将其用作依赖项。在我的构建设置中，我希望能够根据项目中的构建配置定义依赖库中的符号。我在 Visual Studio 中找不到任何方法来执行此操作。

有没有办法做到这一点？

（我意识到这里的理想解决方案是将那些#ifdef 更改为其他内容，但请假设我无法在其他项目中编辑代码）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T17:07:37.987

项目选项中的构建选项卡取决于构建配置下拉列表的选定值。您可以测试，当您选择 Debug 时，Define DEBUG constant 被选中，但不是在 Release 模式下。

只需选择适当的配置（调试、发布或自定义）并设置条件编译符号的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T17:24:06.980

我不认为你能做到这一点。没有“解决方案级别”定义，所有定义都针对一个项目。

正如@archil 指出的那样，您可以通过为项目选择正确的配置来实现一些目标。

另一种选择可能是直接使用 MSBuild 构建项目，而不是使用普通的 VS IDE 路由，这样您就可以通过命令行覆盖定义（http://stackoverflow.com/questions/479979/msbuild-defining-conditional-编译符号）

# java - 在哪里放置 JAR 文件以避免冲突？

> ID：10953031
> 
> 赞同：1
> 
> 时间：2012-06-08T16:59:22.127
> 
> 标签：java, tomcat, jar, weblogic

Windows XP Pro WebLogic 11g Tomcat 7 JDK 1.6

我一直在将补充 JAR 文件放入

```
JAVA_HOME/jre/lib/ext ( a JDK installation ) 
```

多年。这比更改我的 CLASSPATH 方便得多，而且我开发的所有东西都可以在一个地方访问一组东西。

不过，我需要一种不同或更好的方法。

我最近在我的计算机上安装了 WebLogic 11g。因为我不喜欢我的机器上有多个 JDK 或 JVM，所以我将 JAVA_HOME 变量设置为指向那里。

然后我放了一个 servlet-api.jar 来编译我的 webapps。一切都好。

然后我安装了 Tomcat 7。Tomcat 7 在 CATALINA_HOME/lib 中有自己的 servlet-api.jar。在 CATALINA_HOME/lib 和 JAVA_HOME/jre/lib/ext 中有一个 servlet-api.jar 会导致 Tomcat 7 抛出错误。但是，我需要一个 JAVA_HOME/jre/lib/ext 来编译我的 webapps。

有没有比从 CATALINA_HOME/lib 中删除 servelt-api.jar 更优雅的解决方案？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T17:08:40.130

来自[Java 教程：扩展机制](http://docs.oracle.com/javase/tutorial/ext/index.html)：

> 扩展机制提供了一种标准的、可扩展的方式，使自定义 API 可用于在 Java 平台上运行的所有应用程序。Java 扩展也称为可选包。这条线索可以互换使用这两个术语。
> 
> 扩展是通过扩展机制增强 Java 平台的包和类的组。扩展机制使运行时环境能够查找和加载扩展类，而不必在类路径上命名扩展类。在这方面，扩展类类似于 Java 平台的核心类。这也是扩展名的由来——实际上，它们扩展了平台的核心 API。
> 
> 由于这种机制扩展了平台的核心 API，**因此应该明智地应用它**。它最常**用于标准化的接口，例如由 Java Community Process 定义的接口**，尽管它也可能适用于站点范围的接口。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T17:04:49.020

不要将 Jar 放入`/ext`，而是针对您的实际 EE 框架进行编译。`.jar`这样，当您的 Tomcat（或其他 EE 安装）随附的 s 版本发生变化时，您就不会遇到问题。所以不要再放入`.jar`ext 并将构建路径更改为您的*实际*EE 环境。

# mongodb - 如何在 mongo JavaScript shell 中中止查询

> ID：10953034
> 
> 赞同：18
> 
> 时间：2012-06-08T16:59:32.300
> 
> 标签：mongodb

在 Mongo 的 JavaScript shell 中执行查询感觉很像在 bash shell 中执行命令。正因为如此，我的手指不断尝试`Ctrl`+`C`退出我想要“中止”并返回命令提示符的命令。不幸的是，在 2.0.4 的 mongo shell 中，当 I `Ctrl`+时`C`，它会将我从 JavaScript shell 中删除，而不仅仅是中止命令并给我命令提示符。

JavaScript shell 中有没有一种方法可以放弃当前命令而不执行它并返回命令提示符？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-06-08T17:02:36.167

What I've always naturally done is type a `(` and then immediately hit enter three times. The shell will assume you are just hitting enter to break up your command, but if you hit enter 2 more times it will exit back to the shell. It's wonky, but it works.

* * *

Edit: Use ctrl+d, which "kills the shell" according to [http://www.gotothings.com/unix/bash-hotkeys.htm](http://www.gotothings.com/unix/bash-hotkeys.htm). If you hit this once after hitting enter in the middle of typing a command in the mongo shell, it will exit your continuation and get you back to a clean mongo prompt. Hitting it twice will exit the mongo shell.

# php - PHP变量确定数组函数..可能吗？

> ID：10953036
> 
> 赞同：1
> 
> 时间：2012-06-08T16:59:39.130
> 
> 标签：php, arrays, variables

以下代码按某些字段过滤数据库中的帖子。

```
array('key' => 'telephone', 'value' => '0','compare' => '>') 
```

其他一些因素决定了这里是否可能有另一个数组。问题是解决该问题所需的代码将返回一个变量。`$filters;`

这可能吗

```
$filters = array('key' => 'mobile', 'value' => '0','compare' => '>')

array('key' => 'telephone', 'value' => '0','compare' => '>') . $filters 
```

如果不是，这怎么可能工作。

澄清

这是函数需要它所在的结构。

```
 'meta_query' => array(
array('key' => 'telephone', 'value' => '0','compare' => '>'),
array('key' => 'mobile', 'value' => '0','compare' => '>')
                        ) 
```

但是我们不能这样写出来，因为其他因素决定了这些查询将是什么。我们必须得到类似于包含数组的变量才能进入“meta_query”数组。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T17:05:24.587

我想你正在尝试做`array_merge()`。有关详细信息，请参阅[http://php.net/manual/en/function.array-merge.php](http://php.net/manual/en/function.array-merge.php)，但它的工作方式如下：

```
$filters = array('key' => 'telephone', 'value' => '0','compare' => '>');
$filters = array_merge($filters, array('key' => 'telephone', 'value' => '0','compare' => '>'));
print_r($filters);
// array( 'key' => 'telephone', 'value' => '0', 'compare' => '>') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T17:04:55.243

我假设您正在尝试在单个数组中传递多个过滤器。

使用`.`将不起作用，因为这是字符串连接操作。

将此用于数组数组：

```
$filters[] = array('key' => 'mobile', 'value' => '0','compare' => '>');
$filters[] = array('key' => 'telephone', 'value' => '0','compare' => '>'); 
```

要获得函数的正确格式，只需：

```
$meta['meta_query']=$filters; 
```

# css - Google webfonts 在 Windows 上的 Chrome 中呈现断断续续

> ID：10953037
> 
> 赞同：51
> 
> 时间：2012-06-08T16:59:46.307
> 
> 标签：css, google-chrome, svg, fonts, google-webfonts

我在我的网站上使用 Google Webfonts 服务并严重依赖它。它在大多数浏览器上呈现良好，但在 Windows 上的 Chrome 中呈现特别糟糕。非常不稳定和像素化。

到目前为止，我发现 Chrome 需要先加载 .svg 格式的字体。但是，我使用的字体称为 Asap，仅在 .woff 中可用。我使用免费的在线服务将它转换为 .svg，但是当我将它添加到我的样式表（在 .woff 之前）时，它并没有改变任何东西。

我也试过：

```
-webkit-font-smoothing: antialiased;
text-shadow: 0px 0px 0px; 
```

希望这两种方法都能帮助文本呈现更流畅。

现在我已经没有想法了，我不想改变字体。有谁知道我该如何解决这个问题？我一直在使用 Adob​​e Browserlab 来测试渲染，看看我是如何只拥有一台 Mac 的。该网站的链接是：[www.symvoli.nl/about](http://www.symvoli.nl/about)

提前致谢！

**2013 年 4 月 11 日编辑：**

Chrome 35 Beta 似乎终于解决了这个问题：

![在此处输入图像描述](../Images/6bcfd20869a62e6fac50ddadb2cb678e.png)

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2012-11-22T08:45:04.140

## 2014 年 8 月更新

> 谷歌终于在 Chrome 37 中原生修复了这个问题！！！。但由于历史原因，我不会删除这个答案。

### 问题

之所以会出现此问题，是因为**chrome 实际上无法使用正确的 anti-aliasing 渲染 TrueType 字体**。但是，chrome 仍然可以很好地呈现 SVG 文件。如果您将 svg 文件的调用在 woff 上方的语法中向上移动，则 chrome 将下载 svg 并使用它而不是 woff 文件。像您提出的一些技巧效果很好，但仅适用于某些字体大小。

但是这个错误对于 Chrome 开发团队来说是众所周知的，并且自 2012 年 7 月以来一直在修复。请参阅此处的官方错误报告线程：[https ://code.google.com/p/chromium/issues/detail?id= 137692](https://code.google.com/p/chromium/issues/detail?id=137692)

### 2013 年 10 月更新（感谢 @Catch22）

显然，某些网站**在呈现 svg 时可能会遇到间歇性间距问题**。所以有[更好的方法](http://www.fontspring.com/blog/smoother-rendering-in-chrome-update)来剥皮。如果您使用特定于 Chrome 的媒体查询调用 svg，间距问题就会消失：

```
@media screen and (-webkit-min-device-pixel-ratio:0) {
  @font-face {
      font-family: 'MyWebFont';
      src: url('webfont.svg#svgFontName') format('svg');
  }
} 
```

### 第一种方法解决方案：

修改后的 Fontspring 防弹语法首先为 svg 服务：

```
@font-face {
    font-family: 'MyWebFont';
    src: url('webfont.eot'); 
    src: url('webfont.eot?#iefix') format('embedded-opentype'),
         url('webfont.svg#svgFontName') format('svg'),
         url('webfont.woff') format('woff'),
         url('webfont.ttf')  format('truetype');
} 
```

### 进一步阅读：

*   [影响类型渲染的 CSS 属性](http://blog.typekit.com/2011/01/26/css-properties-that-affect-type-rendering/)
*   [Windows 版 Chrome 中更流畅的 Web 字体渲染](http://www.fontspring.com/blog/smoother-web-font-rendering-chrome)
*   [如何防弹@font-face 网页字体](http://sixrevisions.com/css/font-face-web-fonts-issues/)

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-10-07T13:57:06.530

```
-webkit-text-stroke: 0.5px; 
```

仅在大文本上使用它，因为它会影响您的页面性能。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-10-31T11:50:37.400

此处建议通过首先调用 .svg 文件进行修复，[http://www.adtrak.co.uk/blog/font-face-chrome-rendering/](http://www.adtrak.co.uk/blog/font-face-chrome-rendering/)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-06-21T14:37:01.043

我尝试了许多解决方案，最后想出了一个适用于新版本 Chrome 的解决方案，它不会因为更改文件的顺序而失败：

本质上，我将 TTF 文件移到了 Mozilla 特定的部分。

```
@font-face {
    font-family: 'MyWebFont';
    src: url('webfont.eot'); 
    src: url('webfont.eot?#iefix') format('embedded-opentype'),
         url('webfont.svg#svgFontName') format('svg'),
         url('webfont.woff') format('woff');
}
@-moz-font-face {
    font-family: 'MyWebFont';    
    src: url('webfont.ttf')  format('truetype');
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-10-02T22:01:38.017

出于某种原因，Tom & [font-spring 的](http://www.fontspring.com/blog/smoother-web-font-rendering-chrome)回答没有为我做。[山姆戈达德](http://www.adtrak.co.uk/blog/font-face-chrome-rendering/)的这个修复虽然做到了：

> 在对自己进行了实验之后，我偶然发现了一个看起来不错的、非常容易解决这个问题的方法。Chrome 似乎使用了@font-face 工具包中的 .svg 文件，并且不喜欢最后被调用。下面是使用 CSS 对 @font-face 的标准调用：

```
// font-face inclusion
@font-face {
  font-family: 'font-name';
                src: url('path-to-font/font-name.eot');
                src: url('path-to-font/font-name.eot?#iefix') format('eot'),
                url('path-to-font/font-name.woff') format('woff'),
                url('path-to-font/font-name.ttf') format('truetype'),
                url('path-to-font/font-name.svg') format('svg');
  font-weight: normal;
  font-style: normal;
}
```

> 从示例中可以看出，.svg 文件在调用的 URL 列表中排在最后。如果我们修改代码以针对 webkit 浏览器，然后告诉他们只使用 .svg 文件。

```
// Usage
@media screen and (-webkit-min-device-pixel-ratio:0) {
  @font-face {
    font-family: ‘font-name';
    src: url(‘path-to-font/font-name.svg’) format(‘svg’);
    }
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-08T17:16:49.300

它可能只是您使用“asap”的字体在某些尺寸下不能很好地呈现。我把你的尺寸`h1`从`3.5em`到改了`50px`，看起来好多了。可能不是完美的解决方案，但我注意到很多谷歌网络字体可能是不可预测的

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-05-09T23:12:07.647

chrome 中网络字体渲染的另一个链接参考 -

[http://www.fontspring.com/blog/smoother-web-font-rendering-chrome](http://www.fontspring.com/blog/smoother-web-font-rendering-chrome/)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-06-17T15:54:39.600

有同样的事情伙计们。在除 chrome 之外的所有浏览器中都很好 - 甚至 IE10 和 9 也很好。Dreamwaeevr CS6 也使用类似版本的 fontsprings 代码，但末尾有 svg。在 woff 和 ttf 之前将其更改为 SVG，世界上一切都很好。汤姆在那里使用 hos 示例，事实上，在您的代码中并将路径映射到您需要的字体中，您就在做生意了！

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-09-02T07:15:24.687

我尝试了很多方法： - 使用 font-face -webkit-font-smoothening 加载 svg ...

后

```
-webkit-transform: rotate(-4.7deg) translate3d( 0, 0, 0); 
```

旋转更顺畅，但主要问题还没有消失。

对我来说，解决方案是添加：

```
-webkit-text-stroke: 0.5px; 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-03-31T22:16:15.110

[https://www.gettingthingstech.com/how-to-fix-jagged-font-rendering-in-google-chrome/](https://www.gettingthingstech.com/how-to-fix-jagged-font-rendering-in-google-chrome/)

This post explains a little about google chromes experimental functions. Apparently enabling the "DisableWrite" option fixes the jagged fonts. This is obviously a fix PER machine and not on a full scale.

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2013-03-24T22:17:40.713

我在 Firefox 中开发。我的经验是 FF 很好地显示 ttf 字体，没有任何额外的规则（除了 @font-face 调用字体文件的 url）。然而，Chrome 是另一回事。即使使用 -webkit-font-smoothing: antialiased; 规则它仍然显示任何字体相当粗糙。Safari 似乎没有这个问题，所以不是天生的 Webkit 不能干净地呈现字体，而是 Chrome 的问题。

我还没有尝试添加 -webkit-text-stroke: 0.5px; 规则，但会。

在上面的答案中，我最喜欢 Tom Sarduy 的答案。除了对问题的良好描述之外，他还提供了一个很棒的@font-face 堆栈，用于涵盖所有主要浏览器。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2014-07-30T21:58:33.843

谷歌似乎可能会根据浏览器和操作系统提供不同的 woff 文件。

我发现如果我从 IE 下载字体，它比在 Mac 上的 Safari 上下载特定字体的字体大 10k。43k 对 33k。此外，IE 版本在 Mac 上看起来不错，但 Mac 版本在 PC 上似乎无法正常工作。Mac 版本在 PC 上的 Mozilla Firefox 中看起来最差。

试试这个： http://fonts.googleapis.com/css?family=Source+Sans+Pro:400,600,400italic, [600italic](http://fonts.googleapis.com/css?family=Source+Sans+Pro:400,600,400italic,600italic)

SourceSansPro-Regular.woff PC 版本 27k

SourceSansPro-Regular.woff Apple 版本 24k

# android - 我的 Android 应用程序出现错误“应用程序已意外停止”

> ID：10953042
> 
> 赞同：-3
> 
> 时间：2012-06-08T17:00:10.397
> 
> 标签：android, android-emulator, android-logcat

日志猫：

```
 06-08 22:10:24.930: E/Zygote(32): setreuid() failed. errno: 2
    06-08 22:10:39.451: E/Zygote(32): setreuid() failed. errno: 17
    06-08 22:10:41.590: E/BatteryService(61): usbOnlinePath not found
    06-08 22:10:41.600: E/BatteryService(61): batteryVoltagePath not found
    06-08 22:10:41.600: E/BatteryService(61): batteryTemperaturePath not found
    06-08 22:10:41.610: E/SurfaceFlinger(61): Couldn't open /sys/power/wait_for_fb_sleep or /sys/power/wait_for_fb_wake
    06-08 22:10:41.860: E/SensorService(61): couldn't open device for module sensors (Invalid argument)
    06-08 22:10:50.050: E/System(61): Failure starting core service
    06-08 22:10:50.050: E/System(61): java.lang.SecurityException
    06-08 22:10:50.050: E/System(61):   at android.os.BinderProxy.transact(Native Method)
    06-08 22:10:50.050: E/System(61):   at android.os.ServiceManagerProxy.addService(ServiceManagerNative.java:146)
    06-08 22:10:50.050: E/System(61):   at android.os.ServiceManager.addService(ServiceManager.java:72)
    06-08 22:10:50.050: E/System(61):   at com.android.server.ServerThread.run(SystemServer.java:206)
    06-08 22:10:50.090: E/EventHub(61): could not get driver version for /dev/input/mouse0, Not a typewriter
    06-08 22:10:50.090: E/EventHub(61): could not get driver version for /dev/input/mice, Not a typewriter
    06-08 22:10:50.700: E/SoundPool(61): error loading /system/media/audio/ui/Effect_Tick.ogg
    06-08 22:10:50.710: E/SoundPool(61): error loading /system/media/audio/ui/KeypressStandard.ogg
    06-08 22:10:50.720: E/SoundPool(61): error loading /system/media/audio/ui/KeypressSpacebar.ogg
    06-08 22:10:50.730: E/SoundPool(61): error loading /system/media/audio/ui/KeypressDelete.ogg
    06-08 22:10:50.740: E/SoundPool(61): error loading /system/media/audio/ui/KeypressReturn.ogg
    06-08 22:10:50.790: E/UsbObserver(61): java.lang.NullPointerException
    06-08 22:10:50.790: E/UsbObserver(61):  at com.android.server.UsbObserver.init(UsbObserver.java:131)
    06-08 22:10:50.790: E/UsbObserver(61):  at com.android.server.UsbObserver.<init>(UsbObserver.java:65)
    06-08 22:10:50.790: E/UsbObserver(61):  at com.android.server.ServerThread.run(SystemServer.java:402)
    06-08 22:10:52.010: E/ThrottleService(61): Could not open GPS configuration file /etc/gps.conf
    06-08 22:10:53.540: E/logwrapper(154): executing /system/bin/tc failed: No such file or directory
    06-08 22:10:53.660: E/logwrapper(155): executing /system/bin/tc failed: No such file or directory
    06-08 22:10:53.740: E/logwrapper(158): executing /system/bin/tc failed: No such file or directory
    06-08 22:11:30.560: E/Database(320): Failure 1 (near "(": syntax error) on 0x29bd78 when preparing 'create table  (_id integer primary key autoincrement, question text not null, a text not null, b text not null, c text not null, d text not null, answer text not null, subject text not null);'.
    06-08 22:11:30.610: E/AndroidRuntime(320): FATAL EXCEPTION: main
    06-08 22:11:30.610: E/AndroidRuntime(320): java.lang.RuntimeException: Unable to start activity ComponentInfo{poo.sushie.ourproject/poo.sushie.ourproject.MyprojectActivity}: android.database.sqlite.SQLiteException: near "(": syntax error: create table  (_id integer primary key autoincrement, question text not null, a text not null, b text not null, c text not null, d text not null, answer text not null, subject text not null);
    06-08 22:11:30.610: E/AndroidRuntime(320):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
    06-08 22:11:30.610: E/AndroidRuntime(320):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
    06-08 22:11:30.610: E/AndroidRuntime(320):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
    06-08 22:11:30.610: E/AndroidRuntime(320):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
    06-08 22:11:30.610: E/AndroidRuntime(320):  at android.os.Handler.dispatchMessage(Handler.java:99)
    06-08 22:11:30.610: E/AndroidRuntime(320):  at android.os.Looper.loop(Looper.java:123)
    06-08 22:11:30.610: E/AndroidRuntime(320):  at android.app.ActivityThread.main(ActivityThread.java:3683)
    06-08 22:11:30.610: E/AndroidRuntime(320):  at java.lang.reflect.Method.invokeNative(Native Method)
    06-08 22:11:30.610: E/AndroidRuntime(320):  at java.lang.reflect.Method.invoke(Method.java:507)
    06-08 22:11:30.610: E/AndroidRuntime(320):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
    06-08 22:11:30.610: E/AndroidRuntime(320):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
    06-08 22:11:30.610: E/AndroidRuntime(320):  at dalvik.system.NativeStart.main(Native Method)
    06-08 22:11:30.610: E/AndroidRuntime(320): Caused by: android.database.sqlite.SQLiteException: near "(": syntax error: create table  (_id integer primary key autoincrement, question text not null, a text not null, b text not null, c text not null, d text not null, answer text not null, subject text not null);
    06-08 22:11:30.610: E/AndroidRuntime(320):  at android.database.sqlite.SQLiteDatabase.native_execSQL(Native Method)
    06-08 22:11:30.610: E/AndroidRuntime(320):  at android.database.sqlite.SQLiteDatabase.execSQL(SQLiteDatabase.java:1763)
    06-08 22:11:30.610: E/AndroidRuntime(320):  at poo.sushie.ourproject.MyDBAdaptera$DatabaseHelper.onCreate(MyDBAdaptera.java:88)
    06-08 22:11:30.610: E/AndroidRuntime(320):  at android.database.sqlite.SQLiteOpenHelper.getWritableDatabase(SQLiteOpenHelper.java:126)
    06-08 22:11:30.610: E/AndroidRuntime(320):  at poo.sushie.ourproject.MyDBAdaptera.open(MyDBAdaptera.java:41)
    06-08 22:11:30.610: E/AndroidRuntime(320):  at poo.sushie.ourproject.MyprojectActivity.onCreate(MyprojectActivity.java:24)
    06-08 22:11:30.610: E/AndroidRuntime(320):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
    06-08 22:11:30.610: E/AndroidRuntime(320):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
    06-08 22:11:30.610: E/AndroidRuntime(320):  ... 11 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T17:06:56.180

看到这条线

```
06-08 22:11:30.610: E/AndroidRuntime(320): Caused by: android.database.sqlite.SQLiteException: near "(": syntax error: create table  (_id integer primary key autoincrement, question text not null, a text not null, b text not null, c text not null, d text not null, answer text not null, subject text not null); 
```

它说明了您的 SQLite 查询，请检查语法。我想你还没有给出表名。

做`create table tablename`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T17:07:13.293

错误就在 logcat 输出中：

```
06-08 22:11:30.610: E/AndroidRuntime(320): java.lang.RuntimeException: Unable to start activity ComponentInfo{poo.sushie.ourproject/poo.sushie.ourproject.MyprojectActivity}: android.database.sqlite.SQLiteException: near "(": syntax error: create table  (_id integer primary key autoincrement, question text not null, a text not null, b text not null, c text not null, d text not null, answer text not null, subject text not null); 
```

它在您的 SQL 中抱怨语法错误：您正在尝试创建一个表，但您没有为该表命名。

语法是这样的：`create table <tablename> (....`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T17:09:35.980

这是问题所在：

```
Caused by: android.database.sqlite.SQLiteException: near "(": syntax error: create table  (_id integer primary key autoincrement, question text not null, a text not null, b text not null, c text not null, d text not null, answer text not null, subject text not null); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-08T17:05:57.497

*您的SQL*查询语法中存在错误：

```
create table  (_id integer primary key autoincrement, question text not null, a text not null, b text not null, c text not null, d text not null, answer text not null, subject text not null); 
```

它说创建表，但它从未命名它。它应该是：

```
CREATE TABLE MyTableName (_id int ...) 
```

# html - SVG onload 事件调用太早？

> ID：10953043
> 
> 赞同：5
> 
> 时间：2012-06-08T17:00:16.463
> 
> 标签：html, svg, jquery-svg

我有这样的代码，使用 jQuery-svg

```
function replaceRaster(){
    $('#png').remove()
    a = $('#graphic')
    b = a.svg(a)
    a.load('IDC_Energy.svg',
         {onLoad:bind} )
   svg = document.getElementById("graphic").children[0]
   console.log(svg)
   svg.addEventListener('load', bind)
} 
```

事件处理程序 ,`bind`在 jQuery-svg-dom 能够选择 SVG 数据中的元素之前被触发。我的代码应该查看 SVG 并分配各种类并将侦听器附加到各种元素，但它无法找到任何元素。如果我`bind`在加载所有内容后调用控制台，它可以找到所有 SVG 元素。

难道我做错了什么？是否有另一种方法可以检测 SVG DOM 何时可用？我曾想过使用计时器，但这真的很麻烦，特别是考虑到我的 SVG 文件可能有几 MB 大。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T11:53:37.793

您是否尝试过使用定时器延迟为“0”或只是“10”的定时器？我经常使用这种技术将工作推出当前运行循环，因为在重绘 ghas 完成后会触发计时器。幸运的是，只有在重绘完成后才会触发绑定。我不确定这是否会对您的特定情况有所帮助，因为我不知道您在页面中还做了什么 - 例如，如果您正在进行一些异步数据处理，它将无济于事。

# xsd - 平面文件架构向导

> ID：10953045
> 
> 赞同：0
> 
> 时间：2012-06-08T17:00:19.120
> 
> 标签：xsd, biztalk, flat-file

我有一个制表符分隔的平面文件的示例，如下所示：

```
Expense Report Id   Name    Geography   StartDate   EndDate TotalExpense    
123456789   JJ Thompson Atlanta 6/12/2011   6/18/2011   454.10  
ExpenseDate Guests (Separated by comma) CompanyAffiliation  Establishment   Project
6/14/2011   "Norm McDonald, Gary Shandling" Two Guys Hamburgers Little Debbie's MumboJumbo
6/16/2011       IBN Yo  MumboJumbo  Conceirge
6/18/2011   Jimi Hendrix    The Experience  Electric Ladyland   MumboJumbo  Client 
```

我必须将 xml 模式转换为类似于此制表符分隔的平面文件。知道如何使用平面文件模式向导将标题保留在其中吗？我可以在没有标题的情况下做到这一点没问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T17:13:27.950

一种选择是创建一个顶级标题元素，最大出现 1，最小出现 1，每个列标题都有一个默认值字段。您需要将左侧的非重复节点映射到此标题元素，以便创建它。

# xml - 为什么 MemoryStream 限制为 6KB 的数据？

> ID：10953053
> 
> 赞同：2
> 
> 时间：2012-06-08T17:00:56.307
> 
> 标签：xml, stream, linq-to-xml, memorystream, xmlwriter

我有一个包含 7,917 个字符的 XML 文档。它已使用 LINQ to XML 读入 XElement，但我需要将此 XElement 映射/转换/调整为字符串（以发送到 Web 服务）。

这是我的方法：

```
 public string AdaptXElementToString(XElement xml)
    {
        Encoding encoding = Encoding.GetEncoding(SpecializedEncodings.Iso88591);

        using (MemoryStream memoryStream = new MemoryStream())
        {
            XmlWriterSettings settings = new XmlWriterSettings { Encoding = encoding };

            memoryStream.SetLength(21*1024*1024);

            using (XmlWriter writer = XmlWriter.Create(memoryStream, settings))
            {
                xml.WriteTo(writer);
                memoryStream.Flush();

                string xmlText = encoding.GetString(memoryStream.ToArray());
                return xmlText;
            }
        }
    } 
```

当我调用此方法时，我可以使用 Intellisense 看到“xml”包含我文件的**全部**内容。但是，字符串 xmlText 在第 6144 个字符处被截断（正好是 6 KB）。因为 xmlText 被砍掉了，所以我丢失了 1773 个字符。

有谁知道为什么这个方法没有返回整个字符串？我将内存流缓冲区的长度设置为 21 MB 以确保它足够大（即使默认构造函数支持调整大小）。

如果我删除对 SetLength() 的调用，我会得到相同的行为。如果我删除对 Flush() 的调用，我也会得到相同的行为。

出于我的目的，我必须使用编码 ISO-8859-1，所以我不能更改为 UTF-8 或 16。

任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T18:58:53.863

解决了问题：

使用 writer.Flush(); 不是 memoryStream.Flush()

# mysql - mySQL，三个表：更新多行（每行都有不同的值）

> ID：10953055
> 
> 赞同：1
> 
> 时间：2012-06-08T17:01:02.843
> 
> 标签：mysql, sql, join

我在 mySQL 中有三个表：

```
TABLE:CollectionAttributeValues
cID
akID
avID

TABLE: atDefault
avID
value

TABLE: CollectionVersions
cID
cvName 
```

好像

```
CollectionVersions
cID  cvName
1    Billete
5    Tony

atDefault
avID value
1    B.B
3    T.T

CollectionAttributeValues
cID akID avID
1   29   1
5   29   3 
```

我需要将 atDefault 中的所有**值****（**名为 values 的列） 放入**CollectionVersions中的****cvName**中，其中**CollectionAttributeValues**中的 akID = 29

 ******基本上，取“Billette”并将其更改为“BB”。并且还取“Tony”并将其更改为“TT”。

到目前为止，我想出了这个

```
SELECT value
FROM `atDefault` AS d
LEFT JOIN `CollectionAttributeValues` AS v ON d.avID = v.avID
WHERE v.akID =29 
```

但我不知道如何将结果值插入到 CollectionVersions 的“cvName”列中......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T17:05:52.533

到`UPDATE`表的所有列，其中`CollectionVersions`包含您从查询中获得的数据。试试下面的查询 -

```
UPDATE CollectionVersions cv 
SET cvName = 
(SELECT value
 FROM `atDefault` AS d
 LEFT JOIN `CollectionAttributeValues` AS v ON d.avID = v.avID
 WHERE v.akID =29
 AND cv.cID = v.cID) 
```******

# java - Hibernate：第一次启动程序时出现未知实体异常

> ID：10953056
> 
> 赞同：1
> 
> 时间：2012-06-08T17:01:05.820
> 
> 标签：java, hibernate

我开始学习 Hibernate，所以我决定从简单的程序开始。我有一堂课：

视频：

```
package org.media;

import javax.persistence.Column;
import javax.persistence.GeneratedValue;
import javax.persistence.GenerationType;
import javax.persistence.Id;

import org.hibernate.annotations.Entity;
import org.hibernate.annotations.Table;

@Entity
@Table(appliesTo="video")
public class Video {
@Id
@Column(name="id")
@GeneratedValue(strategy = GenerationType.AUTO)
private Long id;
@Column(name="description", length=64)
private String description;

//getters and setters...
} 
```

我的 hibernate.cfg.xml 文件看起来像：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE hibernate-configuration PUBLIC
"-//Hibernate/Hibernate Configuration.DTD 3.0//EN"
"http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd">
<hibernate-configuration>
<session-factory>
    <property name="hibernate.connection.driver_class">org.postgresql.Driver</property>
    <property name="hibernate.connection.username">postgres</property>
    <property name="hibernate.connection.password">1</property>
    <property name="hibernate.connection.url">jdbc:postgresql://localhost:5432/media</property>
    <property name="hibernate.dialect">org.hibernate.dialect.PostgreSQLDialect</property>
    <property name="current_session_context_class">thread</property>
    <property name="show_sql">true</property>
    <property name="hibernate.hb2ddl.auto">update</property>
    <mapping class="org.media.Video" />
</session-factory>
</hibernate-configuration> 
```

我有一个向数据库添加简单记录的方法：

```
public void addVideo(String description) {
    Session session = HibernateUtil.getSessionFactory().getCurrentSession();
    session.beginTransaction();
    Video video = new Video();
    video.setDescription(description);
    session.save(video);
    session.getTransaction().commit();
} 
```

当我启动我的程序时，它会在此方法上崩溃，但有异常：

```
Exception in thread "main" org.hibernate.MappingException: Unknown entity: org.media.Video 
```

我的数据库中有一个相应的表，其名称和列类似于注释。它有什么问题？

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T17:20:54.257

尝试在您的导入中使用`javax.persistence.Entity`and`javax.persistence.Table`而不是 Hibernate。

来自[http://docs.jboss.org/hibernate/stable/annotations/reference/en/html/entity.html#entity-mapping](http://docs.jboss.org/hibernate/stable/annotations/reference/en/html/entity.html#entity-mapping)：

“JPA 注释位于 javax.persistence.* 包中。您最喜欢的 IDE 可以为您自动完成注释及其属性（即使没有特定的“JPA”模块，因为 JPA 注释是普通的 JDK 5 注释）。”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T10:33:20.110

您应该使用 javax.persistence 导入而不是使用 hibernate 导入。

导入 javax.persistence.Table；导入 javax.persistence.Entity；

此外，如果实体名称（类名）与表的名称相同，则无需使用表注释。如果实体名称与表名称不同，则使用 @Table(name="")

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T17:11:24.510

它的表名属性。

@Table 设置在类级别；它允许您为实体映射定义表、目录和模式名称。如果没有定义@Table，则使用默认值：实体的非限定类名。

```
@Entity
@Table(name="tbl_sky")
public class Sky implements Serializable {
   ...
} 
```

 而不是 applyTo 尝试 name=

我也发现了这个，所以如果导入语句一开始不喜欢 name=，你可能需要更改它。

@org.hibernate.annotations.Table 是对@javax.persistence.Table 的补充，而不是替代。特别是，如果要更改表的默认名称，则必须使用@javax.persistence.Table，而不是@org.hibernate.annotations.Table。

# python - 用 Python 编写分散/收集套接字

> ID：10953060
> 
> 赞同：4
> 
> 时间：2012-06-08T17:01:20.867
> 
> 标签：python, sockets

在 POSIX C 中，我们可以使用`writev`一次将多个数组写入文件描述符。当您必须连接多个缓冲区以形成单个消息以通过套接字发送时，这很有用（例如，考虑 HTTP 标头和正文）。这样，我不需要调用`send`两次，一次用于标头，一次用于正文（防止消息在线路上的不同帧中拆分），也不需要在发送之前连接缓冲区。

我的问题是，是否有 Python 等价物？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T17:13:11.603

在即将到来的[Python 3.3](http://python.org/download/releases/3.3.0/)中有，现在正在进行 alpha 测试。见[`socket.sendmsg`](http://docs.python.org/dev/library/socket.html#socket.socket.sendmsg)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-05-20T20:29:55.840

1.  Python 支持`os.writev()`以及`sendmsg()`. 这些函数是原子的，因此相当于调用`write()`和`send()`分别连接缓冲区。

2.  有`TCP_CORK`。您可能会说内核在未塞住之前不要发送部分帧。

使用任何一种技术，您都可以控制部分 TCP 帧。

# continuous-integration - TeamCity 工件路径组合文件夹

> ID：10953063
> 
> 赞同：4
> 
> 时间：2012-06-08T17:01:36.007
> 
> 标签：continuous-integration, teamcity

我需要创建包含两个文件夹的 zip 存档工件。我知道如何创建一个文件夹存档：

```
Folder1 => myartifact.zip 
```

但是我如何告诉 TeamCity 将 Folder2 添加到同一个存档中？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-09T13:03:09.430

可以多次使用相同的 target_archive 名称，例如：

```
*/.html => report.zip
*/.css => report.zip!/css/ 
```

另见：[http ://confluence.jetbrains.net/display/TCD7/Configuring+General+Settings#ConfiguringGeneralSettings-artifactPaths](http://confluence.jetbrains.net/display/TCD7/Configuring+General+Settings#ConfiguringGeneralSettings-artifactPaths)

# jsf-2 - ui:组合模板=“ " I would like to place the Facelets template file for JSF in a JAR file. I tried to reference it by EL as <ui:composition template="#{resource['templates:template_pe_layout.xh
问问题
问问题 2012-06-08T17:01:48.960
3808 次
This question shows research effort; it is useful and clear
2
This question does not show any research effort; it is unclear or not useful
Bookmark this question.
Show activity on this post.
I would like to place the Facelets template file for JSF in a JAR file.
I tried to reference it by EL as
<ui:composition template=" #{resource['templates:template_pe_layout.xhtml']}"="">which works perfect for CSS or images, but not for the composition template. How could I achieve the goal? If you are using sql server / oracle you could execute dynamic sql pretty easily For sql server you can use either EXEC or sp_executesql DECLARE @sqlCommand varchar(1000) SET @sqlCommand = 'SELECT * FROM SOME_TABLE' --Use Exec EXEC (@sqlCommand) --or you can use the sp_executesql EXECUTE sp_executesql @sqlCommand If you are using oracle, then you would require use EXECUTE IMMEDIATE jsf-2jarfaceletsel 4 1 回答 1 This answer is useful 4 该#{resource}表达式最初设计用于仅在CSS 文件中使用，就像这样 .someclass { background-image: url(#{resource['somelibrary:img/some.png']}); } 它不打算在 中使用<h:outputstylesheet>，<h:outputscript>或者<h:graphicimage>应该按如下方式使用： <h:outputstylesheet library="somelibrary" name="css/some.css"><h:outputscript library="somelibrary" name="js/some.js"><h:graphicimage library="somelibrary" name="img/some.png">至于模板，只需在/META-INF/resources其中指定完整的相对路径。 <ui:composition template="/templates/template_pe_layout.xhtml">也可以看看： 在 JAR 中打包 Facelets 文件（模板、包含、组合） 将 JSF 前缀更改为后缀映射迫使我在 CSS 背景图像上重新应用映射 于 2012-06-08T17:14:31.447 回答 Related 1 ruby-on-rails - 如何使用 FactoryGirl 创建嵌入式文档？ 1 clearcase - 基本 ClearCase 中配置规范的详细信息 1 python - Github API 帖子未找到 404 2 vb.net - 尝试获取带参数的异步函数并返回工作 1 c# - 从动态类型中获取有用的调试信息 0 javascript - filepicker.io 印象笔记 1 vba - 返回 Excel 工作表中下一个空闲行的位置 2 java - 这里应该适合什么java数据结构 1 ruby-on-rails - bundle install 工作，但 bundle-show 给出错误“rails.git 尚未签出。请运行`bundle install`” 1 javascript - Easeljs HitTest 和 hitRadius Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641</ui:composition></h:graphicimage></h:outputscript></h:outputstylesheet></h:graphicimage></h:outputscript></h:outputstylesheet></ui:composition>

> ID：10953066
> 
> 赞同：2
> 
> 时间：
> 
> 标签：jsf-2, jar, facelets, el

I would like to place the Facelets template file for JSF in a JAR file.

I tried to reference it by EL as

```
<ui:composition template="#{resource['templates:template_pe_layout.xhtml']}"> 
```

which works perfect for CSS or images, but not for the composition template.

How could I achieve the goal?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T17:14:31.447

该`#{resource}`表达式最初设计用于仅**在**CSS 文件中使用，就像这样

```
.someclass {
    background-image: url(#{resource['somelibrary:img/some.png']});
} 
```

它不打算在 中使用`<h:outputStylesheet>`，`<h:outputScript>`或者`<h:graphicImage>`应该按如下方式使用：

```
<h:outputStylesheet library="somelibrary" name="css/some.css" />
<h:outputScript library="somelibrary" name="js/some.js" />
<h:graphicImage library="somelibrary" name="img/some.png" /> 
```

至于模板，只需在`/META-INF/resources`其中指定完整的相对路径。

```
<ui:composition template="/templates/template_pe_layout.xhtml"> 
```

### 也可以看看：

*   [在 JAR 中打包 Facelets 文件（模板、包含、组合）](https://stackoverflow.com/questions/3531432/jsf2-pages-into-a-jar)
*   [将 JSF 前缀更改为后缀映射迫使我在 CSS 背景图像上重新应用映射](https://stackoverflow.com/questions/6835499/changing-jsf-prefix-to-suffix-mapping-forces-me-to-reapply-the-mapping-on-css-ba/6835701#6835701)

# perl - perl- trim utf8 bytes to 'length' and sanitize the data

> ID：10953069
> 
> 赞同：4
> 
> 时间：2012-06-08T17:01:55.553
> 
> 标签：perl, utf-8

I have utf8 sequence of bytes and need to trim it to say 30bytes. This may result in incomplete sequence at the end. I need to figure out how to remove the incomplete sequence.

e.g

```
$b="\x{263a}\x{263b}\x{263c}";
my $sstr;

print STDERR "length in utf8 bytes =" . length(Encode::encode_utf8($b)) . "\n";
{
use bytes;
$sstr= substr($b,0,29);
}

#After this $sstr contains "\342\230\272\342"\0 
# How to remove \342 from the end 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-08T19:18:29.563

UTF-8 有一些简洁的属性，允许我们在处理 UTF-8 而不是字符时做你想做的事情。所以首先，你需要 UTF-8。

```
use Encode qw( encode_utf8 );
my $bytes = encode_utf8($str); 
```

现在，在代码点之间进行拆分。`0b0xxxxxxx`每个代码点的 UTF-8 编码都以匹配的字节或开头`0b11xxxxxx`，您永远不会在代码点的中间找到这些字节。这意味着你想在之前截断

```
[\x00-\x7F\xC0-\xFF] 
```

我们一起得到：

```
use Encode qw( encode_utf8 );

my $max_bytes = 8;
my $str = "\x{263a}\x{263b}\x{263c}";  # ☺☻☼

my $bytes = encode_utf8($str);
$bytes =~ s/^.{0,$max_bytes}(?![^\x00-\x7F\xC0-\xFF])\K.*//s;

# $bytes contains encode_utf8("\x{263a}\x{263b}")
#      instead of encode_utf8("\x{263a}\x{263b}") . "\xE2\x98" 
```

* * *

太好了，是吗？没有。以上可以在字素中间截断。字素（特别是“扩展的字素簇”）是人们将其视为单个视觉单元的东西。例如，“é”是一个字形，但可以使用两个代码点 ( ) 对其进行编码`"\x{0065}\x{0301}"`。如果您在两个代码点之间进行切换，它将是有效的 UTF-8，但“é”将变成“e”！如果这不可接受，则上述解决方案也不是。（奥列格的解决方案也存在同样的问题。）

不幸的是，UTF-8 的属性不再足以帮助我们。我们需要一次抓取一个字形，并将其添加到输出中，直到我们无法容纳一个。

```
my $max_bytes = 6;
my $str = "abcd\x{0065}\x{0301}fg";  # abcdéfg

my $bytes = '';
my $bytes_left = $max_bytes;
while ($str =~ /(\X)/g) {
   my $grapheme = $1;
   my $grapheme_bytes = encode_utf8($grapheme);
   $bytes_left -= length($grapheme_bytes);
   last if $bytes_left < 0;
   $bytes .= $grapheme_bytes;
}

# $bytes contains encode_utf8("abcd")
#      instead of encode_utf8("abcde")
#              or encode_utf8("abcde") . "\xCC" 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-08T17:52:58.330

首先，请不要使用`bytes`（并且永远不要假设 Perl 中有任何内部编码）。如文档所述：此编译指示反映了将 Unicode 合并到 perl 的早期尝试，并且已被取代 <...> 强烈建议不要将此模块用于除调试目的之外的任何其他用途。

要在行尾去除不完整的序列，假设它包含八位字节，请使用`Encode::decode`'s`Encode::FB_QUIET`处理模式在遇到无效序列后停止处理，然后将结果编码回：

```
my $valid = Encode::decode('utf8', $sstr, Encode::FB_QUIET);
$sstr = Encode::encode('utf8', $valid); 
```

请注意，如果您计划将来将其与另一种编码一起使用，则并非所有编码都支持这种处理方法。

# vagrant - How to debug "Vagrant cannot forward the specified ports on this VM" message

> ID：10953070
> 
> 赞同：49
> 
> 时间：2012-06-08T17:01:56.977
> 
> 标签：vagrant

I'm trying to start a Vagrant instance and getting the following message:

```
Vagrant cannot forward the specified ports on this VM, since they
would collide with another VirtualBox virtual machine's forwarded
ports! The forwarded port to 4567 is already in use on the host
machine.

To fix this, modify your current projects Vagrantfile to use another
port. Example, where '1234' would be replaced by a unique host port:

  config.vm.forward_port 80, 1234 
```

I opened VirtualBox, but I don't have any running boxes at the moment, so I'm stumped. How can I figure out which process is listening on 4567? Is there a way to list all Vagrant boxes running on my machine?

Thanks, Kevin

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2013-06-01T19:13:47.390

您可以通过运行查看您的机器上正在运行哪些 vagrant 实例

```
$ vagrant global-status
id       name    provider   state   directory
----------------------------------------------------------------------
a20a0aa  default virtualbox saved   /Users/dude/Downloads/inst-MacOSX
64bc939  default virtualbox saved   /Users/dude/svn/dev-vms/ubuntu14
a94fb0a  default virtualbox running /Users/dude/svn/dev-vms/centos5 
```

如果您没有看到任何正在运行的虚拟机，那么您的冲突不是 vagrant box（vagrant 知道的）。接下来要做的是启动 VirtualBox UI，并检查它是否有任何实例正在运行。如果您不想运行 UI，您可以：

```
ps -ef |grep VBox 
```

如果您正在运行 VirtualBox 实例，它们应该包含在该输出中。您应该能够杀死输出中包含 VirtualBox 的进程。一个问题是这些过程之一似乎存在进行保活。只需杀死最高的 VirtualBox 进程。如果你有一个 VirtualBox 镜像正在运行但 vagrant 不知道它，一些 Vagrant 目录可能已被手动删除，这意味着 Vagrant 失去了对实例的跟踪。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2014-08-05T15:40:31.193

请注意，您的 Vagrantfile并不是在启动 Vagrant 框/实例时**唯一使用的文件。**

当你得到这个：

```
~/dev/vagrant user$ vagrant reload
Vagrant cannot forward the specified ports on this VM, since they
would collide with some other application that is already listening
on these ports. The forwarded port to 8001 is already in use
on the host machine.

To fix this, modify your current projects Vagrantfile to use another
port. Example, where '1234' would be replaced by a unique host port:

  config.vm.network :forwarded_port, guest: 8001, host: 1234

Sometimes, Vagrant will attempt to auto-correct this for you. In this
case, Vagrant was unable to. This is usually because the guest machine
is in a state which doesn't allow modifying port forwarding.
~/dev/vagrant user$ 
```

实际上，您不仅使用 ~/dev/vagrant 中的 Vagrantfile，而且还使用通常位于此处的“box”分发 .box 文件中的文件：

```
~/.vagrant.d/boxes/trusty/0/virtualbox/Vagrantfile 
```

如果你看一下它，你会发现它有很多**默认**端口映射：

```
$ cat ~/.vagrant.d/boxes//trusty/0/virtualbox/Vagrantfile
$script = <<SCRIPT
bzr branch lp:jujuredirector/quickstart /tmp/jujuredir
bash /tmp/jujuredir/setup-juju.sh
SCRIPT

Vagrant.configure("2") do |config|
  # This Vagrantfile is auto-generated by 'vagrant package' to contain
  # the MAC address of the box. Custom configuration should be placed in
  # the actual 'Vagrantfile' in this box.

  config.vm.base_mac = "080027DFD2C4"
  config.vm.network :forwarded_port, guest: 22, host: 2122, host_ip: "127.0.0.1"
  config.vm.network :forwarded_port, guest: 80, host: 6080, host_ip: "127.0.0.1"
  config.vm.network :forwarded_port, guest: 8001, host: 8001, host_ip: "127.0.0.1"
  config.vm.network "private_network", ip: "172.16.250.15"
  config.vm.provision "shell", inline: $script

end

# Load include vagrant file if it exists after the auto-generated
# so it can override any of the settings
include_vagrantfile = File.expand_path("../include/_Vagrantfile", __FILE__)
load include_vagrantfile if File.exist?(include_vagrantfile) 
```

因此，继续编辑此文件以删除有问题的冲突转发端口：

```
 config.vm.network :forwarded_port, guest: 22, host: 2122, host_ip: "127.0.0.1"
  config.vm.network :forwarded_port, guest: 80, host: 6080, host_ip: "127.0.0.1"
  # config.vm.network :forwarded_port, guest: 8001, host: 8001, host_ip: "127.0.0.1" 
```

经过：

```
~/dev/vagrant user$ cp ~/.vagrant.d/boxes//trusty/0/virtualbox/Vagrantfile ~/.vagrant.d/boxes//trusty/0/virtualbox/Vagrantfile.old
~/dev/vagrant user$ vi ~/.vagrant.d/boxes//trusty/0/virtualbox/Vagrantfile 
```

并注意其他 Vagrantfiles 包含，即：

```
include_vagrantfile = File.expand_path("../include/_Vagrantfile", __FILE__) 
```

现在它起作用了：

```
$ vagrant up
Bringing machine 'default' up with 'virtualbox' provider...
==> default: Importing base box 'trusty'...
==> default: Matching MAC address for NAT networking...
==> default: Setting the name of the VM: vagrant_default_1401234565101_12345
==> default: Clearing any previously set forwarded ports...
==> default: Clearing any previously set network interfaces...
==> default: Preparing network interfaces based on configuration...
    default: Adapter 1: nat
    default: Adapter 2: hostonly
==> default: Forwarding ports...
    default: 22 => 2122 (adapter 1)
    default: 80 => 6080 (adapter 1)
    default: 22 => 2222 (adapter 1)
==> default: Running 'pre-boot' VM customizations...
==> default: Booting VM...
==> default: Waiting for machine to boot. This may take a few minutes...
    default: SSH address: 127.0.0.1:2222
    default: SSH username: vagrant
    default: SSH auth method: private key
    default: Warning: Connection timeout. Retrying...
==> default: Machine booted and ready!
==> default: Checking for guest additions in VM...
==> default: Configuring and enabling network interfaces...
==> default: Mounting shared folders...
    default: /vagrant => /Home/user/dev/vagrant/vagrant-docker
==> default: Running provisioner: shell...
    default: Running: inline script
... 
```

希望这可以帮助。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2012-06-14T17:05:13.940

正如消息所说，端口与主机箱发生冲突。我只需将端口更改为主机上的其他值。所以如果我收到错误

```
config.vm.forward_port 80, 1234 
```

然后我会将其更改为

```
config.vm.forward_port 80, 5656 
```

因为 1234 可能会在我的主机上使用。

为了实际检查任何机器上的端口，我使用该`tcpview`操作系统的实用程序并了解哪个端口在哪里使用。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-10-03T10:25:22.657

我遇到了这个问题，结果发现 RubyMine 仍然持有一个端口。通过运行以下命令，我发现了哪个应用程序正在占用端口（在我的情况下为 31337）：

```
lsof -i | grep LISTEN 
```

输出

```
node       1396 richard.nienaber    7u  IPv4 0xffffff802808b320      0t0  TCP *:20559 (LISTEN)
Dropbox    1404 richard.nienaber   19u  IPv4 0xffffff8029736c20      0t0  TCP *:17500 (LISTEN)
Dropbox    1404 richard.nienaber   25u  IPv4 0xffffff8027870160      0t0  TCP localhost:26165 (LISTEN)
rubymine  11668 richard.nienaber   39u  IPv6 0xffffff8024d8e700      0t0  TCP *:26162 (LISTEN)
rubymine  11668 richard.nienaber   65u  IPv6 0xffffff8020c6e440      0t0  TCP *:31337 (LISTEN)
rubymine  11668 richard.nienaber  109u  IPv6 0xffffff8024d8df80      0t0  TCP localhost:6942 (LISTEN)
rubymine  11668 richard.nienaber  216u  IPv6 0xffffff8020c6ef80      0t0  TCP localhost:63342 (LISTEN) 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2014-11-03T08:30:34.010

另请注意（至少在 Vagrant 1.6.4 中）有文件夹`~/.vagrant.d/data/fp-leases`，文件的名称为 等`8080`。`8081`刚刚删除此文件夹内容对我有帮助。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2019-08-02T07:37:30.463

Vagrant.configure("2") 做 |config|

config.vm.network “forwarded_port”，来宾：80，主机：8080，

```
auto_correct: true 
```

结尾

最后一个 :auto_correct 参数设置为 true 告诉 Vagrant 自动更正任何碰撞。在 vagrant up 或 vagrant reload 期间，Vagrant 将输出有关任何碰撞检测和自动更正的信息，因此您可以注意到并采取相应措施。

[https://www.vagrantup.com/docs/networking/forwarded_ports.html](https://www.vagrantup.com/docs/networking/forwarded_ports.html)

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2014-09-10T21:44:09.683

如果您使用 Proxifier（或类似的应用程序），请先尝试关闭它。这是我在 OSX 10.9 上使用 Proxifier 时遇到的问题。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2019-02-19T16:59:32.293

我的观察：我没有在端口 8000 上运行任何进程，所以基本上端口转发不起作用。修复：菲尔的回答提供了一个解决方案

```
~/.vagrant.d/boxes/ 
```

上面的路径有列出端口 8000 的其他版本的 vagrant 文件。一旦我使用以下命令将它们全部修剪，我就能够成功运行 vagrant up

```
vagrant box remove [name] --all 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2019-07-19T10:34:33.130

出路：

1.  $ vagrant 暂停
2.  $流浪者简历

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2018-09-26T19:30:56.097

我这样修复它：

1.  `vagrant suspend`
2.  关闭 RubyMine IDE 上的项目
3.  `vagrant resume`
4.  在 RubyMine IDE 上打开最近

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-02-04T18:41:57.013

您必须在当前目录中修改 Vagrantfile，包括以下命令：

```
config.vm.network "forwarded_port", guest: 4567, host: <a port not used by your host machine> 
```

请记住，还有一个隐藏文件夹 (.vagrant.d/) 包含您的 vagrant 环境的设置以及您的盒子的配置文件。通常，此文件夹位于您的主目录中。

例如

```
~/.vagrant.d/boxes/<your_box_name>/0/virtualbox/Vagrantfile 
```

通常这个文件包含另一个 Vagrantfile 位于`~/.vagrant.d/boxes/<your_box_name>/0/virtualbox/include/_Vagrantfile`

您还必须使用 port-forwarding 命令修改此文件

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2018-06-26T17:44:37.630

我遇到了这个问题，因为我有一个尝试运行 Postgres 的 VM，并且我在本地计算机上的端口 5432 上运行了 Postgres。

之后`vagrant resume`，我得到了错误：

> Vagrant 无法转发此 VM 上的指定端口，因为它们会与已经在这些端口上侦听的其他应用程序发生冲突。转发到 5432 的端口已在主机上使用。

查看端口 5432 上运行的内容：

```
o-ets-webdeveloper:portal me$ lsof -i :5432
COMMAND   PID     USER   FD   TYPE             DEVICE SIZE/OFF NODE NAME
postgres 1389     me    5u  IPv6 0x681a62dc601cf1e3      0t0  TCP localhost:postgresql (LISTEN)
postgres 1389     me    6u  IPv4 0x681a62dc6499362b      0t0  TCP localhost:postgresql (LISTEN) 
```

原来它是本地 Postgres，杀死这些进程让我能够`vagrant resume`成功运行。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2021-09-20T10:36:38.710

## 主机崩溃后

**在我的主机崩溃**后，我遇到了这个问题（配置从几周前就开始工作了）。我正在使用**VMware**提供程序。

### 问题

问题显然是这样的（我还没有 100% 理解）：

*   VMware 仍然有运行崩溃前的 Vagrant VM 的端口映射，这些映射是到 IP 的`192.166.157.131`。
*   当 Vagrant 启动时，它请求不同 IP 的映射。它无法获取它们，因为它们正在“使用中”。尽管 Vagrant 本身已经为同一个 Vagrant 框的先前运行进行了映射，但它报告了这些端口。
*   无论我在 Vagrant 方面做了什么，端口都不会被释放。

### 问题的根源（推测）

据推测，我的问题的根源是我的网络配置：

*   Vagrant 请求`config.vm.network "private_network", ip: 192.169.0.3`，它使用了 VMnet5，
*   但端口映射使用 NAT，在我的机器上是 VMnet8。

### 修复尝试 1

我已手动停用 VMnet5 并将我的 Vagrantfile 更改为 request `config.vm.network "private_network", ip: 192.169.157.131`，该地址已经具有所需的端口映射。（更简洁的解决方案是使用动态 IP via `config.vm.network "private_network", type: "dhcp"`，但这对我的设置不方便。）

它没有*帮助*。Vagrant 仍然抱怨端口不可用。

### 修复尝试 2

我删除了 VMware Desktop 中的端口映射（编辑 -> 虚拟网络编辑器）。

它没有*帮助*（你会相信吗？）。Vagrant 仍然抱怨端口不可用。 `netstat -ao`确实仍然将端口报告为 LISTENING。

我杀死了由`netstat`14032报告的进程。
`netstat`仍然报告端口正在侦听，现在被另一个进程杀死：
我杀死了那个进程 13492。
`netstat`仍然报告端口正在侦听，现在被另一个进程报告：
我杀死了那个进程 13340。
（注意*减少*进程 ID。）

`netstat`不再将端口报告为正在侦听。
Vagrant 可笑地*仍然*抱怨端口不可用。
`netstat`即使在出现 Vagrant 错误消息之后，也不再将端口报告为正在侦听。
嗯？
那些港口被占领的阴暗过去现在应该没有痕迹了！

### 修复尝试 3

我接下来计划重新启动我的主机并希望最好。但在我这样做之前，我关闭了 VMware Desktop GUI 并给了 Vagrant 最后一次尝试。

*然后它起作用了。*

要点：显然 VMware 基础架构有时会保留一个配置

*   比人们想要的更接近
*   并且比它自己的 GUI 声称的更接近。

* * *

## 回答 #14

> 赞同：-1
> 
> 时间：2021-10-18T18:24:08.040

仅仅因为你的机器上已经有另一个 Vagrantfile，所以它们都使用相同的端口，所以你只能打开新的 Vagrantfile。

创建一个转发端口映射，允许从主机上的端口访问机器内的特定端口。在下面的示例中：

```
# accessing "localhost:8080" will access port 80 on the guest machine.
  config.vm.network "forwarded_port", guest: 3000, host: 3000
  config.vm.network "forwarded_port", guest: 3001, host: 3001
  config.vm.network "forwarded_port", guest: 8080, host: 8080
  config.vm.network "forwarded_port", guest: 5000, host: 5000
  config.vm.network "forwarded_port", guest: 5432, host: 5432 >>> old port 
  config.vm.network "forwarded_port", guest: 5432, host: 1234 >>> new port 
```

只需将主机从 5432 更改为 1234 之类的任何内容。

* * *

## 回答 #15

> 赞同：-1
> 
> 时间：2020-12-18T02:49:22.070

在这里参考我的回答：[https ://superuser.com/a/1610804/1252585](https://superuser.com/a/1610804/1252585)

再次编写内容：

列出所有 LISTENING 端口：

```
$ netstat -a 
```

使用以下命令查找在所需端口上运行的进程的进程 ID：

```
$ netstat -ano | findstr :8080 
```

结果将显示为：

```
$ netstat -ano | findstr :5000
  TCP    0.0.0.0:5000           0.0.0.0:0              LISTENING       18024 
```

这里，18024 是 PID 或进程 ID。

然后使用以下命令杀死8080后的进程：

```
$ taskkill /PID 18024 /F 
```

或者`$ taskkill //PID 18024 //F`

结果将显示为：

```
$ taskkill //PID 18024 //F
SUCCESS: The process with PID 18024 has been terminated. 
```

# php - PDO 不会更新到 MySQL

> ID：10953075
> 
> 赞同：0
> 
> 时间：2012-06-08T17:02:14.840
> 
> 标签：php, mysql, pdo

我正在尝试使用 PDO 更新 MySQL 中字段的值，我尝试过使用不同类型的准备好的语句，但它们都不起作用。这是我的代码：

```
 $table = $_POST['table'];
    $field = $_POST['field'];
    $value = $_POST['value'];

    try{

       $available = "Available";
       $cero = 0;

       $q = "UPDATE ? SET $available = $cero WHERE ? = ? ";
       $stmt = $connection->getPdo()->prepare($q);  
       $stmt->execute( array ($table,$field,$value) );

       echo true;       

    }catch(PDOException $exception){
      echo $exception;
    } 
```

问题解决了：

```
 $q = "UPDATE $table SET $available = $cero WHERE $field = ? ";
   $stmt = $connection->getPdo()->prepare($q);  
   $stmt->execute( array ($value) ); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T17:08:43.680

您不能`?`在准备好的查询中使用表名或任何对象名（列、数据库等）来替换。参数化仅适用于值。你将不得不做：

```
$q = "UPDATE $table SET $available = $cero WHERE $field = ? ";
$stmt = $connection->getPdo()->prepare($q);  
$stmt->execute( array ($value) ); 
```

您尝试这样做的事实表明您正在从用户输入中获取表名，这是一个*非常*糟糕的主意，即使您正在转义它。

# jquery - 数据表-> Ajax 不工作

> ID：10953080
> 
> 赞同：0
> 
> 时间：2012-06-08T17:02:30.063
> 
> 标签：jquery, datatables

我正在尝试复制此功能：[http ://datatables.net/release-datatables/examples/api/row_details.html](http://datatables.net/release-datatables/examples/api/row_details.html)

该示例提供了此功能：

```
/* Formating function for row details */
function fnFormatDetails ( oTable, nTr )
{
    var aData = oTable.fnGetData( nTr );
    var sOut = '<table cellpadding="5" cellspacing="0" border="0" style="padding-left:50px;">';
    sOut += '<tr><td>Rendering engine:</td><td>'+aData[1]+' '+aData[4]+'</td></tr>';
    sOut += '<tr><td>Link to source:</td><td>Could provide a link here</td></tr>';
    sOut += '<tr><td>Extra info:</td><td>And any further details here (images etc)</td></tr>';
    sOut += '</table>';

    return sOut;
} 
```

我已将此功能更改为：

```
/* Formating function for row details */
function fnFormatDetails(oTable, nTr) {
    var aData = oTable.fnGetData(nTr);
    var sOut = jQuery.ajax({
        url: "ajax/order_history_orderlines.asp",
        type: 'post',
        data: { orderid: aData[1] },
        context: document.body
    });

    return sOut;
} 
```

通过 FireBug 进行调试时，我看到 ajax 响应一切正常。发出请求，请求成功，正在返回正确的信息。这是返回的内容：

```
<!-- Teplate for orderlines found in rs Record Set -->
<table cellpadding="5" cellspacing="0" border="0" style="padding-left: 50px;">

    <tr>
        <td>
            Quantity:
        </td>
        <td>
            1
        </td>
        <td>
            Description:
        </td>
        <td>
            48 Cans of drink
        </td>

        </tr>

</table> 
```

但是，当我单击 [+] 按钮时，它会展开该行，但“详细信息”行永远不会使用从 ajax 请求返回的表进行更新。

当我使用示例`sOut = <table>`等中的所有内容时，它可以工作。当我切换它以获取 ajax 请求时，它会停止工作并出现 0 个错误。

谁能看到我在这里缺少的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T17:10:25.823

您这里的代码不正确：

```
var sOut = jQuery.ajax({
    url: "ajax/order_history_orderlines.asp",
    type: 'post',
    data: { orderid: aData[1] },
    context: document.body
}); 
```

[`jQuery.ajax()`](http://api.jquery.com/jQuery.ajax/)不返回数据，它返回[jqXHR](http://api.jquery.com/Types/#jqXHR)对象。您需要使用`success`回调功能在成功的 ajax 调用上填充数据。

```
var sOut = jQuery.ajax({
    url: "ajax/order_history_orderlines.asp",
    type: 'post',
    data: { orderid: aData[1] },
    context: document.body,
    success: function(data, textStatus, jqXHR)
    {
      // do something with data(json object returned by call)
    }
}); 
```

# sql - Cannot find data type date in SQL Server 2005

> ID：10953081
> 
> 赞同：9
> 
> 时间：2012-06-08T17:02:32.517
> 
> 标签：sql, sql-server-2005

I am getting this error message while creating table with one of the column has data type as date

> Msg 2715, Level 16, State 7, Line 2
> Column, parameter, or variable #11: Cannot find data type date.

I have also tried to change the compatibility level

```
alter database test
set compatibility_level = 90
go 
```

and received an error message

```
Msg 102, Level 15, State 1, Line 2  
Incorrect syntax near '90'. 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-08T17:11:12.687

SQL Server 2005 仅支持 datetime（和 smalldatetime）数据类型。

请参阅[http://msdn.microsoft.com/en-us/library/ms187752%28v=sql.90%29.aspx](http://msdn.microsoft.com/en-us/library/ms187752%28v=sql.90%29.aspx)

# jakarta-ee - How do you run your Java EE integrated tests? Plus terminology confusion (embedded, managed, local, remote, ...)

> ID：10953087
> 
> 赞同：2
> 
> 时间：2012-06-08T17:03:26.433
> 
> 标签：jakarta-ee, testing, integration

I'm trying to set up integrated testing for my simple Java EE app that uses JAX-RS to expose a REST service (it's also an EJB) and JPA to store the underlying data, and I continue to struggle finding a solution that doesn't require manually setting up an external container/application server. I've done a lot of searching here and on the web for solutions, and ended up burning far too many weeks to get GlassFish 3.1.2 Embedded working, which I succeed doing until the final straw a week ago: conflicting documentation and bugs trying to create users to test security. Drat! I looked at JBoss AS 7, but the embedded product looks unsupported. I then tried rolling my own using a servlet container (Jetty, Grizzly, and Simple) to directly run Jersey. (I was eventually planning on adding in EclipseLink and Derby embedded.) All of these presented unexpected and blocking challenges in setting up and running the most basic JUnit tests; I couldn't get Jetty to run JAX-RS, and Grizzly didn't have HTTP Basic authentication, for example. Double drat! I then looked at Arquillian, but couldn't find JBoss AS 7 listed in their container adapters.

I have two questions: 1) This seems to be far, far harder to get working than I expected. If I assume it's not just me (please, it's not just me!), then why is it so hard? I'm wondering if the entire Java EE stack with its 30+ APIs is a house of cards that's very difficult to get stacked up right and doesn't lend itself to being shoved into a single jar. Or maybe people prefer to do integration testing on an external ("local"?) container that they start before running the tests.

Question 2): What is the standard terminology for the different kinds of test-container configurations? It seems inconsistent. For example, [http://mvnrepository.com/artifact/org.jboss.arquillian.container](http://mvnrepository.com/artifact/org.jboss.arquillian.container) lists "remote", "embedded", "managed", and "local", but yet I found "in-container" and "out-of-container" testing mentioned elsewhere.

Rather than use space on details on what failed above, I'm ready to listen to what this experience is trying to tell me, so I would really appreciate hearing what worked for you. Thanks in advance!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T17:10:55.910

我每天都有完全相同的问题。我的结论是：将业务层与服务接口层解耦。即：通过对业务层进行良好设计进行单元测试，并在需要时使用外部工具进行集成测试（例如 jmeter 或任何可以在已部署系统上进行功能测试的工具）。

大多数时候，我想测试业务逻辑，而不是服务抽象层。我的 jax-rs（或其他）处理程序通常只是业务层的包装器。

顺便说一句，我从未使用过 Arquillian。

我不知道这是否可以被认为是一个答案，这只是我的 2 美分；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-14T13:40:16.560

你正在尝试做的事情听起来像是我已经做了一段时间的事情了。

我目前正在使用[Arquillian](http://arquillian.org/ "阿奎里安")与 JBoss AS 7 一起运行，因为这是我们在生产中使用的应用程序服务器。Arquillian 支持托管模式（Arquillian 控制容器的启动和停止）、远程模式（Arquillian 不启动或停止服务器，但假定它在某处运行）和嵌入式模式。并非所有容器适配器都支持嵌入式模式，而且我所理解的 Glassfish 嵌入式有其公平份额的问题。Apache TomEE 提供了一个嵌入式容器，我在各种环境中都使用过它，而且效果很好。TomEE 适配器的一个好处是它由实际的 TomEE 团队维护，因此他们可以确保适配器始终与他们的容器兼容。TomEE 的启动/关闭速度非常快，因此测试基本上与单元测试一样快，差异几乎不明显。

```
<dependency>
    <groupId>org.apache.openejb</groupId>
    <artifactId>arquillian-tomee-embedded</artifactId>
    <version>1.0.0</version>
    <scope>provided</scope>
</dependency> 
```

JBoss AS 7 在其测试套件中使用 Arquillian 本身，因此您无需担心没有针对该容器测试 Java EE API 和实现。如果您希望构建是独立的并包含 JBoss AS 7 实例，您可以使用 jboss-as-dist 工件。如果您使用 Maven，您可以使用 maven-dependency-plugin 解压缩 JBoss AS 7 实例以用于您的测试套件：

```
<build>
  <plugin>
      <artifactId>maven-dependency-plugin</artifactId>
      <executions>
          <execution>
              <id>unpack</id>
              <phase>process-test-classes</phase>
              <goals>
                  <goal>unpack</goal>
              </goals>
              <configuration>
                  <artifactItems>
                      <artifactItem>
                          <groupId>org.jboss.as</groupId>
                          <artifactId>jboss-as-dist</artifactId>
                          <version>7.1.1.Final</version>
                          <type>zip</type>
                          <overWrite>false</overWrite>
                          <outputDirectory>target</outputDirectory>
                      </artifactItem>
                  </artifactItems>
              </configuration>
          </execution>
      </executions>
  </plugin>
</build> 
```

[（此处](https://github.com/tommysdk/showcase/blob/master/async-javaee6/pom.xml "这里")为 pom.xml 的完整示例）

如果您的代码在生产环境中的应用程序服务器中运行，但您没有进行集成测试，那么您真的无法确定您的代码在实际运行时中的行为方式。感谢 Arquillian，我已经能够在我最近的项目中编写集成测试，这些测试在应用程序服务器中执行，测试从通过 http 的 JAX-RS 端点、JPA ORM 映射和查询甚至到 NoSQL 数据库的业务逻辑和索引引擎。

如果您遇到 Arquillian的问题， [Arquillian 用户论坛](https://community.jboss.org/en/arquillian?view=discussions "Arquillian 用户论坛")会很有帮助。希望我的回答能对你的问题有所启发。

# facebook - 就像每个页面没有在个人资料上显示正确的 URL

> ID：10953093
> 
> 赞同：0
> 
> 时间：2012-06-08T17:03:44.063
> 
> 标签：facebook, facebook-graph-api, facebook-like

我正在使用 facebook 之类的社交插件，如下所示。

```
<fb:like send="true" width="320" show_faces="true" font=""></fb:like> 
```

如果没有定义href，则称这是选择当前页面。

我有一个新闻网站，我只想在每个页面上集成这个插件，当有人喜欢特定的新闻页面时，我希望它显示在用户个人资料中。

然而，现在情况并非如此。

我已经用 firebug 对其进行了调试，它正在向 facebook 获取/发送正确的 URL，但是在 facebook 个人资料上，我没有看到喜欢的 URL。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T17:14:12.687

你为什么不把实际的 URL 放到 fb:like ... 的 href 属性中呢？

# php - 用于 SEO 友好 URL 的 mod_rewrite

> ID：10953094
> 
> 赞同：2
> 
> 时间：2012-06-08T17:03:54.277
> 
> 标签：php, mysql, .htaccess, mod-rewrite, seo

我有一个 CMS 可以处理使用 CMS 创建的 SEO 友好 URL。因此，任何作为 like 扩展的`index.php`东西`www.url.com/index.php?id=slug`都很好地更改为`www.url.com/slug`.

但是，我也有一千多个使用未连接到我的 CMS 的 MYSQL 查询字符串创建的页面。所以我有：

```
www.url.com/item.php?id=001234&pg=author-title 
```

生成页面需要 id 和 pg 中的信息。我想要的是这些页面网址：

```
www.url.com/item/001234/author-title.html 
```

我查看了许多 mod_rewrite 教程，寻找所有方法来做到这一点，但我似乎无法让它发挥作用。

这是我的 .htaccess（请记住，这里的一些东西是由我的 CMS 使用和生成的：

*编辑：好的，根据到目前为止的答案，我已将 .htaccess 更改为以下内容：*

```
# Use PHP5 as default
AddHandler application/x-httpd-php5 .php
AddDefaultCharset UTF-8
# File modified on Dec 5 11:28:31 2011 by server
# For security reasons, mod_php is not used on this server. Use a php.ini file for php directives
# php_value default_charset "UTF-8"

Options -Indexes
Options +FollowSymLinks

# blocks direct access to the XML files - they hold all the data!
<Files ~ "\.xml$">
    Order allow,deny
    Deny from all
    Satisfy All
</Files>
<Files sitemap.xml>
        Order allow,deny
    Allow from all
    Satisfy All
</Files>

RewriteEngine on

# Usually it RewriteBase is just '/', but 
# replace it with your subdirectory path
RewriteBase /

# Usually it RewriteBase is just '/', but 
# replace it with your subdirectory path
RewriteBase /

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule /?([A-Za-z0-9_-]+)/?$ index.php?id=$1 [QSA,L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule  ^/?item/([0-9]+)/([a-zA-Z0-9_]+).html$ item.php?id=$1&pg=$2 [QSA,L] 
```

*编辑：在使用反馈更改 .htaccess 之后，重写的 URL 仍然没有产生预期的结果。我仍然得到一个404。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T17:09:55.493

改变

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule /?([A-Za-z0-9_-]+)/?$ index.php?id=$1 [QSA,L] #passes to CMS
RewriteRule ^/?([a-zA-Z_]+)/([a-zA-Z_]+).html$ item.php?id=$1&pg=$2 [QSA,L] #passes to your stuff 
```

至

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^/?item/([a-zA-Z_]+)/([a-zA-Z_]+).html$ item.php?id=$1&pg=$2 [QSA,L]
# conditions need to be repeated
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule /?([A-Za-z0-9_-]+)/?$ index.php?id=$1 [QSA,L] 
```

始终将更具体的规则置于更一般的规则之上。

除非您的项目 ID 使用字母，否则请使用：

```
RewriteRule ^/?item/([0-9]+)/([a-zA-Z_]+).html$ item.php?id=$1&pg=$2 [QSA,L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T17:09:32.837

您需要`item`在开头添加以匹配您提供的示例并对您的角色类进行一些更改。尝试：

```
RewriteRule ^item/([a-zA-Z0-9_]+)/([a-zA-Z0-9_]+)\.html$ item.php?id=$1&pg=$2 [QSA,L] 
```

这将匹配表单 item/[string of letters, numbers and underscore]/[string of letters, numbers and underscore].html

如果您的 ID 只是数字，您可以从第一个字符类中删除字母。

# jquery-mobile - jquerymobile中带有ul标签的div在CSS中创建行距

> ID：10953100
> 
> 赞同：0
> 
> 时间：2012-06-08T17:04:17.303
> 
> 标签：jquery-mobile

[http://jsfiddle.net/fLq3C/1/](http://jsfiddle.net/fLq3C/1/)

您可以在小提琴中看到这一点。在 div 里面我有一个 ul>li 标签，但它显示在一个行空间之后。知道我在做什么错吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T17:07:09.940

默认的 ul 属性有一个 margin-top 值，这就是将 li 向下推的原因。我建议要么给 ul 一个类，要么使用重置样式表，因此您必须明确定义边距。

[http://jsfiddle.net/fLq3C/2/](http://jsfiddle.net/fLq3C/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T06:03:42.537

检查没有'#divSearchList'样式的代码。然后它是固定的。

[http://jsfiddle.net/fLq3C/20/](http://jsfiddle.net/fLq3C/20/)

# google-apps-script - 有什么方法可以通过 App 脚本在输入框上设置“类型”属性？

> ID：10953102
> 
> 赞同：0
> 
> 时间：2012-06-08T17:04:33.933
> 
> 标签：google-apps-script, google-sites

我目前正在设计一个将使用大量 Apps 脚本的 Google 站点。

这个网页也将在 iOS 设备上使用，所以我试图通过使用可用的 HTML5 输入类型（特别是输入类型='电子邮件'和类型='数字'）让用户更容易输入正确的信息）。（例如在这里看到：[http](http://www.the-art-of-web.com/html/html5-form-validation/) ://www.the-art-of-web.com/html/html5-form-validation/ ）

据我在文档中看到的，没有办法做到这一点，但想问一下。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T20:54:45.670

不幸的是，使用 UiApp 输入元素这是不可能的。

# actionscript-3 - 影片剪辑 -> 位图数据和原点

> ID：10953105
> 
> 赞同：0
> 
> 时间：2012-06-08T17:04:47.977
> 
> 标签：actionscript-3, apache-flex

我正在尝试将 MovieClip 绘制到 BitmapData 上，这样它看起来就像我完成了 addChild(movieclip) 一样。

我似乎无法弄清楚我需要使用什么魔法公式来将动画保持在其原点附近。

这是相关的代码：

```
private function update(e:Event):void
{
    var bounds:Rectangle = movieClip.getBounds(movieClip);
    bitmapData = new BitmapData(maxMCwidth, maxMCheight, true, 0x0);
    bitmapData.draw(movieClip, new Matrix(1, 0, 0, 1, maxMCwidth - (bounds.x + bounds.width), maxMCheight - (bounds.y + bounds.height)));
    bitmap.bitmapData = bitmapData;
} 
```

完整代码在这里： http: [//pastebin.com/KyU5FPeJ](http://pastebin.com/KyU5FPeJ)

结果如下：

[http://www.swfcabin.com/open/1339173476](http://www.swfcabin.com/open/1339173476)

顶部动画是使用 addChild(mc) 完成的。底部动画是使用 bitmapData.draw 完成的。注意右边的剑在底部版本中没有水平移动。几乎就好像整个动画都在右对齐一样。

这也是我的 flashdevelop 项目的完整代码链接，以防有人想玩它：[https ://www.dropbox.com/s/gvt4scknqdian2a/bitmapdatadrawing.zip](https://www.dropbox.com/s/gvt4scknqdian2a/bitmapdatadrawing.zip)

我只希望两个版本看起来一样。我需要对我的 bitmapData 绘图代码进行哪些更改才能实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T19:34:34.393

好的，我想通了！

问题的原因是我没有正确计算 maxMCwidth 或 maxMCheight。我正在通过电影剪辑寻找最宽/最高的单帧。但是这并没有考虑到跨帧边界的位置会发生变化。为了获得整个动画的实际最大宽度/高度，我使用了以下代码：

```
maxBounds = new Rectangle();
for (var i:uint = 0; i < movieClip.totalFrames; i++)
{
    var tempBounds:Rectangle = movieClip.getBounds(movieClip);
    maxBounds = maxBounds.union(tempBounds); 
    movieClip.nextFrame();
} 
```

然后这使我能够修复翻译矩阵：

```
bitmapData.draw(movieClip, new Matrix(1, 0, 0, 1, -maxBounds.x, -maxBounds.y)); 
```

就像这样，它适用于我测试过的每一个动画。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T18:57:30.073

好的，我无法让您的项目运行，因为您没有提供主 mxml。
但是，我想我找到了你的问题。
我认为 getBounds 不会返回您认为的值。
我无法查看骨架 swc，但我有一种感觉，其中有一个物体离开屏幕的顶部或底部，并且您编码它的方式会导致它缩小以使其适合。
getBounds 可能会将其添加到高度。

```
bitmapData = new BitmapData(movieClip.width, movieClip.height, true, 0x0);
bitmapData.draw(movieClip, new Matrix(1, 0, 0, 1, movieClip.width/2, movieClip.height/2 )); 
bitmap = new Bitmap(bitmapData);
bitmap.x = 70;
bitmap.y = 200; 
```

在此处记住未经测试的代码。:(

# android - 如何像这样自定义Android中的标签？

> ID：10953108
> 
> 赞同：0
> 
> 时间：2012-06-08T17:04:50.490
> 
> 标签：android

我是 android 开发的新手，我正在开发 TabHost，我需要自定义选项卡，下面是屏幕截图链接，我想如何显示我的选项卡。

![在此处输入图像描述](../Images/fcb15467c8ccb5a38d7c3418871019e7.png)

开始中的文本应该是动态的，并且可以根据选项卡单击在屏幕截图中更改，如果我选择主页，则文本应更改为主页等。

请帮我解决这个问题谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T17:12:47.180

如果我没记错的话，这是一个 ActionBar，您可以将**ActionBarSherlock**用于您的应用程序，它位于[此处](http://actionbarsherlock.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T17:11:23.703

这就是所谓的ActionBar。如果您在 3.0 或更高版本下进行开发，则它是标准的。如果你想支持更早的版本，你可以查看 Greendroid 或 ActionBar Sherlock 库；-)

# php - 使用 PHP 读取二进制电子邮件附件 (CSV)

> ID：10953117
> 
> 赞同：0
> 
> 时间：2012-06-08T17:05:43.143
> 
> 标签：php, email, attachment

我们收到了带有 CSV 附件的自动电子邮件。使用 PHP，我通过 IMAP 获取邮件。我可以抓取电子邮件和附件没问题。但是，CSV 以八位字节流的形式附加。

我怎样才能将其转换为我可以实际使用的东西？目前在阅读内容时，我得到的东西看起来像这样：

NzA1MTA1NTgxMzAsODgxDQo3MDUxMDU1ODEyMCw1NzkNCjcwNTEwNTU4MTEwLDQ3MQ0KNzA1MTA1==

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T17:10:58.577

使用`base64_decode()`.

[http://php.net/manual/en/function.base64-decode.php](http://php.net/manual/en/function.base64-decode.php)

更好的是，查看电子邮件中的编码标头，这样您就知道某些内容实际上是否按照您期望的方式进行了编码。

# android - 安卓数组列表 作为可包裹传递

> ID：10953121
> 
> 赞同：23
> 
> 时间：2012-06-08T17:06:03.120
> 
> 标签：android, parameters, parcelable

**现在修改代码以反映公认的解决方案。**

**这现在用作如何将自定义 ArrayList 传递到 DialogFragment 的工作示例。**

我正在使用 newInstance 上的 Bundle 将自定义对象的 ArrayList 传递给 DialogFragment。在 newInstance 中正确接收了 arraylist。对 putParcelable 的调用执行良好（没有错误），但是在 ArrayList 对象的 parcelable 代码中放置断点表明在设置或获取数据时未调用 parcel 方法。

我是否正确为 ArrayList 创建一个 LocalityList 类并使其可打包，或者 Locality 类本身应该是可打包的？

对话片段

```
/**
 * Create a new instance of ValidateUserEnteredLocationLocalitySelectorFragment, providing "localityList"
 * as an argument.
 */
public static ValidateUserEnteredLocationLocalitySelectorFragment newInstance(LocalityList localityList) {

    ValidateUserEnteredLocationLocalitySelectorFragment fragmentInstance = new ValidateUserEnteredLocationLocalitySelectorFragment();

    // Supply location input as an argument.
    Bundle bundle = new Bundle();
    bundle.putParcelable(KEY_LOCALITY_LIST, localityList);
    fragmentInstance.setArguments(bundle);

    return fragmentInstance;
}

/**
 * Retrieve the locality list from the bundle
 */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    mLocalityList = getArguments().getParcelable(KEY_LOCALITY_LIST);
}

 @Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {

    View view = inflater.inflate(R.layout.validate_user_entered_location, container, false);

    mLocalityListView = (ListView) view.findViewById(R.id.dialogLocalityListView);
    mAdapter = new SearchLocationLocalitiesListAdapter(getActivity(), mLocalityList);
    mLocalityListView.setAdapter(mAdapter);

    return view;
} 
```

LocalityList 类

```
import java.util.ArrayList;

import android.os.Parcel;
import android.os.Parcelable;

public class LocalityList extends ArrayList<Locality> implements Parcelable {

    private static final long serialVersionUID = 663585476779879096L;

    public LocalityList() {
    }

    @SuppressWarnings("unused")
    public LocalityList(Parcel in) {
        this();
        readFromParcel(in);
    }

    private void readFromParcel(Parcel in) {
        this.clear();

        // First we have to read the list size
        int size = in.readInt();

        for (int i = 0; i < size; i++) {
            Locality r = new Locality(in.readString(), in.readDouble(), in.readDouble());
            this.add(r);
        }
    }

    public int describeContents() {
        return 0;
    }

    public final Parcelable.Creator<LocalityList> CREATOR = new Parcelable.Creator<LocalityList>() {
        public LocalityList createFromParcel(Parcel in) {
            return new LocalityList(in);
        }

        public LocalityList[] newArray(int size) {
            return new LocalityList[size];
        }
    };

    public void writeToParcel(Parcel dest, int flags) {
        int size = this.size();

        // We have to write the list size, we need him recreating the list
        dest.writeInt(size);

        for (int i = 0; i < size; i++) {
            Locality r = this.get(i);

            dest.writeString(r.getDescription());
            dest.writeDouble(r.getLatitude());
            dest.writeDouble(r.getLongitude());
        }
    }
} 
```

地方类

```
import android.os.Parcel;
import android.os.Parcelable;

public class Locality implements Parcelable {

    private String mDescription;
    private double mLatitude;
    private double mLongitude;

    public Locality(String description, double latitude, double longitude) {
        super();
        this.mDescription = description;
        this.mLatitude = latitude;
        this.mLongitude = longitude;
    }

    public Locality(){
        super();
    }

    public String getDescription() {
        return mDescription;
    }

    public void setDescription(String description) {
        this.mDescription = description;
    }

    public double getLatitude() {
        return mLatitude;
    }

    public void setLatitude(double latitude) {
        this.mLatitude = latitude;
    }

    public double getLongitude() {
        return mLongitude;
    }

    public void setLongitude(double longitude) {
        this.mLongitude = longitude;
    }

    @SuppressWarnings("unused")
    public Locality(Parcel in) {
        this();
        readFromParcel(in);
    }

    private void readFromParcel(Parcel in) {
        this.mDescription = in.readString();
        this.mLatitude = in.readDouble();
        this.mLongitude = in.readDouble();
    }

    public int describeContents() {
        return 0;
    }

    public final Parcelable.Creator<Locality> CREATOR = new Parcelable.Creator<Locality>() {
        public Locality createFromParcel(Parcel in) {
            return new Locality(in);
        }

        public Locality[] newArray(int size) {
            return new Locality[size];
        }
    };

    @Override
    public void writeToParcel(Parcel dest, int flags) {
        dest.writeString(mDescription);
        dest.writeDouble(mLatitude);
        dest.writeDouble(mLongitude);
    }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-09-14T16:09:19.080

我知道这个问题已经很老了，但是由于我最初是来这里寻找答案的，所以我想分享我的经验。

是的，你需要为你的`Locality`班级实现 Parcelable ，但就是这样。

如果您`LocalityList`只是 ArrayList 的包装器，那么您不需要它。

只需使用[putParcelableArrayList](http://developer.android.com/reference/android/os/Bundle.html#putParcelableArrayList(java.lang.String,%20java.util.ArrayList%3C?%20extends%20android.os.Parcelable%3E))方法。

```
ArrayList<Locality> localities = new ArrayList<Locality>;
...
Bundle bundle = new Bundle();
bundle.putParcelableArrayList(KEY_LOCALITY_LIST, localities);
fragmentInstance.setArguments(bundle);

return fragmentInstance; 
```

并使用...检索它

```
localities = savedInstanceState.getParcelableArrayList(KEY_LOCALITY_LIST); 
```

因此，除非您出于其他原因需要自定义 ArrayList，否则您可以避免做任何额外的工作，而只为您的 Locality 类实现 Parcelable。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-08T17:10:07.283

是的，让`Locality`类本身*Parcelable*，不要忘记*初始化*

```
ArrayList<Locality> mList= new ArrayList<Locality>(); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-26T22:58:25.740

我通常使用的技巧是使用 Gson（来自谷歌）将列表解析为 Json。另一方面，我只是将 Json 中的字符串分回一个新列表。

从来没有注意到任何滞后。

# php - Cookies 无法保持帐户登录状态

> ID：10953122
> 
> 赞同：1
> 
> 时间：2012-06-08T17:06:17.213
> 
> 标签：php, html

我今天继续建立我的网站，我意识到每次我去测试它时，我都必须继续登录我网站上的帐户，这很正常，除非我将 cookie 设置为在 30 天内过期，出于某种原因我不这样做'认为他们没有正确地完成他们的工作，不幸的是我没有很多关于他们的知识来解决问题，这里是在登录时设置 cookie 的代码，如果您需要更多信息，请告诉我.

```
$encryptedID = base64_encode("g4enm2c0c4y3dn3727553$id");
setcookie("idCookie", $encryptedID, time()+60*60*24*100, "/"); // Cookie set to expire in about 30 days
setcookie("passCookie", $pass, time()+60*60*24*100, "/"); // Cookie set to expire in about 30 days 
```

上面还有一些代码（可能有帮助）

```
if($login_check > 0){ 
    while($row = mysql_fetch_array($sql)){
        // Pleae note: Adam removed all of the session_register() functions cuz they were deprecated and
        // he made the scripts to where they operate universally the same on all modern PHP versions(PHP 4.0  thru 5.3+)
        // Create session var for their raw id
        $user_id = $row["user_id"];   
        $_SESSION['user_id'] = $user_id;
        // Create the idx session var
        $_SESSION['idx'] = base64_encode("g4p3h9xfn8sq03hs2234$id");
        // Create session var for their username
        $login_username = $row["login_username"];
        $_SESSION['login_username'] = $login_username;
        // Create session var for their password
        $login_userpass = $row["login_password"];
        $_SESSION['login_userpass'] = $login_userpass;
        $sql_login = mysql_query("SELECT no_of_logins FROM users WHERE user_id='$user_id'");
        $array = mysql_fetch_assoc($sql_login);
        $no_of_logins = $array['no_of_logins'];
        //$sql_login_check = mysql_num_rows($sql_login);
        if($no_of_logins == "0"){
            mysql_query("UPDATE users SET first_login=now() WHERE user_id='$user_id' LIMIT 1");
        }
        mysql_query("UPDATE users SET last_login=now() WHERE user_id='$user_id' LIMIT 1");
        mysql_query("UPDATE users SET online = '1' WHERE user_id='$user_id' LIMIT 1");
        mysql_query("UPDATE users SET no_of_logins = no_of_logins + 1 WHERE user_id='$user_id' LIMIT 1");
        mysql_query("UPDATE system SET total_logins = total_logins + 1");
        mysql_query("UPDATE system SET no_online = no_online + 1");
    } // close while
    // Remember Me Section
    $encryptedID = base64_encode("g4enm2c0c4y3dn3727553$id");
    setcookie("idCookie", $encryptedID, time()+60*60*24*100, "/"); // Cookie set to expire in about 30 days
    setcookie("passCookie", $pass, time()+60*60*24*100, "/"); // Cookie set to expire in about 30 days
    // All good they are logged in, send them to homepage then exit script
    header("Location: profile.php");
    exit();
} else { // Run this code if login_check is equal to 0 meaning they do not exist
    $loginErrorMsg = "Incorrect login data, please try again";
    $errorDisplay = '';
} 
```

感谢您的任何帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T17:10:05.620

我在您的代码中没有看到太多错误，除了：

```
time() + 60*60*24*100 
```

那是未来的 100 天，而不是 30 天 :)

**更新**

当您关闭浏览器时，会话 cookie 过期是正常的，因为它们没有在响应标头中设置明确的过期日期。

这正是您创建持久 cookie 的原因；当会话过期（或更可能不存在）时，必须使用从这些 cookie 收集的数据填充新会话。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T17:12:12.517

会话过期和 cookie 过期是不同的东西。您不应该将 PHP 会话设置为 30 天，默认为 1 小时（可能是 30 分钟）。如果用户来到站点并拥有特殊的 cookie，您需要一种自动重新登录用户（重新启动 PHP 会话）的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T17:09:35.980

如果我没记错的话，在配置的会话超时时间过去后，会话仍然会超时（释放有限的服务器资源......这是一件好事），即使您的 cookie 仍然存在于浏览器中。

请参阅[PHP 会话超时](https://stackoverflow.com/questions/3068744/php-session-timeout)

您是在 20 分钟不活动（而不是您希望的 30 天）之后看到会话超时，还是在您登录、关闭浏览器、打开浏览器并尝试访问该站点时立即超时再次？

# postgresql - 在 Postgres 9.1 中确定表的 OID？

> ID：10953123
> 
> 赞同：37
> 
> 时间：2012-06-08T17:06:25.527
> 
> 标签：postgresql, postgresql-9.1

有谁知道如何在 Postgres 9.1 中找到表的 OID？我正在编写一个更新脚本，它需要在尝试创建列之前测试表中是否存在列。这是为了防止在第一个错误之后运行脚本。

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-06-08T21:14:31.917

要获取表 OID，请转换为[对象标识符类型](https://www.postgresql.org/docs/current/interactive/datatype-oid.html) `regclass`（连接到同一个数据库时）：

```
SELECT 'mytbl'::regclass::oid; 
```

这将查找具有给定名称的第一个表（或视图等），[`search_path`](https://stackoverflow.com/questions/9067335/how-to-create-table-inside-specific-schema-by-default-in-postgres/9067777#9067777)如果未找到，则会引发异常。

模式限定表名以删除对搜索路径的依赖：

```
SELECT 'myschema.mytbl'::regclass::oid; 
```

在 Postgres **9.4**或更高版本中，您还可以使用`to_regclass('myschema.mytbl')`，如果找不到表，它不会引发异常：

*   [如何检查给定模式中是否存在表](https://stackoverflow.com/questions/20582500/how-to-check-if-a-table-exists-in-a-given-schema/24089729#24089729)

那么只需要查询catalog表[`pg_attribute`](https://www.postgresql.org/docs/current/static/catalog-pg-attribute.html)中是否存在该列即可：

```
SELECT TRUE AS col_exists
FROM   pg_attribute 
WHERE  attrelid = 'myschema.mytbl'::regclass
AND    attname  = 'mycol'
AND    NOT attisdropped  -- no dropped (dead) columns
-- AND attnum > 0        -- no system columns (you may or may not want this) 
```

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2012-06-08T18:18:50.170

`pg_class`您应该查看postgres 目录表。每个表应该有一行，表名在列`relname`中，oid 在隐藏列`oid`中。

您可能还对`pg_attribute`目录表感兴趣，其中每个表列包含一行。

请参阅：[http](http://www.postgresql.org/docs/current/static/catalog-pg-class.html) ://www.postgresql.org/docs/current/static/catalog-pg-class.html和[http://www.postgresql.org/docs/current/static/catalog-pg-attribute.html](http://www.postgresql.org/docs/current/static/catalog-pg-attribute.html)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-10-07T07:00:35.090

```
SELECT oid FROM pg_class WHERE relname = 'tbl_name' AND relkind = 'r'; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-09T22:50:01.270

只是为了完成我想补充的可能性，存在一种用于删除列的语法，以免出错：

ALTER TABLE mytbl DROP COLUMN IF EXISTS mycol

见[http://www.postgresql.org/docs/9.0/static/sql-altertable.html](http://www.postgresql.org/docs/9.0/static/sql-altertable.html)

然后，您可以安全地添加您的列。

# android - 使用 createChooser Intent 从 Activity A 启动 ActivityForResult 我想完成 Activity A 但不是在用户按下后退按钮时

> ID：10953125
> 
> 赞同：3
> 
> 时间：2012-06-08T17:06:38.540
> 
> 标签：android, android-activity, android-intent, share, activity-finish

所以我在活动 A 中有这个：

```
startActivityForResult(Intent.createChooser(share, "Share using"), 0); 
```

它启动一个选择器以使用活动 B 共享某些内容。当活动 B 完成时，我希望活动 A 也完成，所以：

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent intent){
    super.onActivityResult(requestCode, resultCode, intent);

    this.finish();

} 
```

问题在于，当用户打开时按下后式按钮时，Active A完成……我不想发生。我曾尝试覆盖 Activity A 中的 onBackPressed 方法，但这似乎在选择器打开时不适用。请帮我。

更新：我应该提到活动 B 不在我的控制之下，并且是用户决定与之共享的任何内容。

更新2：问题是选择器活动和用户从选择器中选择的活动被认为是相同的活动，因此当用户关闭活动B（用于共享文本的活动）时，onActivityResult 得到相同的结果代码和与选择器活动中的 requestCode 相同。必须有办法解决这个问题，但我想不出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T17:13:31.377

您应该在调用之前测试返回 requestCode 和 resultCode 的内容

`this.finish();`

这样，如果用户在选择某物之前按下后退按钮，您的活动 A 将不会被破坏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-01T17:46:55.420

您需要检查它是否是**a)**正确的活动和**b)**正确的结果代码。您的 onActivityResult 应如下所示：

```
@Override 
protected void onActivityResult(int requestCode, int resultCode, Intent intent){
    super.onActivityResult(requestCode, resultCode, intent);

    if (requestCode == 0) {
        if (resultCode == RESULT_OK) {
           this.finish();
        }
    }
} 
```

# asp.net - 如何使用 asp.net mvc 3 和 adobe flash 媒体服务器录制网络摄像头视频？

> ID：10953126
> 
> 赞同：2
> 
> 时间：2012-06-08T17:06:38.783
> 
> 标签：asp.net, flash, adobe, webcam, record

我想在 asp.net mvc 3 应用程序中从网络摄像头录制视频并将其流式传输到 Adob​​e Flash Media Server 以保存文件以供以后查看。我已经用谷歌搜索了大约 2 个小时，但没有运气。我一定是因为找不到答案而失明。谁能指出我正确的方向？任何链接到一个体面的教程或提示？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T20:23:49.970

您将需要编写一个 Actionscript 应用程序或一个 Flex 应用程序，将网络摄像头附加到 NetStream，然后将该流发布到 Flash Media Server (FMS)。然后将此应用程序编译成 SWF 并将 SWF 嵌入到您的 asp 应用程序的 HTML 中。

使用或不使用 Flex 框架执行此操作的 Actionscript 代码基本相同。这些概念是：

*   访问网络摄像头，Flash 播放器会自动显示一个安全对话框，询问用户是否允许

*   要将相机输出显示给用户，请将其附加到 Video 对象并将 Video 添加到舞台。在 Flex 应用程序中，Video 对象需要包装在 Flex 容器中（这只是区别）。

*   创建一个 NetConnection 并将其连接到 FMS。您将事件侦听器附加到 NetConnection 以了解它何时连接（以便您可以继续），或者它是否失败。

*   连接后，创建一个 NetStream，将网络摄像头附加到它，然后发布到 FMS。

这是一个其他人很好写的[例子。](http://blog.ninethsense.com/publish-and-receive-webcam-with-flex-on-flash-media-server/)

# asp.net - 存储更新、插入或删除语句影响了意外的行数 (0)" 删除函数中的错误

> ID：10953128
> 
> 赞同：0
> 
> 时间：2012-06-08T17:06:53.970
> 
> 标签：asp.net, .net, asp.net-mvc-3, entity-framework

每个任务都有对其分配目标的引用。当我尝试删除任务，然后目标我得到错误

“存储更新、插入或删除语句影响了意外数量的行 (0)。自加载实体以来，实体可能已被修改或删除。刷新 ObjectStateManager 条目。” 就行 _goalRepository.Delete(goalId);

我究竟做错了什么？

```
 [HttpPost]
    public void DeleteGoal(int goalId, bool deleteTasks)
    {
        try
        {
            if (deleteTasks)
            {
                Goal goalWithTasks = _goalRepository.GetWithTasks(goalId);

                foreach (var task in goalWithTasks.Tasks)
                {
                    _taskRepository.Delete(task.Id);
                }
                goalWithTasks.Tasks = null;
                _goalRepository.Update(goalWithTasks);

            }

            _goalRepository.Delete(goalId);

        }
        catch (Exception ex)
        {
            Exception deleteException = ex;
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T17:37:24.110

问题很可能是因为您试图在页面视图中保持并重用上下文。你应该创建一个新的上下文，做你的工作，然后原子地处理上下文。它被称为工作单元模式。

这样做的主要原因是上下文维护了一些关于它所看到的数据库行的状态信息，如果该状态信息变得陈旧或过时，那么你会得到这样的异常。

使用工作单元模式还有很多其他原因，我建议您进行网络搜索并进行一些阅读作为教育练习。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T18:15:15.243

不过，这可能与数据访问无关。您在迭代列表时从列表中删除项目，如果您使用的是普通列表，这将导致问题。在不了解 EF 内部的情况下，我的猜测是您对存储库的删除调用正在更改您正在迭代的同一个列表。

尝试一次迭代列表，并在单独的列表中记录要删除的任务 ID。然后当你完成迭代后，在任务列表上调用 delete。例如：

```
var tasksToDelete = new List<int>();
foreach (var task in goalWithTasks.Tasks)
{
    tasksToDelete.Add(task.Id);
}

foreach (var id in tasksToDelete)
{
    _taskRepository.Delete(id);
} 
```

这可能不是您的问题的原因，但最好不要更改您正在迭代的集合。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-22T19:50:23.530

我在工作中遇到了这个问题（我是实习生），我在尝试删除在其他数据表中引用的设备时遇到了这个错误。

我在尝试删除设备之前删除了所有引用，但是引用删除发生在另一个具有自己的数据库上下文的模型中，引用删除将保存在模型的上下文中。但是设备模型的上下文不会知道刚刚在另一个模型的上下文中发生的更改，这就是为什么当我尝试删除设备然后保存更改（例如：db.SaveChanges()）时会发生错误（设备上下文仍然认为在其他表格中提到了该设备）。

我的解决方案是在尝试删除设备之前重新分配上下文：

db = new DatabaseContext();

现在，新分配的上下文具有数据库的最新快照，并且知道所做的所有更改。删除没有问题。

希望我的经验有所帮助。

# sql - SQL 按两列的最大值排序

> ID：10953138
> 
> 赞同：10
> 
> 时间：2012-06-08T17:07:24.633
> 
> 标签：sql, postgresql

我有一个带有一些双精度的 PostgreSQL 表，它们存储百分比。所以假设列是`pc_1`和`pc_2`。

我想要的是按这两列中的哪一列降序排列，然后再按另一列降序排列。

所以如果我们的数据如下：

```
id  pc_1  pc_2 
 1  12.5  11.0
 2  10.0  13.2
 3  13.2  9.0 
```

```
select * from mytable order by <something> 
```

会给：

```
 2  10.0  13.2
 3  13.2  9.0
 1  12.5  11.0 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-06-08T17:08:43.903

```
SELECT  *
FROM    mytable
ORDER BY
        GREATEST(pc_1, pc_2) DESC, LEAST(pc_1, pc_2) DESC 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-08T17:10:11.720

```
select *
from mytable
order by 
case when pc_1 > pc_2 then pc_1 else pc_2 end desc,
case when pc_1 > pc_2 then pc_2 else pc_1 end desc 
```

# mysql - 加入性能：Oracle vs MySQL

> ID：10953143
> 
> 赞同：2
> 
> 时间：2012-06-08T17:08:21.253
> 
> 标签：mysql, sql, performance, oracle

给定一个简化为以下形式的查询：

```
select b.field1
from table_a a
    inner join table_b b on b.field1 = a.field1
    left join table_c c on c.field1 = a.field1
    left join table_d d on d.field1 = b.field1
    left join table_e e on e.field1 = b.field6
group by b.field1,
         b.field2,
         b.field3,
         b.field4,
         b.field5,

         e.field2,
         e.field3
; 
```

有了一定数量的数据，它在 Oracle 中运行时间为 20 秒。Oracle 中没有任何索引。迁移到 MySQL 中的查询不想完成（在几分钟内执行）。有问题的每个字段都在 MySQL 中建立索引。`Explain`告诉一切都很好。

仍然无法工作后，分组字段获得了多列索引。依然没有。

MySQL性能仍然存在巨大泄漏可能是什么问题？有没有加快速度的方法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-08T17:50:51.213

`Oracle`能够进行散列连接和合并连接，`MySQL`不是。

由于您的表没有以任何方式过滤，因此散列连接将是进行连接的最有效方法，尤其是在您没有任何索引的情况下。

使用嵌套循环，即使所有连接字段都被索引，`MySQL`也需要在循环中从前导表中对每个值进行索引查找（每次从根索引页开始），然后进行表查找以检索记录，然后对每个连接的表重复此操作。这涉及大量随机搜索。

另一方面，哈希连接需要扫描一次较小的表（构建哈希表），然后扫描一次较大的表（搜索构建的哈希表）。这涉及速度更快的顺序扫描。

此外，对于嵌套循环，只能驱动左连接表（在内部循环中扫描），而使用散列连接表的任一侧都可以是前导（扫描）或驱动（散列然后搜索）。这也会影响性能。

`MySQL`的优化器虽然确实支持其他引擎所缺乏的一些方便的技巧，但与其他引擎相比功能非常有限，并且目前既不支持散列连接也不支持合并连接。因此，这样的查询很可能会很慢`MySQL`，即使它在相同数据上的其他引擎上很快。

# .net - 防止动态列名中的 SQL 注入

> ID：10953145
> 
> 赞同：6
> 
> 时间：2012-06-08T17:08:23.230
> 
> 标签：.net, sql, vb.net, postgresql, sql-injection

如果不在我的系统的一部分（使用 Postgres）中编写一些动态 sql 条件，**我**就无法逃脱。

我的问题是如何最好地避免使用我目前使用的方法进行 SQL 注入。

编辑（推理）：许多表中有许多列（一个（仅）增长并在其他地方维护的数字）。我需要一种方法来允许用户决定他们想要查询哪个（预定义）列（并在必要时应用字符串函数）。查询本身对于用户来说太复杂了，无法自己编写，他们也无权访问数据库。有 1000 名用户有不同的要求，我需要尽可能保持灵活性——除非主查询需要更改，否则我不应该重新访问代码——此外，无法知道用户需要什么条件采用。

我有对象（通过 Web 服务接收）为一些大型 sql 查询生成条件（生成方法如下 - 它还不完美）。

这`_FieldName`是用户可编辑的（参数名称是，但它不需要），我担心它可能是一个攻击媒介。我在字段名称周围加上双引号（[请参阅带引号的标识符](http://www.postgresql.org/docs/8.2/static/sql-syntax-lexical.html)）以尝试清理字符串，这样它就永远不会成为关键字。我还可以根据字段列表查找字段名称，但很难及时维护。

不幸的是，用户必须输入条件标准，我确定必须有更多我可以添加到 sanatize 方法？并引用列名使其安全吗？（我有限的测试似乎是这样认为的）。

一个示例构建条件是“AND upper(brandloaded.make) like 'O%' and upper(brandloaded.make) not like 'OTHERBRAND'”...

任何帮助或建议表示赞赏。

```
Public Function GetCondition() As String
   Dim sb As New Text.StringBuilder

   'put quote around the table name in an attempt to prevent some sql injection
   'http://www.postgresql.org/docs/8.2/static/sql-syntax-lexical.html
   sb.AppendFormat(" {0} ""{1}"" ", _LogicOperator.ToString, _FieldName)

   Select Case _ConditionOperator
      Case ConditionOperatorOptions.Equals
          sb.Append(" = ")

      ...

   End Select

   sb.AppendFormat(" {0} ", Me.UniqueParameterName) 'for parameter

   Return Me.Sanitize(sb)

End Function

Private Function Sanitize(ByVal sb As Text.StringBuilder) As String

   'compare against a similar blacklist mentioned here: http://forums.asp.net/t/1254125.aspx

    sb.Replace(";", "")
    sb.Replace("'", "")
    sb.Replace("\", "")
    sb.Replace(Chr(8), "")

    Return sb.ToString

End Function

Public ReadOnly Property UniqueParameterName() As String
     Get
         Return String.Concat(":" _UniqueIdentifier)
     End Get
End Property 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-08T17:13:22.723

您可以从数据库中获取列名并进行比较以检查用户是否输入了有效的列名。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-09T04:36:49.783

发生 SQL 注入是因为用户输入的数据用于动态查询，而没有对其进行参数化。不幸的是，在您的情况下，用户输入的数据无法参数化，解决方案是不让用户输入该数据。

一种可能的解决方法是使用可接受字符的白名单（不是黑名单）。但实际上，您应该了解获取字段名称列表并验证用户输入（然后使用您的字符串版本，而不是来自用户的字符串）。

用户输入的数据总是可疑的，应尽可能避免。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-04-29T14:52:44.660

您可以做的一件事是继续创建您的动态查询，但将这样的内容作为前缀：

```
"IF EXISTS(SELECT * FROM sys.columns where object_id=OBJECT_ID('mytable') and name = @dynamicName)
    SELECT * FROM mytable WHERE [" + dynamicName + "] = 'Whatever your test is.'" 
```

是的，它使查询更加昂贵，但它可以防止注入。

# kendo-ui - 启用虚拟滚动时如何传递 CurrentPage 数据？

> ID：10953153
> 
> 赞同：1
> 
> 时间：2012-06-08T17:09:09.130
> 
> 标签：kendo-ui

我正在使用 Kendo UI 数据网格来显示大型本地数据集 (60MB)。我启用了虚拟滚动。由于服务器正在发送一个非常大的数据集，因此性能非常低。我想在服务器端进行分页，只发送一个较小的数据集。为此，启用虚拟滚动时如何传递当前页面数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T19:17:15.620

上述解决方案是：定义具有以下签名的控制器动作

public JsonResult (int skip, int take, int page, int pageSize, List sort)

Kendo Grid 根据 Kendo Grid 的 pageSize 属性发布 skip、take、page、pageSize 参数。此外，Kendo 网格还期望总项目计数作为分页操作返回的数据的一部分以正常工作。在返回的数据中包含 TotalRowCount，并在 DataSource 的 schema 属性中指定它。例如，

架构：{数据：“数据”，总计：“TotalRowCount”}

# javascript - 排序时的数字预期错误

> ID：10953155
> 
> 赞同：1
> 
> 时间：2012-06-08T17:09:16.353
> 
> 标签：javascript, sorting

其他浏览器工作正常，但在 IE 中，当使用以下代码时，我得到 Number Expected，它在排序函数上运行到一个空对象。 [http://jsfiddle.net/R3ndd/2/](http://jsfiddle.net/R3ndd/2/)

```
function list_response(jsonData) {
"use strict";
var lists = document.getElementById("lists"), anchors =     document.getElementById("anchors"), jItems = jsonData.items;
var results = [], anks = [], vList, pListName, item, videoItem;

var i, j, jLen, iLen = jItems.length;
for (var i = 0; i < iLen; i++) {
    if(jItems[i] != null ){
    jItems[i].nameLower = jItems[i].name.toLowerCase();
    }
}

jItems.sort(function (a, b) {
    if(a != null && b != null){
    return a.nameLower.localeCompare(b.nameLower);
    }
}); 
```

有什么建议么？谢谢！

**我的解决方案**

我决定使用以下方法从 json 中删除空对象（有效）：

```
var y;
for (var x in jItems) {
    if ( Object.prototype.hasOwnProperty.call(jItems,x)) {
        y = jItems[x];
        if (y==="null" || y===null || y==="" || typeof y === "undefined") {
            delete jItems[x];
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T17:13:32.510

不知道为什么 IE 会那样做，但麻烦我们这些好人是一种习惯 :)。好吧，我认为这将是更好的方法。

```
/* NOT NEEDED.
for (var i = 0; i < iLen; i++) {
    if(jItems[i] != null ){
    jItems[i].nameLower = jItems[i].name.toLowerCase();
    }
}*/

jItems.sort(function (a, b) {
    return a && b ? a.toLowerCase().localeCompare(b.toLowerCase()) : 0;
}); 
```

**更新：**

好吧，我想我知道 IE 的问题在哪里。对不起MS，这次IE没有任何问题。发生的情况是，如果其中一个或是`a`// （或任何*虚假*值），您的回调没有返回任何值。这解释了“预期数量”错误。但我已经处理好了，所以我的回答可能会奏效。:)`b``null``''``false`

# c# - 如何创建将多个事件处理程序附加到多个控件的函数？

> ID：10953160
> 
> 赞同：1
> 
> 时间：2012-06-08T17:09:36.120
> 
> 标签：c#, .net, winforms, events, .net-4.0

**问题：**
如何创建将多个事件处理程序附加到多个控件的函数？

**意图：**
我正在使用 C# 开发一个 Windows 窗体应用程序。我想创建一个函数，该函数采用一组控件和一组事件处理程序。此函数会将事件处理程序附加到控件。什么是最优雅、最可重用的方法。我有一个非常丑陋的方式来处理委托，但它是一个但对我来说只是把它扔进一个循环并放弃这个函数的工作较少。

**我基本上想要的行为：**

```
foreach(Control control in controlCollection)
     foreach(EventHandler handler in eventHandlerCollection)
                    control.Event += handler; 
```

**功能：**
`attachHandlers(? controlCollection, ? eventHandlers)`

**编辑：**
我只是要将所有处理程序订阅到所有控件上的相同事件。我没有在我的描述中明确说明这一点，所以我相信这是所有混乱的原因。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T17:21:52.623

如果有问题的控件继承自同一个基类或接口（或者它们是同一个类），您可以执行以下操作：

```
void AttachClickEventHandlers(List<IClickableControl> controls, List<MyClickHandler> eventHandlers)
{
    foreach (var control in controls)
        foreach (MyClickHandler handler in eventHandlers)
            control.Click += handler;
} 
```

这假设一个接口，如：

```
public interface IClickableControl
{
    event MyClickHandler Click;
} 
```

# c# - 异步调用方法的执行顺序

> ID：10953161
> 
> 赞同：5
> 
> 时间：2012-06-08T17:09:36.880
> 
> 标签：c#, multithreading, invoke, dispatcher, begininvoke

当我对 Dispatcher 调用多个方法时，比如说 UI Thread 的 Dispatcher，

像这儿

```
uiDispatcher.BeginInvoke(new Action(insert_), DispatcherPriority.Normal);
uiDispatcher.BeginInvoke(new Action(add_), DispatcherPriority.Normal);
uiDispatcher.BeginInvoke(new Action(insert_), DispatcherPriority.Normal); 
```

这些方法会按照我调用它们的顺序执行吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-08T17:13:50.720

使用`Dispatcher`，这些将始终按照调用它们的顺序执行，但这只是因为`DispatcherPriority`是相同的。这是有保证的行为，并记录在[Dispatcher.BeginInvoke](http://msdn.microsoft.com/en-us/library/ms591206)中：

> 如果在同一个 DispatcherPriority 上进行了多个 BeginInvoke 调用，它们将按照调用的顺序执行。

话虽如此，对于异步操作，通常最好不要依赖这种行为。如果您将它们称为异步操作，则不应计划按特定顺序执行的事情。这有效地在您的异步操作和您的调度程序实现之间创建[耦合。](http://en.wikipedia.org/wiki/Coupling_%28computer_programming%29)

如果顺序确实很重要，那么即使调度机制发生变化，通常最好以保证这一点的方式重新设计设计。例如，使用 TPL 这要简单得多，因为您可以安排操作，然后将后续操作安排为第一个任务的延续。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-08T17:14:43.913

来自[MSDN](http://msdn.microsoft.com/en-us/library/ms591206.aspx)

> 如果在同一个 DispatcherPriority 上进行了多个 BeginInvoke 调用，它们将按照调用的顺序执行。

# iphone - 将 CALayer 添加为子图层后如何调整其大小

> ID：10953162
> 
> 赞同：1
> 
> 时间：2012-06-08T17:09:48.553
> 
> 标签：iphone, objective-c, ios, ipad

我添加了一个 CALayer (CAGradientLayer) 作为 UIImageView 的子视图。我已经成功地将它添加为 UIImageView 的子层，但是在方向上我想调整层的宽度。我该怎么做？我尝试了以下代码但没有成功：

```
- (void) willAnimateRotationToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration
{
    [self.imageOverlay setFrame:self.backgroundImageView_.bounds];
    [self.gradientOverlay setFrame:self.view.bounds];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T18:08:13.043

你支持 < iOS 5 吗？您可以覆盖视图控制器上的 viewWillLayoutSubviews 方法并尝试在那里设置框架。否则，创建一个视图子类作为渐变层的容器，并在 layoutSubviews 中调整层的大小。

# haskell - 如何在 runResourceT 中捕获异常

> ID：10953168
> 
> 赞同：8
> 
> 时间：2012-06-08T17:10:15.027
> 
> 标签：haskell

我想在*runResourceT*中捕获异常而不释放资源，但是函数*catch在**IO*中运行计算。*有没有办法在runResourceT*中捕获异常，或者重构代码的推荐方法是什么？

感谢您的帮助。

```
{-# LANGUAGE FlexibleContexts #-}

module Main where

import Control.Exception as EX
import Control.Monad.IO.Class
import Control.Monad.Trans.Resource

type Resource = String

allocResource :: IO Resource
allocResource = let r = "Resource"
                    in putStrLn (r ++ " opened.") >> return r

closeResource :: Resource -> IO ()
closeResource r = putStrLn $ r ++ " closed."

withResource :: ( MonadIO m
                , MonadBaseControl IO m
                , MonadThrow m
                , MonadUnsafeIO m
                ) => (Resource -> ResourceT m a) -> m a 
withResource f = runResourceT $ do
    (_, r) <- allocate allocResource closeResource
    f r

useResource :: ( MonadIO m
               , MonadBaseControl IO m
               , MonadThrow m
               , MonadUnsafeIO m
               ) => Resource -> ResourceT m Int
useResource r = liftIO $ putStrLn ("Using " ++ r) >> return 1

main :: IO ()
main = do
  putStrLn "Start..."

  withResource $ \r -> do

    x <- useResource r

    {-- This does not compile as the catch computation runs inside IO
    y <- liftIO $ EX.catch (useResource r)
                           (\e -> do putStrLn $ show (e::SomeException)
                                     return 0)
    --} 

    return ()

  putStrLn "Done." 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-08T19:06:09.307

`ResourceT`是[`MonadBaseControl`](http://hackage.haskell.org/packages/archive/resourcet/latest/doc/html/Control-Monad-Trans-Resource.html#t:MonadBaseControl)来自[monad-control](http://hackage.haskell.org/package/monad-control)包的一个实例，它被设计用于提升控制结构`forkIO`，例如`catch`转换为 monad。

建立在 monad-control 之上的[提升基础](http://hackage.haskell.org/package/lifted-base)`MonadBaseControl`包包含具有标准控制结构版本的模块，可在任何. 对于异常处理，您可以使用[`Control.Exception.Lifted`](http://hackage.haskell.org/packages/archive/lifted-base/latest/doc/html/Control-Exception-Lifted.html)模块中的函数。因此，只需`import qualified Control.Exception.Lifted as EX`¹即可，您的代码应该可以正常工作。

¹注意`qualified`这里；相当令人困惑的是，`import A as B`实际上将所有定义`A`导入到范围内，并简单地定义`B`为模块的别名！您需要使用`qualified`以确保定义不会被纳入范围，而是通过`B`别名以独占方式访问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-18T22:30:59.040

作为替代方法，您可以使用[异常](https://hackage.haskell.org/package/exceptions)包中的 ,[`MonadCatch`](https://hackage.haskell.org/package/exceptions/docs/Control-Monad-Catch.html#t:MonadCatch)实例。您只需替换from的通用版本：[`ResourceT`](https://hackage.haskell.org/package/resourcet/docs/Control-Monad-Trans-Resource.html#t:ResourceT)`catch``Control.Monad.Catch`

```
import Control.Monad.Catch
…
main = do
  …
  withResource $ \r -> do
    …
    y <- Control.Monad.Catch.catch (useResource r) (\e -> …) 
```

# php - 在 Wordpress 的类别名称字段中使用 HTML

> ID：10953172
> 
> 赞同：1
> 
> 时间：2012-06-08T17:10:45.510
> 
> 标签：php, html, wordpress, categories

我需要将 HTML 添加到我的 Wordpress 主题中的类别名称中，以便我可以将名称定义为图标（通过 Twitter 引导程序）。

示例代码如下：

```
<a href="link">
<i class="icon-briefcase"></i>
</a> 
```

这会将类别名称显示为链接图标。

有没有办法做到这一点。我无休止地搜索，我能找到的唯一 Wordpress 插件只允许将 HTML 添加到类别描述中。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T17:23:26.543

我认为您尝试做的事情可以像这样轻松解决：

```
<?php 
foreach((get_the_category()) as $category) { 
    echo '<a href="link">';
    echo '<i class="icon-briefcase">' . $category->cat_name . '</i>';
    echo '</a>'; 
} 
?> 
```

正如您所说，这将使所有类别名称看起来像链接图标。如果您希望每个名称具有不同的图标，您当然可以添加条件语句以根据类别名称或 ID 呈现不同的 HTML。

编辑：

因为要使用 Twitter Bootstrap，所以需要将 css 类分配给链接以显示图标。有两种方法可以做到这一点。其中之一是您可以将类别命名为与图标相同。例如，名为“公文包”的类别将呈现与“图标公文包”类的链接。编码：

```
<?php 
    // Iterate through the available categories
    foreach((get_the_category()) as $category) { 
        echo '<a href="link">'; // Display a link
        echo '<i class="icon-' . $category->cat_name . '">' . $category->cat_name . '</i>'; // Create the <li>
        echo '</a>';
    } 
    ?> 
```

第二种方式，我认为对于内容目的更好一些（选择猫名的更多自由），是在代码中使用条件语句将图标分配给某些类别。例如：

```
<?php 
        // Iterate through the available categories
        foreach((get_the_category()) as $category) {
            // First define a default css name class to use
            $iconclass = 'icon-default';
            // Then using an if statement, assign a new css class name to the variable based on the name of the category
            if($category->cat_name == 'Travel') { $iconclass = 'icon-briefcase'; } 

            echo '<a href="link">'; // Display a link
            echo '<i class="'. $iconclass . '">' . $category->cat_name . '</i>'; // Create the <li>
            echo '</a>';
        } 
        ?> 
```

我希望这足够清楚。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T17:27:15.187

我认为您想要的只是[类别图标](http://wordpress.org/extend/plugins/category-icons/)插件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-02T12:54:33.780

我只是有类似的要求，即在同一列表中的某些类别名称（但不是其他）的开头添加一个大写字母。我发现这样做的最简单方法是使用 CSS。这就是我最终做的

```
#projects-term-4 h5 a:before {
    content:'H';
    font-size:80px;
    display:block;
    margin-bottom:10px;
    color:white;
}

#projects-term-5 h5 a:before {
    content:'S';
    font-size:80px;
    display:block;
    margin-bottom:10px;
    color:white;
}

... etc 
```

您可能会使用此方法实现一个非常简单的解决方法，而无需了解任何 php 编码或安装任何额外的插件。你只需要检查生成页面的 html 代码来获取你需要的类名和 id。

# javascript - 从节点转储 v8 JIT 输出

> ID：10953173
> 
> 赞同：13
> 
> 时间：2012-06-08T17:10:45.587
> 
> 标签：javascript, node.js, jit, v8

node.js（或其他 v8 接口或 v8 包装器）能否从 v8 JIT 输出生成的程序集？

我想看看为各种片段生成的程序集是什么样的。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-06-08T17:26:03.253

您需要确保在构建 node.js 时启用了 V8 反汇编程序。默认情况下，调试版本将启用它。对于发布版本（在最近使用 GYP 版本的节点中），您可以通过以下方式启用它：

```
GYP_DEFINES="v8_enable_disassembler=1 v8_object_print=1" ./configure 
```

和重建节点。

启用反汇编程序后，您可以使用 、 和 等标志`--print-code`来检查V8 生成的代码。`--print-code-stubs``--print-opt-code``--code-comments`

如果您想通过优化编译器使用来研究 IR 使用`--trace-hydrogen`并查看`hydrogen.cfg`（可以使用 C1 Visualizer 查看）。

# ruby-on-rails - Rails：form_for 命名空间资源

> ID：10953174
> 
> 赞同：15
> 
> 时间：2012-06-08T17:10:47.423
> 
> 标签：ruby-on-rails, namespaces, routes, crud, form-for

我想为用户设置 CRUD，仅供我的 Web 应用程序的管理员使用。所以在 routes.rb 中：

```
namespace :admin do
  resources :user
end 
```

这意味着：

```
admin_user_index GET    /admin/user(.:format)                  admin/user#index
                 POST   /admin/user(.:format)                  admin/user#create
  new_admin_user GET    /admin/user/new(.:format)              admin/user#new
 edit_admin_user GET    /admin/user/:id/edit(.:format)         admin/user#edit
      admin_user GET    /admin/user/:id(.:format)              admin/user#show
                 PUT    /admin/user/:id(.:format)              admin/user#update
                 DELETE /admin/user/:id(.:format)              admin/user#destroy 
```

显示，索引工作正常，但编辑和新建不能。我在 _form 第一行中不断收到此错误：
**#<#:0x007fb6645c6378> 的未定义方法 `user_path'**

这是：

如何将 form_for 与命名空间资源一起使用？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-06-08T19:24:31.240

您可以将命名空间的名称添加为符号：

```
 <%= form_for [:admin, @user] do |f| %> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-08T17:19:03.250

当您使用 form_for 时，它假定适当的路径是 [model_name]_path。您必须明确告诉它网址

```
form_for @user, url: admin_user_path 
```

# javascript - 在谷歌地图中手动触发鼠标点击

> ID：10953179
> 
> 赞同：1
> 
> 时间：2012-06-08T17:11:04.753
> 
> 标签：javascript, google-maps, google-maps-api-3

我需要能够手动触发鼠标单击并让鼠标单击在 Google 地图上执行正常操作。例如，我想调用`google.maps.event.trigger(map, "dblclick", event)`（`event`普通鼠标事件对象在哪里）并让它放大，因为这是标准的双击行为。

调用该确切代码确实会触发地图上的双击事件（通过向地图添加侦听器来验证），但不会触发标准操作。我的猜测是 Google 不会在内部将这些事件用于其内置操作。任何帮助将不胜感激。

编辑：

示例案例：我想绑定右键执行当前的双击操作。

```
...
google.maps.event.addListener(map, "rightclick", rightClick);
...

function rightClick(mouseEvent) {
    google.maps.event.trigger(map, "dblclick", mouseEvent);
} 
```

在这种情况下，我希望在正常模式下右键单击放大，在多边形绘制模式下完成多边形等。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-18T14:29:15.630

Google 混淆的 JS 库源代码表明，无法以编程方式触发所需的功能。

# android - 用于 onBackPressed 的 Android BackStackEntry 上的 NPE

> ID：10953185
> 
> 赞同：0
> 
> 时间：2012-06-08T17:11:27.680
> 
> 标签：android, android-fragments, back-stack

我正在尝试获取活动中加载的片段的回栈计数。这里的想法是，如果 getBackStackEntryCount 返回“0”，则运行我的 onexitCheck() 方法来磨损/要求用户退出或不退出，但我在第 70 行得到一个 NPE，它获取 getBackStackEntryCount()。

我无法弄清楚我有什么问题。请查看我的方法并在您的答案中添加更正。谢谢。

```
public class RegulatoryDiscription extends Fragment {
. . .
}
. . .
//THE NPE STARTS HERE-->
    FragmentManager.BackStackEntry backEntry = getFragmentManager().getBackStackEntryAt(getActivity().getFragmentManager().getBackStackEntryCount());
    int bs = backEntry.getId();

    public void onBackPressed() {
        if (bs == 0) {
            onexitCheck();
        }
    }

    private Toast toast;
    private long lastBackPressTime = 0;

    public void onexitCheck() {
        if (this.lastBackPressTime < System.currentTimeMillis() - 4000) {
            toast = Toast.makeText(getActivity(), "Press back again to close this app", 4000);
            toast.setDuration(4000);
            toast.show();
            this.lastBackPressTime = System.currentTimeMillis();
        } else {
            if (toast != null) {
                toast.cancel();
            }
            super.getActivity().onBackPressed();
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T19:46:24.237

我不得不改变这样做的方式，并且让它发挥作用。我还需要它在所有片段上运行，以便我可以重用我的方法。看看我[在这里编辑](https://stackoverflow.com/a/10940726/742030)的关于我是如何做到的一个 SO 问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T17:55:16.897

我猜是这样的：

```
FragmentManager.BackStackEntry backEntry = getFragmentManager().getBackStackEntryAt(
        getActivity().getFragmentManager().getBackStackEntryCount()); 
```

应该变成这样：

```
FragmentManager.BackStackEntry backEntry = getFragmentManager().getBackStackEntryAt(
        getActivity().getFragmentManager().getBackStackEntryCount() - 1); 
```

因为计数返回一个条目为 1，两个条目返回 2，依此类推；但条目的索引从 0 开始。

# mysql - 如果号码不存在则插入

> ID：10953186
> 
> 赞同：0
> 
> 时间：2012-06-08T17:11:31.557
> 
> 标签：mysql, sql, database

我想将 tbl2 表中的所有数字插入到 tbl1 表中。但如果 tbl2.number 已经存在于 tbl1.number 中，则不要插入它。这该怎么做？

```
INSERT INTO tbl1 (number) SELECT tbl2.number FROM tbl2 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T17:13:08.147

如果为 拥有唯一（或主）索引是有意义的`tbl1.number`，那么您可以使用`INSERT IGNORE`：

```
INSERT IGNORE INTO tbl1 (number) SELECT tbl2.number FROM tbl2 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T17:16:38.230

纯 SQL（非特定于 MySQL）：

```
INSERT INTO tbl1 (number) SELECT tbl2.number FROM tbl2 WHERE tbl2.number not in (SELECT number from tbl1) 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-08T17:16:11.533

也许使用带有“IsNull”的“IIF”函数来确定输入字段中是否存在 tbl2 编号。

# javascript - 检测另一个使用 js 向我的 rails 应用程序发出请求的站点的主机/IP

> ID：10953187
> 
> 赞同：0
> 
> 时间：2012-06-08T17:11:50.080
> 
> 标签：javascript, ruby-on-rails, web-services, http

我在站点上有一个 js 脚本（客户端），`A`它向我的 rails 应用程序（站点）发出请求`B`。

当此请求发生时，站点如何`B`检测站点的主机/IP `A`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T17:18:57.723

使用您在服务器端获得的推荐人信息。

在 Ruby on Rails 中，我相信它是

```
request.referer 
```

或者

```
request.env["HTTP_REFERER"] 
```

# java - 根据父属性值获取xml节点子元素值

> ID：10953188
> 
> 赞同：0
> 
> 时间：2012-06-08T17:11:55.710
> 
> 标签：java, xml-parsing

我有一个像这样的 xml：-

```
 <SkillMap>
   <ExitPoint ID="01">
    <NodeName>abcd</NodeName>
   </ExitPoint>
   <ExitPoint ID="04">
    <NodeName>defg</NodeName>
   </ExitPoint>
   <ExitPoint ID="22">
    <NodeName>mnop</NodeName>
   </ExitPoint>
  </SkillMap> 
```

我试图`<ExitPoint>`根据 ID 值获取节点的值，即如果我输入 ID 为 01，它应该给出“abcd”，如果 22 它应该给出“mnop”等等，但我没有得到它，尝试了很多，请帮助。

谢谢，阿斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T17:17:55.150

您可以使用[Xpath](http://www.w3schools.com/xpath/default.asp)执行此操作，请考虑取自[JAXP 规范 1.4](http://www.jcp.org/en/jsr/detail?id=206)的以下示例（我建议您对此进行咨询）：

```
// parse the XML as a W3C Document
DocumentBuilder builder = DocumentBuilderFactory.newInstance().newDocumentBuilder();
org.w3c.Document document = builder.parse(new File("/widgets.xml"));
// evaluate the XPath expression against the Document
XPath xpath = XPathFactory.newInstance().newXPath();
String expression = "/widgets/widget[@name='a']/@quantity";
Double quantity = (Double) xpath.evaluate(expression, document, XPathConstants.NUMBER); 
```

# python - 计算字符串中的小写字符

> ID：10953189
> 
> 赞同：9
> 
> 时间：2012-06-08T17:12:01.253
> 
> 标签：python

计算字符串中小写字符数的最pythonic和/或最有效的方法是什么？

这是首先想到的：

```
def n_lower_chars(string):
    return sum([int(c.islower()) for c in string]) 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-08T17:15:00.083

你的绝招！但是，我发现过滤较低的字符更易读，每个字符加 1。

```
def n_lower_chars(string):
    return sum(1 for c in string if c.islower()) 
```

此外，我们不需要为此创建一个新列表，因此删除该列表`[]`将使`sum()`迭代器工作，这会消耗更少的内存。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-08T17:18:54.277

```
def n_lower_chars(string):
    return len(filter(str.islower, string)) 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-08T17:17:09.720

```
def n_lower_chars(string):
    return sum(map(str.islower, string)) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-08T17:42:07.743

如果您想更精细地划分事物：

```
from collections import Counter

text = "ABC abc 123"
print Counter("lower" if c.islower() else 
              "upper" if c.isupper() else
              "neither" for c in text) 
```

# jsp - 相当于已弃用 ifNotGranted 属性

> ID：10953194
> 
> 赞同：11
> 
> 时间：2012-06-08T17:12:13.047
> 
> 标签：jsp, spring-security, jsp-tags

如果用户没有特定角色，我想阻止图像具有链接。例如

```
<sec:authorize ifNotGranted="ROLE_ACCOUNTS" ><img src="someimage.jpg"/></sec:authorize>
<sec:authorize ifAllGranted="ROLE_ACCOUNTS" ><a href="somelink.htm"><img src="someimage.jpg"/></a></sec:authorize> 
```

但是 ifNotGranted 和 ifAllGranted 现在已被弃用，取而代之的是访问表达式。我可以看到 ifAllGranted 可以复制：

```
<sec:authorize access="hasRole('ROLE_ACCOUNTS')"><a href="somelink.htm"><img src="someimage.jpg"/></a></sec:authorize> 
```

但是如何使用访问方法复制 ifNotGranted 呢？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-06-08T18:45:19.117

SpEL 表达式可以用`!`运算符取反：

```
<sec:authorize access="!hasRole('ROLE_ACCOUNTS')">...</sec:authorize> 
```

**也可以看看：**

*   [6\. Spring 语言（SpEL）](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/expressions.html)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2017-04-02T06:53:05.830

如果您有很多文件要更新，我建议使用正则表达式进行搜索和替换

寻找

```
<sec:authorize\s+ifAnyGranted="([^"]+)" 
```

用。。。来代替

```
<sec:authorize access="hasAnyRole('$1')" 
```

并搜索

```
<sec:authorize\s+ifNotGranted="([^"]+)" 
```

用。。。来代替

```
<sec:authorize access="!hasAnyRole('$1')" 
```

希望这可以节省您的时间

# php - perl 数组/哈希到 php

> ID：10953196
> 
> 赞同：2
> 
> 时间：2012-06-08T17:12:39.287
> 
> 标签：php, arrays, perl, hash

试图将 perl 脚本转换为 php。

在 perl 我有一个像这样的哈希

```
my %SPEC=(
odmiles           => ['OD Miles','Mileage','odmiles:ecmmiles','num'],
ecmmiles          => ['ECM Miles',0,'','num',' ECM'],
cdl               => ['CDL','CDL']); 
```

我可以像这样访问数据：

```
$SPEC{ecm}[3]  # output = num 
```

由于 perl 中的哈希没有按顺序运行，我将做一个简单的数组

```
@ORD=('odmiles','ecmmiles','cdl'); 
```

然后循环

```
foreach my $S (@ORD) {
  print $S." = ".$SPEC{$S}[0]."<br />";
  } 
```

我可以用 php 做类似的事情，但是在我的哈希中访问超过 [0] 的元素时遇到问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T17:38:47.663

我想你正在寻找这个：

```
$SPEC = array(
  'odmiles'           => array('OD Miles','Mileage','odmiles:ecmmiles','num'),
  'ecmmiles'          => array('ECM Miles',0,'','num',' ECM'),
  'cdl'               => array('CDL','CDL')
); 
```

然后访问元素将像这样工作：

```
echo $SPEC['odmiles'][0]; // 'OD Miles'
echo $SPEC['odmiles'][1]; // 'Mileage' 
```

# cuda - 从共享内存中读取 int 数组是否会排除银行冲突？

> ID：10953201
> 
> 赞同：1
> 
> 时间：2012-06-08T17:13:06.260
> 
> 标签：cuda, micro-optimization, bank-conflict, gpu-shared-memory

我正在设计一个 CUDA 内核，每个线程块将启动 16 个线程。我希望处理的共享内存（即每个线程块）中有一个 N 个整数数组。

如果线程的访问模式在数组中是连续的，那么这是否意味着不会有银行冲突？我知道如果数组是 char 数组，则会发生银行冲突，但我不完全确定如果它是 int 数组会发生什么。我猜会有银行冲突，因为每组 4 个连续的整数共享同一个内存库？

如果这是真的，那么防止银行冲突的正确解决方案是什么？直方图样本中的地址加扰？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T17:46:03.417

对于计算能力 >= 2.0 的设备，共享内存被安排为交错的 32 位字。因此，如果一个 warp 中的每个线程（一个 warp 是 32 个线程）寻址连续的 32 位字，就不会有任何银行冲突。此外，不同的线程可以访问*相同*的32 位值，而不会导致任何存储库冲突。这意味着如果所有线程从字符数组中读取连续值，也不会发生任何银行冲突。

组冲突实际上仅由两个或多个线程寻址不同的 32 位字引起，这些字是 32 个地址的倍数。

对于其他计算能力，这个问题的答案可能会有所不同——我还没有检查过。

请注意，每个块 16 个线程非常少。由于块大小如此之低，我认为您无法提高 GPU 与 CPU 的性能（除非这只是总工作负载的一小部分并且数据已经在 GPU 内存中）。

# c++ - 在 C/C++ 中快速读取然后从二进制文件中添加大量整数

> ID：10953210
> 
> 赞同：3
> 
> 时间：2012-06-08T17:13:30.237
> 
> 标签：c++, binary, add, fstream

我正在编写代码以在旨在在 8 核 x86 系统上运行的 32 位 Linux 操作系统上使用 C/C++ 从二进制文件中读取无符号整数。该应用程序获取一个输入文件，其中一个接一个地包含小端格式的无符号整数。所以以字节为单位的输入文件大小是 4 的倍数。文件中可能有十亿个整数。读取和添加所有整数并以 64 位精度返回总和的最快方法是什么？

下面是我的实现。错误检查损坏数据不是这里的主要问题，在这种情况下输入文件被认为没有任何问题。

```
#include <iostream>
#include <fstream>
#include <pthread.h>
#include <string>
#include <string.h>

using namespace std;

string filepath;
unsigned int READBLOCKSIZE = 1024*1024;
unsigned long long nFileLength = 0;

unsigned long long accumulator = 0; // assuming 32 bit OS running on X86-64
unsigned int seekIndex[8] = {};
unsigned int threadBlockSize = 0; 
unsigned long long acc[8] = {};

pthread_t thread[8];
void* threadFunc(void* pThreadNum);

//time_t seconds1;
//time_t seconds2;

int main(int argc, char *argv[])
{
    if (argc < 2) 
    {
        cout << "Please enter a file path\n";
        return -1;
    }

    //seconds1 = time (NULL);
    //cout << "Start Time in seconds since January 1, 1970 -> " << seconds1 << "\n";

    string path(argv[1]);
    filepath = path;
    ifstream ifsReadFile(filepath.c_str(), ifstream::binary);  // Create FileStream for the file to be read
    if(0 == ifsReadFile.is_open()) 
    {
        cout << "Could not find/open input file\n";
        return -1;
    }

    ifsReadFile.seekg (0, ios::end);
    nFileLength = ifsReadFile.tellg();           // get file size
    ifsReadFile.seekg (0, ios::beg);

    if(nFileLength < 16*READBLOCKSIZE)
    {
        //cout << "Using One Thread\n"; //**
        char* readBuf = new char[READBLOCKSIZE];
        if(0 == readBuf) return -1;

        unsigned int startOffset = 0;   
        if(nFileLength >  READBLOCKSIZE)
        {
            while(startOffset + READBLOCKSIZE < nFileLength)
            {
                //ifsReadFile.flush();
                ifsReadFile.read(readBuf, READBLOCKSIZE);  // At this point ifsReadFile is open
                int* num = reinterpret_cast<int*>(readBuf);
                for(unsigned int i = 0 ; i < (READBLOCKSIZE/4) ; i++) 
                {
                    accumulator += *(num + i);  
                }
                startOffset += READBLOCKSIZE;
            }

        }

        if(nFileLength - (startOffset) > 0)
        {
            ifsReadFile.read(readBuf, nFileLength - (startOffset));  
            int* num = reinterpret_cast<int*>(readBuf);
            for(unsigned int i = 0 ; i < ((nFileLength - startOffset)/4) ; ++i) 
            {
                accumulator += *(num + i);  
            }
        }
        delete[] readBuf; readBuf = 0;
    }
    else
    {
        //cout << "Using 8 Threads\n"; //**
        unsigned int currthreadnum[8] = {0,1,2,3,4,5,6,7};
        if(nFileLength > 200000000) READBLOCKSIZE *= 16; // read larger blocks
        //cout << "Read Block Size -> " << READBLOCKSIZE << "\n";       

        if(nFileLength % 28)
        {
            threadBlockSize = (nFileLength / 28);
            threadBlockSize *= 4;
        }
        else
        {   
            threadBlockSize = (nFileLength / 7);
        }

        for(int i = 0; i < 8 ; ++i)
        {
            seekIndex[i] = i*threadBlockSize;
            //cout << seekIndex[i] << "\n";
        }
        pthread_create(&thread[0], NULL, threadFunc, (void*)(currthreadnum + 0));
        pthread_create(&thread[1], NULL, threadFunc, (void*)(currthreadnum + 1));
        pthread_create(&thread[2], NULL, threadFunc, (void*)(currthreadnum + 2));
        pthread_create(&thread[3], NULL, threadFunc, (void*)(currthreadnum + 3));
        pthread_create(&thread[4], NULL, threadFunc, (void*)(currthreadnum + 4));
        pthread_create(&thread[5], NULL, threadFunc, (void*)(currthreadnum + 5));
        pthread_create(&thread[6], NULL, threadFunc, (void*)(currthreadnum + 6));
        pthread_create(&thread[7], NULL, threadFunc, (void*)(currthreadnum + 7));

        pthread_join(thread[0], NULL);
        pthread_join(thread[1], NULL);
        pthread_join(thread[2], NULL);
        pthread_join(thread[3], NULL);
        pthread_join(thread[4], NULL);
        pthread_join(thread[5], NULL);
        pthread_join(thread[6], NULL);
        pthread_join(thread[7], NULL);

        for(int i = 0; i < 8; ++i)
        {
            accumulator += acc[i];
        }
    }

    //seconds2 = time (NULL);
    //cout << "End Time in seconds since January 1, 1970 -> " << seconds2 << "\n";
    //cout << "Total time to add " << nFileLength/4 << " integers -> " << seconds2 - seconds1 << " seconds\n";

    cout << accumulator << "\n";      
    return 0;
}

void* threadFunc(void* pThreadNum)
{
    unsigned int threadNum = *reinterpret_cast<int*>(pThreadNum);
    char* localReadBuf = new char[READBLOCKSIZE];
    unsigned int startOffset = seekIndex[threadNum];
    ifstream ifs(filepath.c_str(), ifstream::binary);  // Create FileStream for the file to be read
    if(0 == ifs.is_open()) 
    {
        cout << "Could not find/open input file\n";
        return 0;
    }   
    ifs.seekg (startOffset, ios::beg); // Seek to the correct offset for this thread
    acc[threadNum] = 0;
    unsigned int endOffset = startOffset + threadBlockSize;
    if(endOffset > nFileLength) endOffset = nFileLength; // for last thread
    //cout << threadNum << "-" << startOffset << "-" << endOffset << "\n"; 
    if((endOffset - startOffset) >  READBLOCKSIZE)
    {
        while(startOffset + READBLOCKSIZE < endOffset)
        {
            ifs.read(localReadBuf, READBLOCKSIZE);  // At this point ifs is open
            int* num = reinterpret_cast<int*>(localReadBuf);
            for(unsigned int i = 0 ; i < (READBLOCKSIZE/4) ; i++) 
            {
                acc[threadNum] += *(num + i);   
            }
            startOffset += READBLOCKSIZE;
        }   
    }

    if(endOffset - startOffset > 0)
    {
        ifs.read(localReadBuf, endOffset - startOffset);
        int* num = reinterpret_cast<int*>(localReadBuf);
        for(unsigned int i = 0 ; i < ((endOffset - startOffset)/4) ; ++i) 
        {
            acc[threadNum] += *(num + i);   
        }
    }

    //cout << "Thread " << threadNum + 1 << " subsum = " << acc[threadNum] << "\n"; //**
    delete[] localReadBuf; localReadBuf = 0;
    return 0;
} 
```

我编写了一个小 C# 程序来生成输入二进制文件以进行测试。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.IO;

namespace BinaryNumWriter
{
    class Program
    {
        static UInt64 total = 0;
        static void Main(string[] args)
        {
            BinaryWriter bw = new BinaryWriter(File.Open("test.txt", FileMode.Create));
            Random rn = new Random();
            for (UInt32 i = 1; i <= 500000000; ++i)
            {
                UInt32 num = (UInt32)rn.Next(0, 0xffff);
                bw.Write(num);
                total += num;
            }
            bw.Flush();
            bw.Close();
        }
    }
} 
```

在具有 2 GB RAM 和 Ubuntu 9.10 32 位的 Core i5 机器 @ 3.33 Ghz（它的四核，但我目前得到的）上运行该程序具有以下性能数字

100 个整数 ~ 0 秒（否则我真的不得不吸） 100000 个整数 < 0 秒 100000000 个整数 ~ 7 秒 500000000 个整数 ~ 29 秒（1.86 GB 输入文件）

我不确定硬盘是 5400RPM 还是 7200RPM。我尝试了不同的缓冲区大小进行读取，发现一次读取 16 MB 的大输入文件是个不错的选择。

有没有更好的方法可以更快地从文件中读取以提高整体性能？有没有更聪明的方法可以更快地添加大型整数数组并重复折叠？我编写代码的方式是否有任何重大障碍/我是否在做一些明显错误的事情，这会花费大量时间？

我可以做些什么来加快读取和添加数据的过程？

谢谢。

钦梅

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T19:22:54.673

如果您想快速读取（或写入）大量数据，并且不想对这些数据进行太多处理，则需要避免缓冲区之间数据的额外副本。这意味着您要避免 fstream 或 FILE 抽象（因为它们引入了需要复制的额外缓冲区），并避免在内核和用户缓冲区之间复制内容的读/写类型调用。

相反，在 linux 上，您想使用 mmap(2)。在 64 位操作系统上，只需将整个文件 mmap 到内存中，用于`madvise(MADV_SEQUENTIAL)`告诉内核您将主要按顺序访问它，然后就可以了。对于 32 位操作系统，您需要以块的形式进行映射，每次都取消映射前一个块。与您当前的结构非常相似，每个线程一次映射一个固定大小的块应该可以正常工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-08T18:25:48.247

以您的方式从多个线程访问机械硬盘需要一些头部运动（读取速度慢）。你几乎肯定会受到 IO 限制（1.86GB 文件为 65MBps）。尝试通过以下方式改变策略：

*   启动 8 个线程 - 我们称它们为消费者
*   8 个线程将等待数据可用
*   在主线程中开始读取文件的块（比如 256KB），因此成为消费者的提供者
*   主线程到达 EOF 并向工作人员发出没有更多可用数据的信号
*   主线程等待 8 个工人加入。

你需要相当多的同步才能让它完美地工作，我认为它会通过顺序文件访问完全最大化你的 HDD / 文件系统 IO 能力。YMMV 处理小文件，可以以闪电般的速度从缓存中缓存和提供服务。

您可以尝试的另一件事是仅启动 7 个线程，为主线程和系统的其余部分保留一个空闲 CPU。

..或获得SSD :)

编辑：

为简单起见，看看您可以多快地读取文件（丢弃缓冲区）而无需处理，单线程。加上 epsilon 是您完成此操作的速度的理论限制。

# c# - 如何在 EF 中创建和保存序列化然后反序列化的实体

> ID：10953216
> 
> 赞同：2
> 
> 时间：2012-06-08T17:13:40.110
> 
> 标签：c#, entity-framework, exception-handling, entity-framework-4.3, ef-database-first

我有以下流程：

1.  实体已创建
    *   当前上下文已关闭
2.  更新
    *   通过属性设置器，也通过导航属性
3.  放入 ViewState
    *   序列化，类型用 [Serializable] 属性标记）
4.  从 ViewState 中读取
    *   反序列化
5.  节省
    *   新的上下文是开放的

我应该如何正确创建实体：存根（默认构造函数）或`DbSet<T>.Create()`？

我应该如何正确保存实体：`DbSet<T>.Add()`或`DbSet<T>.Attach()`？

我遇到了各种异常：

*   “违反 PRIMARY KEY 约束 'PK_currency_types'。无法在对象 'dbo.currency_types' 中插入重复键。重复键值为 (1)。语句已终止。”

*   “发生参照完整性约束违规：定义参照约束的属性值在关系中的主体对象和依赖对象之间不一致。”

我正在使用带有 DbContext Generator 扩展的 EF 4.3 Database First（我有数据库、设计器，但实体是自动生成的 POCO）。我是 EF 的新手，完全被卡住了。

**更新：**这是我的代码，它很简单，所以我没有从一开始就添加它：

```
public IStatement Create()
{
    using (var db = new ModelContainer())
    {
        // ID is auto-generated by db, INT IDENTITY(1,1)
        return new Statement();
        // or
        // return b.Statement.Create();
    }
}

// somewhere in the middle, for example:    
statement.Currency = db.Currency.Single(c => c.Name == "Euro");
statement.Amount = 1000;

public void Save(IStatement[] statement)
{
    using (var scope = new TransactionScope())
    using (var db = new ModelContainer())
    {
        foreach (var s in statement)
        {
            // statement has a number of navigation properties, i.e. referenced by FK entities

            // need to add/attach each back to db                
        }

        db.SaveChanges();
        scope.Complete();
    }
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T19:19:32.770

```
var statement = new Statement();

using (var scope = new TransactionScope())
{
    var result = 0;
    foreach (var statement in arr.Cast<Statement>())
    {
        using (var db = new ModelContainer())
        {
            db.StatementTypes.Attach(statement.StatementType);
            db.Entry(statement.StatementType).State = EntityState.Unchanged;

            db.Currencies.Add(statement.Currency);
            db.Entry(statement.Currency).State = EntityState.Unchanged;

            db.Subjects.Attach(statement.Firm);
            db.Entry(statement.Firm).State = EntityState.Unchanged;

            db.Statement.Add(statement);

            db.SaveChanges();
        }
    }
    scope.Complete(); 
```

# asp.net-mvc-3 - 将我的 Code First Entity Framework 创建的数据库移动到 Default Membership Provider 数据库

> ID：10953218
> 
> 赞同：0
> 
> 时间：2012-06-08T17:13:48.710
> 
> 标签：asp.net-mvc-3, database-design, asp.net-membership, ef-code-first, membership-provider

我有一个我构建的 ASP.NET MVC3 应用程序，它有两个数据库。

一个是参考默认成员资格提供程序，它是在我构建应用程序时自动创建的。

另一个是我命名为 SchoolContext 的数据库，我希望其中的所有信息`SchoolContext`与 Default Membership Provider 中的所有数据都存储在同一个数据库中。

这是我的两个连接字符串：

```
<add name="ApplicationServices" connectionString="data source=.\SQLEXPRESS;Integrated Security=SSPI;AttachDBFilename=|DataDirectory|aspnetdb.mdf;User Instance=true" providerName="System.Data.SqlClient" />
<add name="SchoolContext" connectionString="Data Source=|DataDirectory|School.sdf" providerName="System.Data.SqlServerCe.4.0" /> 
```

我尝试重命名`ApplicationServices`为`SchoolContext`然后注释掉我的第二个连接字符串，我可以加载并使用默认会员提供程序“登录”就好了，但是每当我需要将数据库排队以获取存储在原始数据库中的信息时`SchoolContext`，我会收到错误说明该模型不存在等。. 并且数据不是在包含来自默认成员资格提供程序的信息的数据库中构建的。

如果模型发生更改，我将使用初始化程序来重建数据库：

```
public class SchoolInitializer : DropCreateDatabaseIfModelChanges<SchoolContext> 
```

每当我在模型中编辑某些内容并且我正在使用两个数据库方案时，这都可以正常工作。但是，当我想将两个数据库合二为一时，它不起作用。

我显然不知道如何连接两个数据库，因为我试图做的事情不起作用，我应该如何适当地设置 mvc 以将我`SchoolContext`放入与默认成员资格提供程序所需的信息相同的数据库中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T17:54:33.603

两个可能的答案：

1.  如果我理解您的意图，您正在尝试使用两个单独的数据库上下文并执行连接它们的查询。这在实体框架中是不可能的（在撰写本文时），尽管将来可能会考虑。有关更多详细信息，请参阅此帖子： [https ://stackoverflow.com/a/8536400/941058](https://stackoverflow.com/a/8536400/941058)

    如果您需要合并信息，则需要使用 LINQ 在内存中完成。本质上，您需要将外键信息存储在任一数据库中，并在查询其中一个时引用它。

2.  如果您不尝试跨上下文加入，而只是想将默认成员资格提供程序与 EF 一起使用，请考虑： [http ://efmembership.codeplex.com/](http://efmembership.codeplex.com/)

# sql - 在 SQL for Oracle Apex 中重新创建 SQL*PLUS Show 命令（sga 和参数）

> ID：10953219
> 
> 赞同：1
> 
> 时间：2012-06-08T17:13:49.163
> 
> 标签：sql, database, oracle, sqlplus, oracle-apex

正如标题中所说，我想根据以下信息填充 Apex 报告：

```
show sga
show parameter 
```

sql plus 中存在的命令

有谁知道在后台为此执行的 select 语句或它引用的表？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T17:36:48.830

显示参数可以通过这个选择来模拟：

```
select name,  
       case type 
         when 1 then 'boolean'  
         when 2 then 'string' 
         when 3 then 'integer' 
         when 4 then 'parameter file' 
         when 5 then 'reserved' 
         when 6 then 'big integer' 
         else to_char(type) 
       end as type,  
       value, 
       description, 
       update_comment 
from v$parameter 
where name like '%foo%' 
```

可以使用以下语句模拟 Show SGA：

```
select 'Total System Global Area' as "Memory", 
       sum(VALUE) as "Value", 
       'bytes' as unit 
from V$SGA 
union all 
select NAME, 
       VALUE, 
       'bytes' 
from V$SGA 
```

# objective-c - “FOUNDATION_EXPORT”与“外部”

> ID：10953221
> 
> 赞同：143
> 
> 时间：2012-06-08T17:14:01.030
> 
> 标签：objective-c, extern

我想问一下在*Objective C*项目中使用`FOUNDATION_EXPORT`而不是使用的原因是什么。`extern`

 *我检查了[这个问题](https://stackoverflow.com/questions/538996/constants-in-objective-c)，使用`FOUNDATION_EXPORT`获得了高达 340 分（第一名），而`extern`只使用了 74 分（第二名）。

有人可以解释为什么吗？`FOUNDATION_EXPORT`使用而不是有任何实际理由`extern`吗？

谢谢！

* * *

## 回答 #1

> 赞同：176
> 
> 时间：2012-06-08T17:18:38.890

如果您查看 NSObjCRuntime.h（在 Foundation 中），您会看到它`FOUNDATION_EXPORT`编译为`extern`C、`extern "C"`C++ 和 Win32 中的其他内容。因此，它在语言和操作系统之间更加兼容。对于许多项目，这不会有任何区别。*

# oracle - 将规范和正文导出到单个文件中

> ID：10953222
> 
> 赞同：5
> 
> 时间：2012-06-08T17:14:06.103
> 
> 标签：oracle, oracle-sqldeveloper

我正在使用 SQL Developer 3.0.04 并试图导出一个包。我有两个问题：

1.  我可以在一次导出中同时导出包规范和正文（生成 1 个 export.sql 文件）吗？

2.  export.sql 文件有些压缩，我可以用换行符等以文本格式获取它，以便更好地阅读它吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-15T13:36:27.943

在 SQL-Developer 中右键单击 Package Specification 并选择`Save Package Spec and Body...`这将生成一个包含规范和正文的文件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-08T22:26:31.693

不要导航到包对象并在那里进行导出，而是使用 \Tools\Database Export 生成单个文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-09-05T06:30:30.237

您必须右键单击包并选择：“保存包规格和正文”

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-20T13:53:21.210

是的你可以。只需导航到包主体 -> 导出 -> 选中“包含依赖项”

结果，将生成带有包声明和包体的 export.sql。

此外，您将在 package extra 中获得所有已使用表的 DDL（您无法将其关闭）；这可以被视为这种方法的优点或缺点。

但是，如果您打算无论如何导出包和表，您可以使用上述方法，然后使用导出表+数据生成的sql脚本，无论如何都会重新创建表。

# java - 多边形内的点返回多边形外

> ID：10953224
> 
> 赞同：0
> 
> 时间：2012-06-08T17:14:11.633
> 
> 标签：java, android, polygons

我正在尝试使用经度和纬度确定手机是否位于此多边形中。

![在此处输入图像描述](../Images/5ab32b6d1666766bd1d1b4d2221f12fb.png)

它适用于我的第一个测试点。我的第二个测试点（绿点）返回它在多边形之外。由于 Android 无法使用 Polygon 类，因此我使用从几个不同站点找到的代码创建了自己的类：

```
public class Polygon {

    private double[] polyY, polyX;
    private int polySides;

    public Polygon( double[] px, double[] py, int ps ) {
        polyX = px;
        polyY = py;
        polySides = ps;
    }
    public boolean contains( double x, double y ) {
        boolean oddTransitions = false;
        for( int i = 0, j = polySides -1; i < polySides; j = i++ ) {
            if( ( polyY[ i ] < y && polyY[ j ] >= y ) || ( polyY[ j ] < y && polyY[ i ] >= y ) ) {
                if( polyX[ i ] + ( y - polyY[ i ] ) / ( polyY[ j ] - polyY[ i ] ) * ( polyX[ j ] - polyX[ i ] ) < x ) {
                    oddTransitions = !oddTransitions;          
                }
            }
        }
        return oddTransitions;
    }
} 
```

我查询数据库以从此表中获取经度和纬度：

```
db.execSQL("insert into " + DATABASE_TABLE_POLYGON  + " select null as " + KEY_ROWID
                + ", 0 as " + KEY_BUILDING
                + ", -95.929635 as " + KEY_LONG
                + ", 41.223459 as " + KEY_LAT  
                + " union select null,0,-95.931544, 41.223491"
                + " union select null,0,-95.931587, 41.224734"
                + " union select null,0,-95.929484, 41.224782"
                + " union select null,0,-95.929227, 41.227655"
                + " union select null,0,-95.929184, 41.229656"
                + " union select null,0,-95.926437, 41.23006"
                + " union select null,0,-95.92633, 41.228478"
                + " union select null,0,-95.924141, 41.227413"
                + " union select null,0,-95.920944, 41.22617"
                + " union select null,0,-95.921073, 41.225299"
                + " union select null,0,-95.922811, 41.224008"
                + " union select null,0,-95.92706, 41.22099"
                + " union select null,0,-95.927553, 41.221022"
                + " union select null,0,-95.927811, 41.222943"
                + " union select null,0,-95.929334, 41.222991"; 
```

这是失败的代码：

```
Polygon p = new Polygon(xArray,yArray,numPoints);
if(p.contains(-95.927714, 41.225281)){
    textView.setText("in polygon");
}else{
    textView.setText("outside polygon");
} 
```

输出：外部多边形

其他信息：
它似乎在我创建的另一个应用程序中工作。
我正在使用模拟器和模拟位置。
我还创建了一个普通的 java 类，所以我可以使用内置的 Polygon 类，但这
也说明它在多边形之外。
我使用了一个在线多边形绘图仪，只是为了完全确定该点在多边形内部，而且确实如此。
这些点按顺时针方向移动。

为什么这一点返回“外部多边形”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T15:20:33.877

我解决了这个问题。我终于注意到所有的点都是按经度排序的。所以要么是我插入数据的查询（如上所示），要么是我选择经度和纬度的查询。这些点必须按正确的顺序排列，否则该`contains()`方法将不起作用。我的解决方案是在表格中添加另一列，以便我可以对每个点进行编号。然后，每当我查询这些点时，我都会按这个新列排序，这样它们总是按正确的顺序排列。

# c# - Datagrid WPF中的SelectedItem绑定

> ID：10953226
> 
> 赞同：0
> 
> 时间：2012-06-08T17:14:17.723
> 
> 标签：c#, wpf, binding, datagrid, selecteditem

我有一个显示列的数据网格，通过代码设置 ItemsSource-Property 添加。我还有两列，它们是由 XAML 添加的（一个按钮以及网格中图像和按钮的组合）。现在我正在编辑一些单元格并想阅读它们。在 Windows 窗体中，可以读取特定的单元格，但在 WPF 中这是不可能或不推荐的，我读过。所以我想使用 SelectedItem-Binding。我的问题是， SelectedItem 始终为空。由于列的“混合添加”或者我做错了什么，Datagrid 可能存在问题。

这是我的代码的一部分：

XAML：

```
 <DataGrid AutoGenerateColumns="True" Margin="12,162,12,12" Name="dgExisting" CanUserAddRows="False" RowHeight="24" VerticalGridLinesBrush="#50000000" HorizontalGridLinesBrush="#50000000" SelectionMode="Single" CellStyle="{StaticResource DataGridCell_Centering}" CellEditEnding="dgExisting_CellEditEnding" SelectedItem="{Binding SelectedItem, Mode=TwoWay}">            
        <DataGrid.Columns>
            <DataGridTemplateColumn Header="Password" Width="60" IsReadOnly="True">
                <DataGridTemplateColumn.CellTemplate>                        
                    <DataTemplate>
                        <Button Style="{StaticResource Flat}" Click="btnDgChangePassword_Click">
                            <Grid>
                                <Image Source="{Binding imgStatus}" Margin="0,0,0,0" HorizontalAlignment="Left" VerticalAlignment="Top"/>
                                <Label Content="{Binding PasswordState}" Margin="16,-5,0,0" HorizontalAlignment="Left" VerticalAlignment="Top" Height="25" />
                            </Grid>
                        </Button>
                    </DataTemplate>
                </DataGridTemplateColumn.CellTemplate>
            </DataGridTemplateColumn>
            <DataGridTemplateColumn Header="Delete" Width="50" IsReadOnly="True">
                <DataGridTemplateColumn.CellTemplate>
                    <DataTemplate>
                        <Button Click="btnDgRemove_Click" Style="{StaticResource Flat}">
                            <Image Source="Images/redcross16.png" />
                        </Button>
                    </DataTemplate>
                </DataGridTemplateColumn.CellTemplate>
            </DataGridTemplateColumn>
        </DataGrid.Columns>
    </DataGrid> 
```

以及我如何通过代码添加列的代码：

```
//Create Table for Gridview
DataTable dtList = new DataTable();
dtList.Columns.Add(new DataColumn("Username"));
dtList.Columns.Add(new DataColumn("PasswordState"));
dtList.Columns.Add(new DataColumn("Domain"));
dtList.Columns.Add(new DataColumn("Description"));
dtList.Columns.Add(new DataColumn("id"));

foreach (UserCredential uc in credentialList)
{
    DataRow dR = dtList.NewRow();                
    dR["Username"] = uc.getUsername();
    dR["PasswordState"] = (uc.getPassword().Length > 0 ? "yes":"no");
    dR["Domain"] = uc.getDomain();
    dR["Description"] = uc.getDescription();
    dR["id"] = uc.getId();

    dtList.Rows.Add(dR);
}

dtList.Columns.Add("imgStatus");

for (int i = 0; i < dtList.Rows.Count; i++)
{
    dtList.Rows[i]["imgStatus"] = (dtList.Rows[i]["PasswordState"].ToString() == "yes" ? "Images/key16.png" : "");
}

dgExisting.ItemsSource = dtList.DefaultView;
dgExisting.Columns[getColumnId("Password")].DisplayIndex = 2; //reorder Key-Image
dgExisting.Columns[getColumnId("PasswordState")].Visibility = System.Windows.Visibility.Hidden; 
dgExisting.Columns[getColumnId("imgStatus")].Visibility = System.Windows.Visibility.Hidden; 
dgExisting.Columns[getColumnId("id")].Visibility = System.Windows.Visibility.Hidden; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T17:48:58.067

在您的 C# 代码中，您没有创建到 DataGrid 的项目源的绑定。

```
dgExisting.ItemsSource = dtList.DefaultView; 
```

不是**绑定**。这就是您的 SelectedItem 在 XAML 绑定中始终为空的原因。要在代码中创建绑定，您需要执行以下操作：

```
var binding = new Binding("ItemsSource");
binding.Source = dtList.DefaultView;
dgExisting.SetBinding(DataGrid.ItemsSourceProperty, binding); 
```

在 C# 中设置绑定 WPF 有点异味。您必须这样做可能是有原因的。但是，我建议重新设计您的应用程序以更好地遵循 MVVM 模式，以便您可以在 XAML 中设置您的绑定。

# ios - Facebook SSO 如何知道要返回哪个应用程序？

> ID：10953229
> 
> 赞同：0
> 
> 时间：2012-06-08T17:14:35.850
> 
> 标签：ios, facebook, single-sign-on

使用 Facebook SSO（单点登录），在系统提示用户授予使用其 Facebook 帐户的权限后，它会将用户引导回运行 SSO 的应用程序。FB SSO 具体如何实现这一点？（它如何知道授予权限后要重新打开哪个应用程序？）

我们正在构建一个与 Facebook 交互的 SDK，目前尚不清楚 facebook 应用程序如何确定返回哪个应用程序。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T18:19:15.593

添加 Facebook SDK 时，其中一个步骤是使用您的 API 密钥为您的应用程序注册一个 URL 方案。

当您在 Facebook 中授权应用程序时，它会尝试打开 URL（通常格式为 fbXXXXXXXXXXX），并且由于您的应用程序设置为处理此 URL 方案，因此应用程序被打开。

以下是您可以使用 handleOpenURL 进行通信的其他应用程序列表：

[http://handleopenurl.com/](http://handleopenurl.com/)

# php - 使用 PHP 和 simplexml_load_file 解析 XML CDATA

> ID：10953230
> 
> 赞同：0
> 
> 时间：2012-06-08T17:14:36.790
> 
> 标签：php, xml, rss, cdata

这是我的代码。

```
$xml = simplexml_load_file("http://www.metacafe.com/api/item/8373557/", NULL, LIBXML_NOCDATA);
$thumbnail = $xml->xpath( "/rss/channel/item/media:thumbnail/@url" );
$duration = $xml->xpath( "/rss/channel/item/media:content/@duration" );
$title = $xml->xpath ( "/rss/channel/item/title");
$desc = $xml->xpath ( "/rss/channel/item/description/"); 
```

这是 XML 文件内容：

```
<?xml version="1.0" encoding="utf-8"?>
        <rss version="2.0" xmlns:media="http://search.yahoo.com/mrss/" source="Metacafe">
            <title>Metacafe</title>
            <channel>
                    <title></title>
                    <link>http://www.metacafe.com/watch/8373557/</link>
                    <image>
                        <url>http://s.mcstatic.com/Images/MCLogo4RSS.jpg</url>
                        <link>http://www.metacafe.com</link>
                        <title>Metacafe</title>
                        <height>65</height>
                        <width>229</width>
                    </image>
                    <description></description>
                    <item>
            <id>8373557</id>
            <author>Revision3</author>
            <title>Make Your Photos Look Pro with Pix: Pixel Mixer for IOS and Android - Snapp</title>
            <link>http://www.metacafe.com/watch/8373557/make_your_photos_look_pro_with_pix_pixel_mixer_for_ios_and_android_snapp/</link>
                    <rank>3.70</rank>
            <category>Science &amp; Tech</category>
            <description>
            <![CDATA[
                    <a href="http://www.metacafe.com/watch/8373557/make_your_photos_look_pro_with_pix_pixel_mixer_for_ios_and_android_snapp/"><img src="http://s6.mcstatic.com/thumb/8373557/22302729/4/directors_cut/0/1/make_your_photos_look_pro_with_pix_pixel_mixer_for_ios_and_android_snapp.jpg?v=3" align="right" border="0" alt="Make Your Photos Look Pro with Pix: Pixel Mixer for IOS and Android - Snapp" vspace="4" hspace="4" width="134" height="78" /></a>
                    <p>
                    Create your own professional quality images with this free app from developer colonO.  Pix: Pixel Mixer is simple, beautiful, free and available on both iOS and Android.                   <br>Ranked <strong>3.70</strong> / 5 | 4971 views | <a href="http://www.metacafe.com/watch/8373557/make_your_photos_look_pro_with_pix_pixel_mixer_for_ios_and_android_snapp/">0 comments</a><br/>
                    </p>
                    <p>
                        <a href="http://www.metacafe.com/watch/8373557/make_your_photos_look_pro_with_pix_pixel_mixer_for_ios_and_android_snapp/"><strong>Click here to watch the video</strong></a> (01:02)<br/>
                        Submitted By:                       <a href="http://www.metacafe.com/channels/Revision3/">Revision3</a><br/>
                        Tags:
                        <a href="http://www.metacafe.com/topics/pictures/">Pictures</a>&nbsp;<a href="http://www.metacafe.com/topics/pixel_mixer/">Pixel Mixer</a>&nbsp;<a href="http://www.metacafe.com/topics/photo_filters/">Photo Filters</a>&nbsp;<a href="http://www.metacafe.com/topics/filters_for/">Filters For</a>&nbsp;<a href="http://www.metacafe.com/topics/ios_and/">Ios And</a>&nbsp;<a href="http://www.metacafe.com/topics/android/">Android</a>&nbsp;<a href="http://www.metacafe.com/topics/ios_review/">Ios Review</a>&nbsp;<a href="http://www.metacafe.com/topics/instagram_filters/">Instagram Filters</a>&nbsp;                        <br/>
                        Categories: <a href='http://www.metacafe.com/videos/science_and_tech/'>Science &amp; Tech</a>                   </p>
                ]]>
            </description>
                        <guid isPermaLink="true">http://www.metacafe.com/watch/8373557/make_your_photos_look_pro_with_pix_pixel_mixer_for_ios_and_android_snapp/</guid>
            <pubDate>16-Apr-12 +0000</pubDate>
                        <media:player url="http://www.metacafe.com/watch/8373557/make_your_photos_look_pro_with_pix_pixel_mixer_for_ios_and_android_snapp/" />
                        <media:content url="http://www.metacafe.com/fplayer/8373557/make_your_photos_look_pro_with_pix_pixel_mixer_for_ios_and_android_snapp.swf" type="application/x-shockwave-flash" medium="video" height="360" width="640" duration="62" />             <media:thumbnail url="http://s6.mcstatic.com/thumb/8373557/22302729/4/catalog_item5/0/1/make_your_photos_look_pro_with_pix_pixel_mixer_for_ios_and_android_snapp.jpg?v=3" />
            <media:title>Make Your Photos Look Pro with Pix: Pixel Mixer for IOS and Android - Snapp</media:title>
            <media:keywords>Pictures,Pixel Mixer,Photo Filters,Filters For,Ios And,Android,Ios Review,Instagram Filters</media:keywords>
                        <media:description>Create your own professional quality images with this free app from developer colonO.  Pix: Pixel Mixer is simple, beautiful, free and available on both iOS and Android.</media:description>
                        <media:credit>Revision3</media:credit>
                            <media:rating scheme="urn:simple">nonadult</media:rating>
                </item>
            </channel></rss> 
```

我想提取**标签**内容，不知道应该用哪个表达式来打印？我成功获取缩略图、持续时间、标题，但未能在 CDATA / 内部描述中获取标签。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T19:40:35.420

在第一步中，您需要使用或使用您所拥有的 xpath 表达式来获取`<description>`标记的内容。`$xml->rss->channel->item->description`然后，您在此内容上使用正则表达式来获取带有标签名称的链接。正则表达式应该是这样的：

```
~<a href="http://www.metacafe.com/topics/(?P<foobar>[^"]+)/">(?P<tag>[^<]+)</a>~ 
```

另一种方法是请求一个 API，您可以使用该 API 从条目中获取标签。

# ios - 根据 ISOCountryCode 获取货币符号和货币代码

> ID：10953232
> 
> 赞同：5
> 
> 时间：2012-06-08T17:14:38.927
> 
> 标签：ios, objective-c, iso

像我这样的新手在本地化方面也有类似的问题，但我找不到对我有用的问题。

这是我的问题。我们可以使用 NSArray 形式的语句获取所有 ISO 国家/地区代码`[NSLocale ISOCountryCodes]`。现在，对于每个国家，我想打印当地货币以及该国家使用的货币代码。这样做的适当方法是什么？

我做了以下不起作用的事情，因为我得到了 US United States: (null) ((null)) 的行，而我想得到 US United States: $ (USD) 的行：

```
myCountryCode = [[NSLocale ISOCountryCodes] objectAtIndex:row];
appLocale = [[NSLocale alloc] initWithLocaleIdentifier: @"en_US"];
identifier = [NSLocale localeIdentifierFromComponents: [NSDictionary
                      dictionaryWithObject: myCountryCode 
                                    forKey: NSLocaleCountryCode]];
myDictionary = [NSLocale componentsFromLocaleIdentifier: identifier];
myCountryName = [appLocale displayNameForKey:NSLocaleCountryCode 
                                       value:[myDictionary
                                             objectForKey:NSLocaleCountryCode]];
localCurrencySymbol = [appLocale displayNameForKey:NSLocaleCurrencySymbol
                      value:[myDictionary objectForKey:NSLocaleCurrencySymbol]];
currencyCode = [appLocale displayNameForKey:NSLocaleCurrencyCode 
                value: [myDictionary objectForKey:NSLocaleCurrencyCode]];
title = [NSString stringWithFormat:@"%@ %@: %@ (%@)", myCountryCode, myCountryName, localCurrencySymbol, currencyCode];
[appLocale release]; 
```

（上面的标识符，myCountryCode，myCountryName，localCurrencySymbol，currencyCode，title都是NSString指针。另外myDictionary是NSDictionary指针，appLocale是NSLocale指针）。本质上，上面的代码将在一个pickerview中，我想在其中动态生成每一行的标题。

非常感谢您的宝贵时间。本质上，问题是一旦我们有了 ISO 国家代码，我们如何打印（在应用程序区域设置中）该特定国家的货币符号和货币代码。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-07T12:16:20.837

对于任何只想从 3 个字母 iso 代码 ( commonISOCurrencyCodes ) 中获取货币代码的人。你可以简单地做到这一点。

```
NSString *localeId = @"JPY"; //[[NSLocale commonISOCurrencyCodes] objectAtIndex:1];
NSLocale *locale = [NSLocale currentLocale];
NSString *currency = [locale displayNameForKey:NSLocaleCurrencySymbol
                                       value:localeId];
NSLog(@"locale %@ currency %@", localeId, currency); 
```

印刷。

```
locale JPY currency ¥ 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-09T11:33:34.590

我认为您的问题是您期望`componentsFromLocaleIdentifer`返回有关语言环境的信息。相反，它返回有关作为标识符传入的字符串的信息。虽然您可以接收 NSLocalCurrencySymbol，但它只会在您传入的字符串具有特定货币的覆盖时才会出现（这在您的情况下永远不会发生，因为您只使用标准数组）。这方面的一个例子是一个用户已经建立了一个 FR 系统，但使用的是美元货币。

通常，您不需要使用`-displayNameForKey:value:`and `NSLocaleCurrencyCode`，`NSLocaleCurrencySymbol`因为它们都返回国际字符串，而不是本地化字符串。因此，一旦您拥有首选本地，您应该能够通过使用`-objectForKey:`.

在我的测试中，棘手的部分是假设列表中的语言环境足以创建有效的货币代码和符号是不正确的，相反，您需要有语言和国家代码。幸运的是，`+[NSLocale canonicalLanguageIdentifierFromString:]`它将为您提供正确的语言，然后您可以将其附加到国家代码（在 a 之后`_`）以创建国家/语言字符串，从而适当地检索货币信息。

这是我修改后的代码：

```
myCountryCode = [[NSLocale ISOCountryCodes] objectAtIndex:row];
appLocale = [[NSLocale alloc] initWithLocaleIdentifier: @"en_US"];
identifier = [NSLocale localeIdentifierFromComponents: [NSDictionary
        dictionaryWithObject: myCountryCode 
        forKey: NSLocaleCountryCode]];
myDictionary = [NSLocale componentsFromLocaleIdentifier: identifier];
myCountryName = [appLocale displayNameForKey:NSLocaleCountryCode 
         value:[myDictionaryobjectForKey:NSLocaleCountryCode]];

// Create the currency language combination and then make our locale
NSString *currencyLocaleLanguage= [NSLocale canonicalLanguageIdentifierFromString: myCountryCode];
NSString *countryLanguage= [NSString stringWithFormat: @"%@_%@", myCountryCode, currencyLocaleLanguage];
NSLocale *currencyLocale = [[NSLocale alloc] initWithLocaleIdentifier: countryLanguage];

localCurrencySymbol = [currencyLocale objectForKey:NSLocaleCurrencySymbol];
currencyCode = [currencyLocale objectForKey:NSLocaleCurrencyCode];

title = [NSString stringWithFormat:@"%@ %@: %@ (%@)", myCountryCode, myCountryName, localCurrencySymbol, currencyCode];
[currencyLocale release];
[appLocale release]; 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-09T11:05:52.423

尝试以下测试应用并根据需要进行调整

```
#import <Foundation/Foundation.h>

int main(int argc, char *argv[]) {
    NSAutoreleasePool *p = [[NSAutoreleasePool alloc] init];

    //  select an arbitrary locale identifier; you could use your row index but your
    //  indexing scheme would be different
    NSString *localeIdentifier = [[NSLocale availableLocaleIdentifiers] objectAtIndex:72];
    //  get the selected locale and the application locale
    NSLocale *selectedLocale = [[NSLocale alloc] initWithLocaleIdentifier:localeIdentifier];
    NSLocale *appLocale = [[NSLocale alloc] initWithLocaleIdentifier:@"en_US"];
    //  country code and name (in app's locale)
    NSString *countryCode = [selectedLocale objectForKey:NSLocaleCountryCode];
    NSString *countryName = [appLocale displayNameForKey:NSLocaleCountryCode value:countryCode];
    //  symbol and currency code
    NSString *localCurrencySymbol = [selectedLocale objectForKey:NSLocaleCurrencySymbol];
    NSString *currencyCode = [selectedLocale objectForKey:NSLocaleCurrencyCode];
    NSString *title = [NSString stringWithFormat:@"%@ %@: %@ (%@)", countryCode, countryName, localCurrencySymbol, currencyCode];
    [appLocale release];

    NSLog(@"title = %@",title);

    [p release];
} 
```

这会将以下内容记录到控制台：

```
2012-06-09 06:01:08.299 Untitled 2[11668:707] title = ES Spain: € (EUR) 
```

# apache-camel - Apache Camel 中的“direct:”和 to() 有什么区别？

> ID：10953237
> 
> 赞同：14
> 
> 时间：2012-06-08T17:15:07.867
> 
> 标签：apache-camel

[DirectComponent 文档](http://camel.apache.org/direct.html)提供了以下示例：

```
from("activemq:queue:order.in")
    .to("bean:orderServer?method=validate")
    .to("direct:processOrder");

from("direct:processOrder")
    .to("bean:orderService?method=process")
    .to("activemq:queue:order.out"); 
```

那和下面有什么区别吗？

```
from("activemq:queue:order.in")
    .to("bean:orderServer?method=validate")
    .to("bean:orderService?method=process")
    .to("activemq:queue:order.out"); 
```

我试图找到有关 to() 方法在 Java DSL 上的行为的文档，但超出了[RouteDefinition javadoc](http://camel.apache.org/maven/current/camel-core/apidocs/org/apache/camel/model/ProcessorDefinition.html#to%28java.lang.String%29)（它给出了非常简短的“将交换发送到给定端点”）我已经空白了:(

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-08T22:34:29.007

在上述情况下，您不会注意到太大的差异。“直接”组件很像方法调用。

一旦开始构建更复杂的路线，出于多种原因，您将希望将它们分成几个不同的部分。

例如，您可以创建可以在 Camel 上下文中的多个路由之间重用的“子路由”。就像您在常规编程中分割方法以允许可重用​​性并使代码更清晰一样。使用例如直接组件的子路由也是如此。

可以扩展相同的方法。假设您希望将多个协议用作路由的端点。您可以使用直接端点来创建主路由，如下所示：

```
// Three endpoints to one "main" route.
from("activemq:queue:order.in")
  .to("direct:processOrder");

from("file:some/file/path")
  .to("direct:processOrder");

from("jetty:http://0.0.0.0/order/in")
  .to("direct:processOrder");

from("direct:processOrder")
  .to("bean:orderService?method=process")
  .to("activemq:queue:order.out"); 
```

另一件事是为 DSL 中的每个“from()”子句创建一个路由。路由是 Camel 中的工件，您可以使用 Camel API 对它执行某些管理任务，例如动态启动、停止、添加、删除路由。“to”子句只是一个端点调用。

一旦开始在 Camel 中做一些有些复杂的真实案例，你会注意到你不能得到太多的“直接”路由。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T13:07:34.613

[直接组件](http://camel.apache.org/direct.html)用于命名路由的逻辑段。这与结构化编程中的命名过程类似。

在您的示例中，消息流没有区别。在结构化编程方面，我们可以说您对您的路线进行了一种[内联扩展。](http://en.wikipedia.org/wiki/Inline_expansion)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-04T07:09:05.043

另一个区别是Direct组件没有任何线程池，直接消费者进程方法由直接生产者的调用线程调用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-08T14:15:04.683

```
 from(A).to(B).to(OUT) 
```

正在链接

```
A --- B --- OUT 
```

但

```
from(A ).to( X)
from(B ).to( X)
       from( X).to( OUT ) 
```

其中 X 是直接的：？

基本上就像一个连接

```
A
  \____ OUT
  /
B 
```

显然这些是不同的行为，第二个你可以实现你想要的任何逻辑，而不仅仅是一个串行链

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-07-20T03:35:06.843

主要是用来打破复杂的路由配置，就像我们曾经在java中拥有可重用性的方法一样。而且通过在直接路由上配置线程，我们可以减少调用线程的工作。

# macos - 使用 ARD UNIX 命令设置计算机信息字段

> ID：10953238
> 
> 赞同：0
> 
> 时间：2012-06-08T17:15:15.553
> 
> 标签：macos, unix, redirect

我正在尝试使用以下命令更改 OS X 机器的计算机信息字段：

```
 system_profiler SPAirPortDataType | awk '/MAC Address:/{print $NF}' | /System/Library/CoreServices/RemoteManagement/ARDAgent.app/Contents/Resources/kickstart -configure -computerinfo -set1 -1 
```

我遇到了问题，并且知道上述内容不正确。有谁知道更好的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T18:21:03.930

没关系，我想通了：

```
 sudo defaults write /Library/Preferences/com.apple.RemoteDesktop \Text1 $(system_profiler SPAirPortDataType | awk '/MAC Address:/{print $NF}') 
```

使用后重启：

```
/System/Library/CoreServices/RemoteManagement/ARDAgent.app/Contents/Resources/kickstart -restart -agent -console 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T19:40:12.723

对于那些感兴趣的人，这是另一种方式：

```
/System/Library/CoreServices/RemoteManagement/ARDAgent.app/Contents/Resources/kickstart -configure -computerinfo -set1 -1 $(system_profiler SPAirPortDataType | awk '/MAC Address:/{print $NF}') 
```

# android - 如何创建适用于设备宽度和宽度的媒体查询

> ID：10953242
> 
> 赞同：0
> 
> 时间：2012-06-08T17:15:36.463
> 
> 标签：android, css, media-queries, responsive-design

当我调整页面大小时，我尝试让这个媒体查询在桌面和手机上都能工作。

这项工作在手机上

```
@media screen and (max-device-width: 320px) {
   ...
} 
```

这在桌面上

```
@media screen and (max-width: 320px) {
   ...
} 
```

但我不能让它们都工作我尝试使用`or`运算符但没有工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T17:21:23.293

根据[媒体查询的 W3 文档](http://www.w3.org/TR/css3-mediaqueries/)：

> 多个媒体查询可以组合在一个媒体查询列表中。以逗号分隔的媒体查询列表。如果逗号分隔列表中的一个或多个媒体查询为真，则整个列表为真，否则为假。在媒体查询语法中，逗号表示逻辑 OR，而“and”关键字表示逻辑 AND。

使用逗号代替**or**：

```
@media screen and (max-device-width: 320px), (max-width: 320px) {
   ...
} 
```

# matlab - 用于校准 RGB 的 Matlab 最小二乘法

> ID：10953244
> 
> 赞同：1
> 
> 时间：2012-06-08T17:15:44.340
> 
> 标签：matlab, colors, rgb, least-squares

**我两次解释了我的问题，因为我的英语不好：/**

**先解释一下：**

在我拍摄的一些图像中，我有每个像素的 RGB 矩阵。

此外，我有 3 个像素的 RGB，我知道它们的真实值（在我拍照后，像素的 RGB 值会因为光线而改变）。

如何使用这 3 个已知的 RGB 来使用最小二乘法，以便准确地获得原始图像颜色？

**第二个解释：**

我必须用我的相机拍一些苹果的照片。如果我在我的房间和街上拍摄相同的苹果，我会得到与苹果颜色不同的图像，尽管它们是相同的苹果。这是因为街上的灯不是我房间里的灯。

为了解决这个问题，我想在苹果附近放置三个我知道它们 RGB 的圆圈（红色、绿色和蓝色）。例如，我有 3 个圈子：

红圈-> [241 25 13]

绿色圆圈-> [12 239 41]

蓝色圆圈-> [35 28 237]

现在，我将用 3 个圆圈拍摄苹果。我知道我的 3 个圆圈的 RGB 发生了变化：

现在红圈是 [229 42 32]

绿色圆圈-> [24 241 42]

蓝色圆圈-> [29 26 230]

现在，有了这些信息（3 个圆圈的输入和输出 RGB），我想修复所有图像（苹果和 3 个圆圈）的颜色。

所以我的输入是：

（三个圆圈的初始RGB，我拍摄后这些圆圈的RGB）

并且输出必须是一个函数：(R,G,B) -> (new R, new G, new B)。

所以该功能必须修复图片中的所有RGB，

对于我之前的例子：

红圈 [229 42 32] 将更改为他原来的 [241 25 13]

绿色圆圈 [24 241 42] -> [12 239 41]

蓝色圆圈[29 26 230] -> [35 28 237]

所以，如果我拍摄并得到一个 RGB 为 [142, 124, 211] 的苹果，我想用他的 RGB 运行函数并获得这个苹果的真实颜色。

有人告诉我，我可以使用最小二乘法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T21:25:14.490

你可以这样做：

```
In = [   229    24    29
          42   241    26
          32    42   230  ];

Out = [  241    12    35
          25   239    28
          13    41   237 ]; 
```

然后计算：

```
A = Out / In; 
```

`A`将是从输入颜色到所需输出颜色的所需线性变换。不过，这只是一个模型，由您决定这是否是一个特别适合颜色的模型。我确信在颜色校准方面有很多工作，但我并没有声称知道这一点。

还要记住，这`/`不是正常的划分。基本上是 Matlab 过载`Out * inv(In)`。它实际上比这多一点。有关`help mrdivide`更多详细信息，请参阅。

然后应用你的新线性变换，应用`A`到你的彩色图像。对于给定的输入像素`inrbg = [ R ; G ; B ];`，您将计算

```
 outrgb = A * inrgb; 
```

您可以将其应用于整个图像。

不幸的是，你会得到一些超出允许强度范围的值，你必须把它们放回去。这是另一个表明纯线性模型不一定是好的模型。至少这给了你一个开始的地方。

还有一件事，我上面写的并没有明确使用最小二乘，但是如果您对颜色输入和输出有更多估计，例如

```
>> InN = [In randn(size(In))+In];  % just an example to get more columns, don't use this
>> InN

InN =

  229.0000   24.0000   29.0000  228.2382   25.2329   28.9302
   42.0000  241.0000   26.0000   41.3748  240.6159   26.5301
   32.0000   42.0000  230.0000   32.2829   42.0552  229.3372

>> OutN = [Out randn(size(Out))+Out]; % just an example to get more columns, don't use this
>> OutN

OutN =

  241.0000   12.0000   35.0000  241.1487   10.8441   33.8811
   25.0000  239.0000   28.0000   25.3679  240.0666   27.0684
   13.0000   41.0000  237.0000   12.1927   41.2091  236.9066 
```

那么这`A = OutN / InN`仍然有效，猜猜它用什么来解决它？有效地最小二乘。

# asp.net-mvc - 使用 MVC 的异常管理应用程序块

> ID：10953245
> 
> 赞同：0
> 
> 时间：2012-06-08T17:15:54.650
> 
> 标签：asp.net-mvc, exception-handling, application-blocks

我一直在浏览论坛以查找 ASP.NET MVC (MVC3) 应用程序中异常管理应用程序块 (EMAB) 的实现。

有很多关于 ELMAH 和 NLog 以及通过 global.asax ( [http://s151.codeinspot.com/q/694875](http://s151.codeinspot.com/q/694875) ) 与 ErrorController ( [http://www.davidjuth.com/asp-net ) 处理的讨论-mvc-error-handler.aspx](http://www.davidjuth.com/asp-net-mvc-error-handler.aspx) ) 方法以及利用 [HandleError] 装饰

我们正在考虑使用 EMAB 标准化我们的 MVC 应用程序的异常管理，但我似乎找不到任何提供全面解决方案的具体示例。

有没有人有任何链接或可以准确解释您如何在 MVC 框架中使用 EMAB

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T22:10:31.877

我决定采用以下方法...

// *** *在Global.asax中

```
 protected void Application_Error(object sender, EventArgs e)
    {
        Exception originalError = Server.GetLastError();
        Exception replacedError;

        if (ExceptionPolicy.HandleException(originalError, "Global Policy", out replacedError))
        {
            Exception ex = replacedError ?? originalError;
            if (ex.InnerException != null)
            {
                ex = ex.InnerException;
            }
            var httpException = ex as HttpException;
            HttpApplication httpApplication = this.Context.ApplicationInstance;

            string message = Utility.GetFullMessage(httpApplication, ex, "::");
            string messageHtml = Utility.GetFullMessage(httpApplication, ex, "<br/>");

            LogEntry logEntry = new LogEntry();
            logEntry.EventId = 100;
            logEntry.Priority = 2;
            logEntry.Message = ex.Message + "::" + message;
            Logger.Write(logEntry);

            Response.Clear();
            Server.ClearError();

            var routeData = new RouteData();
            routeData.Values["controller"] = "Error";
            routeData.Values["action"] = Constants.ErrorGeneralKey; //"General"
            routeData.Values["message"] = ex.Message;
            routeData.Values["fullMessage"] = messageHtml;
            Response.StatusCode = 500;

            if (httpException != null)
            {
                Response.StatusCode = httpException.GetHttpCode();

                switch (Response.StatusCode)
                {
                    case 403:
                        routeData.Values["action"] = "Http403";
                        break;

                    case 404:
                        routeData.Values["action"] = "Http404";
                        break;

                    default:
                        routeData.Values["httpStatusCode"] = Response.StatusCode;
                        break;
                }
            }
            IController errorController = new ErrorController();
            var rc = new RequestContext(new HttpContextWrapper(Context), routeData);
            errorController.Execute(rc);
        }
    } 
```

// *** *在辅助类中

```
 public static string GetFullMessage(HttpApplication httpApplication, Exception ex, string delimiter)
    {
        return "StackTrace: " + ex.StackTrace
                    + delimiter + "User: " + ((httpApplication.User == null) ? "<null>" : httpApplication.User.Identity.Name)
                    + delimiter + "Data: " + GetExceptionData(ex.Data)
                    + delimiter + "Version: " + httpApplication.Request.Browser.Version
                    + delimiter + "Browser: " + httpApplication.Request.Browser.Browser
                    + delimiter + "Major Version: " + httpApplication.Request.Browser.MajorVersion.ToString()
                    + delimiter + "Minor Version: " + httpApplication.Request.Browser.MinorVersion.ToString()
                    + delimiter + "Javascript Version: " + httpApplication.Request.Browser.JScriptVersion.ToString()
                    + delimiter + "Ecma Script Version: " + httpApplication.Request.Browser.EcmaScriptVersion.ToString()
                    + delimiter + "Platform: " + httpApplication.Request.Browser.Platform
                    + delimiter + "Source: " + ex.Source
                    + delimiter + "Form: " + httpApplication.Request.Form.ToString()
                    + delimiter + "QueryString: " + httpApplication.Request.QueryString.ToString()
                    + delimiter + "TargetSite: " + ex.TargetSite;
    } 
```

// *** *在错误控制器中

```
 public ActionResult General(string httpStatusCode, string message, string fullMessage)
    {
        errorViewModel.RootCause = Enums.RootCause.General;
        errorViewModel.HttpStatusCode = httpStatusCode;
        errorViewModel.Message = message;
        errorViewModel.FullMessage = fullMessage;
        return View("Error", errorViewModel);
    }

    public ActionResult Http404()
    {
        errorViewModel.RootCause = Enums.RootCause.NotFound;
        return View("Error", errorViewModel);
    }

    public ActionResult Http403()
    {
        errorViewModel.RootCause = Enums.RootCause.Forbidden;
        return View("Error", errorViewModel);
    } 
```

# c# - 证书验证不使用代理设置进行链信任

> ID：10953247
> 
> 赞同：0
> 
> 时间：2012-06-08T17:16:06.310
> 
> 标签：c#, wcf, proxy, certificate, x509certificate

我一直在努力让 WCF 客户端通过 Web 代理工作。如果我手动指定代理，如下所示，我可以让 http 请求工作。

```
WebProxy proxy = new WebProxy("http://x.x.x.x:3128", false);
proxy.Credentials = new NetworkCredential("user", "pass");
WebRequest.DefaultWebProxy = proxy; 
```

但是我设置了要使用的客户端服务代理`ClientCredentials.ServiceCertificate.Authentication.CertificateValidationMode = System.ServiceModel.Security.X509CertificateValidationMode.ChainTrust;`

检查发出的数据包，客户端成功连接到服务器，但随后尝试验证服务提供的证书。此验证尝试失败，因为对链的请求没有 Proxy-Authorization 标头（它们因 407 错误而失败）。如何让这些请求正确使用指定的 DefaultWebProxy？

如果我将验证模式设置为“无”，那么当然一切正常，但我真的不想这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T17:44:17.490

此设置仅影响消息级证书。对于传输级别，请尝试类似[http://webservices20.blogspot.co.il/2008/12/wcf-gotcha-disabling-ssl-validation.html](http://webservices20.blogspot.co.il/2008/12/wcf-gotcha-disabling-ssl-validation.html)

# android - Android 从 URL 流式传输非静态文件图像

> ID：10953253
> 
> 赞同：0
> 
> 时间：2012-06-08T17:16:27.867
> 
> 标签：android, android-imageview

如何在 Android 中使用 ImageView 从这样的 URL 读取图像：

[http://www.mphonline.com/ImgFile.aspx?TmpFile=D:\MPHLoc\ProdImg\9781740594943_s.jpg]

它不会返回正常的静态图像流。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T17:18:03.340

Android 模拟器无法从本地驱动器访问资源

就像`c: d: e:`你的阙中展示的那样：`D:\MPHLoc\ProdImg\9781740594943_s.jpg`

如果你想从本地下载和显示图像，你可以参考[这个](http://android-example-code.blogspot.in/p/download-store-and-read-images-from.html)

# c++ - 我应该在哪里分配这个内存？

> ID：10953254
> 
> 赞同：0
> 
> 时间：2012-06-08T17:16:36.303
> 
> 标签：c++, performance, memory-management

```
for( int i = 0; i < lines; i++ ) {
    std::unique_ptr<BYTE[]> pLine( new BYTE[lineSize] );
    //Do stuff
} 
```

现在， pLine 在循环内声明，因为它只在循环体中使用。但是，仅在循环外分配一次不会减少执行的分配量（避免内存碎片）吗？

```
std::unique_ptr<BYTE[]> pLine( new BYTE[lineSize] );
for( int i = 0; i < lines; i++ ) {
    //Do stuff
} 
```

如果编译器知道 lineSize 在整个迭代过程中保持不变，我可以相信编译器能够轻松优化第一个版本；但它确实会在整个函数调用中发生变化，所以我不能让它成为一个常数。

我还认为在检测到性能问题之前应该避免像这样的微优化，所以我想我会坚持使用第一个版本。你们有什么感想？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T17:20:52.857

首先，我认为您为此使用了错误的工具。你应该使用的是`std::vector`：

```
std::vector<BYTE>  data(count); //allocate and initialize 
```

它分配内存并初始化所有元素。如果您希望它只分配而不进行任何初始化，请编写以下代码：

```
std::vector<BYTE>  data;
data.reserve(count); //allocate only 
```

现在，你应该在哪里声明？这取决于它的用途。但尽量缩小变量的范围：如果只在`for`循环中需要它，则在循环本身中声明它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T17:58:25.947

问题是真的在`//do Stuff`

```
for( int i = 0; i < lines; i++ ) {
    std::unique_ptr<BYTE[]> pLine( new BYTE[lineSize] );
    //Do stuff
} 
```

我假设您正在将循环内的内存分配给，`unique_ptr`因为在该部分的某处`//Do stuff`您将该内存的所有权传递给另一个对象。

如果您尝试这样做：

```
std::unique_ptr<BYTE[]> pLine( new BYTE[lineSize] );
for( int i = 0; i < lines; i++ ) {
    //Do stuff
} 
```

第一次循环所有权被转移，现在`pLine`包含一个 NULL 指针，用于第二次后续迭代。

如果您没有转移所有权，那么您可能使用了完全错误的内存管理方法，并且向量可能是一个更好的主意。

```
for( int i = 0; i < lines; i++ ) {
    std::vector<BYTE> pLine(lineSize);
    //Do stuff
} 
```

将它放在循环中的优点是它被重新初始化，因此在循环的每次迭代中所有成员都为零。如果`//Do Stuff`受状态影响，`pLine`则将其移出循环可能是不正确的（无需做更多工作以确保`pLine`每次迭代后的状态正确。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T17:21:05.403

> 我也认为应该避免像这样的微优化，直到检测到性能问题

这不是“微优化”，而是常识。即使编译器可以将变量提升到循环之外（您是否检查过它是否存在？），如果不需要它，为什么还要问它呢？

微优化以清晰为代价使您的代码更快/内存效率更高。这不符合那个描述。

在不相关的注释上，您确定您真的想要一个指向 a 的指针`BYTE[]`吗？好像很奇怪...

# events - bbvEventBroker 强类型且没有魔术字符串

> ID：10953261
> 
> 赞同：2
> 
> 时间：2012-06-08T17:16:54.133
> 
> 标签：events, ninject, strong-typing, magic-string

我想将 bbvEventBroker 与 Ninject 一起使用，但是我担心使用魔术字符串来连接发布者和订阅者。有没有一种强类型的方法可以在没有魔术字符串的情况下做到这一点。我需要有一个中央静态魔术字符串存储库吗？

[事件经纪人](http://code.google.com/p/bbvcommon/wiki/EventBrokerTutorial)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-09T16:40:55.440

不，没有。EB 的目的是将发布者和订阅者完全分开，这样他们就不需要知道事件的来源。一个事件也可以有多个发布者，这样就没有唯一的类型作为源。

# windows - 为 Windows 编写虚拟打印机驱动程序

> ID：10953263
> 
> 赞同：1
> 
> 时间：2012-06-08T17:17:02.083
> 
> 标签：windows, device-driver, postscript, wdk, printers

我是 Windows 开发新手，我正在尝试编写用户模式 ​​Windows（XP、Vista 和 7）虚拟打印机驱动程序。我的目标是拦截第三方应用程序发送到硬件打印机的输出，并在输出结束时向该输出添加一些额外的数据（文本+图形）。然后发送最终的有效载荷以由硬件打印机打印。请注意，我的数据不会添加到机器的每次打印输出中，而只会添加到特定的第三方应用程序中。

我想在转换为任何页面描述语言 (PDL) 之前将我的额外数据添加到打印输出中。我可以这样做吗？我是否能够以正确的格式在输出末尾添加我的额外数据？如果是，那么我需要编写什么样的驱动程序以及在[架构的哪一层](http://www.osronline.com/ddkx/gstart/gs_basics_4bqf.htm)？

有没有比编写用户模式打印机驱动程序更好的方法来做同样的事情？

最后，是否有示例代码、在线博客或书籍可以帮助我解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T17:27:05.053

我认为您最好让应用程序写入通用 Postscript 驱动程序并对生成的 Postscript 进行后处理，而不是试图理解写入打印机驱动程序的数据；有很多优秀的开源工具可用于操作 Postscript。

[本页描述了在 Windows 上设置将生成 Postscript 的驱动程序，](http://www.stat.tamu.edu/~henrik/GSPSprinter/GSPSprinter.html)尽管您将希望对 Postscript 执行其他操作，而不是按照此处所述将其发送到另一台打印机。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T02:20:04.103

我认为你不需要司机。只需使用随 WDK 提供的标准 Postscript 驱动程序，添加 .PPD 和 .INF 文件为其命名并指定特征，然后将您的代码放入端口监视器中。端口监视器比打印驱动程序更容易构建和维护。

# python - 如何调试此缓冲文件队列？

> ID：10953272
> 
> 赞同：2
> 
> 时间：2012-06-08T17:17:39.893
> 
> 标签：python, debugging, testing, queue

我有一个队列对象，它在我的项目中扮演着相当重要的角色，我无法承受其中有任何错误。

它的想法是类似于 builtin `Queue`，它的基类，但它将数据或部分数据至少存储在文件中以保留内存。我决定将其中的一些保留在内存中，因为这样可以加快速度。我已经把代码放在[这里了](https://github.com/GP89/BufferedGzipQueue)，看它可能比我解释它更容易

想做这件事似乎很奇怪，但我需要排队很多工作，排队的速度比我完成它的速度要快得多，而且如果我使用标准的`Queue`. 我不能只在 上放一个 maxsize`Queue`并阻止工人将东西放入队列中，因为我想尽快知道要处理的数据总量。我也无法先计算出总数，但不要排队，然后通过输入返回，`Queue`因为每次查看数据时总数都会不同，最后总数不会匹配。

我的问题是如何彻底测试这个以确保没有项目丢失或更重要的是当缓冲区或文件中仍有项目时，或者在调用完成并且队列为空之后，getter 没有任何阻塞。

当您知道某些给定输入的输出应该是什么时，有些事情似乎很容易测试和设置单元测试，但是测试这样的事情我并不确定一种有效的方法。是否可以通过单元测试来测试这种东西？

我已经建立了一个测试程序，它以不同数量的项目以不同、不同的速度放入和获取项目，这看起来很好，但我已经看到有证据表明吸气剂阻塞`.get`了仍在队列中的项目，所以我m 导致相信有问题。

我可以彻底测试以找到任何剩余的错误或几乎确定它没有错误的最佳方法是什么？

## 编辑

可以生成一些类似于我使用以下代码的测试数据，我只有在项目中某些条件下的文件的校验和，而其他时候它是`None`所以我只是在下面的代码中生成它来尝试和模拟那个

```
import os
import hashlib

def hash(f_obj):
    md5 = hashlib.md5()
    while True:
        data = f_obj.read(8192)
        if not data:
            break
        md5.update(data)
    return md5.hexdigest()

def produce(at_once,total_items):
    items=[]
    count=0
    for dir,folders,files in os.walk("/"):
        for f in files:
            try:
                f_path= os.path.join(dir,f)
                f_size= os.path.getsize(f_path)
                f_mtime= os.path.getmtime(f_path)
                with open(f_path) as file_obj:
                    f_hash= hash(file_obj) if f_size%2 else None
                items.append((f_path,f_size,f_mtime,f_hash))
                count+=1
            except Exception as err:
                print "#####",err,"#####"
            if len(items) >= at_once:
                yield items
                items=[]
        if count >= total_items:
            break
    if items:
        yield items 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T18:49:59.677

我写了一些类似的组件。

我验证它们正确性的策略通常是三方面的：

1.  审查代码。我会在写完代码后的一两天内尝试彻底审查代码，特别注意我认为可能存在错误的地方。如果可能的话，我也会请一位同事审查它。
2.  单元测试验证它在“明显”情况和边缘情况下表现良好。它们有助于确认不存在愚蠢的错误，并有助于防止未来的回归……但我通常不认为会发现令人惊讶的错误。
3.  压力测试脚本。该脚本将生成一堆线程，“随机”执行读取和写入，确保不会发生任何爆炸。我的第一个版本通常是完全随机的，但随着我的进一步发展，我会为其添加一些智能。我将确保“随机”读取/写入将偏向于触发复杂的代码路径（例如，在您的示例中，偏向于溢出到 gzip 文件，然后从该文件中读回），我将跟踪数字应该在队列中的项目（以检测错误的阻塞操作），我将改变读取器和写入器的数量。一旦我可以让这个脚本运行一段时间而没有任何崩溃，我就会相当有信心我的队列是好的。

到目前为止，我用这种方法验证的队列在生产中一直坚如磐石。

# html - 重定向到您来自的文件夹

> ID：10953274
> 
> 赞同：0
> 
> 时间：2012-06-08T17:17:45.823
> 
> 标签：html, redirect, href

我在不同的文件夹中有两个相同的表格（重复），因为每个文件夹都可以被选定的一组人访问。现在我想摆脱重复，只保留一个文件。但是，我希望该文件能够找出用户从哪个文件夹访问该文件，并在成功提交结束时重定向回他来自的文件夹。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T17:29:19.117

最简单的方法可能是在引用页面的表单中添加一个隐藏字段：

```
<input type="hidden" value="" id="referrer" /> 
```

然后可以使用任何服务器端代码设置，也可以在加载表单的页面时使用 javascript 设置：

```
document.getElementById('referrer').value = escape(document.referrer); 
```

# java - 将部分更改写回 XML？

> ID：10953277
> 
> 赞同：1
> 
> 时间：2012-06-08T17:17:58.390
> 
> 标签：java, xml, dom, synchronization

我将我的应用程序数据存储在 XML 文件中。此文件在应用程序启动时读取，并在停止时写回。

DOM 或其他库中是否有任何方法可以使数据与我的对象保持同步？即我希望只写回更改的内容？

# html - HTML 5 postMessage（同域）

> ID：10953280
> 
> 赞同：0
> 
> 时间：2012-06-08T17:18:06.953
> 
> 标签：html, postmessage

我正在尝试使 HTML postMessage 功能正常工作？

我找到了一些给出示例的站点，但由于某种原因而苦苦挣扎。

2 页的代码如下所示，如有任何帮助，将不胜感激。

谢谢和问候， 瑞安

**测试.php**

```
<iframe src="postmessage-target.html" id="iframe"></iframe>
 <form id="form">
   <input type="text" id="msg" value="Message to send"/>
   <input type="submit"/>
 </form>
 <script>
 window.onload = function(){
         var win = document.getElementById("iframe").contentWindow;
         document.getElementById("form").onsubmit = function(e){
                 win.postMessage( document.getElementById("msg").value );
                 e.preventDefault();
         };
 };
 </script> 
```

**postmessage-target.html**

```
<div id="test">Send me a message!</div>
 <script>
 document.addEventListener("message", function(e){
         document.getElementById("test").textContent =
                 e.domain + " said: " + e.data;
 }, false);
 </script> 
```

再次提前感谢。

瑞安

**更新**

根据用户的建议，这是否正确？

**测试.html**

```
<iframe src="postmessage-target.html" id="iframe"></iframe>
 <form id="form">
   <input type="text" id="msg" value="Message to send"/>
   <input type="submit"/>
 </form>
 <script>
 window.onload = function(){
         var win = document.getElementById("iframe").contentWindow;
         document.getElementById("form").onsubmit = function(e){
                 win.postMessage( document.getElementById("msg").value, "*"); 
                 e.preventDefault();
         };
 };
 </script> 
```

**postmessage-target.html**

```
<div id="test">Send me a message!</div>
 <script>
 document.addEventListener("message", function(e){
 document.getElementById("test").innerHTML = e.origin + " said: " + e.data;
 }, false);
 </script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T17:22:28.583

规范指定您应该将 targetOrigin 提供给 postMessage 函数：

```
 win.postMessage( document.getElementById("msg").value, "*"); 
```

我不认为有一个`e.domain`. `e.origin`在侦听器中尝试：

```
 document.getElementById("test").innerHTML = e.origin + " said: " + e.data; 
```

（我还用 innerHTML 替换了非标准的 textContent）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-20T13:23:57.650

为了让它工作，我最终不得不将 document.addEventListener 更改为 window.addEventListener - 我认为当你这样做时，你正在将接收代码添加到传输文档而不是 iframe。

# mysql - SQL查询从特定列中共享相同值的行中提取字段值，并将这些值组合成一行

> ID：10953281
> 
> 赞同：1
> 
> 时间：2012-06-08T17:18:19.083
> 
> 标签：mysql, sql, joomla, joomfish

我正在尝试从 Joomla 的 Joomfish MySQL 数据库表中导出翻译的内容。

Joomfish 的工作方式是单独翻译字段并将它们存储在 jos_jf_content 表中，并带有指向 jos_content 表中原始源内容的引用 id。例如，一行可以保存翻译的标题，另一行保存翻译的类别，另一行保存全文内容。这些行是独立的，仅共享 reference_id 值。

所以有一个 jos_jf_content 表，其中感兴趣的列是：

reference_id（来源的id）| 参考字段（标题|全文|metadesc）| 价值（翻译）

我需要将共享相同 reference_id 的所有值组合成一行，其列是 Title、Fulltext、Metadesc 等。

有什么提示吗？

更新：

原表如下：

```
|reference_id|   reference_field |   value        |

        10          title               A title
        10          fulltext           Body of post 
```

我需要将它（CSV 等）导出为：

```
|  ID    |  TITLE    |    FULLTEXT     | 

|  10    |   A Title |  Body of post  | 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T18:26:05.380

你可以使用 Mysql GROUP_CONCAT() 所以你的查询可能看起来像

```
SELECT group_concat(column_name) FROM table where reference_id = 'rid' 
```

假设用于保存这些信息的列名相同。如果没有，请粘贴您的表结构。如果它们存储在不同的列中，您也可以使用 concat 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T17:30:30.410

我认为以下查询符合目标。感谢 Bill Purchase 提供了类似情况的链接。（注意我最终只需要介绍而不是全文）

```
 SELECT DISTINCT jf.reference_id
   , t.value AS title
   , it.value AS introtext
   , mk.value AS metakey
   , md.value AS metadesc
FROM jos_jf_content AS jf
LEFT JOIN jos_jf_content AS t ON jf.reference_id = t.reference_id
  AND t.reference_field = 'title' AND t.reference_table='content'
LEFT JOIN jos_jf_content AS it ON jf.reference_id = it.reference_id
  AND it.reference_field = 'introtext' AND it.reference_table='content'
LEFT JOIN jos_jf_content AS mk ON jf.reference_id = mk.reference_id
  AND mk.reference_field = 'metakey' AND mk.reference_table='content'
LEFT JOIN jos_jf_content AS md ON jf.reference_id = md.reference_id
  AND md.reference_field = 'metadesc' AND md.reference_table='content'
WHERE jf.reference_table='content'
ORDER BY jf.reference_id 
```

# c# - 针对多个选项的 Where 子句

> ID：10953282
> 
> 赞同：0
> 
> 时间：2012-06-08T17:18:21.780
> 
> 标签：c#, asp.net, entity-framework, listbox, linq-to-entities

Linq to entity 语法中是否有任何“IN”关键字可用？我有一个添加多个项目的列表框。我想在 db 中搜索这些项目。我的查询如下所示：

```
 var result = context.data_vault
                      .Where(d => d.STATE == lstStates.SelectedItem.Text).OrderBy(d=>d.dv_id)
                      .Skip(e.NewPageIndex * GridView1.PageSize)
                      .Take(GridView1.PageSize)
                      .ToList(); 
```

我想要`d => d.STATE == lstStates.Items`。如何改变它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T17:20:44.833

编码：

```
string[] arr = listview.Items
                       .Cast<ListItem>()
                       .Select(i => i.Text) // or .Value
                       .ToArray();

db.Where(d => arr.Contains(d.STATE); 
```

应该翻译成查询：

```
... WHERE STATE IN ('your', 'array', 'items') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T17:47:47.503

您可以尝试`.Any()`或`.Contains()`语法

像这样的例子：

```
select d from context.Data
Where ListofIdsFromUI.Any(d.Id)
select d 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T17:30:11.830

尝试这个：

```
var result = context.data_vault
                      .Where(d => lstStates.Items.Contains(d.STATE)).OrderBy(d=>d.dv_id)
                      .Skip(e.NewPageIndex * GridView1.PageSize)
                      .Take(GridView1.PageSize)
                      .ToList(); 
```

这里，

```
lstStates is List<string> 
```

# c - 宏观评价

> ID：10953285
> 
> 赞同：2
> 
> 时间：2012-06-08T17:18:44.687
> 
> 标签：c

> **可能重复：**
> [未定义的行为和序列点](https://stackoverflow.com/questions/4176328/undefined-behavior-and-sequence-points)

我无法理解以下宏：

```
#define CUBE(x) ((x)*(x)*(x)) 
```

我的代码：

```
int y=5;
print("Cube = %d",CUBE(++y)); 
```

这段代码打印 512（使用 Microsoft Visual Studio）

我期待这个打印出来：`((++5)*(++6)*(++7)) = (6*7*8) = 336`。
这是如何评估的？

同样的代码也使用 Dev C++ 编译器编译，结果是 392！！！

有人可以解释为什么两个编译器对完全相同的代码显示不同的结果吗？

这是如何`++y`评估的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T17:23:25.717

当宏展开时，值`y`会被多次修改，而没有中间的序列点。
这是**未定义的行为**。

未定义的行为意味着任何行为都是可能的，您的程序不是有效的 c 程序。
因此，您会在不同的编译器上看到不同的输出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T17:21:58.250

立方体（++y））；变为 (++y * ++y * ++y) - 评估的顺序是什么？

从技术上讲-在功能点之间更改相同的变量是未定义的

编辑：见[未定义的行为和序列点](https://stackoverflow.com/questions/4176328/undefined-behavior-and-sequence-points)

Visual C++ 似乎将此评估为`y+=3; y*y*y; so 8*8*8 = 512`
382 是 7*7*8 所以 Dev C++ 大概评估第一部分为`y+=2; y*y;` then`49*y++`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-08T17:22:46.697

您的表达式中没有[序列点](http://en.wikipedia.org/wiki/Sequence_point)，因此副作用（即递增的结果`y`）变得可见的时间是不确定的。简而言之，编译器可以在表达式计算完成之前的任何时间将结果存储`++y`回。`y`

这是制作带有副作用的表达式的宏的危险。使用等效功能会更好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-08T17:24:43.267

预编译器评估此宏

```
#define CUBE(x) ((x)*(x)*(x)) 
```

在您的代码中：

```
int y=5;
print("Cube = %d",CUBE(++y)); 
```

至

```
int y=5;
print("Cube = %d",((++y)*(++y)*(++y))); 
```

编写这样的代码是令人困惑的，结果是不确定的。

不同的编译器可以表现不同。

避免使用这样的结构，你就不会遇到这样的问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-08T17:58:04.260

我们需要查看代码 (gcc -S .c) 的 ASM（汇编）来了解它到底发生了什么。

在 Dev C++ 编译器中，ASM 看起来像

```
1)        movl    $5, 28(%esp)
2)        addl    $1, 28(%esp)
3)        addl    $1, 28(%esp)
4)        movl    28(%esp), %eax
5)        imull   28(%esp), %eax
6)        addl    $1, 28(%esp)
7)        imull   28(%esp), %eax 
```

它显示值 5 已移动到 %esp (1)，然后在那里添加了两次（2 和 3），所以现在 y 的值变为 7；该值现在被移动到 eax 寄存器 (4) 并乘以 7 * 7 (5)；现在将值 y (6) 加 1，然后与 eax 相乘；所以答案是 7 * 7 * 8 = 392

在 Microsoft Visual Studio 中，它将是 8 * 8 * 8。

# javascript - javascript将新对象分配为对象属性

> ID：10953286
> 
> 赞同：0
> 
> 时间：2012-06-08T17:18:46.390
> 
> 标签：javascript

我有一个看起来像这样的对象：

```
var BigObject = {
    'CurrentInt': 0,
    'CurrentBool': false,
    'CurrentObject': {}
} 
```

然后，我像这样声明 SomeObject：

```
var SomeObject = {
      'SomeString': "",
      'SomeInt': 0
} 
```

这两个定义是针对处于初始状态的对象的，我猜有点像类型定义。现在我想将`new`SomeObject 分配给`BigObject['CurrentObject']`. 我试过这个：

```
BigObject['CurrentObject'] = new SomeObject(); 
```

但它不起作用。目前，我只是通过引用进行直接赋值`BigObject['CurrentObject'] = SomeObject;`，然后当我需要重置 SomeObject 的值时，我只需运行一个函数，在其初始阶段重新声明 SomeObject 的每个属性。

但是我怎样才能使用`new`关键字来创建一个可重用的对象类型，它是 BigObject 的一个属性。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T17:21:36.497

`new`只能与函数一起使用，将其作为构造函数运行：

```
function SomeObject() {
    this.SomeString = "";
    this.SomeInt = 0;
} 
```

你所做的相当于：

```
var SomeObject = new Object();
SomeObject.SomeString = "";
SomeObject.SomeInt = 0; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T17:21:22.723

如果要定义类型，则应使用构造函数：

```
var SomeObject = function() {
    this.someString = "";
    this.someInt = 0;
}

var BigObject = function() {
    this.currentInt = 0;
    this.currentBool = false;
    this.currentObject = new SomeObject();
} 
```

一旦定义了这些构造函数，就可以`new`（创建实例）：

```
var myBigObject = new BigObject();
console.log(myBigObject.currentObject); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-08T17:23:56.537

使用 JavaScript 类。

```
function SomeObject() { }
SomeObject.prototype.someString = "";
SomeObject.prototype.someInt = 0;

function BigObject(){ this.currentObj = new SomeObject; }
BigObject.prototype.currentInt = 0;
BigObject.prototype.currentBool = false;
BigObject.prototype.currentObj = null;

var a = new BigObject;

a.currentObj instanceof SomeObject;  // true 
```

# java - XMLAdapter：可配置的日期格式

> ID：10953301
> 
> 赞同：1
> 
> 时间：2012-06-08T17:20:07.320
> 
> 标签：java, xml, date, jaxb, xmladapter

我正在使用 JAXB（以及用于 XSLT 的一点 Saxon）来解组 XML 数据。在我的 XML 文档中，我有一个日期字符串值。

我做了一些研究并试验了 XMLAdapter 和 @XMLJavaTypeAdapter。我在这里找到了关于 StackOverflow 的有用问答：[jaxb unmarshal timestamp](https://stackoverflow.com/questions/2519432/jaxb-unmarshal-timestamp)。那里概述的涉及 SimpleDateFormat 的解决方案似乎运作良好。

这是我的问题：XML 中日期字符串的格式因文档而异。每次可以采用不同的日期格式。在当前系统（我用所有这些 XML 操作替换）中，在解析 XML 文档时检索和应用数据库表中的日期格式。手动。逐行。（现在你明白我为什么要用 JAXB 替换它了，是的！）

**所以问题是：**我将如何更改为不同文档提供给 XMLAdapter 中 SimpleDateFormat 的日期格式字符串？这样的事情甚至可能吗？我是否注定要将日期字符串作为字符串读取，然后稍后将其转换为其他地方的日期？

**编辑：**我只是要删除这个问题，但它得到了投票，所以我想我会写一个关于我最终做了什么的正确答案。我将暂缓接受我自己的答案，以防有人有一些见解可以得出更好的答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T19:58:17.200

您可以使用 an`XmlAdapter`来处理日期格式。由于日期格式因文档而异，您可以利用在 Unmarshaller 上指定适配器的初始化实例。通过这种方式，您可以设置适合您要解组的文档的日期格式。

例子

*   [http://blog.bdoughan.com/2011/09/mixing-nesting-and-references-with.html](http://blog.bdoughan.com/2011/09/mixing-nesting-and-references-with.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T20:27:16.240

这是我最终得到的结果：我应用了在我的问题中链接到的问答中找到的确切解决方案，在这里找到：[jaxb unmarshal timestamp](https://stackoverflow.com/questions/2519432/jaxb-unmarshal-timestamp)。

你可能会想：“这似乎给这个人留下了和他原来一样的问题。他的`SimpleDateFormat`对象中仍然有一个静态日期格式字符串，但他的日期字符串仍然是可变格式！他没有解决任何问题！ 真是个傻瓜！”

Here is my solution: I'm already applying an XSLT to my XML document; I have a different XSLT for each XML document type. So I'm going to take the XSLT I already (have to) have, and add functionality in it to convert the date string to the same date format as the one specified in my `SimpleDateFormat` object in my `XMLAdapter`.

Ta da! I don't need to configure jack now. My configuration is inherent in the XSLT I already (and always) apply before I attempt to unmarshal.

# javascript - Javascript：将字符串解释为对象引用？

> ID：10953303
> 
> 赞同：32
> 
> 时间：2012-06-08T17:20:20.657
> 
> 标签：javascript

> **可能重复：**
> [Javascript 使用变量作为对象名称](https://stackoverflow.com/questions/6084858/javascript-use-variable-as-object-name)

如何让 JS 将字符串视为对先前定义的对象的引用？简化：

```
var myObject = new MyObject();

var myString = "myObject";

var wantThisToWork = myString.myproperty; 
```

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-06-08T17:27:32.697

如果变量在全局范围内，您可以将其作为全局对象的属性访问

```
var a = "hello world";
var varName = "a";
console.log( window[varName] ); // outputs hello world
console.log( this[varName] ); // also works (this === window) in this case 
```

但是，如果它是一个局部变量，唯一的方法是使用`eval`( [disclaimer](https://www.nczonline.net/blog/2013/06/25/eval-isnt-evil-just-misunderstood/) )

```
function () {
  var a = "hello world";
  var varName = "a";
  console.log( this[varName] ); // won't work
  console.log( eval(varName) ); // Does work
} 
```

除非您可以将动态变量放入对象中并像访问属性一样访问它

```
function () {
  var scope = {
    a: "hello world";
  };
  var varName = "a";
  console.log( scope[varName] ); // works
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-08T17:23:51.303

您可以使用该`eval`功能。

```
eval(myString).myproperty 
```

但是，请谨慎使用 eval，如果这是用户输入的内容，它将执行任何 javascript 代码！

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-06-08T17:22:46.543

在我看来，唯一的方法是使用 eval。但正如他们所说， eval 是邪恶的——但不是在受控环境中。这是可能的方式，但我不建议使用 eval，除非绝对必要。

```
var myObject = new MyObject();
var myString = "myObject";
var wantThisToWork = eval(myString).myproperty; 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-06-08T17:30:16.563

使用**eval()**

```
var myObject = {};
myObject.myproperty = "Hello";
var myString = "myObject";

var wantThisToWork = eval(myString).myproperty; 
```

# blender - 如何在 Blender 游戏引擎（2.5+）中使用 python 来保存深度缓冲区和颜色缓冲区以归档每一帧？

> ID：10953306
> 
> 赞同：0
> 
> 时间：2012-06-08T17:20:28.617
> 
> 标签：blender

我需要将给定相机的颜色缓冲区和深度缓冲区保存在 Blender 游戏引擎中的场景中，每一帧都保存到一个文件中（每个保存到自己的文件中）。这可能吗？如何使用 BGE 和 python 进行设置？

我在 Blender Artists 论坛上问过，但似乎没有人回答这个问题。

# node.js - Express JS 与纯 Node.js - 性能基准？

> ID：10953307
> 
> 赞同：10
> 
> 时间：2012-06-08T17:20:33.937
> 
> 标签：node.js, express

我有一个问题 - 有没有人有任何基准数据。使用 Express JS 框架与纯 Node.js？

这是否应该考虑 - 或者如果您正在构建或多或少的大型 Web 应用程序，使用 Express 或类似框架绝对是必须的？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-11-21T02:38:21.947

> **编辑：**
> 
> 我链接到下面的文章消失了，我搜索了一下后找不到它。然而，取而代之的是，这里有一些具有足够科学基准的相关参考资料：
> 
> *   [https://github.com/koajs/koa/blob/master/docs/koa-vs-express.md#is-koa-faster-than-express](https://github.com/koajs/koa/blob/master/docs/koa-vs-express.md#is-koa-faster-than-express)
> *   [http://serdardogruyol.com/?p=111](http://serdardogruyol.com/?p=111)
> *   [http://qzaidi.github.io/2013/07/20/surprises/](http://qzaidi.github.io/2013/07/20/surprises/)

尽管这不能回答您问题的增量部分，但这里有一些关于 ExpressJS 性能的绝对统计数据：

[更新链接](http://web.archive.org/web/20121027010501/http://blog.perfectapi.com/2012/benchmarking-apis-using-perfectapi-vs-express.js-vs-restify.js/)

[http://blog.perfectapi.com/2012/benchmarking-apis-using-perfectapi-vs-express.js-vs-restify.js/](http://blog.perfectapi.com/2012/benchmarking-apis-using-perfectapi-vs-express.js-vs-restify.js/)

看起来，在一个小型 Amazon 实例上，Express 平均值：

> 非常可观的每秒 1,600-1,700 个请求

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-06-08T18:53:54.987

Express 是 node.js 的便捷包装器，不会给服务器增加太多延迟；无论如何，您的代码可能会经历许多相同的步骤。话虽如此，如果您的负载测试（或倒霉的客户）发现服务器太慢和/或不可扩展，那么您应该在那个时候进行分析，并且瓶颈可能不会是 Express。

顺便说一句，尽管 Express[称自己为“高性能”](http://expressjs.com/)，但他们却因为不发布测量结果而[顽皮](http://xkcd.com/285/)。

# extjs4 - 如何在网格上显示模型的“父数据”？

> ID：10953308
> 
> 赞同：0
> 
> 时间：2012-06-08T17:20:40.067
> 
> 标签：extjs4, extjs, extjs-mvc

所以我有一个问题，因为我想在网格上显示父数据，如下所示：

**父模型**

```
Ext.define('Ab.model.Marca', {
    extend: 'Ext.data.Model',
    fields: ['id','nombre'],
    hasMany: {model: 'Ab.model.Maquina', name: 'maquina'},
    proxy{...}
 }); 
```

**儿童模型**

```
Ext.define('Ab.model.Maquina', {
    extend: 'Ext.data.Model',
    fields: ['id','nombre', 'codigo', 'estado'],
    associations: [
        {type:'belongsTo', model:'Ab.model.Marca', name: 'marca'},
    ]
    proxy:{...}
 }); 
```

**儿童网格**

好的，MaquinaController 从 Store 执行加载，这并不重要，因为加载信息非常好。问题是我无法显示父数据。

```
Ext.define('Ab.view.maquina.MaquinaList', {
    extend: 'Ext.grid.Panel',
    alias: 'widget.maquinalist',
    store: 'Maquinas',
    columns: [
        { text: _('Nombre'), flex: 1, dataIndex: 'nombre' },
        { text: _('Código Externo'), flex: 1, dataIndex: 'codigo' },
        { text: _('Estado'), flex: 1, dataIndex: 'estado' },
        { text: _('Marca'), flex: 1, dataIndex: 'marca' }    <<< HOW CAN I SHOW MARCA?
    ]
}); 
```

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T17:24:41.390

覆盖 column.renderer ，并返回 record.getParent().get('someData');

[http://docs.sencha.com/ext-js/4-1/#!/api/Ext.grid.column.Column-cfg-renderer](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.grid.column.Column-cfg-renderer)

```
renderer: function(value, metadata, record, rowIndex, colIndex, store, view){
  return record.getMarca().get('nombre');
} 
```

另外，请确保您遵守以下规则：

[http://extjs-tutorials.blogspot.ca/2012/05/extjs-belongsto-association-rules.html](http://extjs-tutorials.blogspot.ca/2012/05/extjs-belongsto-association-rules.html)

# asp.net-mvc - Dojo MVC 的布局实现

> ID：10953316
> 
> 赞同：7
> 
> 时间：2012-06-08T17:21:10.780
> 
> 标签：asp.net-mvc, model-view-controller, layout, dojo

我从一开始就尝试使用良好的实践，从头开始了一个 dojo 项目。我对 dojo 工具包真的很陌生，所以我正在浏览大量文档和示例，这些文档和示例给我留下了很多很酷的东西，但没有办法为未来的开发（或附加组件）实现架构。我在网上搜索并发现了这个[dojo 样板项目](https://github.com/csnover/dojo-boilerplate)，这似乎是一个很好的开始，但我想要更多的东西，我想实现 MVC 模式（我在 JAVA 和 Ruby on rails dev 方面有很多经验) 在我的应用程序中遇到了这个[非常酷的示例](https://github.com/rmurphey/dojo-demo)。所以，我创造了这样的东西，这似乎是组织我的项目的一种非常合法的方式。纠正我，如果我错了..或者你有更好的方法。

![我的架构](../Images/041d3e2e949c1b54bfbe5d9ef8119f06.png)

现在，我准备开始了。我在 dojo 工具包网站上尝试了几个教程。当您只有一页时运行得非常好。但是现在，我想知道如何将这个[布局教程](http://dojotoolkit.org/documentation/tutorials/1.7/dijit_layout/)实现到我自己的应用程序中。我希望这种布局成为我的应用程序的主要布局（因此，我尝试将这些代码放入我的 index.html），

```
<div
        id="appLayout" class="demoLayout"
        data-dojo-type="dijit.layout.BorderContainer"
        data-dojo-props="design: 'headline'">
    <div
            class="centerPanel"
            data-dojo-type="dijit.layout.ContentPane"
            data-dojo-props="region: 'center'">
        <div>
            <h4>Group 1 Content</h4>
            <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
        </div>
        <div>
            <h4>Group 2 Content</h4>
        </div>
        <div>
            <h4>Group 3 Content</h4>
        </div>
    </div>
    <div
            class="edgePanel"
            data-dojo-type="dijit.layout.ContentPane"
            data-dojo-props="region: 'top'">Header content (top)</div>
    <div
        id="leftCol" class="edgePanel"
        data-dojo-type="dijit.layout.ContentPane"
        data-dojo-props="region: 'left', splitter: true">Sidebar content (left)</div>
</div> 
```

但它没有得到：

```
require(["dijit/layout/BorderContainer", "dijit/layout/TabContainer",
        "dijit/layout/ContentPane", "dojo/parser"]); 
```

所以结果基本上是 div 和我的文本，但没有任何布局。我错过了什么？

我的解决方案：我将只在我的索引上创建一个 div（例如“容器”）并从加载器（app/run.js）（调用另一个名为 main 的脚本）给他喂食，这个 main.js 文件正在使用这个概念AMD（我开始熟悉），他正在处理我的应用程序的任何实例的创建。因此，例如，我可以为我的布局创建一个特定的视图，并在该文件上实例化它......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-08T20:00:47.823

我还为我的应用程序使用[dojo 样板项目](https://github.com/csnover/dojo-boilerplate)，这是我的`main.js`：

```
define([ 'dojo/has', 'require', 'dojo/_base/sniff' ], function (has, require) {
    var app = {};

    if (has('host-browser') && isCompatible()) {

        require([ './EntryPoint', 'dojo/domReady!' ], function (EntryPoint) {
            app.entryPoint = new EntryPoint().placeAt(document.body);
            app.entryPoint.startup();
    } else {
        window.location = "/admin/browser/";
    }

    function isCompatible() {
        // browser compatibility check here
    }
}); 
```

我的`EntryPoint`模块/类是一个小部件，即`EntryPoint.js`看起来像：

```
define([
    "dojo/_base/declare",
    "dijit/_Widget",
    "dijit/_TemplatedMixin",
    "dijit/_WidgetsInTemplateMixin",

    "dojo/i18n!app/nls/main",
    "dojo/text!./ui/templates/EntryPoint.html",

    "dijit/layout/BorderContainer",
    "dijit/layout/StackContainer",
    "dijit/layout/ContentPane"
], function(
    declare,
    _Widget,
    _TemplatedMixin, 
    _WidgetsInTemplateMixin,

    i18n,
    template
){
    return declare([_Widget, _TemplatedMixin, _WidgetsInTemplateMixin], {

        templateString: template,
        i18n: i18n,

        postCreate: function() {
            //...
        }

    });
}); 
```

最后我的`EntryPoint.html`：

```
<div style="height:100%;">
  <div
      data-dojo-type="dijit.layout.BorderContainer"
      data-dojo-props="design: 'sidebar', gutters: false"
      data-dojo-attach-point="mainContainer"
      style="height:100%;"
    >

    <div
      data-dojo-type="dijit.layout.BorderContainer"
      data-dojo-props="region: 'left', splitter: true, design: 'headline', gutters: false"
      data-dojo-attach-point="sidebarPane"
      class="sidebarPane"
    >

      <div 
          data-dojo-type="dijit.layout.ContentPane"
          data-dojo-props="region: 'center'"
      >

        <div class="sidebarSection">${i18n.title.public_}</div>
        <div
            id="sidebar-posts"
            data-dojo-type="app.widget.SidebarItem"
            data-dojo-props="iconClass: 'sidebarIconPosts', value:'posts', name: 'sidebar'">
          ${i18n.title.posts}
        </div>
        <div
            id="sidebar-pages"
            data-dojo-type="app.widget.SidebarItem"
            data-dojo-props="iconClass: 'sidebarIconPages', value:'pages', name: 'sidebar'">
          ${i18n.title.pages}
        </div> 

[...] 
```

`Widget`用作主要布局的优势：

*   html 模板与 dojo 构建系统开箱即用
*   您可以在布局模板中使用`data-dojo-attach-point`和`data-dojo-attach-event`
*   您可以`${i18n.title.members}`用于 html 中的字符串替换

# asp.net-mvc - 如何确保授权对 webmethods 或 mvc 控制器的 jquery/Ajax 调用？

> ID：10953322
> 
> 赞同：0
> 
> 时间：2012-06-08T17:21:28.727
> 
> 标签：asp.net-mvc, security, webmethod

我如何确保任何人从 Jquery/Ajax 调用/HTTP post get 调用它时不会从 webmethod 或 mvc 操作返回信息（你明白了）。

以前我会在每次调用时使用会话变量或视图状态来执行此操作，这仍然可能吗？任何人都可以向我指出有关使这些调用安全的任何好的演示，我见过一些，但它们很容易被欺骗或解决。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T18:33:16.127

您可以将`AuthorizeAttribute`用作操作过滤器来过滤对控制器的访问。您可以将此属性添加到要限制访问的控制器中。我认为 msdn 有一个很好的例子：http: [//msdn.microsoft.com/en-us/library/dd381413 (v=vs.90).aspx](http://msdn.microsoft.com/en-us/library/dd381413(v=vs.90).aspx)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-06-12T13:03:58.950

在这种情况下，您也可以使用 Session。
1\. 创建一个名为的ActionFilterAttribute 类，例如LoginFilterAttribute。

```
public sealed class LoginFilterAttribute:ActionFilterAttribute
{   
    public override void OnActionExecuting(ActionExecutingContext filterContext)
    {
        //check if the user is logged in
        if (Session["UserSessionKey"]==null)
           //redirect to login page or do nothing
        else
           //return data or do something else

    }
} 
```

2.在你的action中，把这个属性放在action方法之前

```
[LoginFilter]
public ActionResult ActionNeedLogin()
{            
    return View();
} 
```

或者，在 global.asax 中注册属性以防止匿名访问的所有操作。

```
public static void RegisterGlobalFilters(GlobalFilterCollection filters)
{
    filters.Add(new MyHandleErrorAttribute());
    filters.Add(new LoginFilterAttribute());
} 
```

# c++ - 我应该在移动构造函数中 std::move 一个 shared_ptr 吗？

> ID：10953325
> 
> 赞同：16
> 
> 时间：2012-06-08T17:21:41.080
> 
> 标签：c++, c++11, shared-ptr, rvalue-reference

考虑：

```
#include <cstdlib>
#include <memory>
#include <string>
#include <vector>
#include <algorithm>
#include <iterator>
using namespace std;

class Gizmo
{
public:
    Gizmo() : foo_(shared_ptr<string>(new string("bar"))) {};
    Gizmo(Gizmo&& rhs); // Implemented Below

private:
    shared_ptr<string> foo_;
};

/*
// doesn't use std::move
Gizmo::Gizmo(Gizmo&& rhs)
:   foo_(rhs.foo_)
{
}
*/

// Does use std::move
Gizmo::Gizmo(Gizmo&& rhs)
:   foo_(std::move(rhs.foo_))
{
}

int main()
{
    typedef vector<Gizmo> Gizmos;
    Gizmos gizmos;
    generate_n(back_inserter(gizmos), 10000, []() -> Gizmo
    {
        Gizmo ret;
        return ret;
    });

    random_shuffle(gizmos.begin(), gizmos.end());

} 
```

在上面的代码中，有两个版本`Gizmo::Gizmo(Gizmo&&)`——一个用于`std::move`实际*移动*，`shared_ptr`另一个只是复制`shared_ptr`.

这两个版本似乎都在表面上起作用。一个区别（我能看到的唯一区别）是在非`move`版本中，引用计数`shared_ptr`暂时增加，但只是短暂增加。

我通常会继续`move`使用`shared_ptr`，但只是为了在我的代码中保持清晰和一致。我在这里错过了一个考虑吗？出于任何*技术*原因，我应该更喜欢一个版本吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-08T17:47:57.110

这里的主要问题不是由于额外的原子递增和递减导致的性能差异很小，`shared_ptr`而是操作的语义不一致，除非您执行移动。

虽然假设 的引用计数`shared_ptr`只是暂时的，但语言中没有这样的保证。您要从中移动的源对象可以是临时的，但它也可能具有更长的生命周期。它可能是一个已被强制转换为*右值引用*（例如`std::move(var)`）的命名变量，在这种情况下，通过不从*移动*`shared_ptr`源保持*共享*所有权，并且如果目标`shared_ptr`的范围更小，那么指向对象的生命周期将不必要地延长。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-06-08T18:12:43.903

我赞成 James McNellis 的回答。我想对他的回答发表评论，但我的评论不符合评论格式。所以我把它放在这里。

衡量移动`shared_ptr`与复制对性能影响的一种有趣方法是使用诸如`vector<shared_ptr<T>>`移动或复制一大堆它们并计时之类的东西。大多数编译器都可以通过指定语言模式来打开/关闭移动语义（例如 -std=c++03 或 -std=c++11）。

这是我刚刚在 -O3 测试的代码：

```
#include <chrono>
#include <memory>
#include <vector>
#include <iostream>

int main()
{
    std::vector<std::shared_ptr<int> > v(10000, std::shared_ptr<int>(new int(3)));
    typedef std::chrono::high_resolution_clock Clock;
    typedef Clock::time_point time_point;
    typedef std::chrono::duration<double, std::micro> us;
    time_point t0 = Clock::now();
    v.erase(v.begin());
    time_point t1 = Clock::now();
    std::cout << us(t1-t0).count() << "\u00B5s\n";
} 
```

使用 clang/libc++ 并在 -std=c++03 中为我打印出来：

```
195.368µs 
```

切换到 -std=c++11 我得到：

```
16.422µs 
```

你的旅费可能会改变。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-06-08T17:26:34.060

最好使用 of `move`：它应该比副本更有效，因为它不需要引用计数的额外原子递增和递减。

# node.js - 在 Jade 中创建内联元素的简洁方法是什么

> ID：10953326
> 
> 赞同：62
> 
> 时间：2012-06-08T17:21:49.473
> 
> 标签：node.js, pug

我喜欢将我所有的内联元素放在一行中。

```
<ul>
  <li><a>click<span>here</span><strong>!</strong></a></li> 
```

想知道是否有比这更好的方法在 Jade 中创建内联元素：

```
ul
  li 
    a(href="#") click 
      span here
      strong ! 
```

这有点接近，但我不确定如何添加跨度和强标签而不破坏线条。

```
ul
  li: a(href='#') click
    span ... 
```

这显然不是一个超级大问题，但我不能将内联元素内联有点烦人。谢谢您的帮助

* * *

## 回答 #1

> 赞同：128
> 
> 时间：2014-04-15T11:48:54.280

[从 1.0 版本开始](https://github.com/visionmedia/jade/pull/1323)，jade 支持内联标签：

```
#[tag(attribute='value') inner stuff] 
```

在你的情况下，这将是：

```
ul
  li #[a(href="#") click  #[span here #[strong !]]] 
```

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2013-08-14T02:16:05.980

我自己今天遇到了这个。找到了一种使用管道在翡翠中执行此操作的方法。这是我在 ap 元素中包装一个强标签的示例。

```
p.some-class
    strong This Renders Strong                          
    |This renders normal 
```

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2012-06-08T18:36:16.103

前段时间我也为此苦苦挣扎；我找到的唯一答案是只使用 HTML。

```
ul
  li: a(href='#') click<span>here</span><strong>!</strong> 
```

# mongodb - 如何使用我自己的数据作为 Doctrine MongoDB 映射文档的 ID，而不是自动生成的对象 ID？

> ID：10953327
> 
> 赞同：3
> 
> 时间：2012-06-08T17:21:49.910
> 
> 标签：mongodb, symfony, doctrine

对象 ID 上的[MongoDB 文档](http://www.mongodb.org/display/DOCS/Object+IDs)建议在特定情况下使用自定义键：

> 如果您的文档有一个不可变的自然主键，我们建议您在 _id 中使用它而不是自动生成的 id。

如何定义一个完全执行此操作的简单模型对象？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-08T17:21:50.720

```
<?php

namespace Acme\HelloWorld\Model;

use Doctrine\ODM\MongoDB\Mapping\Annotations as MongoDB;

/**
 * @MongoDB\Document
 */
class KindWord {

  /**
   * @MongoDB\Id(strategy="NONE")
   * @var string
   */
  private $word;

  public function getWord() {
    return $this->word;
  }

  public function setWord($word) {
    $this->word = $word;
  }

} 
```

只需确保`$word`在调用之前设置`persist()`。

# php - MySQL 条件用户权限

> ID：10953330
> 
> 赞同：3
> 
> 时间：2012-06-08T17:21:57.823
> 
> 标签：php, mysql, cakephp, permissions

**问题...是否可以添加 MySQL 权限以仅允许基于权限选择字段？**

例子：

1.  用户`user1`只能从`users`列`instance`等于的表中选择/插入/删除`1`（1 通过 PHP 传递）。
2.  用户`user2`只能从`users`列`instance`等于的表中选择/插入/删除`2`（1 通过 PHP 传递）。

**这是背景信息：**

我正在创建一个具有用于多个站点的相同代码库的应用程序。应用内的条件会加载不同的布局。多个站点使用相同的数据库，因为大多数信息可以在站点之间共享。在一个站点上注册的用户还必须在另一个站点上注册（这是我们想要的，因为这些站点是“仅受邀请”的）

我想做的是让用户表：id，电子邮件，密码，实例。实例列将具有站点的 ID。

在应用程序层上，每次我需要从该表中选择/插入/删除时，我都会将 instance = [site_id] 附加到查询中......例如：`SELECT * FROM users WHERE email = '' AND instance = [site_id];`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T17:28:31.240

不，权限是针对每个表、数据库、服务器等，但不是针对行，但是有一个解决方案，您可以使用查看表并为用户设置权限，例如

```
mysql> CREATE VIEW test.v AS SELECT * FROM t where email = '' AND instance = [site_id]; 
```

只需创建 2 个视图表并授予这些用户访问权限

这是[Mysql文档](http://dev.mysql.com/doc/refman/5.0/en/create-view.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T19:20:15.443

MySQL 不便于根据连接到数据库的 MySQL 用户使用权限来锁定某些行。

如果您有想要以这种方式限制的用户，最好不要让他们直接访问数据库，而是让他们通过另一层连接。

使用视图不是一个好主意——每个用户都必须使用不同的查询（引用他们自己的个人视图）来完成相同的事情。如果您只是限制用户可以看到的*列（而不是行），那么视图将是一个很好的解决方案。*

可以使用存储过程来完成您正在寻找的事情：

```
# This table already exists in your schema
CREATE TABLE `user` (
  `id` INT(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  `email` VARCHAR(50) NOT NULL,
  `instance` INT(10) UNSIGNED NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=INNODB;

INSERT INTO `user`(`id`,`email`,`instance`) 
    VALUES ( NULL,'wat@lol.com','1');
INSERT INTO `user`(`id`,`email`,`instance`) 
    VALUES ( NULL,'huh@bwu.com','2');
INSERT INTO `user`(`id`,`email`,`instance`) 
    VALUES ( NULL,'no@yes.lol','1');

# This would be a new table you would have to create
CREATE TABLE `user_instance` (
  `id` INT(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  `user` VARCHAR(20) NOT NULL,
  `instance` INT(10) UNSIGNED NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `user_instance` (`user`,`instance`)
) ENGINE=INNODB;

INSERT INTO `user_instance`(`user`,`instance`) VALUES ('user1','1');
INSERT INTO `user_instance`(`user`,`instance`) VALUES ('user2','2');

# This is a stored procedure that might accomplish what you want
DELIMITER $$

CREATE PROCEDURE `p_get_users`()
BEGIN
    SELECT `user`.`id`, `user`.`email`
    FROM `user`
    WHERE `user`.`instance` IN(
        SELECT `instance` 
        FROM `user_instance` 
        WHERE `user` = USER());
END$$

DELIMITER ; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-08T17:28:50.600

据我所知，这是不可能的，MySQL 不允许有条件的用户。

为两个站点使用一个用户，并根据您的“实例”修改您的所有查询。因此，每次您查询特定于站点的内容时，您都会添加`WHERE instance = $site_id`.

# c# - WPF 资源字典如何工作？（我的无法加载。）

> ID：10953332
> 
> 赞同：2
> 
> 时间：2012-06-08T17:21:58.697
> 
> 标签：c#, .net, wpf, resourcedictionary

我编写了一个自定义程序集，让我可以在设计时查看我的 Prism 区域。

我的程序集所做的一件事是它将从启动项目中加载程序集。（使用 Prism 的模块目录。）

对于一个简单的应用程序来说效果**很好**。

但是当我试图把它放在我的真实应用程序中时，它会破坏设计时视图（运行时工作正常）。

它说它找不到包含我的项目使用的 ResourceDictionary 的文件。
它还说它找不到该 ResourceDictionary 使用的程序集之一。

我的*猜测*是从启动位置拉组件会导致此问题。

但这对我来说没有意义，因为以下原因：

1.  ResourceDictionary 在我的视图中加载如下：

    ```
    <UserControl.Resources>
      <ResourceDictionary>
        <ResourceDictionary.MergedDictionaries>
            <ResourceDictionary Source="/DataProviders.xaml"/>
        </ResourceDictionary.MergedDictionaries>
      ... 
    ```

    但加载它的文件不包含在输出中。所以必须编译成dll。
    这使我认为这应该可行：

    ```
    <ResourceDictionary Source="/MyProj;component/DataProviders.xaml" /> 
    ```

    但这也不起作用。（我在有和没有斜线的情况下都试过了。）

2.  如果是位置问题（因为我是从启动项目而不是输出位置（bin\debug）加载，那么它为什么找不到它认为丢失的其他程序集？
    。
    那个程序集在输出中两个项目（启动和相关项目）的文件夹。

3.  确定它是位置，我尝试了源中的绝对路径。像这样：

    ```
    <ResourceDictionary Source="C:/src/solution/Regns/MyProj/DataProviders.xaml"/> 
    ```

    这也不起作用。（它仍然说它找不到资源文件。）

考虑到这一点，我决定我对 ResourceDictionarys 的工作方式了解不够。

谁能告诉我为什么我的 ResourceDictionary 不会加载。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T17:33:33.940

该应用程序有一个“中央” `ResourceDictionary`，您可以通过[`Application.Current.Resources`](http://msdn.microsoft.com/en-us/library/system.windows.application.resources.aspx). 如果您有其他资源要从其他程序集中加载，那么在应用程序启动时，您需要将外部程序集中的所有字典与应用程序的主资源字典`Application.Current.Resources`合并，并将属性设置为该组合并字典。

我在可能有帮助的代码项目上找到了这个链接：http: [//www.codeproject.com/Articles/35346/Using-a-Resource-Dictionary-in-WPF](http://www.codeproject.com/Articles/35346/Using-a-Resource-Dictionary-in-WPF)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T17:35:25.290

看起来您正试图在运行时加载资源字典。我有一个帖子，我认为可以回答您的问题：

[如何在运行时加载 DictionaryStyle.xaml 文件？](http://www.wpfsharp.com/2012/01/26/how-to-load-a-dictionarystyle-xaml-file-at-run-time/)

# asp.net - 需要学习asp.net web services，从哪里开始？

> ID：10953334
> 
> 赞同：0
> 
> 时间：2012-06-08T17:22:05.543
> 
> 标签：asp.net, web-services

我下个月回到就业市场。我正在寻找一份 asp.net 开发人员的工作。我目前的工作根本不使用网络服务。上次，我使用它是 6,7 年前。

如果我需要拿起它，从哪里开始。我在amazon.com上搜索，那些.net web service的书真的很老了，都是2002年写的。是不是说web service已经过时了，没人用了？是否有更新的技术来取代它？

我确实看到了一些较新的书籍，但它们是 RESTful Web 服务，Web Servie 和 RESTful Web 服务有什么区别。

请让我知道您目前正在使用什么以及我应该从哪里开始学习。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T17:31:21.147

我只是通过修补和查看代码示例来学习 Web 服务。

这里有一些资源可以帮助您入门。如果您有更多问题，请随时提出。:)

[http://msdn.microsoft.com/en-us/library/ms972326.aspx](http://msdn.microsoft.com/en-us/library/ms972326.aspx)

[http://www.asp.net/web-forms/tutorials/aspnet-ajax/understanding-asp-net-ajax-web-services](http://www.asp.net/web-forms/tutorials/aspnet-ajax/understanding-asp-net-ajax-web-services)

[http://www.codeproject.com/Articles/1231/ASP-NET-Web-Service](http://www.codeproject.com/Articles/1231/ASP-NET-Web-Service)

[http://www.asp.net/web-forms/videos/how-do-i/how-do-i-create-and-call-a-simple-web-service-in-aspnet](http://www.asp.net/web-forms/videos/how-do-i/how-do-i-create-and-call-a-simple-web-service-in-aspnet)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T17:43:48.207

[WCF](http://msdn.microsoft.com/en-us/netframework/aa663324.aspx)是 Web 服务的继承者。WCF 包含很多[绑定](http://msdn.microsoft.com/en-us/library/ms734662)，它们是绑定客户端和服务器的方式。如果您需要与使用 ASP.NET Web 服务（基于 ASMX 的服务）的客户端兼容，则可以使用[BasicHttpBinding 。](http://msdn.microsoft.com/en-us/library/system.servicemodel.basichttpbinding.aspx)

现在关于书籍。我发现[Programming WCF Services](https://rads.stackoverflow.com/amzn/click/com/0596526997)非常有用。但它不包含有关安全性的完整信息。

![在此处输入图像描述](../Images/50810308fa6f9b213b344a5adffe4634.png)

# javascript - Backbone.js 中的 window.ViewName 和 ViewName 有什么区别？

> ID：10953335
> 
> 赞同：0
> 
> 时间：2012-06-08T17:22:12.873
> 
> 标签：javascript, backbone.js

首先，我是一个 JavaScript 菜鸟，甚至是*Backbone.js*的菜鸟。

我正在关注一些在线教程来熟悉这项技术；在[一些教程](http://backbonetutorials.com/)中我看到了这个：

```
Person = Backbone.Model.extend({
    initialize: function(){
        alert("Welcome to this world");
    }
});

var person = new Person; 
```

在[其他人中，](http://coenraets.org/blog/2011/12/backbone-js-wine-cellar-tutorial-part-2-crud/)我发现了这个符号：

```
window.WineView = Backbone.View.extend({
    initialize:function () {
        this.model.bind("change", this.render, this);
    }
}); 
```

在视图名称中添加“窗口”有什么必要？我阅读了一些[JavaScript 文档](http://www.w3schools.com/jsref/obj_window.asp)，其中指出该`window`对象代表当前浏览器窗口，那么我们是否将创建的视图添加为该对象的属性？作者为什么要这么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T17:35:37.010

在浏览器 JavaScript 中，`window`是全局对象，因此`window.Person === Person`除非在作用域链 ( )`Person`中的某处定义。`function() { var Person; ... }`

换句话说，没有区别。（除了使用 7 个额外的字符。）

您可能想阅读[JS scope](http://robertnyman.com/2008/10/09/explaining-javascript-scope-and-closures/)。具体来说，如果您分配给其他未定义的变量 ( `Person = { ... };`)，则该变量将分配给全局对象 ( `window`)。但是，如果您首先*声明*一个变量 ( `var Person = { ... };`)，则该变量将分配给本地范围。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T17:38:06.577

撇开架构问题（将关联的对象和属性放在一起），全局变量的处理方式与对象属性的处理方式不同（如果它们尚未定义）。例如，假设上面的代码还没有运行和定义这些对象，评估

```
Person 
```

将导致 JavaScript 错误，因为它是未定义的全局变量；`Person`检查是否已设置的正确方法是更详细

```
typeof Person !== 'undefined'
```

另一方面，

```
window.WineView
```

不会导致错误，而是会返回`undefined`。

# asp.net-mvc - 项目间 MVC ListBoxFor 行为的变化

> ID：10953337
> 
> 赞同：1
> 
> 时间：2012-06-08T17:22:44.860
> 
> 标签：asp.net-mvc, binding

我想知道是否有人可以解释两个 ASP.Net MVC 3 项目之间的以下功能差异。

在这两个项目中，我都有一个包含以下内容的视图模型：

```
public List<int> Questions; 
```

在这两个项目中，我都有以下 ListBoxFor 代码：

```
@Html.ListBoxFor(x => x.Questions, new MultiSelectList(ViewBag.Questions as List<MyStandardLib.Mvc.Attribute>, "Id", "Name", @Model.Questions), new { @class = "ui-field-multiselect", style = "width: 250px;" }) 
```

功能上的区别在于，在运行时，一个项目正确绑定了现有的选定问题，而另一个项目则没有，并且将所有问题显示为未选择。单步执行代码，List 被填充到视图中并正确传递给 MultiSelectList 构造函数，但它没有将值设置为选中状态。

这真是令人沮丧。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T17:47:02.610

`ViewBag.Questions`将您的变量名称更改为`ViewBag.AvailableQuestions`. 有时渲染器会对您所指的内容感到困惑。

# android - 如何在android中使用TableLayout以编程方式显示条目列表

> ID：10953341
> 
> 赞同：0
> 
> 时间：2012-06-08T17:22:49.290
> 
> 标签：android, android-layout

我正在使用 Web 服务来获取要在条目中显示为列表的数据。我的 xml 文件中有四个属性为 2X2 表格布局格式。然后我在我的 java 代码中使用 TableLayout 类将结果存储在每个 TableRow 中。

这是我的 xml 代码：tabrow.xml

```
<?xml version="1.0" encoding="utf-8"?>
<TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/tableRow2"
        style="@style/BodyRow"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" >

<TableRow android:id="@+id/tableRow2"
        style="@style/BodyRow"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content">

<TextView
    android:id="@+id/attrib_value2"
    style="@style/LeftHeaderText"
    android:layout_width="wrap_content"
    android:layout_height="fill_parent"
    android:text="TextView"
    android:textColor="@color/textColor" />

        <TextView
            android:id="@+id/attrib_value5"
            style="@style/HourText"
            android:layout_width="wrap_content"
            android:layout_height="fill_parent"
            android:text="TextView"
            android:textColor="@color/textColor" android:gravity="right">
        </TextView>
    </TableRow>

<TableRow android:id="@+id/tableRow3"
        style="@style/BodyRow"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content">

    <TextView
            android:id="@+id/attrib_value3"
            style="@style/BodyText"
            android:layout_width="wrap_content"
            android:layout_height="fill_parent"
            android:text="TextView"
            android:textColor="@color/textColor" >
        </TextView>

        <TextView
            android:id="@+id/attrib_value4"
            style="@style/BodyText"
            android:layout_width="wrap_content"
            android:layout_height="fill_parent"
            android:text="TextView"
            android:textColor="@color/textColor" >
        </TextView>

</TableRow>

</TableLayout> 
```

这是另一个 xml 代码，其中将调用 tabrow.xml 以添加每个条目。

```
<TableLayout
            android:id="@+id/resultDetail"
            android:layout_width="fill_parent"
            style="@style/BodyRow"
            android:layout_height="wrap_content" >
         </TableLayout> 
```

以下是java代码。

```
public void fillWorkEntries(ArrayList<WorkEntry> workEntries) {
    try {
        TableLayout table = (TableLayout) WorkEntryScreenActivity.this
                .findViewById(R.id.resultDetail);

        table.removeAllViews();
        for (WorkEntry workEntry : workEntries) {

            TableLayout nestedtable = (TableLayout) LayoutInflater.from(this).inflate(
                    R.layout.tabrow, null);

            TableRow bodyRow = (TableRow) LayoutInflater.from(this).inflate(
                    R.id.tableRow2, null);

            ((TextView) bodyRow.findViewById(R.id.attrib_value2))
                    .setText(workEntry.getWorkRequestName());

            ((TextView) bodyRow.findViewById(R.id.attrib_value5))
                    .setText(workEntry.getActHrs());

            TableRow bodyRownext = (TableRow) LayoutInflater.from(this).inflate(
                    R.id.tableRow3, null);

            ((TextView) bodyRownext.findViewById(R.id.attrib_value3))
                    .setText(workEntry.getActivity());

            ((TextView) bodyRownext.findViewById(R.id.attrib_value4))
                    .setText(workEntry.getWorkEntryDesc());

            table.addView(nestedtable);

        }
        Log.d(TAG, "Load Entries");
    } catch (Exception e) {
        e.printStackTrace();
        Log.e(TAG, e.toString());
    }
} 
```

当我的 xml 文件中只有一个“tablerow”时，它曾经工作过，我反复调用它来一一获取所有四个条目。但是为了节省一些屏幕空间，我尝试插入一个两行的“tableyalout”，但它停止了工作。我在这里做错了什么？任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T21:02:07.997

出于好奇尝试此代码。

```
public void fillWorkEntries(ArrayList<WorkEntry> workEntries) {     
    try {         
        TableLayout table = (TableLayout)WorkEntryScreenActivity.this.findViewById(R.id.resultDetail);          

        //table.removeAllViews();
        for (WorkEntry workEntry : workEntries) {
            TableLayout nestedtable = (TableLayout) LayoutInflater.from(this).inflate(R.layout.tabrow, null);
            TableRow bodyRow = (TableRow)nestedtablefindViewById(R.id.tableRow2, null);
            ((TextView) nestedtable.findViewById(R.id.attrib_value2)).setText(workEntry.getWorkRequestName());            
            ((TextView) bodyRow.findViewById(R.id.attrib_value5)).setText(workEntry.getActHrs());
            //TableRow bodyRownext = (TableRow) LayoutInflater.from(this).inflate(R.id.tableRow3, null);
            ((TextView) nestedtable.findViewById(R.id.attrib_value3)).setText(workEntry.getActivity());
            ((TextView) nestedtable.findViewById(R.id.attrib_value4)).setText(workEntry.getWorkEntryDesc());

            table.addView(nestedtable);
        }

        Log.d(TAG, "Load Entries");
    } catch (Exception e) {
        e.printStackTrace();
        Log.e(TAG, e.toString());
    } 
} 
```

您不需要膨胀您的行，因为它们已经是您膨胀的嵌套表对象的一部分

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T19:26:58.563

`View`布局的父级`R.layout.tabrow`是 a`TableLayout`而不是 a`TableRow`你投射它所以这一行：

```
TableRow bodyRow = (TableRow) LayoutInflater.from(this).inflate(
                    R.layout.tabrow, null); 
```

将抛出一个强制转换异常。相反，它应该是这样的：

```
TableLayout bodyRow = (TableLayout) LayoutInflater.from(this).inflate(
                    R.layout.tabrow, null);
((TextView) bodyRow.findViewById(R.id.attrib_value2))
                .setText(workEntry.getWorkRequestName());
((TextView) bodyRow.findViewById(R.id.attrib_value5))
                .setText(workEntry.getActHrs());
((TextView) bodyRownext.findViewById(R.id.attrib_value3))
                .setText(workEntry.getActivity());
((TextView) bodyRownext.findViewById(R.id.attrib_value4))
                .setText(workEntry.getWorkEntryDesc());
TableRow tr = new TableRow(this);
TableRow.LayoutParams p = new TableRow.LayoutParams(TableRow.LayoutParams.FILL_PARENT, TableRow.LayoutParams.WRAP_CONTENT);
bodyRow.setlayoutParams(p);
tr.addView(bodyRow);
TableLayout.LayoutParams p1 = new TableTableLayout.LayoutParams(TableLayout.LayoutParams.FILL_PARENT, TableLayout.LayoutParams.WRAP_CONTENT);
tr.setLayoutParams(p1);
table.addView(tr); 
```

# php - CMS 配置 - MySQL 还是 XML？

> ID：10953343
> 
> 赞同：1
> 
> 时间：2012-06-08T17:22:55.620
> 
> 标签：php, mysql, xml, content-management-system, config

我的 CMS 将有许多配置值，例如站点名称、标语等 - 每次生成页面时都会读取这些值。这些值当然会被缓存，持续时间设置为 1-2 小时或类似（将在设置更改时重置）。

我应该使用 XML 还是 MySQL 保存这些值？最好的方法是什么，性能虎钳？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T17:24:43.697

称其为传统的，但我发现`.INI`文件对 PHP 应用程序特别有用。

PHP 有一个内置的[parse_ini_file()](http://php.net/manual/en/function.parse-ini-file.php)函数，让这变得轻而易举

方便的是，它返回一个数组，您可以使用该数组将多个文件合并到一个`$config`数组或`AppConfig`单例类中

事实上，PHP 使用 .INI 文件来配置自己！见`/etc/php.ini`:)

* * *

你可以做一些有用的事情，比如

### 配置/db.ini

```
[development]
host = localhost
user = foo
pass = password123
name = dev_db

[production]
host = localhost
user = sqluser
pass = AJ539jf
name = live_db 
```

当传递`true`给 中的第二个参数时`parse_ini_file()`，PHP 将使用节标题作为数组键。输出看起来像这样

```
Array
(
    [db] => Array
        (
            [development] => Array
                (
                    [host] => localhost
                    [user] => foo
                    [pass] => password123
                    [name] => dev_db
                )

            [production] => Array
                (
                    [host] => localhost
                    [user] => sqluser
                    [pass] => AJ539jf
                    [name] => live_db
                )

        )

) 
```

这很棒，因为您可以将所有配置文件检查到版本控制中，并且只需使用一行应用程序配置文件或环境变量来确定您的应用程序在哪个环境中运行

* * *

另一个答案建议遵守您选择的 CMS 的配置指南，但是，我发现大多数 PHP 框架在这方面都没有做到；尤其是在支持不同环境的多种配置时。编写您自己的“扩展”以正确处理应用程序配置通常是我们为规避特定 CMS 的刚性解决方案而要做的第一件事。

使用大型配置数组的另一个好处是，如果您想让其他应用程序或服务与您的应用程序交互，它可以轻松编码为 JSON。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T17:30:20.293

我一般会看一下 CMS，并坚持那里使用的任何约定。没有什么比寻找所有出现在某处的配置/设置更糟糕的了，只是发现您正在寻找的是隐藏在其他地方的异常。在这种情况下，任何选择的性能都是最小的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T17:40:20.157

对我来说，XML 是存储配置的更好方式。它易于阅读和编写（通过所有语言），易于由极客以外的人控制，并且易于通过版本控制（SVN、Git）控制。

# layout - 在 Eclipse RCP 中更改应用程序菜单栏

> ID：10953344
> 
> 赞同：2
> 
> 时间：2012-06-08T17:22:56.103
> 
> 标签：layout, swt, eclipse-rcp, menubar

我想更改 Eclipse RCP 应用程序中应用程序菜单的位置。这是我的 UI 设计师希望它看起来的样子： ![在此处输入图像描述](../Images/f7f89eb2e3584770a5b4ccb68f66a506.png) 请注意，菜单栏在左侧，标签栏在右侧，因此节省了一行垂直空间。我希望菜单仍然是应用程序菜单，并使用所有其他 Eclipse 扩展来控制它。我只是想在不同的地方。这可以在 Eclipse/SWT 中完成吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T14:24:02.790

默认情况下不会，当然不会在 Eclipse 3.x 甚至 Eclipse 4.2 中使用 Workbench。RCP 应用程序使用它们的子类填充主菜单栏`org.eclipse.ui.application.ActionBarAdvisor`，填充`org.eclipse.jface.action.MenuManager`s。3.x 中的所有默认扩展也是基于与`MenuManager`s 交互的。菜单栏中使用的 SWT`Menu`不允许这种覆盖，AFAIK。

在 Eclipse 4 中，菜单在模型中描述，然后各种渲染器（由 提供的默认值`org.eclipse.e4.ui.workbench.renderers.swt.WorkbenchRendererFactory`）负责创建 SWT 小部件。理论上，可以替换部分或大部分渲染器（实际上是使用 SWT 组合或按钮或画布实现您自己的菜单系统），但这听起来需要做很多工作。

# java - java.lang.NoClassDefFoundError: loginpackage/LoginServlet（错误名称：WEB-INF/classes/loginpackage/LoginServlet）

> ID：10953350
> 
> 赞同：0
> 
> 时间：2012-06-08T17:23:19.700
> 
> 标签：java, noclassdeffounderror

我会尽量做到具体并提供尽可能多的信息。

我在 C:\myproject\tomcat 的计算机上安装了 tomcat 7

我在 C:\Program Files\java\jdk1.7.0_04 安装了 JDK 1.7.0_04

JRE_HOME = C:\Program Files\Java\jdk1.7.0_04

类路径 = C:\myproject\tomcat\bin\bootstrap.jar;C:\myproject\tomcat\bin\tomcat-juli.jar

在 jdk1.7.0_04\jre\lib\ext 文件夹中，我有文件 servlet-api.jar，我认为运行任何 servlet 都需要该文件。

在我的 C:\myproject\tomcat\conf\web.xml 文件中，我有标签

小服务程序标签

```
<servlet>
    <servlet-name>LoginServlet</servlet-name>
    <servlet-class>loginpackage.LoginServlet</servlet-class>
</servlet> 
```

servlet 映射标记

```
<servlet-mapping>
    <servlet-name>LoginServlet</servlet-name>
    <url-pattern>/LoginServlet</url-pattern>
</servlet-mapping> 
```

我相信这是需要的，因此可以找到 localhost:9999/javawork/LoginServlet。

我有一个名为 javawork 的网络应用程序，位于 C:\myproject\tomcat\webapps\javawork

在那里我有一个文件夹 test_login，其中包含我的 JSP 文件，包括 LoginPage.jsp：

```
<%@ page language="java" contentType="text/html; charset=windows-1256" pageEncoding="windows-1256"%>

<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">

<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=windows-1256">
        <title>Login Page</title>
    </head>
    <body>
        <form action="../LoginServlet">
            Please enter your username      
            <input type="text" name="un"/><br>      
            Please enter your password
            <input type="password" name="pw"/>
            <input type="submit" value="submit">            
        </form>
    </body>
</html> 
```

在 javawork 中，我有一个带有 lib 和 classes 文件夹的 WEB-INF 文件夹，我的 oracle 驱动程序在 lib 文件夹中有几个 jar 文件。在类文件夹中，我有一个 loginpackage 文件夹，其中有我的 LoginServlet.java 文件和 LoginServlet.class 文件。我使用 Eclipse IDE 编译它，它将 .class 文件放入文件夹 javawork/bin/WEB-INF/classes/loginpackage 文件夹中，并将 .class 文件移动到主 WEB-INF 文件夹结构中以位于同一目录中作为 .java 文件。

登录Servlet.java：

```
package loginpackage;

import java.io.IOException;
import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import javax.servlet.http.HttpSession;

/**
 * Servlet implementation class LoginServlet
 */

public class LoginServlet extends HttpServlet 
{
    private static final long serialVersionUID = 1L; 

    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException 
    {
        try
        {       

             UserBean user = new UserBean();
             user.setUserName(request.getParameter("un"));
             user.setPassword(request.getParameter("pw"));

             user = UserDAO.login(user);

             if (user.isValid())
             {

                  HttpSession session = request.getSession(true);   
                  session.setMaxInactiveInterval(60);
                  session.setAttribute("currentSessionUser",user); 
                  session.setAttribute("sessUserName", user.getUsername());
                  session.setAttribute("userID",user.getUserID());
                  response.sendRedirect("userlogged.jsp"); //logged-in page             
             }

             else 
                  response.sendRedirect("invalidlogin.jsp"); //error page 
        } 

        catch (Throwable theException)      
        {
             System.out.println(theException); 
        }
    }//end doGet
}//End LoginServlet Class 
```

我打开命令提示符并转到 C:\myproject\tomcat\bin 并运行启动文件，以便 tomcat 服务器正在运行。

我去`http://localhost:9999/javawork/test_login/LoginPage.jsp`，加载很好。我在框中输入用户名和密码，然后单击提交按钮。它尝试转到`http://localhost:9999/javawork/LoginServlet?un=u&pw=p`（u 和 p 是我输入的内容），我收到以下错误：异常

```
java.lang.NoClassDefFoundError: loginpackage/LoginServlet (wrong name: WEB-INF/classes/loginpackage/LoginServlet)
    java.lang.ClassLoader.defineClass1(Native Method)
    java.lang.ClassLoader.defineClass(ClassLoader.java:791)
    java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142)
    org.apache.catalina.loader.WebappClassLoader.findClassInternal(WebappClassLoader.java:2889)
    org.apache.catalina.loader.WebappClassLoader.findClass(WebappClassLoader.java:1170)
    org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1678)
    org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1556)
    org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:461)
    org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
    org.apache.catalina.authenticator.SingleSignOn.invoke(SingleSignOn.java:309)
    org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:999)
    org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:565)
    org.apache.tomcat.util.net.AprEndpoint$SocketProcessor.run(AprEndpoint.java:1812)
    java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    java.lang.Thread.run(Thread.java:722) 
```

我认为一切都正确排列，所以我不确定为什么会出现此错误。拜托，任何帮助将不胜感激，因为我已经坚持了一天多，并且需要让它继续工作以继续我工作的下一部分。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T17:30:20.290

你说：

> 在我的 C:\myproject\tomcat\conf\web.xml 文件中，我有标签...

好吧，据我所知，您必须`mapping`在项目中输入 servlet 的值，而`web.xml`不是位于您给出的路径中的值。

如果您还没有创建`web.xml`in`YourProject/WEB-INF/web.xml`然后先创建它并输入值：

```
<servlet>
  <servlet-name>LoginServlet</servlet-name>
  <servlet-class>loginpackage.LoginServlet</servlet-class>
</servlet> 
```

servlet 映射标记

```
<servlet-mapping>
  <servlet-name>LoginServlet</servlet-name>
  <url-pattern>/LoginServlet</url-pattern>
</servlet-mapping> 
```

在里面。（[这是一个简单的`web.xml`文件](http://www.adp-gmbh.ch/java/web_application/web_xml.html)）祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T17:30:33.023

您应该在项目的 C:\myproject\tomcat\webapps\javawo\WEB-INF\web.xml 文件中有 servlet 条目，而不是在 C:\myproject\tomcat\conf\web.xml 文件中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T17:36:19.737

我弄清楚了问题所在。

“我使用 Eclipse IDE 编译它，它将 .class 文件放入文件夹 javawork/bin/WEB-INF/classes/loginpackage 文件夹中，我将 .class 文件移动到主 WEB-INF 文件夹结构中以保持相同目录作为 .java 文件。”

当我在 Eclipse 中编译类并将 .class 文件放入指定的文件夹时，它会在类中的某处设置路径。因此，当我将文件移动到我需要它们所在的文件夹时，它不会找到它们，因为它正在它们编译到的文件夹中寻找它们。我必须在命令提示符下使用 javac 编译器将我的 .class 文件编译到与 .java 源文件相同的文件夹中。一旦我这样做了，我就可以运行我的代码了。

现在我只需要使用 Eclipse 来让它将我的文件编译到正确的文件夹中，因此我不必使用 javac 手动编译它们。

# php - 当我通过 facebook api 获取朋友列表时出现错误/奇怪的字符

> ID：10953355
> 
> 赞同：0
> 
> 时间：2012-06-08T17:23:43.800
> 
> 标签：php, facebook, facebook-graph-api

```
$friends = $friends_list['data'];
$fco = count($friends_list['data']);
$output = "";
for ($i = 0; $i < $fco; $i++)
{
 $output .= $friends[$i]['name'] . " - " . $friends[$i]['id'];
} 
```

当我使用这段代码时，我得到了奇怪的字符。比如`Ã¼`这个对于`ü`

如果我使用`utf8_decode($output)`，那么一切看起来都很好，除了 I/ı 和 Ğ/ğ 变成“？” （是的问号）

我如何解决它 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T17:32:42.640

告诉浏览器你发送什么编码

```
header('content-type: text/html; charset=utf-8'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T17:36:21.053

> 由于opera和stackoverflow由于某种原因无法正常工作，因此无法在此处发布。

什么？对我来说效果很好……</p>

> 我如何解决它 ？

修复您的应用程序/站点，将其转换为使用 UTF-8（或一般的 Unicode）来存储和显示数据 -</p>

> 如果我使用 utf8_decode($output)，那么一切似乎都很好，除了 I/ı 和 Ğ/ğ 变成“？”（是的问号）

– 而不是通过将数据转换为 ISO-8859-1 来部分*破坏数据。*

ISO-8859-1 不*包含*像 I/ı 和 Ğ/ğ 这样的字符——这就是为什么你只是在它们的位置上加上问号。

# java - 如何避免重复的随机数并在android中选择另一个？

> ID：10953356
> 
> 赞同：0
> 
> 时间：2012-06-08T17:23:45.423
> 
> 标签：java, android

我有一个 Arraylist 和一个像这样的整数数组，

```
ArrayList<Integer> ar= new ArrayList<Integer>();
    int[] number= {0,1,2,3,4,5}; 
```

现在，我想每次单击按钮时都从该数组中取出整数，而无需任何重复。在烤完这个数组中的每个数字后，我想烤“完成”，我在 onclick 监听器中的逻辑在这里：

```
Random r = new Random();

            int i1=r.nextInt(number.length-0) + 0;
            if(!ar.contains(i1)){
            Toast.makeText(getApplicationContext(), ""+i1, Toast.LENGTH_LONG).show();
            ar.add(i1);
            }else{

                Toast.makeText(getApplicationContext(), "Finished", Toast.LENGTH_LONG).show();
            } 
```

但这不是我的方式，它不会重复任何数字，但如果它在第二次点击中得到重复的数字，那么它正在烘烤完成，但我想在整数数组中的每个数字都被烘烤后烘烤它，应该是我的修改逻辑？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T17:29:58.810

```
ArrayList<Integer> ar= new ArrayList<Integer>();
int[] number= {0,1,2,3,4,5};
for (int i : number) {
    ar.add(i);
}

Random r = new Random();

// repeat this part and you will never have duplicate numbers
int select = r.nextInt(ar.size());
int random = ar.get(select);
ar.remove(select); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T17:35:54.640

```
LinkedList<Integer> ar = new LinkedList<Integer>();
    int[] number = { 0, 1, 2, 3, 4, 5 };
    for (int i : number) 
        ar.add(i);
    Collections.shuffle(ar);

    //every time you click:
    if (ar.isEmpty()) { 
        //toast finished
    } else {
        Integer pop = ar.pop();
        //toast pop
    } 
```

# jquery - 使用 JQuery 模板解析嵌套的 JSON 对象

> ID：10953365
> 
> 赞同：1
> 
> 时间：2012-06-08T17:24:23.330
> 
> 标签：jquery, json, jsonpath

我正在尝试将此 JSON 对象（来自 Google Books API）中的数据放入 HTML 模板中。JSON 看起来像这样：

```
{
 "kind": "books#volumes",
 "totalItems": 4,
 "items": [
  {
   "kind": "books#volume",
   "id": "LcQXAAAAYAAJ",
   "selfLink": "https://www.googleapis.com/books/v1/volumes/LcQXAAAAYAAJ",
   "volumeInfo": {
    "title": "The Arabian Nights",
    "authors": [
     "George Fyler Townesend"
    ]
   }
  },
  {
   "kind": "books#volume", 
```

... 完整的 JSON：http: [//goo.gl/993CL](http://goo.gl/993CL)

我的模板（通过[jquery.tmpl](http://api.jquery.com/jquery.tmpl)）如下所示：

```
var markup = "<tr><td>${kind}</td><td>${totalItems}</td><td>${items.volumeInfo.title}</td></tr>"; 
```

但是，当我运行它时，它只显示这三列中的第一列：

```
 <tr><td>result 1</td></tr>
   <tr><td>result 2</td></tr>
   <tr><td>result 3</td></tr> 
```

为什么不`$totalItems`显示？获得头衔的正确途径是什么？

```
${items.volumeInfo[*].title}   ? 
```

这是小提琴：http: [//jsfiddle.net/khcsq](http://jsfiddle.net/khcsq)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T17:34:13.957

你不能只是这样做`items.volumeInfo`。您必须在以下位置运行一个[`each`循环](http://api.jquery.com/template-tag-each/)`items`：

```
var markup = "{{each items}}<tr><td>${volumeInfo.title}</td></tr>{{/each}}"; 
```

* * *

见这里：http: [//jsfiddle.net/khcsq/3/](http://jsfiddle.net/khcsq/3/)

# android - Android：在 ImageView 中的图像上显示图像

> ID：10953368
> 
> 赞同：1
> 
> 时间：2012-06-08T17:24:38.950
> 
> 标签：android, imageview

我`LinearLayout`用来水平放置两个`ImageView`。我已将图像放在`ImageView`. 现在我需要在`ImageView`. 我看过很多帖子，但所有帖子都处理`Relativelayout`or `Framelayout`。这是我使用的 XML 代码段。

```
<LinearLayout
    android:id="@+id/relativeLayout2"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_marginTop="10dip"
    android:orientation="horizontal" >

    <ImageView
        android:id="@+id/imgmode31"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginRight="10dp"
        android:adjustViewBounds="true"
        android:maxHeight="180dp"
        android:maxWidth="140dp"
        android:scaleType="fitXY"
        android:src="@drawable/i5" >
    </ImageView>

    <ImageView
        android:id="@+id/imgmode32"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:adjustViewBounds="true"
        android:longClickable="false"
        android:maxHeight="180dp"
        android:maxWidth="280dp"
        android:scaleType="fitXY"
        android:src="@drawable/i1" >
    </ImageView>

</LinearLayout> 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T17:33:14.737

这正是线性布局应该防止的。但是，您可以使用负填充覆盖下一个元素的定位。问题在于不同的屏幕密度会发生什么。

我认为这就是表面视图的意义所在。它在整个屏幕上提供了一个透明的绘图表面，允许您在其他视图的顶部进行绘图。

最后一个想法是将您的第一个图像放置在线性布局内的框架布局中。然后，您可以使用填充将叠加图像添加到框架布局中以定位它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T17:35:40.213

您可以使用相对布局轻松完成

```
<RelativeLayout 
android:id="@+id/relativeLayout2" 
android:layout_width="wrap_content"
android:layout_height="wrap_content" >
    <ImageView     
     android:layout_height="wrap_content"     
     android:layout_width="wrap_content"   
     android:adjustViewBounds="true" 
     android:scaleType="fitXY"
     android:src="@drawable/i5"
     android:id="@+id/imgmode31" 
     android:maxHeight="180dp" 
     android:maxWidth="140dp">
   </ImageView>
   <ImageView     
     android:layout_height="wrap_content"     
     android:layout_width="wrap_content"  
     android:scaleType="fitXY" 
     android:longClickable="false"  
     android:adjustViewBounds="true" 
     android:src="@drawable/i1" 
     android:id="@+id/imgmode32" 
     android:maxHeight="180dp" 
     android:maxWidth="280dp">
   </ImageView>
</RelativeLayout> 
```

如果你想`ImagView`相互重叠，那么让它们`Height`和`Width`相同，你也可以`ImageView`在运行时将任何一个放在前面

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T17:29:05.893

A`LinearLayout`线性放置元素，一个相邻。如果你想将一个元素放在另一个元素之上，那么你需要使用 a`FrameLayout`或`RelativeLayout`。

如果您将您的更改`LinearLayout`为 a `FrameLayout`，您应该会看到两个`ImageView`s 重叠。

# django - 在 Django 中使用 ContentType 过滤 2 个模型

> ID：10953369
> 
> 赞同：5
> 
> 时间：2012-06-08T17:24:39.593
> 
> 标签：django, django-models, django-admin

我有 2 个配置文件模型。我正在创建一个“参加者”对象。如何仅在 2 个配置文件之间进行过滤？

```
class Profile1(models.Model):
    user = models.ForeignKey(User, null=True, unique=True)

class Profile2(models.Model):
    user = models.ForeignKey(User, null=True, unique=True)

class Attendee(models.Model):
    event = models.ForeignKey(Event)
    # This filters through everything... How do I filter down just to the 2 profile objects?
    content_type = models.ForeignKey(ContentType)
    object_id = models.PositiveIntegerField()
    profile = generic.GenericForeignKey('content_type', 'object_id') 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-08T20:40:53.527

由于[ContentType 模型](https://docs.djangoproject.com/en/dev/ref/contrib/contenttypes/#the-contenttype-model)具有三个字段`app_label`，`model`和`name`。因此，您可以轻松地过滤这些字段。

```
attendees = Attendee.objects.filter(content_type__model = 'Profile1') 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2020-02-23T14:19:56.173

我会去

```
from django.contrib.contenttypes.models import ContentType
...

Attendee.objects.filter(
   content_type=ContentType.objects.get_for_model(Profile1)) 
```

以避免在重构类名后比较字符串和错误。

# java - 使用 javassist 加载另一个类

> ID：10953373
> 
> 赞同：1
> 
> 时间：2012-06-08T17:25:01.070
> 
> 标签：java, classloader, emma, javassist

我有两个项目：一个分析器和一个基本应用程序（使用 JUnit 测试）

分析器使用 Javassist 来检测基本应用程序。

当分析器位于基本应用程序中时，它可以正常工作。当分析器在基本应用程序之外时，我必须将基本应用程序 jar 文件导入 Eclipse 上的构建路径，以便能够检测我的应用程序。

我想像 EMMA 一样在命令行中的基本应用程序上运行我的分析器：

> > java -jar profiler.jar 运行 application.jar

但我不知道如何告诉我的分析器，好吧，仪器这个罐子。

这是我的探查器主要代码：

```
 public static void main(String[] args) throws Exception {   
    Loader loader = new Loader();
    loader.addTranslator(ClassPool.getDefault(), new Profiler());
    try {
        loader.run("com.application.bookstore.test.Test", null);
    } catch (Throwable e) {
        e.printStackTrace();
    }
} 
```

我试图这样做：

```
final String arg = args[0];
final String[] commandArgs = new String[args.length - 1];
System.arraycopy(args, 1, commandArgs, 0, commandArgs.length-1);

loader.run(arg, commandArgs); 
```

但是当我运行它时，我得到：

```
[kdelemme@pdkdelemme build]$ java -jar profiler.jar bookstore.jar
java.lang.ClassNotFoundException: bookstore.jar
    at java.net.URLClassLoader$1.run(URLClassLoader.java:217)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:205)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:321)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:294)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:266)
    at javassist.Loader.delegateToParent(Loader.java:429)
    at javassist.Loader.loadClass(Loader.java:315)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:266)
    at javassist.Loader.run(Loader.java:289)
    at com.modeln.Profiler.main(Profiler.java:93) 
```

所以我尝试直接运行到我的主类目录：

```
[kdelemme@pdkdelemme test]$ ls
profiler.jar  Test.class
[kdelemme@pdkdelemme test]$ java -jar profiler.jar Test 
java.lang.NoClassDefFoundError: Test (wrong name: com/application/bookstore/test/Test)
    at java.lang.ClassLoader.defineClass1(Native Method)
    at java.lang.ClassLoader.defineClass(ClassLoader.java:634)
    at java.lang.ClassLoader.defineClass(ClassLoader.java:480)
    at javassist.Loader.findClass(Loader.java:380)
    at javassist.Loader.loadClass(Loader.java:312)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:266)
    at javassist.Loader.run(Loader.java:289)
    at com.modeln.Profiler.main(Profiler.java:93) 
```

那么您对如何在外部 jar 项目上运行我的分析器有任何想法吗？非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T23:27:22.960

好的，这是解决方案：只需 pool.insertClassPath()

```
public static void main(String[] args) throws Exception {   
    Loader loader = new Loader();
    loader.addTranslator(ClassPool.getDefault(), new Profiler());
    try {
        if (args.length < 1) {
            System.out.println(TOOL_USAGE);
        } else {

            //Initialize profiler with config/config.properties file
            initializeProfiler();

            final String[] commandArgs = new String[args.length - 1];
            System.arraycopy(args, 1, commandArgs, 0, commandArgs.length);

            //Open a jar file, unJar it into /tmp/ then add the /tmp/ classpath to the javassist laoder
            File file = new File(args[0]);
            JarFile jarFile = new JarFile(args[0]);
            Manifest manifest = jarFile.getManifest();
            String mainClassName = null;

            if (manifest != null) {
                mainClassName = manifest.getMainAttributes().getValue("Main-Class");
            }

            jarFile.close();

            mainClassName = mainClassName.replaceAll("/", ".");
            //Default temp directory is Jarfilename without .jar
            final File workDir = File.createTempFile(args[0].substring(0, args[0].indexOf('.')), "");
            workDir.delete();
            workDir.mkdirs();

            //Unjar all files into WorkDir temp directory
            unJar(file, workDir);

            //Add all directories into classPath
            createClassPath(workDir, file);

            //Add the classPath with unJar files into the Javassist ClassPool
            ClassPool pool = ClassPool.getDefault();
            pool.insertClassPath(workDir + "/");
            loader.run(mainClassName, null);

          }

    } catch (Throwable e) {
        e.printStackTrace();
    }

    System.out.println("Instrumentation of " + args[0] + " finished.");
} 
```

# actionscript-3 - AS 3.0 - 未触发自定义事件

> ID：10953376
> 
> 赞同：0
> 
> 时间：2012-06-08T17:25:38.447
> 
> 标签：actionscript-3, flash

我有一个场景类，当一个项目被拾起但事件没有被触发或不会被接收时，它应该接收一个事件。

```
public class Szene extends MovieClip {

    private var items : Array;

    public function Szene() {

        this.addEventListener(ItemEvent.PICKED_UP, removeItem);

    }

    public function removeItem(index : int)
    {
        trace("remove");
        this.removeChild(items[index]);
    }

...

}

public class FigurControl extends MovieClip {

    public function update(event : Event) 
    {

        for(var j=0; j < items.length; j++)
        {
            if(this.hitTestObject(items[j]))
            {
                trace("dispatch");
                this.dispatchEvent(newItemEvent(ItemEvent.PICKED_UP,j));
            }
        }
...

public class ItemEvent extends Event {

    public static const PICKED_UP : String = "pickedUp";

    public var data : int;

    public function ItemEvent(type : String, data : int, bubbles : Boolean=false, cancelable : Boolean=false)
    {
        super(type,bubbles,cancelable);
        this.data = data;
    }

    override public function clone() : Event
    {
        return new ItemEvent(type,data,bubbles,cancelable);
    }
}

        } 
```

我得到输出“dispatch”，但从未在“removeItem”方法中收到:(这是什么原因？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T17:30:08.887

在构造函数中，您有：

```
this.addEventListener(ItemEvent.PICKED_UP, removeItem); 
```

你有`Szene`对象在听自己——它应该在听适当的`FigurControl`对象：

```
myFigurControl.addEventListener(ItemEvent.PICKED_UP, removeItem); 
```

# iphone - IOS编程元素

> ID：10953379
> 
> 赞同：1
> 
> 时间：2012-06-08T17:25:50.273
> 
> 标签：iphone, element

我对 Stack Overflow 有点陌生，所以请多多包涵。我正在尝试设计一个 iPhone 应用程序，我注意到赫芬顿邮报应用程序上的一个功能，我一直在尝试用不同的风格复制它。我很困惑他们是在 webview 中将其作为 html 加载，还是在 XCode 上以编程方式复制它。

我已经查看了 UI Picker 和 UI PopOverController 并且两者都不能复制到其中。有人可以给我一些关于我必须在 XCode 中使用什么元素的建议吗？

这是一些附加的屏幕截图

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T19:58:54.153

根据您的屏幕截图，以下是我对他们所做的事情的猜测：

在他们提出“弹出框”的视图上，他们有一个带有自定义 UITableViewCell 的 UITableView。UITableViewCell（带有加号的图像）的右端是一个按钮，根据按钮的位置，他们可以决定弹出框的位置和箭头的方向。

他们使用了自定义弹出框控件。在弹出框里面，有一个 UITableView 占据了所有的空间。

如果你想做同样的事情，你必须知道

1.  如何使用自定义 UITableViewCell。
2.  如何在 iPhone 上进行弹出窗口。
3.  如果您希望下方的视图对您在弹出框内单击的内容做出反应，则委派。

如果您需要，我可以提供更多详细信息。

# ios - cocos2d游戏怎么录制？

> ID：10953382
> 
> 赞同：0
> 
> 时间：2012-06-08T17:26:24.767
> 
> 标签：ios, cocos2d-iphone, video-capture, video-recording

在我的 cocos2d 游戏中，我需要将游戏过程录制为视频，包括游戏产生的声音。

我该如何实施？任何人都可以帮助我。请提出一种方法来实现这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T09:56:52.093

最后我找到了用于录制游戏的 kamcord( [http://kamcord.com/ ) SDK](http://kamcord.com/)

Kamcord 是适用于 iOS 的内置游戏视频和音频录制技术。这个存储库包含一个与 cocos2d-1.0.1 配合使用的 Kamcord SDK，并允许您（游戏开发人员）使用非常简单的 API 捕获游戏视频。然后，您的用户可以通过 YouTube、Facebook、Twitter 和电子邮件重播和分享这些游戏视频。

在这里获取代码[https://github.com/kamcord/cocos2d-kamcord-ios/wiki](https://github.com/kamcord/cocos2d-kamcord-ios/wiki)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T18:00:52.420

尝试使用 iPad 转 HDMI 转换器。从那里您可以捕获视频和声音。

或者，您可以使用设备上的插孔获取声音，并使用放置良好的相机录制视频 :)

# clojure - 为什么是“每个？” 有 '？' “一些”没有“？” 在 Clojure 中？

> ID：10953384
> 
> 赞同：9
> 
> 时间：2012-06-08T17:26:44.830
> 
> 标签：clojure

有一个“？”的根本区别是什么？在`every?`和不在`some`clojure的功能中？

```
user> (every? true? [true true false])
false

user> (some true? [true false false])
true 
```

谢谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-08T17:41:22.777

`every?`返回真或假，所以它得到一个问号。`some`不返回布尔值，它返回“pred 返回的第一个逻辑真值”，`nil`否则返回。

这是我想出的蹩脚的例子：

```
user=> (some #(if (= 0 %) 1 0)  [1 3 5 0 9])
0 
```

集合中的第一个元素被传递到谓词中，谓词的计算结果为 0，这在逻辑上为真，因此`some`返回 0。您可以看到`some`没有返回真或假。

所以`every?`得到一个问号，因为它返回真或假。 `some`返回由`pred`或 nil 返回的值，因此它没有问号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T17:47:40.653

some 不一定返回布尔值，而 every? 总是这样。请参阅[文档。](http://clojure.github.com/clojure/clojure.core-api.html#clojure.core/some)

> 返回 coll 中任何 x 的 (pred x) 的第一个逻辑真值，否则返回 nil。一个常见的习惯用法是将集合用作 pred，例如，如果 :fred 在序列中，这将返回 :fred，否则返回 nil: (some #{:fred} coll)

# c++ - 我可以克隆 C++ 对象的字节，覆盖原始字节，然后将这些字节复制回来吗？

> ID：10953392
> 
> 赞同：7
> 
> 时间：2012-06-08T17:27:13.183
> 
> 标签：c++, language-lawyer

这纯粹是假设，但我不确定以下代码是否会根据 C++ 规范导致未定义的行为。我想复制一个对象中的字节，通过用零覆盖它来爆炸对象，然后将旧字节复制回来。我可以这样做而不会导致未定义的行为吗？

示例代码：

```
NonPODType o;
char bytes[sizeof(o)];

memcpy(bytes, &o, sizeof(o));
memset(&o, 0, sizeof(o));
memcpy(&o, bytes, sizeof(o)); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-08T17:29:35.900

一般来说，没有。明确保证这适用于第 3.9/2 节中的可简单复制的类型，但对于其他类型则没有。

> 对于普通可复制 type 的任何对象（基类子对象除外）`T`，无论该对象是否拥有 type 的有效值 `T`，构成该对象的底层字节（1.7）都可以复制到`char`or的数组中`unsigned char`。`char`如果or的数组的内容 `unsigned char`被复制回对象，则该对象随后应保持其原始值。[*示例：*
> 
> ```
> #define N sizeof(T)
> char buf[N];
> T obj;
> // obj initialized to its original value
> std::memcpy(buf, &obj, N);
> // between these two calls to std::memcpy,
> // obj might be modified
> std::memcpy(&obj, buf, N);
> // at this point, each subobject of obj of scalar type
> // holds its original value 
> ```
> 
> *—结束示例*]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T19:05:22.847

一般来说，是的。破坏的唯一方法是，如果您在销毁对象之后和恢复其数据之前访问该对象：

memset(&o, 0, sizeof(o));

obj.doSomething(); <--- 休息

memcpy(&o, 字节, sizeof(o));

# android - 设置可变数量微调器的 itemListener

> ID：10953395
> 
> 赞同：0
> 
> 时间：2012-06-08T17:27:24.827
> 
> 标签：android, android-layout, android-spinner

```
 int numberofSpinner = TransportResult.Transfers.size();
    Spinner spin=null;
    for(int i=0;i<numberofSpinner;i++)
    {
        spin = new Spinner(this);
        LinearLayout.LayoutParams p = new LinearLayout.LayoutParams(LinearLayout.LayoutParams.MATCH_PARENT,
                LinearLayout.LayoutParams.WRAP_CONTENT,1);
        spinLayout.addView(spin,p);
        spin.setId(i);
        Transfer transfer = TransportResult.Transfers.get(i);
        ArrayList<CharSequence> s = new ArrayList<CharSequence>();
        for( Line l : transfer.TransferLine)
        {
            s.add(l.ShortName+" - "+Helper.FindTransportTypeText(l.LineType));
        }
        adapter = new ArrayAdapter<CharSequence>(this,android.R.layout.simple_spinner_item,s);
            adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
            spin.setAdapter(adapter);
    }
    spin.setOnItemSelectedListener(new OnItemSelectedListener() {
        public void onItemSelected(AdapterView<?> parent, View view,
                  int position, long id) {
           if(parent.getId()==0){
       System.out.println("spin 1 is called");
               String str = (String)parent.getSelectedItem(); 
         }else if(parent.getId()==1){
       System.out.println("spin 2 is called");
               String str = (String)parent.getSelectedItem();  
     }
         }   
      public void onNothingSelected(AdapterView<?> arg0) {

          }
      }); 
```

如果微调器的数量大于 1，则仅触发最后一个微调器。例如; 我在屏幕上有 3 个微调器，当我选择第一个或第二个微调器的项目时，永远不会触发侦听器。只有第三个微调器会触发侦听器。我该如何解决？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T17:31:38.140

**更新**

当您使用多个微调器时，然后为每个微调器设置 ID。您可以在记住第一次设置 OnitemSelected 时调用 onItemSelected 时`spin.setId(int)`检查 id 。`OnItemSelected method.`

```
 spin.setOnItemSelectedListener(new OnItemSelectedListener() {
              @Override
               public void onItemSelected(AdapterView<?> parent, View view,
                        int position, long id) {

                 if(parent.getId()==1){
             System.out.println("spin 1 is called");
                     String str = (String)parent.getSelectedItem(); 
               }else if(parent.getId()==2){
             System.out.println("spin 2 is called");
                     String str = (String)parent.getSelectedItem();  
           }
               }   
            @Override
            public void onNothingSelected(AdapterView<?> arg0) {

                }
            }); 
```

# android - 如何为actionBar中显示的菜单项设置背景

> ID：10953397
> 
> 赞同：1
> 
> 时间：2012-06-08T17:27:42.343
> 
> 标签：android, background, customization, menuitem, android-actionbar

我在操作栏中显示一个菜单项。我想为这个项目设置一个背景。我不想使用图标，因为否则我无法使用 strings.xml 进行本地化（我在这个特定的菜单项中显示了一些文本，它将被翻译成多种语言。）。

这里的大多数答案都建议使用图标。图标当然会覆盖文本，如果我尝试使用 android:background 而不是 android:icon 它就不会显示任何内容。

所以基本上我想用自定义图像自定义操作栏中的菜单项，但同时能够在上面写一些东西（拉一些字符串）。有没有办法在xml中做到这一点？

PS 我正在使用 Theme.Holo.Light.DarkActionBar 但我已经更改了操作栏的背景。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T18:07:50.790

为每个要在“drawable”目录的操作栏中显示的图标创建一个 xml 文件，如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android" >
    <item android:drawable="@drawable/menuitem_bk"/>
    <item android:drawable="@drawable/icon_one"/>      
</layer-list> 
```

可绘制 icon_one 只是具有透明背景的图标，'menuitem_bk' 将是一个可绘制对象，定义如下：

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="rectangle" >
    <size
        android:height="36dp"
        android:width="36dp" />
    <solid android:color="@color/action_bar_items_bk_color" />
</shape> 
```

您将必须创建其中的四个，每个可绘制目录中的一个（xhdpi、hdpi、mdpi 和 ldpi）。形状的大小会根据目录不同：

*   xhdpi -> 48x48 hdpi -> 36x36 mdpi -> 24x24 ldpi -> 18x18

（据此：http: [//developer.android.com/guide/practices/ui_guidelines/icon_design_action_bar.html](http://developer.android.com/guide/practices/ui_guidelines/icon_design_action_bar.html)）

你得到了带有背景的 ActionBar 图标。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T23:25:06.353

作为一种解决方法，您始终可以为本地化设置不同的图标。没有什么能阻止你：

```
/drawable-fr/
/drawable-us/ 
```

另一方面，如果您认为这与您继承的主题有关，您可以查看 DarkActionBar 的源代码，然后在 styles.xml 中扩展它，覆盖您要更改的值（颜色）。

[https://github.com/android/platform_frameworks_base/tree/master/core/res/res/values](https://github.com/android/platform_frameworks_base/tree/master/core/res/res/values)

# asp.net - 试图在asp中禁用telerik编辑器控件

> ID：10953401
> 
> 赞同：1
> 
> 时间：2012-06-08T17:28:23.840
> 
> 标签：asp.net, telerik

我正在考虑做这个服务器端，但我想做的是禁用称为“编辑器”的 Telerik 控件。位于站点：[telerick editor control](http://demos.telerik.com/aspnet-ajax/editor/examples/overview/defaultcs.aspx)。

我这样做的原因是我想在禁用所有内容的同时为用户提供对象的确切外观和感觉。我根本不想使用图像，因为它会被拉伸、收缩、单击等，并且想要保持编辑器的外观。我有一个替代选项，我可以这样做，但它不仅效率低下，而且还有孔可以打开注射。

浏览 API，我没有看到实现该目标的方法。

我想在客户端禁用 jquery，但是当您可以将项目本身设置为禁用并且永远不会完全发送到客户端时，为什么要这样做。

想法？想法？你会怎么做？我没有看到真正导致我正在做的事情的方法或属性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T03:38:09.400

您可以在您的 aspx 页面中的 radEditor 声明中设置 enabled="false"：

[http://www.telerik.com/help/aspnet-ajax/editor-disabling-radeditor.html](http://www.telerik.com/help/aspnet-ajax/editor-disabling-radeditor.html)

```
<telerik:RadEditor runat="server" ID="RadEditor1" Enabled="false">
    <Content>       
        <strong>sample content</strong>    
    </Content>
</telerik:RadEditor> 
```

在服务器端你可以做

```
 RadEditor1.Enabled = false; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-01-22T09:36:31.383

在jQuery中，

尝试

$("#RadEditor1").prop('禁用', true);

# r - 在R中的不同列中选择具有相同结果的行

> ID：10953402
> 
> 赞同：1
> 
> 时间：2012-06-08T17:28:23.520
> 
> 标签：r, dataframe, subset

我想在我的数据框（catch）中选择我的“tspp.name”变量与我的“elasmo.name”变量相同的行。

例如，在这种情况下会选择第 #74807 行和 #74809 行，但不会选择第 #74823 行，因为 elasmo.name 是“skate”，而 tspp.name 是“Northern frog”。

我相信对此有一个简单的答案，但我还没有找到它。任何提示将不胜感激。

```
> catch[4:6,]
      gear tripID obsID sortie setID       date     time NAFO    lat   long      dur depth bodymesh
74807 GRL2 G00001     A      1    13 2000-01-04 13:40:00   2H 562550 594350 2.000000   377       80
74809 GRL2 G00001     A      1    14 2000-01-04 23:30:00   2H 562550 594350 2.166667   370       80
74823 GRL2 G00001     A      1    16 2000-01-05 07:45:00   2H 561450 593050 3.000000   408       80
      codendmesh mail.fil long.fil nbr.fil hook.shape hook.size hooks VTS tspp       tspp.name elasmo
74807         45       NA       NA      NA                   NA    NA 3.3 2211 Northern shrimp   2211
74809         45       NA       NA      NA                   NA    NA 3.2 2211 Northern shrimp   2211
74823         45       NA       NA      NA                   NA    NA 3.3 2211 Northern shrimp    211
          elasmo.name kept discard Tcatch     date.1 latitude longitude       EID
74807 Northern shrimp 2747      50   2797 2000-01-04 56.91667 -60.21667 G00001-13
74809 Northern shrimp 4919     100   5019 2000-01-04 56.91667 -60.21667 G00001-14
74823          Skates    0      50     50 2000-01-05 56.73333 -60.00000 G00001-16
                                 fgear
74807 Shrimp trawl (stern) with a grid
74809 Shrimp trawl (stern) with a grid
74823 Shrimp trawl (stern) with a grid 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T02:52:53.547

我知道问题出在哪里——您需要“按原样”读取数据，方法是将参数添加`as.is=TRUE`到`read.csv`命令（您可能用来加载所有内容）。没有这个，字符串将被存储为因子，并且上面建议的所有方法都将失败（正如您所发现的！）

正确读取数据后，您可以使用

```
catch[which(catch$tspp.name == catch$elasmo.name),] 
```

或者

```
subset(catch, tspp.name == elasmo.name) 
```

获得匹配的行 - 不要`which`在第一个中省略 否则在与 NA 进行比较时代码将失败。

下面是一个 30 秒的示例，它使用了一个小的虚构数据集，明确地说明了所有这些点。

首先，在磁盘上创建一个如下所示的文本文件（我将其保存为“F:/test.dat”，但它可以保存在任何地方）...

```
col1~col2
a~b
a~a
b~b
c~NA
NA~d
NA~NA 
```

让我们在不将因子转换为字符串的情况下加载它，只是为了看看上面提出的方法失败了：

```
> dat=read.csv("F:/test.dat",sep="~")  # don't forget to check the filename

> dat[which(dat$col1==dat$col2),]
Error in Ops.factor(dat$col1, dat$col2) : level sets of factors are different

> dat[dat$col1==dat$col2,]
Error in Ops.factor(dat$col1, dat$col2) : level sets of factors are different

> subset(dat,col1==col2)
Error in Ops.factor(col1, col2) : level sets of factors are different 
```

这正是您遇到的问题。如果您键入`dat$col1`，`dat$col2`您会看到第一个具有因子水平`a b c`，而第二个具有因子水平`a b d`- 因此出现错误消息。

现在让我们做同样的事情，但这次“按原样”读取数据：

```
> dat=read.csv("F:/test.dat",sep="~",as.is=TRUE)  # note the as.is=TRUE

> dat[which(dat$col1==dat$col2),]
  col1 col2
2    a    a
3    b    b

> dat[dat$col1==dat$col2,]
     col1 col2
2       a    a
3       b    b
NA   <NA> <NA>
NA.1 <NA> <NA>
NA.2 <NA> <NA>

> subset(dat,col1==col2)
     col1 col2
2    a    a
3    b    b 
```

如您所见，第一种方法（基于`which`）和第三种方法（基于`subset`）都给出了正确答案，而第二种方法因与 NA 的比较而感到困惑。我个人会提倡这种`subset`方法，因为我认为它是最整洁的。

最后一点：还有其他方法可以让字符串作为数据框中的因素出现 - 为了避免所有这些令人头疼的问题，请始终记住`stringsAsFactors = FALSE`在使用`data.frame`. 例如，`dat`直接在 R 中创建对象的正确方法是：

```
dat=data.frame(col1=c("a","a","b","c",NA,NA), col2=c("b","a","b",NA,"d",NA),
                         stringsAsFactors=FALSE) 
```

输入`dat$col1`and`dat$col2`你会看到它们被正确解释了。如果您再次尝试但`stringsAsFactors`省略了参数（或设置为 TRUE），您会看到那些该死的因素出现（就像从磁盘加载的狡猾的第一种方法一样）。

简而言之，永远记住`as.is=TRUE`and `stringsAsFactors=FALSE`，并学习如何使用该`subset`命令，你就不会出错！

希望这可以帮助 ：）

# r - 使用 pander 在 HTML 中创建 R 统计报告

> ID：10953405
> 
> 赞同：13
> 
> 时间：2012-06-08T17:28:34.857
> 
> 标签：r, pander

我正在用 R 和 Sweave 用 HTML 编写统计报告，但我无法用 改进表格格式`xtable`，所以看到daroczig 的 pander[包](https://github.com/daroczig/pander)，我认为这足以满足我的目的。

问题是当我`Pandoc.brew`在 brew 文件上运行函数时没有任何反应，R 控制台仍然在做某事但没有输出，我必须关闭 R 会话才能中断进程。[pander 示例](https://github.com/daroczig/pander/tree/master/inst/examples)文件会发生这种情况。

我在 Debian 6.0.5 挤压机上运行 R 2.15.0 和 Pandoc 1.5.1.1-5。我已经安装了`pander`包，如 pander 的网站所示。

任何帮助将不胜感激。提前致谢。

# c# - 在条件验证 MVC 3 中苦苦挣扎

> ID：10953406
> 
> 赞同：0
> 
> 时间：2012-06-08T17:28:38.763
> 
> 标签：c#, asp.net-mvc, validation

几天来一直在尝试解决此问题，但无法使其正常工作！

我有一个单选按钮列表，它确定表单的输出 - 其中一个单选按钮是下载 X 数量的文件。此单选按钮有一个文本框供用户输入他们希望下载的数量 (X)。

我只需要这个文本框来验证是否选择了与其对应的单选按钮 - 这是我到目前为止所拥有的，但无法让它工作。任何帮助都会得到帮助。

模型

```
public class myClass

{
       [Required(ErrorMessage = "Please select the type of output you wish to generate")]
       public int providerType { set; get; }

       public int? numOutput { set; get; }

       public IEnumerable<ValidationResult> Validate(ValidationContext validationContext)
       {
           if (providerType == 2 && numOutput == null)
               yield return new ValidationResult("Description must be supplied.");
       }

} 
```

控制器

```
 [AcceptVerbs(HttpVerbs.Post)]
    [HttpPost, ValidateInput(false)]
    public ActionResult Spin(myClass theData)

    {

        int? ProviderType = Convert.ToInt16(Request.Form["providerType"]);

        if (ModelState.IsValid)
        {

            //other random processing

        }

    } 
```

看法

```
 <ul>
<li>
  <%=Html.RadioButton("ProviderType","1")%><label>Output A Single Article (With Visible HTML Tags)</label>
 </li>
 <li>
  <%=Html.RadioButton("ProviderType","4")%><label>Output A Single Article (With HTML Pre Rendered - Not Recommended For Articles With Videos)</label>
 </li>
  <li>
  <%=Html.RadioButton("ProviderType", "3")%><label>Output For Mass Submission</label> 
  </li>

 <li>
  <%=Html.RadioButton("ProviderType", "2")%><label>Download Several Copies Of Article (With Visible HTML Tags)</label>
 How Many Artilces (Max 20) 

            <%= Html.TextBoxFor(Model => Model.numOutput)%>
             <%= Html.ValidationMessageFor(Model => Model.numOutput)%> 
```

我对 MVC 还很陌生，所以我可能在这里做了一些愚蠢的事情——任何帮助都非常受欢迎。我得到的错误是，当我选择单选按钮并且没有在文本框中输入任何内容时“输入字符串的格式不正确”。所以很明显验证没有触发 - 不能完全弄清楚为什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T18:46:06.617

它没有达到验证的原因是因为您的模型没有实现 IValidatable 对象。

```
 e.g. public class MyClass:IValidatableObject 
```

让我知道这是否适合你。我能够让上面的代码在本地工作，如果它仍然不适合你，我可以将代码发送给你。

# iphone - 如何用图片替换 Bar Buttons，类似于 Facebook？

> ID：10953407
> 
> 赞同：0
> 
> 时间：2012-06-08T17:28:39.533
> 
> 标签：iphone, ios

我现在正在制作一个应用程序的原型。我以编程方式向导航栏添加了一堆栏按钮：

```
NSArray *buttonTitles = [[NSArray alloc] initWithObjects:@"Alerts", @"Causes", @"Msgs", @"My Work", @"My Posts", nil];

NSMutableArray *rightBarButtons = [[NSMutableArray alloc] init];
for (int i = 0; i < 5; i++)
{
    UIButton *rightButton = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    rightButton.frame = CGRectMake(0, 0, 44, 34);
    [rightButton setTitle:[buttonTitles objectAtIndex:i] forState:UIControlStateNormal];
    [rightButton setTitleColor:[UIColor blackColor] forState:UIControlStateNormal];
    rightButton.titleLabel.font = [UIFont systemFontOfSize:10];
    rightItem = [[UIBarButtonItem alloc] initWithCustomView:rightButton];
    [rightBarButtons addObject:rightItem];   
} 
```

现在，它们看起来真的很难看，尤其是在导航栏上。我想拍摄一些图像（类似于标签栏图像）并将它们放在那里以替换按钮。我该怎么做？

对不起我的愚蠢，我是新手。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T17:33:04.323

```
 [rightButton setBackgroundImage:@"image.png" forState:UIControlStateNormal]; 
```

如果我正确理解你的问题，就会成功。

```
for (int i = 0; i < 5; i++)
{
    NSString* imageName = [NSString stringWithFormat:@"image-%d", i];
    UIButton *rightButton = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    rightButton.frame = CGRectMake(0, 0, 44, 34);
    [rightButton setTitle:[buttonTitles objectAtIndex:i] forState:UIControlStateNormal];
    [rightButton setTitleColor:[UIColor blackColor] forState:UIControlStateNormal];
    rightButton.titleLabel.font = [UIFont systemFontOfSize:10];
    [rightButton setBackgroundImage:imageName forState:UIControlStateNormal];
    rightItem = [[UIBarButtonItem alloc] initWithCustomView:rightButton];
    [rightBarButtons addObject:rightItem];   
} 
```

好吧，这就是我们可以做到的。我创建了一个 NSString (imageName)，为字符串分配了 image-%d 的值，这意味着它将采用`image-1`何时`i`为 1 和`image-2`何时`i`为 2 的名称。

然后在这`[rightButton setBackgroundImage:imageName forState:UIControlStateNormal];`部分它只需要我们创建的字符串的名称（imageName）。

这意味着由于您的循环，您的图像应该被`image-0`命名`image-5`。

如果您需要我澄清任何事情，我很乐意解释更多。

# actionscript-3 - Flash 上的堆栈溢出

> ID：10953408
> 
> 赞同：0
> 
> 时间：2012-06-08T17:28:44.957
> 
> 标签：actionscript-3, flash

我的类中有一个返回数组的函数。问题是，使用时出现堆栈溢出错误。重要的功能是：

ScrollList/returnArmy

```
 public function returnArmy ( army:int ):Array
    {
        var returnVar:Array;

        if( army == 0 ) returnVar = army1_;
        else if( army == 1 ) returnVar = army2_;
        else if( army == 2 ) returnVar = army3_;
        else if( army == 3 ) returnVar = army4_;
        else if( army == 4 ) returnVar = army5_;
        else if( army == 5 ) returnVar = army6_;
        else if( army == 6 ) returnVar = army7_;
        else if( army == 7 ) returnVar = army8_;
        else returnVar = new Array;

        return returnVar;
    } 
```

SkirmishScreen/returnArmy

```
 public function returnArmy ( army_:int ):Array
    {
        var retArmy:Array = returnArmy( army_ );
        return retArmy;
    } 
```

SkirmishScreen/returnArmy 在循环中被调用，使用

```
 screensAR_[3] = new PlayScreen( stage, screensAR_[2].returnArmy( 0 ) ); 
```

使用 new Array() 初始化 Army1_ 到 8_。任何人都可以帮忙吗？

编辑：确切的错误是：

错误：错误 #1023：发生堆栈溢出。在 SkirmishScreen/returnArmy()

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T17:42:03.900

我不熟悉动作脚本，但看起来“SkirmishScreen”returnArmy 函数正在递归调用自身，并且永远不会脱离它。这是其他语言中堆栈溢出异常的常见来源。

您似乎并不是要使用递归。我猜你希望你的“SkirmishScreen”returnArmy 函数调用“ScrollList”returnArmy 函数，但是“SkirmishScreen”returnArmy 正在调用它自己。那就是递归。

# assembly - 使用 NASM 在 64 位模式下不支持 pop 指令？

> ID：10953418
> 
> 赞同：21
> 
> 时间：2012-06-08T17:29:40.020
> 
> 标签：assembly, x86-64, nasm, 32bit-64bit

我正在[按照本教程](http://www.cin.ufpe.br/~if817/arquivos/asmtut/quickstart.html)（第 4 节）使用 NASM 开发更深入的 hello world。本教程主要教您如何处理命令行输入。
这是有问题的代码片段：

```
section .text
        global _start

_start:
        pop     ebx     ; arg count
        pop     ebx     ; arg[0] the program name
        pop     ebx     ; arg[1-n] the remainder of the args
                        ; must each be indiviually popped 
```

`error: instruction not supported in 64-bit mode`参考上面的 3 条弹出指令，编译过程中出现代码错误。[查看文档](http://cs.nyu.edu/courses/fall02/V22.0201-001/nasm_doc_html/nasmdocb.html#section-B.4.244)后，似乎此代码仅适用于 32 位系统。

有64位`pop`指令吗？有没有人有`pop`我可以看的64位教程？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-06-08T19:01:49.317

是的，64 位`pop`指令是……POP。:-) 您需要将它用于 64 位寄存器（例如`rbx`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-01-04T03:57:17.060

基本上，您可以通过将 eax 替换为 rax 将其转换为 64 位（所有其他寄存器也是如此）

# java - Android/Java：将任何字符串转换为颜色（十六进制）

> ID：10953423
> 
> 赞同：8
> 
> 时间：2012-06-08T17:30:04.190
> 
> 标签：java, android

有什么方法可以从 Java / Android 中的任何字符串生成颜色，比如加密 / 哈希函数？

示例：字符串“Home”生成类似于“#FF1234”的颜色。
字符串 "Sky" 生成类似 "#00CC33" 的颜色 ...

没有随机化。因此，系统将始终为该字符串计算相同的颜色

谢谢

编辑：字符串由用户自由定义

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-08T17:46:02.433

将`String.hashCode()`返回一个 int 值，因此只需将其转换为十六进制值即可。

```
String s = "Home";
String color = String.format("#%X", s.hashCode()); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-04-01T19:15:19.070

具有一致的不透明度：

```
String opacity = "#99"; //opacity between 00-ff
String hexColor = String.format(
        opacity + "%06X", (0xFFFFFF & anyString.hashCode())); 
```

或者使用新的材料设计android Palette：
[https ://gist.github.com/odedhb/79d9ea471c10c040245e](https://gist.github.com/odedhb/79d9ea471c10c040245e)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-08T18:00:41.067

尝试在此处查找如何创建字符串的消息摘要。

[http://www.mkyong.com/java/java-sha-hashing-example/](http://www.mkyong.com/java/java-sha-hashing-example/)

创建消息摘要后，使用生成的每个字节数来创建颜色值。您可以在中间的任何地方使用最不重要的、最重要的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-08T17:35:58.613

我猜您并没有尝试更改资源文件。

老实说，这取决于你想怎么做。有数百万种方法可以实现它

对我来说，我会取每个字符的 Ascii 值，将它们全部加起来，然后将其转换为十六进制。话虽如此，为了涵盖太多字符的情况，会将其修改为十六进制字符串的最大大小。IE。FFFFFF 这样它就会环绕并重新开始。

```
//pseudocode
counter = 0;
foreach(char in string){
    counter+=(int)char;

}
counter = convertToHex(counter)%0xffffff;
string x = "#"+counter.toString(); 
```

之后我将它存储到一个字符串中

```
string x = "#"+hexVal.toString(); 
```

他们你可以用它做你想做的事。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-08T17:40:54.337

您可以尝试以下方法：

```
String s = "Home";
byte[] b = s.getBytes("US-ASCII");
StringBuffer hexString = new StringBuffer();
for (int i=0;i<b.length;i++) {
    hexString.append(Integer.toHexString(0xFF & b[i]));
    }
String finalHex = "#" + hexString.substring(0,6);
System.out.println(finalHex); 
```

生成一个十六进制：`#486f6d`

同样，为您想要的所有 s 生成十六进制`String`并继续将它们添加到 a`HashMap`作为键值对。

# ruby-on-rails - Rails 秘密令牌对于每个 Rails 应用程序是否必须是唯一的？

> ID：10953435
> 
> 赞同：1
> 
> 时间：2012-06-08T17:30:51.017
> 
> 标签：ruby-on-rails, security, ruby-on-rails-3.1

在 rails 初始化程序下的 secret_token.rb 中，有一个秘密令牌显示为一串随机字符和数字，必须为 30 个字符或更长。为了获得最大的安全性，这个秘密令牌对于部署的每个 Rails 应用程序是否必须是唯一的？我们计划使用一个 Rails 模板，该模板可能对使用相同模板开发的每个应用程序具有相同的秘密令牌。非常感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-08T17:59:16.830

昨天我在读[一篇](http://biggestfool.tumblr.com/post/24049554541/reminder-secret-token-rb-is-named-so-for-a-reason)关于安全的文章，我认为确保你的 secret_token 的唯一性很重要。

您可以使用任何以前的项目作为模板（每个人都这样做），但出于安全原因，您应该生成一个新的 secret_token。

在本文中，他们解释了如何通过 vegas-gem 生成新的 secret_token。我还没试过......

另请查看以下链接：

*   [Ruby on Rails config.secret_token 错误](https://stackoverflow.com/questions/5762577/ruby-on-rails-config-secret-token-error)
*   [当您的项目中有密钥时，如何才能推送到 GitHub？](https://stackoverflow.com/questions/5132152/when-you-have-secret-key-in-your-project-how-can-pushing-to-github-be-possible)

我希望它有帮助...

# jsf - JSF组件绑定后消失

> ID：10953438
> 
> 赞同：0
> 
> 时间：2012-06-08T17:30:59.503
> 
> 标签：jsf

我定义了一个自定义组件并尝试使用如下绑定：

```
<ui:composition ...>
    <div>
        <f:subview>
            <a4j:outputPanel>
                <h:commandButton id="t1" value="test!" />
                ...
            </a4j:outputPanel>
        </f:subview>
    </div>
</ui:composition> 
```

在我添加如下绑定属性之前，该组件可以正常工作：

```
<h:commandButton id="t1" binding="#{foo}" value="test!" onclick="alert('I am #{id:cid(foo)}'); return false;" /> 
```

这个组件没有出现，我也找不到这个按钮对应的代码。

有人知道修复吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T18:14:57.707

> *是的，它被多次使用*

这就是原因。`binding`应该引用组件的唯一**引用**。现在，您在物理上拥有多个引用同一个引用的组件。

我不确定具体的功能要求是什么，但是当您已经在 J​​avaScript 上下文中时，这种方法通常是不必要的。然后也可以按如下方式解决特定示例：

```
<h:commandButton id="t1" value="test!" onclick="alert('I am ' + id); return false;" /> 
```

生成的 HTML 元素本身的 ID 即与 JSF 组件客户端 ID 完全相同。

# powershell - 如何提取发送到特定 smtp 地址的电子邮件计数

> ID：10953441
> 
> 赞同：1
> 
> 时间：2012-06-08T17:31:23.123
> 
> 标签：powershell, exchange-server

我被要求查看是否可以获取有关电子邮件数量的统计信息，特别是从我的组织内部发送到特定电子邮件地址的附件大小。

我经常使用 Exchange Web 服务，但这似乎更像是一个通过 Exchange shell 类型的情况的 powershell。有人对此有任何指示吗？我对 powershell 很满意，但我不熟悉 Exchange cmdlet。

我还问了关于服务器故障的这个问题，因为我不确定哪个站点最合适。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T17:18:32.070

我建议尝试从中获取此信息的第一个地方是集线器传输日志。这些默认情况下仅存在 14 天，因此您可能需要编写一个每天运行的脚本并将统计信息导出到 csv 文件或数据库。

如果您现在需要获取超过 14 天的数据，请查看： [Search-Mailbox](http://technet.microsoft.com/en-us/library/dd298173.aspx)

使用 EWS 方法很多仍然是可行的途径。Glen 一直在发布一些很棒的东西： [EWS 托管 API 和 Powershell How-To 系列第 1 部分](http://gsexdev.blogspot.com/2012/01/ews-managed-api-and-powershell-how-to.html)

# ruby-on-rails - 如何为 after_save 创建的对象返回验证错误？

> ID：10953446
> 
> 赞同：2
> 
> 时间：2012-06-08T17:31:37.390
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3.1, ice-cube

我正在编写一个使用[ice_cube](https://github.com/seejohnrun/ice_cube) gem 处理定期预订的预订系统。一个`Booking`has_many `BookingItem`s，一个用于重复规则中的每次出现，这些是在一个由`Booking`的 after_save 回调调用的方法中创建的。

这一切都很好，直到我添加了一个验证，通过检查在给定的时间`BookingItem`还没有一个来避免重复预订。`BookingItem`此验证引发了一个错误，我想在预订表单上显示该错误，但目前它只是默默地阻止`Booking`保存 - 因为错误是由它引发的，`BookingItem`它没有被传递回`Booking`.

应用程序/模型/booking.rb

```
class Booking < ActiveRecord::Base
  include IceCube

  has_many :booking_items, :dependent => :destroy

  after_save :recreate_booking_items!

  # snip

  private

  def recreate_booking_items!
    schedule.all_occurrences.each do |date|
      booking_items.create!(space: self.requested_space, 
                            booking_date: date.to_date,
                            start_time: Time.parse("#{date.to_date.to_default_s} #{self.start_time.strftime('%H:%M:00')}"),
                            end_time: Time.parse("#{date.to_date.to_default_s} #{self.end_time.strftime('%H:%M:00')}"))
    end
  end
end 
```

应用程序/模型/booking_item.rb

```
class BookingItem < ActiveRecord::Base
  belongs_to :booking

  validate :availability_of_space

  # snip

  private

    def availability_of_space
      unless space.available_between? DateTime.parse("#{booking_date}##{start_time}"), DateTime.parse("#{booking_date}##{end_time}")
        errors[:base] << "The selected space is not available between those times."
      end
    end
end 
```

app/views/booking/_form.html.erb

```
<% if @booking.errors.any? %>
  <div id="error_explanation">
    <p><%= pluralize(@booking.errors.count, "error") %> prohibited this booking from being saved:</p>
    <ul>
      <% @booking.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
    </ul>
  </div>
<% end %>

<%= form_for(@booking, :html => { :class => "nice custom"}) do |f| %>
  ...
<% end %> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T03:09:42.820

如果您使用`after_save`回调来创建`BookingItem`对象，您的选择会受到一定限制。

而不是使用`after_save`，我会使用`before_validation`并进行一些调整以适应它。

1) 在回调中构建`BookingItem`对象`before_validation`

```
before_validation :recreate_booking_items! 
```

和

```
def recreate_booking_items!
  schedule.all_occurrences.each do |date|
    booking_items.build(......
  end
end 
```

请注意，我正在使用`build`而不是`create!`

当您验证`Booking`对象时，集合中的新`BookingItem`对象`booking_items`也将被验证。任何错误都将包含在主`Booking`对象的错误集合中，您可以像往常一样在视图中显示它们，因为该`Booking`对象将无法保存。

笔记

1) 当`BookingItem`对象被验证时，对象被自动`Booking`验证，因为它们是新记录并且属于一个`has_many`关联。如果它们被持久化（即已经在数据库中），它们将不会被自动验证。

2)`before_validation`回调可以在对象的生命周期中多次调用，具体取决于您的代码。在这种情况下，`BookingItem`每次调用回调时都会构建对象，这将导致重复。为了防止这种情况，您可以在开头添加以下行`recreate_booking_items!`：

```
booking_items.delete_all 
```

当然，如果你在数据库中有持久化的对象，你可能不想这样做`BookingItem`（见下文）。

3) 此代码是为创建`Booking`对象而明确设计的。如果您正在编辑`Booking`已具有持久`BookingItem`对象的现有对象，则可能需要进行某些修改，具体取决于您所需的功能。

更新：

在下面的评论中解决@Simon 的后续问题。

我可以想到您可能想要这样做的两种方法：

1）保持验证不变`BookingItem`。

然后，我会有一个这样的自定义验证器`Booking`：

```
validate :validate_booking_items

def validate_booking_items
  booking_items.each do |bi|
    if bi.invalid?
      errors[:base] << "Booking item #{bi.<some property>} is invalid for <some reason>"
    end
  end
end 
```

`Booking`这为每个 invalid提供了一个很好的自定义消息`BookingItem`，但它也为每个提供`BookingItem`了自己的错误集合，您可以使用它来识别哪些`booking_items`是无效的。您可以像这样引用无效的`booking_items`：

@booking.booking_items.select {|bi| bi.errors.present?}

然后，如果您想`booking_items`在视图中显示无效：

```
f.fields_for :booking_items, f.object.booking_items.select {|bi| bi.errors.present? } do |bi|
end 
```

这种方法的问题在于 a`BookingItem`可能由于多种原因而无效，并且尝试将所有这些原因添加到基本`Booking`错误集合中可能会变得混乱。

因此，另一种方法：

2）忘记自定义验证器`Booking`。依靠 Rails 对集合的非持久成员的自动验证来运行每个对象`has_many`的验证检查。`BookingItem`这将为他们每个人提供一个错误集合。

然后，在您的视图中，您可以遍历无效`booking_items`并显示它们各自的错误。

```
<ul>
  <% @booking.booking_items.select {|bi| bi.errors.present? }.each do |bi| %>
    <li>
      Booking item <%= bi.name %> could not be saved because:
      <ul>
        <% bi.errors.full_messages.each do |msg| %>
          <li><%= msg %></li>
        <% end %>
      </ul> 
    </li>
  <% end %>
</ul> 
```

如果您使用这种方法，您的`Booking`对象错误集合中将出现一般的“预订项目无效”错误，因此您可能希望以某种方式忽略这些错误，以便它们不会显示。

注意：我对 IceCube 不熟悉，但如果您`BookingItem`在表单中显示对象 via ，这可能会与在回调中构建对象`nested_attributes_for`发生冲突。`BookingItem``before_validation`

# asp.net - DropDownList 属性在 mouseout 上不起作用

> ID：10953449
> 
> 赞同：0
> 
> 时间：2012-06-08T17:31:43.543
> 
> 标签：asp.net, vb.net, gridview, drop-down-menu, attributes

我在 gridview 的模板字段中有一个下拉列表。我正在尝试更改下拉列表的宽度，当我将鼠标悬停时显示所有值，然后在鼠标移出时将宽度更改回来。这是代码：

```
 ddl.Attributes.Add("onmouseout", "event.srcElement.style,width = '186px';")
 ddl.Attributes.Add("onmouseover", "event.srcElement.style.width = '';") 
```

当我将鼠标悬停时我工作得很好，但鼠标移出并没有改变？难道我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T17:33:57.780

您有一个逗号，其中一个点应该位于样式和宽度之间：

```
ddl.Attributes.Add("onmouseout", "event.srcElement.style,width = '186px';"); 
```

应该

```
ddl.Attributes.Add("onmouseout", "event.srcElement.style.width = '186px';"); 
```

在语句的末尾添加分号可能不会有什么坏处。

# jquery - IE 复制了我的 div 并将其显示在原始的下方。我不知道为什么？

> ID：10953450
> 
> 赞同：1
> 
> 时间：2012-06-08T17:31:46.190
> 
> 标签：jquery, html, css, internet-explorer

我有一个 div，里面有两个按钮，有一个 jQuery 函数。在这个 IE 下显示相同的 div，但似乎没有任何内容。这是网址：[http](http://ht.io-web.com/home-%281%29) ://ht.io-web.com/home-%281%29 。如果你想看看它在 Crome 或 Firefox 中应该是什么样子，它只会在 IE 中再次发生这种情况。谢谢您的帮助。这也是代码：

```
<div class="home-upper">
<h1>
Language Learning. <span>Simplified.</span></h1>
<div class="signup">
<div class="buttons">
    <span class="shaded"><a href="javascript:tgT()"><span class="green-button huge">Find Tutors</span></a></span><span class="shaded"> <img src="/HireaTutor/media/images/structure/or.png" class="or">&nbsp;&nbsp; <a href="javascript:tgS()"><span class="SignUpGreen huge">Sign Up </span></a></span></div>
<div class="sign-up white" style="display: block;">

        <table cellspacing="0" cellpadding="0" style="clear:both;padding-left:12px;" class="get-started">
            <tbody>
                <tr>
                    <td>
                        Full Name</td>
                    <td>
                        Email</td>
                    <td>
                        &nbsp;</td>
                </tr>
                <tr>
                    <td>
                        <input type="textbox" id="fullName"></td>
                    <td>
                        <input type="textbox" id="email"></td>
                    <td>
                        <a href="javascript:GetStarted();"><span class="green-button">Get Started</span></a></td>
                </tr>
            </tbody>
        </table>

</div>
<div class="find-tutors white" style="display: block;">
    <table cellspacing="0" cellpadding="0" class="find-tutors" style="display: table;">
        <tbody>
            <tr>
                <td>
                    I speak</td>
                <td>
                    <select id="spoken"><option>English</option><option>French</option><option>Spanish</option></select></td>
                <td>
                    and I'm learning:</td>
                <td>
                    <select id="learning"><option>English</option><option>French</option><option>Spanish</option></select></td>
                <td>
                    <a href="javascript:findTutor();"><span class="green-button">Search</span></a></td>
            </tr>
        </tbody>
    </table>
</div>
</div>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T17:41:16.620

您有一些相当严重的 HTML 错误。如：

> 第 103 行，第 16 列：ID “head”已定义
> <div id="head">
> “id”是唯一标识符。每次在文档中使用此属性时，它必须具有不同的值。如果您将此属性用作样式表的挂钩，则使用类（对元素进行分组）可能比使用 id（用于标识一个元素）更合适。
> 
> 第 3 行第 11 列：这里首先定义了 ID“head”
> <head id="head">

* * *

> 第 158 行，第 17 列：ID "NavMiddle" 已定义
> <li id="NavMiddle">
> 
> 第 156 行，第 17 列：ID "NavMiddle" 首先在这里定义 >li id="NavMiddle">

* * *

> 第 180 行，第 23 列：文档类型在此处不允许元素“样式”

尝试修复这些，然后也许您可能会开始看到预期的行为。

# xml - 将 RSS 转换为纯 XML 时如何正确显示 XML

> ID：10953454
> 
> 赞同：0
> 
> 时间：2012-06-08T17:32:23.927
> 
> 标签：xml, vb.net, rss

所以基本上，我手头有这个 RSS 提要。我通过以下方式将 RSS 转换为 XmlDocument：

```
 Public Function GroveHallFromRss() As String
        Dim webClient As System.Net.WebClient = New System.Net.WebClient()
        Dim ourUrl As String = "http://abc.123.org/RSSSyndicator.aspx?type=N&range=currentyear&expire=Y&location=2-7-165&rssid=18"
        Dim stream AS Stream
    stream = webClient.OpenRead(ourUrl)
    Dim xmlDocument AS XmlDocument = new XmlDocument()
        xmlDocument.Load(stream)

        Dim root As XmlNode = xmlDocument.DocumentElement
    Return root.OuterXml.ToString

    End Function 
```

有了上面，我可以得到 RSS 的内容，但它以标签开头，以`<string>`标签结尾`</string>`。中间的内容都是压缩在一起的纯文本。

如果我删除 OuterXml 部分，只是`Return root.ToString`，我得到以下内容：

> 此 XML 文件似乎没有任何与之关联的样式信息。文档树如下所示。 `<string>System.Xml.XmlElement</string>`

所以我想知道如何将转换后的 RSS 显示为任何其他带有节点样式的 XML 文件。（但不是由浏览器呈现和显示为 RSS，而只是样式化的 XML）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T18:17:56.623

首先，没有必要在您当前的代码中将 XML 加载到 XmlDocument 对象中。例如，下面的代码做同样的事情：

```
Public Function GroveHallFromRss() As String
    Dim webClient As System.Net.WebClient = New System.Net.WebClient()
    Dim ourUrl As String = "http://abc.123.org/RSSSyndicator.aspx?type=N&range=currentyear&expire=Y&location=2-7-165&rssid=18"
    Dim streamReader As StreamReader = New StreamReader(webClient.OpenRead(ourUrl))
    Return streamReader.ReadToEnd()
End Function 
```

但是，这并不能回答您关于正确缩进文档的问题。为此，我相信最简单的方法是应用样式表。以下 XSLT 脚本将使 XML 文档变得漂亮：

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="xml" indent="yes"/>
  <xsl:strip-space elements="*"/>
  <xsl:template match="/">
    <xsl:copy-of select="."/>
  </xsl:template>
</xsl:stylesheet> 
```

因此，您可以在代码中应用 XSLT 脚本：

```
Public Function GroveHallFromRss() As String
    Dim webClient As System.Net.WebClient = New System.Net.WebClient()
    Dim ourUrl As String = "http://abc.123.org/RSSSyndicator.aspx?type=N&range=currentyear&expire=Y&location=2-7-165&rssid=18"
    Dim reader as XmlTextReader = new XmlTextReader(webClient.OpenRead(ourUrl))
    Dim transformer As XslCompiledTransform = New XslCompiledTransform()
    transformer.Load("<?xml version=""1.0"" encoding=""utf-8""?><xsl:stylesheet version=""1.0"" xmlns:xsl=""http://www.w3.org/1999/XSL/Transform""><xsl:output method=""xml"" indent=""yes""/><xsl:strip-space elements=""*""/><xsl:template match=""/""><xsl:copy-of select="".""/></xsl:template></xsl:stylesheet>")
    Dim settings As XmlWriterSettings = transformer.OutputSettings
    Dim outputStream As MemoryStream = New MemoryStream()
    Dim xmlWriter As XmlWriter = xmlWriter.Create(outputStream, settings)
    transformer.Transform(reader, Nothing, xmlWriter)
    outputStream.Position = 0
    Dim streamReader As StreamReader = New StreamReader(outputStream)
    Return = streamReader.ReadToEnd()
End Function 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T18:55:03.777

Thanks, actually my friend helped me with a small change. That is changing As String to As XmlDocument. that did it. so "Public Function GroveHallFromRss() As XmlDocument" Thanks for you help though.

# iphone - 调用 onSocket:didReadData:withTag 时 CocoaAsyncSockets 似乎失败了

> ID：10953456
> 
> 赞同：0
> 
> 时间：2012-06-08T17:32:26.477
> 
> 标签：iphone, objective-c, ios, cocoaasyncsocket

出于某种原因，当我尝试调用 CocoaAsyncSocket 的 onSocket:didReadData:withTag 方法时，它失败并且不显示读取的数据。

应用委托：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{   
    NSError *error = nil;
    if (![socket connectToHost:@"199.5.83.63" onPort:11005 error:&error]) 
    {
        NSLog(@"Error connecting: %@", error);
    }

    [socket readDataWithTimeout:10 tag:1];

    self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]] autorelease];
    // Override point for customization after application launch.
    self.viewController = [[[tekMatrixViewController alloc] initWithNibName:@"tekMatrixViewController" bundle:nil] autorelease];
    self.window.rootViewController = self.viewController;
    [self.window makeKeyAndVisible];
    return YES;
} 
```

这是我在 CocoaAsyncSocket 库中的方法：

```
- (void)onSocket:(AsyncSocket *)sock didReadData:(NSData *)data withTag:(long)tag
{
    NSData *strData = [data subdataWithRange:NSMakeRange(0, [data length])];
    NSString *msg = [[NSString alloc] initWithData:strData encoding:NSUTF8StringEncoding];
    NSLog(@"RX length: %d", [data length]);
    if(msg)
    {
        NSLog(@"RX:%@",msg);
    }
    else 
    {
        NSLog(@"Fail");
    }    
}

- (void)onSocket:(AsyncSocket *)sock willDisconnectWithError:(NSError *)err
{
    NSLog(@"error - disconnecting");
    //start reconnecting procedure here...
}

- (void)onSocketDidDisconnect:(AsyncSocket *)sock
{
    NSLog(@"disconnected");
}

- (void)onSocket:(AsyncSocket *)sock didConnectToHost:(NSString *)host port:(UInt16)port
{
    NSLog(@"connected");
} 
```

当我在模拟器中运行我的应用程序时，这是我的输出日志吐出的内容：

```
2012-06-08 13:17:30.808 tekMatrix[2793:f803] connected
2012-06-08 13:17:30.815 tekMatrix[2793:f803] RX length: 8
2012-06-08 13:17:30.816 tekMatrix[2793:f803] Fail 
```

*   onSocket:didConnectToHost:port 被调用，NSLog 吐出“已连接”。
*   onSocket:didReadData:withTag 被调用，NSLog 吐出“RX length: 8”。
*   同样在 onSocket:didReadData:withTag 中，NSLog 吐出“失败”。

如果我错了，请纠正我，但它不应该“msg”包含从服务器读取的数据的值？看起来数据读取知道它期望数据长度为 8，但数据似乎没有存储到字符串中。我对 iOS 非常陌生，尤其是套接字编程，所以这对我来说是全新的。对此主题的任何帮助将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T18:04:33.397

我相信，服务器正在传递不是 UTF-8 编码的数据。
请试试

```
NSString *msg = [[NSString alloc] initWithData:data encoding:NSASCIIStringEncoding]; 
```

[并删除这一行：`NSData *strData = [data subdataWithRange:NSMakeRange(0, [data length])];`]

如果这没有帮助，[这里有一些更多的编码](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html#//apple_ref/doc/uid/20000154-BAJJAICE)可以尝试：

```
enum {
   NSASCIIStringEncoding = 1,
   NSNEXTSTEPStringEncoding = 2,
   NSJapaneseEUCStringEncoding = 3,
   NSUTF8StringEncoding = 4,
   NSISOLatin1StringEncoding = 5,
   NSSymbolStringEncoding = 6,
   NSNonLossyASCIIStringEncoding = 7,
   NSShiftJISStringEncoding = 8,
   NSISOLatin2StringEncoding = 9,
   NSUnicodeStringEncoding = 10,
   NSWindowsCP1251StringEncoding = 11,
   NSWindowsCP1252StringEncoding = 12,
   NSWindowsCP1253StringEncoding = 13,
   NSWindowsCP1254StringEncoding = 14,
   NSWindowsCP1250StringEncoding = 15,
   NSISO2022JPStringEncoding = 21,
   NSMacOSRomanStringEncoding = 30,
   NSUTF16StringEncoding = NSUnicodeStringEncoding,
   NSUTF16BigEndianStringEncoding = 0x90000100,
   NSUTF16LittleEndianStringEncoding = 0x94000100,
   NSUTF32StringEncoding = 0x8c000100,
   NSUTF32BigEndianStringEncoding = 0x98000100,
   NSUTF32LittleEndianStringEncoding = 0x9c000100,
   NSProprietaryStringEncoding = 65536
}; 
```

`NSISOLatin1StringEncoding`也很常见。

# javascript - 动态更改 iframe 的内容

> ID：10953458
> 
> 赞同：0
> 
> 时间：2012-06-08T17:32:34.843
> 
> 标签：javascript, jquery, iframe, hyperlink, jquery-animate

我有一个 iframe 标签，我想使用 jquery 动画动态更改它。因此，例如 iframe 位于主页上，如果我单击 about 链接，它将加载 about.html，当它准备好时，它将使用动画将其向下滑动。我有它的基本逻辑，但后来想到了这个

**问题：**

当我刷新页面时，它会加载回 index.html 页面的内容，而我想要的是，当我刷新它时，它仍然保留 about.html 的内容。

```
 <a href="about.html" target="content">About</a> 
  <iframe id="content" name="content" align="top" src="index.html" 
      frameborder="0" width="100%" height="1200px" scrolling="no">
  </iframe> 
```

这只是最基本的逻辑，但我需要帮助我如何实现令人耳目一新的部分/

如果我不将它们包含在同一页面中，但我仍然想为页面转换设置动画怎么办。因此，当用户单击指向新页面的链接时，它会加载它，然后对其进行动画处理。我该如何实现这一点。因为最近我看到一个 jquery 插件 callen LocalScroll 并且他们实现了这个效果，但我无法让它在新页面上工作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T18:36:29.517

您对 jQuery 插件 LocalScroll 的引用是正确的。事实上，如果你能正确实施它，我认为它会解决你的问题。

在此插件、jQuery Mobile 和其他地方使用的基于锚的导航将更新`window.location`对象并反映在浏览器的地址栏中，以便在发生显式页面刷新时保留散列位置。

那么，答案是有一个脚本可以从地址解析这个本地链接。这是一个通用的 JavaScript 代码块来演示这一点：

```
window.onload=function() {
    var URLParts=window.location.toString().split('#');
    if(URLParts.length>1)
        var lastPage=decodeURI(URLParts[1]);
    else
        return false;
    if(lastPage)
        iframe_load(lastPage,'content');
}
function clear_last_page(location) {
    var URLParts=location.split('#');
    if(URLParts.length<=1)
        return location;
    URLParts.pop();
    return URLParts.join('#');
}
function iframe_load(url,targetID) {
    document.getElementById(targetID).src=url;
    var location=clear_last_page(window.location.toString())+'#'+url;
    window.location.href=location;
} 
```

## 这个怎么运作

触发事件时`window onLoad`，会在 URL 中搜索锚（散列）链接。如果找到，我们将假定这是对页面的引用，然后将其传递给`iframe_load()`.

这个函数做了两件事。首先，它将您的目标内联框架指向通过`url`参数传递的页面。其次，它将父框架指向一个虚构的锚点，即使在页面刷新后也会保留该锚点。

因此，当您刷新父框架时，该锚文本将被抓取、解析并用于重新加载最后加载​​的内联页面。

该函数`clear_last_page()`只是一个帮助函数，可防止将其他锚链接附加到 URL。

## 示范

访问此网址：

[http://gocontactform.com/stackoverflow/dynamically-change-iframes-content/](http://gocontactform.com/stackoverflow/dynamically-change-iframes-content/)

单击链接“第 2 页”以查看更改。然后刷新页面。

## 值得注意的

请注意，该解决方案在技术上接管了锚定的正常功能。因此，如果您尝试在页面上正常使用锚链接，您可能会得到不希望的结果。

您被迫依赖`iframe_load()`绑定到该内联框架的任何链接，而不是您在问题中建模的内容（带有`target`属性的传统链接）。

我可能还建议您不要定义`src`内联默认属性。相反，您可以向`onLoad`处理程序添加一个调用`iframe_load('page1.html','content')`，这将防止在您使用地址中的锚定链接刷新时不必要地尝试加载默认页面。

还有其他方法可以完成您的要求。但我相信这个解决方案很容易理解和实施。

希望有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T17:36:04.403

您可以使用以下内容更改`src`iFrame 的属性：

`$("#content").attr('src', 'http://mysite.com/newpage.html');`

哎呀，看来我误读了这个问题。

如果要向下滑动它，可以将事件处理程序绑定到`load`事件（[jQuery doc](http://api.jquery.com/load-event/)）以在框架加载时执行某些操作。

```
$("#content").hide();

$("#loadLink").click(function() {
    $("#content").hide();
    $("#content").attr('src', 'http://mysite.com/newpage.html');
});

$("#content").load(function() {
    $(this).slideDown();
}); 
```

在这个例子中，当你点击链接时 iframe 是隐藏的，当它准备好时，它会向下滑动。

[演示](http://jsfiddle.net/XQW3z/1/)

编辑：仍然误读它！

要保存 iframe 中最后显示的页面的状态，您可以使用 HTML5 localStorage。

在 iframe 的加载事件中保存它当前显示的页面。

```
localStorage['lastPage'] = "about.html" 
```

然后使用`localStorage['lastPage']`页面加载将其加载回来。

[更新的演示](http://jsfiddle.net/XQW3z/2/)在刷新后显示了滑动和保持页面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T17:37:47.450

不可能。当您刷新页面时，您的浏览器应该从服务器获取页面，删除所有 JS 数据。

History API 可以提供帮助，但仅适用于最新的浏览器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-08T18:11:12.683

每当页面加载时，您需要检查一些内容以了解最后一个 src iframe 加载的内容。默认情况下，没有浏览器可以知道这一点。一种方法是在点击时更改页面的哈希值，每当页面加载时，您检查是否存在此哈希值并触发一些与哈希值的链接。

我写这个：http: [//jsfiddle.net/estevao_lucas/revsg/4/](http://jsfiddle.net/estevao_lucas/revsg/4/)

正如 Michael 所说，History API 可以帮助您。

# ios - 如何创建类似于 Facebook 应用程序样式的 UITableView 加载数据样式？

> ID：10953466
> 
> 赞同：0
> 
> 时间：2012-06-08T17:33:19.107
> 
> 标签：ios, facebook, uitableview

我想在我的 UITableView 中创建一个加载数据样式，比如 Facebook 应用程序。向下滚动 TableView 数据会在第一行使用旋转轮重新加载。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T22:03:00.447

我喜欢 SVPullToRefresh - [https://github.com/samvermette/SVPullToRefresh](https://github.com/samvermette/SVPullToRefresh)。它比 EGO 项目更简洁，并且还内置了无限滚动功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T17:44:04.667

有许多示例项目展示了如何进行“拉动刷新”。这里只是一个：[http ://cocoacontrols.com/platforms/ios/controls/egotableviewpullrefresh](http://cocoacontrols.com/platforms/ios/controls/egotableviewpullrefresh)

# android - Android 3 微调器

> ID：10953470
> 
> 赞同：0
> 
> 时间：2012-06-08T17:33:43.567
> 
> 标签：android

首先我是新手。我已经完成了如何创建微调器的示例，并且我已经在此站点和 Internet 上搜索了如何创建多个微调器，其中第二个微调器中的列表依赖于第一个微调器和第三个微调器列表依赖在第 2 次选择时。但是我在任何地方都找不到教程或解决方案。

有人可以就如何做到这一点提供一些帮助（教程会很棒:)）

基本上，Spinner1 中的列表可能是“制造商”，在选择时会在 Spinner2 中生成“模型”列表，并从 Spinner2 中的模型选择中生成 Spinner3 中的“问题”列表。

任何帮助都会很棒，

先谢谢了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T17:39:09.507

[看这里这个演示有两个 Spinner 并且可以工作](http://samir-mangroliya.blogspot.in/p/android-spinner-tutorial.html)

所以`onItemSelected method you can check your fisrt,second,third spinner value and set as per your requires.`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-05-17T13:19:47.060

```
import android.support.v7.app.AppCompatActivity;
import android.os.Bundle;
import android.view.View;
import android.widget.AdapterView;
import android.widget.ArrayAdapter;
import android.widget.Spinner;
import android.widget.Toast;

public class MainActivity extends AppCompatActivity {

    Spinner spinner1,spinner2,spinner3;

    public static final String AP_DISTRICTS = "Andhra Pradesh";
    public static final String TN_DISTRICTS = "Tamil Nadu";
    public static final String TG_DISTRICTS = "Telangana";
    public static final String VC_DISTRICTS = "Victoria";
    public static final String TS_DISTRICTS = "Tasmania";
    public static final String QL_DISTRICTS = "Queens Land";
    public static final String KR_DISTRICTS = "Karachi";
    public static final String LH_DISTRICTS = "Lahore";
    public static final String SI_DISTRICTS = "Sindh";

    public static final String SELECT_COUNTRY = "--Select Country--";
    public static final String SELECT_STATE = "--Select State--";
    public static final String SELECT_DISTRICT = "--Select District--";

    String[] country = {SELECT_COUNTRY, "India", "Australia", "Pakistan"};

    String[] indiaStates = {SELECT_STATE, AP_DISTRICTS, TN_DISTRICTS, TG_DISTRICTS};
    String[] australiaStates = {"SELECT_STATE", VC_DISTRICTS, TS_DISTRICTS, QL_DISTRICTS};
    String[] pakistanStates = {"SELECT_STATE", KR_DISTRICTS, LH_DISTRICTS, SI_DISTRICTS};

    String[] apDistricts = {SELECT_DISTRICT, "Nellore", "Chittoor", "Prakasam"};
    String[] tnDistricts = {SELECT_DISTRICT, "Chennai", "Thiruvallur", "Kanchipuram"};
    String[] tgDistricts = {SELECT_DISTRICT, "Hyderabad", "Secunderabad", "Ranga Reddy"};

    String[] vicDistricts = {SELECT_DISTRICT, "Ballarat South", "Ballarat North", "Ballarat East"};
    String[] tsDistricts = {SELECT_DISTRICT, "Tasmania East", "Tasmania West", "Tasmania South"};
    String[] qsDistricts = {SELECT_DISTRICT, "Queens Land East", "Queens Land West", "Queens Land North"};

    String[] krDistricts = {SELECT_DISTRICT, "Karachi East", "Karachi North", "Karachi South"};
    String[] lhDistricts = {SELECT_DISTRICT, "Lahore South", "Lahore East", "Lahore North"};
    String[] siDistricts = {SELECT_DISTRICT, "Sindh West", "Sindh North", "Sindh East"};

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.activity_main);

        spinner1 = (Spinner) findViewById(R.id.spinner_item1);
        spinner2 = (Spinner) findViewById(R.id.spinner_item2);
        spinner3 = (Spinner) findViewById(R.id.spinner_item3);

        spinner1.setSelection(0);
        spinner2.setSelection(0);
        spinner3.setSelection(0);

        setSpinner(spinner1, country);
        setSpinner(spinner2, indiaStates);
        setSpinner(spinner3, apDistricts);

        ArrayAdapter<String> adapter = new ArrayAdapter<String>(this, android.R.layout.simple_spinner_item, country);
        adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
        spinner1.setAdapter(adapter);

        spinner1.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() {
            @Override
            public void onItemSelected(AdapterView<?> adapterView, View view, int i, long l) {

                switch (i){

                    case 0:
                        Toast.makeText(MainActivity.this, "please Select Country", Toast.LENGTH_SHORT).show();
                        spinner1.setSelection(0);
                        spinner2.setSelection(0);
                        spinner3.setSelection(0);

                        break;

                    case 1:
                        setSpinner(spinner2, indiaStates);
                        break;

                    case 2:
                        setSpinner(spinner2, australiaStates);
                        break;

                    case 3:
                        setSpinner(spinner2, pakistanStates);
                        break;
                }
            }

            @Override
            public void onNothingSelected(AdapterView<?> adapterView) {

            }
        });

        spinner2.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() {
            @Override
            public void onItemSelected(AdapterView<?> adapterView, View view, int i, long l) {

                String selectedItem = adapterView.getSelectedItem().toString();

                if (spinner1.getSelectedItemPosition() == 0) {

                    Toast.makeText(MainActivity.this, "please Select Country", Toast.LENGTH_SHORT).show();

                     spinner2.setSelection(0);
                     spinner3.setSelection(0);
                    return;

                }
                if (i == 0){
                    spinner3.setSelection(0);
                    return;
                }

                switch (selectedItem){

                    case  AP_DISTRICTS:
                        setSpinner(spinner3, apDistricts);
                        break;

                    case TN_DISTRICTS :
                        setSpinner(spinner3, tnDistricts);
                        break;

                    case TG_DISTRICTS:
                        setSpinner(spinner3, tgDistricts);
                        break;

                    case VC_DISTRICTS:
                        setSpinner(spinner3, vicDistricts);
                        break;

                    case TS_DISTRICTS:
                        setSpinner(spinner3, tsDistricts);
                        break;

                    case QL_DISTRICTS:
                        setSpinner(spinner3, qsDistricts);
                        break;

                    case KR_DISTRICTS:
                        setSpinner(spinner3, krDistricts);
                        break;

                    case LH_DISTRICTS:
                        setSpinner(spinner3, lhDistricts);
                        break;

                    case SI_DISTRICTS :
                        setSpinner(spinner3, siDistricts);
                        break;

                }
            }

            @Override
            public void onNothingSelected(AdapterView<?> adapterView) {

            }
        });

        spinner3.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() {
            @Override
            public void onItemSelected(AdapterView<?> adapterView, View view, int i, long l) {
                if (spinner2.getSelectedItemPosition() == 0 || spinner1.getSelectedItemPosition() == 0) {
                    Toast.makeText(MainActivity.this, "please Select State", Toast.LENGTH_SHORT).show();
                    spinner2.setSelection(0);
                    spinner3.setSelection(0);
                }
            }

            @Override
            public void onNothingSelected(AdapterView<?> adapterView) {

            }
        });

    }

    private void setSpinner(Spinner spinner2, String[] states) {

        ArrayAdapter<String> adapter = new ArrayAdapter<String>(this, android.R.layout.simple_spinner_item, states);
        adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item); // Specify the layout to use when the list of choices appears
        spinner2.setAdapter(adapter);
    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T21:32:22.563

这直接来自我的一个应用程序（实际上是我写的第一个应用程序），所以它不漂亮但它有效

```
package com.skyesmechanical.OilProductionLogApp;

import android.app.Activity;
import android.app.AlertDialog;
import android.database.Cursor;
import android.database.SQLException;
import android.os.AsyncTask;
import android.os.Bundle;
import android.view.View;
import android.widget.AdapterView;
import android.widget.ArrayAdapter;
import android.widget.Spinner;
import android.widget.TextView;
import android.widget.AdapterView.OnItemSelectedListener;
import android.widget.Toast;

import java.io.IOException;

public class test extends Activity {

    /** Called when the activity is first created. */
    public String spinnerPipeLengthText = "";
    public String spinnerNaturalGasText = "";
    public String spinnerPropaneGasText = "";
    public Spinner spinnerPipeLength;
    public Spinner spinnerTypeGas;
    public Spinner spinnerSupplyPressure;
    public static Integer spinnerPipeLengthInt = 0;
    public static Integer spinnerTypeGasInt = 0;
    public static Integer spinnerPropaneGasInt = 0;
    public static Integer spinnerSupplyPressureInt = 0;
    public static Integer finalRow = 0;
    public boolean supplyPressureVisible = false;
    public boolean pipeLengthVisible = false;

    static TextView textViewSize15;
    static TextView textViewSize19;
    static TextView textViewSize25;
    static TextView textViewSize31;
    static TextView textViewSize37;
    static TextView textViewSize46;
    static TextView textViewSize62;
    static TextView textViewSupplyPressure;
    static TextView textViewSelectPipeLength;

    public static Integer baseTableRowNumber = 0;   
    public static Cursor cursorResult;
    // these to int's keep a false Toast message from appearing
    private int intSpinnerCountGas = 0;
    private int intSpinnerCountSupply = 0;
    private int intSpinnerCountLength = 0;
    private static final int NO_OF_EVENTS_GAS = 1;
    private static final int NO_OF_EVENTS_SUPPLY = 1;
    private static final int NO_OF_EVENTS_LENGTH = 1;

    @Override
    public void onCreate (Bundle state) { 
        super.onCreate(state);
        setContentView(R.layout.main);
        //check if app just started or is being restored from memory
        if (state != null )  { 
            //app is being restored from memory, not executed from scratch
            //initialize the fields to the last used;
            supplyPressureVisible = state.getBoolean("supplyPressureVisible");
            pipeLengthVisible = state.getBoolean("pipeLengthVisible");
            spinnerTypeGasInt = state.getInt("spinnerTypeGasInt");
            spinnerSupplyPressureInt = state.getInt("spinnerSupplyPressureInt");
            spinnerPipeLengthInt = state.getInt("spinnerPipeLengthInt");
            finalRow = state.getInt("finalRow");

            Toast.makeText(getApplicationContext(), "savedInstanceState != null", Toast.LENGTH_LONG).show();

        }  //end if
        // call doInBackground
        new LoadDataBaseTask().doInBackground();        

        mainProgram ();
    } // end onCreate

    // performs database query outside GUI thread
    private class LoadDataBaseTask extends AsyncTask<Object, Object, Cursor> {
        DataBaseHelper myDbHelper = new DataBaseHelper(CSSTPipeSizingActivity.this);
        // perform the database access
        @Override
        protected Cursor doInBackground (Object... params) {
            try {
                myDbHelper.createDataBase();
            } 
            catch (IOException ioe) {
                throw new Error("Unable to create database");
            }
            try {
                myDbHelper.openDataBase();
            }
            catch(SQLException sqle) {
                throw sqle;
            }
            return myDbHelper.getData(); 
        } // end method doInBackground

        // use the Cursor returned from the doInBackground method
        @Override
        protected void onPostExecute(Cursor result) {
            //myDbHelper.changeCursor(result); // set the adapter's Cursor
            myDbHelper.close();
        } // end method onPostExecute
    } // end class LoadDataBaseTask 

    public void mainProgram () {
        spinnerTypeGas = (Spinner) findViewById(R.id.spinnerTypeGas);
        spinnerSupplyPressure = (Spinner) findViewById(R.id.spinnerSupplyPressure);
        spinnerPipeLength = (Spinner) findViewById(R.id.spinnerPipeLength);

        spinnerSupplyPressure.setVisibility(View.INVISIBLE);
        textViewSelectPipeLength.setVisibility(View.INVISIBLE);
        spinnerPipeLength.setVisibility(View.INVISIBLE);

        if (supplyPressureVisible == true) spinnerSupplyPressure.setVisibility(View.VISIBLE);
            else spinnerSupplyPressure.setVisibility(View.INVISIBLE);
        if (pipeLengthVisible == true) spinnerPipeLength.setVisibility(View.VISIBLE);
            else spinnerPipeLength.setVisibility(View.INVISIBLE);

        //Sets up the spinnerTypeGas spinner
        ArrayAdapter<CharSequence> adapterTypeGas = ArrayAdapter.createFromResource(
                this, R.array.TypeGas, android.R.layout.simple_spinner_item);
        adapterTypeGas.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
        spinnerTypeGas.setAdapter(adapterTypeGas);

        //Sets up the spinnerPipeLength spinner 
        ArrayAdapter<CharSequence> adapterPipeLength = ArrayAdapter.createFromResource(
                this, R.array.PipeLength, android.R.layout.simple_spinner_item);
        adapterPipeLength.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
        spinnerPipeLength.setAdapter(adapterPipeLength);

        // Listens for changes in the selected item in each spinner 
        spinnerTypeGas.setOnItemSelectedListener(new GASOnItemSelectedListener());
        spinnerSupplyPressure.setOnItemSelectedListener(new SupplyOnItemSelectedListener());
        spinnerPipeLength.setOnItemSelectedListener(new MyOnItemSelectedListener());
    }  // end mainProgram

    public void SpinnerNatGas() {
        ArrayAdapter<CharSequence> adapterSupplyPressure = ArrayAdapter.createFromResource(
                this, R.array.NaturalGas, android.R.layout.simple_spinner_item);
        adapterSupplyPressure.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
        spinnerSupplyPressure.setAdapter(adapterSupplyPressure);
        adapterSupplyPressure.notifyDataSetChanged();
    } // end SpinnerNatGAs ()

    public void SpinnerProGas () {
        ArrayAdapter<CharSequence> adapterSupplyPressure = ArrayAdapter.createFromResource(
                this, R.array.PropaneGas, android.R.layout.simple_spinner_item);
        adapterSupplyPressure.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
        spinnerSupplyPressure.setAdapter(adapterSupplyPressure);
        adapterSupplyPressure.notifyDataSetChanged();
    } // end SpinnerProGAs ()

    public class GASOnItemSelectedListener implements OnItemSelectedListener {
        public void onItemSelected(AdapterView<?> arg0, View arg1, int arg2, long arg3) {
            // this prevents false firing of Toast messages 
            if (intSpinnerCountGas < NO_OF_EVENTS_GAS) {
                intSpinnerCountGas++;
            } // end if 
            else {                
                spinnerTypeGasInt = spinnerTypeGas.getSelectedItemPosition();
                if(spinnerTypeGasInt == 1) {
                    //populate spinnerSupplyPressure accordingly
                    SpinnerNatGas();
                } // end if
                else if(spinnerTypeGasInt == 2) {
                    //populate spinnerSupplyPressure accordingly
                    SpinnerProGas();
                } // end else if
                if (spinnerTypeGasInt != 0) {
                    spinnerSupplyPressure.setVisibility(View.VISIBLE);
                    textViewSupplyPressure.setVisibility(View.VISIBLE);
                    spinnerSupplyPressure.setSelection(0);
                    spinnerPipeLength.setSelection(0);
                    supplyPressureVisible = true;
                } // end else if
                else {
                    spinnerSupplyPressure.setVisibility(View.INVISIBLE);
                    textViewSupplyPressure.setVisibility(View.INVISIBLE);
                    textViewSelectPipeLength.setVisibility(View.INVISIBLE);
                    spinnerPipeLength.setVisibility(View.INVISIBLE);
                    supplyPressureVisible = false;
                    pipeLengthVisible = false;
                }// end else
            }// end if for false Toast message at app launch
        } // end onItemSelected

        public void onNothingSelected(AdapterView<?> arg0) {
                // nothing to do
        } // end onNothingSelected
    } // end class GASOnItemSelectedListener 

    public class SupplyOnItemSelectedListener implements OnItemSelectedListener {
        public void onItemSelected(AdapterView<?> arg0, View arg1, int arg2, long arg3) {
            // this prevents false firing of Toast messages 
            if (intSpinnerCountSupply < NO_OF_EVENTS_SUPPLY) {
                intSpinnerCountSupply++;
            } // end if 
            else {                
                spinnerSupplyPressureInt = spinnerSupplyPressure.getSelectedItemPosition();
                if (spinnerSupplyPressureInt != 0) {
                    textViewSelectPipeLength.setVisibility(View.VISIBLE);
                    spinnerPipeLength.setVisibility(View.VISIBLE);
                    pipeLengthVisible = true;
                    spinnerPipeLength.setSelection(0);
                } // end if
                else {
                    textViewSelectPipeLength.setVisibility(View.INVISIBLE);
                    spinnerPipeLength.setVisibility(View.INVISIBLE);
                    pipeLengthVisible = false;
                } // end else
            }// end if for false Toast message at app launch
        } // end onItemSelected

        public void onNothingSelected(AdapterView<?> arg0) {
                // nothing to do
        } // end onNothingSelected
    } // end class SupplyOnItemSelectedListener

    public class MyOnItemSelectedListener implements OnItemSelectedListener {
        public void onItemSelected(AdapterView<?> arg0, View arg1, int arg2, long arg3) {
            if (intSpinnerCountLength < NO_OF_EVENTS_LENGTH) {
                intSpinnerCountLength++;
            } // end if 
            else {
                // This also gives the Row to look in the database for the CFH
                baseTableRowNumber = 0;
                spinnerPipeLengthInt = spinnerPipeLength.getSelectedItemPosition();
                //spinnerPipeLengthText = spinnerPipeLength.getSelectedItem().toString();
                // calculates the base table row number and stores it in variable baseTableRowNumber
                if (spinnerTypeGasInt == 1) {// Natural Gas is selected
                    baseTableRowNumber = (spinnerSupplyPressureInt - 1) * 18;
                }
                else if (spinnerTypeGasInt == 2) { // Propane is selected
                    baseTableRowNumber = 198 + (spinnerSupplyPressureInt - 1) * 18;
                } // end else if
                showResults();
            } // end else for check if firing at inializing
        } // end onItemSelected

        public void onNothingSelected(AdapterView<?> arg0) {
            // nothing to do
        } // end onNothingSelected 
    } // end class MyOnItemSelectedListener

    public void showResults () {
        if (CSSTPipeSizingActivity.cursorResult != null) { 
            finalRow = (baseTableRowNumber + spinnerPipeLengthInt);
            if (finalRow < 0) {
                finalRow = 0;
            }
            if (finalRow == 0) {
                textViewSize15.setText(String.valueOf("0"));
                textViewSize19.setText(String.valueOf("0"));
                textViewSize25.setText(String.valueOf("0"));
                textViewSize31.setText(String.valueOf("0"));
                textViewSize37.setText(String.valueOf("0"));
                textViewSize46.setText(String.valueOf("0"));
                textViewSize62.setText(String.valueOf("0"));                
            } // end if
            else {
                cursorResult.moveToPosition(finalRow);
                textViewSize15.setText(String.valueOf(cursorResult.getInt(1)));
                textViewSize19.setText(String.valueOf(cursorResult.getInt(2)));
                textViewSize25.setText(String.valueOf(cursorResult.getInt(3)));
                textViewSize31.setText(String.valueOf(cursorResult.getInt(4)));
                textViewSize37.setText(String.valueOf(cursorResult.getInt(5)));
                textViewSize46.setText(String.valueOf(cursorResult.getInt(6)));
                textViewSize62.setText(String.valueOf(cursorResult.getInt(7)));
            } // end else 
        } // end if
    } //end showResults
} // end class CSSTPipeSizingActivity 
```

在 mainProgram() 方法的前三行中，我声明了三个微调器，然后开始填充它们。当用户从 spinnerTypeGas 中选择一个选项时，下一个微调器 (spinnerSupplyPressure) 变得可见。然后当用户从该 spinnerSupplyPressure 中选择一个项目时，第三个微调器 (spinnerPipeLenght) 变为可见。然后显示从数据库检索的数据。每个微调器从 string.xml 文件中获取其数组列表

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-08T17:42:00.823

您可以通过处理`onItemSelected`事件来做到这一点。您可以将数据存储在数据库或数组中，并且在选择时您可以在特定微调器中填充特定数组。

# xml - 遍历 xml 中的重复标签

> ID：10953471
> 
> 赞同：-2
> 
> 时间：2012-06-08T17:33:45.470
> 
> 标签：xml, xslt

我有一个这样的 xml 元素：

```
<book>
    <English color="blue" author="hasan" />
    <English color="red" author="david" />
</book> 
```

是否可以使用 xslt 遍历它并产生如下所示的输出？

```
<book>
    <English color="yellow" author="hally" />
    <English color="pink" author="gufoo" />
</book> 
```

这是我正在尝试的一个；

```
<xsl:template match = /book> 
  <xsl:for-each select "./English"> 
    <xsl:if test="@color = '"yellow"'"> 
    <English color="yellow"/> 
    <xsl:if test="@color = '"red"'"> 
    <English color="pink"/> 
  </xsl:for-each> 
 </xsl-template> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T18:29:25.810

试试下面的样式表。我摆脱了 xsl:for-each 元素，因为我认为这样做更简单。此外，在像 XSL 这样的声明性语言中使用 foreach 循环对我来说似乎不合适。我更愿意将这些留给命令式语言。

有许多不同的方法可以实现这样的结果。您应该花一些时间来尝试修改它并进行一些实验。作为练习，您可以删除 if 语句并尝试使用模板和谓词来获得类似的结果。在这样做之前，您可能必须阅读一些有关 XSL 的教程。

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0"
xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

  <!-- Copy every element or attribute encountered 
       and find matching templates for its attributes
       and child elements 
   -->
  <xsl:template match="@*|*">
    <xsl:copy>
      <xsl:apply-templates select="@*|*"></xsl:apply-templates>
    </xsl:copy>
  </xsl:template>

  <!-- For every attribute named "color" that has a value of red or blue, 
  follow the conditions defined in if blocks.
  Notice that the specified color attributes will not be copied according
  to the template above as the one selected is always the last
  matching one in your XSL.
  This way both the "author" attributes and "color" attributes with values
  different than red and blue will be matched by the other template.
  The dot "." means the currently processed node (usually element or attribute) 
  -->
  <xsl:template match="@color[. = 'blue' or . = 'red']">
   <xsl:attribute name="color">
     <xsl:if test=". = 'blue'">yellow</xsl:if>
     <xsl:if test=". = 'red'">pink</xsl:if>
   </xsl:attribute>
  </xsl:template> 
```

# javascript - 传递参数数组

> ID：10953474
> 
> 赞同：2
> 
> 时间：2012-06-08T17:34:01.710
> 
> 标签：javascript, functional-programming

我试图让一个函数传递一个函数并用一组参数调用它。例如：

```
function foo(func, args) {
  return func(args);
} 
```

但是，我不知道 args 中可能有多少个元素，并且 func 应该能够是一个任意函数，可以接受任意数量的 args。我该如何处理？

还说我想存储传递给 foo 的函数，并且只有在之前没有调用过它们时才调用它们。

我可以做类似的事情：

```
var calledFuncs = [];
function foo(func, args) {
  if(calledFuncs.indexOf(func) === -1) {
    calledFuncs.push(func);
    return func(args);
  }
} 
```

谢谢，我对 JavaScript 中的函数式编程有点陌生。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-08T17:35:41.563

您正在寻找`func.apply`：

*   第一个参数是上下文又名`this`值。你不想改变这个，所以通过它。
*   第二个参数是一个包含参数的数组，它当然可以是动态长度的。

所以你可以这样做：

```
return func.apply(this, args); 
```

你似乎对你的第二个问题有很好的方法（`func(args)`替换）。但是，您可能希望存储被调用函数的返回值，因为`foo`现在返回`undefined`除第一个调用之外的任何调用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T17:35:33.067

使用[`apply`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/apply)：

```
func.apply(this, args); 
```

`apply`将参数数组作为第二个参数。

的第一个参数`apply`将是`this`您正在调用的函数范围内的值。所以你可以传入当前的`this`或任何你想要的东西。

~~就您的第二个问题而言，这仅适用于命名函数。您可以使用`func.name`将函数名称存储在数组中：~~

 ~~```
var calledFuncs = [];
function foo(func, args) {
   if(calledFuncs.indexOf(func.name) === -1) {
      calledFuncs.push(func.name);
      return func(args);
   }
} 
```~~ 

这不适用于匿名函数，也不适用于 IE 或 Opera 中的命名函数。你将不得不解析它，也许像这样：

```
var name = func.toString().replace(/\n/g, "").replace(/\s*\(.*$/, "").replace(/^\s*function\s+/, ""); 
```

 ~~至于你的第二个问题，你可以做你现在正在做的事情。但我认为它不适用于以下情况：

```
foo(function() {
}, []);

foo(function() {
}, []); 
```

它将调用这两个函数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-08T17:35:23.110

你想要[`Function.prototype.apply`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/apply)：

```
func.apply(this,args); 
```

将上下文（第一个参数）设置为您想要的任何内容，包括`null`获取`window`全局（就像您在当前`func(...)`调用中获得的那样。

*虽然与您的问题没有直接关系，但另请参阅[`Function.prototype.call`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/Call)允许您类似地设置上下文但传递显式参数的相关方法。*~~

# mysql - 如何在 MySQL 中创建正确的外连接

> ID：10953476
> 
> 赞同：0
> 
> 时间：2012-06-08T17:34:08.770
> 
> 标签：mysql, sql, hibernate, jpa

我正在使用 JPA、Hibernate、MySQL。

我有两个表 Upload，UploadRating。每个上传可以在 UploadRating 表中具有多个评级，即 OneToMany。UploadRating 有一个属性 user ，它定义了对上传进行评分的用户。

现在我想知道用户不存在 UploadRating 的所有上传。所以查询类似于：

```
from Upload up,  UploadRating  ur where ur.upload=up and ur.user != :usrId 
```

我知道上述查询存在缺陷。在这种情况下，我们需要使用外连接。有人可以帮我查询。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T18:03:42.927

在 SQL 中，您可以使用：

```
select 
  * 
from 
  Upload up 
where 
  not exists (select * from UploadRating ur where ur.upload_id=up.id and ur.user = :usrId) 
```

假设这`upload_id`是包含每个上传的唯一 ID 的上传评级列。

使用连接的等效 SQL 将是这样的：

```
select 
  * 
from 
  Upload up 
  left outer join UploadRating ur on ur.upload_id=up.id
where 
  (ur.user <> :usrId) or (ur.user is null) 
```

# android - 我可以抛出我自己的严格模式违规 [on Android] 吗？

> ID：10953477
> 
> 赞同：3
> 
> 时间：2012-06-08T17:34:13.390
> 
> 标签：android

我有一个只能在后台线程中运行的助手类。如果它在主线程上运行，有没有办法可以利用 StrictMode 组件并抛出我自己的 StrictMode 违规？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T17:14:06.757

从 API 11 开始，看起来最好的选择是使用 ThreadPolicy.Builder 来[检测CustomSlowCalls()](http://developer.android.com/reference/android/os/StrictMode.ThreadPolicy.Builder.html#detectCustomSlowCalls%28%29)。在后台线程中，您可以通过调用[StrictMode.noteSlowCall()](http://developer.android.com/reference/android/os/StrictMode.html#noteSlowCall%28java.lang.String%29)将该方法标记为“慢” 。

这显然意味着如果违规方法执行时间过长，将引发 StrictMode 违规。

# c++ - 如何在布局中调整 QWidget 的大小，同时将其与中心对齐并保持纵横比

> ID：10953479
> 
> 赞同：1
> 
> 时间：2012-06-08T17:34:17.607
> 
> 标签：c++, qt, alignment, qwidget, qgridlayout

好的，所以我想用 qt 显示图像，其中图像随浏览器调整大小并保持纵横比，同时保持在窗口的中心。我可以使用纵横比调整大小以正常工作，但是当我将其与 Qt::AlignCenter 对齐时，qwidget 不再调整大小（保持固定大小）。所以基本上，我可以选择工作但不能一起工作。

我正在尝试做的一个很好的例子是 matlab 中的 imshow() 函数。这会在保持纵横比的同时调整图像大小，并将图像在窗口中居中。我的代码是这样的：

```
void roilayout::resizeEvent(QResizeEvent *event)
{
    QSize p(roiview->refimage->size());
    p.scale(roiview->view->size(), Qt::KeepAspectRatio);
    roiview->view->resize(p);   
} 
```

在构造函数中：

```
roiview = new roiwindow;
roiview->view->setViewportUpdateMode(QGraphicsView::FullViewportUpdate);
roiview->view->setCursor(Qt::CrossCursor);
roiview->view->setHorizontalScrollBarPolicy(Qt::ScrollBarAlwaysOff);
roiview->view->setVerticalScrollBarPolicy(Qt::ScrollBarAlwaysOff);

QHBoxLayout *layoutContainer = new QHBoxLayout;
layoutContainer->addWidget(roiview->view);
setLayout(layoutContainer); 
```

我搜索了谷歌，找不到任何东西。不久前还问了一个类似的问题，但从答案看来，我没有足够清楚地问这个问题。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T00:55:20.583

有几件事：首先了解什么类型的控件“视图”是有帮助的。另外，我认为您不需要在父级的 resizeEvent() 回调中调整子控件“视图”（无论是什么类型）的大小。

更好的解决方案可能是将子小部件上的 sizeHint 策略设置为自动扩展。

# asp.net - 单击建议时，AJAX 工具包 AutoCompleteExtender 不会自动回发

> ID：10953480
> 
> 赞同：1
> 
> 时间：2012-06-08T17:34:18.853
> 
> 标签：asp.net, autopostback, autocompleteextender

很不言自明。我在更新面板中有一个文本框，它会在输入完整条目时自动回发，但在从 AutoCompleteExtender 中选择选项时不会回发。关于为什么这不起作用或可能的解决方法的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T15:59:30.753

终于找到了解决办法。您必须将自动完成扩展器的 OnClientItemSelected 设置为 javascript 函数，然后从所述函数调用 __doPostBack。

```
function OnJobSelected(source, eventArgs)
        {

            var SourceID = source.get_element().id
            __doPostBack(SourceID, "");
        } 
```

# php - JS和PHP复杂数据之间的桥梁

> ID：10953482
> 
> 赞同：1
> 
> 时间：2012-06-08T17:34:23.390
> 
> 标签：php, javascript, data-binding

我需要构建一个复杂的控制面板。

它必须由用户配置，并且在他进行了任意数量的更改后，他提交它们并显示新配置的报告。

现在有很多可能的配置选项，JS 必须能够绘制控制元素/用值初始化它们，PHP 必须执行业务逻辑——所有这些都基于给定的配置对象——**并且**两者都必须能够更改将对象传递到另一侧之前的选项。

现在显而易见的解决方案是在两边都有预定义的配置对象：

PHP：

```
 class config {
     public $anArray = array();
 } 
```

JS：

```
 {
     anArray : []
 } 
```

双方可以通过`json_encode`和进行流利的交流`$.parseJSON`。

但是，两个实体的结构必须匹配，我不知道如何确保这一点。有没有人对如何在这两种技术之间交流复杂的数据结构有任何想法？

**编辑**：澄清一下，结构是指两个对象的属性：对象本身是一个简单的配置包装器，因此它没有私有属性、方法等，只有标量或简单索引数组的公共字段。

所以我想要一个以 DRY 方式开发它的解决方案：如果我想添加一个名为“paginationEnabled”的字段，它应该同时出现在 JS 和 PHP 对象中：

PHP：

```
 class config {
     public $anArray = array();
     public $paginationEnabled = true;
 } 
```

JS：

```
 {
     anArray : [],
     paginationEnabled : true
 } 
```

我可以在两边分别实现它们，但它不会是 DRY（在这种情况下很糟糕），我可以感觉到必须有一个解决方案，我只是想不出一个。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T20:07:26.983

最简单的解决方案是在对服务器的每个请求以及服务器返回的每个页面中都包含整个 JSON 编码的对象结构。无论如何，这将是必要的，因为 PHP 和 JavaScript 在页面加载之间都不会持续存在（除非您使用 AJAX，否则只会使 JavaScript 持续存在）。

当然，这仅在数据已经采用可以 JSON 编码的形式时才有效。（数组和简单对象可以编码到任何深度，但不是非平凡类、文件句柄或函数的对象。）如果不是，那么您需要将其转换为一个，然后在另一端转换回 -例如，如果一个对象的类很重要，那么首先需要确保在另一端存在对应的类，然后可以用`{class: $class, value: $value}`- 指示所需的类名，并在另一端添加代码找到该构造并重建所需类的对象。如果您需要复制函数，那么如果您将所有函数存储为 JavaScript，并在 PHP 中包含一个 JavaScript 解释器库，那么这可能是可以管理的。然而，这可能比它的价值更麻烦。

如果 JSON 对象太大而无法在每个请求上发送，那么您只能将其存储在数据库中（以适合数据库的形式）并在 JavaScript 端发生更改时使用 AJAX 更新数据库，或者检索客户端代码还没有的对象的任何部分。

# java - 如何阻止 JTextField 在 GridLayout 中重新调整大小

> ID：10953484
> 
> 赞同：3
> 
> 时间：2012-06-08T17:34:25.780
> 
> 标签：java, swing, layout, layout-manager

我正在创建一个带有网格布局的 GUI。我已直接向其中添加了 JTextFields、JButtons 和所有内容。例如，像这样，

```
JButton b1 = new JButton("Hello"):
JButton b2 = new JButton("Bye");
JTextField t1 = new JTextField(10);
JTextField t2 = new JTextField(10);

GridLayout grid = new GridLayout(2,2,2,2);

JPanel panel = new JPanel();
panel.setLayout(grid);
panel.add(b1);
panel.add(t1);
panel.add(b2);
panel.add(t2); 
```

在这里，如果用户调整窗口大小，一切都会显得非常大。我知道防止这些获得这些的唯一另一种方法是将所有所有内容添加到具有 FlowLayout 的单独 JPanel 中。但这不切实际，因为如果有 20 个东西，就会有 20 个 JPanel。我尝试设置最大尺寸，最小尺寸和所有，他们没有改变任何。请帮忙。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-08T17:38:52.230

1.  [普通的GridLayout](http://docs.oracle.com/javase/tutorial/uiswing/layout/grid.html)不可能，因为这是此布局管理器的基本功能

2.  使用正确的布局管理器[GridBagLayout](http://docs.oracle.com/javase/tutorial/uiswing/layout/gridbag.html)或今天[的 MigLayout](http://www.miglayout.com/)

3.  非常简单的方法是使用[SpringLayout](http://docs.oracle.com/javase/tutorial/uiswing/layout/spring.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T17:55:51.353

@mKorbel 和 @Logan 在他们的答案中有一点，但如果你出于某种原因真的真的真的需要使用 GridLayout 并且你真的需要 JTextField 保持一定的大小，那么你可以通过将 JTextField 放在 JPanel 中来做到这一点一个边框布局。

```
JTextField fixedWidthField = new JTextField();
JPanel fieldPanel = new JPanel(new BorderLayout());
fieldPanel.add(fixedWidthField, BorderLayout.WEST);

GridLayout grid = new GridLayout(2,2,2,2);

JPanel panel = new JPanel();
panel.setLayout(grid);
panel.add(b1);
panel.add(fieldPanel);
panel.add(b2);
panel.add(t2); 
```

我们都建议您使用更高级的布局管理器。我个人喜欢 TableLayout 但你需要为此下载一个额外的 Jar 文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T17:44:07.597

这是 gridLayout 的默认行为。我不确定阻止它是否容易。我会改用 gridBagLayout 。您可以将每个单元格的填充设置为无。一开始比较困难，但我现在只用它。

# sql-server - 在 SQL Server Management Studio 中，这种类型的查询是否运行得更快？

> ID：10953485
> 
> 赞同：0
> 
> 时间：2012-06-08T17:34:26.867
> 
> 标签：sql-server, database-schema

我的同事向我展示了这个查询来查找某个列：

```
 select * 
 from INFORMATION_SCHEMA.COLUMNS
 where COLUMN_NAME 
 like '%id%' 
```

这是否有助于它运行得更快，使用`.COLUMNS`符号？

多谢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T18:43:10.187

我同意马丁的观点。我更喜欢这个查询：

```
SELECT OBJECT_SCHEMA_NAME(object_id), OBJECT_NAME(object_id), name
  FROM sys.columns
  WHERE name LIKE '%id%'; 
```

我更喜欢的原因`sys.`是`INFORMATION_SCHEMA.`什么？主要是因为 - 虽然`INFORMATION_SCHEMA`视图是标准的 - 它们已经不完整，而且雪上加霜的是，它们没有在新版本的 SQL Server 中采用新功能。[我在这里写了博客](https://sqlblog.org/2011/11/03/the-case-against-information_schema-views)。

但是无论如何，您的问题似乎都缺少一些上下文。您将此与“查找特定列”的其他哪些方法进行比较？

# java - 如何初始化小程序并将其他 jar 添加到类路径？（我的世界自定义启动器）

> ID：10953487
> 
> 赞同：0
> 
> 时间：2012-06-08T17:34:56.340
> 
> 标签：java, applet, minecraft

抱歉标题不好，但基本上我需要做的是从另一个 jar 中以 applet 的形式启动一个 jar。同样对于那些熟悉 Minecraft 的人，我正在制作一个自定义的 Minecraft 启动器。（源码中的stub是AppleStub的子类，有一些自定义参数等）

```
applet.setStub(stub);

this.add(applet);

validate();
this.setVisible(true);

applet.init();
applet.setSize(getWidth(), getHeight());

applet.start(); 
```

我当前的代码是否有效，唯一的问题是我得到了这个异常：

```
Exception in thread "AWT-EventQueue-0" java.lang.NoClassDefFoundError: 
    org/lwjgl/LWJGLException 
```

发生这种情况是因为我启动的 jar 依赖于 LWJGL，它不起作用。我已经这样做了：

```
System.setProperty("org.lwjgl.librarypath", natives.getAbsolutePath());
System.setProperty("net.java.games.input.librarypath", natives.getAbsolutePath()); 
```

哪个应该修复错误，但似乎没有（natives 只是 natives 文件夹的文件实例）。

原版的 Minecraft Launcher 几乎完全相同并且运行良好，但事实并非如此。有谁知道我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T18:51:37.583

看起来包含该`org.lwjgl`库的 JAR 不是启动器类路径的一部分。您可能需要在`org.lwjgl`启动启动器时指定 JAR 的位置。就像是：

```
java -classpath "path/to/lwjgl.jar" com.foo.MyLauncher 
```

# html - iPad 3 Webapp 在移动 Safari 中崩溃

> ID：10953489
> 
> 赞同：3
> 
> 时间：2012-06-08T17:35:01.863
> 
> 标签：html, css, crash, ipad-3

几天来，我一直在调试我们的网络应用程序，但我不确定是什么导致它在移动 Safari 中崩溃。该应用程序在 iPad2 上运行良好，但由于某种原因它在 iPad3 上崩溃。我注释掉了每一段代码，问题似乎是元素上的绝对定位。这是我的部分代码。

```
.page .main-content .study-bo {
   background: #F4F4F4;
   border-top: 1px solid #D1D1D1;
   border-bottom: 1px solid #D1D1D1;
   width: 644px;
   position: absolute;
   top: 501px;
   left: 0px;
   padding: 30px 40px;
   z-index:500;
   -webkit-transition: top .5s ease-in-out;
}   
.page .main-content .study-bo .text {
    width: 100%;
    height: 100%;
    position: relative;
    left:auto;
}
.page .main-content .study-bo p {
   font-family: "FrutigerRoman";
   font-size: 12px;
   color: #000000;
   margin-bottom: 15px;
}
.page .main-content .study-bo .study-design {
   width: 92px;
   height: 20px;
   background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,rgba(199, 199, 199, 1)), color-stop(100%,rgba(167, 167, 167, 1)));
   -webkit-border-radius: 5px 5px 0px 0px;
   border: 1px solid #999;
   font-family: "FrutigerItalic";
   font-size: 13px;
   color: white;
   text-shadow: 1px 1px 0px #8E8E8E;
   filter: dropshadow(color=#8e8e8e, offx=1, offy=1);
   text-align: center;
   padding-top: 4px;
   -webkit-box-shadow: inset 0px 1px 0px 0px #e5e4e4;
   position: absolute;
   top: -26px;
   font-style: italic;
   z-index: 50;
   left: 44px;
}
.page .main-content .study-bo .study-design .btn.active {
   background: #6c6a6a;
   text-shadow: 1px 1px 0px #434343;
   filter: dropshadow(color=#434343, offx=1, offy=1);
   -webkit-box-shadow: inset 0px 1px 0px 0px #9e9d9d;
} 
```

导致应用程序崩溃的代码部分是：

```
 position: absolute;
   top: 501px;
   left: 0px; 
```

我不确定这是否是苹果错误？我有多个绝对定位的元素，没有问题。如果我注释掉这三行（而且只有这三行），该应用程序就可以工作。我已经尝试注释掉我的代码的其他部分并保留这三行，但它不起作用。有人有什么建议吗？？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T15:19:48.907

这*可能*是一个错误，但如果不亲眼看到和探索 web 应用程序，就很难说。我会尝试摆弄布局以尝试：

*   获得相对定位，而不是绝对定位，
*   在顶部和左侧属性中使用百分比而不是像素，
*   使用 float:left 或 float:right，使用边距或填充，而不是绝对定位，
*   在你的其他 CSS 之前应用 CSS 重置/规范化器，比如[normalize.css](http://necolas.github.com/normalize.css/)，看看这是否能神奇地解决问题，
*   或者作为最后的手段，寻找一种不会强迫您在此处使用绝对定位的替代布局。

这些都是在黑暗中拍摄的，但也许它们会有所帮助。

# algorithm - 模型检查 Paxos

> ID：10953498
> 
> 赞同：2
> 
> 时间：2012-06-08T17:35:53.600
> 
> 标签：algorithm, distributed-system, paxos, model-checking, consensus

我已经实现了共识算法（基于 Paxos）。我添加了一些随机测试用例，看起来不错。但是想通过模型检查进行测试？找不到正确的文章。请分享如何在 Paxos 中进行模型检查

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T16:51:22.810

您可以使用[自旋模型检查器](http://spinroot.com/spin/whatispin.html)来检查系统的抽象描述。

对于基于 Java 的实现，您可以使用[Java Path Finder](http://javapathfinder.sourceforge.net/)。

还有[mace](http://www.macesystems.org/)，您可以在其中实现和测试 Paxos 等分布式系统，并且它支持包含 C 代码。

问候， 克里斯蒂安

# iphone - beginAnimations：子视图的动画比视图的动画慢

> ID：10953499
> 
> 赞同：0
> 
> 时间：2012-06-08T17:35:53.800
> 
> 标签：iphone, xcode, animation, uiview, subview

我有一个小问题，我尝试以这种方式显示带有动画的视图：

```
self.vistaAiuti = [[UIView alloc] initWithFrame:CGRectMake(10, -200, 300, 200)];
self.vistaAiuti.backgroundColor = [UIColor blueColor];

UIButton *closeButton = [UIButton buttonWithType:UIButtonTypeRoundedRect];
closeButton.frame = CGRectMake(50, 140, 220, 40);
[closeButton setTitle:@"Go back" forState:UIControlStateNormal];
[closeButton addTarget:self action:@selector(closeView:) forControlEvents:UIControlEventTouchUpInside];

[self.vistaAiuti addSubview:closeButton];    
[self.view addSubview:self.vistaAiuti];

[UIView beginAnimations:@"MoveView" context:nil];
[UIView setAnimationCurve:UIViewAnimationCurveEaseIn];
[UIView setAnimationDuration:0.5f];
self.vistaAiuti.frame = CGRectMake(10, 0, 300, 200);
[UIView commitAnimations]; 
```

这关闭它：

```
[UIView beginAnimations:@"MoveView" context:nil];
[UIView setAnimationCurve:UIViewAnimationCurveEaseIn];
[UIView setAnimationDuration:0.5f];
self.vistaAiuti.frame = CGRectMake(10, -200, 300, 0);
[UIView commitAnimations]; 
```

问题是 vista aiuto 上的按钮比 vistaAiuti 慢，所以当我关闭视图时，按钮会在后面停留一秒钟......我必须做些什么才能获得相同的速度？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-09T07:16:27.707

问题是 vistaAiuti 框架在关闭动画中被设置为零高度。该按钮似乎滞后，但真正发生的是下面的父视图正在缩小到零高度和 -200 origin.y。

将关闭动画目标帧更改为：

```
self.vistaAiuti.frame = CGRectMake(10, -200, 300, 200); 
```

另外，还有一些其他的建议：

将视图的创建与显示分开。这样您就不会在每次想要显示它时添加另一个子视图。

```
- (void)addVistaAiutiView {

    // your creation code
    self.vistaAiuti = [[UIView alloc] initWithFrame:CGRectMake(10, -200, 300, 200)];
    self.vistaAiuti.backgroundColor = [UIColor blueColor];

    UIButton *closeButton = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    closeButton.frame = CGRectMake(50, 140, 220, 40);
    [closeButton setTitle:@"Go back" forState:UIControlStateNormal];
    [closeButton addTarget:self action:@selector(closeView:) forControlEvents:UIControlEventTouchUpInside];

    [self.vistaAiuti addSubview:closeButton];    
    [self.view addSubview:self.vistaAiuti];
} 
```

使用块动画，写起来更紧凑，更容易阅读

```
- (BOOL)vistaAiutiIsHidden {

    return self.vistaAiuti.frame.origin.y < 0.0; 
}

- (void)setVistaAiutiHidden:(BOOL)hidden animated:(BOOL)animated {

    if (hidden == [self vistaAiutiIsHidden]) return;  // do nothing if it's already in the state we want it

    CGFloat yOffset = (hidden)? -200 : 200;           // move down to show, up to hide
    NSTimeInterval duration = (animated)? 0.5 : 0.0;  // quick duration or instantaneous

    [UIView animateWithDuration:duration animations: ^{
        self.vistaAiuti.frame = CGRectOffset(0.0, yOffset);
    }];
} 
```

# c# - WPF 中缺少 ListView.Columns

> ID：10953503
> 
> 赞同：1
> 
> 时间：2012-06-08T17:36:02.973
> 
> 标签：c#, wpf, listview, compiler-errors, listviewitem

我正在用 C# WPF 中的 ListView 编写应用程序。我想知道我是否错过了某些东西的参考，因为我一直收到这个错误：

> 'System.Windows.Controls.ListView' 不包含'Columns' 的定义，并且找不到接受'System.Windows.Controls.ListView' 类型的第一个参数的扩展方法'Columns'（您是否缺少 using 指令还是程序集参考？）`

它不仅适用于 MyListview.Colums，而且当我想向我的 ListView 添加多列项目时，例如通过遵循[this](https://stackoverflow.com/questions/473148/c-sharp-listview-how-do-i-add-items-to-columns-2-3-and-4-etc/)。 `MyListView.Items.Add("Column1Text").SubItems.AddRange(row1);`这给了我同样的 SubItems 错误

我很难解释，所以如果有不清楚的地方，你可以问。

**编辑：在您的大力帮助和一些谷歌搜索技巧下，我找到了解决方案。我的 XAML 代码：**

```
<Grid>
    <ListView x:Name="MyListView"
        <ListView.View>
            <GridView x:Name="MyGridView">
                <GridViewColumn Header="#" DisplayMemberBinding="{Binding Number}" Width="24" />
                <GridViewColumn Header="Song" DisplayMemberBinding="{Binding Song}" Width="390" />
            </GridView>
        </ListView.View>
    </ListView> 
```

这是添加项目的方法：

```
 MyListView.Items.Add(new { Number = 1, Song = "My first song" });
        MyListView.Items.Add(new { Number = 2, Song = "My second song" }); 
```

这是我第一次使用绑定，但我学到了很多！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T17:39:03.000

afaik，GridView 有列，ListView 没有。

见[MSDN](http://msdn.microsoft.com/en-us/library/system.windows.controls.gridview.aspx)：

> 表示在 ListView 控件的列中显示数据项的视图模式。

# c# - 应该添加还是删除这些论点？

> ID：10953507
> 
> 赞同：6
> 
> 时间：2012-06-08T17:36:15.423
> 
> 标签：c#, cryptography, resharper, optional-parameters, named-parameters

当 Resharper 与自己争论时，人们怎么知道应该给予哪个角色更多的信任？

我想我发现了一些确实让 Resharper 感到困惑的代码（这显然是一个非常不寻常的案例 - 在使用了一天之后，我认为 Resharper 是蜜蜂的膝盖/自液化面包等以来最棒的东西）。

使用这行代码：

```
ICryptoTransform Encryptor = RijndaelCipher.CreateEncryptor(SecretKey.GetBytes(32), SecretKey.GetBytes(16)); 
```

Resharper 告诉我*“添加参数名称'rgbkey'”*然后*“添加参数名称'rgbIV'”*

所以这条线是：

```
ICryptoTransform Encryptor = RijndaelCipher.CreateEncryptor(rgbKey: SecretKey.GetBytes(32), rgbIV: SecretKey.GetBytes(16)); 
```

但是，当我再次运行 Resharper 时，它会说，

*“冗余参数名称规范” - “删除参数名称规范”（rgbkey）*（然后是 rgbIV）。

似乎任何一种方式都可以正常工作，但......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-08T18:04:22.720

显式参数命名对于强制参数是可选的，因此两种形式都是“正确的”，问题是您更喜欢哪种形式？就像 vcsjones 所说，Resharper 只是为您提供一些重构选项以满足您的偏好。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-11T08:31:39.810

> Resharper 告诉我

实际上，它没有。R# 与用户交流的事情（大致上）有两类：它认为用户*应该*做的事情，以及用户可能*想做*的事情，它可以促进更快地完成。

第一个例子：

```
var i = 4;
i = 5;
DoSomething(i); 
```

的分配`4`将产生“未使用分配”检查，左边距有一个**灯泡图标**，提供**快速修复操作**来修复它（通过删除分配）。

第二个例子：

```
if ((new Random()).Next() > 5)
{
    DoSomething();
}
else
{
    DoSomethingElse();
} 
```

将光标定位在左边距`if`会产生一个**铅笔图标，提供一个****上下文操作**来反转`if`. 这并不是说你*应该*——而是说，“嘿，如果你想这样做，只需选择这个菜单项，我会为你做的”。

添加参数名称属于第二类，即上下文操作。如果您不想提供它，您可以在 中将其关闭`ReSharper | Options | Code Editing | C# | Context Actions`。对于代码检查，弹出菜单本身提供了更改检查严重性的机会；或者您可以在 中查看所有这些`ReSharper | Options | Code Isnpection | Inspection Severity`。

就个人而言，我认为我从未使用过一些上下文操作（例如“转换为十六进制”），但我发现其他一些操作对于快速编码非常有用（例如，在`?:`和`if`和反转之间切换的各种组合）

# matlab - matlab中的fminsearch问题

> ID：10953508
> 
> 赞同：1
> 
> 时间：2012-06-08T17:36:18.047
> 
> 标签：matlab, mathematical-optimization

我在使用 matlab 的 fminsearch 时遇到了一些问题。我已将 TolX 和 TolFun 定义如下

```
options = optimset('TolFun',1e-8, 'TolX', 1e-8) 
```

然后我尝试使用来估计我的函数的参数

```
[estimates val] = fminsearch(model, start_point,options) 
```

但是，val 约为 3.3032e-04。即使我将 TolFun 指定为 1e-8，它仍然会在此之前以 3.3032e-04 左右的值终止。实际上，参数的期望值是在 1.268e-04 左右获得的。所以我尝试设置 TolFun。为什么它不起作用，它应该收敛到函数的最小值，不是吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T18:39:26.057

终止搜索还有其他原因，例如，函数评估的最大数量、迭代的最大数量等。 `fminsearch`提供额外的输出参数，为您提供有关终止原因的信息。你特别想要完整的`OUTPUT`参数，它提供迭代次数、终止消息等。

```
[X,FVAL,EXITFLAG,OUTPUT] = fminsearch(...) returns a structure
OUTPUT with the number of iterations taken in OUTPUT.iterations, the
number of function evaluations in OUTPUT.funcCount, the algorithm name 
in OUTPUT.algorithm, and the exit message in OUTPUT.message. 
```

另一种可能性是您陷入了局部最小值。除了选择不同的起点或不同的优化器外，对于这个问题没有什么可做的。

# perl - 尝试使用 CPANM 安装 DBD::Oracle 时出错

> ID：10953511
> 
> 赞同：1
> 
> 时间：2012-06-08T17:36:32.897
> 
> 标签：perl, oracle, oracle11g, solaris, cpan

好的，所以我尝试在具有 Oracle11g 数据库的 64 位 Solaris 11 机器上使用 CPANM 安装 CGI 模块、DBI 模块和 DBD::Oracle 驱动程序的组合。

我使用 Perlbrew 安装了最新版本的 Perl，更新了 CPANM，然后执行了以下操作...

```
cpanm -v -f -i CGI
cpanm -v -f -i DBI 
```

并且这两个模块都安装得很好，当我尝试正常安装时，DBI 确实有一个小测试错误（t/zvxnp_85gofer.t），但强制安装似乎有效。

所以我去尝试安装我需要的最后一部分：

```
cpanm -v -f -i DBD::Oracle 
```

这是安装结束时出现的错误......

```
Running Mkbootstrap for DBD::Oracle ()
chmod 644 Oracle.bs
rm -f blib/arch/auto/DBD/Oracle/Oracle.so
LD_RUN_PATH="/opt/oracle/rdbms/lib" gcc  -G -L/usr/gnu/lib -fstack-protector Oracle.o  dbdimp.o  oci8.o  -o blib/arch/auto/DBD/Oracle/Oracle.so     \
   -L/opt/oracle/rdbms/lib/ -lclntsh -lkstat -lnsl -lsocket -lresolv -lgen -ldl -lsched -lrt -R/opt/oracle/rdbms/lib -laio -lposix4 -lkstat -lm -lpthread   \

ld: fatal: file /opt/oracle/rdbms/lib//libclntsh.so: wrong ELF class: ELFCLASS64
ld: fatal: file processing errors. No output written to blib/arch/auto/DBD/Oracle/Oracle.so
collect2: ld returned 1 exit status
*** Error code 1
make: Fatal error: Command failed for target `blib/arch/auto/DBD/Oracle/Oracle.so'
FAIL
! Installing DBD::Oracle failed. See /home/oracle/.cpanm/build.log for details. 
```

我只是猜测`wrong ELF class: ELFCLASS64`它与存在的 64 位二进制文​​件之间的一些不匹配有关，并且该驱动程序需要安装 32 位二进制文​​件？一些研究表明我需要找到 lib32 目录才能继续安装，但我似乎找不到它。

我做了：

`echo $ORACLE_HOME`---> /opt/oracle/rdbms
`ls $ORACLE_HOME`

这返回了以下目录...

```
apex              emcli             mgw               rdbms
assistants        has               network           relnotes
bin               hs                nls               root.sh
ccr               ide               oc4j              scheduler
cdata             install           odbc              slax
cfgtoollogs       install.platform  olap              sqldeveloper
clone             instantclient     ons               sqlj
config            inventory         OPatch            sqlplus
crs               j2ee              opmn              srvm
csmig             javavm            oracore           sysman
css               jdbc              oraInst.loc       timingframework
ctx               jdev              ord               ucp
cv                jdk               oui               uix
dbs               jlib              owb               utl
dc_ocm            ldap              owm               wwg
deinstall         lib64             perl              xdk
demo              log               plsql
diagnostics       md                precomp
dv                mesg              racg 
```

所以我看到一个 lib64，但没有 lib 或 lib32。以前有没有人遇到过这个问题，找到了解决方案，或者知道如何从这里继续？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T18:05:59.143

请查看 oracle.com 上的 1271236.1 和 883702.1。它将解释如何为 11i 客户端安装获取 32 位库。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T06:28:20.870

我遇到过同样的问题。`./Configure -es -Dprefix=$HOME/usr/local -Dcc=gcc -Duse64bitall -Dusethreads`通过执行perl 安装来修复它

# ios - 解析 JSON 文件

> ID：10953512
> 
> 赞同：0
> 
> 时间：2012-06-08T17:36:35.790
> 
> 标签：ios, xcode, json

如何解析这种文件：

```
{"group":"1"}{"group":"2"}{"group":"3"} 
```

通常我是这样解析的：

```
NSString *fileContent = [[NSString alloc] initWithContentsOfFile:reloadPath];  

SBJsonParser *parser = [[SBJsonParser alloc] init];

NSDictionary *data = (NSDictionary *) [parser objectWithString:fileContent error:nil];  

// getting the data from inside of "menu"  

//NSString *message = (NSString *) [data objectForKey:@"message"];
//NSString *name = (NSString *) [data objectForKey:@"name"];

NSArray *messagearray = [data objectForKey:@"message"];
NSArray *namearray    = [data objectForKey:@"name"];

NSDictionary* Dictionary = [NSDictionary dictionaryWithObjects:messagearray forKeys:namearray]; 
```

……本王的物品……

```
{"message":["Besth"],"name":["thgh"]} 
```

...但是在我要解析的类型中，哪个是键和对象？

顺便说一句，我想检索这样的列表：1、2、3，...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T17:43:47.267

这不是有效的 JSON。例如，您可以在以下位置进行验证：http: [//jsonlint.com](http://jsonlint.com)

您可以将其重写为有效的 JSON，如下所示：

```
{
    "some_groups": [
        {
            "group": "1"
        },
        {
            "group": "2"
        },
        {
            "group": "3"
        }
    ]
} 
```

然后您可以通过执行以下操作来提取数据：

```
NSArray *groups = [data objectForKey:@"some_groups"];

for (NSDictionary *group in groups) {
    NSLog(@"group number: %@", [group valueForKey:@"group"]);
} 
```

# mysql - 为什么这个工作优先级=''-1 在Mysql

> ID：10953513
> 
> 赞同：0
> 
> 时间：2012-06-08T17:36:41.363
> 
> 标签：mysql, insert

谁能告诉我为什么这在mysql中有效？

```
update routing_policy set priority=''-1 where id = 1; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T17:37:51.437

您的`priority is invalid:`优先级值=''-1`。您正在尝试从字符串中减去一个数字，*或者*您的值在引号之外（如果您使用整数数据类型，这应该不是问题）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T17:38:35.763

您从空字符串中减去 1，为此评估为 0，因此结果为 -1。[查看有关表达式评估中的类型转换](http://dev.mysql.com/doc/refman/5.1/en/type-conversion.html)的手册页以获取更多信息。

# php - 多个 PHP IF 条件不起作用

> ID：10953514
> 
> 赞同：1
> 
> 时间：2012-06-08T17:36:41.773
> 
> 标签：php, if-statement

我试图确保在 URL 中设置了 GET 字符串，并且它的值是一个整数，但我无法让它工作。

```
if (isset($_GET['allusers']) && is_int($_GET['allusers'])) {

    echo "works";

} 
```

我的括号有问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-08T17:37:47.777

`$_GET`变量不能是整数。它永远是一个字符串。

要测试它是否是数字字符串，请使用[`is_numeric()`](http://www.php.net/manual/en/function.is-numeric.php)：

```
if ( isset($_GET['allusers']) && is_numeric($_GET['allusers']) )
{
    echo "works";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T17:43:20.047

在您的代码中

```
isset($_GET['allusers']) 
```

将被评估为真，但 is_int($_GET['allusers']) 不会，因为 $_GET 的值不是 int 的字符串，您可以将代码修改为

```
if (isset($_GET['allusers']) && is_int(intval($_GET['allusers']))) {

    echo "works";

} 
```

这将起作用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T17:48:53.717

如果[`ctype_digit`](http://php.net/ctype_digit)您只期望非负整数，请使用。这将在这些情况下给出最好的结果，因为它只*允许*数字`0-9`。

请注意，[`is_numeric`](http://php.net/is_numeric)将返回`true`可以转换为整数的字符串，包括负数和浮点数。一些`is_numeric`将被视为的示例`true`：

*   `0xF5`（十六进制）
*   `-.0e-000`（一种奇怪的表达方式`0.0`）
*   `-0.4`

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-08T17:40:46.803

[is_int](http://php.net/manual/en/function.is-int.php)返回`false`一个字符串，这就是一个 GET 变量。

```
var_dump(is_int("23"));
bool(false) 
```

您应该使用[is_numeric](http://php.net/manual/en/function.is-numeric.php) instad。

# android - 如果以编程方式设置源，PNG 文件将不会显示在 ImageView 中

> ID：10953515
> 
> 赞同：0
> 
> 时间：2012-06-08T17:36:43.753
> 
> 标签：android

我的 res/drawable-ldpi 文件夹中有一个 png 文件。我正在使用模拟器在 Eclipse 中工作，但我已经在我的 2.2.1 Android 手机上尝试过这个，我得到了相同的行为。我有一个 ImageView，我想基于数据库调用以编程方式设置 src。如果我只是把

```
src="@drawable.norusdpyr" 
```

在 Activity 的 XML 文件中，文件显示正常。但是，如果我把

```
String imageresource = "R.drawable." + parsedData[4].toString();
chart.setImageURI(Uri.parse(imageresource)); 
```

其中 parsedData[4].toString() = "nor_usdpyr" 我什么也没看到。我也试过

```
String imageresource = "android.resource://" + getPackageName() + "/R.drawable." + parsedData[4].toString();
chart.setImageURI(Uri.parse(imageresource)); 
```

和

```
InputStream is = getClass().getResourceAsStream("/drawable/" + parsedData[4].toString());
chart.setImageDrawable(Drawable.createFromStream(is, "")); 
```

和

```
String imageresource = "R.drawable." + parsedData[4].toString();   
File file = new File(imageresource);
chart.setImageDrawable(Drawable.createFromPath(file.getAbsolutePath())); 
```

和

```
Context context = getApplicationContext();
int ResID = context.getResources().getIdentifier(imageresource, "drawable", "com.KnitCard.project");
chart.setImageResource(ResID); 
```

最后，

```
chart.setImageURI(Uri.parse("android.resource://" + getPackageName() + "/R.drawable.nor_usdpyr")); 
```

不起作用。

这些都不起作用。我究竟做错了什么？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T17:44:32.580

首先，这不应该工作：

```
src="@drawable.norusdpyr" 
```

正确的方法是：

```
android:src="@drawable/norusdpyr" 
```

其次，您在 XML 中使用的那些字符串*ID*仅在 XML 中有效。构建资源时，所有这些字符串都将替换为它们各自的*整*数值。理想情况下，您不需要从字符串名称加载包资源。但如果你这样做了，你可以查找具有这样名称的字段，获取它所持有的*整*`setImageResource`数值，然后调用. 你非常接近这个版本：

```
int ResID = context.getResources().getIdentifier(imageresource, "drawable", "com.KnitCard.project");
chart.setImageResource(ResID); 
```

除了`imageResource`应该`parsedData[4].toString()`没有`R.drawable.`前缀。您可以使用`context.getPackageName()`而不是硬编码您的包名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-12T19:57:45.253

您还可以使用该`setImageDrawable()`方法直接使用资源：

```
myImageView.setImageDrawable(context.getResources().getDrawable(R.drawable.myPngFileName)); 
```

这将避免获取 ResID 然后使用它进行访问的过程

# javascript - 使用 jquery 最简单的确认框插件

> ID：10953520
> 
> 赞同：0
> 
> 时间：2012-06-08T17:37:00.423
> 
> 标签：javascript, jquery, html

我的html代码

```
<div id="delete">Delete</div> 
```

我的 JavaScript 代码

```
$(function(){
$("#delete").click(function(){
var decision=decide("Do you really want to delete?");
});
});
function decide(str)
{
$("delete").after(str+'<button onclick="yes()">Yes</button><button onclick="no()">No</button>');
}
function yes(){return 1;}
function no(){return 0;} 
```

目前我的 yes 和 no 返回 0/1，但我希望根据 no/yes 从决定函数返回 0/1。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T17:40:10.833

您的代码是异步的。您将无法以`decision`这种方式将其分配给您的变量。

换句话说：你的`decide`函数在用户点击任何按钮之前返回，并且总是返回`undefined`。

无论你想用那个布尔值做什么，你都必须在那些`yes`/`no`函数中做。

* * *

以下是如何提供回调的快速示例：

```
$(function() {
    $("#delete").click(function(){
        decide("Do you really want to delete?", function(result) {            
            alert(result);
        });

        return false;
    });

    function decide(str, callback)
    {
        $('<div>'+str+'<button>Yes</button><button>No</button></div>')
            .insertAfter("#delete")

            .on('click', 'button', function() {
                var result = $(this).text() == 'Yes' ? true : false;
                console.log($(this).text(), result);

                callback(result);
            });
    }
});​ 
```

这是一个演示：http: [//jsfiddle.net/x2Lf9/](http://jsfiddle.net/x2Lf9/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T17:41:05.973

为什么不简单的使用一个jquery插件呢？

尝试即兴

[http://trentrichardson.com/Impromptu/](http://trentrichardson.com/Impromptu/)

# c# - Json.net 反序列化字典，其中包含具有 dataTable 值的字典

> ID：10953521
> 
> 赞同：2
> 
> 时间：2012-06-08T17:37:16.900
> 
> 标签：c#, serialization, json.net

我对编程相当陌生（在课堂环境之外）。

我正在开发一个有插件的应用程序。每个插件打包/解包它的状态（作为字典）并将自己添加到包含所有打包状态的字典中。我正在使用 Json.Net 序列化/反序列化并将每个插件传递给它自己的类，以根据项目是保存还是打开来打包/解包。

我遇到的问题是，当我的第一个插件将其打包状态的字典版本解包时，我开始重新填充每个属性，第一个属性（字典中的第一项）是一个 DataTable。我收到一条错误消息：

```
Unable to cast object of type 'Newtonsoft.Json.Linq.JArray' to 
type 'System.Data.DataTable'. 
```

这是我的序列化代码。

```
IDictionary<string, IDictionary<string, object>> pluginStates = 
             new Dictionary<string, IDictionary<string, object>>();
signaller.RaiseSaveRequest(pluginStates); //gets all of the plugins' packedState

JsonSerializer serializer = new JsonSerializer();
serializer.ObjectCreationHandling = ObjectCreationHandling.Replace; 
serializer.TypeNameHandling = TypeNameHandling.All; 

using (StreamWriter sw = new StreamWriter(strPathName))
using (JsonWriter writer = new JsonTextWriter(sw))
{
    serializer.Serialize(writer, pluginStates);
} 
```

和反序列化。

```
 IDictionary<string, IDictionary<string, object>> pluginStates = 
           new Dictionary<string, IDictionary<string, object>>();

 JsonSerializer serializer = new JsonSerializer();
 serializer.ObjectCreationHandling = ObjectCreationHandling.Replace; 
 serializer.TypeNameHandling = TypeNameHandling.All; 

 StreamReader sr = new StreamReader(fullName);
 JsonTextReader reader = new JsonTextReader(sr);
 string json = sr.ReadToEnd();
 pluginStates = serializer.Deserialize<IDictionary<string, IDictionary<string, Object>>>(reader);
 pluginStates = JsonConvert.DeserializeObject<IDictionary<string, IDictionary<string, Object>>>(json);
 sr.Close();
 reader.Close();

 signaller.UnpackProjectState(pluginStates); 
```

我尝试查看有关 NewtonSoft.Json 的文档，但我几乎不理解它以及如何使其在我的代码中工作。我想一旦插件获得其打包状态以解包，我需要对 Converters 或 Parsing 做一些事情。打包后，插件的第一个字典条目被保存为 DataTable。然后，当在 Unpack 中时，它是带有 : 分隔符的值中的实际数据表。

我会提供屏幕截图，但我还没有弄清楚如何做到这一点。任何想法我错过了什么？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T19:30:41.133

保存项目时，ProjMngr 获取打包的 pluginStates 字典。我遍历 pluginStates 字典中的每个字典（插件）并创建一个字典，其中包含键、值（json 字符串版本）和键、值（.net 类型）。将这些添加到一个数组中，并将该数组放入最终被序列化的 projectState 字典中。这是代码。

```
signaller.RaiseSaveRequest(pluginStates);  <----has all plugin's packedState

//loop through plugins to get values and types
Dictionary<string, object> dictProjectState = new Dictionary<string, object>();

foreach (KeyValuePair<string,IDictionary<string,object>> plugin in pluginStates)
{ 
    //holds jsonRepresented values
    Dictionary<string, object> dictJsonRep = new Dictionary<string, object>(); 
    //holds object types
    Dictionary<string, object> dictObjRep = new Dictionary<string, object>(); 
    object[] arrayDictHolder = new object[2];  //holds all of the dictionaries

    string pluginKey = plugin.Key;

    IDictionary<string, object> pluginValue = new Dictionary<string, object>(); 
    pluginValue = plugin.Value;

    foreach (KeyValuePair<string, object> element in pluginValue)
    {
      string jsonRepresentation = JsonConvert.SerializeObject(element.Value);
      object objType = element.Value.GetType();
      dictJsonRep.Add(element.Key, jsonRepresentation);
      dictObjRep.Add(element.Key, objType);
    }
    arrayDictHolder[0] = dictJsonRep;
    arrayDictHolder[1] = dictObjRep;
    dictProjectState.Add(pluginKey, arrayDictHolder);
}

JsonSerializer serializer = new JsonSerializer();

using (StreamWriter sw = new StreamWriter(strPathName))
using (JsonWriter writer = new JsonTextWriter(sw))
{
    serializer.Serialize(writer, dictProjectState);
} 
```

然后，当打开一个项目时，我反过来做了同样的事情，让 pluginState 恢复到原来的状态，发送给每个插件。在发送之前使用类型来确保类型正确。意识到我必须多次反序列化，这令人惊讶。我就是无法摆脱 Jarray 或 Jobject。但这有效。这是我打开的方式。

```
IDictionary<string, IDictionary<string, object>> pluginStates = new Dictionary<string, IDictionary<string, object>>();

StreamReader sr = new StreamReader(fullName);
JsonTextReader reader = new JsonTextReader(sr);
string json = sr.ReadToEnd();

var dictProjectState = JsonConvert.DeserializeObject<Dictionary<string, object>>(json);
sr.Close();
reader.Close();

foreach (var projectStatePair in dictProjectState)
{
    string pluginKey = projectStatePair.Key; //key in pluginStates dict
    Dictionary<string, object> dictJsonRep = new Dictionary<string, object>();
    Dictionary<string, object> dictObjRep = new Dictionary<string, object>();
    Dictionary<string, object> pluginValues = new Dictionary<string, object>();

    string stpluginValue = projectStatePair.Value.ToString();

    Newtonsoft.Json.Linq.JArray ja = (Newtonsoft.Json.Linq.JArray)JsonConvert.DeserializeObject(stpluginValue);

    object[] arrayHolder = ja.ToObject<object[]>();

    string strArray0 = arrayHolder[0].ToString();
    string strArray1 = arrayHolder[1].ToString();

    dictJsonRep = JsonConvert.DeserializeObject<Dictionary<string, object>>(strArray0);
    dictObjRep = JsonConvert.DeserializeObject<Dictionary<string, object>>(strArray1);

    foreach (var pair in dictJsonRep)
    {
         string strVariableKey = pair.Key;
         object objType = dictObjRep[pair.Key];
         string jsonRep = (string)pair.Value;
         Type jsonType = Type.GetType(objType as string);
         object jsonReprValue = null;
         jsonReprValue = JsonConvert.DeserializeObject(jsonRep, jsonType);
         pluginValues.Add(strVariableKey, jsonReprValue);
    }
    pluginStates.Add(pluginKey, pluginValues);
}

signaller.UnpackProjectState(pluginStates); 
```

希望这可以帮助任何寻找答案的人。

# javascript - Backbone - 在模型更改时取消注册视图事件

> ID：10953525
> 
> 赞同：1
> 
> 时间：2012-06-08T17:37:45.713
> 
> 标签：javascript, events, model, backbone.js

我正在 Backbone.js 中构建一个类似画廊的选择器视图。选择器有许多缩略图视图绑定到集合中的模型和当前选定缩略图的大预览视图。单击缩略图将触发 Backbone.Event 以更改预览视图的模型。但是，预览视图会观察模型上的几个 Backbone 事件，以根据模型的属性更改状态。

在取消注册以前模型上的 Backbone 事件并在新模型上重新注册相同事件时，我遇到了麻烦。我并不总是参考原始`.on()`注册，我很想简单地调用`this.model.off()`以取消注册模型的所有事件（但是，我不想破坏模型可能具有的任何其他事件）。Backbone.js 文档概述了调用`.off(null, null, context)`将注销当前上下文中对象的事件。但是，我不确定这是否会取消注册当前视图实例的所有事件。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-11T13:09:32.820

让我们使用这个设置来注册和注销事件：

```
var ThumbView=Backbone.View.extend({
    initialize: function() {
        this.model.on("change:title", this.log, this);
    },

    log:function(model) {
        console.log("Thumb view : "+model.get("id")+" : "+model.get("title"));
    }
});

var MainView=Backbone.View.extend({
    initialize: function() {
        this.model.on("change:title", this.log, this);
    },

    log:function(model) {
        console.log("Main view : "+model.get("id")+" : "+model.get("title"));
    }
});

var m1=new Backbone.Model({id:1,title:"m1"});   
var t=new ThumbView({model:m1});
var v=new MainView({model:m1});

m1.set({title:"m1, 1"});
v=new MainView({model:m1});
m1.set({title:"m1, 2"}); 
```

照原样，创建一个新的 MainView 不会破坏以前的绑定，并且会导致僵尸视图。最后 3 行给出以下结果：

> 拇指视图：1：m1、1
> 主视图：1：m1、1
> 拇指视图：1：m1、2
> 主视图：1：m1、2
> 主视图：1：m1、2

随附的小提琴：http: [//jsfiddle.net/9xufW/](http://jsfiddle.net/9xufW/)

`off`让我们用特定的上下文测试该方法：

```
var MainView=Backbone.View.extend({
    initialize: function() {
        this.model.on("change:title", this.log, this);
    },

    log:function(model) {
        console.log("Main view : "+model.get("id")+" : "+model.get("title"));
    },

    teardown: function() {
        this.model.off(null, null, this);
    }
}); 
```

打电话

```
m1.set({title:"m1, 1"});
v.teardown(); // "destroys" the old view

v=new MainView({model:m1});
m1.set({title:"m1, 2"}); 
```

产生预期的结果

> 拇指视图：1：m1、1
> 主视图：1：m1、1
> 拇指视图：1：m1、2
> 主视图：1：m1、2

[http://jsfiddle.net/9xufW/1/](http://jsfiddle.net/9xufW/1/)

缩略图视图中设置的回调被保留，而主视图中设置的回调被删除。请注意，teardown 方法可以并且可能应该用于取消委托 DOM 事件。

另一个小提琴，其中主视图中的模型被替换而不是破坏/重新创建视图[http://jsfiddle.net/9xufW/2/](http://jsfiddle.net/9xufW/2/)

# c++ - 定义指数预处理器宏

> ID：10953532
> 
> 赞同：0
> 
> 时间：2012-06-08T17:38:07.700
> 
> 标签：c++, macros

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T17:47:10.550

Using a *macro function* is the wrong tool for the job. Nevertheless, you say *you think it would work inside expressions*, consider how would that look for the actual compiler once the preprocessor did his work:

```
int result = int c=2; for (int ii=0; ii<(10)-1; (c)*=(2), i++); c 
```

No matter how hard you try, you can't do variable definitions nor `for` loops within an expression.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-08T18:05:04.610

You could use a recursive template template approach:

```
template<int base, unsigned int exp>
struct Pow {
    enum { value = base * power<base, exp-1>::value };
};
// stopping condition
template<int base>
struct Pow<base,0> {
    enum { value = 1 };
}; 
```

and use it like this:

```
int i = Pow<10,2>::value; 
```

# django - Django：在基于抽象类创建模型后向用户模型添加属性

> ID：10953538
> 
> 赞同：2
> 
> 时间：2012-06-08T17:38:33.620
> 
> 标签：django, generic-relations

我有一个普通模型和一个抽象模型，如下所示：

```
class TaggedSubject(models.Model):
    user = models.ForeignKey(User, null=True, blank=True)
    category = models.CharField(max_length=200)
    foo = models.CharField(max_length=50)
    bar = models.CharField(max_length=50)
    # etc

    content_type = models.ForeignKey(ContentType)
    content_object_pk = models.CharField(max_length=255)
    content_object = generic.GenericForeignKey("content_type", "content_object_pk")

    def __unicode__(self):
        if self.user:
            return "%s" % (self.user.get_full_name() or self.user.username)
        else:
            return self.label

class Taggable(models.Model):
    tagged_subjects = generic.GenericRelation(TaggedSubject, content_type_field='content_type', object_id_field='content_object_pk')

    @property
    def tagged_users(self):
        return User.objects.filter(pk__in=self.tagged_subjects.filter(user__isnull=False).values("user"))

    class Meta:
        abstract = True 
```

然后`Taggable`像这样使用抽象模型类：

```
class Photo(Taggable):
    image = models.ImageField(upload_to="foo")
    # ... etc 
```

所以如果我们有一个照片对象：

```
photo = Photo.objects.all()[0] 
```

我可以使用 photo.tagged_users.all() 标记照片中的所有用户

我想添加与用户对象的反比关系，这样如果我有一个用户：

```
user = User.objects.filter(pk__in=TaggedSubject.objects.exclude(user__isnull=True).values("user"))[0] 
```

我可以调用类似的东西`user.tagged_photo_set.all()`并让它返回所有照片对象。

我怀疑由于 TaggedSubject 在通用关系上连接到 Taggable 模型，因此不可能将其用作具有字段的`through`模型。`ManyToMany`

假设这是真的，这是我认为我需要（以某种方式）添加到 User 模型的功能：

```
def tagged_photo_set(self):
    Photo.objects.filter(pk__in=TaggedSubject.objects.filter(user=self, content_type=ContentType.objects.get_for_model(Photo)) 
```

我想知道是否可以对其进行设置，以便每次基于 Taggable 创建一个新模型类时，它都会创建上面函数的一个版本并将其添加（理想情况下作为一个行为类似于属性的函数！）到用户.

或者，如果有*可能*以某种方式在通用关系上进行 ManyToMany 字段连接（我非常怀疑），那也可以。

最后，如果我没有看到第三个更酷的选择，我当然愿意接受。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T18:56:43.927

当设置子类化您的基类的模型时，您可以使用`add_to_class`和信号进行一些后期处理：`class_prepared`

```
def add_to_user(sender, **kwargs):
    def tagged_FOO_set(self):
        return sender.objects.filter(pk__in=TaggedSubject.objects.filter(
            user=self,
            content_type=ContentType.objects.get_for_model(sender)))

    if issubclass(sender, MyAbstractClass):
        method_name = 'tagged_{model}_set'.format(model=sender.__name__.lower())
        User.add_to_class(method_name, property(tagged_FOO_set))

class_prepared.connect(add_to_user) 
```

# python - os.path.join(os.path.dirname(__file__)) 什么都不返回

> ID：10953540
> 
> 赞同：1
> 
> 时间：2012-06-08T17:38:38.203
> 
> 标签：python

我有一个这样的目录结构：

```
--bin/
--lib/
--data/ 
```

所以基本上，可执行脚本在 bin 中，它调用 lib 中的文件。但 lib 必须与 data 中的文本文件进行通信

通常这用于工作：读取文件通常我用来执行此操作

```
file_path =  os.path.join(os.path.dirname(__file__))+ "/../" +"data/"+filename
f = open(file_path,"r") 
```

但是，在这种情况下，如果我这样做：

```
 print os.path.join(os.path.dirname(__file__))
  returns nothing? 
```

我在做什么错..谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T17:41:21.000

我猜*你*的意思是空字符串？这只能是这种情况，如果`__file__`首先是一个空字符串。你不小心覆盖了`__file__`吗？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-08T18:09:15.107

除了其他评论之外，还有一条评论......重点`os.path.join`是避免类似的事情

```
mypath=dir + '/' + subdir + '/'+filename 
```

这是使用更干净地完成的

```
mypath=os.path.join(dir,subdir,filename) # can have as many arguments as you want! 
```

此外，您可以避免显式的 '..' 和 '.' 在路径名中使用`os.pardir`and `os.curdir`。（例如）

```
file_path =  os.path.join(os.path.dirname(__file__),os.pardir,'data',filename) 
```

这应该会增加代码的可移植性（即使您不打算在其他任何地方运行此脚本，也是一个养成的好习惯）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-08T17:59:12.013

这取决于您如何启动脚本，例如：

如果`/bin/script.py`包含：

```
import os
print os.path.dirname(__file__)   #no reason to use os.path.join() 
```

然后：

```
$> python /bin/script.py
/bin
$> cd /bin
$> python script.py
                       #nothing
$> 
```

使用以下内容是一个更好的主意：

```
file_path = os.path.abspath(__file__) 
```

然后做任何你想做的事。

# scala - 矩形类（对象）可以有两个内在参数长度和宽度。如何编写（独立）函数来计算面积？

> ID：10953544
> 
> 赞同：2
> 
> 时间：2012-06-08T17:38:57.947
> 
> 标签：scala

这是我为 Rectangle 类编写的代码。

```
 class Rectangle (l: Double, w: Double) {
        require (l > 0, w > 0)
        val length = l
        val width = w
        def this (l: Double) = this (l, l)
        def setDimensions (l: Double, w: Double) = new Rectangle (l, w)
        def setLength (l: Double) = new Rectangle (l, width)
        def setWidth (w: Double) = new Rectangle (length, w)
    } 
```

我的问题是如何在 Scala 中编写以下函数（独立于 Rectangle 类）：

1.  给定长度和宽度计算矩形的面积
2.  给定长度和面积计算矩形的宽度
3.  给定宽度和面积计算矩形的长度
4.  给定矩形对象显示长度、宽度和面积

[在阅读本文](http://www.ibm.com/developerworks/java/library/j-scala01228/index.html)的以下段落后出现了这个问题：

> 函数式语言的名字来源于程序应该像数学函数一样运行的概念。换句话说，给定一组输入，一个函数应该总是返回相同的输出。这不仅意味着每个函数都必须返回一个值，而且函数在从一次调用到下一次调用的过程中本质上必须不携带任何内在状态。这种内在的无状态概念，在默认情况下延续到函数/对象世界意味着不可变对象，这也是函数式语言被誉为疯狂并发世界的伟大救世主的很大一部分原因。

请注意，作为 Scala 初学者，我正在尝试掌握其中的 FP 部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T18:34:09.630

这是一个例子：

```
case class Rectangle(length: Double, width: Double) {
    require (length > 0, width > 0)

    lazy val area = length * width
    override def toString = s"length: $length, width: $width, area: $area"
}

object Rectangle {
    def fromLength(length: Double) = Rectangle(length, length)
    def fromLengthArea(length: Double, area: Double) = Rectangle(length, area / length)
    def fromWidthArea(width: Double, area: Double) = Rectangle(area / width, width)
    def show(rect: Rectangle) = println(rect)
}

// Usage

Rectangle show Rectangle(2, 3)
Rectangle show Rectangle.fromLength(2)
Rectangle show Rectangle.fromLengthArea(2, 6)
Rectangle show Rectangle.fromWidthArea(3, 6) 
```

我可以建议您始终在适当的情况下使用案例类，尤其是对于`Rectangle`.

`show`方法需要打印结果，所以在这种情况下你不能避免副作用。换句话说，这个函数不是引用透明的。`Rectangle`实际上，可以认为整个构造函数的引用不是透明的，因为您使用的是`require`. 您可以通过确保`Rectangle`始终在类之外的某处接收正确的值来避免这种情况，但是当`Rectangle`由于验证错误而无法创建类时，您还需要返回一些东西。您可以`Option`为此目的使用类。这是一个小例子：

```
case class Rectangle private (length: Double, width: Double) {
    lazy val area = length * width
    override def toString = s"length: $length, width: $width, area: $area"
}

object Rectangle {
    def fromLengthWidth(length: Double, width: Double) = 
        validating(length, width)(new Rectangle(length, width))

    def fromLength(length: Double) = validating(length)  {
        new Rectangle(length, length)
    }

    def fromLengthArea(length: Double, area: Double) = validating(length, area) {
        new Rectangle(length, area / length)
    }

    def fromWidthArea(width: Double, area: Double) = validating(width, area) {
        new Rectangle(area / width, width)
    }

    def show(rect: Option[Rectangle]) = println(rect getOrElse "Invalid Rectangle!!!")

    private def validating[R](values: Double*)(fn: => R) = 
        if (values forall (_ > 0)) Some(fn)
        else None   
}

Rectangle show Rectangle.fromLengthWidth(2, 3)
Rectangle show Rectangle.fromLength(0)

// prints:
//    length: 2.0, width: 3.0, area: 6.0
//    Invalid Rectangle!!! 
```

如您所见，我将构造函数设为私有并在伴随对象中移动验证（它可以访问具有相同名称的类的私有成员）。所以你不能创建无效的矩形。但重要的一点是，即使您提供了损坏的长度，您仍然会收到一些东西（在这种情况下，它是`None`对象，它是类的实例和子`Option`类）。

我`area`在类中添加了方法，但是您当然可以编写一个独立的方法或函数来计算面积：

```
def area(rect: Rectangle) = rect.length * rect.width 
```

或者

```
val area = (rect: Rectangle) => rect.length * rect.width 
```

我希望这能帮助你理解这个话题。如果仍然不清楚（或者我的回答没有涵盖您真正想知道的内容），请不要犹豫并发表评论。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T19:13:30.313

这是您描述的功能的实现：

```
def area(length: Double, width: Double) = length * width
def length(width: Double, area: Double) = if (width > 0) area / width else 0
def width(length: Double, area: Double) = if (length > 0) area / length else 0
def show(rect: Rectangle) = 
    println(rect.length + ", " + rect.width + ", " + area(rect.length, rect.width)) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-08T20:11:15.733

我很好奇如何用类型类来做到这一点，所以我想出了这个版本，它甚至不允许你编译带有无效矩形的代码。我敢打赌这可以做得更干净一些，但这是我快速整理的：

```
trait LengthCalc[-A] {
  def length(x: A): Double
}

trait WidthCalc[-A] {
  def width(x: A): Double
}

trait AreaCalc[-A] {
  def area(x: A): Double
}

case class Rectangle[A <: Option[Double], B <: Option[Double], C <: Option[Double]](lengthOpt: A = None, widthOpt: B = None, areaOpt: C = None)
(implicit lengthCalc: LengthCalc[Rectangle[A,B,C]], widthCalc: WidthCalc[Rectangle[A,B,C]], areaCalc: AreaCalc[Rectangle[A,B,C]]) {
  lazy val length = lengthCalc.length(this)
  lazy val width = widthCalc.width(this)
  lazy val area = areaCalc.area(this)
}

implicit object RectLengthCalcFromLength extends LengthCalc[Rectangle[Some[Double], _ <: Option[Double], _ <: Option[Double]]] {
  def length(x: Rectangle[Some[Double], _ <: Option[Double], _ <: Option[Double]]) = x.lengthOpt.get
}

implicit object RectLengthCalcFromWidthAndArea extends LengthCalc[Rectangle[None.type, Some[Double], Some[Double]]] {
  def length(x: Rectangle[None.type, Some[Double], Some[Double]]) = (for {
    area <- x.areaOpt
    width <- x.widthOpt
  } yield (area / width)).get
}

implicit object RectWidthFromWidth extends WidthCalc[Rectangle[_ <: Option[Double], Some[Double], _ <: Option[Double]]] {
  def width(x: Rectangle[_ <: Option[Double], Some[Double], _ <: Option[Double]]) = x.widthOpt.get
}

implicit object RectWidthFromLengthAndArea extends WidthCalc[Rectangle[Some[Double], None.type, Some[Double]]] {
  def width(x: Rectangle[Some[Double], None.type, Some[Double]]) = (for {
    area <- x.areaOpt
    length <- x.lengthOpt
  } yield (area / length)).get
}

implicit object RectAreaFromArea extends AreaCalc[Rectangle[_ <: Option[Double], _ <: Option[Double], Some[Double]]] {
  def area(x: Rectangle[_ <: Option[Double], _ <: Option[Double], Some[Double]]) = {
    x.areaOpt.get
  }
}

implicit object RectAreaFromLengthAndWidth extends AreaCalc[Rectangle[Some[Double], Some[Double], None.type]] {
  def area(x: Rectangle[Some[Double], Some[Double], None.type]) = (for {
    width <- x.widthOpt
    length <- x.lengthOpt
  } yield (width * length)).get
} 
```

以下是一些示例调用：

```
scala> Rectangle(Some(3.),None,Some(4.))
res8: Rectangle[Some[Double],None.type,Some[Double]] = Rectangle(Some(3.0),None,Some(4.0))

scala> res8.width
res9: Double = 1.3333333333333333

scala> Rectangle(Some(3.),None,None)
<console>:25: error: could not find implicit value for parameter widthCalc: WidthCalc[Rectangle[Some[Double],None.type,None.type]]
          Rectangle(Some(3.),None,None)

scala> Rectangle(None, Some(8.), Some(64.))
res10: Rectangle[None.type,Some[Double],Some[Double]] = Rectangle(None,Some(8.0),Some(64.0))

scala> res10.length
res11: Double = 8.0 
```

# dynamic-programming - 动态规划：从一组 100 个节点中找到具有 10 个节点的最小路径

> ID：10953545
> 
> 赞同：-6
> 
> 时间：2012-06-08T17:39:01.110
> 
> 标签：dynamic-programming

您有 100 个站点和每个相邻站点之间的距离。现在您必须在这 100 个站点中选择 10 个站点（意味着 10 个跃点），以使任意 2 个跃点之间的最大距离最小化。默认选择 1 和 100 个站点，因此您只需再选择 8 个站点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T01:19:27.267

既然你还没有告诉我们：

*   我认为时间不是问题
*   我假设内存不是问题。
*   我假设答案不是特定于编程语言的
*   我假设您的目标是从一个车站 (1) 到达目的地车站 (100)

> ```
> //Iterate through all possible paths to destination
> 
> //If you take more than 8 steps, stop and go back
> 
> //Note the total length of each path
> 
> //Select the shortest path 
> ```

您的问题不可能难以回答，因此，我的回答相当难以理解。您将需要学习[如何提出问题](https://stackoverflow.com/questions/how-to-ask)以获得体面的答案。

当你在做的时候，[学会接受答案](https://meta.stackexchange.com/questions/5234/how-does-accepting-an-answer-work)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T17:46:02.747

你需要给我们一个问题。看起来你被问到一个面试问题，然后希望我们把它给你，以向雇主重申。不过这很容易，我的家用电脑上有一个类似的程序，实现了一些不同的寻路技术。

# c++ - 在存在菱形继承的情况下防止冗余函数调用

> ID：10953547
> 
> 赞同：1
> 
> 时间：2012-06-08T17:39:06.537
> 
> 标签：c++, multiple-inheritance, diamond-problem

在存在菱形继承的情况下防止冗余函数调用的好策略是什么？具体来说，假设我们有一个程序：

```
#include <iostream>

struct A {
    int a;
    A(int a_) : a(a_) {}
    virtual void print() {
        std::cout << "a:  " << a << std::endl;
    }
};

struct B : virtual public A {
    int b;
    B(int a_,int b_) : A(a_), b(b_) {}
    virtual void print() {
        A::print();
        std::cout << "b:  " << b << std::endl;
    }
};

struct C : virtual public A {
    int c;
    C(int a_,int c_) : A(a_), c(c_) {}
    virtual void print() {
        A::print();
        std::cout << "c:  " << c << std::endl;
    }
};

struct D : public B,public C {
    int d;
    D(int a_,int b_,int c_,int d_) : A(a_), B(a_,b_), C(a_,c_), d(d_) {}
    void print() {
        B::print();
        C::print();
        std::cout << "d:  " << d << std::endl;
    }
};

int main() {
    D d(1,2,3,4);
    d.print();
} 
```

当我们调用 d.print() 时，我们得到：

```
a:  1
b:  2
a:  1
c:  3
d:  4 
```

其中 a 已打印两次。有什么好的方法可以防止这种情况吗？当然，我们可以使用如下代码手动连接连接：

```
#include <iostream>

struct A {
    int a;
    A(int a_) : a(a_) {}
    virtual void print_() {
        std::cout << "a:  " << a << std::endl;
    }
    virtual void print() {
        A::print_();
    }
};

struct B : virtual public A {
    int b;
    B(int a_,int b_) : A(a_), b(b_) {}
    virtual void print_() {
        std::cout << "b:  " << b << std::endl;
    }
    virtual void print() {
        A::print_();
        B::print_();
    }
};

struct C : virtual public A {
    int c;
    C(int a_,int c_) : A(a_), c(c_) {}
    virtual void print_() {
        std::cout << "c:  " << c << std::endl;
    }
    virtual void print() {
        A::print_();
        C::print_();
    }
};

struct D : public B,public C {
    int d;
    D(int a_,int b_,int c_,int d_) : A(a_), B(a_,b_), C(a_,c_), d(d_) {}
    virtual void print_() {
        std::cout << "d:  " << d << std::endl;
    }
    virtual void print() {
        A::print_();
        B::print_();
        C::print_();
        D::print_();
    }
};

int main() {
    D d(1,2,3,4);
    d.print();
} 
```

正确输出

```
a:  1
b:  2
c:  3
d:  4 
```

但我想知道是否有更好的方法。就出现这种情况而言，想象一下对象 A、B、C 和 D 的情况很复杂，需要能够将自己写入磁盘。我们只想为每个 A、B、C 和 D 编写一次输出代码，重要的是 D 不要将 A 的信息写两次。

<---编辑--->

这里还有两种解决问题的方法，但它们仍然有点迟钝。第一个来自 Cristian，涉及设置是否已打印 A 的标志

```
#include <iostream>

struct A {
    int a;
    bool have_printed;
    A(int a_) : have_printed(false), a(a_) {}
    virtual void print() {
        if(have_printed) return;
        std::cout << "a:  " << a << std::endl;
        have_printed=true;
    }
    void clear() {
        have_printed=false;
    }
};

struct B : virtual public A {
    int b;
    B(int a_,int b_) : A(a_), b(b_) {}
    virtual void print() {
        A::print();
        std::cout << "b:  " << b << std::endl;
    }
};

struct C : virtual public A {
    int c;
    C(int a_,int c_) : A(a_), c(c_) {}
    virtual void print() {
        A::print();
        std::cout << "c:  " << c << std::endl;
    }
};

struct D : public B,public C {
    int d;
    D(int a_,int b_,int c_,int d_) : A(a_), B(a_,b_), C(a_,c_), d(d_) {}
    void print() {
        B::print();
        C::print();
        std::cout << "d:  " << d << std::endl;
    }
};

int main() {
    D d(1,2,3,4);
    d.clear();
    d.print();
} 
```

这正确输出。第二种方法更复杂，但可能允许结构增长。基本上，我们将打印机从类中分离出来，然后在每个对象中注册一个打印机列表。当我们想要打印时，我们遍历打印机列表，然后为我们提供正确的输出。我觉得这使用了太多的机器，但我会包括以防其他人有更好的主意：

```
// A simple unary function.  Technically, the stl version doesn't require
// the operator
template <typename A,typename B>
struct unary {
    virtual B operator () (A a) {};
};

struct A {
    // Data
    int a;

    // A list of pointers to unary functions.  We need pointers to unary
    // functions rather than unary functions since we need the printer
    // to be polymorphic.
    std::list < unary<A*,void>* > printers;
    A(int a_);

    // We actually end up allocating memory for the printers, which is held
    // internally.  Here, we free that memory.
    ~A() {
        for(std::list < unary<A*,void>* >::iterator printer
                =printers.begin();
            printer != printers.end();
            printer++
        )
            delete (*printer);
    }

private:
    // Require for the dynamic cast used later
    virtual void ___dummy() {};
};
// Prints out the data for A
struct A_Printer : public unary<A*,void>{
    void operator () (A* a) {
        std::cout << "a:  " << a->a << std::endl;
    }
};
// Adds the printer for a to the list of printers
A::A(int a_) : a(a_) {
    printers.push_back(new A_Printer()); 
}

// Now that the structure is setup, we just need to define the data for b,
// it's printer, and then register the printer with the rest
struct B : virtual public A {
    int b;
    B(int a_,int b_);
};
struct B_Printer : public unary<A*,void>{
    void operator () (A* b) {
        std::cout << "b:  " << dynamic_cast <B*>(b)->b << std::endl;
    }
};
B::B(int a_,int b_) : A(a_), b(b_) {
    printers.push_back(new B_Printer());
}

// See the discussion for B
struct C : virtual public A {
    int c;
    C(int a_,int c_);
};
struct C_Printer : public unary<A*,void>{
    void operator () (A* c) {
        std::cout << "c:  " << dynamic_cast <C*>(c)->c << std::endl;
    }
};
C::C(int a_,int c_) : A(a_), c(c_) {
    printers.push_back(new C_Printer());
}

// See the discussion for B
struct D : public B,public C {
    int d;
    D(int a_,int b_,int c_,int d_);
};
struct D_Printer : public unary<A*,void>{
    void operator () (A* d) {
        std::cout << "d:  " << dynamic_cast <D*>(d)->d << std::endl;
    }
};
D::D(int a_,int b_,int c_,int d_) : A(a_), B(a_,b_), C(a_,c_), d(d_) {
    printers.push_back(new D_Printer());
}

// This actually prints everything.  Basically, we iterate over the printers
// and call each one in term on the input.
void print(A* a) {
    for(std::list < unary<A*,void>* >::iterator printer
            =a->printers.begin();
        printer != a->printers.end();
        printer++
    )
        (*(*printer))(a);
}

int main() {
    D d(1,2,3,4);
    // This should print 1,2,3,4
    print(&d);
} 
```

<---编辑 2--->

tmpearce 有一个好主意，在组装散列表之前将所有信息累积到散列表中。通过这种方式，可以检查个人信息是否已经创建并防止冗余。我认为当信息可以轻松组合时这是一个好主意。如果不是这种情况，可能会有轻微的变化，它结合了 tmpearce 和 Cristian 的想法。在这里，我们传递一个集合（或哈希表，或其他）来跟踪函数是否已被调用。通过这种方式，我们可以检查是否已经计算了某个函数。它不需要永久状态，因此多次调用应该是安全的：

```
#include <iostream>
#include <set>

struct A {
    int a;
    A(int a_) : a(a_) {}
    virtual void print_(std::set <std::string>& computed) {
        if(computed.count("A") > 0) return;
        computed.insert("A");
        std::cout << "a:  " << a << std::endl;
    }
    void print() {
        std::set <std::string> computed;
        print_(computed);
    }
};

struct B : virtual public A {
    int b;
    B(int a_,int b_) : A(a_), b(b_) {}
    virtual void print_(std::set <std::string>& computed) {
        A::print_(computed);
        if(computed.count("B") > 0) return;
        computed.insert("B");
        std::cout << "b:  " << b << std::endl;
    }
};

struct C : virtual public A {
    int c;
    C(int a_,int c_) : A(a_), c(c_) {}
    virtual void print_(std::set <std::string>& computed) {
        A::print_(computed);
        if(computed.count("C") > 0) return;
        computed.insert("C");
        std::cout << "c:  " << c << std::endl;
    }
};

struct D : public B,public C {
    int d;
    D(int a_,int b_,int c_,int d_) : A(a_), B(a_,b_), C(a_,c_), d(d_) {}
    virtual void print_(std::set <std::string>& computed) {
        B::print_(computed);
        C::print_(computed);
        if(computed.count("D") > 0) return;
        computed.insert("D");
        std::cout << "d:  " << d << std::endl;
    }
};

int main() {
    D d(1,2,3,4);
    d.print();
} 
```

在任何情况下，我都会将此问题标记为已解决。不过，我总是想听到更多的答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T18:01:58.273

我会在 A 结构中添加一个私有标志（如果菱形超出一个级别，则添加到 B 和 C）并检查它并将其标记为已遍历。这也有助于更复杂（嵌套）的菱形图案。

像这样：

```
struct A {
    int a;
    A(int a_) : a(a_) {traversed = false;}
    virtual void print() {
        if (traversed) return;
        std::cout << "a:  " << a << std::endl;
        traversed = true;
    }
private:
    bool traversed;
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T23:51:35.240

我的方法会结合你提到的方法。我会让虚拟方法做一些不同的事情：

```
class A
{
   public:
   virtual void getInfo(std::map<std::string,std::string>& output)
   {
      if(output.count("A") == 0)
      {
         output["A"] = "a: 1";
      }
   }
   void print()
   {
      std::map<std::string,std::string> m;
      getInfo(m); //virtual method (most derived will be called)
      std::map<std::string,std::string>::iterator iter = m.begin();
      for(; iter!=m.end(); ++iter)
      {
         std::cout<<iter->second();
      }
   }
};

class B : public A
{
   virtual void getInfo(std::map<std::string,std::string>& output)
   {
      A::getInfo(output);
      if(output.count("B") == 0)
      {
         output["B"] = "b: 2";
      }
   }
}; 
```

`print`现在是一种非虚拟方法，用于`getInfo`填充容器，然后对其进行迭代以显示/保存输出。因此，在将字符串写入容器并将其添加到容器之前，每个类都可以检查以确保容器尚未包含该继承链级别的所需输出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T00:22:04.800

只有一个类构造虚拟基（派生最多的，`D`）所以我会确保只有一个类打印`A`对象，并且像它的构造一样，首先发生（如果您将对象写入磁盘，这可能很重要。）

您可以向 的构造函数添加一个`void*`参数`A`并将其存储在`A`. 每个派生类都会将虚拟基础构造为`A(a, this)`.

向 中添加一个新成员函数`A`，`do_print(void*)`并让每个派生类调用`do_print(this)`而不是`A::print()`. 该`do_print(void*)`函数将其参数与`void*`传递给`A`ctor 的存储参数进行比较，并且仅在相同时打印。这依赖于每个派生类都有一个不同的地址，如果所有类都是非空的，这将是正确的，但如果这个假设成立，它确保只有最派生的对象打印虚拟基。

# python - 在 Django 中保存嵌套表单集的正确方法

> ID：10953548
> 
> 赞同：0
> 
> 时间：2012-06-08T17:39:09.033
> 
> 标签：python, django, django-forms

我有一个要呈现为嵌套表单集的 3 级测试模型。每个测试有多个结果，每个结果可以有多个行。我正在关注[Yergler 的](http://yergler.net/blog/2009/09/27/nested-formsets-with-django/)创建嵌套表单集的方法，以及更新 Yergler 代码以获取最新 Django 版本的[SO question](https://stackoverflow.com/questions/4832672/django-inline-formsets-with-a-complex-model-for-the-nested-form)（我在 1.4 上）

我遇到了麻烦，因为我想使用 FormSet 的“额外”参数在表单集中包含一个额外的 Line。每个 Line 的 ForeignKey 必须指向 Line 所属的 Result，但用户不能更改，所以我使用 HiddenInput 字段将 Result 包含在 FormSet 的每个 Lines 中。

这会导致“缺少必填字段”验证错误，因为该`result`字段总是被填写（在 add_fields 中），但`text`可能`severity`不会（如果用户选择不输入另一行）。我不知道处理这种情况的正确方法。我*认为*我不需要`result`在 add_fields 中包含初始值，并且必须有更好的方法可以实际工作。

**在下面更新到这个问题的底部**

如有必要，我很乐意添加更多细节。

我的自定义表单集的代码：

```
LineFormSet = modelformset_factory(
    Line,  
    form=LineForm,
    formset=BaseLineFormSet,
    extra=1)

class BaseResultFormSet(BaseInlineFormSet):

    def __init__(self, *args, **kwargs):
        super(BaseResultFormSet, self).__init__(*args, **kwargs)

    def is_valid(self):
        result = super(BaseResultFormSet, self).is_valid()

        for form in self.forms:
            if hasattr(form, 'nested'):
                for n in form.nested:
                    n.data = form.data
                    if form.is_bound:
                        n.is_bound = True  
                    for nform in n:
                        nform.data = form.data
                        if form.is_bound:
                            nform.is_bound = True
                    # make sure each nested formset is valid as well
                    result = result and n.is_valid()
        return result

    def save_all(self, commit=True):
        objects = self.save(commit=False)

        if commit:
            for o in objects:
                o.save()

        if not commit:
            self.save_m2m()

        for form in set(self.initial_forms + self.saved_forms):
            for nested in form.nested:
                nested.save(commit=commit)

    def add_fields(self, form, index):
        # Call super's first
        super(BaseResultFormSet, self).add_fields(form, index)

        try:
            instance = self.get_queryset()[index]
            pk_value = instance.pk
        except IndexError:
            instance=None
            pk_value = hash(form.prefix)

        q = Line.objects.filter(result=pk_value)
        form.nested = [
            LineFormSet(
                queryset = q, #data=self.data, instance = instance, prefix = 'LINES_%s' % pk_value)]
                prefix = 'lines-%s' % pk_value,
                initial = [
                    {'result': instance,}
                ]
            )] 
```

测试模型

```
class Test(models.Model):
    id = models.AutoField(primary_key=True, blank=False, null=False)

    attempt = models.ForeignKey(Attempt, blank=False, null=False)
    alarm = models.ForeignKey(Alarm, blank=False, null=False)

    trigger = models.CharField(max_length=64)
    tested = models.BooleanField(blank=False, default=True) 
```

结果模型

```
class Result(models.Model):
    id = models.AutoField(primary_key=True)   
    test = models.ForeignKey(Test)

    location = models.CharField(max_length=16, choices=locations)
    was_audible = models.CharField('Audible?', max_length=8, choices=audible, default=None, blank=True) 
```

线型

```
class Line(models.Model):
    id = models.AutoField(primary_key=True)
    result = models.ForeignKey(Result, blank=False, null=False)

    text = models.CharField(max_length=64)
    severity = models.CharField(max_length=4, choices=severities, default=None) 
```

* * *

**更新**

昨晚我将此添加到我的 LineForm(ModelForm) 类中：

```
def save(self, commit=True):
    saved_instance = None

    if not(len(self.changed_data) == 1 and 'result' in self.changed_data):
            saved_instance = super(LineForm, self).save(commit=commit)

    return saved_instance 
```

*如果仅*填写结果（隐藏输入），它会忽略保存请求。这种方法我还没有遇到任何问题，但我还没有尝试添加新表单。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T19:09:35.373

当我`extra`在类似情况下使用表单集时，我最终不得不在表单中包含模型中的所有必需字段，作为 HiddenInputs。有点难看，但它有效，好奇是否有人有破解方法。

**编辑**
当我在上面写的时候我很困惑，我只是在使用`extra`with`initial`来预先填写额外的表格，而且我还没有完全得到你问题的所有细节。

如果我理解正确，您`LineFormSet`在每个实例中实例化 s 的`add_fields`位置将指向同一个`Result`实例？

`result`在这种情况下，`initial`由于您遇到的问题，您真的不想提供。相反，您可以完全从 LineForm 模型表单中删除该字段并自定义`LineFormSet`类，例如：

```
class LineFormSet(forms.BaseModelFormSet):
    # whatever other code you have in it already
    # ...
    # ...
    def __init__(self, result, *args, **kwargs):
        super(LineFormSet, self).__init__(*args, **kwargs)
        self.result = result

    def save_new(self, form, commit=True):
        instance = form.save(commit=False)
        instance.result = self.result
        if commit:
            instance.save()
        return instance

    def save_existing(self, form, instance, commit=True):
        return self.save_new(form, commit) 
```

（这在 Django 1.3 和 1.4 中应该没问题，不确定其他版本）

所以你的方法的相关部分`add_fields`看起来像：

```
 form.nested = [
        LineFormSet(
            result = instance,
            queryset = q, #data=self.data, instance = instance, prefix = 'LINES_%s' % pk_value)]
            prefix = 'lines-%s' % pk_value,
        )] 
```

# magento - 了解 Magento 错误日志输出

> ID：10953554
> 
> 赞同：0
> 
> 时间：2012-06-08T17:40:04.527
> 
> 标签：magento, error-handling

Magento 的错误处理对我这个 Magento 世界的新手来说有点困惑。但是，我需要尽可能地学习理解它们，以便在我目前的工作岗位上继续成长。然而，也许只有我一个人，但我发现很难找到明确的信息来帮助对 Magento 的新手进行故障排除 - 就像其他系统一样。

所以，我来到这里希望有人可以为我澄清一些事情。

是否有在线资源甚至文档来帮助我理解错误日志输出？我试图修复的最新错误日志如下：

```
a:5:{i:0;s:174:"Cannot send headers; headers already sent in /Desktop/root/THEME_NAME/app/code/local/Ryomagento/VB/controllers/OptionsController.php, line 195";i:1;s:1609:"#0 /Desktop/root/THEME_NAME/lib/Zend/Controller/Response/Abstract.php(148): Zend_Controller_Response_Abstract->canSendHeaders(true)

#1 /Desktop/root/THEME_NAME/app/code/core/Mage/Core/Controller/Response/Http.php(105): Zend_Controller_Response_Abstract->setRedirect('http://nbc.loca...', 302)

#2 /Desktop/root/THEME_NAME/app/code/core/Mage/Core/Controller/Varien/Action.php(672): Mage_Core_Controller_Response_Http->setRedirect('http://nbc.loca...')

#3 /Desktop/root/THEME_NAME/app/code/local/Ryomagento/VB/controllers/OptionsController.php(166): Mage_Core_Controller_Varien_Action->_redirect('checkout/cart/')

#4 /Desktop/root/THEME_NAME/app/code/core/Mage/Core/Controller/Varien/Action.php(420): Ryomagento_VisualBadge_OptionsController->postAction()

#5 /Desktop/root/THEME_NAME/app/code/core/Mage/Core/Controller/Varien/Router/Standard.php(250): Mage_Core_Controller_Varien_Action->dispatch('post')

#6 /Desktop/root/THEME_NAME/app/code/core/Mage/Core/Controller/Varien/Front.php(176): Mage_Core_Controller_Varien_Router_Standard->match(Object(Mage_Core_Controller_Request_Http))

#7 /Desktop/root/THEME_NAME/app/code/core/Mage/Core/Model/App.php(349): Mage_Core_Controller_Varien_Front->dispatch()

#8 /Desktop/root/THEME_NAME/app/Mage.php(640): Mage_Core_Model_App->run(Array)

#9 /Desktop/root/THEME_NAME/index.php(92): Mage::run('nbc', 'website')

#10 {main}";s:3:"url";s:25:"/VB/options/post";s:11:"script_name";s:10:"/index.php";s:4:"skin";s:13:"nationalbadge";} 
```

需要注意的一些事项：

*   这目前在我的本地开发安装中。
*   我们试图将信息从 iFrame 中的一个系统传递到我们的购物车。它适用于当前部署的站点，但不适用于我在本地准备的新创建的商店。似乎沿着这条线的某个地方，当项目实际击中购物车时发生了中断 - 因为 HTTP 标头正在发送两个许多命令。
*   除了对问题的初步了解之外，我目前不确定......

正如我所说，我不是专家。只是充满热情，尤其是想在 Magento 中学习更多。这是我第一次处理 HTTP 标头并通过 URL 从 iFrame 传输数据到购物车。虽然我知道理论上发生了什么，但我无法详细描述它。

感谢任何人都可以提供的任何帮助！！我真的很想能够理解这些日志。只能帮忙。喜欢 Stack 社区...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T04:24:04.303

我能理解你的沮丧，我们都有成长的痛苦。这意味着引发错误的模块正在尝试获取已设置并发送输出的标头。我很乐意为您输入一个大而直接的答案，但这是您必须进行一些跟踪的错误之一。请查看 SO 答案，因为它应该会引导您找到正确的答案。 [Magento Debug HEADERS ALREADY SENT 错误](https://stackoverflow.com/questions/4670031/magento-debug-headers-already-sent-error)

# drupal - Drupal - 核心搜索模块错误

> ID：10953559
> 
> 赞同：1
> 
> 时间：2012-06-08T17:40:24.090
> 
> 标签：drupal, drupal-6

在我不确定是什么之前，搜索模块之前一直在工作。

每次我搜索关键字（验证它在文章中）时，搜索都会返回：

您必须包含至少一个 3 个字符或更多字符的肯定关键字。

以及未找到搜索结果。

我读过有时一个模块会导致冲突，但我已经逐个模块禁用了模块，每次都运行更新和 cron。在搜索设置上，没有等待索引的节点，并且我没有安装第三方搜索模块。有任何想法吗 ：） ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-23T14:44:46.390

我曾多次经历过这种情况，每次都是将 PHP 模式从 php-fast-cgi 切换到 php-fpm 的结果。快速/临时解决方案是更改 PHP 模式并重新索引 Drupal 中的内容。

2014 年 6 月 20 日更新：更新 Drupal 核心和一些模块（clientside_validation、ctools、context）以匹配使该站点能够毫无问题地在 PHP 5.3 fpm 上运行。只是核心更新允许搜索再次工作，但我们更新了模块，因为其中许多使用的 PHP 结构在 5.3 fpm 已过时

# java - 我无法让我的 hyperlinkListener 提供 URL；它是 NULL 值

> ID：10953560
> 
> 赞同：4
> 
> 时间：2012-06-08T17:40:31.707
> 
> 标签：java, html, hyperlink

我有一个正在构建的 Java Swing 应用程序。在其中，我创建了一个 JTextPane (displayPane)，我已将其设置为接收 HTML 格式的文本。我希望 HTML 有点动态，用户可以单击其中一个嵌入的图像并触发事件（在这种情况下，全屏查看图像）。所以我构建了 HTML 并设置了窗格的文本，它工作正常。然后我在窗格中添加了一个 HyperlinkListener 来监听所需的事件。HyperlinkEvent 有一个 .getURL()，即使图像出现在 JTextPane 中，它也会不断返回 NULL。

我真的希望 getURL() 能够实际工作，以便我可以将它扔到我创建的“popWindow”中（只是制作一个显示图像的大对话框 - 但我需要从 HyperlinkEvent 获取该图像）

提前感谢您的帮助。

Java代码：

* * *

```
private static void ShowAirportInfo(Airport airport) throws IOException {        
        HTMLEditorKit htmlKit = new HTMLEditorKit();
        displayPane.setEditorKit(htmlKit);
        displayPane.setEditable(false);
        displayPane.setText(buildHTMLAirportInfo(airport).toString());
        displayPane.setCaretPosition(0); //makes the pane go back to the top of the page after rendering the HTML.

        displayPane.addHyperlinkListener(new HyperlinkListener() {

        @Override
        public void hyperlinkUpdate(HyperlinkEvent he) {
          EventType eType= he.getEventType();
          URL url = he.getURL();

            if(eType.equals(EventType.ACTIVATED)){
                try {
                        popWindow.setImage(url.getPath());
                    } catch (IOException ex) {
                        Logger.getLogger(Phaero.class.getName()).log(Level.SEVERE, null, ex);
                    }
                popWindow.displayPane(); 
            }                
        }
    });             
} 
```

* * *

放入 JTextPane 的 HTML：

* * *

```
 <html>
<head>
<style type="text/css">body {font-family:verdana,arial,sans-serif;font-size:10pt;margin:30px;}</style></head>

<body>
<h2>General Info</h2>
<div><Table><tr><th align="right">ICAO:</><th align="left">VHHH</></tr><tr><th align="right">Name:</><th align="left">Hong Kong Intl</></tr><tr><th align="right">Location:</><th align="left"> HK</></tr><tr><th align="right">Elevation:</><th align="left">29</></tr><tr><th align="right">Longest Runway:</><th align="left">12469</></tr><th align="right">Lat:</><th align="left">22.30891944</></tr><tr><th align="right">Lon:</><th align="left">113.91460278</></tr></table></div><h2>AQP Status</h2>
<li>Mountainous terrain.</li>
<tr><td><a href="C:\Working\temp\airportDataDirectory\aqp\VHHH\overview\VHHH_overview.jpg"><img src="file:C:\Working\temp\airportDataDirectory\aqp\VHHH\overview\VHHH_overview.jpg" width=300 height=200></td><td><a href="C:\Working\temp\airportDataDirectory\aqp\VHHH\falconview\VHHH_falconview.jpg"><img src="file:C:\Working\temp\airportDataDirectory\aqp\VHHH\falconview\VHHH_falconview.jpg" width=300 height=200></td></tr><h2>Airport Comms</h2>
<li>TWR - 118.4,118.2,118.7,null,null</li>
<li>DEP - 123.8,124.05,null,null,null</li>
<li>CLD - 129.9,124.65,null,null,null</li>
<li>ATIS - 128.2,127.05,null,null,null</li>
<li>APP - 119.1,119.35,null,null,null</li>
<li>AFIS - 122.4,121,null,null,null</li>
<li>GND - 122.55,121.6,null,null,null</li>
<li>CAC - 120.6,null,null,null,null</li>
<li>RDR - 133.7,null,null,null,null</li>
<h2>Runways</h2>
<li>Runway 07R/25L</li>
<li>Dimensions: 12466 x 197</li>
<li>Surface: PERMANENT</li>
<li>Runway Condition: GOOD.</li>
<li>LCN: 87</li>
<li>Max demstrated Wingspan: null</li>
<table><tr><td>Runway: 07R</td><td>Runway: 25L</td></tr><tr><td>Heading: null</td><td>Heading: null</td></tr><tr><td>Slope: 0</td><td>Slope: 0</td></tr><tr><td>Latitude: 22.296202019999999</td><td>Latitude: 22.30743056</td></tr><tr><td>Longitude: null</td><td>Longitude: null</td></tr><tr><td><img src="file:C:\Working\temp\airportDataDirectory\aqp\VHHH\runway\VHHH_rwy07R.jpg" width=200 height=200></td><td><img src="file:C:\Working\temp\airportDataDirectory\aqp\VHHH\runway\VHHH_rwy25L.jpg" width=200 height=200></td></tr></table><li>A - ALSF-2</li>
<li>VASI Type: null</li><li> </li><li> </li><li>Runway 07L/25R</li>
<li>Dimensions: 12469 x 197</li>
<li>Surface: PERMANENT</li>
<li>Runway Condition: GOOD.</li>
<li>LCN: 87</li>
<li>Max demstrated Wingspan: null</li>
<table><tr><td>Runway: 07L</td><td>Runway: 25R</td></tr><tr><td>Heading: null</td><td>Heading: null</td></tr><tr><td>Slope: 0</td><td>Slope: 0</td></tr><tr><td>Latitude: 22.31040556</td><td>Latitude: 22.32163611</td></tr><tr><td>Longitude: null</td><td>Longitude: null</td></tr><tr><td><img src="file:C:\Working\temp\airportDataDirectory\aqp\VHHH\runway\VHHH_rwy07L.jpg" width=200 height=200></td><td><img src="file:C:\Working\temp\airportDataDirectory\aqp\VHHH\runway\VHHH_rwy25R.jpg" width=200 height=200></td></tr></table><li>A - ALSF-2</li>
<li>VASI Type: null</li><li> </li><li> </li><h2>Remarks</h2>
<li>Bird haz.</li>
<li>Rwy 07R/25L clsd Mon, Wed, Thu fr 1730-2359Z. Rwy 07L/25R clsd Tue, Fri, Sat, Sun fr 1730-2359Z.</li>
<li>All rwy are grooved. Ctc Apron Ctl (121.755) for Gnd Emerg.</li>
<li>IFR TAKE-OFF MINIMUMS AND DEPARTURE PROCEDURES:  Diverse departure not authorized.</li>
<li>All oil grades avbl.</li>
<li>A1 (Chevron USA C852-25113-380) SP0600-09-D.</li>
</ul>
</body>

</html> 
```

* * *

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T17:27:09.350

好吧，我觉得很愚蠢......我只是更好地阅读了文档......并注意到了这一点：getDescription

公共字符串 getDescription()

```
Get the description of the link as a string. This may be useful if a URL can't be formed from the description, in which case the associated URL would be null. 
```

参考::

[http://docs.oracle.com/javase/1.4.2/docs/api/javax/swing/event/HyperlinkEvent.html#HyperlinkEvent%28java.lang.Object,%20javax.swing.event.HyperlinkEvent.EventType,% 20java.net.URL,%20java.lang.String%29](http://docs.oracle.com/javase/1.4.2/docs/api/javax/swing/event/HyperlinkEvent.html#HyperlinkEvent%28java.lang.Object,%20javax.swing.event.HyperlinkEvent.EventType,%20java.net.URL,%20java.lang.String%29)

因此，我可以获得描述，而不是获取 URL，就像这样：

he.getDescription();

# scala - 如何在 Scala 2.9 中列出 100 个 1 的列表

> ID：10953563
> 
> 赞同：10
> 
> 时间：2012-06-08T17:40:59.670
> 
> 标签：scala, scala-2.9

在早期版本的 Scala 中，您可以使用 List.make(100, 1)，但现在已弃用。什么是新的正确方法？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-08T17:48:14.523

如*已弃用*的注释中所述：

```
@deprecated("use `fill' instead", "2.8.0") 
```

试试这个：

```
List.fill(100)(1) 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-08T17:50:04.533

正如文档所说：

```
 List.fill(100)(1) 
```

# android - 从 Android 的 Activity 中获取 EditText

> ID：10953565
> 
> 赞同：0
> 
> 时间：2012-06-08T17:41:03.983
> 
> 标签：android, android-widget

我想制作和 API 在斑马打印机上打印票，我有我的主要活动（仅用于测试）：

```
public class ZebraPrinterActivity extends Activity {
public EditText macAddress;
public Button testButton;
public Printer zebra;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    macAddress = (EditText) this.findViewById(R.id.editText1);
    testButton = (Button) this.findViewById(R.id.button1);

    zebra = new Printer(new ZebraPrinterActivity());
    testButton.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            new Thread(new Runnable() {
                public void run() {

                }
            }).start();
        }
    });
}} 
```

我有我的类（API）称为打印机：

```
public class Printer {

private ZebraPrinterConnection zebraPrinterConnection;
private ZebraPrinter zebra;
private String MAC;

public Printer (Activity activity) {
    zebraPrinterConnection = null;
    zebra = null;
    activity....get Edit Text
    this.MAC = MAC;
}} 
```

我需要的是从早期活动中获取编辑文本，有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T17:44:34.167

你试过这个吗？

```
EditText macAddress = (EditText) activity.findViewById(R.id.editText1);
String macAddressString = macAddress.getText(); 
```

`EditText`由于在非 UI 线程中访问 UI 元素的限制，某些视图上的操作可能无法正常工作。如果发生这种情况，请参阅此 SO 问题以了解从另一个线程访问 EditText 元素的方法：

[在非 UI 线程中做一些 Android UI 的事情](https://stackoverflow.com/questions/6223389/do-some-android-ui-stuff-in-non-ui-thread)

或者关于同一主题的 Android 博客文章：

[无痛穿线 | Android 开发者博客](http://android-developers.blogspot.co.uk/2009/05/painless-threading.html)

# windows - 为windows驱动程序开发设置eclipse

> ID：10953568
> 
> 赞同：4
> 
> 时间：2012-06-08T17:41:15.960
> 
> 标签：windows, eclipse, ide, eclipse-cdt, device-driver

我正在尝试使用 WDK 7.1.0 编写用户模式 ​​Windows（XP、Vista 和 7）虚拟打印机驱动程序。我打算使用 Eclipse IDE 进行开发，所以想知道我是否可以设置它。我希望做以下事情：-

1) Eclipse 能够识别 win32 api（C 和 C++）并因此为其函数名称提供自动完成等功能

2) Eclipse 使用 WDK 提供的编译器

3）通过eclipse调试代码（不确定这是否可能）

或者您会为 Windows 驱动程序开发建议一些其他开发环境吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-01T07:49:19.190

1.  从您需要的构建环境运行 Eclipse（免费或检查所需的架构）
2.  创建项目或将 C/C++ / 现有代码导入为 makefile 项目。选择 GNU 工具链。
3.  Properties -> Builders -> New -> Environment -> Select，选择所有变量，标记“添加到所有配置”，选择“replace native environment with specified on”。在 Main 选项卡上，选择所选构建环境的 build.exe 的完整路径。在工作区中选择您的项目目录作为“工作目录”
4.  属性 -> C/C++ 构建 -> 在 Bulder 设置选项卡上删除“使用默认构建命令”标志并输入“构建”
5.  属性 -> C/C++ 构建 -> 工具链编辑器 -> 选择工具。我个人选择了 msvc 编译器。
6.  Properties -> C/C++ General -> Paths and Symbols -> select包括你需要的，包括WDK的
7.  享受

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-09T12:20:40.157

当然，您应该使用带有[VisualDDK 插件的 MS Visual Studio。](http://visualddk.sysprogs.org/)

它允许您在本地或远程编译/调试内核模式驱动程序。

# javascript - 如何在没有每天 2.5k 请求限制的情况下从浏览器导航器的地理位置查询用户坐标？

> ID：10953572
> 
> 赞同：1
> 
> 时间：2012-06-08T17:41:30.217
> 
> 标签：javascript, geolocation, limit, latitude-longitude, w3c-geolocation

我的网络应用程序的 javascript 需要每 3 秒左右查询一次用户的地理位置，但由于谷歌查询限制政策，浏览器最终会拒绝/失败。

在调用 javascript 函数 navigator.geolocation.requestgetCurrentPosition(successCallback, errorCallback) 时，为了收集用户的经纬度坐标，大多数浏览器会查询 Google 的地理编码网络服务（https://maps.googleapis.com/maps/api/browserlocation /json?browser=googlechrome ...)。

该网络服务限制为每个客户端每天 2.5k 请求。如果您像我一样超出该限制，您将收到 OVER_QUERY_LIMIT 错误。

我了解您可以为 Google Enterprise 付费以获得更高的限额，但我的问题是：

当我从浏览器（chrome）请求用户的地理位置时，我只是这样做：navigator.geolocation.getCurrentPosition()，所以 chrome 插件将负责对谷歌地理定位服务进行实际调用；因此，即使我订阅了 Google Enterprise，我也无法将 clientID 或密钥发送到实际的 google 地理位置网络服务，因为 Chrome 不提供执行此操作的功能！

关于如何解决这个问题并每 3 秒从浏览器获取用户坐标的任何想法？

# c# - 如何查询 Oracle 并将结果存储到 DataGrid 中？

> ID：10953579
> 
> 赞同：1
> 
> 时间：2012-06-08T17:42:09.953
> 
> 标签：c#, .net, visual-studio-2010, gridview, oracle11g

我是 C#.NET 编程的业余爱好者。我需要使用我创建的表格中的数据填充网格，该表格基于用户从文本框中的日期选择器中给出的“日期（日期类型）”。有一个提交按钮，它使用日期填充网格。

我需要知道如何连接到数据库和网格以及如何使用文本框中给出的日期填充它。我对网格视图一无所知。

我在谷歌中找不到针对我的问题的相关网站。如果有人可以提供有关我的问题的通用代码或链接，我将非常高兴。提前致谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T17:58:47.153

这涉及了解几种不同的技术。我认为您不会找到所有这些的单一来源。由于这是一个一般性问题，我将为您提供一般性指导。

## 甲骨文

要连接到 Oracle，您需要使用[Oracle 的 DataAccess 组件 (ODAC)](http://www.oracle.com/technetwork/developer-tools/visual-studio/downloads/index.html)。阅读 ODAC 附带的一些 API 示例，了解如何连接到数据库并执行命令。它与 ADO.NET 非常相似。

当从数据库中提取信息作为查询的结果时，您需要将数据库数据加载到本地 .NET 类对象中。这就是您将提供数据网格的内容。

## WPF/Winforms

如何将结果*绑定*到 DataGrid 取决于您使用的是 WPF 还是 Winforms。如果您使用的是 WPF，您将需要研究[ItemsSource 绑定](http://wpftutorial.net/DataGrid.html)和[INotifyPropertyChanged](http://msdn.microsoft.com/en-us/library/system.componentmodel.inotifypropertychanged.aspx)接口。本质上，您将存储`ObservableCollection<T>`结果实体的列表（通常是 ）并将[DataGrid 的](http://msdn.microsoft.com/en-us/library/system.windows.controls.datagrid.aspx)ItemSource 属性*绑定到列表。*然后，您将定义要在网格中显示的列以及这些列如何映射到数据库实体的属性。

我对 Winforms 网格不太熟悉，但我相信也有一种方法可以绑定到这些网格。

# c++ - 获取空向量的 front() 会产生意外行为

> ID：10953581
> 
> 赞同：-1
> 
> 时间：2012-06-08T17:42:29.350
> 
> 标签：c++, stdvector

我有一个向量，其中包含一个类对象。我这样宣布

```
vector<Aircraft> queue; 
```

我删除了向量中的第一个元素。但似乎第一个元素仍在向量中。我这样做了。

```
queue.erase(queue->begin());
cout<<queue.size(); //printed 0 
Aircraft temp = queue.front();
cout<<temp.id; //expected a segfault error 
```

删除第一个元素（只有一个元素）后，向量的大小为 0。当我试图查看 temp (Aircraft) 的 id 时，我期待一个 seg 错误错误，因为我从向量中删除了第一个元素，之后大小为零。我什至清除了向量，但*“queue.front* ”仍然返回对象，并且*cout*语句仍然打印对象的 id。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-08T17:45:39.700

访问为空的 a是*未定义的行为*，因此您不能这样做，并且如果这样做，您将无法从程序的明显行为中推断出任何内容。`front()``vector`

`queue.size()`比通话前少一的事实`.erase`应该告诉您这`erase`已经奏效了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T17:44:07.753

很可能，您正在走向未定义的行为。向量不必将内存归零。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T18:09:34.633

典型的向量实现通常有一个 16 个元素的堆栈缓冲区。将向量增加到该大小，并且不会发生内存分配。因此，即使在删除元素之后，内存仍然存在（就像缓存一样，但可以使用），除非 Aircraft 在析构函数上自行清理，否则您将看到相同的值。

做这个实验：在飞机析构函数中毒化 id（比如说 -1234）并重新运行你的代码。把它当作一个学习实验，因为依赖诸如毒值之类的东西是不好的做法。

还要向矢量添加另一个项目，然后再次打印前面。你会得到新的物品。

还可以尝试运行在调试模式下编译的代码，当你调用 front() 时你会得到一个断言，你会期望崩溃。始终在调试模式下运行新代码，这就是它的用途。

# postfix-mta - 多个域的邮件服务器？

> ID：10953582
> 
> 赞同：-1
> 
> 时间：2012-06-08T17:42:44.857
> 
> 标签：postfix-mta, mail-server, linode, dovecot, squirrelmail

我有服务器，从 Linode 购买的。我决定在上面设置一个邮件服务器。我有大约 20 个域将指向它。

我有一些问题;

1.  这是我将使用的组合；后缀 + dovecot + squirrelmail。有更好的选择吗？我完全愿意接受推荐，因为这是我第一次设置邮件服务器。

2.  一台邮件服务器可以使用多个域吗？

3.  如果可以使用多个域，是否需要复杂而痛苦的配置？

注意：我不能使用 Google Apps，因为当您有一百个邮件地址时，每个邮件地址 40 欧元非常昂贵。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T17:52:27.287

您必须至少对 DNS 的工作原理有基本的了解。这可能有点痛苦，但如果您使用其中一个 postfix 插件进行管理，应该没问题。但是，是的，同一服务器上的多个域很好，它只需要知道它代表那些主机 hame 记录，并且您的域的 DNS 需要配置为使 MX 记录指向您服务器的 IP。

# java - 在paintComponent 之外使用图形

> ID：10953584
> 
> 赞同：0
> 
> 时间：2012-06-08T17:42:53.760
> 
> 标签：java, swing, graphics, paintcomponent

假设我们有以下情况：

```
JPanel panelp=new JPanel();
paintSomething(panelp.getGraphics(); 
```

在不同对象的其他地方，方法：

```
void paintSomething(Graphics g){ /*code*/ } 
```

我不想覆盖`paintComponent`. `panelp`我怎样才能使用of`panelp`的方法绘制一些东西？ `paintSomething``Graphics``panelp`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T18:00:45.980

`whatever.getGraphics()`is snapshot 是在什么时候消失的快照

*   第一次重绘后

*   `JComponets``Mouse`从or内部重新绘制`Key Events`，这些事件在具体实现`JComponets API`

*   使用的简单示例`whatever.getGraphics()`是打印到打印机或将当前 GUI 作为打印屏幕保存到例如 JPEG 或 PGN 文件

基本的东西在[2D Graphics中描述](http://docs.oracle.com/javase/tutorial/2d/index.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-08T17:57:18.770

You could draw your stuff in the `paintSomething` into a `BufferedImage` which you can then draw to the panel by overriding `paintComponent`

# xcode - Xcode SQLite - 有没有更简单的方法？

> ID：10953585
> 
> 赞同：0
> 
> 时间：2012-06-08T17:43:08.570
> 
> 标签：xcode, cocoa, ios5, sqlite

这是一个普遍的问题，而不是通常的 StackOverflow “有人可以纠正我的语法错误......”

SQL 是最精简的语言，因此我可以在一行中保存一条记录。例如

```
INSERT INTO database VALUES (4,'Nilsen', 'Johan', 'Bakken 2', 'Stavanger') 
```

但是如果我想用 SQLite 在 Cocoa 中保存/插入一条记录，我最终会写接近 14，例如

```
NSString *insertSQL = [NSString stringWithFormat: @"INSERT INTO CONTACTS (name, address, phone) VALUES (\"%@\", \"%@\", \"%@\")", name.text, address.text, phone.text];    
const char *insert_stmt = [insertSQL UTF8String];         
sqlite3_prepare_v2(contactDB,insert_stmt, -1, &statement, NULL);
if (sqlite3_step(statement) == SQLITE_DONE) {
self.status.text = @"Contact added";
self.name.text = @"";
self.address.text = @"";
self.phone.text = @"";
} else {
self.status.text = @"Failed to add contact";
}
sqlite3_finalize(statement);
sqlite3_close(contactDB); 
```

￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼ ￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼ ￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼}}

我了解每一行在做什么，但作为一个 Cocoa/SQLite 新手，我想要仔细检查的是是否有更简单的方法，或者每次我想要执行最复杂的 SQL 命令时，我是否只需要重复这种冗长的级别。 .

非常感谢￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T20:54:57.600

[使用 FMDB](http://github.com/ccgus/fmdb)（一个优秀的 SQLite 包装器）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-01T20:35:02.847

作为替代方案，您可以创建一个同时接受 SQL 查询和数据库名称的函数。函数的一大用途是简化编写代码的过程。

# php - 为什么选择选项上的 .click() 仅适用于 Firefox？

> ID：10953586
> 
> 赞同：0
> 
> 时间：2012-06-08T17:43:09.537
> 
> 标签：php, javascript, jquery, firefox, google-chrome

我有一个选择，其中包含从内容生成的一些选项：

```
 <select style="color: #444;">
<?php

$select_optd = 0;
foreach($DATA as $EACHOPTION){

// Checking some internal stuff, this works
if(IFISVALID){ // Now lets say it is valid, it will output some options

            // Option echo
    echo '<option';

            // Some code to show the first option as selected and setting some
            // later needed POST javascript variables
    if($select_optd == 0){
    echo ' selected="selected" ';
    $select_optd = 1;   
    $show_ctrl_id = $EACHOPTION['id'];
    $show_ctrl_spot = $EACHOPTION['spot'];
    }

            // echo the option html data

    echo  ' id="PRJ_OPT_'.$EACHOPTION['id'].$EACHOPTION['spot'].'" >';
    echo $EACHOPTION['title'] . ' - Spot: ' . $EACHOPTION['spot'];
    echo '</option>';

    ?>

    <script type="text/javascript">
            // Now the Javascript for when the option is selected
    $(document).ready(function(){   

    $('#PRJ_OPT_<?php print($EACHOPTION['id']); print($EACHOPTION['spot']);?>').click(function(){

            // An image showing the option selected     
    $('#PRJ_IMG_SHOW').attr('src','<?php print($EACHOPTION['image_url']); ?>'); 

            // Some posting inputs for later on
            $('#w_prj_id_send').val('<?php print($EACHOPTION['id']); ?>');
    $('#w_prj_spot_send').val('<?php print($EACHOPTION['spot']); ?>');

            // An alert to test if it's working  
    alert('Changed');
        });

    }); 
    </script>

    <?php   
    }else{ // that option was not valid, next one. }

} // End of Foreach
?>
</select> 
```

问题是选项上的这个 .click() 事件仅适用于 firefox。我在 Chrome、IE 上试过……只适用于 Firefox。

这个问题有解决方案或解释吗？

//------------------------------------------------ - - - - - - - - - // 解析度：

```
<script type="text/javascript">
    $(document).ready(function(){   

        $('#prj_selector').change(function(){
        var SELECTED_PRJ = $('#prj_selector').val();    

        <?php
        foreach($DATA as $EACHOPTION){
        ?>  
            if(SELECTED_PRJ == '<?php echo $EACHOPTION['title'] . ' - Spot: ' . $EACHOPTION['spot']; ?>'){
            $('#PRJ_IMG_SHOW').attr('src','<?php print($EACHOPTION['image_url']); ?>'); 
            $('#w_prj_id_send').val('<?php print($EACHOPTION['id']); ?>');
            $('#w_prj_spot_send').val('<?php print($EACHOPTION['spot']); ?>');
            }
        <?  
        }
        ?>                      

        });
    }); 
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T17:45:19.707

因为`<select>`是控件，不是普通元素。

`.change()`改为在选择元素本身上使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T17:46:17.440

对于选择框，您可以使用 .change() 事件而不是 .click

[http://comp345.awardspace.com/select_element_cheatsheet.pdf](http://comp345.awardspace.com/select_element_cheatsheet.pdf)

# jquery-ui - 如何使用 jquery 在选择框中启用/禁用选项

> ID：10953589
> 
> 赞同：12
> 
> 时间：2012-06-08T17:43:28.813
> 
> 标签：jquery-ui, jquery, jquery-selectors

我有一个包含选项的选择框，`optgroup`它是使用 php 动态生成的。现在，当我选择“ALL”所有其他`optgroup`选项时，选项应该被禁用，当我选择“ALL”以外的任何选项时，“ALL”选项应该是禁用

```
<select name="select1" id ="select1" onchange="handleSelect()">
    <option value ="-1">ALL</option>
    <optgroup label="CARS">
        <option value="ford">FORD</option>
        <option value="Nissan">Nissan</option>
    </optgroup>
</select>
<script>
    function handleSelect() {
        var selectVal = $("#select1:selected").text();
        if (selectVal == "ALL") {
            // cannot disable all the options in select box
            $("#select1  option").attr("disabled", "disabled");
        }
        else {
            $("#select1 option[value='-1']").attr('disabled', 'disabled');
            $("#select1 option").attr('disabled', '');
        }
    }
</script> 
```

我怎样才能使它工作？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-06-08T19:08:25.780

这是一种奇怪的事情，但这里的代码可以满足您的要求。

```
$('select').on('change', function() {
    if (this.value == '-1') {
        $('optgroup option').prop('disabled', true);
    } else {
        $('optgroup option').prop('disabled', false);
    }
}); 
```

**现场示例**- [http://jsfiddle.net/NpNFh/](http://jsfiddle.net/NpNFh/)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-06-24T05:26:17.073

您可以使用以下代码。假设您有以下三个选择框

```
<select class="sel_box" id="sel_1" onchange="disable_sel(this.value);" ></select>
<select class="sel_box" id="sel_2" onchange="disable_sel(this.value);" ></select>
<select class="sel_box" id="sel_3" onchange="disable_sel(this.value);" ></select> 
```

并且在函数中让“选择”是参数现在使用以下

```
$('.sel_box option[value="'+opt+'"]').attr("disabled", true); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T17:51:17.670

您可以对 disabled 属性的语法使用两种变体，具体取决于您所针对的 HTML 版本：

```
HTML4: <option value="spider" disabled>Spider</option>
XHTML: <option value="spider" disabled="disabled">Spider</option> 
```

# java - 如何避免在包含的 JSP 文件中重新声明标记库？

> ID：10953590
> 
> 赞同：0
> 
> 时间：2012-06-08T17:43:29.937
> 
> 标签：java, jsp, include, jstl

我为自己的 webapp 中的所有 JSP 制作了一个模板，使事情变得非常简单：

```
<%@ include file="header.jsp" %>

<!-- Put unique content here -->

<%@ include file="footer.jsp" %> 
```

我决定将导航菜单从 header.jsp 移到它自己的文件中，因为它变得越来越大。我将菜单的代码放入menu.jsp。这是包含在我的**header.jsp 中的外观：**

```
<html>
<head>
    <title>My JSP</title>
</head>

    <body>

        <jsp:include page = "menu.jsp"/>

 ...... 
```

但是，menu.jsp 将不起作用，除非我也将这一行放入其中：

```
<%@ taglib prefix = "c" uri = "http://java.sun.com/jsp/jstl/core"%> 
```

这已经在我的 header.jsp 中了。我只想把它放在那里。但是，当我尝试使用此语法时：

```
<%@ include file="menu.jsp" %> 
```

我从 WebLogic 11g 收到一条错误消息，指出

```
<%@ include file="header.jsp" %> is self refrencing 
```

如何在 header.jsp 中包含 menu.jsp 而不必在 menu.jsp 中包含 JSTL？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T18:16:49.430

*如果动态*包含的 JSP 页面( `<jsp:include />`) 使用 taglib，则它必须具有 taglib 声明，因为它是单独编译的。

静态包含的 JSP 页面没有相同的限制，因为它被编译到 servlet 本身中。

在使用它的 JSP 中声明 taglib 有什么大不了的？这使它成为一个独立的功能“块”，可以在任何地方动态包含，自我记录，而不用担心它被包含的页面：这是分解功能的目标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T18:19:19.113

也许代替`<%@ include file="page" %>`包含页面源代码的指令，尝试标准操作或仅包含页面动态响应而不包含其代码的`<jsp:include page="page"/>`JSTL 。`<c:import url="page"/>`

# python - 使用图像效果创建视频

> ID：10953594
> 
> 赞同：0
> 
> 时间：2012-06-08T17:43:50.440
> 
> 标签：python, opencv, image-processing

我目前正在做[一个项目](http://jlengrand.github.com/FaceMovie/)，我在该项目中生成几张图像，然后将它们转换为视频。我将 OpenCV 用于整个图像处理，尤其是[cv.WriteFrame](http://opencv.willowgarage.com/documentation/reading_and_writing_images_and_video.html)。

即使它工作得很好，我还是想为图像过渡添加一些效果。事实上，简单的事情，我希望图像相互融合，以避免目前的“暴力”方式。

我也对 cv.WriteFrames 中的 fps 有问题（这是不准确的）。

我在互联网上搜索没有找到任何库/实用程序来做到这一点，所以我开始考虑自己实现它。不过这会很麻烦。

你知道做这种事情的选择吗？我愿意接受任何解决方案！

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T19:46:38.473

为了平滑过渡，您很可能必须在 2 张图像之间放置一些额外的帧。那些额外的帧可能是 2 个图像逐渐相互添加。通常 opencv addWeighted 用于混合 2 个图像，它具有设置权重的参数。

添加加权文档：

[http://docs.opencv.org/modules/core/doc/operations_on_arrays.html#addweighted](http://docs.opencv.org/modules/core/doc/operations_on_arrays.html#addweighted)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T19:05:34.047

好吧，我从来没有使用过 OpenCV，但是如果你想做淡入或淡出，我可以设想做一些事情，比如创建逐渐增加 alpha 透明度的帧，并将它们添加到正在写入视频文件的堆栈中。使用 PIL 只需几行代码就可以完成类似的事情。

# android - 不同的活动或相同的活动但布局不同

> ID：10953609
> 
> 赞同：1
> 
> 时间：2012-06-08T17:45:07.547
> 
> 标签：android, android-layout

我正在开发一个应用程序，基本上我有 X 个不同的活动，但每个人的布局都与其他活动相同。为了让你更好地理解，让我举个例子：假设我有一个游戏，你必须每个级别猜 10 个单词，我有 5 个级别，基本上每个视图都有 10 个问题。那么最好有 5 个不同的活动，还是只有一个活动和 5 个布局，每个级别一个？在网上环顾四周，我没有找到一个好的答案，有人说 Android 是基于活动的，所以 10 种不同的是要走的路，但这只是一个猜测，没有什么技术性。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T17:53:45.087

不要做 10 个活动。不要做5个布局。除了文字之外，所有问题看起来都一样，对吧？不要重复自己。

简化您的生活，为每个问题重复使用相同的 Activity 和 Layout。当您启动活动时，您可以使用[.putExtra()](http://developer.android.com/reference/android/content/Intent.html#putExtra%28java.lang.String,%20android.os.Bundle%29)方法传入数据。用它来传递变化的东西，比如问题文本、正确答案和当前级别。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T17:51:48.953

我会做 1 个布局，然后将关卡编程到它上面。

做一个破砖游戏、俄罗斯方块或益智游戏不希望你有一百万个不同的活动选项，但更像是 1 个布局和 1 个活动会相应地填充。

通常你可以做类似 [home] -> {play, options, exit}

[play] -> {新游戏，关卡选择}

[选项] -> ....derp ...

[退出] -> ....derp ...

[newgame] --> start activityA where level = 1

[level select] -> 单击一个链接，该链接将以 level = selected 启动 activityA。

1 项活动将安全且良好地生成您的信息……比 imo 好得多。

# xslt - 无效的工厂配置 javax.xml.transform.TransformerConfigurationException：无法编译样式表

> ID：10953611
> 
> 赞同：-2
> 
> 时间：2012-06-08T17:45:15.463
> 
> 标签：xslt, saxon, xalan

当我使用 XSLT 1.0 和 saxon9he.jar 的组合使用 xslt 和 xsl-fo 进行 xml 到 pdf 的转换时，我得到了 Invalid factory configuration javax.xml.transform.TransformerConfigurationException: Failed to compile stylesheet 的异常。我的 lib 文件夹包含用于 xpdl 到 xml 转换的 saxon9he.jar，使用 xslt2 和 xalan.2.7.1.jar 用于 xml 到 pdf 转换。第一部分工作正常，但第二部分由于 saxon.jar 的 (trasnformer,transfor(arg1, arg2)) 存在主导 xalan.jar (transfor(a1,a2)。但 xml 的第二部分如果我从我的 lib 文件夹中删除了 saxon9he.jar，pdf 转换（xalan.jar）工作正常。我期待专家的良好回应。请在下面找到我的示例代码。thnx 提前...

```
out = new FileOutputStream(pdf);
        BufferedOutputStream    out1 = new BufferedOutputStream(out);

        Fop fop =   newFop(MimeConstants.MIME_PDF, out1);

        TransformerFactory factory = TransformerFactory.newInstance();
        Transformer transformer = factory.newTransformer(); 
        Source src = new StreamSource(fo);

        Result res = new SAXResult(fop.getDefaultHandler());

        // i am getting exception at following line.
        transformer.transform(src, res); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T23:35:23.497

如果您需要在同一个应用程序中使用 Saxon 和 Xalan，那么不要依赖 TransformerFactory.newInstance()，它会加载它找到的第一个 XSLT 引擎。您始终可以通过实例化 TransformerFactory 接口的特定实现来显式加载您想要的。

# macos - 如何修复此 PDL 安装？

> ID：10953614
> 
> 赞同：3
> 
> 时间：2012-06-08T17:45:54.523
> 
> 标签：macos, perl, installation, pdl

我已经在 Mac OS X (10.7.3) 机器上安装了[PDL 。](http://pdl.perl.org)显然 SciPDL 安装程序放置`PDL.pm`在 中`/Library/Perl/5.12/darwin-thread-multi-2level`，所以我添加了

```
use lib '/Library/Perl/5.12/darwin-thread-multi-2level'; 
```

在我的测试脚本的顶部。我现在收到这些错误：

```
dyld: lazy symbol binding failed: Symbol not found: _Perl_Gthr_key_ptr
  Referenced from: /Library/Perl/5.12/darwin-thread-multi-2level/auto/PDL/Core/Core.bundle
  Expected in: flat namespace

dyld: Symbol not found: _Perl_Gthr_key_ptr
  Referenced from: /Library/Perl/5.12/darwin-thread-multi-2level/auto/PDL/Core/Core.bundle
  Expected in: flat namespace 
```

不幸的是，这些错误对我来说意义不大。他们的意思是什么？解决方案是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T21:12:19.590

用于`cpanm`安装模块而不是 SciPDL 安装程序。安装`cpanm`：

*   从网络引导：

    ```
    curl -L http://cpanmin.us | perl - --self-upgrade 
    ```

*   或者使用 Perl 附带的 CPAN 客户端：

    ```
    cpan App::cpanminus 
    ```

安装 PDL：

```
cpanm PDL 
```

这将为您的特定平台编译 PDL，确保正确设置所有路径。

# apache - 使用 mod_rewrite (ajaxplorer) 将根目录隐形重写到子目录

> ID：10953615
> 
> 赞同：5
> 
> 时间：2012-06-08T17:45:58.610
> 
> 标签：apache, mod-rewrite, pydio

几个小时以来，我一直在各种网站上阅读 mod_rewrite 示例，并且在成功使用它之前已经多次使用它......但我现在正在尝试一些新的东西，但我一生都无法让它工作！

我正在使用一个名为的 PHP 文件管理器工具`AjaXplorer`，我将它放在服务器根目录的子目录中`/ajaxplorer-core-4.0.4`。当我转到我网站的根目录时，我`http://domain.com/`希望它不可见地重定向到该`/ajaxplorer-core-4.0.4`文件夹​​（但仍会在地址栏中显示根域）。

我仍然希望能够正常访问根目录上的其他文件/目录，只需输入路径即可。

我认为这是可能的？看起来相对简单，但我就是无法让它工作。

AjaXplorer 似乎从 加载 js 文件和图像等`/ajaxplorer-core-4.0.4/plugins`，我有一种感觉，这就是它让我绊倒的地方。

任何指针将不胜感激！谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-09T19:03:52.383

幸运的是在另一个答案上找到了它:)

```
RewriteEngine on 
RewriteCond %{HTTP_HOST} ^(www.)?site.com$ 
RewriteCond %{REQUEST_URI} !^/subdir/ 
RewriteCond %{REQUEST_FILENAME} !-f 
RewriteCond %{REQUEST_FILENAME} !-d 
RewriteRule ^(.*)$ /subdir/$1 
RewriteCond %{HTTP_HOST} ^(www.)?site.com$ 
RewriteRule ^(/)?$ subdir/index.php [L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T19:45:08.207

*   [这是serverfault.com](https://serverfault.com/questions/214512/everything-you-ever-wanted-to-know-about-mod-rewrite-rules-but-were-afraid-to-as)的 wiki
*   howto的[htaccess 官方指南](http://httpd.apache.org/docs/2.2/howto/htaccess.html)
*   [官方 mod_rewrite](http://httpd.apache.org/docs/current/mod/mod_rewrite.html)指南

如果这还不够：

## 两个提示：

如果您**不在**托管环境中（= 如果它是*您自己的服务器*并且*您**可以**修改虚拟主机*，而不仅仅是`.htaccess`文件），请尝试使用该`RewriteLog`指令：它可以帮助您追踪此类问题：

```
# Trace:
# (!) file gets big quickly, remove in prod environments:
RewriteLog "/web/logs/mywebsite.rewrite.log"
RewriteLogLevel 9
RewriteEngine On 
```

* * *

我最喜欢的检查正则表达式的工具：

[http://www.quanetic.com/Regex](http://www.quanetic.com/Regex)（不要忘记选择 ereg(POSIX) 而不是 preg(PCRE)！）

# c# - 如何在 C# 中将 XML 数据从 MS Access 传递到服务器 .ASPX 页面？

> ID：10953620
> 
> 赞同：0
> 
> 时间：2012-06-08T17:46:22.280
> 
> 标签：c#, asp.net, xml, ms-access

所以我有一个带有 VB 脚本从 Access 数据库加载数据的 MS Access 程序。我想将此信息传递给我的服务器。我希望以 XML 格式传输数据。

在服务器端，我有一个 ASPX 页面设置来处理传入的数据。如何从 MS Access 获取数据到该 ASPX 页面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T18:19:23.877

您可能希望使用 Web 服务来传递数据。MS Access 并非真正设计为使用 SOAP/ASMX、JSON 等。您可以安装 Web 服务参考工具（下面的链接）。由于您有一个 ASPX 页面，我们可以假设您正在运行 IIS。因此，您必须创建一个可以使用您想要传递给它的数据的 Web 服务。创建 Web 服务后，在 Access 中找到新的 Web 服务（使用工具包），并根据需要使用公开的方法。

[http://msdn.microsoft.com/en-us/library/aa140260%28v=office.10%29.aspx](http://msdn.microsoft.com/en-us/library/aa140260%28v=office.10%29.aspx)

# clojure - 同一命名空间中的 Clojure deftype 调用函数抛出“java.lang.IllegalStateException: Attempting to call unbound fn:”

> ID：10953621
> 
> 赞同：7
> 
> 时间：2012-06-08T17:46:27.297
> 
> 标签：clojure, annotations, interop

我将 Clojure 放入一个大量使用 Jersey 和 Annotations 的现有 Java 项目中。我希望能够利用以前工作的现有自定义注释、过滤器等。到目前为止，我一直在大致使用带有 javax.ws.rs 注释的 deftype 方法，在[Clojure 编程](http://www.clojurebook.com/)的第 9 章中可以找到。

```
(ns my.namespace.TestResource
  (:use [clojure.data.json :only (json-str)])
  (:import [javax.ws.rs DefaultValue QueryParam Path Produces GET]
           [javax.ws.rs.core Response]))

;;My function that I'd like to call from the resource.
(defn get-response [to]
  (.build
    (Response/ok
      (json-str {:hello to}))))

(definterface Test
  (getTest [^String to]))

(deftype ^{Path "/test"} TestResource [] Test
  (^{GET true
     Produces ["application/json"]}
  getTest
  [this ^{DefaultValue "" QueryParam "to"} to]
  ;Drop out of "interop" code as soon as possible
  (get-response to))) 
```

正如您从评论中看到的那样，我想在 deftype 之外调用函数，但在同一个命名空间内。至少在我看来，这使我可以将 deftype 的重点放在互操作和连接到 Jersey 上，并且应用程序逻辑是独立的（更像是我想编写的 Clojure）。

但是，当我这样做时，会出现以下异常：

```
java.lang.IllegalStateException: Attempting to call unbound fn: #'my.namespace.TestResource/get-response 
```

deftype 和命名空间有什么独特之处吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-08T18:09:34.963

...有趣的是，我在这个问题上的时间并没有得到答案，直到我在这里问:)

看起来命名空间加载和定义类型在[这篇文章中得到了解决。](https://groups.google.com/forum/#!msg/clojure-dev/4CtSVWcD15A/shpMuyjMpxsJ) 我怀疑 deftype 不会自动加载命名空间。正如在帖子中发现的那样，我可以通过添加这样的要求来解决这个问题：

```
(deftype ^{Path "/test"} TestResource [] Test
  (^{GET true
     Produces ["application/json"]}
    getTest
    [this ^{DefaultValue "" QueryParam "to"} to]
    ;Drop out of "interop" code as soon as possible
    (require 'my.namespace.TestResource) 
    (get-response to))) 
```

# c# - 启动端点时升级到 NServiceBus 3.2.2 异常

> ID：10953627
> 
> 赞同：3
> 
> 时间：2012-06-08T17:46:44.573
> 
> 标签：c#, nservicebus, publish-subscribe

我最近使用 Nuget 将我的发布者/订阅者解决方案升级到 NServiceBus 版本 3.2.2。我的 NServiceBus 发布者和订阅者都是自托管的。

发布者代码：

我使用 NServiceBus.Host.exe 启动 NServiceBus 发布者（调试启动操作 - 在项目属性中启动外部程序）。

应用程序配置：

```
<?xml version="1.0" encoding="utf-8"?>
 <configuration>
  <configSections>
    <section name="MsmqTransportConfig" type="NServiceBus.Config.MsmqTransportConfig,  NServiceBus.Core" />
    <section name="UnicastBusConfig" type="NServiceBus.Config.UnicastBusConfig, NServiceBus.Core" />
    <section name="MessageForwardingInCaseOfFaultConfig" type="NServiceBus.Config.MessageForwardingInCaseOfFaultConfig, NServiceBus.Core" />
  </configSections>
  <MsmqTransportConfig ErrorQueue="error" NumberOfWorkerThreads="1" MaxRetries="5" />
  <UnicastBusConfig ForwardReceivedMessagesTo="">
    <MessageEndpointMappings></MessageEndpointMappings>
  </UnicastBusConfig>
  <MessageForwardingInCaseOfFaultConfig ErrorQueue="error" />
</configuration> 
```

EndpointConfig.cs：

```
namespace TrackEventPublisher.EventPublisher
{
   [EndpointName("EventPublisher")]
   public class EndpointConfig : IConfigureThisEndpoint, AsA_Publisher
   {
   }
} 
```

运行发布者时遇到以下错误：

启动端点时出现异常，已记录错误。原因：在“RavenTimeoutPersistence”类型上调用构造函数“Void .ctor(Raven.Client.IDocumentStore)”时引发异常。

堆栈跟踪：

在 d:\BuildAgent-03\work\nsb.master22\src\hosting\NServiceBus.Hosting\GenericHost.cs:NServiceBus.Hosting.Windows.WindowsHost.Start() 中的 NServiceBus.Hosting.GenericHost.Start() 中的第 45 行在 d:\BuildAgent-03\work\nsb.master22\src\hosting\NServiceBus.Hosting.Windows\WindowsHost.cs:NServiceBus.Hosting.Windows.Program.<>c_ *DisplayClass8.b* _4的第 56 行在 d:\BuildAgent-03\work\nsb.master22\src\hosting\NServiceBus.Hosting.Windows\Program.cs:topshelf.Internal.ControllerDelegates `1.StartActionObject(Object obj) in d:\dev\open-source\topshelf\src\Topshelf\Internal\ControllerDelegates.cs:line 18 at Topshelf.Internal.IsolatedServiceControllerWrapper`1.<>c_ *DisplayClass2.b* _1(TService service) 的第 95 行d:\dev\open-source\topshelf\src\Topshelf\Internal\IsolatedServiceControllerWrapper.cs：Topshelf.Internal.ServiceController 的第 65 行`1.<.cctor>b__1(ServiceController`1 sc) 在 d:\dev\open-source\topshelf\src\Topshelf\Internal\ServiceController.cs:第 35 行 Magnum.StateMachine.LambdaAction `1.Execute(T instance, Event event, Object parameter) in :line 0 at Magnum.StateMachine.EventActionList`1.Execute(T stateMachine, Event event, Object parameter) in :line 0

什么可能导致此错误？
谁能告诉我我的端点配置有什么问题？

我的解决方案适用于早期版本的 NServiceBus（3.0 之前的版本）。

**更新**：这是内部异常消息：“无法连接到远程服务器”

Raven 服务器是由 NServiceBus 自动启动的吗？它似乎没有在我的机器上运行......

**更新** 好吧，由于某种原因，RavenDB 服务没有在我的机器上运行——尽管它被设置为自动启动。我的解决方案现在工作正常。我想我必须以艰难的方式了解 RavenDB :)。

有没有人在运行 RavenDB 服务时遇到问题？

**更新**

现在我的服务已经启动并运行了，我尝试在另一台机器上运行它。未创建 msmq 文件夹，我收到 RavenDB 不可用的错误消息。事实上，在我在不同的 Windows 操作系统机器上运行我的解决方案后，并没有安装 RavenDB 服务。我尝试运行随版本 3.2.2 发布的“RunMeFirst.bat”。但是，bat 文件会尝试使用 Visual Studio 安装扩展。如果安装了 Visual Studio，但未安装 Nuget 扩展，则会发布另一个错误。

是否有更好的方法来启用 NServiceBus.Host.exe 来安装 RavenDB 服务器和 msmq 文件夹，而无需在 Windows 操作系统机器上安装 Visual Studio 实例？

**更新**

哇，有史以来最多的更新！我将以下类添加到成功创建 msmq 文件夹的发布者项目中：

```
 class MsmqTransportConfigOverride : IWantCustomInitialization, INeedToInstallInfrastructure<Windows>
   {
      public void Init()
      {
       Configure.Instance.ForInstallationOn<NServiceBus.Installation.Environments.Windows>().Install();
      }

      public void Install(System.Security.Principal.WindowsIdentity identity)
      {
      }
   } 
```

这个实现 IWantCustomIntialization 接口的新类似乎工作得很好。但是，我仍在努力更新我的发布者以在 Windows 主机上安装 RavenDB。我知道有一个命令行提示可以促进这一点，但还有其他方法吗？我尝试实现 INeedToInstallInfrastructure 接口，但我找不到任何示例。有没有人有任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T08:33:48.317

我们仅在以下情况下运行安装程序： 1\. 将端点安装为 Windows 服务（如果在生产配置文件中运行 => 默认） 2\. 在调试模式下运行 3\. 在集成/精简配置文件中运行

所以这可以解释为什么没有创建队列（假设以上都不适合你？）

# ssrs-2008 - 如何更改 SSRS 2008 语言环境

> ID：10953629
> 
> 赞同：2
> 
> 时间：2012-06-08T17:46:56.493
> 
> 标签：ssrs-2008

我花了很多时间在互联网上搜索，但此时有点绝望。

我们有一个报告有两个 DataSet 字段定义为

```
Date_Difference = Round((DateDiff("d", Fields!StartDate.Value, Fields!EndDate.Value))* Fields!ProjectStatusPct.Value)

status_date = CDate(DateAdd("d", Fields!Date_Difference.Value, Fields!StartDate.Value)) 
```

SSRS 和 BIDS 都安装在同一台服务器（VM、Windows Server 2008 R2）上。Region，Language，Format，机器上我能想到的一切都配置为en_US。

报告属性中的语言是 en-US，我在报告代码中定义了这个 en-US 以确保。

```
<Language>en-US</Language> 
```

同样在reportViewer.aspx中，我改变了

```
<%@ Page Language="C#" AutoEventWireup="true" Inherits="Microsoft.ReportingServices.WebServer.ReportViewerPage"%> 
```

至

```
<%@ Page Language="C#" AutoEventWireup="true" Inherits="Microsoft.ReportingServices.WebServer.ReportViewerPage" Culture="en-US"%> 
```

正如一些帖子所建议的那样。

数据源服务器（MSSQL 2008，在同一台机器上）语言也是 en-US。

该报告在 BIDS 设计器中看起来不错。但是，当我将它部署到服务器时，日期格式会变得混乱。报告服务器将 MM/dd/yyyy（美国格式）作为 dd/MM/yyyy（加拿大格式）。结果，status_date 字段总是生成错误的日期，如果涉及到像 03/31/2012 这样的日期，则为 NULL

当我查看 SSRS 日志文件时，标题始终显示为

```
 <Header><Product>Microsoft SQL Server Reporting Services Version 2007.0100.5500.00 ((Katmai_PCU_Main).110922-0336 )</Product><Locale>English (Canada)</Locale><TimeZone>Pacific Daylight Time</TimeZone><Path>C:\Program Files\Microsoft SQL Server\MSRS10.MSSQLSERVER\Reporting Services\Logfiles\ReportServerService__06_07_2012_16_30_41.log</Path><SystemName>KAM1ODDBS06</SystemName><OSName>Microsoft Windows NT 6.1.7601 Service Pack 1</OSName><OSVersion>6.1.7601</OSVersion><ProcessID>1160</ProcessID></Header>rshost!rshost!ec0!06/07/2012-16:30:41:: i INFO: CLR runtime is initialized. 
```

所以我认为 BIDS 采用本地机器的语言设置，然后正确处理日期。

更多信息 ：

*   浏览器(IE) 的语言是 en_US
*   当我将报告部署到具有 en_US 语言环境的其他报告服务器时，它可以工作。

我的问题是，如何将此报告服务器的区域设置也更改为 en_US？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T10:00:18.113

我认为设置服务器语言可能会解决它。分配区域设置有两个级别，一个是报告级别，另一个是文本框或字段级别（如果可能）。检查你的领域有什么。以防万一您可能也对此感兴趣[http://technet.microsoft.com/en-us/library/ms155064(v=sql.100).aspx](http://technet.microsoft.com/en-us/library/ms155064(v=sql.100).aspx)它谈到了您所描述的案例。

# apache - 使用 htaccess 的移动重定向不起作用

> ID：10953630
> 
> 赞同：0
> 
> 时间：2012-06-08T17:47:00.860
> 
> 标签：apache, .htaccess, redirect, mobile, subdomain

我有一个名为[http://www.mydomain.com.au的网站](http://www.mydomain.com.au)

还有一个移动子域 www.m.mydomain.com.au

我使用以下 htaccess 代码

```
 #Mobile Redirection
    RewriteEngine on
    RewriteCond %{HTTP_HOST} !^m\.mydomain\.com\.au$
    RewriteCond %{HTTP_USER_AGENT} "android|blackberry|ipad|iphone|ipod|iemobile|opera mobile|palmos|webos|googlebot-mobile" [NC]
    RewriteRule ^/?(.*)$ http://m.mydomain.com.au/ [L,R=302] 
```

问题是当我从移动设备键入[http://www.mydomain.com.au/anyurl](http://www.mydomain.com.au/anyurl)时，它不会重定向到移动站点。我只需要将所有 pc 网站 url 转移到我的移动网站主页 www.m.mydomain.com.au

任何帮助请。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T19:56:51.977

认为如果您的移动网站网址是 www.m.mydomain.com.au，您应该这样写：

```
#Mobile Redirection
RewriteEngine on
RewriteCond %{HTTP_HOST} !^www\.m\.mydomain\.com\.au$
RewriteCond %{HTTP_USER_AGENT} "android|blackberry|ipad|iphone|ipod|iemobile|opera mobile|palmos|webos|googlebot-mobile" [NC]
RewriteRule ^/?(.*)$ http://www.m.mydomain.com.au/ [L,R=302] 
```

如果它不起作用，您可以发布您的 2 个虚拟主机吗？

问候;

咪咪

# c++ - 如果我比较双打，如何让 gcc 生成警告？

> ID：10953632
> 
> 赞同：4
> 
> 时间：2012-06-08T17:47:02.963
> 
> 标签：c++, gcc, warnings

我想在我的代码中捕获双精度的相等比较并获得警告。是否有 GCC 警告会执行此操作？

这不是可以在源代码中轻松找到的东西。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-08T17:50:33.213

GCC 4.7.0 有：

```
gcc --help=warnings 
```

它产生了，除许多其他外：

```
-Wfloat-equal               Warn if testing floating point numbers for equality 
```

（GCC 4.1.2 不支持扩展帮助；它“只是”有`--help`。不过，它确实有警告选项。）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-08T17:52:35.243

快速`man gcc`显示这是一个可能的候选人

```
 -Wfloat-equal 
```

# http - HTTP Connection 标头值是否区分大小写？

> ID：10953635
> 
> 赞同：8
> 
> 时间：2012-06-08T17:47:11.307
> 
> 标签：http, http-headers

标头的、和等值**是否**区分大小写？`keep-alive``Close``Upgrade``Connection:`

我正在编写一个简单的 Web 服务器，并想知道在检查它们之前是否应该将值转换为小写。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-08T18:12:52.937

我找不到任何明确的*Connection*字段值区分大小写的规范。但由于[*Connection*可能包含标题字段的名称](https://www.rfc-editor.org/rfc/rfc2616#section-14.10)：

> […] 对于此字段中的每个连接令牌，请从消息中删除与连接令牌同名的任何标头字段。

并且由于这些[标头字段名称不区分大小写](https://www.rfc-editor.org/rfc/rfc2616#section-4.2)，因此我得出的结论是*Connection*的字段值也被认为是不区分大小写的。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-09-04T08:08:30.170

不，连接标头值（又名“连接选项”）不区分大小写。更新的[HTTP 1.1 RFC 7230 在第 6.1 节中](https://www.rfc-editor.org/rfc/rfc7230#section-6.1)指出：

> Connection 标头字段的值具有以下语法：
> 
> ```
> Connection        = 1#connection-option
> connection-option = token 
> ```
> 
> **连接选项不区分大小写。**

我的大胆。请注意，所有[标头字段](https://www.rfc-editor.org/rfc/rfc7230#section-3.2)都不区分大小写。

> 每个标头字段都包含一个不区分大小写的字段名称...

当然，请记住，这正是规范所说的。这并不意味着所有浏览器、服务器等实现都是兼容的（或没有错误的；）

# android - 在 android 平板电脑上为应用程序设置不可缩放的宽度

> ID：10953638
> 
> 赞同：0
> 
> 时间：2012-06-08T17:47:34.490
> 
> 标签：android, cordova, meta-tags, viewport, scalable

我正在使用 phonegap 开发适用于 android 平板电脑的应用程序。我正在转换现有网页，所以我宁愿不更改 css 或 html。我正在使用银河选项卡（android 2.2）进行测试

**我想将可视宽度设置为 800px 并禁止用户放大/缩小。**

如果我使用 `<meta name="viewport" content="width=800px>`，则宽度设置正确，但用户仍然可以缩放页面。

如果我使用`<meta name="viewport" content="width=800px, user-scalable=no">`，则用户无法缩放页面，但宽度会更小（即页面被放大，用户必须滚动才能查看页面）

我唯一能想到的另一件事是使用`<meta name="viewport" content="minimum-scale=x, maximum-scale=x">`where`x`是一些我不知道如何找到的神奇数字。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T12:32:16.437

这对我有用：

```
<script>
    $(document).ready(function(){
        var vpScale = window.outerWidth/800/window.devicePixelRatio;
        var metas = document.getElementsByTagName('meta');
        var i;
        for (i=0; i< metas.length; i++) {
            if (metas[i].name == "viewport") {
                metas[i].content = "minimum-scale=" + vpScale + ", maximum-scale=" + vpScale;
            }
        }
    });
</script> 
```

# javascript - 根据元素的值从 XML 文件中提取文本？

> ID：10953642
> 
> 赞同：0
> 
> 时间：2012-06-08T17:47:55.023
> 
> 标签：javascript, xml, parsing

我有一个简单的 XML 文件，如下所示：

```
<?xml version="1.0" ?>
<devices>

<device>
<name>Inside</name>
<value>67.662498</value>
</device>

<device>
<name>Outside</name>
<value>69.124992</value>
</device>

</devices> 
```

我想使用 JavaScript 提取“外部”的温度（值）。这是我到目前为止所拥有的：

```
<script type="text/javascript">
if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.open("GET","data.xml",false);
xmlhttp.send();
xmlDoc=xmlhttp.responseXML;

document.getElementById("name").innerHTML=
xmlDoc.getElementsByTagName("name")[0].childNodes[0].nodeValue;
document.getElementById("value").innerHTML=
xmlDoc.getElementsByTagName("value")[0].childNodes[0].nodeValue;
</script> 
```

当我在 HTML 文件中运行它时，它会提取名称“内部”及其温度值，而不是外部温度值。我只想能够运行它并将“69.124992”显示为值。我需要添加什么来解析这个文件，以便它只查找名称为“Outside”的设备？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T17:53:23.427

您当前的实现只是获取名称和值的第一次出现并显示值，而不是为什么不只是循环

```
var names = xml.getElementsByTagName('name');
for (var iDx = 0; iDx < names.length; iDx++) {
     if (names[iDx].childNodes[0].nodeValue == 'Outside') {
         jQuery('#name').text(names[iDx].childNodes[0].nodeValue);
         jQuery('#value').text(xml.getElementsByTagName('value')[iDx].childNodes[0].nodeValue);
         break;
    }
} 
```

[JSFiddle](http://jsfiddle.net/mprabhat/6Yzez/1/)

# c - 多线程访问数据结构

> ID：10953647
> 
> 赞同：1
> 
> 时间：2012-06-08T17:48:20.670
> 
> 标签：c, linux, multithreading, list, pthreads

我正在使用 C、pthreads 和套接字在 Linux 中编写应用程序。

这将是客户端-服务器应用程序，服务器将有 N+2 个线程，其中 N - 活动客户端的数量，一个用于接受新连接并为客户端创建线程的线程，最后一个将接受用户输入。

我将使用链表来保存一些与我的应用程序相关的数据，每个客户端都会在我的列表中关联一个节点。这些客户端线程会以一定的时间间隔更新存储在其节点中的信息，可能是一秒，也可能是两分钟，它会动态变化。

现在问题来了，如果用户请求它，存储在链表中的信息需要写入标准输出。当然，在写作期间我应该获得互斥锁。我担心整个列表的一个互斥锁会阻碍性能。

我正在考虑将互斥锁与每个节点相关联，但这会使删除某些指定节点变得复杂（首先，我需要确保“stdout writer”线程不会遍历列表，我还需要获取互斥锁我的节点和前一个节点更改指向下一个节点的指针，依此类推——要么我需要一直遍历到前一个节点，要么我需要制作双链表）。

所以我想知道涉及多个互斥锁的解决方案是否会更好，代码、条件和所有这些锁定、等待和解锁都更加复杂。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T18:29:12.177

您是对的，拥有每个节点的互斥锁会使代码更加复杂。这是一个权衡，你必须决定它的价值。您可以为整个列表设置一个锁，这可能会导致锁争用，但代码在很大程度上不受锁存在的影响，因此更容易编写，或者您可以拥有更多锁而竞争机会大大减少，导致更好的性能，但代码更难编写和正确。您甚至可以通过为每组节点设置一个锁来在中间拥有一些东西 - 一起分配几个节点并为该组设置一个锁 - 但是您将在跟踪空闲列表和潜在的碎片方面遇到问题。

您需要考虑添加操作、删除操作和完整列表迭代以及其他操作（重组、搜索，以及您的应用程序需要的任何其他操作）的相对频率。如果添加/删除非常频繁，但每三个蓝月亮走一次列表，那么单锁可能很合适。但是，如果遍历列表（无论是完整的数据转储，还是搜索或其他）非常普遍，那么更精细的方法会变得更有吸引力。您甚至可能需要考虑读/写锁而不是互斥锁。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T18:35:40.203

您不需要一直遍历列表：当您遍历它时，您测试下一个元素是否是您要删除的元素，然后您可以锁定两个节点 - 在整个代码中始终以相同的顺序，因此您可以避免死锁。此外，当您需要确定互斥节点有什么时，您可以使用*双重检查习惯并锁定互斥节点。*

```
remove
    for node in list
        if node->next is the desired node
            lock(node)
            lock(node->next)
                if node->next is the desired node
                    do removing stuff
                else
                    treat concurrent modification - retry, maybe?
            release(node->next)
            release(node) 
```

使用此习惯用法，您无需在阅读时锁定整个列表，并且还检查在第一次测试和锁定之间执行的修改。我不相信使用一组互斥锁会使代码变得更加复杂，并且与您可能执行的操作相比，锁定开销微不足道，例如 IO。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-08T18:51:40.123

除非您拥有数万甚至数十万用户，否则阅读该列表不会花费那么长时间。您可能想要创建一个本地的中间列表，以便在写入时不会锁定原始列表，这*可能*需要一些时间。这也意味着您可以在某个时间点获得列表的快照。如果您锁定单个节点，您可以删除 A，*然后*删除元素 B，但当 B 没有出现时，A 会出现在显示的列表中。

据我了解，如果您*确实*想锁定单个节点，则您的列表必须单独链接。添加和删​​除变得相当棘手。在 Java 中，有几个系统类使用快速比较和交换技术来执行此操作。C中一定有类似的代码，但我不知道在哪里寻找它。你会得到那些按时间顺序排列的结果。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-08T18:04:32.593

如果您要为 N 个活动客户端使用 N 个线程，请考虑使用 pthread_setspecific 和 pthread_getspecific 的选项。

# google-chrome - Chrome中的colspan问题

> ID：10953648
> 
> 赞同：0
> 
> 时间：2012-06-08T17:48:37.240
> 
> 标签：google-chrome, width, html-table

在单元格上使用 colspan 时，在 Chrome 中，单元格采用上方单元格的宽度而不是整行。在 IE 中运行良好。即使在单元格上设置 100% 宽度也不会改变任何东西。

```
<table cellspacing="1px" cellpadding="0" border="0" id="shiftData">
                    <tr>
                        <td class="topRow">Employee</td>
                        <td class="topRow">Working For</td>
                        <td class="topRow">Shift</td>
                        <td class="topRow">Date</td>
                        <td class="topRow">Time</td>
                    </tr>
                    <tr>
                        <td>Audrey W</td>
                        <td>Justin B</td>
                        <td>Host</td>
                        <td>6/14/12</td>
                        <td>4:00pm</td>
                   </tr>
                    <tr><td colspan="5" align="right" class="buttonRow"><a class="approve" href="">Approve</a><a class="deny" href="">Deny</a></td></tr>
                    <tr>
                        <td>Justing B</td>
                        <td>Leigh Anne</td>
                        <td>Dishwasher</td>
                        <td>6/16/12</td>
                        <td>11:00am</td>
                    </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T18:35:56.063

我有一个花车：对；在显然导致 Chrome 出现问题的单元格 div 上。

# c++ - 映射/设置迭代器不可递增

> ID：10953650
> 
> 赞同：0
> 
> 时间：2012-06-08T17:48:55.257
> 
> 标签：c++, visual-studio-2010, stl

我在visual studio 2010中使用下面的代码得到了这个“map/set iterator not incrementable”运行时错误，我自己无法弄清楚..这是一个平台相关的问题吗？下面详细列出了整个代码部分。请帮助我，谢谢！

```
#include <vector>
#include <map>
#include <string>
#include <iostream>
using namespace std;
void printHighChangeables(const map<string,vector<string>>& , int );
map<string,vector<string>> computeAdjacentWords(const vector<string>& );

int main()
{

    string v1[16]={"wine","dine","fine","line","nine","pine","vine","kine","wind","wing",
        "wins","hoot","loot","soot","root","boot"};
    const vector<string> words (&v1[0], &v1[15]);

    map<string,vector<string>> adjWords = computeAdjacentWords(words);
    printHighChangeables(adjWords,3);
}

void printHighChangeables(const map<string,vector<string>>& adjWords, int minWords=3)
{
    map<string,vector<string>>::const_iterator itr;
    for(itr = adjWords.begin(); itr != adjWords.end(); itr++)
    {
        const pair<string,vector<string>>& entry = *itr;
        const vector<string> & words = entry.second;
        if(words.size() >= minWords)
        {
            cout<<entry.first<<"("<<words.size()<<"):";
            for (int i = 0; i<words.size(); i++)
                cout<<" "<<words[i];
            cout<<endl;
        }
    }
}

//computes a map in which the keys are words and values are vectors of words
//that differ in only one character from the corresponding key
//Uses an efficient algorithm that is O(NlogN) with a map
map<string,vector<string>> computeAdjacentWords(const vector<string>& words)
{
    map<string,vector<string>> adjWords;
    map<int,vector<string>> wordsByLength;
    for(int i=0; i<words.size(); i++)
        wordsByLength[words[i].length()].push_back(words[i]);
    //work on each group separately
    map<int,vector<string>>::const_iterator itr;
    for(itr=wordsByLength.begin(); itr!=wordsByLength.end();itr++)
    {
        const vector<string>& groupsWords = itr->second;
        int groupNum = itr->first;
        //work on each position in each group
        for(int i = 0; i<groupNum; i++)
        {
            //Remove a character in given position, computing representatives
            //Words with same representatives are adjacent; so populate a map
            map<string,vector<string>> repToWord;
            for(int j=0; j<groupsWords.size(); j++)
            {
                string rep = groupsWords[j];
                rep.erase(i,1);
                repToWord[rep].push_back(groupsWords[j]);
            }
            map<string,vector<string>>::const_iterator itr2;
            for(itr2 = repToWord.begin(); itr2 != repToWord.end(); itr++)
            {
                const vector<string> & clique = itr2->second;
                if(clique.size() >= 2)
                    for(int p=clique.size(); p<clique.size(); p++)
                        for(int q=p+1; q<clique.size(); q++)
                        {
                            adjWords[clique[p]].push_back(clique[q]);
                            adjWords[clique[q]].push_back(clique[p]);
                        }
            }
        }
    }
    return adjWords;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-08T17:54:59.563

这个循环增加了错误的迭代器：

```
for(itr2 = repToWord.begin(); itr2 != repToWord.end(); itr++)
                                              //       ^^^^^  should be itr2 
```

# facebook - Magento 网站的外部链接始终相同

> ID：10953654
> 
> 赞同：-1
> 
> 时间：2012-06-08T17:49:02.460
> 
> 标签：facebook, url, magento, hyperlink, magento-1.5

我的 Magento 网站有问题：当我在其他网站上链接到我的 Magento 网站（例如在 Facebook 上）时，我总是得到相同的页面标题和相同的图像。我在 facebook 上链接的 Netherless 女巫页面，它始终是相同的标题和图像。

例如：

我在 Facebook 上链接：www.example.com - 链接标题：“主页”，图片：徽标 www.examle.com/product/... - 链接标题：“主页”，图片：徽标

你明白？我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T18:01:17.127

将 Open Graph 元标记放入您的页面，告诉 Facebook 使用哪个标题和图像 - 请参见此处：[https ://developers.facebook.com/docs/opengraph/keyconcepts/](https://developers.facebook.com/docs/opengraph/keyconcepts/)

而您是 FB 调试器，它会告诉您页面中缺少哪些信息：[https ://developers.facebook.com/tools/debug/](https://developers.facebook.com/tools/debug/)

# c# - c# winforms usercontrol - 无法创建 System.Drawing.Image

> ID：10953655
> 
> 赞同：0
> 
> 时间：2012-06-08T17:49:10.890
> 
> 标签：c#, winforms, image

我正在尝试在内存中创建一个图像，以便我可以组合两个或多个透明图像并将它们作为位图呈现在用户控件的图片框中。

我的开箱码：

```
System.Drawing.Image Beat = new System.Drawing.Image() 
```

导致“无法创建抽象类或接口‘System.Drawing.Image’的实例”

谁能告诉我为什么？

我正在使用以下指令（以排除歧义）

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Drawing;
using System.Data;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using DevExpress.XtraEditors; 
```

非常感谢

担

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T17:52:07.973

`System.Drawing.Image`是抽象的，就像编译器告诉你的那样。您需要选择 Image 的“具体”实现，例如`Bitmap`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T17:52:25.080

[System.Drawing.Image](http://msdn.microsoft.com/en-us/library/system.drawing.image.aspx)是一个抽象类，这意味着它不能被实例化。您需要创建派生自它的具体类的实例，例如[System.Drawing.Bitmap](http://msdn.microsoft.com/en-us/library/system.drawing.bitmap.aspx)或[System.Drawing.Imaging.Metafile](http://msdn.microsoft.com/en-us/library/system.drawing.imaging.metafile.aspx)。

# c++ - 将字符串数组传递给多个进程的 for 循环中的 CreateProcess

> ID：10953659
> 
> 赞同：1
> 
> 时间：2012-06-08T17:49:27.827
> 
> 标签：c++, c, winapi

我不得不承认，这段代码中我不熟悉的大部分 win32 api 东西。话虽如此，我想将我所知道的融入我的学习过程中。我正在尝试创建一个 for 循环，该循环将`CreateProcess`多次使用不同的参数。在 Visual Studio 中，我得到一个编译错误：

```
source.cpp(138): error C3867: 'std::basic_string<_Elem,_Traits,_Alloc>::c_str': function call        missing argument list; use '&std::basic_string<_Elem,_Traits,_Alloc>::c_str' to create a     pointer to member
1>          with
1>          [
1>              _Elem=char,
1>              _Traits=std::char_traits<char>,
1>              _Alloc=std::allocator<char>
1>          ] 
```

运行以下代码时：

```
std::string arrString[3] = {"dir","cd ..","dir"};
            int i;
            LPWSTR cmd =L"cmd";

            for(i=0; i<3; i++)
            {
            STARTUPINFO info={sizeof(info)};
            PROCESS_INFORMATION processInfo;
            if (CreateProcess(cmd, arrString[i].c_str, NULL, NULL, TRUE, 0, NULL, NULL, &info, &processInfo))
            {
                ::WaitForSingleObject(processInfo.hProcess, INFINITE);
                CloseHandle(processInfo.hProcess);
                CloseHandle(processInfo.hThread);
            } 
```

我是否朝着正确的方向前进？

**编辑：**

```
 std::string arrString[3] = {"cmd","cmd","cmd"};
            int i;
            LPWSTR cmd =L"cmd";

            for(i=0; i<3; i++)
            {
                STARTUPINFO info={sizeof(info)};
                PROCESS_INFORMATION processInfo;
                vector<wchar_t> cmdline(arrString[i].begin(), arrString[i].end()); 
                CreateProcessW(cmd, &cmdline[0], NULL, NULL, TRUE, 0, NULL, NULL, &info, &processInfo);
                    ::WaitForSingleObject(processInfo.hProcess, INFINITE);
                    CloseHandle(processInfo.hProcess);
                    CloseHandle(processInfo.hThread);

            } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T17:52:48.457

在这一行

```
if (CreateProcess(cmd, arrString[i].c_str, NULL, NULL, TRUE, 0, NULL, NULL, &info, &processInfo)) 
```

`arrString[i].c_str`你是按你的意思写`arrString[i].c_str()`的。

# qt - 是否可以使用 QAbstractSocket 检索 IPv6 地址？

> ID：10953669
> 
> 赞同：0
> 
> 时间：2012-06-08T17:50:15.803
> 
> 标签：qt, ipv6

是否可以在 上检索 IPv6 地址`QAbstractSocket`？您可以使用 IPv4 检索一个，`QAbstractSocket::peerAddress()`但我不确定 IPv6 一个。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T20:01:34.260

只需查看文档。`peerAddress()`返回一个泛型——它`QHostAddress`不限于 IPv4！只要您已连接到 IPV6 对等体，完整的 IPV6 地址将通过使用返回`QHostAddress::toIPv6Address`。像这样：

```
QAbstractSocket socket;
socket.connectToHost(QHostAddress("2607:f8b0:4009:803::1005"), 80); // google.com
....
const QHostAddress & addr = socket.peerAddress();
if (addr.protocol() == QAbstractSocket::IPv6Protocol) {
  Q_IPV6ADDR address6 = addr.toIPv6Address();
  ...
} 
```

# c# - 单击一次部署后的通知图标设置

> ID：10953670
> 
> 赞同：5
> 
> 时间：2012-06-08T17:50:15.993
> 
> 标签：c#, wpf, clickonce, system-tray, notifyicon

我有一个单击一次部署的应用程序，它使用使用[Hardcodet WPF NotifyIcon](http://www.codeproject.com/Articles/36468/WPF-NotifyIcon)创建的通知图标。当我部署它并最初安装它时，Windows 默认隐藏图标（应该如此）。所以我将应用程序的设置更改为“始终显示图标和通知”。但是每次更新到新版本时，Windows 都会认为它是一个新应用程序并再次隐藏它。有什么方法可以让 Windows 在更新后保留通知图标的可见性设置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T07:58:57.463

不幸的是，没有办法让 ClickOnce 来处理这个问题。这会定期出现在 MSDN ClickOnce 论坛中，由于 Bing 是我的朋友，我可以为您提供[此链接](http://social.msdn.microsoft.com/Forums/en/winformssetup/thread/c33ab558-7fd5-4330-a985-9702358472d0)，指向其中一篇对此有一些想法的文章。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T16:05:24.420

不确定这是否是您正在寻找的答案，但我认为这不可能“开箱即用”。从 Windows 的角度来看，每个 clickonce 版本都是不同的应用程序。我在使用 Windows 防火墙时遇到了同样的问题 - 安装更新时不会保留防火墙规则。我想您唯一的解决方案是找到一种方法将您的应用程序手动添加到该列表中。

# php - 来自 PHP 应用程序的 MySQL 连接监视器

> ID：10953672
> 
> 赞同：0
> 
> 时间：2012-06-08T17:50:16.530
> 
> 标签：php, mysql, connection

我想知道是否有任何工具可以监控来自 php 应用程序的 MySQL 连接，显示已建立的连接以及连接是否关闭。

目标是修复应用程序，以便在打开连接时，在工作完成后将其关闭。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T17:57:44.697

您可以使用[PDO](http://www.php.net/manual/pdo.connections.php)创建连接，当它们超出范围或设置为时，`null`它们将自动关闭。

从链接的手册页（强调添加）：

> 成功连接到数据库后，会将 PDO 类的实例返回给您的脚本。**该连接在该 PDO 对象的生命周期内保持活动状态。**要关闭连接，您需要通过确保删除对它的所有剩余引用来销毁该对象——您通过将 NULL 分配给保存该对象的变量来做到这一点。**如果您没有明确地这样做，PHP 将在您的脚本结束时自动关闭连接。**

# jquery - youtube iframe api Uncaught TypeError：无法调用未定义的方法'postMessage'

> ID：10953678
> 
> 赞同：0
> 
> 时间：2012-06-08T17:50:49.517
> 
> 标签：jquery, iframe, console, youtube-api

我有一个视频播放器，我想在右下角实现：http: [//downloads.raileurope.com/web_redesign/FinalFinal/redesign-michele/index.html](http://downloads.raileurope.com/web_redesign/FinalFinal/redesign-michele/index.html)

我的问题是视频下方的链接以浏览视频（特别是单击点）。我使用了这种技术[http://jsfiddle.net/Y9j7R/5/](http://jsfiddle.net/Y9j7R/5/)，它在firefox和safari中运行良好，但在chrome或ie中却不行。在控制台中，我收到错误 Uncaught TypeError: Cannot call method 'postMessage' of undefined。任何帮助将不胜感激。

箭头的工作很有趣，因为我所做的只是在点上模拟点击（使用 next() 和 prev()） 这些在 ie7 中根本不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T18:33:16.917

您的技术在 Chrome 上对我来说似乎很好用（Mac 版本 19.0.1084.53）。不要像你说的那样打印“无法调用方法'postMessage'”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T15:40:51.910

似乎 IE7 不支持 youtube iframe api 工作所需的 HTML5 postMessage。不知道为什么有时会出现 chrome 错误。

# c# - 将代码 c# 转换为 vb.net 委托

> ID：10953680
> 
> 赞同：0
> 
> 时间：2012-06-08T17:50:58.090
> 
> 标签：c#, vb.net, delegates

我正在尝试将示例代码的 c# 代码转换为 vb.net，但我可以使用以下代码行。这是一个事件，代表。但我无法构建功能结构。有人可以帮助我吗？谢谢

```
Ellipse node = new Ellipse();
node.Style = nodeStyle;

node.MouseEnter += delegate(object sender, MouseEventArgs e) {
    if (selectedNode == null)
        node.BeginStoryboard((Storyboard)FindResource("NodeFadeIn"));
};

node.MouseLeave += delegate(object sender, MouseEventArgs e) {
    if (selectedNode == null)
        node.BeginStoryboard((Storyboard)FindResource("NodeFadeOut"));
};

node.PreviewMouseDown += delegate(object sender, MouseButtonEventArgs e) {
    e.Handled = true;
    selectedNode = (Ellipse)sender;
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T18:12:34.250

您需要在 VB.NET 中使用 AddHandler 关键字来订阅事件处理程序。在 VS2010 中，可以用 lambda 替换匿名方法，如下所示：

```
 AddHandler node.MouseEnter, _
        Sub()
            If node Is Nothing Then
                node.BeginStoryboard(DirectCast(FindResource("NodeFadeIn"), System.Windows.Media.Animation.Storyboard))
            End If
        End Sub 
```

在 VS2008 及更早版本中，您需要编写一些私有方法。

# eclipse - 我可以保留将 Eclipse 从 Indigo 升级到 Juno 的设置吗？

> ID：10953686
> 
> 赞同：79
> 
> 时间：2012-06-08T17:51:43.900
> 
> 标签：eclipse, eclipse-juno

如何在不丢失所有自定义设置的情况下将 Eclipse 从 Indigo 升级到 Juno？

我尝试了两种不同的方法，但都没有奏效：

*   从 Indigo 导出首选项并导入 Juno
*   在 Indigo 工作区的副本上运行 Juno

每次升级都必须从头开始真是烦人...

* * *

## 回答 #1

> 赞同：90
> 
> 时间：2012-06-27T12:52:54.787

我不是专家，但我只是在“可用软件站点”中添加了新站点（帮助 -> 安装新软件 -> 可用软件站点）

`http://download.eclipse.org/releases/juno`

`http://download.eclipse.org/tools/cdt/releases/juno`

并更新（帮助-> 安装更新）。

更新后

`http://download.eclipse.org/eclipse/updates/4.2`已添加 `http://download.eclipse.org/eclipse/updates/3.7`已禁用 `http://download.eclipse.org/tools/cdt/releases/indigo`已禁用

也许其他我没有注意到的变化。

一切似乎都按预期工作 - 项目列表仍然存在 - 观点仍然存在 - 唯一没有保留的似乎是在工作区中打开的编辑器选项卡，但这是很小的损失。所以希望这是正确的做法——除非有人想以不同的方式告诉我。

艾伦

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-06-27T16:58:34.047

我遵循了 AlanB 描述的相同方式，并且从 Indigo 升级没有问题：

1.  添加[Juno 更新站点](http://download.eclipse.org/releases/juno/)和您正在使用的[其他项目](http://www.eclipse.org/downloads/index_project.php)`Eclipse`的更新站点（在> `Preferences`>下`Available Software Sites`）

2.  选择`Help`>`Check for Updates`

3.  按照更新向导（选择你需要的一切，接受你必须的一切）

4.  重启 Eclipse

附加信息：

eclipse.org wiki 中的常见问题解答条目：[**“如何升级 Eclipse？”**](http://wiki.eclipse.org/FAQ_How_do_I_update_Eclipse%3F)

Eclipse Juno (4.2) 自述文件（稍微详细一点）：[**“Upgradeing Workspace from a Previous Release”**](http://www.eclipse.org/eclipse/development/readme_eclipse_4.2.html#Upgrading)

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2012-07-28T14:16:39.340

你们正在把这变成一个比实际更大的问题，Eclipse 被设计为可移植的，即它不需要安装或在注册表中存储设置等......

升级和维护设置就像下载版本 Y 并将其解压缩到版本 X 文件夹中一样简单，覆盖除配置文件夹之外的所有内容。无论如何，新版本配置文件夹中只有 2 或 3 个通用文件，直到它第一次运行之后。我在过去的 4 个 Eclipse 版本中都这样做过，并且从未遇到过问题。

唯一要记住的是，您使用的任何专用版本中未包含的任何内容都可能需要升级，但这只是在第一次运行新版本后单击帮助下的检查升级的问题。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-08-01T03:20:46.217

@AlanB，这对我不起作用，因为发布回购不包括 Eclipse SDK。也许自从你升级后组织已经改变了。

我必须将以下存储库：http: [//download.eclipse.org/eclipse/updates/4.2/](http://download.eclipse.org/eclipse/updates/4.2/)添加 到可用的软件站点。

即使那样检查更新也不起作用。必须通过安装新软件路径，选择上面的repo，然后它会显示Eclipse SDK，Eclipse Platform SDK等选项。必须根据当前安装选择正确的选项进行升级（即，如果它是平台或 SDK 等）

希望这可以帮助某人。

抄送

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-07-16T09:53:17.433

*您可以通过Export...> Preferences > Export all*在您的旧安装中传输您的大部分首选项，然后将它们导入到您的新安装中。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-10-14T22:56:06.627

编辑：这是给 Linux 用户的

这个链接应该有帮助：[http ://blog.brunobraga.net/eclipse-42-in-ubuntu-1204](http://blog.brunobraga.net/eclipse-42-in-ubuntu-1204)

本质上，您只需要用新下载的最新版本替换您的 /usr/lib/eclipse 即可，仅此而已。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-07-16T10:38:25.363

您可以使用从公共根文件夹导入现有项目

*文件 > 导入... > 常规 > 现有项目到工作区*

除了偏好转移（如 thSoft 建议的那样）：

*文件 > 导出... > 常规 > 首选项 > 导出所有*
*文件 > 导入... > 常规 > 首选项 > 全部导入*

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-10-31T10:46:45.623

您可以使用[eclipse-perspective-share](http://code.google.com/p/eclipse-perspective-share/) 来迁移您的透视图。

我的 2 美分。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-08-15T22:37:09.380

第一个和第二个答案对我不起作用。

我最终下载了最新版本的 eclipse 并从以前的版本中导入了工作区和配置。

我发现这个视频很有帮助[http://www.youtube.com/watch?v=57vTrxFa3d4](http://www.youtube.com/watch?v=57vTrxFa3d4)

# python - PythonAnywhere 调度程序返回码

> ID：10953691
> 
> 赞同：3
> 
> 时间：2012-06-08T17:52:17.550
> 
> 标签：python, pythonanywhere

当我在 PythonAnywhere 查看计划任务的日志时，我发现它们充满了以下语句：

*   2012-06-07 11:09:16 -- 完成任务，耗时 11.00 秒，返回码为 0。
*   2012-06-08 14:41:41 -- 完成任务，耗时 19957.00 秒，返回码为 137。
*   2012-06-08 17:33:32 -- 完成任务，耗时 5068.00 秒，返回码为 143。
*   2012-06-07 09:09:06 -- 完成任务，耗时 1.00 秒，返回码为 1。
*   2012-06-08 17:29:04 -- 完成任务，耗时 0.00 秒，返回码为 126。

我不清楚是什么发出了这些返回码。是重击吗？是 Python 吗？是否有可用的列表？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-09T11:42:22.500

PA 开发人员在这里。我们报告正在运行的进程的返回码，返回码的含义取决于被调用的进程。Bash 在这里列出了一些保留的退出代码：http: [//tldp.org/LDP/abs/html/exitcodes.html](http://tldp.org/LDP/abs/html/exitcodes.html)。

在 PA 中，计划任务的日志通常包含的信息比返回码所能提供的信息多。

# jquery - 在侧边栏中的子菜单悬停时更改菜单项的颜色（jsFiddle）

> ID：10953693
> 
> 赞同：2
> 
> 时间：2012-06-08T17:52:19.917
> 
> 标签：jquery, css

我在为我的网站工作的侧边栏中的子菜单悬停时更改菜单项 (.category) 的颜色时遇到问题。正如您在下面的 jsFiddle 示例中所见，当用户将鼠标悬停在某个类别上时，会打开一个子菜单，而当用户悬停一个子菜单项时，悬停颜色为橙色。我想将橙色悬停在子菜单项上。同时，我希望在子菜单打开时将菜单项（类别）颜色更改为浅蓝色。

我尝试单独使用 css 来完成此操作，但是所有孩子的悬停颜色都会改变，这不是我想要的。对于解决此问题的任何帮助，我将不胜感激，因为这是我一直试图解决的一个持续存在的问题。

到目前为止我尝试了什么：

```
 $(this).find(".submenu").show().parent().css('color', 'lightblue'); 
```

jsfiddle：

[http://jsfiddle.net/BGcDc/38/](http://jsfiddle.net/BGcDc/38/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T18:01:48.890

问题是链接应用了高优先级的默认蓝色。要更改颜色，您需要在链接上实际更改它。我把它放在`hover()`代码中，它起作用了：

```
$(this).find("a").eq(0).css("color", "#2B60DE"); 
```

这将找到标签的第一个子链接`li.category`（更多的子链接是实际的菜单项）并将颜色更改为浅蓝色 (#2B60DE)。在`mouseleave()`代码中，输入相同的代码，但将实际值留空，如下所示：

```
$(this).find("a").eq(0).css("color", ""); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T18:03:03.560

我试图改变第一个元素的颜色，它正在工作，你可以在 jsfiddle 中检查。

此外，您应该将样式应用于类并通过 javascript 添加/删除类。

[http://jsfiddle.net/BGcDc/41/](http://jsfiddle.net/BGcDc/41/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T18:12:18.923

不是 JQuery 解决方案，但请查看有关如何设置父元素样式的[答案。](https://stackoverflow.com/a/8114664/757830)

我认为，尤其是它的第二个[jsfiddle 示例](http://jsfiddle.net/AGgpN/3/)（纯 css2），它可以满足您的需求。

# python - 在 Dreamhost 上使用 virtualenv 更新新的 Django 和 Python 2.7.*（带乘客）

> ID：10953695
> 
> 赞同：29
> 
> 时间：2012-06-08T17:52:23.200
> 
> 标签：python, django, passenger, dreamhost

Dreamhost 是小型项目的绝佳主机。它也是 Django 友好的托管。除了 python 和 Django 版本之外，所有的好东西都有点过时了。好吧，弄清楚如何在 Dreamhost 上更新 Python 2.7.3、Django 1.4 是一整天的工作，我真的很想与找到它的人分享

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-06-08T17:52:24.337

我目前有私人服务器、一个 shell 帐户和一点运气。所以这就是我所做的：

1.  SSH 到您的主机以升级 python

    ```
     cd ~
     mkdir tmp
     cd tmp
     wget http://www.python.org/ftp/python/2.7.3/Python-2.7.3.tgz
     tar zxvf Python-2.7.3.tgz
     cd Python-2.7.3
     ./configure --enable-shared --prefix=$HOME/Python27 --enable-unicode=ucs4
     make
     make install 
    ```

2.  配置系统以使用我们的新 Python。打开 ~/.bashrc 并添加以下行

    ```
     export PATH="$HOME/Python27/bin:$PATH"
     export LD_LIBRARY_PATH=$HOME/Python27/lib

     #save it and run
     source ~/.bashrc 
    ```

    你现在可以检查你的python版本`which python`

3.  安装`easy_install`，`pip`

    ```
    cd ~/tmp
    wget http://peak.telecommunity.com/dist/ez_setup.py
    python ez_setup.py
    easy_install pip
    # Or even shorter
    wget https://bootstrap.pypa.io/get-pip.py
    python get-pip.py 
    ```

4.  安装`virtualenv`

    ```
     pip install virtualenv
     virtualenv $HOME/<site>/env
     #Switch to virtualenv
     source $HOME/<site>/env/bin/activate 
    ```

    您还可以将环境路径添加到`bashrc`

    ```
     export PATH="$HOME/<site>/env/bin/:$PATH"
     source ~/.bashrc 
    ```

5.  安装 django 和其他一切

    ```
     pip install django
     pip install ....
     pip install ....
     pip install .... 
    ```

6.  创建项目

    ```
     cd $HOME/<site>/
     python $HOME/<site>/env/bin/django-admin.py startproject project 
    ```

7.  `passenger_wsgi.py`使用`HOME/<site>/`以下内容创建

    ```
     import sys, os
     cwd = os.getcwd()
     sys.path.append(cwd)
     sys.path.append(cwd + '/project')  #You must add your project here or 500

     #Switch to new python
     #You may try to replace $HOME with your actual path
     if sys.version < "2.7.3": os.execl("$HOME/<site>/env/bin/python",
         "python2.7.3", *sys.argv)

     sys.path.insert(0,'$HOME/<site>/env/bin')
     sys.path.insert(0,'$HOME/<site>/env/lib/python2.7/site-packages/django')
     sys.path.insert(0,'$HOME/<site>/env/lib/python2.7/site-packages')

     os.environ['DJANGO_SETTINGS_MODULE'] = "project.settings"
     import django.core.handlers.wsgi
     application = django.core.handlers.wsgi.WSGIHandler() 
    ```

或者这样

```
import sys, os

BASE_DIR = os.path.dirname(os.path.abspath(__file__))

sys.path.append(os.path.join(BASE_DIR))  #You must add your project here or 500

#Switch to new python
#You may try to replace $HOME with your actual path
PYTHON_PATH = os.path.join(BASE_DIR, 'env', 'bin', 'python')
if sys.executable != PYTHON_PATH:
    os.execl(PYTHON_PATH, "python2.7.12", *sys.argv) 
```

如果您使用的是 django 1.7，请将最后两行替换为

```
from django.core.wsgi import get_wsgi_application
application = get_wsgi_application() 
```

8.  享受 :D

* * *

Dreamhost 上的新版本 python 将不再返回`sys.executable`所以你这是我的乘客wsgi版本

```
import sys, os

VIRTUAL_ENV_PYTHON = 'venv-python'  # Python > 2.7.6 dreamhost not return sys.executable
BASE_DIR = os.path.dirname(os.path.abspath(__file__))

def is_venv_python():
    if len(sys.argv) > 0:
        last_item = sys.argv[len(sys.argv)-1]
        if last_item == VIRTUAL_ENV_PYTHON:
            return True
    return False

sys.path.append(os.path.join(BASE_DIR))  #You must add your project here or 500

#Switch to new python

PYTHON_PATH = os.path.join(BASE_DIR, 'env', 'bin', 'python')
if not is_venv_python():
    os.execl(PYTHON_PATH, "python2.7.12", *sys.argv + [VIRTUAL_ENV_PYTHON])

sys.path.insert(0, os.path.join(BASE_DIR, 'env', 'bin'))
sys.path.insert(0, os.path.join(
    BASE_DIR, 'env', 'lib', 'python2.7', 'site-packages'
)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-13T10:07:37.477

目前 Dreamhost 将服务器更新为 Ubuntu 12.04，但出现错误：

```
Import Error: <path-to-python>/_io.so undefined symbol: PyUnicodeUCS2_Decode 
```

在编译自定义 python 并运行“python ez_setup.py”之后

解决方案是在第 1 步使用 --enable-unicode=ucs4 编译 python

```
./configure --enable-shared --prefix=$HOME/Python27 --enable-unicode=ucs4 
```

# android - 严格模式违规列表

> ID：10953701
> 
> 赞同：5
> 
> 时间：2012-06-08T17:52:36.460
> 
> 标签：android, android-strictmode, strict-mode

在 shell 中运行 adb logcat 我看到类似这样的东西

`StrictMode policy violation; ~duration=337 ms: android.os.StrictMode$StrictModeDiskReadViolation: policy=23 violation=2`

1.  policy=23 是什么意思？
2.  什么是违规=2？

我正在寻找这个值的含义，但我找不到任何违反和政策列表的文档，或者我可能以一种糟糕的方式解释了我的搜索结果，但我会很感激对此的一些解释

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-08T19:34:48.813

> policy=23 是什么意思？

您可以配置 StrictMode 以通知您某些事情，您可以告诉它您希望如何获得通知*（简单的日志消息，异常，...）*。请参阅[此博客文章中的](http://android-developers.blogspot.de/2010/12/new-gingerbread-api-strictmode.html)*启用 StrictMode*部分以供参考。

策略是在内部跟踪该配置的位掩码。因为它是一个掩码，所以用二进制解释它更直观，即 10111。然后您可以在`BlockGuard.java`源文件中查找相关位。这是[该站点的简短副本](http://source-android.frandroid.com/libcore/dalvik/src/main/java/dalvik/system/BlockGuard.java) *（不确定是哪个 android 版本，较新版本中可能会有更多内容；我的机器上现在没有当前源）*：

```
public static final int DISALLOW_DISK_WRITE = 0x01;
public static final int DISALLOW_DISK_READ = 0x02;
public static final int DISALLOW_NETWORK = 0x04;
public static final int PASS_RESTRICTIONS_VIA_RPC = 0x08;
public static final int PENALTY_LOG = 0x10;
public static final int PENALTY_DIALOG = 0x20;
public static final int PENALTY_DEATH = 0x40; 
```

这样您就可以看出您的 StrictMode 已配置为通过日志消息通知您 DISK_READ、DISK_WRITE 和 NETWORK 违规。

> 什么是违反=2？

这只是作为一些内部 int 常量的小瓶化类型。它对您没有多大帮助，因为异常的名称已经泄露了这一点。作者刚刚定义了一种`getMessage()`用于所有不同的子类 StrictMode 异常的方法。仅供参考，这些常量在[StrictMode.java](http://source-android.frandroid.com/frameworks/base/core/java/android/os/StrictMode.java)中定义。

# mysql - 为分布式数据库配置 Web 应用程序

> ID：10953702
> 
> 赞同：1
> 
> 时间：2012-06-08T17:52:37.723
> 
> 标签：mysql, mongodb, scalability, load-balancing

我已经阅读了 MongoDB 的复制[文档](http://www.mongodb.org/display/DOCS/Replication)和 MySQL 的集群[页面](http://www.mysql.com/products/cluster/)，但是我无法弄清楚如何配置我的 Web 应用程序以连接到数据库。

我的应用程序将包含连接信息、数据库主机、用户名、密码等，但是，即使有多服务器功能，我是否需要一个具有固定 IP 的大型主机来将负载分配给服务器？那么，如何防止单点故障呢？有没有解决这个问题的通用方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T19:52:25.863

MongoDB 的[副本集](http://www.mongodb.org/display/DOCS/Replica+Sets)等功能旨在实现自动故障转移和恢复。如果配置正确，这些将有助于避免数据库级别的单点故障。您不需要单独的“大主宰”来分配负载；这就是副本集提供的要点。您的应用程序使用数据库驱动程序进行连接，通常不需要了解各个副本的状态。对于 MongoDB 中的关键写入，您可以请求驱动程序执行“安全”提交，这需要确认将数据写入最少数量的副本。

为了全面避免服务器故障，您仍然必须考虑其他因素，例如磁盘、机器或网络设备的物理故障，并提供适当的冗余。例如，您的副本集应该分布在多个服务器或实例上。如果所有这些实例都在同一个物理托管设施中，那么您的单点故障仍然可能是托管设施断电或网络中断的可能性不大（但可能）的情况。

# c++ - 如何读取 Windows 性能计数器？

> ID：10953703
> 
> 赞同：1
> 
> 时间：2012-06-08T17:52:41.530
> 
> 标签：c++, windows, performancecounter, perfmon

我可以获得一个 C++ 代码来读取 Windows 性能计数器（类别、计数器名称和实例名称）吗？

在 c# 中这很容易，但我需要 c++ 代码。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-09T01:55:34.040

正如 Doug T. 之前指出的，我不久前发布了一个帮助程序类来查询性能计数器值。该类的使用非常简单，您所要做的就是为性能计数器提供字符串。 [http://askldjd.wordpress.com/2011/01/05/a-pdh-helper-class-cpdhquery/](http://askldjd.wordpress.com/2011/01/05/a-pdh-helper-class-cpdhquery/)

但是，我在博客上发布的代码在实践中已经过修改。从您的评论来看，您似乎只对查询一个字段感兴趣。

在这种情况下，请尝试将以下函数添加到我的 CPdhQuery 类中。

```
double CPdhQuery::CollectSingleData()
{
    double data = 0;
    while(true)
    {
        status = PdhCollectQueryData(hQuery);

        if (ERROR_SUCCESS != status)
        {
            throw CException(GetErrorString(status));
        }

        PDH_FMT_COUNTERVALUE cv;
        // Format the performance data record.
        status = PdhGetFormattedCounterValue(hCounter,
            PDH_FMT_DOUBLE,
            (LPDWORD)NULL,
            &cv);

        if (ERROR_SUCCESS != status)
        {
            continue;
        }

        data = cv.doubleValue;

        break;

    }

    return data;
} 
```

例如，获取处理器时间

```
counter = boost::make_shared<CPdhQuery>(std::tstring(_T("\\Processor Information(_Total)\% Processor Time"))); 
```

获取文件读取字节数/秒：

```
counter = boost::make_shared<CPdhQuery>(std::tstring(_T("\\System\\File Read Bytes/sec"))); 
```

要获得 % Committed Bytes：

```
counter = boost::make_shared<CPdhQuery>(std::tstring(_T("\\Memory\\% Committed Bytes In Use"))); 
```

要获取数据，请执行此操作。

```
double data = counter->CollectSingleData(); 
```

我希望这有帮助。

...艾伦

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T21:11:03.613

一些常用的性能值有 API 调用可以直接获取它们。例如，总处理器时间可以从[GetSystemTimes](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724400%28v=vs.85%29.aspx)获得，您可以自己计算百分比。

如果这不是一个选项，那么[Performance Data Helper](http://msdn.microsoft.com/en-us/library/aa939698%28v=winembedded.5%29.aspx)库提供了一个相对简单的性能数据接口。

# c# - 您如何在 .Net 项目中使用“lib”文件夹来构建依赖项？

> ID：10953705
> 
> 赞同：3
> 
> 时间：2012-06-08T17:52:43.537
> 
> 标签：c#, .net, svn, continuous-integration

我需要让我的外部 dll 依赖项（自动映射，其他......）进入我可以在我的构建服务器上构建它们的情况。我还想让它们进入颠覆，以便构建服务器可以接收它们。

所以我对整个“lib”文件夹都是新手。我搜索了谷歌，但似乎有点假设，这里没有基本的操作。我拥有的书没有进入它。我已经很久没有工作上的导师了，甚至没有我可以问问题的人......我真的很想了解我应该在这里做什么的基本原理。

我在 .Net 中编写，使用 Jenkins 作为我的 CI 服务器（新的）和 msbuild（也是新的）。我听到 svn:externals (不要计算), NuGet ....

请帮忙！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-09T06:50:49.463

假设我的解决方案名为 MySolution 并存储在 C:\MySolution 中，那么我有三个用于存放二进制文件的目录，均由源代码控制管理。

*   **vendor**第三方框架的源代码。如果需要，它们会被构建和签名（使用我的密钥）并被视为代码是我自己的。这有时对于“修复”框架中的缺陷或调试它们的源以了解它失败的原因是必要的。
*   **src\packages**由 nuget 管理的模块（我希望将其与我的“lib”文件夹结合起来，但尚不支持）
*   **lib**编译的库，我没有源代码并且不由 nuget 管理。

（我省略了诸如“src”、“sample”、“setup”、“documentation”和“scripts”之类的文件夹，以保持特定于 OP 的答案）。

最近几个月，我开始在 lib 文件夹中为“包”创建自己的 nuget 包，这样我就可以将它们全部迁移到“包”中。它发布到私人 nuget 服务器。它还简化了跨解决方案的二进制文件管理。

我曾经使用外部对象，但它们会在一段时间后造成分支噩梦，因为您必须分支并将外部依赖项固定到。使用 nuget，这不再需要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T07:18:44.727

我肯定会避免将二进制文件放在源代码管理中。您最好创建自己的 nuget 存储库，其中包含您喜欢的软件包版本，并使用 nuget restore 或其他“补充”构建依赖项的方式。我使用一个名为 nuget-update.bat 的简单批处理文件，它只查看所有 packages.config 文件并获取它找到的任何依赖项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-09T11:21:16.467

您似乎就同一主题发布了一系列问题。我推荐 NuGet，因为它变得很重要并被 Microsoft 大力推广。但是，那里没有许多旧库，您可能仍需要保留一个 lib 文件夹。我的开源项目#SNMP 就是一个很好的例子，

我尝试使用尽可能多的 NuGet 包，甚至加紧维护一些依赖项，例如 DockPanel Suite。

# android - 在 Android 中是否可以让相机聚焦在预览中的特定点上？

> ID：10953708
> 
> 赞同：1
> 
> 时间：2012-06-08T17:53:07.193
> 
> 标签：android, camera

我正在查看文档[http://developer.android.com/reference/android/hardware/Camera.Parameters.html](http://developer.android.com/reference/android/hardware/Camera.Parameters.html) ，但没有看到任何可以让用户点击相机预览中的特定点，并使其成为相机尝试对焦的点。

这只是失踪了吗？还是我忽略了如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T00:01:27.467

在 Android 4.x 中，使用[setFocusAreas](http://developer.android.com/reference/android/hardware/Camera.Parameters.html#setFocusAreas%28java.util.List%3Candroid.hardware.Camera.Area%3E%29)是可能的。您必须首先检查[getMaxNumFocusAreas](http://developer.android.com/reference/android/hardware/Camera.Parameters.html#getMaxNumFocusAreas%28%29)以查看您的设备是否支持此功能，以及要使用多少个区域。

然后，您需要将用户的触摸坐标转换为 Camera.Area 对象[（在此处描述）](http://developer.android.com/reference/android/hardware/Camera.Area.html)使用的坐标，并使用坐标调用 setFocusAreas。从那时起，对 autoFocus 的调用将使用该区域来选择焦点。

# asp.net-mvc - 这应该使用多个还是单个 MVC 包来完成？

> ID：10953713
> 
> 赞同：3
> 
> 时间：2012-06-08T17:53:41.973
> 
> 标签：asp.net-mvc, asp.net-mvc-3, iis, architecture

目前有多个（大约 15-30 个）用另一种语言编写的独立 Web 应用程序。每一个都是完全独立的，文件，图像，标题，用户，数据库等。整个9码，除了它们都存在于同一个域下并且**应该**具有相同的样式（但它们没有）。它们很快将转换为 C# ASP.NET MVC 2。它们共享相同的 LDAP 身份验证。

我的脑海中出现了一个问题，即这些应该设置为多个 MVC 解决方案还是在单个 MVC 应用程序中完成。它们都将具有相同的样式，大部分是相同的图像，并且它们共享基本功能会很好。

这对我来说不是一个简单的解决方案，因为其中一些应用程序本身就相当大，将它们放在一起可能很难管理。更不用说新应用程序的开发以及添加到现有应用程序的新功能将继续进行。使这可能成为一个非常大的解决方案。

我对 MVC 还很陌生，尽管我现在对它有了很好的理解，但我仍在尝试重新连接我的大脑以使用方法和设计。

我想我想问的是，你们中那些比我有更多 MVC 经验的人分享一些关于 MVC 在实际使用中的启发和智慧，给我一个开始思考的方向。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T10:21:21.823

当我将多个 Web 应用程序组合成一个时。我会考虑以下几点。

*   如果所有应用程序共享一个共同的业务模型。
*   如果他们共享一个共同的基础设施（安全、验证、日志记录和其他......）
*   如果他们共享相同的共同用户群。
*   如果将多个项目合二为一有助于我降低维护和增强成本。

在您的情况下，您说它们中的每一个都是**完全独立**的，那么为什么需要合并？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-12T20:17:02.223

请帮自己一个忙，不要将它们组合在一个解决方案中。我曾经在一个项目中工作过，我们有一个巨大的解决方案可以解决，这就是万恶之源。如果你把所有东西都放在一个解决方案中，你会增加所有项目的复杂性，你可能会想，*我实际上会通过重用一些东西来节省几行代码*，但事实是你正在创建一个致命的解决方案终将成为瓶颈

考虑以下：

*   当您拥有超过 30-40 个项目时，Visual Studio 的性能会受到影响，这意味着您的构建将花费越来越多的时间。

*   如果您实现了构建服务器（并且您应该）如果您有一个庞大的解决方案，那么仅构建与每个应用程序相关的项目的脚本将非常复杂

现在我认为你已经完成了设计中最困难的部分，当你说：

> 目前有多个（大约 15-30 个）用另一种语言编写的**独立**Web 应用程序

如果您的应用程序是独立的，则意味着它们具有独立的域，因此没有理由将它们放在单个解决方案中，甚至不将它们视为模块。

管理独立的解决方案**并不意味着它们之间不能有共享的组件**，（顺便说一下，当我说共享组件时，我是指基础设施组件，请不要尝试重用域对象）。

所以现在的问题是我应该如何引用共享组件？

这些天来，我发现在解决方案项目中重用基础设施组件的最佳方式是使用**Nugets**。使用 Nugets 可以轻松分发新版本的组件，所以我的建议是：在您的组织中创建一个私有 Nuget 服务器（一个简单的 IIS 应用程序）并将您自己的私有包添加到该服务器，然后从您的解决方案中引用它们

您几乎可以在 Nuget 包中放置您需要的任何东西，包括：

*   组件
*   XML 配置文件（包括常见的 XML 记录器配置文件）
*   常见的 JavaScript 文件
*   通用样式表文件
*   ETC...

这是一篇创建私有 Nuget 存储库的好文章

*   [http://docs.nuget.org/docs/creating-packages/hosting-your-own-nuget-feeds](http://docs.nuget.org/docs/creating-packages/hosting-your-own-nuget-feeds)

创建 Nuget：

*   [http://docs.nuget.org/docs/creating-packages/creating-and-publishing-a-package](http://docs.nuget.org/docs/creating-packages/creating-and-publishing-a-package)

最后在 CI 服务器中集成 Nuget 的创建：

*   [http://www.hanselman.com/blog/NuGetForTheEnterpriseNuGetInAContinuousIntegrationAutomatedBuildSystem.aspx](http://www.hanselman.com/blog/NuGetForTheEnterpriseNuGetInAContinuousIntegrationAutomatedBuildSystem.aspx)
*   [http://docs.nuget.org/docs/reference/command-line-reference](http://docs.nuget.org/docs/reference/command-line-reference)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-08T18:06:51.490

我的建议是 DI 并像插件一样创建每个项目，因此每个项目都可以单独开发或管理而不会影响其他项目

我有几个使用 MEF 的项目，创建新插件或管理现有插件非常容易

这是 MVC 和 MEF 的入门... [http://blog.maartenballiauw.be/post/2009/04/21/ASPNET-MVC-and-the-Managed-Extensibility-Framework-%28MEF%29.aspx](http://blog.maartenballiauw.be/post/2009/04/21/ASPNET-MVC-and-the-Managed-Extensibility-Framework-%28MEF%29.aspx)

和一个可下载的示例[http://www.hanselman.com/blog/ExtendingNerdDinnerAddingMEFAndPluginsToASPNETMVC.aspx](http://www.hanselman.com/blog/ExtendingNerdDinnerAddingMEFAndPluginsToASPNETMVC.aspx)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-11T19:36:03.373

只要您在应用程序的页面中使用类似的标记，就可以使用所有人引用的统一样式表来实现相同的样式。通用功能可以通过统一的类库提供。对我来说，这实际上取决于应用程序之间的样式和功能到底有多接近……您是否希望每个页面上的标记完全相同，等等。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-11T11:58:28.243

每个应用程序都有一个控制器实例是很常见的，但是如果您使用数据驱动的[前端控制器](http://msdn.microsoft.com/en-us/library/ff648617.aspx)来实现它，那么在您的新 Web 应用程序框架中只需要一个类。因此，每个应用程序可能都有一个将 URL 映射到[命令](http://en.wikipedia.org/wiki/Command_pattern)类文件的配置文件。这些可以按需构建或从资源池请求。这种方法的一大优势是这些命令中的许多将作为现有应用程序和/或 ASP 视图的非常薄的包装器 ( [ServiceToWorker ) 开始。](http://java.sun.com/blueprints/corej2eepatterns/Patterns/ServiceToWorker.html)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-11T20:13:49.217

我完全同意 Marks 的回答，问问自己“为什么”需要将它们结合起来。他们真的需要独立吗？

我的补充意见虽然是......

你**绝对**应该想到什么......

1.  创建一个统一的 CSS 文件，这些文件使用您的应用程序使用的相同图像

2.  使用 JQuery 模板/部分视图编写一些通用 JQuery（如果这些是面向公众的，则为移动版本），以便为所有这些单独的应用程序提供统一的体验

如果您不打算在 DAL 等方面统一您的服务器端代码，那么只需专注于客户端。

# mysql - mysql join 提取数

> ID：10953715
> 
> 赞同：0
> 
> 时间：2012-06-08T17:53:47.690
> 
> 标签：mysql, regex, join

我有一张像这样的“大”桌子

```
 id  user type comment
    6   1    A    id '3' - #8
    7   1    A    id '3' - #9
    8   3    B    
    9   3    B 
```

我想提取哈希后的数字并将其与 id 列连接以具有以下内容（当单引号之间的数字等于用户时）

```
 id1 id2  user  type
    6   8    3     B
    7   9    3     B 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T18:40:23.873

A 创建您的表的副本，其名称为 bigtable 并插入您提供给我们的那些值：

```
mysql> create table bigtable (id int, user_id int, type varchar(10), comment varchar(30));
Query OK, 0 rows affected (0.04 sec)

mysql> insert into bigtable values (6,1, 'A', 'id 3 - #8'),(7,1,'A', 'id 3 - #9'),(8,3, 'B','' ),(9,3, 'B','');
Query OK, 4 rows affected (0.01 sec)
Records: 4  Duplicates: 0  Warnings: 0

mysql> select * from bigtable;
+------+---------+------+-----------+
| id   | user_id | type | comment   |
+------+---------+------+-----------+
|    6 |       1 | A    | id 3 - #8 |
|    7 |       1 | A    | id 3 - #9 |
|    8 |       3 | B    |           |
|    9 |       3 | B    |           |
+------+---------+------+-----------+
4 rows in set (0.00 sec) 
```

我做了一个自加入并使用 substrn_index 函数：

```
mysql> select b1.id,b2.id,b1.user_id,b1.type 
from bigtable as b1 join bigtable as b2 
on b1.id=SUBSTRING_INDEX(b2.COMMENT,'#',-1);
+------+------+---------+------+
| id   | id   | user_id | type |
+------+------+---------+------+
|    8 |    6 |       3 | B    |
|    9 |    7 |       3 | B    |
+------+------+---------+------+
2 rows in set (0.00 sec) 
```

我希望这对你有帮助

# android - android将textView ID传递给函数

> ID：10953717
> 
> 赞同：0
> 
> 时间：2012-06-08T17:54:07.620
> 
> 标签：android, onclick, textview, findviewbyid

我有一个`onClick`这样的：

```
public void onClick(View v) {
    updateTable(v.getId()); //All ID's are Int, e.g. id=400
}

public void updateTable(int intID) {
    TextView itemToChange = (TextView) findViewById(intID);
    itemToChange.setTextColor(Color.RED);
} 
```

所以我有了`TextView`（id=400）的ID，我该如何改变它的颜色呢？

我想要做的是`findViewById(int)`或者我该如何传递`v`和`updateTable()`使用

```
((TextView) v).setTextColor(Color.RED); 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T17:57:21.797

如果你想将 v 传递给你的函数，那你为什么不直接传递 v 呢？

```
public void updateTable(View view) 
```

您仍然可以使用相同的函数调用来获取 id。现在你甚至不需要 findViewById 因为你已经有了视图的句柄。只需将其转换为 textView。

```
TextView colorChanger = (TextView) view; 
```

# javascript - 计算 tbody 在两个 `theads` 之间

> ID：10953720
> 
> 赞同：2
> 
> 时间：2012-06-08T17:54:13.003
> 
> 标签：javascript, jquery, html-table

我有一个具有以下结构的简单表：

```
<table>
    <thead>
        <tr>
            <td>Some info</td>
            <td>Some info</td>
            <td>Some info</td>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>Some info</td>
            <td>Some info</td>
            <td>Some info</td>
        </tr>
    </tbody>
    <tbody>
        <tr>
            <td>Some info</td>
            <td>Some info</td>
            <td>Some info</td>
        </tr>
    </tbody>

    <thead>
        <tr>
            <td>Some info</td>
            <td>Some info</td>
            <td>Some info</td>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>Some info</td>
            <td>Some info</td>
            <td>Some info</td>
        </tr>
    </tbody>
</table> 
```

我想使用 jQuery（或纯 Javascript）计算`tbody`两个 ' 之间存在多少个'。`thead`有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T17:56:08.377

Besides the markup is not valid, but for your example you can use something like this:

```
$("table thead:first")​​​​.nextUntil("thead").length​​​​​ 
```

**DEMO:** [http://jsfiddle.net/XUjcr/](http://jsfiddle.net/XUjcr/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T18:06:04.520

您可以制作通用功能

```
function countHeader(pos1, pos2) {
   return $('table thead:eq('+ pos1 +')').nextUntil('thead:eq('+ pos2 +')').length;
} 
```

利用：

```
countHeader(0, 1); // from first to second

countHeader(1, 2); // from second to third 
```

### 笔记

你的标记是错误的，避免它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-08T18:10:36.817

尝试一个简化的迭代器来获得所有`tbody`长度`theads`

```
var tbodyM = [];
$('table thead').each (function (idx) {
    tbodyM.push($(this).nextUntil('thead').length);
}); 
```

**演示：http:** [//jsfiddle.net/XUjcr/2/](http://jsfiddle.net/XUjcr/2/)

# c# - Word ApplicationClass 问题

> ID：10953723
> 
> 赞同：3
> 
> 时间：2012-06-08T17:54:49.370
> 
> 标签：c#, .net, ms-word

我`Microsoft.Office.Interop.Word.ApplicationClass`用来阅读一组 Word 文档。我能够很好地阅读它们，但我注意到用于阅读这些文档的过程实际上从未根据 Windows 任务管理器结束。

从我的谷歌搜索来看，似乎没有其他人有这个问题，这让我相信我要么在做一些根本错误的事情，要么我缺乏有效地在谷歌搜索中表达我的问题的能力.

我对 C# 比较陌生，所以我怀疑是前者。在下面找到我用来创建文档“阅读器”实例的代码。

```
private void readDoc(string docPath)
{
    Word.ApplicationClass wordApp = new Word.ApplicationClass();
    object nullObj = System.Reflection.Missing.Value;
    object roObj = true;
    object objFile = docPath;

    try
    {
        Word.Document doc = wordApp.Documents.Open(ref objFile,
            ref nullObj, ref roObj, ref nullObj, ref nullObj, ref nullObj,
            ref nullObj, ref nullObj, ref nullObj, ref nullObj, ref nullObj,
            ref nullObj, ref nullObj, ref nullObj, ref nullObj, ref nullObj);
        doc.ActiveWindow.Selection.WholeStory();
        doc.ActiveWindow.Selection.Copy();
        IDataObject tmpData = Clipboard.GetDataObject();
        string docText = tmpData.GetData(DataFormats.Text).ToString();

          (...)
    }
    catch (Exception ex)
    {
        MessageBox.Show(ex.Data);
    }
} 
```

try 块的其余部分处理字符串`docText`并且不涉及`wordApp`or `doc`，因此我没有将它包含在代码段中。

似乎没有 .Dispose() 函数，`Word.ApplicationClass`所以我在这里有点茫然。

编辑-对不起，这里隐含的问题是：如何以编程方式结束该过程？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T18:01:46.020

您应该[`Word.Application`](http://msdn.microsoft.com/en-us/library/ff838565.aspx)在代码中使用该类，而不是`Word.ApplicationClass`：

```
Word.Application wordApp = new Word.Application(); 
```

完成后，您需要明确关闭文档和 Word 应用程序：

```
doc.Close();
wordApp.Quit(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-08T18:19:54.837

尝试在末尾添加以下内容`readDoc()`：

`wordApp.Quit(ref nullObj, ref nullObj, ref nullObj);`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-08T21:40:54.753

这是一个常见问题，并在[此知识库文章](http://support.microsoft.com/kb/317109)中进行了描述。

# php - 获取包含父/子类别的总行数。困惑为什么 in_array 不起作用

> ID：10953725
> 
> 赞同：0
> 
> 时间：2012-06-08T17:54:51.933
> 
> 标签：php, loops, foreach, categories

我有两个正在使用的表：类别和企业。类别表如下所示：

```
id   name               parent
1    Automotive         NULL
2    Tires              1
3    Oil Change         1
4    Home Renovations   NULL
5    Painting           4
6    Landscaping        4
7    Bathroom           4 
```

基本上，任何具有父级的类别`NULL`都是父级。任何它的子项都会在父列中引用它的 ID。简单的。

我将业务存储在一个表中，每个业务都有类别。类别的存储方式`json_encode`如下：

```
["1","4","5","13"] 
```

用户可以在不添加父类的情况下添加子类，所以有些商家只有子类。

如果我想获得父类别包括子类别的业务总数，这就是我正在做的事情：

```
$parent_categories = $this->db->order_by('name', 'asc')->get_where('categories', array('parent' => NULL));
$businesses = $this->db->select('category')->get('businesses');

foreach ($parent_categories->result() as $parent):
    $child_categories = $this->db->order_by('name', 'asc')->get_where('categories', array('parent' => $parent->id));

    $parentChildCategories = array();
    array_push($parentChildCategories, $parent->id);

    foreach($child_categories->result() as $child):
        array_push($parentChildCategories, $child->id);
    endforeach;
    // CONTINUED BELOW 
```

此时，如果 i `print_r($parentChildCategories)`，我得到以下信息（不包括一堆其他类别数组，只关注一个）：

```
Array ( [0] => 81 [1] => 80 ) 
```

所以这是父类别 ID 以及子类别 ID。这个父类别只有一个孩子，但其他人可能有多个。这似乎有效。

现在我想遍历每个业务类别字段，将json解码为PHP数组（`$categories_array`），然后查看上面的数组（`$parentChildCategories`）是否在其中。如果是，我会回应“是的”。

```
foreach($businesses->result() as $business):
    $categories_array = json_decode($business->category);

    if (in_array($parentChildCategories, $categories_array)):
        echo 'yep';
    endif;
endforeach; 
```

问题是，我从来没有得到“是的”。没有。所以我 `print_r($categories_array)' 它给了我以下信息：

```
Array ( [0] => 80 [1] => 81 ) 
```

数组值与 相同`$parentChildCategories`，但它们位于不同的位置。所以 in_array 并不认为它在数组中。

我正用头撞墙试图弄清楚这一点。有没有更好的方法来做到这一点？我显然做错了什么。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T14:12:12.210

为什么要以这种方式存储与业务相关的类别？如果您要规范化您的数据库，那么您一开始就不会遇到这个问题。

我建议创建一个新表“business_category_coupling”，其中包含 2 列：business_id 和 category_id。这基本上就是您所需要的，并且大大简化了维护。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T19:15:36.597

`in_array`不起作用的原因是它检查第一个数组是否是第二个数组中的一个元素——当然，它不是。不经过完整的逻辑，做你的比较，你可以使用`array_diff`：

```
$ad = array_diff($parentChildCategories, $categories_array);
if(count($ad)) {
    echo 'yep';
} 
```

此代码查找`$parentChildCategories`其中不存在的所有元素`$categories_array`。如果没有，则输出`yep`.

# jquery - 无法在移动浏览器上的 jquery mobile 动态列表中绑定事件

> ID：10953728
> 
> 赞同：0
> 
> 时间：2012-06-08T17:55:02.167
> 
> 标签：jquery, jquery-mobile

我正在开发一个相对简单的 jQuery 移动网站，它通过 AJAX 调用与我的服务器交互，然后根据返回的值更新列表视图。动态更新工作正常，但该`click`事件似乎没有绑定到移动浏览器上的动态列表项。（在 Android 和 iOS 中的结果相同）但在桌面上的 Chrome、Firefox 和 Safari 中都可以正常工作。

这是填充我列表的代码（适用于桌面和移动设备）：

```
$('#searchfield').keypress(function(e) {
    if( $(this).val().length > 3 ) {
        $.getJSON('admin.php?request=search&srch_email=' + $(this).val(), function(data) {
            if( data.status == 'success' ) {
                 $('#results').empty();
                 $.each(data.data, function(count,user) {
                 $('#results').append('<li><a href="#profile_' + user.uid + '" class="profile">' + user.first_name + ' ' + user.last_name + ' (' + user.email + ')</a></li>');
                     $('#results').listview('refresh');
                     users[user.uid] = user;
                 });
             }
        });
     }
     else if($(this).val().length == 0 ) {
         $('#results').empty();
     }
}); 
```

绑定我最初尝试的事件：

```
$('.profile').live('click', function(e) {
    e.preventDefault();
    var parts = $(this).attr('href').split("_");
    var user = users[ parts[1] ];

    $('#pheader').html('Edit User ' + user.email );

    $('#fname').val(user.first_name);
    $('#lname').val(user.last_name);
    $('#zip').val(user.zipfirst);
    $('#state').val(user.state);

    $('.uid').val(user.uid);

    $.mobile.changePage( $('#profile') );
    $('#searchfield').val("");
    $('#results').empty();

}); 
```

那没有用，所以我读到它`.live()`可能无法在移动设备上正常工作，`.on`现在是首选方法。我将上面的第一行更改为：

```
$('#results').on('click',".profile", function(e) { 
```

虽然结果相同。

**当我说它失败时**编辑它是按钮根本没有响应。**没有控制台错误，它就像它不是一个可点击的按钮。**

 *** * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T18:54:15.727

我找到了答案。改变

`$('#results').on('click',".profile", function(e) {`

到

`$('#results').on('vclick',".profile", function(e) {`

在手机上解决了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T05:53:48.687

您可以尝试使用 onclick 功能..

```
$('#searchfield').keypress(function(e) {
if( $(this).val().length > 3 ) {
    $.getJSON('admin.php?request=search&srch_email=' + $(this).val(), function(data) {
        if( data.status == 'success' ) {
             $('#results').empty();
             $.each(data.data, function(count,user) {
            var param = "'"+ user.uid +"'";
             $('#results').append('<li><a href="#" class="profile" onclick="testFunction('+ param +')">' + user.first_name + ' ' + user.last_name + ' (' + user.email + ')</a></li>');
                 $('#results').listview('refresh');
                 users[user.uid] = user;
             });
         }
    });
 }
 else if($(this).val().length == 0 ) {
     $('#results').empty();
 } 
```

});

在测试函数中，

```
function testFunction(userID){

   var user = users[ userID ];

   $('#pheader').html('Edit User ' + user.email );

   $('#fname').val(user.first_name);
   $('#lname').val(user.last_name);
   $('#zip').val(user.zipfirst);
   $('#state').val(user.state);

   $('.uid').val(user.uid);

   $.mobile.changePage( $('#profile') );
   $('#searchfield').val("");
   $('#results').empty();
} 
```**

# sql-server - 更改服务器核心数后是否需要重新优化视图和程序

> ID：10953729
> 
> 赞同：2
> 
> 时间：2012-06-08T17:55:05.533
> 
> 标签：sql-server, sql-server-2005

运行 SQL Server 2005 的服务器被转换为虚拟机。原始服务器有 16 个逻辑核心。新的虚拟服务器只有 4 个核心，但应该更快。

一些存储过程（可能调用视图或 UDF）需要更长的时间才能运行。这可能是由于并行性较低。但是，查询计划是否仍然可以针对 16 个内核进行优化，或者它们是否会在硬件更改后自动重新优化？

如果我需要强制重新计算所有计划，最好的方法是什么？其他想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T18:21:38.653

您可以使用以下方法清除计划缓存：

```
DBCC FREEPROCCACHE; 
```

但是，对于其中一些“较慢”的查询，我会首先检查您的一些计划，看看它们是否有任何并行操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T18:23:27.987

[并行查询处理](http://msdn.microsoft.com/en-us/library/ms178065%28v=sql.90%29.aspx)表明保存的查询计划允许并行处理，但没有专门绑定特定数量的线程。

定期编译新查询计划可能还有其他原因，例如在更新统计信息之后。可以计划存储过程以标记所有存储过程以进行重新编译。我在以下方面取得了一些成功：

```
create procedure [dbo].[INUpdateStatistics]
as
  set nocount on

  create table #Tables ( Table_Qualifier sysname, Table_Owner sysname, Table_Name sysname, Table_Type VarChar(32), Remarks VarChar(254) )

  declare CTable cursor local for select Table_Name, Table_Owner, Table_Type from #Tables order by Table_Name
  declare @TableName as sysname
  declare @TableOwner as sysname
  declare @TableType as sysname

  -- Get the list of tables in the database.
  insert into #Tables exec sp_tables
  open CTable
  fetch next from CTable into @TableName, @TableOwner, @TableType
  -- For each table ... .
  while @@Fetch_Status = 0
    begin
    if @TableOwner = 'dbo' and @TableType = 'TABLE'
      begin
      -- Update statistics for all user tables.
      execute( 'update statistics [' + @TableName + '] with fullscan, all' )
      -- Recompile all stored procedures and triggers when they are next executed.
      exec sp_recompile @objname = @TableName
      -- Throttle the loop.
      waitfor delay '00:00:01'
      end
    fetch next from CTable into @TableName, @TableOwner, @TableType
    end

  -- Houseclean.
  close CTable
  deallocate CTable
  drop table #Tables 
```

# hadoop - 使用 HBase 作为数据源计算文档的 TF-IDF

> ID：10953731
> 
> 赞同：1
> 
> 时间：2012-06-08T17:55:09.953
> 
> 标签：hadoop, hbase, mahout, tf-idf

我想计算存储在 HBase 中的文档的 TF（词频）和 IDF（逆文档频率）。

我还想将计算的 TF 保存在 HBase 表中，还将计算的 IDF 保存在另一个 HBase 表中。

你能指导我通过吗？

我已经看过了`BayesTfIdfDriver`，`Mahout 0.4`但我没有开始。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T15:37:58.170

解决方案的大纲非常简单：

1.  对您的 hbase 表进行字数统计，存储每个单词的词频和文档频率
2.  在你的减少阶段聚合每个单词的词频和文档频率
3.  给定文档数量，再扫描一次汇总结果并根据文档频率计算 IDF。

TF-IDF 上的维基百科页面是记住公式细节的一个很好的参考：[http](http://en.wikipedia.org/wiki/Tf) ://en.wikipedia.org/wiki/Tf *idf

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-16T05:06:38.597

如果要计算 TF、IDF，则需要创建中间表“TermMatrix”，用于存储带有文档 ID 的术语。然后您可以使用 TermMatrix 表计算 TFIDF。它接近实时，但如果您想要实时 TFIDF 输出，那么我建议您也创建“TF”、“IDF”表。

我写了一篇关于如何使用 HBase 计算 TFIDF 的博客：http: [//ahikmat.blogspot.kr/2014/07/building-term-matrix-on-hbase.html](http://ahikmat.blogspot.kr/2014/07/building-term-matrix-on-hbase.html)

# asp.net - 具有多个参数的子字符串

> ID：10953739
> 
> 赞同：0
> 
> 时间：2012-06-08T17:55:51.903
> 
> 标签：asp.net, drop-down-menu, substring

我有一个下拉列表，其中包含两列的值...一列是一个数字，范围从 5 个字符长到 8 个字符长，然后是空格，然后是“|” 字符和另一个空格，后跟一组数字的描述。

一个例子：

```
12345678 | Description of Product 
```

为了将下拉列表的项目拉到我的数据库中，我需要一个子字符串来仅拉出数字序列。

是否可以编写一个子字符串来提取多个字符长度？（有时可能是 6 个数字，有时是 5 个数字，有时是 8 个，这取决于用户从下拉列表中选择的内容。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T17:58:55.060

为此使用正则表达式。

假设数字位于字符串的开头，您可以使用以下内容：

```
^[0-9]+ 
```

用法：

```
var theNumbers = RegEx.Match(myDropdownValue, "^[0-9]+").Value; 
```

如果您知道第一部分是您需要的并且始终是数字，您也可以使用`string.Split`来分隔各部分：`|`

```
var theNumbers = myDropdownValue.Split("| ".ToCharArray(), 
                                       StringSplitOptions.RemoveEmptyEntries)[0]; 
```

* * *

这些方法中的任何一种都会产生一个*字符串*。您可以使用`int.Parse`结果以从中获取整数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T18:01:19.020

我会这样做

```
 string str = "12345678 | Description of Product";
 int delimiter;
 delimiter = str.IndexOf("|") - 1;

 string ID =str.substring(0, delimiter);

 string desc = str.substring(delimiter + 1, str.length - 1); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T17:59:41.253

您应该使用拆分功能，而不是使用子字符串。

```
var words = phrase.Split(new string[] {" | "},
                     StringSplitOptions.RemoveEmptyEntries);

var number = word[0]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-08T17:59:50.860

尝试使用正则表达式提取任意长度的数字序列的第一个匹配项。正则表达式看起来像 "^\d+" - 以任意数量的十进制数字开头。

# c - C 是否具有通用的“指向指针的指针”类型？

> ID：10953740
> 
> 赞同：3
> 
> 时间：2012-06-08T17:56:03.623
> 
> 标签：c, pointers, void-pointers

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-08T18:07:21.457

从技术上讲，该标准允许不同的对象指针类型具有不同的表示形式（甚至不同的大小），尽管`char*`并且`void*`要求具有相同的表示形式。但下面是UB：

```
int *ip = 0;
free(*(void**)(&ip)); 
```

仅仅是因为内存的`ip`大小不必与内存的大小相同`void*`，即使它是类型空指针的位模式也`int*`不必与类型空指针的位模式相同`void*`。如果它们不同，那么编译器当然必须插入代码以在您转换`int*`为`void*`或转换回时在它们之间进行转换。

在实践中，实现不会对您这样做（例如 Posix 禁止这样做）。

更重要的是，严格的别名规则不允许您`char*`使用类型的左值访问对象`void*`。所以在实践中，对指针表示的担忧不会破坏你的代码，但优化器实际上可能会。基本上，如果函数调用`myfree((void**)(&p))`被内联，那么编译器可能会看到：

```
char *p = <something>;
void **data = (void**)(&p);
free(*data);
*data = NULL;
// code that reads p 
```

优化器可以注意到它`*data = NULL`正在设置一个 type 的对象`void*`，而“读取 p 的代码”正在读取一个 type 的对象`char*`，它被禁止与那里的另一个`void*`对象别名。因此，允许重新排序指令，`*data = NULL;`完全消除，或者可能其他我没有想到的事情会毁了你的一天，但如果你没有违反规则，那会加速代码。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-08T18:08:48.070

您可以使用 MACRO 来执行此操作。与拥有功能相比，这将非常棒；我希望你知道使用 MACRO 的好处。

```
#define FREE_IF_NOT_NULL(x) if (x != NULL) { \
                                            free(x); \
                                            x = NULL; \
                                       } 
```

# php - 有人可以澄清一下这个会话在 PHP 中的作用吗？

> ID：10953741
> 
> 赞同：0
> 
> 时间：2012-06-08T17:56:06.147
> 
> 标签：php, arrays, session

```
if($err)
$_SESSION['msg']['login-err'] = implode('<br />',$err); 
```

三个快速问题：

1.  为什么在这里使用二维数组？为什么不直接说`$_SESSION['login-err']`？
2.  会话变量如何工作？我环顾四周，似乎只能收集到您可以分配存储在会话中的变量，但是是否有任何预定义的变量？
3.  在 PHP 中，二维和一维数组可以互换吗？如果您想要不同维度的数组，我习惯于需要一个新变量。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T18:01:24.723

1.  这是一个设计决定。您必须询问编写它的开发人员。
2.  $_SESSION 数组存储你扔给它的所有东西。您可以像使用任何其他 PHP 数组一样使用它，它将被存储以供后续页面加载。没有任何预定义的会话变量（[`var_dump($_SESSION)`](http://php.net/var_dump)如果您想自己检查，请尝试执行）。
3.  是的，您可以随意混合。PHP 中的“数组”实际上是哈希映射，每个元素都可以是任何其他 PHP 数据结构（包括其他数组/哈希映射）。所以它并不是一个*真正*的多维数组，它是一个存储其他哈希图的哈希图。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T18:01:47.103

1.  好吧，假设您有一堆可能的消息，而不仅仅是登录错误。然后你会想要一个消息数组来迭代。因此 msg 数组。
2.  会话变量对于持久数据很有用。您 `session_start();`在要访问会话的每个文件的开头使用，并且可以再次检索该数据。我不知道任何预定义的变量，尽管我不明白你为什么真的需要它们。
3.  你能再澄清一下这个问题吗？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-08T18:02:09.693

1.  我们不知道，因为我们不知道原始程序的上下文或设计。

2.  PHP 会话是从请求到请求中保留数据的好方法。该`$_SESSION`变量为给定用户保留其值，直到会话关闭或超时。在此处查看有关 PHP 会话的所有信息：http: [//php.net/manual/en/features.sessions.php](http://php.net/manual/en/features.sessions.php)

3.  PHP 数组非常灵活，可以根据需要添加维度，因为添加新维度所要做的就是将一个数组放入另一个数组的元素中。见这里：[http ://www.php.net/manual/en/book.array.php](http://www.php.net/manual/en/book.array.php)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-08T18:02:37.923

`$_SESSION`是字典，不是数组。虽然语法可能看起来相似，但您可以在字典中插入任意数量的内容，而无需重新声明它。`$_SESSION`在其`'msg'`插槽中存储了另一个字典变量，因此当您访问`$_SESSION['msg']`它时会返回另一个字典，然后您可以`'login-err'`在其中添加一个指向`implode('<br />',$err);`. 我猜想编写代码的人都想将所有消息组织在一起作为`$_SESSION`字典中的一个插槽。

`$_SESSION`是一个字典，在同一会话的所有 php 文件中都是不变的，允许您在 php 文件之间存储和发送信息。没有预定义的`$_SESSION`变量。

# python - Ruby：无法在 Windows 7 上安装 libv8：缺少 python 安装

> ID：10953743
> 
> 赞同：3
> 
> 时间：2012-06-08T17:56:09.593
> 
> 标签：python, ruby

我的问题在谷歌上太多了，但我仍然找不到真正的答案。

首先，我运行`rails server`：error missing libv8

我尝试`bundle install`注意到无法安装 libv8 库，因为缺少 Python。

但是我之前已经将 Python 安装到了 Path 中。例如: `D:\...:\Python\`: 注意不是`Python\bin`因为 python 没有 bin 文件夹。

我在互联网上阅读了一些教程，也尝试安装`DevKit`，但没有结果。

请帮我。谢谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-08T22:22:28.513

除了 DevKit，您还需要安装 Python 并将其包含在您的路径中。[Python 下载页面](http://www.python.org/download/)上有几个适用于 Windows 的 Python 安装程序。

我第一次尝试 Python 3.2.3 失败了，因为 libv8 不支持它。我第二次尝试**2.7**成功了！

# javascript - 如何从控制台访问 extjs 控制器

> ID：10953744
> 
> 赞同：2
> 
> 时间：2012-06-08T17:56:21.617
> 
> 标签：javascript, extjs

如果我可以从 Chrome 的控制台访问我的 ext.js 应用程序中的视图和控制器的实例，那将非常有用。有谁知道如何做到这一点？

* * *

*咖啡脚本：*

```
window.cms = Ext.create 'Ext.app.Application',
  name: 'CMS'
  controllers: [
    'MyController'
  ... 
```

这似乎`cms.getController('MyController')`会做我想要的，但我得到了一个构造函数，而不是我正在寻找的实例。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-08T18:06:56.230

您需要在 Application.xml 中创建一个应用程序实例引用。像这样：

```
Ext.application({
  name: 'CMS',
  controllers: ['MyController'],
  launch:function () {
     CMS.app = this;
     ...
  }
}); 
```

那么你可以使用

CMS.app.getController('MyController') ...

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-03T09:46:18.747

您可以使用：

`CMS.getApplication().controllers.get('ControllerName')`

然后您将获得控制器的实际实例

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-08T17:57:38.657

我认为您没有得到构造函数，只是当您调用`console.log`Ext-JS 对象时 chrome 显示构造函数

# c# - JSON, MVC3, and UTF-8 character encoding in AJAX

> ID：10953745
> 
> 赞同：3
> 
> 时间：2012-06-08T17:56:41.950
> 
> 标签：c#, asp.net-mvc, character-encoding

I'm posting JSON.stringify data to an MVC action and any UTF characters are coming through mangled despite setting the encoding in my javascript. Here's what my jQuery call looks like:

```
$.ajax({
    type: "POST",
    url: BaseAppPath + "/Controller/Action",
    dataType: "json",
    contentType: "application/json; charset=utf-8",
    data: JSON.stringify(jsonData),
    success: function (data) {
        // success code
    },
    error: function (xhr, textStatus, errorThrown) {
        // error code
    }
}); 
```

My action definition looks something like this:

public JsonResult ModifyTaskStatus(int taskId, string note)

I have a breakpoint on the first line of the action. At that time, the characters in the "note" parameter are hosed. Everything up until the breakpoint handles the characters properly. What do I need to do to ensure my action gets the chinese characters properly?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T19:06:46.280

首先想到的是您的 Web 应用程序可能没有设置为相同的编码。您的 web.config 中有元素吗？如果没有尝试添加到

```
<globalization requestEncoding="utf-8" responseEncoding="utf-8"/> 
```

当然还要确保您的页面在标签中设置了内容类型

```
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" /> 
```

# php - Returning an array using php in a better format

> ID：10953746
> 
> 赞同：0
> 
> 时间：2012-06-08T17:56:48.087
> 
> 标签：php, arrays, format

I have a form that I allows the user to create a list of names. I need to also allow them to designate an rsvp status for an event for each name.

Here is the section of the form:

```
<li>
<div id="dynamicInput">
          Name 1<br><input type="text" name="myInputs[]">   Attending Brunch? Yes<input name="attending[]" type="checkbox" value="Attending Brunch" />  No<input name="notattending[]" type="checkbox" value="Not Attending Brunch" /><br>
           Name 2<br><input type="text" name="myInputs[]">   Attending Brunch? Yes<input name="attending[]" type="checkbox" value="Attending Brunch" />  No<input name="notattending[]" type="checkbox" value="Not Attending Brunch" /><br>
            Name 3<br><input type="text" name="myInputs[]">   Attending Brunch? Yes<input name="attending[]" type="checkbox" value="Attending Brunch" />  No<input name="notattending[]" type="checkbox" value="Not Attending Brunch" /><br>
             Name 4<br><input type="text" name="myInputs[]">   Attending Brunch? Yes<input name="attending[]" type="checkbox" value="Attending Brunch" />  No<input name="notattending[]" type="checkbox" value="Not Attending Brunch" /><br>
              Name 5<br><input type="text" name="myInputs[]">   Attending Brunch? Yes<input name="attending[]" type="checkbox" value="Attending Brunch" />  No<input name="notattending[]" type="checkbox" value="Not Attending Brunch" /><br>
     </div>
     <input type="button" value="Add another volunteer" onClick="addInput('dynamicInput');">
 </li> 
```

This is the php that is returning the information in an email:

```
$myInputs = $_POST['myInputs'];
foreach ($myInputs as $eachInput) {
     $message .= $eachInput . " - " ;
}

$attending = $_POST['attending'];
foreach ($attending as $moreInput) {
     $message .= $moreInput . "<br><br>";
}

$notattending = $_POST['notattending'];
foreach ($notattending as $moreInput) {
     $message .= $moreInput . "<br><br>";
}

$contact = $_POST['contact'];
$from = "$name <$email>";
$to = $_POST['recipient']; //"kim@ka-kingdesigns.com";
$subject = "Day of Caring Team Registration".$_POST['subject'];
$comments = "
<strong>Team Members</strong><br> {$message}<br><br>; 
```

Right now it return info entered like this:

**Team Members** Kim - Attending Brunch - Donovan - - - - Not Attending Brunch

I need it to return like this:

**Team Members**
Kim - Attending Brunch
Donovan - Not Attending Brunch

Can anyone help?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T18:19:20.710

就目前情况而言，您正在遍历表单上的整个人名列表；然后您将遍历与会者列表；然后您将循环查看未参加者的列表。

我建议明确编号字段：

```
Name 1<br><input type="text" name="name_1">   
Attending Brunch? Yes<input name="attending_1" type="radio" value="Yes" />  
No<input name="attending_1" type="radio" value="No" /><br> 
```

这使得处理数据变得更加容易：

```
$count = 1;

while (isset($_POST["name_" . $count])) {
    $message .= $_POST["name_" . $count] . " - " $_POST["attending_" . $count] . "\n";
} 
```

（抱歉，如果语法有点不对劲——我整天都在写 perl，而且语法很接近，当我尝试切换回来时会引起问题）

如果你想使用 javascript 添加一个额外的条目，它只需要遍历表单以找到最高的现有条目，并使用下一个可用的数字来生成字段名称。

# javascript - Basic google maps api and callback

> ID：10953747
> 
> 赞同：1
> 
> 时间：2012-06-08T17:56:49.807
> 
> 标签：javascript, google-maps, callback

I am having a problem with the service.getDistanceMatrix call.

```
<html>
<head>
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false">    </script>
<script type="text/javascript">

origin = "Chicago, IL";
destination = "Springfield, IL";
service = new google.maps.DistanceMatrixService();

service.getDistanceMatrix(
{
    origins: [origin],
    destinations: [destination],
    travelMode: google.maps.TravelMode.DRIVING,
    unitSystem: google.maps.UnitSystem.IMPERIAL,
    avoidHighways: false,
    avoidTolls: false
}, 
callback
);

function callback(response, status) {
var orig = document.getElementById("orig"),
    dest = document.getElementById("dest"),
    dist = document.getElementById("dist");

if(status=="OK") {
    orig.value = response.originAddresses[0];
    dest.value = response.destinationAddresses[0];
    dist.value = response.rows[0].elements[0].distance.text;
} else {
    alert("Error: " + status);
}
}

function doIt() {
origin1 = document.getElementById("orig");
destination1 = document.getElementById("dest");
service1 = new google.maps.DistanceMatrixService();

service1.getDistanceMatrix(
   {
        origins: [origin1],
        destinations: [destination1],
        travelMode: google.maps.TravelMode.DRIVING,
        unitSystem: google.maps.UnitSystem.IMPERIAL,
        avoidHighways: false,
        avoidTolls: false
    }, 
callback1
);

}

function callback1(response, status) {

if(status=="OK") {
    orig.value = response.originAddresses[0];
    dest.value = response.destinationAddresses[0];
    dist.value = response.rows[0].elements[0].distance.text;
} else {
    alert("Error: " + status);
}
}

</script>
</head>
<body>
<br>
Basic example for using the Distance Matrix.<br><br>
Origin: <input id="orig" type="text" style="width:35em"><br><br>
Destination: <input id="dest" type="text" style="width:35em"><br><br>
Distance: <input id="dist" type="text" style="width:35em">
<button onClick="doIt()">Distance</button>
</body>
</html> 
```

Most of this was taken directly from a google sample. However, I am trying to add a button to refresh the form. Something seems to be wrong in service1.getDistanceMatrix. It seems to say error 0.

Any ideas to fix this?

thank you

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T18:23:24.417

这些参考资料`.value`最后需要：

```
service1.getDistanceMatrix(
   {
    origins: [origin1.value],
    destinations: [destination1.value], 
```

我个人会使用`document.getElementById`for`orig, dest`和 `dist`below（我觉得它更安全，因为它更精确），但它的编写方式也有效。我有点困惑，因为我认为它不会起作用。上面`orig, dest, dist`第一个定义了`callback`，但我认为它们在`callback1`.

```
function callback1(response, status) {

if(status=="OK") {
    orig.value = response.originAddresses[0];
    dest.value = response.destinationAddresses[0];
    dist.value = response.rows[0].elements[0].distance.text; 
```

# c# - 如果语句突然被 Visual Studio 2010 在下一行格式化

> ID：10953749
> 
> 赞同：9
> 
> 时间：2012-06-08T17:56:53.580
> 
> 标签：c#, visual-studio-2010, formatting

您好，VS2010 突然开始以一种我不想要的方式格式化我的 if 语句，我不知道如何转换它。我曾经格式化 if 语句而没有像这样的赞誉。

```
if (true) DoThis(); 
```

但是现在VS2010格式一直如下。

```
if (true)
    DoThis(); 
```

我不想要这个，它让我发疯。我没有安装任何插件。有谁能够帮助我 ？我可以在哪里调整这个设置？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-16T09:04:14.640

它是

> 选项->文本编辑器->c#->包装->将语句和成员声明留在同一行。

（必须打开）。

Steve B，你可以拥有 Kudus，因为你指导我“几乎”是正确的选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T14:26:58.397

尝试在“工具”>“选项”>“文本编辑器”>“C#”（或您使用的任何语言）>“格式”>“新行”下查看。看看你在那里选择了什么。

另外，您提到您没有任何插件，但是您安装了 Reshaper 吗？我知道专门用于格式化 if 块的 resharper 设置。

编辑：@Steve B 是正确的，而不是“新行”，选择“换行”并选择“在单行上保留块”

# c++ - 排序后的快速排序输出提供了一个额外的字符

> ID：10953750
> 
> 赞同：2
> 
> 时间：2012-06-08T17:56:55.213
> 
> 标签：c++, string, sorting, quicksort

我有这个快速排序实现来对字符进行排序。

```
int main(){
char val[] = "dcbeaaae";
    QuickSort(val, 0, length);

    for(int i=0;i<length;i++) //Sorted print
        cout<<val[i];
return 0
}

void QuickSort(char values[], int first, int last)
{
    if(first<last)
    {
        int splitPoint;
        Split(values, first, last, splitPoint);
        QuickSort(values, first, splitPoint-1);
        QuickSort(values, splitPoint+1, last);
    }
}

void Split(char values[], int first, int last, int& splitPoint)
{
    int splitVal = values[first];
    int saveFirst = first;
    bool onCorrectSide;

    first++;
    do
    {
        onCorrectSide = true;
        while(onCorrectSide)
        {
            if(values[first] > splitVal)
                onCorrectSide = false;
            else
            {
                first++;
                onCorrectSide = (first<=last);
            }
        }
        onCorrectSide = (first<=last);
        while(onCorrectSide)
            if(values[last] <= splitVal)
                onCorrectSide = false;
            else
            {
                last--;
                onCorrectSide = (first<=last);
            }

        if(first<last)
        {
            Swap(values[first], values[last]);
            first++;
            last--;
        }
    }while(first<=last);

    splitPoint = last;
    Swap(values[saveFirst], values[splitPoint]);
}

void Swap(char& item1, char& item2)
{
    char temp = item1;
    item1 = item2;
    item2 = temp;
} 
```

但是，我从中得到的输出有点错误，即在这些排序字符的开头我得到了一个额外的空间。在放置断点时，我看到在 index `0`，元素是 = 0

输入：`aaabcdee`
输出：（`aaabcdee`第一个 a 之前的一个额外空格）

有什么建议我在这里错过了吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-08T18:03:14.597

假设`length`是字符数组中的字符数（不包括 NUL 字符）。您需要将快速排序函数调用为：

```
QuickSort(val, 0, length-1); 
```

因为函数的最后一个参数`QuickSort`是数组最后一个元素的索引，并且在长度为 的字符数组中`length`这个索引是`length - 1`.

通过传递`length`给该函数，您甚至可以使 NUL 字符参与排序，并且由于它比其他字符小，它被移动到已排序数组的开头，该数组在打印时打印为空白。

# mongodb - How to modify replica set config?

> ID：10953752
> 
> 赞同：25
> 
> 时间：2012-06-08T17:57:09.207
> 
> 标签：mongodb

I have a mongo 2 node cluster running, with this replica set config.

```
config = {_id: "repl1", members:[
{_id: 0, host: 'localhost:15000'},
{_id: 1, host: '192.168.2.100:15000'}]
} 
```

I have to move these both nodes on to new servers. I have copied everything from old to new servers, but I'm running into issues while reconfiguring the replica config due to ip change on the 2nd node.

I have tried this.

```
config = {_id: "repl1", members:[
 {_id: 0, host: 'localhost:15000'},
{_id: 1, host: '192.168.2.200:15000'}]
}
   rs.reconfig(config)  
   {

"startupStatus" : 1,
"errmsg" : "loading local.system.replset config (LOADINGCONFIG)",
"ok" : 0
} 
```

It shows above message, but change is not happening.

I also tried changing replica set name but pointing to the same data dirs. I am getting the following error:

```
rs.initiate() 
{
"errmsg" : "local.oplog.rs is not empty on the initiating member. cannot initiate.",
"ok" : 0
} 
```

What are the right steps to change the IP but keeping the data on the 2nd node, or do i need to recreate/resync the 2nd node?

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-09-04T21:37:41.763

嗯，我有同样的问题。

我不得不删除所有复制和 oplog。

```
use local
db.dropDatabase() 
```

用新的名称重新启动你的 mongo

```
config = {_id: "repl1", members:[
{_id: 0, host: 'localhost:15000'},
{_id: 1, host: '192.168.2.100:15000'}]
}

rs.initiate(config) 
```

我希望这也适用于你

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2012-07-10T15:04:02.933

重新配置副本集时可以使用 force 选项：

```
rs.reconfig(config, {force: true}) 
```

请注意，正如 Adam 在评论中已经建议的那样，您应该至少有 3 个节点：2 个完整节点和 1 个仲裁器（支持的最低配置）或 3 个完整节点（推荐的最低配置），以便可以选举主节点。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-11-25T12:45:25.527

我意识到这是一篇旧帖子，但我发现在尝试更改副本集中辅助节点使用的端口时遇到了完全相同的错误。

在我的情况下，我需要停止我正在更改其配置的辅助服务器，并在将更改的配置应用于主服务器之前将其启动到其新地址和端口上。

这是在 mongo 文档中，但是我必须上下移动的顺序是我在第一遍时误读的东西，所以为了清楚起见，我在这里重复了一遍：

1.  关闭要移动的副本集的次要成员。
2.  将辅助备份带到其新地址
3.  按照上面原始帖子中的详细说明进行配置更改

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-12-05T22:39:27.147

您可以使用 rs.reconfig 选项。首先使用 rs.conf() 检索当前配置。根据需要修改配置文档，然后将修改后的文档传递给rs.reconfig()

[文档](https://docs.mongodb.com/manual/reference/method/rs.reconfig/index.html)中的更多信息。

# cuda - 有没有在 cuda 上使用只读哈希图的好方法？

> ID：10953754
> 
> 赞同：5
> 
> 时间：2012-06-08T17:57:14.590
> 
> 标签：cuda

我对编程和 Cuda 真的很陌生。基本上我有一个 C 函数，它读取数据列表，然后根据哈希图检查每个项目（我在 C 中为此使用[uthash](http://uthash.sourceforge.net/)）。它运行良好，但我想在 Cuda 中运行这个过程（一旦它获得哈希键的值，然后它会进行大量处理），但我不确定创建一个只读哈希函数的最佳方法可能在库达。

## 背景

基本上，我正在尝试尽快评估非常大量的投资组合。我不断得到数以百万计的投资组合，它们以两个列表的形式出现。一个有股票名称，另一个有重量。然后我使用股票名称查找哈希表以获取其他数据（价值、百分比变化等），然后根据权重进行处理。在纯 C 语言的 CPU 上大约需要 8 分钟，所以我对在 GPU 上尝试它很感兴趣。

我已经阅读并完成了其中的示例，`cuda by example`所以我相信我知道除了散列函数之外的大部分内容（附录中有一个，但它似乎专注于添加它，而我只希望它作为参考，因为它'永远不会改变。我可能在边缘处很粗糙，`cuda for example`所以在这种情况下，我可能缺少一些对我有帮助的东西，比如为此使用文本或某种特殊形式的记忆）。如果每个块都有自己对哈希图的访问权限，或者每个线程或者对于整个 GPU 来说足够好，我将如何构造它以获得最佳结果？

## 编辑

很抱歉澄清一下，我只使用 C。最坏的情况是我愿意使用另一种语言，但理想情况下，我想要一些东西，我可以在 GPU 上放置一次，然后让所有未来的线程读取它，因为要处理我的数据我需要分几批做）。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-09T18:42:39.167

这是关于在 GPU 上使用哈希映射的潜在性能问题的一些想法，以支持我关于将哈希映射保留在 CPU 上的评论。

NVIDIA GPU 以 32 个线程为一组运行线程，称为 warp。为了获得良好的性能，warp 中的每个线程必须在本质上做相同的事情。也就是说，它们必须运行相同的指令，并且它们必须从彼此靠近的内存位置读取。

我认为哈希映射可能会违反这两个规则，可能会大大降低 GPU 的速度，以至于将哈希映射保留在 GPU 上毫无用处。

考虑一下当一个 warp 中的 32 个线程运行时会发生什么：

*   首先，每个线程必须创建股票名称的散列。如果这些名称的长度不同，这将涉及不同长度的散列循环中的不同轮数，并且经线中的所有线程必须等待最长名称的散列完成。根据散列算法的不同，代码在散列算法中可能采用不同的路径。每当一个 warp 中的不同线程需要采用不同的路径时，相同的代码必须运行多次（每个代码路径一次）。这称为翘曲散度。

*   当 warp 中的所有线程都获得了一个散列时，每个线程将不得不从慢速全局内存中的不同位置（由散列指定）读取。当经线中的 32 个线程中的每一个都以紧密、连贯的模式读取时，GPU 会以最佳方式运行。但是现在，每个线程都从内存中一个基本上随机的位置读取。这可能导致 GPU 必须序列化所有线程，从而可能将性能降低到潜在的 1/32。

*   线程读取的内存位置是哈希桶。每个都可能包含不同数量的哈希，再次导致扭曲中的线程必须做不同的事情。然后他们可能不得不再次分支，每个分支到一个随机位置，以获得映射的实际结构。

如果您将股票名称和数据结构保留在 CPU 上的哈希图中，则可以使用 CPU 将信息数组放在一起，这些信息以 GPU 擅长处理的确切模式存储。根据 CPU 的繁忙程度，您可以在 GPU 处理之前提交的工作时执行此操作。

这也让您有机会将 CPU 上的结构数组 (AoS) 更改为 GPU 的数组结构 (SoA)。如果您不熟悉这个概念，基本上，您可以转换：

```
my_struct {
  int a;
  int b;
};
my_struct my_array_of_structs[1000]; 
```

到：

```
struct my_struct {
  int a[1000];
  int b[1000];
} my_struct_of_arrays; 
```

这将所有的`a`' 放在内存中，这样当一个 warp 中的 32 个线程到达读取的指令时`a`，所有的值都整齐地排列在一起，使整个 warp 能够加载值非常快。`b`当然，对于 's也是如此。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T18:48:57.817

[在cuda-thrust-extensions](http://code.google.com/p/cuda-thrust-extensions/)库中有一个 CUDA Thrust 的 hash_map 扩展。我还没有尝试过。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-10T04:09:23.277

因为你的hash map太大了，我觉得可以换成数据库，mysql或者其他产品都可以，估计比自己设计hash map快。并且我同意 Roger 的观点，它不适合移动到 GPU 上，它会消耗太大的设备内存（可能无法容纳它），并且内核函数访问设备上的全局内存非常慢。

此外，您的程序的哪一部分需要 8 分钟，在哈希图中查找或处理权重？如果是后者，可能是GPU可以加速。

最好的祝福！

# arrays - 如何将二维字符数组转换为 char**？

> ID：10953761
> 
> 赞同：1
> 
> 时间：2012-06-08T17:57:43.633
> 
> 标签：arrays, char

我有一个如下的打印功能：

```
void print(char **p)
{
    cout<<p[0]<<endl;
} 
```

这是我的主要功能

```
int _tmain(int argc, _TCHAR* argv[])
{
    char a[50][50];
    strcpy(a[0], "hello");
    print(&a[0]);
} 
```

print func 调用将得到编译错误。我的问题是在不修改 print func 的定义的情况下，如何修改 print func 调用以使其打印出你好？

更新：以下代码可以工作。

```
char *temp=a[0];
print(&temp); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T18:04:12.523

你不需要转换任何东西。如果你调用一个以数组为参数的函数，这总是一个指针。在我看来，你只需要打电话

打印（一[0]）；

你所做的会导致一个 char ***作为参数。

# c# - 持有值的对象。我需要向我的对象添加五个测试

> ID：10953763
> 
> 赞同：-6
> 
> 时间：2012-06-08T17:57:46.590
> 
> 标签：c#

```
public partial class Form1 : Form
{
    Course[] csharp = new Course[5];     

    public Form1()
    {
        InitializeComponent();
    }        

    private void Form1_Load(object sender, EventArgs e)
    {
        Test c1 = new Test("Quiz",
            new DateTime(2012, 6, 6), 86);
        Test c2 = new Test("Mid-Term",
           new DateTime(2012, 5, 6), 90);
        Test c3 = new Test("Final",
           new DateTime(2012, 4, 6), 87);
        Test c4 = new Test("Quiz",
           new DateTime(2012, 3, 6), 100);
        Test c5 = new Test("Quiz",
           new DateTime(2012, 2, 6), 66);
    }
} 
```

如何将我的测试 c5 添加到我的对象数组 csharp？我想向三个对象添加五种测试类型。请帮助我处于初学者水平。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T18:01:22.280

您可以使用[数组初始值设定项语法](http://msdn.microsoft.com/en-us/library/aa664573%28v=vs.71%29.aspx)声明一个数组并为其赋值，如下所示：

```
Test[] tests = {
    new Test("Quiz", new DateTime(2012, 6, 6), 86),
    new Test("Mid-Term", new DateTime(2012, 5, 6), 90),
    new Test("Final", new DateTime(2012, 4, 6), 87),
    new Test("Quiz", new DateTime(2012, 3, 6), 100),
    new Test("Quiz", new DateTime(2012, 2, 6), 66)
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T18:03:28.513

我知道我是一个初学者并且有这样的问题！您不能将测试对象添加到课程对象，它们是两个不同的东西！

你需要类似的东西

```
 Test[] courseTests = new Test[5]; 
```

并通过做添加

```
 courseTests[1] = new Test("Quiz", new DateTime(2012, 6, 6), 86); 
```

* * *

或者您可以使用列表`List<Test> courseTests = new List<Test>();`并使用 courseTests.Add

* * *

编辑：

我明白你的意思，你需要这样的东西：

```
public Class course
{
    public List<Test> tests = new List<Test>();
     //Place other course code here
}
public Class Test
{
   public string Name;
   public Datetime Time;
   public int Number;
    Test(string name, Datetime time, int number)
    {
Name = name;
Time = time;
Number = number;
    }
} 
```

然后在您的 Main 方法或其他方法中，执行`Course.tests.Add(new Test(Blah blah blah));`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T18:24:01.103

在您的 Course 类中创建一个 Test[] 并设置为您想要的大小。然后像这样创建一个 void 方法。在下面的代码中 myTests 是您的测试数组。希望这可以帮助！

```
 public void addTest(Test a)
    {
       for (int i = 0; i < myTests.Length; i++)
       {
           if (myTests[i] == null)
           {
               //Adds test and leaves loop.
               myTests[i] = a;
               break;
           }
           //Handler for if all tests are already populated.
           if (i == myTests.Length)
           {
               MessageBox.Show("All tests full.");
           }
        }
    } 
```

此外，如果您想使测试数组的大小动态化，您可以使用 ArrayList。希望这可以帮助！

# jquery - 创建热图并提供服务

> ID：10953767
> 
> 赞同：0
> 
> 时间：2012-06-08T17:58:21.603
> 
> 标签：jquery, google-maps-api-3, gis, geospatial, heatmap

我正在使用 Google Maps V3 API 在地图上绘制标记。我有一些点数据（包含`lat`、`lng`、`value`），我想用它们来创建热图并将它们覆盖在 Google 地图上。

**问题：**热图不经常更改，可能每 3 个月更新一次。将热图传递到谷歌地图的更好方法是将数据点转换为热图，生成几个 (5-9) 不同的缩放版本，并通过独立的图块服务器提供它吗？

如果是这样，如何转换为热图，生成不同的版本，哪个图块服务器将是生成图块的良好接口并提供给 Google Maps API？

或者，使用每个点的计算热图值生成一个点数组（常规 N x N 网格模式），然后使用其中一个 HTML5 + JS 插件在谷歌地图上生成热图会更好吗？我担心用户的浏览器无法支持 HTML5 画布。

# c# - 具有链接 OLAP 服务器的 SqlCommand.ExecuteScalar 不返回任何值

> ID：10953769
> 
> 赞同：2
> 
> 时间：2012-06-08T17:58:41.027
> 
> 标签：c#, sql-server, ssas, olap

我在使用 执行查询时遇到问题`SqlCommand`，我正在使用`ExecuteScalar()`方法并将打开的查询传递给它：

```
 SELECT * FROM OpenQuery(MY_OLAP,
'WITH MEMBER [Measures].[Out] AS
''[Measures].[Hours]''
 SELECT NON EMPTY [Machine].[Stops].[All]
 ON ROWS, [Measures].[Out] ON COLUMNS FROM [Machines]') 
```

并尝试对链接的 OLAP 服务器执行查询，但我得到的唯一结果是`object=null`或空结果，但是当我在管理工作室中运行相同的查询时，它返回正确的值。

```
 SqlConnection cubeConnection = new SqlConnection(cubeConnectonString);
            using (SqlCommand cubeCmd = new SqlCommand(cubeQuery, cubeConnection))
            {
                cubeConnection.Open();
                var tmp = cubeCmd.ExecuteScalar();
                if (tmp==null) {
                    cuberesult = "0";
                }
                else tmp.ToString();

            } 
```

我添加了链接的 OLAP 服务器，而不是使用我的域用户添加链接服务器登录以便访问该多维数据集，我使用标准身份验证登录到服务器，但这没有帮助。有人知道我错过了什么。

```
EXEC sp_addlinkedserver
    @server='MY_OLAP',
    @srvproduct='', 
    @provider='MSOLAP', 
    @datasrc='MYSQLSERVER', 
    @catalog='CUBE' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-29T20:15:40.650

[这篇文章](http://sqlmag.com/reporting/access-analysis-services-cubes-wcf)的最后一章可能会对你有所帮助。他们经常玩授权。例如：

```
EXEC master.dbo.sp_addlinkedsrvlogin @rmtsrvname=N'SSAS',@useself=N'False',
    @locallogin=NULL,@rmtuser=NULL,@rmtpassword=NULL 
```

此外，您在代码中使用引号或类似内容有错误的可能性很小，这会将您的查询置于 cubeQuery 变量中。@ 是一种安全的方式。

```
 string cubeQuery = @"SELECT * FROM OpenQuery(MY_OLAP,
'WITH MEMBER [Measures].[Out] AS
''[Measures].[Hours]''
 SELECT NON EMPTY [Machine].[Stops].[All]
 ON ROWS, [Measures].[Out] ON COLUMNS FROM [Machines]')"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T23:37:04.870

抱歉，但我最近读到只有在您拥有 32 位 SQL Server 时才有可能。你有X64吗？如果可以的话，我会尝试以书面形式找到它。

# c# - 将目录中的所有文件加载到网页 ASP.NET

> ID：10953771
> 
> 赞同：0
> 
> 时间：2012-06-08T17:58:51.147
> 
> 标签：c#, asp.net, regex, directory, filenames

因此，我有以下代码应该将正则表达式与目录中的文件匹配，并输出与正则表达式匹配的所有文件名。但是，我认为我的正则表达式可能是错误的。它应该输出 [content]_[model name]_[more content] 形式的文件，但目前没有显示任何内容。

代码：

```
 string pattern = @".*"+Request.QueryString["model"]+@".*";
        String myPath = HttpRuntime.AppDomainAppPath;
        var matches = Directory.GetFiles(myPath+@"All Plots 1 Year\").Where(path => Regex.Match(path, pattern).Success);
        foreach (var f in matches)
        {
            Response.Write(f);
            Response.Write("<br />");
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T19:33:54.063

如果你的正则表达式那么简单，那么跳过正则表达式，跳过 linq 并使用 >>

```
Directory.GetFiles(Path.Combine(myPath, @"All Plots 1 Year\"), "*" + Request.QueryString["model"] + "*") 
```

# vim - 在 Vim 中重新格式化，明智的做法

> ID：10953777
> 
> 赞同：4
> 
> 时间：2012-06-08T17:59:12.413
> 
> 标签：vim

除了普通文本之外，我不经常重新格式化文本，`gq`所以这可能很简单，但似乎没有运气在帮助中找到它。

无论如何，我有这样的文字

```
Funnily enough, that was exciting. 
"I've just about had enough of this," said a voice beside him. 
He looked up. A girl had come down the other path. Her face was red with exertion under the pale make-up, her hair hung over her eyes in ridiculous ringlets, and she wore a dress which, while clearly made for her size, was designed for someone who was ten years younger and keen on lace edging. 
She was quite attractive, although this fact was not immediately apparent. 
"And you know what they say when you complain?" she demanded. This was not really addressed to Victor. He was just a convenient pair of ears. 
```

这在 Vim 中读起来很痛苦。所以我试图重新格式化它，`gq`这给了我这个

```
Funnily enough, that was exciting.  "I've just about had enough of this,"
said a voice beside him.  He looked up. A girl had come down the other path.
Her face was red with exertion under the pale make-up, her hair hung over
her eyes in ridiculous ringlets, and she wore a dress which, while clearly
made for her size, was designed for someone who was ten years younger and
keen on lace edging.  She was quite attractive, although this fact was not
immediately apparent.  "And you know what they say when you complain?" she
demanded. This was not really addressed to Victor. He was just a convenient
pair of ears. 
```

这是相当无用的，因为在这种情况下，原始行尾具有特殊含义。我想要完成的是这个

```
Funnily enough, that was exciting. 
"I've just about had enough of this," said a voice beside him. 
He looked up. A girl had come down the other path. Her face was red with
exertion under the pale make-up, her hair hung over her eyes in ridiculous
ringlets, and she wore a dress which, while clearly made for her size, was
designed for someone who was ten years younger and keen on lace edging. 
She was quite attractive, although this fact was not immediately apparent. 
"And you know what they say when you complain?" she demanded. This was not
really addressed to Victor. He was just a convenient pair of ears. 
```

即保留原始行结尾，但将比 textwidth 长的每一行“分解”为几行。因此它符合预定义的列宽限制。

有人对如何做到这一点有任何想法吗？这是一个相当大的文件，我需要一些方法来处理它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-08T19:08:49.510

直观地选择所有行，然后在 ex 模式下执行：

```
:norm gqq 
```

gqq 重新格式化一行。:norm with a range 对范围内的每个单独应用一个普通代码。这意味着您`gqq`分别在每一行上应用。并且因为您`textwidth`的设置为一定的长度（例如`80`），这意味着较短的行将不会被连接/换行。

我已经在您的示例文本上对此进行了测试，它只是给出了您想要的。

顺便说一句，您可以使用 vim 使用 `:formatprg`外部 prg 对其进行修改。这可以更好地控制您想要使用外部应用程序修改的内容。欲了解更多信息，请阅读 `:h formatprg`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T18:27:26.640

您只是为了阅读目的而这样做吗？如果是这样，您应该考虑只在分词时打开换行。在命令模式下：

```
:set wrap
:set linebreak 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T18:21:39.640

假设这是在 Linux 上，有许多实用程序可以做你想要的 -`fmt`和`roff/nroff/troff`变体等`fmt`是我经常使用的一个，但它需要你在每个段落之间有一个空行 - 这很容易完成中`vim`，虽然。因此，您可以添加空行，保存文件，然后运行它`fmt -76`，例如将每行限制为 76 个字符。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-08T18:28:44.473

一种原始的方式，但通常设法做到这一点

```
tw=80
qa (recording a macro)
  Vgq
q (stop recording)

nmap <C-p> :execute "normal! @a"<cr>

and by holding <C-p> for quite a while. Not the most elegant of solutions but worked. 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-09T04:21:46.463

如果除最后一行之外的系列的每一行都以空格结尾，您可以`gq`认为一系列行属于一个段落：

```
set formatoptions+=w 
```

. 在此设置之后`gq`将不会在您的示例中加入行（除非您有尾随空格）并且您仍然可以使用`:%s/ \n/ /`. 另一种方法是在每个当前行之间添加空行。

我也建议做

```
set list listchars+=trail:- 
```

为了不仅让 vim 看到段落结束的位置，而且能够自己看到（这个设置将显示尾随空格）。

# iphone - 调用 CocoaAsyncMethod scheduleDequeueRead 时应用程序冻结

> ID：10953785
> 
> 赞同：0
> 
> 时间：2012-06-08T17:59:49.537
> 
> 标签：iphone, objective-c, ios, cocoaasyncsocket

我正在使用 CocoaAsyncSocket 库来创建 TCP 套接字连接。我遇到的问题是在调用了几个库方法之后，我得到了一个错误。

应用委托：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{   
    socket = [[AsyncSocket alloc] initWithDelegate:self];
    NSError *error = nil;
    if (![socket connectToHost:@"199.5.83.63" onPort:11005 error:&error]) 
    {
        NSLog(@"Error connecting: %@", error);
    }

    [socket readDataWithTimeout:10 tag:1];

    self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]] autorelease];
    // Override point for customization after application launch.
    self.viewController = [[[tekMatrixViewController alloc] initWithNibName:@"tekMatrixViewController" bundle:nil] autorelease];
    self.window.rootViewController = self.viewController;
    [self.window makeKeyAndVisible];
    return YES;
} 
```

这是我在 CocoaAsyncSocket 库中的方法：

```
- (void)onSocket:(AsyncSocket *)sock didReadData:(NSData *)data withTag:(long)tag
{
    NSData *strData = [data subdataWithRange:NSMakeRange(0, [data length])];
    NSString *msg = [[NSString alloc] initWithData:strData encoding:NSUTF8StringEncoding];
    NSLog(@"RX length: %d", [data length]);
    if(msg)
    {
        NSLog(@"RX:%@",msg);
    }
    else 
    {
        NSLog(@"Fail");
    }    
}

- (void)onSocket:(AsyncSocket *)sock willDisconnectWithError:(NSError *)err
{
    NSLog(@"error - disconnecting");
    //start reconnecting procedure here...
}

- (void)onSocketDidDisconnect:(AsyncSocket *)sock
{
    NSLog(@"disconnected");
}

- (void)onSocket:(AsyncSocket *)sock didConnectToHost:(NSString *)host port:(UInt16)port
{
    NSLog(@"connected");
} 
```

当我在模拟器中运行我的应用程序时，这是我的输出日志吐出的内容：

```
2012-06-08 13:17:30.808 tekMatrix[2793:f803] connected
2012-06-08 13:17:30.815 tekMatrix[2793:f803] RX length: 8
2012-06-08 13:17:30.816 tekMatrix[2793:f803] Fail 
```

之后，我在此方法中的 AsyncSocket.m 文件（库的一部分）中出现错误：

```
- (void)scheduleDequeueRead
{
    if((theFlags & kDequeueReadScheduled) == 0)
    {
        theFlags |= kDequeueReadScheduled;
        [self performSelector:@selector(maybeDequeueRead) withObject:nil afterDelay:0 inModes:theRunLoopModes];
    }
} 
```

具体来说，错误在线：

```
[self performSelector:@selector(maybeDequeueRead) withObject:nil afterDelay:0 inModes:theRunLoopModes]; 
```

例外是： **线程1：BAD_EXC_ACCESS（代码1=0，地址=0xd0688b8a）**

之后，应用程序在模拟器中完全冻结。如果有人能就这导致应用程序冻结的原因提供一些见解，我将不胜感激。

这是我正在使用的库： [CocoaAsyncSocket](https://github.com/robbiehanson/CocoaAsyncSocket)

***编辑：***

启用 Zombie Objects 并在模拟器中运行应用程序后，输出中会显示以下内容：

```
2012-06-08 14:53:15.416 tekMatrix[3217:f803] *** -[__NSArrayI count]: message sent to deallocated instance 0x6d10a70 
```

我将不得不对此进行一些挖掘并弄清楚发生了什么。

***编辑2：***

在使用仪器进行了一些挖掘之后，我发现了以下内容：

```
An Objective-C message was sent to a deallocated object (zombie) at address: 0x6b8bb10. 
```

***编辑 3：***

现在错误显示：

线程 1：EXC_BREAKPOINT（代码=EXC_I386_BPT，子代码=0x0）

这是仪器的屏幕截图。不过，我并没有真正关注如何解释这一点。看起来我正在向已释放的对象发送消息。这是真的？如果是这样，我该如何弄清楚这发生在哪里？

如果图像很难看，这里有一个直接链接： [仪器截图](http://i890.photobucket.com/albums/ac103/mmh924/ScreenShot2012-06-08at31523PM.png)

![仪器截图](../Images/8a8c26a598c25f7f8a5af087430385c1.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T18:40:03.770

您正在尝试访问一个不再存在的对象。可能您对它的保留不足/过度释放。

请参阅此答案以获取查找此类对象的工具：[如何在 Xcode 4 中设置 NSZombieEnabled？](https://stackoverflow.com/questions/2190227/how-do-i-setup-nszombieenabled-in-xcode-4)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-04T21:35:59.243

我知道这是事后的事，但我也遇到了同样的问题。解决方案是将 ARC 标志添加到 AsyncSocket.m，-fobjc-arc

:)

# c - 单个 malloc 调用中的二维数组

> ID：10953787
> 
> 赞同：2
> 
> 时间：2012-06-08T17:59:54.250
> 
> 标签：c, multidimensional-array, malloc

```
int **arrayPtr; 
arrayPtr = malloc(sizeof(int) * rows *cols + sizeof(int *) * rows); 
```

在上面的代码中，我们试图在一次`malloc`调用中分配一个二维数组。 `malloc`占用多个字节并为那么多字节分配内存，但在上述情况下，如何`malloc`知道首先它必须分配一个指针数组，每个指针都指向一个一维数组？

`malloc`在这种特殊情况下如何在内部工作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-08T19:10:45.650

二维数组与指向数组的指针数组不同。

`int **arrayPtr`没有定义二维数组。二维数组如下所示：

`int array[2][3]`

指向该数组第一个元素的指针如下所示：

`int (*array)[3]`

您可以指向一块内存：

`int (*array)[3] = malloc(sizeof(int)*5*3);`

* * *

注意它是如何索引的：

*   `array[x]`将扩展为`*(array+x)`，因此“向前 3 个整数的 x 数组”。
*   `array[x][y]`将扩展为`*( *(array+x) + y)`，因此“然后 y 向前整数”。

这里没有直接的指针数组，只有一个连续的内存块。

如果您有一个数组数组（与二维数组不同，通常使用`int** ptr`和一系列每行 malloc 完成），它会像：

*   `ptr[x]`将扩展为`*(array+x)`，因此“x 指针向前”
*   `ptr[x][y]`将扩展为`*( *(array+x) + y)`= "y ints forward"。

注意区别。两者都用 [x][y] 索引，但它们在内存中以不同的方式表示，并且索引以不同的方式发生。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-08T19:24:51.830

> malloc 怎么知道首先它必须分配一个指针数组，每个指针都指向一个一维数组？

它没有；`malloc`只是分配您指定的字节数，它不知道如何将这些字节构造成聚合数据类型。

如果您尝试动态分配多维数组，您有多种选择。

如果您使用的是支持*可变长度数组*的 C99 或 C2011 编译器，您可以简单地将数组声明为

```
int rows;
int cols;
...
rows = ...;
cols = ...;
...
int array[rows][cols]; 
```

但是，VLA 存在许多问题；它们不适用于非常大的数组，它们不能在文件范围内声明，等等。

第二种方法是执行以下操作：

```
int rows;
int cols;
...
rows = ...;
cols = ...;
...
int (*arrayPtr)[cols] = malloc(sizeof *arrayPtr * rows); 
```

在这种情况下，`arrayPtr`被声明为一个指向`int`带有`cols`元素的数组的指针，因此我们`rows`为每个元素分配数组`cols`。请注意，您只需编写`arrayPtr[i][j]`;即可访问每个元素。指针算术规则的工作方式与常规二维数组相同。

如果您使用的不是支持 VLA 的 C 编译器，则必须采用不同的方法。

您可以将所有内容分配为单个块，但您必须将其作为一维数组访问，计算偏移量如下：

```
int *arrayPtr = malloc(sizeof *arrayPtr * rows * cols);
...
arrayPtr[i * rows + j] = ...; 
```

或者您可以分两步分配它：

```
int **arrayPtr = malloc(sizeof *arrayPtr * rows);
if (arrayPtr)
{
  int i;
  for (i = 0; i < rows; i++)
  {
    arrayPtr[i] = malloc(sizeof *arrayPtr[i] * cols);
    if (arrayPtr[i])
    {
      int j;
      for (j = 0; j < cols; j++)
      {
        arrayPtr[i][j] = some_initial_value();
      }
    }
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T23:09:07.763

`int **arrayPtr;`不指向二维数组。它指向一个指针数组`int`。如果要创建二维数组，请使用：

```
int (*arrayPtr)[cols] = calloc(rows, sizeof *arrayPtr); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-08T18:16:56.197

`malloc()`不知道它需要分配一个指向数组的指针数组。它只是返回一块请求大小的内存。您当然可以通过这种方式进行分配，但是您需要初始化将用作指针的第一个“行”（或最后一个，甚至是列而不是行 - 但是您想这样做），以便它们指向该块中的适当区域。

这样做会更好，更有效：

```
int *arrayPtr = malloc(sizeof(int)*rows*cols); 
```

这样做的缺点是您必须在每次使用时计算正确的索引，但您可以编写一个简单的辅助函数来做到这一点。你不会有使用`[]`引用元素的“便利”，但你可以拥有例如`element(arrayPtr, x, y)`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-08T22:04:34.787

我会将您的注意力转移到“[] 运算符做什么？”的问题上。

如果您打算通过 [] 运算符访问数组中的元素，那么您需要意识到它只能根据元素的大小进行偏移，除非提供了一些数组几何信息。

malloc 没有尺寸信息的规定，calloc - 明确的一维。另一方面，声明的数组 (arr[3][4]) 显式地为编译器指定维度。

因此，要以 arr[i][j] 的方式访问动态分配的多维数组，实际上是分配了目标维度大小的一维数组系列。你需要循环来做到这一点。

malloc 返回指向堆内存的普通指针，没有关于几何或数据类型的信息。因此 [][] 不起作用，您需要手动进行偏移。

因此，无论 []-indexing 是您的优先级还是批量分配，都由您决定。

# jquery - 真正的基本视差滚动？

> ID：10953788
> 
> 赞同：1
> 
> 时间：2012-06-08T18:00:05.910
> 
> 标签：jquery, html, css, parallax

我想在我正在开发的网站上引入视差，但水平非常低。我尝试了很多教程，但它们似乎都面向具有多个全窗口背景的网站。

基本上我所拥有的是一个三栏页面，在整个站点中具有静态背景。我希望中间列（恰好是图像）的滚动速度比左右列稍慢。

关于最好和最简单的方法的任何提示？

提前致谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T15:15:05.977

试试这个 jQuery 插件——非常简单。 [http://www.devinrolsen.com/jquery-zlayers-parallax-plugin/](http://www.devinrolsen.com/jquery-zlayers-parallax-plugin/)

# vb.net - 使用带有参数的存储过程的结果作为仪表图的值 - asp.net 应用程序中的水晶报告

> ID：10953789
> 
> 赞同：4
> 
> 时间：2012-06-08T18:00:12.033
> 
> 标签：vb.net, crystal-reports

我有一个存储过程，它接受 2 个参数并返回一个整数值。我希望这个值成为页面上仪表图的值。这 2 个参数将根据所选项目的属性而变化。有没有一种简单的方法可以将存储过程中的一个值传递给图表以显示？这将嵌入在 asp.net 应用程序 (vb) 中 - 因此根据先前选择的项目，参数和结果的值将发生变化。感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T16:42:03.303

1.  创建包

    ```
    CREATE OR REPLACE PACKAGE REPORTING AS

    type query_results is ref cursor;

    PROCEDURE barfoo (one IN INTEGER, two IN INTEGER, three IN OUT REPORTING.query_results); 
    ```

    结束报告；

2.  创建存储过程

    创建或替换过程 BARFOO（一个 INTEGER DEFAULT NULL，两个 INTEGER DEFAULT NULL，三个 IN OUT reporting.query_results）作为开始

    打开三个选择一个 + 二从 dual ;

    结束酒吧；

3.  建立报告

3a。确保存储过程在数据库“专家”中可见

![在此处输入图像描述](../Images/13dad5ca62580b089d765633de915a44.png)

3b。将存储过程添加到报表中

![在此处输入图像描述](../Images/f374ae5f4aef9d3e2622452f3159112e.png)

3c。添加图表

插入 | 图表... | 类型选项卡 | 仪表，然后是数据选项卡

![在此处输入图像描述](../Images/adfed42b62f0d4a18acf562e19a68c12.png)

4.  结果

![在此处输入图像描述](../Images/5a77c4349ee747576f66fbf8377d61cd.png)

# javascript - 在浏览器地址栏中更改 URL 而无需重新加载现有页面

> ID：10953792
> 
> 赞同：30
> 
> 时间：2012-06-08T18:00:27.913
> 
> 标签：javascript, html, url

> **可能重复：**
> [修改 URL 而不重新加载页面](https://stackoverflow.com/questions/824349/modify-the-url-without-reloading-the-page)

我正在寻找一种方法来使用我当前的 javascript 动画使我的内部链接正常工作，而不会在您单击它们时导致页面重新加载 -**但我希望在浏览器中更新 URL**。

许多网站都这样做，这是一个很好的例子：[http ://grooveshark.com/#!/search?q=adf](http://grooveshark.com/#!/search?q=adf)

他们如何在不重新加载页面的情况下更新 URL？

* * *

更多细节：

目前我页面上的链接看起来像`<a href="#aboutus">About Us</a>`，这将带您`<div id="aboutus"></div>`通过 javascript。

javascript看起来像：

```
$("#navigation a").click(function(e){
  animate(..scroll to section..);
  e.preventDefault(); // <==========
}); 
```

我相信“e.preventDefault()”是导致 URL 不更新的原因，但是如何防止浏览器在 URL 更改时重新加载页面？

其他网站是如何做到的？这种方法叫什么（所以我可以进一步研究它）？

谢谢。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-06-08T18:06:04.097

[这是一个类似的问题](https://stackoverflow.com/questions/3338642/updating-address-bar-with-new-url-without-hash-or-reloading-the-page)。

这是一个例子：

```
function processAjaxData(response, urlPath){
    document.getElementById("content").innerHTML = response.html;
    document.title = response.pageTitle;
    window.history.pushState(
        {
            "html":response.html,
            "pageTitle":response.pageTitle
        },
        "",
        urlPath
   );
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T18:06:08.210

在我看来，整个事情都是用 AJAX 完成的。URL 中的`#!`导致浏览器将 URL 的其余部分解释为锚点——锚点不会导致页面重新加载（事实上，在正常的 HTTP 请求过程中，服务器永远不会看到浏览器在哪个锚点上）。当 URL 发生变化时，Javascript 会接管，检查查询字符串，并使用 Web 服务从服务器加载任何合适的内容。

我没有深入研究它，但在我看来就是这样。

# c++ - 驱动程序中的 ETW 跟踪 - 后处理

> ID：10953793
> 
> 赞同：1
> 
> 时间：2012-06-08T18:00:30.940
> 
> 标签：c++, windows, wdk, etw

我在驱动程序中有 ETW 跟踪；清单文件已正确创建，资源全部编译，等等。在目标机器上，我以管理员身份运行此命令：

> wevtutil im myManifest.xml

我没有错误。然后，我运行（以管理员身份）：

> logman 创建跟踪 myProviderName -o Log.etl -p "{myProviderGUID}" -f bincirc -max 1000

没有错误。然后我等待足够的时间来执行一些跟踪，然后我运行这些命令（以管理员身份）：

> logman 停止 myProviderName
> 
> tracerpt Log000001.etl

现在我遇到的问题是生成的文件`dumpfile.xml`根本没有显示我的任何痕迹的记录。它显示了设置详细信息的基本结构，包括提供程序 GUID 等。

所以我的问题是：在上述过程中我是否缺少一个步骤，或者问题一定出在我的跟踪代码上？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T19:46:24.347

原来是有问题；虽然不是我的代码。我没有在清单中包含我的事件的操作码，因此，没有记录任何事件。

如果有人偶然发现这篇文章，它可能会帮助您注意，您的事件必须具有通道、级别、操作码和模板才能实现基本功能。此外，上述过程缺少一个步骤。我需要执行以下操作：

1.  右键单击“我的电脑”并选择“管理”
2.  单击性能 > 数据收集器集 > 用户定义 > myProvider
3.  右键单击右侧窗格中的 myProvider，选择“属性”
4.  根据我在manifest中指定的设置Keywords(Any)、Keywords(All)和Level
5.  重新启动我的机器，并通过 logman 重新启用跟踪。

上面的过程（在问题+上面的补充部分）将创建一个日志会话并从生成的 ETL 文件中生成一个基本的可读日志输出。

# .net - 在经过的时间事件中使用启动和停止 .Net 计时器

> ID：10953794
> 
> 赞同：3
> 
> 时间：2012-06-08T18:00:38.483
> 
> 标签：.net, timer

我想在计时器的经过事件中做一些工作，它所花费的时间超过计时器间隔，因此当我运行我的代码时，由于计时器的间隔小于我的工作，我的计时器创建新线程以继续，当我运行我的代码很长一段时间，我的内存被很多线程损坏了。

我以一种有趣的方式解决了这个问题，即：

```
startListener()
{
Timer timer = new Timer(100);
timer.elapsed += new Elapsed(elapsed_timer);
timer.start();
}

void elapsed_timer()
{
timer.stop();
try
{
//some work that takes lots of time
}
catch()
{
//some work
}
finally
{
timer.stop();
}
} 
```

我的问题是：

该解决方案对于长时间运行的应用程序是否有任何问题，或者是否有其他更合适的解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T18:12:56.193

您不应该启动和停止计时器，而是可以设置`timer.Enabled = false`( [msdn doc](http://msdn.microsoft.com/en-us/library/system.timers.timer.enabled.aspx) )。

我还建议*可能*将您长时间运行的代码块包装在一个`Monitor.TryEnter`块中。`timer.Enabled`这将涵盖罕见的（但可能的？）机会，即在属性更改之前有两个已逝事件排队。

```
void elapsed_timer() 
{ 
  timer.Enabled = false; 
  try 
  { 
    //some work that takes lots of time 
  } 
  catch() 
  { 
    //some work 
  } 
  finally 
  { 
    timer.Enabled = true; 
  } 
} 
```

# java - 由体素组成的平面 3D 三角形

> ID：10953796
> 
> 赞同：2
> 
> 时间：2012-06-08T18:00:39.490
> 
> 标签：java, algorithm, geometry, voxel

我有一个问题，我似乎无法找到一个可行的算法，我已经尝试了好几天，但距离如此之近。

我想绘制一个由 3 个点（p0、p1、p2）定义的三角形。这个三角形可以是任何形状、大小和方向。三角形也必须在里面填充。

以下是我尝试过的一些事情以及它们失败的原因：

1

*   沿着三角形从一边到另一边画线
    *   失败，因为三角形会有孔，并且由于在有角度的表面上随着位置变化而画线的笨拙而不是平坦的

2

*   迭代一个区域并测试该点是否落在与三角形平行的平面以及投影到覆盖三角形区域的 XY、ZY 和 XZ 平面上的其他 3 个平面
    *   失败是因为对于某些三角形（具有非常接近的边）会有不可预测的结果，例如漂浮在周围的体素没有连接到任何东西

3

*   沿着三角形的边迭代一个区域（线算法）并测试一个点是否越过平行平面
    *   失败是因为从 p0 到 p1 画一条线与从 p1 到 p0 画一条线不同，任何重新排列的尝试都没有帮助，或者会导致更多问题。不对称是这个问题。

这都是为了制作多边形和平面。3 给了我最大的成功并制作了准确的三角形，但是当我尝试将它们连接在一起时，一切都崩溃了，我遇到了无法连接、不对称等问题。我相信 3 可以进行一些调整，但我只是磨损了从试图使这项工作这么长时间并需要帮助。

我的算法中有很多不相关的小细节，所以我把它们排除在外。对于数字 3，这可能是我的实现而不是算法本身的问题。如果您想要代码，我会尝试将其清理到足以理解的程度，不过这需要我几分钟。但我正在寻找已知有效的算法。我似乎在任何地方都找不到任何体素形状制作算法，我一直在从头开始做所有事情。

编辑：

这是第三次尝试。这是一个烂摊子，但我试图清理它。

```
// Point3i is a class I made, however the Vector3fs you'll see are from lwjgl

public void drawTriangle (Point3i r0, Point3i r1, Point3i r2)
{
    // Util is a class I made with some useful stuff inside

    // Starting values for iteration

    int sx = (int) Util.min(r0.x, r1.x, r2.x);
    int sy = (int) Util.min(r0.y, r1.y, r2.y);
    int sz = (int) Util.min(r0.z, r1.z, r2.z);

    // Ending values for iteration

    int ex = (int) Util.max(r0.x, r1.x, r2.x);
    int ey = (int) Util.max(r0.y, r1.y, r2.y);
    int ez = (int) Util.max(r0.z, r1.z, r2.z);

    // Side lengths

    float l0 = Util.distance(r0.x, r1.x, r0.y, r1.y, r0.z, r1.z);
    float l1 = Util.distance(r2.x, r1.x, r2.y, r1.y, r2.z, r1.z);
    float l2 = Util.distance(r0.x, r2.x, r0.y, r2.y, r0.z, r2.z);

    // Calculate the normal vector

    Vector3f nn = new Vector3f(r1.x - r0.x, r1.y - r0.y, r1.z - r0.z);
    Vector3f n   = new Vector3f(r2.x - r0.x, r2.y - r0.y, r2.z - r0.z);
    Vector3f.cross(nn, n, n);

    // Determines which direction we increment for

    int iz = n.z >= 0 ? 1 : -1;
    int iy = n.y >= 0 ? 1 : -1;
    int ix = n.x >= 0 ? 1 : -1;

    // Reorganize for the direction of iteration

    if (iz < 0) {
        int tmp = sz;
        sz = ez;
        ez = tmp;
    }
    if (iy < 0) {
        int tmp = sy;
        sy = ey;
        ey = tmp;
    }
    if (ix < 0) {
        int tmp = sx;
        sx = ex;
        ex = tmp;
    }

    // We're we want to iterate over the end vars so we change the value
    // by their incrementors/decrementors

    ex += ix;
    ey += iy;
    ez += iz;

    // Maximum length

    float lmax = Util.max(l0, l1, l2);

    // This is a class I made which manually iterates over a line, I already
    // know that this class is working

    GeneratorLine3d g0, g1, g2;

    // This is a vector for the longest side

    Vector3f v = new Vector3f();

    // make the generators

    if (lmax == l0) {
        v.x = r1.x - r0.x;
        v.y = r1.y - r0.y;
        v.z = r1.z - r0.z;

        g0 = new GeneratorLine3d(r0, r1);
        g1 = new GeneratorLine3d(r0, r2);
        g2 = new GeneratorLine3d(r2, r1);
    }
    else if (lmax == l1) {
        v.x = r1.x - r2.x;
        v.y = r1.y - r2.y;
        v.z = r1.z - r2.z;

        g0 = new GeneratorLine3d(r2, r1);
        g1 = new GeneratorLine3d(r2, r0);
        g2 = new GeneratorLine3d(r0, r1);
    }
    else {
        v.x = r2.x - r0.x;
        v.y = r2.y - r0.y;
        v.z = r2.z - r0.z;

        g0 = new GeneratorLine3d(r0, r2);
        g1 = new GeneratorLine3d(r0, r1);
        g2 = new GeneratorLine3d(r1, r2);
    }

    // Absolute values for the normal

    float anx = Math.abs(n.x);
    float any = Math.abs(n.y);
    float anz = Math.abs(n.z);

    int i, o;
    int si, so;
    int ii, io;
    int ei, eo;

    boolean maxx, maxy, maxz,
    midy, midz, midx,
    minx, miny, minz;

    maxx = maxy = maxz =
    midy = midz = midx =
    minx = miny = minz = false;

    // Absolute values for the longest side vector      

    float rnx = Math.abs(v.x);
    float rny = Math.abs(v.y);
    float rnz = Math.abs(v.z);

    int rmid = Util.max(rnx, rny, rnz);

    if (rmid == rnz) midz = true;
    else if (rmid == rny) midy = true;

    midx = !midz && !midy;

    // Determine the inner and outer loop directions

    if (midz) {
        if (any > anx) 
        {
            maxy = true;
            si = sy;
            ii = iy;
            ei = ey;
        }
        else {
            maxx = true;
            si = sx;
            ii = ix;
            ei = ex;
        }
    }
    else {
        if (anz > anx) {
            maxz = true;
            si = sz;
            ii = iz;
            ei = ez;
        }
        else {
            maxx = true;
            si = sx;
            ii = ix;
            ei = ex;
        }
    }

    if (!midz && !maxz) {
        minz = true;
        so = sz;
        eo = ez;
    }
    else if (!midy && !maxy) {
        miny = true;
        so = sy;
        eo = ey;
    }
    else {
        minx = true;
        so = sx;
        eo = ex;
    }

    // GeneratorLine3d is iterable
    Point3i p1;
    for (Point3i p0 : g0) {
        // Make sure the two 'mid' coordinate correspond for the area inside the triangle

        if (midz)
            do p1 = g1.hasNext() ? g1.next() : g2.next();
            while (p1.z != p0.z);
        else if (midy)
            do p1 = g1.hasNext() ? g1.next() : g2.next();
            while (p1.y != p0.y);
        else
            do p1 = g1.hasNext() ? g1.next() : g2.next();
            while (p1.x != p0.x);

        eo = (minx ? p0.x : miny ? p0.y : p0.z);
        so = (minx ? p1.x : miny ? p1.y : p1.z);
        io = eo - so >= 0 ? 1 : -1;

        for (o = so; o != eo; o += io) {
            for (i = si; i != ei; i += ii) {
                int x = maxx ? i : midx ? p0.x : o;
                int y = maxy ? i : midy ? p0.y : o;
                int z = maxz ? i : midz ? p0.z : o;

                // isPassing tests to see if a point goes past a plane
                // I know it's working, so no code

                // voxels is a member that is an arraylist of Point3i

                if (isPassing(x, y, z, r0, n.x, n.y, n.z)) {
                    voxels.add(new Point3i(x, y, z));
                    break;
                }
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T17:42:15.310

您可以使用类似[Besenham 的线算法](http://en.wikipedia.org/wiki/Bresenham%27s_line_algorithm)，但扩展到三个维度。我们想从中获得的两个主要想法是：

*   旋转初始线，使其斜率不会太陡。
*   对于任何给定的 x 值，找到最接近理想 y 值的整数值。

正如 Bresenham 的算法通过执行初始旋转来防止间隙一样，我们将通过执行两次初始旋转来避免空洞。

1.  获取代表三角形所在平面的法线向量和点。提示：使用（从 p0 到 p1 的线）和（从 p0 到 p2 的线）的叉积作为向量，并使用任何角点作为该点。
2.  您希望飞机足够不陡，以避免出现孔洞。您必须满足以下条件：

    *   `-1 >= norm.x / norm.y >= 1`
    *   `-1 >= norm.z / norm.y >= 1`

    将法线向量和初始点绕 x 轴旋转 90 度，绕 z 轴旋转 90 度，直到满足这些条件。我不确定如何以最少的旋转次数做到这一点，但我相当确定您可以满足任何飞机的这些条件。

3.  创建一个函数 f(x,z)，它代表您旋转的三角形现在所在的平面。它应该返回任意一对 X 和 Z 值的 Y 值。
4.  将您的三角形投影到 XZ 平面上（即，将所有 y 值设置为 0），并使用您最喜欢的 2d 三角形绘制算法来获取 x 和 z 坐标的集合。
5.  对于第 4 步中的每个像素值，将 x 和 z 值传递给第 3 步中的函数 f(x,z)。将结果四舍五入为最接近的整数，并将 x、y 和 z 值作为体素存储在某处。
6.  如果您在步骤 2 中执行了任何旋转，请在您的体素集合上以相反的顺序执行这些旋转的相反操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T18:03:25.200

从检查三角形/体素相交的函数开始。现在你可以扫描一个体积并找到与三角形相交的体素——这些是你感兴趣的。这是一个糟糕的算法，但也是对你尝试的其他任何东西的回归测试。使用 SAT（分离轴定理）并考虑三角形退化体积（1 个面，3 个边）并考虑体素对称性（只有 3 个面法线），该测试很容易实现。

我使用八叉树，所以我首选的方法是针对一个大体素测试一个三角形，并找出它与 8 个子八分圆中的哪一个相交。然后对相交的孩子使用递归，直到达到所需的细分水平。提示：最多有 6 个孩子可以与三角形相交，而且通常少于这个数。这很棘手，但会产生与第一种方法相同的结果，但要快得多。

3d 中的光栅化可能是最快的，但恕我直言，更难保证在所有情况下都没有漏洞。同样，使用第一种方法进行比较。

# java - 使用堆栈空间的 Java 数组

> ID：10953806
> 
> 赞同：8
> 
> 时间：2012-06-08T18:01:19.270
> 
> 标签：java, arrays

这是声明 Java 数组的常用方法：

```
int[] arr = new int[100]; 
```

但是这个数组正在使用堆空间。有没有一种方法可以使用 c++ 之类的堆栈空间来声明数组？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-08T18:17:19.373

`Arrays are objects`不管它是原始类型还是对象类型，所以像任何其他对象一样`allocated space on the heap.`

`But then from Java 6u23`版本，`Escape Analysis`应运而生，由`default activated in Java 7`.

`Escape Analysis is about the scope of the object`, `when an object is defined inside a method scope rather than a class scope`, 那么 JVM 知道这个对象无法逃脱这个有限的方法范围，并对其进行各种优化.. 比如常量折叠等

```
Then it can also allocate the object which is defined in the method scope,
on the Thread's Stack, which is accessing the method. 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-06-08T18:05:00.033

一句话，没有。

存储在堆栈中的唯一变量是原语和对象引用。在您的示例中，`arr`引用存储在堆栈中，但它引用了堆上的数据。

如果你问这个来自 C++ 的问题是因为你想确保你的内存被清理干净，请阅读[垃圾收集](http://javarevisited.blogspot.com/2011/04/garbage-collection-in-java.html)。简而言之，Java 会自动清理堆中的内存以及栈中的内存。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-08T18:02:38.580

数组是动态分配的，所以它们在堆上。

我的意思是，当你这样做时会发生什么：

```
int[] arr = new int[4];
arr = new int[5]; 
```

如果第一次分配是在堆栈上完成的，我们将如何垃圾收集它？引用`arr`存储在堆栈上，但实际的数据数组必须在堆上。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-10-12T10:47:05.427

它还没有作为语言特性得到支持，因为这需要[值类型](http://openjdk.java.net/projects/valhalla/)，因为通过引用传递堆栈数据是不安全的。

但是作为一种优化（[逃逸分析](https://docs.oracle.com/javase/8/docs/technotes/guides/vm/performance-enhancements-7.html#escapeAnalysis)），JVM 可能已经对包含固定大小的小型数组的局部变量执行此操作，但前提是它可以证明它没有逃逸本地/被调用者范围。也就是说，这只是一个运行时优化，而不是一些规范保证，因此很难依赖它。

# bash - 在 python 解释器提示中添加颜色，不能正确换行

> ID：10953812
> 
> 赞同：10
> 
> 时间：2012-06-08T18:01:38.570
> 
> 标签：bash, python

我想在终端中有一个更丰富多彩的 Python 提示符，只是为了便于阅读。我目前有：

```
sys.ps1 = '\033[96m>>> \033[0m'
sys.ps2 = '\033[96m... \033[0m' 
```

在我的`PYTHONSTARTUP`文件中，它确实根据需要给它颜色。但是，一行上的任何文本都不能正确换行。文本转到行尾，而不是立即开始新行，而是在开始新行之前开始覆盖第一行的开头。正如您可能想象的那样，这实际上是相当难以理解的。我该如何解决这种行为？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-08T18:12:11.723

尝试以下操作：

```
sys.ps1 = '\001\033[96m\002>>> \001\033[0m\002'
sys.ps2 = '\001\033[96m\002... \001\033[0m\002' 
```

[This answer to a similar question解释了为什么`\001`and`\002`是必要的。](https://stackoverflow.com/a/9468954/505154)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-08T19:12:49.910

有什么理由不使用[IPython](http://ipython.org/)吗？IPython 确实提供了开箱即用的颜色提示等...

# amazon-s3 - 亚马逊的 S3 是否允许您将整个存储桶设置为 RRS？

> ID：10953813
> 
> 赞同：2
> 
> 时间：2012-06-08T18:01:43.283
> 
> 标签：amazon-s3

我正在使用 S3。而且，我意识到它提供了更便宜的减少冗余存储 (RRS)。有没有办法将整个存储桶设置为 RRS？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T06:47:20.980

目前在 Amazon S3 中无法将存储桶设置为 RRS。RRS 确实设置在对象级别。

**我是 Bucket Explorer 的开发者之一。**并且您可以为存储桶设置存储桶默认值，然后该 s3 存储桶中的每个新上传都将启用 RRS。对于所有现有的 S3 文件，您可以使用 Batch Operation 设置 RRS。

# php - 基于先前选择的 PHP 选择

> ID：10953816
> 
> 赞同：1
> 
> 时间：2012-06-08T18:01:47.583
> 
> 标签：php, mysql, html, database, onchange

我在 PHP 中有 2 个函数，其中一个显示 ISBN 和书名，另一个显示基于先前选择中选择的 ISBN 的数据库中存在的版本。

这是2个功能：

ISBN - 图书下拉列表：

```
 <?php include ("includes/connections.php");
function dropdown($intIdField, $strNameField, $strTableName, $strOrderField, $strNameOrdinal, $strMethod="asc") {
   echo "<select name=\"$strNameOrdinal\" onchange=\"selection($id)\">\n";
   echo "<option value=\"NULL\">Select Value</option>\n";

   $strQuery = "select $intIdField, $strNameField
               from $strTableName
               order by $strOrderField $strMethod";

   $rsrcResult = mysql_query($strQuery);

   while($arrayRow = mysql_fetch_assoc($rsrcResult)) {
      $strA = $arrayRow["$intIdField"];
      $strB = $arrayRow["$intIdField"] . " - " . $arrayRow["$strNameField"];
      echo "<option value=\"$strA\">$strB</option>\n";
   }

   echo "</select>";
}
?> 
```

版本下拉列表：

```
<?php include ("includes/connections.php");
function dropdownEdition($intId1Field, $intId2Field, $strTableName, $strOrderField, $strNameOrdinal, $strMethod="asc") {

    $intId2Field = $GLOBALS['book'];
   var_dump($intId2Field);
   var_dump($_POST["book"]);

   echo "<select name=\"$strNameOrdinal\">\n";
   echo "<option value=\"NULL\">Select Value</option>\n";

   $strQuery = "SELECT $intId1Field, $intId2Field
               FROM $strTableName
               ORDER BY $strOrderField $strMethod";

   $rsrcResult = mysql_query($strQuery);

   while($arrayRow = mysql_fetch_assoc($rsrcResult)) {
      $strA = $arrayRow["$intId1Field"];
      echo "<option value=\"$strA\">$strA</option>\n";
   }

   echo "</select>";
   }

?> 
```

我一直在尝试做的是通过一个函数传递在先前选择中选择`onchange`的 ISBN，该函数将返回该书的 ISBN，但它失败了很多。

```
<?php

    function selection($id){
            echo $id;
        }

?> 
```

我知道我在这方面很糟糕，但我不知道还能做什么，如果你能给我指出一个方向，那将不胜感激。

如果可能的话，我更喜欢 PHP 解决方案而不是 JavaScript 解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T18:07:57.040

您正试图通过 onchange 事件调用 PHP 函数。

您需要编写一个 JavaScript 函数来对 PHP 文件进行 AJAX 调用以获得结果。

* * *

[您可以使用jQuery](http://jquery.com/)轻松地发出 AJAX 请求

```
$.get({
  url: "/selection.php",
  data: {
    id: "ISBN HERE"
  },
  success: function(data) {
    alert(data)
  }
}) 
```

您还必须在 PHP 文件中添加类似的内容以显示结果

```
echo selection($_GET["id"]); 
```

* * *

第一页，其中包含书籍列表和一个`Go`按钮

```
<form action="page2.php" method="get">
   <!-- book selection list -->
   <input type="submit" value="Go">
</form> 
```

第二页可以列出带有 ID 的图书的所有版本`$_GET[$strNameOrdinal]`

* * *

要在同一页面上执行此操作，并重新加载，您需要检查表单是否已提交

```
<?php

  if (empty($_GET[$strNameOrdinal])) {
    // List Books
  } else {
    // List editions
  }

?> 
```

# javascript - 当我重新访问该页面时，我的 cookie 不起作用

> ID：10953822
> 
> 赞同：0
> 
> 时间：2012-06-08T18:02:13.073
> 
> 标签：javascript, redirect, cookies

当人们输入我的 URL 时，我希望他们点击北卡罗来纳州或弗吉尼亚州。在他们点击后，它会将他们重定向到 www.myurl.com/nc 或 www.myurl.com/va。在他们回答了这个问题后，下次他们访问我的网站时，它会将他们重定向到相应的页面，而无需再次单击 NC 或 VA。我的链接正在工作（带我到正确的页面），但是当我返回时，cookie 没有重定向我，我返回到我要求选择状态的同一页面。这是我到目前为止所得到的。我觉得我很接近，但老实说，我不知道我在做什么。

```
<p> Please tell us where you live so we can give you information for your location. </p>
<a href="#" onClick="window.location = 'http://www.myurl.com/nc'" value="nc">North Carolina</a><br />
<br />
<a href="#" onClick="window.location = 'http://www.myurl.com/va'" value="va">Virginia</a> 
<script type="text/javascript" src="script.js"></script> 
<script type="text/javascript">
function redirect(state) {     createCookie('state', state, 90);     window.location.href = "http://www.myurl.com/" + nc; } 
</script> 
```

我也有这个脚本在一个单独的文件中：

```
// JavaScript Document
function createCookie(name,value,days) {
    if (days) {
        var date = new Date();
        date.setTime(date.getTime()+(days*24*60*60*1000));
        var expires = "; expires="+date.toGMTString();
    }
    else var expires = "";
    document.cookie = name+"="+value+expires+"; path=/";
}

function readCookie(name) {
    var nameEQ = name + "=";
    var ca = document.cookie.split(';');
    for(var i=0;i < ca.length;i++) {
        var c = ca[i];
        while (c.charAt(0)==' ') c = c.substring(1,c.length);
        if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);
    }
    return null;
}

function eraseCookie(name) {
    createCookie(name,"",-1);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T18:11:54.383

尝试这个：

```
<p> Please tell us where you live so we can give you information for your location. </p>
<a href="#" onClick="redirect('nc');return false" >North Carolina</a><br />
<br />
<a href="#" onClick="redirect('va');return false" >Virginia</a> 
<script type="text/javascript" src="script.js"></script> 
<script type="text/javascript">
function redirect(state) {
    createCookie('state', state, 90);
    window.location.href = "http://www.myurl.com/" + state; 
}
var cookie = readCookie('state');
if (cookie != null) {
    window.location.href = "http://www.myurl.com/" + cookie;
}
</script> 
```

jsfiddle：http: [//jsfiddle.net/7j8pG/1/](http://jsfiddle.net/7j8pG/1/)

# ruby-on-rails - 如何构建一个 Rails 时间对象来表示某一周的某一天？

> ID：10953824
> 
> 赞同：0
> 
> 时间：2012-06-08T18:02:27.670
> 
> 标签：ruby-on-rails, ruby-on-rails-3, time

我也有一个星期数，从像这样的另一个时间对象中提取

```
other_time.strftime('%W').to_i 
```

`%W`给出：

> 一年中的周数。一周从星期一开始。(00..53)

我也有一个天的名字：

```
'Tuesday' 
```

如何构建一个 DateTime 对象，该对象代表由周数指示的一周中的星期二？对象的时间分量在此阶段无关紧要，因为它将在后面的步骤中更改。

我正在使用 Rails 3.2.0 和 Ruby 1.9.2p320。

编辑：错误地声明我想要一个 Time 对象。我实际上想要一个 DateTime 对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T18:24:49.090

您可以根据您想要的日期检查日期，并进行相应调整。这不是很好，但它确实有效。

```
$ irb
1.9.3p0 :001 > require 'date'
 => true 
1.9.3p0 :002 > other_date = DateTime.now
 => #<DateTime: 2012-06-08T14:23:44-04:00 ((2456087j,66224s,205565000n),-14400s,2299161j)> 
1.9.3p0 :003 > week = other_date.strftime('%W').to_i
 => 23 
1.9.3p0 :004 > target_day = 2 # Tuesday
 => 2 
1.9.3p0 :005 > while other_date.wday > target_day ; other_date = other_date.prev_day ; end
 => nil 
1.9.3p0 :006 > while other_date.wday < target_day ; other_date = other_date.next_day ; end
 => nil 
1.9.3p0 :007 > other_date # Tuesday of this week
 => #<DateTime: 2012-06-05T14:23:44-04:00 ((2456084j,66224s,205565000n),-14400s,2299161j)> 
1.9.3p0 :008 > other_date.strftime('%W').to_i == week
 => true 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T18:09:11.320

我认为你想要的是一个 DateTime 对象。

[http://api.rubyonrails.org/classes/DateTime.html](http://api.rubyonrails.org/classes/DateTime.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T20:32:15.397

你提到过`other_time`。我会利用它：

```
other_time.beginning_of_week + DateTime::DAYNAMES.rotate.index('Tuesday').to_i.days 
```

# iphone - 以编程方式检查外部附件是否位于 30 针底座连接器中？

> ID：10953826
> 
> 赞同：2
> 
> 时间：2012-06-08T18:02:31.957
> 
> 标签：iphone, objective-c, uidevice, external-accessory

我找到了有关如何检查 iPhone 是否正在充电以及它处于什么水平的答案。但是，如果只是检查坞站连接器是否被任何外部附件（包括充电器）或其他任何可能的东西用完呢？我在 UIDevice 类参考中找不到任何方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T01:01:03.790

我相信 30 针基座连接器上有一个附件检测针。从我读到的将引脚连接到地并在基座连接器上放置不同的电阻器使 iPhone 认为它是某种设备。你可能想看看这个[http://pinoutsguide.com/PortableDevices/ipod_pinout.shtml](http://pinoutsguide.com/PortableDevices/ipod_pinout.shtml)

# oracle - 插入子表

> ID：10953827
> 
> 赞同：0
> 
> 时间：2012-06-08T18:02:34.820
> 
> 标签：oracle, database

我的数据库设计有一个名为 person 的表，表employee 和 student 是 person 表的专业化，表之间的关系是完全的，并且有重叠的限制。问题是我想插入一个学生或员工，并且父表（人）会自动更新，但 DBMS 说违反了我正在使用的参照完整性约束 oracle 有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T10:56:50.660

如果我理解正确，那么每种类型都有一个表（[TPT](http://weblogs.asp.net/manavi/archive/2010/12/28/inheritance-mapping-strategies-with-entity-framework-code-first-ctp5-part-2-table-per-type-tpt.aspx)），员工永远不能成为学生，反之亦然。

我假设您的问题是立即检查约束而不是使用延迟检查。这意味着在您的事务完成时检查约束 - 这使您可以插入员工/学生并让您的触发器完成其工作，然后进行提交。

有关延迟约束的信息： [Oracle 文档](http://docs.oracle.com/cd/B19306_01/server.102/b14200/clauses002.htm) [更多信息](http://docs.oracle.com/cd/E11882_01/server.112/e17120/general005.htm)

# javascript - jquery 切换显示/隐藏对齐方式

> ID：10953830
> 
> 赞同：1
> 
> 时间：2012-06-08T18:02:39.933
> 
> 标签：javascript, jquery, animation

我在我的网站中添加了 Jquery 切换/显示隐藏（单击加号） [http://pligg.marsgibson.info](http://pligg.marsgibson.info) 如果您在我的 jquery 中看到它有点生涩，即当单击加号时，它下面的所有文本都会向右移动下来看看这个网站 [http://oxytheme.com/Interface](http://oxytheme.com/Interface)的jquery效果有 什么区别b/w两者是它的风格还是jquery本身？我想要 jquery 就像在第二个站点中一样

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T18:07:52.630

尝试使用`slideToggle`, 而不是`toggle`.

[toggle](http://api.jquery.com/toggle/)影响`width`和`height`，仅[slideToggle](http://api.jquery.com/slideToggle/)`height`。

# php - 没有cookies的php会话变量

> ID：10953832
> 
> 赞同：0
> 
> 时间：2012-06-08T18:02:51.017
> 
> 标签：php, session, session-variables

我尝试访问存储在不同页面上的会话变量。当我启用 cookie 时它可以工作，但是当我禁用 cookie 时会话变量消失了。

这是一个例子：

```
<?php
//page1.php

session_start();

$_SESSION['startTime'] = time();

echo("<a href=\"page2.php?" . session_name() . "=" . session_id() . "\">Page2</a><br />\n");

echo("Session-ID: " . session_id() . "<br />");
echo("Session-Content: " . print_r($_SESSION));

// output:
// <a href="page2.php?PHPSESSID=ou1n4mrotvqc6dod41q8t0a432">Page2</a><br />
// Session-ID: ou1n4mrotvqc6dod41q8t0a432<br />Array
// (
//     [startTime] => 1339177944
// )
// Session-Content: 1
?>

<?php
//page2.php

session_start();

session_id($_GET[session_name()]);

echo("Session-ID: " . session_id() . "<br />\n");
echo("Session-Content: " . print_r($_SESSION));

session_destroy();

// output
// Session-ID: ou1n4mrotvqc6dod41q8t0a432<br />
// Array
// (
// )
// Session-Content: 1
?> 
```

难道我做错了什么？如何使用禁用 cookie 的会话变量？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T18:05:04.107

默认情况下，PHP 会话需要启用 cookie。但是，它可以在没有 cookie 的情况下完成：没有 cookie的[PHP 会话](https://stackoverflow.com/questions/3740845/php-session-without-cookies)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-08T18:05:39.947

您需要更改 php.ini 设置`session.use_only_cookies`以`0`允许在查询字符串中传递会话 ID。您可能还想使用魔法常数`SID`而不是`session_name() . "=" . session_id()`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-08T18:05:42.867

尝试将以下内容添加到您的 .htaccess 文件中：

```
php_flag session.use_cookies 0 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-08T18:05:50.243

会话 ID 存储在 cookie 中。服务器怎么会知道它是同一个浏览器与之交谈？

（这是一个棘手的问题，因为您可以将会话 ID 保存在 URL 中，但这不是一个好主意）。

Cookie 用于存储会话。没有它们，您将无法（安全地）存储会话。

# bash - 将多个不同的数组传递给 shell 函数

> ID：10953833
> 
> 赞同：17
> 
> 时间：2012-06-08T18:02:51.420
> 
> 标签：bash

由于 ksh 以外的 shell 不支持按引用传递，如何在不使用全局变量的情况下将多个数组传递到 bash 中的函数中，并且以允许将任何合法变量内容作为数组元素包含在内的方式（没有保留印记）？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-06-08T18:02:52.057

### 从 bash 4.3 开始

截至 2016 年，现代 bash 支持传递引用（又名`nameref`属性）：

```
demo_multiple_arrays() {
  local -n _array_one=$1
  local -n _array_two=$2
  printf '1: %q\n' "${_array_one[@]}"
  printf '2: %q\n' "${_array_two[@]}"
}

array_one=( "one argument" "another argument" )
array_two=( "array two part one" "array two part two" )

demo_multiple_arrays array_one array_two 
```

另请参见`declare -n`手册页。

* * *

### 在 bash 4.3 之前

这可以通过使用将参数数量放在每个数组之前的调用约定来安全地完成，如下所示：

```
demo_multiple_arrays() {
  declare -i num_args array_num;
  declare -a curr_args;
  while (( $# )) ; do
    curr_args=( )
    num_args=$1; shift
    while (( num_args-- > 0 )) ; do
      curr_args+=( "$1" ); shift
    done
    printf "$((++array_num)): %q\n" "${curr_args[@]}"
  done
} 
```

然后可以按如下方式调用：

```
array_one=( "one argument" "another argument" )
array_two=( "array two part one" "array two part two" )
demo_multiple_arrays \
  "${#array_one[@]}" "${array_one[@]}" \
  "${#array_two[@]}" "${array_two[@]}" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T19:55:37.650

也可以使用 eval 完成：

```
declare -a a=( "aa bb" 123 '$ $ $' )
declare -a b=( "bb cc" 456 '###' )

printf "\n%s\n" 'a before sub:'
printf "'%s'\n" "${a[@]}"
printf "\n%s\n" 'b after sub:'
printf "'%s'\n" "${b[@]}"

sub ()
{
  eval a0=\${$1[0]}                     # get value a[0]
  eval b1=\${$2[1]}                     # get value b[1]
  echo "a[0] = '$a0'"
  echo "b[1] = '$b1'"

  eval $1[0]='a---a'                    # set value a[0]
  eval $2[1]=999                        # set value b[1]

} # ----------  end of function sub  ----------

sub a b     # call function sub

printf "\n%s\n" 'a after sub:'
printf "'%s'\n" "${a[@]}"
printf "\n%s\n" 'b after sub:'
printf "'%s'\n" "${b[@]}" 
```

输出：

```
a before sub:
'aa bb'
'123'
'$ $ $'

b after sub:
'bb cc'
'456'
'###'
a[0] = 'aa bb'
b[1] = '456'

a after sub:
'a---a'
'123'
'$ $ $'

b after sub:
'bb cc'
'999'
'###' 
```

# c# - 以编程方式将 xml 文档绑定到 WPF 中的树视图

> ID：10953835
> 
> 赞同：2
> 
> 时间：2012-06-08T18:03:01.750
> 
> 标签：c#, wpf, xml, data-binding, treeview

我一直在谷歌上进行一些搜索，并在 SO 上阅读了一些类似的问题，但还没有找到我的问题的答案。我将 xml 文件绑定到 WPF 中的树视图控件。使用[这篇](http://geeklyeverafter.blogspot.ca/2010/03/wpf-treeview-bound-to-xml-file.html)文章，我可以轻松地使用我的 xml 文件设置 2 路数据绑定。

但是，我想在附加之前对我的 xml 文档应用排序。我正在建模一个任务组织者，其中任务包含开始日期和截止日期，我想按未决截止日期对节点进行排序，以便最紧急的任务首先出现。我对 Linq to XML 有一些经验，但不确定如何解决绑定问题。有什么想法吗？

所以经过更多阅读这里是我的伪代码：

*   从我的本地 XML 文件创建一个 XDocument
*   根据任务到期日期对 XDocument 进行排序
*   从新排序的 XDocument 创建一个新的 XmlDataProvider
*   将其绑定到 TreeView

谁能帮我把这个冲洗掉？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T18:59:51.923

下面是一个如何实现 XML 到 TreeView 绑定的基本示例。XmlDataProvider 允许您加载 XML 文档并绑定到它。HierarchicalDataTemplate 允许您定义带有子项的 TreeView 模板。必须使用 XPath 而不是 Path 来绑定，@ 符号前缀表示绑定到属性。

```
<Window x:Class="Testing.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">
    <Window.Resources>
        <XmlDataProvider x:Key="people" XPath="People" />

        <HierarchicalDataTemplate x:Key="colorsTemplate">
            <TextBox Text="{Binding XPath=@Name, Mode=TwoWay}" />
        </HierarchicalDataTemplate>

        <HierarchicalDataTemplate x:Key="rootTemplate" ItemsSource="{Binding XPath=FavoriteColors/Color}" ItemTemplate="{StaticResource colorsTemplate}">
            <StackPanel Orientation="Horizontal">
                <TextBox Text="{Binding XPath=@FirstName, Mode=TwoWay}" />
                <TextBlock Text=" " />
                <TextBox Text="{Binding XPath=@LastName, Mode=TwoWay}" />
                <TextBlock Text=" (Age: " />
                <TextBox Text="{Binding XPath=@Age, Mode=TwoWay}" />
                <TextBlock Text=")" />
            </StackPanel>
        </HierarchicalDataTemplate>

    </Window.Resources>
    <Grid>
        <TreeView ItemsSource="{Binding Source={StaticResource people}, XPath=Person}" ItemTemplate="{StaticResource rootTemplate}" Grid.ColumnSpan="2" />
    </Grid>
</Window> 
```

使用以下 XML 文件：

```
<?xml version="1.0" encoding="utf-8" ?>
<People>
  <Person FirstName="Ringo" LastName="Starr" Age="72">
    <FavoriteColors />
  </Person>
  <Person FirstName="George" LastName="Harrison" Age="52">
    <FavoriteColors>
      <Color Name="Orange" />
      <Color Name="Green" />
      <Color Name="Purple" />
    </FavoriteColors>
  </Person>
  <Person FirstName="Paul" LastName="McCartney" Age="42">
    <FavoriteColors>
      <Color Name="White" />
    </FavoriteColors>
  </Person>
  <Person FirstName="John" LastName="Lennon" Age="33">
    <FavoriteColors>
      <Color Name="Red" />
      <Color Name="Green" />
    </FavoriteColors>
  </Person>
</People> 
```

以及以下代码隐藏：

```
XmlDataProvider people;

public MainWindow()
{
    InitializeComponent();

    people = FindResource("people") as XmlDataProvider;

    var xmlDocument = new XmlDocument();

    xmlDocument.Load("People.xml");

    people.Document = xmlDocument;
} 
```

如您所见，我正在代码中加载 XML 文档，因此您可以将其加载到 XDocument 或 XmlDocument 类中并按照您的需要对其进行排序。然后你应该能够在某个时候将它保存回文件。

**编辑：**

这是在运行时加载和保存的示例：

```
private void Load_Click(object sender, RoutedEventArgs e)
{
    var xmlDocument = new XmlDocument();

    xmlDocument.Load("People.xml");

    people.Document = xmlDocument;
}

private void Save_Click(object sender, RoutedEventArgs e)
{
    XmlDocument xml = people.Document;

    if (xml != null)
    {
        Microsoft.Win32.SaveFileDialog sfd = new Microsoft.Win32.SaveFileDialog();

        if ((bool)sfd.ShowDialog(this))
        {
            xml.Save(sfd.FileName);
        }
    }
} 
```

# javascript - 'new function(){...}' 上的 JSLint 错误，但为什么？如果我想要匿名闭包，有更好的方法吗？

> ID：10953837
> 
> 赞同：4
> 
> 时间：2012-06-08T18:03:03.737
> 
> 标签：javascript, backbone.js, closures, jslint

我正在尝试主干并使用模型概念——我过去在没有框架的情况下实现了这一点。我也在尝试打开 javascript linter 的 sublime text，并注意到它非常讨厌“新”。

```
var StandardMethod = Backbone.Model.extend({
    initialize : function(){
        console.log('init');
    }
});

var LintOk = Backbone.Model.extend((function(){
    this.initialize = function(){
        console.log('init');
    };
    return this;
})());

var LintHates = Backbone.Model.extend(new function(){
    this.initialize = function(){
        console.log('init');
    };
});
var sm = new StandardMethod();
var lo = new LintOk();
var lh = new LintHates();​ 
```

LintOk 方法需要在 3 个不同的地方进行更改才能创建与闭包兼容的函数。因此，如果我想要一些闭包变量，例如：

```
var NowWithClosures = Backbone.Model.extend(new function(){
    var x = 1;
    this.initialize = function(){
        console.log('init');
    };
    this.AddOneToX = function(){
        x++;
    };
    this.getX = function() {
        return x;
    };
});

var nwc = new NowWithClosures();
nwc.AddOneToX();
console.log(nwc.getX()); 
```

我必须使用这种非常冗长的方法才能获得 lint 批准？我在这里缺少什么吗？这是什么原因？我可以“退还这个；” 在我所有的模型定义中，但这看起来很愚蠢，而且不直观 - 模型定义可能不止一个屏幕长，并且“新”调用将位于顶部，使其更明显是一个匿名构造函数。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T18:23:46.047

```
Backbone.Model.extend(new function(){
    var x;
    this.value = "";
    this.func = function() {
        return x;
    };
}); 
```

可以替换为：

```
Backbone.Model.extend(function(){
    var x;

    return {
        value: "",

        func: function(){
            return x;
        }
    };
}()) 
```

通过 JSLint：

```
var Backbone;

Backbone.Model.extend((function () {
    "use strict";
    var x;

    return {
        value: "",

        func: function () {
            return x;
        }
    };
}())); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T18:05:53.753

JSLint 不**喜欢**做`new anonFn`.

你可以这样做：

```
var StandardMethod = Backbone.Model.extend({
    initialize: function() {
        console.log('init');
    }
});

var LintOk = Backbone.Model.extend((function() {
    this.initialize = function() {
        console.log('init');
    };
    return this;
})());
var backbonefn = function() {
    this.initialize = function() {
        console.log('init');
    }
};
var LintHates = Backbone.Model.extend(new backbonefn);
var sm = new StandardMethod();
var lo = new LintOk();
var lh = new LintHates();​ 
```

单击此小提琴中的 JSLint：http: [//jsfiddle.net/maniator/Ztycf/](http://jsfiddle.net/maniator/Ztycf/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-08T18:13:24.343

它应该可以正常工作，但 crockford 坚持认为，如果`call`定义了函数，则将自调用匿名函数的 移动到括号内。
例如，当我使用 jslint 验证此代码时：

```
(function () { })(); 
```

它给了我这个错误： *将调用移动到包含函数的括号中。*
在我这样修改代码后：

```
(function () { }()); 
```

它不再大喊错误。

ps 这真的没关系，因为结果是一样的（当然我不知道 ie6<），但我总是使用第一种方法进行自调用函数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-08T18:11:20.723

如果您实际上通过 jslint 运行该代码，则提到的错误是`Weird construction. Delete 'new'`. `new function`在 javascript 中创建匿名函数时不需要指定。

# objective-c - NSNumber 到数字和单词组合

> ID：10953843
> 
> 赞同：0
> 
> 时间：2012-06-08T18:03:44.340
> 
> 标签：objective-c, nsnumber, nsnumberformatter

我正在尝试将 11,038,665 转换为“1100 万”。我确信这是可能的，但可能太复杂而不值得。到目前为止，我正在使用 using`NSNumberFormatter`的有效数字函数将其减少到 11,000,000，然后再返回一个数字并使用 `NSNumberFormatterSpellOutStyle`写出“1100 万”有没有办法获得“1100 万”？

我当前的代码：

```
NSNumberFormatter *fmtr = [[NSNumberFormatter alloc] init];
[fmtr setUsesSignificantDigits:YES];
[fmtr setMaximumSignificantDigits:3];
NSNumber *shortNum = [fmtr numberFromString:[fmtr stringFromNumber:longNum]];
[fmtr setNumberStyle:NSNumberFormatterSpellOutStyle];
NSString *shortNumSpelledOut = [fmtr stringFromNumber:shortNum]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T18:23:19.597

当然，只需将您的数字除以一百万并将答案分配给一个 int - 这将给您 11，然后使用 stringWithFormat:@"%dmillion",

# jquery - jQuery: keypress() - 时间戳

> ID：10953845
> 
> 赞同：2
> 
> 时间：2012-06-08T18:04:10.527
> 
> 标签：jquery, timestamp, keypress

目前我正在使用 jQuery，尤其是函数

```
keypress() 
```

这个函数可以告诉我很多关于按下哪个键、在哪里以及何时按下的信息。但 WHEN 是我的问题：所以这段代码......

```
$(document).keypress(function(event){
  alert(event.timeStamp);
}); 
```

... 返回一个类似 259669935 的数字（以毫秒为单位）。实际上，259669935 毫秒大约是 72.13 小时。

那么这个“时间戳”是如何产生的，我怎样才能将它转换成日期+时间呢？

**编辑（已解决）：**

如果`event.timeStamp`在您的系统上不起作用，请使用...

```
var timestamp = new Date().getTime(); 
```

...反而。新代码：

```
$(document).keypress(function(event){
  alert(new Date().getTime());
}); 
```

这应该可以正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T18:08:35.453

这会将其转换为日期。

```
var date = new Date(timeStamp); 
```

[http://jsfiddle.net/SyRtx/10/](http://jsfiddle.net/SyRtx/10/)

# mysql - 只有当没有其他具有相同字段值的记录满足条件时才选择一个字段

> ID：10953847
> 
> 赞同：0
> 
> 时间：2012-06-08T18:04:19.147
> 
> 标签：mysql

如果下面的查询为分配给尚未开始的报告的任何模板返回“模板”ID...

我还能怎么说（对于这些模板 ID 中的每一个 - 此模板 ID 不能出现在任何其他已经开始的报告上）。

或者，我的意思是我正在尝试完成下面的查询，所以它说“给我所有模板的 ID，其中模板未被任何已启动的报告使用”。就像对于每个 t.id 我循环遍历表一样，确保没有其他带有 template_id (t.id) 的报告已经开始。

```
SELECT DISTINCT t.id, 
FROM templates t
LEFT OUTER JOIN reports r ON r.template_id = t.id
WHERE r.start_time >=  UTC_TIMESTAMP() 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T18:30:05.797

您可以使用子查询

```
SELECT DISTINCT t.id, 
FROM templates t
LEFT OUTER JOIN reports r ON r.template_id = t.id
WHERE r.start_time >=  UTC_TIMESTAMP() and t.id not in (select CONCAT_WS(',',tid) where report started) 
```

我没有完成子查询，因为我不知道确切的表结构。所以相应地完成where子句

# c# - 拆分字符串或 XML 以将 ID 发送到存储过程？

> ID：10953848
> 
> 赞同：3
> 
> 时间：2012-06-08T18:04:21.307
> 
> 标签：c#, sql-server-2008, sql-server-2005

我在 C# 中有一个应用程序，并且必须将一个 ID 列表（int）发送到我在 SQL Server 中的数据库以进行几个连接。我有内存数据集中的 ID 列表。

我知道两种方法：一种是创建一个字符串，其中 id 用管道分隔，然后在 sql 中拆分它们，将它们插入到临时表中。然后我可以做我想要的连接。

另一种方法是对我的数据集执行“getXML”，然后发送它。然后，我可以在临时表中插入信息，并进行我想要的连接。

哪种方式更好，为什么？还是比两者都更好的选择？

要传递的 ID 数量是可变的，使用 SQL Server 2005 和 SQL Server 2008、Visual Studio 2010。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T18:07:54.370

我认为 XML 更好，因为它更健壮。它是自记录的，您不必担心分隔符，甚至可以针对 XSD 验证传入的 XML。如果您的数据包含分隔符和其他变数，您将使用分隔字符串来处理它。解析是可行的，但最好不必重新发明轮子，特别是对于已经很好用的东西。

这是[来自 Pinal Dave 的一个漂亮而整洁的样本，](http://blog.sqlauthority.com/2009/02/13/sql-server-simple-example-of-reading-xml-file-using-t-sql/)可以帮助您继续前进。您的概念证明可能更简单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T18:15:23.687

在 SQL Server 2008 中，还有另一种方法：将您的 id 作为[表值参数](http://msdn.microsoft.com/en-us/library/bb675163.aspx)传递。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-08T18:23:20.097

我同意 Paul 的观点，在这里使用标准格式会很好。不过，如果您可以使用更高效的格式（如 JSON）来做到这一点，那就更好了。JSON 比 XML 更小，解析速度通常更快。

如果 SQL Server 对它有本机支持，那将是最好的。然而，这并不一定要阻止你。如果效率很关键，请检查一下... [http://www.simple-talk.com/sql/t-sql-programming/sumption-json-strings-in-sql-server/](http://www.simple-talk.com/sql/t-sql-programming/consuming-json-strings-in-sql-server/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-08T18:28:20.617

我会推荐一个 CLR 表值函数。[将这个函数转换](http://dataeducation.com/sqlclr-string-splitting-part-2-even-faster-even-more-scalable/)为处理整数应该不需要太多。

然后你可以说：

```
SELECT t.Columns
  FROM dbo.YourTable AS t
  INNER JOIN dbo.CLRFunctionName(@IntegerList) AS f
  ON t.ColumnName = f.Item; 
```

对于 XML（在您无法实现 CLR 的情况下），您可以这样做：

```
CREATE FUNCTION [dbo].[SplitInts]
(
   @List       VARCHAR(MAX),
   @Delimiter  CHAR(1)
)
RETURNS TABLE
AS
   RETURN ( SELECT Item FROM ( SELECT Item = x.i.value('(./text())[1]', 'int') FROM 
            ( SELECT [XML] = CONVERT(XML, '<i>' + REPLACE(@List, @Delimiter, '</i><i>') 
              + '</i>').query('.') ) AS a CROSS APPLY [XML].nodes('i') AS x(i)
          ) AS y WHERE Item IS NOT NULL
   );
GO 
```

并做同样的事情...

```
SELECT t.Columns
  FROM dbo.YourTable AS t
  INNER JOIN dbo.SplitInts(@IntegerList) AS f
  ON t.ColumnName = f.Item; 
```

在这两种情况下，都不需要临时表或表变量。

# android - 无法使用 HttpClient 从 Android 设备摄像头发布图像

> ID：10953858
> 
> 赞同：2
> 
> 时间：2012-06-08T18:05:10.263
> 
> 标签：android, post, httpclient, android-camera

我正在尝试使用 Apache Commons HttpClient 在 Android 设备上发布相机拍摄的图像和一些其他参数。

我的发布请求工作正常，服务器读取参数正常，但我的图片没有上传。上传由 PHP 脚本处理，我可以确认正确的 HTTP Post 将导致图像被成功上传，因为我已经使用 HTML 表单测试了 PHP 脚本。我还可以在下面的代码中确认 photo != null 。

```
HttpClient httpClient = new DefaultHttpClient();
HttpPost postRequest = new HttpPost("http://myurl.com/upload.php");
MultipartEntity reqEntity = new MultipartEntity(HttpMultipartMode.BROWSER_COMPATIBLE);

if (photo != null) {
    ByteArrayOutputStream bos = new ByteArrayOutputStream();
    photo.compress(CompressFormat.JPEG, 75, bos);
    byte[] data = bos.toByteArray();

    ByteArrayBody bab = new ByteArrayBody(data, "submission-1.jpg");

    reqEntity.addPart("file", bab);
}

reqEntity.addPart("date", new StringBody(date));
reqEntity.addPart("lat", new StringBody(latitude));
reqEntity.addPart("long", new StringBody(longitude));
reqEntity.addPart("name", new StringBody(name));
reqEntity.addPart("email", new StringBody(email));
reqEntity.addPart("comments", new StringBody(comments));

postRequest.setEntity(reqEntity);
HttpResponse response = httpClient.execute(postRequest); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T18:08:57.127

我想通了，希望其他人会觉得这很有帮助。我所要做的就是将文件类型添加到这一行：

```
ByteArrayBody bab = new ByteArrayBody(data, "image/jpeg", "submission.jpg"); 
```

# javascript - 如何使用不是选择值的数据类型隐藏所有 div

> ID：10953862
> 
> 赞同：0
> 
> 时间：2012-06-08T18:05:38.327
> 
> 标签：javascript, jquery, html

我有一个带有单元格的表格，每个单元格都有一个数据类型。I have a filter bar, and when a filter option is selected I want to hide all the div's with the data-type that isn't the selected option.

这样做的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T18:11:39.443

我猜您的 div 具有“数据类型”属性，因此您可以执行以下操作：

```
$('div[data-type!="yourvalue"]').hide(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T18:25:57.187

让您的选择器首先获取属性设置为任何内容的所有元素，然后选择那些不匹配的元素`value`

```
$('div[data-type][data-type!="value"]').hide(); 
```

# jquery - 直播（点击）不起作用，但直播（鼠标悬停）可以

> ID：10953867
> 
> 赞同：1
> 
> 时间：2012-06-08T18:05:55.010
> 
> 标签：jquery, jquery-click-event

我有这个代码

```
 $(".subcategoryOption .image, .subcategoryOption .text").live('click', function() {
    alert("hello");
}); 
```

使用“点击”不起作用，但使用“鼠标悬停”可以。我已经在[http://jsfiddle.net/SW5sc/22/](http://jsfiddle.net/SW5sc/22/)上对其进行了测试，它运行良好，所以我想这可能是我其余代码的问题。

关于它可能是什么的任何想法？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T18:13:21.417

也许您对选择器有疑问。你能告诉我你假装`".subcategoryOption .image, .subcategoryOption .text"`明确使用了哪些元素吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T18:09:20.393

jQuery 最近开始实时迁移到`.on`而不是`.live`. 尝试

```
$(document).on('click', ".subcategoryOption .image, .subcategoryOption .text",
    function () { 
        alert("hello");
    }
); 
```

# google-maps - 谷歌地图 LatLngBounds.isEmpty 是如何工作的？

> ID：10953874
> 
> 赞同：4
> 
> 时间：2012-06-08T18:06:23.797
> 
> 标签：google-maps, google-maps-api-3, openlayers

我不太明白**Google Maps**的`google.maps.LatLngBounds.isEmpty`功能是如何工作的。什么定义 a`LatLngBounds`是否为空？是否`LatLngBounds`以某种方式记录了地图上的所有矢量和点，并检查是否有任何位于边界框中？

我对此很好奇，因为我正在开发**OpenLayers**和**Google Maps**之间的接口，并且没有对象的`isEmpty`方法`OpenLayers.Bounds`。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-08T18:32:52.150

似乎检查边界是否真的代表一个有效的边界（至少包含一个 SW 和一个 NE 点）

[http://jsfiddle.net/k5zH9/1/](http://jsfiddle.net/k5zH9/1/)

# sql - Access 告诉我我的一个字段不是聚合函数的一部分，但这似乎不是真的

> ID：10953881
> 
> 赞同：3
> 
> 时间：2012-06-08T18:07:30.603
> 
> 标签：sql, ms-access, ms-access-2007

因此，我正在尝试运行查询，但遇到了相当常见的错误：

```
"You tried to execute a query that does not include the specified expression 'X' as part of an aggregate function" 
```

，其中 X 是不属于聚合函数的字段。通常这是一个非常简单的错误，但是在我的情况下，没有指定字段，错误只是显示：

```
"...specified expression '' as part of an..." 
```

我试图搜索并找不到任何其他发生这种情况的情况。最让我感到困惑的是，我正在研究一个精确查询的示例案例以尝试重新创建错误，虽然语法几乎相同，但示例案例工作得非常好。我尝试将示例案例复制并粘贴到真实文件中，并用真实的字段名称替换示例字段名称，但它仍然给我一个错误。我很困惑。这是实际的 SQL：

```
SELECT 

qry_merge2_v2.Concatenate2, 
IIf((([Second Date? (dd/mm/yyyy)] & qry_merge2_v2.Concatenate2) In (SELECT qry_concatenate_dictionary.Concatenate FROM qry_concatenate_dictionary)),1,0) AS [Counter]

FROM qry_merge2_v2

GROUP BY qry_merge2_v2.Concatenate2, qry_merge2_v2.Period; 
```

这是我尝试复制错误的示例代码，当它在自己的文件中运行时实际上不会产生错误：

```
SELECT 

qry_datenamerate.sName AS MerchantName, 
IIf((([Second Date? (dd/mm/yyyy)] & qry_datenamerate.sName) In (SELECT qry_namedateconcat.Concat FROM qry_namedateconcat)),1,0) AS [Counter]

FROM qry_datenamerate

GROUP BY qry_datenamerate.sName, qry_datenamerate.sDate; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T20:06:54.720

为您的第二个查询字段定义适当的聚合函数：

```
SELECT 

qry_merge2_v2.Concatenate2, 
SUM(IIf((([Second Date? (dd/mm/yyyy)] & qry_merge2_v2.Concatenate2) In (SELECT qry_concatenate_dictionary.Concatenate FROM qry_concatenate_dictionary)),1,0)) AS [Counter]

FROM qry_merge2_v2

GROUP BY qry_merge2_v2.Concatenate2, qry_merge2_v2.Period; 
```

# unit-testing - 在 Intellij 中，一个模块是否有可能依赖于另一个模块的测试

> ID：10953882
> 
> 赞同：13
> 
> 时间：2012-06-08T18:07:32.350
> 
> 标签：unit-testing, module, intellij-idea

我在 Intellij 中有一个多模块项目，我在一个子模块的测试源中有一堆黄瓜装置，我想在另一个子模块中重用它们。如果我添加另一个模块作为依赖项，那么它的正常输出目录会添加到 junit 类路径中，但不会添加到它的测试输出中。

是否可以让 intellij 也导出模块测试目录并允许其他模块使用它们？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-10-01T03:58:51.760

是的，你可以，但这并不简单。

所以你有***Module-A***和***Module-B***。

***Module-B***有一个`TestClass`可能扩展 AbstractClass 或使用***Module-A 中的一些静态助手的***

**注意：**这仅适用于 intellij，如果您使用的是 maven 或 gradle，则需要检查它是否仍然可以构建。

这是您需要做的。

1.  转到**项目结构...** `(Ctrl+Alt+Shift+S - win/linux)`
2.  转到模块并查看**Module-A**的**路径**选项卡
3.  记下测试输出路径或复制它。它可能是这样的：`C:\dev\projects\myProject\moduleA\build\testclasses`或类似的。
4.  转到 Modules 并选择**Module-B**并查看其**Dependencies**选项卡。
5.  您可能已经依赖于此处的**Module-A**以获得编译时间，这没关系。单击**+**或键入`(Alt+Insert)`并添加一个新库（选项中的第 2 个）
6.  在选择库屏幕上选择**新建库...**按钮。选择**Java**选项。
7.  在弹出的对话框中，转到您上面的构建文件夹，`C:\dev\projects\myProject\moduleA\build\testclasses`然后单击**OK**。您现在将在此处获得**Module-A的类。**将其命名为合适的名称并将**Level**选项`Module-A Tests`更改为**Module Library**。
*****   单击**+**按钮`(Alt+Insert)`也可以添加源。导航到测试 src 文件。EG：`C:\dev\projects\myProject\moduleA\src\test`并添加它，您现在也将添加一个 Sources。
    9.  单击“**确定**”，您将返回“**项目结构”**对话框。
    10.  现在，您将在依赖项中添加一个新库。**将范围**更改为**测试**
    11.  按底部的**确定，您就完成了。**您可能需要制作/清理项目。****

 ****现在您已经在模块之间链接了测试依赖项。

如果您能想到更好的解决方案，请告诉我，但这是我发现的最简单的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T19:22:30.740

也许，但你应该通过你的自动构建来做到这一点，即在 Maven 中，而不是你的 IDE。如果您将 maven 模块的测试作为单独的依赖项发布（我会这样做），则可以将测试 jar 添加为另一个模块的 dep。IDEA 当然会自动处理这个问题。

[http://maven.apache.org/guides/mini/guide-attached-tests.html](http://maven.apache.org/guides/mini/guide-attached-tests.html)****

# asp.net - 指数超出范围。必须是非负数且小于集合的大小

> ID：10953888
> 
> 赞同：0
> 
> 时间：2012-06-08T18:08:00.213
> 
> 标签：asp.net, vb.net

我有 RowDatabound 事件，我想像这样更改列名：

```
 Protected Sub gvKeyValueOfstringstring_RowDataBound(sender As Object, e As System.Web.UI.WebControls.GridViewRowEventArgs) Handles gvKeyValueOfstringstring.RowDataBound
        If e.Row.RowType = DataControlRowType.Header Then

            gvKeyValueOfstringstring.Columns(0).HeaderText = "Match"
            gvKeyValueOfstringstring.Columns(1).HeaderText = "Replace"
        End If
    End Sub 
```

但我犯了错误：

指数超出范围。必须是非负数且小于集合的大小。参数名称：索引

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T18:11:31.247

可能`gvKeyValueOfstringstring.Columns`长度小于 2，因此当您访问索引为 0 或 1 的列时，它会失败。

在执行该代码之前检查列是否已成功创建。

另外，我认为您不需要在 RowDataBound 事件中执行它，它可以在`Page_Load`（因此如果它是标题，您不必检查每一行）。如果你还是想在那里做，也许你可以改变那一行的单元格的值：

```
e.Row.Cells(0).Text = "Match"
e.Row.Cells(1).Text = "Replace" 
```

无论如何，如果未正确创建列，我希望此代码也会失败。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T14:48:00.077

```
Private Sub BttnCan_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles BttnCan.Click
        Dim val1 As Integer
        Try
            con.Open()
            For i As Integer = 0 To DataGridView1.Rows.Count
                val1 = Me.DataGridView1.Rows(i).Cells(2).Value

                com.CommandText = "INSERT INTO TblStock (Quant) VALUES (" & val1 & ")"

            Next

            con.Close()
        Catch ex As Exception
            MsgBox(Err.Description, MsgBoxStyle.Critical)
        End Try
    End Sub 
```

# ruby-on-rails - 如何在 mongoid 中使用 AND 条件进行查询

> ID：10953893
> 
> 赞同：4
> 
> 时间：2012-06-08T18:08:13.083
> 
> 标签：ruby-on-rails, ruby-on-rails-3, mongodb, ruby-on-rails-3.1, mongoid

如何在 Mongoid 中使用**AND条件进行查询？**

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-08T18:29:57.730

您可以链接`where`语句或在调用中包含多个条件`where`。

```
Model.where(condition_a: :a, condition_b: :b).all 
```

或者

```
Model.where(condition_a: :a).where(condition_b: :b).all 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-10T04:08:28.400

此外，您可以使用`.and(other_thing:'value')`

例如，`Model.where(awesome:true).and(other_thing:true)`

# objective-c - 当我在 NSMutableArray 上调用方法时，出现错误“无法识别的选择器已发送到实例”

> ID：10953894
> 
> 赞同：0
> 
> 时间：2012-06-08T18:08:16.397
> 
> 标签：objective-c, nsmutablearray, shuffle

我有一个可变数组， `allRows`. 在一个循环中，我将`allRows`（也包含数组）的每个索引分配给另一个数组。但是，当`shuffle`对该数组调用该方法时，程序会崩溃。该方法是一个类别，适用于其他数组；只是没有`row`。

```
- (void)selectQuestions {

self.quizQuestions = [[NSMutableArray alloc] init];

for (int j = 0; j<self.maxRowNumber; j++) {
    //shuffle each row
    NSMutableArray *row = [allRows objectAtIndex:j];
    [row shuffle]; 
```

}

```
@implementation NSMutableArray (shuffle)

-(void) shuffle {

NSUInteger count = [self count];
for (NSUInteger i = 0; i< count; ++i) {

    int nElements = count - i;
    int randomIndex = arc4random() % (nElements) + i ;
    [self exchangeObjectAtIndex:i withObjectAtIndex:randomIndex];
}
} 
```

编辑

`allRows`在类的 init 方法中实例化。我添加了整个方法，以防您需要查看其他任何内容。

```
- (id)init {
self = [super init];
if (self) {

    // Question, Reactants, Products, Elements
    NSArray *R1Q1 = [[NSArray alloc] initWithObjects:@"Methanol is burned completely in air", @"2CH₃OH(l) + 3O₂(g)", @"2CO₂(g) + 4H₂O", @"C,H,O", nil];
    NSArray *R1Q2 = [[NSArray alloc] initWithObjects:@"Ammonia is burned in excess oxygen gas", @"4NH₃(g) + 7H₂O(l)", @"4NO₂(g) + 6H₂O(l)", @"N,H,O", nil];
    NSArray *R1Q3 = [[NSArray alloc] initWithObjects:@"Hydrogen sulfide gas is burned in excess oxygen gas", @"2H₂S(g) + 3O₂(g)", @"CO₂(g) + 2SO₂(g)", @"H,S,O", nil];

    NSArray *R2Q1 = [[NSArray alloc] initWithObjects:@"Solid potassium is added to a flask of oxygen gas", @"K(s) + O₂(g)", @"KO₂(s)", @"K,O", nil];
    NSArray *R2Q2 = [[NSArray alloc] initWithObjects:@"Sodium metal is dropped into a flask of pure water", @"2Na(s) + H₂O(l)", @"2Na⁺(aq) + 2OH⁻(aq) + H₂(g)", @"Na,H,O", nil];
    NSArray *R2Q3 = [[NSArray alloc] initWithObjects:@"A piece of lithium is heated strongly in oxygen", @"4Li(s) + O₂(g)", @"2Li₂O(s)", @"Li,O", nil];

    NSArray *R3Q1 = [[NSArray alloc] initWithObjects:@"Solutions of potassium chloride and silver nitrate are mixed", @"Ag⁺(aq) + Cl⁻(aq)", @"AgCl(s)", @"K,Cl,Ag,N,O", nil];
    NSArray *R3Q2 = [[NSArray alloc] initWithObjects:@"Solutions of iron(III) nitrate and sodium hydroxide are mixed", @"Fe³⁺(aq) + 3OH⁻(aq)", @"Fe(OH)₃(s)", @"Fe,N,O,Na,H", nil];
    NSArray *R3Q3 = [[NSArray alloc] initWithObjects:@"Solutions of nickel iodide and barium hydroxide are mixed", @"Ni²⁺(aq) + 2OH⁻(aq)", @"Ni(OH)₂(s)", @"Ni,I,Ba,OH", nil];

    row1 = [[NSArray alloc] initWithObjects:R1Q1, R1Q2, R1Q3, nil];
    row2 = [[NSArray alloc] initWithObjects:R2Q1, R2Q2, R2Q3, nil];
    row3 = [[NSArray alloc] initWithObjects:R3Q1, R3Q2, R3Q3, nil];
    //add rest

    allRows = [[NSMutableArray alloc] initWithObjects:row1, row2, row3, nil];
    self.maxRowNumber = 3; //hypothetical
    self.questionsPerRow = 2; // " "
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T18:15:18.333

根据您发布的错误，它看起来`[allRows objectAtIndex:j]`返回的是 NSArray 而不是 NSMutableArray。快速修复是这样的。

```
NSMutableArray *row = [NSMutableArray arrayWithArray:[allRows objectAtIndex:j]]; 
```

但是如果你想拿出一个 NSMutableArrays 可能会更好。

# php - 致命错误：调用未定义函数 getfilelist()

> ID：10953896
> 
> 赞同：0
> 
> 时间：2012-06-08T18:08:30.030
> 
> 标签：php

为什么我会收到此错误：

> 致命错误：在第 3 行的 /home/se7encla/public_html/dir.php 中调用未定义函数 getfilelist()

以及如何解决？！

第 3 行是

```
 $dirlist = getFileList("./Update/"); 
```

目录.php

```
 <?PHP
 // examples for scanning a directory called images
 $dirlist = getFileList("./Update/");
?> 
```

回声.php

```
<?PHP
 // output file list as HTML table
  foreach($dirlist as $file) {
echo "<tr>\n";
echo "<td>{$file['name']}</td>\n";
echo "<td>{$file['Stream']}</td>\n";
echo "<td>{$file['size']}</td>\n";
 }
echo "\n";
?> 
```

更新.php

```
 <?PHP
  if(isset($_GET['action']) and ($_GET['action']=="list"))
{
require_once "./dir.php";
require_once "./echo.php";

 function getFileList($dir)
  {
// array to hold return value
$retval = array();

// add trailing slash if missing
if(substr($dir, -1) != "/") $dir .= "/";

// open pointer to directory and read list of files
$d = @dir($dir) or die("getFileList: Failed opening directory $dir for reading");
while(false !== ($entry = $d->read())) {
  // skip hidden files
  if($entry[0] == ".") continue;
  if(is_dir("$dir$entry")) {
    $retval[] = array(
      "name" => "$dir$entry",
      "size" => 0,
       "Stream" => md5_file("$dir$entry")
    );
  } elseif(is_readable("$dir$entry")) {
   $retval[] = array(
      "name" => "$entry",
      "size" => filesize("$dir$entry"),
     "Stream" => md5_file("$dir$entry")
    );
  }
  }
 $d->close();

  return $retval;
 }
 }
 ?> 
```

# jquery - 以编程方式滚动到页面底部

> ID：10953898
> 
> 赞同：0
> 
> 时间：2012-06-08T18:08:42.057
> 
> 标签：jquery, ruby, scroll

我想使用 Ruby 脚本以编程方式滚动到页面底部，因为网页已经实现了无限滚动。我可以用机械化来做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T18:12:13.890

尝试使用 window.scrollBy() 和 window.scrollTo() ，这可能会有所帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-12-26T03:29:00.920

即使文档高度是动态的，以下代码也会滚动到底部。

```
const getDocHeight = function() {
  return Math.max(
    document.body.scrollHeight,
    document.documentElement.scrollHeight,
    document.body.offsetHeight,
    document.documentElement.offsetHeight,
    document.body.clientHeight,
    document.documentElement.clientHeight
  );
}; 

scrollToBottom = () => {
  let maxHeight = getDocHeight();

  window.scrollBy(0, maxHeight);

  window.onscroll = function(ev) {
    if (getDocHeight() > maxHeight) {
      maxHeight = getDocHeight();

      window.scrollBy(0, maxHeight);
    }
  };
};

scrollToBottom(); 
```

# html - 超链接不接受填充属性

> ID：10953900
> 
> 赞同：2
> 
> 时间：2012-06-08T18:08:56.170
> 
> 标签：html, css, hyperlink, block, padding

我的 CSS 有一点问题：

*   我有一个不接受我分配给它的垂直填充的超链接元素。

这是我的 HTML 的一部分：

```
<a href='#' class='big_button'>Show more comments</a> 
```

这是我正在使用的 CSS：

```
.big_button{
    height:auto;
    position:relative;
    display:block;
    font-size:2em;
    padding:.5em 0;
    background:blue;
    text-align:center;
} 
```

记录一下：我的 [body] 的字体大小为 10px，因此 2em = 20px，因此 0.5em = 10px。

填充不起作用。

有人可以帮我吗？提前致谢。

编辑：感谢您的回复，这是我的其余代码：

```
 <header id='header'>

    </header>

    <div id='main_container'>

        <div class='medium_sizer'>

            <header class='post'>
                <h1>
                    On flying monobrows
                </h1>
                <aside class='date'>
                    Date: 15 June <a href='#'>2019</a>
                    &nbsp;&middot;&nbsp;
                    Category: <a href='#'>Articles</a>
                </aside>

                <aside class='social'>
                    <div class='decoration left'></div>
                    <ul>
                        <li>
                            <a href='#'>
                                Share via email
                            </a>
                        </li>
                        <li class='sep'>&middot;</li>
                        <li>
                            <a href='#'>
                                Tweet
                            </a>
                        </li>
                        <li class='sep'>&middot;</li>
                        <li>
                            <a href='#'>
                                Facebook Share
                            </a>
                        </li>
                        <li class='sep'>&middot;</li>
                        <li>
                            <a href='#'>
                                Facebook Like
                            </a>
                        </li>
                        <li class='sep'>&middot;</li>
                        <li>
                            <a href='#'>
                                Google +1
                            </a>
                        </li>
                    </ul>

                    <div class='decoration right'></div>
                </aside>

            </header>

            <article class='post'>

                    <p>
                        <b>
                            Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem aperiam, eaque&nbsp;explicabo. 
                        </b>

                        Nemo enim ipsam voluptatem quia voluptas sit aspernatur aut odit aut fugit, sed quia consequuntur magni dolores eos qui ratione voluptatem sequi nesciunt. Neque porro quisquam est, qui dolorem ipsum quia dolor sit amet, consectetur, adipisci velit, sed quia non numquam eius modi tempora incidunt ut labore et dolore magnam et <i>natte peperkoek</i> aliquam quaerat voluptatem. Ut enim ad minima veniam, quis nostrum exercitationem ullam corporis suscipit laboriosam, nisi ut aliquid ex ea commodi consequatur? Quis autem vel eum iure reprehenderit qui in ea voluptate velit esse quam nihil <mark>molestiae</mark> consequatur, vel illum qui dolorem eum fugiat quo voluptas nulla&nbsp;pariatur?
                    </p>

            </article>

            <footer class='post'>

                <aside class='social'>
                    <div class='decoration left'></div>
                    <ul>
                        <li>
                            <a href='#'>
                                Share via email
                            </a>
                        </li>
                        <li class='sep'>&middot;</li>
                        <li>
                            <a href='#'>
                                Tweet
                            </a>
                        </li>
                        <li class='sep'>&middot;</li>
                        <li>
                            <a href='#'>
                                Facebook Share
                            </a>
                        </li>
                        <li class='sep'>&middot;</li>
                        <li>
                            <a href='#'>
                                Facebook Like
                            </a>
                        </li>
                        <li class='sep'>&middot;</li>
                        <li>
                            <a href='#'>
                                Google +1
                            </a>
                        </li>
                    </ul>

                    <div class='decoration right'></div>
                </aside>

            </footer>

            <aside id='comments'>
                <header>
                    <h2>Discussion</h2>
                </h2>
                <ul id='comment_list'>
                    <li>
                        <div class='meta'>
                            on 14 august 2010 <br/>
                            <b>Kevin63</b> wrote:

                        </div>
                        <article>
                        Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae dicta sunt explicabo. Nemo enim ipsam voluptatem quia&nbsp;voluptas.
                        </article>
                    </li>

                    <li>
                        <div class='meta'>
                            on 1 January 2011 <br/>
                            <b>bjoajegwf eiofjwa</b> wrote:

                        </div>
                        <article>
                        Neque porro quisquam est, qui dolorem ipsum quia dolor sit amet, consectetur, adipisci velit, sed&nbsp;quia.
                        </article>
                    </li>

                    <li class='author'>
                        <div class='meta'>
                            on 4 January 2011 <br/>
                            <b>bla bla</b> wrote:

                        </div>
                        <article>
                            Nemo enim ipsam voluptatem quia voluptas sit aspernatur aut odit aut fugit, sed quia consequuntur magni dolores eos qui ratione voluptatem sequi nesciunt. Neque porro quisquam est, qui dolorem ipsum quia dolor sit amet, consectetur, adipisci velit, sed quia non numquam eius modi tempora incidunt ut labore et dolore&nbsp;magnam.
                        </article>
                    </li>

                </ul>

                <a class='big_button' href='#'>
                    Show more comments
                </a>

                <h3>Leave a comment</h3>

                <form class='comment'>

                    <div class='field'>
                        <div class='name'>Your name:</div>
                        <input type='text'/>
                    </div>

                    <div class='field'>
                        <div class='name'>Email address:</div>
                        <input type='text'/>
                        <small>Your email address will not be shown publicly, nor will it be shared with any third party.</small>
                    </div>

                    <div class='field' style='display:none;'>
                        <div class='name'>Confirm email address:</div> <!--this is a h0n3yPodt-->
                        <input type='text'/>
                    </div>

                    <div class='field'>
                        <div class='name'>Your comment:</div>
                        <textarea></textarea>
                    </div>

                    <input class='submit' type='submit' value='Submit comment'/>

                </form>

            </aside>

        </div> <!--end medium_sizer div-->

        <aside class='sidebar'>

            <section id='news'>
                <h2>
                    News
                </h2>

                <p>
                    At vero eos et accusamus et iusto odio dignissimos ducimus qui blanditiis praesentium voluptatum deleniti atque corrupti quos dolores et quas molestias excepturi sint occaecati cupiditate non provident, similique sunt in culpa qui officia deserunt mollitia&nbsp;animi.
                </p>
                <p>
                    id est laborum et dolorum fuga. Et harum quidem rerum facilis est et expedita distinctio. Nam libero tempore, cum soluta nobis est eligendi optio&nbsp;cumque.
                </p>

                <footer>
                    Date: 7 October 2006 &middot; <a href='#'>View archives</a>
                </footer>
            </section>

            <section id='facebook_like_box'>
                <h4>
                    'Like' me
                </h4>
                <p>
                    This feature is currently not available.
                </p>
            </section>

            <section id='twitter_follow_box'>
                <h4>
                    Follow me on Twitter
                </h4>
                <p>
                    This feature is currently not available either, sorry.
                </p>
            </section>

        </aside> <!--end sidebar aside-->

    </div>

    <footer id='footer'>

    </footer>

</div> 
```

和 css（对不起，如果它看起来很奇怪，它是使用 LESS 生成的）：

```
/*------------------------------------------------------------*/
body {
  font-family: 'helvetica neue', 'arial', 'helvetica', sans-serif;
  margin: 0px;
  background-color: gray;
  font-size: 0.625em;
  /* font size is now 10px */

  line-height: 2.0em;
  /*leading is 20px*/

}
#wrapper {
  margin: 0 auto;
  min-width: 960px;
  max-width: 1200px;
}
#header {
  height: 80px;
}
#main_container {
  color: #222222;
  min-height: 300px;
  background: url('grid-patteern.jpg') #eeeeee;
  overflow: hidden;
  padding-bottom: 2em;
}
#footer {
  height: 60px;
}
/*------------------------------------------------------------*/
.medium_sizer {
  /* approx 75 - 95 symbols wide*/

  text-align: justify;
  margin-left: 1%;
  width: 60%;
  padding-left: 2%;
  padding-right: 2%;
  float: left;
}
.sidebar {
  /* approx 38 - 50 symbols wide*/

  text-align: left;
  margin-right: 1%;
  width: 30%;
  padding-left: 2%;
  padding-right: 2%;
  float: right;
}
.sidebar section {
  margin-bottom: 4em;
}
.sidebar section footer {
  font-size: 1.6em;
  font-variant: small-caps;
  font-family: 'Poly';
  color: #555555;
}
.sidebar section footer a:link {
  color: #4d6fb3;
  text-decoration: none;
}
.sidebar section footer a:visited {
  color: #4d6fb3;
  text-decoration: none;
}
.sidebar section footer a:hover {
  color: #3d528f;
  text-decoration: underline;
}
.sidebar section footer a:active {
  color: #3d528f;
  text-decoration: underline;
}
.full_sizer {
  text-align: left;
  margin-left: 1%;
  margin-right: 1%;
  float: left;
  width: 96%;
  padding-left: 2%;
  padding-right: 2%;
}
/*------------------------------------------------------------*/
header.post {
  text-align: center;
  padding: 2em 0 4em;
}
header.post aside.date {
  font-size: 1.6em;
  font-variant: small-caps;
  font-family: 'Poly';
  color: #555555;
  padding-bottom: 1.25em;
}
header.post aside.date a:link {
  color: #4d6fb3;
  text-decoration: none;
}
header.post aside.date a:visited {
  color: #4d6fb3;
  text-decoration: none;
}
header.post aside.date a:hover {
  color: #3d528f;
  text-decoration: underline;
}
header.post aside.date a:active {
  color: #3d528f;
  text-decoration: underline;
}
article.post {
  margin-bottom: 4em;
}
footer.post {
  text-align: center;
  margin-bottom: 2em;
}
aside.social {
  margin: 0 -20%;
  text-align: center;
  font-size: 1.6em;
  font-variant: small-caps;
  font-family: 'Poly';
  color: #555555;
  height: 1.25em;
}
aside.social a:link {
  color: #4d6fb3;
  text-decoration: none;
}
aside.social a:visited {
  color: #4d6fb3;
  text-decoration: none;
}
aside.social a:hover {
  color: #3d528f;
  text-decoration: underline;
}
aside.social a:active {
  color: #3d528f;
  text-decoration: underline;
}
aside.social ul {
  padding: 0px 1%;
  display: inline;
  vertical-align: top;
  list-style: none;
}
aside.social ul li {
  display: inline;
}
aside.social ul li.sep {
  margin: 0 .5%;
}
aside.social .decoration {
  display: inline-block;
  width: 20px;
  height: 20px;
  background: #aaaaaa;
}
#comments {
  min-height: 10em;
}
#comment_list {
  list-style: none;
  padding: 0;
}
#comment_list li {
  -moz-box-shadow: 0px 1px 2px rgba(0, 0, 0, 0.3);
  -webkit-box-shadow: 0px 1px 2px rgba(0, 0, 0, 0.3);
  box-shadow: 0px 1px 2px rgba(0, 0, 0, 0.3);
  overflow: hidden;
  text-align: left;
  font-size: 1.6em;
  background: #fff;
  padding: 1.25em 4%;
  margin: 1.25em 0;
}
#comment_list li .meta {
  font-size: 1.6em;
  font-variant: small-caps;
  font-family: 'Poly';
  color: #555555;
  font-size: 1em;
  width: 28%;
  float: left;
}
#comment_list li .meta a:link {
  color: #4d6fb3;
  text-decoration: none;
}
#comment_list li .meta a:visited {
  color: #4d6fb3;
  text-decoration: none;
}
#comment_list li .meta a:hover {
  color: #3d528f;
  text-decoration: underline;
}
#comment_list li .meta a:active {
  color: #3d528f;
  text-decoration: underline;
}
#comment_list li .meta b {
  color: #222222;
}
#comment_list li article {
  width: 70%;
  float: right;
}
#comment_list li.author {
  background: #bbddff;
}
/*------------------------------------------------------------*/
form.comment {
  -moz-box-shadow: 0px 1px 2px rgba(0, 0, 0, 0.3);
  -webkit-box-shadow: 0px 1px 2px rgba(0, 0, 0, 0.3);
  box-shadow: 0px 1px 2px rgba(0, 0, 0, 0.3);
  background: #fff;
  padding: 3em 4% 5em;
  margin: 2em 0;
}
form.comment div.field {
  overflow: hidden;
  padding: 1em 0;
  margin-bottom: 2em;
}
form.comment div.field small {
  margin-top: 1.4286em;
  float: right;
  width: 70%;
}
form.comment div.field .name {
  float: left;
  width: 28%;
  font-size: 1.6em;
  text-align: right;
  font-family: 'Poly';
  color: #555555;
}
form.comment input,
form.comment textarea {
  font-family: 'helvetica neue', 'arial', 'helvetica', sans-serif;
  font-size: 1.6em;
  margin: 0;
  margin: -0.25em 0;
  width: 70%;
  min-width: 70%;
  max-width: 70%;
  float: right;
}
form.comment input {
  height: 1.75em;
}
form.comment input.submit {
  height: auto;
  border: none;
  font-family: 'helvetica neue', 'arial', 'helvetica', sans-serif;
  position: relative;
  display: block;
  font-size: 2em;
  padding: .5em 0;
  background: #66aaff;
  text-align: center;
  color: white;
  text-decoration: none;
}
form.comment input.submit:link {
  color: white;
  text-decoration: none;
}
form.comment input.submit:visited {
  color: white;
  text-decoration: none;
}
form.comment input.submit:hover {
  color: white;
  text-decoration: none;
}
form.comment input.submit:active {
  color: white;
  text-decoration: none;
}
form.comment textarea {
  height: 13em;
  max-height: 13em;
  min-height: 13em;
}
/*------------------------------------------------------------*/
.padded {
  padding-left: 2%;
  padding-right: 2%;
}
.clearfloat {
  overflow: hidden;
}
.hide-text {
  overflow: hidden;
  text-indent: 110%;
  white-space: nowrap;
}
.meta_text {
  font-size: 1.6em;
  font-variant: small-caps;
  font-family: 'Poly';
  color: #555555;
}
.meta_text a:link {
  color: #4d6fb3;
  text-decoration: none;
}
.meta_text a:visited {
  color: #4d6fb3;
  text-decoration: none;
}
.meta_text a:hover {
  color: #3d528f;
  text-decoration: underline;
}
.meta_text a:active {
  color: #3d528f;
  text-decoration: underline;
}
.text {
  font-size: 1.6em;
}
.light {
  color: #555555;
}
.light a:link {
  color: #4d6fb3;
  text-decoration: none;
}
.light a:visited {
  color: #4d6fb3;
  text-decoration: none;
}
.light a:hover {
  color: #3d528f;
  text-decoration: underline;
}
.light a:active {
  color: #3d528f;
  text-decoration: underline;
}
.serif {
  font-family: 'Poly';
}
.sans {
  font-family: 'helvetica neue', 'arial', 'helvetica', sans-serif;
}
/*------------------------------------------------------------*/
.big_button {
  height: auto;
  border: none;
  font-family: 'helvetica neue', 'arial', 'helvetica', sans-serif;
  position: relative;
  display: block;
  font-size: 2em;
  padding: .5em 0;
  background: #66aaff;
  text-align: center;
  color: white;
  text-decoration: none;
}
.big_button:link {
  color: white;
  text-decoration: none;
}
.big_button:visited {
  color: white;
  text-decoration: none;
}
.big_button:hover {
  color: white;
  text-decoration: none;
}
.big_button:active {
  color: white;
  text-decoration: none;
}
/*------------------------------------------------------------*/
p {
  font-size: 1.6em;
  margin: 0 0 1.25em;
}
.sidebar p {
  margin: 0;
}
hr {
  padding: 0;
  margin: -1px 0 2em;
  height: 0px;
  border: 1px #aaaaaa solid;
  border-width: 1px 0 0;
}
strong {
  font-weight: bold;
  font-size: 2em;
  display: block;
  margin-bottom: 1em;
}
em {
  font-style: normal;
  font-variant: small-caps;
  font-weight: bold;
}
i {
  font-style: italic;
  font-variant: normal;
}
b {
  font-weight: bold;
}
mark {
  background: #ff6;
  margin: 0 -2px;
  padding: 0 2px;
}
small {
  font-size: 1.4em;
  color: #555555;
}
/*------------------------------------------------------------*/
code {
  text-align: left;
  font-family: 'monaco', monospace;
  font-size: 1.6em;
  line-height: 1.25em;
  background: #ddd;
  display: block;
  padding: 1.25em 2%;
  margin: 1.25em 0 1.25em 2%;
}
blockquote {
  -moz-box-shadow: 0px 1px 2px rgba(0, 0, 0, 0.3);
  -webkit-box-shadow: 0px 1px 2px rgba(0, 0, 0, 0.3);
  box-shadow: 0px 1px 2px rgba(0, 0, 0, 0.3);
  text-align: left;
  font-style: italic;
  font-size: 2em;
  font-family: 'Poly';
  background: white;
  padding: 1em 2% 1em 4%;
  margin: 1em 0;
}
blockquote footer {
  color: #555555;
  margin-top: 1.25em;
  font-size: .8em;
  text-align: right;
  font-variant: small-caps;
  font-style: normal;
}
blockquote footer a:link {
  color: #4d6fb3;
  text-decoration: none;
}
blockquote footer a:visited {
  color: #4d6fb3;
  text-decoration: none;
}
blockquote footer a:hover {
  color: #3d528f;
  text-decoration: underline;
}
blockquote footer a:active {
  color: #3d528f;
  text-decoration: underline;
}
/*------------------------------------------------------------*/
a:link {
  margin: -2px -4px;
  padding: 2px 4px;
  color: #0055ff;
  text-decoration: underline;
}
a:visited {
  color: #0055ff;
  text-decoration: underline;
}
a:hover {
  color: #0033cc;
  text-decoration: underline;
}
a:active {
  color: #0033cc;
  text-decoration: underline;
}
/*------------------------------------------------------------*/
h1 {
  font-family: 'Poly';
  font-weight: normal;
  margin: .33333em 0;
  font-size: 6em;
  line-height: 1em;
}
h2 {
  font-family: 'Poly';
  font-weight: normal;
  margin: .41667em 0;
  font-size: 4.8em;
  line-height: 1.25em;
}
h3 {
  font-family: 'Poly';
  font-weight: normal;
  margin: .55556em 0;
  font-size: 3.6em;
  line-height: 1.1111em;
}
h4 {
  font-family: 'Poly';
  font-weight: normal;
  margin: .71429em 0;
  font-size: 2.8em;
  line-height: 1.4286em;
}
h5 {
  font-family: 'Poly';
  font-weight: normal;
  margin: .83333em 0;
  font-size: 2.4em;
  line-height: .83333em;
}
h6 {
  font-family: 'Poly';
  font-weight: normal;
  margin: .95238em 0;
  font-size: 2.1em;
  line-height: .95238em;
}
.title {
  font-family: 'Poly';
  font-weight: normal;
}
/*------------------------------------------------------------*/ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T18:15:15.640

其实我不明白这里的*阻塞*问题是什么。如果您的意思是在顶部和底部都有`10px` [填充](http://www.w3schools.com/css/css_padding.asp)，那么我做对了。

检查这个[小提琴](http://jsfiddle.net/Tavzd/)。

如果问题仍然存在，则可能是由于外部`div's`问题可能存在。请提供更多的代码。

**更新后：**

我现在明白了，说cheez .. :)

实际上，您的代码之一是这样说的：

```
a:link {
  padding: 2px 4px;
  //blah blah
} 
```

此代码控制您将在此之前或之后的所有*填充。*当您尝试此代码时：

```
.big_button {
   padding: .5em 0;
   //blah blah
} 
```

它试图给`padding`块*，*但被`padding`on覆盖*`:link`*

`padding: .5em 0;`我只是从中删除该行`.big_botton`并将其粘贴到`.big_button:link`...哇，它有效.. :)

```
.big_button:link {
   padding: .5em 0;
   //blah blah
} 
```

这是你的小提琴：http: [//jsfiddle.net/Tavzd/3/](http://jsfiddle.net/Tavzd/3/)

# html - 将默认类添加到一组链接

> ID：10953906
> 
> 赞同：1
> 
> 时间：2012-06-08T18:09:23.223
> 
> 标签：html, css

我正在寻找为一堆链接添加一个默认类。所以而不是

```
<a href=1 class=text1>1</a>
<a href=2 class=text1>2</a>
<a href=3 class=text1>3</a>
<a href=4 class=text1>4</a>
<a href=5 class=text1>5</a>
<a href=6 class=text1>6</a>
<a href=7 class=text1>7</a> 
```

我想要做

```
<span class=text1>
<a href=1 >2</a>
<a href=2 >3</a>
<a href=3 >4</a>
<a href=4 >5</a>
<a href=5 >6</a>
<a href=6 >7</a>
<a href=7 >8</a>
</span> 
```

其中 text1 类类似于：

```
a.text1:link { color: white; text-decoration: underline ;}
a.text1:active { color: white; text-decoration: underline ;}
a.text1:visited { color: white; text-decoration: underline ;}
a.text1:hover { color: white; text-decoration: underline ;  } 
```

但是，第二个选项似乎不起作用。我是愚蠢的还是有什么办法可以在这样的组中创建一堆链接跟随课程？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T18:11:37.043

利用：

```
span.text1 a:link { color: white; text-decoration: underline ;}
span.text1 a:active { color: white; text-decoration: underline ;}
span.text1 a:visited { color: white; text-decoration: underline ;}
span.text1 a:hover { color: white; text-decoration: underline ;  } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T18:11:33.767

只需使用：

```
span.text1 a:link {
    /* css */
} 
```

或者，如有必要，仅选择第一级后代，即“直接”子代：

```
span.text1 > a:link {
    /* css */
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-08T18:11:51.620

它不是那样工作的。尝试这个

```
span.text1 a:link { color: white; text-decoration: underline ;}
span.text1 a:active { color: white; text-decoration: underline ;}
span.text1 a:visited { color: white; text-decoration: underline ;}
span.text1 a:hover { color: white; text-decoration: underline ;  } 
```

# php - 从 php 表单操作以 AJAX 输出部分响应

> ID：10953909
> 
> 赞同：1
> 
> 时间：2012-06-08T18:09:35.817
> 
> 标签：php, javascript, ajax

我有一个通过 AJAX POST 其数据的表单：

```
$.ajax({  
          type: "POST",  
          url: "http://example.com/prp/resources/upscalc.php",  
          data: dataString,  
          success: function(data){       
            res=data;  
            alert (res);return false; 
          }  
        }); 
```

目前输出到页面的内容是这样的： ![表单回复](../Images/bd631007943a1197d08a225ebef487f5.png)

我需要做什么才能发出警报的唯一值是警报末尾的数字（在本例中为 66.52 美元）？

PS附加信息，顶部的xml来自UPS api调用，我无法摆脱它。

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T18:14:49.053

怎么样 -

```
$.ajax({  
    type: "POST",  
    url: "http://example.com/prp/resources/upscalc.php",  
    data: dataString,  
    success: function(data){       
        res=data.split('-->');
        alert (res[res.length-1]);
        return false; 
    }  
}); 
```

编辑：*感谢大卫认为“-->”可能存在于 UPS 响应中，并且删除数组的最后一个元素而不是第二个元素更安全*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T18:15:12.197

```
var resNum=res.split("$");
var resNum="$"+resNum[resNum.length-1]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T18:16:24.133

试试这个：

```
$.ajax({  
          type: "POST",  
          url: "http://example.com/prp/resources/upscalc.php",  
          data: dataString,  
          success: function(data){       
            res=data;  
            alert (res.substr(-7));return false; 
          }  
        }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-08T18:19:35.733

看到响应似乎以金额结尾，您可以运行以下正则表达式：

```
data.match(/(\$[\d.]+)\s*$/)[1]; 
```

# java - Servlet 上的 wait() 抛出异常

> ID：10953913
> 
> 赞同：6
> 
> 时间：2012-06-08T18:09:46.307
> 
> 标签：java, events, servlets

我正在 Jboss 应用程序服务器中运行一个 Web 应用程序，并且我正在尝试从服务器实现一个基于事件的响应。

为了实现这一点，我在 servlets 类上使用了 .wait() 和 .notify() 。基本上有一个 Ajax 请求，servlet 阻塞，`wait`直到服务器上有一个事件，如果有，`notify`则在 servlet 上触发。

问题是当我在 Servlet 上等待（1000*60）时，我得到：

```
Servlet.service() for servlet ProcessesServlet threw exception: java.lang.IllegalMonitorStateException 
```

甚至可以在 HttpServlet 类上执行 wait() 吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-08T18:12:07.067

在等待对象之前，您必须取得所有权。

这通常使用同步语句来完成。

```
 synchronized (obj) {
        try {
            obj.wait(someTime);
        } catch (Throwable e) {
            e.printStackTrace();
        }
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T18:19:19.873

您不能将 wait(...) 放在 servlet 中，因为 doPost、doGet、... 不是同步方法。

您只能在同步方法或块中放置等待。因此，您可以放置​​一个同步块并在其中放置等待。如下所示 -

```
 synchronized (object) {
        try {
            object.wait(1000*60);
        } catch (Throwable ex) {
            ex.printStackTrace();
        }
    } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-08T22:12:22.893

接受的答案缺少一个条件。无论何时等待，都应始终检查条件以保护自己免受虚假唤醒。基本上，wait 保证在它所说的所有情况下都能正常返回。它也可以无缘无故地返回。您应该遵循[Javadoc](http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html#wait%28long%29)中的模式。我不建议在这里或几乎任何地方捕捉 Throwable。相反，只捕获 InterruptedException。此外，您需要确保条件检查是线程安全的。因此，例如，您可以执行以下操作：

```
private boolean condition;
private Object lock = new Object();
private long timeout = 1000;

public void conditionSatisfied() {
    synchronized (lock) {
        condition = true;
        lock.notify();
    }
}

public void awaitCondition() {
    synchronized (lock) {
        while (!condition) {
            try {
                lock.wait(timeout);
            } catch (InterruptedException e) {
                // Probably throw some application specific exception
            }
        }
        // Perform action appropriate to condition
    }
} 
```

您会注意到您正在循环等待。超时只是意味着您等待超时值的间隔。如果你想对你的等待时间设置一个总体限制，你应该记下循环外的当前时间，并在每次等待后检查它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-08T18:17:42.817

正如 Dystroy 所说，您需要锁定一个对象才能对其调用“等待”。如果由于某种原因，您不能或不想这样做（例如同时运行的同一方法试图获取同一对象的锁定），您可以使用：

```
try{
    Thread.sleep(time);
} catch (Exception ex){
    Thread.interrupted();
} 
```

或者声明一个获取锁的新对象。

# logback - RollingFileAppender 中的 FileNamePattern - logback 配置

> ID：10953915
> 
> 赞同：21
> 
> 时间：2012-06-08T18:09:49.353
> 
> 标签：logback, rollingfileappender

我的 logback 配置文件中有以下 RollingFileappender。

```
<appender name="RollingFILE" class="ch.qos.logback.core.rolling.RollingFileAppender">
  <File>C:\Files\MyLogFile.log</File>      
  <rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy"> 
  <FileNamePattern>C:\Files\MyLogFile.%d{yyyy-MM-dd}.log</FileNamePattern>       
  <MaxHistory>30</MaxHistory>     
  </rollingPolicy>      
  <encoder>
      <pattern>%date %level [%thread] %logger{60} [%file:%line] %msg%n</pattern>
    </encoder> 
  </appender> 
```

它确实将文件作为 MyLogFile.log 写入上述目录，但不附加`FileNamePattern`. 任何想法如何设法在我的文件名中附加日期。谢谢。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-06-09T08:05:10.147

状态的文档[`TimeBasedRollingPolicy`](http://logback.qos.ch/manual/appenders.html#TimeBasedRollingPolicy)：

> 请注意，（的父级 ）中的`file`属性可以设置或省略。通过设置 contains 的 file 属性，可以将活动日志文件的位置和归档日志文件的位置解耦。当前日志将始终针对该属性指定的文件。因此，当前活动的日志文件的名称不会随着时间而改变。但是，如果您选择省略该 属性，则将根据 的值为每个周期重新计算活动文件。`RollingFileAppender``TimeBasedRollingPolicy``FileAppender``file``file``fileNamePattern`

在您的情况下，只需省略该`file`属性。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-02-26T13:47:37.687

例如，您可以使用以下配置。它已经过测试并且可以工作:)

```
<!-- FILE APPENDER WITH PRUDENT MODE -->
<!-- IN PRUDENT MODE CANNOT BE SPECIFIED FILE, THIS PARAM IS OBTAINED FROM FILE NAME PATTERN -->
<!-- IN PRUDENT MODE ONLY TIME BASED ROLLING POLICY IS SUPPORTED - BECAUSE WE HAVE A LOG OF MULTIPLE JVM INSTANCES-->
<!-- SEE MORE AT http://logback.qos.ch/manual/appenders.html#prudentWithRolling -->
<appender name="FILE" class="ch.qos.logback.core.rolling.RollingFileAppender">
    <prudent>true</prudent>
    <rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy">
        <fileNamePattern>${logfile.path}-%d{yyyy-MM-dd}.log</fileNamePattern>
    </rollingPolicy>

    <encoder>
        <pattern>${HOSTNAME} %d{HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n</pattern>
    </encoder>
</appender> 
```

# wpf - 使用我的自定义面板设置 ItemsControl 中的项目的附加属性在 WPF 中不起作用

> ID：10953918
> 
> 赞同：2
> 
> 时间：2012-06-08T18:09:59.697
> 
> 标签：wpf, wpf-controls

我创建了一个自定义面板，您可以使用它执行以下操作：

```
<custom:Timeline>
    <Button custom:Timeline.PointInTime="6:30 PM" />
</custom:Timeline> 
```

当我这样做时，它的效果非常好。但是，当我做这样的事情时（这是我需要做的）：

```
<DataTemplate x:Key="TimelineItemTemplate">
    <Grid d:DesignWidth="169" custom:Timeline.PointInTime="{Binding NotifyTime}">

    </Grid>
</DataTemplate>

<ItemsControl Grid.RowSpan="2" ItemTemplate="{DynamicResource TimelineItemTemplate}" ItemsSource="{Binding Items}">
    <ItemsControl.ItemsPanel>
        <ItemsPanelTemplate>
            <custom:Timeline/>
        </ItemsPanelTemplate>
    </ItemsControl.ItemsPanel>
</ItemsControl> 
```

集合中的控件上未设置 PointInTime 附加属性`InternalChildren`：

```
protected override Size ArrangeOverride(Size a_arrangeBounds)
{
    foreach (UIElement uiChild in InternalChildren)
    {
        var pointInTime = GetPointInTime(uiChild);

        // Arranginess stuff
        // Timeline.PointInTimeProperty is not set on 'uiChild'. WTH?
    }

    return base.ArrangeOverride(a_arrangeBounds);
} 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T18:17:25.613

`ItemTemplates`位于容器内，因为`ItemsControls`该容器是`ContentPresenter`. 在任何情况下，您可能都想在其中绑定属性，`ItemsControl.ItemContainerStyle`这将在容器上设置属性。

# bash - 如何修复 bash shell 脚本中的参数过多错误？

> ID：10953919
> 
> 赞同：0
> 
> 时间：2012-06-08T18:10:14.507
> 
> 标签：bash, shell, while-loop, do-while

我正在尝试创建一个 bash 脚本来轻松地在位于多个目录中的日志中执行搜索。下面是我的 do-while 循环函数，这是发生错误的地方。如果需要完整的 shell 脚本进行故障排除，请告诉我。“x”代表私有材料。

```
 main_menu ()
{
TEMP=1
while [ "$TEMP" ! = "0" ]
do
    clear
    echo "###############################################"
    echo
    echo "           xxxxxxxxxx xxx Search              "
    echo
    echo "###############################################"
    echo
    echo " [1.] Search Logs by x/x "
    echo
    echo " [0.] Exit "
    echo
    echo " Select an Option: "
    echo
    read TEMP
        case $TEMP in
        1)
        x_name
        x_or_x
        get_x 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-08T18:21:24.843

替换`! =`为`!=`没有中间空间。

# editor - Aptana 开放资源密钥绑定

> ID：10953923
> 
> 赞同：2
> 
> 时间：2012-06-08T18:10:42.267
> 
> 标签：editor, keyboard-shortcuts, aptana3

Eclipse 中打开资源的默认键盘快捷键是 Ctrl+Shift+R。在 Aptana 中也是如此，但似乎也有一个冲突的键，因为单击它会弹出一个上下文菜单，其中包含 2 个选项“运行”和“开放资源”。如何避免弹出此上下文菜单？

我试图转到首选项并寻找有冲突的键绑定，但我找不到它。我也不确定实际绑定了什么“运行”命令（我尝试根据组合键进行搜索，但似乎没有用）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-08T21:12:45.707

在我看来，你想要的是编辑 Aptana 的卢布文件

看看[修改内置捆绑包](https://wiki.appcelerator.org/display/tis/Modifying+your+shortcut+keys#Modifyingyourshortcutkeys-Instructions%28RublebasedCommands%29)
和[卢布规范](https://wiki.appcelerator.org/display/tis/Ruble+Specification)可能会有所帮助。

顺便说一句，Aptana 将卢布存储在一个名为“Aptana Rubles”的目录中，您可以在您的用户文档目录（在 Mac 或 Linux 上）或您的“用户”目录 (Windows) 中找到该目录

此处提供更多详细信息的教程：[编辑 Aptana 快捷键和重新绑定命令，例如打开资源](http://bunwich.blogspot.co.il/2011/08/editing-aptana-key-shortcuts-and.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T04:35:15.057

另一种修复方法是改用“Cmd+T”键。

我也熟悉 Cmd+Shift+R，但 Cmd+T 是一个快速修复。希望这对遇到此问题的人有所帮助。

# linux - Suse Enterprise 11 SP2如何安装git

> ID：10953925
> 
> 赞同：27
> 
> 时间：2012-06-08T18:10:46.467
> 
> 标签：linux, git, suse

我在任何 Linux 发行版上安装 git 从来没有遇到过问题，但现在我不得不使用客户端服务器，即 SLES 11 SP2。它使用`yast`或`zypper`进行包管理，这是我以前从未使用过的。显然我应该能够，`zypper install git-core`但这不起作用，因为它需要添加某个回购。当然，这里的官方 git 安装页面上都没有[这些](http://git-scm.com/download/linux)。

[我在这里](http://www.novell.com/support/kb/doc.php?id=7003254)找到了属于 SLE11-SP2-SDK 存储库的软件包。但是没有关于如何将 repo 添加到 yast 或 zypper 的说明。

我还将接受一个简单地告诉我如何在 SLES 服务器上安装 git 的答案。我已经从源代码尝试过，但当然它缺少也属于 SDK 存储库的要求。

这是我在执行“zypper install git-core”时得到的：

```
$ sudo zypper install git-core

Refreshing service 'nu_novell_com'.
Loading repository data...
Reading installed packages...
'git-core' not found in package names. Trying capabilities.
No provider of 'git-core' found.
Resolving package dependencies...

Nothing to do. 
```

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-06-08T18:52:19.020

我只是通过将主要来自 OpenSUSE 项目的其他信息拼凑起来才弄明白的。基本上是：

```
$ sudo zypper addrepo http://download.opensuse.org/repositories/devel:/tools:/scm/SLE_11_SP2/devel:tools:scm.repo
$ sudo zypper install git-core 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-02T14:20:16.790

git 是 SLES SDK 的一部分，可以在这里下载：

[http://download.novell.com](http://download.novell.com)（最适合当前使用的 SP2）

一旦你安装了它，zypper 或 yast 命令就可以工作了。不推荐在 SLES 环境中使用 openSUSE rpms。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-11-04T06:30:07.867

### 使用 SDK ISO 在 SLES 12 SP2 上离线安装 git

如果您无法直接访问远程/在线 SLES zypper 存储库，则可以将***SDK*** ISO 添加为存储库。此 ISO 中提供了一些软件包。

1)从[https://download.suse.com/Download?buildid=g3e7P21X6Lw~](https://download.suse.com/Download?buildid=g3e7P21X6Lw~)下载**SLE-12-SP2-SDK-DVD-x86_64-GM-DVD1.iso**（需要注册）。您还可以在[https://download.suse.com找到所需的 ISO SDK](https://download.suse.com)

2) 将下载的文件复制并传输到 SLES 机器。（这里我们转移到/temp/SLE-12-SP2-SDK-DVD-x86_64-GM-DVD1.iso）

3) 添加 ISO 作为 Zypper 存储库

```
zypper ar iso:/?iso=/temp/SLE-12-SP2-SDK-DVD-x86_64-GM-DVD1.iso sdk_dvd 
```

4) 安装 git

```
zypper install git-core 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-24T07:59:58.430

您需要从 download.suse.com 下载 SLES 11 [SP2](http://download.suse.com) **SDK** DVD 。为了访问下载，您需要注册一个用户帐户（它是免费的）。

1.  下载后，安装第一张 DVD。（确保它适用于正确的架构）

2.  加载 YaST 并转到软件-> 附加产品。

3.  然后选择“添加”并通过选择安装源、接受许可证等方式继续安装。

4.  对 DVD2 重复此操作，除非 DVD1 包含您需要的一切。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-09-24T10:38:46.423

在尝试安装之前，`zypper`需要添加`git`using命令的存储库。`zypper addrepo <repo_url>`您可以在[此处](https://software.opensuse.org/download.html?project=devel%3Atools%3Ascm&package=git)`git`获取包的 repo URL 。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2014-01-09T06:42:35.370

我在 zypper 刷新期间遇到了一个愚蠢的问题，后来发现应该提前创建 /tmp 目录。在那之后，一切顺利。

```
13392046a881:/ # zypper -v refresh
Verbosity: 1
Initializing Target
Specified repositories: 
Checking whether to refresh metadata for Software configuration management (SLE_11_SP3)
Retrieving: repomd.xml [done]
Repository 'Software configuration management (SLE_11_SP3)' is up to date.
Building repository 'Software configuration management (SLE_11_SP3)' cache [done]
Error building the cache:
[|] Failed to cache repo (3).
History:
- 'repo2solv.sh' '-o' '/var/cache/zypp/solv/devel_tools_scm/solv' '/var/cache/zypp/raw/devel_tools_scm'
mktemp: failed to create file via template `/tmp/tmp.XXXXXXXXXX': No such file or directory 
```

# vb.net - 在线程中引用对象（类）失败

> ID：10953928
> 
> 赞同：1
> 
> 时间：2012-06-08T18:10:52.763
> 
> 标签：vb.net, multithreading, class

**在线程中引用对象（类）失败**

我有一个需要在单独的线程上运行并与 U/I 通信的对象（“vb 类”）。

即使使用示例代码，我也无法让对象在线程中运行。我用两个例子来说明这个问题。第一个在表单中调用一个函数，它工作得很好。第二个创建一个对象并执行相同的调用，但失败了。

**示例 #1 [工作]（在表单中调用）**

```
 Private Delegate Sub FuctionToBeRunInThreadDelegate

 Private Sub Button1_Click(sender As System.Object, e As System.EventArgs) Handles Button1.Click

    Console.WriteLine("Thread sample within FORM")

    Dim Thread As New System.Threading.Thread(AddressOf FuctionToBeRunInThread)
    Thread.Start()

    Console.WriteLine("Thread sample within FORM completed")

 End Sub

 Public Sub FuctionToBeRunInThread()

    If Me.InvokeRequired Then
        Console.WriteLine("Inside new thread....")
        Me.Invoke(New FuctionToBeRunInThreadDelegate(AddressOf FuctionToBeRunInThread))
    Else
        Console.WriteLine("oFuctionToBeRunInThread")
    End If

  End Sub 
```

**当在
表单
中**调用函数时，控制台的输出是** ：** 

 **这是我所期望的。线程已异步启动。很快就结束了，函数知道它在一个线程中。

**example #2 [non-working]（调用相同的函数，但这次是在一个对象中）**
在我的第二个示例中，我使用一个包含类的外部文件并以相同的方式创建线程。

这是主要形式：

```
Private Sub Button2_Click(sender As System.Object, e As System.EventArgs) Handles Button2.Click

    Console.WriteLine("Thread sample using object started.")

    Dim oEngine As New objTest()
    Dim oThread As New System.Threading.Thread(AddressOf oEngine.oFuctionToBeRunInThread)
    oThread.Start()

    Console.WriteLine("Thread sample using object completed.")

End Sub 
```

这是包含类定义的外部文件：

```
   公共类 objTest

   私有委托子 oFuctionToBeRunInThreadDelegate()

   公共子函数ToBeRunInThread()

        If frmInitial.InvokeRequired Then
            Console.WriteLine("在新线程内......")
            frmInitial.Invoke（新的 oFuctionToBeRunInThreadDelegate（oFuctionToBeRunInThread 的地址））
        别的
            Console.WriteLine("oFuctionToBeRunInThread")
        万一

    结束子
   结束类

```

在这种情况下，输出表明该函数没有在单独的线程中运行。**如下：**

使用对象启动的线程示例。
使用对象的线程示例已完成。
oFuctionToBeRunInThread

**摘要：**当线程创建对象时，看起来对象实际上并未在线程内部运行，否则 form.InvokeRequired 将为真。我还有其他更复杂的例子，这些例子得到了强有力的验证和证明，但我提供了这两个作为我的问题的一个非常简单的演示。

我怎样才能让一个线程“拥有”一系列单独的对象，以便这些对象异步运行并且可以独立地向 U/I 报告？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T15:59:15.503

调试代码后，frmInitial.InvokeRequired 似乎无法正确执行。

==================================================== =====

所以我又回来了（当然有一个解决方案）：

```
Public Class frmInitial

    Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
        Console.WriteLine("event started")

        Dim obj As New ObjTest()
        Dim threadobj As New System.Threading.Thread(AddressOf obj.dosomework)
        threadobj.Name = "debugme"

        'passing the current form reference to the thread function
        threadobj.Start(Me)

        Console.WriteLine("event completed")
    End Sub
End Class 
```

![屏幕快照](../Images/72abc8a57ecd7664553b06f28b41284d.png)

```
Public Class ObjTest
        Private Delegate Sub dosomeworkDelegate(ByVal f As Form)

        Public Sub dosomework(ByVal f As Form)
            ' Check if the form can be accessed from the current thread.
            If Not f.InvokeRequired Then
                ' Access the form directly.
                Console.WriteLine("delegate executed")
                f.Controls("textbox1").Text = "thread invoked successfuly"
            Else
                ' Marshal to the thread that owns the form. 
                Dim del As dosomeworkDelegate = AddressOf dosomework
                Dim param As Object() = {f}
                Console.WriteLine("executing delegate")
                f.BeginInvoke(del, param)
            End If
        End Sub

End Class 
```

相信我比为我的数值分析考试学习更好:-)**

# wpf - 在网格 WPF 中对齐标签

> ID：10953929
> 
> 赞同：2
> 
> 时间：2012-06-08T18:11:11.247
> 
> 标签：wpf, xaml, grid

我遇到了对齐问题，我试图从头到尾定位标签，但它们从中间开始。有人可以阐明我需要做些什么来改变它并让它按照我想要的方式对齐。

![在此处输入图像描述](../Images/7b056e47be177ba0bf8095cd78cfe60c.png)

```
 <Grid Height="23.3" Margin="169,0,8,8.199" VerticalAlignment="Bottom" Width="Auto">
<Grid.ColumnDefinitions>
    <ColumnDefinition Width="*" />
    <ColumnDefinition Width="*" />
    <ColumnDefinition Width="*" />
    <ColumnDefinition Width="*" />
    <ColumnDefinition Width="*" />
    <ColumnDefinition Width="*" />
</Grid.ColumnDefinitions>
            <Rectangle Grid.ColumnSpan="6" Fill="#FFDDDDDD" Stroke="#FFD7D7D7" RadiusX="2" RadiusY="2"/>

            <Label Grid.Column="1" Grid.Row="1" x:Name="lblAbout" Content="{Binding Source={StaticResource localisation}, Mode=OneWay, Path=.[Language.about]}" HorizontalAlignment="Left" Foreground="#FF585858" FontSize="10" Cursor="Hand" d:LayoutOverrides="Height" MouseLeftButtonUp="lblAbout_MouseLeftButtonUp"/>
            <Label Grid.Column="2" Grid.Row="1" Content="{Binding Source={StaticResource localisation}, Mode=OneWay, Path=.[Language.settings]}" HorizontalAlignment="Left" Foreground="#FF585858" FontSize="10" Cursor="Hand" d:LayoutOverrides="Height"/>
            <Label Grid.Column="3" Grid.Row="1" Content="{Binding Source={StaticResource localisation}, Mode=OneWay, Path=.[Language.feedback]}" Foreground="#FF585858" FontSize="10" Cursor="Hand" HorizontalAlignment="Left" Width="Auto" d:LayoutOverrides="Height"/>
            <Label Grid.Column="4" Grid.Row="1" Content="{Binding Source={StaticResource localisation}, Mode=OneWay, Path=.[Language.help]}" Foreground="#FF585858" FontSize="10" Cursor="Hand" HorizontalAlignment="Left" Width="Auto" d:LayoutOverrides="Height"/>
            <Label Grid.Column="1" Grid.Row="1" Content="{Binding Source={StaticResource localisation}, Mode=OneWay, Path=.[Language.checkingUpdates]}" Foreground="#FF585858" FontSize="10" Cursor="Hand" d:LayoutOverrides="Height" Visibility="Collapsed"/>
        </Grid> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T18:13:59.490

现在，由于您的所有列都使用星号大小，因此它们都将均匀调整大小并在宽度上拉伸。

我相信你想要：

```
<ColumnDefinition Width="Auto" />
<ColumnDefinition Width="Auto" />
<ColumnDefinition Width="Auto" />
<ColumnDefinition Width="Auto" />
<ColumnDefinition Width="Auto" />
<ColumnDefinition Width="*" /> 
```

这将导致它们从左到右堆叠，并在最后“填充”。

# python - 使用 whoosh 的智能字符串搜索 python（也许）

> ID：10953932
> 
> 赞同：1
> 
> 时间：2012-06-08T18:11:13.620
> 
> 标签：python, string, search, whoosh

我需要制作一个比 python 中的 find() 更智能的搜索方法。可以找到类似单词的东西更像是搜索引擎。我听说过 Whoosh，安装了它，但我什至不明白从哪里开始。有人可以教我一些非常基本的嗖嗖字符串搜索方法或给我另一种选择吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T18:14:41.230

您在寻找模糊字符串匹配吗？

如果是这样，您可能有兴趣查看[FuzzyWuzzy](https://github.com/seatgeek/fuzzywuzzy)。

# http - 发送 POST 请求时出现意外的 EOF

> ID：10953933
> 
> 赞同：1
> 
> 时间：2012-06-08T18:11:17.833
> 
> 标签：http, post, go

我在使用 http 包发送简单的 POST 请求时遇到了一些问题：

```
var http_client http.Client

req, err := http.NewRequest("POST", "http://login.blah", nil)
if err != nil {
  return errors.New("Error creating login request: " + err.Error())
}
req.Header.Add("Content-Type", "application/x-www-form-urlencoded")
body := fmt.Sprintf("?username=%s&password=%s&version=%d", client.Username, client.Password, launcherVersion)
fmt.Println("Body:", body)
req.Body = ioutil.NopCloser(bytes.NewBufferString(body))
req.ParseForm()
resp, err := http_client.Do(req)

if err != nil {
  return errors.New("Error sending login request: " + err.Error())
} 
```

我从印刷品中看到了正确的主体：

```
Body: ?username=test&password=test&version=13 
```

但 60 秒后，我得到：

```
Error sending login request: unexpected EOF 
```

我确信这与我如何设置请求正文有关，因为使用 Wireshark 观看它会向我显示请求，该请求立即发出，`Content-Length`没有正文的值为 0。

```
POST / HTTP/1.1
Host: login.blah
User-Agent: Go http package
Content-Length: 0
Content-Type: application/x-www-form-urlencoded
Accept-Encoding: gzip 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T19:55:33.140

您的`body`字符串看起来像是 URL 的结尾，就像您在 GET 请求中发送参数一样。

[服务器可能希望您的 POST 请求的主体采用http://www.w3.org/TR/html401/interact/forms.html#form-data-set](http://www.w3.org/TR/html401/interact/forms.html#form-data-set)中定义的 multipart/form-data 格式

我认为你应该要么

*   使用[multipart.Writer](http://golang.org/pkg/mime/multipart/)来构建你的身体。

*   在包示例中使用[PostForm ：](http://golang.org/pkg/net/http/#Client.PostForm)

    ```
    resp, err := http.PostForm("http://example.com/form",
        url.Values{"key": {"Value"}, "id": {"123"}}) 
    ```

# database - 在循环中使用 css 类作为与数据库值相关的数组键是否安全？

> ID：10953946
> 
> 赞同：0
> 
> 时间：2012-06-08T18:12:17.067
> 
> 标签：database, security

我正在使用关联数组在循环中打印 div 块。我想将此类数组的键用作每个 div 的 css 类。问题是那些键直接连接到数据库字段。这样做安全吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T18:16:52.487

我认为这没有问题，但尽量不要在 JS 或 HTML 代码中使用数据库字段的名称。我认为您可以将它们与前缀连接或更改字符的顺序，因此您可以使用字符串函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T18:17:27.333

如果您使用这些 CSS 类来创建查询，那么可以。例如，如果您有以下 HTML：

```
<div class="someValue">test</div> 
```

你使用这个 HTML 来创建一个 SQL 查询，如下所示：

```
DELETE someValue 
```

或者：

```
SELECT someValue FROM myTable 
```

有人可以轻松地将值更改为`myTable`其他值。

如果您没有从该值创建 SQL 查询，那么最大的问题是人们可能会根据您的 HTML 找出您的列名，这不是很好，但可能不是什么大问题。

# python - 在 XCode 4 中运行 PyObjC 模板时泄漏

> ID：10953948
> 
> 赞同：0
> 
> 时间：2012-06-08T18:12:33.883
> 
> 标签：python, objective-c, cocoa, xcode4, pyobjc

我下载了唯一的 Xcode PyObjC 模板：[http](http://svn.red-bean.com/pyobjc/trunk/pyobjc/pyobjc-xcode/) ://svn.red-bean.com/pyobjc/trunk/pyobjc/pyobjc-xcode/ （'Cocoa-Python Core Data Document-based Application/'）。当我运行它时 - 没有修改，我得到一个“责任库”的泄漏：**_objc.so**

我该如何解决这个问题？我可以在 python 中定义一个自动池来解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T18:16:48.570

查看这些更多最新模板... [https://github.com/gregneagle/Xcode4CocoaPythonTemplates](https://github.com/gregneagle/Xcode4CocoaPythonTemplates)

# api - Shopify CDN 的资产 URL 是如何生成的？

> ID：10953950
> 
> 赞同：2
> 
> 时间：2012-06-08T18:12:38.947
> 
> 标签：api, cdn, shopify

假设我有一张图片上传到 Shopify 上名为“logo.png”的商店。

在液体模板中，我可以为它生成一个 URL，如下所示：

```
{{ 'logo.png' | asset_url }} 
```

这会生成一个 URL，例如：

> [http://static.shopify.com/s/files/1/0072/7952/t/2/assets/logo.png?100239](http://static.shopify.com/s/files/1/0072/7952/t/2/assets/logo.png?100239)

我想在 Shopify 之外生成此 URL 以在第三方应用程序中使用。

[来自https://github.com/Shopify/pixelprinter/blob/master/app/liquid/filters/shop_filter.rb#L84](https://github.com/Shopify/pixelprinter/blob/master/app/liquid/filters/shop_filter.rb#L84)上的 Shopify 代码

我可以看到如何使用商店 ID 来生成除`'/t/2'`细分之外的所有内容。

是什么决定了这最后一段？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-08T18:36:25.643

您不应依赖以特定方式生成的 url。正如您所指出的，您可以在 Liquid 中使用 assets_url 过滤器，并且可以使用[Asset API](http://api.shopify.com/asset.html)从应用程序中获取资产的 url。

如果您只是好奇，那么我相信您案例的最后一段指定它是一个 id 为 2 的主题。

# git - 确保相对 Git 路径

> ID：10953953
> 
> 赞同：22
> 
> 时间：2012-06-08T18:12:46.637
> 
> 标签：git, git-submodules

我已经将一个 Git 存储库（包含几个子模块）移动到本地磁盘上的另一个目录。任何 git 命令都会产生错误：

```
fatal: Not a git repository: <absolute path to .git/modules/*> 
```

该错误源于在不同位置编码的文件的绝对路径[1]。两个问题：

*   是否有用于修复这些路径的 Git 命令，即，使它们相对？[2]
*   有没有办法确保未来的 Git 存储库只使用相对路径？[3]

谢谢！

* * *

## 笔记

1.  我注意到对于所有子模块，该`.git`文件包含：

    ```
    gitdir: <absolute path to repository> 
    ```

    `core.worktree`每个子模块 ( ) 中的参数`.git/modules/*/config`设置为该子模块的绝对路径。

2.  我不是在寻找 shell 命令，而是在寻找原生 Git 方法。

3.  我不确定绝对路径是否是使用较旧版本的 Git 创建的，而较新版本的 Git 则采用了相对路径。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2016-07-20T19:49:29.727

我写了一个将任何 .git gitdir 文件更改为相对路径的 oneliner（需要 bash 和 coreutils）：

```
find -type f -name .git -exec bash -c 'f="{}"; cd $(dirname $f); echo "gitdir: $(realpath --relative-to=. $(cut -d" " -f2 .git))" > .git' \; 
```

如果你不喜欢这里有 git 子模块：

```
git submodule foreach --recursive '[[ -f .git ]] && echo "gitdir: $(realpath --relative-to=. $(cut -d" " -f2 .git))" > .git' 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-12-02T12:54:56.463

@r3dey3 适用**于 Windows 的**解决方案：

```
git submodule foreach --recursive '[[ -f .git ]] && chmod +w .git && echo "gitdir: $(realpath --relative-to=. "$(cygpath -u "$(cut -d" " -f2 .git)")")" > .git' 
```

在这里我补充说：

*   `chmod +w .git`删除只读属性
*   `cygpath -u`调用将 Windows 路径转换为 ​​Unix 路径

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-19T13:48:20.247

我遇到了同样的问题。

这是我编写的一个小脚本的要点，可能会有所帮助。

通过将路径转换为相对形式并不能真正解决问题，但它会在相关位置进行快速搜索和替换，从而使您可以修复所有问题。如果您正在处理一组复杂的子模块，其中可能有很多需要修复的路径，则特别方便。

请注意，我自己在 OS X 10.8 上使用过这个脚本，但我不能 100% 确定它在所有情况下都有效，所以要小心并采取明智的预防措施！

[https://gist.github.com/3394771](https://gist.github.com/3394771)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-02-23T18:44:28.437

以下命令将所有子模块的路径转换为相对路径（即使`gitdir`子模块`.git`文件中的值错误或为空，它也可以使用，因此即使将存储库移动到新位置也可以使用该命令）：

```
for module in $(dirname $(find .git/modules -type f -name description)); do
    git="$(echo $module | cut -d/ -f2- | perl -pe "s|modules/||g")/.git"
    if [[ -e $git ]]; then
        echo "gitdir: $(realpath --relative-to=$(dirname $git) $module)" > $git
    fi
done 
```

它需要从存储库根目录（.git 目录所在的位置）执行。

我使用 PyTorch 存储库对其进行了测试，该存储库不仅具有子模块，甚至还有子模块的子模块，并且按预期工作。为了确保它在不写入文件的情况下检测到正确的路径，您可以通过替换`>`为`.`（或其他没有特殊含义的符号）来执行“试运行”。如果一切正常，则使用`>`实际编写更改。

# mule - Mule 3：启用关联 ID

> ID：10953956
> 
> 赞同：0
> 
> 时间：2012-06-08T18:12:58.710
> 
> 标签：mule

我正在将 Mule 1.3 应用程序升级到 Mule 3.2.1。如果 Mule 消息还没有关联 ID，则其中一个出站路由器似乎配置为生成关联 ID。这是通过一个名为 的属性来完成的`enableCorrelation`。

```
<mule-descriptor name="theName" implementation="org.mule.components.rest.RestServiceWrapper">
    <inbound-router ... />
    <outbound-router>
        <router className="org.mule.routing.outbound.OutboundPassThroughRouter" enableCorrelation="IF_NOT_SET">
            <endpoint address="vm://..." />
        </router>
    </outbound-router>
    <properties>
        <property name="serviceUrl" value="..." />
    </properties>
</mule-descriptor> 
```

如何将此功能转换为 Mule 3 配置文件？我在 Mule 3 标记中看不到任何与相关 ID 相关的 XML 属性。这是到目前为止我创建的 Mule 3 流程：

```
<flow name="theName">
    <inbound-endpoint ... />
    <http:rest-service-component serviceUrl="..." />
    <vm:outbound-endpoint path="..." />
</flow> 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T15:22:21.110

该`enableCorrelation`标志在 Mule 3 中可用：

*   在所有[传统路由器](http://www.mulesoft.org/documentation/display/MULE3USER/Outbound+Router+Configuration+Reference)上，例如`pass-through-router`，现在不鼓励使用，
*   在一些[路由消息处理器](http://www.mulesoft.org/documentation/display/MULE3USER/Routing+Message+Processors)上，例如`collection-splitter`，在需要它的地方。

恐怕您必须创建一个自定义转换器来模拟这种行为，而不是使用上述之一。

# android - WebView Android 4.0 文件上传

> ID：10953957
> 
> 赞同：6
> 
> 时间：2012-06-08T18:13:00.550
> 
> 标签：android, html, file, upload

它只是不工作。

我正在做这个

```
webView.setWebChromeClient(new WebChromeClient() {

        public void openFileChooser(ValueCallback<Uri> uploadFile) {
            System.out.println("openFileChooser");
            mUploadMessage = uploadFile;
            Intent i = new Intent(Intent.ACTION_GET_CONTENT);
            i.addCategory(Intent.CATEGORY_OPENABLE);
            i.setType("file/*");
            PresentationActivity.this.startActivityForResult(
                    Intent.createChooser(i, "Image Browser"),
                    FILECHOOSER_RESULTCODE);
        }
    }); 
```

但 openFileChooser 永远不会被调用。有任何想法吗？openFileChooser 在 Android 源代码中被标记为 @hide。我认为这是因为你不应该使用这种方法。还有另一种打开文件选择器的可能性吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-05T12:37:32.173

openFileChooser 的参数已经更新了一些时间。

对于 Android 3.0 - 4.0，它是

```
public void openFileChooser( ValueCallback<Uri> uploadMsg, String acceptType ) 
```

对于 4.1，

```
public void openFileChooser(ValueCallback<Uri> uploadMsg, String acceptType, String capture) 
```

对于 2.x

```
public void openFileChooser( ValueCallback<Uri> uploadMsg ) 
```

您必须添加所有这些以支持 Android 2.0 和 4.1 之间的任何设备。

# hash - CRC32可以用作散列函数吗？

> ID：10953958
> 
> 赞同：42
> 
> 时间：2012-06-08T18:13:04.120
> 
> 标签：hash, crc32

CRC32可以用作散列函数吗？这种方法有什么缺点吗？有什么取舍吗？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-06-09T15:26:01.907

CRC32作为散列算法工作*得很好。*CRC的*全部意义*在于对字节流进行哈希处理，并尽可能减少冲突。也就是说，有几点需要考虑：

*   CRC 不安全。对于安全散列，您需要一个计算量更大的算法。

*   不同的 CRC 风味具有不同的特性。确保使用正确的算法，例如散列多项式 0x11EDC6F41 (CRC32C)，这是最佳的通用选择。

*   作为散列速度/质量的权衡，x86 CRC32 指令很难被击败。但是，该指令在较旧的 CPU 中不存在，因此请注意可移植性问题。

- - 编辑 - -

[Mark Adler 提供](https://stackoverflow.com/questions/10953958/can-crc32-be-used-as-a-hash-function/10962213#comment14324213_10962213)了一个[链接，指向 Bret Mulvey 的一篇有用](https://papa.bretmulvey.com/post/124027987928/hash-functions)的哈希评估文章。使用文章中提供的源代码，我为 CRC32C 和 Jenkins96 运行了“桶测试”。这些表格显示了真正均匀分布比偶然测量结果*更差的概率。*因此，**数字越大越好**。作者认为 0.05 或更低为弱，0.01 或更低为非常弱。在这一切上我完全信任作者，我只是在报告结果。

在 CRC32C 比 Jenkins96 表现更好的所有实例中，我都放置了一个 *。通过这个简单的统计，CRC32C 是一个比 Jenkins96 更均匀的哈希 54 次 96 次。 *特别是*如果您可以使用 x86 CRC32 指令，则速度质量权衡非常好。

```
CRC32C (0x1EDC6F41)

       统一键 文本键 稀疏键

位 下 上 下 上 下 上
 1 0.671 *0.671 *1.000 0.120 *0.572 *0.572
 2 *0.706 *0.165 *0.729 *0.919 0.277 0.440
 3 *0.878 *0.879 *0.556 0.362 *0.535 *0.542
 4 0.573 0.332 0.433 0.462 *0.855 0.393
 5 0.023 *0.681 0.470 0.907 0.266 0.059
 6 *0.145 *0.523 0.354 *0.172 *0.336 0.588
 7 0.424 0.722 0.172 *0.736 0.184 *0.842
 8 *0.767 0.507 *0.533 0.437 0.337 0.321
 9 0.480 0.725 *0.753 *0.807 *0.618 0.025
10 *0.719 0.161 *0.970 *0.740 *0.789 0.344
11 *0.610 0.225 *0.849 *0.814 *0.854 *0.003
12 *0.979 *0.239 *0.709 0.786 0.171 *0.865
13 *0.515 0.395 0.192 0.600 0.869 *0.238
14 0.089 *0.609 0.055 *0.414 *0.286 *0.398
15 *0.372 *0.719 *0.944 0.100 *0.852 *0.300
16 0.015 *0.946 *0.467 0.459 0.372 *0.793

```

对于 Jenkins96，文章的作者认为它是一个优秀的哈希：

```
詹金斯96

      统一键 文本键 稀疏键

位 下 上 下 上 下 上
 1 0.888 0.572 0.090 0.322 0.090 0.203
 2 0.198 0.027 0.505 0.447 0.729 0.825
 3 0.444 0.510 0.360 0.444 0.467 0.540
 4 0.974 0.783 0.724 0.971 0.439 0.902
 5 0.308 0.383 0.686 0.940 0.424 0.119
 6 0.138 0.505 0.907 0.103 0.300 0.891
 7 0.710 0.956 0.202 0.407 0.792 0.506
 8 0.031 0.552 0.229 0.573 0.407 0.688
 9 0.682 0.990 0.276 0.075 0.269 0.543
10 0.382 0.933 0.038 0.559 0.746 0.511
11 0.043 0.918 0.101 0.290 0.584 0.822
12 0.895 0.036 0.207 0.966 0.486 0.533
13 0.290 0.872 0.902 0.934 0.877 0.155
14 0.859 0.568 0.428 0.027 0.136 0.265
15 0.290 0.420 0.915 0.465 0.532 0.059
16 0.155 0.922 0.036 0.577 0.545 0.336

```

---- 编辑 ---- 修复了过期的链接和少量清理。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-02-27T01:58:15.137

我不知道为什么 Mark Adler 说“crc32 很难将输入位分配给哈希”。crc32 散列中没有一个位与输入位完全相等。散列的任何位都是输入位的线性组合。其次，crc 总是将相同数量的不同输入序列均匀地映射到给定的哈希值。例如，如果您有 1000 位长的消息，在 crc32 之后，您总是可以找到 2^(1000-32) 个产生给定哈希值的序列，不多也不少。

如果您不需要安全功能，crc 可以完美地充当散列。

实际上，我认为其他非安全哈希函数可能比 crc 更简单，如果您需要更长的 crc，例如 crc-256。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-10-05T20:41:10.387

CRC32 将字节映射到 32 位整数，然后用 xor 对它们进行累加。这意味着每个字节仅影响散列中 32 位中的 8 位。当然 CRC32 也会发生变化，但它只是隐藏了问题。即它会不均匀地分配密钥，在某些区域会有大量的集群。看起来这样的哈希工作正常，直到你到达那个区域，突然你的 O(1) 哈希表变成了 O(n) 哈希表。

CRC32 旨在检测损坏的文件，而不是散列。正如 Mark 所说，它不会保护您的文件不被修改，因为黑客仍然可以通过在更改后插入正确制作的 32 位值来随意修改它们。

# php - 使用 PHP 在会话中将两个数组合并在一起

> ID：10953964
> 
> 赞同：0
> 
> 时间：2012-06-08T18:13:48.063
> 
> 标签：php, mysql, arrays, session, multidimensional-array

**问题：**

我有两个数组，其中一个产生一个类别，第二个产生该类别的项目。我希望这些项目在每个类别中，但我无法使其工作。

**PHP代码：**

```
foreach ($current['Children'] as $key => $value)
{
    $query = "SELECT * FROM betyg_items WHERE CID = '{$key}' AND Status = '1' ORDER BY CID ASC";
    $result = mysql_query($query) or die ('Database Error (' . mysql_errno() . ') ' . mysql_error());

    $_SESSION['keys'][$key] = $value;

    while ($row = mysql_fetch_assoc($result))
    {
        $_SESSION['items'][$row['IID']] = array(
                                        'ID' => $row['IID'],
                                        'CID' => $row['CID'],
                                        'Description' => $row['Description']
                                    );
    }
} 
```

**$_SESSION['keys'] 将包含：**

```
Array
(
    [2] => Integration av källorna
    [3] => Belysning av egna resultat
    [4] => Referenser
) 
```

**$_SESSION['items'] 将包含：**

```
Array
(
    [1] => Array
        (
            [ID] => 1
            [CID] => 2
            [Description] => Källorna refereras separat
        )

    [2] => Array
        (
            [ID] => 2
            [CID] => 2
            [Description] => Vissa försök till sammanbindning
        )

    [3] => Array
        (
            [ID] => 6
            [CID] => 3
            [Description] => Inga jämförelser mellan egna och andras resultat
        )

    [4] => Array
        (
            [ID] => 7
            [CID] => 3
            [Description] => Kort redovisning av likheter och skillnader mellan egna och andras resultat
        )

    [5] => Array
        (
            [ID] => 11
            [CID] => 4
            [Description] => Många formella felaktigheter i referens- och litteraturförteckning; ej primärkällor
        )

    [6] => Array
        (
            [ID] => 12
            [CID] => 4
            [Description] => Vissa formella fel, vissa källor av mindre kvalitet
        )
) 
```

**问题：**

如何使用 CID 值将每个项目放入它对应的数组索引中？

**设想：**

例如，所有包含数字 2 的 CID 都应进入“[2] => Integration av källorna”，依此类推。

**期望的输出：**

```
Array
(
    [2] => Integration av källorna

            [1] => Array
                (
                    [ID] => 1
                    [CID] => 2
                    [Description] => Källorna refereras separat
                )

            [2] => Array
                (
                    [ID] => 2
                    [CID] => 2
                    [Description] => Vissa försök till sammanbindning
                )

    [3] => Belysning av egna resultat

            [3] => Array
                (
                    [ID] => 6
                    [CID] => 3
                    [Description] => Inga jämförelser mellan egna och andras resultat
                )

            [4] => Array
                (
                    [ID] => 7
                    [CID] => 3
                    [Description] => Kort redovisning av likheter och skillnader mellan egna och andras resultat
                )

    [4] => Referenser

            [5] => Array
                (
                    [ID] => 11
                    [CID] => 4
                    [Description] => Många formella felaktigheter i referens- och litteraturförteckning; ej primärkällor
                )

            [6] => Array
                (
                    [ID] => 12
                    [CID] => 4
                    [Description] => Vissa formella fel, vissa källor av mindre kvalitet
                )
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T18:36:56.570

```
$final_arr = array();
$i = 0;

foreach ($current['Children'] as $key => $value)
{
    $query = "SELECT * FROM betyg_items WHERE CID = '{$key}' AND Status = '1' ORDER BY CID ASC";
    $result = mysql_query($query) or die ('Database Error (' . mysql_errno() . ') ' . mysql_error());

    $final_arr[$i]['key'] = $value;

    while ($row = mysql_fetch_assoc($result))
    {
         $final_arr[$i]['items'][] = array(
                            'ID' => $row['IID'],
                            'CID' => $row['CID'],
                            'Description' => $row['Description']
                          );
    }
   $i++;
} 
```

最终输出将是： **$final_arr**

```
Array
(
    [0] => 
            ['key']=> Integration av källorna
            ['items'] => 
                 [0] => Array
                 (
                    [ID] => 1
                    [CID] => 2
                    [Description] => Källorna refereras separat
                 )

                 [1] => Array
                 (
                    [ID] => 2
                    [CID] => 2
                    [Description] => Vissa försök till sammanbindning
                  ) 
```

# java - 如何在 tomcat 上使用 LDAP 设置 CAS .. 没有错误

> ID：10953965
> 
> 赞同：2
> 
> 时间：2012-06-08T18:13:49.243
> 
> 标签：java, spring, tomcat, ldap, cas

我整个星期都在尝试让 LDAP 与 CAS 一起在 tomcat 上工作。如果我只是将 cas.war 文件移动到 tomcat 的 webapps 中，它会运行，但我需要它来检查 LDAP 以获取我的用户数据。我复制了所有 Spring 和 LDAP jar，但是一旦我更新了 deployerconfigcontext.xml，一切都停止工作了..请帮忙

我的 DEPLOYERCONFIGCONTEXT.XML

```
<?xml version="1.0" encoding="UTF-8"?>
<!--
    | deployerConfigContext.xml centralizes into one file some of the declarative configuration that
    | all CAS deployers will need to modify.
    |
    | This file declares some of the Spring-managed JavaBeans that make up a CAS deployment.  
    | The beans declared in this file are instantiated at context initialization time by the Spring 
    | ContextLoaderListener declared in web.xml.  It finds this file because this
    | file is among those declared in the context parameter "contextConfigLocation".
    |
    | By far the most common change you will need to make in this file is to change the last bean
    | declaration to replace the default SimpleTestUsernamePasswordAuthenticationHandler with
    | one implementing your approach for authenticating usernames and passwords.
    +-->
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:p="http://www.springframework.org/schema/p"
       xmlns:sec="http://www.springframework.org/schema/security"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
       http://www.springframework.org/schema/security http://www.springframework.org/schema/security/spring-security-3.0.xsd">
    <!--
        | This bean declares our AuthenticationManager.  The CentralAuthenticationService service bean
        | declared in applicationContext.xml picks up this AuthenticationManager by reference to its id, 
        | "authenticationManager".  Most deployers will be able to use the default AuthenticationManager
        | implementation and so do not need to change the class of this bean.  We include the whole
        | AuthenticationManager here in the userConfigContext.xml so that you can see the things you will
        | need to change in context.
        +-->
    <bean id="authenticationManager"
        class="org.jasig.cas.authentication.AuthenticationManagerImpl">
        <!--
            | This is the List of CredentialToPrincipalResolvers that identify what Principal is trying to authenticate.
            | The AuthenticationManagerImpl considers them in order, finding a CredentialToPrincipalResolver which 
            | supports the presented credentials.
            |
            | AuthenticationManagerImpl uses these resolvers for two purposes.  First, it uses them to identify the Principal
            | attempting to authenticate to CAS /login .  In the default configuration, it is the DefaultCredentialsToPrincipalResolver
            | that fills this role.  If you are using some other kind of credentials than UsernamePasswordCredentials, you will need to replace
            | DefaultCredentialsToPrincipalResolver with a CredentialsToPrincipalResolver that supports the credentials you are
            | using.
            |
            | Second, AuthenticationManagerImpl uses these resolvers to identify a service requesting a proxy granting ticket. 
            | In the default configuration, it is the HttpBasedServiceCredentialsToPrincipalResolver that serves this purpose. 
            | You will need to change this list if you are identifying services by something more or other than their callback URL.
            +-->
        <property name="credentialsToPrincipalResolvers">
            <list>
                <!--
                    | UsernamePasswordCredentialsToPrincipalResolver supports the UsernamePasswordCredentials that we use for /login 
                    | by default and produces SimplePrincipal instances conveying the username from the credentials.
                    | 
                    | If you've changed your LoginFormAction to use credentials other than UsernamePasswordCredentials then you will also
                    | need to change this bean declaration (or add additional declarations) to declare a CredentialsToPrincipalResolver that supports the
                    | Credentials you are using.
                    +-->
                <bean
                    class="org.jasig.cas.authentication.principal.UsernamePasswordCredentialsToPrincipalResolver" />
                <!--
                    | HttpBasedServiceCredentialsToPrincipalResolver supports HttpBasedCredentials.  It supports the CAS 2.0 approach of
                    | authenticating services by SSL callback, extracting the callback URL from the Credentials and representing it as a
                    | SimpleService identified by that callback URL.
                    |
                    | If you are representing services by something more or other than an HTTPS URL whereat they are able to
                    | receive a proxy callback, you will need to change this bean declaration (or add additional declarations).
                    +-->
                <bean
                    class="org.jasig.cas.authentication.principal.HttpBasedServiceCredentialsToPrincipalResolver" />
            </list>
        </property>

        <!--
            | Whereas CredentialsToPrincipalResolvers identify who it is some Credentials might authenticate, 
            | AuthenticationHandlers actually authenticate credentials.  Here we declare the AuthenticationHandlers that
            | authenticate the Principals that the CredentialsToPrincipalResolvers identified.  CAS will try these handlers in turn
            | until it finds one that both supports the Credentials presented and succeeds in authenticating.
            +-->
        <property name="authenticationHandlers">
            <list>
                <!--
                    | This is the authentication handler that authenticates services by means of callback via SSL, thereby validating
                    | a server side SSL certificate.
                    +-->
                <bean class="org.jasig.cas.authentication.handler.support.HttpBasedServiceCredentialsAuthenticationHandler"
                    p:httpClient-ref="httpClient" />
                <!--
                    | This is the authentication handler declaration that every CAS deployer will need to change before deploying CAS 
                    | into production.  The default SimpleTestUsernamePasswordAuthenticationHandler authenticates UsernamePasswordCredentials
                    | where the username equals the password.  You will need to replace this with an AuthenticationHandler that implements your
                    | local authentication strategy.  You might accomplish this by coding a new such handler and declaring
                    | edu.someschool.its.cas.MySpecialHandler here, or you might use one of the handlers provided in the adaptors modules.
                    +-->

<!--

<bean
                    class="org.jasig.cas.authentication.handler.support.SimpleTestUsernamePasswordAuthenticationHandler" />
            </list>
        </property>
    </bean>
-->

    <!--
    This bean defines the security roles for the Services Management application.  Simple deployments can use the in-memory version.
    More robust deployments will want to use another option, such as the Jdbc version.

    The name of this should remain "userDetailsService" in order for Spring Security to find it.
     -->
    <!-- <sec:user name="@@THIS SHOULD BE REPLACED@@" password="notused" authorities="ROLE_ADMIN" />-->

    <sec:user-service id="userDetailsService">
        <sec:user name="@@THIS SHOULD BE REPLACED@@" password="notused" authorities="ROLE_ADMIN" />
    </sec:user-service>

    <!-- 
    Bean that defines the attributes that a service may return.  This example uses the Stub/Mock version.  A real implementation
    may go against a database or LDAP server.  The id should remain "attributeRepository" though.
     -->
    <bean id="attributeRepository"
        class="org.jasig.services.persondir.support.StubPersonAttributeDao">
        <property name="backingMap">
            <map>
                <entry key="uid" value="uid" />
                <entry key="eduPersonAffiliation" value="eduPersonAffiliation" /> 
                <entry key="groupMembership" value="groupMembership" />
            </map>
        </property>
    </bean>

    <!-- 
    Sample, in-memory data store for the ServiceRegistry. A real implementation
    would probably want to replace this with the JPA-backed ServiceRegistry DAO
    The name of this bean should remain "serviceRegistryDao".
     -->
    <bean
        id="serviceRegistryDao"
        class="org.jasig.cas.services.InMemoryServiceRegistryDaoImpl">
            <property name="registeredServices">
                <list>
                    <bean class="org.jasig.cas.services.RegexRegisteredService">
                        <property name="id" value="0" />
                        <property name="name" value="HTTP and IMAP" />
                        <property name="description" value="Allows HTTP(S) and IMAP(S) protocols" />
                        <property name="serviceId" value="^(https?|imaps?)://.*" />
                        <property name="evaluationOrder" value="10000001" />
                    </bean>
                    <!--
                    Use the following definition instead of the above to further restrict access
                    to services within your domain (including subdomains).
                    Note that example.com must be replaced with the domain you wish to permit.
                    -->
                    <!--
                    <bean class="org.jasig.cas.services.RegexRegisteredService">
                        <property name="id" value="1" />
                        <property name="name" value="HTTP and IMAP on example.com" />
                        <property name="description" value="Allows HTTP(S) and IMAP(S) protocols on example.com" />
                        <property name="serviceId" value="^(https?|imaps?)://([A-Za-z0-9_-]+\.)*example\.com/.*" />
                        <property name="evaluationOrder" value="0" />
                    </bean>
                    -->
                </list>
            </property>
        </bean>

    <bean id="auditTrailManager" class="com.github.inspektr.audit.support.Slf4jLoggingAuditTrailManager" />

<bean class="org.jasig.cas.adaptors.ldap.FastBindLdapAuthenticationHandler" >
 <property name="filter" value="uid=%u,dc=uftwf,dc=dev" />
 <property name="contextSource" ref="contextSource" />
</bean>

<bean id="contextSource"
 class="org.jasig.cas.adaptors.ldap.util.AuthenticatedLdapContextSource">
 <property name="pooled" value="true"/>
 <property name="urls">
   <list>
     <value>ldaps://dvldap01.uftwf.dev:636</value>
   </list>
 </property>
 <property name="userName" value="cn=Manager,dc=uftwf,dc=dev"/>
 <property name="password" value="uftwf"/>
 <property name="baseEnvironmentProperties">
   <map>
     <entry key="java.naming.security.authentication" value="simple" />
   </map>
 </property>
</bean>

</beans> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-31T12:04:56.410

看起来像一个 XML 错误。你有“bean”打开但没有关闭

```
<!--

<bean
                    class="org.jasig.cas.authentication.handler.support.SimpleTestUsernamePasswordAuthenticationHandler" />
        </list>
    </property>
</bean>
--> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T18:46:07.690

这是我在 Windows 2008 R2 上使用 CAS 3.4.11 和 Active Directory 的工作配置示例。[LDAP - CAS 用户手册](https://wiki.jasig.org/display/CASUM/LDAP)

cas.properties：

```
ldap.pool.minIdle=3
ldap.pool.maxIdle=5
ldap.pool.maxSize=10

# Maximum time in ms to wait for connection to become available
# under pool exhausted condition.
ldap.pool.maxWait=10000

# == Evictor configuration ==

# Period in ms at which evictor process runs.
ldap.pool.evictionPeriod=600000

# Maximum time in ms at which connections can remain idle before
# they become liable to eviction.
ldap.pool.idleTime=1200000

# == Connection testing settings ==

# Set to true to enable connection liveliness testing on evictor
# process runs.  Probably results in best performance.
ldap.pool.testWhileIdle=true

# Set to true to enable connection liveliness testing before every
# request to borrow an object from the pool.
ldap.pool.testOnBorrow=false 
```

deployerConfigContext.xml 您必须更改以下内容：

*   `<property name="url" value="ldaps://domaincontroller.example.com"/>`
*   `p:searchBase="DC=USERS,DC=DOMAIN,DC=com"`
*   `<property name="userDn" value="myuser"/>`
*   `<property name="password" value="mypassword"/>`

 `````
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:p="http://www.springframework.org/schema/p"
    xmlns:sec="http://www.springframework.org/schema/security"
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
       http://www.springframework.org/schema/security http://www.springframework.org/schema/security/spring-security-3.0.xsd">

    <bean id="contextSource" class="org.springframework.ldap.core.support.LdapContextSource">
        <property name="pooled" value="false" />
        <property name="url" value="ldaps://domaincontroller.example.com" />
        <property name="userDn" value="myuser" />
        <property name="password" value="mypassword" />

        <property name="baseEnvironmentProperties">
            <map>
                <entry key="com.sun.jndi.ldap.connect.timeout" value="3000" />
                <entry key="com.sun.jndi.ldap.read.timeout" value="3000" />
                <entry key="java.naming.security.authentication" value="simple" />
            </map>
        </property>
    </bean>

    <bean id="pooledContextSource"
        class="org.springframework.ldap.pool.factory.PoolingContextSource"
        p:minIdle="${ldap.pool.minIdle}" p:maxIdle="${ldap.pool.maxIdle}"
        p:maxActive="${ldap.pool.maxSize}" p:maxWait="${ldap.pool.maxWait}"
        p:timeBetweenEvictionRunsMillis="${ldap.pool.evictionPeriod}"
        p:minEvictableIdleTimeMillis="${ldap.pool.idleTime}" p:testOnBorrow="${ldap.pool.testOnBorrow}"
        p:testWhileIdle="${ldap.pool.testWhileIdle}"
        p:dirContextValidator-ref="dirContextValidator" p:contextSource-ref="contextSource" />

    <bean id="dirContextValidator"
        class="org.springframework.ldap.pool.validation.DefaultDirContextValidator"
        p:base="" p:filter="objectclass=*">
        <property name="searchControls">
            <bean class="javax.naming.directory.SearchControls" p:timeLimit="1000"
                p:countLimit="1" p:searchScope="0" p:returningAttributes="" />
        </property>
    </bean>

    <bean id="authenticationManager" class="org.jasig.cas.authentication.AuthenticationManagerImpl">

        <property name="credentialsToPrincipalResolvers">
            <list>
                <bean
                    class="org.jasig.cas.authentication.principal.UsernamePasswordCredentialsToPrincipalResolver" />
                <bean
                    class="org.jasig.cas.authentication.principal.HttpBasedServiceCredentialsToPrincipalResolver" />
            </list>
        </property>

        <property name="authenticationHandlers">
            <list>
                <bean
                    class="org.jasig.cas.authentication.handler.support.HttpBasedServiceCredentialsAuthenticationHandler"
                    p:httpClient-ref="httpClient" />

                <bean class="org.jasig.cas.adaptors.ldap.BindLdapAuthenticationHandler"
                    p:filter="sAMAccountName=%u" p:searchBase="DC=USERS,DC=DOMAIN,DC=com"
                    p:contextSource-ref="contextSource" p:searchContextSource-ref="pooledContextSource"
                    p:ignorePartialResultException="true" />
            </list>
        </property>
    </bean>

    <sec:user-service id="userDetailsService">
        <sec:user name="administrator" authorities="ROLE_ADMIN" />
    </sec:user-service>

    <bean id="attributeRepository"
        class="org.jasig.services.persondir.support.StubPersonAttributeDao">
        <property name="backingMap">
            <map>
                <entry key="uid" value="uid" />
                <entry key="eduPersonAffiliation" value="eduPersonAffiliation" />
                <entry key="groupMembership" value="groupMembership" />
            </map>
        </property>
    </bean>

    <bean id="serviceRegistryDao" class="org.jasig.cas.services.InMemoryServiceRegistryDaoImpl">
        <property name="registeredServices">
            <list>
                <bean class="org.jasig.cas.services.RegisteredServiceImpl">
                    <property name="id" value="0" />
                    <property name="name" value="HTTP" />
                    <property name="description" value="Only Allows HTTP Urls" />
                    <property name="serviceId" value="http://**" />
                    <property name="evaluationOrder" value="10000001" />
                </bean>

                <bean class="org.jasig.cas.services.RegisteredServiceImpl">
                    <property name="id" value="1" />
                    <property name="name" value="HTTPS" />
                    <property name="description" value="Only Allows HTTPS Urls" />
                    <property name="serviceId" value="https://**" />
                    <property name="evaluationOrder" value="10000002" />
                </bean>

                <bean class="org.jasig.cas.services.RegisteredServiceImpl">
                    <property name="id" value="2" />
                    <property name="name" value="IMAPS" />
                    <property name="description" value="Only Allows HTTPS Urls" />
                    <property name="serviceId" value="imaps://**" />
                    <property name="evaluationOrder" value="10000003" />
                </bean>

                <bean class="org.jasig.cas.services.RegisteredServiceImpl">
                    <property name="id" value="3" />
                    <property name="name" value="IMAP" />
                    <property name="description" value="Only Allows IMAP Urls" />
                    <property name="serviceId" value="imap://**" />
                    <property name="evaluationOrder" value="10000004" />
                </bean>
            </list>
        </property>
    </bean>

    <bean id="auditTrailManager"
        class="com.github.inspektr.audit.support.Slf4jLoggingAuditTrailManager" />
</beans> 
`````

# vb.net - 更新数据时循环性能变慢

> ID：10953966
> 
> 赞同：0
> 
> 时间：2012-06-08T18:13:58.883
> 
> 标签：vb.net, winforms, recursion, for-loop, while-loop

在我的 winform 应用程序中，我有 2 个数据表，都包含 37000 行。表 1 有 171 列，表 2 有 4 列。运行 While 循环以更新表 2 中 4 列的表 1 中的值。For 循环在 While 内运行两次以更新值。这样做需要超过 5 分钟。我认为这应该是 5 秒的任务。

正在更新的列是：

> Int64 - 1 列
> 
> 字符串 - 1 列
> 
> 布尔值 - 1 列
> 
> 日期 - 1 列

有人可以给出可能导致此问题的原因吗？

```
 While lintRowCounter < ldtCurrentData.Rows.Count
            ldrCurrentDataRow = ldtCurrentData(lintRowCounter)
            For Each lobjDataEntity As DataEntities In lstDataEntities
                ldrCurrentDataRow(lobjDataEntity.SourceName) = ldtPositionData(lintRowCounter).Item(lobjDataEntity.SourceName)
                If ldtCurrentData.Columns.Contains(lobjDataEntity.SourceName + mstrFormulaColSuffix) Then
                    ldrCurrentDataRow(lobjDataEntity.SourceName + mstrFormulaColSuffix) = ldtPositionData(lintRowCounter).Item(lobjDataEntity.SourceName + mstrFormulaColSuffix)
                End If
                If ldtCurrentData.Columns.Contains(mstrSOFColPrefix + lobjDataEntity.SourceName) Then
                    ldrCurrentDataRow(mstrSOFColPrefix + lobjDataEntity.SourceName) = ldtPositionData(lintRowCounter).Item(mstrSOFColPrefix + lobjDataEntity.SourceName)
                End If
                If ldtCurrentData.Columns.Contains(lobjDataEntity.SourceName + mstrSourceDateColSuffix) Then
                    ldrCurrentDataRow(lobjDataEntity.SourceName + mstrSourceDateColSuffix) = ldtPositionData(lintRowCounter).Item(lobjDataEntity.SourceName + mstrSourceDateColSuffix)
                End If
            Next
            lintRowCounter += 1
        End While 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T20:08:54.827

似乎您已经知道列名，为什么不直接引用它们而不是执行 IF-CONTAINS？以这种方式检查列名似乎很昂贵。此外，您应该考虑将这样的代码`mstrSOFColPrefix + lobjDataEntity.SourceName`放入单个变量中，以便一遍又一遍地构建该字符串。字符串连接很昂贵；希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T18:59:06.667

我唯一能想到的就是批量更新。（即一次处理 2,000 个，而不是一次处理 37,000 个，这样程序就不会超载。）

试试这个：http: [//msdn.microsoft.com/en-us/library/kbbwt18a%28v=vs.80%29.aspx#Y0](http://msdn.microsoft.com/en-us/library/kbbwt18a%28v=vs.80%29.aspx#Y0)

或者这个： http: [//msdn.microsoft.com/en-us/library/aadf8fk2​​%28v =vs.80%29.aspx](http://msdn.microsoft.com/en-us/library/aadf8fk2%28v=vs.80%29.aspx)

# c++ - 鼠标移动时在透明 HDC 上绘图

> ID：10953968
> 
> 赞同：1
> 
> 时间：2012-06-08T18:14:26.903
> 
> 标签：c++, gdi+

使用 C++ 和 GDI+，我在图像上绘制了一个矩形，并与我的 MouseMovements 一起移动/调整矩形的大小，这导致了很多闪烁，所以我决定在我的控件上创建一个透明的 HDC。在单击时，我创建了该 HDC 并在该 HDC 上绘图。

这是我的代码...

```
HDC mSourceHDC; // Handle to the display device context 
HDC mMemoryDC;
HBITMAP mBitmap;
HBITMAP mOverlayBitmap; 
```

在我的鼠标点击回调

```
mSourceHDC = GetDC(hWnd); // Hwnd is the HWND of my control

RECT rc;
GetClientRect(hWnd, &rc);
int32 clientheight = rc.bottom - rc.top;
int32 clientWidth = rc.right - rc.left;

mMemoryDC = CreateCompatibleDC(mSourceHDC);
mBitmap = CreateCompatibleBitmap(mSourceHDC, clientWidth, clientheight);
mOverlayBitmap = (HBITMAP)SelectObject(mMemoryDC, mBitmap);

//SetBkMode(mMemoryDC,TRANSPARENT); // Line 1 
```

// 在我的鼠标移动回调中

```
if(mMemoryDC != NULL) {
  Gdiplus::Graphics gdiGraphics(mMemoryDC);
  gdiGraphics.Clear(Gdiplus::Color.LightGray);  // Line 2

  Gdiplus::Pen* myPen = new Gdiplus::Pen(Gdiplus::Color::White);
  myPen->SetWidth(2);

  Gdiplus::GraphicsPath *cropRectPath = new Gdiplus::GraphicsPath();
  cropRectPath->AddRectangle(cropRectF); // This cropRectF is my rectangle 
  gdiGraphics.DrawPath(myPen, cropRectPath); 

  BitBlt(mSourceHDC, 0, 0,  clntWdth, clntheight, mMemoryDC, 0, 0, SRCCOPY);
} 
```

// 在鼠标离开回调中

```
if(mMemoryDC != NULL) {
  SelectObject(mMemoryDC, mOverlayBitmap);
  DeleteObject(mBitmap);
  DeleteDC(mMemoryDC);

  ReleaseDC(hWnd, mSourceHDC);
} 
```

但是，我的矩形绘制正确，但在 MouseMovement 期间，我的整个窗口变为灰色且图像未显示，如果我删除第 2 行，则整个区域变为黑色，即使我尝试过

```
gdiGraphics.Clear(Gdiplus::Color.Transparent);  in Line 2, still it turns Black. 
```

我想让这个内存 HDC 透明，以便在鼠标移动期间显示我的图像。

任何想法我哪里出错了。谢谢

-潘卡伊

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T19:29:23.413

您正在使用`Bitblt`with从内存 DC 进行复制`SRCCOPY`。这将覆盖所有内容。该`SetBkMode`调用仅用于使用 GDI 绘制文本 - 这与位图传输无关。

消除闪烁的方法是将*所有内容*渲染到屏幕外位图，然后将最终结果blit 回window DC。这就是所谓的双缓冲。

像以前一样创建位图和内存 DC。不要试图清除内存 DC，而是将客户区域中应该出现的任何内容复制到内存 DC。然后在上面绘制选择矩形。最后，将内存 DC 传送回窗口 DC（正如您已经在做的那样）。

# bash - 使用简单的 bash 脚本附加 crontab 文件的问题

> ID：10953970
> 
> 赞同：0
> 
> 时间：2012-06-08T18:14:33.157
> 
> 标签：bash, crontab

我有一个没有按预期工作的简单脚本：

```
#!/bin/bash
CRONFILE="/tmp/temp_cron"
crontab -l > "$CRONFILE" 
grep "* * * * * /usr/local/bin/temp_cpu_gmetric.sh" /tmp/temp_cron
CRONCONT=`grep "* * * * * /usr/local/bin/temp_cpu_gmetric.sh" /tmp/temp_cron`
echo $CRONCONT 
```

我的 crontab 由一行组成，这`* * * * * /usr/local/bin/temp_cpu_gmetric.sh`正是 grep'd 的内容。正如预期的那样，grep 的第一个实例返回此字符串的一个实例。

但是，该`echo $CRONCONT`实例返回`* * * * *`并被一大堆东西替换。这包括运行脚本的目录的内容，还包括许多其他我不立即知道其位置的内容。

如果我`* * * * *`从我的 cronfile 中删除，问题就消失了，但我不知道为什么它不适合`* * * * *`现在。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T18:21:18.990

基本上，一个问题`*`是`grep`. 如果你想搜索`*`你应该引用它，如`\*`. 要了解您的模式为何奏效，请参阅：[chepner 的此评论](https://stackoverflow.com/questions/10953970/trouble-with-simple-bash-script-to-append-crontab-file/10954064#comment14300026_10954064)。

或将`grep`命令替换为`fgrep`(搜索确切的字符串。

另一个问题是，这`*`是一个用于 shell 扩展的元字符，所以你应该做`echo "${YOURVARIABLE}"`.

# android - Spinners 没有初始化为正确的数组

> ID：10953973
> 
> 赞同：1
> 
> 时间：2012-06-08T18:14:44.997
> 
> 标签：android, spinner, android-spinner

我有一个带有三个微调器的应用程序，它们具有唯一的 ID，我正在尝试使用以下代码来初始化它们：

```
 Spinner spinner = (Spinner) findViewById(R.id.spinDouble);
    ArrayAdapter<CharSequence> adapter = ArrayAdapter.createFromResource(this, R.array.double_nums, android.R.layout.simple_spinner_item);
    adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    spinner.setAdapter(adapter);

    Spinner spinner2 = (Spinner) findViewById(R.id.spinReroll);
    ArrayAdapter<CharSequence> adapter2 = ArrayAdapter.createFromResource(this, R.array.reroll_nums, android.R.layout.simple_spinner_item);
    adapter2.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    spinner2.setAdapter(adapter);

    Spinner spinner3 = (Spinner) findViewById(R.id.spinTarget);
    ArrayAdapter<CharSequence> adapter3 = ArrayAdapter.createFromResource(this, R.array.target_nums, android.R.layout.simple_spinner_item);
    adapter3.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    spinner3.setAdapter(adapter);
    spinTarget.setSelection(3); 
```

它们初始化并填充了值，确实如此，但是查看 strings.xml 中的数组：

```
<string-array name="reroll_nums">
    <item>10</item>
    <item>9</item>
    <item>8</item>
    <item>7</item>
    <item>6</item>
    <item>5</item>
    <item >4</item>
    <item >3</item>
    <item >2</item>
</string-array>
<string-array name="double_nums">
    <item>10</item>
    <item>9</item>
    <item>8</item>
    <item>7</item>
    <item>6</item>
    <item>5</item>
    <item >4</item>
    <item >3</item>
    <item >2</item>
    <item >1</item>
</string-array>
<string-array name="target_nums">
    <item>10</item>
    <item>9</item>
    <item>8</item>
    <item>7</item>
    <item>6</item>
    <item>5</item>
    <item >4</item>
    <item >3</item>
    <item >2</item>
    <item >1</item>
</string-array> 
```

Spinner #2 (spinReroll) 的值应该是 2-10，而其他的值应该是 1-10，但是当我在我的虚拟设备中运行这个应用程序时，所有三个微调器都有 1-10 的值，因为选择 1in 在spinReroll 创建一个无限循环：P

我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T18:18:31.527

```
 spinner2.setAdapter(adapter2); 
                            ^^^
 spinner3.setAdapter(adapter3);
                            ^^^ 
```

你先设置`adapter`而不是`adapter2`spinner3。

# vb.net - 强类型多维数组/集合

> ID：10953976
> 
> 赞同：2
> 
> 时间：2012-06-08T18:15:02.143
> 
> 标签：vb.net, multidimensional-array, strongly-typed-dataset

我想创建一个强类型的多维数组或集合，其中包含来自数据库的以下值：

*   文件名（作为字符串）
*   文件大小（整数）

要求：

*   可通过索引访问（例如 Arr(i)(j)、Arr.Row(i) 等）
*   高效（即快速且不占用资源）
*   易于操作、添加、附加等。
*   .NET 3.5 兼容

* * *

感谢大家的精彩回答。这就是我去的... :)

```
Structure FileRecord
    Dim Name As String
    Dim Size As Integer

    Sub New(ByVal FileName As String, ByVal FileSize As Integer)
        Me.Name = FileName
        Me.Size = FileSize
    End Sub
    Sub New(ByVal Files() As FileRecord)
        For Each f As FileRecord In Files
            Dim fr As New FileRecord(f.Name, f.Size)
        Next
    End Sub
End Structure 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T18:19:14.217

您不能拥有包含两种不同类型的多维数组。

相反，您通常会`List(Of T)`使用您的数据创建一个包含自定义类的单维数组（或 ）。

在您的情况下，您可能需要以下内容：

```
Public Class FileRecord
    Public Property Name As String
    Public Property Size as Integer
End Class 
```

然后，制作一个`List(Of FileRecord)`来保存您的数据。然后，您可以通过以下方式访问它：

```
Dim nameAtIndex = theList(i).Name
Dim sizeAtIndex = theList(i).Size 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-08T18:18:00.263

您可以使用通用列表集合：

```
Public Class MyItem   
  Public Property  FileName As String
  Public Property  FileSize As Integer   
End Class 
```

现在你可以有一个列表：

```
Dim MyItems AS List(Of MyItem) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-08T18:33:20.183

请记住，虽然它不是强类型的，但[HashTable](http://msdn.microsoft.com/en-us/library/aahzb21x)类在存储和检索大量数据方面表现最好。如果 FileName 是唯一的，那将是您的密钥。此外，您可以将哈希表包装在另一个类中，并提供用于添加和检索的强类型方法。

根据[对此](https://stackoverflow.com/questions/301371/why-dictionary-is-preferred-over-hashtable-in-c)SO 帖子的回答，[Dictionary(of T)](http://msdn.microsoft.com/en-us/library/xfhwa508.aspx)提供了哈希表的通用实现。可能值得研究。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-07T19:11:26.243

让我们保持超级简单。我真的不喜欢程序员让事情变得比他们需要的更复杂。

```
Dim Multi_Dimensional_Array As Object(,) = _
        {{"Item 1", "1", "2", "3", "4", "5"}, 
         {"Item 2", "6", "7", "8", 9"", "No More Items"}} 
```

如果您愿意，可以将其从“对象”更改为“字符串”。

# php - “Zend_Mail_Protocol_Exception：不正确的身份验证数据”发生在生产中，但不在本地主机中，使用相同的传输配置

> ID：10953981
> 
> 赞同：1
> 
> 时间：2012-06-08T18:15:22.650
> 
> 标签：php, zend-framework, zend-mail

我正在使用 Zend_Mail 来交付基于 Zend Frameowrk 的 MVC 应用程序。传输配置如下：

```
; Mail (SMTP Transport)
resources.mail.transport.type       = smtp
resources.mail.transport.host       = "mail.mydomain.com"
resources.mail.transport.auth       = login
resources.mail.transport.username   = "no-reply@mydomain.com"
resources.mail.transport.password   = "mypasswordhere"
resources.mail.transport.register   = true

resources.mail.defaultFrom.email    = "no-reply@mydomain.com"
resources.mail.defaultFrom.name     = "Automatic email from mydomain.com"
resources.mail.defaultReplyTo.email = "no-reply@mydomain.com"
resources.mail.defaultReplyTo.name  = "Automatic email from mydomain.com" 
```

Zend 应用程序工作流将此设置为默认邮件传输。这在本地主机中运行良好，但在生产中失败。发送过程如下：

```
$objMail = new Zend_Mail();

if( $fromEmail != null ){
    $objMail->setFrom($fromEmail, $fromName);
}

$objMail->addTo($to);
if( $cc != null ){
    $objMail->addCc($cc);
}
if( $bcc != null ){
    $objMail->addBcc($bcc);
}

$objMail->setSubject($subject);

if( $messageHtml != null ){
    $objMail->setBodyHtml($messageHtml, mb_detect_encoding($messageHtml));
}
if( $messageTxt != null ){
    $objMail->setBodyText($messageTxt, mb_detect_encoding($messageTxt));
}
$objMail->send(); 
```

生产中的例外是：

```
exception 'Zend_Mail_Protocol_Exception' with message 'Incorrect authentication data&#13;
' in /home/myuser/public_html/subdomains/myapp/library/Zend/Mail/Protocol/Abstract.php:431
Stack trace:
<<issue 0>> /home/myuser/public_html/subdomains/myapp/library/Zend/Mail/Protocol/Smtp/Auth/Login.php(95): Zend_Mail_Protocol_Abstract->_expect(235)
<<issue 1>> /home/myuser/public_html/subdomains/myapp/library/Zend/Mail/Protocol/Smtp.php(217): Zend_Mail_Protocol_Smtp_Auth_Login->auth()
<<issue 2>> /home/myuser/public_html/subdomains/myapp/library/Zend/Mail/Transport/Smtp.php(200): Zend_Mail_Protocol_Smtp->helo('localhost')
<<issue 3>> /home/myuser/public_html/subdomains/myapp/library/Zend/Mail/Transport/Abstract.php(348): Zend_Mail_Transport_Smtp->_sendMail()
<<issue 4>> /home/myuser/public_html/subdomains/myapp/library/Zend/Mail.php(1194): Zend_Mail_Transport_Abstract->send(Object(Zend_Mail))
<<issue 5>> /home/myuser/public_html/subdomains/myapp/application/controllers/MailController.php(404): Zend_Mail->send()
<<issue 6>> /home/myuser/public_html/subdomains/myapp/library/Zend/Controller/Action.php(516): MailController->sendmailAction()
<<issue 7>> /home/myuser/public_html/subdomains/myapp/library/Zend/Controller/Dispatcher/Standard.php(295): Zend_Controller_Action->dispatch('sendmailActi...')
<<issue 8>> /home/myuser/public_html/subdomains/myapp/library/Zend/Controller/Front.php(954): Zend_Controller_Dispatcher_Standard->dispatch(Object(Zend_Controller_Request_Http), Object(Zend_Controller_Response_Http))
<<issue 9>> /home/myuser/public_html/subdomains/myapp/library/Zend/Application/Bootstrap/Bootstrap.php(97): Zend_Controller_Front->dispatch()
<<issue 10>> /home/myuser/public_html/subdomains/myapp/library/Zend/Application.php(366): Zend_Application_Bootstrap_Bootstrap->run()
<<issue 11>> /home/myuser/public_html/subdomains/myapp/public/index.php(26): Zend_Application->run()
<<issue 12>> {main} 
```

正如我所说，我可以使用相同的传输配置从本地主机毫无问题地发送电子邮件，甚至我有一个 Gmail 帐户检查具有相同配置（至少相同的身份验证凭据）的新电子邮件并且它正在工作。

我已经测试过创建一个不同的电子邮件帐户来用作我的 SMTP 传输。而不是“no-reply@mydomain.com”，我称之为“noreply@mydomain.com”，密码完全不同。同样，它在本地主机上工作正常，但在生产中失败。

**但是我已经用一个已经存在的帐户（“admin@mydomain.com”帐户凭据）对其进行了测试，它在生产和本地主机中都有效！！**

为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T18:41:12.873

从 ZF 代码来看，邮件`Incorrect authentication data`是由邮件服务器本身返回的，而不是 Zend Framework 特有的任何东西。消息本身可能以`535`错误代码的形式返回。

如果有任何可能的方法，请查看是否可以使用`tcpdump`Wireshark 或您首选的网络分析器从生产系统获取数据包捕获。

由于您说它在生产和开发中使用不同的帐户都可以正常工作，我认为身份验证不会失败，因为您没有使用 SSL/TLS，或者`mail.mydomain.com`在两个系统上解析为不同的 IP 地址。

在这一点上，我有兴趣查看邮件事务的数据包捕获，因为这可能是查看两个系统上登录过程之间差异的唯一方法。

希望有帮助。

# c++ - Windows 7 当前启动/关闭位图

> ID：10953984
> 
> 赞同：0
> 
> 时间：2012-06-08T18:15:35.943
> 
> 标签：c++, windows, windows-7, bitmap, themes

有人可以告诉我如何获取当前使用的启动/关闭位图或 Windows 7 动画？我知道它们会根据使用的主题进行更改。我正在编写用于编辑当前主题图像的小工具，我不想使用现有工具。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T20:06:57.910

正如@Red Serpent 在他的评论中所写，这些背景图像不是主题的一部分，而是由 OEM 提供，因此在您更改 Windows 主题时不会改变。

可以独立于当前主题更改登录、注销和锁定屏幕背景。您可以通过更改注册表设置并在 Windows 文件夹深处创建/修改一些专用图像文件来实现此目的。[此博客文章](http://www.techrepublic.com/blog/window-on-windows/change-and-customize-windows-7s-logon-screen-wallpaper/2135)中描述了所需的步骤。

您可以通过查找和读取这些文件来提取和更改 OEM 登录屏幕背景图像。但是，无法提取默认的 Windows 7 登录屏幕，因为它位于其他位置，可能与十几个其他图像捆绑在一个资源文件中。

# javascript - jQuery RadioButtonList 检查值返回“on”

> ID：10953986
> 
> 赞同：2
> 
> 时间：2012-06-08T18:15:43.623
> 
> 标签：javascript, jquery, asp.net, checkbox, radio-button

我有一个奇怪的问题。我有一个单选按钮列表，当它被选中时，它会显示下面与所选项目相对应的 div。单选按钮列表上方是复选框列表。单选按钮单击事件可以正常工作，直到您从上面的复选框列表中选中一个框。从上面的复选框列表中选中一个项目后，它开始返回“on”而不是所选单选按钮的值。任何的想法？

jQuery：

```
<script type="text/javascript">
function CheckAllTrucks(sendingcb) {
    $("#divTruckList :checkbox").prop("checked", $(sendingcb).prop("checked"));
}

function SetTimeframeInput(sendingrbl) {
    var value = $(sendingrbl + ":checked").val();

    $("#divTimeFrameControls .timeframectrls").each(function () {
        $(this).hide();
    });

    $("#div" + value).show();
} 
```

HTML/ASP.NET 代码：

```
<div class="form-field">
    <asp:CheckBox ID="cbSelectAllTrucks" runat="server" Text="Select All Trucks" onclick="CheckAllTrucks(this)" />
    <div id="divTruckList">
        <asp:CheckBoxList ID="cblTrucks" runat="server" />
    </div>
</div>
<div class="form-field">
    <asp:RadioButtonList ID="rblTimeFrame" runat="server" onclick="SetTimeframeInput(this)">
        <asp:ListItem Text="Month" Value="month" />
        <asp:ListItem Text="Quarter" Value="quarter" />
        <asp:ListItem Text="January-December" Value="jandec" />
        <asp:ListItem Text="July-June" Value="juljun" />
    </asp:RadioButtonList>
    <div id="divTimeFrameControls">
        <div id="divmonth" class="timeframectrls" style="display: none;">
            <!-- month fields -->
        </div>
        <div id="divquarter" class="timeframectrls" style="display: none;">
            <!-- quarter fields -->
        </div>
        <div id="divjandec" class="timeframectrls" style="display: none;">
            <!-- jandec fields -->
        </div>
        <div id="divjuljun" class="timeframectrls" style="display: none;">
            <!-- juljun fields -->
        </div>
    </div>
</div> 
```

提前致谢！

编辑

我发现只有在选中其中一个复选框时才会发生这种情况。如果您选中然后取消选中，则该值仍然正确。只有当复选框被选中时，它才会将值设置为“on”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T18:30:48.510

不要传递`(this)`给函数，而是尝试使用`EventObject`默认情况下在 click 上传递的内容：

```
function SetTimeframeInput(e) {
    var value = $(e.currentTarget).val();   

// value contains selected radio button`s value 

// continue your code here 
```

}

我希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T19:10:16.080

仍然不知道问题是什么，但能够通过直接引用单选按钮列表的 ID 来解决它。像这样：

```
function SetTimeframeInput() {
    var value = $("#rblTimeFrame input:checked").val();

    $("#divTimeFrameControls .timeframectrls").each(function () {
        $(this).hide();
    });

    $("#div" + value).show();
} 
```

感谢您的输入。

# javascript - 如果文本框为空，则将文本框返回默认值

> ID：10953987
> 
> 赞同：0
> 
> 时间：2012-06-08T18:15:55.040
> 
> 标签：javascript, jquery, html

我有一个用于搜索的文本框。出于某种原因， .blur() 无法在我的计算机上运行。我创建了一个测试文件来测试它，它仍然无法正常工作：

```
<!doctype html>
<html>
 <head>
<meta charset="utf-8">
<title>Demo</title>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script type="text/javascript">
    $('#search').blur(function() {
        alert('hello');
});
</script>
</head>
<body>
<input id="search" value="hello" type="text" />
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T18:19:51.243

就像戴夫说的，试试这个：

```
$(document).ready(function() {
    $('#search').blur(function() {
        alert('hello');
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T19:02:17.077

也许只是使用非 jquery 的做事方式？

```
document.getElementById("search").addEventListener('blur',function(){
    document.getElementById("search").value = "DEFAULT_VALUE";
}); 
```

# asp.net-mvc - 如何将数据库值放入asp.net mvc3中控制器的数组中

> ID：10953989
> 
> 赞同：3
> 
> 时间：2012-06-08T18:15:59.950
> 
> 标签：asp.net-mvc, asp.net-mvc-3

我的数据库中有一个名为 Scope 的表，该表有两列：ScopeName 和 ScopeID。如何将 ScopeName 列的所有数据传递给我的控制器并将它们放入一个数组中？之后，我想在我的视图中的下拉列表中显示内容。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T18:49:22.663

如果您可以`IQueryable<Scope>`从数据库中获取一个，则此 LINQ 代码应该可以工作：

```
var scopeNames = (from s in DB.GetScopes()
                 select s.ScopeName).ToArray(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T01:22:14.513

跟随@Charmander 回答..

要将数据传递给视图，您可以执行以下操作：

在您的控制器中，使用您的数组创建一个`SelectList`并将其传递给您的视图：

```
ViewBag.myList = new SelectList(scopeNames); 
```

然后在您看来，使用 Html.DropDownlist：

```
@Html.DropDownList("myList", String.Empty) 
```

# php - PHP Echo 将 HTML 转换为文本

> ID：10953990
> 
> 赞同：1
> 
> 时间：2012-06-08T18:16:14.593
> 
> 标签：php, javascript, jquery, echo

我有一个脚本来回显用户的选择：

```
<script>
        function onSuccess(data, status)
        {
            data = $.trim(data);
            $("#car-check").text(data);
        }

        function onError(data, status)
        {
            // handle an error
        }        

        $(document).ready(function() {
            $("#submit").click(function(){

                var formData = $("#car-locationform").serialize();

                $.ajax({
                    type: "POST",
                    url: "pages/callajax.php",
                    cache: false,
                    data: formData,
                    success: onSuccess,
                    error: onError
                });

                return false;
            });
        });
    </script> 
```

选区：

```
<ul class="print-menu">
            <li>
                <label for="select-choice-0" class="select">Parking Method:</label>
                <select name="parkingoption" id="parkingoptions" data-theme="b" data-overlay-theme="d" data-native-menu="false" tabindex="-1">
                    <option value="">Select One</option>
                    <option value="Self Parking">Self Parking</option>
                    <option value="auto">Valet Parking</option>
                </select>
                </li>
                <li>
                    <div class="self carlocation">
                        <h1>Enter Car Location:</h1>
                        <label for="select-choice-0" class="select">Floor:</label>
                        <select name="locationfloor" id="locationfloor" data-theme="b" data-overlay-theme="d" data-native-menu="false" tabindex="-1">
                            <option value="">Floor Select</option>
                            <option value="1">F1</option>
                            <option value="2">F2</option>
                            <option value="3">F3</option>
                            <option value="4">F4</option>
                        </select>
                    </div>
                </li>
                <li>
                    <div class="self car-position">
                        <label for="select-choice-0" class="select">Row:</label>
                        <select name="select-choice-15" id="positionrow" data-theme="b" data-overlay-theme="d" data-native-menu="false" tabindex="-1">
                            <option value="">Row Select</option>
                            <option value="1">1</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5</option>
                            <option value="6">6</option>
                            <option value="7">7</option>
                        </select>
                    </div>
                </li>               
                <li>
                    <div class="self car-section">
                        <label for="select-choice-0" class="select">Section:</label>
                        <select name="select-choice-15" id="positionrow" data-theme="b" data-overlay-theme="d" data-native-menu="false" tabindex="-1">
                            <option value="">Section Select</option>
                            <option value="A">A</option>
                            <option value="B">B</option>
                            <option value="C">C</option>
                            <option value="D">D</option>
                            <option value="E">E</option>
                            <option value="F">F</option>
                            <option value="G">G</option>
                        </select>
                    </div>
                </li>
                <li>
                    <div class="self car-section">
                        <label for="select-choice-0" class="select">Spot:</label>
                        <select name="select-choice-15" id="position-row" data-theme="b" data-overlay-theme="d" data-native-menu="false" tabindex="-1">
                            <option value="">Spot Select</option>
                            <option value="1-A">1-A</option>
                            <option value="2-B">2-B</option>
                            <option value="3-C">3-C</option>
                            <option value="4-D">4-D</option>
                            <option value="5-E">5-E</option>
                            <option value="6-F">6-F</option>
                            <option value="7-G">7-G</option>
                        </select>
                    </div>
                </li>
                <div class="self car-submit">
                    <button id="submit" type="submit" name="submit" value="submit" data-theme="b">Submit</button>
                </div>
            </ul>
            <div id="car-check"></div> 
```

阿贾克斯页面：

```
<?php
    $parktype = $_POST["parkingoption"];
    $carfloor = $_POST["locationfloor"]; 
    echo "<h1>Park Type: $parktype </h1>" ;
    echo "<br/>";
    echo "<span> Park Type: $parktype </span>";
?> 
```

用户选择的任何内容都会出现在#car-check 中。但由于某种原因，回声中的 HTML 只是以文本形式出现。我暂时只是从 $parktype 开始进行测试。

任何帮助将不胜感激，谢谢！

更新 -

谢谢大家我觉得完全愚蠢没有注意到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T18:18:23.633

更改`$("#car-check").text(data);`为`$("#car-check").html(data);`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T18:18:47.710

使用`dataType:'html'`：

```
 $.ajax({
                type: "POST",
                dataType:'html',
                url: "pages/callajax.php",
                cache: false,
                data: formData,
                success: onSuccess,
                error: onError
            }); 
```

并改变：

```
$("#car-check").text(data); 
```

至：

```
$("#car-check").html(data); 
```

# python - 在使用 Scrapy 进行身份验证时爬取 LinkedIn

> ID：10953991
> 
> 赞同：11
> 
> 时间：2012-06-08T18:16:20.140
> 
> 标签：python, linkedin, scrapy, scraper

因此，我已经阅读了[在 Scrapy 中使用经过身份验证的会话的 Crawling](https://stackoverflow.com/questions/5851213/crawling-with-an-authenticated-session-in-scrapy)并且我挂断了，我 99% 确定我的解析代码是正确的，我只是不相信登录正在重定向并成功。

我也遇到了 check_login_response() 的问题，不确定它正在检查哪个页面。虽然“退出”是有道理的。

====== 已更新 ======

```
from scrapy.contrib.spiders.init import InitSpider
from scrapy.http import Request, FormRequest
from scrapy.contrib.linkextractors.sgml import SgmlLinkExtractor
from scrapy.contrib.spiders import Rule

from scrapy.spider import BaseSpider
from scrapy.selector import HtmlXPathSelector

from linkedpy.items import LinkedPyItem

class LinkedPySpider(InitSpider):
    name = 'LinkedPy'
    allowed_domains = ['linkedin.com']
    login_page = 'https://www.linkedin.com/uas/login'
    start_urls = ["http://www.linkedin.com/csearch/results?type=companies&keywords=&pplSearchOrigin=GLHD&pageKey=member-home&search=Search#facets=pplSearchOrigin%3DFCTD%26keywords%3D%26search%3DSubmit%26facet_CS%3DC%26facet_I%3D80%26openFacets%3DJO%252CN%252CCS%252CNFR%252CF%252CCCR%252CI"]

    def init_request(self):
        #"""This function is called before crawling starts."""
        return Request(url=self.login_page, callback=self.login)

    def login(self, response):
        #"""Generate a login request."""
        return FormRequest.from_response(response,
                    formdata={'session_key': 'user@email.com', 'session_password': 'somepassword'},
                    callback=self.check_login_response)

    def check_login_response(self, response):
        #"""Check the response returned by a login request to see if we aresuccessfully logged in."""
        if "Sign Out" in response.body:
            self.log("\n\n\nSuccessfully logged in. Let's start crawling!\n\n\n")
            # Now the crawling can begin..

            return self.initialized() # ****THIS LINE FIXED THE LAST PROBLEM*****

        else:
            self.log("\n\n\nFailed, Bad times :(\n\n\n")
            # Something went wrong, we couldn't log in, so nothing happens.

    def parse(self, response):
        self.log("\n\n\n We got data! \n\n\n")
        hxs = HtmlXPathSelector(response)
        sites = hxs.select('//ol[@id=\'result-set\']/li')
        items = []
        for site in sites:
            item = LinkedPyItem()
            item['title'] = site.select('h2/a/text()').extract()
            item['link'] = site.select('h2/a/@href').extract()
            items.append(item)
        return items 
```

通过在 self.initialized() 前面添加“Return”解决了该问题

再次感谢！-标记

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T18:22:12.880

```
class LinkedPySpider(BaseSpider): 
```

应该：

```
class LinkedPySpider(InitSpider): 
```

此外，您不应该覆盖`parse`我在此处的回答中提到的功能：[https ://stackoverflow.com/a/5857202/crawling-with-an-authenticated-session-in-scrapy](https://stackoverflow.com/a/5857202/crawling-with-an-authenticated-session-in-scrapy)

如果您不了解如何定义提取链接的规则，只需正确阅读文档：
[http://readthedocs.org/docs/scrapy/en/latest/topics/spiders.html#scrapy.contrib。 spiders.Rule](http://readthedocs.org/docs/scrapy/en/latest/topics/spiders.html#scrapy.contrib.spiders.Rule)
[http://readthedocs.org/docs/scrapy/en/latest/topics/link-extractors.html#topics-link-extractors](http://readthedocs.org/docs/scrapy/en/latest/topics/link-extractors.html#topics-link-extractors)

# javascript - Backbone.js：有没有办法在创建集合时为集合中的所有模型设置属性

> ID：10953993
> 
> 赞同：0
> 
> 时间：2012-06-08T18:16:21.907
> 
> 标签：javascript, backbone.js

我想知道当我实例化一个新集合时是否有任何方法可以传入一个值，该集合将被设置为添加到集合中的所有新模型的属性。例如，

```
allSchools = [/* list of schools */];
this.schoolTypes = new Backbone.Collection([], { model:SchoolType }); //pass in allSchools here, somehow
this.schoolTypes.add({name:'New SchoolType'}); 
```

新添加的模型将有一个 this.allSchools （或 this.options.allSchools 或类似的东西）。似乎应该有一个足够简单的方法来做到这一点？目前我只是访问一个全局 allSchools 对象，但它不是很模块化。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T18:26:07.077

这可能不是最好的方法，但您可以向模型添加一个反向链接，让它访问它的父集合：

```
this.schoolType.allSchools = allSchools;
var col = this.schoolType;
this.schoolType.each(function(el,i){
    el.collection = col;
});
// ...
// then access all the schools from your SchoolType model `m` : 
if(m.collection)
    var allSchools = m.collection.allSchools; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T15:30:54.147

正如 mu 在他的评论中提到的，模型具有内置的 .collection 属性。所以，如果我在集合上设置一个属性，我可以从集合中的任何模型访问它，如下所示：

```
schoolType = schoolTypes.at(0);
allSchools = schoolType.collection.allSchools; 
```

# python - Python scikits 学习 - 分离超平面方程

> ID：10953997
> 
> 赞同：2
> 
> 时间：2012-06-08T18:16:25.623
> 
> 标签：python, geometry, machine-learning, scikits, scikit-learn

分离超平面的方程是`W.X + b = 0`。

对于[scikit-learn 中的支持向量机，](http://scikit-learn.org/stable/auto_examples/svm/plot_separating_hyperplane.html#example-svm-plot-separating-hyperplane-py)分离超平面是如何得出的？`a`' ' 和 ' '是什么`w`意思？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T18:31:34.690

在 scikit-learn 中，`coef_`属性保存线性模型的分离超平面的向量。它具有`(n_classes, n_features)`if `n_classes > 1`(multi-class one-vs-all) 和`(1, n_features)`二进制分类的形状。

在这个玩具二元分类示例中，`n_features == 2`, 因此`w = coef_[0]`是与超平面正交的向量（超平面完全由它 + 截距定义）。

为了在 2D 情况下绘制这个超平面（2D 平面的任何超平面都是 1D 线），我们想要找到 a `f`，如`y = f(x) = a.x + b`. 在这种情况下`a`是直线的斜率，可以通过 计算`a = -w[0] / w[1]`。